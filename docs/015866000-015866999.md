# StackOverflow 问答 15866000-15866999

# jquery - jQuery .each 循环失败 - 从 HTML 对象获取数据并解析到 .append

> ID：15866003
> 
> 赞同：0
> 
> 时间：2013-04-07T18:17:01.390
> 
> 标签：jquery, jquery-ui-tabs, each

**这是我正在尝试做的事情：**

* * *

[这就是最终结果应该是什么样子......](http://jsfiddle.net/49kg9/10/)

* * *

*   找到`.section`里面的所有元素`.tabbed`
*   对于每个`.section-title`找到`.section`的`.tabbed`，*执行此操作*

**基本上是（代码更新）**

```
$(document).ready(function(e) {   
  t = $('.tabbed');
  s = $('.section');
  ss = $('.sub-section');   
  st = $('.section-title');
   x = $(this);   

$(t).find(s).each(function(i, section) {
  $(section).find(st).each(function(i2, title) {
    name = $(title).text();         
    url = $(section).attr('id');
    t.append('<ul id="list"></ul>');
    $('#list').html('<li><a href="#'+url+'">'+name+'</a></li>');    
  });
});
t.tabs();
}) 
```

*`<li>` *元素是使用* `.section` `id` *作为* `<a href""></a>` *链接包含* *文本**的位置创建的。*`.section-title`*

 **我整理了一个 [**jsfiddle**](http://jsfiddle.net/49kg9/7/)。`.each`我猜我仍然误解了一些东西。

**将实际代码留在 jsfiddle 中以保持帖子整洁。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:29:02.263

这是你想要达到的目标吗？
我修复了元素的循环，因为您实际上并不是指实际选择的元素，而是通过它们的类选择元素。要选择每个循环中当前正在处理的元素，请使用`$(this)`

这是一个更新的小提琴，希望对您有所帮助 - [http://jsfiddle.net/49kg9/5/](http://jsfiddle.net/49kg9/5/)**

# qt - 如何在 BlackBerry 10、Qt QML Cpp 中的特定像素上绘画

> ID：15866005
> 
> 赞同：0
> 
> 时间：2013-04-07T18:17:08.863
> 
> 标签：qt, qml, blackberry-10

我只是想在屏幕上的特定点上绘制一个 1 像素点。有没有办法做到这一点？在 QML 或 cpp 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:48:50.743

矩形 QML 项目应该适合您：http: [//qt-project.org/doc/qt-4.8/qml-rectangle.html](http://qt-project.org/doc/qt-4.8/qml-rectangle.html)

如果您需要绘制更具体和更灵活的东西，那么您可以在 C++ 中自定义 QDeclarativeItem，在自定义类中取消设置 QGraphicsItem::ItemHasNoContents 标志并实现绘制方法。更多细节：http: [//qt-project.org/doc/qt-4.8/qdeclarativeitem.html](http://qt-project.org/doc/qt-4.8/qdeclarativeitem.html)

# associations - Rails 4.0 beta，fields_for 在一对多关联中不接受复数模型名

> ID：15866013
> 
> 赞同：2
> 
> 时间：2013-04-07T18:18:17.000
> 
> 标签：associations, ruby-on-rails-4, fields-for

我正在创建一个应用程序，允许用户记录锻炼和锻炼，锻炼作为我锻炼表单中的嵌套模型。

**路线.rb：**

```
 resources :users do 
    resources :workouts
  end 
```

**锻炼.rb：**

```
attr_accessible :name, :exercises_attributes
has_many :exercises
belongs_to :user
accepts_nested_attributes_for :exercises, :allow_destroy => true 
```

**练习.rb：**

```
attr_accessible :name, :weight, :reps
belongs_to :workout 
```

在我的**锻炼控制器.rb 中**：

```
def create
  @workout = @user.workouts.new(workout_params)
  @exercise = @workout.exercises.new(params[:workout][:exercise])

respond_to do |format|
  if @workout.save && @exercise.save
    //...etc 
```

在我的**锻炼/_form.html.erb 中**：

```
<%= form_for [@user, @workout], builder: LabeledFormBuilder do |f| %>

    <%= f.text_field :name %>

        <%= f.fields_for :exercises do |builder| %>
            <%= builder.text_field :name %>
            <%= builder.text_field :weight %>
            <%= builder.text_field :reps %>
        <% end %>

        <%= f.submit %>

<% end %> 
```

我**无法**让 fields_for 按照文档（[http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)）中的规定工作。

它说如果它处于一对多关联中，您应该能够将模型的复数版本传递给 fields_。这在我的锻炼#new 动作中很好用，但在我的锻炼#edit 中，我必须传入单数版本 (:exercise) 才能显示对象（锻炼）的当前属性值。文档说：

> 通常这可以通过仅将模型对象的名称传递给 fields_for 来简化 - ...在这种情况下，如果 :permission 也恰好是实例变量 @permission 的名称，则输入字段的初始状态将反映该变量的属性@permission.admin。

将 :exercises 传递给 fields_for 不会将属性保存到数据库，而将 :exercise 传递给 fields_for 会将其保存到数据库，但不会在编辑操作中显示当前属性值。

在锻炼#new 和 #edit: **中使用 fields_for :exercise**

```
<div class="field"><input id="workout_exercise_name" name="workout[exercise][name]" placeholder="name" type="text" /></div> 
```

**与 fields_for ：练习**

```
<div class="field"><input id="workout_exercises_attributes_0_name" name="workout[exercises_attributes][0][name]" placeholder="name" type="text" /></div> 
```

最后，我在锻炼#create 的开发日志中有以下内容：

```
Started POST "/users/5/workouts" for 127.0.0.1 at 2013-04-07 14:13:45 -0400
Processing by WorkoutsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"a98ozlUWDtZc49v/PfFds/V0S56R2Y73HsxW6+wjYWI=", "workout"=>{"name"=>"test", "exercise"=>{"name"=>"lunge", "weight"=>"30", "reps"=>"20", "_destroy"=>""}}, "commit"=>"Create Workout", "user_id"=>"5"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."auth_token" = 'dHhQQSEecDOetjh-ZROpmw' LIMIT 1
Unpermitted parameters: exercise
WARNING: Can't mass-assign protected attributes for Exercise: _destroy
    app/controllers/workouts_controller.rb:32:in `create'
   (0.2ms)  BEGIN
  SQL (0.8ms)  INSERT INTO "workouts" ("created_at", "name", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Sun, 07 Apr 2013 18:13:45 UTC +00:00], ["name", "test"], ["updated_at", Sun, 07 Apr 2013 18:13:45 UTC +00:00], ["user_id", 5]]
  SQL (0.6ms)  INSERT INTO "exercises" ("created_at", "name", "reps", "updated_at", "weight", "workout_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Sun, 07 Apr 2013 18:13:45 UTC +00:00], ["name", "lunge"], ["reps", 20], ["updated_at", Sun, 07 Apr 2013 18:13:45 UTC +00:00], ["weight", 30], ["workout_id", 64]]
   (0.6ms)  COMMIT
   (0.4ms)  BEGIN
   (0.2ms)  COMMIT
Redirected to http://localhost:3000/users/5/workouts
Completed 302 Found in 21ms (ActiveRecord: 3.5ms) 
```

注意**不允许的参数：exercise**。

有谁知道为什么会这样？我超级难过。任何帮助都会非常棒。如果没有人有任何想法，我可能会尝试创建一个新的 rails 4 应用程序并测试这些关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:03:17.527

在 Rails 4 应用程序中，您需要切换批量分配策略以使用强参数。这意味着从您的模型中删除 attr_accessible 并将它们放置在您的控制器中。这就是您的日志在第 6-7 行告诉您的内容。

使用嵌套属性，您的控制器中的锻炼参数将看起来像这样：

```
private

def workout_params
  params.require(:workout).permit(
    :id,
    :next_attribute,
    :next_attribute,
    exercises_attributes: [
    :id,
    :next_attribute,
    :next_attribute
  ])
end 
```

有多种资源可获取有关强参数的更多信息 - 这是 Ryan Bates 提供的资源：[http ://railscasts.com/episodes/371-strong-parameters](http://railscasts.com/episodes/371-strong-parameters)

# javascript - 如何让 Handlebars 模板返回 DOM 元素而不是 HTML 字符串？

> ID：15866014
> 
> 赞同：0
> 
> 时间：2013-04-07T18:18:21.577
> 
> 标签：javascript, backbone.js, handlebars.js, mustache

我在我的 Backbone.js 应用程序中使用 Handlebars。我想知道如何让 Handlebars 模板返回 DOM 元素而不是字符串？

这就是我的意思：

```
define([
    'underscore',
    'backbone',
    'handlebars',
    'text!templates/myTemplate.hbs'
], function(_, Backbone, handlebars, template) {
   ...
   ...
   render: function() {
       // This returns me a string of HTML, I would like to be able
       // to get actual DOM elements so that I can use appendChild
       // and insertBefore etc.
       var hbTemplate = Handlebars.compile(template);
       var templateString = hbTemplate(/* some json data */);
   },
   ...
   ... 
```

我曾尝试使用 DOMParser 将 HTML 字符串解析为 DOM 元素，但由于 Handlebars 模板中有很多额外的空格，会出现语法错误。但是，如果 Handlebars 能够以某种方式返回 DOM 元素而不是我自己解析它们，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:32:40.397

您可以将输出传递给 jQuery（如果这是一个选项），据我所知，它会解析车把模板。不知道 jQuery 是否是一个选项，但类似于：

```
var hbTemplate = Handlebars.compile(template);
var templateJqueryDom = $(hbTemplate(/* some json data */)) 
```

# exception - 运行时空指针异常

> ID：15866021
> 
> 赞同：0
> 
> 时间：2013-04-07T18:18:36.600
> 
> 标签：exception, runtime

这是我在此的头一篇博文。我正在尝试创建一个单链接列表。我正在使用`AtEnd`and`AtStart`方法在列表的末尾或开头插入值，并使用`display`方法打印所有值。插入方法似乎工作正常（至少我认为是这样），但每当我调用 display 方法时，它只显示第一个值，然后出现空指针异常。例如，当我运行此代码时，我只看到 9，然后有 NPE，尽管我已经检查了“非空”的显示方法。

```
class node {
    private int data;
    private node next;

    node() {

    }

    node(int data) {
        this.data = data;
        this.next = null;
    }
    public int getData() {
        return data;
    }

    public void setData(int data) {
        this.data=data;
    }

    public node getNext() {
        return next;
    }

    public void setNext(node next) {
        this.next = next;
    }
}

public class list extends node {
    node head;
    list() {

    }

    public void AtStart(int val) {
        node n = new node(val);
        if (head == null) {
            head=n;
        } else {
            n.setNext(head);
            int temp = head.getData();
            head.setData(val);
            n.setData(temp);
            //n = head;
        }
    }

    public void AtEnd(int val) {
        if (head == null) {
            node n = new node(val);
            head = n;
    } else {
            node t = head;
            for(; t.getNext() != null; ) {
                if(t.getNext() == null) {
                    t.setNext(new node (val));
                }
                t = t.getNext();
            }
        }
    }

    public void display() {
        node t = head;
        for(; t.getNext() == null;) {
            if (t !=null) {
                System.out.println(t.getData());
                t = t.getNext();
            }
        }
    }
}

public static void main(String args[]) {
    list l = new list();
    l.AtStart(16);
    l.AtEnd(6);
    l.AtEnd(36);
    l.AtStart(9);
    l.AtEnd(22);
    l.display();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:33:41.000

我不明白你的 AtStart 函数做了什么，它应该更简单：

```
public void AtStart(int val){
if(head==null){
head=n;
}
else{
head.setnext(head);
head.setData(val);
}
} 
```

# aptana3 - Aptana Studio 3 标记出现次数按钮

> ID：15866022
> 
> 赞同：0
> 
> 时间：2013-04-07T18:18:43.430
> 
> 标签：aptana3

我知道你可以去窗口 -> 首选项 -> aptana studio -> [语言] -> “用背景颜色标记出现”复选框。

但是曾经有（在早期版本中，我很确定，但绝对是在香草 Eclipse 中）一个工具栏按钮可以为所有编辑器启用/禁用它。

有谁知道怎么找回那个按钮？这是我喜欢经常打开/关闭的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:44:16.467

此按钮在 Aptana Studio 3 (3.3.2.201302081546) 中可用 - 也许您正在使用不包含它的透视图？Web 有，Debug 没有...

您可以自定义您的透视图，使其在“**标记出现**”菜单项下`Window > Perspective > Customize Perspective`显示此按钮`Tool Bar Visibility`**`Editor Presentation`**

# android - 将 Flash CS5.5 项目导出到 .apk 文件会导致播放所有影片剪辑

> ID：15866025
> 
> 赞同：0
> 
> 时间：2013-04-07T18:19:00.873
> 
> 标签：android, actionscript-3, actionscript-2, flash-cs5

我正在将一个 AS2 .swf 加载到一个 AS3 项目中。在 Flash 中编译和运行项目时，.swf 文件会完美加载，我可以像往常一样玩我正在加载的游戏。但是，一旦我将项目导出到要在 android 上使用的 .apk 文件，当我运行并安装程序时，加载的 AS2 .swf 中的所有影片剪辑都会连续播放。下面是我用来在 AS3 项目中加载 AS2 文件的代码：

```
import flash.net.URLRequest;
import flash.display.Loader;
import flash.events.Event;
import flash.events.ProgressEvent;

var loader:Loader=new Loader();
var _lc:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain, null);
loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaded);
loader.load(new URLRequest("trans2.swf"), _lc);

function onLoaded(e:Event):void{  
     addChild(loader.content.parent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:27:39.380

Android 应用程序需要空气运行时是有原因的。它是为 as3 而不是 as2 制作的，因此 Android 不会理解任何 as2 代码，因此苹果也不会。也许稍后他们会使其可用于 as2，即使这将是降级，因为 as3 比 as2 具有更多的功能。

# java - 自动生成id

> ID：15866028
> 
> 赞同：2
> 
> 时间：2013-04-07T18:19:07.673
> 
> 标签：java

我正在尝试为客户自动生成一个 id，每次我得到的都是 0。

很确定问题出在`public void regCustomer()`.

```
public class User {
private String firstName, gender, age;
String surename;
private int customerID;
private static int idCounter = 1000;
User next;

public User(String fN, String sn, String g, String a) {
    firstName = fN;
    surename = sn;
    gender = g;
    age = a;
    //customerID = cID;
    next = null;
}

public void setCustomerID() {
    customerID = idCounter++;
}

public int getCustomerID() {
    return customerID;
}

public String toString() {
    return customerID + "\t" + surename + "\t" + firstName + "\t" + age
            + "\t" + gender;

} 
```

}

在`Window`课堂上

```
public void regCustomer() {

    //int customerID = 0;//= Integer.parseInt(customerIDField.getText());
    String firstName = firstNameField.getText();
    String surename = surenameField.getText();
    String gender = genderField.getText();
    String age = ageField.getText();

    if (!firstName.equals("") && !surename.equals("") && !gender.equals("")&& !age.equals("")) {
        userA.regCustomer(new User(firstName, surename, gender,age));
        User u = new User(firstName, surename, gender,age);
        u.getCustomerID();
        customerIDField.setText("");
        firstNameField.setText("");
        surenameField.setText("");
        ageField.setText("");
        genderField.setText("");
        firstNameField.requestFocus();
    } else
        JOptionPane.showMessageDialog(this, "Alle felt må fylles inn");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T18:25:12.097

您从不设置 ID，这就是它为零的原因。

您可以使用 a`private static final AtomicInteger`来生成您的 id 序列；只需在构造函数中读取它：

```
private static AtomicInteger ID_GENERATOR = new AtomicInteger(1000);

public User(String fN, String sn, String g, String a) {
    customerID = ID_GENERATOR.getAndIncrement();
    //rest of constructor
} 
```

您应该使用 an`AtmoicInteger`因为这是线程安全的并且该`getAndIncrement`方法是原子的。没有这样的保证`int`。

需要回答的问题是这些项目是否以任何方式持久化，如果是，那么会发生什么 - 使用此技术生成 id 将始终从 1000 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:24:56.360

移动`customerID = idCounter++;`到构造函数。

# java - java自定义异常先试试

> ID：15866029
> 
> 赞同：-3
> 
> 时间：2013-04-07T18:19:19.813
> 
> 标签：java, exception-handling

我正在尝试编写一个自定义异常，该异常在使用 GUI 和 jtextfield 输入数据时找到空字段。这是我第一次真正处理异常并写一个，所以我不确定该怎么做。下面的代码是我到目前为止能够弄清楚的，它不起作用。我的问题是，是否有人有任何指示或进展可以为我指明正确的方向来完成这项工作。

```
import javax.swing.*;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.LinkedList;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class PersonFrame extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;
static LinkedList<Person> listOfObjects = new LinkedList<Person>(); 
JTextField fName;
JTextField lName;
JTextField Height;

public PersonFrame()
{
    setTitle("Person");
    setSize(200, 130);
    setLocationRelativeTo(null);
    setLayout(new GridLayout(4,2));
    add(new JLabel("First Name"));
    fName = new JTextField();
    add(fName);
    add(new JLabel("Last Name"));
    lName = new JTextField();
    add(lName);
    add(new JLabel("Height"));
    Height = new JTextField();
    add(Height);
    JButton jbtSubmit = new JButton("Submit");
    JButton jbtCancel = new JButton("Cancel");
    add(jbtSubmit);
    add(jbtCancel);
    SubmitListenerClass listener1 = new SubmitListenerClass();
    CancelListenerClass listener2 = new CancelListenerClass();
    jbtSubmit.addActionListener(listener1);
    jbtCancel.addActionListener(listener2);
    setVisible(true);

}

public void CloseWindow()
{
    this.setVisible(false);
}
public Person SubmitData()
{
    String fn = fName.getText();
    String ln = lName.getText();
    String h = Height.getText();
    int h1 = 0; 
    if(!(h.equals(""))){
    h1 = Integer.parseInt(Height.getText());    
    }   
    Person p = new Person(fn, ln, h1);
    int i = OneMissingFieldException(p);
    if(i == 1);
    System.out.println(p);

    return p;
    }

public void OutputList() throws IOException
{
    if(listOfObjects.peekFirst()!=null)
    {
        PrintWriter pw = new PrintWriter( new FileWriter("outputp.txt") );
        Object[] pa = listOfObjects.toArray();
        pw.println("Person");
        for(int x = 0; x<pa.length; x++)
        {
            pw.println(pa[x]);
            pw.println("");
        }
        pw.close();
    }
 }

class CancelListenerClass implements ActionListener {
  public void actionPerformed(ActionEvent e) {
    CloseWindow();
  }
}
 class SubmitListenerClass implements ActionListener {
  public void actionPerformed(ActionEvent e) {

      listOfObjects.add(SubmitData());
    CloseWindow();

}
}

public int OneMissingFieldException(Person p) extends Exception
{
    System.out.println("one");
    String fName = ((Person) p).getFName();
    String lName = ((Person) p).getFName(); 
    int height = ((Person) p).getHeight();  
    try 
    {
        System.out.println("two");
    if(fName == "" || fName == null || fName == " ");
        throw new MissingFieldException();

    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a first name.");
        return 0;
    }

    try 
    {
    if(lName == "" || lName == null || lName == " ")

        throw new MissingFieldException();          
    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a last name." + mfe);
        return 0;
    }

    try 
    {

    if(height ==  0 )

        throw new MissingFieldException();
    }
    catch(MissingFieldException mfe){
        System.out.println("You did not enter a height." + mfe);
    return 0;
    }

return 1;

} 
```

经过一段时间的工作后，这就是我所拥有的。只是想知道我是否朝着正确的方向前进。

```
public Person SubmitData()
{
    Person p = null;
    try{
    String fn = fName.getText();
    String ln = lName.getText();
    String h = Height.getText();
    int h1 = 0; 
    if(!(h.equals(""))){
    h1 = Integer.parseInt(Height.getText());    
    p = new Person(fn, ln, h1);
    checkForMissingFields(p);
    }   

    }
    catch(MissingFieldException e){
    }

    System.out.println(p);

    return p;
    }

  public class MissingFieldException extends Exception {

/**
 * 
 */
private static final long serialVersionUID = 1L;

/**
 * @param args
 */
public static void main(String args){}
public MissingFieldException() { } 
public MissingFieldException( String msg ) {
      super( msg );
 }
public void checkForMissingFields( Object o ) throws MissingFieldException {
int i =OneMissingFieldException(o);
if(i == 1)
    throw new MissingFieldException();

 }

public static int OneMissingFieldException(Object o)
{
    if (o instanceof Person)
{
        String fName = ((Person) o).getFName();
        String lName = ((Person) o).getFName(); 
        int height = ((Person) o).getHeight();

        if(fName == "" || fName == null || fName == " "){
            System.out.println("You did not enter a first name.");  
            return 1;
        }

        if(lName == "" || lName == null || lName == " "){
            System.out.println("You did not enter a last name.");
            return 1;
        }

        if(height == 0)     {       
            System.out.println("You did not enter a height.");
            return 1;           
        }
        return 0;
}
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:22:20.867

您在下面的行中将方法和类混为一谈。

```
public int OneMissingFieldException(Person p) extends Exception
{ ... } 
```

您需要两种不同的构造。

这是一个基本的自定义异常类：

```
public static class MissingFieldException extends Exception {
     public MissingFieldException() { } 
     public MissingFieldException( String msg ) {
          super( msg );
     }
} 
```

这是一个可以抛出异常的方法：

```
 public void checkForMissingFields( Person p ) throws MissingFieldException {
      ...
 } 
```

您可以在不检查返回值的情况下调用此方法。这就是例外情况*。*您可以使用 catch 块检测何时引发异常。

```
public Person submitData() {
    Person p = null;
    try {
       p = ...;
       checkForMissingFields( p );
       ...
    }
    catch ( MissingFieldException e) {
       // handle exception
    }
    return p;
} 
```

# oracle - Oracle AFTER INSERT 触发器未触发

> ID：15866031
> 
> 赞同：1
> 
> 时间：2013-04-07T18:19:29.973
> 
> 标签：oracle, select, triggers, insert

我的任务是必须在插入后创建触发器。以下是涉及的表格：

```
CREATE TABLE purchase(
orderid CHAR(3),
unit_price NUMBER(7,2),
sales_price NUMBER(7,2) DEFAULT NULL,
itemid CHAR(3)
); 
```

这是触发器：

```
/* Now we need the AFTER trigger */
CREATE OR REPLACE TRIGGER DoubleSalesPrice
AFTER INSERT on purchase
FOR EACH ROW

DECLARE
PRAGMA AUTONOMOUS_TRANSACTION;
itemcount smallint;
BEGIN
    SELECT COUNT(itemid) INTO itemcount FROM purchase P WHERE P.itemid = :new.itemid;
IF (itemcount = 1) THEN
    UPDATE purchase P 
    SET P.sales_price = 2*P.unit_price
    WHERE P.orderid = :new.orderid;
end if;
end;
/ 
```

我已将其指定为每个代码的 AFTER INSERT。但是，当我插入购买时，我没有得到想要的结果：

```
INSERT INTO purchase VALUES( '100','250', '200', '500');
SQL> select * from purchase;

ORD UNIT_PRICE SALES_PRICE ITE
--- ---------- ----------- ---
100        250         200 500 
```

触发器似乎没有触发。我已确保以相同的结果启用它：

```
ALTER TRIGGER DoubleSalesPrice enable;
SQL> select * from purchase;

ORD UNIT_PRICE SALES_PRICE ITE
--- ---------- ----------- ---
101        250         200 500 
```

如果有人有任何建议，请告诉我。我通常喜欢在尝试实际问题之前构建小示例。这反映了我需要获得的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:44:16.753

这是一个`autonomous transaction`，您必须在其本地范围内提交它，即触发器本身。

不过，我认为您不应该这样做，将其（事务）与插入本身分开是没有意义的。它应该与整个过程一起提交。

# c# - 网络浏览器控制停止

> ID：15866033
> 
> 赞同：0
> 
> 时间：2013-04-07T18:19:53.347
> 
> 标签：c#, webbrowser-control

```
 lock (lockVar)
        {

            if (done)
                return;

            if (linksvisited.Contains(webBrowser1.Url.OriginalString))
                return;

            System.Console.WriteLine("Locked: " + webBrowser1.Url.OriginalString);

            linksvisited.Add(webBrowser1.Url.OriginalString);
        }
            webBrowser1.Navigate(nextLink, null, null, "User-Agent: Googlebot/2.1 (+http://www.google.com/bot.html)"); 
```

我正在使用以下代码遍历页面，但有时 webbrowser 控件会停止并且不会转到下一页。没有任何例外，它只会停止，但肯定有另一个链接可以访问。我认为这与控件中的内部错误有关，但我到底是如何捕获它的。我的异常处理程序都没有捕获任何东西。输出控制台中没有任何内容。我已禁用脚本错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:31:41.947

该代码段位于何处？如果您将它放在控件的事件处理程序中 - 您极有可能陷入死锁。由于 Web 浏览器控件可以（并且将触发）页面加载的各个阶段期间的多个事件。

文档完成将针对页面上的每一帧触发。（[堆栈溢出](https://stackoverflow.com/questions/2328835/why-is-webbrowser-documentcompleted-firing-twice)）

对不完整的代码部分进行评论也很困难。在继续深入之前，我会阅读（[Locking ）以了解内在函数。](http://www.interact-sw.co.uk/iangblog/2004/03/23/locking)祝你目前的努力好运。

# android - Android - 如果没有互联网连接，则显示一条消息并继续检查

> ID：15866035
> 
> 赞同：9
> 
> 时间：2013-04-07T18:20:14.430
> 
> 标签：android, android-layout

我已经为此工作了几天。我刚开始使用Android。我有一个两部分的问题。我想检查互联网是否可用。如果它是启动 webView 如果不发出警报并阻止 webView 加载。我已经尝试过了，但如果没有互联网连接（例如飞行模式），它会强制关闭。我如何让它发出消息并停止加载 webview。还有一种方法可以持续检查连接，以便在失去连接时不显示网页 404？

这是我的代码。

```
 public class MainActivity extends Activity {

    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        android.net.NetworkInfo wifi = cm
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        android.net.NetworkInfo datac = cm
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if ((wifi != null & datac != null)
                && (wifi.isConnected() | datac.isConnected())) {
            setContentView(R.layout.activity_main);
                 }else{
                //no connection
                  Toast toast = Toast.makeText(MainActivity.this, "No Internet Connection", Toast.LENGTH_LONG);
                  toast.show();  
        }

        CookieManager cookieManager = CookieManager.getInstance(); 
        cookieManager.setAcceptCookie(true); 

        webView = (WebView) findViewById(R.id.webview);
        webView.setWebViewClient(new MyWebViewClient());
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://mysite.com/?ma=1");
    }   
        private class MyWebViewClient extends WebViewClient {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                if (Uri.parse(url).getHost().equals("mysite.com")) {
                    return false;
                }
                // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                startActivity(intent);
                return true;
            }
        }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
            webView.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch (item.getItemId()) 
        {
            case R.id.logout:
                finish();
                return true;
        }
      return false;
    }

} 
```

**编辑：**添加错误具体来说，在显示 Toast 说没有互联网连接后按回时出现这些错误。如果我在吐司消息后使用后退按钮，它会崩溃，并且错误如下。

```
04-07 14:40:38.664: E/AndroidRuntime(15173): FATAL EXCEPTION: main
04-07 14:40:38.664: E/AndroidRuntime(15173): java.lang.NullPointerException
04-07 14:40:38.664: E/AndroidRuntime(15173):    at com.mysite.testapp.MainActivity.onKeyDown(MainActivity.java:67)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.view.KeyEvent.dispatch(KeyEvent.java:2705)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.app.Activity.dispatchKeyEvent(Activity.java:2401)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:2007)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3813)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3761)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2926)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.os.Looper.loop(Looper.java:137)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at android.app.ActivityThread.main(ActivityThread.java:4918)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at java.lang.reflect.Method.invoke(Method.java:511)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-07 14:40:38.664: E/AndroidRuntime(15173):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-07T18:47:24.693

要检查网络连接可用性，请使用以下

```
 public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
    } 
```

在您的活动中

```
 if(CheckNetwork.isInternetAvailable(Activity.this)) //returns true if internet available
                {

                        //do something. loadwebview.
                }   
               else
                {
                    Toast.makeText(Activity.this,"No Internet Connection",1000).show();
                } 
```

按下后退按钮

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_BACK:
            if(mWebView.canGoBack() == true){
                mWebView.goBack();
            }else{
                finish();
            }
            return true;
        }

    }
    return super.onKeyDown(keyCode, event);
   } 
```

更新：如果您需要随时检查网络连接可用性，系统会在连接更改或连接丢失时广播事件。您可以通过注册广播在您的活动中捕获这些广播。但是您需要在不需要时取消注册。

下面的链接中有一个示例。

[用于检查互联网连接的 Android 服务？](https://stackoverflow.com/questions/3141807/android-service-to-check-internet-connectivity).

或者，您可以使用在后台检查 Internet 连接的服务。但是您需要在不需要时销毁该服务。但是服务用于在后台运行长时间运行的操作

更新 2：

试试下面的。我已经测试过了。它适用于我的三星 Galaxy S3。

在清单中添加这些权限

```
 <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

你的 activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".MainActivity" >

 <WebView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:id="@+id/wv"/>

</RelativeLayout> 
```

你的活动

```
 public class MainActivity extends Activity {

 private WebView webView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        webView = (WebView) findViewById(R.id.wv);
        if(CheckNetwork.isInternetAvailable(MainActivity.this))
        {
        CookieManager cookieManager = CookieManager.getInstance(); 
        cookieManager.setAcceptCookie(true); 

      // webView = (WebView) findViewById(R.id.wv);
       // webView.setWebViewClient(new MyWebViewClient());
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient() {
               public void onProgressChanged(WebView view, int progress) {
                 // Activities and WebViews measure progress with different scales.
                 // The progress meter will automatically disappear when we reach 100%
                MainActivity.this.setProgress(progress * 1000);
               }
             });
             webView.setWebViewClient(new WebViewClient() {
               public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                 Toast.makeText(MainActivity.this, "Oh no! " + description, Toast.LENGTH_SHORT).show();
               }
             });

             webView.loadUrl("http://slashdot.org/");
             }
     else{
            //no connection
              Toast toast = Toast.makeText(MainActivity.this, "No Internet Connection", Toast.LENGTH_LONG);
              toast.show();  
    }

}   

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
        webView.goBack();
        return true;
    }
    else
    {
        finish();
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:24:54.713

为了防止您的应用程序崩溃，请将定义 的所有代码移动`WebView`到您检查 Internet 连接的位置，如下所示：

```
....
if ((wifi != null & datac != null) && (wifi.isConnected() || datac.isConnected())) 
{
    setContentView(R.layout.activity_main);
    webView = (WebView) findViewById(R.id.webview);
    webView.setWebViewClient(new MyWebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://mysite.com/?ma=1");
}
else
{
   //no connection
    Toast toast = Toast.makeText(MainActivity.this, "No Internet Connection",Toast.LENGTH_LONG);
    toast.show();  
}
..... 
```

现在，如果您的应用程序经常需要互联网连接，我建议您创建一个`Service`将不断检查此连接的程序，并且当它存在时，它将`Service`向收听方发出广播。

**更新：**

由于此行，您收到一个错误：

```
webView.goBack(); 
```

如果没有互联网连接并且 WebView 没有实例化，那么你不能 goBack() 因为这个 null ，这里你需要检查：

```
if (webView != null)
{
     webView.goBack(); 
} 
```

设置替代视图没有什么难的： 1\. 打开可视化编辑器并创建一个与您的 webview 大小相同的 ImageView。2\. 然后这样做：

```
....
if ((wifi != null & datac != null) && (wifi.isConnected() || datac.isConnected())) 
{
    imageView.setVisibility(View.GONE);
    setContentView(R.layout.activity_main);
    webView = (WebView) findViewById(R.id.webview);
    webView.setWebViewClient(new MyWebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://mysite.com/?ma=1");
}
else
{
   imageView.setVisibility(View.VISIBLE); 
   //no connection
    Toast toast = Toast.makeText(MainActivity.this, "No Internet Connection",Toast.LENGTH_LONG);
    toast.show();  
}
..... 
```

当然，您必须先通过 id 找到此视图，然后才能对其进行操作。

# android - Android WebView OutOfMemory？

> ID：15866036
> 
> 赞同：1
> 
> 时间：2013-04-07T18:20:17.713
> 
> 标签：android, exception, error-handling, webview, out-of-memory

有时通过开始我的活动，它只包含一个`WebView`我从 LogCat 得到这个奇怪的日志：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{de.cb.pwapp/de.cb.pwapp.Artikel}: 
android.view.InflateException: Binary XML file line #9: Error inflating class android.webkit.WebView

at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)

at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)

at android.app.ActivityThread.access$700(ActivityThread.java:140)

at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)

at android.os.Handler.dispatchMessage(Handler.java:99)

at android.os.Looper.loop(Looper.java:137)

at android.app.ActivityThread.main(ActivityThread.java:4921)

at java.lang.reflect.Method.invokeNative(Native Method)

at java.lang.reflect.Method.invoke(Method.java:511)

at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)

at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
    at dalvik.system.NativeStart.main(Native Method)

Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class android.webkit.WebView
    at android.view.LayoutInflater.createView(LayoutInflater.java:613)

at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)   
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)

at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)

at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)

at android.view.LayoutInflater.inflate(LayoutInflater.java:489)

at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:313)

at android.app.Activity.setContentView(Activity.java:1924)

at de.cb.pwapp.Artikel.onCreate(Artikel.java:26)

at android.app.Activity.performCreate(Activity.java:5206)

at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)

at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)

... 11 more
Caused by: java.lang.reflect.InvocationTargetException

at java.lang.reflect.Constructor.constructNative(Native Method)

at java.lang.reflect.Constructor.newInstance(Constructor.java:417)

at android.view.LayoutInflater.createView(LayoutInflater.java:587)

... 24 more
Caused by: java.lang.OutOfMemoryError

at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)

at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:625)

at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:478)

at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)

at android.content.res.Resources.loadDrawable(Resources.java:1963)

at android.content.res.TypedArray.getDrawable(TypedArray.java:601)

at android.view.View.<init>(View.java:3449)

at android.view.ViewGroup.<init>(ViewGroup.java:432)

at android.widget.AbsoluteLayout.<init>(AbsoluteLayout.java:52)

at android.webkit.WebView.<init>(WebView.java:505)

at android.webkit.WebView.<init>(WebView.java:482)

at android.webkit.WebView.<init>(WebView.java:468)

at android.webkit.WebView.<init>(WebView.java:457) 
```

我`WebView`的内存不足是否正确？

我从我的 SQLite DB 加载了`WebView`一个长字符串，代表一篇文章。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:42:10.413

高分辨率图片作为背景是问题所在

# android - android - 在 adb logcat 输出中格式化 json 字符串

> ID：15866042
> 
> 赞同：32
> 
> 时间：2013-04-07T18:21:09.413
> 
> 标签：android, json, adb, logcat

出于记录目的，我打印出 json 响应字符串，并且可以在 android “adb logcat” 命令中看到它们。有没有办法很好地格式化 adb logcat 输出中的 json 字符串，使其看起来像这样？

```
{ "code" : "0",
  "text" : "hello world"
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-07T18:46:08.227

您可以使用该[`JSONObject.toString()`](http://www.json.org/javadoc/org/json/JSONObject.html#toString%28int%29)方法在 logcat 上漂亮地打印 JSON。

```
Log.d("tag", jsonObject.toString(4)); 
```

**输出**

```
(29124): {
(29124):     "text": "hello world",
(29124):     "code": "0"
(29124): } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-12T15:35:20.783

我不太会在代码中打印 JSON 消息。我只需在 Mac 上双击[LogRabbit](http://lograbbit.com)中的消息，它就会漂亮地打印它或突出显示 Base64 来解码它。

![在此处输入图像描述](https://i.stack.imgur.com/dY9tX.png)

完全披露，我是 Mac 版 LogRabbit 的创建者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T17:57:25.127

您可以使用我的记录器的代码以原始格式格式化日志中的 json：

```
Logger.dd("Section label", json); 
```

Github 上的链接：[https ://github.com/scijoker/logger](https://github.com/scijoker/logger)

来源：

```
import android.os.Build;
import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

/**
 * Created by scijoker on 08.10.15.
 */
public class Logger {
    private static boolean DEBUG = true;

    public static void d(String tag, String arg) {
        if (isEnable()) {
            log(tag, arg);
        }
    }

    public static void d(String logMsg) {
        if (isEnable()) {
            log(getCurrentClassName(), getCurrentMethodName() + "(): " + logMsg);
        }
    }

    public static void dd(String tag, Object source) {
        if (isEnable()) {
            Object o = getJsonObjFromStr(source);
            if (o != null) {
                try {
                    if (o instanceof JSONObject) {
                        format(tag, ((JSONObject) o).toString(2));
                    } else if (o instanceof JSONArray) {
                        format(tag, ((JSONArray) o).toString(2));
                    } else {
                        format(tag, source);
                    }
                } catch (JSONException e) {
                    format(tag, source);
                }
            } else {
                format(tag, source);
            }
        }
    }

    private static void log(String tag, String msg) {
        Log.d(tag, msg);
    }

    private static String getSplitter(int length) {
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < length; i++) {
            builder.append("-");
        }
        return builder.toString();
    }

    private static void format(String tag, Object source) {
        tag = " " + tag + " ";
        log(" ", " ");
        log(" ", getSplitter(50) + tag + getSplitter(50));
        log(" ", "" + source);
        log(" ", getSplitter(100 + tag.length()));
        log(" ", " ");
    }

    private static String getCurrentMethodName() {
        return Thread.currentThread().getStackTrace()[4].getMethodName();
    }

    private static String getCurrentClassName() {
        String className = Thread.currentThread().getStackTrace()[4].getClassName();
        String[] temp = className.split("[\\.]");
        className = temp[temp.length - 1];
        return className;
    }

    private static Object getJsonObjFromStr(Object test) {
        Object o = null;
        try {
            o = new JSONObject(test.toString());
        } catch (JSONException ex) {
            try {
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
                    o = new JSONArray(test);
                }
            } catch (JSONException ex1) {
                return null;
            }
        }
        return o;
    }

    public static boolean isEnable() {
        return DEBUG;
    }

    public static void setEnable(boolean flag) {
        Logger.DEBUG = flag;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-23T03:09:13.010

fastJson 提供了一个方法：

```
//serialize a prettyFormat json string 

public static final String toJSONString(Object object, boolean prettyFormat);

eg:Log.d(TAG,JSON.toJSONString(object, true)); 
```

# javascript - jquery - 按钮在固定百分比的 Web 应用程序中调整固定 div 的大小？

> ID：15866043
> 
> 赞同：1
> 
> 时间：2013-04-07T18:21:13.057
> 
> 标签：javascript, jquery, css, html, button

我已经为此奋斗了几个小时（我对 js 有点陌生），我决定把它提交给社区。我正在构建这个基于屏幕尺寸百分比的网络应用程序。div 是固定位置，这些 div 中的内容是绝对的。这是小提琴： http: [//jsfiddle.net/MycF6/31/](http://jsfiddle.net/MycF6/31/) 和我正在使用的代码：

```
$(document)
    .ready(function () {
    $("#socialDash")
        .click(function () {
        $("#socialStream")
            .hide("slide", {
            direction: "left"
        }, "1000");
    });
});

$("#socialDash")
    .click(function () {
    $("#workBench")
        .effect("scale", {
        percent: 178,
        origin: ['middle', 'right'],
        direction: 'horizontal'
    }, 700);
});

$("#niner")
    .click(function () {
    $("#socialStream")
        .show("slide", {
        direction: "left"
    }, "1000");
    $("#workBench")
        .effect("scale", {
        percent: 56,
        origin: ['middle', 'right'],
        direction: 'horizontal'
    }, 500);
});

$(".socialButton")
    .click(function () {
    $("socialButton")
        .removeClass(".clicked");
    $(this)
        .addClass(".clicked");
}); 
```

我想要它，所以当我单击左侧的顶部按钮 (1) 时，内部内容的左侧 div 向左滑动，右侧的 div 展开以取代它。对于其他两个按钮 (2)、(3)，我想要原始比例的 div。另一个问题是，当单击按钮（imgs）时，它们的背景保持不变，而不是像我试图在最后一段代码中识别的那样切换到下一个单击的按钮。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:38:09.893

好的，我找到了解决方案（基本上我重写了所有内容）。它不漂亮，但它有效。这是新的 jfiddle：http: [//jsfiddle.net/MycF6/42/](http://jsfiddle.net/MycF6/42/)如果您有兴趣。

和脚本：

```
$(document).ready(function () {
    $("#dash").click(function () {
        $("#stream").animate({
            width: "0"
        }, "fast").hide("slide", {
            direction: "left"
        }, "fast");
        $("#dash").addClass("clicked");
        $("#fb").removeClass("clicked");
        $("#twit").removeClass("clicked");
        $("#work").animate({
            width: "100%"
        }, "slow");
    });
    $("#twit").click(function () {
        $("#work").animate({
            width: "59%"
        }, "fast");
        $("#twit").addClass("clicked");
        $("#dash").removeClass("clicked");
        $("#fb").removeClass("clicked");
        $("#stream").animate({
            width: "40%"
        }, "fast").show("slide", {
            direction: "left"
        }, "slow");
    });
    $("#fb").click(function () {
        $("#work").animate({
            width: "59%"
        }, "fast");
        $("#twit").removeClass("clicked");
        $("#dash").removeClass("clicked");
        $("#fb").addClass("clicked");
        $("#stream").animate({
            width: "40%"
        }, "fast").show("slide", {
            direction: "left"
        }, "slow");
    });
}); 
```

# c# - 为什么 lambda 可以转换为表达式而方法组不能？

> ID：15866044
> 
> 赞同：10
> 
> 时间：2013-04-07T18:21:15.097
> 
> 标签：c#, c#-4.0, lambda

LINQPad 示例：

```
void Main()
{
    One(i => PrintInteger(i));
    One(PrintInteger);

    Two(i => PrintInteger(i));
    // Two(PrintInteger); - won't compile
}

static void One(Action<int> a)
{
    a(1);
}

static void Two(Expression<Action<int>> e)
{
    e.Compile()(2);
}

static void PrintInteger(int i)
{
    Console.WriteLine(i);
} 
```

取消注释该`Two(PrintInteger);`行会导致错误：

> 无法从“方法组”转换为“System.Linq.Expressions.Expression<System.Action<int>>”

这类似于[将方法组转换为表达式](https://stackoverflow.com/questions/1004156/convert-method-group-to-expression)，但我对“为什么”感兴趣。我了解[功能需要金钱、时间和精力](http://ericlippert.com/2012/07/17/should-c-warn-on-null-dereference/)；我想知道是否有更有趣的解释。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T18:42:36.310

因为，为了获得表达式树，我们需要（未编译的）*源代码*形式的方法表示。Lambda 表达式在源代码中本地可用，因此在未编译时*始终可用。*但是方法可能不是来自当前程序集的内部，因此可能只能以编译的形式使用。

当然，C# 编译器可以*反编译*程序集的 IL 代码以检索表达式树，但正如您所提到的，实现功能需要花钱，这个特定功能并非微不足道，而且好处也不清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T18:45:47.667

原则上没有理由。可以这样做。编译器可以在转换之前自行创建 lambda（这显然总是可能的 - 它知道被调用的确切方法，因此它可以从其参数创建一个 lambda）。

不过，有一个问题。lambda 参数的名称通常被硬编码到正在生成的 IL 中。如果没有 lambda，就没有名字。但是编译器可以创建一个虚拟名称或重用被调用方法的名称（它们始终以 .NET 程序集格式提供）。

为什么 C# 团队不决定启用此功能？想到的唯一原因是他们想把时间花在其他地方。我为他们的决定鼓掌。我宁愿使用 LINQ 或异步，也不愿使用这种晦涩难懂的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:46:54.543

在`One`示例中，您正在隐式创建`Action<int>`委托。它与以下内容相同：

```
One( new Action<int>( PrintInteger ) ); 
```

我相信这是一种改进订阅事件语法的语言。

不会发生同样的事情`Expression<T>`，这就是为什么您的第二个示例无法编译的原因。

* * *

**编辑 ：**

这称为“方法组转换”。它在 C# 规范中 - 第 6.6 节

> 从方法组（第 7.1 节）到兼容委托类型的隐式转换（第 6.1 节）

# c - 使用一个 Makefile 从不同的文件生成不同的可执行文件

> ID：15866049
> 
> 赞同：3
> 
> 时间：2013-04-07T18:21:38.403
> 
> 标签：c, makefile, executable

我有三个用 C 编写的文件：

```
a.c, b.c, d.c 
```

我想使用 ONE Makefile 从它们生成独立的可执行文件，如下所示：

```
a.x, b.x d.x. 
```

他们不需要彼此运行。它们是完全不同的程序。

我知道，我可以写一行来编译它们中的每一个，如下所示：

```
gcc -Wall -Werror a.c -o a.x
gcc -Wall -Werror b.c -o b.x
gcc -Wall -Werror d.c -o d.x 
```

但是我正在寻找一种更简单的解决方案来独立于文件数量来执行此操作，因为将来我将拥有很多文件。

我有一个看起来像这样的原件：

```
CC = gcc
CFLAGS = -g -Wall - Werror -03
%.x:%.c
    ${CC} {CFLAGS} -o $@ $<
clean: 
    rm -f *.o 
```

但我不知道如何自定义它，以便它读取我的每个 c 文件并从每个文件生成一个 x 文件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:32:43.467

您是否尝试过添加

全部：ax bx cx

在你的makefile前面？

```
all: a.x b.x c.x

CC = gcc
CFLAGS = -g -Wall - Werror -03
%.x:%.c
    ${CC} {CFLAGS} -o $@ $<
clean: 
    rm -f *.o 
```

编辑：要构建目录中的所有 .c 文件，请尝试

```
all: $(*.c:.c=.x) 
```

我对 Make 很生疏，所以这可能不太正确……您应该阅读 Make 文档。

编辑2：确实这是不对的......这更有可能奏效：

```
SRCS = *.c

all: $(SRCS:.c=.x) 
```

或者

```
SRCS = *.c
PGMS = $(SRCS:.c=.x)

all: $PGMS 
```

# .htaccess - 在 codeIgniter 中使用共享 SSL 的 Facebook APP

> ID：15866052
> 
> 赞同：2
> 
> 时间：2013-04-07T18:21:49.523
> 
> 标签：.htaccess, codeigniter, hosting, ssl-certificate, facebook-apps

我在 hostgator.com 中有一个共享 ssl 的主机，我在 public_html(root) 目录中上传了 codeIgniter 站点。我想开发一个网站以及 facebook 应用程序。网站在运行 facebook 应用程序时通过“使用 facebook 登录”成功运行，它给出了 url 重定向错误。

这是http网址

```
 url(Website): http://example.org/ 
```

和安全网址是

```
 https://in9.hostgator.in/~username/ 
```

在 facebook 应用程序配置中，

```
 canvas url :  http://example.org/
  Secure Canvas URL : https://in9.hostgator.in/~username/ (Work in url) 
```

当我运行 facebook 应用程序时，facebook 给出一个错误：

```
 API Error Code: 191
    API Error Description: The specified URL is not owned by the application
    Error Message: Invalid redirect_uri: Given URL is not permitted by the application configuration. 
```

在应用程序中，根目录中没有用于重定向或删除 index.php 的 .htaccess 文件。

我已经运行了这个基本控制器代码：

```
 public function __construct()
{
    parent::__construct();
    $this->load->library("session");
    $this->load->helper('cookie');

    parse_str( $_SERVER['QUERY_STRING'], $_REQUEST );
    $CI = & get_instance();
    $CI->config->load("facebook",TRUE);
    $config = $CI->config->item('facebook');
    $this->load->library('Facebook', $config);

}

/**
 * Index function
 * @access public
 * 
public function index()
{
    $userId = $this->facebook->getUser();
    // If user is not yet authenticated, the id will be zero

    if($userId == 0){
                    // Generate a login url
        $params = array(
                  'scope' => 'email,user_about_me, user_birthday, user_location');
        $url = $this->facebook->getLoginUrl($params);
        echo "<script type='text/javascript'>" . "top.location.href = '" . $url. "';</script>";
        }
    } 
```

当我打印'$url'时，查询字符串中的redirect_url 是' [http://in9.hostgator.in/~username/](http://in9.hostgator.in/~username/) '，而不是重定向到https 路径。

我很困惑，代码中有什么错误？或服务器中的一些错误配置或什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:44:29.690

Facebook 应用程序也有一个“应用程序域”设置，如果画布 url 不在列出的域下，则 facebook sdk 将无法工作。尝试同时添加 the`example.org`和`hostgator.in`there。

或者，您可以使用 facebook canvas url 作为重定向 uri，因此，如果您的 facebook 应用程序的命名空间是，`my-facebook-app`那么您可以像这样生成登录 url：

```
$this->facebook->getLoginUrl(array(
    'scope' => 'email,user_about_me, user_birthday, user_location',
    // change the last segment to you app's namespace
    'redirect_uri' => 'https://apps.facebook.com/my-facebook-app/'
)); 
```

对于画布应用程序，这可能更可行，因为如果重定向 uri 直接指向您的安全画布 url，则用户在进行身份验证时将“丢失”facebook。

# ios - 使用 NSManager 撤消剪贴板文本

> ID：15866055
> 
> 赞同：3
> 
> 时间：2013-04-07T18:22:15.030
> 
> 标签：ios, ios6, nsundomanager, uipasteboard

我正在使用 UITextView 控件实现 NSUndoManager。如果我想撤消最后的文本更改，我可以这样做

```
// NSUndoManager *myUndoManager;  Declared in the header

if (myUndoManager.canUndo) {
    [myUndoManager undo];
} 
```

这很简单。但是，如果我将剪贴板文本插入到 TextView 控件中，如下所示，myUndoManager.canUndo 为空。

```
textview1.text = [[UIPasteboard generalPasteboard] string]; 
```

使用剪贴板文本时，我是否可以撤消文本更改？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:15:13.030

我想我只需要手动将文本添加到堆栈中。

```
- (IBAction)goClicked1:(id)sender {
    NSString *pastetext = [[UIPasteboard generalPasteboard] string];
    [self setText:pastetext];
}

- (void)setText:(NSString *)str {
    NSUndoManager *undoManager = [self undoManager];
    NSString *oldtext = textview1.text;
    [[undoManager prepareWithInvocationTarget:self] setText:oldtext];
    textview1.text = str;
} 
```

# java - 如何将新字符串添加到某个数组

> ID：15866058
> 
> 赞同：-3
> 
> 时间：2013-04-07T18:22:26.407
> 
> 标签：java, android, arrays, string, add

我的代码中有 4 个数组，每次用户在 edittext 中写入一些内容时，我想将该字符串存储在其中一个数组中，我尝试使用 toCharArray 方法，但我不知道如何定义字符串应该放置的数组放入:S

```
String [] array7 = {"Hey","Was Up","Yeahh"};
    TextView txtV1,txtV2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layouttry);
        txtV1=(TextView)findViewById(R.id.textView1);
        txtV2=(TextView)findViewById(R.id.textView2);

        Bundle extras = getIntent().getExtras();
        String value = extras.getString("Key");  // this value I want to add to the stringarray 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:31:17.367

如果您需要添加新元素，我建议您使用 ArrayLists 替换您的数组。这将允许您使用该`add`方法插入新元素。一个例子：

```
ArrayList<String> stringList = new ArrayList<String>();
stringList.add("Text here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:50:55.503

在您的代码中，我只能在字符串上看到一个数组，所以我不确定您实际需要什么。不过我会尽力的。

您的 String 数组被硬编码为只有三个单元格，并且它们都已满。如果要将字符串放入这些位置中的任何一个，请执行以下操作：

```
array7[0] = value; //or:
array7[1] = value; //or:
array7[1] = value; 
```

如果要添加`value`到数组而不删除现有值，可以执行以下操作：

```
//Create a new array, larger than the original.
String[] newArray7 = new String[array7.length + 1 /*1 is the minimum you are going to need, but it is better to add more. Two times the current length would be a good idea*/];

//Copy the contents of the old array into the new one.
for (int i = 0; i < array7.length; i++){
   newArray7[i] = array7[i];
}

//Set the old array's name to point to the new array object.
array7 = newArray7; 
```

您可以在单独的方法中执行此操作，因此每当您需要重新调整数组大小时，您都可以使用它。你应该知道 ArrayList 和 Vector 类已经为你实现了这个机制，你可以`arrayList.add(string)`随心所欲。

# c++ - < > 未在此范围内为私有静态方法声明

> ID：15866063
> 
> 赞同：0
> 
> 时间：2013-04-07T18:22:44.877
> 
> 标签：c++, codeblocks

我看到之前称为“'方法名称'未在此范围内声明”的线程，但答案并没有真正帮助我。发生这种情况的方法是私有静态方法。我试图在课堂上使用它，但它不起作用。该方法的名称是“nthCoeffCatalan”。每次使用它时我都会收到错误消息。我不知道这是否会有所帮助，但我将 Code::Blocks 与 wxWidgets 和 Mingw32 一起用于编译器。这是.h文件：

```
#ifndef CATALAN_H
#define CATALAN_H

#include <vector>
#include <cstring>
#include <cstdlib>
#include <string>

using namespace std;

class Catalan
{
    public:
        Catalan(int);
        virtual ~Catalan( );
        void recursiveRandomGenerator( );
        void boltzmannRandomGenerator( );
        int rank( );
        void unrank(int, int);
        void outputBinaryTree( );
        void outputDyckPath( );
        void outputTriangulation( );
    private:
        int n;
        int catalanObject[];
        int max_size;
        static int nthCoeffCatalan(int);
};

#endif // CATALAN_H 
```

这是 .cpp 文件：

```
#include <Catalan.h>
#include <math.h>
#include <time.h>

using namespace std;

int catalanObject[] = {};
int n;
int max_size;

Catalan::Catalan(int sz){
n = sz;

     //find out the position of the leaf in a tree which is just a node and n-1 right vertices
    max_size = 0;
    for(int i = 0; i <=n; i++){
        max_size += pow(2,i);
    }

    catalanObject[max_size];

    for (int i = 0; i < max_size; i++){
        catalanObject[i] = 0;
    }
}

Catalan::~Catalan( ){
    delete &n;
    delete &max_size;
    delete catalanObject;
}

void recursiveRandomGenerator( ){
    //initialize the random number generator
    srand(time(NULL));
    int r = n;
    int i = 0;

    //give the tree a root
    catalanObject[i] = 1;
    r--;

    //decide size of left and right trees
    float x = ((float) (rand()%10000))/(10000.0);
    int k = -1;
    float s = 0;
    int a_r = 0;
    int b_k = 0;
    int c_rk = 0;

    //calculate a_r
    if (r == 0){
        a_r = 1;
    }
    else{
        //calculate [x^r] in B(x)^2
        if (r > 1){
            for (int j = r/2; j >= 1; j--){
                int temp = 0;
                if (r%2 == 0 && j == r/2){
                    temp = nthCoeffCatalan(j);
                    temp = temp*nthCoeffCatalan(r-j);
                }
                else{
                    temp = nthCoeffCatalan(j);
                    temp = temp*nthCoeffCatalan(r-j);
                    temp = temp*2;
                }
                a_r += temp;
            }
        }
        //calculate [x^r] in 2B(x)
        a_r += 2*nthCoeffCatalan(r);
    }
    while (x > s){
        k = k + 1;
        //calculate b_k
        if (k == 0){
            b_k = 1;
        }
        else{
            b_k = nthCoeffCatalan(k);
        }
        //calculate c_rk
        if (k == r){
            c_rk = 1;
        }
        else{
            c_rk = nthCoeffCatalan(r-k);
        }
        //re-calculate s
        int temp;
        temp = (float) b_k;
        temp = temp * (float) c_rk;
        temp = temp / (float) a_r;
        s += temp;
    }

}

void boltzmannRandomGenerator( ){

}

int rank( ){
    return 0;
}

void unrank(int rnk, int n){

}

void outputBinaryTree( ){

}

void outputDyckPath( ){

}  

void outputTriangulation( ){

}

static int nthCoeffCatalan(int n){
    int num = 1;
    int den = 1;
    int retVal = 0;

    for(int i = 0; i < n; i++){
        num = num*(n+i+1); // runs from n+1 to 2n (=2n!/n!)
        den = den*(i+1); // runs from 2 to n (=n!)
    }

    retVal = num/den;

    return retVal;
} 
```

## 边注

另外，作为旁注，我想将数组用作类变量，但在构造函数中，在我初始化数组大小的那一行，我的调试器说代码没有效果。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:24:54.847

您错误地提供了*全局*函数的定义，但您实际上想要定义*成员*函数（其声明出现在 的类定义中`Catalan`）。

例如，**在您的`.cpp`文件**中：

```
static int nthCoeffCatalan(int n)
{
    // ...
} 
```

应该：

```
int Catalan::nthCoeffCatalan(int n)
//  ^^^^^^^^^
{
    // ...
} 
```

这也适用于其他非静态成员函数。因此，例如（**再次在您的`.cpp`文件**中）而不是：

```
void recursiveRandomGenerator( )
{
    // ...
} 
```

你应该写：

```
void Catalan::recursiveRandomGenerator( )
//   ^^^^^^^^^
{
    // ...
} 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:25:34.080

您的所有成员函数定义都应该被限定为属于`Catalan`. 因此，例如， 的定义`recursiveRandomGenerator`实际上应该如下所示：

```
void Catalan::recursiveRandomGenerator( ){
  // ...
} 
```

此外，您不应该将`static`关键字放在定义之前`nthCoeffCatalan`。它应该如下所示：

```
int Catalan::nthCoeffCatalan(int n){
  // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:25:43.927

你的类定义声明了一堆成员函数，包括`nthCoeffCatalan`. 在源文件中，只定义了两个成员：构造函数和析构函数。其余所有函数都是自由函数。您必须通过添加`Catalan::`它们的名称来将它们标记为成员函数。

# ruby-on-rails - Gem 安装后 RVM 命令不起作用

> ID：15866064
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:22:45.220
> 
> 标签：ruby-on-rails, ruby, bash, rvm

我安装了 RVM，`sudo rvm install`现在我试图`rvm use 1.9.3`在开始 Rails 项目之前调用，但我从命令行收到此错误：`-bash: rvm: command not found`

有人知道我的问题是什么吗？

当我尝试时，`rvm -v`我会收到相同的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:26:27.377

发现错误。

**Bash 配置文件仅在登录时运行：** [已安装 RVM，rvm 命令不起作用](https://stackoverflow.com/questions/5750981/installed-rvm-rvm-commands-do-not-work?rq=1)

如果您遇到此错误，只需尝试在终端中打开一个新选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:34:22.200

尝试将 rvm 安装为

卷曲[https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) | bash -s 稳定

# javascript - 动态设置背景图片不在 Chrome 中显示

> ID：15866065
> 
> 赞同：3
> 
> 时间：2013-04-07T18:23:01.190
> 
> 标签：javascript, jquery, css, google-chrome, background-image

我遇到了一个 div 的背景图像未在 Chrome 中显示的问题。

我正在处理的一个网站有两个图像容器位于另一个之上：z-index 较低的一个显示当前选择的图像，而 z-index 较高的一个用于在用户悬停时预览其他图像导航中的一个项目。

基本上，应该发生的是每次鼠标光标从一个导航项移动到下一个导航项时，旧的预览图像被保存为预览图像容器的背景，然后预览容器中的实际图像被隐藏（没有被注意到，因为图像仍然在背景中），换成新图像然后淡入。淡入应该直接从旧图像发生，这就是我将旧图像设置为背景的原因前。

现在，这在任何地方都可以完美运行，但在谷歌浏览器中，背景图像不会显示。奇怪的是，我使用调试中断仔细查看并注意到背景图像实际上设置正确（意味着它在当时的元素的 CSS 中正确列出），但它没有显示在浏览器。

```
var previewDelay; 
$("#cnt-navigation_secondary").find(".txt-navigation_secondary").mouseenter(function(){
    var newImage = $(this).find("img").attr("src");
    var oldImage = $("#img-content-preview").attr("src");
    previewDelay = setTimeout(function(){
        $("#cnt-content-preview").show(); //The previewing container is shown (in case it was hidden before).
        $("#cnt-content-preview").css({"background-image":"url("+oldImage+")"}); //The old image is set as the background of the previewing container
        $("#img-content-preview").hide(); //The image inside the previewing container is hidden. All browsers but Chrome now show still show the same image, as it is in the background, but Chrome doesn't, even though it's visible in the CSS.
        $("#img-content-preview").attr("src", newImage); //The source of the hidden image is set to the new image.
        $("#img-content-preview").fadeIn(400); //The new image is faded in.           
    },100);
}).mouseleave(function(){
    clearTimeout(previewDelay);
}); 
```

您可以在此处查看整个操作：[http](http://www.haasarchitektur.at/index.php?main=1&siteid=403) ://www.haasarchitektur.at/index.php?main=1& siteid=403 尝试将鼠标悬停在架构子导航中的项目上。例如，在 Firefox 中，预览图像会流畅地从一个项目切换到另一个项目，而在 Chrome 中，由于预览容器的背景设置不正确，您总是会短暂地看到后面的元素闪烁。

我有点不知道这种行为的来源，所以任何帮助都将不胜感激。; )

谢谢你和最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:11:14.637

背景图像似乎没有加载，因为它是一个相当大的文件？我尝试了将背景颜色设置为红色而不是更改图像的示例，它可以正常工作并阻止显示原始图像。您可能需要找到一种方法将背景图像放置在 div 中，以便它已经加载到浏览器中。

由于您已经在导航菜单中加载了图像，您可以修改 css 以便 jquery 覆盖此图像，直到真实图像准备好？

# python - 正则表达式匹配 GSM 字符集

> ID：15866068
> 
> 赞同：4
> 
> 时间：2013-04-07T18:23:32.140
> 
> 标签：python, regex

这是一个 GSM 字符集（如下）。我需要确保只有包含这些字符的文本才会匹配。如果文本包含此范围之外的任何内容，如果将不匹配...

```
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567889@?£_!1$"¥#è
?¤é%ù&ì\ò(Ç)*:Ø+;ÄäøÆ,<LÖlöæ-=ÑñÅß.>ÜüåÉ/§à¡¿' 
```

这是我尝试过的......

```
@£$¥èéùìòÇ\fØø\nÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ !\"#¤%&'()*+,-./[0-9]:;<=>\?¡[A-Z]ÄÖÑÜ§¿[a-z]äöñüà\^\{\}\[~\]\|€ 
```

我需要一个只匹配以下内容的正则表达式

```
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567889@?£_!1$"¥#è
?¤é%ù&ì\ò(Ç)*:Ø+;ÄäøÆ,<LÖlöæ-=ÑñÅß.>ÜüåÉ/§à¡¿' 
```

如何？谢谢。

**更新：**

```
 rule = re.compile(r'^[\w@?£!1$"¥#è?¤é%ù&ì\\ò(Ç)*:Ø+;ÄäøÆ,<LÖlöæ\-=ÑñÅß.>ÜüåÉ/§à¡¿\']+$')

    if not rule.search(value):
        msg = u"Invalid characters."
        raise ValidationError(msg) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:11:55.307

尝试

```
r'^[\w@?£!1$"¥#è?¤é%ù&ì\\ò(Ç)*:Ø+;ÄäøÆ,<LÖlöæ\-=ÑñÅß.>ÜüåÉ/§à¡¿\']+$' 
```

如果您想在还包含其他字符的字符串中匹配上述字符，请删除前导`^`和尾随`$`。

请注意，上述内容不允许使用空格字符。如果您想包含它们，只需在集合中添加一个空格（或者`\s`如果您还想包含换行符，则添加）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:45:01.067

不使用正则表达式的另一种方法：

```
>>> valid_chars = set(u'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567889@?£_!1$"¥#è?¤é%ù&ì\ò(Ç)*:Ø+;ÄäøÆ,<LÖlöæ-=ÑñÅß.>ÜüåÉ/§à¡¿\'')
>>> tests = ['hello', u'£_!', u'Ϡ']
>>> [len(set(t).difference(valid_chars)) == 0 for t in tests]
[True, True, False] 
```

# codeigniter - CodeIgniter：如何使用干净的 url 添加多个参数？

> ID：15866069
> 
> 赞同：1
> 
> 时间：2013-04-07T18:23:36.783
> 
> 标签：codeigniter

我有一个具有以下设置的过滤器选项：

选项 1 >**显示：**每页 20 个或每页 50 个或每页全部 - 这是在下拉列表中（默认每页 10 个）

选项 2 >**排序方式：**从低到高或从高到低或字母 AZ 或字母 ZA（默认 AZ）

选项 3 >**分页**这就完成了。

我的登陆页面是：*域名/衬衫*

我已经完成了分页，我的 url 看起来像：*domain-name/shirts/page/1*

我要实现的url： *domain-name/shirts/page/1/perpage/50/sortby/ZA*

**但在现实世界中，最终用户以不同的方式选择此选项：**

**场景一：** 示例：先排序，后页码第二，url示例：*domain-name/shirts/perpage/50/page/1* *

（或者）

**场景二：** 示例：先排序后页码第二，url示例：*domain-name/shirts/perpage/50/page/1*

（或者）

**场景3：** 示例：先排序后页码第二，url示例：*domain-name/shirts/sortby/ZA/perpage/50/page/1*

我希望 url 结构始终按以下顺序排列 - 不管如何选择这些选项：

1.  *域名/衬衫/页面/1/sortby/ZA*
2.  *域名/shirts/page/1/perpage/50/*
3.  *域名/衬衫/每页/50/sortby/ZA*
4.  *域名/shirts/page/1/perpage/50/sortby/ZA*

我如何实现这一目标？

**我的控制器代码 - index()**

```
 $all_shirts = $this->shirts_model->get_shirts_count();
    $total_rows = $all_shirts;

    $config = array();
    $config['base_url'] = base_url()."shirts";
    $config['per_page'] = 5;
    $config['total_rows'] = $total_rows;        
    $config['use_page_numbers'] = false;
    $config['page_query_string'] = FALSE;
    $config['first_url'] = '1';
    $config['first_link'] = 'First';
    $config['first_url'] = base_url().'shirts';
    $config['last_link'] = FALSE;
    $config['next_link'] = 'Next >';
    $config['next_tag_open'] = ' <span class="next">';
    $config['next_tag_close'] = '</span>';
    $config['prefix'] = '/page/';
    $config['prev_tag_open'] = '<span class="prev">';
    $config['prev_tag_close'] = '</span> ';
    $config['cur_tag_open'] = ' <b>';
    $config['cur_tag_close'] = '</b>';
    if($this->uri->segment(3) < '3')
    {
        $config['prev_link'] = FALSE;
    }
    else
    {
        $config['prev_link'] = '< Previous';
    }
    $this->pagination->initialize($config);

    $data = array();
    $data['Shirts_pagination'] = $this->shirts_model->get_shirts_limit($config['per_page'],$this->uri->segment(3,0),'');
    $data["links"] = $this->pagination->create_links();
    $data['show_all'] = 0;
    $this->load->view('shirts_view.php', $data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:13:15.893

在您的所有示例中，您必须`$this->uri->segment()`从 url 获取 filter 。

我真的不使用这么多 url 参数，我认为更简洁的 url 对你来说也很棒。

对于任何其他过滤器参数，我使用会话并从表单中发布数据。

所以我的网址看起来总是有 2 个或最多 3 个参数，例如：

```
users/list/23 
```

在哪里`23 = pagination offset /*it could be also page number if you want*/`

此外，我有时会使用类别 uri 段，例如：

```
users/list/woman/23 
```

但我总是试图让 url 变得更短更干净，将所有额外的过滤器参数放入隐藏在 url 中的会话中。

通常，让我们举个例子，页面是一个搜索页面，其中列出了用户，我为搜索用户创建了一个表单：

```
 - input text for username searching
 -- 1 button for ordering newest users
 -- 1 button for ordering oldest users
 --- 1 input type submit for submitting all the search form 
```

现在，一旦您提交搜索表单，您只需检查 if `$this->input->post('ordering'); -> create session value for ordering`，因此下次您将加载上一页或下一页时，ordering 的值与您设置的值相同。

我需要大约 100K 行来做一个例子，你无论如何都可以用谷歌搜索如何在 Codeigniter 和过滤器参数中进行搜索和分页。我相信你会学到一些很好的教程；）

这里还有一些资源，只是谷歌;）

[在 Codeigniter 中过滤、排序和分页](https://stackoverflow.com/questions/2428651/filter-sort-and-paginate-in-codeigniter)

# java - 更改progressdialog的进度单位（字节到兆字节）

> ID：15866070
> 
> 赞同：2
> 
> 时间：2013-04-07T18:23:52.813
> 
> 标签：java, android, progressdialog

我有一个进度对话框，显示使用字节作为进度单位下载我的文件我想将进度单位转换为兆字节

```
public void initializeDialog()
    {
        this.pDialog = new ProgressDialog(act);
        this.pDialog.setMessage("Download");
        this.pDialog.setIndeterminate(false);
        this.pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        this.pDialog.setCancelable(true);
    }

    public AsynchTest() {
        initializeDialog();
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

pDialog.setProgressNumberFormat("%1d MB / %2d MB");
        pDialog.show();
        pDialog.setProgress(0);

    }

    @Override
    protected Void doInBackground(Void... params) {

        downloadContent();
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {

        pDialog.incrementProgressBy((int) byteToMB(progress[0]));
    }

    @Override
    protected void onPostExecute(Void result) {
        pDialog.dismiss();

    } 
```

我使用此函数将字节转换为 mb

```
public long byteToMB(long byteTransform)
    {
        long mb=1024L*1024L;
        return byteTransform/mb;

    } 
```

我用来更新进度对话框的代码片段

```
byte data[] = new byte[1024];
            while ((count = input.read(data)) != -1) {  
                asynch.publishProgress(count);
                output.write(data, 0, count);

            } 
```

我像这样设置我的进度对话框的最大值

```
sizePDialog+=ConnectionManager.getLength(url);
pDialog.setMax((int) byteToMB(sizePDialog)); 
```

但是当我这样做时我会出现这个错误

```
04-07 20:09:55.119: E/AndroidRuntime(20166): java.lang.NumberFormatException: Invalid long: "%1d" 
```

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:59:45.283

我认为你不应该像文档所说 的那样打电话`setProgressNumberFormat`来[http://developer.android.com/reference/android/app/ProgressDialog.html#setProgressNumberFormat(java.lang.String)](http://developer.android.com/reference/android/app/ProgressDialog.html#setProgressNumberFormat(java.lang.String))`onProgressUpdate`

> 更改显示当前和最大进度单位的小文本格式。默认值为“%1d/%2d”。不应该在号码进行中调用。

实际上`setProgressNumberFormat`，仅更改显示进度和最大进度的方式，您无法更改，就像您尝试过的那样，在格式化之前的值。我建议您在将值传输到进度对话框时将字节转换为 MB，然后将值格式化为 MB。

这样做你应该替换`pDialog.incrementProgressBy(progress[0]);`by`pDialog.incrementProgressBy(byteToMB(progress[0]));`并调用

```
pDialog.setProgressNumberFormat("%1d MB / %2d MB"); 
```

在`onPreExecute`

# delphi - Delphi，使用 idhttp 自动提交按钮

> ID：15866071
> 
> 赞同：0
> 
> 时间：2013-04-07T18:23:53.757
> 
> 标签：delphi, indy, idhttp

假设我有像 mozilla 和 iexplorer 这样的互联网浏览器，所以，我使用 mozilla 并且我已经使用我的帐户用户名和密码登录到一个网站，那么 idhttp 可以发布（提交表单，自动点击）到已经打开的帐户（没有打开网络浏览器）？或者我将不得不再次使用我的用户名和密码来发布提交？

我不需要代码，只要求回答是或否，如果不是！我应该在 INDY 中使用什么控件？示例：我想为单击自动提交按钮（我的帐户已经登录）！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:11:19.463

我怀疑身份验证将在浏览器本地进行，即通过特定于浏览器的 cookie 进行验证。

从 Delphi 代码中，您需要检索 cookie（可能有可能，例如[从带有 FireFox 的 SQLite3 文件](http://kb.mozillazine.org/Cookies)，或使用 IE 作为用户配置文件中的纯文本），然后使用 Indy 查询网站，包括 cookie 内容在请求标头中。

但这在很大程度上取决于身份验证的完成方式。例如，它使用 HTTP 还是 HTTPS 协议？服务端是如何实现的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:15:58.653

您的问题没有简单的**“是/否”**答案。这取决于网站/服务器如何处理身份验证。

默认情况下，http 是**STATELESS**：对服务器的每次调用对前一次调用一无所知。在这种情况下，您必须在每次访问服务器时都进行身份**验证**。

但是大多数现代站点都实现了某种身份验证持久性：要么通过在服务器上维护用户会话信息，要么正如 Arnaud Bouchez 所提到的，发回一个跟踪您的身份验证的 cookie。

我曾经编写过一个自定义 Web 应用程序，它在第一个响应中发回一个加密的身份验证令牌，并且它是客户端（它是一个自定义 Windows 客户端，带有使用 idhttp 实现的嵌入式套接字，而不是浏览器客户端）的责任来发回那个令牌对于每个后续请求。

**所以，你的答案是：**让服务器来处理它——你通常没有太多选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:15:31.533

如何创建一个具有登录网站后自动提交功能的自定义浏览器？
我曾经使用 TChromium 和 TBrowser 制作具有自动表单提交功能的自定义浏览器。
这简单。您只需要知道如何使用 javascript 控制 dom 并操作页面源。
对不起，简单的答案

# java - Java 数字签名 - 不一致的签名

> ID：15866072
> 
> 赞同：1
> 
> 时间：2013-04-07T18:24:03.837
> 
> 标签：java, security, digital-signature, dsa

我一直在使用 Java 安全 api，并遵循有关如何生成数字签名的教程：http: [//docs.oracle.com/javase/tutorial/security/apisign/gensig.html](http://docs.oracle.com/javase/tutorial/security/apisign/gensig.html)

问题是当我运行代码时，即使要签名的私钥和数据保持不变，输出签名也总是不同的。我在下面提供了我曾经运行的代码。“priv”是一个保存私钥的文件，用于对数据进行签名：“hello”。

基本上，两个输出显示相同的数据：“hello”使用相同的密钥签名，但输出不同。我期望得到相同的输出。此外，当我再次运行程序时，签名数据再次与初始运行不同。任何帮助将非常感激。提前致谢

```
public static void main(String[] args) {
   try {
      FileInputStream privfis;
      privfis = new FileInputStream("priv");
      byte[] encKey = new byte[privfis.available()];
      // obtain the encoded key in the file
      privfis.read(encKey);
      privfis.close();
      PKCS8EncodedKeySpec privKeySpec = new PKCS8EncodedKeySpec( encKey);
      KeyFactory keyFactory = KeyFactory.getInstance("DSA", "SUN");
      PrivateKey priv = keyFactory.generatePrivate(privKeySpec);
      Signature dsa = Signature.getInstance("SHA1withDSA", "SUN");
      dsa.initSign(priv);
      String message = "hello";
      System.out.println(getHexString(message.getBytes()));
      dsa.update(message.getBytes());
      byte[] realSig = dsa.sign();
      System.out.println(getHexString(realSig));
      dsa.update(message.getBytes()); 
      System.out.println(getHexString(message.getBytes()));
      byte[] realSig2 = dsa.sign();
      System.out.println(getHexString(realSig2));
      } catch (Exception e) {
         System.err.println("Caught exception " + e.toString());
         e.printStackTrace();
      }
   }

   private static String getHexString(byte[] b) {
      String result = "";
      for (int i = 0; i < b.length; i++) {
         result += Integer.toString((b[i] & 0xff) + 0x100, 16).substring(1);
      }
      return result;
   }        
} 
```

# javascript - 以编程方式暂停 youtube 和 vimeo 并检测是否正在播放视频

> ID：15866073
> 
> 赞同：0
> 
> 时间：2013-04-07T18:24:04.283
> 
> 标签：javascript, youtube-api, vimeo

我有一个允许视频嵌入的滑块（目前通过粘贴来自 youtube/vimeo 等的 iframe 代码）。我遇到的问题是当用户单击视频播放按钮时视频需要暂停滑块，并且当滑块移动到下一帧时也暂停视频。

看来我需要使用 vimeo 和 youtube API 来访问我想要的信息和控制。我查看了 API，我想我可能会发生这种情况；但是我的问题是，从我目前看到的情况来看，youtube API 倾向于使用视频 ID，而 Vimeo API 似乎可以与 iFrames 一起使用，但我需要为最终用户提供一致的输入，因为我想要说“**在此处粘贴视频 ID** ”或“**在此处粘贴 iframe** ”或“**在此处粘贴视频 URL** ”...下一个。

我知道如何操纵数据以使两者保持一致，但如果可能的话，我宁愿避免这种情况。以编程方式访问 Youtube 和 vimeo 的最佳方法是什么，以便我可以访问播放和暂停并知道视频是否正在播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T21:56:49.203

[https://github.com/dachcom-digital/jquery-video](https://github.com/dachcom-digital/jquery-video)上有一个小部件，您可以使用它存档您要求的内容。

您可以向用户询问视频 ID 并呈现一些 HTML 容器。然后，您应用小部件并可以使用一致的 API 暂停、播放等视频。

希望这可以帮助。

# ios - 选中时突出显示集合单元格

> ID：15866075
> 
> 赞同：0
> 
> 时间：2013-04-07T18:24:23.730
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell

我正在尝试用黄色边框突出显示 UICollectionView 中选定的集合单元格，以便用户可以看到当前选择了哪一个。我试过这个：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    FilterCell *filterCell = (FilterCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"FilterCell" forIndexPath:indexPath];
    filterCell.window.backgroundColor = [UIColor yellowColor];
    filterCell.backgroundColor = [UIColor yellowColor];

    NSLog(@"hello");
} 
```

UICollectionViewCell 内的 UIImageView 周围有 2 个空像素，因此它应该可以工作，但不能。

它正在记录“你好”，但边框保持黑色。看这个截图：

![在此处输入图像描述](https://i.stack.imgur.com/aGlpq.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T18:28:37.770

您以错误的方式获取单元格

```
FilterCell *filterCell = (FilterCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"FilterCell" forIndexPath:indexPath]; 
```

将使当前未使用的单元出列或分配具有指定标识符的新单元。

采用

```
FilterCell *filterCell = (FilterCell *)[collectionView cellForItemAtIndexPath:indexPath]; 
```

反而。

无论如何，更清洁的解决方案是设置单元格的`backgroundView`和`selectedBackgroundView`属性，而不触及`backgroundProperty`颜色（将保持`clear`默认）。通过这种方式，您可以避免委托方法并实现相同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:28:43.690

做一个`reloadItemsAtIndexPaths`: 代替，然后在 cellForItemAtIndexPath 中，检查 `[[collectionView indexPathsForSelectedItems] containsObject:indexPath]`如果为真，则在此处更改单元格的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T10:00:35.620

这可能会帮助您：

```
cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"YOUR_FILE_NAME.png"]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T06:40:34.327

- 此代码可以帮助您更改所选单元格的背景颜色

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView    cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cvCell" forIndexPath:indexPath];

if (cell.selected) {
 cell.backgroundColor = [UIColor blueColor]; // highlight selection 
}
else
{
 cell.backgroundColor = [UIColor redColor]; // Default color
}
return cell;
}

-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath  {

UICollectionViewCell *datasetCell =[collectionView cellForItemAtIndexPath:indexPath];
datasetCell.backgroundColor = [UIColor blueColor]; // highlight selection
}  
-(void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath
{
UICollectionViewCell *datasetCell =[collectionView cellForItemAtIndexPath:indexPath]; 
datasetCell.backgroundColor = [UIColor redColor]; // Default color
} 
```

# python - 从 Django 模型创建复合索引

> ID：15866076
> 
> 赞同：25
> 
> 时间：2013-04-07T18:24:30.070
> 
> 标签：python, django, django-models

我有以下模型：

```
from django.db import models

class PopulationData(models.Model):
    slot = models.IntegerField(db_index=True)
    sample = models.IntegerField()
    value = models.FloatField()

    class Meta:
        unique_together = (('slot', 'sample'),) 
```

我还想在具有`UNIQUE`约束的列对上创建一个复合索引，如下所示：

```
CREATE INDEX my_compound_index ON myapp_populationdata (slot, sample); 
```

现在我有一个单独的代码连接到`post_syncdb`发出前一个 SQL 语句的信号。有没有办法从模型规范中指出它？（注意：我使用的是 1.3 分支）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-22T06:15:18.573

从 django-1.5 开始，您可以使用 index_together 元选项制作复合索引： [https ://docs.djangoproject.com/en/dev/ref/models/options/#index-together](https://docs.djangoproject.com/en/dev/ref/models/options/#index-together)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-21T14:59:57.077

从 Django-1.11 开始使用 Meta.indexes 选项[https://docs.djangoproject.com/en/1.11/ref/models/indexes/](https://docs.djangoproject.com/en/1.11/ref/models/indexes/)：

```
from django.db import models

class PopulationData(models.Model):
    slot = models.IntegerField(db_index=True)
    sample = models.IntegerField()
    value = models.FloatField()

    class Meta:
        unique_together = (('slot', 'sample'),)
        indexes = [
            models.Index(fields=['slot', 'sample']),
        ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-17T02:41:30.173

由于*唯一约束*也会创建索引，因此创建两者会**适得其反。**

例如，来自**[`postgres docs`](https://www.postgresql.org/docs/current/indexes-unique.html)**：

> 无需在唯一列上手动创建索引；这样做只会复制自动创建的索引。

感谢[Mark Byers](https://stackoverflow.com/a/4531703/10746224)的文档链接

如果由于某种原因您仍想创建多列索引，您可以通过以下方式进行`index_together`：

```
class PopulationData(models.Model):
    ...

    class Meta:
        index_together = [['slot', 'sample']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T18:44:20.910

我认为这目前还没有在 django ORM 中实现。

如果您使用迁移工具（如 south），这可能是添加该 sql 语句的好地方，或者如果您更愿意避免使用原始 sql，则可以使用 sqlalchemy（核心），但这种情况听起来很简单，只需使用 sql。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-21T13:57:08.087

**注意：** *index_together 将来*可能会被弃用： [https ://docs.djangoproject.com/en/dev/ref/models/options/#index-together](https://docs.djangoproject.com/en/dev/ref/models/options/#index-together)

改用 Meta 类中的索引：

```
from django.db import models

class Customer(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)

    class Meta:
        indexes = [
            models.Index(fields=['last_name', 'first_name']),
            models.Index(fields=['first_name'], name='first_name_idx'),
        ] 
```

# php - 使用 esc_js() 保存的输出数据

> ID：15866079
> 
> 赞同：0
> 
> 时间：2013-04-07T18:24:48.843
> 
> 标签：php, javascript, wordpress

我对此进行了很多搜索，但没有发现与我的问题有太大关系。所以我发布了这个问题。

在 wordpress 中，我们可以使用 add_option() 函数保存额外的数据。在我的网站上，我制作了一个 textarea/ 放置谷歌广告代码的地方。当我单击保存该区域的数据时，保存到数据库。

现在，如果我只是获取数据并在这种情况下保存它，它会在脚本中添加一些额外的 / 或 /n。所以我使用[esc_js()](http://codex.wordpress.org/Function_Reference/esc_js)将其保存为代码。

现在在其他页面中，我需要该数据并在那里显示。所以我使用了 get_options() 然后我回应了这一点。但是当我使用 get 选项时，它实际上让我退出了编码中的 javascript 代码（不确定这是表达的完美词）。我在这里举个例子：

```
 If i save "<script></script>"

 its become "&lt;script&gt;&lt;/script&gt;  " 
```

现在我怎样才能得到它，因为它是在保存的时候。

我的框架是wordpress。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:53:26.770

尝试使用[html_entity_decode](http://dk.php.net/manual/en/function.html-entity-decode.php)。

# linq - 在 LINQ Lambda 表达式中使用 GroupBy 和 Max

> ID：15866087
> 
> 赞同：8
> 
> 时间：2013-04-07T18:25:19.823
> 
> 标签：linq, select, lambda, group-by, max

我有一个集合，例如：

```
**id1, id2, value**
   1    9    12
   2    9     6
   3    11    8
   4    11   87 
```

我想使用 LINQ 并得到以下结果：

```
**value**
   6
   87 
```

附言

```
id1 - select MAX;
id2 - group column; 
```

我需要以下形式的答案

```
var result = list.GroupBy(x=>x.id2).select(s=>s.value); 
```

我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-07T18:30:21.153

编辑：好的，现在我们有了更清晰的一组要求（尽管还远未写清楚），最简单的方法可能是：

```
var maxes = list.GroupBy(x => x.id2,
                         (key, xs) => xs.OrderByDescending(x => x.id1)
                                        .First()
                                        .value); 
```

不幸的是，LINQ 没有提供一种简单的方法来获取“具有最大值的元素”（而不是最大值本身）。我在[MoreLINQ](http://morelinq.googlecode.com)中有一个方法可以做到这一点，称为`MaxBy`：

```
var maxes = list.GroupBy(x => x.id2,
                         (key, xs) => xs.MaxBy(x => x.id2).value); 
```

* * *

**原答案**（按id2分组，取最大值）

我的回答是*假设*您实际上打算按`id2`而不是分组`id1`，并且您实际上想要 12 和 87 而不是 6 和 87 的结果。在这种情况下，您需要：

```
var maxes = list.GroupBy(x => x.id2, (id, xs) => xs.Max(x => x.value)); 
```

或者（可能更容易理解）：

```
var maxes = list.GroupBy(x => x.id2)
                .Select(xs => xs.Max(x => x.value)); 
```

或者：

```
var maxes = list.GroupBy(x => x.id2, x => x.value)
                .Select(values => values.Max()); 
```

或者：

```
var maxes = list.GroupBy(x => x.id2,     // Key selector
                         x => x.value,   // Element selector
                         (key, values) => values.Max()); // Result selector 
```

甚至：

```
var maxes = list.GroupBy(x => x.id2)
                .Select(xs => xs.Select(x => x.value).Max()); 
```

如您所见，[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)有很多重载:)

或者您可以使用查询表达式：

```
var maxes = from x in list
            group x.value by x.id2 into values
            select values.Max(); 
```

您不应该将自己限制*在*查询表达式或扩展方法版本 - 了解两者很重要，因此您可以使用最合适的任何内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T22:53:25.723

显然，OP希望`Value`最大`Id1`范围内`Id2`：

样本数据：

```
public class Row
{
    public int Id1;
    public int Id2;
    public int Value;
}

List<Row> rows = new List<Row>(){
    new Row(){Id1=1,Id2=9,Value=12},
    new Row(){Id1=2,Id2=9,Value=6},
    new Row(){Id1=3,Id2=11,Value=8},
    new Row(){Id1=4,Id2=11,Value=87}
}; 
```

解决方案：

```
List<int> res = rows.GroupBy(r => r.Id2)
                    .Select(g => g.OrderByDescending(i=>i.Id1).First().Value)
                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T14:56:37.147

万一它对其他人有帮助，我遇到了类似的情况，除了需要返回多条记录而不是一条记录。

例如。

```
**id1, id2, value**
   1    9    12
   2    9     6 <-
   2    9     7 <-
   3    11    8
   4    11   87 <-
   4    11   88 <- 
```

以下将上述四条记录作为两个记录的两个列表（可枚举的枚举）返回：

```
 var maxes = from x in list
            group x by x.id2 into xs
            select new {values = xs.Where(x => x.id1 == xs.Max(y => y.id1))}; 
```

或者

```
 var maxes = list.GroupBy(x => x.id2,
            (key, xs) => new
            {
                values = xs.Where(x => x.id1 == xs.Max(y => y.id1))
            }); 
```

# sql - SELECT 语句的顺序限制

> ID：15866097
> 
> 赞同：0
> 
> 时间：2013-04-07T18:25:47.190
> 
> 标签：sql, sql-server

在我的表中，我有一列类型`nVarchar`或`nText`

假设 this col 的值是这样的`'... xxx yyy zzz ...'`

我用`SELECT`这个列搜索表

```
SELECT * FROM tbl_name WHERE col_name like '%xxx yyy%' 
```

由于我不能强迫用户用我的序列输入单词，我也想用这个查询给出相同的结果：

```
SELECT * FROM tbl_name WHERE col_name like '%yyy xxx%' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:17:05.257

在我看来，您可能需要考虑规范化您的表格。具体来说，如果“yyy xxx”与“xxx yyy”相同，则您将在一个列中存储一个数组（或列表或任何您想调用的名称），这会破坏第一个正常形式。对其进行规范化，以便每个原子（即“xxx”、“yyy”）单独存储并与您的原始记录相关联。那么做你想做的事情几乎是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T18:32:56.853

您必须将用户输入标记为应用程序代码中的单独单词（而不是在 sql 中），然后构造查询，例如

```
SELECT * FROM tbl_name WHERE 
(col_name like '%yyy%') AND (col_name like '%xxx%') AND ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:33:19.777

您最好的选择是同时使用这两个标准和“或”。

```
SELECT * 
FROM tbl_name 
WHERE (col_name like '%xxx yyy%')
   OR (col_name like '%yyy xxx%'); 
```

# iphone - NSNotificationCenter 最佳实践和活跃观察者列表

> ID：15866100
> 
> 赞同：1
> 
> 时间：2013-04-07T18:25:59.037
> 
> 标签：iphone, ios, xcode, nsnotificationcenter, nsnotification

我一直在我的几个应用程序中使用通知做了大量工作，起初它们给了我随机崩溃，但后来我了解了使用 NSNotifications 的最佳方法，这里有一些我学到的最佳实践。

---当它们没用时移除观察器。

---在观察者被释放之前移除观察者，导致随机崩溃。

---不要在同一个类中为同一个通知添加两个观察者方法。

如果我错了或者如果我错过了什么，请随时补充。**我现在想要的是，当我发布通知时，我可以看到观察者等待接收我的通知的列表，并且我可以通过故意遗漏一些来选择性地发布到一组观察者吗？**

我也看到了这个非常相似的[线程。](https://stackoverflow.com/questions/10346700/nsnotificationcenter-list-of-observers)我正在创建一个新线程，因为我想通过通知挖掘更多信息。我期待好的贡献。

# python - Python 3 正确读取 .csv 文件

> ID：15866106
> 
> 赞同：0
> 
> 时间：2013-04-07T18:26:29.770
> 
> 标签：python, csv, python-3.x

我有一个 .csv 文件，其中有 6 列标记为经度、纬度、海拔、段距离、总距离和未标记的列。

我们只需要使用海拔列和路段距离列中的数据，因为我们正在使用这些数据来计算骑自行车的人所消耗的卡路里。我们想为行程的每一段计算它并将其输出到动画图表中。老实说，我不知道从哪里开始，因为我刚刚开始编程。

任何想法或帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:33:30.090

我建议您查看 python 库中的 csv 模块：http: [//docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

```
>>> import csv
>>> with open('eggs.csv', 'rb') as csvfile:
...     spamreader = csv.reader(csvfile, delimiter=' ', quotechar='|')
...     for row in spamreader:
...         print ', '.join(row)
Spam, Spam, Spam, Spam, Spam, Baked Beans
Spam, Lovely Spam, Wonderful Spam 
```

如果您需要具体示例，您应该发布几行 csv 文件

# android - 在 Android API 10 中实现横向导航

> ID：15866108
> 
> 赞同：1
> 
> 时间：2013-04-07T18:26:30.520
> 
> 标签：android, api, navigation, android-fragments, android-fragmentactivity

如何在android 2.3，api版本10 中实现横向导航（ [https://developer.android.com/training/implementing-navigation/lateral.html#horizo ​​ntal-paging）？](https://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)

因为我确实在链接中下载了 Google 提供的示例，但它在具有 api 10 的设备中不起作用，但是 google play 中有许多具有此功能的应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T18:40:13.423

`ViewPager`假设您使用的是 Support Library 和类，它本身确实适用于 Android 2.3，所以[我](http://developer.android.com/tools/extras/support-library.html)`FragmentActivity`假设您`Fragment`在示例中遇到的问题是选项卡。在这种情况下，我建议查看[创建向后兼容的 UI 培训](https://developer.android.com/training/backward-compatible-ui/index.html)，特别是[使用旧 API 创建实现](https://developer.android.com/training/backward-compatible-ui/older-implementation.html)课程，该课程介绍了以适用于 Android 2.3 设备的方法实现选项卡。

# jquery - 无法为附加图像设置动画

> ID：15866109
> 
> 赞同：0
> 
> 时间：2013-04-07T18:26:33.193
> 
> 标签：jquery

我使用`javascript`代码创建一个新的图像元素并设置它的`src`属性，然后将其附加到一个“a”标签。然后我使用`setInterval()`调用`slide()`应该将图像向左移动然后使其淡出的函数，但是图像淡出但它根本不移动。

```
function slide(){

var img=$("img");

img.animate({"left": '150'}, "slow", function() {

img.fadeOut("slow", function() {

forward();

img.fadeTo("slow",1);

          }); 

          });

               }

setInterval(function(){slide();}, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:37:56.290

您应该绝对定位图像以使其能够移动。
将此 CSS 添加到您的页面 `img{ position:absolute; left:0; top:0; }`

*请注意，如果您使用`img`CSS 中的选择器，所有图像都将被绝对定位*

这是一个在行动中的小提琴 - [http://jsfiddle.net/friiks/qXvy7/](http://jsfiddle.net/friiks/qXvy7/)

# jquery - 加载了 ajax 的 FullCalendar 不会建立日历

> ID：15866110
> 
> 赞同：0
> 
> 时间：2013-04-07T18:26:40.820
> 
> 标签：jquery, fullcalendar

我正在使用 ajax 加载的页面中使用 FullCalendar 插件。加载页面后，我得到的只是标题按钮，但在单击其中一个按钮（月/周/日）之前，日历本身不会显示。

这是我的代码：

```
$('#calendar').fullCalendar({
    header: { left: 'next,prev, today', center: 'title', right: 'month,basicWeek,basicDay'},
    isRTL: true,
    height: 540,
    events: {
        url: "../practice/AjaxJson",
        cache: true
    },
    timeFormat: 'H(:mm)'
}); 
```

如果我将此代码放在一个函数中并使用设置为 1500 毫秒的 setTimeout 调用它，它就可以工作。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T09:44:13.053

1.  只需在 dom 准备好后尝试放置您的代码。
2.  使用 renderEvents ( [http://arshaw.com/fullcalendar/docs/event_rendering/rerenderEvents/](http://arshaw.com/fullcalendar/docs/event_rendering/rerenderEvents/) )
3.  确保您没有在隐藏元素上加载日历。

# lua - Corona SDK (LUA) - 插入表格时出现问题

> ID：15866112
> 
> 赞同：0
> 
> 时间：2013-04-07T18:26:45.183
> 
> 标签：lua, coronasdk

我已经搜索了很多，但找不到解决方案。您可以提供的任何帮助将不胜感激。

```
-- The array compiled of enemies only allowed in the current
-- level phase
local EnemyList = {}
-- Counter to determine the next spot in the EnemyList
-- array to insert into
local counter   = 1

for i=1,#Enemies do
    if Enemies[i].phase == 0 or Enemies[i].phase == which_phase then
        EnemyList[counter].src      = Enemies[i].src
        EnemyList[counter].exp      = Enemies[i].exp
        counter                     = counter + 1
    end
end 
```

我收到关于尝试索引`nil`值的错误，参考`EnemyList`表/数组。我想要完成的是我试图编译一个新的数组，其中只有允许的敌人。我想我不确定如何在表中插入新行`EnemyList`。我尝试使用`table.insert`，但 value 参数是必需的，而且我不知道如何做到这一点，因为我将多个值存储到`EnemyList`数组中。

任何有关将新行插入空表/数组的正确方法的帮助或见解将不胜感激。谢谢！

**编辑：** 我有一个可行的解决方案，但我想如果将来有人找到它，我应该在这里更新代码。

```
-- The array compiled of enemies only allowed in the current
-- level phase
local EnemyList = {}

for i=1,#Enemies do
    if Enemies[i].phase == 0 or Enemies[i].phase == which_phase then
        table.insert( EnemyList, { src = Enemies[i].src, exp = Enemies[i].exp } )
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:35:12.283

您可以在 Lua 中的表中存储表。表以以下两种方式之一进行索引：首先，按索引号。这就是`table.insert`用途；它将在下一个索引号处添加一个条目。

第二种方式是按键；例如

```
> t = {}
> t.test = {}
> =t.test
table: 0077D320 
```

您可以将表格插入表格；这就是您创建 2D 表的方式。由于您定义表的方式，`type(EnemyList[counter]) = table`.

您可以通过运行将新条目插入到表中`table.insert(table, value)`。这将分配`value`给下一个可用的数字条目。`type(value)`也可以是`table`；这就是在 Lua 中创建“多维数组”的方式。

顺便说一句，`for i=1,#Enemies`我建议不要使用`for i,v in ipairs(Enemies)`. 第二个将遍历表中的所有数字条目`Enemies`。

# php - Zend_Controller_Router_Rewrite

> ID：15866114
> 
> 赞同：0
> 
> 时间：2013-04-07T18:27:03.460
> 
> 标签：php, zend-framework

我想使用 Zend_Controller_Router_Rewrite用 zend 1.12为**ndd.dev/i/rouen/1/重写我的 URL** **ndd.dev/interet/index/id/1/**

 **为此，我在我的引导程序中添加了：

```
protected function _initRouter () {

    $config = new Zend_Config_Ini(APPLICATION_PATH.'/config/application.ini', APPLICATION_ENV);
    $router = new Zend_Controller_Router_Rewrite();
    $router->addConfig($config, 'routes');

} 
```

进入我的“application.ini”：

> routes.interet.type = "Zend_Controller_Router_Route_Regex"
> 
> routes.interet.route = "/i/(.+)/([0-9]+)/"
> 
> routes.interet.defaults.controller = "interet"
> 
> routes.interet.defaults.action = "索引"
> 
> routes.interet.map.1 = "搜索引擎优化"
> 
> routes.interet.map.2 = "id"
> 
> routes.interet.reverse ="i/%s/%d/"

我的 .htaccess ：

> 重写引擎开启
> 
> RewriteCond %{REQUEST_FILENAME} -s [OR]
> 
> RewriteCond %{REQUEST_FILENAME} -l [OR]
> 
> RewriteCond %{REQUEST_FILENAME} -d
> 
> 重写规则 ^.*$ - [NC,L]
> 
> RewriteRule ^.*$ index.php [NC,L]

但是**www.ndd.dev/i/rouen/1/**返回：

> Zend_Controller_Dispatcher_Exception 指定的控制器无效 (i) envoyée dans /www/library/Zend/Controller/Dispatcher/Standard.php à la ligne 248

我忘记了像 addRoute 或其他东西这样的东西吗？

我已经在我的引导程序中尝试过这种方法：

```
 $router = Zend_Controller_Front::getInstance()->getRouter();

    $r = new Zend_Controller_Router_Route_Regex(
        "/i/([-\w]+)/(\d+)/",
        array('controller' => 'interet', 'action' => 'index'), 
        array(1 => 'seo', 2 => 'id'),
        'i/%s/%d/'
    );

    $router->addRoute('interet', $r); 
```

同样的结果，他试图找到“i”控制器

*Zend_Controller_Dispatcher_Exception 指定的控制器无效 (i)*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:15:53.003

通常，您的 application.ini 路由将符合结构（您的不符合，除非您截断它们）：

```
// /application/configs/application.ini
//uri for this route
resources.router.routes.login.route = /login
//module for the route, 'default' is used if there is no named module
resources.router.routes.login.defaults.module = default
//default controlle for this route
resources.router.routes.login.defaults.controller = auth
//default action for this route
resources.router.routes.login.defaults.action = login 
```

注意每一行如何以***资源***开头，第四个单词是路由的***“名称”***（在本例中是*'login'*）。

我不是 100% 确定，但我不认为你的引导程序`_initRouter()`在这里帮助你，我不记得当路由在`application.ini`. 也许把它评论出来，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:36:20.357

我已经在我的引导程序中尝试过这种方法：

```
 $router = Zend_Controller_Front::getInstance()->getRouter();

    $r = new Zend_Controller_Router_Route_Regex(
        "/i/([-\w]+)/(\d+)/",
        array('controller' => 'interet', 'action' => 'index'), 
        array(1 => 'seo', 2 => 'id'),
        'i/%s/%d/'
    );

    $router->addRoute('interet', $r); 
```

同样的结果，他试图找到“i”控制器

*Zend_Controller_Dispatcher_Exception 指定的控制器无效 (i)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:17:02.893

问题是正则表达式：

```
"i/([-\w]+)/(\d+)" 
```

代替

```
"/i/([-\w]+)/(\d+)/" 
```**

# php - 如何在php中创建动态函数

> ID：15866115
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:27:16.473
> 
> 标签：php, function

如何用php创建一个动态函数。例如我想做：

```
<?php 

function update($table, $data=array(), $column, $value) 
{
   if (is_array ($data)
   {
       $q = "UPDATE $table SET $column WHERE $data = $value."
   }
   return $q;
} 
```

当我调用这样的函数时我怎么得到

```
$array = array(
    'id'   => 1,
    'name' => 'john',
);
update('user', $array, 'id', 1); 
```

和结果值：

```
UPDATE users SET id=1, name='John' where id=1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:36:33.833

像这样的东西：

```
$fields = array();
foreach ($data as $k => $v) {
  $fields[] = "`$k`='$v'";
}
$fields = implode(',', $fields);

return "UPDATE $table SET $fields WHERE $data = $value"; 
```

但这是构建 SQL 语句的一种**非常**错误的方式。您可能想要使用[PDO](http://php.net/manual/es/book.pdo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:36:41.890

```
<?php function update($table, $data=array(), $column, $value) {
   if(is_array($data) && !empty($data)){
     $toUpdate = array() ;
     foreach ($data as $key => $value){
       $toUpdate[] = "{$key} = '{$value}'" ;
     }
     $sets = implode(", ", $toUpdate) ;
     $q = "UPDATE {$table} SET {$sets} WHERE {$column} = '{$value}' " ;
     return $q ;
   }
   return null ;
}
?> 
```

只是一个简单的例子。您应该记住，您必须通过转义数据中的特殊字符来保护您的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:36:49.080

你可以这样做：

```
<?php
function update($table, $data=array(), $column, $value) {
  if(is_array($data) && count($data) > 0){
    $q="UPDATE $table SET"
    $i = 0;
    foreach ($data as $field => $value) {
      if ($i > 0) {
        $q .= ",";
      }
      $q .= " $field=$value";
    }
    $q .= " WHERE $column=$value";
  }
  return $q;
}
?> 
```

# ruby - 红宝石鞋 - 删除最小化和退出按钮

> ID：15866121
> 
> 赞同：1
> 
> 时间：2013-04-07T18:27:54.910
> 
> 标签：ruby, user-interface, shoes

我一直在寻找有关如何使用鞋子工具包完成此操作的任何想法，但没有取得很大成功。有谁知道至少一个起点？我正在构建一个小型邮件客户端，我需要删除登录窗口的标题按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:24:03.390

鞋子只实现了一个“有限工具箱”，您可以使用它创建自己的工具。你可以用它做一些很棒的事情，但有很多事情你不能做，因为它只是一个工具箱，根据定义。

例如，您可以创建写有“关闭”的按钮，并链接一堆代码来关闭窗口。

那会很难看，但不幸的是，暂时无法修改环境的当前标题按钮（关闭最小化最大化）。

这是工具箱-> [http://shoesrb.com/manual/Shoes.html](http://shoesrb.com/manual/Shoes.html)

# c++ - C++ 中单链表的操作（带 in t 和 char 变量）

> ID：15866122
> 
> 赞同：3
> 
> 时间：2013-04-07T18:28:08.620
> 
> 标签：c++, list, singly-linked-list

我是 C++ 的初学者程序员，我的问题涉及在单链表上实现操作。我的单链表必须同时具有“char”和“int”变量，并且能够：在列表中删除和添加元素（在开头/结尾）并显示所有列表元素。

在我详细描述问题是什么之前，请看一下我迄今为止设法制作的代码。

```
#include <iostream>
using namespace std;

struct FunnyList {
    int iValue;
    char *cName;
    FunnyList *next;
};

int main()
{
    FunnyList *base;
    FunnyList *traversal;

    base = new FunnyList;       
    base->next = 0;             
    base->cName = "Alicia";       
    traversal = base;           
    if(traversal != 0) {
        while( traversal->next != 0) {
            traversal = traversal->next;
        }
        cout << traversal->cName << endl;
    }

    traversal->next = new FunnyList;   
    traversal = traversal->next;    
    traversal->next = 0;           
    traversal->cName = "Octavia";

    while(traversal->next != 0) {
        traversal = traversal->next;    
    }
    cout << traversal->cName << endl;

    traversal->next = new FunnyList;    
    traversal = traversal->next;        
    traversal->next = 0;                
    traversal->cName = "Tom";

    while(traversal->next != 0) {
        traversal = traversal->next;    
    }
    cout << traversal->cName << endl;

    return 0;
} 
```

我的问题是：

1）我知道我可能需要实现功能： - insert() - remove() - display()

格式为 (?)：

*   void insert_el(char *cName, int iValue);
*   无效 delete_el(char *cName);
*   无效打印（）；

而不是在 main() 中实现它们，但我不知道如何使其与我的部分代码兼容。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:39:23.237

如果你正在做这种简单的旧式`C`，你通常有负责处理你的列表的函数。喜欢

```
insert_node(struct FunnyList* previous, struct FunnyList* item);
remove_node(struct FunnyList* base, struct FunnyList* item);
print_nodes(struct FunnyList* base); 
```

这些函数将您的头节点或兄弟节点作为锚点并对其执行操作。

如果您尝试使用 - 方式`OO`使用`C++`，您将拥有一个行为类似于`std::vector`or`std::list`并负责此操作的对象。这里的区别在于，您的数据和数据上的函数被封装在一个对象中，您不会对原始数据本身进行操作。[这](http://www.functionx.com/cpp/articles/linkedlist.htm)是`C++`关于链表的风格教程。

[这](http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/linklist.html)是一个简单的*C*风格示例和来自 Wikipedia 的[这篇文章。](http://en.wikipedia.org/wiki/Linked_list)

# java - Datanucleus 警告：在持久性单元中指定了类但未注释，因此忽略

> ID：15866124
> 
> 赞同：8
> 
> 时间：2013-04-07T18:28:18.520
> 
> 标签：java, spring, google-app-engine, jpa, datanucleus

启动我的应用程序时，我会为每个班级看到以下警告：

```
WARN  [DataNucleus.MetaData] - Class com.mycomp.MyClass was specified in persistence-unit myPersistenceUnit but not annotated, so ignoring 
```

该应用程序正确启动，因此没有直接问题，但我想知道这个表格在哪里，以及如何避免 id。

我的 persistence.xml 看起来像：

```
<persistence-unit name="myPersistenceUnit">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <properties>
        <property name="datanucleus.ConnectionURL" value="appengine" />
        <property name="datanucleus.NontransactionalRead" value="true" />
        <property name="datanucleus.NontransactionalWrite" value="true" />
        <property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true" />
        <property name="datanucleus.jpa.addClassTransformer" value="false" />
    </properties>
</persistence-unit> 
```

我正在使用 Spring 在 Google App Engine 上运行我的应用程序。

但我找不到警告的来源。有些东西似乎在告诉我的应用程序对所有课程进行一些检查。

PS：我正在定义我的 entityManagerFactory 如下：

```
@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
    LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();
    entityManagerFactory.setPersistenceUnitName("myPersistenceUnit");
    entityManagerFactory.setPersistenceUnitPostProcessors(new ClasspathScanningPersistenceUnitPostProcessor("com.mycomp.domain"));
    return entityManagerFactory;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:36:42.897

您的persistence.xml 中没有包含任何< jar-file > 或< class > 标签，所以我的猜测是您的应用程序正在搜索它可以访问的所有类中的实体。也许您在同一个 java 包中混合了实体和非实体类。你真的没有说太多关于pacakges或你的课程。

# ruby-on-rails - 我可以在哪些服务器上部署 Ruby on Rails？

> ID：15866125
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:28:20.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Ruby on Rails 的初学者，我问我可以在哪些服务器上部署框架！我听说了很多关于 Heroku 的事，但他们问我是否可以在本地服务器上启动一个 ruby​​ on rails 应用程序，其中包含 4000-10000 个条目的数据库（我的意思是很少的流量！），例如来自德国公司 protonet 这里是链接： http: [//protonet.info](http://protonet.info)

或者在一个简单的windows、linux服务器上？使用至强处理器？

或者有人可以为本地服务器建议一个不绑定到互联网的解决方案吗？网站本身只需要在本地网络中可见！

我非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:34:46.530

一般来说，任何 Unix(y) 或 Windows 服务器（不推荐）都应该这样做。大多数共享托管公司不支持 ruby​​，因此 VPS 可能是为了公共互联网。我总是在 Ubuntu 上部署，然后才搬到 digitalocean.com（基本 VPS 每月 5 美元）——不像上周刚搬到的那样背书。对于内部，我建议使用 Unix 服务器和可能的 rvm 来为应用程序安装专用的 ruby​​。

Heroku / Engine Yard 也可以选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:43:24.630

是的，您可以在本地部署。您首先要尝试的是“rails s -p 3000”。答对了。您现在拥有一个在本地网络上运行的功能齐全的 Rails 服务器。尝试使用您的 IP 地址和端口访问它。您可以在 Windows 和 Linux 上进行部署，但根据我自己的经验，您会更喜欢 Linux（更快、更容易）。

Windows，瘦服务器即服务：[http ://www.dixis.com/?p=140](http://www.dixis.com/?p=140)

Linux：[理想的 Rails 服务器](https://stackoverflow.com/questions/3485074/ideal-rails-server)

# cassandra - 三个副本的 Cassandra 令牌

> ID：15866126
> 
> 赞同：0
> 
> 时间：2013-04-07T18:28:21.503
> 
> 标签：cassandra, datastax-enterprise

我正在尝试在不同的数据中心构建两个 3 节点 Cassandra 集群。我想在它们之间进行 NetworkToplogyStrategy 复制，每个复制因子为 3。因此，我希望每个数据中心的每个节点都有相同的记录。

问题，每个节点的令牌分配应该是什么样的？（因为我实际上并没有分区，只是复制）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:32:54.750

如果您使用的是 Cassandra 1.2，请使用具有自动分配功能的虚拟节点。

如果您使用的是 1.1 或更早版本，请为一个 DC 使用均匀分布的令牌：

0 56713727820156410577229101238628035242 113427455640312821154458202477256070484

（0、1 和 2 次 2**127/3）

对于另一个 DC，你可以选择任何东西，只要它也是均匀分布的。抵消 1 个作品：

1 56713727820156410577229101238628035243 113427455640312821154458202477256070485

尽管目前令牌并不重要，因为所有节点都持有相同的数据，但如果您想在未来扩展，这将有助于使它们已经平衡。

# wpf - 是否可以通过 TreeViewItems 而不是其绑定内容来遍历 wpf TreeView？

> ID：15866127
> 
> 赞同：0
> 
> 时间：2013-04-07T18:28:28.797
> 
> 标签：wpf, treeview, treeviewitem

`TreeViews` `BringIntoView`尝试选择树中通过`ItemSource`和绑定的事物时，我在实现方面遇到了真正的问题`ItemTemplate`。它只是不起作用，我已经尝试了几乎所有我可以通过谷歌找到的花哨的方法，但大多数都不起作用，如果他们做错了，总是会被选中。

如果我可以通过树视图项而不是我绑定的东西一次走一层树，那对我来说会更容易。

有没有办法将我绑定的分层数据模板项“映射”回树视图项？

注意：看起来问题的一部分是我加载到树中的项目是以“懒惰”的方式完成的，在这种方式中创建子项直到它们显示出来——我必须这样做，因为数据集是巨大的。

总结一下：我可以快速搜索我的数据集并很快确定“节点”完整的层次路径，即我可以很容易地获得“root\p1\p2\p3\data”，但我无法获得绑定到数据集的树视图使用 Bringintoview 显示它。如果我可以使用 treevitems 遍历树，我可以自己找到该节点并为此调用 Bringintoview。无论如何，这就是计划。

大头针。

编辑：

经过一番搜索，我发现了这个[http://blogs.msdn.com/b/wpfsdk/archive/2010/02/23/finding-an-object-treeviewitem.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2010/02/23/finding-an-object-treeviewitem.aspx)。哪个有效，但也有问题 - 我最初无法扩展根对象，并且我无法弄清楚如何将 ItemsPanel 和 ItemContainerStyle 分离为顶级样式/资源，因此我可以轻松地分享我的其他树视图。

# c++ - 通过锁定互斥锁导致的分段错误

> ID：15866128
> 
> 赞同：2
> 
> 时间：2013-04-07T18:28:31.413
> 
> 标签：c++, segmentation-fault, boost-mutex

我是来问问你的意见的。我是一个大项目的新手，所以我将尝试描述我所看到的简单示例。

顶部回溯是

```
#0  0xb6adfc6d in pthread_mutex_lock () from /usr/lib/libpthread.so.0
#1  0x080d8565 in boost::mutex::lock() ()
#2  0x080d8613 in boost::unique_lock<boost::mutex>::lock() ()
#3  0x080d8642 in boost::unique_lock<boost::mutex>::unique_lock(boost::mutex&)
#4  0x...      in ???    //just ??? in stack
#5  0x...      in ???
#6  0x...      in ??? 
```

似乎互斥锁不存在，但它是在类构造函数中创建的。例子：

```
class A
{
  boost::mutex::scoped_lock mutex_;
public:
  A(): mutex_() {}

  void Read (...)
  {
    //some checks
    boost::mutex::scoped_lock lock(mutex_); // <-- Segfault
    //read
  }

  void Write (...)
  {
    //some checks
    boost::mutex::scoped_lock lock(mutex_);
    //write
  }
}; 
```

这对我来说似乎很奇怪，因为我不知道段错误的原因或找到根本原因的可能方法。我很高兴听到您对此的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:05:12.357

It' looks like you're scope locking a scope lock - it's probably a typo

Random example usage: [http://www.boost.org/doc/libs/1_53_0/libs/thread/example/mutex.cpp](http://www.boost.org/doc/libs/1_53_0/libs/thread/example/mutex.cpp)

The usual pattern is to scope the mutex, using the scoped_lock class

```
boost::recursive_mutex mutex;
void somefunc() {
    boost::unique_lock<boost::recursive_mutex> scoped_lock(mutex);
} 
```

# css - 更改活动导航栏的颜色

> ID：15866136
> 
> 赞同：3
> 
> 时间：2013-04-07T18:29:05.733
> 
> 标签：css, twitter-bootstrap

我正在使用一个简单的引导顶部固定导航栏，我想更改活动页面的颜色......但是我认为我的代码中缺少一些东西

```
<div class="navbar">
    <div class="navbar-fixed-top">
      <div class="container" style="width: auto;">
          <div class="nav-collapse" id="nav-collapse">
          <ul class="nav" id="nav">
            <li class="active"><a href="#skdill" >skisll</a></li>
            <li class="active"><a href="#skill">skill</a></li>
            <li class="active"><a href="#research">research</a></li>
            <li class="active"><a href="#">Link</a></li>
                     </ul>
        </div>
      </div>
    </div>
  </div> 
```

和CSS是

```
.navbar {
    position: fixed;
    width: 100%;
}
.navbar .nav {
   float: none;
}
.navbar .nav>li {
    width: 25%;
}
.content {
    padding-top: 80px;
}

#nav-collapse li a:hover { 
    color: blue; 
}
#nav-collapse a:hover { 

    background-color: gray; 
}

#nav-collapse  li.active { 
   color:green;
    background-color: yellow; 
}
#nav-collapse  li.active a {
    color: red;
} 
```

...例如，我希望（活动导航项的）文本为红色，背景颜色为灰色（无论如何）...您有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T19:09:29.277

如果要保持活动项的状态，则需要在每个 html 文件中包含导航栏布局。例如，如果您单击`Research`然后在`research.html`您的导航栏中必须是

```
<div class="navbar">
<div class="navbar-fixed-top">
  <div class="container" style="width: auto;">
      <div class="nav-collapse" id="nav-collapse">
      <ul class="nav" id="nav">
        <li ><a href="#skdill" >skisll</a></li>
        <li ><a href="#skill">skill</a></li>
        <li class="active"><a href="#research">research</a></li>
        <li ><a href="#">Link</a></li>
                 </ul>
    </div>
  </div>
</div> 
```

等等你的所有链接。

**编辑** 您可以使用 JavaScript 并做到这一点：

```
<!DOCTYPE html>
<html>
   <head>
     <script src="js/jquery.min.js"></script>
     <script src="js/bootstrap.min.js"></script>
     <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
     <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
     </style>
  </head>

  <script>
     $(function() {
        $('#nav li a').click(function() {
           $('#nav li').removeClass();
           $($(this).attr('href')).addClass('active');
        });
     });
  </script>

  <body>
     <div class="navbar">
        <div class="navbar-fixed-top">
           <div class="container" style="width: auto;">
              <div class="nav-collapse" id="nav-collapse">
                 <ul class="nav" id="nav">
                     <li id="home"><a href="#home">Home</a></li>
                     <li id="skill"><a href="#skill">Skill</a></li>
                     <li id="research"><a href="#research">Research</a></li>
                     <li id="link"><a href="#link">Link</a></li>
                 </ul>
              </div>
           </div>
        </div>
     </div>
  </body>
</html> 
```

演示：http: [//jsfiddle.net/Ag47D/3/](http://jsfiddle.net/Ag47D/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:47:03.450

```
.navbar #nav > .active > a {
    color: red;
} 
```

这是**[演示](http://jsfiddle.net/Ag47D/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-20T15:07:43.780

我的答案与其他答案有点不同，对我来说效果很好：

假设导航栏中的链接（在本地服务器上，[https://myweburl.com](https://myweburl.com)将被替换为[https://localhost:8000](https://localhost:8000)或[https://127.0.0.1:8000](https://127.0.0.1:8000)）如下：

主页 => [https://myweburl.com](https://myweburl.com)

博客 => [https://myweburl.com/blog/1](https://myweburl.com/blog/1)、[https://myweburl.com/blog/2](https://myweburl.com/blog/2)等。

技能 => [https://myweburl.com/skills/](https://myweburl.com/skills/)

联系方式 => [https://myweburl.com/contact/](https://myweburl.com/contact/)

因此，您可以使用此代码段使导航栏中的相应链接处于活动状态：

```
$(document).ready(function () {
    var loc = window.location.href; // grabbing the url
    var str = loc.split("/")[3]; // splitting the url and taking the third string
    if(str.localeCompare("") == 0)
      $("#home").addClass("active");
    else
      $("#" + str).addClass("active");
}); 
```

此外，在您的 HTML 中，删除“活动”类并将各自的 ID 放入所有链接中。通过各自的ID，我的意思是ID应该根据URL命名。

上面的 JS 代码在做什么：抓取 URL 并将其拆分为字符串数组。然后它取变量 str 中的第四个字符串（第四个字符串将在第三个索引处）。然后，它将“活动”类放在该链接中。

这种方法的好处：除了它非常简单之外，如果用户直接转到链接而不是单击导航栏中的链接，那么这种方法也有效。

此方法的问题：必须知道导航栏中每个链接的 URL。如果 URL 的格式不同，那么对代码稍作改动就可以为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-21T10:26:03.570

这个 js 对我有用，我把它放在导航是 php 的每个页面上，包括：

```
 <script>
 $(function() { 

        var path = window.location.pathname;
        path = path.replace(/\/$/, "");
        path = decodeURIComponent(path);

        $(".nav li a").each(function () {
            var href = $(this).attr('href');
            if(path.substring((path.lastIndexOf('/')+1),path.lenght) === href) {    
                $(this).closest('li').addClass('active');
            } else {
                $(this).closest('li').removeClass();
            }
        });         
 }); 
```

# .net - 在表达式中使用对象属性？

> ID：15866137
> 
> 赞同：0
> 
> 时间：2013-04-07T18:29:14.977
> 
> 标签：.net, data-binding

我有 PHP 背景，我正在尝试学习 .NET。我想知道绑定数据。

如果我有以下课程：

```
public class Test
{
    public string name;
    public string testnaam;

}

Test nat = new Test();
nat.name = "blaat";
nat.testnaam = "blaat2"; 
```

为什么我不能这样做（或类似的事情）：

```
<asp:Button ID="Button1" runat="server" Text="<% nat.name %>" /> 
```

难道我做错了什么？还是完全不可能使用这样的对象属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:30:59.193

问题：

```
<asp:Button ID="Button1" runat="server" Text="<% nat.name %>" /> 
```

那`asp:Button`是一个*服务器端*控件并`<%%>`扩展为`<script runat="server"></script>`. 这将是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:43:21.297

您需要使用客户端按钮，即

```
<input type="button" value="<%= buttonText %>" /> 
```

然后在您的服务器端代码中声明一个公共变量

```
public string buttonText = "This is my button text"; 
```

这同样适用于对象，只要它是公共的并且正确实例化。确保变量被定义为公共的，然后在你的 page_load 中实例化它：

```
person = new Person { FirstName = "Joe", Surname = "Bloggs" }; 
```

在您的标记中：

```
<input type="button" value="<%= person.FirstName %>" /> 
```

# vb.net - 如何使用 Visual Basic 在网页上查找一些文本并将其显示在文本框中（或直接写出来）？

> ID：15866138
> 
> 赞同：0
> 
> 时间：2013-04-07T18:29:18.910
> 
> 标签：vb.net, browser, webpage

假设我有一个 www.exmple.com 网站，上面有一些文字；

```
Example 1
Example 5713
Example 151
Example ... 
```

等等...

我想创建一个程序，用户可以在其中输入他在 www.example.com 上寻找的内容......就像他输入“示例 151”一样，它将显示在一个新的文本框或可以实际存储文本的东西中。

这可能吗？

我希望有人能帮帮忙，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:32:47.313

> 这可能吗？

是的，当然了。您需要使用 HTML 解析器 - 一个可以读取 HTML 并且您可以查询它的库。

两个流行的选项是[HTML Agilty Pack](http://htmlagilitypack.codeplex.com/)（使用 XPath 进行查询）和[CsQuery](https://github.com/jamietre/CsQuery)（使用类似 jQuery 的查询语法）。

# php - Laravel3：动态加载内容内的内容

> ID：15866140
> 
> 赞同：0
> 
> 时间：2013-04-07T18:29:24.743
> 
> 标签：php, laravel, templating, laravel-3, blade

我有一个表格。当用户提交表单并收到错误时，我会这样显示：

注册控制器

```
return View::make('theme-admin.user_add')->with('error_msg', validation->errors->first()); 
```

register.blade.php

```
@if($error_msg !== null)
  <div class="alert red hideit max">
     <div class="left">
            <span class="red-icon"></span>
            <span class="alert-text">{{ $error_msg }}</span> <-- Error message is visible here.
     </div>
     <div class="right">
          <a class="close-red"></a>
     </div>
 </div>
@endif

//
    Actual HTML Form
// 
```

但是，我想将该错误 div 移动到刀片文件中。（error.blade.php），我想在出现错误时用参数调用它。

它看起来像这样。

新的 register.blade.php

```
{{ MESSAGE_CONTENT }} //This should be replaced with error.blade.php dynamically
//
    Actual HTML Form
// 
```

MESSAGE_CONTENT 将通过 error.blade.php 包含在内

错误刀片.php

```
<div class="alert red hideit max">
     <div class="left">
            <span class="red-icon"></span>
            <span class="alert-text">{{ $message }}</span> <-- Error message is visible here.
     </div>
     <div class="right">
          <a class="close-red"></a>
     </div>
 </div> 
```

假设表单失败并且我遇到了一些错误。我将加载 error.blade.php，因此消息将获得 RED 背景等。

像这样的东西；

```
return View::make('theme-admin.user_add')->with(message_content', (Load error.blade.php here))->with('message', $validation->errors->first(); 
```

如果表单成功，我将在消息区域加载success.blade.php，消息将以绿色背景显示。

```
 return View::make('theme-admin.user_add')->with(message_content', (Load success.blade.php here))->with('message', 'You successfully registered'); 
```

你大概明白这个逻辑了。

我怎样才能做到这一点？

附言。图片示例：http: [//i.imgur.com/QExAiuA.png](http://i.imgur.com/QExAiuA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:12:56.383

一个干净的解决方案可能是拥有一个带有类型和 msg 的简单警报对象。

```
//in controller
$alert->type = 'error'; // or 'success'
$alert->class = 'red'; // or 'green'
$alert->msg = $validation->errors->first(); // or 'You successfully registered'
 return View::make('theme-admin.user_add')->with('alert', $alert);

//register.blade.php
@include('alert')

//Actual HTML Form

//alert.blade.php
@if(isset($alert))
  <div class="alert {{$alert->class}} hideit max">
     <div class="left">
            <span class="red-icon"></span>
            <span class="alert-text">{{ $alert->msg }}</span>
     </div>
     <div class="right">
          <a class="close-{{$alert->class}}"></a>
     </div>
 </div>
@endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:50:36.437

您应该`View::make()`在为 GET 定义的路由中创建视图 ()，然后在 POST 路由中处理表单输入：

```
//routes.php
Route::get('admin/adduser', array('as' => 'adduser', 'do' => function()
{
    return View::make('theme-admin.user_add');
}));

//route for handling form input
Route::post('register', array('before' => 'csrf', function()
 {
     $rules = array(
         //your vailidation rules here..
     );

     $validation = Validator::make(Input::all(), $rules);

     if ($validation->fails())
     {
         //re-populate form if invalid values, so add flashing input by with_input()
         //also pass errors by using with_errors
         return Redirect::to('adduser')->with_input()->with_errors($validation);
     }
     else {
         //use the named route we defined in Route:get above
         return Redirect:to('adduser')->with('message', 'Successfully added the new user!');
     }
 })); 
```

无需创建新视图来显示错误和成功消息。如果您想将成功和错误分开到他们自己的刀片模板中，那么您可以在 adduser.blade.php 中使用以下内容：

```
//adduser.blade.php
@if($errors->has())
    @include('errormsg'); //use {{ $errors->first() }} or @foreach($errors->all() as $message) to print error message(s)
@else
    @include('success'); //use {{ $message }} to print success
@endif 
```

但是，您也可以在视图中使用部分，而是将成功和错误消息放在同一个视图中：

```
//feedback.blade.php
@section('error')
    <em class="error">{{ $errors->first() }}</em>
@endsection

@section('success')
    <em class="success">{{ $message }}</em>
@endsection

//adduser.blade.php
@include('feedback');

@if($errors->has())
    @yield('error');
@else
    @yield('success');
@endif 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:38:31.690

我自己找到了解决方案。我需要嵌套视图功能。

```
$view = View::make('home');
$view->nest('content', 'orders', array('orders' => $orders)); 
```

有关更多信息，请参阅 Laravel 文档。

# java - Java 的 main() 方法及其包含的类应该做什么？

> ID：15866141
> 
> 赞同：1
> 
> 时间：2013-04-07T18:29:34.787
> 
> 标签：java, main

我对编程很陌生，但在 CI 中会有一个 main 函数，它调用运行程序所需的所有其他方法。但是，在 Java 中，我正在研究[这个](https://stackoverflow.com/questions/732151/java-main-method-good-coding-style)- 这表明将 main() 方法放在它自己的一个类中，该类的职责只是初始化程序。我是否应该有另一个只调用方法（即运行程序？）的类（例如，“系统”类）。如果是这样，是否有命名主类的约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:41:33.000

> main 方法类似于 C 和 C++ 中的 main 函数；它是您的应用程序的入口点，随后将调用您的程序所需的所有其他方法。

方法签名

```
public static void main(String[] args) 
```

任何类都可以包含一个`main`方法，但只有一个

调用类`main`方法

```
java MyApp arg1 arg2 
```

其中 MyApp 是一个包含`main`方法的类。

# php - 将外部网页加载到我的页面而不重定向到不同的 URL

> ID：15866148
> 
> 赞同：12
> 
> 时间：2013-04-07T18:30:37.500
> 
> 标签：php, html, redirect, iframe, external

所以我想做的是在我的网站上创建一个子域，然后让它加载一个外部网站，而不是真正去那个网站。例如：

google.mydomain.com 加载 google.com，但 URL 栏显示为 google.mydomain.com。

**我该怎么做呢？**

我试过[这个](http://php.net/manual/en/function.include.php)，但无法弄清楚。

**试：**

框架

1.  我希望页面占据每个人计算机的整个屏幕。我可以将其设置为 100% 而不是 x 像素数量吗？

2.  我想删除滚动条，但它说不支持。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T18:45:46.717

您可以使用 iframe 或 file_get_contents();

框架：

```
<iframe src="http://google.com" style="width: 100%; height: 100%;"> 
```

文件获取内容（）：

```
<?php
echo file_get_contents('http://google.com');
?> 
```

使用 file_get_contents()，您需要注意使用相对 URL 获取的网站，这会破坏 CSS、图像、Javascript 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T18:36:34.250

您将无法使用 php 的 include 函数，因为这不是驻留在您服务器上的资源。

您可以探索的一个选项是将所有内容作为 iframe 的内容加载：有关 iframe html 元素的一些详细信息，请参见[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-17T19:37:05.750

*   html5 现在不支持 iframe
*   它也适用于html5
*   易于添加或删除

例子：

```
 <body onload="window.location.href='https://www.google.com/'"> </body> 
```

# asp.net-mvc - 在 javascript 中解析模型时出现语法错误

> ID：15866151
> 
> 赞同：1
> 
> 时间：2013-04-07T18:30:56.877
> 
> 标签：asp.net-mvc

大家好，我在我的 javascript 中使用以下语法

```
 var careteam = "@Html.Raw(Json.Encode(Model.CareTeamForFile))"; 
```

我收到以下错误

```
SyntaxError: missing ; before statement
[Break On This Error]   

var careteam = "[{"GroupId":3,"GroupName":"Physician","Users":[{"UserId":3438," 
```

那里有一个箭头指示位置。

我在其他地方使用过这种语法，它工作得非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:36:21.673

在 JS 中，你得到下一行：

```
var careteam = "[{"GroupId":3,"GroupName":"Physician","Users":[{"UserId":3438," 
```

如果我们阅读这一行，它会为您提供变量声明`var careteam = "[{"`，在您拥有`GroupId":3,"GroupName":"Physician","Users":[{"UserId":3438,"`这对 JS 没有意义之后。

将剃刀语法更改为：

```
var careteam = '@Html.Raw(Json.Encode(Model.CareTeamForFile))'; 
```

所以在`careteam`你会有一个字符串

```
var careteam = '[{"GroupId":3,"GroupName":"Physician","Users":[{"UserId":3438," ... ' 
```

但我敢打赌这不是你想要的，你想在 中有一个数组`careteam`，所以我猜这是正确的解决方案：

```
var careteam = @Html.Raw(Json.Encode(Model.CareTeamForFile)); 
```

你会得到 JS：

```
var careteam = [{"GroupId":3,"GroupName":"Physician","Users":[{"UserId":3438," ... 
```

# node.js - mapReduce 中的 Mongoose 限制和总数

> ID：15866156
> 
> 赞同：0
> 
> 时间：2013-04-07T18:31:24.417
> 
> 标签：node.js, mongodb, mongoose

我需要运行一个查询，它返回文档的总数以及文档，并且可以限制和偏移。它类似于[this](https://stackoverflow.com/questions/13935733/mongoose-limit-offset-and-count-query)和[this](https://stackoverflow.com/questions/15717367/mongoose-skip-limit-and-count) question。不同之处在于我运行 map/reduce 并且总计数已经在`stats`参数中可用，所以希望我不必调用两次查询。

```
list: function (options, cb) {
    ...
    this.mapReduce(o, function (err, model, stats) {
        console.log('# of documents: %d ', stats.counts.output);
        model.find()
            .limit(criteria.perPage)
            .skip(criteria.perPage * criteria.page)
            .exec(cb);
    });
}); 
```

我`list`像这样从控制器调用函数：

```
Track.list(options, function (err, docs) {
    res.json(docs);
}); 
```

是否有可能`stats.counts.output`与返回的文件一起传递给控制器​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T08:09:36.410

您可以将参数包装`cb`在函数内`exec`：

```
model.find()
    .limit(criteria.perPage)
    .skip(criteria.perPage * criteria.page)
    .exec(function (err, docs) {
      cb(err, docs, stats.counts.output)
    });

Track.list(options, function (err, docs, count) {
    res.json({docs: docs, count: count})
}) 
```

# javascript - 从 xml 文件中的元素获取属性，该属性在 javascript 中由随机调用

> ID：15866162
> 
> 赞同：0
> 
> 时间：2013-04-07T18:32:13.840
> 
> 标签：javascript, xml, ajax, domparser

我想获取 xml 元素的 id，但我不知道如何访问它。我随机调用元素，所以我不知道如何获取当前元素信息

要了解我在做什么，请查看我的代码：

我有一个包含 2 个信息（一个 youtube 链接和一个相关 ID）的 xml 文件，如下所示：

```
<videos>
   <video id="0">o6f9wJ1DWhY</video>
   <video id="2">sp_WV91jx8E</video>
   <video id="3">plWnm7UpsXk</video>
   <video id="4">a1Y73sPHKxw</video>
   <video id="5">9avT0e5KPPU</video>
   <video id="6">VTO5yiN1b-I</video>
   <video id="7">HnENgvGFc4</video>
   <video id="8">d8u4CEBVq7s</video>
   <video id="9">abRplCazEjk</video>
</videos> 
```

在下一步中，我将外部 xml 文件的信息保存在变量中

```
var jqxhr = $.ajax({
type: 'POST',       
url: "freeakshow.xml",
dataType: 'xml',
global: false,
async:false,
success: function(data) {
    return data;
}
}).responseText;

xml_string = jqxhr; 
```

然后我使用 DOMParser 将链接保存在数组中，以便稍后访问它们

```
function get_ids_from_xml_string(xml_string) {
// Parse the XML string into a XMLDocument
var doc = window.DOMParser
            ? new DOMParser().parseFromString(xml_string, 'text/xml')    // Standard
            : new ActiveXObject('Microsoft.XMLDOM').loadXML(xml_string); // IE

// Find the answer nodes
var id_nodes = doc.getElementsByTagName('video');
var videos = [];

// Loop through them and save their text content into an array
for (var i = 0; i < id_nodes.length; i++) {
     videos.push(id_nodes[i].firstChild.data)
}

return videos;
}

var videos = get_ids_from_xml_string(xml_string); 
```

之后我从数组中得到一个随机链接，所以我可以用它来用 Youtube API 播放它，但这现在没关系

```
function getId() {
  return videos[Math.floor(Math.random() * videos.length)]; 
```

这是一个问题：我如何获得从 getId() 获得的当前随机链接的 id

我想在 div 中显示它，这样我就可以看到哪个 id 是当前的，哪个 id 是最后一个

（要了解这是什么意思，我想显示随机播放视频的当前和最后一个 id）}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:42:17.147

You can update your getId function to store the id that it randomly produced. Example:

```
var currentId, lastId;

function getId() {
  //save the prev id in the lastId variable
  lastId = currentId;
  //get a new id and store it
  currentId = Math.floor(Math.random() * videos.length);
  //return the corresponding video
  return videos[currentId];
} 
```

Now you can use the currentId and the lastId, to match your needs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:37:50.510

“显示”数据以进行调试的常见解决方案是使用 Chrome 中的开发人员工具中的控制台（或类似的控制台或 Firefox 或 IE）。你可以这样写一行

```
Console.log(getId()); 
```

然后它将在控制台中打印出来供您查看。chrome 中的 Web 开发人员工具是工具 > 开发人员工具。这是一篇很好的文章，它广泛涵盖了 Chrome [https://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)中的控制台。

如果您一心想在 div 中显示信息，则可以使用这样的 div 集。

```
<div id="getIdOutput"></div> 
```

然后像这样的javascript

```
document.getElementById("getIdOutput").innerHTNL = getId() 
```

显示 getId() 的输出！

# ruby-on-rails - 如何在 rabl 模板的子项中添加父属性？

> ID：15866166
> 
> 赞同：0
> 
> 时间：2013-04-07T18:32:35.670
> 
> 标签：ruby-on-rails, json, rabl

如何在 rabl 模板的子项中添加父属性？做这样的事情：

```
parent: {
  attr_1: 'asd',
  attr_2: 'dfg',
  child: {
    attr_3: 6,
    attr_from_parent: 'cvb'
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:18:58.447

```
object @parent
attributes :attr_1, :attr_2

child :child do
  attributes :attr_3, :name
  node(:attr_from_parent) { @parent.attr_from_parent }
end 
```

你也可以看看[http://railscasts.com/episodes/322-rabl?view=asciicast](http://railscasts.com/episodes/322-rabl?view=asciicast)

# ios - UIPickerView 在表单视图控制器（iPad）内的弹出窗口中

> ID：15866169
> 
> 赞同：1
> 
> 时间：2013-04-07T18:32:41.167
> 
> 标签：ios, objective-c, uipickerview, uipopovercontroller

我的`textfield`表格中有一张。键入时`textfield`，我希望弹出框出现在`pickerView`里面。我以前用过`popOverController`，但在这种情况下，我不知道如何放置 a`pickerView`并将其设置为表单视图控制器的委托和数据源，因为实际上弹出框需要一个独立的视图控制器。

我尝试了以下（该应用程序是通用的），弹出窗口没有出现：

```
- (IBAction)gradeTextfieldPressed:(UITextField *)sender
{

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

        [self.nameTextField resignFirstResponder];
        UIViewController *pickerController = [[UIViewController alloc] init];
        UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(self.gradeTextField.center.x, self.gradeTextField.center.y, 320, 320)];
        pickerView.delegate = self;
        pickerView.dataSource = self;
        [pickerController.view addSubview:pickerView];
        UIPopoverController *pickerPopover = [[UIPopoverController alloc] initWithContentViewController:pickerController];
        [pickerPopover presentPopoverFromRect:CGRectMake(self.gradeTextField.center.x, self.gradeTextField.center.y, 320, 320) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
        [self.gradeTextField setInputView:pickerView];
        if ([self.gradeTextField.text isEqualToString:@""]) {
            [self pickerView:pickerView didSelectRow:0 inComponent:0];
        }

    } else if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        [self.picker setHidden:NO];
        //[self pickerView:self.picker didSelectRow:0 inComponent:0];
        if ([self.gradeTextField.text isEqualToString:@""]) {
            [self pickerView:self.picker didSelectRow:0 inComponent:0];
        }
        [self.gradeTextField setInputView:self.picker];
        [self.nameTextField resignFirstResponder];
        [self.creditstextField resignFirstResponder];
        [self.chaptersTextField resignFirstResponder];
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:57:45.173

我发现的一种方法很简单 创建一个只包含 PickerView 的新控制器（在本例中使用 .xib 完成），并有一个简单的委托协议让您的表单控制器知道何时选择了某些内容。

```
@protocol MyPickerDelegate <NSObject>
- (void)valuePicked:(NSString*)value
@end

@interface MyPickerController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>
{
    __weak IBOutlet UIPickerView *_pickerView;
}
@property (nonatomic, weak) id<MyPickerDelegate> delegate; 
```

然后，您可以在此控制器中实现数据源和委托方法。以下是物品被挑选时的代码：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    [_delegate valuePicked:[_myStrings objectAtIndex:row]];
} 
```

最后，在调用类（您的表单控制器）中：

```
- (void)displayPickerFromRect:(CGRect)rect inView:(UIView*)view
{
    if (!_pickerController)
        _pickerController = [[MyPickerController alloc] initWithNibName:nil bundle:nil];

    if (_pickerController)
    {
        _speedPickerController.delegate = self;

        if (!_pickerPopover)
        {
            _pickerPopover = [[UIPopoverController alloc] initWithContentViewController:_pickerController];
            _pickerPopover.popoverContentSize = _pickerController.view.frame.size;
            _pickerPopover.delegate = self;
        }

        [_pickerPopover presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    if (_pickerController)
    {
        _pickerController = nil;
        _pickerPopover = nil;
    }
}

- (void)valuePicked:(NSString*)value
{
   // do something with the picked value
   // dismiss the popover if you want it to go away as soon as a value is picked
} 
```

# php - 文件上传下载php

> ID：15866171
> 
> 赞同：1
> 
> 时间：2013-04-07T18:32:45.187
> 
> 标签：php, mysql

我正在编写一个将文件上传到 MySQL 数据库的脚本。我收到一条错误消息： `Notice: Undefined variable: code in C:\wamp\www\application\letters.php on line 82` 这是 ** 中的字代码。任何可以发现错误的人请告诉我。

```
if ($name)
    if ($title && $description)
        {       
            $date = date("d m Y");
            $charset ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            //length of value to generate
            $length = 15;

            //create variable and run through and randomly select fromcharset.
            for ($i = 0; $i <= $length; $i++)
            {   
                //position to start at. rand function.
                $rand = rand() % strlen($charset);
                $tmp = substr($charset, $rand, 1);

                //append onto code
                **$code .= $tmp;**
            }
            //checking for existence of code which is generated. 
            $query= mysql_query("SELECT code FROM letter_details WHERE code = '$code'");

            //if code is found
            $numrows = mysql_num_rows($query);

            // if that code exists, generate code again
            while ($numrows != 0)
            {
                for ($i=0; $i <= $length; $i++)
                {
                    //position to start at. rand function.
                    $rand = rand() % strlen($charset);
                    $tmp = substr($charset, $rand, 1);

                    //append onto code
                    $code .=$tmp;
                }

                //checking for existence of code which is generated.
                $query= mysql_query("SELECT code FROM letter_details WHERE code = '$code'");

                //if code is found
                $numrows = mysql_num_rows($query);
            }

            //create directory
            mkdir("files/$code");

            //put file into it
            move_uploaded_file($tmpname, "files/$code/"."$name".$ext);
            $query = mysql_query("INSERT INTO letter_details VALUES ('$letter_id', $title','$code','$description','$student_info_id', '$staff_info_id', '$date')");
            echo "Your file '$title' was Succesfully uploaded.<br><br><a href='download.php?file=$code'>Download</a>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:36:45.530

`$code='';`在循环外添加一个`for`。在这种情况下，变量将在使用之前声明，即连接操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:37:37.537

您必须`$code`在添加更多内容之前定义`$code .= ''` （放在`$code = '';`循环之前）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:38:07.520

如果要在`for`循环外读取变量，则必须先定义它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:39:13.203

这是警告您未定义变量的通知。

程序的执行不受通知影响。要解决此问题，您可以在脚本开头的某处初始化 $code 变量，例如`$code = '';`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T18:56:13.707

这是您必须在脚本中用于上传文件的代码片段：

```
<?php
$uploads_dir = '/uploads';
foreach ($_FILES["pictures"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES["pictures"]["tmp_name"][$key];
        $name = $_FILES["pictures"]["name"][$key];
        move_uploaded_file($tmp_name, "$uploads_dir/$name");
    }
}
?> 
```

检查并查看它是否适合您。

# spring-data-mongodb - Spring Data MongoDB - Criteria API OrOperator 无法正常工作

> ID：15866175
> 
> 赞同：21
> 
> 时间：2013-04-07T18:32:59.563
> 
> 标签：spring-data-mongodb

我正面临 Spring Data MongoDB Criteria API`orOperator`问题。

以下是不规则动词的查询结果：（**终端输出**）

```
> db.verb.find({'v2':'wrote'});
{ "_id" : ObjectId("5161a8adba8c6390849da453"), "v1" : "write", "v2" : "wrote", "v3" : "written" } 
```

我使用**Spring Data MongoDB Criteria API**`v1`按动词或`v2`值查询动词：

 **```
Criteria criteriaV1 = Criteria.where("v1").is(verb);
Criteria criteriaV2 = Criteria.where("v2").is(verb);
Query query = new Query(criteriaV1.orOperator(criteriaV2));
List<Verb> verbList = mongoTemplate.find(query, Verb.class) 
```

但不幸`verbList`的是没有任何项目。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-07T21:17:38.263

据我记得，为了使用 orOperator 你应该这样做：

```
查询 query = new Query(new Criteria().orOperator(criteriaV1,criteriaV2));
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-02T18:17:52.590

我们需要用 OR 条件明确指定一个新标准 - 试试下面的例子

```
Criteria criteria = Criteria.where("field1").is(val1).
                .andOperator(new Criteria().orOperator(Criteria.where("field2").is(filterVal),
                        Criteria.where("field3").is(filterVal))); 
```**

# arrays - 在 cocos2d 中向屏幕添加精灵数组的问题？

> ID：15866178
> 
> 赞同：0
> 
> 时间：2013-04-07T18:33:05.157
> 
> 标签：arrays, cocos2d-iphone, sprite, ccspritebatchnode

对于我在 cocos2d 中的游戏，我试图在屏幕上添加一组不断向左移动的精灵。当我将该方法添加到我的更新方法时，它没有按预期工作。我首先设置了一个批处理节点。

```
- (void)setupBatchNode
{
    _batchNode = [CCSpriteBatchNode batchNodeWithFile:@"berries-hd.pvr.ccz"]; 
    [self addChild:_batchNode z:-1];
    [[CCSpriteFrameCache sharedSpriteFrameCache]
     addSpriteFramesWithFile:@"berries-hd.plist"];
}

-(void)updatePinkBerries:(ccTime)dt
{
    CGSize winSize = [CCDirector sharedDirector].winSize; // Is it time to spawn a pink berry?

    double curTime = CACurrentMediaTime();

    if (curTime > _nextPinkBerrySpawn)
    {
        // Figure out the next time to spawn an asteroid
        float randSecs = randomValueBetween(0.20, 1.0); _nextPinkBerrySpawn = randSecs + curTime;

        // Figure out a random Y value to spawn at
        float randY = randomValueBetween(0.0, winSize.height);

        // Figure out a random amount of time to move from right to left
        float randDuration = randomValueBetween(2.0, 10.0);

        // Create a new berry sprite
        CCSprite *pinkBerry = [CCSprite spriteWithSpriteFrameName:@"testt.png"]; 
        [_batchNode addChild:pinkBerry];

        // Set its position to be offscreen to the right
        pinkBerry.position = ccp(winSize.width + pinkBerry.contentSize.width/2, randY);

        // Move it offscreen to the left, and when it's done, call removeNode
        [pinkBerry runAction:
         [CCSequence actions:
          [CCMoveBy actionWithDuration:randDuration position:ccp(-winSize.width- pinkBerry.contentSize.width, 0)],
          [CCCallFuncN actionWithTarget:self selector:@selector(removeNode:)], nil]];
    }
} 
```

# ios - 从圆形或甜甜圈中绘制线段

> ID：15866179
> 
> 赞同：74
> 
> 时间：2013-04-07T18:33:10.767
> 
> 标签：ios, core-animation, core-graphics

我一直在尝试找出一种绘制线段的方法，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/oadFr.png)

我想：

1.  绘制线段
2.  包括渐变
3.  包括阴影
4.  动画从 0 到 n 角度的绘图

我一直在尝试通过`CGContextAddArc`类似的电话来做到这一点，但没有走得太远。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-04-07T22:14:07.920

你的问题有很多部分。

# 获取路径

为这样的部分创建路径应该不会太难。有两条弧线和两条直线。我之前已经[解释过如何分解这样的路径，](http://ronnqvi.st/thinking-like-a-bzier-path/)所以我不会在这里做。相反，我会幻想并通过抚摸另一条路径来创建路径。您当然可以阅读故障并自己构建路径。我所说的抚摸弧线是灰色虚线最终结果内的橙色弧线。

![要描边的路径](https://i.stack.imgur.com/eRgOt.png)

要描边我们首先需要它的路径。这基本上就像*移动到*起点并*围绕中心*从当前角度到您希望线段覆盖的角度一样简单。

```
CGMutablePathRef arc = CGPathCreateMutable();
CGPathMoveToPoint(arc, NULL,
                  startPoint.x, startPoint.y);
CGPathAddArc(arc, NULL,
             centerPoint.x, centerPoint.y,
             radius,
             startAngle,
             endAngle,
             YES); 
```

然后，当您拥有该路径（单弧）时，您可以通过以一定宽度抚摸它来创建新段。生成的路径将有两条直线和两条弧线。中风从中心向内和向外的距离相等。

```
CGFloat lineWidth = 10.0;
CGPathRef strokedArc =
    CGPathCreateCopyByStrokingPath(arc, NULL,
                                   lineWidth,
                                   kCGLineCapButt,
                                   kCGLineJoinMiter, // the default
                                   10); // 10 is default miter limit 
```

# 绘画

接下来是绘图，通常有两个主要选择：Core Graphics`drawRect:`或带有 Core Animation 的形状层。Core Graphics 将为您提供更强大的绘图，但 Core Animation 将为您提供更好的动画性能。由于涉及路径，纯 Cora 动画将无法工作。你最终会得到奇怪的文物。然而，我们可以通过绘制层的图形上下文来使用层和核心图形的组合。

## 填充和抚摸该段

我们已经有了基本的形状，但是在我们添加渐变和阴影之前，我会做一个基本的填充和描边（你的图像中有一个黑色的描边）。

```
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextAddPath(c, strokedArc);
CGContextSetFillColorWithColor(c, [UIColor lightGrayColor].CGColor);
CGContextSetStrokeColorWithColor(c, [UIColor blackColor].CGColor);
CGContextDrawPath(c, kCGPathFillStroke); 
```

这将在屏幕上显示这样的内容

![填充和描边形状](https://i.stack.imgur.com/YzOrM.png)

## 添加阴影

我要改变顺序并在渐变之前做阴影。要绘制阴影，我们需要为上下文配置阴影并绘制填充形状以使用阴影绘制它。然后我们需要恢复上下文（到阴影之前）并再次描边形状。

```
CGColorRef shadowColor = [UIColor colorWithWhite:0.0 alpha:0.75].CGColor;
CGContextSaveGState(c);
CGContextSetShadowWithColor(c,
                            CGSizeMake(0, 2), // Offset
                            3.0,              // Radius
                            shadowColor);
CGContextFillPath(c);
CGContextRestoreGState(c);

// Note that filling the path "consumes it" so we add it again
CGContextAddPath(c, strokedArc);
CGContextStrokePath(c); 
```

此时结果是这样的

![在此处输入图像描述](https://i.stack.imgur.com/Te7Cf.png)

# 绘制渐变

对于渐变，我们需要一个渐变层。我在这里做了一个非常简单的两种颜色渐变，但您可以根据需要自定义它。要创建渐变，我们需要获取颜色和合适的颜色空间。然后我们可以在填充顶部（但在描边之前）绘制渐变。我们还需要将渐变蒙版到与之前相同的路径。为此，我们剪切路径。

```
CGFloat colors [] = {
    0.75, 1.0, // light gray   (fully opaque)
    0.90, 1.0  // lighter gray (fully opaque)
};

CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceGray(); // gray colors want gray color space
CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);
CGColorSpaceRelease(baseSpace), baseSpace = NULL;

CGContextSaveGState(c);
CGContextAddPath(c, strokedArc);
CGContextClip(c);

CGRect boundingBox = CGPathGetBoundingBox(strokedArc);
CGPoint gradientStart = CGPointMake(0, CGRectGetMinY(boundingBox));
CGPoint gradientEnd   = CGPointMake(0, CGRectGetMaxY(boundingBox));

CGContextDrawLinearGradient(c, gradient, gradientStart, gradientEnd, 0);
CGGradientRelease(gradient), gradient = NULL;
CGContextRestoreGState(c); 
```

这完成了绘图，因为我们目前有这个结果

![蒙面渐变](https://i.stack.imgur.com/nvjB9.png)

# 动画

说到形状的动画，[之前都写过：Animating Pie Slices Using a Custom CALayer](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)。如果您尝试通过简单地为路径属性设置动画来进行绘图，您将在动画期间看到路径的一些非常时髦的扭曲。出于说明目的，下图中的阴影和渐变保持不变。

![时髦的路径扭曲](https://i.stack.imgur.com/SalnN.png)

我建议您采用我在此答案中发布的绘图代码并将其应用于该文章中的动画代码。然后你应该得到你所要求的。

* * *

# 供参考：使用Core Animation的同一张图

## 朴素的形状

```
CAShapeLayer *segment = [CAShapeLayer layer];
segment.fillColor = [UIColor lightGrayColor].CGColor;
segment.strokeColor = [UIColor blackColor].CGColor;
segment.lineWidth = 1.0;
segment.path = strokedArc;

[self.view.layer addSublayer:segment]; 
```

## 添加阴影

该图层具有一些与阴影相关的属性，由您来自定义。**但是**，您应该设置该`shadowPath`属性以提高性能。

```
segment.shadowColor = [UIColor blackColor].CGColor;
segment.shadowOffset = CGSizeMake(0, 2);
segment.shadowOpacity = 0.75;
segment.shadowRadius = 3.0;
segment.shadowPath = segment.path; // Important for performance 
```

# 绘制渐变

```
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.colors = @[(id)[UIColor colorWithWhite:0.75 alpha:1.0].CGColor,  // light gray
                    (id)[UIColor colorWithWhite:0.90 alpha:1.0].CGColor]; // lighter gray
gradient.frame = CGPathGetBoundingBox(segment.path); 
```

如果我们现在绘制渐变，它将位于形状的顶部而不是内部。不，我们不能对形状进行渐变填充（我知道你在考虑它）。我们需要屏蔽渐变，使其超出片段。为此，我们创建*另一个*层作为该段的蒙版。它*必须是*另一层，文档清楚地表明，如果掩码是层层次结构的一部分，则行为是“未定义的”。由于蒙版的坐标系将与渐变的子层的坐标系相同，因此我们必须在设置之前平移段形状。

```
CAShapeLayer *mask = [CAShapeLayer layer];
CGAffineTransform translation = CGAffineTransformMakeTranslation(-CGRectGetMinX(gradient.frame),
                                                                 -CGRectGetMinY(gradient.frame));
mask.path = CGPathCreateCopyByTransformingPath(segment.path,
                                               &translation);
gradient.mask = mask; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-04-07T22:09:44.283

[*Quartz 2D Programming Guide*](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066)涵盖了您需要的一切。我建议你仔细看看。

但是，将它们放在一起可能很困难，因此我将引导您完成。我们将编写一个函数，它接受一个大小并返回一个看起来大致类似于您的片段之一的图像：

![带有轮廓、渐变和阴影的弧线](https://i.stack.imgur.com/af2Np.png)

我们像这样开始定义函数：

```
static UIImage *imageWithSize(CGSize size) { 
```

我们需要一个常数来表示片段的厚度：

```
 static CGFloat const kThickness = 20; 
```

以及勾画线段的线宽的常数：

```
 static CGFloat const kLineWidth = 1; 
```

以及阴影大小的常数：

```
 static CGFloat const kShadowWidth = 8; 
```

接下来我们需要创建一个用于绘制的图像上下文：

```
 UIGraphicsBeginImageContextWithOptions(size, NO, 0); { 
```

我在该行的末尾放了一个左大括号，因为我喜欢额外的缩进以提醒我`UIGraphicsEndImageContext`稍后再打电话。

由于我们需要调用的许多函数是 Core Graphics（又名 Quartz 2D）函数，而不是 UIKit 函数，我们需要获取`CGContext`：

```
 CGContextRef gc = UIGraphicsGetCurrentContext(); 
```

现在我们准备好开始了。首先，我们在路径中添加一个弧。弧线沿着我们要绘制的线段的中心延伸：

```
 CGContextAddArc(gc, size.width / 2, size.height / 2,
            (size.width - kThickness - kLineWidth) / 2,
            -M_PI / 4, -3 * M_PI / 4, YES); 
```

现在我们将要求 Core Graphics 将路径替换为“描边”版本，以勾勒出路径。我们首先将笔画的粗细设置为我们希望段具有的粗细：

```
 CGContextSetLineWidth(gc, kThickness); 
```

我们将线帽样式设置为“butt” ，[这样我们就有了方形末端](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-BAJBHIGD)：

```
 CGContextSetLineCap(gc, kCGLineCapButt); 
```

然后我们可以要求 Core Graphics 将路径替换为描边版本：

```
 CGContextReplacePathWithStrokedPath(gc); 
```

为了用线性渐变填充这条路径，我们必须告诉 Core Graphics 将所有操作裁剪到路径内部。这样做会使 Core Graphics 重置路径，但稍后我们将需要路径在边缘周围绘制黑线。因此，我们将在此处复制路径：

```
 CGPathRef path = CGContextCopyPath(gc); 
```

由于我们希望段投射阴影，因此我们将在进行任何绘制之前设置阴影参数：

```
 CGContextSetShadowWithColor(gc,
            CGSizeMake(0, kShadowWidth / 2), kShadowWidth / 2,
            [UIColor colorWithWhite:0 alpha:0.3].CGColor); 
```

我们将填充线段（使用渐变）和描边（绘制黑色轮廓）。我们希望两个操作都有一个阴影。我们通过开始透明层告诉 Core Graphics：

```
 CGContextBeginTransparencyLayer(gc, 0); { 
```

我在该行的末尾放了一个左大括号，因为我喜欢有一个额外的缩进级别，以提醒我`CGContextEndTransparencyLayer`稍后再打电话。

由于我们要更改上下文的剪辑区域进行填充，但我们不想在稍后描边轮廓时进行剪辑，所以我们需要保存图形状态：

```
 CGContextSaveGState(gc); { 
```

我在该行的末尾放了一个左大括号，因为我喜欢有一个额外的缩进级别，以提醒我`CGContextRestoreGState`稍后再打电话。

要使用渐变填充路径，我们需要创建一个渐变对象：

```
 CGColorSpaceRef rgb = CGColorSpaceCreateDeviceRGB();
                CGGradientRef gradient = CGGradientCreateWithColors(rgb, (__bridge CFArrayRef)@[
                    (__bridge id)[UIColor grayColor].CGColor,
                    (__bridge id)[UIColor whiteColor].CGColor
                ], (CGFloat[]){ 0.0f, 1.0f });
                CGColorSpaceRelease(rgb); 
```

我们还需要找出渐变的起点和终点。我们将使用路径边界框：

```
 CGRect bbox = CGContextGetPathBoundingBox(gc);
                CGPoint start = bbox.origin;
                CGPoint end = CGPointMake(CGRectGetMaxX(bbox), CGRectGetMaxY(bbox)); 
```

我们将强制水平或垂直绘制渐变，以较长者为准：

```
 if (bbox.size.width > bbox.size.height) {
                    end.y = start.y;
                } else {
                    end.x = start.x;
                } 
```

现在我们终于有了绘制渐变所需的一切。首先我们剪辑到路径：

```
 CGContextClip(gc); 
```

然后我们绘制渐变：

```
 CGContextDrawLinearGradient(gc, gradient, start, end, 0); 
```

然后我们可以释放梯度，恢复保存的图形状态：

```
 CGGradientRelease(gradient);
            } CGContextRestoreGState(gc); 
```

当我们调用`CGContextClip`时，Core Graphics 会重置上下文的路径。路径不是已保存图形状态的一部分；这就是我们之前制作副本的原因。现在是时候使用该副本再次在上下文中设置路径了：

```
 CGContextAddPath(gc, path);
            CGPathRelease(path); 
```

现在我们可以描边路径，绘制线段的黑色轮廓：

```
 CGContextSetLineWidth(gc, kLineWidth);
            CGContextSetLineJoin(gc, kCGLineJoinMiter);
            [[UIColor blackColor] setStroke];
            CGContextStrokePath(gc); 
```

接下来我们告诉 Core Graphics 结束透明层。这将使它查看我们绘制的内容并在下面添加阴影：

```
 } CGContextEndTransparencyLayer(gc); 
```

现在我们都画完了。我们要求 UIKit 从图像上下文创建一个`UIImage`，然后销毁上下文并返回图像：

```
 UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
} 
```

您可以[在这个 gist](https://gist.github.com/mayoff/5332772)中找到所有代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-18T20:23:02.673

这是Rob Mayoff 答案的**Swift 3版本。**看看这种语言的效率有多高！这可能是 MView.swift 文件的内容：

```
import UIKit

class MView: UIView {

    var size = CGSize.zero

    override init(frame: CGRect) {
    super.init(frame: frame)
    size = frame.size
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    var niceImage: UIImage {

        let kThickness = CGFloat(20)
        let kLineWidth = CGFloat(1)
        let kShadowWidth = CGFloat(8)

        UIGraphicsBeginImageContextWithOptions(size, false, 0)

            let gc = UIGraphicsGetCurrentContext()!
            gc.addArc(center: CGPoint(x: size.width/2, y: size.height/2),
                   radius: (size.width - kThickness - kLineWidth)/2,
                   startAngle: -45°,
                   endAngle: -135°,
                   clockwise: true)

            gc.setLineWidth(kThickness)
            gc.setLineCap(.butt)
            gc.replacePathWithStrokedPath()

            let path = gc.path!

            gc.setShadow(
                offset: CGSize(width: 0, height: kShadowWidth/2),
                blur: kShadowWidth/2,
                color: UIColor.gray.cgColor
            )

            gc.beginTransparencyLayer(auxiliaryInfo: nil)

                gc.saveGState()

                    let rgb = CGColorSpaceCreateDeviceRGB()

                    let gradient = CGGradient(
                        colorsSpace: rgb,
                        colors: [UIColor.gray.cgColor, UIColor.white.cgColor] as CFArray,
                        locations: [CGFloat(0), CGFloat(1)])!

                    let bbox = path.boundingBox
                    let startP = bbox.origin
                    var endP = CGPoint(x: bbox.maxX, y: bbox.maxY);
                    if (bbox.size.width > bbox.size.height) {
                        endP.y = startP.y
                    } else {
                        endP.x = startP.x
                    }

                    gc.clip()

                    gc.drawLinearGradient(gradient, start: startP, end: endP,
                                          options: CGGradientDrawingOptions(rawValue: 0))

                gc.restoreGState()

                gc.addPath(path)

                gc.setLineWidth(kLineWidth)
                gc.setLineJoin(.miter)
                UIColor.black.setStroke()
                gc.strokePath()

            gc.endTransparencyLayer()

        let image = UIGraphicsGetImageFromCurrentImageContext()!
        UIGraphicsEndImageContext()
        return image
    }

    override func draw(_ rect: CGRect) {
        niceImage.draw(at:.zero)
    }
} 
```

像这样从 viewController 调用它：

```
let vi = MView(frame: self.view.bounds)
self.view.addSubview(vi) 
```

为了将度数转换为弧度，我创建了**°**后缀运算符。因此，您现在可以使用例如**45°**，这会将 45 度转换为弧度。此示例适用于 Ints，如果您有需要，也可以为 Float 类型扩展这些：

```
postfix operator °

protocol IntegerInitializable: ExpressibleByIntegerLiteral {
  init (_: Int)
}

extension Int: IntegerInitializable {
  postfix public static func °(lhs: Int) -> CGFloat {
    return CGFloat(lhs) * .pi / 180
  }
} 
```

将此代码放入实用程序 swift 文件中。

# ios - iOS - UIImage imageNamed：在设备上返回 null

> ID：15866180
> 
> 赞同：12
> 
> 时间：2013-04-07T18:33:11.157
> 
> 标签：ios, ios6, uiimage

```
[UIImage imageNamed:filename] 
```

此方法仅在设备上返回 null。

我知道这是已知问题，通常是因为模拟器不区分大小写。我已经尝试过这里提出的解决方案：[UIImage imageNamed 返回 nil](https://stackoverflow.com/questions/10998544/uiimage-imagenamed-returns-nil)

但对我来说没有任何结果。

案例很简单：我有4个文件，分别命名为：Bar@2x~ipad.png、Bar@2x~iphone.png、Bar~ipad.png、Bar~iphone.png。他们都在项目中，选中了目标复选框。

```
NSLog(@"%@",[UIImage imageNamed:@"Bar"]); 
```

那行代码给了我设备的 null ，我真的不知道我现在做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:54:15.113

我最近也遇到了这样的问题。

在使用文件名和路径之后，有时它会在您清理和重建项目时有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T18:37:23.610

我最近发现自己处于同样的境地。

在我的情况下，解决方案是将扩展名添加到文件名中。

```
[UIImage imageNamed:@"Bar.png"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T19:00:49.840

彻底清理您的构建并重做：

1.  从设备中删除应用程序
2.  选项-清理 Xcode 中的整个构建目录 (⌘-Shift-K)
3.  退出 xcode
4.  删除 ~/Library/Developer/Xcode/DerivedData
5.  重新启动 xcode，构建并运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-22T22:17:47.593

这只是发生在我身上，发现非常困难：我有一张图像，它只是在设备上为零

```
logoWhite.png 
```

我的代码：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"LogoWhite"] forBarMetrics:UIBarMetricsDefault]; 
```

经过一段时间的调试，我注意到图像的名称以大写字母开头。显然，这在带有忽略大小写文件系统的 OSX 上并不重要。iOs 文件系统不是，所以图像在模拟器上工作，但在设备上不工作。

我敢打赌，所有关于清理派生数据和重建的解决方案都随机以重命名图像结束，这也可以解决问题。只是在这里发布以供将来参考:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-29T07:57:55.473

我遇到了这个问题，只是修复了它。我列出了下面的解决方案作为参考。

我有几个图像，并使用 [UIImage imageNamed:filePath] 来显示它们。除了模拟器/设备上的 1 个图像外，所有图像都显示良好，但所有图像都可以在 OS X 上看到。对于该图像，[UIImage imageNamed] 始终返回 null。

经过几分钟的调查，我发现图像导致问题的文件大小很大：4.1M。其他的都在800kb左右。它们的尺寸几乎相同。

然后我尝试在图像编辑器中打开它，然后重新保存它。在此之后，大小下降到 800k。问题解决了。

我猜的原因，

1.  [UIImage imageNamed:filePath] 有最大文件大小限制吗？（可能性小，但需要查看官方文档）

2.  图像本身有一些错误。但是 OS X 比 iOS 有更好的容忍度。所以 iOS 无法读取并返回 null。这个问题就像 OS X 可以播放比 iOS 更多类型的视频文件，因为它支持更多的编解码器。

因此，如果您将来遇到此问题，请花几秒钟查看文件大小。希望有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-26T21:08:16.013

这是一个奇怪的问题，直到本周我才看到。

以下是我的发现，以及解决您的问题的方法。

在我的 iPhone 应用程序中，我下载了一张图片并将其存储在本地，这一直运行良好。

但是现在当我运行相同的代码时，它突然无法`UIImage`使用该`imageNamed`函数创建它，现在它返回 nil。

三个注意事项：

1.  这个确切的代码之前确实有效，使用相同的源代码和 .png 图像文件。我不确定我的 XCode 6.x 或 iOS 8.x 副本是否在此期间悄悄地更新了自己。
2.  代码在 iPhone 模拟器上*继续*正常工作（使用相同的图像文件）。它只是在真实设备上不起作用。
3.  看看下面的代码。失败时`UIImage:imageNamed`，我运行了一些代码来检查文件是否真的存在......确实存在。然后我从文件中加载二进制数据`NSData:contentsAtPath`（这也证明文件存在并且在正确的文件夹中），然后创建了一个`UIImage`，它工作正常。

咦？！

```
UIImage* img = [UIImage imageNamed:backgroundImageFilename];
if (img != nil)
{
    //  The image loaded fine (this always worked before).  Job done.
    //  We'll set our UIImageView "imgBackgroundView" to contain this image.
    self.imgBackgroundView.image = img;
}
else
{
    //  We were unable to load the image file for some reason.
    //  Let's investigate why.

    //  First, I checked whether the image was actually on the device, and this returned TRUE...
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:backgroundImageFilename];
    if (fileExists)
        NSLog(@"Image file does exist.");
    else
        NSLog(@"Image file does not exist.");

    //  Next, I attempted to just load the bytes in the file, and amazingly, this also worked fine...
    NSData *data = [[NSFileManager defaultManager] contentsAtPath:backgroundImageFilename];
    if (data != nil)
    {
        //  ..and then I COULD actually create a UIImage out of it.
        img = [UIImage imageWithData:data];
        if (img != nil)
        {
            //  We have managed to load the .png file, and can now
            //  set our UIImageView "imgBackgroundView" to contain this image.
            self.imgBackgroundView.image = img;
        }
    }
} 
```

正如我所说，这段代码确实为这个问题提供了一个解决方法，但它突然开始发生是非常奇怪的。

而且，我应该说，我确实尝试了这个线程中的其他建议，清理项目，删除 DerivedData，从设备中完全删除应用程序等等，但它们没有任何区别。

我很想知道是否有其他人遇到此问题，并发现我的代码示例适用于他们。

**更新**

我是个白痴。

我不确定该`UIImage:imageNamed`功能是否发生了变化（如果是，为什么它在 iPhone 8.1 Simulator 上仍然可以正常工作），但我发现以下一行*确实*可以正常工作：

```
UIImage* img = [[UIImage alloc] initWithContentsOfFile:backgroundImageFilename]; 
```

所以看起来你应该使用这个函数来加载不属于你的应用程序包的图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-02T09:54:36.947

我也有同样的问题：`XCode - Build Phases - Copy Bundle Resources -`{see image is available or not} `- add{image} - clean - delete app - Run`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-05T04:55:46.723

我想在上述所有解决方案中再补充一点

确保将***图像资源***添加到正确的目标

如果开发人员错误地与资源和目标链接，则会出现条件。

如果您有多个目标，请仔细检查资源是否设置为正确的目标。

在多个目标之间的资源链接的情况下附加屏幕截图示例。

[![在此处输入图像描述](https://i.stack.imgur.com/HcJcc.png)](https://i.stack.imgur.com/HcJcc.png)

# php - 使用 PDO 执行高级搜索查询的问题

> ID：15866185
> 
> 赞同：0
> 
> 时间：2013-04-07T18:33:31.677
> 
> 标签：php, mysql, pdo

我有以下代码，除标题字段外，所有搜索功能都有效。所以我可以按流派、日期、地点等进行搜索……但不能按标题。尝试按标题搜索时，根本不会返回任何内容。谁能帮我这个？

此外，是否有一种更有效的方法来计算所有字段，然后再将其限制为以后用于分页？

```
$today = date("Y-m-d");
$query = "SELECT * FROM TABLE_NAME WHERE Date >= '$today'";

$bind = Array();

if ($_GET["Title"] && $_GET["Title"] != "") {
    $query .= " and Title like %?%";
    $bind['Title'] = $_GET['Title'];
}
if ($_GET["Genre"] && $_GET["Genre"] != "") {
    $query .= " and Genre like %?%";
    $bind['Genre'] = $_GET['Genre'];
}
if ($_GET["Location"] && $_GET["Location"] != "") {
    $query .= " and Location like %?%";
    $bind['Location'] = $_GET['Location'];
}
if ($_GET["Date"] && $_GET["Date"] != "") {
    $query .= " and Date = %?%";
    $bind['Date'] = $_GET['Date'];
}

$stmt = $db->prepare($query);
$stmt->execute($bind);
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
$num = count($rows);

$query .= " ORDER BY Date LIMIT $limit, 9";
$stmt = $db->prepare($query);
$stmt->execute($bind);
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

**编辑：**在大家的帮助下，我想我会发布我现在修改的代码以供将来参考。事实证明，其他字段不起作用，而是由于 if 语句，所有这些都嵌套在代码中，根本没有被执行。

```
$today = date("Y-m-d");
$query = "SELECT * FROM TABLE_NAME WHERE Date >= '$today'";
$countq = "SELECT count(*) FROM TABLE_NAME WHERE Date >= '$today'";

$bind = Array();

if ($_GET["Title"] && $_GET["Title"] != "") {
    $query .= " and Title like :title";
    $countq .= " and Title like :title";
    $bind[':title'] = "%{$_GET['Title']}%";
}
if ($_GET["Genre"] && $_GET["Genre"] != "") {
    $query .= " and Genre like :genre";
    $countq .= " and Genre like :genre";
    $bind[':genre'] = "%{$_GET['Genre']}%";
}
if ($_GET["Location"] && $_GET["Location"] != "") {
    $query .= " and Location like :loc";
    $countq .= " and Location like :loc";
    $bind[':loc'] = "%{$_GET['Location']}%";
}
if ($_GET["Date"] && $_GET["Date"] != "") {
    $query .= " and Date = :date";
    $countq .= " and Date = :date";
    $bind[':date'] = "{$_GET['Date']}";
}

$stmt = $db->prepare($countq);
$stmt->execute($bind);
$rows = $stmt->fetchAll();
$num = count($rows);

$query .= " ORDER BY Date LIMIT $limit, 9";
$stmt = $db->prepare($query);
$stmt->execute($bind);
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:39:53.253

> 所有搜索功能都有效

对于给定的查询，它是不正确的

来自[PDO 标签维基](https://stackoverflow.com/tags/pdo/info)：

> 占位符不能代表查询的任意部分，而只能代表完整的数据文字。**文字的任何部分**，或者任何复杂的表达式或语法关键字都不能用准备好的语句替换。
> 
> 首先准备完整的文字： $name = "%$name%"; 然后绑定它。

至于“更”有效的分页方法 - 是的，哦，是的。
使用您当前的数据计数方式，您实际上不需要其他查询。因为您已经拥有所有数据并且也可以对其进行分页。
但是当然它很快就会污染所有的内存。因此，如果您想从数据库中获取行数，请获取非常数：运行相同的查询，但不要`SELECT *`执行它`"SELECT count(*)`

> 没有返回任何错误，这就是我如此困惑的原因

再次从 PDO 标签维基：

> 必须设置`ERRMODE_EXCEPTION`为连接选项，因为它会让 PDO 在连接错误时抛出异常。而这种模式是处理 PDO 错误的唯一可靠方式。

# spring - 配置事务hibernate4和spring3

> ID：15866187
> 
> 赞同：0
> 
> 时间：2013-04-07T18:33:32.307
> 
> 标签：spring, hibernate

我是 Hibernate 和 Spring 的新手。我的 spring 配置有关于“transactionManager”的问题。

有我的bean配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="org.postgresql.Driver"/>
<property name="url" value="jdbc:postgresql:T"/>
<property name="username" value="postgres"/>
<property name="password" value="root"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
<property name="dataSource" ref="dataSource"/>
<property name="annotatedClasses">
<list>
<value>com.model.Cours</value>
<value>com.model.Student</value>
<value>com.model.Teacher</value>
</list>
</property>
<property name="hibernateProperties">
<props>
<prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
</props>
</property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
<property name="sessionFactory" ref="sessionFactory"/>
</bean>
<tx:annotation-driven transaction-manager="transactionManager"/>
<context:annotation-config/>
<context:component-scan base-package="com.model"/>
</beans> 
```

> 该消息是相对的：处理 XML > 'org/springframework/transaction/interceptor/TransactionInterceptor' 时发生错误。有关详细信息，请参阅错误日志

# java - 制造+非贪婪？

> ID：15866191
> 
> 赞同：0
> 
> 时间：2013-04-07T18:33:56.250
> 
> 标签：java, regex, regex-greedy

想象一下我有字符串

```
abcD 
```

我想从中提取`abc`出来。我想过使用

```
^(.+)D$ 
```

然而，然后在匹配 group1 中，不仅包含`abc`，而且`abcD`包含 - 如何使`.+`不那么贪婪，因此`D`不包含在组中？我知道我可以使用`[^D]+`，但这真的是唯一的方法吗？

**抱歉，这是一个减少的坏测试用例。** 看看这个示例（Java）：

```
Pattern pattern = Pattern.compile("^(\\{(.+?)\\})?$");
Matcher matcher = pattern.matcher("{a}{b}");

System.out.println(matcher.matches()); // true 
```

为什么会这样匹配？正则表达式不应该只允许字符串中的一`{`加一吗？`}`我只`{< not } >}`想要匹配的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:42:26.223

为了使量词不那么贪婪，你`?`在量词之后添加一个：

```
^(.+?)D$ 
```

不过，这取决于您的语言或文本编辑器。不同的正则表达式引擎支持不同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:45:29.367

“D”不包含在第一组中，它包含在完整的模式匹配中。

第一组是“abc”。

您可以在[http://rubular.com/r/oSnF17Jd39看到一个演示](http://rubular.com/r/oSnF17Jd39)

# c - C 标准：L 前缀和八进制/十六进制转义序列

> ID：15866199
> 
> 赞同：0
> 
> 时间：2013-04-07T18:34:53.860
> 
> 标签：c, widechar

我没有在 C 标准中找到如何处理上述宽字符串中的转义序列的解释。

例如：

```
wchar_t *txt1 = L"\x03A9";
wchar_t *txt2 = L"\xA9\x03"; 
```

这些是否以某种方式处理（例如在每个字节前加上 \x00 字节）或存储在内存中的方式与此处声明的方式完全相同？

还有，L前缀是如何按照标准操作的？

**编辑：**

让我们考虑一下txt2。它将如何存储在内存中？\xA9\x00\x03\x00 还是 \xA9\x03 写的？\x03A9 也是如此。这会被视为一个宽字符还是被视为两个单独的字节，它们将被制成两个宽字符？

**编辑2：**

标准 说：

反斜杠后面的十六进制数字和十六进制转义序列中的字母 x 被视为整数字符常量的单个字符或宽字符常量的单个宽字符的构造的一部分。如此形成的十六进制整数的数值指定所需字符或宽字符的值。

现在，我们有一个 char 文字：

```
wchar_t txt = L'\xFE\xFF'; 
```

它由 2 个十六进制转义序列组成，因此应将其视为两个宽字符。如果这些是两个宽字符，它们不能放入一个 wchar_t 空间（但它在 MSVC 中编译），在我的情况下，这个序列被视为如下：

```
wchar_t foo = L'\xFFFE'; 
```

这是唯一的十六进制转义序列，因此是唯一的宽字符。

**编辑3：**

结论：每个八进制/十六进制序列都被视为一个单独的值（ wchar_t *txt2 = L"\xA9\x03"; 由 3 个元素组成）。wchar_t txt = L'\xFE\xFF'; 不可移植 - 实现定义的功能，应该使用 wchar_t txt = L'\xFFFE';

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:36:24.500

没有任何处理。`L"\x03A9"`只是一个`wchar_t const[2]`由两个元素`0x3A9`和组成的数组`0`，同样`L"\xA9\x03"`是一个数组`wchar_t const[3]`。

特别注意 C11 6.4.4.4/7：

> 每个八进制或十六进制转义序列都是可以构成转义序列的最长字符序列。

还有 C++11 2.14.3/4：

> 十六进制序列中的位数没有限制。

另请注意，当您使用十六进制序列时，*您*有责任确保您的数据类型可以保存该值。C11-6.4.4.4/9 实际上将其作为一项要求进行了说明，而在 C++ 中，超出类型范围仅仅是“实现定义的”。（如果您超出类型的范围，一个好的编译器应该会警告您。）

* * *

但是，您的代码没有意义，因为左侧既不是数组也不是指针。它应该是这样的：

```
wchar_t const * p = L"\x03A9";    // pointer to the first element of a string

wchar_t arr1[] = L"\x03A9";       // an actual array
wchar_t arr2[2] = L"\x03A9";      // ditto, but explicitly typed

std::wstring s = L"\x03A9";       // C++ only 
```

* * *

切线：[我的这个问题](https://stackoverflow.com/questions/6796157/unicode-encoding-for-string-literals-in-c11)详细阐述了字符串文字和转义序列。

# android - 如何在设置/无线设置下调用“以太网设置”？

> ID：15866203
> 
> 赞同：1
> 
> 时间：2013-04-07T18:35:31.103
> 
> 标签：android, settings

我正在尝试调用名为 Etherent 配置的活动。

放置在**Settings > Wireless & networks > Ethernet settings**上。

我发现“无线和网络”活动很深，我只是这样称呼它，

```
startActivity( new Intent(Settings.ACTION_WIRELESS_SETTINGS) ); 
```

但在上面找不到调用“以太网设置”的方法。

有什么解决办法吗？感谢您的阅读。

（我的设备是安卓2.3.3版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:44:41.173

标准 Android 中没有此类活动。欢迎您联系您的设备制造商，看看是否有一些公开记录并支持`Intent`在他们的设备上启动您想要的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T07:04:35.910

我知道这是旧线程，但这可能对某人有帮助

```
 Intent intent = new Intent();
            intent.setComponent( new ComponentName("com.android.settings","com.android.settings.Settings$EthernetSettingsActivity" ));
            startActivity(intent); 
```

# vba - VBA 将工作表名称与文本列表匹配

> ID：15866204
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:35:37.700
> 
> 标签：vba

我有一个城市名称的文本列表，我需要检查这些名称是否是工作表的名称，如果不是，则使用所述名称创建一个新的工作表。

另一方面，如果列表中有任何没有名称的工作表，那么我需要删除这些工作表。

我一直在尝试这个问题几个小时并且非常迷茫，它可能很简单，所以如果有人可以提供帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:28:17.370

这只是关于此代码的外观。这是我的文本文件的样子，所以没有混淆。

![在此处输入图像描述](https://i.stack.imgur.com/au3HG.png)

```
Sub Macro1()
Dim sFileName, tmp As String
Dim dict As New Dictionary
Dim dictCopy As New Dictionary
Dim ws As Worksheet

sFileName = "C:\Users\Mango\Desktop\names.txt"
'^ Specify the location of the txt file that you want read

    With New Scripting.FileSystemObject
        With .OpenTextFile(sFileName, ForReading)

            Do Until .AtEndOfStream
                tmp = .ReadLine
                '^ This step should be noted. Calling .Readline more than once
                '  even in loop cause it to move to the next one.

                dict.Add tmp, tmp
                dictCopy.Add tmp, tmp
                '^ add to our dictionary objects
            Loop

        End With
    End With 
```

这是我在此处获取的文本阅读代码：[从文本文件中读取行但跳过前两行](https://stackoverflow.com/questions/938796/read-lines-from-a-text-file-but-skip-the-first-two-lines)。我发现它比其他 vba 文本阅读代码更优雅。但是您需要选择一个“Microsoft Scripting Runtime”作为参考（从工具菜单中）才能使用它。该代码还利用了`Dictionary`对象，该对象也需要该引用才能使用它。我使用这个对象而不是数组或其他集合，原因我将在下面解释。

```
For Each ws In ActiveWorkbook.Worksheets
    If dict.Exists(ws.Name) = True Then
        dict.Remove (ws.Name)
   End If
Next

For Each j In dict.Items
    Set ws = Worksheets.Add(after:=Worksheets(Worksheets.Count))
    ws.Name = j
Next 
```

根据您的列表有多长，您可能会发现有`Dictionary`利于双循环等的对象。这是因为它有`.Exists`方法来查看它本身是否包含特定值。我不知道其中的机制，但它比双循环技术**快得多**，尤其是当你有很多条目要比较时。您应该注意，很多这些字典方法都使用键信息（而不是值）。

最后部分：

```
 Application.DisplayAlerts = False 'removes annoying save notification
    For Each ws In ActiveWorkbook.Worksheets
        If dictCopy.Exists(ws.Name) = False Then
            ws.Delete
        End If
    Next
    Application.DisplayAlerts = True
End Sub 
```

我选择这样做是因为 excel 不允许您删除工作簿中的最后一张工作表。因此，如果您选择删除错误命名的工作表或至少组合该方法，如果没有工作表名称与集合中的所有工作表名称匹配，则可能会遇到问题，所有这些工作表都必须删除。

# java - java.util.日历

> ID：15866205
> 
> 赞同：0
> 
> 时间：2013-04-07T18:35:39.097
> 
> 标签：java, calendar, java.util.calendar

我的应用程序：

```
System.out.print("Please enter date (and time): ");
myTask.setWhen(
   input.nextInt(),
   input.nextInt(),
   input.nextInt(),
   input.nextInt(),
   input.nextInt()); 
```

我的二传手：

```
public void setWhen(int year, int month, int date, int hourOfDay, int minute){
    this.year = year;
    this.month = month;
    this.date = date;
    this.hourOfDay = hourOfDay;
    this.minute = minute; 
```

但是，当它准备好让用户输入日期和时间时，它会引发异常。另外，如果用户输入 4/7/2013 1:30pm 而不是 4、7、2013、13、30，会发生什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:44:56.223

代码应该是这样的（只是快速的想法）：

```
System.out.print("Please enter date (and time): ");
String inputText;
Scanner scanner = new Scanner(System.in);
inputText = scanner.nextLine();
scanner.close();
//parse input and parsed put as input parameter for your setwhen() method
setWhen(myOwnParserForInputFromConsole(inputText)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:06:39.393

使用标准的另一种方法：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.util.Calendar;
import java.util.Date;

public class Calend {

   public static void main( String[] args ) throws ParseException {
      Calendar cal = Calendar.getInstance();
      DateFormat formatter =
         DateFormat.getDateTimeInstance(
            DateFormat.FULL, DateFormat.FULL );
      DateFormat scanner;
      Date date;

      scanner = DateFormat.getDateTimeInstance(
         DateFormat.SHORT, DateFormat.SHORT );
      date = scanner.parse( "7/4/2013 21:01:05" );
      cal.setTime( date );
      System.out.println( formatter.format( cal.getTime()));

      scanner = DateFormat.getDateTimeInstance(
         DateFormat.MEDIUM, DateFormat.MEDIUM );
      date = scanner.parse( "7 avr. 2013 21:01:05" );
      cal.setTime( date );
      System.out.println( formatter.format( cal.getTime()));

      scanner = DateFormat.getDateTimeInstance(
         DateFormat.FULL, DateFormat.FULL );
      date = scanner.parse( "dimanche 7 avril 2013 21 h 01 CEST" );
      cal.setTime( date );
      System.out.println( scanner.format( cal.getTime()));
   }
} 
```

如果你想使用不同的语言环境，它在 DateFormat 中存在一个构造函数来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:56:44.193

从[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28int%29)中，`nextInt`抛出“ `InputMismatchException`- 如果下一个标记与 Integer 正则表达式不匹配，或者超出范围”。这意味着您不能盲目调用`nextInt`并希望输入是`int`.

您可能应该将输入读取为 a`String`并对该输入执行检查，以查看它是否有效。

```
public static void main(String[] args) throws IOException {
    final Scanner scanner = new Scanner(System.in);
    //read year
    final String yearString = scanner.next();
    final int year;
    try {
        year = Integer.parseInt(yearString);
        //example check, pick appropriate bounds
        if(year < 2000 || year > 3000) throw new NumberFormatException("Year not in valid range");
    } catch (NumberFormatException ex) {
        throw new RuntimeException("Failed to parse year.", ex);
    }
    final String monthString = scanner.next();
    final int month;
    try {
        month = Integer.parseInt(monthString);
        //example check, pick appropriate bounds
        if(month < 1 || month > 12) throw new NumberFormatException("Month not in valid range");
    } catch (NumberFormatException ex) {
        throw new RuntimeException("Failed to parse month.", ex);
    }
    //and the rest of the values
} 
```

然后，当您拥有所有输入并且已知它们有效时，请调用`setWhen`.

显然，您可以尝试再次读取该数字，而不是抛出异常。

# jquery - Div 宽度取决于其中的图像宽度

> ID：15866209
> 
> 赞同：3
> 
> 时间：2013-04-07T18:36:14.353
> 
> 标签：jquery, html, css, internet-explorer

需要 CSS 帮助。

我有一个向左浮动的 div，里面是具有固定高度和自动宽度的图像。我希望主 DIV 宽度与图像宽度完全相同。

```
<div class="item">
   <img src="http://upload.wikimedia.org/wikipedia/commons/4/49/Sports_shoes.jpg" alt="" />
   <a href="">Name here</a>
</div> 
```

[**FIDDLE**](http://jsfiddle.net/szPdR/5/) - 您可以看到名称在图像的右侧，但它应该在底部。

那么，有没有办法让 DIV class="item" 始终具有图像的宽度。如您所见，图像宽度可能不同。

**我正在寻找跨浏览器解决方案**，这意味着显示：table-cell；不是解决方案，因为 IE7 -8 不支持它。

***我的 jquery 脚本块向左浮动，需要帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:39:36.377

制作图像`display: block`。`<img>`元素默认是内联的。

**现场演示：http:** [//jsfiddle.net/szPdR/1/](http://jsfiddle.net/szPdR/1/)

对于 IE 支持和其他棘手的浏览器使用 jQuery，请参阅此[FIDDLIE](http://jsfiddle.net/szPdR/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:48:39.467

用 CSS 做

```
div {
    width:auto;
} 
```

# image - SenchaTouch：Ext.getCmp().setSrc() 方法不起作用

> ID：15866220
> 
> 赞同：2
> 
> 时间：2013-04-07T18:37:06.283
> 
> 标签：image, extjs, sencha-touch-2

我正在尝试使用 setSrc 更改图像的来源，但出现此错误： Uncaught TypeError: Cannot call method 'setSrc' of undefined

> Ext.Ajax.request.success Ext.apply.callback Ext.define.onComplete Ext.define.onStateChange（匿名函数）

这是我的源代码：查看页面：

```
Ext.define('MechanicalTerk.view.Picture', {
extend: 'Ext.Container', 
xtype: 'Picture',
requires: [
    'Ext.data.Store'
],
config: {
    layout: 'vbox', 
    items: 
    [
        {
            xtype: 'toolbar',
            docked: 'top',
            title: 'Requests',
            minHeight: '60px',
            items: [
                {
                    xtype:'button',
                    ui:'back button',
                    id:'backButton',
                    text:'Back'

                },{
                    xtype: 'button',
                    id:'logoutButton', 
                    text: 'Logout'
                }
            ],          
        },

        {
            xtype:'image',
            height:500,
            id:'layoutImage'
        }  
    ]
}
}); 
```

控制器：

```
Ext.define('MechanicalTerk.controller.PictureController',{
extend:'Ext.app.Controller',
showPicture: function(userID,sentAt){
    Ext.Ajax.request({
        url:'app/Model/database.php',
        params: {
            functionID: 3,
            userID: userID,
            sentAt: sentAt,
        },
        success: function (response, opts){
Ext.getCmp('layoutImage').setSrc('http://www.sencha.com/img/20110215-feat-perf.png');
Ext.Viewport.setActiveItem(Ext.create('MechanicalTerk.view.Picture'));
            }
        });
    }
}); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:53:51.573

您应该考虑不使用自己的`id`，而是使用`itemId`. 这可能是因为您试图重新使用已被破坏的组件。我建议`ref`在您的控制器中为您的图像创建一个，以便您可以访问它。

所以我在想：

```
Ext.define('MechanicalTerk.controller.PictureController',{
    extend:'Ext.app.Controller',

    config: {
        refs : {
            myImage : {
                autoCreate: true,
                selector: '#myimage',//assuming your image's itemId is 'myimage'
                xtype: 'image'
            }
        }
    },
    showPicture: function(userID,sentAt){
        Ext.Ajax.request({
            url:'app/Model/database.php',
            params: {
                functionID: 3,
                userID: userID,
                sentAt: sentAt,
            },
            success: function (response, opts){
                var me = this;
                me.getMyImage().setSrc('http://www.sencha.com/img/20110215-feat-perf.png');
                Ext.Viewport.setActiveItem(Ext.create('MechanicalTerk.view.Picture'));
            }
        });
    }
}); 
```

PS：未经测试，但尝试这种方法。

# html - 如何让图片被截断

> ID：15866223
> 
> 赞同：10
> 
> 时间：2013-04-07T18:37:22.953
> 
> 标签：html, css

[http://s1167.photobucket.com/user/unlivedears/media/image-8.jpg.html?sort=3&o=1](http://s1167.photobucket.com/user/unlivedgears/media/image-8.jpg.html?sort=3&o=1)

[http://s1167.photobucket.com/user/unlivedears/media/image-9.jpg.html?sort=3&o=0](http://s1167.photobucket.com/user/unlivedgears/media/image-9.jpg.html?sort=3&o=0)

请参阅在第一张图片上，由于图片对于正方形来说太长，女孩的头和腿是如何被剪掉的。我怎样才能使它既切断它们又使它们居中？或者如果它太宽，它会切断两侧？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T18:48:08.500

Assuming an HTML structure like this:

```
<div>
    <img />
</div> 
```

Use this css:

```
div{
    height: 100px;
    width: 80px;
    overflow: hidden;
}

img{
    min-height: 100%;
    min-width: 100%;
} 
```

Or, you could set the image as a background image and use `background-size: cover`

# regex - 了解具有自动依赖关系的 Makefile：“sed”部分的问题

> ID：15866231
> 
> 赞同：1
> 
> 时间：2013-04-07T18:37:55.490
> 
> 标签：regex, sed, makefile

我已按照[本教程](http://scottmcpeak.com/autodepend/autodepend.html)进行操作。它解释了制作依赖关系的 Makefile。我制作了以下 Makefile，它根据以下目录结构工作：

```
folder--|Makefile
    |src----|(all .c and .h files here)
    |obj----|(all objects file are made here)
    |bin----|(target is made here) 
```

生成文件是：

```
TARGET  =   exec

CC      =   gcc
CFLAGS  =   -g -I.
LINKER  =   gcc -o
LFLAGS  =   -I. -lm -lpthread

BINDIR  =   bin
OBJDIR  =   obj
SRCDIR  =   src
INTERFACE = interface
STD =   -std=c99

PROGRAMSOURCES  :=  $(wildcard $(SRCDIR)/*.c)
PROGRAMINTERFACE:=  $(wildcard $(INTERFACE)/*.h)
OBJECTS     :=  $(PROGRAMSOURCES:$(SRCDIR)/%.c=$(OBJDIR)/%.o)

$(BINDIR)/$(TARGET) :   $(OBJECTS)
    $(LINKER) $@ $(LFLAGS) $(OBJECTS) $(STD)

#pull the dependencies to the .o files
-include $(OBJECTS:.o=.d)

#the -o $@ says to put the output of the compilation in the file named on the left side of the :.
#the $< is the first item in the dependencies list. Basically the name of the .c file which is to be compiled.
$(OBJECTS)      :   $(OBJDIR)/%.o :$(SRCDIR)/%.c
    $(CC) $(CFLAGS) -c $< -o $@ $(STD)
    $(CC) $(CFLAGS) -MM $< > $*.d
    @mv -f $*.d $*.d.tmp             #changes file name
    @sed -e 's|.*:|$*.o:|' < $*.d.tmp > $*.d    #Unable to understand
    @sed -e 's/.*://' -e 's/\\$$//' < $*.d.tmp | fmt -1 | \
     sed -e 's/^ *//' -e 's/$$/:/' >> $*.d      #Unable to understand
    @rm -f $*.d.tmp

.PHONY  :   run
run     :
    ./$(BINDIR)/$(TARGET) ${TYPE} ${INP_FILE}

print:
    @echo $(OBJECTS) 
```

我知道它正在尝试预处理临时文件以生成自动依赖项。我无法理解的是它是如何完成的。这是我想要解释的两行：

```
@sed -e 's|.*:|$*.o:|' < $*.d.tmp > $*.d    #Unable to understand
@sed -e 's/.*://' -e 's/\\$$//' < $*.d.tmp | fmt -1 | \
 sed -e 's/^ *//' -e 's/$$/:/' >> $*.d      #Unable to understand 
```

我以前从未使用`sed`过，所以我遇到了问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:31:46.073

假设您是从 构建`obj/foo.o`的`src/foo.c`，因此该文件`foo.d.tmp`包含：

```
foo.o: src/foo.c src/foo.h src/bar.h 
```

现在第一个`sed`声明：

```
@sed -e 's|.*:|$*.o:|' < $*.d.tmp > $*.d 
```

“读取`foo.d.tmp`，将所有内容取一个冒号并将其更改为 'foo.o'，然后将结果写入`foo.d`.” 所以现在`foo.d`包含：

```
foo.o: src/foo.c src/foo.h src/bar.h 
```

（在这种情况下没有变化。）现在下一个命令：

```
@sed -e 's/.*://' -e 's/\\$$//' < $*.d.tmp | fmt -1 | sed -e 's/^ *//' -e 's/$$/:/' >> $*.d 
```

“阅读`foo.d.tmp`，删除所有（包括）冒号，`\`如果有一个则删除尾随。获取结果并将每个单词（即每个先决条件）放在自己的行中。然后对于每一行，删除前导空格，放入最后一个冒号，并将结果附加到`foo.d`." 所以现在`foo.d`包含：

```
foo.o: src/foo.c src/foo.h src/bar.h
src/foo.c:
src/foo.h:
src/bar.h: 
```

这个想法是为每个先决条件创建一个空规则，这样如果代码发生了变化并且某个先决条件不再需要——也不再存在——但它仍然列在 old`foo.d`中，Make 不会因为出现而恐慌无法构建它。

# sql-server - 显示最大租用数量列表

> ID：15866233
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:37:59.153
> 
> 标签：sql-server

嗨，伙计们有一个问题，希望您能帮我解决这个问题

sql服务器

```
CAR_SERIAL_NO     MODEL                          MAKE                           
---------------- ------------------------------ --------------
1234              Turbo                          Porche                                
5678              Zafera                         Opel                                 
9012              Crawn                          Toyota                                   
3456              M5                             Bmw                                            
7890              Cabrio                         Bmw  

CAR_REGSTRATE_NO CAR_SERIAL_NO  
---------------- -------------
XV98CR               1234                          
CXER73               5678                     
098X44               9012                      
89EE43               3456                     
09KK33               7890   

CONTRACT_NO   CAR_REGSTRATE_NO   CLIENT_ID      START      END
------------- ----- -----------  --- ------  ----------- -----------
2344              XV98CR         45623        01-DEC-02  20-FEB-03                 
2335              CXER73         23344        12-OCT-02  12-DEC-03                  
3333              098X44         22442        10-OCT-02  15-OCT-03                 
5555              89EE43         77774        10-FEB-13  15-FEB-03                
6666              09KK33         33223        22-JUN-12  10-JAN-03 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:02:52.780

由于您没有列出所需的结果，因此我做出了最好的猜测。如果你需要不同的东西，你必须编辑你的问题并添加你想要的输出。

无论如何，这可能有效：

```
with HireDetails as
(
  select CAR_REGSTRATE_NO
    , Hires = count(1)
    , HireDays = sum(datediff(dd, START, [END]))
  from Hire
  group by CAR_REGSTRATE_NO
)
select c.MAKE
  , c.Model
  , c.CAR_SERIAL_NO
  , r.CAR_REGSTRATE_NO
  , hd.HireDays
  , hd.Hires
from Registration r
  inner join Car c on r.CAR_SERIAL_NO = c.CAR_SERIAL_NO
  left join HireDetails hd on r.CAR_REGSTRATE_NO = hd.CAR_REGSTRATE_NO
order by hd.HireDays desc 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/39c71/6)。你会注意到我更改了一些日期，`START`日期比`END`日期大十年。同样，如果这不正确，您需要使用更多详细信息更新您的问题。

我汇总了租用详细信息，因为即使您的示例数据中存在这种情况，也不能合理地假设汽车只会租用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:44:54.287

选择所有模型，与车辆交叉连接并与租金交叉连接，使用计数（*）按模型分组 - 让我们将此子查询表称为 T。有了这个，您可以要求包含计数的列上的最大值并过滤 T 以仅显示最大值。

# mysql - 尽管设置了密码，但 MySQL 允许无密码连接

> ID：15866237
> 
> 赞同：10
> 
> 时间：2013-04-07T18:38:33.327
> 
> 标签：mysql, passwords

我正在设置一个 MySQL 服务器（实际上是一个 Percona 服务器，但这不重要）并且我正在为 root 用户设置密码。最后，我有这个：

```
mysql> select host, user, password from user;
+-----------+------------------+-------------------------------------------+
| host      | user             | password                                  |
+-----------+------------------+-------------------------------------------+
| localhost | root             | *huge string here, no kidding             |
| localhost | debian-sys-maint | *another huge string here                 |
+-----------+------------------+-------------------------------------------+
2 rows in set (0.00 sec) 
```

我认为这不应该允许 root 用户在没有密码的情况下进行连接。但是，如果我转到命令行，我可以连接`mysql -u root`或仅`mysql`. 如果我这样做`mysql -u root -p`并按回车键输入密码，那么我会得到`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO).`

谁能向我解释如何确保用户只能使用密码连接？

编辑：如果相关，我设置密码`SET PASSWORD FOR 'root'@'localhost' = PASSWORD('somethinghere');`

编辑： 的输出`show grants`，它表明我使用密码登录但我没有。

```
mysql> show grants;
+----------------------------------------------------------------------------------------------------------------------------------------+
| Grants for root@localhost                                                                                                              |
+----------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD '*huge string here, no kidding' WITH GRANT OPTION |
| GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION                                                                           |
+----------------------------------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T09:18:29.497

掌心。原来 /root 上有一个带有用户名和密码的 .my.cnf，因此只有`mysql`在使用 root 帐户时才能登录（这就是我正在使用的）。它是由厨师食谱创建的（percona 是通过厨师安装的），我不知道。

提示是查看`show grants`. 即使我没有输入密码它仍然说我输入了一个，所以一定有一个地方！

# orchardcms - 多个 Orchard CMS 博客自动路由

> ID：15866244
> 
> 赞同：0
> 
> 时间：2013-04-07T18:39:17.033
> 
> 标签：orchardcms, orchardcms-1.6

假设我有 2 个博客：BlogOne 和 BlogTwo。我希望自动路由与博客名称的文本相同：mysite.com./blogone/article... 或 mysite.com/blogtwo/article...

如何在自动路由设置中做到这一点？我当前的设置是硬编码的：blogOne/{Content.Slug}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:04:52.187

尝试`{Content.Container.Slug}/{Content.Slug}`

# ios - 如何按特定顺序将项目添加到 UITableView？

> ID：15866256
> 
> 赞同：0
> 
> 时间：2013-04-07T18:40:18.030
> 
> 标签：ios, uitableview

我正在制作一个应用程序，它在 UITableView 中有一个项目列表，它从数组中获取其数据。这些项目很好地加载到列表中，但是它们的排序方式与我在 loadAnnotations 方法中的排序方式不同（请继续阅读）。

下面是加载注释的代码（这是我在列表中显示的内容），以及将 UITable 中的单元格文本设置为注释名称的代码。

一切都很好地加载到我的列表中，但顺序是随机的。有任何想法吗？

```
-(void) loadOutAnnotations
{

    CLLocationCoordinate2D workingCoordinate;

    //***********HOTELS**************************

    workingCoordinate.latitude = 40.763856;
    workingCoordinate.longitude = -73.973034;
    iCodeBlogAnnotation *hotel1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 1"];
    [hotel1 setSubtitle:@"This is Hotel #1"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel1];

    workingCoordinate.latitude = 50.763856;
    workingCoordinate.longitude = -83.973034;
    iCodeBlogAnnotation *hotel2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel2 setTitle:@"Hotel 2"];
    [hotel2 setSubtitle:@"This is Hotel #2"];
    [hotel2 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel2];

    workingCoordinate.latitude = 60.763856;
    workingCoordinate.longitude = -93.973034;
    iCodeBlogAnnotation *hotel3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel3 setTitle:@"Hotel 3"];
    [hotel3 setSubtitle:@"This is Hotel #3"];
    [hotel3 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel3];

    workingCoordinate.latitude = 10.763856;
    workingCoordinate.longitude = -23.973034;
    iCodeBlogAnnotation *hotel4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel4 setTitle:@"Hotel 4"];
    [hotel4 setSubtitle:@"This is Hotel #4"];
    [hotel4 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel4];

    workingCoordinate.latitude = 30.763856;
    workingCoordinate.longitude = -43.973034;
    iCodeBlogAnnotation *hotel5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel5 setTitle:@"Hotel 5"];
    [hotel5 setSubtitle:@"This is Hotel #5"];
    [hotel5 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel5];

    // *****************AERIALS*****************************

    workingCoordinate.latitude = 25.763856;
    workingCoordinate.longitude = -15.973034;
    iCodeBlogAnnotation *aerial1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [aerial1 setTitle:@"Aerial 1"];
    [aerial1 setSubtitle:@"This is Aerial #1"];
    [aerial1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial1];

    workingCoordinate.latitude = 35.763856;
    workingCoordinate.longitude = -25.973034;
    iCodeBlogAnnotation *aerial2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [aerial2 setTitle:@"Aerial 2"];
    [aerial2 setSubtitle:@"This is Aerial #2"];
    [aerial2 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial2];

    workingCoordinate.latitude = 45.763856;
    workingCoordinate.longitude = -35.973034;
    iCodeBlogAnnotation *aerial3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [aerial3 setTitle:@"Aerial 3"];
    [aerial3 setSubtitle:@"This is Aerial #3"];
    [aerial3 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial3];

    workingCoordinate.latitude = 55.763856;
    workingCoordinate.longitude = -45.973034;
    iCodeBlogAnnotation *aerial4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [aerial4 setTitle:@"Aerial 4"];
    [aerial4 setSubtitle:@"This is Aerial #4"];
    [aerial4 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial4];

    workingCoordinate.latitude = 65.763856;
    workingCoordinate.longitude = -55.973034;
    iCodeBlogAnnotation *aerial5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [aerial5 setTitle:@"Aerial 5"];
    [aerial5 setSubtitle:@"This is Aerial #5"];
    [aerial5 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial5];

     // *****************STREETS*****************************

    workingCoordinate.latitude = 27.763856;
    workingCoordinate.longitude = -37.973034;
    iCodeBlogAnnotation *street1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [street1 setTitle:@"Street 1"];
    [street1 setSubtitle:@"This is Street #1"];
    [street1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street1];

    workingCoordinate.latitude = 37.763856;
    workingCoordinate.longitude = -47.973034;
    iCodeBlogAnnotation *street2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [street2 setTitle:@"Street 2"];
    [street2 setSubtitle:@"This is Street #2"];
    [street2 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street2];

    workingCoordinate.latitude = 57.763856;
    workingCoordinate.longitude = -67.973034;
    iCodeBlogAnnotation *street3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [street3 setTitle:@"Street 3"];
    [street3 setSubtitle:@"This is Street #3"];
    [street3 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street3];

    workingCoordinate.latitude = 77.763856;
    workingCoordinate.longitude = -87.973034;
    iCodeBlogAnnotation *street4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [street4 setTitle:@"Street 4"];
    [street4 setSubtitle:@"This is Street #4"];
    [street4 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street4];

    workingCoordinate.latitude = 87.763856;
    workingCoordinate.longitude = -97.973034;
    iCodeBlogAnnotation *street5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [street5 setTitle:@"Street 5"];
    [street5 setSubtitle:@"This is Street #5"];
    [street5 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street5];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:CellIdentifier]autorelease];

    }

    // here we are creating an array object BUT it is empty (it has no object in it)
    NSMutableArray *annotations = [[NSMutableArray alloc] init];

    if(indexPath.section == 0)
    {
        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeHotels)
            {
                 // here is the line where we actually add objects to the array
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {

        cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];

        }
        else
        {
        cell.textLabel.text = @"Empty";
        }

    }

    else if (indexPath.section == 1)
    {

        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeAerialShots)
            {
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {

            cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];

        }
        else
        {
            cell.textLabel.text = @"Empty";
        }

    }

    else if (indexPath.section == 2)
    {

        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeStreets)
            {
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {

            cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];

        }
        else
        {
            cell.textLabel.text = @"Empty";
        }

    }

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:56:27.403

我认为使用 sortedArrayUsingDescriptors: 或其他 NSArray 排序方法之一在 cellForRowAtIndexPath 之外创建数组会更好。

```
NSSortDescriptor *sorter = [NSSortDescriptor descriptorWithKey:@"aKey" ascending:YES];
NSArray *sortedArray = [[mapView annotations] sortedArrayUsingDescriptors:@[sorter]]; 
```

使用您需要的任何键代替@“aKey”来获得您想要的排序，然后使用 sortedArray，以通常的方式填充表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:56:38.283

为每个部分创建一个`MapView`：
hotelsMap、airersMap、streetsMap（或为每个部分保存的大小为#sections 的数组`MapView`）

将您的注释添加到适当的位置/部分。

数组实现`tableView:cellForRowAtIndexPath:`应如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault)
                                      reuseIdentifier:CellIdentifier];
    }

    //_maps is a mutable array of MapView's
    MapView* map = (indexPath.section < [_maps count] ? _maps[indexPath.section] : nil);
    NSString* text = (map && indexPath.row < [[map annotations] count] ? [[[map annotations]  objectAtIndex:indexPath.row] title] : @"Empty");
    cell.textLabel.text = text;

    return cell;
} 
```

# c++ - 模板类多重定义

> ID：15866258
> 
> 赞同：0
> 
> 时间：2013-04-07T18:40:30.940
> 
> 标签：c++, templates

我有一个简单的哈希表模板，

```
template <class K, class V, long H(K)>
class HashTableAbs{/* .... */}
//where K is key type, V is value type, H gives hash code for K value 
```

和简单的继承者类

```
template <class K, class V, long H(K)>
class HashTable:public HashTableAbs<K, V, H> {}; 
```

我想用我的默认哈希函数专门为字符串模板

```
template <class V> 
class HashTable<std::string, V, strSimpleHash>:public HashTableAbs<std::string, V, strSimpleHash> {};
//where strSimpleHash is long strSimpleHash(std::string) 
```

但是当我试图编译这个编译器时，写这个

```
test.o: In function `strSimpleHash(std::string)':
test.cpp:(.text+0x0): multiple definition of `strSimpleHash(std::string)'
/tmp/main-i7yPhc.o:main.cc:(.text+0x0): first defined here
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

（测试包括定义了 HashTable 的 hashtable.h） strSimpleHash 仅在 hashtable.h 中定义

有出路吗？PS对不起我的写作错误。非我母语的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:45:26.970

此错误与模板无关。它是一个函数的多重定义。我猜你已经`strSimpleHash`在没有使用的情况下在标题中定义了`inline`（你没有在定义这个函数的地方添加代码）。

您在评论中询问了一种使用方式，`HashTable`如下所示：

```
HashTable<std::string, int> // (ie, without passing the 3rd argument) 
```

这是直接不可能的。尽管您可以为模板参数指定默认值（但不能在专业化中），例如：

```
template<int n = 0> struct dummy {};
dummy<> obj; 
```

在您的情况下，您不能这样做，因为您的模板的一般情况不只接受 type 的功能`long(std::string)`。但是，可以通过为每种可能的类型分配默认函数来解决此问题。请注意，您应该使用指向函数的指针，因为代码更清晰一些：

```
// A C++03-style template typedef
template<typename K>
struct HashFunc
{
    typedef long (*type)(K);
};

// The default value. Defined only for some cases,
// compile error for not handled cases
template<typename K>
struct DefaultHash;

template<>
struct DefaultHash<std::string>
{
    // Static constant pointer-to-function, pointing to the hash func.
    static constexpr HashFunc<std::string>::type func = &strSimpleHash;
};

// The HashTable class
template <class K, class V, typename HashFunc<K>::type H = DefaultHash<K>::func>
class HashTable
{
};

template <class V> 
class HashTable<std::string, V, strSimpleHash>
{
}; 
```

然后你可以随意使用它，省略第三个模板参数。请注意，此代码[在 gcc 上编译](http://liveworkspace.org/code/2pJQWv%240)，而[不是在 clang](http://liveworkspace.org/code/4sq88k%240)上编译。*（实际上，我不确定哪个编译器是正确的......）*

# html - 在三列中固定标题

> ID：15866259
> 
> 赞同：0
> 
> 时间：2013-04-07T18:40:46.893
> 
> 标签：html, css, positioning

我有 3 个带有文本[链接](http://store.picbg.net/pubpic/C4/36/81a91ea23ecfc436.png) 的 comumns 如果它们具有相同数量的文本，则 3 列保持完美的顺序。当我在其中一列中写少量文本时，我得到以下结果[链接](http://store.picbg.net/pubpic/CE/BD/bd39d29c93d4cebd.png)

我希望图标和文本保持固定，无论下面有多少文本。我怎样才能做到这一点 ？

这是我的代码：

HTML

```
 <ul class="columns"> 

        <li class="clearfix"> 

            <span><img src="icon path" /><p>heading</p></span>

        <p>text below</p>

        </li> 

 </ul> 
```

CSS：

```
.columns li{display: inline-block; width: 250px; margin-left: 100px;} 

.columns li:first-child{margin: 0;} 

.columns li img{float: left;} 

 .columns li span p{float: left; margin: 30px 0 0 10px; width: 150px; height: 30px; line-height: 1;}

.columns li  p{margin-top: 20px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:46:07.450

采用

```
.columns {
    vertical-align: top;
} 
```

# jquery - jQuery检查输入是否被取消选择

> ID：15866260
> 
> 赞同：-2
> 
> 时间：2013-04-07T18:40:57.457
> 
> 标签：jquery, input

所以，我有一个小表单输入框，`<input type ="text" />`我似乎不知道如何判断它什么时候没有被选中。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:42:26.093

对于常规输入，也许以下是您所追求的 - [jsFiddle here](http://jsfiddle.net/nwMDt/)。

```
$(document).ready(function(){
  $('input').focusout(function(){
    alert('left input!');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:44:47.053

“选定”可能意味着一些事情。

1.  焦点（用户是否选择了它，即当他们输入时它会改变）

    `var isFocussed = myInput.is(':focus');`

2.  复选框被选中，在这种情况下，请参阅 zenith 的答案

3.  带有选定文本的文本框，在这种情况下看这个问题：[jQuery - How to get selected text from textarea/input?](https://stackoverflow.com/q/6091679/1180785)

# javascript - jquery 不选择所选 div 的子元素

> ID：15866261
> 
> 赞同：0
> 
> 时间：2013-04-07T18:40:58.720
> 
> 标签：javascript, jquery

我想让用户可以选择前 2 轮或 4 轮，然后根据 2/4 轮有一个输入类型的文本字段，他们必须在其中写下门票的数量，然后根据所选事件它 jquery 计算票的数量和汽车的价格，并将它们写入一个带有变量 selected_event 的 div （*价格的每个 div 都有自己的 id 和 div 的名称*）`$('#' + selected_event).html("€ " + totale + ",00");` 我写的 jquery 代码没有！也许我可以选择与输入类型 radio 位于同一父 div 中的输入字段，然后根据该输入类型文本更改价格 .cange() 但我在选择它时遇到问题，我尝试使用 .child() 。 . 父母（）..

HTML：

```
<div class="more_car_info">
                <div class="small_car_image">
                    <img src="http://www.domain/slide1.jpg" style="width:101px;height:66px;">
            </div>
            <div class="car_ticket_anzahl_und_prise">
                <p style="float:left;"><span style="margin-right:45px;"><input value="2runden" alt="1" name="anzahl_ticket" type="radio" style="width: 20px !important;margin:0;height:25px;"> 2 Runden </span><span style="margin-right:45px;">199,00€&lt;/span> Anzahl Ticket: <input type="text" class="anzahl_tickets" name="Nürburgring" style="width:20px !important;margin-bottom: 4px !important;"></p> 
                <p style="float:left;"><span style="margin-right:45px;"><input value="4runden" alt="2" name="anzahl_ticket" type="radio" style="width: 20px !important;margin:0;height:25px;"> 4 Runden </span><span style="margin-right:45px;">359,00€&lt;/span> Anzahl Ticket: <input type="text" class="anzahl_tickets" name="Nürburgring" style="width:20px !important;margin-bottom: 4px !important;"></p>
            </div>
        </div> 
```

jQuery：

```
 if($('input[name=anzahl_ticket]:checked').val() == '2runden' ) {
    $('.anzahl_tickets').change(function() {
            var selected_event = $('.anzahl_tickets').attr("name");     
            var nr1 = $('.anzahl_tickets').val();
            var nr2 = +nr1;
            var car = 199;
            var totale = (nr2 * car);
            alert(selected_event);
            $('#' + selected_event).html("€ " + totale + ",00"); //gesamtpreis
        });
}
else if($('input[name=anzahl_ticket]:checked').val() == '4runden'){
    $('.anzahl_tickets').change(function() {
        var selected_event = $('.anzahl_tickets').attr("name");
        var nr1 = $('.anzahl_tickets').val();
        var nr2 = +nr1;
        var car = 366;
        var totale = (nr2 * car);
        $('#' + selected_event).html("€ " + totale + ",00"); //gesamtpreis
        });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:47:28.327

尝试在处理程序内部交换`$('.anszhl_tickets)`选择器，`$(this)`例如：

```
 var selected_event = $(this).attr("name");
    var nr1 = $(this).val(); 
```

如果您的页面上有多个带有 class 的元素，那么`.anszhl_tickets`您的代码将不会按照您的想法执行，因为`$('.anszhl_tickets')`它将匹配多个元素。

# xcode - 获取生产 APNS 令牌

> ID：15866262
> 
> 赞同：5
> 
> 时间：2013-04-07T18:41:04.093
> 
> 标签：xcode, cordova, apple-push-notifications, devicetoken

在开发中一切正常：

*   我的应用程序（使用 Phonegap 构建）将设备令牌发送到服务器
*   我的服务器将通知发送到 Apple 服务器
*   我在 iPhone 上收到通知

但是，当我切换到生产环境（启用推送通知并为生产创建新的 SSL 证书）时，我不断从[Rapns](https://github.com/ileitch/rapns)（安装在我的推送通知服务器上）收到“(8) Invalid token”。

我已阅读此消息可能是因为我在生产中使用了开发设备令牌（即我的服务器使用*生产证书*，但应用程序正在开发中运行并将*开发设备令牌*发送到服务器）。

**如何在生产模式下运行应用程序，以便获得有效的生产设备令牌**？

我认为我应该使用 Ad Hoc Distribution Provisioning 配置文件，但即使我在构建设置中正确更改了“代码签名身份”，**我仍然得到与开发相同的令牌**！而这显然是行不通的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:15:18.313

通过创建**存档**（而不是运行）并使用 Ad Hoc Distribution Provisioning 配置文件对其进行签名来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:39:00.387

您可能必须删除设备上已安装的应用程序 - 进行 xcode 清理（为了更安全） - 重新安装应用程序。

# javascript - webGL 环境照明，对象上没有纹理

> ID：15866264
> 
> 赞同：1
> 
> 时间：2013-04-07T18:41:18.040
> 
> 标签：javascript, webgl, shader, lighting

我一直在关注[这些很好的教程](http://learningwebgl.com/blog/?page_id=1217)，但我似乎无法弄清楚如何照亮没有纹理的对象。我的意思是教程中给出的着色器不允许对象被吸引到没有纹理。我无法解释这一点，但如果有人知道 webGL 照明如何工作，我认为在这里倾倒大量代码不会有帮助。

你能举一个在一个简单的金字塔对象上使用它的例子吗？

我确实有多边形中所有三角形的法线，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:22:44.057

当您不想使用纹理时，最简单的方法就是使用 1x1 像素的白色纹理。

```
tex = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, tex);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,
              new Uint8Array([255, 255, 255, 255])); 
```

否则你需要一个不同的着色器，一个不带纹理的着色器。这意味着您的代码通过代码管理不同的路径变得更加复杂。但是，如果您想走那条路，请在着色器中查找`texture2D`并用颜色替换它。例如，如果代码是

```
gl_FragCoord = texture2D(u_samplers, v_texcoord); 
```

将其更改为

```
gl_FragCoord = vec4(1,0,0,1);  // just use red 
```

或者如果您希望能够设置它

```
uniform vec4 u_color;

gl_FragCoord = u_color;  // get color from uniform 
```

您现在可以使用

```
// at init time
colorLocation = gl.getUniformLocation(program, "u_color");

// at draw time
gl.uniform4fv(colorLocation, [1, 0, 0, 1]);  // set color to red 
```

# c# - 在asp.net C#中带有向上和向下箭头的时间选择器

> ID：15866265
> 
> 赞同：0
> 
> 时间：2013-04-07T18:41:28.740
> 
> 标签：c#, jquery, asp.net

需要一个带有上下箭头键的时间选择器

当用户单击向上箭头时，整个时间将增加 15 分钟，而不是像小时或分钟这样的单独时间

任何人都可以给出任何想法或参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:33:33.000

查看 jQuery-UI 微调器小部件：[jQuery-UI Spinner](http://jqueryui.com/spinner/#time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:43:57.817

在 html5 中，您可以使用普通文本字段集属性来输入类型：谷歌浏览器支持的数字我不知道其他浏览器

```
<input id="user_lic" type="number" min="5" max="60" step="15" value ="5"/> 
```

# c# - 无法托管 WCF 服务

> ID：15866268
> 
> 赞同：0
> 
> 时间：2013-04-07T18:41:36.760
> 
> 标签：c#, .net, wcf, binding, duplex

我有带有 wsDualHttpBinding 的 WCF 服务。如何在托管应用程序中托管它？

```
Uri baseAddress = new Uri("http://localhost:51160");

using (ServiceHost host = new ServiceHost(typeof(FileServer), baseAddress))
{
    host.Open();
    Console.ReadLine();
    host.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:14:22.643

解决方案是将端点添加到我的服务中：

```
Uri baseAddress = new Uri("http://localhost:51160");
WSDualHttpBinding binding = new WSDualHttpBinding();
using (ServiceHost host = new ServiceHost(typeof(FileServer), baseAddress))
{
    host.AddServiceEndpoint(typeof(IFileServer), binding, "http://localhost:51160/FileServer");

    ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
    smb.HttpGetEnabled = true;
    host.Description.Behaviors.Add(smb);

    host.Open();
    Console.ReadLine();
    host.Close();
} 
```

在服务器端也是一样的（在配置中）

```
<services>
  <service name="AK3_Server.FileServer" behaviorConfiguration="FileServerBehavior">
    <endpoint address="http://localhost:51160/FileServer" binding="wsDualHttpBinding"
      bindingConfiguration="" contract="AK3_Server.IFileServer" />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="FileServerBehavior">          
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>          
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

# java - 错误“java.lang.IllegalArgumentException：im == null！” 同时将字节数组转换为图像文件？

> ID：15866269
> 
> 赞同：0
> 
> 时间：2013-04-07T18:41:46.297
> 
> 标签：java, image-processing, javax.imageio, steganography

我想将字节数组转换为图像文件。这是我的代码的一部分

```
 BufferedImage image = user_space(getImage(image_path(path,name,"jpg")));

            System.out.println("Image:"+image);
           //Image : BufferedImage@12d263f: type = 5 ColorModel: #pixelBits = 24 numComponents = 3 color space = java.awt.color.ICC_ColorSpace@12a0f6c transparency = 1 has alpha = false isAlphaPre = false ByteInterleavedRaster: width = 466 height = 336 #numData Elements 3 dataOff[0] = 2
            decode = decode_text(get_byte_data(image)); 
            try {
                System.out.println("length :"+decode.length);
                //length :- 73
                BufferedImage bImageFromConvert = ImageIO.read(new ByteArrayInputStream(decode));
                System.out.println(bImageFromConvert);          
                ImageIO.write(bImageFromConvert, "jpg", new File(
                        "D:/eeraj/new-darksouls.jpg"));
                }

     private byte[] get_byte_data(BufferedImage image)
       {
        WritableRaster raster   = image.getRaster();
        DataBufferByte buffer = (DataBufferByte)raster.getDataBuffer();
        return buffer.getData();
       }

     private byte[] decode_text(byte[] image)
        {
        int length = 0;
        int offset  = 24;
        //loop through 32 bytes of data to determine text length    
        for(int i=24; i<32; ++i) //i=24 will also work, as only the 4th byte   contains real data
        {
            length = (length << 1) | (image[i] & 1);
        }      
        byte[] result = new byte[length];                
        //loop through each byte of text
        for(int b=0; b<result.length; ++b )
        {

            //loop through each bit within a byte of text
            for(int i=0; i<8; ++i, ++offset)
            {
                //assign bit: [(new byte value) << 1] OR [(text byte) AND 1]
                result[b] = (byte)((result[b] << 1) | (image[offset] & 1));
            }
        }
        return result;
    } 
```

我收到一个错误

```
 java.lang.IllegalArgumentException: im == null!
                  at javax.imageio.ImageIO.write(Unknown Source)
                  at javax.imageio.ImageIO.write(Unknown Source) 
```

ImageIO.read 方法返回 null。当我稍后尝试编写图像时，这会导致异常。

我在谷歌上搜索以找到解决此问题的方法，但除了修改图像标题信息外，我没有发现任何具体的问题。

请让我知道我该如何解决这个问题？

# c# - 如何通过单元测试检查属性标记为在 ORM 模型中计算？

> ID：15866272
> 
> 赞同：0
> 
> 时间：2013-04-07T18:41:54.597
> 
> 标签：c#, entity-framework, unit-testing, entity-framework-5

我是由 Entity Framework 5.0 (C# 4.5) 创建的 ORM - 首先是数据库。

我标记为已计算的实体的某些属性（绑定到具有默认值的列）。

如何通过单元测试检查属性标记为在 ORM 模型中计算？

注意：在 ORM 中紧急重建实体后测试控制计算属性的需要。

*.edmx 中的实体描述：

```
 <EntityType Name="Users">
      <Key>
        <PropertyRef Name="Identifier" />
      </Key>
      <Property Name="Identifier" Type="bigint" Nullable="false" 
                StoreGeneratedPattern="Identity" />
      <Property Name="Name" Type="nvarchar" Nullable="false" MaxLength="32" />
      <Property Name="PasswordHashCode1" Type="int" Nullable="false" />
      <Property Name="PasswordHashCode2" Type="int" Nullable="false" />
      <Property Name="CreateDateTime" Type="datetime2" Nullable="false" 
                StoreGeneratedPattern="Computed" />
    </EntityType> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:21:10.210

我不确定这是否适用于您的情况 -**但如果您想`metadata`在运行时阅读 -`EntityFramework model`**您可以尝试我之前的帖子中提到的一些事情（并由 OP 进一步改进）...

[如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)

这谈到了`DbContext`（你可以从任何方面使用，所以这也适用于你） - 但具体来说，只是得到`ObjectContext`- 并从这一点继续......

```
var container = objectContext.MetadataWorkspace.GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace);

// and just to get you started... 
var baseset = objectContext
    .MetadataWorkspace
    .GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace)
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "MyBaseClass");

var elementType = objectContext
    .MetadataWorkspace
    .GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace)
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "MyBaseClass")
    .ElementType;

EdmMember member = elementType.Members[2]; // e.g. 3rd property
Facet item;
if (member.TypeUsage.Facets.TryGetValue("StoreGeneratedPattern", false, out item))
{
    var value = ((StoreGeneratedPattern)item.Value) == StoreGeneratedPattern.Computed;
} 
```

你得到了[MetadataWorkspace](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.metadataworkspace(v=vs.100).aspx)，你可以从那里开始工作。

我们设法提取了导航属性等 - 但每个属性可能还有一些其他信息 - 比如`calculated`. 我没有尝试过，但它可能会有所帮助。

此外，我还没有首先在模型或数据库上尝试过这个 - 但我不明白为什么它不应该工作 - 基础设施是相同的（EF，不是代码优先）。

**编辑：我添加了一个更具体的代码来帮助您入门**（请参阅编辑的代码）。那种工作（让你存储“方面”的位置），它不是现成的代码，需要更多的工作。

# python - group_by 语句、sqlalchemy 和 postgresql 的问题

> ID：15866273
> 
> 赞同：3
> 
> 时间：2013-04-07T18:41:58.733
> 
> 标签：python, postgresql, sqlalchemy

我对以下查询有疑问；这本身可以正常工作，但它按秒分组，我想截断秒数并按分钟分组。我已经尝试过 date_trunc、extract 等，但我没有任何运气。当引擎是 sqlite 时，extract('minute') 工作正常，但不适用于 postgresql。

谁能指出我正确的方向？

PostgreSQL 版本：x86_64-redhat-linux-gnu 上的 PostgreSQL 8.1.23

```
Column('id', Integer, primary_key=True),
        Column('date', TIMESTAMP),
        Column('src', String),
        Column('dst', String),
        Column('len', String),
        Column('sport', String),
        Column('dport', String),
        Column('method', String),
        Column('host', String),
        Column('useragent', String),
        Column('statusline', String),
        Column('location', String),
        Column('server', String),
        Column('load', String),

now = datetime.datetime.now()                
DD = now - datetime.timedelta(minutes=60)    
DD = DD.strftime('%Y-%m-%d %H:%M:%S')        
query = session.query(HTTP.date,HTTP.statusline, func.count(HTTP.statusline).                                                                           
                label('count')).filter(HTTP.statusline.like('%'+status+'%'), HTTP.date>=(DD)).group_by(HTTP.date, HTTP.statusline).order_by(asc(HTTP.date)).all() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:02:40.303

在您做*任何*其他事情之前，请考虑升级到当前版本的[**PostgreSQL 8.1**早已死去并被遗忘](http://www.postgresql.org/support/versioning/)。

不完全确定该符号，但随着[@Audrius 在评论中的](https://stackoverflow.com/questions/15866273/problems-with-group-by-statement-sqlalchemy-and-postgresql/15866538?noredirect=1#comment22585406_15866538)更新，它应该像这样工作：

```
query = session.query(
       date_trunc('min', http.date).label('date_minute')
      ,http.statusline
      ,func.count(http.statusline).label('count')
   ).filter(http.statusline.contains(status)
           ,http.date>=(DD)
   ).group_by('date_minute'
             ,http.statusline
   ).order_by(asc('date_minute')).all() 
```

基本上，使用in`date_trunc('min', http.date)`而不是`http.date`in和`SELECT`and 中的别名。`GROUP BY``ORDER BY`

顺便说一句：我发现`date`使用`timestamp`. 除此之外，我的建议是*永远不要*使用任何基本类型名称作为标识符。导致非常混乱的错误消息和其他难以调试的错误。

# matlab - 符号函数输入非符号参数

> ID：15866275
> 
> 赞同：1
> 
> 时间：2013-04-07T18:42:11.243
> 
> 标签：matlab, function, parameters

我需要定义一个返回符号矩阵（sym）的函数。它需要 4 个输入参数——2 个符号矩阵和 2 个整数。我怎么做？

这就是我试图做的-

```
%my function
function F = matrix(F, F4, i, j)

...

F=...;

end

%calling it in a different file

syms M1;
M1 = ...;

syms M2;
M2 = ...;

syms M3;
M3 = matrix(M1,M2,1,2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:23:15.170

我已经完成了这个简单的测试；

```
function L = test(A,B,c,d)
syms tmp1 tmp2

tmp1 = c;
tmp2 = d;

L = tmp1*A + tmp2*B;

end 
```

其中`A`和`B`已经是符号矩阵。

# android - Android Scrollview 中广告的对齐方式

> ID：15866276
> 
> 赞同：1
> 
> 时间：2013-04-07T18:42:12.257
> 
> 标签：android, scrollview, admob

我正在尝试在 Android 上创建一个带有广告的页面（使用 ad mob）。以下我正在使用的代码：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/adView_relative_layout" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Primary Screen sssssssss ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss sssssssssssssssssssssssssssssssss ssssssssssssssssssssssssssssssssssssssssss sssssssssssssssssssssssssssssssssssssssss ssssssssssssss s jkjkljlkjkljsjkjlkjskjkjkl jkljkljkl jkljlkj kljkljkl jkljlkjkljkl jkljlkjkljlkjlk jlkjlkjlkjlkjlkjlkj jkljlkjlkjlkjlkjlkjlkjlkjlk jlkjlkjlkjkljlkjlkj lkjlkjlkjklj kljlkjlkjlkjkljlkjlkjlkjlkjlkjlk lkjlkjlkjlkjlkj jlkjlkjlkjlkjlkjlkjlkjlkjlkjlkjlkj lkjlkjlk lkjlkjlknigpoihgpoj k lkjcfhkl jiuvlk jkjhu hiuhjlkjliijv kjgjhhgkjjhlkkjk"
                android:textSize="20sp" />

            <Button
                android:id="@+id/SwitchToSecond"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Switch to Second Screen"
                android:textSize="20sp" />
        </LinearLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/adView_relative_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" >

        <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            ads:adSize="BANNER"
            ads:adUnitId="@string/MY_AD_UNIT_ID"
            ads:loadAdOnCreate="true" />
    </RelativeLayout>

</RelativeLayout> 
```

但问题是广告出现在屏幕的顶部和底部（这就是我想要的）但它覆盖了广告部分文本顶部和底部的文本（即使我向上或向下滚动）。我无法看文字

请指导如何对齐文本和滚动视图，以便我可以看到所有文本以及广告视图。

在我的 Activity.java 代码下面找到：

```
package com.abc.testapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.*;
import android.view.*;
import android.content.Intent;
import com.google.ads.*;

public class HomeActivity extends Activity {
    /** Called when the activity is first created. */
    Button screen2Button=null;
    //private AdView adView;
     private AdView adView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_home);
        screen2Button=(Button)findViewById(R.id.SwitchToSecond);
        screen2Button.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){
            Intent myIntent=new Intent(v.getContext(),SecondScreen.class);
            startActivity(myIntent);
            }
        });
        String s1 = getResources().getString(R.string.MY_AD_UNIT_ID);
     // Create the adView
        adView = new AdView(this, AdSize.BANNER, s1);

        // Lookup your LinearLayout assuming it's been given
        // the attribute android:id="@+id/mainLayout"
        RelativeLayout layout = (RelativeLayout)findViewById(R.id.LinearLayout1);

        // Add the adView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }

    @Override
    public void onDestroy() {
      if (adView != null) {
        adView.destroy();
      }
      super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:53:32.300

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<com.google.ads.AdView
    android:id="@+id/adView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    ads:adSize="BANNER"
    ads:adUnitId="@string/MY_AD_UNIT_ID"
    ads:loadAdOnCreate="true" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/adView1"
    android:layout_above="@+id/adView2" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Primary Screen sssssssss ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss sssssssssssssssssssssssssssssssss ssssssssssssssssssssssssssssssssssssssssss sssssssssssssssssssssssssssssssssssssssss ssssssssssssss s jkjkljlkjkljsjkjlkjskjkjkl jkljkljkl jkljlkj kljkljkl jkljlkjkljkl jkljlkjkljlkjlk jlkjlkjlkjlkjlkjlkj jkljlkjlkjlkjlkjlkjlkjlkjlk jlkjlkjlkjkljlkjlkj lkjlkjlkjklj kljlkjlkjlkjkljlkjlkjlkjlkjlkjlk lkjlkjlkjlkjlkj jlkjlkjlkjlkjlkjlkjlkjlkjlkjlkjlkj lkjlkjlk lkjlkjlknigpoihgpoj k lkjcfhkl jiuvlk jkjhu hiuhjlkjliijv kjgjhhgkjjhlkkjk"
            android:textSize="20sp" />

        <Button
            android:id="@+id/SwitchToSecond"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Switch to Second Screen"
            android:textSize="20sp" />
    </LinearLayout>
</ScrollView>

<com.google.ads.AdView
    android:id="@+id/adView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    ads:adSize="BANNER"
    ads:adUnitId="@string/MY_AD_UNIT_ID"
    ads:loadAdOnCreate="true" /> 
```

编辑：我认为你应该尝试只使用线性布局，因为你想要一些非常线性的东西（广告，然后是 ScrollView，然后是广告）。我已经编辑了上面的 xml 以反映这一点。虽然它未经测试，所以你可能需要稍微调整一下。

编辑 3：在 ScrollView 上方添加了第二个 AdView，以满足顶部一个 AdView 和底部一个 AdView 的要求。改回了 RelativeLayout 以便一个 AdView 可以在顶部对齐，一个在底部对齐。

# vba - 如何将 powerpoint 幻灯片笔记导出到单个文本文件？

> ID：15866277
> 
> 赞同：1
> 
> 时间：2013-04-07T18:42:12.450
> 
> 标签：vba, powerpoint

通过一些研究，我在以下网站上发现了这个 VBA 代码：http: [//www.pptfaq.com/FAQ00481_Export_the_notes_text_of_a_presentation.htm](http://www.pptfaq.com/FAQ00481_Export_the_notes_text_of_a_presentation.htm)

```
Sub ExportNotesText()

Dim oSlides As Slides
Dim oSl As Slide
Dim oSh As Shape
Dim strNotesText As String
Dim strFileName As String
Dim intFileNum As Integer
Dim lngReturn As Long

' Get a filename to store the collected text
strFileName = InputBox("Enter the full path and name of file to extract notes text to", "Output file?")

' did user cancel?
If strFileName = "" Then
    Exit Sub
End If

' is the path valid?  crude but effective test:  try to create the file.
intFileNum = FreeFile()
On Error Resume Next
Open strFileName For Output As intFileNum
If Err.Number <> 0 Then     ' we have a problem
    MsgBox "Couldn't create the file: " & strFileName & vbCrLf _
        & "Please try again."
    Exit Sub
End If
Close #intFileNum  ' temporarily

' Get the notes text
Set oSlides = ActivePresentation.Slides
For Each oSl In oSlides
    For Each oSh In oSl.NotesPage.Shapes
    If oSh.PlaceholderFormat.Type = ppPlaceholderBody Then
        If oSh.HasTextFrame Then
            If oSh.TextFrame.HasText Then
                strNotesText = strNotesText & "Slide: " & CStr(oSl.SlideIndex) & vbCrLf _
                & oSh.TextFrame.TextRange.Text & vbCrLf & vbCrLf
            End If
        End If
    End If
    Next oSh
Next oSl

' now write the text to file
Open strFileName For Output As intFileNum
Print #intFileNum, strNotesText
Close #intFileNum

' show what we've done
lngReturn = Shell("NOTEPAD.EXE " & strFileName, vbNormalFocus)
End Sub 
```

它本质上是按照幻灯片的时间顺序将 Powerpoint 文件中的所有幻灯片注释导出到一个文本文件中。

无论如何要更改代码以将幻灯片注释输出到多个文本文件中？我的意思是，如果 powerpoint 文档中有 4 张幻灯片，我们将导出每张幻灯片的注释，如下所示：

*   slide1notes.txt
*   slide2notes.txt
*   slide3notes.txt
*   slide4notes.txt

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:30:16.567

我没有太多时间来做更多的事情，但是：

```
Sub TryThis()
' Write each slide's notes to a text file
' in same directory as presentation itself
' Each file is named NNNN_Notes_Slide_xxx
' where NNNN is the name of the presentation
'       xxx is the slide number

Dim oSl As Slide
Dim oSh As Shape
Dim strFileName As String
Dim strNotesText As String
Dim intFileNum As Integer

' Get the notes text
For Each oSl In ActivePresentation.Slides
    For Each oSh In oSl.NotesPage.Shapes
        If oSh.PlaceholderFormat.Type = ppPlaceholderBody Then
            If oSh.HasTextFrame Then
                If oSh.TextFrame.HasText Then
                    ' now write the text to file
                    strFileName = ActivePresentation.Path _
                        & "\" & ActivePresentation.Name & "_Notes_" _
                        & "Slide_" & CStr(oSl.SlideIndex) _
                        & ".TXT"
                    intFileNum = FreeFile()
                    Open strFileName For Output As intFileNum
                    Print #intFileNum, oSh.TextFrame.TextRange.Text
                    Close #intFileNum
                End If
            End If
        End If
    Next oSh
Next oSl

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:12:11.453

而且由于 Mac PPT/VBA 有 bug，这里有一个新的 Mac 版本。由于我在 PC 上执行此操作并且无法从 Mac 复制/粘贴，因此我没有在 Mac 上运行代码，但应该没问题：

```
Sub TryThis()
' Write each slide's notes to a text file
' in same directory as presentation itself
' Each file is named NNNN_Notes_Slide_xxx
' where NNNN is the name of the presentation
'       xxx is the slide number

Dim oSl As Slide
Dim oSh As Shape
Dim strFileName As String
Dim strNotesText As String
Dim intFileNum As Integer

' Since Mac PPT will toss non-fatal errors, just keep moving along:
On Error Resume Next

' Get the notes text
For Each oSl In ActivePresentation.Slides
    For Each oSh In oSl.NotesPage.Shapes

        ' Here's where the error will occur, if any:
        If oSh.PlaceholderFormat.Type = ppPlaceholderBody Then
        ' so deal with it if so:
        If Err.Number = 0 Then 
            If oSh.HasTextFrame Then
                If oSh.TextFrame.HasText Then
                    ' now write the text to file
                    strFileName = ActivePresentation.Path _
                        & "\" & ActivePresentation.Name & "_Notes_" _
                        & "Slide_" & CStr(oSl.SlideIndex) _
                        & ".TXT"
                    intFileNum = FreeFile()
                    Open strFileName For Output As intFileNum
                    Print #intFileNum, oSh.TextFrame.TextRange.Text
                    Close #intFileNum
                End If  ' HasText
            End If   ' HasTextFrame
        End If  ' Err.Number = 0
        End If  ' PlaceholderType test
    Next oSh
Next oSl

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T20:52:18.830

如果有人需要一个 txt 文件中的输出：

```
Sub TryThis()
' Write each slide's notes to a text file
' in same directory as presentation itself
' Each file is named NNNN_Notes_Slide_xxx
' where NNNN is the name of the presentation
'       xxx is the slide number

Dim oSl As Slide
Dim oSh As Shape
Dim strFileName As String
Dim strNotesText As String
Dim intFileNum As Integer
Dim strLine As String
Dim strData As String

' Since Mac PPT will toss non-fatal errors, just keep moving along:
On Error Resume Next

' Get the notes text
For Each oSl In ActivePresentation.Slides
    For Each oSh In oSl.NotesPage.Shapes

        ' Here's where the error will occur, if any:
        If oSh.PlaceholderFormat.Type = ppPlaceholderBody Then
        ' so deal with it if so:
        If Err.Number = 0 Then
            If oSh.HasTextFrame Then
                If oSh.TextFrame.HasText Then
                    strData = strData + "Folie " & oSl.SlideIndex & vbCrLf & oSh.TextFrame.TextRange.Text & vbCrLf & vbCrLf
                    Close #intFileNum
                End If  ' HasText
            End If   ' HasTextFrame
        End If  ' Err.Number = 0
        End If  ' PlaceholderType test
    Next oSh
Next oSl

' now write the text to file
strFileName = ActivePresentation.Path _
& "\" & ActivePresentation.Name & "_Notes" _
& ".txt"
intFileNum = FreeFile()
Open strFileName For Output As intFileNum
Print #intFileNum, strData
Close #intFileNum

End Sub 
```

# php - PHP中的ActionLink ..？

> ID：15866282
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:42:26.167
> 
> 标签：php, .net, yii

我是 PHP 编程新手。我想转换这个 .NET 代码：

> @Html.ActionLink("注册"、"索引"、"主页")

到 PHP（yii 框架），但我找不到如何。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:49:22.737

该代码（在 .NET 中）显示了一个链接。

默认情况下，PHP 没有 HTML 生成器，如果你使用一个框架，它可能有一个 HTML 生成器，你可以使用它。

如果您不使用框架，请执行以下操作：

```
echo '<a href="'.$url.'">'.$text'.</a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:50:30.723

您正在寻找 Razor (asp.net MVC) 基于框架的 html 帮助程序的基于语言的 PHP 实现，但它并不存在。[您将有更好的机会在Yii](http://www.yiiframework.com/)或[Symfony](http://symfony.com/)等 PHP MVC 框架中找到类似于 ActionLink 的内容。

# oracle - Error starting the service. The OracleMTSRecoveryService was not found

> ID：15866288
> 
> 赞同：9
> 
> 时间：2013-04-07T18:42:50.077
> 
> 标签：oracle, oracle11g

I am getting this error while installing oracle 11g enterprise edition on windows 7 professional 64 bit. I checked the registry as some people have mention but the correct thing is already there. If try starting the service from Services.msc it says the service wss not found also

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-01T12:52:28.633

我遇到了同样的问题，这解决了它：

当您收到错误弹出窗口时，将其保持打开状态，打开 regedit 并修改以下键中的 ImagePath 以指向正确的位置：

`computer\hkey_local_machine\system\controlset001\service\OracleMTSRecoveryService`

正确的位置可能是这样的：

`C:\app\myaccount\product\11.2.0\dbhome_1\bin\omtsreco.exe`

全部归功于：http: [//yuanmengblog.blogspot.com/2011/08/oracle-standard-db-install-issue-with.html](http://yuanmengblog.blogspot.com/2011/08/oracle-standard-db-install-issue-with.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-07T10:00:53.543

oracle 下载分为两部分。如果您尝试只安装一个部分，则会显示许多错误，并且安装后 oracle 将无法正常工作。从官网下载oracle的两部分并解压到同一个地方。这些文件将自动合并到同一文件夹中。

现在安装oracle。如果您已经安装过一次 oracle。它应该采用如下所示的路径。

在我的系统中，它需要“ **E:\app\INDP\product\11.2.0\dbhome_1...** ”

如果您要安装第二次安装将采用路径，“ **E:\app\INDP\product\11.2.0\dbhome_2...** ”

现在上面的错误会因为注册表而出现。所以，现在你需要像下面这样编辑注册表值。

*   ctrl+R 将带来运行窗口。键入 regedit 并按确定
*   然后在计算机下，选择*HKEY_LOCAL_MACHINE -> SYSTEM ->ControlSet001-> Services -> OracleMTSRecoveryService*。
*   双击 ImagePath。它将在值数据下提示具有旧路径或路径错误的窗口。
*   现在，您需要使用如下所示的当前路径对其进行编辑。
*   **E:\app\INDP\product\11.2.0\dbhome_2\bin\omtsreco.exe OracleMTSRecoveryService**

现在按下窗口的“重试”按钮，显示该错误。现在，它会像魅力一样发挥作用。

# html - 在 Dart 中解析 JSON 的最佳方法

> ID：15866290
> 
> 赞同：30
> 
> 时间：2013-04-07T18:42:52.390
> 
> 标签：html, dart

我正在尝试从 URL 加载 json 文件并在 Dart 中解析它。所以我在谷歌搜索时尝试了一些链接中建议的以下代码：

```
 HttpRequest.getString("hellknight2.js").then((response)
   {
     var model = new JSON.parse(response);
   }); 
```

但是，它似乎不再适用于 Dart SDK 版本 0.4.3.5_r20602。将 Json 文件映射到 Dart 中的对象的当前最佳方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-07T20:22:07.487

只需使用[package](https://api.dartlang.org/stable/2.4.0/dart-convert/dart-convert-library.html)的[json](https://api.dartlang.org/stable/dart-convert/json-constant.html)。这是一个例子：[`dart:convert`](https://api.dartlang.org/stable/2.4.0/dart-convert/dart-convert-library.html)

```
import 'dart:convert';

main() {
  final myJsonAsString = '{"a": 1, "b": "c"}';
  final decoded = json.decode(myJsonAsString);
  ....
} 
```

有关更多详细信息，请参阅[解析 JSON](http://www.dartlang.org/articles/json-web-service/#parsing-json)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-02-11T16:04:56.217

就我而言

> JSON.decode

没用。

**相反，我不得不使用：**

```
import 'dart:convert' as JSON;

final json=JSON.jsonDecode(myJsonAsString); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-07-31T07:51:56.020

这是我的解决方案:) 首先，您需要导入`convert`包：

```
import 'dart:convert';

var res = json.decode(response.body); 
```

然后您可以通过键获取值，如下所示：

```
print(res["message"]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-07T18:51:27.360

It depends on a lot of things.

Is the json text you get is an array or a map?

You can try with:

```
Map model = new parse(response); 
```

Or

```
List model = new parse(response); 
```

but you need to import [JSONObject by Chris Buckett](https://github.com/chrisbu/dartwatch-JsonObject) into your package

```
import "package:json_object/json_object.dart"; 
```

You can install it from pubspec adding this dependency

```
json_object 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-07T19:55:17.903

为此有一个新的 pub 包：

[Victor Savkin - 序列化器](https://plus.google.com/117126476314628351830/posts/Gz9dPo8DiN6)。

我没有使用它，但在我看来它会适合你。试试看

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-27T03:15:04.360

你可以试试这个包。[发布：g_json](https://pub.dev/packages/g_json/install)

```
dynamic model = JSON.parse(JsonStringFromAnywhere);

final name = model['name'].stringValue;
// OR
final name = model.name; 
```

# html - 在预设位置缩放 html5 画布上的照片图像

> ID：15866294
> 
> 赞同：0
> 
> 时间：2013-04-07T18:43:30.610
> 
> 标签：html, canvas, transform, scale

我一直在努力解决这个问题，我希望有人能够帮助我解决这个问题。

我在我的 html 代码中添加了画布对象，我在其中加载了一张照片图像。我试图在一些随机坐标处缩放图像，但缩放只发生在画布的中心。如果我使用平移，整个图像会随着原点的变化而移动。我也尝试过变换，但这也没有给出预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:10:59.867

**使用 context.drawImage() + 扩展参数将原始图像缩放到画布上**

```
context.drawImage(srcImage, srcX, srcY, srcWidth, srcHeight, 
      canvasX, canvasY, scaledWidth, scaledHeight) 
```

在哪里：

*   srcImage = 您的源图像
*   srcX = 源图像上要开始抓取像素的 X 坐标
*   srcY = 源图像上要开始抓取像素的 Y 坐标
*   srcWidth = 要从源图像开始抓取的像素矩形的宽度
*   srcHeight = 要从源图像开始抓取的像素矩形的高度
*   canvasX - 画布上要开始绘制像素矩形的 X 坐标
*   canvasY - 画布上要开始绘制像素矩形的 Y 坐标
*   scaledWidth -在绘制到画布之前将*源像素矩形缩放到这个宽度*
*   scaledHeight -在绘制到画布之前将*源像素矩形缩放到这个高度*

例如：

```
context.drawImage(myMap, 50,50,100,150,  20,20,200,300) 
```

这将从坐标 [50,50] 开始的 myMap 图像对象中抓取一个 100x150 像素的像素矩形。

然后它将像素矩形缩放到 200x300px。

最后，它将在画布上的坐标 [20,20] 处绘制放大的像素矩形

# url - 如何更改我的 phpmyadmin 的网址？

> ID：15866295
> 
> 赞同：0
> 
> 时间：2013-04-07T18:43:33.857
> 
> 标签：url, phpmyadmin, wampserver

我使用 wampserver 创建了一个 phpmyadmin 服务器，但我的浏览器中的 URL 设置为 localhost/phpmyadmin。我想知道如何将其更改为更具体的内容，例如我的 ip/phpmyadmin，然后我的朋友可以使用它来访问其上的数据库。

我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:56:21.133

localhost/phpmyadmin 只是您的 url，因为服务器在您的计算机上。如果您希望您的朋友可以使用 phpmyadmin，您只需给他们您的 ip/域，他们就会使用 ip/phpmyadmin 访问它。

您可能需要配置防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T17:09:36.187

您还必须在路由器上设置端口转发，以便将端口 80 转发到运行 wamp 的 PC。您还需要更改此文件 C:\wamp\alias\phpmyadmin.conf

改变它从

```
<Directory "d:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

到

```
<Directory "d:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order Allow,Deny
    Allow from all
</Directory> 
```

这当然意味着世界上任何人都可以访问您的 phpmyadmin，除非您为“r​​oot”分配了一个非常好的和强密码

# c++ - 在模板运算符 [] 中删除“const int”限定符

> ID：15866296
> 
> 赞同：1
> 
> 时间：2013-04-07T18:43:43.683
> 
> 标签：c++, stl

我看过几篇关于 const 限定符的帖子，但我无法弄清楚如何解决这个问题。我正在构建一个以 STL 地图类为模型的类，并且我使用 STL 集类作为基类：

```
template <class Key, class Value>
class map : public std::set <std::pair<Key, Value> > {
public:
    typedef std::set<std::pair<Key, Value> > parent;
    typedef typename std::set<std::pair<Key, Value> >::iterator iterator;

    // constructors
    map() : parent() {}
    map(map<Key, Value>& m) : parent(m) {}

    // definition for subscript operator
    Value& operator [] (const Key &);

    // overloaded methods from set
    void erase(Key&);
    void erase(iterator& itr) {
        parent::erase(itr);
    }

    int count(Key&);
    iterator find(Key&);
    iterator lower_bound(Key& k) {
        return parent::lower_bound(k);
    }

    iterator upper_bound(Key& k) {
        return parent::upper_bound(k);
    }

    // not found iterator
    iterator end() {
        return parent::end();
    }

}; 
```

问题在于 operator[] 重载函数，它看起来像：

```
template <class Key, class Value>
Value&  map<Key, Value>::operator[] (const Key& k) {
    std::pair<Key, Value> test;
    test.first = k;

    std::pair<iterator, bool> where = parent::insert(test);

    return (*(where.first)).second;
} 
```

编译器给了我错误“...map.h:108:16: 对'int'类型的引用绑定到'const int'类型的值会丢弃限定符”。我意识到它看到 (*(where.first)).second 被评估为“const int”，我将其返回为“int”，因为我已将映射声明为：

```
map<std::string, int> mymap;
mymap["one"] = 1; 
```

似乎`std::pair<...>`被定义为`std::pair<std::string, const int>`而不是`std::pair<std::string, int>`。至少这是我的猜想。我一定错过了一些简单的东西，但我没有看到它。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:46:08.390

问题是`std::set`元素是不可变的（否则您可以在不知情的情况下随意修改它们并弄乱排序`set`）；这是通过其返回 const 迭代器的方法强制执行的。

因此，`*(where.first)`是`const`，因此也是`(*(where.first)).second`。所以你不能返回`const`对它的非引用。

# python - 匹配 HTML 中的特定表格，BeautifulSoup

> ID：15866297
> 
> 赞同：2
> 
> 时间：2013-04-07T18:43:58.310
> 
> 标签：python, python-2.7, beautifulsoup

我有这个问题。我试图抓取的页面上有几个类似的表格。

```
<h2 class="tabellen_ueberschrift al">Points</h2>
<div class="fl" style="width:49%;">     
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1"> 
```

它们之间的唯一区别是`h2`标签中的文本，这里：`Points`

如何指定我需要在哪个表中搜索？

我有这段代码，需要调整`h2`标签因子：

```
my_tab = soup.find('table', {'class':'tabelle_grafik lh'}) 
```

需要一些帮助的家伙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:43:20.173

这对我有用。查找“previousSiblings”，如果您在具有不同文本内容的 h2 标记之前找到带有文本“Points”的 h2，则您找到了一个好表

```
from BeautifulSoup import BeautifulSoup

t="""
<h2 class="tabellen_ueberschrift al">Points</h2>
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">
<th><td>yes me!</th></td></table>
<h2 class="tabellen_ueberschrift al">Bad</h2>
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">
<th><td>woo woo</td></th></table>
"""

soup = BeautifulSoup(t)

for ta in soup.findAll('table'):
    for s in ta.findPreviousSiblings():
        if s.name == u'h2':
            if s.text == u'Points':
                print ta 
            else:
                break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:44:33.790

看起来这是[xpath](http://en.wikipedia.org/wiki/XPath)的工作。但是，*BeautifulSoup 不支持 XPath 表达式*。

考虑切换到[lxml](http://lxml.de/)或[scrapy](http://scrapy.org/)。

仅供参考，对于测试 xml，例如：

```
<html>
<h2 class="tabellen_ueberschrift al">Points</h2>  
<div class="fl" style="width:49%;">   
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">a</table>
</div>

<h2 class="tabellen_ueberschrift al">Illegal</h2>
<div class="fl" style="width:49%;">     
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">b</table>
</div>
</html> 
```

在 h2="Points" 之后在 div 中查找具有类 "tabelle_grafik lh" 的表的 XPath 表达式为：

```
//table[@class="tabelle_grafik lh" and ../preceding-sibling::h2[1][text()="Points"]] 
```

# ruby-on-rails - 由于 nokogiri，Bundler 不会更新，已经安装了 libxml2，这是什么问题？

> ID：15866298
> 
> 赞同：3
> 
> 时间：2013-04-07T18:44:00.330
> 
> 标签：ruby-on-rails, ruby, bundler, nokogiri

我正在使用 Mac OS X Mountain Lion (10.8.3)。

我正在关注 railstutorial.org 教程。在第 3 章中，它们包含`"gem 'rspec-rails', '2.11.0'"`在 gemfile 中。从那以后，我无法`bundle update`在我的应用程序中工作，因为它正在尝试安装 Nokogiri，这不起作用，但我不明白为什么。

这是我运行时控制台中发生的情况`bundle update`：

```
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.4) 
Using i18n (0.6.1) 
Using multi_json (1.7.2) 
Using activesupport (3.2.13) 
Using builder (3.0.4) 
Using activemodel (3.2.13) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.5) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.6) 
Using sprockets (2.2.2) 
Using actionpack (3.2.13) 
Using mime-types (1.22) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.5.3) 
Using actionmailer (3.2.13) 
Using arel (3.0.2) 
Using tzinfo (0.3.37) 
Using activerecord (3.2.13) 
Using activeresource (3.2.13) 
> Using bundler (1.3.5) 
> Installing nokogiri (1.5.9) 
> Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb 

>checking for libxml/parser.h... yes

> checking for libxslt/xslt.h... yes

>checking for libexslt/exslt.h... yes

>checking for iconv_open() in iconv.h... no

>checking for iconv_open() in -liconv... no

>checking for iconv_open() in -liconv... yes

>checking for xmlParseDoc() in -lxml2... yes

>checking for xsltParseStylesheetDoc() in -lxslt... yes

>checking for exsltFuncRegister() in -lexslt... yes

>checking for xmlHasFeature()... yes

>checking for xmlFirstElementChild()... yes

>checking for xmlRelaxNGSetParserStructuredErrors()... yes

>checking for xmlRelaxNGSetParserStructuredErrors()... yes

>checking for xmlRelaxNGSetValidStructuredErrors()... yes

>checking for xmlSchemaSetValidStructuredErrors()... yes

>checking for xmlSchemaSetParserStructuredErrors()... yes

>creating Makefile

make

compiling html_document.c

compiling html_element_description.c

html_element_description.c: In function ‘get_description’:

html_element_description.c:249: warning: cast discards qualifiers from pointer target type

compiling html_entity_lookup.c

compiling html_sax_parser_context.c

compiling html_sax_push_parser.c

compiling nokogiri.c

compiling xml_attr.c

compiling xml_attribute_decl.c

compiling xml_cdata.c

compiling xml_comment.c

compiling xml_document.c

xml_document.c: In function ‘set_encoding’:

xml_document.c:159: warning: cast discards qualifiers from pointer target type

xml_document.c: In function ‘canonicalize’:

xml_document.c:505: warning: cast discards qualifiers from pointer target type

xml_document.c: In function ‘Nokogiri_wrap_xml_document’:

xml_document.c:569: warning: passing argument 1 of ‘st_init_numtable_with_size’ with 

different width due to prototype

compiling xml_document_fragment.c

compiling xml_dtd.c

compiling xml_element_content.c

compiling xml_element_decl.c

compiling xml_encoding_handler.c

compiling xml_entity_decl.c

compiling xml_entity_reference.c

compiling xml_io.c

xml_io.c: In function ‘io_read_callback’:

xml_io.c:20: warning: passing argument 4 of ‘rb_rescue’ with different width due to 
prototype

xml_io.c: In function ‘io_write_callback’:

xml_io.c:45: warning: passing argument 4 of ‘rb_rescue’ with different width due to prototype

compiling xml_libxml2_hacks.c

compiling xml_namespace.c

compiling xml_node.c

compiling xml_node_set.c

xml_node_set.c: In function ‘dealloc_namespace’:

xml_node_set.c:9: warning: cast discards qualifiers from pointer target type

xml_node_set.c:11: warning: cast discards qualifiers from pointer target type

xml_node_set.c: In function ‘deallocate’:

xml_node_set.c:52: warning: passing argument 3 of ‘st_foreach’ with different width due to 
prototype

compiling xml_processing_instruction.c

compiling xml_reader.c

compiling xml_relax_ng.c

compiling xml_sax_parser.c

xml_sax_parser.c: In function ‘start_element’:

xml_sax_parser.c:69: warning: passing argument 1 of ‘rb_ary_new3’ with different width due to prototype

compiling xml_sax_parser_context.c

compiling xml_sax_push_parser.c

compiling xml_schema.c

compiling xml_syntax_error.c

compiling xml_text.c

compiling xml_xpath_context.c

compiling xslt_stylesheet.c

xslt_stylesheet.c: In function ‘parse_stylesheet_doc’:

xslt_stylesheet.c:72: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype

xslt_stylesheet.c: In function ‘transform’:

xslt_stylesheet.c:166: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype

linking shared-object nokogiri/nokogiri.bundle

ld: warning: directory not found for option '-L/opt/local/lib'

ld: in /usr/local/lib/libz.1.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64

collect2: ld returned 1 exit status
make: *** [nokogiri.bundle] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p392/gems/nokogiri-1.5.9 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p392/gems/nokogiri-1.5.9/ext/nokogiri/gem_make.out

>An error occurred while installing nokogiri (1.5.9), and Bundler cannot
>continue.
>Make sure that `gem install nokogiri -v '1.5.9'` succeeds before bundling. 
```

这是 gem_make.out 文件：

```
/usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb 
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
checking for iconv_open() in -liconv... yes
checking for xmlParseDoc() in -lxml2... yes
checking for xsltParseStylesheetDoc() in -lxslt... yes
checking for exsltFuncRegister() in -lexslt... yes
checking for xmlHasFeature()... yes
checking for xmlFirstElementChild()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetValidStructuredErrors()... yes
checking for xmlSchemaSetValidStructuredErrors()... yes
checking for xmlSchemaSetParserStructuredErrors()... yes
creating Makefile

make
compiling html_document.c
compiling html_element_description.c
html_element_description.c: In function ‘get_description’:
html_element_description.c:249: warning: cast discards qualifiers from pointer target type
compiling html_entity_lookup.c
compiling html_sax_parser_context.c
compiling html_sax_push_parser.c
compiling nokogiri.c
compiling xml_attr.c
compiling xml_attribute_decl.c
compiling xml_cdata.c
compiling xml_comment.c
compiling xml_document.c
xml_document.c: In function ‘set_encoding’:
xml_document.c:159: warning: cast discards qualifiers from pointer target type
xml_document.c: In function ‘canonicalize’:
xml_document.c:505: warning: cast discards qualifiers from pointer target type
xml_document.c: In function ‘Nokogiri_wrap_xml_document’:
xml_document.c:569: warning: passing argument 1 of ‘st_init_numtable_with_size’ with different width due to prototype
compiling xml_document_fragment.c
compiling xml_dtd.c
compiling xml_element_content.c
compiling xml_element_decl.c
compiling xml_encoding_handler.c
compiling xml_entity_decl.c
compiling xml_entity_reference.c
compiling xml_io.c
xml_io.c: In function ‘io_read_callback’:
xml_io.c:20: warning: passing argument 4 of ‘rb_rescue’ with different width due to prototype
xml_io.c: In function ‘io_write_callback’:
xml_io.c:45: warning: passing argument 4 of ‘rb_rescue’ with different width due to prototype
compiling xml_libxml2_hacks.c
compiling xml_namespace.c
compiling xml_node.c
compiling xml_node_set.c
xml_node_set.c: In function ‘dealloc_namespace’:
xml_node_set.c:9: warning: cast discards qualifiers from pointer target type
xml_node_set.c:11: warning: cast discards qualifiers from pointer target type
xml_node_set.c: In function ‘deallocate’:
xml_node_set.c:52: warning: passing argument 3 of ‘st_foreach’ with different width due to prototype
compiling xml_processing_instruction.c
compiling xml_reader.c
compiling xml_relax_ng.c
compiling xml_sax_parser.c
xml_sax_parser.c: In function ‘start_element’:
xml_sax_parser.c:69: warning: passing argument 1 of ‘rb_ary_new3’ with different width due to prototype
compiling xml_sax_parser_context.c
compiling xml_sax_push_parser.c
compiling xml_schema.c
compiling xml_syntax_error.c
compiling xml_text.c
compiling xml_xpath_context.c
compiling xslt_stylesheet.c
xslt_stylesheet.c: In function ‘parse_stylesheet_doc’:
xslt_stylesheet.c:72: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype
xslt_stylesheet.c: In function ‘transform’:
xslt_stylesheet.c:166: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype
linking shared-object nokogiri/nokogiri.bundle
ld: warning: directory not found for option '-L/opt/local/lib'
ld: in /usr/local/lib/libz.1.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64
collect2: ld returned 1 exit status
make: *** [nokogiri.bundle] Error 1 
```

在应用程序目录中运行`bundle`会在控制台中得到相同的消息：

```
"An error occurred while installing nokogiri (1.5.9), and Bundler cannot
continue.
Make sure that `gem install nokogiri -v '1.5.9'` succeeds before bundling." 
```

我试过`gem install nokogiri`了，它在控制台中输出：

```
$ gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... yes
checking for xmlParseDoc() in -lxml2... yes
checking for xsltParseStylesheetDoc() in -lxslt... yes
checking for exsltFuncRegister() in -lexslt... yes
checking for xmlHasFeature()... yes
checking for xmlFirstElementChild()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetParserStructuredErrors()... yes
checking for xmlRelaxNGSetValidStructuredErrors()... yes
checking for xmlSchemaSetValidStructuredErrors()... yes
checking for xmlSchemaSetParserStructuredErrors()... yes
creating Makefile

make
compiling html_document.c
compiling html_element_description.c
html_element_description.c: In function ‘get_description’:
html_element_description.c:249: warning: cast discards qualifiers from pointer target type
compiling html_entity_lookup.c
compiling html_sax_parser_context.c
compiling html_sax_push_parser.c
compiling nokogiri.c
compiling xml_attr.c
compiling xml_attribute_decl.c
compiling xml_cdata.c
compiling xml_comment.c
compiling xml_document.c
xml_document.c: In function ‘set_encoding’:
xml_document.c:159: warning: cast discards qualifiers from pointer target type
xml_document.c: In function ‘canonicalize’:
xml_document.c:505: warning: cast discards qualifiers from pointer target type
xml_document.c: In function ‘Nokogiri_wrap_xml_document’:
xml_document.c:569: warning: passing argument 1 of ‘st_init_numtable_with_size’ with different width due to prototype
compiling xml_document_fragment.c
compiling xml_dtd.c
compiling xml_element_content.c
compiling xml_element_decl.c
compiling xml_encoding_handler.c
compiling xml_entity_decl.c
compiling xml_entity_reference.c
compiling xml_io.c
xml_io.c: In function ‘io_read_callback’:
xml_io.c:20: warning: passing argument 4 of ‘rb_rescue’ with different width due to prototype
xml_io.c: In function ‘io_write_callback’:
xml_io.c:45: warning: passing argument 4 of ‘rb_rescue’ with different width due to prototype
compiling xml_libxml2_hacks.c
compiling xml_namespace.c
compiling xml_node.c
compiling xml_node_set.c
xml_node_set.c: In function ‘dealloc_namespace’:
xml_node_set.c:9: warning: cast discards qualifiers from pointer target type
xml_node_set.c:11: warning: cast discards qualifiers from pointer target type
xml_node_set.c: In function ‘deallocate’:
xml_node_set.c:52: warning: passing argument 3 of ‘st_foreach’ with different width due to prototype
compiling xml_processing_instruction.c
compiling xml_reader.c
compiling xml_relax_ng.c
compiling xml_sax_parser.c
xml_sax_parser.c: In function ‘start_element’:
xml_sax_parser.c:69: warning: passing argument 1 of ‘rb_ary_new3’ with different width due to prototype
compiling xml_sax_parser_context.c
compiling xml_sax_push_parser.c
compiling xml_schema.c
compiling xml_syntax_error.c
compiling xml_text.c
compiling xml_xpath_context.c
compiling xslt_stylesheet.c
xslt_stylesheet.c: In function ‘parse_stylesheet_doc’:
xslt_stylesheet.c:72: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype
xslt_stylesheet.c: In function ‘transform’:
xslt_stylesheet.c:166: warning: passing argument 2 of ‘rb_str_new’ with different width due to prototype
linking shared-object nokogiri/nokogiri.bundle
ld: warning: directory not found for option '-L/opt/local/lib'
ld: in '/usr/local/lib/libz.1.dylib', file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /usr/local/lib/libz.1.dylib for architecture x86_64
collect2: ld returned 1 exit status
make: *** [nokogiri.bundle] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p392/gems/nokogiri-1.5.9 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p392/gems/nokogiri-1.5.9/ext/nokogiri/gem_make.out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:00:54.487

尝试运行`bundle`。可能存在由`bundle update`.

也试试`gem install nokogiri`，并报告它的输出。

好的，`gem install`输出很有帮助。据我推测，您正在使用 MacPorts，它：

1.  与自制相比，完全打击。
2.  用户升级操作系统时存在一些迁移问题。

我会尝试安装自制软件或重新安装 MacPorts。

此外，根据我对错误消息的了解，主要问题归结为软件不兼容，或者 64 位机器的 32 位软件，反之亦然。也许您不小心下载了错误的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:10:21.467

通过 Homebrew 和 RVM 进行全新安装似乎已经解决了这个问题。Bundle Update 正常工作，nokogiri 错误消失了。

我使用 RailsInstaller 安装 Ruby + Rails，之前用[Rails Installer](http://railsinstaller.org/mac)重新安装了两次，同样的问题。使用自制软件和 rvm 后问题消失了。

使用 X-code 4.6、RVM、Homebrew、Ruby 1.9.3p374、Rails 3.2.13

# scheme - 方案：什么是必要的功能？

> ID：15866303
> 
> 赞同：1
> 
> 时间：2013-04-07T18:44:30.520
> 
> 标签：scheme

底部代码是从排序列表 L 中删除相邻的重复元素。

```
(define a
  (lambda (L)
    (cond
       ((null? L) L)
       ((null? (cdr L)) L)
       ((eqv? (car L) (car (cdr L))) (a (cdr L)))
       (else (cons (car L) (a (cdr L))))))) 
```

问题是“编写一个类似的函数，使用 Scheme 的命令式特性来修改 L '就地'，而不是构建一个新列表。在简洁性、概念清晰性和速度方面将其与上面的代码进行比较。

但我不清楚什么是必要的功能。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:55:39.623

该问题要求您使用以下部分或全部过程来编写解决方案*：*[`set-car!`](http://docs.racket-lang.org/r5rs-std/r5rs-Z-H-9.html?q=set-car%21#%25_idx_416) , [`set-cdr!`](http://docs.racket-lang.org/r5rs-std/r5rs-Z-H-9.html?q=set-car%21#%25_idx_418),[`set!`](http://docs.racket-lang.org/r5rs-std/r5rs-Z-H-7.html?q=set%21&q=set-car%21#%25_idx_104)等。 place”，意思是：不创建新列表，而是直接修改作为参数传递的列表。

 *请注意，所有提到的过程名称都以`!`（发音：bang！）结尾，这是为了警告程序员他们将更改作为参数接收的对象。将此与您迄今为止一直在使用的过程进行对比，它不会更改对象，并且在必要时将返回一个具有请求修改的新对象 - 一种*函数式编程风格*，与您开始时会发生的*命令式编程风格*不同使用 bang! 程序。

看看SICP 书中的[3.3 Modeling with Mutable Data](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-22.html#%_sec_3.3)部分，它将详细解释如何处理改变数据的操作。*

# python - 我被困在从矩阵中检索值的过程中

> ID：15866304
> 
> 赞同：1
> 
> 时间：2013-04-07T18:44:31.227
> 
> 标签：python, numpy

我被困在从矩阵中检索值的过程中。我正在使用 MatLab 程序作为参考。例如。`delv(2,k) = dell{2,K}(1,1)`. 这意味着， 的值`delv(2,k)`是矩阵的第一列和第一行的值`dell{2,K}`。我正在使用`np.matrix`，并且一直无法从`dell(2,k)`.

```
def ww(j,k):
    return npy.matrix.I(alfa(j,k))*(rr(j,k)-(BJ(j,k)*ww(j-1,k)))

def dell(j,k):
     if j == np:
        return ww(np,k)
     else:   
        return ww(j,k) - (gamma(j,k)*dell(j+1,k))
def delf(j,k):
    if j == 1:
        return 0
    elif j == 2:
        # This should be returning the 2nd row 1st column value of dell(2,k)
        return dell(2,k) (2,1) 
    else:
        return dell(j,k)
def delu(j,k):
    if j == 1 or j == np:
        return 0
    elif j == np-1:
        return dell(j,k)
def delv(j,k):
    if j == 1:
        return dell(2,k)
    elif j == 2:
        return dell(2,k)
    else:
        return dell(j,k) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:37:49.013

代替：

```
return dell(2,k) (2,1) 
```

你应该使用：

```
return dell(2, k)[1,1] 
```

不同之处在于您应该使用`[]`而不是`()`获取`[row, col]`数组或矩阵的值。请注意，`[1,1]`实际上是*第二*行和*第二*列：

```
In [201]: a = npy.array([[1,2],[3,4]])

In [202]: a
Out[202]: 
array([[1, 2],
       [3, 4]])

In [203]: a[1,1]
Out[203]: 4

In [204]: a[0,0]
Out[204]: 1

In [205]: a[0,1]
Out[205]: 2 
```

您可以像这样访问整行或列：

```
# the first row
In [206]: a[0]
Out[206]: array([1, 2])

# the second row
In [207]: a[1]
Out[207]: array([3, 4])

# the second column
In [208]: a[:,1]         # the : gives all rows here, the 1 gets second column
Out[208]: array([2, 4])

# the first row again, using a `:` even though it's not required
In [209]: a[0,:]         # here the : gives all columns (it can be left off as in line 206)
Out[209]: array([1, 2]) 
```

# javascript - JavaScript：使用一个文本框值作为循环的基础来捕获第二个文本框中的值？

> ID：15866305
> 
> 赞同：0
> 
> 时间：2013-04-07T18:44:39.833
> 
> 标签：javascript

我有一个脚本需要捕获一个值（textbox1），并使用该值来确定数组的大小。然后我需要使用不同的文本框（testbox2）来捕获值以填充数组，然后处理一些计算。

如果我使用窗口提示进行数据捕获，我可以很好地捕获第一个值，调整数组大小并填充数组。我不知道如何用文本框捕获替换提示方法。

这是代码 - 评论显示了我卡在哪里。本质上，我需要将“window.prompt”部分替换为“按 id 获取元素”并使用文本框，循环遍历这些值，直到输入的初始数字（文本框 1）被满足。

```
 <html>
           <head>
              <meta charset = "utf-8">
              <title>Variance and Standard Deviation</title>

            <style type = "text/css">

            #placement {
            width: 50%;
            padding: 0 0px;
            align:right;
            text-align: left;
            }

            #sorted {
            width: 50%;
            padding: 0 0px;
            float:left;
            text-align: left;
            }

            #mean,{
            width: 50%;
            padding: 0 0px;
            align:right;
            text-align: left;
            } 
            #variance,{
            width: 50%;
            padding: 0 0px;
            align:right;
            text-align: left;
            } 
            #deviation,{
            width: 50%;
            padding: 0 0px;
            position: relative;
            text-align: left;
            } 

            </style>

            <script>

            //declare and intialize variables 
            var capCount = 0; //capture count of variables to be entered
            var count = 0; //parse captured count to an integer
            var arrayTotal=0 ; //total of all values entered into array for math calcs
            var arrayAverage=0; //average (mean) of values in array
            var sortedArray = 0; //array sorted in ascending order
            var values = 0;  //values entered into text box for array population

            function start(formInfo) 
                {
                    var countField = document.getElementById( "count" ); // gets entry from count field on form
                    var capCount = countField.value;    
                    var count = parseInt (capCount);

                    var valueArray = new Array(); // allocate empty array   
                    //start capture and populate array loop
                    for ( var i = 0; i < count; ++i ) //using loops count, prompts user to enter variables until count of loops (count) is reached
                    //STUCK HERE- replace variable capture from window prompt to get value from text box
                    // rather than using window prompt box, need to capture input from the "value" text box,
                    // loop through the text box each time a value is entered and process when the last value (loops equal to count) is entered
                        {
                        var variable = window.prompt("Please enter a value for value " + (i + 1) + "" );  //prompts user to enter a value
                        //var variable = document.getElementById("value");
                        valueArray [ i ] = variable ;
                        } //end capture for loop

                    //calls sort function to sort array into ascending order
                    valueArray.sort ( sort );

                    //calls calcuate function to conduct math and get results
                    calculate ( valueArray );

                }// end build array function

            //sort function
            function sort ( value1, value2 )
            {
                return parseInt ( value1 ) - parseInt( value2 );
            } //end sort

            //calcuate function
            function calculate (theArray)
            {
                //declare variables
                n = 0;
                arrayTotal = 0;
                total_sqr = 0;
                for (var i = 0; i < theArray.length; ++i )
                {   
                arrayTotal += +theArray[i];
                n = (n + 1);
                total_sqr += (+theArray[i] * +theArray[i]);
                }
                //mean, variance, deviation calcs
                mean = (arrayTotal / theArray.length); //calcuate mean
                variance = (total_sqr - ((arrayTotal*arrayTotal)/n))/(n - 1);
                deviation = Math.sqrt( variance) ;

                //calls output function to output the resuls of the script
                output( "The sorted order of the values entered is", theArray, document.getElementById( "sorted" ) ); 
                output( "The mean of the values entered is", mean.toFixed(2), document.getElementById( "mean" ) );      
                output( "The variance of the values entered is", variance.toFixed(2), document.getElementById( "variance" ) );  
                output( "The standard deviation of the values entered is", deviation.toFixed(2), document.getElementById( "deviation" ) );

            } //end calculations

            //output function
            function output ( heading, data, results )
            {

                var content = "<p>" + heading + "</p><p>" + data + "</p>" ;
                results.innerHTML = content; // place the table in the output element
            } //end output

            </script>
           </head>
           <body>

           <body>
                <P><h2>This Page calcuates mean, variance and standard deviation</h2></p>
                <form action = "#">
                    <p><label><h3>Enter the # of values to process and click submit:</h3>
                    <input id = "count" type = "number" size = "10"></label>

                <div>
                <input type="button" value="Submit #of values to " onClick="start(this.form);">
                </div>

                <p><label><h3>Enter the x value to process:</h3>
                <input id = "value" type = "number" size = "10"></label>

                <p>
                <input type="button" value="process your values" onClick="process(this.form);">
                </p>

                </form>

           <div id = "sorted"></div> 
           <div id = "placement">
                <div id = "mean"></div>
                <div id = "variance"></div>
                <div id = "deviation"></div>
           </div>
           </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:18:42.697

您应该单击“处理您的价值观”按钮为您完成所有工作。点击“处理你的价值观”，调用处理函数，

```
//pseudo code
function process(){
 var length = document.getElementById('count').value
 var value_string = get_the_value_from_second_text_box

 convert value_string to an array(of values you need)

 do_the_computation
 display_the_results 
```

}

# c++ - 每秒使用 C++ 追加到磁盘上 JSON 文件中的 JSON 数组

> ID：15866311
> 
> 赞同：1
> 
> 时间：2013-04-07T18:45:08.840
> 
> 标签：c++, json

这是我在这里的第一篇文章，所以请多多包涵。

我在互联网上到处寻找答案，但我无法解决我的问题，所以我决定在这里写一篇文章。

我正在尝试使用 C++ 和 JZON 以每秒 1 次写入的间隔写入（附加）到文件上的 JSON 数组。JSON 文件最初由“准备”函数编写。然后每秒调用另一个函数以向 JSON 文件添加一个数组，并每秒向该数组追加一个新对象。

我尝试了很多事情，其中​​大部分导致了各种各样的问题。我最近的尝试给了我最好的结果，这是我在下面包含的代码。但是，我采用的方法非常低效，因为我每秒都在编写整个数组。随着阵列的增长，这对 CPU 利用率产生了巨大影响，但对内存的影响并不像我最初预期的那样大。

我真正想做的是逐行追加到磁盘上JSON文件中包含的现有数组，而不是必须从JSON对象中清除整个数组并重写整个文件，每一个第二。

我希望这个网站上的一些天才能够为我指明正确的方向。

非常感谢您提前。

这是我的代码：

```
//Create some object somewhere at the top of the cpp file
Jzon::Object jsonFlight;
Jzon::Array jsonFlightPath;
Jzon::Object jsonCoordinates;
int PrepareFlight(const char* jsonfilename) {
  //...SOME PREPARE FUNCTION STUFF GOES HERE...
  //Add the Flight Information to the jsonFlight root JSON Object
  jsonFlight.Add("Flight Number", flightnum);
  jsonFlight.Add("Origin", originicao);
  jsonFlight.Add("Destination", desticao);
  jsonFlight.Add("Pilot in Command", pic);
  //Write the jsonFlight object to a .json file on disk. Filename is passed in as a param    of the function.
  Jzon::FileWriter::WriteFile(jsonfilename, jsonFlight, Jzon::NoFormat);
  return 0;
}
int UpdateJSON_FlightPath(ACFT_PARAM* pS, const char* jsonfilename) {
  //Add the current returned coordinates to the jsonCoordinates jzon object
  jsonCoordinates.Add("altitude", pS-> altitude);
  jsonCoordinates.Add("latitude", pS-> latitude);
  jsonCoordinates.Add("longitude", pS-> longitude);
  //Add the Coordinates to the FlightPath then clear the coordinates.
  jsonFlightPath.Add(jsonCoordinates);
  jsonCoordinates.Clear();
  //Now add the entire flightpath array to the jsonFlight object.
  jsonFlight.Add("Flightpath", jsonFlightPath);
  //write the jsonFlight object to a JSON file on disk.
  Jzon::FileWriter::WriteFile(jsonfilename, jsonFlight, Jzon::NoFormat);
  //Remove the entire jsonFlighPath array from the jsonFlight object to avoid duplicaiton next time the function executes.
  jsonFlight.Remove("Flightpath");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T05:10:02.357

当然，您可以自己进行“平面文件”存储。但这是需要数据库的症状。像 SQLite 这样非常轻量级的东西，或者像 MySQL、FireBird 或 PostgreSQL 这样的中等重量和开源的东西。

但至于你的问题：

1) 关闭 ] 括号关闭，并保持文件打开和附加 - 但如果您没有正确关闭文件，它将被损坏并需要修复才能读取。

2）您当前的选择——每次写入一个完整的文件——也不能避免数据丢失，因为当您“打开以覆盖”时，您会丢失以前存储在文件中的所有数据。这里的解决方法是在开始编写之前将旧文件*重命名为备份。*

您还应该使用第一个选项制作文件的备份副本。（每天说一次）。否则最终可能会发生数据丢失——按Ctrl-C、断电、程序错误或系统崩溃。

当然，如果您使用 SQLlite、MySQL、Firebird 或 PostgreSQL 中的任何一个，所有数据完整性问题都会为您处理。

# php - Windows Server 杀死长时间运行的 PHP 进程

> ID：15866319
> 
> 赞同：0
> 
> 时间：2013-04-07T18:45:44.170
> 
> 标签：php, windows, command-line

我有一个运行 IIS 和 SQL Server 2012 的 Windows 2012 服务器。

我正在尝试从命令提示符运行 PHP 脚本。该脚本需要大约 1 小时才能运行。如果我像这样直接从命令行运行它 - c:\PHP>php.exe "D:\Web\phpScript.php" 它运行良好。再次运行大约需要 1 小时，但可以正常运行。

问题是我需要从另一个 PHP 页面运行它。所以这段代码 - exec('start c:\php\php.exe "D:\Web\phpScript.php"'); 在 PHP 中运行脚本。当我像这样从 PHP 运行它时，它可以运行大约 30 分钟左右，但由于某种原因，Windows 最终会在大约 30 分钟后终止该进程。

我一直在看 Windows 上的任务管理器，与我直接从命令提示符运行它或使用 PHP 运行命令时相比，该进程的运行方式没有任何区别。它们都显示为后台进程，并且在任务管理器中看起来完全相同，但由于某种原因，Windows 正在杀死从 PHP 运行的进程，而不是直接从命令提示符运行的进程。

我什至尝试过实时运行 PHP ，我想如果它具有更高的优先级，它就不会被杀死，但这并没有帮助。

我真的坚持这一点。

任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:55:05.727

如果它与您的 PHP 配置有关，您可以在脚本开头强制允许一定的执行时间

`set_time_limit(60*60*2); // allows 2 hours execution time`

然后执行外部文件只需`include('D:\Web\phpScript.php');`在脚本中使用。

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

否则，如果它是一个服务器问题，打败我。如果机器上安装了 PHP，您当然可以...在您的 Web 浏览器而不是命令提示符下运行它。

# r - 我怎样才能知道一个区间内函数的平均值？

> ID：15866323
> 
> 赞同：0
> 
> 时间：2013-04-07T18:45:57.190
> 
> 标签：r, function, mean

假设我有一个函数，例如：

```
fun <- function(x) 2.3*exp(-x/2) 
```

我想沿着一个区间得到这个函数的平均值，假设从 2 到 20。

为了得到平均值，我首先想到的是：

```
mean(fun(2:20)) 
```

就像开始给函数赋值并计算平均值一样简单。

但是我想知道是否有其他更精确的方法来获得这个。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:32:46.530

从分析上讲，您可以使用以下方法确定区间 [a,b] 上的函数的平均值：

![在此处输入图像描述](https://i.stack.imgur.com/RRQ7B.gif)

因此，在取积分后，您可以在两点评估函数并解析得到平均值。在您的情况下，这会导致 的积分`-4.6 * exp(0.5 * x)`和 的平均值`1/(20-2) * (-4.6 * exp(-0.5 * 20) + 4.6 * exp(-0.5 * 2)) = 0.09400203`。

* * *

现在我现在专注于沿区间采样，并计算如下平均值：

```
get_sample_mean_from_function = function(func, interval, n = 1000) {
   interval_samples = seq(interval[1], interval[2], length = n)
   function_values = sapply(interval_samples, func)
   return(mean(function_values))
}

fun <- function(x) 2.3*exp(-x/2)
get_sample_mean_from_function(fun, interval = c(2,20)) 
```

通过增加数量`n`（采集的样本数量），您可以提高答案的精度。这就是平均值随着样本量的增加而变化的方式：

```
n_list = c(1,4,10,15,25,50,100,500,1000,10e3,100e3,100e4,100e5)
mean_list = sapply(n_list, 
                   function(x) get_sample_mean_from_function(fun, 
                                    interval = c(2,20), n = x))
library(ggplot2)
qplot(n_list, mean_list, geom = "point", log = "x") 
```

![在此处输入图像描述](https://i.stack.imgur.com/VZlnw.png)

请注意，至少需要 1000 个样本才能获得任何收敛。如果我们将此数值解与解析值进行比较：

```
mean_list - real_value
 [1] 7.521207e-01 1.286106e-01 3.984653e-02 2.494165e-02 1.421951e-02
 [6] 6.841070e-03 3.355199e-03 6.607662e-04 3.297467e-04 3.291750e-05
[11] 3.291179e-06 3.291122e-07 3.291116e-08 
```

我们看到，即使对于`100e5`样本，与双浮点精度相比，解析解和数值解之间的差异仍然很大。

如果您迫切需要非常高的精度，我会尝试寻求分析解决方案。然而，在实践中，5000 个样本足以获得合理的准确度。

# iphone - iPhone 解析 RSS 问题的时间

> ID：15866332
> 
> 赞同：2
> 
> 时间：2013-04-07T18:46:20.440
> 
> 标签：iphone, ios, calendar, rss

由于夏令时的开始和结束，我似乎在解析时间方面遇到了一些困难。有问题的 RSS 提要的项目有这个：

```
 <item>
<title><![CDATA[Men's & Ladies Bible Class Widows Luncheon]]></title>
<description><![CDATA[(Tue, 02 Apr 2013 11 am - 1 pm EST)
 ]]></description>
<pubDate>Tue, 02 Apr 2013 11:00:00 EST</pubDate>
<link>http://www.localendar.com/elsie?DAM=PublishedEvent&amp;event_id=315&amp;calendar_id=199640&amp;k=040213&amp;cb=false</link>
<guid>http://www.localendar.com/elsie?DAM=PublishedEvent&amp;event_id=315&amp;calendar_id=199640&amp;k=040213&amp;cb=false</guid>
</item>

<item>
<title><![CDATA[Wednesday Night Services]]></title>
<description><![CDATA[(Wed, 03 Apr 2013 7 pm - 8 pm EST)
 ]]></description>
<pubDate>Wed, 03 Apr 2013 19:00:00 EST</pubDate>
<link>http://www.localendar.com/elsie?DAM=PublishedEvent&amp;event_id=283&amp;calendar_id=199640&amp;k=040313&amp;cb=false</link>
<guid>http://www.localendar.com/elsie?DAM=PublishedEvent&amp;event_id=283&amp;calendar_id=199640&amp;k=040313&amp;cb=false</guid>
</item> 
```

在我的应用程序中，detailTextLabel 显示日期和时间。这是表格行的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    RSSEntryCalendar *entry = [_allEntries objectAtIndex:indexPath.row];

    NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"America/New_York"]];
    NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];

    cell.textLabel.text = entry.articleTitle;        
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, entry.blogTitle];

    return cell;
} 
```

所有事件的地点都是东部时区，这就是为什么我把它作为设定的时区。这可以确保一切都显示东部时间，而不仅仅是他们时区的任何时间。

问题是，虽然我作为示例发布的两个条目在 pubDate 类别中的时间显示为 11 和 7，但应用程序将其写入为 12 和 8。

关于如何解决这个问题的任何想法？应该在日历本身上进行一些设置，还是我在应用程序中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:11:28.820

也许明确设置格式？

`[dateFormatter setFormat:@"EEE, d MMM yyyy HH:mm:ss zzz"];`

# asp.net - 已添加具有相同密钥的项目。切换网络主机后

> ID：15866339
> 
> 赞同：0
> 
> 时间：2013-04-07T18:46:36.353
> 
> 标签：asp.net, sql-server, entity-framework

我正在将 .NET Framework 4.0 站点从 1 个 Web 主机转移到另一个。现有主机上的站点似乎按预期工作。但是，在将站点文件和数据库传输到新主机并修复 web.config 连接字符串以指向新数据库后，尝试访问从数据库中提取的页面时出现错误。

我没有编写该站点，但它似乎使用了代码优先设置。

```
Server Error in '/' Application.
An item with the same key has already been added.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentException: An item with the same key has already been added.

Source Error:

Line 130:                if ((_Jobs == null))
Line 131:                {
Line 132:                    _Jobs = base.CreateObjectSet<Job>("Jobs");
Line 133:                }
Line 134:                return _Jobs; 
```

传输文件后，我尝试从新数据库服务器重建 edmx 文件。我知道我的连接字符串正在工作，因为我编写了一个小测试，通过相同的连接字符串连接到数据库并且它能够检索数据。

从工作状态复制代码库后，我对代码库所做的唯一更改是对 web.config 的数据库连接字符串。

旧主机与新主机的唯一真正显着区别是旧主机使用 SQLEXPRESS（未知版本），而新主机使用 MSSQL 2008。

堆栈跟踪：

```
[ArgumentException: An item with the same key has already been added.]
   System.ThrowHelper.ThrowArgumentException(ExceptionResource resource) +52
   System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add) +9378779
   System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadRelationshipTypes() +650
   System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.LoadTypesFromAssembly() +17
   System.Data.Metadata.Edm.ObjectItemAssemblyLoader.Load() +25
   System.Data.Metadata.Edm.ObjectItemAttributeAssemblyLoader.Load() +4
   System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boolean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData) +160
   System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boolean loadReferencedAssemblies, KnownAssembliesSet knownAssemblies, EdmItemCollection edmItemCollection, Action`1 logLoadMessage, Object& loaderCookie, Dictionary`2& typesInLoading, List`1& errors) +166
   System.Data.Metadata.Edm.ObjectItemCollection.LoadAssemblyFromCache(ObjectItemCollection objectItemCollection, Assembly assembly, Boolean loadReferencedAssemblies, EdmItemCollection edmItemCollection, Action`1 logLoadMessage) +316
   System.Data.Metadata.Edm.ObjectItemCollection.ImplicitLoadAssemblyForType(Type type, EdmItemCollection edmItemCollection) +84
   System.Data.Metadata.Edm.MetadataWorkspace.ImplicitLoadAssemblyForType(Type type, Assembly callingAssembly) +151
   System.Data.Objects.ObjectContext.GetTypeUsage(Type entityCLRType) +35
   System.Data.Objects.ObjectContext.GetEntitySetForNameAndType(String entitySetName, Type entityCLRType, String exceptionParameterName) +33
   System.Data.Objects.ObjectContext.CreateObjectSet(String entitySetName) +66
   PR.PRModel.PREntities.get_Jobs() in \\n5200-2\iis7_www\p\e\personallyrecommended.com.au\www\App_Code\PRModel.Designer.cs:132
   Careers.LoadJob() in \\n5200-2\iis7_www\p\e\personallyrecommended.com.au\www\Careers.aspx.cs:24
   Careers.Page_Load(Object sender, EventArgs e) in \\n5200-2\iis7_www\p\e\personallyrecommended.com.au\www\Careers.aspx.cs:16
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

连接字符串：

```
<connectionStrings>
<add name="PREntities" connectionString="metadata=res://*/App_Code.PRModel.csdl|res://*/App_Code.PRModel.ssdl|res://*/App_Code.PRModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=myserver.com;Initial Catalog=mydatabase;Persist Security Info=True;User ID=username;Password=password;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
<add name="ConnectionStringDB" connectionString="Data Source=myserver.com;Initial Catalog=mydatabase;Persist Security Info=True;User ID=username;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# computational-geometry - 3点最远点voronoi图

> ID：15866343
> 
> 赞同：5
> 
> 时间：2013-04-07T18:46:49.377
> 
> 标签：computational-geometry, voronoi

这实际上更像是一个数学问题。但是给定 3 个点，你如何计算最远点 voronoi 图？

首先找到穿过所有这些圆圈并抓住它的中心。不知道从这里去哪里。图片很奇怪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:09:15.343

从圆心向外画出每对点之间的平分线：

![最远点 VorDiag](https://i.stack.imgur.com/rEnky.jpg)！

# c# - 首先在 EntityFramework 5 数据库中设置默认值

> ID：15866344
> 
> 赞同：2
> 
> 时间：2013-04-07T18:46:49.710
> 
> 标签：c#, entity-framework-5

我正在使用实体框架数据库优先工作流程。

我创建了我的模型，并且按照 Julie Lerman 的 Pluralsite 课程的推荐，我已成功地将用于实体/类生成的 .tt 文件移动到一个单独的项目中（我是 EF 新手）

我正在为每个实体类创建部分类，并且我想设置一些默认值。显而易见的答案（这是对类似问题的答案）是在构造函数中执行此操作。问题是我生成的实体已经有一个构造函数。例如：

-- 生成的类 --

```
 public partial class User
{
    public User()
    {
        this.EmailLogs = new HashSet<EmailLog>();
        this.Listings = new HashSet<Listing>();
        this.Visitors = new HashSet<Visitor>();
    } 
```

-- 推荐方法 --

```
 public User()
   {
       this.CreatedOn = DateTimeOffset.Now;
       this.IsAdminUser = false;
       this.Token = Guid.NewGuid();
    } 
```

这失败了，因为我不能有 2 个部分构造函数。

我希望在 DotNet 层中设置这些属性（而不是 DB 默认值），因为我希望在保存之前使用新对象时填充它们。

我希望能够对我的模型进行往返编辑，即，如果我向对象添加另一个属性，我希望能够重新编码生成我的实体类。因此，手动编辑实体类并不是一个很好的答案。

当然，我缺少一个明显的解决方案。

# jquery - 当一个 div 被 jquery css 移动时显示链接

> ID：15866348
> 
> 赞同：0
> 
> 时间：2013-04-07T18:47:13.723
> 
> 标签：jquery, css

我想在用户将鼠标移到一个 div 上时显示两个链接，然后在用户离开 div 时隐藏它们，我这样做：[这里是](http://jsfiddle.net/c6AnE/5/)

```
 <div id="mydiv"  style="background-color : red;width:100px;height:100px;position: relative;" >
<div id="subdiv1" style="position: absolute;" >
<a href="#" style="color:red;" >link 1</a>
</br><a href="#" style="color:red;" >link 2</a>
</div>
<div id="subdiv2" style="width:60px;height:60px;background-color : blue;" ></div
</div> 
```

但没有结果

我怎样才能做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:57:34.487

使用这个 JavaScript：

```
$('#subdiv1').hide();
$('#subdiv2').mouseover(function(){
    $('#subdiv1').show();
});
$('#subdiv2').mouseleave(function(){
    $('#subdiv1').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:58:13.417

你想要这样的东西吗？：

[http://jsfiddle.net/c6AnE/6/](http://jsfiddle.net/c6AnE/6/)

HTML：

```
<div id="one">
    <a href="#">#1 link</a>
    <a href="#">#2 link</a>
</div>
<div id="two">
</div> 
```

查询：

```
$("#two").mouseenter(function(){
      $("#one").hide();
    });
$("#two").mouseleave(function(){
      $("#one").show();
    }); 
```

CSS：

```
#one {
    position:absolute;
    background-color:red;
    width:50px;
    height:50px;
}
#two {
    position:absoluite;
    margin-left:30px;
    background-color:blue;
    width:60px;
    height:60px;
} 
```

# c - 如何更改已编译二进制文件的 lib 版本

> ID：15866349
> 
> 赞同：2
> 
> 时间：2013-04-07T18:47:15.810
> 
> 标签：c, object, shared

当我阅读共享库时，这些疑问开始出现在我身上。

1.-------------------------------------------- 假设我已经编译为以下，

```
test  : main.o libtest.so.2
  gcc main.o -L ../../lib -ltest -o test
libtest.so.2  : version2.c
  gcc -Wall -fPIC -c version2.c
  gcc -shared -Wl,-soname,libtest.so -o libtest.so.2.0 version2.o
  ln -sf libtest.so.2.0 libtest.so
  mv libtest.s* ../../lib
main.o  : main.c
  gcc -c main.c 
```

给出 -ltest 后，库应该始终是 libtest.so 的软链接。正确的 ？那么，如果我为另一个二进制文件使用更高版本的 libtest 而前者需要旧版本呢？我该如何处理。

2.------------------------------------------------ ------------------------- 我有一些库，我不希望将它们包含在 LD_LIBRRAY_PATH 中，因为每个人都必须搜索这个文件夹，这将与他们完全相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:03:26.520

1.您必须使用-soname设置版本：

```
gcc -shared -Wl,-soname,libtest.so.2 -o libtest.so.2.0 version2.o 
```

然后链接器会将前者与“libtest.so.2”绑定，而不是 libtest.so 的“任何版本”。

* * *

2\. LD_LIBRARY_PATH 仅在启动应用程序时设置，您可以创建 shell 脚本：

```
LD_LIBRARY_PATH=/path/to/your/libs ./my_app 
```

# makefile - makefile 的新默认操作

> ID：15866350
> 
> 赞同：0
> 
> 时间：2013-04-07T18:47:22.297
> 
> 标签：makefile, gnu-make

如果我有一个引用的 Makefile `myprog.c`，如果我没有为 指定规则`myprog.c`，make 将自动执行类似`$(CC) myprog.c`.

我可以重新指定默认行为并添加新的默认行为（例如，对于以 结尾的文件`myextension`）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:51:05.683

对于 C，特定规则可能如下所示：

```
%.o : %.c
        rules 
```

尝试将其应用于您的扩展程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:08:06.127

Make 有几个预定义的[隐式规则](http://www.gnu.org/software/make/manual/make.html#Implicit-Rules)。您可以使用选项检查正在应用哪些规则`make -d`。默认规则是

```
%: %.o    # Link object file
      $(CC) $(LDFLAGS) n.o $(LOADLIBES) $(LDLIBS)
%.o: %.c  # Compile C source code
      $(CC) $(CPPFLAGS) $(CFLAGS) -c 
```

您可以重新定义隐式规则。检查[这个](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:26:30.907

`COMPILE.c`隐式规则的配方是通过,`LINK.c`等变量在内部定义的。

来自GNU Make 手册[的隐式规则目录：](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules)

> `make`遵循编译*.x*源文件的规则使用变量的约定`COMPILE.x`。*同样，从.x*文件生成可执行文件的规则使用`LINK.x`; 并且预处理*.x*文件的规则使用`PREPROCESS.x`.

上面的链接还包含一些预定义的隐式配方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:20:35.030

GNU make 有一堆内置的隐含规则，它决定它知道如何从你的`myprog.c`. 您可以为您喜欢的任何内容添加自己的隐式规则。例如，下面的隐含规则告诉 GNU make 它如何`.out`从文件中生成`.myextension`文件：

```
%.out: %.myextension
        @echo Building $@ from $<
        @# do whatever you need here... 
```

将其放入您的 Makefile 中，您将能够运行`gmake foo.out`, or`gmake bar.out`或其他任何内容，只要您有匹配`foo.myextension`的 等，而无需为每个输出指定显式规则。

# javascript - HTML5 Canvas 和丑陋的文本边框

> ID：15866354
> 
> 赞同：1
> 
> 时间：2013-04-07T18:47:32.907
> 
> 标签：javascript, html, canvas

我正在寻找一种在 HTML5 画布中呈现带有黑色边框的白色文本的方法。我没有找到获得漂亮结果的解决方案，尝试了一些不同的方法（shadow、strokeText，...），结果总是很差（可能是因为 AA）。

这是我要复制的基础：

![原创 我要复制](https://i.stack.imgur.com/8I2tk.jpg)

你可以在这里看到我的测试：http: [//jsfiddle.net/7H79m/](http://jsfiddle.net/7H79m/)

```
ctx.font         = "12px Arial";
ctx.textBaseline = "top"; 
ctx.fillStyle    = "white";
ctx.strokeStyle  = "black";
ctx.lineWidth    = 2;

ctx.strokeText( "HappyEnd", x, y );
ctx.fillText( "HappyEnd", x, y ); 
```

如果您知道解决方案，请分享！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:10:27.323

您将无法通过文本的内置笔触效果获得准确的结果，因为由于子像素问题，文本渲染目前在各种浏览器中有点马马虎虎（IMO）（请参阅Chrome vs FF ）。

但是，您可以通过这种方式模拟笔画（在 FF21 中渲染）：

![快照 FF/v21](https://i.stack.imgur.com/qM4UQ.jpg)

```
//Force anti-alias
ctx.translate(0.5, 0.5);

//...
//Create stroke effect:
ctx.fillStyle    = "black";
ctx.fillText( "HappyEnd", x-1, y );
ctx.fillText( "HappyEnd", x,   y-1 );
ctx.fillText( "HappyEnd", x+1, y );
ctx.fillText( "HappyEnd", x,   y+1 );

//draw normal text
ctx.fillStyle    = "white";
ctx.fillText( "HappyEnd", x, y ); 
```

如需完整修改，[请单击此处](http://jsfiddle.net/7H79m/3/)。

当然，您总是可以将“大纲”合并到一个函数中：

```
function outlineText(ctx, color, txt, x, y) {
    ctx.fillStyle    = color;
    ctx.fillText( txt, x-1, y );
    ctx.fillText( txt, x,   y-1 );
    ctx.fillText( txt, x+1, y );
    ctx.fillText( txt, x,   y+1 );
} 
```

或者改为扩展画布上下文：

```
if (CanvasRenderingContext2D != 'undefined') {
    CanvasRenderingContext2D.prototype.outlineText = 
        function outlineText(txt, x, y) {
            this.fillText( txt, x-1, y );
            this.fillText( txt, x,   y-1 );
            this.fillText( txt, x+1, y );
            this.fillText( txt, x,   y+1 );
        }
} 
```

用法：

```
ctx.outlineText("HappyEnd", x, y); 
```

请[在此处查看您的示例中包含](http://jsfiddle.net/7H79m/6/)的使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:29:54.797

[编辑尝试不同的效果]

**这是尝试使用多个阴影来巩固 AA**

[http://jsfiddle.net/m1erickson/BSU7P/](http://jsfiddle.net/m1erickson/BSU7P/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas = document.getElementById('canvas');
    var ctx    = canvas.getContext('2d');

    // Load background
    var bg = new Image();
    bg.onload = function() {
        canvas.width  = this.width;
        canvas.height = this.height;
        ctx.drawImage(this, 0, 0);
        process();
    };
    bg.src = "http://upload.robrowser.com/bg-test-text.jpg";

    function process() {
        var x = canvas.width /2;
        var y = canvas.height/2;

        ctx.font="12px Arial";

        try1(x,y);
        try2(x,y+20);
    }

    function try1(x,y){
    multiShadow("HappyEnd",x,y,0,-1,0);
    multiShadow("HappyEnd",x,y,0,1,0);
    multiShadow("HappyEnd",x,y,-1,0,0);
    multiShadow("HappyEnd",x,y,1,0,0);
    ctx.fillStyle="white";
    ctx.strokeStyle="black";
    ctx.strokeText("HappyEnd",x,y);
    ctx.fillText("HappyEnd",x,y);
    }

    function try2(x,y){
    multiShadow("HappyEnd",x,y,0,-1.5,8);
    multiShadow("HappyEnd",x,y,0,1.5,8);
    multiShadow("HappyEnd",x,y,-1.5,0,8);
    multiShadow("HappyEnd",x,y,1.5,0,8);
    ctx.fillStyle="white";
    ctx.fillText("HappyEnd",x,y);
    }

    function multiShadow(text,x,y,offsetX,offsetY,blur){
        ctx.textBaseline = "top"; 
        ctx.lineWidth    = 1;
        ctx.shadowColor = '#000';
        ctx.shadowBlur    = blur;
        ctx.shadowOffsetX = offsetX;
        ctx.shadowOffsetY = offsetY;
        ctx.fillStyle="black";
        ctx.fillText( "HappyEnd", x, y ); 
    }

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:14:16.523

好吧，总是模糊不清：

```
ctx.shadowColor = "#000";
ctx.shadowOffsetX = 0;
ctx.shadowOffsetY = 0;
ctx.shadowBlur = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T19:35:06.807

这是我的尝试。我基本上试图将笔画缩小 1 个像素，并将笔画放在填充内。唯一的问题是很难集中所有

```
// Create canvas, add it to body.
var canvas = document.createElement('canvas');
var ctx = canvas.getContext('2d');
document.body.appendChild(canvas);

// Load background
var bg = new Image();
bg.src = "http://upload.robrowser.com/bg-test-text-original.jpg";
bg.onload = function () {
    canvas.width = this.width;
    canvas.height = this.height;
    ctx.drawImage(this, 0, 0);
    process();
};

// Do whatever you want here
function process() {
    var x = 62;
    var y = 30;

    ctx.font = "12px Arial";
    ctx.textBaseline = "top";
    ctx.fillStyle = "white";
    ctx.strokeStyle = "black";
    ctx.lineWidth = 2;

    ctx.font = "11.75px Arial";
    ctx.strokeText("HappyEnd", x, y);

    ctx.font = "12px Arial";
    ctx.fillText("HappyEnd", x, y);
} 
```

# python - TypeError: 'numpy.int64' object is not callable — 这在外行术语中是什么意思？

> ID：15866355
> 
> 赞同：2
> 
> 时间：2013-04-07T18:47:37.367
> 
> 标签：python, numpy, scipy, nonlinear-optimization

[在此示例](http://lister.dulci.duhs.duke.edu/~cliburn/summer-school/python/_build/html/model_fitting.html)之后，我尝试使用我自己的 sigmoidal 模型执行非线性回归：

$$f(d) = \frac{1}{1 + \exp (-k (de))}$$

网站上解释的示例完美运行，但我的代码并非如此：

```
import pylab
import numpy
from scipy import optimize

def f(d, k, e):
    return 1 / (1 + numpy.exp(-k(d-e)))

def resid(p, y, d):
    k, e = p
    return y - f(d, k, e)

# load the data
d, r, n = numpy.loadtxt('data.txt', unpack=True)

y = numpy.concatenate([d, r])

k0, e0 = 1, 10

[k, e], flag  = optimize.leastsq(resid, [k0, e0], args=(d, r))

print flag, k, e

# plot the data
pylab.plot(d, r, 'ro')

pylab.show() 
```

但是，当我执行脚本时，它会引发以下错误：

```
Traceback (most recent call last):
  File "./logisticfit.py", line 22, in <module>
    [k, e], flag  = optimize.leastsq(resid, [k0, e0], args=(d, r))
  File "/Library/Python/2.7/site-packages/scipy-0.12.0.dev_d631749_20121222-py2.7-macosx-10.8-intel.egg/scipy/optimize/minpack.py", line 348, in leastsq
    m = _check_func('leastsq', 'func', func, x0, args, n)[0]
  File "/Library/Python/2.7/site-packages/scipy-0.12.0.dev_d631749_20121222-py2.7-macosx-10.8-intel.egg/scipy/optimize/minpack.py", line 14, in _check_func
    res = atleast_1d(thefunc(*((x0[:numinputs],) + args)))
  File "./logisticfit.py", line 12, in resid
    return y - f(d, k, e)
  File "./logisticfit.py", line 8, in f
    return 1 / (1 + numpy.exp(-k(d-e)))
TypeError: 'numpy.int64' object is not callable 
```

某处显然存在 TypeError，但我不明白问题出在哪里或到底是什么。我曾尝试在 Google 上搜索此错误，但我也不太明白其中的解释。想法，有人吗？

* * *

数据.txt

```
0.0 0.0 6
4.5 0.0 3
6.1 0.333333333333  3
7.7 0.0 3
8.5 0.2 10
9.0 0.6 5
9.3 0.333333333333  3
9.5 0.333333333333  6
10.0    0.333333333333  6
10.5    0.8 5
10.9    0.5 2
11.0    1.0 5
11.5    1.0 5
12.0    1.0 4
12.5    1.0 8
13.0    1.0 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T18:48:58.863

当您编写`k(d-e)`它时，它认为您正在尝试`k`使用`d-e`作为参数调用函数。在 Python 中不能使用并列来表示乘法。您必须明确编写乘法：`k*(d-e)`.

# combobox - MS access 2007 use combobox to populate picture

> ID：15866358
> 
> 赞同：0
> 
> 时间：2013-04-07T18:47:41.567
> 
> 标签：combobox, ms-access-2007, image, autofill

**The question:**

What do i need to do so in my form I can use a comboBox and have it autofill a picture on both the form and table?

**The info:**

In Microsoft Access 2007, I have 1 table and 1 form. The table has all the info for name, phone, address, and picture and it all comes up right in the form. I have a ComboBox for com, fam1, fam2, and fam3, and when I select a name on the comboBox, it autofills the info on the table and form for the com, com phone,and com address, but not the picture. I'm thinking that I need to do some VB coding for the "on change" for the combobox. image 1 shows the format of the table. image 2 shows the format of the form.

[Picture1 http://dplcollagentherapy.com/pic01.JPG](http://dplcollagentherapy.com/pic01.JPG)

[Picture2 http://dplcollagentherapy.com/pic02.JPG](http://dplcollagentherapy.com/pic02.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:35:21.983

我能够弄清楚如何使用以下代码更新 com 电话和 com 地址。但是组合框不允许我将图片添加到第 3 列中，这会使这变得容易得多。我会在某个时候做一份报告，让报告查找图片可能更容易。不确定我会为查找使用什么编码。再次感谢你。 **编码**

```
Option Compare Database

Private Sub Combo30_Change()
Me.txtcomphone.Value = Me.Combo30.Column(1)
Me.txtcomaddress.Value = Me.Combo30.Column(2)
Me.com_picture = dlookup("name", "Elders", "Name=" & Com)
End Sub

Private Sub Combo32_Change()
Me.txtfam1phone.Value = Me.Combo32.Column(1)
Me.txtfam1address.Value = Me.Combo32.Column(2)
End Sub

Private Sub Combo48_Change()
Me.txtfam2phone.Value = Me.Combo48.Column(1)
Me.txtfam2address.Value = Me.Combo48.Column(2)
End Sub

Private Sub Combo56_Change()
Me.txtfam3phone.Value = Me.Combo56.Column(1)
Me.txtfam3address.Value = Me.Combo56.Column(2)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:17:05.633

我这样做的方式不是将实际图像放在表格中，而是将它们全部放在表单本身上。为每张图片分配其自己的唯一名称，该名称对应于与其关联的字段。每张图片都设置为不可见。然后在 VBA 中，您可以编写如下代码：

```
If Me.ComboBox = Name Then
Me.NamesPicture.Visible = True
Else
Me.NamesPicture.Visible = False
End If 
```

您可以将所有图片堆叠在一起，VBA 运行非常流畅，我过去曾将它用于工作中的小型项目。希望这会有所帮助！:)

# r - 如何从矩阵列表创建汇总表？

> ID：15866361
> 
> 赞同：1
> 
> 时间：2013-04-07T18:48:10.053
> 
> 标签：r, list, matrix, rename, reshape2

**数据：**

```
k1 <- 
structure(list(`3280.2000` = structure(c(0, 1.363, 0, 4.198, 
1.097, 1.669, 0, 1.098, 0), .Dim = c(3L, 3L), .Dimnames = list(
    c("3280.3500", "3280.400", "3280.4000"), c("3280.3500", "3280.400", 
    "3280.4000"))), `160.2000` = structure(c(0.935, 0.929, 1.1, 
1.152), .Dim = c(2L, 2L), .Dimnames = list(
    c("160.2200", "160.2300"), c("160.2200", "160.2300")))), .Names = c("3280.2000", "160.2000"))

#k1 Looks like
# $`3280.2000`
#              3280.3500 3280.400 3280.4000
# 3280.3500     0.000    4.198     0.000
# 3280.400      1.363    1.097     1.098
# 3280.4000     0.000    1.669     0.000
# 
# $`160.2000`
#           160.2200 160.2300
# 160.2200    0.935    1.100
# 160.2300    0.929    1.152

k2 <- 
structure(list(`3280.2000` = structure(c(0, 1.363, 0, 4.198, 
1.097, 1.669, 0, 1.098, 0), .Dim = c(3L, 3L), .Dimnames = list(
    c("400","3500",  "4000"), c("400", "3500",  
    "4000"))), `160.2000` = structure(c(0.935, 0.929, 1.152, 
0.903), .Dim = c(2L, 2L), .Dimnames = list(c("2200", "2300"
), c("2200", "2300")))), .Names = c("3280.2000", "160.2000"
))

#k2 Looks like
# $`3280.2000`
#      400  3500  4000
# 400  0.000 4.198 0.000
# 3500 1.363 1.097 1.098
# 4000 0.000 1.669 0.000
# 
# $`160.2000`
#      2200  2300
# 2200 0.935 1.152
# 2300 0.929 0.903 
```

**情况：** 我有一个如上所述的矩阵列表。我在列表中有不同大小的矩阵，例如（3x3、2x2 等）。除了命名和排序之外，每个列表和每个矩阵都非常相似。我有 k=2（上面的 k1 和 k2）列表，我试图在汇总表中合并在一起。

**目标：** 从每个列表中检索数据和名称，然后合并以创建汇总表。

**可能的解决方案：** a）由于矩阵的大小不同，因此将每个列表中的每个矩阵从正方形重新整形到列是最有意义的。Melt.list() 是一个不错的选择。b) 更改矩阵中行和列的名称。由于在`3280`对象的名称中，它不需要在矩阵行/列的名称中。因此，行和列可以提供可以成功融合的唯一 ID。

**问题：**

a) Melt（或 melt.list）截断我的变量名。这让我很不高兴（下面的 X1 和 X2 应该是 7-8 位数）。

```
#   X1      X2 value        L1
# 1  3280.35 3500.00 0.000 3280.2000
# 2  3280.40 3500.00 1.363 3280.2000
# 3  3280.40 3500.00 0.000 3280.2000
# etc 
```

b）我可以更改矩阵的列名，但我不知道如何为数组中的多个矩阵执行此操作。当我尝试这个时，我得到一个名称列表（没有更多的值！）而不是更新名称。

```
#this works
colnames(k1[[1]]) <- gsub("*.*\\.", "", colnames(k1[[1]]))

#this does not - returns names where values should be!
k1 <- lapply(k1, function (x) {colnames(x) <- gsub("*.*\\.", "", colnames(x))} 
```

**问题：**我怎样才能：a）防止melt截断我的名字或b）更改矩阵列表上的dimnames？

**列表、名称、框架、分层**：有多少种方法可以修复我的数据？

**搜索：** reshape2 文档、plyr 文档、[r] 重命名矩阵列； [列重命名](https://stackoverflow.com/questions/9283171/named-columns-renaming)， [更改行名和列名](https://stackoverflow.com/questions/10443934/changing-row-and-column-names-on-matrices-to-numbers)， [如何重塑数据框](https://stackoverflow.com/questions/12620964/how-to-reshape-a-dataframe-with-reoccurring-columns/12623269#12623269)，以及许多其他

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:51:28.950

你的 lapply 语句没有给你想要的输出的原因是你忘记了返回 x。

```
# instead of: 
h <- lapply(h, function (x) {colnames(x) <- gsub("*.*\\.", "", colnames(x))})

# Try this: 
h <- lapply(h, function (x) {colnames(x) <- gsub("*.*\\.", "", colnames(x)); x}) 
```

# r - 对 Rprof 和 R 感到困惑

> ID：15866362
> 
> 赞同：3
> 
> 时间：2013-04-07T18:48:15.673
> 
> 标签：r

我对如何`Rprof`使用 R感到困惑。

我按照文档中的示例进行操作，并有类似的东西

```
Rprof(filename="testProfile.out")
test()
Rprof(NULL)
summaryRprof("testProfile.out") 
```

但是，在里面`testProfile.out`，我有一行：`sample.interval=20000`

这让我很困惑，当我跑步时`summaryRProf`，我得到了`no events were recorded`

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:58:38.750

问题是我的测试完成得太快了，而 Rprof 的记录间隔不够快。要解决此问题，您可以设置`interval = 0.0002`或设置一些小于默认值 ( `0.02`) 的数字。我还可以通过运行我的多次迭代测试来解决这个问题。

# java - Error in creating xml file from java object

> ID：15866363
> 
> 赞同：0
> 
> 时间：2013-04-07T18:48:19.580
> 
> 标签：java, xml, serialization, xmlencoder

when i try to store my CreateNode object in a xml file it gives me the following error

```
java.lang.InstantiationException: GraphPanel$CreateNode
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement XMLEncoder.writeObject(GraphPanel$CreateNode);
Continuing ... 
```

here is my node class

```
public static class CreateNode {
  private Point p;
  private int r;
  private String NAME;
  private String nodeid;
  private boolean selected = false;
  private boolean fnode;
  private Rectangle b = new Rectangle();
  /**
   * Construct a new node.
   */
  public CreateNode(String nodeid, Point p, int r, String NAME, boolean fnode) {
    this.nodeid = nodeid;
    this.p = p;
    this.r = r;
    this.NAME = NAME;
    setBoundary(b);
    System.out.print(p.toString());
  }
  /**
   * Calculate this node's rectangular boundary.
   */
  private void setBoundary(Rectangle b) {
    b.setBounds(p.x - r, p.y - r, 2 * r, 2 * r);
  }
  /**
   * Select each node in r.
   */
  public static void selectRect(List<CreateNode> list, Rectangle r) {
    for (CreateNode n: list) {
      n.setSelected(r.contains(n.p));
    }
  }
  /**
   * Toggle selected state of each node containing p.
   */
  public static void selectToggle(List<CreateNode> list, Point p) {
    for (CreateNode n: list) {
      if (n.contains(p)) {
        n.setSelected(!n.isSelected());
      }
    }
  }
} 
```

and an object is created in the following class

```
private class NewNodeAction extends AbstractAction {
  String Name;
  boolean firstnode = false;
  public NewNodeAction(String name) {
    super(name);
    this.Name = name;
  }
  public void actionPerformed(ActionEvent e) {
    CreateNode.selectNone(nodes);
    Point p = mousePt.getLocation();
    String Nodeid = ID.giveid();
    CreateNode n = new CreateNode(Nodeid, p, radius, Name, firstnode);
    n.setSelected(true);
    nodes.add(n);
    repaint();
  }
} 
```

And i try to serialize/store the object in xml file here but it gives me error

```
private class Serialize extends AbstractAction {
  public Serialize(String name) {
    super(name);
  }
  public void actionPerformed(ActionEvent e) {
    ListIterator<CreateNode> Fiter = nodes.listIterator();
    while (Fiter.hasNext()) {
      CreateNode n = Fiter.next();
      FileOutputStream os;
      try {
        os = new FileOutputStream("D:/DM1/pert.xml");
        XMLEncoder encoder = new XMLEncoder(os);
        encoder.writeObject(n);
        encoder.close();
      }
      catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
      }
    }
  }
} 
```

# c++ - 有什么方法可以避免或允许在此线相交算法中除以零？

> ID：15866364
> 
> 赞同：1
> 
> 时间：2013-04-07T18:48:23.867
> 
> 标签：c++, math

前段时间我写了一个算法来找到两条线段之间的交点。不过，回过头来看它，我注意到在两个不同的地方除以零是可能的。从逻辑的角度来看，我认为这样做是可以的，但是如果这样做，程序当然会崩溃。这是算法：

```
class Segment{
    public:

    Vector first, second;

    bool getIntersection(const Segment arg, Vector * intersect = NULL)const{
        Segment segment(b - a, arg.b - arg.a);
        double s, t;

        // These two equations run the risk of division by zero
        s = (-segment.a.y * (a.x - arg.a.x) + segment.a.x * (a.y - arg.a.y)) 
             / (-segment.b.x * segment.a.y + segment.a.x * segment.b.y);
        t = ( segment.b.x * (a.y - arg.a.y) - segment.b.y * (a.x - arg.a.x)) 
             / (-segment.b.x * segment.a.y + segment.a.x * segment.b.y);

        if (s > 0.0 && s < 1.0 && t > 0.0 && t < 1.0)
        {
            // Collision detected
            if (intersect != NULL)
            {
                intersect->x = a.x + (t * segment.a.x);
                intersect->y = a.y + (t * segment.a.y);
            }
            return true;
        }
        return false; // No collision
    }

}; 
```

如果除数后面的值（并且可能结果是）全为零，则在计算`s`和的地方除以零是可能的。`t`从几何学的角度来看，这意味着两条线相互平行；在这种情况下，不应将平行线视为相交，即使它们完全重叠。

有没有办法让这个函数除以零？当然，假设它不会影响算法背后的逻辑（我认为任何带有 NAN 或 INF 的东西都不会导致冲突）？或者我应该使用更好的线段相交算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:04:18.580

我建议分别计算两个分子和分母：

```
double num1 = (-segment.a.y * (a.x - arg.a.x) + segment.a.x * (a.y - arg.a.y));
double num2 = ( segment.b.x * (a.y - arg.a.y) - segment.b.y * (a.x - arg.a.x));
double denom = (-segment.b.x * segment.a.y + segment.a.x * segment.b.y); 
```

然后将分母归一化为非负：

```
if (denom < 0) { denom = -denom; num1 = -num1; num2 = -num2; } 
```

最后检查

```
if (0.0 < num1 && num1 < denom && 0.0 < num2 && num2 < denom) {
    double t = num2 / denom;
    ...
} 
```

这不仅解决了“分母为零”的问题，而且还避免了分母非常小时可能出现的溢出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:54:39.053

如果您想以编程方式执行它会有点困难，因为`C++`不支持`divide_by_zero`-exception 或类似的东西。

根据这里的[这个](https://stackoverflow.com/questions/4747934/c-catch-a-divide-by-zero-error)线程，这是一个硬件错误，被操作系统检测到并返回给进程。

引用：

这不是个例。这是一个错误，在硬件级别确定并返回给操作系统，然后操作系统以某种特定于操作系统的方式通知您的程序（例如，通过终止进程）。

你可以`catch`通过信号处理程序来实现。除以零将创建一个`SIGFPE`. 但这可能不是很有用或可靠。

# css - CSS 悬停区域不包含在按钮中

> ID：15866365
> 
> 赞同：0
> 
> 时间：2013-04-07T18:48:32.860
> 
> 标签：css, hover

这是一个 HTML/CSS 问题。我在较大的导航元素中有一个下拉按钮。我遇到的问题是悬停（翻转）区域是整个导航而不包含在按钮中。我想也许给按钮一个设定的宽度可能会做到这一点，但它没有帮助。隐藏元素定义为 id "hider" 和翻转按钮 id "seeker"。我使用的代码如下所示，谢谢：

HTML

```
<nav role="navigation">
    <a href="/"><span class="home-icon"></span></a>
    <a href="/about">About</a>
    <a href="#" id="seeker">Dropdown</a>
      <select id="hider">
        <option value="/link">Sample</option>
        <option></option>
        <option></option>
      </select>
    <a href="/updates">Updates</a>
    <a href="/forum">Forum</a>
    <a href="/contact">Contact</a>
  </nav> 
```

CSS

```
nav a:link,
nav a:visited,  
nav a:active {
  float: left;
  display: block;
  color: white; 
  text-decoration: none;
  padding: 8px 10px;
 }
[role="navigation"] {
  box-sizing: border-box;
  background: black;
  border-top: 1px solid red;
  border-bottom: 1px solid #333;
  font-size: 14px;
  font-weight: bold;
  width: 100%;
  height: 30px;
  position: fixed;
  top: 0;
  z-index: 999;
}

#hider {
  box-sizing: border-box;
  display: none;
  position: absolute;
  top: 0;
  margin-top: 20px;
  padding-top: 100px;
  height: 350px;
  width: 300px;
  background: white;
  border: 1px solid black;
  z-index: 5;
}

#seeker:focus, nav:hover > #hider {
  display:block;
  background: white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:09:13.283

您应该将选择器更改为：

```
#seeker:hover + #hider {
  display:block;
  background: white;
} 
```

[http://jsbin.com/uvisaq/1/edit](http://jsbin.com/uvisaq/1/edit)

我认为，您还有其他问题，您无法使用您的区域，因此将其更改为：

```
#seeker:hover + #hider,#hider:hover 
```

IMO 这不是你应该做的。更好的是使用 <UL> 和 <LI> 标签...但是，这取决于你。CSS可以完成这项工作。 [http://jsbin.com/uvisaq/2/edit](http://jsbin.com/uvisaq/2/edit)

# model-view-controller - ember.js 使用模板中模型实例的值

> ID：15866367
> 
> 赞同：0
> 
> 时间：2013-04-07T18:48:35.803
> 
> 标签：model-view-controller, ember.js

我想在我的模板中使用我的模型实例中的值，在 PHP 中我会执行以下操作：

```
<?php
class User {
    private $name;
    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }
}

$localuser = new User("john doe");
?>

<p>My name is: <?= $localuser->getName(); ?></p> 
```

但是我如何在 Ember.js 中做到这一点？还是我误解了 Ember.js 的 MVC 模型？

这是我用于创建 localuser 实例的 Ember.js 代码：

```
Example = Ember.Application.create();
Example.User = Example.Object.extend({
    firstname: null,
    lastname: null,
    network: null,

    fullName: function() {
        return this.get('firstName') + " " + this.get('lastName');
    }.property('firstName', 'lastName')

});

Example.LocalUser = Example.User.create({
    firstname: "John",
    lastname: "Doe"
});

Example.IndexRoute = Ember.Route.extend({
  setupController: function(controller) {
  },

  renderTemplate: function() {
      this.render("exampleTemplate");
  }
});

and my HTML template (which doesn't work):

<script type="text/x-handlebars" data-template-name="exampleTemplate">
{{#model Example.LocalUser}}
    {{fullName}}
{{/model}}
</script> 
```

我需要在模板中添加什么才能从 Example.LocalUser 中获取全名值以显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:42:09.710

您必须做几乎与 PHP 中完全相同的操作：创建一个对象的*实例*。你几乎是对的，有一些错误：

1.  尽管您确实是通过说 来创建实例`Example.LocalUser = Example.User.create({...})`，但这在 Ember 中是一种反模式。约定是将*类*保留在应用程序命名空间中，例如`Example.IndexRoute`,`Example.User`等。但绝不是*实例*。模型对象是实例，将它们公开给视图的最佳方法是使用`model`or`setupController`钩子设置控制器。
2.  据我所知，没有`{{#model}}...{{/model}}`Handlebars 助手。您可以使用控制器提供的变量：`{{model}}`或者只是`{{controller}}`，如果您设置了它，例如。在控制器的路线中。
3.  您的示例中有拼写错误：`firstname`-> `firstName`:)

综上所述，（大概）工作示例应该是这样的：

**JavaScript：**

```
Example = Ember.Application.create();

Example.User = Ember.Object.extend({
  firstName: null,
  lastName: null,
  network: null,

  fullName: function() {
    return this.get('firstName') + " " + this.get('lastName');
  }.property('firstName', 'lastName')
});

Example.IndexRoute = Ember.Route.extend({
  model: function() {
    var user = Example.User.create({
      firstName: "John",
      lastName: "Doe"
    });

    return user;
  },

  renderTemplate: function() {
    this.render("exampleTemplate");
  }
}); 
```

**模板：**

```
<script type="text/x-handlebars" data-template-name="exampleTemplate">
  {{model.fullName}} - {{controller.fullName}}
</script> 
```

**输出：**

约翰·多伊 - 约翰·多伊

# c# - Creating C# .dll called by VBA

> ID：15866368
> 
> 赞同：0
> 
> 时间：2013-04-07T18:48:38.667
> 
> 标签：c#, vba, dll, com, typelib

Previously I saw from somewhere else (I can't revisit that source now as I was fired from the company) a piece of C# coding which create a dll. And that .dll can be called directly by Excel VBA's Reference. (Not by calling reference from .tlb)

I tried to replicate it but fails, warning me that "Can't add a reference to the specified file" when I tried to add the .dll reference. But its OK to add the .tlb reference.

Is there anyway to add the .dll reference instead of .tlb?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:53:04.407

通常在 VBA 代码中将库称为特定的函数或命令（无效函数）。

即[http://msdn.microsoft.com/en-us/library/office/bb687915.aspx](http://msdn.microsoft.com/en-us/library/office/bb687915.aspx)

您还可以使用适用于 Office 的 Visual Studio 工具，它为您提供比 dll 引用和 VBA 更强大的功能。

此外，您可以通过执行以下操作来制作没有 VSTO 的加载项：http: [//msdn.microsoft.com/en-us/library/ms173189 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms173189(VS.80).aspx)

# xslt - 防止将 xmlns="" 属性添加到 XSLT 1.0 生成的 HTML 元素中

> ID：15866373
> 
> 赞同：4
> 
> 时间：2013-04-07T18:48:54.240
> 
> 标签：xslt, xslt-1.0, xml-namespaces, phpdoc

我正在为 phpdoc 2 创建一个模板，我试图弄清楚`xmlns="http://www.w3.org/1999/xhtml"`当从我的模板创建文档时如何防止该属性被添加到生成的 HTML 的根级元素中。我在模板中的 .xsl 文件会生成包含 html 片段的文件，这就是`<html>`标签不是根级别元素的原因。看来 phpdoc 2 使用 XSLT v1.0，所以这限制了我的选择。经过一番搜索，最常见的答案是使用每个 .xsl 文件标签`exclude-result-prefixes`上的属性`<xsl:stylesheet>`，并将其值设置为`#all`or `#default`，因为您不能仅将`xmlns`其用作命名空间来直接排除。但我试过了，`exclude-result-prefixes`在我的模板中设置每个 .xsl 文件，但它不起作用。

根据要求，这是我的 .xsl 文件之一，api-doc.xsl：

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns="http://www.w3.org/1999/xhtml" 
    exclude-result-prefixes="#all">

    <xsl:output indent="no" method="html"/>

    <xsl:include href="chrome.xsl"/>

    <xsl:include href="api-doc/property.xsl"/>
    <xsl:include href="api-doc/class.xsl"/>
    <xsl:include href="api-doc/constant.xsl"/>
    <xsl:include href="api-doc/function.xsl"/>
    <xsl:include href="api-doc/docblock.xsl"/>
    <xsl:include href="api-doc/file.xsl"/>

    <xsl:template name="content">
        <xsl:apply-templates select="/project/file[@path=$path]"/>
    </xsl:template>

</xsl:stylesheet> 
```

这是 api-doc/file.xsl 的片段：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns="http://www.w3.org/1999/xhtml" 
    exclude-result-prefixes="#all">

    <xsl:output indent="no" method="html"/>

    <xsl:template match="file">
        <div class="text-content">
            <!-- ... -->
        </div>
    </xsl:template>

</xsl:stylesheet> 
```

元素`<div class="text-content"></div>`是`xmlns="http://www.w3.org/1999/xhtml"`添加了属性的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:15:07.760

就像 Michael Kay 所说，如果您不希望`div`在 xhtml 命名空间中，`xmlns="http://www.w3.org/1999/xhtml"`请从您的`xsl:stylesheet`.

否则，您可以使用构建元素`xsl:element`并为其提供一个空的命名空间：

```
 <xsl:element name="div" namespace="">
        <xsl:attribute name="class">text-content</xsl:attribute>
        <xsl:text>...</xsl:text>
    </xsl:element> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:08:08.087

示例中的`<div>`文字结果元素位于命名空间[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)中。如果您不希望它在那个命名空间中，那么不要把它放在那个命名空间中。

# c++ - 使用可变参数模板实现 Get(Tuple) 得到“参数包未使用 '...' 展开”错误

> ID：15866376
> 
> 赞同：2
> 
> 时间：2013-04-07T18:49:10.577
> 
> 标签：c++, templates, variadic-templates

我想实现像 std::get(std::tuple) 这样的东西，有一个元组类：

```
template<typename ... Types> class Tuple;
template<> class Tuple<> {};
template<typename First, typename ... Rest>
class Tuple<First, Rest...>: private Tuple<Rest...> {
  First Member;
 public:
  Tuple(const First& first, const Rest& ... rest):
      Tuple<Rest...>(rest...), Member(first) {}

  const First& Head() const {
    return Member;
  }

  const Tuple<Rest...>& Tail() const {
    return *this;
  }
}; 
```

我还实现了一个辅助结构 tuple_element。

```
template<size_t I, class T>
struct tuple_element;

template<size_t I, class Head, class ... Tail>
struct tuple_element<I, Tuple<Head, Tail...> >:
    tuple_element<I - 1, Tuple<Tail...> > {};

template<class Head, class ... Tail>
struct tuple_element<0, Tuple<Head, Tail...> > {
  typedef Head type;
}; 
```

但我无法实现如何实现 Get(Tuple) 函数。我想我什么都试过了。我的最后一次尝试：

```
template<class T, class Head, class ... Tail>
T Get(size_t pos, const Tuple<Head, Tail...>& t) {
  if (pos > 0) {
    return Get<T>(pos - 1, t.Tail());
  }
  return t.Head();
}
template<size_t Pos, class Head, class ... Tail>
typename tuple_element<Pos, Tuple<Head, Tail...> >::type
    Get(const Tuple<Head, Tail...>& t) {
  return Get<typename tuple_element<Pos, Tuple<Head, Tail...> >::type>(Pos, t);
} 
```

但是我得到了一个错误：参数包没有用'...'扩展</p>

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:28:09.863

就是这样。我已经使用模板专业化实现了它，但是由于功能部分专业化的残疾，我修改了上面的 tuple_element 结构。这就是我最终拥有的：

```
template<size_t I, class T>
struct TupleElement;

template<size_t I, class Head, class ... Rest>
struct TupleElement<I, Tuple<Head, Rest...> >:
    public TupleElement<I - 1, Tuple<Rest...> > {
  static typename TupleElement<I, Tuple<Head, Rest...> >::Type
      Get(const Tuple<Head, Rest...>& t) {
    return TupleElement<I - 1, Tuple<Rest...> >::Get(t.Tail());
  }
};

template<class Head, class ... Rest>
struct TupleElement<0, Tuple<Head, Rest...> > {
  typedef Head Type;
  static typename TupleElement<0, Tuple<Head, Rest...> >::Type
      Get(const Tuple<Head, Rest...>& t) {
    return t.Head();
  }
};

template<size_t Pos, class Head, class ... Rest>
typename TupleElement<Pos, Tuple<Head, Rest...> >::Type
    Get(const Tuple<Head, Rest...>& t) {
  return TupleElement<Pos, Tuple<Head, Rest...> >::Get(t);
} 
```

谢谢大家有用的建议。

# c++ - C++ encode multiple values into 1 float

> ID：15866379
> 
> 赞同：0
> 
> 时间：2013-04-07T18:49:25.007
> 
> 标签：c++

I only have so many variables exposed through shaders. One of those values is right now for color, but I'm bastardizing it right now and in the shader using it for something else. However I need more. Right now I'm using the x & y values for index values to lookup a subtexture on 1 big texture, which the shader will offset to. The z value of the color is for how many subtextures fit on the width of the big main texture. Because they are index values they only really need to be ints and even char up to 256 would be fine.

Now I want to be able to provide a scale value and a subset offset from the subtexture to give me full control. Since I'll always need the z float value of the color and need it to be a float that variable is out. That leaves me with x, y, a (alpha) float values. Is there any way I could encode byte values inside these so that when I decode them in the shader x actually stores 2 values, y stores 2 values, and alpha stores 2 values?

I hope that made sense. I want to be able to encode values into a floating point variable via my game code, then decode them in the shader and use them in the shader. Is this possible and if so what kind of value restrictions would we be looking at and how would you do it?

# php - 将获取的数据从一个 div 发送到另一个

> ID：15866380
> 
> 赞同：0
> 
> 时间：2013-04-07T18:49:28.550
> 
> 标签：php, javascript, mysql, ajax

这是使用 php 和 ajax 从 mysql 数据库中检索名称的代码

更新代码

索引.php

```
 <html>
<head>
<script language="javascript">
    function showresult()
    {  
    var product_name = document.getElementById("searchval").value;   
    if(window.XMLHttpRequest)
    {
    XMLHttpRequestObject = new XMLHttpRequest();
    }
    else if(window.ActiveXObject)
    {
    XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
    }  
     XMLHttpRequestObject.open("POST", "search.php", true);   
     XMLHttpRequestObject.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");                    
     XMLHttpRequestObject.send("search_res=" + product_name);  
     XMLHttpRequestObject.onreadystatechange = function()  
    {  
        if(XMLHttpRequestObject.readyState == 4)
        {
            if(XMLHttpRequestObject.status == 200)
            {
                document.getElementById("displayresult").innerHTML = XMLHttpRequestObject.responseText;
            }
        }

    }  
    }
function throwval(obj)
{
    var sent_id = obj.id;
var v = document.getElementById(sent_id).value;
    var newp = document.createElement("p");     
var text = document.createTextNode(v);
newp.appendChild(text);
document.getElementById("getselected").appendChild(newp);  
}
function sendvalues()
{

var div_val = document.getElementById("getselected");
var str="|";
    for (i=0; i < div_val.getElementsByTagName("p").length; i++)
    {
    var paragraphs = div_val.getElementsByTagName("p");
    var pvalues = paragraphs.item(i).innerHTML;
str = str + pvalues + "|";
}   
window.location="send_data.php?str="+str;
}

    </script>
    </head>
    <body>
    <form method="post" name ="searchform" id="idsearchform" >
    <input type="text" name="search" id="searchval"/>
    <input type="button" name="starts" value="startsearch" onclick="showresult()"/>
    </form>
    <div id="displayresult">

    </div>
    <div id="getselected">
    Selected :
    </div>
    <form name="sendf" method="post" action="send_data.php">
    <input type="button" id="sendtophp" name="sendingval" value="next step" onclick="sendvalues()">
    </form>
    </body>
    </html> 
```

搜索.php

```
$mysql_con = mysql_connect("localhost","root","") or die("Could not   connect".mysql_error());
$mysql_db = mysql_select_db("test",$mysql_con) or die("Unable to select db  ".mysql_error());
$keyword = mysql_real_escape_string($_POST['search_res']);
$search_q = mysql_query("Select * from products where pname like '%$keyword%'");
if(mysql_num_rows($search_q)!=0)
{
    while($result = mysql_fetch_array($search_q))
    {
        $name = $result['pname'];
        echo "<input type='button' name='resultname' id='$productid' value='$name' onclick='throwval(this)'><br/>";
    }
} 
```

发送数据.php

```
<?php
$url = $_SERVER['REQUEST_URI'];
$exploded = explode('|',$url,-1);
$number = count($exploded);
?>
<html>
<body>
<table align="center" border="1">
<form method="post" action="send_data.php">
<tr>
<td>Name</td>
<td>Quantity</td>
</tr>
<?php
for($i=1;$i<$number;$i++)
{
    $p_name = $exploded[$i];
?>
<tr>
<td><input type="text" name="p_names" value="<?php echo $p_name; ?>" /></td>
<td><input type="text" name="quantity" /></td>
</tr>
<?php 
}
?>
<tr>
<td></td>
<td><input type="submit" name="send_request" value="Submit" /></td>
</tr>
</form>
</table>
</body>
</html> 
```

我想将选定的结果发送到另一个 div，从那里我可以使用 php 或 javascript（没有 jquery）将选定的值发送到另一个文件。我怎样才能做到这一点。

更新：我已经使用 appendchild 成功地将数据从一个发送到另一个。我现在的问题是我添加的值是作为单个字符串添加的。我希望每个值都是分开的，以便我可以将其发送到 php（有点像购物车）。有任何想法吗？谢谢

I managed to send separate values using javascript by creating a new p attribute for every value that is selected. I can now display the values in send_data.php but i do not know how to send multiple values generated by the for loop through one form. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:56:56.363

I understand that you are trying to build a search form. The user can do multiple searches. The user may select a result from each search request. Each selected result is stored somewhere and send to another php script once the user is done with searching and selecting.

I would add a hidden field to the HTML and append the result not only to the DIV like you have done, but also to the value of the hidden field. Let's say the user selected productId 1,3,5 the value of the hidden field would be "1,2,3". In PHP you can explode the string and cast each element into an int and do whatever you want with it.

This approach assumes that the user clicks some kind of "I am done button" once he is done with searching and selecting, so that you can submit the form with the hidden field to the server.

The alternative is to send the selected value back to the server using an Ajax request as soon as the user selected a value.

# sql - Keep getting this message: * ERROR at line 1: ORA-00923: FROM keyword not found whe

> ID：15866382
> 
> 赞同：1
> 
> 时间：2013-04-07T18:49:29.453
> 
> 标签：sql, oracle, ora-00923

I entered this:

```
SELECT COST TO_CHAR(COALESCE (COST, 0), '$99,990.99') 
  FROM COURSE;
SELECT COST TO_CHAR(NVL(cost, 0), '$99,990.99') COST
  FROM COURSE; 
```

Then I get this message:

```
SELECT COST TO_CHAR(COALESCE (COST, 0), '$99,990.99')
                   *
ERROR at line 1: 
ORA-00923: FROM keyword not found where expected 
SELECT  COST TO_CHAR(NVL(cost, 0), '$99,990.99') COST
                    *
ERROR at line 1: 
ORA-00923: FROM keyword not found where expected 
```

I am trying to get the costs of the courses, while in a specific format:

```
COST
-------------
 $0.00
 $1,000.00

```

Any help would be appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:53:20.053

查询应该是这样的：

```
SELECT  TO_CHAR(COALESCE (COST, 0), '$99,990.99') FROM COURSE;
SELECT  TO_CHAR(NVL(cost, 0), '$99,990.99')  FROM COURSE; 
```

您的 SELECT 语句中有太多`COST`关键字。

如果要`COST`在格式化时保留列，请添加逗号，如下所示：

```
SELECT COST, TO_CHAR(COALESCE (COST, 0), '$99,990.99') COST_FORMATTED FROM COURSE;
SELECT COST, TO_CHAR(NVL(cost, 0), '$99,990.99') COST_FORMATTED FROM COURSE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:53:58.410

您在第一个之后缺少逗号`COST`：

```
SELECT COST, TO_CHAR(COALESCE (COST, 0), '$99,990.99') FROM COURSE; 
SELECT COST, TO_CHAR(NVL(cost, 0), '$99,990.99') FROM COURSE; 
```

`COST`如果您选择从成本开始，则命名第二列是没有意义的。

# jquery - 带有 Ajax 数据 (JSON) 的 jqGrid：使用 azure 数据库中的“url”参数在网格中加载数据

> ID：15866383
> 
> 赞同：1
> 
> 时间：2013-04-07T18:49:32.830
> 
> 标签：jquery, azure, jqgrid, jqgrid-inlinenav

我对 ajax 实现有一个疑问。我会发现“url”参数需要定义为“service_name1.azure-mobile.net/tables/”来获取数据以填充网格。但我需要添加请求头“X-ZUMO-APPLICATION”来定义应用程序密钥。为了做到这一点，我认为我必须在函数中使用正确的标头创建一个 httprequest，并且需要在 jqGrid 的某些参数中设置该函数的引用以加载数据。您能指出如何实现吗？

使用 jqGrid 的页面以“ [https://service_name2.azure-mobile.net](https://service_name2.azure-mobile.net) ”开头

这里 service_name1 是 azure 移动服务名称，service_name2 是 azure Web 服务名称，我在移动服务 service_name1 上为 service_name2 启用了 CORS（跨对象资源共享）。

如果需要任何其他信息，请告诉我

更新了代码以使其与 Ajax 调用一起使用：

```
 jQuery("#list4").jqGrid({
        datatype: "json",
        url : 'https://mohit.azure-mobile.net/tables/Schedules',
        height: "auto",
        colNames: ['RowNo', 'RouteId', 'Area],
        colModel: [
                  { name: 'id', index: 'id', width: 50, sortable: false },
                  { name: 'RouteId', index: 'RouteId', width: 50, sortable: false, editable: true, editrules: { required: true} },
                  { name: 'Area', index: 'Area', width: 130, sortable: false, editable: true, editrules: { required: true} },
              ],
        rowList: [10, 20, 30],
        loadBeforeSend: function(jqXHR) {
                                            jqXHR.setRequestHeader('X-ZUMO-APPLICATION', 'mykey');
                                        },
        ajaxGridOptions: { contentType: "application/json" },
        postData: "",
        serializeGridData: function (data) {return JSON.stringify(data);},
        pager: '#pager1',
        viewrecords: true,
        caption: "Schedule Data",
        //loadonce: true,
        gridview: true
    }); 
```

奇怪的是，我无法使用 fiddler 捕获此请求，因此我正在使用 IE 开发人员工具栏（使用 F12）捕获请求。我尝试使用 fiddler 编写请求，使用 GET 和 url' [https://mohit.azure.net/tables/Schedules](https://mohit.azure.net/tables/Schedules) '并将标头参数设置为 X-ZUMO-APPLICATION : appKey。我得到了这个请求的正确响应（预期的 JSON 格式的表格数据）。所以我觉得附加参数有问题。

更新代码第 2 部分

```
 jQuery("#list4").jqGrid({
        datatype: "json",
        url : 'https://mohit.azure-mobile.net/tables/Schedules',
        height: "auto",
        colNames: ['RowNo', 'RouteId', 'Area'],
        colModel: [
                  { name: 'id', index: 'id', width: 50, sortable: false },
                  { name: 'RouteId', index: 'RouteId', width: 50, sortable: false, editable: true, editrules: { required: true} },
                  { name: 'Area', index: 'Area', width: 130, sortable: false, editable: true, editrules: { required: true} }
              ],
        rowList: [10, 20, 30],
        loadBeforeSend: function(jqXHR) {
                                            jqXHR.setRequestHeader('X-ZUMO-APPLICATION', 'myKey');
                                        },
        loadComplete: function () {
                                        //alert("OK");
                                  },
        loadError: function (jqXHR, textStatus, errorThrown) {
                                                                    alert('HTTP status code: ' + jqXHR.status + '\n' +
                                                                    'textStatus: ' + textStatus + '\n' +
                                                                    'errorThrown: ' + errorThrown);
                                                                     alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
                                                             },
        ajaxGridOptions: { contentType: "application/json", cache: true },
        postData: "",
        pager: '#pager1',
        viewrecords: true,
        caption: "Schedule Data",
        loadonce: true,
        gridview: true
    });

   var inlineparams = {
        restoreAfterSelect: false,
        add: true,
        edit: true,
        save: true,
        cancel: true,
        del: true
    };

    jQuery("#list4").jqGrid('navGrid', "#pager1", { edit: false, save: false, add: false, cancel: false, del: false });
    jQuery("#list4").jqGrid('inlineNav', "#pager1", inlineparams);       
} 
```

**jqGrid 4.4.5版本使用ajax方式加载网格数据的解决方案**

```
 jQuery("#list4").jqGrid({
        datatype: "json",
        url : 'https://mohit.azure-mobile.net/tables/Schedules',
        height: "auto",
        colNames: ['RowNo', 'RouteId', 'Area'],
        colModel: [
                  { name: 'id', index: 'id', width: 50, sortable: false },
                  { name: 'RouteId', index: 'RouteId', width: 50, sortable: false, editable: true, editrules: { required: true} },
                  { name: 'Area', index: 'Area', width: 130, sortable: false, editable: true, editrules: { required: true} },
              ],
        rowList: [10, 20, 30],
        loadBeforeSend: function(jqXHR) {
                                            jqXHR.setRequestHeader('X-ZUMO-APPLICATION', 'myKey');
                                        },
        loadComplete: function () {
                                        //alert("OK");
                                  },
        loadError: function (jqXHR, textStatus, errorThrown) {
                                                                    alert('HTTP status code: ' + jqXHR.status + '\n' +
                                                                    'textStatus: ' + textStatus + '\n' +
                                                                    'errorThrown: ' + errorThrown);
                                                                     alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
                                                             },
        ajaxGridOptions: { contentType: "application/json", cache: true },
        postData: "",
        pager: '#pager1',
        viewrecords: true,
        caption: "Schedule Data",
        loadonce: true,
        jsonReader: {repeatitems: false},
        gridview: true
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:26:45.907

首先，我认为“如何调用自定义函数来加载数据而不是使用“url”参数”这个问题的标题是不正确的。我认为您描述的内容可以通过标准 Ajax 调用实现，但使用 JSONP 类型而不是 JSON。

要设置自定义 HTTP/HTTPS 标头，您可以使用jqGrid 回调`setRequestHeader`内部的方法。`loadBeforeSend`见[答案](https://stackoverflow.com/a/5706690/315935)。`beforeSend`如果在执行 jqGrid 的 jQuery.ajax 调用的回调中编辑网格。您可以使用jqGrid 的`ajaxEditOptions`or`ajaxRowOptions`选项（取决于您使用的编辑模式）来设置`beforeSend`jQuery.ajax 调用的回调。或者，您可以使用`headers`jQuery.ajax 选项（可以在 jqGrid 中使用`ajaxGridOptions`,`ajaxEditOptions`或设置它`ajaxRowOptions`）。

我认为，如果您正确配置了跨域资源共享 (CORS)（请参见[此处](http://weblogs.asp.net/scottgu/archive/2013/03/18/windows-azure-new-hadoop-service-html5-js-cors-phonegap-mercurial-and-dropbox-support.aspx)），您可以在 jqGrid 中使用 JSONP 来加载数据。[请参阅此处](https://stackoverflow.com/a/4326986/315935)、[此处](https://stackoverflow.com/a/9588051/315935)和[此处](https://stackoverflow.com/a/15521572/315935)的示例。

**更新**：我无法测试代码，但我认为您应该更改您使用的一些选项/回调：

1.  删除`serializeGridData`是你使用`postData: ""`
2.  更改`datatype: "json"`为`datatype: "jsonp"`
3.  更改`ajaxGridOptions: { contentType: "application/json" }`为`ajaxGridOptions: { contentType: "application/json", cache: true }`

如果没有帮助，我建议您使用[Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)之类的工具来跟踪 HTTPS 流量。您还需要在工具内激活 HTTPS 跟踪（请参阅文档）。

**UPDATED 2**: It seems that in case of usage Windows Azure Mobile Services you can use `datatype: "json"` and `url: 'https://<service_name1>.azure-mobile.net/tables/<TableName>'`. To get the data it's important only to use

```
ajaxGridOptions: { contentType: "application/json" },
postData: "",
jsonReader: {
    repeatitems: false,
    root: function (obj) {
        return obj;
    }
} 
```

To be able to modify the data with respect of inline editing you should produce HTTP request having

```
PATCH https://mstrans.azure-mobile.net/tables/<TableName>/<TableItemId> HTTP/1.1
Content-Type: application/json 
```

in the HTTP header and JSON data with the modified row, but without unneeded `oper` parameter. To do this you can

```
editurl: "https://mohit.azure-mobile.net/tables/Schedules",
ajaxRowOptions: { contentType: "application/json" },
serializeRowData: function (postData) {
    if (postData != null && postData.oper) {
        delete postData.oper;
    }
    return JSON.stringify(postData);
} 
```

The code above will do almost all what one need with the exception that it will be used as URL "[https://mohit.azure-mobile.net/tables/](https://mohit.azure-mobile.net/tables/)" instead of "[https://mohit.azure-mobile.net/tables/](https://mohit.azure-mobile.net/tables/)/".

To make the last step one can modify `url` inside of for example `oneditfunc` callback of `inlineparams` or better `jqGridInlineEditRow` event:

```
var inlineparams = {
    editParams: { mtype: "PATCH", keys: true},
    addParams: {
        addRowParams: { mtype: "POST", keys: true }
    }
};

jQuery("#list4").bind("jqGridInlineEditRow", function (e, rowid, options) {
    if (options.mtype === "PATCH") {
        options.url = "https://mohit.azure-mobile.net/tables/Schedules/" +
            encodeURIComponent(rowid);
    }
}); 
```

# sql-server - Handle records in Parallel Mode

> ID：15866385
> 
> 赞同：0
> 
> 时间：2013-04-07T18:49:41.063
> 
> 标签：sql-server, tsql

I was asked to run a heavy update after DB conversion, for a given list of Orders ID's ,

I need to go over the list and handle each ID.

For example:

--Customer Table:

create table CustOrders ( ID int , CustFName varchar(10), CustLname varchar(10), Primary key(ID) )

For each id in the list, a stored procedure will update the record.

My first thought was to:

1.  Create stored procedure which accepts list of id's (with table value parameter) .

2.  For each id , do my stuff

But then I’ve realized it will take too much time and there for I came up with an idea

And try and run in a parallel mode, for example:

Try to run several stored procedure where each stored procedure handles different bulk of ID's ,

Divided by Mod operator for example .

This is the reason I have decided to publish the question, maybe you have a better idea how to write procedure which can run in parallel mode.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:57:48.450

这是一个分区表吗？如果不运行并行更新可能无济于事。它仍然是另一端的一组写入头。

# c# - 从可枚举中过滤重复项

> ID：15866386
> 
> 赞同：4
> 
> 时间：2013-04-07T18:49:47.853
> 
> 标签：c#

我有一个可能包含重复项的无序枚举，我想删除所有具有重复项的项，并仅保留在原始枚举中仅出现一次的项。

示例：A 和 C 被删除，因为它们不止一次出现：

输入 {A,C,B,A,C,D,A}
输出 {B,D}

一个快速而肮脏的实现可能是：

```
IEnumerable<T> Filter(IEnumerable<T> items)
{
   items.Where(item => items.Count(x => x.Equals(item)) == 1);
} 
```

显然不是快速或优雅。

下面的示例仍然是二次的（稍微快一点），但需要对输入进行 ToList() 调用。

```
IEnumerable<T> Filter(IEnumerable<T> items)
{
    List<T> src = items.ToList();
    for(int i=0; i<src.Count; i++)
    {
       if (src.IndexOf(src[i], i+1) < 0)
         yield return src[i]; 
    }
} 
```

如果您希望它相当紧凑和可读（代码方面），同时又不会像这些实现那样慢得让人脑筋急转弯，您将如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:55:27.830

LINQ 使这很容易`GroupBy`：

```
IEnumerable<String> foo = new[]{ "A", "C", "B", "A", "C", "D", "A" };
Ienumerable<String> result = foo.GroupBy (x => x)          // A=>3,C=>2,B=>1,D=>1
                               .Where(x => x.Count() == 1) // B=>1,D=>1
                               .Select (x => x.Key);       // B,D 
```

1.  按值分组
2.  过滤掉只有 1 个条目的
3.  选择原始值

不确定性能需要什么，但我倾向于发现 GroupBys 自己可读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:08:11.010

你可以及时做到这一点`O(N)`。

算法：

*   创建字典 [T, count] - ( *O(1)* )
*   扫描输入 - ( *O(N)* )，插入一个项目 - *(O(1))*或增加计数 - *(O(1))*
*   扫描字典中计数为 1 的项目 - ( *O(N)* )

此解决方案需要两次完整扫描：一次是输入，第二次是结果字典。虽然，它不是 LINQ，但实际上可能比 LINQ 工作得更快。

```
class Program
{
    static void Main(string[] args)
    {
        var input = new[] { "A", "C", "B", "A", "C", "D", "A" };
        var result = Filter(input);
        Console.WriteLine(result);
    }

    static IEnumerable<T> Filter<T>(IEnumerable<T> items)
    {
        var dictionary = new Dictionary<T, int>();

        //first scan of the input
        foreach (T item in items)
        {
            if (dictionary.ContainsKey(item))
            {
                dictionary[item]++;
            }
            else
            {
                dictionary[item] = 1;
            }
        }

        //second scan
        return from x in dictionary
                where x.Value == 1
                select x.Key;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:56:06.240

使用集合怎么样：

```
IEqualityComparer<T> comparer = EqualityComparer<T>.Default;

HashSet<T> itemsToKeep = new HashSet<T>(comparer );
HashSet<T> itemsToRemove = new HashSet<T>(comparer );

foreach(T item in items)
{
   if (itemsToRemove.Add(item))
   {
       continue;
   }
   itemsToKeep.Add(item);
}

itemsToKeep.ExceptWith(itemsToRemove); 
```

* * *

如果可能，您可以使用自定义`IEqualityComparer<T>`实现来加快集合的性能。

# arrays - 如何创建动态数组并将其值求和

> ID：15866387
> 
> 赞同：1
> 
> 时间：2013-04-07T18:50:10.083
> 
> 标签：arrays, dynamic, vbscript

下面的 vbs 代码为文档中的每一行字符串写入一个字数（作为整数）。如何创建一个动态数组（每行的字数）并总结这些值？

```
Function AddLineNum()
Dim nLine, sLine, nCount, nLen

nCount = 0
Do Until oInStream.AtEndOfStream
nLine = oInStream.Line
sLine = oInStream.ReadLine

'working word count for each line
nLen  = len(sLine) - len(Replace (sLine, " ", "")) +1

oOutStream.WriteLine nLen

nCount = nCount + 1
Loop
AddLineNum = nCount

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:40:53.210

使用标准 VBScript 数组，您可以这样做：

```
totalCount = 0
arr = Array()

Do Until oInStream.AtEndOfStream
  '...
  wordCount = UBound(Split(sLine)) + 1

  ReDim Preserve arr(UBound(arr)+1)
  arr(UBound(arr)) = wordCount
  totalCount = totalCount + wordCount

  nCount = nCount + 1
Loop 
```

请注意，`ReDim Preserve`将整个数组复制到一个新数组，因此这对于大型数组来说效果不佳。

另一种方法是使用[`ArrayList`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)该类（需要 .NET）：

```
totalCount = 0
Set arr = CreateObject("System.Collections.ArrayList")

Do Until oInStream.AtEndOfStream
  '...
  wordCount = UBound(Split(sLine)) + 1

  arr.Add wordCount
  totalCount = totalCount + wordCount

  nCount = nCount + 1
Loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:57:05.920

除了 Ansgar 的建议（ReDim 数组、ArrayList）之外，您还可以使用 Dictionary：

```
cscript wcvbs.vbs
0 217 words according to '\w+' regexp
1 216 words according to wc.bat (perl)
2 319 words according to Len Diff
Dirty details:
* 2 2 "Option Explicit"
* 3 1 ""
* 4 11 "Dim oFS   : Set oFS   = CreateObject("Scripting.FileSystemObject")"
* 5 1 ""
* 6 8 "Dim reWrd : Set reWrd = New RegExp"
* 7 3 "reWrd.Global = True"
* 8 3 "reWrd.Pattern = "\w+""
* 9 3 "WScript.Echo "0" _"
* 10 5 "  , reWrd.Execute(oFS.OpenTextFile(WScript.ScriptFullName).ReadAll()).Count _"
* 11 8 "  , "words according to '\w+' regexp""
* 12 1 ""
* 13 11 "Dim oWS   : Set oWS   = CreateObject("WScript.Shell")"
* 14 10 "Dim oNWS  : Set oNWS  = New cNWS"
* 15 3 "WScript.Echo "1" _"
* 16 10 "  , Split(oNWS.clean(oWS.Exec("wc.bat """ & WScript.ScriptFullName & """").StdOut.ReadAll()))(2) _"
* 17 8 "  , "words according to wc.bat (perl)""
* 18 1 ""
* 19 7 "Dim dicWIL : Set dicWIL = CreateObject("Scripting.Dictionary")"
* 20 11 "Dim tsIn   : Set tsIn   = oFS.OpenTextFile(WScript.ScriptFullName)"
* 21 14 "Dim nSum   : nSum       = 0"
* 22 2 "Dim nLine"
* 23 3 "Do Until tsIn.AtEndOfStream"
* 24 9 "   Dim sLine : sLine = tsIn.ReadLine()"
* 25 14 "   dicWIL(tsIn.Line) = Array(Len(sLine) - Len(Replace(sLine, " ", "")) + 1, sLine)"
* 26 8 "   nSum = nSum + dicWIL(tsIn.Line)(0)"
* 27 1 "Loop"
* 28 1 "tsIn.Close"
* 29 3 "WScript.Echo "2" _"
* 30 5 "  , nSum _"
* 31 8 "  , "words according to Len Diff""
* 32 3 "WScript.Echo "Dirty details:""
* 33 5 "For Each nLine In dicWIL.Keys"
* 34 9 "    WScript.Echo "*", nLine, dicWIL(nLine)(0), qq(dicWIL(nLine)(1))"
* 35 1 "Next"
* 36 1 ""
* 37 2 "WScript.Quit 0"
* 38 1 ""
* 39 13 "Function qq(s) : qq = """" & s & """" : End Function"
* 40 1 ""
* 41 7 "Class cNWS ' normalize (trim, reduce) whitespace"
* 42 4 "  Private m_reTrim"
* 43 4 "  Private m_reReduce"
* 44 5 "  Private Sub Class_Initialize()"
* 45 15 "    Set m_reTrim       = New RegExp"
* 46 10 "    m_reTrim.Global    = True"
* 47 9 "    m_reTrim.Pattern   = "^\w+|\s+$""
* 48 13 "    Set m_reReduce     = New RegExp"
* 49 8 "    m_reReduce.Global  = True"
* 50 7 "    m_reReduce.Pattern = "\s+""
* 51 4 "  End Sub"
* 52 5 "  Public Function clean(s)"
* 53 10 "    clean = m_reReduce.Replace(m_reTrim.Replace(s, ""), " ")"
* 54 4 "  End Function"
* 55 3 " End Class" 
```

# php - htaccess 域重定向，包括子域

> ID：15866389
> 
> 赞同：-2
> 
> 时间：2013-04-07T18:50:14.283
> 
> 标签：php, .htaccess, redirect

我正在尝试重定向到新域并包含子域...

例如[http://somesub.olddomain.com/someuri](http://somesub.olddomain.com/someuri)应该重定向到[http://somesub.newdomain.com/someuri](http://somesub.newdomain.com/someuri)

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:09:35.770

`.htaccess`在您的旧子域域上创建一个，例如：

```
RewriteEngine on 
RewriteRule ^(.*)$ http://somsub.newdomain.com/$1 [R=301,L] 
```

或者，对于特定域的所有子域，规则将是：

```
RewriteCond %{HTTP_HOST} ^([^.]+\.){0,1}olddomain\.com [NC]
RewriteRule ^(.*)$ http://{%1}newdomain.com/$1 [R=301,L] 
```

# java - 我不明白为什么我的“可比”界面不起作用

> ID：15866391
> 
> 赞同：1
> 
> 时间：2013-04-07T18:50:22.180
> 
> 标签：java

我正在尝试实现`comparable`以使用`Arrays.sort(array)`但由于某种原因它没有`compareTo`在超类中找到该方法。我正在尝试比较字符串仅供参考。

编辑：对不起，我忘了添加我得到的错误。这里是：

```
Employee.java:32: error: cannot find symbol     
return super.compareTo((Object)other);
            ^
symbol: method compareTo(Object) 
```

代码：

```
public abstract class Employee implements Cloneable, Comparable
{
private Name name;
private double weeklyPay;
public Employee(String first, String middle, String last, double weeklyPay)
{
    this.weeklyPay = weeklyPay;
    name = new Name(first,middle,last);
}
public Employee(String last, double weeklyPay)
{
    this.name = name;
    this.weeklyPay = weeklyPay;
    name = new Name(last);
}
public Employee(String first, String last, double weeklyPay)
{
    this.name = name;
    this.weeklyPay = weeklyPay;
    name = new Name(first,last);
}

public abstract double getWeeklyPay();

public String getFullName()
{
    return name.getFullName();
}

public int compareTo(Object other)
{
    return super.compareTo((Object)other);
}

public int compareTo(Name name)
{
    return compareTo((Object)name.getFullName());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T18:54:41.140

`java.lang.Object`，这是你的超类，没有实现`Comparable`. 您应该将班级的签名更改为：

```
public abstract class Employee implements Cloneable, Comparable<Employee> 
```

然后实现这个方法：

```
public int compareTo(Employee other) {
    // logic to compare here
} 
```

使用实际逻辑进行比较（也就是不要尝试依赖其他一些对象的实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:53:58.457

`Comparable`是`interface`，因此它没有默认实现。您的类没有扩展任何其他`class`，这意味着它也没有继承任何实现。

`super.compareTo(...)`结果总是会以这种方式失败，除非您扩展另一个提供实现的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:54:57.087

我认为您真的想编写不同的比较器，每个要比较的字段之一：名称等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:57:18.267

问题是您正在尝试调用`super.compareTo( Object object)`，但由于您的 Employee 类本身并没有扩展一个类，它将在 Object 中寻找 compareTo 方法，而 Object 没有该方法。您需要在 Employee 中实际实现 compareTo 功能。

# python - 从 Sklearn SVM 模型中得到奇怪的结果

> ID：15866392
> 
> 赞同：0
> 
> 时间：2013-04-07T18:50:25.207
> 
> 标签：python, svm, image-recognition, scikit-learn

我正在尝试从 scikit-learn 训练支持向量机，但我似乎没有得到任何结果，我想知道是否有任何 svm 或 scikit learn 专家知道原因。这是我正在运行的示例。我有一些手写的数字数据，我想训练一个分类器来区分“a”和“b”。我使用的数据在这里，因此您也可以对其进行测试。这两个文件，培训文件和测试文件都在该存档中。任何帮助理解结果（支持向量机说一切都是'a'）将不胜感激。

这是我的脚本：

```
#!/usr/bin/env python

import os
import re
from sklearn import svm

def get_record(line):
    match = re.search("^(\S+) (\d+)", line)
    label = match.group(1)
    vector = list(match.group(2))
    vector = [int(x) for x in vector]
    return label, vector

def train_classifier():
    classifier = svm.SVC()
    data = open("sd19-train-binary.txt", "r")
    labels = []
    training_data = [] 
    i = 0
    for line in data:
        label, vector = get_record(line) 
        if label == 'a' or label == 'b': 
            labels.append(label)
            training_data.append(vector)
            i += 1
            if i > 100:
                break
    classifier.fit(training_data, labels) 
    return classifier

def test_classifier(classifier):
    data = open("sd19-test-binary.txt", "r")
    i = 0
    for line in data:
        label, vector = get_record(line)
        if label == 'a' or label == 'b':
            print label, classifier.predict(vector)
            i += 1
            if i > 100:
                break

def main():
    classifier = train_classifier()
    test_classifier(classifier)

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:44:24.533

默认情况下，SVC 使用 RBF 内核。如果不设置/交叉验证 gamma 和 C，您将无法获得有意义的结果。

# python - 为什么 Python 生成器在执行脚本中将其范围与全局混淆？

> ID：15866398
> 
> 赞同：4
> 
> 时间：2013-04-07T18:51:45.573
> 
> 标签：python, python-2.7, python-exec

好的，所以我在一个工具的配置脚本是`exec`'d python 脚本的环境中工作。exec 调用是这样的：

外部.py：

```
exec(open("inner.py").read(), globals(), {}) 
```

现在，我想在`exec`'d 脚本中做一些相对基本的迭代。在这种情况下，当某些值不在白名单中时进行工作：

内部.py：

```
items = (
  'foo/bar',
  'foo/baz',
  'foof',
  'barf/fizz',
)

whitelist = (
  'foo/',
)

for key in items:
  try:
    # Not terribly efficient, but who cares; computers are fast.
    next(True for prefix in whitelist if key.startswith(prefix))

  # Do some work here when the item doesn't match the whitelist.
  except StopIteration:
    print("%10s isn't in the whitelist!" % key) 
```

* * *

运行`python inner.py`产生预期的结果：

```
 foof isn't in the whitelist!
 barf/fizz isn't in the whitelist! 
```

**这是奇怪的部分：**运行`python outer.py`似乎表明解释器对生成器的范围感到困惑：

```
Traceback (most recent call last):
  File "outer.py", line 1, in <module>
    exec(open("inner.py").read(), globals(), {})
  File "<string>", line 15, in <module>
  File "<string>", line 15, in <genexpr>
NameError: global name 'key' is not defined 
```

* * *

其他一些注意事项：

*   你可以在循环`print(key)`内很好（在生成器运行之前）。`for`

*   将空字典替换`locals()`为解决`exec`了`outer.py`问题，但该代码超出了我的控制范围。

*   我正在运行 OS X 构建的 Python 2.7.2 (Mountain Lion)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:17:27.217

确实狡猾。

从[文档](http://docs.python.org/2/reference/simple_stmts.html#exec)：

> 如果将两个单独的对象作为全局变量和局部变量给出，则代码将像嵌入到类定义中一样被执行。

（请注意，当您`exec(..., globals(), locals())`在模块级别运行时，这不适用，因为`globals() is locals()`，即不是两个单独的对象）。

这表明您可以通过运行以下脚本简单地重现问题：

```
class A(object):

  items = (
    'foo/bar',
    'foo/baz',
    'foof',
    'barf/fizz',
  )

  whitelist = (
    'foo/',
  )

  for key in items:
    try:
      # Not terribly efficient, but who cares; computers are fast.
      next(True for prefix in whitelist if key.startswith(prefix))
      # Found!
      print(key)
    except StopIteration:
      pass 
```

“好的，但为什么我会在这里收到错误消息？”

So glad you asked. The answer is [here](https://stackoverflow.com/questions/1773636/class-attribute-evaluation-and-generators).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:12:06.270

为什么不在那里添加一个内部 for 循环：

```
for key in items:
    for prefix in whitelist:
        if key.startswith(prefix):
            print(key) 
```

我很确定你不会得到那个错误，而且它更简单/更容易阅读。

# objective-c - Objective-C on Windows

> ID：15866404
> 
> 赞同：-3
> 
> 时间：2013-04-07T18:52:33.270
> 
> 标签：objective-c, windows

I have been programming a lot of C++ and I was interested in starting to program Objective-C. However, I only have a PC that has Windows and Linux on it. Is it possible for me to program Objective-C without a Mac? Or is it mandatory to buy one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:57:46.117

如果您在 Linux 或其他任何环境下编译 Objective-c，您基本上将学习 Objective-c 的语法，但您不会学习如何在 iPhone 或 OSX 上真正做任何有用的事情。

买个Mac就行了。

# wordpress - Wordpress 查询 - 如果少于 3 个帖子，随机选择帖子

> ID：15866409
> 
> 赞同：0
> 
> 时间：2013-04-07T18:52:54.850
> 
> 标签：wordpress

我有一个查询，它返回带有自定义字段“精选”的帖子。代码看起来

```
<?php
$args = array( 
    'post_type' => 'koncert', 
    'posts_per_page' => 3, 
    'meta_query' => array(
        array(
            'key' => 'featured', // name of custom field
            'value' => '1', 
            'compare' => 'LIKE'
        ),
    ), 
    'meta_key' => 'datum', 
    'orderby' => 'meta_value', 
    'order' => ASC
);

$loop = new WP_Query( $args );
$countposts = $loop->post_count;
$count = 1;
// START OF THE LOOP
while ( $loop->have_posts() ) : $loop->the_post();
    /* do something */
    $count++;
endwhile;
wp_reset_postdata();
?> 
```

问题是我需要查询始终返回至少三个“精选”帖子，但情况并非总是如此。

那么，检查查询中的帖子计数的最简单方法是什么，如果少于三个，从这个自定义帖子类型中随机选择另一个帖子（并且仍然让查询按`'meta_key' => 'datum'`?

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:09:08.400

您需要进行初始提取，查看您获得了多少结果，然后“随机”获得一些您缺少总数的帖子，对它们进行标记，然后根据基准元值对它们进行排序。循环集是不同的，因为它使用`get_posts()`而不是`WP_Query`使它更容易作为数组使用。

*请注意，我没有运行下面的代码，这是一个概念证明并且未经测试*

```
// The total posts to display
$total_count = 3;

// The query args
$args = array( 
    'post_type' => 'koncert', 
    'posts_per_page' => $total_count, 
    'meta_query' => array(
        array(
            'key' => 'featured', // name of custom field
            'value' => '1', 
            'compare' => '='
        ),
    ), 
    'meta_key' => 'datum', 
    'orderby' => 'meta_value', 
    'order' => ASC
);

// Get the posts that are "featured"
$featured = get_posts( $args );

// Figure out if we need to fetch "random" posts to get to the $total_count
$rnd_count = $total_count - count( $featured );

if ( $rnd_count > 0 ) {
    // Make sure we don't get the same posts
    $post__not_in = array();
    for ( $featured as $f ){
        $post__not_in[] = $f->ID;
    }

    // Set up the args for a random post
    $args = array( 
        'post_type' => 'koncert', 
        'posts_per_page' => $rnd_count, 
        'post__not_in' => $post__not_in, 
        'orderby' => 'rand', // http://codex.wordpress.org/Template_Tags/get_posts#Random_posts
    );

    // Get the "random" posts now that we remove the meta filter and excluding the ones we already fetched
    $random = get_posts( $args );

    // Merge into a single array
    $featured = array_merge( $featured, $random );

    // Get the datum meta for each post so we can sort on it
    $sort = array();
    $post_by_id = array();
    for ( $featured as $f ){
        $sort[ $f->ID ] = get_post_meta( $f->ID, 'datum', true );
        $post_by_id[ $f->ID ] = $f;
    }
    // Sort and maintain key since it's the post
    asort( $sort, SORT_STRING ); // use SORT_NUMERIC for numbers, see http://www.php.net/manual/en/function.sort.php

    $i = 0;
    for ( $sort as $key => $s ){
        $featured[$i++] = $post_by_id[ $key ];
    }
}

// since we used get_posts() and not WP_Query, use the following to create the loop.
for ( $featured as $f ){
    global $post;
    $post = $f;
    setup_postdata( $post );
    // use the_content() etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:21:05.437

第二种选择是使用 SQL 查询来获取此信息，而不是使用内置的 WordPress 函数。获取已发布的“koncert”类型的所有帖子，然后加入帖子元表两次并根据不同获取的元值进行排序，使用 LIMIT 仅返回 3 个结果。

```
global $wpdb;
$sql = <<<SQL
    SELECT p.ID, p.post_content, p.post_title, datum.meta_value as datum, featured.meta_value as featured
    FROM {$wpdb->posts} p
    LEFT JOIN {$wpdb->postmeta} featured 
        ON featured.post_id = p.ID 
        AND featured.meta_key = 'featured'
    LEFT JOIN {$wpdb->postmeta} datum 
        ON datum.post_id = p.ID 
        AND datum.meta_key = 'datum'
    WHERE 
        p.post_type = 'koncert' 
        AND p.post_status = 'publish'
    ORDER BY featured DESC, datum DESC, RAND()
    LIMIT 3
SQL;
$posts = $wpdb->get_results( $sql ); 
```

# ajax - Google App Engine：实现会话 API/ajax 请求的常用方法？

> ID：15866418
> 
> 赞同：1
> 
> 时间：2013-04-07T18:53:57.700
> 
> 标签：ajax, google-app-engine, session, cookies, access-token

我什至不明白用户会话信息是如何在常规 HTTP/S GET 调用中保持不变的，我指的是细节，比如服务器/客户端交换中的*逐行*代码和数据。我基本上知道它是服务器上的一个会话对象，其中包含您需要的内容，以及包含在“cookie”WTHTI 中的该对象的 ID。这变得不透明（对Javascript）与服务器来回传递。该死的那个碰不得的饼干。

我想在 python/AppEngine 中实现会话 CRUD 数据库端点。进行会话持久性的最佳方法是什么？（没有框架、插件或现成的解决方案，我想了解）。我什至不知道这到底是如何在任何应用程序中完成的，但它是如此普遍。

我猜想每个 API 调用都会发送一个令牌，但不是那么混乱，只是在客户端的 Javascript/DOM 中有一个令牌？

饼干呢，饼干到底是怎么起作用的？这对我来说是一个盲点，而且非常关键。我不知道为什么它不透明且易于实施。

如果我们所做的只是将一个 id 来回传输并转发给 Ident 用户，并调用用户的会话对象，那么 cookie 和（不可食用的）令牌之间有什么区别？

是否完全有可能只进行用户身份验证、转换到会话、只使用令牌，还是必须使用 cookie？

我正在实现我自己的自定义身份验证（在 webapp2_extras 的背面），它将使用安全的 url 和所有常用的 saltyhashed 密码预防措施。但是我所有的 AJAX 机器的“令牌”和“cookie”会话部分仍然让我大吃一惊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:05:02.140

饼干：

1.  Cookie 由浏览器内部处理，而不是由 Javascript 或 DOM 处理。
2.  Cookie 非常简单：只是一个名称：值对作为 HTTP 标头中的字符串发送
3.  操作原理非常简单：服务器向浏览器发送 cookie，之后浏览器将 cookie 与每个请求一起发送到该服务器（这取决于 cookie 类型及其属性）
4.  有几种类型的 cookie，但会话 cookie 是会话绑定的：浏览器将它们保存在内存中并发送它们，直到用户关闭浏览器应用程序。

在此处阅读更多信息：[http ://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

会话是来自同一用户的一系列 http 请求。它们通常是使用 cookie 构建的（还有其他技术），因此会话依赖于 cookie（但 cookie 不依赖于会话）。

Server sessions are an internal persistent storage bound to certain cookie, for example GAE on production uses cookie with name `ACSID` to track it's sessions. So when servers does not get a session cookie it assumes this is a new session and creates a new session cookie and sends it to client and creates the object storage tied to that session. Afterwards whenever server gets a session cookie it loads object storage bound to that cookie.

Note: cookies and sessions are not authentication: they can tell you that a series of requests come from the same user, but they don't tell you which user this is. This is the job of authentication, which you can roll your own (username-password based or similar) or you could use one of the available authentication protocols (OpenID, OAuth).

Qs:

*   Yes, you can your own session tracking with "non-edible" token, provided that you control both server and client. OTOH browsers are standards based and they use cookies out-of-the-box to provide sessions (but you can still roll your own in JS).
*   Best way to do session persistence: use an [existing session library for python](https://github.com/dound/gae-sessions/wiki/comparison-with-alternative-libraries). You can still roll your own for learning purposes, but for production you should stick with one of the tested solutions.

# php - 使用分配而不是平等 - 好还是坏的做法？

> ID：15866425
> 
> 赞同：-3
> 
> 时间：2013-04-07T18:54:08.980
> 
> 标签：php, coding-style

我知道 while-condition 子句中的以下分配将起作用：

```
while ($info=mysql_fetch_array($data_jurisdiction))
{
//some stuff
} 
```

`$info`被分配了一些值，while 条件将循环，除非分配的右侧返回 a `FALSE`, `NULL`, `0`,`array()`等。

问题：在语言语法需要相等性检查的情况下进行分配是好还是坏？Zend Studio 立即指出这是一个警告。每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:57:23.943

它经常不受欢迎，因为它混淆了潜在的问题，并且有时除了你自己之外的开发人员更难阅读。那就是说我经常这样做，但是以分配和检查的方式进行，例如：

```
while(false !== ($info = mysql_fetch_array($result))) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:59:00.867

问题的陈述是错误的。

There is no "Assignment Instead of Equality". An IF statement (as well as other control flow operators) is not limited to comparison operators only, but can evaluate almost any PHP expression. And language do not "expect an equality check" by any means. Language expects only a value that can be cast to boolean and compared to TRUE.
There is NO essential connection between `IF` operator and comparison operators. That's two distinct operators which can be used independently.

I.e. comparison without if:

```
$var = $a == $b; // $var now contains boolean value 
```

and contrary:

```
if ($a + $b) // addition
if (isTrue()) // function
if ($var) // variable 
```

every expression from the above will be evaluated, result cast to boolean and this boolean checked by IF statement.

So, it's all right as long as you understand what are you doing.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T18:56:53.507

您已经在问题中发现了问题所在。

该问题的解决方案通常是使用迭代器模式。

```
$jurisdictions = new MysqlResultIterator($data_jurisdiction);

foreach ($jurisdictions as $info)
{
    // some stuff
} 
```

对于每个非`mysql_*`数据库库的支持，`foreach`都可以直接用于结果集。

Foreach 使无结果和下一个结果之间的区别更加明显。迭代器模式允许在不将其分配给结果变量的情况下表达有效性。

# python - BeautifulSoup 没有抓取动态内容

> ID：15866426
> 
> 赞同：1
> 
> 时间：2013-04-07T18:54:13.473
> 
> 标签：python, html, dynamic, beautifulsoup

我遇到的问题是我想从此页面获取相关链接：http: [//support.apple.com/kb/TS1538](http://support.apple.com/kb/TS1538)

如果我在 Chrome 或 Safari 中检查元素，我可以看到`<div id="outer_related_articles">`列出的所有文章。如果我尝试用 BeautifulSoup 抓取它，它将抓取页面和*除*相关文章之外的所有内容。

这是我到目前为止所拥有的：

```
import urllib2
from bs4 import BeautifulSoup
url = "http://support.apple.com/kb/TS1538"
response = urllib2.urlopen(url)
soup = BeautifulSoup(response.read())
print soup 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:38:32.767

此部分使用 Javascript 加载。禁用浏览器的 Javascript 以查看如何`BeautifulSoup`“查看”页面。

从这里你有两个选择：

*   使用无头浏览器，它将执行 Javascript。请参阅有关此问题：[Headless Browser for Python (Javascript support REQUIRED!)](https://stackoverflow.com/questions/6025082/headless-browser-for-python-javascript-support-required)
*   试着弄清楚苹果网站是如何加载内容并模拟它的——它可能会对某个地址进行 AJAX 调用。

* * *

经过一番挖掘，它似乎向这个地址发出了请求（[http://km.support.apple.com/kb/index?page=kmdata&requestid=2&query=iOS%3A%20Device%20not%20recognized%20in%20iTunes%20for %20Windows&locale=en_US&src=support_site.related_articles.TS1538&excludeids=TS1538&callback=KmLoader.receiveSuccess](http://km.support.apple.com/kb/index?page=kmdata&requestid=2&query=iOS%3A%20Device%20not%20recognized%20in%20iTunes%20for%20Windows&locale=en_US&src=support_site.related_articles.TS1538&excludeids=TS1538&callback=KmLoader.receiveSuccess) ) 并使用 JSONP 以`KmLoader.receiveSuccess`接收函数的名称加载结果。使用 Chrome 开发工具的 Firebug 更详细地检查页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-31T21:16:11.550

我遇到了类似的问题，BeautifulSoup 可能无法捕获动态创建的 html 内容。一个非常基本的解决方案是让它在捕获内容之前等待几秒钟，或者使用具有等待元素然后继续的功能的 Selenium。所以对于前者，这对我有用：

```
import time

# .... your initial bs4 code here

time.sleep(5) #5 seconds, it worked with 1 second too
html_source = browser.page_source

# .... do whatever you want to do with bs4 
```

# python - Mac OS 上的“wx.media.MediaCtrl”在“加载（..）”上一直失败

> ID：15866428
> 
> 赞同：0
> 
> 时间：2013-04-07T18:54:16.957
> 
> 标签：python, wxpython, mp3

我一直在寻找一个用 python 编写的简单 mp3 播放器示例，发现了这个： http: [//www.blog.pythonlibrary.org/2010/04/20/wxpython-creating-a-simple-mp3-player/](http://www.blog.pythonlibrary.org/2010/04/20/wxpython-creating-a-simple-mp3-player/)

我一直在尝试运行它，但它在第 134 行失败（调用“加载”方法时）

错误回溯：

```
Traceback (most recent call last):
File "player_skeleton2.py", line 161, in onBrowse
self.loadMusic(path)
File "player_skeleton2.py", line 135, in loadMusic
wx.MessageBox("Unable to load %s: Unsupported format?" % path,
NameError: global name 'path' is not defined 
```

我在想也许这与我在 Mac OS 上有关

任何人都可以帮助我，或者可以为我提供一个不同的 mp3 播放器示例吗？

非常感谢！

播放器代码：

```
#----------------------------------------------------------------------
# player_skeleton2.py
#
# Created: 04/15/2010
#
# Author: Mike Driscoll - mike@pythonlibrary.org
#----------------------------------------------------------------------

import os
import wx
import wx.media
import wx.lib.buttons as buttons

dirName = os.path.dirname(os.path.abspath(__file__))
bitmapDir = os.path.join(dirName, 'bitmaps')

########################################################################
class MediaPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)

        self.frame = parent
        self.currentVolume = 50
        self.createMenu()
        self.layoutControls()

        sp = wx.StandardPaths.Get()
        self.currentFolder = sp.GetDocumentsDir()

        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.onTimer)
        self.timer.Start(100)

    #----------------------------------------------------------------------
    def layoutControls(self):
        """
        Create and layout the widgets
        """

        try:
            self.mediaPlayer = wx.media.MediaCtrl(self, style=wx.SIMPLE_BORDER)

        except NotImplementedError:
            self.Destroy()
            raise

        # create playback slider
        self.playbackSlider = wx.Slider(self, size=wx.DefaultSize)
        self.Bind(wx.EVT_SLIDER, self.onSeek, self.playbackSlider)

        self.volumeCtrl = wx.Slider(self, style=wx.SL_VERTICAL|wx.SL_INVERSE)
        self.volumeCtrl.SetRange(0, 100)
        self.volumeCtrl.SetValue(self.currentVolume)
        self.volumeCtrl.Bind(wx.EVT_SLIDER, self.onSetVolume)

        # Create sizers
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)
        audioSizer = self.buildAudioBar()

        # layout widgets
        mainSizer.Add(self.playbackSlider, 1, wx.ALL|wx.EXPAND, 5)
        hSizer.Add(audioSizer, 0, wx.ALL|wx.CENTER, 5)
        hSizer.Add(self.volumeCtrl, 0, wx.ALL, 5)
        mainSizer.Add(hSizer)

        self.SetSizer(mainSizer)
        self.Layout()

    #----------------------------------------------------------------------
    def buildAudioBar(self):
        """
        Builds the audio bar controls
        """
        audioBarSizer = wx.BoxSizer(wx.HORIZONTAL)

        self.buildBtn({'bitmap':'player_prev.png', 'handler':self.onPrev,
                       'name':'prev'},
                      audioBarSizer)

        # create play/pause toggle button
        img = wx.Bitmap(os.path.join(bitmapDir, "player_play.png"))
        self.playPauseBtn = buttons.GenBitmapToggleButton(self, bitmap=img, name="play")
        self.playPauseBtn.Enable(False)

        img = wx.Bitmap(os.path.join(bitmapDir, "player_pause.png"))
        self.playPauseBtn.SetBitmapSelected(img)
        self.playPauseBtn.SetInitialSize()

        self.playPauseBtn.Bind(wx.EVT_BUTTON, self.onPlay)
        audioBarSizer.Add(self.playPauseBtn, 0, wx.LEFT, 3)

        btnData = [{'bitmap':'player_stop.png',
                    'handler':self.onStop, 'name':'stop'},
                    {'bitmap':'player_next.png',
                     'handler':self.onNext, 'name':'next'}]
        for btn in btnData:
            self.buildBtn(btn, audioBarSizer)

        return audioBarSizer

    #----------------------------------------------------------------------
    def buildBtn(self, btnDict, sizer):
        """"""
        bmp = btnDict['bitmap']
        handler = btnDict['handler']

        img = wx.Bitmap(os.path.join(bitmapDir, bmp))
        btn = buttons.GenBitmapButton(self, bitmap=img, name=btnDict['name'])
        btn.SetInitialSize()
        btn.Bind(wx.EVT_BUTTON, handler)
        sizer.Add(btn, 0, wx.LEFT, 3)

    #----------------------------------------------------------------------
    def createMenu(self):
        """
        Creates a menu
        """
        menubar = wx.MenuBar()

        fileMenu = wx.Menu()
        open_file_menu_item = fileMenu.Append(wx.NewId(), "&Open", "Open a File")
        menubar.Append(fileMenu, '&File')
        self.frame.SetMenuBar(menubar)
        self.frame.Bind(wx.EVT_MENU, self.onBrowse, open_file_menu_item)

    #----------------------------------------------------------------------
    def loadMusic(self, musicFile):
        """"""
        if not self.mediaPlayer.Load(musicFile):
            wx.MessageBox("Unable to load %s: Unsupported format?" % path,
                          "ERROR",
                          wx.ICON_ERROR | wx.OK)
        else:
            self.mediaPlayer.SetInitialSize()
            self.GetSizer().Layout()
            self.playbackSlider.SetRange(0, self.mediaPlayer.Length())
            self.playPauseBtn.Enable(True)

    #----------------------------------------------------------------------
    def onBrowse(self, event):
        """
        Opens file dialog to browse for music
        """
        wildcard = "MP3 (*.mp3)|*.mp3|"     \
                   "WAV (*.wav)|*.wav"
        dlg = wx.FileDialog(
            self, message="Choose a file",
            defaultDir=self.currentFolder, 
            defaultFile="",
            wildcard=wildcard,
            style=wx.OPEN | wx.CHANGE_DIR
            )
        if dlg.ShowModal() == wx.ID_OK:
            path = dlg.GetPath()
            self.currentFolder = os.path.dirname(path)
            self.loadMusic(path)
        dlg.Destroy()

    #----------------------------------------------------------------------
    def onNext(self, event):
        """
        Not implemented!
        """
        pass

    #----------------------------------------------------------------------
    def onPause(self):
        """
        Pauses the music
        """
        self.mediaPlayer.Pause()

    #----------------------------------------------------------------------
    def onPlay(self, event):
        """
        Plays the music
        """
        if not event.GetIsDown():
            self.onPause()
            return

        if not self.mediaPlayer.Play():
            wx.MessageBox("Unable to Play media : Unsupported format?",
                          "ERROR",
                          wx.ICON_ERROR | wx.OK)
        else:
            self.mediaPlayer.SetInitialSize()
            self.GetSizer().Layout()
            self.playbackSlider.SetRange(0, self.mediaPlayer.Length())

        event.Skip()

    #----------------------------------------------------------------------
    def onPrev(self, event):
        """
        Not implemented!
        """
        pass

    #----------------------------------------------------------------------
    def onSeek(self, event):
        """
        Seeks the media file according to the amount the slider has
        been adjusted.
        """
        offset = self.playbackSlider.GetValue()
        self.mediaPlayer.Seek(offset)

    #----------------------------------------------------------------------
    def onSetVolume(self, event):
        """
        Sets the volume of the music player
        """
        self.currentVolume = self.volumeCtrl.GetValue()
        print "setting volume to: %s" % int(self.currentVolume)
        self.mediaPlayer.SetVolume(self.currentVolume)

    #----------------------------------------------------------------------
    def onStop(self, event):
        """
        Stops the music and resets the play button
        """
        self.mediaPlayer.Stop()
        self.playPauseBtn.SetToggle(False)

    #----------------------------------------------------------------------
    def onTimer(self, event):
        """
        Keeps the player slider updated
        """
        offset = self.mediaPlayer.Tell()
        self.playbackSlider.SetValue(offset)

########################################################################
class MediaFrame(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Python Music Player")
        panel = MediaPanel(self)

#----------------------------------------------------------------------
# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MediaFrame()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:12:17.390

该错误是因为变量路径未在代码中的任何位置定义。

尝试改变

```
wx.MessageBox("Unable to load %s: Unsupported format?" % path, 
```

至

```
wx.MessageBox("Unable to load %s: Unsupported format?" % musicFile, 
```

# javascript - 调整 DIV 中所有元素的大小和位置以匹配新尺寸

> ID：15866431
> 
> 赞同：1
> 
> 时间：2013-04-07T18:54:31.240
> 
> 标签：javascript, jquery, css, html

在我的网站上，我有一个包含很多元素的 div。元素由 px 中的坐标而不是 % 定位。

div 的高度 = 1000 像素，宽度 = 1000 像素；

在按钮上单击我将 Div 调整为 500px X 500px；

有没有办法我也可以调整其中所有元素的大小，而不必遍历每个元素并弄清楚每个元素的新大小和位置应该是什么？而且我需要在不使用百分比的情况下做到这一点。

我只是在问这是否可能或寻找提示或提示来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:11:41.733

听起来您应该从相对测量开始:)

下面是一些关于如何使用 jQuery 实现“丑陋方式”的示例代码：

```
$('#container div') // your selector here
    .each(function () {
        var t = $(this);
        var p = t.position();
        t.css({
            left: ~~(p.left * .5),      // ~~ is for flooring
            top: ~~(p.top * .5),        // you could do x / 2 instead of * .5
            height: ~~(t.height() * .5),
            width: ~~(t.width() * .5)
        });
    }); 
```

另一种方法可能是使用容器的 CSS 选择器来为其中的 div 声明一些备用测量值和坐标。这是一个例子：

```
#container { ... }
#container div { position: absolute; }
#container .myDiv1 { left: 40px; top: 40px; height: 100px; width: 100px; }
#container:hover .myDiv1 { left: 20px; top: 20px; height: 50px; width: 50px; } 
```

# arrays - 在perl中将数组的内容写入txt文件

> ID：15866433
> 
> 赞同：1
> 
> 时间：2013-04-07T18:54:40.130
> 
> 标签：arrays, perl, file-io

我试图实现的输出如下所示：

`Name age gpa`

对于每个数组中的每个元素，但是当我将数组的内容写入文件时，它会覆盖写入某处并显示如下：

```
name1 name2 age1 
```

这是我的代码，非常感谢所有帮助（即使是我的编码风格）。我只显示了我认为必要的代码部分，如果需要更多帮助，请告诉我。

```
sub get_name
{
    printf("Name :");
    push(@get_name, <STDIN>); #taking name from user and putting it in @get_name array
    chomp(@get_name); #erasing newline from input
    #return @get_name;
}       

sub get_age
{
    print "Age :";
    push(@get_age, <STDIN>); #taking name from user and putting it in @get_name array
    chomp(@get_age); #erasing newline from input
    #return @get_age;
}       

sub get_gpa
{
    print "GPA: ";
    push(@get_gpa,<STDIN>);  #taking name from user and putting it in @get_name array
    chomp(@get_gpa); #erasing newline from input
    #return @get_gpa; #returning value may be unnecessary
}       

sub continue
{
    print "Get student data: ";
     $stu_data = <STDIN>;

    if ($stu_data =~ m/[n]/)
    {
            print "\nEnter file name: "; $user_file = <STDIN>;
            open (FILE, ">>$user_file") or die $!;
            printf FILE "%-0.25s %3.3s %4.4s\n", @get_name, @get_age, @get_gpa;           #writing to user given file.
            exit;

    }
    elsif ($stu_data =~ m/[y]/)
    {       #possibly makes do while loop unnecessary
            &get_name;
            &get_age;
            &get_gpa;
            &continue;
    }

}
close FILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:42:48.847

由于你接受输入的方式，推到一个列表上，每个都`push(@get_name, <STDIN>);`将按行读取，直到用户点击 Ctrl-D。这是一个糟糕的用户界面，但这也意味着可以将多行推送到`@get_name`朋友身上。每行都是数组的一个元素。为了演示...

```
$ perl -we '@lines = <STDIN>;  for my $line (@lines) { print "Line: $line"; }'
Foo
Bar
Line: Foo
Line: Bar 
```

如果用户按两次输入期望输入结束，就会发生这种情况。

你想要的是`my $name = <STDIN>; push @names, $name;`. 这将只读取一行`$name`，然后自动停止。然后你把那个单一的名字推到`@names`.

然后在输出端还有另一个问题。 `printf`接受参数列表。Perl 不知道传入三个包含一个元素的列表和传入一个包含三个元素的列表之间的区别。它们都被压缩成一个大列表。因此`printf FILE "%-0.25s %3.3s %4.4s\n", @get_name, @get_age, @get_gpa`，只需将所有姓名、年龄和 gpas 混合到一个大列表中，printf 只打印前三个。所以如果有两个学生，你就通过了`name1, name2, age1, age2, gpa1, gpa2`。你需要一个循环。

```
for my $idx (0..$#get_name) {
    printf FILE "%-0.25s %3.3s %4.4s\n", $get_name[$idx], $get_age[$idx], $get_gpa[$idx];
} 
```

这表示从 0 循环到`@get_name`. 这是一减去循环中的项目数。由于历史原因，数组从零开始计数。然后，您可以在每个数组中为 printf 提供第零个、第一个、第二个...条目。

更深入地讲，有三种方法可以改进您的代码。

首先是更好地使用子程序。它们可以返回结果，而不是设置全局变量的例程。

```
sub get_name
{
    printf("Name :");
    my $name = <STDIN>;
    chomp($name);
    return $name;
}

# @names is a better name because it describes what it contains, not how you got it
push @names, get_name; 
```

其余的也一样。一旦你这样做了，很明显你不需要三个例程，而是一个。唯一改变的是提示。

```
sub get_input {
    my($prompt) = @_;  # this pulls in subroutine arguments

    print("$prompt: ");  # no need to use printf here
    my $input = <STDIN>;
    chomp($input);

    return $input;
}

push @names, get_input("Name");
push @ages,  get_input("Age");
push @gpas,  get_input("GPA"); 
```

现在，您不再需要维护三个相同的例程和三个出现错误的机会，而是拥有一个。

`continue`因为它是 Perl 中的关键字，所以对于子例程名称来说是一个糟糕的选择。你最好调用它`main`，因为它是你程序的主要部分，一个典型的约定。

与其`continue`调用自身，倒不如调用递归，这在这里非常有用但不是必需的，最好使用 while 循环。

```
sub main {
    while(1) {  # this is how you say "loop forever"
        print "Please enter data about a student.\n";
        push @names, get_input("Name");
        push @ages,  get_input("Age");
        push @gpas,  get_input("GPA");

        print "Would you like to enter more data?\n";
        my $more = <STDIN>;
        last if !$more =~ m/y/;  # last exits the current loop
    }

    print "\nEnter file name to output the data to: ";
    my $data_file = <STDIN>;
    open(my $fh, ">>$data_file") or die $!;

    for my $idx (0..$#names) {
        printf $fh "%-0.25s %3.3s %4.4s\n", $names[$idx], $ages[$idx], $gpas[$idx];
    }
} 
```

你的`printf`有问题。在`%3.3s`.3 部分对字符串没有任何意义。对于一个数字，它意味着将其打印到小数点后三位。但是你已经使用`%s`了这意味着一个字符串。我不知道你要干什么。对于 GPA，我假设您的意图是像 2.30 一样打印。那是`%.2f`（f 表示“浮点数”，这是程序员说“十进制数”的令人困惑的方式）。年龄总是一个整数，所以`%3d`. 是的，d 代表...整数。

如果您想再次读回此数据并分隔字段，通常的方法是使用选项卡分隔字段。然后，您可以在重新读取时拆分选项卡上的每一行。把它们放在一起......

```
 for my $idx (0..$#names) {
        printf $fh "%s\t%3d\t%.2f\n", $names[$idx], $ages[$idx], $gpas[$idx];
    } 
```

下一步要探索的是重组数据。将每个学生的数据拆分到多个数组中，这使得协调和传递到子程序变得很尴尬。相反，您将使用哈希。

```
my %student;
$student{name} = get_input("Name");
$student{age}  = get_input("Age");
$student{gpa}  = get_input("GPA");
push @students, \%student; 
```

`@students`现在包含哈希引用列表。这有点高级，我略读了一下，但现在你可以像这样得到第一个学生的名字。

```
my $first_student = $students[0];
my $name = $first_student->{name}; 
```

当将它们全部打印出来时，循环看起来像这样。

```
for my $student (@students) {
    printf $fh "%s\t%3d\t%.2f\n", $student->{name}, $student->{age}, $student->{gpa};
} 
```

总而言之，它看起来像这样。

```
use strict;
use warnings;

main();

sub main {
    my @students;

    # Get students
    while(1) {  # this is how you say "loop forever"
        print "Please enter data about a student.\n";
        my %student;
        $student{name} = get_input("Name");
        $student{age}  = get_input("Age");
        $student{gpa}  = get_input("GPA");
        push @students, \%student;

        print "Would you like to enter more data?\n";
        my $more = <STDIN>;
        last unless $more =~ m/y/;  # last exits the current loop
    }

    # Get the file to output to
    print "\nEnter file name to output the data to: ";
    my $data_file = <STDIN>;
    open(my $fh, ">>$data_file") or die $!;

    # Dump the students into the file
    for my $student (@students) {
        printf $fh "%s\t%3d\t%.2f\n", $student->{name}, $student->{age}, $student->{gpa};
    }
}

sub get_input {
    my($prompt) = @_;  # this pulls in subroutine arguments

    print("$prompt: ");  # no need to use printf here
    my $input = <STDIN>;
    chomp($input);

    return $input;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:03:00.387

代码中的这一行总共打印 3 个元素：（一个 printf 和 3 个`%s`元素）：

```
printf FILE "%-0.25s %3.3s %4.4s\n", @get_name, @get_age, @get_gpa; 
```

这不是你想要做的。它基本上会连接所有数组并打印前 3 个元素。如果所有数组都有两个元素，您将得到`name1 name2 age1`. 如果所有数组都有 3 个元素`name1 name2 name3`。等等。

试试这样：

```
for my $i (0..$#get_name) {
    printf FILE "%-0.25s %3.3s %4.4s\n", $get_name[$i], $get_age[$i], $get_gpa[$i];
} 
```

有几种方法可以在 perl 中编写此代码。这是类似 c 的版本。请注意：此循环假定所有 3 个数组具有相同数量的元素。

# vb.net - 如何在VB中进行多项选择测试？

> ID：15866435
> 
> 赞同：0
> 
> 时间：2013-04-07T18:54:46.903
> 
> 标签：vb.net, structured-data

这是家庭作业的一部分。我必须有结构化数据，并阅读 .dat 文件中的问题。到目前为止，这就是我所拥有的。我的 Private Sub cmdNext_Click 函数遇到了最大的麻烦。有 4 个显示答案的单选按钮，以及必须显示每个问题的标签，当我单击下一个按钮时，它会显示下一个问题并记录提交的答案。最后，我必须显示一个包含答案和分数的消息框。

在一个模块中，我必须把我老师给我们的这段代码放进去：

```
Module MyModule

Structure testQuestion
    <VBFixedString(100)> Public question As String
    <VBFixedString(30)> Public choiceA As String
    <VBFixedString(30)> Public choiceB As String
    <VBFixedString(30)> Public choiceC As String
    <VBFixedString(30)> Public choiceD As String
    <VBFixedString(1)> Public correctAnswer As String

End Structure
Public Const noOfQuestions = 10
Public test(noOfQuestions - 1) As testQuestion
Public Const correctAnswer = 100 / noOfQuestions
Public Const wrongAnswer = correctAnswer / 2 
```

然后以一种形式，我到目前为止有这个代码：

```
Option Explicit On

Public Class Example

Private Sub Example_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Main.Show()
    Me.Hide()
End Sub

Private Sub ShowQuestion()
    FileOpen(1, "Test1.dat", OpenMode.Random, , , Len(test(0)))

End Sub

Private Sub MarkTest()

    Dim grade As Integer = 0

    cmdNext.Text = "Test finished!"
    opt1.Enabled = False
    opt2.Enabled = False
    opt3.Enabled = False
    opt4.Enabled = False

End Sub

Private Sub cmdNext_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdNext.Click

    If opt1.Checked = True Then
        test(noOfQuestions - 1) = opt1.Text
    ElseIf opt2.Checked = True Then
        test(noOfQuestions - 1) = opt2.Text
    ElseIf opt3.Checked = True Then
        test(noOfQuestions - 1) = opt3.Text
    ElseIf opt4.Checked = True Then
        test(noOfQuestions - 1) = opt4.Text
    End If

    opt1.Focus()
    If noOfQuestions < 10 Then
        lblNumber.Text = lblNumber.Text + 1

        lblQuestion.Text = test(testQuestion)
        opt1.Text = choiceA(noOfQuestions - 1, 1)
        opt2.Text = testQuestion(noOfQuestions - 1, 2)
        opt3.Text = testQuestion(noOfQuestions - 1, 3)
        opt4.Text = testQuestion(noOfQuestions - 1, 4)

        If lblNumber.Text = 10 Then
            cmdNext.Text = "Submit"
        End If

    Else
        MarkTest()
    End If

End Sub

End Class 
```

# dom - 访问所有自定义 DOM 属性

> ID：15866436
> 
> 赞同：0
> 
> 时间：2013-04-07T18:54:47.467
> 
> 标签：dom

如何遍历所有添加的 DOM 属性（不是[浏览器](https://developer.mozilla.org/en/docs/DOM/element)属性）？

**示例 DOM：**

```
var div = document.createElement('div');
div['newProp1'] = '123';
div['newProp2'] = true;
div['someOtherProp'] = false;
...
... 
```

假设我不知道“新”属性的名称，我该如何访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:58:19.317

```
var div = document.createElement('div');
div['newProp1'] = '123';
div.newProp2 = true;
div['someOtherProp'] = false;

for( let prop in div )
    if( div.hasOwnProperty(prop) )
         console.log( prop  ); 
```

# javascript - 使用 JQuery 隐藏 div - 不工作

> ID：15866438
> 
> 赞同：0
> 
> 时间：2013-04-07T18:54:47.620
> 
> 标签：javascript, jquery, html

加载时会在页面上显示一个 div。我在这个 div 中添加了一个按钮，我希望当用户点击这个按钮时，它会使用 JQuery 隐藏 div。

这是html：

```
<div id="tabs" class="news1">
    <ul>
    <li><a href="#tabs-1">Track</a></li>
    <li><a href="#tabs-2">History</a></li>
    </ul>
    <div id="tabs-1">
    <table id="currentloc_table">
    <tr>
    <th></th>
    <th>Name</th>
    <!--th>Latitude</th>
    <th>Longitude</th-->
    <th>Details</th>
    </tr>
            <tr><td></td></tr>
    </table>
    </div>
    <div id="tabs-2">
    </div>

    <button>hide</button>

</div> 
```

这是同一页面上标签中的脚本：

```
<script>
        $(function() {
            $( "#tabs" ).tabs();
        });

        $("button").click(function() {
            $(this).parent().hide();
        });
</script> 
```

但由于某种原因，它不起作用。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T18:56:34.973

您需要将 .click 绑定放在 $(function () {}) 中。像这样。

```
 $(function() {
        $( "#tabs" ).tabs();
        $("button").click(function() {
            $(this).parent().hide();
        });
    }); 
```

In jQuery $(function () {}) is a shorthand for $(document).ready(function () {}) which is called when all the HTML for the page is loaded. When you put a binding outside of this ready call, it attempts to bind before the HTML is loaded. If the HTML isn't loaded, no elements exist to bind to, so then no bindings are applied! By moving it inside of the ready (or your short-hand ready), we ensure that all elements are loaded and capable of being bound to properly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:02:54.980

You just need to put your code below:

```
$("button").click(function() {
   $(this).parent().hide();
}); 
```

Inside the `$(function() {}` like:

```
$(function () {

    // Call the jQuery tabs
    $("#tabs").tabs();

    // Call button click event here
    $("button").click(function () {
        $(this).parent().hide();
    });
}); 
```

This would specify the click event to execute when the DOM is fully loaded.

# batch-file - 将批处理命令保存到变量中。

> ID：15866440
> 
> 赞同：0
> 
> 时间：2013-04-07T18:55:03.470
> 
> 标签：batch-file

我正在编写一个 .bat 脚本，我希望能够执行一个保存在变量中的命令，而无需执行另一个 .bat 文件。例如，`dir /l`。

我希望能够做这样的事情

```
my_command = dir /L
run my_command 
```

用字符串分配变量`my_command`，然后将该字符串作为命令执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:14:20.190

是的，您可以批量执行此操作。试试这个例子：

```
 @echo off&setlocal
 set "myCommand=cls&dir /l"
 %myCommand% 
```

这将清除屏幕 ( `cls`) 并执行`dir /l`。

# ftp - Dreamweaver / Filezilla / 其他 FTP 客户端 - 连接和编辑文件的摘要

> ID：15866444
> 
> 赞同：0
> 
> 时间：2013-04-07T18:55:18.590
> 
> 标签：ftp, dreamweaver, filezilla

是否有可能获得连接和编辑文件的摘要？目前我正在使用 Dreamweaver 和 Filezilla，但我还没有找到解决这个问题的可能性。完美会是这样的：

```
13:40:12 - connected to SERVER1
13:40:50 - uploaded "test.php" to "/path/to/dir"
13:41:02 - opened file "file.php"
13:41:40 - uploaded edited version of "file.php" 
```

... 等等

我需要这个来概述我的工作时间，比如计时，然后知道我出于文档原因编辑了哪些文件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T14:18:19.527

# javascript - 如何使用 HTMLTableElement.insertRow 在表格末尾插入行

> ID：15866451
> 
> 赞同：21
> 
> 时间：2013-04-07T18:55:48.063
> 
> 标签：javascript, html, dom, html-table

### 背景和设置

我正在尝试从 javascript 中的表格数据创建一个表格，但是当我尝试将行插入到表格元素中时，它以与我期望的相反的顺序插入，并且与你从 using 获得的相反的顺序插入`appendChild`。（这是[一个带有现场演示](http://jsfiddle.net/jtratner/9uA9k/)的jsfiddle）。

假设我有一些这样的数据：

```
var data = [
    {"a": 1, "b": 2, "c": 3},
    {"a": 4, "b": 5, "c": 6},
    {"a": 7, "b": 8, "c": 9}
], keys = ["a", "b", "c"]; 
```

如果我尝试使用`insertRow()`and`insertCell()`方法来创建表，迭代上面的数据和键。我得到了我期望的相反顺序：

![插入行图片](https://i.stack.imgur.com/oyjSY.png)

使用以下代码生成：

```
// insert a table into the DOM
var insertTable = insertDiv.appendChild(document.createElement("table")),
    thead = insertTable.createTHead(), // thead element
    thRow = thead.insertRow(), // trow element
    tbody = insertTable.createTBody(); // tbody element

thRow.insertCell().innerText = "#"; // add row header

// insert columns
for (var i = 0, l = keys.length; i < l; i ++) {
    var k = keys[i];
    thRow.insertCell().innerText = k;
}

// insert rows of data
for (var i = 0, l = data.length; i < l; i ++) {
    var rowData = data[i],
        row = tbody.insertRow();
    row.insertCell().innerText = i;
    for (var j = 0, l = keys.length; j < l; j ++) {
        var elem = rowData[keys[j]];
        row.insertCell().innerText = elem;
    }
} 
```

`document.createElement`然而，如果我使用and创建一个表`appendChild`，我会得到我期望的顺序：

![附加子图片](https://i.stack.imgur.com/Fvp7R.png)

生成者：

```
// now do the same thing, but using appendChild
var byChildTable = document.createElement("table");
byChildTable.setAttribute("class", "table");
thead = byChildTable.appendChild(document.createElement("thead"));
thRow = thead.appendChild(document.createElement("tr"));

// create table header
thRow.appendChild(document.createElement("td")).innerText = "#";
for (var i = 0, l = keys.length; i < l; i ++) {
    var key = keys[i];
    thRow.appendChild(document.createElement("td")).innerText = key;
}

// insert table data by row
tbody = byChildTable.appendChild(document.createElement("tbody"));
for (var i = 0, l = data.length; i < l; i ++) {
    var rowData = data[i],
        row = tbody.appendChild(document.createElement("tr"));
    row.appendChild(document.createElement("td")).innerText = i;
    for (var j = 0, l = keys.length; j < l; j ++) {
        var elem = rowData[keys[j]];
        row.appendChild(document.createElement("td")).innerText = elem;
    }
} 
```

### 问题

如何控制将元素放入 DOM 的顺序？有什么办法可以改变这个吗？我想否则我可以以相反的顺序迭代，但即使这样，你仍然不能插入 with `table.insertRow()`。这只是一个无赖，因为`insertRow()`and`insertCell()`方法似乎比`table.appendChild(document.createElement("tr"))`etc更清晰。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-07T19:16:17.497

`.insertRow`和方法采用`.insertCell`索引。在没有索引的情况下，默认值`-1`在大多数浏览器中是默认值，但是某些浏览器可能会使用`0`或可能会抛出错误，因此最好明确提供。

要改为追加，只需提供`-1`，追加就会完成

```
var row = table.insertRow(-1);
var cell = row.insertCell(-1); 
```

[https://developer.mozilla.org/en-US/docs/DOM/table.insertRow](https://developer.mozilla.org/en-US/docs/DOM/table.insertRow)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-17T19:21:48.973

你可以这样做：

```
var table = document.getElementById('myTableId');
var rowCount = table.rows.length;
var row = table.insertRow(rowCount); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T19:16:53.870

您必须在`insertCell()`like`insertCell(inde)`中指定一个索引才能按预期工作。

正如[www.w3schools.com/jsref中所说](http://www.w3schools.com/jsref/met_tablerow_insertcell.asp)

> 如果省略此参数，insertCell() 将在 IE 中的最后一个位置以及 Chrome 和 Safari 中的第一个位置插入新单元格。
> 
> 此参数在 Firefox 和 Opera 中是必需的，但在 Internet Explorer、Chrome 和 Safari 中是可选的。

`inserRow()`出于同样的原因，也需要索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-20T07:09:54.847

你可以这样做，

```
var table = document.getElementById("yourTable");
var row = table.insertRow(-1);

var cell1 = row.insertCell(0);
var cell2 = row.insertCell(1);
var cell3 = row.insertCell(2);
var cell4 = row.insertCell(3); 
```

# android - 在运行时检查 Android Activity 自己的视图层次结构

> ID：15866453
> 
> 赞同：3
> 
> 时间：2013-04-07T18:55:59.643
> 
> 标签：android, view, inspection, view-hierarchy

一个 Activity 是否有可能在不知道所有视图的 ID 或特殊访问权限（例如检测模式或生根）的情况下自行访问和检查（理想情况下甚至修改）整个视图层次结构？

例如，是否有可能编写一些代码来定位所有，例如，在 Activity 的视图层次结构中的 EditText 实例并对它们做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:59:19.020

> Activity 是否可以访问并检查，理想情况下甚至可以修改整个 View 层次结构，而无需特殊访问，例如检测模式或生根？

`findViewById(android.R.id.content)`返回`View`托管您在 中提供的内容的`setContentView()`。除此之外，尝试`getRootView()`（调用 any `View`）检索“当前视图层次结构中的最顶层视图”。

# php - PHP：对表单使用 require_once()？

> ID：15866465
> 
> 赞同：0
> 
> 时间：2013-04-07T18:56:51.223
> 
> 标签：php, html, forms, process

我正在使用 HTML 使用 php 处理器制作表单，如下所示：

```
<?php require_once("./scripts/process.php"); ?>
<form action="" method="post">
     <input type="text" name="name" />
     <input type="submit" value="Submit" />
</form> 
```

我的 PHP 表单中有一个脚本，其中`echo`显示“您没有填写某些必填字段。返回并填写它们”。但是，当我第一次加载页面时，它显示“您没有填写某些必填字段。请返回并填写它们。” 我怎样才能使它仅在提交表单时才显示？我不能使用`<form action="./scripts/process.php`它给我一个 500 服务器错误，所以我想这样做。是否有另一种 PHP 方法可以做到这一点？如果是这样，怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:00:54.273

您可以通过检查 $_POST 值来检查表单是否已提交

```
if(!empty($_POST)) {
    // some code
} 
```

但是当同一页面上有另一个表单时，这可能会失败。在这种情况下，您必须按照以下方式进行操作

```
if(isset($_POST["name"])) {
    // some code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:00:10.810

只要确保只发布请求，需要 process.php

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
require_once('./scripts/process.php');
}
?> 
```

# wordpress - WordPress 显示帖子和限制

> ID：15866467
> 
> 赞同：0
> 
> 时间：2013-04-07T18:57:05.890
> 
> 标签：wordpress

我在 wordpress 中显示帖子时遇到了非常严重的问题。我只想定期循环限制例如每页 5 个帖子，我想显示下一个和上一个链接（上一页和下一页）

```
<?php $latest = new WP_Query('showposts=2'); ?>
<?php while( $latest->have_posts() ) : $latest->the_post(); ?>
<article class="blogArticle">
    <h2><?php the_title(); ?></h2>
    <h3><?php the_category(' '); ?></h3>
    <?php echo get_the_post_thumbnail(); ?>
    <?php the_excerpt(); ?> 
</article> 
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:40:00.647

要限制为 5 个帖子，您需要使用[`posts_per_page`](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)/[`numberposts`](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)参数，而不是`showposts`. 您也可以将 Wordpress 设置为默认显示 5 个帖子并省略`$paged`和`query_posts()`部分。

```
<?php 
// You can omit this block by changing the number of posts on WP Admin > Settings > Reading > Blog pages show at most
// Used to control pagination
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
query_posts('posts_per_page=5&paged='.$paged);
// Omit above if you set the number of posts per page in WP Admin 
?>
<?php while( have_posts() ) : the_post(); ?>
<article class="blogArticle">
    <h2><?php the_title(); ?></h2>
    <h3><?php the_category(' '); ?></h3>
    <?php echo get_the_post_thumbnail(); ?>
    <?php the_excerpt(); ?> 
</article> 
<?php endwhile; ?> 
```

要处理分页，您需要在循环外添加对该[分页函数的调用。](https://codex.wordpress.org/Pagination)

```
<?php next_posts_link('&laquo; Older Entries') ?>
<?php previous_posts_link('Newer Entries &raquo;') ?> 
```

# css - 如何使用附加规则扩展 CSS 类？

> ID：15866480
> 
> 赞同：1
> 
> 时间：2013-04-07T18:57:54.333
> 
> 标签：css, gwt

我想创建不同的按钮样式，它们应该只是颜色不同。所以我想我为按钮创建了一个基本的 CSS 类，并继承它们并覆盖颜色（至少从 Java 角度来看这是我的方法......）。

```
.myButton {
   padding:...
   width:...
   background: white;
}

.myButton-ok {
  background: green;
}

.myButton-warn {
 background: orange;
} 
```

但是我怎样才能让这些类扩展`.myButton`类，这样我只需要应用 eg`.myButton-ok`并且维护所有其他基本按钮样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:01:36.663

CSS 不能那样工作。它不使用继承本身......它使用基于选择器的特异性的级联来覆盖属性。做到这一点的唯一方法是使用 LESS 或 SASS 之类的预处理器，您可以在其中扩展它们。

使用原始 css，我将分配两个类：具有默认样式的按钮和具有特定样式的按钮。

```
<a class="myButton myButton-ok"></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:04:20.950

为按钮添加一个额外的类以使其生效。像这样的东西-

```
.myButton {
padding:...
width:...
background: white;
}

.red {
background: red;
}

.blue {
background: blue;
}

<button Class="myButton">Button</button>  // basic button
<button Class="myButton red">Button</button>  // with red BG
<button Class="myButton blue">Button</button>  // with blue BG 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:04:22.407

在 Css 中你不能那样做。

但是，在这些类型的情况下，我们可以通过将通用属性和特定属性分开来实现相同的效果，如下所示：

```
 .myButton, myButton-ok, myButton-warn {
   padding:...
   width:...;
   /*Other common properties, except specific ones like "background"*/
}

.myButton-ok {
  background: green;
}

.myButton-warn {
 background: orange;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T19:11:30.477

在 CSS 中，“强度”顺序是这样的：

内联样式 > 类 > id。

所以你可以定义一个通用的类按钮：

```
.myButton {
padding:...
width:..}; 
```

并为您的 OK 按钮定义一个内联样式（在 html 中）：

```
style="background:green" 
```

或者，您总是可以为每个按钮定义一个特定的 id 样式，但是对于仅仅改变颜色我认为它是矫枉过正的：

```
#myButton-ok{ background: green}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T19:19:41.737

CSS 在编程意义上没有类或继承概念。它只有类选择器，允许您为具有特定`class`属性（HTML 事物）的元素指定属性，并且它具有完全不同意义上的继承：在某些条件下，元素从文档树中的父级继承属性值（这与课程无关）。

因此，我们需要换个角度思考。在您的示例中，您可以使用例如

```
.myButton {
   padding:...
   width:...
   background: white;
}

.ok {
   background: green;
}

.warn {
   background: orange;
} 
```

和标记之类的`<button class="button warn">`。这意味着该元素属于两个类，并且应用了它们的声明。这里很重要的是，其他条件相同，如果同一属性的两个声明适用于一个元素，则后一个声明（即，稍后出现在样式表中的声明）获胜。

# linux - 如何从 shell 脚本中的命令行参数中检索值

> ID：15866481
> 
> 赞同：1
> 
> 时间：2013-04-07T18:57:54.460
> 
> 标签：linux, shell, unix, command-line-arguments

我在 shell 脚本中写了两个语句，如下所示：-

```
str=$'cd /home \n mkdir $1'
echo "$str" 
```

当我执行上面的脚本文件时，它显示以下输出：-

```
[root]# ./ScriptCheck.sh pravin
cd /home
mkdir $1 
```

输出应该在哪里：->

```
cd /home
mkdir pravin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:00:14.613

不使用单引号 ( `'`) 在字符串中扩展变量。尝试使用双引号 ( `"`) 代替。

有关详细信息，请参阅[http://www.gnu.org/software/bash/manual/bashref.html#Double-Quotes 。](http://www.gnu.org/software/bash/manual/bashref.html#Double-Quotes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:16:27.243

尝试改变：

```
str=$'cd /home ; mkdir $1'
echo "$str" 
```

# c# - 我应该选择哪个选项来公开功能？

> ID：15866483
> 
> 赞同：0
> 
> 时间：2013-04-07T18:58:05.103
> 
> 标签：c#, oop

我有一个类可以处理与某些设备的通信。我称这个类为协议。该类不包含任何状态信息，因此我创建了一个模型类，它应该公开协议类中的方法并包含设备的状态。

如我所见，有三种实现方式

1.  让模型类继承协议
2.  让模型类实现协议
3.  让模型通过一个属性暴露协议

可能是该协议包含最好不向模型类的实现者公开的方法，该模型类的实现者反对选项 1 和 3。

选项 2 让我可以选择我想从协议中公开哪些内容，但大多数功能只是对协议的调用，例如：

```
DoSomething()
{
    protocol.DoSomething();
} 
```

你认为什么是“更好”的选择？

NB：将状态和协议解耦的原因是协议不是固定的，可以根据外部因素而改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:19:56.253

你真的需要它们之间的继承关系吗？

```
interface IDevice
{
    // Some implementation
}

interface IProtocol : IDisposable
{
    void Open(IDevice device, string connection);
    void Close();
    void Send(object data);
    object Receive();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:34:38.617

我过去曾使用过我们所谓的命令处理程序设计来处理类似的事情，这就是它的工作原理：

有一个 CommandHandler 类（确实是组件 - 它有几个协作类）完成所有工作（您称为“.DoSomething()”。所以，这与您上面的协议类相同。这个 CommandHandler 类/component 但是，对协议一无所知。他只是使用本地语言构造（在您的情况下为 C# 类/接口）来完成工作。然后，将有一个或多个协议类来完成转换工作语言构造的协议（例如，将 XML 转换为消息类，将二进制字节从流转换为类等）并通过从解码的协议创建其类的实例并将参数传递给这些实例来执行命令处理程序组件的功能来自协议的参数的方法。

要为您的命令处理程序实现新协议，请编写协议类并让它处理您想要的任何协议，让它创建实例并调用其他协议所做的命令处理程序组件的方法，这样核心功能就不会改变。

我希望这就是你要找的。

# php - 从mysql表中计算数据出现

> ID：15866484
> 
> 赞同：0
> 
> 时间：2013-04-07T18:58:09.497
> 
> 标签：php, mysql

我想计算例如数据 'a' 从列 d1、d2 和 d3 的所有表格中出现的次数。例如，这里表中“a”出现的次数是 3。

```
d1| d2 | d3 |
-------------
a| ab | a |
a| ab  | ab|
ab| av | ac |
zx| cx  | zz| 
```

我用

```
SELECT SUM(d1='a') + SUM(d2='a') + SUM(d3='a') FROM my_table 
```

和

```
 $result = mysql_query($sql);
$row = mysql_fetch_assoc($result); 
$allsum = $result[0];
echo '<pre>';
            echo $allsum;
            echo '</pre>'; 
```

但回声不起作用

感谢任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:59:38.267

```
SELECT SUM(d1='a') + SUM(d2='a') + SUM(d3='a') FROM my_table 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b3e1d/1/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:30:14.327

试试这个

```
 SELECT SUM(d1='a') + SUM(d2='a') + SUM(d3='a') as allsum FROM my_table

  $result = mysql_query($sql);
  $row = mysql_fetch_assoc($result); 

        echo $row['allsum']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:03:17.150

```
SELECT COUNT(*) FROM `table` WHERE `d1`='a' OR `d2`='a' OR `d3`='a'; 
```

# r - 是否可以将百分比添加到列联表

> ID：15866488
> 
> 赞同：5
> 
> 时间：2013-04-07T18:58:40.670
> 
> 标签：r

我对 R 中的函数有疑问`table()`。我想添加一个额外的列来显示由`table()`. 我有一个这样的数据框：

```
delta=data.frame(x1=c("x001","x001","x002","x002","x001","x001","x002"),x2=c(1,2,1,1,1,1,1)) 
```

当我计算`table()`这个数据框时，我得到了这个：

```
table(delta$x1,delta$x2)

       1 2
  x001 3 1
  x002 3 0 
```

可以在此表中添加百分比，或者 R 中有任何函数或包来计算如下内容：

```
 1 2  Number Percentage
  x001 3 1    4     0.5714286
  x002 3 0    3     0.4285714 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:22:17.627

这是使用`sum()`and的快速解决方案`rowSums()`：

```
> tbl <- table(delta)
> (tbl <- cbind(tbl, rowSums(tbl), rowSums(tbl) / sum(tbl)))

     1 2        
x001 3 1 4 0.571
x002 3 0 3 0.429 
```

`colnames()`您可以使用;添加列名 例如：

```
> colnames(tbl) <- c("1", "2", "N", "Pct")
> tbl
     1 2 N   Pct
x001 3 1 4 0.571
x002 3 0 3 0.429 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T19:32:33.107

您可以使用`prop.table`和`addmargins`

```
tbl <- table(delta$x1,delta$x2)

prop.table(tbl)

# 1         2
# x001 0.4285714 0.1428571 
# x002 0.4285714 0.0000000

addmargins(tbl)

# 1 2 Sum
# x001 3 1   4
# x002 3 0   3
# Sum  6 1   7 
```

**编辑**

当然你可以做类似的事情

```
rowSums(prop.table(tbl)) 
     x001      x002 
0.5714286 0.4285714 
```

但我的回答是说 R 中有一些内置函数可以完成该`table`功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T19:14:16.207

计算不是很棘手。
可能让您感到困惑的是该表不会直接转换为 data.frame。至少不是你想要的那样。这是一个分解，一步一步。

```
# this is the basic table, we want it as a data.frame
delCounts <- table(delta)

# you need to convert the table to a matrix, before converting to a data.frame
results <- data.frame(matrix(delCounts, nrow=nrow(delCounts)))

# you may want to preserve the names.  Have a look: 
dimnames(delCounts)  # first are the column names, then row names

colnames(results) <- dimnames(delCounts)[[1]]
rownames(results) <- dimnames(delCounts)[[2]]

# Now sum up and take percentages
# we can use vectorized arithmetic operations for the percentage
results$Number <- rowSums(results)
results$Percentage <- results$Number / sum(results$Number)

# we might want to round instead
results$Percentage <- round(results$Number / sum(results$Number)*100, 2)

results
#   x001 x002 Number Percentage
# 1    3    1      4      57.14
# 2    3    0      3      42.86 
```

# ruby-on-rails - Rails Angularjs 开发流程

> ID：15866489
> 
> 赞同：11
> 
> 时间：2013-04-07T18:58:42.650
> 
> 标签：ruby-on-rails, angularjs, yeoman

我一直在将 Angularjs 与 Rails 一起使用，随着我深入研究，我发现 Rails 和 Angularjs 各自将一个角色作为单独的应用程序。我也用 Yeoman 做了一些实验，我真的很喜欢它——我试着用 yeoman 在我的 Rails 应用程序的 assets 子目录中构建一个应用程序，但它创建了太多东西

我正在考虑将其拆分并使用 json 前端创建我的 Rails 应用程序并创建一个单独的 Angular 应用程序，使用 Yeoman 构建它并将完成的 Angularjs 应用程序放在我的资产子目录中并进行一些整理

这有意义吗？

还有人这样做吗？

有小费吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T05:09:27.857

你说得对，后端 Rails 和前端 SPA 不应该作为一个项目开发。它们应该独立开发，也应该独立测试。理想情况下，在您的暂存环境和集成 e2e 测试之外，它们之间不应存在直接交互。

另一件事是您不需要将 Angular 应用程序放在公共目录中。很可能您将让Passenger/Unicorn/Puma 为您的Rails 应用程序提供服务，而它们不是为您的Angular 应用程序提供服务的必要条件。最好直接从 NginX 之类的强化网络服务器提供服务。它们不仅速度更快，而且更易于配置。这让您甚至可以自由设置自定义来源 CDN，以进一步加快您网站的响应时间。

Yeoman 发电机正是为此而制造的。如果你打算同时构建你的 SPA 和 Rails，你就不需要所有的 Grunt 任务来转换 LESS/Coffee/Jade 等；Rails 会自动为您完成。它们旨在在没有完整服务器环境的情况下简化开发 SPA。

# mongodb - Mongodb：检查一个点是否在存储的多边形内

> ID：15866490
> 
> 赞同：20
> 
> 时间：2013-04-07T18:58:48.203
> 
> 标签：mongodb, geolocation, polygon

我是 mongodb 地理定位功能的新手。

我在数据库中存储了一些代表国家边界的多边形以及国家名称。现在我想做的是检查一个点在哪个国家。例如，如果我给出自己的地理位置，我想得到我所在的国家。

有没有办法用 mongodb 做到这一点？也许与geoWithin？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-10T08:02:31.483

You must store your location data like this schema:

```
{"loc":
     {"coordinates":[
       [
         [1.0,1.0],
         [1.0,10.0],
         [10.0,10.0],
         [10.0,1.0],
         [1.0,1.0]
       ]
      ],
     "type":"Polygon"
   }
} 
```

and then send `$geoIntersects` queries

```
db.polygons.find({"loc":{"$geoIntersects":{"$geometry":{"type":"Point", "coordinates":[x, y]}}}} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-05T21:49:24.640

你必须使用`$geoIntersects`它。

```
db.features.find({mystoredpolygon:{$geoIntersects:{$geometry:{type:'Point', coordinates:[22,38]}}}}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T02:28:44.313

是的，您可以[`$geoWithin`](http://docs.mongodb.org/manual/reference/operator/geoWithin/)用于检查，前提是您使用 将国家定义为多边形`GeoJSON`。为此，请尝试[此 GitHub 存储库](https://github.com/johan/world.geo.json/blob/master/countries.geo.json)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-20T05:08:16.217

> [您的场景](https://docs.mongodb.com/manual/tutorial/geospatial-tutorial/)似乎与使用`$geoIntersects`而不是 `$geoWithin`.

如 MongoDB 文档中所示的示例，您可以使用 MongoDB 的`$geoIntersects`地理空间查询功能，假设您的数据库中存储了一个表示国家/地区的多边形并且一个点是您的当前位置，您可以使用以下查询。

```
db.neighborhoods.findOne({
     geometry: { 
        $geoIntersects: {
             $geometry: { 
                type: "Point", 
                coordinates: [ -73.93414657, 40.82302903 ] 
            }
        } 
    } 
}) 
```

在哪里，`neighborhood`是您的收藏，它存储在您所在国家/地区的多边形中。`geometry`在第二行查询中是存储在 DB 中的实际多边形（它是 Geo-Json 格式）。并且`"Point"`里面`$geometry`是您当前所在的位置，您想要的国家/地区。

# c++ - 虚函数返回类型

> ID：15866494
> 
> 赞同：1
> 
> 时间：2013-04-07T18:59:05.237
> 
> 标签：c++, overriding, covariant

我在一个基类中定义了一个纯虚函数 virtual `int GetData() const = 0`；

在每个派生类中，我定义了一个枚举并尝试覆盖 GetData 函数返回（派生类特定枚举）值；

例如：

```
class Derived1 : public Base
{
public :
enum D1
{
   d1_1 = 0,
   d1_2 = 60,
   ...
   d1_100
};
D1 GetData () const;
};
class Derived2 : public Base
{
public :
enum D2
{
   d2_1 = 10,
   d2_2 = 39,
   ...
   d2_300
};
D2 GetData () const;
}; 
```

说我不能为所有类的所有枚举值定义相同的范围是非常重要的。上面的代码会产生编译错误：

```
error C2555: : overriding virtual function return type differs and is not covariant 
```

任何建议 - 如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:04:26.743

在您的特定情况下，事实是您的`virtual`方法返回一个原始类型，它没有协变，因为它不能像`System.Object`C# 中那样放入常见类型。
您需要定义一个类作为所有返回类型的基类，以实现协方差。

来自维基百科：

```
Within the type system of a programming language, covariance and contravariance refers to the
ordering of types from narrower to wider and their interchangeability or equivalence in certain 
situations (such as parameters, generics, and return types).

covariant: converting from a specialized type (Cats) to a more general type (Animals): 
Every cat is an animal. 
```

[这](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)是文章的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:06:40.570

仅当您将基类的指针/引用替换为派生类的指针/引用时，才允许更改虚函数的返回类型，因为一个可以安全地转换为另一个。虽然枚举类型和`int`兼容，但它们在技术上并不相关。只需`int`在任何地方使用，因为枚举名称只是一种装饰，根本不会影响任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:06:50.853

您的设计需要修复，但仅关于您可以做的*技术*

```
class Derived1
    : public Base
{
public:
    enum D1
    {
       d1_1 = 0,
       d1_2 = 60,
       ...
       d1_100
    };
    D1 GetD1Data () const;
    int GetData() const override { return GetD1Data(); }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T19:09:55.127

根据 C++11 ISO 10.3/7：

> **覆盖函数的返回类型应**与被覆盖函数的返回类型相同或与函数的类**协变**。如果函数 D::f 覆盖函数 B::f，则**函数的返回类型如果满足以下条件，则它们是协变的**：
> 
> —**都是类的指针，都是类的左值引用，或者都是类的右值引用**
> 
> — B::f 的返回类型中的类与 D::f 的返回类型中的类是同一类，或者是 D 的返回类型中的类的明确且可访问的直接或间接基类： ：F
> 
> — 指针或引用都具有相同的 cv 限定，并且 D::f 的返回类型中的类类型具有与 B::f 的返回类型中的类类型相同或更少的 cv 限定。

协方差仅允许用于指针、左值/右值引用。我猜你不想通过引用或指针返回枚举。

但是，如果您接受静态线程本地缓冲区，则可以使用以下方法：

[**现场演示**](http://coliru.stacked-crooked.com/a/c6f472c90cc2aa0c)

```
class EnumA
{
    int value_;
public:
    explicit EnumA(int v)
        : value_{v}
    {}
    int value() const
    {
        return value_;
    }
};
struct EnumB: EnumA
{
    enum EnumB_T{one,two};
    explicit EnumB(EnumB_T v)
        : EnumA{v}
    {}
    EnumB_T value() const
    {
        return EnumB_T(EnumA::value());
    }
};

struct A
{
    virtual const EnumA &func() const
    {
        static thread_local EnumA result{0};
        return result = EnumA{1};
    }
};

struct B: A
{
    virtual const EnumB &func() const override
    {
        static thread_local EnumB result{EnumB::one};
        return result = EnumB{EnumB::two};
    }
}; 
```

# c# - C#在列表中存储数据库表行

> ID：15866496
> 
> 赞同：0
> 
> 时间：2013-04-07T18:59:11.127
> 
> 标签：c#, database

我有一个包含各种表的数据库，我使用各种 SQL 查询来提取以下内容：-

表格1

```
ID、姓氏、职务、部门

1、琼斯先生，20岁

1、琼斯先生，21 岁

```

一个人可以是多个部门的成员。因此，我执行的 SQL 查询会生成多行同一个人（相同 ID）但部门 ID 不同的行。此信息存储在列表中。

我可以在 DataGridView 对象中毫无问题地显示此信息。

我还有另一个部门列表，我通过 SQL 查询填充：-

```
身份证、姓名

20、账目

21、管理员

```

我想要实现的是结合这两个列表，所以我最终得到如下结果：-

```
ID、姓氏、职务、部门

1，琼斯，先生，账户，管理员

```

因此，新的第三个列表每个人 ID 仅包含 1 行，但该行包含部门名称而不是部门 ID，并且该行包含该人所属的所有部门。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:14:22.943

我建议在 SQL 中进行连接，因为它会更有效——这就是 DataBase 的设计目的！

但是，如果您真的需要，可以使用 LINQ to Objects。我假设你有两个列表：

```
var people = new List<Person>();
var departments = new List<Department>(); 
```

两者都有`Person`，并且`Department`有你写过的属性。

您的查询：

```
var query= from p in people
           join d in departments on p.Department equals d.ID
           group d by new { p.ID, p.Surname, p.Title } into g
           select new {
               g.Key.ID,
               g.Key.Surname,
               g.Key.Title,
               Departments = String.Join(", ", g.Select(d => d.Name))
           }; 
```

`List`并从匿名类型的查询中获取结果：

```
var result = query.ToList(); 
```

# php - htaccess rule drop 400 Bad Request on Backend apache

> ID：15866502
> 
> 赞同：1
> 
> 时间：2013-04-07T18:59:43.643
> 
> 标签：php, apache, .htaccess, lighttpd, bad-request

我有一个 ISPManager Lite，但我决定转向 lighttpd。我使用**lighttpd**作为**前端**服务器，使用**Apache2**作为**后端**。

在普通的 php 文件中我没有问题（例如，当我请求**/form.php**它返回状态**200**）。但是当我请求任何动态规则（例如**/login**）时，我得到错误： **400 Bad Request**

和 apache **error.log**写道：

```
[Sun Apr 07 22:25:01 2013] [error] [client 127.0.0.1] Invalid URI in request GET core/pages/login.php/ HTTP/1.0, referer: http://sub.domain.com/core/ 
```

这是**lighttpd.conf**域的配置：

```
$HTTP["host"] == "sub.domain.com" {
        proxy.server = ("" =>
                                (
                                        ( "host" => "127.0.0.1", "port" => 3005 )
                                )
        )
} 
```

这是**apache2.conf**主机：

```
<VirtualHost 0.0.0.0:3005>
        ServerName sub.domain.com
        DocumentRoot /home/skynet/data/www/sub.domain.com
        ServerAlias www.school.9k.su
        DirectoryIndex index.php index.html
        php_admin_value open_basedir "/home/skynet/data:."
        ........................................
</VirtualHost> 
```

这是我的**.htaccess**规则：

```
RewriteEngine On
RewriteBase /
RewriteRule ^login/?$ core/pages/login.php 
```

我究竟做错了什么？我该如何解决这个问题？

PS：对不起我的英语，我刚学。

# java - 程序终止后如何存储变量

> ID：15866504
> 
> 赞同：-1
> 
> 时间：2013-04-07T18:59:53.210
> 
> 标签：java, variables, int

我有一个计数器，每次用户输入特定单词时都会递增。程序终止后如何存储变量值，以便用户再次启动程序时可以使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:05:31.927

您可以将 写入`int`a `File`，然后`File`在程序重新启动时读取 。

您只需要检查文件在启动时是否存在，如果它确实读取它，则将其设置`int`为零（或任何默认值）。

这是一个使用 a 的简单示例`DataOutputStream`- 有些人可能会说矫枉过正，但它允许您的代码可扩展；您也可以将其他内容写入文件。

```
public static void main(String[] args) throws IOException {
    int myCounter = 0;
    myCounter += 10;
    final File file = new File("/some/sensible/location");
    try (final DataOutputStream dos = new DataOutputStream(new FileOutputStream(file))) {
        dos.writeInt(myCounter);
    }
    try (final DataInputStream dis = new DataInputStream(new FileInputStream(file))) {
        System.out.println("Reading int from file: " + dis.readInt());
    }
} 
```

添加一个名为类似的方法`updateFile`，并确保`File`与当前程序值保持同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:02:29.360

为简单起见，您将要使用`Scanner`, 并读入用户输入的数据。然后，您要将输入的内容存储到程序中的变量中，然后将它们写入文件。

[这](http://www.javapractices.com/topic/TopicAction.do?Id=42)是一个很好的教程，可以帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:03:09.020

您可以写入文件（例如使用 Scanner），然后在程序启动时从中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T19:03:38.117

您可以从具有已知路径和可靠权限的属性文件中读取/写入。如果这是用户偏好/配置，您可以使用[Preferences](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html) API。API 可以跨多个平台存储值，同时抽象存储它的位置/方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T19:09:59.773

如果您只需要一个简单的值，我会像其他答案一样使用一个简单的文件。

如果您需要更多内容，我会使用像[H2](http://www.h2database.com/html/main.html)这样的自包含数据库。设置起来可能与编写自己的简单文件存储一样快，而且您可以从中获得更多收益。

# sql - Oracle SQL 字符串 split() 正则表达式

> ID：15866514
> 
> 赞同：1
> 
> 时间：2013-04-07T19:00:37.920
> 
> 标签：sql, oracle11g

在我的表客户端中，我有一个名为“地址”的列，其中包含一些字段，例如：

```
UNIT 12a Street name 
```

如何使用 Regex 将 stname 和 stnumber 拆分为 2 个单独的列？我的数据库中有数千个不同的街道名称。字符串中有 3 个可能性：

1.  如果字符串为空，则两个新列都为空
2.  如果只存在街道名称（无编号），则街道名称将移至 stname，而 stnumber 将为空。

3.  如果字符串确实有数字，有时它就像*Unit 12a ...*有时它只是*21c ...*，在这种情况下，我想将*Unit 12a*或*21c*拆分为 stnumber 列，并将其余部分留给 stname 列。

我已经尝试过这种方法：

```
select test
    --Group 1: Match everything up to the last digit, and one other character
    --Group 2: Everything after group 1
    ,regexp_replace(test, '(.*[[:digit:]].)(.*)', '\1') c1
    ,regexp_replace(test, '(.*[[:digit:]].)(.*)', '\2') c2
from
(
    select '1234john4345 this is a test.' test from dual union all
    select '1234john4345a this is a test' test from dual
); 
```

它确实几乎正确地拆分了它，除了字符串不包含数字的部分，它将记录复制到两列中。

# android - 自定义视图不会添加到预定义的 XML 布局中

> ID：15866523
> 
> 赞同：1
> 
> 时间：2013-04-07T19:01:04.457
> 
> 标签：android, android-layout

我想要做的是将自定义视图添加到相对布局中。该相对布局是另一个线性布局的子布局。一切正常，除了自定义视图没有显示在它应该有的地方。

自定义查看代码：

```
public class DrawView extends View {

private Path path = new Path();
private Paint paint = new Paint();

public DrawView(Context context, AttributeSet attrs) {
    super(context, attrs);

    paint.setAntiAlias(true);
    paint.setStrokeWidth(2.2f);
    paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawPath(path, paint);

}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float eX = event.getX();
    float eY = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        path.moveTo(eX, eY);
        return true;
    case MotionEvent.ACTION_MOVE:
        path.lineTo(eX, eY);
        return true;
    case MotionEvent.ACTION_UP:
        break;
    default:
        return false;
    }
    invalidate();
    return true;
} 
```

}

XML 布局（线性和相对）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#F24738"
android:orientation="vertical" >
<RelativeLayout
    android:id="@+id/draw_container"
    android:layout_width="match_parent"
    android:layout_height="450dp"
    android:background="#FFFFFF">
</RelativeLayout> 
```

这就是主要活动：

```
public class DrawActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_draw);

    final RelativeLayout parentLayout = (RelativeLayout) findViewById(R.id.draw_container);
    parentLayout.addView(new DrawView(this, null));
} 
```

}

当我尝试：

```
setContentView(new DrawView(this, null)); 
```

一切正常。我被这里击中了。我知道，我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:08:19.570

您的代码正在运行，但您在白色背景上绘制白色笔触。

尝试更改此行。-

`paint.setColor(Color.WHITE);`

为了

`paint.setColor(Color.RED);`

# vb.net - 对于每个...下一个帮助 VB.NET

> ID：15866527
> 
> 赞同：0
> 
> 时间：2013-04-07T19:01:12.873
> 
> 标签：vb.net, foreach

所以。我正在获取 ASCII 值（数字）并将它们转换为 ASCII 字符（字母和符号）。我已经设法想出了一些东西，但是当使用 For Each...Next 时，它分隔了每个单独的数字。例如，如果我输入 82（对应于 R），我会得到对应于 8 和对应于 2 的任何值。有没有人指出如果数字之间没有空格，那么它是一个数字？或者只是一种读取数字的整体方式，而不是单个数字。

这是一些代码。我不应该使用 Char 数据类型吗？正如我假设的那样，这就是让它一次转换 1 位数字的原因。虽然当我尝试任何其他数据类型时，我收到一些关于它不是集合类型的错误。

```
 Dim rtb As String
    rtb = Rich.Text1
    For Each num As Char In rtb
        'Conversion stuff goes here
    Next num 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:08:14.493

让我们分析一下这里发生了什么：

```
For Each num As Char In rtb 
```

因为`rtb`是 a`String`和`String`implements `IEnumerable<Char>`，所以上面的内容本质上是你在说 - 对于字符串中的每个字符 - 这不是你想要的。

您需要首先将字符串拆分为每个代表一个数字的组 - 例如：

```
Dim numbers As String() = rtb.Split(" ") 
```

然后，您可以遍历列表并将每个字符串（这些仍然是字符串）转换为实际数字，您需要将其转换为字符：

```
For Each num As String In numbers
   ' num can be "82", for instance
Next num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:08:56.420

做这样的事情：

```
Dim rtb As String = Nothing
rtb = "82 40 30"

For Each num As var In rtb.Split(" "C)
Next 
```

当然，如果您想使用其他字符拆分数字，只需将 ""C 替换为您需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:09:34.007

您不是在迭代数字，而是在迭代单个字符。您没有告诉我们输入中的数字是如何分隔的，但为了便于讨论，我们假设您使用的是空格。我们可以使用[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)从流中获取单个数字：

```
Dim rtb As String = "82 23 47 123"
Dim Ascii = System.Text.Encoding.ASCII

For each numToken As String In rtb.Split(" "c)
    Dim num As Byte
    If Not Byte.TryParse(numToken, num)
        ' Signal error
        Exit For
    End If

    Dim buffer As Char() = Ascii.GetChars(New Byte() { num })
    Dim result As Char = buffer(0)
    ' Do something with `result`
Next 
```

重要的一点：我使用`System.Text.Encoding`该类来进行 ASCII 代码和字符之间的映射。这可能看起来不必要的复杂，但确实*想要这样做*。不幸的是，编码*是*复杂的，并且假装不使用并使用本土的临时转换会适得其反。特别是， using`Chr`是*不合适*的，因为它实际上并不处理 ASCII，它处理相似但不相同的 Unicode 代码点（有一些限制）。在上面的代码中使用`Chr`会产生误导，因此是在未来进一步引入错误的可靠方法。记录您的假设很重要，如果您的假设是输入由 ASCII 组成，那么转换代码应该反映这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T03:49:17.440

每个字符使用三个数字。无论如何，大多数小写字母都是三位数字。

# sql - SQL Server 更新基于另一个表失败？

> ID：15866528
> 
> 赞同：0
> 
> 时间：2013-04-07T19:01:17.483
> 
> 标签：sql, sql-server, tsql, sql-update

在 SQL Server 2012 中，我试图将“TradeDate”列的值设置为“MARKET_DAY”列的值。这是我当前的代码：

```
USE Sales
GO
update dbo.try1
SET dbo.try1.TradeDate = dbo.yesterday.MARKET_DAY
FROM dbo.try1, dbo.yesterday 
```

但是，当我运行它时，我得到：

```
(0 row(s) affected) 
```

同时我不知道为什么。任何帮助是极大的赞赏。（我是 T-SQL 的菜鸟，请温柔一点。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:12:49.073

您是否尝试将“昨天”表中的数据插入“try1”？

```
INSERT INTO try1(TradeDate)
SELECT MARKET_DAY FROM yesterday
--You can mention your condition, if anything specific here. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:09:09.067

您的上述查询将执行什么操作，它将使用相同的结果更新每一行的列值。我认为您希望将相应的 MARKET_DAY 值更新为相应的 TradeDate 列。在这种情况下，您需要将`JOIN`运算符与 common`column`

```
USE Sales
GO
update dbo.try1
SET dbo.try1.TradeDate = dbo.yesterday.MARKET_DAY
FROM dbo.try1 INNER JOIN dbo.yesterday
ON dbo.try1.columnName=dbo.yesterday.columnName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:32:30.107

如果您可以向我们展示您的表格设计，那将非常有帮助，但到目前为止，这就是我的猜测：

您尝试更新的实体必须是共同的，否则更新将无法正常工作！

这是一个例子：

`dbo.try1`：

![在此处输入图像描述](https://i.stack.imgur.com/YSo2W.jpg)

`dbo.yesterday`：

![在此处输入图像描述](https://i.stack.imgur.com/jpFBG.jpg)

这是查询：

```
USE DBTest
GO
update dbo.try1
SET dbo.try1.TradeDate = dbo.yesterday.MARKET_DAY
FROM dbo.try1 INNER JOIN dbo.yesterday
ON dbo.try1.id=dbo.yesterday.id 
```

在这种情况下，两个表中的实体都有一个共同的 id，所以我能够根据它们的 id 更新它们。

这是执行上述查询的结果：

![在此处输入图像描述](https://i.stack.imgur.com/Q7iuJ.jpg)

# php - 单击菜单时隐藏的输入未发布

> ID：15866529
> 
> 赞同：0
> 
> 时间：2013-04-07T19:01:20.950
> 
> 标签：php, jquery, html, smarty

我的页面顶部有一个使用 UL LI 标签构建的菜单。我有一个使用 JQuery 事件链接到菜单的隐藏输入标签。单击后，可以在 console.log 中看到选项，但不会发布到 PHP 脚本。我在这里需要帮助，有人能把我引向正确的方向吗

这是HTML

```
<form name="mainmenu" id="mainmenu" action="index.php" method="post">
    <div id='content'>
       <div id='jqxMenu'>
            <ul>
                <li>Maintanence
                    <ul style='width: 180px;'>
                        <li><a href="#" data-val="addCategory">Add Category</a></li>
                        <li><a href="#" data-val="addSubCategory">Add Sub-category</a></li>
                    </ul>
                </li>
                <li>Process Order
                    <ul style='width: 180px;'>
                        <li><a href="#" data-val="addShipOrder">Ship Order</a></li>
                        <li><a href="#" data-val="addChangeOrder">Change Order Status</a></li>
                    </ul>
                </li>
                <li>Reports
                    <ul style='width: 180x;'>
                        <li><a href="#" data-val="addOrderStation">Orders by station</a></li>
                        <li><a href="#" data-val="addOrderDate">Orders by date</a></li>
                        <li><a href="#" data-val="addPendingOrder">Pending Orders</a></li>
                    </ul>
                </li>
                <li><a href="#" data-val="Logout">Logout</a></li>
            </ul>
        </div>
        <div><input id="menuoption" type="hidden" name="menuoption"></div>
   </div>
</form> 
```

这是jQuery

```
 $(document).ready(function ($) {
          $('#jqxMenu a').on('click', function() {
           $('#menuoption').val($(this).data('val'));
       });
    }); 
```

这是PHP脚本

```
 if (isset($_POST['menu_index']))
    {
        if ($_POST['menu_index'] == 'Logout')
        {
            $smarty->display("login.tpl");  
            exit();            
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:09:31.517

我认为您在 PHP 脚本中使用了错误的输入名称。您确定要查找 $_POST["menu_index"] 而不是 $_POST["menuoption"]？

如果 PHP 脚本中的索引正确，请尝试转储 $_POST 并检查其中的值。

```
var_dump($_POST); 
```

你会很容易看到你有什么和你没有什么

编辑：您没有提交表格

尝试像这样编辑您的 jQuery 代码

```
$(document).ready(function ($) {
      $('#jqxMenu a').on('click', function() {
       $('#menuoption').val($(this).data('val'));
       $('#mainmenu').submit();
   });
}); 
```

这将触发表单的提交。

# android - 从我的 ListFragment 中删除片段

> ID：15866533
> 
> 赞同：1
> 
> 时间：2013-04-07T19:01:59.220
> 
> 标签：android, android-fragments

我`Fragments`在我的 main 中添加我的`Activity`。我可以删除或替换我`Fragment`的`Fragment`更改吗？

```
 MyFragment mList = new MyFrament();   
 getSupportFragmentManager()
.beginTransaction()        
.remove(mList)
.commit(); 
```

我应该在类的哪个生命周期方法中`Fragment`调用`remove()`or`replace()`方法。我只是很困惑是否应该在`onCreate()`、`onCreateView()`或中调用它们`onActivityCreate()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:17:51.410

在这种情况下，我更了解你是从父级或类调用`remove()`and方法，而不是从.`replace()``Activity``FragmentActivity``Fragment`

并且不需要实例化片段的新实例：

```
MyFragment mList = new MyFrament(); 
```

如果您只想使用`SupportFragmentManager`.

**更新：**

至于您的第二个问题，如果您当前正在`Fragment`从容器中删除 a （任何`Layout`您将片段放入的 R.id.containerForFragments 在下一个案例中），那么您已经实例化了它的一个实例`Fragment`并使用以下方法添加它：

```
getSupportFragmentManager()
.beginTransaction()        
.add(R.id.containerForFragments, mList, tag)
.commit(); 
```

命令。如您所见，您可以为您的片段指定一个标签，您可以稍后使用该标签`Fragment`从使用以下方法获取此实例`FragmentManager`：

```
fragmentManager.findFragmentByTag(tag); 
```

命令。

因此，要删除`Fragment`例如，请执行以下操作：

```
fragmentTransaction.remove(fragmentManager.findFragmentByTag(tag)).commit(); 
```

# css - 玉若举止不顺

> ID：15866535
> 
> 赞同：0
> 
> 时间：2013-04-07T19:02:23.080
> 
> 标签：css, express, pug

我正在使用 expressjs，我的应用程序中有以下内容：

```
app.get('/profile',index.profile);
app.get('/',index.home); 
```

在 layout.jade 中

```
...
if typeof(username)!=='undefined'
                    li: a(href='/logout') Log Out
                else
                    li: a(href='/register') Register
... 
```

我的路由代码如下：

```
 exports.home = function(req,res){
if (typeof req.session.username == 'undefined')
    res.render('login',{title:'PageTitle'});
else
    res.redirect('/profile');
 };

exports.profile = function(req,res){
var show_devices = function(username,dev){
    res.render('home',{title:'Pagetutle', username: username,some other data..});
}
if (typeof req.session.username == 'undefined')
    res.redirect('/');
  ... 
```

这是我的注销

```
 exports.logout = function(req,res){
req.session.destroy();
res.redirect('/');
 }; 
```

第一次启动服务器时，我进入列表`Register`，当我登录时，我是绅士`Log Out`，但当我注销时，我也得到`Log Out`。好像`username`不知何故会在那里幸存下来。如何从玉命名空间中删除`username`变量 - 我认为这是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:15:20.083

我找到了一个解决方案，但我觉得很难看。

我`exports.home`这样修改：

```
exports.home = function(req,res){
if (typeof req.session.username == 'undefined')
    res.render('login',{title:'Smart Fridge',username:undefined});
else
    res.redirect('/profile');
}; 
```

而jade检查的时候，发现用户名的类型是未定义的。有更好的解决方案吗？我需要检查类型是否未定义，因为它`layout.jade`也是从其他页面呈现的，所以我发现每次呈现页面时传递一些变量只是为了定义菜单的哪些元素应该显示而哪些不应该显示是愚蠢的。

# javascript - 悬停转换为超时显示或点按两次

> ID：15866536
> 
> 赞同：0
> 
> 时间：2013-04-07T19:02:28.797
> 
> 标签：javascript, jquery, css, mobile, responsive-design

我想知道是否有一个简单的解决方案可以将悬停转换为 setTimeout 显示；悬停在设定的时间出现和消失；或实施双击解决方案以仅在双击时显示悬停状态。

我知道你可以使用 JavaScript 调用基于窗口大小的函数；使用类似于下面的东西。

```
if( $(window).width() > 768 ) { 
```

但是有什么方法可以通过确定窗口大小（即智能手机/平板电脑。iOS / Android）来获取所有悬停状态，并将这些状态转换为在双击或一段时间内出现。然后他们消失了。

我希望我可以这样处理；而不是用这些解决方案重建我所有的移动元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:04:24.630

使用 Modernizr ( [http://modernizr.com/download/](http://modernizr.com/download/) ) 来检测触摸设备。因此，悬停状态将仅适用于非触摸设备（桌面）。Modernizr 将添加`.touch`或`.no-touch`分类到您的`html`标签。然后，您可以执行以下操作：

**CSS**

```
.no-touch .class:hover { color: red; }
.touch .hover { color: red; } 
```

`.touch``.hover`仅在触摸设备上添加类|| 双击

**SCSS**

```
.class {
    .no-touch & {
        &:hover { color: red; }
    }
}

/* add class .hover on touch device only || doubleTap */  
.hover {
   .touch & { color: red; }
} 
```

**JAVASCRIPT** || QuoJS || [http://quojs.tapquo.com/](http://quojs.tapquo.com/)

```
$$('.your-class').doubleTap(function() {
    $(this).toggleClass('hover');   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:27:38.853

你的逻辑应该有点像这样。

```
if('ontouchstart' in document) // if it is a touch device
{
    var nStartTime = null;
    $("element").bind('touchstart', function ()
    {
        if(nStartTime && (new Date().getTime() - nStartTime) < 600) // if it is a second tap and it is within 600ms of the first tap, consider it as a double tap
        {
                $(this).trigger('mouseover');
                nStartTime = null;
        }            
        else //consider it as the first tap
        {
            nStartTime = new Date.getTime();
        }
    }
} 
```

# objective-c - 是否可以通过我的应用控制本地通知的音量？

> ID：15866541
> 
> 赞同：4
> 
> 时间：2013-04-07T19:03:04.180
> 
> 标签：objective-c, cocoa-touch, uilocalnotification

我有一个应用程序使用重复间隔定期通知我的用户。现在我的应用用户要求我允许他们以不同于其他人的方式控制通知的音量。（大多低于设备的当前级别）。

我想知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:13:57.197

**不幸的是，没有**（公共）API 可以让您控制通知音量。

弹出窗口和声音都由`UILocalNotification`系统进程管理。该过程使用用户的音量偏好，它还在播放声音之前检查设备是否处于静音模式等。这在某种程度上是连贯的。

**所以，你有两个选择：**

1.  告诉您的用户必须全局调整所有通知的音量或将手机置于静音模式。
2.  自己处理通知并直接从您的应用程序中播放声音（为此，您需要让您的应用程序在后台运行）。

**这是后一种解决方案的片段：**

```
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:YOUR_SOUND_URL error:&error];
[audioPlayer setVolume:YOUR_DESIRED_VOLUME];
if (audioPlayer == nil)
{
    NSLog([error description]);             
}
else 
{
    [audioPlayer play];
} 
```

*注意：将`YOUR_SOUND_URL`和替换`YOUR_DESIRED_VOLUME`为适当的值。*

**另外值得一提的是这个讨论：**
[UILocalNotification 中的声音比最大音量时的 AVAudioPlayer 响亮](https://stackoverflow.com/questions/14549067/sounds-in-uilocalnotification-louder-than-avaudioplayer-at-max-volume)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T19:16:47.700

为不同的音量使用不同的声音文件。例如五个文件alarm1.aiff、alarm2.aiff ... alarm5.aiff。用户在应用程序的首选项中选择一个音量（1 到 5）级别，然后通知将使用相应的文件。

这种方式与使用选项选择警报声音相同。但只是音量不同。

# python - 迭代行后修改熊猫行

> ID：15866549
> 
> 赞同：2
> 
> 时间：2013-04-07T19:04:05.823
> 
> 标签：python, pandas

我正在研究熊猫，我正在尝试对行进行迭代并对行进行一些计算。

我有一个 DataFrame，其中包含许多预先不知道的列。我有一些符号，如果符号名称是“AAPL”，我有一个名为“AAPL”的列，一个名为“S_AAPL”的列，一个名为“V_AAPL”的列。

```
for  pd_prices_index, pd_prices_row in pd_price.iterrows():
    date = pd_prices_index
    for idx, row in pd_orders.iterrows():
        if row['trade_dates'] == date:
        print 'Matching found in date: ' + str(date)
        #
        #Updating the orders
        #
        order_type = row['order'].upper()
        pd_price.ORDER_TYPE[pd_prices_index] = order_type
        symbol_name = row['symbol'].upper()
        pd_price.SYMBOL[pd_prices_index] = symbol_name
        if order_type == 'BUY':
            size = row['size']
        if order_type == 'SELL':
            size = -row['size'] 
        pd_price.QUANTITY[pd_prices_index] = size
        #
        #Updating the symbols values
        #
        s_symbol = 'S_'+symbol_name
        pd_price.xs(pd_prices_index)[s_symbol] = size 
```

最后一个指令不是更新 DataFrame pd_price，因为它当然会创建一个副本。

使用索引 pd_prices_index 和与变量 s_symbol 的值匹配的列的“单元”大小值更新的正确方法是什么？

如果我尝试：

```
pd_price.xs(pd_prices_index, copy = False)[s_symbol]= size 
```

我收到了这条消息：

```
raise Exception('cannot get view of mixed-type or '
Exception: cannot get view of mixed-type or non-consolidated DataFrame 
```

我在 macos 10.6.8 上使用 pandas

熊猫的版本是0.7.3

谢谢

# microsoft-metro - 如何在 WinJS 中实现确认对话框并返回用户的选择

> ID：15866550
> 
> 赞同：2
> 
> 时间：2013-04-07T19:04:06.150
> 
> 标签：microsoft-metro, winjs

使用 WinJS，我试图向刚刚点击“继续”按钮的用户显示一条消息，表明他们没有回答所提出的问题。这将显示一个带有两个按钮的对话框（Windows.UI.Popups.MessageDialog），允许用户选择现在回答（因此留在未回答的问题上）或稍后回答（因此直接进入下一个问题） . 在 Javascript 中，我通常可以使用确认对话框，它会暂停执行，直到用户做出选择，然后我可以使用返回的值来决定是否显示下一个问题。在 WinJS 中，代码执行不会停止。这是我显示对话框的功能：

```
function doSillyMessage(message, title) {
    var messagedialogpopup = new Windows.UI.Popups.MessageDialog(message, title);
    // Add commands and set their CommandIds
    messagedialogpopup.commands.append(new Windows.UI.Popups.UICommand("Answer now", null, 1));
    messagedialogpopup.commands.append(new Windows.UI.Popups.UICommand("Answer later", null, 2));

    // Set the command that will be invoked by default
    messagedialogpopup.defaultCommandIndex = 0;

    // Show the message dialog
    messagedialogpopup.showAsync().done(function (command) {
        if (command) {
            if (command.id == 1) {
                console.log('proceed in popup is false');
                proceed = false;
            }
            else if (command.id == 2) {
                console.log('proceed in popup is true');
                proceed = true;
            }

        }
    });
} 
```

问题在于，在调用 doSillyMessage 时，代码不会等待，因此会继续处理“proceed”变量的当前值。例如，如果在调用 doSillyMessage 时 'proceed' 的值为 false，则在调用 doSillyMessage 后它也是 false 并且仅在稍后更改为 true（如果合适）时，然后我在控制台中看到 'proceed in弹出是真的'。我怎样才能让这些东西以正确的顺序执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T00:13:12.117

对话框是异步的；您需要等待承诺才能延迟到用户处理输入。

最简单的做法是从您对 showAsync 的调用中返回 Promise。改变这个：

```
messagedialogpopup.showAsync().done(function (command) { 
```

到

```
return messagedialogpopup.showAsync().then(function (command) {
   if (command) {
        if (command.id == 1) {
            console.log('proceed in popup is false');
            return false;
        }
        else if (command.id == 2) {
            console.log('proceed in popup is true');
            return true;
        }
    }
}); 
```

并将对 doSillyMessage 的调用更改为：

```
doSillyMessage().then(function (proceed) {
    // proceed will be true or false
}); 
```

您的回调逻辑中有一些漏洞；如果没有设置命令，或者不是 1 或 2，你会返回什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T07:55:06.260

我最终编写了一个对话框助手集来管理我的确认、警报等。这可能对你有用：

**帮手**

```
function confirmAsync(title, msg) {

    // define confirmation buttons
    var buttons = [
        new Windows.UI.Popups.UICommand("Yes"),
        new Windows.UI.Popups.UICommand("No")];

    // make sure to return the showAsync() promise so we can chain from the call to confirmAsync
    return dialogInterceptor(title, msg, buttons).showAsync();

}

function dialogInterceptor(title, msg, buttons) {

    // create dialog
    var dialog = new Windows.UI.Popups.MessageDialog(msg, title);

    // optionally add buttons
    if (buttons) {

        buttons.forEach(function(button) {

            dialog.commands.append(button);

        });

    }

    // return dialog
    return dialog;
} 
```

**用法：**

```
 confirmAsync("Confirmation title text", "Are you sure you want to do something?")
                .done(function (button) {

                    if (button.label === "Yes") {

                        functionToCallWhenYesIsClicked();
                    }

            }); 
```

不过，一般来说，从你的对话中返回承诺，以便你以后可以做一些事情。尝试从第一个对话框启动第二个对话框时要小心，否则您会遇到讨厌的“拒绝访问”消息。

# eclipse - 如何让 Eclipse 中断所有未捕获的异常？

> ID：15866558
> 
> 赞同：18
> 
> 时间：2013-04-07T19:04:33.870
> 
> 标签：eclipse, breakpoints

我正在使用 Eclipse Juno 编写 Java 程序。

当我运行该程序时，它遇到了一个异常，程序只是随着回溯而死。我将这些异常断点设置为随时调试任何意外异常。

*   `Exception`
*   `Throwable`
*   `Error`

但是，无论如何，我仍然看到一些未捕获的异常只会使程序崩溃而不是 Eclipse 中断。我想打破任何未捕获的异常。但我找不到选择所有例外的选项。如何让 Eclipse 打破任何异常？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-07T19:14:41.170

终于我找到了！

我必须为*断点*窗格中的每个异常显式设置*此异常复选框的子类。*

 *另外，我也需要设置`NullPointerException`'s 的捕获位置，否则甚至不会捕获未捕获的异常。

![在此处输入图像描述](https://i.stack.imgur.com/7NFd8.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-14T14:59:10.717

你需要去`Breakpoints`查看>`Add Java Exception Breakpoint` 然后搜索`Throwable`它会出现`java.lang.Throwable`。就像@Eonil 一样添加`java.lang.Throwable`和检查。`Subclasses of this exception`

![在此处输入图像描述](https://i.stack.imgur.com/QWQD9.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-30T18:18:03.827

1.  **窗口->显示视图->其他**
    ![1](https://i.stack.imgur.com/PyeqCm.png)
2.  **搜索出现 Debug->Breakpoints 的断点**
    ![2](https://i.stack.imgur.com/xPI6Bm.png)
3.  **现在通过按`J!`图标添加 Throwable Exception**
    ![3](https://i.stack.imgur.com/Nyuofm.png)
4.  **添加例外**
    ![4](https://i.stack.imgur.com/etaPQm.png)*

# r - 从具有超过 2 个参数的条件创建变量

> ID：15866559
> 
> 赞同：1
> 
> 时间：2013-04-07T19:04:47.620
> 
> 标签：r, conditional-statements

以下是我正在尝试做的简单版本。我有以下向量：

```
wage = 1:10 # Generate a sequence from 1 to 10 
```

我想创建另一个向量`wage_level`，这样：

(i )`wage_level`如果`"low"`小于`wage``5`

(ii )`wage_level`如果`normal`等于`wage``5`

(iii )`wage_level`如果`high`大于`wage``5`

我知道我可以使用嵌套`ifelse`语句来做到这一点，但是，正如我之前指出的那样，这只是我真正想做的事情的简化版本，因为我有大约 15 种替代方案。

**编辑**

下面提供的答案利用了该`cut()`功能，该功能在许多情况下实际上效果很好。但是，就我而言，它似乎不起作用。以下是详细说明。

我能够使用该`cut()`函数来创建`wage_level`向量：

```
wage = runif(10, 1, 10) # Randomly generate 10 values between 1 and 10

# Here I use the cut() function
wage_level = cut(wage,
                 breaks = c(1, 4, 6, 10),
                 labels = c("low", "normal", "high"),
                 include.lowest = TRUE)
> wage
[1] 5.522422 4.793292 8.161671 5.480415 1.396909 3.403013 4.940242 7.762142 6.364159 4.603998

> wage_level
[1] normal normal high   normal low    low    normal high   high   normal
Levels: low normal high 
```

现在，假设我想使用该向量来使用该函数`wage_level`创建另一个向量（`rating`向量） 。`cut()`创建`rating`向量的条件如下：

(i )`rating`如果`"1"`小于`wage_level``"low"`

(ii )`rating`如果`2`等于`wage_level``"normal"`

(iii )`rating`如果`3`大于`wage_level``"high`

我的问题是使用该`cut()`函数不会使`rating`向量成为`numeric`我选择的值的向量。以下代码不起作用：

```
rating = cut(as.numeric(wage_level),
                 breaks = c(0, 1, 2, 3),
                 labels = c(1.2, 6.5, 8.9),
                 include.lowest = TRUE)

> as.numeric(rating)
 [1] 2 2 3 2 1 1 2 3 3 2 
```

我这里主要有两个问题：

(i) 我更喜欢使用实际字符串（即“低”、“正常”和“高”）而不是标签索引的方法

(ii)`rating`向量中的值与我指定的值无关。

还有其他方法可以达到预期的效果吗？

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:16:43.580

```
wage<-1:10
cut(wage,breaks=c(0,4,5,10),include.lowest=T,labels=c("low","normal","high"))
# [1] low    low    low    low    normal high   high   high   high   high  
#Levels: low normal high 
```

如果向量没有被订购怎么办？没有不同：

```
wage <- runif(10,1,10)
wage
# [1] 8.535146 4.964819 7.228050 9.150132 6.369952 8.451137 8.022293 7.621226
# [9] 1.070368 5.931904

cut(wage,breaks=c(0,4,5,10),include.lowest=T,labels=c("low","normal","high"))
# [1] high   normal high   high   high   high   high   high   low    high 
```

不过，请注意该`normal`因子适用于 4 到 5 之间的值。如果您*真的*在使用实数，那么精确地寻找 5 可能是一个奇怪的选择。

# python - 蟒蛇，PIL；文本到图像并插入 MS Excel

> ID：15866561
> 
> 赞同：2
> 
> 时间：2013-04-07T19:04:56.733
> 
> 标签：python, image, excel, python-imaging-library, antialiasing

我正在使用 Python 和 PIL 创建“文本到图像”图形并将它们放入 MS Excel 文档中。我遇到图像质量问题 -

到目前为止，我能够从给定的文本创建图像，但一旦插入 Excel，我发现质量很差 - 下图显示 Excel {Top} 中的“文本框”，并将图像插入 Excel {bottom} - 我想`draw.fontmode = "1"`会有所帮助，因为它会激活抗锯齿，但是**一旦**将图像插入 Excel，这看起来并不成功。

欢迎提出建议。 ![在此处输入图像描述](https://i.stack.imgur.com/tcnh8.png)

到目前为止我使用的代码：

```
import PIL
from PIL import ImageFont
from PIL import Image
from PIL import ImageDraw

fontBold      = ImageFont.truetype("Arialbd.ttf",18)
font          = ImageFont.truetype("Arial.ttf",  14)
img           = Image.new("RGBA", (570,200),(255,255,255))
draw          = ImageDraw.Draw(img)
line0         = "Title Here"
line1         = "Some blurb here under title - main text here, fontmode='1'"
draw.fontmode = "1"
draw.text((180,30),  line0,(0,0,0),font=fontBold)
draw.text((0,  60),  line1,(0,0,0),font=font)
draw = ImageDraw.Draw(img)
img.save("a_test_fontmode1.png", quality=100) 
```

# iframe - 相对于对象定位 iframe 元素

> ID：15866562
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:04:58.793
> 
> 标签：iframe, css-position

所以我试图在我的 wordpress 博客的主页上添加一个喜欢的按钮，在那里我显示摘录而不是完整的帖子。每个摘录旁边都会显示一个缩略图。

这些图像的大小不一致，因此点赞按钮的位置会有所不同。无论大小如何，我如何定位要显示在图像下方的“赞”按钮？

[您可以在http://wordsandmusic.me](http://wordsandmusic.me)上查看我的当前状态

我在论坛上看到了几个解决方案，但不幸的是对编码一无所知，这可能超出了我的能力范围。尽管如此，如果有人可以提供帮助，它会变得更快乐:) 这个问题已经成为那些必须克服的事情之一！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:19:12.477

好的，我看到您`<div class="entry-summary"></div>`在 iframe 上方包含您的喜欢按钮。

然后你可以去文件`styles.css`，搜索并添加我指向的代码行：

```
.entry-content, .entry-summary {
    clear: both;
    display: inline-block; /* ADD THIS LINE */
    height: auto;
    padding: 12px 0 0;
} 
```

你就完成了！

# css - CSS3 动画破坏了 webfont ？并且不会在FF中工作

> ID：15866567
> 
> 赞同：0
> 
> 时间：2013-04-07T19:05:39.823
> 
> 标签：css, firefox, webfonts, css-animations

我在这里有这段动画代码，在 Chrome 中效果很好，但是

在 Safari 中，我来自谷歌的 webfont 重量在整个页面上是正常的，当使用这个动画时，所有的 webfonts 都会变得“轻”重？

火狐这个动画竟然不行？

谢谢！

```
@-webkit-keyframes swing {
    0% { -webkit-transform: translate(2px, 1px) rotate(0deg); }
    10% { -webkit-transform: translate(-1px, -2px) rotate(-1deg); }
    20% { -webkit-transform: translate(-3px, 0px) rotate(1deg); }
    30% { -webkit-transform: translate(0px, 2px) rotate(0deg); }
    40% { -webkit-transform: translate(1px, -1px) rotate(1deg); }
    50% { -webkit-transform: translate(-1px, 2px) rotate(-1deg); }
    60% { -webkit-transform: translate(-3px, 1px) rotate(0deg); }
    70% { -webkit-transform: translate(2px, 1px) rotate(-1deg); }
    80% { -webkit-transform: translate(-1px, -1px) rotate(1deg); }
    90% { -webkit-transform: translate(2px, 2px) rotate(0deg); }
    100% { -webkit-transform: translate(1px, -2px) rotate(-1deg); }
}

@-moz-keyframes swing {
    0% { -moz-transform: translate(2px, 1px) rotate(0deg); }
    10% { -moz-transform: translate(-1px, -2px) rotate(-1deg); }
    20% { -moz-transform: translate(-3px, 0px) rotate(1deg); }
    30% { -moz-transform: translate(0px, 2px) rotate(0deg); }
    40% { -moz-transform: translate(1px, -1px) rotate(1deg); }
    50% { -moz-transform: translate(-1px, 2px) rotate(-1deg); }
    60% { -moz-transform: translate(-3px, 1px) rotate(0deg); }
    70% { -moz-transform: translate(2px, 1px) rotate(-1deg); }
    80% { -moz-transform: translate(-1px, -1px) rotate(1deg); }
    90% { -moz-transform: translate(2px, 2px) rotate(0deg); }
    100% { -moz-transform: translate(1px, -2px) rotate(-1deg); }
}

@-o-keyframes swing {
    0% { -o-transform: translate(2px, 1px) rotate(0deg); }
    10% { -o-transform: translate(-1px, -2px) rotate(-1deg); }
    20% { -o-transform: translate(-3px, 0px) rotate(1deg); }
    30% { -o-transform: translate(0px, 2px) rotate(0deg); }
    40% { -o-transform: translate(1px, -1px) rotate(1deg); }
    50% { -o-transform: translate(-1px, 2px) rotate(-1deg); }
    60% { -o-transform: translate(-3px, 1px) rotate(0deg); }
    70% { -o-transform: translate(2px, 1px) rotate(-1deg); }
    80% { -o-transform: translate(-1px, -1px) rotate(1deg); }
    90% { -o-transform: translate(2px, 2px) rotate(0deg); }
    100% { -o-transform: translate(1px, -2px) rotate(-1deg); }
}

@keyframes swing {
0% { transform: translate(2px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(0px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(2px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(2px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
} 
```

# node.js - Redis node.js - 链接调用以获取用户数据

> ID：15866568
> 
> 赞同：0
> 
> 时间：2013-04-07T19:05:56.587
> 
> 标签：node.js, events, redis, publish-subscribe

我有一个用户数据库：个人资料、产品、配置和其他用户可以拥有的东西。我正在尝试找到一种方法来成功链接我的 redis 调用（一个“getAll”函数），以便我可以返回一个包含所有这些东西的对象，例如：

```
user = {
    profile: {},
    products: {},
    config: {},
    ...
} 
```

这是我访问它们的方式/我正在尝试做的事情：

```
User.getAll = function(uid, next){

    var user = {};
    var multi = client.multi();

    var key = 'user' + uid;
    client.hgetall(key, function(err, profile){
        user.profile = profile;
        //signal that profile is ready
    }

    key = 'products:' + uid;
    client.smembers(key, function(err, arr){
        key = key + ':';
        for (i=0; i < arr.length; i++){
            multi.hgetall(key + arr[i]);
        }
        multi.exec(function(err, products){
            user.products = products;
            //signal that products is ready
        }));
    })

    if (ready) { //obviously this isn't correct.
      return next(null, user);
    }
} 
```

收到所有我想要的数据后如何恢复？事件发射器是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:15:19.957

我认为事件发射器在这里不是一个好的选择。您可以跟踪所有呼叫，如下所示：

```
User.getAll = function(uid, next){
    var requests = ["first", "second"];
    var check_request = function(_key) {
        var idx = requests.indexOf(_key);
        if (idx!==-1) {
            requests.splice(idx, 1);
        }
        if (!requests.length) {
            next(user);
        }
    };

    // ORIGINAL CODE + check_request
    var user = {};
    var multi = client.multi();

    var key = 'user' + uid;
    client.hgetall(key, function(err, profile){
        user.profile = profile;
        check_request("first");
    }

    key = 'products:' + uid;
    client.smembers(key, function(err, arr){
        key = key + ':';
        for (i=0; i < arr.length; i++){
            multi.hgetall(key + arr[i])
        }
        multi.exec(function(err, products){
            user.products = products;
            check_request("second");
        }));
    })
} 
```

显然你会使用一些更有意义的东西`requests = ["first", "second"];`，但我希望你明白这个想法。

也看看[async.js](https://github.com/caolan/async)。这是一个很好的库，它为你简化了它，它可以做更多的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:50:06.847

我认为你应该检查[`async`](https://github.com/caolan/async)模块。它的[`parallel`](https://github.com/caolan/async#parallel)流量控制功能将非常适合您：

```
User.getAll = function(uid, next){

    var user = {};
    var multi = client.multi();

    async.parallel([
        function(callback){
            // first task
            var key = 'user' + uid;
            client.hgetall(key, callback);
        },
        function(callback){
            // second task
            var key = 'products:' + uid;
            client.smembers(key, function(err, arr){
                if (err) return callback(err); // error check!!!
                key = key + ':';
                for (i=0; i < arr.length; i++){
                    multi.hgetall(key + arr[i]);
                }
                multi.exec(callback);
            })
        }
    ], function(err,res){
        // async callback
        if (err) return next(err); // error check!!!
        user.profile = res[0];
        user.products = res[1];
        return next(null, user);
    })
} 
```

# css - CSS背景图片定位

> ID：15866569
> 
> 赞同：0
> 
> 时间：2013-04-07T19:06:04.327
> 
> 标签：css, background, background-image, center

我有一个我无法应付的问题。答案可能在论坛的某个地方，但我不知道如何找到它。

我的主 DIV 容器与中心对齐。我的页面有一种纯色背景颜色，但页面的一部分必须是背景图像。

图片的右边部分是普通页面，左边部分应该在背景中（浏览器视口的左上角）。我不知道如何将图像放在背景中的确切位置并使浏览器忽略它（没有滚动条等）。我可以把这个背景图像放在主 DIV 容器中，但是我怎样才能正确地将页面居中并使浏览器将其视为背景？

更新：

```
----------------------
| |----------| |
| xxxxxxx | |
| xxxx | |
| | | |
| | | |
| | 页 | |
| | | |

外框是浏览器视口
内框是我的居中页面（主 DIV）
xxxx - 是一个图像

```

我不得不将图像切成两半，因此一部分包含在主 DIV 容器中，而其他部分应位于网站的背景部分。所以我的问题是如何将图像放在背景中，以便它始终保持在其主要 DIV 部分旁边的同一位置（无论浏览器视口大小，图像应被视为背景的一部分 - 没有滚动条，当pade 居中）

对不起我的英语（我是在谷歌翻译的帮助下写的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:16:09.277

这将使背景图像居中

```
body
{ 
background-image:url('image.gif');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center; 
} 
```

这会将背景图像定位在浏览器的左上角

```
body
{ 
background-image:url('image.gif');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:left top; 
} 
```

# c++ - 为什么在 AppCode 中将类“移动”到具有相同命名空间/name.h 的文件会导致空 .h，而所有类代码都移动到 .cpp？

> ID：15866570
> 
> 赞同：0
> 
> 时间：2013-04-07T19:06:06.750
> 
> 标签：c++, appcode

想知道新的 C++ 重构工具 - [AppCode](http://blog.jetbrains.com/objc/)我有几个简单的问题：如何将类移动到具有相应名称 (namespace/name.h) 的文件中，如何将声明的函数移动`.h`到 中`.cpp`，如何移回？

所以我有一个我们想要移动的示例代码：

![在此处输入图像描述](https://i.stack.imgur.com/pEIDR.png)

我们将得到`fun.h`下一个代码：

```
#ifndef __fun_H_
#define __fun_H_

#endif //__fun_H_ 
```

和 fun.cpp，其中包含我们所有的类（声明 + 实现）。

我做错了什么？如何将类移动到 AppCode 中名称与其对应的新 .h 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:36:22.887

无法重现此问题。如果您有可重现的示例项目，请在 AppCode 跟踪器[http://youtrack.jetbrains.com/issues/OC](http://youtrack.jetbrains.com/issues/OC)中创建问题并附上示例。

# python-3.x - 二进制搜索代码不起作用

> ID：15866571
> 
> 赞同：-1
> 
> 时间：2013-04-07T19:06:11.000
> 
> 标签：python-3.x

大家下午好，我正在尝试整理已经按字母顺序排序的名称。我不知道为什么我的程序不工作。任何提示或指示都会很好。谢谢。

```
def main():
    names = ['Ava Fiscer', 'Bob White', 'Chris Rich', 'Danielle Porter', 'Gordon Pike', 'Hannah Beauregard', 'Matt Hoyle', 'Ross Harrison', 'Sasha Ricci', 'Xavier Adams']
    input('Please enter the name to be searched: ', )
    binarySearch
main()
def binarySearch(names):
    first = 0
    last = len(names) - 1
    position = -1
    found = False
    while not found and first <= last:
        middle = (first + last) / 2
        if names[middle] == value:
            found = True
            position = middle
        elif arr[middle] > value:
            last = middle -1
        else:
            first = middle + 1
    return position 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:32:18.980

程序不起作用是什么意思？是语法错误还是错误结果中的问题？

使用您粘贴的代码，有几个缩进问题，但除此之外，行：

```
input('Please enter the name to be searched: ', )
binarySearch 
```

在语法上也是不正确的，逗号是多余的，只有像这样出现的函数名是完全错误的。如果您对算法的正确性感兴趣，那似乎没问题，但边界总是很棘手。如果您发现它有帮助，我下面的代码可以正常工作并且语法正确。（名称是数字，但在这种情况下无关紧要）

```
names = [1,2,4,5,6,8,9]

def bs(n):
    start = 0
    end = len(names)
    while end - start > 0:
        m = (start+end)/2
        if names[m] == n:
            return m
        elif n < names[m]:
            end = m
        else:
            start = m + 1
    return -1

print (bs(1))
print (bs(6))
print (bs(9))
print (bs(3))
print (bs(10))
print (bs(-8)) 
```

我想指出的另一件事是，这种二进制搜索已经在 python 标准库中，即[bisect](http://docs.python.org/3.2/library/bisect.html)模块中。但是，如果您是出于练习或任何其他原因编写自己的，那很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T20:56:36.353

如果您使用的是 python 3.*，那么您将要更改 `m = (start+end)/2` 为 `m = (start+end)//2` 当您执行 /2 时，它会在 3.* 中输出一个浮点数

# ruby-on-rails - Rails，实施投票系统，每个用户只允许 1 个赞成/反对票

> ID：15866572
> 
> 赞同：2
> 
> 时间：2013-04-07T19:06:12.063
> 
> 标签：ruby-on-rails, methods, where, vote

有人能告诉我为什么这段代码不起作用吗？在我用于测试的本地服务器上，当我没有时，它会一直闪烁“你已经对此表示赞同”。

这是我的投票控制器代码。

```
 def upvote
    @vote = Vote.find(params[:post_id])

    if current_user.votes.where(post_id: params[:post_id], value: 1)
      flash[:notice] =  "You have already upvoted this!"
      redirect_to :back
    else
      @vote.update_attributes(value: 1)
      @vote.user_id = current_user.id
    end
  end 
```

第 4 行`if current_user.votes.where(post_id: params[:post_id], value: 1)`是实现 where 方法的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:09:54.163

你应该使用[`exists?`](http://guides.rubyonrails.org/active_record_querying.html#existence-of-objects)

```
if current_user.votes.where(post_id: params[:post_id], value: 1).exists? 
```

如果您只使用`current_user.votes.where(...)`，您将获得一个`Relation`始终被解释为 中的`true`值的对象`if`，即使tyhe`Relation`不匹配任何行（仅在 Ruby`false`中`nil`被视为虚假值）。

# android - PhoneGap 可以读/写 Android 和 iPhone 的消息吗？

> ID：15866578
> 
> 赞同：-1
> 
> 时间：2013-04-07T19:06:45.523
> 
> 标签：android, ios, cordova

目前PhoneGap 可以访问两个平台的短信吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:27:11.037

iOS 甚至不允许从本机代码访问其 SMS 数据库，因此也无法通过 PhoneGap 访问。

Android 不直接支持，但是有[这个](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMS%20inbox_sent%20access)插件。我不确定它的效果如何。

# c++ - 如何从我的 Windows 笔记本电脑轻松设计基于 Linux 的终端应用程序？

> ID：15866582
> 
> 赞同：1
> 
> 时间：2013-04-07T19:06:52.540
> 
> 标签：c++, linux, windows, ssh

我有一个配置为“NAS 驱动器”的 Centos 6.4（最小）系统。</p>

我想在我的 Window 笔记本电脑上设计一个基于 Linux 的终端应用程序，然后从我的“NAS 驱动器”构建/运行它。一直切换到 Putty，运行构建脚本然后测试程序本身很烦人！

源代码通过 Samba 共享存储/编辑，因此一切都已经在正确的位置。

是否有适用于 Windows 的 c++ 编辑器，只需按一下按钮 (F9) 即可构建/运行应用程序？或者用于 Windows 的批处理脚本或其他东西可以自动执行一系列 SSH 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:15:14.533

如果我站在你的立场上，我会使用[eclipse 和 cdt](http://www.eclipse.org/cdt/)和[cygwin](http://www.cygwin.com)。

# jquery - 如何在浏览器中存储由 jQuery 创建的本地存储元素？

> ID：15866583
> 
> 赞同：0
> 
> 时间：2013-04-07T19:07:01.057
> 
> 标签：jquery, html, local-storage

我正在使用 jQuery 添加/删除输入字段。

```
<ul id="names">
<li class="input-append">
<input type="text" name="hotel_name[]" id="hotel_name[]">     
<a class="add_name" href="#"><i>&#xf055;</i>add one more</a></li>
  </ul>

 $('.add_name').click(function() {
    $("#names").append('<li class="input-append">'
        + '<input type="text" name="hotel_name[]" id="hotel_name[]">'
          + ' <a class="remove_name add-on btn btn-danger" href="#"><i>&#xf056;</i>remove</a>' + '</li>');
        return false;  }); 
```

有没有办法将创建的元素存储在 LocalStorage 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T00:11:39.277

`var foo = {1: [1, 2, 3]}; localStorage.setItem('foo', JSON.stringify(foo)); var fooFromLS = JSON.parse(localStorage.getItem('foo'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:14:40.777

尝试将元素存储为字符串。这是一个网站，它提供了一个很好的实现来获取元素的 outerHTML。 [http://www.yelotofu.com/2008/08/jquery-outerhtml/](http://www.yelotofu.com/2008/08/jquery-outerhtml/)

```
jQuery.fn.outerHTML = function(s) {
   return (s) ? this.before(s).remove()
     : jQuery("&lt;p&gt;").append(this.eq(0).clone()).html();
} 
```

存储该字符串，然后使用适当的 jQuery 方法重新插入该元素。

# java - RSS 阅读器 NullPointerException

> ID：15866584
> 
> 赞同：0
> 
> 时间：2013-04-07T19:07:19.567
> 
> 标签：java, android, rss

我在以下教程中创建了一个 RSS 阅读器：http: [//techiedreams.com/android-rss-reader-part-3-action-bar-with-animated-item/](http://techiedreams.com/android-rss-reader-part-3-action-bar-with-animated-item/)

我的问题是：当我加载列表（使用 ListActivity.java）时，有时会出现 NullPointerException，我只能看到某些列表项中的文本和其他列表项中的图像。

logCat 是：

```
04-07 22:01:26.900: W/System.err(22141): java.lang.NullPointerException
04-07 22:01:26.900: W/System.err(22141):    at com.td.rssreader.parser.DOMParser.parseXml(DOMParser.java:56)
04-07 22:01:26.900: W/System.err(22141):    at com.td.rssreader.ListActivity$2.run(ListActivity.java:115)
04-07 22:01:26.900: W/System.err(22141):    at java.lang.Thread.run(Thread.java:856)
04-07 22:01:26.945: D/dalvikvm(22141): GC_CONCURRENT freed 887K, 10% free 13642K/15111K, paused 2ms+13ms, total 34ms
04-07 22:01:56.425: W/IInputConnectionWrapper(22141): getSelectedText on inactive InputConnection
04-07 22:01:56.425: W/IInputConnectionWrapper(22141): setComposingText on inactive InputConnection
04-07 22:01:56.425: W/IInputConnectionWrapper(22141): getExtractedText on inactive InputConnection
04-07 22:02:03.165: W/IInputConnectionWrapper(22141): showStatusIcon on inactive InputConnection 
```

DOMParser 类第 56 行是：

```
theString = nchild.item(j).getFirstChild().getNodeValue(); 
```

ListActivity 第 115 行是：

```
 feed = tmpDOMParser.parseXml(feedLink); 
```

我必须做些什么才能使它工作..？我真的在这里找不到我的错误:(

编辑：

ListActivity.java

```
public class ListActivity extends Activity {

    RSSFeed feed;
    ListView lv;
    CustomListAdapter adapter;
    String feedLink;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.feed_list);

        // set the feed link for refresh
        feedLink = new SplashActivity().RSSFEEDURL;

        // Get feed form the file
        feed = (RSSFeed) getIntent().getExtras().get("feed");

        // Initialize the variables:
        lv = (ListView) findViewById(R.id.listView);
        lv.setVerticalFadingEdgeEnabled(true);

        // Set an Adapter to the ListView
        adapter = new CustomListAdapter(this);
        lv.setAdapter(adapter);

        // Set on item click listener to the ListView
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // actions to be performed when a list item clicked
                int pos = arg2;

                Bundle bundle = new Bundle();
                bundle.putSerializable("feed", feed);
                Intent intent = new Intent(ListActivity.this,
                        DetailActivity.class);
                intent.putExtras(bundle);
                intent.putExtra("pos", pos);
                startActivity(intent);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        new MenuInflater(this).inflate(R.menu.activity_main, menu);
        return (super.onCreateOptionsMenu(menu));
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.refresh_option:
            refreshList(item);
            return (true);

        case R.id.about_option:
            Toast.makeText(this, "RSS Reader!", Toast.LENGTH_SHORT).show();
            return (true);

        }
        return super.onOptionsItemSelected(item);
    }

    public void refreshList(final MenuItem item) {
        /* Attach a rotating ImageView to the refresh item as an ActionView */
        LayoutInflater inflater = (LayoutInflater) getApplication()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        ImageView iv = (ImageView) inflater.inflate(R.layout.action_refresh,
                null);

        Animation rotation = AnimationUtils.loadAnimation(getApplication(),
                R.anim.refresh_rotate);
        rotation.setRepeatCount(Animation.INFINITE);
        iv.startAnimation(rotation);

        item.setActionView(iv);

        // trigger feed refresh:
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                DOMParser tmpDOMParser = new DOMParser();
                feed = tmpDOMParser.parseXml(feedLink);

                ListActivity.this.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        if (feed != null && feed.getItemCount() > 0) {
                            adapter.notifyDataSetChanged();
                            // lv.setAdapter(adapter);
                            item.getActionView().clearAnimation();
                            item.setActionView(null);
                        }
                    }
                });
            }
        });
        thread.start();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        adapter.imageLoader.clearCache();
        adapter.notifyDataSetChanged();
    }

    // List adapter class
    class CustomListAdapter extends BaseAdapter {

        private LayoutInflater layoutInflater;
        public ImageLoader imageLoader;

        public CustomListAdapter(ListActivity activity) {

            layoutInflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageLoader = new ImageLoader(activity.getApplicationContext());
        }

        @Override
        public int getCount() {

            // Set the total list item count
            return feed.getItemCount();
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            // Inflate the item layout and set the views
            View listItem = convertView;
            int pos = position;
            if (listItem == null) {
                listItem = layoutInflater.inflate(R.layout.list_item, null);
            }

            // Initialize the views in the layout
            ImageView iv = (ImageView) listItem.findViewById(R.id.thumb);
            TextView tvTitle = (TextView) listItem.findViewById(R.id.title);
            TextView tvDate = (TextView) listItem.findViewById(R.id.date);

            // Set the views in the layout
            imageLoader.DisplayImage(feed.getItem(pos).getImage(), iv);
            tvTitle.setText(feed.getItem(pos).getTitle());
            tvDate.setText(feed.getItem(pos).getDate());

            return listItem;
        }

    }

} 
```

DOMParser.java

```
public class DOMParser {

    private RSSFeed _feed = new RSSFeed();

    public RSSFeed parseXml(String xml) {

        // _feed.clearList();

        URL url = null;
        try {
            url = new URL(xml);
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        }

        try {
            // Create required instances
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();

            // Parse the xml
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            // Get all <item> tags.
            NodeList nl = doc.getElementsByTagName("item");
            int length = nl.getLength();

            for (int i = 0; i < length; i++) {
                Node currentNode = nl.item(i);
                RSSItem _item = new RSSItem();

                NodeList nchild = currentNode.getChildNodes();
                int clength = nchild.getLength();

                // Get the required elements from each Item
                for (int j = 1; j < clength; j = j + 2) {

                    Node thisNode = nchild.item(j);
                    String theString = null;
                    String nodeName = thisNode.getNodeName();

                    theString = nchild.item(j).getFirstChild().getNodeValue();

                    if (theString != null) {
                        if ("title".equals(nodeName)) {
                            // Node name is equals to 'title' so set the Node
                            // value to the Title in the RSSItem.
                            _item.setTitle(theString);
                        }

                        else if ("description".equals(nodeName)) {
                            _item.setDescription(theString);

                            // Parse the html description to get the image url
                            String html = theString;
                            org.jsoup.nodes.Document docHtml = Jsoup
                                    .parse(html);
                            Elements imgEle = docHtml.select("img");
                            _item.setImage(imgEle.attr("src"));
                        }
//description
                        else if ("pubDate".equals(nodeName)) {

                            // We replace the plus and zero's in the date with
                            // empty string
                            String formatedDate = theString.replace(" +0000",
                                    "");
                            _item.setDate(formatedDate);
                        }

                        if ("link".equals(nodeName)) {
                            // Node name is equals to 'title' so set the Node
                            // value to the Title in the RSSItem.
                            _item.setLink(theString);
                        }
                    }
                }

                // add item to the list
                _feed.addItem(_item);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        // Return the final feed once all the Items are added to the RSSFeed
        // Object(_feed).
        return _feed;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:32:56.897

所以你得到一个`java.lang.NullPointerException`来自：

```
theString = nchild.item(j).getFirstChild().getNodeValue(); 
```

问题是您没有`null`检查并且只是假设所有内容都是 non `null`，因此该行中的其中一个调用正在返回`null`，然后您尝试对其调用另一种方法。此外，您需要一些代码组织。这就是你所拥有的...

```
 for (int j = 1; j < clength; j = j + 2) {

                Node thisNode = nchild.item(j);
                String theString = null;
                String nodeName = thisNode.getNodeName();

                theString = nchild.item(j).getFirstChild().getNodeValue();
                if (theString != null) {
                       // rest of your code 
```

`null`在尝试使用您的对象之前添加一些检查，如下所示：

```
 for (int j = 1; j < clength; j = j + 2) {

        Node thisNode = nchild.item(j);

        String theString = null;
        if (thisNode != null && thisNode.getFirstChild() != null) {
            theString = thisNode.getFirstChild().getNodeValue();
        }

        if (theString != null) {
            String nodeName = thisNode.getNodeName();
            // rest of your code 
```

**注意**：这将解决您的即时问题`NullPointerException`，您可能还有其他错误，并且这可能无法解决所有问题（您的代码仍然很假设），但这应该可以解决您发布的问题。

# debugging - Nemiver - 无法引导标准输入

> ID：15866585
> 
> 赞同：3
> 
> 时间：2013-04-07T19:07:20.960
> 
> 标签：debugging, redirect, input

我喜欢 nemiver 的想法，但我无法让 nemiver 的这个基本功能起作用：将标准输入重定向到程序。所以我的程序需要文件输入而不是手动输入，它通常采用以下形式：

```
./program < list.txt 
```

但显然，nemiver 无法识别这种简单的重定向。并将“<”和“list.txt”视为单独的参数。这让我非常沮丧。有针对这个的解决方法吗？非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T17:03:54.493

如果您只想进行事后分析（并且不需要单步），您可以加载一个崩溃转储（核心）文件，该文件可以在任何类型的流水线/重定向场景下生成。

```
( ulimit -c unlimited && ./yourapp <in.txt >out.txt ) || nemiver --load-core=core ./yourapp 
```

这仅在发生崩溃或断言时启动调试器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T14:51:13.520

`main()`作为一个快速而肮脏的解决方案，您可以在...的开头添加类似以下内容

```
 {
 // programmatically redirect stdio
    const char * stdin_filename="input.txt", * stdout_filename="output.txt";
    assert( dup2(open(stdin_filename ,O_RDONLY),0) != -1 );
    assert( dup2(open(stdout_filename,O_WRONLY),1) != -1 );
    asm(" int3"); // optional breakpoint -- kills program when not debugging
    } 
```

只需确保在不调试时禁用此功能（因为在这种情况下您可能想使用正常的重定向方法）。

您还需要以下...

```
#include <unistd.h>
#include <fcntl.h> 
```

# c++ - 如何访问存储在 Mat C++ 中的 findNonZero 坐标

> ID：15866586
> 
> 赞同：4
> 
> 时间：2013-04-07T19:07:35.137
> 
> 标签：c++, opencv, binary, mat

我是 OpenCV 的初学者，我已经阅读了一些教程和手册，但我无法完全理解某些东西。

目前，我正在尝试将二进制图像裁剪成两个部分。我想知道哪一行具有最多的白色像素，然后裁剪掉该行及其上方的所有内容，然后仅使用具有最多白色像素的行下方的数据重新绘制图像。

到目前为止，我所做的是使用 findNonZero 找到白色像素的坐标，然后将其存储到 Mat 中。下一步是我感到困惑的地方。我不确定如何访问 Mat 中的元素并确定数组中哪一行出现最多。

我在下面的代码中使用了测试图像。它给了我 [2,0; 1,1; 2,1; 3,1; 0,2; 1,2; 2,2; 3,2; 4,2; 1,3; 2,3; 3,3; 2,4]。每个元素都有白色像素的 ax 和 y 坐标。首先，我如何访问每个元素，然后只轮询每个元素中的 y 坐标以确定出现最多的行？我曾尝试使用 at<>() 方法，但我认为我一直没有正确使用它。

这种方法是这样做的好方法还是有更好和/或更快的方法？我在[这里](https://stackoverflow.com/questions/8081222/counting-bright-pixels-and-summing-them-medical-image-c/8081502#8081502)使用 L1-norm 阅读了一种不同的方法，但我无法理解它，这种方法会比我的更快吗？

任何帮助将不胜感激。

以下是我到目前为止的代码。

```
#include <opencv2\opencv.hpp>
#include <opencv2\imgproc\imgproc.hpp>
#include <opencv2\highgui\highgui.hpp>

#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    int Number_Of_Elements;
    Mat Grayscale_Image, Binary_Image, NonZero_Locations;

    Grayscale_Image = imread("Test Image 6 (640x480px).png", 0);
    if(!Grayscale_Image.data)
    {
        cout <<  "Could not open or find the image" << endl;
        return -1;
    }

    Binary_Image = Grayscale_Image > 128;

    findNonZero(Binary_Image, NonZero_Locations);
    cout << "Non-Zero Locations = " << NonZero_Locations << endl << endl;

    Number_Of_Elements = NonZero_Locations.total();
    cout << "Total Number Of Array Elements = " << Number_Of_Elements << endl << endl;

    namedWindow("Test Image",CV_WINDOW_AUTOSIZE);
    moveWindow("Test Image", 100, 100);
    imshow ("Test Image", Binary_Image);

    waitKey(0);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:11:13.467

我希望以下工作：

```
Point loc_i = NonZero_Locations.at<Point>(i); 
```

# c# - 包装 WCF 调用 - 发出捕获 lambda 或更好的方法？

> ID：15866591
> 
> 赞同：3
> 
> 时间：2013-04-07T19:08:05.963
> 
> 标签：c#, wcf, lambda, reflection.emit

只是为了避免遇到 XY 问题，我想做的是包装 WCF 调用，以便自动实现重试（和其他规则），但我不知道所有接口提前（它是一个中间件）。所以我基本上采用了 generic 的输出`DuplexChannelFactory<TChannel>.CreateChannel()`，然后再次使它成为代理。关于包装调用和重试等，SO 上有几个不同的问题，但没有一个问题涉及您需要有一个完全通用的解决方案的未知数量的接口。

所以我想每次客户端调用东西时都注入代码，但是我希望我的对象`TChannel`直接实现接口。所以我想使用`Reflection.Emit`子类来保存`DuplexChannelFactory<>`调用结果的“基础”对象，然后连接它自己的方法，包括重试功能。这是我在工厂方法中最初的“对象创建”：

```
 static TInterface generateImplementor<TInterface, Tcallback>(params object[] parameters) where TInterface : class
    {
        // Get the information about the interface.  This is necessary because this
        // is a generic method, where literally anything could be passed in
        Type interfaceType = typeof(TInterface);

        // Create the assembly and module to hold the object created
        // <snip>

        // Define a public class based on the passed-in interface name.
        TypeBuilder generatedType = myModule.DefineType(interfaceType.Name + "Implementor",
            TypeAttributes.Public, typeof(ForwarderBase<TInterface, Tcallback>),
            new Type[] { interfaceType });

        // Implement 'TInterface' interface.
        generatedType.AddInterfaceImplementation(interfaceType); 
```

好的，但是从那里去哪里呢？这有点像我想出的*静态编码*，但我需要在那里进行最后两个调用`Reflection.Emit`。

```
class ForwarderBase<T, Tcallback>
{
    protected T proxyObj;
    public ForwarderBase(Tcallback callbackObj)
    {
        proxyObj = DuplexChannelFactory<T>.CreateChannel(callbackObj, "Endpoint");
    }

    private void noRetWrapper(Action call)
    {
        // Inject extra code here possibly
        try
        {
            call();
        }
        catch (Exception ex)
        {
            // all of this in a retry loop possibly, or whatever
            Console.WriteLine("Exception is: " + ex.ToString());
        }
    }

    private TRet retWrapper<TRet>(Func<TRet> call)
    {
        // Inject extra code here possibly
        try
        {
            return call();
        }
        catch (Exception ex)
        {
            // all of this in a retry loop possibly, or whatever
            Console.WriteLine("Exception is: " + ex.ToString());
        }
        return default(TRet);
    }

    // Dynamically emit these two, as depending on T, there will be an arbitrary number, with arbitrary arguments

    void firstMethod(int x)
    {
        // Lambda captures the arguments
        noRetWrapper(() => proxyObj.noReturnMethodCall(x));
    }

    int secondMethod(int firstParam, double secondParam, string thirdParam)
    {
        // Lambda captures the arguments
        return retWrapper(() => return proxyObj.returningMethodCall(firstParam, secondParam, thirdParam));
    }

} 
```

所以我对`Emit`最后两种方法没有问题（实际上任何数量的方法都应该没问题），除了捕获 lambdas。这是必要的，否则上面的两个“包装器”会爆炸成任何可能数量的类型和返回值组合。

那么我如何`Emit`捕获我需要的 lambda？正如[这个问题](https://stackoverflow.com/questions/939956/howto-emit-a-delegate-or-lambda-expression)所说，没有`Func<...>`或类似的，因此我的一种`Func`，一种`Action`方法在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:03:15.693

这就是[Castle DynamicProxy](http://www.castleproject.org/projects/dynamicproxy/)（和类似的库）的用途。使用它，您可以编写一个拦截器类，每次调用代理上的方法时都会调用该拦截器类。该代理是通过调用方法自动创建的。

拦截器可能如下所示：

```
class IgnoreExceptionsInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
            invocation.ReturnValue = GetDefault(invocation.Method.ReturnType);
        }
    }

    private static object GetDefault(Type type)
    {
        if (type.IsValueType && type != typeof(void))
        {
            return Activator.CreateInstance(type);
        }
        return null;
    }
} 
```

（[`GetDefault()`必须使用，因为没有直接的等价物`default(T)`需要一个`Type`。](https://stackoverflow.com/q/325426/41071)）

使用接口`IFoo`及其实现`Foo`，您可以像这样使用它：

```
var generator = new ProxyGenerator();
IFoo fooProxy = generator.CreateInterfaceProxyWithTargetInterface<IFoo>(
    new Foo(), new IgnoreExceptionsInterceptor());
fooProxy.Whatever(); 
```

# c - 如何使用来自孩子的命名信号量

> ID：15866597
> 
> 赞同：2
> 
> 时间：2013-04-07T19:08:42.283
> 
> 标签：c, linux, fork, semaphore

所以基本上我想在子进程创建后暂停一点，这样父进程就可以在共享内存中为它准备一些数据。我正在尝试使用信号量，如此处所建议的：[How to share semaphore between processes using shared memory](https://stackoverflow.com/questions/8359322/how-to-share-semaphores-between-processes-using-shared-memory)。

**问题 nr 1**：孩子无法打开信号量。

**问题 2**：strerror 返回一个 int，但 man strerror 清楚地说它返回一个 char *。

为避免“您尝试过什么”：

```
sem = sem_open("/semaphore", O_CREAT, 0644, 0);    

for (i = 0; i < num; i++)                                        
{   
    pid = fork();                                                               

    if (pid == 0)                                                               
    {   
        sem = sem_open("/semaphore", 0);                                        
        if (sem == SEM_FAILED)                                                  
        {   
            printf( "Error : %d\n", strerror(errno ));
            exit(0);                                                            
        }
        sem_wait(sem);   
        exit(0);                                                                
    }                                                                                                                       
}

prepare_data_for_child_processes();

for (i = 0; i < mpi_comm_world->np; i++)
    sem_post(sem);

sem_close(sem);
sem_unlink("/semaphore"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:33:41.107

你根本不需要孩子们打电话`sem_open()`——他们可以简单地`sem_wait()`使用他们继承的`sem_t`句柄。

您可能希望将信号量限制为仅您的“工作人员”。在这种情况下，父级应使用限制性权限以独占方式打开信号量 (O_EXCL)，然后立即取消链接。这将防止诚实的错误破坏信号量的状态（但不能防止恶意程序）：

```
...
sem = sem_open("/semaphore", O_CREAT|O_EXCL, 0644, 0); /* Note O_EXCL */
sem_unlink("/semaphore");

for (i = 0; i < num; i++) {
  if (fork() == 0) {
    sem_wait(sem);
    /* Do some work */
    exit(0);
  }
}

prepare_data_for_child_processes();

for (i = 0; i < mpi_comm_world->np; i++)
    sem_post(sem);

sem_close(sem); 
```

现在，如果您的实现支持它，您应该改为`sem_init(1, 0)`在共享内存中。这将为您提供一个真正匿名的信号量，仅限于您的工作人员。

（而且，是的，问题 #2 是缺少包含。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:22:42.800

所以，我从评论中得到了答案：

1）原来这是一个竞争条件问题：父进程在任何子进程打开它之前删除了信号量。

2) 错过了`#include <string.h>`。

# php - 将带有 UTF-16 和 UTF-8 文本的字符串转换为 UTF-8

> ID：15866602
> 
> 赞同：0
> 
> 时间：2013-04-07T19:09:20.373
> 
> 标签：php, encoding, utf-8, utf-16

我阅读了很多关于如何将*UTF-16 从/转换为 UTF-8 的*帖子，但没有人建议如果我两者都有该怎么做。我正在尝试使用 PHP 将具有 UTF-16 和 UTF-8 字符的电子邮件正文文本插入 SQL Server 2008 表列 (UTF-8)。

我曾经`iconv()`将 UTF-16 转换为 UTF-8，但正如我所说，这还不够，因为它不处理 UTF-8：

```
$email->description_html = iconv("UTF-16","UTF-8//TRANSLIT",$that->getMessageText(
                                 $msgNo, 'HTML', $structure, $fullHeader,$clean_email)); 
$email->description      = iconv("UTF-16","UTF-8//TRANSLIT",$that->getMessageText(
                                 $msgNo, 'PLAIN', $structure, $fullHeader,$clean_email)); 
```

我对 UTF-16 和 UTF-8 都试过了，但它不起作用，出现数据库错误：

`can't convert UTF-16 to UTF-8`

```
$email->description_html= iconv('','UTF-8',$that->getMessageText(
                                $msgNo, 'HTML', $structure, $fullHeader,$clean_email)); 
```

我不知道还能做什么，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:56:25.520

在一个文本字符串中不应该有“同时具有 UTF-16 和 UTF-8”这样的东西。如果是这种情况，则字符串已损坏。必须有一个指示符说明使用了哪种编码，并且仅此编码。必须信任该指标才能将字符转换为另一种编码。如果它不起作用：责备源错误地说明不正确的编码。

至于电子邮件：可能有一个多部分邮件有两个（阅读：多个）具有两个不同的多部分标题的不同部分，它们都说明了不同的编码。必须通过应用解析多部分邮件的规则来处理这个问题，即您不能将整个邮件视为单个字符串，而必须先将这些部分分开 - 然后您对每个部分都有一个完全有效的单一编码案例。:)

# jquery - 替代 JQuery .hide

> ID：15866608
> 
> 赞同：1
> 
> 时间：2013-04-07T19:09:32.647
> 
> 标签：jquery

我需要一个替代 Jquery .hide 的替代方法，它“隐藏”一个 div 中的所有内容，所有内容，包括正在播放的任何 html5 视频以及您能想到的任何其他内容。

如果您访问 www.squbo.com 并等待视频播放，取消静音，然后单击 Squbo 徽标，您将听到视频仍在播放，即使它所在的父 div 是“.hidden” jQuery

```
$("#squbologo").load("squbologo.php").click(function(){ $("#homepage").hide(); $("#squbopage").show(); }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T19:10:49.987

```
$('#myIDtag').css('display', 'none'); 
```

或者

```
$('#myIDtag').css('opacity', '0.0'); 
```

让元素继续占据它所在的空间。

最后但并非最不重要的一点是，您还拥有`visibility`CSS 属性，它可能与`opacity`; [https://developer.mozilla.org/en-US/docs/CSS/visibility](https://developer.mozilla.org/en-US/docs/CSS/visibility)

像这样暂停视频：

```
document.getElementById('home-180').childNodes[0].pause(); 
```

通过 Safari 的 Web Inspector 中的控制台在您的网站上进行实时测试。返回未定义，但暂停视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:11:08.993

jQuery`fadeOut`方法：

```
.fadeOut(); 
```

jQuery`css`方法：

```
.css("display", "none"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:11:02.587

您可以使用 jQuery [css](http://api.jquery.com/css/)方法：

```
$("#divID").css("display", "none"); 
```

# c - 通过带有 Codejam 问题的终端输入/输出

> ID：15866613
> 
> 赞同：0
> 
> 时间：2013-04-07T19:09:48.173
> 
> 标签：c, file, io, file-handling

在我开始我的问题之前，我想声明几件事： - 这不是本网站上已有问题的副本。但是，在类似的行上碰巧有一个问题，我仍然不“确切地”理解输入输出是如何完成的。如，回答者说代码有

```
int main(int argc, int argv**)
{
} 
```

但是，在网站上发布的解决方案中，甚至没有使用。一个例子就是这个问题[https://code.google.com/codejam/contest/1460488/dashboard#s=p0&a=0](https://code.google.com/codejam/contest/1460488/dashboard#s=p0&a=0)。（说方言。我确实使用 ubuntu 终端并尝试按照[How can I do file i/o without fstream for 诸如 google code jam 之类的比赛的指示进行操作？](https://stackoverflow.com/questions/6038137/how-can-i-do-file-i-o-without-fstream-for-competitions-like-google-code-jam)。结果我的输出文件中没有写入任何内容。我可以更好地指导吗？如何做到这一点。这不是我已经完成的作业。我只需要知道如何在 linux 终端中进行输入输出。

我还提供了我的代码：-

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>

#define DEBUG 1
#define printd if (DEBUG) printf

char cipher[26] =     {'y', 'h', 'e', 's', 'o', 'c', 'v', 'x', 'd', 'u', 'i', 'g', 'l', 'b', 'k', 'r', 'z', 't', 'n', 'w', 'j', 'p', 'f', 'm', 'a', 'q'};  

int main()
{
  int count, j;
  scanf("%d\n", &count);
  for (j=0;j<count;j++)
  {
    printf("Case #%d: ",j+1);
    translate();
    printf("\n");
  }
}
void translate()
{
  char c;
  scanf("%c", &c);
  while (c != '\n')
  {
    if (c == ' ')
      printf(" ");
    else
    {
      int index = c - 'a';
      if (index >=0 && index <= 26)
      {
        printf("%c", cipher[index]);
      }
    }
    scanf("%c", &c);
  }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:21:43.740

将文件编译为 foo 后，您可以执行以下操作：

```
./foo < input > output 
```

这将读取输入并将您使用 printf 编写的所有内容写入输出。

# java - 套接字 getInetAddress 方法覆盖

> ID：15866618
> 
> 赞同：1
> 
> 时间：2013-04-07T19:10:03.977
> 
> 标签：java, sockets, methods, overriding

我一直想知道是否可以覆盖 Java 的方法以提供与***/IP***`socket.getInetAddress()`不同的输出。例如，只是***IP***。

 **我知道这是一个很小的变化，但自定义格式有时更可取。

这可以轻松完成还是需要字符串操作？例如使用`substring(1)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:13:53.690

[套接字](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)未声明`final`，[`Socket.getInetAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#getInetAddress%28%29)不是`final`，您可以覆盖它，即使这不是一个好主意......

在您的套接字实现中`return super.getInetAddress().substring(1);`应该可以工作。

您也必须提供自己的[SocketFactory](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#setSocketFactory%28java.net.SocketImplFactory%29)。现实是个坏主意，我相信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:14:37.277

问题是 API 类永远不会返回您的 Socket 版本，因此您不能使用覆盖。我建议一种简单的实用方法，可以根据您的需要更改地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T19:14:55.447

如果你想让类的界面更好地满足你的需要，你可以检查[Facade Pattern](http://en.wikipedia.org/wiki/Facade_pattern)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:50:56.557

您命名的方法不会产生任何输出。您描述的格式来自 InetAddress.toString() 方法。如果您不想要这种格式，请不要调用该方法。有 InetAddress 方法可以只获取主机名或地址。使用它们。不是一个真正的问题。**

# java - 如何在使用 Smack 发送聊天时检测错误

> ID：15866630
> 
> 赞同：1
> 
> 时间：2013-04-07T19:11:38.233
> 
> 标签：java, xmpp, chat, smack

我正在使用 smack 发送聊天消息。在测试时我发现，当网络不可用时，API 不会抛出任何异常。

我的代码：

```
Chat chat = connection.getChatManager().createChat(
        "abc@gmail.com", new MessageListener() {

            @Override
            public void processMessage(Chat arg0, Message arg1) {
                System.out.println(arg1.getFrom() + "  says  " + arg1.getBody());

            }
        });
// I Put a break point here and deliberately disable the network.
// But the following line is not throwing the XMPPException

chat.sendMessage("smack says hi.."); /* Send the message¬† */ 
```

我应该添加任何侦听器来捕获异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:32:26.260

您不会收到异常，因为它是异步调用。如果您想知道连接是否已断开，则必须向 Connection 注册一个 ConnectionListener。

# sencha-touch - 将所有 scss 文件包含在一个文件夹中

> ID：15866632
> 
> 赞同：1
> 
> 时间：2013-04-07T19:11:49.883
> 
> 标签：sencha-touch, sass, compass-sass

我正在使用 Sencha Touch 开发一个项目（不确定这是否是一个重要的事实），并且我想将使用 compass 生成的 CSS 文件包含在一个文件夹中的所有 SCSS 文件中。

所以给定这个项目结构：

```
index.html
resources
    css
        app.css (generated file)
    sass
        app.scss
        config.rb (sass config file)
ux
    ExamplePlugin1
        style.scss
    ExamplePlugin2
        style.scss 
```

我想要的是将所有 scss 文件包含到最终的 app.css 文件中的“ux”文件夹中。

为了生成 app.css，compass 读取 sass 文件夹中的 config.rb 文件。我修改了该文件以实现此目的，但这没有用。这是 config.rb 文件的内容：

```
# Get the directory that this configuration file exists in
dir = File.dirname(__FILE__)

# Load the sencha-touch framework automatically.
load File.join(dir, '..', '..', 'resources', 'themes')

# MODIFIED LINE TO INCLUDE THE UX FOLDER
load File.join(dir, '..', '..', 'ux')

# Compass configurations
sass_path = dir
css_path = File.join(dir, "..", "css")

# Require any additional compass plugins here.
images_dir = File.join(dir, "..", "images")
output_style = :compressed
environment = :production 
```

另一种可能的解决方案是将所有单个文件包含到 app.scss 中，但这也不起作用。我在 app.scss 中添加了这一行：

```
@import 'ux/ExamplePlugin1'; 
```

但是当指南针尝试编译它时，这给了我和错误:(

我希望这个解释足以解决问题。如果有人需要更多信息，请问！:P

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:03:22.187

您的问题已经有了解决方案，无需重新发明轮子：

[指南针和 sass：可以自动导入所有部分吗？](https://stackoverflow.com/questions/13954330/compass-and-sass-possible-to-auto-import-all-partials)

# deployment - 如何在 Azure 中仅部署工作人员/Web 角色

> ID：15866633
> 
> 赞同：7
> 
> 时间：2013-04-07T19:11:53.233
> 
> 标签：deployment, azure, cloud, azure-deployment

如果您在 Azure 解决方案中有一个 Web 和一个辅助角色，那么所有等待发布更新包、上传到云存储、等待部署包的所有过程都可能会让人筋疲力尽，浪费大量时间。如何仅上传/部署包含两个角色的 Microsoft Azure 解决方案的工作人员或 Web 角色，并节省 Internet 流量和时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T19:11:53.233

没有为这两个角色中的一个角色构建包的选项，但是如果您的带宽或流量有限，并且想要节省上传时间（如果您有很多静态内容，这可能是相当大的一部分：[看这里的例子](http://www.silverlighthack.com/post/2011/05/22/Azure-Deployment-Package-Inefficiency-%28Bug%29-Content-Size-Added-Twice.aspx)），有一个选择。

您可能知道，从 Visual Studio 生成的用于部署的包（“cspkg”文件）只不过是一个存档文件。假设您只想更新 WORKER 角色。步骤是：

1.  正常创建更新包
2.  用最好的存档管理器（7zfm）打开它
3.  在里面，除了其他文件之外，还有 2 个“cssx”文件——每个角色一个。**删除不必要的 cssx 文件。**
4.  上传到 Azure Blob 存储（可选）
5.  照常使用“本地”或“存储”源从 Azure 管理门户更新实例
6.  **在角色下拉列表中，仅选择要更新的角色**
7.  按确定:)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-30T16:01:08.183

向您的解决方案添加两个额外的云项目要容易得多。在一个项目中，让它仅引用您的 Web 角色。在另一个项目中，让它仅引用您的工作角色。

您可以保留引用这两个角色的云项目并将其用于本地调试，但是在部署时，右键单击仅引用您希望部署的角色的云项目，然后单击“发布”

您最终将为每个云项目维护配置文件，但这听起来比每次手动编辑包文件要容易得多。

# php - PHP - PDO 不将内爆数组作为 SELECT 查询中 IN 子句的问号参数

> ID：15866640
> 
> 赞同：2
> 
> 时间：2013-04-07T19:12:21.000
> 
> 标签：php, pdo, parameters, implode

我在使用 PDO 的准备好的语句中遇到问号参数问题。我的 Query 类看起来像这样（*目前，我仍在为正在使用的驱动程序添加数据限制、自定义参数过滤和自动检测支持的语句等功能*）：

```
// SQL query
class Query {
    public $attributes;

    // constructor for this object
    public function __construct() {
        if ($arguments = func_get_args()) {
            $tmp = explode(" ", current($arguments));

            if (in_array(mb_strtoupper(current($tmp)), ["ALTER", "DELETE", "DROP", "INSERT", "SELECT", "TRUNCATE", "UPDATE"], true)) {
                // classify the query type
                $this->attributes["type"] = mb_strtoupper(current($tmp));

                // get the query string
                $this->attributes["query"] = current($arguments);

                // get the query parameters
                if (sizeof($arguments) > 1) {
                    $this->attributes["parameters"] = array_map(function ($input) { return (is_array($input) ? implode(",", $input) : $input); }, array_slice($arguments, 1, sizeof($arguments)));
                }

                return $this;
            }
        }
    }
} 
```

这是执行查询的代码片段：

```
$parameters = (!empty($this->attributes["queries"][$query]->attributes["parameters"]) ? $this->attributes["queries"][$query]->attributes["parameters"] : null);

if ($query = $this->attributes["link"]->prepare($this->attributes["queries"][$query]->attributes["query"], [\PDO::ATTR_CURSOR => \PDO::CURSOR_FWDONLY])) {
    if ($query->execute((!empty($parameters) ? $parameters : null))) {
        return $query->fetchAll(\PDO::FETCH_ASSOC);
    }
} 
```

这就是我在测试代码中的称呼：

```
$c1->addQuery("lists/product-range", "SELECT * FROM `oc_product` WHERE `product_id` IN (?);", [28, 29, 30, 46, 47]);

if ($products = $c1->execute("test2")) {
    foreach ($products as $product) {
        print_r($product);
    }
} 
```

我遇到的问题是我只看到第一个产品（它是针对普通 OpenCart 安装的测试），ID 为 28。正如您在我的代码中看到的，如果传递的参数是一个数组，它会被我的 lambda 自动检测到在 Query 类构造函数中，所以它被呈现为一个字符串，如`28,29,30,46,47`.

PDO 设置中是否缺少我缺少的参数？或者我正在做的事情可能存在一些错误或平台限制？我知道 PDO 在数组方面可以做的事情有一些限制，这就是为什么我预先分解所有数组以便它们像简单的字符串一样传递。

我在 SO 中看到了一些程序，它们基本上组成了查询字符串，例如，使用类似的程序动态生成`WHERE product_id IN ({$marks})`where但这不是我想要的（如果没有已知的替代方案，我可以求助于，但它看起来不是一个非常优雅的解决方案）。`$marks``str_repeat("?", sizeof($parameters))`

我的开发环境由：Windows 7 x64、PHP 5.4.13（x86，线程安全）、Apache 2.4.4（x86）和 MySQL 5.6.10 x64 组成。

任何提示将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:40:29.063

Lambda 检测一个数组并从中创建逗号分隔的字符串，并且传递的参数被视为字符串，因此查询如下所示：

```
SELECT * FROM tbl WHERE id IN('1,2,3,4') 
```

`'1,2,3,4'`是 SQL 的一个字符串值。

如果您只期望数值，则可以省略将它们作为参数添加，只需将它们放在查询中：

```
$a = [28, 29, 30, 46, 47];
$s = "SELECT * FROM tbl WHERE id IN(".implode(',', array_map('intval', $a)).")"; 
```

对于不同的数据类型，您必须根据需要添加尽可能多的参数占位符，并分别绑定每个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:54:47.673

占位符`?`只能替代单个文字。如果您希望`IN`子句接受任意数量的值，则必须为数组的每个可能长度准备一个新查询。

例如，如果你想在 array 中选择 ids `[1, 2]`，你需要一个看起来像`SELECT * FROM tbl WHERE id IN (?,?)`. 如果然后传入一个三项数组，则需要准备一个查询，如`SELECT * FROM tbl WHERE id IN (?,?,?)`，依此类推。

换句话说，在您拥有要绑定到准备好的语句的数据之前，您无法确定要构建/创建什么查询。

这不是 PDO 限制，它是 SQL 数据库中准备好的查询如何工作的基础。想一想——`?`如果你说的是 SQL领域的数据类型，`IN ?`但它`?`代表了非标量的东西？

一些数据库具有数组类型（例如 PostgreSQL）。*也许*他们可以以`IN <array-type>`相同的方式解释`IN (?,?,...)`，这将起作用。但是 PDO 无法发送*或*接收数组类型的数据（没有`PDO::PARAM_ARRAY`），并且由于这是一个不常见且深奥的功能，因此 PDO 不太可能会这样做。

请注意，这里有一层额外的破损。一个普通的数据库，在遇到这种情况时`int_id = '1,2,3,4'`不会匹配任何东西，因为`'1,2,3,4'`不能强制转换为整数。然而，MySQL 会将其转换为整数`1`！这就是为什么您的查询：

```
$pstmt = $db->prepare('SELECT * FROM `oc_product` WHERE `product_id` IN (?)');
$pstmt->execute(array('28,29,30,46,47')); 
```

会匹配`product_id = 28`。看看疯狂：

```
mysql> SELECT CAST('28,29,30,46,47' AS SIGNED INTEGER);
+------------------------------------------+
| CAST('28,29,30,46,47' AS SIGNED INTEGER) |
+------------------------------------------+
| 28                                       |
+------------------------------------------+
1 rows in set (0.02 sec) 
```

# java - 在递归 A* 算法的每个循环中重置整数

> ID：15866641
> 
> 赞同：0
> 
> 时间：2013-04-07T19:12:24.260
> 
> 标签：java, algorithm, recursion, a-star

在过去的几个小时里，我一直被这个棘手的错误所困扰，我想知道这里是否有人可以帮助我。

基本上我通过递归实现 A*，并且我希望每个节点（在代码中称为 tile）存储一个整数值，该整数值表示它通过的先前节点的数量。这样一来，一旦算法找到出口，它就可以返回并返回最短的路线。

但是，每次循环通过该功能时都会重置轮数计数器。但是，如果我删除该行：

```
map[y][x].setID(path); 
```

它计算得很好，但当然会产生堆栈溢出错误，但我真的不明白为什么这会导致问题。

代码的主要部分在这里：

```
private static Tile[][] findSquares(IntVector v, Tile[][] map, int wall, int empty, int end, int start, int path, int turns)
{
    // System.out.println(turns);
    if (!isHit)
    {
        for (int y = v.y - 1; y <= v.y + 1; y++)
        {
            for (int x = v.x - 1; x <= v.x + 1; x++)
            {
                if (map[y][x].id == end)
                {
                    isHit = true;
                }
                else if (map[y][x].id != wall && map[y][x].id != path && map[y][x].id != end && !isHit && map[y][x].id != start)
                {
                    map[y][x].turns++;
                    System.out.println(map[y][x].turns); //Always Results in 1

                    map[y][x].setID(path);
                    findSquares(new IntVector(x, y), map, wall, empty, end, start, path, turns);
                    break;
                }
            }
        }
    }
    return map;
} 
```

瓦片代表一个节点。这是瓷砖类：

```
static private class Tile
{
    int id;
    int turns = 0;

    Tile(int id)
    {
        this.id = id;
    }

    public void addTurn()
    {
        turns++;
    }

    public void setID(int id)
    {
        this.id = id;
    }

    public int getTurns()
    {
        return turns;
    }

    public Tile setTurns(int turns)
    {
        this.turns = turns;
        return this;
    }
} 
```

也许这与 tile 类是静态的有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:21:10.947

问题不在于轮数计数器正在“重置”，而在于您永远不会多次增加它。递增的分支`turns`仅在 时发生`id != path`，但您随后立即设置`id`为，因此它永远不会再次递增。`path`

你可能想要的是 `map[y][x].turns = map[v.y][v.x].turns + 1;`

无论如何，即使你修正了距离计算，你的代码也几乎不像 A*。看起来您的代码实际上在做的是深度优先搜索，您的搜索堆栈隐式维护在程序调用堆栈上。

A* 算法涉及维护要搜索的节点的优先级队列，并使用启发式函数加上当前距离来计算插入节点的新优先级。

# java - 不明用户界面问题

> ID：15866643
> 
> 赞同：0
> 
> 时间：2013-04-07T19:12:36.550
> 
> 标签：java, javascript, jquery-ui, jsp, jakarta-ee

我发现我们的 Web 应用程序中出现了一些不寻常的字符。

它看起来与我在雅虎印度网站上找到的非常相似。[http://in.yahoo.com/](http://in.yahoo.com/)

如果您使用 Firefox（我使用 19.0.2）打开[此链接](http://in.yahoo.com/)，然后通过左侧导航向下，电影 -> 新闻 -> omg！-> 屏幕 -> `<skip > -> <skip>`-> 这里 -> 这里

这是什么字符，可能是什么原因。在 IE 和 Chrome 中，这些字符显示为小框。

与 i18n 或字符编码有什么关系。

它并不总是或在所有浏览器中都发生，它发生在我组织中的某些人身上，尤其是在 IE 中。

请建议。

谢谢

# jquery - 用于丰富状态消息的 jQuery 插件

> ID：15866644
> 
> 赞同：1
> 
> 时间：2013-04-07T19:12:38.340
> 
> 标签：jquery, jquery-plugins

是否存在任何用于获取用户输入并为其添加富文本感觉的插件。例如，用户发布包含视频、图像或网页链接的状态。

是否有一个 jQuery 插件可以识别链接、识别内容类型，然后将其包装在适当的父元素中？我知道我可以自己用 jQuery 构建它，它似乎无处不在，我想我应该尝试把它留给专家。

如果有任何插件，列出它们将非常有帮助。在谷歌上找不到任何东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:21:57.140

有很多富文本编辑器可用，包括开源。我只是用谷歌搜索了一些：

[10个优秀的免费富文本编辑器](http://www.jquery4u.com/tools/10-excellent-free-rich-text-editors/)

[轻量级的富文本编辑器](http://archive.plugins.jquery.com/project/lwRTE)

[20个优秀的免费富文本编辑器](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/)

还要检查几个相关的问题： [寻找丰富的文本编辑器，即简单](https://stackoverflow.com/questions/4674609/looking-for-a-rich-text-editor-that-is-simple)

我使用了 markit 和 nicedit 轻量级，但不提供视频功能。

这些插件将为您提供添加富文本的便利，但在保存时您必须保存完整的 html 标记并按原样获取它。

# c++ - 在 OpenGL 中使用 std::vector 作为顶点/元素列表

> ID：15866648
> 
> 赞同：1
> 
> 时间：2013-04-07T19:13:01.143
> 
> 标签：c++, opengl

我想画一堆四边形。

现在我有一个问题；绘图工作正常而且速度很快，但我使用 std::vector 作为我的四边形的容器，它们真的非常非常慢。来自 XNA，我想我应该创建类似 spriteBatch 的东西，这样我就可以调用 DrawQuad() 将给定的四边形添加到列表中，然后最后调用 End() 来绘制每个四边形。

我当前的代码通常会在控制台上打印类似这样的内容：

```
DrawQuad(): 77
End(): 0 
```

一遍又一遍地。

Main.cpp (sf::Clock 是[SFML](http://sfml-dev.org/)中的时钟类)

```
sf::Clock time;
for (int y = 0; y < 100; y++)
    for (int x = 0; x < 100; x++)
        renderer.DrawQuad("A", Vector2<GLfloat>(-1.0f + x * 0.02f, -1.0f + y * 0.02f));
std::cout << "DrawQuad(): " << time.getElapsedTime().asMilliseconds() << std::endl; 
```

渲染器.cpp：

```
void TextRenderer::DrawQuad(string text, Vector2<GLfloat> position)
{
    //TOP LEFT
    vertexBufferVector.push_back(position.X);
    vertexBufferVector.push_back(position.Y);

    //TOP RIGHT
    vertexBufferVector.push_back(position.X + 0.02f);
    vertexBufferVector.push_back(position.Y);

    //BOTTOM RIGHT
    vertexBufferVector.push_back(position.X + 0.02f);
    vertexBufferVector.push_back(position.Y + 0.02f);

    //BOTTOM LEFT
    vertexBufferVector.push_back(position.X);
    vertexBufferVector.push_back(position.Y + 0.02f);

    int elementCount = elementBufferVector.size() / 6; 

    elementBufferVector.push_back(elementCount * 4);
    elementBufferVector.push_back(elementCount * 4 + 1);
    elementBufferVector.push_back(elementCount * 4 + 2);

    elementBufferVector.push_back(elementCount * 4 + 2);
    elementBufferVector.push_back(elementCount * 4 + 3);
    elementBufferVector.push_back(elementCount * 4);
}

void TextRenderer::End()
{
    sf::Clock time;

    GLfloat* vertexArray = &vertexBufferVector[0];
    glBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * vertexBufferVector.size(), vertexArray, GL_STATIC_DRAW);

    GLint* elementArray = &elementBufferVector[0];
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLint) * elementBufferVector.size(), elementArray, GL_STATIC_DRAW);

    glDrawElements(GL_TRIANGLES, elementBufferVector.size(), GL_UNSIGNED_INT, 0);

    vertexBufferVector.clear();
    elementBufferVector.clear();

    std::cout << "End(): " << time.getElapsedTime().asMilliseconds() << std::endl;
} 
```

知道自己在做什么的人如何解决这个问题？10000个四边形真的不应该成为问题。

写完这一切后，我还将循环从 (100, 100) 增加到 (1000, 100)，现在绘图需要 4-5 毫秒，这样算好吗？我想不...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:47:35.070

既然这已经死了，我只会回答我的问题，也许它会对某人有所帮助。

我没有使用向量，而是使用了具有设定大小的数组。这将 100000 个四边形（也包括纹理）的总渲染时间降低到平均约 3.260 毫秒。

我的 .h 现在看起来像这样：

```
const int MAX_BUFFER_SIZE = 1000;
const int MAX_VERTEX_BUFFER_SIZE = MAX_BUFFER_SIZE * 16;
const int MAX_ELEMENT_BUFFER_SIZE = MAX_BUFFER_SIZE * 6;

...

GLint vertexBufferArrayInserts;
GLfloat vertexBufferArray[MAX_VERTEX_BUFFER_SIZE];
GLint elementBufferArray[MAX_ELEMENT_BUFFER_SIZE]; 
```

以及 .cpp 文件的相关部分：

```
void TextRenderer::DrawQuad(Vector2<GLfloat> position)
{
    if(vertexBufferArrayInserts == MAX_BUFFER_SIZE)
        End();

    //TOP LEFT
    vertexBufferArray[vertexBufferArrayInserts * 16] = position.X;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 1] = position.Y;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 2] = 0.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 3] = 0.0f;

    //TOP RIGHT
    vertexBufferArray[vertexBufferArrayInserts * 16 + 4] = position.X + 16.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 5] = position.Y;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 6] = 24.0f / 512.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 7] = 0.0f;

    //BOTTOM RIGHT
    vertexBufferArray[vertexBufferArrayInserts * 16 + 8] = position.X + 16.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 9] = position.Y + 16.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 10] = 24.0f / 512.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 11] = 32.0f / 512.0f;

    //BOTTOM LEFT
    vertexBufferArray[vertexBufferArrayInserts * 16 + 12] = position.X;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 13] = position.Y + 16.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 14] = 0.0f;
    vertexBufferArray[vertexBufferArrayInserts * 16 + 15] = 32.0f / 512.0f;

    //ELEMENT BUFFER
    elementBufferArray[vertexBufferArrayInserts * 6] = vertexBufferArrayInserts * 4;
    elementBufferArray[vertexBufferArrayInserts * 6 + 1] = vertexBufferArrayInserts * 4 + 1;
    elementBufferArray[vertexBufferArrayInserts * 6 + 2] = vertexBufferArrayInserts * 4 + 2;
    elementBufferArray[vertexBufferArrayInserts * 6 + 3] = vertexBufferArrayInserts * 4 + 2;
    elementBufferArray[vertexBufferArrayInserts * 6 + 4] = vertexBufferArrayInserts * 4 + 3;
    elementBufferArray[vertexBufferArrayInserts * 6 + 5] = vertexBufferArrayInserts * 4;

    vertexBufferArrayInserts++;
}

void TextRenderer::End()
{
    glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(GLfloat) * vertexBufferArrayInserts * 16, vertexBufferArray);

    glBufferSubData(GL_ELEMENT_ARRAY_BUFFER, 0, sizeof(GLint) *  vertexBufferArrayInserts * 6, elementBufferArray);

    glDrawElements(GL_TRIANGLES, vertexBufferArrayInserts * 6, GL_UNSIGNED_INT, 0);

    vertexBufferArrayInserts = 0;
} 
```

这就是我计时的方式：

```
sf::Clock timer;
renderer.Begin(projMatrix);

for (int y = 0; y < 100; y++)
    for(int x = 0; x < 1000; x++)
        renderer.DrawQuad(Vector2<GLfloat>(16.0f * x, 16.0f * y));

renderer.End();

avgDrawTime += timer.getElapsedTime().asMicroseconds();
drawCalls++;

if(drawCalls % 100 == 0)
    std::cout << avgDrawTime / drawCalls << std::endl; 
```

# css - 实施轮播的问题

> ID：15866649
> 
> 赞同：1
> 
> 时间：2013-04-07T19:13:34.393
> 
> 标签：css

我正在尝试自己为我正在设计的网页实现一个响应式轮播。我遇到了一些问题，用一些截图来说明可能会容易上千倍，所以这里是：

![在此处输入图像描述](https://i.stack.imgur.com/B6ffD.png)

如您所见，我有两个箭头来分割项目和一个水平滚动条。

箭头分别向左和向右浮动，项目只是容器`inline-block`内的 div `div.items`，其宽度为 90%（和 overflow-x：滚动或课程）。

所以现在，如果我将另一个项目附加到 DOM，我会以这个结尾：

![在此处输入图像描述](https://i.stack.imgur.com/20m0z.png)

为什么第四项在下面？我没有浮动项目，并且当我指定水平滚动时，我希望它位于后面并且能够通过滚动条看到它。

我错过了什么？

我将粘贴相关代码：

**HTML：**

```
<div class="grid">
  <div class="left-arrow"></div>
  <div class="items">

    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>

  </div>
  <div class="right-arrow"></div>
</div> 
```

**CSS：**

```
div.grid {
  margin-top: 20px;
  padding: 10px 75px;
  text-align: center;
  z-index: 1000;
}

div.grid .left-arrow, div.grid .right-arrow {
  position: relative;
  top: 70px;
}

div.grid .left-arrow {
  float: left;
  width: 0;
  height: 0;
  margin: 0 30px 0 -50px;
  border-top: 50px solid transparent;
  border-bottom: 50px solid transparent;
  border-right: 35px solid #ddd;
}

div.grid .right-arrow {
  float: right;
  width: 0;
  height: 0;
  margin: 0 -50px 0 30px;
  border-top: 50px solid transparent;
  border-bottom: 50px solid transparent;
  border-left: 35px solid #ddd;
}

div.items {
  display: inline-block;
  z-index: 100;
  width: 90%;
  overflow-x: scroll;
}

div.item {
  margin: 10px;
  display: inline-block;
  position: relative;
  left: 0;  
} 
```

**编辑：** Oreilly 正是我期待实现的目标：

[http://shop.oreilly.com/category/browse-subjects/programming.do](http://shop.oreilly.com/category/browse-subjects/programming.do)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:31:35.240

容器的高度正在增加以容纳额外的物品。我相信你应该可以通过在容器元素上设置一个特定的高度来获得你想要的效果。

编辑：经过更多测试，事实证明设置高度实际上对此没有任何影响。您需要进行设置`white-space: nowrap;`以使其实际工作。

这是完整的CSS `div.items`（这是我为了让它在我的测试中工作而改变的）：

```
div.items {
  display: inline-block;
  z-index: 100;
  width: 90%;
  overflow-x: scroll;
  white-space: nowrap;
} 
```

# canvas - EaselJS 的无限画布

> ID：15866661
> 
> 赞同：4
> 
> 时间：2013-04-07T19:14:26.060
> 
> 标签：canvas, easeljs

有没有办法用 EaselJS 显示无限画布？我已经阅读了使用 Javascript 或 JQuery 的方法，但是有没有办法使用 EaselJS 来管理它？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T01:17:53.180

您可以使用 JavaScript/jQuery 拖放画布本身 - 但 EaselJS 内容上有一个内置的拖放模型。查看示例文件夹中的 DragAndDrop 示例。

主要步骤是：

*   *监听某物*上的 mousedown 事件。您应该在任何显示对象上使用内置的 EaselJS 事件。您不能使用舞台事件“stagemousedown”，因为它不会公开您需要的拖动事件，并且 Canvas 上的 DOM 事件不会有任何帮助。
*   事件处理程序包含的鼠标事件将调度额外的拖放事件。为“mousemove”和“mouseup”添加监听器。
*   响应鼠标移动事件以移动画布上的内容。

我扔了一个小钉子来展示这一点。 [http://jsfiddle.net/lannymcnie/jKuyy/1/](http://jsfiddle.net/lannymcnie/jKuyy/1/)

它绘制了一堆内容，然后您可以拖动它。红框是监听鼠标事件的地方，但它只是移动一个包含所有内容的大容器。

以下是重点：

```
dragBox.addEventListener("mousedown", startDrag); // Object listens to mouse press

function startDrag(event) {
    // Get offset (not shown here, see fiddle)
    event.addEventListener("mousemove", doDrag);
}
function doDrag(event) {
    // Reposition content using event.stageX and event.stageY (the new mouse coordinates)
} 
```

希望能帮助到你！

**编辑：EaselJS 的 NEXT 版本（0.7.0+，自 2013 年 8 月起在 GitHub 中可用）具有更易于使用的全新拖放模型。** 新的冒泡事件模型让您只需在任何对象上附加 pressmove 和 pressup 事件即可在有人按下对象时获取事件，然后进行拖动操作。

```
dragBox.on("pressmove", function(event) {
    // Note that the `on` method automatically sets the scope to the dispatching object
    // Unless you pass a scope argument.
    this.x = event.stageX;
    this.y = event.stageY;
}); 
```

# c# - 存储 DXF 线节点

> ID：15866662
> 
> 赞同：0
> 
> 时间：2013-04-07T19:14:29.230
> 
> 标签：c#, dxf

第一次在这里发帖。我是一名 CNC 机床操作员，我想制作一个为我的 CNC 机床（G 代码）输出代码的程序。

我想了解的是如何将线的起点和起点放在包含我要加工的几何图形的 DXF 文件中，放到某种列表中，这样我就可以（希望）用它们做一些扫描线计算.

我找到了很多关于如何读取 DXF 文件的信息，但我找不到如何存储这些点。

SO：我如何将一对线点（x1 y1，x2 y2）保存到列表中并与它们一起计算。

别介意我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T18:11:17.463

在 C# 中有一个对象称为`List`. 您可以将点作为`Point`对象存储在列表中。

```
List<Point> myList = new List<Point>();
myList.Add(new Point(x1, y1)); 
```

然后继续使用该`Add`方法将更多点添加到您的列表中。您可以使用`foreach`循环或索引号从列表中检索点。这些点在列表中的排列顺序与您添加它们的顺序相同。

# orchardcms - Orchard CMS 自定义模块项目文件

> ID：15866663
> 
> 赞同：0
> 
> 时间：2013-04-07T19:14:31.540
> 
> 标签：orchardcms, orchardcms-1.6

我有一个现有的解决方案（多个项目，一个 MVC Web 项目），我试图将其包装到一个 Orchard 模块中。

所有文档都说 web csproj 应该位于我的模块目录下的根目录下（例如 Modules/MyModule/MyWeb.csproj）。

但是，我有一个现有的解决方案结构，其中 sln 文件位于顶层，每个 csproj 文件（和项目内容）位于其自己的目录中（在 Visual Studio 中构建多项目应用程序时的标准解决方案结构）。

有没有办法告诉我的 Module.txt 文件 Orchard Module csproj 在 MyModule/MyWeb/MyWeb.csproj 下？我宁愿不重组整个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T00:33:32.160

**注意：**作为澄清点，它不是 ~/Modules/MyModule/MyWeb.csproj 而是 ~/Modules/MyModule/MyModule.csproj。模块的文件夹名称必须与项目的文件名匹配（在 .csproj 之前）。这是由动态扩展加载器强制执行的，它需要 ~/Module/{ModuleId}/{ModuleId}.csproj。（主题需要类似的方法。）

唯一可能的方法是编写一个包含自定义加载器的自定义模块，该模块遵循上述内容。在您的模块中，创建您自己的 IExtensionLoader 实现，并将其注册到 Autofac。但是，我不知道它是否会起作用；我从来没有试过。

您可能会更轻松地重新组织您的解决方案。

# data-structures - 什么是无环连通无向图？

> ID：15866666
> 
> 赞同：3
> 
> 时间：2013-04-07T19:14:38.200
> 
> 标签：data-structures, graph

我正在通过**最小生成树**的讲座，它说我们应该在无向图中找到连接的无环子图。

我的问题是，连接的无向图如何是无环的，因为它是连接的，您可以从任何顶点移动到任何顶点。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T20:35:49.637

这实际上只是一个定义问题。请参阅[http://en.wikipedia.org/wiki/Cycle_(graph_theory)](http://en.wikipedia.org/wiki/Cycle_(graph_theory))。您似乎将其称为循环，在文章中称为**封闭行走**：从顶点到自身的任何路径。正如您自己所说，使用该定义，任何连接的无向图都包含循环。但是，如果您要求从第二个到最后一个顶点的子路径是一条简单路径（因此是**简单的循环**），即不包含重复顶点的路径，那么您最终会得到许多实际上是无环的连接无向图，例如树实例。显然，路径还必须包含至少 3 条边，否则任何`(A,B,A)`一条边都是循环。

考虑以下图表

```
 A         A
1)  / \   2)  / \
   B   C     B - C 
```

只`2)`包含简单的循环，所以`1)`是非循环的。

# java - Java输入对话框工具提示和粘贴选项？

> ID：15866673
> 
> 赞同：0
> 
> 时间：2013-04-07T19:15:00.747
> 
> 标签：java, swing, tooltip, textfield, joptionpane

Java中是否有一种为输入对话框的文本字段设置工具提示的好方法？

例如：

`String input = JOptionPane.showInputDialog("Enter input:");`

是否也可以为此文本字段提供右键单击粘贴选项？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:46:54.097

我认为不可能通过该静态方法添加工具提示。我建议您创建自己的 JOptionPane 实例，找到 JTextField 并将其设置为工具提示。

```
public class Main {

    public static List<Component> getAllComponents(final Container c) {
        Component[] comps = c.getComponents();
        List<Component> compList = new ArrayList<Component>();
        for (Component comp : comps) {
            compList.add(comp);
            if (comp instanceof Container)
                compList.addAll(getAllComponents((Container) comp));
        }
        return compList;
    }

    public static void main(String[] args) {
        JOptionPane optionPane = new JOptionPane();
        optionPane.setMessage("What's your name?");
        optionPane.setMessageType(JOptionPane.QUESTION_MESSAGE);
        optionPane.setWantsInput(true);
        JDialog dialog = optionPane.createDialog("Simple Question");
        for (Component c : getAllComponents(dialog)) {
         if (c instanceof JTextField) {
             c.setToolTipText("I'm a tooltip!");
         }
        }
        dialog.setVisible(true);
        dialog.dispose();
    }
} 
```

默认情况下，右键单击并粘贴即可。

# javascript - 当弹出窗口处于活动状态时，在启动时自动加载页面到弹出窗口中

> ID：15866680
> 
> 赞同：0
> 
> 时间：2013-04-07T19:15:45.487
> 
> 标签：javascript, popup

很难想出一个标题，我道歉。

问题是这样的：由于现代网络浏览器禁用弹出窗口，我需要一种解决方法。

当访问者访问该网站时，他们会被提示按下按钮。按下按钮后，将使用以下代码启动弹出窗口：

```
w = window.open('/audio/audioplayer.php?id='+audioId, 'audioplayer', params); 
```

现在弹出窗口已打开，我希望当访问者查看其他页面时，弹出窗口会根据他们所在的任何页面加载特定信息。

我不确定这是否可行或我如何才能做到这一点（检查弹出窗口是否打开，是否正在加载信息，是否没有重新显示按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:56:42.397

`window.open`返回一个 windowObjectReference - 这是您可以与弹出窗口对话的唯一方法。`windowObjectReference.closed`特别是，您可以通过该属性判断该窗口是否已关闭。并且弹出窗口有一个`window.opener`属性，该属性引用了父窗口。您可以使用两者进行通信。

但是，您似乎希望在页面加载之间保持这种通信。你有几个选择：

*   尽量保持窗口之间的链接。问题在于，当父窗口重新加载时，所有 javascript 变量都会重置，并且无法恢复对弹出窗口的引用 - 除非弹出窗口使用`window.opener`. [此链接](http://www.irt.org/articles/js205/#8)显示了这种方法以及另一种带有框架的方法。
    你可以认为它丑陋或聪明。但这并不完美。（如果用户在新链接中打开页面，您将无法执行任何操作）
*   使用 ajax 从主页面和弹出页面与服务器通信。当顶级页面想要向弹出窗口发送消息时，它们会向您的服务器启动一个 XMLHttpRequest，该服务器会通知将消息留在“队列”中的脚本。弹出页面也定期使用 XHR 轮询/长轮询服务器（或[服务器发送事件](https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events)，我个人最喜欢的）并相应地更新其自己的内容。
    这可能比您想要的更复杂/昂贵，但它也是最安全的解决方案。
*   不要使用弹出窗口，就像建议的其他答案一样。带有 div 的 div`position: fixed`可以为您带来类似的结果，并且可能使您免于使用窗口之间的那种通信方法，但是它也会导致每页有一个对话框，因此您需要询问服务器是否正在运行对话框的另一个实例。不太确定其他同步方法是否适用于此（本地存储？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:21:58.663

我认为不可能检测到弹出窗口的打开位置。

您是否考虑过使用对话框？而不是弹出窗口？

# ios - 如何在 UIMenuItem 中显示多行？

> ID：15866681
> 
> 赞同：2
> 
> 时间：2013-04-07T19:15:49.547
> 
> 标签：ios, cocoa-touch, uimenucontroller, uimenuitem

我试图在自定义 UIMenuItem 中显示多行文本。我尝试在 UIMenuItem 的 title 属性中使用一个简单的“\n”，但没有成功。例子：

```
UIMenuItem *menuItem; //Is then allocated properly....

// Before the Menu is displayed
menuItem.title = @"This is a first line.\nThis is a second line."; 
```

不幸的是，我最终只显示了一行...

我想要达到的效果类似于您在 Apple iPod/Music 应用程序中的 LongPress 上看到的效果。

![iPod 应用程序中的多行 UIMenuItem](https://i.stack.imgur.com/6Zdas.png)

我刚刚发现了这个 github 项目作为解决方案： [https ://github.com/questbeat/QBPopupMenu](https://github.com/questbeat/QBPopupMenu)

您可以在 MenuItem 中显示任何自定义 UIView。所以我插入了一个多行 UILabel 并且有效。

但是，如果可能的话，我宁愿使用本机 Apple UIMenutItem 方法。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:40:31.660

您需要更改 的一些内部属性`UIMenuItem`，但不幸的是 Apple 没有提供这样做的方法。

所以，就今天而言，没有办法改变 a 的显示`UIMenuItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:59:41.053

你试过'\r'而不是'\n'吗？

# javascript - 内联 require.js 文本！使用咕噜声

> ID：15866683
> 
> 赞同：11
> 
> 时间：2013-04-07T19:15:50.523
> 
> 标签：javascript, build, requirejs, gruntjs, requirejs-text

今天下午我一直在试验 Grunt 和 Require JS。我是该模块的忠实粉丝，`text`并使用它来引入我的模板。在非基于 Grunt 的项目中，我使用`inlineText`和`stubModules`Require JS 选项来内联模板文件，效果很好。但是，我无法让它与 Grunt 一起使用。

**需要配置**

```
require.config({
    paths: {
        // Using Bower for dependency management
        text: '../components/requirejs-text/text'
    }
}); 
```

**用法**

```
define(['text!template.html'], function (html) {
    // Do stuff with html
}); 
```

**Gruntfile.js**

```
requirejs: {
    dist: {
        options: {
            baseUrl: 'app/scripts',
            optimize: 'none',
            preserveLicenseComments: false,
            useStrict: true,
            wrap: true,
            inlineText: true,
            stubModules: ['text']
        }
    }
} 
```

运行后，`grunt`我在控制台中收到各种错误：

*   找不到文件`/dist/components/requirejs-text/text.js`
*   一个`Load timeout for modules: text!template.html_unnormalized2`

那么两个问题：

*   它似乎没有内联（然后存根）`text.js`代码
*   它似乎没有内联`template.html`文件

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T18:31:48.993

您看到错误是因为您需要指出模块`r.js`在哪里`text`。

您可以通过添加路径配置来做到这一点：

```
requirejs: {
    dist: {
        options: {
          baseUrl: 'app/scripts',
          optimize: 'none',
          preserveLicenseComments: false,
          useStrict: true,
          wrap: true,
          inlineText: true,
          stubModules: ['text'],
          paths: {
             'text': 'libs/text' // relative to baseUrl
          }
       }
    }
} 
```

然后，您需要将`text.js`模块下载到相应的目录中。

但为什么你`require.config`的不工作？

因为`r.js`需要在某个时候评估配置。您没有在问题中提到您[的](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L35)`require.config`. [example.build.js#L35](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L35)）：`r.js`

```
requirejs: {
    dist: {
        options: {
          baseUrl: 'app/scripts',
          optimize: 'none',
          preserveLicenseComments: false,
          useStrict: true,
          wrap: true,
          inlineText: true,
          stubModules: ['text'],
          mainConfigFile: '../config.js' // here is your require.config

          // Optionally you can use paths to override the configuration
          paths: {
             'text': 'libs/text' // relative to baseUrl
          }
       }
    }
} 
```

# android - 更改列表片段内容

> ID：15866684
> 
> 赞同：0
> 
> 时间：2013-04-07T19:16:05.337
> 
> 标签：android, android-fragments

我使用 listfragment 并尝试更改它的内容。这是我的活动代码：

```
public class MainActivity extends Activity {
    public static Context appContext;
    public ToFragment ToFragment;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.activity_main);
        ActionBar actionbar = getActionBar();
        actionbar.setDisplayShowTitleEnabled(false);
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        ActionBar.Tab FromTab = actionbar.newTab().setText("FromFragment");
        ActionBar.Tab ToTab = actionbar.newTab().setText("ToFragment");

        FromFragment FromFragment = new FromFragment();
        ToFragment ToFragment = new ToFragment();

        ToTab.setTabListener(new MyTabsListener(ToFragment));
        FromTab.setTabListener(new MyTabsListener(FromFragment));

//        ListView tolistview = ToFragment.getListView();
//        ListView fromlistview = FromFragment.getListView();

        actionbar.addTab(ToTab);
        actionbar.addTab(FromTab);
    }

      @Override
      public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, menu);
        return true;
      }

      @Override
      public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.action_refresh:
            String[] countries = new String[] {
                    "Russia",
                    "USA",
                };  
            ToFragment.changeContent(countries);
          break;
        case R.id.action_settings:

          break;

        default:
          break;
        }

        return true;
      }
} 
```

这里我初始化了两个listfragment，ToFragment 和FromFragment。然后在这里 (onCreateOptionsMenu) 我尝试通过我的函数 changeContent 更改 ToFragment 的内容。这是片段的代码：

```
public class ToFragment extends ListFragment {
    String[] countries = new String[] {
            "India",
            "Pakistan",
        };
    private LayoutInflater inflater;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        this.inflater = inflater;
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(), android.R.layout.simple_list_item_1, countries);

        setListAdapter(adapter);

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    public void changeContent(String[] array) {
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(), android.R.layout.simple_list_item_1, array);
        setListAdapter(adapter);
    } 
```

如您所见，我试图让函数 changeContent 像函数 onCreateView 一样工作。但！我的问题是它在这里抛出空指针异常，我真的很困惑，我无法意识到问题所在！你能告诉我有什么问题吗？或者你能建议更好的方法来改变 listfragment 内容吗？

这是错误跟踪：

```
04-08 22:48:33.292: I/System.out(8817): adapter == null
04-08 22:48:33.292: W/dalvikvm(8817): threadid=1: thread exiting with uncaught exception (group=0x414572d0)
04-08 22:48:33.297: E/AndroidRuntime(8817): FATAL EXCEPTION: main
04-08 22:48:33.297: E/AndroidRuntime(8817): java.lang.RuntimeException: Unable to start activity ComponentInfo{ru.rkarasev.miptrain/ru.rkarasev.miptrain.MainActivity}: java.lang.NullPointerException
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2355)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2391)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread.access$600(ActivityThread.java:151)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1335)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.os.Looper.loop(Looper.java:155)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread.main(ActivityThread.java:5493)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at java.lang.reflect.Method.invoke(Method.java:511)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at dalvik.system.NativeStart.main(Native Method)
04-08 22:48:33.297: E/AndroidRuntime(8817): Caused by: java.lang.NullPointerException
04-08 22:48:33.297: E/AndroidRuntime(8817):     at ru.rkarasev.miptrain.ToFragment.changeContent(ToFragment.java:34)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at ru.rkarasev.miptrain.MainActivity.onCreate(MainActivity.java:49)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.Activity.performCreate(Activity.java:5066)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1101)
04-08 22:48:33.297: E/AndroidRuntime(8817):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2311)
04-08 22:48:33.297: E/AndroidRuntime(8817):     ... 11 more
04-08 22:48:35.382: D/Process(8817): killProcess, pid=8817
04-08 22:48:35.387: D/Process(8817): dalvik.system.VMStack.getThreadStackTrace(Native Method)
04-08 22:48:35.387: D/Process(8817): java.lang.Thread.getStackTrace(Thread.java:599)
04-08 22:48:35.387: D/Process(8817): android.os.Process.killProcess(Process.java:944)
04-08 22:48:35.392: D/Process(8817): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:108)
04-08 22:48:35.392: D/Process(8817): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
04-08 22:48:35.392: D/Process(8817): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
04-08 22:48:35.392: D/Process(8817): dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:19:04.267

更改创建`ArrayAdapter`实例的方式：

```
ArrayList<String> arrayList = new ArrayList<String>();
arrayList.addAll(Arrays.asList(countries));

ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(), android.R.layout.simple_list_item_1, arrayList); 
```

如在此答案中找到：[Unable to modify ArrayAdapter in ListView: UnsupportedOperationException](https://stackoverflow.com/questions/3200551/unable-to-modify-arrayadapter-in-listview-unsupportedoperationexception)

```
public void changeContent(String[] array) {
    ArrayAdapter<String> adapter = (ArrayAdapter<String>)getListAdapter();
    if (adapter != null) {
        adapter.clear();
        adapter.addAll(Arrays.asList(array));
        adapter.notifyDataSetChanged();
    }
} 
```

您不需要每次都重新创建适配器。只需清除并设置新数组，然后通知适配器数据集已更改，以便更新您的视图。

# scala - Scala JSON 错误处理和响应

> ID：15866692
> 
> 赞同：1
> 
> 时间：2013-04-07T19:16:41.793
> 
> 标签：scala, error-handling, lift

我将 Scala + Lift Web Framework + MongoDB 用于一堆应用程序。在某些情况下，我需要向发出请求以显示国际化错误消息的客户端响应 JSON 错误消息。

错误消息通常是一个简单的 JSON：

```
val errorMessage = ("error" -> "some error message"); 
```

然后将通过`net.liftweb.rest.RestHelper`with 提供此消息`yield requestParam: JValue`。我`for comprehensions`用来检查错误并返回这些`JValue`s。

将这些消息存储在 Scala 中的最佳实践是什么（考虑到国际化）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:19:52.593

那么，“让开发人员决定”的原则不适用吗？我的意思是，AFAIK，没有中央方法可以做到这一点。做任何你想做的事。例如， `(S ? "error") -> (S ? "my.error.reason123")`

# javascript - JavaScript中的反向异或运算符？

> ID：15866694
> 
> 赞同：3
> 
> 时间：2013-04-07T19:16:44.293
> 
> 标签：javascript, xor

我有 2 个变量，`x`并且`y`.

我在做`z = x^y`。

现在假设我只知道`z`和`y`，我怎样才能`x`回来？`^`JavaScript中是否有相反的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T19:18:04.870

是的，`^`是它自己的逆。

```
x == (x^y)^y 
```

# java - 如何以编程方式添加 styleDependent 名称？

> ID：15866700
> 
> 赞同：0
> 
> 时间：2013-04-07T19:17:14.343
> 
> 标签：java, css, gwt

我正在尝试创建一个单独的 Button css 类，应该可以通过`ClientBundle`. 我的目标是通过应用程序状态以编程方式更改按钮样式。

以下应用按钮样式，但不更改背景，因此`-ok`不考虑依赖样式名。为什么？

```
.myButton {
    background: white;
}

.myButton-ok {
    background: green;
}

public interface MyButtonResource extends ClientBundle {
    public static final MyButtonResource INSTANCE = GWT.create(MyButtonResource.class);

    @Source("MyButtonResource.css")
    Style css();

    interface Style extends CssResource {
        @ClassName("myButton")
        String buttonStyle();

        @ClassName("myButton-ok")
        String buttonStyleOK();
    }
}

MyButtonResource.INSTANCE.css().ensureInjected();
setStyleName(MyButtonResource.INSTANCE.css().buttonStyle());
button.addStyleDependentName(MyButtonResource.INSTANCE.css().buttonStyleOK()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:44:00.460

您不能`addStyleDependentName`使用混淆的 css 资源，请参阅此[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=4746)

问题在于`addStyleDependentName`将后缀附加`-ok`到当前样式`button`将元素的样式设置为`button-ok`

但是当混淆器起作用时，在你的资源中你会`AA`得到 for`button`和`AB`for `button-ok`。因此，在以 OK 状态应用您的代码后，您的按钮将具有`AA-AB`与您的 css 部分中的任何规则不匹配的内容。

面对这种情况的唯一方法是为您的小部件添加第二种样式，我会这样做：

button.addStyleName(MyButtonResource.INSTANCE.css().buttonStyleOK());

# jquery - jquery：读取 xml 文档，变量没有被传递出函数

> ID：15866705
> 
> 赞同：0
> 
> 时间：2013-04-07T19:17:42.350
> 
> 标签：jquery, xml, variables

我正在阅读一个包含大约 1180 个跟踪点的 gpx xml 文档，每个跟踪点都包含一个海拔标记。我可以获得长度，但不能将其传递给稍后在计算总上升的 if 循环中使用。

```
var elevs = [];
var $l = 0;
      $.ajax({
          type: "GET",
          url: "../gpx/27-Mar-13slow.gpx",
          dataType: "xml",
                success: function(xml) {
                    $(xml).find('trkseg').each(function(){
                        $l=$(this).find("trkpt").length;
                        $(xml).find('trkpt').each(function(){
                            elevs.push(+$(this).find('ele').text());
                        });
                        $('#holder').append('<div>' + $l + '</div>');
                        //fn();
                    });
                }
      }); 
```

即`$('#holder').append('<div>' + $l + '</div>');`正确显示跟踪点的总数，但将其移到它没有的功能之外。我假设的全局变量`$l`不会更改为跟踪点长度。谁能告诉我为什么？（elevs 数组包含高程数据 ok）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:22:05.093

尝试像这样修改成功函数：

```
success: function (xml) {
    var xmlDoc = $.parseXML(xml);
    var $xml = $(xmlDoc),
    var $trkseg = $xml.find("trkseg");
    $trkseg.each(function () {
        $l = $(this).find("trkpt").length;
        $(xml).find('trkpt').each(function () {
            elevs.push(+$(this).find('ele').text());
        });
        $('#holder').append('<div>' + $l + '</div>');
        //fn();
    });
} 
```

# wpf - 防止 WPF 组合框在 itemssource 更改时清除选择

> ID：15866706
> 
> 赞同：4
> 
> 时间：2013-04-07T19:17:42.877
> 
> 标签：wpf, xaml, binding, combobox

我有一个用于名字的文本框、一个用于姓氏的文本框和一个用于显示名称的组合框。显示名称是可编辑的，以便用户可以输入他们想要的任何内容。但是，组合框应显示选项列表。

当任一文本框更改时，组合框项目源都会更新。但是，如果用户先前**选择**了一个值，则 text 属性将被空白。但是如果用户**输入**了一个值，文本属性仍然存在。如何防止文本值空白？

这是我的代码：

```
<Window x:Class="MainWindow"
        x:Name="MainApp"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525">
    <Grid DataContext="{Binding ElementName=MainApp}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <TextBox Grid.Row="0"
                 Text="{Binding FirstName}" />
        <TextBox Grid.Row="1"
                 Text="{Binding LastName}" />
        <ComboBox x:Name="MyCb" Grid.Column="1"
                  Grid.Row="2" 
                  Text="{Binding TheName}"
                  ItemsSource="{Binding NameOptions}"
                  IsEditable="True" />
    </Grid>
</Window>

Imports System.ComponentModel

Class MainWindow
    Implements INotifyPropertyChanged

    Public ReadOnly Property NameOptions As List(Of String)
        Get
            Dim result As New List(Of String)
            result.Add(String.Format("{0} {1}", FirstName, LastName))
            result.Add(String.Format("{1}, {0}", FirstName, LastName))
            result.Add(String.Format("{1}, {0} MI", FirstName, LastName))
            Return result
        End Get
    End Property

    Public Property TheName As String

    Private _firstName As String
    Public Property FirstName As String
        Get
            Return _firstName
        End Get
        Set(value As String)
            _firstName = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("FirstName"))
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("NameOptions"))
        End Set
    End Property

    Private _lastname As String
    Public Property LastName As String
        Get
            Return _lastname
        End Get
        Set(value As String)
            _lastname = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("LastName"))
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("NameOptions"))
        End Set
    End Property

    Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-07T02:49:23.460

在这里查看我的答案： [如何使用 ComboBox 的 Text 属性禁用 ItemsSource 同步](https://stackoverflow.com/questions/22221199/how-to-disable-itemssource-synchronization-with-text-property-of-combobox)

```
public class ComboBox : System.Windows.Controls.ComboBox
{
    private bool ignore = false;
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        if (!ignore)
        {
            base.OnSelectionChanged(e);
        }
    }

    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        ignore = true;
        try
        {
            base.OnItemsChanged(e);
        }
        finally
        {
            ignore = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:21:59.040

在更新 NameOptions 之前将 MyCb.SelectedItem 设置为 null。SelectedItem 取代了 Text，并且当 ItemsSource 更新时，它还将尝试更新应该连接到 SelectedItem 的 Text。

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public List<String> NameOptions 
    {
        get 
        {
            MyCb.SelectedItem = null;   // <--- THIS is the solution. just try it!
            List<String> result = new List<String>();    
            result.Add(String.Format("{0} {1}", FirstName, LastName));
            result.Add(String.Format("{1}, {0}", FirstName, LastName));
            result.Add(String.Format("{1}, {0} MI", FirstName, LastName));
            return result;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public MainWindow()
    {
        InitializeComponent();            
    }

    private String _theName;
    public String TheName
    {
        get { return _theName; }
        set
        {
            _theName = value;
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("TheName"));
            }
        }
    }

    private String _firstName;
    public String FirstName
    {
        get { return _firstName; }
        set { 
            _firstName = value; 
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("NameOptions"));
                handler(this, new PropertyChangedEventArgs("FirstName"));
            }
        }
    }

    private String _lastName;
    public String LastName
    {
        get { return _lastName; }
        set { 
            _lastName = value; 
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("NameOptions"));
                handler(this, new PropertyChangedEventArgs("LastName"));
            }
        }
    }
} 
```

# javascript - WebSQL - 迷失在事务中

> ID：15866708
> 
> 赞同：0
> 
> 时间：2013-04-07T19:17:56.380
> 
> 标签：javascript, android, web-applications, web-sql

我正在使用 WebSQL 和 IndexedDB 开发一个网络应用程序。IndexedDB 在支持它的浏览器中运行良好，我的 WebSQL 实现在大多数浏览器中运行，但是在 Android 上，javascript 执行似乎在`db.transaction`.

这是我的代码。在“启动事务......”之后我没有收到任何控制台日志（并且似乎没有进一步的 JS 执行）。

```
window.store.getFile = function( filename, callback ) {
    var db = window.store.websql.db;
    console.log('Initiating transaction...');
    db.transaction(function (tx) {
        var filename2 = filename;
        var query = 'SELECT * FROM file WHERE filename = "'+filename+'"';
        console.log('Executing query:'+query);
        tx.executeSql(query, [], function(t, r) {
            if ( r.rows.length > 0 ) {
                var len = r.rows.length, i;
                for (i = 0; i < len; i++) {
                    var filename = r.rows.item(i).filename;
                    var data = r.rows.item(i).data;
                    if ( callback ) callback( true, filename2, data );
                    break; // Break here as only one result should be returned
                }
            } else {
                if ( callback ) callback( false, filename2, null );
            }
        }, function(t, e) {
            console.log(e);
            if ( callback ) callback( false, filename2, null );
        });
    }, function(e) {
        console.log('Database transaction error: '+e);
        if ( callback ) callback( false, filename, null );
    }, function() {
        console.log('Transaction success');
    });
    console.log('Transaction initiated...');
}; 
```

（PS 我也欢迎对我的代码提出任何批评......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:01:30.477

您正在追逐的错误可能是在 db 级别的错误处理程序上引发的（在 openDatabase 中传递）。一些 android 手机只是不接受该错误处理程序的 null 或 undefined ，症状就是您所描述的。没有错误，没有成功只是什么都没有......

另外：您的成功块应该在 try/catch 中，以防止该错误自动冒泡。

另外：请注意，成功处理程序的返回值 (false/true) 将确定抛出错误时会发生什么（回滚或只是没有回滚的错误）。

# javascript - 如何在javascript中对匹配项执行操作

> ID：15866709
> 
> 赞同：0
> 
> 时间：2013-04-07T19:17:56.680
> 
> 标签：javascript, regex, match

我正在尝试使用 javascript（纯 js，而不是 jquery 或库）通过正则表达式匹配项目并对它们执行操作。

基本上我正在尝试创建一个从英制测量转换为公制的脚本。这就是我所拥有的

```
 var a = [
            [/([0-9\/]+) (pound[s]?|lb)/ig, 45, "g"],
        ];
    function convert(){
        var t = document.body.innerHTML;
        for(var j = 0; j < a.length; j++){
            var m = t.match(a[j][0]);
            for(var i = 0; i < 1; i++){
                var decimal = eval(m[i].split(' ')[0]);
                t = t.replace(m[i],(decimal * a[j][1]) + a[j][2]);
            }
        }
        document.body.innerHTML = t;
    } 
```

这可行，但对于某些比赛，我想返回部分比赛。例如，一杯糖和一杯面粉有一个转换，但每种都有很多类型，所以我想返回原始字符串的一部分。

如果我有

```
1 cup wholemeal flour 
```

我想将其与正则表达式相匹配

```
/(([0-9\/]+) ((wholemeal |plain |white |strong |self-raising )?flour))/ig 
```

...仅对第一部分进行操作，并将整个部分替换为包含令牌的字符串，例如

```
 //match  value   * conversion  + unit    + string token
t - t.replace(m[i], (decimal * a[j][1])    + a[j][2] + m[i][2]); 
```

最后出来

```
150g wholemeal flour 
```

但是，m[i] 是一个字符串，我无法像在 php 或 c# 中那样找到访问匹配组的方法

注意：我意识到其中几种面粉需要单独转换，但我仍然想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:43:44.897

由于“g”修饰符，您无法访问您的组（仍然不知道为什么当 JavaScript 完全支持嵌套结构时您不能访问......）。

借助 Regex#exec 方法，您可以做些什么来获得相同的效果，从而遍历您的字符串。所以，而不是这样做：

```
myString.match(myRegex); 
```

其中 myRegex 具有“g”修饰符。你可以这样做：

```
var match;
while(match = myRegex.exec(myString)) {
  // do stuff here...
} 
```

感谢 Regex 对象的[lastIndex](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)属性，您将遍历字符串并最终返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:45:46.457

你可以这样做。听起来您想使用 javascript 替换功能的“回调”功能，例如：

```
t.replace(m[i],function(match, contents, offset, fullstring){ 
return (decimal * a[j][1])    + a[j][2] + m[i][2])
}); 
```

现在，使用该匿名函数，您可以更精确地对匹配的组进行操作。

如果这没有帮助，您是否知道“$ 1-9”结构？例如

```
t.replace(/(([0-9\/]+) ((wholemeal |plain |white |strong |self-raising )?flour))/ig,'$1'); 
```

这将仅用第一个括号组“（xxx）”中的内容替换每个组。然而，这些在 PHP 中也是标准的。您可以进一步对 '$1' 字符串执行您想要的操作。

我希望它有帮助！- 如果我错过了这一点，请发表评论以澄清您是否愿意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:28:08.637

您无法使用该`match`函数和全局正则表达式访问组。在这种情况下，您可以使用`exec`而不是`match`，或者不使用`g`并将文本拆分成行并`match`在每一行上使用（我会选择第二种方法，但这取决于您的输入的组织方式）

如果您不使用全局正则表达式，则可以使用 m[1]、m[2] 等访问组。这里有一些工作代码可以帮助您入门：

[http://jsfiddle.net/TCVDx/5/](http://jsfiddle.net/TCVDx/5/)

```
var a = [
  [/([0-9\/]+) (cup )?(wholemeal|plain|white|strong|self-raising)? (flour)/i, 45, "g"],
];

function convert(){
  var t = document.getElementById("input").innerHTML;

  for(var j = 0; j < a.length; j++){
    var m = t.match(a[j][0]);
    var decimal = eval(m[0].split(' ')[0]);
    t = (decimal * a[j][1]) + " " + a[j][2] + " " + m[3] + " " + m[4];
  }
  document.getElementById("output").innerHTML = t;
} 
```

# javascript - 附加到 IE10 时如何立即获得 Visual Studio 2012 javascript 调试？

> ID：15866713
> 
> 赞同：1
> 
> 时间：2013-04-07T19:18:15.660
> 
> 标签：javascript, debugging, visual-studio-2012, visual-studio-debugging

**当我在调试模式下**使用 VS2012 启动 Web 应用程序时，页面中的 javascript 引发异常，会发生这种情况：

1.  VS - 调试 (F5)
2.  IE10打开，带有错误行的源文件很快就显示出来了

完美的。但是当我**运行**应用程序时：

1.  Ctrl-F5

2.  IE 显示**“网页错误”**对话框：

    你想调试这个网页吗？复选框 不再显示此消息 复选框 在 IE 中使用内置的脚本调试器。

3.  单击是

4.  在后台（！），**机器调试器管理器**弹出，唯一的选项是说“好的”。

5.  点击确定

6.  等等等等……一分钟后……

7.  **Visual Studio JIT 调试器：**
    发生未处理的异常.....。可能的调试器：
    新实例 VS 2010
    新实例 VS 2012
    MyProject（默认）VS 2012

8.  选择我的项目

9.  是的

10.  编辑器在出现错误的行打开。

**我该怎么做才能立即附加和调试到 VS 2012，而无需任何对话框和几分钟的等待时间（在非常快的机器上）？**

# ios - 模拟器有问题但设备没有问题

> ID：15866714
> 
> 赞同：2
> 
> 时间：2013-04-07T19:18:23.183
> 
> 标签：ios, ios6, controller, segue, simulator

我在手机和模拟器上都使用最新的 ios 6.1。在电话上一切正常，但当我进入模拟器时却不行。最严重的错误是segues。我正在执行这样的转场：

```
[self performSegueWithIdentifier:@"ToLogin" sender:self]; 
```

在电话上很好，但在模拟器中我得到了 NSInvalidArgumentException，它告诉我没有标识符“ToLogin”的segue，我已经检查过我在故事板上有（并且电话正在工作）

此外，当我更改初始视图控制器时，在模拟器上也没关系，我总是去同一个地方。

关于什么可能是错误的以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:47:30.800

尝试恢复模拟器。`iPhone Simulator > Delete all Content and Settings`. 当出现无法解释的 sim 错误时，这通常会起作用。

# python - 为什么 python 框架安装指南会建议对一些必需的包使用 easy_install 而对其他包使用 pip？

> ID：15866715
> 
> 赞同：7
> 
> 时间：2013-04-07T19:18:27.387
> 
> 标签：python, package, pip, easy-install, simplecv

在尝试“简化”安装适用于 Windows的 SimpleCV 框架*superpack失败后。*我现在正在阅读手动安装指南（我可以接受，因为我可以更好地控制安装，并且最终可能会了解如何在 Windows 中正确安装 Python 包！）

而不是盲目地遵循我试图理解每一步的指南，所以我对此感到困惑..

```
 easy_install pyreadline
 easy_install PIL
 easy_install cython
 easy_install pip
 pip install ipython
 pip install https://github.com/ingenuitas/SimpleCV/zipball/1.3 
```

**为什么不尽快easy_install pip 然后pip 其他包？..**

```
 easy_install pip     {{{I intend to research and probably use get-pip.py here}}}
 pip install pyreadline        
 pip install PIL
 pip install cython
 pip install ipython
 pip install https://github.com/ingenuitas/SimpleCV/zipball/1.3 
```

这样做有陷阱吗？（我有限的理解是使用 pip 而不是 easy_install 总是更可取。）

我知道这个问题与 SimpleCV 直接相关，但我想学习正确的方法，以便将来在没有指南的情况下安装包集合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:36:30.660

pip 获取您尝试安装的软件包的源代码并编译它们。因此，如果您没有安装和配置编译器，对于包含用 C 编写的扩展名的包，它将无法这样做，在这种情况下适用于`pyreadline`,`PIL`和`cython`.

easy_install 使用来自[pypi](https://pypi.python.org)的预编译包（至少对于 Windows，如果它们可用的话），这意味着您不需要自己编译所有东西。

对于纯 python 包，使用 pip 代替 easy_install 没有问题，如果你有编译器并安装了必要的构建依赖项，它也应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:36:22.237

我相信答案是`pip`目前不支持安装二进制发行版，即包含预编译 C 扩展模块的 Python 包。 `easy_install`做。

顺便说一句，正在为`pip`(and `easy_install`) 提供替代品，这将完全支持所有平台上的二进制发行版。有关概述，请参见[此处。](http://python-notes.boredomandlaziness.org/en/latest/pep_ideas/core_packaging_api.html)

# algorithm - 状态变化和丢包

> ID：15866718
> 
> 赞同：-1
> 
> 时间：2013-04-07T19:18:42.730
> 
> 标签：algorithm, networking, udp, lag

假设我想通过仅发送位置变化而不是绝对位置来加速实时游戏中的网络连接。我该如何处理丢包？如果丢弃一个数据包，则对象的位置将是错误的，直到下一次更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:13:49.910

回顾@casperOne 的评论，这是一些游戏因连接不良而“出故障”的原因之一。

一个可能的解决方案如下：

1.  确定您可以容忍对象/玩家显示在错误位置的最长时间 - 例如`xx`毫秒。放置一个看门狗计时器，该计时器“至少”每 xx ms 或每当计算新位置时发送对象的位置。
2.  根据链接的质量和场景的复杂性，您可以缩短 xx 的值。基本上，如果您没有使用可用带宽，请开始发送最长未发送更新的对象的当前位置。

为此，您需要按照更新它们的顺序维护项目列表，并在其中轮换。

这意味着快速更改会立即反映（如果对象每毫秒更新一次，您可能会经常收到一个数据包，因此几乎没有任何延迟），但是在您获得另一个更新状态的机会之前，它永远不会超过 xx ms .

# java - 当 WHERE 子句中的列为空时，我的 SQLite 查询会导致 cursorindexoutofbounds 异常。我该如何阻止这个？

> ID：15866719
> 
> 赞同：0
> 
> 时间：2013-04-07T19:19:11.027
> 
> 标签：java, android, cursor

此错误仅在 COLUMN_NAME_DATE 列为空（该表中未创建条目）时发生。一旦我添加了一些条目，它就可以正常工作。我已经尝试了各种空检查，但没有任何效果。确切的错误：

```
android.database.CursorIndexOutOfBoundsException: Index -1 requested, 
 with a size of 0 
```

这是错误的代码：

```
 if (cursor1.moveToFirst() == false) {
        Toast.makeText(this, "No categories found.", Toast.LENGTH_LONG).show();
    }
    else {

        for (int i = cursor1.getCount() - 1; i >= 0; i--) {
            catTotal = 0;
            cursor1.moveToPosition(i);
            curCat = cursor1.getString(cursor1.getColumnIndexOrThrow(
                    CategoriesDbContract.TblCategories.COLUMN_NAME_CATEGORY));

            cursor2 = db.query(TransactionsDbContract.TblTransactions.TABLE_NAME,
                           null, 
                           TransactionsDbContract.TblTransactions.COLUMN_NAME_DATE + ">" + dateSent, 
                           null, null, null, null);

            for (int j = cursor2.getCount() - 1; j >= 0; j--) {
                cursor2.moveToPosition(j);
                catTotal += cursor2.getDouble(cursor2.getColumnIndexOrThrow(
                        TransactionsDbContract.TblTransactions.COLUMN_NAME_AMOUNT));
            }

            percent = catTotal/overallTotal * 100;
            DecimalFormat df = new DecimalFormat();
            df.setMaximumFractionDigits(1);
            String percStr = df.format(percent);

            category += cursor1.getString(cursor1.getColumnIndexOrThrow(
                    CategoriesDbContract.TblCategories.COLUMN_NAME_CATEGORY)) + "\n";

            spent += percStr + "\n";
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:33:27.460

我猜你的错误在这里：

```
for (int j = cursor2.getCount() - 1; j >= 0; j--) {
    cursor2.moveToPosition(j); // j might be -1 
```

...因为如果您的陈述...

```
cursor2 = db.query(TransactionsDbContract.TblTransactions.TABLE_NAME, ...); 
```

... 不返回任何行，`cursor2.getCount()`为零，因此以 .`j`开头`-1`。

我建议您使用...

```
while (cursor1.moveToNext()) {
    catTotal = 0;
    curCat = cursor1.getString(cursor1.getColumnIndexOrThrow(
                     CategoriesDbContract.TblCategories.COLUMN_NAME_CATEGORY));
    cursor2 = db.query(...);

    while (cursor2.moveToNext()) {
        catTotal += cursor2.getDouble(cursor2.getColumnIndexOrThrow(
                        TransactionsDbContract.TblTransactions.COLUMN_NAME_AMOUNT));
    }
} 
```

...因为这样你就不需要`for`循环了。

希望这会有所帮助......干杯！

# c++ - 如何编写析构函数以编译代码并释放所有分配的内存？

> ID：15866723
> 
> 赞同：0
> 
> 时间：2013-04-07T19:19:35.260
> 
> 标签：c++, memory-management, destructor

我创建了自定义类，它的行为类似于矩阵。我已经完成了一些基本操作，一切似乎都运行良好......然而，我不知道，我应该写什么给这个类的析构函数来释放所有分配的内存。你能给我建议吗？

```
class CMatrix {
public:

class Proxy {
    friend class CMatrix;

    const CMatrix* cmat;
    CMatrix *matrix;
    size_t n;

    Proxy(const CMatrix& m, size_t i)
    : cmat(&m), matrix(), n(i) {
    }

    Proxy(CMatrix& m, size_t i)
    : cmat(&m), matrix(&m), n(i) {
    }

    public:

    const double& operator[](size_t j) const {
       return cmat->_arrayofarrays[n * cmat->y + j];
    }

    double& operator[](size_t j) {
        if (matrix) {
            return matrix->_arrayofarrays[n * cmat->y + j];
        } else return cmat->_arrayofarrays[cmat->y];
    }
    };

    const Proxy operator[](size_t i) const {
        return Proxy(*this, i);
    }

    Proxy operator[](size_t i) {
        return Proxy(*this, i);
    }

    CMatrix() {
    _arrayofarrays = NULL;
    x = 0;
    y = 0;
};

// constructor

CMatrix(size_t x, size_t y) : _arrayofarrays(), x(x), y(y) {
    _arrayofarrays = new double[ x * y ]();
}

// destructor

~CMatrix() {
    // ?!?!???!?!?!?!!!!?!?!? 
    // #$#%@^$!!!!@$#%!!
}

// copy constructor

CMatrix(const CMatrix& other) : _arrayofarrays(), x(other.x), y(other.y) {
    delete [] _arrayofarrays;
    _arrayofarrays = new double[x * y];
    if (_arrayofarrays)
        std::copy(other._arrayofarrays, other._arrayofarrays + (x * y), _arrayofarrays);
}

CMatrix& operator =(const CMatrix& rval) {
    delete [] _arrayofarrays;
    _arrayofarrays = new double[ rval.x * rval.y];
    std::copy(rval._arrayofarrays, rval._arrayofarrays + (rval.x * rval.y), _arrayofarrays);
    x = rval.x;
    y = rval.y;
    return *this;
}

double *_arrayofarrays;
size_t x;
size_t y;
}; 
```

编辑：

实际上现在我已经意识到，它在运行这部分代码后崩溃了。在调用这段代码之前，我有一个我的类的实例，让我们调用它`a,b,c`然后我想设置`a = b-c`；这第一次效果很好......但是当我想重复它时，它就会崩溃

```
CMatrix CMatrix::operator-(const CMatrix &matrix) const {
if (this->x != matrix.x || this->y != matrix.y) {
    throw CSizeException(matrix.y, matrix.x, this->y, this->x, '+');
};
CMatrix m(this->x, this->y);
CMatrix l(matrix.x, matrix.y);
l._arrayofarrays = this->_arrayofarrays;
CMatrix o(matrix.y, matrix.y);
o = matrix;

CMatrix result(this->x, this->y);
for (unsigned int i = 0; i < this->x; i++)
    for (unsigned int j = 0; j < this->y; j++)
        m[i][j] = l[i][j] - o[i][j];           
return m;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:22:38.853

像这样的东西？

```
~CMatrix() {
    delete[] _arrayofarrays;
} 
```

所有分配的数组都`new[]`必须通过对`delete[]`. 此外，您可以`delete[]`从复制构造函数中删除该语句：

```
CMatrix(const CMatrix& other) : _arrayofarrays(), x(other.x), y(other.y) {
    // delete [] _arrayofarrays;
    // ^^^^^^^^^^^^^^^^^^^^^^^^^
    // This is unnecessary: you are creating a new object, so this data member
    // is not pointing to any previously allocated array

    // ...
} 
```

* * *

**更新：**

> （*来自评论*）我不能使用这段代码......`_arrayofarrays`实际上是二维数组，所以这会导致程序运行失败..可能是段错误

这是不正确的：`_arrayofarrays`是一维数组，调用`delete[]`是销毁它的正确方法。如果这样做会导致段错误，则可能是您在其余代码中做错了什么。

作为建议，避免通过原始指针、和（或它们的数组对应物）**手动管理内存**通常是一个好主意，因为它容易出错并且容易导致内存泄漏或无效指针/引用的取消引用。`new``delete`

考虑使用标准容器，例如`std::vector<>`or`std::deque<>`代替。

* * *

**编辑：**

在`operator -`你正在做的代码中：

```
l._arrayofarrays = this->_arrayofarrays; 
```

这样，您将拥有*两个*封装相同数组的矩阵对象：因此，删除两者中的一个也会使另一个无效。这可能是您的问题的根本原因。

此外，你在那里创造了太多的临时工。除非我遗漏了什么，否则这应该足够了：

```
CMatrix CMatrix::operator-(const CMatrix &matrix) const {
    if (this->x != matrix.x || this->y != matrix.y) {
        throw CSizeException(matrix.y, matrix.x, this->y, this->x, '+');
    };

    CMatrix result(this->x, this->y);
    for (unsigned int i = 0; i < this->x; i++)
        for (unsigned int j = 0; j < this->y; j++)
            result[i][j] = (*this)[i][j] - matrix[i][j];

    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:31:21.087

在析构函数中删除内存的方法和你在其他成员函数中写的一样：

```
 delete [] _arrayofarrays; 
```

如果这崩溃了，那么你必须在其他地方破坏内存。尝试使用`valgrind`来检查内存错误。

您的复制构造函数存在一些问题：

```
CMatrix(const CMatrix& other) : _arrayofarrays(), x(other.x), y(other.y) {
    delete [] _arrayofarrays; 
```

这没用，还没有什么要删除的。

```
 _arrayofarrays = new double[x * y];
    if (_arrayofarrays) 
```

这`if`是没用的，`new`要么抛出异常，要么返回一个非空指针，所以检查它是否为空是没用的。

```
 std::copy(other._arrayofarrays, other._arrayofarrays + (x * y), _arrayofarrays);
} 
```

您的赋值运算符也存在一些问题：

```
CMatrix& operator =(const CMatrix& rval) {
    delete [] _arrayofarrays;
    _arrayofarrays = new double[ rval.x * rval.y]; 
```

如果`new`分配引发异常，那么您将`_arrayofarrays`持有一个悬空指针，您应该在删除旧内存*之前*分配新内存或在使用后将旧指针归零`delete[]`

# azure - 如何在管理门户之外访问Azure网站的监控数据

> ID：15866725
> 
> 赞同：0
> 
> 时间：2013-04-07T19:19:52.727
> 
> 标签：azure

我想访问我网站的监控数据，您可以在管理门户之外的监控选项卡下的管理门户中看到这些数据。

有可能吗？？如果是，那怎么办？我不想投资第三方工具。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:06:29.007

然后，您需要使用您选择的编程语言实现一个利用 REST API 的解决方案。

您可以在此处阅读有关 API 实现的更多信息：[链接](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)

简而言之 ：

> 服务管理 API 提供对通过管理门户可用的大部分功能的编程访问。服务管理 API 是一个 REST API。所有 API 操作都通过 SSL 执行，并使用 X.509 v3 证书进行相互身份验证。

这是我之前发布的一个答案，它是在 C# 环境中使用 API 的一个很好的起点，它为大多数用例提供了示例。[关联](https://stackoverflow.com/questions/13495152/manage-my-azure-cloud-services-using-native-c-sharp-api/13495418#13495418)

# c# - 使用本地数据库为 winForms 创建安装程序

> ID：15866727
> 
> 赞同：4
> 
> 时间：2013-04-07T19:20:02.670
> 
> 标签：c#, .net, winforms, installation, sql-server-express

我有一个 Winforms 应用程序（跳棋游戏），它有一个本地数据库（使用 SQL Server Express）来保存注册玩家和他们的分数..

我正在尝试通过本[教程为此应用程序创建安装程序](http://www.c-sharpcorner.com/UploadFile/deepak.sharma00/how-to-create-an-installer-for-a-winform-application-using-s/)

一切都很好，但是当我尝试添加播放器时，我收到一条 SQL 错误，提示找不到数据库。那么如何将本地数据库（`.mdf`文件）添加到安装程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:57:31.690

前提是在客户端机器上使用本地数据库的条件是OK的（参见[客户端PC上的LocalDB部署](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)），在部署项目中您可以将数据库文件添加到应用程序文件夹中（部署时在解决方案资源管理器中选择文件系统编辑器）项目被选中。

![在此处输入图像描述](https://i.stack.imgur.com/Yu51I.png)

旁注：您是否知道在 VS2012 中不推荐使用 MSI 部署项目模板这一事实？

**补充：**它又[回到](http://blogs.msdn.com/b/visualstudio/archive/2014/04/17/visual-studio-installer-projects-extension.aspx)了[VS 2013 中！](http://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T00:26:28.550

这是**我在 wpf 中的解决方法**。我认为 Winform 中的解决方案是相同的：

1.  通过右键单击并选择属性来制作您的 mdf 文件“**内容”。**在“**构建动作**”菜单中选择“**内容**”。并在**复制到输出**目录中**始终选择复制**

2.  在**解决方案资源**管理器中，转到**Properties/Settings.Settings**并将**连接字符串**放在一个字段中（请注意，该**名称**必须与您的**App.config中****的名称相同**（例如在 wpf 中），如下图所示）。

 **[![连接字符串必须相同](https://i.stack.imgur.com/VBRcm.jpg)](https://i.stack.imgur.com/VBRcm.jpg)

3.  **右键单击**您的**设置项目**并**添加->项目输出->**然后选择**内容文件**。**

# java - 在 Java 中应用 NFC：任何现有的 API 或库？

> ID：15866737
> 
> 赞同：2
> 
> 时间：2013-04-07T19:21:30.737
> 
> 标签：java, netbeans, nfc

我有一个应用 NFC 技术的项目。我将使用 Java 作为编程语言和 Netbeans IDE 来完成它。NFC 似乎是一项相当新的技术，我在网上似乎还没有很多参考资料。我想问一下是否有人知道任何现有的 API 或库，或者甚至是我可以用来在我的项目中应用 NFC 技术的任何其他更简单的方法。我可能正在使用 NFC 标签来存储 ID 并从标签中获取 ID 作为输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:26:58.263

这里有一些资源：

1.  [用于 Java 的 NFC 工具](https://github.com/grundid/nfctools)
2.  [适用于 Android 的 NDEF 工具](https://code.google.com/p/ndef-tools-for-android/)
3.  [NFC Eclipse 插件](https://code.google.com/p/nfc-eclipse-plugin/)（NDEF 编辑器）
4.  [打开 NFC](http://www.open-nfc.org/)

我意识到您已经用 netbeans 标记了这个问题，但至少您知道那里的 eclipse 链接上缺少什么。我写了 2 和 3，也为 1 做出了贡献。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T09:28:36.007

[ST25 软件开发工具包](http://www.st.com/st25sdk)是一个 Java 开发工具包，其中包括一个可在 Android 和 Windows/Linux PC 上使用的库。它支持所有符合 ISO 和 NFC 论坛协议的标签以及 ST25 标签 IC 系列的专有功能。

免责声明：我在 ST25 SDK 的开发团队中。

# javascript - javascript math.round 和 math.floor 在 IE 和 Opera 中运行良好，但在 Chrome、Safari 或 Firefox 中运行良好。获取 NaN

> ID：15866752
> 
> 赞同：0
> 
> 时间：2013-04-07T19:22:30.680
> 
> 标签：javascript, math, cross-browser, rounding, nan

看看这个小提琴：

[http://jsfiddle.net/gD3ax/1/](http://jsfiddle.net/gD3ax/1/)

或者这里是完整的标记

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Calculator</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
        .header {
            font-size: 10pt;
            color: white;
            font-weight: 700;
            text-decoration: none;
            text-underline-style: none;
            text-line-through: none;
            font-family: Arial;
            border-top: .5pt solid #C4D79B;
            border-right: none;
            border-bottom: .5pt solid #C4D79B;
            border-left: .5pt solid #C4D79B;
            background: #9BBB59;
            mso-pattern: #9BBB59 none;
            padding: 5px;
            display: block;
            width:138px;
            text-align: center;
        }
        .drop {
            width: 150px;
        }
    </style>
</head>

<body>
    <script type="text/javascript">
        function calculate() {
            // 'improve' Math.round() to support a second argument
            var _round = Math.round;
            Math.round = function (number, decimals /* optional, default 0 */ ) {
                if (arguments.length == 1)
                    return _round(number);

                var multiplier = Math.pow(10, decimals);
                return _round(number * multiplier) / multiplier;
            }

            /* examples
            Math.round('123.4567', 2); // => 123.46
            Math.round('123.4567');    // => 123
            */

            msfPlanA = 25.00;
            msfPlanB = 50.00;
            msfPlanC = 79.99;

            minPlanA = 500;
            minPlanB = 1700;
            minPlanC = 3000;

            smsPlanA = 200;
            smsPlanB = 600;
            smsPlanC = 1000;

            dataPlanA = 100;
            dataPlanB = 250;
            dataPlanC = 500;

            plan = document.getElementById("plans").options.value;
            days = document.getElementById("days").options.value;

            if (plan == "Plan A") {
                document.getElementById("msf").value = ('$' + Math.round(msfPlanA / 30 * days, 2));
                document.getElementById("min").value = (Math.floor(minPlanA / 30 * days) + ' minutes');
                document.getElementById("sms").value = (Math.floor(smsPlanA / 30 * days) + ' texts');
                document.getElementById("data").value = (Math.floor(dataPlanA / 30 * days) + ' MBs');
            } else if (plan == "Plan B") {
                document.getElementById("msf").value = ('$' + Math.round(msfPlanB / 30 * days, 2));
                document.getElementById("min").value = (Math.floor(minPlanB / 30 * days) + ' minutes');
                document.getElementById("sms").value = (Math.floor(smsPlanB / 30 * days) + ' texts');
                document.getElementById("data").value = (Math.floor(dataPlanB / 30 * days) + ' MBs');
            } else {
                document.getElementById("msf").value = ('$' + Math.round(msfPlanC / 30 * days, 2));
                document.getElementById("min").value = (Math.floor(minPlanC / 30 * days) + ' minutes');
                document.getElementById("sms").value = (Math.floor(smsPlanC / 30 * days) + ' texts');
                document.getElementById("data").value = (Math.floor(dataPlanC / 30 * days) + ' MBs');
            }
        }
    </script>
    <form action="">
        <table>
            <tbody>
                <tr>
                    <td>    <span class="header">How many days?</span>

                    </td>
                    <td>    <span class="header">Which plan?</span>

                    </td>
                </tr>
                <tr>
                    <td width="120px">
                        <select class="drop" id="days">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                        </select>
                    </td>
                    <td>
                        <select class="drop" id="plans">
                            <option value="Plan A">Plan A</option>
                            <option value="Plan B">Plan B</option>
                            <option value="Plan C">Plan C</option>
                        </select>
                    </td>
                    <td>
                        <input type="button" value="Submit" onclick="calculate()" />
                    </td>
                </tr>
            </tbody>
        </table>
        <br />
        <br />
        <table>
            <tbody>
                <tr>
                    <td>    <span class="header">Prorated MSF</span>

                    </td>
                    <td>    <span class="header">Minutes</span>

                    </td>
                    <td>    <span class="header">SMS</span>

                    </td>
                    <td>    <span class="header">Data</span>

                    </td>
                </tr>
                <tr>
                    <td>
                        <input size="19" type="text" id="msf" value="Prorated MSF" readonly="readonly" />
                    </td>
                    <td>
                        <input size="19" type="text" id="min" value="Prorated Minutes" readonly="readonly" />
                    </td>
                    <td>
                        <input size="19" type="text" id="sms" value="Prorated SMS" readonly="readonly" />
                    </td>
                    <td>
                        <input size="19" type="text" id="data" value="Prorated Data" readonly="readonly" />
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</body>
</html> 
```

它在 IE 和 Opera 中运行良好，但在 Chrome、Safari 或 Firefox 中运行良好。在 Chrome、Safari 和 Firefox 中，我得到`NaN`的不是实际值。建议？

我需要让它在所有 5 个主要浏览器上都能正常工作。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:28:56.240

回答只是为了没有其他人接受我的评论

```
document.getElementById("plans").value 
```

不是 .options.value 同上几天

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:28:49.943

您对“选项”的使用不正确，这令人惊讶为什么它在某些情况下有效。

```
var x = document.getElementById("plans").selectedIndex;
plan = document.getElementById("plans").options[x].value; 
```

options 返回一个选项数组，您需要从多个选项中选择一个。

# ruby - 我可以使用什么 XPath 来获取包含第一段节点之后的所有文本节点？

> ID：15866756
> 
> 赞同：5
> 
> 时间：2013-04-07T19:23:01.120
> 
> 标签：ruby, xpath, nokogiri

我是 Nokogiri 和 Ruby 的新手。

我想获取文档中所有节点的文本，从第一段节点开始并包括在内。

我用 XPath 尝试了以下操作，但我无处可去：

```
 puts page.search("//p[0]/text()[next-sibling::node()]") 
```

这行不通。我必须改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:06:02.600

您必须找到`<p/>`节点并返回所有`text()`节点，包括内部和后续。根据 Nokogiri 的 XPath 功能，使用以下查询之一：

```
//p[1]/(descendant::text() | following::text()) 
```

如果它不起作用，请改用它，它需要找到第一段两次，并且可能会稍微慢一点，但可能并不明显，更慢：

```
(//p[1]/descendant::text() | //p[1]/following::text()) 
```

一个可能不受支持的 XPath 2.0 替代方案是：

```
//text()[//p[1] << .] 
```

这意味着“文档中第一个节点之前的所有文本节点`<p/>`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:17:40.920

[这适用于 Nokogiri（它位于libxml2](http://www.xmlsoft.org)之上并支持 XPath 1.0 表达式）：

```
//p[1]//text() | //p[1]/following::text() 
```

证明：

```
require 'nokogiri'

html = '<body><h1>A</h1><p>B <b>C</b></p><p>D <b>E</b></p></body>'
doc = Nokogiri.HTML(html)

p doc.xpath('//p[1]//text() | //p[1]/following::text()').map(&:text)
#=> ["B ", "C", "D ", "E"] 
```

请注意，仅选择文本节点本身会返回 a [`NodeSet`](http://nokogiri.org/Nokogiri/XML/NodeSet.html)of[`Nokogiri::XML::Text`](http://nokogiri.org/Nokogiri/XML/Text.html)对象，因此如果您只想要它们的文本内容，则必须通过`.text`(or `.content`) 方法映射它们。

# javascript - 如何使用 jQuery 的 Promise 使函数不嵌套

> ID：15866761
> 
> 赞同：0
> 
> 时间：2013-04-07T19:24:01.630
> 
> 标签：javascript, jquery, promise

我想我增加了一层复杂性。这是我所拥有的：

```
;(function($, window, undefined) {
    function download() {
        var local = {};
        local.data = {};
        local.data.method = 'getMyData';
        local.dataType = 'json';
        local.Promise = $.ajax('myComponent.cfc', local);
        local.Promise.done(PromiseDone);
        local.Promise.fail(PromiseFail);
    }

    function PromiseDone(result) {};
    function PromiseFail(myEvent) {};
})(jQuery, window); 
```

我想做的是这样的：

```
;(function($, window, undefined) {
    var Variables = {};
    Variables.Promise = $.Deferred();

    function download() {
        var local = {};
        local.data = {};
        local.data.method = 'getMyData';
        local.dataType = 'json';
        Variables.Promise = $.ajax('myComponent.cfc', local);
    }

    Variables.Promise.done(function(result) {
    });
    Variables.Promise.fail(function(myEvent) {
    });
})(jQuery, window); 
```

我的目标是扁平化 JavaScript，这样我的函数就不会嵌套。

问：我的想法是否可行，或者是否`deferred`需要 a`resolve`才能被考虑`done`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:33:04.310

您确实增加了不必要的复杂性。`$.ajax`已经返回了一个承诺，所以没有理由再创建一个：

```
;(function($, window, undefined) {
    function download() {
        return $.ajax({
           data    : {method:'getMyData'},
           dataType: 'json'
        });
     }

    var ajaxCall = download();

    ajaxCall.done(function(result) {
          // do something with result
    });

    ajaxCall.fail(function() {
         // failed
    });
})(jQuery, window); 
```

# java - 自定义 Deque 引用类

> ID：15866763
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:24:18.963
> 
> 标签：java

有谁知道我在哪里可以找到与 API 中的不同的双端队列类。我的意思是可以添加infront和last并且可以从infront和last删除。它应该使用链接列表并引用第一个和后部。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:27:58.700

根据[JavaDoc for`Deque`](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)，添加/删除 first 和 last 已经被支持。事实上，`LinkedList`已经实现了`Deque`.

# android - 启动画面后加载地图时出错

> ID：15866764
> 
> 赞同：0
> 
> 时间：2013-04-07T19:24:33.650
> 
> 标签：android, google-maps, android-layout, splash-screen, google-maps-api-2

我这里有一个典型的问题。我已经尝试成功加载 Android 地图，也尝试成功加载启动画面。

现在，当我尝试在启动画面后加载地图时，出现以下异常

```
04-08 00:35:46.890: E/AndroidRuntime(19891): FATAL EXCEPTION: main
04-08 00:35:46.890: E/AndroidRuntime(19891): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.Activity.onCreateView(Activity.java:4242)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.Activity.setContentView(Activity.java:1835)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.example.androidmapsv2.MainActivity.onCreate(MainActivity.java:53)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.Activity.performCreate(Activity.java:4465)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.os.Looper.loop(Looper.java:137)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at java.lang.reflect.Method.invoke(Method.java:511)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-08 00:35:46.890: E/AndroidRuntime(19891):    at dalvik.system.NativeStart.main(Native Method)
04-08 00:35:49.703: I/Process(19891): Sending signal. PID: 19891 SIG: 9 
```

我已经按照所有基本程序嵌入地图和显示启动画面，因为当我尝试单独实现它们时成功了。

我已经确保 google-play-services jar 和 android-supportv4 jar 在 libs 文件夹中并且被正确引用。

* * *

MainActivity.java

* * *

```
package com.example.androidmapsv2;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.MapFragment;
//import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.google.android.gms.maps.model.PolylineOptions;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.FragmentManager;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
//import android.support.v4.app.FragmentActivity;
//import android.support.v4.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnMapClickListener,
        OnMapLongClickListener, LocationListener {

    final int RQS_GooglePlayServices = 1;
    private GoogleMap myMap;

    Location myLocation;
    TextView tvLocInfo;
    LocationListener myLocationListener;

    double CURRENT_LAT = 0.0;
    double CURRENT_LON = 0.0;

    double PREVIOUS_LAT = 0.0;
    double PREVIOUS_LON = 0.0;

    LocationManager locationManager;
    String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tvLocInfo = (TextView) findViewById(R.id.locinfo);

        FragmentManager myFragmentManager = getFragmentManager();
        MapFragment myMapFragment = (MapFragment) myFragmentManager
                .findFragmentById(R.id.map);
        myMap = myMapFragment.getMap();

        myMap.setMyLocationEnabled(true);

        // myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        // myMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        // myMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);

        // Getting LocationManager object
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        // Creating an empty criteria object
        Criteria criteria = new Criteria();

        // Getting the name of the provider that meets the criteria
        provider = locationManager.getBestProvider(criteria, false);

        if (provider != null && !provider.equals("")) {

            // Get the location from the given provider
            Location location = locationManager.getLastKnownLocation(provider);

            locationManager.requestLocationUpdates(provider, 20000, 1, this);

            if (location != null) {
                onLocationChanged(location);
            } else {
                Toast.makeText(getBaseContext(), "Location can't be retrieved",
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            Toast.makeText(getBaseContext(), "No Provider Found",
                    Toast.LENGTH_SHORT).show();
        }

        myMap.setOnMapClickListener(this);
        myMap.setOnMapLongClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_legalnotices:
            String LicenseInfo = GooglePlayServicesUtil
                    .getOpenSourceSoftwareLicenseInfo(getApplicationContext());
            AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(
                    MainActivity.this);
            LicenseDialog.setTitle("Legal Notices");
            LicenseDialog.setMessage(LicenseInfo);
            LicenseDialog.show();
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        int resultCode = GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getApplicationContext());

        if (resultCode == ConnectionResult.SUCCESS) {
            Toast.makeText(getApplicationContext(),
                    "isGooglePlayServicesAvailable SUCCESS", Toast.LENGTH_LONG)
                    .show();
        } else {
            GooglePlayServicesUtil.getErrorDialog(resultCode, this,
                    RQS_GooglePlayServices);
        }

    }

    @Override
    public void onMapClick(LatLng point) {
        tvLocInfo.setText(point.toString());
        myMap.animateCamera(CameraUpdateFactory.newLatLng(point));
    }

    @Override
    public void onMapLongClick(LatLng point) {
        tvLocInfo.setText("New marker added@" + point.toString());
        myMap.addMarker(new MarkerOptions().position(point).title(
                point.toString()));
        // Polyline line =
//      myMap.addPolyline(new PolylineOptions().add(
//              new LatLng(12.97202903709172, 80.21577659994364),
//              new LatLng(12.978670181826473, 80.2174412459135))
//              .geodesic(true));

        double lat = point.latitude;
        double lon = point.longitude;

        System.out.println("lat = "+lat);

        CURRENT_LAT = lat;
        CURRENT_LON = lon;

        tvLocInfo.setText("lat: " + lat + "\n" + "lon: " + lon);

        LatLng latlng = new LatLng(lat,
                lon);

        myMap.animateCamera(CameraUpdateFactory.newLatLng(latlng));

        if (CURRENT_LAT != 0.0 && CURRENT_LON != 0.0 && PREVIOUS_LAT != 0.0
                && PREVIOUS_LON != 0.0) {
            myMap.addPolyline(new PolylineOptions().add(
                    new LatLng(PREVIOUS_LAT, PREVIOUS_LON),
                    new LatLng(CURRENT_LAT, CURRENT_LON)).geodesic(true));
        }
        PREVIOUS_LAT = CURRENT_LAT;
        PREVIOUS_LON = CURRENT_LON;

    }

    @Override
    public void onLocationChanged(Location myLocation) {
        // TODO Auto-generated method stub
        // if (myLocationListener != null) {
        // myLocationListener.onLocationChanged(myLocation);

        double lat = myLocation.getLatitude();
        double lon = myLocation.getLongitude();

        CURRENT_LAT = lat;
        CURRENT_LON = lon;

        tvLocInfo.setText("lat: " + lat + "\n" + "lon: " + lon);

        LatLng latlng = new LatLng(myLocation.getLatitude(),
                myLocation.getLongitude());

        myMap.animateCamera(CameraUpdateFactory.newLatLng(latlng));

        if (CURRENT_LAT != 0.0 && CURRENT_LON != 0.0 && PREVIOUS_LAT != 0.0
                && PREVIOUS_LON != 0.0) {
            myMap.addPolyline(new PolylineOptions().add(
                    new LatLng(PREVIOUS_LAT, PREVIOUS_LON),
                    new LatLng(CURRENT_LAT, CURRENT_LON)).geodesic(true));
        }
        PREVIOUS_LAT = CURRENT_LAT;
        PREVIOUS_LON = CURRENT_LON;

        // }
    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 闪屏.java

```
package com.example.androidmapsv2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;

public class SplashScreen extends Activity {

    private static final int SPLASH_TIME = 3 * 1000;// 3 seconds

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);

        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {

                Intent intent = new Intent(SplashScreen.this,
                        MainActivity.class);
                startActivity(intent);

                SplashScreen.this.finish();

                overridePendingTransition(R.anim.fade_in, R.anim.fade_out);

            }
        }, SPLASH_TIME);

        new Handler().postDelayed(new Runnable() {
              @Override
              public void run() {
                     } 
                }, SPLASH_TIME);

    }

    @Override
    public void onBackPressed() {
        this.finish();
        super.onBackPressed();
    }
} 
```

* * *

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/locinfo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment"/>

</LinearLayout> 
```

* * *

## 闪屏.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:background="@drawable/splash"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
</RelativeLayout> 
```

* * *

## AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidmapsv2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" >
    </permission>

    <uses-permission android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyAkfu2ZAgQfO6iQ_ldkOAaVyMOPDmq_Lg0" />

        <activity
            android:name="com.example.androidmapsv2.SplashScreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.androidmapsv2.MainActivity" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="My Key" />
    </application>

</manifest> 
```

请看下面的结构

![在此处输入图像描述](https://i.stack.imgur.com/igP6b.png)

我还使用了最新的 API 密钥和其他基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:21:13.183

对我来说，它看起来仍然是`google-play-services`引用的问题。

**1.**您能否确认您的`red`依赖项文件夹 ( `green`) 中有选定的 ( ) 文件。

![在此处输入图像描述](https://i.stack.imgur.com/JTbnx.png)

**2.**请验证您的`project.properties`文件中是否有位于项目文件夹根目录中的这一行：

```
android.library.reference.1=../../android-sdk_r17-windows/extras/google/google_play_services/libproject/google-play-services_lib 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:20:41.373

以前版本的goolge地图已经贬值了，需要使用新的Api v2进行开发。

您已经在 Manifest.xml 中提供了两次密钥，现在将您的 MainActivity 扩展到 Fragment Activity 并替换

```
FragmentManager myFragmentManager = getFragmentManager();
MapFragment myMapFragment = (MapFragment) myFragmentManager
        .findFragmentById(R.id.map);
myMap = myMapFragment.getMap(); 
```

经过 - -

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap(); 
```

并在 activity_main.xml 替换`"com.google.android.gms.maps.MapFragment"`

经过 - - -`"com.google.android.gms.maps.SupportedMapFragment"`

你很好。

# haskell - 用于 HTTP 通信的 Haskell 库

> ID：15866765
> 
> 赞同：22
> 
> 时间：2013-04-07T19:24:52.783
> 
> 标签：haskell, haskell-platform

对于涉及 HTTP 请求的 Web 客户端编程，推荐的库是什么。

我知道有一个名为[HTTP](https://github.com/haskell/HTTP)的包，但它似乎不支持 HTTPS。有没有更好的图书馆呢？

我希望为 Haskell提供一个具有类似功能[的库。](http://docs.python-requests.org/en/latest/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T19:52:42.573

[`Network.HTTP.Conduit`](http://hackage.haskell.org/package/http-conduit)有一个干净的 API（它使用[`Network.HTTP.Types`](http://hackage.haskell.org/package/http-types)），如果您对管道有所了解，使用起来非常简单。例子：

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import Data.Conduit
import Network.HTTP.Conduit
import qualified Data.Aeson as J

main =
  do manager <- newManager def
     initReq <- parseUrl "https://api.github.com/user"
     let req = applyBasicAuth "niklasb" "password" initReq
     resp <- runResourceT $ httpLbs req manager

     print (responseStatus resp)
     print (lookup "content-type" (responseHeaders resp))

     -- you will probably want a proper FromJSON instance here,
     -- rather than decoding to Data.Aeson.Object
     print (J.decode (responseBody resp) :: Maybe J.Object) 
```

还要确保[查阅教程](https://haskell-lang.org/library/http-client)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-23T11:48:32.543

Bryan O'Sullivan 已经发布了一个名为[wreq](https://hackage.haskell.org/package/wreq)的库，它非常好用并且易于用于 HTTP 通信。

A related tutorial for that by the same author is [here.](http://www.serpentine.com/wreq/tutorial.html)

There is also another library named [req](https://github.com/mrkkrp/req) which provides a nice API.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T02:54:30.380

除了`Network.HTTP.Conduit`那里[`Network.Http.Client`](http://hackage.haskell.org/package/http-streams)公开一个[`io-streams`](http://hackage.haskell.org/package/io-streams-1.0.1.0)接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-03T01:21:36.247

[Servant](https://hackage.haskell.org/package/servant) is easy to use (albeit hard to understand) and magical. It lets you specify the API as an uninhabited type, and generates request and response behaviors based on it. You'll never have to worry about serialization or deserialization, or even JSON -- it converts JSON to and from native Haskell objects automatically, based on the API. It's got an excellent [tutorial](http://haskell-servant.readthedocs.io/en/stable/tutorial/), too.

# javascript - 如何在不获取或发布的情况下从一个页面获取 javascript 变量值到另一个页面

> ID：15866767
> 
> 赞同：0
> 
> 时间：2013-04-07T19:25:02.860
> 
> 标签：javascript, session, variables

我有一个带有按钮的 jquery ui 菜单，一旦单击该按钮，就会打开一个 ligthbox 样式的 iframe。我希望按钮单击事件获取选定的菜单值并将其发送到在 iframe 中打开的页面。我尝试了一些不起作用的东西。下面链接中的人设计了一个解决方案，使 javascript 会话变量没有 cookie，但我无法将变量传递给 Session.setVar(string name, mixed value)，它总是返回 false，表示会话未设置。它仅在我将字符串作为值传递时才有效。 [http://samuli.hakoniemi.net/javascript-session-variables-without-cookies/](http://samuli.hakoniemi.net/javascript-session-variables-without-cookies/)

我的代码：

```
<script>
$(function(){
   $(".menu").menu({
          var selection =  ' ';
        select: function (event, ui) {
            $('.selected', this).removeClass('selected');

          // selection is that variable I want to pass to the page that opens in the iframe:

          selection = ui.item.addClass('selected').children('a').attr('name');

           } // closes select function
    }); // closes menu

    $("button").click(function(){

       //when the button is clicked the css lightbox effect happens and the div below opens an iframe containing the other page. 

               $("#light").css("display", "block");
               $("#fade").css("display", "block");

            }); //closes click()
}); // close function()
</script>

//iframe:

<div id="light" class="white_content"><iframe height= "400px" width ="450px" src="http://mydomain.com/invite_1.php"></iframe> </div>

<div>
        <ul class="menu" id="menu">
                <li><a href="#" name="academic_artStudies" id="academic_artStudies"><img src="" alt="" /><h2>Academic: Art Studies</h2></a></li>
                <li><a href="#" name="academic_Literature"><img src="" alt="" /><h2>Academic: Literature</h2></a></li>
                <li><a href="#" name="academic_socialSciences"><img src="" alt="" /><h2>Academic: Social Sciences</h2></a></li>
                <li><a href="#" name="academic_physicalNaturalSci"><img src="" alt="" /><h2>Academic: Physical/Natural Sciences</h2></a></li>
       </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:28:09.270

如果方便，您可以使用 URL 参数。

# jquery - 如何隐藏空的手风琴内容？

> ID：15866769
> 
> 赞同：0
> 
> 时间：2013-04-07T19:25:16.190
> 
> 标签：jquery, html, jquery-ui

我正在使用 ASP.NET C# 环境编写页面。我有 7 个类别显示在 jQuery UI Accordion 小部件中。换句话说，我有 7 个标签。

每个手风琴内容都来自 DB。

有时有些类别是空的。所以我想隐藏空类别。

我的头部内容有这些代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>
    $(function () {
        $("#accordion").accordion({
            collapsible: true, 
            heightStyle: "content", 
            active: false
        });
    });
</script> 
```

身体有那些：

```
<div id="accordion">
            <h3>
                <span id="a" runat="server"></span>
            </h3>
            <div>
                <span id="atifa" runat="server"></span>
            </div>
            <h3>
                <span id="b" runat="server"></span>
            </h3>
            <div>
                <span id="atifb" runat="server"></span>
            </div>
            <h3>
                <span id="c" runat="server"></span>
            </h3>
            <div>
                <span id="atifc" runat="server"></span>
            </div>
            <h3>
                <span id="d" runat="server"></span>
            </h3>
            <div>
                <span id="atifd" runat="server"></span>
            </div>
            <h3>
                <span id="e" runat="server"></span>
            </h3>
            <div>
                <span id="atife" runat="server"></span>
            </div>
            <h3>
                <span id="f" runat="server"></span>
            </h3>
            <div>
                <span id="atiff" runat="server"></span>
            </div>
            <h3>
                <span id="g" runat="server"></span>
            </h3>
            <div>
                <span id="atifg" runat="server"></span>
            </div>
        </div> 
```

根据记录的属性，数据库中的某些类别为空。我不希望显示空类别。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:34:58.043

试试这个：

```
var $span = $("#accordion_atiflar > div > span:empty");
$span.parent('div').hide();
$span.parent('div').prev('h3').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:29:17.047

因为您在 asp.net 中工作，所以不能呈现空的 Accordion 选项卡。您将向客户端传输更少的数据，并且简单的检查非常快，因此不会成为性能问题

# sorting - 按日期合并多个日志文件，包括多行

> ID：15866772
> 
> 赞同：16
> 
> 时间：2013-04-07T19:25:26.753
> 
> 标签：sorting, logging, command-line, cat, log-files

我有几个包含所有以时间戳开头的行的日志，以便以下工作按预期合并它们：

```
cat myLog1.txt myLog2.txt | sort -n > combined.txt 
```

问题是，myLog2.txt 也可以包含没有时间戳的行（例如 java 堆栈跟踪）。有没有任何自定义脚本的简单方法仍然可以合并它们并保留多行内容？

示例**myLog1.txt**

```
11:48:18.825 [main] INFO  org.hibernate.cfg.Environment - HHH000206: hibernate.properties not found
11:48:55.784 [main] INFO  o.h.tool.hbm2ddl.SchemaUpdate - HHH000396: Updating schema 
```

示例**myLog2.txt**

```
11:48:35.377 [qtp1484319352-19] ERROR c.w.b.c.ControllerErrorHandler -
org.springframework.beans.TypeMismatchException: Failed to convert value of type   'java.lang.String' to required type 'org.joda.time.LocalDate'; nested exception is    org.springframework.core.convert.ConversionFailedException: Failed to convert from type     java.lang.String to type @org.springframework.web.bind.annotation.RequestParam   @org.springframework.format.annotation.DateTimeFormat org.joda.time.LocalDate for value    '[2013-03-26]'; nested exception is java.lang.IllegalArgumentException: Invalid format: "    [2013-03-26]"
    at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java:68) ~[spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:45) ~[spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:595) ~[spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:98) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:77) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162) ~[spring-web-3.2.1.RELEAS 
```

**预期产出**

```
11:48:18.825 [main] INFO  org.hibernate.cfg.Environment - HHH000206: hibernate.properties not found
11:48:35.377 [qtp1484319352-19] ERROR c.w.b.c.ControllerErrorHandler -
org.springframework.beans.TypeMismatchException: Failed to convert value of type   'java.lang.String' to required type 'org.joda.time.LocalDate'; nested exception is    org.springframework.core.convert.ConversionFailedException: Failed to convert from type     java.lang.String to type @org.springframework.web.bind.annotation.RequestParam   @org.springframework.format.annotation.DateTimeFormat org.joda.time.LocalDate for value    '[2013-03-26]'; nested exception is java.lang.IllegalArgumentException: Invalid format: "    [2013-03-26]"
    at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java:68) ~[spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:45) ~[spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:595) ~[spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:98) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:77) ~[spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162) ~[spring-web-3.2.1.RELEAS
11:48:55.784 [main] INFO  o.h.tool.hbm2ddl.SchemaUpdate - HHH000396: Updating schema 
```

谢谢马可

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-11-26T13:54:09.370

I was struggling with the same issue and finally I think I've got it. Try do it like:

`sort -nbms -k1.1,1.2 -k1.4,1.5 -k1.7,1.8 -k1.10,1.12 myLog1.txt myLog2.txt > combined.txt`

It's still not fully clear to myself, I'll try to give some explanation though. According to the man pages used switches mean:

> -n, --numeric-sort - compare according to string numerical value.
> 
> -b, --ignore-leading-blanks - ignore leading blanks.
> 
> -s, --stable - stabilize sort by disabling last-resort comparison
> 
> -m, --merge - merge already sorted files; do not sort
> 
> -k, --key=POS1[,POS2] - start a key at POS1 (origin 1), end it at POS2 (default end of line)

*   log files are already ordered so we don't need to sort them again, only determine which line goes where upon merging. That's why `-m`. It's crucial to keep stacktraces from getting scrambled.
*   `-b` is not necessary in this case as somehow `-n` and `-m` combined keeps stacktrace lines from getting clustered. I left it just in case as most of stacktrace lines starts with blanks.
*   `-n` apparently stops comparing key whenever there is a non-numeric character in the key. That's the second crucial bit for keeping stacktraces in place. Important is if it was `-n -k1,1` it would only sort the log files by hour as colon is non-numeric. Apart from that `-n` speeds up numeric comparison so we would like to have it anyway.
*   the problem mentioned in the previous point is solved by pointing to specific characters positions in each key, that's why `-k1.1,1.2` (first and second digit of hour) `-k1.4,1.5` (first and second digit of minutes) and so on. The first digit before the dot is always '1' as it points to the first column of the file line (which in our case is time). Shortly it's `-kA,B` where `A` and `B` are column positions in a given line (by default lines are delimited by blanks). Format of A and B used is .. Keep in mind that whenever there is a non-numeric character between `A` and `B` everything after it will be ignored in comparison if `-n` used.
*   `-s` disables default behaviour which is: whenever keys by which comparison is being done are the same full string comparison of the lines is done. We don't want that to preserve original log entries order. Not sure if it's necessary with `-m` though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:50:54.410

不——不能用一个简单的命令 IMMHO 来完成。

但是 - 这是一个脚本来做到这一点（这是一个挑战......）

```
@ECHO OFF
SETLOCAL
:: First log to tempfile
COPY /y mylog.txt "%temp%\combinedlogs.tmp" >NUL
(
FOR /f "delims=" %%i IN (mylog2.txt) DO (
 SET line=%%i
 ECHO %%i|FINDSTR /b /r "[012][0-9]:[0-5][0-9]:[0-5][0-9]\.[0-9][0-9][0-9]" >NUL
 IF ERRORLEVEL 1 (
  SETLOCAL ENABLEDELAYEDEXPANSION
 ECHO(!stamp:~0,12!!count!!line!
  ENDLOCAL
  SET /a count+=1
 ) ELSE (
 SET /a count=100
 ECHO %%i
 SET stamp=%%i
 )
)
)>>"%temp%\combinedlogs.tmp"
(
FOR /f "delims=" %%i IN ('SORT "%temp%\combinedlogs.tmp"') DO (
 SET line=%%i
 SETLOCAL enabledelayedexpansion
 IF "!line:~12,1!"==" " (ECHO(%%i) ELSE (ECHO(!line:~15!)
 ENDLOCAL
)
)>combinedlogs.txt
DEL "%temp%\combinedlogs.tmp" /F /Q 
```

将带有所有时间戳条目的第一个日志复制到临时
文件 通过以下方式处理第二个文件

*   直接输出任何带时间戳的行，保存时间戳行并设置一个 3 位计数器
*   为其他行输出印章部分+计数器+原始文本并碰撞计数器

因此 Tempfile 是

```
Timestamp1 line1 from file1
..
Timestampn linen from file1
timestampA line1 from file2 with timestamp
timestampA100 UNtimestamped line2from file2
timestampA101 UNtimestamped line3from file2
timestampB line4 from file2 with timestamp
timestampB100 UNtimestamped line5from file2
timestampB101 UNtimestamped line6from file2
... 
```

对结果进行排序并重新处理
第 13 个字符中没有空格的行是第二个文件中没有时间戳的行，因此

*   输出除前 15 个字符以外的所有字符（时间戳 12 个字符 + 3 个用于计数器）
*   否则，时间戳行，所以输出所有。

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T23:07:40.933

这是在 bash shell 中**简单合并文件的一种方法（而不是昂贵的手段**——因为日志文件已经排序）。这对于数百兆字节或更多的大文件很重要，就像现实世界的日志文件一样。

此解决方案假定您的日志中没有 NUL 字节，这对于我遇到的每个日志文件都是如此，具有各种字符集。

基本思想：

1.  通过在每个输入文件中用 NUL 替换这些换行符，将所有多行连接到单行
2.  对替换的文件执行 a`sort -m`以合并它们
3.  将 NUL 替换回合并结果上的换行符

由于第一步多次完成，我给它起了一个别名：

```
alias a="awk '{ if (match(\$0, /^[0-9]{2}:[0-9]{2}:[0-9]{2}\\./, _))\
{ if (NR == 1) printf \"%s\", \$0; else printf \"\\n%s\", \$0 }\
else printf \"\\0%s\", \$0 } END { print \"\" }'" 
```

这是执行所有 3 个步骤的命令：

```
sort -m <(a myLog1.txt) <(a myLog2.txt) | tr '\0' '\n' 
```

有关更多信息，请参阅[https://superuser.com/a/838446/125379](https://superuser.com/a/838446/125379)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T17:54:57.290

您应该在日志文件中使用`merge`、`stable`、`ignore-leading-blanks`、`numeric-sort`和易于排序的日期时间格式（例如[`yyyyMMddHHmmssSSS`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)）。

因此，我将您的日志格式更改为更易于排序，结果是`sort -bsnm log1 log2`：

```
 $ cat -n log1 log2 && sort -m -b -n -s log1 log2
      1 114818825 [main] INFO  org.hibernate.cfg.Environment - HHH000206 hibernate.properties not found
      2 114855784 [main] INFO  o.h.tool.hbm2ddl.SchemaUpdate - HHH000396 Updating schema
      1 114835377 [qtp1484319352-19] ERROR c.w.b.c.ControllerErrorHandler -
      2 org.springframework.beans.TypeMismatchException Failed to convert value of type   'java.lang.String' to required type 'org.joda.time.LocalDate'; nested exception is    org.springframework.core.convert.ConversionFailedException Failed to convert from type     java.lang.String to type @org.springframework.web.bind.annotation.RequestParam   @org.springframework.format.annotation.DateTimeFormat org.joda.time.LocalDate for value    '[2013-03-26]'; nested exception is java.lang.IllegalArgumentException Invalid format "    [2013-03-26]"
      3     at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java68) ~[spring-beans-3.2.1.RELEASE.jar3.2.1.RELEASE]
      4 at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java45) ~[spring-beans-3.2.1.RELEASE.jar3.2.1.RELEASE]
      5 at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java595) ~[spring-context-3.2.1.RELEASE.jar3.2.1.RELEASE]
      6 at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java98) ~[spring-web-3.2.1.RELEASE.jar3.2.1.RELEASE]
      7 at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java77) ~[spring-web-3.2.1.RELEASE.jar3.2.1.RELEASE]
      8 at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java162) ~[spring-web-3.2.1.RELEAS
      9 
 114818825 [main] INFO  org.hibernate.cfg.Environment - HHH000206 hibernate.properties not found
 114835377 [qtp1484319352-19] ERROR c.w.b.c.ControllerErrorHandler -
 org.springframework.beans.TypeMismatchException Failed to convert value of type   'java.lang.String' to required type 'org.joda.time.LocalDate'; nested exception is    org.springframework.core.convert.ConversionFailedException Failed to convert from type     java.lang.String to type @org.springframework.web.bind.annotation.RequestParam   @org.springframework.format.annotation.DateTimeFormat org.joda.time.LocalDate for value    '[2013-03-26]'; nested exception is java.lang.IllegalArgumentException Invalid format "    [2013-03-26]"
     at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java68) ~[spring-beans-3.2.1.RELEASE.jar3.2.1.RELEASE]
 at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java45) ~[spring-beans-3.2.1.RELEASE.jar3.2.1.RELEASE]
 at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java595) ~[spring-context-3.2.1.RELEASE.jar3.2.1.RELEASE]
 at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java98) ~[spring-web-3.2.1.RELEASE.jar3.2.1.RELEASE]
 at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java77) ~[spring-web-3.2.1.RELEASE.jar3.2.1.RELEASE]
 at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java162) ~[spring-web-3.2.1.RELEAS

 114855784 [main] INFO  o.h.tool.hbm2ddl.SchemaUpdate - HHH000396 Updating schema 
```

正如[@Magoo 的回答](https://stackoverflow.com/a/15870958/2916086)中所说，您的日志日期时间当前的格式很难排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-26T10:56:23.990

The open source tool (Java [GitHub](https://github.com/credibledoc/credible-doc/tree/master/log-combiner-parent)) lets you combine log files with different formats including multilines into a merged file.

The tool allows to shift the time of records in a log file. It can be useful when files come from different time zones.

It also allows to generate additional information to a merged file, for example applications names or timestamps in a uniform format, see [the example](https://github.com/credibledoc/credible-doc/blob/master/log-combiner-parent/log-combiner/src/test/java/com/credibledoc/combiner/CombinerServiceProgrammableTest.java).

The tool can be used as a [command line tool](https://github.com/credibledoc/credible-doc/blob/master/log-combiner-parent/log-combiner/README.md) or [Java library](https://github.com/credibledoc/credible-doc/blob/master/log-combiner-parent/log-combiner-core/doc/usage.md). Note: I'm the author.

# soap - 使用 SSIS 使用肥皂网络服务

> ID：15866773
> 
> 赞同：1
> 
> 时间：2013-04-07T19:25:27.660
> 
> 标签：soap, ssis

谁能告诉我使用 SSIS 最简单的使用 Web 服务的方法是什么，WSDL 中有复杂的类型会导致错误，因此您不能使用 SSIS Web 服务任务？我之前想出了一种使用 SSIS 脚本任务的方法，它生成了一个 cURL 命令，并且到目前为止效果很好。出于某种原因，我无法让 cURL 使用我必须使用的新服务。我需要做的就是使用服务的wsdl 中描述的方法提交一个soap 请求，然后将soap 响应作为一个XML 文件下载到我的本地服务器。我想会有一百万种方法来回答这个问题，但希望有人可以建议在 SSIS 中执行肥皂请求的最简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:37:02.657

以下是一些下载soap请求的VBScript代码示例：

[http://example-code.com/vbscript/http_soap.asp](http://example-code.com/vbscript/http_soap.asp)

[http://gallery.technet.microsoft.com/scriptcenter/deed3efb-1e11-4e7e-8bfd-96a981de5c35](http://gallery.technet.microsoft.com/scriptcenter/deed3efb-1e11-4e7e-8bfd-96a981de5c35)

如果您认为这是您想要的方向，我可以提供帮助。但我猜你可能会收到同样的错误信息。这是一个使用powershell的：

[http://www.iislogs.com/steveschofield/execute-a-soap-request-from-powershell](http://www.iislogs.com/steveschofield/execute-a-soap-request-from-powershell)

# java - BufferedReader 没有从 ProcessBuilder 返回所有行

> ID：15866774
> 
> 赞同：0
> 
> 时间：2013-04-07T19:26:06.200
> 
> 标签：java

我有以下代码：

```
ProcessBuilder builder = new ProcessBuilder("C:\\file\\ffmpeg.exe", "-i", src);
builder.redirectErrorStream(true);
Process process = builder.start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
try {
   while ((br.readLine()) != null) {
      System.out.println(br.readLine() + "\n");
   }
} catch (IOException e) {
   e.printStackTrace();
} 
```

现在这是输出：

> 使用 gcc 4.7.2 (GCC) 于 2013 年 3 月 22 日 08:56:38 构建
> 
> libavutil 52\. 22.101 / 52\. 22.101
> 
> libavformat 55\. 0.100 / 55\. 0.100
> 
> libavfilter 3\. 48.100 / 3\. 48.100
> 
> libswresample 0\. 17.102 / 0\. 17.102
> 
> 输入 #0，avi，来自 'C:\Users\Olle\Desktop\file.avi'：
> 
> 编码器：Lavf52.104.0
> 
> 流 #0:0：视频：mpeg4（简单配置文件）（DX50 / 0x30355844）、yuv420p、720x408 [SAR 1:1 DAR 30:17]、29.97 fps、29.97 tbr、29.97 tbn、30001 tbc
> 
> 必须至少指定一个输出文件

当它应该输出更多（在常规命令行中输出更多）。

I don't understand what is going on. The weird thing is that when I compile the above code on Mac, it works fine. It's only in Windows I have this issue.

Even with:

```
String line = null;                     
try {
    while ((line = br.readLine()) != null) {
    line = br.readLine() + "\n";                            
    } 
```

Same issue...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:30:02.490

with the br.readLine() in the while you skip every second line!

the code should be

```
String line = null; 
while ((line = br.readLine()) != null)
{
   System.out.println(line + "\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:32:09.083

By making 2 calls to br.readLine() you can skipping one line. You need to assign value of br.readLine() to a string and print it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:30:28.207

Isn't the answer the output of your command?

```
At least one output file must be specified 
```

According to this, you need to specify an output file as well.

# android - 在Android开发中，如何实现对背景某一区域的点击？

> ID：15866775
> 
> 赞同：0
> 
> 时间：2013-04-07T19:26:40.607
> 
> 标签：android, view, click

我正在使用 Android 进行编程，现在我想在我的应用程序中添加一个功能，该功能是响应点击我背景的某个特定区域而没有任何类型的反馈。

我正在做一个应用程序作为送给我女朋友的礼物，当她点击某个地方时，我想给她一个惊喜。令人惊讶的是，它不应该是按钮、文本或图片，而应该是与背景的其他区域一样正常的某个地方。

我知道也许我可以插入与背景图案相同的图片，但是有一些更聪明的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:30:19.443

您可以创建一个透明的按钮。

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:visibility="visible" /> 
```

# backbone.js - Backbone.js 如何在视图中保持数据同步？

> ID：15866777
> 
> 赞同：0
> 
> 时间：2013-04-07T19:26:55.780
> 
> 标签：backbone.js, backbone-views

我正在将 Backbone.js 示例 Todos 应用程序修改为位置管理器。

当您在浏览器中添加新的“位置”时，ruby 后端会从浏览器中获取 POST 数据，并对地址进行地理编码。然后它将用户在浏览器中输入的地址替换为 Google 返回的格式良好的地址，最后将新位置添加到数据库中。由于我没有正确连接 Backbone 以使这些数据在视图中保持同步，因此在我刷新页面之前，格式良好的地址不会显示。

我的目标是在将新位置对象添加到数据库后立即自动显示格式良好的地址。

我在这里看到了 Jason Stonebreaker 的潜在解决方案，但不确定这段代码属于哪里：[Polling a Collection with Backbone.js](https://stackoverflow.com/questions/5963324/polling-a-collection-with-backbone-js)

我的代码：[https ://gist.github.com/Lordnibbler/5331943](https://gist.github.com/Lordnibbler/5331943)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:33:43.877

原来我忘记让我的 JSON REST API 在 POST 或 PUT 数据发送到服务器后以 JSON 格式返回新创建或更新的 Location 对象。让 POST/PUT 端点以 JSON 格式返回当前的 Location 对象，允许骨干网自动更新属性。

# oracle - Oracle 参数命名约定

> ID：15866778
> 
> 赞同：0
> 
> 时间：2013-04-07T19:26:56.530
> 
> 标签：oracle, stored-procedures, naming-conventions

我知道 Oracle 存储过程中参数的命名约定是在参数前面加上“p_”，但是是否允许像 Sql Server 和 Sybase 一样在 Oracle 中使用 @ 符号？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:31:19.897

不可以。标识符必须以字母开头。

* * *

**编辑：**
当然，`@`如果你非常喜欢的话，你可以在里面使用带引号的标识符：

```
function f("@parameter" int) return int is
begin
   return "@parameter" + 1;
end; 
```

# c# - 如何在列表<>中查找重复项？

> ID：15866780
> 
> 赞同：7
> 
> 时间：2013-04-07T19:27:04.570
> 
> 标签：c#, linq, list

我有：

```
List<string> list = new List<string>() { "a", "a", "b", "b", "r", "t" }; 
```

我怎样才能只得到“a”，“b”？

我试着这样做：

```
List<string> list = new List<string>() { "a", "a", "b", "b", "r", "t" };
List<string> test_list = new List<string>(); 

test_list = list.Distinct().ToList(); 
```

现在 test_list 有 {"a", "b", "r", "t"}
然后：

```
test_list = test_list.Except(list).ToList(); 
```

所以那是我的失败点，因为 except() 删除了所有元素。

*你能帮我解决吗？*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T19:30:39.647

```
List<string> list = new List<string>() { "a", "a", "b", "b", "r", "t" };

var dups = list.GroupBy(x => x)
    .Where(x => x.Count() > 1)
    .Select(x => x.Key)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-07T19:44:47.727

```
var list = new List<string> { "a", "a", "b", "b", "r", "t" };

var distinct = new HashSet<string>();    
var duplicates = new HashSet<string>();

foreach (var s in list)
    if (!distinct.Add(s))
        duplicates.Add(s);

// distinct == { "a", "b", "r", "t" }
// duplicates == { "a", "b" } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-07T19:29:49.647

试试这个

```
var duplicates = list.GroupBy(a => a).SelectMany(ab => ab.Skip(1).Take(1)).ToList(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T19:30:33.723

一个简单的方法是使用`Enumerable.GroupBy`：

```
var dups = list.GroupBy(s => s)
               .Where(g => g.Count() > 1)
               .Select(g => g.Key); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T19:29:59.167

```
var duplicates = list.GroupBy(s => s).SelectMany(g => g.Skip(1).Take(1)).ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T19:41:20.150

```
var duplicates = list.GroupBy(a => a).SelectMany(ab => ab.Skip(1).Take(1)).ToList(); 
```

它会比使用的更有效，`Where(g => g.Count() > 1)`并且每个组只返回一个元素。

# firefox-addon - XPIDL (typelib.py) 类型未找到错误

> ID：15866785
> 
> 赞同：0
> 
> 时间：2013-04-07T19:27:16.620
> 
> 标签：firefox-addon, xul, xpcom, xulrunner

我正在尝试构建一个使用 IDL 的 Firefox 扩展。但是，构建因此错误而终止：

```
[apply] Executing 'python' with arguments:
[apply] 'C:\Users\Dad\Documents\Sage\xulrunner-sdk/sdk/bin/typelib.py'
[apply] '-I'
[apply] 'C:\Users\Dad\Documents\Sage\xulrunner-sdk/idl/'
[apply] '-o'
[apply] 'C:\Users\Dad\Documents\Sage\build\xpi\components\sageIFeedParserListener.xpt'
[apply] 'C:\Users\Dad\Documents\Sage\src\components\sageIFeedParserListener.idl'
[apply]
[apply] Traceback (most recent call last):
[...]
[apply]   File "C:\Users\Dad\Documents\Sage\xulrunner-sdk\sdk\bin\xpidl.py", line 959, in resolve
[apply]     self.realtype = method.iface.idl.getName(self.type, self.location)
[apply]   File "C:\Users\Dad\Documents\Sage\xulrunner-sdk\sdk\bin\xpidl.py", line 271, in getName
[apply]     raise IDLError("type '%s' not found" % id, location)
[apply] xpidl.IDLError: error: type 'PRInt64' not found, sageIFeedItemEnclosure.idl line 44:32
[apply]   void init(in AString link, in PRInt64 length, in AString mimeType); 
```

我正在使用最新版本的 xulrunner-sdk (20)，我通过简单地解压到一个文件夹中来安装它；我不相信我需要做任何其他事情，但也许我错了？我有 Python 2.7.3。typelib.py 调用中的路径似乎是正确的。IDL 文件本身很简单，如下所示：

```
#include "nsISupports.idl"

[scriptable, uuid(73C6ECE6-0D9F-474C-8959-3979D2D1CBDB)]
interface sageIFeedItemEnclosure: nsISupports {

    void init(in AString link, in PRInt64 length, in AString mimeType);
} 
```

我可以看到 PRInt64 是在 nsISupportsPrimitives.idl 中定义的。但是，即使我在尝试编译的 IDL 文件中专门包含该文件，我也会遇到相同的错误，所以我怀疑这是其他问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:38:49.480

The 64bit integer data type `int64_t` is defined in `nsrootidl.idl`, which is included by `nsiSupports.idl` and so available everywhere.

What you see in `nsISupportsPrimitives.idl` is the declaration of the `nsISupportsPRInt64` interface.

# css - 浮动将不起作用

> ID：15866789
> 
> 赞同：0
> 
> 时间：2013-04-07T19:27:44.980
> 
> 标签：css, css-float

我想在他的右侧创建一个带有垂直线的登录表单。两者都包含在 div 中，这是代码

```
<div id="logindAndRegistra">
    <div id="sezionesx">
        <div class="scritta" id="loginHeader">Login</div><br />
        <div class="scritta">Username <input id="username"/></div><br />
        <div class="scritta">Password <input id="password"/></div>
    </div>
    <div id="separatore"></div>
</div> 
```

CSS

```
#logindAndRegistra
{
    width:900px;
    margin-top:80px;
    margin-left:auto;
    margin-right:auto;  
}

#sezionesx
{
    float:left;
    width:200px
}

#separatore
{
    border-left: 1px solid black;
    height:156px; 
    border-color:#000000;
    min-height:20px;    
    margin-left:200px   
} 
```

结果是垂直线位于父 div 的开头，例如登录表单。将“float:left”设置为登录表单，不应该允许自动将下一个元素定位在前一个元素的末尾吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:08:24.457

好的，然后从 #separatore id 中删除您的 margin-left:200px 并添加 float:left 如下

#separatore { 浮动：左；}

# opencv - 背景减法器MOG2 & OpenCV

> ID：15866794
> 
> 赞同：4
> 
> 时间：2013-04-07T19:28:27.873
> 
> 标签：opencv, background-subtraction

我正在尝试在[http://mateuszstankiewicz.eu/?p=189](http://mateuszstankiewicz.eu/?p=189)上编译简单示例 我正在运行 Ubuntu 12.10 64 位。我使用 OpenCV 2.4.4a

我使用执行此操作的 makefile 进行编译：

```
g++ background_subtraction.cpp -o background_subtraction -I/usr/local/include/opencv -I/usr/local/include/opencv2 -L /usr/local/lib -lm -lopencv_core -lopencv_highgui -lopencv_imgproc -lcvblob 
```

错误：

```
/tmp/cc0ZWnll.o: dans la fonction « main »:
background_subtraction.cpp:(.text+0x96): référence indéfinie vers « cv::BackgroundSubtractorMOG2::BackgroundSubtractorMOG2() »
background_subtraction.cpp:(.text+0x1f0): référence indéfinie vers « cv::BackgroundSubtractorMOG2::operator()(cv::_InputArray const&, cv::_OutputArray const&, double) »
background_subtraction.cpp:(.text+0x222): référence indéfinie vers « cv::BackgroundSubtractorMOG2::getBackgroundImage(cv::_OutputArray const&) const »
background_subtraction.cpp:(.text+0x61a): référence indéfinie vers « cv::BackgroundSubtractorMOG2::~BackgroundSubtractorMOG2() »
background_subtraction.cpp:(.text+0x7a6): référence indéfinie vers « cv::BackgroundSubtractorMOG2::~BackgroundSubtractorMOG2() »
collect2: erreur: ld a retourné 1 code d'état d'exécution 
```

意思是：未定义的引用...

background_subtraction.cpp 文件：

```
#include <opencv2/opencv.hpp>

#include <iostream>
#include <vector>

int
main (int argc, char *argv[])
{
  cv::Mat frame;
  cv::Mat back;
  cv::Mat fore;
  cv::VideoCapture cap (0);
  cv::BackgroundSubtractorMOG2 bg;
  bg.set ("nmixtures", 3);
  //bg.bShadowDetection = false;
  std::vector < std::vector < cv::Point > >contours;

  cv::namedWindow ("Frame");
  cv::namedWindow ("Background");

  for (;;)
    {
      cap >> frame;
      bg.operator()(frame, fore);
      bg.getBackgroundImage (back);
      cv::erode (fore, fore, cv::Mat ());
      cv::dilate (fore, fore, cv::Mat ());
      cv::findContours (fore, contours, CV_RETR_EXTERNAL,
            CV_CHAIN_APPROX_NONE);
      cv::drawContours (frame, contours, -1, cv::Scalar (0, 0, 255), 2);
      cv::imshow ("Frame", frame);
      cv::imshow ("Background", back);
      if (cv::waitKey (30) >= 0)
    break;
    }
  return 0;
} 
```

成功编译该程序我缺少什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T19:40:08.580

您还需要链接`opencv_video`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T02:22:25.627

添加这些代码行。然后它会工作。/

```
int const mixture = 2;
    const bool bShadowDetection = false;
    cv::BackgroundSubtractorMOG2 bg(mixture, bShadowDetection); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-23T21:15:08.543

如果您使用的是 Microsoft Visual，只需添加“opencv_video244.lib”

属性->链接器->输入->附加依赖项

# java - LastIndexOf 函数用法

> ID：15866795
> 
> 赞同：0
> 
> 时间：2013-04-07T19:28:33.780
> 
> 标签：java, lastindexof

我正在尝试学习如何使用`lastIndexOf`函数，但代码对我不起作用。单击按钮后，我只得到整个文本，而不仅仅是扩展名。我究竟做错了什么？

```
private  String getExtension(String s)
{
    char dot='.';
    int pos=s.lastIndexOf("dot");
    String root=s.substring(pos+1);
    return root;   
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{               
    String s=jTextField1.getText();
    jLabel1.setText(getExtension(s));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:31:34.383

### 你的问题

您需要删除变量名称周围的引号。

```
int pos=s.lastIndexOf("dot"); 
```

变成

```
int pos=s.lastIndexOf(dot); 
```

### 只是旁白

如果您使用调试器，这可以很容易地由您自己解决。我不禁觉得您已将 SO 用作第一选择，而不是应有的选择；当您真的用尽了您个人知道的所有调查方法时，可以去的地方。

**调试器**

Almost every single IDE (Eclipse, Netbeans etc) have something called a debugger. A debugger allows you to go through your program line by line, and see the value of every single variable as the program develops. If you're using Eclipse, on the toolbar along the top, select `Run -> Debug`, to initialize the program in debugging mode. For Netbeans, there is a debug button on the right of the Run button (The play symbol). Just a few examples.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:31:41.603

Take out the quotes in your `lastIndexOf` statement.

```
int pos=s.lastIndexOf("dot");
//                    ^---^
//                      +---------- Take those " out 
```

# android - 使用片段布局

> ID：15866797
> 
> 赞同：0
> 
> 时间：2013-04-07T19:28:38.147
> 
> 标签：android, android-fragments, android-fragmentactivity, fragmenttransaction, fragmentmanager

我的 Android 应用程序要求某个流程有 7 个不同的屏幕。现在每个屏幕都有一个共同的顶部和底部。所以我选择创建一个`FragmentActivity`和 7 个不同的`Fragments`. 如何`FragmentActivity`在运行时将片段插入？我在[这里](http://neilgoodman.net/2012/01/29/working-with-fragments-on-android-part-1/)阅读了本教程，根据本教程，我的 main`FragmentActivity`应该具有以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/fragment_content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

它应该使用以下代码来替换片段：

```
 FragmentManager fm = getSupportFragmentManager();
 Fragment fragment = fm.findFragmentById(R.id.fragment_content); 

 if (fragment == null) {
     FragmentTransaction ft = fm.beginTransaction();
     ft.add(R.id.fragment_content, new BasicFragment());
     ft.commit();
 } 
```

我不明白的是以下行：

```
 ft.add(R.id.fragment_content, new BasicFragment()); 
```

`R.id.fragment_content`是 a `FrameLayout`，这会将片段插入`FrameLayout`还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:57:54.670

> R.id.fragment_content 是 FrameLayout 吗？这会将片段插入框架布局还是什么？

据我所知，片段布局被放置在它之上。在它下面，它有另一个布局，它是一个“贴纸”，将它粘到容器布局上。所以它在某种程度上是一个蛋糕。我认为，要获得该“贴纸”，您可以调用`.getParent()`片段的根视图。

哦，并且标记片段可以轻松找到它们`FragmentManager`（尽管标记查找有点贵）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:05:38.003

您可以将其视为您有一个`FrameLayout`可以将玩具船扔到（您的）中的池（在本例中为您的`Fragments`）。所以基本上你需要一个环境来容纳你`Fragments`，它可以是你选择的任何布局。

所以你在这里做什么：

```
Fragment fragment = fm.findFragmentById(R.id.fragment_content); 
```

是错误的，因为`R.id.fragment_content`is not a `Fragment`but a `FrameLayout`。

但它可能是您的`Fragment`容器，因此您需要创建一个`extends Fragment`具有自己布局的类并执行您在此处执行的操作：

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.add(R.id.fragment_content, new BasicFragment(), tag);  //add a tag to a fragment during the transaction so you could easily retrieve it later.
ft.commit(); 
```

当然，您可以通过阅读此页面了解更多关于片段的信息：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# objective-c - 有效地创建嵌套的 for 循环 x 层深

> ID：15866798
> 
> 赞同：3
> 
> 时间：2013-04-07T19:28:39.007
> 
> 标签：objective-c

这可能是一件简单的事情，但我需要创建一个循环结构，使其循环 y^x 次以创建 x 和 y 的所有可能组合。例如，如果有 4 个 x，每个 x 有 2 个 y，我会想做类似的事情：

```
for(int a=0; a < y; a++){
    for(int b=0; b < y; b++){
        for(int c=0; c < y; c++){
            for(int d=0; d < y; d++){
                // create a new object with values of a, b, c, d
            }
        }
    }
} 
```

基本上，创建 x 个嵌套 for 循环以创建总共 y^x 个对象（在本例中为 16 个）。假设 x 和 y 的值可以改变，那么最简单和最有效的方法是什么？我假设递归可能以某种方式涉及，但我不是 100% 确定如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:36:33.593

When you do not know the level of nesting at compile time, you need to use recursion: the function should have a single loop representing `k`-th nesting level, and continue calling itself recursively until the `N`-th level is reached:

```
-(void) nestAtLevel:(int)k withItems:(int[])items from:(int) from to:(int)to {
    if (k >= 0) {
        for (items[k] = from ; items[k] != to ; items[k]++) {
            [self nestAtLevel:k-1 withItems:items from:from to:to];
        }
    } else {
        // Use the indexes produced recursively: the current values are in items 1..N-1
        [self creatObjectsWithIndexes:items];
    }
} 
```

The initial call should look like this:

```
int items[5];
[self nestAtLevel:4 withItems:items from:0 to:4]; 
```

I assume that there is also a function `creatObjectsWithIndexes` that takes an array of index items, and produces an object from them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:33:30.420

执行此操作的标准方法是使用递归。

你将有这样的功能：

```
void foo(int level, const int max_depth) {
    if (level == max_depth) {
         // code from final loop
         return;
    } else {
        for (...) {
            foo(level+1, max_depth);
        }
    }
 } 
```

现在您可以在**max_depth**中传递任意数量的嵌套级别。

# templates - 模板类中的警告 4244（可能丢失数据） - Visual Studio 2010

> ID：15866801
> 
> 赞同：1
> 
> 时间：2013-04-07T19:28:52.640
> 
> 标签：templates, visual-c++, compiler-warnings

我确实有一个小问题，我想解决。

使用类模板，我使用 typeid() 检查数据类型，以便以正确的方式处理它们。

* * *

```
 template <typename _Ty_Id,
            typename _Ty_Value>
  class Attribute : public AttributeBase<_Ty_Id>
  {
    public: 
      Attribute() : 
        AttributeBase(_Ty_Id()),
        m_tyValue(_Ty_Value())
      {
      }

      Attribute(_Ty_Id tyId, _Ty_Value tyValue) : 
        AttributeBase(tyId),
        m_tyValue(tyValue)
      {
      }

      virtual ~Attribute() {};

      virtual  _Ty_Id    getId()    const {return m_tyId;}
      virtual  _Ty_Value getValue() const {return m_tyValue;}

      virtual void toXml(iolib::Xml& xmlFile)
      {
        std::list<std::string> listXmlData;
        std::string strTag;

        if(typeid(m_tyId) == typeid(std::string))
        {
          strTag = m_tyId;
        }
        else
        {
          strTag = core::Stringfunc::format(strTag, m_tyId, 0, 0);
        }

        listXmlData.push_back(strTag);
        listXmlData.push_back("entrytype");
        listXmlData.push_back(m_strEntryType);
        listXmlData.push_back("datatype");
        listXmlData.push_back(m_strDataType);

        std::string strValue;
        if(typeid(m_tyValue) == typeid(std::string))
        {
          #pragma warning(disable : 4244)
          strValue = m_tyValue;
          #pragma warning(default : 4244)
        }
        else if((typeid(m_tyValue) == typeid(float)) || 
                (typeid(m_tyValue) == typeid(double)))
        {
          strValue = core::Stringfunc::format(strValue, m_tyValue, 0, 3);
        }
        else
        {
          strValue = core::Stringfunc::format(strValue, m_tyValue, 0, 0);
        }

        listXmlData.push_back(strValue);
        listXmlData.push_back("/" + strTag);

        xmlFile.addElement(listXmlData);
      }

    private:
      _Ty_Value m_tyValue;
  } 
```

* * *

模板参数是一个浮点值，将在 else if 分支中处理。但是，VS 2010 会带来警告 #4244，即从 float 到 std::string 的隐式转换可能无法正常工作。

到目前为止，我在它发生的地方禁用了该警告，一切都会好起来的。但是，这当然只适用于 VS2012，并且希望将我的代码用于不同的目标。

有谁知道防止警告的更聪明的方法？

* * *

编辑

所以，现在我确实发布了课程的主要部分。

The problem is within the method: toXml(iolib::Xml& xmlFile), with will accept a referenct to my xml class. The used type (m_tyValue) is a member of the Attribute<> class.

The template arguments are: std::string for m_tyId and float for m_tyValue.

Best regards, Coast

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:14:41.333

Note: you should not use names beginning with `__` (double underscore) or with `_` and an uppercase letter. Those are reserved "for the implementation" [global.names] in the C++ Std

To get different behaviour for different types (where you know the type at compile time), you use can use (partial) specialization of the class template:

```
template < typename Ty_Id >
struct toXmlHelper
{}; // provide no default implementation

template < >
struct toXmlHelper < double > // implementation in case Ty_Id == double
{
    void toXml() { /*...*/ }
};

template < >
struct toXmlHelper < std::string > // implementation in case Ty_Id == std::string
{
    void toXml() { /*...*/ }
}; 
```

You might want to add techniques to reduce code redundancy.

Another way would be to use the overloading mechanism:

```
template < typename Ty_Id,
           typename Ty_Value>
class Attribute : public AttributeBase<_Ty_Id>
{
public:
    /* ... */
    virtual void toXml(iolib::Xml& xmlFile)
    {
        std::list<std::string> listXmlData;
        std::string strTag;
        /* ... */
        toXmlHelper(m_tyId);
    }
private:
    void toXmlHelper(double);
    void toXmlHelper(std::string const&);
} 
```

As you know the type of `m_tyId`, there's no reason to use *Run-Time Type Info*. The warning appears as the code (in each if-clase) in compiled for all instantiations of your class template, even if it does not make sense, like assigning a float to a string.

# node.js - 逗号而不是换行表示 nodejs

> ID：15866803
> 
> 赞同：2
> 
> 时间：2013-04-07T19:29:10.867
> 
> 标签：node.js, express

当我使用 express 生成项目时，它会抛出逗号而不是换行符

示例：表达 my_project

在一行中生成它

```
,/**, * Module dependencies., */,,var express = require('express'),  , routes =      require('./routes'),  , user = require('./routes/user'),  , http = require('http'),  , path = require('path');,,var app = express();,, 
```

代替

```
/**
* Module dependencies. 
*/
var express = require('express'),  
routes = require('./routes'), 
user = require('./routes/user'), 
http = require('http'), 
path = require('path');

var app = express(); 
```

express 生成的每个文件都具有相同的格式

我如何防止这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:41:31.130

如果您检查内部[构建文件](https://github.com/visionmedia/express/blob/master/bin/express)，您将拥有：

```
var eol = os.EOL 
```

然后你有：

```
 var app = [
        ''
      , '/**'
      , ' * Module dependencies.'
      , ' */'
      , ''
      , 'var express = require(\'express\')'
      , '  , routes = require(\'./routes\')'
      , '  , user = require(\'./routes/user\')'
        ...
        ...
        ].join(eol); 
```

这就是写入 app.js 的内容。

如果这对您不起作用，请尝试将其替换为 express 以前的内容：

```
var eol = 'win32' == os.platform() ? '\r\n' : '\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T12:00:21.057

我遇到过同样的问题。Express 3.1.0 工作，然后 3.1.1 和每个后续的 Express 版本都被破坏了。

但事实证明，这是 Node.js for Windows 构建中的一个错误，该错误已在最新版本的 Node.js 中得到修复。卸载 Node.js，导航到[http://nodejs.org/](http://nodejs.org/)，然后单击安装以下载最新的安装程序。

# c++ - Qt GUI 应用程序可以在我的 PC 上运行，但不能在其他 PC 上运行？

> ID：15866805
> 
> 赞同：3
> 
> 时间：2013-04-07T19:29:26.927
> 
> 标签：c++, qt

我已经使用独立版本的 Qt (mingw) 构建了我的第一个 c++ GUI 应用程序，并且运行良好。我在另一台计算机上尝试过，它立即因 Visual c++ 运行时库错误而崩溃。

我实际上测试了将整个 bin 文件夹复制到另一台 PC 并从那里运行应用程序，仍然相同。什么可能导致问题？

额外细节：

我安装了 Visual C++ 2010 Redistributable，我也复制了 d3dcompiler_XX.dll。我从 Qt\Qt5.0.1\5.0.1\mingw47_32\bin 得到了所有的 dll。

我没有链接任何东西，而且我对一般链接的经验为零。我阅读了几篇关于此的帖子，但他们没有提供任何解决方案，或者我无法理解的解决方案。调试模式也这样做。在我的 PC 上，它也在 Qt Creator 之外运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:00:11.950

如果您的 Qt-App 是使用 MinGW 动态构建的（即使用动态库），您需要来自 MinGW 的 dll（例如 libgcc_s_sjlj-1.dll、libstdc++-6.dll 等）。在 MinGW 安装目录中找到这些文件。（可能是你的 Qt 安装）

[从在窗口上部署应用程序中](http://qt-project.org/doc/qt-4.8/deployment-windows.html)检查“应用程序依赖项”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:11:27.440

毕竟我无法让 MinGW 版本工作，即使我按照文档逐步部署，但我现在确实有一个工作应用程序。

问题的根源是Qt文件夹中的一些dll注册并且程序到达它们甚至很难它不在同一个文件夹中。我认为与文档中提到的相比，MinGW 版本需要更多的 dll，或者它可能只是我的 PC。

这是我所做的：

**1、**用Visual Studio编译器下载Qt creator，删除除源之外的所有内容并重建项目。

**2，**在项目文件的开头添加了这个：

```
QMAKE_LFAGS += -Wl,--repath=\\\$\$ORIGIN
QMAKE_LFAGS += -Wl,--repath=\\\$\$ORIGIN/lib
QMAKE_LFAGS += -Wl,--repath=\\\$\$ORIGIN/libs
QMAKE_RPATH= 
```

这应该让应用程序在 . , ./lib, ./libs，但我认为它什么也没做，因为应用程序不会在 lib 文件夹中找到它们。

**3，**将这些dll复制到同一个文件夹中：（与文档相同）

```
D3DCompiler_43
icudt49
icuin49
icuuc49
libEGL
libGLESv2
Qt5Core
Qt5Gui
Qt5Widgets
Platforms (folder) containing qminimal and qwindows
msvcr100 and msvcp100 
```

minGW 版本需要 LIBSTDC++-6、LIBGCC_S_DW2-1 和 MINGWM10，但即使有了这些，它对我也不起作用。

**一般提示：**

*   请注意，如果未找到其中之一，mingw 会抛出错误，而 VS 版本什么也不做（立即终止，没有任何消息。）
*   The most comfortable solution of testing the dependences is renaming the Qt folder, so that your app will not find it, this way you don't need a second computer to test it, nor unistalling the app like the documentation suggests.
*   If you still have problems you can solve this the brute force way, like I did, by making a copy of the Qt folder, and deleting the elements one by one in the original one, to see what your program depends on. Unfortunately even the dependency checker does not mention some of them.

I wish you all happy coding, and more successful troubleshooting with this post.

# android - setText 只设置一个editText

> ID：15866806
> 
> 赞同：1
> 
> 时间：2013-04-07T19:29:29.793
> 
> 标签：android, android-intent, android-edittext

我有一个包含 2 个编辑文本的活动。根据打开活动的活动，我使用来自意图或数据库的字符串来设置它们。因此，当我从数据库中填充编辑文本时，一切正常，它们都显示了字符串中的文本，但是当我尝试从意图填充编辑文本时，只有其中一个会填充。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    button = getIntent().getExtras().getInt("button");
    noteId = getIntent().getExtras().getLong("noteId")
    setContentView(R.layout.notebook);
    title = (EditText) findViewById(r.id.etTitle);
    body = (EditText) findViewById(r.id.etBody);
    if (button == 1) {
        name = getIntent().getExtras().getString("name");
        notebody = getIntent().getExtras().getString("body");
        Log.i(tag, "title = " + name + "\nbody = " + notebody);
        body.setText(notebody);
        title.setText(name);
    } else if (button == 2) {
        db.open();
        cursor = db.lookup(noteId);
        db.close();
        name = cursor.getString(1);
        notebody = cursor.getString(2);
        title.setText(name);
        body.setText(notebody);
    } 
```

日志语句用正确的文本显示两个字符串，但它只填充 setText 位于顶部的那个。所以如果我把标题放在正文上方，它会填充标题而不是正文。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/etTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:ems="10"
            android:hint="Note Title" />

        <EditText
            android:id="@+id/etBody"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:ems="10"
            android:inputType="textMultiLine"
            android:hint="Note Body"
            android:gravity="top">
        </EditText>

    </LinearLayout> 
```

任何知道为什么会发生这种情况的人都将不胜感激，因为我只是不明白。

# vb.net - 如何正确计算文件夹中的文件数

> ID：15866808
> 
> 赞同：4
> 
> 时间：2013-04-07T19:29:35.877
> 
> 标签：vb.net, file, count

我正在制作一个文件夹列表，其中每个文件夹只需要几个属性，所以我使用下面的类。但是，无论是哪个文件夹，该`FilesInFolder`属性总是比文件夹中的实际文件数多 5 个。

有人可以帮我找出问题所在吗？谢谢。

```
Public Class Single_Action_Folder

    Public ReadOnly FullName As String = ""
    Public ReadOnly Name As String = ""
    Public ReadOnly FilesInFolder As Integer = 0
    Public ReadOnly Exists As Boolean = False

    '**
    ' Constructor
    '*
    Public Sub New(Optional dir As DirectoryInfo = Nothing)

        ' First check that a directory has been specified
        If dir Is Nothing Then Exit Sub

        ' Populate the class properties
        FullName = dir.FullName
        Name = dir.Name
        FilesInFolder = dir.GetFiles().Count
        Exists = dir.Exists

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T20:20:10.393

所以这里的问题`FilesInFolder = dir.GetFiles().Count`是计算隐藏文件。尽管我已将 Windows 文件夹选项设置为显示隐藏文件/文件夹，但它们并未显示，因为它们就像专辑封面一样。以下行对我的问题进行了排序。

```
FilesInFolder = Directory.GetFiles(FullName, "*.mp3").Count 
```

I am wondering though, if there is a way to count more than one file type? I.e MP3 and WMA? If anyone happens to know, I'd apprciate a comment.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:41:15.263

检查您在测试目录中没有隐藏文件。我在我的电脑上检查了你的代码，它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-09T12:56:15.407

use this code:

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Dim FilesInFolder = Directory.GetFiles("C:\BGS\TemporaryProjects\Images\", "*.mp3").Count
    Dim i As Integer = 1
    While i <= FilesInFolder
        ListBox1.Items.Add(i)
        i += 1
    End While
End Sub 
```

# javascript - websocket连接无效 - Socket.IO

> ID：15866809
> 
> 赞同：1
> 
> 时间：2013-04-07T19:29:36.550
> 
> 标签：javascript, linux, node.js, socket.io

我在我的 Windows 平台上开发了一个使用 socket.io 的 Web 应用程序，它运行良好。但是，一旦我将它移到我的 debian 6 生产专用服务器上，它就会开始删除客户端以显示“警告 - websocket 连接无效”。

此错误发生在服务器上，并在第一次连接建立后 10-20 秒正常下降。

socket.io 在 linux + windows 服务器上以 0.9.11 版本运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:31:07.977

你检查你的端口和连接地址了吗？

尝试更新您的 socket.io！

# matlab - 你能给我一个 comm.FSKModulator 的例子以及它的阶跃函数吗？

> ID：15866814
> 
> 赞同：0
> 
> 时间：2013-04-07T19:30:10.130
> 
> 标签：matlab

你能告诉我如何使用 PSKModulator 的阶跃函数吗？我能够像这样解决 comm.PSKModulator 的使用：

```
>> H=comm.FSKModulator('ModulationOrder',2,'BitInput',false,'SymbolMapping','Binary','FrequencySeparation',10); 
```

但是当我尝试运行以 H 和 X 作为参数的 Step 函数（X 是我想在 H 中编码的数字值）时，我得到一个错误。

```
>> X=[0 1];
>> Y=step(H,X); 
```

错误： **不支持使用 FSKModulator/step 多通道操作时出错。**

我浏览了互联网，但没有太多示例，因为此功能非常新鲜。你知道如何设置吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:48:10.977

该对象将每一列视为不同的通道。您需要将列向量作为输入发送到 step 方法。在您的代码中尝试使用 Y = step(H,X.') 或将 X 更改为 X = [0; 1];.

# c - ac 代码的输出，如引用调用

> ID：15866828
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:30:52.663
> 
> 标签：c, binding, parameter-passing

鉴于此 C 代码：

```
int x=12,y=10;

void tswap(int pa, int pb) {
   int tmp;
   tmp=pa;
   pa=pb;
   pb=tmp;
   x=x+pa;
   x=x-pb;
   y++;
   printf("%d %d %d %d\n",pa,pb,x,y);
}

int main() {
    int a=4;
    tswap(x,a);
    printf("%d %d %d\n",x,y,a);
    return 0;
} 
```

如果 C 使用引用调用，我必须弄清楚它会打印什么。

这是我的期望。
首先
x=12 y=10 和 a=4

```
after tswap(12,4):
pa=x=12 pb=a=4

after tmp=pa:
tmp=pa=x=12
-----------
after pa=pb:
tmp=x=12
pa=pb=a=4
-------------
after pb=tmp:
pb=tmp=x=12
pa=a=4

after x=x+pa
x=16
------------
and after x=x-pb and y++
x=4,y=11 
```

所以我认为x=4，pb=12，pa=4，y=11；但答案是 -4 12 -4 11\. 我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:03:43.280

由于这里没有递归，并且所有变量都有不同的名称，我们可以“欺骗”一点并将局部变量更改为全局变量（因为这不会导致任何名称冲突）：

```
int x=12, y=10; /* original globals */
int tmp;        /* belongs to tswap */
int a;          /* belongs to main */

void tswap(int pa, int pb) {
   tmp=pa;
   pa=pb;
   pb=tmp;
   x=x+pa;
   x=x-pb;
   y++;
   printf("%d %d %d %d\n",pa,pb,x,y);
}

int main() {
    a=4;
    tswap(x,a);
    printf("%d %d %d\n",x,y,a);
    return 0;
} 
```

由于`tswap`只调用一次，我们知道它的`pa`参数*总是*别名为`x`，并且它的`pb`参数*总是*别名为`a`。所以，我们可以去掉参数，用它们别名的变量替换它们：

```
int x=12, y=10;
int tmp;
int a;

void tswap() {
   tmp=x;
   x=a;
   a=tmp;
   x=x+x;
   x=x-a;
   y++;
   printf("%d %d %d %d\n",x,a,x,y);
}

int main() {
    a=4;
    tswap();
    printf("%d %d %d\n",x,y,a);
    return 0;
} 
```

此时，这只是普通的 C 代码；我们不再有任何参数，所以“pass-by-reference”和“pass-by-value”是等价的。追溯：

```
int x=12, y=10;
int tmp;
int a;

void tswap() {
   tmp=x;       /* x=12, y=10, tmp=12, a=4 */
   x=a;         /* x=4, y=10, tmp=12, a=4 */
   a=tmp;       /* x=4, y=10, tmp=12, a=12 */
   x=x+x;       /* x=8, y=10, tmp=12, a=12 */
   x=x-a;       /* x=-4, y=10, tmp=12, a=12 */
   y++;         /* x=-4, y=11, tmp=12, a=12 */
   printf("%d %d %d %d\n",x,a,x,y);    /* prints "-4 12 -4 11" */
}

int main() {
    a=4;        /* x=12, y=10, tmp is uninitialized, a=4 */
    tswap();    /* x=-4, y=11, tmp=12, a=4; prints "-4 12 -4 11" */
    printf("%d %d %d\n",x,y,a); /* prints "-4 11 4" */
    return 0;
} 
```

# jquery - jquery中的多次点击

> ID：15866837
> 
> 赞同：0
> 
> 时间：2013-04-07T19:31:33.417
> 
> 标签：jquery

我正在尝试通过 jquery 模拟消息编写器。例如，在第一次点击按钮 2 时，我需要获得一个“a”，第二次点击“b”，第三次点击获得“c”。我遇到了困难，因为如果我单击 3 次，它会执行所有操作，而不仅仅是打印“c”。谢谢

var 字母 = [];

```
 $('#2').click(function (e) {
        letters.push('a');
        $('#2').click(function (e) {
            letters.push('b');
            $('#2').click(function (e) {
                letters.push('c');
            })
        })
        $('#mytext').append(letters);
    }) 
```

好的，所以如果我在按钮“#2”上单击两次，我会得到 3 个“a”，我只需要得到一个“b”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:55:34.763

将点击次数存储在变量中，并在每次点击时使用计时器运行函数。如果计时器在下次单击之前完成，它将根据变量中的当前数字打印字符，否则它将重置计时器。这是示例代码..

```
var counter=0;
var timerId=null;

$(document).click(function(){
    counter++;
    if (timerId != null)
        clearTimeout(timerId);

    // Executes after 500 milisecond .. You can increase the timer value..
    timerId = setTimeout(checkClickCount, 500);

});

function checkClickCount()
{
    switch(counter)
    {
        case 1:
            alert('a');
            break;
        case 2:
            alert('b');
            break;
        case 3:
            alert('c');
            break;
    }
    counter=0;
} 
```

# python - Sklearn：如何将数据提供给 sklearn RandomForestClassifier

> ID：15866843
> 
> 赞同：4
> 
> 时间：2013-04-07T19:31:58.463
> 
> 标签：python, scikit-learn, random-forest

我有这个数据：

```
print training_data
print labels

# prints

[[1, 0, 1, 1], [1, 1, 1, 1], [1, 0, 1, 1], [1, 1, 1, 0], [1, 1, 0, 1], [1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 0,0], [1, 1, 1, 1], [1, 0, 1, 1]]
['a', 'b', 'a', 'b', 'a', 'b', 'b', 'a', 'a', 'a', 'b'] 
```

我正在尝试将它提供给 sklearn python 库中的 RandomForestClassifier。

```
classifier = RandomForestClassifier(n_estimators=10)
classifier.fit(training_data, labels) 
```

但收到此错误：

```
Traceback (most recent call last):
  File "learn.py", line 52, in <module>
    main()
  File "learn.py", line 48, in main
    classifier = train_classifier()
  File "learn.py", line 33, in train_classifier
    classifier.fit(training_data, labels)
  File "/Library/Python/2.7/site-packages/scikit_learn-0.14_git-py2.7-macosx-10.8-intel.egg/sklearn/ensemble/forest.py", line 348, in fit
    y = np.ascontiguousarray(y, dtype=DOUBLE)
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/core/numeric.py", line 419, in ascontiguousarray
    return array(a, dtype, copy=False, order='C', ndmin=1)
ValueError: could not convert string to float: a 
```

我的猜测是我没有正确格式化这些数据以进行拟合。但我不明白为什么从[文档](http://scikit-learn.org/stable/tutorial/basic/tutorial.html#loading-an-example-dataset)

这似乎是一个非常基本、简单的问题。有人知道答案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T19:44:47.827

尝试使用[LabelEncoder](http://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.LabelEncoder.html)预先转换您的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T16:01:30.667

您可以使用分类器自动识别的 numpy 数组，如下所示：

```
import numpy as np
from sklearn.ensemble import RandomForestClassifier
np_training = np.array(training_data)
np_labels = np.array(labels)

clf = RandomForestClassifier(n_estimators=20, max_depth=5)
clf.fit(np_training, np_labels) 
```

那应该工作

# windows - 设置 VPN 以接受 VMplayer 上的传入连接

> ID：15866845
> 
> 赞同：0
> 
> 时间：2013-04-07T19:32:10.887
> 
> 标签：windows, vmware, vpn

我在 Win8 64 位主机中安装了 VMware player 5.0.2，并以访客身份运行 Win7。

我正在尝试设置 Win7 来宾以接收 VPN 连接 (PPTP)，但它不起作用，VPN 连接请求不断断开。

是否可以在桥接网络上创建 VPN？我的目标是让来宾 Win7 接受传入的 VPN 连接并允许 Win7 来宾通过 VPN 访问外部。有什么线索或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:38:33.237

是的，我们可以在桥接网络上设置 VPN 连接。可以从我的 XP 机器拨号到在 VMWare 上运行的 windows server 2008 上设置的 VPN 服务器。

# excel - Excel：根据单元格值检查时差

> ID：15866849
> 
> 赞同：0
> 
> 时间：2013-04-07T19:32:33.097
> 
> 标签：excel, vba

我在excel中有两列，例如：

```
BoxA1000 | 7/4/2013 15:00:43 - User
BoxA1001 | 7/4/2013 15:01:43 - User
BoxA1002 | 7/4/2013 15:02:43 - User
BoxA1003 | 7/4/2013 15:03:43 - User
BoxA1000 | 7/4/2013 15:04:43 - User 
```

对于每一行，我想查找是否有前一行的第一列单元格包含相同的值（BoxA1000），然后查看第二列单元格的时间差是多少，并将其放在第三列的新单元格中排。

对于上面的示例，我希望结果是

```
BoxA1000 | 7/4/2013 15:00:43 - User | NO previous entry
BoxA1001 | 7/4/2013 15:01:43 - User | NO previous entry
BoxA1002 | 7/4/2013 15:02:43 - User | NO previous entry
BoxA1003 | 7/4/2013 15:03:43 - User | NO previous entry
BoxA1000 | 7/4/2013 15:04:43 - User | 00:04:00 (or) 4 minites (or) something like that 
```

我怎么能用宏来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:35:08.277

附加假设：没有列标题，数据范围连续且开始于`Range("A1")`，任何 A 列条目只有一次可能重复。

```
Sub test_Solution()

Dim arrBox As Variant
    arrBox = Range(Range("A1"), Range("B1").End(xlDown))
Dim boFound As Boolean

Dim i As Long, j As Long
For i = 1 To UBound(arrBox, 1)
    For j = 1 To i
        If arrBox(i, 1) = arrBox(j, 1) And i <> j Then
            'here we found
            Cells(i, 3) = Format(arrBox(j, 2) - arrBox(i, 2), "h:m:s")
            boFound = True
            Exit For
        End If
    Next j
    If Not boFound Then Cells(i, 3) = "No previous entry"
    boFound = False
Next i
End Sub 
```

# javascript - ajax 加载元素的事件处理

> ID：15866853
> 
> 赞同：0
> 
> 时间：2013-04-07T19:32:50.363
> 
> 标签：javascript, ajax, event-handling

我有一些`select`标签，一些是通过 ajax 加载的，我将处理程序绑定到他们`change`在 document 上的事件`ready`，所以通过 ajax 加载的那些会错过注册。

我该怎么办？

我可以像事件发生时那样使用事件传播`click`，我的意思是`change`一个`select`孩子，传播到它的`div`父母吗？

或者

我是否还应该在 ajax 响应中包含一个脚本标记，该标记具有`select`将处理程序绑定到插入文档后的处理程序的元素？

或者

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:47:05.810

您在寻找 jQuery[委托](http://api.jquery.com/delegate/)功能吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:48:16.353

您可以使用 jQuery [on](http://api.jquery.com/on/)或[事件委托](http://brandonaaron.net/blog/2010/03/4/event-delegation-with-jquery)技术。

# popup - Openlayers 中的自定义弹出窗口

> ID：15866859
> 
> 赞同：0
> 
> 时间：2013-04-07T19:33:19.483
> 
> 标签：popup, openlayers

我已经用 openlayer 完成了点图层叠加。每当我单击任何点时，它都会在弹出窗口中向我显示表格的所有数据。如何控制弹出窗口中的数据量？

代码是：

```
....
info = new OpenLayers.Control.WMSGetFeatureInfo({
        url: 'http://localhost:8080/geoserver/layername/wms',  // geoserver point layer 
        title: 'Identify features by clicking',
        queryVisible: true,
        eventListeners: {
            getfeatureinfo: function(event) {
                map.addPopup(new OpenLayers.Popup.FramedCloud(
                    "ABCD", 
                    map.getLonLatFromPixel(event.xy),
                    null,
                    event.text,
                    null,
                    true
                ));
            }
        }
    });
    map.addControl(info);
    info.activate(); 
```

当前弹出的屏幕截图是

( ![弹出](https://i.stack.imgur.com/xRXNn.jpg))

我只想要 location_name 和弹出窗口中的一些 html 内容。怎么做？

# python - matplotlib 自定义标记

> ID：15866862
> 
> 赞同：3
> 
> 时间：2013-04-07T19:33:36.203
> 
> 标签：python, matplotlib

我想要标记，例如带有 +、x 或 . 的空方块，或者内部任何可调节厚度的东西；事实上，就像在 Origin 中一样。它似乎需要定制。

代码示例：

```
import numpy as np
import matplotlib.pyplot as plt

plt.plot(np.arange(10) ** 2,
         'k-',
         marker = 's',
         mfc = 'none',
         lw = 2,
         mew = 2,
         ms = 20)
plt.show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:55:01.797

使用`text`，您可以使用字体中可用的任何字符。不过，您需要自己遍历它们，而且我认为您无法连续控制它们的线宽（当然，如果可用，您可以选择“粗体”等）。

![在此处输入图像描述](https://i.stack.imgur.com/aen7E.png)

```
from numpy import *
import matplotlib.pyplot as plt

symbols = [u'\u2B21', u'\u263A', u'\u29C6', u'\u2B14', u'\u2B1A', u'\u25A6', u'\u229E', u'\u22A0', u'\u22A1', u'\u20DF']

x = arange(10.)
y = arange(10.)

plt.figure()
for i, symbol in enumerate(symbols):
    y2 = y + 4*i
    plt.plot(x, y2, 'g')
    for x0, y0 in zip(x, y2):
        plt.text(x0, y0, symbol, fontname='STIXGeneral', size=30, va='center', ha='center', clip_on=True)

plt.show() 
```

你也可以`plot`直接使用，虽然渲染看起来不太好，而且你对角色没有太多的控制。

```
plt.figure()
for i, symbol in enumerate(symbols):
    y2 = y + 4*i
    plt.plot(x, y2, 'g')
    marker = "$%s$" % symbol
    plt.plot(x, y2, 'k', marker=marker, markersize=30) 
```

![在此处输入图像描述](https://i.stack.imgur.com/MQ7XR.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T19:41:58.470

这是你想要的吗？

![通过重叠绘制自定义标记](https://i.stack.imgur.com/ThxgA.png)

我通过过度绘制来做到这一点：

```
import numpy as np
import matplotlib.pyplot as plt

plt.plot(np.arange(10) ** 2,
         'k-',
         marker = 's',
         mfc = 'none',
         lw = 2,
         mew = 2,
         ms = 20)

plt.plot(np.arange(10) ** 2 + 20,
         'k-',
         marker = '+',
         mfc = 'none',
         lw = 2,
         mew = 2,
         ms = 20)
plt.plot(np.arange(10) ** 2 + 20,
         'k-',
         marker = 's',
         mfc = 'none',
         lw = 2,
         mew = 2,
         ms = 20)
plt.show() 
```

# javascript - Javascript从百分比中减去像素

> ID：15866865
> 
> 赞同：0
> 
> 时间：2013-04-07T19:34:30.727
> 
> 标签：javascript, web, styling, css

我希望使用 JavaScript 在按钮单击时重新设置 div 的样式。我有一切工作，除了一件事。我想做的一件事是将 div 的最大高度从我目前设置的更改为 100% - 12px。我尝试使用 CSS calc() 函数，但它不起作用。最奇怪的是，当我检查开发者控制台是否有错误时，它并没有抛出错误。有谁知道怎么做我要问的？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:39:11.070

我将使用 jQuery 通过向您的按钮添加单击绑定然后获取 .parent() 的高度来解决此问题。我已经在这个小提琴[http://jsfiddle.net/TGyYv/](http://jsfiddle.net/TGyYv/)中证明了这一点。

关键是这段代码。

```
$("#button").click(function () {
    parent_height = $(this).parent().height()
    $(this).height(parent_height - 12)
}) 
```

单击按钮时，它会获取父级的高度，然后将按钮的高度设置为父级的负 12！

# sql - 创建存储过程时遇到问题

> ID：15866868
> 
> 赞同：0
> 
> 时间：2013-04-07T19:34:45.927
> 
> 标签：sql, sql-server

我遇到的问题是创建一个名为的过程`prc_cus_balance_update`，它将发票编号作为参数并更新客户余额（提示您可以使用声明部分定义一个 totinv 编号变量来保存计算出的发票总额）

到目前为止我有

```
ALTER PROCEDURE [dbo].[PRC_CUS_BALANCE_UPDATE]
   (@INVID INT)
AS
   DECLARE @INVTOT INT
   DECLARE @CUSID INT

   BEGIN
     SET NOCOUNT ON;

     SELECT CUS_CODE INTO CUSID
     FROM INVOICE
     WHERE INVOICE.INV_NUMBER = @INVID

     IF CUSID > 0 
        UPDATE CUSTOMER
        SET CUS_BALANCE = CUS_BALANCE +
                          (SELECT INV_TOTAL
                           FROM INVOICE
                           WHERE INV_NUMBER = INVID)
        WHERE CUS_CODE = CUSID
     END IF
   END 
```

但是每次我尝试编译它时，它都会在关键字 END 附近给我一个不正确的语法。我在网上找到了类似的帖子，但我总是以同样的错误告终。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:54:49.113

在您的 SP 似乎是用其中编写的 Transact-SQL 中，其语法[`IF`](http://msdn.microsoft.com/en-us/library/ms182717.aspx "IF...ELSE (Transact-SQL)")如下：

```
IF Boolean_expression 
     { sql_statement | statement_block } 
[ ELSE 
     { sql_statement | statement_block } ] 
```

如您所见，没有关闭`END IF`。因此，一种解决方案是简单地删除`END IF`，在这种情况下，您的`IF`陈述将是

```
IF CUSID > 0 
    UPDATE CUSTOMER
    SET CUS_BALANCE = CUS_BALANCE +
        (SELECT INV_TOTAL
         FROM INVOICE
         WHERE INV_NUMBER = INVID)
    WHERE CUS_CODE = CUSID
; 
```

如果您希望`IF`语句以 结尾`END`，请将正文包含在一个`BEGIN…END`块中：

```
IF CUSID > 0 
BEGIN
    UPDATE CUSTOMER
    SET CUS_BALANCE = CUS_BALANCE +
        (SELECT INV_TOTAL
         FROM INVOICE
         WHERE INV_NUMBER = INVID)
    WHERE CUS_CODE = CUSID;
END; 
```

还有其他问题。似乎对变量的一些引用`@CUSID`并不`@INVTOT`以`@`字符开头。此外，您似乎正在使用`SELECT INTO`为变量赋值。（你是从 MySQL 转换这个 SP 吗？）

要解决这些问题：

1.  在 Transact-SQL 中，变量名称始终以`@`字符开头，无论是在声明中还是在引用中。

2.  要将值分配给变量，请使用以下语法：

    ```
    SELECT @varname = ...
    [ FROM ...
    WHERE ... ] 
    ```

    因此，在您的情况下， SELECT 语句可能应该是这样的：

    ```
    SELECT @CUSID = CUS_CODE
    FROM INVOICE
    WHERE INVOICE.INV_NUMBER = @INVID 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:58:50.543

也许还有其他一些问题：

```
CREATE PROCEDURE [dbo].[PRC_CUS_BALANCE_UPDATE]  --<<<<use CREATE to create !
   (@INVID INT)
AS
   DECLARE @INVTOT INT  --<<<<<<what is the point of this variable as it is not used?
   DECLARE @CUSID INT

   BEGIN
     SET NOCOUNT ON;

     /*<<<<if the following is only testing for the existence within INVOICE table then<<< 
     SELECT CUS_CODE 
     INTO CUSID
     FROM INVOICE
     WHERE INVOICE.INV_NUMBER = @INVID

     IF CUSID > 0 
     <<<<replace with following<<<<<*/
     IF EXISTS (SELECT 1 FROM INVOICE WHERE INVOICE.INV_NUMBER = @INVID)   

        BEGIN  --<<<<<as already mentioned
        UPDATE CUSTOMER
        SET CUS_BALANCE = CUS_BALANCE +
                          (SELECT INV_TOTAL
                           FROM INVOICE
                           WHERE INV_NUMBER = INVID) --<<<is this supposed to be =@INVID ?
        WHERE CUS_CODE = CUSID  --<<<this looks odd as it seems you are trying to say "CUS_CODE = <some table created earlier>" ?
        END;  --<<<<<as already mentioned
     END IF
   END 
```

# matlab - 如何在MATLAB中将信号转换为声音？

> ID：15866870
> 
> 赞同：0
> 
> 时间：2013-04-07T19:34:57.347
> 
> 标签：matlab, signal-processing

我正在尝试制作一个使用[正交幅度调制](http://en.wikipedia.org/wiki/Quadrature_amplitude_modulation)（QAM，函数[qammod](http://www.mathworks.se/help/comm/ref/qammod.html)）转换输入 128 位数据的[MATLAB](http://en.wikipedia.org/wiki/MATLAB)程序：

```
M = 16; 
x = randint( 5000, 1, M);
y = modulate( modem.qammod(M), x); 
```

但是当我尝试使用 sound(y) 命令播放调制信号时，它不允许我这样做。

我试图通过做真正的（y）来使它工作。可以播放，但是数据丢失了。如何在保留数据的同时让人类听到这些数据？

我认为这是可能的，因为在过去人们通过电话线访问互联网，数字数据可以通过电话线转换为声音信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:38:00.613

您可以使用 abs(y)，而不是仅使用带有 real(y) 的同相分量，它给出了同相和正交分量的幅度。

但是，我会为每 16 个符号分配 16 个不同的频率，并执行类似于 FM（频率调制）的操作。

# memory-management - 进程地址空间中的共享代码逻辑地址

> ID：15866874
> 
> 赞同：1
> 
> 时间：2013-04-07T19:35:23.693
> 
> 标签：memory-management, operating-system

在 Silberchatz 的“操作系统概念”一书中，它说

“共享代码必须出现在所有进程的逻辑地址空间中的相同位置”，

为什么它必须出现在同一个位置？我认为对于每个进程我们都有一个单独的页表，这使得在不同的逻辑地址中共享代码地址成为可能！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:32:51.987

机器代码很少完全与位置无关。如果您有一些代码在位于地址 0x10000（逻辑/虚拟）时已编译为可以工作，并且您将其移动到地址 0x70000（逻辑/虚拟），则它将无法在新位置工作。

页表对此无能为力。什么可以是相对于`instruction pointer`（AKA `program counter`）的代码/数据寻址模式。有些 CPU 有它，有些没有，还有一些 CPU 半生不熟（例如，它们只能用于将控制（例如`jump`/ `call`）转移到代码中的其他位置的指令，而对于数据（例如`move`）则没有） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-01T08:38:47.830

库（共享代码）中使用的每个地址（如跳转地址）都固定指向特定的逻辑地址。因此，这些逻辑地址在已导入该库的所有进程中应相同。这意味着您只能将这个库放在完全相同的逻辑地址中，让库找到自己的代码

# windows-7 - 屏幕分辨率降低且无法恢复

> ID：15866877
> 
> 赞同：0
> 
> 时间：2013-04-07T19:36:11.230
> 
> 标签：windows-7, monitor, screen-resolution, vga

我有一台笔记本电脑（Sony Vaio VPCSA9e）（操作系统：Windows 7）和一台显示器（LG W1945S）。我曾经以 1440X900 的屏幕分辨率将显示器连接到我的笔记本电脑，没有任何问题。（我通过 VGA 电缆连接它。）

但是，不知何故，当我现在连接显示器时，屏幕分辨率为 1024X768，我无法更改。我还认识到显示选项选择了“VGA 上的设备”，而不是像以前那样选择 W1945。

网上有一些和我类似的问题，我有：

1) 更新显卡驱动

2) 更新了显示器驱动程序（我确保.ink 文件中的默认屏幕分辨率为 1440X900）

3) 尝试使用另一根 VGA 电缆。

但是，它们都不起作用。你有什么建议吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:50:53.623

好的，我解决了这个问题。正如前面的问题所指出的，这是由于 VGA 电缆造成的。我很不走运，因为我的第二条 VGA 线坏了。宾果排在第三位！

# android - Nexus 的最大堆大小？

> ID：15866879
> 
> 赞同：2
> 
> 时间：2013-04-07T19:36:27.563
> 
> 标签：android, memory-management

我正在使用 Galaxy Nexus(i9250) 进行开发和测试。我注意到一个奇怪的事实——有时当总堆大小为 64mb 并且分配的堆大小在 56-60mb 左右时，应用程序崩溃。但有时我注意到即使内存高达 80mb，应用程序也没有崩溃。

最初我认为范围 nexus 的设备的最大堆大小为 64mb（现在我意识到这是错误的）。所以我的问题是设备可以使用的最大堆大小是多少。如果它是基于设备的变量，那么堆大小取决于什么因素。我知道这是一个常见的问题。谁能引导我找到正确的答案。提前致谢！

注意：我没有`LargeHeapSize = true;` 在我的代码中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-25T14:21:23.833

考虑到，您的应用程序每次出现**“OutOfMemoryError”时都会崩溃**

DVM 首先分配一个小堆，在每个垃圾回收周期后，它会检查空闲堆并将其与总堆内存进行比较，并添加更多内存以防差异太小。因此，可以根据操作系统对 Dalvik VM 的要求在运行时增加或减少堆。

因此，当系统中有足够的可用内存时，您的应用程序不会在内存猛增至 80mb 时崩溃。（假设 64MB 不是堆大小的硬限制）

是的，每个设备的堆大小都有一个硬限制，可以通过使用**"LargeHeapSize = true"**来增加，但这在应用程序性能方面可能过于昂贵，因为增加的堆大小与垃圾所花费的时间成正比收集过程（因为 GC 现在必须遍历更大堆内的更多对象）。所以这是一个很大的“不，不”，除非你确切地知道你要什么以及为什么要使用更大的堆大小。

**堆大小取决于什么因素：**

*   堆大小主要取决于您使用的设备的分辨率，因为更高的分辨率需要更大的图像/位图大小才能适应。（更多像素 = 需要更多内存来合并）

*   虽然，我没有通过任何书面证明。根据我的理解，堆大小还取决于 RAM 大小。因为，更大的
    RAM 大小将允许更多的多任务处理灵活性和更少的
    机会获得**“OutOfMemoryError”**

如果您需要知道可以使用的确切堆内存量，请使用**ActivityManager.getMemoryClass()**。此方法返回一个整数，指示您的应用程序堆可用的兆字节数

**ActivityManager.getLargeMemoryClass()**用于更大的堆大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:03:48.787

目前尚不清楚您到底在说什么设备。也不清楚您是如何计算堆内存的。

[我建议您使用此链接](https://stackoverflow.com/questions/6073744/android-how-to-check-how-much-memory-is-remaining)计算您的堆内存和可用内存

但是，如果您的应用程序使用本机内存，则它们对该[链接](https://stackoverflow.com/questions/9087563/maximum-native-memory-that-can-be-allocated-to-an-android-app)没有任何限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:01:44.997

我只会使用 DDMS 值作为查找内存泄漏和内存分配问题的指南，而不是使用您可以定位的特定数字。任何 Android 应用程序都需要在各种设备上运行，因此虽然您可能已经针对“Galaxy Nexus”调整了应用程序，但您希望能够在旧设备上运行，并进行适当的测试。见@dongshengcn 评论。

除了@minhaz 的链接，我还会阅读：[Understanding Heap Size](https://stackoverflow.com/questions/10677850/android-understanding-heap-sizes)。

如果您想更好地了解 Android 上的内存管理，那么您应该阅读 Android 框架工程师 @hackbod 的回答：[如何在 Android 中发现我的应用程序的内存使用情况](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)。

# mysql - 用于 Web 应用程序的基于云的 Web 服务

> ID：15866883
> 
> 赞同：2
> 
> 时间：2013-04-07T19:37:00.093
> 
> 标签：mysql, sql-server, amazon-web-services, cloud

我的 Web 应用程序在服务器端使用 PHP/MySQL 来获取数据并将其存储在数据库中。数据库大小将随着用户群的增加而增加，并且可能很大。该应用程序已在常规服务器上构建和运行，即没有编写“云”特定代码（我没有云系统经验；在它们上运行服务与在普通服务器上运行有什么不同吗？）

我的担忧：
1\. 如果我在 Amazon Elastic Compute Cloud 上购买空间，我可以直接将我的所有代码移植到新服务器上，还是必须使用一些特定的 API？由于是现收现付，非常适合这种需求。
2\. 托管需要大量服务器空间的 Web 服务的其他选项是什么？像 Whatsapp 这样的应用程序如何做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:57:01.227

1) 第一个问题的答案取决于您购买的服务类型。云有多种形式，从基础设施即服务（基本上为您提供硬件即服务，您可以在其上运行软件堆栈）到软件即服务（例如 Gmail，它允许您使用托管在云 ）。

最好的选择，在您的情况下，我认为它是平台即服务（例如 Heroku），它定义了提供者支持的一组技术以及如何使用它们。

无论哪种情况，难度取决于您的应用程序和服务规范以及提供的支持级别，因此您必须深入挖掘（从如何部署类似应用程序的指南开始将是一个不错的选择）。

2) 初创公司和其他中型公司使用亚马逊、Rackspace 等云服务提供商，当它们达到一定规模时，往往会建立自己的数据中心（例如 Zynga）。管理您自己的基础架构而不是从其他人那里购买服务，有一个阈值。

# facebook - 将大型 AVCHD 视频文件上传到 facebook

> ID：15866886
> 
> 赞同：0
> 
> 时间：2013-04-07T19:37:03.653
> 
> 标签：facebook, video, upload

将约 700MB 的 AVCHD（1080p，50fps）视频文件上传到 facebook 以获得最佳性能的最佳方式是什么？

以常规方式上传会导致视频和音频不同步，并且视频出现“卡顿”......

也许将其转换为某种格式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:41:21.173

用户手刹（[http://handbrake.fr](http://handbrake.fr)）将其转换为 mp4 格式（正常预设）。

# android - AudioRecord 将原始 PCM 数据写入/读取到文件

> ID：15866889
> 
> 赞同：3
> 
> 时间：2013-04-07T19:37:25.147
> 
> 标签：android, audiorecord

```
 File pcmFile = new File(mediaPath, TEMP_PCM_FILE_NAME);

        if (pcmFile.exists())
            pcmFile.delete();

        int total = 0;
        mAudioRecordInstance.startRecording();
        try {

            DataOutputStream pcmDataOutputStream = new DataOutputStream(
                    new BufferedOutputStream(new FileOutputStream(pcmFile)));

            while (isRecording) {
                mAudioRecordInstance.read(mBuffer, 0, mBufferSize);
                for (int i = 0; i < mBuffer.length; i++) {
                    Log.d("Capture", "PCM Write:["+i+"]:" + mBuffer[i]);
                    pcmDataOutputStream.writeShort(mBuffer[i]);
                    total++;
                }
            }
            pcmDataOutputStream.close();
        } catch (IOException e) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    DialogCodes e = DialogCodes.ERROR_CREATING_FILE;
                    showDialog(e.getValue());
                    actionButton.performClick();
                }
            });
            return;
        } catch (OutOfMemoryError om) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    DialogCodes e = DialogCodes.OUT_OF_MEMORY;
                    showDialog(e.getValue());
                    System.gc();
                    actionButton.performClick();
                }
            });
        }

        Log.d("Capture", "Stopping recording!!!");
        mAudioRecordInstance.stop();
        Log.d("Capture", "Processing starts");
        short[] shortBuffer = new short[total];

        try {
            DataInputStream pcmDataInputStream = new DataInputStream(
                    new BufferedInputStream(new FileInputStream(pcmFile)));

            for (int j = 0; pcmDataInputStream.available() > 0; j++) {
                shortBuffer[j] = pcmDataInputStream.readShort();
                Log.d("Capture", "PCM Read:[" + j + "]:" + shortBuffer[j] );
            }
            outStream.write(Utilities.shortToBytes(shortBuffer));
            pcmDataInputStream.close();

        } catch (IOException e) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    DialogCodes e = DialogCodes.ERROR_CREATING_FILE;
                    showDialog(e.getValue());
                    outFile = null;
                    actionButton.performClick();
                }
            });
            return;
        } catch (OutOfMemoryError om) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    DialogCodes e = DialogCodes.OUT_OF_MEMORY;
                    showDialog(e.getValue());
                    System.gc();
                    actionButton.performClick();
                }
            });
        } 
```

我正在尝试将 PCM 数据写入临时文件，以便稍后处理它而不会丢失任何可记录的内容。最初我尝试在同一个录制循环中进行处理，但录制的持续时间与实际持续时间不匹配。现在我想要的是从 PCM 文件中读取 short 并将其写入 WAV 文件（如果此问题得到解决，希望稍后处理短数据）和 header。如果我在 Audacity 中打开文件，它就会变成空的。如果我直接写入 WAV 文件而不是临时 PCM 文件，它工作正常。

Other issue is I am using the handler to run a thread in which I update the duration of recording and update VU meter view. I use mBuffer data to display in VU Meter view and is invalidated every second. No synchronization is used on the data but still it effects the recorded duration. Sometimes it comes out to be thrice the original duration.

Questions are (1) Why reading and writing PCM data to temp file is causing WAV file to be empty? Why reading from the unsynchronized short buffer (member variable) in a thread managed by handler is adding duration to WAV data, this happens when I write recorded buffer to WAV file directly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T10:34:13.673

It was all in the header

[http://gitorious.org/android-eeepc/base/blobs/48276ab989a4d775961ce30a43635a317052672a/core/java/android/speech/srec/WaveHeader.java](http://gitorious.org/android-eeepc/base/blobs/48276ab989a4d775961ce30a43635a317052672a/core/java/android/speech/srec/WaveHeader.java)

Once I fixed that everything was fine.

# c - Malloc Typedef 结构体问题

> ID：15866891
> 
> 赞同：0
> 
> 时间：2013-04-07T19:37:34.267
> 
> 标签：c, struct, malloc

我正在构建一个线程库，由于某种原因遇到了一个我现在无法修复的简单 malloc 问题。我确定这很简单，我只是想念它。

在我的 main.c 中，我有以下代码：

```
//declare testSem
tasem_t testSem;

int main(int argc, char **argv){
    ta_libinit();

    //initialize testSem
    ta_sem_init(&testSem, 5);
    //wait test
    ta_sem_wait(&testSem); 
```

我的线程库中的相关代码如下：

```
void ta_sem_init(tasem_t *sema, int value)
{

    //malloc the semaphore struct
    sema = malloc(sizeof(tasem_t));

    //error check
    if(sema == NULL)
    {
        printf("could not malloc semaphore");
        exit(0);
    }

    //initialize with the given value
    sema->val = value;
    printf("SemaVal = %i\n", sema->val);
}

void ta_sem_wait(tasem_t *sema)
{
    printf("SemaVal = %i\n", sema->val);

    if(sema->val <= 0)
    {
        //not done yet
        printf("SWAPPING\n");
    }
    else
    {
        printf("SemaVal = %i\n", sema->val);
        sema->val = sema->val + 1;
    }
} 
```

这是我的头文件中的结构：

```
//struct to store each semas info
typedef struct tasem_t_struct
{
    //value
    int val;
        //Q* Queue
        //int numThreads

}tasem_t; 
```

我从中得到的输出是：

SemaVal = 5 SemaVal = 0 交换

很明显，我没有正确分配我的结构，因为一旦超出范围，内部的值就会丢失。我知道我一定只是忘记了一些简单的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:42:41.367

You can't seem to decide who's responsible for allocating your `tasem_t` structure. You have a global variable for it and pass its address to `ta_sem_init`. But then you have `ta_sem_init` dynamically allocate a brand new `tasem_t` structure, saving its address to `sema`, a local function argument, so that address gets lost when it falls out of scope.

Pick one, either:

*   Make `ta_sem_init` initialize an *existing* `tasem_t` variable.
*   Make `ta_sem_init` allocate and initialize a *new* `tasem_t` structure and then return its address ([either directly or via a `tasem_t**` output parameter](https://stackoverflow.com/questions/2838038/c-programming-malloc-inside-another-function/2838207#2838207)).

# matlab - 使用预定义的子矩阵行数在 MATLAB 中拆分矩阵

> ID：15866892
> 
> 赞同：1
> 
> 时间：2013-04-07T19:37:38.463
> 
> 标签：matlab, matrix

我有一个矩阵 A

```
 1     1     0     0
 0     1     0     0
 1     0     0     1
 0     0     1     0
 0     0     0     0
 0     1     1     1
 1     1     0     0
 1     0     0     0
 0     0     0     1 
```

我希望根据用户的输入分割这个矩阵说`d = [1 2 3].`

```
for i=2:length(d)
  d(i) = d(i) + d(i-1); % d = [1 3 6]
end 
```

这给了`d = [1 (1+2) (1+2+3)] = d[1 3 6]`. 这个矩阵有 9 行`ceil`，`[(1/6)*9]`计算 `[(3/6)*9]`和`[(6/6)*9]`。因此，这给出了`[2 5 9].`第一次拆分是前两行，第二次拆分是接下来的 (5-2=3) 3 行，第三次拆分是 (9-5=4) 4 行。

输出应该是这样的：

拆分为：第一次拆分->

```
 1     1     0     0    % first 2 rows in matrix A
      0     1     0     0 
```

第二次拆分->

```
 1     0     0     1    % next 3 rows
      0     0     1     0
      0     0     0     0 
```

第三次拆分->

```
 0     1     1     1    % next 4 rows
      1     1     0     0
      1     0     0     0
      0     0     0     1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T20:25:37.867

您可以使用`mat2cell`with input`d = [1 2 3]`将最终拆分存储在单独的单元格数组中

```
B = mat2cell(A, d+1, size(A,2)); 
```

或者，使其适应您对拆分行大小的计算：

```
d = [1 2 3];
c = cumsum(d); % [1, 3, 6]

s = ceil(size(A,1)*c/c(end)); % [2, 5, 9] 
n = [s(1) diff(s)]; % [2, 3, 4]

B = mat2cell(A, n, size(A,2)); 
```

要显示拆分，您可以添加类似于以下内容的命令：

```
cellfun(@disp, B) 
```

# c++ - C ++ fstream多个输入文件

> ID：15866896
> 
> 赞同：2
> 
> 时间：2013-04-07T19:37:45.610
> 
> 标签：c++, file-io, fstream

我正在编写一个简单的程序来接收两个文件。终端命令行如下所示。

```
./fileIO foo.code foo.encode 
```

当它运行时，第二个文件没有读入。当我输入

```
./fileIO foo.code foo.code 
```

有用。我似乎无法弄清楚为什么第二个没有打开。有任何想法吗？谢谢！

```
#include <fstream>
#include <iostream>
#include <queue>
#include <iomanip>
#include <map>
#include <string>
#include <cassert>
using namespace std;

int main( int argc, char *argv[] )
{
  // convert the C-style command line parameter to a C++-style string,
  // so that we can do concatenation on it
  assert( argc == 3 );
  const string code = argv[1];
  const string encode = argv[2];
  string firstTextFile = code;
  string secondTextFile = encode;

  //manipulate the first infile
  ifstream firstFile( firstTextFile.c_str(), ios::in );
  if( !firstFile ) 
  {
    cerr << "Cannot open text file for input" << endl;
    return 1;
  }

  string lineIn;
  string codeSubstring;
  string hexSubstring;
  while( getline( firstFile, lineIn ) ) 
  {
    hexSubstring = lineIn.substr(0, 2);
    codeSubstring = lineIn.substr(4, lineIn.length() );
    cout << hexSubstring << ", " << codeSubstring << endl;
  }

  //manipulate the second infile
  ifstream secondFile( secondTextFile.c_str(), ios::in );
  if( !secondFile ) 
  {
    cerr << "Cannot open text file for input" << endl;
    return 1;
  }

  char characterIn;
  while( secondFile.get( characterIn ) )
  {
    cout << characterIn << endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:25:55.547

您可能想尝试的一件事是在使用完文件后按照标准过程添加 close() 调用。如果在之前的运行中没有正确关闭文件，有时会出现重新打开文件的问题。

```
firstFile.close();
secondFile.close(); 
```

此外，如果有一些挥之不去的文件句柄尚未释放，您可以尝试重新启动计算机。

# jquery - Twitter Bootstrap - 颜色选择器

> ID：15866897
> 
> 赞同：3
> 
> 时间：2013-04-07T19:37:46.203
> 
> 标签：jquery, html, css, twitter-bootstrap

我想在我的网站中集成一个[颜色选择器。](http://www.eyecon.ro/bootstrap-colorpicker/)但是，我集成了：

```
<link href="css/colorpicker.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/jquery.js"></script>
<!--Color Picker -->
<script src="js/bootstrap-colorpicker.js"></script>
 <script>
$(function(){
window.prettyPrint && prettyPrint()
$('#cp1').colorpicker({
format: 'hex'
});
$('#cp2').colorpicker();
$('#cp3').colorpicker();
var bodyStyle = $('body')[0].style;
$('#cp4').colorpicker().on('changeColor', function(ev){
bodyStyle.backgroundColor = ev.color.toHex();
});
});
</script> 
```

和颜色选择器组件：

```
 <div class="control-group">
   <label class="control-label">Pick the color of your product</label>
      <div class="controls">
   <div id="cp3" class="input-append color" data-color-format="rgb" data-color="rgb(255, 146, 180)">
      <input class="span2" type="text" readonly="" value="">
      <span class="add-on">
      <i style="background-color: rgb(255, 146, 180)"></i>
      </span>
   </div>
   </div>
</div> 
```

但是，当我调用我的网站时，颜色选择器看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/SjF1a.png)

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T19:45:59.523

`alpha.png`将,`hue.png`和`saturation.png`的图像路径重置`colorpicker.css`到您存储它们的文件夹中。

```
.colorpicker-hue { background-image: url(your/path/hue.png) }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-03T19:30:36.157

我确实需要为 Twitter Bootstrap 使用颜色选择器，我发现了[jQuery MiniColors：一个基于 jQuery 构建的微型颜色选择器](https://github.com/claviska/jquery-minicolors)。这很好，但我想让我的网络尽可能轻，所以我意识到 HTML5 为我们提供了`type="color"`可能性，因此您可以在*基于引导程序的页面*中使用如下内容：

```
<form class="form-horizontal style-form" method="get">
    <div class="form-group">
        <label class="col-sm-4 control-label">Color de letra</label>
        <div class="col-sm-7 input-group color-picker">
            <input id="textColor" type="color" value="" class="form-control" />
            <span class="input-group-addon"><i></i></span>
        </div>
    </div>
</form> 
```

它将以这种方式工作：

![在此处输入图像描述](https://i.stack.imgur.com/qo9Mi.png)

# ember.js - 在 Ember.js 中将多个模型的对象集合作为模板中的可迭代内容

> ID：15866899
> 
> 赞同：2
> 
> 时间：2013-04-07T19:38:00.580
> 
> 标签：ember.js, ember-data

我正在尝试用 Ember 构建一个博客应用程序。我有不同类型帖子的模型——文章、书签、照片。我想显示用户创建的内容流，为此我需要所有这些模型的对象集合，这些模型按共同属性的降序排列，它们都具有“发布时间”。这该怎么做？

我尝试了类似的东西

```
App.StreamRoute = Ember.Route.extend({
    model: function() {
        stream = App.Post.find();
        stream.addObjects(App.Bookmark.find());
        stream.addObjects(App.Photo.find());
        return stream;
    }
} 
```

资源名称在哪里`stream`

但它不起作用。我正在使用最新发布的 Ember 1.0.0 rc 2 和 handlebars 1.0.0 rc 3 以及 jQuery 1.9.1 和 ember-data。

可能我试图实现这一切的方式是错误的。问题是即使我能够使用多个模型的对象集合在模板中进行迭代，我仍然需要区分每个对象的类型以显示其属性，而不是“发布时间”的公共属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:31:47.277

您可以使用[计算属性](http://emberjs.com/guides/object-model/computed-properties/)来组合各种数组，然后使用 Javascript 的内置[排序](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)功能对组合结果进行排序。

## 组合数组并对它们进行排序

计算属性来组合多个数组：

```
 stream: function() {
    var post = this.get('post'),
        bookmark = this.get('bookmark'),
        photo = this.get('photo');

    var stream = [];

    stream.pushObjects(post);
    stream.pushObjects(bookmark);
    stream.pushObjects(photo);
    return stream;
  }.property('post.@each', 'bookmark.@each', 'photo.@each'), 
```

对包含所有项目的结果计算属性进行排序的示例：

```
 //https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort
  streamSorted: function() {
    var streamCopy = this.get('stream').slice(); // copy so the original doesn't change when sorting
    return streamCopy.sort(function(a,b){
      return a.get('publishtime') - b.get('publishtime');
    });
  }.property('stream.@each.publishtime')
}); 
```

## 根据属性或其类型呈现项目

我知道有两种方法可以做到这一点：

1.  为每个对象添加一个布尔属性并使用把手`{{#if}}`来检查该属性并呈现正确的视图
2.  扩展`Ember.View`并使用计算属性根据正在渲染的对象类型切换渲染哪个模板（基于[使用 Ember.js 按模型类型/对象值选择视图模板](https://stackoverflow.com/questions/9999064/ember-js-select-view-template-by-model-type-object-value)）

### 方法一

JS：

```
App.Post = Ember.Object.extend({
  isPost: true
});

App.Bookmark = Ember.Object.extend({
  isBookmark: true
});

App.Photo = Ember.Object.extend({
  isPhoto: true
}); 
```

模板：

```
<ul>
  {{#each item in controller.stream}}
      {{#if item.isPost}}
        <li>post: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
      {{#if item.isBookmark}}
        <li>bookmark: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
      {{#if item.isPhoto}}
        <li>photo: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
  {{/each}}
   </ul> 
```

### 方法二

JS：

```
App.StreamItemView = Ember.View.extend({
  tagName: "li",
  templateName: function() {
    var content = this.get('content');
    if (content instanceof App.Post) {
      return "StreamItemPost";
    } else if (content instanceof App.Bookmark) {
      return "StreamItemBookmark";
    } else if (content instanceof App.Photo) {
      return "StreamItemPhoto";
    }
  }.property(),

  _templateChanged: function() {
        this.rerender();
    }.observes('templateName')
}) 
```

模板：

```
<ul>
{{#each item in controller.streamSorted}}
    {{view App.StreamItemView contentBinding=item}}
{{/each}}
 </ul> 
```

[JSBin 例子](http://jsbin.com/asimel/3/edit)——未排序的列表用方法一渲染，排序后的列表用方法二渲染

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:35:13.060

它比这有点复杂，但[@twinturbo 的示例](http://jsfiddle.net/twinturbo/JXFT5/3/)很好地展示了如何将单独的模型聚合到单个数组中。

显示聚合数组代理的代码：

```
App.AggregateArrayProxy = Ember.ArrayProxy.extend({
    init: function() {
        this.set('content', Ember.A());
        this.set('map', Ember.Map.create());
    },

    destroy: function() {
        this.get('map').forEach(function(array, proxy) {
            proxy.destroy();
        });

        this.super.apply(this, arguments);
    },

    add: function(array) {
        var aggregate = this;

        var proxy = Ember.ArrayProxy.create({
            content: array,
            contentArrayDidChange: function(array, idx, removedCount, addedCount) { 
                var addedObjects = array.slice(idx, idx + addedCount);

                addedObjects.forEach(function(item) {
                    aggregate.pushObject(item);
                });
            },
            contentArrayWillChange: function(array, idx, removedCount, addedCount) { 
                var removedObjects = array.slice(idx, idx + removedCount);

                removedObjects.forEach(function(item) {
                    aggregate.removeObject(item);
                });
            }
        });

        this.get('map').set(array, proxy);
    },

    remove: function(array) {
        var aggregate = this;

        array.forEach(function(item) {
            aggregate.removeObject(item);
        });

        this.get('map').remove(array);
    }
}); 
```

# asp.net-mvc-4 - Spark View 引擎中的 C# 代码块？

> ID：15866902
> 
> 赞同：2
> 
> 时间：2013-04-07T19:38:21.087
> 
> 标签：asp.net-mvc-4, spark-view-engine

Spark View Engine 可以像 Razor 一样处理 C# 代码块吗？例如，我在 Razor 中有以下内容：

```
@{
   var currentController = ViewContext.RouteData.Values["controller"] as string ?? "Home";
   var currentAction = ViewContext.RouteData.Values["action"] as string ?? "Index";
   var currentPage = (currentController + "-" + currentAction ).ToLower();
} 
```

Spark View Engine 中的等价物是什么？然后我在 Razor 中使用这样的代码，我想在 Spark 中做同样的事情。

```
<li @(currentPage == "home-index" ? "class = current" : "")>
    @Html.ActionLink("Home", "Index", "Home")
</li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:31:58.087

使用`#`表示一行仅是代码，因此：

```
# var currentController = ViewContext.RouteData.Values["controller"] as string ?? "Home";
# var currentAction = ViewContext.RouteData.Values["action"] as string ?? "Index";
# var currentPage = (currentController + "-" + currentAction ).ToLower(); 
```

另外，如果您所做的只是声明变量，则可以改为：

```
<var currentController="ViewContext.RouteData.Values['controller'] as string ?? 'Home'" /> 
```

您的用法如下所示：

```
<li class="current?{currentPage == "home-index"}">
    ${Html.ActionLink("Home", "Index", "Home")}
</li> 
```

# c++ - 从用户输入填充二维数组

> ID：15866904
> 
> 赞同：0
> 
> 时间：2013-04-07T19:38:41.977
> 
> 标签：c++

我有一点问题，我正在编写一个程序来要求用户输入数独网格的数字，然后将它们存储在二维数组中。我知道如何打印出数组以显示数独网格，但是我无法将数组元素设置为用户输入的数字，有人可以帮忙吗？

这就是我所拥有的，我知道的并不多，但我以前只用一维数组做过这个。

代码：

```
#include <iostream>

using namespace std;

void fillGrid1(int grid1, int sizeOfArray) {
    for(int x = 0; x < sizeOfArray; x++) {
        grid1[x][9] = x;
    }
}

int main()
{
    int grid1[9][9];
    fillGrid1(grid1, 9);

    for(int row = 0; row < 9; row++) {
        for(int column = 0; column < 9; column++) {
            cout << grid1[row][column] << " ";
        }

        cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:01:18.483

在这里，您有两个功能，一个是通过获取用户输入以交互方式填充数独漏洞。另一个用于打印数独。根据您提供的少量信息，我认为您所寻求的就是：

```
#include <iostream>
#include <stdio.h>
#include<stdlib.h>

using namespace std;

void interactiveSudokuFill(int grid1[9][9]){

for(int y=0;y<9;y++){
    for(int x=0;x<9;x++){
        string theString;
        cout<<"Write the value to prace in Sudoku["<<y<<"]["<<x<<"] :"<<endl;
        std::getline(cin,theString);
        int nr=atoi(theString.c_str());
        grid1[y][x]=nr;
    }

}
}

void printSudoku(int grid[9][9]){
for(int y=0;y<9;y++){
        for(int x=0;x<9;x++){
            cout<<"["<<grid[y][x]<<"]";
        }
        cout<<endl;

    }
}
int main()
{
int grid1[9][9];
interactiveSudokuFill(grid1);

printSudoku(grid1);
} 
```

There are other more safe/elegant ways of doing this(for example user input should have been checked before delievering it to atoi()), but this way is the simpler I can think of.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:16:52.907

Firstly, you're taking in an int where you expect an array:

```
void fillGrid1(int grid1, int sizeOfArray)
//             ^^^^^^^^^ 
```

This should be something of the form,

```
void fillGrid1(int grid1[9][9], int sizeOfArray) 
```

Next is that you should use a nested loop to access the elements of the multidimensional array:

```
void fillGrid1(int grid1[9][9], int sizeOfArray)
{
    for (int i = 0; i < sizeOfArray; ++i)
    {
        for (int k = 0; k < sizeOfArray; ++k)
        {
            grid1[i][k] = x; // shouldn't x be the number the user entered?
        }
    }
} 
```

You should also zero-fill your array:

```
int grid1[9][9] = {0}; 
```

# php - PHP：在脚本中重新声明 $_GET 和 $_POST

> ID：15866905
> 
> 赞同：0
> 
> 时间：2013-04-07T19:39:08.603
> 
> 标签：php, post, get, variable-assignment

冒着引发自以为是的讨论的风险，我提出以下问题：

在 PHP 脚本中重新声明`$_POST`和`$_GET`变量是否被认为是不好的做法？

IE

```
$_POST['var'] = 'someValue';
$_GET['var'] = ''; 
```

原因是在某些实例上清空变量，从而避免重新加载页面和多次发送标头的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:42:29.407

是的，这是不好的做法。如果您想忽略 $_GET 或 $_POST 变量，您可以通过隐藏输入获得特定值来实现您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:41:05.043

是的，这是不好的做法，因为它改变了其他人对这些变量的期望。

如果你开始做这种事情，调试可能会变得非常糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:43:27.783

`The reason is emptying variables on certain instances and thus avoiding reloading page and risk of sending headers multiple times.`

有一种称为[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)的模式，用于避免在页面重新加载时重新提交数据。

# file - 使用 fseek 读取文件的某个部分

> ID：15866907
> 
> 赞同：0
> 
> 时间：2013-04-07T19:39:16.560
> 
> 标签：file, fseek

我必须读取一个 png 文件（二进制），并且我必须得到图片的高度和宽度（从 17 和长 8 字节开始）。

我试过了

```
FILE* picture = fopen("test.png","rb");
fseek(picture, 16 , SEEK_SET);

int counter = 0;
while(counter < 8){
    fscanf(picture, "%d", temp[counter]);
    counter++;
} 
```

但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:44:48.727

您永远不应该使用文件库读取二进制文件，而应该使用系统调用`read`和`write`.

```
void* buf = malloc(1024);
memset(buf,0,1024);

int picturefd = open("test.png",O_RDONLY);
lseek(picturefd, 16 , SEEK_SET);

if(read(picturefd, buf, 8) < 8){
//failed to read or eof reached
} 
```

请参见[此处](http://www.tutorialspoint.com/unix_system_calls/read.htm)`read`和[此处](http://www.tutorialspoint.com/unix_system_calls/lseek.htm)。_`lseek`

# php - 动态降低图像质量并显示质量较低的版本

> ID：15866911
> 
> 赞同：1
> 
> 时间：2013-04-07T19:40:01.083
> 
> 标签：php, jquery, wordpress

我有一个使用 Wordpress 允许用户提交图像的竞赛网站。有 700 多个条目，每个条目最多 6 个图像，每个图像的最大文件大小为 3mb。

然后我将所有条目列为帖子，然后在每个帖子上显示图像。

每个图像都使用`the_field('image1');`、`the_field('image2');`等显示`the_field('image3');`。

我遇到的问题是该页面尝试以 3mb 的速度加载 6 张图像。有没有办法即时优化图像并以 50% 的质量显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T14:39:54.090

您可以在从数据库（或文件）中提取图片后即时调整图片大小，而无需创建另一个临时文件。大概你有一个从数据库中获取图像的 URL。

```
$pdo = new PDO("somewhere");
$sql = "SELECT image_data FROM pictures WHERE id=1";

$stmt = $pdo->query( $sql );
$obj = $stmt->fetch(PDO::FETCH_OBJ);

$img = imagecreatefromstring($obj->image_data);

header('Content-Type: image/jpeg');
imagejpeg($img, NULL, 50);

imagedestroy($img); 
```

If you pass NULL as a file name to `imagejpeg` it will write the jpeg to standard out. The 3rd parameter is the quality level, in this case 50%.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:17:58.353

图片上传后，可以保存2张图片。1.原始图像 2.图像的低分辨率副本

因此，当用户查看页面时，最初会显示低分辨率图像，而在后台下载原始图像。

你可以很容易地找到一些现成的代码来通过 php 调整图像大小。像这个。 [http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-02T12:22:21.263

```
$file =  $_GET['file'];//URL with img parameter http://localhost/fk/test.php?file=1.jpeg
$quality = 40; //Change What quality you needed
$location = "images/".$file;
$image = imagecreatefromjpeg($file);
imagejpeg($image, $location, $quality) ;
header('Content-Type: image/jpeg');
    header('Content-Length: ' . filesize($location));
    header('Content-Disposition: inline; filename="'.$file.'"');
    echo file_get_contents($location); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-07T19:47:21.657

无法即时调整图像大小。对于这种拒绝服务的自我攻击，只有直接的方法可以让 CPU 窒息。

上传后，图像必须预先调整到合理的大小和质量。世界上的每个网站都是这样做的。

# ios - ipad 应用程序不会填满屏幕底部

> ID：15866912
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:40:03.183
> 
> 标签：ios, ipad

我有一个 ipad 应用程序，它总是在 ipad 屏幕底部显示一个白色边框，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/aWL7Q.png)

问题出在视网膜/非视网膜模拟器和 ipad 中。

该应用程序只是一个未设置为任何特殊尺寸的 uiView。有没有人暗示可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:09:08.267

尝试将视图控制器的 WantsFullScreenLayout 属性设置为 yes。

```
[myViewController setWantsFullScreenLayout:YES]; 
```

# php - curl php bash 标志

> ID：15866926
> 
> 赞同：0
> 
> 时间：2013-04-07T19:41:08.447
> 
> 标签：php, curl, call, special-characters

我有一个代码，需要帮助。我有一个带有这样的 bash 标志的 curl 电话

[http://example.com.ua/script.php](http://example.com.ua/script.php)

客户使用脚本向我发送数据，但有些客户向我发送 bash #，我需要将所有数据保存到我的数据库中。当我得到时，`$_SERVER`我看不到所有数据如何获取所有数据？例如：

我有

[http://example.com.ua/script.php#code1234](http://example.com.ua/script.php#code1234)

我需要保存：

example.com.ua/script.php#code1234

但我明白了

example.com.ua/script.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:42:58.283

PHP 无权访问位置哈希，句号。

您只能访问 PHP 中的查询字符串，如果您需要获取哈希，则必须使用 javascript 来获取它，并使用 ajax 将其发送到您的 PHP 脚本。

# neo4j - Neo4J - 简单的“追随者”图

> ID：15866930
> 
> 赞同：1
> 
> 时间：2013-04-07T19:41:16.370
> 
> 标签：neo4j, py2neo

我正在尝试使用 Neo4J 和 Python 创建一个简单的 Twitter 式“关注者/朋友”图。该图看起来像

```
user_1 FOLLOWS user_2
user_1 FOLLOWS user_3
user_2 FOLLOWS user_1 
```

经过一天的阅读，我认为最好直接使用 REST 接口，因为我使用的是 Python，py2neo。这是我的代码：

```
from py2neo import neo4j

def main():
    g = neo4j.GraphDatabaseService()

    # Create an index for our user nodes
    index = g.get_or_create_index(neo4j.Node, "user")

    # Create a single node, User 1
    node = index.get_or_create("user", "User_1", {"id": "User_1"})

    # Populate the graph with some more users just for testing
    nodes = []
    for user in ["User_2", "User_3", "User_4", "User_5"]:
        nodes.append( index.get_or_create("user", user, {"id":user}) )

    # Create a relationship between User_1 and User_2
    g.get_or_create_relationships( (node, "FOLLOWS", nodes[0]) )

if __name__ == '__main__':
    main() 
```

如您所见，我使用 get_or_create_relationships 来防止重复关系，并且在添加数千个节点时，我假设这会产生某种开销。

每次运行脚本时，直接使用 "node.create_relationship_to(nodes[0], "FOLLOWERS")" 似乎都会创建重复的关系，这对于图形数据库新手来说有点让我困惑，因为关系完全相同。

创建重复关系的可能性非常低，但如果发生这种情况，这会导致图遍历出现问题吗？我应该用某种独特的功能来索引我的 FOLLOWS 索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:41:00.287

`CREATE UNIQUE`如果不存在，我将使用cypher 仅创建 FOLLOWs 关系，请参阅[http://docs.neo4j.org/chunked/milestone/query-create-unique.html](http://docs.neo4j.org/chunked/milestone/query-create-unique.html)

那行得通吗？

# opencl - 为什么首选工作组大小是内核属性的多个部分？

> ID：15866935
> 
> 赞同：2
> 
> 时间：2013-04-07T19:41:24.493
> 
> 标签：opencl, gpgpu

据我了解，首选工作组大小大致取决于计算设备的 SIMD 宽度（对于 NVidia，这是 Warp 大小，在 AMD 上是 Wavefront）。

从逻辑上讲，这会导致人们假设首选的工作组大小是设备相关的，而不是内核相关的。但是，要查询此属性，必须使用 CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE 相对于特定内核来完成。选择一个不是底层硬件设备 SIMD 宽度倍数的值不会完全加载硬件，从而导致性能降低，并且应该与正在执行的内核无关。

我的问题是为什么不是这样？当然，这个设计决定并不是完全武断的。是否存在一些底层实现限制，或者是否存在此属性真的应该是内核属性的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:26:36.623

从逻辑上讲，您所说的是正确的，这里您只考虑 SIMD 实现的数据并行性，SIMD 的值也会因不同的数据类型而变化，一种用于 char，另一种用于 double 而且您忘记了所有工作项通过本地内存共享工作组中的内存资源。本地内存不一定是底层硬件SIMD能力的倍数，底层硬件有多个本地内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:39:33.440

在阅读了 OpenCL 1.2 规范的第 6.7.2 节后，我发现允许内核提供编译器属性，这些属性使用`__attribute__`关键字指定所需或推荐的工作大小提示。仅当首选工作组大小倍数是内核属性与设备属性时，才能将此属性传递给主机。

理论上最好的工作组大小选择可能是特定于设备的属性，但它不一定最适合特定内核，或者根本不适合。例如，最有效的可能是多个`2*CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE`或所有的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-05T07:05:25.777

首选的工作组大小倍数 (PWGSM) 是内核，而不是设备属性，以说明矢量化。

假设硬件有 16 个宽 SIMD 单元。那么一个全标量内核的 PWGSM 可能为 16，假设编译器设法进行全自动矢量化；类似地，对于在编译器周围使用 float4s 的内核，仍然能够找到将工作项合并为 4 个组的方法，并推荐 PWGSM 为 4。

*In practice* the only compilers that do automatic vectorization (that I know of) are Intel's proprietary ICD, and the open source pocl. Everything else always just returns 1 (if on CPU) or the wavefront/warp width (on GPU).

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-08T10:27:16.560

GPU 确实有许多处理器，它们确实有一个应该计算的任务/作业队列。

我们将等待执行的任务称为等待执行的任务，因为它们被 RAM 访问阻塞或未在“飞行中”执行。

要回答您的问题，运行中的任务数量必须足够高，以补偿访问显卡 RAM 所带来的等待延迟。

**参考：** [线程 1](http://www.linkedin.com/groups/Why-Nvidia-Tesla-K10-kepler-1729897.S.157348743)

# javascript - 对调用 JQuery 自定义函数感到困惑

> ID：15866936
> 
> 赞同：0
> 
> 时间：2013-04-07T19:41:27.973
> 
> 标签：javascript, jquery, jquery-ui

我有这样的html

```
<span rel='comm' val='12'>click</span>
<span rel='comm' val='82'>click</span> 
```

我正在使用 JQuery 来执行此操作

```
$('span[rel*=comm]').cust(); 
```

并且自定义功能就是这样

```
$.fn.cust = function () {

    $(this).click(function(e) {
        alert($(this).val());
    });
} 
```

即使我单击第二个跨度，它的值也是 12，这应该给我 82

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:44:44.650

您需要为集合中的每个元素返回一个单独的函数，通常使用`return this.each ...`

```
$.fn.cust = function () {
   return this.each(function() {
      $(this).click(function(e){
          alert($(this).val());
       });
   });
} 
```

并且`value`不是`span`元素的有效属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:49:19.563

该调用为与选择器匹配的所有跨度`$('span[rel*=comm]')`返回一个**JQuery 包装**器 - 您在示例中拥有的两个都被选中。

现在在 , 的定义`cust`中指`$(this)`的是包装的数组，这会导致您的问题。利用

```
$(this).each( function() { 
     $(this).click (...
}); 
```

Inisde`each` `$(this)`将指向选择中的每个单独的 span 元素，因此它们将`click`单独附加处理程序并按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:50:22.237

您可以通过以下方式实现您正在寻找的东西：

HTML：

```
<span rel='comm' val='12'>click</span>
<span rel='comm' val='82'>click</span> 
```

JS：

```
var cust = function(source) {
  alert($(source).attr('val'));
}

$('span[rel*=comm]').click(function(e) {
 cust(this);
}); 
```

JSFiddle 工作：http: [//jsfiddle.net/ejquB/](http://jsfiddle.net/ejquB/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T19:46:01.707

这应该会更好：

```
$.fn.cust = function () {
    $(this).click(function (e) {
        alert($(this).attr('val'));
    });
} 
```

span 没有*价值*。

[http://jsfiddle.net/dREj6/](http://jsfiddle.net/dREj6/)

此外，如果您想让您的方法可链接，您应该返回一个 jQuery 实例：

```
$.fn.cust = function () {
    return $(this).click(function (e) {
        alert($(this).attr('val'));
    });
}

$('span[rel*=comm]').cust().css('color', 'red'); 
```

[http://jsfiddle.net/dREj6/1/](http://jsfiddle.net/dREj6/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T19:46:11.083

*   `rel`用于链接（锚元素） - 使用`class`
*   使用`data`属性而不是自定义属性

[http://jsbin.com/ogenev/1/edit](http://jsbin.com/ogenev/1/edit)

```
<span class='comm' data-val='12'>click</span>
<span class='comm' data-val='82'>click</span> 
```

```
$.fn.cust = function(){

   $(this).click(function(){
      alert(this.dataset.val);
   });

};

$('.comm').cust(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T19:46:36.900

如果你使用它会起作用`.attr('val')`

```
$.fn.cust = function () {

    $(this).click(function(e){
      alert($(this).attr('val'));
    });
}
$('span[rel*=comm]').cust(); 
```

[http://jsfiddle.net/fW7FT/](http://jsfiddle.net/fW7FT/)

`.val()`是`input`因为他们是唯一接受*官方*`val`属性的人

# bash - 只从 zip 文件流中获取第一个文件名？

> ID：15866939
> 
> 赞同：1
> 
> 时间：2013-04-07T19:41:44.073
> 
> 标签：bash, header, zip

我只想从远程 zip 存档中提取第一个文件名，而不下载整个 zip。特别是，我正在尝试获取[dartium (link to zip file)](https://storage.googleapis.com/dartium-archive/continuous/dartium-lucid64.zip)的内部版本号。由于文件很大，我不想下载整个文件。

如果我下载整个内容，`unzip -l`则报告第一个文件为：`0 2013-04-07 12:18 dartium-lucid64-inc-21033.0/`. 我只想得到这个文件名，这样我就可以把这`21033`部分解析为内部版本号。

我正在这样做（完全破解）：

```
_url="https://storage.googleapis.com/dartium-archive/continuous/dartium-lucid64.zip"
curl -s $_url | head -c 256 | sed -n "s:.*dartium-lucid64-inc-\([0-9]\+\).*:\1:p" 
```

当我的 shell 处于 ASCII 模式时它正在工作，但我最近将它切换到 UTF-8 并且似乎 sed 现在正在尊重它，这破坏了我的脚本。

我想通过这样做来破解它：

```
export LANG=
curl -s ... 
```

但这似乎是一个更大的黑客攻击。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:34:58.480

首先，您可以使用 curl 设置字节范围。

接下来，使用“字符串”从二进制流中提取所有字符串。

在“p”之后添加“q”以在仅找到第一次出现后退出。

```
curl -s $_url -r0-256 | strings | sed -n "s:.*dartium-lucid64-inc-\([0-9]\+\).*:\1:p;q" 
```

或这个：

```
curl -s $_url -r0-256 | strings | sed -n "/dartium-lucid64/{s:.*-\([^-]\+\)\/.*:\1:p;q}" 
```

它必须更快，更可靠。它还提取完整版本，包括颠覆（如果需要）。

# android - 绘制文本（open gl es, android）

> ID：15866943
> 
> 赞同：2
> 
> 时间：2013-04-07T19:42:15.660
> 
> 标签：android, text, opengl-es

我是在 android 中打开 gl 的新手，我需要在我的 GLSurfaceView 中绘制一些文本。我只找到了一种解决方案 - 使用文本创建位图并将其显示为纹理（例如，像这样；[http](http://giantandroid.blogspot.ru/2011/03/draw-text-in-opengl-es.html) ://giantandroid.blogspot.ru/2011/03/draw-text-in-opengl-es.html ）。我试图这样做，但它对我不起作用。这段代码中的纹理数组是什么？有没有更简单的方法来显示文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:22:13.577

openGL 本身并没有提供任何“更简单”的方式来呈现文本——它甚至不“知道”字形在位图或轮廓字体集中的表示方式。

使用其他库“知道”如何处理不同的字体集以及如何将它们光栅化以直接让它们绘制到 openGL 纹理中似乎并不复杂，以至于任何其他方法都可能声称要容易得多。

您可能想看看这两个（请参阅：[在 OpenGL ES 中绘制文本](https://stackoverflow.com/questions/1339136/draw-text-in-opengl-es-android)）文章here on stackoverflow 以及链接页面，以了解可用于选择最适合您的方法的其他方法的概述。

关于您链接的代码示例中关于纹理**数组**的第二个问题，该数组仅用于满足调用的 API 要求，`glGenTextures()`因为它需要一个数组作为第二个参数。

事实上，这一行只分配了一个纹理 ID：

```
gl.glGenTextures(1, textures, 0); 
```

看一下规范（参见：[http](http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/jb/jsr239/javax/microedition/khronos/opengles/GL10.html) ://docs.oracle.com/javame/config/cldc/opt-pkgs/api/jb/jsr239/javax/microedition/khronos/opengles/GL10.html ）事实证明在纹理数组的索引 0 处仅分配了一个纹理 ID。

## 那么为什么是一个（伪）数组呢？

java方法看似复杂的签名

```
public void glGenTextures(int n, int[] textures, int offset) 
```

是因为 java 中没有指针，而被包装的 C 函数需要一个指针作为它的第二个参数：

```
void glGenTextures(GLsizei n, GLuint *textures); 
```

与在 C 代码中分配单个纹理一样，可以通过以下方式完成：

```
 GLuint texture_id;
  glGenTextures (1, &texture_id); 
```

不需要仅返回单个纹理 id 的特殊函数，因此只有一个`glGenTextures()`函数可用。

为了允许可以使用指针算术完成的分配，例如：

```
 GLuint textures[10];
  glGenTextures (3, textures + 5); 
```

在 C 中，java 包装器允许第三个参数指定分配纹理 id 的起始索引。

java中相应的方法调用如下所示：

```
 int[] textures = new int[10];
   glGenTextures (3, textures, 5); 
```

因此，Java 包装器中多了一个参数，并且即使只需要一个 id，也需要使用数组。

# sql - sql按升序排列，有些值不是升序

> ID：15866944
> 
> 赞同：-1
> 
> 时间：2013-04-07T19:42:16.483
> 
> 标签：sql, oracle, sql-order-by

我有一个 SQL 语句，通过 id 以升序对表进行排序，但是当我这样做时，表显示如下：

```
c-10
c-12
c-12
c-24
c-5
c-6
c-80
c-800
c-8000 
```

这表明前几个和后几个是按顺序排列的，而其他部分则不是。为什么是这样？正如我尝试按表中的其他字段排序并且它们看起来很好，它只是这一列。您认为这可能是输入错误还是其他原因？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:51:09.267

顺序没问题，sql按词法顺序对字符串进行排序。

因为 2（在 c-24 中）在 5（在 c-5 中）之前，所以它是这样排序的。

如果您想按数字顺序对这样的字符串进行排序，请在它们前面加上零。

c-0010 c-0012 c-0012 c-0024 c-0005 c-0006 c-0080 c-0800 c-8000 将根据您的需要进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:54:09.447

```
select column
from your_table
order by to_number(regexp_substr(column, '\d+')) 
```

[小提琴](http://www.sqlfiddle.com/#!4/967a4/3)

# c++ - 关于如何解决此错误的任何想法？

> ID：15866949
> 
> 赞同：1
> 
> 时间：2013-04-07T19:42:38.757
> 
> 标签：c++, unix, compiler-errors

当我尝试在 Unix 服务器上编译我的 C++ 代码时，我不断收到异常，但这些行只有：

```
#ifndef WEIGHTED_GRAPH_H
#endif 
```

错误是：

```
In file included from Weighted_graph_tester.h:17,
                     from Weighted_graph_driver.cpp:18:
    Weighted_graph.h:1: error: stray â\357â in program
    Weighted_graph.h:1: error: stray â\273â in program
    Weighted_graph.h:1: error: stray â\277â in program
    Weighted_graph.h:1: error: stray â#â in program
    In file included from Weighted_graph_tester.h:17,
                     from Weighted_graph_driver.cpp:18:
    Weighted_graph.h:172:2: error: #endif without #if
    Weighted_graph.h:1: error: âifndefâ does not name a type 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T19:45:17.170

它告诉您文件中有以下字节：

```
Oct: 357 273 277
Hex: EF  BB  BF 
```

这些是 UTF-8 编码文件中的[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)。显然，您的编译器不支持开头带有字节顺序标记的 UTF-8 源文件。事实上，在 UTF-8 文件中使用字节顺序标记甚至没有意义，因为任何单个单元的大小都只有一个字节。您应该确保在没有它的情况下保存文件。

来自 Unicode 标准：

> Use of a BOM is neither required nor recommended for UTF-8, but may be encountered in contexts where UTF-8 data is converted from other encoding forms that use a BOM or where the BOM is used as a UTF-8 signature.

# php - 如何使用 Jquery、PHP 和 MySQL 在一个页面上使用两种不同的表单

> ID：15866950
> 
> 赞同：0
> 
> 时间：2013-04-07T19:42:40.617
> 
> 标签：php, jquery, forms, twitter-bootstrap

我有一个显示许多记录的 PHP 页面。

在页面上，我有两个提交按钮：一个用于下一页，一个（在引导模式中）用于将数据导出到另一个数据库。

下一页的 HTML 是：

```
<form method="post" action="mypage.php" />
Jump to Page:
<select name="page"">
<option value="1" selected>1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
<input type="submit" value="Go" />
</form> 
```

这是（引导）模式中代码的一部分：

```
<div class="modal-body">
<form data-async data-target="#modal" action="import.php" method="POST">
<div id="modal" class="alert alert-success" style="font-size:13px;">Please enter the requested data!</div>
<div class="tabbable">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#pane1" data-toggle="tab" style="font-size:13px;">Project</a></li>
    <li><a href="#pane2" data-toggle="tab" style="font-size:13px;">Summary</a></li>
    <li><a href="#pane3" data-toggle="tab" style="font-size:13px;">Personal</a></li>
    <li><a href="#pane4" data-toggle="tab" style="font-size:13px;">Details</a></li>
    <li><a href="#pane5" data-toggle="tab" style="font-size:13px;">Notification</a></li>
  </ul>
  <div class="tab-content">
   <div id="pane1" class="tab-pane active">
        <input type="hidden" name="ticketId" id="ticketId" value=""/>
    <p>Please select the project you want to file the report under.</p>

       <select style="width:350px;" class="chzn-select" name="project">
        <option value=""></option>
        <option>Project 1</option>
            <option selected>Project 2</option>
            <option>Project 3</option>
            <option>Project 4</option>
           </select>
       <p class="note">Note: You can change this later.</p>

[... content skipped ...]

  </div><!-- /.tab-content -->

</div><!-- /.tabbable -->
</div>
<div class="modal-footer">
    <input type="submit" class="btn btn-primary" value="Create Report" />
    <a href="#" class="btn" data-dismiss="modal">Close</a>
</div>
</div>
</form> 
```

在模态窗口页面的标题中，我有这个 javascript：

```
<script>
jQuery(function($) {
$('body').on('submit','form[data-async]', function(event) {
        alert('submit Event');
        var $form = $(this);
        var $target = $($form.attr('data-target'));
        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),

            success: function(data, status) {
                $target.html(data);
            }
        });
        event.preventDefault();
        $('#addBookDialog').delay(2000).fadeOut('slow');
        location.reload(true);
    });
});
</script> 
```

顺便说一句，下一页是用简单的 PHP 调用的，它查询数据库中的新记录。

问题是这样的：当我单击模式中的提交按钮时，数据会使用 import.php 导出到另一个数据库。伟大的。但是当我使用第一个按钮（下一页或另一个）时，请求也会发送到 import.php，而它应该只显示另一个页面。

所以我的问题是：如何使用 Jquery 函数从模式窗口导出信息，以及第一个（页面）提交按钮如何只调用下一页或其他页面。

如果您有任何问题，请告诉我。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:02:00.567

如果您不想提交表单，为什么要使用提交转到下一页？要调用下一页，请使用简单链接。

# vba - Excel VBA：创建一个嵌入了excel文件的word文档

> ID：15866952
> 
> 赞同：0
> 
> 时间：2013-04-07T19:42:47.187
> 
> 标签：vba, excel, ms-word

我目前正在使用基本宏来使用输入到 Excel 表中的表单信息创建格式化的 Word 文档。

但是，我还想使用相同的宏创建一个新的 excel 工作表，并将该工作表嵌入到 word 文档中（不是作为表格，而是作为文件）。

如果有人可以解释应该采取的一般方法，我可能会弄清楚。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:10:29.160

基于 Word 宏记录器，您可以将 Excel 文件插入 Word 文档，如下所示：

```
Selection.InlineShapes.AddOLEObject ClassType:="Excel.Sheet.12", _ 
    FileName:="C:\Users\Your Name\Documents\Albums.xlsx", _
    LinkToFile:=True, DisplayAsIcon:=True, _
    IconFileName:="C:\Windows\Installer\{90140000-003D-0000-0000-0000000FF1CE}\xlicons.exe", _
    IconIndex:=1, IconLabel:="Albums.xlsx" 
```

# mysql - 使用 Webmin 查看或编辑 MySQL 触发器

> ID：15866958
> 
> 赞同：0
> 
> 时间：2013-04-07T19:43:20.707
> 
> 标签：mysql, webmin

我正在使用 Webmin 1.470。

我可以使用它查看或编辑 MySQL 触发器吗？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:05:50.007

不，据我所知。使用 shell 或安装 phpmyadmin 代替。

# ruby-on-rails - 路由到不同的页面而不是在链接中显示以销毁

> ID：15866962
> 
> 赞同：0
> 
> 时间：2013-04-07T19:44:06.747
> 
> 标签：ruby-on-rails

在索引视图（任务的附件列表）中，我有一个链接来销毁（删除）记录（附件）。删除后它会自动转到 /attachments（显示）页面。我希望它只刷新 link_to 代码所在的页面。

这是索引视图中的代码：

```
 <td><%= link_to 'Delete', attachment, confirm: 'Are you sure?', method: :delete, :class => 'btn btn-mini btn-danger' %></td> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:55:02.537

在您的附件控制器中尝试：

```
 def destroy
    @attachment = Attachment.find(params[:id])
    @attachment.destroy

    respond_to do |format|
      format.html { redirect_to current_page_path }
    end
  end 
```

将您当前的页面路径替换为我放置**current_page_path** ...

# r - 如何计算两个向量一起增加或减少的次数的百分比

> ID：15866963
> 
> 赞同：1
> 
> 时间：2013-04-07T19:44:10.497
> 
> 标签：r

我想编写一个函数来比较 R 中两个向量的增量。这些函数返回两个向量一起增加或减少的次数的百分比。

我编写了以下函数，并使用向量对其进行了测试：

```
x=c(1,3,5,6,7)
y=c(1,5,6,8,7) 
```

结果应该是 0.75 但是当我打电话时`correl(x,y)`出现错误

```
Error in if ...missing value where TRUE/FALSE needed 
```

有什么帮助吗？

```
correl<-function(x,y){ 
  count = c()
  for (i in 1:length(x))
    if((((y[i+1]-y[i]) > 0) && ((x[i+1]-x[i]) > 0)) || (((y[i+1]-y[i]) < 0) && ((x[i+1]-x[i]) < 0))) 
      count <- union(count, c(i))
  print(length(count) / length(x)-1)
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T19:49:30.687

我宁愿对函数进行矢量化，例如这样：

```
diffx <- diff(x)
diffy <- diff(y)
sum(sign(diffx)==sign(diffy)) / length(diffx) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:51:15.650

你的`for`循环结束于`length(x)`，然后你有`y[i+1]`which 不包含值。您应该在`length(x-1)`.

# c# - 如何按需访问数千张图像而不会出现内存溢出

> ID：15866970
> 
> 赞同：2
> 
> 时间：2013-04-07T19:44:47.770
> 
> 标签：c#, winforms, visual-studio, memory-management, out-of-memory

我从数据库下载了大约 5,000 张图像，它们都代表目录中的某个对象。
目录显示在 ListView ( *Telerik* ) 中，但我希望图像显示在每个 listview 项目旁边。

显然，有这么多图像，如果我将它们放入内存中，我肯定会耗尽内存，我什至不会尝试。

**我的问题是：我** *可以通过什么其他方式实现此功能？*

用户可以随意滚动浏览所有项目。我想我可以在列表视图中实现页面并在页面更改时加载，但让我们把它作为最后的手段。

**环境：** Win 7 64bit Visual Studio 2010 pro C# Telerik WinForms

***编辑 1*** 我被要求提供我希望它看起来如何的图像。这是一个很好的例子。就像这个图像我将能够将视图状态更改为详细信息视图或图标视图等。就像 Windows 资源管理器一样。你可以在这里找到图片：http: [//imgur.com/huEw4B6](http://imgur.com/huEw4B6)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:20:13.770

你必须实现分页，没有别的办法。您可以使用：

*   *Next* , *Previous* , *Page N*模式。这适用于关系数据库
*   *获得更多*。这适用于`Count`操作成本高昂的 NoSQL 数据库

从可用性的角度来看，没有人真正需要一次 5000 个项目。这就是人们发明搜索的原因。从内存管理中，您只能存储内存允许的数量。当然，交换和内存分页有一些技巧，但这并不能很好地扩展。

如果您关心实时搜索，它会变得更加复杂。

### 共同点

任何搜索都可以快速进行，因为数据是索引的，或者换句话说是排序的。如果数据已排序，则可以使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)，这是一种`O(Log(N))`操作。

### 客户端搜索

如果您有 5000 个项目，例如在客户端将城市作为字符串，则可以在本地缓存该数据，对其进行一次排序，然后运行快速搜索查询。

您还可以发明对图像标签的搜索并将图像标签/描述存储在内存中。

This approach is limited to small data. When you hit the limit, there is no way to scale it and you must run a search query on the server

### Server side search

When you cannot use client side filtering, do it on the server. This will vastly depend on your engine. A relational database would offer an indexed column, full-text search index and similar. A NoSQL database would offer indexes (as well), secondary indexes, wide rows, full text search fields and similar.

You can ask another question including the stack you using. I would advice to stop using client side search and look for scalable server side option, as it will work on 1 MB, 1 GB, 1 TB and even on 1PB scale (though with a lot more efforts).

# javascript - YouTube API 播放列表随机播放不起作用？

> ID：15866979
> 
> 赞同：4
> 
> 时间：2013-04-07T19:45:45.243
> 
> 标签：javascript, youtube-api

我一直在尝试设置我的 youtube api 来随机播放我的播放列表，但顺序始终相同......

这是我从 [https://developers.google.com/youtube/iframe_api_reference#setShuffle获取代码的链接](https://developers.google.com/youtube/iframe_api_reference#setShuffle)

我说的对吗？

这是我下面的代码

```
<div id="player"></div>

<script>

  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      events: {
        'onReady': onPlayerReady
      }

    });
  }

  function onPlayerReady(event) {
    player.loadPlaylist({'listType': 'playlist', 'list': 'PLF776D41D8211F340','index': '0','startSeconds': '0','suggestedQuality': 'hd720'});
    player.setShuffle({'shufflePlaylist' : 1});

  }

</script> 
```

我尝试将 shufflePlaylist 设置为“true”，我尝试过 cueplaylist 而不是 loadplaylist，我什至尝试将 shufflePlaylist 放入加载播放列表中......没有任何东西被洗牌。

我对此进行了调查，发现这是 API 的问题，但那是 2 年前的事了，有没有解决这个问题的方法？

以下是我尝试过但没有奏效的方法

```
player.setShuffle(1);
        player.setShuffle('1');
        player.setShuffle(true);
        player.setShuffle('true');
        player.setShuffle({'shufflePlaylist' : true});
        player.setShuffle({'shufflePlaylist' : 1});
        player.setShuffle({'shufflePlaylist' : 'true'});
        player.setShuffle({'shufflePlaylist' : '1'}); 
```

I have also tried copying and example from here....[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

The Shuffle works here after u load the playlist and click a button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T23:51:36.140

This is a known bug that is yet to be fixed - see this [post](https://stackoverflow.com/questions/12916017/youtube-api-setshuffle-dont-work)

A work around however is to pass a random number to `playVideoAt`, as follows:

```
var getRandom = function(min, max) {
  return Math.random() * (max - min) + min;
};

var playRandomTrack = function() {
  num = getRandom(0, 99);
  player.playVideoAt(num);  
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T16:26:08.313

I found the solution. You have to load the `player.setShuffle(true)` just after the first video starts:

```
 function onPlayerReady(event) {
    event.target.playVideo();
    setTimeout(setShuffleFunction, 1000);           
  }
  function setShuffleFunction(){
    player.setShuffle(true);
  } 
```

Demo on my [online music tv website](http://vimutv.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T17:20:02.563

More or less the same solution as Ivan's. Works for me!

```
function onPlayerReady(event) {
    event.target.mute();
    setTimeout( function() { 
        event.target.setShuffle(true); 
        event.target.setLoop(true);
    }, 2000);
} 
```

If you launch it directly, it will definitely not work (I have noticed, to my frustration).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T14:01:35.203

Try the following:

```
function onPlayerStateChange(event) {
    if(event.data === 0) {
        player.setShuffle(true);
        player.playVideo();
    }
} 
```

# asp.net-mvc - ASP.NET MVC：如何在编辑操作中验证实体所有权？

> ID：15866986
> 
> 赞同：0
> 
> 时间：2013-04-07T19:46:24.060
> 
> 标签：asp.net-mvc, attributes

在 ASP.NET MVC 应用程序中，我想验证实体所有权的编辑操作（已经在获取）。我已经实现了自定义 IPrincipal，所以我有实际的用户 ID，但是如何将它与实体属性进行比较？

我看到的唯一方法是加载实体并进行比较，这会在每个操作方法中产生一堆 if 条件。

理想的是一些属性，但在属性内部我只有实体 ID，而不是实体本身，你不能将任何对象（实体和存储库）传递给属性。

你如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:25:44.723

我通过EntityBase实现接口IOwnedEntity（具有两个属性：Id和OwnerId）的扩展方法解决了这个问题。
在此扩展方法中，我将 IOwnedEntity.OwnerId 与实际用户 ID（从 cookie 获取）进行比较，如果不相等，则抛出我自己的类型化异常（NotAuthorizedException）。

# mysql - 在 mysql 中创建触发器时的语法错误

> ID：15866987
> 
> 赞同：1
> 
> 时间：2013-04-07T19:46:36.617
> 
> 标签：mysql, triggers

m 编写以下几行来创建触发器：

```
create trigger notify after insert on applications
for each row
begin
insert into notifications SET sno=1;
end; 
```

但每次我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法

第 4 行是 -`insert into notifications SET sno=1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:54:28.630

MySQL 对分隔符感到困惑。它认为第一个`;`是`TRIGGER`声明的结束（它不是）。用于`delimiter`暂时更改它，稍后再将其更改回来：

```
delimiter |
create trigger notify after insert on applications
for each row
begin
insert into notifications (sno) values (1);
end;
|
delimiter ; 
```

更多在[文档](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)中。

# java - 使用反射时的 Java NoSuchFieldError

> ID：15866993
> 
> 赞同：1
> 
> 时间：2013-04-07T19:47:25.027
> 
> 标签：java, reflection, field, final

我正在尝试修改我在 ClassA 中创建的 public static final String[] 字段，然后在 ClassB 中使用反射对其进行修改。但是我得到一个 NoSuchFieldException。

```
java.lang.NoSuchFieldException: test
at java.lang.Class.getField(Unknown Source)
at packageA.ClassA.<init>(ClassA.java:17) 
```

`ClassA`位于`packageA`并且`ClassB`位于`packageB`如果重要的话。

`Class A`，创建字段并调用`ClassB`：

```
package packageA;

import packageB.ClassB;

public class ClassA {
    // Create final String[]
    public static final String[] test = new String[] {"Test1", "Test2", "Test3"};

    public ClassA() {
        // Output array content before change
        for (int i = 0; i < test.length; i++) {
            System.out.println(test[i]);
        }

        // Change array content
        try {
            new ClassB(String[].class.getField("test"), new String[] {"Change1", "Change2", "Change3"});
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Output array content after change
        for (int i = 0; i < test.length; i++) {
            System.out.println(test[i]);
        } 
    }
} 
```

B 类，修改“测试”数组：

```
package packageB;

import java.lang.reflect.Field;
import java.lang.reflect.Modifier;

public class ClassB {

    public ClassB(Field field, Object newValue) {
        try {
            field.setAccessible(true);

            Field modifiersField = Field.class.getDeclaredField("modifiers");
            modifiersField.setAccessible(true);
            modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);

            field.set(null, newValue);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

注意：我从[这里](https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection)得到了 ClassB ，我也看到了[这篇](https://stackoverflow.com/questions/2026369/java-lang-nosuchfieldexception-when-using-reflection)文章，但我找不到任何有用的东西。

根据我从[该](https://stackoverflow.com/questions/2026369/java-lang-nosuchfieldexception-when-using-reflection)主题中收集到的信息，我认为异常意味着它不知道 ClassB 中的“测试”是什么，并且我没有在 ClassB 中对其进行初始化，但我无法真正弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:51:23.350

`String[].class.getField("test")` throws a `NoSuchFieldException` because this field does not exist in `String[]`, it exists in `packageA.ClassA`.

`ClassA.class.getField("test")` will return the correct field access.

# sql - 从表 SQL 中选择多个不同的行

> ID：15866994
> 
> 赞同：0
> 
> 时间：2013-04-07T19:47:25.417
> 
> 标签：sql, sql-server-2008, select, greatest-n-per-group

我正在尝试从我的数据库中的表中选择不同的（最后更新的）行。我正在尝试获取每个“子部分”的最后更新行。但是我找不到实现这一目标的方法。

该表如下所示：

```
ID    | Name   |LastUpdated                  | Section    | Sub    |

1     | Name1  | 2013-04-07 16:38:18.837     | 1          | 1      |
2     | Name2  | 2013-04-07 15:38:18.837     | 1          | 2      |
3     | Name3  | 2013-04-07 12:38:18.837     | 1          | 1      |
4     | Name4  | 2013-04-07 13:38:18.837     | 1          | 3      |
5     | Name5  | 2013-04-07 17:38:18.837     | 1          | 3      | 
```

我试图让我的 SQL 语句做的是返回行：

1、2 和 5。

它们对于 Sub 和最新的是不同的。

我试过了：

```
SELECT DISTINCT Sub, LastUpdated, Name 
FROM TABLE 
WHERE LastUpdated = (SELECT MAX(LastUpdated) FROM TABLE WHERE Section = 1) 
```

它只返回最近更新的行的不同行。这是有道理的。

我已经用谷歌搜索了我正在尝试的内容，并在这里查看了相关帖子。但是没有设法找到一个真正回答我正在尝试的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:49:51.010

您可以使用`row_number()`窗口函数为具有相同 Sub 值的行的每个分区分配编号。使用`order by LastUpdated desc`，第 1 行将是最新行：

```
select  *
from    (
        select  row_number() over (
                    partition by Sub 
                    order by LastUpdated desc) as rn
        ,       *
        from    YourTable
        ) as SubQueryAlias
where   rn = 1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T19:51:41.983

使用 group by 还不够吗？

```
SELECT DISTINCT MIN(Sub), MAX(LastUpdated), MIN(NAME) FROM TABLE GROUP BY Sub Where Section = 1 
```

# responsive-design - 破碎的响应图像

> ID：15866996
> 
> 赞同：1
> 
> 时间：2013-04-07T19:47:33.123
> 
> 标签：responsive-design

我一定错过了一些简单的东西。在编辑一个普通的 Wordpress 模板时，我决定在标题中添加一个背景图像。我需要使用响应式设计来缩放图像，所以我将最大宽度设置为 100%，将高度设置为自动.. 没有任何显示。如果我将背景设置为与图像原始尺寸 (700 x 220) 匹配的固定尺寸，那么一切都很好，除非我缩小网站或在移动设备上查看。请帮忙！作为参考，该站点是 portlandtoraleigh.com 谢谢！

CSS：

```
.left-header{
background: url(images/headerimage.png) no-repeat;
max-width: 100%;
height: auto; 
```

}

HTML：

```
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />

<title><?php wp_title( '&mdash;', true, 'right' ); ?></title>

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />

<?php wp_head(); ?>
</head>

<body <?php body_class(); ?>>
<div id="page" class="hfeed site">
<?php do_action( 'before' ); ?>
    <div class="left-header">
    </div>

    <div id="comeon">
    <nav class="site-navigation main-navigation" role="navigation">
    <h1 class="assistive-text"><?php _e( 'Menu', 'semprul' ); ?></h1>
    <div class="assistive-text skip-link"><a href="#content" title="<?php
            esc_attr_e( 'Skip to content', 'semprul' ); ?>"><?php _e( 'Skip to content',
            'semprul' ); ?></a></div>

    <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
    </nav><!-- .site-navigation .main-navigation -->
    </div>
</header><!-- #masthead .site-header -->
<div class="clear"></div>

<div id="main" class="site-main"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:49:46.927

简单的！CSS

```
background-size:contain; 
```

希望我有帮助:)

**编辑：**您可以选择使用：

```
background-position: center center; 
```

将背景图像水平和垂直居中。

附带说明，如果您的图像未显示，请尝试在括号之间添加引号；所以：

```
url('pathtoimage/image.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:19:44.243

It seems that you are doing this the more difficult method. Try this:

```
<img class="left-header" src="filepath/image.png" /> 
```

then

```
.left-header {
    width:100%;
    max-width:100%;
    height:auto
} 
```