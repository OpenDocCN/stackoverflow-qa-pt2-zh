# StackOverflow 问答 15399000-15399999

# php - 是否可以将 PHP 要求链接在一起？

> ID：15399000
> 
> 赞同：0
> 
> 时间：2013-03-14T00:19:35.383
> 
> 标签：php, include, require

我要做的是为我的网站设置一个开发子域。

结构本质上是这样的：

```
/vitals.php <-- Contains the actual info (passwords, db info, etc...)
/public_html/vitals.php <-- contains only require("../vitals.php")
/public_html/index.php
/public_html/dev/index.php 
```

public_html 中的索引文件有`require("../vitals.php")`. 我希望能够`dev/index.php`通过在公共 html 中添加额外的 vitals.php 来在文件中使用同一行，而公共 html 又将包含`vital.php`public_html 的外部。

问题是……它不起作用。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:24:20.850

活动目录不会因为您包含一个文件而改变。就个人而言，我喜欢以 开始我的代码`chdir($_SERVER['DOCUMENT_ROOT'])`，因为这将允许我以相同的方式包含文件，无论我在哪个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:27:33.977

`require`, `include`, 和小伙伴们，先看当前[工作目录](https://en.wikipedia.org/wiki/Working_directory)，再看脚本文件所在目录。工作目录最初将是访问页面的目录。它在包含的文件中不会有所不同，因此它只会尝试再次包含相同的文件，而不是设法爬上树。

更好的方法可能是直接跳转到根目录：

```
require $_SERVER['DOCUMENT_ROOT'] . '/vitals.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:24:16.947

您对 require 的相对路径有疑问。只需使用绝对路径，无论它是否在您的 dev 子目录中，require 都将起作用。

IE

```
require('/path/to/vitals.php'); 
```

# javascript - Javascript幻灯片卡住了

> ID：15399002
> 
> 赞同：3
> 
> 时间：2013-03-14T00:19:43.497
> 
> 标签：javascript, jquery, html, css, jsfiddle

我正在用 Javascript 制作幻灯片，但它卡在了第二张图片上。如果您需要更多信息，请告诉我并发布。我真的需要这个修复。

[http://jsfiddle.net/QURLC/1/](http://jsfiddle.net/QURLC/1/)

Javascript：

```
function slideShow() {
      var showing = $('#slideshow a');
      var next = showing.next().length ? showing.next() : showing.parent().children(':first');
      var timer;

    showing.fadeOut(500, function() { next.fadeIn(200).addClass('show'); }).removeClass('show');

    setTimeout(slideShow, 3500);  
}
$(document).ready(function(){
    slideShow();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:24:25.683

这是更新和工作[演示](http://jsfiddle.net/QURLC/4/)

```
function slideShow() {

      var showing = $('#slideshow a.show');
      var next = showing.next().length ? showing.next() : showing.parent().children(':first');
      var timer;

      showing.fadeOut(500, function() { next.fadeIn(200).addClass('show'); }).removeClass('show');

      setTimeout(slideShow, 3500);

    } 
```

# c - C 标准库中 assert.h 中的 assert() 是否支持某种失败的断言处理程序？

> ID：15399013
> 
> 赞同：0
> 
> 时间：2013-03-14T00:20:39.000
> 
> 标签：c, assert, libc

通常，当您调用`assert(foo())`并且断言失败时，程序会自动中止。有没有办法添加某种处理程序，可以在退出之前清理一些资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:22:46.007

您可以处理`SIGABRT`信号并进行清洁。当然 assert 只是为了调试应用程序，所以最好只是修复导致失败的问题，而不是编写代码优雅地失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:24:48.230

断言的全部意义在于转储`__FILE__`和`__LINE__`信息并立即调用 abort()。如果您不想这样做，请使用清理处理程序滚动您自己的错误检查，或者按照另一个答案中的建议执行并捕获 abort() 本身。对于您的具体问题， assert 只是一个宏，因此您不能直接挂钩。有关章节，请参见 ISO C99, 7.2.1, p2。

# python - 当我要求 32 倍时，为什么 easy_install 安装 64 倍

> ID：15399014
> 
> 赞同：0
> 
> 时间：2013-03-14T00:21:02.347
> 
> 标签：python, heroku, virtualenv, psycopg2

它是否试图“有帮助”？

我正在运行 win 8 64x。我需要安装 psycopg 32x。我使用[heroku指南中所述的命令](https://devcenter.heroku.com/articles/psycopg2-windows)

```
easy_install http://www.stickpeople.com/projects/python/win-psycopg/2.4.6/psycopg2-2.4.6.win32-py2.7-pg9.2.2-release.exe 
```

然后我看到它安装

```
Installed \venv\lib\site-packages\psycopg2-2.4.6-py2.7-win-amd64.egg 
```

这是 64x 版本，而不是我需要的 32x。

后来我得到错误

```
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

我在想也许 psycopg 的 windows 32x 安装程序被标记为错误的，但这不太可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:35:05.043

您应该使用`easy_install`由 32 位版本的 cpython 安装的那个。（easy_install 不仅可以使用 32 位和 64 位版本的 cpython，还可以使用其他 python 实现，例如 pypy ..）

```
curl -O http://python-distribute.org/distribute_setup.py
python distribute_setup.py <= change this line to make use of 32bit version of cpython 
```

# android - 存储变量的正确方法是什么，以便在活动发生变化时保留该值？

> ID：15399020
> 
> 赞同：2
> 
> 时间：2013-03-14T00:21:36.157
> 
> 标签：android, variables

我想弄清楚如何在某个地方存储变量，所以当我切换到另一个活动然后再返回时，变量仍然包含这个值。不久前我使用共享首选项进行了此操作，但这是一个糟糕的解决方案，这比我需要的更持久，而且不是正确的方法。

如果在活动一中按下某个按钮，这将通过意图打开活动二并将值设置为活动二中的字符串。当转到另一个活动，或按下后退按钮，然后返回活动二时，字符串被重置回其初始值。

我试过了：

共享首选项（有效但不好）静态变量（似乎没有任何区别，也许我做错了什么）使用保存的实例状态和恢复状态方法，如下所示：

```
 @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
     savedInstanceState.putString(destination, des);
        super.onSaveInstanceState(savedInstanceState);
    }

 @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        des = savedInstanceState.getString(destination);
    } 
```

我承认我不知道如何做到这一点，而科学怪人代码一起给我带来的问题比其他任何事情都多，但到目前为止还没有出现干草叉。

为了在活动之间的字符串中保存一个值，您有经验的程序员推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:24:39.553

您可以将其作为`extra`使用传递`Intent`

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("key", value); // where key is whatever you want to name it 
                              //and will be used to retrieve it in the next 
                              //activity and value is the actual value of your string
startActivity(intent); 
```

然后在您的第二个活动中获取价值

```
Intent curIntent = getIntent();
String variableName = curIntent.getStringExtra("key"); 
```

[意图](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:12:29.593

另一种选择是用一个新的类来扩展 Activity，比如 SuperActivity。然后，在每个后续活动类中，扩展 SuperActivity 类。将您希望全局访问的项目放在 SuperActivity 类中。

请记住，这将使用每个新 Activity 构建 SuperActivity 类 - 因此需要初始化动态变量。但是，静态变量将在实现之间进行维护。

对于它的价值，我不会用它来替换通过意图传递的数据。通过这样做，每个活动都包含在 SuperActivity 中的每个变量。因此，除非您的所有（或几乎所有）活动都需要该变量，否则最好通过意图传递它。

# c - GTK+ C 编译错误 Visual Studio 2012

> ID：15399023
> 
> 赞同：0
> 
> 时间：2013-03-14T00:21:52.733
> 
> 标签：c, user-interface, visual-studio-2012, gtk

我正在尝试在 VS2012 中编译一个简单的 GTK+ C 程序。在让 GTK+ 在 VS2012 中工作后，我决定尝试一个简单的程序，看看它是否能正确编译和运行。我遇到了一些编译错误，我确信可以解决我只是不知道如何解决它们。这是我的来源：

```
#include <gtk/gtk.h>

static void destroy(GtkWidget *widget, gpointer data) 
{ 
    gtk_main_quit(); 
} 

int main(int argc, char *argv[]) 
{ 
    gtk_init(&argc, &argv); 
    GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL); 
    gtk_window_set_title(GTK_WINDOW(window), "Window"); 
    g_signal_connect(window, "destroy", G_CALLBACK(destroy), NULL); 
    gtk_widget_show_all(window); 
    gtk_main(); 
    return 0; 
} 
```

这些是我得到的错误：

```
+-------+---+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------+----+---+------------------+
| Error | 1 | error C2275: 'GtkWidget' : illegal use of this type as an expression | c:\users\pr0d1gy\documents\visual studio 2012\projects\cassemblyexample\cassemblyexample\source.c | 10 | 1 | CAssemblyExample |
| Error | 2 | error C2065: 'window' : undeclared identifier                        | c:\users\pr0d1gy\documents\visual studio 2012\projects\cassemblyexample\cassemblyexample\source.c | 10 | 1 | CAssemblyExample |
| Error | 3 | error C2065: 'window' : undeclared identifier                        | c:\users\pr0d1gy\documents\visual studio 2012\projects\cassemblyexample\cassemblyexample\source.c | 11 | 1 | CAssemblyExample |
| Error | 4 | error C2065: 'window' : undeclared identifier                        | c:\users\pr0d1gy\documents\visual studio 2012\projects\cassemblyexample\cassemblyexample\source.c | 12 | 1 | CAssemblyExample |
| Error | 6 | error C2065: 'window' : undeclared identifier                        | c:\users\pr0d1gy\documents\visual studio 2012\projects\cassemblyexample\cassemblyexample\source.c | 13 | 1 | CAssemblyExample |
+-------+---+----------------------------------------------------------------------+---------------------------------------------------------------------------------------------------+----+---+------------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:44:51.783

由于您使用的是`C`编译模式，因此应在函数的第一个可执行语句之前声明变量。因此，在上面的代码片段中，`GtkWidget *window`应该在代码的第一个可执行语句之前声明，即`gtk_init(&argc, &argv);`

# python - `is` 运算符是否在 Python 中使用 __magic__ 方法？

> ID：15399024
> 
> 赞同：18
> 
> 时间：2013-03-14T00:21:54.930
> 
> 标签：python, operators

[is](http://docs.python.org/2/reference/expressions.html#is)运算符用于身份测试。

我想知道`is`操作符和`id()`函数是否调用任何`__magic__`方法，`==`调用的方式是`__eq__`.

我有一些有趣的检查`__hash__`：

```
class Foo(object):
    def __hash__(self):
        return random.randint(0, 2 ** 32)

a = Foo()
b = {}
for i in range(5000):
    b[a] = i 
```

想想 dict`b`和`b[a]`

> 的每个后续查找`d[a]`都是一个`KeyError`或一个随机整数。

但正如[关于特殊方法的文档](http://docs.python.org/2/reference/datamodel.html#specialnames)所述

> [ ] x*的默认实现。*`__hash__`() 返回 id(x)。

所以两者之间存在*关系*，但恰恰相反。

我在这里看到了很多问题，[答案](https://stackoverflow.com/q/13650293/383793)`is`帮助[了](https://stackoverflow.com/a/2038341/383793)许多[困惑](https://stackoverflow.com/q/13062135/383793)的人，但我找不到这个问题的答案。`id`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T00:24:20.827

不，`is`是直接的指针比较，`id`只是将对象的地址返回到 a `long`。

来自[`ceval.c`](http://hg.python.org/cpython/file/bd8afb90ebf2/Python/ceval.c#l4423)：

```
case PyCmp_IS:
    res = (v == w);
    break;
case PyCmp_IS_NOT:
    res = (v != w);
    break; 
```

`v`这里`w`很简单`PyObject *`。

来自[`bltinmodule.c`](http://hg.python.org/cpython/file/bd8afb90ebf2/Python/bltinmodule.c#l962)：

```
static PyObject *
builtin_id(PyObject *self, PyObject *v)
{
    return PyLong_FromVoidPtr(v);
}

PyDoc_STRVAR(id_doc,
"id(object) -> integer\n\
\n\
Return the identity of an object. This is guaranteed to be unique among\n\
simultaneously existing objects. (Hint: it's the object's memory address.)"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-14T00:27:08.413

简短的回答是：不，他们没有。正如您链接的文档所说：

> 对象身份的运算符`is`和测试：当且仅当和是同一个对象时为真。`is not``x is y``x``y`

作为“同一个对象”是不允许你覆盖的。如果你的对象与另一个对象不同，它就不能假装是。

* * *

所以为什么？让您覆盖`is`和/或有什么害处`id`？显然，这样做几乎总是一件愚蠢的事情，但如果你足够努力，Python 会让你做很多愚蠢的事情。

设计FAQ和类似文件没有说。但我怀疑这主要是因为它使调试 Python 和一些更深层次的标准库模块变得更容易，因为知道有某种方法可以从解释器中验证两个名称是否确实引用了同一个对象，或者打印出来以`id`确保名称没有随着时间的推移而改变，等等。想象一下调试`weakref`，甚至`pickle`没有它。

* * *

那么，“同一个对象”究竟是什么意思呢？好吧，这取决于口译员。显然，在语言级别上区分同一对象的两个实例是不可能的，并且可能在解释器级别也是如此（特别是因为有一个定义明确的 API 可以插入到大多数解释器实现中）。

所有主要的实现都通过在较低级别遵循身份概念来处理这个问题。CPython 比较`PyObject*`指针的值，Jython 标识比较 Java 引用，PyPy`is`对对象空间对象进行比较……</p>

值得一看[PyPy 源代码](https://bitbucket.org/pypy/pypy/src/ca87ef6535e0/pypy/interpreter/baseobjspace.py?at=pytest-update#cl-648)，它要求“`x is y`当`x`且`y`是同一个对象”在两个方向上都为真。顶级表达式`x is y`为真当且仅当，无论对象`wx`和`wy`在适当的对象空间中是什么，都`wy.is_(wx)`为真，并且`is_`实现为`wy is wx`. 因此，`x is y`在 N 级当且仅当`y is x`在 N-1 级。

* * *

请注意，这意味着您可以很容易地使用 PyPy 构建`is` *可以*被覆盖的 Python 方言，只需附加到更高级别`is_`的 dunder 方法即可。`__is__`但是有一种更简单的方法可以做同样的事情：

```
def is_(x, y):
    if hasattr(x, '__is__'):
        return x.__is__(y)
    elif hasattr(y, '__is__'):
        return y.__is__(x)
    else:
        return x is y 
```

现在玩一下`is_(x, y)`而不是`x is y`，看看你是否能在修改解释器的艰苦工作之前找到任何有趣的麻烦（即使在这种情况下并不那么难）。

* * *

那么，`is`有什么关系`id`呢？可以在——例如，只是检查`is`之上实现吗？嗯，：`id``x is y``id(x) == id(y)`[`id`](http://docs.python.org/3/library/functions.html#id)

> 返回对象的“身份”。这是一个整数，保证该对象在其生命周期内是唯一且恒定的。具有不重叠生命周期的两个对象可能具有相同的`id()`值。

因此，`id`对象的 是唯一且在其生命周期内是恒定的，并且`x is y`当它们是同一个对象时为真，因此当当且当时`x is y`为真`id(x) == id(y)`，对吗？

好吧，`id`可以反弹到任何你想要的，并且不允许影响`is`。如果您非常仔细地制定了定义（请记住，如果您放弃对 的`builtins`引用`id`，那么曾经存在的任何实现甚至都不能保证不再存在，或者如果确实存在则可以正常工作......），您*可以*`is`在顶部定义的默认实现`id`。

但这将是一件奇怪的事情。在 CPython 中，`id(x)`只是“返回内存中对象的地址”，这与指向内存中对象的指针的值相同。但这只是 CPython 的产物；没有什么说其他实现必须将`id`用于身份比较的基础值作为整数返回。事实上，在用没有指针（可以转换为整数）的语言编写的实现中，您甚至不清楚如何做到这一点。在 PyPy 中，`id`对象的

* * *

至于`__hash__`，您误读了文档的重要部分。

> [...]`x.__hash__()`返回`id(x)`。

您省略的部分清楚地表明，这仅适用于用户定义类的实例（不重新定义`__hash__`）。例如，这显然不是真的`tuple`。简而言之，身份与散列无关，只是对于某些对象，身份是一个方便的散列值。

# java - 如何使用递归？

> ID：15399027
> 
> 赞同：-3
> 
> 时间：2013-03-14T00:22:12.807
> 
> 标签：java, recursion

所以我发布了我的代码。但是这个问题只是为了帮助我理解递归到底是什么。我知道我需要一个**基本案例**和**递归案例**。我的任务是读取用户的输入，并颠倒它的顺序。“动物”会变成“slamina” 现在我的**基本情况**是：如果用户输入一个空行（这是允许的）。虽然我的**递归案例**：只要输入有字符，我就使用字符串来存储输入，并且我可能在其中某处使用“.charAt[0]”命令？

我正在寻找解释来帮助我更好地编写我需要用于此作业的代码。我在 Eclipse 上使用 Java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:36:16.590

递归是在其执行线程中引用自身的代码。编写递归代码的关键是识别重复模式并且只编写一次该模式。

在您的情况下，模式是字符切换。考虑这个伪代码：

```
模式（字符串）
    reverse =（除了字符串的第一个字符之外的所有字符，反转）
              +（第一个字符）

```

然后第一项可以使用相同的模式，即：

```
模式（字符串的第一个字符除外） 

```

但是，为了确保它不会永远运行，必须在没有更多字符可以切换时停止它（即，如果遇到不可逆的字符串）：

```
模式（字符串）
    如果字符串长度 < 2 返回字符串
    else reverse = pattern(除了字符串的第一个字符之外的所有字符)
                   +（字符串的第一个字符）
    返回反向

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:26:12.720

要使用[递归](https://stackoverflow.com/a/15399074/823393)，您必须首先检查您的参数并决定是否应该使用[递归](https://stackoverflow.com/a/15399074/823393)。如果您的参数建议您应该使用[递归](https://stackoverflow.com/a/15399074/823393)，那么您应该使用带有新参数的[递归](https://stackoverflow.com/a/15399074/823393)，否则您应该返回结果。

您可以在同一方法中多次使用[递归。](https://stackoverflow.com/a/15399074/823393)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:29:37.397

以下是您可以如何考虑此问题的方法：

1.  如果字符串为空，则返回一个空字符串。

2.  否则，删除字符串的第一个字符（我们将其命名`c`）并在剩余部分调用 reverse（我们将其命名`cs`）然后追加`c`到末尾。

这是一些伪代码（这不会编译，只是给你一个想法）：

```
reverse(String input)
  if (input.isEmpty())
    return input;
  else {
    String c = getFirstCharacterOfString(input);  //write this on your own
    String cs = getAllCharactersButTheFirst(input); //write this on your own
    return reverse(cs) + c;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:35:58.103

我不会尝试直接回答，因为您似乎想了解它是如何工作的，所以我会给您一个接近的递归函数示例。

这是一个示例，说明您如何使用递归对从 1 到 100 的所有数字求和（这与您尝试做的很接近）。

```
int sumAllNumbers(int actualNumber, int limit)
{
   if (actualNumber < limit) return sumAllNumbers(actualNumber + 1, limit) + actualNumber;
   return actualNumber;
} 
```

如果您了解它的工作原理，我想您可以弄清楚如何使用递归函数来反转字符串。你必须记住的主要事情是你必须有一个条件来停止递归。

# javafx - JavaFX 能够控制窗口组件吗？

> ID：15399028
> 
> 赞同：1
> 
> 时间：2013-03-14T00:22:16.450
> 
> 标签：javafx

我有一个关于 JavaFX 的一般性问题。我想知道它是否能够控制窗口组件，例如文件下载/上传对话框（即：当您使用 Internet Explorer 时，您可能需要上传/下载文件。我希望使用 javaFX 自动化操作）。如果可能的话，请你指点我在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:39:34.257

您正在寻找的是类似于[`java.awt.Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html). JavaFX 没有为此提供 API，但您仍然可以使用 Glass 来使用 Robot，请参阅[javafx-jira 上的](http://javafx-jira.kenai.com/browse/RT-17571)[这个问题](https://stackoverflow.com/questions/11950551/javafx-robot-not-working-from-javafx-2-2)和这个问题

# python - ETE2：将图像添加到节点

> ID：15399034
> 
> 赞同：1
> 
> 时间：2013-03-14T00:23:06.343
> 
> 标签：python, python-2.7, etetoolkit

我一直在尝试使用 Python 中的 ete2 软件将不同的图像添加到系统发育树中的节点，但没有成功。

```
from ete2 import Tree, TreeStyle, NodeStyle, TextFace, faces, add_face_to_node, AttrFace
ts.show_leaf_name = True
ts.show_branch_support = True

nw = """
(((Dre:0.008339,Dme:0.300613)1.000000:0.596401,
(Cfa:0.640858,Hsa:0.753230)1.000000:0.182035)1.000000:0.106234,
((Dre:0.271621,Cfa:0.046042)1.000000:0.953250,
(Hsa:0.061813,Mms:0.110769)1.000000:0.204419)1.000000:0.973467);
"""
t = Tree(nw)

img_path = "/home/leonard/Desktop/img_faces/"

humanFace = faces.ImgFace(img_path+"human.png")

mouseFace = faces.ImgFace(img_path+"mouse.png")

def my_layout(node):

 if name.startswith("Dre"):

  faces.add_face_to_node(humanface, node, column=1)

t.show(my_layout)

ts = TreeStyle()

t.render("img_faces.png", w=600, tree_style = ts) 
```

这些是我收到的错误消息：

```
 File "abc1.py", line 34, in <module>
    t.show(my_layout)
  File "/usr/local/lib/python2.7/dist-packages/ete2-2.1rev544-py2.7.egg/ete2/coretype/tree.py", line 1283, in show
    drawer.show_tree(self, layout=layout, tree_style=tree_style)
  File "/usr/local/lib/python2.7/dist-packages/ete2-2.1rev544-py2.7.egg/ete2/treeview/drawer.py", line 84, in show_tree
    tree_item, n2i, n2f = render(t, img)
  File "/usr/local/lib/python2.7/dist-packages/ete2-2.1rev544-py2.7.egg/ete2/treeview/qt4_render.py", line 258, in render
    set_style(n, layout_fn)
  File "/usr/local/lib/python2.7/dist-packages/ete2-2.1rev544-py2.7.egg/ete2/treeview/qt4_render.py", line 746, in set_style
    layout_func(n)
  File "abc1.py", line 29, in my_layout
    if name.startswith("Dre"):
NameError: global name 'name' is not defined 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:26:30.623

这是来自谷歌组的 Jaime Huerta Cepas 的解决方案，我引用：

“您的脚本中存在一般 Python 编程错误（“name”变量不存在）。我猜您的意思是“node.name.startswith()”而不是“name.startswith()””

有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T16:40:28.467

根据文档（[ete2](http://etetoolkit.org/docs/latest/tutorial/tutorial_drawing.html#id30)），您需要创建一个准备读取节点名称属性的面。

尝试将以下内容添加到您的代码中：

```
#nameFace = faces.TextFace(open("text").readline().strip(), fsize=20, fgcolor="#009000")
nameFace = faces.AttrFace("name", fsize=20, fgcolor="#009000") 
```

# actionscript-3 - 是否可以从服务器检索 xml，保存到设备并将该本地文件用于我的 HTTPService url？

> ID：15399036
> 
> 赞同：0
> 
> 时间：2013-03-14T00:23:15.607
> 
> 标签：actionscript-3, apache-flex, flash-builder, flash-builder4.5

我有一个从我运行的服务器检索 XML 的应用程序...我试图限制对服务器的调用（如果可能）以提高应用程序的响应能力并降低如果数据流不产生用户出错的可能性无论出于何种原因，这次旅行都成功了——我遇到了一些间歇性的网络监视器错误，这可能是由于我认为我有一些 wifi 通道冲突，但它仍然是整个过程中的一个潜在弱点，如果我可以解决这个需求每次用户在应用程序中执行“操作”时调用服务器。

我想做的是使用设备上的本地存储（在启动应用程序时）检索并保存 XML 数据，然后将我的 httpservice url 更改为本地文件。

我之前使用了一些代码来成功地将配置设置写入和读取到本地文本文件，所以我很确定这可以实现，只是不确定如何去做。

感谢任何人可以对此有所了解或任何人可以分享的任何代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:15:32.193

默认情况下从`applicationStorageDirectory`如果它不存在 donwload 加载它并将 xml 保存到`applicationStorageDirectory`

装载：

```
var xmlFile:File = File.applicationStorageDirectory.resolvePath("data.xml");
if (xmlFile.exists)
{
   var fileStream:FileStream = new FileStream();
   fileStream.open(xmlFile, FileMode.READ);
   var xml:XML = XML(fileStream.readUTFBytes(fileStream.bytesAvailable));// you will want to declare outside this scope, its just for show
   fileStream.close();
}else{
  downloadAndSaveXML();// if it doesnt exist dowload it then save it and call load again!
} 
```

保存：

```
//download .xml first and save in the onComplete handler, im calling the file "xml"
var file:File = File.applicationStorageDirectory.nativePath("data.xml");
var stream:FileStream = new FileStream();
stream.open(file, FileMode.WRITE);
stream.writeUTFBytes(xml.toXMLString());
stream.close(); 
```

明白了吗？

您还需要此编译器参数，因此 HTTPService 不会在线查找 xml

```
-locale en_US -use-network=false 
```

您不必首先下载文件并将其嵌入到应用程序中

[这里是该主题的链接](http://binodsumanflex.blogspot.co.at/2008/11/how-to-use-local-xml-for-httpservice.html)

# theory - 解释工作面试的上下文无关语法歧义

> ID：15399042
> 
> 赞同：0
> 
> 时间：2013-03-14T00:24:07.077
> 
> 标签：theory, computation

我在参加工作面试，这是他们问我的问题，

下面这两个是模棱两可的吗？如果是，请提供一个字符串。如果不是，请证明为什么不是。

解决不了，想知道答案和未来的原因。

**问题 1**

```
S-->XaaaX
X-->aX | bX | e(epsilon) 
```

**问题2**

```
S-->aaS | aaaS | a 
```

同样，这不是硬件。

谢谢你。一个解释会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:33:27.497

我们记得，当（且仅当）该文法的某些产生式具有多个可能的派生时，该文法是模棱两可的。

在问题 1 中，符号 S 扩展为 XaaaX，然后扩展符号 X 的可用替代方案包括 aX 和 epsilon (ε)。通常，符号 epsilon 表示一个空字符串。在 aX 中将 X 扩展为 epsilon 产生 a。所以至少有两种方法可以得到 aaaa。理查德麦肯纳，我会留给你找到他们。

在问题 2 中，符号 S 扩展为 aaS、aaaS 或 a。至少有两种方法可以得到 aaaaaa。我再一次留给你去寻找推导。

如果您愿意，您可以在此页面上写下您的推导。

# c# - 如何使用继承 DependencyObject 的类？

> ID：15399051
> 
> 赞同：6
> 
> 时间：2013-03-14T00:24:47.510
> 
> 标签：c#, wpf

我从这里关注了一个关于依赖对象的教程：http: [//tech.pro/tutorial/745/wpf-tutorial-introduction-to-dependency-properties](http://tech.pro/tutorial/745/wpf-tutorial-introduction-to-dependency-properties)

然而，我仍然有些困惑。我创建了以下课程，纯粹是为了我自己的学习目的，没有实际用途：

```
namespace DPTest
{
    class Audio : DependencyObject
    {
        public static readonly DependencyProperty fileTypeProperty = DependencyProperty.Register("fileType", typeof(String), typeof(Audio),
        new PropertyMetadata("No File Type", fileTypeChangedCallback, fileTypeCoerceCallback), fileTypeValidationCallback);

        public String fileType
        {
            get
            {
                return (String)GetValue(fileTypeProperty);
            }
            set
            {
                SetValue(fileTypeProperty, value);
            }
        }

        private static void fileTypeChangedCallback(DependencyObject obj, DependencyPropertyChangedEventArgs e)
        {
            Console.WriteLine(e.OldValue + " - " + e.NewValue);
        }

        private static object fileTypeCoerceCallback(DependencyObject obj, object o)
        {
            String s = o as String;
            if (s.Length > 0)
            {
                s = s.Substring(0, 8);
            }

            return s;
        }

        private static bool fileTypeValidationCallback(object value)
        {
            return value != null;
        }
    }
} 
```

几个问题：

1.  为什么属性是静态的？我不完全理解它是否意味着在对象级别存储一个值。
2.  Coerce 回调有什么作用，为什么包含它？
3.  我上课的目的是什么，我会在哪里使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T00:33:55.123

[总而言之，如果您使用Model-View-ViewModel](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx) ，您可能不需要 DependencyObject ，但要回答您的具体问题：

1.  DependencyProperty*定义*是静态的，因为 DependencyObject 的所有实例共享该定义。它们就像一个更[高级的每个对象属性 Dictionary](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。这还允许各种框架功能无缝工作，例如[绑定或呈现更新](http://msdn.microsoft.com/en-us/library/ms752914.aspx#functionality)。

2.  当您需要将属性更改链接在一起时，[就会发生 DependencyProperty Coercion 。](http://msdn.microsoft.com/en-us/library/ms745795.aspx#Coerce_Value_Callbacks_and_Property_Changed_Events)例如，如果您有一个 Slider 控件，它的 Value 应该存在于最小值和最大值之间，则使用 CoerceValue 回调来确保它保持在正确的范围内。

3.  DependencyObjects 在用户代码中已经失宠，取而代之的是在 WPF 开发中很大程度上被模型-视图-视图模型模式所取代。您仍然可以在自定义控件开发中找到 DependencyObjects。[DependencyProperties](http://msdn.microsoft.com/en-us/library/ms753358.aspx)在用户代码中很常见，通常以[Attached Properties](http://msdn.microsoft.com/en-us/library/ms749011.aspx)的形式出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T00:38:54.050

依赖属性本身是静态的，因为您将属性分配给对象类型。它将属性标识为一个整体，而不仅仅是像 CLR 属性那样捕获值。

正如您在（非静态）CLR 属性中所见，存储功能由`SetValue`单独`GetValue`处理。您可以将依赖属性值想象成一个大字典，您只需将一些任意内容放入其中。字典的键是依赖属性。

强制回调用于强制将值转换为某种格式。在您的情况下，它将确保字符串只有 8 个字符长。大多数时候，您不需要这样的回调。您甚至不需要经常更改属性的回调。最常见的情况是可绑定属性，只需使用标准元数据定义依赖属性就足够了。

我猜你上课的目的是作为一个例子。如果您没有特定的用例，我不建议您甚至查看依赖对象。实际上，您很少对`DependencyObject`自己进行子类型化。通常您有一个框架元素或组件，您可以继承并向其添加自定义行为。然后，每当您需要 XAML 等的可绑定属性时，就需要依赖属性。

# ajax - 加载和发布外部 Joomla 表单视图

> ID：15399055
> 
> 赞同：0
> 
> 时间：2013-03-14T00:25:00.787
> 
> 标签：ajax, joomla

在 Joomla 3.03 中，我构建了一个组件和一个表单视图，用于添加和编辑记录。我想将此表单加载到另一个完全独立的视图中，我们正在写出记录。

我知道我可以使用 jQuery.load() 来拉入表单，但是我怎样才能将它动态加载到单独的视图上并允许它像在原始表单视图页面上一样完成/验证/发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:23:43.650

您可以使用 Joomla 3.0 的新功能`JLayout`，它允许视图重用内部或跨扩展。有关更多详细信息，请查看文档[使用 JLayout 跨视图或扩展共享布局](http://docs.joomla.org/Sharing_layouts_across_views_or_extensions_with_JLayout)

# css - 在大于浏览器窗口的 div 内滚动

> ID：15399057
> 
> 赞同：2
> 
> 时间：2013-03-14T00:25:15.443
> 
> 标签：css, scrollbar

我想在一个高度延伸到浏览器窗口下方的 div 内滚动，而浏览器窗口上没有出现滚动条。

当我在 body 标记上添加溢出：隐藏样式时，只要 div 高度小于窗口高度，它就可以工作。当 div 高度 > 浏览器窗口高度时，如何获得相同的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:42:12.463

div 高度是否大于窗口高度，因为您已在 css 中以这种方式设置它，还是 div 内只有很多内容？

如果您已经在 css 中设置了它的高度，您可能必须先将其包装在另一个 div 中。否则，试试这个：

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

div {
    height: 100%;
    width: 50%;
    overflow-y: scroll;
} 
```

[例子](http://jsfiddle.net/grc4/SfcZk/)

# java - 在 Java 中生成一个随机的 alpha 字符串

> ID：15399059
> 
> 赞同：-1
> 
> 时间：2013-03-14T00:25:37.227
> 
> 标签：java, string, random

我需要创建一个随机的字母串，但以前从未使用过随机类。

这是规范： **创建一个小程序，要求用户输入他们的名字。将姓名存储在字符串中 打印姓名 要求用户更改他们的姓 将字符串操作为新的姓。打印新名称。创建一个无限循环，随机更改字符串变量。看看你的程序会不会崩溃。**

到目前为止我有这个

```
import java.util.Scanner;
import java.util.Random;

public class StringNames {

    public static void main(String[] args) {

        System.out.println("Please enter a name");

        Scanner myInput = new Scanner(System.in);
        String firstName = new String();
        firstName = myInput.next();

        String lastName = new String();
        lastName = myInput.next();

        System.out.println(firstName + " " + lastName);

        System.out.println("Please change your last name");
        lastName = myInput.next();

        System.out.println(firstName + " " + lastName);

        for (;;) {

        }
    }

} 
```

如何创建一个随机的字母字符串以在无限循环中将姓氏更改为？我不确定字符串必须有多长。代码越简单越好。我很慢。

感谢您的指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:24:50.157

首先，只是一件小事：

```
String lastName=myInput.next(); 
```

比使用类字符串创建一个字符串然后为该字符串分配一个值要高效得多。

我对您的问题的解决方案是：

```
 import java.util.Scanner;
    import java.util.Random;

public class StringNames {

public static void main(String[] args) {
    Random generator=new Random();
    Scanner myInput = new Scanner(System.in);

    System.out.println("Please enter a name");
    String firstName = myInput.next();

    System.out.println("Please enter a last name");
    String lastName = myInput.next();

    System.out.println("Your name is:");
    System.out.println(firstName + " " + lastName);

    System.out.println("Please change your last name");
    lastName = myInput.next();

    System.out.println(firstName + " " + lastName);
   char[] lastNameChar=lastName.toCharArray();
    for (int i=0;i<lastNameChar.length;i++) {
        int randomNum=generator.nextInt(133);
        lastNameChar[i]=(char)randomNum;

    }
    lastName=String.valueOf(lastNameChar);
    System.out.println(firstName + " " + lastName);
}
} 
```

它的作用是提示输入您指定的名称等。然后是一个for循环。当他们更改名称时，该字符串将转换为 char 数组，这使我们能够获取长度并更改“字符串”的各个元素。然后我们生成一个随机数作为随机生成的字符。

然后，我们通过将随机生成的数字转换为字符来将其[转换](http://www.java-samples.com/showtutorial.php?tutorialid=1170)为字符。

它的作用是立即将值更改为此 ASCII 字符表中的字符：[ASCII Characters](http://www.google.co.uk/imgres?imgurl=http://www.asciitable.com/index/asciifull.gif&imgrefurl=http://www.asciitable.com/&h=488&w=715&sz=28&tbnid=2U31hF4tTw886M%3a&tbnh=90&tbnw=132&zoom=1&usg=__QKvmFTxkkNLdnI4XSnlKseHqfJw=&docid=JMtOixefP_tDJM&sa=X&ei=AyRBUc_dEYKWO7XrgfAF&ved=0CDgQ9QEwAQ&dur=718)

我们继续了解他们的新姓氏。然后将 char 数组转换回字符串，并打印字符串。

为了优化数字生成器的范围（在它生成 0 到 133 之间的那一刻），只需添加一个 do while 循环：

```
 do{
        randomNum=generator.nextInt(133);
  }while(randomNum>33 &&randomNum<120); 
```

# php - 在 SQL 中执行第 n 次后，ajax 返回成功

> ID：15399064
> 
> 赞同：2
> 
> 时间：2013-03-14T00:25:54.303
> 
> 标签：php, html, sql, ajax

我相信我的代码应该没问题。但我提交表单后无法对数据库执行插入操作。谁能帮我？

我已经尝试过警报好的，但在数据库中找不到任何人 INSERT 值

并且很可能，单击按钮后，它再次返回表单并且没有警报，甚至是错误之一。

这是我的html

```
<form>
    <label for="basic">Login Name:</label>
    <input type="text" name="loginID" id="loginID" value="" data-mini="true" /></br >
    <label for="basic">Login Password:</label>
    <input type="password" name="loginPW" id="loginPW" value="" data-mini="true" /></br >
    <input type="submit" value="Submit ">
</form> 
```

这是我的js

```
$(document).ready(function()
{
    $('form').submit(function(){

        $.ajax({
            type: 'POST',
            data: 
            {
                    loginID: $("#loginID").val(),
                    loginPW: $("#loginPW").val()
            },
            url: 'http://mydomain.com/create.php',
            success: function(data){
                alert('Your comment was successfully added');
            },
            error: function(){
                alert('There was an error adding your comment');
            }
        });

        return false;
    });
}); 
```

这是我的 php

```
<?php

include('mysqlConfig.php');

$id = mysql_real_escape_string($_POST["loginID"]);
$pw = mysql_real_escape_string($_POST["loginPW"]);

$sql="INSERT INTO tbl_user (user_name, password)
VALUES
($id,$pw)";

if (!mysql_query($sql,$link))
{
    die('Error: ' . mysql_error());
}
else
{    
    echo "Comment added";
}

mysql_close($link);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:50:03.750

虽然你真的应该切换到 PDO（或 mysqli）和准备好的语句，但这里的问题是你没有引用变量，因为它们是字符串，你需要引用它们：

```
$sql="INSERT INTO tbl_user (user_name, password)
      VALUES
        ('$id','$pw')"; 
```

您还应该对您的密码进行散列和加盐处理，并且永远不要将它们存储为纯文本或加密。

# sql-server - 存储过程中的存储过程，以便了解是否需要使用 SQL Server 2008 更新记录

> ID：15399066
> 
> 赞同：0
> 
> 时间：2013-03-14T00:25:54.607
> 
> 标签：sql-server, tsql, stored-procedures

我想知道是否可以在另一个存储过程中使用存储过程中的结果集来了解记录是否不同（如果它已被编辑）以便在数据库上更新它。

我在想这样的事情：

```
CREATE PROCEDURE [SISACT].[find_ubicacion] 
@ubicacion_to VARCHAR(8)
AS
SELECT ubicacion, descripcion FROM UBICACIONES WHERE ubicacion = @ubicacion_to 
```

和那个叫它的人

```
CREATE PROCEDURE [SISACT].[update_ubicacion]
@ubicacion VARCHAR(8),
@old_descripcion VARCHAR(60),
@new_descripcion VARCHAR(60)
AS
BEGIN
@old_descripcion = EXEC [SISACT].[find_ubicacion] (@ubicacion)
PRINT @old_descripcion
IF @old_descripcion != @new_descripcion
UPDATE [SISACT].[UBICACIONES] SET descripcion=@new_descripcion WHERE
ubicacion=@ubicacion
ELSE
PRINT 'Nothing to update'
END 
```

除了`EXEC [SISACT].[find_ubicacion] (@ubicacion)`不起作用。我是 SQL SERVER 和存储过程的新手，如果这真的很基本，我很抱歉。我必须在几天内做一些比这更复杂的事情。**这可能吗？**另外，**如果有许多字段而不仅仅是一个字段，我怎么知道要更新哪个字段，是否有一种“简单”的方法可以做到这一点？**

注意：我知道这一点->

```
@old_descripcion = EXEC [SISACT].[find_ubicacion] (@ubicacion)
    PRINT @old_descripcion
    IF @old_descripcion != @new_descripcion 
```

错了，我只是想让你了解我想要完成的事情。

我在这里要做的是，在更新之前验证记录是否已被修改。这就是我打算使用“find_ubicacion”的目的，找到旧的，将其与输入参数进行比较，然后更新与否

就像我说的，如果这是一个愚蠢的问题或非常基本的问题，我很抱歉，我正在尝试自己学习。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:52:05.397

我不确定为什么需要两个存储过程。这可以通过一个查询来完成

```
UPDATE [SISACT].[UBICACIONES] 
SET descripcion = @new_descripcion 
WHERE ubicacion = @ubicacion
AND descripcion <> @new_descripcion 
```

**更新：** 如果你真的需要一个存储过程。它应该是这样的（未经测试）

```
CREATE PROCEDURE [SISACT].[update_ubicacion]
    @ubicacion VARCHAR(8),
    @new_descripcion VARCHAR(60)
AS
BEGIN
  SET NOCOUNT ON

  UPDATE [SISACT].[UBICACIONES] 
  SET descripcion = @new_descripcion 
  WHERE ubicacion = @ubicacion
  AND descripcion <> @new_descripcion 

  IF @@ROWCOUNT = 0
     PRINT 'Nothing to update'     
END 
```

# xcode - 如何使用 AppleScriptObjC 在 Xcode 中获取 Web 视图的当前 url？

> ID：15399068
> 
> 赞同：0
> 
> 时间：2013-03-14T00:26:01.643
> 
> 标签：xcode, webview, applescript-objc

我在 Xcode 中有一个 webView，经过几秒钟的浏览，我希望能够获取 web 视图的当前 URL。我已经四处搜索，但找不到方法。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:58:33.020

如果在 nib 文件中将`WebView`' 的出口设置为 AppleScript 类，则可以实现与'方法`frameLoadDelegate`等效的 AppleScript-Objc方法，以便在开始加载新页面时得到通知（来自[WebKit Objective-C Programming Guide -加载页面 - 显示当前 URL](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/LocationChanges.html#//apple_ref/doc/uid/20002027-117441)）：`WebFrameLoadDelegate`[`webView:didStartProvisionalLoadForFrame:`](http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView%3adidStartProvisionalLoadForFrame%3a)`WebView`

```
on webView_didStartProvisionalLoadForFrame_(sender, frame)
    log "webView_didStartProvisionalLoadForFrame_"

    if frame is equal to sender's mainFrame then
        set currentURLRequest to frame's provisionalDataSource()'s request
        log currentURLRequest

        set theURL to currentURLRequest's mainDocumentURL()
        log theURL

        set theURLString to theURL's absoluteString()
        log theURLString

        set textField's stringValue to theURLString

    end if

end webView_didStartProvisionalLoadForFrame_ 
```

在这个示例代码中，我将文本字段的字符串值设置为当前 URL，就像浏览器在导航到另一个页面时通常所做的那样。`property`如果需要，您始终可以将此值存储在 AppleScript中。

示例项目：[WebViewFinaglerAS-Objc.zip](http://www.markdouma.com/developer/WebViewFinaglerAS-Objc.zip)

# functional-programming - 你如何根据这个递归函数确定一个度量函数？

> ID：15399071
> 
> 赞同：2
> 
> 时间：2013-03-14T00:26:05.443
> 
> 标签：functional-programming, logic, acl

ACL2 中定义了一个函数，我们的任务是创建一个度量函数来帮助证明终止。这是函数定义：

```
(defunc f (x a)
  :input-contract (and (integerp x) (listp a))
  :output-contract (integerp (f x a))
  (cond
   ((endp a)                 68)
   ((equal (len a) x)        71)
   ((equal (len a) (+ x 1))  74)
   ((< x (len a))            (f (+ x 1) (rest a)))
   (t                        (f (- x 1) (cons 1 a))))) 
```

解决方案测量功能是这样的（简写）：

```
(m x a) = (if (equal (len a) (+ x 1))
              0
              (abs (- (len a) x))) 
```

基于函数中的两个递归调用，我们能够确定将包含测量函数的 else 情况。但是，我们不了解它的其余部分，以及找出这个度量函数的过程。

作为参考，一个测量函数：

1.  m 是在 f 的参数上定义的允许函数；
2.  m 与 f 有相同的输入契约；
3.  m 有一个输出契约，声明它总是返回一个自然数；和
4.  在导致递归调用的条件下，在每次递归调用中，应用于该递归调用的参数的 m 都会减少。

导致确定此测量函数的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:45:22.580

在确定度量函数时，要问自己的问题是：每次迭代中消耗的“势能”是多少，到了某个时候它全部消失并且迭代停止的程度？

首先要看的地方通常是终止条件。在这种情况下，有三个，但最后两个是最有趣的：他们说如果和之间的差异太小，我们就会停止`x`迭代`(len a)`。

这给了我们一个想法：如果势能介于`(len a)`和之间`x`怎么办？为了看看这是否有意义，我们需要检查递归情况并确保它们中的每一个都消耗了一些能量，即减少了差异。这里的情况看起来不错：

*   如果`x`小于`(len a)`我们增加`x`1 并减少`(len a)`1。因此，如果它们之间的差异是*n*，那么在下一次迭代中它将是*n-2*，除非*x = `(len a)`- 1*。
*   否则`x`大于`(len a)`，我们减少`x`1 并增加`(len a)`1。同样，如果它们之间的差异是*n*，那么在下一次迭代中它将是*n-2*，除非*x = `(len a)`+ 1*。

从那里很容易看出我们应该选择*x = `(len a)`+ 1*作为我们的“低能量状态”，因为它处理了这两个*除非*子句的讨厌细节。

# jquery - 使用 jquery 在第二次单击时反转动画

> ID：15399079
> 
> 赞同：0
> 
> 时间：2013-03-14T00:27:04.597
> 
> 标签：jquery, jquery-animate, toggle

我有三个框，其中包含我想用我已经编码的特定动画打开的信息。我已经编写了所有内容，当单击一个时，其他的会关闭，但是我似乎无法弄清楚当您第二次单击名称时如何关闭该框，我不知道为什么，但是尝试时切换事件不起作用。知道我该怎么做吗？这是jquery代码：

```
$('.link').click(function(){
        $('#box').animate({
            marginLeft:"0px",
            marginTop:"100px"
            },500).addClass('navigation').animate({
            width:"260px",
            height:"80px"
        },500);
        $('#box2').animate({
            marginLeft:"100px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation');
        $('#box3').animate({
            marginLeft:"200px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation')
    });    
    $('.link2').click(function(){
        $('#box2').animate({
            marginLeft:"0px",
            marginTop:"100px"
            },500).addClass('navigation').animate({
            width:"260px",
            height:"80px"
        },500);
        $('#box').animate({
            marginLeft:"0px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation');
        $('#box3').animate({
            marginLeft:"200px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation');
    });  
    $('.link3').click(function(){
        $('#box3').animate({
            marginLeft:"0px",
            marginTop:"100px"
            },500).addClass('navigation').animate({
            width:"260px",
            height:"80px"
        },500);
        $('#box2').animate({
            marginLeft:"100px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation');
        $('#box').animate({
            marginLeft:"0px",
            marginTop:"0px",
            width:"60px",
            height:"23px"
            },500).removeClass('navigation');    
    }); 
```

这里有一个 jsfiddle 让它更清楚：http: [//jsfiddle.net/Unphr/11/](http://jsfiddle.net/Unphr/11/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:16:57.967

如果您在 DOM 中进行一些重命名，您可以为此过程创建一个更通用的处理程序。

以下 HTML 块的重要补充是`box`该类已添加到所有盒子容器中。

**HTML**

```
<div id="container">
    <div id="box1" class="box" align="center">
        <div id="link1" class="link"><a> Info </a></div>
    </div>
    <div id="box2" class="box" align="center">
        <div id="link2" class="link"><a> Links </a></div>
    </div>
    <div id="box3" class="box" align="center">
    <div id="link3" class="link"><a> More </a></div>
    </div>
</div> 
```

以下 JS 本质上是您的代码重构为不依赖于每个`box`. 为了做到这一点，它利用 jQuery[`.data()`](http://api.jquery.com/data/)方法将信息存储在 DOM 中以供以后使用（在本例中为框的左边距）。

**JS**

```
$('.box').click(function() {
    // Get the associated box
    var box = $(this).closest('.box');
    // Get the other boxes
    var otherBoxes = $('.box').not(box);
    // If the box is already active
    if (box.hasClass('active')) {
        // Animate the box out
        animateBoxOut(box);
    } else {
        // Get the original left margin
        var marginLeft = box.css('margin-left');
        // Store the original left margin
        box.data('marginLeft', marginLeft);
        // Animate the box in
        animateBoxIn(box);
        // Animate the other boxes out
        otherBoxes.each(function(index, element) {
            animateBoxOut(element);
        });
    }
});

function animateBoxIn(box) {
    // Animate the box in
    $(box).addClass('active').animate({
        marginLeft:"0px",
        marginTop:"100px"
    },500).animate({
        width:"260px",
        height:"80px"
    });
}

function animateBoxOut(box) {
    // Get the element's stored left margin
    var marginLeft = $(box).data('marginLeft');
    // Animate the box out
    $(box).animate({
        marginLeft:marginLeft,
        marginTop:"0px",
        width:"60px",
        height:"23px"
    },500).removeClass('active');
} 
```

**[演示](http://jsfiddle.net/ccAkW/3/)**

# azure - Azure 网站 Orchard 内存消耗

> ID：15399082
> 
> 赞同：2
> 
> 时间：2013-03-14T00:27:13.000
> 
> 标签：azure, orchardcms, azure-web-app-service

我的博客在 Azure 的 Orchard 上运行了几个月，我不知道。一切都很好。我有大约 10 个内容项。这是一个小网站。我在共享模式下运行它。浏览该网站很好，速度很快，一切都很好。但是今天我一直在尝试编辑一些帖子并添加一些新帖子。我每分钟的 CPU 使用率简直快疯了，并且不断使网站崩溃，因此我无法保存任何东西。按发布只会破坏该站点。

我不会升级到保留模式，就像它一直在推荐一个大约有 3 个查看者的他妈的小博客那样。

任何想法为什么 cpu 使用会变得如此疯狂？

错误日志几乎是空的，偶尔会出现来自 disqus 的错误，但这只是在我加载博客文章时......

更新 1：删除了 disqus 以防万一。在发布内容项目的大量负载下仍然惨遭失败。

更新2：有点奇怪......错误日志说无法启动租户：默认值。序列包含多个元素。我认为这是在谈论路线。

在 c:\Users\sebros\My Projects\Orchard\src\Orchard\Mvc\Routes\StandardExtensionRouteProvider.cs:line 24 中的 Orchard.Mvc.Routes.StandardExtensionRouteProvider.d__a.MoveNext()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:50:03.780

您应该检查扩展程序监控是否已禁用。它创建了许多`FileSystemWatcher`实例，以便动态编译响应实时文件修改，但在生产环境中是不必要的。

查看此页面上的“禁用动态模块加载器”部分：http: [//docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation](http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation)

# jquery - 如何在 Greasemonkey 中使用 JQuery 更改 div 的宽度和宽度

> ID：15399086
> 
> 赞同：-2
> 
> 时间：2013-03-14T00:27:44.437
> 
> 标签：jquery, greasemonkey

我试图在greasemonkey 中使用jquery 更改一些css 属性。如果我访问该站点并使用 firebat 手动编辑值，一切正常，但由于某种原因，这个油脂猴脚本无法正常工作，我不知道为什么。

我正在尝试将宽度的`div#feedlyFrame div#feedlyPart0 div#feedlyPage div#mainArea div#timeline`宽度设置为 100%，并将行高更改`#feedlyTabsHolder`为 20 像素，将高度更改`div.icon`为 20 像素。

这里是：

```
// ==UserScript==
// @name        fix feedly
// @namespace   reader
// @include     http://www.feedly.com/*
// @version     1
// ==/UserScript==

$(document).ready(function() {
   $("div#feedlyFrame").width("100%");
   $("div#feedlyPart0").width("100%");
   $("div#feedlyPage").width("100%");
   $("div#mainArea").width("100%");
   $("div#timeline").width("100%");
   $("#feedlyTabsHolder").css("line-height", "20px")
   $("div.icon").height("20px");
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:30:13.860

选择器应该是一个字符串：

```
$("div#feedlyFrame").width("100%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:10:09.317

**-编辑-**

看看你是否可以隔离`width()`问题。

尝试`$("div#feedlyFrame").css({'border', 'solid 1px red'});`或类似的东西。如果没有结果，则问题可能与您尝试访问元素的方式有关，或者您是否*可以*.

任何镜头，这个元素是一个`live`元素？

* * *

操作，

你试过`.css()`代替`.width()`吗？

```
$("div#feedlyFrame").css({'width', '100%'}); 
```

# java - 为什么 crawler4j 示例会报错？

> ID：15399088
> 
> 赞同：6
> 
> 时间：2013-03-14T00:27:59.050
> 
> 标签：java, crawler4j

我正在尝试在 crawler4j 中使用 Basic crawler 示例。[我在这里](http://code.google.com/p/crawler4j/source/browse/src/test/java/edu/uci/ics/crawler4j/examples/basic/)从 crawler4j 网站获取了代码。

```
package edu.crawler;

import edu.uci.ics.crawler4j.crawler.Page;
import edu.uci.ics.crawler4j.crawler.WebCrawler;
import edu.uci.ics.crawler4j.parser.HtmlParseData;
import edu.uci.ics.crawler4j.url.WebURL;
import java.util.List;
import java.util.regex.Pattern;
import org.apache.http.Header;

public class MyCrawler extends WebCrawler {

    private final static Pattern FILTERS = Pattern.compile(".*(\\.(css|js|bmp|gif|jpe?g" + "|png|tiff?|mid|mp2|mp3|mp4"
                    + "|wav|avi|mov|mpeg|ram|m4v|pdf" + "|rm|smil|wmv|swf|wma|zip|rar|gz))$");

    /**
     * You should implement this function to specify whether the given url
     * should be crawled or not (based on your crawling logic).
     */
    @Override
    public boolean shouldVisit(WebURL url) {
            String href = url.getURL().toLowerCase();
            return !FILTERS.matcher(href).matches() && href.startsWith("http://www.ics.uci.edu/");
    }

    /**
     * This function is called when a page is fetched and ready to be processed
     * by your program.
     */
    @Override
    public void visit(Page page) {
            int docid = page.getWebURL().getDocid();
            String url = page.getWebURL().getURL();
            String domain = page.getWebURL().getDomain();
            String path = page.getWebURL().getPath();
            String subDomain = page.getWebURL().getSubDomain();
            String parentUrl = page.getWebURL().getParentUrl();
            String anchor = page.getWebURL().getAnchor();

            System.out.println("Docid: " + docid);
            System.out.println("URL: " + url);
            System.out.println("Domain: '" + domain + "'");
            System.out.println("Sub-domain: '" + subDomain + "'");
            System.out.println("Path: '" + path + "'");
            System.out.println("Parent page: " + parentUrl);
            System.out.println("Anchor text: " + anchor);

            if (page.getParseData() instanceof HtmlParseData) {
                    HtmlParseData htmlParseData = (HtmlParseData) page.getParseData();
                    String text = htmlParseData.getText();
                    String html = htmlParseData.getHtml();
                    List<WebURL> links = htmlParseData.getOutgoingUrls();

                    System.out.println("Text length: " + text.length());
                    System.out.println("Html length: " + html.length());
                    System.out.println("Number of outgoing links: " + links.size());
            }

            Header[] responseHeaders = page.getFetchResponseHeaders();
            if (responseHeaders != null) {
                    System.out.println("Response headers:");
                    for (Header header : responseHeaders) {
                            System.out.println("\t" + header.getName() + ": " + header.getValue());
                    }
            }

            System.out.println("=============");
    }
} 
```

以上是示例中爬虫类的代码。

```
public class Controller {

    public static void main(String[] args) throws Exception {
            String crawlStorageFolder = "../data/";
            int numberOfCrawlers = 7;

            CrawlConfig config = new CrawlConfig();
            config.setCrawlStorageFolder(crawlStorageFolder);

            /*
             * Instantiate the controller for this crawl.
             */
            PageFetcher pageFetcher = new PageFetcher(config);
            RobotstxtConfig robotstxtConfig = new RobotstxtConfig();
            RobotstxtServer robotstxtServer = new RobotstxtServer(robotstxtConfig, pageFetcher);
            CrawlController controller = new CrawlController(config, pageFetcher, robotstxtServer);

            /*
             * For each crawl, you need to add some seed urls. These are the first
             * URLs that are fetched and then the crawler starts following links
             * which are found in these pages
             */
            controller.addSeed("http://www.ics.uci.edu/~welling/");
            controller.addSeed("http://www.ics.uci.edu/~lopes/");
            controller.addSeed("http://www.ics.uci.edu/");

            /*
             * Start the crawl. This is a blocking operation, meaning that your code
             * will reach the line after this only when crawling is finished.
             */
            controller.start(MyCrawler.class, numberOfCrawlers);
    }
} 
```

以上是网络爬虫的控制器类。当我尝试从我的 IDE (Intellij) 运行 Controller 类时，我收到以下错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: edu/uci/ics/crawler4j/crawler/CrawlConfig : Unsupported major.minor version 51.0 
```

是否有一些关于我应该知道的关于在[这里找到的 Maven 配置？](http://code.google.com/p/crawler4j/wiki/MavenConfig)我必须使用不同的版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:47:15.027

问题不在于 crawler4j。问题是我使用的 Java 版本与 crawler4j 中使用的最新版本的 Java 不同。我在他们更新到 Java 7 之前切换了版本，一切正常。我猜将我的 Java 版本升级到 7 会产生相同的效果。

# php - PHP MySQL 购物车 - 将项目添加到会话

> ID：15399090
> 
> 赞同：-2
> 
> 时间：2013-03-14T00:28:21.333
> 
> 标签：php, mysql

我正在练习 PHP，结果，我最终创建了一个虚拟的在线商店。我设法实现了大部分在线功能，但我在购物车上苦苦挣扎。

一旦用户登录并进入网站的产品区域，我希望用户能够将商品添加到购物车。我一直在关注[phpAcademy YouTube 教程](https://www.youtube.com/watch?v=Bbw-z9HyN-s)。我已经设法使用添加按钮/超链接显示所有产品，以将每个产品链接到名为 cart.php 的处理页面。每个按钮的链接与其关联的产品 ID 相匹配。

当我对此进行测试并单击“添加”时，产品的 ID 不会出现在 cart.php 页面上。

user_man_boxing_gloves.php：

```
<?php
session_start();

include('connect_mysql.php');

$product_name = 'product_name';
$product_qua = 'product_qua';
$product_price = 'product_price';
$product_image = 'product_image';
$product_des = 'product_des';

$get = mysql_query("SELECT product_id, product_image, product_name, product_des, product_price, product_type FROM products WHERE product_type='ManGloves' AND product_qua > 0 ORDER BY product_id DESC");
if(mysql_num_rows($get) == 0)
{
    echo "There are no Products to display";
}
else
{
    ?>
    <?php
    while($get_row = mysql_fetch_assoc($get))
    {
        ?>
        <table id='display'>
            <tr><td><?php echo "<img src=$get_row[$product_image] class='grow'>" ?></td></tr>

            <tr>
                <th></th>
                <th><strong>Avalible</strong></th>
                <th><strong>Price</strong></th>
                <th><strong>Description</strong></th>
            </tr>

            <tr>
                <td width='290px'><?php echo "$get_row[$product_name]" ?></td>
                <td width='290px'><?php echo "$get_row[$product_qua]" ?></td>
                <td width='290px'><?php echo "$get_row[$product_price]" ?></td>
                <td width='290px'><?php echo "$get_row[$product_des]" ?></td>
            </tr>
            <tr>
                <td><?php echo '<a href="cart.php?add=' . $get_row['product_id'] . '">Add</a>'; ?></td>
            </tr>
        </table>

        <?php
    }
}
?> 
```

购物车.php：

```
<?php

if(isset($_GET['add'])){
    $_SESSION['cart_'.$_GET['add']]+='1';

}

echo $_SESSION['cart_'];

?> 
```

我想显示产品 ID 以查看我的代码是否有效，并且我想在验证它是否有效后进行进一步处理。

![在此处输入图像描述](../Images/31a6775601fd8efb56fd67c1d2355ac5.png)

查看屏幕截图，添加按钮似乎正确显示了产品 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:45:06.087

看起来 cart.php 中的问题涉及以下代码段：

```
if(isset($_GET['add'])){
        $_SESSION['cart_'.$_GET['add']]+='1';
} 
```

解决这个问题，这意味着如果 ID 为 1，您可以在会话数组中看到以下内容：

> $_SESSION['cart_1'] = 1;
> $_SESSION['cart_2'] = 4;

对于显示器，您可能想要的是将数组存储到购物车中。那是，

```
if(isset($_SESSION['cart']))
{
    $arr = unserialize($_SESSION['cart']);
}
else
{
    $arr = array();
}

if(isset($_GET['add'])){
        $arr[$_GET['add']] += 1;
}
$_SESSION['cart'] = serialize($arr);

var_dump(unserialize($_SESSION['cart'])); 
```

# c - 睡眠函数调用导致哪个调度程序状态？

> ID：15399093
> 
> 赞同：0
> 
> 时间：2013-03-14T00:29:02.633
> 
> 标签：c, operating-system, sleep, scheduler, unistd.h

我对 unistd.h 中声明的 sleep 函数有疑问

假设我们使用 CFS 调度程序。

我们有一个准备好运行的进程（我们称之为“READY”状态），它被选中运行，现在正在运行（所谓的“RUNNING”状态）。

在 RUNNING 状态下执行期间，它遇到了一个 sleep 语句，比如 sleep(10) ，它使它休眠 10 秒或直到信号被传递或以较早者为准。

现在，当 sleep(10) 正在执行时，进程是处于 READY 状态还是将其放回到 RUNNING 队列中的原始优先级，还是放入 WAIT 队列。

我无法想象正确的事件序列。一个思考过程表明它保留在 READY 队列中，而另一个想法是它被放入等待队列等待某种计时器到期。

请让我知道这将如何工作，或者我的问题是否有问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:39:24.923

我相信这取决于睡眠的持续时间，即如果等待很忙，那么它可以运行，如果等待很长，那么它将在等待队列中。此外，您应该能够通过将进程置于长时间睡眠并检查其状态来确认这一点。

# python - 堆叠颜色图

> ID：15399095
> 
> 赞同：2
> 
> 时间：2013-03-14T00:29:09.727
> 
> 标签：python, matplotlib

有没有一种简单的方法可以通过将两个现有的颜色图堆叠在一起来形成新的颜色图？

我想要实现的是制作另一个颜色编码的散点图，其中颜色映射的变量从大的负值到大的正值不等，我想将值调低到零附近——基本上，我希望能够从库存颜色图（例如，`cm.Blues_r`）中选择颜色映射变量的负值，并从不同的颜色图（例如，`cm.Oranges`）中选择该变量的正值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:24:07.013

这没有经过测试，但作为第一次通过，我会尝试制作一个简单的`colors.Colormap`.

```
class split_cmap(colors.Colormap):
    def __init__(self, cmap_a, cmap_b, split=.5):
        '''Makes a split color map cmap_a is the low range, 
           cmap_b is the high range
           split is where to break the range
        '''
        self.cmap_a, self.cmap_b = cmap_a, cmap_b
        self.split = split

    def __call__(self, v):
        if v < self.split:
            return self.cmap_a(v) 
            # or you might want to use v / self.split
        else:
            return self.cmap_b(v) 
            # or you might want to use (v - self.split) / (1 - self.split)

    def set_bad(self,*args, **kwargs):
        self.cmap_a.set_bad(*args, **kwargs)
        self.cmap_b.set_bad(*args, **kwargs)

    def set_over(self, *args, **kwargs):
        self.cmap_a.set_over(*args, **kwargs) # not really needed
        self.cmap_b.set_over(*args, **kwargs)

    def set_under(self, *args, **kwargs):
        self.cmap_a.set_under(*args, **kwargs)
        self.cmap_b.set_under(*args, **kwargs) # not really needed

    def is_gray(self):
        return False 
```

[`colors.Colormap`类定义](http://matplotlib.org/api/colors_api.html)。

您还需要深入研究这些`Normalize`课程。彩色地图只知道`[0, 1]`，因此您必须确保将`norm`地图映射到`.5`您希望进行更改的位置。

您可能可以将其概括为获取地图和分割点列表，并根据需要拥有尽可能多的颜色地图。这也需要各种形式的健全性检查。

如果您重新规范化输入，您还可以使用它来制作*任何*现有颜色图的定期版本，方法是将颜色图传递给它并且它是反向伙伴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:07:02.947

我认为自己制作颜色图更简单，尤其是当涉及的颜色很少时。这个是橙白蓝的。

```
cdict = {'red':   [ (0.0,   0.0, 0.0),
                    (0.475, 1.0, 1.0),
                    (0.525, 1.0, 1.0),
                    (1.0,   1.0, 1.0)
                  ],
         'green': [ (0.0,   0.0, 0.0),
                    (0.475, 1.0, 1.0),
                    (0.525, 1.0, 1.0),
                    (1.0,   0.65, 0.0)
                  ],
         'blue':  [ (0.0,   1.0, 1.0),
                    (0.475, 1.0, 1.0),
                    (0.525, 1.0, 1.0),
                    (1.0,   0.0, 0.0)
                  ]
}
rwb_cmap = matplotlib.colors.LinearSegmentedColormap(name = 'rwb_colormap', colors = cdict, N = 256) 
```

颜色图是 RGB 值的字典。对于每种颜色，元组列表给出了不同的段。每个段都是沿 z 轴的一个点，范围从 0 到 1。级别的颜色是从这些段内插的。

```
segment z-axis  end      start
i       z[i]    v0[i]    v1[i]
i+1     z[i+1]  v0[i+1]  v1[i+1]   
i+2     z[i+2]  v0[i+2]  v1[i+2] 
```

`z[i]`和之间的级别将在等`z[i+1]`之间具有颜色。这使得“跳跃”颜色成为可能。并且不使用。您可以根据需要使用任意数量的细分。（改编自这里： http: [//matplotlib.org/api/colors_api.html#matplotlib.colors.LinearSegmentedColormap](http://matplotlib.org/api/colors_api.html#matplotlib.colors.LinearSegmentedColormap)）`v1[i]``v0[i+1]``v0[0]``v1[-1]`

`N`是量化级别的数量。因此，`N = 256`它将为 256 个级别插入地图。出于懒惰，我使用 256。我想你在设置`N = 6`和制作 4 个轮廓时必须小心。

0.475 和 0.525 是为了确保中间轮廓是真正的白色。对于级别`[-1.5, -0.5, 0.5, 1.5]`，填充现在是橙-白-蓝。如果我使用 0.5 代替，中间级别将是蓝色和橙色的插值。

橙色的 RGB 代码为 255-165-0，如果比例为 0-1，则为 1-0.65-0。

# azure - 连接到新的 Azure 缓存（DataCache、DataCacheFactory 和连接池）

> ID：15399102
> 
> 赞同：7
> 
> 时间：2013-03-14T00:30:04.837
> 
> 标签：azure, azure-caching

Windows Azure[缓存文档](http://msdn.microsoft.com/en-us/library/windowsazure/hh914158.aspx)说

> 如果可能，存储和重用相同的 DataCacheFactory 对象以节省内存并优化性能。”

有没有人看到任何指标或任何量化这有多昂贵？

[一种说法是](https://stackoverflow.com/questions/3784299/appfabric-caching-proper-use-of-datacachefactory-and-datacache)

> “MaxConnectionsToServer 设置...确定每个 DataCacheFactory 向缓存集群打开的通道数。”

因此，如果 MaxConnectionsToServer = 1 并且 DataCacheFactory 是您的应用程序中的单例，那么您已经有效地将所有请求同步到您的 Web 服务器！

但是，[有很多](https://stackoverflow.com/questions/10352468/azure-alternative-method-to-slow-windows-azure-caching-for-multi-instances)[迹象](https://stackoverflow.com/questions/11885308/implement-azure-colocated-caching) [表明](https://stackoverflow.com/questions/9413778/best-practice-when-using-azure-appfabric-caching-service) DataCacheFactory 应该是一个单例（即放在 Application_OnStart 中）。

这很关键，我不敢相信它不在 Microsoft 文档中。DataCacheFactory 在 AppFabric、Azure 共享缓存和 Azure 缓存中的处理方式是否相同？我只是很难相信微软以需要单例工厂对象的方式设计缓存。这就像要求任何使用 SqlConnection 的人在他们的应用程序中拥有一个单例 SqlConnectionFactory 对象。

因此，考虑一个相对平均的 Web 应用程序（例如，每小时 1,000 次请求，缓存中约 100 个对象，平均请求访问 5 个缓存对象）：

1.  默认情况下（和推荐）一次应该有多少个工厂对象？
2.  创建 DataCacheFactory 引用需要多长时间？
3.  创建 DataCache 引用需要多长时间？
4.  每个应用程序应该只有 1 个 DataCacheFactory 对象，每个请求只有 1 个 DataCache 引用吗？

* * *

编辑（正在进行的答案）：

（1/2）。让 Azure 连接池处理工厂对象

(3)。还在测试.​​..

(4)。仍在试图弄清楚我是否应该重新使用 DataCache 引用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T23:53:59.217

怎么样，微软确实记录了最佳实践，并且确实涉及连接池！虽然不容易找到（至少对我来说）。

看来答案只是在实现较新的 Azure 缓存时不使用 DataCacheFactory 对象，而直接[访问 DataCache 对象](http://msdn.microsoft.com/en-us/library/hh916611.aspx#section_8)

> “DataCache 构造函数还有新的重载，使创建缓存客户端变得更简单。过去，总是需要创建返回目标缓存的 DataCacheFactory 对象。现在可以使用 DataCache 创建缓存直接构造函数。下面的示例从配置文件的默认部分创建一个到默认缓存的客户端。

```
DataCache cache = new DataCache(); 
```

[并使用连接池](http://msdn.microsoft.com/en-us/library/hh916611.aspx#section_4)。

> “使用最新的 Windows Azure SDK，当您在应用程序或 Web 配置文件中定义缓存设置时，默认启用连接池。由于这种默认行为，正确设置连接池的大小非常重要。连接池大小是使用 dataCacheClient 元素上的 maxConnectionsToServer 属性配置的。”

我希望微软就如何正确配置 maxConnectionsToServer 提供一些指导，但这可以通过测试来确定。使用新 Azure 缓存的自动连接池非常酷 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:44:34.077

我假设您指的是共享缓存服务（以前称为 Azure AppFabric 缓存）每个单独的连接没有成本。但是，当您购买缓存帐户时，您不仅要为缓存帐户的大小付费，还要为特定数量的连接付费。

最小的缓存帐户每小时有 10 个连接，而最昂贵的一个允许 160 个并发连接。因此，如果您担心鉴于您的帐户大小可能会用完连接，那么谨慎地注意您从应用程序打开的连接数可能是谨慎的。

更多详细信息 [http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx)

# javascript - 使用 jQuery 隐藏共享点表上的列

> ID：15399106
> 
> 赞同：0
> 
> 时间：2013-03-14T00:30:23.600
> 
> 标签：javascript, jquery, asp.net, sharepoint

我正在使用 jquery 隐藏共享点表的行，但问题是每次用户与表交互时，它都会重新加载并且以前隐藏的列又回来了。

```
$j.each(["Type", "Course ID", "Due Date", "Grade"], function(index, value){
    $j(".dxgvHeader_AquaMod", table).each(function(){
        var loopOnce = false;
        if($j("td:first-child", this).text() === value){
            loopOnce = true;
            var index = $(this).index();
            $j(".dxgvFocusedRow_AquaMod>td, dxgvRow_AquaMod>td").each(function(){
                if($j(this).index() === index){
                    $j(this).css("display", "none");
                }
            }); 
            $(this).css("display", "none"); 
        }
    });
    $j(".dxgvTable_AquaMod").css("width", "auto");
    $j(".dxgvTable_AquaMod").css("table-layout", "auto");
}); 
```

您能帮我永久删除这些列，或者每次表格发生问题时重新隐藏它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:44:43.157

您可以将 .on() 函数与委托一起使用，以便隐藏元素的所有新实例。

但是，如果这是一个视图，为什么不直接删除视图设置中的列呢？

顺便说一句，根据您的代码，您似乎指的是列，而不是行。

# arrays - 如何使用用户输入在 LISP 中创建数组？

> ID：15399107
> 
> 赞同：0
> 
> 时间：2013-03-14T00:30:45.840
> 
> 标签：arrays, input, elisp, interactive

我正在为一门大学课程学习 eLISP，但我在一个项目上遇到了一些麻烦。我正在尝试编写一个采用列表和大小的方法，然后用用户输入填充该列表。我无法让 eLISP 实际请求输入——出于某种原因，交互式调用无法正常工作。请注意，我使用的是“Array”而不是“List”，因为这就是我编写其他 3 个脚本的方式，现在我太困惑了，无法更改它。

这是我的代码：

```
(defun readArray(anArray size)
  (if (>= size 0)
      (progn
        (setq value 0)
        (princ "Enter values maybe?\n") ;;note this line is executed,so I think the prog is working
        (interactive "\nnEnter a value: ")
        (setq anArray (list value (readArray (- size 1))))))) 
```

运行 (readArray 4) 给了我以下输出：

```
Enter values maybe?
Enter values maybe?
Enter values maybe?
Enter values maybe?
Enter values maybe?
(0 (0 (0 (0 ...)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:45:23.217

试试这个：

```
(defun read-list (size)
  (if (> size 0)
      (let ((value (read-from-minibuffer "Enter value maybe? " nil nil t)))
        (cons value (read-list (- size 1)))))) 
```

`read-from-minibuffer`打印提示并读取用户的响应。

# mysql - mysql巨大的操作

> ID：15399108
> 
> 赞同：1
> 
> 时间：2013-03-14T00:30:50.313
> 
> 标签：mysql, ruby-on-rails, database

我目前正在将一个巨大的 CSV 文件从我的 iPhone 导入到 rails 服务器。在这种情况下，服务器将解析数据，然后开始将数据行插入数据库。CSV 文件相当大，操作结束需要很长时间。

由于我是异步执行此操作，因此我的 iPhone 可以转到其他视图并执行其他操作。

但是，当它在另一个表中请求另一个查询时.. 这将挂起，因为第一个操作仍在尝试将 CSV 的信息插入数据库。

有没有办法解决这类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:25:58.037

只要手机不关心数据库插入何时完成，您可能希望尝试将 CSV 文件存储在服务器上的 tmp 目录中，然后将脚本从该文件写入数据库。或者只是将其存储在内存中。这样，一旦手机发布了 CSV 文件，它就可以在脚本异步处理数据库插入时继续做其他事情。是的，@Barmar 关于使用 InnoDB 引擎而不是 MyISAM（在某些配置中可能是默认设置）是正确的。

或者，您可能需要考虑启用“低优先级更新”，这将延迟写入调用，直到所有挂起的读取调用完成。请参阅[这篇](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)关于 MySQL 表锁定的文章。（我不确定你说的到底是什么挂起：更新，或者在执行更新时读取......）

无论如何，如果您从手机异步发布数据（即，不是从 UI 线程），只要您不尝试使用超过最大并发 HTTP 连接数，这应该不是问题。

# ios - 处理多个 NSURLRequest

> ID：15399110
> 
> 赞同：0
> 
> 时间：2013-03-14T00:31:08.340
> 
> 标签：ios, ios6, nsurlrequest

我有两个`NSURLRequest`对象，连接到 Web 服务并调用 2 个不同的服务。

问题是我有一个随机结果，有时第一个显示第一个，有时第二个显示第`NSURLRequest`一个。

```
NSString *urla=@"http://localhost:8080/stmanagement/management/retrieve_dataA/?match_link=";
NSString *uria = [urla stringByAppendingString:self.lien_match];
NSURL *urlla= [ NSURL URLWithString:uria];
NSURLRequest *requesta =[ NSURLRequest requestWithURL:urlla];

NSString *urlb=@"http://localhost:8080/stmanagement/management/retrieve_dataB/?match_link=";
NSString *urib = [urlb stringByAppendingString:self.lien_match];
NSURL *urllb= [ NSURL URLWithString:urib];
NSURLRequest *requestb =[ NSURLRequest requestWithURL:urllb];

connectiona=[NSURLConnection connectionWithRequest:requesta delegate:self];
connectionb=[NSURLConnection connectionWithRequest:requestb delegate:self];

if (connectiona){
    webDataa=[[NSMutableData alloc]init];
}

if (connectionb){
    webDatab=[[NSMutableData alloc]init];
} 
```

我在做什么是正确的吗？我应该在两个`NSURLRequest`s 之间添加一个小中断吗？

因为在每次视图执行时我都有一个随机结果。（我将结果设置为两个`UITableView`对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:02:56.280

我认为您的“问题”是您的**两个**`self`连接的连接委托。这些类型的连接是*异步*的，因此不能保证 A 会在 B 之前完成。您的代码应该处理 Web 服务器返回数据的任何顺序。

 ***我想您可以使这两种方法*同步*（在 A 完成之前不要启动 B），但我认为没有**必**要这样做。

好消息是`NSURLConnectionDelegate`回调将`NSURLConnection`对象传递给您，因此您可以使用它来确定您收到的是对 A 还是 B 的响应。该信息应该告诉您是将数据放入 A 还是 B Web 数据对象中，以及在请求完成时是否更新表视图 A 或 B。例如：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // determine which request/connection this is for
    if (connection == connectiona) {
        [webDataa appendData: data];
    } else if (connection == connectionb) {
        [webDatab appendData: data];
    }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // determine which request/connection this is for
    if (connection == connectiona) {
        NSLog(@"Succeeded! Received %d bytes of data",[webDataa length]); 
        // TODO(?): update the data source for UITableView (A) and call:
        [tableViewA reloadData];  
    } else if (connection == connectionb) {
        NSLog(@"Succeeded! Received %d bytes of data",[webDatab length]);   
        // TODO(?): update the data source for UITableView (B) and call:
        [tableViewB reloadData];  
    }

    // release the connection* and webData* objects if not using ARC,
    //  otherwise probably just set them to nil
} 
```

此解决方案要求您在发布的代码中保留`connectiona`并`connectionb`作为持久*变量*，而不是局部变量。看起来您可能正在这样做，但由于您没有出示他们的声明，我只是想确定一下。

当然，您还应该[实现其他委托回调，](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)但以上两个应该为您提供一般解决方案的一个很好的示例。***

# php - 从 SimpleXML 对象中检索值

> ID：15399111
> 
> 赞同：0
> 
> 时间：2013-03-14T00:31:07.987
> 
> 标签：php, xml, parsing, simplexml

请原谅我问了这样一个“菜鸟”的问题，但我一直试图找到一个简单的例子来说明如何在过去几个小时内循环遍历我返回的 xml，但我无处可去。我只想能够循环浏览 xml 并为每个订单提取“金额”属性和“AmazonOrderId”属性。我不知道如何循环，也不知道如何获取相关数据。

```
SimpleXMLElement Object
(
    [ListOrdersResult] => SimpleXMLElement Object
        (
            [Orders] => SimpleXMLElement Object
                (
                    [Order] => Array
                        (
                            [0] => SimpleXMLElement Object
                                (
                                    [ShipmentServiceLevelCategory] => SecondDay
                                    [OrderTotal] => SimpleXMLElement Object
                                        (
                                            [Amount] => 5.93
                                            [CurrencyCode] => USD
                                        )

                                    [SellerOrderId] => 107-1261608-7067458
                                    [FulfillmentChannel] => AFN
                                    [BuyerEmail] => 5qhs64ktb88pdsj@marketplace.amazon.com
                                    [OrderStatus] => Shipped
                                    [BuyerName] => Derrick D Vann
                                    [ShipServiceLevel] => SecondDay
                                    [LastUpdateDate] => 2013-03-13T02:20:31Z
                                    [PurchaseDate] => 2013-03-11T06:14:40Z
                                    [NumberOfItemsUnshipped] => 0
                                    [MarketplaceId] => ATVPDKIKX0DER
                                    [SalesChannel] => Amazon.com
                                    [ShippingAddress] => SimpleXMLElement Object
                                        (
                                            [Phone] => 202 746-2567
                                            [PostalCode] => 20001-4040
                                            [Name] => Derrick Vann
                                            [CountryCode] => US
                                            [StateOrRegion] => DC
                                            [AddressLine1] => 2120 Vermont Ave NW Apt 117
                                            [City] => Washington
                                        )

                                    [NumberOfItemsShipped] => 1
                                    [AmazonOrderId] => 107-1261608-7067458
                                    [PaymentMethod] => Other
                                )

                            [1] => SimpleXMLElement Object
                                (
                                    [ShipmentServiceLevelCategory] => Expedited
                                    [OrderTotal] => SimpleXMLElement Object
                                        (
                                            [Amount] => 23.30
                                            [CurrencyCode] => USD
                                        )

                                    [SellerOrderId] => 104-9066827-4446667
                                    [FulfillmentChannel] => AFN
                                    [BuyerEmail] => 6kfc88nrsnm83fq@marketplace.amazon.com
                                    [OrderStatus] => Shipped
                                    [BuyerName] => Quoc Bui
                                    [ShipServiceLevel] => Expedited
                                    [LastUpdateDate] => 2013-03-13T09:34:26Z
                                    [PurchaseDate] => 2013-03-11T08:07:13Z
                                    [NumberOfItemsUnshipped] => 0
                                    [MarketplaceId] => ATVPDKIKX0DER
                                    [SalesChannel] => Amazon.com
                                    [ShippingAddress] => SimpleXMLElement Object
                                        (
                                            [Phone] => (02) 9560 3639
                                            [PostalCode] => 2204
                                            [Name] => Quoc Minh Bui
                                            [CountryCode] => AU
                                            [StateOrRegion] => New South Wales
                                            [AddressLine1] => 19 Centennial St
                                            [City] => Marrickville
                                        )

                                    [NumberOfItemsShipped] => 1
                                    [AmazonOrderId] => 104-9066827-4446667
                                    [PaymentMethod] => Other
                                )
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:34:22.617

SimpleXML 很棒，不是吗？

```
foreach ($xml->ListOrdersResult->Orders->Order as $order) {
    $amazonOrderId = (string) $order->AmazonOrderId;
    $orderTotal    = (string) $order->OrderTotal->Amount;
} 
```

我使用`(string)`类型转换，因为否则你会得到`SimpleXMLElement`那些标量值的 s 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:57:41.160

> 拉取每个订单的“金额”属性和“AmazonOrderId”属性。

如果我逐字逐句地告诉您，那么这就是您要查找的内容：

```
$allThoseAttributes = $xml->xpath('//Order/@Amount|//Order/@AmazonOrderId'); 
```

但是，您更有可能正在寻找：

```
$orders = [];
foreach ($xml->xpath('//Order') as $order) {
    $orders[] = [
        'amazon' => (string)  $order->AmazonOrderId
        'total'  => (string)  $order->OrderTotal->Amount;
    ];
} 
```

因为你所说的属性是事实上的元素。如果您想了解有关 XML 和 Xpath 的更多信息，请阅读：[XPath](http://schlitt.info/opensource/blog/0704_xpath.html)

# android - 死函数不会从 Android NDK 构建的共享对象中删除

> ID：15399113
> 
> 赞同：3
> 
> 时间：2013-03-14T00:31:14.380
> 
> 标签：android, gcc, android-ndk, native

我们注意到，一些死函数没有从生成的共享对象文件 (.so) 中删除，该文件是作为发布版本构建的（通过“ndk-build”，不带任何参数）。

为了证明我们引入了一个绝对不会在任何地方调用的虚拟函数（也不会导出，因为整个 .so 的默认可见性已经设置为“隐藏”）。不知何故，虚拟函数的符号仍然存在，我们可以通过对生成的 .so 使用“nm”来查看它。

我们在 Linux 11.10 上使用 NDK r8d。

是否有任何特定的编译器/链接器标志需要我们应用到 Android.mk 才能删除死代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:12:05.943

删除死函数也可以大大减少二进制文件的大小。为此，更改 C 和 C++ 编译标志以及`Android.mk`.

```
LOCAL_CPPFLAGS += -ffunction-sections -fdata-sections
LOCAL_CFLAGS += -ffunction-sections -fdata-sections 
LOCAL_LDFLAGS += -Wl,--gc-sections 
```

此外，`visibility`GCC 中的功能也会有所帮助。 [http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

# java - 尝试在 Java 中实现数组堆栈但推送不起作用

> ID：15399114
> 
> 赞同：1
> 
> 时间：2013-03-14T00:31:22.873
> 
> 标签：java, arrays, stack

我已经工作了几个小时，试图获得一个基于构建和实现的数组的堆栈。我检查了几个来源，看起来我的 ArrayStack 类构造正确。但是，当我运行调试时，'head' 保持为空，并且 size & sp 回到 0：因此，实际上没有任何东西被压入堆栈。有人可以帮助我了解我错误地实施了什么吗？

这是我的 ArrayStack 类：

```
public class ArrayStack <T>{
    protected int sp; //empty stack
    protected T[] head; //array
    private int size;

    @SuppressWarnings("unchecked")
    public void stack(T t){
        sp = -1;
        size = 24; //sets the default size of the stack
        head = (T[]) new Object [size];
    }
    public boolean isFull(){
        return sp == -1;
    }
    public void push (T t){
        if (!isFull())
            head[++sp] = t;
    }
    public T pop (){
        if (isFull()){
            return null;
        }
        else 
            return head[sp--];  //LINE 30
    }
} 
```

这是我的主要方法：

```
public class StacksAndQsMain {

    public static void main(String[] args) {
        //Array Implementation
        ArrayStack<String> as  = new ArrayStack<String>();

        String s = "Hello";
        String s1 = "World";
        String s2 = "Again";

        as.push(s);
        as.push(s1);
        as.push(s2);

        System.out.println (as.pop()); //LINE 15
        System.out.println();
        System.out.println (as.pop());
        System.out.println();
        System.out.println (as.pop());
        System.out.println();
    }

} 
```

最后，这是我的堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
at stackAndQs.ArrayStack.pop(ArrayStack.java:30)
at stackAndQs.StacksAndQsMain.main(StacksAndQsMain.java:15) 
```

我在 public void push (T t) 时的变量

```
this       ArrayStack<T>  (id=17)   
head       null 
size       0    
sp     0    
t      "Hello" (id=18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:37:22.490

您正在使用该类的默认构造函数，它将所有数据成员初始化为其默认值：

```
public class ArrayStack <T>{
protected int sp; //empty stack  <-- initialized to 0
protected T[] head; //array <-- initialized to null
private int size; // <-- initialized to 0
// ... snip
} 
```

您需要实现默认构造函数以将此对象状态初始化为您想要的默认值（在 stack() 方法中）。当您调用 push 时，isFull 方法将返回 false（作为默认整数值 0 ！= -1）。

除了实现默认构造函数，您可以在使用它之前调用 stack()，但是没有理由让您的对象在一个陷阱状态下构造！

此外，您的 isFull 方法应该根据 size 变量检查 sp，现在它的行为类似于 isEmpty 检查:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:39:23.407

您没有使用任何自定义构造函数。您正在使用默认值，这会导致您的`sp`变量为“0”而不是“-1”。这会在您推送之后产生一个`sp`值，但其中没有数据，这会在您尝试弹出它时导致 NPE。`3``sp[3]`

`stack`将您的方法更改为

```
public ArrayStack(T t){
       sp = -1;
       size = 24; //sets the default size of the stack
       head = (T[]) new Object [size];
} 
```

使其成为自定义构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:45:24.847

我注意到两件事。

首先，正如其他人提到的，您需要创建一个构造函数并初始化数组。其次，该`isFull`方法应该检查 sp != this.size -1，基本上确保您没有达到堆栈实现的 24 个元素的限制。改完后，`isFull`应该在push方法中否定if条件，检查栈是否未满。另外，我会删除对`pop`方法的检查以检查是否堆栈`isFull`，为什么仅仅因为堆栈已满而阻止某人弹出元素？而是检查堆栈是否为空。

```
public class ArrayStack<T> {
    protected int sp; // empty stack
    protected T[] head; // array
    private int size;

    @SuppressWarnings("unchecked")
    public ArrayStack() {
        sp = -1;
        size = 24; // sets the default size of the stack
        head = (T[]) new Object[size];
    }

    public boolean isFull() {
        return sp == this.size -1;
    }

    public boolean isEmpty() {
        return sp == -1;
    }

    public void push(T t) {
        if (!isFull())
            head[++sp] = t;
    }

    public T pop() {
        if (isEmpty()) {
            return null;
        } else
            return head[sp--]; // LINE 30
    }

    public static void main(String[] args) {
        // Array Implementation
        ArrayStack<String> as = new ArrayStack<String>();

        String s = "Hello";
        String s1 = "World";
        String s2 = "Again";

        as.push(s);
        as.push(s1);
        as.push(s2);

        System.out.println(as.pop()); // LINE 15
        System.out.println();
        System.out.println(as.pop());
        System.out.println();
        System.out.println(as.pop());
        System.out.println();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:41:11.910

按下“Hello”（第一个对象）后， **sp**变为**0**并分配了 head[0]。从这一刻起，所有进一步的“推动”都不会产生任何结果，因为您的 IsFull 仍在测试 (sp == -1)。

# ruby - 更改小数位数

> ID：15399115
> 
> 赞同：-2
> 
> 时间：2013-03-14T00:31:35.097
> 
> 标签：ruby, floating-point, constants

我制作了一个小脚本，它给出了带有 x 小数的数字 PI。我使用 Salamin-Brent 算法来查找 PI，但我不想使用 Math::PI。问题是结果总是有 15 位小数。

我找到了`Float::DIG`我重新定义的常数，但没有任何变化（即使我减少它）。

这是我重新定义它的方式：

```
puts Float::DIG         #=> 15
Float::DIG = 2
puts Float::DIG         #=> 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:38:36.297

除了 oldgod 使用字符串操作的原始答案

```
'%0.4f' % Math::PI # "3.1416" 
```

你也可以使用`round`

```
Math::PI.round(4) # 3.1416 
```

`4`在这两个示例中，确定您想要的小数位数。两者的主要区别是第一个返回一个字符串，第二个返回一个浮点数。我更喜欢第二个，因为它更容易阅读。

# php - Flash / Php LCCS（现在是 Influxis RTC）未捕获的异常“RTCError”

> ID：15399116
> 
> 赞同：0
> 
> 时间：2013-03-14T00:32:02.220
> 
> 标签：php, apache, flash, apache-flex, lccs

我有一个在我的 localhost 机器（我在 Mac 上使用）中`Flex/PHP`使用（例如 Adob​​e LCCS 服务）的应用程序，一切正常，但是当相同的应用程序文件上传到远程主机（由 Arvixe 提供）时，我收到此错误：`Influxis RTC``MAMP`

```
$Revision: #11 $ - $Date: 2011/07/27 $ http_get: [my account path]?mode=xml&accountonly=true& Array ( [headers] => Array ( ) [readbuf] => Resource id #4 ) 
Fatal error: Uncaught exception 'RTCError' in [my server path]/lccs.php:797 Stack trace: #0 [my server path]/lccs.php(670): RTC::http_get('[my account path]', Array) #1 [my server path]/lccs.php(259): RTCAccount->do_initialize() #2 [my server path]/index.php(31): RTCAccount->__construct('beta.ics...') #3 {main} thrown in [my server path]/lccs.php on line 797 
```

有没有人可以在设置方面给我任何帮助`PHP`？任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:44:05.233

这是来自 Influxis 的詹姆斯。请给我们发送电子邮件至 ICS 支持 (icssupport@influxis.com)，我们会帮助您启动和运行它。

谢谢，

詹姆士

# ruby - 我在 Rails 应用程序中的最后一步，如何让评论出现在弹出窗口中？

> ID：15399118
> 
> 赞同：0
> 
> 时间：2013-03-14T00:32:10.097
> 
> 标签：ruby, ruby-on-rails-3, html, facebox

这是完成我的第一个 Rails 应用程序的最后一个项目，需要一些帮助。在每个用户配置文件（localhost:3000/users/username）上，都有一个用户发布的帖子列表。与每个帖子相关的是评论。所以 post_id: 3 可以有评论。

我已经在视图表单中工作了，但是当单击每个帖子下的“评论”链接时，我需要评论出现在弹出窗口中。我已经应用了 facebox，它是一个基于 jQuery 的灯箱，可以显示弹出窗口。

我只需要将 show.html.erb 中当前显示的内容移动到弹出窗口中。

有 _comment_form.html.erb 渲染成 _post.html.erb

```
 <%= link_to #, :rel => "facebox-#{post.id}" do %>
  +<%= post.comments.count.to_s %>
<% end %>
 <div class ="ItemComments"><% if post.comments.exists? %>
   <% post.comments.each do |comment| %>
   <%= image_tag("http://www.gravatar.com/avatar.php?gravatar_id=#{Digest::MD5::hexdigest(comment.user.email)}" %>
   <span class="users"><%= link_to comment.user.name, comment.user %></span>
   <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
   <span class="content2"><%= comment.comment_content %></span>
   <% end %>
 <% end %></div> 
```

上面的渲染到 _post.html.erb 使用：

```
<%= render 'shared/comment_form', post: post if signed_in?%> 
```

然后渲染成 show.html.erb

我正在尝试使用这条线，但我要将它链接到什么？

```
 <%= link_to #, :rel => "facebox-#{post.id}" do %>
  +<%= post.comments.count.to_s %>
<% end %> 
```

这是 shared/_comment.html.erb

```
<% if post.comments.exists? %>
  <% post.comments.each do |comment| %>
  <%= image_tag("http://www.gravatar.com/avatar.php?gravatar") %>
    <%= link_to comment.user.name, comment.user %>
            <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
    <span class="content2"><%= comment.comment_content %></span>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:53:36.600

这样做的一种方法是将您的评论呈现到隐藏的 div 中并给该 div 一个 id。接下来，您使用 # 后跟 id 将链接指向 div 的 id。它看起来像这样：

_post.html.erb

```
<%= link_to "#comments", :rel => "facebox" do %>
    <%= post.comments.count.to_s %>
<% end %>
<div id="comments">
    <%= render 'shared/comment_form', post: post if signed_in?%>
</div> 
```

CSS

```
#comments {
    display: none;
} 
```

[请参阅Facebox 文档](http://defunkt.io/facebox/)中的“Divs”标题。

# hardware - PCI 设备的 Linux 驱动程序不能热插拔

> ID：15399119
> 
> 赞同：4
> 
> 时间：2013-03-14T00:32:18.513
> 
> 标签：hardware, linux-device-driver

我正在为必须可*热插拔*的 PCIe 设备编写 Linux PCI 驱动程序。

该设备通过电缆连接到适合 PCIe 插槽的 PCIe 转接驱动卡。

当设备在启动时插入时，我可以找到它`lspci`，并且驱动程序探测成功。但是，如果在运行时拔下电缆，`lspci`仍然显示设备存在，并且`remove`即使在将“1”回显到 后，也不会调用驱动程序的 PCI 方法`/sys/bus/pci/rescan`。

`lspci`如果设备在启动时未插入，则此问题会自行反转：即使在连接电缆后也不会显示，并且`probe`不会调用该方法。

我的模块使用`pci_register_driver()`and`pci_unregister_driver()`库；驱动程序仅使用`probe`and`remove`方法（no `suspend`or `resume`），并`id_table`初始化`vendor id`and `device id`。

Linux 内核中是否有需要调用的函数来注册 PCI 设备以进行*热插拔*？

# android - ACTION_IMAGE_CAPTURE 意图返回的缩略图大小是多少

> ID：15399121
> 
> 赞同：2
> 
> 时间：2013-03-14T00:32:46.830
> 
> 标签：android, thumbnails, android-image, mediastore, image-capture

我正在使用标准相机意图拍照：

```
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePictureIntent, actionCode); 
```

然后在*onActivityResult* ()

```
Bundle extras = intent.getExtras();
Bitmap imageBitmap = (Bitmap) extras.get("data");
mImageView.setImageBitmap(imageBitmap); 
```

位图是缩略图。太好了 - 我不需要全尺寸图像。

在用户可以拍照之前，我会显示一个默认缩略图，他们可以单击它并打开相机。但是，我不知道默认缩略图的大小。

1.  相机应用程序会为每个设备返回不同大小的缩略图吗？
2.  有安卓标准吗？
3.  某些设备会返回非常小或非常大的缩略图吗？在这种情况下，我需要事先指定尺寸。我怎样才能做到这一点？

MediaStore.Images.Thumbnails.MICRO_KIND 是 96x96。 [http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html) 是默认返回的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T14:52:28.283

缩略图的大小由相机功能决定。`Camera.Parameters`类定义[getJpegThumbnailSize()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getJpegThumbnailSize%28%29)方法。

# html - 如何使我的 div 居中

> ID：15399123
> 
> 赞同：1
> 
> 时间：2013-03-14T00:33:03.060
> 
> 标签：html, center

我用谷歌搜索了很多次，我不明白为什么我的 div 不会居中。

HTML：

```
<body><div id="mydiv"></div></body> 
```

css

```
*{
    margin:0; 
    padding:0; 
}           
html,body{height:100%; width:100%;}

#mydiv{ 
            height:50%;
            width:50%;
            background:grey;
            margin:auto;

} 
```

它只水平居中，不会垂直居中，这是什么问题，因为我没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:38:40.383

如果您也需要垂直居中，请参阅死点方法，您将需要一些额外`<div>`的 s 但它应该会有所帮助！

[http://www.wpdfd.com/edittorial/thebox/deadcentre4.html](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:44:20.407

希望对你有用：http: [//jsfiddle.net/Ug3RM/](http://jsfiddle.net/Ug3RM/)

```
#mydiv{ 
        position:absolute;
        top:50%;
        left:50%;
        height:50%;
        width:50%;
        margin-top:-25%;
        margin-left:-25%;
        background:grey;

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:45:05.467

尝试类似：

```
#mydiv { 
    height:50%;
    width:50%;
    background:grey;
    position:absolute;
    top:25%;
    left:25%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:49:27.010

操作，

检查[这个小提琴](http://jsfiddle.net/3gRqn/)。垂直和水平居中。

使用`display:table`and`display:table-cell`方法，可以方便`vertical-align: middle`地与`margin: auto`.

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T00:41:41.477

要垂直对齐，您可以尝试像这样设置边距：

```
#myDiv{margin:50% auto;} 
```

当然，这将取决于您的包含元素。但是，如果标记与您提供的一样，它应该在中心垂直对齐显示...

# php - 用于随机绘图的 mt_rand 的奇怪行为

> ID：15399126
> 
> 赞同：0
> 
> 时间：2013-03-14T00:33:25.833
> 
> 标签：php, random, plot, gd

这是生成 x 标记的代码：

```
for ($i = 0; $i < $maxdata; $i++)
{
  $xcoord = mt_rand(50, 450);
  $ycoord = mt_rand(50, 450);
  imagechar($im, 5, $xcoord, $ycoord, $string, $black);
  if (($xcoord < 50) || ($xcoord > 450) || ($ycoord < 50) || ($ycoord > 450))
  {
    $p_bad += 1;
  }
} 
```

但是这种情况发生了（在 y 坐标上得分不好）：http: [//imgur.com/2TZXfY1](http://imgur.com/2TZXfY1)

Rly 不知道问题出在哪里，图像大小是 500 x 500 像素，x 坐标是 50 到 450 像素，y 坐标也是 50 到 450 像素...

# c++ - 将头文件链接到 C++ 中的实现文件

> ID：15399128
> 
> 赞同：1
> 
> 时间：2013-03-14T00:33:29.273
> 
> 标签：c++

我有一个关于在 C++ 中链接文件的特殊问题。假设我有一个名为 fmttime.h 的头文件，我想将它链接到 fmttime.cc（实现文件），这就是我到目前为止所做的

```
 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime);
 int main()
 {
     struct timeval tv;
     struct ExpandedTime etime;
     gettimeofday(&tv, NULL);
     localTime(&tv,&etime);

 }

 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
 {
     tzset(); // Corrects timezone

     int epochT = (tv->tv_sec) - timezone; // Epoch seconds with
     int epochUT = tv->tv_usec;  // Timezone correction

     int seconds = epochT % 60;
     epochT /= 60;
     etime->et_sec = seconds;
     etime->et_usec = epochUT;

     int minutes = epochT % 60;
     epochT /= 60;
     etime->et_min = minutes;

     int hours = (epochT % 24) + daylight; // Hours with DST correction
     epochT /= 24;
     etime->et_hour = hours;

     printf("%d,%d,%d\n", seconds, minutes, hours);
     printf("%d\n", epochUT);
     printf("%d\n", timezone);
     printf("%d\n", daylight);
     return etime;
 } 
```

所以基本上我已经在标题中包含了 fmttime.h 。我对整个过程有几个问题。在 fmttime.h 中，我只有这个函数原型（这是我实际需要的全部）。

```
 // Interface file for fmttime.h which is including the fmttime.c
 // Contains function prototype

 char* formatTime(struct timeval* tv, char* buf, size_t len); 
```

现在如果我想在我的 fmttime.cc 实现文件中使用这个函数，我需要重新声明函数原型吗？或者是否可以跳过它，因为头文件已经包含它并因此包含在 fmttime.cc 中，因为通过#include 链接。

所以我基本上想添加到 .CC 文件 char* formatTime (struct timeval*.....) 但我不确定我是否仍然需要在 .CC 中声明原型或在 fmttime.h 中处理它文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T00:45:24.553

`#include`读取文件实际上是一种文本替换操作。标头的内容只是直接粘贴到包含它的文件中。

所以，你可以自己回答这个问题。试想一下，头文件中的代码*实际上也在*实现文件中（因为它是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:49:14.827

头文件仅#included 到源文件中。它们没有链接。在处理预处理器指令（例如#include）后，编译器会将源代码编译为目标文件 (.o)。然后将目标文件传递给链接器进行链接。

对于您的最后一个问题，我建议您尝试编译没有#include 指令的.CC 文件，然后#include 头文件并再次编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:21:01.280

记住：

.h/hpp -> 函数原型、变量/结构/枚举定义

.c/.cpp -> 函数实现（.c/.cpp 需要包括其相应的头文件）

# c# - 如何正确移动到 C# tcp 服务器中的下一个客户端？

> ID：15399136
> 
> 赞同：0
> 
> 时间：2013-03-14T00:34:24.963
> 
> 标签：c#, tcp

```
 tcpListener = new TcpListener(IPAddress.Any, 6007);
            tcpListener.Start();
            while (true)
            {
                TcpClient client = tcpListener.AcceptTcpClient();
                sw = new StreamWriter(client.GetStream());
                sr = new StreamReader(client.GetStream());
                while(true)
                    parseRequest(sr.ReadLine());
            } 
```

这本质上是我用于 C# tcp 服务器的代码。服务器需要处理多个连接，但不能同时处理，因此它可以与一个客户端一起工作，当该客户端断开连接时，继续连接到下一个客户端。客户端可以发送可变数量的消息，服务器需要处理这些消息。

问题是当第一个客户端断开连接时，它永远不会连接到下一个客户端。我尝试在我的第二个 while 循环中添加代码以检查“if (!Client.Connected) break;”但 Connected 始终返回 true，即使在我的客户端应用程序关闭之后也是如此。第一个客户端断开连接后，我该怎么做才能连接到第二个客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:34:04.353

您需要为每个接受的套接字启动一个新线程或注册一个新的侦听器，而不是在接受新客户端的同一循环中完全处理它。接受循环不应该做任何其他事情。

# javascript - jQuery .data()，需要接受数组元素作为键或找到替代（JSON？）

> ID：15399137
> 
> 赞同：2
> 
> 时间：2013-03-14T00:34:25.423
> 
> 标签：javascript, jquery, json, youtube-api

感谢您查看我的帖子。我正在为 Youtube 视频构建一个基于 jQuery 的选择器，并希望尽可能简化这个过程，因为我有很多要上传的内容。我想保持代码干燥，而不是在我的数据（）中重复 Youtube ID。

在 HTML 文件中，我将 Youtube iframe 创建脚本和每个视频的描述包含在一个单独的跨度中，我使用 eq() 对其进行迭代并分配给一个数组。我一直在尝试遍历 Youtube ID 号，将它们放入一个数组中，然后在 .data() 中使用这些数组元素，但只有键只接受字符串。我试图包装数组对象。我会尝试 JSON 操作，但我不确定这是否是最优雅的解决方案。

我能做些什么来最小化丑陋的 .data() 或利用我最初从函数收到的 ytKey 值？

```
//YT DESCriptor
$("#videoSelection").change(function() {
  ytKey = $(this).val();

  var clip = []
  for( var i = 0; i < 12; i++) {
    clip[i] = $('.xfactor span').eq(i).html();
  }

  var keys = []
  for( var i = 0; i < 12; i++) {
    keys[i] = $('#videoSelection option').eq(i).text();
  }

      $("body").data({
        "i_uWYLyDFTo" : clip[0],
        "EoVfXX1vjaY" : clip[1],
        "vBx4WRsSvMU" : clip[2],
        "XaWvQGC8zYU" : clip[3],
        "EAR2zKEASfw" : clip[4],
        "WYFgJd0w5-4" : clip[5],
        "Td9TuR86BOE" : clip[6],
        "g3yrh50fJnE" : clip[7],
        "eRepVIXl9ps" : clip[8],
        "CMfxvrf0DG4" : clip[9],
        "SGcJftL3HZc" : clip[10],
        "UwH6jrgRI4Y" : clip[11]
    });

  $("#open").empty();
  description = ( $("body").data(ytKey) );
  $("#open").append(description);
}); 
```

这是我的选择器标记，youtube API 可以选择：

```
<div id="videoDiv">Loading...</div>
  <div id="videoControls" class="desc">
    <p>Select a video to load:</p>
    <select id="videoSelection" onchange="loadVideo();">
      <option value="i_uWYLyDFTo" selected>No One Wants You</option>
      <option value="EoVfXX1vjaY">Hello Robot</option>
      <option value="vBx4WRsSvMU">Raymore & Hannaghan</option>
      <option value="XaWvQGC8zYU">The Return of Blood House Part II</option>
      <option value="EAR2zKEASfw">'batin'</option>
      <option value="WYFgJd0w5-4">Activities in Daily Living with Jimmy Callahan: Episode 1</option>
      <option value="Td9TuR86BOE">Two Shot Shorts: The Movie</option>
      <option value="g3yrh50fJnE">The Stand-off</option>
      <option value="eRepVIXl9ps">Psych-Hick</option>
      <option value="CMfxvrf0DG4">Hand Pop Body Swap</option>
      <option value="SGcJftL3HZc">Fat Camp</option>
      <option value="UwH6jrgRI4Y">The Hurting</option>
    </select>
  </div> 
```

理想情况下，我希望 .data() 看起来（以扩展的方式）像这样，但我不确定这是否由于 jQuery 的 API 而根本不可能：

```
 $("body").data({
        keys[0] : clip[0],
        keys[1] : clip[1],
        keys[2] : clip[2],
        keys[3] : clip[3],
        keys[4] : clip[4],
        keys[5] : clip[5],
        keys[6] : clip[6],
        keys[7] : clip[7],
        keys[8] : clip[8],
        keys[9] : clip[9],
        keys[10] : clip[10],
        keys[11] : clip[11]
    }); 
```

跨度示例（描述）：

```
<div class="xfactor">
    <span>
    Drunk-Noir (Our 1st Attempt)<br><br>
    Directed by John Keefer<br>
    Written by Dan D'Aprile, Chris Johnson, Dan Metzker, Sean Michael, John Keefer, Matt Poooooooooo-Ah, and Christine Wood<br>Edited by Chris Johnson<br><br>
    (Originally Aired 5/13/07)
    </span>

    <span>
    A man & his robot.<br><br>
    Written & Directed by John Keefer<br>
    Starring Dan Metzker<br>
    Edited by Chris Johnson<br>
    Music by Dan Metzker<br><br>
    (Originally Aired 5/22/07)
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:23:34.183

你可以这样做：

```
d = {}
$.each(keys, function(index, key) {
  d[key] = clips[index]
})
$('body').data(d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:08:48.137

假设描述（跨度）和您的视频选择（选择）将始终处于相同的顺序，并且具有相同数量的元素，您可以设置一个数组或对象来通过 videoID 存储信息：

```
//set descriptions
var videoDescriptions = {};
$(".xfactor span").each(function(index) {
  videoDescriptions[$('#videoSelection option').eq(index).text()] = $(this).html();
}); 
```

然后对于 onchange 事件：

```
$("#videoSelection").change(function() {
  //append the video description using the list we made.
  $("#open").empty().append(videoDescriptions[$(this).val()]);
}); 
```

# solr - Solr 过滤器查询缓存和自动预热

> ID：15399142
> 
> 赞同：0
> 
> 时间：2013-03-14T00:35:37.437
> 
> 标签：solr

对于 solr 自动预热，有什么方法可以自动预热之前执行的过滤器查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:26:24.783

是的。创建 firstSearcher 和 newSearcher 事件侦听器，如 Solr wiki 上所述：[http ://wiki.apache.org/solr/SolrCaching#newSearcher_and_firstSearcher_Event_Listeners](http://wiki.apache.org/solr/SolrCaching#newSearcher_and_firstSearcher_Event_Listeners)

它在你的 solrconfig.xml 中看起来像这样

```
<listener event="firstSearcher" class="solr.QuerySenderListener">
  <arr name="queries">
    <!-- seed common sort fields -->
    <lst> <str name="q">anything</str> <str name="sort">name desc, price desc, populartiy desc</str> </lst>
    <!-- seed common facets and filter queries -->
    <lst> <str name="q">anything</str>
          <str name="facet.field">category</str>
          <str name="fq">inStock:true</str>
          <str name="fq">price:[0 TO 100]</str>
    </lst>
  </arr>
</listener> 
```

# vb.net - 如何在使用 VB.NET 在 DataGridView 中编辑单元格时获取当前列索引

> ID：15399144
> 
> 赞同：5
> 
> 时间：2013-03-14T00:35:49.777
> 
> 标签：vb.net, datagridview

我有一个`DataGridView`5 列。
第 1 列和第 5 列的单元格是组合框。
每当我更改任何这些组合框时，我都会运行一个函数。

现在，为了使函数正常运行，我必须获取我编辑的 ComboBox 属于哪个 Column。

就像，当我更改属于第 1 列的 ComboBox 时，`Function 1`运行。
当我更改属于第 5 列的 ComboBox 时，`Function 2`运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:23:00.707

或者

```
DataGridView.CurrentCell.ColumnIndex 
```

然后，如果您有一个预定义的列`DataGridView`（例如列的名称将是`DataGridView_ComboBoxOne`）并且不想硬编码索引的比较

你可以这样使用：

```
Select case DataGridView.CurrentCell.ColumnIndex 
    Case DataGridView_ComboBoxOne.Index
        Function1()
    Case DataGridView_ComboBoxTwo.Index
        Function2()
    Case Else
        'Update of other columns
End Select 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T05:16:28.183

```
Dim columnIndex as Integer

columnIndex = e.ColumnIndex 
```

这是在不使用当前单元格的情况下获取列索引的直接方法。在 DataGridView1_ColumnHeaderMouseClick 下使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:40:26.497

啊，愚蠢的我，

```
DataGridView.CurrentCellAddress.X 'Column  
DataGridView.CurrentCellAddress.Y 'Row 
```

# bash - 在变量中捕获初始化脚本输出

> ID：15399148
> 
> 赞同：0
> 
> 时间：2013-03-14T00:36:03.500
> 
> 标签：bash, stdout, init.d

我试图将初始化脚本的输出捕获到一个变量中，但在这种情况下它不是很简单，因为初始化脚本正在使用 log_daemon_msg 和 log_failure_msg。为什么输出成功通过这个管道：

```
service tomcat7 start | grep Tomcat 
```

但不是这个？

```
service tomcat7 start | read OUTPUT; echo $OUTPUT 
```

在第二个示例中，$OUTPUT 的值是所有初始化脚本的列表，这不是我所期望的。类似地，下面的示例也会生成 /etc/init.d 中所有内容的列表：

```
OUTPUT=$(service tomcat7 start) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:46:51.463

在您的第二个示例中，`read`设置`OUTPUT`子外壳中的值。当管道结束时，子shell 退出，并且 的值`OUTPUT`丢失。使用第三个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:39:28.400

```
service tomcat7 start | 
while read OUTPUT
do
   echo $OUTPUT
done 
```

这是有效的，因为命令的输出不止一行。您需要多次阅读。因为命令发出了多行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T08:35:25.943

如果 $OUTPUT 包含扩展的特殊字符（用于文件名扩展），它可能已经起作用，但似乎不起作用。试试`echo "$OUTPUT"`。

# php - 使用 session_set_save_handler 时是否需要更改 session.save_handler

> ID：15399149
> 
> 赞同：0
> 
> 时间：2013-03-14T00:36:13.833
> 
> 标签：php, session

我将会话数据存储在数据库中。在类 Session 中是用于存储和检索数据的存储函数。

现在我的问题是：

我是否需要在运行时配置中更改 session.save_handler 的值，因为默认设置为“文件”，或者函数 session_set_save_handler 是否覆盖（忽略）它？

如果 session.auto_start 被启用，那么使用哪个处理程序呢？

这是我的课堂会话的最小化版本：

```
class Session
{

public function __construct($registry, $sessionhash = '', $userid = 0, $password = '')
{
    $this->config = cl_Config::instance();
    $this->db = cl_Database::instance($this->config);
    $this->hasher = cl_Hasher::instance();

    // Register this object as the session handler
    session_set_save_handler( 
        array( $this, "open" ), 
        array( $this, "close" ),
        array( $this, "read" ),
        array( $this, "write"),
        array( $this, "destroy"),
        array( $this, "gc" )
    );

function open( $save_path, $session_name )
{
    ...
    return true;
}

function close( $save_path, $session_name )
{
    ...
    return true;
}

function read( $id )
{
    ...
}

function write( $id, $data )
{
    ...
    return true;
}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:44:37.097

`session.save_handler`不，如果您调用，则不要设置`session_set_save_handler()`，但`auto_start`默认配置的将启动（内置或由模块提供），而不是您的用户提供的。关于自动启动：这似乎是个好主意，但请记住，打开会话会*阻止所有其他启动会话的请求，直到它完成*。因此，最好仅在需要时才开始会话。

# sql - SQL - 需要从表 Group By 中选择最近的条目？清楚的？

> ID：15399150
> 
> 赞同：-1
> 
> 时间：2013-03-14T00:36:15.050
> 
> 标签：sql, group-by

我有一张包含航班价格详细信息的表格，请参阅下面的简化字段：

```
FlightInfoId
AirportFrom
AirportTo
Price
DateTimeAdded 
```

AirportFrom 和 AirportTo 有大约 300 种可能的组合，代表 300 条不同的航线，尽管数据库中有数百万条条目，因此每条航线都有许多条目。我想要做的是为 300 条路线中的每条路线提取最新条目。可以使用时间戳“DateTimeAdded”推断最新条目。我需要一个查询，它将返回 300 行显示：

```
AirportFrom, AirportTo, DateTimeAdded 
```

DateTimeAdded 是 AirportFrom 和 AirportTo 指定的路线的最新行

我希望他是清楚的，并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:56:14.463

这种方法或多或少与数据库无关。

```
 select AirportFrom, AirportTo, Price
 from yourtable join
 (select AirportFrom af, AirportTo at, max(DateTimeAdded) LastUpdate
 from yourtable
 group by AirportFrom, AirportTo) temp on AirportFrom = af
 and AirportTo = at
 and DateTimeAdded = LastUpdate 
```

# sql - 将 200 列从 varchar 更改为 float

> ID：15399153
> 
> 赞同：0
> 
> 时间：2013-03-14T00:36:31.320
> 
> 标签：sql, sql-server, sql-server-2005

有没有我可以编写的简单脚本（无需命名所有列），将 200 多列从 varchar(50) 更改为浮动？从技术上讲，数据是一个浮点数，但是是在 varchar 中意外创建的。我不在乎我会失去的精度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:42:34.710

最终，更改将命名`ALTER TABLE`语句中的列。不过，只要有一点聪明和耐心，您就可以通过对 sys.syscolumns 进行字符串处理来生成该语句。大致类似

```
select 'alter table tablename '
select 'alter column [' + name + '] float not NULL' 
from sys.syscolumns where id = objectid(tablename) order by name 
```

这将产生 SQL 来做你想做的事。仔细检查，然后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:00:50.103

这是上面由 James K. Lowden 编写的查询的更新，它只为您提供类型为 varchar(50) 的列。希望这会使事情变得更容易一些，但您仍然需要非常仔细地检查所有查询。

```
select 'ALTER TABLE ' + s.name + '.' + T.name + '      ALTER COLUMN [' + C.name + '] float not null'  
from sys.columns C
inner join sys.tables T on C.object_id = T.object_id
inner join sys.schemas S on T.schema_id = S.schema_id
where 
C.system_type_id = 167 -- this is type for varchar
and C.max_length = 50 -- selects only varchars(50) and avoids others 
```

# java - 如何在 JavaDB 和 prepareStatement 中创建表？

> ID：15399154
> 
> 赞同：0
> 
> 时间：2013-03-14T00:36:31.693
> 
> 标签：java, javadb

当我将“ALTER TABLE”添加到我的表时，我在将数据添加到我的数据库时遇到问题。我正在从正在处理的网页中获取信息，并被写入将信息传输到我的数据库的 java 方法。如果我不使用这两个 ALTER TABLE 语句，一切正常，但是一旦添加它们，信息将不再进入我的数据库。我究竟做错了什么？下面列出了 CREATE TABLE 和 Java 方法。希望可以有人帮帮我！

```
CREATE TABLE role(
username VARCHAR(15) NOT NULL,
password VARCHAR(15) NOT NULL,
role VARCHAR(6) NOT NULL,
CONSTRAINT username_pk PRIMARY KEY (username)
);

CREATE TABLE customer(
orgnumber INTEGER NOT NULL,
companyname VARCHAR(20) NOT NULL,
contactperson VARCHAR(20),
streetname VARCHAR(30) NOT NULL,
zipcode INTEGER NOT NULL,
city VARCHAR(15) NOT NULL,
phone CHAR(12),
email VARCHAR(30) NOT NULL,
username VARCHAR(15),
CONSTRAINT orgnumber_pk PRIMARY KEY (orgnumber)
);

CREATE TABLE place(
zipcode INTEGER NOT NULL,
city VARCHAR(15),
streetname VARCHAR(30),
CONSTRAINT place_pk PRIMARY KEY (zipcode)
);

ALTER TABLE customer
    ADD CONSTRAINT role_fk1 FOREIGN KEY (username)
        REFERENCES role;

ALTER TABLE customer
    ADD CONSTRAINT place_fk1 FOREIGN KEY (zipcode)
        REFERENCES place; 
```

Java方法：

```
public boolean regNewRegister(RegBean newRegister) {
    PreparedStatement sqlnewRegister = null;
    PreparedStatement sqlnewRole = null;
    PreparedStatement sqlnewPlace = null;
    String knd = "Customer";

    OpenConnection();
    boolean ok = false;
    try {
        /*
         * A transaction is started, uses lock.
         */
        if (connection == null) {
            System.out.println("Went well");
        }
        connection.setAutoCommit(false);

        sqlnewRegister = connection.prepareStatement("insert into customer (ORGNUMBER, CNAME, CONTACTP, STREETN, ZIPC, CITY, PHONE, EMAIL, USERNAME) values(?, ?, ?, ?, ?, ?, ?, ?, ?)");
        sqlnewRegister.setInt(1, newRegister.getOrgNumber());
        sqlnewRegister.setString(2, newRegister.getCompanyName());
        sqlnewRegister.setString(3, newRegister.getContactPerson());
        sqlnewRegister.setString(4, newRegister.getStreetName());
        sqlnewRegister.setInt(5, newRegister.getZipCode());
        sqlnewRegister.setString(6, newRegister.getCity());
        sqlnewRegister.setLong(7, newRegister.getPhone());
        sqlnewRegister.setString(8, newRegister.getEmail());
        sqlnewRegister.setString(9 newRegister.getUsername());

        sqlnewRole = connection.prepareStatement("insert into role (USERNAME, PASSWORD, ROLE) values (?, ?, ?)");
        sqlnewRole.setString(1, newRegister.getUsername());
        sqlnewRole.setString(2, newRegister.getPassword());
        sqlnewRole.setString(3, knd);

        sqlnewPlace = connection.prepareStatement("insert into place (ZIPC, CITY, STREETN) values (?, ?, ?)");

        sqlnewPlace.setInt(1, newRegister.getZipCode());
        sqlnewPlace.setString(2, newRegister.getCity());
        sqlnewPlace.setString(3, newRegister.getStreetName());

        sqlnewRegister.executeUpdate();
        sqlnewRole.executeUpdate();
        sqlnewPlace.executeUpdate();

        connection.commit();

        /*
         * Transaction ended
         */
        ok = true;

    } catch (SQLException e) {
        Cleaner.rollBack(connection);
        String sqlStatus = e.getSQLState().trim();
        String statusclass = sqlStatus.substring(0, 2);
        if (statusclass.equals("23")) { // Standard code for "integrity constraint violation"
            ok = false;  // This orgnumber is already registered
        } else {
            Cleaner.writeMessage(e, "WriteToDB");
        }
    } finally {
        Cleaner.settAutoCommit(connection);
        Cleaner.closeSentence(sqlnewRegister);
        Cleaner.closeSentence(sqlnewRole);
        Cleaner.closeSentence(sqlnewPlace);
    }
    closeConnection();
    return ok;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:45:51.673

您必须先插入`role`and`place`才能插入`customer`，否则将违反您的参照完整性。

这两个`ALTER TABLE`语句意味着`customer.username`必须有一个对应的值`role.username`并且`customer.zipcode`必须指向一个有效的`place.zipcode`。

当您插入第`customer`一个时，这些记录尚不存在。

编辑：

`executeUpdate`更改to的顺序

```
 sqlnewRole.executeUpdate();
    sqlnewPlace.executeUpdate();
    sqlnewRegister.executeUpdate(); 
```

应该做的伎俩。

编辑2：

不过要注意的一件事是，如果您有两个人使用相同的邮政编码，您的代码将会失败，因为`place`如果您尝试添加两次，您的插入将违反主键......

# android - 无法更改 RatingBar 的宽度和星数

> ID：15399157
> 
> 赞同：3
> 
> 时间：2013-03-14T00:36:50.603
> 
> 标签：android, xml, android-layout, rating, ratingbar

我试图设置一个`RatingBar`只有 5 颗星，但它会扩展以填充屏幕的宽度。

我发现了类似的问题：

*   [如何使 RatingBar 显示五颗星](https://stackoverflow.com/questions/3858600/how-to-make-ratingbar-to-show-five-stars/10819710)
*   [Android RatingBar - 一团糟](https://stackoverflow.com/questions/12454644/android-ratingbar-a-complete-mess?rq=1)
*   [android评级栏xml和numStars](https://stackoverflow.com/questions/12724376/android-rating-bar-xml-and-numstars?rq=1)

但是，大多数时候解决方案是将宽度设置为，`wrap_content`但对我来说宽度一直是`wrap_content`.

这是我的布局。如果您向右滚动到底部，您将看到两个`RatingBar`s：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableLayout
        android:id="@+id/add_spot_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="1"
        android:stretchColumns="1" >

        <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >

            <TextView android:text="Distance:" />

            <TextView android:id="@+id/distancePopup" />
        </TableRow>

        <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >

            <TextView android:text="Address:" />

            <TextView android:id="@+id/addrPopup" />
        </TableRow>

        <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >

            <TextView android:text="Type:" />

            <TextView android:id="@+id/typePopup" />
        </TableRow>

        <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >

            <TextView android:text="Terrain:" />

            <RatingBar
                android:id="@+id/terrainPopup"
                style="?android:attr/ratingBarStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:isIndicator="true"
                android:max="5"
                android:numStars="5"
                android:stepSize="1" />
        </TableRow>

        <TableRow>

            <TextView android:text="Difficulty:" />

            <RatingBar
                android:id="@+id/difficultyPopup"
                style="?android:attr/ratingBarStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:isIndicator="true"
                android:max="5"
                android:numStars="5"
                android:stepSize="0.1" />
        </TableRow>

        <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >

            <TextView android:text="Description:" />

            <TextView
                android:id="@+id/descPopup"
                android:gravity="top"
                android:lines="2"
                android:maxLines="2"
                android:scrollHorizontally="false" />
        </TableRow>
    </TableLayout>

</ScrollView> 
```

这是它的样子：

![](../Images/c1d8decdbf14a0310b8c549165f5d473.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-15T21:05:57.467

我认为这可以通过将 RATINGBAR 嵌套在 RELATIVELAYOUT 中来解决。我认为这个问题是因为 TableLayout 的本质是在任何情况下都填充父级，而 RATINGBAR 采用父级的宽度。因此，我解决了将 RATINGBAR 嵌套在 RELATIVELAYOUT 中并在 WRAP_CONTENT 上为两者（RATINGBAR 和 RELATIVE LAYOUT）设置 LAYOUT_WIDTH 和 LAYOUT_HEIGT 的问题。只有在这种情况下，我才能在 TABLELAYOUT 中有一个 RATINGBAR。

希望有所帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T09:04:28.203

对于未来的 Google 员工，

Amit 的回答帮助我解决了这个问题：评分小部件显示的星星太多。

这是因为小部件必须设置为`android:layout_width="wrap_content"`要考虑 numstars。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T06:30:29.777

使用相对布局作为评分栏的父级，使用 wrap_content 作为评分栏将解决您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:03:34.667

在表格布局中，您使用的是

```
 android:shrinkColumns="1"
    android:stretchColumns="1" 
```

在这里，您收缩和拉伸相同的列号。

我删除了

```
android:stretchColumns="1" 
```

它对我有用。

![在此处输入图像描述](../Images/e91b7e84e42f7df67dae5e432f9084c6.png)

最终布局

```
<TableLayout
    android:id="@+id/add_spot_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:shrinkColumns="1" >

    <TableRow
        android:layout_marginBottom="2sp"
        android:layout_marginTop="2sp" >

        <TextView android:text="Distance:" />

        <TextView android:id="@+id/distancePopup" />
    </TableRow>

    <TableRow
        android:layout_marginBottom="2sp"
        android:layout_marginTop="2sp" >

        <TextView android:text="Address:" />

        <TextView android:id="@+id/addrPopup" />
    </TableRow>

    <TableRow
        android:layout_marginBottom="2sp"
        android:layout_marginTop="2sp" >

        <TextView android:text="Type:" />

        <TextView android:id="@+id/typePopup" />
    </TableRow>

    <TableRow
        android:layout_marginBottom="2sp"
        android:layout_marginTop="2sp" >

        <TextView android:text="Terrain:" />

        <RatingBar
            android:id="@+id/terrainPopup"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:isIndicator="true"
            android:max="5"
            android:numStars="5"
            android:stepSize="1" />
    </TableRow>

    <TableRow>

        <TextView android:text="Difficulty:" />

        <RatingBar
            android:id="@+id/difficultyPopup"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:isIndicator="true"
            android:max="5"
            android:numStars="5"
            android:stepSize="0.1" />
    </TableRow>

    <TableRow
        android:layout_marginBottom="2sp"
        android:layout_marginTop="2sp" >

        <TextView android:text="Description:" />

        <TextView
            android:id="@+id/descPopup"
            android:gravity="top"
            android:lines="2"
            android:maxLines="2"
            android:scrollHorizontally="false" />
    </TableRow>
</TableLayout> 
```

# playframework - 如何为 sbt 测试指定 sbt 0.12.2 的配置文件？

> ID：15399161
> 
> 赞同：14
> 
> 时间：2013-03-14T00:37:07.430
> 
> 标签：playframework, playframework-2.0, sbt, playframework-2.1

我有戏！带有单元测试的项目，我正在尝试使用 sbt 在我的暂存环境上运行测试。在我升级到 Play 2.1 之前，当我使用 Play 2.0.4 和 sbt 0.11.3 时，我可以做到`$ sbt -Dconfig.file=conf/staging.conf test`. `sbt test`无论我为 -Dconfig.file 指定什么，现在似乎都使用默认的 application.conf。

`sbt start -Dconfig.file=conf/staging.conf`仍然可以正常工作。这种行为是 sbt 0.12.2 的错误还是我应该指定一个配置文件来以不同的方式运行测试？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T23:24:01.650

测试正在使用分叉的 jvm。使用 javaOptions sbt 设置将 jvm 选项传递给它，例如

`javaOptions ++= Seq("-Dconfig.file=conf/staging.conf")`
或者

`javaOptions ++= collection.JavaConversions.propertiesAsScalaMap(System.getProperties).map{ case (key,value) => "-D" + key + "=" +value }.toSeq`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-09T06:01:51.827

类似的方法是只通过配置文件来使用，同时触发 sbt 测试

首先，在**Build.scala**文件中

```
val testOptions = "-Dconfig.file=conf/" + Option(System.getProperty("test.config")).getOrElse("application") + ".conf"

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    javaOptions in Test += testOptions
) 
```

然后，在命令行中用**integ.conf运行测试**

```
sbt -Dtest.config=integ test 
```

使用默认的**application.conf**

```
sbt test 
```

# java - 嵌套循环 - 第三个？

> ID：15399164
> 
> 赞同：0
> 
> 时间：2013-03-14T00:37:24.740
> 
> 标签：java, loops, nested

编写一个程序，在屏幕上打印以下内容：

```
1 2 3 4 5 6 7 8 9 10

2 3 4 5 6 7 8 9 10 

3 4 5 6 7 8 9 10 

4 5 6 7 8 9 10 

5 6 7 8 9 10 

6 7 8 9 10 

7 8 9 10 

8 9 10 
```

我在纠正嵌套循环时遇到了一点麻烦——我让它看起来像那样，但数字不会停在 10 处。代码打印如下：

```
1 2 3 4 5 6 7 8 9 10

2 3 4 5 6 7 8 9 10 11

3 4 5 6 7 8 9 10 11 12

4 5 6 7 8 9 10 11 12 13

5 6 7 8 9 10 11 12 13 14

6 7 8 9 10 11 12 13 14 15

7 8 9 10 11 12 13 14 15 16

8 9 10 11 12 13 14 15 16 17 
```

我是一个初学者程序员，需要帮助 - 你需要嵌套循环内的第三个循环吗？任何帮助表示赞赏！到目前为止，这是我的代码：

```
import java.util.Scanner;

public class LoopProgram
{
    public static void main(String args [])
    {
        for (int e=0; e<8; e++)
        {
            for (int f=1; f<=10; f++)
            {
                System.out.print(f + e + " ");
            }   
            System.out.println(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:41:49.487

两个循环就足够了。

外循环运行八次，你已经得到了它的工作。

但是，您的内部循环总是运行十次，这不是您想要的。您希望内部循环首先运行 10 次，然后只运行 9 次，然后只运行 8 次等。这里的技巧是更改该内部循环的开始或结束值，如下所示：

```
for (int e=0;e<8;e++) {
    for (int f=e+1; f<=10; f++) {
        ...
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:41:45.987

在第二个循环中试试这个：

```
for(int f=e;f<=10;f++) 
```

和输出

```
System.out.print(f+" "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:41:59.053

我想这就是你要找的。

```
for(int e=1;e<9;e++) {
    for(int f=e;f<=10;f++) {
        System.out.print(f+" ");
    }
    System.out.println();
} 
```

这完全符合您的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T04:08:36.457

这就是我将如何做到的

```
for (int i = 1; i <= 8; i++) {
        for (int j = i; j <= 10; j++) 
            System.out.print(j + " ");
        System.out.println();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T00:50:57.673

三环是严重的矫枉过正。这可以通过一个循环和两个计数器来完成。

```
public class LoopProgram {
  static final int LIMIT_1 = 8;
  static final int LIMIT_2 = 10;

  public static void main(String[] args) {
    int a = 1, b = 2;
    while(b <= (LIMIT_1 + 1)) {
      System.out.print(a);
      if(a < LIMIT_2) {
        System.out.print(" ");
        a++;
      } else {
        System.out.println();
        a = b;
        b++;
      }
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T00:56:42.257

您只需要两个循环：外部循环将运行八次，内部循环将从外部计数器的值开始（这就是使每行最多计数 10 但始终从最后一行的第一个值 + 1 开始的原因）和在计数器小于 10 时运行。

像这样的东西：

```
for (int i = 0; i < 8; i++) {
    for (int e = i; e < 10; e++) {
        //print e + 1
    } 
} 
```

您必须打印 e + 1 以便您的行不从 0 开始，而是从 1 开始，直到 10。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T01:02:16.907

这更多的是对如何为自己解决这种事情的解释。在 for 循环最常见的情况下，您应该问自己三个关于索引变量的问题：

1.  我希望它具有的第一个值是什么？
2.  我想在什么条件下进行另一次迭代？
3.  它应该如何从迭代到迭代？

对于您的内部循环，答案是：

1.  e
2.  f <= 10
3.  f++

由此，很容易构建循环，并且您已经为您编写了几个它的示例。

# ios - 对在界面生成器中创建的按钮进行样式设置

> ID：15399168
> 
> 赞同：-5
> 
> 时间：2013-03-14T00:37:58.653
> 
> 标签：ios, objective-c, interface-builder, storyboard

如果您有一个在 Interface Builder 中创建的按钮，并且已经指向另一个`viewController`按钮，您如何在代码中定位该按钮以为其提供代码中正常和选定状态的自定义背景？

```
UIImage *registerButtonNormal = [[UIImage imageNamed:@"yellowRegisterButton"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

[self.registerButton setBackgroundImage:registerButtonNormal forState:UIControlStateNormal];

UIImage *registerButtonSelected = [[UIImage imageNamed:@"yellowRegisterButtonSelected"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

[self.registerButton setBackgroundImage:registerButtonSelected forState:UIControlStateSelected]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:37:58.653

这实际上很容易。

您只需`@property`通过从按钮拖动到新创建的属性的控件来创建并连接要设置样式的按钮。

该属性应如下所示：

```
@property (nonatomic, strong) IBOutlet UIButton *registerButton; 
```

然后在 viewDidLoad 中，放置上面针对您的按钮的代码：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

    // code for styling button goes here. 

    } 
```

您可以在问题中查看样式按钮的代码。

# java - 如何在 Android 中将此图像设置为活动

> ID：15399177
> 
> 赞同：1
> 
> 时间：2013-03-14T00:38:42.260
> 
> 标签：java, android, android-layout, android-intent

我正在使用 android 上的异步下载文件，现在我希望这些文件显示在活动中。如何在 onSucess 方法中执行此操作？我尝试了以下方法，但图像未显示！

```
AsyncHttpClient fileDownload = new AsyncHttpClient();
String[] allowedContentTypes = new String[] { "image/png", "image/jpeg" };
fileDownload.get("http://server.com/file.png", new BinaryHttpResponseHandler(allowedContentTypes)           {
       @Override
       public void onSuccess(byte[] fileData) {
        //Do Something here to view files in activity   
       ImageView img = (ImageView) findViewById (R.id.imageview1);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:42:05.400

您可以在 XML 布局中放置一个[ImageView](http://developer.android.com/reference/android/widget/ImageView.html) ，也可以动态创建一个并将其添加到活动中。然后只需设置要显示的 ImageView 的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:25:02.790

试试这个代码

```
AsyncHttpClient fileDownload = new AsyncHttpClient();
String[] allowedContentTypes = new String[] { "image/png", "image/jpeg" };
fileDownload.get("http://server.com/file.png", new BinaryHttpResponseHandler(allowedContentTypes) {
       @Override
       public void onSuccess(byte[] fileData) {
        //Do Something here to view files in activity  
         Bitmap bmp=BitmapFactory.decodeByteArray(fileData,0,fileData.length); 
         ImageView img = (ImageView) findViewById (R.id.imageview1);
         img.setImageBitmap(bmp);
         } 
```

# android - 如何通过蓝牙获取 InputStream 并放入 Textview？

> ID：15399181
> 
> 赞同：3
> 
> 时间：2013-03-14T00:39:10.713
> 
> 标签：android, bluetooth, textview, inputstream

这是我在 SO 中的第一个问题。我是 Android 编程的新手（也很兴奋），这是我的问题：我正在使用我的 android 手机和微控制器构建一个项目。微控制器有一个距离传感器并传输其值。我已经设法连接到微控制器并发送正确的信号，但我无法获得距离测量或其他任何信息。该应用程序不会崩溃或任何它不会从微控制器获取数据（我的计算机从微控制器获取数据（数据是一个字符串））。我的android应用程序代码是这样的：

公共类加速度计扩展活动{

```
// Intent request codes
private static final int REQUEST_CONNECT_DEVICE = 1;
private static final int REQUEST_ENABLE_BT = 2;
private static final int RECIEVE_MESSAGE = 3;

// Program variables
private byte microcOut;
private boolean ledStat;
private boolean connectStat = false;
private Button btnled;
private Button connect_button;
private TextView yAccel, xAccel, incoming;
protected static final int MOVE_TIME = 80;
private long lastWrite = 0;
OnClickListener myClickListener;
ProgressDialog myProgressDialog;
private Toast failToast;
private Handler mHandler,h;
private StringBuilder sb = new StringBuilder();

// Sensor object used to handle accelerometer
private SensorManager mySensorManager; 
private List<Sensor> sensors; 
private Sensor accSensor;

// Bluetooth Stuff
private BluetoothAdapter btAdapter = null;
private BluetoothSocket btSocket = null; 
private OutputStream outStream = null;
private InputStream inStream = null;
private ConnectThread mConnectThread = null;
private ConnectedThread mConnectedThread;

private String deviceAddress = null;
// Well known SPP UUID (will *probably* map to RFCOMM channel 1 (default) if not in use); 
private static final UUID SPP_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

//Sound Clip to make app prettier
MediaPlayer myclip;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.activity_accelerometer);
    myclip = MediaPlayer.create(this, R.raw.cartcar);
    myclip.start();
     // Finds buttons in .xml layout file
    btnled = (Button) findViewById(R.id.led_button1);
    connect_button = (Button) findViewById(R.id.connect_button1);
    yAccel = (TextView) findViewById(R.id.accText1);
    xAccel = (TextView) findViewById(R.id.accText2);
    incoming = (TextView) findViewById(R.id.incoming);
    // Set Sensor
    mySensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE); 
    sensors = mySensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER);
    if(sensors.size() > 0) accSensor = sensors.get(0);

    myProgressDialog = new ProgressDialog(this);
    failToast = Toast.makeText(this, R.string.failedToConnect, Toast.LENGTH_SHORT);
    mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
         if (myProgressDialog.isShowing()) {
                myProgressDialog.dismiss();
            }

         // Check if bluetooth connection was made to selected device
            if (msg.what == 1) {
                // Set button to display current status
                connectStat = true;
                connect_button.setText(R.string.connected);

                // Reset the BluCar
                microcOut = 0;
                ledStat = false;
                write(microcOut);
            }else {
                // Connection failed
             failToast.show();
            }
        }
    };

    h = new Handler() {
        public void handleMessage(android.os.Message msg) {
            switch (msg.what) {
            case RECIEVE_MESSAGE:                                                   // if receive massage
                byte[] readBuf = (byte[]) msg.obj;
                String strIncom = new String(readBuf, 0, msg.arg1);                 // create string from bytes array
                sb.append(strIncom);                                                // append string
                int endOfLineIndex = sb.indexOf("\r\n");                            // determine the end-of-line
                if (endOfLineIndex > 0) {                                            // if end-of-line,
                    String sbprint = sb.substring(0, endOfLineIndex);               // extract string
                    sb.delete(0, sb.length());                                      // and clear
                    incoming.setText("Data from Arduino: " + sbprint);            // update TextView 
                }
                //Log.d(TAG, "...String:"+ sb.toString() +  "Byte:" + msg.arg1 + "...");
                break;
            }
        };
    };
 // Check whether bluetooth adapter exists
    btAdapter = BluetoothAdapter.getDefaultAdapter(); 
    if (btAdapter == null) { 
         Toast.makeText(this, R.string.no_bt_device, Toast.LENGTH_LONG).show(); 
         finish(); 
         return; 
    } 

    // If BT is not on, request that it be enabled.
    if (!btAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
    }
    /**********************************************************************
     * Buttons for controlling BluCar
     */
    connect_button.setOnClickListener(new View.OnClickListener() {

        // Connect to Bluetooth Module
        @Override
        public void onClick(View v) {
            if (connectStat) {
                // Attempt to disconnect from the device
                disconnect();
            }else{
                // Attempt to connect to the device
                connect();
            }
        }
    });

    // Toggle Headlights
    btnled.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (ledStat) {
                microcOut = (byte) (microcOut & 124);
                btnled.setText(R.string.ledbuttonON);
                ledStat = false;
            }else{
                microcOut = (byte) (microcOut | 128);
                btnled.setText(R.string.ledbuttonOFF);
                ledStat = true;
            }
            write(microcOut);
        }
    });

}
/** Thread used to connect to a specified Bluetooth Device */
public class ConnectThread extends Thread {
private String address;
private boolean connectionStatus;

    ConnectThread(String MACaddress) {
        address = MACaddress;
        connectionStatus = true;
}

    public void run() {
    // When this returns, it will 'know' about the server, 
       // via it's MAC address. 
        try {
            BluetoothDevice device = btAdapter.getRemoteDevice(address);

            // We need two things before we can successfully connect 
            // (authentication issues aside): a MAC address, which we 
            // already have, and an RFCOMM channel. 
            // Because RFCOMM channels (aka ports) are limited in 
            // number, Android doesn't allow you to use them directly; 
            // instead you request a RFCOMM mapping based on a service 
            // ID. In our case, we will use the well-known SPP Service 
            // ID. This ID is in UUID (GUID to you Microsofties) 
            // format. Given the UUID, Android will handle the 
            // mapping for you. Generally, this will return RFCOMM 1, 
            // but not always; it depends what other BlueTooth services 
            // are in use on your Android device. 
            try { 
                 btSocket = device.createRfcommSocketToServiceRecord(SPP_UUID); 
            } catch (IOException e) { 
                connectionStatus = false;
            } 
        }catch (IllegalArgumentException e) {
            connectionStatus = false;
        }

       // Discovery may be going on, e.g., if you're running a 
       // 'scan for devices' search from your handset's Bluetooth 
       // settings, so we call cancelDiscovery(). It doesn't hurt 
       // to call it, but it might hurt not to... discovery is a 
       // heavyweight process; you don't want it in progress when 
       // a connection attempt is made. 
       btAdapter.cancelDiscovery(); 

       // Blocking connect, for a simple client nothing else can 
       // happen until a successful connection is made, so we 
       // don't care if it blocks. 
       try {
            btSocket.connect(); 
       } catch (IOException e1) {
            try {
                 btSocket.close(); 
            } catch (IOException e2) {
            }
       }

       // Create a data stream so we can talk to server. 
       try { 
        outStream = btSocket.getOutputStream(); 
       } catch (IOException e2) {
        connectionStatus = false;
       }

       // Send final result
       if (connectionStatus) {
        mHandler.sendEmptyMessage(1);
       }else {
        mHandler.sendEmptyMessage(0);
       }
    }
}
public void onActivityResult(int requestCode, int resultCode, Intent data) {
     switch (requestCode) {
       case REQUEST_CONNECT_DEVICE:
         // When DeviceListActivity returns with a device to connect
           if (resultCode == Activity.RESULT_OK) {
            // Show please wait dialog
            myProgressDialog = ProgressDialog.show(this, getResources().getString(R.string.pleaseWait), getResources().getString(R.string.makingConnectionString), true);

            // Get the device MAC address
            deviceAddress = data.getExtras().getString(DeviceList.EXTRA_DEVICE_ADDRESS);
            // Connect to device with specified MAC address
              mConnectThread = new ConnectThread(deviceAddress);
              mConnectThread.start();

           }else {
             // Failure retrieving MAC address
             Toast.makeText(this, R.string.macFailed, Toast.LENGTH_SHORT).show();
           }
           break;
       case REQUEST_ENABLE_BT:
           // When the request to enable Bluetooth returns
           if (resultCode == Activity.RESULT_OK) {
               // Bluetooth is now enabled
           } else {
               // User did not enable Bluetooth or an error occured
               Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
               finish();
           }
        }
   }

public void write(byte data) {
     if (outStream != null) {
          try {
             outStream.write(data);
          } catch (IOException e) {
          }
      }
  }

  public void emptyOutStream() {
     if (outStream != null) {
          try {
             outStream.flush();
          } catch (IOException e) {
          }
      }
  }

  public void connect() {
     // Launch the DeviceListActivity to see devices and do scan
      Intent serverIntent = new Intent(this, DeviceList.class);
      startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE);
  }

  public void disconnect() {
     if (outStream != null) {
         try {
                outStream.close();
                connectStat = false;
                connect_button.setText(R.string.disconnected);
            } catch (IOException e) {
            }
     } 
  }
  private final SensorEventListener mSensorListener = new SensorEventListener() {

        @Override
        public void onAccuracyChanged(Sensor sensor, int accuracy) {}

        @Override
        public void onSensorChanged(SensorEvent event) {
            // Checks whether to send steering command or not
            long date = System.currentTimeMillis();
            if (date - lastWrite > MOVE_TIME) {
                yAccel.setText(" " + event.values[1]);
                xAccel.setText(" " + event.values[0]);
                if (event.values[1] > 2.5) {
                    // Turn right
                    microcOut = (byte) (microcOut & 248);
                    microcOut = (byte) (microcOut | 4);
                }else if (event.values[1] < -2.5) {
                    // Turn left
                    microcOut = (byte) (microcOut & 244);
                    microcOut = (byte) (microcOut | 8);
                }else {
                    // Center the steering servo
                    microcOut = (byte) (microcOut & 240);
                }
                write(microcOut);
                lastWrite = date;
            }
        }
      };

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_accelerometer, menu);
    return true;
}
public void onResume() { 
     super.onResume();
     mySensorManager.registerListener(mSensorListener, accSensor, SensorManager.SENSOR_DELAY_GAME);
}
@Override 
public void onDestroy() { 
     emptyOutStream();
     disconnect();
     if (mSensorListener != null) {
         mySensorManager.unregisterListener(mSensorListener);
     }
     super.onDestroy(); 
     myclip.release();
} 
private class ConnectedThread extends Thread {
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        byte[] buffer = new byte[256];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);        // Get number of bytes and message in "buffer"
                h.obtainMessage(RECIEVE_MESSAGE, bytes, -1, buffer).sendToTarget();     // Send to message queue Handler
            } catch (IOException e) {
                break;
            }
        }
    }

    /* Call this from the main activity to send data to the remote device */
    public void write(String message) {

        byte[] msgBuffer = message.getBytes();
        try {
            mmOutStream.write(msgBuffer);
        } catch (IOException e) {

          }
    }
} 
```

}

我已经阅读了有关该主题的所有内容（BluetoothChat，互联网上的人们的项目......），我很累。任何帮助深表感谢。

***- 编辑 -***

我已经设法将输入流输入到我的 texteview 中。我现在的问题是我的应用程序在尝试连接到我的设备（微控制器或我的电脑）时卡在进度对话框中（它已连接到设备，但进度对话框不会消失）并等待某些东西进来。过了一会儿（比如 5-6 秒），即使有东西进来，它仍然卡住了，我必须强迫它关闭。我认为问题在于处理程序处理线程的方式。在调试器中没有问题，所有线程都运行正常。

我的代码中的更改是：在我的 ConnectThread 中：`/** 用于连接指定蓝牙设备的线程 */ public class ConnectThread extends Thread { private String address; 私有布尔连接状态；

```
 ConnectThread(String MACaddress) {
        address = MACaddress;
        connectionStatus = true;
}

    public void run() {
    // When this returns, it will 'know' about the server, 
       // via it's MAC address. 
        try {
            BluetoothDevice device = btAdapter.getRemoteDevice(address);

            // We need two things before we can successfully connect 
            // (authentication issues aside): a MAC address, which we 
            // already have, and an RFCOMM channel. 
            // Because RFCOMM channels (aka ports) are limited in 
            // number, Android doesn't allow you to use them directly; 
            // instead you request a RFCOMM mapping based on a service 
            // ID. In our case, we will use the well-known SPP Service 
            // ID. This ID is in UUID (GUID to you Microsofties) 
            // format. Given the UUID, Android will handle the 
            // mapping for you. Generally, this will return RFCOMM 1, 
            // but not always; it depends what other BlueTooth services 
            // are in use on your Android device. 
            try { 
                 btSocket = device.createRfcommSocketToServiceRecord(SPP_UUID); 
            } catch (IOException e) { 
                connectionStatus = false;
            } 
        }catch (IllegalArgumentException e) {
            connectionStatus = false;
        }

       // Discovery may be going on, e.g., if you're running a 
       // 'scan for devices' search from your handset's Bluetooth 
       // settings, so we call cancelDiscovery(). It doesn't hurt 
       // to call it, but it might hurt not to... discovery is a 
       // heavyweight process; you don't want it in progress when 
       // a connection attempt is made. 
       btAdapter.cancelDiscovery(); 

       // Blocking connect, for a simple client nothing else can 
       // happen until a successful connection is made, so we 
       // don't care if it blocks. 
       try {
            btSocket.connect(); 
       } catch (IOException e1) {
            try {
                 btSocket.close(); 
            } catch (IOException e2) {
            }
       }

       // Create a data stream so we can talk to server. 
       try { 
            outStream = btSocket.getOutputStream(); 
          } catch (IOException e2) {
            connectionStatus = false;
          }
       try{
        inStream = btSocket.getInputStream();
    }catch (IOException e2){
        connectionStatus = false;
    }
        int bytes; // bytes returned from read()
       // Keep listening to the InputStream until an exception occurs
       while (connectionStatus) {
           try {
               byte[] b = new byte[64];  // buffer store for the stream
               // Read from the InputStream
               bytes = inStream.read(b);        // Get number of bytes and message in "buffer"
               mHandler.obtainMessage(RECIEVE_MESSAGE, bytes, -1, b).sendToTarget();     // Send to message queue Handler
           } catch (IOException e) {
               break;
           }
       }
       // Send final result
       if (connectionStatus) {
        mHandler.obtainMessage(1);
       }else {
        mHandler.sendEmptyMessage(0);
       }
    }
} 
```

` 在我的 onCreate 方法中的 mHandler 中：

```
 mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
         if (myProgressDialog.isShowing()) {
                myProgressDialog.dismiss();
            }

         // Check if bluetooth connection was made to selected device
            if (msg.what == 1) {
                // Set button to display current status
                connectStat = true;
                connect_button.setText(R.string.connected);
                // Reset the BluCar
                microcOut = 0;
                ledStat = false;
                write(microcOut);
            }else if (msg.what == 2){
                byte[] readBuf = (byte[]) msg.obj;
                String strIncom = new String(readBuf, 0, msg.arg1);                 // create string from bytes array
                sb.append(strIncom);                                                // append string
                int endOfLineIndex = sb.indexOf(".");                            // determine the end-of-line
                if (endOfLineIndex > 0) {                                            // if end-of-line,
                    String sbprint = sb.substring(0, endOfLineIndex);               // extract string
                    sb.delete(0, sb.length());                                      // and clear
                    incoming.setText(sbprint);            // update TextView
                    connectStat = true;
                    connect_button.setText(R.string.connected);
                }else{
                    incoming.setText("Problem!");
                }
            }else {
                // Connection failed
             failToast.show();
            }
        }
    }; 
```

我需要的另一件事是如何在缓冲区已满时清空缓冲区。

PS：感谢大家的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T23:21:10.807

作为使用处理程序的替代方法，只需在线程运行中获取信息..

我已经这样做了，它对我有用。

```
public void run() {
            byte[] buffer = new byte[128];  // buffer store for the stream
            int bytes; // bytes returned from read()

            // Keep listening to the InputStream until an exception occurs
            while (true) {
                try {

                    bytes = mmInStream.read(buffer);
                    byte[] readBuf = (byte[]) buffer;
                    String strIncom = new String(readBuf, 0, bytes);                 // create string from bytes array
                    sb.append(strIncom);                                                // append string
                    int endOfLineIndex = sb.indexOf("\r\n");                            // determine the end-of-line
                    if (endOfLineIndex > 0) {  
                        // add the current string to eol to a local string
                        String sbprint = sb.substring(0, endOfLineIndex);

                        // get the start and end indexes of the heading
                        int startHeading = sb.indexOf("HE");
                        int endHeading = sb.indexOf("/HE");

                        // set the heading
                        Henry.this.setCurrentHeading(sb.substring((startHeading + 2), endHeading));

                        // get the start and end indexes of the front range
                        int startFrontRange = sb.indexOf("FR");
                        int endFrontRange = sb.indexOf("/FR");

                        // get the front range
                        Henry.this.currentFrontRange = sb.substring((startFrontRange + 2), endFrontRange);
             ... ( grab all the information you need here ) ...

                        // debugging output what we have
                        // System.out.println("recv: " + sbprint);

                        // clean out the sb to ready next run
                        sb.delete(0, sb.length());   
                    } 
```

我将从串行连接检索到的所有信息保存在我的应用程序 (Henry) 中，然后任何想要使用该信息的 Activity 从应用程序中获取它。如果视图需要对信息有更新的视角，我会在视图中添加一个计时器，以根据我的喜好经常启动刷新方法。这具有额外的优势，即能够在您的 android 应用程序中的任何位置使用信息。

我以这种方式从 arduino 向设备发送大约 10 个数据点，从设备向 arduino 发送大约 3 个数据点。我在数据点周围添加了自己的标记来识别它们。

希望这可以帮助！

# apache - 单击取消时绕过 htpasswd

> ID：15399182
> 
> 赞同：3
> 
> 时间：2013-03-14T00:39:13.417
> 
> 标签：apache, .htaccess

在我的 htaccess 中，我有以下用于保存 admin* 区域的代码。如果我输入错误的用户名密码，它会不断弹出正确的用户名，但如果我按下取消，我可以看到我的受限区域而不是加载错误页面，这是怎么回事？谢谢

```
AuthName "Restricted Area" 
AuthType Basic  
AuthUserFile /home/mydirectory/.htpasswds/.htpasswd 
AuthGroupFile /dev/null 
<Files admin*>
require valid-user
</Files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:44:48.600

您的 .htaccess 不保护除 admin* 之外的任何内容。

例如，如果您启用了自动索引选项，它与模式不匹配（但将 DirectoryIndex 设置为 adminindex 例如这样做）。

也许身份验证提示与页面所需的资源（JS、css、图像、favicon）有关，而不是与页面本身有关。

您可以尝试使用 curl 或 apache 日志检查 HTTP 响应吗？

这可能会给你一个提示。

```
curl -vso/dev/null http://localhost/test/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T03:24:13.353

我有同样的问题。对我来说，问题是 htaccess 文件夹中的 RewriteRule 位于受密码保护的目录上方的目录中。

我通过在我受密码保护的文件夹中的 htaccess 顶部添加 RewriteEngine 解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T16:16:08.283

如果您使用的是 wordpress，这是一个已知问题。解决方案[在这里](https://core.trac.wordpress.org/ticket/42120)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T19:55:28.393

我发现当 .htaccess 出现在父目录中但不在被访问的实际目录中时，就会发生这种行为。在正在访问的目录中放置另一个 .htaccess 文件会阻止此行为。

# oracle - SQL Server - 带有连接的 Oracle 链接服务器

> ID：15399199
> 
> 赞同：0
> 
> 时间：2013-03-14T00:40:38.363
> 
> 标签：oracle, sql-server-2008, join, linked-server, openquery

野兔是场景：

主数据库服务器：SQL Server 2008 R2 与 Oracle 11g 的链接服务器。

我有一个存储过程，可以进行如下查询：

```
Select t1.a, t1.b, t2.c, t3.d
From LocalTable a inner join LinkedServerName..Schema.Tableb b on a.aNumber= b.id
     inner join LinkedServerName..Schema.Tablec c on b.value = c.id
     inner join LinkedServerName..Schema.Tabled d on a.someOtherNumber = d.Id
 Where a.WhereValue1 = @Parameter1
   and b.WhereValue2 = @Parameter2 
```

这变得非常缓慢。我无法弄清楚如何使用 OpenQuery 来改进查询，因为*Where*子句使用参数（如果甚至可以使用的话）。

有没有办法改进数据检索？我正在从 Oracle 数据库中检索数百万条记录。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:49:46.963

我建议您至少在 Oracle 端创建一个视图来连接表 b、c、d 并加入该视图。LocalTable 中有多少条记录？如果很少（不到 10,000 人左右），那么您最好在 Oracle 方面加入整个事情。

你的总体目标是什么？您是在构建报告还是尝试识别不同的记录以便合并数据？你能在预言机方面做出改变吗？

# php - 每次查看页面时加 1 列？

> ID：15399204
> 
> 赞同：-1
> 
> 时间：2013-03-14T00:41:24.290
> 
> 标签：php, mysql

有人可以帮助我尝试计算一种查看次数，以反映帖子被查看的次数。

我正在尝试在 mysql 中创建一个函数，它将 +1 添加到我的表中名为 read 的列中。因此，如果计数从列中的 0 开始，并且每次有人打开该帖子时，它会添加一个 1，另一个 1 和另一个 1，无论该页面已被访问多少次。

我正在尝试这样做，但我失败了，请有人告诉我如何实现这种类型的事情。

```
function read_forum_set() {
    global $connection;
    global $forum_id;
    $query = "SELECT *
            FROM ptb_forum, ptb_profiles
            UPDATE ptb_forum.read_forum +1
            WHERE ptb_profiles.user_id = ptb_forum.from_user_id
            AND ptb_forum.id = '$forum_id' ";
    $read_forum_set = mysql_query($query, $connection);
    confirm_query($read_forum_set);
    return $read_forum_set;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:49:06.020

您需要更新加入：

```
update ptb_forum
join ptb_profiles on ptb_profiles.user_id = ptb_forum.from_user_id
set ptb_forum.read_forum = ptb_forum.read_forum + 1
where ptb_forum.id = $forum_id 
```

无论您做什么，请确保您使用`update ... set column = column + 1`而不是两个单独的查询（一个用于读取旧计数，一个用于更新它），因为**仅使用一个更新表达式，您就可以确保每个命中都被精确计数一次**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:49:54.280

首先，为了理智起见，将查询分开可能会更好。

至于增量查询，很简单

```
UPDATE table 
SET column = column + 1
WHERE foo = bar 
```

# javascript - 将 VBScript 转换为 Javascript

> ID：15399210
> 
> 赞同：6
> 
> 时间：2013-03-14T00:41:43.373
> 
> 标签：javascript, vbscript, internet-explorer-10, moodle, scorm

忙于调试一个奇怪的问题，该问题与某些 Flash 内容将用户的进度从 SCORM 模块传回 Moodle 的方式有关。

在 IE 6、7、8、9、Chrome 和 Firefox 上，一切正常。在 IE 10 上，来自 Flash 模块的进度跟踪未到达服务器。

在 SCORM 启动器中，使用以下（古老的）代码创建事件处理程序：

```
<SCRIPT LANGUAGE="VBScript">
on error resume next
sub preloader_FSCommand(ByVal command, ByVal args)
  call preloader_DoFSCommand(command, args)
end sub
</SCRIPT> 
```

在 Chrome 上调试，我可以看到该函数按预期调用。

尝试在 IE 10 中调试失败，因为代码从未被调用。我如何将这段代码翻译成 Javascript？尝试删除 VBScript，因为它似乎是问题的一部分。我尝试了以下代码，但没有成功：

```
<script>
      function preloader_FSCommand (command, args) {
           preloader_DoFSCommand(command, args);
      }
</script> 
```

`preloader_DoFSCommand`在代码中的其他地方定义，在 Chrome/Firefox/etc 上调用得很好，但在 IE 10 上没有。

**更新**：似乎部分问题与 IE 10 在标准模式下不再支持 FSCommand 有关。现在的问题是，什么是合适的解决方法，不需要更改 Flash/SCORM 内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:13:17.463

尝试使用以下内容强制 IE10 进入 IE9 兼容模式`<head>`：`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T16:07:51.803

与 Flash 进行相同通信的 Javascript 方法是使用以下内容：

```
<script type="text/javascript" event="FSCommand(command,args)" for="preloader">
    preloader_DoFSCommand(command,args);
</script> 
```

# php - php setcookie 没有按预期工作

> ID：15399214
> 
> 赞同：1
> 
> 时间：2013-03-14T00:41:49.913
> 
> 标签：php, cookies

我现在正在学习 PHP。任何人都可以看看这个，看看为什么 cookie 没有设置并一直显示为空？

```
<?php

    if ($_COOKIE["name"]) {
        echo "welcome back" . $_COOKIE['name'];
    }

    else {
        $fname = $_POST["fname"];
        $age = $_POST["age"];
        if ($fname) {
            echo "your name is ".$fname;
            setcookie("name", $fname, time()+6000);
            echo "cookie" . $_COOKIE['name'];
        }

        if ($age) {
            echo "your age is " . $age;
        }
    }

?>

<html>
<body>
<form action="index.php" method="post">
Name: <input type="text" name="fname">
Age: <input type="text" name="age">
<input type="submit">
</form>
<a href="info.php">info</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:45:28.950

您可能会收到`headers already sent`警告：您需要在将任何输出发送到浏览器之前设置 cookie，并且您正在执行`echo`它之前的一行。

因此，在设置 cookie 之前，请确保没有输出（空行、空格、回显等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:46:24.463

尝试

```
if ($fname) {
        setcookie("name", $fname, time()+6000);
        echo "your name is ".$fname;
        echo "cookie" . $_COOKIE['name'];
    } 
```

**[手动的](http://php.net/manual/en/function.setcookie.php)**

*setcookie() 定义了一个 cookie 与其余的 HTTP 标头一起发送。与其他标头一样，必须在脚本的任何输出之前发送 cookie（这是协议限制）。这要求您在任何输出之前调用此函数，包括和标记以及任何空格。*

# c# - WriteableBitmap.SaveJpeg

> ID：15399215
> 
> 赞同：1
> 
> 时间：2013-03-14T00:41:55.333
> 
> 标签：c#, c#-4.0, jpeg

代码中的行 wb.SaveJpeg 生成错误：System.Windows.Media.Imaging.WriteableBitmap'不包含'SaveJpeg'的定义，并且没有扩展方法'SaveJpeg'接受'System.Windows.Media'类型的第一个参数.Imaging.WriteableBitmap' 可以找到

我已将其列为参考：PresentationCore、PresentaionFramework、System.Windows.Forms、WindowsBase。

```
BitmapImage image = CaptureImageFromClipBoard();
WriteableBitmap wb = new WriteableBitmap(image);

using (var isf = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (var fs = isf.CreateFile(path + "\\" + filename + ".jpg"))
    {   
        wb.SaveJpeg(fs, wb.PixelWidth, wb.PixelHeight, 10, 100);
    }
} 
```

这是 CaptureImageFromClipBoard 的方法：

```
static public BitmapImage CaptureImageFromClipBoard()
{
    var img = new System.Windows.Controls.Image();
    var imgsrc = Clipboard.GetImage();
    img.Source = new FormatConvertedBitmap(imgsrc, PixelFormats.Bgr32, null, 0);

    JpegBitmapEncoder encoder = new JpegBitmapEncoder();
    MemoryStream memoryStream = new MemoryStream();
    BitmapImage bImg = new BitmapImage();

    encoder.Frames.Add(BitmapFrame.Create(imgsrc));
    encoder.Save(memoryStream);

    bImg.BeginInit();
    bImg.StreamSource = new MemoryStream(memoryStream.ToArray());
    bImg.EndInit();

    memoryStream.Close();

    return bImg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:59:12.300

我建议这样做-注意：未经测试，从内存和原始帖子中键入...

```
static public void SaveCapturedImageFromClipBoard(Stream target)
{
    var img = new System.Windows.Controls.Image();
    var imgsrc = Clipboard.GetImage();
    img.Source = new FormatConvertedBitmap(imgsrc, PixelFormats.Bgr32, null, 0);

    JpegBitmapEncoder encoder = new JpegBitmapEncoder();

    encoder.Frames.Add(BitmapFrame.Create(imgsrc));
    encoder.Save(target);
} 
```

和

```
using (var isf = IsolatedStorageFile.GetUserStoreForApplication())
{
     using (var fs = isf.CreateFile(path + "\\" + filename + ".jpg"))
     {
         SaveCapturedImageFromClipBoard(fs);
     }
} 
```

# c# - 在 Visual Studio 中重建 app.config？

> ID：15399216
> 
> 赞同：25
> 
> 时间：2013-03-14T00:41:56.230
> 
> 标签：c#, .net, visual-studio

我的 app.config 给了我几条与“未找到用户设置架构”相关的消息，所以我删除了它，打算从头开始构建它，但我没有成功。如何根据我的设置文件构建一个新的？每当我创建一个新解决方案并构建解决方案时，它都不会构建应用程序配置文件。我不知道还能尝试什么。

这是我的旧文件的麻烦部分：

```
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
</startup>
<userSettings>
    <DelocksNote.Settings1>
        <setting name="Font" serializeAs="String">
            <value>DejaVu Sans, 20.25pt, style=Italic</value>
        </setting>
        <setting name="WordWrap" serializeAs="String">
            <value>False</value>
        </setting>
    </DelocksNote.Settings1>
</userSettings> 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-07-22T19:18:27.447

对于将来访问的任何人...

在解决方案资源管理器中删除 app.config 文件。右键单击项目并选择添加，添加新项目。在列表中找到“应用程序配置文件”并添加它。它将是空的。

要根据您的设置生成内容（仍应保持完整）：编辑设置（留出空间或其他内容）并保存。然后去看看你的新 app.config 文件。它将被重建！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-24T13:30:54.927

在包管理器控制台中，运行：

```
Get-Project –All | Add-BindingRedirect 
```

[https://weblog.west-wind.com/posts/2014/nov/29/updating-assembly-redirects-with-nuget](https://weblog.west-wind.com/posts/2014/nov/29/updating-assembly-redirects-with-nuget)

# javascript - ASP.NET MVC 和 CKEditor - 无验证

> ID：15399218
> 
> 赞同：0
> 
> 时间：2013-03-14T00:42:02.653
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-3, ckeditor

我正在使用 CKEditor，它工作正常，但事实证明验证存在问题。我正在使用这个技巧：

```
$('input[type=submit]').bind('click', function () {
    var ckContent = CKEDITOR.instances.Content.getData(); 
    $("#Content").val(ckContent);
}); 
```

使验证工作，但它根本没有帮助。我的意思是，当我发送表单时，它会将值绑定到文本区域，但 jquery 不想验证这一点。当我完全关闭 CKEditor 时，验证在纯文本区域上运行良好。那么有什么问题呢？如何使 CKEditor 与 ASP.NET 的验证一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:57:45.843

我认为输入选择发生得太晚而无法验证。所以我认为你需要在模糊 CKEditor 后更新文本框。

```
var editor = CKEDITOR.replace('content');
editor.on('blur', function (e) {
    $("#Content").val(this.getData());
}); 
```

编辑：我假设您正在尝试使必填字段验证器失败/通过。我忘记了`<p>`即使没有内容，CKEditor 也会放置标签（默认情况下）。点击提交按钮，尝试强制更新：

```
$('input[type=submit]').bind('click', function () {
    CKEDITOR.instances.Content.updateElement();
}); 
```

第二次编辑：默认情况下，jQuery 验证不验证隐藏字段。要使用 MVC 的无障碍 javascript 覆盖该功能，`$.validator.setDefaults({ ignore: '' });`请在包含验证之后立即添加。这将允许在页面上验证所有字段。

# c# - 如何重新初始化数组？

> ID：15399221
> 
> 赞同：2
> 
> 时间：2013-03-14T00:42:14.297
> 
> 标签：c#, arrays

所以我初始化了这个数组：

```
string[] names = { "Joe", "Bob", "", "", "Marcus", "" }; 
```

现在我想以类似的方式更改内容。我试过了：

```
names = {"Happy", "", "", "Go", "", "Lucky"}; 
```

但这会导致错误，

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句

有没有办法像我试图做的那样批量分配数组的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:44:05.207

原始`{ ... }`语法只能在声明数组时使用。

要创建一个新的数组实例，请使用`new string[] { ... }`. 然后，您可以将此新数组实例分配给变量：

```
names = new string[] {"Happy", "", "", "Go", "", "Lucky"}; 
```

请注意，旧的数组实例不会受到影响。

# security - 会话是否足够安全以验证用户身份？

> ID：15399227
> 
> 赞同：3
> 
> 时间：2013-03-14T00:42:47.493
> 
> 标签：security, session

我想知道会话是否足够安全以对用户进行身份验证。基本上，当一个新会话开始时，服务器会生成一个唯一的会话 ID。而id用来区分不同的用户。

但是，黑客不可能窃取他人的会话ID吗？如何防止他人窃取我的会话 ID？在我看来，黑客也可以通过意外或暴力攻击猜测会话 ID。

您能否回答这个问题，以便我能够理解会话的概念以成为更好的软件开发人员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:45:42.613

在野外 cookie 最常[使用 XSS 获得](http://jehiah.cz/a/xss-stealing-cookies-101)。劫持会话的另一种常见方法是使用[Firesheep](http://codebutler.com/firesheep/)之类的工具嗅探会话 ID 。在这种情况下，通过 HTTP 泄露会话 ID 将[违反 owasp a9 - Insufficient Transport Layer Protection](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)。如果攻击者可以强迫受害者使用特定的会话 ID，那么它就称为[Session Fixation](http://en.wikipedia.org/wiki/Session_fixation)，并且可以用来破坏帐户。 [CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery) 和[点击劫持](http://en.wikipedia.org/wiki/Clickjacking)是影响会话的其他方式。

我建议阅读[Mozilla WebAppSec 安全编码指南 - 会话管理](https://wiki.mozilla.org/WebAppSec/Secure_Coding_Guidelines#Session_Management)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:51:06.037

你是对的。有一种攻击称为“会话劫持”。还有一种麻烦的攻击会干扰现有会话，称为“跨站点请求伪造”。各种对策是必要的。在这里总结它们不是很实用。但是知道攻击的名称，您可以轻松地了解对策。例如，您需要查阅OWASP.org 上的[跨站点请求伪造 (CSRF) 预防备忘单。](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T00:42:47.737

会话数据容易受到攻击。[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)或会话骑行是人们警惕的流行语之一。

这里已经提到了几篇关于 CSRF 的文章。

但总的来说，劫持会话是任何（会话感知）Web 应用程序的安全方面。中间人 (MITM) 攻击会将敏感数据暴露给未经授权的用户。[OWASP](https://www.owasp.org/index.php/Man-in-the-middle_attack)上有一篇关于 MITM 的好文章。此[博客](http://www.schneier.com/blog/archives/2013/01/man-in-the-midd_6.html)上的一些 MITM 示例。

虽然大多数文章都提供了一些漏洞的背景知识，这些漏洞可能因不实施会话劫持措施而出现，但好消息是，有一些工具可以让我们测试应用程序的这些漏洞。已经提到了开放 Web 应用程序安全项目 (OWASP)。OWASP 提供[了构建安全网站的指南](https://www.owasp.org/index.php/OWASP_Guide_Project)（非常笼统的主题）、 [会话管理测试的清单](https://www.owasp.org/index.php/Testing_for_Session_Management)以及一些[资源/工具和示例](https://www.owasp.org/index.php/Testing_for_Session_Management)来检查会话的特定方面。

提到的这些文章提供了测试此类漏洞的方法。就像您已经提到的那样，阅读一下会对您有所帮助。

# c++ - 在 C++ 中附加 sqlite3 数据库

> ID：15399228
> 
> 赞同：0
> 
> 时间：2013-03-14T00:42:50.037
> 
> 标签：c++, sqlite

有没有办法在不使用 sqlite3_exec 命令的情况下将 sqlite3 数据库附加到现有连接？有没有办法使用 sqlite3_prepare_v2 命令来做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:19:25.703

我终于通过使用 sqlite3_step 函数解决了这个问题：

```
 sqlite3_step(statement); 
```

# javascript - Ajax 与 Ruby on Rails 简单视图刷新

> ID：15399229
> 
> 赞同：1
> 
> 时间：2013-03-14T00:43:12.283
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

我想知道是否有人可以帮助我解决我在 Rails 中解决 AJAX 的问题。我想尝试做一些简单的事情，我只想不断检查索引视图是否有新条目会在屏幕外发生？

每隔几秒钟就会很酷，因为新条目会淡入淡出？新条目在一个名为 image 的 div 类中，里面是这样的：

```
<%= image_tag image.image_url(:medium).to_s %> 
```

我已经尝试了一些教程，但有些教程似乎与我想要实现的目标有点过时。我希望有人可以在正确的方向上帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T01:01:10.363

基本思想是：

1.  您存储以某种 javascript 可访问的方式加载的最新条目，例如在`data-`属性中
2.  您延迟循环 ajax 调用
3.  ajax 调用的响应会在你的 DOM 中产生变化

# 1

查看（图像/index.html.erb）：

```
<% render @images %> 
```

查看（图像/_image.html.erb）：

```
<div class="image" data-id="<%=image.id%>">
  <%= image_tag image.image_url(:medium).to_s %>
</div> 
```

# 2

Javascript：

```
function poll(){
  latest_id = $('div.image:first').data('id')
  $.getScript('/images?latest_id='+latest_id)
}

$(function(){setInterval(poll, 5000}) 
```

# 3

控制器：

```
@images = Image.order('id desc')
@images = @images.where('id > ?', params[:latest_id]) if params[:latest_id] 
```

查看（图像/index.js.erb）：

```
$('div.image:first').before('<%=j render @images%>').hide().fadeIn() 
```

请注意，我对您的模型名称和路径做了一些假设。您应该根据需要修改路径。

此示例仅用于说明目的，不适合实际应用程序 - 如果服务器超载，javascript 将不断用请求锤击它，或者如果您的初始页面没有初始条目，则插入新条目的方式将中断。

# asynchronous - 在 SignalR 中运行异步任务

> ID：15399230
> 
> 赞同：2
> 
> 时间：2013-03-14T00:43:16.687
> 
> 标签：asynchronous, signalr

我有一个仪表板类型的应用程序，它需要不断地从数百个 Atom 提要中获取数据。当前的 Webforms 实现`async`用于构建完整的页面，每个请求使用数百个线程（工作正常，因为硬件和网络非常快并且用户很少）。什么是构建 SignalR 替代品的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:59:46.230

我已将 SignalR 与 KnockoutJS 一起使用，以便在 Web 环境中轻松推送到 UI 解决方案。

网上有几个完整的解决方案，像[这样](http://www.codeproject.com/Articles/322154/ASP-NET-MVC-SIngalR-and-Knockout-based-Real-time-U)和[那样](http://www.iwantmymvc.com/mvc-3-signalr-knockout-real-time-notifications)，对我有很大帮助。

这样，您可以快速构建页面并在仍有数据或新数据出现时继续向其推送。在客户端使用 Knockout 将允许您将接收到的数据直接推送到仪表板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T00:58:11.547

我在这里用进度报告做了一个例子：

[https://github.com/dragouf/SignalR.Progress](http://goo.gl/S95MW4)

![在此处输入图像描述](../Images/f54b2bf2b76a672a3ddfb84aadfc0c56.png)

# java - Hibernate 批量删除与单次删除

> ID：15399231
> 
> 赞同：11
> 
> 时间：2013-03-14T00:43:20.677
> 
> 标签：java, hibernate, postgresql

编辑：根据我的一些调试和日志记录，我认为问题归结为为什么比where is just a single ID`DELETE FROM table WHERE id = x`要快得多。`DELETE FROM table WHERE id IN (x)``x`

我最近测试了批量删除与逐行删除的对比，发现批量删除要慢得多。该表有删除、更新和插入的触发器，但我已经测试了有和没有触发器的情况，并且每次批量删除都比较慢。**任何人都可以阐明为什么会这样或分享有关如何调试此问题的提示吗？**据我了解，我不能真正减少触发器激活的次数，但我最初认为降低“删除”查询的次数将有助于提高性能。

我在下面包含了一些信息，如果我遗漏了任何相关信息，请告诉我。

删除以 10,000 个为单位进行，代码如下所示：

```
private void batchDeletion( Collection<Long> ids ) {
  StringBuilder sb = new StringBuilder();
  sb.append( "DELETE FROM ObjImpl WHERE id IN (:ids)" );

  Query sql = getSession().createQuery( sb.toString() );
  sql.setParameterList( "ids", ids );

  sql.executeUpdate();
} 
```

只删除一行的代码基本上是：

```
SessionFactory.getCurrentSession().delete(obj); 
```

该表有两个索引，没有在任何删除中使用。不会发生级联操作。

以下是 EXPLAIN ANALYZE 的示例`DELETE FROM table where id IN ( 1, 2, 3 );`：

```
Delete on table  (cost=12.82..24.68 rows=3 width=6) (actual time=0.143..0.143 rows=0 loops=1)
  ->  Bitmap Heap Scan on table  (cost=12.82..24.68 rows=3 width=6) (actual time=0.138..0.138 rows=0 loops=1)
        Recheck Cond: (id = ANY ('{1,2,3}'::bigint[]))
        ->  Bitmap Index Scan on pk_table  (cost=0.00..12.82 rows=3 width=0) (actual time=0.114..0.114 rows=0 loops=1)
              Index Cond: (id = ANY ('{1,2,3}'::bigint[]))
Total runtime: 3.926 ms 
```

每次我重新加载数据进行测试时，我都会清理并重新索引，我的测试数据包含 386,660 行。

测试是删除所有行，我没有使用`TRUNCATE`，因为通常有一个选择标准，但出于测试目的，我已将标准包括所有行。启用触发器后，逐行删除需要 193,616 毫秒，而批量删除需要 285,558 毫秒。然后我禁用了触发器，单行删除时间为 93,793 毫秒，批量删除时间为 181,537 毫秒。触发器会汇总值并更新另一个表 - 基本上是簿记。

我玩过较小的批量大小（100 和 1），它们似乎都表现更差。

编辑：打开休眠日志记录和逐行删除，它基本上是在做：`delete from table where id=?`和解释分析：

```
Delete on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.042..0.042 rows=0 loops=1)
  ->  Index Scan using pk_table on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.037..0.037 rows=0 loops=1)
        Index Cond: (id = 3874904)
Total runtime: 0.130 ms 
```

编辑：很好奇列表是否真的包含 10,000 个 ID，如果 Postgres 会做一些不同的事情：不。

```
Delete on table  (cost=6842.01..138509.15 rows=9872 width=6) (actual time=17.170..17.170 rows=0 loops=1)
  ->  Bitmap Heap Scan on table  (cost=6842.01..138509.15 rows=9872 width=6) (actual time=17.160..17.160 rows=0 loops=1)
        Recheck Cond: (id = ANY ('{NUMBERS 1 THROUGH 10,000}'::bigint[]))
        ->  Bitmap Index Scan on pk_table  (cost=0.00..6839.54 rows=9872 width=0) (actual time=17.139..17.139 rows=0 loops=1)
              Index Cond: (id = ANY ('{NUMBERS 1 THROUGH 10,000}'::bigint[]))
Total runtime: 17.391 ms 
```

编辑：根据上面的解释分析，我从实际的删除操作中检索了一些日志记录。下面是逐行删除的两个变体的记录。

以下是一些单一的删除：

```
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=?
2013-03-14 13:09:25,424:delete from table where id=? 
```

这是单个删除的另一种变体（列表只有一项）

```
2013-03-14 13:49:59,858:delete from table where id in (?)
2013-03-14 13:50:01,460:delete from table where id in (?)
2013-03-14 13:50:03,040:delete from table where id in (?)
2013-03-14 13:50:04,544:delete from table where id in (?)
2013-03-14 13:50:06,125:delete from table where id in (?)
2013-03-14 13:50:07,707:delete from table where id in (?)
2013-03-14 13:50:09,275:delete from table where id in (?)
2013-03-14 13:50:10,833:delete from table where id in (?)
2013-03-14 13:50:12,369:delete from table where id in (?)
2013-03-14 13:50:13,873:delete from table where id in (?) 
```

两者都是表中存在的 ID，应该是连续的。

* * *

解释分析`DELETE FROM table WHERE id = 3774887;`

```
Delete on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.097..0.097 rows=0 loops=1)
  ->  Index Scan using pk_table on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.055..0.058 rows=1 loops=1)
        Index Cond: (id = 3774887)
Total runtime: 0.162 ms 
```

解释分析`DELETE FROM table WHERE id IN (3774887);`

```
Delete on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.279..0.279 rows=0 loops=1)
  ->  Index Scan using pk_table on table  (cost=0.00..8.31 rows=1 width=6) (actual time=0.210..0.213 rows=1 loops=1)
        Index Cond: (id = 3774887)
Total runtime: 0.452 ms 
```

0.162 vs 0.452 是否认为有显着差异？

编辑：

将批量大小设置为 50,000，Hibernate 不喜欢这个想法：

```
java.lang.StackOverflowError
        at org.hibernate.hql.ast.util.NodeTraverser.visitDepthFirst(NodeTraverser.java:40)
        at org.hibernate.hql.ast.util.NodeTraverser.visitDepthFirst(NodeTraverser.java:41)
        at org.hibernate.hql.ast.util.NodeTraverser.visitDepthFirst(NodeTraverser.java:42)
.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T07:49:02.447

好的，您首先要注意的是，SQL 必须以某种方式转换为计划。您的 EXPLAIN 结果表明，与 IN(vals) 构造相比，相等性的逻辑根本不同。

```
WHERE id = 1; 
```

转换为简单的相等过滤器。

```
WHERE id IN (1); 
```

转换为数组匹配：

```
WHERE id = ANY(ARRAY[1]); 
```

显然，计划者不够聪明，无法注意到在数组只有一个成员的情况下，这些在数学上是相同的。所以它正在做的是计划一个任意大小的数组，这就是你得到嵌套循环位图索引扫描的原因。

这里有趣的不仅是速度较慢，而且在大多数情况下性能表现更好。所以在 in() 子句中有一个成员，它慢 40 倍，而有 10000 个成员，它只慢 170 倍，但这也意味着 10000 成员版本也比 10000 对 id 的单独索引扫描*快*50 倍.

所以这里发生的事情是，计划者正在选择一个计划，当检查大量 id 时性能更好，但当只有少数 id 时性能更差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T08:32:00.527

如果这里的问题真的归结为“如何尽快删除大量记录？” 那么 DELETE ... IN() 方法将优于删除每个单独的行，因此追查 IN(?) 与单个成员的原因似乎比 =? 不会帮助你。

可能值得探索使用临时表来保存您要删除的所有 id，然后运行单个删除。

如果成本不是太高，将列表中的 id 按升序排列可能有助于非常大的删除性能。如果您必须对它们进行排序，请不要打扰，但是如果有一种方法可以确保每批删除地址 id 聚集在索引的同一区域中可能会稍微有益。

无论如何，在我看来，这两种情况下都使用了索引并且生成了相同的计划，所以我想知道这里是否真的存在查询解析和优化问题，而不是删除操作本身的问题。我对内部结构的了解还不够，无法确定我害怕。

# mysql - NOT IN WHERE 子句错误

> ID：15399233
> 
> 赞同：0
> 
> 时间：2013-03-14T00:43:32.010
> 
> 标签：mysql, sql, printf, notin

我想从我的数据库中获取当前不在我的**项目**数组中的**项目列表。**

 **我研究过 ' **NOT IN ' 是大量执行多个 != '** **NOT EQUAL TO** '的完美解决方案。

但我生成列表的代码：

```
 echo $query = sprintf("SELECT * FROM %s WHERE profile_id='%s' AND id NOT IN (%s)", $table_array[$item], $profile_id, implode(',', $shop_window_items)); 
```

导致此错误：

```
SELECT * FROM event WHERE profile_id='945b4dbf5bf8ee1ac08a73e9e25a939772c9c9b8' AND id NOT IN (4d96b83d18a8c2db79089ac002e346fd9dea5c43,3803bb535015174e9675090fbb680a5f286ba6bf,58f07f83a8ea10ec4db9c8b7c7f39f0a6c3a2079,57c2db2ce32925bcb49b83e22513ca74cc9bcadc)Unknown column '4d96b83d18a8c2db79089ac002e346fd9dea5c43' in 'where clause 
```

谁能告诉我我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:47:47.573

您需要在字符串周围加上单引号，否则它们被假定为系统名称。

```
...NOT IN ('%s')", $table_array[$item], $profile_id, implode("','", ...
           ^  ^                                               ^ ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:47:54.557

很确定你需要在里面的值周围加上引号`IN`

```
echo $query = sprintf("SELECT * FROM %s WHERE profile_id='%s' AND id NOT IN (%s)", $table_array[$item], $profile_id, "'" . implode("','", $shop_window_items) . "'"); 
```**

# c# - 无法写入输入来处理 C# Mono

> ID：15399234
> 
> 赞同：5
> 
> 时间：2013-03-14T00:43:34.887
> 
> 标签：c#, linux, shell, mono

我在尝试将输入写入 linux 进程时遇到问题。代码如下：

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
        process.StartInfo.WorkingDirectory = "'/home/"+user+"/pacotes/"+nome_pacote.Text+"-1.0/'";
        process.StartInfo.FileName="dh_make";
        process.StartInfo.Arguments="-n -s";
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardInput = true;
        process.Start();
        Thread.Sleep(3000);
        process.StandardInput.WriteLine(); 
```

这是错误：

> System.IO.IOException：路径 /home/vinholi/Ubuntu One/Uso do linux em flash drive/Programa gerador de .deb/GeradorDeb/GeradorDeb/bin/Debug/[Unknown] 在 System.IO.FileStream.FlushBuffer 上出现写入错误(System.IO.Stream st) [0x00000] in :0 at System.IO.FileStream.FlushBuffer () [0x00000] in :0 at System.IO.FileStream.Dispose (Boolean disposing) [0x00000] in :0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:36:21.387

对此错误的一种可能解释是进程在您尝试写入之前已退出。我试过这个`/bin/date`和一个合法`StartInfo.WorkingDirectory`的，程序集是`/Workspace/export/misc/H.exe`. 这产生：

```
Unhandled Exception:
System.IO.IOException: Write fault on path /Workspace/export/misc/[Unknown]
  at System.IO.FileStream.WriteInternal (System.Byte[] src, Int32 offset, Int32 count) [0x00097] in /Workspace/mono/mcs/class/corlib/System.IO/FileStream.cs:658 
  at System.IO.FileStream.Write (System.Byte[] array, Int32 offset, Int32 count) [0x000aa] in /Workspace/mono/mcs/class/corlib/System.IO/FileStream.cs:634 
  at System.IO.StreamWriter.FlushBytes () [0x00043] in /Workspace/mono/mcs/class/corlib/System.IO/StreamWriter.cs:222 
  at System.IO.StreamWriter.FlushCore () [0x00012] in /Workspace/mono/mcs/class/corlib/System.IO/StreamWriter.cs:203 
  at System.IO.StreamWriter.Write (System.Char[] buffer) [0x00022] in /Workspace/mono/mcs/class/corlib/System.IO/StreamWriter.cs:351 
  at System.IO.TextWriter.WriteLine () [0x00000] in /Workspace/mono/mcs/class/corlib/System.IO/TextWriter.cs:257 
  at X.Main () [0x00066] in /Workspace/export/misc/H.cs:17 
```

每次在`process.StartInfo.WorkingDirectory`. 尽管错误消息应该更清楚，但对此无能为力。

由于引号，您的目录无效。您也不应该像以前那样连接路径名，因为这会使您的应用程序无法移植到非 Unix 操作系统。相反，将其写为：

```
var home = Environment.GetFolderPath (Environment.SpecialFolder.UserProfile);
process.StartInfo.WorkingDirectory = Path.Combine (home, "pacotes", nome_pacote.Text+"-1.0"); 
```

使用`Environment.GetFolderPath()`可以更轻松地在 Mac 上运行您的应用程序（主目录位于`/Users/<username>`而不是`/home/<username>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T06:42:37.557

另一种可能性是您启动的二进制文件是一个悬空符号链接。检查二进制文件是否存在或者是指向有效二进制文件的符号链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-24T11:12:24.083

正如另一个回复所说：“对此错误的一个可能解释是进程在您尝试写入之前退出。”

这就是我遇到的问题——即使在按照另一个答案中的描述设置了 WorkingDirectory 之后。在你同样的情况下：C#、Mono、Ubuntu。

最终，在我的情况下，解决方案是设置参数，以便进程不退出，并且真的试图从 StandardInput 读取输入。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-14T07:06:43.373

你试图写的路径也不能写。" /home/vinholi/Ubuntu One/Uso do linux em flash drive/Programa gerador de .deb/GeradorDeb/GeradorDeb/bin/Debug/"

看起来像一个USB驱动器。检查以下内容：

1.  它不是只读的。
2.  它不是以只读方式安装的。
3.  USB 驱动器没有空间不足。

# c - GCC 4.7.2 优化问题

> ID：15399236
> 
> 赞同：7
> 
> 时间：2013-03-14T00:43:56.280
> 
> 标签：c, gcc, embedded, optimization

**概括**

我正在使用最新版本的 Sourcery CodeBench Lite 工具链（GCC arm-none-eabi 4.7.2）将 ST 的 USB OTG 库移植到定制的 STM32F4 板上。

当我用 -O0 编译代码时，程序运行良好。当我使用 -O1 或 -O2 编译时，它会失败。当我说失败时，它就停止了。没有硬故障，什么都没有（嗯，很明显它正在做一些事情，但我没有一个模拟器可以用来调试和发现，对不起。我的硬故障处理程序没有被调用）。

**细节**

我正在尝试调用以下函数...

```
void USBD_Init(USB_OTG_CORE_HANDLE *pdev,
           USB_OTG_CORE_ID_TypeDef coreID, 
           USBD_DEVICE *pDevice,                  
           USBD_Class_cb_TypeDef *class_cb, 
           USBD_Usr_cb_TypeDef *usr_cb); 
```

...但它似乎没有进入函数体。（这是“堆栈粉碎”的症状吗？）

传递给此函数的结构具有以下定义：

```
typedef struct USB_OTG_handle
{
  USB_OTG_CORE_CFGS    cfg;
  USB_OTG_CORE_REGS    regs;
  DCD_DEV     dev;
}
USB_OTG_CORE_HANDLE , *PUSB_OTG_CORE_HANDLE;

typedef enum
{
  USB_OTG_HS_CORE_ID = 0,
  USB_OTG_FS_CORE_ID = 1
}USB_OTG_CORE_ID_TypeDef;

typedef struct _Device_TypeDef
{
  uint8_t  *(*GetDeviceDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetLangIDStrDescriptor)( uint8_t speed , uint16_t *length); 
  uint8_t  *(*GetManufacturerStrDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetProductStrDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetSerialStrDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetConfigurationStrDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetInterfaceStrDescriptor)( uint8_t speed , uint16_t *length);   
} USBD_DEVICE, *pUSBD_DEVICE;

typedef struct _Device_cb
{
  uint8_t  (*Init)         (void *pdev , uint8_t cfgidx);
  uint8_t  (*DeInit)       (void *pdev , uint8_t cfgidx);
 /* Control Endpoints*/
  uint8_t  (*Setup)        (void *pdev , USB_SETUP_REQ  *req);  
  uint8_t  (*EP0_TxSent)   (void *pdev );    
  uint8_t  (*EP0_RxReady)  (void *pdev );  
  /* Class Specific Endpoints*/
  uint8_t  (*DataIn)       (void *pdev , uint8_t epnum);   
  uint8_t  (*DataOut)      (void *pdev , uint8_t epnum); 
  uint8_t  (*SOF)          (void *pdev); 
  uint8_t  (*IsoINIncomplete)  (void *pdev); 
  uint8_t  (*IsoOUTIncomplete)  (void *pdev);   
  uint8_t  *(*GetConfigDescriptor)( uint8_t speed , uint16_t *length);  
  uint8_t  *(*GetUsrStrDescriptor)( uint8_t speed ,uint8_t index,  uint16_t *length);   

} USBD_Class_cb_TypeDef;

typedef struct _USBD_USR_PROP
{
  void (*Init)(void);   
  void (*DeviceReset)(uint8_t speed); 
  void (*DeviceConfigured)(void);
  void (*DeviceSuspended)(void);
  void (*DeviceResumed)(void);  

  void (*DeviceConnected)(void);  
  void (*DeviceDisconnected)(void);    

}
USBD_Usr_cb_TypeDef; 
```

我试图包含与此问题相关的所有源代码。如果您想查看完整的源代码，可以在这里下载：http: [//www.st.com/st-web-ui/static/active/en/st_prod_software_internet/resource/technical/software/firmware/stm32_f105-07_f2_f4_usb -host-device_lib.zip](http://www.st.com/st-web-ui/static/active/en/st_prod_software_internet/resource/technical/software/firmware/stm32_f105-07_f2_f4_usb-host-device_lib.zip)

**尝试的解决方案**

我尝试使用`#pragma GCC optimize ("O0")`,`__attribute__((optimize("O0")))`并将某些定义声明为`volatile`，但没有任何效果。我宁愿只修改代码以使其与优化器很好地配合使用。

**问题**

如何修改此代码以使其与 GCC 的优化器配合使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-06T07:01:30.967

您显示的代码似乎没有任何问题，所以这个答案会更笼统。

“接近硬件”代码在未经优化的情况下正常工作并在更高优化级别下失败的典型错误是什么？

想想`-O0`和之间的区别`-O1/-O2`：优化策略是——除其他外——循环展开（似乎并不危险）、尽可能长时间地将值保存在寄存器中、消除死代码和指令重新排序。

如果没有正确声明可以随时更改的硬件寄存器，改进的寄存器使用通常会导致更高优化级别的问题`volatile`（请参阅上面的 PokyBrain 评论）。优化后的代码将尝试尽可能长时间地将值保存在寄存器中，从而导致您的程序无法注意到硬件方面的变化。**确保`volatile`正确声明硬件寄存器**

如果您需要读取硬件寄存器以对编译器不知道的硬件产生任何影响并且不对您刚刚读取的值做任何事情，那么死代码消除可能会导致问题。如果您没有正确声明用于读取访问的变量，这些硬件访问可能会被优化掉`void`（尽管编译器应该发出警告）。**确保将虚拟读取投射到`(void)`**

指令重新排序：如果您需要以特定顺序访问不同的硬件寄存器以产生所需的结果，并且如果您通过与其他方式无关的指针来执行此操作，编译器可以自由地重新排序结果指令，因为它认为合适（*即使*硬件寄存器*已*正确声明`volatile`）。您需要在代码中添加内存屏障以强制执行所需的访问顺序 ( `__asm__ __volatile__(::: "memory");`)。**确保在需要的地方添加内存屏障。**

尽管不太可能，但您仍然可能发现了编译器错误。优化不是一件容易的事，尤其是当它接近硬件时。可能值得一看 gcc 错误数据库。

如果这一切都没有帮助，您有时无法避免深入研究生成的汇编代码，以确保它在做它应该做的事情。

# mysql - openfire 会干扰 mysql 或 phpmyadmin 吗？

> ID：15399238
> 
> 赞同：0
> 
> 时间：2013-03-14T00:44:11.253
> 
> 标签：mysql, phpmyadmin, openfire

我已经在 windows server 2008 上安装了 php、mysql、phpmyadmin，一切正常。现在，我安装了 Openfire 并将其连接到 mysql 数据库。我现在遇到的问题是，当我每次运行 openfire 时，我都无法连接到数据库或登录 phpmyadmin。似乎openfire正在干扰mysql端口！我正在为 mysql 使用端口 3306。我相信 openfire 使用的是 9090 和 9191。

因此，当我打开 fireopen 时，我的 php 脚本将无法连接到数据库，也无法登录 phpmyadmin。但是当我关闭 openfire 时，一切都会再次正常。

任何人都可以帮我打赌两个人一起工作，没有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:56:07.830

我发现了这个问题。问题是openfire中的最小连接设置为100，Mysql最大连接也设置为100。所以我增加了允许的最大连接并解决了这个问题。

# matlab - 具有自己 ID 的散点图

> ID：15399239
> 
> 赞同：0
> 
> 时间：2013-03-14T00:44:14.810
> 
> 标签：matlab, label, point, scatter-plot

我正在尝试在散点图中绘制数据标签。例如我有向量

```
X=[0,1,2,3,4,2,1,0];
Y=[0,9,2,6,2,1,1,0];
z = 1:size(X,2);
scatter (X,Y) 
```

我在用

```
 for A = 1:size(X,2);
   text(X(A),Y(A),z(A));
   end; 
```

但是 MATLAB 声明 Error using ==> text String argument expected after 2 or 3 numeric arguments

我应该怎么做才能在每对 x 和 y 中添加 ID，以及如何显示具有相同 X 和 Y 值的 ID。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:03:35.240

将 z(A) 更改为 num2str(z(A))，因为 text() 期望它是一个字符串。

# javascript - 文本的悬停属性不起作用

> ID：15399243
> 
> 赞同：1
> 
> 时间：2013-03-14T00:44:41.220
> 
> 标签：javascript, jquery, html, css

将鼠标悬停在文本 CRM 上时，会弹出一个弹出窗口。当我将鼠标悬停在文本上时，文本颜色应该会改变——悬停时文本的颜色应该变成红色。

我在下面提供了我的代码。

我把悬停属性给了我的班级，但它不起作用。我如何解决它？

[http://jsfiddle.net/a5tjG/3/embedded/result/](http://jsfiddle.net/a5tjG/3/embedded/result/)

```
.cubeTextStyleCRM:hover {
    color: red;
}
$('document').ready(function() {
                window.setTimeout(function() {
                    $('.cubeCellCRM').each(function() {
                        var htmlText = $(this).attr('data-text');
                        $(this).append('<div class="cubeTextStyleCRM">' + htmlText + '</div>');

                        $(this).hover(

                        function() {
                            $(".cubeTextStyleCRM").append("<span class='divStock'>Customer Relationship Management</span>");

                        },

                        function() {
                            $(this).find("span:last").remove();
                        });
                    });
                }, 600);

            });

<div class="cubeCellCRM" data-text="CRM" data-caption="
                                &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='#' &gt;Create&lt;/a&gt; &lt;div&gt; 
                                &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='#' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; 
                                &lt;a style='padding-left: 40px; font-size: 14px; color: grey;' href='#' &gt;Reports&lt;/a&gt;"
                        data-image="http://intra.defie.co/images/Desktop_icons_02.07.13/CRM.png"></div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:54:30.617

你`.cubeTextStyleCRM`在你的 CSS 中有一个`color: #333 !important;`覆盖你的颜色。就这样吧`color: #333;`，你`:hover`应该工作。如果由于某种原因您无法访问 CSS 的那部分，只需再次重写该规则，例如：

```
<style>
.cubeTextStyleCRM {
  color: #333;
}
.cubeTextStyleCRM:hover {
  color: red;
}
</style> 
```

# asp.net - 如何在 Telerik 的 RadListBox 控件上添加和删除行？

> ID：15399247
> 
> 赞同：0
> 
> 时间：2013-03-14T00:44:52.963
> 
> 标签：asp.net, telerik, webforms, radlistbox

我正在使用 Telerik 的 RadListBox 控件进行 Web 应用程序开发，想知道如何通过 TextBox 控件将行添加到 RadListBox 中，下面是我的代码片段：

```
<telerik:RadListBox ID="rlbControl" runat="server" SelectionMode="Multiple"> 
   <ItemTemplate> 
      <table>
       <tr>
           <td>
               <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>' ></asp:Label>
           </td>
           <td style="width:20px"></td>
           <td >
               <asp:Label ID="lblAge" runat="server" Text='<%# Eval("Age") %>' ></asp:Label> 
           </td>
       </tr>
     </table>
   </ItemTemplate> 
</telerik:RadListBox> 

Name : <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
Age : <asp:TextBox ID="txtAge" runat="server" ></asp:TextBox>

<asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="btnAdd_Click"  />
<asp:Button ID="btnDel" runat="server" Text="Delete" OnClick="btnDel_Click"/> 
```

单击 Add 按钮时，从两个 TextBox 获取输入并绑定到 RadListBox。

对于删除，从 RadListBox 中选择行并单击 Delete 按钮，从 RadListBox 中删除选定的行。

我的问题是如何添加和删除行？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:47:09.530

您好，您可以创建数据表和数据行。然后将文本框值添加到 dararow。然后你可以将此数据表绑定到 RadListBox。对于删除，您需要选择 ListItem 索引并从数据表中删除该行，然后再次绑定到 RadListBox。它会工作..

[删除行演示链接](https://stackoverflow.com/questions/15267636/how-i-can-remove-a-item-in-my-listview/15267801#15267801)

还要在下面的链接帖子中查看我的答案。您将了解插入行

[向 ListView 添加行](https://stackoverflow.com/questions/15266916/how-to-iterate-all-items-in-a-given-row-in-the-datatable/15266995#15266995)

# javascript - Javascript 你可以序列化一个 File 对象吗

> ID：15399248
> 
> 赞同：10
> 
> 时间：2013-03-14T00:44:55.330
> 
> 标签：javascript, html, fileapi

我需要`File`从文件输入中序列化一个对象，以便可以保存该对象，将其解析回文件对象，然后使用该`FileReader`对象进行读取。

有谁知道这在谷歌浏览器中是否可行？

我认为问题在于对 file.path 属性的保护。Webkit 浏览器隐藏了这个属性，所以我猜当你序列化它时，路径被删除了。

那么当然，如果没有路径信息，FileReader 就无法读取它。

这是一个例子：

```
var files = uploadControl.files[0];
var dataFile = JSON.stringify(files);
var newFile = JSON.parse(dataFile);
var reader = new FileReader();
reader.onload = (function(event) {
    var fileContents = event.target.result;
});
reader.readAsText(newFile); 
```

没发生什么事。阅读器未加载。如果我传递 JSON 对象，它也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T04:20:46.020

作为原则问题，您所要求的将是不可能的。如果可能有一些表示文件对象的文本，那么您可以从头开始构造该文本，对其进行反序列化，从而访问用户未授予权限的文件。

（例外情况是，如果代表性文本是某种只有浏览器可能首先给出的高度机密的位串（加密签名，或查找表中的稀疏密钥）——但我希望该功能存在，它会被记录在案，你会已经找到它。）

# css - CSS 属性选择器 - 哪个更快？

> ID：15399256
> 
> 赞同：-1
> 
> 时间：2013-03-14T00:45:33.710
> 
> 标签：css, performance, css-selectors

就性能而言，哪一个更受欢迎？

```
a[href*="op.ExtSite.com/p"]

a[href*="shop.ExtSite.com/page"]

a[href^="http://shop.ExtSite.com/page"]

a[href^="http://shop.ExtSite.com/page"][href$=".html"] 
```

**更新**

最后一个选择器应该写成如下：

```
a[href^="http://shop.E"][href$=".html"] 
```

另外，关于这个多重选择器，我想知道先检查哪个条件，左边的还是右边的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:50:43.490

我的猜测是这个

```
a[href^="http://shop.ExtSite.com/page"] 
```

或者

```
a[href^="http://shop.ExtSite.com/page"][href$=".html"] 
```

`h`因为它从字符串的第一个开始查找，所以将避免所有开头没有的链接。

**更新** 如果您需要检查完整模式，请使用我在下面提到的模式：

```
a[href^="http://shop.ExtSite.com/page.html"] 
```

# c++ - Process.ExitCode 属性返回的退出代码不正确

> ID：15399257
> 
> 赞同：0
> 
> 时间：2013-03-14T00:45:35.797
> 
> 标签：c++, .net, process

我有一个本机 C++ 应用程序，我在执行 C++/CLI 应用程序期间作为进程运行，我看到退出代码有一些奇怪的行为。当进程正确退出但 Process.ExitCode 返回 -529697949 时，我希望退出代码为 0。但是，当我调试 C++ 应用程序时，我可以看到返回的退出代码实际上是 0。为什么 Process.ExitCode 属性与该值不匹配？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T01:59:30.470

当程序行为不端时，绝对最重要的假设是**永远不要**假设它是代码中的错误，它被数十万程序员使用并在十亿台机器上运行。首先假设这是您的程序中的问题。

有了这些知识，就可以更好地了解这个数字。当数字看起来很大且随机时，一个好的策略总是将其转换为十六进制。-529697949 = 0xe06d7363。Shazam，神奇的数字，谷歌也很好。这就是 Windows 异常代码的价值。e0 使其成为致命错误，6d7363 是拼写“msc”的 ASCII 代码。

您的程序因未处理的 C++ 异常而崩溃。

# r - R中的GMM估计案例

> ID：15399259
> 
> 赞同：3
> 
> 时间：2013-03-14T00:46:06.680
> 
> 标签：r, regression, estimation

我想使用迭代非线性 GMM 估计泰勒规则方程的前瞻性版本：

![模型](../Images/b77df1f89ad4b1cff92a33d0da865d48.png)

我有模型中所有变量的数据，即![圆周率](../Images/030bdca399c98079cdde288d12fb1253.png)（通货膨胀率）、![X](../Images/65c08be4425adb859b19dda030d56ef0.png)（失业差距）和（有效联邦基金利率） ，![一世](../Images/ecea4a3b5a3aa521304fdd44e1528a1d.png)我试图估计的是一组参数![一世](../Images/db231c5aac13281fc4fb7e7b4be3a187.png)和。![一世](../Images/a9796f0284513a81743e33b530e7e4a1.png)![一世](../Images/18b24669aacccbf97f801747f2d76818.png)

我需要帮助的地方是使用R 包中的`gmm()`函数。`{gmm}`我“认为”我需要的函数参数是参数：

```
gmm(g, x, type = "iterative",...) 
```

其中`g`是公式（即上述模型），`x`是数据向量（或矩阵），`type`是要使用的 GMM 类型。

我的问题是数据矩阵参数。我不知道构建它的方式（并不是说我不知道​​ R 中的矩阵，而且我在互联网上看到的所有示例都与我在这里尝试做的不同。另外，这是我的第一次`gmm()`在 R 中使用该函数。还有什么我需要知道的吗？

您的帮助将不胜感激。谢谢 ：）

# r - 有效地存储一个大但低秩的矩阵

> ID：15399260
> 
> 赞同：7
> 
> 时间：2013-03-14T00:46:09.080
> 
> 标签：r, matrix, rank, cran

我知道 R 中有一些包可以有效地存储稀疏矩阵。还有一种方法可以有效地存储低秩矩阵吗？例如：

```
A <- matrix(rnorm(1e6), nrow=1e5, ncol=1e1)
B <- A %*% t(A) 
```

现在，`B`它太大而无法存储在内存中，但它的排名很低。有没有办法以`B`一种有效的方式构造和存储，以便即时执行一些基本的读取方法（`rowSums`、、`colSums`等），以换取 CPU 或内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T14:29:41.480

您的问题已经是答案：为了有效地存储这样一个低秩矩阵，您需要创建一个包含这两个因素的数据结构。如果需要矩阵向量乘法，可以使用因子的矩阵向量乘积从右到左完成。

这种策略和数据结构的一个应用可以在有限内存 Broyden 或 BFGS 准牛顿方法的实现中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:10:30.130

这是另一种方法，尽管我想念知道这对于大型矩阵的效率有多高的经验：

如果秩低，则意味着矩阵包含许多不相关的线，它们是其他线的线性组合。如果矩阵表示一个线性方程组，则可以设计一种算法，依次删除这些线。

要检查一条线是否不相关，请检查没有该线的矩阵的秩是否仍然相同。要计算矩阵等级，请参阅[这个](https://stackoverflow.com/questions/2473983/calculate-matrix-rank-using-scipy/6900786#6900786)和[那个](https://stackoverflow.com/questions/2473983/calculate-matrix-rank-using-scipy/3356123#3356123)答案。

# windows - 如何在 gdb 启动时加载 .gdbinit？

> ID：15399265
> 
> 赞同：9
> 
> 时间：2013-03-14T00:47:23.730
> 
> 标签：windows, gdb

这是一个看似微不足道的问题，但我找不到一个简单的方法来完成这个。

我将我的`.gdbinit`文件定义在与 gdb.exe 所在的目录相同的目录中——即在我的编译器的 bin 目录中。但是，当我运行 gdb 时，我得到了这个：

```
GNU gdb (GDB) 7.5.50.20120804-cvs
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-w64-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
warning: File "g:\Mingw32-4.6.3\bin\.gdbinit" auto-loading has been declined by
your `auto-load safe-path' set to "$debugdir:$datadir/auto-load". 
```

[我在这里](http://sourceware.org/gdb/onlinedocs/gdb/Auto_002dloading-safe-path.html)查阅了有关自动加载的手册，但它与保存我添加的新安全路径无关！退出 gdb 并重新启动它，我添加的安全路径消失了。

我的`.gdbinit`包含我总是希望在启动时加载的设置。加载`.gdbinit`可能与环境无关，但在 Windows 下执行此操作的最简单方法是什么？有一个附加约束`.gdbinit`不能驻留在我的主目录中——它必须与`gdb.exe`可执行文件位于同一路径中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T01:36:45.933

> 我在 gdb.exe 所在的同一目录中定义了我的 .gdbinit 文件

放入您的`$HOME`或*当前*目录。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-05T20:11:58.020

我在 Windows 7 上使用 CodeSourcery arm-none-eabi-gdb.exe。按照上述说明在我的情况下不起作用。以下命令有效：

`arm-none-eabi-gdb.exe -x D:\CodeSourcery\bin\.gdbinit`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-28T20:49:49.277

以上答案都不适合我。问题是在windows下没有设置HOME环境变量。所以让我们设置一个：在命令行中编写：

```
 set HOME=c:\users\user 
```

.gdbinit 应该在哪里，您可以通过设置内容来禁用安全保护：

```
set auto-load safe-path / 
```

从现在开始，您的 gdb 将加载您的本地 .gdbinit

```
c:\MinGW\bin\gdb.exe app.exe 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-17T14:55:24.033

我使用 -iex -ix 参数启动 Xtensa 工具链附带的 xt-gdb，如下所示：

xt-gdb -iex "设置自动加载安全路径 Path\to\gdbinit\dir" -ix Path\to\gdbinit\dir.gdbinit

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-20T18:15:40.020

对于其他苦苦挣扎的 xtensa 工具链用户：xt-gdb 不是在寻找一个名为`.gdbinit`，而是`.xt-gdbinit`. 否则，机制与标准 gdb 完全相同。

# qt - QGraphicsObject 自动销毁

> ID：15399266
> 
> 赞同：1
> 
> 时间：2013-03-14T00:47:26.023
> 
> 标签：qt, qgraphicsitem, qobject

`QGraphicsObject`继承自`QGraphicsItem`and `QObject`，但与大多数 QObject 子类不同，QGraphicsObject 的构造函数没有`QObject *parent`参数。

那么这是否意味着我应该在构造函数中提供这样的参数，当我对它进行子类化甚至使用`setParent`方法来具有自动销毁功能时？

PS：我有 Qt 5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:45:54.747

不，你没有。`QGraphicsItem`有自己的父/子层次结构。QGraphicsItems 的生命周期像 QObjects 一样管理。父项负责销毁其子项。如果 QGraphicsItem 由 a 拥有`QGraphicsScene`，则场景正在管理其生命周期。

# jakarta-ee - org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType 的 java.lang.NullPointerException

> ID：15399269
> 
> 赞同：1
> 
> 时间：2013-03-14T00:47:37.060
> 
> 标签：jakarta-ee, nullpointerexception, glassfish, glassfish-3

我的 Web 容器是 GlassFish Server 3+，当我运行我的 Java 应用程序时，应用程序将正确运行，但我在控制台中看到以下错误。

```
INFO: The Admin Console is already installed, but not yet loaded.
SEVERE: Exception while visiting java/lang/Object.class of size 1515
java.lang.NullPointerException
    at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)
    at org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:171)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:133)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:56:45.047

当您在没有部署任务的情况下启动服务器时，您是否收到这些错误？

这些错误与内部 glassfish 服务器类有关。刚开始学习GF的时候，我的实习师傅告诉我，这类错误与bug有关，尤其是尝试停止gf server时出现的错误。

祝你好运。

# spring-mvc - Spring MVC——org.xml.sax.SAXParseException、java.lang.NoSuchMethodException、HTTP 状态 404

> ID：15399272
> 
> 赞同：0
> 
> 时间：2013-03-14T00:47:54.340
> 
> 标签：spring-mvc, http-status-code-404, nosuchmethoderror, saxparseexception

我是 Spring MVC 的新手，还有另一个问题。当我启动我的应用程序时，我现在收到一条 HTTP 状态 404 消息，并且以下内容出现在我的控制台中：

```
java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addServlet
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:802)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1057)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1694)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1209)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:882)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:317)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5081)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)

SEVERE: Parse error in application web.xml file at jndi:/localhost/jcbulboard/WEB-INF/web.xml
    org.xml.sax.SAXParseException; systemId: jndi:/localhost/jcbulboard/WEB-INF/web.xml; lineNumber: 13; columnNumber: 12; Error at (13, 12) : org.apache.catalina.deploy.WebXml addServlet
        at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
        at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2713)
        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1060)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
        at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1694)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1209)
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:882)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:317)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5081)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)
    Caused by: java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addServlet
        at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:802)
        at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1057)
        ... 36 more 
```

web.xml（第 13 行被标记为错误，我在下面标记了它）

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Job Connections Bulletin Board</display-name>

    <servlet>
        <servlet-name>jcbulboard</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet><!-- This is line 13 -->

    <servlet-mapping>
        <servlet-name>jcbulboard</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>Welcome.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:55:37.903

尝试删除`<servlet-class>`标签中的空格，一些应用服务器对这种类型的东西很挑剔。我知道由于空格而导致 Spring XML 配置出现问题，通常是在我使用 Eclipse 格式化 XML 文件之后。

```
<servlet>
    <servlet-name>jcbulboard</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet><!-- This is line 13 --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:55:39.283

通过从我的 Tomcat jar 中删除 catalina.jar 解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T09:46:03.380

我对 Spring Boot 有同样的问题，添加这个依赖项修复了它：

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-tomcat</artifactId>
    <scope>provided</scope>
</dependency> 
```

# sass - 导入文件中没有 Sass 功能

> ID：15399276
> 
> 赞同：8
> 
> 时间：2013-03-14T00:48:24.103
> 
> 标签：sass

文件1.scss

```
@function toPx($n) {
    @return $n + 0px;
} 
```

文件2.scss

```
body {
   font-size:toPx(10);
} 
```

文件 3.scss

```
@import "file1.scss";
@import "file2.scss"; 
```

file3.css 的输出包含

```
body {
       font-size:toPx(10);
    } 
```

即使我直接导入到 file2.scss，我也无法让我的 toPx 函数工作。如果我在 file2.scss 中声明 toPx 它将起作用。

我是 SASS 的新手，所以假设我在这里遗漏了一些简单的东西，有人能告诉我什么吗？

令人惊讶的是，我正在使用的 sass 编译器 Scout 不会引发错误，而只是将 toPx(10) 呈现到输出 CSS 中。

**编辑**

我发现这个参考似乎表明我需要使用 Ruby API 才能实现全局功能。有人能澄清一下吗？

[http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:32:46.043

我偶然发现了一个 hack 答案，这让我认为这可能是一个 Scout 错误。

我将 file3.scss 更改为此

```
@import "file1.scss";
@import "file2.scss";
body {
       font-size:toPx(10);
    } 
```

编译后，它按预期工作。接下来，我将文件改回我在问题中描述的方式，现在我对 toPx 的所有调用都可以在任何文件中使用。

# .htaccess - 受密码保护的 Joomla 网站

> ID：15399280
> 
> 赞同：1
> 
> 时间：2013-03-14T00:48:50.723
> 
> 标签：.htaccess, joomla, joomla2.5

我试图弄清楚如何使用密码保护运行 apache2 的服务器上的整个 Web 目录。我有一个 joomla 应用程序正在运行，并希望只允许授权用户浏览公共 dns。我曾尝试设置 .htaccess 文件，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:58:28.207

如果有更多经验丰富的人，请纠正我，如果我错了，但是使用 htaccess 文件保护您的整个 Joomla 站点的密码将阻止用户进入您的站点。

您最好查看 Joomla 的一些安全扩展，例如[Admin Tools](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection/14087)、[Admin Exile](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/15711)和[OSE Anto Hacker (commercial)](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection/8384)。

有关更多安全扩展，请查看 JED 上的站点安全类别：

[http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection](http://extensions.joomla.org/extensions/access-a-security/site-security/site-protection)

还要确保所有文件夹都设置为 755，文件设置为 644。这可以手动完成，也可以通过管理工具快速完成。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T18:11:51.377

1.  在Joomla的根目录下找到htaccess.txt，重命名为.htaccess
2.  打开它进行编辑
3.  找到“## Mod_rewrite 正在使用”。里面的文字。
4.  将此代码粘贴在它之后（在新行中）：

    ```
    AuthUserFile "/folder/of/your/password/file/.htpasswd"
    AuthName "限制区域"
    AuthType 基本
    需要有效用户

    ```

5.  在文件中找到“RewriteEngine On”文本

6.  在它后面粘贴这一行：

    `RewriteRule \.htpasswd$ - [F,L]`

不要忘记将您的密码文件上传到上面指定的文件夹。在密码文件中，每一行都可以包含一对用户名和密码，格式如下：
username:MD5_encoded_pa​​ssword

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:02:16.980

您可以保护您的 htaccess 文件密码。

您还可以使用 joomla 的用户身份验证来获得注册或管理员等权限访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T19:16:51.463

如果您的服务器正在运行 cpanel 或 plesk，则可以选择从面板界面设置文件夹密码保护。

# lua - WoW Addon (Lua) 变量和方法

> ID：15399281
> 
> 赞同：0
> 
> 时间：2013-03-14T00:48:51.877
> 
> 标签：lua

我已经搞砸了几个小时，我似乎无法让它工作

```
for i=1, 10 do
 local frame = "MyFrame"..i

 frame:EnableMouseWheel(true)
end 
```

我得到的错误是

```
尝试调用方法“EnableMouseWheel”（零值）

```

但如果我这样做

```
MyFrame1:EnableMouseWheel(true) 
```

从来没有问题，它可以工作

无论如何使用变量作为方法的框架名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:56:20.440

这将起作用：

```
local vars = getfenv()
for i=1, 10 do
    local frame = "MyFrame"..i

    vars[frame]:EnableMouseWheel(true)
end 
```

* * *

尽管您似乎正在寻找错误问题的解决方案。为什么不将它们存储在一个数组中呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:56:39.113

如果要将字符串名称转换为变量名称，则需要以表的形式访问全局对象：

```
_G["MyFrame1"] 
```

我不知道Lua魔兽使用的是什么版本。如果它是一个没有 _G 的非常旧的版本，那么您可能需要改用 getglobal 函数

```
getglobal("MyFrame1") 
```

也就是说，这通常是一种反模式。如果您是最初定义 MyFrame 变量的人，通常最好使用数组来代替：

```
Myframes = {
   MyFrame1,
   MyFrame2,
} 
```

因为这可以让您避免字符串操作

```
local frame = MyFrames[i]
frame:EnableMouseWheel(true) 
```

# mongodb - 如何使用物化路径通过 MongoMapper 在 Mongo 中查找文档？

> ID：15399285
> 
> 赞同：0
> 
> 时间：2013-03-14T00:49:12.717
> 
> 标签：mongodb, mongomapper

我们想使用 MongoMapper 对 Mongo 使用[物化路径](http://docs.mongodb.org/manual/tutorial/model-tree-structures-with-materialized-paths/)搜索文档。

我们应该怎么做？我们传递正则表达式`:path => /path_we_want/`吗？

我们在 MongoMapper 0.12 和 Mongo 2.2 上。

# android - 标记需要单击两次才能保持信息窗口打开

> ID：15399287
> 
> 赞同：0
> 
> 时间：2013-03-14T00:49:17.613
> 
> 标签：android, google-maps, google-maps-android-api-2

我有一个使用 Android Google Maps API V2 的地图应用程序，但是，当用户单击任何标记时，InfoWindow 会出现一秒钟，然后立即变得不可见。如果用户再次单击，则这次显示 InfoWindow 没有问题。

我正在使用下面链接中的代码扩展 SupportMapFragment 并创建一个扩展 SherlockMapFragment 类的片段。

[https://gist.github.com/galex/4392030](https://gist.github.com/galex/4392030)

片段类重写 onMarkerClick 方法并返回 false，表示应用程序没有“手动”处理事件。

你能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:28:55.470

发现问题。这是一个逻辑错误，导致标记被删除并关闭信息窗口。

抱歉，是我的错。

# mysql - SQL 语法要求 FROM 作为 SELECT 语句的一部分

> ID：15399291
> 
> 赞同：0
> 
> 时间：2013-03-14T00:49:32.833
> 
> 标签：mysql, sql

这是一个有点学术性的问题，因为我试图更好地掌握 SQL。

为什么会这样：

```
SELECT id FROM nerds AS nerdnumber 
```

但这不会？

```
SELECT nerds.id AS nerdnumber 
```

对我来说，如果我的 SELECT 已经标识了表，则不需要 FROM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:53:42.050

在 select 子句中包含表名是为了在进行连接时消除歧义。From 子句指定语句正在访问哪些表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T00:59:12.097

因此，在幕后实际发生的是引擎获取您的查询并将其分解并确定要触发的实际指令以获取您的数据。

使用的语法（SELECT blah FROM ...）已开发和标准化（大部分），这就是使用的。需要 FROM 的原因是......因为它是:)

*可以更改/编写查询解析器以按照您建议的方式工作吗*？*不明白为什么不这样做，但会给解析器带来额外的复杂性。SELECT、FROM、UPDATE、SET 和所有其他关键字对于让解析器找到锚点以从中提取数据很重要。*

 *这就像...最快最肮脏的原因，你当然可以去阅读关于 SQL 标准的发展，阅读关于查询优化和解析，阅读一些非常有趣和疯狂的东西 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T01:00:30.340

`SELECT id FROM nerds AS nerdnumber`并且`SELECT nerds.id AS nerdnumber`不是等效的查询。第一个将表 nerds 别名为 nerdsnumber，第二个尝试将 nerds.id 别名为 nerdersnumber。但我看到了你的问题。

你问的可能吗？是的。应该这样做吗？可能不是。使用 FROM 子句的原因是定义数据的来源。select 子句中的字段用于确定您从定义的数据集中使用什么。这是一种非常易于阅读和理解的语言（因此最初的 SEQL = 结构化英语查询语言）。添加您想要的功能会突然变得很难理解查询值的来源。如果您定义了该表怎么办？如果您在查询中将该表名重新定义为别名怎么办？

它最终只会增加歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:55:40.947

**如果编写得当，**两者都可以工作。****

 **如果我正确理解了您的示例，那么在第一种情况下，您为**table**建立 alias ，在第二种情况下为**field**建立别名。

所以没有错`SELECT nerds.id AS nerdfield FROM nerdstable AS nerds;`***

# php - MySQLI 语句 (stmt) 初始化错误

> ID：15399292
> 
> 赞同：0
> 
> 时间：2013-03-14T00:49:41.080
> 
> 标签：php, database, mysqli

如果我正确阅读了 PHP 文档，我想使用 mysqli_stmt_init 创建一个适合 stmt 操作的变量，对吗？我以为我做得对，但它似乎不能正常工作。当我按照文档说的那样做时，它给了我一个错误：

警告：mysqli_stmt_bind_param() [function.mysqli-stmt-bind-param]：无效对象或资源 mysqli_stm"

```
$get_posts = mysqli_stmt_init($db);
mysqli_stmt_prepare($get_posts, 'select * from Chatposts where Chatid = ? and and CPid > ? and Deleted = ? order by CPid desc limit ?');
mysqli_stmt_bind_param($get_posts, 'iiii', $chatroomid, $lastpost, $deleted, $limit);
mysqli_stmt_execute($get_posts);
mysqli_stmt_bind_result($get_posts, $newposts);
mysqli_stmt_fetch($get_posts);
mysqli_stmt_close($get_posts); 
```

你能看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:52:46.783

查询失败，因为那些双重`and and`：

```
? and and CPid 
```

因此`FALSE`作为 mysqli_statement 返回。 `FALSE`然后插入到`mysqli_stmt_bind_param`导致该错误的函数中（因为它只接受 valid `mysqli_stmt`）。删掉一个`and`就好了

从 mysqli_prepare：

> 如果发生错误，mysqli_prepare() 返回一个语句对象或 FALSE。

但是，始终检查查询错误等是一种很好的做法。您*至少*应该检查准备好的语句的值：

```
mysqli_stmt_prepare($get_posts, 'select * from Chatposts where Chatid = ? and and CPid > ? and Deleted = ? order by CPid desc limit ?');
if (!empty(mysqli_error())) // exit or trigger error 
```

我强烈建议转到 PDO。它具有良好的异常处理能力，使一切变得更加容易，尤其是在出现故障时。

# html - Bootstrap：强制图像高度为行高

> ID：15399294
> 
> 赞同：2
> 
> 时间：2013-03-14T00:49:44.280
> 
> 标签：html, css, twitter-bootstrap

我有一个页面布局，其中两个`div`s 在一行内彼此相邻对齐。一列包含可变长度的文本，第二列包含图像。

标记基本上如下：

```
<div class="row-fluid">
   <div class="span6">
      <img src="picture.png">
   </div>
   <div class="span6">
     text<br>text
   </div>
</div> 
```

我的意图如下： 应减小图像的大小，使其与包含文本的列一样高。请参阅此[jsfiddle](http://jsfiddle.net/2HjcV/)进行说明。

有没有办法只用 CSS 来实现这一点？据我所知，`object-fit`CSS3 命令将是我所需要的，但不幸的是它没有得到很好的支持（还没有？），请参阅[caniuse](http://caniuse.com/#feat=object-fit)。将图像设置为`background-image`周围环境`div`不是一种选择，因为`img`之后 jQuery 插件需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:01:14.980

**-编辑-**

请参阅此更新的小提琴：http: [//jsfiddle.net/2HjcV/3/](http://jsfiddle.net/2HjcV/3/) 它使用`background-size:contain`. 更多信息在这里：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

操作，

尝试将`<div class="span6">`保存图像的`<div class="span6">`内容移动到保存文本的内容中。

[小提琴在这里更新](http://jsfiddle.net/2HjcV/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:29:19.257

简单地说，不，至少如果你想跨浏览器做一些事情，CSS 是不可能的。您有一个流畅的布局，我相信默认情况下，引导程序在最大宽度处具有 img 的 css 规则：100% 强制它受其父容器的约束并尊重纵横比。您将需要 Javascript 来了解文本 div 的高度并将该高度动态添加到图像中，或者将它们都包装在具有固定高度的父容器中并在图像上应用 max-height: 100% 并溢出：滚动或隐藏在 div 上。希望有帮助，加油

# titanium - 具有多种变体的自定义字体不适用于 Alloy 和 Titanium 3.0.2

> ID：15399296
> 
> 赞同：0
> 
> 时间：2013-03-14T00:49:47.803
> 
> 标签：titanium, titanium-mobile

我已按照所有说明将自定义字体正确加载到应用程序中。似乎这工作正常，因为我能够毫无问题地引用标准字体（在这种情况下为“Open Sans”）。我遇到的问题是我已经加载了“Open Sans”的多种变体，其中之一是“Open Sans Light”。在 Mac 上的 Font Book 中，所有变体的字体名称都是“Open Sans”。如何在 Titanium 中正确引用“Light”版本？我试过了：

*   “Open Sans - 光”
*   “打开无光”
*   “OpenSans-光”
*   “OpenSansLight”

.. 上面的那些只使用默认的“Open Sans”字体，而不是“Light”版本。有没有办法让它正常工作？

这是我的 TSS 代码：

```
".revolutionize": {
    top: 404.5,
    left: 72.5,
    font: {fontFamily: "OpenSans-Light", fontSize: "27"},
    color: "#ffffff"
} 
```

**更新：**

今天早上我意识到 Titanium 实际上对所有东西都使用了*Light*版本，而我无法参考它是*Regular版本。*我尝试将 fontWeight 设置为“Normal”和“Regular”，它仍然使用 Light 版本的字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:23:06.193

我从来没有能够使用最初命名的字体来解决这个问题，但是按照[这篇文章](https://stackoverflow.com/questions/6738929/custom-fonts-not-displaying-correctly-on-ios)的答案，我能够使用 Font Forge 重命名字体并成功地在我的 Titanium iPad 应用程序中使用这两种变体。希望这对其他人有帮助！我不确定这个错误是 iOS 问题还是 Titanium 问题，但我也会更新[这个问题](https://jira.appcelerator.org/browse/TC-2000)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T06:27:07.403

实际上，您需要像这样提供..删除您的构建并使用以下代码运行

```
font: {fontFamily: "OpenSans",fontWeight:"Light", fontSize: "27"}, 
```

# javascript - 检查可读的深层对象的安全方法？

> ID：15399305
> 
> 赞同：2
> 
> 时间：2013-03-14T00:50:50.420
> 
> 标签：javascript

我正在查看代码库，不幸的是看到了很多代码，例如：

```
if (module && module.foo && module.foo.bar && module.foo.bar.baz) 
```

我开始在谷歌上搜索，看看是否有一个库或其他东西可以让这种情况变得可以忍受；没有找到，但我仍然确定某处存在）。我写得很快，但有点讨厌它，因为传入根对象和一个字符串在'。'上分割很丑；希望有更好的东西：

```
<!DOCTYPE html>
<html>
<head>
   <title>safe tests</title>
   <script type="text/javascript">
       function assert(condition, desc) {
           var d = document, li = d.createElement("li");
           li.className = condition ? "pass" : "fail";
           li.appendChild(d.createTextNode(desc));
           d.getElementById('results').appendChild(li);
       }
   </script>
   <style type="text/css">
       #results li.pass { color: green; }
       #results li.fail{ color: red; }
   </style>
</head>
<body>
<ul id="results"></ul>
<script type="text/javascript">
function safe(root, s) {
    var split = s.split('.'), checked = root;
    for (var i = 0, len = split.length; i < len; i++) {
        if (checked[split[i]]) {
           checked = checked[split[i]];
           continue;
        } else {
           return false;
        }
    }
    return true;
}
var foo = {
    bar: {
        baz: {
            qux: 'yippie!'
        }
    }
}
assert(safe(foo, 'bar'), "finds first sub object");
assert(safe(foo, 'bar.baz'), "finds first and then second sub object");
assert(safe(foo, 'bar.baz.qux'), "finds first, second, third, sub object");
assert(!safe(foo, 'bar.baz.qux.NOT'), "rejects if not defined (end)");
assert(!safe(foo, 'NOPE.baz.qux.NOT'), "rejects if not defined (front)");
assert(!safe(foo, 'bar.NO.baz'), "rejects if not defined (middle)");
</script>
</body>
</html> 
```

任何已经处理这个问题的建议或库是精简的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:18:12.570

```
function safe(str, O){
    var seg= str.split('.');
    O= O || window;
    while(O && seg.length) O= O[seg.shift()];
    return O;
} 
```

与您的代码相同的想法，对于查找需要加载的代码模块最有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:01:02.837

我认为方法：

```
if (module && module.foo && module.foo.bar && module.foo.bar.baz) 
```

仍然是测试对象中有效路径的最佳方法。也就是说，我认为您可以使用类似的方法来测试有效的对象路径：

```
var safeObjectPath = function safeObjectPath( object, properties ) {
    var path = [],
        root = object,
        prop;

    if ( !root ) {
        // if the root object is null we immediately returns
        return false;
    }

    if ( typeof properties === 'string' ) {
        // if a string such as 'foo.bar.baz' is passed,
        // first we convert it into an array of property names
        path = properties ? properties.split('.') : [];
    } else {
        if ( Object.prototype.toString.call( properties ) === '[object Array]' ) {
            // if an array is passed, we don't need to do anything but
            // to assign it to the internal array
            path = properties;
        } else {
            if ( properties ) {
                // if not a string or an array is passed, and the parameter
                // is not null or undefined, we return with false
                return false;
            }
        }
    }

    // if the path is valid or empty we return with true (because the
    // root object is itself a valid path); otherwise false is returned.
    while ( prop = path.shift() ) {
        // Before it was used an if..else statement only, but it
        // could generate an exception in case of inexistent
        // object member. We can fix it using a try..catch
        // statement. Thanks to @xecute for the contribution!
        try {
            if ( prop in root ) {
                root = root[prop];
            } else {
                return false;
            }
        } catch(e) {
            return false;
        }
    }

    return true;
} 
```

该函数将接受**字符串**或**数组**作为`properties`值。在内部，参数被转换为数组并测试路径。

属性可以指定为`'foo.bar.baz'`或`['foo','bar','baz']`。

要测试有效路径：

```
safeObjectPath( module )
safeObjectPath( module, 'foo.bar.baz' )
safeObjectPath( module, [ 'foo', 'bar', 'baz' ] ) 
```

请注意，第一种形式（没有`properties`参数的形式）将返回`true`（当然，如果传递的根对象是有效的），因为这`module`是一个有效的路径（根）。

可以用这个工作[小提琴](http://jsfiddle.net/ragnarokkr/begck/)对其进行测试。

* * *

~~我相信也可以考虑递归和/或可绑定版本。~~

**编辑：**我在 Coderwall 上发表的文章中[通过更详细的分析扩展了这个答案。](https://coderwall.com/p/cvbgia)

这是[@xecute](https://stackoverflow.com/users/958632/xecute)构建的[性能测试](http://jsperf.com/isobjectdefinedproto)（再次感谢您的努力）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:57:00.720

您是否遇到过这个片段（如此处所[引用的](https://stackoverflow.com/questions/6208533/test-the-existence-of-property-in-a-deep-object-structure)）？

```
/*decend through an object tree to a specified node, and return it.
If node is unreachable, return undefined. This should also work with arrays in the tree.                                                                                               
Examples:                                                                                                                                                                            
  var test1 = {a:{b:{c:{d:1}}}};                                                                                                                                            
  console.log(objectDesend(test1, 'a', 'b', 'c', 'd'));                                                                                                                
  var test2 = {a:{b:{c:1}}};     //will fail to reach d                                                                                                                                         
  console.log(objectDesend(test2, 'a', 'b', 'c', 'd'));
*/

var objectDescend = function () {
    var obj = arguments[0];
    var keys = arguments;
    var cur = obj;

    for (var i=1; i<keys.length; i++) {                                                                                                                                     
        var key = keys[i];                                                                                                                                                
        var cur = cur[key];                                                                                                                                               
        if(typeof(cur)=='undefined')                                                                                                                                      
            return cur;                                                                                                                                                   
    }      

    return cur;                                                                                                                                                           
}                                                                                                                                                                         

var test1 = {a:{b:{c:{d:1}}}};                                                                                                                                            
console.log(objectDescend(test1, 'a', 'b', 'c', 'd'));                                                                                                                
var test2 = {a:{b:{c:1}}};                                                                                                                                              
console.log(objectDescend(test2, 'a', 'b', 'c', 'd')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T10:03:44.407

代替`if`，您可以使用静默`try ... catch`：

```
try {
    var baz = module.foo.bar.baz;
    ...
} catch (e) { } 
```

如果或缺失`module`，这将在第一行退出。`foo``bar`

缺点是这不会捕获从块内抛出的任何**其他错误。**

# javascript - 在 localStorage 中存储不能被 json 字符串化的对象？

> ID：15399309
> 
> 赞同：1
> 
> 时间：2013-03-14T00:51:18.817
> 
> 标签：javascript

我有一个带有多个循环引用的对象，我想保留在 localStorage 中。由于 localStorage 仅存储键/值对并将所有内容转换为字符串，我有没有办法在本地存储此对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:43:52.130

看看[Stringify javascript object with circular reference](https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference)的答案。如果找不到 JSON.stringify 的替代品，您可以编写自己的`replacer`函数来处理循环引用。

有关详细信息，请参阅 MDN（[使用本机 JSON](https://developer.mozilla.org/en-US/docs/Using_native_JSON)）和 MSDN（[JSON.stringify 函数 (JavaScript)](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)）文档。

# php - php 使用 filter_var_array 剥离除 az 之外的任何内容

> ID：15399310
> 
> 赞同：2
> 
> 时间：2013-03-14T00:51:36.087
> 
> 标签：php, arrays, sanitize

我正在尝试使用[filter_var_array](http://www.php.net/filter_var_array)函数从我的数组值中删除除 az 字符之外的所有字符。

我尝试应用多个[过滤器](http://php.net/manual/en/filter.filters.sanitize.php)，但不幸的是它们都没有对我有用，有没有其他方法可以使用这个函数来做到这一点，或者我是否被迫在 foreach 循环中使用正则表达式之类的东西来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:27:02.270

```
$f = function ($string) { return preg_replace('~[^a-z]~i', '', $string); };
$myValues = array_map($f, $myValues); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:41:25.457

`preg_replace()`已经很自然地在数组上工作了。这会从字符串数组中删除所有非字母：

```
$array = preg_replace('/[^a-z]/i', '', $array); 
```

例子：

```
$a = array('1111A55b999c0000','111111def9999999','0000000g88888hi8888888');
$a = preg_replace('/[^a-z]/i', '', $a);
assert($a == array('Abc','def','ghi')); 
```

我猜你可能想要不区分大小写。如果你真的想去掉大写字母，只需删除`i`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T01:06:51.663

我`array_map`个人会使用和一个正则表达式。

```
 $array = Array("abc123", "123jkl", "abc123def");
     $array = array_map("preg_replace", 
                         array_fill(0, count($array), '/[^a-z]*/'), 
                         array_fill(0, count($array), ''),
                         $array ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T01:22:28.187

# 扫描 == 正则表达式

与其他答案一样，这个答案再次基于掌握[正则表达式](http://www.regular-expressions.info/)，这本质上是所有这些验证器所依赖的基本字符扫描（和解析）技术*。*关于验证器/过滤器的想法是定义/猜测/覆盖尽可能多[的合理字符串类](http://en.wikipedia.org/wiki/Kleene_star)（正则表达式）。（此外，对于 [0-9]* 或 [az]* 等琐碎的类也有优化速度 - 无需通过标准*的 perl-compatible*）

# filter_var_array 和回调

作为一个简短的评论：确实，像**FILTER_VALIDATE_REGEXP**这样的东西对我也不起作用......

**filter_var_array** & co. 是相对较新的做法，但如果您*必须*回退到任何自定义 **FILTER_CALLBACK**以[以下](http://www.php.net/manual/en/filter.filters.misc.php)形式工作：

```
<?php
error_reporting(E_ALL | E_STRICT);

function handle($value) {
    return preg_replace('/[^a-z]/', '', $value);
}

$data = array(
    'testfield'    => array('22', 'foo', 'bar', '42'),
);

$args = array(
    'testfield'    => array('filter'    => FILTER_CALLBACK,
                            'options'   => 'handle'
        ),
    );

$result = filter_var_array($data, $args);

var_dump($result); 
```

并生产

```
array(1) {
  ["testfield"]=>
  array(4) {
    [0]=>
    string(0) ""
    [1]=>
    string(3) "foo"
    [2]=>
    string(3) "bar"
    [3]=>
    string(0) ""
  }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T01:02:32.633

也许不比 foreach 好，但它是“另一种方式”：

```
array_walk($a, function(&$e) {
    $e = preg_replace('/[^a-z]/', '', $e);
}); 
```

（如果您使用这种匿名函数语法，则需要 PHP 5.3，也称为“闭包”。）

# java - 在 JScrollPane 中滚动 JComponent

> ID：15399315
> 
> 赞同：1
> 
> 时间：2013-03-14T00:52:26.070
> 
> 标签：java, swing, jscrollpane, jviewport

说，我有一个很大的 JComponent：

```
Dimension componentSize = new Dimension(5000,5000); 
```

还有一个更小的 JScrollPane：

```
Dimension scrollPaneSize = new Dimension(500,500); 
```

我想在 JScrollPane 中显示我的 JComponent 的一部分，如下图所示：

![JScrollPane 中的 JComponent](../Images/222c3b49a1a92311636db69021bfaf8e.png)

白色矩形是我的 JScrollPane，它当前显示从**(x1,y1)**到**(x2,y2)**的 JComponent 的一部分。

* * *

那么，我尝试了什么：

我创建了一个新的 JComponent：

```
JComponent component = new JComponent(){
    protected void paintComponent(Graphics g)
    {
        // Here I draw a background
    } 
}; 
```

并将其作为视口视图放置在 JScrollPane 中：

```
JScrollPane scrollPane = new JScrollPane();

scrollPane.setViewportView(component); 
```

然后我将 JScrollPane 附加到 JFrame：

```
JFrame frame = new JFrame();

frame.setLayout(new BorderLayout());

frame.add(scrollPane, BorderLayout.CENTER);

frame.pack();
frame.setVisible(true); 
```

我尝试通过以下方式更改可见区域：

```
scrollpane.getViewport().setBounds(x1,y1,500,500) 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:57:02.793

`setBounds`用于确定组件在其父容器中的位置和大小。这不是你想做的。除非您使用的是绝对布局，否则永远不要使用此方法。

相反，尝试

```
component.scrollRectToVisible(new Rectangle(x1, y1, 500, 500)); 
```

反而...

查看[`JComponent#scrollRectToVisible`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#scrollRectToVisible%28java.awt.Rectangle%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:14:47.287

无论视口的大小如何，此代码将始终导致视口滚动。

```
scrollPane.getViewport().setViewPosition( new Point(x1, y1) ); 
```

# java - 使用 bigquery java api 得到更小的查询结果

> ID：15399317
> 
> 赞同：0
> 
> 时间：2013-03-14T00:52:34.923
> 
> 标签：java, resultset, google-bigquery

我在这里使用了 java 文件 [https://developers.google.com/bigquery/articles/gettingstartedwithjava](https://developers.google.com/bigquery/articles/gettingstartedwithjava) 它之前工作得很好，但从上周末开始，每次我运行它时，它总是只返回 512 条记录用于任何查询。我通过 bigquery 在网络浏览器中直接尝试了相同的查询，它返回了 3000 多条记录。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:35:07.340

不同之处在于您只是返回结果的第一页。尝试调用[setMaxResults](https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Jobs.GetQueryResults.html#setMaxResults%28java.lang.Long%29) () 或对返回的结果进行分页（通过使用`pageToken`from`GetQueryResultsResponse`在后续调用中请求下一页`getQueryResults(..)....execute();`

# java - 我是在询问这个返回的光标的问题吗？

> ID：15399321
> 
> 赞同：1
> 
> 时间：2013-03-14T00:52:56.833
> 
> 标签：java, android, cursor

基本上我有一个从我的数据库中填充列表视图的方法。

我收到游标上的空指针和“无法停止活动”错误。

这就是我返回光标的方式：

```
public Cursor getAppointmentsData() {
    String[] columns = new String[] { KEY_ROWAPPID, KEY_NAMEAPP,
            KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP };
    Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, null, null,
            null, null, KEY_NAMEAPP + " ASC", null);

    if (c != null) {
        if (c.getCount() > 0 && c.moveToFirst())

        {
            c.moveToFirst();

            return c;

        }

    }
    c.close();
    return null;
} 
```

当数据库为空即没有数据时，它会崩溃……如果有数据就可以了。这让我相信我正在从光标返回一个空值。

你们能看到这种返回光标的方法有问题吗？

很抱歉这个简单的问题，但在我撕开代码之前，我想我会在这里问。

新编辑：

公共游标 getAppointmentsData() { String[] columns = new String[] { KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP }; 光标 c = ourDatabase.query(DATABASE_TABLEAPP, columns, null, null, null, null, KEY_NAMEAPP + "ASC", null);

```
 if (c != null) {

            c.moveToFirst();

        }
    c.close();
    return c;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:12:09.087

您应该能够执行以下操作

```
if (c.moveToFirst()){
    return c;
} 
```

这样做的原因是，该`query()`方法不会返回 null。它只会返回一个空游标。因此，无需检查其是否为空。此外，`moveToFirst()`如果它不能移动到第一行（因此，如果光标为空），则评估为 false。因此，计数检查是多余的。

但是，您确定从您的方法返回 null 是安全的吗？如果没有结果，您将明确返回 null。另外，您是否知道`close()`在返回后永远不会调用该方法（如果您有一个带有结果的游标）。

我不完全知道您如何处理通过您的方法返回的光标，但我建议您只是简单地返回它。但我怀疑你想要的只是

```
public Cursor getAppointmentsData() {
    String[] columns = new String[] { KEY_ROWAPPID, KEY_NAMEAPP,
            KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP };
    return ourDatabase.query(DATABASE_TABLEAPP, columns, null, null,
            null, null, KEY_NAMEAPP + " ASC", null);
} 
```

**更新 - 关于何时关闭游标**

如果关闭游标，在返回之前，该方法`getAppointmentsData()`将返回一个关闭的游标。我很确定这不是你想要的。由于在这个阶段，您还没有完成游标，所以自己清理还为时过早:)

你所追求的是这样的。首先，使用`getAppointmentsData()`我上面建议的方法，它不会关闭光标，它只是返回它。现在构建您的光标适配器，如下所示

```
public CursorAdapter myCursorAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    //... all your stuff
    myCursorAdapter = new CursorAdapter(this, getAppointmentsData());
} 
```

现在，将游标适配器传递给您的 ListView，在这个阶段，ListView 可以使用底层游标（因为它仍然存在，如 in，未关闭：P）。然后，当您确定您的应用程序不再需要光标时，将其关闭。我建议在您的活动被破坏时这样做

```
@Override
public void onDestroy() {
   myCursorAdapter.getCursor().close(); 
} 
```

# c# - 验证文本框是否仅包含数字

> ID：15399323
> 
> 赞同：7
> 
> 时间：2013-03-14T00:53:31.983
> 
> 标签：c#, mysql, exception, try-catch

所以我有一个想法，因为我发现很难为 txtbox 编写代码，它只允许使用 c# 在 mysql 中使用整数而不是字母。我的计划是为什么不将数据库列设置为整数而不是典型的 varchar，如果你放了一个字母，它当然会变成异常，所以在这种情况下，我想捕获异常并提示一个消息框说“请仅输入整数” . 你怎么看？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T01:00:25.333

为您计划在其中存储的内容使用正确的列数据类型是个好主意，但检查字符串是否仅包含数字非常容易 - 只需解析并查看是否返回错误：

```
int parsedValue;
if (!int.TryParse(textBox.Text, out parsedValue))
{
    MessageBox.Show("This is a number only field");
    return;
}

// Save parsedValue into the database 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-14T07:39:19.150

Visual Studio 内置了对此的支持（您也可以通过编码实现它）。这是您需要做的：

*   从标记视图切换到设计视图。
*   现在单击设计视图并按`Ctrl`+ `Alt`+ `X`。
*   从打开的工具箱中单击验证并将比较验证器拖到您的`TextBox`.
*   右键单击比较验证器并选择属性，现在找到`ErrorMessage`并写入“警报：仅键入数字”。
*   在要验证的控件中选择您的控件。
*   在 Operator 中选择 DataTypeCheck，在 Type 中选择 Integer。

也通过编码你可以得到它：

```
protected void Button1_Click(object sender, EventArgs e)
{
    int i;
    if (!int.TryParse(textBox.Text, out i))
    {
        Label.Text = "This is a number only field";
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-17T08:43:11.963

```
if(Int32.TryParse(textBox1.Text, out int value))
{
    // Here comes the code if numeric
}
else
{
    // Here comes the code if not numeric
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T12:00:23.770

你可以通过这种方式实现

```
 int outParse;

   // Check if the point entered is numeric or not
   if (Int32.TryParse(propertyPriceTextBox.Text, out outParse) && outParse)
    {
       // Do what you want to do if numeric
    }
   else
    {
       // Do what you want to do if not numeric
    } 
```

# ios - 如何检索由具有不正确 CoreData 架构的更新 iOS 应用程序导致的数据丢失

> ID：15399326
> 
> 赞同：1
> 
> 时间：2013-03-14T00:54:51.513
> 
> 标签：ios, cocoa-touch, core-data

对 CoreData 模式的错误会导致使用以前模式的数据的用户在升级他们的 iOS 应用程序后不再看到数据。恢复以前数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:57:30.227

如果您使用轻量级迁移，则新架构将替换原始架构。迁移后原始数据不再是数据库的一部分。

您可以为尚未升级的用户发布具有原始架构的新版本。对于那些拥有的人，您可以使用`NSMigrationManager`它们将它们迁移回来。一旦每个人都再次使用旧模式，您就可以正确发布具有新模式的版本。

# sharepoint - 如何显示文档库中的特定文件夹（在 Sharepoint 2010 的 Web 部件中）？

> ID：15399327
> 
> 赞同：4
> 
> 时间：2013-03-14T00:54:52.603
> 
> 标签：sharepoint, filter, web-parts, subdirectory, sharepoint-wiki

我已经看到使用 Page Viewer 执行此操作的示例，它可以工作。但问题是页面查看器太慢了（它至少增加了 10 秒的页面加载时间，当我点击它时它又冻结了 15 秒，然后它开始像文件夹一样工作）。我相信用户看到这个会很沮丧，所以我宁愿在列表视图中显示它，就像文档库 webpart 一样。

关键目标是将 wiki 页面上文档库中的子文件夹显示为可导航的 Web 部件。如果需要编码，只要内容编辑器允许，就可以。（我是这方面的新手，因此非常感谢有关操作方法的指导！）

谢谢！

编辑：我偶然发现[this]：[Sharepoint：如何过滤文档库视图以显示子文件夹的内容？](https://stackoverflow.com/questions/295448/sharepoint-how-do-i-filter-a-document-library-view-to-show-the-contents-of-a-su)在我发布之后，但在阅读“解决方案”后我完全迷失了。如果有人可以解释它的含义，或者某种分步说明，那将很有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T15:54:06.730

我发现的一种方法是在 Sharepoint Designer 中打开页面并修改放置在该页面上的文档 Web 部件的实际代码。

您将找到文档 Web 部件，查找查询行，然后添加/修改它以包含以下内容：

```
<where>
    <contains>
        <FieldRef Name="FileDir" />
        <Value Type="Lookup">[Name of Folder]</Value>
    </contains>
</where> 
```

确保将**[文件夹名称]**替换为您要指向的站点的文档库中的目录名称。此外，请确保更改 Web 部件的视图以查找文件夹，而不是文件，以便从您要查找的结构的顶层开始。

# php - 如何完全控制 zend2 表单样式？

> ID：15399331
> 
> 赞同：1
> 
> 时间：2013-03-14T00:55:28.660
> 
> 标签：php, zend-framework2, zend-form

我正在关注本指南（[http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html)），编写表单字段的“zend”方式类似于：

```
 $this->add(array(
        'name' => 'title',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'Title',
        ),
    )); 
```

生成的 HTML 是：

```
<label>
<span>Surname/Faculty</span>
<input type="text" value="" name="title">
</label> 
```

我可以为表单字段提供“类”参数，但为标签提供“类”什么都不做。我还想在“标签”标签的末尾包含一个“br”标签。

关于如何使其工作的任何想法？我查看了最近的示例和教程（似乎装饰器已从 zend2 中逐步淘汰？）但我找不到我正在寻找的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:25:29.747

您现在可能使用一些视图助手来帮助您在视图脚本中呈现表单。

您还可以做的是获取表单元素并像这样自己渲染它们

```
<?php
    $element = $form->get('ElementName'); // In your case 'title'
?>
<label><?php echo $element->label;?></label> <br />
<?php echo $element->input; ?> 
```

这应该输出如下内容：

```
 <label>Title</label> <br />
 <input type="text" value="" name="title"> 
```

希望这可以帮助 ：）

斯托扬

# javascript - 如何在 JavaScript 中用虚数计算？

> ID：15399340
> 
> 赞同：28
> 
> 时间：2013-03-14T00:56:58.033
> 
> 标签：javascript, math

最近，我正在尝试使用一些涉及虚数*`i`*的方程进行计算。但是，与*`e`*or不同`π`，没有任何方法或本机函数会返回*`i`*。在Google 中[快速搜索](https://www.google.com/search?q=imaginary%20number%20in%20javascript)并没有给我任何答案。关于如何实现它的任何想法？

```
function imaginary(){
    return {
        rational: this,
        imaginary: "2i"  //magic code that does this
    };
};
Number.prototype.imaginary = imaginary; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-13T20:50:11.557

math.js 库支持复数、矩阵等。该库与 JavaScript 的内置数学库兼容，因此非常易于使用。

[http://mathjs.org](http://mathjs.org)

您可以执行以下操作：

```
math.i;                         // i
math.sqrt(-4)                   // 2i
var a = math.complex('2 + 3i'); // 2 + 3i
var b = math.complex(4, 5);     // 4 + 5i
math.add(a, b);                 // 6 + 8i
math.multiply(a, b);            // -7 + 22i
math.eval('e^(pi*i) + 1');      // ~0
// etc... 
```

编辑：请注意，math.js 带有一个表达式解析器，这使得处理复杂值和数学表达式更加方便：

```
math.eval('(2 + 3i) * (4 + 5i)'); // -7 + 22i 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T02:45:38.803

假设您真的想要复数，而不仅仅是虚数部分：

我将模拟一个复数，就像你模拟一个二维点一样，即一对数字。

就像一个点有 x 和 y 分量一样，复数也有实部和虚部。这两个组件都可以用普通的数字类型（int、float 等）建模

但是，您需要为所有数学运算定义新功能。

复数的加法和减法与点的加法和减法相同 - 将单独的组件相互添加，不要混合它们。例如：

(3+2i)+(5+4i) = (8+6i)

乘法的工作原理就像您在 (a+b)*(c+d) = (ac+ad+bc+bd) 时在代数中学到的一样。

除了现在你还必须记住 i*i = -1。所以：

(a+bi)*(c+di) = (ac+adi+bci+bdii) = (ac-bd) + (ad+bc)i

有关除法和求幂，请参阅[http://en.wikipedia.org/wiki/Complex_number](http://en.wikipedia.org/wiki/Complex_number)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T01:06:59.317

我不是数学专家，但我尝试使用另一个术语进行搜索，但得到了不同的结果。

检查这些：

*   [JavaScript 中的复数](https://gist.github.com/dsamarin/1258353)
*   [Complex.js：一个复数类](https://www.inkling.com/read/javascript-definitive-guide-david-flanagan-6th/chapter-9/complex-js-a-complex-number)
*   [Javascript 复杂数学库](https://github.com/patrickroberts/Javascript-Complex-Math-Library)

我希望这有帮助。

# mysql - 如何为大型数据库表创建索引

> ID：15399344
> 
> 赞同：0
> 
> 时间：2013-03-14T00:57:14.263
> 
> 标签：mysql, indexing, mysqldump

我过去做过很多常规的数据库查询，但现在我有一个包含大约 150 万个条目的数据库，我需要能够快速搜索实时更新。

我的数据库是所有美国邮政编码和加拿大邮政编码，包括经度、纬度、城市......我需要能够在几分之一秒内提取一个邮政编码并将其发送回（使用 ajax）到网络页。因此，当用户输入邮政编码/邮编时，国家、城市和州/省会自动填写。

目前我使用以下查询：

```
$sql = "SELECT  city, province, country 
  FROM postalcode
  WHERE PostalCode='$zip'"; 
```

我以前从未使用过索引。如何创建一个并替换我的查询以获得相同的结果？

（加分！：索引会用mysqldump备份吗？）

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:00:16.103

您不*替换*查询。优化器将使用该索引来*获取*您的查询。索引驻留在服务器上，不属于`mysqldump`. 不过，它将在您的表的 DDL 中。

请参阅[如何向 MySQL 表添加索引？](https://stackoverflow.com/questions/3002605/how-to-add-indexes-to-mysql-tables). 这假设您知道将索引放在*哪一*`PostalCode`列（提示：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:01:34.003

将索引添加到`PostalCode`字段中，看看性能是否有所提高。

我通常使用 phpMyAdmin 来创建我的索引，但您可以按照另一篇帖子的建议使用命令行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:16:03.497

我认为将您的 ajax 请求一分为二是个好主意。

第一个 ajax 请求仅从表中提取可用的邮政编码（一个新的，只有邮政编码）。

第二个 ajax 请求在邮政编码完全输入时触发（或者当用户没有添加新号码时）并返回城市和国家。

单个列的减小的大小，仅数字表可以改善您的第一个 ajax 请求。

尽管如此，您必须在“大”表上添加索引。使用 phpmyadmin 来执行此操作。根据经验：仅索引 where 子句中的列/列（在您的情况下仅 PostalCode）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:18:09.270

查看[管理员](http://www.adminer.org/)。它安装非常简单，可用于快速修改表的索引。

您需要在 PostalCode 上创建一个索引，并且如果可能的话，您会希望 PostalCode 作为您的主键。

如果您仍然遇到查询时间过长的问题，请尝试增加您的 Innodb_buffer_pool 以使其足够大以包含完整的邮政编码表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T17:22:40.437

最后，我直接从 mySQL 命令行在邮政编码上创建了索引：

```
CREATE INDEX postal_index ON postalcode(postalcode); 
```

我对代码的搜索从 4.89 秒到 0.00 秒！！！！！！！！！

# java - 使用ArrayLists打印并发症，正确的方法是什么？

> ID：15399348
> 
> 赞同：0
> 
> 时间：2013-03-14T00:57:41.297
> 
> 标签：java, printing, multidimensional-array, arraylist

我有两个 ArrayList，我想将它们打印出来，以便数组中的每个位置都打印出来。

```
ArrayList1String1 ... ArrayList2String1

ArrayList1String2 ... ArrayList2String2

ArrayList1String3 ... ArrayList2String3 
```

我不知道该怎么做，但是还有一个复杂的地方，我要打印的第二个数组列表实际上是一个 ArrayList 的 ArrayList ......所以我想这样做：

```
ArrayList1String ... ArrayList2-List1-String1 ... ArrayList2-List1-String2 ... ArrayList2-List1-String3 ...

ArrayList1String ... ArrayList2-List2-String1 ... ArrayList2-List2-String2 ... ArrayList2-List2-String3 ...

ArrayList1String ... ArrayList2-List3-String1 ... ArrayList2-List3-String2 ... ArrayList2-List3-String3 ... 
```

我一直在使用并被教过这种方法：

```
for(String arrayListVariable : ArrayList)
    System.out.print(arrayListVariable); 
```

但是，此方法仅以更向下的方式打印出数组变量：

```
arrayListVariable1
arrayListVariable2
arrayListVariable3
arrayListVariable4
and so on... 
```

我自己试过，每次都出错。我最近的尝试：

```
for(String word : words && String fList : fLists)
        {
            out.write(?????);
            out.write();
        } 
```

这种打印方式是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:13:33.177

像这样的东西？

```
public static void main(String[] args) {
  ArrayList<ArrayList<String>> ArrayOfArrayList = new ArrayList<ArrayList<String>>();
  ArrayList<String> array = new ArrayList<String>();
  array.add("first.string1");
  array.add("first.string2");
  array.add("first.string3");
  ArrayOfArrayList.add(array);
  array = new ArrayList<String>();
  array.add("second.string1");
  array.add("second.string2");
  array.add("second.string3");
  ArrayOfArrayList.add(array);

  // assume array all have same number of elements;
  for (int i = 0; i < ArrayOfArrayList.get(0).size(); i++) {
    for (int j = 0; j < ArrayOfArrayList.size(); j++) {
       System.out.print(ArrayOfArrayList.get(j).get(i) + " ");
    }
    System.out.println();
  }
} 
```

输出看起来像这样：

第一个.string1 第二个.string1

第一个.string2 第二个.string2

第一个.string3 第二个.string3

# sql-server - t-SQL 和 ISOLATION LEVEL SERIALIZABLE 用于重命名表

> ID：15399350
> 
> 赞同：0
> 
> 时间：2013-03-14T00:57:48.970
> 
> 标签：sql-server, sql-server-2008, tsql

我有两个可以从 ASP.NET 脚本同时执行的 SQL Server 2008 脚本。

这是一个：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
SET XACT_ABORT ON;
BEGIN TRANSACTION;

--select, delete, update, insert rows in Table1

COMMIT;
SET XACT_ABORT OFF; 
```

然后这个语句来重命名和删除表：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
SET XACT_ABORT ON;
BEGIN TRANSACTION;

EXEC sp_rename 'Table1', 'Table2';  --rename Table1 into Table2
DROP TABLE Table1;

COMMIT;
SET XACT_ABORT OFF; 
```

我的问题是，正如您所看到的，我`ISOLATION LEVEL SERIALIZABLE`通过只运行一次来​​解决这两个以相同类型运行的问题，但我的问题是，这种互斥会影响`EXEC sp_rename`SQL 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:11:25.930

sp_rename 不受隔离级别的影响。隔离级别影响锁定和行版本控制。[http://msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)你不需要这个隔离级别，你不能重命名一个从选择、插入或更新中锁定的表.

# visual-studio-2010 - Visual Studio C++ 2010 Express 各种问题

> ID：15399352
> 
> 赞同：0
> 
> 时间：2013-03-14T00:58:03.643
> 
> 标签：visual-studio-2010, visual-studio

每次我启动 Visual Studio C++ 2010 Express 时，都会收到以下消息：

![](../Images/31dfe9dfcd063d800e72b13061962f05.png)

它提供的包裹可能会有所不同。除此之外，如果我尝试加载一个项目、解决方案或制作一个新的，VS 会立即崩溃。

我尝试重新安装 Visual Studio C++ 2010 Express，但没有帮助。有什么VS依赖我应该尝试重新安装吗？

# plone - 红龟视频升级后停止工作

> ID：15399353
> 
> 赞同：0
> 
> 时间：2013-03-14T00:58:04.943
> 
> 标签：plone

我有一个 Plone 站点，我想在 SLES linux 服务器上从 Plone 4.1.4 升级到 Plone 4.2.4。我做了快照备份以确保我的数据安全。在迁移过程中，迁移工具没有报错。但是，我注意到视频停止播放，只显示黑屏。但是，如果我在 ZMI 视频中创建一个香草 Plone 站点，则可以正常工作。

在我的 egg 目录中，我看到两个包被更新了。

*   redturtle.video 0.7.3 变成 1.0.0
*   集体.rtvideo.youtube 0.1.0 变成 0.2.0

我决定从我的备份中恢复到旧版本的 egg 和 snapshotrestore。我在 portal_quickinstaller 中重新安装了 Red Turtle Video，并清除并重建了目录。视频仍然显示为黑色。

当我意外获得更新版本的collective.flowplayer时，我也发生了类似的事情。我快速而肮脏的解决方案是将我的内容迁移到 ZMI 中的新 Plone 站点（复制和粘贴就可以了），然后我删除了旧站点并重命名了新站点。视频效果很好。

有没有其他人有这个问题？有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:08:14.910

已向 RedTurtle 人员报告了一个问题，逐步重现该错误：

[https://github.com/RedTurtle/redturtle.video/issues/11](https://github.com/RedTurtle/redturtle.video/issues/11)

# cloud-foundry - 在 Cloud Foundry 上配置 map reduce

> ID：15399354
> 
> 赞同：0
> 
> 时间：2013-03-14T00:58:14.793
> 
> 标签：cloud-foundry

我计划在 Cloud Foundry 云上部署我的应用程序。我的应用程序需要配置 hadoop，因此我计划在 Cloud Foundry 微实例上进行设置。我将使用两个节点——一个是主节点，另一个是数据节点。在 Cloud Foundry 上是否有任何可用的文档来执行此操作？Cloud Foundry 是否提供任何对 map reduce 的支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:45:59.987

可以，如果您将 Hadoop 集群创建为多个独立应用程序[http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/](http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/)

对于两个节点，您必须： - 部署 zookeeper 节点 - 部署 namenode 然后是 datanode - 部署一个 jobtracker 然后是 tasktracker

我认为这有点古怪，但这是可能的。

使用微实例，默认情况下您有一些限制，例如最大 2G 内存[http://docs.cloudfoundry.com/infrastructure/micro/using-mcf.html](http://docs.cloudfoundry.com/infrastructure/micro/using-mcf.html)不要忘记增加它。

# c++ - 数组与结构 C++

> ID：15399355
> 
> 赞同：0
> 
> 时间：2013-03-14T00:58:29.110
> 
> 标签：c++, arrays, class, struct

我似乎不明白为什么我会得到：

```
Segmentation fault (core dumped) 
```

将我的“电影”输入电影结构时。这里是否有任何明显的逻辑错误或什么？

随着分段错误，我在 void set_movies() 中的 for 循环似乎只返回 4 个电影提示，而由于 #define NUM_MOVIES 5 而应该返回 5。

万分感谢！

```
#include <iostream>
#include <string>
#include <sstream>

#define NUM_MOVIES 5

using namespace std;

struct movie{
   string name[];
   double copies[];
   double rating[];
   string description[];
   string genre[];
} films [NUM_MOVIES];

void set_movies();
int which_movies_to_view();
int get_movies();
int rent_movie();
int printmovie();
int choice;

int main(){
    set_movies();
    which_movies_to_view();
    get_movies();
    rent_movie();

    return 0;
}

void set_movies(){
    movie set;

    for(int i=0; i<NUM_MOVIES; i++){
        cout << "Enter movie title: " << endl;
        cin >> set.name[i];
        cout << "Enter how many copies: " << endl;
        cin >> set.copies[i];
        cout << "Enter the rating: " << endl;
        cin >> set.rating[i];
        cout << "Enter a description: " << endl;
        cin >> set.description[i];
        cout << "Enter the genre: " << endl;
        cin >> set.genre[i];
    }
}

int which_movies_to_view(){
    movie set;

    cout << "  " << set.name[1] << set.name[2] << set.name[3] << set.name[4] << set.name[5] << endl;
    cout << "Which movie would you like to view?: [1, 2, 3, 4, or 5]" << endl;
    cin >> choice;

    return choice;
}

int get_movies(){

    movie set;

    if(choice == 1){
       cout << set.name[1] << endl;
    }
    if(choice == 2){
       cout << set.name[2] << endl;
    }
    if(choice == 3){
       cout << set.name[3] << endl;
    }
    if(choice == 4){
       cout << set.name[4] << endl;
    }
    if(choice == 5){
       cout << set.name[5] << endl;
    }

    return 0;
}

int printmovie(){

    int n;
    for(int n = 0; n<NUM_MOVIES; n++)
    cout << films[n].name;
    cout << films[n].copies;
    cout << films[n].rating;
    cout << films[n].description;
    cout << films[n].genre;

    return 0;
}

int rent_movie(){
    movie set;

    if(choice == 1){
            set.copies[0] - 1;
            cout << set.copies[0] << " copies left!" << endl;
    }
    if(choice == 2){
            set.copies[1] - 1;
            cout << set.copies[1] << " copies left!" << endl;
    }
    if(choice == 3){
            set.copies[2] - 1;
            cout << set.copies[2] << " copies left!" << endl;
    }
    if(choice == 4){
            set.copies[3] - 1;
            cout << set.copies[3] << " copies left!" << endl;
    }
    if(choice == 5){
            set.copies[4] - 1;
            cout << set.copies[4] << " copies left!" << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T01:04:38.437

您将结构的成员声明为空数组，但也声明了这些结构的数组。

我认为你实际上想要这个：

```
struct movie{
   string name;
   double copies;
   double rating;
   string description;
   string genre;
} films [NUM_MOVIES]; 
```

然后使用`films[i].movie`,`films[i].copies`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T01:03:10.100

“字符串名称[];” 这定义了空数组，然后当您写入“set.name[i]”时，它会导致核心转储。所以对于结构电影的其他成员。

实际上，您可以使用 gdb 读取核心文件，这将显示核心转储发生的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T01:04:10.893

您正确使用数据结构的唯一功能是`printmovie()`. 在其他任何地方你使用类似的东西`set.name[i]`都是不正确的。此外，您应该`[]`从结构内的定义中删除 。否则我相信它们被视为指针类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T01:21:36.940

你`struct`可以这样看：

```
struct Movie
{
   std::string name;
   unsigned int copies;
   double rating;
   std::string description;
   std::string genre;
}; 
```

并且由于您使用的是 C++ 并且您可能希望成为大小灵活的电影列表，因此您应该使用`std::vector`而不是 C 样式的数组：

```
std::vector<Movie> movies; 
```

然后，您可以`vector`使用它的`push_back`方法简单地将新电影添加到其中：

```
Movie m;
// set m's data members here
movies.push_back(m); 
```

稍后当你想访问这些电影时，你可以把它当作一个数组来对待：

```
for (int i = 0; i < movies.size(); ++i)
    std::cout << movies[i].name << std::endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T01:15:17.920

这是因为您没有在电影结构中声明数组的大小。请记住，C++ 继承了 C 的许多特性，C 强制在每个函数的开头声明要分配多少内存。

# routing - 在 EmberJS 中，使用 glob 路由，当我 transitionToRoute 时，我得到逗号而不是斜杠

> ID：15399356
> 
> 赞同：2
> 
> 时间：2013-03-14T00:58:35.427
> 
> 标签：routing, ember.js

我的路线是...

```
this.route("websites", { path: '/' });
this.route('websites', { path: 'tags/*tags' }); 
```

注意 globbed, *tags。当我更改内容时，我想转换到一个新的网址，所以我......

```
this.transitionToRoute('websites', this.get('content').mapProperty('name')) 
```

在我的控制器中，内容显然是一个带有 name 属性的 Ember 对象数组。它工作得很好，但不幸的是我得到的网址是......

```
/tags/ember,javascript 
```

代替

```
/tags/ember/javascript 
```

这是 emberJS 中的错误吗？或者我做错了什么？

已经为此奋斗了好几天，所以任何帮助将不胜感激。

# java - 导入错误？

> ID：15399359
> 
> 赞同：0
> 
> 时间：2013-03-14T00:58:57.087
> 
> 标签：java, bouncycastle

我究竟做错了什么？

```
% javac  -cp ./:./bcprov-jdk16-nosign-140.jar MyProjectFile.java
MyProjectFile.java:12: cannot find symbol
symbol  : class CipherInputStream
location: package org.bouncycastle.crypto.io
import org.bouncycastle.crypto.io.CipherInputStream;
                                 ^ 
```

我像这样导入它：

```
import org.bouncycastle.crypto.io.CipherInputStream; 
```

`.jar`文件有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:07:58.560

问题解决了。我有一个坏弹力罐。我删除了我的 bcprov-jdk16-nosign-140.jar 文件并从他们的网站上获取了最新的：bcprov-jdk15on-148.jar。

# android - 将应用程序集成到许可证验证库 (LVL) 示例代码中

> ID：15399361
> 
> 赞同：2
> 
> 时间：2013-03-14T00:59:07.283
> 
> 标签：android, android-lvl

在阅读了一堆关于如何制作 Android 应用程序的文章和教程后，我设法创建了一个简单的应用程序，我想上传到 Google Play 市场，然后我遇到了一个新术语——许可证验证库 (LVL)，对我来说，理解这完全是一场噩梦，但不知何故，我设法运行了一个从互联网下载的示例代码。

有趣的情况 - 我有自己的应用程序，没有集成 LVL，它在虚拟环境中运行良好；另一方面，我有一个集成 LVL 的工作示例应用程序。

问题是我不明白如何将 LVL 集成到我自己的应用程序中。

问题是：

*   我必须将我的应用程序集成到 LVL 示例代码中还是将 LVL 集成到我的应用程序代码中？
*   哪个更容易和更好的做法？
*   是否有任何示例显示在何处实现代码以使其与 LVL 一起正常工作？

任何图表都会有所帮助...

# node.js - 连接资产丑化设置

> ID：15399364
> 
> 赞同：1
> 
> 时间：2013-03-14T00:59:22.027
> 
> 标签：node.js, middleware, uglifyjs, connect-assets

我在谷歌上浪费了太多时间，而且对连接资产还是新手。

所以我想使用构建功能并让连接资产连接并缩小我的 javascript。但是我不能让它破坏我的变量名。uglify.js 中有一个选项可以关闭修饰，但我不知道如何从这个级别访问这些选项。

连接资产 -> snockets -> 丑化

这是我的代码：

```
app.use require('connect-assets')(src: "#{__dirname}/assets", build : true) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:31:33.050

[https://github.com/TrevorBurnham/snockets/blob/150b06d92683bd3ee597012e5a9f11a3a1156320/src/snockets.coffee](https://github.com/TrevorBurnham/snockets/blob/150b06d92683bd3ee597012e5a9f11a3a1156320/src/snockets.coffee)

第 319 行是发生重整的地方。由于它没有条件逻辑，所以没有选择。我建议你分叉项目并添加你需要的选项。

# c# - 创建按 ID 分组的项目列表

> ID：15399366
> 
> 赞同：0
> 
> 时间：2013-03-14T00:59:57.920
> 
> 标签：c#, .net-3.5

我有以下 2 节课

```
public class Student
{
    public string Name { get; set; }
    public int SchoolId { get; set; }     
}

public class School
{
    public int SchoolId { get; set; }          
    public IList<Student> Students { get; set; }
} 
```

`SchoolId`在类内部添加可能很奇怪，`Student`但我们这样做是为了跟踪。

在数据库中`Students`，我们有一个包含`StudentName`和`schoolId`

我们如何`Schools`通过从此表中选择所有来重建列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:04:45.157

这很简单。只需使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)Linq 中的方法即可。

```
var results = db.Students
    .GroupBy(s => s.SchoolId,
             (id, g) => new School() { SchoolId = id, Students = g.ToList() }); 
```

或者，如果您更喜欢查询语法，请使用：

```
var results = 
    from s in db.Students
    group s by s.StudentId into g
    select new School()
    {
        SchoolId = g.Key,
        Students = g.ToList()
    }; 
```

# c - shmget() 给出 EINVAL 错误

> ID：15399369
> 
> 赞同：1
> 
> 时间：2013-03-14T01:00:16.650
> 
> 标签：c, linux, shared-memory

几个小时以来，我一直在 shmget 遇到问题，但我似乎无法弄清楚。每次我尝试拨打电话时，`shmget()`它总是返回 EINVAL: "Invalid Argument" 错误。

代码的重要部分如下：

```
key_t generate_ipc_key()
{
    key_t ipc_key = ftok(__FILE__, KEY);
    if(ipc_key < 0) {
        perror("Failed to Generate IPC Key");
        exit(IPC_FAILURE);
    }

     return ipc_key;
}

int shared_memory_create(size_t memory_size)
{
    int shm_key = shmget(generate_ipc_key(), memory_size, IPC_CREAT | 0666);
    if(shm_key < 0) {
        perror("Failed to Create Shared Memory Key");
        exit(CREATE_FAILURE);
    }

    return shm_key;
} 
```

该函数被调用：

```
shm_key = shared_memory_create(sizeof(data_t)); 
```

其中 data_t 是一个结构：

```
typedef struct {
    int hCount;
    int oCount;
    int bCount;
} data_t; 
```

此外，如果它有助于共享内存的值是：

```
kernal.shmmax = 33554432
kernal.shmall = 2097152
kernal.shmmni = 4096 
```

我对C相当陌生，所以我确定这是我所缺少的一些简单的东西，但我似乎无法弄清楚。任何帮助表示赞赏！

我不确定它到底是什么，ipcs 显示没有共享段，我重新启动，现在它可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:14:41.193

手册页说：

> ```
> EINVAL A new segment was to be created and size < SHMMIN or 
> size > SHMMAX, or no new segment was to be created, a 
> segment with given key existed, but size is greater than 
> the size of that segment. 
> ```

因此，请检查这些是否适用。您可以运行该`ipcs`工具来列出现有的共享内存段，并查看您的程序是否与其中任何一个发生冲突。请注意，共享内存段在您的进程结束后仍然存在。

# xcode - 如何在 XCODE 的 INIT 中延迟一个动作？

> ID：15399371
> 
> 赞同：0
> 
> 时间：2013-03-14T01:00:22.113
> 
> 标签：xcode, init

低于初始化

```
yellowbg = [CCSprite spriteWithFile:@"yellowxlixk.png"];
[yellowbg setPosition:ccp(509, 671.75)];
      yellowbg.scale = .75;
[self addChild:yellowbg z: 1]; 
```

我将如何延迟这个对象？我对此很陌生，请在您的解释中保持基本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:36:32.537

如果你想在 2 或 3 秒后在图层上添加这个对象，那么你可以使用这个..

```
[self performSelector:@selector(addImageToLayer) withObject:nil afterDelay:2.0]; // specify delay time 
```

这是您的功能：

```
-(void) addImageToLayer
{
   yellowbg = [CCSprite spriteWithFile:@"yellowxlixk.png"];
   [yellowbg setPosition:ccp(509, 671.75)];
   yellowbg.scale = .75;
   [self addChild:yellowbg z: 1];
} 
```

另一种选择是，您也可以使用这个：

```
[self schedule:@selector(addImageToLayer) interval:2]; 
```

函数：但是在函数中你必须停止调度程序来调用这个方法。通过上面的代码行，它每 2 秒调用一次函数。这就是你必须停止它的原因。

```
-(void) addImageToLayer
{
   yellowbg = [CCSprite spriteWithFile:@"yellowxlixk.png"];
   [yellowbg setPosition:ccp(509, 671.75)];
   yellowbg.scale = .75;
   [self addChild:yellowbg z: 1];
   [self unschedule:@selector(addImageToLayer)];  //to stop scheduler to calling function repeatedly
} 
```

您可以使用这两种方式中的任何一种来延迟。希望这可以帮助..

# sql - 使用连接和分组子句的查询中的百分比计算

> ID：15399372
> 
> 赞同：0
> 
> 时间：2013-03-14T01:00:23.530
> 
> 标签：sql, sql-server, sql-server-2008

我有一个查询，它计算皮卡，并按客户种族和类别划分。它可以工作，但我需要计算一列`'Pickups as % of Active'`，它是客户端表中活动客户端的总数（活动客户端是客户端表中 (1,2,6) 中的 StatusID，所有其他状态计为非活动状态）我的查询看起来像

```
SELECT
max(a.AgencyName)as Agency,
COUNT(PickupID)as Pickups,
( COUNT(PickupID)/(select  COUNT( c.ClientID) AS ActiveClients 
    FROM Clients c
    WHERE c.StatusID in (1,2,6) 
    GROUP BY c.AgencyID)) as 'Pickups as % of Active',
--SUM(CASE WHEN c.StatusID in (1,2,6) THEN 1 ELSE 0 END)/ COUNT(PickupID) as 'Pickups as % of Active',
count (CASE WHEN p.CategCode = 'NB' THEN p.CategCode END) as NB
,count (CASE WHEN p.CategCode = 'IN' THEN p.CategCode END) as 'IN'
,count (CASE WHEN p.CategCode = 'CH' THEN p.CategCode END) as 'CH'
,count (CASE WHEN p.CategCode = 'PG' THEN p.CategCode END) as 'PG'
,count (CASE WHEN p.CategCode = 'BF' THEN p.CategCode END) as 'BF'
,count (CASE WHEN p.CategCode = 'PP' THEN p.CategCode END) as 'PP'
,count (CASE WHEN p.CategCode = 'SR' THEN p.CategCode END) as 'SR'

,count (CASE WHEN p.EthnCode = 'N' THEN p.EthnCode END) as Nat
,count (CASE WHEN p.EthnCode = 'A' THEN p.EthnCode END) as Asn
,count (CASE WHEN p.EthnCode = 'B' THEN p.EthnCode END) as Blk
,count (CASE WHEN p.EthnCode = 'P' THEN p.EthnCode END) as Pac
,count (CASE WHEN p.EthnCode = 'W' THEN p.EthnCode END) as Wth
,count (CASE WHEN p.EthnCode NOT IN ('N', 'A', 'B', 'P', 'W', '0') THEN p.EthnCode END) as Nat
,count (CASE WHEN p.EthnCode = '0' THEN p.EthnCode END) as Unknown
,count (CASE when PickupHispanic=1 then PickupHispanic end) as Hispanic 

FROM dbo.Pickup p join Agency a on p.agencyid = a.agencyid join Clients c ON c.ClientID = p.ClientID
where  PickupDate  between '2013-01-01' and '2013-01-31' 
group by a.AgencyID 

WITH ROLLUP
order by 1 
```

结束它抛出错误

```
Msg 512, Level 16, State 1, Line 5
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.
Warning: Null value is eliminated by an aggregate or other SET operation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:19:04.063

将您的测试添加到表达式中，如果成功则返回 1，否则返回 0。然后把它加起来除以你的总数得到百分比。

您可以使用以下内容：

```
SUM(CASE WHEN c.StatusID in (1,2,6)
          and p.PickupDate  between '2012-01-01' and '2012-01-31' 
    THEN 1 
    ELSE 0
    END)
/ 
COUNT(PickupID)
as 'Pickups as % of Active' 
```

编辑：好的，我第一次看到我错了。您可以将活动计数作为子查询来代替：

```
SELECT
max(a.AgencyName)as Agency,
COUNT(PickupID)as Pickups,

COUNT(PickupID) / ActiveClients AS 'Pickups as % of Active',

count (CASE WHEN p.CategCode = 'NB' THEN p.CategCode END) as NB
,count (CASE WHEN p.CategCode = 'IN' THEN p.CategCode END) as 'IN'
,count (CASE WHEN p.CategCode = 'CH' THEN p.CategCode END) as 'CH'
,count (CASE WHEN p.CategCode = 'PG' THEN p.CategCode END) as 'PG'
,count (CASE WHEN p.CategCode = 'BF' THEN p.CategCode END) as 'BF'
,count (CASE WHEN p.CategCode = 'PP' THEN p.CategCode END) as 'PP'
,count (CASE WHEN p.CategCode = 'SR' THEN p.CategCode END) as 'SR'

,count (CASE WHEN p.EthnCode = 'N' THEN p.EthnCode END) as Nat
,count (CASE WHEN p.EthnCode = 'A' THEN p.EthnCode END) as Asn
,count (CASE WHEN p.EthnCode = 'B' THEN p.EthnCode END) as Blk
,count (CASE WHEN p.EthnCode = 'P' THEN p.EthnCode END) as Pac
,count (CASE WHEN p.EthnCode = 'W' THEN p.EthnCode END) as Wth
,count (CASE WHEN p.EthnCode NOT IN ('N', 'A', 'B', 'P', 'W', '0') THEN p.EthnCode END) as Nat
,count (CASE WHEN p.EthnCode = '0' THEN p.EthnCode END) as Unknown
,count (CASE when PickupHispanic=1 then PickupHispanic end) as Hispanic 

FROM dbo.Pickup p join Agency a on p.agencyid = a.agencyid 

join 
(select c.ClientID, COUNT( c.ClientID) AS ActiveClients 
    FROM dbo.Pickup p 
    JOIN Clients c on c.ClientID = p.ClientID
    WHERE 
        c.StatusID in (1,2,6) 
        and p.PickupDate  between '2012-01-01' and '2012-01-31' 
    GROUP BY c.ClientID
) ActiveClientCounts
ON p.ClientID = ActiveClientCounts.ClientID

where  PickupDate  between '2012-01-01' and '2012-01-31' 
group by a.AgencyID 

WITH ROLLUP
order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:23:25.650

问题是 Count 结果是一个整数。当你将一个整数除以一个整数时，它会给你一个整数作为结果。

尝试将你的分母转换为小数，它会给你一个小数作为输出：

```
 select 100 * COUNT(PickupID)/CAST(COUNT( c.ClientID) AS DECIMAL) 
```

编辑：

好的，您已经更改了几次代码，这很令人困惑。

从我目前所见，您的错误来自`Group By c.AgencyID`子查询中的子句。这个怎么样：

```
( COUNT(PickupID)/(select Cast(COUNT( c.ClientID) AS DECIMAL) AS ActiveClients 
    FROM Clients c
    WHERE c.StatusID in (1,2,6) 
    AND c.AgencyID = a.AgencyID )) as 'Pickups as % of Active', 
```

编辑2：

使用十进制结果的强制转换和 2dp 的强制转换：

```
CAST(( COUNT(PickupID)/(select CAST(COUNT( c.ClientID) AS DECIMAL) AS ActiveClients 
    FROM Clients c
    WHERE c.StatusID in (1,2,6) 
    AND c.AgencyID = a.AgencyID )) as Decimal(10,2)) as 'Pickups as % of Active', 
```

# html - CSS 下拉菜单 堆叠在一起？

> ID：15399374
> 
> 赞同：1
> 
> 时间：2013-03-14T01:00:29.083
> 
> 标签：html, css, drop-down-menu

我正在构建一个 css 下拉菜单，当我将鼠标悬停在我的 div 上时，li 标签会相互堆叠，你可以在这里看到我的意思 - [JSFiddle](http://jsfiddle.net/szcS8/)我不确定我的 css 在我定位事物的方式上是否正确或什么。

这里也有一些代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <link rel="stylesheet" href="Assets/StyleSheets/StyleSheet.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Shirt Happens</title>

    <script type="text/javascript">

    </script>

    <style type="text/css">
        .Item {
            float:left;
            position:relative;
        }

        .Item > ul li {
            z-index:1000;
            float:left;
            padding:10px 15px;
            margin:2px 0 0;
            list-style:none;
            background-color:#FFF;
            border:1px solid #CCC;
            border:1px solid rgba(0, 0, 0, 0.2);
            -webkit-box-shadow:0 5px 10px rgba(0, 0, 0, 0.2);
            -moz-box-shadow:0 5px 10px rgba(0, 0, 0, 0.2);
            box-shadow:0 5px 10px rgba(0, 0, 0, 0.2);
            -webkit-background-clip:padding-box;
            -moz-background-clip:padding;
            background-clip:padding-box;
        }

        .Item ul li:hover .MenuItem {
            border-bottom:3px solid #F00;
            background-color:#EEE;
            color:rgb(50,50,50);
        }

        .Item > ul li:after,
        .Item > ul li::after {
            position:absolute;
            top:-8px;
            right:20px;
            content:'';
            width:0;
            height:0;
            border-bottom:solid 8px #FFF;
            border-left:solid 8px transparent;
            border-right:solid 8px transparent;
        }

        .Item > ul li:before,
        .Item > ul li::before {
            position:absolute;
            top:-9px;
            right:19px;
            content:'';
            width:0;
            height:0;
            border-bottom:solid 9px #CCC;
            border-left:solid 9px transparent;
            border-right:solid 9px transparent;
        }

        .Item > ul li {
            display:none;
            position:absolute;
            top:80px;
            right:0px;  
        }

        .Item:hover > ul li {
            display:block;
        }

        .MenuItem {
            text-transform:uppercase;
            font-weight:bold;
            color:#777;
            height:80px;
            padding:0 15px;
            text-align:center;
            cursor:pointer;
            line-height:80px;
            transition:all .15s ease-in-out;
            -webkit-transition:all .15s ease-in-out;
            -moz-transition:all .15s ease-in-out;
            -ms-transition:all .15s ease-in-out;
            -o-transition:all .15s ease-in-out;
            color:rgb(105,105,105);
            position:relative;
        }

        .MenuItem:hover {
            border-bottom:3px solid #F00;
            background-color:#EEE;
            color:rgb(50,50,50);
        }

        .Triangle {
            width:0;
            height:0;
            border-left:8px solid transparent;
            border-right:8px solid transparent;
            border-top:8px solid rgb(105,105,105);
        }
    </style>
</head>

    <body>
        <div id="Wrapper">
            <div id="Header">
                <div id="HeaderC">
                    <div id="Logo"></div>

                    <div id="Menu">
                        <div class="Item">
                            <div class="MenuItem icon-down-open">Menu Item 1</div>

                            <ul>
                                <li>Inside Item</li>
                                <li>Inside Item</li>
                                <li>Inside Item</li>
                            </ul>
                        </div>
                        <div class="Item">
                            <div class="MenuItem icon-down-open">Menu Item 1</div>

                            <ul>
                                <li>Inside Item</li>
                            </ul>
                        </div>
                        <div class="Item">
                            <div class="MenuItem icon-down-open">Menu Item 1</div>

                            <ul>
                                <li>Inside Item</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="Middle">
                <div id="MiddleC"></div>
                <!--Middle Content-->
            </div>

            <div id="Footer">
                <div id="FooterC"></div>
                <!--Footer Content-->
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:16:01.287

问题是您正在使用此选择器：`.item > ul li`将所有这些列表项设置为具有绝对位置，相对于其父 .item 容器具有完全相同的顶部和右侧位置。改变这个：

```
.Item > ul li {
    display:none;
    position:absolute;
    top:80px;
    right:0px;  
} 
```

对此：

```
.Item > ul li {
    display:none;
    position:relative;
    top:-12px;
    right:0;  
} 
```

# list - 多个二维点列表的排序算法

> ID：15399377
> 
> 赞同：2
> 
> 时间：2013-03-14T01:00:47.180
> 
> 标签：list, sorting, 2d, distance, points

我需要一种算法来对 2D 平面中的多个点列表进行排序，以便每个列表的对应点最小化它们之间的距离。

即对于两个长度相等的列表，第一个列表的第一个点到第二个列表的第一个点的距离最小，第一个的第二个点到第二个的第二个点的距离最小，等等。

我的第一个想法是简单地按 x 和 y 坐标的平均值排序，但我觉得这并不完全准确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:38:21.103

如果您试图最小化相邻点之间的总距离，这根本不是一个排序任务。

相反，您似乎正在尝试解决二维空间中的[哈密顿路径问题。](http://en.wikipedia.org/wiki/Hamiltonian_path)对于点之间的任意距离，这是 NP 完全的。在您的情况下，即使对欧几里得距离的限制[仍然是 NP-complete](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Euclidean_TSP)，但是有近似算法；见[https://www.ads.tuwien.ac.at/teaching/ws10/AlgGraphen/ag3-2x2.pdf](https://www.ads.tuwien.ac.at/teaching/ws10/AlgGraphen/ag3-2x2.pdf)。一般来说，由于 Sanjeev Arora 的工作，欧几里得 TSP 可以在多项式时间内逼近，他为此获得了[哥德尔奖](http://en.wikipedia.org/wiki/Godel_prize)：

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.23.6765](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.23.6765)

搜索**欧几里得旅行商**问题，您还将获得其他科学论文的链接，讨论如何近似解决此问题。

# php - PHP + Guzzle，在标头中发送授权密钥

> ID：15399381
> 
> 赞同：0
> 
> 时间：2013-03-14T01:01:25.677
> 
> 标签：php, rest, guzzle

我是 Guzzle 的新手，我正在尝试生成以下 REST 调用：

```
https://product-search.api.cj.com/v2/product-search?website-id=1594990&keywords=%2Bsony+-camera

GET /v2/product-search?website-id=1594990&keywords=%2Bsony+-camera HTTP/1.1
Host: link-search.api.cj.com
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Cookie: __utma=128446558.2099392322683464700.1239639722.1239639722.1239927095.2; __utmz=128446558.1239639722.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); CONTID=8073; cjuMember=0; JSESSIONID=aM5RSWdqdd_5
Authorization: YOUR DEV KEY HERE

HTTP/1.x 200 OK
Server: Resin/2.1.17
Content-Type: application/xml
Transfer-Encoding: chunked
Date: Thu, 26 Apr 2009 10:25:03 GMT 
```

我正在使用以下 PHP 代码：

```
$client = new Client('https://linksearch.api.cj.com', array(
    'id' => $website_id,
    'keywords' => 'sony',
));
$request = $client->get("v2/link-search?website-id={id}&keywords={keywords}");
$request->addHeader('Authorization', $dev_key);
$response = $request->send(); 
```

这里的问题是，使用 addHeader() 语句我得到响应“错误请求”，而没有 addHeader() 我得到“未授权”。看来我没有正确发送我的身份验证信息。有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:19:16.740

这里的实际问题是：

1) 标头“授权”可能区分大小写，可能需要小写。

2) 如果任何请求参数不正确，甚至是您的网站 ID，都会抛出 400 错误。400 错误表示“请求因身份验证以外的原因而无效”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T03:13:37.457

我认为您创建的 $request 不正确。尝试这个：

```
$client = new Client();
$request = new Request('POST', 'http://someuri/path/here'); 
```

然后使用 $client 发送请求：

```
$response = $client->send($request); 
```

# ruby-on-rails - Rails：表单的 f.select 不返回带有默认值的 grand-belongs_to

> ID：15399382
> 
> 赞同：0
> 
> 时间：2013-03-14T01:01:32.243
> 
> 标签：ruby-on-rails, select, belongs-to

申请的这一部分与 RFP 投标的分级过程有关。

基本上一个类别（例如：成本、公司简介等等）
有许多 TestCriteria。（例如：价格比较，每日价格的竞争力......）

一个TestCriterium 可以有三个GradingScores {失败、满足和超过}（带有#s 和descr）

将它们连接在一起，Grade 与我们分配 GradingScale 的 TestCriteria 相关联。
我想“继承”拥有的类别。

* * *

在进入一个新的年级时，我已经存储了 category_id，可以说是它的第二个祖父母。

在返回 EDIT 时的成绩表中，

> > 我需要一个类别下拉列表，选择的默认值为@grade.category_id 这有两个级别。
> > 简单案例如下图所示，再看下图。

* * *

我最近的尝试包括：

在年级的控制器中

```
 @categories = Category.where(:id => @grade.category_id) 
```

并以_form

```
<% f.select :category_id, options_from_collection_for_select(@categories.sort_by
{ |cats| cats.category_name}, "id", "category_name",
:selected => @grade.category_id ) %> 
```

我还尝试了一个简单的 Category.find() w/_form 中的参数。
如果我能在这方面得到帮助，我可以在其他事情上大有帮助。

**== 现在是棘手的版本 ==**

这都是我真正需要的初步准备。

我正在使用 jQuery ajax 脚本来执行 Category & TestCriterium & Grade 的初始 NEW 条目。

类别限制了适当的测试列表，
而测试限制了等级选项的适当列表。

这是我用来获取这一系列字段的成绩表格：

```
<div class="field">
<%= label_tag 'Evaluation Category' %><br/>
  <div id="grade_picker_div" >
        <%= collection_select( :category, :category_id, Category.find(:all, :order => "id"),
              :id, :category_name,{:include_blank => true} ) %><br/>
      <div id="tests_div"></div><br/>
      <div id="grades_div"></div><br/>
      </div>
</div> 
```

和阿贾克斯：

```
$ ->  
$('#grade_picker_div #category_category_id').change ->
#selected = $(this).attr 'value'
selected = $(':selected', this)[0].value
$.ajax '/categories/' + selected,
  type: 'get'
  dataType: 'json'
  error:  (jqXHR, textStatus, errorThrown) ->
     alert 'stop' + textStatus
  success:  (data, textStatus, errorThrown) -> 
    select_html = '<br><b>Test Criteria</b><br/> <select id="grade_test_criterium_id" name="grade[test_criterium_id]"><option></option>'
    for test_criterium in data.test_criteria
      select_html += '<option value="' + test_criterium.id + '">' + test_criterium.criteria + '</option>'  
    select_html += '</select>'
    $('#grade_picker_div #test_criteria_div').html(select_html)
    $('#grade_picker_div #grading_scales_div').html('')
return false 

$(document).on 'change', '#grade_picker_div #test_criteria_div', ->
selected = $(':selected', this)[0].value
#alert selected
$.ajax '/test_criteria/' + selected,
  type: 'get'
  dataType: 'json'
  error:  (jqXHR, textStatus, errorThrown) ->
    #alert 'stop' textStatus
  success:  (data, textStatus, errorThrown) -> 
    select_html = '<b>Grade</b><br/> <select id="grade_grading_scale_id" name="grade[grading_scale_id]"><option></option>'
    for grading_scale in data.grading_scales
      select_html += '<option value="' + grading_scale.id + '">' + grading_scale.name + " : " + grading_scale.description + '</option>'  
    select_html += '</select>'
    $('#grade_picker_div #grading_scales_div').html(select_html)
return false 
```

我做了一些剪切和粘贴，但上面的代码有效。

> > 在我学习了如何对下拉列表进行简单的预加载之后，（这个 Q 的顶部）
> > 你如何建议我如果/那么我的方式来使这个在 EDIT 上工作而不是在 NEW 上工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:05:45.390

你正在使用`select`，所以你不应该使用`options_from_collection_for_select`它为选项列表创建一个 html 字符串。`select`为你做。尝试将其更改为`collection_select`

```
<%= f.collection_select :category_id, @categories.sort_by(&:category_name), :id, :category_name, { selected: @grade.category_id } %> 
```

如果`f.object`等于`@grade`，则不需要传递`selected`选项。

# sql - SQL 将表连接到自身提供不完整的结果

> ID：15399383
> 
> 赞同：1
> 
> 时间：2013-03-14T01:01:33.450
> 
> 标签：sql, sqlite

我有一组要收集的表，我试图从中找到两个不同的黑名单（typeId）之间的不同 IP 地址（ip）的计数 - 基本上与一个表相交。但是，我将表连接到自身的查询提供了奇怪的结果。

```
sqlite> .schema
CREATE TABLE feedz_ip2 (fileId INTEGER NOT NULL, ip NUMERIC, utime INT, typeId INTEGER);
CREATE TABLE feedz_ip_types (typeId INTEGER PRIMARY KEY, type STRING UNIQUE);
CREATE INDEX ip_id ON feedz_ip2(ip);
CREATE INDEX types_id ON feedz_ip2(typeId);
sqlite> select * from feedz_ip2 limit 4;
1|86176256|1347929568|2
1|247463936|1347929568|2
1|247476224|1347929568|2
1|247478272|1347929568|2
sqlite> select * from feedz_ip_types;

1 | malwaredomains
2 | spamhaus
3 | badipset
4 | abuse.ch
5 | malwarepatrol

sqlite> select a.typeId, b.typeId, count(a.ip) 
          from feedz_ip2 a 
    inner join feedz_ip2 b on a.typeId != b.typeId and a.ip=b.ip 
      ;

5 | 3 | 9265512 
```

我正在寻找的真正应该是所有不同列表的交集

```
1|3|200
1|5|900
2|3|300 
```

如果没有交集或公共 IP 地址，则不会列出这些列组合。

我不知道查询是否真的让 sqlite 感到困惑，或者我很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:30:02.187

好的，找到了解决方案：

```
select a.typeId, b.typeId, count(*) from feedz_ip2 a inner join feedz_ip2 b on a.typeId != b.typeId and a.ip=b.ip group by a.typeId,b.typeId;
+--------+--------+----------+
| typeId | typeId | count(*) |
+--------+--------+----------+
|      1 |      3 |   471718 | 
|      1 |      4 |  3662405 | 
|      1 |      5 |   323609 | 
|      2 |      3 |      426 | 
|      3 |      1 |   471718 | 
|      3 |      2 |      426 | 
|      3 |      4 |   133002 | 
|      3 |      5 |    41596 | 
|      4 |      1 |  3662405 | 
|      4 |      3 |   133002 | 
|      5 |      1 |   323609 | 
|      5 |      3 |    41596 | 
+--------+--------+----------+ 
```

# javascript - 删除 HighChart 图表上的间距？

> ID：15399389
> 
> 赞同：1
> 
> 时间：2013-03-14T01:02:18.117
> 
> 标签：javascript, jquery, html, ajax, highcharts

我有一个图表，其中包含从 xml 文件中提取的数据。而且由于某种原因我无法摆脱间距。如果需要，我会将我的代码放在一起并发布在[http://jsfiddle.net](http://jsfiddle.net)

![图表间距](../Images/c0892bd53b724aa2745f687483de8f1d.png)

***************************解决方案：********************* ************

好的，很抱歉，我仍然无法在 JSFiddle 上使用它，但这是我对代码所做的。希望有一天这会帮助别人。

**这是我的原始代码：**

```
$(document).ready(function() {
        var options = {
            chart: {
                renderTo: 'container',
                type: 'column', 
            },
            title: {
                text: 'Donations'
            },
            xAxis: {                    
                categories: [],
                startOnTick: false,
            },
            yAxis: {
                title: {
                    text: 'Money $'
                }

            },              
            plotOptins: {
                column: {
                    size:'150%'
                }
            },
            legend: {
            enabled: false,           
        },
            series: []
        };

        // Load the data from the XML file 
        $.get('data.xml', function(xml) {
            // Split the lines
            var $xml = $(xml);              
            // push categories
            $xml.find('stock symbol').each(function(i, category) {options.xAxis.categories.push($(category).text());    
            });     
            // push series
            $xml.find('stock').each(function(i, series) {
                var seriesOptions = {
                    name: $(series).find('symbol').text(),
                    data: []
                };

                // push data points
                $(series).find('price').each(function(i, point) {
                    seriesOptions.data.push(
                        parseInt($(point).text())
                    );
                });

                // add it to the options
                options.series.push(seriesOptions);
            });
            var chart = new Highcharts.Chart(options);

        });
    }); 
```

**这是我的新代码：**

```
$(document).ready(function() {
        var options = {
            chart: {
                renderTo: 'container',
                type: 'column',     
            },
            title: {
                text: 'Donations'
            },
            xAxis: {                    
        categories: [],
            },
            yAxis: {
                title: {
                    text: 'Money $'
                }

            },
            plotOptins: {
                column: {
                    size:'150%'
                }
            },
            legend: {
            enabled: false,
        },
            series: []
        };

        // Load the data from the XML file 
        $.get('data.xml', function(xml) {
            // Split the lines
            var $xml = $(xml);

            // push categories
            $xml.find('stock symbol').each(function(i, category) {
                options.xAxis.categories.push(i);                           
            });         
                var seriesOptions = {
                    //name: $(series).find('symbol').text(),
                    data: []
                };
            // push series              
            $xml.find('stock').each(function(i, series) {
                // push data points
                $(series).find('price').each(function(i, point) {
                    seriesOptions.data.push(parseInt($(point).text())
                    );
                });                 
                // add it to the options

            }); options.series.push(seriesOptions);
            var chart = new Highcharts.Chart(options);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:53:14.667

解决方案是与组填充有关。如果将此添加到图表选项中，它将删除左侧和右侧的间距。

请参阅下面的示例，其中我添加了**groupPadding: 0**

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column', 
    },
    plotOptions: {
        series: {
            groupPadding: 0
        }
    },
    ...
)}; 
```

# version-control - 配置 TFS 以防止开发人员看到项目

> ID：15399393
> 
> 赞同：0
> 
> 时间：2013-03-14T01:02:59.413
> 
> 标签：version-control, tfs, alm

我是 TFS 2012 的新手并从 SourceGear Vault 切换。在 Vault 中，您可以设置文件夹的权限，以便轻松授予 John Doe 对一组特定文件夹的权限。我不确定如何在 TFS 2012 中执行此操作。让我进一步解释一下我的情况。

我的硬盘上有一个文件夹，我们将其命名为 C:\MyCompany

在根“MyCompany”文件夹下是：

```
App1.Client
App1.Library
App1.Data
App2.Client
App2.Utilities
CompanyShared.Utilities
CompanyShared.Windows
CompanyShared.Logging 
```

我希望开发人员 1 查看和使用 App1.* 和 CompanyShared.*

我希望开发人员 2 看到 App2.* 和 CompanyShared.Utilities

我如何配置它以确保不同的开发人员（分包商）只能看到他们被分配开发的内容？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:39:55.843

如果您使用源代码资源管理器并右键单击每个文件夹，您将进入高级，下面是安全性。从那里您可以分配权限

# c# - 我在 Web 应用程序中有一些错误

> ID：15399395
> 
> 赞同：0
> 
> 时间：2013-03-14T01:03:13.907
> 
> 标签：c#, asp.net, web-config

我正在尝试建立一个基于 ASP.net 的网站。我有一个登录页面，并且我已经在数据库中有一些用户。但是当我输入正确的用户名和密码时，系统显示一个错误，它说：“/”应用程序服务器错误，找不到资源。我认为我的 web.congif 有什么问题吗？或任何其他问题。我确实需要帮助。

```
<configuration>
  <connectionStrings>
    <add name="ConnectionString" connectionString="Server=databaseurl; pwd=password;uid=username; database=databasename"
   providerName="System.Data.SqlClient" />
  </connectionStrings>
    <system.web>
    <roleManager enabled="true" />
      <authorization>
      <allow users="*"/>
      </authorization>
      <authentication mode="Forms">
        <forms loginUrl="~/Register/Login.aspx" timeout="2800"/>
      </authentication>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

</configuration> 
```

谢谢

吉米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:48:06.427

你没有提供足够的信息，所以我会采取行动。

在 Visual Studio 2010 中，如果您将页面设置为`Start Page`并意外删除了该页面，您将收到`The resource cannot be found.`错误消息。

![在此处输入图像描述](../Images/0421726bacde57de61b1d474f4d41310.png)

![在此处输入图像描述](../Images/675837ffe32cad4940b1db061a947e7a.png)

# iphone - 如何在具有负位置的子视图上点击

> ID：15399402
> 
> 赞同：0
> 
> 时间：2013-03-14T01:03:47.767
> 
> 标签：iphone, ios, objective-c, ios5, ios6

一天后我放弃了。我找不到解决问题的方法。

我有一张带有自定义标注视图的地图，我想检测点击以转到另一个屏幕。

看看我的代码，这是我的自定义 MKAnnotationView

```
- (void)didAddSubview:(UIView *)subview
{
    if ([[[subview class] description] isEqualToString:@"UICalloutView"])
    {
        for (UIView *subsubView in subview.subviews)
        {
            if ([subsubView class] == [UIImageView class])
            {
                UIImageView *imageView = ((UIImageView *)subsubView);
                [imageView removeFromSuperview];
            }
            else if ([subsubView class] == [UILabel class])
            {
                UILabel *labelView = ((UILabel *)subsubView);
                [labelView removeFromSuperview];
            }
        }
    }
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    MapAnnotation *ann = self.annotation;

    if(selected)
    {
        calloutView = [[AnnotationCalloutView alloc] initWithFrame:CGRectMake(-40, -50, 200, 30) andAnnotation:ann];        

        [self addSubview:calloutView];
        [self animateCalloutAppearance];
    }
    else
    {
        //Remove custom view
        [calloutView removeFromSuperview];
        [self setCalloutView:nil];
    }
} 
```

结果：

![自定义标注](../Images/e747c3575a54a63cbc9699626645e66d.png)

问题就像我必须使用负 Y 位置，标注视图在注释视图之外，并且未检测到点击。我尝试了很多解决方案，但没有一个效果很好。

~~我目前的解决方案是在 pin superview 上直接添加一个带有手势识别器的视图，它效果很好，但是如果用户缩放我的视图就会消失。~~

请帮助我，否则我会自杀；）

~~编辑：我仍然没有找到解决方案，但是现在当我捏地图进行缩放时，我对 pin superview 的视图不再消失（我添加了一个手势识别器来拦截捏事件）。所以它可以是一个解决方案，但绝对不是一个好的解决方案。~~

**编辑 2：在我的自定义注释视图上覆盖 hitTest 是解决方案。我现在可以检测到我的标注子视图上的点击。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T02:57:38.603

尝试覆盖`-hitTest:withEvent:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:54:51.113

需要了解有关自定义标注的解决方案的更多信息，以了解在哪里放置识别器并聆听它们。

您是否将此解决方案用于自定义标注？

[https://github.com/j4n0/callout](https://github.com/j4n0/callout)

如果是这样，只需将 UITapGestureRecogniser 添加到 CalloutView？或者在 calloutview xib 文件的按钮上添加选择器？不知道为什么你在挣扎，你是否将这些识别器添加到正确的类中？

# ios - UITextfield 干扰滑动手势

> ID：15399404
> 
> 赞同：1
> 
> 时间：2013-03-14T01:03:58.030
> 
> 标签：ios, cocoa-touch, uitableview, uigesturerecognizer

我已经在我的项目中实现了这个自定义控件：[Github 页面](https://github.com/alikaragoz/MCSwipeTableViewCell)这个控件添加了一个像滑动到删除/完成功能的邮箱，我想使用它。

我在使用它时遇到的唯一问题是，如果我通过情节提要向单元格添加 UITextField。当我添加一个单元格时，它会停止识别手势，只允许我与 UITextField 交互。

有没有人可以解决这个问题？

编辑：这是 TableViewCell 的初始化方法。对不起。

```
- (void)initializer
{
    _mode = MCSwipeTableViewCellModeSwitch;

    _colorIndicatorView = [[UIView alloc] initWithFrame:self.bounds];
    [_colorIndicatorView setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
    [_colorIndicatorView setBackgroundColor:[UIColor clearColor]];
    [self insertSubview:_colorIndicatorView belowSubview:self.contentView];

    _slidingImageView = [[UIImageView alloc] init];
    [_slidingImageView setContentMode:UIViewContentModeCenter];
    [_colorIndicatorView addSubview:_slidingImageView];

    _panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGestureRecognizer:)];
    [self addGestureRecognizer:_panGestureRecognizer];
    [_panGestureRecognizer setDelegate:self];
} 
```

以及处理手势的方法

```
- (void)handlePanGestureRecognizer:(UIPanGestureRecognizer *)gesture
{
    UIGestureRecognizerState state          = [gesture state];
    CGPoint translation                     = [gesture translationInView:self];
    CGPoint velocity                        = [gesture velocityInView:self];
    CGFloat percentage                      = [self percentageWithOffset:CGRectGetMinX(self.contentView.frame) relativeToWidth:CGRectGetWidth(self.bounds)];
    NSTimeInterval animationDuration        = [self animationDurationWithVelocity:velocity];
    _direction = [self directionWithPercentage:percentage];

    if (state == UIGestureRecognizerStateBegan)
    {
    }
    else if (state == UIGestureRecognizerStateBegan || state == UIGestureRecognizerStateChanged)
    {
        CGPoint center = {self.contentView.center.x + translation.x, self.contentView.center.y};
        [self.contentView setCenter:center];
        [self animateWithOffset:CGRectGetMinX(self.contentView.frame)];
        [gesture setTranslation:CGPointZero inView:self];
    }
    else if (state == UIGestureRecognizerStateEnded || state == UIGestureRecognizerStateCancelled)
    {
        _currentImageName = [self imageNameWithPercentage:percentage];
        _currentPercentage = percentage;
        MCSwipeTableViewCellState state = [self stateWithPercentage:percentage];

        if (_mode == MCSwipeTableViewCellModeExit && _direction != MCSwipeTableViewCellDirectionCenter && [self validateState:state])
            [self moveWithDuration:animationDuration andDirection:_direction];
        else
            [self bounceToOriginWithDirection:_direction];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:35:59.143

想出了如何解决这个问题。我在我的项目中添加了一个 UITextField 子类，然后将 UITextfield 标头导入到自定义 UITableViewCell 中。添加`<UITextFieldDelegate>`到`@interface`. 添加`@property (nonatomic, strong, readonly) ItemLabel *label; // ItemLabel being the UITextField class`到`UITableViewCell`类中，在您的实现中综合它。

然后将此代码添加到您的自定义初始化程序中，如果您没有自定义初始化程序，则添加默认代码：

```
_label = [[TehdaLabel alloc] initWithFrame:CGRectNull];
_label.textColor = [UIColor blackColor];
_label.font = [UIFont boldSystemFontOfSize:14];
_label.backgroundColor = [UIColor clearColor];
_label.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
_label.returnKeyType = UIReturnKeyDone;
_label.delegate = self;
[self addSubview:_label]; 
```

然后为 UITextField 添加您的委托方法并快乐。似乎 UITextField 正在干扰，因为它不是单元格的子视图。

# sass - 创建一个 SCSS Compass-Style Mixin -> 动画

> ID：15399405
> 
> 赞同：1
> 
> 时间：2013-03-14T01:03:58.930
> 
> 标签：sass, compass-sass

目前，我正在尝试将一些 CSS 整理到 SCSS 中（通过 Compass Style）。这就是我的意思：

```
-webkit-animation: moveFromBottom 300ms ease;
-moz-animation: moveFromBottom 300ms ease;
-ms-animation: moveFromBottom 300ms ease; 
```

------------>

我对我的过渡做了类似的事情，例如：

前：

```
-webkit-transition: all 300ms linear;
-moz-transition: all 300ms linear;
-o-transition: all 300ms linear;
-ms-transition: all 300ms linear;
transition: all 300ms linear; 
```

后：

```
@include single-transition(all, 200ms, linear); 
```

但是我的问题是我找不到 Compass Style 对此的支持。您如何将其创建为包含“moveFromBottom”的mixin？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:30:24.917

查看 Compass 的[compass-animation](https://github.com/ericam/compass-animation)插件。

# javascript - 如何在 TideSDK 中包含 JS 模块？

> ID：15399407
> 
> 赞同：2
> 
> 时间：2013-03-14T01:03:59.827
> 
> 标签：javascript, titanium-mobile, tidesdk

使用 Titanium Mobile，您可以包含以下模块：

```
ASW = Ti.include('./modules/amazon').load(); 
```

TideSDK 失败。我看了又看，一无所获！很可能我错过了一些明显的东西。帮助！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:18:13.970

据我所知，模块是使用 require 函数访问的。对于 Ti.include 我不确定。所以尝试使用如下的require函数：

```
var ASW = require('./modules/amazon'); 
```

而已。希望它会有所帮助

# ruby-on-rails - FontAwesome 加载但未在 Chrome、Safari 或 Firefox 中显示（显示小框）

> ID：15399409
> 
> 赞同：1
> 
> 时间：2013-03-14T01:04:15.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, fonts, ruby-on-rails-3.2, font-face

在 Rails 3.2.1 和 Ruby 1.9.2 上，我在 app/assets/fonts 目录中有 font-awesome.css、font-awesome.min.css 和 font-awesome-ie7.min.css。

这是我正在使用的@import 声明：

```
@font-face {
    font-family: 'FontAwesome';
    src: url("./fonts/fontawesome-webfont.eot");
    src: url("./fonts/fontawesome-webfont.eot?#iefix") format('embedded-opentype'),
    url("./fonts/fontawesome-webfont.woff") format('woff'),
    url("./fonts/fontawesome-webfont.ttf") format('truetype'),
    url("./fonts/fontawesome-webfont.svg#FontAwesome") format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我告诉应用程序加载和编译字体文件夹作为 config/application.rb 中资产管道的一部分，如下所示：

```
config.assets.paths << "#{Rails.root}/app/assets/fonts"

config.assets.precompile += %w( .svg .eot .woff .ttf ) 
```

我的 application.css 文件中还有以下内容：

```
 *= require_self
 *= require_tree .
 *= require ./../fonts/font-awesome 
```

最后，这是我的 HTML：

```
<i class="icon-facebook"></i> 
```

问题是应该显示图标的地方，而是显示一个小框。我在我的应用程序的主 css 文件中有这个：

```
i {
  width: 1em;
  height: 1em;
  display:block;
  cursor: pointer;
} 
```

...但这也不显示图标。

font-awesome.css 似乎加载正确，因为这出现在源代码中：

```
<link href="/assets/font-awesome.css?body=1" media="all" rel="stylesheet" type="text/css"> 
```

为什么这些小盒子出现在图标的位置？显然我错过了一些东西......

任何帮助将非常感激。

**更新：**

仍然不知道为什么上面的方法不起作用，但我最终在我的标签中创建了一个与外部托管的 font-awesome 样式表的链接关系，如下所示：

```
<link href="//netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet"> 
```

我仍然宁愿找到上述问题的解决方案，以防链接网站出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:27:17.227

我使用与 Ruby 1.9.3 + bootstrap 和 font-awesome 相同的 rails 版本，并且它工作得很好。如果它可以帮助我做了什么

**宝石文件**

```
gem 'bootstrap-sass', '2.2.2.0'
gem 'bootstrap-will_paginate', '0.0.9'
gem 'font-awesome-sass-rails', '3.0.0.1' 
```

在**assets/stylesheets application.css.scss**添加这一行

```
 *= require _font-awesome 
```

在**assets/javascripts/application.js**添加这一行

```
//= require bootstrap 
```

然后我有一个样式表，我在其中导入 bootstrap 并覆盖我想要的称为' **bootstrap-and-overrides.css.scss** 在这个文件的顶部（非常第一行）我把

```
@import "bootstrap"; 
```

就是这样……字体真棒显示很好（文本和图标）……

希望这可以帮到你

干杯

# 3d - 3D SplitScreen XNA - 如何使用 2 个摄像头在同一个视口中绘制 2 个玩家

> ID：15399413
> 
> 赞同：0
> 
> 时间：2013-03-14T01:05:03.707
> 
> 标签：3d, xna, camera, models, viewport

我是这个网站的新手，但是我尽我所能在网上研究我的问题的答案。但我仍然找不到任何真正有用的东西。

所以事情就是这样，我正在尝试一个简单的 3D 汽车游戏，而我才刚刚开始。我目前正在分屏上工作，遇到的问题是：

我实际上可以看到两艘“船”（一个在右侧视口，一个在左侧），但我似乎无法找到在两个视口中绘制两艘船的方法，但使用它们自己的相机。所以是的，我还创建了两个不同的追逐摄像机，一个用于左侧视口，一个用于右侧。

任何人都可以以任何方式指导我吗？如果您需要任何代码来帮助您回答，我会粘贴并解释（唯一的问题是它是法语的）。

太感谢了 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:15:56.023

*讨论的更新答案：*

听起来您需要更改构造函数以不仅接受“目标”汽车，还接受赛道上的所有其他汽车。例如视图（目标汽车，所有其他汽车）

我建议：创建一个新方法来获取相机位置/平移并从该角度渲染所有汽车。然后，在 draw 方法中，调用与当前视口相关联的相机的新方法。

*原答案：*

我无法准确理解您所追求的效果，但假设这只是分屏想法的一种变体，这是解决问题的一种方法：

在游戏初始化中：

1.  创建两个渲染目标 - 每个玩家的屏幕一个

在绘制方法中：

1.  将图形目标设置为玩家的渲染目标，从玩家的相机视角渲染场景......然后对玩家二做同样的事情。

2.  将两个玩家的渲染目标都绘制到屏幕上。

如果您不知道 RenderTargets，那么来自 Microsoft 的以下示例可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/ff434402.aspx](http://msdn.microsoft.com/en-us/library/ff434402.aspx)

# bash - 无法获取变量以从一个 sh 脚本更新到另一个

> ID：15399414
> 
> 赞同：1
> 
> 时间：2013-03-14T01:05:09.357
> 
> 标签：bash, environment-variables

我正在尝试创建上次运行文件的记录，并在下次执行脚本文件时使用该时间。所以我有两个文件，*testlastrun.sh*和*testmyfile.sh*，我在其中声明了一个变量供另一个文件使用。但对于我的生活，我似乎无法让它发挥作用。

### 文件 testlastrun.sh

```
#!/bin/sh

#prepare range of dates for getting data for redemption protocol
source testmyfile.sh
echo "current date is : " `date +'%Y-%m-%d %H:%M:%S'`
enddate=`date -d "+1 hour" '+%Y-%m-%d %H:%M:%S'`
echo "the end date is : " $enddate
startdate=$LASTRUNTIME
echo "start date:" $startdate
LASTRUN=$enddate
export LASTRUN 
echo "LASTRUN variable is : " $LASTRUN 
```

### 文件 testmyfile.sh

```
#!/bin/sh

echo "LASTRUN variable is currently set to : " $LASTRUN
LASTRUNTIME=$LASTRUN
export LASTRUNTIME 
```

我觉得我已经阅读了关于 bash 脚本和变量的每一篇文章，但对于我的一生来说，我无法让它发挥作用。所以，如果你们中的任何一位超级聪明的 bash 专家可以帮助我，我将不胜感激。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:30:36.560

只是为了他人的利益，这就是我解决这种情况的方法。我将值写入文本文件（仅包含值），然后在脚本开头读取文件。这是我用来完成它的代码：

```
#!/bin/sh

#reads the file testmyfile.txt and sets the variable LASTRUNTIME equal to the contents of the text file
LASTRUNTIME=`head -n1 testmyfile.txt |tail -1`
echo "the last time this file was executed was : " $LASTRUNTIME

#shows the current server time on the terminal window
currentdate=`date +'%Y-%m-%d %H:%M:%S'`
echo "current date is : " $currentdate

#sets the variable 'enddate' equal to the current time +1 hour
enddate=`date -d "+1 hour" '+%Y-%m-%d %H:%M:%S'`
echo "the end date is : " $enddate

#sets the variable 'startdate' equal to the variable LASTRUNTIME
startdate=$LASTRUNTIME
echo "start date:" $startdate

#creates and sets variable LASTRUN equal to the current date and time
LASTRUN=$currentdate
echo "LASTRUN variable is : " $LASTRUN

#updates the file 'testmyfile.txt' to store the last time that the script routine was executed
echo "$LASTRUN" > '/home/user/testmyfile.txt' 
```

我就是这样做的。谢谢加维。我很感激帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:39:51.803

我认为您的错误来自您希望`export`更改脚本的*父环境这一事实。*该`export`语句仅告诉 shell 使该变量可用于*子*环境。

您的`export`脚本中的 没有任何用途，因为您没有从该脚本生成任何新脚本（您正在采购该脚本，这相当于包含该文件）。

您应该将信息写入文件并在必要时将其读回。

# game-center - Game Center 中的文本间距问题

> ID：15399415
> 
> 赞同：1
> 
> 时间：2013-03-14T01:05:27.487
> 
> 标签：game-center

我的“分数”文本与我的分数一起运行。我是否只是在“乐谱格式后缀”字段中的 iTunesConnect 中添加一个空格？ [http://imgur.com/a/XUzqU](http://imgur.com/a/XUzqU)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T09:26:16.777

```
&nbsp; 
```

对我有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:05:53.980

我试图从“Points”更改`Score Format Suffix`为`itunesconnect`“Points”并且它起作用了:)

# javascript - 如何在不终止程序执行的情况下创建无限循环？

> ID：15399420
> 
> 赞同：0
> 
> 时间：2013-03-14T01:06:14.900
> 
> 标签：javascript, android

我有一个程序，其逻辑与我在这里包含的虚拟样本相同。我试过一个简单`while (1)`的不运行（至少没有显示 UI）。此示例根据应终止循环`while`的变量设置运行循环。`addEventListener()`但是，它的作用就像`while (1)`. 简单地说，我需要做的是等待密码输入并验证它是否匹配。如果没有，我继续循环。如果匹配，则程序继续进行另一个循环（示例中未显示），只要程序运行，该循环就需要运行。第二个`while`基于用户输入运行几个函数。每次有一个用户输入时，另一个循环`while`正在运行。我不喜欢使用另一个线程。似乎任何创建循环的逻辑都以相同的方式做出反应，即不执行或至少不可见执行。换句话说，为什么不`while (1)`工作`for (;;)`！任何帮助将不胜感激。

```
//app.js
var debugText = Titanium.UI.createLabel({
    top: 600,
    left: 0,
    width: 500,
    height: 100,
    color: '#777',
    font:{fontSize:40},
    hintText: 'debug text'
});
var entryCodeText = Titanium.UI.createTextField({
    top: 300,
    left: 0,
    width: 400,
    height: 100,
    color: '#777',
    font:{fontSize:40},
    hintText: 'Enter Passcode'
});

//add labels and fields to window
    win.add(entryCodeText);
    win.add(debugText);
    win.open();

while (exitCode == 0) {
    // do stuff
} // end of exitCode while loop
// start of continuous program loop
while (1) {
    // if no event, just continue loop
    // if event , execute several functions and continue with loop
} // end of while(1) loop - runs as long as program runs
//*************************************************************************
entryCodeText.addEventListener("return", function(e) {

    if (computeCode(entryCodeText.value)< 0) {
        debugText.text = "failed computecode";
        exitCode = 0;
        continue;
    } else {
        debugText.text = "passed computeCode()";
        exitCode = 1;
        break;
    }
});
//continue with other logic on break and exitCode = 1
//************************************************************
function computeCode(textValue) {
    // do stuff to the textValue
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:11:56.997

您最好使用 keyup 或 keydown evt。

**也就是说**，如果你必须这样做，你可以使用 setTimeout 函数。

在脚本执行方面，它总是最后运行（即使在浏览器内部 UI 操作之后），因此可以防止 UI 锁定。

此示例使用 2 个文本框。一旦第一个具有正确的值，它就会进入内部循环。

```
<html>
  <body>
  UserName: <input type="text" id="txt" /><br>
  Password: <input type="text" id="txt2" />

<script>
    var txt =  document.getElementById('txt'),
        txt2 = document.getElementById('txt2');
    var loop, innerLoop;
    (function loop(){
        setTimeout(function(){
            if(txt.value === 'name'){
            alert('correct username entered');
                            //new loop
                (function innerLoop(){ 
                    setTimeout(function(){
                        if(txt2.value === 'password') {
                            alert('correct password entered');
                            return;
                        }
                        else setTimeout(innerLoop,0); 
                    },0);
                })();
                return;
            }
            else setTimeout(loop,0);
        },0);
    })();
</script>

</body>
</html> 
```

演示：http: [//jsfiddle.net/Vg5ND/](http://jsfiddle.net/Vg5ND/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:41:44.697

```
while(true) 
```

应该让它永远运行。

# ruby-on-rails - 如何通过 HTTParty 通过 PUT 请求发送空数组？

> ID：15399423
> 
> 赞同：6
> 
> 时间：2013-03-14T01:06:39.347
> 
> 标签：ruby-on-rails, ruby, httparty

我有一个具有“名称”属性和“标签”属性的 Photo 类。我的目标是在 Rails 中实现一个更新功能，用输入的任何内容替换照片的标签。例如，如果我尝试 PUT 一个将“标签”设置为 [] 的 JSON 对象，我希望从照片中清除所有标签。

但是，当我通过 HTTParty 提交一个空数组作为正文参数之一时，我相信 HTTParty 正在将 [] 转换为 nil。因此，我的 Rails 后端上的 photos#update 端点没有接收到参数“tags”的任何信息。我正在寻找一种让 HTTParty 不将 [] 转换为 nil 的方法，因为我无法从照片中删除标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-31T20:32:29.600

这是 Rails 4 中的一个错误/功能，您可以在以下位置阅读有关该剧的更多信息：[https ://github.com/rails/rails/issues/13420](https://github.com/rails/rails/issues/13420)

您的选择包括：

*   类似于@mkk 的回答的一次性破解
*   升级到 Rails 5
*   到处禁用`deep_munge`，并处理其后果：

>

```
# config/application.rb
config.action_dispatch.perform_deep_munge = false 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T01:12:48.703

只需将空数组分配给参数，例如：

```
params[:photo][:tags] ||= [] 
```

如果 params[:photo][:tags] 尚未设置，它将分配空数组。如果它不起作用，则意味着您必须调整键，例如您可能没有:tags，但是:tag_ids，那么您将不得不编写params[:photo][:tags]。只需检查您的 HTML 结构（您可以随时将其粘贴在这里，我可以帮助您]。据我所知，这是标准方法 :)

# r - 在递归列表中设置 chr 类型元素的属性

> ID：15399427
> 
> 赞同：1
> 
> 时间：2013-03-14T01:07:06.733
> 
> 标签：r

我很困惑为什么以下代码**可以设置属性**：

```
#list of character
temp = list()
temp[[1]] = "test"
str(temp)
attr(temp[[1]], "testing") = "try"
attributes(temp[[1]]) 
```

返回

```
$testing
[1] "try" 
```

但是当我尝试在命名列表中设置元素的属性时，比如说使用

```
#list of character, where list element is named
temp = list()
temp[["2ndtemp"]][[1]] = "test"
str(temp)
attr(temp[["2ndtemp"]][[1]],"testing") = "try"
attributes(temp[["2ndtemp"]][[1]]) 
```

这返回`NULL`。

然后我发现如果你声明一个递归列表：

```
#list of a list
temp = list()
temp[["2ndtemp"]] = list()
temp[["2ndtemp"]][[1]] = "test"
str(temp)
attr(temp[["2ndtemp"]][[1]],"testing") = "try"
attributes(temp[["2ndtemp"]][[1]]) 
```

这**行得通**。

进一步探索：

```
#character vector
temp = "test"
str(temp)
attr(temp,"testing") = "try"
attributes(temp) 
```

**也可以**，但是如果我有一个包含字符的向量：

```
temp=vector()
temp[[1]] = "test"
str(temp)
attr(temp[[1]],"testing") = "try"
attributes(temp[[1]]) 
```

这返回`NULL`。

有人可以向我解释为什么 attr() 函数在这些情况下的工作方式不同吗？

编辑：我对最后一对示例感到非常困惑，因为如果我设置：

```
temp = "test"
temp2=vector()
temp2[[1]] = "test" 
```

然后查询：

```
identical(temp,temp2[[1]]) 
```

我明白了`TRUE`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:28:28.843

你所有的例子都做了不同的事情。

```
temp = list()
temp[["2ndtemp"]][[1]] = "test" 
```

这会创建一个字符向量，`[[<-` 在一个空对象上不会创建一个列表

看

```
x <- NULL
x[[1]] <- 'x'
 x
[1] "x" 
```

在您的示例中，您正在使用调用时`vector`的默认值，即`mode``vector()``vector(mode = "logical", length = 0)`

因此，当您分配时`'test'`，您只是在强制 from `logical`to `character`。它仍然是一个原子向量，而不是一个`list`

因为它是一个字符向量，并且是原子的，所以你不能给不同的元素不同的属性，并且

```
attr(x[[1]], 'try') <- 'testing' 
```

实际上并没有分配任何东西（也许它应该发出警告，但它没有）。

通过阅读帮助页面，您将得到很好的服务`vector`

# iphone - Xcode 4.5 4.6 View Controller Lifecycle 导致旧的 UIViewController 被僵尸化

> ID：15399428
> 
> 赞同：0
> 
> 时间：2013-03-14T01:07:11.707
> 
> 标签：iphone, ios, uiviewcontroller, xcode4.5, uialertview

我有一个应用程序我有一段时间没碰过，并决定更新它。当我在 Xcode 4.6 中运行它时，我得到一个 Bad Access 错误，当我分析它时，我的 ViewController Alertview 是被调用并最终作为 NSZombie 留下的对象。

我不确定问题是警报视图还是它调用的视图控制器。

这是与调用警报视图的按钮相关联的操作：

```
- (IBAction)newGame:(id)sender {
timerIsActive = NO;
//UIImage *pauseImage = [UIImage imageNamed:rndImage];
UIImageView *pauseView = [[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)] autorelease];
pauseView.image = gameImage;
[self.view addSubview:pauseView];

NSString *message = [NSString stringWithFormat:@"Would you like to reset the game?"];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"New Game"
                                                message:message 
                                               delegate:self 
                                      cancelButtonTitle:@"Back to Game" 
                                      otherButtonTitles:@"New Game", nil];
[alert show];
[alert release];
[Flurry logEvent:@"New Game"]; 
```

}

警报视图如下：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
timerIsActive = NO;
NSString *buttonString = [actionSheet buttonTitleAtIndex:buttonIndex];
if( [buttonString isEqualToString:@"Main Menu"] ){

    [self.view removeFromSuperview];
} else if( [buttonString isEqualToString:@"View Board"] ){

} else if( [buttonString isEqualToString:@"Back to Game"] ){

    timerIsActive = YES;
    NSArray *arr =[self.view subviews];
    [[[self.view subviews] objectAtIndex:([arr count]-1)] removeFromSuperview];

} else if( [buttonString isEqualToString:@"New Game"] ){

    seconds = 120;
    board.numOfLetters = 0;
    board.currentWordLetters = nil;
    board.currentString = nil;
    board.words = nil;
    board.letters = nil;

    //[boardView release];
    //[board release];
    [timer invalidate];
    [self release];

    ViewController *viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    viewController.gameSize = self.gameSize;
    self.view = viewController.view;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:20:19.723

这看起来像问题区域：

```
ViewController *viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
viewController.gameSize = self.gameSize;
self.view = viewController.view; 
```

您正在创建一个自动释放的视图控制器，将其视图分配给`self.view`，然后该方法结束。此时，没有任何东西拥有视图控制器，因此可以自由地释放它。

这不是从一个视图控制器转换到下一个视图控制器的正确方法。你不只是将视图从一个视图控制器传递到下一个视图控制器，你应该有一些东西来管理你的视图控制器。

在不了解您的应用程序架构的更多信息的情况下，很难提出纠正措施，但请考虑告诉负责您的游戏生命周期的任何对象（我猜在您的情况下是您的应用程序委托？）应该开始一个新游戏。该对象将保存当前的视图控制器，当它收到该消息时，它应该创建新的视图控制器 - 并拥有它。

您应该阅读 Apple 关于如何构建应用程序的文档，特别是关于视图控制器所扮演的角色和 Cocoa 的所有权规则的部分。

# php - 准备好的语句的安全/服务器系统日志记录

> ID：15399430
> 
> 赞同：0
> 
> 时间：2013-03-14T01:07:28.497
> 
> 标签：php, mysql, security, logging, centos

我目前正在完成我的应用程序的安全性。

我要问各位专家的一个问题是，是否有办法让某人控制我的 unix 平台，从某种 mysql 日志中提取密码？

我通常在 php 和 mysql 之间传输密码是这样完成的：

```
$sql = "CALL client_create(?, ...)";
$stmt = $cnx->prepare($sql);
$stmt->execute(array($hashpw, ...));
$cnx->commit(); 
```

我的设置中没有`autocommit`，如果这改变了任何东西。

所以基本上必须有某种重做日志或类似的，对吧？那怎么办，应该担心吗？我应该偶尔冲洗一次吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:18:57.860

你害怕的事情是绝对可能的。但是，这不应该是一个真正的问题。让我解释：

MySQL 当前使用许多不同类型的日志：

1.  [二进制日志](http://dev.mysql.com/doc/refman/5.5/en/binary-log.html)- 这些用于复制并将每个写入查询写入它（以可逆二进制形式）。如果要进行复制，则需要这些日志。
2.  [查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)- 这些用于调试（通常）。它们通常不会在生产环境中启用（应该禁用）。
3.  [InnoDB 事务日志](http://dev.mysql.com/doc/refman/5.5/en/innodb-data-log-reconfiguration.html)- 这用于每次写入以允许事务符合 ACID（详细信息超出此答案的范围）。
4.  [其他日志](http://dev.mysql.com/doc/refman/5.5/en/server-logs.html)- 在这里您无需担心（错误日志、慢查询日志等）。

因此，数据通常至少写入一个日志文件，但也可能写入 3 个（取决于服务器配置）。

但它也被写入磁盘。它以合理的纯文本格式存储在表空间中。因此，如果我（作为攻击者）可以访问磁盘，我将跳过日志并直接获取表信息本身。

现在，如果您在数据库层中“散列”密码（意味着纯文本密码进入查询，并且数据库发出散列函数），那么您是正确的，日志可能会产生纯文本密码.

## 这不值得

尝试通过刷新日志来隐藏此信息是不值得的。最好从源头解决问题（在您的应用程序中使用更好的散列方法）。

问题是 MySQL 使用的任何散列都是简单的原始散列（例如`MD5()`or `SHA256()`）。两者都设计得*很快*。因此，如果我可以从表中获取哈希值，我几乎可以像使用原始密码一样轻松地攻击它。为什么？[因为快速哈希很容易使用 GPU](http://arstechnica.com/security/2012/12/25-gpu-cluster-cracks-every-standard-windows-password-in-6-hours/)进行暴力破解。

## TLDR

基本上，你必须做两件事（至少从我的角度来看）：

1.  阻止人们访问数据库的文件系统。这是首要的。
2.  使用正确的密码存储技术（bcrypt 等）。这将减轻日志文件可能构成的任何向量。

# jquery - jQuery 对话框标题图标解决方法导致其他选项被忽略

> ID：15399431
> 
> 赞同：1
> 
> 时间：2013-03-14T01:07:39.473
> 
> 标签：jquery, jquery-ui-dialog

我希望这不会浪费任何人的时间......我已经研究并尝试了几个小时的不同解决方案，但无法让它发挥作用。

我正在使用 jQuery UI 1.10.1。我想在标题中添加一个图标。以下代码不适用于版本 1.10.1：

```
$("#dialog").dialog(
{
    title: '<span class="ui-icon ui-icon-home"></span> Example Dialog'
}); 
```

因此，我使用以下代码作为解决方法：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function()
            {
                var eventDialog = $("#createEventForm").dialog();

                eventDialog.data("uiDialog")._title = function(title) 
                {
                    title.html(this.options.title);
                };

                eventDialog.dialog(
                {
                    title: "<span class=\"ui-icon ui-icon-pencil\" style=\"float: left; margin-right: 4px;\"></span> New Appointment",
                    modal: true,
                    autoOpen: false,
                    width: "auto",
                    buttons: [
                    {
                        text: "Save",
                        'click': function()
                        {
                            // do something with .ajax in here
                        },
                        icons: { primary: 'ui-icon-plus'}
                    },
                    {
                        text: "Cancel",
                        'click': function()
                        {
                            $(this).dialog("close");
                        },
                        icons: {primary: 'ui-icon-cancel'}
                    }]
                });
            });
</script> 
```

现在图标像我想要的那样在标题栏中，但是“modal”和“autoOpen”选项被忽略了。“宽度”和“按钮”选项按预期工作。

实际上，它们仅在页面加载时被忽略。如果我关闭对话框，然后单击在我的 html 中触发它的按钮，那么当对话框再次打开时，所有选项都会产生预期的效果。

# ios - 如何在 UIPickerView 中为两个不同的组件显示两种不同的对象类型？

> ID：15399436
> 
> 赞同：0
> 
> 时间：2013-03-14T01:08:57.383
> 
> 标签：ios, objective-c, uiview, uipickerview

我有一个带有两个组件的选择器。在组件 0 (kCardComponent) 中，我希望 NSStrings 出现。在组件 1 (kSuitComponent) 中，我想要 UIView。这是我的选择器视图中的代码。程序崩溃，我假设是因为它在此方法中应该返回 UIView 时返回了 NSString

```
- (UIView *)pickerView:(UIPickerView *)pickerView
        viewForRow:(NSInteger)row
      forComponent:(NSInteger)component reusingView:(UIView *)view {
if (component == kSuitComponent) {
    UIImage *image = self.suitImages[row];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    return imageView;
}
else
    return (UIView*)self.cardNumber[row];
} 
```

我尝试创建另一个选择器视图 -(NSString*)pickerView，但这不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:17:31.833

您不能从此委托方法返回字符串，只能返回视图。由于您需要一个组件的视图，因此您需要一个所有组件的视图。您需要做的是创建一个`UILabel`并将其文本设置为您拥有的字符串。

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    if (component == kSuitComponent) {
        UIImage *image = self.suitImages[row];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        return imageView;
    } else {
        NSString *text = self.cardNumber[row];
        UILabel *label = ... // create label
        label.text = text;
        return label;
    }
} 
```

# php - 在PHP中将数组转换为字符串

> ID：15399440
> 
> 赞同：1
> 
> 时间：2013-03-14T01:09:58.670
> 
> 标签：php, arrays

我正在尝试将数组
转换为从 xml 转换的字符串数组

```
 [ChargeableRateInfo] => Array(
    [NightlyRatesPerRoom] => Array
    (
      [NightlyRate] => Array
      (
        [0] => Array()
        [1] => Array()
        [0_attr] => Array(
          [promo] => false
          [rate] => 182.46
          [baseRate] => 182.46
        )
        [1_attr] => Array(
          [promo] => false
          [rate] => 182.46
          [baseRate] => 182.46
        )
        [2] => Array()
      )
   )
) 
```

我的尝试是：

```
foreach ($my_array['ChargeableRateInfo']['NightlyRatesPerRoom'] ['NightlyRate'] as $rates){
   print_r($rates['1_attr']['baseRate']);
   } 
```

我使用 xml2array 将带有属性的 xml 转换为数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:18:21.350

Json_encode 是将多维数组转换为字符串的最简单方法。[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:58:00.757

尝试这个：

```
foreach( $my_array['ChargeableRateInfo']['NightlyRatesPerRoom']['NightlyRate']
         as $k => $rates )
{
    if( array_key_exists( 'baseRate', $rates ) )
    {
        echo $rates['baseRate'], "\n";
    }
} 
```

# python - 如何从 IDLE 命令行运行 Python 脚本？

> ID：15399444
> 
> 赞同：5
> 
> 时间：2013-03-14T01:10:07.280
> 
> 标签：python, python-idle

在 bash shell 中，我可以使用 'bash ' 或 'source ' 手动调用脚本。我可以在 Python IDLE 的交互式 shell 中做类似的事情吗？我知道我可以转到文件>>打开模块，然后在单独的窗口中运行它，但这很麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:18:16.947

我发现的一种方法是`execfile`. 它具有签名`execfile(<filename>,<globals>,<locals>)`并在与当前空闲会话相同的线程中运行文件。 **此方法特定于 Python 2**

OP 要求的方法（在不同的线程/窗口中）将用于`subprocess`在不同的线程/窗口中运行。

```
导入子流程

#其中任何一个都将运行该文件。选择最适合您的。

subprocess.call(['python','filename.py'])
subprocess.check_call(['python','filename.py'])
subprocess.Popen(['python','filename.py'])

```

这些基本上做了[nneonneo](https://stackoverflow.com/questions/15399444/how-to-run-a-python-script-from-idle-command-line#answer-15399457)的答案，但`subprocess`用于在不同的线程中执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-19T19:45:37.290

如果您的意思是在 Python IDLE 的交互式 shell 而不是命令提示符或命令行中执行，那么我通常使用这种方法：

`python -m idlelib.idle -r "C:/dir1/dir2/Your script.py"`

它对我很有效。在我的 Windows 10，python 3.7.3 上测试。

请确保您已在环境变量中添加了所需的 python 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:11:44.073

您可以从命令行运行 Python 脚本：

```
python <script.py> 
```

# iphone - 为什么我的表单无法在 iPhone/iPad 上正确显示？

> ID：15399446
> 
> 赞同：1
> 
> 时间：2013-03-14T01:10:14.183
> 
> 标签：iphone, html, forms, ipad, adobe-indesign

我在出版物的 iPad 版本中使用了一个表单，当我选择表单的文本字段时，它会在第一个表单的顶部放置一个重复的表单（参见[屏幕截图](http://i.stack.imgur.com/mGKHB.png)）。有谁知道为什么会发生这种情况？如果有帮助，这是 InDesign CS6 中的 HTML 片段。该代码在浏览器中运行良好。任何想法为什么此代码不起作用？

```
<div align="center" style="background-color: transparent;">
<div style="width:100%; background-color: transparent;">
<form name="ccoptin" action="http://visitor.r20.constantcontact.com/d.jsp"
target="_blank" method="post" style="margin-bottom:3;">
<input type="text" name="ea" size="20" value="" style="font-family: Gotham, 
'Helvetica  Neue', Helvetica, Arial, sans-serif; font-size:10px; border:1px solid 
#999999;">
<input type="submit" name="go" value="Submit" class="submit"  style="font-family: 
Gotham, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size:10px;">
<input type="hidden" name="llr" value="cgw6xxdab">
<input type="hidden" name="m" value="1103529695426">
<input type="hidden" name="p" value="oi">
</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:10:15.160

为什么不直接添加以下代码并取出 CSS？

```
<meta name="viewport" id="iphone-viewport" content="minimum-scale=1.0, maximum-scale=1.0, width=device-width"> 
```

还是您使用 CSS 有什么原因？

# r - 分配给数据框将字符串更改为 R 中的列表

> ID：15399451
> 
> 赞同：1
> 
> 时间：2013-03-14T01:10:34.807
> 
> 标签：r, list, types, dataframe

我正在尝试使用从第二个数据框中提取的字符串填充数据框列。但是，当我尝试这样做时，列中的新条目会变成列表：

```
for (i in nyc_districts$SUBWAY_STOP){
  nyc_districts$SUBWAY_STOP[i]<-substops$V3[[i]]
}

class(substops$V3[[1]])
[1] "character"

class(nyc_districts$SUBWAY_STOP[1])
[1] "list" 
```

到底是怎么回事？如何将新条目转换为字符串？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:14:12.680

您对索引`[`感到困惑。`[[`

从帮助中引用

> ## 递归（类列表）对象
> 
> [ 索引类似于原子向量并选择指定元素的列表。
> 
> [[ 和 $ 都选择列表的单个元素。

因此差异

```
x <- list(a = 1:4, b= 1:2)
class(x[1])
## [1] "list"
 class(x[[1]])
## [1] "integer" 
```

在不知道您的数据是什么样子的情况下，我无法为您的确切问题提出更好的方法，除非说会有更好的方法。

# android - 如何在用作地图的图像上绘制 GPS 位置？

> ID：15399453
> 
> 赞同：1
> 
> 时间：2013-03-14T01:11:04.937
> 
> 标签：android, math, gps, location

我有一些商场的图像，我需要将它们用作我正在制作的应用程序的地图。我有地图底角的 GPS 纬度/经度，我计算出从底部 GPS 坐标到地图图像顶部的距离。但是这些不是直线上下的线性地图，这意味着我不能只绘制我的纬度和经度都很好而且整洁。

我尝试过使用各种公式，而且我非常接近，但我无法绘制地图左上角和右上角的顶部纬度和经度。到目前为止，这就是我所拥有的：

```
double distanceFromLeftToRightGPS = bottomLeft.distanceTo(bottomRight);
double bearingleftToRight= bottomLeft.bearingTo(bottomRight);

double distmapFromLeftToRightImg = map.getWidth();
double distmapFromTopToBottomImg = map.getHeight();

double percentageValueOfTopToBottomImg = (distmapFromTopToBottomImg * 100)
        / distmapFromLeftToRightImg;
double distanceFromTopToBottomGPS = (percentageValueOfTopToBottomImg * 0.01)
        * distanceFromLeftToRightGPS;

double bearingToTopFromBottom = -90;
double lat1 = Math.toRadians(bottomLeft.getLatitude());
double lon1 = Math.toRadians(bottomLeft.getLongitude());

double dist = (distanceFromTopToBottomGPS/1000f)/6371.0f;

double lat2 = Math.asin(Math.sin(lat1) * Math.cos(dist)
        + Math.cos(lat1) * Math.sin(dist) * Math.cos(bearingToTopFromBottom));

double a = Math.atan2(Math.sin(bearingToTopFromBottom) * Math.sin(dist)
        * Math.cos(lat1), Math.cos(dist) - Math.sin(lat1) * Math.sin(lat2));

System.out.println("a = " +  a);
double lon2 = lon1 + a;

lon2 = (lon2 + 3 * Math.PI) % (2 * Math.PI) - Math.PI;

System.out.println("Latitude = " + Math.toDegrees(lat2) + "\nLongitude = "
        + Math.toDegrees(lon2)); 
```

这让我非常接近，但最终位置偏离了它真正应该在的位置。我也不确定应该使用什么方位来查看地图底部的内容。如果其他人有一些关于如何让它工作的信息，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:43:47.803

您需要用它们的纬度/经度坐标来识别地图上的 3 个点。然后使用*Helmert*变换。
这里有一些关于“Helmert”转换的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:28:26.977

这两种方法是我从 SO 上的其他一些帖子中提出的解决方案。如果您的地图左上角和右下角有左上角 GPS 坐标和右下角 GPS 坐标，那么使用这两种方法，您可以找出在地图上绘制第三个 GPS 坐标的位置。这些将与您的左上角和右下角 GPS 坐标一样准确。然后我使用画布在位图上绘制第三个点。

```
public final static double OneEightyDeg = 180.0d;
public static double ImageSizeW, ImageSizeH ;

getSizesFromBitmap(ImageSizeW, ImageSizeH);

public double getCurrentPixelY(Location upperLeft, Location lowerRight, Location current) {
    double hypotenuse = upperLeft.distanceTo(current);
    double bearing = upperLeft.bearingTo(current);
    double currentDistanceY = Math.cos(bearing * Math.PI / OneEightyDeg) * hypotenuse;
    //                           "percentage to mark the position"
    double totalHypotenuse = upperLeft.distanceTo(lowerRight);
    double totalDistanceY = totalHypotenuse * Math.cos(upperLeft.bearingTo(lowerRight) * Math.PI / OneEightyDeg);
    double currentPixelY = currentDistanceY / totalDistanceY * ImageSizeH;

    return currentPixelY;
}

public double getCurrentPixelX(Location upperLeft, Location lowerRight, Location current) {
    double hypotenuse = upperLeft.distanceTo(current);
    double bearing = upperLeft.bearingTo(current);
    double currentDistanceX = Math.sin(bearing * Math.PI / OneEightyDeg) * hypotenuse;
    //                           "percentage to mark the position"
    double totalHypotenuse = upperLeft.distanceTo(lowerRight);
    double totalDistanceX = totalHypotenuse * Math.sin(upperLeft.bearingTo(lowerRight) * Math.PI / OneEightyDeg);
    double currentPixelX = currentDistanceX / totalDistanceX * ImageSizeW;

    return currentPixelX;
} 
```

# jquery - 无法检索克隆的 Div 元素

> ID：15399454
> 
> 赞同：0
> 
> 时间：2013-03-14T01:11:09.560
> 
> 标签：jquery, dom, clone

对于滑块项目，我想在克隆的 div 中访问子 div，但它似乎不起作用：

```
 <div class="slide">
  <div class='slidecaption'><h2>Slide Number 1</h2></div> 
 <div class='slidetext'><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p></div>
 </div> 

 <div class="slide"> 
  <div class='slidecaption'><h2>Slide Number 2</h2></div> 
 <div class='slidetext'><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p></div>
 </div> 

 <div class="slide"> 
  <div class='slidecaption'><h2>Slide Number 3</h2></div> 
 <div class='slidetext'><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p></div>
 </div> 
```

现在Jquery代码是：

```
$(document).ready(function() { 
    var slides = $('.slide');   
    var firstclone = slides.eq(0).clone(true);
    var lastclone  = slides.eq(2).clone(true);

    slides.wrapAll('<div id="slideswrapper"></div>');
    firstclone.appendTo ("#slidesWrapper");
    lastclone.prependTo ("#slidesWrapper");
    var slidesNumber = slides.length;
 console.log(slidesNumber); //===> this will give 3 NOT 5
 console.log(slides); //===>this will give an object of only 3 divs
 console.log('#slidesWrapper'.html); //=====> this will give undefined 

}); 
```

调试代码不会显示代码中注释的预期结果。现在，正如我从 Jquery 文档中了解到的那样，插入到 dom 的任何克隆 div 都将成为 dom 的一部分，所以为什么我不能在这里得到它，我的意思是 5 张幻灯片或所需的 html。

我想检索 .slideText 和 .slideCaption 内容来操作它们并添加一些效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:19:52.700

您需要重新选择元素。

在您打电话`var slides = $('.slide');`时，确实只有 3 张幻灯片。

但是，如果您在插入元素后再次运行选择器 ( `console.log($('.slide').length);`)，您将按预期得到 5。

此外，您的代码有拼写错误，最重要的是：`slidesWrapper`!= `slideswrapper`。

# python - 如何访问形状在所有维度上都减小的任意等级的numpy ndarray

> ID：15399455
> 
> 赞同：1
> 
> 时间：2013-03-14T01:11:19.173
> 
> 标签：python, numpy

我想通过将每个维度中其形状的上限减小一来减小任意等级的 numpy ndarray 的大小。数组值不应**相对**于其原始索引移动。

所以，

```
 [N] becomes [N-1]
  [N,M] becomes [N-1, M-1]
[N,M,P] becomes [N-1, M-1, P-1], etc. 
```

这应该由一个事先不知道数组等级的函数来处理。

```
import numpy as np

def truncator( array ):
   # flailing
   return truncated_array

>>> a
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
>>> truncator(a)
array([[0, 1],
       [3, 4]]) 
```

我考虑过`reshape`，`resize`没有成功。提前知道数组等级我知道如何使用类似的视图`truncated_array = array[:-1,:-1]`，但我不知道如何使该概念适用于任意等级。有没有固定宽度的`Elipses`东西？`...`那会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:18:15.167

```
def truncator(array):
  new_shape = [d-1 for d in array.shape]
  return np.resize(array, new_shape) 
```

希望这有效。

编辑：你没有指定应该如何截断数组：如果你只想要一堆`:-1`s 像`a[:-1,:-1:,-1]`：

```
def another_truncator(array):
  slicers = [slice(-1) for d in array.shape]
  return array[slicers]

>>> a
array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4]])
>>> another_truncator(a)
array([[0, 1],
       [1, 2]]) 
```

它能做什么 ：

你可以“切片”一个集合`col[start:end:step]`。实际上，其中使用的切片运算符（`[::]`）`col[start:end:step]`可以表示为一个`slice`对象（`slice(start, end, step)`），并且您可以使用该对象“切片”集合，就像使用整数索引一样。

要截断（可能是嵌套的）数组，您必须选择除最后一项之外的每个项目`[:-1]`- 因此`slice(-1)`，您必须进行 n 次选择，n 是数组的维度。

```
def another_truncator(array):
  slicers = [slice(-1) for d in array.shape] #create n slicers
  return array[slicers] #slice and return 
```

# php - 在 preg_match 中指定 $matches 中的内容

> ID：15399456
> 
> 赞同：0
> 
> 时间：2013-03-14T01:11:24.980
> 
> 标签：php, regex, preg-match

我已经研究了半个小时，仍然无法弄清楚。我相信这很简单。

我想匹配一个 id，但前提是它前面有“ID：”。

```
<?php
$string1 = "Payment: 1474";
$string2 = "Payment ID: 1474";

preg_match('/ID: ([0-9]){1,7}$/', $string1, $matches);

//array(0){} Good! This is the expected result.

preg_match('/ID: ([0-9]){1,7}$/', $string2, $matches);

//array(2) { [0]=> string(8) "ID: 1474" [1]=> string(1) "4" }
//I am glad it finds a match, but I want matches[0] to be only the id, 1474

?> 
```

换句话说，我需要找到一个匹配项，但我还需要指定进入数组的内容。

由于我在学习这一点时遇到了困难，如果您不仅用代码回答，而且还解释它的作用，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T01:13:40.393

试试这个：

```
preg_match('/ID: ([0-9]{1,7})$/', $string2, $matches); 
```

在您的代码中，捕获组仅匹配一个字符。这匹配捕获组内的 1-7 个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:16:50.880

括号捕获匹配表达式的一部分并将其存储在 $matches[1] 中。这是获得您想要的东西的最佳方式。只需将右括号移到`{1,7}`零件的右侧：

```
preg_match("/ID: (\d{1,7})/", $string2, $matches);
$id = $matches[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:17:27.197

为了争论：

```
 preg_match('/(?<=ID: )[0-9]{1,7}$/', $string2, $matches); 
```

(是一个lookbehind运算符，它只查看匹配是否在此之前，但它实际上并不是结果匹配的一部分。然而，我很难想到它*必须*在第'th 索引`(?<=)`中的正当理由......只是说，你有你的数据吗？*`0``$id=$matches[1]`*

# java - 切换矩阵

> ID：15399458
> 
> 赞同：0
> 
> 时间：2013-03-14T01:11:51.817
> 
> 标签：java, matrix, switch-statement, swap, switching

你好我有这个程序，我想知道你认为我能做些什么来改变第一行和最后一行

例如：

> 1 2 3 4
> 
> 5 6 7 8
> 
> 9 10 11 12
> 
> 13 14 15 16

变成：

```
4 2 3 1

8 6 7 5

12 10 11 9

16 14 15 13 
```

这就是我到目前为止所拥有的

```
import java.io.*;
import java.util.Scanner;
public class DynamicMatrix {

    public static void main(String args[]){

        Scanner sc=new Scanner(System.in);
        System.out.println("Enter the number of rows and colomns:");
        int row=sc.nextInt();
        int col=sc.nextInt();
        int arr[][]=new int[row][col];
        System.out.println("Enter the numbers for the matrix:");
        for(int i=0;i<row;i++)
            for(int j=0;j<col;j++)
                arr[i][j]=sc.nextInt();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:19:00.230

```
// display your matrix:

 for(int i=0;i<row;i++){
   System.out.println("");
   for(int j=0;j<col;j++){
       System.out.print(arr[i][j]);
   }
  }

// reversing your matrix

int temp = 0 ;
 for(int i=0;i<row/2;i++){
   for(int j=0;j<col/2;j++){
       temp = arr[i][j];
       arr[i][j] = arr[i][col-j-1]; 
       arr[i][col-j-1] = temp ;
   }
  }

// display the reversed one

     for(int i=0;i<row;i++){
       System.out.println("");
       for(int j=0;j<col;j++){
           System.out.print(arr[i][j]);
       }
      } 
```

**更新**

整个事情应该是这样的：

```
import java.io.*;
import java.util.Scanner;
public class DynamicMatrix {
public static void main(String args[]){
Scanner sc=new Scanner(System.in);
  System.out.println("Enter the number of rows and colomns:");
   int row=sc.nextInt();
   int col=sc.nextInt();
   int arr[][]=new int[row][col];
     System.out.println("Enter the numbers for the matrix:");
     for(int i=0;i<row;i++)
     for(int j=0;j<col;j++)
     arr[i][j]=sc.nextInt();
// display your matrix:

     for(int i=0;i<row;i++){
       System.out.println("");
       for(int j=0;j<col;j++){
           System.out.print(arr[i][j]);
       }
      }

    // reversing your matrix

    int temp = 0 ;
     for(int i=0;i<row/2;i++){
       for(int j=0;j<col/2;j++){
           temp = arr[i][j];
           arr[i][j] = arr[i][col-j-1]; 
           arr[i][col-j-1] = temp ;
       }
      }

    // display the reversed one

         for(int i=0;i<row;i++){
           System.out.println("");
           for(int j=0;j<col;j++){
               System.out.print(arr[i][j]);
           }
          }
    }
} 
```

**更新**：

我更新了它现在应该可以正常工作的代码。我重做了两次逆运算，因为我在迭代 throw all`col`和 all`row`而不是迭代其中的一半。

输出：

```
Enter the number of rows and colomns:
2
2
Enter the numbers for the matrix:
1
2
3
4

12
341 will be replacing 2
2

21
34 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:56:03.810

试试下面的代码...

```
public static void main(String[] args){
    Integer array[][] = {{1,2,3,4,5},{6,7,8,9,10},{11,12,13,14,15},{16,17,18,19,20},{21,22,23,24,25}};
    printArray(array);
    System.out.println();
    printArray(reverseRows(array));
}

public static Integer[][] reverseRows(Integer[][] array){
    Integer[][] arrayToReturn = new Integer[array.length][array[0].length];
    for(int i = 0 ; i < array[1].length; i ++){
        arrayToReturn[i] = Arrays.copyOf(array[i], array[i].length);
        Integer newFirst = arrayToReturn[i][arrayToReturn[i].length - 1];
        Integer newLast = arrayToReturn[i][0];
        arrayToReturn[i][0] = newFirst;
        arrayToReturn[i][arrayToReturn[i].length - 1] = newLast;
    }
    return arrayToReturn;
}

public static void printArray(Integer[][] array){
    for(int i = 0 ; i < array.length ; i ++){
        System.out.println(Arrays.toString(array[i]));
    }
} 
```

它会输出

```
[1, 2, 3, 4, 5]
[6, 7, 8, 9, 10]
[11, 12, 13, 14, 15]
[16, 17, 18, 19, 20]
[21, 22, 23, 24, 25]

[5, 2, 3, 4, 1]
[10, 7, 8, 9, 6]
[15, 12, 13, 14, 11]
[20, 17, 18, 19, 16]
[25, 22, 23, 24, 21] 
```

我认为这是您正在寻找的。这假设您已经在内存中拥有整个数组。

# ruby-on-rails - Rails 这个查询对 sql 注入开放吗？

> ID：15399467
> 
> 赞同：4
> 
> 时间：2013-03-14T01:12:49.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, sql-injection

我仍在学习如何使用 ActiveRecord 编写好的查询。我很好奇这个查询是否会因为我在查询中使用日期字段的方式而受到 sql 注入。

有人可以指出任何明显的错误或编写此查询的更好方法吗？

```
@arrangements_for_month =
  Arrangement.joins(:timeslot).
              where("timeslots.timeslot BETWEEN '#{month}' AND '#{month.end_of_month}'", params[:id]).
              order('location_id') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T01:19:15.137

为了安全起见，您应该只使用包含参数的首选方式。查看[本指南](http://guides.rubyonrails.org/active_record_querying.html#conditions)：

> 将您自己的条件构建为纯字符串可能会使您容易受到 SQL 注入攻击。例如，`Client.where("first_name LIKE '%#{params[:first_name]}%'")`不安全。有关使用数组处理条件的首选方法，请参阅下一节。

尝试：

```
@arrangements_for_month = Arrangement.joins(:timeslot)
  .where("timeslots.timeslot BETWEEN ? AND ?", month, month.end_of_month)
  .order('location_id') 
```

只是提醒一下，如果您愿意，还有另一种方法可以使用 ruby​​ 范围来定义范围条件，如链接指南的该部分所述：

```
Client.where(:created_at => (Time.now.midnight - 1.day)..Time.now.midnight) 
```

因此，在不了解您的代码的任何其他信息的情况下，您可能可以执行以下操作：

```
@arrangements_for_month = Arrangement.joins(:timeslot)
  .where("timeslots.timeslot" => month .. month.end_of_month)
  .order('location_id') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T01:24:49.453

是的。每次将用户的输入插入查询字符串时，它都是易受攻击的。如果`month`将是：

```
5' AND '8'; DROP TABLE timeslots;-- 
```

你可能会遇到严重的麻烦。更不用说删除数据库等。

我没有完全复制这个查询，但是由于使用了acts_as_paranoid插件，在我的查询中类似的[我必须添加]：

```
SomeModel.pluck(:id)
 => [1, 2, 4, 3, 5, 6]

abc = 'a\');delete from some_models where id=6;--'
User.where("name = '#{abc}'")
 => []

SomeModel.pluck(:id)
 => [1, 2, 4, 3, 5] # please note that record with id 6 was deleted! 
```

攻击可能的原因是我可以提供`'`和`--`（开始评论）。当你使用建议的方式时，即使用 .where("name = ?", "my_name")，那么攻击就不可能了。看一下这个：

```
abc = 'a\');delete from some_models where id=5;--'

User.where("name = ?", abc)
 => []

SomeModel.pluck(:id)
 => [1, 2, 4, 3, 5] # this time record with id 5 was not deleted 
```

这是第一个查询：

```
 User Load (1.5ms)  SELECT "users".* FROM "users" WHERE ("users"."deleted_at" IS NULL) AND (name = 'a');delete from some_models where id=6;--') 
```

这是第二个

```
 User Load (1.0ms)  SELECT "users".* FROM "users" WHERE ("users"."deleted_at" IS NULL) AND (name = 'a'');delete from some_models where id=5;--') 
```

请注意`'`第二个中的附加内容-`query(name = 'a'')`

# c# - 使用数据网格的局部视图

> ID：15399470
> 
> 赞同：0
> 
> 时间：2013-03-14T01:13:15.783
> 
> 标签：c#, asp.net-mvc

我试图调用两个局部视图，但我的程序试图在我传递一个搜索参数之前填充我的网络网格。在将搜索框中的文本传递给它之前，我无法弄清楚如何阻止它尝试呈现 webgrid。这是我的部分观点：

```
<div class="webgrid-wrapper">
    <div class="webgrid-title">Values</div>
    <div id="grid">
        @grid.GetHtml(
tableStyle: "webgrid",
        headerStyle: "webgrid-header",
        footerStyle: "webgrid-footer",
        alternatingRowStyle: "webgrid-alternating-rows",
        columns: grid.Columns(
            grid.Column("Id", "ID"),
            grid.Column("Name", "Name")
        )
        )
</div>
</div>
</div> 
```

这是我的主页视图，我将两个部分视图都拉入：

```
 <section class="featured">
    <div class="content-wrapper">
        <hgroup class="title">
            <h1>@ViewBag.Title</h1>
            <h2>@ViewBag.Message</h2>
        </hgroup>
    </div>
</section>
@using (Html.BeginForm("Analysis", "Home", "POST"))
{
<div class="searchField">
    <div class="searchbox">
        Search: <input type="text" name="Search" />
        <input type="submit" value="Submit">
    </div>
</div>
}

 @Html.Partial("PartialChemAnalysis")
 @Html.Partial("PartialSlagView") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:46:20.183

您可以通过检查搜索参数是否有值来执行此操作，如果没有，则不必渲染网格。

在你的控制器中

```
public ViewResult Analysis(string search) {
        ViewBag.DisplayGrid = !string.IsNullOrEmpty(search);
        //do you logics then return
    } 
```

在你看来

```
 @if (ViewBag.DisplayGrid != null && ViewBag.DisplayGrid) {
        //Render your partial since its true.
          @Html.Partial("PartialChemAnalysis")
          @Html.Partial("PartialSlagView")
     } 
```

在初始加载或没有搜索参数时。viewbag 将设置为 false，并且您的部分将不会被渲染。如果搜索参数有值，将呈现。

# php - Importing MySQL Data into Single Bootstrap Modal Box?

> ID：15399477
> 
> 赞同：2
> 
> 时间：2013-03-14T01:13:42.713
> 
> 标签：php, jquery, twitter-bootstrap, modal-dialog

Had such great success with my last question, thought I'd try another.

I'm building a "dashboard" for the company I work for, a printing facility. This dashboard will list all of the current jobs in progress, jobs completed, etc. (It will really make life better for everyone there).

I have all of my customer information pulled from a MySQL Database using a PHP query and displayed into a DataTable using a PHP while loop. I have an edit button at the end of each row that opens up a Modal box, displaying and allowing the printer to enter information and update the database.

This was working, but I began to think... all is well with only a handful of customers plugged in, but once we have 1,000+ customers, each given a Modal box (from the PHP while loop) it's going to get overwhelming.

Can anyone explain to me, if it is even possible, to have a single Modal Box code on the page that pulls the exact customer data into it when the link is clicked, launching the box.

**Button Launching The Modal (This is in a PHP while loop):**

```
<a class=\"btn btn-info\" data-toggle=\"modal\" data-target=\"#modal_id\"
href=\"display=" . $row['id'] . "\">
<i class=\"icon-question-sign icon-white\"></i>  
</a> 
```

**Modal Code Itself (NOT in PHP while loop):**

```
<div class="modal hide fade" id="modal_id">
   <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal">×</button>
       <h3>Project Details</h3>
   </div>
   <div class="modal-body">

       ID is <?php echo $display ?>

   </div>
   <div class="modal-footer">
       <a href="#" class="btn btn-primary" data-dismiss="modal">Save Changes</a>
       <a href="#" class="btn" data-dismiss="modal">Close</a>
   </div>
</div> 
```

The text inside just reads: ID is The variable isn't being passed through the buttons href.

Any solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:37:49.697

I would say the most straightforward approach is AJAX.

1.  Create an endpoint that you can pass an id to that will display the relevant projct info (something like yoursite/projects/5 would return data about project with ID of 5)
2.  Use AJAX to send the ID to that endpoint and retrieve back the user data
3.  Put that data into the modal as it's being displayed.

Change your links to buttons

```
<button class="project-button btn btn-info" data-toggle="modal" data-target="#modal_id" data-project-id="<?=$row['id']?>">
  <i class="icon-question-sign icon-white"></i>  
</button> 
```

Example of the AJAX call

```
var modal_body = $('#modal_id .modal-body');
$('.project_button').on('click', function() {
  var project_id = $(this).data('projectId');
  $.get('/project/', { id: project_id }, function(data) {
    // Populate modal
    modal_body.html(data);
  }
} 
```

Obviously you would need to create the other page that creates the html that would get returned to be displayed. There are other things you could do like display a loading animation while the data gets loaded into the modal. But this should be a good starting point fo you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T16:50:32.697

Best way would be using `AJAX`, so that you can pass `id` to another page of your choice

I found same problem being solved here with full explanation: [http://thecomputerstudents.com/web/using-bootstrap-modal-ajax-import-data-mysql/](http://thecomputerstudents.com/web/using-bootstrap-modal-ajax-import-data-mysql/)

# ubuntu - 使用 package.substvars 定义二进制包描述而不会被 debhelper 脚本破坏？

> ID：15399483
> 
> 赞同：2
> 
> 时间：2013-03-14T01:14:14.097
> 
> 标签：ubuntu, debian, deb

好的，所以我有一个看起来像这样的 debian/rules 文件：

```
#!/usr/bin/make -f

PACKAGE = packagename
SRC_VERSION := $(shell grep version setup.py | awk -F [\'] '{print $$2}')
TARBALL = $(PACKAGE)_$(SRC_VERSION).orig.tar.gz
.PHONY: get-orig-source

%:
        # Adding the required helpers
        dh $@ --with python2

get-orig-source:
        python setup.py sdist --formats=gztar
        mv dist/*gz ../$(TARBALL)
        echo "  "$(TARBALL)" created" 
```

忽略我奇怪的获取源代码操作。我最终想动态更改二进制包的 debian/control 文件中的描述字段。我的理解是我需要将变量定义添加到 packagename/debian/ 中的 packagename.substvars 中。但是，因为我的简单 dh $@ --with python2 动态生成该文件，所以我可以添加的任何内容现在都与 dh 进程竞争。

所以我对stackoverflow的好人的问题变成了......

如果我想使用 substvars 动态定义二进制包描述，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:10:32.730

任何包准备工具都可以附加到 substvars 文件中；只要确保，如果你正在使用 debhelper，你在`dh_prep`被调用后执行它，因为这会擦除`debian/*.substvars`周围的所有文件。

如果您愿意，如果您担心干扰 debhelper（或 debhelper 干扰您），您甚至可以使用您自己的 substvars 文件。只需将 substvar 文件名添加到参数中`dh_gencontrol`，如下所示：

```
override_dh_gencontrol:
        dh_gencontrol -- -Tpath/to/my/substvars 
```

请参阅`man deb-substvars`、`man dpkg-substvars`和`man dh_substvars`了解更多信息。

# java - 使用对象数组从另一个类调用方法

> ID：15399488
> 
> 赞同：0
> 
> 时间：2013-03-14T01:14:56.030
> 
> 标签：java, object, methods

我收到空指针异常错误，但我不明白出了什么问题。

```
public static void main(String[] args) {
    CDlist CD[] = new CDlist[5];
    CD[0].add();
} 
```

那是我的主要，很简单，它只是创建5个CD对象并调用第一个对象的add方法。

```
public boolean add(){
    String author;
    String title;
    String songTitle;
    int amount;
    boolean result = false;
    if(numUsed < length){
        System.out.println("Please input the name of the CD you wish to add.");
        title = input.next();
        CD[numUsed].title = title;
        System.out.println("Please input the author of the CD you wish to add.");
        author = input.next();
        CD[numUsed].title = title;
        System.out.println("Please input the amount of songs you want to have.");
        amount = input.nextInt();
        for(int i = 0; i<amount; i++){
            System.out.println("Add song name:");
            songTitle = input.next();
            CD[numUsed].song[amount] = songTitle;
        }
        numUsed++;
        result = true;
    }
    return result;
} 
```

这是我在 CDlist 类中的 add 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:17:29.617

问题是

```
 CD[0].add(); 
```

`CD[0]`由于 java 数组的工作方式，为 null：

```
CDlist CD[] = new CDlist[5]; 
```

这分配了一个数组 new `CDList`s 但列表中填充了`null`条目。为了使其包含有效对象，您必须手动填充：

```
CDlist CD[] = new CDlist[5];
for(int i =0; i < 5; i++)
{
    CD[i] = new CDList(); //or other constructor, or other way of getting CD object
} 
```

如果不这样做，数组将只包含任何内容，`null`并且尝试调用该方法将失败，因为您尝试调用它的对象不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:17:07.917

如果您要打印出 CD 阵列，您会看到它如下所示：

> 空，空，空，空，空

您创建了一个大小为 5 的数组，但与 C++ 不同的是，它不调用默认构造函数。您必须将它们全部初始化。

# highcharts - 移动 Highstock 导航器位置

> ID：15399490
> 
> 赞同：3
> 
> 时间：2013-03-14T01:15:05.280
> 
> 标签：highcharts, highstock

是否可以将 Highstock 图表导航器从图表底部移动到顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:15:24.440

是的，有可能，请看示例：http: [//jsfiddle.net/jBUGN/](http://jsfiddle.net/jBUGN/)

```
 navigator: {
        top:40,

    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T08:39:58.200

来自 Sebastian 的升级答案：http: [//jsfiddle.net/Fusher/jBUGN/18/](http://jsfiddle.net/Fusher/jBUGN/18/)而不是为 xAxis 和 yAxis 设置顶部，而是设置 marginTop: 值：

```
var chart = new Highcharts.StockChart({

    chart: {
        renderTo: 'container',
        marginTop: 140
    },

    navigator: {
        top:40,

    },
    rangeSelector: {
        selected: 1
    },

    series: [{
        name: 'USD to EUR',
        data: usdeur
    }]
}); 
```

# google-drive-api - Google 云端硬盘“抱歉，打开此文件时出错。请重试。”

> ID：15399496
> 
> 赞同：4
> 
> 时间：2013-03-14T01:15:49.310
> 
> 标签：google-drive-api

我已经构建了一个与 google drive sdk 集成的网络应用程序。由于几天前用户无法再通过单击 Drive Web 应用程序中的文件名来打开文件，而是收到消息“抱歉，打开此文件时出错。请重试。”。对于如何解决这个问题，我真的很感激一个指向正确方向的指针。

在项目的 API 控制台中启用了 API 访问和 Drive SDK。右键单击->打开方式->选择应用程序，一切正常。当人们直接从我的应用程序访问文件时，一切正常。

当我右键单击文件并查找授权的应用程序时，没有列出任何应用程序。我尝试更改应用程序 OAuth 设置以请求更多许可访问，但不走运。这让我相信授权是可以的，但谷歌驱动器 UI 的某些配置是错误的。我不确定这是否是由我或某些环境更改引起的，但是在能够通过单击打开文件并收到错误的人之间没有任何 URL 或配置发生更改。

谷歌产品论坛似乎建议大文件（>2MB）会发生这种情况，但我们的文件只有几 KB，所以这似乎不是原因。谷歌搜索相关问题，我找不到任何有用的东西。

谁能指出我寻找更多信息的正确方向？驱动器页面表明这是寻求帮助的地方。或者，有没有办法从监控这个标签的谷歌驱动器那里获得商业支持？我已经在这方面浪费了太多时间，我很乐意为一些帮助付费。

# mysql - 让 SQL 计算整个列的总和 - 我相信分组有问题

> ID：15399501
> 
> 赞同：2
> 
> 时间：2013-03-14T01:16:31.160
> 
> 标签：mysql, sql, join, sum

附图显示了结果集，我将在下面留下我的代码 - 为什么我无法计算`viewTotal`每个单元格中整列的总和？我希望`viewTotal`列下的每个单元格都可以读取`4`。

我想这是某种分组问题，尽管我在网上找不到关于哪些列需要分组的具体信息。**保留所有三行很重要 - 我不想只返回一行。**也许这个标准使我想做的事情变得更加困难？

谢谢你，埃文

![结果预览](../Images/d6e22351d21e7a3ea9e0715e9d4ffeb9.png)

```
Select topic_id, topic_subject, SUM(topicViews) as viewTotal, replyCount From
                        (
                        Select 
                            T.topic_id, T.topic_subject, Count(distinct Tvt.id) as topicViews, Count(Distinct R.reply_id) as replyCount, R.reply_id, R.reply_topic
                            From topic T                                                                         
                            LEFT JOIN topic_view_tracker Tvt ON
                                T.topic_id = Tvt.topic_id   
                            LEFT Join reply R ON
                                T.topic_id = R.reply_topic
                            Where   
                            T.topic_by = 10
                            Group By T.topic_id) B
                        Group By topic_id
                        Order by replyCount DESC 
```

样本记录：

**主题**表

```
╔══════════╦════════════════════════════╦══════════╗
║ TOPIC_ID ║       TOPIC_SUBJECT        ║ TOPIC_BY ║
╠══════════╬════════════════════════════╬══════════╣
║       25 ║ School police in the night ║       10 ║
║       29 ║ The first topic, enjoy it  ║       10 ║
║       30 ║ This is a normal title...  ║       10 ║
╚══════════╩════════════════════════════╩══════════╝ 
```

**TOPIC_VIEW_TRACKER**表

```
╔════╦════════════╦══════════╗
║ ID ║  USER_IP   ║ TOPIC_ID ║
╠════╬════════════╬══════════╣
║  1 ║ xx.xx.xx.x ║       25 ║
║  2 ║ xx.xx.xx.x ║       25 ║
║  3 ║ xx.xxx.xxx ║       29 ║
║  4 ║ xxx.xx.xx  ║       30 ║
╚════╩════════════╩══════════╝ 
```

**回复**表

```
╔══════════╦═════════════╗
║ REPLY_ID ║ REPLY_TOPIC ║
╠══════════╬═════════════╣
║        1 ║          25 ║
║        2 ║          29 ║
╚══════════╩═════════════╝ 
```

> 预期输出（示例）：

```
topic_id 主题 主题视图 总回复数
29 第一个话题，好好享受 4 5
夜间 25 名校警 4 4
30 这是一个主题的正常标题... 4 0

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:58:42.277

```
SELECT  x.*, 
        COALESCE(y.viewTotal, 0) viewTotal,
        COALESCE(z.replyCount, 0) replyCount
FROM    topic x
        LEFT JOIN
        (
            SELECT  a.topic_by, COUNT(b.topic_ID) viewTotal
            FROM    topic a
                    LEFT JOIN topic_view_tracker b
                        ON a.topic_ID = b.topic_ID
            GROUP   BY a.topic_by
        ) y ON x.topic_by = y.topic_by
        LEFT JOIN
        (
            SELECT  reply_topic, COUNT(*) replyCount
            FROM    reply
            GROUP   BY reply_topic
        ) z ON  x.topic_ID = z.reply_topic
WHERE   x.topic_by = 10 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fda2e/2)

输出（*基于提供的记录*）

```
╔══════════╦════════════════════════════╦══════════╦═══════════╦════════════╗
║ TOPIC_ID ║       TOPIC_SUBJECT        ║ TOPIC_BY ║ VIEWTOTAL ║ REPLYCOUNT ║
╠══════════╬════════════════════════════╬══════════╬═══════════╬════════════╣
║       25 ║ School police in the night ║       10 ║         4 ║          1 ║
║       29 ║ The first topic, enjoy it  ║       10 ║         4 ║          1 ║
║       30 ║ This is a normal title...  ║       10 ║         4 ║          0 ║
╚══════════╩════════════════════════════╩══════════╩═══════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:43:53.767

如果您需要在每一行上重复总视图，您需要使用这个：

```
Select topic_id, topic_subject, (SELECT Count(distinct id) FROM topic_view_tracker WHERE topic_id = B.topic_id)) AS viewTotal, replyCount From
                        (
                        Select 
                            T.topic_id, T.topic_subject, Count(distinct Tvt.id) as topicViews, Count(Distinct R.reply_id) as replyCount, R.reply_id, R.reply_topic
                            From topic T                                                                         
                            LEFT JOIN topic_view_tracker Tvt ON
                                T.topic_id = Tvt.topic_id   
                            LEFT Join reply R ON
                                T.topic_id = R.reply_topic
                            Where   
                            T.topic_by = 10
                            Group By T.topic_id) B
                        Group By topic_id
                        Order by replyCount DESC 
```

但老实说，我不明白这是为什么。您可以轻松地`SELECT Count(distinct id) FROM topic_view_tracker WHERE topic_id = 10`单独执行，然后执行其余的查询，`topic_view_tracker`完全省略

# php - 更改上传图片的名称

> ID：15399506
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:17:02.247
> 
> 标签：php, image-uploading

我正在开发一个允许用户登录并在网站上上传一些图片的项目，我正在使用 php5\. 我在这里有一个问题，如果 2 个不同的用户将 2 个具有相同名称的图像上传到日期库怎么办。我知道我必须在它们到达数据库后立即重命名它们，我想我可以使用当前时间值来做到这一点，但我确实知道实际代码。如果有人可以帮助我，我真的很合适

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:58:34.563

最好将图像名称发送到数据库，而不是像这样使用日期库的最后一个 id 重命名图像

```
 //////connect////////////////
include_once ("connect_to_mysql.php");

$file = $_FILES['image']['tmp_name'];
$albumid = $_POST['album_id'];

 $maxfilesize = 8000000;

if($_FILES['image']['size'] > $maxfilesize ) { 
        echo "<br /><br />Your image was too large. Must be 8Mb or less, please<br /><br />
        <a href=\"Profilepic.php\">click here</a> to try again";
        unlink($_FILES['uploadedfile']['tmp_name']); 
        exit();

} if (!isset($file))
 echo "Please select an Image.";
 else
 {

    // Check file size, if too large exit and tell them why

$image_name = addslashes($_FILES['image']['name']);
$image_size = getimagesize($_FILES['image']['tmp_name']);

$album_id = $_POST['album_id'];

$id = mysql_insert_id();

if ($image_size==FALSE)
echo "That's Not an Image.";
else
 {

if (!$insert = mysql_query("INSERT INTO image
 VALUES('','$userid','$image_name')"))

echo "Problem Uploading Image Try Again Please";
else{
$id = mysql_insert_id();
//////////take the last inserted id and use as image name/////////
$file = "uploads/$userid/".$id."";

move_uploaded_file($_FILES['image']['tmp_name'], $file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:48:45.573

tmpfile() 将在临时目录中为您提供唯一的文件句柄 - 或 - tempnam() 将在临时目录中为您提供唯一的文件名

使用其中任何一个创建一个唯一的文件以供上传保存，然后您可以根据需要重命名它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:57:39.350

由于您只需要一个概念来制作文件而不会产生任何冲突，因此我建议您使用以下选项。

选项 1：根据需要重命名 将当前用户 ID 放入变量中。

```
$tempName = $userID . "_" . strtotime(date('Y-m-d H:i:s')) . "_" . mt_rand(); 
```

选项 2：单独的位置如果您想保持相同的文件名用户上传。然后将文件存储在每个用户的单独目录中。

你可以使用这样的东西。

```
$dirPath = "path to the user's directory";
if(!file_exists($dirPath))
mkdir($dirPath,0777); 
```

当您上传 apache 将在临时位置生成文件，因此不会重复。

# php - Zend_Controller_Action_Helper_Url 和 Zend_View_Helper_Url 有什么区别？

> ID：15399508
> 
> 赞同：1
> 
> 时间：2013-03-14T01:17:24.120
> 
> 标签：php, zend-framework, routing, controller, helper

我目前正在使用 ZF 1.12.2，并且正在使用 URL 操作帮助程序在我的表单上设置操作属性，但操作帮助程序正在执行数组到字符串的转换。我在下面评论了我被退回的内容：

```
<?php
// application/modules/user/controllers/SignupController.php

class User_SignupController extends Zend_Controller_Action
{
    public function indexAction()
    {
        $form = new User_Form_Signup();

        // This gives me 'user/signup/Array'
        $signup_url = $this->_helper->url(array(
            'module' => 'user',
            'controller' => 'signup',
            'action' => 'register'
        ));

        // This gives me 'user/signup/register', which is what I want
        $signup_view_url = $this->view->url(array(
            'module' => 'user',
            'controller' => 'signup',
            'action' => 'register'
        ));

        $form->setAction(...);
    }

    public function registerAction()
    {

    }
} 
```

我真的不明白为什么会这样。我已经检查了 Zend_Controller_Action_Helper_Url 和 Zend_View_Helper_Url 并且它们的方法是相似的：

```
// get the front controller's router
$router = Zend_Controller_Front::getInstance()->getRouter(); 

// assemble the route
return $router->assemble($urlOptions, $name, $reset, $encode); 
```

我刚刚发现了`Zend_Controller_Action_Helper_Url::simple`可以解决我需求的中间问题，但我仍然对上面返回的内容感到困惑和好奇。

路由器如何使用相同的参数从对同一对象的方法的两个单独调用中组装两条完全不同的路由（一个完全错误）？到目前为止，我还没有在引导程序和配置中添加任何路由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:24:28.437

调用`$this->_helper->url`实际上返回类。当您以这种方式使用参数调用操作助手时，参数将传递给该`direct()`助手的方法。在这种情况下，该`direct()`方法最多需要三个参数，其中第一个应该是操作名称。因此，您遇到问题的原因是帮助程序期望提供一个动作名称，但您提供的是一个数组。

您真正想要的是调用`url()`助手上的方法：

```
$this->_helper->url->url(array(
    'module' => 'user',
    'controller' => 'signup',
    'action' => 'register'
)); 
```

就个人而言，我通常使用“其他”语法在控制器中调用动作助手：

```
$this->getHelper('url')->url(array(
    'module' => 'user',
    'controller' => 'signup',
    'action' => 'register'
)); 
```

我觉得更清楚一点。

# amazon-web-services - cloudbees 和 compojure 数据库连接

> ID：15399514
> 
> 赞同：0
> 
> 时间：2013-03-14T01:17:51.643
> 
> 标签：amazon-web-services, clojure, postgresql-9.1, cloudbees, compojure

我一直在玩 compojure 和 cloudbees。到目前为止，一切都很好。但要做任何有意义的事情，我需要将应用程序（使用 Clickstart 制作）连接到数据库（反之亦然，具体取决于您如何看待它）。这是网站上用于使用他们的 DBaaS 选项的文档：

```
To register this database as a datasource in your application, insert the following XML snippets into your application configuration files.

WEB-INF/cloudbees-web.xml

<resource name="jdbc/landlords" auth="Container" type="javax.sql.DataSource">
 <param name="username" value="db-name" />
 <param name="password" value="db-pasword" />
 <param name="url" value="jdbc:cloudbees://landlords" />
</resource>

WEB-INF/web.xml

<resource-ref>
 <res-ref-name>jdbc/landlords</res-ref-name>
 <res-type>javax.sql.DataSource</res-type>
 <res-auth>Container</res-auth>
</resource-ref> 
```

原谅我，但我看不到 WEB-INF 目录在哪里（或任何 *web.xml 文件）。唯一接近的是 config.xml （我可以发布内容，但到目前为止我认为它不一样）。

具体来说，我正在尝试使用它：[http ://www.enterprisedb.com/cloud-database/amzn-launch-guide-dbaas](http://www.enterprisedb.com/cloud-database/amzn-launch-guide-dbaas)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:19:12.567

文档适用于 JavaEE 应用程序。对于其他堆栈，您应该使用[数据源绑定](http://wiki.cloudbees.com/bin/view/RUN/Resource+Management)。我无法确切说明如何配置 compojure 配置，因为我对这个堆栈一无所知

# java - Jetty 更改/插入不同的“过期”http 标头

> ID：15399517
> 
> 赞同：2
> 
> 时间：2013-03-14T01:18:06.130
> 
> 标签：java, http, servlets

我有一个独立的码头应用程序。过去，对 Jetty 的请求都带有 expires 标头：

```
Expires: Thu, 01 Jan 1970 00:00:00 GMT 
```

这是一个与我设置的不同的过期标题。我无法弄清楚为什么会这样？我在 servlet 过滤器中按如下方式设置过期（以及其他标头）：

```
public class AuthorisationFilter implements Filter {

public void init (FilterConfig config) throws ServletException {
    expires = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
    expires.setTimeZone(TimeZone.getTimeZone("GMT"));
}

public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    // ....
    if(url.endsWith(".eot") || url.endsWith(".ttf") || url.endsWith(".woff")) {
        response.setHeader("Expires", expires.format(new Date(new Date().getTime()+(1000*86400))));
    } else if(url.endsWith(".css") || url.endsWith(".pdf") || url.endsWith(".png") || url.endsWith(".gif") || url.endsWith(".jpg") || url.endsWith(".ico")) {
        response.setHeader("Expires", expires.format(new Date(new Date().getTime()+(1000*500))));
    } else {
        response.setHeader("Expires", "Sat, 6 May 1995 1:00:00 GMT");
    }

chain.doFilter(request, response);
} 
```

我正在注册 servlet 过滤器，如下所示：

```
Server server = new Server(port);
ServletContextHandler context = new ServletContextHandler(server, "/", false, false);

FilterHolder f = new FilterHolder(new UrlFilter(jee));
context.addFilter(f, "/*", null);
f = new FilterHolder(new AuthorisationFilter(jee);
context.addFilter(f, "/*", null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:23:18.210

您可以尝试改用该`setDateHeader()`方法。

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#setDateHeader(java.lang.String,%20long)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#setDateHeader(java.lang.String,%20long))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:23:31.730

一些一般性的建议。

1.  [在访问HttpServletResponse.getOutputStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream%28%29)或[HttpServletResponse.getWriter()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter%28%29)之前设置它

2.  设置日期标题时，如 Expires，使用[HttpServletResponse.setDateHeader(String name, long date)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#setDateHeader%28java.lang.String,%20long%29)

# php - php 或 javascript 中的层次聚类

> ID：15399520
> 
> 赞同：3
> 
> 时间：2013-03-14T01:18:18.193
> 
> 标签：php, javascript, bioinformatics, hierarchical-clustering

我目前正在从事一个生物信息学项目，将分析药物并根据相似性模式对结果进行分组。

为此，我使用欧几里得距离和马氏距离等算法。我目前正在使用库[Clusterfck](http://harthur.github.com/clusterfck/)，但它非常有限，并且完全不默认生成信息。

我想知道 JavaScript 或 PHP 中是否有其他库已经实现了这些计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:31:32.667

在处理真实数据时，我不建议使用 Javascript 或 PHP。两者都被解释和缓慢，并且更适合呈现和显示网络内容。出于同样的原因，除了 clusterfck 之外，您可能不会在 Javascript 中找到太多的库。最好用其他语言进行分析并使用它们来呈现它。

但是，我将分享一些其他语言的库：

*   [scipy中的聚类](http://docs.scipy.org/doc/scipy/reference/cluster.html)
*   [scipy-cluster](http://code.google.com/p/scipy-cluster/) , scipy 的扩展, 做类似的事情
*   [hac](http://sape.inf.usi.ch/hac) , 一个Java实现
*   [快速集群](http://math.stanford.edu/~muellner/fastcluster.html)，用于 R 和 Python

# java - NoClassDefFoundError: groovy/lang/binding

> ID：15399522
> 
> 赞同：4
> 
> 时间：2013-03-14T01:18:39.413
> 
> 标签：java, groovy, jar, classpath

我正在尝试使用 GroovyShell 在 Java 应用程序中评估 Groovy 脚本。

问题：我的程序编译正常，但在运行时给了我一个 NoClassDefFoundError。

测试类.java：

```
import groovy.lang.Binding;
import groovy.lang.GroovyShell;

class TestClass {
    static Binding binding;
    static GroovyShell shell;

    public static void main(String[] args) {
        System.out.println("Hello, world.");
        binding = new Binding();
        shell = new GroovyShell(binding);
        Object value = shell.evaluate("5 ** 5");
    }
} 
```

然后我编译：

> > javac -cp %GROOVY_HOME%\embeddable\groovy-all-2.1.1.jar TestClass.Java
> 
> > jar cfm TestClass.jar Manifest.txt TestClass.class

它编译没有错误。然后我运行它：

> > java -jar TestClass.jar

```
Hello, world
Exception in thread "main" java.lang.NoClassDefFoundError: groovy/lang/Binding
    at TestClass.main(TestClass.java:10)
Caused by: java.lang.ClassNotFoundException: groovy.lang.Binding
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202) 
```

完整的错误文本： http: [//puu.sh/2gOrx](http://puu.sh/2gOrx)

我也尝试使用与编译它相同的 -cp 运行它，但它给了我同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:52:15.367

全局类路径，例如 CLASSPATH 环境和“-cp”选项，如果您正在运行可执行 JAR，则不会生效。有关详细信息，请参阅此帖子：[Does java -jar option alter classpath options](https://stackoverflow.com/a/8396132/2086065)。

[java - Java 应用程序启动器文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)

> 使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

相反，您需要在清单文件中设置 Class-Path。检查以下示例。

文件结构

```
|-- Manifest.txt
|-- TestClass.class
|-- TestClass.jar
|-- TestClass.java
`-- lib
    `-- groovy-all-2.1.1.jar 
```

Manifest.txt（不要忘记为最后一行添加一个新行结尾）

```
Main-Class: TestClass
Class-Path: lib/groovy-all-2.1.1.jar 
```

并在您的问题中执行相同的命令以生成并运行可执行 JAR。有关更多信息，请查看此 wiki 页面：[在清单文件中设置路径](http://en.wikipedia.org/wiki/Classpath_%28Java%29#Setting_the_path_in_a_Manifest_file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-05T08:44:56.580

不要直接运行 JAR，而是将 JAR 加载到`classpath`并指定要运行的类：

```
$ java -classpath $groovyJar:TestClass.jar TestClass 
```

这有点hacky，因为`Main-Class`在清单中指定但随后从命令行获取。从好的方面来说，您不必将其硬编码`Class-Path`到清单中。

自从很久以前提出这个问题以来， [Groovy JAR](http://groovy-lang.org/download.html)的路径已经改变。假设`groovy`在您的**PATH**中，定位 Groovy JAR 的一种方法是：

```
$ groovyHome=$(dirname $(dirname $(which groovy)))
$ groovyJar=$groovyHome/lib/$(basename $groovyHome).jar 
```

结果将是这样的：

```
$ which groovy
/Users/dem/apps/groovy/groovy-2.5.2/bin/groovy
$ echo $groovyJar
/Users/dem/apps/groovy/groovy-2.5.2/lib/groovy-2.5.2.jar 
```

要构建可以在本地测试的 JAR，请创建 Groovy 文件：

**com/example/HelloWorld.groovy**

```
package com.example

class HelloWorld {

   static void main(String[] args) {
      println "Hello, world."
   }

} 
```

然后发出命令：

```
$ groovyc com/example/*.groovy
$ jar cfv HelloWorld.jar com/example/*.class
added manifest
adding: com/example/HelloWorld.class(in = 2829) (out= 1220)(deflated 56%)
$ ls -o
total 8
-rw-r--r--  1 dem  1708 Oct  5 01:15 HelloWorld.jar
drwxr-xr-x  3 dem    96 Oct  5 01:10 com
$ java -classpath $groovyJar:HelloWorld.jar com.example.HelloWorld
Hello, world. 
```

*注意：* Groovy JAR ( `groovy-2.5.2.jar`) 为 5.4MB，最新版本 ( `groovy-3.0.0-alpha-3.jar`) 为 7.5MB。

# android - 如何将下载的图像添加到 ListView？

> ID：15399525
> 
> 赞同：0
> 
> 时间：2013-03-14T01:19:14.483
> 
> 标签：android, listview, android-asynctask, android-image

我正在尝试将下载的图像添加到`ListView`. 我首先从我的服务器获取图像文件的名称，然后我`AsyncTask`构建位图并将它们存储在一个`Bitmap[]`数组中。然后我使用 a`HashMap`添加数据，`SimpleAdapter`如下所示。我想知道如何将位图图像添加到列表视图。

现在我在尝试将项目照片放入哈希映射的行中遇到错误。我该如何解决？我必须将它们移动到`drawable`资源目录吗？我对此完全陌生，并将感谢将下载的图像放入列表视图的任何帮助。这是我准备数据的方式。所有这些都发生在`onPostExecute()`我的异步任务方法中，在该方法中 OI 执行另一个异步任务来获取图像文件。

```
new AccessImages().execute("http://10.0.2.2:8000/herbivorenew/" + viewdata[2]);

List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

for (int i=0;i< count; i++) {
    HashMap<String, String> hm = new HashMap<String,String>();
    hm.put("item_header", viewtext[i]);
    // built from an asynctask from the server
    hm.put("item_photo", (Bitmap)(itemphoto[i]) );
    hm.put("carrots", Integer.toString(carrotimage[i]) );

    aList.add(hm);
}

// Keys used in Hashmap
String[] from = {"item_header", "item_photo", "carrots"};

// Ids of views in listview_layout
int[] to = {R.id.item_header, R.id.item_photo, R.id.item_carrot};

// Instantiating an adapter to store each items
// R.layout.listview_layout defines the layout of each item
SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), 
aList, R.layout.itemlist, from, to);

// Getting a reference to listview of main.xml layout file
ListView item_list = ( ListView ) findViewById(R.id.listitems);
item_list.setAdapter(adapter); 
```

这是我获取下载图像的地方：

```
private class AccessImages extends AsyncTask<String, Void, Bitmap> {

    protected Bitmap doInBackground(String... urladds){
        return downloadImage(urladds[0]);
    }

    protected void onPostExecute(Bitmap bmp) {
        itemphoto[itemcount] = bmp;
        itemcount++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:11:14.810

> 如果您确实喜欢这种方式，则需要花费太多时间。而不是使用延迟加载概念。 [通过点击此链接，您可以解决此问题](https://github.com/thest1/LazyList)

# jquery - CSS3 底层图像无法在 IE 中悬停它在 Firefox 中使用指针事件工作

> ID：15399529
> 
> 赞同：0
> 
> 时间：2013-03-14T01:19:56.573
> 
> 标签：jquery, css

我里面有一张大图，我有 13 张小图。我想将鼠标悬停在图像内，但下面的代码在 Firefox 中有效，但在 IE 8 和 9 中无效。

```
<!DOCTYPE html>
<html>
  <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script type='text/javascript'>
    $(document).ready(function(){

        $(".box").hover(function() {
            $(this).removeClass("box").addClass("boxhover");
                }, function() {
            $(this).removeClass("boxhover").addClass("box");
        });

    });
</script> 
<body>
    <style type="text/css">
        .outside { width: 1000px; height: 771px; position:absolute; z-index:9; background-image:url(eye.png); 
        <!-- pointer-events: none; -->
        ms-filter: 'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=eye.png, sizingMethod=scale)'; } .outsidelowindex { width: 1000px; height: 771px; position:absolute; z-index:-1; background-image:url(eye.png); 
        <!-- pointer-events: none; -->
        ms-filter: 'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=eye.png, sizingMethod=scale)'; } .imagesbox { width:577px; height:575px; padding-top: 92px; padding-left:211px; z-index:1; } .imagea { background-color: #fff; width:58px; height:115px; float:left; } .imageb { background-color: #fff; width:53px; height:115px; float:left; } .imagec { background-color: #fff; width:55px; height:116px; float:left; } .imaged { background-color: #fff; width:53px; height:116px; float:left; } .image1 { width:278px; height:115px; float:left; position:relative; overflow:hidden; } .image2 { width:188px; height:115px; float:left; overflow:hidden; } .image3 { width:204px; height:113px; float:left; overflow:hidden; } .image4 { width:180px; height:113px; float:left; overflow:hidden; } .image5 { width:193px; height:113px; float:left; overflow:hidden; } .image6 { width:158px; height:116px; float:left; overflow:hidden; } .image7 { width:254px; height:116px; float:left; overflow:hidden; } .image8 { width:165px; height:116px; float:left; overflow:hidden; } .image9 { width:214px; height:115px; float:left; overflow:hidden; } .image10 { width:231px; height:115px; float:left; overflow:hidden; } .image11 { width:132px; height:115px; float:left; overflow:hidden; } .image12 { width:221px; height:116px; float:left; overflow:hidden; } .image13 { width:248px; height:116px; float:left; overflow:hidden; } .box { z-index: 5; transform: scale(1); -moz-transform: scale(1); -webkit-transform: scale(1); transition: background-color 1s, box-shadow 1s, transform 0.5s; -moz-transition: background-color 1s, -moz-box-shadow 1s, -moz-transform 0.5s; -webkit-transition: background-color 1s, -webkit-box-shadow 1s, -webkit-transform 0.5s; } .boxhover { z-index: 10; box-shadow: 0 0 15px #000; -moz-box-shadow: 0 0 15px #000; -webkit-box-shadow: 0 0 15px #000; transform: scale(1.1); -moz-transform: scale(1.1); -webkit-transform: scale(1.1); } 
    </style>
    <div class="outside"></div>
    <div class="imagesbox">
        <div class="imagea"></div>
        <div class="image1 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image2 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <!--   <div class="imageb"></div> -->
        <div class="image3 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image4 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image5 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image6 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image7"></div>
        <div class="image8 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image9 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image10 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image11 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <!--  <div class="imagec"></div> -->
        <div class="image12 box">
            <a href="#"><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
        <div class="image13 box">
            <a href=""><img
                    src="" alt="Impact
                    2018" /></a>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:36:58.597

您的`.outside`元素位于图像上方。任何试图将鼠标悬停在图像上的人实际上都是在`.outside`元素上悬停。IE 10 及更低版本也不支持`pointer-events`。`Pointer-events`可以解决您的问题，但它们[*目前*尚未得到广泛支持](http://caniuse.com/#feat=pointer-events)。

我也许可以帮助您找到解决方法，但您需要解释您要完成的工作。

# ruby - ruby，“匹配”：UTF-8 中的无效字节序列

> ID：15399530
> 
> 赞同：6
> 
> 时间：2013-03-14T01:19:57.897
> 
> 标签：ruby, utf-8

我对 UTF-8 编码有一些问题。我在这里阅读了一些帖子，但它仍然无法以某种方式正常工作。

那是我的代码：

```
#!/bin/env ruby
#encoding: utf-8

def determine
  file=File.open("/home/lala.txt")          
  file.each do |line|           
    puts(line)
    type = line.match(/DOG/)
    puts('aaaaa')

    if type != nil 
      puts(type[0])
      break
    end        

  end
end 
```

那是我文件的前 3 行：

```
;?lalalalal60000065535-1362490443-0000006334-0000018467-0000000041en-lalalalallalalalalalalalaln Cell Generation
text/lalalalala1.0.0.1515
text/lalalala�DOG 
```

当我运行此代码时，它会在读取文件的第三行（单词 dog 所在的位置）时向我显示一个错误：

```
;?lalalalal60000065535-1362490443-0000006334-0000018467-0000000041en-lalalalallalalalalalalalaln Cell Generation
aaaaa

text/lalalalala1.0.0.1515
aaaaa

text/lalalala�DOG
/home/kik/Desktop/determine2.rb:16:in `match': invalid byte sequence in UTF-8 (ArgumentError) 
```

但是：如果我只运行具有以下内容的确定函数：

```
#!/bin/env ruby
#encoding: utf-8

    def determine
    type="text/lalalala�DOG".match(/DOG/)
    puts(type)
end 
```

它完美地工作。

那里出了什么问题？提前致谢！

编辑：文件中的第三行是：

```
text/lalalal»DOG 
```

但是当我在 ruby​​ 中打印文件的第三行时，它显示如下：

```
text/lalalala�DOG 
```

编辑2：

> 这种格式也是为了支持本地化而开发的。存储在文件中的字符串存储为 2 字节的 UNICODE 字符。文件的格式是二进制文件，数据以网络字节顺序（大端格式）存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:14:37.953

我相信@Amadan 很接近，但它倒退了。我会这样做：

```
File.open("/home/lala.txt", "r:ASCII-8BIT") 
```

该字符不是有效的 UTF-8，但出于您的目的，看起来 8 位 ASCII 可以正常工作。我的理解是，当您只使用字符串时，Ruby 默认使用该编码，这就是它起作用的原因。

**更新：**根据您最近的评论，听起来这就是您需要的：

```
File.open("/home/lala.txt", "rb:UTF-16BE") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:52:44.847

尝试使用这个：

```
File.open("/home/lala.txt", "r:UTF-8") 
```

在某个阶段使用错误的编码似乎存在问题。`#encoding :utf`仅指定源文件的编码，这会影响文字字符串的解释方式，并且对`File.open`使用的编码没有影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-20T13:26:49.737

**文件数量较少的简单解决方案：**

@Katja 在一些文本编辑器中打开文件，然后单击另存为选项并将其格式更改为 UTF-8，然后单击确定。将显示弹出窗口以替换或创建新的。替换现有文件即可。

# python - 如何在不安装的情况下启动 Python 应用程序？

> ID：15399532
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:20:05.603
> 
> 标签：python, installation, py2exe

我有 python 脚本。它们必须在没有 python 的机器上运行，所以我使用 py2exe 将 py 脚本编译为可执行文件。应安装带有 py2exe 的 Python 以执行编译。但我希望能够在没有安装 python 的任何机器上编译它。

那么，有没有什么方法可以在不安装的情况下在 Windows 上运行 python 应用程序？

**UPD。我知道由 py2exe 编译的二进制文件将在没有 python 的情况下运行。我在问如何在没有 python 的情况下启动 py2exe？**

好的，答案很明确——没有办法。我们回到第一个问题：

**UPD2。如何在不安装的情况下运行 python（在其上启动 py2exe）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:33:29.750

阅读常见问题解答：

> py2exe 不能独立执行（不幸的是），所以你首先像往常一样安装 Python 包，然后在 setup.py 脚本中创建一个部分。然后只需使用相应的命令运行 distutils 即可。

[http://www.py2exe.org/index.cgi/FAQ](http://www.py2exe.org/index.cgi/FAQ)

但是您可以在不安装 python 的情况下运行它： [http ://www.portablepython.com/](http://www.portablepython.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:26:02.480

使用 py2exe 生成的二进制文件不需要在部署程序的机器上安装 python。bbfreeze、pyinstaller 和 cxfreeze 也是如此。如果您遇到错误，您可能隐藏了导入或其他未解决的依赖项，这些依赖项未正确捆绑到您的可执行文件中。

# algorithm - 正加权有向无环图中的k-边最短路径

> ID：15399538
> 
> 赞同：1
> 
> 时间：2013-03-14T01:21:03.373
> 
> 标签：algorithm, shortest-path, directed-acyclic-graphs

我得到一个图，G = (V, E)，它是正加权的、有向的和非循环的。我要设计一个在 O(k(m + n)) 中运行的算法，用于报告从 s 到 t 的 k 边最短路径。k 边最短路径定义为从 s 到 t 的具有 k 条边的路径，并且对于从 s 到 t 的所有路径，该路径的总权重也必须是最小的。

由于 BFS 不能单独用于查找最短路径（除非权重相等），我认为运行时间意味着使用 BFS 查找具有 k 个边的路径。让我失望的是 k，因为我认为这意味着执行 BFS k 次。

我可能的想法是从源运行 BFS 以查找所有可能的 k-link 路径。通过跟踪沿途的关卡并在将每个节点添加到队列时存储总路径权重，我可以找到所有可能的 k-link 路径及其权重。显然，如果我遇到具有较低路径权重的较低级别的目的地，则根据定义不存在 k 边最短路径。如果有超过 k 个边的路径总权重较小，那该怎么办？它也不是 O(k(m + n))。任何有用的提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:31:46.587

让是从到`f[i][j]`的 i-link 最短路径，最初我们有`s``j`

```
f[1][x] = e(s, x); 
```

然后迭代`K - 1`次数，每一轮我们`f[i][]`用来计算`f[i + 1][]`，这可以通过

```
for each node v:
    f[i + 1][v] = INF;
for each edge e[u][v]:
    f[i + 1][v] = min(f[i + 1][v], f[i][u] + e[u][v]); 
```

因此采取`O(k(n + m))`.

# opencv - 基于光流的分割

> ID：15399541
> 
> 赞同：3
> 
> 时间：2013-03-14T01:21:20.033
> 
> 标签：opencv, image-segmentation, object-detection, opticalflow

您好我想根据光流分割视频序列中的对象（[如this answer中所建议](https://stackoverflow.com/a/7820217/900253)），我正在使用opencv并且已经能够使用[calcOpticalFlowFarneback](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html)函数为两个连续的帧生成流场。有人能解释一下我将如何根据这个流场分割图像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:36:17.193

由于您想使用光流来分割对象，因此您的决策将基于您的对象所进行的运动类型...您可以[在 youtube 上观看此视频](http://www.youtube.com/watch?v=MOaKnCSejXQ)。您可以测量每个感兴趣像素在两个连续帧中所经历的位移的方向和幅度，以了解它们的运动模式。在视频链接中，汽车是根据光流从背景中分割出来的……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T11:11:36.477

一种非常直接的方法是为算法提供具有基本事实的关键帧。这意味着，手动分割第一帧（您可以在此处使用抓取），然后使用光流将分割传播到后续帧。

需要注意的是，光流以容易出错而闻名。因此，您可以侵蚀（使用一些结构元素）传播的分割并将侵蚀的图像用作抓取的前景种子，而不是直接使用传播的分割。同样，扩大传播的分割并使用围绕扩张边界的带作为背景种子。

简而言之：对于第一帧给出基本事实，使用它在后续帧上自动执行抓取。

这有帮助吗？

# java - Java，将 GUI 与 ActionListener 类分开

> ID：15399544
> 
> 赞同：1
> 
> 时间：2013-03-14T01:21:49.060
> 
> 标签：java, awt, actionlistener

如果我想将 ActionListener 的实现与我的 GUI 类分开，我很难理解它，我该怎么做？该程序是一个简单的计算器。我试图想到一个只有按钮的 GUI 类（边界），然后是一个单独的类（控制）来处理所有动作事件（按钮按下）。我可以创建一个 Control 类型的私有变量并让它以这种方式工作吗？如果您知道如何请帮助:)

控制类

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.*;
import java.awt.*;

public class Boundary extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private JPanel northPanel;
    private JPanel southPanel;
    private Control control;

    public Boundary()
    {
        super("Calculator");

        getContentPane().setLayout(new BorderLayout());

        northPanel = new JPanel(); northPanel.setLayout(new BorderLayout());
        southPanel = new JPanel(); southPanel.setLayout(new GridLayout(4,4));
        control = new Control();

        JTextField numberField = new JTextField(20);
        JTextField operationField = new JTextField(1);

        JButton button1 = new JButton("1");
        JButton button2 = new JButton("2");
        JButton button3 = new JButton("3");
        JButton button4 = new JButton("4");
        JButton button5 = new JButton("5");
        JButton button6 = new JButton("6");
        JButton button7 = new JButton("7");
        JButton button8 = new JButton("8");
        JButton button9 = new JButton("9");
        JButton button0 = new JButton("0");
        JButton buttonequal = new JButton("=");
        JButton buttonclear = new JButton("C");
        JButton buttonplus = new JButton("+");
        JButton buttonminus = new JButton("-");
        JButton buttondivide = new JButton("/");
        JButton buttonmultiply = new JButton("*");

        button1.addActionListener(control);
        button2.addActionListener(control);
        button3.addActionListener(control);
        button4.addActionListener(control);
        button5.addActionListener(control);
        button6.addActionListener(control);
        button7.addActionListener(control);
        button8.addActionListener(control);
        button9.addActionListener(control);
        button0.addActionListener(control);
        buttonequal.addActionListener(control);
        buttonclear.addActionListener(control);
        buttonplus.addActionListener(control);
        buttonminus.addActionListener(control);
        buttondivide.addActionListener(control);
        buttonmultiply.addActionListener(control);

        northPanel.add(numberField, BorderLayout.CENTER);
        northPanel.add(operationField, BorderLayout.EAST);

        southPanel.add(button1);
        southPanel.add(button2);
        southPanel.add(button3);
        southPanel.add(buttondivide);
        southPanel.add(button4);
        southPanel.add(button5);
        southPanel.add(button6);
        southPanel.add(buttonmultiply);
        southPanel.add(button7);
        southPanel.add(button8);
        southPanel.add(button9);
        southPanel.add(buttonminus);
        southPanel.add(buttonclear);
        southPanel.add(button0);
        southPanel.add(buttonequal);
        southPanel.add(buttonplus);

        numberField.setVisible(true);
        numberField.setEditable(false);
        operationField.setVisible(true);
        operationField.setEditable(false);

        getContentPane().add(northPanel, BorderLayout.NORTH);
        getContentPane().add(southPanel, BorderLayout.CENTER);

        setLocation(300,300);
        setSize(400,400);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

} 
```

控制类

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;

public class Control implements ActionListener {

    private JButton button;

    Control()
    {

    }

    @Override
    public void actionPerformed(ActionEvent arg0) {

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:51:05.213

在一系列`if`语句中，检查“操作命令”：

```
public void actionPerformed(ActionEvent evt) {
    String cmd = evt.getActionCommand();

    if("1".equals(cmd))
        // button1 was pressed
    else if("2".equals(cmd))
        // button2 was pressed
    . . . 
```

如建议的那样， an`Action`会将所有内容分开保存，因此更具可读性。以下是如何使用`Action`（或它的子类`AbstractAction`）：

```
Action button1 = new AbstractAction("1") {
    public void actionPerformed(ActionEvent evt){
        // button one pressed
    }
};
Action button2 = new AbstractAction("2") {
    public void actionPerformed(ActionEvent evt){
        // button two pressed
    }
};

southPanel.add(button1);
southPanel.add(button2); 
```

The `add` method, will convert it to a `JButton`, and set it as the listener.

# search - 如何在 dnn 模块的搜索中显示图像

> ID：15399545
> 
> 赞同：1
> 
> 时间：2013-03-14T01:22:15.853
> 
> 标签：search, dotnetnuke, dotnetnuke-module

在 DNN 模块中`ISearchable`，是否可以返回带有搜索结果的图像？

该类`SearchItemInfo`有一个`int Image`参数，但似乎没有在任何地方描述如何使用它。

```
public SearchItemInfoCollection GetSearchItems(ModuleInfo ModInfo)
{
    var SearchItemCollection = new SearchItemInfoCollection();
    using (IDataContext ctx = DataContext.Instance())
    {
        var controller = new ProductSetController();
        foreach (var product in controller.GetProductSets())
        {
            var SearchItem =
                new SearchItemInfo(product.Name, product.Summary, 0,
                        DateTime.Now, ModInfo.ModuleID, product.Code,
                        product.Description, "pid=" + product.Id.ToString(), 0);
            SearchItemCollection.Add(SearchItem);
        }
    }
    return SearchItemCollection;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:21:54.613

SearchItemInfo 似乎有一个 ImageField 属性，但目前在 DotNetNuke 的搜索结果模块中没有使用它。请在下面找到 DotNetNuke 的 SearchResult.ascx 用户控件的链接。

[SearchResults 用户控制源](http://dotnetnuke.codeplex.com/SourceControl/changeset/view/71579#1229846)

# php - 显示 mysql 列的计数值？

> ID：15399548
> 
> 赞同：0
> 
> 时间：2013-03-14T01:22:32.833
> 
> 标签：php, mysql

我正在尝试从我的表中的列中显示计数值。

我的表名为 ptb_forum，它看起来像这样：

```
id  |  from_user_id  |  content  |  title  |  read_forum  | deleted

1           3            hello      test           20          0
2           6            bored      hello          40          0 
```

我基本上是想通过使用这个 mysql 代码来获取 read_forum 中的数字（所以 20 或 40 或其他）以在 php 中回显：

```
function check_new_forum2() {
            global $connection;
            global $_SESSION;
            $query = "SELECT COUNT(id) read_forum FROM ptb_forum WHERE ptb_forum.read_forum=ptb_forum.from_user_id AND ptb_forum.deleted='0' 
        ";
            $check_new_forum_set2 = mysql_query($query, $connection);
            confirm_query($check_new_forum_set2);
            return $check_new_forum_set2;       
        } 
```

并使用此 php 回显结果：

```
$check_new_forum_set2 = check_new_forum2();
while ($newf = mysql_fetch_array($check_new_forum_set2)) {

    echo "<div class=\"forum_comments\">". $newf['COUNT(id)'] ."&nbsp;Views</div>";
 } ?> 
```

目前没有任何回应，我不知道我哪里出错了，我是 mysql 新手，只是在学习计数，有人可以告诉我我哪里出错了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:31:49.563

因为您之间没有逗号`SELECT COUNT(id)`，`read_forum`您的 sql 正在执行此操作

```
SELECT COUNT(id) AS read_forum 
```

**因此，如果 read_forum 是一列，则**需要使用或执行此操作：`$newf['read_forum']`

 **```
SELECT COUNT(id) AS c, read_forum 
```

并使用

```
$newf['c'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:26:41.213

您应该检查`$query`它是否返回 false。如果是这样，则您的 SQL 中有错误。

也许 select 语句应该是这样的：

```
SELECT COUNT(id), read_forum FROM ptb_forum
WHERE ptb_forum.read_forum=ptb_forum.from_user_id
AND ptb_forum.deleted=0 
```

如果 ptb_forum.deleted 是数字而不是字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:31:45.990

使用`$newf['read_forum']`而不是`$newf ['count(id)']`
我认为在查询中没有使用 count(Id)**

# node.js - 使用 Express Route 使用来自 Mongoose 的数据填充主干木偶视图

> ID：15399561
> 
> 赞同：3
> 
> 时间：2013-03-14T01:23:50.967
> 
> 标签：node.js, rest, mongoose, marionette

我试图使用存储在 mongo/mongoose 中的数据的节点/快速路由来获取数据/api，并将其显示在 Backbone Marionette 中......

我使用的路线是这样的：

```
enter code here`app.get('/cats', function(req, res){
Cat.find({}, function (err, docs) {
res.send(docs);
  });
}); 
```

2）当我去 localhost:3000/cats 时，我得到的 json 工作如下：

```
[
{
"__v": 0,
"_id": "51318ce9a7ff43f808000003",
"catname": "Jonas"
},
{
"catname": "Justin",
"_id": "51416268a8225e7413000001",
"__v": 0
},
{
"catname": "Bobby",
"_id": "51416268a8225e7413000001",
"__v": 0
}
] 
```

3）现在我怎样才能让集合/模型/项目视图/等使用我数据库中的这个 json 数据？

我通常会做到这一点：

```
MyCat = Backbone.Model.extend({});

MyCats = Backbone.Collection.extend({
model: MyCat,
url: '/cats'
});

CatView = Backbone.Marionette.ItemView.extend({
template: "#cats-template",
tagName: 'li',
className: 'cat'
});

AngryCatsView = Backbone.Marionette.CompositeView.extend({
tagName: "ul",
id: "cats",
template: "#cats-template",
itemView: CatView,

appendHtml: function(collectionView, itemView){
collectionView.$("ul").append(itemView.el);
}
}); 
```

但是我不确定要使用哪种类型的初始化程序。我见过硬编码 json 的例子，但没有一个来自 db。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:39:16.573

不确定这是否适用于您的情况，但在您的收藏中，添加一个接受您的数据的解析方法。您可能有一个 Backbone 无法从中检索内部数据的嵌套数组。

```
parse: function(data) {
  return data[0];
} 
```

我将在此解析方法中添加一个调试点，以查看传入的数据是否嵌套数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T06:05:36.863

在您发布的代码中，您实际上没有从服务器获取您的集合。

尝试这样做：

```
var catCollection = new MyCats();
catCollection.fetch();

var angryCatsView = new AngryCatsView({collection: catCollection});
angryCatsView.render(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:48:56.517

问题是... var thecats= myCats(); thecats.fetch(); 希望它可以帮助某人

# django - Django 抱怨在编辑条目时字段不是唯一的

> ID：15399563
> 
> 赞同：1
> 
> 时间：2013-03-14T01:23:59.637
> 
> 标签：django, django-models, django-admin

模型.py

```
class SwagKey(BaseModel):
    key = models.CharField(max_length=255, unique=True, blank=False)
    keytype = models.CharField(max_length=255, default="tshirt")
    user = models.ForeignKey(User, null=True, blank=True, default=0) 
```

管理员.py

```
class SwagForm(ModelForm):
    keytype = forms.ChoiceField(widget = forms.Select(), choices = ([('tshirt','tshirt'), ('jacket','jacket'),('backpack','backpack'), ]), initial='3', required = True,)
    class Meta:
        model = SwagKey

class SwagAdmin(admin.ModelAdmin):
    list_display = ['key','keytype', 'user']
    fieldsets = [
        ("Keys",        {"fields": ['key', 'keytype']}),
        ("User",        {"fields": ['user']})
    ]
    form = SwagForm

admin.site.register(SwagKey, SwagAdmin) 
```

当我创建一个条目时，一切都很好。但是，当我尝试编辑以将“密钥”分配给用户时，它会抱怨“带有此密钥的 Swag 密钥已经存在。”，即使这是使用此密钥的唯一条目。如果我更新其任何字段，如何使该字段唯一但不抱怨？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:01:58.933

使用 OSQA 的 BaseModel 类遇到此问题，可以在此处找到源： [https ://github.com/Syerram/osqa/blob/master/forum/models/base.py](https://github.com/Syerram/osqa/blob/master/forum/models/base.py)

# internet-explorer - 运行 watir-webdriver 时有什么好方法可以加速 IE

> ID：15399565
> 
> 赞同：2
> 
> 时间：2013-03-14T01:24:20.113
> 
> 标签：internet-explorer, watir, watir-webdriver

我正在运行一套大约 200 个测试用例，运行 Chrome 大约需要 45 分钟。当我使用 IE 时，测试需要将近 2 个小时，并且会遇到来自超时的间歇性错误。

我已经读过关闭屏幕截图会有所帮助，但这似乎并没有太大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:48:34.393

据我所知，运行测试的唯一显着时间改进是并行运行它们。另一种选择是参与[Internet Explorer 驱动程序](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)的开发并使其更快。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:55:44.547

使测试在 IE 上运行得更快的其他方法之一是使用[watir-classic](http://github.com/watir/watir-classic)。这仅在您没有使用太多 watir-webdriver 特定的东西时才有效 - 例如，不在您的测试中直接访问底层的 selenium-webdriver 驱动程序实例等等。如果您使用的是公共 API，那么它应该可以很好地工作。

我不知道如何让测试在 Windows 上并行运行，因为流行的库[parallel_tests](https://github.com/grosser/parallel_tests)在这个平台上不起作用。

# r - 创建栅格图层

> ID：15399570
> 
> 赞同：-2
> 
> 时间：2013-03-14T01:24:36.257
> 
> 标签：r, layer, raster, sampling

我正在尝试从包含列中物种名称、经度和纬度的矩阵创建栅格图层。

数据名称为“base”，当我尝试使用`base`命令创建范围为 的栅格图层时

```
r<-raster(base) 
```

我收到一个错误：

```
Error en .local(x, ...) : list has no "x" 
```

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:45:33.863

你没有给我们太多继续，但你可能想试试这个（下面的例子*假设*你的坐标数据是使用 WGS84 数据的经纬度格式。如果它不是你的点在 2- D空间会出错，所以请尝试查找您的投影信息...

```
require( sp )
require( raster )
require( maptools )

#Some dummy data in the format you have described
base <- data.frame( longitude = sample( c(-20:20) , 10 ) , latitude = sample( c(-30:30) , 10 ) , species = sample( letters[1:3] , 10 , repl = TRUE ) )
head( base )
#     longitude latitude species
#   1       -10        7       a
#   2         3       14       b
#   3        -9       29       b
#   4        -8      -25       a
#   5         0      -19       b
#   6       -19       19       c

#Make spatial points dataframe, which will have a spatial extent
spdf <- SpatialPointsDataFrame( base[ c("longitude" , "latitude") ] , data = data.frame( base$species ) , proj4string = CRS("+proj=longlat +datum=WGS84") )

#make raster based on the extent of your data
r <- raster( extent( spdf ) )
r
#   class       : RasterLayer 
#   dimensions  : 10, 10, 100  (nrow, ncol, ncell)
#   resolution  : 3.3, 5.8  (x, y)
#   extent      : -20, 13, -29, 29  (xmin, xmax, ymin, ymax)
#   coord. ref. : NA 
#   values      : none 
```

# javascript - Google Adsense 在页面上破坏 JavaScript：不安全的 JavaScript 尝试使用 URL 访问框架

> ID：15399579
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:25:28.860
> 
> 标签：javascript, adsense

我的主页加载正常，滑块和 adsense：[http ://www.thiswebguy.com/](http://www.thiswebguy.com/)

现在，如果您查看类别页面并打开控制台，看起来 Adsense 给我带来了问题？[http://www.thiswebguy.com/category/seo/onpage-seo/](http://www.thiswebguy.com/category/seo/onpage-seo/)

我收到的确切错误是：

```
Unsafe JavaScript attempt to access frame with URL  http://www.thiswebguy.com/category/seo/on-page-seo-seo/ from frame with URL  http://googleads.g.doubleclick.net/pagead/html/r20130311/r20130206/zrt_lookup.html.  Domains, protocols and ports must match. 
```

即使您查看主页上的控制台日志 - 显然有很多 JavaScript 错误都是由 Google 引起的！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:27:09.263

我禁用了 JavaScript 并使用 Chrome 加载了主页，`Version 27.0.1444.3 dev-m`.

将鼠标悬停在滑块的缩略图部分上时，会显示缩略图。

加载“On Page SEO”页面（再次禁用 JavaScript）后，前三个缩略图似乎丢失了。

看起来可能是导致该问题的页面预 JavaScript/滑块初始化存在问题。

# java - android.widget.textview 不能转换为 android.widget.radiogroup

> ID：15399580
> 
> 赞同：0
> 
> 时间：2013-03-14T01:25:32.390
> 
> 标签：java, android, eclipse, textview

我不断收到错误，我似乎无法修复它。我已经尝试移动代码并在互联网上搜索答案，到目前为止我还没有找到任何答案。请帮助我，我将非常感激。顺便说一句，如果我问了一个愚蠢的问题，我对此很抱歉。我不断收到错误，我似乎无法修复它。

这是我的 TutorialOne 课程 -

```
package com.chicas.thebasics;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;

public class tutorialOne extends Activity implements OnCheckedChangeListener{

    public TextView textOut;
    public EditText textIn;
    public RadioGroup gravityG;
    public RadioGroup styleG;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tutorial1);
        textOut = (TextView) findViewById(R.id.tvChange);
        textIn = (EditText) findViewById(R.id.editText1);
        gravityG = (RadioGroup) findViewById(R.id.tvGravity);
        styleG = (RadioGroup) findViewById(R.id.tvStyle);
        Button gen = (Button) findViewById(R.id.bGenerate);
        gen.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
            textOut.setText(textIn.getText());
            }

    });

}

public void onCheckedChanged(RadioGroup group, int checkedId) {
    // TODO Auto-generated method stub

    switch(checkedId){
    case R.id.rbLeft:
        textOut.setGravity(Gravity.LEFT);
        break;
    case R.id.rbCenter:
        textOut.setGravity(Gravity.CENTER);
        break;
    case R.id.rbRight:
    textOut.setGravity(Gravity.RIGHT);
        break;

    }

}

} 
```

这是错误日志

```
03-13 18:02:34.773: E/AndroidRuntime(677): FATAL EXCEPTION: main
03-13 18:02:34.773: E/AndroidRuntime(677): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.chicas.thebasics/com.chicas.thebasics.tutorialOne}: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.RadioGroup
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.os.Looper.loop(Looper.java:137)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-13 18:02:34.773: E/AndroidRuntime(677):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 18:02:34.773: E/AndroidRuntime(677):  at java.lang.reflect.Method.invoke(Method.java:511)
03-13 18:02:34.773: E/AndroidRuntime(677):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-13 18:02:34.773: E/AndroidRuntime(677):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-13 18:02:34.773: E/AndroidRuntime(677):  at dalvik.system.NativeStart.main(Native Method)
03-13 18:02:34.773: E/AndroidRuntime(677): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.RadioGroup
03-13 18:02:34.773: E/AndroidRuntime(677):  at com.chicas.thebasics.tutorialOne.onCreate(tutorialOne.java:28)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.Activity.performCreate(Activity.java:5008)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-13 18:02:34.773: E/AndroidRuntime(677):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-13 18:02:34.773: E/AndroidRuntime(677):  ... 11 more
03-13 18:07:34.853: I/Process(677): Sending signal. PID: 677 SIG: 9 
```

现在这是我的 tutorial1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:text="" >
</EditText>

<LinearLayout
android:layout_width="match_parent"
android:weightSum="2"
android:layout_height="wrap_content"
android:orientation="horizontal">

<TextView
    android:id="@+id/tvStyle"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:layout_height="wrap_content"
    android:text="Style" 
    android:gravity="center" 
    android:textStyle="bold"
    />

<TextView
    android:id="@+id/tvGravity"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:layout_height="wrap_content"
    android:text="Gravity"
    android:gravity="center"
    android:textStyle="bold"
    />

</LinearLayout>

<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<RadioGroup 
android:id="@+id/rgStyle"
android:orientation="vertical" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_weight="1">

<RadioButton 
    android:id="@+id/rbNormal" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Normal" />

<RadioButton 
    android:id="@+id/rbItalic"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="Italic" />

<RadioButton 
    android:id="@+id/rbBold" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Bold" />

</RadioGroup>

<RadioGroup 
android:orientation="vertical"
android:id="@+id/rgGravity"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1">

<RadioButton
    android:id="@+id/rbLeft"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Left" />

<RadioButton
    android:id="@+id/rbCenter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Center" />

<RadioButton
    android:id="@+id/rbRight"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Right" />
</RadioGroup>

</LinearLayout>

<TextView
    android:id="@+id/tvChange"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="25dp"
    android:text="Type in Text and press the Button Bellow" 
    android:gravity="center"/>

<Button
    android:id="@+id/bGenerate"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Generate" />

</LinearLayout> 
```

我将不胜感激任何帮助，谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:27:32.427

也许你的意思是`rg`，不是`tv`：

```
gravityG = (RadioGroup) findViewById(R.id.rgGravity); 
styleG = (RadioGroup) findViewById(R.id.rgStyle); 
```

* * *

您已在 XML 中将这些声明为 TextView：

```
<TextView
    android:id="@+id/tvStyle"
...
<TextView
    android:id="@+id/tvGravity" 
```

但是您正试图在您的 Java 代码中将这些转换为 RadioGroups：

```
gravityG = (RadioGroup) findViewById(R.id.tvGravity);
styleG = (RadioGroup) findViewById(R.id.tvStyle); 
```

您不能这样做，因为这些类不直接相关......正如您在异常中指出的那样：

```
Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.RadioGroup 
```

解决方案很简单：要么您使用了错误的 ID，要么您必须更改您的 XML/Java 代码以使这些匹配。

# javascript - 在 Google Maps API v3 上调用 setContent() 时，InfoWindow 会闪烁

> ID：15399585
> 
> 赞同：1
> 
> 时间：2013-03-14T01:26:11.170
> 
> 标签：javascript, google-maps, google-maps-api-3

当我调用`setContent()`已**打开** `InfoWindow`的 Google Maps API v3 时，它闪烁得非常快（它隐藏了窗口，显示了它后面的地图，然后又显示了`InfoWindow`），但又丑陋且敏感。有什么方法可以在不闪烁的情况下更新内容吗？我正在考虑使用`div`inside，但我认为它应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:47:19.870

当您设置新内容时，信息窗口会自动关闭并再次打开。你可以在这个[jsFiddle](http://jsfiddle.net/3PfU9/)上试试。如果您取消注释`marker.infowindow.setContent()`并注释其他两行，则行为基本相同。有时它会闪烁，有时它不会。

```
$('button.change').live('click', function(){
    marker.infowindow.close();
    //marker.infowindow.setContent(getRandomContent());
    marker.infowindow.open(map, marker);
}); 
```

如果您知道哪些新内容可以替换旧内容，则可以使用隐藏的 div 并更改这两个 div。不会有眨眼。

# jquery - 如何使用 jQuery 信用卡验证器

> ID：15399588
> 
> 赞同：0
> 
> 时间：2013-03-14T01:26:40.497
> 
> 标签：jquery, node.js, coffeescript, validation

我正在寻找使用 jQuery 信用卡验证器验证信用卡号：http: [//jquerycreditcardvalidator.com/](http://jquerycreditcardvalidator.com/)

在过去的几个小时里，我试图让自己熟悉 javascript、coffeescript 和 jquery，以便弄清楚如何使用它。

这些是我为使其工作而采取的步骤：

我下载了coffeescript 和node.js 以及jquery。

我编译了我从上面的信用卡验证器网站下载的 .coffee 文件，据我了解，它把它变成了普通的 Javascript。

然后我下载了 Sublime Text 2 并打开了新的 .js 文件，并在开头和结尾添加了脚本标签。

最后我将它保存为 .html 并尝试在 chrome 中运行它，但没有任何反应。

如果我遗漏了一些明显的东西或不理解这个概念，请原谅我，我相信我要做的是在我将 .html 文件拖放到上面的信用卡验证器网站顶部时显示表格chrome，然后我可以从那里验证我自己的信用卡号。

所以我想上面网站上的“如何使用它”部分是我需要合并的，但我不知道如何。

如果有人可以为我指明正确的方向，那么您将节省我数小时的无脑教程冲浪。谢谢

编辑：我使用`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>`并摆脱了 jquery 错误，但现在只出现一堆文本和评论中提到的语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-26T07:41:36.760

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js" integrity="sha512-UdIMMlVx0HEynClOIFSyOrPggomfhBKJE28LKl8yR3ghkgugPnG6iLfRfHwushZl1MOPSY6TsuBDGPK2X4zYKg==" crossorigin="anonymous"></script>
<script src="http://igorescobar.github.io/jQuery-Mask-Plugin/js/jquery.mask.min.js"></script>

function ValidateCreditCardNumber() 
        {
            var ccNum = document.getElementById("creditcard").value;
            var visaRegEx = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
            var mastercardRegEx = /^(?:5[1-5][0-9]{14})$/;
            var amexpRegEx = /^(?:3[47][0-9]{13})$/;
            var discovRegEx = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/;
            var isValid = false;

            if (visaRegEx.test(ccNum)) 
            {
                isValid = true;
            } else if(mastercardRegEx.test(ccNum)) 
            {
                isValid = true;
            } else if(amexpRegEx.test(ccNum)) 
            {
                isValid = true;
            } else if(discovRegEx.test(ccNum)) 
            {
                isValid = true;
            }

            if(isValid) 
            {
                alert("Thank You!");
            } else 
            {
                alert("Please provide a valid Visa number!");
            }
        } 
```

# android - 将带有 .mid 音频样本的大型 HTML 赞美诗移植到 Android

> ID：15399590
> 
> 赞同：0
> 
> 时间：2013-03-14T01:26:46.877
> 
> 标签：android, html, webview, midi

LTLFTC..

我妈妈给了我一个为她的教会做的项目。这是一首 HTML 赞美诗，包含超过 1300 首歌曲的歌词，她希望将其转换为 Android 应用程序。每首歌都有自己的 .htm 文件，还有一些基本的 CSS。大多数歌曲还有一个 .mid。

我从来没有为Android写过任何东西。据我所知，.htm 在 webview 中应该可以正常工作，但我想让用户按下按钮来播放每首歌曲的关联 .mid 文件。我还想将整个混乱分发为 .apk，以便非技术人员可以很容易地安装它。

我想我可以将 .mid 文件放在 /res/raw 中，我想我需要使用 jetplayer 来实际播放它们。不知道怎么做。

我还想我可以只使用 webview 来显示每个人的歌词。

我对此感到困惑的是：如何从 Android 应用程序调用/命名 1300 多个 html 文件，而无需手动编辑每个文件？如果我将它们包含在 /res/raw 中，它们仍然可以按名称调用（0001.htm、0002.htm 等）吗？这甚至是个好主意吗？

我不介意手动编辑它们，但如果可能的话，我想避免这种情况。

对不起，如果这太笨拙了，感谢您的任何建议。

编辑：让 html、css 和大多数 js 工作。是否可以从我的 html 或 js 中调用 MediaPlayer？在 Windows 下，每个 hymn.html 中都有一个嵌入式播放器和一个指向 .mid 文件的简单链接。嵌入式播放器在 a.js 中定义，如下所示：

```
// Embed the music player into the webpage.
function embed_music(filename)
{
  var type="mid";
  var width=280;
  var height=44;
  //document.write('<embed src="'+filename+'" if (navigator.appName=="Microsoft Internet Explorer") {  type="application/x-mplayer2" }if 

(navigator.appName=="Netscape") {  type="audio/'+type+'" }pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" width="144" height="44" 

autostart="true" loop="true" border="1">')
  if(filename=="none")
    document.write("<table cellpadding=0 cellspacing=0 style=\"width:"+width+"px;height:"+height+"px;border:1px solid #dddddd;\"><tr><td 

style=text-align:center;vertical-align:middle;font-size:80%;>The music file for this hymn is unavailable! Sorry!</td></tr></table>")
  else
    document.write('<embed src="'+filename+'" type=audio/'+type+' autostart=false loop=false width='+width+' height='+height+'>')
} 
```

在单个 hymn html 文件中是这样的：

```
<script>embed_music("../../midi/e0011.mid")</script> 
```

理想情况下，我可以只更改 a.js 并将每个单独的 .html 单独放置，但如果我需要全部编辑它们，我会的。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:45:22.780

文件夹中的 Html 和 css 文件可能`assets`比原始文件更好。这样，它们将在包装前被压缩。放入的文件`raw`不会被压缩。

`assets`你可以很简单地列出内容——

```
AssetManager am = getAssets();
String[] assetList = am.list( "" );
for( String asset : assetList ) {
    if( asset.endsWith( ".htm" ) ) {
        // do something with the html file
    }
} 
```

此外，Android`MediaPlayer`支持 MIDI 播放：

```
MediaPlayer mp = new MediaPlayer();
File f = new File( ... path to midi ... );
FileInputStream fis = new FileInputStream(f);
FileDescriptor fd = fis.getFD();
mp.setDataSource( fd );
mp.prepare();
mp.start(); 
```

# sql-server - SQL Azure 上的聚集索引更改使得在大型传感器数据表上的 INSERT 非常慢（从 ~30ms 到 2000ms）

> ID：15399596
> 
> 赞同：1
> 
> 时间：2013-03-14T01:27:26.737
> 
> 标签：sql-server, indexing, azure-sql-database

我正在尝试提高多租户 SaaS 系统上大型表的性能，以使报告更快。当我在聚集索引上添加一列时，在系统上进行插入操作的时间从 ~30ms 增加到 1500~2500ms！在这种情况下，应用于此表的最佳聚集索引选项和非聚集索引是什么：

*   数据库：SQL Azure
*   我只在这个表上执行 INSERT 和 SELECT，数据从不更新（UPDATE）
*   并发 INSERTS 的高负载（不同的 Worker 和线程消耗队列中的数据）
*   100.000 行/天（增长）
*   实际上 600 万行（增长）
*   每个租户只读取其 ID 的数据
*   1 个租户将拥有 100-3000 个 DeviceId

表结构：
-TenantID (bigint)（我可以使用 smallint，但如果我将来需要使用 Azure 联合，我更改为 bigint ）-DeviceID
(int)
- ReadID (bigint) (Identity)
- UIDRead (GUID)
- ReadDate (日期时间)
- SensorState1 (tinyint)
- SensorState2 (tinyint)
- SensorState3 (tinyint)
...
- SensorState10 (tinyint)

常见的 WHERE 用于读取数据：
-WHERE DeviceId = @X and ReadDate between @XDate and @YDate
-WHERE DeviceId IN (X,Y,Z) AND ReadDate between @XDate and @YDate
-WHERE TenantId = @Y and ReadDate在@XDate 和@YDate
之间 -WHERE TenantId = @X AND DeviceID IN (X,Y,Z) AND ReadDate 在@XDate 和@YDate 之间 -WHERE
TenantId = @X AND DeviceID =@Y AND ReadDate 在@XDate 和@YDate 之间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:03:01.637

什么是主键？我假设`ReadDate`,`TenantId`和`DeviceId`构成唯一标识符？如果是这样，通过在表定义中声明主键，按顺序对它们进行聚类。始终将日期放在时间序列数据的聚集索引的前面，因为范围是连续的。（是的，我知道每个租户只读取他自己的数据。服务器不知道这一点，并且缓存将倾向于保存所有租户的所有数据，因为（我打赌）大多数租户都会对相同的日期感兴趣。 )

尽可能使用最窄的列。不要`BIGINT`现在使用，以防您以后想要联合；当那一天到来时，如果它来了，`ALTER TABLE`一定会等着你。`smalldatetime`除非您需要几秒钟，否则请使用。放弃`ReadId`是因为您已经拥有一个自然键，它既浪费空间又是资源争用的来源。换成`UIDRead`一个普通的整数，希望有一天你有超过 20 亿的读者。

如果生成的表在接受插入时仍然很慢，这不是表的错。见服务器。

# r - 将纪元的秒数 转换为本地时间

> ID：15399599
> 
> 赞同：1
> 
> 时间：2013-03-14T01:27:33.050
> 
> 标签：r, timezone, epoch, posixct

假设我有几个从 Unix 纪元 (1970-01-01 00:00:00Z) 以整数（秒）形式给出的时间戳。

如何将它们转换为本地时区的正确日期时间？我一直在查看`as.POSIXct`帮助页面以及关于 SO 的相关问题。在 UTC 中很容易做到，但由于某种原因，我似乎无法在本地时区或另一个时区直接做到这一点（顺便说一句，我恰好在“America/Los_Angeles”或“PST5PDT”，其中根据白天节省是否在指定时间生效，变为“PST”或“PDT”；所以我通常指定基于位置的时区，而不是“PST”或“PDT”，这很挑剔）。

示例的设置：

```
z <- c(1360527317,1363019665) 
```

perl 中的快速验证：

```
echo -n 1360527317,1363019665 | perl -ne '
use POSIX /strftime/;
$fmt = "%Y-%m-%d %H:%M:%S";
for (split /,/) {
  $loc=strftime("$fmt %Z", localtime($_));
  $gmt=strftime("$fmt GMT", gmtime($_));
  print "$_: $loc $gmt\n";
}'
# gives:
1360527317: 2013-02-10 12:15:17 PST 2013-02-10 20:15:17 GMT
1363019665: 2013-03-11 09:34:25 PDT 2013-03-11 16:34:25 GMT 
```

首先，显而易见的（UTC）：

```
as.POSIXct(z, origin='1970-01-01', tz='GMT')
# --> [1] "2013-02-10 20:15:17 GMT" "2013-03-11 16:34:25 GMT" 
```

以下是我尝试过**但不起作用**的事情：

```
as.POSIXct(z, origin='1970-01-01')
# --> (wrong) [1] "2013-02-10 20:15:17 PST" "2013-03-11 17:34:25 PDT"

as.POSIXct(z, origin='1970-01-01 00:00:00 Z')
# --> (wrong) [1] "2013-02-10 20:15:17 PST" "2013-03-11 17:34:25 PDT"

as.POSIXct(z, origin='1970-01-01', tz='America/Los_Angeles')
# --> (wrong) [1] "2013-02-10 20:15:17 PST" "2013-03-11 17:34:25 PDT" 
```

在我的智慧尽头，这给了我**正确的结果**：

```
now=Sys.time(); now+(z-unclass(now))
# --> [1] "2013-02-10 12:15:17 PST" "2013-03-11 09:34:25 PDT" 
```

顺便说一句，在我的系统上：

```
now=Sys.time()
now
# --> [1] "2013-03-13 18:26:05 PDT"
unclass(now)
# --> [1] 1363224365 
```

所以看来我的设置和本地时区是正确的。

知道我在上面不起作用的线路上做错了什么吗？

同时，我将使用以下技巧，希望对其他人有用：

```
localtime <- function(t) {
  now = Sys.time();
  return(now+(unclass(t)-unclass(now)))
}
# quick test:
localtime(Sys.time())
# --> [1] "2013-03-13 18:33:40 PDT"
localtime(z)
# --> [1] "2013-02-10 12:15:17 PST" "2013-03-11 09:34:25 PDT" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:47:17.127

您需要区分解析/存储为 UTC

```
R> pt <- as.POSIXct(z, origin=as.Date("1970-01-01"))
R> pt
[1] "2013-02-10 14:15:17 CST" "2013-03-11 11:34:25 CDT" 
```

现在您可以在任何您想要的 TZ 中显示：

```
R> format(pt, tz="America/Chicago")
[1] "2013-02-10 14:15:17" "2013-03-11 11:34:25"
R> format(pt, tz="America/Los_Angeles")
[1] "2013-02-10 12:15:17" "2013-03-11 09:34:25"
R> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:38:34.633

尝试传递一个`Date`to`origin`而不是一个字符串

```
as.POSIXct(z, origin=as.Date('1970-01-01'), tz='America/Los_Angeles') 
```

# html - 为什么我的文本框有奇怪的填充？

> ID：15399601
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:28:01.530
> 
> 标签：html, css, wrapper, margin, padding

我无法弄清楚这段代码。

这是我的网站：[http ://claireisabelwebb.com/](http://claireisabelwebb.com/)

我在左侧的主导航周围做了包装，并在右侧包含了照片和文字。我在文本/照片容器中有两个“框”。这是该代码：

```
/* Wrapper for Text and Photo on Home Page */

.wrapper_text_photo{ 
        display:block;
        float: left;
        background: rgba(0,0,255, .8);
        width:800px;
        height: 700px;
        padding: 20px;
        margin-top:20px;
        margin-left:10px;
}

/* Photo on Home Page */

.photo_home {
        float: left;
        margin-right:10px;
}

/* Text on Home Page */

.home_text{ 
        display:block;
        background: rgba(255,255,255,.75);
        width:800px;
        height: 400px;
} 
```

这是html：

```
<div class="wrapper_text_photo">

<!-- Picture of Me __________________________________________-->

    <img class="photo_home" src="images/Home/claire-ed.jpg" alt="claire isabel webb" height="200px">

<!-- Text ___________________________________________________-->

    <div class="home_text">
            <p>I graduated in 2010 from Vassar College with departmental honors in astronomy. I also minored in philosophy and discovered a late interest in architecture and art history. ETC
            <br><br>
            Email me at claire.isabel.webb@gmail.com.
            <br> 
            </p>
    </div>
</div> 
```

我希望文本框与图像对齐，但无论我如何使用填充和边距，我似乎都无法正确处理。

谢谢你 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:32:35.537

段落的隐含边距正在`home_text`向下推。删除其边距：

```
.home_text p {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:35:02.527

添加：

```
p {
margin: 0;
} 
```

您的“文本框”有 19px 的顶部/底部边距 .. 添加`margin: 0;`会将顶部/右侧/底部/左侧值设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:42:48.767

如果我了解您想要什么，处理它的一种方法是将您的图像移动到包含您的文本的 div 内：

```
<div class="wrapper_text_photo">
  <div class="home_text">
    <img class="photo_home" src="images/Home/claire-ed.jpg" alt="claire isabel webb" height="200px">
    <p>I graduated in 2010 from Vassar College with departmental honors in astronomy. I also minored in philosophy and discovered a late interest in architecture and art history. ETC
    ...
  </div>
</div> 
```

这可能会使`wrapper_text_photo`and `home_text`div 中的一个或另一个变得多余。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T01:36:35.040

试试这个也许有帮助

html

```
<div class="wrapper_text_photo">
    <div class="home_text">
            <p><img class="photo_home" src="images/Home/claire-ed.jpg" alt="claire isabel webb" height="200px" />I graduated in 2010 from Vassar College with departmental honors in astronomy. I also minored in philosophy and discovered a late interest in architecture and art history. ETC
            <br><br>
            Email me at claire.isabel.webb@gmail.com.
            <br> 
            </p>
    </div>
</div> 
```

css

```
.home_text p img {
    float:left;
} 
```

工作[演示](http://jsfiddle.net/jhunlio/c7VA4/)

# asp.net - DTO 模式的策略 - 每个实体有多个 DTO 还是只有一个？

> ID：15399604
> 
> 赞同：4
> 
> 时间：2013-03-14T01:28:07.443
> 
> 标签：asp.net, design-patterns, web-applications, dto

我正在使用 DTO 构建我的第一个应用程序 - 我目前有一个 DTO 用于获取特定对象的数据，还有另一个不同的 DTO 用于更新（PUTting）数据 - 因为只有少数字段可以从任何客户端更新，我决定为 PUTting 创建一个专用的 DTO，以避免通过网络发送不必要的数据/字段。这是可维护性方面的良好做法，还是某种禁忌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:47:44.940

我对多个操作使用相同的类型没有问题。也许您有多个 GET，它们出于类似目的返回类似数据。在那种情况下，没有理由不能重用相同的类型。

但是，您已经确定 GET 和 PUT 操作需要不同的数据。所以它们不仅是不同的操作，而且它们也需要不同的数据。

```
+----------------+-------------------+--------------------------+
| Similar Data   | Similar Purpose   | Try to Reuse             |
| Similar Data   | Different Purpose | Consider; is it logical? |
| Different Data | Similar Purpose   | New Type                 |
| Different Data | Different Purpose | New Type                 |
+----------------+-------------------+--------------------------+ 
```

创建新的 DTO 以满足特定需求还有其他好处，例如：

*   不要让开发人员感到困惑（即使那是你！）
*   不打开安全漏洞，从而填充不打算使用的字段

为了使它更容易：

*   接口可用于帮助强制执行类型之间的公共字段。
*   ASP.Net Web API（不确定您是否正在使用您的问题）对[动态输入](http://www.hanselman.com/blog/TinyHappyFeatures2ASPNETWebAPIInVisualStudio2012.aspx)有强大的支持。这可以消除对 DTO 的需求（尽管以减少编译时类型检查为代价）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:39:53.387

这是一个选择问题。我有使用 orm 映射器来减少代码的习惯。我发现预先花时间定义保存并开始使用一个 dto 类可以实现更好的可伸缩性和可维护性，即使这意味着所有字段都得到更新。有边缘情况。如果表使用具有大量 blob 类型数据的字段，那么也许您应该以某种方式对这些更新进行子类化。这是一个见仁见智的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:16:18.663

我确实每个实体使用多个 DTO。然而，很多时候我什至没有为视图预定义的 DTO，我只是创建一个匿名类实例，它是使用 Linq 的实体的投影并将其绑定到 GUI。

例如显示用户列表

```
var users = ... // fetch from DB
ViewData["users"] = users.Select( u => new { Id = u.Id, Name = u.First + " " + u.Last}); 
```

显示计分板：

```
var users = ... // fetch from DB
ViewData["users"] = users.Select( u => new { Id = u.Id, Name = u.Last, Score = u.Score}); 
```

这使我免于创建 2 个不同的 DTO。一个潜在的缺点是视图不是强类型的，因此根据 ASP.NET MVC 的版本，我需要将视图模型声明为`dynamic`或使用一些`ExpandoObject`技巧，但它都被很好地隐藏了。

但是，我总是创建 DTO 来修改状态并将它们视为命令。对于实体上的不同操作，我通常有不同的 DTO，例如`ChangeUserAddressDTO`,`ChangeUserLevelDTO`等。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-14T02:25:33.337

它不是不可以，但对 CRUD 使用相同的 DTO 将使其在长期内更易于维护。稍后，如果添加和删除了新字段，您可能必须更改所有层中的代码。您永远不知道您的客户何时改变主意以编辑更多或更少的数据。

# javascript - 更改表格中图像的大小

> ID：15399605
> 
> 赞同：0
> 
> 时间：2013-03-14T01:28:26.090
> 
> 标签：javascript, html

我正在使用 js 动态创建一个表格并将图像附加到每个单元格。我正在尝试使用 Jquery 调整图像大小，但由于某种原因，调整大小不起作用。

我的方法是

```
 function table(){
    var rows = 8; 
    var cols = 8;
    var table = document.getElementById("table");
    for(var r = 0; r < rows; r++)
    {
      var tr = $('<tr></tr>');
        for (var c = 0; c < cols; c++)
    $('<td></td>').appendTo(tr)
    .append($('<img/>').
    attr({src: './img.png'}),
    height(50),
    width(50));
     tr.appendTo(table);
    } 
```

有人知道我在做什么错吗？

此外，我还尝试调整我的 td 的大小，但我不知道如何调整它的大小。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:35:36.460

您可以使用`css( )`jquery 函数进行设置：

```
function table(){
    var rows = 8; 
    var cols = 8;
    var table = document.getElementById("table");
    for(var r = 0; r < rows; r++)
    {
      var tr = $('<tr></tr>');
        for (var c = 0; c < cols; c++) 
            $('<td></td>').appendTo(tr)
                .append($('<img/>')
                .attr('src','./img.png')
                .css({'height':'50px','width':'50px'}));
        tr.appendTo(table);

    }
} 
```

# search - ElasticSearch：-ve 在索引时提升文档

> ID：15399608
> 
> 赞同：0
> 
> 时间：2013-03-14T01:28:45.393
> 
> 标签：search, elasticsearch

我想知道是否可以根据术语列表在索引时降低某些文档的权重？

假设我有一个包含以下文件的文档：-名称，-描述，-标题

我想减轻提交的“名称”中包含“xyz”的任何内容。因此，当我搜索 xyz 时，所有在“名称”字段中具有“xyz”的文档的得分都低于在“描述”字段中具有“新闻”的其他文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:06:54.143

您可以使用[提升查询](http://www.elasticsearch.org/guide/reference/query-dsl/boosting-query.html)来“降级”匹配特定查询子句的结果：

```
curl -XGET 'http://127.0.0.1:9200/_all/_search?pretty=1'  -d '
{
   "query" : {
      "boosting" : {
         "negative_boost" : 1,
         "negative" : {
            "match" : {
               "name" : "xyz"
            }
         },
         "positive" : {
            "match" : {
               "description" : "news"
            }
         }
      }
   }
}
' 
```

# android - 如何获取我的动态 IP xcode

> ID：15399609
> 
> 赞同：2
> 
> 时间：2013-03-14T01:28:47.367
> 
> 标签：android, ip, ip-address

当您有移动连接时，您通常有 2 个 IP 地址，一个外部 IP，可以在[http://www.whatsmyip.org/中查询](http://www.whatsmyip.org/)

IP 结果：190.106.XX.XX

当我将我的 PC 连接到 BAM 时，我得到另一个 IP，如图所示

![在此处输入图像描述](../Images/8900f08f6c84e52144ceac1b99509846.png)

IP 结果：10.69.XX.XX

我需要获取的 ipAddress 是来自 Window 的用于使用它的地址（10.69.XX.XX）

我检查了一个 android 应用程序并将这个结果显示为 RMNET0

并在java中告诉我他使用了**request.getRemoteHost()。**用于获取此数据

我将不胜感激的任何信息

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T00:31:34.647

我已经成功尝试过，希望对您有所帮助

```
+(NSString *)getIpLocally:(NSString *)networkInterface ipVersion:(int)ipVersion
{
    if(ipVersion != 4 && ipVersion != 6)
    {
        NSLog(@"getIpLocally unknown version of IP: %i",ipVersion);
        return nil;
    }

    NSString *networkInterfaceRef;

    if ([networkInterface isEqualToString:@"ios_cellular"])
    {
        networkInterfaceRef = @"pdp_ip0";
    }
    else if([networkInterface isEqualToString:@"ios_wifi"])
    {
        networkInterfaceRef = @"en0"; //en1 on simulator if mac on wifi
    }
    else
    {
        NSLog(@"getIpLocally unknown interface: %@",networkInterface);
        return nil;
    }

    NSString *address = nil;
    struct ifaddrs *addrs = NULL;
    struct ifaddrs *cursor = NULL;
    struct sockaddr_in *s4;
    struct sockaddr_in6 *s6;
    char buf[64];
    int success = 0;

    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&addrs);
    if (success == 0)
    {
        // Loop through linked list of interfaces
        cursor = addrs;
        while(cursor != NULL)
        {
            if((ipVersion == 4 && cursor->ifa_addr->sa_family == AF_INET) ||
               (ipVersion == 6 &&  cursor->ifa_addr->sa_family == AF_INET6))
            {
                NSLog(@"Network Interface: %@",[NSString stringWithUTF8String:cursor->ifa_name]);

                // Check if interface is en0 which is the wifi connection on the iPhone
                if([[NSString stringWithUTF8String:cursor->ifa_name] isEqualToString:networkInterfaceRef])
                {
                    if(ipVersion == 4)
                    {
                        s4 = (struct sockaddr_in *)cursor->ifa_addr;

                        if (inet_ntop(cursor->ifa_addr->sa_family, (void *)&(s4->sin_addr), buf, sizeof(buf)) == NULL)
                        {
                            NSLog(@"%s: inet_ntop failed for v4!\n",cursor->ifa_name);
                        }
                        else{
                            address = [NSString stringWithUTF8String:buf];
                        }
                    }
                    if (ipVersion == 6)
                    {
                        s6 = (struct sockaddr_in6 *)(cursor->ifa_addr);

                        if (inet_ntop(cursor->ifa_addr->sa_family, (void *)&(s6->sin6_addr), buf, sizeof(buf)) == NULL)
                        {
                            NSLog(@"%s: inet_ntop failed for v6!\n",cursor->ifa_name);
                        }
                        else{
                            address = [NSString stringWithUTF8String:buf];
                        }
                    }
                }
            }
            cursor = cursor->ifa_next;
        }
    }
    // Free memory
    freeifaddrs(addrs);
    return address;
} 
```

要显示 IP 地址，您可以使用：

```
NSLog(@"ip v4: %@",[NSString getIpLocally:@"ios_cellular" ipVersion:4]); 
```

# objective-c - 如何在 Objective-C 中正确导入头文件

> ID：15399611
> 
> 赞同：0
> 
> 时间：2013-03-14T01:29:09.077
> 
> 标签：objective-c

![在此处输入图像描述](../Images/95356b77ac35095fcdb967a0f50ff33d.png)

我导入了 PaiLifeCardLeftViewController.h 但 Xcode 告诉我它是未知类型。

我该如何解决这个问题，谢谢。

编辑： PaiLifeCardLeftViewController.h： ![在此处输入图像描述](../Images/300cf3bbccbb25281838755ddb43be4b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:21:52.863

此问题是由 和 之间的循环依赖引起`PaiLifeCardLeftViewController`的`PaiLifeCardCenterViewController`。每个对应的 .h 文件都在尝试导入另一个。你不能这样做。

正确的解决方案是更新两个 .h 文件。在两者中，删除另一个 .h 的导入并将其替换为`@class`前向声明。

PaiLifeCardLeftViewController.h：

```
#import <UIKit/UIKit.h>
#import "PaiLifeCardRefreshDelegate.h"

@class PaiLifeCardCenterViewController;

@interface PaiLifeCardLeftViewController : UITableViewController

@property (strong, non atomic) id<PaiLifeCardRefreshDelegate> delegate

@end 
```

对 进行类似的更改`PaiLifeCardCenterViewController.h`。

然后您必须将导入添加到 .m 文件。

您应该在 .h 文件中包含尽可能少的导入。如果可能，最好使用 forward ( `@class`) 声明。它避免了循环依赖，并且使编译速度更快，并且在更改 .h 文件时减少了重新编译。

边注。无需为`delegate`. 将为您合成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:35:20.710

您可以通过添加对类进行前向类声明

`@class PaiLifeCardCenterViewController`

在`@interface`声明之前。

# java - 图像识别 - Mat 中的二进制描述符表示 - OpenCV Android

> ID：15399613
> 
> 赞同：4
> 
> 时间：2013-03-14T01:29:19.273
> 
> 标签：java, android, image, opencv, orb

我只是好奇。我是新来的，所以请体谅我这个有点幼稚的问题。

假设我正在做带有图像识别的 android 应用程序，其中所有进程甚至计算密集型都必须发生在移动设备 cpu 上。

我正处于已经处理图像的阶段，从图像中提取了一些特征。这组图像仅来自一个建筑物，它应该识别特定的感兴趣对象（不同的窗户、图片、人工制品、建筑物外部）。所以这是一个封闭的领域，我可以提供足够多的不同角度的物体图片。我计划训练神经网络并将其提供给应用程序而不是图像匹配算法。

我的想法是提取关键点，计算描述符（将 FREAK 用于关键点 ORB 用于描述符）并从这些描述符中得到我希望得到单个文件或数组的最终结果是这样的

```
 Desc1  Desc2 Desc3 Desc4 DescN......... Class
_________________________________________________________________________________
Picture 1     0.121  0.923 0.553 0.22  0.28           "object1" 
Picture 2     0.22    0.53  0.54 0.55  0.32 .........."object1" (different scale, angle)
Picture 3     ....    ...    ...   ...  ..   .........."object2"
Picture N
Picture N+1 
```

所以我可以把它交给神经网络进行训练，但是我被卡住了，因为我不知道矩阵中的二进制特征/描述符是如何表示的（Class Mat - openCV）。以及我将如何继续对这些二进制描述符进行规范化，以便将其提供给神经网络（多层感知器）进行训练。（即使是伪代码也会有很大帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T14:58:06.033

I can not give a complete answer to your question, because I'm not familiar with Neuronal Networks, but I can give you some ideas about ORB descriptors binary representation.

1.  When you are detecting keypoints you can't do it with FREAK. But as [FREAK paper](http://infoscience.epfl.ch/record/175537/files/2069.pdf) describes you should detect keypoints with FAST corner detector and then describe it with FREAK. If you want to recognize objects by ORB descriptors, you should use ORB for both, for keypoint detection and for description. Note that ORB keypoint detection is also can be based on FAST. You can change it by altering parameter of `scoreType` from OpenCV [documentation](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#orb). As you using android, you can set this parameter as described [here](https://groups.google.com/forum/?fromgroups=#!searchin/android-opencv/orb%2420parameters/android-opencv/-1mXlMNOudI/s7bK0a5xRr8J)

2.  About binary string descriptors. I also needed them to implement descriptor matcher with MySQL query. As Mat in OpenCV-java has only double descriptor representation, I've implemented the method to transform them to binary. For this purpose, the Mat of descriptors should be transformed to `List<Double>`. And you can use my function to obtain binary representation of descriptors. The function will return the `List<String>`.

Here is the code:

```
public static List<String> descriptorToBinary(List<Double> desc){

    List<String> binary_desc = new ArrayList<String>();

    String desc_bin= "";
    for(int i = 0; i < desc.size(); i++){

        String binary_str_tmp = Integer.toBinaryString((int)((double)desc.get(i)));
        if (binary_str_tmp.length() < 16)
        {
            int number_of_zeros = 16 - binary_str_tmp.length();
            String str_tmp = "";
            for(int t = 0; t < number_of_zeros; t++){
                str_tmp += "0";
            }
            binary_str_tmp = str_tmp + binary_str_tmp;
        }

        desc_bin+= binary_str_tmp;
        binary_desc.add(final_binary_str);

    }

    return binary_desc;

} 
```

The returned list of strings will have the same size as list of `MatOfKeyPoint` if you will transform it to `List<KeyPoint>`

So how did I verified if these descriptors are correct:

1.  I've matched original Mat descriptors with Bruteforce Hamming matcher as was said in [ORB paper](http://www.vision.cs.chubu.ac.jp/CV-R/pdf/Rublee_iccv2011.pdf)
2.  I've registered the distances returned by matcher.
3.  Then I've calculated distances distances between String descriptors of the same image.
4.  Verified if opencv's Hamming distances were the same as distances between String descriptors. They were the same, so conversion from Mat to List was well performed.

So binary descriptors associated to keypoints will look like this:

```
Picture 1: object1
  keypoint1 : 512bit binary descriptor (1s and 0s)
  keypoint2 : 512bit binary descriptor
  keypoint3 : 512bit binary descriptor
  ...
Picture 2: object2
  keypoint1 : 512bit binary descriptor
  keypoint2 : 512bit binary descriptor
  keypoint3 : 512bit binary descriptor
  ... 
```

Now about Multi-Layer Perceptron. I can not help you with it. That is why I've told at the start that my answer is incomplete. But I hope the comments that I've given will help you in future to sole your problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T22:29:25.873

而不是尝试从头开始实现分类器。您是否考虑过 HaarTraining？您可以训练它来检测图像中的多个对象。

但是，培训过程很长。

[http://note.sonots.com/SciSoftware/haartraining.html](http://note.sonots.com/SciSoftware/haartraining.html)

希望能帮助到你！

# eclipse - 如何使用axis2 / eclipse抑制发出的SOAP消息中的ns（命名空间）前缀？

> ID：15399617
> 
> 赞同：3
> 
> 时间：2013-03-14T01:29:52.070
> 
> 标签：eclipse, web-services, axis2, soap-client

如何在 Eclipse 中的 axis2 中抑制命名空间（通常的 ns1、ns2 等）前缀？在我当前的实现中，这些前缀是在 SOAP 消息中发出的。

我知道 WSDL2Java 有一个 -sp 选项，但是由于我使用的是 Eclipse，所以我不确定如何使用。在相关说明中，如何在 Eclipse 中指定 WSDL2java 的命令行选项？

我尝试修改我的 xsd 文件以包含 elementFormDefault="unqualified" 但它似乎对axis2生成的代码没有影响。

我正在使用 Eclipse JUNO 和axis2-1.6.2。

提前致谢！

# vim - vim 在哪里存储自定义键映射缓存？

> ID：15399618
> 
> 赞同：1
> 
> 时间：2013-03-14T01:29:56.127
> 
> 标签：vim, vim-plugin

我已经通过 vundle 安装了一个插件，后来决定将其删除。我已经运行了`vim +BundleInstall +BundleClean +q`，我很确定与此插件相关的所有内容都已从`.vimrc`和中删除`.vimrc.bundles`。

但是，即使在我重新启动后，当我输入`:map`vim 时，我仍然可以看到这个特定插件的键映射，并且调用它们会导致`Unknown function`Vim 出错。

我想知道vim是否在其他地方保留了自定义键映射的缓存，我应该在删除插件后清理这些缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:03:46.893

感谢@peter-rincker，使用`:verbose map`我意识到一些功能/键绑定存储在`.vimviews`. 删除该目录并解决问题！

# sql - 在 SQL Server 2008 中将值传递到表中后如何获取一行？

> ID：15399620
> 
> 赞同：0
> 
> 时间：2013-03-14T01:30:08.140
> 
> 标签：sql, sql-server, sql-server-2008

我有一个名为 Test 的表

```
Test
Name   Value1(varchar)   Value2(varchar)
A          1                  9
B          10                 19
C          20                 39
D          40                 45
...        ...                ... 
```

现在，当我发送“8”或“21”等值时，如何从测试表中获取名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:48:27.953

嗯，为什么你的专栏`VARCHAR`？

```
DECLARE @n INT = 8;

SELECT Name FROM dbo.Test
  WHERE @n BETWEEN CONVERT(INT, Value1) AND CONVERT(INT, Value2); 
```

如果您在这些列中有其他垃圾，您可能必须执行以下操作以防止 SQL Server 智取您并尝试转换`'ascfdgt'`为整数：

```
DECLARE @n INT = 8;

SELECT Name FROM dbo.Test
  WHERE ISNUMERIC(Value1) = 1
    AND ISNUMERIC(Value2) = 1
    AND @n BETWEEN CASE WHEN ISNUMERIC(Value1) = 1 THEN CONVERT(INT, Value1) END
               AND CASE WHEN ISNUMERIC(Value2) = 1 THEN CONVERT(INT, Value2) END; 
```

现在请修复此列的数据类型，或者将这些数字存储在不同的列中。

如果您传入`A12`并需要查找行 where `Value1`is`A010`和`Value2`is`A029`那么它会变得更复杂一些：

```
DECLARE @n VARCHAR(12) = 'A12';

SELECT Name FROM dbo.Test
  WHERE ISNUMERIC(SUBSTRING(Value1, 2, 255)) = 1
    AND ISNUMERIC(SUBSTRING(Value2, 2, 255)) = 1
    AND CONVERT(INT, SUBSTRING(@n, 2, 255)) 
      BETWEEN CASE WHEN ISNUMERIC(SUBSTRING(Value1, 2, 255)) = 1
        THEN CONVERT(INT, SUBSTRING(Value1, 2, 255)) END
          AND CASE WHEN ISNUMERIC(SUBSTRING(Value2, 2, 255)) = 1
        THEN CONVERT(INT, SUBSTRING(Value2, 2, 255)) END; 
```

看看有多丑？请您考虑修复这个糟糕的设计，这样您就不必在代码库中乱扔这样的意大利面条查询了吗？

# xaml - 访问文本块的背景颜色

> ID：15399622
> 
> 赞同：20
> 
> 时间：2013-03-14T01:30:28.127
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我在 MSDN 上找到了这个[例子](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.fontsize.aspx)，它展示了一些配置文本块的方法：

很多似乎对我有用，但这部分失败了：

```
textBlock.Background = Brushes.AntiqueWhite; 
```

“背景”部分用红色下划线，Visual Studio 说：“Windows.UI.Xaml.Controls.TextBlock 不包含背景的定义”。

我很困惑。

这是最近的变化吗？还是后来被删除了？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-14T03:16:31.900

如果我没记错的话，WinRT 很大程度上基于 Silverlight，而`TextBlock`它派生自`FrameworkElement`WPF 并且与 WPF 不同，它没有自己的`Background`属性。

一种解决方法是使用附加元素提供相同的效果以充当容器并使用`Border`或`Grid`使用`Background`等提供背景。类似的东西；

```
<Border Background="AntiqueWhite">
  <TextBlock/>
</Border> 
```

或者，如果它包含`Rectangle`在一个Cell 或`TextBlock`类似的东西中，那么它可能会提供相同的东西，除非你想直接设置大小；`Grid``Rectangle`

```
<Rectangle Fill="AntiqueWhite"/>
<TextBlock/> 
```

不幸的是，我认为这是您当前唯一的选择。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-19T09:44:46.337

**设置 TextBlock 的背景颜色**

```
TextblockName.Background = (SolidColorBrush)(new BrushConverter().ConvertFrom("#FF202B49")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T09:23:36.303

这将背景设置为古色古香的白色。此外，网格的高度和宽度与 TextBlock 的高度和宽度绑定，因此您不必手动设置网格的大小。

```
 <Grid Background="AntiqueWhite" Height="{Binding ActualHeight , ElementName=textBlock1}" Width="{Binding ActualHeight , ElementName=textBlock1}">
         <TextBlock x:Name="textBlock1" Text="Text" />
        </Grid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-18T00:45:33.377

在 UWP 中，许多控件已被简化（可能是为了减少它们的内存占用）并且不具有其 WPF 兄弟的某些典型属性。

`.Background`它可以嵌套在一个`<Grid></Grid>`元素中，而不是像在相关的 UWP 元素上设置属性（正如一些答案已经提到的那样），但*不*建议这样做，除非您希望分配给 的属性在**多个**子元素`Grid`之间共享。如果您想将背景（或在 UWP 控件中找不到的其他属性）应用到或类似的，您应该做的是将其包装在一个元素中，当您仅尝试自定义单个元素时，这是推荐的方法元素，并且在布局计算和内存开销方面都比将其包装在 a 中轻得多*。***`TextBlock``<Border></Border>`*`<Grid />`***

 **** * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-23T06:57:19.110

您也可以使用以下代码进行动态更改。（仅适用于 WPF）

```
textBlock.Background = new SolidColorBrush(Colors.AntiqueWhite); 
```***

# asp.net-mvc - 在 Dropdownlist razor mvc 中显示日期时间值的问题

> ID：15399624
> 
> 赞同：0
> 
> 时间：2013-03-14T01:31:12.460
> 
> 标签：asp.net-mvc, visual-studio, razor

我有两个字段 date(datetime) 和 transactionID (int)。

我需要获取 transactionID 在 10 到 20 之间的日期值并将其显示在下拉列表中。

我喜欢..

```
BFDbEntities BFT = new BFDbEntities();

var xe = (from n in BFT.Transactions where n.TRANSACTIONID > 10 where n.TRANSACTIONID < 20 select n.DATE);

List<int> items = new List<int>();

foreach (var item in xe)
 {
  **items.Add(item);**
 }

ViewBag.yearlb = new SelectList(items); 
```

我收到以下错误：

> 错误 2 'System.Collections.Generic.List.Add(int)' 的最佳重载方法匹配有一些无效参数 C:\Users\Santhosh\Documents\Visual Studio 2012\Projects\VS 2010\sampleBF\sampleBF\Controllers\ HomeController.cs 94 17 样本BF
> 
> 错误 3 参数 1：无法从 'System.DateTime?' 转换 到'int' C:\Users\Santhosh\Documents\Visual Studio 2012\Projects\VS 2010\sampleBF\sampleBF\Controllers\HomeController.cs 94 27 sampleBF

我知道它的愚蠢错误。但我是一个只有一周经验的初学者。任何帮助将不胜感激。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:59:16.633

我发现它是因为我用过

```
List<int> items = new List<int>(); 
```

显示日期时间值。但

```
List<DateTime> items = new List<DateTime>(); 
```

应该使用。:)

# java - 为什么转换 ArrayList 时我的 startActivityForResult() 返回 null 到字符串 []？

> ID：15399625
> 
> 赞同：0
> 
> 时间：2013-03-14T01:31:16.527
> 
> 标签：java, android, arrays, arraylist

以下代码抛出 a 是`NullPointerException`因为`ArrayList`未正确转换为数组。该数组应该传递给另一个活动。这是有效的，因为我可以传递一个正则`String[]`，但是当我尝试将一个转换`ArrayList`为数组时，我得到了错误。转换`ArrayList`为数组的正确方法是什么？

```
String[] tmpHtml = new String[(siteElements.size())];
tmpHtml = (String[]) siteElements.toArray();
Intent returnResult = new Intent();
returnResult.putExtra("elements", tmpHtml);
setResult(RESULT_OK, returnResult);
finish(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:34:13.490

您将 ArrayList 转换为 String 数组的方式是错误的。正确的方法是：

```
tmpHtml = siteElements.toArray(tmpHtml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:56:47.447

Changwei Yao的回答会起作用，但为什么不呢

```
// put to intent
returnResult.putStringArrayListExtra("elements", siteElements);
// Get from intent
returnResult.getStringArrayListExtra("elements"); 
```

# python - Python 字典语法错误

> ID：15399626
> 
> 赞同：2
> 
> 时间：2013-03-14T01:31:28.300
> 
> 标签：python, syntax, dictionary

我正在尝试声明`dictionay`如下

```
dict = { 'key1': "A"= "value" , 'B' = "Valueb" , 
         'key2': "A"= "valueA" , 'B' = "ValueC" ,
} 
```

我收到语法错误。有人可以帮我做错什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T01:35:58.953

首先 - 不要使用 dict 作为变量名，正确的语法如下

```
dVals = { 'key1': {"A": "value" , 'B':  "Valueb"} , 
         'key2': {"A": "valueA" , 'B': "ValueC"}} 
```

您可以[在教程中找到有关 python 字典语法的更多信息](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:14:45.813

在python中，字典键仅指字典值..但在您的声明中：'key1'：“A”=“value”，'B'=“Valueb”key1指的是A和B，它不起作用！

你应该试试这个：

```
'key1': {"A": "value" , 'B' : "Valueb" } 
```

我建议你阅读 python 的教程文档。

# javascript - 使用javascript根据一天中的时间实时打印出“打开”或关闭

> ID：15399628
> 
> 赞同：2
> 
> 时间：2013-03-14T01:31:40.977
> 
> 标签：javascript, setinterval

好的，我有一个餐厅网站。现在，我在 javascript 中有一个简单的 if 语句，它根据一天中的时间将一段文本从 Were open 更改为 Were Closed。但是，如果在手机上关闭浏览器时，它在技术上仍然在后台打开。因此，如果您重新打开浏览器，它会说在它应该关闭的时间之后打开，直到您刷新页面。我想找到一种方法让它实时更新。我曾尝试使用 setInterval 和 setTimeout 以及 while 循环来完成此操作，但到目前为止，什么都没有。我的意思是当我使用 setInterval 时，我可以打印时间并且它会实时增加。那么为什么它不能每秒运行我的 if 语句并打印所需的文本。

这是我的代码，到目前为止只显示它。

```
 var date = new Date().getHours();
 if ((date > 9) && (date < 20) && (day != 0)) {
        y="<span style=\"color:#07ed11\">We're Open!</span>";
    }
    else {
      y="<span style=\"color:#fc4b1c\">Sorry we're Closed.</span>"; 
    }
                    document.getElementById("open-close").innerHTML=y; 
```

我只希望它实时打印我们的，这样一旦时间到了，我就可以看到它从打开变为关闭

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T01:42:19.313

[jsFiddle](http://jsfiddle.net/ApX99/8/)示例

## 新版本

我冒昧地回去修改这个。我觉得这个版本会更好用

```
var checkOpenStatus = function () {
    var d = new Date();
    var date = d.getHours();
    var day = d.getDay();
    if ((date > 9) && (date < 20) && (day != 0)) {
        y = "<span style=\"color:#07ed11\">We're Open!</span>";
    } else {
        y = "<span style=\"color:#fc4b1c\">Sorry we're Closed.</span>";
    }
    document.getElementById("open-close").innerHTML = y;
    setTimeout(checkOpenStatus,15000);
};

checkOpenStatus(); 
```

它每 15 秒运行一次，而不是每 100 毫秒运行一次。

## 旧版

尝试这个

```
var checkOpenStatus = function () {
    var d = new Date();
    var date = d.getHours();
    var day = d.getDay();
    if ((date > 9) && (date < 20) && (day != 0)) {
        y = "<span style=\"color:#07ed11\">We're Open!</span>";
    } else {
        y = "<span style=\"color:#fc4b1c\">Sorry we're Closed.</span>";
    }
    document.getElementById("open-close").innerHTML = y;
}
setInterval(checkOpenStatus,100); //removed anon function 
```

`100`它每毫秒更新一次`setInterval`。您可以根据自己的喜好将其更改为更快或更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-13T08:16:13.260

```
 var checkOpenStatus =function () {
        var d = new Date();
        var date = d.getHours();
        var min = d.getMinutes();

  if ((date>7 || (date == 7 && min >= 30)) && (date < 22) && (day != 0)) {
           y = "<span style=\"color:#07ed11\">We're Open!</span>";
        } else {
           y = "<span style=\"color:#fc4b1c\">Sorry we're Closed.</span>";
        }
        document.getElementById("open-close").innerHTML = y;
    };
    checkOpenStatus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:48:37.090

侵入性较小的闭合样式：

```
var updateElement = function($el) {
    return function updater() {
        $el.text(new Date()); // dummy, your logic goes here...
        setTimeout(updater, 100);
    }
}

var fooUpdater = updateElement($("#foo")); 

setTimeout(fooUpdater,1000) 
```

# php - PHP用加号比较变量

> ID：15399634
> 
> 赞同：1
> 
> 时间：2013-03-14T01:31:52.507
> 
> 标签：php

如果我在 MySQL 表的 VARCHAR 列中有一个值 1+，我如何在 php 中比较这个变量？

```
 if ($days=="1+") 
```

似乎不起作用，那么如何比较它包括加号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:41:27.363

如果在您的数据库中，如果您将**days**列为**varchar**，那么您将获得确切的值（即使使用 +），所以：

```
if($days == "1+") is true 
```

更完整的代码供您尝试

```
$res = mysql_query("SELECT days FROM table");
while( $row = mysql_fetch_assoc($res) ) {
    if($row["days"] == "1+") echo 'found' . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:45:17.647

你能告诉我们你的查询吗？我有一种感觉，你错误地识别了这个问题。

也就是说，您是否尝试过类型转换？

```
if ((string) $days == "1+") 
```

# python - 在 python 中读取和写入 zip 列表

> ID：15399635
> 
> 赞同：1
> 
> 时间：2013-03-14T01:31:55.890
> 
> 标签：python, python-2.7

我正在寻找读写 python zip 列表 - 但我无法找到如何实现 ethis。所以，我有以下内容：

```
zipofalllists=zip([a],[b],[c],[d],[e]..) 
```

其中 [a],[b],[c],[d],[e] 只是相同维度的列表（由字符串、整数和浮点数组成的混合）。

现在，我喜欢在文本文件中写入和读取这个 zip 列表。起初我正在考虑将 zipofalllists 编写为 csv - 但我不确定这是正确的方法。

所以，我有类似的东西：

```
with open("master_csv_file.csv", "wb") as f:
    fileWriter = csv.writer(f, delimiter='|',quotechar='"', quoting=csv.QUOTE_MINIMAL)
    for row in zip(*masterzip):
        fileWriter.writerow(row) 
```

但是..我不确定这是正确的方法。这样我确实得到了一个 csv 文件，但我也不确定如何读取这个 csv 并将其解压缩回原始列表（这里是新手 - 请原谅这个 101 问题）。

对这里最好的/万无一失的方法感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:15:35.233

詹姆士，

因此，您所做的完全独立于将列表压缩在一起。基本上，压缩列表后，您将拥有一个包含更多列表的新列表。

之后，您想将其保存到文件中。由于您已成功压缩列表，我假设将数据结构写入文件是您想要的。

最简单的方法是将数据结构“腌制”到一个文件中，以便您以后可以将其拉回 - 请参阅此链接：[在此处输入链接描述](http://wiki.python.org/moin/UsingPickle)以获取更多信息。

祝你好运 - 如果你想做其他事情，请告诉我/我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:23:02.377

`json`很好，或者`pickle`。

```
import json

zipofalllists=zip([a],[b],[c],[d],[e])

# write
with open("out.json", "w") as out_f:
    json.dump(zipofalllists, out_f)

# read
with open("out.json", "r") as in_f:
    alllists = json.load(in_f) 
```

两者`pickle`和`json`用于*直接*`load([file object])`从文件*读取*和`dump([object], [file object])`写入文件。您还可以使用and直接将对象传输到/从它的*字符串*表示中传输。*`loads()``dumps()`*

# python - 无法在 Heroku 教程中使用 Python 启动工头

> ID：15399637
> 
> 赞同：41
> 
> 时间：2013-03-14T01:32:27.503
> 
> 标签：python, ruby, heroku, foreman, git-bash

我一直在尝试完成[本教程](https://devcenter.heroku.com/articles/python)，但遇到了`foreman start`线路问题。我正在使用 Windows 7、64 位机器，并试图在 Heroku Toolbelt 提供的 git bash 终端中执行此操作。

当我进入时，`foreman start`我收到：

```
sh.exe": /c/Program Files (x86)/Heroku/ruby-1.9.2/bin/foreman: "c:/Program: bad
interpreter: No such file or directory 
```

因此，我尝试通过键入`cmd`然后使用在 git bash 中输入 cmd `foreman start`（类似于对[这个问题的答案之一的评论](https://stackoverflow.com/questions/14157917/foreman-start-with-a-manual-path)）。这就是产生的结果：

```
Bad file descriptor
c:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/foreman-0.62.0
/lib/foreman/engine.rb:377:in `read_nonblock'
c:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/foreman-0.62.0
/lib/foreman/engine.rb:377:in `block (2 levels) in watch_for_output'
c:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/foreman-0.62.0
/lib/foreman/engine.rb:373:in `loop'
c:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/foreman-0.62.0
/lib/foreman/engine.rb:373:in `block in watch_for_output'
21:06:08 web.1  | exited with code 1
21:06:08 system | sending SIGKILL to all processes 
```

我不知道第二组错误试图告诉我什么，因为它似乎声称 engine.rb 正在运行的文件位置在我的计算机上甚至都不存在。

我已经查看了类似问题的其他答案，但是我没有收到类似的错误，因此不相信目前存在解决我的问题的方法。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-31T03:49:53.140

我有这个问题。我通过卸载 0.62 版的工头 gem 并安装 0.61 来修复它。

```
gem uninstall foreman
gem install foreman -v 0.61 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-30T00:58:10.403

是的，heroku-toolbelt-installer 目前无法正常工作（2013 年 8 月 30 日）。对于 Windows，以下步骤对我有用：

1.  卸载heroku（通过Windows“程序卸载”）
2.  将 heroku [https://toolbelt.heroku.com/windows](https://toolbelt.heroku.com/windows)安装到 C:\bin\heroku 中，即“无空格”
3.  [从http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)安装 ruby
4.  在 cmd 中运行“gem install foreman -v 0.61”。是的，“gem install foreman”安装了 v0.63，这对于“foreman start”不起作用
5.  在 cmd "foreman start" 中适用于 heroku hello-world 示例

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-27T21:20:15.027

例如，卸载 heroku 工具带并将其重新安装到其中没有空格的路径`C:\heorku\`会有所帮助。除此之外，heroku windows 安装程序目前已经严重损坏，这对我们来说并不是一件值得骄傲的事情。要解决工头的问题，您可以设置自己使用的环境变量`export VAR=VALUE`，然后使用您在 procfile 中输入的任何命令运行您的应用程序。

这将在未来得到改善。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T14:58:01.340

`gem install foreman -v 0.61`要添加的一件事是，如果您将 Heroku 安装到带有空格的目录中，那么当您尝试执行操作时（在 Windows 上）也会导致错误。

一旦我将 Heroku 重新安装到 C:\Heroku 而不是 C:\Program Files\Heroku 然后我就可以使用 Eric Speelman 的上述解决方案来完成这项工作。

# d3.js - d3.js 在 each() 之后使用 .attr()？

> ID：15399638
> 
> 赞同：0
> 
> 时间：2013-03-14T01:32:32.093
> 
> 标签：d3.js

是否可以在 selection.each() 之后使用 selection.attr()？我有以下简单的代码：

```
var line = d3.svg.line()...;

chart
    .selectAll('.gw')
    .selectAll('path.line')
    .each(function(d, i) {
        $this.computeXXX(d, ....);
    })
    .attr('d', line); 
```

我已经检查过“attr”函数是否被调用，但由于某种原因，当我返回并尝试检查构成选择的“路径”元素时，它们从未设置过“d”属性。“每个”电话的回报是什么？我检查了 d3 API 文档，它没有提到有任何类型的返回值，但似乎确实有。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:19:15.803

你当然可以使用`.attr()`after `.each()`。我根据[tributary](http://tributary.io/)的预制图表做了一个[非常丑陋的例子](http://tributary.io/inlet/5158278)。无论如何，您可以看到它用于绘制橙色笔划，然后修改其他属性。如果您发布代码的更多详细信息或放入[小提琴](http://jsfiddle.net/)或支流，我们/我可能会帮助您修复它。`.each()`

# file - 在 Photoshop 中更新文件

> ID：15399642
> 
> 赞同：0
> 
> 时间：2013-03-14T01:32:50.237
> 
> 标签：file, photoshop

我在 PhotoShop 中打开了一个文件（图像），但磁盘上的文件不断变化。想想我正在用另一个图像替换磁盘上的文件（但保持文件名相同），然后我如何让 Photoshop 看到新的更新图像。我发现这样做的唯一方法是再次进入文件->打开，它警告我磁盘上的文件已更改，我要继续吗...那么，是否有快捷方式来执行此操作（例如，对于网络浏览器来说，F5 之类的东西）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T03:15:32.183

F12 应该为您完成这项工作。

# image-processing - 使用 ImageMagick 将图像转换为灰度非常暗

> ID：15399653
> 
> 赞同：12
> 
> 时间：2013-03-14T01:34:14.077
> 
> 标签：image-processing, imagemagick, grayscale, brightness, monochrome

我通过以下方式转换了一堆“正常”的 JPG 照片

```
convert infile -colorspace Gray outfile 
```

为单色。然而，结果是所有图像都非常暗。这里有一个示例转换：[原始照片](http://www.halloleo.net/etc/external/im-mono-issue/Clouds%20over%20Hunter%20Park_pano_edited.jpg)和[转换后的单色图像](http://www.halloleo.net/etc/external/im-mono-issue/Clouds%20over%20Hunter%20Park_pano_edited_mono.jpg)。

有没有更好的方法将使用 ImageMagick 的照片般逼真的图像转换为灰度？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T04:27:00.253

该[文档](http://www.imagemagick.org/script/command-line-options.php#colorspace)指出，在更改颜色空间时，颜色会在转换之前从其原始伽马转换为线性。您需要将它们转换回适当的伽玛。

```
convert infile -colorspace Gray -gamma 2.2 outfile 
```

# meteor - 如何检测 Meteor 中的反应元素何时更新

> ID：15399656
> 
> 赞同：4
> 
> 时间：2013-03-14T01:34:48.633
> 
> 标签：meteor

我有一个标准模板，它使用集合中的反应元素列表执行 {{#each}}。

我遇到的问题是，我想在集合中更新特定元素时对其进行字体属性更改，只是为了提请注意它已更新的事实。

我一直无法找到一种好的/优雅的方式来做到这一点。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:34:00.153

您可能想检查光标观察，当某些文档更新或更改时，您可以执行任何操作，例如调用事件。

```
li#model-1273927381273 model-1273927381273

Modal.find().observe
    changed: (newDocument, oldDocument) ->
        ($ '#model-'+ newDocument._id).action()

http://docs.meteor.com/#observe

i use similar code currently but dont know how to prevent init documents load. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T13:45:30.023

与您的问题类似，每当特定会话变量（GPS 位置）发生变化时，我都想“刷新”一个 div。我的解决方案如下。

在 /client/main.js 中：

```
Session.setDefault('lat', 0);
Session.setDefault('lng', 0);
Session.setDefault('locationChange', 1); 
```

和：

```
Meteor.setInterval(function() {
    getLocation();

}, 5000); 

function getLocation() {
    Location.locate(function(pos){
        var oldLat = Session.get("lat");
        var oldLng = Session.get("lng");

        Session.set('lat', pos.latitude);
        Session.set('lng', pos.longitude);

        if (oldLat != Session.get("lat") || oldLng != Session.get("lng"))
            Session.set("locationChange", -1 * Session.get("locationChange"));

    }, function(err){
        console.log("Location not obtained: ", err);
    });     
} 
```

在模板中，比如 /client/templates/someTemplate.html，我想提醒用户注意更改：

```
<span class="glyphicon glyphicon-screenshot" aria-hidden="true" data-locationChange='{{locationChange}}'></span> 
```

在关联的 javascript 文件中，例如 /client/templates/someTemplate.js：

```
Template.appBody.helpers({
    locationChange: function() {
        $("#locationIcon").fadeOut(100).fadeIn(100);

        return Session.get("locationChange");
    },    
}); 
```

所以，现在，只要 GPS 坐标发生变化（不一定是在刷新时），'locationChange' 的值就会从 1 翻转到 -1，反之亦然。这会触发 'locationChange' 帮助器，它会更新（无意义的）属性 'data-locationChange'，但也会触发一些 jQuery 脚本来闪烁模板中的 span。

# intellij-idea - IntelliJ 多行编辑在每行末尾？

> ID：15399657
> 
> 赞同：1
> 
> 时间：2013-03-14T01:34:53.143
> 
> 标签：intellij-idea, edit, multiline

在 IntelliJ 中，我们可以使用 Alt + Shift + Insert 在每行的相同位置进行多行编辑。当每行的长度不同时，我们可以在每行的末尾进行多行编辑吗？一个使用场景是在每行末尾编辑分号。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-04T01:15:10.313

现在这是可能的。像往常一样从任意列开始进行多行编辑，然后按“END”键，插入点将移动到每行的末尾。还支持 HOME 和 CTRL + 向左或向右箭头。

# ruby-on-rails - Rails : Ruby Gem Local 版本可以，但是 github 版本不行，为什么？

> ID：15399658
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:34:54.727
> 
> 标签：ruby-on-rails, rubygems

编辑：对于某些问题，我不想再把这个问题留在这里了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:48:20.693

该 URL 中似乎不存在该存储库。我在 github 页面上看不到存储库，并且在尝试使用 bundler 安装 gem 时出现以下错误：

```
Fetching git@github.com:quandl/wikimeta.git
ERROR: Repository not found. 
```

您从哪里下载本地 gem？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:07:49.273

经过大量的研究和试验，最后一件事对我有用。我必须在我的 Gemfile 中指定我的 wikimeta gem 的 github 存储库的分支。

```
gem 'gem_name', :git => 'git@github.com:user_name/gem_name.git' , :branch => 'develop' 
```

然后，它开始完美地工作。

# javascript - 在javascript或jquery中动态添加多维数组

> ID：15399665
> 
> 赞同：2
> 
> 时间：2013-03-14T01:35:38.480
> 
> 标签：javascript, jquery, arrays, multidimensional-array

问题是我需要动态添加一个多维数组，请看下面的例子：

```
var list = [];
var listname;
var height;
var width;

list.push(listname);
list[listname] = height;
list[listname] = width; 
```

上面的代码不是我所期望的，应该是 `[listname => [[0]=>height,[1]=>width]]`，如果我不想为listname创建一个数组，我该怎么办，我可以动态添加一个多维数组吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:41:01.890

不要将 Arrays 与[Maps](http://en.wikipedia.org/wiki/Associative_array)混淆。它们是不同的基本数据类型¹

```
var myLists = {};       // name => array
var listname = "stuff"; // why not?
var height = 1;
var width = 2;

// there is no Object.push, but we can assign a property by name
myLists[listName] = [height];
// then we can Array.push into the array we just assigned
myLists[listName].push(width); 
```

然后，我的列表：

```
{
   stuff: [1, 2]
} 
```

* * *

¹ JavaScript*主要*保持这种区别 - 如果一个人不向数组添加随机属性或以其他方式伪造一个对象以表现得像一个数组。

# c# - 在 Linq 中用 3 个表分组

> ID：15399667
> 
> 赞同：1
> 
> 时间：2013-03-14T01:35:45.473
> 
> 标签：c#, .net, sql, linq, grouping

我对 LINQ 非常陌生，并且在对表格进行分组时遇到了很大的麻烦，因此所有内容都加在一起。我试图让这个显示所有购买超过 50 美元的客户，即使他们有多次购买。在 SQL 数据库中使用 linq。这是我到目前为止所拥有的，请帮助。

```
 public class TopCustomerVM
 {
    public string Name { get; set; }
    public decimal DollarsSold { get; set; }

    public static List<TopCustomerVM> GetResults()
    {
        ACEEntities db = new ACEEntities();
        return (from c in db.Customers
                join o in db.Orders on c.CustomerId equals o.CustomerId
                join l in db.OrderLines on o.OrderId equals l.OrderId

                into x
                select new TopCustomerVM {                           
                        Name = c.FirstName + c.LastName,
                        DollarsSold = x.Sum(asdf => asdf.UnitCost * asdf.Quantity)
                       })
                       .OrderByDescending(lkj => lkj.DollarsSold)
                       .Where(lkj => lkj.DollarsSold > 50)
                       .ToList();            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:28:31.953

我相信这样的事情会给你想要的输出：

```
from record in 
    (from c in Customers
    join o in Orders on c.Id equals o.CustomerId
    join ol in OrderLines on o.Id equals ol.OrderId
    let customerAndLine = new { Name = c.FirstName + ' ' + c.LastName, DollarsSold = ol.UnitCost * ol.Quantity }
    group customerAndLine by customerAndLine.Name into grp  
    select new { Name = grp.Key, DollarsSold = grp.Sum(r => r.DollarsSold) })
where record.DollarsSold > 50
orderby record.DollarsSold descending
select record 
```

# javascript - 需要一种方法来做 window.location.href(dynamicHTMLstring)

> ID：15399680
> 
> 赞同：0
> 
> 时间：2013-03-14T01:37:52.347
> 
> 标签：javascript, jquery, browser-history

我知道如何将 HTML 写入新窗口，`window.open()`但这当然会导致新窗口。

我希望将我的 HTML 输出字符串写入当前窗口。效果就像点击一个链接。目的是确保我有浏览器历史记录。

当我使用 引用 URL 时`window.location.href()`，我无法编写内容，因为 href 属性必须是 URL。

有没有办法将两者结合起来，并将一个新页面加载到浏览器历史记录中，该页面使用 HTML 的字符串值而不是文件？不允许服务器端参与。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:26:13.407

HTML5 为 JavaScript 带来了新的 History API。这允许您使用 JS 将内容推送到浏览器历史记录。有了这个，你也许能够完成你正在寻找的东西。如果这没有太大帮助，请澄清您的问题，因为很难说出您的要求。

编辑：
我认为这就是你要找的。看看[这个例子](http://html5doctor.com/demos/history/)。当您单击诸如“fluffy”之类的链接时，该站点实际上只是替换了站点正文的文本，并在浏览器的历史记录中添加了一个条目，以使用户看起来像是实际上转到了不同的页面。实际上，浏览器从来没有发出过另一个请求，也从来没有打开过另一个页面，这只是 javascript 的诡计让它看起来那样。

我发给你的演示链接的解释，有很多很好的信息：
[http ://html5doctor.com/history-api/](http://html5doctor.com/history-api/)

**jsFiddle 中的一个演示：**

[我在 jsFiddle](http://jsfiddle.net/ByZpW/4/)中对我所说的内容做了一个小演示。如果你看，你会看到一个链接。如果您要右键单击并查看包含内容的那个小方块的来源，您会看到您正在查看页面的来源“ [http://jsfiddle.net/ByZpW/4/](http://jsfiddle.net/ByZpW/4/) ”。

*点击链接。*

现在您将在链接上看到新内容和新文本。如果您再次查看那个小方块的源代码，您会看到您正在查看页面的源代码“ [http://fiddle.jshell.net/lolnewpageonjsfiddledomain/](http://fiddle.jshell.net/lolnewpageonjsfiddledomain/) ”。

显然 jsFiddle 不允许我向他们的域添加新页面，所以发生了什么？我告诉 javascript 我去了别的地方，它相信了我。现在，如果您点击内容方块并点击`backspace`，您会看到您被带回“第一页”。如果您查看源，您将确认您回到了原始位置。当然，这都是一个天大的谎言。我们没有去任何地方，一切都是用 JavaScript 做的。

注意线：

```
// History magic here
history.pushState({link: link, content: content}, "test", $(this).attr("href")); 
```

这就是我们使用 JS 说“假装我去了别的地方，即使我还在这里”。

# sql - 使用变量的 Oracle SQL 问题

> ID：15399681
> 
> 赞同：1
> 
> 时间：2013-03-14T01:38:09.580
> 
> 标签：sql, oracle, plsql

这里有一些简单的问题，但我已经工作了这么多小时无法集中注意力，所以希望其他头脑清醒的人可以回答这个简单的问题，我似乎无法在 SQL Developer 中找到适合我的好答案

```
DECLARE
  TEST123 NUMBER;
BEGIN
  SELECT COUNT(APP_ID) INTO TEST123 FROM applicant_credit;
  SELECT * FROM APPLICANT_CREDIT;
END; 
```

当我运行这对我来说似乎很容易的时候，我收到了错误：

错误报告：ORA-06550：第 5 行，第 3 列：PLS-00428：此 SELECT 语句 06550 中应有一个 INTO 子句。00000 -“行 %s，列 %s：\n%s” *原因：通常是 PL /SQL 编译错误。

另外，当我向它发送硬编码数字时，我创建了一个存储过程并可以工作，但是我需要将前面查询中提到的申请人信用记录的记录数传递给它，这正是我真正想要的。执行存储过程在上述块中的工作方式是否与在块外的工作方式相同。那么这应该工作吗？

```
DECLARE
  TEST123 NUMBER;
BEGIN
  SELECT COUNT(APP_ID) INTO TEST123 FROM applicant_credit;
  EXECUTE UPDATE_DECISION(102, 1, 1, 1, 1, TEST123);
  SELECT * FROM APPLICANT_CREDIT;
END; 
```

当我运行它时，我得到：

错误报告：ORA-06550：第 5 行，第 11 列：PLS-00103：在预期以下情况之一时遇到符号“UPDATE_DECISION”：

:= 。( @ % ; 立即符号 ":=" 被替换为 "UPDATE_DECISION" 以继续。

在这里碰壁，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:24:23.857

对于第一个 sql 语句，您会收到该错误，因为您无法以这种方式在 plsql 块内执行 select * 语句。您可以使用游标或批量收集语句或任何其他方式将 select * 的输出“重定向”到记录集合中。

```
DECLARE
  TEST123 NUMBER;
  cursor c_cur
  is select col_1, col_2 from application_credit;
BEGIN
  SELECT COUNT(APP_ID) INTO TEST123 FROM applicant_credit;
  -- loop through the cursor if required
END; 
```

您的第二个 sql 语句出错，因为您不能在 plsql 块内使用执行语句（除非它是完全不同的立即执行）。因此，您可以按如下方式修改代码：-

```
DECLARE
  TEST123 NUMBER;
  cursor c_cur is
  select col1, col2 from applicant_credit;
BEGIN
  SELECT COUNT(APP_ID) INTO TEST123 FROM applicant_credit;
  UPDATE_DECISION(102, 1, 1, 1, 1, TEST123);
  -- loop through the cursor if required
END; 
```

一些有用的链接：-

[http://www.techonthenet.com/oracle/cursors/declare.php](http://www.techonthenet.com/oracle/cursors/declare.php)

[http://www.oracle.com/technetwork/issue-archive/2008/08-mar/o28plsql-095155.html](http://www.oracle.com/technetwork/issue-archive/2008/08-mar/o28plsql-095155.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:14:49.597

除非您尝试学习它，否则您根本不需要 PL/SQL。一切都只能用 SQL 来完成。

```
DECLARE
  TEST123 NUMBER:= 0;
BEGIN
  UPDATE_DECISION(102, 1, 1, 1, 1, TEST123);

 -- The outer query is not required, this is only to show you the correct syntax.
  SELECT * INTO TEST123 -- you are selecting from applicant_credit
    FROM 
   (
    SELECT COUNT(app_id) FROM applicant_credit
   );
END;
/ 
```

# asp.net - .NET 4.5 的多个版本 - 两台计算机对待 .NET 4.5 的方式不同？

> ID：15399684
> 
> 赞同：1
> 
> 时间：2013-03-14T01:38:46.707
> 
> 标签：asp.net, .net, visual-studio-2012, .net-4.5

我正在两台机器上开发，一台台式机，一台笔记本电脑。桌面运行 Windows 7，笔记本电脑运行 Windows 8。两者都安装了 .NET 4.5，我使用的是 Visual Studio 2012。

我做的大部分开发都是在台式机上，但最近我去笔记本电脑上工作，当我打开我的解决方案时得到以下提示。此外，无论我选择什么，当我尝试构建解决方案时，它都会使 VS2012 崩溃。

![在此处输入图像描述](../Images/7f5a83e181c75e49703e28e2ceb5d588.png)

它似乎无法识别 .NET 4.5 的两个版本？这甚至可能吗？

# html - Firefox 19：如何按类型过滤上传的文件？

> ID：15399685
> 
> 赞同：1
> 
> 时间：2013-03-14T01:38:49.470
> 
> 标签：html, firefox, web-applications, file-upload

如何在 Firefox 中获得文件上传控件以仅允许 .xlsx 文件？我已经将“application/vnd.openxmlformats-officedocument.spreadsheetml.sheet”指定为接受的类型（我使用的是 Rails，所以使用了 file_field_tag 元素）。

上面的过滤器在 Chrome 上运行良好，但在 Firefox 中似乎没有任何效果。

# python - 有没有办法将输入关联为列表的名称？

> ID：15399686
> 
> 赞同：0
> 
> 时间：2013-03-14T01:38:50.767
> 
> 标签：python

我希望列表的名称是 raw_input，我该如何在 python 2.7 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T01:41:23.580

事情已经很糟糕了。

```
# This is a horrible monstrosity, but it does what you ask
name = raw_input('name> ')
globals()[name] = [1, 2, 3] 
```

您应该改用正确的字典。

```
x = { }
name = raw_input('name> ')
x[name] = [1, 2, 3] 
```

列表实际上没有名称。

```
x = [1, 2, 3] 
```

叫什么名字`[1, 2, 3]`？错误的问题，它没有名字，它只有一个值（和内存中的一个位置）。只有变量有名字。

# java - 在数组之间转换

> ID：15399687
> 
> 赞同：2
> 
> 时间：2013-03-14T01:39:07.930
> 
> 标签：java, casting, wicket

我需要获取容器的所有子文本字段，检票口提供了一个名为[visitChildren的方法](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/MarkupContainer.html#visitChildren%28java.lang.Class%29)

然后我做类似的事情：

```
(FormComponent<?>[]) visitChildren(TextField.class).toList().toArray(); 
```

这个例子不起作用，我得到的例外是：

```
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Lorg.apache.wicket.markup.html.form.FormComponent; 
```

但如果我这样做：

```
List<Component> list = visitChildren(TextField.class).toList();
FormComponent<?>[] array = new FormComponent[list.size()];
for (int x = 0; x < list.size(); x++) {
    array[x] = (FormComponent<?>) list.get(x);
} 
```

它工作，为什么会发生这种情况？据我所知，这两种方法都应该有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:13:49.840

第一个（损坏的）示例等效于：

```
List<Component> list = visitChildren(TextField.class).toList();
FormComponent<?>[] array = (FormComponent<?>[]) list.toArray(); 
```

根据 Javadoc of `toArray()`，返回类型是`Object[]`但是您试图将其强制转换为`(FormComponent<?>[])`，这是非法操作。

棘手的部分是我们没有从这里进行演员`Object`阵容`FormComponent<?>`。

相反，代码尝试**将****数组**`Object`转换为**`FormComponent<?>`**

 **为了解决这个问题，请尝试使用替代`toArray`方法，该方法将所需返回类型的对象作为参数：

```
FormComponent<?>[] array = list.toArray(new FormComponent<?>[0]) 
```

（请注意，我们传递的是一个空数组`FormComponent<?>`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:54:02.257

试试这个代码作为解决方案：

```
toArray(new FormComponent<?>[0]) 
```**

# java - 卡在 Java 程序 (java.io.*;) 上？

> ID：15399688
> 
> 赞同：0
> 
> 时间：2013-03-14T01:39:16.203
> 
> 标签：java

我的程序的目的是询问温度（F）是多少以及外面的天气状况如何。

天气状况可以是晴天（1），下雨（2），多云（3）或下雪（4）。数字1-4将用于说明天气状况（我不知道该怎么做任何其他方式...）

然后，根据 和 的组合，`temp`我`weatherCondition`希望能够根据 和 的组合显示 10 种选择中的 3 件`temp`服装`weatherCondition`。

我还在学习，所以如果我的问题或问题看起来很平凡，我深表歉意......

在用户输入`temp`和的那一刻`weatherCondition`，根据两个输入的组合给出响应（例如炎热-阳光、冰冻-下雪）。

相反，我想创建一个或多个 txt 文件，并将每个文件命名为*hotSunny.txt 之*类的名称。在这些 txt 文件中，我列出了 10 种服装。我最终希望程序识别哪个组合与其适当的 txt 文件匹配，然后随机显示 10 个中的 3 个。

**到目前为止我所拥有的...**

```
 public static void main(String[] args)
   {
      double temperature;    
      int weatherCondition;  
      String input;          

      input = JOptionPane.showInputDialog("What is " +
                                "the current temperature?");
      temperature = Double.parseDouble(input);

      input = JOptionPane.showInputDialog("Sweet I now know the temperature! " +
             "Now please take a look out the nearest window is it Sunny , Rainy ," +
             " Cloudy or Snowy? " +
             "(1 = Sunny) (2 = Raining) " +
             "(3 = Cloudy) (4 = Snowing)");

      weatherCondition = Integer.parseInt(input);

      if (temperature <= 32){
          if (weatherCondition == 4){
              freezingSnowing();
          } else if (weatherCondition == 3){
              freezingCloudy();
          } else if (weatherCondition == 2){
              freezingRain();
          } else {
              freezingSunny();
          }
    }..........
      else if ((temperature >= 33) && (temperature <= 50)) {

      else if ((temperature >= 51) && (temperature <= 75)) {

      else if ((temperature >= 76) && (temperature <= 140)) {

public static void freezingSnowing()       
{
   JOptionPane.showMessageDialog(null, "It's is snowing! I recommend that you dress very warm" +
                         "and wear a large coat that is preferably water proof.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:15:46.500

您的`freezingSnowing`方法应如下所示：

```
public static void freezingSnowing() {
    file = new File(MyWeatherApp.class.getResource
                                (path + "freezingSnowing.txt"));
                   // path to the txt file
                   // where path is the local path to the file
    scanner = new Scanner(file);

    ArrayList<String> garments = new ArrayList<>(10);
    while(scanner.hasNextLine()) {
        garments.add(scanner.nextLine());
    }

    ArrayList<Integer> indices = new ArrayList<>(3);
    for(int i = 0; i < 3; i++) {
        while(true) { // watch out for duplicates
           int rand = (int)(Math.random() * 9);
           if(!indices.contains(rand))
               break;
        }
        indices.add(rand);

    JOptionPane.showMessageDialog(null, "It's is snowing! " +
                "I recommend that you dress very warm " +
                "and wear " + garments.get(indices.get(1)) +
                ", " garments.get(indices.get(2)) +
                " and " + garments.get(indices.get(3)) +
                ".");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:32:00.963

这是我随机挑选物品的版本。

```
public static void main(String[] args) {
    String[] weatherCond = new String[] {"cold", "hot"};
    ArrayList<String> garmets = new ArrayList<String>();
    garmets.add("clothes");
    garmets.add("hat");
    garmets.add("gloves");
    garmets.add("coat");
    ArrayList<String> pick;
    int ITEM = 3;

    int temperature = 29;

    if (temperature >= 30) {  // hot condition
        System.out.println("weather condition " + weatherCond[0]);
        pick = garmets;
        for (int i = 0; i < ITEM; i++) {
            int idx = (int) (Math.round(Math.random() * pick.size()) % pick.size());        
            System.out.print(pick.get(idx) + " " );
            pick.remove(idx);
        }
    } else {
        System.out.println("weather condition " + weatherCond[1]);
        pick = garmets;
        for (int i = 0; i < ITEM; i++) {
            int idx = (int) (Math.round(Math.random() * pick.size()) % pick.size());        
            System.out.print(pick.get(idx) + " " );
            pick.remove(idx);
        }
    }
} 
```

此外，如果您想针对特定天气条件使用一组固定的服装，您可以使用**哈希**图，该哈希图使用天气条件作为键，服装组作为值。

# javascript - 使用javascript双击一个段落并且所有段落都更改

> ID：15399689
> 
> 赞同：0
> 
> 时间：2013-03-14T01:39:23.233
> 
> 标签：javascript, colors, paragraph

假设我有 5 个段落，如果我双击一个段落并且所有段落都改变颜色，我该如何使用 javascript 来做到这一点？我必须使用 javascript 而不是别的。甚至不使用jquery。

我现在拥有的代码只会将该段更改为蓝色而不是全部....如果我双击任何...我该怎么做...

```
var allPara=document.getElementsByTagName("p");

for(i=0;i<allPara.length;i++)
{
    allPara[i].ondblclick=function()
    {
    this.style.color="blue";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:47:45.240

最简单的方法是使用 CSS 来帮助您。

更改所选段落的类名后，您可以使用`getElementsByClassname`来选择所有段落（[http://blog.whatwg.org/the-road-to-html-5-getelementsbyclassname ）。](http://blog.whatwg.org/the-road-to-html-5-getelementsbyclassname)

或者，只需执行`getElementsByTagName`(h [ttps://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName) ) 并更改未选择段落的类名 (CSS)，这将改变颜色。

# ios - 为什么这个数组的对象计数返回 0？

> ID：15399690
> 
> 赞同：0
> 
> 时间：2013-03-14T01:39:41.760
> 
> 标签：ios, objective-c, nsarray

我的数组：

```
NSMutableArray *squareLocations;

CGPoint dotOne = CGPointMake(1, 1);
[squareLocations addObject:[NSValue valueWithCGPoint:dotOne]];

CGPoint dotTwo = CGPointMake(10, 10);
[squareLocations addObject:[NSValue valueWithCGPoint:dotTwo]];

CGPoint dotThree = CGPointMake(100, 100);
[squareLocations addObject:[NSValue valueWithCGPoint:dotThree]];

int num = [squareLocations count];

for (int i = 0; i < num; i++)
{
    NSValue *pointLocation = [squareLocations objectAtIndex:i];
    NSLog(@"%@", pointLocation);
} 
```

当我询问`squareLoctions`对象计数时，它返回零？但就在上面要求计数时，我添加了三个 NSValue 对象？？？有人有想法么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T01:40:56.520

您需要先初始化数组

```
NSMutableArray *squareLocations = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T01:59:09.757

该数组正在返回`0`，因为您实际上并没有询问数组的大小。

您假设为数组的对象既没有被分配，也没有被正确初始化。

您正在询问当前初始化为 is 的实例`nil`。有趣的是它不会崩溃，因为 Objective-C 将允许您在`nil`实例上调用任何方法（选择器）（嗯，这个术语并不完全正确）。只是，当被要求返回值时，这些实例`nil`将始终返回`0`、`NO`、或取决于预期的类型。换句话说，它总是返回一个值，当被转换为预期类型时，将设置为零。`0.0f``0.0``nil`

* * *

要解决这个问题，您需要分配、初始化一个实例并将其分配`NSMutableArray`给您的变量。

这可以使用适当的`alloc`和`init`方法组合来完成：

```
NSMutableArray *squareLocations = [[NSMutableArray alloc] init]; 
```

或者您可以使用其中一种方便的构造函数，例如：

```
NSMutableArray *squareLocations = [NSMutableArray array]; 
```

* * *

下次遇到这种奇怪的行为时，请检查有问题的实例是否不是`nil`第一个。

# shell - 使用 awk 和排序后重新插入分隔符

> ID：15399698
> 
> 赞同：0
> 
> 时间：2013-03-14T01:40:35.220
> 
> 标签：shell, sorting, awk

我对脚本很陌生，所以如果这是一个非常明显的问题，请原谅我。我正在 Bourne shell 中编写约会跟踪脚本（不幸的是必须使用 Bourne）。我需要按日期顺序对约会进行排序，每个约会由冒号分隔的 7 列组成，如下所示：

> 1:26:2013:星期六:16.00:17.30:烧烤
> 1:24:2013:星期四:14.00:15.10:CSS 会议
> 1:25:2013:星期五:12.00:12.30:商务午餐
> 1:27:2013:星期日:10.00 :17.30:志愿者海滩清理
> 2:24:2013:Sunday:20.00:24.00:Party
> 2:11:2013:Monday:16.00:17.30:牙医拜访
> 1:24:2013:Thursday:11.00:11.45:项目会议
> 3:24 :2013:Sunday:8.00:11.30:Church picnic
> 2:8:2013:Friday:12.00:17.30:Halo 锦标赛
> 1:19:2013:Saturday:16.00:20.30:Poker

这是我到目前为止所拥有的，它完全符合我的要求，只是它去掉了我的冒号分隔符。`awk -F : '{print $1, $2, $3, $4, $5, $6, $7 |"sort -k 1,1 -k 2,2n -k3,3n -n -o appts.txt"}' appts.txt`

> 1 19 2013 星期六 16.00 20.30 扑克
> 1 24 2013 星期四 11.00 11.45 项目会议
> 1 24 2013 星期四 14.00 15.10 CSS 会议
> 1 25 2013 星期五 12.00 12.30 商务午餐
> 1 2013 年 26 日星期六 16.00 17.30 烧烤

如何取回冒号分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:51:07.173

最简单的答案是，首先不要删除它们。至少对于我的排序版本，它可以按预期与原始文件一起工作：

```
sort -k 1,1 -k 2,2n -k3,3n -n -o appts2.txt < appts.txt 
```

不过，它也支持显式指定字段分隔符 ( `-t`)。所以为了安全起见，你可以说：

```
sort -k 1,1 -k 2,2n -k3,3n -n -t: -o appts2.txt < appts.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:50:50.823

我很荒谬......不知道为什么我首先使用 awk 。

这做了我想要的很好

```
sort -k 1,1 -k 2,2n -k3,3n -n -t: -o appts.txt appts.txt 
```

# jquery - 提交事件中的代码在表单提交之后还是之前执行？

> ID：15399699
> 
> 赞同：0
> 
> 时间：2013-03-14T01:40:45.233
> 
> 标签：jquery

里面的代码是在表单提交**之前**还是**之后**`$('form').submit(function() {});`执行的？

 ****例如，如果我在那里编辑其中一个输入的值，新值是否会包含在请求中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:41:58.633

它在表单提交之前执行。否则页面会改变，并且由于 JavaScript 环境与页面相关联，它也会改变。这会让你在一个可能相当奇怪的环境中执行。

```
$("form").submit(function(){
    $(this).append('<input type="hidden" name="foo" value="bar" />');
}); 
```

将意味着每个表单在提交之前都会附加该输入（假设启用了 JS）。

相似地：

```
$("#someForm").submit(function() {
    if (/* something */) {
        alert("Form invalid"); //alert() is terrible, but you get the point
        return false; //Blocks submission
    } else {
        return true;
    }
}); 
```

（注意：根据情况和其他绑定，使用`preventDefault`可能[更有意义](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)——我只是懒惰。）****

# javascript - 如何在javascript中为单选按钮分配一个值

> ID：15399706
> 
> 赞同：1
> 
> 时间：2013-03-14T01:41:08.797
> 
> 标签：javascript, radiobuttonlist

我需要做的是将页面上的 4 个不同的值（单击时）变成一个数字，我可以用它来计算图表中的输出。

[http://jsfiddle.net/nlem33/eyGMu/7/](http://jsfiddle.net/nlem33/eyGMu/7/)

```
var min_value = 0,
  max_value = 10,
  units = 0,
  price = 0;
var sliderHandler = function (event, ui) {
  var newdata = [],
    newdata2 = []
    data = [],
    sum = 0;
  if(this.id === 'slider1') {
    $('#slider1_value').html(ui.value);
    units = ui.value;
  } else {
    $('#slider2_value').html('$' + ui.value);
    price = ui.value;
  }
  for(var i = 0; i < 12; i++) {
    data.push(units * price);
    for(var j = 0; j < i; j++)
    sum += data[j];
    newdata.push(229 * units * i);
    newdata2.push(sum);
  }
  console.log(newdata);
  chart.series[0].setData(newdata2);
  chart.series[1].setData(newdata);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:11:58.630

添加一个名为`selected`并使用此事件处理程序的变量：

```
var selected = 1;
$(document).ready(function() {
    $(".product").click(function(){
        selected = this.id.replace("product", "");
        alert(selected);
    });
}); 
```

请参阅[更新的小提琴](http://jsfiddle.net/eyGMu/8/)。然后您可以在任何地方使用选定的变量。

为了使用单选按钮的值而不是其 id 中的数字，请改用以下代码：

```
var selected = 1;
$(document).ready(function() {
    $("input[name=chooseProduct]").change(function(){
        selected = $(this).val();
        alert(selected);
    });
}); 
```

有关该示例，请参见下一个[更新的小提琴](http://jsfiddle.net/eyGMu/12/)。

# php - 为什么会出现 t 字符串语法错误？

> ID：15399712
> 
> 赞同：0
> 
> 时间：2013-03-14T01:41:43.987
> 
> 标签：php

我不明白为什么这给了我一个 t 字符串语法错误。在我看来是正确的！有人可以帮我吗？我已经进行了几周的 php 学习尝试，只是试图理解这种混乱。我知道这是非常愚蠢的事情，但我无法弄清楚！

```
<?php 
// set up some variables 
// the toys 
$item1 = "X−ray specs"; 
$item2 = "Watch with built−in poison gas canister";
$item3 = "Exploding chewing gum"; 
// the price 
$item1_cost = 100; $item2_cost = 250; $item3_cost = 32; 
// the amount
$item1_qty = 1; $item2_qty = 2; $item3_qty = 15; 
// calculate cost for each item 
$item1_total = $item1_cost * $item1_qty;
$item2_total = $item2_cost * $item2_qty; 
$item3_total = $item3_cost * $item3_qty; 

// calculate grand total
$grand_total = $item1_total + $item2_total + $item3_total; 
//special secret agent discount − 10% 
$discount = 10; 
// which reduces total bill amount 
$amount = ($grand_total * 10)/100;
// the bottom line 

$net_total = $grand_total − $amount; 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:45:44.683

# html - setTimeout 后未找到对象方法

> ID：15399715
> 
> 赞同：0
> 
> 时间：2013-03-14T01:41:56.953
> 
> 标签：html, canvas, timeout, game-loop

```
LoCEngine.prototype.runGame = function() {
    // Initiate our game loop
    ctx.clearRect(0, 0, 800, 600);
    this.drawScene(this.curScene);
    if(this.gameRunning) {
            window.setTimeout(Engine.runGame, 1000 / this.framerate);
    }
} 
```

LoCEngine 是我一直在构建的一个实验性引擎，用于了解 HTML5 Canvas 游戏的来龙去脉。到目前为止一直很开心，直到我进入游戏循环。runGame 会随着时间的推移而被调用，这会清除 Canvas 并调用 drawScene 函数。

LoCEngine 实例存储在变量 Engine 中（不确定在 setTimeout 中使用它是否是最佳实践......请告知）

它会为第一帧正确调用 this.drawScene，但是在超时（30 FPS）时它会抛出一个异常说：

```
TypeError: this.drawScene is not a function 
```

不太清楚为什么......我敢肯定这只是我没有遇到过的关于 JS 的事情。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:03:08.103

您需要这样做才能正确调用方法：

```
LoCEngine.prototype.runGame = function() {
    // Initiate our game loop
    ctx.clearRect(0, 0, 800, 600);
    this.drawScene(this.curScene);
    if(this.gameRunning) {
            window.setTimeout(function() {
                Engine.runGame()
            }, 1000 / this.framerate);
    }
} 
```

当您传递`Engine.runGame`到 时`setTimeout()`，它只是传递方法引用本身，而 的对象部分会丢失。因此，当它`setTimeout()`被. 解决方法是使用我展示的匿名函数自己调用它。`this``this`

也可以使用`.bind()`which 在内部为您做同样的事情。但是，`.bind()`旧浏览器不支持，所以我倾向于只使用匿名函数。

# algorithm - 列出所有可能的数字组合的快速方法，这些数字的总和为 const 数字

> ID：15399721
> 
> 赞同：2
> 
> 时间：2013-03-14T01:42:35.337
> 
> 标签：algorithm

假设我们需要列出四个数字 A、B、C、D。A+B+C+D 的和为 10，每个数字的值在 [0, 10] 范围内。

找出所有可能的组合。

蛮力方式如下：

```
for (int A = 0; A <=10; ++A)
  for (int B = 0; B <=10-A; ++B)
  {
   if (A + B > 10) break;    
   for (int C = 0; C <=10-A-B; ++C)
   {
    if (A + B + C > 10) break;
    for (int D = 0; D <=10-A-B-C; ++D)
    {
       if (A + B + C + D == 10)
       {
         cout << "A: " << A << ",B: " << B << ",C: " << C << ",D: " << D << endl;
         break;
       }
       else if (A + B + C + D > 10)
         break;
    }
   }
  } 
```

Q> 有没有更好的解决方案？

仅供参考：根据@rici 的建议更新代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:01:06.083

您要求一种枚举[整数分区的](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)方法。链接的维基百科页面列出了几种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:48:09.817

像这样的东西怎么样：

```
void print4Partitions(int num) {
    for (int A=1; A<num-3; A++) {
        for (int B=A+1; B<num-A-2; B++) {
            for (int C=B+1; C<num-(A+B)-1; C++) {
                int D = num-A-B-C;
                printf("%d %d %d %d\n", A, B, C, D);
            }
        }
    }
} 
```

这里的主要思想是：

*   你真的不需要循环最后一个数字：它可以简单地计算，正如@nci 提到的那样， as `A`, `B`, `C`，并且要作为分区的数字唯一地确定`D`。
*   您可以限制循环而不是测试和使用`break`语句，这应该会导致更快的代码。

# javascript - 如何防止重复提交？

> ID：15399722
> 
> 赞同：0
> 
> 时间：2013-03-14T01:42:35.977
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:49:00.540

首先，请将您`id`的 s 修复为唯一。

如果您使用 jQuery 版本 1.4.3+：

```
$("a.submit").click(function() {
    $("a.submit").bind('click', false);
}); 
```

如果没有，请绑定`function() { return false; }`. 然后你也可以

```
$("a.submit").unbind('click') 
```

当您希望他们再次工作时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:49:00.030

欢迎来到堆栈溢出。

首先，你不应该有多个具有相同 ID 的 DOM 元素。

其次，在提交类的绑定中设置一个变量（绑定使用jquery），如果提交则翻转它。

包含带有脚本标记的 jquery，然后将您的 javascript 包装在准备好的文档中

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript>
$(document).ready(function () {
    $('.submit').bind('click', function () {
        var isSubmitted = false;
        if (isSubmitted === false) {
            $.get($(this).attr('href'), function () {
                isSubmitted = true;
            });
        }
    });
});
</script> 
```

这当然是假设您想要一些 ajax 风格的功能。如果没有，你不应该担心如果你有一个链接，因为你会发布到一个新页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:50:39.200

查询：

```
var count=0;
$(".submit").click(function(){
if(count>0){
return false
}
++count;
}); 
```

HTML

```
<a href="dashboard.php" id ="submitID1" class="submit" >Dashboard </a>

<a href="orderList.php"  id ="submitID2" class="submit" >Order List</a>    

<a href="newOrder.php"  id ="submitID3" class ="submit">New Order</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:19:55.070

```
var submitStatus = false;
    $('a.submit').click(function(e){
        if (!submitStatus) {
            alert('clicked');
            submitStatus = true;
        } else {
            e.preventDefault();
        }
    }); 
```

你可以在这里试试：http: [//jsfiddle.net/p8a5s/](http://jsfiddle.net/p8a5s/)当然 还有`t use the same ID`不同的DOM元素

# java - 使用转换器类 java 生成新图像

> ID：15399723
> 
> 赞同：0
> 
> 时间：2013-03-14T01:42:42.593
> 
> 标签：java

我正在使用一个转换器类来生成一个带有修改像素的新图像。基本上，我在原始图像中的每个像素上进行迭代，然后应用给定的变换（例如颜色反转、对比度等）以生成新图片。我不太确定如何解决这个问题......这就是我到目前为止所拥有的。

```
public static NewPicture transform(NewPicture p, Transformer t) {
int w = p.getWidth();
int h = p.getHeight();

Pixel[][] src = getBitmap();
Pixel[][] tgt = new Pixel[w][h];

for (int x = 0; x < w; x++) {
  for (int y = 0; y < h; y++) {
    // Not sure what to do after this nested for loop 
```

NewPicture 只是由 2D 像素数组表示的图像。我的 Pixel 转换器的接口是

```
public interface Transformer {
  public Pixel transformPixel (pixel p);
} 
```

它只是根据输入的给定 RGB 分量创建一个新像素，但不修改像素。

我将不胜感激有关如何解决此问题的任何指导。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:56:16.230

看看这个[`RGBImageFilter`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/RGBImageFilter.html)类，这正是你想要的。

# jquery - 重复拖动 jQuery UI 元素失败

> ID：15399726
> 
> 赞同：0
> 
> 时间：2013-03-14T01:42:56.220
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-droppable

我正在尝试为相当复杂的购物车建立一个简单的拖放基础。在我组装了一个演示主要概念的原型之前从未使用过 jQuery UI。

简而言之，购物车有几个容器，其中可能包含任意数量的可拖动资产。它只是div中的div。应允许将资产丢弃在任何容器中。我已经进行了初始交互，但是一旦我将资产拖放到另一个容器中并尝试将相同的资产拖回或拖到另一个容器，尽管拖放确实有效，但拖动不会跟随光标。

我在这里发布了代码：http: [//jsfiddle.net/VjWx2/](http://jsfiddle.net/VjWx2/)

这是我的 JavaScript：

```
var cartDragger, move;

cartDragger = (function() {

  function cartDragger(el, contain) {
    this.el = el;
    this.contain = contain;
  }

  cartDragger.prototype.drag = function() {
    return $(this.el).draggable({
      revert: 'invalid',
      start: function() {
        this.currentParent = $(this).parent().attr('id');
        return $(this).addClass('highlighted');
      }
    });
  };

  cartDragger.prototype.drop = function() {
    return $(this.contain).droppable({
      accept: this.el,
      over: function() {
        return $(this).removeClass('out').addClass('over');
      },
      out: function() {
        return $(this).removeClass('over').addClass('out');
      },
      drop: function(event, ui) {
        $(this).removeClass('over');
        ui.draggable.removeClass('highlighted');
        if (this.currentParent !== $(this).attr('id')) {
          return ui.draggable.appendTo($(this)).removeAttr('style');
        }
      }
    });
  };

  return cartDragger;

})();

move = new cartDragger('.asset', '.project');
move.drag();
move.drop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:37:35.023

我不知道为什么在一些动作之后助手不存在，但你可以使用一种解决方法来创建一个克隆助手，如下所示：http: [//jsfiddle.net/VjWx2/1/](http://jsfiddle.net/VjWx2/1/)

```
 cartDragger.prototype.drag = function() {
    return $(this.el).draggable({
      revert: 'invalid',
      helper:function() {
        return $(this).clone();
      },
      opacity : '0.6',
      start: function() {
        this.currentParent = $(this).parent().attr('id');
        return $(this).addClass('highlighted');
      }
    });
  }; 
```

# android - 使用 imsdroid lib 创建视频通话时出现“无法获取生产者编解码器”错误

> ID：15399727
> 
> 赞同：1
> 
> 时间：2013-03-14T01:43:03.043
> 
> 标签：android, voip

最近我正在使用 imsdroid 库编写一个 android sip 客户端。语音通话没问题，但是当我想进行视频通话时，我得到了 **E/org.doubango.ngn.sip.NgnAVSession(19728): Failed to get producer codec**

我已经用 imsdroid 检查了我的代码。但没有发现任何错误。谁能帮我检查这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T04:22:07.677

发生这种情况可能有两个原因。首先，收到的 sip 数据包（带有 sdp）将没有编解码器供应用程序处理。其次，收到了编解码器，但应用程序没有正确处理它。

# c++ - 使用动态内存分配重载 istream 运算符

> ID：15399729
> 
> 赞同：2
> 
> 时间：2013-03-14T01:43:18.300
> 
> 标签：c++, memory-management, operator-overloading, istream, dynamic-allocation

你好，所以我对我的 istream& 运算符感到困惑>>。我必须重载此运算符以获取为 C 字符串使用动态内存分配的类的输入。

我的 Employee.h 文件是

```
#include <iostream>
using namespace std;

const double MIN_WAGE = 10.25;

class Employee {

int num;
char * name;
double rate;

public:

Employee();
Employee(const Employee&);
Employee operator=(const Employee&);
friend istream& operator>>(istream& is, Employee& employee);
friend ostream& operator<<(ostream& is, const Employee& employee);
friend bool operator>(const Employee& a, const Employee& b);
~Employee();
}; 
```

我有一个称为赋值运算符的复制构造函数

```
Employee::Employee(const Employee & e) {

name = NULL;

*this = e;
}

Employee Employee::operator=(const Employee & e) {

if (this != e) {

    num = e.num;
    rate = e.rate;

    if (name != NULL) delete [] name;

    if (e.name != NULL) {
        name = new char[strlen(e.name) + 1];
        strcpy(name, e.name);
    }

    else name = NULL;
}

return *this;

} 
```

在赋值运算符中，我为我正在使用的 C 字符串的长度动态分配了内存。到目前为止，我的 istream 功能：

```
istream& operator>>(istream& is, Employee & e) {

int n;
double r;
} 
```

我的问题是：如何在 istream 函数的赋值运算符中使用新的动态内存分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:50:31.463

只需将from的`name`数据成员更改为，您将不再需要覆盖:)`class Employee``const char*``std::string``operator=`

请注意，尽可能避免动态分配是一种很好的做法。尝试利用具有自动存储持续时间的对象并了解有关[RAII 惯用语](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的更多信息。您的代码将变得更易于阅读并且更不容易受到内存泄漏的影响：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:09:20.713

免责声明：这两种解决方案都是出于教育目的，我不建议在任何实际程序中使用它。如果您需要解决要求严格的家庭作业，那也许可以：

第一的：

```
istream& operator>>(istream& is, Employee & e) {
    Employee tmp;
    tmp.name = new char[1024];
    is >> tmp.num >> tmp.rate >> tmp.name;
    e = tmp;
    return is;
} 
```

第二 - 更丑陋和更“有效”的解决方案：

```
istream& operator>>(istream& is, Employee & e) {
    char buffer[1024];
    Employee tmp;
    tmp.name = buffer;
    is >> tmp.num >> tmp.rate >> tmp.name;
    e = tmp;
    tmp.name = 0;
    return is;
} 
```

同样，两个解决方案都是在“使用现有赋值运算符”的条件下创建的，实际代码应该不同。

笔记：

```
if (name != NULL) delete [] name; 
```

是多余的，写

```
delete [] name; 
```

反而

# javascript - javascript：如何从复选框获取标题属性值？

> ID：15399730
> 
> 赞同：1
> 
> 时间：2013-03-14T01:43:46.513
> 
> 标签：javascript, html, sum

```
 window.onload = function(){
      cds = document.getElementsByName( "cd[]" );
      for( var i = 0; i < cds.length; i++ ){
          cds[i].addEventListener("change", addCDToCart, false );
      }
 } 

 /**
   * this function is called
   * when a CD checkbox is selected
   */
  var addCDToCart = function(){
      //get total cost textbox value
      var txtTotal = $("total");
       // loop through all the checkboxes
       for( var i = 0; i < cds.length; i++ ){
           if( cds[i].checked == true ){
               var nextCD = parseFloat(cds[i].title );
               total = ((total) + (nextCD));
           }
       }
       txtTotal.value = total.toString();
       alert( total.toString() );
  } 
```

我使用上面的代码来检查数组中的所有复选框。我想总结所有选中复选框的所有价格。问题是价格存储在 title 属性中，而不是 value 属性中。我尝试使用上面的代码从 title 属性中检查 2 个价格为 8.20 和 12.70 的复选框并总结它们，但它显示如下：

```
[object HTMLinputElement]8.212.7 
```

我的任务说我不打算修改 HTML 代码。下面显示了部分 HTML 代码：

```
<div class='item'>
        <span class='CDTitle'>Where is the Love</span>
        <span class='CDYear'>2000</span>
        <span class='catDesc'>Rap</span>
        <span class='CDPrice'>12.70</span>
        <span class='chosen'><input type='checkbox' name='cd[]' value='974' title='12.70' /></span>
</div>
<div class='item'>
        <span class='CDTitle'>White Ladder</span>
        <span class='CDYear'>2000</span>
        <span class='catDesc'>Rock/Pop</span>
        <span class='CDPrice'>8.20</span>
        <span class='chosen'><input type='checkbox' name='cd[]' value='975' title='8.20' /></span>
</div> 
```

解决此问题的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:54:44.117

你得到了`title`正确的。

问题似乎与`total`变量的初始化有关*（问题中未显示）*，它似乎有一个`HTMLInputElement`，这导致您的数值的字符串连接。

也许在您的实际代码中，您将`total`变量与`txtTotal`包含`input`元素的 混为一谈。

# list - 生成列表的所有连续子列表

> ID：15399738
> 
> 赞同：3
> 
> 时间：2013-03-14T01:44:49.327
> 
> 标签：list, haskell, sublist

我对 Haskell 有点陌生，我正在尝试生成列表的所有连续子列表。

我目前有以下内容：

```
listSublists :: [a] -> [[a]]
listSublists []     = [[]]
listSublists xs     = [xs] ++ listSublists (init xs) 
```

我知道上面的函数会生成删除最后一个元素的子列表，但我不知道如何完成我的伪代码。

我的伪代码基本上是，

> 获取整个完整列表，删除尾部。将 (x:xs) 的 xs 传递到 listSublists

例如，xs = [1,2,3] [xs] ++ listSublists (init xs) 将生成 [1,2,3,4], [1,2,3], [1,2], [1 ], [] 并且我正在尝试将 [2,3,4] 作为 xs 传递，直到列表用完为止。

有人可以给我一些指示吗？还是我的想法完全错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:03:27.590

您拥有的`listSublists`功能在功能上几乎与该[`inits`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3ainits) 功能相同。您走在正确的轨道上，因为您当前可以列出给定列表的所有前缀。

您要问的是“什么是列表的子列表？” 一个答案是它是列表前缀的后缀（即从列表末尾切掉一些部分，然后从该列表的前面切掉一些元素，并且您有一个连续的子列表）。

所以，如果你有你的`prefixes`，那么你想要的是一种生成给定前缀（即某些列表）的所有后缀的方法。所以，如果你有

```
prefixes :: [a] -> [[a]]
prefixes []     = [[]]
prefixes xs     = [xs] ++ prefixes (init xs) 
```

你还想要一个相应的功能`suffixes`

```
suffixes :: [a] -> [[a]]
suffixes []     = [[]]
suffixes xs     = [xs] ++ suffixes (??? xs) 
```

我会把它留给你弄清楚使用什么`???`。使用这两个函数，您只需获取所有前缀，并生成所有后缀即可获取所有连续子列表

```
allSublists :: [a] -> [[a]]
allSublists = concat . map suffixes . prefixes 
```

您可能希望删除将在结果集中的所有空列表，因为它们不是一个有趣的案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T12:51:39.347

所有子列表（不一定是连续的）：

```
sublists [] = [[]]
sublists (x:xs) = [x:sublist | sublist <- sublists xs] ++ sublists xs 
```

只有连续的子列表：

```
nub $ concat $ map tails $ inits ls 
```

或者

```
(:) [] $ filter (\x -> length x /= 0) $ concat $ map tails $ inits ls 
```

# linked-list - 链表插入排序

> ID：15399739
> 
> 赞同：0
> 
> 时间：2013-03-14T01:45:01.373
> 
> 标签：linked-list, insertion-sort

这是我使用linkedList 的插入排序方法的实现。我已经尝试过了，它工作得很好，唯一的问题是 J+1 行导致索引越界异常。谁能告诉我如何解决这个问题或如何解决它。谢谢

```
public static <T extends Comparable <? super T>> void insertionSort2(List<T> portion){
    int i = 0;
    int j = 0;
    T value; 
    //List <T> sorted = new LinkedList<T>();

    // goes through the list 

    for (i = 1; i < portion.size(); i++) {

        // takes each value of the list
        value = (T) portion.remove(i);

        // the index j takes the value of I and checks the rest of the array
        // from the point i
        j = i - 1;

        while (j >= 0 && (portion.get(j).compareTo(value) >= 0)) {
            portion.add(j+1 , portion.remove(j));//it was j+1

            j--; 

        }

        // put the value in the correct location.
        portion.add(j + 1, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-27T23:46:52.097

检查此代码

只是把它作为一个类中的一个函数并尝试调用它

```
void InsertionSort()
{
    int temp, out, in;
    for(out=1 ; out<size ; out++)
    {
        temp = list[out];
        in = out;
        while (in > 0 && list[in-1] > temp)
        {
            list[in] = list[in-1];
            --in;
        }
        list[in]= temp;
        System.out.print("The list in this step became: ");
        for (int t=0 ; t<size ; t++)
            System.out.print(list[t]+" ");
        System.out.println("");
    }
} 
```

# clojure - 从 Clojure 中的复杂列表中提取值

> ID：15399740
> 
> 赞同：3
> 
> 时间：2013-03-14T01:45:08.883
> 
> 标签：clojure

我正在尝试将值从复杂的列表结构中提取出来。

鉴于这样的事情：

```
[{:a "whatever" :b [:c "foo"]} :e {:f "boo"} :g {:h [:i 62281]}] 
```

我想得到：

```
["whatever" "foo" "boo" 62281] 
```

到目前为止，我只到了这一点：

```
((62281) nil (boo) nil whatever foo) 
```

这是代码：

```
(defn get-values [params]
  (apply conj
         (map (fn [part]
                (if (not (keyword? part))
                    (map (fn [v]
                           (if (vector? v)
                               (last v)
                               v))
                         (vals part))))
              params))) 
```

1.  我似乎无法摆脱 nil 的
2.  我无法弄清楚为什么某个点之后的值在列表中。
3.  我认为必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T04:24:55.480

修复数据结构，一切都会到位。到目前为止，您的数据结构根本不一致，这将使任何接触此数据的函数更加复杂和容易出错。您可以将此数据建模为地图：

```
(def data  {:a "whatever"
            :b nil
            :c "foo"
            :e nil
            :f "boo"
            :g nil
            :h nil
            :i 62281}) 
```

然后得到想要的结果：

```
(->> (vals data)
     (filter (comp not nil?))
     (into [])) 
```

但是由于某些奇怪的原因，您仍然想解析您当时提供的数据结构：

```
(defn get-values [data]
  (->> (map #(if (map? %) (into [] %) %)  data)
       flatten
       (filter #(or (string? %) (number? %)))
       (into []))) 
```

# hadoop - Oozie map-reduce 示例在使用 Bigtop 0.5.0 时因 ClassNotFoundException 而失败

> ID：15399743
> 
> 赞同：1
> 
> 时间：2013-03-14T01:45:25.403
> 
> 标签：hadoop, oozie, bigtop

我使用 Bigtop 0.5.0 存储库和 Sun Java 1.6 的相对干净的 CentOS 6.3 安装。[我按照此处](https://cwiki.apache.org/BIGTOP/how-to-install-hadoop-distribution-from-bigtop-050.html)的说明添加 Bigtop 存储库。

我已经使用 yum 安装了 Hadoop common 和 Oozie。我通过运行 sudo service oozie init 配置了 oozie，然后使用 Bigtop 0.6.0 中 init-hdfs.sh 文件中的命令设置 HDFS 路径。

我可以毫无问题地运行 Java 和流式映射减少作业。我还可以运行与 Bigtop 捆绑在一起的 Oozie 流媒体示例。不幸的是，当我尝试运行 map-reduce 示例时，我得到一个 java.lang.ClassNotFoundException

我可以从 HDFS 审计日志中看到 oozie-examples-3.3.0.jar 文件被检查，但从未打开。这些是工作流运行时审计日志中 jar 文件仅有的四个条目：

```
2013-03-12 14:42:07,394 INFO FSNamesystem.audit: allowed=true   ugi=user (auth:SIMPLE) via oozie (auth:SIMPLE)  ip=/192.168.56.12   cmd=getfileinfo src=/user/user/examples/apps/map-reduce/lib/oozie-examples-3.3.0.jar    dst=null    perm=null
2013-03-12 14:42:07,399 INFO FSNamesystem.audit: allowed=true   ugi=user (auth:SIMPLE) via oozie (auth:SIMPLE)  ip=/192.168.56.12   cmd=getfileinfo src=/user/user/examples/apps/map-reduce/lib/oozie-examples-3.3.0.jar    dst=null    perm=null
<snip>
2013-03-12 14:42:07,547 INFO FSNamesystem.audit: allowed=true   ugi=user (auth:SIMPLE) via oozie (auth:SIMPLE)  ip=/192.168.56.12   cmd=getfileinfo src=/user/user/examples/apps/map-reduce/lib/oozie-examples-3.3.0.jar    dst=null    perm=null
2013-03-12 14:42:07,550 INFO FSNamesystem.audit: allowed=true   ugi=user (auth:SIMPLE) via oozie (auth:SIMPLE)  ip=/192.168.56.12   cmd=getfileinfo src=/user/user/examples/apps/map-reduce/lib/oozie-examples-3.3.0.jar    dst=null    perm=null 
```

我从端口 8088 上的 webconsole 获得的容器日志显示以下异常，但没有提供进一步的线索：

```
2013-03-12 15:10:18,681 FATAL [IPC Server handler 2 on 57310] org.apache.hadoop.mapred.TaskAttemptListenerImpl: Task: attempt_1363061307536_0002_m_000000_0 - exited : java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:72)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:130)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:396)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:335)
    at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:157)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1367)
    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:152)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:103)
    ... 9 more
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: Class org.apache.oozie.example.SampleMapper not found
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1611)
    at org.apache.hadoop.mapred.JobConf.getMapperClass(JobConf.java:979)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)
    ... 14 more
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: Class org.apache.oozie.example.SampleMapper not found
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1579)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1603)
    ... 16 more
Caused by: java.lang.ClassNotFoundException: Class org.apache.oozie.example.SampleMapper not found
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1485)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1577)
    ... 17 more 
```

当工作流的失败阶段正在运行时，我设法从 temp 目录中获取了 job.xml 文件，并且我可以看到 jar 文件被添加到类路径属性中：

```
<property><name>mapreduce.job.classpath.files</name><value>/user/user/user-oozi/0000001-130312141058075-oozie-oozi-W/mr-node--map-reduce/map-reduce-launcher.jar,/user/user/examples/apps/map-reduce/lib/oozie-examples-3.3.0.jar</value><source>programatically</source></property> 
```

...但显然仍未找到该课程。我已将所有组件的所有调试都设置为 DEBUG，并且找不到更多线索。

我只是错误地配置了某些东西，还是这实际上是一个错误？我真的不知道下一步该做什么。

# javascript - Embedding JavaScript objects in a page's URL

> ID：15399749
> 
> 赞同：0
> 
> 时间：2013-03-14T01:46:08.353
> 
> 标签：javascript, html

I'm trying to store a JavaScript object in the URL of a web page (as a JSON string), but the URL contains some characters that will not work with HTML links.

On this page, a JavaScript object is loaded from the page's URL:

`http://jsfiddle.net/tsUpC/1/show/#["Hello","World!"]`

and on this page, I'm trying to create a link to the same page that is shown above, but the URL contains characters that are not allowed in hyperlinks:

[http://jsfiddle.net/M6dRb/](http://jsfiddle.net/M6dRb/)

```
<a href = "http://jsfiddle.net/tsUpC/1/show/#["Hello","World!"]">This link doesn't work because the URL contains characters that are not allowed in HTML links.</a> 
```

Is it possible to embed JavaScript objects into URLs without using characters that are not compatible with hyperlinks?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T01:54:47.067

您可以在将 JSON 字符串放入 URL 之前通过对其进行 URL 编码将其放入 URL：

```
encodeURIComponent(JSON.stringify(object)) 
```

在[您的示例](http://jsfiddle.net/tsUpC/1/show/#%5B%22Hello%22%2C%22World!%22%5)中，这将是：

```
http://jsfiddle.net/tsUpC/1/show/#%5B%22Hello%22%2C%22World!%22%5D 
```

正如您可能猜到的那样，它的反义词[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)是[`decodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T01:50:01.200

您需要使用 JSON 进行编码和解码

```
var link = document.getElementsByTagName('a')[0];
link.addEventListener('click', function(){
    // this could also be done with location.hash = JSON.stringify(...);
    var param = JSON.stringify(['your', 'array']),
        href = '#'+this.getAttribute('href');
    href += param;
    location.href = href;
}, false);

// make string an object/array again
var obj = JSON.parse(window.location.hash.substr(1)); 
```

# objective-c - How should the app project depend on libHello.a and libHello.a depend on libPods.a?

> ID：15399751
> 
> 赞同：0
> 
> 时间：2013-03-14T01:46:45.343
> 
> 标签：objective-c, xcode, static-libraries, cocoapods

I tried to use **cocoapods** in an static library project **iKit**, and use **iKit as a subproject** in my main app project. When I build the main app project, an **error** is occur:

Look image here: ![](../Images/f33215e1f052678a7cdcb699dc00e26b.png)

How should I struct the source and static library like that?

If I **directly** Use the cocoapods in main app project **TestiKit**, everything will be OK.

What I should do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:10:59.300

如果 iKit 具有从 CocoaPods 提供的依赖项，那么当您以这种方式包含项目时，它们肯定不会被链接。您最好为 iKit 创建一个 podspec 并将其链接到您的主项目中。然后在这个新的 podspec 中，您可以指定 iKit 的依赖项，并且所有内容都将正确链接。这里的问题是，由于您不包括在 iKit 工作区中创建的 Pods 项目，CocoaPods 使用 Pods.xcconfig 无法链接其依赖项。

# python - Trouble accessing Global VAR in While Loop

> ID：15399752
> 
> 赞同：2
> 
> 时间：2013-03-14T01:46:55.610
> 
> 标签：python, while-loop, global-variables

Sorry, this was a dumb question. The solutions are correct for using global variables, but there was just something else wrong with my code.

Here's a snippet of the code. I'm working on Problem 3/Problem Set 2 form the 6.00x MIT course.

```
paymentFound = False

while paymentFound == False:
    global paymentFound
    testMid = findMid(newMin, newMax)
    testStatus = testPayment(testMid)
    if testStatus == "done":
        paymentFound = True
        print "Lowest Payment: ",testMid
    elif testStatus == "high":
        newMax = testMid
    elif testStatus == "low":
        newMin = testMid 
```

This is the error that I'm getting: pset1.3.py:32: SyntaxWarning: name 'paymentFound' is assigned to before global declaration global paymentFound

I read somewhere that you can't use global variables if they're important to a 'for' loop, but I don't know if this is important in a while loop.

Any thoughts on why I'm getting this error?

Sorry, had to reedit the code so it looks more presentable.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:49:19.540

该错误由错误消息描述：您的“全局”命令为时已晚。尝试这个：

```
global paymentFound
paymentFound = False

while paymentFound == False:
    testMid = findMid(newMin, newMax)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:53:23.827

你应该像这样将它“全局”出循环：

```
global paymentFound
paymentFound = False

while ~:
    yourcode 
```

我之前碰巧遇到过这个问题。

我试过这个代码，它确实有效：

```
global a 
a = 1

while a :
    if True:
        a = 0
    print('is it?') 
```

# objective-c - @selector 有多个参数

> ID：15399756
> 
> 赞同：-2
> 
> 时间：2013-03-14T01:47:24.117
> 
> 标签：objective-c, methods, uibutton, arguments, selector

好的，所以[Objective-C：使用多个参数调用选择器是可行的，](https://stackoverflow.com/questions/1018195/objective-c-calling-selectors-with-multiple-arguments)但是我如何使用`addTarget:action:forControlEvents:`for a来做到这一点`UIButton`？没有一个`withObject:`我不认为... 我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:25:45.537

如果你想传递多个参数，`UIButton`你应该传递一个`Dictionary`参数

有两种处理方法：

1.  您可以使用实例变量来保存要使用的值。

例如 ：

```
- (void)buttonPressed:(id)sender
{
    NSMutableDictionary *argDictionary = _ivar;
} 
```

2.您可以使用类别来伪造属性。

如何伪造类别中的属性，您可以查看： http: [//oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)

然后你可以使用：

```
- (void)buttonPressed:(UIButton *)sender
{
    // use sender.argDictionary to get your fake property
} 
```

更多信息你可以看到[我之前的回答](https://stackoverflow.com/questions/14154221/uibutton-action-with-multiple-argument/14155252#14155252)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:56:59.287

一种可能性是创建一个自定义 UIButton 扩展接口，其中包含您需要传递的所有属性，在创建按钮时设置按钮的该属性，然后在调用操作后访问它。例如：

```
@interface UIButton (additions)

@property NSString * customPropertyString;

@end 
```

然后，以通常的方式添加目标和选择器：

```
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

最后，处理程序方法的实现：

```
- (void)buttonPressed:(id)sender
{
    UIButton * senderButton = (UIButton *)sender;
    NSLog(@"%@", senderButton.customPropertyString);
} 
```

# broken-links - 由 php 导致的断开链接包括参考

> ID：15399758
> 
> 赞同：0
> 
> 时间：2013-03-14T01:47:27.930
> 
> 标签：broken-links, php-include

我正在学习 php，但现在遇到了引用问题。我搜索了很多，但找不到任何与我的确切结构问题有关的帖子。希望能克服这个障碍，这样我就可以走向下一个……

我的基本文件结构类似于：

```
domain.com/
        home.php
        images/
                global/
                        nav/
                            nav-img.jpg
        includes/
                menu.php
        fruit/
                apples/
                        red/
                            gala/
                                gala.php 
```

我想创建一个全局路径来建立我的 Web 根目录，无论它位于何处，我都可以在每个页面中动态引用它。但是关于这个一般主题的其他帖子给出了 [10] 我可以使用的不同功能。我只想要[1]。另外，我不知道在哪里放置 [例如] 定义（ROOT），或者如何从单个页面调用它。

*define(ROOT) 是否适合我的情况？*

* * *

知道所有页面都使用 [menu.php]，我的障碍：

从 gala/gala.php - 当我点击 [home] 时，它会寻找：

```
/fruit/apples/red/gala/home.php  [does not exist, of course!] 
```

* * *

*此外，如果可能的话，尽量**避免**这些 [2] 的事情：*

**一、在****gala.php**中使用html文件引用如下：../../../../ includes/menu.php

找到正确的全局包含。

**二、**并避免在**menu.php**中使用链接引用，如下所示：/images/global/nav/nav-img.jpg

任何反馈将不胜感激 [+] 或 [-]。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:07:21.517

好的，这就是我所做的似乎最好的：

对于**I. 和 II。****为了避免在所有src** ="" 和**href** =""中使用这么多 ../../../../我刚刚解决并使用了带有**前导斜杠**的站点相关文件引用，例如 "/includes/menu .php”，这将使我进入站点根目录，从那里构建文件的位置。

对于**全局文件参考**，这两种方法都有效：

```
<?php 
require_once $_SERVER['DOCUMENT_ROOT'] . "/includes/";
?> 
// in `<head>` section 
```

并使用`<?php include ('menu.php'); ?>`

或者这个也有效：

```
<?php 
define('ROOT',$_SERVER['DOCUMENT_ROOT']); 
define('INCLUDES',ROOT.'/includes/'); 
?>  
// in `<head>` section 
```

并`<?php include (INCLUDES.'menu.php'); ?>`在另一个级别的文件中使用。

# sql - sql server 阻塞操作符

> ID：15399763
> 
> 赞同：8
> 
> 时间：2013-03-14T01:48:00.270
> 
> 标签：sql, sql-server-2008

是否有所有阻塞运算符的列表？我知道验证操作员是否阻塞的唯一明确方法是检查其属性并查看数据是否已排序。这是验证运营商是否阻塞的唯一方法吗？如果不是，那么验证运营商是否阻塞的其他方法是什么？

**阻塞运算符需要在传递数据之前处理所有行，而非阻塞运算符将在读取和处理数据后立即将行传递给其他运算符。**

*以下是阻塞与非阻塞的定义*

使用输入行并同时产生输出行的迭代器（在 GetRow 方法中）。我们经常将这些迭代器称为“非阻塞”。</p>

在生成任何输出行之前消耗所有输入行（通常在 Open 方法中）的迭代器。我们将这些迭代器称为“阻塞”或“走走停停”。</p>

**为什么我需要此信息** 主要是好奇心和个人知识。我没有用它做任何疯狂的事情。只需阅读有关阻塞与非阻塞运算符的信息，并想知道哪个运算符做什么。

**这仅适用于 SSMS 查询计划**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:17:52.023

你见过这个：http: [//blogs.msdn.com/b/craigfr/archive/2006/06/19/637048.aspx](http://blogs.msdn.com/b/craigfr/archive/2006/06/19/637048.aspx)？顺便说一句，题外话，stackoverflow 似乎认为简短的答案不好。它至少有 30 个字符。:)

# actionscript-3 - Air starling as3 移动应用和使用字体

> ID：15399764
> 
> 赞同：1
> 
> 时间：2013-03-14T01:48:04.780
> 
> 标签：actionscript-3, fonts, air

我即将使用 AS3、Air 和 Starling 为 iOS 和 Android 构建一个新的移动应用程序，想知道是否有人愿意分享使用非系统特定字体的最佳方法？

我基本上会使用 2 种不同的字体，每一种都需要有多种尺寸、斜体、粗体等。

我在以前的应用程序中使用过嵌入式 ttf，但是当字体小于特定大小时，它们会变得有些模糊。我也使用了字体精灵表，但这些只在使用 1 或 2 种不同尺寸时看起来不错。

任何有关性能和可重用性的最佳方法的指导都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:07:36.613

Starling 有两种使用自定义字体的方法：

1.  使用位图字体。这对您来说似乎不太理想，因为您需要为每种字体大小提供位图数据，更不用说粗体和斜体了。

2.  使用常规 Flash 文本 API 生成文本，然后以位图形式获取它并使用 Starling 进行渲染。这比使用位图字体要慢，因为第一次必须将文本块预呈现为位图，但如果您的文本不会太频繁地更改，您应该对此感到满意。

看看 FeathersUI 如何[利用这两种技术](http://wiki.starling-framework.org/feathers/text-renderers)来呈现文本。:)

# c# - 如何从 C# 中的用户文本输入中拉出距离？

> ID：15399776
> 
> 赞同：0
> 
> 时间：2013-03-14T01:49:01.433
> 
> 标签：c#, regex

我有一个搜索栏，访问者用来搜索附近的地方。它由两个输入框组成：关键字和距离。

我想将它简化为一个盒子，但允许游客输入一段距离。他们可以输入诸如*“5 公里内的 Costco”*或*“Denny's 2mi”*之类的术语。

在服务器端，我想从输入中拉出距离。我意识到有很大的错误空间。访问者可以在数字后面加一个空格（4 公里），也可以使用全文（4 公里），或者可能还有其他需要担心的问题。

如果我想为访问者提供输入 (n)km 或 (n)mi 的能力，那么将数据解析为单独变量的好方法是什么？

假设一个访客进入*“Chinese Indian Korean Restaurants 5mi”*。我想把它分成：

```
string keywords = "Chinese Indian Korean restaurants";
string distance = 5; //(notice no mi, or km) 
```

我想需要某种正则表达式，但我的正则表达式技能非常缺乏。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:53:38.633

是的，在这种情况下，正则表达式是你的朋友。我将专注于匹配距离并将其从输入文本中删除。剩下的就是关键词了。。

```
Regex distRex = new Regex("(?<dist>\\d+)\\s*(?<unit>mi|km|ft)", RegexOptions.IgnoreCase); 
```

然后你可以这样做：

```
Match m = distRex.Match(testInput);
if(m.Success)
{
    string keywords = distRex.Replace(testInput, string.Empty);

    // you may want to further sanitize the keywords by replacing occurances of common wors
    //   like "and", "at", "within", "in", "is" etc.

    string distanceUnits = m.Groups["unit"].Value;
    int distance = Int32.Parse(m.Groups["dist"].Value);    
} 
```

# c# - 嵌入式 Windows Media Player 拒绝卸载媒体

> ID：15399777
> 
> 赞同：1
> 
> 时间：2013-03-14T01:49:08.393
> 
> 标签：c#, wmp, axwindowsmediaplayer

我在表单应用程序中嵌入了 Window Media Player 控件 (axWindowsMediaPlayer) 来播放 mp3 文件。

当我尝试卸载媒体时，希望它会禁用播放按钮并且不允许进一步播放它拒绝这样做的音乐。最后播放的曲目保持加载并可以播放。

到目前为止我尝试过的代码是：

```
mediaPlayerObj.newMedia("");
mediaPlayerObj.currentMedia = null;
mediaPlayerObj.URL = "";
mediaPlayerObj.URL = null;
mediaPlayerObj.close(); 
```

我肯定在这里遗漏了一些东西吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:17:42.673

我现在设法解决了这个问题，解决办法是这样的：

```
mediaPlayerObj.currentPlaylist.clear(); 
```

# android - 找不到从 Android SD 卡加载媒体文件的一致方法

> ID：15399778
> 
> 赞同：0
> 
> 时间：2013-03-14T01:49:14.520
> 
> 标签：android, media, sd-card

尝试从 SD 卡加载音乐时，我的平板电脑和我的 AVD 模拟设备之间的结果不一致。适用于我的平板电脑的方法不适用于虚拟设备，反之亦然。

这是适用于我的平板电脑的代码。这是更好的方法，允许我访问文件中的所有详细信息，包括艺术家、专辑、专辑封面等……（我的平板电脑正在运行果冻豆。）

```
Uri uri = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
Cursor cur = mContentResolver.query(uri, null,
  MediaStore.Audio.Media.IS_MUSIC + " = 1", null, null);

cur.moveToFirst();
{   
    do {
HashMap<String, Object> song = new HashMap<String, Object>();
song.put("songTitle", cur.getString(titleColumn));

Uri path = ContentUris.withAppendedId(uri,cur.getLong(idColumn));
String songPath = path.toString();
song.put("songPath", songPath);
song.put("artistName",cur.getString(artistColumn));
song.put("albumName",cur.getString(albumColumn));
song.put("albumId", cur.getInt(albumIdColumn));
song.put("songId", cur.getInt(idColumn));

songsList.add(song);

} while (cur.moveToNext());
} 
```

但是在模拟设备上，光标是空的，所以没有歌曲被添加到列表中。我已经将歌曲推送到模拟器的 sd 卡上，但没有运气。以下代码确实在虚拟设备上找到了歌曲，但只提供了歌曲名称和文件路径，没有提供艺术家或专辑信息。（虚拟设备为 Android 4.2 和 API 级别 17）

```
final String MEDIA_PATH = new String("/sdcard/");
File home = new File(MEDIA_PATH);

if (home.listFiles(new FileExtensionFilter()).length > 0) {
for (File file : home.listFiles(new FileExtensionFilter())) {

    HashMap<String, Object> song = new HashMap<String, Object>();
    song.put("songTitle", file.getName().substring(0, 
             (file.getName().length() - 4)));
    song.put("songPath", file.getPath());

    songsList.add(song);
}
} 
```

但是，当此代码在我的平板电脑上运行时，文件（主页）为空，并且不返回任何数据。我此时的解决方案是双向运行以填充歌曲列表。但是，对于必须使用第二种方法的任何设备，我不会有艺术家或专辑信息。我是否在这里遗漏了什么，可能是与虚拟设备相关的异常情况，或者这只是处理这么多不同设备的挫败感？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:52:04.643

对于 >= API 级别 10，您可以使用公共类`MediaMetadataRetriever`来获取媒体信息。此链接包含有关使用它的示例[---使用 Android 支持的功能查询 MP3 信息---](http://xjaphx.wordpress.com/2011/06/28/query-mp3-information-using-android-supported-function/)。

希望这对您有所帮助。

# haskell - Haskell 函数返回问题

> ID：15399781
> 
> 赞同：0
> 
> 时间：2013-03-14T01:49:34.440
> 
> 标签：haskell, if-statement, return

```
while :: Int -> Bool -> (Int,Int) -> (Int,Int) ->[Int] -> String
while arguments validity premRange atomRange operators = 
     return(if validity then "Hello" else "NO")

main :: IO()
main =
    do   
putStrLn "Welcome to Random Argument Generator"
arguments <- getArguments
validity <- getValidity
putStrLn "Enter the range of the number of premises to each argument"
premRange <- getRange
putStrLn "Enter the range of the number of atomic statments per premises"
atomRange <- getRange
operators <- getOperators
putStrLn "Thank You!\nExecuting..."
test <- while arguments validity premRange atomRange operators
putStrLn "Good Bye" 
```

它抱怨我在一段时间内回来和我打电话给它。我把这个功能作为一个测试，我真的很困惑它到底在抱怨什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:59:27.260

在 Haskell 中，诸如表达式之类的`if`表达式是函数的完美定义。你可以删除这个词`return`。

在那之后，你会遇到一个问题，`main`其中一行不做 I/O，所以它的类型与周围的不兼容`do`（我认为）：

```
test <- while arguments validity premRange atomRange operators 
```

但是，啊哈，您可以将其更改为：

```
let test = while arguments validity premRange atomRange operators 
```

# linux - linux内核中stop_sched_class有什么用

> ID：15399782
> 
> 赞同：6
> 
> 时间：2013-03-14T01:49:41.010
> 
> 标签：linux, linux-kernel

`stop_sched_class`在内核中有什么用？在`pick_next_task`函数中，调度程序将从第一个任务中选择下一个任务`stop_sched_class`。`sched_class`我为内核删除这个有什么问题吗？

```
#define for_each_class(class) \
   for (class = sched_class_highest; class; class = class->next)

#define sched_class_highest (&stop_sched_class)
extern const struct sched_class stop_sched_class;

/*
 * Simple, special scheduling class for the per-CPU stop tasks:
*/
const struct sched_class stop_sched_class = {
   .next                   = &rt_sched_class,

   .enqueue_task           = enqueue_task_stop,
   .dequeue_task           = dequeue_task_stop,
   .yield_task             = yield_task_stop,

   .check_preempt_curr     = check_preempt_curr_stop,

   .pick_next_task         = pick_next_task_stop,
   .put_prev_task          = put_prev_task_stop,

 #ifdef CONFIG_SMP
   .select_task_rq         = select_task_rq_stop,
 #endif

  .set_curr_task          = set_curr_task_stop,
  .task_tick              = task_tick_stop,

  .get_rr_interval        = get_rr_interval_stop,

  .prio_changed           = prio_changed_stop,
  .switched_to            = switched_to_stop,
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:30:35.113

stop_sched_class 用于停止 cpu，在 SMP 系统上使用，用于负载平衡和 cpu hotplug。此类具有最高的调度优先级。

如果你的系统没有定义CONFIG_SMP，可以尝试去掉这个类，有几个文件需要修改才能编译成功。

# windows-phone-8 - Windows Phone 8 - 单击磁贴而不打开应用程序窗口时更新磁贴图像

> ID：15399784
> 
> 赞同：0
> 
> 时间：2013-03-14T01:49:55.863
> 
> 标签：windows-phone-8, live-tile

当用户单击它时，我会更新 Windows Phone 8 动态磁贴上的图像。我不想打开应用程序的窗口只是更新磁贴。

这可以做到吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T13:28:58.980

您可以将参数关联到您的磁贴

```
ShellTile.Create(new Uri("/ChangeTileOnlyPage.xaml?Change=1", UriKind.Relative), myShellTileData, true /*==supportsWideTile*/); 
```

并在 ChangeTileOnlyPage 中评估此参数：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);  
    string parameterValue = NavigationContext.QueryString["Change"]; //or similar

    //do something with it ...

    //update tile

    //close app again
} 
```

您可以再次关闭您的应用程序，如： [如何以编程方式退出或退出我的 Windows Phone 8 应用程序？](https://stackoverflow.com/questions/15052311/how-to-programatically-through-code-to-exit-or-quit-from-windows-phone-8-app)

这种方法的缺点是，您的应用程序已启动（但又直接关闭）并且用户无法通过单击磁贴来真正“启动”您的应用程序。

另一种可能性是通过背景任务，就像已经提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:56:01.523

要更新动态磁贴，您可以通过应用程序执行或从 backgroundservice 执行此操作。

所以我认为你不能那样做。

# c++ - 在静态库中运行代码，在 main() 之前，当链接器没有看到对它的其他引用时

> ID：15399791
> 
> 赞同：2
> 
> 时间：2013-03-14T01:50:26.763
> 
> 标签：c++, static-libraries, compiler-optimization

我有几个构建到静态库的模块。根据需要，一些静态库可能会被链接，而另一些可能不会。其中一些静态库具有具有静态 Init() 方法的类。“核心”库，也被链接，也有一个 Init() 方法，以前它包含多行，如：

```
Telephony::Init(); 
```

但是，如果 Telephony 不打算链接到这个特定的应用程序，我不想修改核心库的代码来删除该行。所以我尝试了类似的东西：

```
class init_hook_base
{
public:
    inline init_hook_base() { Core::AddInitHook(this); }
protected:
    friend class Core;
    virtual ~init_hook_base() {}
    virtual void operator()() const = 0;
};

template<class T>
class init_hook_t
{
protected:
    void operator()() const
    {
        T::Init();
    }
}; 
```

然后我将创建一个静态全局变量，例如：

```
static init_hook_t<Telephony> telephony_init_hook; 
```

在 Telephony 库中，这将允许 Core 在编译时不知道它的情况下间接调用 Telephony::Init。不幸的是，telephony_init_hook 没有被构造，我假设它在链接阶段被剥离，尽管它的构造函数有副作用。做类似的事情：

```
void Telephony::Init() { (void)telephony_init_hook; } 
```

也不起作用，因为就链接器而言，Init 本身也是无法访问的。有没有办法用 C++ 实现这种模块化风格？编译器特定的选项是可行的，只要 GCC 和 VC++ 都有对应的选项。谢谢。

**注意：对于那些关心影响 Core::AddInitHook 的全局初始化顺序的人：**

```
std::vector<init_hook_base*>* Core::init_hooks; //THESE ARE DELIBERATELY UNINITIALIZED!!!
unsigned char Core::init_hooks_ptr_hash[20];
bool Core::inited = false;

void Core::EnsureInitHooksContainerReady()
{
    unsigned char current_hash[20];
    sha1::calc(&init_hooks, sizeof(init_hooks), current_hash);
    if (memcmp(current_hash, init_hooks_ptr_hash, 20))
    {
        //the hash is incorrect, so init_hooks is not yet initialized;
        init_hooks = new std::vector<init_hook_base*>();
        sha1::calc(&init_hooks, sizeof(init_hooks), init_hooks_ptr_hash);
    }
}

void Core::AddInitHook(init_hook_base* init_hook)
{
    EnsureInitHooksContainerReady();
    init_hooks->push_back(init_hook);
}

void Core::Init()
{
    assert(!inited);
    PlatformInit();
    EnsureInitHooksContainerReady();
    for (auto init_hook_base : *init_hooks) {
        (*init_hook_base)();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:20:26.860

您需要使 init_hook_t 继承自 init_hook_base。就像现在一样，基类构造函数没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:06:25.287

根据我在几个地方找到的信息，例如[http://www.gamedev.net/topic/622861-how-to-force-global-variable-which-define-in-a-static-library-to-initialize/](http://www.gamedev.net/topic/622861-how-to-force-global-variable-which-define-in-a-static-library-to-initialize/)和[C++ 全局变量在通过静态库链接时未初始化，但在使用源代码编译时](https://stackoverflow.com/questions/9459980/c-global-variable-not-initialized-when-linked-through-static-libraries-but-ok)可以，这在 C++ 中以任何可靠的方式都不可行。

# java - rJava 内存错误

> ID：15399796
> 
> 赞同：1
> 
> 时间：2013-03-14T01:50:54.010
> 
> 标签：java, r, rjava

我正在使用最新版本的 r 中的包“dismo”构建一个大型物种分布模型。当我使用代码处理基本模型时：

```
me <- maxent(x=train, p=p) 
```

我收到以下错误：

```
> Error in .jcall(mxe, "S", "fit", c("autorun", "-e", afn, "-o", dirout,
> :    java.lang.OutOfMemoryError: unable to create new native thread 
```

在 stackoverflow 和互联网上有一些关于这个错误的讨论，但似乎没有一个解决如何解决 r 代码中的问题。对此问题的任何意见将不胜感激。

干杯，以色列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T00:08:23.313

从`dismo`包中：如果你想给 MaxEnt（运行它的 Java 虚拟机）更多的内存，你可以通过在加载 dismo 库之前运行类似这样的东西（1 GB）来做到这一点。

```
options(java.parameters = "-Xmx1g" ) 
```

有些人在 Mac (Apple) 计算机上使用此功能时报告了问题。具体来说，会出现以下错误消息：

```
Error in .jcall(mxe, "S", "fit", c("autorun", "-e", afn, "-o", dirout, : java.lang.InternalError: Can’t start the AWT because
Java was started on the first thread. Make sure StartOnFirstThread is not specified in your application’s Info.plist or on the command line. 
```

这是 Mac 上某些 Java 应用程序的一个已知问题。我们知道有两种解决方法：

1) 在运行库 rJava 之前运行 Sys.setenv(NOAWT=TRUE) （如果没有加载 rJava，这就是 dismo 所做的）。2) 使用 JGR 接口（基于 Java 的 R GUI）。您可以从这里安装 JGR：

# c - C语言。TCP 服务器-客户端，字符串传递错误

> ID：15399799
> 
> 赞同：1
> 
> 时间：2013-03-14T01:51:24.270
> 
> 标签：c, tcp, client-server

我将字符串作为参数传递给我的客户时遇到问题，而且我是 C 新手，所以无法真正弄清楚发生了什么。我设法将一个字符传递给服务器，但字符串有问题。此代码代表我的服务器的主循环：

```
while(1)
{
    char ch[256];
    printf("server waiting\n");

    rc = read(client_sockfd, &ch, 1); 
    printf("The message is: %s\n", ch);
    write(client_sockfd, &ch, 1);
    break;
} 
```

客户端代码：

```
 char ch[256] = "Test";

 rc = write(sockfd, &ch, 1); 
```

服务器打印的消息如下：

![在此处输入图像描述](../Images/ac8f211b284e6b020a93f3a242d4547b.png)

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:59:15.130

您的缓冲区 ch[] 不是以空值结尾的。而且因为您一次只读取 1 个字节，所以该缓冲区的其余部分是垃圾字符。此外，您正在使用将 &ch 传递给 read 调用，但数组已经是指针，所以 &ch == ch。

至少代码需要如下所示：

```
 rc = read(client_sockfd, ch, 1); 
    if (rc >= 0)
    {
       ch[rc] = '\0';
    } 
```

但这一次只会打印一个字符，因为您一次只读取一个字节。这会更好：

```
while(1)
{
    char buffer[256+1]; // +1 so we can always null terminate the buffer appropriately and safely before printing.
    printf("server waiting\n");

    rc = read(client_sockfd, buffer, 256);
    if (rc <= 0)
    {
        break; // error or remote socket closed
    }
    buffer[rc] = '\0';

    printf("The message is: %s\n", buffer); // this should print the buffer just fine
    write(client_sockfd, buffer, rc); // echo back exactly the message that was just received

    break; // If you remove this line, the code will continue to fetch new bytes and echo them out
} 
```

# c# - 添加 AjaxControlToolkit 会停止回发

> ID：15399801
> 
> 赞同：1
> 
> 时间：2013-03-14T01:51:46.743
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有一个带有两个文本框和一个下拉值的基本表单。该页面可以正常工作，但是一旦我添加了对 AjaxControlToolkit 的引用（我想将其用于 Calendar 控件），PostBack 就会停止工作。该页面已提交，但最终超时并且从不刷新。
我为创建此行为所做的只是
`<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>`
在 Page 指令之后添加：，然后
`<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" />`
在页面正文中添加：。在此阶段，我不会添加对日历（或任何 AJAX）控件的任何引用。为什么页面不刷新？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:50:34.680

将以下标签放在里面`web.config`，这样您就不必在所有页面中都包含注册标签。

```
<pages theme="Default">
  <controls>
    ....
    <add tagPrefix="asp" assembly="AjaxControlToolkit" 
       namespace="AjaxControlToolkit"/>
    ....
  </controls>
</pages> 
```

# c - POSIX 计时器以预期频率的两倍运行

> ID：15399802
> 
> 赞同：3
> 
> 时间：2013-03-14T01:51:49.247
> 
> 标签：c, linux, timer, signals, posix

为了创建一个高精度计时器，我编写了一个模块，该模块使用该[`timer_create()`](http://man7.org/linux/man-pages/man2/timer_create.2.html)函数实例化一个 POSIX 计时器。它`CLOCK_REALTIME`用作其时钟种类、`SIGEV_SIGNAL`通知方法和`SIGRTMIN`信号编号。它的信号处理程序只做一个[`sem_post()`](http://man7.org/linux/man-pages/man3/sem_post.3.html). 使用 启动计时器[`timer_settime()`](http://man7.org/linux/man-pages/man2/clock_gettime.2.html)，以任意毫秒数作为计时器间隔。

模块的用户可以等待计时器滴答；等待功能本质上是由一个[`sem_wait()`](http://man7.org/linux/man-pages/man3/sem_wait.3.html). 我的单线程测试应用程序创建计时器并以所需的`i`毫秒间隔启动它。然后它循环，等待`x`计时器触发的时间。它[`gettimeofday()`](http://man7.org/linux/man-pages/man2/settimeofday.2.html)用来计时这一切。

期望循环的总时间为`x`*`i`毫秒。相反，它只需要*0.5* * `x`*`i`毫秒。我尝试了 和 的几种组合，`x`测试`i`的总执行时间从几秒到几十秒不等。结果始终是计时器以预期/期望频率的两倍运行。

`CentOS 5.5 Linux 2.6.18-194.el5 #1 SMP Fri Apr 2 14:58:14 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux`这继续运行`gcc 4.1.2`

* * *

我已经上传[了代码的精简版本，](http://temp-share.com/show/HKdP6zUCA)其中包括编译代码的脚本和重现问题的测试。

定时器类本身的代码如下：

```
/* PosixTimer: simple class for high-accuracy timer functionality */

/* Interface */
#include "PosixTimer.h"

/* Implementation */

#include <pthread.h>
#include <time.h>
#include <signal.h>
#include <semaphore.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

#define TIMER_SIGNAL SIGRTMIN
#define ALLOCATE_AND_CLEAR(pVar)  \
    pVar = malloc(sizeof(*pVar)); \
    memset(pVar, 0, sizeof(*pVar))
#define FREE_AND_NULL(pVar) \
    free(pVar); \
    pVar = NULL

struct PosixTimerImpl {
    timer_t           timerId;
    struct itimerspec timeOut;
    sem_t             semaphore;
};

static void
PosixTimer_sigHandler(
    int sig,
    siginfo_t *info,
    void *ptr)
{
    PosixTimer *self = (PosixTimer *)(info->si_value.sival_ptr);

    if (NULL != self) {
        sem_post(&self->semaphore);
    }
}

static void
PosixTimer_setTimeoutValue(
    PosixTimer *self,
    unsigned int msecInterval)
{
    if (NULL != self) {
        self->timeOut.it_value.tv_sec = msecInterval / 1000;
        self->timeOut.it_value.tv_nsec = (msecInterval % 1000) * 1000000;
        self->timeOut.it_interval.tv_sec = msecInterval / 1000;
        self->timeOut.it_interval.tv_nsec = (msecInterval % 1000) * 1000000;
    }
}

/* Public methods */

/**
 * Constructor for the PosixTimer class. Ticks happen every <interval> and are not queued
 */
PosixTimer *
PosixTimer_new(
    unsigned int msecInterval)
{
    PosixTimer *self = NULL;

    int clockId = CLOCK_REALTIME;
    struct sigevent evp;
    int status;

    /* Construction */

    ALLOCATE_AND_CLEAR(self);

    /* Initialization */

    PosixTimer_setTimeoutValue(self, msecInterval);

    evp.sigev_signo = TIMER_SIGNAL;
    evp.sigev_notify = SIGEV_SIGNAL;
    evp.sigev_value.sival_ptr = self;
    status = timer_create(clockId, &evp, &self->timerId);
    if (0 == status) {
        sem_init(&self->semaphore, 0, 0);
    } else {
        printf("Error creating timer, retVal = %d\n", status);
        FREE_AND_NULL(self);
    }
    return self;
}

/**
 * Destructor
 */
void
PosixTimer_delete(
    PosixTimer *self)
{
    int status;

    sem_post(&self->semaphore);
    status = sem_destroy(&self->semaphore);
    if (0 != status) {
        printf("sem_destroy failed\n");
    }
    status = timer_delete(self->timerId);
    if (0 != status) {
        printf("timer_delete failed\n");
    }
    FREE_AND_NULL(self);
}

/**
 * Kick off timer
 */
void
PosixTimer_start(
    PosixTimer *self)
{
#define FLAG_RELATIVE 0
    int status;
    struct sigaction sa;

    sigemptyset(&sa.sa_mask);
    sigaddset(&sa.sa_mask, TIMER_SIGNAL);
    sa.sa_flags = SA_SIGINFO;
    sa.sa_sigaction = PosixTimer_sigHandler;
    status = sigaction(TIMER_SIGNAL, &sa, NULL);
    if (0 != status) {
        printf("sigaction failed\n");
    } else {
        status = timer_settime(self->timerId, FLAG_RELATIVE,
                    &self->timeOut, NULL);
        if (0 != status) {
            printf("timer_settime failed\n");
        }
    }
}

/**
 * Wait for next timer tick
 */
void
PosixTimer_wait(
    PosixTimer *self)
{
    /* Just wait for the semaphore */
    sem_wait(&self->semaphore);
} 
```

用于显示问题的测试：

```
/* Simple test app to test PosixTimer */

#include "PosixTimer.h"
#include <sys/time.h>
#include <stdio.h>

int main(
    int argc,
    const char ** argv)
{

#define USEC_PER_MSEC (1000)
#define NSEC_PER_MSEC (1000000)
#define MSEC_PER_SEC  (1000)

    PosixTimer *timer1 = NULL;
    struct timeval before, after;
    double dElapsedMsecs;
    int elapsedMsecs;
    int iCount1;

    printf("Running PosixTimer tests\n");

#define DURATION_MSEC (10000)
#define INTERVAL_MSEC_TEST1 (5)
#define ACCURACY_MSEC_TEST1 (100)

    timer1 = PosixTimer_new(INTERVAL_MSEC_TEST1);
    iCount1 = DURATION_MSEC/INTERVAL_MSEC_TEST1;
    printf("Running test: %d milliseconds in %d cycles\n", DURATION_MSEC, iCount1);

    gettimeofday(&before, NULL);
    PosixTimer_start(timer1);
    while (0 < iCount1) {
        PosixTimer_wait(timer1);
        //printf(".");
        iCount1--;
    }
    gettimeofday(&after, NULL);
    //printf("\n");

    dElapsedMsecs = (after.tv_sec - before.tv_sec) * MSEC_PER_SEC;
    dElapsedMsecs += (after.tv_usec - before.tv_usec) / USEC_PER_MSEC;
    elapsedMsecs = dElapsedMsecs+0.5;

    if ((ACCURACY_MSEC_TEST1 > (elapsedMsecs - DURATION_MSEC)) &&
        (ACCURACY_MSEC_TEST1 > (DURATION_MSEC - elapsedMsecs))) {
        printf("success");
    } else {
        printf("failure");
    }
    printf(" (expected result in range (%d -- %d), got %d)\n", 
        DURATION_MSEC - ACCURACY_MSEC_TEST1,
        DURATION_MSEC + ACCURACY_MSEC_TEST1,
        elapsedMsecs);

    return 0;
} 
```

结果是

```
-bash-3.2$ ./DesignBasedTest 
Running PosixTimer tests
Running test: 10000 milliseconds in 2000 cycles
failure (expected result in range (9900 -- 10100), got 5000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:37:22.140

这个问题的根本原因是它`sem_wait()`被唤醒了两次：一次是因为被信号中断了，一次是因为信号量被释放，它确实需要唤醒`sem_post()`。检查返回值`sem_wait()`并`errno = EINTR`解决问题：

```
/**
 * Wait for next timer tick
 */
int
PosixTimer_wait(
    PosixTimer *self)
{
    int result;

    /* Just wait for the semaphore */
    do {
        result = (0 == sem_wait(&self->semaphore));
        if (!result) {
            result = errno;
        }
    } while (EINTR == result);
    return result;
} 
```

感谢 Basile Starynkevitch 建议使用`strace`，这揭示了问题的原因。

# javascript - Javascript 命名空间 + onchange = 不可能？

> ID：15399809
> 
> 赞同：0
> 
> 时间：2013-03-14T01:53:35.270
> 
> 标签：javascript, namespaces

我正在为我的 javascript 代码使用命名空间，并且我*认为*我已经为 select 元素使用了*onchange*属性。当我尝试使用（或不使用）我的命名空间调用函数时，错误控制台报告未找到该函数。

```
var MYNS = {}; //namespace
MYNS.modifySearchPage = function () {
    ....
    var eSelect = document.createElement("select")
    .....
    eSelect.setAttribute('onchange', 'MYNS.handleChange(this)');
    .....
    //set up the options (value, textcontent, eSelect.appendChild(theOption)
    ...
    // add the eSelect to the DOM
}
MYNS.handleChange = function (select) {
    //parse the select options
} 
```

当我从下拉列表中选择一个项目时，我在控制台中得到的结果是： `Uncaught ReferenceError: MYNS is not defined`

我试图将命名空间添加到窗口，但这似乎没有帮助（而且我不相信这样做是安全的）。

我尝试将 onclick 处理程序添加到*select*元素，但显然这是一个坏主意，因为*select*不处理 onclicks。

从调用和函数定义中剥离 MYNS 也无济于事。

有任何想法吗？

谢谢， mwolfe

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:57:30.877

不要使用属性来附加处理程序 - 使用属性：

```
eSelect.onchange = function() {
    MYNS.handleChange(this);
}; 
```

更一般地，您还可以使用标准和更推荐`addEventListener`：

```
function changeHandler() {
    MYNS.handleChange(this);
}

if (eSelect.addEventListener) {
    eSelect.addEventListener('change', changeHandler, false);
} else if (eSelect.attachEvent)  {
    eSelect.attachEvent('onchange', changeHandler);  // fallback for IE
} 
```

还值得注意的是，您可以致电

```
eSelect.addEventListener('change', MYNS.handleChange, false); 
```

不过，您将需要修改您的回调 - 传递的参数将是一个事件对象，并且`this`函数内部将引用触发事件的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:58:03.017

你只是编码一个不同的单词的错误大小写`MyNS.handleChange`，它应该是`MYNS.handleChange`。在 JavaScript 中，变量区分大小写。

# php - 如何正确使用会话

> ID：15399813
> 
> 赞同：0
> 
> 时间：2013-03-14T01:54:15.660
> 
> 标签：php

我看过很多关于这方面的文章，但到目前为止没有任何效果。我想做的很简单。

我有一个登录页面.. 通过 mysql/php 等验证你是谁。这个页面中有 session_start()。从那里，它会将您带到菜单页面。

如果会话尚未从登录页面开始，我想将其设置为您无法查看菜单页面的位置，它将引导您返回登录页面。如果这是不可能的，我最终想要做的是让它到你必须使用登录页面来查看菜单页面的地方。

评论中的代码：

登录.php

```
session_start(); 
session_id ("username"); 
```

菜单.php

```
if(!session_id() == "") { 
    header("location:login.html");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:11:22.617

与其只是开始会话，不如在里面放一些东西，这样你就知道它已经过去了`login.php`：

```
$_SESSION['logged_in'] = true; 
```

然后，在菜单页面内，您还需要`session_start()`：

```
session_start();
if (!isset($_SESSION['logged_in'])) {
    header('Location: /login.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:00:25.963

使用 Laravel 之类的框架，因为这些功能已经内置并正确处理。重新发明轮子是没有用的，而且像我提到的那样的框架很容易学习。

编辑：对不起，我对回答问题比较陌生，所以我会再试一次。

在诸如 Usercake 之类的库中，当用户登录时您设置了会话变量会发生什么

```
$_SESSION["stack_user"] = "user@stackoverflow.com"; // This could be their name, an object etc 
```

在需要用户登录的每个页面上之后，您可以通过以下方式检查

```
if (!isset($_SESSION["stack_user"])){
    header("Location: /login.php");
}
// The rest of your page logic here 
```

啊啊啊我才意识到这已经说过了……男孩，我的开端很糟糕

# amazon-ec2 - 使用“dd”捕获和恢复失败？

> ID：15399821
> 
> 赞同：0
> 
> 时间：2013-03-14T01:55:13.577
> 
> 标签：amazon-ec2, linux-kernel, vmware, dd, gunzip

我用 dd 像这样捕获两个本地 vm 分区......

```
# dd if=/dev/sda1 | gzip >mySda1.gz 
# dd if=/dev/sda2 | gzip >mySda2.gz 
```

然后我将两个足够大的卷附加到一个已经运行的实例并挂载它们（作为 /mnt/one 和 /mnt/two），然后将 .gz 文件复制到实例并使用这些命令来恢复分区

```
# gunzip –c mySda1.gz | dd of=/dev/xvdk
# gunzip –c mySda2.gz | dd of=/dev/xvdl 
```

gunzip 命令没有显示失败，但是当我转到 /mnt/one 并发出命令**ls -a**时，那里什么也没有。为什么是这样？.gz 文件非常大。为什么即使 gunzip 命令完成，挂载的分区也显示为空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:57:49.817

在您可以直接写入分区之前，您必须首先确保它已卸载。

如果您直接在其背后写入磁盘，Linux 将不会注意到（更重要的是，它会假设这不会发生——如果您尝试修改已挂载的文件系统，它可能会变得非常困惑。）

因此，正确的程序如下：

```
umount /dev/xvdk
gunzip –c mySda1.gz | dd of=/dev/xvdk
mount /dev/xvdk 
```

再次为`/dev/xvdl`.

# java - 如何从选项菜单启动活动

> ID：15399822
> 
> 赞同：1
> 
> 时间：2013-03-14T01:55:39.490
> 
> 标签：java, android, eclipse, android-activity

我正在尝试从 MenuItem 开始一项活动，但是每次都失败。我确定我忽略了一些简单的事情。

附言

非常感谢解释我做错了什么而不是更新代码！

*   阿曼尼·斯旺

* * *

## 来源：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AppActivity extends Activity {
private Button button1,button2,button3;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
button1 = (Button) findViewById(R.id.button1);
button2 = (Button) findViewById(R.id.button2);
button3 = (Button) findViewById(R.id.button3); 

}
public void openDialog(View v){
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(AppActivity.this)
.setTitle("Settings Menu")
.setMessage("Delete Edit or Link?")
.setCancelable(false)
.setNeutralButton("Edit", new DialogInterface.OnClickListener() {
     public void onClick(DialogInterface dialog,int id) {
         Intent intentApp2Activity = new Intent(AppActivity.this,     User1Settings.class);
         startActivity(intentApp2Activity);
     }
})
.setPositiveButton("Link",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        Intent intentApp2Activity = new Intent(AppActivity.this, User1.class);
        startActivity(intentApp2Activity);
    }
})    
.setNegativeButton("Delete",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {

        dialog.cancel();
    }
 });

AlertDialog alertDialog = alertDialogBuilder.create();

alertDialog.show();
}    

public boolean onCreateOptionsMenu(Menu menu) {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.main, menu);
return true;
}   
public boolean onOptionsItemSelected(MenuItem item) {
Intent intentApp2Activity = new Intent(AppActivity.this, User1.class);
startActivity(intentApp2Activity);
}
} 
```

* * *

## LOGCAT

```
03-14 01:51:12.781: D/dalvikvm(1982): GC_FOR_ALLOC freed 36K, 7% free 2467K/2648K, paused 51ms, total 56ms
03-14 01:51:12.831: I/dalvikvm-heap(1982): Grow heap (frag case) to 6.061MB for 3686416-byte allocation
03-14 01:51:12.951: D/dalvikvm(1982): GC_FOR_ALLOC freed 2K, 3% free 6065K/6252K, paused 119ms, total 119ms
03-14 01:51:13.131: D/dalvikvm(1982): GC_CONCURRENT freed <1K, 3% free 6065K/6252K, paused 7ms+6ms, total 178ms
03-14 01:51:14.391: D/libEGL(1982): loaded /system/lib/egl/libEGL_emulation.so
03-14 01:51:14.487: D/(1982): HostConnection::get() New Host Connection established 0x2a152778, tid 1982
03-14 01:51:14.711: D/libEGL(1982): loaded /system/lib/egl/libGLESv1_CM_emulation.so
03-14 01:51:14.731: D/libEGL(1982): loaded /system/lib/egl/libGLESv2_emulation.so
03-14 01:51:14.981: W/EGL_emulation(1982): eglSurfaceAttrib not implemented
03-14 01:51:15.000: D/OpenGLRenderer(1982): Enabling debug mode 0
03-14 01:51:16.871: D/dalvikvm(1982): GC_FOR_ALLOC freed 12K, 3% free 6125K/6280K, paused     53ms, total 60ms
03-14 01:51:16.941: I/dalvikvm-heap(1982): Grow heap (frag case) to 9.634MB for 3686416-byte allocation
03-14 01:51:17.161: D/dalvikvm(1982): GC_CONCURRENT freed 2K, 2% free 9722K/9884K, paused     81ms+17ms, total 227ms
03-14 01:51:19.020: W/EGL_emulation(1982): eglSurfaceAttrib not implemented
03-14 01:51:42.030: D/AndroidRuntime(1982): Shutting down VM
03-14 01:51:42.040: W/dalvikvm(1982): threadid=1: thread exiting with uncaught exception     (group=0x40a71930)
03-14 01:51:42.160: E/AndroidRuntime(1982): FATAL EXCEPTION: main
03-14 01:51:42.160: E/AndroidRuntime(1982): java.lang.Error: Unresolved compilation problem: 
03-14 01:51:42.160: E/AndroidRuntime(1982):     This method must return a result of type boolean
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.example.linkingmanager.AppActivity.onOptionsItemSelected(AppActivity.java:84)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.app.Activity.onMenuItemSelected(Activity.java:2548)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:980)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:547)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:115)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.view.View.performClick(View.java:4204)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.view.View$PerformClick.run(View.java:17355)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.os.Handler.handleCallback(Handler.java:725)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.os.Looper.loop(Looper.java:137)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at     java.lang.reflect.Method.invoke(Method.java:511)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-14 01:51:42.160: E/AndroidRuntime(1982):     at dalvik.system.NativeStart.main(Native    Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:00:48.047

```
public boolean onOptionsItemSelected(MenuItem item) {
Intent intentApp2Activity = new Intent(AppActivity.this, User1.class);
startActivity(intentApp2Activity);
} 
```

需要是

```
public boolean onOptionsItemSelected(MenuItem item) {
Intent intentApp2Activity = new Intent(AppActivity.this, User1.class);
startActivity(intentApp2Activity);
return true;
} 
```

您的方法没有返回 a `boolean`，但它**需**要这样做，因为您的方法签名是

```
public boolean onOptionsItemSelected(MenuItem item) { 
```

`unresolved compilation error`在您看到的结果中没有布尔返回结果。

当方法应该被覆盖时，也可以使用[@Override 注释](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)来减少非覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:06:57.000

```
public boolean onOptionsItemSelected(MenuItem item) { 
```

正如方法的签名所说，它需要返回一个布尔值。

# java - 从中序和级别遍历构造二叉树

> ID：15399835
> 
> 赞同：3
> 
> 时间：2013-03-14T01:57:20.103
> 
> 标签：java, binary-tree

需要帮助找到一种在给定中序和级别遍历的情况下构造二叉树的方法。由于必须通过使用队列来完成级别遍历，因此是否可以使用递归来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:55:16.680

## 以下是解决此问题的方法。从反向看，更容易想到如何处理每个步骤：

```
 8
     / \
    4   9
   / \   \
  2   6   10
 /
1 
```

您有以下内容：

为了：`1 2 4 6 8 9 10`

等级：`8 4 9 2 6 10 1`

### 1 级 - 根

水平遍历是树的从左到右、从上到下的遍历（如广度优先搜索）。在此示例中，您知道这`8`将是根节点。现在看中序遍历，我们知道`1 2 4 6`构成左子树并`9 10`构成右子树。所以我们有：

```
 8
1 2 4 6   9 10 
```

在保留顺序的同时，创建一个级别遍历的副本，其中不包含我们将要访问的节点以进行左右递归构造。下面的注释将遍历左侧的树步骤以及经过的内容：

### 级别 2 - 左子树

为了：`1 2 4 6`

等级：`4 2 6 1`

*   根：`4`
*   左子树：`1 2`
*   右子树：`6`

结果：

```
 8
       /  9 10
      4
  2 1  \
        6 
```

### 第 3 级 - 左子树

为了：`1 2`

等级：`2 1`

*   根：`2`
*   左子树：`1`
*   右子树：空

结果：

```
 8
      /  9 10
     4
    / \   
   2   6
  /
 1 
```

现在我们已经完成了向左的递归，希望您可以了解如何处理树的正确孩子！一旦你有了算法，你应该能够在给定两个不同的遍历的情况下重新构造树。关键是根据两次遍历识别如何在每次递归调用时确定**根**，其余的应该遵循。

# php - PHP验证码未显示在000webhost中

> ID：15399841
> 
> 赞同：0
> 
> 时间：2013-03-14T01:57:46.110
> 
> 标签：php

我正在尝试在托管的网站中显示我的验证码图像，`000webhost`但它显示错误：

> imagettftext() [function.imagettftext]：在第 20 行的 /home/a3594760/public_html/captcha1.php 中找不到/打开字体

虽然我在同一个文件夹中有文件 MAGENTOB.TTF。我的代码与在我的本地主机中运行的代码相同，但在托管时显示错误`000webhost`：

```
<?php
  include_once('includes/session.php');
  $_SESSION['secure']=rand(1000,9999);
  header('content-type:image/jpeg');
  $text=$_SESSION['secure'];

  $font_size=25;
  $image_width=200;
  $image_height=40;

  $image=imagecreate($image_width,$image_height);
  imagecolorallocate($image,255,255,255);
  $text_color=imagecolorallocate($image,0,0,0);
  for($x=1;$x<=40;$x++)
  {
    $x1=rand(1,120);
    $x2=rand(1,120);
    $y1=rand(1,120);
    $y2=rand(1,120);
    imageline($image,$x1,$y1,$x2,$y2,$text_color);
  }
  imagettftext($image,$font_size,0,15,30,$text_color ,'MAGNETOB.TTF',$text);
  imagejpeg($image);

?> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:04:38.810

你的本地主机设置是什么？什么是设置`000webhost`？

我的第一个猜测是可能存在区分大小写的问题。您的文件名可能`MAGNETOB.TTF`在您的文件中，但不知何故`magnetob.ttf`在文件系统中。

另一个问题可能是需要完整指定的文件路径。所以它是这样的：

```
/path/to/my/font/on/web/MAGNETOB.TTF 
```

最后的想法与文件权限有关。网络服务器可以读取文件吗？

# sql-server - SQL Server Openrowset 仅从大型 excel (.xls) 文件中导入 2000 行

> ID：15399843
> 
> 赞同：0
> 
> 时间：2013-03-14T01:57:49.637
> 
> 标签：sql-server, excel, openrowset

我有一个包含 60000 行数据的大型 excel 文件（约 10MB）。我想将所有这些行导入 SQL Server 数据库。假设文件路径是 C:\file.xls，我的查询是：

```
SELECT * INTO ImportedExcel FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
'Excel 8.0;Database=C:\file.xls', 'SELECT * FROM [Sheet1$]') 
```

该过程运行良好，但只导入了 2000 行而不是 60000 行。请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:44:33.047

这是一个想法.. 为什么不提交每 500 次左右的交易呢？

我们都知道 Excel 中有 65,530 条记录的限制，但我严重怀疑您是否达到了这个上限。

```
DECLARE @SelCount INT
-- Initialize the select count 
SET @SelCount = 0
SET @SelCount = @SelCount + 1

SELECT * INTO ImportedExcel FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
'Excel 8.0;Database=C:\file.xls', 'SELECT * FROM [Sheet1$]') 

      -- Commit every 500 records and start a new transaction 
      IF @SelCount % 500 = 0
        BEGIN
            COMMIT TRANSACTION
            BEGIN TRANSACTION
        END
  END

IF @SelCount % 500 <> 0
  BEGIN
      COMMIT TRANSACTION
  END
GO 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T02:17:50.503

因此，该过程“运行良好”但给出了错误的答案并且没有报告错误。是时候尝试别的东西了，你说呢？

也许这种事情可以发挥作用。也许有一些关闭行限制的 abracadabra 设置。如果是这样，这里会有人知道。我的建议是在火车撞坏你之前下车。

使用您喜欢的任何东西——VBA、Perl，手动——让 Excel 将数据写入（最好）制表符分隔的文件。“另存为...”非常安全；我不记得有一次 Excel 将工作表的*一部分*保存到文本文件中。然后使用 BCP 或 BULK INSERT 导入文件。

它最初需要做更多的工作，但它很强大，并且可以让您避免目测不可靠技术的结果。

# c# - 如何将指纹中的文本文件内容插入 SQL Server 2008？

> ID：15399844
> 
> 赞同：-1
> 
> 时间：2013-03-14T01:57:55.197
> 
> 标签：c#, sql-server-2008

我是 asp.net 的初学者，我有一个从指纹导出的 .txt 文件。我想知道我是否可以将文件内容导入具有相同列的 SQL Server 2008？

这是文件的内容：

```
No      Mchn    EnNo        Name        Mode    IOMd    DateTime
00001   1       00000003                33      0       2012/01/05  10:48:36
00002   1       00000014                33      0       2012/01/07  11:43:02
00003   1       00000014                33      0       2012/01/07  11:43:02
00004   1       00000022                33      0       2012/01/07  11:47:33
00005   1       00000020                33      0       2012/01/07  11:52:40
00006   1       00000023                33      0       2012/01/07  11:56:48 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:13:02.640

我相信将数据导入 SQL Server 的最简单方法是使用导入/导出向导。尝试以下步骤。

*   在 SQL Server Management Studio 中，通过右键单击数据库名称并选择任务 > 导入数据来访问导入导出向导。
*   然后选择[数据源作为平面文件](http://msdn.microsoft.com/en-us/library/ms187017(v=sql.100).aspx)
*   选择您的文件并为分隔符和行尾标记做出适当的选择。
*   然后，该向导将为您提供创建新表或[导入现有表](https://stackoverflow.com/questions/10641588/sql-server-import-from-flat-file-match-columns)的选项。

这应该允许您将数据导入数据库。如果您希望向导可以将配置保存为 SSIS 包，以便您可以在多个文件上使用它。

# shell - 解析shell脚本中的参数

> ID：15399847
> 
> 赞同：1
> 
> 时间：2013-03-14T01:58:24.093
> 
> 标签：shell

我有一个 myscript.sh，它的开头是这样的：

```
#!/usr/bin/env bash
set -e

usage(){
  echo "Show Usage ... Blah blah"
  exit 1
}

if [ $# = 0 ]; then
  usage;
fi

while true; do
  case "$1" in
    -l | --build-lib ) BUILD_LIB=true; 
    --other-option ) OTHER_OPTION=$2; shift; shift;;
    -h | --help ) usage; shift;;
    * ) break ;;
  esac
done

# I do my thing here ....
echo "Do my thing" 
```

我不确定这是否是解析参数的最佳方法，但到目前为止我遇到了问题。当用户传递错误或未知的参数时，我没有正确地中断/失败。我该如何正确解决这个问题？

例如我想避免这样的电话：

```
$ ./myscript.sh unknownParameter 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:00:26.440

当给出不正确的选项时，您需要退出，而不仅仅是跳出循环。最简单的方法是调用你的`usage`函数。

```
while [ $# -gt 0 ]; do
  case "$1" in
    -l | --build-lib ) BUILD_LIB=tru ;;
    --xcode-dev-path ) XCODE_DEV_PATH=${2%/}; shift ;;
    -h | --help ) usage;;
    * ) usage ;;
  esac
  shift
done 
```

# java - 链表堆栈丢失最后一个推入堆栈的项目

> ID：15399849
> 
> 赞同：3
> 
> 时间：2013-03-14T01:58:38.413
> 
> 标签：java, linked-list, stack

我正在研究 Stack 的 Linked List 实现，并且似乎只有一个错误有我需要的东西。我正在插入 3 个字符串，但在弹出第 3 个字符串之前，我得到了 NullPointerException。

在运行调试时，我发现这个缺失值正在从这个列表中“弹出”，但它似乎没有被计算在内......这意味着它从堆栈中丢失，没有打印到控制台，并且列表在由于最后一个值已经弹出，因此抛出 NullPointerException 。有人可以告诉我如何将我的所有值打印到控制台吗？

这是我的 LinkedListStack 类：

```
public class LinkedListStack <T>{  
private LinkedListStackNode<T> top;
public T data; 

class LinkedListStackNode<T> {        
    private T data;      //LINE 8
    private LinkedListStackNode<T> next; 

    public LinkedListStackNode(T data, LinkedListStackNode<T> next) {                       
        this.data = data;            
        this.next = next;
    }
}   
public void stack(){
    top = null;
}
public boolean isEmpty(){
    return top == null;
}
public void push (T t){
    top = new LinkedListStackNode<T> (t, top);
}
public T pop (){
    if (isEmpty()){
        System.out.println("The stack is empty!");
    }
    else{
        top = top.next;
    }
    return top.data; //Line 32
}
public T peek(){
    if (isEmpty()){
        System.out.println("Stack is Empty");
    }   
    return top.data;        
}  
} 
```

这是我的主要（）：

```
public class StacksAndQsMain {
  public static void main(String[] args) {
           ...snipped code to condense (not part of this implementation)...

    //LinkedList Implementation
    LinkedListStack<String> lls = new LinkedListStack<>();

    String s3 = "Tonight"; //this does not print but is removed from Stack
    String s4 = "We Conqure"; //prints fine
    String s5 = "Stacks"; //prints fine

    lls.push(s5);
    lls.push(s4);
    lls.push(s3);

    while (!lls.isEmpty()){

        System.out.println(lls.pop()); //LINE 32
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:03:56.717

看来您正在弹出顶部，然后在 pop() 方法中读取新顶部的值

它应该如下所示：

```
public T pop (){
   if (isEmpty()){
       throw new RuntimeException("Stack is empty");
   }
   else{
       T ret = top.data;
       top = top.next;
       return ret;
   }
} 
```

当你在它的时候，你不妨修复你的 peek()

```
public T peek(){
    if (isEmpty()) {
        throw new RuntimeException("Stack is empty");
    }   
    return top.data;        
} 
```

# javascript - 在一页上加载多个 Google 地图 - 慢？

> ID：15399850
> 
> 赞同：2
> 
> 时间：2013-03-14T01:58:40.423
> 
> 标签：javascript, jquery, google-maps

我正在为一个列出其董事会的非营利组织创建一个页面。在灯箱中，我有其他信息，包括精确定位其营业地点的谷歌地图。它看起来很棒，但是他们有几个董事会（10+）并且许多谷歌地图导致页面加载非常缓慢。我几乎无法滚动它加载如此缓慢。（我使用的是 Firefox 20）当我在 Chrome 中进行测试时，它并没有那么慢，但有时会很慢。

有没有办法在打开灯箱之前只加载谷歌地图？

注意：一旦我看到谷歌地图停止加载页面运行非常流畅。加载谷歌地图时它只是缓慢而生涩。

这是我的灯箱 HTML：

```
<div class="hide">
 <div id="name">
  <div class="grid_8">
   <p class="bio">Info Goes Here</p>
   <p>Info Goes Here</p>
  </div>
  <div class="grid_4">
   <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="map-code"></iframe><br /><small><a target="_blank" href="map-link" style="color:#0000FF;text-align:left">View Larger Map</a></small>
  </div>
  </div>
</div> 
```

我正在使用 Fancybox 2 和 jQuery 1.8.3。

如何在触发灯箱之前停止加载地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:37:36.587

我无法找到使用`<iframe>`嵌入代码的方法。我所做的是在调用 Fancybox 时使用[gmap3](http://gmap3.net/en/)加载地图。这是我使用的代码示例：

```
$(function() {
  $(".fancybox").fancybox({
         beforeLoad : function() {  
            $("#map").gmap3({
                 // MAP OPTIONS
            });
         }
   });  
}); 
```

# sql-server - SQL Server 2012 - 表分区 - 可为空的列

> ID：15399853
> 
> 赞同：0
> 
> 时间：2013-03-14T01:58:42.533
> 
> 标签：sql-server, tsql, sql-server-2012

我有一个表，我打算按可为空的列进行分区。

除了主键之外，这似乎工作得很好。我收到一个错误：

> *唯一索引的分区列必须是索引键的子集*

1.  在不同的文件组上创建主键。这不起作用，因为它删除了分区。

2.  一起跳过主键并创建聚集索引（非唯一）。这不会完全起作用，因为我需要一个主键。

关于如何在分区列可为空的分区表上获取主键的任何想法？如果没有，我愿意接受有关如何以另一种方式处理它的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:03:58.473

不知道是什么真正阻止了你。您可以在唯一列上创建 PK，并使您的分区列可以为空。只是不要只在 PK 列上创建唯一的集群索引。当您需要创建唯一的聚簇索引时，将您的 PK 列和分区列一起添加。

# php - 使用 AWS ElastiCache 的 PHP Zend

> ID：15399862
> 
> 赞同：1
> 
> 时间：2013-03-14T01:59:38.650
> 
> 标签：php, mysql, zend-framework, amazon-web-services, amazon-elasticache

嗨，我有一个带有 php zend 框架的应用程序，我在我的 zend 应用程序上设置了一个 AWS ElastiCache，如下所示

引导程序.php：

```
protected function _initMemcache()
{
    if (extension_loaded('memcache'))
    {
        // Configure caching backend strategy
        $cacheBackend = new Zend_Cache_Backend_Memcached(
            array(
                'servers' => array(
                    array(
                        'host' => 'xxxx.yyyy.qqq.rrr.cache.amazonaws.com',
                        'port' => '11211'
                    )
                    // Other servers here
                ),
                'compression' => true,
                'compatibility' => true
            )
        );

        // Configure caching frontend strategy
        $cacheFrontend = new Zend_Cache_Core(
            array(
                'caching' => true,
                'cache_id_prefix' => 'MyApp_',
                'write_control' => true,
                'automatic_serialization' => true,
                'ignore_user_abort' => true
            )
        );

        // Build a caching object
        $memcache = Zend_Cache::factory($cacheFrontend, $cacheBackend);

        Zend_Registry::set('cache', $memcache);
    } else {
        // Handle a non-existent extension here
    }
} 
```

在我的控制器上：

```
public function fetchfrontAction()
{
    $cache = Zend_Registry::get('cache');

    $catid = $this->_getParam('catId');

    $business = new Application_Model_Mapper_BusinessMapper();
    $businessReviewMapper = new Application_Model_Mapper_BusinessReviewsMapper();
    $count = 5;
    if (!$result = $cache->load('dataset')) {

        $result = $business->getFetchByCategory($catid,$count);

        for ($i = 0; $i < count($result); $i++) {

            $result[$i]['business_name_url'] =  $result[$i]['business_url'];
            $userBusinessReviews = $businessReviewMapper->getBusinessReview($result[$i]['business_id'],1);

            if(!is_null($userBusinessReviews)){
                $result[$i]['user_business_reviews'] = $userBusinessReviews;
            }
            $userImg = $this->view->getLoginUserImage(
                $result[$i]['user_business_reviews'][0]['social_id'],
                $result[$i]['user_business_reviews'][0]['login_type'],null,null,square);
            if (!is_null($userImg)) {
                $result[$i]['user_img'] = $userImg;
            }
        }
        $cache->save($result,'dataset');
    }

    $this->_helper->json($result);
} 
```

现在的问题是它没有任何错误，我如何测试它是否真的从 AWS 缓存？有没有一种方法可以比较使用和不使用缓存的时间？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:19:52.687

最简单的方法是在and上放置一个`else`子句来记录缓存命中。`if (!$result = $cache->load())``Zend_Log`

此外，我认为 AWS 为您提供了一些管理控制台来检查/管理缓存的内容/活动。但只是在那个特定的点上大声思考。

# java - 增量或序列而不是表生成 JPA

> ID：15399863
> 
> 赞同：1
> 
> 时间：2013-03-14T01:59:43.610
> 
> 标签：java, hibernate, jpa

我正在开发一个支持多个数据库和休眠满足该要求的应用程序。

现在问题在于主自动生成密钥。一些数据库支持自动增量和一些增加标识所需的序列。要解决此问题，请使用以下策略

```
strategy = GenerationType.TABLE (javax.persistence) 
```

这满足了我的要求。

在这篇[文章](https://stackoverflow.com/questions/15393534/hibernate-provides-next-generated-id-32768-and-so-on-65536-98304)中，一位用户评论说

**如果您需要按顺序排列 id，最好使用增量或序列而不是表生成**

如果我使用自动增量或序列，这意味着当我将一个数据库移动到另一个数据库时，它需要在注释级别进行一些更改（额外负担）

更新我，使用增量或序列而不是表生成真的更好，或者它只是一个语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T21:49:45.897

自动递增的缺点：在事务提交之前您不知道 id（这在 JPA 中可能是一个问题，因为某些 EntityManager 操作依赖于 Id）。并非所有数据库都支持自动递增字段。

序列缺点：并非所有数据库都有序列。

表的缺点： ID 不一定是连续的。

由于您不太可能用完 Id，因此使用表生成仍然是一个不错的选择。您甚至可以调整 id 分配大小以使用更多连续的 id（默认大小为 50）：

```
@TableGenerator(name="myGenerator", allocationSize=1) 
```

但是，这将导致每次插入至少两次查询 id 分配表：一次查询最新 id 的值，一次检索它。

# shell - 配置 Cyqwin 以使使用 ./ 变得不必要

> ID：15399865
> 
> 赞同：0
> 
> 时间：2013-03-14T01:59:48.677
> 
> 标签：shell, command-line

为了让我在 Cyqwin 中运行 .exe 或 .sh，我必须在行首放一个 ./。有没有办法让我改变它，这样就没有必要了？当我尝试运行测试脚本并且它在我正在工作的目录中找不到正确的文件时，这会导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:02:15.660

必须使用 './' 的原因是专门告诉 shell 你要执行什么文件。如果没有前导 './'，则会搜索您的 $PATH 环境变量。如果愿意，您可以尝试将包含常用脚本和可执行文件的目录添加到 $PATH 中。或者，您可以将当前目录 (.) 添加到 $PATH，但这是一个非常糟糕的主意，因为它可能导致意外执行。

从[cygwin 环境变量文档](http://cygwin.com/cygwin-ug-net/setup-env.html)：

> Cygwin 应用程序使用 PATH 环境变量作为目录列表来搜索要运行的可执行文件。当 Cygwin 进程首次启动时，此环境变量会从 Windows 格式（例如 C:\Windows\system32;C:\Windows）转换为 UNIX 格式（例如 /cygdrive/c/Windows/system32:/cygdrive/c/Windows） . 设置它，使其至少包含 x:\cygwin\bin 目录，如果您希望在 bash 之外使用 cygwin 工具，则其中“x:\cygwin 是 cygwin 安装的“根”。

# javascript - Google Caja appendChild 不更新 Firefox 中的 form.elements

> ID：15399867
> 
> 赞同：2
> 
> 时间：2013-03-14T02:00:11.560
> 
> 标签：javascript, firefox, google-apps-script, appendchild, google-caja

我正在使用 Google Apps Script Web App 和 HtmlService 来提供内容，并且我正在尝试使用 appendChild 将输入元素动态添加到表单中。它适用于 Chrome 24 和 IE 10，但 Firefox 19.0.2 不会更新表单的元素列表。

因此，它在网页上正确显示，但在 Firefox 中，使用 appendChild 添加到表单的任何输入元素都不是 form.elements 集合的一部分。值得注意的是，仅当使用 Caja 清理 HTML 时才会出现此问题，如果我在[jsfiddle](http://jsfiddle.net/TjNQU/2/)中使用相同的代码，它可以正常工作。

这个问题可以在[这里](https://script.google.com/macros/s/AKfycbxSq0D6akOTUNzSUNtaHHmRKfXA85PlUrr_A0IfwLu0Y6jC7RUD/exec)看到，也就是下面的代码：

```
<html>
      <head>
        <title>Test</title>
        <script type="text/javascript">
          function print(form)
          {
            var str = "";
            for(var v = 0; v < form.length; v++)
            {
              str += "<br>" + form[v].nodeName + "." + form[v].id + ": ";
              if(form[v].elements != undefined)
                for(var w = 0; w < form[v].elements.length; w++)
                {   
                  str += form[v].elements[w].name + ", ";
                }
            }
            return str;
          }

          function submitForm()
          {        
            document.getElementById("nameLookupHelp").innerHTML = (print(document.forms)) + "<br>Total Elements:" + document.forms[0].elements.length;
            return;
          }

          function onLoad()
          {
            var name = document.getElementById("nameForm");
            var t = document.createElement("input");
            t.name = "TestInput";
            //t.id = "TestInput";
            name.appendChild(t);
          }
        </script>
      </head>
      <body onload="onLoad()">
        <form name="nameForm" id="nameForm">
          <input name="nameLookup" id="nameLookup">
          <input type="button" id="bntNameForm" onclick="submitForm(this)" value="Lookup">
          <div class="" id="nameLookupHelp">Please enter your name.</div>
        </form>
      </body>
    </html> 
```

根据我在该主题上的发现，Firefox 不喜欢无效的 HTML。但是，据我所知，HTML 输出是完全有效的。此外，由于它适用于 jsfiddle，我认为问题必须与 Caja 与我的 HTML 和 Firefox 交互的方式有关。

另外，最后一件事，如果我在 Firefox 中检查表单元素并双击标记面板中的表单标签，然后单击关闭（取消编辑），Firefox 然后会检测到所有元素并且一切正常。Firefox 显示为 HTML 的内容并没有改变。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:13:13.370

恭喜，你发现了一个错误；表单`.elements`在第一次被访问后永远不会更新。我已经[在 Caja r5321 中修复了它](https://code.google.com/p/google-caja/source/detail?r=5321)。

# arrays - 将数组添加到会话数组

> ID：15399869
> 
> 赞同：1
> 
> 时间：2013-03-14T02:00:25.413
> 
> 标签：arrays, session, array-push

我有一个来自 ID 号的 MySQL 查询的数组，我试图将它添加到已经创建的会话数组中。出于某种原因，我的代码是在已经存在的会话数组中添加一个数组，而不仅仅是将 ID 号添加到会话中。是什么导致这种情况发生？

这是我的PHP...

```
//Find members of this group and create an array to add to cart
            $deletedgroupmembersquery = "SELECT * FROM groupmember WHERE group_id='$groupid'";
            $deletedgroupmembers = mysql_query($deletedgroupmembersquery) or die('SQL Error :: '.mysql_error());

            if (mysql_num_rows($deletedgroupmembers) > 0) {
                $groupmembers = mysql_num_rows($deletedgroupmembers);
                $cart = array();
                while(($deletedmembersrow =  mysql_fetch_assoc($deletedgroupmembers))) {
                    $cart[] = $deletedmembersrow['contact_id'];
                }

                    //Add the array to the cart session
                    if (isset($cart)) {
                    $_SESSION['cart'] = array();
                    array_push($_SESSION[cart],$cart);
                    } else {
                    } 
```

这是上面代码正在创建的会话..

```
Array ( [cart] => Array ( [0] => Array ( [0] => 1362 [1] => 1371 [2] => 2241 ) ) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:05:40.200

`$cart`已经是一个数组。当你这样做时：

```
array_push($_SESSION[cart],$cart); 
```

您将其作为`$_SESSION['cart']`. 我想你只是想要：

```
$_SESSION['cart'] = $cart; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:05:27.607

您在将 $cart 推入 $_SESSION[cart] 之前将其定义为数组...所以您将数组推入数组中。尝试这样的事情：

```
if (!empty($cart)) {
  $_SESSION['cart'] = array();
  foreach ($cart AS $item) {
    array_push($_SESSION['cart'], $item);
  }
} 
```

您也可以将 array_push 放在您的 while() 中，并在 while() 之前粘贴 $_SESSION['cart'] = array()，它会达到同样的效果。

# search - 使用 java api 提升 ElasticSearch 字段

> ID：15399873
> 
> 赞同：4
> 
> 时间：2013-03-14T02:00:37.597
> 
> 标签：search, elasticsearch

我是 ES 新手，正在尝试使用 java api 进行搜索。我无法弄清楚如何使用 java api 提供特定的提升。这是示例：我的索引文档如下所示：

_来源”： {

```
"th_id": 1,
"th_name": "test name",
"th_description": "test desc",
"th_image": "test-img",
"th_slug": "Make-Me-Smart",
"th_show_title": "Coast Tech Podcast",
"th_sh_category": "Alternative Health 
```

}

当我搜索关键字时，如果它们在“th_name”中找到，我想提高结果，与在其他一些字段中找到它们相比。目前我正在使用以下代码进行搜索：

```
QueryBuilder qb1 = QueryBuilders.multiMatchQuery(keyword, "th_name", "th_description", "th_show_title", "th_sh_category");
SearchResponse response = client.prepareSearch("talk").setTypes("themes")
        .setSearchType(SearchType.DFS_QUERY_THEN_FETCH).setQuery(qb1)
        .setFrom(start).setSize(maxRows)
        .setExplain(true).execute().actionGet(); 
```

如果在“th_name”字段中找到关键字而不是在其他字段中找到关键字，我可以在查询时做些什么来提升文档？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-06-11T06:41:29.243

接受的答案对我不起作用。我使用的 ES 版本是`6.2.4`.

```
QueryBuilders.multiMatchQuery(keyword)
                            .field("th_name" ,2.0f)
                            .field("th_description")
                            .field("th_show_title")
                            .field("content") 
```

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T08:28:03.350

编辑：这已经改变并且不再在 ES 6.x 及更高版本中工作。

您还应该能够直接在多匹配查询中提升字段：

“multi_match 查询支持通过字段 json 字段中的 ^ 表示法进行字段提升。

```
{
  "multi_match" : {
    "query" : "this is a test",
    "fields" : [ "subject^2", "message" ]
  } 
} 
```

在上面的示例中，主题字段中的命中是消息字段中的 2 倍。”

在 java-api 中，只需使用 MultiMatchQueryBuilder：

```
MultiMatchQueryBuilder builder = 
new MultiMatchQueryBuilder( keyword, "th_name^2", "th_description", "th_show_title", "th_sh_category" ); 
```

免责声明：未经测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:23:30.147

您可以使用“BoostingQuery”

*   [http://www.elasticsearch.org/guide/reference/query-dsl/boosting-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/boosting-query.html)
*   javadoc：[https ://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/query/BoostingQueryBuilder.java)

# angularjs - AngularJS 类似于 jQuery preventDefault 的 keydown？

> ID：15399874
> 
> 赞同：3
> 
> 时间：2013-03-14T02:00:41.170
> 
> 标签：angularjs

我需要浏览器响应焦点可滚动框中的 keydown 箭头事件。这是一个 Plunker 来说明我的意思

[http://plnkr.co/edit/Okch5dEByFkueJl0DmwG](http://plnkr.co/edit/Okch5dEByFkueJl0DmwG)

即使我告诉事件停止传播`event.stopPropagation()` 并使事件处理程序返回`false` ，该框仍会在 keydown 上滚动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T02:09:51.757

除非我弄错了你要找的东西，否则你应该能够改变你的

```
event.stopPropagation() 
```

回到

```
event.preventDefault() 
```

它会按需要工作。

# c - GtkEntry 没有得到键盘输入

> ID：15399880
> 
> 赞同：2
> 
> 时间：2013-03-14T02:01:27.110
> 
> 标签：c, gtk, gtk3

我有以下`GTK3`代码：

```
(...)
cmd_bar = gtk_entry_new();
gtk_editable_set_editable(GTK_EDITABLE(cmd_bar), TRUE);
gtk_entry_set_visibility(GTK_ENTRY(cmd_bar), TRUE);
gtk_widget_grab_focus(GTK_WIDGET(cmd_bar));
gtk_grid_attach (GTK_GRID (grid), GTK_WIDGET(cmd_bar), 0, 1, 2, 1);
gtk_widget_show(cmd_bar);
(...) 
```

它显示`GtkEntry`正确，但不显示来自键盘的任何输入。如果我粘贴一些字符串，它会被正常接受。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:25:00.577

根据[GtkWidget 文档](https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-grab-focus)：

> `[gtk_widget_grab_focus]`使小部件在其内部具有键盘焦点`GtkWindow`。`widget`必须是可聚焦的小部件，例如`GtkEntry`; 像这样的东西是`GtkFrame`行不通的。
> 
> 更准确地说，它必须`GTK_CAN_FOCUS`设置标志。用于 `gtk_widget_set_can_focus()`修改该标志。
> 
> 小部件也需要实现和映射。这由相关信号指示。**在创建小部件后立即获取焦点可能会失败并导致严重警告**。

有关*实现*和*映射*的说明，请查看[“*那些“实现”和“映射”小部件信号*”](http://blogs.gnome.org/jnelson/2010/10/13/those-realize-map-widget-signals/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-09T07:43:10.750

当我将应用程序从 GTK3 移植到 GTK4 时，我遇到了同样的问题，我能够在条目中粘贴和剪切文本，但无法使用键盘聚焦或自由插入文本。

已经在我的 GTK3 应用程序中，我在一些小部件上错误地将“can-focus”属性设置为“False”，在我的模板中错误地设置了“错误”（使用林间空地），并且在移植到 GTK4 时，它们似乎引起了问题。起初我不认为“can-focus”属性可能是问题，因为我的 GtkEntry 将它设置为 TRUE，问题是它的一个**父容器**的值设置为 FALSE。

希望这也是您的问题，如果不是希望它是其他人的解决方案。

# java - 网络内存泄漏

> ID：15399882
> 
> 赞同：0
> 
> 时间：2013-03-14T02:01:57.737
> 
> 标签：java, memory, netty, memory-leaks

```
Timer timer = new HashedWheelTimer(); 
        bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(
                Executors.newCachedThreadPool(),
                Executors.newCachedThreadPool()));
        bootstrap.setPipelineFactory(new PortNettyFactory(timer,port));
        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);
        bootstrap.bind(new InetSocketAddress(port)); 
```

我在 Jprofiler 中使用 netty 显示内存泄漏。请推荐给我，谢谢！！！

# javascript - Youtube API：有没有办法在客户端 v3 api 中刷新 access_token？

> ID：15399883
> 
> 赞同：1
> 
> 时间：2013-03-14T02:02:10.910
> 
> 标签：javascript, youtube-api, oauth-2.0

[https://developers.google.com/youtube/v3/guides/authentication](https://developers.google.com/youtube/v3/guides/authentication)

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

client_id=21302922996.apps.googleusercontent.com&
client_secret=XTHhXh1SlUNgvyWGwDk1EjXB&
refresh_token=1/6BMfW9j53gdGImsixUH6kU5RsR4zwI9lUVX-tqf8JXQ&
grant_type=refresh_token 
```

开发人员文档列出了一种在后端刷新 access_token 的方法。有没有办法通过前端 javascript 调用来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:48:50.277

如果您使用的是[客户端 Web 应用程序流程](https://developers.google.com/youtube/v3/guides/authentication#oauth2-tabs)（如果您正在使用在浏览器中运行的 JavaScript 编写代码，那么这是合适的），那么就无法取回刷新令牌并定期刷新它以获取访问令牌. 一方面，accounts.google.com 服务器不支持[CORS ，因此无法从 JavaScript 发送 HTTP POST 刷新请求。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

您可以利用`approval_prompt=auto`参数行为，这意味着如果用户先前已授权访问相同范围的 OAuth 2 客户端 ID，则无需任何用户干预即可完成请求新访问令牌。因此，您可以无限期地有效地获得新的访问令牌。

我强烈建议让[Google APIs JavaScript 客户端库](https://developers.google.com/api-client-library/javascript/features/authentication)为您处理这个问题。除了文档中的示例之外，您还可以查看[这个简单的示例](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html)，该示例展示了如何以只需要初始授权的方式处理 OAuth 2 流程。

# mongodb - Mongodb data disappearing

> ID：15399887
> 
> 赞同：1
> 
> 时间：2013-03-14T02:02:38.303
> 
> 标签：mongodb

I have a really weird issue.

I'm inserting data into my mongodb (with meteor), so If I query the database I can see it and all's good.

If I query it in MongoVue or MongoHUB I can see all the data there (I create it in quite a few collections)

But shortly after (only sometimes randomly) it all just disappears. It had already been committed to the data base and then it sort of goes undone as if I had never inserted the first few sets. I've not run any `remove` or `update` commands.

What could be causing this weird behaviour?

Update: This one time round the data returned, on previous occasions it doesn't return. Could it be something to do with the journal?

# javascript - Query UI, inheriting a widget

> ID：15399890
> 
> 赞同：1
> 
> 时间：2013-03-14T02:02:51.477
> 
> 标签：javascript, jquery, jquery-ui, widget, client-side-scripting

I'm trying to build a custom widget called Staticblock. I want to use the Resizable widget as the prototype. I thought a widget could be inherited and if no changes were made to the sub widget (no methods add or overridden) it would behave like the inherited widget(Resizable).

```
$.widget( "my.staticblock", $.ui.resizable, {
    /*
      methods go here
    */
}); 
```

Now, shouldn't I be able to use "staticblock" as if it were "resizable". Like so...

```
$( "#resizable1").staticblock(); 
```

Ok, that works but if I pass an option I get an error. Like so..

```
$( "#resizable1").staticblock({
    containment: "parent"
}); 
```

containment: "parent" is a valid option for the Resizable widget. The below works fine..

```
$( "#resizable1").resizable({
    containment: "parent"
}); 
```

The error I get is related to this chunk of code in the jQuery UI.

```
 $.ui.plugin.add("resizable", "containment", {

start: function() {
    var element, p, co, ch, cw, width, height,
        that = $(this).data("ui-resizable"),
        o = that.options,
        el = that.element,
        oc = o.containment,
        ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ?    
                    el.parent().get(0) : oc;

    if (!ce) {
        return;
    } ... 
```

In my humble attempt to figure it out I was able to determine that when using the
staticblock widget "that" is undefined on execution of the line

```
that = $(this).data("ui-resizable"). 
```

What am I doing wrong ? Thank you.

# c - 在结构内部使用 C 结构会导致分段错误错误

> ID：15399892
> 
> 赞同：0
> 
> 时间：2013-03-14T02:02:56.357
> 
> 标签：c, struct, segmentation-fault

这是数据的结构：

```
 struct variabile {
        char* nome;         
        char* contenuto;        
        struct variabile* next;     
        int tipo;           
    }; 
```

这是代码：

```
 struct variabile* pt = malloc (sizeof (struct variabile));
            pt->nome = $1; 
            pt->tipo = type; 
            pt->contenuto = $2; 
            pt->next=NULL;      

    if (testaVariabile == NULL) 
            testaVariabile=pt; 
    else {
            struct variabile* current = testaVariabile;

        while ((current->next)!=NULL){  

            if(strcmp(current->nome, pt->nome)==0)
                                    fprintf (stderr, "warning: clash di nome di variabili %s \n", current->nome);
            current=(current->next); 
        }
        (current->next)=pt; 

        if(strcmp(current->nome, pt->nome)==0) 
                fprintf (stderr, "warning: clash di nome di variabili %s \n", current->nome);
    } 
```

这是变量*testaVaribile*的初始声明。

```
 struct variabile* testaVariabile = NULL; 
```

当我尝试在最后一行代码中更新*current的**下一个*值时，出现分段错误错误。我还验证了代码没有进入*while*循环。

 **我对C很陌生，所以请解释一下答案。

谢谢

**编辑**

其余代码是一个 Flex 解析器。

**编辑**

我的一个朋友告诉我使用 gdb 进行调试。结果表明错误来自

```
 strcmp(current->nome, pt->nome) 
```

我真的很抱歉浪费了在错误的地方寻找问题的时间，但这是我第一次认真对待 C 和 Flex。

有人知道如何摆脱这个问题吗？

好的，最后更新。

检查的答案解决了问题。但是在这种情况下，词法分析器从文件中读取值的方式也有错误，所以这是一个两部分的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:41:28.213

尝试这个：

```
struct variabile* pt = malloc (sizeof (struct variabile));
pt->nome = malloc(strlen($1) + 1);
strcpy(pt->nome, $1); 
pt->tipo = type; 
pt->contenuto = $2; // maybe the same for this too?
pt->next=NULL;

/* rest of your code ... */ 
```

虽然只是一个疯狂的猜测**

# java - 密码验证和 UNICODE

> ID：15399896
> 
> 赞同：0
> 
> 时间：2013-03-14T02:03:28.967
> 
> 标签：java, regex, passwords, pattern-matching

如何验证正则表达式的条件：密码不得包含任何紧跟相同字符序列的字符序列。我也有其他条件并且正在使用

```
(?=.*(..+)\\1) 
```

验证立即序列重复。它正在失败。这段代码对传递的第 3 个和第 4 个字符串返回“true”；我需要它返回false。请帮忙。

```
String s2[] = {"1newAb", "newAB1", "1234567AaAa", "123456ab3434", "love", "love1"}; 
    boolean b3;
    for(int i=0; i<s2.length; i++){
        b3 = s2[i].matches("^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*(..+)\\1).{5,12}$");
        System.out.println("value" + b3);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:14:52.553

您可以尝试使用[负前瞻](http://www.regular-expressions.info/lookaround.html#lookahead) `(?!.*(.{2,})\\1)`。

对于那些想知道`\\1`是什么的人：它代表第 1 组的匹配，在我们的例子中是匹配来自`(.{2,})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:49:05.597

根据 Ron 的建议，我发现 java 中的哪些方法有帮助；match()、find() 的工作方式不同。find() 帮助了我。Guido 的建议是分解不同规则的代码。这是我的代码；尚未完善：用于检查使用 (\S+?)\1 的任何序列的重复

```
String regex = "(\\S+?)\\1";
        String regex2 = "^(?=.*[0-9])(?=.*[a-zA-Z]).{5,12}$";
        p = Pattern.compile(regex);
        for (String str : s2) {
            matcher = p.matcher(str);
           if (matcher.find())
              System.out.println(str + " got repeated: " + matcher.group(1));
           else if(str.matches(regex2))
               System.out.println(str + " Password correct");
           else
               System.out.println(str + " Password incorrect");

        } 
```

# hibernate - 具有列表映射的休眠映射

> ID：15399902
> 
> 赞同：3
> 
> 时间：2013-03-14T02:04:51.370
> 
> 标签：hibernate

有没有办法创建一个休眠映射，你有一个包或集合的映射或某种类型的集合？

例如，也许我有一个零件清单，我想将它们拉到一个 Map 中，如下所示：

```
 Map<PartType, List<Part>> inventory; 
```

所以 PartType 可能是一个类或只是一个 String 是映射键。

感谢您的输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:59:23.133

不，你不能，你需要创建一个包含列表的中间类。您的地图将变为：

```
Map<PartType, Parts> inventory; 
```

您需要创建一个具有自己映射的新类：

```
public class Parts {

   private List<Part> parts;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:13:39.233

IMO 它应该`Id`是`PartType`pojo

```
<map name="mymap" cascade="all">
         <key column="parttype_id"/>
            .
            .
            .

      </map> 
```

# php - 如何使用 PHP 访问关联数组中的值

> ID：15399903
> 
> 赞同：1
> 
> 时间：2013-03-14T02:04:53.850
> 
> 标签：php, multidimensional-array, amazon-simpledb

我有一个数组，它是使用 Amazon SimpleDb 进行选择查询的结果。

这是我 print_r($result); 时的示例数据

```
Array ( [0] => Array ( [Name] => 5140ede647e74
                       [Attributes] => Array (
                            [0] => Array ( [Name] => test_id [Value] => 5140ede647e74 )
                            [1] => Array ( [Name] => test_name [Value] => test1 )
                            [2] => Array ( [Name] => last_update [Value] => 1363209702 )
                            [3] => Array ( [Name] => created [Value] => 1363209702 ) ) ) ) 
```

如果我想提取 test_id 和 test_name，我该怎么做？我目前正在执行以下操作

```
<?php foreach ($result as $item) {
    echo $item['Attributes'][0]['Value']; 
    echo $item['Attributes'][1]['Value'];
} ?> 
```

但是我想通过引用“test_id”和“test_name”来做到这一点，因为当我删除数据所在的域并重新输入数据时，每个属性的顺序都会改变，所以我不能相信 $item[' Attributes'][0]['Value'] 将始终是 test_id

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:11:44.987

您需要重铸阵列。

```
$newArray = array();
foreach ($result as $key=>$row)
{        
    foreach ($row['Attributes'] AS $row2)
    {
         $newArray[$key][$row2['Name']] = $row2['Value'];
    }       
} 
```

编辑：这取决于您需要做什么 - 如果我打算对结果集进行大量工作，这是我的首选方法 - 我只需要迭代一次集合，然后它的格式可以访问数据迅速地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:12:06.713

以下将通过引用在您的数组的最后一部分运行。因此，您所做的编辑会反映在`$result`数组中。

```
foreach ($result[0]['Attributes'] as &$item) {
    if ($item['Name'] == 'test_id') // do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:15:04.280

```
foreach ($result as $item) {
  foreach ($item['Attributes'] as $keyvalue) {
    if ($keyvalue['Name'] == 'test_id' || $keyvalue['Name'] == 'test_name') {
      echo $keyvalue['Value'];
    }
  }
} 
```

# python - 使用 python ElementTree 的 itertree 函数并将修改后的树写入输出文件

> ID：15399904
> 
> 赞同：9
> 
> 时间：2013-03-14T02:04:55.457
> 
> 标签：python, xml, elementtree

我需要解析一个非常大（~40GB）的 XML 文件，从中删除某些元素，然后将结果写入一个新的 xml 文件。我一直在尝试使用 python 的 ElementTree 中的 iterparse，但我对如何修改树然后将生成的树写入新的 XML 文件感到困惑。我已经阅读了 itertree 上的文档，但还没有弄清楚。有什么简单的方法可以做到这一点吗？

谢谢！

编辑：这是我到目前为止所拥有的。

```
import xml.etree.ElementTree as ET
import re 

date_pages = []
f=open('dates_texts.xml', 'w+')

tree = ET.iterparse("sample.xml")

for i, element in tree:
    if element.tag == 'page':
        for page_element in element:
            if page_element.tag == 'revision':
                for revision_element in page_element:
                    if revision_element.tag == '{text':
                        if len(re.findall('20\d\d', revision_element.text.encode('utf8'))) == 0:
                            element.clear() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T03:59:51.873

If you have a large xml that doesn't fit in memory then you could try to serialize it one element at a time. For example, assuming `<root><page/><page/><page/>...</root>` document structure and ignoring possible namespace issues:

```
import xml.etree.cElementTree as etree

def getelements(filename_or_file, tag):
    context = iter(etree.iterparse(filename_or_file, events=('start', 'end')))
    _, root = next(context) # get root element
    for event, elem in context:
        if event == 'end' and elem.tag == tag:
            yield elem
            root.clear() # free memory

with open('output.xml', 'wb') as file:
    # start root
    file.write(b'<root>')

    for page in getelements('sample.xml', 'page'):
        if keep(page):
            file.write(etree.tostring(page, encoding='utf-8'))

    # close root
    file.write(b'</root>') 
```

where `keep(page)` returns `True` if `page` should be kept e.g.:

```
import re

def keep(page):
    # all <revision> elements must have 20xx in them
    return all(re.search(r'20\d\d', rev.text)
               for rev in page.iterfind('revision')) 
```

For comparison, to modify a *small* xml file, you could:

```
# parse small xml
tree = etree.parse('sample.xml')

# remove some root/page elements from xml
root = tree.getroot()
for page in root.findall('page'):
    if not keep(page):
        root.remove(page) # modify inplace

# write to a file modified xml tree
tree.write('output.xml', encoding='utf-8') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T02:08:38.237

Perhaps the answer to [my similar question](https://stackoverflow.com/questions/15168259/python-xml-remove-some-elements-and-their-children-but-keep-specific-elements-an) can help you out.

As for how to write this back to an .xml file, I ended up doing this at the bottom of my script:

```
with open('File.xml', 'w') as t: # I'd suggest using a different file name here than your original
    for line in ET.tostring(doc):
        t.write(line)
    t.close
print('File.xml Complete') # Console message that file wrote successfully, can be omitted 
```

The variable `doc` is from earlier on in my script, comparable to where you have `tree = ET.iterparse("sample.xml")` I have this:

```
doc = ET.parse(filename) 
```

I've been using lxml instead of ElementTree but I think the write out part should still work (I think it's mainly just xpath stuff that ElementTree can't handle.) I'm using lxml imported with this line:

```
from lxml import etree as ET 
```

Hopefully this (along with my linked question for some additional code context if you need it) can help you out!

# c# - 比较可为空的列会引发“无法转换类型...”异常

> ID：15399905
> 
> 赞同：5
> 
> 时间：2013-03-14T02:05:03.150
> 
> 标签：c#, linq-to-entities, entity-framework-5

我的实体`NewsItem`有一个可为空的外键属性：`LibraryID`类型为`int?`。

我的问题是当我查询该属性并将其与除 之外的任何值进行比较时`null`，我得到了异常。

最初我的代码是：

```
int? lid = ...
var results = context.NewsItems
    .Where(n => n.LibraryID == lid); 
```

但它根本没有给我任何结果，不管是什么`lid`。

所以，我尝试了：

```
var results = context.NewsItems
    .Where(n => n.LibraryID.Equals(lid)); 
```

给出例外：

> 无法创建“System.Object”类型的常量值。此上下文仅支持原始类型或枚举类型。

然后我尝试了：

```
var results = context.NewsItems
    .Where(n => lid.Equals(n.LibraryID)); 
```

并得到：

> **无法将类型“System.Nullable`1”转换为类型“System.Object”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。**

还有这个：

```
var results = context.NewsItems
    .Where(n => object.Equals(lid, n.LibraryID)); 
```

给出与最后一个相同的例外。

现在我很绝望，所以我试图使事情复杂化（就像其他论坛建议的那样，例如[这里](http://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl?ref=title#suggestion-1015361)）：

```
var results = context.NewsItems
    .Where(n => (lid == null ? n.LibraryID == null : n.LibraryID == lid)); 
```

但仍然得到同样的例外。

那么......任何**简单**的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:00:15.793

怎么样

```
var results = context.NewsItems
    .Where(n => lid.HasValue ? lid.Value == n.LibraryId.Value : (!n.LibraryId.HasValue) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:20:55.237

嗯，第一个片段应该可以工作。我已经多次使用过这样的空值。我要做的第一件事是进行健全性检查，以确保`LibraryID`它是真的`int?`，不是`long?`或相似的。

除此之外，你可以试试这个：

```
var results = context.NewsItems
    .Where(n => (lid.HasValue ? n.LibraryID == lid.Value : !n.LibraryID.HasValue)); 
```

或避免`?:`在查询内：

```
var results = lid.HasValue 
    ? context.NewsItems.Where(n => n.LibraryID == lid.Value)
    : context.NewsItems.Where(n => !n.LibraryID.HasValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:15:35.793

根据 MSDN 文档（我终于找到了）， .Where() 只会过滤您的收藏。如果您想查看是否有实际结果，请通过使用 .ToList()、GetEnumerator 延迟执行过滤后的查询或使用 foreach 枚举集合来解决；

> 该方法是通过使用延迟执行来实现的。立即返回值是一个存储执行操作所需的所有信息的对象。在通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象之前，不会执行此方法表示的查询。

[http://msdn.microsoft.com/en-us/library/bb534803.aspx](http://msdn.microsoft.com/en-us/library/bb534803.aspx)

```
int? lid = ...
var results = context.NewsItems
    .Where(n => n.LibraryID == lid).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T03:02:47.630

```
var results = context.NewsItems
    .Where(n => n.LibraryID.HasValue && n.LibraryID.Value == lid.Value ); 
```

编辑：

以前的过滤器基于我的理解，即您希望过滤到具有特定值的整体。更新将过滤为空或值。

```
 var results = context.NewsItems
        .Where(n => !n.LibraryID.HasValue || n.LibraryID.Value == lid.Value ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T06:29:52.523

似乎 EF 没有找到正确的运算符重载。因此，如果你设置它会产生错误的结果`lid = null`。

通过添加到您的查询中使用 linq 到对象`AsEnumerable()`，一切都很好：

```
var results = context.NewsItems.AsEnumeryble().Where(n => n.LibraryID == lid); 
```

# node.js - 单元测试不可用的全局功能（couchapp、mocha）

> ID：15399908
> 
> 赞同：3
> 
> 时间：2013-03-14T02:05:11.307
> 
> 标签：node.js, couchdb, mocha.js

我正在尝试对 CouchDB 设计文档（使用[couchapp.js](https://github.com/mikeal/node.couchapp.js)编写）进行单元测试，例如：

```
var ddoc = {
  _id: '_design/example',
  views: {
    example: {
      map: function(doc) {
        emit(doc.owner.id, contact);
      }
    }
   }
}
module.exports = contacts 
```

然后我可以很容易地将此​​文件要求到 mocha 测试中。

问题是CouchDB 暴露了一些map 函数使用的全局函数（上面的“emit”函数），这些函数在CouchDB 之外不可用（即在这些单元测试中）。

我试图在每个测试中声明一个全局函数，例如：

```
var ddoc = require('../example.js')

describe('views', function() {
  describe('example', function() {
    it('should return the id and same doc', function() {
      var doc = {
        owner: {
          id: 'a123456789'
        }
      }

      // Globally-scoped mocks of unavailable couchdb 'emit' function
      emit = function(id, doc) {
        assert.equal(contact.owner.id, id);
        assert.equal(contact, doc);
      }
      ddoc.views.example.map(doc);
    })
  })
}) 
```

但摩卡因抱怨全球泄漏而失败。

所有这一切都开始“闻起来不对劲”，所以想知道是否有更好/更简单的方法通过任何库，甚至在 Mocha 之外？

基本上我想让每个测试都可以使用模拟实现，我可以从中调用断言。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:43:12.977

我会使用 sinon 来存根和监视测试。[http://sinonjs.org/](http://sinonjs.org/)和[https://github.com/domenic/sinon-chai](https://github.com/domenic/sinon-chai)

全局变量很好，不受欢迎，但很难消除。我现在正在做一些与 jQuery 相关的测试，并且必须`--globals window,document,navigator,jQuery,$`在我的 mocha 命令行末尾使用，所以......是的。

您没有测试 CouchDb 的发射，因此您应该对它进行存根，因为 a）您假设它有效并且 b）您知道它将返回什么

```
global.emit = sinon.stub().returns(42);
// run your tests etc
// assert that the emit was called 
```

sinon 文档的这一部分可能会有所帮助：

```
it("makes a GET request for todo items", function () {
    sinon.stub(jQuery, "ajax");
    getTodos(42, sinon.spy());

    assert(jQuery.ajax.calledWithMatch({ url: "/todo/42/items" }));
}); 
```

希望有帮助。

# php - 允许 PHP 用户写入另一个用户的主文件夹

> ID：15399909
> 
> 赞同：0
> 
> 时间：2013-03-14T02:05:15.393
> 
> 标签：php, linux

我有一个以用户'codex'身份运行的php脚本，我试图让它创建一个新目录，用作/home/git/repositories/内部的git repo

我将 codex 用户添加到 git 组，但我一定错过了一些权限或其他东西，因为当我 sudo 进入 codex 并转到 /home/git/ 目录并运行 mkdir 时，我收到权限被拒绝错误。当然，我在 php 中运行 mkdir 时也会遇到同样的错误。

我在 CentOS 5.9 上运行

任何帮助，将不胜感激。

——文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:08:01.713

确保该组具有写访问权限（以及我们在其中的读取和列出访问权限）：

```
chmod g+rwx /home/git 
```

您可能还想确保目录的组是`git`组：

```
chgrp git /home/git 
```

# html - 仅在有新更新时刷新 div

> ID：15399914
> 
> 赞同：0
> 
> 时间：2013-03-14T02:05:48.550
> 
> 标签：html, load, refresh, tweets

当有新推文像这样刷新主div时，我想制作一个像twitter这样的按钮我如何编写这样的ia脚本

[http://allvirtual.files.wordpress.com/2012/02/twitter-new-tweets-notification.png?w=450](http://allvirtual.files.wordpress.com/2012/02/twitter-new-tweets-notification.png?w=450)

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#load_tweets').load('record_count.php').fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds

<body>
<div id="load_tweets"> </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:18:10.527

利用`$.get(url, data, success)`。在回调中将响应与当前内容进行比较，`$('#load_tweets').html()`如果新的 html 与当前的 html 不同，则将当前的内容替换为新的。

# c++ - Arduino：LiquidCrystal 无法使用以太网库打印

> ID：15399918
> 
> 赞同：2
> 
> 时间：2013-03-14T02:06:56.467
> 
> 标签：c++, arduino, microcontroller, ethernet, lcd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:20:49.030

I found the answer here: [https://electronics.stackexchange.com/questions/29240/arduino-uno-ethernet-shield-16x2-lcd-not-initializing](https://electronics.stackexchange.com/questions/29240/arduino-uno-ethernet-shield-16x2-lcd-not-initializing)

`@ben as per the page here, the comment by user "njohnson" states that the shield uses all the digital pins except 1,2 and 8\. based on this i tried hooking up the lcd to the 6 analog pins (as outputs) and its working fine now. Now the question is where/how can i study the shield schematic to be sure what all pins can i use. On a side now, it seems an unusual design decision since using the shield means sacrificing 13 of the digital pins ! – Ankit Apr 3 '12 at 21:14`

## Solution

I moved the LCD pins to analog pins (14-19).

## Code Modifications

Change `LiquidCrystal lcd(7, 8, 9, 10, 11, 12);` to `LiquidCrystal lcd(19, 18, 17, 16, 15, 14);` and move the LCD screen pins accordingly.

# c++ - 输出一维数组中的所有数据

> ID：15399922
> 
> 赞同：-1
> 
> 时间：2013-03-14T02:07:28.610
> 
> 标签：c++, arrays, file-io, output

我刚刚将文本文件中的数据读入一维数组。我的“for”语句没有从数组中输出数据。我想输出整个数组只是为了验证所有数据都在那里。但是，当我输出单个单元格时，数据会输出到屏幕上。我究竟做错了什么？提前致谢！

```
#include <iostream>
#include <fstream>
#include <iomanip>

int main()
{
  const int MAX_CELLS = 500;      
  int count = 0;         
  double Vehicles[MAX_CELLS];   
  ifstream vehicleFile;           
  char type; 
  string license; 
  double charge; 

  vehicleFile.open ("VEHICLE.txt");   

  if (!vehicleFile)            
     cout << "Error opening vehicle file " << endl;

     vehicleFile >> type >> license ;              // priming read

     while (vehicleFile) {                         // while the read was successful

          cout << count << " "  << license << endl;    // FOR DISPLAY ONLY

          vehicleFile >> Vehicles[count];              // read into array

          count++;                                     // increment count

          vehicleFile >> type >> license;              // read next line

     }   

    cout << showpoint << fixed << setprecision(2); 

    for ( count; count < MAX_CELLS; count++) {
          cout << "Array #" << count << "is: ";        // OUTPUT ARRAY 
          cout << Vehicles[count] << endl; 
    }

    cout << Vehicles[8];       // READS DATA IN CELL 

    vehicleFile.close(); 

    system ("pause"); 
    return 0;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:11:37.937

`count`需要像这样重置：

```
for ( count = 0; count < MAX_CELLS; count++) {
      cout << "Array #" << count << "is: ";        // OUTPUT ARRAY 
      cout << Vehicles[count] << endl; 
} 
```

在上一个循环中，您`count`为每条记录递增，因此当它到达`for`循环时，它已经被设置为最后一条记录的索引。尽管您真正想要做的是使用新变量并且仅迭代`count`次数：

```
for ( int i = 0; i < count ; ++i) {
      cout << "Array #" << i << "is: ";        // OUTPUT ARRAY 
      cout << Vehicles[i] << endl; 
} 
```

您也没有`MAX_CELLS`在读取数据时进行检查。因此，如果您的文件包含的不仅仅是`MAX_CELLS`数据，那么您将有未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:14:11.477

`count`在 while 循环之后仍然存在，因此它将是您的 while 循环完成后的最终值。然后当它进入 for 循环时，它将从该值开始：

考虑一下：

```
int count = 0
while(count < 10)
    count++

std::cout << "count is: " << count << std::endl;

for (count; count < 15; count++)
   std::cout << "now count is: " << count << std::endl 
```

你的输出将是：

```
count is: 10
now count is: 11
now count is: 12
now count is: 13
now count is: 14
now count is: 15 
```

您需要在循环中或循环之前重置计数`for`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:12:27.530

在您的 for 循环中，您不会重新初始化`count`( `count = 0`)。

为了让生活更轻松，并避免这些类型的**逻辑错误**，请尝试：

```
for ( int i = 0; i < MAX_CELLS; ++i ) {
    cout << "Array #" << i << "is: ";        // OUTPUT ARRAY 
    cout << Vehicles[i] << endl; 
} 
```

目前，它看起来`count`已经大于或等于`MAX_CELLS`。

# c++ - 尝试在声明中仅使用类名构造临时对象

> ID：15399923
> 
> 赞同：4
> 
> 时间：2013-03-14T02:07:30.087
> 
> 标签：c++, c++11, constructor, declaration, uniform-initialization

**C++**

此类的对象`cout`在构造和销毁时的消息。我尝试使用仅声明类名的声明来构造一个临时对象，但它给出了意外的输出。

在 #1 中，我使用括号实例化了一个临时的无名对象。

在 #2 中，我使用统一初始化实例化了一个临时无名对象。

我不知道#3 是否会编译。我只认为如果要编译#3，它将意味着构建一个临时无名对象。它确实可以编译，但从 #3 下控制台输出的空白可以看出，没有构造任何对象。这里发生了什么？

```
#include <iostream>

class A
{
public:
    A() {std::cout << "constructed\n";}
    ~A() {std::cout << "destroyed\n";}
};

auto main() -> int
{
    std::cout << "#1:\n";
    A();
    std::cout << "#2:\n";
    A{};
    std::cout << "#3:\n";
    A;
    return 0;
} 
```

**控制台输出：**

```
#1:
constructed
destroyed
#2:
constructed
destroyed
#3: 
```

**注意：**这是在 VC11 中使用 2012 年 11 月 CTP 编译的。它不能在[g++ 4.8.0](http://liveworkspace.org/code/2ORMpH%240)或 clang 3.2 中编译，分别给出`error: declaration does not declare anything [-fpermissive]`和`fatal error: 'iostream' file not found`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:21:00.500

该代码在所有 C++ 标准（C++98、C++03、C++11）下均无效，不应编译。

类型不是语句。

~~事实上，Visual C++ 和 g++ 都没有编译它：~~

糟糕，虽然 g++ 可以正确诊断程序，但 Visual C++ 的 2012 年 11 月 CTP 没有：

```
[D:\开发\测试]
> *(分类 2>&1) | 查找 /i "C++"*
Microsoft (R) C/C++ 优化编译器版本 17.00.51025 for x86

[D:\开发\测试]
> *cl /nologo /EHsc /GR /W4 foo.cpp*
foo.cpp

[D:\开发\测试]
> *g++ -std=c++0x -pedantic -Wall foo.cpp*
foo.cpp：在函数'int main()'中：
foo.cpp:17:5: 错误：声明没有声明任何东西 [-fpermissive]

[D:\开发\测试]
> _

```

所以这是一个**编译器错误**，您可以尝试在[Microsoft Connect](http://connect.microsoft.com/VisualStudio)上报告它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:19:50.830

我在 gcc 4.5.3 版中尝试了你的代码，当我编译时，它给出了以下错误消息：“错误：声明没有声明任何东西”，你使用什么样的编译器？您的编译器很有可能在幕后做了一些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T02:21:22.983

两者`g++`并`clang`给出错误`17:5: error: declaration does not declare anything`

无论您使用什么编译器，都可能完全优化了这条线，但这只是一种推测。你在用什么编译？

这不合法。就像`int;`不是法律声明。

# php - 将 API 响应存储为哈希，以便与后续查询进行比较

> ID：15399924
> 
> 赞同：1
> 
> 时间：2013-03-14T02:07:40.617
> 
> 标签：php, api, hash

我正在查询 API 以获取将来可能会更改的一组数据，但是我只想在有更改时处理响应。

我认为这将是一个可行的解决方案，但还没有找到任何支持我的思维方式的方法，就是将响应传递到散列中并将结果记录到表中，然后在进行后续查询时我可以生成并比较之前的散列处理收到的数据。

返回的数据可能相当大，并且可能有最轻微的变化（只有一个字符），我想确定它会反映在结果哈希中。我还担心生成提供如此大数据集的哈希的速度，我相信 md4 会是最快的。

我需要考虑什么？或者上面提出的方法是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:17:06.850

我所知道的用于抽查的 PHP 中最快的算法是`CRC32`

```
<?php
$test = crc32("generated-output-goes-here");
?> 
```

建议仅在 64 位平台上运行它（无需调整）。这是因为在 32 位系统上，PHP 整数是有符号的，有些会返回负数。

# .net - 我的可执行文件旁边的这些 .s 和 .x 文件是什么？

> ID：15399925
> 
> 赞同：0
> 
> 时间：2013-03-14T02:07:46.420
> 
> 标签：.net, windows, esri, arcobjects

我们有一些针对 .NET 3.5 构建并引用 ESRI ArcObjects .NET DLL（反过来又引用 COM DLL）的应用程序。我们在 Windows 2008 上运行它们。

有时我会查看应用程序的安装目录，在 EXE 旁边有一个文件列表`.s`和`.x`扩展名。

![.x 和 .s 文件列表](../Images/d0a4a81330497fdbe000a2e5caa2843a.png)

我想知道它们是否是在程序崩溃时生成的，但如果是，那么它似乎并不一致。文件名都采用“xx#####”模式，其中##### 是数字，我认为这可能与进程 ID 有关，但我不确定。

我没有把这些文件放在那里，我找不到任何关于它们是什么的信息。它们是什么，它们为什么在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:20:34.130

看来这些是与 ESRI 相关的文件。它们与 .NET 本身没有任何关系。

[http://forums.esri.com/Thread.asp?c=93&f=982&t=284781](http://forums.esri.com/Thread.asp?c=93&f=982&t=284781)

# jquery - 将每个 html 元素嵌套到不同的 html 块中

> ID：15399926
> 
> 赞同：0
> 
> 时间：2013-03-14T02:07:52.057
> 
> 标签：jquery, html, css

我有一个看起来像这样的大型生成表单，标签在标签`label`外面`UL LI`

```
<label for="title">Title:</label>
<ul class="formItem">
  <li>
   <input type="text" value="">
  </li>
</ul>

<label for="title">First Name:</label>
<ul class="formItem">
  <li>
   <input type="text" value="">
  </li>
</ul> 
```

想要`label`在使用 jQuery 中嵌套标签`UL LI`并使表单看起来像这样

```
<ul class="formItem">
  <li>
   <label for="title">Title:</label>
   <input type="text" value="">
  </li>
</ul>

<ul class="formItem">
  <li>
   <label for="title">First Name:</label>
   <input type="text" value="">
  </li>
</ul> 
```

我试过了，但这会获取`Label`表单上的每个标签并粘贴在第一个标签中，我需要每个标签直接`li`嵌套在它之后`li`

```
(function($) {
 jQuery(".formItem li").append(jQuery("#my-form label"));
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:11:45.903

```
$('ul.formItem').each(function () {
    $(this).find('li').prepend($(this).prev('label'));
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/96V4e/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:10:01.677

您必须使用`each`循环：

```
$('#my-form label').each(function(index) {
    $('.formItem li').eq(index).prepend(this);
}); 
```

# text - 尝试使用 .bat 设置 Android 项目来替换 .xml 文件中的文本

> ID：15399936
> 
> 赞同：0
> 
> 时间：2013-03-14T02:08:53.033
> 
> 标签：text, batch-file, replace

我正在尝试设置android项目。这是一种快速简便的方法，所以我所要做的就是将最终代码导入 eclipse 并导出。我为所有项目使用基本源代码，我所要做的就是更改应用程序标题和包名称以及新的可绘制对象，我还有另一个应用程序，但是我的 .bat 脚本看起来像这样。

```
@echo off
rmdir /s /q "%~dp0out"
mkdir out
xcopy "%~dp0other\backup" "%~dp0out" /E > nul
java -version 
if errorlevel 1 goto errjava
cls
echo.
PAUSE
echo.
echo packagae name 
echo whats your packagename after cube3d.packagename
echo. 
set /P INPUT=Enter: %=%
echo.
echo App Name 
echo whats your App name before Live Wallpaper
echo. 
set /P INPUT2=Enter: %=%
echo.
echo Airpush App ID
echo What is the 6 digit airpush app id
echo. 
set /P INPUT3=Enter: %=%

copy "%~dp0placeimages" "%~dp0out\res\drawable"
rename out\src\cube3d\aaaaapnzme %INPUT%

call run2.bat
call run3.bat
call run4.bat 
```

它将运行并转到 run2.bat 并在之后停止。之后它不执行 run3.bat 它无法进入第 3 次然后第 4 次。这是其他蝙蝠的样子。

run2.bat 看起来像这样，这个完美运行。

```
rep "aaaaapnzme" "%INPUT%" out\src\cube3d\%INPUT%\*.java out\AndroidManifest.xml out\src\cube3d\%INPUT%\objects\*.java 
```

这就是脚本所能达到的程度，它无法进入 run3.bat 和 run4.bat

run3.bat 看起来像这样

```
rep "zapsname" "%INPUT2%" out\res\values\strings.xml 
```

run4.bat 看起来像这样

```
rep "aeropush" "%INPUT3%" out\AndroidManifest.xml 
```

如果有帮助，我正在使用 Windows 8 Pro。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:35:24.517

是什么`rep`？

也许`CALL rep...`会解决问题。

# javascript - Javascript 中的函数是对象还是类型？

> ID：15399937
> 
> 赞同：18
> 
> 时间：2013-03-14T02:08:55.533
> 
> 标签：javascript

Haverbeke在他的Eloquent *Javascript*中声称（第 16 页）：

*“在 JavaScript 系统中，大部分数据都被整齐地划分为称为值的东西。每个值都有一个类型，这决定了它可以扮演的角色。值有六种基本类型：数字、字符串、布尔值、对象、函数和未定义的值。”*

但是 Javascript 中的 Crockford *: The Good Parts*说：

*“JavaScript 的简单类型是数字、字符串、布尔值（true 和 false）、null 和 undefined。所有其他值都是对象。数字、字符串和布尔值类似于对象，因为它们有方法，但它们是不可变的。 JavaScript 中的对象是可变键集合。在 JavaScript 中，数组是对象，函数是对象，正则表达式是对象，当然，对象也是对象。*

现在，至少在 V8 下我得到了这个：

```
> typeof function(){};
'function'
> typeof {};
'object' 
```

我不明白对象是类型而函数是对象还是函数和对象都是类型。我想我错过了原始类型和其他类型（复合类型？）之间的区别。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T02:10:34.923

它们是一种对象。

`typeof`是`"function"`：_

```
typeof (function() {}) === "function" // true 
```

内部`[[Class]]`是`[object Function]`：

```
({}).toString.call(function() {}) === "[object Function]" // true 
```

它们是`Function`构造函数原型的一个实例：

```
(function(){}) instanceof Function // true 
```

它们是`Object`构造函数原型的一个实例：

```
(function(){}) instanceof Object // true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T02:46:12.987

在谈论 javascript 中的类型时需要小心。值有一个[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8)，它可能是以下之一：

1.  不明确的
2.  无效的
3.  布尔值
4.  细绳
5.  数字
6.  目的

[`typeof`相反，运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.3)返回的值不是类型，它是一个字符串，与大多数值的类型相同，但在以下情况下不同：

1.  Null 返回“对象”，即使其类型为 Null
2.  实现`[[Call]]`返回函数的对象，即使它的 Type 是 Object
3.  宿主对象可以返回他们喜欢的任何东西，而不是受限值之一

所以底线是函数的类型是对象，但`typeof someFn`返回`function`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T02:16:13.547

JavaScript 支持函数式编程。因此，所有 JavaScript 函数都是一等函数，这意味着函数被视为普通对象。

[http://en.wikipedia.org/wiki/First-class_functions](http://en.wikipedia.org/wiki/First-class_functions)

# sed - 用 sed 替换缺失的内容

> ID：15399938
> 
> 赞同：0
> 
> 时间：2013-03-14T02:09:03.597
> 
> 标签：sed

在一个文件中我有这个结构：

```
192.168.1.53 # hostname, city, state
192.168.1.101 # hostname, city, state
192.168.1.10 # hostname, city, state
192.168.1.18 # hostname, city, state
192.168.1.19 
192.168.1.104 # hostname, city, state 
```

当没有“#”但在 ip 之后替换然后继续到缺少“#”的下一个时，我如何使用 sed 查找和替换。

所以它看起来像下面这样：

```
192.168.1.53 # hostname, city, state
192.168.1.101 # hostname, city, state
192.168.1.10 # hostname, city, state
192.168.1.18 # hostname, city, state
192.168.1.19 # newcontent, new, new
192.168.1.104 # hostname, city, state 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:16:05.613

如果您要添加的部分是固定字符串，则非常简单：

```
sed 's/^[^#]*$/& # newcontent, new, new/' 
```

在替换字符串中，`&`代表匹配的文本。

# jquery - 使用 jQuery .get 获取页面 - Google Chrome 扩展

> ID：15399940
> 
> 赞同：0
> 
> 时间：2013-03-14T02:09:20.087
> 
> 标签：jquery, html, ajax, google-chrome, google-chrome-extension

我正在创建一个 Google Chrome 扩展程序。我以前做过这个，无论如何我正在尝试从页面加载页面和 HTML。不尝试显示它，只是尝试在页面上获取 div 的内容。

```
$("a").click(function(){
    $.get('http://learntc.net', function(data) {
     var hatid = $(data).find('#ctl00_ctl00_cphRoblox_cphMyRobloxContent_txtStatusMessage');
    alert('Load was performed.');
    });
}); 
```

*这个，有效。当我决定将 URL 更改为[http://www.roblox.com/my/home.aspx?ID=1](http://www.roblox.com/my/home.aspx?ID=1)时，它会中断。这是我试图从中获取数据的 URL。*

当我单击链接时，我不断收到此错误：**未捕获的错误：语法错误，无法识别**的表达式：后跟页面源。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:14:49.413

据我所知，jQuery 和 JavaScript 只允许您在同一个域中使用 .get() 函数。因此，如果您将其更改为其他域，则该代码将不起作用。

# javascript - emberjs中的嵌套路由，不使用资源出口

> ID：15399944
> 
> 赞同：5
> 
> 时间：2013-03-14T02:09:43.650
> 
> 标签：javascript, templates, ember.js, nested-routes

我有一个路由器，每个路由（和路由对象）都有相应的模板。我希望能够独立于其父模板显示每个模板，这意味着我不希望将嵌套路由呈现到父模板的出口。本质上为每个嵌套路由创建一个单独的“页面”。

```
App.Router.map(function() {
  this.resource('recipes', function() {
    this.route('new');
    this.route('show', { path: '/:recipe_id' });
  });
}); 
```

我正在使用 ember1.0.0-rc1

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:02:53.777

> 我希望能够独立于其父模板显示每个模板，这意味着我不希望将嵌套路由呈现到父模板的出口。

也许说明显而易见，但这正是如果您不为资源创建模板将会发生的情况。在您的情况下，如果您不创建模板，则 ember 会将and模板`recipes.hbs`呈现到in 中。`new.hbs``show.hbs``{{outlet}}``application.hbs`

注意：如果你这样做，Ember 将输出一个控制台警告“直接父路由没有渲染到主出口......”

[这在ember 路由指南](http://emberjs.com/guides/routing/rendering-a-template/)中有更详细的解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T04:04:01.640

来自 ember 指南的快速说明

> 如果您使用 this.resource 定义资源并且不提供函数，则不会创建隐式 resource.index 路由。在这种情况下，/resource 将只使用 ResourceRoute、ResourceController 和资源模板。

你的路由很好，@mikegrassotti 是正确的，**但**如果你想要一个“recipes”的索引**而不**让你的“new”和“show”路由模板嵌套在“recipes”中（没有主/详细信息），你将需要创建一个食谱/index 模板里面没有插座。

```
<script type="text/x-handlebars" data-template-name="recipes/index">
<ul>
  {{#each}}
    <li>{{recipe}}</li>  
  {{/each}}
</ul> 
```

您无需更改路线设置。正如 Mike 上面提到的，ember 会将 new.hbs 和 show.hbs 模板渲染到 application.hbs 中的 {{outlet}}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:42:56.457

Ember.js 不支持嵌套路由，它只支持嵌套资源。最终嵌套的路由可以包含一个路由。

将资源视为事物，将路线视为行动。

# regex - 正则表达式验证时间

> ID：15399946
> 
> 赞同：-2
> 
> 时间：2013-03-14T02:10:00.430
> 
> 标签：regex

我尝试了很多组合

```
\d{1,2}:\d{2} 
```

验证一段时间（即：0:33 或 12:33）。

因此，在大多数情况下，上述表达式有效，但我还需要 1) 验证 ":33" 和 2) 使 "00:33a" 无效

我用谷歌搜索并尝试结合 \s* 但它仍然不满足这两个条件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:12:43.337

如果您只想匹配有效时间（例如 23:59，而不是 25:03 等），您可以尝试以下正则表达式：

```
^([01]?[0-9]|2[0-3]):[0-5]?[0-9]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:44:44.837

更仔细地查看您的问题并扩展 Gijs 的答案，这可能就是您所追求的......

```
^(?:[0-9]?|(?:[0-1][0-9])?|(?:2[0-3])?):[0-5][0-9]$ 
```

允许 ':mm'、'h:mm' 或 'hh:mm'。

我不确定 (?: 非捕获组有多普遍-我已经习惯了.Net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:13:13.433

我相信你只需要指定开始 ^ 和结束 $ 字符串符号

```
^\d{1,2}:\d{2}$ 
```

这样 00:33a 将无效

# java - Java - 使用单独的 ActionListener 更改 JTextField

> ID：15399947
> 
> 赞同：0
> 
> 时间：2013-03-14T02:10:01.337
> 
> 标签：java, swing, awt, actionlistener, jtextfield

我有两个班，A和B。

A类有一个JTextField，和B类的一个私有变量。B类实现了ActionListener。

A 类和 B 类位于不同的文件中。我可以通过 ActionListener 从 B 类访问 JTextField，还是有办法（要求我不能在 A 中包含 B 类）我可以做到吗？我一直在寻找，但我还没有找到解决方案。

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:31:19.390

在 B 类的 actionPerfored 方法中，您可以通过 ActionEvent 参数访问事件的来源：

```
public void actionPerformed(ActionEvent e){
    JTextField field = (JTextField)e.getSource();//Now should represent the JTextField in class A
} 
```

然后，您可以对 JTextField 执行操作。在将 B 类用作其他组件的 ActionListener 时，我会保持警惕，因为如果源不是 JTextField，这会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:06:22.653

您可以使用 event.getSource 来访问您的组件，

```
 public void actionPerformed(ActionEvent evt)
{
  JTextField registeredComponent = (JTextField)evt.getSource(); 
  // dangerous cast required 
} 
```

或者，如果您必须从侦听器访问不同的组件类型，您可以编写自定义的观察者模式实现。

例如，一个定制的 EventObject 实现，它包括一个通用类型的源组件。

```
public void actionPerformed(CustomEvent customEvt)
{
T registeredComponent = customEvt.getSource(); //generic getSource
} 
```

看看[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

# ruby-on-rails - ruby on rails 循环遍历键值元素列表

> ID：15399949
> 
> 赞同：0
> 
> 时间：2013-03-14T02:10:12.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个这样的键值对列表。

```
 PERSON_SUMMARY = {
      first_names: %w(Mike Tim Jim kevin Alan Sara John Sammy t'Renée),
      last_names: %w(Robinson Jackson Fox Terry Ali Brits Tyson Willis-St.\ Paul),
      offenses: [
        { offense_name:'Speeding', 
          penalties: [
            { penalty_name: 'Prison', severity: 'Medium' },
            { penalty_name: 'Ticket', severity: 'Low' }
          ]
        },
         { offense_name:'Shoplifting', 
          penalties: [
            { penalty_name: 'Prison', severity: 'Medium' },
            { penalty_name: 'Fine', severity: 'Low' }
          ]
        }
      ]
  } 
```

我只想存储和打印**offence_name**，**penalty_name** 和**severity**，但我无法获得正确的语法。

这是我到目前为止所尝试的：

```
PERSON_SUMMARY[:offenses].each do |offense|
      offense_name = offense[:offense_name]
      offense[:penalties].each do |penalty|
        penalty_name = penalty[:penalty_name]
        severity_val = penalty[:severity]
      end
end 
```

编辑：最终我需要通过这个函数将它插入到数据库表中：

```
PersonOffense.where(person_id: person.id).first_or_create(
          name: offense_name,
          penalty: penalty_name ,
          severity: severity_val
      end 
```

但是我注意到一个问题，上面有多个惩罚名称。不知道如何插入它们。

例如，我需要在我的表中插入两次进攻名称，以便表中有 2 个条目。

```
Speeding Prison Medium

Speeding Ticket Low 
```

编辑：我喜欢下面杰西的回答。我如何使用它以与我上面的方法相同的顺序将其插入（插入进攻名称、惩罚名称和严重性以及 Jesse 下面给出的答案的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:25:19.487

而不是只使用每个，如果你映射进攻，然后最后将它们展平，你会得到你想要的：

```
offenses = PERSON_SUMMARY[:offenses].map do |offense|
  offense[:penalties].map do |penalty|
    penalty.merge(name: offense[:offense_name])
  end
end.flatten

=> [{:penalty_name=>"Prison", :severity=>"Medium", :name=>"Speeding"}, {:penalty_name=>"Ticket", :severity=>"Low", :name=>"Speeding"}, {:penalty_name=>"Prison", :severity=>"Medium", :name=>"Shoplifting"}, {:penalty_name=>"Fine", :severity=>"Low", :name=>"Shoplifting"}] 
```

更新

在 ruby​​ 中，下面是一个哈希，而你已经有了一个哈希![在此处输入图像描述](../Images/a1d974ac6e000fdf119170141a3cbb39.png)

所以你可以遍历你的新数组并创建你的 PersonOffense：

```
offenses.each do |hash|
  PersonOffense.where(person_id: person.id).first_or_create( hash )
end 
```

# android - 如何将我的应用与 Android 中的文件类型相关联

> ID：15399950
> 
> 赞同：0
> 
> 时间：2013-03-14T02:10:16.700
> 
> 标签：android

我正在开发一个音乐播放器应用程序，并试图让它在文件资源管理器中选择它时启动并播放所选歌曲。单击音乐文件时，我的应用程序会显示在应用程序列表中，甚至在选择时也会启动。但是，我的 playSong 功能显然没有设置在动作中，因为没有播放歌曲。这是我的 manifest.xml 的相关部分。有人可以指出我正确的方向吗？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="my.app.com"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyMusicPlayer"
            android:excludeFromRecents="true"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoDisplay" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="audio/*"/>
    </intent-filter>
            </activity>

        <service android:name="MusicPlayer" >
        </service>
        <service android:name=".SongListActivity" >
        </service>s

    </application>

</manifest> 
```

谢谢

# php - 试图将 C 程序连接到 phpMyAdmin

> ID：15399954
> 
> 赞同：0
> 
> 时间：2013-03-14T02:10:35.613
> 
> 标签：php, mysql, c, phpmyadmin, arduino

我一直在尝试将我的 Arduino 成功连接到我的 phpMyAdmin 服务器，但我无法做到。Arduino 连接了一些超声波传感器（用于测量距离），由于某种原因，并非所有值都被发送到服务器。我不应该这么复杂。

因此，每个传感器都有自己的 id、测量距离和传感器所在的级别。

id 是为了识别传感器（duh！），但由于某种原因，我得到的只是这个值的 0，我认为这是因为它只读取第一个传感器的值（id 为 0）。

所以让我给你看我的代码，这是重复的方法，我认为我的错误是无法多次发送信息，比如将信息与每个传感器分开，它只发送前 4 个值，就是这样显示在数据库中。

```
void loop(){

  int distance;

  //=======

  for (uint8_t i = 0; i < SONAR_NUM; i++) {   

    if( cm[i] > 10 || cm[i]==0){

      distance = cm [i];//delete if no 
    }
    else{
      distance = cm[i];
      //Serial.println(distance);

    }
  }

  for (uint8_t i = 0; i < SONAR_NUM; i++) {
    if (millis() >= pingTimer[i]) {
      pingTimer[i] += PING_INTERVAL * SONAR_NUM;
      if (i == 0 && currentSensor == SONAR_NUM - 1)
        sonar[currentSensor].timer_stop();
      currentSensor = i;
      cm[currentSensor] = 0;

      sonar[currentSensor].ping_timer(echoCheck);
    }
    //client.stop();
  }

  //===================================================
  if(client.connect(serverName, 80) )
  {
    //Serial.println("Connected");
    if (client.connected()){
      delay(100);
      //Serial.println("Client is available, CONNECTED!");
      //client.print( "GET /add.php?distance=");
     ////////////// 
     int lvl = 0;
  for (uint8_t i = 0; i < SONAR_NUM; i++) {
    if(i<2)
      lvl = 1;
    else if (i>1 && i<3)
      lvl =2;
     else
       lvl = 3;

     Serial.print("SPOT: ");
     client.print( "GET /sendfromarduino.php?sensorID=");
     Serial.print(i);
     client.print (i);

     Serial.print(" DISTANCE: ");
     Serial.print(cm[i]);
     distance = cm[i];
     client.print( "&value=");
     client.print(distance);
     Serial.print("cm ");

     Serial.print(" LEVEL: ");
     client.print( "&level=");
     Serial.print (lvl);
     client.print (lvl);

  }
  Serial.println(); 
  //////////////////////////////////////
//      Serial.print("Distance: ");
//      client.print(distance);
//      Serial.println(distance);
      client.println( "HTTP/1.1");
      client.println( "Host: test.testserver.com" );
      client.println( "Content-Type: application/x-www-form-urlencoded" );
      client.println();
      client.println();
      client.stop();
    }
    else
    {
      //Serial.println(distance);
      Serial.println("Connection Failed");
    }
  }
  delay(100);
} 
```

然后这里是PHP文件的代码，根据我的知识和过去的经验应该是完全可以的：

```
<?php

        $db = new PDO('mysql:host=localhost;dbname=test_alpha;charset=UTF-8', 'test_alpha', 'testtest');
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

        $sensorID = intval($_GET['i']);
        //$time = CURRENT_TIMESTAMP;
        $value = intval($_GET['distance']);
        $level = intval($_GET['lvl']);

        $sql = "INSERT INTO `pspace`(`sensorID`, `time`, `value`, `level`) VALUES ('$sensorID',CURRENT_TIMESTAMP,'$value','$level')";

        $stmt = $db->query($sql);
        //echo json_encode(array('spaces'=>$stmt->fetchAll(PDO::FETCH_ASSOC)));

    ?> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:36:44.787

它说的地方`if (client.connected())`

它应该是`while (client.connected())`

问题解决了！感谢所有花时间回答我的问题的人！

# javascript - 将鼠标悬停在按钮内部时如何更改背景颜色？

> ID：15399956
> 
> 赞同：-3
> 
> 时间：2013-03-14T02:10:48.657
> 
> 标签：javascript, html, css

我正在尝试在 CSS、JavaScript 或 HTML 功能中实现，`<tr>`当位于表格行的表格数据`<td>`中的按钮悬停在上方时，该功能将更改表格行 () 的背景颜色。通过更改 CSS 文件，我可以轻松地通过为按钮分配 id 来更改按钮的背景颜色，但不知道从哪里开始更改表格行的背景。我在这个网站上查看了类似的解决方案，但它们不够具体（无论如何我都找到了）。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:13:44.637

jQuery：

```
$('table button').hover(function() {
    $(this).closest('tr').css('background-color', 'red');
}); 
```

您真的应该花一些时间阅读[jQuery 文档](http://api.jquery.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:41:29.240

首先，您必须在 JavaScript 中获得对表格中所有按钮的引用（如果您为所有按钮提供相同的名称（并且没有其他元素），或者如果您给所有按钮提供相同的名称，您`document.getElementsByTagName`可以获得所有按钮按钮的同一类（没有其他元素）。`getElementsByName``getElementsByClassName`

```
// get all of the buttons in the table (I gave them all a class of tablebutton
var buttons = document.getElementsByClassName("tablebutton"); 
```

接下来，您必须循环按钮数组并添加两个事件侦听器，一个用于`mouseover`（悬停）事件，一个用于`mouseout`（悬停）事件。

```
for (var i = 0; i < buttons.length; i++) {
    var button = buttons[i];
    button.addEventListener("mouseover", highlightRow, false);
    button.addEventListener("mouseout", unHighlightRow, false);
} 
```

在这些事件侦听器中，您必须从按钮向上遍历 DOM 树直到表格行，然后将行的背景颜色设置为突出显示的颜色或“”以删除颜色。

```
function highlightRow ()
{
    var row = this.parentNode.parentNode;
    row.style.backgroundColor = "red";
}

function unHighlightRow ()
{
    var row = this.parentNode.parentNode;
    row.style.backgroundColor = "";
} 
```

（您也可以只使用匿名函数而不是用名称定义函数......

```
 button.addEventListener("mouseover", function () {
        ...your code here
    }, false);
    button.addEventListener("mouseout", function () {
        ...your code here
    }, false); 
```

[JSFiddle](http://jsfiddle.net/2z4nD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:37:10.330

我假设您也希望在离开该行时删除突出显示。在这种情况下，如果您选择 jQuery，您也需要删除该样式，而只需执行一个操作即可将悬停和悬停

```
$("td.data").hover(
  function () {
    $(this).parent("tr").toggleClass("active");
 } 
```

并在您的 css 中为该类添加样式：

```
.active {
  background-color: pink;
} 
```

您需要调整选择器以匹配要触发更改的单元格或元素，但我看不到标记，因此无法准确提供 - 上面的选择器在您的数据单元格上有类数据。

顺便说一句，如果您还没有使用 jQuery，我同意非 jquery 解决方案（例如 Scott 的解决方案）是可行的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:54:30.420

我喜欢没有 jQuery 的想法，这里有一个小提琴：

```
var allButtons = document.getElementsByTagName('button'); 
for(var i=0; i < allButtons.length; ++i) { 
    if(allButtons[i].getAttribute('class') == "hoverme") { 
        allButtons[i].onmouseover = function() { makerow(this, 'blue'); };
        allButtons[i].onmouseout = function() { makerow(this, 'yellow'); };
    }
}

function makerow(elem, color) { 
    elem.parentNode.parentNode.style.backgroundColor = color; 
} 
```

该代码在某种程度上取决于您的表的结构，因此请参见附件，例如：http: [//jsfiddle.net/JFd5T/](http://jsfiddle.net/JFd5T/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T02:20:22.800

您是否尝试更改`tr`的悬停样式？

[http://jsfiddle.net/x2pLV/](http://jsfiddle.net/x2pLV/)

```
table {
    width: 100%;
}

tr:hover {
    background: orange;
}

<table>
    <tr>
        <td><input type="submit" /></td>
    </tr>
</table> 
```

# twitter-bootstrap - 从 Angular 控制器关闭 Twitter 引导模式

> ID：15399958
> 
> 赞同：43
> 
> 时间：2013-03-14T02:10:52.893
> 
> 标签：twitter-bootstrap, angularjs, angularjs-directive

我有一个模态窗口，用于向用户呈现表单。他们输入信息，然后按下具有 ng-click 的按钮。服务器处理请求并发送回响应。当响应成功时，我想从控制器关闭模式窗口。如何做到这一点？

模态是另一个页面中包含的部分

主页：

```
<!-- main content -->
<p>Foo</p>
<!-- angular directive -->
<foo-directive></foo-directive> 
```

该指令的内容：

```
<div ng-controller="FooCtrl">
    <ul class="thumbnails">
        <li class="span3 tile tile-white" ng-repeat="foo in model.foo">
            <div>
                {{foo.bar}}
            </div>
            <div>
                ({{foo.bam}})
            </div>
            <div>
                <a data-toggle="modal" href="#myModal"><img src="{{foo.imgPath}}"></a>
            </div>
        </li>
    </ul>
    <!-- foo modal partial included by ejs -->
    <% include foo_modal.ejs %>
</div> 
```

模态标记：

```
<div id="fooModal" class="modal hide fade in" style="display: none; ">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>New Device</h3>
    </div>
    <div class="modal-body">
        <h4>Foo Modal</h4>
        <div ng-controller="FooCtrl">
            <form name="fooFrm">
                <input id="email" type="email" class="input-medium" ng-model="fooEmail"
                       placeholder="Email">
                <button class="btn btn-primary btn-small"
                        ng-click="doFoo({email:fooEmail})">Email Link</button>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
</div> 
```

控制器代码：

```
functionFooCtrl($scope, FooService) {

    $scope.doFoo= function (email) {
       FooService.save({email:email.fooEmail}) {
            alert('Request successful');
            //TODO close Twitter bootstrap modal named fooModal here
        },
            function (err) {
                alert('Your request bonked, sorry');
                //TODO close twitter bootstrap modal named fooModal here
            });
        }
    }; 
```

在成功和错误功能中从控制器关闭模式的正确方法是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-09-12T12:53:00.537

我们可以在不使用 angular-ui 的情况下实现相同的效果。这可以使用角度指令来完成。

首先将指令添加到模态。

```
<div class="modal fade" my-modal ....>...</div> 
```

创建一个新的角度指令：

```
app.directive('myModal', function() {
   return {
     restrict: 'A',
     link: function(scope, element, attr) {
       scope.dismiss = function() {
           element.modal('hide');
       };
     }
   } 
}); 
```

现在从你的控制器调用dismiss() 方法。

```
app.controller('MyCtrl', function($scope, $http) {
    // You can call dismiss() here
    $scope.dismiss();
}); 
```

我还处于使用 Angular js 的早期阶段。我知道我们不应该在控制器内部操作 DOM。所以我在指令中有 DOM 操作。我不确定这是否同样糟糕。如果我有更好的选择，我会在这里发布。

需要注意的重要一点是，我们不能简单地在视图中使用 ng-hide 或 ng-show 来隐藏或显示模态框。这只是隐藏了模态而不是模态背景。我们必须调用 modal() 实例方法来完全删除模态。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-03-01T17:18:20.013

你可以这样做：

```
angular.element('#modal').modal('hide'); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-05-17T09:10:14.733

你看过[angular-ui bootstrap](http://angular-ui.github.io/bootstrap/)吗？有一个 Dialog (ui.bootstrap.dialog) 指令效果很好。您可以在回调期间以角度方式关闭对话框（根据示例）：

```
$scope.close = function(result){
  dialog.close(result);
}; 
```

更新：

该指令已重命名为[Modal](http://angular-ui.github.io/bootstrap/#/modal)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-29T20:39:02.417

这是一个可重用的 Angular 指令，它将隐藏和显示 Bootstrap 模式。

```
app.directive("modalShow", function () {
    return {
        restrict: "A",
        scope: {
            modalVisible: "="
        },
        link: function (scope, element, attrs) {

            //Hide or show the modal
            scope.showModal = function (visible) {
                if (visible)
                {
                    element.modal("show");
                }
                else
                {
                    element.modal("hide");
                }
            }

            //Check to see if the modal-visible attribute exists
            if (!attrs.modalVisible)
            {

                //The attribute isn't defined, show the modal by default
                scope.showModal(true);

            }
            else
            {

                //Watch for changes to the modal-visible attribute
                scope.$watch("modalVisible", function (newValue, oldValue) {
                    scope.showModal(newValue);
                });

                //Update the visible value when the dialog is closed through UI actions (Ok, cancel, etc.)
                element.bind("hide.bs.modal", function () {
                    scope.modalVisible = false;
                    if (!scope.$$phase && !scope.$root.$$phase)
                        scope.$apply();
                });

            }

        }
    };

}); 
```

使用示例 #1 - 假设您要显示模式 - 您可以添加 ng-if 作为条件

```
<div modal-show class="modal fade"> ...bootstrap modal... </div> 
```

使用示例 #2 - 在 modal-visible 属性中使用 Angular 表达式

```
<div modal-show modal-visible="showDialog" class="modal fade"> ...bootstrap modal... </div> 
```

另一个示例 - 为了演示控制器交互，您可以在控制器中添加类似这样的内容，它将在 2 秒后显示模式，然后在 5 秒后将其隐藏。

```
$scope.showDialog = false;
$timeout(function () { $scope.showDialog = true; }, 2000)
$timeout(function () { $scope.showDialog = false; }, 5000) 
```

我迟到了这个问题 - 在这里为另一个问题创建了这个指令。[Bootstrap 模态的简单 Angular 指令](https://stackoverflow.com/questions/19644405/simple-angular-directive-for-bootstrap-modal/19644644#19644644)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-21T07:33:57.830

您可以将 data-dismiss="modal" 添加到调用 angularjs 功能的按钮属性中。

如;

```
<button type="button" class="btn btn-default" data-dismiss="modal">Send Form</button> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-12T05:53:55.810

我已将[@isubuz 的答案](https://stackoverflow.com/a/18764881/419956)和[@Umur Kontacı 关于属性指令](https://stackoverflow.com/a/12372494/419956)的答案重新混合到一个版本中，在该版本中，您的控制器不会调用“dismiss”之类的类似 DOM 的操作，而是尝试使用更多 MVVM 样式，设置一个布尔值财产`isInEditMode`。视图反过来将这些信息链接到打开/关闭引导模式的属性指令。

```
var app = angular.module('myApp', []);

app.directive('myModal', function() {
   return {
     restrict: 'A',
     scope: { myModalIsOpen: '=' },
     link: function(scope, element, attr) {
       scope.$watch(
         function() { return scope.myModalIsOpen; },
         function() { element.modal(scope.myModalIsOpen ? 'show' : 'hide'); }
       );
     }
   } 
});

app.controller('MyCtrl', function($scope) {
  $scope.isInEditMode = false;
  $scope.toggleEditMode = function() { 
    $scope.isInEditMode = !$scope.isInEditMode;
  };
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet"/>

<div ng-app="myApp" ng-controller="MyCtrl as vm">

<div class="modal fade" my-modal my-modal-is-open="isInEditMode">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        Modal body! IsInEditMode == {{isInEditMode}}
      </div>
      <div class="modal-footer">
        <button class="btn" ng-click="toggleEditMode()">Close</button>
      </div>
    </div>
  </div>
</div>

<p><button class="btn" ng-click="toggleEditMode()">Toggle Edit Mode</button></p> 
<pre>isInEditMode == {{isInEditMode}}</pre>

</div>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-14T17:33:39.877

```
**just fire bootstrap modal close button click event**
var app = angular.module('myApp', []);
app.controller('myCtrl',function($scope,$http){
  $('#btnClose').click();// this is bootstrap modal close button id that fire click event
})

--------------------------------------------------------------------------------

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" id="btnClose" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div> 
```

只需在设置 btnClose 时设置模态“关闭按钮”ID，要以角度关闭模态，您必须像我一样触发关闭按钮单击事件 $('#btnClose').click()

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-06-05T15:33:34.543

您可以使用简单的 jquery 代码来完成。

```
$('#Mymodal').modal('hide'); 
```

# java - Android R 无法解析为变量

> ID：15399960
> 
> 赞同：0
> 
> 时间：2013-03-14T02:11:00.230
> 
> 标签：java, android

有人可以弄清楚为什么我得到 R is notsolved to a variable error。我查看了与我现在提出的问题类似的其他问题，但找不到任何适合我的解决方案。

## 主要活动

```
package com.example.stressanalysis;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.Rect;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Spinner;

public class main_activity extends Activity {
    private static final int CAMERA_REQUEST = 1888;
    ImageView imageView;
    Button button1;
    Spinner spinner1;
    int angle;
    float x,y;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imageView = (ImageView) this.findViewById(R.id.imageView1);
        button1 = (Button) this.findViewById(R.id.button1);
        spinner1=(Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.spinnerArray, android.R.layout.simple_spinner_item);adapter.setDropDownViewResource(
                        android.R.layout.simple_spinner_dropdown_item);
                spinner1.setAdapter(adapter);
                spinner1.setOnItemSelectedListener(new MyOnItemSelectedListener());
        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent cameraIntent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }
    public class MyOnItemSelectedListener implements OnItemSelectedListener{
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
        {
            String str=parent.getItemAtPosition(pos).toString().toUpperCase();
            angle=Integer.parseInt(str);
        }
        public void onNothingSelected(AdapterView parent)
        {
            //Do Nothing
        }

    }
    public boolean onTouch(View v, MotionEvent event) {
        x = event.getX();
        y = event.getY();
        return true;
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
            Bitmap photo = Bitmap.createBitmap((Bitmap) data.getExtras().get("data"));
            Bitmap mutableBitmap = photo.copy(Bitmap.Config.ARGB_8888, true);
            Paint paint = new Paint();
            Point point = new Point();
            imageView.setImageBitmap(photo);
            Canvas canvas = new Canvas(mutableBitmap);
            int rectWidth = 15;
            int rectHeight = 15;
            point.set((int)x, (int) y);
            Rect r =new Rect((point.x - rectWidth / 2), (point.y - rectHeight / 2),(point.x + rectWidth / 2),(point.y + rectHeight / 2));
            canvas.save();
            canvas.rotate(45);//Angle of rotation
            canvas.drawRect(r,paint);
            canvas.restore();

        }
    }

} 
```

## 主要 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".main_activity" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="22dp" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/spinner1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="32dp"
        android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="37dp"
        android:text="Button" />

</RelativeLayout> 
```

## 字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name" formatted="false">StressAnalysis</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name= "spinnerPrompt">SpinnerTest</string>
    <string-array name="spinnerArray">
        <item> 10 </item>
        <item> 15 </item>
        <item> 20 </item>
        <item> 25 </item>
        <item> 30 </item>
        <item> 35 </item>
        <item> 40 </item>
        <item> 45 </item>
        <item> 50 </item>
        <item> 55 </item>
        <item> 60 </item>
        <item> 65 </item>
        <item> 70 </item>
        <item> 75 </item>
        <item> 80 </item>
        <item> 85 </item>
        <item> 90 </item>
    </string-array>

</resources> 
```

## 显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.stressanalysis"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application

        android:allowBackup="true"
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.example.stressanalysis.main_activity"

            android:label="@string/app_name" >
            <intent-filter>

                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

## 控制台错误

```
[2013-03-13 18:09:27 - StressAnalysis] W/ResourceType( 7176): Bad XML block: header size 114 or total size 99 is larger than data size 0
[2013-03-13 18:09:27 - StressAnalysis] F:\Java Programs\StressAnalysis\res\menu\main.xml:3: error: Error: No resource found that matches the given name (at 'title' with value '@string/action_settings').
[2013-03-13 19:19:32 - StressAnalysis] W/ResourceType( 7716): Bad XML block: header size 114 or total size 99 is larger than data size 0
[2013-03-13 19:19:32 - StressAnalysis] F:\Java Programs\StressAnalysis\res\menu\main.xml:3: error: Error: No resource found that matches the given name (at 'title' with value '@string/action_settings'). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:18:23.303

## 问题

您的`menu\main.xml`文件引用了一个`action_settings`尚未定义的名为的字符串。

错误输出中的这一位给出了它：

```
menu\main.xml:3: error: Error: No resource found that matches the given name (at 'title' with value '@string/action_settings'). 
```

## 修复

添加`<string name="action_settings">Action Settings</string>`到您的`strings.xml`.

在您的问题中包含文件的内容，`menu\main.xml`以便我们进一步帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:37:15.673

任何时候你无法生成 R 文件： 1\. 在你的项目中找到任何错误并修复它。2\. 构建项目 3\. 项目->清理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T19:25:47.610

修复很简单，你只是删除了 menu/main.xml 中的重要部分

一定要有这个

```
<item
        android:id="@+id/action_settings"
        android:orderInCategory="100"
        android:title="@string/action_settings"
        app:showAsAction="never"/> 
```

它对我有用。

# sql - 用于返回每个 ID 的最新记录的 SQL 查询

> ID：15399962
> 
> 赞同：2
> 
> 时间：2013-03-14T02:11:27.370
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个具有以下结构的表。

```
LocId    Value1    Value1Date                
.............................................
1        50        2012-10-20 14:21:00.000      
1        70        2012-10-21 14:21:00.000      
1        90        2012-10-22 14:21:00.000      
1        100       2012-10-23 14:21:00.000    
2        20        2012-10-20 14:21:00.000       
2        40        2012-10-21 11:21:00.000      
2        70        2012-10-22 14:21:00.000     
2        80        2012-10-23 14:21:00.000 
3        50        2012-10-20 14:21:00.000       
3        70        2012-10-21 11:21:00.000      
3        80        2012-10-22 14:21:00.000      
3        90        2012-10-23 14:21:00.000 
```

我想要实现的是，对于每个 [LocId]，我需要最新日期时间（即 2012-10-23）的 [Value1]。返回的表应如下所示：

```
LocId    Value1    Value1Date                
.............................................
1        100       2012-10-23 14:21:00.000
2        80        2012-10-23 14:21:00.000
3        90        2012-10-23 14:21:00.000 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T02:25:19.573

您可以像这样在分区上使用排名：

```
select * from
(select locid, value1, value1date, 
  rank() over (partition by locid order by value1date desc) as rank
  from table1) t
where t.rank=1 
```

见[SqlFiddle](http://sqlfiddle.com/#!3/7c697/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:19:34.830

这种方法会奏效。

```
select locid, value1, value1date
from yourtable join
(select locid id, max(value1date) maxdate
from yourtable
group by locid) temp on id = locid 
and value1date = maxdate 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T02:15:33.937

这可以通过使用`Common Table Expression`和`Window Function`

```
WITH records
AS
(
    SELECT  LocID, VAlue1, Value1Date,
            ROW_NUMBER() OVER (PARTITION BY LocID ORDER BY Value1Date DESC) rn
    FROM    TableName
)
SELECT  LocID, VAlue1, Value1Date
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/5eb2a/1)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:20:26.417

这是执行您要查找的内容的 mysql 查询。我真的不知道其他 SQL。

```
SELECT * FROM table WHERE LocID = n ORDER BY Value1Date DESC LIMIT 1; 
```

如果您从程序中查询，您可以使用：

```
SELECT LocID FROM table ORDER BY LocID DESC LIMIT 1; 
```

获取 ID 的总数（假设它们是连续的），然后将其放入循环中以获取所有最近的日期。

希望有帮助。

# layout - 在 listField 屏幕底部放置横幅

> ID：15399966
> 
> 赞同：0
> 
> 时间：2013-03-14T02:11:49.230
> 
> 标签：layout, blackberry

我有一个屏幕，上面有一个 listFeild 和按钮.. 我想在屏幕底部有一个位图横幅，但在向下滚动后实际上不在底部.. 显示在底部而不会受到影响按列表字段大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:05:17.060

好吧，我是自己做的……抱歉有点不好解释

好吧，我做到了..我为每个垂直管理器指定了一个高度，并且它是可滚动的，而另一个则不是

```
admanager = new VerticalFieldManager(VerticalFieldManager.NO_VERTICAL_SCROLL |VerticalFieldManager.NO_VERTICAL_SCROLLBAR | 
                Field.FIELD_HALIGN_MASK ){
            protected void sublayout(int maxWidth, int maxHeight) {
                // TODO Auto-generated method stub
                super.sublayout(maxWidth, maxHeight);
            }
        };

        otherStuff = new VerticalFieldManager(VerticalFieldManager.VERTICAL_SCROLL){
            protected void sublayout(int maxWidth, int maxHeight) {
                // TODO Auto-generated method stub
                super.sublayout(maxWidth, maxHeight);
                setExtent(maxWidth, Display.getHeight() - ad.getHeight());
            }
        }; 
```

# php - 将表单链接到 php 以获取验证码，将成功链接到表单流程，发送的电子邮件没有正文/标题信息

> ID：15399970
> 
> 赞同：0
> 
> 时间：2013-03-14T02:12:12.033
> 
> 标签：php, forms, process, linker, captcha

使用验证码处理一个相当简单的表单这是我第一次处理验证码，所以我使用的是预建设置“quickcaptcha 1.0”

目前一切正常表单，验证码，除了我认为它与变量之间的链接数量有关的过程？

这就是我认为应该发生的事情。表单显示给用户，用户输入信息。在提交按钮后通过“requestresult.php”检查验证码，如果成功则将其移交给“resultsettings.php”，然后在结果设置中将其发送到“requestprocess.php”，后者收集了包含中的变量初始 request.php 表单。

我不确定....现在它正在发送两封电子邮件，其中一封带有正文信息，没有附加任何输入信息，另一封在其下方根本没有任何内容。

这是代码。

请求.php：

```
<?
        /* Subject and Email Variables */

    $emailSubject = 'Request Form';
    $webMaster = 'info@mywebhost.com';

        /* Gathering Data Variables */

    $nameField = $_POST['name'];
    $aliasField = $_POST['alias'];
    $cellField = $_POST['cell'];
    $emailField = str_replace( "\r\n", '', $_POST['email'] );
    $boardField = $_POST['board'];
    $refname1Field = $_POST['refname1'];
    $refcontact1Field = $_POST['refcontact1'];
    $refname2Field = $_POST['refname2'];
    $workinfoField = $_POST['workinfo'];
    $worknameField = $_POST['workname'];
    $workaddyField = $_POST['workaddy'];
    $switchnoField = $_POST['switchno'];
    $directnoField = $_POST['directno'];

        ?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <link href="nrlayouts.css" rel=stylesheet type=text/css />
        <script type="text/javascript">
       // <![CDATA[
        function display(obj,id1,id2) {
        txt = obj.options[obj.selectedIndex].value;
        document.getElementById(id1).style.display = 'none';
         document.getElementById(id2).style.display = 'none';
        if ( txt.match(id1) ) {
         document.getElementById(id1).style.display = 'block';
        }
        if ( txt.match(id2) ) {
        document.getElementById(id2).style.display = 'block';
        }
        }
        // ]]>
        </script>

        </head>
          <body bgcolor="#CCC"><form action="requestresult.php" method="post">
              <table width="540" border="0" cellspacing="5" cellpadding="0">
                <tr>
                  <td width="250" align="right"><label for="name7">Full Name:</label>        </td>
                  <td width="250" align="left"><input type="text" name="name"        id="name" />         </td>
                 </tr>
                <tr>
                  <td width="250" align="right"><label for="alias">Alias:</label></td>
                  <td width="250" align="left"><input type="text" name="alias" id="alias" />     </td>
                </tr>
                <tr>
                  <td width="250" align="right"><label for="cell">Cellphone:</label>        </td>
                  <td width="250" align="left"><input type="text" name="cell"        id="cell" />     </td>
                </tr>
                <tr>
                  <td width="250" align="right"><label for="email">Email:</label></td>
                  <td width="250" align="left"><input type="text" name="email" id="email" />     </td>
                </tr>
                <tr>
                  <td width="250" align="right"><label for="board">Board:</label></td>
                  <td width="250" align="left"><input type="text" name="board" id="board" /></td>
                </tr>
                <td class="title">References?</td>
         <td class="field">
         <select name="type" onchange="display(this,'References','workinfo');">
         <option>Do you have References?:</option>
         <option value="References">Yes</option>
         <option value="workinfo">No</option>
         </select>
                </tr>
         </thead>
         <tfoot>
         <tr>
         <td class="title">Please Prove You are Human:  <img          src="quickcaptcha/imagebuilder.php" border="1"></td>
          <td><input MAXLENGTH=8 SIZE=8 name="userstring" type="text" value=""></td>
          <td></td>
          </tr>
          <tr>
          <td class="align-center" colspan="2"><input type="submit" name="submit" value="Send Email!" /> <input type="reset" value="Reset" /></td>
          </tr>
          </tfoot>
           <tbody id="References" style="display: none;">
         <tr>
         <td class="title">Reference Name:</td>
         <td class="field"><input type="text" name="refname1" size="20" maxlength="20" />        </td>
          </tr>
          <tr>
          <td class="title">Reference Contact:</td>
           <td class="field"><input type="text" name="refcontact1" size="20" maxlength="30" /></td>
           </tr>
          <tr>
            <td class="title">Reference Name:</td>
             <td class="field"><input type="text" name="refname2" size="20" maxlength="20" /></td>
           </tr>
            <tr>
           <td class="title">Reference Contact:</td>
           <td class="field"><input type="text" name="refcontact2" size="20" maxlength="30" /></td>
           </tr>
           </tbody>
           <tbody id="workinfo" style="display: none;">
           <tr>
           <td class="title">Work Information:</td>
           <td class="field"><input type="text" name="workinfo" size="20" maxlength="30" />         </td>
           </tr>
           <tr>
           <td class="title">Employer's Name:</td>
           <td class="field"><input type="text" name="workname" size="20" maxlength="30" /></td>
           </tr>
           <tr>
           <td class="title">Employer's Address:</td>
           <td class="field"><input type="textarea" name="workaddy" size="20" maxlength="30" /></td>
            </tr>
            <tr>
            <td class="title">Main Switchboard Number:</td>
            <td class="field"><input type="text" name="switchno" size="20" maxlength="20"/>          </td>
            </tr>
            <tr>
            <td class="title">Direct Line:</td>
                   <td class="field"><input type="text" name="directno" size="20" maxlength="20" />       </td>
             </tr>
              </table>
            </form>
            </body>
            </html> 
```

请求设置.php

```
<?php

    // This string contains allowable characters for the image.
    // To reduce confusion, zero and the letter 'o' have been removed,
    // and QuickCaptcha is NOT case-sensitive.
    $acceptedChars = 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789';

    // Number of characters in image.
    $stringlength = 5;

    // Where to go when the correct / incorrect code is entered.
    $success = "requestprocess.php";
    $failure = "failure.html";

    // A value between 0 and 100 describing how much color overlap
    // there is between text and other objects.  Lower is more
    // secure against bots, but also harder to read.
    $contrast = 60;

    // Various obfuscation techniques.
    $num_polygons = 3; // Number of triangles to draw.  0 = none
    $num_ellipses = 6;  // Number of ellipses to draw.  0 = none
    $num_lines = 0;  // Number of lines to draw.  0 = none
    $num_dots = 0;  // Number of dots to draw.  0 = none

    $min_thickness = 2;  // Minimum thickness in pixels of lines
    $max_thickness = 8;  // Maximum thickness in pixles of lines
    $min_radius = 5;  // Minimum radius in pixels of ellipses
    $max_radius = 15;  // Maximum radius in pixels of ellipses

    // How opaque should the obscuring objects be. 0 is opaque, 127
    // is transparent.
    $object_alpha = 75;
    ?> 
```

请求结果.php：

```
<?php

    include "requestsettings.php";

    session_start();
    $string = strtoupper($_SESSION['string']);
    $userstring = strtoupper($_POST['userstring']); 
    session_destroy();   

    if (($string == $userstring) && (strlen($string) > 4)) {
header("Location: $success");
exit();
      } else {
header("Location: $failure");
exit();
       }
      ?> 
```

请求进程.php

```
<?php
      include_once "request.php";

$emailSubject = 'Request Form';
$webMaster = 'info@mywebhost.com';

$body = <<<EOD
   <br><hr><br>
  Name: $nameField <br>
  Alias: $aliasField <br>
  Cellphone: $cellField <br>
  Email: $emailField <br>
  Board: $boardField <br>
  Reference Name1: $refname1Field <br>
  Reference Contact1: $refcontact1Field <br>
  Reference Name2: $refname2Field <br>
  Reference Contact2: $refcontact2Field <br>
  Work Information: $workinfoField <br>
  Work Name: $worknameField <br>
  Work Address: $workaddyField <br>
  Switchboard Number: $switchnoField <br>
  Direct Line: $directnoField <br>
    EOD;

$headers = "From: $emailField\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);

      /* Results rendered as HTML */
     $result = "Thank you!  Your request will be answered shortly.";
        if($success){
echo "$result";
      }else{
echo "There was an error with your submission";
exit;
      }
     ?> 
```

图像生成器.php

```
<?php
include "settings.php";

// Keep #'s reasonable.
$min_thickness = max(1,$min_thickness);
$max_thickness = min(20,$max_thickness);
// Make radii into height/width
$min_radius *= 2;
$max_radius *= 2;
// Renormalize contrast
$contrast = 255 * ($contrast / 100.0);
$o_contrast = 1.3 * $contrast;

$width = 15 * imagefontwidth (5);
$height = 2.5 * imagefontheight (5);
$image = imagecreatetruecolor ($width, $height);
imagealphablending($image, true);
$black = imagecolorallocatealpha($image,0,0,0,0);

// Build the  validation string
$max = strlen($acceptedChars)-1;
$password = NULL;
for($i=0; $i < $stringlength; $i++) {
    $cnum[$i] = $acceptedChars{mt_rand(0, $max)};
    $password .= $cnum[$i];
}

// Add string to image
$rotated = imagecreatetruecolor (70, 70);
$x = 0;
for ($i = 0; $i < $stringlength; $i++) {
    $buffer = imagecreatetruecolor (20, 20);
    $buffer2 = imagecreatetruecolor (40, 40);

    // Get a random color
    $red = mt_rand(0,255);
    $green = mt_rand(0,255);
    $blue = 255 - sqrt($red * $red + $green * $green);
    $color = imagecolorallocate ($buffer, $red, $green, $blue);

    // Create character
    imagestring($buffer, 5, 0, 0, $cnum[$i], $color);

    // Resize character
    imagecopyresized ($buffer2, $buffer, 0, 0, 0, 0, 25 + mt_rand(0,12), 25 + mt_rand(0,12), 20, 20);

    // Rotate characters a little
    $rotated = imagerotate($buffer2, mt_rand(-25, 25),imagecolorallocatealpha($buffer2,0,0,0,0)); 
    imagecolortransparent ($rotated, imagecolorallocatealpha($rotated,0,0,0,0));

    // Move characters around a little
    $y = mt_rand(1, 3);
    $x += mt_rand(2, 6); 
    imagecopymerge ($image, $rotated, $x, $y, 0, 0, 40, 40, 100);
    $x += 22;

    imagedestroy ($buffer); 
    imagedestroy ($buffer2); 
}

// Draw polygons
if ($num_polygons > 0) for ($i = 0; $i < $num_polygons; $i++) {
    $vertices = array (
        mt_rand(-0.25*$width,$width*1.25),mt_rand(-0.25*$width,$width*1.25),
        mt_rand(-0.25*$width,$width*1.25),mt_rand(-0.25*$width,$width*1.25),
        mt_rand(-0.25*$width,$width*1.25),mt_rand(-0.25*$width,$width*1.25)
    );
    $color = imagecolorallocatealpha ($image, mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), $object_alpha);
    imagefilledpolygon($image, $vertices, 3, $color);  
}

// Draw random circles
if ($num_ellipses > 0) for ($i = 0; $i < $num_ellipses; $i++) {
    $x1 = mt_rand(0,$width);
    $y1 = mt_rand(0,$height);
    $color = imagecolorallocatealpha ($image, mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), $object_alpha);
//  $color = imagecolorallocate($image, mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), mt_rand(0,$o_contrast));
    imagefilledellipse($image, $x1, $y1, mt_rand($min_radius,$max_radius), mt_rand($min_radius,$max_radius), $color);  
}

// Draw random lines
if ($num_lines > 0) for ($i = 0; $i < $num_lines; $i++) {
    $x1 = mt_rand(-$width*0.25,$width*1.25);
    $y1 = mt_rand(-$height*0.25,$height*1.25);
    $x2 = mt_rand(-$width*0.25,$width*1.25);
    $y2 = mt_rand(-$height*0.25,$height*1.25);
    $color = imagecolorallocatealpha ($image, mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), $object_alpha);
    imagesetthickness ($image, mt_rand($min_thickness,$max_thickness));
    imageline($image, $x1, $y1, $x2, $y2 , $color);  
}

// Draw random dots
if ($num_dots > 0) for ($i = 0; $i < $num_dots; $i++) {
    $x1 = mt_rand(0,$width);
    $y1 = mt_rand(0,$height);
    $color = imagecolorallocatealpha ($image, mt_rand(0,$o_contrast), mt_rand(0,$o_contrast), mt_rand(0,$o_contrast),$object_alpha);
    imagesetpixel($image, $x1, $y1, $color);
}

session_start();
$_SESSION['string'] = $password;

header('Content-type: image/png');
imagepng($image);
imagedestroy($image);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:12:13.213

Here is the modified form (request.php) - **NOTE:** Be sure to modify path to imagebuilder.php file

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <link href="nrlayouts.css" rel=stylesheet type=text/css />
    <script type="text/javascript">
   // <![CDATA[
    function display(obj,id1,id2) {
    txt = obj.options[obj.selectedIndex].value;
    document.getElementById(id1).style.display = 'none';
     document.getElementById(id2).style.display = 'none';
    if ( txt.match(id1) ) {
     document.getElementById(id1).style.display = 'block';
    }
    if ( txt.match(id2) ) {
    document.getElementById(id2).style.display = 'block';
    }
    }
    // ]]>
    </script>

    </head>
      <body bgcolor="#CCC">
          <table width="540" border="0" cellspacing="5" cellpadding="0">
<form action="requestprocess.php" method="post">
            <tr>
              <td width="250" align="right"><label for="name7">Full Name:</label>        </td>
              <td width="250" align="left"><input type="text" name="name"        id="name" />         </td>
             </tr>
            <tr>
              <td width="250" align="right"><label for="alias">Alias:</label></td>
              <td width="250" align="left"><input type="text" name="alias" id="alias" />     </td>
            </tr>
            <tr>
              <td width="250" align="right"><label for="cell">Cellphone:</label>        </td>
              <td width="250" align="left"><input type="text" name="cell"        id="cell" />     </td>
            </tr>
            <tr>
              <td width="250" align="right"><label for="email">Email:</label></td>
              <td width="250" align="left"><input type="text" name="email" id="email" />     </td>
            </tr>
            <tr>
              <td width="250" align="right"><label for="board">Board:</label></td>
              <td width="250" align="left"><input type="text" name="board" id="board" /></td>
            </tr>
            <td class="title">References?</td>
     <td class="field">
     <select name="type" onchange="display(this,'References','workinfo');">
     <option>Do you have References?:</option>
     <option value="References">Yes</option>
     <option value="workinfo">No</option>
     </select>
            </tr>
     </thead>
     <tfoot>
     <tr>
     <td class="title">Please Prove You are Human:  <img src="imagebuilder.php" border="1"></td>
      <td><input MAXLENGTH=8 SIZE=8 name="userstring" type="text" value=""></td>
      <td></td>
      </tr>
      <tr>
      <td class="align-center" colspan="2"><input type="submit" name="submit" value="Send Email!" /> <input type="reset" value="Reset" /></td>
      </tr>
      </tfoot>
       <tbody id="References" style="display: none;">
     <tr>
     <td class="title">Reference Name:</td>
     <td class="field"><input type="text" name="refname1" size="20" maxlength="20" />        </td>
      </tr>
      <tr>
      <td class="title">Reference Contact:</td>
       <td class="field"><input type="text" name="refcontact1" size="20" maxlength="30" /></td>
       </tr>
      <tr>
        <td class="title">Reference Name:</td>
         <td class="field"><input type="text" name="refname2" size="20" maxlength="20" /></td>
       </tr>
        <tr>
       <td class="title">Reference Contact:</td>
       <td class="field"><input type="text" name="refcontact2" size="20" maxlength="30" /></td>
       </tr>
       </tbody>
       <tbody id="workinfo" style="display: none;">
       <tr>
       <td class="title">Work Information:</td>
       <td class="field"><input type="text" name="workinfo" size="20" maxlength="30" />         </td>
       </tr>
       <tr>
       <td class="title">Employer's Name:</td>
       <td class="field"><input type="text" name="workname" size="20" maxlength="30" /></td>
       </tr>
       <tr>
       <td class="title">Employer's Address:</td>
       <td class="field"><input type="textarea" name="workaddy" size="20" maxlength="30" /></td>
        </tr>
        <tr>
        <td class="title">Main Switchboard Number:</td>
        <td class="field"><input type="text" name="switchno" size="20" maxlength="20"/>          </td>
        </tr>
        <tr>
        <td class="title">Direct Line:</td>
               <td class="field"><input type="text" name="directno" size="20" maxlength="20" />       </td>
         </tr>
        </form>
          </table>

        </body>
        </html> 
```

Here is the modified process (requestprocess.php)

```
<?php

$emailSubject = 'Request Form';
$webMaster = 'youremail@somewhere.com';

        /* Gathering Data Variables */

    $nameField = $_POST['name'];
    $aliasField = $_POST['alias'];
    $cellField = $_POST['cell'];
    $emailField = str_replace( "\r\n", '', $_POST['email'] );
    $boardField = $_POST['board'];
    $refname1Field = $_POST['refname1'];
    $refcontact1Field = $_POST['refcontact1'];
    $refname2Field = $_POST['refname2'];
    $workinfoField = $_POST['workinfo'];
    $worknameField = $_POST['workname'];
    $workaddyField = $_POST['workaddy'];
    $switchnoField = $_POST['switchno'];
    $directnoField = $_POST['directno'];

$body = "
   <br><hr><br>
  Name: $nameField <br>
  Alias: $aliasField <br>
  Cellphone: $cellField <br>
  Email: $emailField <br>
  Board: $boardField <br>
  Reference Name1: $refname1Field <br>
  Reference Contact1: $refcontact1Field <br>
  Reference Name2: $refname2Field <br>
  Reference Contact2: $refcontact2Field <br>
  Work Information: $workinfoField <br>
  Work Name: $worknameField <br>
  Work Address: $workaddyField <br>
  Switchboard Number: $switchnoField <br>
  Direct Line: $directnoField <br>
";

$headers = "From: $emailField\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);

      /* Results rendered as HTML */
     $result = "Thank you! Your request will be answered shortly.";

// NOTE: produces an error, commented out
//        if($success){
echo "$result";
//      }else{
//echo "There was an error with your submission";
//exit;
//      }

?> 
```

Here is requestsettings.php (modified line 14, $success=...etc)

```
<?php

// This string contains allowable characters for the image.
// To reduce confusion, zero and the letter 'o' have been removed,
// and QuickCaptcha is NOT case-sensitive.
$acceptedChars = 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789';

// Number of characters in image.
$stringlength = 5;

// Where to go when the correct / incorrect code is entered.
//    $success = "requestprocess.php";

$success = "success.html";
$failure = "failure.html";

// A value between 0 and 100 describing how much color overlap
// there is between text and other objects.  Lower is more
// secure against bots, but also harder to read.
$contrast = 60;

// Various obfuscation techniques.
$num_polygons = 3; // Number of triangles to draw.  0 = none
$num_ellipses = 6;  // Number of ellipses to draw.  0 = none
$num_lines = 0;  // Number of lines to draw.  0 = none
$num_dots = 0;  // Number of dots to draw.  0 = none

$min_thickness = 2;  // Minimum thickness in pixels of lines
$max_thickness = 8;  // Maximum thickness in pixles of lines
$min_radius = 5;  // Minimum radius in pixels of ellipses
$max_radius = 15;  // Maximum radius in pixels of ellipses

// How opaque should the obscuring objects be. 0 is opaque, 127
// is transparent.
$object_alpha = 75;
?> 
```

I changed some of the files. You can modify them to your liking, but work with copies to test. Let me know how it works out for you, it worked for me.

# json - 无法使用 ServiceStack 序列化程序反序列化简单的 Json

> ID：15399973
> 
> 赞同：1
> 
> 时间：2013-03-14T02:12:49.940
> 
> 标签：json, serialization, servicestack

由于某种原因，此代码不起作用。我在这里错过了什么？这是一个简单的类，Json 是非常基础的。

```
using System;
using ServiceStack.Text;

namespace Test
{
  public class Boo
  {
    public string id { get; set; }
    public string name { get; set; }

    public override string ToString ()
    {
      return string.Format ("[Boo: id={0}, name={1}]", id, name);
    }
  }
  class MainClass
  {
    public static void Main (string[] args)
    {
      Console.WriteLine ("{name: \"Superman\", id: 1}".FromJson<Boo>());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:56:56.960

您的键不是字符串。ServiceStack 的序列化程序期望 JSON 的键是有效的 JSON 字符串。

试试这个：

```
Console.WriteLine ("{\"name\":\"Superman\",\"id\":1}".FromJson<Boo>()); 
```

不确定间距是否重要，但我尽量保持紧凑。

# opengl - LWJGL Lighting..光点不作为光点？

> ID：15399982
> 
> 赞同：0
> 
> 时间：2013-03-14T02:13:56.360
> 
> 标签：opengl, lwjgl, lighting

我在 (0,0,0) 处有一个简单的立方体，在 (10,0,0) 处有一个光点。由于某种原因，我的立方体的左右两侧都被照亮了。所以立方体的相对两侧都亮了。我使用搅拌机生成法线，所以我知道那里是正确的，我还手动检查了它们并将它们倒置。但结果是一样的。

自然只有立方体的右侧应该点亮，对吗？

```
GL11.glEnable(GL11.GL_LIGHTING);
GL11.glEnable(GL11.GL_LIGHT0);  
GL11.glLightModeli(GL11.GL_LIGHT_MODEL_LOCAL_VIEWER, GL11.GL_TRUE); 
        //
GL11.glLightModel(GL11.GL_LIGHT_MODEL_AMBIENT, floatBuffer(new float[] {0.2f, 0.2f, 0.2f, 1.0f}));  
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, floatBuffer(new float[] {0.8f, 0.8f, 0.8f, 1.0f}));   
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_SPECULAR, floatBuffer(new float[] {1.0f, 1.0f, 1.0f, 1.0f}));  
        //
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_POSITION, floatBuffer(new float[] {10, 0, 0, 1}));         
    //
GL11.glEnable(GL11.GL_COLOR_MATERIAL);          
GL11.glColorMaterial(GL11.GL_FRONT, GL11.GL_AMBIENT_AND_DIFFUSE); 
```

// 我对它做了更多的工作，现在我有了一个球体，我看它的每个方向，它都显示出完全相同的光。与光源相对的球体背面不应该像现实生活中那样黑暗吗？

// 我拍了照片，但网站说我需要 10 个声望点才能发布它们:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:25:53.457

我发现了问题。有一个很好的解释： [Java/lwjgl 中的 OpenGL 光照问题](https://stackoverflow.com/questions/8693709/problems-with-opengl-lighting-in-java-lwjgl)
//
问题是我需要像这样在渲染循环中不断设置光照位置，，

```
public void render()
{
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_POSITION, position));
} 
```

# .htaccess - .htaccess 文件中的两个重写规则阻止我访问索引文件

> ID：15399983
> 
> 赞同：0
> 
> 时间：2013-03-14T02:13:56.090
> 
> 标签：.htaccess, mod-rewrite, redirect

这是我现有的 .htaccess 文件：

```
 RewriteEngine On

 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-l
 RewriteCond {REQUEST_FILENAME} !^images

 RewriteRule ^files(.+)$ ../../fileManager/server/php/files/$1 [L]
 RewriteRule ^(.+)$ subpage.php?url=$1 [QSA,L] 
```

我会尽力解释这一点，但不会让它过于复杂。最终，归结为：

如果 URL 在根 URL 之后立即包含“/files”（即：[http://www.someurl.com/files/username/myFile.jpg](http://www.someurl.com/files/username/myFile.jpg)），那么它应该将用户定向到特定 URL（在这种情况下： ../../fileManager/server/php/files/$1)。

使用第二条规则，如果 URL 在根 URL 之后包含除“/files”以外的任何内容，则将它们定向到“subpage.php”。（即： http: [//www.someurl.com/aboutme](http://www.someurl.com/aboutme)）

这两个都工作得很好。然而，有了这两个规则，我永远无法访问 / 或 /index.php（根 URL： http: [//www.someurl.com](http://www.someurl.com)）。我不断被重定向到 subpage.php。

可是等等！还有更多！

如果我删除第一个 RewriteRule 行：

```
 RewriteRule ^files(.+)$ ../../fileManager/server/php/files/$1 [L] 
```

...然后第二个重写规则按我的意愿工作，如果我转到 / 或 /index.php，它会将我带到那里，但如果我转到任何其他 URL，它会将我定向到 subpage.php。

所以我不明白的是：为什么里面有两个 RewriteRule，我无法访问 index.php，但只有第二个 RewriteRule，我可以？

此外，任何人都可以就我如何解决这个问题提供任何建议吗？

任何信息，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:30:50.477

The RewriteConds only apply to the next RewriteRule. With both there, the RewriteConds only apply to the first one.

With only the second RewriteRule in there and the first removed, the test for index.php being a file prevents the rule applying.

With both there, the second rule applies to everything regardless of whether there is a file in place.

It looks like you want to repeat the RewriteConds for the second rule too.

# python - 如何使用 len 和不区分大小写？

> ID：15399984
> 
> 赞同：1
> 
> 时间：2013-03-14T02:14:00.723
> 
> 标签：python, case-insensitive

```
stop = False
text_count = 0
while stop is False:
    int_string = input("What is the initial string? ")
    int_string = int_string.lower()
    for a in int_string:
        for a in b:
            text_count += 1
    if text_count < 3:
        print("Error: string must have at least 3 characters.")
    elif len(int_string) != 'X' or len(int_string) != 'x' or len(int_string) != '_':
        print("Error: string must contain only X and _.") 
```

此字符串必须至少有 3 个字符长，并且必须仅包含字符“X”、“x”或“_”（下划线）也不区分大小写

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:15:58.137

您可以将其转换为`set`对象并将其与您允许的字符集进行比较：

```
while not stop:
    int_string = input("What is the initial string? ").lower()

    if len(int_string) < 3:
        print("Error: string must have at least 3 characters.")
    elif set(int_string) <= {'x', '_'}:
        print("Error: string must contain only X and _.") 
```

`a <= b`是 的简写`a.issubset(b)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:21:40.410

这是另一种选择：

```
while not stop:
    int_string = raw_input("What is the initial string? ").lower()   
    if len(int_string) < 3:
        print("Error: string must have at least 3 characters.")
    elif any(ch not in ('x', '_') for ch in set(int_string)):
        print("Error: string must contain only X and _.") 
```

# sharepoint - 发布页面上的自定义功能区按钮

> ID：15399986
> 
> 赞同：0
> 
> 时间：2013-03-14T02:14:13.580
> 
> 标签：sharepoint, sharepoint-2010, ribbon-control

我正在尝试将按钮添加到 page.Tried 位置为 Ribbon.PublishTab.Publishing。

但按钮不显示。需要一些帮助。

谢谢拉玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:50:55.397

这取决于它是 wiki 页面还是 webpart 页面，以及哪个选项卡和组。以下是将功能区添加到 Wiki 页面/共享选项卡和 Web 部件页面/共享选项卡的示例

下面是元素代码：

```
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <CustomAction Id="COB.SharePoint.Ribbon.NewControlInExistingGroup"
    Location="CommandUI.Ribbon" Sequence="20">
    <CommandUIExtension>
      <CommandUIDefinitions>
        <CommandUIDefinition Location="Ribbon.WikiPageTab.Share.Controls._children">
          <Button .......... />
        </CommandUIDefinition>
        <CommandUIDefinition Location="Ribbon.WebPartPage.Share.Controls._children">
          <Button .......... />
        </CommandUIDefinition> 
```

对于其他位置，您可以参考 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\GLOBAL\XML 中的 CMDUI.XML

看看我每次在定制色带上工作时都会参考的文章。

[http://www.sharepointnutsandbolts.com/2010/02/customize-ribbon-programmatically-from.html](http://www.sharepointnutsandbolts.com/2010/02/customize-ribbon-programmatically-from.html)

# asp.net - signalR 客户端断开连接

> ID：15399988
> 
> 赞同：0
> 
> 时间：2013-03-14T02:14:28.327
> 
> 标签：asp.net, signalr

我正在使用 signalR 制作聊天应用程序，想知道是否可以在客户端捕获断开连接，然后在集线器上调用方法？

例如我想做这样的事情：

```
var myHub = $.connection.myHub;
$.connection.hub.start();

myHub.disconnect(function () { myHub.server.someMethod(username) }); 
```

myHub.disconnect 是用户断开连接时的事件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:24:44.183

你不能。当断开连接触发时，连接已经处于断开状态，不允许触发更多方法。

如果要在连接断开连接到集线器上的 OnDisconnected 覆盖后执行逻辑。例如：

```
public class MyHub : Hub
{
    public override Task OnDisconnected()
    {
        // Do what you want here
        return base.OnDisconnected();
    }
} 
```

# java - 用maven开发

> ID：15399990
> 
> 赞同：4
> 
> 时间：2013-03-14T02:14:45.383
> 
> 标签：java, eclipse, maven

我最近开始与这个小组一起做 java 开发。他们使用 maven 和 svn 来管理他们所有的代码，而我对 maven 没有任何实际经验，所以我正在努力追赶。从我所见，如果你要修改他们的项目之一，你可以使用 svn 检查它，然后在 pom.xml 中处理依赖项 20 分钟，然后你可以使用 mvn install 或其他方式构建它。我们有一个内部存储库，所有项目都对存储库中的代码有很多依赖关系，所以我几乎每次都使用 maven 来构建。由于依赖关系，从 maven 生成 eclipse 项目不起作用。

真正让我沮丧的是，似乎没有一种运行代码或调试它的好方法。Maven 正在生成只能由 maven 执行的 jar 文件，因为 manifest.mf 文件没有主函数的正确路径等。Java -jar 对它们不起作用。

就调试而言，我今天大部分时间都花在谷歌上，试图找出一种使用 eclipse 单步执行我的代码的方法，但显然这无法完成。我试图使用surefire插件设置远程调试，但你必须为此编写单元测试，或者对我的目的来说太过分了。在我之前的 java 经验中，我们使用了简单得多的 svn、ant 和 eclipse。

无论如何，有更多经验的人可以给我一些关于使用 maven 作为构建工具进行开发的提示吗？问我的同事通常没有帮助。我觉得 maven 可能是一个很棒的工具，我对它几乎一无所知，如果不能单步调试和调试我的代码，我什么都做不了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:22:26.770

使用 Eclipse 开发 maven 项目时，使用[m2e 插件](http://eclipse.org/m2e/)- 或直接从 Eclipse Marketplace 安装（即通过菜单）

它将自动处理依赖项、构建路径、类路径、环境设置等 - 在这里您可以[了解更多信息](http://www.sonatype.org/m2eclipse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:25:12.177

如果要进行很多工作，开发 Maven POM 文件可能会很复杂，但是一旦编写完成，它应该很容易构建和使用项目。令人不安的是，您的同事无法向您解释如何使用基于 Maven 的项目。

如果您在 Eclipse 中，m2e 插件绝对是您的最佳选择。您可以单步调试到您想要的内容，并且您几乎可以忽略该项目是基于 Maven 的。

如果您真的想构建和使用 jar 文件，我会使用`maven-shade-plugin`构建一个包含所有依赖项的 über-jar 文件。（这通常不是您要分发的那种东西，但是当您只想要一个简单的 jar 文件用于命令行工作时，这太棒了。）要使用 shade 插件，您可以将其添加到`<plugins>`POM 的部分：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>1.6</version>
    <configuration>
      <transformers>
        <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
           <mainClass>you.main.class.GoesHere</mainClass>
        </transformer>
      </transformers>
    </configuration>
    <executions>
      <execution>
        <phase>package</phase>
        <goals><goal>shade</goal></goals>
      </execution>
     </executions>
 </plugin> 
```

然后运行

```
 mvn package 
```

在命令行上

# python - Python 字典类型错误

> ID：15399998
> 
> 赞同：-4
> 
> 时间：2013-03-14T02:15:10.933
> 
> 标签：python, dictionary, typeerror

我有一本字典如下：

```
Dict = { "key1" : {"subkey1" : "value1" , "subkey2" : "value2" , 

         "key2" : {"subkey1" : "value3" , "subkey2" : "value4 } 
```

我基本上希望能够检查以下值

```
if (Dict[key][any_subkey] == "value"):

   do something.... 
```

我收到 TypeError：列表索引必须是整数，而不是 str ....

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:26:29.807

这对我有用：

```
>>> Dict = { "key1" : {"subkey1" : "value1" , "subkey2" : "value2"} , 
...          "key2" : {"subkey1" : "value3" , "subkey2" : "value4" }}
>>> Dict["key1"]
{'subkey2': 'value2', 'subkey1': 'value1'}
>>> Dict["key1"]["subkey1"]
'value1'
>>> 
```

你检查过你的语法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:26:49.997

像这样？

```
>>> Dict = { "key1" : {"subkey1" : "value1" , "subkey2" : "value2" ,
... 
...                    "key2" : {"subkey1" : "value3" , "subkey2" : "value4" }
...                              }
...          }
>>> print Dict["key1"]["key2"]["subkey2"] == "value4"
True 
```