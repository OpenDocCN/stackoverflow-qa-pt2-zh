# StackOverflow 问答 15316000-15316999

# javascript - 主要面孔文件上传不起作用

> ID：15316007
> 
> 赞同：0
> 
> 时间：2013-03-09T21:15:29.027
> 
> 标签：javascript, jsf, file-upload, jsf-2, primefaces

每当我在我的 Home.xhtml 页面中使用以下 javascript 时，`<p:fileUpload>`在页面不起作用时，选择、上传或取消按钮，什么都没有显示。而当我从页面中删除 javascript 时，一切正常。

1）JavaScript

```
<script type="text/javascript">
/* <![CDATA[ */
    var userName = '<%=request.getParameter("username")%>';
    $(document).ready(function(){ 
        $.cometChat.onLoad({memberListContainerID:'members'});
        join(userName);
    });
    /* ]]> */
</script> 
```

# c++ - Qimage：内存不足，返回空图像

> ID：15316008
> 
> 赞同：1
> 
> 时间：2013-03-09T21:15:36.017
> 
> 标签：c++, qt, qt-creator, qgraphicsview, qimage

我正在编写代码以在 graphicsView QObject 中显示视频。它是这样的：

```
void MainWindow::UpdateVideo()
{
    cap >> frame;
    cvtColor(frame, frame,CV_BGR2RGB);
    QImage Qframe = QImage((uchar*) frame.data, frame.cols, frame.rows, frame.step, QImage::Format_RGB888);
    QPointer<QGraphicsScene> VideoScene = new QGraphicsScene;
    VideoScene->addPixmap(QPixmap::fromImage(Qframe));
    ui->VideoView->setScene(VideoScene);
    ui->VideoView->show();
}

void MainWindow::on_pushButton_2_clicked()
{
    cap.open("test1.mpg");
    if(!cap.isOpened())
       cout<<"CANNOT OPEN FILE"<<endl; //or you can put some error message
    QPointer<QTimer> UpdateVideo = new QTimer;
    connect(UpdateVideo, SIGNAL(timeout()), this, SLOT(UpdateVideo()));
    UpdateVideo->start(10);
} 
```

如您所见，插槽 on_pushButton_2_clicked() 将在第一次单击后每隔 10 毫秒使用计时器调用插槽 UpdateVideo()。我想让视频完美显示，但几秒钟后，qt creator 的应用程序输出中出现以下错误：

> Qimage：内存不足，返回空图像。

然后 graphicsView 框架变为空白。你能告诉我内存泄漏在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:47:09.100

我不认为[QPointer](http://qt-project.org/doc/qt-4.7/qpointer.html)会像你想的那样做。你不断地分配新`QGraphicScene`的 s。这就是你资源不足的原因。

1.  场景应在窗户或外面举行。
2.  `QGraphicsPixmapItem*`返回的人应该`addPixmap`被记住。
3.  应该调用的`setPixmap (const QPixmap &pixmap )`方法来更新图像。`QGraphicsPixmapItem`

例如：

```
class PixmapView
: public QGraphicsView
{
public:
    QPlotView( QGraphicsScene *scene) 
    : QGraphicsView( scene )
    , pixmap( 256, 256 )
    {
        pixmapItem = scene->addPixmap( pixmap );
        buffer.resize( 256*256*4 );
        startTimer( 100 );
    }

   void timerEvent( QTimerEvent* )
   {
       QImage image( &buffer[0], 256, 256, QImage::Format_ARGB32 );
       pixmapItem->setPixmap(  QPixmap::fromImage( image ) );
   }

private:
    std::vector<uchar> buffer;
    QPixmap pixmap;
    QGraphicsPixmapItem* pixmapItem;
}; 
```

编辑：

你也在不断地分配新`QTimer`的 s。单个计时器应该是窗口的成员，因为它需要在方法结束后继续存在。

# javascript - 路由在 Angular.js 中不起作用

> ID：15316009
> 
> 赞同：1
> 
> 时间：2013-03-09T21:15:38.833
> 
> 标签：javascript, angularjs, url-routing

我有一个 angular.js 控制器 ( )，当输入提供的数据等于应用程序 () 中定义的指定字符串时`loginErrorCtrl`，它应该重定向到视图 ( )。`/menu``Data.serverToken`

```
function loginErrorCtrl($scope, Data, $location) {
  $scope.data = Data;
  $scope.validateToken = function(token) {  
    if (token != null) {
      if (token.length == 4) {
        if (token == Data.serverToken) {
          $location.path('/menu');
          } else {
          //error
          return "Invalid Token please try again";
        }
      }
    }
  };
} 
```

问题是，当我在输入框中输入正确的标记时， `$location.path('/menu')`直到我按下退格键才会重定向。如何在成功验证令牌后重定向它？

plunker 上的代码清单：[Angular JS 路由](http://plnkr.co/edit/f1viaDXqa59U2ZQakUEr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:00:06.627

正确的答案是把 $scope.$apply() 作为 Mark 在评论中建议的那样：

```
function loginErrorCtrl($scope, Data, $location) {
$scope.data = Data;
$scope.validateToken = function(token) {  
if (token != null) {
  if (token.length == 4) {
    if (token == Data.serverToken) {
      $location.path('/menu');
      $scope.$apply()
      } else {
      //error
      return "Invalid Token please try again";
    }
  }
}
};
} 
```

[更正的代码](http://plnkr.co/edit/f1viaDXqa59U2ZQakUEr?p=preview)

# r - How to get the standard error of the restricted least square regression in R

> ID：15316016
> 
> 赞同：0
> 
> 时间：2013-03-09T21:17:03.017
> 
> 标签：r, linear-regression

I am estimating a restricted linear regression model

```
lm(TC~Q+PL+PK+PF) 
```

under the linear restriction the coefficients of `PL+PK+PF` sum to one. I want both the regression coefficients and standard errors. How can I achieve this in R?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:51:17.283

If the only constraint you have is that the estimates need to sum to 1 then you can construct this fairly easily by rewriting your model. Let's say we have 3 predictors X1, X2, X3 and we fit a model

```
y = B0 + B1*X1 + B2*X2 + B3*X3 + error 
```

then notice that if we have the restriction that B1 + B2 + B3 = 1 that we could rewrite B3 = 1 - B1 - B2\. In which case our model becomes

```
y = B0 + B1*X1 + B2*X2 + (1 - B1 - B2)*X3 + error
  = B0 + B1*(X1 - X3) + B2*(X2 - X3) + X3 + error
  = B0 + B1*P1 + B2*P2 + X3 + error 
```

where we defined two new variables P1 = X1 - X3 and P2 = X2 - X3.

so if we can fit that model then we're in business. Notice that the estimated parameter for the variable P1 will be our estimate of B1, and our estimated parameter for the variable P2 will be our estimate of B2\. We don't directly get an estimate of B3 but since B3 is just a function of B1 and B2 we'll be fine.

So let's generate some data and fit a model...

```
# Generate fake data and fix some parameters
set.seed(123412)
n <- 100
x1 <- rnorm(n)
x2 <- rnorm(n)
x3 <- rnorm(n)
b0 <- 2
b1 <- .2
b2 <- .5
b3 <- 1 - b1 - b2 # so that b1 + b2 + b3 = 1
e <- rnorm(n)
y <- b0 + b1*x1 + b2*x2 + b3*x3 + e

p1 <- x1 - x3
p2 <- x2 - x3

o <- lm(y ~ offset(x3) + p1 + p2) 
```

Now we can easily get estimates for our parameters

```
b1hat <- coef(o)[2]
b2hat <- coef(o)[3]
b3hat <- 1 - b1hat - b2hat 
```

If we want standard errors we can get SEs for the first two parameters from the output of summary (or by taking the square root of the diagonal of the output of `vcov(o)`)

```
# Get standard errors for B1 and B2
summary(o)
sqrt(diag(vcov(o)))

# Get a standard error for B3 - which is just
# a linear combination of B1 and B2
D <- c(0, -1, -1)
b3hat.se <- sqrt( t(D) %*% vcov(o) %*% D) 
```

# linux - 如何在 /etc/fstab 中指定带有空格的标签/路径？

> ID：15316017
> 
> 赞同：64
> 
> 时间：2013-03-09T21:17:15.947
> 
> 标签：linux, ubuntu, mount, hard-drive

我在尝试获取某些外部驱动器设置的权限时遇到了麻烦。

我相信问题是由于我如何处理文本中的空格，以便终端可以解释命令。我发现[了这个](https://stackoverflow.com/questions/5224243/mount-ntfs-on-ubuntu-on-start-up)，这似乎表明我需要配置我的 etc/fstab 文件以显示以下内容：

```
# UNCONFIGURED FSTAB FOR BASE SYSTEM
/host/ubuntu/disks/swap.disk    none    swap    sw  0   0
LABEL='Expansion Drive'  /media/'Expansion Drive'  ntfs-3g  defaults,umask=0022,fmask=0133  0  0
LABEL='Expansion Drive_'  /media/'Expansion Drive_'  ntfs-3g  defaults,umask=0022,fmask=0133  0  0 
```

但是，这显示驱动器`Drive_'`未准备好的错误。我意识到这是由于使用`""`s 或`''`s，但我不知道如何正确地做到这一点。我的 2 个驱动器被称为`Expansion Drive`和`Expansion Drive_`。有谁知道如何解决这个问题？

**编辑：**这是我在媒体文件夹中看到的内容：

```
chasebrown@ubuntu:/media$ ls -al
total 32
drwxr-xr-x  6 root       root        1024 Mar  9 16:32 .
drwxr-xr-x 24 root       root        1024 Feb 23 23:14 ..
drwx------  1 chasebrown chasebrown  4096 Mar  8 04:21 Expansion Drive
drwx------  1 chasebrown chasebrown  4096 Mar  8 04:21 Expansion Drive_
dr-x------  1 chasebrown chasebrown  2048 May 20  2009 GDRV-25922+VR2
drwx------  1 chasebrown chasebrown 20480 Mar  8 04:21 WD EXTERNAL 
```

还有`sudo lsblk -f`：

```
chasebrown@ubuntu:/dev/disk/by-uuid$ sudo lsblk -f
[sudo] password for chasebrown: 
NAME   FSTYPE  LABEL           MOUNTPOINT
sda                            
├─sda1 ntfs    System Reserved 
└─sda2 ntfs                    
sdb                            
└─sdb1 ntfs                    /host
sdc                            
└─sdc1 ntfs    Expansion Drive /media/Expansion Drive_
sdd                            
└─sdd1 ntfs    Expansion Drive /media/Expansion Drive
sde                            
└─sde1 ntfs    WD EXTERNAL     /media/WD EXTERNAL
sr0    iso9660 GDRV-25922+VR2  /media/GDRV-25922+VR2
loop0  ext3                    / 
```

并且`sudo blkid`：

```
chasebrown@ubuntu:/dev/disk/by-uuid$ sudo blkid
/dev/loop0: UUID="87a15942-982f-4edd-bf44-439dc286fd7c" SEC_TYPE="ext2" TYPE="ext3" 
/dev/sr0: LABEL="GDRV-25922+VR2" TYPE="iso9660" 
/dev/sda1: LABEL="System Reserved" UUID="64CEEA61CEEA2B4E" TYPE="ntfs" 
/dev/sda2: UUID="4CA4EBC0A4EBAAA2" TYPE="ntfs" 
/dev/sdb1: UUID="00064EEE064EE46E" TYPE="ntfs" 
/dev/sdc1: LABEL="Expansion Drive" UUID="C682A8EE82A8E3E1" TYPE="ntfs" 
/dev/sdd1: LABEL="Expansion Drive" UUID="D006D78406D769CC" TYPE="ntfs" 
/dev/sde1: LABEL="WD EXTERNAL" UUID="D65AFC375AFC15C9" TYPE="ntfs" 
```

因此我的新 fstab 文件是：

```
# UNCONFIGURED FSTAB FOR BASE SYSTEM
/host/ubuntu/disks/swap.disk    none    swap    sw  0   0
LABEL=Expansion\040Drive  /media/Expansion\040Drive  ntfs-3g  defaults,umask=0022,fmask=0133  0  0
LABEL=Expansion\040Drive_  /media/Expansion\040Drive_  ntfs-3g  defaults,umask=0022,fmask=0133  0  0 
```

**解决方案**：我最终改变了`LABEL`to`UUID`并且由于某种原因它起作用了。

这是生成的 /etc/fstab 文件：

```
# UNCONFIGURED FSTAB FOR BASE SYSTEM
/host/ubuntu/disks/swap.disk    none    swap    sw  0   0
UUID=C682A8EE82A8E3E1  /media/Expansion\040Drive  ntfs-3g  defaults,umask=0022,fmask=0133  0  0
UUID=D006D78406D769CC  /media/Expansion\040Drive_  ntfs-3g  defaults,umask=0022,fmask=0133  0  0 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-09T21:51:12.773

您可以使用转义序列`\040`来转义空格：

```
# UNCONFIGURED FSTAB FOR BASE SYSTEM
/host/ubuntu/disks/swap.disk    none    swap    sw  0   0
LABEL=Expansion\040Drive  /media/Expansion\040Drive  ntfs-3g  defaults,umask=0022,fmask=0133  0  0
LABEL=Expansion\040Drive_  /media/Expansion\040Drive_  ntfs-3g  defaults,umask=0022,fmask=0133  0  0 
```

顺便说一句，您不能像问题中提到的那样引用部分字符串。如果要引用，则需要引用整个字符串。

我碰巧从 的输出中注意到的另一件事`blkid`是，有 2 个分区（在 2 个单独的驱动器上`sdc1`）`sdd1`都具有相同的 LABEL `Expansion Drive`。要解决此问题，您可以改用 UUID。

```
UUID=C682A8EE82A8E3E1  /media/Expansion\040Drive  ntfs-3g  defaults,umask=0022,fmask=0133  0  0
UUID=D006D78406D769CC  /media/Expansion\040Drive_  ntfs-3g  defaults,umask=0022,fmask=0133  0  0 
```

# assembly - 我的 stdcall 汇编代码不平衡堆栈

> ID：15316019
> 
> 赞同：0
> 
> 时间：2013-03-09T21:17:31.720
> 
> 标签：assembly, x86

_AddPS 函数使堆栈不平衡，并且旨在成为 StdCAll。我没有更多信息，这只是我的第二段汇编程序代码（我的第一段是模拟 cdecl 函数调用的测试 .exe）。

```
.386
.MODEL FLAT, STDCALL
option casemap :none    ; case sensitive

.CODE

_LibMain proc instance:dword, reason:dword, unused:dword
    mov     EAX, 1      ;
    ret
_LibMain endp

_AddPS proc a:dword, b:dword
    push    ebp         ;
    mov     ebp, esp    ;   // ebp << esp
    push    EAX         ;
    push    EBX         ;
    mov EAX, [ebp+8]    ;
    mov EBX, [ebp+4]    ;
    add     EAX, EBX    ;
    pop     EBX         ;
    pop     EAX         ;
    mov     esp, ebp    ;
    pop ebp     ;
    RET 8
_AddPS endp
END _LibMain 
```

使用 MASM 和以下命令行编译：

```
c:\Asm\Test.asm /coff /Gz /FeC:\Asm\Test.dll /FoC:\Asm\Test.obj /link /SUBSYSTEM:WINDOWS /link /DLL 
```

编辑：以下代码有效，但我不清楚原因：

```
_Test proc a:dword, b:dword
    push    ebp     ; Store the stack frame.
    push    EAX     ; Store EAX. Probably not needed. 
    mov EAX, a      ; Move a into EAX.
    add EAX, b      ; Add b to EAX.
    add esp, 4      ; Move past the stored EAX without popping.
    pop ebp     ; pop the stack frame.
    RET 8 // dword is 4 bytes in .386\. We return past the parameters.
_Test endp // Marks where to stop compiling the function. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:59:43.653

您正在创建**2 个**堆栈帧！当您`PROC`在 MASM 中使用关键字创建过程时，MASM 会创建标准的序言和尾声！前 2 行是 MASM 生成的序言，最后 2 行是你的序言。

```
PUSH    EBP
MOV     EBP, ESP
PUSH    EBP
MOV     EBP, ESP 
```

如果您想以您的方式编写代码并使用 MASM 创建手动堆栈帧并继续使用 MASM procs，您需要关闭序言/尾声创建并在完成后将其重新打开。

这应该有效：

```
option prologue:none ; turn off default prologue creation
option epilogue:none ; turn off default epilogue creation
_AddPS proc a:dword, b:dword
    push    ebp         ;
    mov     ebp, esp    ;   // ebp << esp
    push    EAX         ;
    push    EBX         ;
    mov EAX, [ebp+8]    ;
    mov EBX, [ebp+4]    ;
    add     EAX, EBX    ;
    pop     EBX         ;
    pop     EAX         ;
    mov     esp, ebp    ;
    pop ebp     ;
    RET 8
_AddPS endp  
option prologue:PrologueDef ; turn on default prologue creation
option epilogue:EpilogueDef ; turn on default epilogue creation 
```

如果需要，您甚至可以让 MASM 使用您自己的特殊序言/尾声。

如果您在 olly 之类的调试器中查看您的 exe，您可能会发现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:48:36.827

```
include masm32rt.inc
.code
start:
    int 3
    ret

_AddPSOrg proc a:dword, b:dword
    push    ebp         ;
    mov     ebp, esp    ;   // ebp << esp
    push    EAX         ;
    push    EBX         ;
    mov EAX, [ebp+8]    ;
    mov EBX, [ebp+4]    ;
    add     EAX, EBX    ;
    pop     EBX         ;
    pop     EAX         ;
    mov     esp, ebp    ;
    pop ebp     ;
    RET 8

_AddPSOrg endp  

option prologue:none ; turn off default prologue creation
option epilogue:none ; turn off default epilogue creation
_AddPSGood proc a:dword, b:dword
    push    ebp         ;
    mov     ebp, esp    ;   // ebp << esp
    push    EAX         ;
    push    EBX         ;
    mov EAX, [ebp+8]    ;
    mov EBX, [ebp+4]    ;
    add     EAX, EBX    ;
    pop     EBX         ;
    pop     EAX         ;
    mov     esp, ebp    ;
    pop ebp     ;
    RET 8
_AddPSGood endp  
option prologue:PrologueDef ; turn on default prologue creation
option epilogue:EpilogueDef ; turn on default epilogue creation     
end start 
```

运行时，`int 3`将在您的程序中显示 olly。这是olly中的代码： ![在此处输入图像描述](../Images/64fdad82a709fb33147aa1960fd8cbdb.png)

你能看到差别吗？？？？？

所以，堆栈不是不平衡的，参数只是不是你期望的。

如果你想知道堆栈是否真的不平衡，`esp`在函数调用之前和之后打印值，如果值不同，那么堆栈是不平衡的。

# php - PHPExcel 不读取我的 xls 文件

> ID：15316020
> 
> 赞同：0
> 
> 时间：2013-03-09T21:17:39.307
> 
> 标签：php, phpexcel

当我加载任何文件 xls，但总是给出文本。我做这一切： DOM 元素：HTML DOM 元素：正文 DOM 元素：P 段落开头：段落结尾：冲洗单元格：A1 => ÐÏ

`$ aSheet = $ objPHPExcel-> getActiveSheet ();`

外部文件中没有数据怎么办？

我的代码：

```
function getXLS($xls) {
    include_once '/server_name/public_html/PHPExcel/Classes/PHPExcel/IOFactory.php';
    $objPHPExcel = PHPExcel_IOFactory::load($xls);
    $objPHPExcel->setActiveSheetIndex(0);
    $aSheet = $objPHPExcel->getActiveSheet();
    $array = array();
    foreach($aSheet->getRowIterator() as $row) {
        $cellIterator = $row->getCellIterator();
        $item = array();
        foreach($cellIterator as $cell) {
            array_push($item, $cell->getCalculatedValue());
        }
        return $array;
    }

    $excel_file = $_FILES['excel_file'];
    if( $excel_file )
        $excel_file = $_FILES['excel_file']['tmp_name'];
    if($_FILES['excel_file']['tmp_name']) {
        $xlsData = getXLS($excel_file); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:22:58.487

这些错误消息是用于读取 HTML 文件的旧调试代码。PHPExcel 已将您正在加载的文件识别为 HTML 而不是真正的 .xls 文件，并且正在使用 HTML 阅读器。不幸的是，我在代码中留下了一些应该在发布前删除的诊断信息。

要解决此问题，请编辑 HTML Reader 文件，并注释掉任何与任何内容相呼应的行

然而，仔细观察，它实际上看起来好像是一个真正的 Excel 文件的字节流数据周围有 HTML 标记（在文本编辑器中打开文件以了解我的意思）。然而，这个文件正在生成，它被它破坏了，使它不可读。您需要修复创建此文件的代码。

# java - 从 SQLite 数据库中提取数据并在 Textview 中显示

> ID：15316021
> 
> 赞同：0
> 
> 时间：2013-03-09T21:17:42.893
> 
> 标签：java, android, sqlite, textview

晚上好，stackoverflow 的好心人。我希望从我的数据库中提取**所有数据**并将其显示在 TextView 中。我怎样才能做到这一点？

此外，我想将数据（全部）从数据库中提取出来，并通过肥皂消息将其发送到远处的 WS。我对 WSDL 设置没有任何疑问，但我确实需要有关如何从数据库中提取数据并一次又一次使用它的信息。

这是代码：

```
package com.example.prototype2;

import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.support.v4.app.NavUtils;

public class AddGlucose extends Activity implements OnClickListener {

final String LOG_TAG = "myLogs";

Button btnAdd, btnRead, btnClear;
  EditText etGlucose, etTime, etDate;

  DBHelper dbHelper;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_add_glucose);
 // Show the Up button in the action bar.
 setupActionBar();

 btnAdd = (Button) findViewById(R.id.btnAdd);
 btnAdd.setOnClickListener(this);

 btnRead = (Button) findViewById(R.id.btnRead);
 btnRead.setOnClickListener(this);

 btnClear = (Button) findViewById(R.id.btnClear);
 btnClear.setOnClickListener(this);

 etGlucose = (EditText) findViewById(R.id.etGlucose);
 etTime = (EditText) findViewById(R.id.etTime);
 etDate = (EditText) findViewById(R.id.etDate);
 dbHelper = new DBHelper(this);
}

/**
* Set up the {@link android.app.ActionBar}.
*/
private void setupActionBar() {

getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.add_glucose, menu);
return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {
case android.R.id.home:
    // This ID represents the Home or Up button. In the case of this
    // activity, the Up button is shown. Use NavUtils to allow users
    // to navigate up one level in the application structure. For
    // more details, see the Navigation pattern on Android Design:
    //
    // http://developer.android.com/design/patterns/navigation.html#up-vs-back
    //
    NavUtils.navigateUpFromSameTask(this);
    return true;
}
return super.onOptionsItemSelected(item);
}

@Override
public void onClick(View v) {
// TODO Auto-generated method stub
ContentValues cv = new ContentValues();
String glucose = etGlucose.getText().toString();
String time = etTime.getText().toString();
String date = etDate.getText().toString();

SQLiteDatabase db = dbHelper.getWritableDatabase();

switch (v.getId()) {
case R.id.btnAdd:
  Log.d(LOG_TAG, "--- Insert in mytable: ---");

  cv.put("glucose", glucose);
  cv.put("time", time);
  cv.put("date", date);
long rowID = db.insert("mytable", null, cv);
  Log.d(LOG_TAG, "row inserted, ID = " + rowID);
  break;

case R.id.btnRead:
    Log.d(LOG_TAG, "--- Rows in mytable: ---");
    Cursor c = db.query("mytable", null, null, null, null, null, null, null);
    if (c.moveToFirst()) {
        int idColIndex = c.getColumnIndex("id");
        int glucoseColIndex = c.getColumnIndex("glucose");
        int timeColIndex = c.getColumnIndex("time");
        int dateColIndex = c.getColumnIndex("date");

        do {    

            Log.d(LOG_TAG,
                    "ID = " + c.getInt(idColIndex) + 
                    ", glucose = " + c.getString(glucoseColIndex) +
                    ", time = " + c.getString(timeColIndex) + ", date = " +       c.getString(dateColIndex));
        } while (c.moveToNext());
    } else
        Log.d(LOG_TAG, "0 rows");
    c.close();
    break;

 case R.id.btnClear:
  Log.d(LOG_TAG, "--- Clear mytable: ---");

  int clearCount = db.delete("mytable", null, null);
  Log.d(LOG_TAG, "deleted rows count = " + clearCount);
  break;
}
dbHelper.close();
}

class DBHelper extends SQLiteOpenHelper {

    public DBHelper(Context context) {

      super(context, "mytable", null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
      Log.d(LOG_TAG, "--- onCreate database ---");
      // создаем таблицу с полями
      db.execSQL("create table mytable ("
          + "id integer primary key autoincrement," 
          + "glucose text,"
          + "time text," + "date text" + ");");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
  }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:57:45.203

这是一个非常好的 SQLite 示例代码的链接：[http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

所以你只需要为你的数据库自定义代码，但我想告诉你，如果你为行元素创建一个自定义对象（如示例代码），它会更容易、更舒服。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:44:34.223

你只是在一个类中插入了这么多代码，似乎没有红线。按照这个和下面的教程，只需根据您的需要更改解释的代码。一切正常，您将学习如何在设置数据库后从数据库中获取信息。

数据库是如此重要，以至于您应该稍微研究一下。

[啧啧 1](http://thenewboston.org/watch.php?cat=6&number=112)

# java - 自动重新连接 RabbitMQ 通道

> ID：15316022
> 
> 赞同：11
> 
> 时间：2013-03-09T21:17:49.647
> 
> 标签：java, rabbitmq

我发现了这个宝石：

> 如果连接失败，客户端将需要与代理建立新连接。在前一个连接上打开的任何通道都将自动关闭，这些通道也需要重新打开。

所以这不好。我即将编写一大层处理自动重新连接和重新创建通道，然后封装我所有代码中发生的这种情况。问题是，这应该已经完成​​了。这在 Java RMQ 库中可行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-29T11:34:31.977

也许这是 RabbitMQ 客户端的新功能，但我在他们的文档中发现了这一点：

> 要启用自动连接恢复，请使用 factory.setAutomaticRecoveryEnabled(true)：

[https://www.rabbitmq.com/api-guide.html](https://www.rabbitmq.com/api-guide.html)

看起来它应该可以解决问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-24T20:19:20.200

查看[Lyra](https://github.com/jhalterman/lyra)：一个高可用性 RabbitMQ 客户端，可在资源（连接/通道/消费者）意外关闭时自动恢复它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-03T16:57:20.230

从[RabbitMQ 3.3.0](http://www.rabbitmq.com/news.html#2014-04-02T15:58:38+0100)（2014 年 4 月）开始，Java 客户端可以做到这一点。

> 本次发布。. . 允许基于 Java 的客户端在网络故障后自动重新连接。

我不知道这是否是仅服务器更改，仅对客户端库进行更改以使其成为可能，等等。仍在研究中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T03:57:48.137

是的，我同意这是当前 RabbitMQ 客户端实现的主要缺点。我已经使用 RMQ 大约 2 年了（.NET 库），在那段时间里并没有太大的变化。它需要从头开始完全重写，而我还没有时间去做。

但我确实有一些指示。首先，我将为您的连接/通道对象创建一个包装类（您需要通道来执行 AMQP 操作，连接的唯一用途是创建通道）。然后，您的包装类可以跟踪通道或连接是否打开，并采取相应的行动。

我的代码最终看起来像这样：

```
while (_iNeedToBeSendingAndReceiving) {
try {

//This blocks indefinitely while waiting for a connection.
using (var channel = ConnectionWrapper.CreateChannel(string connectionString) {

  //Do stuff, blah, blah
  //When the connection or channel closes, an exception is thrown and
  //I move to the catch block.
  }    
  catch(ConnectionInterruptException ex) {
  //Eat, yummy!
  }
} 
```

我最终的计划是将这些东西抽象出来，并创建一种与 RabbitMQ（或任何其他消息传递）库交互的全新方式。当我完成这方面的一些工作时，我会告诉你的，可能需要几个月的时间。

# r - 具有标准误差的总体平均概率分布

> ID：15316030
> 
> 赞同：0
> 
> 时间：2013-03-09T21:18:34.093
> 
> 标签：r

为了获得总体均值的正态概率分布，我是否使用 rnorm 函数并只给它标准误差而不是标准偏差？

```
# probability distribution of a 
# population mean of 100 with SD of 10, n = 50.

# convert to standard error
se <- 10/(50^.5)

# The rnorm function accepts sd, so I just use the
# se in its place to get the desired distribution
meanDist <- rnorm(1000,mean=100,sd=se)
hist(meanDist) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:41:03.250

是的，尽管`hist`结果将显示平均值估计值的代表性抽样，而不是总体值的分布。

# qt - 用于多个对象的 Qt 信号和槽

> ID：15316032
> 
> 赞同：1
> 
> 时间：2013-03-09T21:18:44.493
> 
> 标签：qt, signals-slots

我这里有点问题。我在信号和插槽方面遇到问题。我会尝试用伪代码来解释。所以，就这样吧。

我有主线程（mainwindow.cpp），当新客户端连接时我正在创建新对象。

主窗口.h：

```
signals:
   void changeText();
... 
```

主窗口.cpp：

```
connect(tcpserver, SIGNAL(changeText()), this, SIGNAL(changeText()));

...

MyClass *m = new MyClass(this);
connect(this, SIGNAL(changeText()), m, SLOT(changeText())); 
```

我还有 tcpserver 类，它在客户端连接并连接两个信号时创建新的 QThread。

tcpserver.h：

```
signals:
    void changeText();
protected:
    void incomingConnection(int handle); 
```

tcpserver.cpp：

```
void incomingConnection(int handle)
{
    QTcpSocket *s = new QTcpSocket(this);
    s->setSocketDescriptor(handle);
    mythread *thread = new mythread(s, this);
    connect(thread, SIGNAL(changeText()), this, SIGNAL(changeText()));
} 
```

问题如下：我有 3 个对象，主线程，从 QTcpServer 继承的 tcpserver 类，以及从 QThread 类继承的 mythread 类。

当我从“tcpserver”创建新的“mythread”-s 并连接信号时，来自新线程的所有信号都连接到“tcpserver”-s 信号，因此，例如，如果 10 个客户端做某事，所有信号都会发送到“tcpserver “这对我来说是个问题。我想了解应该通过 QTread -> TcpServer -> MainWindow 连接到 MyClass 的哪个信号。

对不起我的英语，如果你不明白我的意思，我会尽力解释得更好。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:41:58.207

一些建议：

*   在您的“incomingConnection(int)”中，我怀疑堆中创建的对象（tcpsocket 和 mythread）是否存在内存泄漏，请使用 tcpserver 中的 QList（或其他容器）来保存在“incomingConnection(int)”中创建的套接字
*   在您的类前面加上 SLOT(changeText) 的名称，以阐明哪些对象是您的意图发送者/接收者
*   我不认为你不能像这样连接两个信号

    连接（线程，信号（changeText（）），这个，信号（changeText（）））；

# css - Bootstrap 的 tabs-left 高度

> ID：15316036
> 
> 赞同：2
> 
> 时间：2013-03-09T21:19:03.453
> 
> 标签：css, twitter-bootstrap, tabs

我在类中使用 Bootstrap 选项卡`tabs-left`。但是，如果内容足够大，菜单和内容之间的边界就不会到达边缘。我需要做什么来拉伸菜单？的设置`height:100%`没有帮助，因为菜单使用的是`float: left`.

这是我的例子： [http ://codepen.io/Just-Boris/pen/adqbr](http://codepen.io/Just-Boris/pen/adqbr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:28:10.980

您可以通过从导航选项卡中删除右边框并向内容添加左边框来实现所需的结果。然后，您可以使用 100% 的最小高度调整选项卡内容的大小。

```
 html, body, .tabs-left { height: 100%; }

    .tabs-left .nav-tabs {
      margin-right: 0;
      border-right: 0;
    }

    .tab-content {
      min-height: 100%;
      padding-left: 20px;
      border-left: 1px solid #ddd;
    } 
```

# arrays - 在 R 中使用虚拟变量创建一个列表

> ID：15316037
> 
> 赞同：1
> 
> 时间：2013-03-09T21:19:06.977
> 
> 标签：arrays, r, list

我有三个指示数据来源的虚拟变量

```
 DS1    DS2    DS3
       Pers1     1      0      0
       Pers2     0      1      0
       Pers3     0      1      1 
```

我想拥有

```
 Source
         Pers1   "DS1"
         Pers2   "DS2"
         Pers3   "DS2"|"DS3" 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:32:32.707

我会做这样的事情：

```
df = data.frame(DS1 = c(1,0,0), 
                DS2 = c(0,1,1), 
                DS3 = c(0,0,1))
df$source = apply(df == 1, 1, function(x) paste(names(df)[x], collapse = "|"))
> df
  DS1 DS2 DS3  source
1   1   0   0     DS1
2   0   1   0     DS2
3   0   1   1 DS2|DS3 
```

Where`apply`循环遍历`df == 1`data.frame 的行并`paste`创建一个字符串。

# python - 将数字附加到列表

> ID：15316039
> 
> 赞同：0
> 
> 时间：2013-03-09T21:19:21.003
> 
> 标签：python, python-2.7

```
urllist = ['http://example.com',
           'http://example1.com']
i = 0
while i < len(urllist):
    source = urllib.urlopen(urllist[i]).read()
    regex = '(\d{3})/">(\w+\s-\s\w+)</a>'  # e.g. '435', 'Tom-Jerry' 
    p = re.compile(regex)
    db = re.findall(p, source)
    db = [tuple(filter(None, t)) for t in db]   

    hero_id = []
    for j in db:
        hero_id.append(j[0])

    i += 1
print hero_id 
```

请注意：`db = [tuple(filter(None, t)) for t in db]` `db`是这样的元组列表：`[('564', 'Tom', 'Jerry'), ('321', 'X-man', 'Hulk')]`. 在这`hero_id = []`条线上，一切都像一个魅力。for foop 需要附加每个数字（来自 的每个 url `urllist`）。它部分完成了它的工作。最后的`hero_id`列表只包含最后一个 url 中的数字（以前的数字已经消失）。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:22:55.923

`hero_id = []`那是因为您在 'while' ( )的每次迭代中都将 hero_id 设置为一个空列表

把它放在后面`i = 0`

或者您可以像这样简化代码：

```
urllist = ['http://example.com', 'http://example1.com']
hero_id = []
for url in urllist:
    db = re.findall('(\d{3})/">(\w+\s-\s\w+)</a>', urllib.urlopen(url).read(), re.DOTALL)
    for j in db:
        hero_id.append(tuple(filter(None, j))[0])
print hero_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:22:56.260

由于您的 hero_id 是在 while 循环中设置的，因此在每次迭代时都会覆盖它。将你的 hero_id 变量设为全局变量，不要重置它。

```
hero_id = []
while ():
    #your code 
```

# ruby-on-rails - 黄瓜设计

> ID：15316041
> 
> 赞同：1
> 
> 时间：2013-03-09T21:19:56.923
> 
> 标签：ruby-on-rails, authentication, devise, cucumber, cancan

我正在尝试编写一个功能来测试用户模型的身份验证（设计 + cancan）。可以为用户分配不同的角色。关键是在经过身份验证的用户具有角色之一（“管理员”或“注册”）时测试功能。默认情况下，用户被创建为具有“已注册”角色。我使用[rails3-devise-rspec-cucumber](https://github.com/RailsApps/rails3-devise-rspec-cucumber/)和[Rails 中的授权和用户管理](http://edapx.com/2012/04/18/authorization-and-user-management-in-rails/)作为开始。

所以我有以下表格

```
sqlite> .tables
roles_users        users                 views           
roles              schema_migrations 
```

应用程序/模型/用户.rb

```
class User < ActiveRecord::Base
     has_and_belongs_to_many :roles
     before_save :setup_role
...
 def setup_role 
    if self.role_ids.empty?     
      self.role_ids = 2 # corresponds to "registered"
    end
  end
end 
```

应用程序/模型/角色.rb

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users
  attr_accessible :name
end 
```

功能/user_authentication.feature

```
 Scenario: User signs in successfully
    Given I exist as a user 
```

特征/step_definition/user_definition.rb

```
...
def create_user
  create_visitor
  delete_user
  @user = FactoryGirl.create(:user, @visitor)
end     
    ...
Given /^I exist as a user$/ do
 create_user
end 
```

规格/工厂/user.rb

```
FactoryGirl.define do
  factory :user do
    email 'example@example.com'
    password 'changeme'
    password_confirmation 'changeme'
  end
  factory :role do
    role_id 2 
  end
end 
```

当我运行黄瓜时，我得到**一个错误**

```
Scenario: User signs in successfully      # features/user_authentication.feature:12
Given I exist as a user                 # features/step_definitions/user_definition.rb:58
  Couldn't find Role with id=2 (ActiveRecord::RecordNotFound)
  ./app/models/user.rb:21:in `setup_role' 
```

我想我一定是错过了一些工厂或协会，但我是这个话题的新手，还没有设法找出解决问题的方法。我会很感激你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:32:07.577

您可以将您的 FactoryGirl 定义更改为

```
FactoryGirl.define do
  factory :user do
    email 'example@example.com'
    password 'changeme'
    password_confirmation 'changeme'
  end
  factory :role do
    id 2 
    name 'registered'
  end
end 
```

`Role`有`id`，这成为`role_id`任何参考。所以你需要设置一个`Role`with just `id`。

# java - 将 Java 帮助系统与 Windows 应用程序集成

> ID：15316052
> 
> 赞同：3
> 
> 时间：2013-03-09T21:21:09.143
> 
> 标签：java, javahelp

我有一个适用于 Windows 的 Java 应用程序，我想在其中添加一个帮助系统。

我听说过 Java 帮助系统，但我对此不太了解，我想了解一些关于如何将其与 Windows 应用程序集成的指南和示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:33:03.650

基本思想是在请求帮助时弹出一个窗口（在特定上下文中按下 F1）。这个窗口有一个 JToolbar 和一个 JSpitPane。左侧面板有一个用于导航的 JTree，右侧是一个显示帮助 HTML 页面的 JEditorPane。

![在此处输入图像描述](../Images/110d80042409e8a32441df9f0fc2d24c.png)

您可以运行自己的实现，但设置 Java 帮助系统的最方便和标准的方法是通过 JavaHelp 系统。[http://javahelp.java.net/](http://javahelp.java.net/)。

“JavaHelp 系统是一个在线帮助系统，开发人员可以使用它来为其 Java 平台应用程序添加在线帮助。JavaHelp 系统既是 JCP 规范（JSR 97），也是该规范的参考实现。JavaHelp 系统开源项目包括参考实现的来源。”

另请查看[JavaHelp 2.0 System User's Guide](http://download.java.net/javadesktop/javahelp/jhug.pdf)。

# php - Pimcore - 使用事务保存对象

> ID：15316053
> 
> 赞同：0
> 
> 时间：2013-03-09T21:21:09.180
> 
> 标签：php, pimcore

假设您有一个名为 Customer 的类和另一个名为 StreetAddress 的类。客户有一个接受多个 StreetAddresses 的 multi-href。现在假设当客户在系统中注册时，它输入了一个 StreetAddress，该 StreetAddress 将与客户对象一起保存。现在，关键部分是：如果我们先保存客户，然后再保存 StreetAddress，如果保存 StreetAddress 时出现问题，我们可能会遇到问题，客户将在没有 StreetAddress 的系统上。因此解决方案是进行交易以保存对象。

我测试了以下代码：

```
$address = Object_CustomerAddress::create();
$address->setTest('teestt');
$address->setKey('testaddress');

$customer = Object_Customer::create();
$customer->setAddresses(array($address));
$customer->setKey('testcustomer');
$customer->save(); 
```

此代码将保存客户但不会保存地址（但也不会返回任何错误）。我认为这段代码应该进行交易并保存两者。

我想对了吗？或者有没有其他方法可以解决 Pimcore 的此类问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:24:08.173

您不会在 CustomerAddress 对象上调用 save()。

`$address->save()`

# php - 在列数未知时操作 CSV

> ID：15316054
> 
> 赞同：1
> 
> 时间：2013-03-09T21:08:40.830
> 
> 标签：php, arrays

我正在尝试从不同页面捕获数据..我制作了`array`它，然后我使用 PHP 编写了 cvs 文件（目前，我正在计划这些事情）..

现在的问题是，如果`array`总是包含相同数量的元素，那真的很简单，比如

```
sku
asin
name
size 
```

使用这种结构创建`CSV`很简单，但是当我得到类似的结构时，我将如何创建 CSV

```
sku
asin
name
size
size-1
size-2
...
....
size-n 
```

其中 n 不是常数，并且在不同页面中保存不同的值..

, 在某些情况下可能是 4，在其他情况下可能是 8，在某些情况下可能是零（没有可用的大小）

在第一种情况下，当列已知时，CSV 将是

sku asin 名称 大小

在第二种情况下，CSV 将是

```
SKU asin name size size size-1 (first element)
SKU asin name size size size-1 size-2   size-3  size-4  size-5(second element)
SKU asin name size size (third element)
SKU asin name size size size-1 size-2   size-3  size-4  size-5 size-6 size-8(second element) 
```

*   它不确定会有多少列总数..
*   不确定每行会有多少列

**一个丑陋的情况..**

如果我将下一行写成 CSV 会发生什么

```
SKU asin name size size size-1 size-2   size-3  size-4  size-5 size-6 size-8(second element)
sku-v asin-v (No value for name, size, size-1) size-2-v nothing for rest of columns

where v stands for value 
```

在这种情况下如何编写 CSV 文件？在这种情况下如何管理列？

我想了很多，但找不到出路..

有人可以帮助我吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:31:42.360

如果我理解正确，您需要能够弄清楚一行有多少列？

关于什么

```
sku
asin
name
size
NUMBER_OF_SIZE_COLUMNS
size-1
size-2
...
....
size-n 
```

或者，可能有一种方法可以从列中推断出列`skun, asin, name, size`数？

# android - 为什么我应该使用 R.id，而不是它生成的代码？

> ID：15316057
> 
> 赞同：1
> 
> 时间：2013-03-09T21:21:16.880
> 
> 标签：android, optimization

我的意思是，除了代码清洁度之外，它是一种偏好还是一种禁忌？我只是好奇。

例如：

```
public static final class layout {
public static final int main=0x7f030000; 
```

为什么不使用“0x7f030000”而不是“R.id.main”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:23:39.843

R.id 中生成的 ID**不是**静态的。您添加到任何 XML 文件的任何其他 ID 都可能会更改先前生成的值。因此，您应该始终使用 R.id.your_id ，因为它们**是**静态的。

# javascript - 为选项添加一个值

> ID：15316058
> 
> 赞同：0
> 
> 时间：2013-03-09T21:21:19.937
> 
> 标签：javascript, node.js, ejs, geddy

我正在尝试在 Geddy 框架中使用 EJS（嵌入式 javascript）创建一个选择元素。我想做的是有类似的东西（只是一个例子）：

```
<select>
  <option value="int"> Integer </option>
  <option value="float"> Single precision decimal point </option>
</select> 
```

我没有找到任何例子......我知道创建一个选择

```
<select>
  <option value="X"> X </option>
  <option value="Y"> Y </option>
</select> 
```

我必须写

```
<%- contentTag('select', ['X', 'Y']} %> 
```

但是如何获得我想要的呢？

更新：

我在 EJS 文档中找到了**select_tag**，但无法识别...我也尝试过类似的混合

```
<%- contentTag('select', [{value: NumberTypeEL.NonNegativeInteger, text:'nonnegative integer'}, {value: NumberTypeEL.Integer, text: 'integer'}, {value: NumberTypeEL.Decimal, text: 'decimal'}, {value:NumberTypeEL.Fraction, text:'fraction'}], {class:'span6', name:'numberType'}) %> 
```

但仍然没有。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:58:13.763

在新版本中有一个新的 selectTag。它的工作方式类似于您提到的 EJS 示例，因此您可以传递对象数组。它还允许您指定一个 selectedOption。您仍然可以使用`contentTag("select"...)`它，并且它适用于对象数组，但是，您无法使用 contentTag 选择选项。

已经存在的另一种方法是使用 contentTag 并将其传递给字符串而不是数组

```
contentTag('select', "<option value=\"1\" selected>Text 1</option>"); 
```

请查看[geddyjs.org/documentation](http://geddyjs.org/documentation)上的文档并查找`selectTag`

注意：文档会在晚上更新，所以当你去那里时它可能不在那里，我现在正在复制它。

**选择标签**

`selectTagString(optionsArray, selectedOption, htmlOptions)

使用给定的创建 HTML 选择标签`optionsArray`来创建 HTML 选项元素。

`optionsArray`可以是字符串、数字或具有 value 和 text 属性的对象，分别用于 value 属性和 option 元素内容。

例子：

```
selectTag(['geddy', 'alex', 'neil'])
// => '<select><option value="geddy">geddy</option><option value="alex">alex</option><option value="neil">neil</option></select>'

selectTag(['open', 'close'], todo.status, { class:'span6', name:'status' })
// => '<select class="span6" name="status"><option selected="selected" value="open">open</option><option value="close">close</option></select>'

selectTag([{value: 1, text: "Text 1"}, {value: 2, text: "Text 2"}], 2)
// => <select><option value="1">Text 1</option><option selected="selected" value="2">Text 2</option></select> 
```

# ios - 为什么我不能将属性的值设置为 readWithCompletion 完成块的 items 参数？

> ID：15316059
> 
> 赞同：1
> 
> 时间：2013-03-09T21:21:45.547
> 
> 标签：ios, azure, objective-c-blocks, azure-sql-database, azure-mobile-services

我刚刚开始为 iOS 平台开发应用程序，并且正在使用 Azure 的 Web 服务来访问远程数据库。我一直在调用`readWithCompletion:`表上的方法来尝试从服务器读取数据库中的所有数据。

在方法调用的完成块中，我已将`items`参数记录到控制台，并且我的数据已成功下降。我已经尝试过这样做`NSMutableArray *stops = [items mutableCopy]`以使我的数据超出完成块的范围，但是`stops`一旦超出了完成块的范围，它就为零。

我在这里做错了什么？

```
[self.table readWithCompletion:^(NSArray *items, NSInteger totalCount, NSError *error) {
    self.stops = [items mutableCopy];
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:23:05.357

如果块是异步运行的，这是您对 Web 请求的期望，那么块中更改的变量在块执行之前不会更改，这将在请求完成后发生。

这是一些抽象代码，以及您应该期望的日志结果。假设您有一个表视图，其模型是对象数组，并且假设异步请求从 Web 服务获取这些对象：

```
@property (weak, nonatomic) IBOutlet *tableview;
@property (strong, nonatomic) NSArray *model;

[webRequest performRequest:^(NSArray *result) {
    // this code runs later, when the request completes
    self.model = result;
    // update our UI to indicate that we fetched some data
    [self.tableview reloadData];
}];

// this code runs right away, so self.model is uninitialized at this point
// this is where we should update our UI to say that we are busy fetching data 
```

# visual-studio-2010 - XNA .xnb 资源可以嵌入到 exe 或 dll 中吗？

> ID：15316063
> 
> 赞同：2
> 
> 时间：2013-03-09T21:22:15.413
> 
> 标签：visual-studio-2010, xna, xna-4.0, embedded-resource

XNA 内容管道生成的 .xnb 资源文件是否可以嵌入到应用程序 (exe) 或库 (dll) 中，而不是作为松散文件转储到“内容”文件夹中？

如果是这样，这个过程可以作为常规构建过程的一部分自动化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:33:33.800

是的，你可以这样做。事实上`ResourceContentManager`，框架中内置了执行此操作的功能 ( )。

[这篇博客文章](http://blogs.msdn.com/b/shawnhar/archive/2007/06/12/embedding-content-as-resources.aspx)描述了如何做到这一点。

（重要的是要注意，通过将资源嵌入到程序集中 - 当您的程序集被加载时，它们都会一键加载到内存中！此外，它不适用于某些必须从磁盘流式传输的资源类型。）

自动化它更棘手。该博客文章中描述的方法要求您构建一次内容，然后将输出 XNB 文件添加到项目中。在这一点上，它应该“正常工作”——尽管 Debug 与 Release 的不同 XNB 输出可能会出现问题。

如果你想删除这一步，那么你需要稍微弄乱一下 MSBuild。如果您尝试将[这个问题](https://stackoverflow.com/q/3234307/165500)（解释如何在 MSBuild 中使用通配符）和可能的[这个问题](https://gamedev.stackexchange.com/questions/48619/resourcecontentmanager-with-folders)（如何处理文件夹，以及两种可用的嵌入）中的信息结合起来，我认为您可能会有一些运气。

# html - SASS：如何排除选择器的一部分

> ID：15316065
> 
> 赞同：0
> 
> 时间：2013-03-09T21:22:21.187
> 
> 标签：html, css, sass

我正在为 IE7 创建 :before 伪元素的 polyfill：

```
.my-div:before,
.my-div .ie7-before {

} 
```

我想添加一个标志，`.my-div .ie7-before`在需要时将部分从生成的 CSS 文件中排除。例如：

UPD .：这是我希望它的工作方式：

```
$ie-enabled: true;

// @if $ie-enabled SASS should generate

    .my-div:before,
    .my-div .ie7-before {
        color: red;
    }

// otherwise

    .my-div:before {
        color: red;
    } 
```

有什么方法可以实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:20:37.610

您需要一个变量来指示是否发出您的 ie7 样式。根据需要调整您的班级名称：

```
$ie7: false;

.my-div:before {
    background: #CCC;
}

@if $ie7 {
    .my-div .ie-7 {
        @extend .my-div:before;
    }
} 
```

输出：

```
.my-div:before {
  background: #CCC;
} 
```

当 时`$ie7: true`，输出将是这样的：

```
.my-div:before, .my-div .ie-7 {
  background: #CCC;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:04:21.833

很难理解您的问题，但您可以使用`@extend .my-div;`

# asp.net-mvc - 如何使用 HTML.Action() 模拟浏览器的后退按钮？

> ID：15316068
> 
> 赞同：0
> 
> 时间：2013-03-09T21:22:33.750
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个 MVC 4 应用程序，其中包含一个视图，用户可以在其中输入搜索条件（在表单中），然后在搜索表单下方的表格中显示结果。对于表中的每一行，用户可以单击加载另一个视图的链接，该视图显示他/她有关所选项目的详细信息。

在此详细信息视图中，我有一个链接，可让用户从他/她可以使用以下内容返回：`@Html.ActionLink("Back to List", "Index")`. 当用户单击此链接并返回到搜索表单时，他/她输入的所有搜索条件都消失了。但是，如果用户单击浏览器上的“后退”按钮，则会保留搜索条件。有没有一种方法可以调用 ActionLink 来模仿 Back 按钮的功能？或者也许是 JavaScript？我对 MVC 和 JavaScript 很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:43:28.290

最简单的方法是使用 javascript [history API](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)：

```
window.history.back(); 
```

[这](http://jsfiddle.net/QKreA/)是小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T22:20:26.460

这是一个可以解决问题的 HtmlHelper 扩展。

```
public static class Helpers
{
    public static MvcHtmlString BackViaHistory(this HtmlHelper helper, string linkText)
    {
        return new MvcHtmlString("<a onclick='javascript: window.history.back();'>" + linkText + "</a>");
    }
} 
```

# ios - Target only bar buttons of the top navigation bar using the appearance proxy

> ID：15316071
> 
> 赞同：3
> 
> 时间：2013-03-09T21:22:46.443
> 
> 标签：ios, objective-c, uibarbuttonitem

I am using the appearance proxy to style my app, but I have a problem with the [UIBarButtonItem appearance]; I want to only style the buttons of the top UINavigationbar, but when I run the code below, the same style also gets applied to the done button of the keyboard.

```
NSDictionary *btnAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                              [UIColor blackColor],
                              UITextAttributeTextColor,
                              [UIColor clearColor],
                              UITextAttributeTextShadowColor, nil];

[[UIBarButtonItem appearance] setTitleTextAttributes: btnAttributes
                                            forState: UIControlStateNormal]; 
```

![The style gets applied to the keyboards done button ](../Images/cef29e94b9d6eaefd5d9d4c8f9885044.png)

So, my question is: Is it possible - using the appearance proxy - to style only bar buttons of the top navigation bar?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:41:56.843

You can restrict the appearance to certain container classes. From the [appearance reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html):

```
appearanceWhenContainedIn: 
```

> Returns the appearance proxy for the receiver in a given containment hierarchy. (required)

```
+ (id)appearanceWhenContainedIn:(Class <UIAppearanceContainer>)ContainerClass,... 
```

***Parameters*** ContainerClass, A nil-terminated list of appearance container classes. Return Value The appearance proxy for the receiver in a given containment hierarchy.

***Discussion*** This method throws an exception for any item in the var-args list that is not a Class object that conforms to the UIAppearanceContainer protocol.

Availability Available in iOS 5.0 and later.

* * *

For your example, that would be:

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationController class], nil]
                     setTitleTextAttributes:btnAttributes
                                   forState:UIControlStateNormal]; 
```

# android - Android - 非常基本的向右滑动检测

> ID：15316082
> 
> 赞同：2
> 
> 时间：2013-03-09T21:23:38.233
> 
> 标签：android

我正在尝试编写一个秒表，当您在触摸屏上向右滑动时它会自行重置。我在这里和谷歌上看了一遍，我找不到任何可以用非常简单的术语解释如何做到这一点的东西——我认为这将是某种手势检测器，但没有一个解释特别清楚我将如何实现这一点。

任何帮助将非常感激！

# java - 如何创建与 Java 中的命令相对应的操作列表

> ID：15316084
> 
> 赞同：0
> 
> 时间：2013-03-09T21:24:09.607
> 
> 标签：java, oop, modularity, code-formatting

我想通过在控制台中输入命令来控制我的服务器，但是因为它不是模块化的，所以编写类似的东西

```
switch(command)
{
  case 'command1':
    command1();
    break;
  /* And so on */
} 
```

在 Server 类中，如何创建绑定到函数的方法列表，以便将来轻松修改并将其应用于代码的其他部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:28:55.813

```
Map<String, Action> actions = new HashMap<String, Action>();
// TODO populate the map

...

Action action = actions.get(command);
action.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:33:18.587

我应该寻找现有的设计模式。命令模式符合我的需要。

# android - 实现 Sherlock 操作栏

> ID：15316086
> 
> 赞同：0
> 
> 时间：2013-03-09T21:24:23.393
> 
> 标签：android, actionbarsherlock

![在此处输入图像描述](../Images/2e910ae5ffcbb29c9edfe58767de390e.png)

知道为什么我会收到此编译错误吗？

在其中一个 xml 文件中有：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:color="@color/abs__bright_foreground_disabled_holo_dark"/>
    <item android:color="@color/abs__bright_foreground_holo_dark"/> <!-- not selected -->
</selector> 
```

# mysql - 如何编写这个复杂的自连接

> ID：15316087
> 
> 赞同：1
> 
> 时间：2013-03-09T21:24:27.080
> 
> 标签：mysql, join

我有两个带有给定字段的表

1.  高中生

    *   姓名
    *   年级
    *   ID
2.  喜欢

    *   id1
    *   id2

HighSchooler 保存有关高中生的信息，而 Likes 是一个关系表，显示谁在高中时喜欢谁。id1 的学生喜欢 id2 的学生。有两种方式的关系（当约翰喜欢露西但露西不喜欢约翰时）和两种方式的关系（当阿尔伯特喜欢桑德拉而桑德拉也喜欢阿尔伯特时）。

我需要一个返回两列的查询，其中两列的名称是双向关系，即如果 A 喜欢 B 并且 B 喜欢 A，那么示例结果集将是

```
name | name
A       B 
```

我摆弄它并提出了这个查询，但我不理解它，也不认为它是最佳的。

```
SELECT DISTINCT a.name, b.name 
FROM Highschooler a, Highschooler b, Likes l1 
JOIN Likes l2 on l1.ID1=l2.ID2 
WHERE a.ID=l1.ID2 AND b.ID=l1.ID1 AND a.ID=l2.ID1 AND a.ID > b.ID; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:46:46.980

尝试使用规则将 Likes 表与自身连接起来`(l1.id1 = l2.id2) and (l1.id2 = l2.id1)`

例子：

```
SELECT
   a.name AS a_name,
   b.name AS b_name
FROM
   HighSchooler AS a
   INNER JOIN Likes AS l1
      ON (a.id = l1.id1)
   INNER JOIN Likes AS l2
      ON ((l1.id1 = l2.id2) AND (l1.id2 = l2.id1) AND (l1.id1 > l2.id1))
   INNER JOIN HighSchooler AS b
      ON (l2.id1 = b.id) 
```

[http://sqlfiddle.com/#!2/44a07/6](http://sqlfiddle.com/#!2/44a07/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:26:18.807

您的查询是正确的，但它使用的是表的笛卡尔积，正如您所说，这不是最佳的。当您编写`select * from a,b`a 的所有行和 b 的所有行组合在一起以形成一个具有 size(a)*size(b) 行的新表时。您正在使用三个表来执行此操作，因此您正在创建一个巨大的表，然后从中选择您想要的几行。内连接可以更有效地做到这一点。

```
SELECT
a.name AS name_a, b.name AS name_b
FROM
HighSchooler AS a
INNER JOIN Likes AS l1
ON a.id = l1.id1
INNER JOIN Likes AS l2
ON l1.id1 = l2.id2 AND l1.id2 = l2.id1 AND l1.id1 < l1.id2
INNER JOIN HighSchooler AS b
ON l1.id2 = b.id; 
```

请看[小提琴](http://sqlfiddle.com/#!2/faba6/19/0)：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:39:48.037

关键自联接位于对 Likes 表的两个引用之间。然后需要将其连接到 HighSchoolers 表两次以获取两个人的姓名。

### 步骤 1 彼此喜欢的 ID 对

```
SELECT l1.id1, l1.id2
  FROM Likes AS l1
  JOIN Likes AS l2
    ON l1.id1 = l2.id2 AND l1.id2 = l2.id1; 
```

这给出了彼此喜欢的 ID 对列表。

### 步骤 2 彼此喜欢且不重复的 ID 对

唯一的障碍是它给了每对两次。因此，诀窍是要注意在两行之一中，`id1`值小于`id2`值。作为一个可能有益的副作用，这消除了任何喜欢自己的人。

```
SELECT l1.id1, l1.id2
  FROM Likes AS l1
  JOIN Likes AS l2
    ON l1.id1 = l2.id2 AND l1.id2 = l2.id1;
 WHERE l1.id1 < l1.id2 
```

### 步骤 3 彼此喜欢的名字对

现在用名字整理一下：

```
SELECT h1.name AS name1, h2.name AS name2
  FROM (SELECT l1.id1, l1.id2
          FROM Likes AS l1
          JOIN Likes AS l2
            ON l1.id1 = l2.id2 AND l1.id2 = l2.id1
         WHERE l1.id1 < l1.id2
       ) AS p
  JOIN HighSchoolers AS h1 ON p.id1 = h1.id
  JOIN HighSchoolers AS h2 ON p.id2 = h2.id 
```

`p`是“对”的助记符。

# javascript - 正则表达式日期格式 m/dd/yy-m/dd/yy

> ID：15316088
> 
> 赞同：0
> 
> 时间：2013-03-09T21:24:38.900
> 
> 标签：javascript

我正在尝试在 Javascript 中创建一个匹配`m/dd/yy-m/dd/yy`格式的正则表达式（所以它应该看起来像`4/11/12-5/12/13`）。我已经测试了我的第一部分，它似乎很正常，但是我似乎无法通过第一部分。这是我所拥有的（它将适用于`4/11/12`，但不适用于`-5/12/12`：

```
var myDateRE = /^((0?[13578]|10|12)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[01]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1}))|(0?[2469]|11)(-|\/)(([1-9])|(0[1-9])|([12])([0-9]?)|(3[0]?))(-|\/)((19)([2-9])(\d{1})|(20)([01])(\d{1})|([8901])(\d{1})))[-]$/ ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:36:38.110

这可以找到您的子字符串

```
1?\d\/[01]\d\/\d{2}-1?\d\/[01]\d\/\d{2}/ 
```

您可以添加一些括号来确定每个值

```
/(1?\d)\/([01]\d)\/(\d{2})-(1?\d)\/([01]\d)\/(\d{2})/.exec('4/11/12-5/12/13') 
```

输出

```
["4/11/12-5/12/13", "4", "11", "12", "5", "12", "13"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:49:30.270

我的建议

[演示](http://jsfiddle.net/mplungjan/BeCN6/)

```
var re = /^\d{1,2}\/\d{1,2}\/\d{1,2}-\d{1,2}\/\d{1,2}\/\d{1,2}$/
var str = "4/11/12-5/12/13"

function testDate(str) {
  var parts = str.split("/");
  var date = new Date(str);
  return parts[0] == date.getMonth()+1 && 
         parts[1] == date.getDate()    && 
         parts[2] == String(date.getFullYear()).substring(2);
}

if (str.match(re)) {
    alert(testDate(str.split("-")[0]));
    alert(testDate(str.split("-")[1]));
} 
```

# css - 圆形边框宽度百分比？

> ID：15316089
> 
> 赞同：0
> 
> 时间：2013-03-09T21:24:41.917
> 
> 标签：css

我有一个边框宽度为 5px 的透明 css 圆圈，所以它看起来只是一个轮廓，我的圆圈大小是 100% x 100%（动态取决于父 div）并且效果很好。

我希望我的边框宽度也根据圆圈大小变得更大/更小！那可能吗？我无法用百分比设置边框宽度！我还能怎么做？

我试图只保留这个 CSS！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:41:14.570

我将使用 SVG 来做到这一点，我认为单独使用 CSS 没有简单的方法来做到这一点

我用这篇文章来帮助我，如果我使用 SVG 图像非常容易

[http://www.w3schools.com/svg/svg_circle.asp](http://www.w3schools.com/svg/svg_circle.asp)

# python - 如何使 numpy 加载更快

> ID：15316096
> 
> 赞同：1
> 
> 时间：2013-03-09T21:25:39.213
> 
> 标签：python, numpy

我想使用 numpy 让我的程序更快。我想使用的唯一部分是字符串数组。当我做

```
import numpy 
```

循环 numpy 大约需要 5 秒，这比我为正常程序寻求的加速时间要长。

有没有办法只加载numpy的字符串数组部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:27:31.867

你可以试试：

```
from numpy import array 
```

这不*应该*更快，因为两种方式都导入了整个模块。我不知道为什么会出现这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T21:38:30.400

我认为如果您导入所有内容或仅导入部分内容，这并不重要。重要的是使用的高效算法以及运行应用程序的方式。首先，看一下[Python 速度](http://wiki.python.org/moin/PythonSpeed)。也尝试使用 JIT 编译器，比如[PyPy](http://pypy.org/)。

# jquery - 使用 jqueryUI sortable 对分组数据进行排序

> ID：15316098
> 
> 赞同：0
> 
> 时间：2013-03-09T21:25:49.367
> 
> 标签：jquery, jquery-ui

我有一系列具有以下特征的表格数据元素：

```
Group Name #1
Value1-1 Value1-2 Value1-3 Value1-4 ... Value1-N

Group Name #2
Value2-1 Value2-2 Value2-3 Value2-4 ... Value2-N 
```

每组中总是有相同数量的值。直到运行时才知道组的总数。值保留在列中很重要（这就是我选择 a 的原因`table`）。列中任何特定值的宽度可能会有所不同。

我需要为用户提供重新排序组的能力。所以，我一直在尝试使用 jQueryUI sortable 来支持排序，但我还没有想出一个同时拖动 Group 行和 Values 行的好方法（并将其包含在拖动操作中）。

我已经包含了一个简单的[jsfiddle](http://jsfiddle.net/wiredprairie/hfb64/)作为演示。

仅供参考：可能有数百行组和值，因此我暂时避免了需要手动列生成/调整大小代码的解决方案。

我考虑过的一个选项是使用 start 事件来尝试隐藏配对的行并在排序操作完成后移动它，但这对用户来说在视觉上不会那么好。

一个解决方案或替代方案将不胜感激。

# groovy - 适当的 GPars 导入

> ID：15316108
> 
> 赞同：1
> 
> 时间：2013-03-09T21:27:24.600
> 
> 标签：groovy, import, gpars

仅使用以下导入是否合适？

```
import groovyx.gpars.* 
```

这样我就可以做到：

```
import groovyx.gpars.*

GParsPool.withPool {
   list = 1..10
   list.each{print it + 1 + "\n"}
} 
```

代替：

```
import static groovyx.gpars.GParsPool.withPool

withPool {
   list = 1..10
   list.each{print it + 1 + "\n"}
} 
```

这样做我就不必`import static groovyx.gpars.actor.Actors.actor`单独提及每个导入，就像在这个[Hello World Example](http://www.gpars.org/1.0.0/guide/guide/gettingStarted.html#gettingStarted_aHelloWorldExample)中一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T00:25:19.537

这确实是一个风格问题，但在我们公司，我们决定在 import 语句中使用 * 会在以后自找麻烦。使用 *，您正在导入很多东西，而且您可能不知道它们都是什么。在这种情况下，这可能不是问题，但是在某些时候使用通配符导入几乎可以保证让您使用“Utils”类或某种类型，并且不知道您从哪个包中获取它。

我们甚至对未使用的导入有样式违规。鉴于今天的 IDE 为您提供了非常好的导入管理，没有太多理由对您的导入语句懒惰并可能给您的代码库上的未来开发人员带来问题（尤其是如果是您的话）。

# javascript - express.js 路由解释

> ID：15316110
> 
> 赞同：9
> 
> 时间：2013-03-09T21:27:28.387
> 
> 标签：express.js, javascript, regex, node.js, express

我正在查看[express.js](/questions/tagged/express.js "显示标记为“express.js”的问题")源代码，以了解它如何将命名路由参数映射到`req.params`属性。

对于那些不知道的人，在**express.js**中，您可以使用命名参数定义路由，使它们成为可选的，只允许具有特定格式的路由（以及更多）：

```
app.get("/user/:id/:name?/:age(\\d+)", function (req, res) {
    console.log("ID is", req.params.id);
    console.log("Name is", req.params.name || "not specified!");
    console.log("Age is", req.params.age);
}); 
```

我意识到这个功能的核心是一个在[lib/utils.js](https://github.com/visionmedia/express/blob/master/lib/utils.js)[`pathRegexp()`](https://github.com/visionmedia/express/blob/master/lib/utils.js#L260)中定义的方法。方法定义如下：

```
function pathRegexp(path, keys, sensitive, strict) {
    if (path instanceof RegExp) return path;
    if (Array.isArray(path)) path = '(' + path.join('|') + ')';
    path = path
        .concat(strict ? '' : '/?')
        .replace(/\/\(/g, '(?:/')
        .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g, function (_, slash, format, key, capture, optional, star) {
            keys.push({ name: key, optional: !! optional });
            slash = slash || '';
            return ''
                + (optional ? '' : slash)
                + '(?:'
                + (optional ? slash : '')
                + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')'
                + (optional || '')
                + (star ? '(/*)?' : '');
        })
        .replace(/([\/.])/g, '\\$1')
        .replace(/\*/g, '(.*)');
    return new RegExp('^' + path + '$', sensitive ? '' : 'i');
} 
```

重要的部分是第 7 行的正则表达式，`/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g`它以这种方式对路径名的匹配部分进行分组：

`slash    ` `the `/` symbol                                                                                                                    `

`format  ` `I don't know what is the purpose of this one, explanation needed.                                    `

`key      ` `the word (ie. `\w+`) after the `:` symbol                                                                           `

`capture` `a regex written in front of the `key`. Should be wrapped in parenthesis (ex. `(.\\d+)`)`

`optional` `the `?` symbol after the `key`                                                                                            `

`star      ` `the `*` symbol                                                                                                                     `

并且回调处理程序从上面的组构建一个正则表达式。

* * *

**现在的问题是**，这里的目的是什么`format`？

我的理解根据以下几行：

```
(format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) 
```

并且提到的正则表达式是，

如果您`.`在组之后放置一个符号`slash`并且没有指定匹配条件（在括号中包裹的正则表达式`key`），则生成的正则表达式匹配其余部分，`path`直到它到达一个`.`或`/`符号。

那么有什么意义呢？

* * *

我问这个，因为：

1.  我想在我的应用程序中提取和使用这个方法，并想在使用它之前完全了解它是如何工作的。
2.  **我在express.js**文档中没有找到任何关于它的内容。
3.  我只是好奇 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T01:22:47.927

它用于正确匹配文件扩展名等。

给定 path `'/path/:file.:ext'`，考虑表达式之间的差异：

```
// With 'format' checking
/^\/path\/(?:([^\/]+?))(?:\.([^\/\.]+?))\/?$/

// Without 'format' checking
/^\/path\/(?:([^\/]+?))(?:([^\/]+?))\/?$/ 
```

在第一种情况下，您最终得到的参数为

```
{
    file: 'file',
    ext: 'js'
} 
```

但如果没有格式检查，你最终会得到这个：

```
{
    file: 'f',
    ext: 'ile.js'
} 
```

# image - Photoshop CS6 图像导入

> ID：15316113
> 
> 赞同：1
> 
> 时间：2013-03-09T21:27:42.067
> 
> 标签：image, import, photoshop

无法放置文档“GeniusButton_1only_.png”，因为文件格式模块无法解析该文件。我需要知道如何解决这个问题，如果它们是从互联网上保存的，我可以很好地导入图片，但是当我将它们从我的 iPhone 上拉下来并尝试用 Photoshop 编辑它们时，我得到了那个错误。我在 Mac 上将图像从我的桌面拖到 Photoshop 中，它之前工作正常，直到现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:48:11.783

**看起来您的图像不适用于 Photoshop**

但是，您说它可以与 Mac OS X 图像查看软件 Preview 配合使用...

因此，我们可以做出以下假设：

*   图像没有损坏，（除了 Photoshop，但没关系，因为这是一个程序，而不是全部）
*   Photoshop，在这种情况下无法使用此特定图像文件...

现在，如果 Photoshop 拒绝使用一张特定的图像，最好的解决方案是制作一张具有相同内容的新图像。这很容易：

我查找了如何在预览中复制图像/更改格式并发现：

[http://osxdaily.com/2012/08/29/save-images-as-gif-other-formats-preview-mac-os-x/](http://osxdaily.com/2012/08/29/save-images-as-gif-other-formats-preview-mac-os-x/)

总结一下：`File`->`Save As`

您可以使用我认为我在那里发现的 PNG 或 Photoshop 格式...

希望这会有所帮助，如果我以任何方式侮辱你，我很抱歉，我只是想帮助......我不想以任何方式评判你

总之祝你好运

——卢克

# ruby-on-rails - 尝试访问连接表 Rails 中的属性

> ID：15316114
> 
> 赞同：2
> 
> 时间：2013-03-09T21:27:46.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

**好的，我想我有两个问题需要解决**

我有以下表格： `Student`和`Register`一个显示 1 个寄存器中有很多学生的记录的连接表，称为“Registers_Students”，如下所示：![在此处输入图像描述](../Images/275d9d6f66127fbdd7cec71f94118120.png)。

我必须通过创建`Register_Students`表`rails g migration CreateStudentRegister`，如下所示：

```
class CreateStudentRegister < ActiveRecord::Migration
    def change
    create_table :registers_students, :id => false do |t|
    t.integer  :register_id
    t.integer :student_id
    t.boolean :present
    t.time :time_of_arrival
  end
 end
end 
```

现在，我希望每个寄存器都有一些学生，对于每个学生，我希望他们有一个`present`真/假状态，每个学生也应该有一个`time_of_arrival`时间。但是，我无法访问`time_of_arrival`or`present`属性，因为我想设置它们。

我想为每个学生更改这些属性的方法是`register/show.html.erb`使用以下代码：

```
<% @register.students.each do |student| %>
  <tr>
      <td><%= Register.find(@register).present %></td>         #Doesn't work
      <td><%= student.university_id%></td>
      <td><%= student.first_name.titlecase%></td>
      <td><%= student.last_name.titlecase%></td>
      <td><%= Register.find(@register).time_of_arrival %></td> #This doesn't work
      <td><%= student.time_of_arrival%></td>                   #Nor does this

  </tr>
  <% end %>
</table> 
```

我希望它显示在`show`页面中的原因是，可以编辑登记册，将学生标记为在场或缺席，并使用复选框标记他们的到达时间（该部分尚未实施，但如果你们中的任何人知道如何实现它，我很想听听）。

谢谢大家提前回答

编辑：添加模型

型号`Students`：

```
class Student < ActiveRecord::Base
  has_and_belongs_to_many :registers
  validates :university_id, :length => { :minimum => 10}, #Checks that the University ID is 10 characters long
            :uniqueness => {:case_sensitive => false}, #Checks that the University ID is unique, regardless of case-sensitivity
        :format => { :with => /[wW]\d\d\d\d\d\d\d\d\d/, #University ID needs to be in the right format via regex
                     :message => "Needs to be in the right format i.e. w123456789"}

  default_scope :order => 'LOWER(last_name)' #Orders the students via last name
  attr_accessible :first_name, :last_name, :university_id

  def name
    first_name.titlecase + " " + last_name.titlecase
  end
end 
```

这是另一个模型`Register`

```
class Register < ActiveRecord::Base
  has_and_belongs_to_many :students
  belongs_to :event
  attr_accessible :date, :student_ids, :module_class_id, :event_id
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:56:18.477

**更新** 您需要设置一个模型来访问 registers_students 表

该表名不遵循 Rails 约定或正常语义，所以我可以建议你

1) 使用 1 次迁移回滚数据库（假设创建此表是最后一次迁移）

`rake db:rollback`

2) 从 db/migrations 文件夹中删除迁移

3）使用内置的rails模型生成器

```
rails g model student_register register_id:integer student_id:integer #etc 
```

现在迁移您的数据库然后设置您的 has_many 和 belongs_to 关系，以便您可以在视图中使用它们。

您现在将为每个学生拥有一个 student_registers 数组，您可以循环访问 **End update时的当前字段**

1)

```
 <td><%= Register.find(@register).present %></td>         #Doesn't work 
```

您已经有一个 @register 实例，因此无需再去 abnd 读取数据库以找到相同的实例。只需在 @register 对象上直接使用您想要的属性

```
<td><%= @register.present %></td> 
```

您的原始代码虽然设计不佳，但应该可以工作

如果这不起作用，那么您有一个更根本的问题，您提供的信息很少，因此请返回并编辑您的问题并在这种情况下发表评论。

2)

也一样

```
 <td><%= Register.find(@register).time_of_arrival %></td> #This doesn't work 
```

3)

因为你说这行不通

```
 <td><%= student.time_of_arrival%></td>                   #Nor does this 
```

我开始怀疑你的说法不工作，并建议它工作得很好也许你在这些领域没有数据可以显示。所以输入一些数据，一切都会好的。

4) 使用 rails helpers 在屏幕上编辑多条记录的主要方法有 3 种。我建议你阅读 fields_for

作为起点[http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

另请查看此[http://railscasts.com/episodes/198-edit-multiple-individually](http://railscasts.com/episodes/198-edit-multiple-individually) Ryan Bates 已就该主题进行了其他 railscast，因此请浏览该网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:49:37.963

您需要实现`has_many :through`关联。

请参阅 Rails 指南，[http ://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# octopus-deploy - TFS 服务中的 OctopusPublishPackageToHttp

> ID：15316115
> 
> 赞同：1
> 
> 时间：2013-03-09T21:27:58.887
> 
> 标签：octopus-deploy

我正在尝试在 TFS 服务中配置我的构建，以将我的 .nuget 包部署到我的私有托管 nuGet 服务器。

我正在为我的 nuGet 服务器使用 NuGet.Server.v2.2.31210.9045。

该构建通过 OctoPack 成功创建了 nuget 包。

我可以使用以下命令推送到我的 nuGet 存储库（虚拟化一些值）：

nuget push AppyThingy.1.0.4816.37140.nupkg -s [http://nuget.myserver.com:1601](http://nuget.myserver.com:1601) 01414ad3-3e0c-4ba4-9dae-04e62ff4d0f0

这很有效！

我在构建定义的 MSBuild Arguments 参数中添加了以下内容：

/p:OctopusPublishPackageToHttp= [http://nuget.myserver.com:1601](http://nuget.myserver.com:1601) /p:OctopusPublishApiKey=01414ad3-3e0c-4ba4-9dae-04e62ff4d0f0

这行不通。我不知道为什么它不起作用。我没有看到任何有助于我确定问题的日志信息。我尝试过使用http，但我只是在黑暗中拍摄。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:34:32.883

找到了。Paul 网站上有关 TFS 服务的演练不正确。看起来最新版本的 OctoPack 将这些参数更改为 OctoPack 而不是 Octopus。它现在正在工作。

# python - 三个参数之间的比较

> ID：15316117
> 
> 赞同：0
> 
> 时间：2013-03-09T21:28:08.037
> 
> 标签：python, string, function, boolean, output

我在 python 中有一个函数，它说我必须接受 3 个参数，并且单词必须在手中，并且单词也必须在单词列表中

```
def isValidWord(word, hand, wordList):
    d = hand.copy()
    for c in word:
        d[c] = d.get(c, 0) - 1
        if d[c] < 0 or word not in wordList:
            return False
    return sum(d.itervalues()) == 0 
```

它在 12 outta 14 个测试用例中完美运行 -

```
Function call: isValidWord(hammer, {'a': 1, 'h': 1, 'r': 1, 'm': 2, 'e': 1}, <edX internal wordList>)

Output:
True 
```

但在其他情况下它是错误的！

```
Random Test 1
Function call: isValidWord(shrimp, {'e': 1, 'i': 1, 'h': 1, 'm': 1, 'l': 1, 'n': 1, 'p': 1, 's': 1, 'r': 1, 'y': 1}, <edX internal wordList>)
Your output:
False
Correct output:
True

Random Test 5
Function call: isValidWord(carrot, {'a': 1, 'c': 1, 'l': 2, 'o': 1, 's': 1, 'r': 2, 't': 1, 'x': 1}, <edX internal wordList>)
Your output:
False
Correct output:
True

Random Test 7
Function call: isValidWord(shoe, {'e': 1, 'd': 1, 'h': 1, 'o': 1, 's': 1, 'w': 1, 'y': 2}, <edX internal wordList>)
Your output:
False
Correct output:
True 
```

现在这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:38:11.380

您的功能不包括包含单词字母*和*额外字母的“手”。例如，`f('tree', {'t': 1, 'r': 1, 'e': 2, 's': 1})`( `'trees'`) 应该返回`True`，因为“手”包含所有必要的字母 make `'tree'`。

您无需检查它们：

```
def isValidWord(word, hand, wordlist):
    if word not in wordlist:
        return False

    for letter in word:
        if letter not in hand:
            return False

        hand[letter] -= 1

        if hand[letter] < 0:
            return False

    return True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T19:42:58.257

```
def isValidWord(word, hand, wordList):
    return word in wordList and all(hand.get(a, 0) >= b for a, b in getFrequencyDict(word).items()) 
```

试试这个，它会给出正确的回应

# java - 如何将状态保存到已检查项目？

> ID：15316124
> 
> 赞同：0
> 
> 时间：2013-03-09T21:29:13.520
> 
> 标签：java, android, checkbox

我正在申请，但现在我遇到了问题。无论我关闭应用程序还是按下设备上的后退按钮，我都希望复选框保持选中状态。这是我的代码

```
package com.example.vreaucarnet;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;

public class ActeA extends MainActivity2A {

    private ListView mainListView;
    private mItems[] itemss;
    private ArrayAdapter<mItems> listAdapter;
    ArrayList<String> checked = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.acte2a);

        // Find the ListView resource.
        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id) {
                        mItems planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        SelectViewHolder viewHolder = (SelectViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());

                    }
                });

        // Create and populate planets.
        itemss = (mItems[]) getLastNonConfigurationInstance();

        ArrayList<mItems> planetList = new ArrayList<mItems>();

        planetList.add(new mItems("DJ-Android"));
        planetList.add(new mItems("Android"));
        planetList.add(new mItems("iPhone"));
        planetList.add(new mItems("BlackBerry"));
        planetList.add(new mItems("Java"));
        planetList.add(new mItems("PHP"));
        planetList.add(new mItems(".Net"));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new SelectArralAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        menu.add(0, 1, Menu.NONE, "Products");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch (item.getItemId()) {
        case 1:

            for (int i = 0; i < checked.size(); i++) {
                Log.d("pos : ", "" + checked.get(i));
            }
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    /** Holds planet data. */
    private static class mItems {
        private String name = "";
        private boolean checked = false;

        public mItems() {
        }

        public mItems(String name) {
            this.name = name;
        }

        public mItems(String name, boolean checked) {
            this.name = name;
            this.checked = checked;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public boolean isChecked() {
            return checked;
        }

        public void setChecked(boolean checked) {
            this.checked = checked;
        }

        public String toString() {
            return name;
        }

        public void toggleChecked() {
            checked = !checked;
        }
    }

    /** Holds child views for one row. */
    private static class SelectViewHolder {
        private CheckBox checkBox;
        private TextView textView;

        public SelectViewHolder() {
        }

        public SelectViewHolder(TextView textView, CheckBox checkBox) {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox() {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox) {
            this.checkBox = checkBox;
        }

        public TextView getTextView() {
            return textView;
        }

        public void setTextView(TextView textView) {
            this.textView = textView;
        }
    }

    /** Custom adapter for displaying an array of Planet objects. */
    private static class SelectArralAdapter extends ArrayAdapter<mItems> {
        private LayoutInflater inflater;

        public SelectArralAdapter(Context context, List<mItems> planetList) {
            super(context, R.layout.simplerow, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // Planet to display
            mItems planet = (mItems) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.simplerow, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);
                // Optimization: Tag the row with it's child views, so we don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new SelectViewHolder(textView, checkBox));
                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        CheckBox cb = (CheckBox) v;
                        mItems planet = (mItems) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Reuse existing row view
            else {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                SelectViewHolder viewHolder = (SelectViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);
            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());
            return convertView;
        }
    }

    public Object onRetainNonConfigurationInstance() {
        return itemss;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:07:59.900

我找到了解决方案。我真的希望这段代码能帮助像我这样的人，因为它真的很容易理解

```
package com.example.vreaucarnet;

import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.Toast;

import android.widget.TextView;

public class ActeA extends MainActivity2A  {

String PREFS_NAME = "CheckBox1Tag";

CheckBox m_checkBox2, m_checkBox1, m_checkBox3, m_checkBox4, m_checkBox5, m_checkBox6, m_checkBox7, m_checkBox8, m_checkBox9, m_checkBox10;
TextView textView1;

    String KEY1 = "CheckBox1_key";
    String KEY2 = "CheckBox2_key";
    String KEY3 = "CheckBox3_key";
    String KEY4 = "CheckBox4_key";
    String KEY5 = "CheckBox5_key";
    String KEY6 = "CheckBox6_key";
    String KEY7 = "CheckBox7_key";
    String KEY8 = "CheckBox8_key";
    String KEY9 = "CheckBox9_key";
    String KEY10 = "CheckBox10_key";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.acte2a);

    CheckBox checkBox2, checkBox1, checkBox3, checkBox4, checkBox5, checkBox6, checkBox7, checkBox8, checkBox9, checkBox10;
    TextView textView1;

    m_checkBox2=(CheckBox) findViewById(R.id.checkBox2);
   // checkBox2.setChecked(getFromSP("checkBox2"));
    m_checkBox1=(CheckBox) findViewById(R.id.checkBox1);
    //checkBox1.setChecked(getFromSP("checkBox1"));
    m_checkBox3=(CheckBox) findViewById(R.id.checkBox3);
   // checkBox3.setChecked(getFromSP("checkBox3"));
    m_checkBox4=(CheckBox) findViewById(R.id.checkBox4);
   // checkBox4.setChecked(getFromSP("checkBox4"));
    m_checkBox5=(CheckBox) findViewById(R.id.checkBox5);
   // checkBox5.setChecked(getFromSP("checkBox5"));    
    m_checkBox6=(CheckBox) findViewById(R.id.checkBox6);
   // checkBox6.setChecked(getFromSP("checkBox6"));
    m_checkBox7=(CheckBox) findViewById(R.id.checkBox7);
   // checkBox7.setChecked(getFromSP("checkBox7"));
    m_checkBox8=(CheckBox) findViewById(R.id.checkBox8);
   // checkBox8.setChecked(getFromSP("checkBox8"));
    m_checkBox9=(CheckBox) findViewById(R.id.checkBox9);
   // checkBox9.setChecked(getFromSP("checkBox9"));
    m_checkBox10=(CheckBox) findViewById(R.id.checkBox10);
   // checkBox10.setChecked(getFromSP("checkBox10"));
    textView1=(TextView) findViewById(R.id.textView1);

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);

    boolean

    isChecked = settings.getBoolean(KEY1, false);
    m_checkBox1.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY2, false);
    m_checkBox2.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY3, false);
    m_checkBox3.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY4, false);
    m_checkBox4.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY5, false);
    m_checkBox5.setChecked(isChecked);

    isChecked=settings.getBoolean(KEY6, false);
    m_checkBox6.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY7, false);
    m_checkBox7.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY8, false);
    m_checkBox8.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY9, false);
    m_checkBox9.setChecked(isChecked);

    isChecked = settings.getBoolean(KEY10, false);
    m_checkBox10.setChecked(isChecked);
}

@Override
protected void onStop() {
    super.onStop();

    // We need an Editor object to make preference changes.
    // All objects are from android.context.Context
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();

    editor.putBoolean(KEY1, m_checkBox1.isChecked());
    editor.putBoolean(KEY2, m_checkBox2.isChecked());
    editor.putBoolean(KEY3, m_checkBox3.isChecked());
    editor.putBoolean(KEY4, m_checkBox4.isChecked());
    editor.putBoolean(KEY5, m_checkBox5.isChecked());
    editor.putBoolean(KEY6, m_checkBox6.isChecked());
    editor.putBoolean(KEY7, m_checkBox7.isChecked());
    editor.putBoolean(KEY8, m_checkBox8.isChecked());
    editor.putBoolean(KEY9, m_checkBox9.isChecked());
    editor.putBoolean(KEY10, m_checkBox10.isChecked());

    // Commit the edits!
    editor.commit();
}

} 
```

# three.js - Three.js 线向量到圆柱体？

> ID：15316127
> 
> 赞同：13
> 
> 时间：2013-03-09T21:29:26.770
> 
> 标签：three.js

我有这个在两点之间创建一条线：

```
var geometry = new THREE.Geometry();
geometry.vertices.push(new THREE.Vector3(0, 0, 0));
geometry.vertices.push(new THREE.Vector3(20, 100, 55));
var line = new THREE.Line(geometry, material, parameters = { linewidth: 400 });
scene.add(line); 
```

（线宽，没有任何影响。）

我的问题是如何将其转换为圆柱体？我想在两点之间创建一个圆柱体。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T21:51:24.577

我遇到了完全相同的问题——在 WebGL 中，线宽始终为 1。所以这是我编写的一个函数，它将采用两个 Vector3 对象并生成一个圆柱体网格：

```
var cylinderMesh = function( pointX, pointY )
{
    // edge from X to Y
    var direction = new THREE.Vector3().subVectors( pointY, pointX );
    var arrow = new THREE.ArrowHelper( direction, pointX );

    // cylinder: radiusAtTop, radiusAtBottom, 
    //     height, radiusSegments, heightSegments
    var edgeGeometry = new THREE.CylinderGeometry( 2, 2, direction.length(), 6, 4 );

    var edge = new THREE.Mesh( edgeGeometry, 
        new THREE.MeshBasicMaterial( { color: 0x0000ff } ) );
    edge.rotation = arrow.rotation.clone();
    edge.position = new THREE.Vector3().addVectors( pointX, direction.multiplyScalar(0.5) );
    return edge;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-12-28T21:55:00.883

截至 2020 年 12 月：

我试图完全实现之前的回复中所说的内容，但没有任何效果。

我的解决方案：

```
cylinderMesh = function (pointX, pointY) {
   // edge from X to Y
   var direction = new THREE.Vector3().subVectors(pointY, pointX);
   const material = new THREE.MeshBasicMaterial({ color: 0x5B5B5B });
   // Make the geometry (of "direction" length)
   var geometry = new THREE.CylinderGeometry(0.04, 0.04, direction.length(), 6, 4, true);
   // shift it so one end rests on the origin
   geometry.applyMatrix(new THREE.Matrix4().makeTranslation(0, direction.length() / 2, 0));
   // rotate it the right way for lookAt to work
   geometry.applyMatrix(new THREE.Matrix4().makeRotationX(THREE.Math.degToRad(90)));
   // Make a mesh with the geometry
   var mesh = new THREE.Mesh(geometry, material);
   // Position it where we want
   mesh.position.copy(pointX);
   // And make it point to where we want
   mesh.lookAt(pointY);

   return mesh;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-11T16:42:39.223

在版本 70 中停止为我工作，但通过此更新它可以：)

```
function cylinderMesh(pointX, pointY, material) {
            var direction = new THREE.Vector3().subVectors(pointY, pointX);
            var orientation = new THREE.Matrix4();
            orientation.lookAt(pointX, pointY, new THREE.Object3D().up);
            orientation.multiply(new THREE.Matrix4().set(1, 0, 0, 0,
                0, 0, 1, 0,
                0, -1, 0, 0,
                0, 0, 0, 1));
            var edgeGeometry = new THREE.CylinderGeometry(2, 2, direction.length(), 8, 1);
            var edge = new THREE.Mesh(edgeGeometry, material);
            edge.applyMatrix(orientation);
            // position based on midpoints - there may be a better solution than this
            edge.position.x = (pointY.x + pointX.x) / 2;
            edge.position.y = (pointY.y + pointX.y) / 2;
            edge.position.z = (pointY.z + pointX.z) / 2;
            return edge;
        } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-16T06:10:49.753

实际上，没有其他答案对我有用，但为了表扬，我使用了调整边缘位置的代码并且工作正常。

使用[这个答案](https://stackoverflow.com/a/9051956/614241)的一部分并查看threejs的来源，我最终得到了以下结果

```
var cylinderMesh = function( pointX, pointY )
{
    /* edge from X to Y */
    var direction = new THREE.Vector3().subVectors( pointY, pointX );
    var orientation = new THREE.Matrix4();
    /* THREE.Object3D().up (=Y) default orientation for all objects */
    orientation.lookAt(pointX, pointY, new THREE.Object3D().up);
    /* rotation around axis X by -90 degrees 
     * matches the default orientation Y 
     * with the orientation of looking Z */
    orientation.multiply(new THREE.Matrix4(1,0,0,0,
                                            0,0,1,0, 
                                            0,-1,0,0,
                                            0,0,0,1));

    /* cylinder: radiusAtTop, radiusAtBottom, 
        height, radiusSegments, heightSegments */
    var edgeGeometry = new THREE.CylinderGeometry( 2, 2, direction.length(), 8, 1);
    var edge = new THREE.Mesh( edgeGeometry, 
            new THREE.MeshBasicMaterial( { color: 0x0000ff } ) );

    edge.applyMatrix(orientation)
    edge.position = new THREE.Vector3().addVectors( pointX, direction.multiplyScalar(0.5) );
    return edge;
} 
```

一个可能的改进是添加 edgeGeometry 和 material 作为参数，这样人们就可以重用相同的对象，而不是在每次调用中创建一个新对象

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-02T22:14:52.783

ArrowHelper 自[pull request #3307](https://github.com/mrdoob/three.js/pull/3307)以来基于四元数。

这适用于three.js r58：

```
 var cylinderMesh = function(point1, point2, material)
    {
        var direction = new THREE.Vector3().subVectors(point2, point1);
        var arrow = new THREE.ArrowHelper(direction.clone().normalize(), point1);

        var rotation = new THREE.Vector3().setEulerFromQuaternion(arrow.quaternion);

        var edgeGeometry = new THREE.CylinderGeometry( 2, 2, direction.length(), 10, 4 );

        var edge = new THREE.Mesh(edgeGeometry, material);
        edge.rotation = rotation.clone();
        edge.position = new THREE.Vector3().addVectors(point1, direction.multiplyScalar(0.5));

        return edge;
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-10T15:55:47.383

我想我会发布这个，因为答案没有让我 100% 到达那里。我注意到圆柱体的方向正确，但它们的位置是参考原点的。下面的代码（基于这个问题的其他答案）对我有用：

```
function cylinderMesh(pointX, pointY, material) {
    var direction = new THREE.Vector3().subVectors(pointY, pointX);
    var orientation = new THREE.Matrix4();
    orientation.lookAt(pointX, pointY, new THREE.Object3D().up);
    orientation.multiply(new THREE.Matrix4(1, 0, 0, 0,
                                           0, 0, 1, 0,
                                           0, -1, 0, 0,
                                           0, 0, 0, 1));
    var edgeGeometry = new THREE.CylinderGeometry(2, 2, direction.length(), 8, 1);
    var edge = new THREE.Mesh(edgeGeometry, material);
    edge.applyMatrix(orientation);
    // position based on midpoints - there may be a better solution than this
    edge.position.x = (pointY.x + pointX.x) / 2;
    edge.position.y = (pointY.y + pointX.y) / 2;
    edge.position.z = (pointY.z + pointX.z) / 2;
    return edge;
} 
```

希望这对某人有帮助！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-03T13:31:56.220

使用 r94 的解决方案：

```
function cylindricalSegment(A, B, radius, material) {
  var vec = B.clone(); vec.sub(A);
  var h = vec.length();
  vec.normalize();
  var quaternion = new THREE.Quaternion();
  quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), vec);
  var geometry = new THREE.CylinderGeometry(radius, radius, h, 32);
  geometry.translate(0, h / 2, 0);
  var cylinder = new THREE.Mesh(geometry, material);
  cylinder.applyQuaternion(quaternion);
  cylinder.position.set(A.x, A.y, A.z);
  return cylinder;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-02T08:47:46.317

要旋转方向，您可以使用

```
edge.rotateX(Math.PI / 2); 
```

或者

```
edge.rotateY(Math.PI / 2); 
```

或者

```
edge.rotateZ(Math.PI / 2); 
```

根据您要旋转的坐标。因此，上面发布的代码是：

```
var orientation = new THREE.Matrix4();
/* THREE.Object3D().up (=Y) default orientation for all objects */
orientation.lookAt(pointX, pointY, new THREE.Object3D().up);
/* rotation around axis X by -90 degrees 
 * matches the default orientation Y 
 * with the orientation of looking Z */
orientation.multiply(new THREE.Matrix4(1,0,0,0,
                                       0,0,1,0, 
                                       0,-1,0,0,
                                       0,0,0,1)); 
```

将不需要。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-17T17:35:32.017

老问题，但今天仍然相关。基于 Lee Stemkoski 的回答，这就是我最终开始工作的内容：

```
const cylinderMesh = function( pointX, pointY )
{
    // edge from X to Y
    const direction = new THREE.Vector3().subVectors( pointY, pointX );
    const arrow = new THREE.ArrowHelper( direction.clone().normalize(), pointY );

    // cylinder: radiusAtTop, radiusAtBottom, 
    //     height, radiusSegments, heightSegments
    const edgeGeometry = new THREE.CylinderGeometry( 2, 2, direction.length(), 6, 4 );

    const edge = new THREE.Mesh( edgeGeometry, 
        new THREE.MeshBasicMaterial( { color: 0x0000ff } ) );
    edge.rotation = arrow.rotation.clone();
    edge.position = new THREE.Vector3().addVectors( pointX, direction.multiplyScalar(0.5) );
    return edge;
} 
```

请注意主要区别：您必须对向量进行**归一化**`direction`并将原点设为`pointY`. 规范化`direction`向量需要 a`.clone()`以允许您稍后在`position`计算中使用它

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-10-24T07:40:58.537

我发现只能匹配一个点，所以我如下编辑它（将pointX更改为pointY）并且它可以工作

```
edge.position = new
THREE.Vector3().addVectors(pointY,direction.multiplyScalar(0.5)); 
```

# java - 嵌套循环性能

> ID：15316131
> 
> 赞同：-6
> 
> 时间：2013-03-09T21:30:19.857
> 
> 标签：java, performance, algorithm, loops, architecture

哪个性能更好，这个循环：

```
for (int i = 0; i < 100; i++) { 
    for (int j = 0; j < 10; j++) { }
} 
```

或者这个循环：

```
for (int i = 0; i < 10; i++) {
    for (int j = 0; j < 100; j++) { }
} 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:37:06.397

让我们假设内部循环实际上做了一些事情。FredrikRedin 和 niculare 当然是正确的，内部循环执行的次数是相同的。鉴于这种情况，第二个示例是首选（稍微），因为第二个示例必须设置内循环十次，而第一个示例设置内循环 100 次。设置的循环总数：

*   第一个例子：101
*   第二个例子：11

由于设置循环需要时间，因此首选第二个示例，所有其他条件都相同（它们从来都不是）。一般来说，如果可以将迭代分为内循环和外循环，给内循环更多的迭代次数，从而减少外循环的迭代次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:33:44.017

实际上，它们执行相同数量的迭代，因为“*”是可交换的。在第一种情况下，迭代次数为`100*10`，而在第二种情况下为`10*100`，因此两者都恢复到 1000 次迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:34:12.410

它的操作数量相同。除非您有逻辑跳过迭代和/或两个 for 循环（中断/继续）中的任何一个，否则您为什么期望性能有所不同？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T21:50:35.060

我不认为他们有相同的表现。原因是分支预测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T21:55:50.007

它们是相同的，但在原子时间 10*100 更好，因为第一个迭代器包括 100 个子迭代器，并且下一个迭代器的更改是 10 步，它优于 100 步。为获得最佳效果，您可以使用`Atomic Integer`或`byte`替换`int`. `int`是32位和`byte`8位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T22:51:08.317

经验证据表明它们大致相同：

*（以毫秒为单位的时间，循环中的极简操作）*

**第一个1003**第二个1113
第一个1012**第二个1001**
**第一个1000**第二个1002
**第一个1001**第二个1006
第一个1013**第二个1001**
第一个1001 第二个1001
**第一个1007**第二个1027
第一个1018**第二个1001**
**第一个1001**第二个1002
第一个1010
第一个 1001，第二个 1001
第一个 1002，**第二个 1000**

从理论上讲，我*同意 angelatlarge*的回答。我确实相信这取决于循环内部的内容：如果您正在构建新对象等，数百次将慢于数十次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T01:23:19.823

javac 编译器（将 java 代码编译为字节码）和 JIT（将字节码编译为程序集）都允许将两个循环视为无操作（因为循环体中没有任何内容）。

在实践中，javac 不太可能这样做，但 JIT 很可能会跳过那段代码。

底线：java代码的性能非常依赖于上下文，对于你关于不做任何事情的循环的具体问题，答案是：两者都很可能会被跳过并立即运行。

# ruby-on-rails - 从数据库中删除所有相似的字段

> ID：15316133
> 
> 赞同：0
> 
> 时间：2013-03-09T21:30:28.530
> 
> 标签：ruby-on-rails, ruby, sqlite

我有一个问题，因为我之前的工作搞砸了。我有名为“xxx”的模型，并且有以下字段

```
:identity, :lat, :lon, :name, :tag, :some_id 
```

我想删除所有具有相同的行

```
:identity 
```

例如，如果我有

```
{identity = "2348", name = "Mr. Jackson"}
{identity = "2348", name = "Mr. Jackson"} 
```

我只想拥有

```
{identity = "2348", name = "Mr. Jackson"} 
```

（我应该在传输大量数据之前放置验证器）。但是如何实现这一目标？

我正在考虑在 Model 中编写一些方法，然后从我的控制台调用它。如何解决这个问题？

所描述的场景可能有多种情况。

感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:59:48.433

创建另一个具有所需约束的表`primary key (id)`，然后

```
insert into yyy (select * from xxx); 
```

并忽略错误。这将允许您保留原始数据的副本，以防您需要再次访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:51:44.063

您可以使用以下 SQL 查询来解决这个问题（适用于 sqlite 和 postgresql）：

```
DELETE FROM xxx WHERE id NOT IN (SELECT min(id) FROM xxx GROUP BY identity); 
```

在做之前不要忘记复制数据库，所以如果出现任何问题，您可以重试。

对该查询的确切作用的一点解释：

```
SELECT min(id) FROM xxx GROUP BY identity 
```

首先，它按身份对记录进行分组，即记录及其副本。然后对于每个组，它会为您提供具有最低 id 的记录，即您想要保留的记录。

```
DELETE FROM xxx WHERE id NOT IN () 
```

它会删除所有 ID 不在 select 提供的 ID 集中的记录。然后它会删除所有重复项。

# perl - 如何使用 unix 管道将 ls 命令的输出转换为 perl 脚本

> ID：15316136
> 
> 赞同：3
> 
> 时间：2013-03-09T21:30:45.013
> 
> 标签：perl, pipe

我需要获取当前目录中的文件和子目录列表，然后使用 perl 脚本执行必要的操作。为此必须使用以下命令：`ls -F | perl myfile.pl`. 问题是如何在 perl 脚本中获取 ls 命令的输出。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:35:46.070

这很简单，只需阅读 perl 脚本的标准输入：

```
while(<STDIN>) {
    print "---> $_";  # or whatever you need
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-17T10:35:41.847

如果您编写的不是繁重的单行 perl 脚本，则可以使用“-n”管道标志，这样您就不需要循环输入：

```
ls -F | perl -ne "print $_;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T21:52:02.973

如果您需要将目录的内容交给 Perl 脚本，最好将文件名作为参数传递。

```
perl myscript.pl * 
```

然后...

```
for my $file (@ARGV) {
    ...
} 
```

这避免了解析输出，`ls -F`使您的代码更简单、更快、更健壮和可移植。

可以使用[文件测试操作符](http://perldoc.perl.org/functions/-X.html)在 Perl 中告知文件的类型。

```
for my $file (@ARGV) {
    if( -l $file ) {
        ...do something with a symbolic link...
    }
    elsif( -d $file ) {
        ...do something with a directory...
    }
    else {
        ...regular file...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T21:42:52.917

`perl`运行命令并在脚本内处理其输出。这与管道的行为相同。

```
#!/usr/bin/env perl

use warnings;
use strict;

open my $ls, '-|' , 'ls -F' or die;

while ( <$ls> ) { 
    ## Process each line.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-18T14:15:23.980

ls -F | perl myfile.pl -

我们只需要脚本名称后的“-”参数。顺便说一句，使用“*”代替“-”不起作用。

# c - 无法在c中打印数组

> ID：15316138
> 
> 赞同：1
> 
> 时间：2013-03-09T21:30:56.607
> 
> 标签：c

为什么数组打印我使用的是 c 而不是 c++。我究竟做错了什么？我还想知道您可以在 char 变量中使用哪些字符。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
   int map[4][4] = {1,1,1,1,1,1,11,1,1,1,1,1,1,1,1}; 
   int x, y;
   for (x = 0; x < 4; x++);
   {  
     for (y = 0; y < 4; y++);
     {    
       printf ("%i ", map[x][y]);
     }
     printf ("\n");
   }   
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:35:29.647

摆脱';' 在两条线上:)

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
 {
 int map[4][4] = {1,1,1,1,1,1,11,1,1,1,1,1,1,1,1}; 
 int x, y;
  for (x = 0; x < 4; x++)
  {  
   for (y = 0; y < 4; y++)
   {    
    printf ("%i ", map[x][y]);
   }
    printf ("\n");
   }   
  system("PAUSE");  
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T21:35:38.590

您的代码片段：

```
for (x = 0; x < 4; x++);
  {  
   for (y = 0; y < 4; y++); 
```

行尾的那些分号。他们的意思是，你的 for 循环什么都不做，它们被当作循环体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:49:00.447

去掉 for 循环中的分号：

```
for (x = 0; x < 4; x++)
   {  
     for (y = 0; y < 4; y++)
     {    
       printf ("%i ", map[x][y]);
     }
     printf ("\n");
   } 
```

# facebook-graph-api - 如何从我不拥有的 Facebook 页面获取洞察数据

> ID：15316140
> 
> 赞同：0
> 
> 时间：2013-03-09T21:31:38.420
> 
> 标签：facebook-graph-api, facebook-insights

我正在尝试通过我的 facebook 应用程序访问其他人页面的见解，即使使用他们的 access_token（使用 manage_page 和 read_insights），我也无法访问他们的见解，并且我在调试器中验证了访问令牌，他们提到它们包括 manage_page 和 read_insights 权限。所以我正在寻找代码或有帮助的东西。谢谢 。

# javascript - 使用 DS.attr("date") 的 Ember 设置日期字段

> ID：15316141
> 
> 赞同：2
> 
> 时间：2013-03-09T21:31:40.107
> 
> 标签：javascript, ruby-on-rails, ember.js

我有一个简单的模型`Expense`，它有`date, amount, description`.

我的问题是，当记录发送到服务器时，该`date`字段始终为**nil**，只有在我将其保留为默认值时才有效。

该模型有一个默认的日期值。呈现表单时，会预先填充默认日期。如果提交此表单，则发送该值。如果我单击输入字段（焦点），它总是会向服务器提交 nil。

难道我做错了什么？

代码如下。抱歉，如果它看起来很陌生，我正在使用咖啡脚本 =)

**收到的参数**

`{"expense"=>{"amount"=>10, "date"=>nil, "description"=>"Hello I got an expense"}}`

**模型**

```
Household.Expense = DS.Model.extend
  amount:      DS.attr('number')
  date:        DS.attr('date', { defaultValue: new Date})
... 
```

**看法**

```
Household.ExpensesNewView = Ember.View.extend() 
```

**控制器**

```
Household.ExpensesNewController = Ember.ObjectController.extend
  create: ->
    @transaction.commit()

  init: ->
    @transaction = @.get('store').transaction()
    @set 'content', @transaction.createRecord(Household.Expense)

  save: ->
    @transaction.commit()
    this.transaction = null

  transitionAfterSave: (->
    if @get('content.id')
      @transitionToRoute("expenses")).observes('content.id') 
```

当使用如下输入字段时：

```
<form {{action save on="submit"}} class="form-horizontal">
  {{view Ember.TextField valueBinding="date" id="date" placeholder="Date" required="true"}}
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T10:41:35.097

```
@transaction.set('date', new Date(this.get('date'))); 
```

# macos - 在 Mac OS 中的 Finder 中选择当前路径的快捷方式

> ID：15316142
> 
> 赞同：1
> 
> 时间：2013-03-09T21:31:49.663
> 
> 标签：macos

有没有比使用更短的方法来选择 Finder 中当前目录的路径并将其复制到剪贴板`right-click->Get Info->select the path`？有没有办法显示在 Finder 窗口中**可选择的当前路径？**这是我真正怀念 Windows 或 Linux 的一项功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:54:38.807

除了放弃 Finder 并熟悉终端之外，似乎没有针对您的问题的内置解决方案。

否则，可以[在这里找到](https://superuser.com/questions/371513/how-to-tell-full-path-of-file-on-mac)一个 applescript 解决方案，您可以将其转换为服务。通过这样做，您可以使用自定义键盘快捷键，例如 Command+control+c，这确实是 finder 中将当前路径放入剪贴板的最快方式。

# css - 如何在 css 中获取窗口大小？

> ID：15316143
> 
> 赞同：0
> 
> 时间：2013-03-09T21:31:58.213
> 
> 标签：css, html, header

我目前正在为我的网站编写标题，我有一个朋友正在帮助我。我们有两台非常不同的计算机（PC 和 Mac）并使用不同的浏览器来确保它是多平台的，并且我们发现标题不适合他的屏幕。所以我意识到只获得窗口宽度并将其除以四并使其成为按钮的大小会更容易。我该怎么做呢？

非常感谢！

编辑：这是我正在使用的：

```
 div.horizontal
{
    position: relative;
    width: 100%;
    height:45px;
}   

div.horizontal ul
{
list-style-type:none;
margin:0;
padding:0;
} 

div.horizontal li
{
float:left;
}

div.horizontal a
{
display:block;
background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,0.10) 52%, rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(52%,rgba(255,255,255,0.10)), color-stop(100%,rgba(255,255,255,0))), url("../img/truefactzheader.png");
background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.10) 52%,rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.10) 52%,rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.10) 52%,rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.10) 52%,rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ffffff',GradientType=0 );
width:25%;
height:35px;
}

div.horizontal a:link,div.horizontal a:visited
{
font-weight:bold;
color:#FFFFFF;
text-align:center;
vertical-align:middle;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}

div.horizontal a:hover,div.horizontal a:active
{
height:45px;
background: -moz-linear-gradient(top,  rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.25) 100%), url("../img/truefactzheader.png");
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.25)), color-stop(100%,rgba(0,0,0,0.25))), url("../img/truefactzheader.png");
background: -webkit-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0.25) 100%), url("../img/truefactzheader.png");
background: -o-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0.25) 100%), url("../img/truefactzheader.png");
background: -ms-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0.25) 100%), url("../img/truefactzheader.png");
background: linear-gradient(to bottom,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0.25) 100%), url("../img/truefactzheader.png");
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#99000000', endColorstr='#99000000',GradientType=0 );
a:link {text-decoration:none;}
a:visited {text-decoration:none;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:43:55.043

好吧，假设您的标题元素是屏幕的 100% 宽度，并且您希望按钮的宽度相等，那么数学应该是 > 100 / 4 = 25%。您的每个按钮都应占据页眉宽度的 25%。

因此，在您的 CSS 中，您应该将它们定义如下：

```
#my_header {
    width: 100%;
    float: left;
}
    #my_header a.button {
        display: block;
        float: left;
        width: 25%;
        height: 30px
    } 
```

请看这个[**jsFiddle 演示**](http://jsfiddle.net/d36RH/)。

因此，您需要按如下方式更新您的代码（为清楚起见，我删除了特定于浏览器的属性：

```
div.horizontal {
    position: relative;
    width: 100%;
    height:45px;
}   

div.horizontal ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
} 
div.horizontal li {
    float: left;
    width: 25%;
}

div.horizontal a {
    display: block;
    background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.10) 52%,rgba(255,255,255,0) 100%), url("../img/truefactzheader.png");
    height:35px;
} 
```

# java - Java JNI：如何多次加载库？

> ID：15316144
> 
> 赞同：3
> 
> 时间：2013-03-09T21:32:08.110
> 
> 标签：java, load, java-native-interface, loadlibrary

我正在尝试使用 System.loadLibrary 或 System.load 加载相同的库文件。我这样做的原因是因为它们是相同的代码但不同的配置。我希望这两个库文件有自己的世界，而不会相互影响。（如果我改变左侧的值，它不会改变右侧）这可行吗？还是 Java 会忽略我的第二个 System.loadLibrary 调用，因为它已经加载了？

```
--------------------------
|          Java          |
--------------------------
      |            |
      v            v
  libTst.so    libTst.so
      |            |
      v            v
   libA.so      libA.so 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:08:29.600

> 还是 Java 会忽略我的第二个 System.loadLibrary 调用，因为它已经加载了？

*操作系统*将忽略它。您必须以两个名称提供两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:44:06.713

我不确定，但我认为有两种方法：1-更改辅助库名称并更改代码中的名称何时使用。2-更改 lib 的根目录（您可以在 jvm lib root 中插入您的 lib）。

# libgdx - libgdx touchDown 只调用一次

> ID：15316146
> 
> 赞同：4
> 
> 时间：2013-03-09T21:32:22.297
> 
> 标签：libgdx

我是 LibGdx 的新手，输入处理有问题。

每当触球被按下时，我的播放器都需要发射子弹。但似乎这个方法只被调用一次......

然后用户必须再次单击以射击另一颗子弹。

我想在点击关闭时总是射击子弹......

有没有办法处理这个用例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T00:35:31.260

查看[触摸输入上的“轮询”](https://code.google.com/p/libgdx/wiki/InputPolling)，而不是获取[输入事件](https://code.google.com/p/libgdx/wiki/InputEvent)。因此，在您的渲染或更新方法中，使用如下内容：

```
 boolean activeTouch = false;

 if (Gdx.input.isTouched(0)) {
    if (activeTouch) {
       // continuing a touch ...
    } else {
       // starting a new touch ..
       activeTouch = true;
    }     
 } else {
    activeTouch = false;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:50:07.757

我已经成功地解决了这个问题，没有汇集概念。

我有自定义的 InputProccesor，int 我使用了类似的逻辑，比如提到的 PT。我 touchDown 我启动了发射子弹的线程并进行一些计算，因为我从 Renderer 类中访问了一些我必须使用的方法

```
 Gdx.app.postRunnable(new Runnable() {
        @Override
        public void run() {
        // process the result, e.g. add it to an Array<Result> field of the ApplicationListener.
        shootBullet(screenX, screenY);
        }
    }); 
```

避免OpenGL上下文异常。

在 touchUp 方法中，我取消了拍摄线程。

Tnx 的想法！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-02T14:10:35.250

我使用了[连续输入句柄](https://github.com/libgdx/libgdx/wiki/Event-handling)

这是通过为你的演员设置一个标志来完成的，例如：

```
public class Player{
  private boolean firing = false;
  private final Texture texture = new Texture(Gdx.files.internal("data/player.png"));

  public void updateFiring(){
    if (firing){
        // Firing code here
        Gdx.app.log(TAG, "Firing bullets");
    }
  }

  public void setFiring(boolean f){
    this.firing  = f;
  }

  Texture getTexture(){
    return this.texture;
  }

} 
```

现在在我的应用程序类中实现 InputProcessor

```
@Override
public void create() {
    player= new Player();
    batch = new SpriteBatch();
    sprite = new Sprite(player.getTexture());
    Gdx.input.setInputProcessor(this);
}
@Override
public void render() {
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    batch.begin();
    sprite.draw(batch);
    // Update the firing state of the player
    enemyJet.updateFiring();
    batch.end();
}

@Override
public boolean keyDown(int keycode) {
    switch (keycode){
        case Input.Keys.SPACE:
            Gdx.app.log(TAG, "Start firing");
            player.setFiring(true);

    }
    return true;
}

@Override
public boolean keyUp(int keycode) {
    switch (keycode){
        case Input.Keys.SPACE:
            Gdx.app.log(TAG, "Stop firing");
            player.setFiring(false);

    }
    return true;
} 
```

完毕

# javascript - jQuery选择动态变量

> ID：15316151
> 
> 赞同：1
> 
> 时间：2013-03-09T21:32:54.043
> 
> 标签：javascript, jquery, html

我正在尝试根据复选框的状态从复选框中选择一个动态变量以禁用或启用。HTML 代码：

```
<input type="checkbox" name="only_once_1" id="only_once_1" class="onlyonce" >
<input type="text" id="temp_1" name="temp_1"> 
```

JAVASCRIPT

```
$(".onlyonce").change(function($){
   var parts = this.name.match(/(\D+)(\d+)$/); 
   if(this.value == "on"){
      $("#"+"temp_"+parts[2]).disable()
   }else{
      $("#"+"temp_"+parts[2]).enable()
   }
}); 
```

这个想法是我可能有许多动态添加的这些盒子的副本。任何想法如何让它发挥作用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:39:30.707

你有 3 个错误。这是工作代码：

```
$(".onlyonce").change(function() {  // <-- error #1: remove $ parameter
    var parts = this.name.match(/(\D+)(\d+)$/);
    if (this.checked) { // <-- error #2: use checked property
        $("#" + "temp_" + parts[2]).prop('disabled', true)  // <-- error #3: use prop method
    } else {
        $("#" + "temp_" + parts[2]).prop('disabled', false)
    }
}); 
```

[http://jsfiddle.net/XR9me/](http://jsfiddle.net/XR9me/)

主要问题在这里：`$(".onlyonce").change(function($) {`. 通过`$`作为参数传递给`change`方法，您覆盖对 jQuery 的引用（在闭包内`$`成为事件对象）。

你也可以写得更干净一点：

```
$(".onlyonce").change(function() {
    var parts = this.name.match(/(\D+)(\d+)$/);
    $("#temp_" + parts[2]).prop('disabled', this.checked);
}); 
```

[http://jsfiddle.net/XR9me/1/](http://jsfiddle.net/XR9me/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:10:38.037

如果您可以控制 HTML 结构，则可以：

```
$('.onlyonce').change(function(){
    $(this).next('input[type=text]').prop('disabled', this.checked);
}); 
```

[http://jsfiddle.net/vol7ron/XR9me/2/](http://jsfiddle.net/vol7ron/XR9me/2/)

# android - 我正在尝试在第二个线程中向自身添加一个 int 并且我的主线程中没有任何变化

> ID：15316152
> 
> 赞同：0
> 
> 时间：2013-03-09T21:32:54.530
> 
> 标签：android, multithreading

我正在制作动态壁纸。而且我在尝试多线程我的精灵帧更改时遇到问题。我有一个更新方法和一个绘制方法

```
public void update() {

        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        currentFrame = ++currentFrame % 2;

    }

    public void Draw(Canvas c, int sx, int sy){
        update();
        x = sx;
        y = sy;
        int srcX =  currentFrame * width;
        int srcY = 0;
        Rect src = new Rect(srcX,srcY,srcX+width,srcY+height);
        Rect dst = new Rect(x,y,x+width,y+height);
        c.drawBitmap(b, src, dst, null); 
```

我试着上课

```
public class SecondThread extends Thread{
            public void run(){
                seaweed.update();

            }
            } 
```

这会在自己的线程中运行更新，因此它们可以在不同的时间长度内休眠。一个人睡 50 人，另一个人睡 500 人。如果将 SecondThread 类放在 spirte 类中，它只会设置在第一帧上，如果我放入我的壁纸引擎类并尝试启动它，它会像一个步骤一样然后崩溃。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:38:05.810

更新 int 后尝试在视图上调用[postInvalidate() 。](http://developer.android.com/reference/android/view/View.html#postInvalidate%28%29)就像是：

```
public void update() {

    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    currentFrame = ++currentFrame % 2;
    YourViewClass.this.postInvalidate();
}

public void Draw(Canvas c, int sx, int sy){
    update();
    x = sx;
    y = sy;
    int srcX =  currentFrame * width;
    int srcY = 0;
    Rect src = new Rect(srcX,srcY,srcX+width,srcY+height);
    Rect dst = new Rect(x,y,x+width,y+height);
    c.drawBitmap(b, src, dst, null); 
```

# spring - 在 DWR 和 Spring 应用程序中获取 HttpServletRequest

> ID：15316155
> 
> 赞同：0
> 
> 时间：2013-03-09T21:33:36.777
> 
> 标签：spring, dwr

我想知道在 DWR 和 Spring Application 中获取 HttpServletRequest 对象的正确方法是什么 - 我正在尝试执行以下操作：

```
private HttpServletRequest getRequest() {
    ServletRequestAttributes servletAttributes =
            (ServletRequestAttributes) RequestContextHolder
                    .getRequestAttributes();

    // this is Spring application's DispatcherServlet call
    if (servletAttributes != null) {
        return servletAttributes.getRequest();
    } else {
        if (WebContextFactory.get() == null) {
            // non-HttpRequest call
            return null;
        } else {
            // dwr call
            return WebContextFactory.get().getHttpServletRequest();
        }
    }
} 
```

我问这个是因为当这个方法用完任何 http 上下文时，方法 WebContextFactory 会记录以下警告：

```
 WARN org.directwebremoting.WebContextFactory:39 - Missing WebContextBuilder. Is DWR setup properly? 
```

我可能缺少可以判断此方法调用是否在 HttpServletRequest 中的方法，因此我可以直接返回 null 值：

```
 private HttpServletRequest getRequest() {
     // something like this would be ideal:
     if (!ServletContextFactory.isInServletContext()) {
         // method was not called from ServletRequest, so there is none to be found
         return null;
     }
     ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:25:53.587

您可以将**DWR**类用作 spring bean，因此您不需要**HttpServletRequest**。

例如，这是您的 dwr.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE dwr PUBLIC
"-//GetAhead Limited//DTD Direct Web Remoting 3.0//EN"
 "http://getahead.org/dwr/dwr30.dtd">
  <dwr>
   <allow>
    <create creator="spring" javascript="Report">
     <param name="beanName" value="reportController" />
    </create>
   </allow> 
 </dwr> 
```

这是你的春豆

```
 <bean name="reportController" class="com.repsys.ajax.ReportController">
      <property name="reportService" ref="reportService"></property>
    </bean> 
```

# c# - 如何从 Visual Studio 模板中的动态数据站点更改页面标题

> ID：15316157
> 
> 赞同：0
> 
> 时间：2013-03-09T21:33:44.450
> 
> 标签：c#, visual-studio-2010, asp.net-dynamic-data

我从 Visual Studio 2010 中的模板创建动态数据站点。页面标题显示“动态数据站点”。我该如何改变？

谢谢， CJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:53:08.133

我`<h1 Class="DDMainHeader">Dynamic Data Site</h1>`在**Site.master**文件中找到了这个。

子标题“我的表”可以在**Default.aspx**页中的`<h2 class="DDSubHeader>My Tables</h2>`行中更改。

# netbeans - 简单的 CUDA 项目 Netbeans 链接问题

> ID：15316160
> 
> 赞同：1
> 
> 时间：2013-03-09T21:33:51.910
> 
> 标签：netbeans, cuda

当我在 NetBeans IDE 中取消选中 Enable Make Dependency Checking（请参阅[此问题](https://stackoverflow.com/a/15315718/1141471)）时，现在 IDE 使用 nvcc 并将我的 .cu 编译为 .o 但它根本不进行链接：

> "/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf make [1](https://i.stack.imgur.com/gYNYm.png) : 进入目录 `/me/NetBeansProjects/my_CUDA_1' "/usr/bin/make" -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/libmy_cuda_1.a make[2]: Entering directory`/me/NetBeansProjects/my_CUDA_1' mkdir -p build/Debug/GNU-Linux-x86 / usr/local/cuda-5.0/bin/nvcc -c -g -I/usr/local/cuda-5.0/include -I/usr/local/cuda-5.0/samples/common/inc -o build/Debug/GNU -Linux-x86/cudaMain.o cudaMain.cu mkdir -p dist/Debug/GNU-Linux-x86 rm -f dist/Debug/GNU-Linux-x86/libmy_cuda_1.a ar -rv dist/Debug/GNU-Linux- x86/libmy_cuda_1.a build/Debug/GNU-Linux-x86/cudaMain.o ar: 创建 dist/Debug/GNU-Linux-x86/libmy_cuda_1.aa - build/Debug/GNU-Linux-x86/cudaMain.o ranlib dist /Debug/GNU-Linux-x86/libmy_cuda_1.a make[2]：离开目录 `/me/NetBeansProjects/my_CUDA_1' make[1]: Leaving directory` /me/NetBeansProjects/my_CUDA_1'
> 
> 构建成功（总时间：2s）

我可以从终端链接：

> comp@comp:# ls
> cudaMain.o
> 
> comp@comp:# g++ -m64 -o cudaMain cudaMain.o -L/usr/local/cuda-5.0/lib64 -lcudart comp@comp:#./cudaMain comp@comp:/me/NetBeansProjects/my_CUDA_1/build/Debug /GNU-Linux-x86#

我认为这与它不检查 make 依赖关系（？）在 IDE 中检查/取消检查/删除/添加/更改以启用链接的事实有关吗？我不知道为什么，但在 Projects->Properties 中没有与链接相关的选项。

编辑：

此刻，我解决了所有要在 Ubuntu 12.10 上安装 CUDA-5.0 的问题（在[Soroosh 的](https://stackoverflow.com/users/783868/soroosh-bateni)帮助下，再次感谢）（并使用“来自 nvidia-current 的 NVIDIA 二进制 Xorg 驱动程序、内核模块和 VDPAU 库”驱动程序 - 只有这给了我额外的图形/resolution) 并使用 Netbeans ALL 示例项目进行编译并编译和运行我自己的。**如果有人有任何问题，请询问**

![在此处输入图像描述](../Images/0057543ad2e81462e536a2f91c02ffd8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:34:50.387

我之前将配置类型更改为静态库，这是错误的：应该是应用程序，然后链接是可能的。我必须将 Ide 中的运行命令从调试位置更改为：

> dist/调试/GNU-Linux-x86/my_cuda_1

并使用 GNU 工具集。现在可以了。它构建 .o 然后与 libcudart.so 链接以创建可执行文件：

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .clean-conf
make[1]: Entering directory `/me/NetBeansProjects/my_CUDA_1'
rm -f -r build/Debug
rm -f dist/Debug/GNU-Linux-x86/my_cuda_1
make[1]: Leaving directory `/me/NetBeansProjects/my_CUDA_1'

CLEAN SUCCESSFUL (total time: 113ms)

"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/me/NetBeansProjects/my_CUDA_1'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/my_cuda_1
make[2]: Entering directory `/me/NetBeansProjects/my_CUDA_1'
mkdir -p build/Debug/GNU-Linux-x86
/usr/local/cuda-5.0/bin/nvcc    -c -g -I/usr/local/cuda-5.0/include -I/usr/local/cuda-5.0/samples/common/inc -o build/Debug/GNU-Linux-x86/cudaMain.o cudaMain.cu
mkdir -p dist/Debug/GNU-Linux-x86
/usr/local/cuda-5.0/bin/nvcc     -o dist/Debug/GNU-Linux-x86/my_cuda_1 build/Debug/GNU-Linux-x86/cudaMain.o -lcudart 
make[2]: Leaving directory `/me/NetBeansProjects/my_CUDA_1'
make[1]: Leaving directory `/me/NetBeansProjects/my_CUDA_1'

BUILD SUCCESSFUL (total time: 2s) 
```

> CUDA 时钟示例 GPU 设备 0：具有计算能力 2.1 的“GeForce GT 630”
> 
> 总时钟 = 52926
> 
> 运行成功（总时间：151ms）

# ms-access - MSAccess 分析器

> ID：15316166
> 
> 赞同：2
> 
> 时间：2013-03-09T21:34:07.037
> 
> 标签：ms-access, profiler, sql-server-profiler

我有一个支持 sql server 的 MSAccess .mdb 文件。当我试图打开一个表单时，需要很长时间才能显示我知道我在表单的加载事件上有东西。

有没有办法像 SQL Profiler 一样跟踪 MSAccess 中的执行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T15:01:47.310

法希姆；我从来没有见过这样的跟踪软件。

一个简单的“老派”方法：在每个函数调用的末尾放置一个 msgBox。一旦你确定了哪个函数的运行时间比预期的要长，请检查该函数。您的记录集是否使用索引字段？避免同时打开多个记录集。你是否尽量减少循环的使用？你的循环优化了吗？

要检查的另一件事是使用 Access 宏来计算聚合（总和、平均值）。这会导致 Access 重复运行单个查询。如果您遇到的情况是处理超过 100,000 条记录和 2 打列，则 Access 宏将触发 2 打（每列一次）。

使用上面概述的方法，我采用了一个大型 DB Warehouse 应用程序（主数据表中的 25 万条记录，40 列）并简化了报告，需要一个小时来处理到 5 秒。客户非常高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:40:06.350

我真的不知道您所说的“我知道我在表单的加载事件上有东西”是什么意思。您不能检查附加到您的表单的宏/VBA 吗？你在负载上做什么？

*   您的表单中有多个子表单吗？在使用具有多个子表单的表单时，我经历了很长的打开/加载时间。尤其是当子表单从非常大的记录源中提取一小部分数据时。

检查此链接： [http ://bytes.com/topic/access/answers/204374-timer-function-determining-code-execution-speed](http://bytes.com/topic/access/answers/204374-timer-function-determining-code-execution-speed)

```
Dim sngStart As Single
Dim sngEnd As Single
Dim sngElapsed As Single
Dim time As Single

sngStart = Timer ' Get start time

'your code here

sngEnd = Timer 'get stop time
sngElapsed = sngEnd - sngStart

time = Format(sngElapsed, "######0.0000000000")
MsgBox "Time elapsed: " & time, vbInformation, "Time Elapsed" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T21:32:50.420

```
Option Compare Database
Option Explicit

Private Declare Function timeGetTime _
Lib "winmm.dll" () As Long
Private mlngStartTime As Long

Private Function ElapsedTime() As Long
ElapsedTime = timeGetTime() - mlngStartTime
End Function

Private Sub StartTime()
mlngStartTime = timeGetTime()
End Sub

Public Function MyTest()

Call StartTime
DoCmd.OpenQuery "Query1"
DoCmd.GoToRecord acDataQuery, "Query1", acLast

Debug.Print ElapsedTime() & _

Call StartTime
DoCmd.OpenQuery "Query2"
DoCmd.GoToRecord acDataQuery, "Query2", acLast

Debug.Print ElapsedTime() & _
End Function 
```

[看这里](http://www.microsoft-questions.com/microsoft/Access/36314175/how-to-measure-query-performance.aspx)

另外，检查您的表单设计。是否有很多子表单/主/子链接？有多少聚合？等等。

# java - Java - 通过反射访问公共成员

> ID：15316169
> 
> 赞同：1
> 
> 时间：2013-03-09T21:34:40.427
> 
> 标签：java, reflection, illegalaccessexception

我已经阅读了一大堆 SO 问题，但我似乎无法找到答案。

我有以下课程：

```
public class DatabaseStrings {
    public static final String domain = 
        "CREATE TABLE IF NOT EXISTS domain (" +
            "_id INT UNSIGNED, " +
            "account VARCHAR(20) NOT NULL DEFAULT '', " +
            "domain TINYINT(1) DEFAULT 0, " +
            "domain_string VARCHAR(20) DEFAULT '', " +
            "user_id INT UNSIGNED DEFAULT 0" +
        ");";
} 
```

在其他地方，我正在尝试访问这些字符串：

```
for(Field field : DatabaseStrings.class.getDeclaredFields()) {
    field.setAccessible(true); // I don't know if this is necessary, as the members are public

    System.out.println(field.getName());
    System.out.println(field.getType());
    String value = (String) field.get(null); // This line throws an IllegalAccessException inside Eclipse.
    // Do something with value
} 
```

为什么我会收到 IllegalAccessException？如果我删除 field.get 行，我可以在 LogCat 中看到以下行：

```
System.out    |    domain
System.out    |    class java.lang.String 
```

参考：

[使用反射在 Java 中获取成员变量值的陷阱](https://stackoverflow.com/questions/2020202/pitfalls-in-getting-member-variable-values-in-java-with-reflection?rq=1)

[反射：通过反射加载的类中的常量变量](https://stackoverflow.com/questions/8125086/reflection-constant-variables-within-a-class-loaded-via-reflection?lq=1)

[通过反射访问Java静态最终ivar值](https://stackoverflow.com/questions/850148/accessing-java-static-final-ivar-value-through-reflection/850151#850151)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:01:22.177

需要将 .get() 包装在 try-catch 块中

```
String value = null;

try {
    value = (String)field.get(null);
    // Do something with value
} catch (IllegalAccessException e) {
    // Handle exception
} 
```

# bash - 测试文件是否存在 bash

> ID：15316170
> 
> 赞同：1
> 
> 时间：2013-03-09T21:34:45.543
> 
> 标签：bash, unix

我已经阅读了其他一些问题，我觉得我和其他人完全一样，但我就是找不到文件。

```
file="~/.todo/$1.task"
if [ ! -f "$file" ]; then
    echo "Error. Task ~/.todo/$1.task not found."
    ls ~/.todo/
    exit 1
fi 
```

当 del 被调用时，这是在函数内部......所以使用这个命令，输出如下：

```
$ ./todo.sh del 19
Error. ~/.todo/19.task not found.
10.task  13.task  16.task  1.task  6.task  9.task     tododatesorted
11.task  14.task  18.task  3.task  7.task  taskno
12.task  15.task  19.task  4.task  8.task  tododates 
```

为什么它说它不存在，而实际上它存在？我试过 -e 和 -f 标志，虽然我不完全理解它们的区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T21:46:20.753

不同之处在于路径名扩展。当您`~`取消引用时，shell 会将其扩展至您的主目录。但是，当它在引号内时，正如您所拥有的那样，它不会被扩展。例如

```
$ file="~"; echo $file
~
$ file=~; echo $file
/Users/kevin 
```

您可以通过以下两种方式之一修复您的脚本：

1.  去掉引号：`file=~/.todo/$1.task`. 在像这样的变量赋值的情况下，空格`$1`不会破坏命令，但`$1`如果你愿意，你可以引用。
2.  改用`$HOME`：`file="$HOME/.todo/$1.task"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:43:52.157

当您检查`"$file"`. 所以它正在寻找的文件名仍然包含波浪号，而不是扩展到主目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-16T12:19:52.773

在 Bash 中，您可以这样做：

```
unexpanded_file="~/example.txt"
file="${unexpanded_file/#\~/$HOME}" 
```

这应该用 $HOME 替换 ~

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-09T21:44:45.620

尝试摆脱';' 在]之后...我不确定，我不能尝试。

# python - 如何在运行时访问未知对象 - 而不是它们的名称

> ID：15316172
> 
> 赞同：1
> 
> 时间：2013-03-09T21:34:56.180
> 
> 标签：python, globals

我正在解析一些按某种顺序包含部分的文档。我需要知道它们的顺序以匹配一些解析目标。现在我有这些清单，这里有两个

```
possible_seq_1 = [1, '1A', '1B', 2, 3, 4, 5, 6, 7, '7A',
           8, 9, '9A', '9B', 10, 11, 12, 13, 14, 15]

possible_seq_2 = [1, '1A', '1B', 2, 3, 4, 5, 6, 7, '7A',
           8, 9, '9A(T)', '9B', 10, 11, 12, 13, 14, 15] 
```

我想使用上面列表中的项目作为字典的键，其中的值将我引导到下一步

```
my_dict = dict()
aKey =  = '_'.join([str(item) for item in possible_seq_1])
my_dict(aKey) = 'something' 
```

因此，当我稍后处理某些内容时，我可以简单地测试该对象是否与我的字典中的一个键匹配

我的问题是，稍后我将向 possible_seq (uences) 添加一些未知数字（现在我有十个选择）我将序列键入我的代码中，就像我在这条消息中所做的那样，然后在我运行代码之前我必须进行一些更改以合并我的新序列。具体来说，我必须增加以下范围

```
my_dict = dict()
for sequence in range(1,10,1):
    dict_key = '_'.join([str(item) for item in possible_seq_ + str(sequence)
    my_dict[dict_key] = something 
```

当我这样做时，我想知道 Python 是否提供了它知道的对象，因为它们已经在代码中定义了。我发现他们的名字是可用的，但我不知道如何抓取/引用对象本身

那是我认为我能做到的

```
seq_list = [ item for item in globals() if 'possible_seq' in item if type(item) == list ] 
```

但是，我得到一个空列表，这很有趣，因为名称是一个字符串，所以 globals 给了我一个对象名称的列表 - 我想要实际的对象而不是这个代码给我的名字

```
seq_list = [ item for item in globals() if 'possible_seq' in item ] 
```

我承认，当我处理这个问题时，我意识到更简单的做法是将我的序列作为列表添加到序列列表中，但现在我对这种其他方法感兴趣，只是为了提高我对 Python 的理解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:37:39.067

诀窍是它`globals()`是一个字典，而不是一个列表，所以只需遍历其中的项目`globals()`只会得到它们的名称。由于您想检查`possible_seq`每个名称中是否存在，您可以使用`.items()`字典的方法来迭代名称和对象：

```
[v for k, v in globals().items() if 'possible_seq' in k] 
```

*但是*，正如您推测的那样，这不是一个好方法。*最好*保留一个列表列表，例如：

```
possible_seqs = [[1, '1A', '1B', 2, 3, 4, 5, 6, 7, '7A',
           8, 9, '9A', '9B', 10, 11, 12, 13, 14, 15],
                 [1, '1A', '1B', 2, 3, 4, 5, 6, 7, '7A',
           8, 9, '9A(T)', '9B', 10, 11, 12, 13, 14, 15]] 
```

请参阅[将数据保留在变量名之外](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)。

# c# - 将 24bpp 位图转换为 1bpp

> ID：15316174
> 
> 赞同：2
> 
> 时间：2013-03-09T21:35:01.563
> 
> 标签：c#, image-processing, bitmap, grayscale

我正在尝试转换一个小的位图图像。我希望将任何不是 100% 白色的像素转换为黑色。我努力了

```
Bitmap output = sourceImage.Clone(new Rectangle(0, 0, sourceImage.Width, sourceImage.Height), PixelFormat.Format1bppIndexed); 
```

在 1bpp 输出中仍有一些较亮的像素保持白色。实现这种转换的最快方法是什么？我可以修改调用 Clone() 的强度阈值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T17:05:32.800

试试这个，从非常[快的 1bpp 转换](http://pastebin.com/S2PGX3SG)：

[将图像转换为 1bpp 时](https://stackoverflow.com/questions/17192800/threshold-value-when-converting-image-to-1bpp)从此处复制阈值？.

```
 private static unsafe void Convert(Bitmap src, Bitmap conv)
        {
            // Lock source and destination in memory for unsafe access
            var bmbo = src.LockBits(new Rectangle(0, 0, src.Width, src.Height), ImageLockMode.ReadOnly,
                                     src.PixelFormat);
            var bmdn = conv.LockBits(new Rectangle(0, 0, conv.Width, conv.Height), ImageLockMode.ReadWrite,
                                     conv.PixelFormat);

            var srcScan0 = bmbo.Scan0;
            var convScan0 = bmdn.Scan0;

            var srcStride = bmbo.Stride;
            var convStride = bmdn.Stride;

            byte* sourcePixels = (byte*)(void*)srcScan0;
            byte* destPixels = (byte*)(void*)convScan0;

            var srcLineIdx = 0;
            var convLineIdx = 0;
            var hmax = src.Height-1;
            var wmax = src.Width-1;
            for (int y = 0; y < hmax; y++)
            {
                // find indexes for source/destination lines

                // use addition, not multiplication?
                srcLineIdx += srcStride;
                convLineIdx += convStride;

                var srcIdx = srcLineIdx;
                for (int x = 0; x < wmax; x++)
                {
                    // index for source pixel (32bbp, rgba format)
                    srcIdx += 4;
                    //var r = pixel[2];
                    //var g = pixel[1];
                    //var b = pixel[0];

                    // could just check directly?
                    //if (Color.FromArgb(r,g,b).GetBrightness() > 0.01f)
                    if (!(sourcePixels[srcIdx] == 0 && sourcePixels[srcIdx + 1] == 0 && sourcePixels[srcIdx + 2] == 0))
                    {
                        // destination byte for pixel (1bpp, ie 8pixels per byte)
                        var idx = convLineIdx + (x >> 3);
                        // mask out pixel bit in destination byte
                        destPixels[idx] |= (byte)(0x80 >> (x & 0x7));
                    }
                }
            }
            src.UnlockBits(bmbo);
            conv.UnlockBits(bmdn);
        } 
```

# c# - 如何防止文本框中的退格键击键？

> ID：15316179
> 
> 赞同：6
> 
> 时间：2013-03-09T21:35:32.263
> 
> 标签：c#, windows-phone-7, windows-phone, keystroke, backspace

我想抑制文本框中的击键。为了抑制除 Backspace 之外的所有击键，我使用以下命令：

```
 private void KeyBox_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
    {
        e.Handled = true;
    } 
```

但是，我只想在按下的键是 Backspace 时抑制击键。我使用以下内容：

```
 if (e.Key == System.Windows.Input.Key.Back)
        {
            e.Handled = true;
        } 
```

但是，这不起作用。选择开始后面的字符仍然被删除。我确实在输出中得到“TRUE”，所以 Back 键被识别。如何防止用户按退格键？（我这样做的原因是在某些情况下我想删除单词而不是字符，所以我需要自己处理后退键）。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-05T16:13:07.533

当您想要抑制击键时，只需设置 e.SuppressKeyPress = true （在 KeyDown 事件中）。例如，使用以下代码防止退格键更改文本框中的文本：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Back)
    {
        e.SuppressKeyPress = true;
    }
} 
```

请注意，如果您在`txtBox1_KeyUp()`处理程序中尝试此操作，它似乎不起作用（因为 KeyDown 已经处理了 TextBox 的事件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T23:46:07.887

在 Silverlight 中，无法处理系统键事件，例如退格。因此，您可以检测到它，但不能手动处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:47:04.237

这要求我们在按键按下事件之前存储文本框的值。不幸的是，退格是在该事件触发之前处理的，因此我们必须在该事件发生之前捕获它，然后我们可以在处理按键事件后再次更新它。

```
 private string textBeforeChange;

    private void TextBox1_OnKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Back)
        {
            e.Handled = true;
            textBox1.Text = textBeforeChange;
        }
    }

    private void TextBox1_OnKeyUp(object sender, KeyEventArgs e)
    {
        textBeforeChange = textBox1.Text;
    }

    private void MainPage_OnLoaded(object sender, RoutedEventArgs e)
    {
        textBox1.AddHandler(TextBox.KeyDownEvent, new KeyEventHandler(TextBox1_OnKeyDown), true);
        textBox1.AddHandler(TextBox.KeyUpEvent, new KeyEventHandler(TextBox1_OnKeyUp), true);
        textBox1.AddHandler(TextBox.ManipulationStartedEvent, new EventHandler<ManipulationStartedEventArgs>(TextBox1_OnManipulationStarted), true);
    }

    private void TextBox1_OnManipulationStarted(object sender, ManipulationStartedEventArgs e)
    {
        textBeforeChange = textBox1.Text;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T08:13:09.267

确实，没有简单的方法来处理这种情况，但这是可能的。

当我们在 KeyDown、TextChanged 和 KeyUp 事件之间跳转时，您需要在类中创建一些成员变量来存储输入文本的状态、光标位置和后退键按下状态。

代码应如下所示：

```
 string m_TextBeforeTheChange;
    int m_CursorPosition = 0;
    bool m_BackPressed = false;

    private void KeyBox_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
    {
        m_TextBeforeTheChange = KeyBox.Text;
        m_BackPressed = (e.Key.Equals(System.Windows.Input.Key.Back)) ? true : false;
    }

    private void KeyBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (m_BackPressed)
        {
            m_CursorPosition = KeyBox.SelectionStart;
            KeyBox.Text = m_TextBeforeTheChange;
        }
    }

    private void KeyBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
    {
        KeyBox.SelectionStart = (m_BackPressed) ? m_CursorPosition + 1 : KeyBox.SelectionStart;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T08:47:45.450

```
 string oldText = "";
    private void testTextBlock_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (testTextBlock.Text.Length < oldText.Length)
        {
            testTextBlock.Text = oldText;
            testTextBlock.SelectionStart = oldText.Length;
        }
        else
        {
            oldText = testTextBlock.Text;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T05:11:25.033

这就是我想出的删除上一个（`Ctrl``Backspace`）和下一个单词（`Ctrl``Delete`），处理多个后续空白字符（0x09、0x20、0xA0）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace DeleteWord
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            // Tab, space, line feed
            char[] whitespace = {'\x09', '\x20', '\xA0'};
            string text = textBox1.Text;
            int start = textBox1.SelectionStart;

            if ((e.KeyCode == Keys.Back || e.KeyCode == Keys.Delete) && textBox1.SelectionLength > 0)
            {
                e.SuppressKeyPress = true;
                textBox1.Text = text.Substring(0, start) + text.Substring(start + textBox1.SelectionLength);
                textBox1.SelectionStart = start;
                return;
            }

            else if (e.KeyCode == Keys.Back && e.Control)
            {
                e.SuppressKeyPress = true;

                if (start == 0) return;

                int pos = Math.Max(text.LastIndexOfAny(whitespace, start - 1), 0);

                while (pos > 0)
                {
                    if (!whitespace.Contains(text[pos]))
                    {
                        pos++;
                        break;
                    }
                    pos--;
                }

                textBox1.Text = text.Substring(0, pos) + text.Substring(start);
                textBox1.SelectionStart = pos;
            }
            else if (e.KeyCode == Keys.Delete && e.Control)
            {
                e.SuppressKeyPress = true;

                int last = text.Length - 1;

                int pos = text.IndexOfAny(whitespace, start);
                if (pos == -1) pos = last + 1;

                while (pos <= last)
                {
                    if (!whitespace.Contains(text[pos])) break;
                    pos++;
                }

                textBox1.Text = text.Substring(0, start) + text.Substring(pos);
                textBox1.SelectionStart = start;
            }
        }

        protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            if (keyData == Keys.Tab)
            {
                textBox1.Paste("\t");
                return true;
            }
            else if (keyData == (Keys.Shift | Keys.Tab))
            {
                textBox1.Paste("\xA0");
                return true;
            }
            return base.ProcessCmdKey(ref msg, keyData);
        }

    }
} 
```

感谢 Huy Nguyen `e.SuppressKeyPress = true;`！

如果有选择，无论修饰键如何， Delete 和 Backspace 都会删除选择（你不会得到那个丑陋的矩形字符来持有`Ctrl`）

似乎也适用于类似的字符`，尽管它可能没有多大意义（这个字符不是一个完整的词吗？）`

 `* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-27T12:07:34.463

这是一个对我有用的简单解决方案。

```
private void MyTxtbox_Keypress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == '\b')
    {
        e.Handled = true;

        return;
    }
} 
````

# uitableview - 出现键盘时 UITableView 不滚动

> ID：15316185
> 
> 赞同：0
> 
> 时间：2013-03-09T21:36:28.053
> 
> 标签：uitableview, ios6, keyboard, uitextfield

我在这里尝试了 Apple 的示例：

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

但是，它似乎不起作用，所以我显然在此过程中遗漏了一些东西，只是不知道是什么。

我有一个 ViewController.h 包含：

```
@interface PreferencesViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, defaultLocationChoice, UITextFieldDelegate, UIScrollViewDelegate>

@property (nonatomic, retain) NSString *defaultLocation;
@property (nonatomic, retain) NSString *defaultTestType;
@property (nonatomic, assign) id <defaultLocationChoice> locationDelegate;
@property (nonatomic, weak) IBOutlet UITableView *tableView;
@property (nonatomic, strong) IBOutlet UITextField *locationnameTextField;
@property (nonatomic, strong) IBOutlet UITextField *locationaddressTextField;
@property (strong, nonatomic) IBOutlet UITableView *scrollView;
@property (nonatomic, strong) IBOutlet UITextField *activeField; 
```

.m 文件中都有 Synthesized。

我在 ViewController.m 中有 Apple 代码

```
- (void)viewDidLoad
{
    NSUserDefaults *sharedPref = [NSUserDefaults standardUserDefaults];
    defaultLocation =[sharedPref stringForKey:@"defaultLocation"];
    defaultTestType =[sharedPref stringForKey:@"defaultTestType"];

    [self registerForKeyboardNotifications];

    self.navigationItem.title = @"Preferences";

    [super viewDidLoad];

}

- (void)registerForKeyboardNotifications

{

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:)
 name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.

- (void)keyboardWasShown:(NSNotification*)aNotification

{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible

    // Your application might not need or want this behavior.

    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;

    if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {

        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);

        [scrollView setContentOffset:scrollPoint animated:YES];
    } 
}

// Called when the UIKeyboardWillHideNotification is sent

- (void)keyboardWillBeHidden:(NSNotification*)aNotification

{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField

{
    activeField = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField

{
    activeField = nil;
} 
```

包含 TextFields 的单元格在 CellForRowAtIndexPath 中处理如下（未显示完整代码）：

```
 case 2:
            switch (indexPath.row) {
                case 0:

                    prefCell.textLabel.text = @"";
                    prefCell.accessoryType = UITableViewCellAccessoryNone;
                    prefCell.highlighted = NO;
                    locationnameTextField.frame = CGRectMake(5, 12, 300, 30);
                    locationnameTextField.font = [UIFont systemFontOfSize:13.0f];
                    locationnameTextField.placeholder = @"Enter location name i.e. New York, NY";
                    locationnameTextField.delegate = self;
                    locationnameTextField.returnKeyType = UIReturnKeyDone;
                    [prefCell.contentView addSubview:locationnameTextField];

                    break;
                case 1:
                    prefCell.textLabel.text = @"";
                    prefCell.accessoryType = UITableViewCellAccessoryNone;

                    locationaddressTextField.frame = CGRectMake(5, 12, 300, 30);
                     locationaddressTextField.font = [UIFont systemFontOfSize:13.0f];
                    locationaddressTextField.placeholder = @"Enter location address i.e. mcs.newyork.com";
                    locationaddressTextField.clearsOnBeginEditing = YES;
                    locationaddressTextField.delegate = self;
                    locationaddressTextField.returnKeyType = UIReturnKeyDone;

                    [prefCell.contentView addSubview:locationaddressTextField];

                    break;
            } 
```

在运行应用程序时，键盘弹出，没有任何反应。

Apple 的示例是针对 View 的，因此我在上面更改的唯一代码`self.view.frame`无效`self.tableView.frame`。

我添加了 ScrollView 作为附加项，因为我没有。我的其他带有嵌入式 TableView 的 ViewController 不需要 ScrollView 来滚动。

层次结构如下：

![在此处输入图像描述](../Images/7e0d36df6473abd94dcbc2912cdb72b3.png)

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:02:08.527

您必须执行以下操作：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
 [yourTextField resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T19:06:55.223

当我注意到文本字段的超级视图时，我正在为同样的问题挠头。如果我是对的，那么您在 tableview 的单元格内有文本字段。

现在，在您的`keyboardWasShown:`方法中，您正在检查活动文本字段是否隐藏在键盘下，如下所示：

```
if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
    [scrollView setContentOffset:scrollPoint animated:YES];
} 
```

在您的情况下，`if`条件永远不会成立。由于活动文本字段的超级视图是一个单元格，因此`activeField.frame.origin`将返回一个引用 UITableViewCell 的点，而不是引用您的 UIView。

因此，您需要做的是检查**包含**活动文本字段的单元格是否隐藏在键盘下，如下所示：

```
CGRect aRect = self.view.frame;
aRect.size.height -= kbSize.height;
if (!CGRectContainsPoint(aRect, cellForActiveField.frame.origin) ) {
    CGPoint scrollPoint = CGPointMake(0.0, cellForActiveField.frame.origin.y-kbSize.height);
    [scrollView setContentOffset:scrollPoint animated:YES];
} 
```

要找到包含活动文本字段的单元格，您需要`tag`在方法中设置文本字段的属性，`tableView:cellForIndexPath:`然后检查方法中的标记`textFieldDidBeginEditing:`。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/5265559/get-uitableview-to-scroll-to-the-selected-uitextfield-and-avoid-being-hidden-by)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T20:36:49.983

自从找到它，我使用[TPKeyboardAvoiding](http://icodetricks.wordpress.com/2014/02/12/uitextfields-and-keyboard-issues/)

它工作得很好，而且很容易设置：

1.  将 UIScrollView 添加到视图控制器的 xib
2.  将滚动视图的类设置为 TPKeyboardAvoidingScrollView（仍在 xib 中，通过身份检查器）
3.  将所有控件放在该滚动视图中

# android - android客户端无法识别来自服务器的JSON gcm消息

> ID：15316186
> 
> 赞同：1
> 
> 时间：2013-03-09T21:36:33.290
> 
> 标签：android, android-intent, push-notification, google-cloud-messaging

我正在尝试发送和接收 JSON GCM 消息，但在客户端它似乎总是以 UTF8 的形式出现。

```
protected HttpURLConnection post(String url, String contentType, String body)
throws IOException {
    Print.logInfo("In HttpURLConnection: " + contentType + body);
    byte[] bytes = body.getBytes();
    HttpURLConnection conn = getConnection(url);
    conn.setDoOutput(true);
    conn.setUseCaches(false);
    conn.setFixedLengthStreamingMode(bytes.length);
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type", contentType);
    conn.setRequestProperty("Authorization", "key=" + key);
    OutputStream out = conn.getOutputStream();
    out.write(bytes);
    out.close();
    return conn;
} 
```

在服务器上，UTF8 消息是： 在 HttpURLConnection: application/x-www-form-urlencoded;charset=UTF-8registration_id=APA91...&delay_while_idle=0&collapse_key=Test&time_to_live=2419200&data.Data1=Value+1&data.Data2=Value+2&data .Data3=值+3

并且 JSON 消息是：在 HttpURLConnection: application/json{"delay_while_idle":false,"collapse_key":"Test","data":{"Data1":"Value 1","Data2":"Value 2", "Data3":"Value 3"},"time_to_live":2419200,"registration_ids":["APA91..."]}

多播结果 MulticastResult(multicast_id=5036...,total=1,success=1,failure=0,canonical_ids=0,results: [[ messageId=0:1362.. ]]:

两条消息都在客户端成功接收，但我无法识别 json 格式。

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String inAction = intent.getAction();
    // check to see if it is a message
    if (inAction.equals("com.google.android.c2dm.intent.RECEIVE")) {
        // if your key/value is a JSON string, extract and parse it using JSONObject
        String json_info = intent.getExtras().getString("data");
        if (json_info != null) {
            try {
                JSONObject jsonObj = new JSONObject(json_info);
                payload = jsonObj.get("Data1")  + "\n"
                        + jsonObj.get("Data2")+ "\n"
                        + jsonObj.get("Data3");
                }
            catch (JSONException e) {
                // do nothing
                return;
            }
        }
        else {
            payload = intent.getStringExtra("Data1")  + "\n"
                    + intent.getStringExtra("Data2")+ "\n"
                    + intent.getStringExtra("Data3");
            }
    }
} 
```

在这两种情况下 json_info 都是空的。我在运行 apache/tomcat 的服务器上使用 java servlet。

请帮忙。非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T00:03:22.737

JSON 对象仅用于您的服务器与 GCM 服务器的通信。该应用程序永远不会获取 JSON 对象。通知的数据作为键/值对传递。如果出于某种原因想要传递 JSON 有效负载，则应将其编码为字符串并将该字符串作为`data`JSON 对象内的键/值对之一的值传递。然后，您必须从意图中的附加内容中读取该值并解析 JSON。

> onMessage(Context context, Intent intent)：当你的服务器向 GCM 发送消息时调用，GCM 将消息传递给设备。如果消息具有有效负载，则其内容可用作意图中的附加内容。

实际上，这句话更相关：

> 数据
> 
> 一个 JSON 对象，其字段表示消息有效负载数据的键值对。如果存在，有效负载数据将作为应用程序数据包含在 Intent 中，键是额外的名称。例如，"data":{"score":"3x1"} 将导致一个意图额外命名的分数，其值为字符串 3x1。键/值对的数量没有限制，但消息的总大小（4kb）有限制。这些值可以是任何 JSON 对象，但我们建议使用字符串，因为无论如何这些值都会在 GCM 服务器中转换为字符串。如果要包含对象或其他非字符串数据类型（如整数或布尔值），则必须自己转换为字符串。另请注意，密钥不能是保留字（from 或任何以 google. 开头的单词）。让事情稍微复杂一点的是，在有效载荷数据中技术上允许使用一些保留字（例如 collapse_key）。但是，如果请求中还包含该单词，则请求中的值将覆盖有效负载数据中的值。因此，即使在技术上允许的情况下，也不建议使用在此表中定义为字段名称的词。选修的。即使在技术上允许的情况下。选修的。即使在技术上允许的情况下。选修的。

# javascript - Javascript - 在函数中使用变量，在函数内

> ID：15316197
> 
> 赞同：0
> 
> 时间：2013-03-09T21:37:37.187
> 
> 标签：javascript, variables

这段代码困扰了我一整天。假设 ledCount = 9，代码通过 ID 获取元素没有任何问题，但是由于它必须绑定一个单独的函数 onClick，并且由于变量 i 是本地变量，因此 writeLED 函数总是获取第一个参数 10（即 max i+1)，但它需要获取当前的 i+1，就像 getElementBy id i+1 一样。任何人都可以解决这个难题？

```
function showLED(ledCount){
for(var i = 0;i<=(ledCount-1);i++){
    if(color[i] == 0){
        document.getElementById('buttonLED'+(i+1)).onclick = function(){writeLED((i+1),1); } ;
        document.getElementById('buttonLED'+(i+1)).value="light is on";
    }else{
        document.getElementById('buttonLED'+(i+1)).onclick = function(){writeLED((i+1),0); } ;
        document.getElementById('buttonLED'+(i+1)).value="light is off";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:40:26.397

您需要将其包装在一个自执行函数中以创建一个新范围，您可以在其中保留递增函数的当前值。

你可以这样内联：

```
document.getElementById('buttonLED'+(i+1)).onclick = function(loopincrement){   
    return function(){writeLED((loopincrement+1),1); } ;

}(i) 
```

或作为这样的拉出功能：

```
function writeLEDInNewScope(inc){
    return function(){ writeLED(inc,1)};
}

document.getElementById('buttonLED'+(i+1)).onclick = writeLEDinNewScope(i+1); 
```

外部函数将为内部 onclick 函数保留 i 值的当前值。它立即执行并返回要绑定到 onclick 属性的内部函数。它将保持对`loopincrement`变量的引用，这不会受到未来循环迭代的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:43:14.257

这是一个[臭名昭著的for循环问题](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)。你必须像这样重写你的代码：

```
function callback(x) {
    return function() { writeLED(x, 1); };
}

function showLED(ledCount) {
    for (var i = 0; i <= (ledCount - 1); i++)(function(i) {
        if (color[i] == 0) {
            document.getElementById('buttonLED' + (i + 1)).onclick = callback(i + 1);
            document.getElementById('buttonLED' + (i + 1)).value = "light is on";
        } else {
            document.getElementById('buttonLED' + (i + 1)).onclick = callback(i + 1);
            document.getElementById('buttonLED' + (i + 1)).value = "light is off";
        }
    })(i);
} 
```

# c# - 使用数据集行

> ID：15316199
> 
> 赞同：1
> 
> 时间：2013-03-09T21:37:46.937
> 
> 标签：c#, dataset, xamarin.android, rows, loops

我有一个从填充列表视图的网络服务中获得的数据集。到目前为止，我一直在这样做：

```
foreach (DataRow row in dsGetAvailUsers.Tables[0].Rows) 
{
var item = new User();
item.sUserId = row ["sUserId"].ToString ();
item.UserDesc = row ["UserDesc"].ToString ();
item.UserIMG = row ["UserIMG"].ToString ();

listUsers.Add(item);
} 
```

但是那个 vas 因为我知道每个字段的名称，因为它是一个具有固定数据和字段名称的列表。

但是现在我得到的列表曾经每个项目有 10 个字段，曾经有 12 个，等等。我将如何“动态地”迭代行，然后如何在我的自定义适配器中处理它们（未知的字段名称和字段计数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:50:08.803

做这个

```
foreach (DataRow row in dsGetAvailUsers.Tables[0].Rows) 
{
var item = new User();

 for (int j = 0; j < dsGetAvailUsers.Tables[0].Columns.Count; j++)
 {
   if(dsGetAvailUsers.Tables[0].Columns[j].ColumnName == "sUserId")
      item.sUserId = row ["sUserId"].ToString ();
   else if(dsGetAvailUsers.Tables[0].Columns[j].ColumnName == "UserDesc")
      item.UserDesc= row ["UserDesc"].ToString ();
   .....
 }

listUsers.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:52:29.933

解决这一切的代码......

```
foreach (DataRow row in dsGetAvailUsers.Tables[0].Rows)
{
    var item = new Dokument();
    int i = 0;
    item.Label = new Hashtable();
    item.array = new Hashtable();
    foreach (DataColumn _col in dsGetAvailUsers.Tables[0].Columns) 
    {
        item.Label.Add(i, _col.ColumnName);
        item.array.Add(_col.ColumnName,row[i].ToString());
        ++i;
    }
    listDokument.Add(item);
    RunOnUiThread (() => {DokumentAdapter.Add (item); });
} 
```

# vba - 堆栈溢出 6 vba

> ID：15316203
> 
> 赞同：0
> 
> 时间：2013-03-09T21:38:09.607
> 
> 标签：vba, stack, overflow

我使用从各个站点收集的代码来读取每个记录都有分隔符的平面文件。该代码运行良好，除非文件中的记录数超过 505 条，否则会出现运行时错误 6 错误。你能帮忙解决这个问题吗？我没有 VBA 背景，但只是使用其他人的问题将这段代码放在一个应用程序中

```
Sub Posting()

Dim RowNdx As Long
Dim ColNdx As Integer
Dim TempVal As Variant
Dim WholeLine As String
Dim Pos As Integer
Dim NextPos As Integer
Dim SaveColNdx As Integer
Dim FName As String

Range("A2").Select
   Range(Selection, Selection.End(xlDown)).Select
   Range(Selection, Selection.End(xlToRight)).Select
   Application.CutCopyMode = False
   Selection.ClearContents
   Range("A1").Select

Application.ScreenUpdating = False
'On Error GoTo EndMacro:

Sep = "@"

FName = Application.GetOpenFilename

If sFileName = "False" Then Exit Sub

Cells(1, 8).Value = Mid(FName, Len(FName) - 8, 4)

SaveColNdx = ActiveCell.Column
RowNdx = ActiveCell.Row

Open FName For Input Access Read As #1

While Not EOF(1)
    Line Input #1, WholeLine
     If Right(WholeLine, 1) <> Sep Then
         WholeLine = WholeLine & Sep
    End If
    ColNdx = SaveColNdx
    Pos = 1
    NextPos = InStr(Pos, WholeLine, Sep)
     While NextPos >= 1
        TempVal = Mid(WholeLine, Pos, NextPos - Pos)
        Cells(ColNdx, RowNdx).Value = TempVal
        Pos = NextPos + 1
        ColNdx = ColNdx + 1
        NextPos = InStr(Pos, WholeLine, Sep)
    Wend
RowNdx = RowNdx + 1
Wend 
```

运行时错误 6 溢出显示在`NextPos = InStr(Pos, WholeLine, Sep)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:45:14.060

您声明`NextPos`为整数，允许将 32768 向上编号。如果`InStr(`返回的值高于此值，`Overflow`则会导致错误。

只需将数据类型更改为`Long`，您的问题就会得到解决！

我还认为您正在混淆参数 `Cells(ColNdx, RowNdx)`- 请注意，`Cells`期望行作为第一个参数，列作为第二个参数！

顺便说一句：您也可以使用内置`Split`函数，而不是手动拆分文本：

```
Dim varSplitted as Variant

...
While Not EOF(1)
    Line Input #1, WholeLine
    varSplitted = Split(WholeLine, Sep)
    Range(RowNdx,SaveColNdx).Resize(, UBound(varSplitted, 1)+1) = varSplitted
    RowNdx = RowNdx + 1
Wend 
```

# zeroclipboard - ZeroClipboard 在加载的 js 文件中不起作用

> ID：15316211
> 
> 赞同：3
> 
> 时间：2013-03-09T21:38:35.773
> 
> 标签：zeroclipboard

如果我在 HTML 页面中放置一个脚本标签，它会工作，但是当我加载包含 ZeroClipboard 库的外部页面时，我无法让它工作。该对象被创建，并且位于正确的元素上，但它不会发出任何事件，也不会复制剪贴板文本。例子：

```
var ZeroClipboard = defineZClip(); // This is a scoped function that has the zclip library in it

window.onload = function () {

    console.log("doc loaded"); // This fires

    var button = document.getElementById('z-button');
    var clip = new ZeroClipboard(button, {
        moviePath: 'ZeroClipboard.swf'
    });
    clip.on('load', function () {
        console.log("loaded"); // This never fires
    })

}; 
```

我可以通过动态插入一个脚本标签来解决这个问题，其中包含初始化 ZeroClipboard 的脚本标签的内容，但如果我从我的脚本中初始化它，它就不起作用。像这样：

```
var ZeroClipboard = defineZClip();
window.ZeroClipboard = ZeroClipboard;

window.onZeroLoad = function (clip) {
    console.log("zero loaded"); // This fires
};

var scriptText = 'window.onload = function () { console.log("window loaded");var button = document.getElementById("z-button");'
            +' var clip = new ZeroClipboard(button, {moviePath: "ZeroClipboard.swf"});'
            +' clip.on("load", window.onZeroLoad );'
            +'};'
var script = document.createElement('script');
script.innerHTML = scriptText;
document.head.appendChild(script); 
```

但是，这提供了一些明显的缺点。比如......它有点违背了让所有东西都被限定的目的，因为现在 ZeroClipboard 必须可以通过窗口访问。再加上它更难阅读等等。

# xcode - 在 Xcode 3.2.3 的 Interface Builder 中向“对象”添加出口

> ID：15316212
> 
> 赞同：2
> 
> 时间：2013-03-09T21:38:42.973
> 
> 标签：xcode, interface-builder, xcode3.2

我已经看过一些关于制作 iPhone 应用程序的教程，我正在尝试将插座添加到 Interface Builder 菜单中的“对象”选择中。但是我在教程中注意到，当在对象上打开检查器并选择最右侧的选项卡时，除了可以添加出口的类标识选择和接口生成器标识之外，还有两个额外的对话框。我找不到那些。当我创建我的项目时，我选择了一个基于窗口的 iPhone 项目。有谁知道为什么我无法访问该插座工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:15:37.920

看起来您使用的是旧版本的 xCode。我建议您升级到最新版本 4.6。

在旧版本上，您需要选择模板“基于视图的应用程序”而不是“基于窗口的应用程序”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:15:46.903

我不知道本教程试图展示什么，但正确的方法是在代码中定义一个子类，将插座添加到该子类，将一个 NSObject 拖到您的 NIB 中，并将其在身份检查器中的类设置为您的子类. 因为，否则，在加载 NIB 时连接插座如何真正起作用？NIB 加载机制实际上会实例化一个 NSObject，它没有这样的出口，然后尝试连接它，这将失败。

如果你真的想说服 Interface Builder NSObject 有一个它确实没有的出口，我认为你需要使用 Library 面板。选择顶部的 Classes 选项卡，然后选择 NSObject。您也可以通过单击身份检查器中类名旁边的向右箭头来到达那里。

然后，在面板的下半部分，您可以从弹出窗口中选择 Outlets，然后单击“+”添加一个。请注意，这告诉 Interface Builder 该 NIB 中的所有 NSObjects 都有该插座。这是每个类的事情，而不是每个对象的事情。

# php - 管理面板上的简单页面 - Wordpress

> ID：15316213
> 
> 赞同：0
> 
> 时间：2013-03-09T21:39:15.393
> 
> 标签：php, wordpress

我需要创建一个简单的页面并将其显示在管理面板上。我的页面非常简单。我只想从数据库中写出元素列表。

我知道如何从数据库中获取数据并使用模板创建页面。但我不知道如何创建将在管理面板上且需要管理员身份验证的页面。

可以在不创建插件的情况下做到这一点吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:16:38.683

我建议创建一个插件，因为将您的代码拉入并不难。我是在我的手机上，我很抱歉没有彻底。尽管将其集成到主题中也不错。

这是有关如何将管理页面添加到仪表板的示例/文档的链接。 [http://codex.wordpress.org/Administration_Menus](http://codex.wordpress.org/Administration_Menus)

# canvas - 在画布上检测 keydown 时遇到问题

> ID：15316216
> 
> 赞同：0
> 
> 时间：2013-03-09T21:39:59.677
> 
> 标签：canvas, keydown

我无法让我的 keydown 事件侦听器检测键输入。

我试过了：

*   向画布添加选项卡索引
*   鼠标悬停在画布上移动时添加焦点的鼠标悬停侦听器
*   将 canvas.focus() 添加到 keydown 例程
*   其他各种可能与它无关的东西

据我所见，我的代码看起来像我在网上各个地方找到的示例，所以我不知道问题所在，也许很简单。

如果相关的话，控制台也会说“未定义 evt”。

我将把整个代码粘贴在这里，因为我不知道什么是相关的，什么不是，但事件监听器就在底部。其余的创建了我的小三角哥，并让他面对鼠标指针，所以有一些事件正在监听，只是没有按下键。

谢谢你的尽心帮助！

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>

<style>
body{
margin:0;
}

canvas {
border: solid 1px black;
position:relative;
}

#holder {
display:block;
margin: 100px auto 0 auto;
width:800px;
height:600px;
}
</style>

</head>

<body>
<div id = "holder">
<canvas id="canvas" width="800" height="600" tabindex='1'></canvas>
</div>

<script>
(function(window) {

// define variables
var canvas, c;
var WIDTH;
var HEIGHT;
var INTERVAL = 20; 
var mouseX, mouseY;
var mousePos;

// set up canvas
canvas = document.getElementById("canvas");
c = canvas.getContext("2d");

// initial canvas background 
 c.beginPath();
 c.fillStyle = "rgb(45,133,222)";
 c.rect(0,0,800,600);
 c.fill();
 c.closePath();

 // Player coords and initial location
 function Player () {
 this.x = 400;
 this.y = 300;
 this.w = 20;
 this.h = 20;
 this.xcenter = 400;
 this.ycenter = 300;
 this.angle = 0.9;
 this.fill = '#000000';
 } 
 var Player1 = new Player();

 // game loop interval
 setInterval(mainDraw, INTERVAL);

 // clear canvas function
  function clear(c) {
  c.clearRect(0, 0, WIDTH, HEIGHT);
}

 // drawing function / game loop
  function mainDraw(canvas, message) {

// get the angle between the player coords and the mouse coords  
deltaX = mouseX - Player1.x;
deltaY = mouseY - Player1.y;
var newAngle = Math.atan(deltaY / deltaX);

 // clear the canvas and draw the background again
 clear(c);
 c.beginPath();
 c.fillStyle = "rgb(45,133,22)";
 c.rect(0,0,800,600);
 c.fill();
 c.closePath();

 // draw the player with the new angle so that it faces the mouse
 c.beginPath();
 c.save();
 c.translate(Player1.x,Player1.y);
 if (deltaX < 0) {
 c.rotate(newAngle);
 }
 else {
 c.rotate(newAngle);
 c.scale(-1,1);
 }
 c.translate(-Player1.x,-Player1.y);
 c.fillStyle = "#000000";
 c.moveTo(Player1.x - 15, Player1.y);
 c.lineTo(Player1.x + 15, Player1.y + 10);
 c.lineTo(Player1.x + 15, Player1.y - 10);
 c.lineTo(Player1.x - 15, Player1.y);
 c.fill();
 c.restore();
 c.closePath();

 }

// focus on the canvas on mouseover to detect key input
var handlefocus=function(e){ 
 if(e.type=='mouseover') 
 { 
 canvas.focus(); return false;
 } 
 else if (e.type=='mouseout')
 { 
 canvas.blur(); return false; 
 } 
 return true; 
}; 
canvas.addEventListener('mouseover',handlefocus,true);  

 // Detect mouse movement and assign to mouseX, mouseY
function mouseMove(e)
{
    if(e.offsetX) {
        mouseX = e.offsetX;
        mouseY = e.offsetY;
    }
    else if(e.layerX) {
        mouseX = e.layerX;
        mouseY = e.layerY;
    }
}
canvas.addEventListener('mousemove', mouseMove, true);

// Detect key press for movement
function playerMove(evt)
canvas.focus()
alert('keycode: ' + evt.keyCode);
{
 if ( evt.keyCode == 87 ) {
   Player1.y = Player1.y + 1;
 }

 if ( evt.keyCode == 83 ) {
    Player1.y -= 1;
 }

 if ( evt.keyCode == 65 ) {
    Player1.x -= 1;
 }

 if ( evt.keyCode == 68 ) {
    Player1.x += 1;
 }
 return false;
}
canvas.addEventListener('keydown', playerMove, true);

 })(window);

</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:06:19.940

**你非常接近！**

你不小心把*canvas.addEventListener('keydown', playerMove, true);* 在 playerMove 函数内部，因此永远不会设置事件侦听器。

此外，您缺少一些大括号，您需要触发 onload 事件来运行您的函数（我在您的 body 标记中放置了一个 init() 触发器）。

这是您的代码——稍作修改：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>

<style>
body{
margin:0;
}

canvas {
border: solid 1px black;
position:relative;
}

#holder {
display:block;
margin: 100px auto 0 auto;
width:800px;
height:600px;
}
</style>

<script>
function init() {
console.log("start");

// define variables
var canvas, c;
var WIDTH;
var HEIGHT;
var INTERVAL = 20; 
var mouseX, mouseY;
var mousePos;

// set up canvas
canvas = document.getElementById("canvas");
c = canvas.getContext("2d");

// initial canvas background 
 c.beginPath();
 c.fillStyle = "rgb(45,133,222)";
 c.rect(0,0,800,600);
 c.fill();
 c.closePath();

 // Player coords and initial location
 function Player () {
 this.x = 400;
 this.y = 300;
 this.w = 20;
 this.h = 20;
 this.xcenter = 400;
 this.ycenter = 300;
 this.angle = 0.9;
 this.fill = '#000000';
 } 
 var Player1 = new Player();

 // game loop interval
 setInterval(mainDraw, INTERVAL);

 // clear canvas function
  function clear(c) {
  c.clearRect(0, 0, WIDTH, HEIGHT);
}

 // drawing function / game loop
  function mainDraw(canvas, message) {

// get the angle between the player coords and the mouse coords  
deltaX = mouseX - Player1.x;
deltaY = mouseY - Player1.y;
var newAngle = Math.atan(deltaY / deltaX);

 // clear the canvas and draw the background again
 clear(c);
 c.beginPath();
 c.fillStyle = "rgb(45,133,22)";
 c.rect(0,0,800,600);
 c.fill();
 c.closePath();

 // draw the player with the new angle so that it faces the mouse
 c.beginPath();
 c.save();
 c.translate(Player1.x,Player1.y);
 if (deltaX < 0) {
 c.rotate(newAngle);
 }
 else {
 c.rotate(newAngle);
 c.scale(-1,1);
 }
 c.translate(-Player1.x,-Player1.y);
 c.fillStyle = "#000000";
 c.moveTo(Player1.x - 15, Player1.y);
 c.lineTo(Player1.x + 15, Player1.y + 10);
 c.lineTo(Player1.x + 15, Player1.y - 10);
 c.lineTo(Player1.x - 15, Player1.y);
 c.fill();
 c.restore();
 c.closePath();

 }

// focus on the canvas on mouseover to detect key input
var handlefocus=function(e){ 
 if(e.type=='mouseover') 
 { 
 canvas.focus(); return false;
 } 
 else if (e.type=='mouseout')
 { 
 canvas.blur(); return false; 
 } 
 return true; 
}; 
canvas.addEventListener('mouseover',handlefocus,true);  

 // Detect mouse movement and assign to mouseX, mouseY
function mouseMove(e)
{
    if(e.offsetX) {
        mouseX = e.offsetX;
        mouseY = e.offsetY;
    }
    else if(e.layerX) {
        mouseX = e.layerX;
        mouseY = e.layerY;
    }
}
canvas.addEventListener('mousemove', mouseMove, true);

// Detect key press for movement
function playerMove(evt){
canvas.focus()
alert('keycode: ' + evt.keyCode);
{
 if ( evt.keyCode == 87 ) {
   Player1.y = Player1.y + 1;
 }

 if ( evt.keyCode == 83 ) {
    Player1.y -= 1;
 }

 if ( evt.keyCode == 65 ) {
    Player1.x -= 1;
 }

 if ( evt.keyCode == 68 ) {
    Player1.x += 1;
 }
 return false;
}

}
canvas.addEventListener('keydown', playerMove, true);

}
</script>

</head>

<body onload="init()">
<div id = "holder">
<canvas id="canvas" width="800" height="600" tabindex='1'></canvas>
</div>
</body>

</html> 
```

# jquery - 从下向上滑动

> ID：15316222
> 
> 赞同：1
> 
> 时间：2013-03-09T21:40:30.150
> 
> 标签：jquery

我得到了一个`<div>`我想从 Down 到 Up 而不是 Up to Down 的滑动。

当我尝试时：`$('#div_slide').slideDown(1000);`甚至`<div>`没有显示。当我做：

```
$('#div_slide').slideUp(1000); 
```

它确实有效，但从最顶部滑到最底部，我希望它是相反的，从下到上打开，从底部到顶部。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:45:14.153

CSS

```
 .block {
    position: relative;
    width: 320px;
    height: 260px;
    display: block;
    background: pink;
    margin: 0 auto;
    overflow: hidden;
}
.slidemeup{
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: none;
    width: 260px;
    height: 40px;
    padding: 20px;
} 
```

HTML

```
 <div class="block">
    <div class="slidemeup">
    this will slidedown in revwrse direction</div>
    </div> 
```

JS

```
jQuery(".block").hover(
    function(){
        jQuery(".slidemeup").slideDown();
    },
    function(){
    jQuery(".slidemeup").slideUp('fast');
}); 
```

在这里查看这个工作[jsfiddle](http://jsfiddle.net/eGA6B/)

# javascript - 从电子邮件中仅过滤掉指向 YouTube 视频的链接

> ID：15316226
> 
> 赞同：0
> 
> 时间：2013-03-09T21:41:15.240
> 
> 标签：javascript, google-apps-script

我正在使用 Google Scripts 来获取电子邮件的正文。我试图让它只保存包含在普通 YouTube 电子邮件中的链接，它会通知您来自新用户的上传。我想，使用 JavaScript 仅保存单击电子邮件中包含的图像时所遵循的链接。下面是电子邮件部分外观的示例：

![电子邮件样本](../Images/5b5ccdb32473e93263b9b51939226ead.png)

邮件内容是这样的：

```
 <div>
<table width="620" cellspacing="0" cellpadding="0" border="0" align="center"><tr><td bgcolor="#F0F0F0">
<table width="578" cellspacing="0" cellpadding="0" border="0" align="center">
<tr>
<td height="16"></td>
</tr>
<tr>
<td align="center" valign="top">
<img src="http://s.ytimg.com/yt/img/email/digest/email_header.png">
</td>
</tr>
<tr>
<td height="16"></td>
</tr>
<tr>
<td align="left" bgcolor="#FFFFFF">
<div style="border-style:solid;border-width:1px;border-color:#cccccc">
<table width="578" cellspacing="0" cellpadding="0" border="0" align="center">
<tr>
<td height="22" colspan="3"></td>
</tr>
<tr>
<td width="40"></td>
<td width="498">
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#FFFFFF" align="left" width="50">
<img src="https://i.ytimg.com/i/N5jZlcpSP00e_zShDw9EfQ/1.jpg" height="50" width="50">
</td>
<td width="16"></td>
<td>
<div style="font-family:arial,Arial,sans-serif;font-size:18px;color:#333333;line-height:24px" height="59">
FatalDubstepHD has uploaded <b>Empressto - No Love [Dubstep]</b>.
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0">
<tr><td height="22"></td></tr>
</table>
<div style="border-bottom:1px solid #e1e1e1"></div>
<table cellspacing="0" cellpadding="0" border="0">
<tr><td height="22"></td></tr>
</table>
<table cellspacing="0" cellpadding="0" border="0" style="width:480px;margin:0 9px">
<tr>
<td>
<a href="http://www.youtube.com/watch?v=zTYri0ei45Q&amp;feature=em-uploademail" style="text-decoration:none;display:block" class="nonplayable" target="_blank">
<img src="http://i2.ytimg.com/vi/zTYri0ei45Q/hqdefault.jpg" height="360" width="480" border="0">
</a>
</td>
</tr>
<tr><td height="16"></td>
</tr>
<tr>
<td width="480">
<a href="http://www.youtube.com/watch?v=zTYri0ei45Q&amp;feature=em-uploademail" style="text-decoration:none" target="_blank">
<div style="font-family:arial,Arial,sans-serif;font-size:15px;color:#333333;line-height:20px;font-weight:bold">
Empressto - No Love [Dubstep]
</div>
</a>
<div style="font-family:arial,Arial,sans-serif;font-size:13px;color:#999999;line-height:20px">
by
<a href="http://www.youtube.com/user/FatalDubstepHD?feature=em-uploademail" style="font-size:13px;color:#999999;line-height:20px;text-decoration:none" target="_blank">FatalDubstepHD</a>
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0">
<tr><td height="16"></td></tr>
</table>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td width="498">
<div style="font-family:arial,Arial,sans-serif;font-size:13px;color:#333333;line-height:20px">
● Free Download<br><a href="https://soundcloud.com/empresstoro/empressto-no-love" target="_blank">https://soundcloud.com/<WBR>empresstoro/empressto-no-love</a><br><br>● Empressto <br><a href="http://www.facebook.com/EmpreSSto" target="_blank">http://www.facebook.com/<WBR>EmpreSSto</a><br><a href="http://www.twitter.com/Empressto" target="_blank">http://www.twitter.com/<WBR>Empressto</a><br><a href="http://www.youtube.com/user/TheOfficialEmpressto" target="_blank">http://www.youtube.com/user/<WBR>TheOfficialEmpressto</a><br><br>● Fatal Dubstep<br><a href="http://www.facebook.com/FatalMusicUK" target="_blank">http://www.facebook.com/<WBR>FatalMusicUK</a><br><a href="http://www.twitter.com/FatalMusicUK" target="_blank">http://www.twitter.com/<WBR>FatalMusicUK</a><br><br>● Owner Of Fatal<br><a href="http://www.twitter.com/Mihalis_Costa" target="_blank">http://www.twitter.com/<WBR>Mihalis_Costa</a><br><br>● Contact Email/Submit Music<br><a href="mailto:fatalmusicsubmission@gmail.com" target="_blank">fatalmusicsubmission@gmail.com</a>
</div>
</td>
</tr>
</table>
</td>
<td width="40"></td>
</tr>
<tr>
<td height="22" colspan="3"></td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td height="16"></td>
</tr>
<tr>
<td align="center">
<table cellspacing="0" cellpadding="0" border="0" align="center">
<tr>
<td width="40"></td>
<td width="498">
<div style="color:#999999;line-height:14px;font-size:11px;font-family:arial,Arial,sans-serif">
You were sent this email because you chose to receive updates about new videos uploaded by <a href="http://www.youtube.com/user/FatalDubstepHD?feature=em-uploademail" style="text-decoration:none;color:#1c62b9" target="_blank">FatalDubstepHD</a>. If you don&#39;t want these updates anymore, you can change your preferences by visiting the <a href="http://www.youtube.com/subscription_manager" style="text-decoration:none;color:#1c62b9" target="_blank">subscription manager</a>.
</div>
</td>
<td width="40"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td height="16"></td>
</tr>
<tr>
<td>
<table cellspacing="0" cellpadding="0" border="0" align="center">
<tr>
<td width="40"></td>
<td width="498">
<div style="color:#999999;font-size:11px;line-height:14px;font-family:arial,Arial,sans-serif">
©2013 YouTube, LLC 901 Cherry Ave, San Bruno, CA 94066
</div>
</td>
<td width="40"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td height="22"></td>
</tr>
</table>
</td></tr></table>
</div> 
```

这里的问题是，我如何从这样的电子邮件中过滤掉 url，而且看起来文本`3D`被添加到 url，这使得 url 无效，所以我还需要从网址。关于我如何做到这一点的任何想法？

编辑：

这是我正在使用的代码，它缺少解析数据：

```
function processInbox() {
  // get all threads in inbox
  var label = GmailApp.getUserLabelByName("Social/YouTube/Dubstep");
  var doneLabel = GmailApp.getUserLabelByName("Social/YouTube/Dubstep (added)");
  var messages = label.getThreads();
  var max = Math.min(messages.length,1);
  for( var i = 0; i < max; ++i ) {
    var email = messages[i].getMessages()[0];
    var contents = email.getBody();

    //PARSE HERE
    var xml = Xml.parse(contents,true);
    Logger.log(xml);
    GmailApp.sendEmail('MY EMAIL', 'Xml Contents', Logger.getLog());

    //messages[i].markRead();
    //messages[i].removeLabel(label).addLabel(doneLabel);
  }
}; 
```

EDIT2：新代码：

```
function processInbox() {
  // get all threads in inbox
  var label = GmailApp.getUserLabelByName("Social/YouTube/Dubstep");
  var doneLabel = GmailApp.getUserLabelByName("Social/YouTube/Dubstep (added)");
  var messages = label.getThreads();
  var max = Math.min(messages.length,5);
  for( var i = 0; i < max; ++i ) {
    var email = messages[i].getMessages()[0];
    var contents = email.getBody();
    var st = contents.indexOf('<a href="http://www.youtube.com/watch?v=');
    var str1 = contents.substr(st+9,80);
    var end = str1.indexOf('&amp');
    var link = str1.substring(0,end);
    Logger.log(link); 
    GmailApp.sendEmail('EMAIL', 'Xml Contents', Logger.getLog());

    Logger.clear();

    //messages[i].markRead();
    //messages[i].removeLabel(label).addLabel(doneLabel);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:15:46.003

我想最好的方法是使用`XML service`来解析 HTML 并从那里获取元素。

请参阅[此处的文档](https://developers.google.com/apps-script/class_xml?hl=fr-FR#parse)，将 lenient 参数设置为`true`

我前段时间[在这篇文章中](https://stackoverflow.com/questions/14185320/how-to-get-the-youtube-favorites-url/14198009#14198009)使用了类似的方法，你可以看到这个想法......

* * *

**编辑：** 我没有成功使用这种方法......我尝试了使用字符串操作的其他方法：

```
...
var contents = email.getBody();
var st = contents.indexOf('<a href="http://www.youtube.com/watch?v=');
var str1 = contents.substr(st+9,80);
var end = str1.indexOf('&amp');
var link = str1.substring(0,end);
Logger.log(link); 
```

它适用于这种情况，您必须检查它是否一直有效。

注意：我测试了从 YouTube 通过电子邮件发送的其他共享链接，它似乎每次都有效；-)

# android - Android 应用程序和 REST API

> ID：15316227
> 
> 赞同：1
> 
> 时间：2013-03-09T21:41:19.783
> 
> 标签：android, rest, httpclient

我搜索了用于 Android 开发的良好 REST/HTTP 客户端，但没有找到满足我需求的东西。

现在我有一个问题。有没有在 android 项目中重用 HTTP 客户端对象的好方法？

如果有一个中心位置（可能是静态类？）来访问 httpclient 以执行请求（异步），那就太好了...

如何在 android 项目中执行此操作？

我的凭据也是如此。（我使用基本身份验证，不想将凭据从活动传递到活动）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:58:30.893

我会推荐你​​ RoboSpice：

> RoboSpice 是一个模块化的 android 库，可以轻松编写异步网络请求。

它确实有一个缓存管理器，并且作为服务工作，对我来说，这比普通的 AsyncTasks 更好。

[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

此外，您不应该**接触**R 类，它是从您的资源自动构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:01:27.357

我建议检查

[https://github.com/posco2k8/rest_loader_tutorial](https://github.com/posco2k8/rest_loader_tutorial)

* * *

我还建议进行小的改进更改`RESTLoader.RESTResponse data`，以便`data`在这种情况下成为最终数据，`List<String>`以便解析移动到 acync 加载程序并避免 UI 线程上的延迟。添加指出更改建议的代码。

```
@Override
public void onLoadFinished(Loader<RESTLoader.RESTResponse> loader, RESTLoader.RESTResponse data) {
    int    code = data.getCode();
    String json = data.getData(); // <-- (change) this should be the final data

    // Check to see if we got an HTTP 200 code and have some data.
    if (code == 200 && !json.equals("")) {

        // For really complicated JSON decoding I usually do my heavy lifting
        // Gson and proper model classes, but for now let's keep it simple
        // and use a utility method that relies on some of the built in
        // JSON utilities on Android.
        List<String> tweets = getTweetsFromJson(json); // <-- (change) that parse move to loader

        // Load our list adapter with our Tweets.
        mAdapter.clear();
        for (String tweet : tweets) {
            mAdapter.add(tweet);
        }
    }
    else {
        Toast.makeText(this, "Failed to load Twitter data. Check your internet settings.", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:11:02.547

如前所述，RoboSpice 是一个非常不错的选择。如果您只想保持本地资源与远程数据同步，您可以使用[RestDroid](https://github.com/PCreations/RESTDroid)这是一个“面向资源”的库来处理异步 REST 请求。

# java - 将整数从文件存储到数组中并找到素数 JAVA

> ID：15316230
> 
> 赞同：0
> 
> 时间：2013-03-09T21:42:02.827
> 
> 标签：java, arrays, java.util.scanner, primes

在这个交互式程序中，您将找到一个菜单，其中包含在阵列上执行不同功能的选项。该数组取自名为“data.txt”的文件。该文件包含整数，每行一个。显然，我没有包含整个代码（太长了）。但是，我希望有人可以帮助我解决在数组中查找素数的问题现在，控制台打印素数数组的地址（[I@4a13ccea）。欢迎任何建议。我的程序的一部分如下。谢谢。

```
public static void main(String[] args) throws FileNotFoundException {
    Scanner sc = new Scanner(System.in);
    System.out.println("Welcome to Calculation Program!\n");
    startMenus(sc);

}

private static void startMenus(Scanner sc) throws FileNotFoundException {
    while (true) {
        System.out.println("(Enter option # and press ENTER)\n");

        System.out.println("1\. Display the average of the list");
        System.out.println("2\. Display the number of occurences of a given element in the list");
        System.out.println("3\. Display the prime numbers in a list");
        System.out.println("4\. Display the information above in table form");
        System.out.println("5\. Save the information onto a file in table form");
        System.out.println("6\. Exit");

        int option = sc.nextInt();

        sc.nextLine();

        switch (option) {
            case 1:
                System.out.println("You've chosen to compute the average.");
                infoMenu1(sc);
                break;
            case 2:
                infoMenu2(sc, sc);
                break;
            case 3:
                infoMenu3(sc);
                break;
            case 4:
                infoMenu4(sc);
                break;
            case 5:
                infoMenu5(sc);
                break;
            case 6:
                System.exit(0);
            default:

                System.out.println("Unrecognized Option!\n");
        }

    }
}
private static void infoMenu3(Scanner sc) throws FileNotFoundException {
    File file = new File("data.txt");
    sc = new Scanner(file);

    int[] numbers = new int[100];

    int i = 0;

    while (sc.hasNextInt()) {
        numbers[i] = sc.nextInt();
        ++i;
    }

    for (int j = 0; j < i; ++j) {
        System.out.print("The numbers in the file are: " + numbers[j] + " ");
    }
}
public static boolean prime(int x) {
    boolean answer = true;

    for (int i = 2; i <= x / 2; i = i + 1) {
        if (i != x) {
            if (i % x == 0) {
                answer = false;
            }
        }
    }

    return answer;
}

public static int[] primes(int[] numbers) {
    int primesCount = 0;

    for (int i : numbers) {
        if (prime(i)) {
            primesCount = (primesCount + 1);
        }
    }

    if (primesCount == 0) {
        return null;
    }

    int[] result = new int[primesCount];
    int index = 0;

    for (int i : numbers) {
        if (prime(i)) {
            result[index] = i;
            index = index + 1;
        }
    }

    return result;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:44:51.050

循环遍历您的数组并打印每个元素，或者`java.util.Arrays.toString(int[])`如果其格式适合您的需要，则使用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:55:02.110

两个标记

如果你像这样打印一个数组，你会得到数组的地址，而不是里面。

```
System.out.println("The primes in the file are: " + primes(numbers)); 
```

将此行替换为迭代的循环`primes(numbers)`

第二个是，在你的`public static boolean prime(int x)`函数中你有这条线

```
for (int i = 2; i <= x / 2; i = i + 1) 
```

虽然这可行，但要找到素数 yo 不需要迭代直到**x / 2**。为了提高性能**，x 的平方根**更适合。

# data-structures - list-of-list vs. hash-of-hashes

> ID：15316232
> 
> 赞同：1
> 
> 时间：2013-03-09T21:42:20.593
> 
> 标签：data-structures, processing-efficiency, hash-of-hashes

设置：我需要存储与字符串对关联的特征向量。字符串-字符串对编码输入-输出关系。将有相对较少数量的输入`X`（例如 5），并且对于每个输入`x`，将有相对较少数量的输出`Y|x`（例如 10）。

问题是，什么数据结构最快？

其他相关信息：

1.  每个输入的输出通常不同，并且不能假设每个输入`X`具有相同数量的输出。
2.  查找将进行“很多”次（可能是 1000 次）。
3.  输入将被同样频繁地采样，但对于每个输入，通常会频繁访问一个或两个输出，其余的将不经常访问或根本不访问。

目前我在考虑三种可能：

1.  *list-of-lists*：使用索引访问外部列表（表示输入`X[i]`），使用索引访问内部列表（表示输出`Y[i][j]`）。
2.  *hash-of-hashes*：与上面相同。
3.  *平散列*：`key = (input,output)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:08:46.113

如果您有字符串，则不清楚如何查找索引以有效地使用列表列表而不使用散列。如果您可以传递一些保持对索引的引用的东西（例如，如果输出集是固定的，并且您可以定义它们的枚举），而不是字符串，列表列表会更快（假设您的意思是列表'不一定是链表'的意义，具有 O(1) 元素访问）。否则，您不妨直接散列并节省自己的精力。

如果不是，那就留下散列的散列与平面散列。你的访问模式是什么样的？您是否总是会要求 X、Y，或者您是否需要访问 X 的所有输出？Hash(X+Y) 可能大致相当于 hash(X) + hash(Y) （两者通常都会遍历所有字母以生成散列。因此单个散列更灵活，稍微（几乎可以肯定可以忽略不计） ) 开销。从 3 开始，听起来你可能需要散列的散列，无论如何。

# optimization - 长变量名会浪费内存吗？

> ID：15316237
> 
> 赞同：4
> 
> 时间：2013-03-09T21:42:30.137
> 
> 标签：optimization, language-agnostic, coding-style

如果我有一个变量`int d; // some comment`. 这会比`int daysElapsedSinceBlahBlahBlahBlah`没有评论更好。它更可重复，但它会浪费内存吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T21:45:53.707

您将其标记为，`language-agnostic`但该示例对应于 C 语言系列。在类 C 语言中，变量的名称不应该浪费内存，它只是编译器的标签。在生成的二进制代码中，它将被内存地址替换。

一般来说，将变量的名称存储在生成的二进制文件中没有任何好处，我能想到的唯一用法是一些极端的调试、逆向工程或一些奇怪的反射形式。这些都不是正常的用例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T13:20:34.273

这完全取决于语言及其实现，但我可以根据我所知道的几种语言给你一些例子。

在 C 和 C++ 中，变量名是程序员和编译器的符号标识符。编译器将它们替换为内存地址、CPU 寄存器或以其他方式内联它们的访问以完全消除它们。这些名称不会出现在生成的代码中。它们可以出现在生成的调试信息中，但是当您不再需要进行交互式步进调试时，您可以在程序的发布版本中省略它。

在 Java 中，编译器消除了函数局部变量名称并重写代码以使用堆栈相对偏移量。字段名称（即类级别的变量）确实保留在编译的字节码中。这主要是因为类是单独编译的，并且可以在运行时动态链接，所以编译器不能一次优化整个程序的状态。保留字段名称的另一个原因是它们可以通过[反射](https://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)获得。在运行时，虚拟机可以生成本机代码，这些本机代码主要以 C 和 C++ 的方式使用内存地址和本机 CPU 寄存器。无论如何，字段名称都保存在内存中，以便进行反射，以便可以链接任何其他加载的类。中期全程序优化器和混淆器，如[ProGuard](http://proguard.sourceforge.net/)虽然可以使所有符号名称更短。

在具有[eval](https://en.wikipedia.org/wiki/eval)函数的语言中，例如 JavaScript 和 PHP，即使是局部变量名，理论上也必须保留，因为它们都可以通过运行时字符串按名称访问。一个好的解释器可以优化它以使用快速内存​​地址，以防它可以证明特定变量不是按名称访问的。

在真正的逐行解释器中，就像非常古老的[BASIC](https://en.wikipedia.org/wiki/BASIC)实现一样，变量名必须始终保留，因为解释器直接从源代码操作。当它移动到下一行时，它会忘记每一行，因此它无法跟踪变量，除非通过它们在源中的名称。由于完整的源代码必须在运行时保存在内存中，而且通常限制在 64 kB 或更小，因此变量名真的很重要！由于这个原因，这个时代的代码经常使用（和重复使用）神秘的短名称（但也有其他原因，例如 BASIC 代码有时打印在杂志上以供输入，而这些平台没有特别好的键盘或编辑。）

除非您正在为 1980 年代或更早的解释器编程，否则标识符名称在任何情况下都非常便宜，您不必担心。选择足够长以便易于理解的名称，并且足够短以便快速阅读。让编译器担心其余的事情，或者在编写代码后对代码运行优化器或[压缩器。](https://en.wikipedia.org/wiki/Minifier)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-09T22:00:22.183

变量名*从不*占用内存。至少还不足以开始担心它。虽然某些语言实现会将变量名存储在*某处*（有时该语言甚至需要这样做），但与其他所有东西相比，它们占用的空间绝对很小。只需使用其他指标（可读性、约定等）最好的。

# r - R中的线图，情节没有意义

> ID：15316246
> 
> 赞同：1
> 
> 时间：2013-03-09T21:43:08.523
> 
> 标签：r, plot

我有一个名为“rainfall”的数据集，前几行是

```
 Year    Month      Date cuftsec         lsec log10lsec
1 1997  January 1/15/1997  57.100 3.360907e-02 -1.473544
2 1997 February 2/15/1997  13.800 8.122686e-03 -2.090300
3 1997    March 3/15/1997   5.100 3.001866e-03 -2.522609
4 1997    April 4/15/1997   2.210 1.300812e-03 -2.885786
5 1997      May 5/15/1997   0.469 2.760590e-04 -3.558998
6 1997     June 6/15/1997   0.000 5.886000e-09 -8.230180 
```

我想得到一个日期和 log10lsec 的线图。当我尝试

```
with(rainfall, plot(x = Date, y = log10lsec, type = "l")) 
```

我得到一个带有点的图（好像 type = "l" 不存在）。

如果我设置另一个情节然后添加一条线，例如

```
with(rainfall, plot(x = Date, y = log10lsec))
with(rainfall, lines(x = Date, y = log10lsec)) 
```

我得到一个荒谬的线图，它以看似随机的顺序连接点。

dput(head(rainfall)) 产生：

```
structure(list(Year = c(1997L, 1997L, 1997L, 1997L, 1997L, 1997L
), Month = structure(c(5L, 4L, 8L, 1L, 9L, 7L), .Label = c("April", 
"August", "December", "February", "January", "July", "June", 
"March", "May", "November", "October", "September"), class = "factor"), 
    Date = structure(c(1L, 49L, 61L, 73L, 85L, 97L), .Label = c("1/15/1997", 
    "1/15/1998", "1/15/1999", "1/15/2000", "1/15/2001", "1/15/2002", 
    "1/15/2003", "1/15/2004", "1/15/2005", "1/15/2006", "1/15/2007", 
    "1/15/2008", "10/15/1997", "10/15/1998", "10/15/1999", "10/15/2000", 
    "10/15/2001", "10/15/2002", "10/15/2003", "10/15/2004", "10/15/2005", 
    "10/15/2006", "10/15/2007", "10/15/2008", "11/15/1997", "11/15/1998", 
    "11/15/1999", "11/15/2000", "11/15/2001", "11/15/2002", "11/15/2003", 
    "11/15/2004", "11/15/2005", "11/15/2006", "11/15/2007", "11/15/2008", 
    "12/15/1997", "12/15/1998", "12/15/1999", "12/15/2000", "12/15/2001", 
    "12/15/2002", "12/15/2003", "12/15/2004", "12/15/2005", "12/15/2006", 
    "12/15/2007", "12/15/2008", "2/15/1997", "2/15/1998", "2/15/1999", 
    "2/15/2000", "2/15/2001", "2/15/2002", "2/15/2003", "2/15/2004", 
    "2/15/2005", "2/15/2006", "2/15/2007", "2/15/2008", "3/15/1997", 
    "3/15/1998", "3/15/1999", "3/15/2000", "3/15/2001", "3/15/2002", 
    "3/15/2003", "3/15/2004", "3/15/2005", "3/15/2006", "3/15/2007", 
    "3/15/2008", "4/15/1997", "4/15/1998", "4/15/1999", "4/15/2000", 
    "4/15/2001", "4/15/2002", "4/15/2003", "4/15/2004", "4/15/2005", 
    "4/15/2006", "4/15/2007", "4/15/2008", "5/15/1997", "5/15/1998", 
    "5/15/1999", "5/15/2000", "5/15/2001", "5/15/2002", "5/15/2003", 
    "5/15/2004", "5/15/2005", "5/15/2006", "5/15/2007", "5/15/2008", 
    "6/15/1997", "6/15/1998", "6/15/1999", "6/15/2000", "6/15/2001", 
    "6/15/2002", "6/15/2003", "6/15/2004", "6/15/2005", "6/15/2006", 
    "6/15/2007", "6/15/2008", "7/15/1997", "7/15/1998", "7/15/1999", 
    "7/15/2000", "7/15/2001", "7/15/2002", "7/15/2003", "7/15/2004", 
    "7/15/2005", "7/15/2006", "7/15/2007", "7/15/2008", "8/15/1997", 
    "8/15/1998", "8/15/1999", "8/15/2000", "8/15/2001", "8/15/2002", 
    "8/15/2003", "8/15/2004", "8/15/2005", "8/15/2006", "8/15/2007", 
    "8/15/2008", "9/15/1997", "9/15/1998", "9/15/1999", "9/15/2000", 
    "9/15/2001", "9/15/2002", "9/15/2003", "9/15/2004", "9/15/2005", 
    "9/15/2006", "9/15/2007", "9/15/2008"), class = "factor"), 
    cuftsec = c(57.1, 13.8, 5.1, 2.21, 0.469, 0), lsec = c(0.033609066, 
    0.008122686, 0.003001866, 0.001300812, 0.000276059, 5.886e-09
    ), log10lsec = c(-1.473543558, -2.090300341, -2.522608715, 
    -2.885785503, -3.55899764, -8.230179742)), .Names = c("Year", 
"Month", "Date", "cuftsec", "lsec", "log10lsec"), row.names = c(NA, 
6L), class = "data.frame") 
```

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:06:00.873

我认为问题恰恰`Date`是一个因素。这似乎有效：

```
with(dat,plot(as.Date(Date,format="%m/%d/%Y"),log10lsec,type="l")) 
```

或者如果您想永久更改日期，

```
dat <- transform(dat,Date=as.Date(Date,format="%m/%d/%Y"))
with(dat,plot(log10lsec~Date,type="l")) 
```

# c# - SyncSvcUtilUI 无法读取自己的同步配置

> ID：15316252
> 
> 赞同：0
> 
> 时间：2013-03-09T21:43:53.533
> 
> 标签：c#, sync, microsoft-sync-framework

我尝试使用 Microsoft 的 Syn Framework Toolkit：[http](http://www.microsoft.com/en-us/download/details.aspx?id=23217)
://www.microsoft.com/en-us/download/details.aspx?id= 23217 因为我打算使用 Android 客户端，所以我还为它下载了 Toolkit：[http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e](http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e)
我安装了 SDK，然后提取工具包并用 VS 构建它。
按照帮助文件中的说明，我使用 SyncSvcUtilUI 创建了一个 Sync 配置文件。它按计划进行。
下一步是使用该配置文件来配置数据库。选择上述同步配置文件后，我收到以下消息：

```
正在运行 SyncSvcUtil 命令...
传递的参数无效
参数名称：同步

```

这两个应用程序不兼容吗？我应该检查什么？这两个可执行文件位于同一目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:29:05.823

包含 SyncSvcUtilUI 的目录的名称中有*空格*。将其移动到一个简单的目录后，它就可以工作了。很棒的软件设计...

# php - 我如何用php替换句子中的某些单词

> ID：15316254
> 
> 赞同：-1
> 
> 时间：2013-03-09T21:44:03.080
> 
> 标签：php

假设我有这句话：“奥巴马总统和他的家人从非洲回到美国”。

如何将“奥巴马”替换为“布什”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:54:03.407

使用[str_replace()](http://www.php.net/manual/en/function.str-replace.php)函数：

```
$sentence = "The president obama came back to america from africa with his family";
$changed = str_replace("obama", "bush", $sentence); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:53:09.240

那是一个愚蠢的问题。如果你只是用谷歌搜索它，会找到解决方案：

> str_replace ( 混合 $search , 混合 $replace , 混合 $subject [, int &$count ] )

```
$subj  = "The president obama came back to america from africa with his family";
$search = "bush";
$replace   = "obama";

echo str_replace($search, $replace, $subj); 
```

# python - 使用 Python 解析多个文件并将数据写入单个文件

> ID：15316260
> 
> 赞同：0
> 
> 时间：2013-03-09T21:44:49.443
> 
> 标签：python

我是 Python 编程的新手，我正在尝试解析多个文件并从每个文件中获取数据并将其写入单个文件。我要创建数据的文件只有一个基于主键及其关联数据的唯一数据（类似于我们在 excel 中创建数据透视表的方式）。我附上示例文本文件。所有文本文件都有三个部分，每个部分将被解析为一个单独的文本文件。

```
Test Data 123

Section1
PrimaryKey  Primary Key2    Primary Key3    TestData1   TestData2   TestData3
Key1        Data1       Sample1     119     100     0.920336134
Key1        Data2       Sample2     120     101     0.921666667
Key1        Data3       Sample3     115     96      0.914782609
Key2        Data1       Sample1     77      58      0.833246753
Key2        Data2       Sample2     66      47      0.792121212
Key3        Data1       Sample1     106     87      0.900754717

Section2
PrimaryKey  Primary Key2    Primary Key3    TestData1   TestData2   TestData3   TestData4   TestData5   TestData6
Key1        Data1       Sample1     119     100     0.856       0.859       0.862       0.865
Key1        Data2       Sample2     120     101     0.876       0.879       0.882       0.885
Key1        Data3       Sample3     115     96      0.896       0.899       0.902       0.905
Key2        Data1       Sample1     77      58      0.916       0.919       0.922       0.925
Key2        Data2       Sample2     66      47      0.936       0.939       0.942       0.945
Key3        Data1       Sample1     106     87      0.956       0.959       0.962       0.965
Key1        Data1       Sample1     116     97      0.976       0.979       0.982       0.985
Key1        Data2       Sample2     101     82      0.996       0.999       1.002       1.005
Key1        Data3       Sample3     106     87      1.016       1.019       1.022       1.025
Key2        Data1       Sample1     61      42      1.036       1.039       1.042       1.045

Section3
Column1 Column2
Test1   DataTest
Test2   DataTest1
Test3   DataTest2
Test4   DataTest3
Test5   DataTest4
Test6   DataTest5
Test7   DataTest6
Test8   DataTest7 
```

# jquery - 使用 jQuery animate 滚动列表

> ID：15316265
> 
> 赞同：0
> 
> 时间：2013-03-09T21:45:27.180
> 
> 标签：jquery, jquery-animate

下面的代码是我尝试为项目列表设置动画。但是，除了动画之外的所有内容都在按应有的方式工作。任何时候我点击它都会将列表项移动 80 像素，但它根本没有动画。我究竟做错了什么？

```
$('#nav_up').on('click', function() {
    $('#block_nav ul').animate({
        top: $('#block_nav ul').offset({top: $('#block_nav ul').offset().top - 80})
    }, 'slow');
}); 
```

更新：链接到 jsfiddle [http://jsfiddle.net/75SN4/1/](http://jsfiddle.net/75SN4/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:47:39.530

更新您的 jQuery 代码，如下所示：

```
$(document).ready(function() {
    $('#nav_up').on('click', function() {
        $('#block_nav ul').animate({ top: '-=80' }, 'slow');
        console.log($('#block_nav ul').offset());
    });
}); 
```

查看一个有效的[**jsFiddle 演示**](http://jsfiddle.net/75SN4/2/)。

# html - 使用 nokogiri 解析一些棘手的 HTML

> ID：15316266
> 
> 赞同：0
> 
> 时间：2013-03-09T21:45:40.703
> 
> 标签：html, ruby, nokogiri

我正在尝试用 Nokogiri 解析这个 html，但我被卡住了。

```
<b>Dudule Francis</b>
<br>
<b>Tél. : </b>
01 02 03 04 05
<br>
<b>Fax : </b>
10 90 80 70 60 
```

我想提取第一个电话号码`01 02 03 04 05`。它介于`</b>`且`<br>`仅当`<b>Tél. : </b>`被发现时。如果有人有线索，我很开放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:09:07.507

```
noko = Nokogiri::HTML(html_text)
noko.xpath("//b[text() = 'Tél. : ']").each do |b|
  puts b.next_sibling.content.strip
end
# 01 02 03 04 05 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:28:14.883

简单的方法：

```
doc.at('b[text()="Tél. : "]').next.text 
```

如果由于某种原因您想确保它位于 b 和下一个 br 之间：

```
doc.at('b[text()="Tél. : "] + br').previous.text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T15:38:48.520

我发现很多时候 CSS 更容易理解，虽然 CSS 本身通常不能查看节点的文本内部，迫使我们使用 XPath，但 Nokogiri 使用 jQuery 的扩展为我们提供了一些额外的帮助：

```
doc.at('b:contains("Tél.")').next_sibling.text.strip
"01 02 03 04 05" 
```

# r - 在 R 的图中添加第二个图例

> ID：15316267
> 
> 赞同：6
> 
> 时间：2013-03-09T21:45:44.077
> 
> 标签：r, statistics, ggplot2

我得到了基于列因子的默认图例。我根据另一列的因子为 x 轴着色。

我也可以为这个 x 轴颜色添加一个图例吗？

![在此处输入图像描述](../Images/21a247b4d173a2ec075f9561abeb3291.png)

合并数据（[https://dl.dropbox.com/u/81597211/Untitled.pdf](https://dl.dropbox.com/u/81597211/Untitled.pdf)）

```
row.names   LCA_CASE_WORKLOC1_CITY  LCA_CASE_JOB_TITLE  LCA_CASE_WORKLOC1_STATE LCA_CASE_WAGE_RATE_FROM Company
    4726    REDWOOD SHORES  SOFTWARE DEVELOPER - ARCHITECT  CA  263500.00   ORACLE
    102663  DENVER  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CO  170000.00   ORACLE
    103621  DENVER  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CO  170000.00   ORACLE
    95210   SANTA CLARA SOFTWARE ENGINEER (SOFTWARE DEVELOPER 4)    CA  155000.00   ORACLE
    18858   SANTA CLARA SOFTWARE ENGINEER (CONSULTING SOLUTION DIRECTOR)    CA  150000.00   ORACLE
    19514   IRVING  CONSULTING TECHNICAL MANAGER    TX  150000.00   ORACLE
    57054   REDWOOD SHORES  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 4)    CA  150000.00   ORACLE
    76335   REDWOOD SHORES  SOFTWARE ENGINEER (APPLICATIONS DEVELOPER 4)    CA  150000.00   ORACLE
    79964   REDWOOD SHORES  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CA  150000.00   ORACLE 
```

代码

```
library("ggplot2")
colour = factor(merged$Company)
xcolor = factor(merged$LCA_CASE_WORKLOC1_STATE)
qplot(merged[[2]], merged[[4]], colour = colour, xlab="Positions", ylab ="Salary", main="H1B Salary 2012") + theme(axis.text.x=element_text(angle=90,vjust=0.5, hjust=1, size=10, color= xcolor, lineheight=10)) + scale_y_continuous(breaks=seq(0,300000, 10000)) + theme(panel.grid.minor = element_line(colour = "red", linetype = "dotted")) + scale_x_discrete(merged[[2]]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:08:08.113

这个解决方案不像我们想要的那样通用，但也不是很困难和技术。首先是一些数据：

```
y <- c(5, 2, 3, 2)
x <- factor(c("A", "B", "C", "A"))
z <- factor(c("D", "E", "F", "E"))

p <- qplot(x, y, geom = "point") +
  theme(axis.text.x = element_text(color = z)) 
```

在这种情况下，一个流行的函数`g_legend`（例如可以在[此处](https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs)找到）很有用，它将图例中的图例作为 grob（因此该解决方案并不快）。

```
g_legend<-function(a.gplot){
  tmp <- ggplot_gtable(ggplot_build(a.gplot))
  leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
  legend <- tmp$grobs[[leg]]
  legend
} 
```

所以我们保存了两个图例，一个用于点 ( `x`)，一个用于 x 轴 ( `z`)。

```
legends <- list(g_legend(p + geom_point(aes(color = x))),
                g_legend(p + geom_point(aes(color = z)) + 
                          scale_color_manual(values = palette()[as.numeric(z)]))) 
```

注意第二个图例的不同。`palette()`在这里使用是因为 if eg `z <- factor(c(1, 2, 3))`then`element_text(color = z)`使用与 不同的颜色`geom_point(aes(color = z))`，即`element_text(color = z)`从基本图中获取颜色，例如 2 in `plot(1, col = 2)`。

最后，把所有东西放在一起：

```
library(gridExtra)
grid.arrange(p + geom_point(aes(color = x)) + guides(color = 'none'), 
             do.call(arrangeGrob, legends), nrow = 1, widths = c(0.8, 0.2)) 
```

![在此处输入图像描述](../Images/75e598bed1a419e97886040c65b42c2d.png)

# image - 标题中的 Wordpress 图像和链接

> ID：15316270
> 
> 赞同：0
> 
> 时间：2013-03-09T21:46:05.427
> 
> 标签：image, wordpress, hyperlink, header, wordpress-theming

我有一个带有标题图像的 TwentyTwelve 的 Wordpress 子主题，我想放置另一个较小的图像，其中超链接位于标题图像的中心。

```
---------------------------------------------------------------------
| 1                                                                 |
|                            -----    -----                         |
|                            | 2 |    | 3 |                         |
|                            -----    -----                         |
|                                                                   |
--------------------------------------------------------------------- 
```

从上图中，我有 [1] 是指向主站点的链接（标准从 212），我想添加 [2] 和 [3] 作为图像和超链接。关于我将如何做到这一点的任何建议？我刚开始学习主题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:48:44.877

如果其他人想要这样做，我已经找到了解决方案。在我`header.php`之前，我添加了这个`</header>`：

```
<div style="position:relative; visibility:show; left: 50%; top: -<?php echo get_custom_header()->height/2; ?>px; z-index:2; >
    <a href="http://www.google.com" target="_blank"><img src="image" ></a><br>
</div> 
```

# javascript - jQuery模拟点击

> ID：15316272
> 
> 赞同：19
> 
> 时间：2013-03-09T21:46:14.200
> 
> 标签：javascript, jquery

我想在页面加载时触发一个函数。[有很多方法可以做到这一点。](https://stackoverflow.com/questions/890090/jquery-call-function-after-load) 但是，当我`$('#button').click`在我的函数前面添加时，该`getType`函数无法识别。例如：

```
$('#button').click(function getType(id) {
    //...some code
}); 
```

> 错误：未定义 getType

我究竟做错了什么？

澄清一下，在这种情况下，我不能使用匿名函数。`$(document).ready`另外，我是否使用or对我来说并不重要`$(window).bind("load", function()`，但是使用这些我仍然会得到“getType is not defined”错误。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-09T21:48:44.970

您要么必须使您的函数匿名：

```
$('#button').click(function() {
    //...some code
}); 
```

或者传递函数本身：

```
function getType() {
    //...some code
}

$('#button').click(getType); 
```

如果您只想触发点击，请致电`.click()`：

```
$('#button').click(); 
```

此外，您的`id`参数不会是元素的`id`. 它将是点击事件对象。要获取元素的`id`，您可以使用以下方法引用单击的元素`this`：

```
$('#button').click(function() {
    var id = this.id;
}); 
```

我建议您阅读一些 JavaScript 和 jQuery 教程（按此顺序）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T21:49:18.407

您正在使用内联表示法，因此，您应该使用匿名函数（无名称函数）

你的代码应该是：

```
$('#button').click(function() {
      // do your stuff here
    }
); 
```

* * *

**除此之外**，正如标题所说，您需要模拟一个`click`事件，对吗？如果是这样，你最好使用类似的东西：

```
$('#button').on('click', function() {
  alert($(this).text());
});
// somewhere when you want to simulate the click you call the trigger function
$('#button').trigger('click'); 
```

在此处查看[文档](http://api.jquery.com/trigger/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T21:47:49.410

```
$('#button').click(function getType(id) {
    //...some code
}); 
```

应该：

```
$('#button').click(function() {
        [...] code here
    }
); 
```

`function() { }`是当我单击某个元素时代码必须执行的回调。

如果你有这个`getType`函数，你可以将它作为回调传递：

```
$('#button').click(getType); 
```

如果你想触发一个函数，当页面加载时，你可以这样做：

```
$('#button').trigger('click'); 
```

或者

```
function getType() {
    [...] code here
}

getType(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-24T15:49:29.860

[`.trigger( event [, extraParameters ] )`](http://api.jquery.com/trigger/)在元素上使用。

> **extraParameters**
> 类型：Array 或 PlainObject
> 要传递给事件处理程序的附加参数。

额外的好处是您可以将数据传递给事件处理程序，而如果使用[`.click()`](http://api.jquery.com/click/)，则无法将数据分配给对象。

```
$("#target").trigger('click'); 
```

如果您想使用`extraParameters`：

```
$( "#foo" ).on( "custom", function( event, param1, param2 ) {
  alert( param1 + "\n" + param2 );
});
$( "#foo").trigger( "custom", [ "Custom", "Event" ] ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T21:51:05.890

该`.click()`方法需要一个回调函数。所以你可以这样做：

```
//Define your function somewhere else
function getType(id) {
    //...some code
}

$('#button').click(function() {
    getType($(this).attr('id')); //Execute it when its clicked.
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T21:48:49.603

试试这个，id不能像你这样传递：

```
$('#button').click(function() {
    var id = this.id;
    //...some code
}); 
```

# php - jQuery Mobile 一些链接在加载时卡住了

> ID：15316278
> 
> 赞同：3
> 
> 时间：2013-03-09T21:46:53.170
> 
> 标签：php, jquery, jquery-mobile

我正在使用 jQuery Mobile，就像标题所说的那样，由于某种原因，一些链接卡在加载微调器上，并且无法打开下一页。这是代码：

```
<div data-role="page">
    <div data-role="content">
        <ul data-role="listview" data-theme="c" data-dividertheme="b">
            <li data-role="list-divider">Top News</li>
                <?php
                include_once ('simple_html_dom.php');
                $html = file_get_html('http://www.example.com');
                foreach ($html->find('*.overridable a[class=title]') as $main){
                    echo '<li><a href="news.php?url='.urlencode($main->href).'" data-transition="slidedown">'.$main->plaintext.'</a></li>';
                }
                ?>
                <li data-role="list-divider">Other News</li>
                <?php
                    include_once ('simple_html_dom.php');
                    $html = file_get_html('http://www.example.com');
                    foreach ($html->find('div[class=river-post yui-u] h2 a[href*=example]') as $ret){
                        echo '<li><a href="othernews.php?url='.urlencode($ret->href).'" data-transition="slidedown">'.$ret->plaintext.'</a></li>';
                    }
                ?>
            </ul>
        </div> 
```

如您所见，我将点击的 URL 发送到下一页并解析文章。出于某种原因，一两个链接只是卡在加载微调器上。文章的数据与其他的格式相同，但没有打开。但是当我摆脱 jQuery 并使用纯 HTML 时，一切都会按原样打开。该链接被发送到 URL 并在下一页上被解析。任何想法为什么有些链接会卡住？

更新错误：

```
Uncaught SyntaxError: Unexpected token < jquery-1.8.2.min.js:2
Uncaught ReferenceError: YChartsQuoteEmbed is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:44:46.793

终于想通了答案。问题是我在 news.php 和 othernews.php 页面上返回的 HTML，其中一些内容是 Javascript。我需要跳过那个 Javascript，现在页面加载得很好。被解析的 Javascript 代码干扰了 jQuery Mobile 代码。

# java - 将输入/输出缓冲区传递到 winapi 函数的 JNA 映射

> ID：15316283
> 
> 赞同：4
> 
> 时间：2013-03-09T21:47:45.817
> 
> 标签：java, winapi, jna

我需要枚举 Windows 的 Java 应用程序中文件的硬链接。我考虑过将 Runtime 与 一起使用`fsutil hardlink list`，但需要管理权限。这让我想到了 WINAPI（呃）。Kernel32.dll 函数[FindFirstFileNameW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364421%28v=vs.85%29.aspx)和[FindNextFileNameW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364429%28v=vs.85%29.aspx)应该这样做，但我无法通过 JNA API 调用它。FindFirstFileNameW 具有规范：

```
HANDLE WINAPI FindFirstFileNameW(
 _In_     LPCWSTR lpFileName,
 _In_     DWORD dwFlags,
 _Inout_  LPDWORD StringLength,
 _Inout_  PWCHAR LinkName
); 
```

我的 JNA 映射：

```
public interface Kernel32 extends StdCallLibrary { 
    Kernel32 INSTANCE = (Kernel32)Native.loadLibrary("kernel32",Kernel32.class, W32APIOptions.UNICODE_OPTIONS);
    HANDLE FindFirstFileNameW(WString wString, int dwFlags, IntByReference StringLength, ______ LinkName);

    boolean FindNextFileNameW(HANDLE hFindStream, IntByReference StringLength, ______ LinkName);
    boolean FindClose(HANDLE hFindFile);
    int GetLastError();
} 
```

调用函数的相关部分：

```
public String[] getHardLInks(Path path)
{
  Kernel32 lib = Kernel32.INSTANCE;
  IntByReference stringLength = new IntByReference();
  ______ linkName = ______;
  HANDLE hFile = lib.FindFirstFileNameW(new WString(path.toString()), 0, stringLength, linkName);
  String hardlink = //Convert linkName to String
  //Add to array
  // Loop through FindNextFileName
  //Close handle
} 
```

空白是我尝试映射的地方`LinkName`，“一个指向缓冲区的指针以存储找到的第一个链接名称`lpFileName`”，很多事情都没有成功。这包括字符串、char[]、byte[]、Buffer、Pointer 和 Memory，但调用中没有返回任何内容。我相信其余的从我在测试中从 StringLength 获得的返回值中是正确的。但是，`GetLastError`总是返回`ERROR_MORE_DATA`(234)，根据文档，这意味着缓冲区太小，即使我已经传递了千字节的内存。

我应该使用什么数据类型以及如何将其恢复为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:46:35.490

`PWCHAR`=> `char[]`，尽管 NIO 缓冲区或内存也可以工作（请记住，缓冲区和内存以字节为单位，而 API 期望以字符为单位）。

您还需要将 初始化为`IntByReference`数组的大小，否则您将告诉 API 您的缓冲区大小为零，它会乖乖地用恰好零个字符填充您的缓冲区。

像大多数此类 MS API 函数一样，您可能可以传递`null`缓冲区，然后它将所需的缓冲区大小写入您的长度参考。

**编辑**

另一件事-由于您（正确地）`W32API_UNICODE_OPTIONS`用于初始化库映射，`String`因此现在将自动映射到宽字符串（因此您不必使用`WString`），并且`-A/W`会自动处理函数后缀，因此您可以从您的方法名称中删除`-W`后缀。

# java - 列表大小 1 的 Java JSON 映射

> ID：15316288
> 
> 赞同：2
> 
> 时间：2013-03-09T21:47:57.337
> 
> 标签：java, xml, json, jakarta-ee, jaxb

我将一个对象映射到 JSON 并且有一个名为`Parameters`type 的变量的问题`List <SimilarityParameter>`。

`SimilarityParameter`看起来像这样：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class SimilarityParameter {

    private String name;
    private String type;

    public SimilarityParameter() {

    }

    public SimilarityParameter(String name, String type) {
        this.name = name;
        this.type = type;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

当这个列表很大时，一切都很好。JSON看起来像这样

```
{
  "parameters":[
    {
      "name":"threshold",
      "type":"Double"
    },
    {
      "name":"numberOfResults",
      "type":"Integer"
    }
  ]
} 
```

这没关系，因为在客户端进行 JSON 编码后，我有一个参数数组。

问题是当 List 的大小为 1 时。Mapper 将其逻辑传输到：

```
{
  "parameters":{
    "name":"numberOfResults",
    "type":"Integer"
  }
} 
```

当客户端解码此 JSON 时，会得到一个包含`name`和的数组`type`。它会导致客户端的不一致。

我想将大小为 1 的列表映射到此：

```
{
  "parameters":[
    {
      "name":"threshold",
      "type":"Double"
    }
  ]
} 
```

所以在编码包含一个参数的数组之后。

这是响应的样子：

```
@XmlRootElement(name = "availableSimilarities")
@XmlAccessorType(XmlAccessType.FIELD)
public class SimilarityInfoResult {

    private String similarityName;
    private List <SimilarityParameter> parameters;

    public SimilarityInfoResult() {

    }

    public SimilarityInfoResult(String similarityName, List<SimilarityParameter> parameters) {
        this.similarityName = similarityName;
        this.parameters = parameters; 
    }

    public String getName() {
        return similarityName;
    }

    public void setName(String similarityName) {
        this.similarityName = similarityName;
    }

    public List<SimilarityParameter> getParameters() {
        return parameters;
    }

    public void setParameters(List<SimilarityParameter> parameters) {
        this.parameters = parameters;
    }

} 
```

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:34:06.243

**注意：**我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> 问题是当 List 的大小为 1 时。Mapper 将其逻辑传输到：

**JAXB 规范**本身不涵盖 JSON 绑定，因此有时实现与 Jettison 之类的库一起使用，它将 XML 事件转换为 JSON 或从 JSON 转换，并且会出现问题，例如大小为 1 的集合被错误地表示。这是因为 Jettison（和类似的）库只有在看到一个元素多次出现时才能检测到集合。

*   [http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)

* * *

> 有可能实现这一目标吗？

JAXB的**EclipseLink MOXy**实现提供了原生 JSON 绑定，这意味着像大小为 1 的集合之类的项目将被正确转换为 JSON。

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properites`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {SimilarityInfoResult.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15316288/input.json");
        SimilarityInfoResult result = unmarshaller.unmarshal(json, SimilarityInfoResult.class).getValue();

        Marshaller marshaller= jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(result, System.out);
    }

} 
```

**输入.json/输出**

```
{
   "parameters" : [ {
      "name" : "threshold",
      "type" : "Double"
   } ]
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

# php - 可以在一天中的某个时间自动运行 symfony 任务吗？

> ID：15316291
> 
> 赞同：3
> 
> 时间：2013-03-09T21:48:03.783
> 
> 标签：php, symfony-1.4, scheduled-tasks

我有一些可以通过命令行手动运行的任务，但是如果我希望它每天中午自动运行一次呢？可以用 symfony 完成还是必须使用外部进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:50:37.267

您必须使用系统的 cron 任务调度程序。如果您使用 CPanel 的共享主机帐户，则可以通过该界面轻松设置。否则，您可能想查看以下网站：[http ://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T21:52:52.723

通常你会使用[`cron`](http://en.wikipedia.org/wiki/Cron)which 会让你的 crontab 看起来像

```
0 12 * * * /path/to/project/symfony namespace:task arg1 arg2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T23:26:58.783

如果主题是单个作业，则 windows 任务调度程序或 cron for ux 就足够了。但如果事情变得更复杂，你最好找一个作业调度器。

# python - 如何将字符串添加到 numpy 字符串 ndarray

> ID：15316292
> 
> 赞同：0
> 
> 时间：2013-03-09T21:48:17.720
> 
> 标签：python, numpy

如果我有一个 dtype 字符串的 numpy ndarray：

```
from numpy import array as narray
a = narray(['a', 'b']) 
```

如何向其中添加另一个字符串？以及如何通过索引访问该字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:15:59.343

查看[http://docs.scipy.org/doc/numpy/reference/generated/numpy.insert.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.insert.html)

例如，

```
numpy.insert( a, 2, 'c' ) 
```

将插入`c`.`a`

# objective-c - 是否有任何编译器选项可以禁用您在初始化内联结构时收到的警告？

> ID：15316293
> 
> 赞同：0
> 
> 时间：2013-03-09T21:48:30.050
> 
> 标签：objective-c, clang

我正在寻找一个允许我这样做的编译器设置：

`[imageGraphEraserIcon imageByResampling:{20, 20} zoom:3];`没有发出警告。现在我必须一直这样做，并且转换似乎毫无意义，因为编译器应该知道期望的类型：

`[imageGraphEraserIcon imageByResampling:(CGSize){20, 20} zoom:3];`

我知道“CGSizeMake”，我正在寻找一种更短、更赏心悦目的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:50:40.320

虽然您构建的内容将起作用，但正确的 Objective-C 模式是：

```
[imageGraphEraserIcon imageByResampling:CGSizeMake(20, 20) zoom:3]; 
```

事实是 Apple 制作了编译器，如果您收到警告，则说明您“做错了”。编译器希望您编写`CGSizeMake`它的类型检查。因此，这就是惯例。没有理由更喜欢匿名结构。它使您的代码不那么标准，其他人更难理解您的意图。

# ruby-on-rails - 如何在 Rails 中连接两个 ActiveRecord 查询

> ID：15316296
> 
> 赞同：1
> 
> 时间：2013-03-09T21:48:42.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个简单的应用程序，其中包含用户模型、角色模型、带有收件人的消息模型。一个用户通过角色有很多消息，一个角色通过收件人有很多消息，一个用户也通过收件人有很多消息。

接收者模型有一个 user_id、role_id 和 message_id

现在我想在一个查询中显示用户的所有消息，包括他的角色消息和他的个人消息。我怎样才能做到这一点。

```
 role model

 has_many :recipients
 has_many :received_messages, :class_name => 'Message', :order => 'created_at desc', through: :recipients

 user model
 has_many :roles
 has_many :received_messages, :class_name => 'Message', :order => 'created_at desc', through: :roles, :uniq => true
 has_many :recipients
 has_many :private_messages, :class_name => 'Message', :order => 'created_at desc', through: :recipients

 message model
 has_many :recipients
 has_many :roles, :through => :recipients
 has_many :users, :through => :recipients 
```

有了所有这些，我将如何获取用户消息，包括他的角色消息和他的私人消息

例子

```
def all_messages
  @all_messages = current_user.#all messages scope here#
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:03:30.940

获取所有消息的一种方法是将 received_messages 数组与 all_messages 方法中的 private_messages 数组结合起来。这将返回一个包含所有用户消息的数组。

```
def all_messages
  (current_user.received_messages + current_user.private_messages).uniq
end 
```

# java - 类内的属性修改

> ID：15316298
> 
> 赞同：0
> 
> 时间：2013-03-09T21:48:45.667
> 
> 标签：java

我有 getPlan 方法，我尝试修改一个对象（我的类中的属性）

```
class XYZ

/**
 * Plan.
 */
private Plan plan;

@Override
public final Plan getPlan() {
    subjects.addAll(plan.getSubjects());
    ...
    return new Plan("1", subjects.size(), subjects);
}

@Override
public final Graph createGraph() {
    Plan fPlan = getPlan();
    ...
    return graph;
} 
```

在第二种方法createGraph中，我尝试获取修改后的对象（fPlan），但它处于初始状态（Plan计划）。我希望你了解情况。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:13:50.017

您的方法不应该返回 a `Plan`，因为`Plan plan`它已经是一个实例变量。另外，无论如何您都不会实例化`Plan plan`，所以我想您必须选择以下代码之一：

第一部分：我们创建`Plan plan`一个实例变量，然后编辑、修改和使用它，并且只使用它。这意味着在这个类中，我们不必返回一个`Plans`，因为我们可以`Plan plan`在这个实例中访问`xyz`。

```
class XYZ

private Plan plan;

@Override
public final void instantiatePlan() {
    subjects.addAll(plan.getSubjects());
    ...
    plan = new Plan("1", subjects.size(), subjects);
}

@Override
public final Graph createGraph() {
    plan = instantiatePlan();
    ...
    return graph;
} 
```

第二种选择：我们删除实例变量`Plan plan`，在 中`createGraph()`，我们调用`getPlan()`with 返回 a `Plan`，我们可以在那里修改和编辑。根据我猜你的上下文，我会选择第一个选项。

```
class XYZ

@Override
public final Plan getPlan() {
    subjects.addAll(plan.getSubjects());
    ...
    return new Plan("1", subjects.size(), subjects);
}

@Override
public final Graph createGraph() {
    Plan fPlan = getPlan();
    ...
    //edit fPlan here.
    return graph;
} 
```

编辑：看到你的评论，我更了解你的问题。首先，在`getPlan()`你调用`getSubjects()`on 时`Plan plan`，它甚至没有被实例化，所以它会立即抛出一个 NPE。第二：让一个方法按照名字告诉你的去做：因此，`getPlan()`应该只是`return plan;`，不能多，不能少，不能编辑，在那个方法中修改。我建议`XYZ`使用 params创建类的构造函数`Plan plan`：

```
public XYZ(Plan mPlan) {
    this.plan = mPlan;
} 
```

或者在构造函数中初始化它：

```
public XYZ(ArrayList<Subject> subjects) {
    this.plan = new Plan("1", subjects.size(), subjects);
} 
```

请告诉你想`plan`成为什么样的人。

# regex - 我想使用 awk 从压缩的 XML 提要中解析文本

> ID：15316301
> 
> 赞同：0
> 
> 时间：2013-03-09T21:49:07.667
> 
> 标签：regex, parsing, unix, awk, grep

我正在尝试从[http://rss.slashdot.org/Slashdot/slashdot](http://rss.slashdot.org/Slashdot/slashdot)`<title>`处`<description>`的压缩 XML 提要中进行解析。我正在尝试执行以下操作

```
curl --silent "http://rss.slashdot.org/Slashdot/slashdot" | awk '/\btitle\b(.*?)\bdescription\b/' 
```

等等`grep -E`，但我无法得到我想要的子字符串。它总是返回整个 XML，因为它被压缩并且数据在一行中。

我能够通过在文本编辑器中运行它来测试我的正则表达式字符串。

感谢你的帮助！！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:07:27.907

使用 XML 解析器会有所帮助，这里使用`perl`and进行测试`XML::Twig`。使其适应您的需求。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use XML::Twig;

my $twig = XML::Twig->new(
    twig_handlers => {
        'title' => \&extract_text,
        'description' => \&extract_text,
    },  
)->parsefile( shift );

sub extract_text {
    my ($t, $e) = @_; 
    printf qq|%s\n=================\n|, $e->tag;
    printf qq|%s\n\n|, $e->text;
} 
```

像这样运行它：

```
curl --silent "http://rss.slashdot.org/Slashdot/slashdot" | perl script.pl - 
```

对于每对标题和描述，这会产生类似以下内容：

```
title
=================
Proof-of-Concept Port of XBMC to SDL 2.0 and Wayland

description
=================
hypnosec wrote in with news that XBMC has  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T00:22:54.253

这是一个 XSLT 解决方案：

```
curl -s -o- http://rss.slashdot.org/Slashdot/slashdot | xsltproc slashdot.xsl - 
```

`slashdot.xsl`在哪里

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" />

<xsl:variable name="newline">
<xsl:text>
</xsl:text>
</xsl:variable>

<xsl:template match="/">
    <xsl:apply-templates select='//item' />
</xsl:template>

<xsl:template match='//item'>
    <xsl:value-of select='title' /><xsl:value-of select='$newline' />
    <xsl:text>====</xsl:text><xsl:value-of select='$newline' />
    <xsl:value-of select='description' /><xsl:value-of select='$newline' />
    <xsl:value-of select='$newline' />
</xsl:template>

</xsl:stylesheet> 
```

# python - 用 selenium 打开 Tor 浏览器

> ID：15316304
> 
> 赞同：31
> 
> 时间：2013-03-09T21:49:18.787
> 
> 标签：python, selenium, tor

是否可以让 selenium 使用 TOR 浏览器？有没有人可以复制粘贴的代码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-17T18:09:37.100

不要使用 TBB，只需在您使用的任何浏览器中设置正确的代理设置。例如在 FF 中，像这样：

```
#set some privacy settings
ff_prof.set_preference( "places.history.enabled", False )
ff_prof.set_preference( "privacy.clearOnShutdown.offlineApps", True )
ff_prof.set_preference( "privacy.clearOnShutdown.passwords", True )
ff_prof.set_preference( "privacy.clearOnShutdown.siteSettings", True )
ff_prof.set_preference( "privacy.sanitize.sanitizeOnShutdown", True )
ff_prof.set_preference( "signon.rememberSignons", False )
ff_prof.set_preference( "network.cookie.lifetimePolicy", 2 )
ff_prof.set_preference( "network.dns.disablePrefetch", True )
ff_prof.set_preference( "network.http.sendRefererHeader", 0 )

#set socks proxy
ff_prof.set_preference( "network.proxy.type", 1 )
ff_prof.set_preference( "network.proxy.socks_version", 5 )
ff_prof.set_preference( "network.proxy.socks", '127.0.0.1' )
ff_prof.set_preference( "network.proxy.socks_port", 9050 )
ff_prof.set_preference( "network.proxy.socks_remote_dns", True )

#if you're really hardcore about your security
#js can be used to reveal your true i.p.
ff_prof.set_preference( "javascript.enabled", False )

#get a huge speed increase by not downloading images
ff_prof.set_preference( "permissions.default.image", 2 )

##
# programmatically start tor (in windows environment)
##
tor_path = "C:\\this\\is\\the\\location\\of\\" #tor.exe
torrc_path = "C:\\you\\need\\to\\create\\this\\file\\torrc"

DETACHED_PROCESS = 0x00000008
#calling as a detached_process means the program will not die with your python program - you will need to manually kill it
##
# somebody please let me know if there's a way to make this a child process that automatically dies (in windows)
##
tor_process = subprocess.Popen( '"' + tor_path+'tor.exe" --nt-service "-f" "' + torrc_path + '"', creationflags=DETACHED_PROCESS )

#attach to tor controller
## imports ##
# import stem.socket
# import stem.connection
# import stem.Signal
##
tor_controller = stem.socket.ControlPort( port=9051 )

control_password = 'password'
#in your torrc, you need to store the hashed version of 'password' which you can get with: subprocess.call( '"' + tor_path+'tor.exe" --hash-password %s' %control_password )

stem.connection.authenticate( tor_controller, password=control_password )

#check that everything is good with your tor_process by checking bootstrap status
tor_controller.send( 'GETINFO status/bootstrap-phase' )
response = worker.tor_controller.recv()
response = response.content()

#I will leave handling of response status to you 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-27T20:47:07.773

是的，可以让 selenium 使用 TOR 浏览器。

我能够在 Ubuntu 和 Mac OS X 上这样做。

有两件事必须发生：

1.  将二进制路径设置为 Tor 使用的 firefox 二进制文件。在 Mac 上，此路径通常为`/Applications/TorBrowser.app/Contents/MacOS/firefox`. 在我的 Ubuntu 机器上是`/usr/bin/tor-browser/Browser/firefox`.

2.  Tor 浏览器通过 Vidalia 或 Tor 安装使用位于 127.0.0.1:9150 的 SOCKS 主机。从 Finder 启动一次 Tor 并保持打开状态，以便 Vidalia 运行。使用 selenium 启动的实例也将使用 Vidalia 启动的 SOCKS 主机。

这是完成这两件事的代码。我在 Mac OS X Yosemite 上运行它：

```
import os
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary
from selenium import webdriver

# path to the firefox binary inside the Tor package
binary = '/Applications/TorBrowser.app/Contents/MacOS/firefox'
if os.path.exists(binary) is False:
    raise ValueError("The binary path to Tor firefox does not exist.")
firefox_binary = FirefoxBinary(binary)

browser = None
def get_browser(binary=None):
    global browser  
    # only one instance of a browser opens, remove global for multiple instances
    if not browser: 
        browser = webdriver.Firefox(firefox_binary=binary)
    return browser

if __name__ == "__main__":
    browser = get_browser(binary=firefox_binary)
    urls = (
        ('tor browser check', 'https://check.torproject.org/'),
        ('ip checker', 'http://icanhazip.com')
    )
    for url_name, url in urls:
        print "getting", url_name, "at", url
        browser.get(url) 
```

在 Ubuntu 系统上，我可以通过 selenium 运行 Tor 浏览器。这台机器在端口 9051 上运行 Tor，在端口 8118 上使用 Tor 的 privoxy http 代理。为了让 Tor 浏览器通过 Tor 检查页面，我必须将 http 代理设置为 privoxy。

```
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary
from selenium.webdriver.common.proxy import Proxy, ProxyType
from selenium import webdriver
browser = None

proxy_address = "127.0.0.1:8118"
proxy = Proxy({
    'proxyType': ProxyType.MANUAL,
    'httpProxy': proxy_address,
})

tor = '/usr/bin/tor-browser/Browser/firefox'
firefox_binary = FirefoxBinary(tor)

urls = (
    ('tor_browser_check', 'https://check.torproject.org/'),
    ('icanhazip', 'http://icanhazip.com'),
)
keys, _ = zip(*urls)
urls_map = dict(urls)

def get_browser(binary=None, proxy=None):
    global browser
    if not browser:
        browser = webdriver.Firefox(firefox_binary=binary, proxy=proxy)
    return browser

if __name__ == "__main__":
    browser = get_browser(binary=firefox_binary, proxy=proxy)
    for resource in keys:
        browser.get(urls_map.get(resource)) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-05T14:49:15.290

//只需检查您的 Tor 浏览器的端口号并在 //code 中相应地更改它

```
from selenium import webdriver
profile=webdriver.FirefoxProfile()
profile.set_preference('network.proxy.type', 1)
profile.set_preference('network.proxy.socks', '127.0.0.1')
profile.set_preference('network.proxy.socks_port', 9150)
browser=webdriver.Firefox(profile)
browser.get("http://yahoo.com")
browser.save_screenshot("screenshot.png")
browser.close() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-07-01T22:10:35.670

To open [tor](/questions/tagged/tor "show questions tagged 'tor'") browser with [Selenium](https://stackoverflow.com/questions/54459701/what-is-selenium-and-what-is-webdriver/54482491#54482491) driven [GeckoDriver](https://stackoverflow.com/questions/43660195/why-firefox-requires-geckodriver/43661697#43661697) you need to:

*   Download and install the [TOR Browser](https://www.torproject.org/download/)

*   Download the latest [GeckoDriver v0.26.0](https://github.com/mozilla/geckodriver/releases/tag/v0.26.0) and place it in your system.

*   Install the recent *Mozilla Firefox v77.0.1* browser.

*   You can use the following code block to open the *TOR* enabled browser:

    ```
    from selenium import webdriver
    from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
    import os

    torexe = os.popen(r'C:\Users\username\Desktop\Tor Browser\Browser\TorBrowser\Tor\tor.exe')
    profile = FirefoxProfile(r'C:\Users\username\Desktop\Tor Browser\Browser\TorBrowser\Data\Browser\profile.default')
    profile.set_preference('network.proxy.type', 1)
    profile.set_preference('network.proxy.socks', '127.0.0.1')
    profile.set_preference('network.proxy.socks_port', 9050)
    profile.set_preference("network.proxy.socks_remote_dns", False)
    profile.update_preferences()
    firefox_options = webdriver.FirefoxOptions()
    firefox_options.binary_location = r'C:\Program Files\Mozilla Firefox\firefox.exe'
    driver = webdriver.Firefox(firefox_profile= profile, options = firefox_options, executable_path=r'C:\WebDrivers\geckodriver.exe')
    driver.get("http://check.torproject.org") 
    ```

*   Browser Snapshot:

![torFirefox_torproject](../Images/4352057ecfd0b5c50dcb1be5fd736728.png)

* * *

## Alternative using Firefox Nightly

As an alternative you can also download, install and use the recent *Firefox Nightly v79.0a1* browser.

*   Code Block:

    ```
    from selenium import webdriver
    from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
    import os

    torexe = os.popen(r'C:\Users\username\Desktop\Tor Browser\Browser\TorBrowser\Tor\tor.exe')
    profile = FirefoxProfile(r'C:\Users\username\Desktop\Tor Browser\Browser\TorBrowser\Data\Browser\profile.default')
    profile.set_preference('network.proxy.type', 1)
    profile.set_preference('network.proxy.socks', '127.0.0.1')
    profile.set_preference('network.proxy.socks_port', 9050)
    profile.set_preference("network.proxy.socks_remote_dns", False)
    profile.update_preferences()
    firefox_options = webdriver.FirefoxOptions()
    firefox_options.binary_location = r'C:\Program Files\Firefox Nightly\firefox.exe'
    driver = webdriver.Firefox(firefox_profile= profile, options = firefox_options, executable_path=r'C:\WebDrivers\geckodriver.exe')
    driver.get("http://check.torproject.org") 
    ```

*   Browser Snapshot:

![torNightly_torproject](../Images/c3627d709a33cd39763f66838d18d6a0.png)

* * *

## Alternative using Chrome

As an alternative you can also download, install and use the recent *Chrome v84* browser.

*   Code Block:

    ```
    from selenium import webdriver
    import os

    torexe = os.popen(r'C:\Users\username\Desktop\Tor Browser\Browser\TorBrowser\Tor\tor.exe')
    PROXY = "socks5://localhost:9050" # IP:PORT or HOST:PORT
    options = webdriver.ChromeOptions()
    options.add_argument('--proxy-server=%s' % PROXY)
    driver = webdriver.Chrome(chrome_options=options, executable_path=r'C:\WebDrivers\chromedriver.exe')
    driver.get("http://check.torproject.org") 
    ```

*   Browser Snapshot:

![torChrome_torproject](../Images/468f1ed65b426e4d4c781ccc626fcb51.png)

* * *

## References

You can find a couple of relevant detailed discussions in:

*   [How to connect to Tor browser using Python](https://stackoverflow.com/questions/53942553/how-to-connect-to-tor-browser-using-python/53942783#53942783)
*   [How to use Tor with Chrome browser through Selenium](https://stackoverflow.com/questions/55689701/how-to-use-tor-with-chrome-browser-through-selenium/55702188#55702188)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-29T10:19:13.730

很多答案都朝着正确的方向发展，但这正是对我有用的：

**在 Ubuntu 上：**

您需要使用 apt 命令或其他方法安装 Tor，而不是二进制版本。

安装指南：

[https://linuxconfig.org/how-to-install-tor-browser-in-ubuntu-18-04-bionic-beaver-linux](https://linuxconfig.org/how-to-install-tor-browser-in-ubuntu-18-04-bionic-beaver-linux)

在 sample.py 中，您可能需要：

*   设置 Firefox 的配置文件，`torrc`其中大部分时间位于`/etc/tor/`.
*   将二进制文件设置为 Tor 的 Firefox 二进制文件，因为 Tor 只是构建在 Firefox 之上的一系列配置。

您还需要 geckodriver 使用 selenium 自动执行 firefox：

*   [https://github.com/mozilla/geckodriver/releases](https://github.com/mozilla/geckodriver/releases)（适用于 0.21.0）
*   提炼
*   `chmod +x geckodriver`
*   `export PATH=$PATH:/path-to-extracted-file/geckodriver`

注意：

*   “network.proxy.socks_port”= 9150
*   内部 torrc ControlPort 9050, CookieAuthentication 1
*   打开 Tor 浏览器
*   `sudo lsof -i -P -n | grep LISTEN`脚本中tor网络的LISTEN端口必须相同
*   **在TorBrowser 打开**时运行 python 脚本

 **感谢 user2426679 [https://stackoverflow.com/a/21836296/3816638](https://stackoverflow.com/a/21836296/3816638)的设置。

```
from selenium import webdriver
from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary
from selenium.webdriver.common.proxy import Proxy, ProxyType
from selenium.webdriver.firefox.options import Options
import subprocess
import os

profileTor = '/etc/tor/' #  torrc
binary = os.path.expanduser("~/.local/share/torbrowser/tbb/x86_64/tor-browser_en-US/Browser/firefox")

firefox_binary = FirefoxBinary(binary)
firefox_profile = FirefoxProfile(profileTor)

#set some privacy settings
firefox_profile.set_preference( "places.history.enabled", False )
firefox_profile.set_preference( "privacy.clearOnShutdown.offlineApps", True )
firefox_profile.set_preference( "privacy.clearOnShutdown.passwords", True )
firefox_profile.set_preference( "privacy.clearOnShutdown.siteSettings", True )   
firefox_profile.set_preference( "privacy.sanitize.sanitizeOnShutdown", True )
firefox_profile.set_preference( "signon.rememberSignons", False )
firefox_profile.set_preference( "network.cookie.lifetimePolicy", 2 )
firefox_profile.set_preference( "network.dns.disablePrefetch", True )
firefox_profile.set_preference( "network.http.sendRefererHeader", 0 )

#set socks proxy
firefox_profile.set_preference( "network.proxy.type", 1 )
firefox_profile.set_preference( "network.proxy.socks_version", 5 )
firefox_profile.set_preference( "network.proxy.socks", '127.0.0.1' )
firefox_profile.set_preference( "network.proxy.socks_port", 9150 )
firefox_profile.set_preference( "network.proxy.socks_remote_dns", True )

#if you're really hardcore about your security
#js can be used to reveal your true i.p.
firefox_profile.set_preference( "javascript.enabled", False )

#get a huge speed increase by not downloading images
firefox_profile.set_preference( "permissions.default.image", 2 )

options = Options()
options.set_headless(headless=False)

driver = webdriver.Firefox(firefox_profile=firefox_profile,firefox_options=options)

print(driver)

driver.get("https://check.torproject.org/")
driver.save_screenshot("screenshot.png") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-09T21:33:28.473

```
from selenium import webdriver
from selenium.webdriver.firefox.firefox_profile import FirefoxProfile
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary

#path to TOR binary
binary = FirefoxBinary(r'...\Tor Browser\Browser\firefox.exe')
#path to TOR profile
profile = FirefoxProfile(r'...\Tor Browser\Browser\TorBrowser\Data\Browser\profile.default')

driver = webdriver.Firefox(firefox_profile= profile, firefox_binary= binary)
driver.get("http://icanhazip.com")
driver.save_screenshot("screenshot.png")
driver.quit() 
```

在 Windows 10 上使用 Python 3.5.1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-27T10:08:57.940

使用红宝石，

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile.proxy = Selenium::WebDriver::Proxy.new :socks => '127.0.0.1:9050' #port where TOR runs
browser = Watir::Browser.new :firefox, :profile => profile 
```

要确认您使用的是 Tor，请使用[https://check.torproject.org/](https://check.torproject.org/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-14T11:17:34.453

我对此进行了调查，除非我弄错了，否则从表面上看这是不可能的。

不能这样做的原因是：

*   Tor 浏览器基于 Firefox 代码。
*   Tor 浏览器对 Firefox 代码有特定的补丁，以防止外部应用程序与 Tor 浏览器通信（包括阻止 Components.Interfaces 库）。
*   Selenium Firefox WebDriver 通过 Javascript 库与浏览器通信，如上所述，这些库被 Tor 浏览器阻止。

这大概是因为 Tor 浏览器之外的任何人，无论是在您的盒子上还是在互联网上，都不会知道您的浏览。

您的替代方案是：

*   通过 Firefox 而不是 Tor 浏览器使用 Tor 代理（请参阅问题评论中的链接）。
*   使用 Tor 浏览器补丁重建 Firefox 源代码，不包括那些阻止与 Tor 浏览器进行外部通信的补丁。

我建议前者。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-08T07:44:23.697

```
System.setProperty("webdriver.firefox.marionette", "D:\\Lib\\geckodriver.exe");
        String torPath = "C:\\Users\\HP\\Desktop\\Tor Browser\\Browser\\firefox.exe";
        String profilePath = "C:\\Users\\HP\\Desktop\\Tor Browser\\Browser\\TorBrowser\\Data\\Browser\\profile.default";

        File torProfileDir = new File(profilePath);
        FirefoxBinary binary = new FirefoxBinary(new File(torPath));
        FirefoxProfile torProfile = new FirefoxProfile(torProfileDir);

        FirefoxOptions options = new FirefoxOptions();
        options.setBinary(binary);
        options.setProfile(torProfile);
        options.setCapability(FirefoxOptions.FIREFOX_OPTIONS,options);
        WebDriver driver = new FirefoxDriver(options); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-14T15:55:22.823

作为仅控制 Firefox 的 Selenium 的更新替代品，请查看[Marionette](https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette)。要与 Tor 浏览器一起使用，请在启动时通过以下方式启用木偶

```
Browser/firefox -marionette 
```

（在捆绑包内）。然后，您可以通过连接

```
from marionette import Marionette
client = Marionette('localhost', port=2828);
client.start_session() 
```

并加载一个新页面，例如通过

```
url='http://mozilla.org'
client.navigate(url); 
```

有关更多示例，请[参阅教程](http://marionette-client.readthedocs.org/en/latest/basics.html)。

* * *

### 较旧的答案

Tor 项目对其浏览器进行了[selenium 测试。](https://gitweb.torproject.org/boklm/tor-browser-bundle-testsuite.git)它的工作原理如下：

```
from selenium import webdriver
ffbinary = webdriver.firefox.firefox_binary.FirefoxBinary(firefox_path=os.environ['TBB_BIN'])
ffprofile = webdriver.firefox.firefox_profile.FirefoxProfile(profile_directory=os.environ['TBB_PROFILE'])
self.driver = webdriver.Firefox(firefox_binary=ffbinary, firefox_profile=ffprofile)
self.driver.implicitly_wait(30)
self.base_url = "about:tor"
self.verificationErrors = []
self.accept_next_alert = True
self.driver.get("http://check.torproject.org/")
self.assertEqual("Congratulations. This browser is configured to use Tor.", driver.find_element_by_css_selector("h1.on").text) 
```

如您所见，这使用环境变量`TBB_BIN`以及`TBB_PROFILE`浏览器包和配置文件。您可能可以在您的代码中硬编码这些。**

# r - 为 R 中的 x 轴离散数据添加更多间距

> ID：15316311
> 
> 赞同：-2
> 
> 时间：2013-03-09T21:49:41.357
> 
> 标签：r, statistics, ggplot2

![在此处输入图像描述](../Images/c03ce425e174e8b9405ba045a7080a37.png)

如您所见，X 轴上每个项目之间的间距非常紧凑。有没有办法增加呢？

合并数据框 ( [https://dl.dropbox.com/u/81597211/Untitled.pdf](https://dl.dropbox.com/u/81597211/Untitled.pdf) )

```
row.names   LCA_CASE_WORKLOC1_CITY  LCA_CASE_JOB_TITLE  LCA_CASE_WORKLOC1_STATE LCA_CASE_WAGE_RATE_FROM Company
    4726    REDWOOD SHORES  SOFTWARE DEVELOPER - ARCHITECT  CA  263500.00   ORACLE
    102663  DENVER  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CO  170000.00   ORACLE
    103621  DENVER  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CO  170000.00   ORACLE
    95210   SANTA CLARA SOFTWARE ENGINEER (SOFTWARE DEVELOPER 4)    CA  155000.00   ORACLE
    18858   SANTA CLARA SOFTWARE ENGINEER (CONSULTING SOLUTION DIRECTOR)    CA  150000.00   ORACLE
    19514   IRVING  CONSULTING TECHNICAL MANAGER    TX  150000.00   ORACLE
    57054   REDWOOD SHORES  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 4)    CA  150000.00   ORACLE
    76335   REDWOOD SHORES  SOFTWARE ENGINEER (APPLICATIONS DEVELOPER 4)    CA  150000.00   ORACLE
    79964   REDWOOD SHORES  SOFTWARE ENGINEER (SOFTWARE DEVELOPER 5)    CA  150000.00   ORACLE 
```

代码

```
colour = factor(merged$Company)
xcolor = factor(merged$LCA_CASE_WORKLOC1_STATE)
qplot(merged[[2]], merged[[4]], colour = colour, xlab="Positions", ylab ="Salary", main="H1B Salary 2012") + theme(axis.text.x=element_text(angle=90,vjust=0.5, hjust=1, size=10, color= xcolor, lineheight=10)) + scale_y_continuous(breaks=seq(0,300000, 10000)) + theme(panel.grid.minor = element_line(colour = "red", linetype = "dotted")) + scale_x_discrete(merged[[2]]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:34:38.670

为了增加标签的可读性，您可以通过添加`+ coord_flip()` [see here 来切换轴。](http://docs.ggplot2.org/0.9.3/coord_flip.html)

您可以做的第二件事是（添加后`+coord_flip()`）在导出绘图并将其打印在 A3 纸上时调整高度和宽度。例如使用[ggsave](http://svitsrv25.epfl.ch/R-doc/library/ggplot2/html/ggsave-ao.html)。

# c# - 有没有办法将图像转换为 0 和 1 的多维数组

> ID：15316312
> 
> 赞同：1
> 
> 时间：2013-03-09T21:49:56.893
> 
> 标签：c#, winforms, image-processing

我想将图像转换为具有 0 和 1 的多维数组。图像将是：

![在此处输入图像描述](../Images/95ea35435f2afea27984c8729d62b817.png)

我不想将此图像存储到数组中，“黑色”存储为 1，“白色”存储为 0。该数组将是 8 行和 6 列：

```
int[,] imgArray = new int[8,6]; 
```

有没有办法在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:56:07.073

如果您使用的是[`Bitmap`](http://msdn.microsoft.com/en-us/library/4e7y164x.aspx)，则可以像这样填充数组：

```
var bitmap = new Bitmap(@"C:\MyImage.png");
var imgArray = new int[bitmap.Width,bitmap.Height];
var blackArgb = Color.Black.ToArgb();
var whiteArgb = Color.White.ToArgb();
for (var i = 0; i < bitmap.Width; ++i)
{
    for (var j = 0; j < bitmap.Height; ++j)
    {
        var pixelCol = bitmap.GetPixel(i, j);
        if (pixelCol.ToArgb() == blackArgb)
        {
            imgArray[i, j] = 1;
        }
        else if (pixelCol.ToArgb() == whiteArgb)
        {
            imgArray[i, j] = 0;
        }
        else
            throw new InvalidOperationException("Pixel color must be black or white");
    }
} 
```

# scala - 从语言环境生成代码而无需解释

> ID：15316313
> 
> 赞同：0
> 
> 时间：2013-03-09T21:50:00.450
> 
> 标签：scala, code-generation, isabelle

我很想`locale`直接从定义中生成代码，而不需要解释。例子：

```
(* A locale, from the code point of view, similar to a class *)
locale MyTest =
  fixes L :: "string list"
  assumes distinctL: "distinct L"
  begin
    definition isInL :: "string => bool" where
      "isInL s = (s ∈ set L)"
  end 
```

实例化的假设`MyTest`是可执行的，我可以为它们生成代码

```
definition "can_instance_MyTest L = distinct L"  
lemma "can_instance_MyTest L = MyTest L"
  by(simp add: MyTest_def can_instance_MyTest_def)
export_code can_instance_MyTest in Scala file - 
```

我可以定义一个函数来执行`isInL`任意的定义`MyTest`。

```
definition code_isInL :: "string list ⇒ string ⇒ bool option" where
"code_isInL L s = (if can_instance_MyTest L then Some (MyTest.isInL L s) else None)"

lemma "code_isInL L s = Some b ⟷ MyTest L ∧ MyTest.isInL L s = b"
  by(simp add: code_isInL_def MyTest_def can_instance_MyTest_def) 
```

但是，代码导出失败：

```
export_code code_isInL in Scala file -
No code equations for MyTest.isInL 
```

为什么我想做这样的事情？我正在使用 a`locale`的上下文，`valid_graph`例如[，这里](http://afp.sourceforge.net/browser_info/current/HOL/Collections/Refine_Monadic/Dijkstra_Shortest_Path/Graph.html)是有限的。测试图表是否有效很容易。现在我想将我的图形算法的代码导出到 Scala 中。当然，代码应该在任意有效图上运行。

我正在考虑类似于这样的 Scala 类比：

```
class MyTest(L: List[String]) {
require(L.distinct)
def isInL(s: String): Bool = L contains s
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:59:22.990

解决这个问题的一种方法是使用不变量进行数据类型细化（参见`isabelle doc codegen`第 3.3 节）。因此，可以将有效性假设（`distinct L`在您的情况下为 ）移至新类型。考虑以下示例：

```
typedef 'a dlist = "{xs::'a list. distinct xs}"
morphisms undlist dlist
proof
  show "[] ∈ ?dlist" by auto
qed 
```

这定义了一种新类型，其元素都是具有不同元素的列表。我们必须为代码生成器显式设置这种新类型。

```
lemma [code abstype]: "dlist (undlist d) = d"
  by (fact undlist_inverse) 
```

然后，在语言环境中，我们假设“免费”（因为新类型的每个元素都保证它；但是，在某些时候，我们必须将一组基本操作从具有不同元素的列表提升到`'a dlist`s）。

```
locale MyTest =
  fixes L :: "string dlist"
begin
  definition isInL :: "string => bool" where
    "isInL s = (s ∈ set (undlist L))"
end 
```

在这一点上，我们可以给代码生成器（无条件）方程。

```
lemma [code]: "MyTest.isInL L s ⟷ s ∈ set (undlist L)"
  by (fact MyTest.isInL_def)

export_code MyTest.isInL in Haskell file - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:50:31.487

多亏了克里斯的提示，我找到了一种方法。

定义一个函数来测试先决条件/假设以实例化一个`MyTest`

```
definition "can_instance_MyTest L = distinct L" 
```

该命令`term MyTest`显示`MyTest`是 type `string list => bool`，这意味着 that`MyTest`是一个谓词，它接受一个参数并测试该参数是否满足`MyTest`的假设。我们引入了一个代码方程 ( `[code]`)，它用`MyTest`可执行实例测试器代替。代码生成器现在可以为出现的情况生成代码，例如，`MyTest [a,b,c]`

```
lemma [code]: "MyTest = can_instance_MyTest"
  by(simp add:fun_eq_iff MyTest_def can_instance_MyTest_def)

export_code MyTest in Scala file - 
```

我们屈服（*为了可读性，**我替换`List[Char]`为`String`*）：

```
def can_instance_MyTest[A : HOL.equal](l: List[A]): Boolean =
  Lista.distinct[A](l)

def myTest: (List[String]) => Boolean =
  (a: List[String]) => can_instance_MyTest[String](a) 
```

更易读的伪代码：

```
def myTest(l: List[String]): Boolean = l.isDistinct 
```

现在我们需要`isInL`. 我们利用预定义的常量`undefined`。`L`如果不是不同的，此代码将引发异常。

```
definition code_isInL :: "string list ⇒ string ⇒ bool" where
"code_isInL L s = (if can_instance_MyTest L then s ∈ set L else undefined)"

export_code code_isInL in Scala file - 
```

我们产生：

```
def code_isInL(l: List[String], s:String): Boolean =
  (if (can_instance_MyTest[String](l)) Lista.member[String](l, s)
    else sys.error("undefined"))*) 
```

我们只需要证明`code_isInL`是正确的：

```
lemma "b ≠ undefined ⟹ code_isInL L s = b ⟷ MyTest L ∧ MyTest.isInL L s = b"
  by(simp add: code_isInL_def MyTest_def can_instance_MyTest_def MyTest.isInL_def)

(* Unfortunately, the other direction does not hold. The price of undefined. *)
lemma "¬ MyTest L  ⟹ code_isInL L s = undefined"
  by(simp add: code_isInL_def can_instance_MyTest_def MyTest_def) 
```

# svg - d3.js- noob- 如何通过路径 ID 将数据绑定到来自外部 svg 的路径？

> ID：15316325
> 
> 赞同：1
> 
> 时间：2013-03-09T21:51:33.767
> 
> 标签：svg, d3.js

我正在尝试使用县的 SVG 文件和每个县的数据 csv 制作叶绿素地图。我是 D3 的新手，正在研究一个使用 geoJSON 的示例。（谢谢 Scott Murray）。该示例将数据与形状联系起来，如下所示：

```
d3.json("us-states.json", function(json) {

                    //Merge the ag. data and GeoJSON
                    //Loop through once for each ag. data value
                    for (var i = 0; i < data.length; i++) {

                        var dataState = data[i].state;              //Grab state name
                        var dataValue = parseFloat(data[i].value);  //Grab data value, and convert from string to float

                        //Find the corresponding state inside the GeoJSON
                        for (var j = 0; j < json.features.length; j++) {

                            var jsonState = json.features[j].properties.name;

                            if (dataState == jsonState) {

                                //Copy the data value into the JSON
                                json.features[j].properties.value = dataValue;

                                //Stop looking through the JSON
                                break;

                            }
                        }       
                    }

                    //Bind data and create one path per GeoJSON feature
                    svg.selectAll("path")
                       .data(json.features)
                       .enter()
                       .append("path")
                       .attr("d", path)
                       .style("fill", function(d) {
                            //Get data value
                            var value = d.properties.value;

                            if (value) {
                                //If value exists…
                                return color(value);
                            } else {
                                //If value is undefined…
                                return "#ccc";
                            }
                       }); 
```

但是我在将其适应 svg 时遇到了麻烦。我不需要让它创建路径——它们已经在那里了，但是基本上如何写：“如果 data.County == 路径 id，将该行的数据绑定到路径”？

任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:47:29.793

看看[https://github.com/mbostock/d3/wiki/Selections#wiki-datum](https://github.com/mbostock/d3/wiki/Selections#wiki-datum)。
执行以下操作：

```
// Where each path has an id
var paths = d3.selectAll('.my-paths path'),
 elm,
 data = [] // your data here,
 your_criteria_here;

data.forEach(function (x, i, a) {

    your_criteria_here = x.criteria;

    // No data is available for the elements in this case yet
    // @see https://github.com/mbostock/d3/wiki/Selections#wiki-each
    paths.each(function (d, i) {

      // Wrap dom element in d3 selection
      elm = d3.select(this);

      if (elm.attr('id') == your_criteria_here) {
          // Do something here ...
      }

    });

}); 
```

请注意，此示例使用 [].forEach 是 ecmascript 5 功能（@see [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)）

# php - 会话未按预期工作

> ID：15316329
> 
> 赞同：1
> 
> 时间：2013-03-09T21:51:54.250
> 
> 标签：php, session

几个月来，我一直在毫无问题地使用以下代码来跟踪我网站上的唯一会话，但它最近因未知原因停止工作。如果我在单独的文件中测试代码，它会按我最初的预期工作。

代码检查会话是否存在，如果不存在，则创建它并将其设置为 TRUE。然后它执行第二次检查以查看会话是否为 TRUE，然后将其更改为 FALSE 并将命中存储在数据库中。这在每个会话中发生一次。

实现这一点的代码是：

```
<?php

session_start();

// If the session DOES NOT EXIST, make it and set it to TRUE.
if(!isset($_SESSION['new_visit']))
{
    $_SESSION['new_visit'] = true;
}

// If the session is TRUE, make it false.
if($_SESSION['new_visit'] == true)
{       
    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));

    $_SESSION['new_visit'] = false;
}

echo $_SESSION['unique_session_id']; 
```

当我按预期运行此代码时，无论我刷新页面多少次，输出都不会改变。该`'unique_session_id'`变量始终不变，因为每个`if`语句只执行一次。但是，我的生产代码包含这个确切的代码，但突然停止工作。我的生产代码是这样的：

```
<?php

if(empty($article_data))
{
    $no_article = true;
}

$options        = $this->db->get_options();
$server_options = $this->db->server_options();

// Check site status (on/off).
if($options['status'] == "off")
{
    echo $options['offline_message'];

    exit(); // Equal to die.
}

if($server_options['force_ssl'] == "on")
{
    if($_SERVER["HTTPS"] != "on") 
    {
        header("HTTP/1.1 301 Moved Permanently");
        exit(header("Location: https://" . $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"]));
    }
}

$this->db->store_hit();
$this->db->store_ip();

//----------------------------------------------------------------------------------------------------------
// Store visits (individual sessions). Visits are not unique hits. Visits are the number of unique sessions,
// so a single person may accumulate many visits (sessions), i.e., returning users.
//----------------------------------------------------------------------------------------------------------

// If the session DOES NOT EXIST, make it and set it to TRUE.
if(!isset($_SESSION['new_visit']))
{
    $_SESSION['new_visit'] = true;      
}

// If the session is TRUE, make it false.
if($_SESSION['new_visit'] == true)
{
    $this->db->store_visit();

    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));

    $_SESSION['new_visit'] = false;
}

?><!DOCTYPE html>
<html>

...

</html> 
```

正如您所看到的，这段代码是相同的，但是每次我刷新页面时，`unique_session_id`变量都会发生变化，如果逻辑不受影响，这是不可能的。我唯一的结论是会话在页面刷新之间被删除或丢失。

***备注***：

*   我正在使用从头开始编写的 MVC 模式。
*   `session_start()`在任何其他 PHP 行之前被调用 `index.php`。
*   我尝试移动`session_start()`到文件中的各个位置，包括在创建会话之前。这无济于事。
*   我试过使用`session_write_close()`，它不起作用。

无论发生多少次页面刷新，这两个逻辑语句在每个会话中都应该只执行一次，并且已经以这种方式工作了 2-3 个月。为什么它们在每次页面刷新后突然开始执行？每次页面刷新时逻辑都被评估为 TRUE 的会话变量发生了什么？

**编辑**

会话问题现已通过从 Web 主机请求新的 php.ini 文件得到修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:06:02.767

您的代码按您编写的方式工作，请查看代码注释。

```
if(!isset($_SESSION['new_visit'])) //1st time is not set so enter's to statement
{
    $_SESSION['new_visit'] = true;    //making  $_SESSION['new_visit'] true
}

if($_SESSION['new_visit'] == true) //1st time its true
{
    $this->db->store_visit();
    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));
    $_SESSION['new_visit'] = false; //You make it false
} 
```

但是当 $_SESSION['new_visit'] 为 false 时，这意味着 $_SESSION['new_visit'] 已设置。现在第二次或更多次：

```
if(!isset($_SESSION['new_visit'])) //variable is set, and it will not enter here
{
    $_SESSION['new_visit'] = true; // variable stays false
}

if($_SESSION['new_visit'] == true) //variable is false !!!
{
    $this->db->store_visit();
    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));
    $_SESSION['new_visit'] = false; 
}
// Finally $_SESSION['unique_session_id'] stays same. 
```

您可以使用`unset($_SESSION['new_visit']);`，或者如果它仅用于此语句或签入一页，请使用变量，例如`$new_visit`不使用会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:16:02.740

更新：

将此特定会话处理代码保存在一个单独的文件中，您在所有文件的开头都需要该文件。

我注意到你必须至少重新加载一次才能获得会话 ID，而不是你可以这样做，也简化了复杂性：

```
if(!isset($_SESSION['new_visit']))
{
    $_SESSION['new_visit'] = true;
    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));
}
echo $_SESSION['unique_session_id']; 
```

我还大胆猜测您没有正确使用 session_start() 并且在您曾经进入的所有文件的开头。一旦你进入一个没有它或使用不正确的页面，事情就会搞砸。

* * *

注意：您可以使用

```
session_destroy(); 
```

删除每个设置的会话。你也可以使用

```
unset($_SESSION['new_visit']); 
```

取消设置某个会话。

# jquery - 使用 jquery 的 codeigniter 自动完成功能无法正常工作 ~ 500（内部服务器错误）

> ID：15316333
> 
> 赞同：0
> 
> 时间：2013-03-09T21:52:05.203
> 
> 标签：jquery, mysql, codeigniter, autocomplete

我知道在 SO 上有一些与此相关的问题，但没有人回答我的具体问题。

我一直在尝试使用[本](http://vortexdev.netii.net/article_16/How_to%3a_Autocomplete_with_CodeIgniter_and_jQuery)教程获得自动完成输入

该页面正确加载而没有错误，但是当我插入一封信时，我在开发者控制台中收到错误： `GET http://localhost/autocomplete/getResult/ 500 (Internal Server Error)`

错误的来源来自`jquery-1.9.1.min.js:5`.

Codeigniter 中是否有需要更改以允许 GET 工作的设置，或者我的代码是否存在语法问题：

**控制器**

```
 <?php

class Autocomplete extends CI_Controller
{
    function __construct() {
        parent::__construct();
        $this->load->model('autocomplete_model'); 
    }

    function index()
    {
        $this->load->view('autocomplete');
    }

    function getResult($title)
    {
        var $result = $this->autocomplete_model->a_method('customerName',$title);
        echo json_encode($result);

    }
} 
```

**看法**

```
<html>
   <head>
      <title>
         test
      </title>
      <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
   </head>
<body>

   <form>

      <label for="search">Search</label>
      <input type="text" id="search">
      <input type="hidden" value="<?php base_url() ?>" id="hiddenurl">
      <input type="submit" value="Search">

   </form>
<?php echo  base_url(); ?>
   <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/autocomplete.js" type="text/javascript"></script> 

</body>

</html> 
```

**自动完成.js**

```
$(document).ready(function(){
    $('#search').keypress(function(e){
        if(e.which == 13)
            {
                e.preventDefault();
            }

        var searched=$('#search').val()
        var fullurl= $('#hiddenurl').val() + 'autocomplete/getResult/' + searched
        $.getJSON(fullurl,function(result){

            var elements = [];
            $.each(result,function(i,val){
                elements.push(val.title)
            })
            $('#search').autocomplete({
                source:elements
            })
        })
    })
}) 
```

本教程使用`jquery-1.6.2.min.js`和`jquery-ui-1.8.16.custom.min.js`。

我正在使用`jquery-1.9.1.min.js`和`jquery-ui-1.10.1.custom.min.js`。我认为这不会是问题，因为这些是 jquery 的更高版本。

我的配置文件有以下与 CSRF 相关的设置：

```
$config['csrf_protection'] = FALSE;
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name';
$config['csrf_expire'] = 7200; 
```

任何建议都值得赞赏，当然这很简单。

**更新**

根据@undefined 的帮助，对我的代码进行了以下更改：

**控制器**

```
 <?php

class Autocomplete extends CI_Controller
{
    function __construct() {
        parent::__construct();
        $this->load->model('autocomplete_model'); 
    }

    function index()
    {
        $this->load->view('autocomplete');
    }

    function getResult($title)
    {
        var $result = $this->autocomplete_model->a_method('customerName',$title);
        echo json_encode($result);

    }
} 
```

**模型**

```
<?php
class autocomplete_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }

    function a_method() {
        $query = $this->db->like('CustomerName',$title);
        $query = $this->db->get('customers');
    return $query->result();

    }
} 
```

**视图 - 未更改**

```
<html>
   <head>
      <title>
         test
      </title>
      <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
   </head>
<body>
   <form>
      <label for="search">Search</label>
      <input type="text" id="search">
      <input type="hidden" value="<?php base_url() ?>" id="hiddenurl">
      <input type="submit" value="Search">
   </form>
<?php echo  base_url(); ?>
   <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/autocomplete.js" type="text/javascript"></script> 
</body>
</html> 
```

**autocomplete.js - 不变**

```
$(document).ready(function(){
    $('#search').keypress(function(e){
        if(e.which == 13)
            {
                e.preventDefault();
            }

        var searched=$('#search').val()
        var fullurl= $('#hiddenurl').val() + 'autocomplete/getResult/' + searched
        $.getJSON(fullurl,function(result){

            var elements = [];
            $.each(result,function(i,val){
                elements.push(val.title)
            })
            $('#search').autocomplete({
                source:elements
            })
        })
    })
}) 
```

我想我现在犯了这个可怕的错误，但是由于我处于重要的学习曲线上，因此我们很感谢您的建议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:19:09.833

所以我放弃了上述方法，而是使用了一个更简单的 jquery 自动完成功能。

**控制器：** [sales.php]

```
class Sales extends MY_Controller{

      function index(){
        $this->load->view('sales/new_order_details');
      } 

      function get_customers(){
        $this->load->model('Sales_model');
        if (isset($_GET['term'])){
          $q = strtolower($_GET['term']);
          $this->Sales_model->get_customer($q);
        }
      }
} 
```

**型号：** [sales_model.php]

```
<?php
// (Array of Strings)
class Sales_model extends MY_Model{

  function get_customer($q){
    $this->db->select('CustomerName');
    $this->db->like('CustomerName', $q);
    $query = $this->db->get('Customers');
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['CustomerName'])); //build an array
      }
      echo json_encode($row_set); //format the array into json data
    }
  }
} 
```

**看法：**

```
<html>
   <head> 
      <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
      <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
      <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
      <script src="<?php echo base_url() ?>application/scripts/autocomplete.js" type="text/javascript"></script> 
   </head>
<body>
   <form>
      <label for="customer">Customer</label>
      <input type="text" id="customer" />
   </form> 
</body>
</html> 
```

**最后，autocomplete.js：**

```
$(function(){
  $("#customer").autocomplete({
    source: "sales/get_customers"
  });
}); 
```

显然你需要 jquery 文件。可以在[http://jqueryui.com/](http://jqueryui.com/)找到，自定义构建并包含自动完成小部件。

完美而轻松地工作。干杯。

# java - OpenGL法线误解？

> ID：15316335
> 
> 赞同：0
> 
> 时间：2013-03-09T21:52:09.417
> 
> 标签：java, opengl, vertex, lighting, normals

我试图让我的照明在 OpenGL 中工作，使用 LWJGL 作为实现库。我认为我遇到的问题是我没有正确设置我的法线，因此照明在某些角度不起作用。这是我正在测试的多维数据集的代码：

```
glBegin(GL_QUADS);

glColor3f(r,g,b);

glNormal3f(position.x, position.y, position.z - radius - 0.1f);
glVertex3f(position.x + radius, position.y + radius, position.z - radius);
glVertex3f(position.x + radius, position.y - radius, position.z - radius);
glVertex3f(position.x - radius, position.y - radius, position.z - radius);
glVertex3f(position.x - radius, position.y + radius, position.z - radius);

glNormal3f(position.x, position.y, position.z + radius + 0.1f);
glVertex3f(position.x + radius, position.y + radius, position.z + radius);
glVertex3f(position.x + radius, position.y - radius, position.z + radius);
glVertex3f(position.x - radius, position.y - radius, position.z + radius);
glVertex3f(position.x - radius, position.y + radius, position.z + radius);

glNormal3f(position.x - radius - 0.1f, position.y, position.z);
glVertex3f(position.x - radius, position.y + radius, position.z + radius);
glVertex3f(position.x - radius, position.y - radius, position.z + radius);
glVertex3f(position.x - radius, position.y - radius, position.z - radius);
glVertex3f(position.x - radius, position.y + radius, position.z - radius);

glNormal3f(position.x + radius + 0.1f, position.y, position.z);
glVertex3f(position.x + radius, position.y + radius, position.z + radius);
glVertex3f(position.x + radius, position.y - radius, position.z + radius);
glVertex3f(position.x + radius, position.y - radius, position.z - radius);
glVertex3f(position.x + radius, position.y + radius, position.z - radius);

glNormal3f(position.x, position.y - radius - 0.1f, position.z);
glVertex3f(position.x + radius, position.y - radius, position.z + radius);
glVertex3f(position.x - radius, position.y - radius, position.z + radius);
glVertex3f(position.x - radius, position.y - radius, position.z - radius);
glVertex3f(position.x + radius, position.y - radius, position.z - radius);

glNormal3f(position.x, position.y + radius + 0.1f, position.z);
glVertex3f(position.x + radius, position.y + radius, position.z + radius);
glVertex3f(position.x - radius, position.y + radius, position.z + radius);
glVertex3f(position.x - radius, position.y + radius, position.z - radius);
glVertex3f(position.x + radius, position.y + radius, position.z - radius);

glEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:54:45.773

法线向量是相对于顶点本身的并且总是归一化的（即：它们的长度为 1）。

所以，像这样的一行：

```
glNormal3f(position.x, position.y, position.z - radius - 0.1f); 
```

应替换为：

```
glNormal3f(0.0f, 0.0f, 1.0f); 
```

# angularjs - yeoman 1.0 与 express 的集成

> ID：15316336
> 
> 赞同：4
> 
> 时间：2013-03-09T21:52:11.207
> 
> 标签：angularjs, express, yeoman

我有一个使用 Yeoman 构建的 AngularJs Web 应用程序，想将 Express 集成到混合物中。最后一部分是我坚持的。我有 Yeoman (1.0) aka Yo，它基本上使用 Grunt 和 Bower，但不幸的是从其静态服务器上提供所有文件。
我将如何编写一个 GruntFile 让 Yeoman 1.0 为 Express 服务，而不是一个 Yo 的服务器，以及项目的目录结构应该是什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:15:57.863

您可以将`grunt-contrib-connect`Yeoman 默认设置为[`grunt-express`](https://github.com/blai/grunt-express). 它接受一个[`server`配置设置](https://github.com/blai/grunt-express#server)，您可以使用该设置在某些路由后面提供自定义逻辑。

# java - 方法因未知原因而没有表现

> ID：15316339
> 
> 赞同：2
> 
> 时间：2013-03-09T21:52:37.337
> 
> 标签：java, binary-search-tree

所以，我正在制作自己的二叉搜索树实现。在这样做的过程中，我遇到了一个不寻常的问题，我不知道它为什么会发生。

**setNode 方法：**

```
// Sets the Node at the specified Index
public void setNode(int index, NodeInterface<E> node)
{
    if(index < 0 || index >= degree)
        throw new ArrayIndexOutOfBoundsException("Index: " + index + ", Size: " + nodes.size());

    nodes.set(index, (Node<E>) node);
} 
```

变量*节点*是节点的数组列表，如果这很重要的话。

现在这是事情开始变得混乱的地方，是错误发生的地方。它位于*BinaryNode类中的**addDescendant*方法中，该方法扩展了*Node*类。

 ****addDescendant 方法：**

```
// Adds the specified Descendant to this Node
public boolean addDescendant(BinaryNode<E> node)
{
        // Determine Node Type
        if(compareTo(node) > 0) // Make Left Child
        {
            if(hasLeftChild())
                return getLeftChild().addDescendant(node);
            else
            {
                setNode(0, node); // Link Parent to Child
                // ^^^ Works Fine ^^^
                node.setNode(1, hasRightChild() ? getRightChild() : this); // Link Child to Parent or Sibling
                // ^^^ Does not Work ^^^

                return true;
            }
        }
        else if(compareTo(node) < 0) // Make Right Child
        {
            if(hasRightChild()) // Node already has a Right Child
                return getRightChild().addDescendant(node);
            else // Node does not have a Right Child
            {
                if(hasLeftChild())
                {
                    getLeftChild().setNode(1, node); // Link Sibling to Sibling
                    // ^^^ Does not Work ^^^
                }
                else
                {
                    setNode(0, node); // Link Parent to Child for the time being
                    // ^^^ Works Fine ^^^
                }

                node.setNode(1, this); // Link Child to Parent
                // ^^^ Does not Work ^^^

                return true;
            }
        }
        else // Duplicate Node
            return false;
    } 
```

这里需要注意的两个重要事项是*setNode*的使用。当我使用 0 的索引时它工作正常，但当我使用 1 的索引时它不起作用。

我没有收到任何错误或警告，代码似乎可以正常运行，但结果不是我所期望的。

该方法没有正确设置右节点，尽管它使用相同的方法设置左节点，并且效果很好。

我希望我已经提供了足够的信息，我不想用代码轰炸每个人。

**无关注意：**
如果您对我的树的连接感到困惑，那是因为它不是您典型的二叉搜索树。但是，树的实际结构应该无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:36:21.517

Not much information. But I will try:
I think you tree is more unary than binary.
If an index of 1 marks the right child of a node but also marks the parent of a node, the logic seems somehow broken to me.

Second thing is in the 'Make left child' part of `addDescendant`:
It can happen that that more than 2 nodes have the 'root' node connected to their index 1.

At 'Make Right Child' part of `addDescendant`:
`getLeftChild().setNode(1, node);` Changing nodes of child nodes without further checkings (by not-using its `addDescendant` method) is not a good idea.**

# java - 交换 ArrayList 中的两个对象

> ID：15316349
> 
> 赞同：2
> 
> 时间：2013-03-09T21:54:12.967
> 
> 标签：java, generics, arraylist, wrapper, file-handling

我正在尝试在`ArrayList`. 为此，我正在创建一个交换对象的新列表，然后用交换的*列表*完全覆盖*旧*列表。但是，我无法将旧列表中的对象添加到新列表中。

 *该程序从文本文件中获取输入，将数据读入对象（圆形和矩形，它们是 的扩展`GeometricObject`），然后将这些对象添加到被`ArrayList`调用的`objectList`.

这是代码：

```
public static <E extends Comparable<E>> void swapCells
(ArrayList<E> objectList, int left, int right) {

    /* The user may enter the two indices, "left,"
     * and, "right," in any order which they desire.
     * Because of this it will be necessary to determine
     * which is larger or "right" index, and which is
     * the smaller or "left" index
     */

    int temp;
    ArrayList<GeometricObject> swappedList = new ArrayList<GeometricObject>();

    if (left > right) {

        // Exchanges left and right
        temp = left;
        left = right;
        right = temp;

    }

    for (int i = 0; i < objectList.size(); i++) {

        if (i == left) {
            swappedList.add(objectList.get(right));
            System.out.println( swappedList.get(i).getArea());
        } else {
            swappedList.add((E) objectList.get(i));

        }

    }

} // End of swapCells 
```

我收到以下语法错误，不知道该怎么办。

> `add(GeometricObject)`类型中的方法`ArrayList<GeometricObject>`不适用于参数`(E)`

错误特别是在，`swappedList.add(objectList.get(right));`也是`wappedList.add((E) objectList.get(i));`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:14:36.530

我不相信这正是您正在寻找的答案，但它可能会有所帮助。

如果您使用 GeomtricObject 进行类型转换，您将获得一个功能代码，但是，如果您只是将其强制转换为几何对象，这将违背使用泛型的目的。

如果要将左侧对象交换到右侧位置，您还需要添加 else

您可能还想打印出 swappedList 以确认操作已完成。

```
 for (int i = 0; i < objectList.size(); i++) 
            {
                if (i == left) {
                    swappedList.add((GeometricObject) objectList.get(right));
                }else if (i == right)
                    swappedList.add((GeometricObject) objectList.get(left));
                else {
                    swappedList.add((GeometricObject) objectList.get(i));
            }
        } 
```

编辑 2：以下内容将帮助您进行您在泛型中寻找的操作。

您将需要创建一个临时并将其转换为 E。您还需要在其正确的参数和/或形式/符号中使用以下代码。

```
 E temp
        List.set(____ , _____)
        List.get(____ ) 
```

如果您仍然无法使用此交换功能，请查看不是通用的。

编辑 3：您很可能遇到与我相同的问题，并且您还需要对 Generic 进行排序。您可以使用下面的 selectionSort 方法来帮助您完成作业。您需要更改方法，使其适用于 ArrayList 而不是 Array。这意味着您将需要使用 EDIT 2 中的建议来修改下面的代码。您可能还需要使用 compareTo 方法。

```
 private static void selectionSort(int[] list, int low, int high) { 
        if (low < high) { 
          int posMax = high; 
          int theMax = list[high]; 
          for (int i = 0; i < high; i++) { 
            if (list[i] > theMax) { 
              theMax = list[i]; 
              posMax = i; 
            }// if 
          }// for 
        list[posMax] = list[high]; 
        list[high] = theMax; 
        selectionSort(list, low, high - 1); 
        }// if 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:11:13.400

您正在尝试将`E`对象添加到`GeometricObject`. 这就是你得到错误的原因。您的列表`swappedList`应该是 type `ArrayList<E>`，或者更好：`List<E>`.

另一方面，您可以将函数的类型修改为：

```
public static void swapCells(ArrayList<GeometricObject> objectList, int left, int right) 
```

哦，对你建立的这个列表做点什么。您当前的代码只是丢弃它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:14:31.250

我首先要感谢所有为回答这个问题做出贡献的人。上周的某个时候，我向老师咨询了办公时间。在编写代码之前，我的老师让我在脑海中画出问题所在，然后在纸和铅笔上画出要使用的过程的实物图。最后写完代码，解决方法如下：

```
public static <E extends Comparable<E>> void swapCells
(ArrayList<E> objectList, int left, int right) {

    /*
     * Create a temporary generic object so that the left and
     * right objects can be swapped without losing any data.
     */
    E temp = objectList.get(left);

    // Place the right object into the left position
    objectList.set(left, objectList.get(right));

    /*
     * Place the temporary (left) object into the right
     * position.
     */
    objectList.set(right, temp);

} // End of swapCells 
```

当一个人可以简单地使用一个临时对象 E 时，甚至不需要创建第二个数组列表。*

# svg - D3js - 圆位置与圆或曲线路径的半径

> ID：15316350
> 
> 赞同：1
> 
> 时间：2013-03-09T21:54:45.700
> 
> 标签：svg, d3.js

我使用 D3.js 创建了一个太阳系的数据可视化。这样做时，我注意到在设置圆形元素的 x、y 位置和圆形元素或曲线路径元素的半径时出现了奇怪的不一致。为了把行星放下，我这样做：

```
planetEnter.append("circle")
    .attr("r", function (d) {
         return planetScale(d.radius); })
    .attr("class", "body")
    .attr("fill", "url(#gradePlanet)")
    .attr("filter", "url(#glowPlanet)")
    .attr("transform", function (d) {
         // Position of planet in relation to the sun at (0,0)
         // x and y are linear scales
         return "translate(" + x(d.orbital_radius) + ", " + y(0) + "), scale(.05)"; }); 
```

现在要创建轨道线，我这样做：

```
var orbital_arc = d3.svg.arc()
    .startAngle(0)
    .endAngle(6.28318531) // 360 degrees
    .innerRadius(function (d) {
        return x(d.orbital_radius); }) 
    .outerRadius(function (d) {
        return x(d.orbital_radius); }); 
```

现在你会认为这会起作用，并且圆弧的半径会与行星的位置相匹配，但事实并非如此。半径最终要大得多。作为补偿，我通过反复试验找到了这个神奇的数字：

```
var orbital_arc = d3.svg.arc()
    .startAngle(0)
    .endAngle(6.28318531) // 360 degrees
    .innerRadius(function (d) {
        return x(d.orbital_radius) - 470; }) // Magic number.
    .outerRadius(function (d) {
        return x(d.orbital_radius) - 470; }); // Magic number. 
```

这个数字始终适用于每条轨道线，我不知道为什么。不仅仅是路径元素，圆的半径最终也会更大：

```
planetEnter.append("circle")
    .attr("r", function (d) {
        return x(d.orbital_radius); })
    .attr("class", "body")
    .attr("transform", function (d) {
        return "translate(" + x(0) + ", " + y(0) + ")"; }); 
```

以下是演示这一点的 jsfiddles（如果您需要更好的视图，请平移和缩放）：

[具有幻数的太阳系](http://jsfiddle.net/sthomas1618/Q5QjV/13/)

[没有幻数的太阳系](http://jsfiddle.net/sthomas1618/Zn4Mm/)

那么为什么我需要这个神奇的数字呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:48:34.340

D3 中的角度以弧度设置，因此您可以拥有一个功能...

```
function degreesToRadians(degrees) {
  return degrees * (Math.PI/180);
} 
```

但是你总是使用圆圈，所以这更优雅地简单地通过......

```
var tau = Math.PI * 2; //this is your first magic number
var orbital_arc = d3.svg.arc()
    .startAngle(0)
    .endAngle(tau) 
```

至于第二个幻数（470），它是你宽度的一半，所以把它们放在一起你可以做......

```
var tau = Math.PI * 2; //this is your first magic number
var orbital_arc = d3.svg.arc()
    .startAngle(0)
    .endAngle(tau)
    .innerRadius(function (d) { return x(d.orbital_radius) - width/2; })
    .outerRadius(function (d) { return x(d.orbital_radius) - width/2; }); 
```

# php - 在共享服务器上运行 Zend Framework 项目

> ID：15316354
> 
> 赞同：0
> 
> 时间：2013-03-09T21:55:46.683
> 
> 标签：php, apache, .htaccess, zend-framework, xampp

我正在尝试将我的 ZF 项目上传到共享主机

在我的 XAMPP 上，ZF 的索引页面位于（我访问我的页面）在`http://localhost/ZFprojectname/public`

在根目录中的共享主机上，我安装了 Joomla。

我想以以下方式访问我的 ZF`http://mywebsite.com/booking/`

所以在这种情况下，`http://mywebsite.com/booking/`我应该访问 ZF 的公共文件夹（据我所知）。

而且，我想将我的 ZFproject 放入`public_html/somefolderName/`

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:05:43.840

共享主机不支持定义文档根路径，因此您可以使用`.htaccess`将请求转发到`public`文件夹。

使用以下规则在目录中创建一个`.htaccess`文件。`booking`

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

# recursion - 递归计算k-ary树中的节点

> ID：15316356
> 
> 赞同：3
> 
> 时间：2013-03-09T21:55:56.947
> 
> 标签：recursion, tree

这不完全是家庭作业，但我需要在课堂上理解它。语言并不重要，伪代码就可以了。

编写“静态 K-ary”树类的递归成员函数，用于计算树中的节点数。

我认为签名看起来像这样：

```
int countNodes(Node<AnyType> t, ctr, k){} 
```

我不知道如何浏览k个孩子。在二叉树中，我会检查左右。谁能给我一个例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:01:36.093

您可以将递归方程想象为：

从一个节点开始的节点总数为`1 + number of total children`。然后可以找到总节点数如下：

```
def count(node):
    numOfNodes = 1
    for child in node.children:
        numOfNodes += count(child)
    return numOfNodes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T21:59:38.110

伪代码：

```
count(r)
    result = 1
    for each child node k
        result = result + count(k)
    return result 
```

# magento - 垂直导航不会显示在每个页面上 - Magento

> ID：15316359
> 
> 赞同：1
> 
> 时间：2013-03-09T21:56:07.040
> 
> 标签：magento, navigation

我的垂直导航有问题。我希望它显示在每一页上。

我使用[本指南进行垂直导航](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/how_to_create_a_vertical_left_hand_menu)

这是[我的网站](http://www.theshirt.org)

我也是 magento 和 web 开发的新手。

多谢你们

# android - 在同一个类中发送/接收意图

> ID：15316361
> 
> 赞同：0
> 
> 时间：2013-03-09T21:56:18.583
> 
> 标签：android, android-intent, broadcastreceiver

简单的问题，是否可以`send/receive`通过同一类的意图`LocalBroadcastReceiver`？如果是，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:09:08.483

是的，LocalBroadcastReceiver 无处不在。这是一个示例`Activity`：

```
BroadcastReceiver localBroadcastReciever = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        Log.d("BroadcastReceiver", "Message received " + intent.getAction());
    }
};

@Override
protected void onStart()
{
    super.onStart();
    final LocalBroadcastManager localBroadcastManager =
        LocalBroadcastManager.getInstance(this);
    final IntentFilter localFilter = new IntentFilter();
    localFilter.addAction("com.my.package.intent.ACTION_NAME_HERE");
    localBroadcastManager.registerReceiver(localBroadcastReceiver, localFilter);
}

@Override
protected void onStop()
{
    super.onStop();
    final LocalBroadcastManager localBroadcastManager =
        LocalBroadcastManager.getInstance(this);
    // Make sure to unregister!!
    localBroadcastManager.unregisterReceiver(localBroadcastReceiver);
} 
```

某处，在您的应用程序的相同`Activity`或其他地方（没关系）：

```
final LocalBroadcastManager localBroadcastManager =
    LocalBroadcastManager.getInstance(context);
localBroadcastManager.sendBroadcast(new Intent("com.my.package.intent.ACTION_NAME_HERE")); 
```

当然，您可以使用`intent.putExtra`添加任何附加数据或使用多个操作来区分广播消息。

# javascript - 如何显示过滤后的 ng-repeat 数据的长度

> ID：15316363
> 
> 赞同：452
> 
> 时间：2013-03-09T21:56:26.807
> 
> 标签：javascript, angularjs

我有一个包含许多对象（JSON 格式）的数据数组。可以假定以下内容为该数组的内容：

```
var data = [
  {
    "name": "Jim",
    "age" : 25
  },
  {
    "name": "Jerry",
    "age": 27
  }
]; 
```

现在，我将这些详细信息显示为：

```
<div ng-repeat="person in data | filter: query">
</div 
```

在这里，查询被建模为一个输入字段，用户可以在其中限制显示的数据。

现在，我有另一个位置显示当前显示的人数/人数，即`Showing {{data.length}} Persons`

我想要做的是，当用户搜索一个人并根据查询过滤显示的数据时，`Showing...persons`也会改变当前显示的人的值。但它没有发生。它始终显示数据中的总人数而不是过滤后的人数 - 我如何获得过滤数据的计数？

* * *

## 回答 #1

> 赞同：757
> 
> 时间：2013-10-22T12:11:55.780

**对于 Angular 1.3+**（感谢 @Tom）

使用*别名表达式*（文档：[Angular 1.3.0：ngRepeat](https://code.angularjs.org/1.3.0/docs/api/ng/directive/ngRepeat)，向下滚动到*参数*部分）：

```
<div ng-repeat="person in data | filter:query as filtered">
</div> 
```

**对于 1.3 之前的 Angular**

将结果分配给一个新变量（例如`filtered`）并访问它：

```
<div ng-repeat="person in filtered = (data | filter: query)">
</div> 
```

显示结果数：

```
Showing {{filtered.length}} Persons 
```

摆弄一个[类似的例子](http://jsfiddle.net/joshkurz/Nk8qy/3/)。归功于[Pawel Kozlowski](https://groups.google.com/forum/#!topic/angular/7WY_BmFzd3U)

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2013-03-13T11:26:30.327

为了完整起见，除了以前的答案（在控制器内执行可见人的计算）之外，您还可以在 HTML 模板中执行该计算，如下例所示。

假设您的人员列表是`data`可变的并且您使用模型过滤人员`query`，以下代码将适用于您：

```
<p>Number of visible people: {{(data|filter:query).length}}</p>
<p>Total number of people: {{data.length}}</p> 
```

*   `{{data.length}}`- 打印总人数
*   `{{(data|filter:query).length}}`- 打印过滤的人数

**请注意**，如果您只想在页面中使用过滤数据**一次**，此解决方案可以正常工作。但是，如果您多次使用过滤数据，例如显示项目和显示过滤列表的长度，我建议对 AngularJS 1.3+ 使用**别名****表达式**（如下所述）或*@Wumms*为 AngularJS 1.3 之前的版本提出的解决方案。

 *****Angular 1.3 中的新功能**

AngularJS 创建者也注意到了这个问题，并且在[1.3 版（beta 17）](https://code.angularjs.org/1.3.0-beta.17/docs/api/ng/directive/ngRepeat)中，他们添加了“别名”表达式，该表达式将在应用过滤器后存储转发器的中间结果，例如

```
<div ng-repeat="person in data | filter:query as results">
    <!-- template ... -->
</div>

<p>Number of visible people: {{results.length}}</p> 
```

**别名表达式**将防止多个过滤器执行问题。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2016-01-19T13:25:38.137

如果你有最简单的方法

```
<div ng-repeat="person in data | filter: query"></div> 
```

过滤后的数据长度

```
<div>{{ (data | filter: query).length }}</div> 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-03-09T22:03:51.070

ngRepeat 在应用过滤器时会创建数组的副本，因此您不能使用源数组来仅引用过滤后的元素。

[`$filter`](http://docs.angularjs.org/api/ng.$filter)在您的情况下，使用该服务在控制器内部应用过滤器可能会更好：

```
function MainCtrl( $scope, filterFilter ) {
  // ...

  $scope.filteredData = myNormalData;

  $scope.$watch( 'myInputModel', function ( val ) {
    $scope.filteredData = filterFilter( myNormalData, val );
  });

  // ...
} 
```

然后您`filteredData`在视图中使用该属性。这是一个工作 Plunker：[http ://plnkr.co/edit/7c1l24rPkuKPOS5o2qtx?p=preview](http://plnkr.co/edit/7c1l24rPkuKPOS5o2qtx?p=preview)

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2014-08-03T12:04:32.110

从 AngularJS 1.3 开始，您可以使用别名：

```
item in items | filter:x as results 
```

在某处：

```
<span>Total {{results.length}} result(s).</span> 
```

来自[文档](https://code.angularjs.org/1.3.0-beta.17/docs/api/ng/directive/ngRepeat)：

> 您还可以提供一个可选的别名表达式，然后在应用过滤器后存储转发器的中间结果。通常，这用于在转发器上的过滤器处于活动状态时呈现特殊消息，但过滤后的结果集为空。
> 
> 例如：项目中的项目 | filter:x as results 将重复项的片段存储为结果，但仅在项已通过过滤器处理之后。

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2015-04-22T17:36:50.270

还需要注意的是，您可以通过对过滤器进行分组来存储多个级别的结果

```
all items: {{items.length}}
filtered items: {{filteredItems.length}}
limited and filtered items: {{limitedAndFilteredItems.length}}
<div ng-repeat="item in limitedAndFilteredItems = (filteredItems = (items | filter:search) | limitTo:25)">...</div> 
```

这是一个[演示小提琴](https://jsfiddle.net/fxzby80p/)

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-03-09T23:52:50.870

这是工作示例[请参阅 Plunker](http://plnkr.co/edit/KFqrq6p0RwVVldF4526S?p=preview)

```
 <body ng-controller="MainCtrl">
    <input ng-model="search" type="text">
    <br>
    Showing {{data.length}} Persons; <br>
    Filtered {{counted}}
    <ul>
      <li ng-repeat="person in data | filter:search">
        {{person.name}}
      </li>
    </ul>
  </body>

<script> 
var app = angular.module('angularjs-starter', [])

app.controller('MainCtrl', function($scope, $filter) {
  $scope.data = [
    {
      "name": "Jim", "age" : 21
    }, {
      "name": "Jerry", "age": 26
    }, {
      "name": "Alex",  "age" : 25
    }, {
      "name": "Max", "age": 22
    }
  ];

  $scope.counted = $scope.data.length; 
  $scope.$watch("search", function(query){
    $scope.counted = $filter("filter")($scope.data, query).length;
  });
}); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-05-18T17:37:53.103

你可以用**2 种方法**来做到这一点。在**模板**和**Controller**中。在模板中，您可以将过滤后的数组设置为另一个变量，然后根据需要使用它。这是如何做到的：

```
<ul>
  <li data-ng-repeat="user in usersList = (users | gender:filterGender)" data-ng-bind="user.name"></li>
</ul>
 ....
<span>{{ usersList.length | number }}</span> 
```

如果您需要示例，请参阅[AngularJs 过滤计数示例/演示](http://www.w3docs.com/snippets/angularjs/how-to-show-angularjs-filtered-count.html)***

# python - Linux 与 Mac OS X 10.7、Python 2.7 上的 Pygame event.get 行为

> ID：15316364
> 
> 赞同：2
> 
> 时间：2013-03-09T21:56:36.040
> 
> 标签：python, linux, macos, pygame

我有一个（非常）小的 Pygame 演示，它在 Linux 和 OS X 下的行为不同。演示创建一个 500x500 的窗口，然后进入一个收集事件的循环。使用 Pygame 时钟将“帧速率”调节为 5 fps。在 OS X 下执行时，event.get() 每帧从不会返回超过两个排队的鼠标事件。在 Linux 下执行时，event.get() 返回更多事件，并且能够准确地跟踪帧之间的鼠标移动。

**编辑：我发现一些评论表明 OS X 下的 SDL（它是 Pygame 的基础）中的鼠标事件可能存在问题。这个 Pygame 安装使用的是 1.2.14。**

有谁知道我做错了什么，或者我如何让 OS X 在帧之间捕获类似的丰富事件？

这是代码：

```
import pygame
from pygame.locals import QUIT

pygame.init()
pygame.display.init()

display = pygame.display.set_mode((500,500))
clock = pygame.time.Clock()

done = False
while not done:
    clock.tick(5)
    events = pygame.event.get()
    if len(events) > 1:
        print len(events)
    for event in events:
        if event.type == pygame.locals.QUIT:
            done = True 
```

示例输出如下。这些是在同一台（双启动）机器上捕获的。

OS X 输出（在窗口中移动鼠标时）：

```
$ python pygameevent.py
2
2
2
2
2
2
2
3
2
2 
```

Linux 输出（在窗口中移动鼠标时）：

```
$ python pygameevent.py
18
14
21
15
12
15
19
24
23
21
18
3
10 
```

# entity-framework - 带有子实体的投影

> ID：15316369
> 
> 赞同：0
> 
> 时间：2013-03-09T21:57:56.710
> 
> 标签：entity-framework

我有以下实体框架查询，其中有 40 个项目：

```
context.Questions
  .Where(x =>
    x.Access >= 1 &&
    x.Enabled == true
  ).ToList(); 
```

然后我尝试了如下投影：

```
context.Questions
  .Where(x =>
    x.Access >= 1 &&
    x.Enabled == true
  ) 
  .Select(x => new {
    Duration = x.Duration,
    Text = x.Text,
    Answers = x.Answers.Select(y => new {
      Correct = y.Correct,
      Text = y.Text
    })
  }).ToList(); 
```

在这种情况下，我得到 150 件物品……我做错了什么？

基本上我需要问题列表和每个问题都有一个答案列表。

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:14:15.443

试试这个

```
context.Questions
  .Where(x =>
    x.Access >= 1 &&
    x.Enabled == true
  ) 
  .Select(u => new {
    Duration = u.Duration,
    Text = u.Text,
    Answers = u.Answers.Select(y => new {
      Correct = y.Correct,
      Text = y.Text
    })
  }).ToList(); 
```

这解决了您的问题的原因是因为在您使用之前

```
.Select(x => ..) 
```

where x=> 引用您的原始`.Where(x =>)`内容，因此它引用您的完整对象列表，而不是您的 where 查询中的过滤列表。

# android - IntelliJ 12 中的 Android Hello World - 找不到 android.app.Activity 类

> ID：15316370
> 
> 赞同：8
> 
> 时间：2013-03-09T21:58:02.330
> 
> 标签：android, intellij-idea

请看下文。我感觉我的 SDK 配置不正确，但我不知道如何解决。我尝试用谷歌搜索答案，但没有人遇到这个确切的问题。

我可能有错误的Java版本吗？看起来这两个 SDK 可能相互冲突。

我通过以下方式制作了这个项目：

1.  创建新项目
2.  Android > 应用模块
3.  默认值和完成

![IntelliJ 中的错误](../Images/395fa06288f41abdfd4825a20b45cf89.png)

* * *

编辑：见截图。我让它工作了。我所做的只是创建一个新项目并重新选择 Android SDK。我仍然认为这是因为我第一次添加了太多的 SDK/JDK。我认为您只需要 Android SDK，也不需要添加普通的 Java。

![在此处输入图像描述](../Images/386193fddac98553a1fce9a661002f3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-29T19:31:12.610

我遇到了完全相同的问题，但导致它的条件非常不寻常。

我将 Android SDK 下载为 zip 文件并将其解压缩为`/opt`.

但是，权限不允许普通用户进入所有目录或执行所有文件......所以当 IntelliJ 索引 SDK 时，它只拾取`res`jar......并且从未将源添加到库路径！

删除 SDK，修复 SDK 中的权限问题，并在 IntelliJ 中创建新引用修复了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T02:14:06.883

起初我尝试了 for3st 的建议无济于事，但我听说其他地方你应该在其他地方使用 JDK 1.6 for IntelliJ IDEA，所以你可以在[这里](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u21-b07-oth-JPR%22here%22)做。此外，您可以通过“文件”->“项目结构”->“平台设置”->“SDKs”来设置 SDK

最后，我还从 Android 2.2 切换到了 2.3.3 (api 10) 并让它工作。不知道为什么它不适用于 2.2，但由于我只是想要一个初学者的教程，我对此很好。

# matlab - 在matlab中为单元格数组的矩阵的指定列添加一个常数

> ID：15316373
> 
> 赞同：0
> 
> 时间：2013-03-09T21:58:14.743
> 
> 标签：matlab, cell-array

假设我有一个`4x1`单元格数组，`A`每个单元格内部都是一个`2x5`矩阵，

```
A={[1 1 1 1 1; 2 2 2 2 2];
   [3 3 3 3 3; 4 4 4 4 4];
   [5 5 5 5 5; 6 6 6 6 6];
   [7 7 7 7 7; 8 8 8 8 8]} 
```

我想要的是为每个单元格添加一个常数，比如说`100`，到`4th`矩阵的列中`B`。例如

```
B={[ 1 1 1 101 1; 2 2 2 102 2];
   [3 3 3 103 3; 4 4 4 104 4];
   [5 5 5 105 5; 6 6 6 106 6];
   [7 7 7 107 7; 8 8 8 108 8]} 
```

最好的方法是什么？

我可以通过使用得到加法结果

```
B=cellfun(@(x) x(:,4)+100,A,'uni',0) 
```

但很难得到 B。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:17:09.557

如果您可以保证单元格中的矩阵`A`具有相同的维度（在您的情况下为 2x5 矩阵），则可以垂直连接所有矩阵：

```
B = cat(1, A{:}); 
```

然后将 100 添加到第四列：

```
B(:, 4) = B(:, 4) + 100; 
```

然后将其转换回元胞数组：

```
B = mat2cell(B, size(A{1}, 1) * ones(size(A)), size(A{1}, 2)); 
```

在这种情况下，考虑将数据表示为三维矩阵而不是元胞数组。操作起来会容易得多。

在一般情况下，您将使用一个`for`循环：

```
B = A;
for k = 1:numel(A)
    B{k}(:, 4) = B{k}(:, 4) + 100;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:19:27.423

您可以为每个单元格添加一个矩阵，如下所示：

```
B=cellfun(@(x) x+[0 0 0 100 0;0 0 0 100 0],A,'UniformOutput',false); 
```

# android - Android：res XML 验证在 IntelliJ 12 中不起作用

> ID：15316374
> 
> 赞同：1
> 
> 时间：2013-03-09T21:58:20.140
> 
> 标签：android, intellij-idea

我是 IntelliJ 开发的新手，我正在使用 Android 插件进行开发。

但是，我无法让 XML 验证或自动完成功能正常工作。

以下是我的 XML 的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
        >
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/competitionName"
            /> 
```

验证告诉我所有的 android 属性都是无效的。同样，如果我输入一个新属性，它不会给我任何建议。

我已经查看了设置，但我没有看到我缺少什么。

有人可以在这里帮忙吗？

谢谢

# mysql - sql查询速度。响应时间长

> ID：15316375
> 
> 赞同：0
> 
> 时间：2013-03-09T21:58:22.330
> 
> 标签：mysql, time, response

我的 mysl 查询有问题。响应时间太长了。我的查询：

```
SELECT SQL_CALC_FOUND_ROWS
    t.id,
    l.id_produkt_lista,
    z.nr_zam,
    k.nazwa_fv,
    p.nazwa,
    p.opis,
    p.data_realizacji,
    CONCAT(t.d_graf,'</br>', IF(t.D_d_graf IS NOT NULL,
        DATE_FORMAT(t.D_d_graf, "%d-%m-%Y"),"")),
    CONCAT(t.d_druk,'</br>', IF(t.D_d_druk IS NOT NULL,
        DATE_FORMAT(t.D_d_druk, "%d-%m-%Y"),"")),
    CONCAT(t.d_zgrz,'</br>', IF(t.D_d_zgrz IS NOT NULL,
        DATE_FORMAT(t.D_d_zgrz, "%d-%m-%Y"),""))
    FROM zamowienie_produkt_lista l
    JOIN zamowienia_zamowienie z ON (l.id_zamowienie = z.id_zamowienie) 
    JOIN zamowienia_produkt p    ON (l.id_produkt = p.id_produkt) 
    JOIN zamowienia_prac_tmp t   ON (l.id_produkt = t.id_produkt) 
    JOIN zamowienia_klient k     ON (z.id_klient = k.id_klient)
    WHERE TRUE
      AND id_typ_produkt = '1'
      AND z.archiwum = 0
    ORDER BY t.id 
```

当我在 phpmyadmin 中使用它时，我必须等待大约 10 秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:22:54.453

假设`id_typ_produkt`属于 table `zamowienie_produkt_lista`，创建以下索引应该会有所帮助：

```
CREATE INDEX p_1_idx ON zamowienie_produkt_lista
    (id_produkt, id_typ_produkt);

CREATE INDEX z_1_idx ON zamowienia_zamowienie
    (id_zamowienie, archiwum); 
```

您还应该确保`*_id`所有其他联接表的所有字段上的索引都存在。

# python - 如何遍历字符串文件并将字符串加载到 numpy ndarray

> ID：15316376
> 
> 赞同：0
> 
> 时间：2013-03-09T21:58:23.060
> 
> 标签：python, numpy

如何遍历字符串文件并将字符串加载到 numpy ndarray 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:01:33.043

这将创建一个字符串的 numpy 向量，每个单元格有一行：

```
import numpy as np

with open("file.ext") as f:
    a = np.array(f.readlines()) 
```

例如，可以针对浮点空格分隔值的文件进行修改：

```
import numpy as np

with open("file.ext") as f:
    a = np.array([map(float, line.split()) for line in f]) 
```

让我们分解论点以`array()`澄清这里发生了什么。

*   `[line for line in f]`相当于`f.readlines()`- 它创建一个字符串列表，每行一个`f`.
*   `[line.split() for line in f]`制作一个二维字符串列表。中的每一行都`f`将`split` 空格放入字符串列表中。
*   Numpy 的设计目的是处理数值，而不是字符串。所以我们需要将每个字符串子列表变成一个浮点列表。`map`将相同的函数应用于列表的每个元素（`float`在本例中），因此`map(float, line.split())`会将字符串列表转换为浮点列表。
*   因此，`[map(float, line.split()) for line in f]`创建一个浮动列表列表 - 每行一个列表，其中浮动已在空格处分开。然后将`array()`其发送给知道如何处理列表的列表。

还要查看[genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)和[loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)系列的 Numpy 函数。

# ios - 弹出对话框 - iOS

> ID：15316377
> 
> 赞同：2
> 
> 时间：2013-03-09T21:58:26.867
> 
> 标签：ios, popup

为 iOS 实现弹出对话框的最佳方法是什么？

我需要一个允许用户选择笑脸的 UIView，以及一个关闭 UIView 的按钮

我对 Apple 的界面指南知之甚少，无法做出决定。是否有任何我应该使用的苹果类或第 3 方开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:01:31.450

如果您想要一个小的自定义对话框，用户可以在其中选择任意项目，只需将**UIView**添加到您的**视图控制器**，其框架小于整个窗口。然后只需通过更改`hidden`属性来隐藏和显示它

# mysql - MySQL中具有多个键值的数据结构

> ID：15316379
> 
> 赞同：1
> 
> 时间：2013-03-09T21:58:38.180
> 
> 标签：mysql

如何在 MySQL 中映射上述数据结构？我想知道如何为`Tags`键分配多个值。

这是 CouchDB 教程中的一个示例。

```
{
    "Subject": "I like Plankton",
    "Author": "Rusty",
    "PostedDate": "5/23/2006",
    "Tags": ["plankton", "baseball", "decisions"],
    "Body": "I decided today that I don't like baseball. I like plankton."
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:01:00.300

您将需要 2 个表，一个用于项目，另一个用于项目标签。

表“项目”中的列：

*   “SubjectID”（主键、数字、自动增量）
*   “主题”
*   “作者”
*   “发表日期”
*   “身体”

表“item_tags”中的列：

*   'SubjectID'（主键、外键）
*   “标签”（主键）

要以这种方式填充数据，您首先需要在 items 表中插入行，然后获取生成的 SubjectID，然后使用该 SubjectID 在 item_tags 表中插入任意数量的标签。

# notepad++ - 将每一行保存为单独的 .txt 文件

> ID：15316380
> 
> 赞同：2
> 
> 时间：2013-03-09T21:58:57.113
> 
> 标签：notepad++

我如何在记事本中保存

文件名：Original.txt：

```
soandso@hotmail.com
emailnumber2@hotmail.com
emailnumber3@hotmail.com 
```

--在您的帮助下--

文件名：1.txt

```
soandso@hotmail.com 
```

文件名：2.txt

```
emailnumber2@hotmail.com 
```

文件名：3.txt

```
emailnumber3@hotmail.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:07:31.003

我会为此编写一个简单的[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)脚本：

```
$counter = 1

Get-Content "myfile.txt" | foreach {
    Set-Content -Path "$counter.txt" -Value $_
    $counter++
} 
```

我不知道任何 notepad++ 特定的解决方案，因为我不使用它，但我敢打赌，有一种方法可以从任何好的程序员友好文本编辑器[运行 PowerShell 脚本。](http://technet.microsoft.com/en-us/library/ee176949.aspx#EBAA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:18:58.610

我不知道任何 notepad++ 插件或任何东西，但那是 Python 或大多数其他语言的大约 4-10 行代码。

Loop:, 新建txt文件，粘贴行

下一行，重复。

您是否有特定的原因希望它是 Notepad++ 特定的？

编辑：

我对这个想法很感兴趣，所以我继续写了它。

```
yourfile = open('YOUR.TXT', 'r')
counter = 0
magic = yourfile.readlines()

for i in magic:
    counter += 1
    newfile = open(('EMAILS' + str(counter) + '.TXT'), "w")
    newfile.write(i)
    newfile.close() 
```

不幸的是，我不知道任何 .NET 语言，但如果你可以用 VBasic 编写它，那么你可以在 Notepad++ 中将它作为你经常做的事情。

# c# - 为 C# 代码创建 html 文档

> ID：15316381
> 
> 赞同：75
> 
> 时间：2013-03-09T21:59:06.677
> 
> 标签：c#, visual-studio, documentation

我目前正在处理一个 C# 项目，VisualAssist 为我生成了这些花哨`/// <summary></summary>`的注释，我一直在使用它们来记录我的代码。

我认为必须有一种方法可以使用这些注释来创建 HTML 文档，就像 Doxygen 或 Javadoc 所做的那样。我怎么做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-09T22:37:53.293

[Doxygen](http://www.doxygen.org)或[Sandcastle 帮助文件构建器](https://github.com/EWSoftware/SHFB)是将 XML 文档提取为外部文档的 HTML（和其他形式）的主要工具。

请注意，您可以将这些文档导出器与文档生成器结合起来 - 正如您所发现的，Resharper 有一些基本的帮助器，但也有更高级的工具来完成此特定任务，例如[GhostDoc](http://submain.com/products/ghostdoc.aspx)（用于带有 XML 文档的 C#/VB 代码) 或我的插件[Atomineer Pro 文档](http://www.atomineerutils.com/)（用于 C#、C++/CLI、C++、C、VB、Java、JavaScript、TypeScript、JScript、PHP、包含 XML、Doxygen、JavaDoc 或 Qt 文档的 Unrealscript 代码）。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-06-10T07:57:42.010

在 2017 年，最接近 Javadoc 的可能是微软开发的[DocFx](https://dotnet.github.io/docfx/)，它作为一个命令行工具和一个 VS2017 插件提供。

它的边缘仍然有点粗糙，但看起来很有希望。

另一种选择是[Wyam](https://wyam.io/)，它有一个适用于网络应用程序的文档配方。查看[cake 文档](http://cakebuild.net/dsl/)以获取示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T22:30:12.200

您可能会对此页面感兴趣：http: [//msdn.microsoft.com/en-us/magazine/dd722812.aspx](http://msdn.microsoft.com/en-us/magazine/dd722812.aspx)

> 您可以使用命令行编译器或通过 Visual Studio 界面生成 XML 文档文件。如果您使用命令行编译器进行编译，请使用选项 /doc 或 /doc+。这将生成一个与程序集同名且路径相同的 XML 文件。要指定不同的文件名，请使用 /doc:file。
> 
> 如果您使用的是 Visual Studio 界面，则有一个设置可以控制是否生成 XML 文档文件。要设置它，请在解决方案资源管理器中双击我的项目以打开项目设计器。导航到编译选项卡。在窗口底部找到“生成 XML 文档文件”，并确保它被选中。默认情况下，此设置处于启用状态。它使用与程序集相同的名称和路径生成一个 XML 文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-03T21:03:37.037

Visual Studio 的上述方法似乎不适用于 Visual Studio 2013，但我能够使用项目菜单找到所描述的复选框并选择我的项目（可能是子菜单上的最后一项）以进入对话框复选框（在“构建”选项卡上）。

# c - 不要将 --build-id 从 gcc 传递给链接器

> ID：15316384
> 
> 赞同：15
> 
> 时间：2013-03-09T21:59:19.393
> 
> 标签：c, gcc, arm

我正在尝试使用 为嵌入式 arm 处理器进行编译`gcc-arm-linux-gnueabi`，并`-nostdlib`删除对 c 库和启动文件的依赖关系。该芯片没有任何解释 elf 文件的方法，因此使用`objcopy -O binary`，我可以从中删除 elf 标头。但是，如果我将构建 ID 保留在其中，那么二进制文件在输出的开头就有构建 ID，因此它无法运行。我可以使用 删除链接器脚本中的构建 ID `/DISCARD/ : { *(.note.gnu.build-id) *(.ARM.attributes) }`，但是链接器会发出警告`.note.gnu.build-id section discarded, --build-id ignored.`。虽然这工作正常，并且代码在芯片上运行良好，但我不想通过然后删除构建 ID。有什么方法可以指示`gcc`将命令传递给链接器而不传递`--build-id`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-09T22:06:05.407

我认为这些选项会做你想要的：

```
-Wl,--build-id=none 
```

> 为 style 传递 none 会禁用命令行前面任何 --build-id 选项的设置。

— [ld 手册](http://sourceware.org/binutils/docs-2.23.1/ld/Options.html#Options)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-02T21:46:28.003

这是一篇旧帖子，但值得为后代说明您不必丢弃构建 ID。您的替代方法是通过编辑链接描述文件将其移动到闪存的另一个区域。

只需将构建 ID 移动到文本部分中矢量表之后的某个位置：

```
 .text :
    {
        . = ALIGN(4);
        _stext = .;
        KEEP(*(.vectors .vectors.*))
        KEEP(*(.note.gnu.build-id))
        *(.text .text.*)
        *(.rodata .rodata*)
        . = ALIGN(4);
        _etext = .;
    } > rom 
```

这将使您的向量表保持在地址 0x0（您的 MCU 可能需要这个），但也允许您从代码中读取构建 ID，这可能会派上用场！

# ios - 使用 NSPredicate 查找用户组

> ID：15316386
> 
> 赞同：1
> 
> 时间：2013-03-09T21:59:38.020
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我的获取请求是获取所有组对象，而不是我想要的。

我希望它只**获取当前用户所属的组**，但我的谓词似乎不起作用。有什么想法吗？

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:@"AGroup" inManagedObjectContext:_managedObjectContext]];
    AUser *u = [AUser currentUser];  //gets app's current user
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY users = %@", u]]; 
```

我也尝试了以下方法，但没有奏效：

```
[NSPredicate predicateWithFormat:@"(users CONTAINS %@)", u];
[NSPredicate predicateWithFormat:@"SUBQUERY(users, $user, $user = %@).@count = [users count]", u]; 
```

类结构

```
AGroup
- users (Type: AUser *)

AUser
- name (Type: NSString *) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:22:18.497

我不明白为什么

```
[NSPredicate predicateWithFormat:@"ANY users = %@", u] 
```

不适合你，但更简单的解决方案就是使用反比关系

```
AUser *u = [AUser currentUser];
NSSet *theGroups = u.groups; 
```

或者，如果您需要它作为数组：

```
NSArray *theGroups = [u.groups allObjects]; 
```

# android - 将片段放在 ActionBar 上方

> ID：15316389
> 
> 赞同：4
> 
> 时间：2013-03-09T21:59:51.683
> 
> 标签：android, android-fragments, android-actionbar

我有一个父`FragmentActivity`视图，我在其中做主视图`FragmentTransactions`并定期切换视图。但是一个特定的视图 (a `Fragment`) 是动画的并从屏幕右侧滑入。我希望视图位于 ActionBar 上方（或顶部）。

最好的例子来自应用程序 WunderList。这是一个屏幕截图。

![在此处输入图像描述](../Images/e667ebf58b0fb121c493852909517767.png)

他们的应用程序还可以滑入并设置动画，这正是我想要复制的功能。你能用 a 做到这一点`Fragment`吗？或者这可能是一个新的`Activity`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-19T17:20:58.063

您不能将片段放在 ActionBar 上，但您可以使用隐藏/显示 ActionBar。

在您的新 Fragment （在方法**onCrate**上）调用：

```
your_activity.getSupportActionBar().setShowHideAnimationEnabled(false);
your_activity.getSupportActionBar().hide(); 
```

然后，当您想回到上一个屏幕时，显示 ActionBar，调用**onPause**方法：

```
your_activity.getSupportActionBar().setShowHideAnimationEnabled(false);
your_activity.getSupportActionBar().show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:47:51.633

您可以按照您想要的方式进行操作（使用或不使用 Fragments）。正如在另一篇文章中所回答的那样，我们已经发布了一个库，可以让滑动层为您工作（只需将其作为普通容器放入您的 xml 中，然后将您需要的任何内容放入其中）。

也就是说，剩下的问题更多地与 ActionBar 位于顶层或底层有关，并且与它在您的应用程序中占据的位置有关。最后，您将不得不在其容器中使用视图的索引和 ActionBar。

例如，我们制作了自己的 ActionBar，这使得游戏更容易决定谁在上面和下面，但正如所说的，即使是原生的或 Sherlock 也不应该是太大的问题。

你能张贴你想要达到的目标吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-31T20:51:24.350

我能够使用 Fragments 实现上述效果。采用 ：

```
fragmentTransaction.add(android.R.id.content, fragment_instance); 
```

其中 android.R.id.content 自 api level 1 以来始终是 View 的根元素。

# javascript - 占位符未在 IE9 中显示

> ID：15316390
> 
> 赞同：1
> 
> 时间：2013-03-09T22:00:04.837
> 
> 标签：javascript, jquery, html, css

`placeholder`没有出现在 IE9 浏览器中...在下面
提供我的代码...您是否需要为 ie9 编写任何 jquery 或 css hack

[http://defie.co/contact.html](http://defie.co/contact.html)

```
<div class="span6">
    <i class="bookmarkingContact"></i>
    <h3 style="margin-bottom: 22px;">Inquiry</h3>

    <input class="span2" type="text" name="email" placeholder="User Name">
    <input class="span2" type="text" name="email" placeholder="Company">
    <input class="span2" type="text" name="email" placeholder="Email">
    <input class="span2" type="text" name="email" placeholder="Password">
    <a href="#" style="position: relative; top: 13px;">Sign Up</a>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:01:18.427

> 占位符未出现在 ie9 浏览器中

IE < 10 不支持 HTML5`placeholder`属性。

[怪癖模式](http://www.quirksmode.org/html5/tests/inputs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:04:03.147

`input`Internet Explorer 9 及更早版本不支持标记的占位符属性。所以要么使用 Javascript 来模拟效果，在输入旁边添加一个标签，要么就忘记 IE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T22:09:03.290

IE9 不支持。为了在 IE9 中创建相同的效果，我所做的是编写一个 JavaScript 函数来检查是否支持占位符。如果不是，则通过 jQuery 在表单元素字段中显示文本...

```
/*AN HTML5 INPUT ATTRIBUTE THATS REALLY COOL*/
var placeHolderSupport = ('placeholder' in document.createElement('input'));

/*IF PLACEHOLDER IS NOT SUPPORTED...*/
if(!placeHolderSupport) {

/*GET THE ID OF EACH FORM ELEMENT*/
fname       = $('#fname');
femail      = $('#femail');
furl        = $('#furl');
fcomment    = $('#fcomment');
fsubmit     = $('#sendbtn');

/*DEFINE DEFAULT VALUES FOR EACH INPUT FIELD*/
fnameval    = "Your Full Name";
femailval   = "Your E-mail Address - (It will not be shared!)";
furlval     = "Your Web Site";
fcommentval = "Your Message";

        /*ASSOCIATE THE DEFAULT VALUES TO THE FORM INPUT FIELDS*/
        fname.val(fnameval);
        femail.val(femailval);
        furl.val(furlval);
        fcomment.val(fcommentval);

        /*CYCLE THROUGH EACH INPUT FIELD TO...*/
            $.each([
            {selector: fname,   mvalue: fnameval},
            {selector: femail,  mvalue: femailval},
            //{selector: furl,    mvalue: furlval},
            {selector: fcomment,mvalue: fcommentval}
            ],function(i, obj) {

              /*...SHOW OR HIDE DEFAULT VALUES*/
                obj.selector.focus(function() {
                    if(this.value == obj.mvalue) { this.value = ''; };
                }).blur(function() {    
                    if(!this.value) { this.value = obj.mvalue;};
                });
    } 
```

# c# - 防止财产重新分配

> ID：15316392
> 
> 赞同：4
> 
> 时间：2013-03-09T22:00:27.307
> 
> 标签：c#, properties

通常，当我编写可由用户使用某种绑定编辑的类的属性时......为了防止执行 GUI 逻辑，我不允许为属性分配相同的值：

```
public PMSAccountingYear AccountingYear{
    get { return _accountingYear; }
    set{
        if(_accountingYear == value)
            return;
        _accountingYear = value;
        NotifyOtherProperties();

        LogChanges();
        EmallToTheBoss();

        Errr();
        BlowBombInTheGarden();
        Etc();
    }
} 
```

条件检查看起来并不优雅，并且无法通过任何自动代码分析来检测。你能推荐一个更好的案例吗？可能具有其中一个属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:01:59.720

您正在做的事情非常好；[这是为INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)之类的东西实现设置器的常用方法（aee 也是该页面上的示例）。

由于值没有改变，因此不需要实际更新支持字段，尤其是不需要通知其他人“更改”的值。

# android - 在应用程序中自定义 android 复选框

> ID：15316393
> 
> 赞同：0
> 
> 时间：2013-03-09T22:00:40.563
> 
> 标签：android, android-layout, android-widget

我正在使用带有 android api-11 的复选框，如下所示

```
<CheckBox
            android:id="@+id/notifs"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="5dp"
            android:text="Enabled" 
            android:textColor="#ffdc143c"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:gravity="center"
            /> 
```

我想要的只是将选择框的背景颜色更改为其他颜色，因为它在我的应用程序中显示为透明。

我怎样才能做到这一点？

# c# - HttpWebRequest 是否有任何可以感染操作系统的漏洞

> ID：15316395
> 
> 赞同：-2
> 
> 时间：2013-03-09T22:01:11.213
> 
> 标签：c#, security, c#-4.0, httpwebrequest, webclient

我的问题是，通过以下获取网络的方式，运行操作系统的程序会被任何可能的方式感染吗？

操作系统是 windows server 2008 r2 或 windows 7 sp1

时间：4.5

这是我正在使用的方法

我只是在寻找通过任何病毒或任何安全漏洞感染的任何可能方式的答案

我的意思是低于 100% 安全吗？

```
 using (System.Net.WebClient webClnt = new System.Net.WebClient())
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(srQueryRequest);

            if (srProxyHost != "none")
            {
                webClnt.Proxy = proxy;
                webClnt.Credentials = proxy.Credentials;
                request.Proxy = proxy;
            }

            request.Timeout = irTimeOut * 1000;

            using (WebResponse response = request.GetResponse())
            {
                using (Stream strumien = response.GetResponseStream())
                {
                    using (StreamReader sr = new StreamReader(strumien))
                    {
                        string srResult = sr.ReadToEnd();                            
                    }
                        }
                    }
                }
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:12:43.367

关于安全性，这取决于您如何处理返回的字符串。如果它包含 javascript 并且您在浏览器中执行它，那么理论上您可能会发现一些讨厌的东西。

除此之外，代码有点乱。

没有使用 WebClient（webrequest 的包装器），上面的代码可以浓缩为：

```
 using (System.Net.WebClient webClnt = new System.Net.WebClient())
    {
       webClnt.proxy = proxy;
       var srResult = webClient.DownloadString(srQueryRequest);
    } 
```

# mysql - mysql嵌套游标已经打开

> ID：15316396
> 
> 赞同：0
> 
> 时间：2013-03-09T22:01:18.787
> 
> 标签：mysql, cursor, nested

我有一个带有两个嵌套游标的 sp。外部光标是客户，内部光标是句点。当内部光标发生错误时，我想回滚为特定客户所做的事情并继续处理下一个客户。但是，当为下一个客户执行内部光标时（发生异常后），我收到*“光标已打开消息”*

代码如下所示：

```
 DECLARE customers CURSOR FOR
    select * from customers_table;

    DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_customers = 1;

    OPEN customers;

    customers_cursor:
    REPEAT
    FETCH customers
    INTO ....

    IF no_more_customers = 1
    THEN
        close customers;
        LEAVE customers_cursor;
    END IF;

    BEGIN
        DECLARE EXIT HANDLER FOR SQLEXCEPTION
        BEGIN
        rollback;
    END;

    ....... //do some stuff

    BEGIN
        DECLARE no_more_periods INT(1) DEFAULT 0;
        DECLARE periods CURSOR FOR
            SELECT ...

        DECLARE CONTINUE HANDLER FOR NOT FOUND
        SET no_more_periods = 1;

        OPEN periods;

        periods_cursor:
        REPEAT
        FETCH periods INTO...

        IF no_more_periods = 1
        THEN
            close periods;
            LEAVE periods_cursor;
        END IF;

    ..... //do some stuff point 1

        UNTIL no_more_periods = 1
        END REPEAT periods_cursor;
        end;

    END;    

    UNTIL no_more_customers = 1
    END REPEAT customers_cursor;
END; 
```

客户 1 运行并且异常发生在`//do some stuff point 1`. 然后客户 2 运行，直到`open periods`达到声明，那时我得到*"Cursor is already open"*。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:27:46.760

thanks a lot for your help @JodyT .I am initiating a new block for each loop of the customer cursor (begin after the "if no_more_customer=1" block". Also i am doing "commit" before next customer. Unfortunately i cannot close periods cursor in the exception handler of this block (cursor periods not defined in this scope-compile time error).What i did to overcome the issue was to define an exception handler inside the inner loop (exactly after the continue handler of the periods cursor).In this handler i close periods and then raise exception to perform rollback in the outter exception handler

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:44:13.297

我在您的代码中看不到任何事务或提交。我会更改代码以包含以下内容：

*   为每个客户开始新的交易
*   在开始处理下一个客户之前提交此事务。
*   在执行回滚之前关闭句点光标。

# python - 当子进程引发 CalledProcessError 异常时检查命令的返回码

> ID：15316398
> 
> 赞同：25
> 
> 时间：2013-03-09T22:01:18.870
> 
> 标签：python, python-3.x, subprocess

我想`stdout`在python（3）脚本中捕获shell命令的流，同时能够检查shell命令的返回码是否返回错误（也就是说，如果它的返回码是不是 0)。

`subprocess.check_output`似乎是执行此操作的适当方法。从`subprocess`的手册页：

```
check_output(*popenargs, **kwargs)
    Run command with arguments and return its output as a byte string.

    If the exit code was non-zero it raises a CalledProcessError.  The
    CalledProcessError object will have the return code in the returncode
    attribute and output in the output attribute. 
```

尽管如此，当它失败时，我没有成功从shell命令获取返回码。我的代码如下所示：

```
import subprocess
failing_command=['ls', 'non_existent_dir']

try:
    subprocess.check_output(failing_command)
except:
    ret = subprocess.CalledProcessError.returncode  # <- this seems to be wrong
    if ret in (1, 2):
        print("the command failed")
    elif ret in (3, 4, 5):
        print("the command failed very much") 
```

此代码在处理异常本身时引发异常：

```
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
AttributeError: type object 'CalledProcessError' has no attribute 'returncode' 
```

我承认我不知道我错在哪里。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-09T22:33:16.727

获取进程输出和返回的代码：

```
from subprocess import Popen, PIPE

p = Popen(["ls", "non existent"], stdout=PIPE)
output = p.communicate()[0]
print(p.returncode) 
```

`subprocess.CalledProcessError`是一类。要访问`returncode`使用异常实例：

```
from subprocess import CalledProcessError, check_output

try:
    output = check_output(["ls", "non existent"])
    returncode = 0
except CalledProcessError as e:
    output = e.output
    returncode = e.returncode

print(returncode) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T12:56:05.287

很可能我的答案不再相关，但我认为可以使用以下代码解决：

```
import subprocess
failing_command='ls non_existent_dir'

try:
    subprocess.check_output(failing_command, shell=True, stderr=subprocess.STDOUT)
except subprocess.CalledProcessError as e:
    ret =   e.returncode 
    if ret in (1, 2):
        print("the command failed")
    elif ret in (3, 4, 5):
        print("the command failed very much") 
```

# zend-framework - 如何仅从相关表中获取特定列？

> ID：15316399
> 
> 赞同：0
> 
> 时间：2013-03-09T22:01:20.853
> 
> 标签：zend-framework, zend-framework2, zend-db

我有疑问：

```
$sql = new Sql($this->tableGateway->getAdapter());
$select = $sql->select();

$select->from('table_1')
    ->join('table_2', 'table_2_se_id = table_2.se_id 
                       and table_2_table_3_id = table_2.table_3_id',
                      '*', 'LEFT')
    ->join('table_3', 'table_2_table_3_id=table_3.id', '*', 'LEFT')
    ->join('table_4', 'table_4_id=table_4.id', '*', 'LEFT'); 
```

如何从 table_4 中仅获取一列（例如“名称”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:47:32.233

第三个参数`join()`是您指定列的位置，此时您正在选择 all `*`。该参数可以是表示单个列的字符串，也可以是列数组，因此以下应该可以工作

```
->join('table_4', 'table_4_id=table_4.id', 'name', 'LEFT'); 
```

# java - 在java中的单独if语句中使用相同的值

> ID：15316405
> 
> 赞同：0
> 
> 时间：2013-03-09T22:01:38.717
> 
> 标签：java

我正在解决一个问题，我有一个菜单选项 1\. 随机播放单词，2 获取随机播放单词并尝试通过更改数组索引号来修复它。

我做了这部分`if (input==1)`洗牌。

我现在必须在`if (input==2)`部分中使用相同的 shuffle 单词并尝试修复它。谁能指导我如何在这个块中使用相同的值`if(input==1)`？

```
import java.util.Scanner;
import java.io.*;
import java.util.*;

public class Project2 {

    public static void main(String[] args) {
        while (true) {
            System.out.println("Select an item from below: \n");
            System.out.println("(1) Mix");
            System.out.println("(2) Solve");
            System.out.println("(3) Quit");

            int input;
            Scanner scan = new Scanner(System.in);
            input = scan.nextInt();

            String team;
            String mix_word;
            char orig_team[];
            char mix_team[];
            boolean Result;
            // System.out.println(input);
            if (input == 1) {
                team = orig();
                System.out.println(team);

                mix_word = mix(team);
                System.out.println(mix_word);

                orig_team = team.toCharArray();
                mix_team = mix_word.toCharArray();
                int arg_length = mix_team.length;

            }
            if (input == 2) {

            }
            if (input == 3) {
                break;
            }

            if (input > 3 || input <= 0) {

                System.out.println("input accurate numbers 1 or 2 or 3");
            }
        }
    }

    static String mix(String Team) {
        String word = shuffle(Team);
        return word;
    }

    static String shuffle(String input) {
        List<Character> characters = new ArrayList<Character>();
        for (char c : input.toCharArray()) {
            characters.add(c);
        }

        StringBuilder output = new StringBuilder(input.length());
        while (characters.size() != 0) {
            int randPicker = (int) (Math.random() * characters.size());
            output.append(characters.remove(randPicker));
        }

        return output.toString();
    }

    static String orig()

    {
        String[] lines = new String[1000];// Enough lines.
        int counter = 0;
        try {
            File file = new File("input.txt");// The path of the File
            FileReader fileReader1 = new FileReader(file);
            BufferedReader buffer = new BufferedReader(fileReader1);
            boolean flag = true;
            while (true) {
                try {
                    lines[counter] = buffer.readLine();// Store a line in the
                                                        // array.
                    if (lines[counter] == null) {// If there isn't any more
                                                    // lines.
                        buffer.close();
                        fileReader1.close();
                        break;// Stop reading and close the readers.

                    }
                    counter++;

                } catch (Exception ex) {
                    break;
                }
            }

        } catch (FileNotFoundException ex) {
            System.out.println("File not found.");
        } catch (IOException ex) {
            System.out.println("Exception ocurred.");
        }

        int pick;
        Random rand = new Random();
        pick = rand.nextInt(counter) + 0;
        return (lines[pick]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:25:49.530

在每个循环周期（处理**单个**用户输入）中，您声明变量，因此它们的范围（访问范围）仅限于该循环。

如果您在 while 循环之外声明变量，它们的范围将延伸到整个循环（直到方法结束）：

```
public static void main(String[] args) {
    String team = "";
    String mix_word = "";
    char orig_team[] = null;
    char mix_team[] = null;
    boolean Result = false;
    while (true) {
        // ** your usual input handling here **
    }
} 
```

还要确保初始化它们（例如使用默认值），否则程序将无法编译。

另一种方法是创建成员变量或类变量，这将具有自动初始化和更大范围的优点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:19:57.687

这是该`switch`语句的一个相当病态的用例，但您可以利用直通并执行以下操作：

```
switch(input) {
case 1:
    team = orig();
    System.out.println(team);

    mix_word = mix(team);
    System.out.println(mix_word);

    orig_team = team.toCharArray();
    mix_team = mix_word.toCharArray();
    arg_length = mix_team.length;

    // No break; here!
case 2:
    //  do the rest of your thing as if it were case 2
    break;
case 3:
    break;
default:
    System.out.println("input accurate numbers 1 or 2 or 3");
} 
```

# java - 小数java

> ID：15316407
> 
> 赞同：1
> 
> 时间：2013-03-09T22:01:51.213
> 
> 标签：java, floating-point, numbers, double, fractions

我正在尝试在 java 中将两个数字相除-更具体地说，我有分数 800/9177，并希望将其转换为 double 或 float 或 w/e。我的问题是当我尝试获取分数的值时，我得到 0。

有人知道该怎么做吗？

我的代码：

```
double dt = 800/9177;
float ft = 800/9177;
double dw = 800/122;
System.out.println("dt : " + dt + " ft: " + ft + " dw " + dw + " 800/9177 " + (800/9177)); 
```

它打印 dt: 0 ft: 0 dw : 6.0 800/9177 0 所以我所有的分数除了 dw 都是 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:04:03.190

最简单的是

```
double dt = 800.0/9177; 
```

或者

```
double dt = (double) 800 / 9177; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:04:19.917

使用数据类型`int`将导致`int`数据丢失。像这样从一开始就使用`double`和`float`数据类型

```
double dt = 800/9177.0;
float ft = 800/9177.0f;
double dw = 800/122.0; 
```

可以像这样指定双数 r

```
double d = (double) 123;
double d = 123.0; //default floating point type is double. use f for float 
double d = 123d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T22:04:32.710

```
double dt = 800D / 9177; 
```

如果将两个整数相除，则会得到整数除法。要获得双除法，其中一个操作数必须是双精度数。

# php - ECHO 没有错误但不显示来自 MYSQL 的数据

> ID：15316410
> 
> 赞同：0
> 
> 时间：2013-03-09T22:02:29.543
> 
> 标签：php, mysql, drop-down-menu, echo

echo 'DESCRIPTION: '.$row['DESCRIPTION']; 在下面的代码中根本没有显示......它运行第一条语句，但第二条似乎没有执行。我不明白为什么。我没有收到任何错误，这是最糟糕的错误。请帮忙！

PHP文件：

```
$sql="SELECT * FROM $tbl_name WHERE `ID` != '67' && `ID` != '68' ORDER BY SORT_ORDER ASC";
$result=mysql_query($sql);
if ($result === false) { echo "An error occurred."; }
?>

<?php
//mysql_connect("$host", "$username", "$password")or die("cannot connect");
//mysql_select_db("$db_name")or die("cannot select DB");

      echo $_POST['book'];
      echo $_POST['chapter'];
      $book = $_POST['book'];
      $chapter = $_POST['chapter'];
      $tbl_link = "PLD_LINK";

      $sql1 = "SELECT * FROM $tbl_link WHERE `TITLE` like '%$book%' && `SORT_ORD` = '%$chapter%'";
      $result1=mysql_query($sql);
      if ($result1 === false) { echo "An error occurred."; }
      while ($row = mysql_fetch_array($sql1)){
      echo 'DESCRIPTION: '.$row['DESCRIPTION'];
      }
?>

<?php
while($rows=mysql_fetch_array($result)){
{ $results[] = $rows; }
$tpl->assign('results', $results); 
?>
<?php
}
mysql_close();
unset ($username, $password, $db_name, $tbl_name);
?> 
```

TPL 文件：

```
<form action="search_bible.php" method="post">
<p><select name='book'><option value="">Select Book</option></p>
{foreach item=rows from=$results}<p><option value='{$rows.TITLE}'>{$rows.TITLE}</option></p>{/foreach}
</select>
&nbsp;
<span style="font-size:12px;">Chapter<input type="text" name="chapter" value="1" size="2" />
&nbsp;
<input type="submit" value="GO">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:04:25.533

```
while ($row = mysql_fetch_array($sql1)){
      echo 'DESCRIPTION: '.$row['DESCRIPTION'];
      } 
```

必须

```
while ($row = mysql_fetch_array($result1)){
  echo 'DESCRIPTION: '.$row['DESCRIPTION'];
  } 
```

和

```
$result1=mysql_query($sql); 
```

必须

```
 $result1=mysql_query($sql1); 
```

您可能需要考虑为变量指定一个更适合您将获得的结果的名称。

这不仅可以更容易判断哪个会产生什么结果，而且如果你想继续一个你有一段时间没有接触过的项目，或者如果其他人有永远使用您的代码。

我将以我不久前从一位老师那里得到的一些明智的话来结束。

'如果你有一个名为 beers 的变量，它代表一个数字数组，结果总是会让你失望'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:04:32.200

您必须将 while 循环更改为

```
while ($row = mysql_fetch_array($result1)) {
...
} 
```

因为,`$sql1`只是一个字符串，而不是前一个的结果`mysql_query`。

您应该考虑切换到`mysqli`or `PDO`，因为`mysql_*`现在不推荐使用函数。

# javascript - JS 性能：一次创建大量元素

> ID：15316411
> 
> 赞同：2
> 
> 时间：2013-03-09T22:02:31.667
> 
> 标签：javascript, jquery, performance

我的网页在（批量）紧密循环中一次创建**大量**DOM 元素，具体取决于我的 Comet Web 服务器提供的数据。

我尝试了几种方法来创建这些元素。基本上它归结为（1）：

```
var container = $('#selector');
for (...) container.append('<html code of the element>'); 
```

或 (2)：

```
var html = '';
for (...) html += '<html code of the element>';
$('#selector').append(html); 
```

或 (3)：

```
var html = [];
for (...) html.push('<html code of the element>');
$('#selector').append(html.join('')); 
```

性能方面，(1) 非常糟糕（台式计算机上每批 3 秒，Galaxy Note 上最多 500 万次），并且（2）和（3）大致相当（台式机上 300 毫秒，手机上 1.5 秒） . 这些时间大约是 4000 个元素，这大约是我在生产中预期的 1/4，这是不可接受的，因为我应该在 1 秒内处理这么多的数据（15k 个元素），即使在 fundleslab 上也是如此。

(2) 和 (3) 具有相同的性能这一事实让我认为我遇到了臭名昭著的“天真地连接字符串无用地重新分配和复制大量内存”问题（尽管我希望`join()`比那更聪明） ）。**[编辑：在仔细研究之后，碰巧我被误导了，问题更多在渲染方面——感谢 DanC]**

`std::string::reserve()`在 C++ 中，我只是去`operator +=`避免无用的重新分配，但我不知道如何在 Javascript 中做到这一点。

知道如何进一步提高性能吗？或者至少指出我识别瓶颈的方法（即使我很确定它是字符串连接）。我当然不是 Javascript 大师...

谢谢你读我。

* * *

对于它的价值，大量元素是因为我正在使用 DIV 绘制一个（大部分是实时的）图表。我很了解 Canvas，但我的应用程序必须与旧浏览器兼容，所以很遗憾这不是一个选择。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:22:44.340

使用 DOM 方法，在我的双核 MacBook 上构建和附加 12000 个元素的时钟大约需要 55 毫秒。

```
document.getElementById('foo').addEventListener('click', function () {
    build();
}, false);

function build() {
    console.time('build');

    var fragment = document.createDocumentFragment();

    for ( var e = 0; e < 12000; e++ ) {
        var el = document.createElement('div');
        el.appendChild(document.createTextNode(e));
        fragment.appendChild(el);
    }

    document.querySelectorAll('body')[0].appendChild(fragment);

    console.timeEnd('build') 
} 
```

[小提琴](http://jsfiddle.net/K2QMh/3/)

[在 document.createDocumentFragment 上注册](http://ejohn.org/blog/dom-documentfragments/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:33:58.387

这不是性能问题的解决方案，而只是一种确保 UI 循环可以自由处理其他请求的方法。

你可以尝试这样的事情：

```
var container = $('#selector');
for (...) setTimeout(function() {container.append('<html code of the element>') }; 
```

为了稍微提高性能，我实际上会`setTimeout`在每次`x`迭代后在构建一个更大的字符串后调用。而且，我自己没有尝试过，我不确定是否`setTimeout`会保留调用的顺序。如果没有，那么你可以做更多这样的事情：

```
var arrayOfStrings = 'each element is a batch of 100 or so elements html';
function processNext(arr, i) {
  container.append(arr[i]);
  if (i < arr.length) {
    setTimeout(function() { processNext(arr, i+1); });
  }
}
processNext(arrayOfStrings, 0); 
```

不漂亮，但可以确保在操作 DOM 时 UI 不会被锁定。

# html - 加载后去锚点

> ID：15316412
> 
> 赞同：14
> 
> 时间：2013-03-09T22:02:32.987
> 
> 标签：html, anchor, loading

## 理念

我有一个用户手册页面，它有点大，每个主题都有一个链接到它的锚点。

在我的产品页面中，我可以使用锚点将客户直接链接到手册中的该主题，例如：

手动的：

```
<a href="#manage_options">Managing Options</a>
<!-- Instructions on how to manage options --> 
```

产品页面：

```
<a href="http://example.com/manual/#!/manage_options">How to Manage Options</a> 
```

## 问题

当我单击产品页面中的*“如何管理选项”*链接时，它会转到手册并立即转到 #manage_options 锚点

但它经常停在错误的地方，因为它去了锚点，然后它不断加载图像，这改变了内容的位置

是否有可能等待所有内容加载完毕，然后进入锚点，或者有什么更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:20:55.050

> ...它不断加载图像，这会改变内容的位置

明确声明图像大小以避免不必要的重绘是最佳实践：

[https://developers.google.com/speed/docs/best-practices/rendering#SpecifyImageDimensions](https://developers.google.com/speed/docs/best-practices/rendering#SpecifyImageDimensions)

> ## 指定图像尺寸
> 
> ### 概述
> 
> 为所有图像指定宽度和高度可以通过消除不必要的回流和重绘来加快渲染速度。
> 
> ### 细节
> 
> 当浏览器布置页面时，它需要能够围绕可替换元素（例如图像）流动。它甚至可以在下载图像之前开始渲染页面，前提是它知道包裹不可替换元素的尺寸。如果包含文档中没有指定尺寸，或者指定的尺寸与实际图像的尺寸不匹配，则浏览器将在下载图像后要求重排和重绘。要防止重排，请在 HTML 标记或 CSS 中指定所有图像的宽度和高度。
> 
> ### 建议
> 
> 指定与图像本身匹配的尺寸。不要使用宽度和高度规范来动态缩放图像。如果图像文件实际上是 60 x 60 像素，请不要在 HTML 或 CSS 中将尺寸设置为 30 x 30。如果图像需要更小，请在图像编辑器中对其进行缩放并设置其尺寸以匹配（有关详细信息，请参阅优化图像。）确保在图像元素或块级父级上指定尺寸确保在元素本身，或块级父级。如果父级不是块级，则维度将被忽略。不要在不是直接父级的祖先上设置维度。

所以使用：

```
<img src="cat.jpg" alt="A Cat" width="360" height="200"> 
```

或者

```
<img src="cat.jpg" alt="A Cat" style="width:360px;height:200px;"> 
```

...或者您可以在外部样式表中指定尺寸，但通常这对于不同的图像尺寸更加困难。这将确保您的内容在加载图像时不会发生变化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-01T15:08:39.817

您可以使用 JQuery 脚本解决问题，这可以在页面加载后推迟锚链接，我还添加了 20 px 的偏移量。

```
$(document).ready(function() {
    if(window.location.hash) {
        $('html, body').animate({
            scrollTop: $(window.location.hash).offset().top - 20
        }, 500);
    }
}); 
```

# javascript - CKEditor baseHref 不工作和编辑器在缩小/捆绑后不工作

> ID：15316413
> 
> 赞同：4
> 
> 时间：2013-03-09T22:02:46.177
> 
> 标签：javascript, .net, asp.net-mvc, asp.net-mvc-4, ckeditor

我正在使用 ASP.NET MVC 4 开发一个 Web 应用程序，并且我正在尝试使用 CKEditor 进行一些内容编辑。
在调试中，只要没有发生捆绑或缩小，一切都可以正常工作，但是一旦发生这种情况，即使我设置了 baseHref，CKEditor 也会生成错误的 URL：

```
CKEDITOR.replace('ckeditor',
{
    autoUpdateElement: true,
    baseHref: '@Url.Content("~/Scripts/ckeditor/")',
    filebrowserImageUploadUrl: '/Uploads/Upload'
}); 
```

在调试中包括以下内容：

```
<script src="/Scripts/ckeditor/ckeditor.js"></script> 
```

在捆绑/缩小之后，它只是：

```
<script src="/bundles/ckeditor?v=dLE-_JqB4vxXJ9idGep_8yUL8KfOwGhfYoEZAeIudoE1"></script> 
```

它会尝试加载以下 JS 文件：

```
http://DOMAIN.net/CONTROLLER/ACTION/config.js?t=D26D 
```

这是错误的，因为它应该是：

```
http://DOMAIN.net/Scripts/ckeditor/config.js?t=D26D 
```

**有谁知道我做错了什么或如何解决这个问题？**
或者，我也可以禁用该捆绑包的捆绑/缩小以避免该问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-05T13:36:45.020

在包含ckeditor的js文件之前尝试添加如下内容：

```
<script type="text/javascript">
    var CKEDITOR_BASEPATH = '@Url.Content("~/Scripts/ckeditor/")';
</script> 
```

更多信息：[http ://docs.cksource.com/CKEditor_3.x/Developers_Guide/Specifying_the_Editor_Path](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Specifying_the_Editor_Path)

它也适用于 ckeditor 4.x。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T13:50:47.613

我有类似的问题，但发现这个工作。将其包含在 cshtml 布局文件中。

```
<script>
  CKEDITOR.basePath = "@Url.Content("~/lib/ckeditor/")";
</script> 
```

或使用 JQuery

```
$(document).ready(function() { 
  CKEDITOR.basePath = "@Url.Content("~/lib/ckeditor/")"; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T01:18:04.273

我发现与@bluee 类似的方法对我有用：

我将以下内容放在我的 cshtml 布局文件中：

```
 <script type="text/javascript">CKEDITOR_BASEPATH = "@Url.Content("~/Scripts/ckeditor/")";</script>
    @Scripts.Render("~/Scripts/ckeditor/ckeditor.js") 
```

使用 CKEDITOR_BASEPATH 而不是 CKEDITOR.basePath 的细微差别。这解决了“CKEDITOR 未定义”问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T21:07:35.677

我遇到了同样的问题。事实上，bundle 系统给 ckeditor 加载带来了麻烦。所以你可以避免它做以下事情：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Script/CKEditor/ckeditor.js")
@Scripts.Render("~/Script/CKEditor/adapters/jquery.js") 
```

# .htaccess - 使用子域将非 www 重定向到 WWW 错误

> ID：15316414
> 
> 赞同：1
> 
> 时间：2013-03-09T22:02:47.527
> 
> 标签：.htaccess, redirect, dns, subdomain

我需要在我的网站上强制使用 WWW。

所以我使用了这个htacces：

```
#Redirect non-www to WWW
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

问题是[http://subdomain.mydomain.com](http://subdomain.mydomain.com) 将被重定向到[http://www.subdomain.mydomain.com](http://www.subdomain.mydomain.com)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:53:23.440

为了避免在子域上发生这种情况，您只需一个仅匹配主域而不匹配的条件`www.`此版本将非常通用地匹配任何具有两个部分且不以 www 开头的域，不匹配任何具有 3 个部分的域，其中第一个是不是万维网。

```
RewriteEngine On
# Doesn't start with www
RewriteCond %{HTTP_HOST} !^www\. [NC]
# And does not also have a subdomain
RewriteCond %{HTTP_HOST} !^[a-z0-9_-]+\.[a-z0-9_-]+\.[a-z0-9_-]+$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

但是，如果您有一组*固定*的域要处理，这会更简单。与其检查是否以 开头`www`，不如仅在与裸域匹配时进行重定向。根据需要将尽可能多的域名添加到`( | )`OR 分组中。

```
RewriteEngine On
# Matching any of 3 domains without www, and no subdomain
RewriteCond %{HTTP_HOST} ^(domain1|domain2|domain3)\.com$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:08:33.700

如果您只想重定向主域

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com$
RewriteRule .* http://www.%{HTTP_HOST}/$0 [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# yii - Yii 框架 + 无限滚动 + 砌体回调不起作用

> ID：15316417
> 
> 赞同：2
> 
> 时间：2013-03-09T22:03:13.977
> 
> 标签：yii, jquery-masonry, infinite-scroll

我知道 InfiniteScroll 和 Masonry 可以很好地协同工作。但我正在使用 Yii 的无限滚动扩展（称为 yiinfinite-scroll）并尝试在其上应用 Masonry。Infinite Scroll 本身可以完美运行，Masonry 本身也可以。但是在 InfiniteScroll 尝试加载一组新的图像（我有一个图像页面）之后， InfiniteScroll 的回调部分似乎没有触发，因为新附加的元素中没有任何砌体代码并出现在后面第一个可见的项目。（我知道这个错误经常被报告，但到目前为止我发现的解决方案对我不起作用）。

我显示图片的结构如下所示：

```
<div class="items">
 <div class="pic">...</pic>
 <div class="pic">...</pic>
...
</div> 
```

第一个页面加载看起来像这样

```
<div class="items masonry" style="...">
   <div class="pic masonry-brick" ...></div>
   <div class="pic masonry-brick" ...></div>
   ...
</div> // everything's fine, masonry is injected into the code 
```

无限滚动后动态加载新图像，如下所示：

```
<div class="items masonry" ...></div>
   <div class="pic masonry-brick" ...></div>
   ...
   // appended pics:
   <div class="pic"></div>
   <div class="pic"></div>
</div> // so no masonry functionality was applied 
```

我的砌体代码：

```
 $(function (){  
        var $container = $('.items');
        $container.imagesLoaded(function(){
          $container.masonry({
            itemSelector: '.pic',
            columnWidth: 405
        });
      });
   });

   $container.infinitescroll({
        // normally, the options are found here. but as I use infinitescroll as a Yii extension, the plugin is already initiated with options
        }
    },
    // trigger Masonry as a callback
    function( newElements ) {
      // hide new items while they are loading
      var $newElems = $( newElements ).css({ opacity: 0 });
      // ensure that images load before adding to masonry layout
      $newElems.imagesLoaded(function(){
        // show elems now they're ready
        $newElems.animate({ opacity: 1 });
        $container.masonry( 'appended', $newElems, true ); 
      });
  });  
  }); 
```

我还尝试将扩展文件夹中当前的 InfiniteScroll-min.js 文件复制并替换为最新的文件。一样的效果...

最好的问候，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:48:06.837

好的，我找到了解决方案。如果其他人有同样的问题，我在这里发布：

我刚刚修改了 Yiinfinite Scroll Yii Extension 中的 YiinfiniteScroller 类，并为 Infinite Scroll 添加了缺少的回调部分：

```
 private function createInfiniteScrollScript() {
    Yii::app()->clientScript->registerScript(
            uniqid(),
            "$('{$this->contentSelector}').infinitescroll(".$this->buildInifiniteScrollOptions().", ".$this->callback.");"
    );
} 
```

在课程的开头，我添加了 public $callback; 行。稍后在该方法中使用它。

然后，您可以使用附加选项回调调用 Widget，例如：

```
'callback' => 'function( newElements ) {
                    // hide new items while they are loading
                    var $newElems = $( newElements ).css({ opacity: 0 });
                    // ensure that images load before adding to masonry layout
                    $newElems.imagesLoaded(function(){
                      // show elems now theyre ready
                      $newElems.animate({ opacity: 1 });
                      $(".items").masonry( "appended", $newElems, true ); 
                    });
                }', 
```

像魅力一样工作。

# javascript - 对 Flickr 的 jQuery ajax 请求偶尔会失败

> ID：15316419
> 
> 赞同：2
> 
> 时间：2013-03-09T22:03:27.227
> 
> 标签：javascript, ajax, jquery, flickr

有时，对 Flickr 的 api 的 ajax 请求会失败。我不确定我是否在这里做错了什么 - 或者我只是没有正确处理事情 - 但代码在 90% 的时间里都能正常工作。当它不起作用时，我会从 Firefox 的控制台收到以下错误消息：

```
TypeError: jQuery19109306644694293944_1362865216185 is not a function 
```

（我让 jquery 生成回调，这就是回调被这样命名的原因。）

这是有时会失败的代码：

```
function getAppropriateSize(photo){
    console.log("In getAppropriateSize");
    /** stuff. query is defined here **/
    $.ajax({
        url: 'http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&format=json&api_key='+flickrKey+'&photo_id='+query.id,
        dataType:'jsonp',
        jsonp:'jsoncallback',
        timeout:3000,
        success: function(sizes){
            console.log("In success - getAppropriateSize");
            /**determine the correct size**/
            flickrURL = sizes.sizes.size[currVal].source;
        },
        error: function(xmlhttprequest,textstatus,msg){
            console.log("In error - getAppropriateSize");
            /* handle error*/
         }
    });
} 
```

我检查了发生这种情况时返回的内容，JSLint 说它是有效的 javascript。flickrURL 也被设置为有效的 URL。我对导致此错误的原因感到非常困惑 - 任何帮助将不胜感激。

编辑：我在胡闹，这次 getAppropriateSize 刚刚收到来自 flickr 的两条单独消息，用于一次通话。第一个是

```
({stat:"fail", code:1, message:"Photo not found"}) 
```

第二个是来自服务器的完整响应，它也产生了上面提到的 TypeError。然而，第二个回复找到了照片并给了我尺寸。

# c# - LINQ查询十进制并返回转换为字符串的十进制

> ID：15316420
> 
> 赞同：0
> 
> 时间：2013-03-09T22:03:28.250
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

尝试使用 Linq 查询订单总额并将其作为 label.Text 在 asp.net 中返回

页面加载：

```
IQueryable<decimal> OrderTotal = GetTotal(orderId);
total.Text = OrderTotal.ToString(); 
```

方法：

```
public IQueryable<decimal> GetTotal(int? orderId)
{
    var q = _db.Orders.Where(x => x.OrderId == orderId).Select(x => x.Total);
    return q;
} 
```

结果：

```
SELECT [Extent1].[Total] AS [Total] FROM [dbo].[Orders] AS [Extent1] WHERE [Extent1].[OrderId] = @p__linq__0 
```

为什么这不将 Total 作为数字返回？而是一个 T-Sql 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:07:47.667

`IQueriable<T>`接口指的是 的序列，`T`而不是 的单个实例`T`。如果您尝试从数据库中获取单个值并将单个文本框设置为该值，那将不起作用。

将您的方法签名更改为

```
public decimal GetTotal(int? orderId)
{
    var q = _db.Orders.Where(x => x.OrderId == orderId).Select(x => x.Total);
    return q.FirstOrDefault();
} 
```

# python - 为什么覆盖 __contains__ 会破坏 OrderedDict.keys？

> ID：15316422
> 
> 赞同：6
> 
> 时间：2013-03-09T22:03:44.220
> 
> 标签：python, python-2.7

我正在对 OrderedDict (Cpython, 2.7.3) 进行子类化来表示数据文件。 `__getitem__`从数据文件中提取一个字段并将其设置在当前实例上，类似于我在下面发布的代码。现在，如果该字段在字典中或在磁盘上的文件中，我想覆盖`__contains__`以返回，因为它可以通过任何一种方式读取。`True`但是，这似乎破坏`OrderedDict`了检查其密钥的能力。

```
from collections import OrderedDict

dictclass = OrderedDict

class Foo(dictclass):
    def __getitem__(self,key):
        try:
            return dictclass.__getitem__(self,key)
        except KeyError:
            pass

        data = key*2
        self[key] = data
        return data

    def __contains__(self,whatever):
        return dictclass.__contains__(self,whatever) or 'bar' in whatever

a = Foo()
print a['bar']
print a.keys() 
```

如果你运行上面的代码，你会得到这个输出：

```
barbar
[] 
```

请注意，如果您更改`dictclass = dict`上述代码，它似乎仍然有效（给出以下输出）。

```
barbar
['bar'] 
```

我做错了什么可怕的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:39:24.693

**何时`Foo.__contains__`未定义**：

```
a['bar'] 
```

调用`Foo.__getitem__`，它执行

```
 self[key] = data 
```

这调用`OrderedDict.__setitem__`，它是这样定义的：

```
def __setitem__(self, key, value, PREV=0, NEXT=1, dict_setitem=dict.__setitem__):
    'od.__setitem__(i, y) <==> od[i]=y'
    # Setting a new item creates a new link at the end of the linked list,
    # and the inherited dictionary is updated with the new key/value pair.
    if key not in self:
        root = self.__root
        last = root[PREV]
        last[NEXT] = root[PREV] = self.__map[key] = [last, root, key]
    dict_setitem(self, key, value) 
```

由于`Foo.__contains__`未定义，

```
 if key not in self: 
```

是真的。所以密钥被正确地添加到`self.__root`and `self.__map`。

**什么时候`Foo.__contains__`定义**，

```
 if key not in self: 
```

如果是假的。所以密钥没有正确添加到`self.__root`and `self.__map`。 `Foo.__contains__`有效的傻瓜`OrderedDict.__setitem__`认为`'bar'`已经添加了密钥。

* * *

我发现使用以下代码很有帮助（在`__setitem__`and中添加打印语句`__iter__`）：

```
from collections import OrderedDict

dictclass = OrderedDict

class Foo(dictclass):
    def __getitem__(self,key):
        try:
            return dictclass.__getitem__(self,key)
        except KeyError:
            pass

        data = key*2
        self[key] = data
        return data

    def __contains__(self,whatever):
        print('contains: {}'.format(whatever))
        return dictclass.__contains__(self,whatever) or 'bar' in whatever

    def __setitem__(self, key, value, PREV=0, NEXT=1, dict_setitem=dict.__setitem__):
        'od.__setitem__(i, y) <==> od[i]=y'
        # Setting a new item creates a new link at the end of the linked list,
        # and the inherited dictionary is updated with the new key/value pair.
        print('key not in self: {}'.format(key not in self))
        if key not in self:
            root = self._OrderedDict__root
            last = root[PREV]
            last[NEXT] = root[PREV] = self._OrderedDict__map[key] = [last, root, key]
        dict_setitem(self, key, value)

    def __iter__(self):
        'od.__iter__() <==> iter(od)'
        # Traverse the linked list in order.
        NEXT, KEY = 1, 2

        root = self._OrderedDict__root
        curr = root[NEXT]
        print('curr: {}'.format(curr))
        print('root: {}'.format(root)) 
        print('curr is not root: {}'.format(curr is not root))

        while curr is not root:
            yield curr[KEY]
            curr = curr[NEXT]

a = Foo()
print a['bar']
# barbar

print a.keys()
# ['bar'] 
```

* * *

请注意，您可以通过创建`Foo`一个子类`collections.MutableMapping`并将其大部分行为委托给`OrderedDict`属性来避免此问题：

```
import collections
dictclass = collections.OrderedDict

class Foo(collections.MutableMapping):
    def __init__(self, *args, **kwargs):
        self._data = dictclass(*args, **kwargs)
    def __setitem__(self, key, value):
        self._data[key] = value
    def __delitem__(self, key):
        del self._data[key]
    def __iter__(self):
        return iter(self._data)
    def __len__(self):
        return len(self._data)

    def __getitem__(self,key):
        try:
            return self._data[key]
        except KeyError:
            pass

        data = key*2
        self[key] = data
        return data

    def __contains__(self,whatever):
        return dictclass.__contains__(self,whatever) or 'bar' in whatever 
```

产生

```
a = Foo()
print a['bar']
# barbar

print a.keys()
# ['bar'] 
```

即使有`__contains__`定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:45:14.983

破坏您的代码的是`or 'bar' in whatever`. 如果您删除它，它将与`dictclass = dict`您提到的更改一样工作。

的`__setitem__`实现`OrderedDict`是这样的：

```
def __setitem__(self, key, value, dict_setitem=dict.__setitem__):
    'od.__setitem__(i, y) <==> od[i]=y'
    # Setting a new item creates a new link at the end of the linked list,
    # and the inherited dictionary is updated with the new key/value pair.
    if key not in self:
        root = self.__root
        last = root[0]
        last[1] = root[0] = self.__map[key] = [last, root, key]
    return dict_setitem(self, key, value) 
```

因此，使用`self["bar"] = "barbar"`时，条件应该为 False，但即使在插入任何项目之前它也是 True。因此，密钥未添加到`self.__root`其中使用的`OrderedDict.__iter__`：

```
def __iter__(self):
    'od.__iter__() <==> iter(od)'
    # Traverse the linked list in order.
    root = self.__root
    curr = root[1]                                  # start at the first node
    while curr is not root:
        yield curr[2]                               # yield the curr[KEY]
        curr = curr[1]                              # move to next node 
```

由于检索值的代码使用此迭代器`self.__root`且不包含`"bar"`，因此无法在值中返回此具体键。

# perl - Perl 哈希的按值传递与按引用传递

> ID：15316425
> 
> 赞同：6
> 
> 时间：2013-03-09T22:03:59.413
> 
> 标签：perl, hash, pass-by-reference, pass-by-value

我正在使用一个子程序来制作一些不同的哈希映射。我目前正在通过引用传递哈希图，但是在多次这样做时会发生冲突。我应该按值传递哈希还是传递哈希引用？

```
use strict;
use warnings;

sub fromFile($){
    local $/;
    local our %counts =();
     my $string = <$_[0]>;
    open FILE, $string or die $!;
    my $contents = <FILE>;
    close FILE or die $!;

    my $pa = qr{
        ( \pL {2} )
        (?{
            if(exists $counts{lc($^N)}){
                $counts{lc($^N)} = $counts{lc($^N)} + 1;
            }
            else{
                $counts{lc($^N)} = '1';
            }
        })
        (*FAIL)
    }x;

     $contents =~ $pa;

    return %counts;

}

sub main(){
    my %english_map = &fromFile("english.txt");
    #my %german_map = &fromFile("german.txt");
}

main(); 
```

当我单独运行不同的 txt 文件时，我没有遇到任何问题，但是两者都有一些冲突。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T02:29:54.470

三个评论：

## 不要混淆传递*引用*和通过*引用传递*

传递*引用*是传递一个包含引用（一种值）的标量。

编译器在传递参数而不复制时*通过引用传递参数。*

编译器在传递参数的副本时*按值传递参数。*

## 在 Perl 中，参数总是通过引用传递

修改函数的参数（ 的元素`@_`）将更改调用者中的相应变量。这就是存在复制参数的约定的原因之一。

```
my ($x, $y) = @_;   # This copies the args. 
```

当然，复制参数的主要原因是为它们“命名”，但它使我们免于`@_`直接使用元素的一些令人讨厌的惊喜。

```
$ perl -E'sub f { my ($x) = @_; "b"=~/(.)/; say $x;    } "a"=~/(.)/; f($1)'
a

$ perl -E'sub f {               "b"=~/(.)/; say $_[0]; } "a"=~/(.)/; f($1)'
b 
```

## 在 Perl 中不能将数组或散列作为参数传递

唯一可以传递给 Perl 子程序的是标量列表。（这也是唯一可以被一个人退回的东西。）

由于在列表上下文中`@a`评估为，`$a[0], $a[1], ...`

```
foo(@a) 
```

是相同的

```
foo($a[0], $a[1], ...) 
```

这就是为什么我们创建对我们想要传递给子的数组或散列的引用并传递引用的原因。

如果我们不这样做，则数组或散列将被评估为标量列表，并且必须在 sub 内部重建。不仅如此昂贵，而且在诸如此类的情况下是不可能的

```
foo(@a, @b) 
```

因为`foo`无法知道返回了多少参数`@a`以及返回了多少`@b`。

请注意，可以使用原型使其看起来像一个数组或哈希作为参数传递，但原型只是导致自动创建对数组/哈希的引用，这就是实际传递给子的内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-09T23:06:44.177

For a couple of reasons you should use pass-by-reference, but the code you show returns the hash by value.

*   You should use `my` rather than `local` except for built-in variables like `$/`, and then for only as small a scope as possible.

*   Prototypes on subroutines are almost never a good idea. They do something very specific, and if you don't know what that is you shouldn't use them.

*   Calling subroutines using the ampersand sigil, as in `&fromFile("english.txt")`, hasn't been correct since Perl 4, about twenty years ago. It affects the parameters delivered to a subroutine in at least two different ways and is a bad idea.

*   I'm not sure why you are using a file glob with `my $string = <$_[0]>`. Are you expecting wildcards in the filename passed as the parameter? If so then you will be opening and reading only the first matching file, otherwise the glob is unnecessary.

*   Lexical file handles like `$fh` are better than bareword file handles like `FILE`, and will be closed implicitly when they are destroyed - usually at the end of the block where they are declared.

*   I am not sure how your hash `%counts` gets populated. No regex on its own can fill a hash, but I will have to trust you!

Try this version. People familiar with Perl will thank you (ironically!) for not using camel-case variable names. And it is rare to see a `main` subroutine declared and called. That is C, this is Perl.

**Update** I have changed this code to do what your original regex did.

```
use strict;
use warnings;

sub from_file {

    my ($filename) = @_;

    my $contents = do {
        open my $fh, '<', $filename or die qq{Unable to open "$filename": $!};
        local $/;
        my $contents = <$fh>;
    };

    my %counts;
    $counts{lc $1}++ while $contents =~ /(?=(\pL{2}))/g;

    return \%counts;
}

sub main {
    my $english_map = from_file('english.txt');
    my $german_map  = from_file('german.txt');
}

main(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T01:37:54.563

您可以使用引用或传递整个哈希或数组。你的选择。有两个问题可能会让您选择一个而不是另一个：

1.  传递其他参数
2.  内存管理

Perl 并没有真正的子程序参数。相反，您只是传入一个参数数组。如果您的子程序是查看哪个数组有更多元素怎么办。我不能这样做：

```
foo(@first, @second); 
```

因为我将传入的是一个结合了两者所有成员的大数组。哈希也是如此。想象一个程序需要两个散列并找到具有公共键的散列：

```
@common_keys = common(%hash1, %hash1); 
```

同样，我将两个散列中的所有键及其值组合成一个大数组。

解决此问题的唯一方法是传递参考：

```
foo(\@first, \@second);
@common_keys = common(\%hash1, \%hash2); 
```

在这种情况下，我将传递这两个哈希存储在内存中的内存位置。我的子程序可以使用那些哈希引用。但是，您必须小心，我将在第二个解释中进行解释。

传递引用的第二个原因是内存管理。如果我的数组或哈希是几十个条目，那真的没那么重要。但是，假设我的哈希或数组中有 10,000,000 个条目。复制所有这些成员可能需要相当多的时间。通过引用传递可以节省我的记忆，**但代价是可怕的**。大多数时候，我使用子程序作为不影响我的主程序的一种方式。这就是为什么假设子程序使用它们自己的变量以及为什么在大多数编程课程中都教你关于变量范围的原因。

但是，当我通过参考时，我打破了这个范围。这是一个不传递引用的简单程序。

```
#! /usr/bin/env perl
use strict;
use warnings;

my @array = qw(this that the other);

foo (@array);

print join ( ":", @array ) . "\n";

sub foo {
    my @foo_array = @_;
    $foo_array[1] = "FOO";
} 
```

请注意，子例程`foo`¹正在更改传入数组的第二个元素。但是，即使我传入`@array`，`foo`子例程也不会更改 的值`@array`。这是因为子例程正在处理一个副本（由 创建`my @foo_array = @_;`）。一旦子程序存在，副本就会消失。

当我执行这个程序时，我得到：

```
this:that:the:other 
```

现在，这是同一个程序，除了我传入了一个引用，并且为了内存管理，我使用了那个引用：

```
#! /usr/bin/env perl
use strict;
use warnings;

my @array = qw(this that the other);

foo (\@array);

print join ( ":", @array ) . "\n";

sub foo {
    my $foo_array_ref = shift;
    $foo_array_ref->[1] = "FOO";
} 
```

当我执行这个程序时，我得到：

```
this:FOO:the:other 
```

那是因为我没有传入数组，而是对该数组的引用。它与保存的内存位置相同`@array`。因此，在我的子程序中更改引用会导致它在我的主程序中被更改。大多数时候，您不想这样做。

您可以通过传入一个引用，然后将该引用复制到一个数组来解决这个问题。例如，如果我这样做了：

```
sub foo {
    my @foo_array = @{ shift() }; 
```

我将复制我对另一个数组的引用。它保护了我的变量，但这确实意味着我将我的数组复制到另一个需要时间和内存的对象。回到 1980 年代，当我刚开始编程时，这是一个大问题。然而，在这个千兆字节内存和四核处理器的时代，主要问题不是内存管理，而是可维护性。即使您的数组或哈希包含 1000 万个条目，您也可能不会注意到任何时间或内存问题。

这也适用于相反的方式。我可以从我的子例程返回对哈希或整个哈希的引用。许多人喜欢返回参考，但这可能是有问题的。

在面向对象的 Perl 编程中，我使用引用来跟踪我的对象。通常，我会引用一个哈希值，我可以用它来存储其他值、数组和哈希值。

在最近的一个程序中，我计算了 ID 以及它们在日志文件中被引用的次数。这存储在一个对象中（这只是对哈希的引用）。我有一个方法可以返回 ID 的整个散列及其计数。我可以这样做：

```
return $self->{COUNT_HASH}; 
```

但是，如果用户开始修改我传递的那个引用，会发生什么？他们实际上会在不使用我的方法来添加和减去 ID 的情况下操作我的对象。不是我想让他们做的事情。相反，我创建了一个新的散列，然后返回对该散列的引用：

```
my %hash_counts = % { $self-{COUNT_HASH} };
return \%hash_count; 
```

这复制了我对数组的引用，然后我将引用传递给了数组。这可以保护我的数据免受外部操纵。我仍然可以返回一个引用，但是如果不通过我的方法，用户将无法再访问我的对象。

顺便说一句，我喜欢使用`wantarray`which 让调用者可以选择他们想要的数据：

```
my %hash_counts = %{ $self->{COUNT_HASH} };
return want array ? %hash_counts : \%hash_counts; 
```

这允许我根据用户调用我的对象的方式返回引用或哈希：

```
my %hash_counts = $object->totals();      # Returns a hash
my $hash_counts_ref = $object->totals();  # Returns a reference to a hash 
```

* * *

¹脚注：`@_`数组指向与调用子程序的参数相同的内存位置。因此，如果我传入`foo(@array)`然后`$_[1] = "foo";`执行，我将更改`@array`.

# python - AttributeError：“myThread”对象没有属性“_initialized”

> ID：15316428
> 
> 赞同：4
> 
> 时间：2013-03-09T22:04:04.453
> 
> 标签：python, multithreading, python-3.x

知道为什么在运行以下代码时出现以下错误：

```
Traceback (most recent call last):
  File "C:\pytests\mthread1.py", line 25, in <module>
    thread1 = myThread(1, "Thread-1", 1)
  File "C:\pytests\mthread1.py", line 9, in __init__
    self.name = name
AttributeError: 'myThread' object has no attribute '_initialized' 
```

代码：

```
import time
import threading

exitFlag = 0

class myThread(threading.Thread):
        def __init__(self, threadID, name, counter):
            self.threadID = threadID
            self.name = name
            self.counter = counter
            threading.Thread.__init__(self)
        def run(self):  
            print("Starting ", self.name)
            print_time(self.name, self.counter, 5)
            print("Exiting ", self.name)

def print_time(threadName, delay, counter):
    while counter:
        if exitFlag:
            thread.exit()
        time.sleep(delay)
        print("{}: {}" . format(threadName, time.ctime(time.time())))
        counter -= 1

thread1 = myThread(1, "Thread-1", 1)
thread2 = myThread(2, "Thread-2", 2)

thread1.start()         
thread2.start()         

print("Exiting Main Thread") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:14:50.933

根据[文档](http://docs.python.org/2/library/threading.html#thread-objects)，这很简单：

> > 线程有名称。名称可以传递给构造函数，并通过名称属性读取或更改。

和

```
class threading.Thread(group=None, target=None, name=None, args=(), kwargs={}) 
```

因此，您正在尝试通过类构造函数设置一个可能期望以某种方式设置的属性。事实上，如果你检查`Thread`类的[源代码](http://hg.python.org/cpython/file/acf6ffc57fcf/Lib/threading.py)：

```
@property
def name(self):
    assert self._initialized, "Thread.__init__() not called"
    return self._name

@name.setter
def name(self, name):
    assert self._initialized, "Thread.__init__() not called"
    self._name = str(name) 
```

所有你必须改变 -`Thread.__init__(name=name)`早一点打电话：

```
class myThread(threading.Thread):
    def __init__(self, threadID, name, counter):
        threading.Thread.__init__(self, name=name)
        self.threadID = threadID
        self.counter = counter 
```

# operating-system - 虚拟机对比 中间件

> ID：15316435
> 
> 赞同：0
> 
> 时间：2013-03-09T22:04:35.877
> 
> 标签：operating-system, virtualization, virtual-machine, middleware

虚拟机和中间件有什么区别？我可以将虚拟机视为中间件吗？我可以为虚拟机使用中间件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:12:01.767

`Middleware`是一个广义术语，用于指代系统中的组件或模块，它们位于应用程序之下（通常是最顶层），但位于较低层（如硬件抽象、驱动程序、内核等）之上。

`Virtual Machine`只是用软件实现的实际物理机器。一类虚拟机只运行一个进程，如（JVM、所有解释语言等），还有其他类可以模拟整个系统，从而在虚拟机上运行操作系统。

如您所见，这两个术语在没有任何上下文的情况下无法直接比较，不幸的是，您的问题并不清楚。

# extjs - Sencha ExtJs Grid 保存存储后刷新

> ID：15316438
> 
> 赞同：3
> 
> 时间：2013-03-09T22:05:09.793
> 
> 标签：extjs

我有一个带有工具栏按钮的 ExtJS 网格来保存日期。保存工作并存储数据。但是网格没有刷新。保存后如何重新加载网格数据？

```
Ext.define('MyLodge.view.content.MemberGrid', {
extend: 'Ext.grid.Panel',
alias: 'widget.membergrid',

initComponent: function(){

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

    var store = Ext.create('MyLodge.store.Members');

    Ext.apply(this, {
        height: this.height,
        plugins: [rowEditing],
        store: store,
        stripeRows: true,
        columnLines: true,
        columns: [{
            id       :'id',
            text: 'ID',
            width: 40,
            sortable: true,
            dataIndex: 'id'
        },{
            text   : 'Name',
            flex: 1,
            sortable : true,
            dataIndex: 'name',
            field: {
                xtype: 'textfield'
            }
        },{
            text   : 'E-Mail',
            width    : 150,
            sortable : true,
            dataIndex: 'email',
            field: {
                xtype: 'textfield'
            }
        },{
            text   : 'Href',
            width    : 200,
            sortable : true,
            dataIndex: 'href',
            field: {
                xtype: 'textfield'
            }
        }],
        dockedItems: [{
            xtype: 'toolbar',
            items: [{
                text: 'Add',
                iconCls: 'icon-add',
                handler: function(){
                    // empty record
                    store.insert(0, new MyLodge.model.Member());
                    rowEditing.startEdit(0, 0);
                }
            }, {
                text: 'Delete',
                iconCls: 'icon-delete',
                handler: function(){
                    var selection = grid.getView().getSelectionModel().getSelection()[0];
                    if (selection) {
                        store.remove(selection);
                    }
                }
            },'-',{
                text: 'Save',
                iconCls: 'icon-save',
                handler: function(){
                    store.sync();

                }
            }]
        }]
    });

    this.callParent(arguments);
} 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:45:27.320

您可以在同步回调中​​加载存储

```
store.sync({

        success: function( response ) { 
                 store.load();
            }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:57:19.600

您可能希望从（无论如何？它不是接口的一部分）调用`store.reload()`回调`store.save()``store.save()``Ext.data.Store`

# macos - 如何检测用户何时打开 OS X 通知中心？

> ID：15316439
> 
> 赞同：11
> 
> 时间：2013-03-09T22:05:16.963
> 
> 标签：macos, cocoa

如何检测用户何时打开 OS X Mountain Lion 通知中心？

是否有我可以观察到的 NSNotification （呃，非常相似的不同事物的术语）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T17:21:48.100

~~我不知道任何官方记录的解决方案或通知（让我知道！），但是当我测试它时，这似乎有效（至少在 OS X 10.10 上），只要我的应用程序在前台/最前面我相信的窗口。~~

将您的对象添加为观察者：

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationCenterOpened:) name:@"com.apple.HIToolbox.beginMenuTrackingNotification" object:nil];

[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationCenterClosed:) name:@"com.apple.HIToolbox.endMenuTrackingNotification" object:nil]; 
```

将类似于以下的方法添加到您的对象，确保检查正确的`ToolboxMessageEventData`数字 ( `4927`)，例如：

```
- (void)notificationCenterOpened:(NSNotification*)notification {
    if ([notification.userInfo[@"ToolboxMessageEventData"] isEqual: @4927]) {
        NSLog(@"Notification center opened");
    }
}

- (void)notificationCenterClosed:(NSNotification*)notification {
    if ([notification.userInfo[@"ToolboxMessageEventData"] isEqual: @4927]) {
        NSLog(@"Notification center closed");
    }
} 
```

~~让我知道这是否适合您。~~

没关系 - 在重新启动/注销 + 重新登录后，ToolboxMessageEventData 似乎发生了变化。

# mysql - 查找所有员工的姓名和每个项目 ID 的工作时间

> ID：15316442
> 
> 赞同：0
> 
> 时间：2013-03-09T22:05:44.983
> 
> 标签：mysql, sql

我有一个数据库，其中包括一个分配表和一个员工表。每个表都包含员工 ID。多个员工在同一个项目上工作，我需要能够获得每个项目 ID 和工作时间的员工姓名列表。我尝试了以下方法，但无法正常工作。

```
Select FirstName, LastName, ProjectID, HoursWorked
From employee e, assignment a
Where e.EmployeeNumber = a.EmployeeNumber
Group by projectID; 
```

编辑：在第一个答案之后，我将查询更改为：

```
SELECT  FirstName, LastName, ProjectID, HoursWorked
FROM    employee e, assignment a
Where e.EmployeeNumber = a.EmployeeNumber
GROUP   BY ProjectID, FirstName, LastName; 
```

结果很好，我想我不完全理解分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:11:03.780

您需要使用*聚合函数* `SUM()`来获取列的总值，

```
SELECT  FirstName, 
        LastName, 
        ProjectID, 
        SUM(HoursWorked) totalHoursWorked
FROM    employee e
        INNER JOIN assignment a
            ON e.EmployeeNumber = a.EmployeeNumber
GROUP   BY FirstName, LastName, ProjectID 
```

# android - 如何删除 ButtonBar 周围的边距而不将它们从 Activity 的其余部分中删除？

> ID：15316449
> 
> 赞同：0
> 
> 时间：2013-03-09T22:06:10.190
> 
> 标签：android, android-activity, android-button

假设我有一个看起来像这样的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <TextView
        android:id="@+id/greeting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello, world!" />

    <LinearLayout
        android:id="@+id/actions"
        style="?android:attr/buttonBarStyle"
        android:background="#dddddd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/button1"
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Button1" />

        <Button
            android:id="@+id/button2"
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Button2" />

    </LinearLayout>
</RelativeLayout> 
```

在 Eclipse 中渲染，我得到以下信息：

![在此处输入图像描述](../Images/421c49f2bfd5811b69dced3d3bda20ac.png)

请注意，ButtonBar 周围有一个边距。有什么办法可以在不影响 Activity 的其余部分的情况下删除它？如果我修改`android:padding*`属性，那么“Hello, world!” 将在 Activity 的左侧运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:16:22.043

将 移动`android:padding*`到`greeting`元素，将其从父布局中移除。然后该项目单独具有填充，而按钮栏则没有。

如果您稍后需要添加其他项目（而不仅仅是单个`TextView`），您可能希望将它们包装在新布局中并将填充放在该布局上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:34:09.723

为您创建的每个布局设置 android:padding ...放置在父布局中的子级将为他们设置填充...您可以改用 layout_margin ...

# c# - 撤消重做堆栈

> ID：15316452
> 
> 赞同：0
> 
> 时间：2013-03-09T22:06:22.017
> 
> 标签：c#, undo-redo

我正在使用 Stacks 制作一个简单的 UndoRedo 框架，但由于某种原因，有些东西不起作用。我有这个代码来存储对象的属性，在这种情况下是 ColorBlend

```
public static ColorBlend _BG_Blend = new ColorBlend();
public ColorBlend BG_Blend
{
    get { return _BG_Blend; }
    set
    {
        AddLog("BG_Blend", _BG_Blend); //Name && Property Value
        _BG_Blend = value;                   
    }
} 
```

现在，每次我更改混合时，都会将新属性存储在堆栈中，并发送一个可以撤消新操作的信号。如果让我们在日志中说 5 种不同的 ColorBlend，当我点击 Undo 时，它会返回存储的属性，但它们都具有相同的颜色，定位所有内容。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:16:03.380

如果您*修改* `BG_Blend`并在堆栈中存储对它的引用，则堆栈中的所有引用都将指向同一个实例。当您将其存储在堆栈中时，您需要创建一个新实例。在更改之前制作副本并将`ColorBlend`副本存储在堆栈中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:10:04.170

在你分配的二传手

```
_BG_Blend = value; 
```

在你返回的吸气剂中

```
return _BG_Blend; 
```

所以，是的，无论堆栈中有什么，您都将获得最后一个分配的值。

看起来在 getter 中您需要从堆栈中返回值，而不是支持字段值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:17:12.537

问题是您总是在堆栈中存储相同的对象引用（即`_BG_Blend`），这意味着堆栈中的每个条目都指向同一个对象，更准确地说是您最后插入的对象。对于每个混合，您应该存储一个新的参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T22:28:14.763

你的`_BG_Blend`成员变量是`static`，所以它只有一个实例。每次推送新的混合时，都会用新值覆盖静态变量，但是由于所有撤消步骤都指向这个共享值，它们都会被它“覆盖”。

只需删除`static`修饰符。

# ios - iOS防止tableview的子视图与tableview一起滚动

> ID：15316454
> 
> 赞同：1
> 
> 时间：2013-03-09T22:06:30.577
> 
> 标签：ios, uiview, uiscrollview, tableview, subview

我在我的表格视图中添加了一个子视图，当用户滚动表格视图时，子视图也会随之滚动。我该如何防止这种情况？我知道这可能是不将视图添加到 tableview 的子视图中，但我不知道任何其他方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T00:25:45.940

如果您想让视图成为表格视图的子视图，则可以通过在 scrollViewDidScroll 方法中更改其 origin.y 值来使其浮动（非滚动）。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
    self.iv.frame = CGRectMake(self.ivOrigin.x, self.ivOrigin.y + self.tableView.bounds.origin.y, self.iv.frame.size.width, self.iv.frame.size.height);
} 
```

在此示例中，“iv”是图像视图的属性，“ivOrigin”是图像视图的初始原点的属性（当我在 viewDidLoad 中创建图像视图及其框架时定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:33:39.923

UITableView 被构建并旨在成为滚动事物的视图。

因此，您可以与之抗争，正如您所发现的那样，这非常困难，因为有关组件的所有内容都是围绕滚动和快速显示完整列表数据的子集而构建的......或者，您无法抗拒它并且将您的静态项目作为固定位置项目放在桌子上。

如果由于某种原因您无法在主视图中添加表格视图和动画输出项目，您始终可以添加一个自定义 UIView 类，该类同时包含表格视图和动画视图。让您的自定义视图类将包含的表格视图公开为 .table 属性，并且可以调整您放入的容器以在需要时使用“mycontainerObject.tableview”而不是“tableview”。

是的，编写自定义 UIView 子类并为其提供几个属性来保存 UITableView 和任何你正在制作动画的 UIView 需要更多的工作。但从长远来看，它可能比试图“破解”更安全UITableView 的方法和视图层次结构试图给它一个“固定到位”的行为。

# c - 如何使用 C 在控制台应用程序中更改字体大小

> ID：15316455
> 
> 赞同：7
> 
> 时间：2013-03-09T22:06:58.167
> 
> 标签：c

如何使用 c 更改打印字体的字体大小？

```
 printf ("%c", map[x][y]); 
```

我想打印一个比程序中所有其他文本都大的数组。有没有办法让那个声明打印得更大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:44:14.977

尽管[teppic](https://stackoverflow.com/questions/15316455/how-to-change-font-size-in-console-application-using-c/15316588#15316588)对使用的回答`system()`会起作用，但为了做到这一点，调用外部程序是相当严厉的。至于[David RF 的回答](https://stackoverflow.com/questions/15316455/how-to-change-font-size-in-console-application-using-c/15316679#15316679)，它是针对特定类型的终端（可能是与 VT100 兼容的终端类型）进行硬编码的，不支持用户的实际终端类型。

在 C 中，您应该直接使用 terminfo 功能：

```
#include <term.h>

/* One-time initialization near the beginning of your program */
setupterm(NULL, STDOUT_FILENO, NULL);

/* Enter bold mode */
putp(enter_bold_mode);

printf("I am bold\n");

/* Turn it off! */
putp(exit_attribute_mode); 
```

尽管如此，正如[teppic 所](https://stackoverflow.com/users/1627348/teppic)指出的，不支持更改字体大小。这是在用户的控制之下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:21:49.630

如果是 Linux（可能还有其他形式的 Unix），您可以`system`随意更改一些终端设置以使其脱颖而出 - 尽管不是字体大小。这种东西真的只适合简单的程序，而且显然不便携：

```
#include <stdio.h>
#include <stdlib.h>

[...]

printf("Normal text\n");
system("setterm -bold on");
printf("Bold text\n");
system("setterm -bold off"); 
```

否则，您可以直接发送各种终端序列，这些序列`printf`将控制大多数 Unix 终端应用程序，例如`\033[31m`将 xterm 中的文本更改为红色。但这些序列可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:33:16.240

如果您在某些 unix 下，您可以尝试激活和停用粗体文本：

```
printf("\033[1m%c\033[0m", map[x][y]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-03T20:35:24.237

此代码适用于 Win32 应用程序（无论使用何种子系统：WINDOWS 或 CONSOLE）：

```
inline void setFontSize(int a, int b) 

{

    HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);

    PCONSOLE_FONT_INFOEX lpConsoleCurrentFontEx = new CONSOLE_FONT_INFOEX();

    lpConsoleCurrentFontEx->cbSize = sizeof(CONSOLE_FONT_INFOEX);

    GetCurrentConsoleFontEx(hStdOut, 0, lpConsoleCurrentFontEx);

    lpConsoleCurrentFontEx->dwFontSize.X = a;

    lpConsoleCurrentFontEx->dwFontSize.Y = b;

    SetCurrentConsoleFontEx(hStdOut, 0, lpConsoleCurrentFontEx);

} 
```

然后只需调用（例如）：

```
setFontSize(20,20); 
```

# ios - 我可以在文件文件夹而不是单个文件上使用 iphoneSetDoNotBackupFile 吗？

> ID：15316457
> 
> 赞同：0
> 
> 时间：2013-03-09T22:07:23.203
> 
> 标签：ios, livecode

你知道我是否可以在一个文件夹上使用它并且该文件夹中的所有文件都不会被备份？（换句话说，一个文件夹而不是一个文件）我写了很多代码来访问位于特殊路径文档文件夹中的几个文件夹中的 PDF 文件。我很容易设置这 7 个文件夹中的每一个的不备份，但宁愿不对这 7 个文件夹中的 300 个文件中的每一个都设置不备份。

我的网络服务器上也存在相同的 PDF 文件夹，因此如果需要，可以在它们被删除时从那里更新或替换它们。您认为 Apple 会同意我将它们留在 Documents/PDFDIR 文件夹中并设置不备份那些 (7) 文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:07:23.203

这个问题是在私人支持环境中提出的，但是，我觉得在这里为其他人回答很有价值。

是的。该属性是递归的。虽然这不是一个真正的重复答案，因为它是关于不同的语言的，但[这里](https://stackoverflow.com/questions/8694112/adding-the-do-not-backup-attribute-to-a-folder-hierarchy-in-ios-5-0-1)有这个答案支持我在 Objective-c 中的答案。

# qt - Qt找不到openssl

> ID：15316458
> 
> 赞同：0
> 
> 时间：2013-03-09T22:07:23.777
> 
> 标签：qt, openssl, libraries, qsslsocket

我从 developer.nokia 网站安装了 Qt 4.8，这是一个`.run`文件。因为它来自诺基亚，所以我假设这些库是用 openssl 编译的……我使用的是 ubuntu 11.10，它已经安装了 openssl。因此，我无法使 QSsl 类正常工作，我做错了什么？

任何人都知道合适的 Qt SDK 4.8 可以正常工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:54:31.553

```
 export QTDIR=/home/user/qtsdk-2010.05/
 export PATH=$QTDIR/bin:$QTDIR/qt/bin:$PATH
 export LD_LIBRARY_PATH=/home/user/qtsdk-2010.05/lib/:/home/user/qtsdk-2010.05/qt/lib/:$LD_LIBRARY_PATH 
```

请将 qtsdk-2010.05 更改为您的 sdk 路径

并确保二进制路径和库是正确的，然后`qmake ,make clean , make`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:11:07.777

解决了`qt-sdk`从存储库安装的问题。

```
sudo apt-get install qt-sdk 
```

更新版本的 Qt Creator 可以在`qt-project.org`

但是 for`Ubuntu 11.10` `Qt 4.7`将被安装而不是`4.7`. `Qt 4.8`在较新`Ubuntu`版本的存储库中可用。

# c# - 并行批量搜索引擎查询

> ID：15316471
> 
> 赞同：0
> 
> 时间：2013-03-09T22:08:19.933
> 
> 标签：c#

我需要编写一个程序，尽可能高效地将大约 200 个搜索查询并行发送到 Bing.com。考虑到阻塞线程和服务器错误，我应该如何最好地实现它。

例如：发送搜索[http://www.bing.com/search?q=.net](http://www.bing.com/search?q=.net)，但每个搜索的关键字不同。

**更新** 当前，我使用`HttpClient`和`Task`类来发送请求、等待/阻塞并获取结果。我想知道您的解决方案是否会更好。

任何想法或链接将不胜感激！

**更新**

正如建议的那样，我应该使用它的 api 密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:39:12.917

搜索引擎不喜欢被抓取的内容。它违反了他们的服务条款，他们积极地阻止了它。

除非您有允许这样做的协议（以及因此的 api 密钥），否则这将很难。

该代码将只是异步 Web 请求或（可能更容易但效率较低）并行同步 Web 请求。

但是，您需要访问大量代理以避免不可避免的 IP 禁令。我不建议你尝试这样做

# java - 在后台启动 Activity

> ID：15316473
> 
> 赞同：0
> 
> 时间：2013-03-09T22:08:38.477
> 
> 标签：java, android

我有一个应用程序通过创建一个新的活动来响应 Internet 消息，并且用户有 20 秒的时间来响应。

问题是当应用程序在后台运行时。我可以显示通知，但是当用户返回应用程序时，新的活动没有启动。

即使应用程序不在前台（没有活动获得焦点），是否有任何方法可以启动活动，或者有任何简单的解决方法可以在返回应用程序后立即开始活动？（这将是更糟糕的解决方案，因为我将不得不返工同步计时器:)）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:17:08.033

看一下Activity生命周期![Android 活动生命周期](../Images/9e9c1258dcc3e2c57a74b751835d31ad.png)

在这里，`onResume()`您可以在显示自身之前覆盖并执行某些`Activity`操作。从那里您可以检查您是否从通知返回或检查用户现在必须回答某些问题并`Activity`从该`onResume()`方法启动一个新的。

# cocoa-touch - viewDidLoad 从 if 语句改变视图

> ID：15316474
> 
> 赞同：0
> 
> 时间：2013-03-09T22:08:44.633
> 
> 标签：cocoa-touch

我有这个代码

```
if ([sessionOutput isEqualToString:@"valid"]) {
    LoggedInViewController *loggedin = [[LoggedInViewController alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:loggedin animated:YES completion:nil];
} 
```

除非要更改视图，否则我会收到以下消息：

```
 Warning: Attempt to present <LoggedInViewController: 0x717fec0> on
<ViewController: 0x8a64af0> whose view is not in the window hierarchy! 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:04:30.823

尝试将您的代码移动到`viewDidAppear:`.
`<ViewController: 0x8a64af0>`调用时尚未将其添加到视图层次结构中`viewDidLoad:`。

看到这个问题：[谁的视图不在窗口层次结构中](https://stackoverflow.com/questions/11862883/whose-view-is-not-in-the-window-hierarchy)

# mercurial - 如何在 Mercurial 中仅列出我的传出更改？

> ID：15316481
> 
> 赞同：2
> 
> 时间：2013-03-09T22:09:52.947
> 
> 标签：mercurial

我想在推送之前获取我已修改和提交的文件的列表。

我通常可以通过 hg 传出来做到这一点。

但是，如果我在提交我的内容后引入一些额外的更改，那么这些新的更改也会被列出，它们甚至会列在我的名下。我确实提交了合并，但没有真正合并，我只是拉入了一个不相关的变更集。如果我从其他用户那里获取大量更改，我的更改会在所有这些更改中丢失。

有没有办法只列出我的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:54:09.987

您始终可以使用带有 revset 函数和一些模板关键字的日志来获得这样的文件列表

`hg help revsets`建议使用传出（）：

```
"outgoing([path])"
  Changesets not found in the specified destination repository, or the
  default push location. 
```

`--template "{files}\n"`为您提供范围内每个变更集中的文件的空格分隔列表，以及来自不同变更集的集合的换行符分隔。`--template "{files % '{file}\n'}"`做琐事“每行文件”

您可以通过管道输出日志以进行排序，以便对文件列表进行排序，没有重复

最终稿`hg log -r 'outgoing()' --template "{files % '{file}\n'}" | sort -u`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:56:44.277

您可以使用

```
hg outgoing --no-merge 
```

过滤掉合并变更集（`-M`是短版本见`hg help outgoing`）。

如果您要推送到您从中提取其他人创作的变更集的同一存储库，您应该只看到您创建的变更集。

# ruby-on-rails - 嵌套属性的质量分配错误

> ID：15316483
> 
> 赞同：1
> 
> 时间：2013-03-09T22:10:16.687
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes, mass-assignment

我无法让“accepts_nested_attributes_for :people”工作。目标是让用户（在我的应用程序中称为“Person”）能够在注册时建立姓氏。家人和人在一张单独的桌子上。我已经阅读了很多关于此的堆栈溢出帖子，但似乎没有一个解决方案有效。带有此错误的重复出现的主题是忘记将 :people_attributes 添加到 attr_accessible。我相信我已经正确地做到了这一点。我可能忘记了控制器中的某些内容。

我与 Family to Person 有一对多的关系

这是我的相关代码：

家庭模式：

```
class Family < ActiveRecord::Base
  attr_accessible :name, :people_attributes

  has_many :adventures
  has_many :people

  accepts_nested_attributes_for :people

end 
```

人物模型

```
class Person < ActiveRecord::Base
  attr_accessible :age, :first_name, :last_name, :nickname, :family_id, :password, :password_confirmation

  belongs_to :family
  has_many :reviews

  has_secure_password
end 
```

家庭景观

```
<%= form_for(@family) do |f| %>
 <% if @family.errors.any? %>
   <div id="error_explanation">
     <h2><%= pluralize(@family.errors.count, "error") %> prohibited this family from being saved:</h2>

    <ul>
     <% @family.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<table>
 <tr>
      <td class="form-cell"><%= f.label :name %></td>
      <td class="form-cell"><%= f.text_field :name %></td>
 </tr>
  <tr>
      <td class="form-cell"><%= f.fields_for :person do |ts| %></td>
        <td class="form-cell"><%= ts.label :first_name %></td>
        <td class="form-cell"><%= ts.text_field :first_name %></td>
        </tr>
      <tr>
         <td class="form-cell"><%= ts.label :last_name %></td>
        <td class="form-cell"><%= ts.text_field :last_name %></td>
      </tr>
      <tr>
        <td class="form-cell"><%= ts.label :age %></td>
        <td class="form-cell"><%= ts.text_field :age %></td>
      </tr>
      <tr>
        <td class="form-cell"><%= ts.label :nickname %></td>
        <td class="form-cell"><%= ts.text_field :nickname %></td>
      </tr>
      <tr>
       <td class="form-cell"><%= ts.label :password %></td>
       <td class="form-cell"><%= ts.password_field :password %></td>
    </tr>
    <tr>
       <td class="form-cell"><%= ts.label :password_confirmation %></td>
       <td class="form-cell"><%= ts.password_field :password_confirmation %></td>
    </tr>
<% end %>
 <%= f.submit %> 
```

以下是我的开发日志中的完整跟踪

```
 activemodel (3.2.12) lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
    activemodel (3.2.12) lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
    activemodel (3.2.12) lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
    activemodel (3.2.12) lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
    activerecord (3.2.12) lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
    activerecord (3.2.12) lib/active_record/base.rb:497:in `initialize'
    app/controllers/families_controller.rb:43:in `new'
    app/controllers/families_controller.rb:43:in `create'
    actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
    actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
    actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    activesupport (3.2.12) lib/active_support/callbacks.rb:414:in `_run__4160186070491300860__process_action__2492885545127699891__callbacks'
    activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
    activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
    actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
    actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
    actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
    activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
    actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
    activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process'
    actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in `process'
    actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch'
    actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
    actionpack (3.2.12) lib/action_controller/metal.rb:246:in `block in action'
    actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `call'
    actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
    actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in `call'
    journey (1.0.4) lib/journey/router.rb:68:in `block in call'
    journey (1.0.4) lib/journey/router.rb:56:in `each'
    journey (1.0.4) lib/journey/router.rb:56:in `call'
    actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
    rack (1.4.5) lib/rack/etag.rb:23:in `call'
    rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
    rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
    rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
    activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
    activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
    activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__555282021550517493__call__927558071375684288__callbacks'
    activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
    activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
    activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
    actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
    railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
    activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
    railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
    rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
    rack (1.4.5) lib/rack/runtime.rb:17:in `call'
    activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    rack (1.4.5) lib/rack/lock.rb:15:in `call'
    actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
    railties (3.2.12) lib/rails/engine.rb:479:in `call'
    railties (3.2.12) lib/rails/application.rb:223:in `call'
    rack (1.4.5) lib/rack/content_length.rb:14:in `call'
    railties (3.2.12) lib/rails/rack/log_tailer.rb:17:in `call'
    rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
    /Users/mikeland/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    /Users/mikeland/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    /Users/mikeland/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:29:59.907

另一个主题`accepts_nested_attributes_for`是人们写这个：

```
<%= f.fields_for :person do |ts| %> 
```

代替

```
<%= f.fields_for :people do |ts| %> 
```

如果你通过`:person`了`fields_for`，那么 rails 就会去寻找`person_attributes`。

你需要在控制器中建立一个人：`@family.people.build`. 与构建新的@family 记录以显示表单的方式相同，您需要构建属于该家庭的人员记录以显示嵌套部分。

# java - ArrayIndexOutOfBoundsException - 我不明白为什么会收到此错误

> ID：15316488
> 
> 赞同：1
> 
> 时间：2013-03-09T22:10:59.930
> 
> 标签：java, arrays, 2d

我的代码有什么问题？我正在尝试传递两个参数（一个用于随机种子，另一个用于 the 并且我得到数组我们的边界异常错误..我不明白我做错了什么..我感谢任何帮助

```
import java.util.Random;

public class sparse {

    public static int size;
    public static int matrix[][] = new int[size][size];
    public static int seed;

    public static void main(String args[]) {

        seed = Integer.parseInt(args[0]);
        size = Integer.parseInt(args[1]);

        matrix = matrixGen();
    }

    public static int[][] matrixGen() {
        Random r = new Random(seed);
        for (int i = 0; i < matrix.length; i++) {
            for (int j = 0; j < matrix[i].length; j++) {
                matrix[i][j] = r.nextInt(100);
            }
        }

        for (int i = 0; i < size; i++) {
            for (int j = 0; j < size; j++) {
                System.out.print(" " + matrix[i][j]);
            }
            System.out.println("  ");
        }

        return matrix;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:14:44.260

您收到错误是因为您在仍然为零`matrix`的时候分配了 ：`size`

```
public static int matrix[][] = new int[size][size]; // size is zero here 
```

`main()`您需要从声明中删除初始化，并在阅读`size`from后将其移至`args`.

```
public static void main(String args[]) {
    seed = Integer.parseInt(args[0]);
    size = Integer.parseInt(args[1]);
    matrix = new int[size][size];
    matrix = matrixGen();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:13:24.237

您必须在为其分配空间之前初始化矩阵的大小：

```
 public static int size = 30; // or whatever value do you want 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T22:19:40.200

初始化矩阵字段时，静态字段种子和大小具有默认值 (0)。

因此矩阵是一个 0x0 数组，没有任何元素的空间：任何访问都会给出这样的异常。

To fix, you should set the matrix field in the main function, after arguments' parse.

# three.js - Three.js：将几何线框转换为 THREE.Line 的方法？

> ID：15316493
> 
> 赞同：1
> 
> 时间：2013-03-09T22:11:29.130
> 
> 标签：three.js

查看示例的源代码

[http://mrdoob.github.com/three.js/examples/webgl_lines_dashed.html](http://mrdoob.github.com/three.js/examples/webgl_lines_dashed.html)

似乎要使用虚线材质，您需要一个 THREE.Line 对象，但本示例中使用的对象是通过特定于案例的方法生成的。
但是，可以很容易地创建带有线框纹理的网格，这让我相信一定有一种简单的方法（我还没有找到一种方法？）可以转换几何对象（例如，CubeGeometry）的顶点信息到适合在 THREE.Line 中使用的修改后的 Geometry 对象，该对象可以重新创建线框（但带有虚线）。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:25:30.643

您可以使用如下所示的函数将具有面的现有几何图形转换为适合渲染虚线的几何图形。使用新几何构造`THREE.Line`具有类型`THREE.LinePieces`。

```
function geo2line( geo ) {

    var geometry = new THREE.Geometry();
    var vertices = geometry.vertices;

    for ( i = 0; i < geo.faces.length; i++ ) {

        var face = geo.faces[ i ];

        if ( face instanceof THREE.Face3 ) {

                vertices.push( geo.vertices[ face.a ].clone() );
                vertices.push( geo.vertices[ face.b ].clone() );
                vertices.push( geo.vertices[ face.b ].clone() );
                vertices.push( geo.vertices[ face.c ].clone() );
                vertices.push( geo.vertices[ face.c ].clone() );
                vertices.push( geo.vertices[ face.a ].clone() );

        } else if ( face instanceof THREE.Face4 ) {

                vertices.push( geo.vertices[ face.a ].clone() );
                vertices.push( geo.vertices[ face.b ].clone() );
                vertices.push( geo.vertices[ face.b ].clone() );
                vertices.push( geo.vertices[ face.c ].clone() );
                vertices.push( geo.vertices[ face.c ].clone() );
                vertices.push( geo.vertices[ face.d ].clone() );
                vertices.push( geo.vertices[ face.d ].clone() );
                vertices.push( geo.vertices[ face.a ].clone() );

        }

    }

    geometry.computeLineDistances();

    return geometry;

} 
```

三.js r.56

# dynamic - .Net T4 使用 TextTemplatingFilePreprocessor

> ID：15316504
> 
> 赞同：0
> 
> 时间：2013-03-09T22:13:13.897
> 
> 标签：dynamic, visual-studio-2012, t4

我正在执行以下操作：

1.  在 XML 中定义工作流。
2.  使用 LINQ 将工作流转换为对象。
3.  在运行时，基于#2 创建一个基于 T4 的 C# 文件。
4.  编译和实例化#3。

**注意：**所有这些都必须发生在客户端计算机上，因此不能依赖于 Visual Studio。

我已经弄清楚了#1 和#2，但只是#3 的一部分。我不知道如何将 XML => 对象步骤的结果传递给 tt 文件。

我的 tt 文件：

```
<#@ template language="C#" debug="true" hostSpecific="false" #>
<#@ output extension=".cs" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #> 
<#
#>
using System;

namespace RWT.Direct.Core.Public.Servers
{
    public partial class ServerClass
    {
        public void CanYouSeeMe()
        {
            Console.WriteLine("this should be from a property");
        }
    }
} 
```

部分类（普通.cs）：

```
namespace RWT.Direct.Core.Public.Servers
{
    public partial class ServerClass : ServerTemplate
    {
        public string MyParameter;
    }
} 
```

调用代码：

```
ServerClass sc = new ServerClass();
sc.MyParameter = "abc"; // set property
String pageContent = sc.TransformText();
Console.WriteLine(pageContent); // compile step goes here 
```

在实现中，属性将是 List 类型。

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:59:56.270

除了扩展生成的模板类之外，还有另一种选择：

查看`<#@ parameter #>`指令 ( [msdn](http://msdn.microsoft.com/en-us/library/gg586944.aspx) )。使用此指令 t4 会自动为您生成一个可在模板代码中访问的属性：

```
<#@ template #>
<#@ parameter name="parameter" type="System.String" #>

// value of the parameter <#= this.parameter #> 
```

您可以在创建模板实例时通过模板会话设置此属性：

```
var instance = new Template(); // replace Template with your template's class name
instance.Sesion = new Dictionary<string, object>();
instance.Session.Add("parameter", "this should be from a property");
instance.Initialize();

var result = instance.TransformText();

// compile your result here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:30:59.363

[我部分地从这里](http://www.codeproject.com/Articles/43394/T4-Preprocessed-Text-Templates-in-Visual-Studio-20)想通了。

# c++ - 使用外部整数的 LNK2001 错误

> ID：15316513
> 
> 赞同：1
> 
> 时间：2013-03-09T22:14:14.900
> 
> 标签：c++, linker

我有这个简单的例子，但我无法编译：

三个文件：*my.h*、*my.cpp*和*use.cpp*：

```
//my.h
extern int foo;
void print_foo();
void print(int); 
```

* * *

```
//my.cpp
#include "my.h"
#include "../../stb_lib_facilities.h" //inlcudes cout, cin, etc

void print_foo(){
    cout << foo << endl;
}

void print(int i){
    cout << i << endl;
} 
```

* * *

```
//use.cpp
#include <iostream>
#include "my.h"

int main(){
    foo = 7;
    print_foo();
    print(99);

    return 0;
} 
```

当我尝试编译它时，我收到三个错误： LNK2001: extern "int foo".. LNK2019: extern "int foo".. LNK1120:

我究竟做错了什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:15:15.493

您没有任何全局变量的*定义*。在您的任何`.cpp`文件中，但仅在**其中一个**文件中，您应该添加以下内容：

```
int foo = 0; // This is a definition 
```

您的*声明*：

```
extern int foo; // This is a declaration 
```

仅告诉编译器存在这样的全局变量，但随后没有您实际定义它的地方。因此，链接器最终会抱怨您有一个未定义的引用符号。

# jquery - 在jQuery点击事件上提交表单只选择第一个表单

> ID：15316515
> 
> 赞同：1
> 
> 时间：2013-03-09T22:14:16.677
> 
> 标签：jquery, ruby-on-rails, ajax

我有一个使用 Rails 构建的待办事项/任务列表类型的应用程序。

我在类别名称下方有一个类别列表及其各自的任务。

我在每个任务旁边都有一个复选框，当我单击它时，我希望该特定任务的表单提交并将任务更新为完整/不完整。我有一个 jQuery 函数来执行此操作：

```
$(function(){
  $('input:checkbox').on('click', function(){
    $(this).parents('form').submit();
  });
}); 
```

我的表格看起来像这样（在 HAML 中）：

```
- form_class = task.complete? ? "edit_task complete" : "edit_task"

= form_for task, remote: true, html: {:class => form_class } do |f|
  = f.check_box :complete
  = f.label :complete, task.name
  = link_to task_path(task.id), remote: true, method: :delete, class: "delete-task" do
    %i.icon-remove.pull-right 
```

输出 HTML 是这样的：

```
<form accept-charset="UTF-8" action="/tasks/338" class="edit_task" data-remote="true" id="edit_task_338" method="post">
<div style="margin:0;padding:0;display:inline">
<input name="utf8" type="hidden" value="✓">
<input name="_method" type="hidden" value="put">
<input name="authenticity_token" type="hidden" value="q7bvSGPr1IDf1p2/SKsssbdiQj+NBWmg/C6zPB3x+jM=">
</div>
<input name="task[complete]" type="hidden" value="0">
<input checked="checked" id="task_complete" name="task[complete]" type="checkbox" value="1">
<label class="338" for="task_complete" id="task-label">another task</label>
<a href="/tasks/338" class="delete-task" data-method="delete" data-remote="true" rel="nofollow">
<i class="icon-remove pull-right"></i></a>
</form> 
```

问题是，当我单击任何复选框时，它不会找到该特定任务的表单，而只会选择并切换页面上的第一个任务。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:50:27.947

正如 Blender 建议的那样，尝试使用`closest`而不是`parents`.

```
$('input:checkbox').click(function(e){
  $(this).closest('form').submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:57:56.423

这是正确的行为。由于您使用`input:checkbox`this 是指页面上复选框类型的任何输入元素。所以似乎由于 jQuery 集包含每个表单的所有复选框，它只处理第一个可能是因为`submit()`一次不能处理多个表单。

相反，您可能想尝试以下任一方法。一个使用[$.parent('form')](http://api.jquery.com/parent/)而不是 parents()。

```
$(function(){
  $('input:checkbox').on('click', function(){
    $(this).parent('form').submit(); //get my immediate parent which is type form.
  });
}); 
```

或将表单的 id 添加到复选框，并用于查找其父级。如果您的输入在表单中嵌套得更深，这很好，这意味着 parent() 将不起作用。

```
<input data-form="edit_task_338" checked="checked" id="task_complete" name="task[complete]" type="checkbox" value="1">

//then
$(function(){
      $('input:checkbox').on('click', function(){
        //use the data-attr to retrive the form's id i.e edit_task_338
        $('form[id='+ $(this).data('form')) +']').submit(); 
      });
    }); 
```

它们还有更多方法，但涉及不同的 HTML 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:36:48.883

我尝试了所有这些，但都没有奏效。我最终通过将任务的 id 添加到标签和复选框输入来解决这个问题，如下所示：

```
= f.check_box :complete, id: "task-#{task.id}"
= f.label :name, task.name, for: "task-#{task.id}" 
```

现在可以提交正确的表单了。感谢您的输入。

# linux - 在尾部选项期间在腻子中播放声音

> ID：15316519
> 
> 赞同：1
> 
> 时间：2013-03-09T22:14:43.367
> 
> 标签：linux, bash

如果应用程序中发生任何异常，我的要求是在腻子中播放警报（播放声音），因此为此我尝试了以下方式

```
tail -f flex.log | grep "Exception" --color paplay alert.wav 
```

但是即使在tail期间flex Log File中出现了Exception这个词，但它并没有播放声音。

如果上述命令有任何错误，请告诉我。

我使用 centOS 8 作为操作系统，脚本是 bash 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:25:53.743

这将找到所有带有异常的单词并将其替换为铃声字符，您的终端应该发出哔哔声/闪烁/您在终端铃声期间设置的任何内容。

```
tail -f flex.log | grep "Exception" | sed -e $'s/Exception/Exception\a/' 
```

要查看所有行`flex.log`但仅在“例外”上响铃：

```
tail -f flex.log | sed -e $'s/Exception/Exception\a/' 
```

# jquery - $(this).attr 不工作

> ID：15316523
> 
> 赞同：3
> 
> 时间：2013-03-09T22:14:55.363
> 
> 标签：jquery, fancybox

我正在使用fancybox，我想在fancybox 执行之前获取元素类。所以我有：

```
$(".agent-file-popup").fancybox({
    'onStart': function () {
        console.log($(this).attr('class'));
        console.log($(".agent-file-popup").attr('class'));
        return true;
    }
}); 
```

第一个日志输出“未定义”，但第二个日志输出正确的类。为什么我不能在这种情况下使用“this”作为元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:26:10.803

`$(this)`是一种非常流行的结构来指示当前元素是焦点，它可以在事件和选择器函数中使用。这等同于[`this`](http://www.quirksmode.org/js/this.html)由 jQuery 函数包装的 JavaScript 构造，以提供对 jQuery 函数的访问。

```
$(".user").click(function() {
    //Here $(this) will represent the element that was click with class .user
}); 
```

插件通常是作为 jQuery`jQuery()`功能的扩展开发的，它们几乎不负责检测当前元素。

因此，当您初始化插件时，它`$(this)`可能很容易代表什么。

Fancybox 有办法获取当前元素。

```
onstart: function(itemArray, selectedIndex, selectedOpts){
 // selectedIndex holds the current selected box on itemArray as the collection object.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:20:46.233

尝试这个：

```
$(".agent-file-popup").fancybox({
        'onStart' : function() {
           console.log($(this.element).attr('class'));
           console.log($(".agent-file-popup").attr('data-paid'));
            return true;
        }
    }); 
```

# html - 目录中的html5音频随机音频文件

> ID：15316529
> 
> 赞同：0
> 
> 时间：2013-03-09T22:15:31.233
> 
> 标签：html, audio, mobile

您好，我正在尝试在我的网站上添加一项功能，经过多次 Google 尝试失败后，我无法准确找到我正在寻找的内容。

我正在寻找的是一个简单的页面：抓取一个随机音频文件并将其提供给 html5 播放器。

抓取 getid3 图像

这就是我不担心 mp3 或关闭的全部，因为我希望它成为一个独立的移动功能。

有人可以指出我正确的方向或至少给我正确的搜索词吗？

我在音频括号内尝试了一个 php 代码。

`$files = glob(/public_html/mixtapes/cod2/*.mp3'); // get all mp3 files in the music directory $fname = $files[array_rand($files)]; // get a random filename echo $fname;`

`?>`

但是给页面一个500错误

# ruby-on-rails - 新的 Rails Heroku 应用程序抛出 ApplicationError（Heroku 错误 H10）

> ID：15316531
> 
> 赞同：0
> 
> 时间：2013-03-09T22:15:45.190
> 
> 标签：ruby-on-rails, ruby, heroku

我刚刚为 Heroku 部署了一个（以前工作的）Rails 应用程序。问题是，每当我访问该 URL 时，它都会因应用程序错误而失败。老实说，我不确定该怎么做。大多数类似的错误都是关于 sqlite3，但它已经从应用程序中删除了。除此之外，我不确定该怎么做，有什么建议吗？

```
←[32m2013-03-09T21:57:55+00:00 heroku[run.5406]:←[0m State changed from up to co
mplete
←[35m2013-03-09T21:57:58+00:00 heroku[router]:←[0m at=error code=H10 desc="App c
rashed" method=GET path=/ host=myapp.herokuapp.com fwd="12.13.14.15, 99.249.8
.176" dyno= queue= wait= connect= service= status=503 bytes=
←[35m2013-03-09T21:57:58+00:00 heroku[router]:←[0m at=error code=H10 desc="App c
rashed" method=GET path=/ host=myapp.herokuapp.com fwd="12.13.14.15, 99.249.8
.176" dyno= queue= wait= connect= service= status=503 bytes=
←[35m2013-03-09T21:57:58+00:00 heroku[router]:←[0m at=error code=H10 desc="App c
rashed" method=GET path=/favicon.ico host=myapp.herokuapp.com fwd="12.13.14.1
5, 99.249.8.176" dyno= queue= wait= connect= service= status=503 bytes=
←[35m2013-03-09T21:57:59+00:00 heroku[router]:←[0m at=error code=H10 desc="App c
rashed" method=GET path=/ host=myapp.herokuapp.com fwd="12.13.14.15, 99.249.8
.176" dyno= queue= wait= connect= service= status=503 bytes=
←[36m2013-03-09T21:58:22+00:00 heroku[web.1]:←[0m State changed from crashed to
starting
←[36m2013-03-09T21:58:23+00:00 heroku[web.1]:←[0m Starting process with command
`bundle exec rails server -p 22371`
←[36m2013-03-09T21:58:27+00:00 app[web.1]:←[0m DEPRECATION WARNING: You have Rai
ls 2.3-style plugins in vendor/plugins! Support for these plugins will be remove
d in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in t
o your app as lib/myplugin/* and config/initializers/myplugin.rb. See the releas
e notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2
-has-been-released. (called from <top (required)> at /app/config/environment.rb:
5)
←[36m2013-03-09T21:58:27+00:00 app[web.1]:←[0m DEPRECATION WARNING: You have Rai
ls 2.3-style plugins in vendor/plugins! Support for these plugins will be remove
d in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in t
o your app as lib/myplugin/* and config/initializers/myplugin.rb. See the releas
e notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2
-has-been-released. (called from <top (required)> at /app/config/environment.rb:
5)
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m => Rails 3.2.11 application start
ing in production on http://0.0.0.0:22371
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m => Call with -d to detach
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m => Ctrl-C to shutdown server
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m => Booting WEBrick
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m Connecting to database specified
by DATABASE_URL
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'

←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m Exiting
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m /app/vendor/bundle/ruby/1.9.1/gem
s/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require': /app
/app/models/message.rb:8: syntax error, unexpected tASSOC (SyntaxError)
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m   validates :content, :length =>
{ maximum: => 200 }
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m
             ^
2013-03-09T21:58:29+00:00 app
←[36m[web.1]:←[0m       from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.
2.11/lib/active_support/dependencies.rb:251:in `block in require'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dep
endency'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:313:in `depend_o
n'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:359:in `require_
or_load'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/engine.rb:439:in `block (2 levels) in eager_lo
ad!'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in `each'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:53:in `block in <modul
e:Finisher>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in `block in eager_load!'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializ
ers'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in `eager_load!'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in `each'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/config/environment.rb:
5:in `<top (required)>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/config.ru:3:in `requir
e'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/config.ru:3:in `block
in <main>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:225:in `require_
dependency'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'

←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/config.ru:in `new'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/config.ru:in `<main>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from script/rails:6:in `require'

←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m  from script/rails:6:in `<main>'
←[36m2013-03-09T21:58:31+00:00 heroku[web.1]:←[0m Process exited with status 1
←[36m2013-03-09T21:58:31+00:00 heroku[web.1]:←[0m State changed from starting to
 crashed
←[35m2013-03-09T21:58:32+00:00 heroku[router]:←[0m at=error code=H10 desc="App c
rashed" method=GET path=/favicon.ico host=myapp.herokuapp.com fwd="12.13.14.1
5, 99.249.8.176" dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:30:21.060

您的`Message`模型中有错误。

```
validates :content, :length => { maximum: => 200 } 
```

需要是

```
validates :content, :length => { :maximum => 200 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:29:46.577

根据错误消息中的这一行，您的消息模型中似乎存在语法错误。Heroku 最有可能尝试构建您的应用程序，当它遇到此错误时它会崩溃。

```
/app/models/message.rb:8: syntax error, unexpected tASSOC (SyntaxError)
←[36m2013-03-09T21:58:29+00:00 app[web.1]:←[0m   validates :content, :length =>
{ maximum: => 200 } 
```

# java - 使 JButton 中的文本不可见

> ID：15316532
> 
> 赞同：4
> 
> 时间：2013-03-09T22:15:45.673
> 
> 标签：java, swing, jbutton

我制作了一个按钮并`.setText()`对其进行了操作，因为我必须将 的值`.setText()`与其他值进行比较。

我将 应用于`.setText()`JButton，但我不希望文本在我的按钮中可见。如果我这样做`setVisible(false)`，它会隐藏整个按钮，但我只希望它隐藏文本。

有这个选项吗？我考虑过制作自定义字体并将其应用于文本中，`.setText()`但我想知道是否有更有效的选择来解决我的问题。

提前谢谢各位。

编辑：我不能使用`.setText(" ")`，因为我必须比较其中的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T22:25:46.690

你说：

> 编辑：我不能使用 .setText(" ") 因为我必须比较其中的值。

废话。正如我在评论中提到的，将 JButton 的文本设置为`" "`，并且不要使用 JButton 的文本进行比较。而是使用通过 getActionCommand() 轻松获得的 actionCommand。或使用`HashMap<JButton, SomethingElse>`.

当您需要更改 JButton 的行为和状态时，您可以考虑更改 JButton 的 Action，这可以通过调用轻松完成`setAction(...)`

例如，

```
import java.awt.event.ActionEvent;
import javax.swing.*;

public class ButtonActions {

   private static void createAndShowGui() {
      JPanel mainPanel = new JPanel();

      JButton myButton = new JButton();

      StartAction startAction = new StartAction();
      PauseAction pauseAction = new PauseAction();
      BlankAction blankAction = new BlankAction();

      startAction.setNextAction(pauseAction);
      pauseAction.setNextAction(blankAction);
      blankAction.setNextAction(startAction);

      myButton.setAction(startAction);
      mainPanel.add(myButton);

      JFrame frame = new JFrame("ButtonActions");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class SwappingAction extends AbstractAction {
   private Action nextAction;

   public SwappingAction(String text) {
      super(text);
   }

   public void setNextAction(Action nextAction) {
      this.nextAction = nextAction;
   }

   public Action getNextAction() {
      return nextAction;
   }

   @Override
   /**
    * super method needs to be called in child for swap to work
    */
   public void actionPerformed(ActionEvent e) {
      System.out.println("ActionCommand: " + e.getActionCommand());
      ((AbstractButton)e.getSource()).setAction(nextAction);
   }
}

class StartAction extends SwappingAction {
   public static final String START = "Start";

   public StartAction() {
      super(START);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      super.actionPerformed(e);
      // start-specific code goes here
   }
}

class PauseAction extends SwappingAction {
   public static final String PAUSE = "Pause";

   public PauseAction() {
      super(PAUSE);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      super.actionPerformed(e);
      // pause-specific code goes here
   }
}

class BlankAction extends SwappingAction {
   public static final String BLANK = " ";

   public BlankAction() {
      super(BLANK);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      super.actionPerformed(e);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:19:35.770

写入`buttonName.setText(" ")`此按钮不会显示任何名称。每当您想显示名称（在任何事件上）时，请再次设置`buttonName.setText("some text")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T22:41:24.053

如果您坚持不使用`setText("")`，请尝试设置与背景颜色和文本颜色相同的颜色。检查以下链接

[设置背景（java.awt.Color）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29)

[setForeground(java.awt.Color)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground%28java.awt.Color%29)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-19T05:53:52.587

为什么不将第一个按钮命名为“”（1 个空格）。第二个：“”（2 个空格）第三个：“”（3 个空格）等等..

现在，比较一下： if((event.getActionCommand()).equals(" ")) { //第一个按钮 }

if((event.getActionCommand()).equals(" ")) { //第二个按钮 }

..等等

其中 event 是 ActionEvent 的对象

这样按钮将具有唯一的名称并且是不可见的。可怕的编码，我知道。但它确实有效；）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-09T22:33:30.613

代替 .setText()，使用 .setTag() 和 .getTag() 将一些值附加到视图 - 包括按钮 - 以供以后检索。

这些方法直接用于这种目的。

# ios - CVPixelBuffer 到 CIImage 总是返回 nil

> ID：15316534
> 
> 赞同：6
> 
> 时间：2013-03-09T22:15:49.903
> 
> 标签：ios, avfoundation, core-image, core-video

我正在尝试将从 AVPlayerItemVideoOutput 提取的 pixelBuffer 转换为 CIImage 但总是为零。

**编码**

```
if([videoOutput_ hasNewPixelBufferForItemTime:player_.internalPlayer.currentItem.currentTime])
{
    CVPixelBufferRef pixelBuffer = [videoOutput_ copyPixelBufferForItemTime:player_.internalPlayer.currentItem.currentTime
                                                         itemTimeForDisplay:nil];

    CIImage *image = [CIImage imageWithCVPixelBuffer:pixelBuffer]; // Always image === nil
    CIFilter *filter = [FilterCollection filterSepiaForImage:image];
    image = filter.outputImage;

    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgimg = [context createCGImage:image fromRect:[image extent]];
    [pipLayer_ setContents:(id)CFBridgingRelease(cgimg)];

} 
```

以下是`pixelBuffer`用于创建 CIImage 的详细信息（始终导致 nil）：

```
$0 = 0x09b48720 <CVPixelBuffer 0x9b48720 width=624 height=352 bytesPerRow=2496 pixelFormat=BGRA iosurface=0x0 attributes=<CFBasicHash 0x98241d0 [0x1d244d8]>{type = immutable dict, count = 3,
entries =>
    0 : <CFString 0x174cf4 [0x1d244d8]>{contents = "Height"} = <CFNumber 0x9a16e70 [0x1d244d8]>{value = +352, type = kCFNumberSInt32Type}
    1 : <CFString 0x174ce4 [0x1d244d8]>{contents = "Width"} = <CFNumber 0x9a109d0 [0x1d244d8]>{value = +624, type = kCFNumberSInt32Type}
    2 : <CFString 0x1750e4 [0x1d244d8]>{contents = "PixelFormatType"} = <CFArray 0x1090ddd0 [0x1d244d8]>{type = mutable-small, count = 1, values = (
    0 : <CFNumber 0x7a28050 [0x1d244d8]>{value = +1111970369, type = kCFNumberSInt32Type}
)}
}
 propagatedAttachments=<CFBasicHash 0x9b485c0 [0x1d244d8]>{type = mutable dict, count = 6,
entries =>
    0 : <CFString 0x174ff4 [0x1d244d8]>{contents = "CVImageBufferTransferFunction"} = <CFString 0x174f84 [0x1d244d8]>{contents = "ITU_R_709_2"}
    2 : <CFString 0x174f74 [0x1d244d8]>{contents = "CVImageBufferYCbCrMatrix"} = <CFString 0x174f94 [0x1d244d8]>{contents = "ITU_R_601_4"}
    9 : <CFString 0x174f14 [0x1d244d8]>{contents = "CVPixelAspectRatio"} = <CFBasicHash 0x9b1bc30 [0x1d244d8]>{type = immutable dict, count = 2,
entries =>
    0 : <CFString 0x174f34 [0x1d244d8]>{contents = "VerticalSpacing"} = <CFNumber 0x9b0f730 [0x1d244d8]>{value = +1, type = kCFNumberSInt32Type}
    2 : <CFString 0x174f24 [0x1d244d8]>{contents = "HorizontalSpacing"} = <CFNumber 0x9b0f730 [0x1d244d8]>{value = +1, type = kCFNumberSInt32Type}
}

    10 : <CFString 0x174fb4 [0x1d244d8]>{contents = "CVImageBufferColorPrimaries"} = <CFString 0x174fd4 [0x1d244d8]>{contents = "SMPTE_C"}
    11 : <CFString 0x174e24 [0x1d244d8]>{contents = "QTMovieTime"} = <CFBasicHash 0x7a47940 [0x1d244d8]>{type = immutable dict, count = 2,
entries =>
    0 : <CFString 0x174e44 [0x1d244d8]>{contents = "TimeScale"} = <CFNumber 0x7a443d0 [0x1d244d8]>{value = +90000, type = kCFNumberSInt32Type}
    2 : <CFString 0x174e34 [0x1d244d8]>{contents = "TimeValue"} = <CFNumber 0x7a476e0 [0x1d244d8]>{value = +1047297, type = kCFNumberSInt64Type}
}

    12 : <CFString 0x174eb4 [0x1d244d8]>{contents = "CVFieldCount"} = <CFNumber 0x9b0f730 [0x1d244d8]>{value = +1, type = kCFNumberSInt32Type}
}
 nonPropagatedAttachments=<CFBasicHash 0x9b44b40 [0x1d244d8]>{type = mutable dict, count = 0,
entries =>
}
> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:31:13.797

解决了这个问题 - 我在模拟器上尝试，而它似乎只在设备上受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:11:21.233

您似乎没有定义 iosurface 属性键。不是 100% 它会解决你的问题，但试试这个：

```
CFDictionaryRef attrs = (CFDictionaryRef)@{
    (id)kCVPixelBufferWidthKey: @(WIDTH_OF_YOUR_VIDEO_GOES_HERE),
    (id)kCVPixelBufferHeightKey: @(HEIGHT_OF_YOUR_VIDEO_GOES_HERE),
    (id)kCVPixelBufferPixelFormatTypeKey: @(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange;), // kCVPixelFormatType_32BGRA
    (id)kCVPixelBufferIOSurfacePropertiesKey: @{},
} 
```

并在创建像素缓冲区期间将此字典与其他键一起传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-28T02:25:49.953

这不是您设置图层内容的方式；这是：

(__bridge id)uiImage.CGImage;

你不可能得到你在设备或模拟器上工作的东西。

# python - numpy迭代多维数组

> ID：15316538
> 
> 赞同：0
> 
> 时间：2013-03-09T22:16:04.523
> 
> 标签：python, numpy

我对 numpy 很陌生，我正在尝试以最 Pythonic 的方式实现以下目标。所以，我有两个数组：

```
a=array([[0, 1, 2],[3,4,5]])
b=zeros(a.shape) 
```

现在，我想要的是 b 中的每个元素都比 a 中相应元素的值大一，即 b=a+1

我想知道如何在 numpy 中实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:21:26.580

最简单的方法如下：

```
b = a + 1 
```

但是如果你想自己遍历数组（虽然不推荐）：

```
for i in range(len(a)):
    for j in range(len(a[i])):
        b[i][j] = a[i][j] + 1 
```

# hadoop - hadoop 映射器过度消耗内存（堆）

> ID：15316539
> 
> 赞同：2
> 
> 时间：2013-03-09T22:16:10.117
> 
> 标签：hadoop, mapreduce, hashmap, mapper

我在hadoop map reduce中写了一个简单的hash join程序。思路如下：

使用 hadoop 框架提供的 DistributedCache 将一个小表分发给每个映射器。大表分布在映射器上，拆分大小为 64M。映射器的设置代码创建一个从这个小表中读取每一行的哈希图。在映射器代码中，在哈希映射中搜索（获取）每个键，如果该键存在于哈希映射中，则将其写出。此时不需要减速器。这是我们使用的代码：

```
 public class Map extends Mapper<LongWritable, Text, Text, Text> {
        private HashMap<String, String> joinData = new HashMap<String, String>();

        public void map(LongWritable key, Text value, Context context)
                throws IOException, InterruptedException {

            String textvalue = value.toString();
            String[] tokens;
            tokens = textvalue.split(",");
            if (tokens.length == 2) {
                String joinValue = joinData.get(tokens[0]);
                if (null != joinValue) {
                    context.write(new Text(tokens[0]), new Text(tokens[1] + ","
                            + joinValue));
                }
            }
        }

    public void setup(Context context) {
        try {
            Path[] cacheFiles = DistributedCache.getLocalCacheFiles(context
                    .getConfiguration());
            if (null != cacheFiles && cacheFiles.length > 0) {
                String line;
                String[] tokens;
                BufferedReader br = new BufferedReader(new FileReader(
                        cacheFiles[0].toString()));
                try {
                    while ((line = br.readLine()) != null) {

                        tokens = line.split(",");
                        if (tokens.length == 2) {
                            joinData.put(tokens[0], tokens[1]);
                        }
                    }
                    System.exit(0);
                } finally {
                    br.close();
                }
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

测试这段代码时，我们的小表是32M，大表是128M，1个主节点，2个从节点。

当我有 256M 的堆时，此代码因上述输入而失败。我在 mapred-site.xml 文件的 mapred.child.java.opts 中使用 -Xmx256m。当我将其增加到 300m 时，它会非常缓慢地进行，而在 512m 时，它会达到其最大吞吐量。

我不明白我的映射器在哪里消耗了这么多内存。使用上面给出的输入和映射器代码，我不希望我的堆内存达到 256M，但它会因 java 堆空间错误而失败。

如果您能对映射器消耗如此多内存的原因提供一些见解，我将不胜感激。

**编辑**：

```
13/03/11 09:37:33 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/03/11 09:37:33 INFO input.FileInputFormat: Total input paths to process : 1
13/03/11 09:37:33 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/03/11 09:37:33 WARN snappy.LoadSnappy: Snappy native library not loaded
13/03/11 09:37:34 INFO mapred.JobClient: Running job: job_201303110921_0004
13/03/11 09:37:35 INFO mapred.JobClient:  map 0% reduce 0%
13/03/11 09:39:12 INFO mapred.JobClient: Task Id : attempt_201303110921_0004_m_000000_0, Status : FAILED
Error: GC overhead limit exceeded
13/03/11 09:40:43 INFO mapred.JobClient: Task Id : attempt_201303110921_0004_m_000001_0, Status : FAILED
org.apache.hadoop.io.SecureIOUtils$AlreadyExistsException: File /usr/home/hadoop/hadoop-1.0.3/libexec/../logs/userlogs/job_201303110921_0004/attempt_201303110921_0004_m_000001_0/log.tmp already exists
    at org.apache.hadoop.io.SecureIOUtils.insecureCreateForWrite(SecureIOUtils.java:130)
    at org.apache.hadoop.io.SecureIOUtils.createForWrite(SecureIOUtils.java:157)
    at org.apache.hadoop.mapred.TaskLog.writeToIndexFile(TaskLog.java:312)
    at org.apache.hadoop.mapred.TaskLog.syncLogs(TaskLog.java:385)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:257)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)

attempt_201303110921_0004_m_000001_0: Exception in thread "Thread for syncLogs" java.lang.OutOfMemoryError: Java heap space
attempt_201303110921_0004_m_000001_0:   at java.io.BufferedOutputStream.<init>(BufferedOutputStream.java:76)
attempt_201303110921_0004_m_000001_0:   at java.io.BufferedOutputStream.<init>(BufferedOutputStream.java:59)
attempt_201303110921_0004_m_000001_0:   at org.apache.hadoop.mapred.TaskLog.writeToIndexFile(TaskLog.java:312)
attempt_201303110921_0004_m_000001_0:   at org.apache.hadoop.mapred.TaskLog.syncLogs(TaskLog.java:385)
attempt_201303110921_0004_m_000001_0:   at org.apache.hadoop.mapred.Child$3.run(Child.java:141)
attempt_201303110921_0004_m_000001_0: log4j:WARN No appenders could be found for logger (org.apache.hadoop.hdfs.DFSClient).
attempt_201303110921_0004_m_000001_0: log4j:WARN Please initialize the log4j system properly.
13/03/11 09:42:18 INFO mapred.JobClient: Task Id : attempt_201303110921_0004_m_000001_1, Status : FAILED
Error: GC overhead limit exceeded
13/03/11 09:43:48 INFO mapred.JobClient: Task Id : attempt_201303110921_0004_m_000001_2, Status : FAILED
Error: GC overhead limit exceeded
13/03/11 09:45:09 INFO mapred.JobClient: Job complete: job_201303110921_0004
13/03/11 09:45:09 INFO mapred.JobClient: Counters: 7
13/03/11 09:45:09 INFO mapred.JobClient:   Job Counters 
13/03/11 09:45:09 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=468506
13/03/11 09:45:09 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/03/11 09:45:09 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/03/11 09:45:09 INFO mapred.JobClient:     Launched map tasks=6
13/03/11 09:45:09 INFO mapred.JobClient:     Data-local map tasks=6
13/03/11 09:45:09 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
13/03/11 09:45:09 INFO mapred.JobClient:     Failed map tasks=1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:40:39.207

很难确定内存消耗的去向，但这里有一些指针：

*   您正在`Text`为输入的每一行创建 2 个对象。您应该只使用 2 个`Text`将在您的类变量中初始化一次的对象，`Mapper`然后为每一行调用`text.set(...)`. 这是 Map/Reduce 模式的常见使用模式，可以节省相当多的内存开销。
*   您应该考虑`SequenceFile`对输入使用格式，这样可以避免使用 解析行`textValue.split`，而是将这些数据直接作为数组提供。我已经读过好几次这样的字符串拆分可能会非常密集，所以如果内存确实是一个问题，你应该尽可能避免。您也可以考虑使用`KeyValueTextInputFormat`if，就像在您的示例中一样，您只关心键/值对。

如果这还不够，我建议您查看[此链接](http://blog.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/)，尤其是第 7 部分，它为您提供了一种非常简单的方法来分析您的应用程序并查看在哪里分配了哪些内容。

# java - 获取两点之间的角度

> ID：15316541
> 
> 赞同：-1
> 
> 时间：2013-03-09T22:16:20.387
> 
> 标签：java, angle

有一个球员。在移动光标时，我想获得玩家和光标之间的角度。我的代码是：

```
public void mouseMoved(MouseEvent ev) {
    float angle = (float) Math.toDegrees(Math.atan2(ev.getX() - player.getCenterX(),
            ev.getY() - player.getCenterY()));
    if (angle < 0) {
        angle += 360;
    }
    System.out.println(angle);
} 
```

但它没有返回正确的值。如何修改它以返回正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:21:47.200

这对我有用：

```
float angle = (float) Math.toDegrees(Math.atan2(-(ev.getX() - player.getCenterX()), ev.getY() - player.getCenterY()));
angle += 90; 
```

# machine-learning - 解析非均匀数据

> ID：15316543
> 
> 赞同：1
> 
> 时间：2013-03-09T22:16:31.993
> 
> 标签：machine-learning, information-retrieval, data-processing

我正在尝试解析具有两个（或一个）有用部分的数据集合，但可能以许多不同的方式组织：

```
V01C01
Vol 1 Chapter 1
Chapter 1 Volume 1 - Alt title
V1.1
etc. 
```

我不想使用大量的正则表达式，因为没有办法预测事物的组织方式的所有组合（也有一些会有无关的文本）。我觉得机器学习的一个分支可能非常适合这一点，但我在这方面的经验不足以知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:25:06.487

好吧，这肯定是一个有趣的问题，您*可以尝试*一些事情。

假设您的数据上没有标签，那么我会尝试做的第一件事是使用 k-means 之类的聚类算法检查每个实例之间的连接（[http://en.wikipedia.org /wiki/K-means_clustering](http://en.wikipedia.org/wiki/K-means_clustering)），请记住，这不会解决您的问题，但会帮助您探索数据并希望找到一组特征来训练监督学习分类器。

如果您的数据*确实*有标签，或者您可以手动标记您的数据集。然后，您将面临一个更易于管理的问题。乍一看，它看起来很像文本或文档分类问题（例如将电子邮件分类为垃圾邮件/非垃圾邮件），在这种情况下，朴素贝叶斯分类器可能是解决该问题的一个很好的第一次尝试，因为它是一种易于实现的算法并能提供合理的良好结果。

关于朴素贝叶斯分类器（[https://www.bionicspirit.com/blog/2012/02/09/howto-build-naive-bayes-classifier.html](https://www.bionicspirit.com/blog/2012/02/09/howto-build-naive-bayes-classifier.html)）

我在这里做了一些假设，基于此我可能是错误的。也许如果您澄清一些要点（例如您是否能够手动标记数据），我们将能够为您提供进一步的帮助。

# php - PDO bindParam 是否允许不存在的变量？

> ID：15316545
> 
> 赞同：4
> 
> 时间：2013-03-09T22:16:59.010
> 
> 标签：php, mysql, error-handling, pdo

正如我在开发过程中设置`error_reporting(-1);`的那样，我确信每个语法错误都会被 PHP 显示出来。例如，它是

```
echo $ttt; 
```

当然它给

```
Notice: Undefined variable: ttt in ... 
```

在这段代码中（某个类的一部分表示 mysql 表中的一行）：

```
public function delete(){
// ...
  $sth=$dbh->prepare('DELETE FROM tobjects WHERE IdObject=:id');
  $sth->bindParam(':id',$this->fid,PDO::PARAM_INT);
  $sth->execute(); 
```

我打错了现在`$this->fid`的内容，没有删除，甚至没有注意到错误，我花了很长时间才找到它。

在`$dbh`其他地方设置为：

```
$dbh=new PDO("mysql:host=XXXX;port=XXXX;dbname=XXXX",$db_user,
$db_password,array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

我做错了什么或者怎么可能没有给出错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:27:16.980

您看不到通知，因为[bindParam](http://php.net/manual/en/pdostatement.bindparam.php)的参数是作为参考传递的。

```
function test(&$var) {
    // var may also be undefined
    var_dump($var);
}

test($undef); 
```

这不会引发任何错误。文档：[参考文献的作用](http://php.net/manual/en/language.references.whatdo.php)

# python - 如果某个条件没有及时满足，函数就会超时

> ID：15316546
> 
> 赞同：2
> 
> 时间：2013-03-09T22:17:07.347
> 
> 标签：python, function, python-3.x, timeout

我遇到的问题是我的聊天客户端应该在服务器发送数据时从服务器接收和打印数据，然后允许客户端回复。

这工作正常，除了当提示客户端回复时整个过程停止。因此，消息会堆积起来，直到您输入某些内容，然后在您输入内容之后，它会打印所有收到的消息。

不知道如何解决这个问题，**所以我决定为什么不让客户有时间在 5 秒后输入回复超时，以便回复可以通过**。这是相当有缺陷的，因为输入会自行重置，但无论如何它工作得更好。

这是需要超时的函数：

```
# now for outgoing data
def outgoing():
    global out_buffer
    while 1:
        user_input=input("your message: ")+"\n"
        if user_input:
            out_buffer += [user_input.encode()]
#       for i in wlist:
            s.send(out_buffer[0])
            out_buffer = [] 
```

我应该如何使用超时？我正在考虑使用 time.sleep，但这只是暂停了整个操作。

我尝试寻找文档。但是我没有找到任何可以帮助我使程序计数达到设定限制的方法，然后继续。

关于如何解决这个问题的任何想法？（不需要使用超时，只需要在发送客户回复之前停止消息堆积）（感谢所有帮助我走到今天的人）

对于 Ionut Hulub：

```
from socket import *
import threading
import json
import select
import signal # for trying to create timeout

print("client")
HOST = input("connect to: ")
PORT = int(input("on port: "))

# create the socket
s = socket(AF_INET, SOCK_STREAM)
s.connect((HOST, PORT))
print("connected to:", HOST)

#--------- need 2 threads for handling incoming and outgoing messages--

#       1: create out_buffer:
out_buffer = []

# for incoming data
def incoming():
    rlist,wlist,xlist = select.select([s], out_buffer, [])
    while 1:
        for i in rlist:
            data = i.recv(1024)
            if data:
                print("\nreceived:", data.decode())

# now for outgoing data
def outgoing():
    global out_buffer
    while 1:
        user_input=input("your message: ")+"\n"
        if user_input:
            out_buffer += [user_input.encode()]
#       for i in wlist:
            s.send(out_buffer[0])
            out_buffer = []

thread_in = threading.Thread(target=incoming, args=())
thread_out = threading.Thread(target=outgoing, args=())
thread_in.start() # this causes the thread to run
thread_out.start()
thread_in.join()  # this waits until the thread has completed
thread_out.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T11:19:19.893

我们可以使用相同的信号。我认为下面的示例对您有用。

```
import signal

def timeout(signum, frame):
    raise Exception

#this is an infinite loop, never ending under normal circumstances
def main():
    print 'Starting Main ',
    while 1:
        print 'in main ',

#SIGALRM is only usable on a unix platform
signal.signal(signal.SIGALRM, timeout)

#change 5 to however many seconds you need
signal.alarm(5)

try:
    main()
except:
    print "whoops" 
```

# php - 使用 Magento 通过 PHP 动态生成 Javascript 指令

> ID：15316548
> 
> 赞同：0
> 
> 时间：2013-03-09T22:17:08.770
> 
> 标签：php, javascript, magento

## 目标

我希望能够动态创建 javascript 并根据应用程序的预设配置提供它。javascript 资源的 url 可以保持不变。这个想法是提供根据后端配置更改 javascript 参数的选项。

一个例子：

管理员有一组类，当单击这些类时，会为最终用户打开一个模式窗格。假设这些类遵循 *_modal 的格式，其中类的 * 部分将指示将通过 ajax 从其中提取模式窗格的内容的 url 的一部分。

例如：

点我

然后会在单击时触发 ajax 事件，其中来自 #contents 的内容将从[http://www.myurl.com/modal/orange](http://www.myurl.com/modal/orange)中提取并显示在客户端的 div #modal_output 中。

假设出于某种奇怪的原因，该站点的管理员决定出于某种原因将显示模式窗格的 id 更改为 #modal_output_view 。通常这需要对 javascript 和页面的静态输出进行一些修改。

我想放弃它并提供一个配置选项，而管理员可以选择模式输出的 div id。

在运行时请求资源，php 将获取该 div 的 id 的配置值并以 javascript 资源的形式返回一个字符串。

其次，我将使用magento，有没有一种通过缓存提高性能的好方法？有没有办法使用cdn？

## 问题

1）我知道如何做配置部分，除了在附加块内或模板文件内做这件事：

```
<script type="text/javascript">
(function(){
 configuration_value = <?= Mage::getStoreConfig('my/config/value');?>;
})();
</script> 
```

是否有另一种更简单的方法可以在 magento 的配置值和客户端 javascript 之间进行交互？

2）这会正常工作吗？我可能会遇到什么问题吗？关键是 .php 扩展名

3) 是否存在可能有用的核心 javascript 类/方法？任何文件？

# angularjs - 如何让 Angular 从控制器内更新 Ui

> ID：15316551
> 
> 赞同：0
> 
> 时间：2013-03-09T22:17:29.037
> 
> 标签：angularjs

我有以下html。

```
<div ng-controller="CustCtrl">
<table class="table table-condensed">
    <thead>
        etc.
    </thead>
    <tbody>
        <tr ng-repeat="customer in customers" data-cust-id="{{customer.Id}}">
            <td>
              <button ng-model="Id" tracking-{{customer.Tracking}} ng-click="startTrackingCustById(customer.Id)">
              </button>
            </td>
         etc.
        </tr>
    </tbody>
</table> 
```

所以按钮有一个类，它是数据绑定到 customer.Tracking 值的，它是真或假。单击按钮时，成功调用 startTrackingCustById() 方法并成功更改客户对象中的客户对象，如 customer.Tracking = true。

但是按钮类没有更新。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:42:11.647

在 CustCtrl 我包装了像这样更新客户数组的调用

```
$scope.$apply($scope.customers[i].Tracking = true); 
```

根据答案中的建议，当我发现它基本上说“如果您在更新视图时遇到问题，您很可能需要使用 $scope.$apply

这样就可以工作了。现在我需要弄清楚为什么以及如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:33:31.353

看看使用`ng-class`。对于范围内的布尔值，您将使用：

```
ng-class="{'classNameToAddIfTrue':customer.Tracking}" 
```

# javascript - Viewmodel 定义差异

> ID：15316553
> 
> 赞同：0
> 
> 时间：2013-03-09T22:17:57.173
> 
> 标签：javascript, knockout.js, viewmodel

这之间有什么区别：

```
define(["knockout"],
    function (ko) {
        return (function () {
            var self = this;
            self.Person = {
                firstName: ko.observable(),
                lastName: ko.observable(),
                Age: ko.observable()
            };
        });
    }); 
```

和

```
define(['knockout'], 
   function (ko) {
    return function appViewModel() {
        var self = this;
        self.Person = {
            firstName: ko.observable(),
            lastName: ko.observable(),
            Age: ko.observable()
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:29:40.303

没有什么。后者是一个命名函数，但它只能在模块回调范围内访问，因此无论如何您都不能使用该名称。我想这是为了使功能的目的更加清晰。

# fonts - kineticjs字体太粗

> ID：15316555
> 
> 赞同：0
> 
> 时间：2013-03-09T22:18:23.117
> 
> 标签：fonts, kineticjs

我有以下代码，并且我不断获得非常粗体的字体，但我不是要求这样做。

```
var myText = new Kinetic.Text({
            x: RoundOneX +.5,
            y: RoundOneY+2.5,
            text: thisname,
            fontSize: "8pt",
            fontFamily: 'r',
            width: 70,
            stroke: 'black',
            align: 'center'
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:33:31.697

**你的 width:70对于你的小 fontSize:"8pt"*来说*太厚了**

您的代码将绘制文本的轮廓（内部填充将为空）。

尝试此配置并从那里进行调整：

```
var myText = new Kinetic.Text({
        x: RoundOneX +.5,
        y: RoundOneY+2.5,
        text: thisname,
        fontSize: "12pt",
        fontFamily: 'arial',
        fill: 'black',
        align: 'center'
    }); 
```

# ruby-on-rails - Authlogic/Rspec/Rails 3.2：UserSession.find 在 ApplicationController 中返回 nil

> ID：15316557
> 
> 赞同：2
> 
> 时间：2013-03-09T22:18:32.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, factory-bot, authlogic

相关型号：

```
class User < ActiveRecord::Base 
    acts_as_authentic
end

class UserSession < Authlogic::Session::Base
end 
```

应用控制器：

```
class ApplicationController < ActionController::Base
    helper :all
    protect_from_forgery
    helper_method :current_user_session, :current_user

    private

    def current_user_session
        return @current_user_session if defined?(@current_user_session)
        @current_user_session = UserSession.find
    end

    def current_user
      return @current_user if defined?(@current_user)
      @current_user = current_user_session && current_user_session.record
    end
end 
```

这是Rspec：

```
describe "Rate Function" do
    include Authlogic::TestCase
    before(:each) do
        current_user = FactoryGirl.create(:user, persistence_token: "pt", email: "new@example.com", password: 'password', password_confirmation: 'password')
        activate_authlogic
        UserSession.create(current_user)
    end
    it "Some test for rating..." do
        get "/reviews/rate", {:format => :json, :vehicle_id => 3}
        # other stuff here, doesn't matter what it is because it never gets here
    end
    after(:each) do
    end
end 
```

这是用户的 Rspec 定义：

```
FactoryGirl.define do
    factory :user do
        email "email@example.com"
        password "password"
        password_confirmation "password"
        persistence_token "pertoken"
    end
end 
```

问题是每次我`current_user`从任何控制器方法调用时，它总是返回`nil`，这是因为`UserSession.find`总是`nil`在`ApplicationController`.

有趣的是，如果我在 Rspec 中（而不是在控制器中）运行以下命令，则`UserSession.find`可以正常工作并且`just_created_session`不为零。

```
UserSession.create(current_user)
just_created_session = UserSession.find 
```

所以问题是特定于`UserSession.find`在控制器中调用的。

任何帮助表示赞赏。

环境

```
Ruby: 1.9.3p392
Rails: 3.2.12
Authlogic: 3.2.0
Factory Girl: 4.2.0
Rspec: 2.13.0
OS: Windows 7 
```

更新：我看了看`UserSession.create`，它所做的只是：

```
def create(*args, &block)
    session = new(*args)
    session.save(&block)
    session
end 
```

由于从规范调用时我什至不存储返回值，该方法似乎也没有进行任何存储，我不确定我们希望`User.find`如何找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T22:15:55.163

当从 RSpec 请求规范驱动时，我偶然发现了 UserSession.find 在控制器中返回 nil 的类似问题。

在 RSpec 测试之间运行数据库清理程序会导致 authlogic 的 UserSession.find（有时）返回 nil，即使会话是有效的。我会 UserSession.create(model) 并立即 UserSession.find 将返回 nil。但仅来自请求规范。这令人沮丧。

但是，这不是 authlogic 的错。我在模型类中发现了一个在数据库清理中幸存下来的记忆。这维护了对活动记录对象的幻像引用，并且该引用意外传递给了 UserSession.create，导致了症状。该会话已创建，并且立即无法找到，但仅在数据库清理程序运行时。

# twitter-bootstrap - 如何为引导选项卡内容提供边框

> ID：15316559
> 
> 赞同：70
> 
> 时间：2013-03-09T22:18:54.083
> 
> 标签：twitter-bootstrap, tabs

我正在使用引导选项卡，它运行良好。我试图弄清楚是否有一种方法可以使用引导程序为连接到药丸边框的选项卡的内容提供边框，使其看起来像一个盒子。我尝试使用自己的 css 执行此操作，但选项卡药丸边框和选项卡内容边框之间有一个上限，这是选项卡药丸需要具有且无法删除的边距。我希望它看起来像下图。 ![带边框的标签内容](../Images/20ce27ab32261cbb52ca0be50c5b5abb.png)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-09T23:24:55.450

以下css应该完全符合您的要求:)

```
.tab-content {
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    padding: 10px;
}

.nav-tabs {
    margin-bottom: 0;
} 
```

***边距底部：0；***on *.nav-tabs*消除了药片和内容之间的差距。

*.tab-content*上的*填充*使内容不会压在左右的新边框上。

 ** * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-06-17T18:10:34.740

我会修改 Kisuka 对以下内容的回答：

CSS

```
.tab-pane {

    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-radius: 0px 0px 5px 5px;
    padding: 10px;
}

.nav-tabs {
    margin-bottom: 0;
} 
```

引导程序 4 的 SCSS

```
.tab-pane {
    border-left: 1px solid $nav-tabs-border-color;
    border-right: 1px solid $nav-tabs-border-color;
    border-bottom: 1px solid $nav-tabs-border-color;
    border-radius: 0px 0px $nav-tabs-border-radius $nav-tabs-border-radius;
    padding: $spacer;
}

.nav-tabs {
    margin-bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-17T13:32:10.043

比@goat 解决方案更干燥，您还可以重用面板 css，例如：

```
.tab-content.panel
{
    border-top: none; 
    border-top-left-radius: 0px; 
    border-top-right-radius: 0px;
}

<div>
    <ul class="nav nav-tabs">
        ...
    </ul>

    <div class="tab-content panel">
        <div class="tab-pane panel-body">
            ...
        </div>
    </div>
</div> 
```

选项卡内容面板面板默认和选项卡面板面板主体。然后你不需要重新定义边框和填充。只需删除顶部边框和顶部半径。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-17T09:24:50.513

使用以下代码，所有角都有半径，但制表符偏移。

```
.nav-tabs {
    padding-left: 15px;
    margin-bottom: 0;
    border: none;
}
.tab-content {
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 15px;
} 
```

注意：如果您将 nav-tab 的 padding-left 设置为 0px，则第一个选项卡与内容的左上角半径冲突。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-22T17:07:25.150

很久以前就有人问过这个问题，但这里的技巧可能会对某些人有所帮助：

放入一个`div.container`你的`.nav-tabs`和`.tab-content`。为此`div.container`，给一个固定的高度说**300px**和`border-bottom: 1px solid #ccc`and `overflow: hidden !important`。

然后`.tab-content`，我添加了这个 css：`height: 100%; border-left: 1px solid #ccc ; border-right: 1px solid #ccc;`

它有效。试试看（[http://jsfiddle.net/996Bw/](http://jsfiddle.net/996Bw/)）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-08T12:45:51.373

基于 Popnoodles 的回答，添加也适用`.border .border-top-0`于`.tab-pane`Bootstrap 4.3

```
 <div class="tab-content">
    <div class="tab-pane border border-top-0">
      <!-- tab content -->
    </div>
  </div> 
```

或在 SCSS

```
.tab-pane {
  @extend .border;
  @extend .border-top-0;
  @extend .p-3;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-04T20:15:18.550

我修改了@user3749683 和@Kisuka 的答案，这样您就不必更改任何现有引导样式的定义。相反，您只需向父元素添加一个新类。我使用了第一个子选择器，这样您就可以拥有不一定需要有边框内容的嵌套选项卡。

```
.bordered-tab-contents > .tab-content > .tab-pane {
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-radius: 0px 0px 5px 5px;
    padding: 10px;
}

.bordered-tab-contents > .nav-tabs {
    margin-bottom: 0;
} 
```

标记结构

```
<div class="bordered-tab-contents">
    <ul class="nav nav-tabs">
        ...
    </ul>

    <div class="tab-content">
        <div class="tab-pane" ...>
            ...
        </div>
    </div>
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-04T09:58:35.140

这是一个仅使用引导程序将内容与导航选项卡对齐的示例。

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
  <div class="container">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" href="#">Active</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <div class="container border-right border-left border-bottom">
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem possimus in temporibus nemo dolorem? Nemo quibusdam, rem deleniti adipisci eveniet voluptas enim provident voluptates voluptate sit! Similique voluptatem accusamus officia?
    </div>
  </div>
</body>
</html>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-05T21:09:34.193

对于 bootstrap 5，使用`box-shadow`for`.tab-content`可能会起作用，因为`.nav-tabs`它也在使用它。

```
border: 0;
box-shadow: 0px 1px 0px #b1b4b6, 1px 0px 0px #b1b4b6, -1px 0px 0px #b1b4b6,
    -1px 1px 0px #b1b4b6, 1px 1px 0px #b1b4b6, 1px -1px 0px #b1b4b6,
    -1px -1px 0px #b1b4b6; 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-03-10T02:56:36.080

您可以使用以下代码来实现它：
JSfiddle [Demo](http://jsfiddle.net/shail/SLFB8/)

```
.nav-tabs > .active > a, .nav-tabs > .active > a:hover, .nav-tabs > .active > a:focus {
border-bottom: 1px solid #dddddd;
outline:0;
 }
} 
```*

# visual-studio-2012 - EnvDTE VS 2012 ProjectItems.AddFolder

> ID：15316565
> 
> 赞同：0
> 
> 时间：2013-03-09T22:19:18.423
> 
> 标签：visual-studio-2012, vsx, envdte

我正在重新创建我在 VS 2010 中拥有的 AddIn 项目，并且像向项目中添加文件夹这样的基本功能不起作用。给我：

```
The kind 'vsProjectItemKindPhysicalFolder' passed to ProjectItems.AddFolder is invalid. 
```

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T14:18:48.490

问题是您需要传入名为的常量`vsProjectItemKindPhysicalFolder`而不是常量的名称作为项目类型：

```
proj.ProjectItems.AddFolder(@"Generated", EnvDTE.Constants.vsProjectItemKindPhysicalFolder); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:49:01.603

这很可能是因为您在物理磁盘上已经有一个使用该确切名称的文件夹，但还不是项目的一部分。您应该尝试重命名现有文件夹并再次尝试执行该操作。

# linux - Linux，打印文件中的所有行，而不是以

> ID：15316569
> 
> 赞同：12
> 
> 时间：2013-03-09T22:19:29.897
> 
> 标签：linux, printing, awk, grep

我想打印文件的内容，但我想忽略所有以 # 开头的行。我正在用 grep 和 awk 尝试一些东西，但它一直在打印整个文件，或者只是打印以 # 开头的行。我你可以用正确的方式给我一个推送，或者一个 grep/awk 命令，它会打印文件中不以 # 开头的任何行。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T22:22:05.093

使用`-v`选项`grep`来否定条件：

```
grep -v '^#' file 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T22:21:57.563

您可以使用`!`运算符：

```
awk '!/^ *#/ { print; }' 
```

这否定了匹配的结果。我还包括了以空格和 # 开头的行，但您可以根据自己的喜好定制正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T22:24:00.690

`#`您可以使用 grep 排除所有以使用该`-v`选项开头的行

```
grep -v '^#' filename 
```

如果你喜欢`sed`：

```
sed '/^#/d' filename 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-09T22:48:15.380

这也会在 : 之前省略带有空格的行`#`：

```
awk '$1!~/^#/' file 
```

或者

```
grep -v '^[[:blank:]]*#' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-28T11:02:50.683

这是 grep PCRE 方式，

```
grep -P '^(?!#)' file 
```

# c# - 使用 Linq 向 EF 传递参数时填充视图

> ID：15316571
> 
> 赞同：1
> 
> 时间：2013-03-09T22:19:36.313
> 
> 标签：c#, asp.net, entity-framework, function, linq-to-entities

下面的代码正在工作.. CustomView 被填充而没有任何错误。

**自定义视图**

```
public static ProductView CustomView(Product data)
{
    var view = new ProductView();
    view.ID = data.ID;
    view.Number = data.Number;

    var invetoryCount = GetInvetoryCountNumber(data.Number);
    if (invetoryCount < 1)
        view.SoldOut = true;

    return view;
} 
```

**功能**

```
public static List<ProductView> GetAll()
{
    using (var ctx = new DBSolutionEntities())
    {
        var data = ctx.Products.OrderBy(p => p.Name).ToList();
        return data.Select(CustomView).ToList();
    }
} 
```

我想在函数中添加一个额外的参数来跳过库存搜索

**CustomView - 添加了布尔值**

```
public static ProductView CustomView(Product data, bool skipInvCheck)
{
    var view = new ProductView();
    view.ID = data.ID;
    view.Number = data.Number;

    if(skipInvCheck)
    {
        var invetoryCount = GetInvetoryCountNumber(data.Number);
        if (invetoryCount < 1)
            view.SoldOut = true;
   }    

   return view;
} 
```

当我将 bool 参数添加到 CustomView 并调用它时

```
public static List<ProductView> GetWithoutInvSoldOut()
{
    using (var ctx = new DBSolutionEntities())
    {
        var data = ctx.Products.OrderBy(p => p.Name).ToList();
        return data.Select(CustomView, false).ToList();
    }
} 
```

我收到以下错误：

> 无法从用法中推断方法“System.Linq.Enumerable.Select(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数。

传递参数时如何调用返回填充视图返回 data.Select(CustomView, false).ToList()？

*ps 当获取 ONE 记录（不是 .ToList ）时，CustomView 通过 return CustomView(data, false) 工作；*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:24:34.337

这里的主要问题是该`Select`方法需要一个接受单个参数但`CustomView`接受两个参数的函数。解决这个问题的最简单方法是使用 lambda 表达式将参数[*curry到方法中。*](http://en.wikipedia.org/wiki/Currying)`bool``CustomView`

```
public static List<ProductView> GetWithoutInvSoldOut()
{
    using (var ctx = new DBSolutionEntities())
    {
        var data = ctx.Products.OrderBy(p => p.Name).ToList();
        return data.Select(x => CustomView(x, false)).ToList();
    }
} 
```

# javascript - javascript 中的正则表达式以匹配 XML 标记之外

> ID：15316574
> 
> 赞同：-1
> 
> 时间：2013-03-09T22:19:52.550
> 
> 标签：javascript, regex

我想在标签中找到“a”的所有匹配项`<span class="get">habbitant morbi</span> triastbbitique`，但标签中的“a”除外（参见下面的“a”在**之间）。

`<span class="get">h*a*bbit*a*nt morbi</span> tri*a*stbbitique.`

如果我找到它们，我想替换它们并且我想保存原始标签。

这个表达式不起作用：

```
var variable = "a";
var reg = new RegExp("[^<]."+variable+".[^>]$",'gi'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:38:08.777

我建议[不要*使用*正则表达式来解析 HTML](https://stackoverflow.com/a/1732454/422263)；这不是常规语法，除了简单的情况外，您都会遇到痛苦。

您的问题仍然有点不清楚，但让我尝试改写一下，看看我是否正确：

您想获取 HTML 文档中给定字符串的所有匹配项，但`<tag>`正文中的匹配项除外？

* * *

假设您使用的是 jQuery 或类似的：

```
// Let the browser parse it for you:
var container = document.createElement()
container.innerHTML = '<span class="get">habbitant morbi</span> triastbbitique'
var doc_text  = $(container).text()

// And then you can just regex away normally:
doc_text.match(/a/gi) 
```

（更好的是使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)，但这还没有广泛的浏览器支持）

如果你在 Node 中，那么你想寻找一些帮助你解析 HTML 节点的库（比如 jsdom）；然后只是吐出所有下一个节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:54:56.410

请注意，这个问题与解析无关。这是词法。正则表达式经常和正确使用的东西。

如果你想使用正则表达式，有几种方法可以做到这一点。

*   一个简单的 hack 前瞻，如：

    ```
     a(?![^<>]*>) 
    ```

    请注意，这不会在标签中正确处理`<`和`>`引用/在标签之外未转义。

*   一个完整的分词器：

    ```
     (expression for tag|comments|etc)|(stuff outside that that i'm interested in) 
    ```

    替换为根据匹配的部分执行不同操作的函数。如果 `$1`匹配，它将被它自己替换，如果`$2`matchehd 将其替换为`*$2*`

完整的分词器方式当然不是一件小事，[规格也不小](https://html.spec.whatwg.org/multipage/parsing.html#tokenization)。

但如果简化为仅匹配基本标签，忽略 CDATA、注释、脚本/样式标签等，您可以使用以下内容：

```
var str = '<span class="a <lal> a" attr>habbitant 2 > morbi. 2a < 3a</span> triastbbitique';

var re = /(<[a-z\/](?:"[^"]*"|'[^']*'|[^'">]+)*>)|(a)/gi;

var res = str.replace(re, function(m, tag, a){
    return tag ? tag : "*" + a + "*";
}); 
```

结果：

```
<span class="a <lal> a" attr>h*a*bbit*a*nt 2 > morbi. 2*a* < 3*a*</span> tri*a*stbbitique 
```

现场示例：

```
var str = '<span class="a <lal> a" attr>habbitant 2 > morbi. 2a < 3a</span> triastbbitique';

var re = /(<[a-z\/](?:"[^"]*"|'[^']*'|[^'">]+)*>)|(a)/gi;

var res = str.replace(re, function(m, tag, a){
    return tag ? tag : "*" + a + "*";
});

console.log(res);
```

这可以处理 HTML 中凌乱的标签、引号和未转义的`<`/ `>`。

* * *

使用正则表达式标记 HTML 标记的几个示例（应该可以很好地转换为 JS 正则表达式）：

*   [从 HTML 标记中删除 on* JS 事件属性](https://stackoverflow.com/questions/9462104/remove-on-js-event-attributes-from-html-tags/9466152#9466152)
*   [正则表达式只允许一组 HTML 标签和属性](https://stackoverflow.com/questions/9494143/regex-to-allow-only-set-of-html-tags-and-attributes/9499761#9499761)

# r - 为习惯 MATLAB 的人学习 R，并与 R 数据类型混淆

> ID：15316580
> 
> 赞同：3
> 
> 时间：2013-03-09T15:00:14.620
> 
> 标签：r

是否有简洁（但相当彻底）的教程让人们习惯在 MATLAB 中工作，以加快编写 R 代码的速度。

这是我想到的一个特殊问题：根据我对 R 文档和教程的有限经验，我对 R 中的数据类型以及如何操作它们感到很困惑。例如，什么是向量、矩阵、列表、数据框等以及它们之间的关系。我还没有找到清楚地解释基本数据类型的来源，以至于我想知道这种语言是否在设计上是模棱两可的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:19:56.937

如果您在尝试学习另一种工作方式不同的编程语言时主要只熟悉一种编程语言，那总是很困难，因为您希望以不同的方式思考问题，而这些不正确的期望会导致问题。很难有一个适合来自其他每种语言的学生的介绍性指南（“你会认为你应该做 X，但在 R 中，你应该做 Y”）。但是，我可以向您保证，R 的设计初衷并非模棱两可。

大多数情况下，您只需要获得一个介绍性指南并费力地完成它。起初，这将是很多工作，令人沮丧，但这是唯一的方法。最后，它会变得更容易。也许我可以告诉你一些事情来启动这个过程：

*   a`list`只是一组有序的元素。这可以是任何长度，并且包含任何旧类型的东西。例如，`x <- list(5, "word", TRUE)`。
*   a`vector`也是一个有序的元素集合。尽管它可以是任意长度，但元素必须都是同一类型。例如，`x <- c(3,5,4)`，`x <- c("letter", "word", "a phrase")`，`x <- c(TRUE, FALSE, FALSE, TRUE)`。
*   a`matrix`是向量的向量，其中所有分量向量具有相同的长度和类型。例如，`x <- matrix(c("a", "b", "c", "d"), ncol=2)`。
*   a`data.frame`是向量列表，其中所有分量向量的长度相同，但不必属于相同类型。例如，`x <- data.frame(category=c("blue", "green"), amount=c(5, 30), condition.met=c(TRUE, FALSE))`。

* * *

*（回复评论：）*

*   函数[?c](http://stat.ethz.ch/R-manual/R-patched/library/base/html/c.html)用于*连接*；`c(c("a", "b"), c("c", "d"))`, 不会创建一个矩阵，而是从两个较短的向量中创建一个较长的向量。函数[?cbind](http://stat.ethz.ch/R-manual/R-patched/library/base/html/cbind.html)（将列绑定在一起）或`rbind()`（将行绑定在一起）将创建一个矩阵。
*   我不知道有一个函数会输出任何对象的类型。最接近的可能是[?class](http://stat.ethz.ch/R-manual/R-patched/library/base/html/class.html)，但这有时会给出，例如，“整数”，我认为你想要“向量”。还有`mode()`, 和`typeof()`, 它们是相关的，但不是你要找的。[在这里](https://stats.stackexchange.com/questions/3212/mode-class-and-type-of-r-objects)和[这里](https://stackoverflow.com/questions/6258004/r-types-and-classes-of-variables)了解更多关于它们之间的区别。要检查对象是否为*特定*类型，您可以使用[?is.vector](http://rss.acs.unt.edu/Rdoc/library/base/html/vector.html)`is.<specific type>()`等。
*   要将对象*强制*（即“强制转换”）为特定类型，您可以使用`as.vector()`，但这仅在满足条件（例如，上面提到的）时才有效。

# plone - 如何定义升级附加组件的过程？

> ID：15316583
> 
> 赞同：5
> 
> 时间：2013-03-09T22:21:17.417
> 
> 标签：plone

当我更改我编写的附加组件的配置文件版本时，我总是会收到上面的消息。

> 此插件已升级。旧配置文件版本为 10。新配置文件版本为 11。没有为此附加组件定义升级过程。请查阅插件文档以获取升级信息，或联系插件作者。

那么我如何定义一个升级附加组件的过程呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T07:54:19.187

在您的 configure.zcml 中（或者最好在 configure.zcml 中包含的单独的 upgrades.zcml 中），您需要像这样声明您的升级步骤：

```
 <genericsetup:upgradeStep
  source="22"
  destination="23"
  title="Remove such js from registry"
  description=""
  profile="Products.MyProduct:default"
  handler=".upgrades.upgrade_22_to_23"
  /> 
```

你需要一个 upgrades.py 文件来实现升级步骤（只是一个例子）：

```
from Products.CMFCore.utils import getToolByName

def upgrade_22_to_23(context):
    js_id = '++resource++blabla/blibli.js'
    jsregistry = getToolByName(context, 'portal_javascripts')
    jsregistry.unregisterResource(js_id) 
```

注意：在 zcml 中，如果您希望该步骤从任何先前的配置文件版本应用到您的目标版本，则源可能设置为“*”。

# ios - 有人可以向我解释在 iOS 中使用 initWithNibName 吗？

> ID：15316586
> 
> 赞同：0
> 
> 时间：2013-03-09T22:21:45.267
> 
> 标签：ios, objective-c, uiviewcontroller

我一直在玩 iOS 6 中的 UIViewControllers。但是有一件事我不太明白。我们什么时候使用像 initWithNibName、awakeFromNib 和 setup 这样的方法？它们与 viewDidLoad、viewWillAppear 有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:34:05.087

`-initWithNibName:bundle:`是基于 XIB 的 UIViewControllers 的标准初始化程序。它与 Cocoa-Touch 的其余部分（保存一些异常值）直接形成对比，后者`-initWithCoder:`在取消归档时发送。请注意，此时尚未开始设置工作。当然，通过超级调用来启动 NSCoder 以“解冻”您的 XIB，但是您没有有效的视图实例，并且不应该尝试在此方法中设置一个。

`-awakeFromNib:`在给定的类被“解冻”并由 NSCoder 初始化后立即调用。此时，您仍然没有有效的视图出口，因此任何与视图相关的设置（添加子视图，在根视图上设置属性等）都应该在`-loadView`（您应该分配的唯一方法）中完成到`self.view`), 或`-viewDidLoad`.

`-viewWill/DidAppear`是外观方法（不一定是初始化指标），当关联视图设置为根时发送，或者在导航堆栈中它上面的视图被弹出时发送。

# php - 使用 phpdoc2 记录 php 文件的指南

> ID：15316589
> 
> 赞同：0
> 
> 时间：2013-03-09T22:21:50.507
> 
> 标签：php, document, phpdoc

开始记录我的项目，第一次使用 phpdoc2，我遇到了一些问题。我确实阅读了 phpdoc.org 上的指南。

是否有使用 phpdoc2 时要记录什么的指南？我必须记录所有变量还是仅记录某个范围/可见性中的变量。

据我所知，您记录了每个：

*   文件
*   班级
*   功能

但即便如此......您使用标签能走多远？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:38:28.473

文档应涵盖所有最重要的内容。如果可能，您甚至可以提供示例、外部链接等。我用的是doxygen软件，觉得很不错，这个有这些功能。

php.net 手册非常好。它涵盖了每个函数、类、方法，还包括需求、介绍等。

对我来说，最糟糕的问题是我记录了每一个细节，有时我会说“我厌倦了这个”，并停止记录或在最重要的部分发表评论。“我会记住的”。

一个月或一年后删除太长或多余的东西总是比填补缺失的东西更容易。

找到你的观点。

# jsf - java.lang.IllegalStateException：使用 Glassfish 时的类不变冲突

> ID：15316591
> 
> 赞同：2
> 
> 时间：2013-03-09T22:21:58.023
> 
> 标签：jsf, illegalstateexception

我在重新部署时遇到了一些麻烦。第一次部署，没问题。但随后它抛出了这个异常。我必须重新启动 GlassFish。为什么有必要？

```
SEVERE: log4j:ERROR log4j called after unloading, see http://logging.apache.org/log4j/1.2/faq.html#unload.
SEVERE: java.lang.IllegalStateException: Class invariant violation
at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:199)
at org.apache.log4j.LogManager.getLogger(LogManager.java:228)
at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:64)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:253)
at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)
at com.icesoft.faces.component.portlet.Portlet.<clinit>(Portlet.java:38)
at sun.misc.Unsafe.ensureClassInitialized(Native Method)
at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:43)
at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:140)
at java.lang.reflect.Field.acquireFieldAccessor(Field.java:949)
at java.lang.reflect.Field.getFieldAccessor(Field.java:930)
at java.lang.reflect.Field.set(Field.java:680)
at 
...

SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: com.sun.faces.config.ConfigurationException: Unable to parse document 'bundle://184.0:1/com/sun/faces/jsf-ri-runtime.xml': DTD factory class org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl does not extend from DTDDVFactory. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:29:51.803

似乎`xerces.jar`您的应用程序中有另一个解析器，它试图覆盖 glassfish 的默认解析器，但在重新部署期间无法这样做。

如果您有任何解析器实现 jar，则通过添加使其成为默认解析器

`-Djava.endorsed.dirs=/myapp/lib/xerces.jar`到您的服务器启动。

[http://www.java.net/forum/topic/glassfish/glassfish/cannot-deploy-application-includes-xerces-jar-glassfish-311](http://www.java.net/forum/topic/glassfish/glassfish/cannot-deploy-application-includes-xerces-jar-glassfish-311)

# c# - WPF 自定义 Chrome 窗口？

> ID：15316592
> 
> 赞同：4
> 
> 时间：2013-03-09T22:22:01.633
> 
> 标签：c#, wpf, window, visual-c#-express-2010

我一直在尝试按照这个思路做一些事情......![在此处输入图像描述](../Images/4a9c6262477a3ffc6629b56438a06002.png)

我看了又看，只找到了这篇[文章](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)。我无法将其集成到我的应用程序中。我今天刚开始使用WPF，所以我正在学习。我已经下载了window.Shell DLL。我还需要什么？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T20:06:17.513

如果您正在寻找有关如何将其添加到您的应用程序的分步指南，我可以尝试一下；我只是碰巧需要对一个小应用程序进行一些改进，我喜欢这个并试了一下——我花了大约 45 分钟来申请。其实很酷的东西！

首先：下载**源**应用程序并将其解压缩到您的计算机。

在其中，您将找到三个子文件夹。一个带有示例应用程序，一个名为 Microsoft.Windows.Shell，一个名为 CustomChromeLibrary。将后两个复制到项目地图的根文件夹，**将它们****添加**到项目地图（添加现有项目），然后从您的启动项目中**引用**它们。

现在打开要应用 CustomChromeLibrary 的窗口。您需要将根从

```
<Window> 
```

到

```
<ccl:CustomChromeWindow> 
```

，这是通过将此代码用作文档根来完成的：

```
<ccl:CustomChromeWindow 
Title="YourWindowTitle" Height="268" Width="733" ResizeMode="CanResize" 
x:Class="YourNamespace.YourWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
xmlns:ccl="clr-namespace:CustomChromeLibrary;assembly=CustomChromeLibrary"
xmlns:local="clr-namespace:YourNamespace" 
> 
```

注意示例中的最后三行。这些需要更新以引用正确的库；最后一个实际上引用了您的命名空间。

接下来，您需要更新窗口的源代码，因为这仍然是一个简单的窗口，您将收到错误消息。

改变这个

```
public partial class YourWindow : Window 
```

对此

```
public partial class YourWindow : CustomChromeLibrary.CustomChromeWindow 
```

你已经成功了一半！

接下来，您只需要为您的窗口（标题栏等）创建对象。这在**示例项目 5**中做得非常好；我确实只是复制它。

把一切从

```
<shell:WindowChrome.WindowChrome>
    <shell:WindowChrome
    ... 
```

到这里

```
 <!--min/max/close buttons-->
    <ccl:CaptionButtons/> 
```

现在你可以像这样填充你的窗口

```
 <Grid> 
        The content of your Window goes here 
    </Grid> 
```

并像这样关闭xaml

```
 </Grid>
</ccl:CustomChromeWindow> 
```

现在，如果您尝试运行它，您将收到另一个错误。仍然缺少三个文件：

您需要的第一个文件是 Microsoft 文件：CaptionButtonRectToMarginConverter.cs；您还将在示例中找到它。将其复制到您的项目并添加它（添加现有文件）。

您需要对其进行一项更改：

```
namespace YourNamespace
{ ... 
```

而不是样本的命名空间。

最后，您需要创建按钮的两个 xaml 文件：GlassButton.xaml 和 GlassIcon.xaml；它们可以在“资源”子文件夹中找到（并且在 xaml 中被称为资源字典）。将整个子文件夹复制到您的项目中，并将这两个文件添加到您的项目中（添加现有文件）。

现在你终于可以运行你的项目了。

让我们不要忘记这一点：对[gbahns 表示感谢](http://www.codeproject.com/script/Membership/View.aspx?mid=4540883)，他是 codeplex.com 上原始文章的作者！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T22:30:37.440

您可以找到很多自定义 chrome 的实现。

我见过你链接的另一个帮助库是

[MahApps.Metro](http://mahapps.com/MahApps.Metro/)

阅读第 3 节。它可以使用 Nuget 进行设置，从而更容易为新人集成。

3.3 3.4 3.5 节还讨论了自定义和扩展`MetroWindow`控件，它为您提供自定义 chrome，还允许将控件添加到 chrome 标题栏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:41:32.373

在这个堆栈溢出问题中：

[如何在使用自定义窗口镶边时向 WPF 标题栏添加按钮？](https://stackoverflow.com/questions/12431112/how-can-i-add-a-button-to-the-wpf-caption-bar-while-using-custom-window-chrome)

我在问如何在我的自定义窗口 Chrome 窗口的标题栏中插入按钮。xaml 示例可能足以帮助您入门。

除此之外，我不确定您在寻找什么。

编辑：我在另一篇文章中的按钮样式是一个相当简单的按钮，但您应该能够将其替换为您想要的任何样式。

# node.js - 早上 7 点在多个时区运行 cron

> ID：15316597
> 
> 赞同：0
> 
> 时间：2013-03-09T22:22:50.923
> 
> 标签：node.js, cron, crontab

我想在早上 7 点在美国西部、美国东部以及亚洲和欧洲的其他一些时区本地运行 cron 作业。

这是一个 node.js 服务器，所以我可能可以使用[node-cron](https://github.com/ncb000gt/node-cron)来执行此操作，但如果可能的话，我想使用常规的 cron。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:30:26.837

中的时间`crontab`总是指当前系统时间。您必须减去或添加时区差异来计算服务器上的执行间隔。

例如：您的服务器位于美国西部 (UTC+8)，系统日期设置为 UTC+8。早上 7 点可以在`crontab`using中指定

```
0 7 * * * /run/me-for-western-us 
```

要在美国东部 (UTC+5) 早上 7 点运行脚本，您需要减去 3 小时

```
0 4 * * * /run/me-for-eastern-us 
```

对所有其他时区执行相同操作。

# git - 在什么情况下 `git pull` 是有害的？

> ID：15316601
> 
> 赞同：426
> 
> 时间：2013-03-09T22:23:10.533
> 
> 标签：git, git-pull

我有一位同事声称这`git pull`是有害的，并且每当有人使用它时都会感到不安。

该`git pull`命令似乎是更新本地存储库的规范方式。使用会`git pull`产生问题吗？它会产生什么问题？有没有更好的方法来更新 git 存储库？

* * *

## 回答 #1

> 赞同：565
> 
> 时间：2013-03-09T22:23:10.533

## 概括

默认情况下，`git pull`创建合并提交，这会给代码历史添加噪音和复杂性。此外，`pull`您无需考虑您的更改可能会如何受到传入更改的影响。

该`git pull`命令是安全的，只要它只执行快进合并。如果`git pull`配置为仅进行快进合并并且无法进行快进合并时，Git 将退出并出现错误。这将使您有机会研究传入的提交，考虑它们如何影响您的本地提交，并决定最佳的行动方案（合并、变基、重置等）。

使用 Git 2.0 及更高版本，您可以运行：

```
git config --global pull.ff only 
```

将默认行为更改为仅快进。对于 1.6.6 和 1.9.x 之间的 Git 版本，您必须养成输入的习惯：

```
git pull --ff-only 
```

但是，对于所有版本的 Git，我建议配置这样的`git up`别名：

```
git config --global alias.up '!git remote update -p; git merge --ff-only @{u}' 
```

并使用`git up`而不是`git pull`. 我更喜欢这个别名，`git pull --ff-only`因为：

*   它适用于所有（非古代）版本的 Git，
*   它获取所有上游分支（不仅仅是您当前正在处理的分支），并且
*   它清除`origin/*`上游不再存在的旧分支。

## 问题`git pull`

`git pull`如果使用得当，还不错。最近对 Git 的一些更改使其更易于`git pull`正确使用，但不幸的是，普通的默认行为`git pull`有几个问题：

*   它在历史上引入了不必要的非线性
*   它可以很容易地意外地重新引入在上游故意重新设置的提交
*   它以不可预知的方式修改您的工作目录
*   暂停你正在做的事情来审查别人的工作很烦人`git pull`
*   这使得很难正确地重新定位到远程分支
*   它不会清理在远程仓库中删除的分支

下面更详细地描述这些问题。

### 非线性历史

默认情况下，该`git pull`命令相当于运行`git fetch`后跟`git merge @{u}`. 如果本地存储库中有未推送的提交，则合并部分`git pull`会创建合并提交。

合并提交本身并没有什么坏处，但它们可能很危险，应该受到尊重：

*   合并提交本质上很难检查。要了解合并在做什么，您必须了解所有父母的差异。传统的差异不能很好地传达这种多维信息。相比之下，一系列正常的提交很容易审查。
*   合并冲突的解决很棘手，而且由于合并提交很难审查，错误往往会在很长一段时间内未被发现。
*   合并可以悄悄地取代常规提交的影响。代码不再是增量提交的总和，导致对实际更改内容的误解。
*   合并提交可能会破坏一些持续集成方案（例如，在假定的约定下，仅自动构建第一父路径，第二父路径指向正在进行的未完成工作）。

当然，合并有时间和地点，但是了解何时应该使用和不应该使用合并可以提高存储库的实用性。

请注意，Git 的目的是让共享和使用代码库的演变变得容易，而不是准确地记录历史的展开。（如果您不同意，请考虑该`rebase`命令及其创建原因。） by 创建的合并提交`git pull`不会向其他人传达有用的语义——他们只是说其他人碰巧在您完成更改之前推送到存储库。如果这些合并提交对其他人没有意义并且可能很危险，为什么还要进行这些合并提交？

可以配置`git pull`为变基而不是合并，但这也有问题（稍后讨论）。相反，`git pull`应配置为仅进行快进合并。

### 重新引入 Rebased-out Commits

假设有人重新设置分支并强制推送它。这通常不应该发生，但有时是必要的（例如，删除一个意外提交和推送的 50GiB 日志文件）。完成的合并`git pull`会将上游分支的新版本合并到本地存储库中仍然存在的旧版本中。如果你推动结果，音叉和火炬将开始向你靠近。

有些人可能会争辩说，真正的问题是强制更新。是的，通常建议尽可能避免用力推动，但有时它们是不可避免的。开发人员必须准备好应对强制更新，因为它们有时会发生。这意味着不要通过普通的`git pull`.

### 惊喜工作目录修改

在完成之前，无法预测工作目录或索引的外观`git pull`。在执行其他任何操作之前，您可能必须解决合并冲突，它可能会在您的工作目录中引入一个 50GiB 的日志文件，因为有人不小心推送了它，它可能会重命名您正在工作的目录等。

`git remote update -p`（或`git fetch --all -p`）允许您在决定合并或变基之前查看其他人的提交，从而允许您在采取行动之前制定计划。

### 难以审查其他人的提交

假设您正在进行一些更改，而其他人希望您查看他们刚刚推送的一些提交。 `git pull`的合并（或变基）操作会修改工作目录和索引，这意味着您的工作目录和索引必须是干净的。

你可以使用`git stash`and then `git pull`，但是当你完成复习时你会做什么？要回到原来的位置，您必须撤消由创建的合并`git pull`并应用存储。

`git remote update -p`(or `git fetch --all -p`) 不会修改工作目录或索引，因此可以随时安全地运行——即使您已暂存和/或未暂存更改。您可以暂停正在执行的操作并查看其他人的提交，而无需担心存储或完成您正在处理的提交。`git pull`没有给你那种灵活性。

### 重新定位到远程分支

一个常见的 Git 使用模式是执行 a`git pull`以引入最新的更改，然后执行 a`git rebase @{u}`以消除`git pull`引入的合并提交。`git pull`Git 有一些配置选项可以通过告诉执行变基而不是合并来将这两个步骤减少到一个步骤，这很常见（请参阅`branch.<branch>.rebase`、`branch.autosetuprebase`和`pull.rebase`选项）。

不幸的是，如果您想要保留一个未推送的合并提交（例如，将推送的功能分支合并到的提交`master`），则既不是 rebase-pull（`git pull`设置`branch.<branch>.rebase`为`true`）也不是 merge-pull（默认`git pull`行为），然后是变基将起作用。这是因为在没有选项`git rebase`的情况下消除了合并（它使 DAG 线性化） 。`--preserve-merges`rebase-pull 操作不能配置为保留合并，并且后跟 a 的合并拉取`git rebase -p @{u}`不会消除由合并拉取引起的合并。 **更新：** 添加了 Git v1.8.5`git pull --rebase=preserve`和`git config pull.rebase preserve`. 这些原因在获取上游提交后执行`git pull`。`git rebase --preserve-merges`（感谢[funkaster](https://stackoverflow.com/users/985627/funkaster)的提醒！）

### 清理已删除的分支

`git pull`不会修剪与从远程存储库中删除的分支相对应的远程跟踪分支。例如，如果有人`foo`从远程仓库中删除分支，您仍然会看到`origin/foo`.

这会导致用户意外地复活被杀死的分支，因为他们认为它们仍然处于活动状态。

## 更好的选择：使用`git up`而不是`git pull`

而不是`git pull`，我建议创建和使用以下`git up`别名：

```
git config --global alias.up '!git remote update -p; git merge --ff-only @{u}' 
```

此别名从所有上游分支下载所有最新提交（修剪死分支）并尝试将本地分支快进到上游分支上的最新提交。如果成功，则没有本地提交，因此不存在合并冲突的风险。如果有本地（未推送）提交，快进将失败，让您有机会在采取行动之前查看上游提交。

这仍然会以不可预知的方式修改您的工作目录，但前提是您没有任何本地更改。不像`git pull`,`git up`永远不会让你看到一个提示你修复合并冲突的提示。

### 另外的选择：`git pull --ff-only --all -p`

以下是上述`git up`别名的替代方法：

```
git config --global alias.up 'pull --ff-only --all -p' 
```

此版本的具有与以前的别名`git up`相同的行为，除了：`git up`

*   如果您的本地分支未配置上游分支，则错误消息会更加神秘
*   它依赖于一个未记录的特性（`-p`传递给的参数`fetch`），该特性可能会在未来的 Git 版本中发生变化

### 如果您正在运行 Git 2.0 或更高版本

使用 Git 2.0 及更高版本，您可以配置`git pull`为默认仅进行快进合并：

```
git config --global pull.ff only 
```

这会导致`git pull`行为类似`git pull --ff-only`，但它仍然不会获取所有上游提交或清除旧`origin/*`分支，所以我仍然更喜欢`git up`。

* * *

## 回答 #2

> 赞同：198
> 
> 时间：2014-03-12T15:15:03.797

我的回答来自 HackerNews 上的[讨论](https://news.ycombinator.com/item?id=7385087)：

我很想用 Betteridge Law of Headlines 来回答这个问题：为什么被`git pull`认为是有害的？它不是。

*   非线性本质上并不坏。如果它们代表实际历史，它们就可以了。
*   意外重新引入上游**rebase**的提交是错误地重写上游历史的结果。当历史沿多个存储库复制时，您无法重写历史记录。
*   修改工作目录是预期结果；有争议的有用性，即面对 hg/monotone/darcs/other_dvcs_predating_git 的行为，但本质上也不是坏的。
*   合并需要暂停以查看其他人的工作，这也是 git pull 上的预期行为。如果你不想合并，你应该使用 git fetch。同样，与以前流行的 dvcs 相比，这是 git 的一个特性，但它是预期的行为，本质上并不坏。
*   很难针对远程分支进行 rebase 是好的。除非绝对需要，否则不要重写历史。我一辈子都无法理解这种对（假）线性历史的追求
*   不清理树枝是好的。每个回购都知道它想要持有什么。Git 没有主从关系的概念。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-03-12T15:43:46.817

如果你正确使用 Git，它不会被认为是有害的。鉴于您的用例，我看到它如何对您产生负面影响，但是您可以通过不修改共享历史来避免问题。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-03-12T16:38:35.023

接受的答案声称

> 无法将 rebase-pull 操作配置为保留合并

但从[Git 1.8.5](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.5.txt)开始，你可以这样做

```
git pull --rebase=preserve 
```

或者

```
git config --global pull.rebase preserve 
```

或者

```
git config branch.<name>.rebase preserve 
```

[文档](http://git-scm.com/docs/git-config.html)说_

> 当`preserve,`也传递`--preserve-merges`给'git rebase'，以便本地提交的合并提交不会通过运行'git pull'而变平。

之前的讨论有更详细的信息和图表：[git pull --rebase --preserve-merges](https://stackoverflow.com/questions/21364636/git-pull-rebase-preserve-merges)。它还解释了为什么`git pull --rebase=preserve`不一样`git pull --rebase --preserve-merges`，这不正确。

之前的另一个讨论解释了rebase的preserve-merges变体实际上做了什么，以及它如何比常规rebase复杂得多：[git的“rebase --preserve-merges”到底做了什么（为什么？）](https://stackoverflow.com/questions/15915430/what-exactly-does-gits-rebase-preserve-merges-do-and-why)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-13T21:56:58.690

如果你去旧的 git 存储库**git up**他们建议的别名是不同的。 [https://github.com/aanand/git-up](https://github.com/aanand/git-up)

`git config --global alias.up 'pull --rebase --autostash'`

这对我来说很完美。

# c# - 从 javascript dosent 调用 ac# 函数

> ID：15316606
> 
> 赞同：3
> 
> 时间：2013-03-09T22:23:53.580
> 
> 标签：c#, asp.net, web-applications

我正在用 c# 在 asp.net 中构建一个 WebApplication，我在从 JS 调用 ac# 函数时遇到问题。

我的代码是这样的：

**在js中：**

```
Function doStuff()
{
    var service = new seatService.Service1();
    service.DoWork(id, onSuccess, null, null);
} 
```

在服务页面中是：

```
[ServiceContract(Namespace = "seatService")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service1 
{
    [OperationContract]
    public static  void DoWork(string id)
    {
      //here there is a function that calls the DB
    }
} 
```

奇怪的是，它实际上工作了 20 次（使用相同的代码），但大多数时候它失败了，我得到了消息：

> 未捕获的referenceError - 未定义座位服务。

状态码是`500 Internal Server Error.`

因为它有时工作，有时不工作 - 我的问题在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:04:23.120

你想用`PageMethods`这个。下面是一些示例代码来演示：

```
public partial class ContactUs : System.Web.UI.Page
{
   [WebMethod]
   public static void SendForm(string name, string email, string message)
   {
       if (string.IsNullOrEmpty(name))
           throw new Exception("You must supply a name.");    
       if (string.IsNullOrEmpty(email))
           throw new Exception("You must supply an email address.");   
       if (string.IsNullOrEmpty(message))
           throw new Exception("Please provide a message to send.");

       //call your web service here, or do whatever you wanted to do
   }
} 
```

来自 JavaScript：

```
SendForm = function() {
   var name = $get("NameTextBox").value;
   var email = $get("EmailTextBox").value;
   var message = $get("MessageTextBox").value;

   PageMethods.SendForm(name, email, message, OnSucceeded, OnFailed);
}    
OnSucceeded = function() {
   $get("ContactFieldset").innerHTML = "<p>Thank you!</p>";
}    
OnFailed = function(error) {
   alert(error.get_message());
} 
```

# ruby-on-rails - Ruby on Rails 3 布局的最佳实践是什么？

> ID：15316608
> 
> 赞同：1
> 
> 时间：2013-03-09T22:24:21.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 3 提供`application.html.erb`了一个布局模板。但是，每当您发送访问控制器视图的请求时，`application.html.erb`都会再次加载其内容。这似乎效率不高，因为页眉、导航、页脚只需要加载一次。

此外，当您需要在 for 中执行一个 javascript 代码并在`$(window).load`for中执行`application.html.erb`另一个 js 方法时`$(window).load`，`<controller>.html.erb`这会搞砸。我认为原因是`$(window).load`每个页面只能执行一次。

所以我想知道 Rails 3 的最佳布局实践是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:35:10.953

Rails 4 包含[Turbolinks](https://github.com/rails/turbolinks)，它只会在单击链接时重新加载网站的正文，而不是重新加载所有资产，如 javascript 和 CSS。如果您想进一步微调加载的内容，可以查看[pjax](https://github.com/defunkt/jquery-pjax)，但我认为对于大多数应用程序来说，Turbolinks 就足够了。

# cryptography - 我可以使用哪些工具对应用程序上的 Crypto API 调用进行故障排除？

> ID：15316610
> 
> 赞同：1
> 
> 时间：2013-03-09T22:24:33.353
> 
> 标签：cryptography, windows-xp, cryptoapi

视窗XP | 加密API

我正在尝试解决`CryptUnprotectData`Windows 应用程序上的 cryptoAPI 调用失败的原因。有什么方法可以监控呼叫（以及来自 Windows 的错误响应）？我看到微软有一个 Capimon 实用程序，但据我所知，这个工具不包括对监控这个特定呼叫的支持。

理想情况下，我正在寻找第三方故障排除工具（或日志）。

# c# - 什么时候应该 TaskCompletionSource 使用？

> ID：15316613
> 
> 赞同：231
> 
> 时间：2013-03-09T22:24:40.690
> 
> 标签：c#, .net, .net-4.0, task-parallel-library, taskcompletionsource

AFAIK，它所知道的是，在某个时候，它的`SetResult`or`SetException`方法被调用以完成`Task<T>`通过其`Task`属性公开的操作。

换句话说，它充当 a`Task<TResult>`及其完成的生产者。

我在[**这里**](https://devblogs.microsoft.com/pfxteam/the-nature-of-taskcompletionsourcetresult/)看到了这个例子：

> 如果我需要一种方法来`Func<T>`异步执行 a 并有 a`Task<T>` 来表示该操作。

```
public static Task<T> RunAsync<T>(Func<T> function) 
{ 
    if (function == null) throw new ArgumentNullException(“function”); 
    var tcs = new TaskCompletionSource<T>(); 
    ThreadPool.QueueUserWorkItem(_ => 
    { 
        try 
        {  
            T result = function(); 
            tcs.SetResult(result);  
        } 
        catch(Exception exc) { tcs.SetException(exc); } 
    }); 
    return tcs.Task; 
} 
```

如果我没有，可以使用它`Task.Factory.StartNew`- 但我*确实*有`Task.Factory.StartNew`。

**问题：**

有人可以举例说明一个与我没有的假设情况**直接**相关`TaskCompletionSource` 而不是与我没有 的*假设*`Task.Factory.StartNew`情况相关的场景吗？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-03-09T22:31:23.157

我主要在只有基于事件的 API 可用时使用它（[例如 Windows Phone 8 套接字](http://code.msdn.microsoft.com/Windows-Phone-8-Networking-835239c1/sourcecode?fileId=70769&pathId=221052408)）：

```
public Task<Args> SomeApiWrapper()
{
    TaskCompletionSource<Args> tcs = new TaskCompletionSource<Args>(); 

    var obj = new SomeApi();

    // will get raised, when the work is done
    obj.Done += (args) => 
    {
        // this will notify the caller 
        // of the SomeApiWrapper that 
        // the task just completed
        tcs.SetResult(args);
    }

    // start the work
    obj.Do();

    return tcs.Task;
} 
```

`async`因此，它与 C#5关键字一起使用时特别有用。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2014-02-01T18:29:00.160

根据我的经验，`TaskCompletionSource`非常适合将旧的异步模式包装到现代`async/await`模式中。

我能想到的最有益的例子是使用`Socket`. 它具有旧的 APM 和 EAP 模式，但没有现有的`awaitable Task`方法。`TcpListener``TcpClient`

我个人在课堂上有几个问题，`NetworkStream`并且更喜欢 raw `Socket`。因为我也喜欢这种`async/await`模式，所以我`SocketExtender`创建了一个扩展类，它为`Socket`.

所有这些方法都`TaskCompletionSource<T>`用来包装异步调用，如下所示：

```
 public static Task<Socket> AcceptAsync(this Socket socket)
    {
        if (socket == null)
            throw new ArgumentNullException("socket");

        var tcs = new TaskCompletionSource<Socket>();

        socket.BeginAccept(asyncResult =>
        {
            try
            {
                var s = asyncResult.AsyncState as Socket;
                var client = s.EndAccept(asyncResult);

                tcs.SetResult(client);
            }
            catch (Exception ex)
            {
                tcs.SetException(ex);
            }

        }, socket);

        return tcs.Task;
    } 
```

我将 传递给`socket`方法`BeginAccept`，以便从编译器中获得轻微的性能提升，而不必提升本地参数。

那么这一切的美丽：

```
 var listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
 listener.Bind(new IPEndPoint(IPAddress.Loopback, 2610));
 listener.Listen(10);

 var client = await listener.AcceptAsync(); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-03-10T07:16:19.557

对我来说，一个经典的使用场景`TaskCompletionSource`是我的方法可能*不一定需要*进行耗时的操作。它允许我们做的是选择我们想要使用新线程的特定情况。

一个很好的例子是当你使用缓存时。您可以有一个`GetResourceAsync`方法，该方法在缓存中查找请求的资源，如果找到资源，则立即返回（不使用新线程，使用`TaskCompletionSource`）。只有在找不到资源的情况下，我们才会使用新线程并使用`Task.Run()`.

可以在此处查看代码示例：[如何使用任务有条件地异步运行代码](https://stackoverflow.com/q/8575889/389966)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2014-08-30T12:09:56.827

在[这篇博](http://www.levibotelho.com/development/async-processes-with-taskcompletionsource)文中，Levi Botelho 描述了如何使用`TaskCompletionSource`为 Process 编写异步包装器，以便您可以启动它并等待它的终止。

```
public static Task RunProcessAsync(string processPath)
{
    var tcs = new TaskCompletionSource<object>();
    var process = new Process
    {
        EnableRaisingEvents = true,
        StartInfo = new ProcessStartInfo(processPath)
        {
            RedirectStandardError = true,
            UseShellExecute = false
        }
    };
    process.Exited += (sender, args) =>
    {
        if (process.ExitCode != 0)
        {
            var errorMessage = process.StandardError.ReadToEnd();
            tcs.SetException(new InvalidOperationException("The process did not exit correctly. " +
                "The corresponding error message was: " + errorMessage));
        }
        else
        {
            tcs.SetResult(null);
        }
        process.Dispose();
    };
    process.Start();
    return tcs.Task;
} 
```

及其用法

```
await RunProcessAsync("myexecutable.exe"); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-04-25T09:53:13.357

*TaskCompletionSource*用于创建不执行代码的*Task对象。*在现实世界的场景中，*TaskCompletionSource*非常适合 I/O 绑定操作。这样，您可以获得任务的所有好处（例如返回值、延续等），而不会在操作期间阻塞线程。如果您的“函数”是 I/O 绑定操作，则不建议使用新*任务*阻塞线程。相反，使用*TaskCompletionSource*，您可以创建一个从属任务来指示您的 I/O 绑定操作何时完成或出现故障。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-07-10T11:26:23.920

看起来没人提到，但我想单元测试也可以被认为是*现实生活中*的足够多的东西。

我发现`TaskCompletionSource`在使用异步方法模拟依赖项时很有用。

在实际测试程序中：

```
public interface IEntityFacade
{
  Task<Entity> GetByIdAsync(string id);
} 
```

在单元测试中：

```
// set up mock dependency (here with NSubstitute)

TaskCompletionSource<Entity> queryTaskDriver = new TaskCompletionSource<Entity>();

IEntityFacade entityFacade = Substitute.For<IEntityFacade>();

entityFacade.GetByIdAsync(Arg.Any<string>()).Returns(queryTaskDriver.Task);

// later on, in the "Act" phase

private void When_Task_Completes_Successfully()
{
  queryTaskDriver.SetResult(someExpectedEntity);
  // ...
}

private void When_Task_Gives_Error()
{
  queryTaskDriver.SetException(someExpectedException);
  // ...
} 
```

毕竟，TaskCompletionSource 的这种用法似乎是“不执行代码的任务对象”的另一种情况。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-07-14T13:17:38.077

[在“Parallel Programming with .NET”博客](http://blogs.msdn.com/b/pfxteam/archive/2009/06/03/9691796.aspx)的这篇文章中有一个真实世界的例子，其中有一个不错的解释。您真的应该阅读它，但无论如何这里是一个摘要。

博客文章显示了以下两种实现：

> “一种用于创建“延迟”任务的工厂方法，这些任务在发生某些用户提供的超时之前实际上不会被安排。”

所示的第一个实现基于`Task<>`并具有两个主要缺陷。第二个实现帖子继续通过使用`TaskCompletionSource<>`.

这是第二个实现：

```
public static Task StartNewDelayed(int millisecondsDelay, Action action)
{
    // Validate arguments
    if (millisecondsDelay < 0)
        throw new ArgumentOutOfRangeException("millisecondsDelay");
    if (action == null) throw new ArgumentNullException("action");

    // Create a trigger used to start the task
    var tcs = new TaskCompletionSource<object>();

    // Start a timer that will trigger it
    var timer = new Timer(
        _ => tcs.SetResult(null), null, millisecondsDelay, Timeout.Infinite);

    // Create and return a task that will be scheduled when the trigger fires.
    return tcs.Task.ContinueWith(_ =>
    {
        timer.Dispose();
        action();
    });
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-04-02T18:58:18.990

这可能过于简单化了，但 TaskCompletion 源允许人们等待事件。由于 tcs.SetResult 仅在事件发生时设置，调用者可以等待任务。

观看此视频以获得更多见解：

[http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async/Lucian03-TipsForAsyncThreadsAndDatabinding](http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async/Lucian03-TipsForAsyncThreadsAndDatabinding)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-08T19:20:32.093

我使用的真实世界场景`TaskCompletionSource`是实现下载队列时。在我的情况下，如果用户开始 100 次下载，我不想一次将它们全部关闭，因此我没有返回一个分层任务，而是返回一个附加到`TaskCompletionSource`. 一旦下载完成，队列中的线程就会完成任务。

这里的关键概念是，当客户要求从实际开始时开始执行任务时，我正在解耦。在这种情况下，因为我不希望客户端必须处理资源管理。

请注意，只要您使用 C# 5 编译器（VS 2012+），您就可以在 .net 4 中使用 async/await，请参阅[此处](https://stackoverflow.com/questions/9110472/using-async-await-on-net-4)了解更多详细信息。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-03T09:28:33.977

我曾经`TaskCompletionSource`运行一个任务，直到它被取消。在这种情况下，它是一个 ServiceBus 订阅者，只要应用程序运行，我通常希望它一直运行。

```
public async Task RunUntilCancellation(
    CancellationToken cancellationToken,
    Func<Task> onCancel)
{
    var doneReceiving = new TaskCompletionSource<bool>();

    cancellationToken.Register(
        async () =>
        {
            await onCancel();
            doneReceiving.SetResult(true); // Signal to quit message listener
        });

    await doneReceiving.Task.ConfigureAwait(false); // Listen until quit signal is received.
} 
```

# amazon-web-services - 将来自远程资源的对象放入 Amazon S3

> ID：15316616
> 
> 赞同：4
> 
> 时间：2013-03-09T22:25:30.053
> 
> 标签：amazon-web-services, amazon-s3

我正在尝试找到一种方法将 Internet 中某处的对象放入 Amazon S3，而无需先下载它然后将其上传到 S3。基本可以吗？

我正在使用 Node.js SDK。理想情况下，我想做这样的事情：

```
s3.client.putObject({
  Bucket: 'my-own-bucket',
  Key: 'myKey',
  BodyFromRemoteRecource: 'https://www.google.com/images/srpr/logo4w.png'
}, function(err, data) {
  if (err)
    console.log(err)
  else
    console.log("Successfully uploaded data to myBucket/myKey");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:30:42.720

如果源已经在 S3 上的某个地方，您可以这样做，但不能用于其他资源。所以不，你不能做你的示例用例要求的。

如果有帮助，您可以将数据从 URL 移动到 S3，而无需在上传前一步完全下载。每个字节仍然必须通过您拥有的某些机器，但是您可以一次获取然后将其放入一个块。

[此处](http://docs.aws.amazon.com/AmazonS3/latest/API/APIRest.html)记录了整个 S3 API ，您可以检查每个操作并查看没有任何操作可以执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:36:56.533

像这样的东西对我来说适用于 PHP2 SDK：

```
$aws_transfer = $s3->PutObject( array(
    'Bucket' => 'bucket', 
    'Key' => $unique_file_name,
    'Body' => \Guzzle\Http\EntityBody::factory( file_get_contents('http://www.example.com/file.flv') ),
) ); 
```

# android - 签署 Android 应用程序时出现“文件名、目录名或卷标语法不正确”

> ID：15316617
> 
> 赞同：0
> 
> 时间：2013-03-09T22:25:36.083
> 
> 标签：android, jar-signing

当我在发布模式下编译我的 Android 应用程序并尝试对其进行签名时，我收到以下错误：

> 文件名、目录名或卷标语法不正确

我设置`key.store`了`ant.properties`我的密钥库文件的相对路径。文件名或路径中没有空格。我确定我为密钥库使用了正确的密码，因为我可以使用该`keytool -list`命令来查看它。还有什么可能导致此错误？

**更新：**

当我使用绝对路径时，我收到以下错误消息：

> “密钥库”的值无效。它必须解析为单一路径

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T22:03:28.503

问题的原因被证明是非常微不足道且难以捕捉的。我在我的文件中引用了该`key.store`属性的值。`ant.properties`显然，构建链中的某些内容将引号作为属性值的一部分。删除引号后，我编译并签署了我的应用程序就好了。

# javascript - jQuery 没有冲突；合并时中断

> ID：15316621
> 
> 赞同：0
> 
> 时间：2013-03-09T22:25:50.467
> 
> 标签：javascript, jquery, conflict

我在避免与不同版本的 jQuery 发生冲突时遇到问题。我有一个从 1_7_1 拉动的菜单栏和一个从 1_9_1 拉动的选项卡项。如果您对在使用这两个版本时使页面正常工作有任何建议，请告诉我。它们在单独的 html 文件中工作正常，但一旦组合，一个会覆盖另一个。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>jQuery Dropdown Menus</title>
        <link rel="stylesheet" type="text/css" href="includes/menu.css" />
        <script type="text/javascript" src="includes/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="includes/jquery.dropmenu-1.1.4.js"></script>

        <script type="text/javascript" src="includes/menu.js"></script>
        <!--[if lt IE 9]>
            <link rel="stylesheet" type="text/css" href="includes/menu_ie7_and_ie8.css" />
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script type="text/javascript">
        var jQuery_conflict = $.noConflict(true);
        </script>
        <script>
        jQuery_conflict(function() {
        $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
        $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
        });
        </script>

        <style>
        .ui-tabs-vertical { width: 55em; }
        .ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
        .ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
        .ui-tabs-vertical .ui-tabs-nav li a { display:block; }
        .ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
        .ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}
        </style>
    </head>
    <body>

    <!-- MENU !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->

        <div class="page">
            <header>
            <!--    <a class="logo" href="#"></a> -->
                <nav class="nav_menu">

                    <ul class="dropmenu">
                        <li><a href="#">Home</a> </li>
                        <li><a href"#">Lessons</a> 
                                        <ul>
                                            <li><a href"#">Lesson 1</a> </li>
                                            <li><a href"#">Lesson 2</a> </li>
                                            <li><a href"#">Lesson 3</a> </li>
                                            <li><a href"#">Lesson 4</a> </li>
                                            <li><a href"#">Lesson 5</a> </li>
                                            <li><a href"#">Lesson 6</a> </li>
                                        </ul>
                                </li>
                        <li><a href="#"> Assignments</a> </li>
                        <li><a href="#">Tests and Quizzes</a> </li>
                        <li><a href="#">Playlist Creation</a></li>

                    </ul>

                </nav>
            </header>
        </div>

        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Nunc tincidunt</a></li>
                <li><a href="#tabs-2">Proin dolor</a></li>
                <li><a href="#tabs-3">Aenean lacinia</a></li>
                <li><a href="#tabs-4">Nunc tincidunt</a></li>
                <li><a href="#tabs-5">Proin dolor</a></li>
                <li><a href="#tabs-6">Aenean lacinia</a></li>
            </ul>
            <div id="tabs-1">
                <h2>Content heading 1</h2>
                    <p> <iframe width="700" height="394" src="http://www.youtube.com/embed/ae_DKNwK_ms" frameborder="0" allowfullscreen></iframe>
                    Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
            </div>
            <div id="tabs-2">
                <h2>Content heading 2</h2>
                    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
            </div>
            <div id="tabs-3">
                <h2>Content heading 3</h2>
                    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
                    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
            </div>
            <div id="tabs-4">
                <h2>Content heading 1</h2>
                    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
            </div>
            <div id="tabs-5">
                <h2>Content heading 2</h2>
                    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
            </div>
            <div id="tabs-6">
                <h2>Content heading 3</h2>
                    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
                    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
            </div>

            </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:55:59.717

与其加载两个版本的 jQuery，不如`.noConflict()`尝试使用[jQuery Migrate 插件](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)。

它增加了对已删除函数的兼容性，并警告您它们，以便您可以更新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:51:49.423

这是因为每个带有 jQ​​uery 的文件都重新定义了`$`变量，所以一旦嵌入了两个版本，使用`noConflict`就没有多大意义了（你必须在定义每个 jQuery 版本之后使用 noConflict 。

简单地说，合并后的文件应该是这样的：

```
// jQuery 1.7 source code
// ... jQuery 1.7 code ...
var $jQuery17 = jQuery.noConflict(true);
// jQuery 1.9 source code
// .... jQuery 1.9 ...
var $jQuery19 = jQuery.noConflict(true); 
```

稍后使用`$jQuery17`和`$jQuery19`变量访问（使用）每个版本。

# cocoa-touch - 使用 Cocoa-touch 解析 RSS 提要并按日期对 UITableView 进行排序

> ID：15316623
> 
> 赞同：1
> 
> 时间：2013-03-09T22:25:54.957
> 
> 标签：cocoa-touch, parsing, uitableview, date

我解析了一个 RSS-Feed 并在一个 UITableview 中显示了一个部分的结果。这些行是按项目计数动态变化的。

现在我想按日期对 Feed 中的所有新闻进行排序。某个日期的所有新闻都在一个单独的部分中。

我可以在没有 CoreData 的情况下构建它吗？

对不起，我的英语不好。

# algorithm - 查找图中两个节点之间分离度的有效方法

> ID：15316624
> 
> 赞同：7
> 
> 时间：2013-03-09T22:26:00.943
> 
> 标签：algorithm, graph

这是我最近在网上找到的一个面试问题：

您如何找到 Facebook 上两个人之间的分离程度？讨论不同的想法、算法和权衡。（分离度的定义：[http](http://en.wikipedia.org/wiki/Six_degrees_of_separation) ://en.wikipedia.org/wiki/Six_degrees_of_separation ）

这是我的想法：

我能想到的候选算法有：广度优先搜索（BFS）、深度优先搜索（DFS）、深度限制搜索（DLS）、迭代深度搜索（IDS）。

首先，应考虑 DFS。很可能即使当两个人相连（即分离度=1）时，算法也可能会长时间沿着错误的路径搜索。

BFS 保证找到最小的分离度（因为图没有加权）。假设最大分支因子为 b，两个目标人之间的实际分离程度为 d，则时间复杂度和空间复杂度均为 O(b^d)。

由于最大可能的分离度是未知的（尽管它不应高于 6），因此使用 DLS 可能不是一个好主意。然而，IDS 似乎比 BFS 更好——它的时间复杂度也是 O(b^d)（虽然由于中间节点的重复访问，实际时间成本比 BFS 高一点），而它的空间复杂度是 O( bd)，这比 O(b^d) 好很多。

毕竟，我会选择IDS。在面试中这是可以接受的答案吗？我在上述推论中有任何错误吗？还是我错过了任何更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T01:17:39.593

更好的解决方案可能是同时从两个节点启动 BFS。类似于以下伪代码：

```
nodes1 = (A);
nodes2 = (B);
d = 1;
loop {
    nodes1 = neighbors(nodes1);
    if (intersects(nodes1, nodes2)) {
        return d;
    }
    d += 1;
    nodes2 = neighbors(nodes2);
    if (intersects(nodes2, nodes1)) {
        return d;
    }
    d += 1;
} 
```

该算法的时间复杂度大约`O(m ^ (d/2))`是`m`所有节点的最大度数，`d`最大距离。与带有 的简单 BFS 相比`O(m ^ d)`，这在大图中可以快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:38:21.043

如果您正在寻找两个*特定*人之间的分离程度，我会使用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，它会找到从选定源到所有可到达节点的最短路径。

# python - 如何从 numpy svd 获得残差

> ID：15316631
> 
> 赞同：2
> 
> 时间：2013-03-09T22:27:21.417
> 
> 标签：python, numpy, svd

我已经使用 numpy svd 拟合了一组点，并具有拟合函数的系数。据我了解该算法，它将计算沿途点的残差，我想恢复它们但看不到如何做到这一点。任何有关如何获得这些的指导将不胜感激。

# html - 我的标题和我的博客 (blogspot) 上的帖子之间有太多空间。

> ID：15316635
> 
> 赞同：-1
> 
> 时间：2013-03-09T22:27:43.640
> 
> 标签：html, templates, header, space, blogspot

[http://booksandloafers.blogspot.co.uk/](http://booksandloafers.blogspot.co.uk/)

如您所见，在搜索栏下方，帖子开始之前有一个间隙。我的布局来自模板，当我从该区域移除一些小工具时，就会产生间隙。

我想知道是否无论如何我可以删除这个空间而不必将那些小工具放回原处？

我肯定是 HTML 新手，但我尝试过其他建议，例如“溢出：隐藏；” 但我还没有找到任何有效的地方。任何意见将是有益的！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:30:37.530

从`banner`id中删除高度

改变

```
 #banner {
    height: 300px;
    margin-bottom: 30px;
    margin-top: 20px;
    width: 940px;
} 
```

到

```
#banner {
margin-bottom: 30px;
margin-top: 20px;
width: 940px; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:39:19.130

在使用 HTML/CSS 时，我更喜欢在 Firefox/Chrome 中使用“检查元素”功能。

它允许我在不保存工作的情况下解决问题，这样我就可以找出导致我的问题的原因。

在您的情况下，`#banner`高度为 300px，这导致了您当前的问题。从你的 CSS 中删除它，事情应该看起来很正常。

# java - 程序效率和java.lang.OutOfMemoryError: Java heap space

> ID：15316637
> 
> 赞同：0
> 
> 时间：2013-03-09T22:28:10.623
> 
> 标签：java, memory, heap-memory, space, out

问题是删除每个第二个元素，直到最后一个元素保留。（假设元素被放置在圆圈中）

我的程序适用于较小的 n 值，但是当我使用较大的值时，它会给我一条`java.lang.OutOfMemoryError: Java heap space`消息。

有些人可以帮助我了解我需要做些什么来提高我的代码效率并解决这个错误。

谢谢你！

```
import java.util.*;

public class ArrayLists {
    public static void main(String[] args) {
        ArrayList myList = new ArrayList();
        int n = 23987443;
        for (int i = 1; i <= n; i = i + 2) {
            myList.add("" + i);
        }

        Object x = myList.get(myList.size() - 1);
        Object y = myList.get(myList.size() - 1);
        while (myList.size() != 1) {
            if (x == y) {
                for (int i = 0; i <= myList.size() - 1; i++) {
                    myList.remove(i);
                }
            } 
            else {
                x = y;
                for (int i = 1; i <= myList.size() - 1; i++) {
                    myList.remove(i);
                }
            }
            y = myList.get(myList.size() - 1);
        }
        System.out.println("Winner:" + myList);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:40:06.800

你正在构建一个巨大的字符串列表。所以你需要足够的内存来保存所有的列表。您可以通过使用适当的大小初始化列表来减少消耗，避免临时副本来扩大列表：

```
int n = 23987443;
List<String> myList = new ArrayList<String>(23987443); 
```

您也可以使用 a`List<Integer>`代替，因为这是列表实际包含的内容。

但是一个巨大的字符串列表需要大量的内存。扩大堆大小

```
java -Xmx1024m ... 
```

例如（1024 MB 堆）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:12:13.707

这使用更少的内存，但引用速度更快，因为它`O(N * log N)`不是`O(N^2 * log N)`

```
public static void main(String[] args) {
    // for (int n = 1; n < 400; n++) {
    int n = 23987443;
    System.out.print(n + ": ");
    result(n);
    // }
}

private static void result(int n) {
    List<Integer> myList = new ArrayList<>(), myList2 = new ArrayList<>();
    for (int i = 1; i <= n; i = i + 2) {
        myList.add(i);
    }

    Integer x = myList.get(myList.size() - 1);
    Integer y = myList.get(myList.size() - 1);
    while (myList.size() != 1) {
        if (x == y) {
            for (int i = 1; i < myList.size(); i += 2) {
                myList2.add(myList.get(i));
            }
        } else {
            x = y;
            for (int i = 0; i <= myList.size() - 1; i += 2) {
                myList2.add(myList.get(i));
            }
        }
        List<Integer> tmp = myList2;
        myList2 = myList;
        myList = tmp;
        myList2.clear();

        y = myList.get(myList.size() - 1);
       // System.out.println("\t" + myList);
    }
    System.out.println("Winner:" + myList.get(0));
} 
```

注意：如果您使用 TIntArrayList 而不是`ArrayList<Integer>`它，将使用大约 1/5 的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T23:54:58.010

你的问题的答案可以用一个封闭的形式来计算，因为如果你在你的列表中写下元素的数量，如下所示：

n = 2^m + l

其中 m 是 2 的最大幂，使得 2^m <= n

那么获胜者是 w = 2*l + 1。

所以这里有一个更高效的程序：

```
public class ArrayLists {
  public static void main(String[] args) {
    int n = 23987443;
    int pow = Integer.highestOneBit(n);
    int l = n - pow;
    System.out.println("Winner:[" +((2*l)+1)+"]" );
  }
} 
```

n 值的答案：

```
Winner:[14420455] 
```

老实说，我自己并没有想出解决方案，但记得在“具体数学”一书中读过约瑟夫斯问题（谷歌会找到 PDF，查看第 1.3 节）

# ruby - 已安装中间人，但找不到二进制文件

> ID：15316640
> 
> 赞同：3
> 
> 时间：2013-03-09T22:28:18.077
> 
> 标签：ruby, rbenv, middleman

我刚刚在我的 Mac (OS 10.8.2) 上安装了 Middleman，但无法生成新项目。我已经安装了 Xcode。谁能告诉我我可能做错了什么？

```
$ middleman init moi
-bash: middleman: command not found 
```

```
$ gem list
middleman (3.0.12)
middleman-core (3.0.12)
middleman-more (3.0.12)
middleman-sprockets (3.0.9) 
```

```
$ ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0] 
```

我正在使用 rbenv。这是我的路径：

```
/Users/me/.rbenv/shims:/opt/local/bin:/opt/local/sbin:/Users/me/downloads/mongodb/bin:/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T23:36:37.800

如果你刚刚在 rbenv 管理的 Ruby 安装中安装了一个新的 gem，你应该运行

```
rbenv rehash 
```

安装后。这将为新安装的 gem 生成 shims，让您可以运行它。您可以在[rbenv 的自述文件](https://github.com/sstephenson/rbenv#rbenv-rehash)中阅读更多内容。

# python - 无法在 Aldebaran Nao 上运行代码

> ID：15316642
> 
> 赞同：1
> 
> 时间：2013-03-09T22:28:29.250
> 
> 标签：python, nao-robot

我在*say.py*文件中使用 Python SDK 制作了一个简单的程序。Aldebaran Nao 连接到 IP 172.26.96.164 的网络

```
from naoqi import ALProxy
pr = ALProxy("ALTextToSpeech", "172.26.96.164", 9559)
pr.say("Hello, You are awesome !") 
```

代码运行良好。但是当我在电脑上启动 Naoqi 的本地版本时

```
> & 'C:\Program Files (x86)\Aldebaran\Choregraphe 1.12.5.3\bin\naoqi-bin.exe' 
```

*say.py*的代码停止运行并出现以下错误。

```
PS C:\Users\admin\Desktop\nehchal> python say.py
[INFO ] Starting ALNetwork
[ERROR] Connection failed ! Port 54010 is already in use. Are you already running NaoQi? Use --broker-port option to specify a different port.
[INFO ] Stopping ALNetwork
[INFO ] Exit
Traceback (most recent call last):
  File "say.py", line 2, in <module>
pr = ALProxy("ALTextToSpeech", "172.26.96.164", 9559)
  File "C:\Python27\lib\site-packages\naoqi.py", line 230, in __init__
inaoqi.proxy.__init__(self, args[0], args[1], args[2])
  File "C:\Python27\lib\site-packages\inaoqi.py", line 322, in __init__
this = _inaoqi.new_proxy(*args)
RuntimeError:   ALBroker::runBroker
    Port 54010 is not free. Another broker is using this port. 
```

有人可以解释一下这个错误到底是什么意思吗？如何知道谁在使用这个端口？如何释放端口或如何使用备用端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:30:58.607

查看 naoqi 命令行选项：

*   -p [ --broker-port ] arg (=9559) 服务器端口，默认为 9559

*   --pport arg (=0) 父代理的端口，默认为无父代理 (0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T05:50:25.240

尝试下载 [旧版本的 sdk]( [https://community.aldebaran.com/en/resources/software/212-3-python-naoqi-sdk](https://community.aldebaran.com/en/resources/software/212-3-python-naoqi-sdk) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T10:39:03.143

您应该能够在提示符下使用 netstad 命令查看是否/以及什么正在使用该端口。

# java - 以编程方式将数组的图像按钮放置在视图上

> ID：15316645
> 
> 赞同：2
> 
> 时间：2013-03-09T22:28:54.557
> 
> 标签：java, android

我有一个关于 imagebutton 数组的问题。我想通过更改RelativeLayout 中的marginTop 和marginLeft 以编程方式将数组的每个图像按钮放置在不同的位置。这是我的代码，但它只显示同一位置的所有图像按钮，就像它们没有边距一样：

```
DatabaseHandler db;
db= new DatabaseHandler(this);
int databasereadercount=db.getMemoryCount();

ImageButton[] button= new ImageButton[60];
setContentView(R.layout.playsolo);
RelativeLayout layout = (RelativeLayout) findViewById(R.id.playsololayout);
for(int i=0;i<60;i++){
if(i<=databasereadercount){
    button[i]=new ImageButton(this);
    FrameLayout.LayoutParams[] params = new FrameLayout.LayoutParams[60];
    params[i]=new FrameLayout.LayoutParams(100,100);
    params[i].setMargins(10*i, 5*i, 0, 0);       //for example
    Bitmap bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.raster);
    bitmap=Bitmap.createScaledBitmap(bitmap, 480, 320, true);
    Drawable drawable = new BitmapDrawable(getResources(),bitmap);
    StateListDrawable states = new StateListDrawable();
    states.addState(new int[] {android.R.attr.state_pressed},drawable);
    states.addState(new int[] {android.R.attr.state_focused},drawable);
    states.addState(new int[] { },drawable);
    button[i].setImageDrawable(states);
    button[i].setId(i);
    button[i].setOnClickListener(new View.OnClickListener(){
    public void onClick(View v) {
            // TODO Auto-generated method stub
        startlevel(v.getId());
        }
    });
    layout.addView(button[i],params[i]);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:34:18.330

当您`FrameLayout.LayoutParams`的布局是`RelativeLayout`. 如果我没有完全弄错，你应该`RelativeLayout.LayoutParams`改用。

# objective-c - 获取不兼容的整数到指针错误

> ID：15316647
> 
> 赞同：-1
> 
> 时间：2013-03-09T22:29:11.493
> 
> 标签：objective-c

我收到错误`incompatible integer to pointer conversion returning unsigned int from a function with result type NSUInteger *`

我不确定那是什么意思，因为它们是一样的，不是..？对不起，我完全是一个新手，这是我的扑克牌甲板类的代码：

扑克牌.h

```
#import "Card.h"

@interface PlayingCards : Card

@property (strong, nonatomic) NSString *suit;
@property (nonatomic) NSUInteger rank;

+(NSArray *) validSuit;

+(NSUInteger *) maxRank;

@end 
```

扑克牌.m

```
#import "PlayingCards.h"

@implementation PlayingCards

@synthesize suit = _suit;

//modifying the contents getter so it will return array with the ranks and rank+suit 
-(NSString *) contents {

    NSArray *cardsRank = [PlayingCards rankStrings];

    return [cardsRank[self.rank] stringByAppendingString:self.suit];
}

//creating a method to make sure we get validated suits
+(NSArray *) validSuit {

    return @[@"♠",@"♣",@"♥",@"♦"];
}

//creating calss method to validate the rank
+(NSArray *) rankStrings {

    return @[@"?",@"A",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"J",@"Q",@"K"];
}

//creating a new setter for suit to make sure we get the valitated suits, uding the validateSuit method
-(void) setSuit:(NSString *)suit {

    if ([[PlayingCards validSuit] containsObject:suit]) {
        _suit = suit;
    }
}

//creating new getter for suit to make sure its not empty
-(NSString *) suit {

    return _suit? _suit: @"?";
}

//creating a class method to make sure when user set the rank he will will
+(NSUInteger *) maxRank {

    return [self rankStrings].count - 1;

}

//creating a new setter to the renk to make sure the rank is validates 
-(void) setRank:(NSUInteger)rank {

    if (rank <= [PlayingCards maxRank]) {

        _rank = rank;
    }
}

@end 
```

请帮我解决这个问题，它在行中（在 .m 文件中）：

```
+(NSUInteger *) maxRank {

    return [self rankStrings].count - 1;

} 
```

并影响在线：

```
-(void) setRank:(NSUInteger)rank {

    if (rank <= [PlayingCards maxRank]) {

        _rank = rank;
    }
} 
```

有另一个错误

`order comparison between pointer and integer`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:53:19.020

这通常意味着您试图在不应该使用的地方意外使用指针。或者没有在你应该有的地方使用指针。你的类方法返回一个指向你的 NSUInteger 的指针。去除 *

# matlab - 整数编码

> ID：15316649
> 
> 赞同：2
> 
> 时间：2013-03-09T22:29:37.573
> 
> 标签：matlab, encoding

我试图弄清楚如何根据给定的参数对整数进行编码。例如，给了我一张桌子：

```
integer = 0, encoding is 3294 

integer = 1, encoding is 128 

integer = 2, encoding is 2098 
```

等等

我该怎么做呢？我已经查看了函数 dec2bin，但这并不是我所需要的。例如，我的输入将是一个向量，`x = [ 2 1 0 ]`而输出将是向量`y = [2 0 9 8 1 2 8 3 2 9 4]`。

任何建议或帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:40:52.143

编码可能不是描述这一点的最佳词。这个答案只是您搜索的一个方向。

我会看看任何`dictionary`,`hashtable`或`map`数据结构。下面的代码基于[本文中描述的解决方案](https://stackoverflow.com/a/9868400/706456)

```
c = containers.Map;
c('0') = 3294; 
c('1') = 128;
c('2') = 2098;
keys(c) 
values(c) 
```

您可能需要添加正确的使用，并且可能直接使用整数类型来消除强制转换和转换开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:46:08.460

如果将编码表表示为`enc`具有两列的元胞数组（每行包含一个整数及其对应的编码字符串），则可以使用以下简洁的单行：

```
y = str2num(cell2mat(arrayfun(@(v)enc{find([enc{:, 1}] == v), 2}', x(:), 'UniformOutput', 0)))' 
```

### 解释

上述解决方案实际上做了三件事：

1.  `x`用来自 的相应编码字符串替换输入向量中的每个整数`enc`：

    ```
    arrayfun(@(v)enc{find([enc{:, 1}] == v), 2}', x(:), 'UniformOutput', 0) 
    ```

2.  使用 将所有字符串连接成一列`cell2mat`。

3.  使用 将其转换回数值向量`str2num`。`str2num`应用于行，因此每个字符（数字）都被单独处理。

### 例子

```
enc = {0, '3294'; 1, '128'; 2, '2098'};
x = [2, 1, 0];
y = str2num(cell2mat(arrayfun(@(v)enc{find([enc{:, 1}] == v), 2}', x(:), 'UniformOutput', 0)))' 
```

结果是：

```
y =
     2     0     9     8     1     2     8     3     2     9     4 
```

# c# - 非静态字段、方法或属性“成员”需要对象引用

> ID：15316651
> 
> 赞同：3
> 
> 时间：2013-03-09T22:29:43.210
> 
> 标签：c#

`我想以静态方法更改文本框文本。考虑到我不能在静态方法中使用“this”关键字，我该怎么做。换句话说，如何使对象引用文本框文本属性？

这是我的代码

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public delegate void myeventhandler(string newValue);

    public class EventExample
    {
        private string thevalue;

        public event myeventhandler valuechanged;

        public string val
        {
            set
            {
                this.thevalue = value;
                this.valuechanged(thevalue);

            }

        }

    }

        static void func(string[] args)
        {
            EventExample myevt = new EventExample();
            myevt.valuechanged += new myeventhandler(last);
            myevt.val = result;
        }

  public  delegate string buttonget(int x);

    public static buttonget intostring = factory;

    public static string factory(int x)
    {

        string inst = x.ToString();
        return inst;

    }

  public static  string result = intostring(1);

  static void last(string newvalue)
  {
     Form1.textBox1.Text = result; // here is the problem it says it needs an object reference
  }

    private void button1_Click(object sender, EventArgs e)
    {
        intostring(1);

    }` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:36:55.083

如果要从静态方法内部更改非静态对象的属性，则需要通过以下几种方式之一获取对该对象的引用：

*   **该对象作为参数传递给您的方法**- 这是最常见的。该对象是您的方法的参数，您可以在其上调用方法/设置属性
*   **对象被设置在一个静态字段中**——这个对于单线程程序来说是可以的，但是当你处理并发时它很容易出错
*   **对象可通过静态引用获得**- 这是第二种方式的概括：对象可能是*单例*，您可能正在运行静态注册表，您可以从该注册表中通过名称或其他 ID 获取对象等。

在任何情况下，您的静态方法都必须获得对该对象的引用才能检查其非静态属性或调用其非静态方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:46:21.750

你从 dasblinkenlight 得到了完美的答案。这是第三种方法的示例：

```
public static  string result = intostring(1);

static void last(string newvalue)
{
    Form1 form = (Form1)Application.OpenForms["Form1"];
    form.textBox1.Text = result;
} 
```

我不完全确定您为什么要传递字符串参数而不是使用它。

# javascript - 如何在 Rails 3 中路由参数数组

> ID：15316652
> 
> 赞同：0
> 
> 时间：2013-03-09T22:29:44.957
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery

我正在尝试在我的 Rails 3 应用程序中路由一组参数，但我不断收到 404 错误。

这是我的 JS 文件中的 ajax 请求：

```
var url = '/arrayquery?kind[]=startup&kind[]=investor'

$.ajax({
    url: url,
    dataType: "text"

}).done(function(data) {
    console.log(data)
}) 
```

我的路由：

```
match 'arrayquery/:kind', :to => 'home#arrayquery' 
```

我的控制器方法：

```
def arrayquery
  @players = Player.where("kind = ?", params[:kind])
end 
```

我的浏览器不断抛出这一行：

```
"NetworkError: 404 Not Found  - http://localhost:3000/arrayquery?kind[]=startup&kind[]=investor" 
```

有人知道为什么请求没有匹配的路由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:35:21.480

您在路线文件中定义的路线正在寻找，

```
http://localhost:3000/arrayquery/KIND?param=value&param=value 
```

尝试更改路线，

```
match 'arrayquery', :to => 'home#arrayquery' 
```

# windows - 为什么“git grep”在我的 Windows PC 上表现不稳定？

> ID：15316653
> 
> 赞同：6
> 
> 时间：2013-03-09T22:29:46.070
> 
> 标签：windows, git, github, grep, git-bash

我正在使用 Github 和`Git bash`我的 Windows PC（正在运行`XP`）。

在 Ubuuntu 上，我很乐意用`git grep`它来浏览我的代码，但每次我调用类似的东西时：

```
git grep "some text in my repo" 
```

`[END], ~, [RETURN]...`在 Windows 上，我得到了结果，然后每当我尝试输入某些内容时，我就会被 bash 窗口卡住，它会显示各种各样的东西。

**问题：**除了强制关闭并重新打开 git:bash 以继续工作
之外，我还能尝试什么。`CTRL+R, CTRL+Q, FN+END, Q, ESC`

谢谢！

**编辑：**
这就是我的意思：

![在此处输入图像描述](../Images/27b65b40c344d5b8203a13a497333a0c.png)

一旦我开始输入， [END] 字符串就会重新出现（或 50 行`~`），我无法在 Git 上编写任何命令，因为任何阻碍都会吞噬我正在输入的一半......很好的描述。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:41:47.643

git 启动较少（或类似的东西）所以键盘上的向上/向下箭头滚动匹配？如果您不希望这样，请尝试[https://stackoverflow.com/a/12166923/972216](https://stackoverflow.com/a/12166923/972216)中的说明：

```
set GIT_PAGER=cat 
```

将为您的控制台会话禁用它一次，或者

```
git config --global core.pager cat 
```

为您的帐户禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T23:11:39.907

在安装 git 并运行 git bash 之后，我也想知道这一点。似乎“git grep”通过“less”管道命令。

解决方案：只需键入`q`.

# pdo - 使用 PDO 扩展的 execute(array()) 插入语句不起作用

> ID：15316672
> 
> 赞同：3
> 
> 时间：2013-03-09T22:31:45.873
> 
> 标签：pdo, php

```
 $stmt = $conn->prepare("INSERT INTO user VALUES ('',:username,md5(:password),'',1,'','',:email,'',0,0,'',:cover,:dateofbirthYear:dateofbirthMonth:dateofbirthDay,NOW(),:sex,:country)");
 $stmt->execute(array(
  ':username'   => $username,
  ':password' => $password,
  ':email'   => $email,
  ':cover' => $cover,
  ':dateofbirthYear'   => $dateofbirthYear,
  ':dateofbirthMonth' => $dateofbirthMonth,
  ':dateofbirthDay'   => $dateofbirthDay,
  ':sex' => $sex,
  ':country'   => $country 
    )); 
```

由于某种原因，此插入语句不起作用。我是 PDO 的新手，所以我不太了解它。我究竟做错了什么？

这个声明给了我这个错误：

> 致命错误：未捕获的异常“PDOException”和消息“SQLSTATE [HY093]：无效的参数号：绑定变量的数量与 /home/manga/public_html/new/register.php:80 中的令牌数量不匹配”堆栈跟踪：
> # 0 /home/manga/public_html/new/register.php(80): PDOStatement->execute(Array)
> #1 {main} 在第 80 行的 /home/manga/public_html/new/register.php 中抛出

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T22:42:54.883

您以错误的方式准备了查询

```
INSERT INTO user VALUES ('',:username,md5(:password),'',1,'','',:email,'',0,0,'',
:cover,:dateofbirthYear:dateofbirthMonth:dateofbirthDay,NOW(),:sex,:country
     // ^ These need to either single or separated 
```

对于你正在尝试的东西，你可以这样做

```
//Prepare the date of birth earlier
$dob = $dateofbirthYear.$dateofbirthMonth.$dateofbirthDay;

//Then pass it as a single $variable

$stmt = $conn->prepare("INSERT INTO user VALUES ('',:username,md5(:password),'',1,'','',:email,'',0,0,'',:cover,:dob,NOW(),:sex,:country)");
 $stmt->execute(array(
  ':username'   => $username,
  ':password' => $password,
  ':email'   => $email,
  ':cover' => $cover,
  ':dob'   => $dob, // <-- Problem solved
  ':sex' => $sex,
  ':country'   => $country 
    ));
 // Then it will execute 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:39:10.930

您收到的确切错误消息是：

> SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配

这意味着您传递的参数的数量/名称（`array()`in ）与您在SQL 查询`execute`中拥有的参数的数量/名称不匹配。`prepare()`

如果[将其与包含的其他问题进行比较，*`SQLSTATE[HY093]`*](https://stackoverflow.com/search?q=%5Bpdo%5D+%22SQLSTATE%5BHY093%5D%22)您会发现它通常与难以阅读的大且格式错误的代码有关。这让人很难计算。然后你对某事有疏忽，然后错误就发生了。

只需修复它并完成，例如，您不能使用三个名称中的一个参数：

```
,:dateofbirthYear:dateofbirthMonth:dateofbirthDay, 
```

相反，只需为生日传递一个参数：

```
, :dateofbirth, 
```

您还可以使您的代码更具可读性：

```
$stmt = $conn->prepare(
    "INSERT INTO user
     VALUES (
        '', :username, md5(:password), '', 1, '', '', :email, '', 0, 0, '',
        :cover, :dateofbirth, NOW(), :sex, :country
     )"
);
$stmt->execute(array(
    ':username'    => $username,
    ':password'    => $password,
    ':email'       => $email,
    ':cover'       => $cover,
    ':dateofbirth' => $dateofbirthYear . $dateofbirthMonth . $dateofbirthDay,
    ':sex'         => $sex,
    ':country'     => $country
)); 
```

然后你有一个密码哈希的安全问题：

```
md5(:password) 
```

而是进行正确的密码散列，请参阅[有关安全密码散列的 PHP 常见问题解答](http://php.net/manual/en/faq.passwords.php)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-06-24T19:53:02.627

更正了准备好的查询：

```
$stmt = $conn->prepare("INSERT INTO user VALUES ('',:username,md5(:password),'',1,'','',:email,'',0,0,'',:cover,:dateofbirthYear,:dateofbirthMonth:,dateofbirthDay,NOW(),:sex,:country)");
//:dateofbirthYear,:dateofbirthMonth:,dateofbirthDay place holders are seprated 

$stmt->execute(array(
 ':username'   => $username,
  ':password' => $password,
  ':email'   => $email,
  ':cover' => $cover,
  ':dateofbirthYear'   => $dateofbirthYear,
  ':dateofbirthMonth' => $dateofbirthMonth,
  ':dateofbirthDay'   => $dateofbirthDay,
  ':sex' => $sex,
  ':country'   => $country 
)); 
```

# ios - 解码字符串 iPhone SDK

> ID：15316673
> 
> 赞同：1
> 
> 时间：2013-03-09T22:31:58.143
> 
> 标签：ios, cocoa-touch, nsstring

我正在使用列表来获取 ftp 站点的内容，它工作正常，但在某些情况下，我的文件名称中包含特殊字符，例如：“Márzo 2 2013 (8).JPG”，第二个字符。当我调用列表函数时，你会得到一个带有这些数据的 NSDictionary（使用 nslog）：

```
{
  kCFFTPResourceGroup = group;
  kCFFTPResourceLink = "";
  kCFFTPResourceModDate = "2013-03-09 19:08:00 +0000";
  kCFFTPResourceMode = 511;
  kCFFTPResourceName = "M\U00b7rzo 2 2013 (8).JPG";
  kCFFTPResourceOwner = owner;
  kCFFTPResourceSize = 145971;
  kCFFTPResourceType = 8;
} 
```

然后使用这个

```
NSLog(@"%@", [[listaArchivos objectAtIndex:0] valueForKey:(id)kCFFTPResourceName]); 
```

我明白了

```
M·rzo 2 2013 (8).JPG 
```

注意第二个字符，它应该是“á”，我尝试了很多功能，但我无法正确转换我的字符串，希望有人能提供帮助

谢谢。

以西结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:40:20.460

你能试试这个代码吗

```
NSString *sourcestr = @"ë,à,é,ä all to e,a,e,a";
NSData *temp = [sourcestr dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *outputStr = [[[NSString alloc] initWithData:temp encoding:NSASCIIStringEncoding] autorelease];
NSLog(@"converted: %@", outputStr); 
```

它对我来说很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:04:11.783

我发现了问题，它在获取字典的函数上，我可以通过查看来自苹果的 simpleFTPSample 来修复它，在函数 - (void)parseListData 的文件 ListController.m 中，我更改了这一行

```
entryToAdd = [self entryByReencodingNameInEntry:(__bridge NSDictionary *) thisEntry encoding:NSASCIIStringEncoding];//NSUTF8StringEncoding 
```

我用 ascii 更改了 utf8，现在我可以正确获取文件名。现在的问题是文件无法下载。

在这一行中，来自示例的同一文件

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode 
    ·
    ·
        bytesRead = [self.networkStream read:buffer maxLength:sizeof(buffer)];
        if (bytesRead < 0) {
            [self stopReceiveWithStatus:@"Network read error"];
        } else if (bytesRead == 0) {
            [self stopReceiveWithStatus:nil];
        } else {
            assert(self.listData != nil);

            // Append the data to our listing buffer.

            [self.listData appendBytes:buffer length:(NSUInteger) bytesRead];

            // Check the listing buffer for any complete entries and update 
            // the UI if we find any.

            [self parseListData];
        } 
```

我收到“Netwok 读取错误”，文件流在文档文件夹中创建文件，netwokstreamdown 打开，但无法读取，有什么建议吗？

谢谢。

# python - 使用 Python 进行 JSON 调用

> ID：15316674
> 
> 赞同：-2
> 
> 时间：2013-03-09T22:32:24.607
> 
> 标签：python, json

这是我正在尝试使用的课程

```
class Products(Resource):
    """The collection of products in a store"""

    def get(self):
        """Returns list of products"""
        products_list = self.client.request_json('GET', '/products?limit=%s&page=%s' % (self.paginate_by, self.current_page))
        return [Product(product) for product in products_list] 
```

这是我的脚本：

```
import bigcommerce.api

bigcommerce.api.Connection.host = 'https://store-qvek.mybigcommerce.com'
bigcommerce.api.Connection.user = 'admin'
bigcommerce.api.Connection.api_key = '272956b18e3a7c269b413385908cc7371f5c41'

products_list = bigcommerce.api.Products.get()
for product in products_list:
    print product.name 
```

我在 Products.get() 中遗漏了一些东西....但是什么？

```
Traceback (most recent call last):
  File "C:\wget\bin\test_bigcommerce.py", line 8, in <module>
    products_list = bigcommerce.api.Products.get()
TypeError: unbound method get() must be called with Products instance as first argument (got nothing instead) 
```

PS 由于我更改了主机和 api 密钥以便将其公开发布，因此该代码将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:18:22.430

You have a class `Products` but never create an instance of that.

Create an instance instead:

```
bigcommerce.api.Products().get() 
```

# ios - 使用 cocos2D 时出现 Code Sign 错误

> ID：15316675
> 
> 赞同：0
> 
> 时间：2013-03-09T22:32:24.870
> 
> 标签：ios, xcode, provisioning-profile

我从 Apple 购买了一个开发者帐户。通过采取开发规定，我已经在设备中测试了示例应用程序。然后我已经下载`cocos2d-iphone-1.0.1`并设置了它。然后我创建了一个名为`FirstGame`. 当我在设备上编译示例 cocos2D 项目时，它给出了这个错误：

> 代码签名错误：找不到与应用程序标识符“com.yourcompany.FirstGame”匹配的有效配置文件

在项目的构建设置中，未启用开发配置文件。我正在使用 Xcode 4.6。

![图片](../Images/2f6fd15fa41c0b18efdb1bfe20f54351.png)

**编辑：**我找到了应用[此](https://stackoverflow.com/a/3729200/2111065)解决方案的解决方案。：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:42:23.100

这与 cocos2d 无关。只需编辑项目的包标识符，并确保您具有正确的配置文件。

它应该是**com.ahmetatalay.FirstGame**，而不是cocos2d 模板中默认的**com.yourcompany.FirstGame 。**

在 Xcode 的项目设置部分下更改它，以使用您的通配符配置文件或您专门为其创建的配置文件对其进行代码签名。

有关详细信息，请参阅 Apple 的文档：

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html)

# django - 使用 UserProfile 对象访问用户字段

> ID：15316684
> 
> 赞同：2
> 
> 时间：2013-03-09T22:34:06.510
> 
> 标签：django, django-models, django-views

我想使用 UserProfile 对象访问用户模型字段。我在 Userprofile 中有一个“角色”字段，

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    role = models.CharField(max_length=30) 
```

每个用户都有一个角色，“主管”或“管理员”现在我想获取角色 = 主管的用户对象。我希望能够使用自定义用户模型中的角色主管访问这些用户的用户名。我无法正确查询。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:37:55.663

```
supervisor_usernames = [up.user.username for up in UserProfile.objects.filter(
    role='supervisor')] 
```

# google-maps - 使用 markerclusterer 过滤 googlemaps 以仅显示屏幕上可见的标记（在侧边栏上） - 通过 xml 加载的内容

> ID：15316688
> 
> 赞同：1
> 
> 时间：2013-03-09T22:34:22.340
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

我在基于 googlemap 的[http://arquitectospelomundo.com上运行这个网站。](http://arquitectospelomundo.com)感谢这个社区，我已经设法让它从 xml 文件中读取数据，将其处理成一个 markerclusterer 对象，并让它显示一个带有内容的侧边栏。现在我正在寻找是否可以仅使用屏幕上看到的标记过滤该侧边栏（放大会从该列表中删除项目）。由于markerclusterer给我带来了困难，因此已经尝试过但没有成功。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:24:22.627

观察地图的 bounds_changed-event 然后循环标记并检查地图的边界是否包含标记：

```
google.maps.event.addListener(map,'bounds_changed',function(){
var bounds=map.getBounds();
$('#side_bar a').each(function(i,e){
  $(e).add($(e).next('br'))
    .css('display',(bounds.contains(gmarkers[i].getPosition()))?'block':'none');
});
}); 
```

这将过滤侧边栏元素，但延迟加载不会注意到变化。但是您可以通过触发滚动事件来强制延迟加载加载图像：

```
google.maps.event.addListener(map,'bounds_changed',function(){
var bounds=map.getBounds();
$('#side_bar a').each(function(i,e){
  var c=bounds.contains(gmarkers[i].getPosition());
  $(e).add($(e).next('br')).css('display',c?'block':'none')
   .find('img').trigger((c)?'scroll':'void');
});
}); 
```

# cakephp - CakePHP 初学者：需要建议，所有内容都在单个视图或多部分表单上

> ID：15316689
> 
> 赞同：1
> 
> 时间：2013-03-09T22:34:24.887
> 
> 标签：cakephp

提前感谢您为我目前的网络编码体验提供的任何帮助和耐心。

背景：

我目前正在尝试为我的家族企业开发基于 Web 的应用程序。我用 C# 开发了这个系统的当前版本，但是我想获得基于 Web 的系统，并在此过程中学习 cakephp 和 MVC 模式。

当前问题：我目前被困在一个应该处理 PurchaseTicket 的控制器中。这张票将有一个关联的客户、订单项、总计等。我一直在尝试为控制器开发一个基本的“add()”功能，但是我遇到了以下问题：

*   我正在创建一个包含所有内容的视图：一个搜索客户的按钮、一个添加行项目的按钮和一个保存按钮。由于我习惯于开发桌面应用程序，我想我可能正在尝试将相同的逻辑转移到基于 Web 的应用程序中。这是推荐或可行的吗？

我遇到了诸如“搜索客户”之类的基本问题。从 New Ticket 页面，我重定向到客户控制器，搜索然后将结果放入会话变量或将其发回，但是当我继续处理所需的其余信息时，我最终得到了一些“意大利面条”代码。我应该做一个多部分的表格吗？如果我这样做，我会破坏应用程序的视觉设计。

现在我最终实例化了我的 PurchaseTicket 模型并将其放入会话变量中。我这样做是为了保存中间数据，但是我不确定实例化模型是否符合 cakephp 标准或 MVC 模式。

我为篇幅道歉，这是我作为会员的第一篇文章。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:15:22.953

欢迎来到堆栈溢出！

所以听起来有几个问题，都有相当开放的答案。我不知道这是否会最终得到这样的答案，但它提供的信息比我可以发表的评论要多，所以我开始了：

首先，如果您还没有，我建议您先阅读[CakePHP 博客教程](https://github.com/josegonzalez/upload "CakePHP 博客教程")以熟悉 Cake，然后再直接转换您现有的桌面应用程序。

其次，熟悉[CakePHP 的烘焙控制台](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html "CakePHP 的烘焙控制台")。如果您使用它来开始您的应用程序的网络版本，它将为您节省大量时间。

在尝试解决实质性问题之前，我无法强调在一个小项目中正确掌握 MVC 和 CakePHP 的重要性。

第三，Web 应用程序的 UI 绝对不同于桌面应用程序。在 CakePHP 的情况下，没有任何东西在服务器上永久“运行”。整个 CakePHP 框架被实例化，并随着对服务器的每个页面请求而死亡。从桌面应用程序过渡时，这可能是一个棘手的概念，在桌面应用程序中，所有内容都存储在内存中，并且对象的实例可以存在只要您希望它们存在。使用桌面应用程序，更容易让用户去做另一项任务（例如搜索客户），然后将结果发送回调用对象，其实例仍然存在。正如您所发现的，如果您尝试通过在会话中存储过多信息来在 Web 应用程序中模仿此功能，您很快就会得到意大利面条式代码。

您可以使用 AJAX（如果您还不了解它，请用 Google 搜索）仅更新页面的某些部分，并获得更精简的 UI，这听起来像是您需要做的事情。要大致了解这些可能性，您可能需要查看[Bamboo Invoice](http://bambooinvoice.org/ "竹发票")。它不是用 CakePHP 构建的，而是用 CodeIgniter 构建的，CodeIgniter 是另一个开源 PHP MVC 框架。听起来 Bamboo Invoice 与您所描述的功能有很多相似的功能（发票包含行项目、总计、客户等），因此它可能会帮助您了解应该如何构建界面 - 并且如果您想深入研究源代码，如何实现一些您想做的事情。

Bamboo Invoice 使用 Ajax 为应用程序提供“一个视图，上面包含所有内容”的感觉，这听起来像是您想要的。

第四，关于您的客户搜索情况的具体情况，将内容存储在会话变量中可能不是要走的路。您可能希望使用自动完成字段，每次在字段中输入字符后，它都会向服务器发送一个 Ajax 请求，并显示服务器发回的建议/匹配客户列表。在此处查看示例：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)。实现自动完成并非完全直接，但网络上应该有大量示例和教程。

最后，我显然不知道您的业务是做什么的，但是在构建自己的软件之前，您是否研究过可能适合您的现有软件？有很多很棒的、灵活的基于 Web 的解决方案，价格非常合理，适用于企业的许多常见任务。与构建您自己的解决方案相比，有些东西可能会以更少的时间和金钱为您带来出色的结果。

不管怎样，祝你好运，享受 CakePHP！

# android - 在移动设备上运行的 GWT 应用程序

> ID：15316691
> 
> 赞同：1
> 
> 时间：2013-03-09T22:34:39.030
> 
> 标签：android, css, gwt

我将在 android 上运行我的 GWT 生成的 Java 脚本文件，并且无论移动屏幕的大小如何，我都试图让我的 UI 看起来相同。我的大部分视图都有 5 到 6 个小部件、按钮、文本框。我现在已经将它们放在 FlexTable 中，但也许有更好的方法来布置小部件？然而，我的主要问题是关于如何使用 CSS 来布局我的小部件，以便所有屏幕尺寸的外观和感觉都是相同的。这可以使用CSS吗？如果是这样，有人会有任何专注于小部件定位的 CSS 示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:39:42.977

对于各种屏幕尺寸的 GWT（以及处理横向、纵向旋转），我使用媒体查询。通过这种方式，您可以为每个屏幕尺寸定义 css 规则。

例如，在下面我从不需要 myContentPanel 大于 450，但这对于 iPhone/Android 纵向视图来说太大了：

```
@media all and (max-width: 10024px) {
    /*styles for narrow desktop browsers and iPad landscape */
       .myContentPanel{
         width: 450;
    }    
}

@media all and (max-width: 320px) {
   /*styles for iPhone/Android portrait*/
      .myContentPanel {
         width: 320;
    }

} 
```

这是一个更完整的 css 示例[http://snipplr.com/view/67341/](http://snipplr.com/view/67341/)

这里有一个很棒的使用 jQuery 的教程[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

您可以在此处查看更多信息：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T09:44:12.843

您也可以使用 [ViewPort Meta 标签](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag#language) 来维护`widths and heights`您在设备上的 Web 应用程序的正确性。无需`mobile`更改所有`layouts`.

```
The viewport meta tag to control layout on mobile browsers. 
```

另请参阅下面的问题，我已经回答了设置视口。

[使用视口元标记实现最小宽度](https://stackoverflow.com/questions/15040408/achieving-min-width-with-viewport-meta-tag/15045700#15045700)

并查看@media标签，如user1258245所说

# c++ - 继承和 CRTP

> ID：15316699
> 
> 赞同：1
> 
> 时间：2013-03-09T22:35:12.263
> 
> 标签：c++, inheritance, crtp

出于实际原因，我有一个像

```
template <class A>
class CRTP
{
    template <int (A::*Member)()>
    int func(void * obj)
    {
        int result
        // Do something with Member, like
        // result = (reinterpret_cast<A*>(obj)->*Member)();
        return result;
    }
}; 
```

这`template <void (A::*Member)()>`是一个要求，它不能作为参数传递。

而且我还有一个类 Base

```
class Base : public CRTP<Base>
{
    int aMemberOfBase() {...}
}; 
```

及其派生的，我也想继承 CRTP

```
class Derived : public CRTP<Derived>, public Base
{
    int aMemberOfDerived() {...}
}; 
```

在派生的一些成员中，我会做类似的事情

```
func<&Derived::aMemberOfDerived>(this);
func<&Base::aMemberOfBase>(this); 
```

那可能吗 ？

（好吧，VC++ 只编译第一行，不想阅读第二行……但 Derived 应该有成员

```
template <int (Base::*Member)()> int func(void * obj);
template <int (Derived::*Member)()> int func(void * obj); 
```

这看起来很奇怪，我承认。但是下面这段代码

```
template <void (Base::*Member)()> int func() {return 0;}
template <void (Derived::*Member)()> int func() {return 1;} 
```

编译返回`func<&Base::someMember>() != func<&Derived::someMember>()`，因为模板的签名不一样，不能一样。）

我必须承认，我对标准所说的内容并不满意。但是我试图允许的继承模式是允许的吗？如果是，为什么其中一行无法编译？

此外，如果我声明

```
class Derived : public Base, public CRTP<Derived> 
```

代替

```
class Derived : public CRTP<Derived>, public Base 
```

我得到编译时错误（在所有的`func<...>(...)`），这意味着某处有问题。

另一方面，我知道

```
template <class A, int (A::*Member)()> int func(void * obj) 
```

将消除对 CRTP 的需求，但编写`func<Derived, &Derived::aMember>()`. 有没有类似的解决方法

```
template <class Class, void (Class::*Member)()> class A 
{
    void func(void * obj) {...(reinterpret_cast<Class*>(obj)->*Member)();...} 
};
template <typename Signature> class B;

template <typename Class, typename Member>
class B<&Class::Member> : public class A<Class, &Class::Member> {}; 
```

哪个允许`B<&Base::Derived>().func(somePtrToBase)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:46:04.180

您可以通过限定基本成员模板的名称来消除歧义。以下应该有效：

```
template <typename A> struct CRTP
{
    template <int (A::*Member)()> int func();
};

struct Base : CRTP<Base>
{
    int aMemberOfBase();
};

struct Derived : CRTP<Derived>, Base
{
    int aMemberOfDerived();

    void foo()
    {
        CRTP<Derived>::func<&Derived::aMemberOfDerived>();
        CRTP<Base>::func<&Base::aMemberOfBase>();
    }
}; 
```

我公开了所有内容，以避免陷入访问控制细节。

# java - JAVA：JUnitTest，抛出两个异常的测试方法

> ID：15316710
> 
> 赞同：0
> 
> 时间：2013-03-09T22:36:29.347
> 
> 标签：java, exception, junit, junit4

我正在测试一种引发两个不同异常的方法。这是我的标题：

`@Test (expected = A8InvalidInputException.class)`
`public void testGuessCharacter() throws A8InvalidInputException, A8AlreadyGuessedException { ... }`

正文有两个 try/catch 块（对 SO 的搜索导致一篇帖子说这是您测试抛出异常的方式），一个用于每个异常。在我看来，我应该把它分成两种测试方法，特别是因为我只能有一个*预期*的属性。但是，当我这样做时，应该测试 A8InvalidInputException 的方法需要 A8AlreadyGuessedException 的 try/catch，而应该测试 A8AlreadyGuessedException 的方法需要 A8InvalidInputException 的 try/catch。我不确定如何编写这个测试。这是我正在尝试测试的方法：

```
/**
 * This method returns whether a specified character exists in the keyPhrase field
 * @param guess  a character being checked for in the keyPhrase field
 * @return  returns whether a specified character exists in the keyPhrase field
 * @throws A8InvalidInputException  if a non-valid character is passed as input to this method
 * @throws A8AlreadyGuessedException  if a valid character which has already been guessed is passed as input to this method
 */
public boolean guessCharacter(char guess) throws A8InvalidInputException, A8AlreadyGuessedException
{
    if(isValidCharacter(guess))
    {
        guess = Character.toLowerCase(guess);

        if(guessedCharacters.contains(guess) )
        {
            throw new A8AlreadyGuessedException("" + guess);
        }
        else
        {
            guessedCharacters.add(guess);
            if(keyPhrase.contains("" + guess))
                return true;
            else
            {
                numberOfGuessesLeft--;
                return false;
            }
        }       
    }
    else
    {
        throw new A8InvalidInputException("" + guess);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:42:03.637

只需在 throws 子句中添加两个异常：

```
@Test (expected = A8InvalidCharacterException.class) 
public void testInvalidCharacterScenario() throws A8InvalidInputException, A8AlreadyGuessedException { ... }

@Test (expected = A8InvalidInputException.class) 
public void testInvalidInputScenario() throws A8InvalidInputException, A8AlreadyGuessedException { ... } 
```

然后，如果一个测试抛出另一个异常（意外的异常），那么您的测试将自动失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T22:43:16.770

一个方法在运行时只能抛出一个异常。这就是为什么只能有一个预期属性。

您可能需要三个测试用例：一个是方法抛出一个异常，一个是该方法抛出另一个异常，一个是该方法根本没有抛出任何异常。

不要在您的`@Test`方法中放置任何 try/catch 语句，只需声明它们抛出异常即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T22:40:06.180

是的，你应该把它分成两个单元测试。一个带有无效输入来触发`A8InvalidInputException`，另一个带有“已经猜到”输入来触发`A8AlreadyGuessedException`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T22:59:14.123

考虑一下，为了使编写测试更简单，将它们分成两个不同的部分——分别进行测试`isValidCharacter`和测试`guessCharacter`。

假设`isValidCharacter(guess)`如果您收到无效的猜测，这将失败，我认为`A8InvalidInputException`采用该方法将是理想的。

```
public boolean isValidCharacter(char guess) throws A8InvalidInputException {
    // have your logic to check the guess, and if it's invalid, throw
} 
```

然后您需要做的就是测试*该*特定方法以查看它是否在虚假输入上引发异常。

```
@Test (expected = A8InvalidInputException.class)
public void testIsValidCharacterWithInvalidCharacter() {
    // write your test here.
} 
```

接下来，您可以将您的方法更改为只关​​心该方法的快乐路径`isValidCharacter`，因为如果您不返回布尔值，您就会抛出异常。

最后，您只关心`guessCharacter`是否抛出`A8AlreadyGuessedException`.

```
@Test (expected = A8AlreadyGuessedException.class)
public void testGuessCharacterWithAlreadyGuessedValue() {
    // write your test here.
} 
```

# android - OpenGLES2无法渲染位图

> ID：15316711
> 
> 赞同：0
> 
> 时间：2013-03-09T22:36:41.330
> 
> 标签：android, user-interface, opengl-es-2.0, glsles

这是在 android 平台上使用 OpenGLES2.0 开发移动应用程序（针对 API 8，如果有任何区别）。

我正在尝试在我当前工作的渲染系统上添加一个 UI 层，但它不起作用，我不知道为什么。任何帮助将不胜感激。

这就是我正在做的事情：
1）初始化时，我正在加载一整堆要显示的网格，这些网格使用各种程序进行渲染。其中一个网格显示纹理，这是有效的。
2) 在我加载了所有网格之后，我加载了一个“按钮”，它基本上是一个正方形，具有相同的纹理，已经在上面的 (1) 中使用过。
3）我的主渲染循环使深度蒙版可写，并且依次为每个程序渲染任何不透明的内容，然后将深度蒙版设为只读，然后依次为每个程序渲染任何具有任何透明度的内容，然后清除深度缓冲区位并依次渲染每个 UI 组件。

我正在做一件事，这可能不是正确的做事方式——渲染我的 UI 组件的程序没有执行任何模型-视图-投影转换——我将标准化的设备坐标直接传递给它，它只是一个通过。据我所知，这应该可行 - 我只提到它是因为我对此持怀疑态度。UI组件程序的顶点和片段着色器代码如下：
`int vShader = compileShader(GLES20.GL_VERTEX_SHADER,`
`"attribute vec4 aPosition;" +`
`"attribute vec2 aTexCoord;" +`
`"varying vec2 vTexCoord;" +`
`"void main() {" +`
`" vTexCoord = aTexCoord;" +`
`" gl_Position = aPosition;" +`
`"}");`
`int fShader = compileShader(GLES20.GL_FRAGMENT_SHADER,`
`"precision mediump float;" +`
`"uniform sampler2D uTexture;" +`
`"varying vec2 vTexCoord;" +`
`"void main() {" +`
`" gl_FragColor = texture2D(uTexture,vTexCoord);" +`
`"}");`

这是我尝试过的：
1）我尝试过阻止不透明和透明的程序运行。在这种情况下，我得到一个完全充满垃圾的屏幕（带状规则间隔的水平条纹，在纯黑色和看似随机的东西之间交替 - 每个带可能大约 50 像素高）。
2）我检查了我`FloatBuffer`所基于的浮点数组的内容（我不知道如何`FloatBuffer`直接检查。这对我来说看起来不错。

我有点难过！有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:44:12.743

好的，我明白了这一点。我将首先列出要检查的一般事项，以防有人再次来到这里，然后确切地说我的伤害是什么。

一般来说：
1）如果你没有看到东西，关闭剔除面（`glDisable(GL_CULL_FACE)`）；这样，如果你的多边形的左手方向错误，你仍然会看到一些东西。
2) 请注意，OpenGL 的 0,0 是左下角，但您可能已经决定 0,0 是您的 UI 代码的左上角（这可以帮助和教唆您给三角形错误的使用习惯）。 [这里](http://www.opengl.org/archives/resources/features/KilgardTechniques/oglpitfall/)第 13 点显示了如何避免这种情况。
3) 如果屏幕上出现垃圾，您可能忘记清除缓冲区。

所以，具体来说，我弄错了一些三角形（由于我的 UI 代码和 OpenGL 代码中的原点不匹配），并且在开始将东西修剪回基础进行调试时，意外地注释掉了 glClear称呼。

关于正交码是否可以不做矩阵变换，我觉得应该可以，但不能反馈；将东西还原为基础意味着该代码已经消失，一旦我让它工作，我肯定不会把它放回去！

# c# - Azure 中的 VirtualPathProvider 在发布时不起作用

> ID：15316718
> 
> 赞同：0
> 
> 时间：2013-03-09T22:37:41.903
> 
> 标签：c#, azure, virtualpathprovider

我创建了一个 VirtualPathProvider 以允许移动基于 Request.Host 的自定义文件夹中的所有资源，以使用一个 Web 应用程序管理多个域。

在我的本地机器上，MVC 应用程序工作，当我发布到 Azure 时，我收到一个不清楚的错误（HTTP 503），我不明白我要检查什么才能获得更多信息。

这里提供者的实现：

```
public class PerSiteVirtualPathProvider : VirtualPathProvider
{
    private readonly IDictionary<string, string> domainToPath;

    public PerSiteVirtualPathProvider(IDictionary<string, string> domainToPath)
    {
        this.domainToPath = domainToPath;
    }

    public override bool FileExists(string virtualPath)
    {
        return base.FileExists(virtualPath) || PerSiteFileExists(virtualPath);
    }

    public override bool DirectoryExists(string virtualDir)
    {
        return base.DirectoryExists(virtualDir) || PerSiteFileExists(virtualDir);
    }

    public override string GetFileHash(string virtualPath, IEnumerable virtualPathDependencies)
    {
        if (PerSiteFileExists(virtualPath))
        {
            var host = HttpContext.Current.Request.Url.Host.ToLower();

            return string.Concat(host, "/", virtualPath);
        }

        return base.GetFileHash(virtualPath, virtualPathDependencies);
    }

    public override VirtualFile GetFile(string virtualPath)
    {
        if (PerSiteFileExists(virtualPath))
        {
            var physicalPath = CombinePath(virtualPath);
            return new PhysicalVirtualFile(virtualPath, physicalPath);
        }

        return base.GetFile(virtualPath);
    }

    public override CacheDependency GetCacheDependency(string virtualPath, IEnumerable virtualPathDependencies, DateTime utcStart)
    {
        if (PerSiteFileExists(virtualPath))
        {
            var host = HttpContext.Current.Request.Url.Host.ToLower();

            return new CacheDependency(new[] { CombinePath(virtualPath) }, new[] { host });
        }

        return Previous.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
    }

    private string CombinePath(string virtualPath)
    {
        var host = HttpContext.Current.Request.Url.Host.ToLower();

        var cleanVirtualPath = virtualPath.TrimStart('~', '/').Replace('/', '\\');

        if (!domainToPath.ContainsKey(host))
        {
            throw new InvalidOperationException(string.Format("The specified '{0} domain is not registered.", host));
        }

        var domainFolder = domainToPath[host];

        var path = Path.Combine(domainFolder, cleanVirtualPath);

        return path;
    }

    private bool PerSiteFileExists(string virtualPath)
    {
        var path = CombinePath(virtualPath);

        var fileExists = File.Exists(path);

        return fileExists;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:49:04.653

我解决了这个问题，我使用 App_Data 目录读取了所有资源，这对于 VirtualPathProvider 是不允许的，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)，特别是在备注段落中：

您不能将生成应用程序级程序集的 ASP.NET 应用程序文件夹或文件存储在虚拟文件系统中。这包括：

*   Global.asax 文件
*   Web.config 文件
*   XmlSiteMapProvider 使用的站点地图数据文件
*   包含应用程序程序集或生成应用程序程序集的目录：Bin、App_Code、App_GlobalResources、任何 App_LocalResources
*   应用程序数据文件夹 App_Data

# java - 是否可以读取 .txt 文件的文件名并将它们写入二叉树？

> ID：15316738
> 
> 赞同：1
> 
> 时间：2013-03-09T22:40:38.223
> 
> 标签：java, swing, tree, jlabel, jcombobox

我正在编写一个程序，该程序将存储有关两年组学生的信息。每个学生有10条信息，总共有大约120名学生。我决定为每个学生创建一个单独的 .txt 文件，以便程序在启动时读取每个文件信息并将其传输到数组中。

然而，我面临的问题是有很多不同类型的数据操作：学生档案和`JTable`每个年级。我认为学生资料非常简单，但`JTable`我只需要访问前 2 条和最后 4 条信息。我还需要一个`JComboBox`包含每个学生姓名的名称，并且在添加新学生时也会更新。

我的问题如下：

1.  是否可以读取 .txt 文件的文件名并将它们写入二叉树？
2.  如何`JLabel`在程序运行时更改文本？（此信息来自每个学生的数组。）
3.  有没有更简单的方法来做到这一点？

哦，我正在使用 NetBeans，如果这有什么不同的话。

需要紧急帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:15:49.483

1.  As follows

    `File folder = new File("D:/data");`

    `File[] files = folder.listFiles();`

2.  Depending on the layout manager, to prevent on laying out the first window, and then having to short labels, maybe use a minimal size.

    `label.setText(...);`

    `label.setMinimalSize(new Dimension(..., ...));`

3.  Yes, it might be simpler to use a database.

Your approach has some clarity but implies writing a lot of code for maintaining lists, and writing several files back, and maintaining data integrity. Coupled with swing GUI code that is an effort.

In every case make sure you make backups, and have test data and such. Separate Model (the data) from the View (GUI).

# frameworks - NGINX 配置。带有 PATHINFO 404 的 PHP 框架

> ID：15316742
> 
> 赞同：3
> 
> 时间：2013-03-09T22:40:52.657
> 
> 标签：frameworks, nginx, php, pathinfo

我通常使用 apache，想试试 NGINX。

我已经将它安装在我的 ubuntu 开发机器上，并设置了一些不同的框架和站点并正在开发中（codeigniter、symfony、laravel 等）。

我遇到的问题是只有以`.php`工作结束的路径。如果我`index.php/welcome/index`只尝试 404s 而不是加载 index.php。

我尝试将 cgi.fix_pathinfo 设置为 1 和 0。

这是我当前（许多尝试过的）站点配置。

```
server {
listen   80; ## listen for ipv4; this line is default and implied
#listen   [::]:80 default_server ipv6only=on; ## listen for ipv6

root /my/path;
index index.php index.html;

# Make site accessible from http://localhost/
server_name localhost;

#error_page 404 /404.html;

# redirect server error pages to the static page /50x.html
#
#error_page 500 502 503 504 /50x.html;
#location = /50x.html {
#   root /usr/share/nginx/www;
#}

location ~ \.php$ {
    try_files $uri =404;

    # Fix for server variables that behave differently under nginx/php-fpm than typically expected
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    # Include the standard fastcgi_params file included with nginx
    include fastcgi_params;
    fastcgi_param  PATH_INFO        $fastcgi_path_info;
    fastcgi_index index.php;
    # Override the SCRIPT_FILENAME variable set by fastcgi_params
    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    # Pass to upstream PHP-FPM; This must match whatever you name your upstream connection
    fastcgi_pass unix:/var/run/php5-fpm.sock;
}

location / {
    # First attempt to serve request as file, then
    # as directory, then fall back to displaying a 404.
    try_files $uri $uri/ =404;
    # Uncomment to enable naxsi on this location
    # include /etc/nginx/naxsi.rules
}

# deny access to .htaccess files, if Apache's document root
# concurs with nginx's one
#
location ~ /\.ht {
    deny all;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:49:01.687

我更喜欢使用以下 nginx 配置结构。它更清洁：

```
location / {
  try_files $uri $uri/ @phpsite;
}

location @phpsite {
  include fastcgi_params;
  ... other fast_cgi directives
} 
```

在流行的 silex 项目中可以找到更复杂的设置：http: [//silex.sensiolabs.org/doc/web_servers.html#nginx](http://silex.sensiolabs.org/doc/web_servers.html#nginx)。

我在原始配置文件中看到 2 个问题：

```
location ~ \.php$ {
    try_files $uri =404;
    ...
} 
```

1.  在正则表达式中，'$' 表示在字符串末尾匹配。因此，正如 prodigitalson 的评论中所述，它失败了。
2.  上面 fast_cgi 位置块中的 try_files 指令不应该存在，因为该位置块应该由 php 单独处理。删除那条线会更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:53:00.423

我认为你缺少的是一个规则

```
location / {
    try_files $uri $uri/ /index.php?$args;
} 
```

如果路径不存在，它将尝试调用该 index.php url。

或者，如果你知道尝试其他事情是没有意义的，就

```
location / {
    try_files /index.php?$args;
} 
```

或者

```
location ~ /index.php {
    try_files /index.php?$args;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-16T20:38:45.680

这对我有用...

```
location ~ ^(.*?\.php)($|/.+) {
    try_files $1 =404;

    ... fastcgi conf...
} 
```

# r - 汇总日期并计算平均值

> ID：15316751
> 
> 赞同：4
> 
> 时间：2013-03-09T22:42:02.027
> 
> 标签：r, date, aggregate

我有一个数据框，其中一列中有很长的日期列表，另一列中有值，如下所示：

```
set.seed(1234)
df <- data.frame(date= as.Date(c('2010-09-05', '2011-09-06', '2010-09-13', 
                                 '2011-09-14', '2010-09-23', '2011-09-24',
                                 '2010-10-05', '2011-10-06', '2010-10-13', 
                                 '2011-10-14', '2010-10-23', '2011-10-24')),
                 value= rnorm(12)) 
```

我需要计算每个月每 10 天的平均值，但与年份无关，如下所示：

```
dfNeeded <- data.frame(datePeriod=c('period.Sept0.10', 'period.Sept11.20', 'period.Sept21.30',
                                    'period.Oct0.10', 'period.Oct11.20', 'period.Oct21.31'),
                       meanValue=c(mean(df$value[c(1,2)]), 
                                   mean(df$value[c(3,4)]),
                                   mean(df$value[c(5,6)]),
                                   mean(df$value[c(7,8)]), 
                                   mean(df$value[c(9,10)]),
                                   mean(df$value[c(11,12)]))) 
```

有没有一种快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T23:04:03.350

这是一种方法，它使用`lubridate`包进行月份和日期提取，但您可以使用基本 R 日期函数来完成：

```
library(lubridate)
df$period <- paste(month(df$date),cut(day(df$date),breaks=c(0,10,20,31)),sep="-")
aggregate(df$value, list(period=df$period), mean) 
```

这使 ：

```
 period          x
1  10-(0,10] -0.5606859
2 10-(10,20] -0.7272449
3 10-(20,31] -0.7377896
4   9-(0,10] -0.4648183
5  9-(10,20] -0.6306283
6  9-(20,31]  0.4675903 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:10:14.430

这种使用 format.Date 和模运算的方法应该相当快：

```
tapply(df$value, list( format(df$date, "%b"), as.POSIXlt(df$date)$mday %/% 10), mean)
            0         1        2
Oct -0.560686 -0.727245 -0.73779
Sep -0.464818 -0.630628  0.46759 
```

我不确定它与聚合方法相比如何：

```
aggregate(df$value, list( format(df$date, "%b"), as.POSIXlt(df$date)$mday %/% 10), mean)
  Group.1 Group.2         x
1     Oct       0 -0.560686
2     Sep       0 -0.464818
3     Oct       1 -0.727245
4     Sep       1 -0.630628
5     Oct       2 -0.737790
6     Sep       2  0.467590 
```

# sql - SQL 查询以合并 2 个不同的相同表

> ID：15316756
> 
> 赞同：0
> 
> 时间：2013-03-09T22:42:16.943
> 
> 标签：sql, merge, distinct

我想将 2 个相同的表合并到一个表中并区分用户。2张桌子看起来像这样：

```
Table1
**************
id, user, total
1, 1, 7
2, 2, 10
3, 3, 14

Table2
**************
id, user, total
1, 1, 4
2, 2, 7
3, 3, 3 
```

我想要这个结果：

```
user, total1, total2
1, 7, 4
2, 10, 7
3, 14, 3 
```

SQL 查询应该是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:44:07.307

您将需要列`JOIN`上的表格`user`：

```
select t1.user,
  t1.total,
  t2.total as total2
from table1 t1
inner join table2 t2
  on t1.user = t2.user 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/d62fa/2)

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 JOIN 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)（由[Jeff Atwood](https://stackoverflow.com/users/1/jeff-atwood)编写）。

该`INNER JOIN`语法将返回两个表之间匹配的所有行。

如果要添加另一个表，则只需包含另一个`JOIN`. 根据您的评论，您将使用：

```
select t1.user,
  t1.total,
  t2.total as total2,
  t3.department
from table1 t1
inner join table2 t2
  on t1.user = t2.user
inner join table3 t3
  on t1.user = t3.user 
```

# ios - NSTimeZone isDaylightSavingTimeForDate

> ID：15316762
> 
> 赞同：1
> 
> 时间：2013-03-09T22:43:31.420
> 
> 标签：ios, objective-c, xcode, nstimezone

作为 obj c 的新手，我遇到了我正在开发的日历应用程序的问题（从表面上大致复制了本机应用程序）。在夏令时时，我无法处理选择错误日期（前 1 天）的按钮。在寻找解决方案但没有找到解决方案后，我想出了以下代码。有经验的编码员能否告诉我是否有更简洁或更有效的方法来做到这一点。这段代码对我来说有点笨拙。任何建设性的想法将不胜感激。

```
- (IBAction)dateButtonPressed:(id)sender; {
NSDateComponents *offset = [NSDateComponents new];
offset.day = [self.dayButtons indexOfObject:sender];
NSDate *selectedDate = [self.calendar dateByAddingComponents:offset toDate:self.beginningDate options:0];
NSTimeZone *currentZone = [NSTimeZone localTimeZone]; 

if ([currentZone isDaylightSavingTimeForDate:selectedDate]) {
   offset.hour = +1;
   selectedDate = [self.calendar dateByAddingComponents:offset toDate:self.beginningDate options:0];
}
self.calendarView.selectedDate = selectedDate;
NSLog(@"pressed %@",selectedDate);
} 
```

# windows - 通过 Win32 api 在网络接口上启用/禁用 DHCP

> ID：15316763
> 
> 赞同：2
> 
> 时间：2013-03-09T22:43:33.343
> 
> 标签：windows, api

我正在寻找一种通过 win32 api 在网络接口上启用或禁用 dhcp 的方法。实际上我通过使用 wmi 解决了这个问题，但我想通过 win32 api 来解决这个问题，因为我想解决损坏的 wmi。

我找到了一个线程，他们通过注册表 api 执行此操作：[启用网络适配器时，自动配置 IP 地址正在设置](https://stackoverflow.com/questions/4967422/on-enabling-network-adpater-autoconfiguration-ip-address-getting-set)，但这是实现的唯一方法吗？

干杯，ceth

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T09:21:58.000

我终于用 wmi 做到了，如果 wmi 不工作，我将 netsh.exe 作为备份。win32 api的方式太不方便了..

# gnuplot - 如何使用 Gnuplot 对字符串及其数据进行分组？

> ID：15316764
> 
> 赞同：2
> 
> 时间：2013-03-09T22:43:42.950
> 
> 标签：gnuplot

我是 Gnuplot 的新手，希望能够绘制大量数据，如下所示：

```
Description violFine state
"Red Light Violation" $75.00 MD
"No Stop/Park Handicap" $502.00 MD
"Red Light Violation" $75.00 MD
"No Stop/Park Handicap" $502.00 MD
"Red Light Violation" $75.00 MD
"Red Light Violation" $75.00 MD
"Red Light Violation" $75.00 VA
"All Other Stopping or Parking Violations" $32.00 MD
"Red Light Violation" $75.00 MD
"Red Light Violation" $75.00 MD 
```

如您所见，第一行是列的名称，我在“描述”列中有许多重复的字符串值。我想要做的是将每个唯一“描述”的所有“violFine”数字相加，并将其与 x 轴上的“描述”和 y 轴上的“violFine”总数一起绘制。我制作了一个图表来说明我在说什么可以通过这个链接访问：http: [//i.imgur.com/NtZsZCR.jpg](http://i.imgur.com/NtZsZCR.jpg)
（对不起，如果我有足够的声誉，我会在这个页面上提供它点）。

任何有关这方面的帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:44:25.040

这种数据处理任务不太适合 gnuplot。幸运的是，gnuplot 很乐意让您使用其他工具来处理数据，然后通过管道输入结果。在这里，我将使用`python`：

```
from collections import defaultdict
import csv
import sys

d = defaultdict(list)
with open(sys.argv[1]) as fin:
    next(fin)  #remove the first line which doesn't contain data
    reader = csv.reader(fin,delimiter=' ',quotechar='"')
    for row in reader:
        d[row[0]].append(float(row[1][1:]))

for k,v in d.items():
    print '"{0}"'.format(k),sum(v) 
```

现在在 gnuplot 中，您可以将其绘制为：

```
plot '< python script.py datafilename' using (column(0)):2:xtic(1) with lines 
```

# c - ZeroMQ：异步回复

> ID：15316765
> 
> 赞同：7
> 
> 时间：2013-03-09T22:43:58.877
> 
> 标签：c, zeromq

我正在构建一个基础设施（用 C 语言），其中几个单独的服务通过 ZeroMQ 进行通信。现在，为了让这一切运行得又快又顺畅，我希望 ZeroMQ 异步运行。
我知道 ZeroMQ 的 IO 线程已经分开了，但是我想同时执行多个任务。

目前，我的模式如下所示：

```
Client -> REQ     |  /\
Router -> ROUTER  |   |
---   proxy   --- |   |
Dealer -> DEALER  |   |
Workers-> REP     \/--| 
```

但是，这需要我设计一个阻塞的、同步的 worker。使这种异步的唯一方法是增加工人（线程）的数量，但这对我来说似乎不是很有可扩展性。

此外，worker 执行的任务本身是异步的（使用它们自己的事件循环）。所以基本上，我希望实现这样的目标：

```
void *socket = zmq_socket(context, ZMQ_REP);
zsocket_connect(socket, "inproc://backend");

while (1) {
    zmq_msg_t request;
    zmq_msg_init(&request);
    zmq_msg_recv(&request, socket, 0);
    zmq_msg_close(&request);

    do_something(callback, socket);
} 
```

`do_something`然后将执行一些操作，完成后，回调函数被调用。

```
void callback(void *data, void *socket) {
    zmq_msg_t reply;
    zmq_msg_init_size(&reply, 5);
    memcpy(zmq_msg_data(&reply), "World", 5);
    zmq_msg_send(&reply, socket, 0);
    zmq_msg_close(&reply);
} 
```

现在，有什么方法可以实现这一点（即结合两个事件循环）？

我已经查看了 DEALER (client) -> ROUTER -> DEALER -> DEALER (worker)，但这似乎也不起作用，因为它仍然会阻止工作端的并发任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-08T14:23:28.723

（客户端）经销商<->路由器|<->| ROUTER <-> DEALER (worker) 在这种连接模式中，没有任何东西会阻塞，因此您可以根据需要交错接收和发送。

# c# - 以编程方式选择 listView 项目不起作用

> ID：15316767
> 
> 赞同：0
> 
> 时间：2013-03-09T22:44:05.933
> 
> 标签：c#, windows, listview, visual-studio-2012

我在 Windows 窗体应用程序 PaymentInfo 中有一个方法，它在填充`listView1`listView 后从子项中填充标签：

```
internal void PaymentInfo()
{
        label3.Text = "Amount Paid: " + listView1.SelectedItems[0].SubItems[1].Text.ToString();
        label3.Refresh();
        label6.Text = "Payment Type: " + listView1.SelectedItems[0].SubItems[5].Text.ToString();
        label6.Refresh();
} 
```

`listView1`填充后，我尝试使用以下方法调用该方法：

```
 listView1.Items[0].Selected = true;
 listView1.Items[0].Focused = true;
 PaymentInfo(); 
```

这有效地选择了列表中的第一项，但是当它尝试运行 PaymentInfo 时，我`ArgumentOutOfRangeException`在开头的行中得到一个`label3.Text`，详细信息是

> “InvalidArgument = '0' 的值对 'index' 无效。”

我也用 调用 PaymentInfo `listView1_MouseClick`，它工作正常。我检查了其他几件事，并注意到即使我以编程方式选择项目，也会`SelectedItems.Count`返回`0`. 为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:09:58.797

不知道确切原因，但唯一可行的方法是将代码放入 Load 事件中。

```
private void PastPayment_Load(object sender, EventArgs e)
    {
        listView1.Items[0].Selected = true;
        listView1.Items[0].Focused = true;
        PaymentInfo();
        PopDetails();
        this.listView1.SelectedIndexChanged += listView1_SelectedIndexChanged;
    } 
```

# javascript - 在 Firefox 中捕获鼠标移动

> ID：15316769
> 
> 赞同：1
> 
> 时间：2013-03-09T22:44:09.787
> 
> 标签：javascript, firefox, onmousemove

我正在写一个游戏，需要在 Firefox 中捕捉鼠标移动。这是我的代码：

```
document.onmousemove = function(e) {
    mouseState.x = e.x;
    mouseState.y = e.y;
} 
```

它在 Chrome/IE 中正常工作，但在 Firefox 中似乎不起作用。当我这样做时`console.log(mouseState.x)`，它会以`undefined`.

我需要进行哪些修改才能让 Firefox 捕捉鼠标移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:48:10.093

您应该使用`clientX`and`clientY`来代替。

*   [火狐文档](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)
*   [w3规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MouseEvent)

> 当我们有clientX/Y时，没有人能解释为什么我们需要x/y。**到目前为止， Firefox**对这个属性对的处理是最明智的（删除了它-gdoron）。

[怪癖模式](http://www.quirksmode.org/dom/w3c_cssom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:48:28.897

尝试使用`e.clientX`和`e.clientY`。

# php - 加载具有动态内容的页面

> ID：15316774
> 
> 赞同：2
> 
> 时间：2013-03-09T22:44:44.273
> 
> 标签：php, node.js, pug

我一直在为几个使用 Bukkit 的 Minecraft 服务器开发一个项目。我正在尝试创建一个网页，其中包含服务器世界的动态地图，以及一个实时事件更新系统，其中 a`<div>`会随着服务器上发生的事件而更新。为了简要介绍我的系统是如何工作的，Minecraft 服务器通过 UDP 数据包通过同一网络与 Node.js 网络服务器通信事件，并且 Node.js 网络服务器使用这些数据包来构建包含事件信息的 JavaScript 对象。然后存储对象，并在页面被请求时传递给 Jade。Jade 负责制作模板。

我想要做的是动态更新这个页面，这样用户就不必刷新整个页面来更新事件列表。我正在尝试实现的是类似于 Facebook 代码的东西，它会在每次 Facebook 朋友发布状态、评论帖子或“喜欢”帖子等操作时更新。

在阅读[关于 SO 的这个问题时](https://stackoverflow.com/questions/8152090/how-does-facebook-ticker-work)，我得出结论，我需要在 PHP 脚本中使用长轮询，但我不确定如何将 PHP 与几乎完全用 Node.js 编写的网络服务器集成。我怎么能这样做呢？

* * *

编辑：
我在客户端代码中遇到了问题。

这是脚本块：

```
script(src='/scripts/jadeTemplate.js')
script(src='/socket.io/socket.io.js')
script(type='text/javascript')
  var socket = io.connect();
  socket.on('obj', function(obj) {
    var newsItem = document.createElement("item");
    jade.render(newsItem, 'objTemplate', { object: obj });
    $('#newsfeed').prepend(newsItem);
    console.log(obj);
    alert(obj);
  }); 
```

这是`objTemplate.jade`：

```
p #{object}
// That's it. 
```

当`alert()`and`console.log()`放置在脚本的顶部时，它会发出警报并记录，但在底部，它们不会执行（因此，我认为创建`newsItem`、 the`jade.render()`或 prepend 都有问题。

如果我需要提供更多片段或文件，请告诉我。我还在修修补补，所以我可能会自己解决它，但除非我更新，否则我仍然需要帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:58:11.630

我会跳过 PHP 并看一下[socket.io](http://socket.io/)。它尽可能使用 websockets，但在必要时会退回到长轮询，并且客户端库非常易于使用。

每当您的 node.js 服务器准备好一个新对象时，它都会将其推送到所有连接的浏览器。使用[ClientJade](http://projects.jga.me/clientjade/)使用您的模板渲染对象（您可能必须将主模板的相关部分分解到其自己的文件中），然后将生成的 dom 元素添加到您的提要中。

首先，如果还不是这种方式，您需要将翡翠模板的相关部分分解为自己的文件。称它为 objTemplate.jade。然后使用ClientJade创建一个可以在浏览器中运行的编译模板：`clientjade objTemplate.jade > jadeTemplate.js`. 将jadeTemplate.js 放在您的公共js 目录中。

在您的 node.js 应用程序中，您将拥有类似这样的内容（伪代码）：

```
var io = require('socket.io').listen(httpServer);

listenForUDPPackets(function(obj) {
    saveObjSomewhere(obj);
    io.sockets.emit('obj', obj);
}); 
```

然后在客户端，是这样的：

```
<script src="/js/jadeTemplate.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect();
    socket.on('obj', function(obj) {
        var newsItem = document.createElement();
        jade.render(newsItem, 'objTemplate', obj);
        $('#newsFeed').prepend(newsItem);
    });
</script> 
```

# php - 处理宝石数据

> ID：15316778
> 
> 赞同：2
> 
> 时间：2013-03-09T22:45:48.727
> 
> 标签：php, linux, gem, compass-sass

我有一个关于通过 PHP 运行 shell 命令的问题。`compass compile [project]`我的目标是通过 PHP成功运行。我尝试了以下方法：

```
echo system('compass compile [project]', $s); // prints [31m[0m
echo $s; // prints 1

echo passthru('compass compile [project]', $p); // prints [31m[0m
echo $p; // prints 1

echo shell_exec('compass compile [project]'); // prints [31m[0m

echo exec('compass compile [project]', $e, $ee);
print_r($e); // Array ( [0] => [31m[0m )
echo $ee; // prints 1 
```

我什至尝试对包含的可执行文件运行 shell 命令，`compass compile test`但仍然得到与上述试验相同的结果。

**我的问题** 是什么`[31m[0m`意思？这是否代表二进制数据？这些是否代表[搜索引擎建议的 bash 颜色](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)？

据我所知，输出应该如下：

![样本输出](../Images/461b9703473cb51e688de1872ba9fecc.png)

对于踢球，我尝试通过执行`system(/usr/local/bin/compass compile [project]);`并得到相同的结果。我仔细检查了我的路径，所以我知道我可以按预期执行这些命令。这是来自的输出`echo $PATH`：

```
/usr/lib/lightdm/lightdm:
/usr/local/sbin:
/usr/local/bin:
/usr/sbin:
/usr/bin:
/sbin:/bin:
/usr/games:
/usr/local/games:
/var/lib/gems/1.9.1/bin 
```

有没有办法使用 PHP 编译指南针项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:43:13.150

我以前见过类似的错误。

通常这是由于 bash 启动脚本中输出的内容所致。例如，在我的一个 bash 初创公司中，我收到了一个回声，它安装了很多脚本，直到我意识到是什么导致了问题。

或者，也许用户（www-data ？）实际上没有主目录和适当的启动脚本？

你可以试试这个来获得一个非交互式的 shell：

```
exec("/bin/bash -c \"compass compile [project]\"", $e, $ee);
print_r($e); 
echo $ee; 
```

如果您仍然有问题，请尝试将输出重定向到 tmp 文件，然后检查它：

```
exec("/bin/bash -c \"compass compile [project] > /tmp/compass.compile.output\"", $e, $ee);
print_r($e); 
echo $ee; 
```

另请参阅：[.bashrc、.bash_profile 和 .environment 之间有什么区别？](https://stackoverflow.com/questions/415403/whats-the-difference-between-bashrc-bash-profile-and-environment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:33:18.863

通过使用`sass --compass`stderr 并将其重定向到 stdout解决了该问题`echo shell_exec("sass --compass [project] 2>&1");`

这是一个相当漫长而艰巨的过程，因为我已经有一段时间没有涉足命令行程序了。请记住，错误流和输出流可能在不同的输出上。测试这一点的最简单方法是通过以下方式将输出铲到文件中：

```
# do this once with a good file and once with a file that will give errors
sass --poll style.scss > output.txt 
```

![铲到文本文件的 Stderr 没有结果](../Images/c40ec702b9e09e1e146997c521e0435a.png)

如果`output.txt`为空，则错误输出在 stderr 流上，例如上述情况。我们可以通过将 stderr 重定向到 srdout 来纠正这个问题。例如：

```
sass --poll > output.txt 2>&1

#shows results
cat output.txt 
```

![标准错误到标准输出](../Images/a43d2dd675c686d3e2d6ad2313f86050.png)

我创建了一个简单的 PHP 脚本，将输出从一个 textarea 重定向到另一个。[代码可以在这里找到](http://phpbin.net/qDbVdhBa)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:04:14.363

首先猜测是权限问题。赔率是运行 PHP 的用户帐户（除非您从命令行运行它，我猜这是 httpd apache 守护程序正在运行的用户）没有权限执行您所要求的操作. 然而，这些错误非常无益。

据我所知，这看起来像是试图在命令行上以红色显示错误。我的猜测是代码之间有隐藏的（或以某种方式从未打印出来的）字符。查看您的一些 apache 和/或 PHP 错误日志，看看是否有任何有用的东西出现在 PHP 变量中。或者，为了好玩，尝试将带有 bash 颜色的输出复制并粘贴到基本的文本编辑器中，然后首先从开头一个一个地删除每个字符......看看是否有任何神奇的东西出现。如果这不起作用，请反向尝试相同的操作，从末尾退格。无论哪种方式，都会发生错误，它非常重要，必须以粗体红色字母显示给您，它只是没有找到您。

如果它*确实*是一个权限问题，并且这是一个您无法通过权限争论来解决的问题，您*可以*创建一个中间文件，您的 Apache 用户有权写入，而您的 cron 用户有权从中读取. 与其直接从 PHP 运行代码，不如将其放入文件中，然后频繁运行 cron 以查找该文件中的任何内容，***检查其有效性***，然后通过编译器运行它并将其从文件中删除。

这会很丑陋，但有时漂亮的东西不起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T15:31:57.177

您猜对了，它是颜色，但它的定义方式不正确。有关在控制台中使用颜色的更多信息，请参阅此**[文档](http://www.if-not-true-then-false.com/2010/php-class-for-coloring-php-command-line-cli-scripts-output-php-output-colorizing-using-bash-shell-colors/)**。此外，为了通过 compass 编译 SCSS，您可以在 linux 中使用 shell_exec 命令。有关 shell_exec 的更多信息，请参阅此**[文档](http://php.net/manual/en/function.shell-exec.php)**。让我们知道怎么回事。

# php - 使用贝宝 IPN

> ID：15316782
> 
> 赞同：0
> 
> 时间：2013-03-09T22:46:08.517
> 
> 标签：php, paypal, paypal-ipn

我正在尝试从 PayPal IPN 获取详细信息并显示交易是否已被验证。我正在使用下面的代码，如果它被取消，它会显示失败，这是正确的，但即使交易成功，它仍然显示失败。请提供此代码出错的任何想法

```
 //read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

//post back to PayPal system to validate (replaces old headers)
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Connection: close\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);
//

//error connecting to paypal
if (!$fp) {
    //
}

//successful connection    
if ($fp) {
    fputs ($fp, $header . $req);

    while (!feof($fp)) {
        $res = fgets ($fp, 1024);
        $res = trim($res); //NEW & IMPORTANT

        if (strcmp($res, "VERIFIED") == 0) {
            //insert order into database    
            echo'Success';
        }

        if (strcmp ($res, "INVALID") == 0) {
            //insert into DB in a table for bad payments for you to process later
            echo'Failed';
        }
    }

    fclose($fp);
} 
```

# objective-c - 在 iPad SplitView 应用程序中将 UIimageView 拖动到靠近主视图时阻止显示主视图

> ID：15316785
> 
> 赞同：1
> 
> 时间：2013-03-09T22:46:42.890
> 
> 标签：objective-c, ipad, uiimageview, uisplitviewcontroller

我的 IPAD 应用程序是一种游戏，其中用户必须以正确的顺序设置图像。

例如，有四个童话图像必须根据故事中的第一个和最后一个以正确的顺序重新排列。

如果我在横向或纵向模式下运行时将图像拖到靠近主视图的位置，则打开主视图的事件正在触发并将我的图像隐藏在主视图后面。

我四处搜索，当我从左向右拖动手指时，我没有找到任何阻止此主视图显示的东西。

必须始终显示详细视图，因为用户不能失去焦点，因此始终显示主视图不是解决方案。

有没有办法像我描述的那样在从左到右触摸屏幕时禁用/防止主视图打开？

我试图在这里发布截图，但我没有这样做的声誉，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:16:41.643

正如 CodaFi 在那里回答的那样，我必须在创建拆分视图时设置 PresentWithGesture 属性，如下所示：

```
if ([splitViewController respondsToSelector:@selector(setPresentsWithGesture:)])
    [splitViewController setPresentsWithGesture:NO]; 
```

它可以防止滑动手势打开主视图。

# google-app-engine - 您如何使用 GAE 启动器中的 OAuth2 进行部署？

> ID：15316787
> 
> 赞同：7
> 
> 时间：2013-03-09T22:47:26.783
> 
> 标签：google-app-engine

我正在尝试使用方便的启动器部署我的 GAE 应用程序，但由于我的帐户使用 2 因素身份验证，这有点困难：

```
Password for <me>@gmail.com: Use an application-specific password 
instead of your regular account password.
See http://www.google.com/support/accounts/bin/answer.py?answer=185833
However, now the recommended way to log in is using OAuth2\. See 
https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth 
```

在上面的网页上，我被指示简单地`--oauth2`输入以下选项`appcfg.py`：

```
appcfg.py --oauth2 update myapp/ 
```

如果我在命令行上，那会很简单，但如果我使用的是 GAE 启动器，我该如何使用 OAuth2？我看到添加命令行选项的唯一地方是在本地运行应用程序，而不是部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:59:18.370

您需要创建一个[特定于应用程序的密码](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)才能使用 - 这意味着您可以使用用户名/密码组合部署应用程序。

# r - ggploting 从数据列表中绘制多个图形

> ID：15316788
> 
> 赞同：0
> 
> 时间：2013-03-09T22:47:41.953
> 
> 标签：r, for-loop, ggplot2

我想按照这篇文章的内容做一些事情：[R：将ggplot2图保存在列表](https://stackoverflow.com/questions/11357139/r-saving-ggplot2-plots-in-a-list) 中问题是我无法让它工作。我似乎能够获得单独的图表，但`facet_wrap`抛出了一个错误。我会满足于只输出所有图形，然后将它们以 jpg 或其他格式保存到磁盘，以便稍后滚动浏览它们。

```
for(n in 1:5){
  pdata <- data.frame(mt1[n])
  library(ggplot2)
  p <-ggplot(pdata, aes(x=variable, y=value, color=Legend, group=Legend))+ geom_line()+ facet_wrap(~ color)

} 
```

链接到`dput`数据：[mt1](http://sdrv.ms/XyWigN)

编辑：添加了整个正确的文件，它有点长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:52:45.367

如果我们`facet`由于数据框中缺少变量而忽略了错误，您可以使用以下方式生成图表并将其保存在不同的文件中`ggsave`：

```
for(n in 1:5){
  pdata <- data.frame(mt1[n]) # better to use mt1[[n]]
  p <-ggplot(pdata, aes(x=variable, y=value, color=Legend, group=Legend))+ geom_line()
  ggsave(paste0("plot",n,".jpg"), p)
} 
```

**一些改进建议：**

首先，正如@Dason 指出的那样，您的`library(ggplot2)`电话应该在您的循环之外。

其次，如果你通过 访问列表的元素`[.]`，那么结果仍然是一个列表。您应该改为：`[[.]]`这将使`data.frame(.)`调用变得不必要（如上面代码中所述）。

第三是使用`*apply`函数族的建议。在这里，使用`lapply`.

总结代码中的所有这些要点：

```
require(ggplot2) # load package outside once
o <- lapply(seq_along(mtl), function(idx) {
    p <- ggplot(mtl[[idx]], aes(x = variable, y = value, 
              color = Legend, group = Legend))+ geom_line()
    ggsave(paste0("plot",idx,".jpg"), p)
}) 
```

# c++ - RPN 计算器无法正确执行计算

> ID：15316790
> 
> 赞同：0
> 
> 时间：2013-03-09T22:47:47.067
> 
> 标签：c++, stack, rpn

我有一个程序应该将表达式转换为反向波兰符号，然后在执行计算后显示答案。现在它不能正确执行计算。例如，如果我输入 5+2+5，它出于某种原因只注册了 5+2。谁能告诉我我做错了什么？

```
#include <iostream>
#include <stack>

void calculation(int, int, char);
using namespace std;
stack<int> a;

void main(void)
{

bool expression = false;
char ch;
char done;

int op1, op2;

cout << "Reverse Polish Notation : " << endl;
cout << "Enter expression: " << endl;
while (!expression)
{
    cin >> op1;
    cin >> op2;
    cin >> ch;

    calculation(op1, op2, ch);
    if (!cin)
        expression = false;
    else
    {
        expression = true;
        calculation(op1, op2, ch);
    }
}
cout << "Your expression is " <<  a.top() << endl;

}

void calculation(int oper1, int oper2, char chr)
{
switch (chr)
{
    case '+':
        a.push(oper1 + oper2);
        break;
    case '-':
        a.push(oper1 - oper2);
        break;
    case '*':
        a.push(oper1 * oper2);
        break;
    case '/':
        a.push(oper1 / oper2);
        break;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:53:06.890

您的程序不会转换任何内容。它是一个非常简单的 RPN 计算器，它采用由两个操作数和一个二元运算组成的*单个*项并计算结果。

如果需要它接受更复杂的 RPN 输入，则需要重新设计输入和计算逻辑。

如果您想输入中缀表达式，`5+4`但将内部表示保留为 RPN 堆栈，您还必须编写一个解析器来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:57:28.063

所有操作都应该进出堆栈。你的主循环应该看起来更像

```
while not eol
   if reading an operator
       push result of applying operator to top two stack elements
   else if reading an integer
       read it and push it on to the stack
   else 
       print an error message

print value at top of stack 
```

我省略了一堆堆栈深度检查。

# c# - 通过将 DataSource 定义为集合的脚本创建 RDLC 文件

> ID：15316793
> 
> 赞同：0
> 
> 时间：2013-03-09T22:48:00.440
> 
> 标签：c#, .net, xml, reporting-services, rdlc

如何在 XML RDLC 文件中将数据集定义为对象列表（字典）？我想在脚本中创建这个 rdlc 报告......像这样的东西，在互联网的某个地方有任何例子吗？

```
<DataSources>
  <DataSource Name="DataSource">
    <ConnectionProperties>
      <DataProvider>System.Collections.Generic.List<CoolClass></DataProvider>
    </ConnectionProperties>
  </DataSource>
</DataSources>
<DataSets>
  <DataSet Name="DataSet">
    <Query>
      <DataSourceName>DataSource</DataSourceName>
    </Query>
  </DataSet>
</DataSets> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:12:01.787

如果要在报表中使用对象列表，则必须在报表设计器中为其生成 XSD。我不确定如何直接使用 XML 来完成，但这是我从对象类型生成数据集后的样子。

```
<rd:DataSetName>EDIStagingDataSet</rd:DataSetName>        
  <rd:SchemaPath>C:\Projects\Reports\ObjectDataSet.xsd</rd:SchemaPath>
  <rd:TableName>ObjectList</rd:TableName>
  <rd:TableAdapterFillMethod>Fill</rd:TableAdapterFillMethod>
  <rd:TableAdapterGetDataMethod>GetData</rd:TableAdapterGetDataMethod>
  <rd:TableAdapterName>EDIShipmentItemsTableAdapter</rd:TableAdapterName>
</rd:DataSetInfo> 
```

# java - 解析数据时出错 org.json.JSONException - Java

> ID：15316794
> 
> 赞同：0
> 
> 时间：2013-03-09T22:48:03.857
> 
> 标签：java, android, json

我对 Android 比较陌生，我正在尝试解析一些数据，但我似乎在 LogCat 中收到以下错误：

```
Unexpected value from nativeGetEnabledTags: 0
Error parsing data org.json.JSONException 
```

我从以下位置获取 JSON 数据： [http ://api.wunderground.com/api/180dde448747af27/forecast/q/UK/Bradford.json](http://api.wunderground.com/api/180dde448747af27/forecast/q/UK/Bradford.json)

我正在使用以下代码提取数据：

```
JSONArray forecasts = json.getJSONArray("forecast");

for (int i=0;i<forecasts.length();i++) {                        
    HashMap<String, String> map = new HashMap<String, String>();    
    JSONObject e = forecasts.getJSONObject(i);

    // simpleforecast is a json array
    JSONArray forecastday = json.getJSONArray("forecastday");
    JSONObject fd = forecastday.getJSONObject(i);

    String icon = fd.getString("icon");

    map.put("id", String.valueOf(i));
    map.put("icon", icon);
    mylist.add(map);            
} 
```

我相信这个错误与我的 JSON 拉取有关，我可能没有正确解析它，但我似乎找不到正确的方法来解决它。这段代码被一个 try-catch 包围，然后我有一个列表适配器，我将代码添加到其中。

如果我遗漏了任何东西，我深表歉意，但我相当有信心这已经足够了，因为我相信这就是错误的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:09:43.697

解析当前 json 字符串以`icon`从`forecastday`JSONArray 获取：

```
// get Json forecast object
JSONObject forecasts_obj = json.getJSONObject("forecast");
// get Json simpleforecast object
JSONObject simpleforecast_obj = forecasts_obj.getJSONObject("simpleforecast");

// get Json forecastday Array
JSONArray forecastday_arr = simpleforecast_obj.getJSONArray("forecastday");

for (int i=0;i<forecastday_arr.length();i++) {                        
    HashMap<String, String> map = new HashMap<String, String>();    
    JSONObject e = forecastday_arr.getJSONObject(i);

    String icon = e.getString("icon");
    map.put("id", String.valueOf(i));
    map.put("icon", icon);
    mylist.add(map);            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:18:01.403

您错误地将预测识别为 JSONArray。

![JSON](../Images/5fe6320a10c89b35f83d3fb299f33bd1.png)

所以你不应该使用`JSONArray forecasts = json.getJSONArray("forecast");`来解析预测，你应该使用`JSONObject forecastObj = json.getJSONObject("forecast")`. 但是，forecastday 是一个 json 数组，因此您可以使用`forecastObj.getJSONArray("forecastday")`，然后对其进行处理。

# python - 从 Python 函数返回但继续执行函数

> ID：15316797
> 
> 赞同：4
> 
> 时间：2013-03-09T22:48:10.580
> 
> 标签：python

是否可以让函数将数据返回给调用者函数但继续执行？

我正在维护一个 Web 应用程序，该应用程序需要客户端服务在使用该应用程序的任何人的机器上的后台运行。服务器通过 RPC 连接到用户的客户端。客户端是一组存储在 GitHub 上的 Python 脚本，需要使用 Web 应用程序上的按钮进行更新。该更新要求客户端从 GitHub 拉取最新代码，然后自行重启。我想要的是客户端内部的更新方法将有关更新状态的信息发回服务器，然后将其显示给用户。因此，此信息将类似于：“正在从 GitHub 下载...”、“已完成下载。正在重新启动”、“已成功更新”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:50:10.157

使用 Python[生成器](http://docs.python.org/2/glossary.html#term-generator)，特别是该[`yield`](http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement)语句可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:53:40.977

您可以使用 celery 或类似的东西在后台完成您的长期工作，并将状态信息存储在某处。只需使用 AJAX 或 websockets 拉取状态更新并刷新页面上的状态。您还可以找到一些在 JS 上创建的 RabbitMQ 接口，如果您不想将结果存储在 DB 中，您可以使用这些接口获取更新。

这也可能有帮助：[django.http.StreamingHttpResponse](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.StreamingHttpResponse)

# php - 在 PHP 中调整 PHP GD 生成的图像的大小并显示它

> ID：15316803
> 
> 赞同：0
> 
> 时间：2013-03-09T22:48:33.027
> 
> 标签：php, image, resize, gd, image-resizing

我正在从头开始制作头像脚本，但遇到了一些问题。我得到了透明度工作，并为头部、身体、衬衫等提供了多图像支持。

无论如何，我希望能够在 PHP 脚本中生成特定大小的头像。这时，我有变量`$baseImage`，这是使用下面的 GD 脚本生成的图像：

```
$baseImage = imagecreatefrompng($startAsset);
imagealphablending($baseImage, true);
imagesavealpha($baseImage, true);

... combine all images into $base here

header("Content-type: image/png");
imagepng($baseImage); 
```

这生成的图像的大小是`350x550 (pixels)`，我希望能够获得更小的尺寸。

我已经进行了研究，但找不到可行的解决方案。什么内置的 PHP GD 函数可以调整它的大小，**保持透明度**，并保持出色的质量/颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:54:22.743

无法直接更改图像资源的大小。相反，您需要创建一个所需大小的新图像，并用于[`imagecopyresampled`](http://php.net/imagecopyresampled)从全尺寸图像复制到调整大小的图像。

# python - 正则表达式匹配数字和单位

> ID：15316804
> 
> 赞同：0
> 
> 时间：2013-03-09T22:48:38.030
> 
> 标签：python, regex

我有一些输入，其中包括如下行：

```
5feet
23m^2
7 m/s 
```

我想将这些重写为：

```
5 feet
23 m^2
7 m/s 
```

为此，我可以使用：

```
re.sub(r"([0-9])(?=[a-zA-Z])",r"\1*","5feet") 
```

但是，我也有如下数字：

```
23e-7
58.234e-200 
```

与上述模式匹配。

有没有办法让正则表达式以某种方式匹配第一组，但排除第二组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:55:01.010

您可以附加一个*否定*的前瞻断言`(?!...)`（与 的相反`(?=...)`）来排除这种情况：

```
re.sub(r"([0-9])(?=[a-zA-Z])(?!e[+-]?\d)",r"\1*","5feet") 
```

# ios - 为什么我的委托为空？

> ID：15316820
> 
> 赞同：3
> 
> 时间：2013-03-09T22:50:32.200
> 
> 标签：ios, objective-c, protocols

我正在使用 XCode 4.5.1 构建一个 iOS 6 应用程序

我正在尝试使用我的控制器可以用来检索图像的协议。但是，尽管我这样称呼它，但我的代表从未被调用过：

```
UIImage *image = [self.delegate mapViewController:self imageForAnnotation:aView.annotation]; 
```

当我调试这条线时，我可以看到`self.delegate`它为空，尽管我将 TableViewController 关联为其委托。

MapViewController.h：

```
@class MapViewController;
@protocol MapViewControllerDelegate <NSObject>
    - (UIImage *)mapViewController:(MapViewController *)sender imageForAnnotation:(id <MKAnnotation>)annotation;
@end

@interface MapViewController : UIViewController
@property (nonatomic, weak) id <MapViewControllerDelegate> delegate;
@end 
```

MapViewController.m：

```
@implementation MapViewController
@synthesize delegate = _delegate; 
```

我使用 TableViewController 作为`MapViewControllerDelegate`：

```
@interface RecentPhotosTableViewController () <MapViewControllerDelegate>

- (PhotoViewController *) splitViewPhotoViewController;
@end

@implementation RecentPhotosTableViewController
- (UIImage *)mapViewController:(MapViewController *)sender imageForAnnotation:(id <MKAnnotation>)annotation
{
    FlickrPhotoAnnotation *fpa = (FlickrPhotoAnnotation *)annotation;
    NSURL *url = [FlickrFetcher urlForPhoto:fpa.photo format:FlickrPhotoFormatSquare];
    NSData *data = [NSData dataWithContentsOfURL:url];
    return data ? [UIImage imageWithData:data] : nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:53:04.850

您的代码都没有显示您将任何内容设置为其他任何内容的代表。您声明了一些属性并采用了一些协议，但实际上没有一个将`delegate`属性设置`self`为值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:02:31.213

当然，我们没有您的所有源代码，但 Etan 和 CodaFi 似乎是正确的：您实例化`RecentPhotosTableViewController`对象并将该对象设置为 MapViewController 对象的委托的代码行在哪里？

我想我们期待看到类似的东西：

```
@implementation RecentPhotosTableViewController

- (void) someMethod {
    self.mapViewController = [[MapViewController alloc] init];
    self.mapViewController.delegate = self;
    ...
} 
```

您已经在 MapViewController 类中声明了一个委托属性，但您必须在实例化后将该委托属性实际设置为某个对象以使委托调用起作用。

（对不起，如果这太简单了，但看起来你在概念上遇到了一个非常基本的困难；如果我错过了重点，请道歉！）

# c# - 在单独的类中引用表单

> ID：15316821
> 
> 赞同：2
> 
> 时间：2013-03-09T22:51:06.177
> 
> 标签：c#, winforms

我在 Visual Studio 2012 (C#) 中有一个 Windows 窗体项目

我的项目中有一个名为 Gameboard 的类，我需要`this`在该类的方法中引用。如何在另一个类中引用表单？

编辑：@Sergey

```
public class Gameboard
{
    public Button[] buttonArray { get; set; }

    public Gameboard(int numberofButtons) //Constructor method that is referencing the App.config for the dimensions value to make the board
    {
        if (numberofButtons <= 0) 
            throw new ArgumentOutOfRangeException("Invalid Grid"); //throws an exception for an invalid grid size if dimensions is equal to or less than zero

        buttonArray = new Button[numberofButtons]; //creating an array the size of numberofButtons which is the dimensions value from App.config
        Font font = new Font("Times New Roman", 36.0f); //creates an instance of the Font class
        int sqrtY = (int) Math.Sqrt(numberofButtons);
        int z = 0; //Counter for array

        //Create the buttons for the form
        //Adds the buttons to the form first with null values then changes the .Text to ""
        for (int x = 0; x < sqrtY; x++)
        {
            for (int y = 0; y < sqrtY; y++)
            {
                buttonArray[z] = new Button();
                buttonArray[z].Font = font;
                buttonArray[z].Size = new System.Drawing.Size(100, 100);
                buttonArray[z].Location = new System.Drawing.Point(100*y, 100*x);
                buttonArray[z].Click += new EventHandler(button_click);
                z++; 
            }
        }//At the end of this loop, buttonArray contains a number of buttons equal to Dimensions all of which have a .Text property of ""
    } 
```

所以在 Gameboard 类之后还有很多其他的东西，但是对于构造函数我还需要传入一个 Form 实例吗？我只是对这个过程感到困惑。

以下是我如何被称为构造函数`Form_Load`

```
 private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            //Read the App.Config file to get the dimensions of the grid
            int dimensions = Convert.ToInt16(ConfigurationManager.AppSettings["dimensions"]);

            //Create the gameboard object with all the buttons needed
            Gameboard gb = new Gameboard(dimensions); //Calls the Gameboad constructor method

            //Add buttons to the form
            for (int x = 0; x < gb.buttonArray.Length; x++)
            {
                this.Controls.Add(gb.buttonArray[x]);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:56:18.620

将`Form`实例作为参数传递给`Gameboard`构造函数或方法调用。

即在表单代码中：

```
Gameboard gameboard = new Gameboard(this); 
```

或者

```
Gameboard gameboard = new Gameboard();
gameboard.MyMethod(this); 
```

在游戏板中：

```
public void MyMethod(Form mainForm)
{
    ... //Whatever
} 
```

**更新**

对于您的代码，它将是：

```
public class Gameboard
{
    ...
    public Gameboard(int numberofButtons, Form1 mainForm) //Constructor method that is referencing the App.config for the dimensions value to make the board
    {
        ... // init all buttons
        // for example
        for (int i = 0; i<buttonArray.Length; i++)
        {
            mainForm.Controls.Add(buttonArray[i]);
        }
    }
} 
```

在 Form1_Load 中：

```
private void Form1_Load(object sender, EventArgs e)
{
    try
    {
        //Read the App.Config file to get the dimensions of the grid
        int dimensions = Convert.ToInt16(ConfigurationManager.AppSettings["dimensions"]);

        //Create the gameboard object with all the buttons needed
        Gameboard gb = new Gameboard(dimensions, this); //Calls the Gameboad constructor method
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:57:30.167

通过将表单的实例作为对`GameBoard`类的引用传递。例如，在您的应用程序的启动方法中。

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        var mainForm = new Form1();
        var gameboard = new GameBoard(mainForm);
        Application.Run(mainForm);
    } 
```

# java - 在java中读取文本文件以形成迷宫

> ID：15316823
> 
> 赞同：-2
> 
> 时间：2013-03-09T22:51:12.257
> 
> 标签：java, bufferedreader

我对java很陌生，并且有以下文本文件我想变成一个迷宫：

```
*************************************************
*************************************************
*************************************************
************************S************************
*******************      *F    ******************
****************   * * *******    ***************
**************    *         * ***   *************
*************  *                 **   ***********
************  *    **    *         **  **********
**********   *      *   ***      **     *********
**********          **         **     *   *******
***************       **     **     *****  ******
*****************       ** **      ******* ******
******************        *  *   *********  *****
******* ************         * ************ *****
******      ********** *    * **********     ****
******  **    ********  *  * ********        ****
*****  ***      *******  *   ******    * ***  ***
*****  ** *       ****** *  ******     * ***  ***
****   ** *     ******** *  ********   *  **  ***
****   ** *    ** *******  ******* ** * * **   **
****  ** * *** **  ******  ******  **  *   *   **
****  **  * *  **********  ********** *** ***  **
****  *** **** ********* *  ********* **  ***  **
**** ****  ***  *******      *******  ** ****  **
**** ***** ***   ******       *****  *   ***** **
****  ****  * *    **               *** *****  **
****  ** **   ** *     *     *     * * ***** * **
****  *******     * * ********* * *   ** ****  **
**** ***** *****   * * * *** ***  ****** ***   **
****  ** **   *******   *** *  ******* **** * ***
*****  ***** * * ********* ***** **  * ****** ***
*****  **  *** *  *  **********   *  * * **   ***
****** ** * ** *  *  *   **   *   *  *** **  ****
******  ***  ***  *  *        ** ** *** ***  ****
******   ** *  ***** *    *    * ****   **  *****
*******   *** * ** ****   *   **** ** ***  ******
********   **** *  * **********   * ***   *******
*********   ****  *     *       * * *** *********
**********    *****  *        * ******  *********
*********** *    ***** ** ** ********** *********
************  **   **************  ** ***********
**************** *               **  ************
**************** *******      **** **************
******************  ****** ****  ****************
*************************************************
*************************************************
*************************************************
*************************************************
************************************************* 
```

问题是我每次尝试上传文件时都会收到“文件错误”消息（从第 202 行开始）。这是我的主要程序：

```
/*
 * MazeRunner.java
 *
 */
package mazerunner;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import javax.swing.Timer;
import javax.swing.JFileChooser;
import javax.swing.JPanel;

public class MazeRunner extends javax.swing.JFrame {

    public static final int wall = 0;
    public static final int open = 1;
    public static final int visited = 2;
    public static final int onpath = 3;
    public static final int start = 4;
    public static final int end = 5;
    public static final int pending = 6;
    public static final int mazeSize = 50;
    public static Color[] colors = {Color.BLACK, Color.WHITE, Color.MAGENTA, Color.ORANGE,
        Color.CYAN, Color.RED, Color.LIGHT_GRAY};
    JFileChooser fileChooser = new JFileChooser();
    public int maze[][] = new int[mazeSize][mazeSize];
    public Timer clock = new Timer(100, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            tick();
            mazePanel.repaint();
        }
    });

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MazeRunner().setVisible(true);
            }
        });
    }

    public class MyPanel extends JPanel {

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            for (int i = 0; i < mazeSize; i++) {
                for (int j = 0; j < mazeSize; j++) {
                    g.setColor(colors[maze[i][j]]);
                    g.fillRect(i, j, 12, 12);
                }
            }
        }
    }

    public MazeRunner() {
        initComponents();
        clock.start();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        mazePanel = new MyPanel();
        loadMaze = new javax.swing.JButton();
        collectionSelection = new javax.swing.JComboBox();
        title = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        mazePanel.setBackground(new java.awt.Color(204, 255, 204));
        mazePanel.setPreferredSize(new java.awt.Dimension(600, 600));

        org.jdesktop.layout.GroupLayout mazePanelLayout = new org.jdesktop.layout.GroupLayout(mazePanel);
        mazePanel.setLayout(mazePanelLayout);
        mazePanelLayout.setHorizontalGroup(
            mazePanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 600, Short.MAX_VALUE)
        );
        mazePanelLayout.setVerticalGroup(
            mazePanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 600, Short.MAX_VALUE)
        );

        loadMaze.setText("Load File");
        loadMaze.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loadMazeActionPerformed(evt);
            }
        });

        collectionSelection.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Stack", "Queue" }));

        title.setText("No File Loaded");

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .addContainerGap()
                        .add(mazePanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(layout.createSequentialGroup()
                        .add(54, 54, 54)
                        .add(title, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 351, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .add(28, 28, 28)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(loadMaze, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .add(46, 46, 46))
                    .add(layout.createSequentialGroup()
                        .add(collectionSelection, 0, 111, Short.MAX_VALUE)
                        .addContainerGap())))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(loadMaze)
                        .add(81, 81, 81)
                        .add(collectionSelection, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(layout.createSequentialGroup()
                        .add(title, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                        .add(mazePanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void loadMazeActionPerformed(java.awt.event.ActionEvent evt) {                                         

        int retval = fileChooser.showOpenDialog(this);
        if (retval == JFileChooser.APPROVE_OPTION) {
            File file = fileChooser.getSelectedFile();
            try {
                BufferedReader reader = new BufferedReader(new FileReader(file));
                String s;
                while ((s = reader.readLine()) != null) {
                    for (int i = 0; i < mazeSize; i++) {
                        for (int j = 0; j < mazeSize; j++) {

                            if (s.charAt(j) == '*') {
                                maze[i][j] = wall;
                            }
                            if (s.charAt(j) == ' ') {
                                maze[i][j] = open;
                            }
                            if (s.charAt(j) == 'F') {
                                maze[i][j] = end;
                            }
                            if (s.charAt(j) == 'S') {
                                maze[i][j] = start;
                            } else {
                                maze[i][j] = wall;
                            }
                        }
                    }
                }
            } catch (Exception e) {
                title.setText("File Error");
            }
        }

    }                                        
    // Variables declaration - do not modify                     
    private javax.swing.JComboBox collectionSelection;
    private javax.swing.JButton loadMaze;
    private javax.swing.JPanel mazePanel;
    private javax.swing.JLabel title;
    // End of variables declaration                   
} 
```

我认为问题出在这个代码段上，但无论我如何愚弄它，我都无法让它工作：

```
private void loadMazeActionPerformed(java.awt.event.ActionEvent evt) {                                         

            int retval = fileChooser.showOpenDialog(this);
            if (retval == JFileChooser.APPROVE_OPTION) {
                File file = fileChooser.getSelectedFile();
                try {
                    BufferedReader reader = new BufferedReader(new FileReader(file));
                    String s;
                    while ((s = reader.readLine()) != null) {
                        for (int i = 0; i < mazeSize; i++) {
                            for (int j = 0; j < mazeSize; j++) {

                                if (s.charAt(j) == '*') {
                                    maze[i][j] = wall;
                                }
                                if (s.charAt(j) == ' ') {
                                    maze[i][j] = open;
                                }
                                if (s.charAt(j) == 'F') {
                                    maze[i][j] = end;
                                }
                                if (s.charAt(j) == 'S') {
                                    maze[i][j] = start;
                                } else {
                                    maze[i][j] = wall;
                                }
                            }
                        }
                    }
                } catch (Exception e) {
                    title.setText("File Error");
                }
            }

        } 
```

这是生成的堆栈跟踪：

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 49
    at java.lang.String.charAt(String.java:686)
    at mazerunner.MazeRunner.loadMazeActionPerformed(MazeRunner.java:172)
    at mazerunner.MazeRunner.access$100(MazeRunner.java:19)
    at mazerunner.MazeRunner$3.actionPerformed(MazeRunner.java:111)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6382)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
    at java.awt.Component.processEvent(Component.java:6147)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4744)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2489)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:704)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:677)
    at java.awt.EventQueue$3.run(EventQueue.java:675)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:674)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

如果有人能指出我正确的方向，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:07:39.230

问题是你的迷宫大小实际上不是 50。首先，因为你从 0 开始计数，它需要比实际值小一。其次，您提供的文件的每一行中只有 49 个字符。只需将 mazesize 更改为 48 即可。您可能希望努力使您的代码更易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:08:32.440

问题出现在这一行：

```
if (s.charAt(j) == '*') 
```

该错误告诉您索引 ( `j`) 大于 ( ) 中的字符`String`数`s`。所以看看你如何设置的值`j`：

```
for (int j = 0; j < mazeSize; j++) 
```

我们可以推断`mazeSize`大于 的长度`s`。您应该为循环找出不同的结束条件。

*ps*我建议你学习如何调试自己的代码，这样你就可以自己发现这些问题。您的代码还有其他问题，我不会在这里讨论。`System.out.println()`通过在代码中添加语句或使用 IDE 中的调试器，您将在解决这些问题方面取得一些进展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T23:14:33.037

如前所述，问题来自文件的每一行不包含 50 个但 49 个（或 48 个）字符的事实。IMO 没有必要这样做，`for-statement`因为您已经在使用这行代码为代表迷宫的文件的每一行读取一个字符串：

```
String s;
while ((s = reader.readLine()) != null) { 
```

所以你只需要在这里做一个 for 语句，而不必随意选择你的字符串的大小，而是：

```
for(int i = 0 ; i < s.length() ; i++) {
    if(s.charAt(i) == '*') {
        // etc... 
```

所以最后你的陈述将是：

```
String s;

while ((s = reader.readLine()) != null) 
{
    for(int i = 0 ; i < s.length() ; i++) 
    {
        if(s.charAt(i) == '*') { maze[i][j] = wall; }
        if(s.charAt(j) == ' ') { maze[i][j] = open; }
        if(s.charAt(j) == 'F') { maze[i][j] = end; }
        if(s.charAt(j) == 'S') { maze[i][j] = start; } 
        else { maze[i][j] = wall; }
    }
} 
```

# lua - Lua require 不适用于目录

> ID：15316828
> 
> 赞同：2
> 
> 时间：2013-03-09T22:51:27.973
> 
> 标签：lua

我的 lua 教授给了我一些任务框架代码。该代码有几个将包添加到当前目录的 require 语句。我遇到的问题是其中许多 require 语句不需要 .lua 文件，它们需要一个包含许多 lua 文件的目录。例如，我有一个目录 qtwidget，其中有一个文件：init.lua

在骨架代码中，这个包是这样引用的：

```
local w = qtwidget.newwindow(width,height,"Energy surface") 
```

所以这一切都很好，但是当我运行骨架代码时，我收到以下错误：

```
dofile('/data/mar608/BigData/src/optim/demo2.lua')
error loading module 'qttorch' from file '/usr/local/pkg/torch/share/torch/lua/qttorch':
cannot read /usr/local/pkg/torch/share/torch/lua/qttorch: Is a directory
stack traceback:
[C]: ?
[C]: in function 'require'
/data/me/BigData/src/optim/demo2.lua:36: in main chunk
[C]: in function 'dofile'
[string "dofile('/data/mar608/BigData/src/optim/demo..."]:1: in main chunk
[C]: ? 
```

这是怎么回事？为什么lua不理解这个require语句？有什么方法需要我的 package.path 变量来解决这个问题吗？我需要能够为许多目录执行此操作（即指定目录名称并让 lua 将所有文件加载到一个名称中以供稍后引用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:20:20.427

1）你有`/usr/local/pkg/torch/share/torch/lua/qttorch/init.lua`吗？
2）你有`.../?/init.lua`进入`package.path`吗？
示例：`/usr/local/share/lua/5.2/?.lua;/usr/local/share/lua/5.2/?/init.lua;/usr/local/lib/lua/5.2/?.lua;/usr/local/lib/lua/5.2/?/init.lua;./?.lua`。

# themes - 大肆破坏，提交按钮添加类

> ID：15316829
> 
> 赞同：0
> 
> 时间：2013-03-09T22:51:44.753
> 
> 标签：themes, spree, deface

如何选择搜索提交按钮以使用污损对其应用类？

试过这个：

```
set_attributes 'form.input[type="submit"]'
attributes :class => 'saerchbox_submit' 
```

机器人似乎不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T16:17:45.480

您在**Deface::Override**块上缺少一些元素。

```
:set_attributes => 'input[type="submit"]',
:attributes => {:class => 'searchbox_submit'}) 
```

那应该可以正常工作。

我还建议您查看[Deface README](https://github.com/spree/deface/blob/master/README.markdown)，它比 Deface 使用的 Spree 更好，并且有很多示例。

# delphi - 如何从按钮控件中删除焦点矩形？

> ID：15316831
> 
> 赞同：6
> 
> 时间：2013-03-09T22:51:52.120
> 
> 标签：delphi, delphi-7

我需要删除一个按钮焦点矩形，因为`TBitBtn`单击按钮后它在字形上看起来很糟糕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T20:09:49.377

您可以创建一个 Interposer 类`TBitBtn`并覆盖它以`SetButtonStyle`防止设置它的内部`IsFocused`变量：

```
type
  TBitBtn = class(Buttons.TBitBtn)
  protected
    procedure SetButtonStyle(ADefault: Boolean); override;
  end;

...
implementation

procedure TBitBtn.SetButtonStyle(ADefault: Boolean);
begin
  inherited SetButtonStyle(False);
end; 
```

这将导致一个`TBitBtn`没有焦点的矩形。（使用 D7 测试 - 有/无主题支持）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T01:30:46.580

作为一种解决方法，您可以使用 a `TSpeedButton`，它不获取焦点，因此永远不会收到焦点矩形。

# nginx - 没有代理的 Tornado WebSocket 服务器

> ID：15316833
> 
> 赞同：1
> 
> 时间：2013-03-09T22:51:58.837
> 
> 标签：nginx, websocket, tornado

我有一个可以在我的本地机器上正常工作的龙卷风 websocket 服务器。但是当我将它部署到 Web 服务器并使用 supervisord 运行它时，我无法连接到 javascript websockets。我试图在防火墙中打开端口，但不起作用。我还尝试将代理与 nginx（和 tcp 模块）一起使用

```
tcp {
    upstream websockets {
        server abc.de.efg.hij:23581;
        check interval=3000 rise=2 fall=5 timeout=1000;
    }

    server {
        listen abc.de.efg.hij:45645;
        server_name _;

        tcp_nodelay on;
        proxy_pass websockets;
    }
} 
```

但也不起作用。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-07T18:32:39.840

您需要为 websocket 添加一个额外的“位置”部分，以确保正确传递升级标头：

```
location /YOUR_SOCKET_ENDPOINT/ {
    proxy_pass http://backend;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
} 
```

文档在这里： http: [//nginx.org/en/docs/http/websocket.html](http://nginx.org/en/docs/http/websocket.html)

# java - jfugue - 控制模式的音量

> ID：15316835
> 
> 赞同：3
> 
> 时间：2013-03-09T22:52:18.633
> 
> 标签：java, volume, jfugue

我正在尝试控制模式的音量。从文档中我发现：

```
X[Volume]=10200; 
```

他们提到的控制音量。我不确定如何使用它。我应该声明一些东西来使用它吗？据我了解，这是一个“控制器”功能。下面是我的代码。

```
import org.jfugue.*;

public class masterVolume {
    public static void main(String[] args)
    {
        Controller controller = new Controller();
        Player player = new Player();
        Pattern pattern = new Pattern("C D E F G A B");
        player.play(pattern);

        X[Volume]=10200; //error    
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T01:08:52.560

我认为你应该像这样将它传递给 MIDI 控制器：

```
 Pattern pattern = new Pattern(" X[Volume]=10200 C D E F G A B"); 
```

# objective-c - 在我的（第一次）CardGameViewController 上出现错误

> ID：15316837
> 
> 赞同：-1
> 
> 时间：2013-03-09T22:52:43.853
> 
> 标签：objective-c

我收到错误`incompatible pointer types assigning to Deck *__strong from PlayCards *`

我不确定为什么会这样。它在第一种方法中实现（甲板）：

```
#import "CardGameViewController.h"
#import "PlayingCards.h"

@interface CardGameViewController ()
@property (weak, nonatomic) IBOutlet UILabel *cardLabel;
@property (nonatomic) NSUInteger flipsCount;
@property (strong, nonatomic) Deck *deck;
@end

@implementation CardGameViewController

-(Deck *) deck {

    if (!_deck) _deck = [[PlayingCards alloc] init];
    return _deck;
}

-(void) setFlipsCount:(NSUInteger)flipsCount {

    _flipsCount = flipsCount;
    self.cardLabel.text = [NSString stringWithFormat:@"Flips:%d", self.flipsCount];

}

- (IBAction)flipCard:(UIButton *)sender {

    sender.selected = !sender.isSelected;

    self.flipsCount++;

}

@end 
```

这是头文件（这里什么都没有）：

```
#import <UIKit/UIKit.h>
//#import "Card.h"
//#import "Deck.h"
//#import "PlayingCards.h"

@interface CardGameViewController : UIViewController

@end 
```

并且从 Deck 类继承的 PlayingCard 类..

这是 PlayingCards.m

```
#import "PlayingCards.h"

@implementation PlayingCards

@synthesize suit = _suit;

//modifying the contents getter so it will return array with the ranks and rank+suit 
-(NSString *) contents {

    NSArray *cardsRank = [PlayingCards rankStrings];

    return [cardsRank[self.rank] stringByAppendingString:self.suit];
}

//creating a method to make sure we get validated suits
+(NSArray *) validSuit {

    return @[@"♠",@"♣",@"♥",@"♦"];
}

//creating calss method to validate the rank
+(NSArray *) rankStrings {

    return @[@"?",@"A",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"J",@"Q",@"K"];
}

//creating a new setter for suit to make sure we get the valitated suits, uding the validateSuit method
-(void) setSuit:(NSString *)suit {

    if ([[PlayingCards validSuit] containsObject:suit]) {
        _suit = suit;
    }
}

//creating new getter for suit to make sure its not empty
-(NSString *) suit {

    return _suit? _suit: @"?";
}

//creating a class method to make sure when user set the rank he will will
+(NSUInteger) maxRank {

    return [self rankStrings].count - 1;

}

//creating a new setter to the renk to make sure the rank is validates 
-(void) setRank:(NSUInteger)rank {

    if (rank <= [PlayingCards maxRank]) {

        _rank = rank;
    }
}

@end 
```

扑克牌.h

```
#import "Card.h"
#import "Deck.h"

@interface PlayingCards : Card

@property (strong, nonatomic) NSString *suit;
@property (nonatomic) NSUInteger rank;

+(NSArray *) validSuit;

+(NSUInteger) maxRank;

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:07:48.690

这一行：

```
if (!_deck) _deck = [[PlayingCards alloc] init]; 
```

应该：

```
if (!_deck) _deck = [[PlayingCardDeck alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:15:12.697

如果 Card 的父级`NSObject`是您所说的类，并且`PlayingCards`继承自 Card，那么您不能将实例分配给`PlayingCards`type 的变量`Deck*`。这就是编译器告诉你的。

如果你真的需要这样做，你必须写：

```
 if (!_deck) _deck = (Deck*)[[PlayingCards alloc] init]; 
```

It would only be valid because in Objective-C the implementation is given at runtime and which method of which class is called is only decided at runtime when the message is dispatched. However, this pattern is very unusual and you better be certain that PlayingCards is implementing all the selectors that might be called on a `Deck` instance. A better way would be to use protocols.

You can define a protocol and then use:

```
id <myProtocol> deck = [[PlayingCards alloc] init]; 
```

Put in the protocol all the selectors you need.

Why can't you use this ?

```
PlayingCards* deck = [[PlayingCards alloc] init]; 
```

# c++ - 如何在 AST 中使用 Boost Spirit 自动规则？

> ID：15316848
> 
> 赞同：4
> 
> 时间：2013-03-09T22:53:55.270
> 
> 标签：c++, boost, c++11, boost-spirit

编辑：当我想在另一个规则上使用它时，我扩展了 sehe 的示例以显示问题：http: [//liveworkspace.org/code/22lxL7](http://liveworkspace.org/code/22lxL7) $17

我正在尝试提高我的 Boost Spirit 解析器的性能，我看到自 C++11 以来，可以使用这样的自动规则：

```
auto comment = "/*" >> *(char_ - "*/") >> "*/"; 
```

（或使用 BOOST_AUTO 或 BOOST_SPIRIT_AUTO）。

我有一个这样的规则声明器：

```
qi::rule<lexer::Iterator, ast::SimpleType()> simple_type; 
```

并像这样定义：

```
simple_type %=
        const_
    >>  lexer.identifier; 
```

如果我用 auto 声明它，它会编译，但它不能在其他规则中用作 AST。

是否可以使用自动规则定义创建 AST 的规则？我也对在 Boost Spirit 中加速 AST 创建的其他方法感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:00:45.087

首先，我尝试了一个简单的示例，并使用一个简单的改编结构“它对我有用”：

```
struct fixed
{
    int integral;
    unsigned fractional;
};

BOOST_FUSION_ADAPT_STRUCT(fixed, (int, integral)(unsigned, fractional));

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, std::vector<fixed>(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        BOOST_SPIRIT_AUTO(qi, fixed_rule, lexeme [ int_ >> -('.' >> uint_ | attr(0u)) ]);
        start = *fixed_rule;

        BOOST_SPIRIT_DEBUG_NODE(start);
    }

  private:
    qi::rule<It, std::vector<fixed>(), Skipper> start;
}; 
```

这愉快地解析输入： http: **[//liveworkspace.org/code/22lxL7$1](http://liveworkspace.org/code/22lxL7$1)**

我认为您可能是指需要属性兼容性的地方，并且

*   `attr_cast` [（文档）](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/auxiliary/attr_cast.html)
*   `as<T>(parse_expr)` [（文档）](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/directive/as.html)

在这些情况下应该能够提供帮助*。*

有关 attr_cast （以及一般属性兼容性）的更多详细信息，请参阅此答案：**[String parser with boost variant recursive wrapper](https://stackoverflow.com/questions/11421430/string-parser-with-boost-variant-recursive-wrapper/11422737#11422737)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:22:45.953

没有“自动规则”之类的东西。当您自动捕获这样的表达式时，您将使用所有默认值来创建规则。所以这个“自动规则”的属性将完全是表达式的属性，没有属性转换。

如果您需要创建特殊的属性数据（即：您需要将传入的属性类型转换为您自己的数据），您必须使用规则或语义操作。

# iphone - iphone型号返回零？

> ID：15316850
> 
> 赞同：0
> 
> 时间：2013-03-09T22:54:03.397
> 
> 标签：iphone, ios, core-location, cllocationmanager

我的 iPhone 应用程序中有以下代码，它返回模型类型

```
size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *modelType = malloc(size);
sysctlbyname("hw.machine", modelType, &size, NULL, 0);
NSString *deviceModel = [NSString stringWithCString:modelType encoding:NSUTF8StringEncoding];
free(modelType); 
```

但在某些用户的设备上，我得到了零。返回 nil 的设备具有定位服务。

1) 什么可能导致 nil 被退回？

2) 越狱设备是否返回 nil？

3) 有没有更好的方法来检查 iDevices 上的模型类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:57:01.347

试试这个：

```
#import <sys/utsname.h>

- (NSString *)machine {
    struct utsname si;
    uname(&si);

    NSString *res = [NSString stringWithCString:si.machine encoding:NSUTF8StringEncoding];

    return res;
} 
```

我实际上将其添加为`UIDevice`.

这给出了各种“iPhone4,1”、“iPad2,4”类型值。

# cordova - CordovaLib (xCode 4.6) 出现错误

> ID：15316851
> 
> 赞同：2
> 
> 时间：2013-03-09T22:54:08.513
> 
> 标签：cordova, xcode4.6

这是给我错误的行

```
if ([cdvViewController supportsOrientation:currentOrientation]) { 
```

错误消息是：从枚举类型“UIDeviceOrientation”（又名“枚举 UIDeviceOrientation”）到不同枚举类型“UIInterfaceOrientation”（又名“枚举 UIINterfaceOrientation”）的隐式转换

这是完整的代码块：

```
 // helper method to check the orientation and start updating headings
- (void)startHeadingWithFilter:(CLLocationDegrees)filter
{
    if ([self.locationManager respondsToSelector:@selector(headingOrientation)]) {
        UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];
        if (currentOrientation != UIDeviceOrientationUnknown) {
            CDVViewController* cdvViewController = (CDVViewController*)self.viewController;

            if ([cdvViewController supportsOrientation:currentOrientation]) {
                self.locationManager.headingOrientation = (CLDeviceOrientation)currentOrientation;
                // FYI UIDeviceOrientation and CLDeviceOrientation enums are currently the same
            }
        }
    }
    self.locationManager.headingFilter = filter;
    [self.locationManager startUpdatingHeading];
    self.headingData.headingStatus = HEADINGSTARTING;
} 
```

# scala - 使用环境变量将 sbt scala 项目发布到 Artifactory

> ID：15316852
> 
> 赞同：3
> 
> 时间：2013-03-09T22:54:10.607
> 
> 标签：scala, playframework-2.0, sbt, jenkins-plugins, artifactory

我有的是这个。

我在 sbt 中定义了发布到工件的发布任务。我在 Jenkins 作业中将它作为 shell 构建步骤运行。

我想做的是包含 Jenkins Artifactory 插件在部署时包含的所有环境信息。我不知道我是否应该将它添加到 sbt 或者是否有某种方法可以将插件配置为使用 sbt 但自己进行发布。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:46:18.037

目前没有`sbt`和`Artifactory Jenkins`插件的集成，你可以做的是使用[插件的通用部署功能](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin#ArtifactoryPlugin-ConfiguringGeneric%28Freestyle%29Builds)。该插件将作为部署的一部分上传一个带有一些系统和环境变量的构建信息 json 对象。

因为插件不记录实际的构建过程，所以所有运行时的好东西都会被遗漏，但你可以通过使用注入它们`buildInfo.property.*`- 所有以这个前缀开头的属性都将添加到`build-info`.

# facebook - Facebook 在我们的网站上使用 TON 的 BW 和 facebookexternalhit

> ID：15316853
> 
> 赞同：1
> 
> 时间：2013-03-09T22:54:19.650
> 
> 标签：facebook, bandwidth

在过去的几周里，我们看到 BW 使用量大幅增加，但页面浏览量却没有。我终于研究了 access_logs 并在那里发现了大量这样的行：

```
 173.252.103.0 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-04/H_h90_110.jpg HTTP/1.1" 403 344 "-" "facebookexternalhit/1.1 (+h
ttp://www.facebook.com/externalhit_uatext.php)"
173.252.103.2 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-04/NT_audyssey_wireless_mediaa.jpg HTTP/1.1" 403 362 "-" "facebooke
xternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)"
173.252.103.3 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-05/TR_board.jpg HTTP/1.1" 403 343 "-" "facebookexternalhit/1.1 (+ht
tp://www.facebook.com/externalhit_uatext.php)"
173.252.103.6 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-03/LG%20Optimus%20G.jpg HTTP/1.1" 403 347 "-" "facebookexternalhit/
1.1 (+http://www.facebook.com/externalhit_uatext.php)"
173.252.103.4 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/review/2013-03-04/5-lit.jpg HTTP/1.1" 403 342 "-" "facebookexternalhit/1.1 (+htt
p://www.facebook.com/externalhit_uatext.php)"
173.252.103.2 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/review/2013-03-02/IMG_9546.JPG HTTP/1.1" 403 345 "-" "facebookexternalhit/1.1 (+
http://www.facebook.com/externalhit_uatext.php)"
173.252.103.1 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-05/deal0305.png HTTP/1.1" 403 343 "-" "facebookexternalhit/1.1 (+ht
tp://www.facebook.com/externalhit_uatext.php)"
173.252.103.4 - - [09/Mar/2013:17:48:19 -0500] "GET /files/imagecache/article_max_width/news/2013-03-05/H_Geforce.jpg HTTP/1.1" 403 344 "-" "facebookexternalhit/1.1 (+h
ttp://www.facebook.com/externalhit_uatext.php)" 
```

日复一日，字面上有几页。我不知道这里发生了什么，我真的不想使用 Apache 来阻止“facebookexternalhit”机器人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T19:30:47.030

我在我的服务器上遇到了同样的问题。我通过删除`og:url`元标记和更改元标记来解决它，`og:image`正如我在这里提到的：[https ://stackoverflow.com/a/24107181/3248313](https://stackoverflow.com/a/24107181/3248313)

# javascript - ko 未定义

> ID：15316855
> 
> 赞同：1
> 
> 时间：2013-03-09T22:54:27.800
> 
> 标签：javascript, knockout.js, requirejs

我正进入（状态：

> 未捕获的类型错误：无法调用未定义的方法“applyBindings”

我查看了 chrome 中的 Network 选项卡，我看到 knockout.js 已加载。我可以`window.ko`在控制台选项卡上输入并查看淘汰赛的代码

那么，为什么会出现错误？

配置.js：

```
var require = {
  baseUrl: "/scripts"
}; 
```

主.js：

```
require([
    "lib/knockout"
],
function (ko) {
    ko.applyBindings();
}); 
```

索引.html：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="scripts/config.js"></script>
    <script data-main="app/main.js" src="scripts/lib/require.js"></script>    
</head>
<body>
    <input type="text" data-bind="value: test" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:07:44.143

您应该在 requirejs 中查找 shim 配置并导出 ko 符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:02:39.413

尝试`ko`从回调签名中删除参数。

# r - 当您的数据是观察列表时，R中的卡方检验

> ID：15316856
> 
> 赞同：3
> 
> 时间：2013-03-09T22:54:35.847
> 
> 标签：r, statistics, chi-squared, pearson

当您的数据采用观察列表的形式时，是否可以计算**R中的卡方？**我的意思是，如果你知道十字架，就很容易得到卡方。例如，如果您进行一项调查并询问性别和真假问题，则只需四个数字即可计算卡方。相反，我有两列数据，每个受访者的答案。是否有可能从这种数据结构中得到卡方，还是我必须转换它？

如果我必须将它转换为**R**，有没有人知道另一种语言可以让我直接得到卡方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:58:11.297

如果您在将数据放入之前使用表格`chisq.test`应该没问题

```
# Create some fake 'raw' data
dat <- data.frame(gender = sample(c("M","F"), 100,rep = T), ans = as.logical(rbinom(100,1,.3)))
head(dat)
# just use table to get the data into the form needed
chisq.test(table(dat)) 
```

# asp.net - Breezejs 限制对实体的访问

> ID：15316858
> 
> 赞同：1
> 
> 时间：2013-03-09T22:54:47.860
> 
> 标签：asp.net, entity-framework, asp.net-web-api, odata, breeze

我最近开始研究 Breezejs。我正在开发一个将被多个客户使用的系统，我不能将一个客户的数据暴露给另一个客户。Breezejs 如何确保实现这一点的标准/推荐方式是什么？

说我的实体是

具有属性 ID、名称的客户

具有属性 Id、Email、CustomerId 的已注册电子邮件

当用户登录时，我将 CustomerId 保持在会话中，我不允许我的 UI 中的用户发送客户 ID，但是如何阻止恶意用户手工制作请求并访问其他客户信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:22:57.563

最简单的方法是在具有客户 ID 限制的服务器上返回您的 IQueryables。像这样的东西：

```
[BreezeController]
public class NorthwindIBModelController : ApiController {
    ...
  // initialize this from your session data  
  private var currentCustomerId;

  [HttpGet]
  public IQueryable<Customer> Customers() {
    return ContextProvider.Context.Customers.Where(cust => cust.Id == currentCustomerId);
  }

  [HttpGet]
  public IQueryable<Email> RegisteredEmails() {
    return ContextProvider.Context.Emails.Where(email => email.CustomerId == currentCustomerId);
  }
} 
```

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:34:35.813

这当然是最简单的，但是，它无法防止有人删除/更新相同的受限条目，因为在保存过程中不考虑此查询。只有 EntityType 被发送到 SaveChanges。

# c++ - Python 不调用外部程序第 3 部分

> ID：15316860
> 
> 赞同：2
> 
> 时间：2013-03-09T22:54:49.093
> 
> 标签：c++, python, postgresql

我在尝试从 postgres 9.2 数据库中的触发器生成的 python 程序运行外部程序时遇到问题。触发器起作用。它写入文件。我曾尝试只运行外部程序，但权限不允许它运行。我能够创建一个文件夹（使用 os.system(“mkdir”) ）。该文件夹的所有者是 NETWORK SERVICE。

我需要运行一个名为 sdktest 的程序。当我尝试运行它时，没有响应发生，所以我认为这意味着 python 程序没有足够的权限（具有 NETWORK SERVICE 的所有者）来运行它。

我一直在让我的程序将它需要的文件复制到该目录中，以便它们具有正确的权限，并且在某种程度上可以工作，但是我需要运行的程序是最后一个程序，它没有运行，因为它没有足够的权限。

我的 python 程序运行一个名为 PG_QB_Connector 的 C++ 程序，它调用 sdktest。

有什么办法可以将流程的所有者更改为“正常”所有者？有一个更好的方法吗？基本上我只需要让这个 C++ 程序有足够的权限才能正确运行。

顺便说一句，当我手动运行 C++ 程序时，运行 sdktest 程序的行运行正确，但是，当我从 postgres/python 运行它时，它什么也没做......

我有 Windows 7，python 3.2。我问的其他 2 个问题位于 [此处](https://stackoverflow.com/questions/14278109/python-not-calling-external-program) 和 [此处](https://stackoverflow.com/questions/14364928/python-not-calling-an-external-program-part-2)

蟒蛇程序：

```
CREATE or replace FUNCTION scalesmyone (thename text)
RETURNS int
AS $$
a=5
f = open('C:\\JUNK\\frompython.txt','w')
f.write(thename)
f.close()
import os
os.system('"mkdir C:\\TEMPWITHOWNER"')
os.system('"mkdir C:\\TEMPWITHOWNER\\addcustomer"')
os.system('"copy  C:\\JUNK\\junk.txt C:\\TEMPWITHOWNER\\addcustomer"')
os.system('"copy  C:\\BATfiles\\junk6.txt   C:\\TEMPWITHOWNER\\addcustomer"')
os.system('"copy  C:\\BATfiles\\run_addcust.bat   C:\\TEMPWITHOWNER\\addcustomer"')
os.system('"copy  C:\\Workfiles\\PG_QB_Connector.exe  C:\\TEMPWITHOWNER\\addcustomer"')
os.system('"copy  C:\\Workfiles\\sdktest.exe  C:\\TEMPWITHOWNER\\addcustomer"')
import subprocess
return_code = subprocess.call(["C:\\TEMPWITHOWNER\\addcustomer\\PG_QB_Connector.exe", '"hello"'])
$$ LANGUAGE plpython3u; 
```

从python程序调用并调用sdktest.exe的C++程序如下

```
command = "copy C:\\Workfiles\\AddCustomerFROMWEB.xml C:\\TEMPWITHOWNER\\addcustomer\\AddCustomerFROMWEB.xml";
system(command.c_str());

//everything  except for the qb file is in my local folder
command = "C:\\TEMPWITHOWNER\\addcustomer\\sdktest.exe  \"C:\\Users\\Public\\Documents\\Intuit\\QuickBooks\\Company Files\\Shain Software.qbw\"  C:\\TEMPWITHOWNER\\addcustomer\\AddCustomerFROMWEB.xml C:\\TEMPWITHOWNER\\addcustomer\\outputfromsdktestofaddcust.xml";
system(command.c_str()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:25:30.293

听起来您想从 PostgreSQL 触发器或函数中调用命令行程序。

一个通常更好的选择是让触发器发送一个`NOTIFY`并有一个带有 PostgreSQL 连接的进程`LISTEN`用于通知。当收到通知时，该进程可以启动您的程序。这是我推荐的方法；它更简洁，这意味着您的程序不必在 PostgreSQL 的用户 ID 下运行。见[`NOTIFY`](http://www.postgresql.org/docs/current/static/sql-notify.html)和[`LISTEN`](http://www.postgresql.org/docs/current/static/sql-listen.html)。

如果你真的需要从 Pg 内部运行命令：

您可以[`PL/Pythonu`](http://www.postgresql.org/docs/current/static/plpython.html)使用`os.system`或`subprocess.check_call`; [`PL/Perlu`](http://www.postgresql.org/docs/current/static/plperl.html)与`system()`; 等等。如果需要，所有这些都可以从 Pg 内部运行命令。您不能直接从 PostgreSQL 调用程序，您需要使用一种“不受信任”（意味着完全特权，而不是沙盒）过程语言来调用外部可执行文件。PL/TCL 也可以做到。

**更新**：

如上所示，您的 Python 代码有几个问题：

*   在 Python 中使用`os.system`复制文件是错误的。使用`shutil`库：[http](http://docs.python.org/3/library/shutil.html) ://docs.python.org/3/library/shutil.html复制文件，以及`os.mkdir`创建目录的简单命令。
*   双层引用看起来不对；您不是要引用每个参数而不是整个命令吗？你应该使用`subprocess.call`而不是`os.system`反正。
*   您的最终`subprocess.call`调用似乎正常，但无法检查错误代码，因此您永远不会知道它是否出错；你应该`subprocess.check_call`改用。

C++ 代码似乎也无法检查`system()`调用中的错误，因此您永远不会知道它运行的命令是否失败。

与 Python 代码一样，使用`copy`shell 命令在 C++ 中复制文件通常是错误的。Microsoft Windows[`CopyFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363851%28v=vs.85%29.aspx)为此提供了功能；其他平台上存在等价物或替代品，您也可以使用可移植但效率较低的流复制。

# html - div中元素上的z-index问题，溢出隐藏

> ID：15316864
> 
> 赞同：3
> 
> 时间：2013-03-09T22:55:40.433
> 
> 标签：html, css

我有一个奇怪的问题，即元素的 z-index 没有设置，即使我在其上放置了 position:absolute。父元素有溢出：隐藏集。

看一个我的意思的例子：

1.  访问[http://www.berrisforda.com/](http://www.berrisforda.com/)
2.  在工作搜索选项卡上有一个自定义选择/下拉悬停在它上面
3.  请注意，它被容器切断了，它实际上在它下面延伸，但容器有溢出：隐藏集

我正在尝试在其上设置 z-index，但没有任何运气

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T23:03:52.310

在这种情况下，`z-index`不会帮助你。如果您有`overflow:hidden`父元素，则该元素边界框之外的任何子元素都将被隐藏。你有三个选择：

1.  移动下拉元素，使其不再是该元素的子`overflow:hidden`元素。
2.  使下拉列表滚动。
3.  删除`overflow:hidden`样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:02:43.897

将 .tab 上的高度调整为更短...

```
ul#output li.tab {
position: absolute;
width: 684px;
height: 345px; /*see how I changed this value*/
background-color: #fff;
} 
```

并从 #feature-list{} 中删除溢出：隐藏

并在 .dropdown dd ul {} 上设置 z-index:1

**也请执行以下步骤来修复页脚....**

对不起伯特 - 我最初犯了一个错误 - 这是最后一步

从#footer 中删除 position:relative 和 z-index

那你应该好好去！

# php - 使用 PHP 在打印的 XML 文件中格式化 XML 输出

> ID：15316869
> 
> 赞同：0
> 
> 时间：2013-03-09T22:56:03.087
> 
> 标签：php, xml, format, output

我正在尝试在我的根文件夹中输出一个 xml 文件。该文件已创建，但所有元素及其内容都保存在一条直线中，如下所示：

```
*<?xml version="1.0" encoding="UTF-8"?> <letterA>   <lemma>    <word>word1</word>      <textfiles>title of file</textfiles> <videofiles>video.mp3</videofiles>  </lemma> 
```

* 但我想要这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<letterA>
  <lemma>
    <word>song1.mp3</word>
    <textfiles>title of file</textfiles>
    <videofiles>video.mp3</videofiles>
  </lemma>
</letterA> 
```

这是我的代码：

```
<?php    
/* create a dom document with encoding utf8 */
$domtree = new DOMDocument('1.0', 'UTF-8');
$domtree->preserveWhiteSpace = true; 
$domtree->setIndent = (1);

   /* $domtree->formatOutput = (true); */

/* create the root element of the xml tree */
$letterARoot = $domtree->createElement("letterA");
/* append it to the document created */
$letterARoot = $domtree->appendChild($letterARoot);

$alemma = $domtree->createElement("lemma");
$alemma = $letterARoot->appendChild($alemma);

/* you should enclose the following two lines in a cicle */
$alemma->appendChild($domtree->createElement('word','word1));
$alemma->appendChild($domtree->createElement('textfiles','title of file'));
$alemma->appendChild($domtree->createElement('videofiles','video.mp3'));

/* save the file in my root folder */
$domtree->save("firstFile.xml") or die("Error"); 

/* get the xml printed */
/* echo $domtree->saveXML(); */
?> 
```

如果有人可以提供帮助，我将不胜感激。正如你所看到的，我使用了 'preserveWhiteSpace' 和 'setIndent' 但没有用。我也尝试过再次使用'formatOutput'。我担心的不是我的 xml 在浏览器上的外观，而是它在实际文件中的外观（即上面示例中的 firstFile.xml）。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:15:48.733

You should add

```
$domtree->formatOutput = true; 
```

if you want it pretty printed. See [formatOutput](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.formatoutput) for details.

In one of the comments ([Jochem Blok](http://www.php.net/manual/en/class.domdocument.php#83210)), it is suggested to turn `preserveWhiteSpace` off

```
$domtree->preserveWhiteSpace = false; 
```

# microcontroller - 在微控制器上求解 ODE

> ID：15316871
> 
> 赞同：1
> 
> 时间：2013-03-09T22:56:29.327
> 
> 标签：microcontroller, differential-equations, ode

我想解决微控制器上的两个 ODE 一阶问题。必须每 100 毫秒评估一次

```
x'=-k_{1}\cdot (x-x_{ref})\cdot e^{-b\cdot ((x-x_{obs})^{2}+(y-y_{obs})^{2})}
y'=-k_{1}\cdot (y-y_{ref})\cdot e^{-b\cdot ((x-x_{obs})^{2}+(y-y_{obs})^{2})} 
```

基本上我想到了使用欧拉积分（Runge-Kute I）

```
y(k+1)=y(k)+f(k,y(k))*dT 
```

我希望误差小于 0.001。我如何确定在达到该错误率之前应该运行多少次迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:49:50.123

我猜`x`和`y`以及`x_{ref}`, `y_{ref}`,`x_{obs}`是`y_{obs}`时间相关的。这限制了您可以使用的 ODE 求解器的数量。所以它只能是欧拉方法和 2 阶龙格库塔方法（我忘了名字），它只在时间点`x(t)`x `x(t+dT)´,`(t+2dT)`，...

您可以通过这两种方法使用经典的步长控制。那就是你用欧拉方法一步一步，用RK-II方法一步一步。这两个步骤之间的差异是错误的指标，可用于经典步长控制。查看数字食谱以获取更多详细信息。

# actionscript-3 - (AS3) 在下面的代码中添加活动状态按钮代码

> ID：15316873
> 
> 赞同：0
> 
> 时间：2013-03-09T22:56:49.540
> 
> 标签：actionscript-3, flash, button

我正在努力弄清楚如何为按钮/s 编写活动状态（显示当前页面）这是我到目前为止所拥有的：

```
stop();

  function handleClick (p_event:MouseEvent) :void
  {
    if(p_event.target == logo_btn)
    {
        gotoAndStop(1, "Home");
    }
    if(p_event.target == home_btn)
    {
        gotoAndStop(1, "Home");
    }
    if(p_event.target == portfolio_btn)
    {
        gotoAndStop(1, "Portfolio");
    }
    if(p_event.target == press_btn)
    {
        gotoAndStop(1, "Press");
    }
    if(p_event.target == links_btn)
    {
        gotoAndStop(1, "Links");
    }
    if(p_event.target == contact_btn)
    {
        gotoAndStop(1, "Contact");
    }
  }

  stop();

  home_btn.addEventListener(MouseEvent.CLICK, handleClick);
  portfolio_btn.addEventListener(MouseEvent.CLICK, handleClick);
  press_btn.addEventListener(MouseEvent.CLICK, handleClick);
  links_btn.addEventListener(MouseEvent.CLICK, handleClick);
  contact_btn.addEventListener(MouseEvent.CLICK, handleClick); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:18:05.380

首先必须重新创建一个有 2 帧的 Button，1 帧是非活动的 ui 2 帧是活动的 ui。他们也是 1 帧`stop();`脚本。在主时间轴中声明临时变量，并将当前选定的按钮存储在 MouseClick 处理程序中。下一个 Active / InActive 任​​务执行。

```
var selectedButton:MovieClip;
function handleClick(p_event:MouseEvent):void
{
    var clickedClip:MovieClip = p_event.target as MovieClip;

    if (clickedClip == logo_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = logo_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Home");
    }
    else if (clickedClip == home_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = home_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Home");
    }
    else if (clickedClip == portfolio_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = portfolio_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Portfolio");
    }
    else if (clickedClip == press_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = press_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Press");
    }
    else if (clickedClip == links_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = links_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Links");
    }
    else if (clickedClip == contact_btn)
    {
        if (selectedButton)
            selectedButton.gotoAndStop(1);
        selectedButton = contact_btn;
        selectedButton.gotoAndStop(2);
        gotoAndStop(1, "Contact");
    }
} 
```

这是我的示例代码：[ActiveButtonTest](http://www.fileswap.com/dl/y3NecuSsUA/)

# wpf - Windows Phone 应用程序中的图像模糊

> ID：15316880
> 
> 赞同：0
> 
> 时间：2013-03-09T22:57:30.117
> 
> 标签：wpf, image, windows-phone-7, scale

我正在为 Windows Phone 7.1 编写程序并使用组件图像，我在其中拉伸图像 - 它变得模糊。我已经研究过此类问题 - 似乎 UseLayoutRounding="True" 应该有所帮助，但它对我没有帮助。这是代码：

```
<Grid x:Name="LayoutRoot" UseLayoutRounding="True" Background="Transparent">
    <controls:Panorama x:Name="mainPanorama" Title="life rpg" SelectionChanged="Panorama_SelectionChanged_1">
        <controls:Panorama.Background>
            <ImageBrush ImageSource="Imgs/bg.jpg"/>
        </controls:Panorama.Background>
        <controls:PanoramaItem Header="main" Tag="main" >
            <StackPanel Name="mainPanel">
                <StackPanel Orientation="Horizontal">
                    <Image HorizontalAlignment="Left" Height="165" VerticalAlignment="Top" Width="165" Source="picture.png" Margin="0 0 20 0"/>
                    <Image Name="swordImg"  HorizontalAlignment="Left" Height="50" VerticalAlignment="Top" Width="50" Source="Imgs/swords/swordLVL1.png" Stretch="Fill" />
                    <Image Name="armorImg" HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="100"  Source="Imgs/armors/armorLVL1.png" Stretch="Uniform"  />
                    <Image Name="shieldImg" HorizontalAlignment="Left" Height="150" VerticalAlignment="Top" Width="150" Source="Imgs/shields/shieldLVL1.png" Stretch="UniformToFill" />                        
                </StackPanel>
<!--LayoutRoot is the root grid where all page content is placed--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:49:07.943

鉴于图像的低分辨率（鉴于它是光栅格式而不是矢量），您无法在不损失质量的情况下对其进行放大。这里没有渲染选项可以帮助您。

背景的 25x25 图像在`Panorama`质量方面绝对不够。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:36:45.217

如果以大尺寸显示图像的质量很重要，那么您有 2 个选项。

1.  从一张大图开始。位图图像在变大时会失真。这将根据 JPEG 文件中使用的压缩/质量设置进行放大。

2.  使用矢量格式的图像。

# python - python中的连接列表

> ID：15316886
> 
> 赞同：-4
> 
> 时间：2013-03-09T22:58:40.200
> 
> 标签：python

我是 python 新手，想接受这个

```
K=[['d','o','o','r'], ['s','t','o','p']] 
```

打印：

```
door, stop 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T22:59:33.720

怎么样：

`', '.join(''.join(x) for x in K)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:04:42.673

使用`str.join()`和`map()`：

```
In [26]: K=[['d','o','o','r'], ['s','t','o','p']]

In [27]: ", ".join(map("".join,K))
Out[27]: 'door, stop' 
```

> S.join(iterable) -> 字符串
> 
> 返回一个字符串，它是可迭代的字符串的串联。元素之间的分隔符是 S。

# python - 奇怪的 Python 3 错误

> ID：15316888
> 
> 赞同：0
> 
> 时间：2013-03-09T22:59:08.670
> 
> 标签：python, attributes, python-idle

我很确定所有代码都是正确的；我相信这个错误可能是安装文件的错误。

```
a,b = input('Enter in format number^power: ').split('^')
a = int (a)
b = int (b)
result = a**b
print (result)
input() 
```

当我在 IDLE 中运行它时，它运行良好；但是，如果我在终端中运行脚本，它会给我这个错误：

```
Traceback (most recent call last):
File "C:\Users\xxx\Desktop\calculator.py", line 1, in <module>
a,b = input('Enter a range: ').split('^')
AttributeError: 'int' object has no attribute 'split' 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:01:24.120

您正在使用 python 2 运行它。

在 python 2 中，`input`在返回之前评估输入，因此如果您按照提示进行操作，它将返回一个 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:08:21.910

如果它在 IDLE 中正常工作但在终端中失败，那么很可能 python 文件的标准处理程序没有设置为 Python 3 而是 Python 2。如果您直接调用脚本，即使用 just `./scriptname.py`，那么[*shebang*](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)将确定哪个Python 解析器将用于执行脚本。

要使用 Python 3，请在文件的最开头添加以下 shebang 行：

```
#!/usr/bin/env python3 
```

[请注意，根据PEP-397](http://www.python.org/dev/peps/pep-0397/)，Windows 也支持此功能。

# ajax - Ajax POST 表单到 Django 数据问题

> ID：15316892
> 
> 赞同：1
> 
> 时间：2013-03-09T22:59:26.483
> 
> 标签：ajax, django, forms, post, login

对此感到沮丧了几天，想知道是否有人可以提供帮助。我是 Ajax 的新手，并试图从登录表单中发布数据以登录 Django (Django Userena)。但是，当我尝试发布数据时，alert() 将数据中的错误显示为 [object object]。我什至看不到网络错误代码，因为 POST 在运行之前就被取消了。

有没有办法只发送数据而不是我认为它发送的整个 JSON 数组，或者我需要在 Django 视图后端解析它。明智地完成此代码的最佳方法是什么？非常感谢！

下面是相关代码：

**阿贾克斯代码：**

```
$('#login').submit(function(){

    $.ajax({

        url: 'http://127.0.0.1:8000/accounts/signin/',
        type: 'POST',
        data: {
            csrfmiddlewaretoken: '{{csrf_token}}',
            identification: $("#id_identification").val(),
            password: $("#id_password").val(),
            },
        success: function() {
            alert('Test');
            $('#datadisplay').append("<h2>It worked</h2>");
        },  
        error: function(errorThrown){
            console.log(errorThrown);
            alert('Error');
            alert(errorThrown);
        }
    });
}); 
```

**Index.html 上的表单**

```
<form name="login" id="login" action="">
   <fieldset>
           <label for="id_identification">Email or username</label>
           <input class="required" id="id_identification" maxlength="75" name="identification" type="text" />

           <label for="id_password">Password</label>
           <input class="required" id="id_password" name="password" type="password" />

           <input type="submit" name="submit" class="loginbutton" value="Login" />
       </fieldset>
   </form> 
```

**来自 Django-Userena 的 views.py**

```
@secure_required
def signin(request, auth_form=AuthenticationForm,
           template_name='userena/signin_form.html',
           redirect_field_name=REDIRECT_FIELD_NAME,
           redirect_signin_function=signin_redirect, extra_context=None):
    """
    Signin using email or username with password.

    Signs a user in by combining email/username with password. If the
    combination is correct and the user :func:`is_active` the
    :func:`redirect_signin_function` is called with the arguments
    ``REDIRECT_FIELD_NAME`` and an instance of the :class:`User` who is is
    trying the login. The returned value of the function will be the URL that
    is redirected to.

    A user can also select to be remembered for ``USERENA_REMEMBER_DAYS``.

    :param auth_form:
        Form to use for signing the user in. Defaults to the
        :class:`AuthenticationForm` supplied by userena.

    :param template_name:
        String defining the name of the template to use. Defaults to
        ``userena/signin_form.html``.

    :param redirect_field_name:
        Form field name which contains the value for a redirect to the
        succeeding page. Defaults to ``next`` and is set in
        ``REDIRECT_FIELD_NAME`` setting.

    :param redirect_signin_function:
        Function which handles the redirect. This functions gets the value of
        ``REDIRECT_FIELD_NAME`` and the :class:`User` who has logged in. It
        must return a string which specifies the URI to redirect to.

    :param extra_context:
        A dictionary containing extra variables that should be passed to the
        rendered template. The ``form`` key is always the ``auth_form``.

    **Context**

    ``form``
        Form used for authentication supplied by ``auth_form``.

    """
    form = auth_form()

    if request.method == 'POST':
        form = auth_form(request.POST, request.FILES)
        if form.is_valid():
            #identification, password, remember_me = (form.cleaned_data['identification'],
                                                     #form.cleaned_data['password'],
                                                    #form.cleaned_data['remember_me'])
            identification, password = (form.cleaned_data['identification'], form.cleaned_data['password'])     

            user = authenticate(identification=identification,
                                password=password)
            if user.is_active:
                login(request, user)
                if remember_me:
                    request.session.set_expiry(userena_settings.USERENA_REMEMBER_ME_DAYS[1] * 86400)
                else: request.session.set_expiry(0)

                if userena_settings.USERENA_USE_MESSAGES:
                    messages.success(request, _('You have been signed in.'),
                                     fail_silently=True)

                # Whereto now?
                redirect_to = redirect_signin_function(
                    request.REQUEST.get(redirect_field_name), user)
                return HttpResponseRedirect(redirect_to)
            else:
                return redirect(reverse('userena_disabled',
                                        kwargs={'username': user.username}))

    if not extra_context: extra_context = dict()
    extra_context.update({
        'form': form,
        'next': request.REQUEST.get(redirect_field_name),
    })
    return ExtraContextTemplateView.as_view(template_name=template_name,
                                            extra_context=extra_context)(request) 
```

**认证表格**

```
class AuthenticationForm(forms.Form):
    """
    A custom form where the identification can be a e-mail address or username.

    """
    identification = identification_field_factory(_(u"Email or username"),
                                                  _(u"Either supply us with your email or username."))
    password = forms.CharField(label=_("Password"),
                               widget=forms.PasswordInput(attrs=attrs_dict, render_value=False))
    remember_me = forms.BooleanField(widget=forms.CheckboxInput(),
                                     required=False,
                                     label=_(u'Remember me for %(days)s') % {'days': _(userena_settings.USERENA_REMEMBER_ME_DAYS[0])})

    def __init__(self, *args, **kwargs):
        """ A custom init because we need to change the label if no usernames is used """
        super(AuthenticationForm, self).__init__(*args, **kwargs)
        # Dirty hack, somehow the label doesn't get translated without declaring
        # it again here.
        self.fields['remember_me'].label = _(u'Remember me for %(days)s') % {'days': _(userena_settings.USERENA_REMEMBER_ME_DAYS[0])}
        if userena_settings.USERENA_WITHOUT_USERNAMES:
            self.fields['identification'] = identification_field_factory(_(u"Email"),
                                                                         _(u"Please supply your email."))

    def clean(self):
        """
        Checks for the identification and password.

        If the combination can't be found will raise an invalid sign in error.

        """
        identification = self.cleaned_data.get('identification')
        password = self.cleaned_data.get('password')

        if identification and password:
            user = authenticate(identification=identification, password=password)
            if user is None:
                raise forms.ValidationError(_(u"Please enter a correct username or email and password. Note that both fields are case-sensitive."))
        return self.cleaned_data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:48:33.587

这些是我在测试代码时看到的错误（不是全部，我认为还有更多）：

1.  如果您没有在模板中使用 AuthenticationForm()，您如何登录。您在模板中的表单代码是不同的。
2.  您没有将 method="POST" 放入表单中，这会导致 GET 响应而不是 POST。
3.  你忘了把 {% csrf_token %} 放在你的模板表单中
4.  在您的 views.py 中，**user = authenticate(identification=identification, password=password)**必须是**user = authenticate(username=identification, password=password)**
5.  在您的 forms.py 中，**user = authenticate(identification=identification, password=password)**必须是**user = authenticate(username=identification, password=password)**
6.  您的 ajax 代码没有效果，这就是您无法抛出错误的原因。我认为你在 ajax 中遗漏了一些东西。
7.  要获取引发的错误的详细信息：

    ```
    error: function(ts){
        //console.log(errorThrown);
        //alert('Error');
        alert(ts.responseText);
        } 
    ```

8.  你的ajax数据必须有''：

    ```
    data: {
        'csrfmiddlewaretoken': '{{csrf_token}}',
        'identification': $("#id_identification").val(),
        'password': $("#id_password").val(),
        }, 
    ```

9.  您不必像这样详细说明您的网址

    ```
    url: 'http://127.0.0.1:8000/accounts/signin/', 
    ```

    这将导致

    ```
    "http://127.0.0.1:8000/http://127.0.0.1:8000/accounts/signin/" 
    ```

    肯定是

    ```
    url: '/accounts/signin/', 
    ```

    并且不要忘记放

    ```
    contentType: "application/json;charset=utf-8",
    dataType: "json", 
    ```

还有更多错误，直到现在我无法成功登录。

# java - 在实时图中用不同的值更新 JLabel

> ID：15316893
> 
> 赞同：0
> 
> 时间：2013-03-09T22:59:33.207
> 
> 标签：java, swing, real-time, jfreechart, jlabel

我正在制作一个实时图表，其中包含通过串行通信传入的值。我有传入的数据，称为我的“摄氏度”值。我在 JLabel 的 GUI 上显示它，所以值不断变化。我遇到的问题是我想要有可以将 JLabel 中的值更改为华氏度或返回摄氏度的按钮。所以现在，我让我的 actionPerformed 调用 updateTemp() 方法，这样它就会在程序运行时立即更新 JLabel。对于我认为需要更改的 3 种方法，我有下面的代码。

```
public void actionPerformed(final ActionEvent e) {
    updateTempC();
    final Double n = serial.x;
    series.addOrUpdate(new Millisecond(), n);
    Object source = e.getSource();

    if (e.getSource() == buttonF){
     degree.setText("degrees F");
     updateTempF();
   }

    if (e.getSource() == buttonC){
     degree.setText("degrees C");
     updateTempC();
    }
}

public void updateTempF(){
    int step1;
    int step2;
    int step3;
    String indata = serial.temp;
    int temp = Integer.parseInt(indata);
    step1 = temp*9;
    step2 = step1/5;
    step3 = step2 + 32;
    String indata1 = Integer.toString(step3);
    this.realtime.setText(indata1);
}

public void updateTempC(){
    String indata = serial.temp;
    this.realtime.setText(indata);
} 
```

现在，当我按下 JButton 以更改为华氏温度时，它会更改一秒钟，但随后会立即返回显示摄氏度，因为图形每秒都会更新，并且 actionPerformed 将立即返回调用 updateTempC()。当我按下 Fahr 的按钮时，我想知道怎么做。或 Cels.，它会在剩下的时间里改变。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:01:17.440

你应该有一个像`boolean fahrenheitTemp`. 单击时`buttonF`，`fahrenheitTemp`将设置为`true`。单击时`buttonC`，`fahrenheitTemp`将设置为`false`。如果`fahrenheitTemp`是`true`，调用`updateTempF()`，否则调用`updateTempC()`。（另外，你有一个`Object source`变量，但你从不使用它。）

尝试修改你`actionPerformed(ActionEvent)`的东西是这样的：

```
boolean fahrenheitTemp = false;
public void actionPerformed(final ActionEvent e) {
    if (fahrenheitTemp) {
        updateTempF();
    } else {
        updateTempC();
    }
    final Double n = serial.x;
    series.addOrUpdate(new Millisecond(), n);
    Object source = e.getSource();
    if (source == buttonF) {
        degree.setText("degrees F");
        fahrenheitTemp = true;
        updateTempF();
    } else if (source == buttonC) {
        degree.setText("degrees C");
        fahrenheitTemp = false;
        updateTempC();
    }
} 
```

# c# - 为什么这会导致 CS0695？

> ID：15316898
> 
> 赞同：10
> 
> 时间：2013-03-09T22:59:57.183
> 
> 标签：c#, generics, compiler-errors

```
public interface PipelineElement<in TIn, out TOut>
{
    IEnumerable<TOut> Run(IEnumerable<TIn> input, Action<Error> errorReporter);
}

public interface Stage
{
}

public abstract class PipelineElementBase<TIn, TOut> : PipelineElement<object, object>,
    PipelineElement<TIn, TOut> where TIn : Stage where TOut : Stage
{
    IEnumerable<object> PipelineElement<object, object>.Run(IEnumerable<object> input, Action<Error> errorReporter)
    {
        return this.Run(input.Cast<TIn>(), errorReporter).Cast<object>();
    }

    public abstract IEnumerable<TOut> Run(IEnumerable<TIn> input, Action<Error> errorReporter);
} 
```

`object`没有实现`Stage`，因此`TIn`也`TOut`不可能`object`，对吧？那么为什么编译器会这样认为`PipelineElement<object, object>`并且`PipelineElement<TIn, TOut>`可以变得相同呢？

编辑：是的，完全有可能多次实现相同的通用接口：

```
public interface MyInterface<A> { }
public class MyClass: MyInterface<string>, MyInterface<int> { } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T23:10:08.267

从[`Compiler Error CS0695`](http://msdn.microsoft.com/en-us/library/fkwtss52%28v=vs.90%29.aspx)

> “通用类型”不能同时实现“通用接口”和“通用接口”，因为它们可能会针对某些类型参数替换进行统一。
> 
> 当泛型类实现同一个泛型接口的多个参数化并且存在使两个接口相同的类型参数替换时，会发生此错误。为避免此错误，请仅实现其中一个接口，或更改类型参数以避免冲突。

您不能同时实现`PipelineElementBase<TIn, TOut>`和`PipelineElement<object, object>`接口到您的抽象类。

正如错误页面所说，你应该；

*   仅实施其中一项或
*   更改类型参数以避免冲突。

从[`C# 5.0 Language Specification`](http://msdn.microsoft.com/en-us/library/ms228593.aspx)

> 13.4.2 实现接口的唯一性
> 
> 由泛型类型声明实现的接口对于所有可能的构造类型必须保持唯一。如果没有这条规则，就不可能确定调用某些构造类型的正确方法。例如，假设一个泛型类声明被允许写成如下：

```
interface I<T>
{
    void F();
}
class X<U,V>: I<U>, I<V>
{
    void I<U>.F() {...}
    void I<V>.F() {...}
} 
```

> 如果允许，将无法确定在以下情况下执行哪个代码：

```
I<int> x = new X<int,int>();
x.F(); 
```

> 要确定泛型类型声明的接口列表是否有效，执行以下步骤：
> 
> *   令 L 为在泛型类、结构或接口声明 C 中直接指定的接口列表。
>     
>     
> *   将 L 中已有接口的任何基本接口添加到 L。
>     
>     
> *   从 L 中删除所有重复项。
>     
>     
> *   如果从 C 创建的任何可能的构造类型在将类型参数替换为 L 后会导致 L 中的两个接口相同，则 C 的声明无效。**在确定所有可能的构造类型时，不考虑约束声明。**
>     
>     
> 
> 在上面的类声明`X`中，接口列表 L 由 `I<U>`和组成`I<V>`。该声明无效，因为任何具有相同类型的构造类型`U`都会`V`导致这两个接口是相同类型。
> 
> 在不同继承级别指定的接口可以统一：
> 
> ```
> interface I<T>
> {
>   void F();
> }
> class Base<U>: I<U>
> {
>   void I<U>.F() {…}
> }
> class Derived<U,V>: Base<U>, I<V> // Ok
> {
>   void I<V>.F() {…}
> } 
> ```
> 
> 即使`Derived<U,V>`同时实现`I<U>` 和 ，此代码也是有效的`I<V>`。编码
> 
> ```
> I<int> x = new Derived<int,int>();
> x.F(); 
> ```
> 
> 调用 中的方法`Derived`，因为`Derived<int,int>`有效地重新实现`I<int>`（第 13.4.6 节）。

[SO 编辑强调。]

# jquery - JQuery UI在页面加载时将可拖动的顶部附加到特定的droppable

> ID：15316900
> 
> 赞同：0
> 
> 时间：2013-03-09T23:00:09.693
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

有没有一种简单的方法可以在加载时以编程方式将可拖动对象“绑定”到可放置对象？

我正在尝试创建一个类似 JIRA 的仪表板，其中可拖动对象附加到特定的可放置对象并突出显示要拉到的框或与之关联的框。这部分非常适合初始仪表板设置，但是当我保存位置并重新加载时，我可以设置位置以将可拖动目标放在可放置目标上，但它似乎没有绑定到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T05:53:22.647

已经有人解决了问题并提供了脚本： http: [//nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html](http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html)

效果很好，完全模仿了我想做的事情。

# c# - 将 MS SQL Server 表转换为 C# 类

> ID：15316904
> 
> 赞同：1
> 
> 时间：2013-03-09T23:00:40.377
> 
> 标签：c#, .net, entity-framework

我有一个项目首先使用实体​​框架代码，但使用现有数据库。到目前为止，我一直在为每个现有表创建相应的类，并且一切都很好。如果有某种方法可以快速生成一个表到一个类以节省手动编码每个类的时间，有什么想法吗？我想继续使用 Code First，所以请不要提出替代方案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:02:00.240

您可以先使用 EF 数据库 - 这将生成可用作基础的 .cs 类。只需复制 CS 代码，然后首先删除 EF 数据库。

# c# - LINQPad LINQ To SQL 更新匿名类型

> ID：15316905
> 
> 赞同：0
> 
> 时间：2013-03-09T23:00:50.607
> 
> 标签：c#, linq-to-sql, linqpad

假设我在针对 SQL DB 的 LINQPad 中有以下查询（使用 C# 语句模式）：

```
var query = (from te in Time_Entries
            select new { te.Period, te.Company_Name }).FirstOrDefault(); 
```

如果我想更新所选记录上的 Period 值，我会认为我可以执行以下操作：

```
query.Period = 5;
SubmitChanges(); 
```

但不幸的是，我在 query.Period 分配行上遇到错误：

```
Property or indexer 'AnonymousType#1.Period' cannot be assigned to -- it is read only 
```

是否可以以这种方式或类似方式执行更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:05:55.597

不，你不能。匿名类型不能具有可以修改的属性。从文档中：

> 匿名类型提供了一种方便的方法，可以将一组只读属性封装到单个对象中，而无需先显式定义类型。

无论如何，这没有任何意义。匿名类型有时非常有用，但是当你需要使用 Linq2Sql 实体跟踪和更新时就不是这样了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:52:02.200

嗯，答案已经在

```
select new {} 
```

Even if it would not be an anonymous type, all it could be is an insert....

The rest is answered by walther in his answer.

# html - Firefox 和 IE 中的表格边框与 Chrome 中的不同

> ID：15316906
> 
> 赞同：0
> 
> 时间：2013-03-09T23:01:10.127
> 
> 标签：html, css, html-table

我的网站[http://www.matejkadesign.com](http://www.matejkadesign.com)无法在 Chrome、IE 和 Firefox 中显示一致样式的外部表格边框。我想要的样式在 Chrome 中，但在其他两个浏览器中都不同。我一直在寻找修复，但没有找到。我不在 CSS 中设置表格样式，而是在 html 中这样做：

```
<table align="center" cellspacing="5" cellpadding="5" border="4" bordercolor="#3c2610" width="310px" > 
```

这似乎产生了三种不同的效果。如何使 Firefox 和 IE 的样式与 Chrome 中的样式相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:20:34.820

您需要使用内联样式是否有任何特殊原因？

您可以通过为标签和标签定义确切的`border`样式来修复这些行为，这样做可以防止浏览器应用自己的样式。`table``td`

试试这个：

```
table {
    border: 4px solid #3C2610;
}

td {
    border: 1px solid #3C2610;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:08:47.863

`<!--Comment-->` *您的 doctype之前*有一个 HTML ，它将触发 IE 进入 quirks 模式（相当于 IE5）。IE 基本上会解析您的文档，就好像它没有文档类型一样。什么都不应该先于`<!DOCTYPE html>`

其次，您使用的是 HTML 4.01 中已弃用的表属性，但您在技术上声明了 HTML 5 文档类型 .. 这两个原因很可能解释了浏览器之间的差异。

您还在`align`整个站点中多次使用 deprecated 属性.. 如果您坚持使用 HTML 4.01 属性，至少更改您的文档类型以匹配它：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

# c++ - QSyntaxHighlighter 不适用于创建的表单 QTextEdit

> ID：15316907
> 
> 赞同：1
> 
> 时间：2013-03-09T23:01:11.050
> 
> 标签：c++, qt

正如标题所示，突出显示似乎不适用于创建 QTextEdit 的表单。我的 QSyntaxHighlighter 派生类是来自[Qt 文档](http://doc.qt.digia.com/qq/qq21-syntaxhighlighter.html#example)和我的代码（不起作用的那个）的类：

```
ui->setupUi(this);
HtmlHighlighter hl(ui->textEdit->document()); 
```

但如果我这样做，它工作正常：

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainWindow win;
    win.show();
    QTextEdit editor;
    HighLighter highlighter(editor.document());
    editor.show();

    return app.exec();
} 
```

有没有办法让它与生成的表单一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:01:52.140

您的荧光笔在构造函数末尾超出范围。将它放在堆上并使其成为成员变量，它应该可以工作。

```
class MainWindow
{
//...

private:
    HtmlHighlighter * h1;
} 
```

然后在你的 cpp 文件中：

```
ui->setupUi(this);
hl = new HtmlHighlighter(ui->textEdit->document()); 
```

希望有帮助。

# node.js - 如何在nodejs中渲染css？

> ID：15316908
> 
> 赞同：2
> 
> 时间：2013-03-09T23:01:11.407
> 
> 标签：node.js

所以在 node.js 中，我渲染了包含在 view/index.html 中的 html 页面。我还在 head 标签中包含了一个 css 样式表，但它没有呈现。关于如何在文件系统中对其进行格式化，我应该知道什么：例如，是否必须有一个样式文件夹或 css 所在的东西？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:26:33.287

您将需要一个为 CSS 文件提供服务的端点，或者使用一个静态目录。如果您使用 Express，配置应用程序时的以下代码将设置一个静态服务的目录。

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

这将告诉 Express 将“/public”目录中的所有内容作为静态内容提供。

如果你不使用 Express，你可以看一下这个问题，[Node.js static file server logic (using Connect middleware)](https://stackoverflow.com/questions/12685902/node-js-static-file-server-logic-using-connect-middleware)，应该会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:26:25.743

您需要编写代码来实际响应浏览器将为样式表发出的 HTTP GET 请求并发回 CSS 数据。基本上，但是您提供的服务`view/index.html`将是相似的，但具有不同的 URL、不同的内容类型标头和不同的静态文件以在响应中发送。你没有发布代码，所以你得到的是英文而不是 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T02:25:30.820

你用什么来提供 view/index.html 的页面？您是否只是使用 fs 读取文件，然后发送文件内容以响应请求？或者您使用的是[Connect](http://www.senchalabs.org/connect/)或[Express](http://expressjs.com/)之类的中间件框架？您能否提供一个指向您正在开发的网站的链接，以及您的 JavaScript 代码的相关摘录？

# tcp - 用于简单服务的 TCP 或 UDP

> ID：15316911
> 
> 赞同：0
> 
> 时间：2013-03-09T23:01:20.317
> 
> 标签：tcp, udp

对于在查询时只返回少量数字（例如 30 或 10）但在任何情况下都必须处理多达 5 个左右的请求的服务，TCP 或 UDP 会是更好的协议吗？我倾向于 UDP，但我想要一些专家意见。我也在寻找相对快速的回复时间。你能告诉我每个人的优势对于这样的服务有什么好处吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:04:40.670

TCP 是一种可靠的基于连接的协议。因此，您可以保证发送/接收数据 - 如果未验证在另一端接收到数据包，则会自动重新发送数据包。但是，建立连接时会产生三次握手的开销。

TCP 用于诸如 HTTP 之类的协议，其中存在一次性信息交换（HTTP 请求和回复）。

* * *

UDP 是一种不可靠的无连接协议。所以你可以简单地发送/接收一个数据包，但你没有（自动的，操作系统堆栈提供的）方法来验证另一端是否收到了你的消息。如果你在乎，你必须自己实现某种 ACK。

UDP 通常用于更连续的“流”类型协议。例如，许多在线多人游戏使用 UDP 与主机交换游戏信息。他们持续、定期地这样做。因此，如果一个数据包丢失，这并不是什么大问题，因为另一个更新指日可待。如果您必须等待重新传输该（现在已过时的）更新，那对游戏玩法来说会更糟。

DNS 也是通过 UDP 实现的。

* * *

最终选择是你的。在大多数情况下，我可能会默认使用 TCP，并且只在我描述的场景中使用 UDP。

# python - 从 pexpect sendline 读取输出

> ID：15316914
> 
> 赞同：5
> 
> 时间：2013-03-09T23:01:29.740
> 
> 标签：python, ssh, sudo, pexpect

我有 pexpect 工作，但我在打印输出时遇到问题。在下面的测试脚本中，它创建 ssh 连接，然后发送 sudo su -，然后是我的密码，然后发送需要 sudo 访问权限的行（我还添加了 p.interact() 几次确保它位于根目录）。我遇到的问题是返回我运行的命令的输出。最后，我想运行一些顶级命令，一些 du -h 和其他（更复杂的）空间命令。但目前当它尝试打印 p.before 时，我得到：

```
Traceback (most recent call last):
File "./ssh.py", line 37, in <module>
print p.before()
TypeError: 'str' object is not callable 
```

这是我正在使用的脚本（已编辑以删除我的通行证等）

```
#!/usr/bin/env python

import pexpect
import struct, fcntl, os, sys, signal

def sigwinch_passthrough (sig, data):
    # Check for buggy platforms (see pexpect.setwinsize()).
    if 'TIOCGWINSZ' in dir(termios):
        TIOCGWINSZ = termios.TIOCGWINSZ
    else:
        TIOCGWINSZ = 1074295912 # assume
    s = struct.pack ("HHHH", 0, 0, 0, 0)
    a = struct.unpack ('HHHH', fcntl.ioctl(sys.stdout.fileno(), TIOCGWINSZ , s))
    global global_pexpect_instance
    global_pexpect_instance.setwinsize(a[0],a[1])

ssh_newkey = 'Are you sure you want to continue connecting'
p=pexpect.spawn('ssh user@localhost')
i=p.expect([ssh_newkey,'password:',pexpect.EOF,pexpect.TIMEOUT],1)
if i==0:
    print "I say yes"
    p.sendline('yes')
    i=p.expect([ssh_newkey,'password:',pexpect.EOF])
if i==1:
    print "I give password",
    p.sendline("mypassword")
elif i==2:
    print "I either got key or connection timeout"
    pass
elif i==3: #timeout
    pass
global global_pexpect_instance
global_pexpect_instance = p
p.sendline("sudo su -")
p.sendline("mypasswd")
p.sendline("mkdir /home/user/test")
print p.before 
```

我正在使用此链接： http: [//linux.byexamples.com/archives/346/python-how-to-access-ssh-with-pexpect/](http://linux.byexamples.com/archives/346/python-how-to-access-ssh-with-pexpect/)

任何帮助深表感谢。

编辑：正如 Armin Rigo 在下面指出的那样。我作为 p.before() 之类的函数调用 p.before。我犯了一个愚蠢的错误，因为这解释了为什么我今天遇到这个错误，而不是昨天我尝试这个时。在对我的脚本进行更改并修改正在发送的命令后，打印 p.before，并且不返回任何输出。从 sendline() 命令返回输出的任何其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:51:15.417

使用日志文件，该日志文件将所有输出存储在终端中。使用该示例代码：-

```
child = pexpect.spawn("ssh user@localhost")
child.logfile = open("/tmp/mylog", "w")
child.expect(".*assword:")
child.send("guest\r")
child.expect(".*\$ ")
child.sendline("python -V\r") 
```

打开日志文件并查看终端事件中的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T06:01:53.607

要在 sendline 使用**child.read()后获取完整的输出**

例如

```
cmd_resp = pexpect.spawnu(cmd)    # for execution of the command
str_to_search = 'Please Enter The Password'
cmd_resp.sendline('yes')       # for sending the input 'yes'
resp = cmd_resp.expect([str_to_search, 'password:', EOF], timeout=30) # fetch the output status
if resp == 1:
   cmd_resp.sendline(password) 
   resp = cmd_resp.expect([str_to_search, 'outputString:', EOF], timeout=30)
   print(cmd_resp.read()) # to fetch the complete output log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T11:24:42.070

`p.before`是一个字符串 - 不是一个函数。要查看输出，您必须编写 `print p.before`. 希望这可以帮助你

# jms - 如何使用 JMeter 测试 WSO2 消息代理

> ID：15316915
> 
> 赞同：0
> 
> 时间：2013-03-09T23:01:42.383
> 
> 标签：jms, wso2, jmeter, messagebroker, wso2mb

我在使用 JMS Publisher 让 JMeter 与 WSO2 消息代理一起工作时遇到了一些问题。我让 JMeter 与 ActiveMQ 一起工作，但我仍然是该工具的新手。

我将客户端库复制到 jmeter wso2mb-2.0.1\client-lib 到 apache-jmeter-2.9\lib

*   andes-client-0.13.wso2v4.jar
*   geronimo-jms_1.1_spec-1.1.0.wso2v1.jar

设置：

*   上下文工厂：org.wso2.andes.jndi.PropertiesFileInitialContextFactory
*   提供者网址：amqp://admin:admin@clientID/carbon?brokerlist='tcp://localhost:5672'
*   连接工厂：qpidConnectionfactory

...还尝试了其他几个值

*   目的地：动态队列/测试

我得到的错误是在连接工厂字段上。
我尝试了几个不同的值，所有这些值都会产生命名错误，就像缺少设置一样。
当我将其留空时，我得到：

> javax.naming.NamingException：预期 javax.jms.ConnectionFactory，发现 org.wso2.andes.jndi.ReadOnlyContext

有谁知道我在这里想念什么？
怀疑是简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:18:43.320

我发现了问题。

简而言之，qpid 上下文工厂`org.wso2.andes.jndi.PropertiesFileInitialContextFactory`使用字段的方式与 activeMQ 上下文工厂不同`org.apache.activemq.jndi.ActiveMQInitialContextFactory`。

虽然 ActiveMQ 允许您在 Jmeter 中不使用单独的属性文件，但 Qpid 不允许。

**Jmeter JMS 发布者：**

*   上下文工厂：org.wso2.andes.jndi.PropertiesFileInitialContextFactory
*   提供者网址：nameOfYouFile.properties
*   连接工厂：qpidConnectionfactory
*   目的地 ：`<QueuePropertyName>`

**nameOfYouFile.properties：**

```
connectionfactory.qpidConnectionfactory = amqp://admin:admin@clientID/carbon?brokerlist='tcp://localhost:5672'
queue.JMeterQueue = JMeterQueue 
```

参考： [Qpid 维基](https://cwiki.apache.org/qpid/how-to-use-jndi.html)

# ruby - 检查 RSpec 中的相等性

> ID：15316917
> 
> 赞同：0
> 
> 时间：2013-03-09T23:01:47.653
> 
> 标签：ruby, caching, rspec

我正在测试要缓存的存储对象。

我正在检查平等

```
cached_object.should == original_object 
```

该对象有很多嵌套对象，所以这里只是整个消息的一个片段：

```
...
 @e164s=
   -             [#<Mappers::E164:0x000000051c88b0
   +             [#<Mappers::E164:0x0000000525c420
                   @index="1",
                   @value="16508045106">,
   -              #<Mappers::E164:0x000000051c8838
   +              #<Mappers::E164:0x0000000525c358
                   @index="2",
                   @value="17065664321">,
   -              #<Mappers::E164:0x000000051c8720
   +              #<Mappers::E164:0x0000000525c2b8
                   @index="3",
                   @value="12025553356">,
   -              #<Mappers::E164:0x000000051c86a8
   +              #<Mappers::E164:0x0000000525c240
                   @index="4",
                   @value="18185554321">,
   -              #<Mappers::E164:0x000000051c8630
   +              #<Mappers::E164:0x0000000525c1c8
                   @index="5",
                   @value="14085664321">,
   -              #<Mappers::E164:0x000000051c8518
   +              #<Mappers::E164:0x0000000525c128
                   @index="6",
                   @value="16505554321">]
... 
```

如您所见，对象的值相等，但 original_object 和 cached_object 中的对象具有不同的 object_id

如何重写测试以使其通过？

# java - 我将如何根据另一个 ArrayList 的行为对 ArrayList 进行排序？（爪哇）

> ID：15316919
> 
> 赞同：3
> 
> 时间：2013-03-09T23:01:59.700
> 
> 标签：java, arraylist

这最终是我需要做的：

我有一个`ArrayList`名为 originalList ，看起来像 `[pans, pots, sit, it's, naps]`

另一个`ArrayList`叫做 modifiedList ，它采用 originalList 并删除标点符号和大写字母，然后对列表进行排序。所以它看起来像 `[anps, anps, ist, ist, opst]`

modifiedList 的目的是告诉我哪些单词是彼此的字谜。字谜是由相同字母组成的单词。问题是我需要对 originalList 进行排序以匹配 modifiedList 以便我可以输出哪些单词是彼此的字谜。originalList 需要变成`[pans, naps, sit, it's, pots]`. 建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T23:09:23.677

不要使用额外的列表。使用比较器对原始列表进行排序，该比较器“标准化”要比较的两个单词，然后比较它们的标准化值（通过标准化，我的意思是转换`naps`为`anps`）。

然后，您的字谜将在列表中彼此相邻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:30:36.067

```
public static void main(String args[]){
        ArrayList<String> alOriginal = new ArrayList<String>();
        alOriginal.add("pans");
        alOriginal.add("pots");
        alOriginal.add("sit");
        alOriginal.add("it's");
        alOriginal.add("naps");
        ArrayList<String> alAnagram = getSortedAnagramStrings(alOriginal);
        System.out.println(alOriginal);
        System.out.println(alAnagram);
    }
    public static java.util.ArrayList<String> getSortedAnagramStrings(ArrayList<String> original){
        ArrayList<String> alAnagramStrings = new ArrayList<String>();
        for (String currentString : original) {
            //  Remove punctuation
            char[] anagramChars = currentString.replace("'", "").toCharArray();
            //  Sort characters
            Arrays.sort(anagramChars);
            //  Prepare string
            String anagramString = new String(anagramChars);
            //  Add to array list
            alAnagramStrings.add(anagramString);
        }
        //  Simple sort logic
        for (int index = 0; index < alAnagramStrings.size(); index ++){
            for (int index1 = index + 1; index1 < alAnagramStrings.size(); index1 ++){
                //  If both anagram strings are same
                if(alAnagramStrings.get(index).compareTo(alAnagramStrings.get(index1)) == 0){
                    //  Compare original strings
                    if (original.get(index).compareTo(original.get(index1)) > 0){
                        String temp =original.get(index);
                        original.set(index, original.get(index1));
                        original.set(index1, temp);
                    }else{
                        String temp =original.get(index);
                        original.set(index1, original.get(index));
                        original.set(index, temp);
                    }
                }else if(alAnagramStrings.get(index).compareTo(alAnagramStrings.get(index1)) > 0){
                    String temp =alAnagramStrings.get(index);
                    alAnagramStrings.set(index, alAnagramStrings.get(index1));
                    alAnagramStrings.set(index1, temp);
                    String temp1 =original.get(index);
                    original.set(index, original.get(index1));
                    original.set(index1, temp1);
                }
            }
        }
        return alAnagramStrings;
    } 
```

# linux - 在某个系统调用中同步两个进程

> ID：15316924
> 
> 赞同：0
> 
> 时间：2013-03-09T23:02:43.683
> 
> 标签：linux, process, system-calls

是否可以在不修改代码的情况下在某些系统调用中同步两个 linux 进程？

一个真实世界的例子：`v4l2-ctl`是一种可用于设置网络摄像头某些控件的工具。运行它后设置一些控件，`ffmpeg`用于用相机捕捉电影。但是，仅设置自己的一些控件并重置其他一些控件，会`ffmpeg`破坏`v4l2-ctl`.

现在，无需修改和重建其中一个或两个工具即可解决此问题。`ffmpeg`如果可以启动，这将是可能的，但在打开和配置后会被挂起`/dev/video0`（很可能发生了一些`ioctls`事情），然后`v4l2-ctl`会被调用以应用设置。之后，`ffmpeg`将恢复并使用正确的设置开始捕获。

这是否可以跟踪一个进程的 io 操作并通过简单的方式将其挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:17:17.373

If you're feeling adventurous and don't mind the performance hit of using a debug-compiled `ffmpeg`, you could conceivably start it under `gdb` and set a breakpoint after opening `/dev/video0` (or anywhere else. You'll need the source either way.)

You could then run the binary until it hits the breakpoint, tweak `v4l2-ctl` and then tell `ffmpeg` to continue past the breakpoint.

# jquery - 单击时隐藏错误消息

> ID：15316927
> 
> 赞同：3
> 
> 时间：2013-03-09T23:02:47.653
> 
> 标签：jquery, forms, validation

我有一个带有电子邮件和密码的简单登录表单 我有这个代码来验证电子邮件

```
$(document).ready(function() {

$('#login-submit').click(function() {

    $(".error").hide();
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    var emailaddressVal = $(".email").val();
    if(emailaddressVal == '') {
        $(".email").after('<span class="error">Please enter your email address.</span>');
        hasError = true;
    }

    else if(!emailReg.test(emailaddressVal)) {
        $(".email").after('<span class="error">Enter a valid email address.</span>');
        hasError = true;
    }

    if(hasError == true) { return false; }

    });
}); 
```

具有 .error 类的跨度（根据我的设计）隐藏了输入元素。

当我单击它时，我想再次隐藏错误消息

```
$(document).ready(function() {
$('.error').click(function() {
    $(".error").remove();
});

}); 
```

但这无济于事。有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:04:20.903

**问题**

目前，您正在将处理程序绑定到*页面 load 上*存在的`click`任何元素。但是您的消息会*在页面加载后*动态添加到 DOM 中，因此您的处理程序不会绑定到它们。`.error`*`.error`*`click`**

 ****解决方案**

与其直接将事件处理程序*绑定*到元素，不如将事件处理程序*委托*给 DOM 更高层的页面加载时存在的父元素。

例如：

```
$(document).ready(function() {
    $(document).on('click','.error', function() {
        $(this).remove();
    });
}); 
```

这将使`click`处理程序应用于`.error`DOM 中包含的任何元素，包括当前和未来。您当然可以限制委托的范围，例如将其附加到`$('#some-form')`而不是`$(document)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T00:17:37.473

You might want to try Bootstrap alert messages. They're really simple to use, and work within your page really simply, as they come with their own close buttons. You can treat them as you would treat any other DOM element, but without the hassle. All you have to do is install their library and use their classes/javascript in order to get what you want. It takes a bit of getting used to, but it's an incredibly powerful addition.

[http://twitter.github.com/bootstrap/components.html#alerts](http://twitter.github.com/bootstrap/components.html#alerts)**

# ios - 在分段视图上提供导航栏按钮功能

> ID：15316929
> 
> 赞同：0
> 
> 时间：2013-03-09T23:02:58.910
> 
> 标签：ios, calendar, uisegmentedcontrol, uinavigationitem, kal

我的 iOS 应用程序将 Kal 集成到应用程序中时遇到问题。

这是正在发生的事情的图像。

![在此处输入图像描述](../Images/ccee31a707eb54e467462a8244b6d46e.png)

如果你注意到我在图片左侧实现的类，你可以捕捉到我做这件事的方式。

无论如何，我想给按钮“今天”功能，但在所有三个分段视图中，一个完美的例子是 iPhone 预装的本机日历应用程序。

这个 tabbarcontroller 正是日历应用程序，或者至少我希望它是。

如果需要，我会提供任何额外的细节，我整个周末都会坐在我的办公桌前。

谢谢你。

编辑：

我目前已经在 calendar_main 类中实现了今天按钮，它是其他子视图控制器（segmentedViews：list，day，month）的 parentviewcontroller。

如果需要，我可以提供代码。

# java - AndEngine - 根据是否按下父按钮启用禁用的子按钮

> ID：15316933
> 
> 赞同：3
> 
> 时间：2013-03-09T23:03:24.843
> 
> 标签：java, android, andengine

[借助此处](https://stackoverflow.com/questions/15116158/andengine-drawing-a-line-between-level-objects-entites-using-matching-ids)的答案，我拥有当前的设置。如何根据是否按下父按钮来禁用子按钮？例如 Button2 当前被禁用，但是当我按下 Button1 时，我现在可以按下 Button2，如果我按下 Button2，Button3 和 Button4 就会启用并且现在可以按下。到目前为止，我这样做的方式如下：声明一个布尔值：

```
boolean Enable = false; 
```

单击按钮时将 Enable 从 false 更改为 true：

```
if (type.equals(TAG_ENTITY_ATTRIBUTE_VALUE_GAMEBUTTON1)) {
levelObject = new ButtonSprite(x, y, resourcesManager.gamebutton1_region, resourcesManager.gamebuttonpressed_region, vbom, new OnClickListener() {
    @Override
    public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY) {                           
        Enable = true;
    }
}); 
```

}

禁用除第一个按钮之外的所有其他按钮，并且在按下按钮之前看到 Enable 仍然为 false 其他按钮应该被禁用：

```
if (ButtonSpriteID != 1) {
levelObject.setEnabled(Enable);
levelObject.setColor(Color.BLACK); 
```

}

最后，如果子项的 id 与父项的 child_id 匹配，则应在按下按钮时启用该按钮，因为 Enable 应设置为 true：

```
for (int k = 0; k < ButtonSpriteChild.length; k++){
if (ButtonSpriteChild[k] == ButtonSpriteID){
    levelObject.setEnabled(Enable);
    levelObject.setColor(Color.WHITE);
}                               
} 
```

运行代码时我没有收到错误，但似乎都没有按我的预期工作。所以任何帮助都会很棒。

* * *

## 更新 1：所以我尝试并删除了 Enable boolean 并尝试了这个：

```
if (ButtonSpriteID != 1) {
levelObject.setEnabled(false);
levelObject.setColor(Color.BLACK);
}

levelObject.setOnClickListener(new OnClickListener() {
@Override
public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY) {
    for (int k = 0; k < ButtonSpriteChild.length; k++){
        if (ButtonSpriteChild[k] == ButtonSpriteID){
            levelObject.setEnabled(true);
            levelObject.setColor(Color.WHITE);
        }                               
    }
}
}); 
```

还是不行。有人建议我覆盖 onTouchedArea 但我不确定我将如何实现它。

* * *

## 更新 2：我现在尝试过：

```
if (levelObjects.get(j).isPressed()) {
    levelObjects.get(i).setEnabled(true);
    levelObjects.get(i).setColor(Color.WHITE);
} 
```

还是不行。还在寻求帮助。

* * *

## 更新 3：我现在尝试过：

```
for (final ButtonSprite buttonSprite : levelObjects) {
    if (ButtonSpriteID != 1) {
        buttonSprite.setEnabled(false);
        buttonSprite.setColor(Color.BLACK);
    }
    buttonSprite.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
        float pTouchAreaLocalY) {
            for (int k = 0; k < ButtonSpriteChild.length; k++){

                if (ButtonSpriteChild[k] == ButtonSpriteID){
                    buttonSprite.setEnabled(true);
                    buttonSprite.setColor(Color.WHITE);
                }
            }   
        }
    });
} 
```

还是打不开，有救吗？请？

* * *

## 更新 4：我现在尝试过：

```
levelObjects.get(j).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
    float pTouchAreaLocalY) {
        for (int k = 0; k < ButtonSpriteChild.length; k++){

            if (ButtonSpriteChild[k] == ButtonSpriteID){
                levelObjects.get(i).setEnabled(true);
                levelObjects.get(i).setColor(Color.WHITE);
            }
        }
    }
}); 
```

这不起作用，因为它给了我关于将“i”设置为 final 的错误，但不能这样做，因为“i”在 for 循环中。

* * *

## 更新5：所以我试过了

```
if (ButtonSpriteChild[k] == ButtonSpriteID){
    levelObject.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
                float pTouchAreaLocalY) {
            levelObject.setEnabled(true);
            levelObject.setColor(Color.WHITE);

        }
    });
} 
```

还是不行。

* * *

## 更新6：所以我试过了

```
if (ButtonSpriteChild[k] == ButtonSpriteID){
    levelObject.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
            float pTouchAreaLocalY) {
            levelObject.setEnabled(true);
            levelObject.setColor(Color.WHITE);
        }
    });
} 
```

如果按下另一个按钮并且我按下的某些按钮不是该按钮的子级或父级，则只会发生一些奇怪的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:46:07.370

在您创建按钮时进行 XML 解析期间，我们将借此机会仅启用 GAMEBUTTON1，禁用所有其他按钮并在按下按钮时调用一个函数以启用所有子项。IE，

```
if (type.equals(TAG_ENTITY_ATTRIBUTE_VALUE_GAMEBUTTON1))
{
    final ButtonSprite levelObject = new ButtonSprite(x, y, resourcesManager.gamebutton1_region, vbom, new  OnClickListener()
    {

        @Override
        public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY) 
        {       
            //This button sprite has been clicked so lets enable any child sprites

            EnableChildButtons(this); //See sub routine later

        }
     });
     //For game button 1, we will enable it,
     levelObject.setEnabled(true);
     levelObject.setColor(Color.WHITE);
     //Hereafter for further buttons, although the rest of the code will be the same
     //will be disabled after creation with the following two lines in place of the latter
     // levelObject.setEnabled(false);
     // levelObject.setColor(Color.BLACK);
}
//...(rest of your code in previous post) 
```

在子例程 EnableChildButtons 之前，我对您的 levelObjectUserData 进行了修改，我替换了您的子 ID 的 int 数组，

```
public int[] ChildID = {-1}; 
```

有一个清单，

```
public List<Integer> ChildIDs = new ArrayList<Integer>(); 
```

调用存储您孩子 ID 的代码时，只需将以下代码与您的代码一起使用，

```
for (int i = 0;i<childString_id.length;i++)
{
    MyData.ChildIDs.add(Integer.parseInt(childString_id[i]));
} 
```

然后我们只需要编写函数来启用孩子，

```
private void EnableChildButtons(final ButtonSprite mButtonSprite)
{
    //To cut down on syntax length get a pointer to the button user data
    final levelObjectUserData mUserData = ((levelObjectUserData) (mButtonSprite.getUserData()));

    //We will be careful and run this on the update so we do not alter states
    //while they are currently being processed by the update thread!
    mActivity.runOnUpdateThread(new Runnable()
    {
        @Override
        public void run()
        {
            //Go through all of the buttons child ids
            for (int i = 0;i<mUserData.ChildIDs.size();i++)
            {

                //Locate the button with that ID as will be refernced in our levelObjects
                //linked list
                for (int j = 0;j<levelObjects.size();j++)
                {
                    final int ButtonSpriteID = ((levelObjectUserData) (levelObjects.get(j).getUserData())).ID;

                    if (mUserData.ChildIDs.get(i) == ButtonSpriteID)
                    {
                        //We have found a child button, so enable it!
                        ((ButtonSprite) levelObjects.get(j)).setEnabled(true);
                        ((ButtonSprite) levelObjects.get(j)).setColor(Color.WHITE);
                    }
                }

            }
        }

     });
} 
```

希望这可以帮助。

# c++ - C++ 基本双指针传递

> ID：15316935
> 
> 赞同：0
> 
> 时间：2013-03-09T23:03:49.610
> 
> 标签：c++, function, pointers

我敢肯定这已经被问过，但搜索“c++”“指针”“函数”“数组”让我无处可去。

我在 main 中声明了一些看起来像这样的东西：

```
struct point{
    float x;
    float y;
    int m;
    float points[10];
    point *next;
};
struct neighbor{
    float dist;
    point *pt;
};
neighbor **candidate = NULL; 
```

我想将“候选人”传递给一个我可以做的函数：

```
candidate = new neighbor*[10];
for(int i = 0;i<10;i++)
     candidate[i] = new neighbor; 
```

用各种数据填充它，然后在不使用 return 语句的情况下退出函数（这很重要，因为我使用的 boost 线程不能使用 void 以外的函数）并且让主函数能够看到函数的变化做过。

抱歉，这太基本了，但我认为正确的方法不起作用，我似乎找不到我要找的东西。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:07:53.020

Accept a reference:

```
void fun(neighbor **& candidate); 
```

Or a pointer:

```
void fun(neighbor *** candidate); 
```

There's almost zero reason to ever need double pointer indirection in C++. You're almost certainly not leveraging the language to its best.

# python - 如何在常规 django 视图中将数据添加到美味的资源

> ID：15316939
> 
> 赞同：3
> 
> 时间：2013-03-09T23:04:19.350
> 
> 标签：python, django, json, rest, tastypie

我在尝试在常规 django 视图中的较大 json 响应中包含美味派资源时遇到了问题。我想让视图返回类似这样的内容（基于视图中生成的查询集，而不是来自典型的美味派获取参数）：

```
{
    "success": bool,
    "message": string,
    "error": string,
    "objects": [
        {
            "field_one": bar,
            "field_two": foo
        }
        ... more objects ...
    ]
} 
```

其中对象列表是序列化的美味资源列表，成功、消息和错误来自视图中的其他位置。

现在，我无法弄清楚如何避免在构建更大的字典之前将序列化的资源转换为字符串，所以我目前有这样的东西：

```
{
    "success": bool,
    "message": string,
    "error": string,
    "objects": [
        "{"field_one": bar, "field_two": foo..."}",
        "{"field_one": baz, "field_two": foobar..."}",
        ...
    ]
} 
```

这样做的重点是保持模型 json 表示的一致性，以尽量减少直接使用 sweetpie api 和使用这些视图中返回的数据之间的摩擦。我认为解决方案是以某种方式在每个资源上使用 full_dehydrate 方法而不序列化它们，然后将它们添加到更大的字典中，然后序列化该字典，但我不确定要使用什么序列化程序。或者，也许有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:55:13.863

通常情况下，写这篇文章帮助我找到了一个临时解决方案。也许有人会对如何使它变得更好有一些意见。

我正在使用它来准备一个用于序列化的查询集：

```
def serialize_queryset(resource_class, queryset):
    # hand me a queryset, i give you dehydrated resources
    resource = resource_class()
    dd = {}

    # make meta
    dd['meta'] = {}
    dd['meta']['limit'] = 1000
    dd['meta']['next'] = None
    dd['meta']['offset'] = 0
    dd['meta']['previous'] = None
    dd['meta']['total_count'] = len(queryset)

    # objects
    dd['objects'] = []
    for obj in queryset:
        bundle = resource.build_bundle(obj=obj)
        dehydrated_obj = resource.full_dehydrate(bundle)
        dd['objects'].append(dehydrated_obj)

    # return dict
    return dd 
```

我使用来自tastepie.serializer 的序列化器。在示例视图中使用它是这样的：

```
from tastypie.serializer import Serializer

serializer = Serializer()

def my_view(request):

    #... do some other view stuff ...

    # prepare a queryset for serialization
    queryset = MyModel.objects.filter(is_cool=True)
    data = serialize_queryset(MyModel, queryset)

    # add in custom stuff, determined earlier in the view somewhere
    data['success'] = success
    data['message'] = message
    data['error'] = error

    # serialize and return response
    data = serializer.serialize(data)
    return HttpResponse(data, mimetype='application/json') 
```

这似乎有效。也许您看到这种方法有什么不好的地方，或者有什么改进方法？

# python - Python在不同文件夹之间移动文件

> ID：15316947
> 
> 赞同：0
> 
> 时间：2013-03-09T23:04:50.040
> 
> 标签：python, file-io, python-2.7

最好浏览我的 1TV 目录并移动和重命名它找到的文件。将找到的每个文件移动到带有节目名称和季节的文件夹中。这些文件将被重命名为 Show + episode + 文件扩展名。我目前正在手动添加文件扩展名，因为我仍在测试我的代码。我会把它整理好。

问题是当我尝试移动文件时出现错误

```
!!! .DS_Store Can't handle !!!
Elementary/S01/Elementary14.mp4
TypeError: "cannot concatenate 'str' and 'exceptions.IOError' objects" 
```

我在 Mac 上处理了 .DS_Store 文件。但是 TypeError 我不明白为什么我会尝试在之前的调用中更改我的代码来制作字符串等。没有运气

```
#Rename files
#NAME.S##.E##.QUALITY.USER.FILETYPE

#Elementary.S01E15.HDTV.x264-LOL.mp4
#Greys.Anatomy.S09E13.HDTV.x264-LOL.mp4

import os
import shutil

def checkCreateDir(f):
    if not os.path.exists(f):
        os.makedirs(f)

#Main LOOP
for filename in os.listdir("./1TV"):
    try:
        firstDot = filename.index('.S')
        name = filename[:firstDot].replace("."," ")
        season = filename[firstDot+1:firstDot+4]
        episode = filename[firstDot+5:firstDot+7]

        #File movement
        checkCreateDir(name)
        checkCreateDir(name+"/"+season)
        newFilename = name+"/"+season+"/"+name+episode+".mp4"
        print newFilename
        shutil.move(filename,newFilename)

        print name + "\t"+ season + "\t" + episode
    except ValueError:
        print "!!! " + filename + " Can't handle !!!"
    except IOError as detail:
        print "IOError " + detail 
```

任何帮助是极大的赞赏。顺便说一句：这是一个非常原始的版本，一旦我让它运行一些东西，我会整理一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:08:33.693

您正在尝试将`IOError`异常连接到 string `"IOError "`。只需使用逗号代替：

```
print "IOError", detail 
```

其中`IOError`已经包含了这个词，所以很简单：

```
print detail 
```

应该足够了。

您可能得到`IOError`s 因为您使用的是相对文件名，但您的源文件列在子目录中；`os.listdir()`仅列出基本文件名，*不*包括目录。

用于`os.path.join()`构造路径，其他字符串的字符串格式：

```
checkCreateDir(name)
checkCreateDir(os.path.join(name, season))
newFilename = os.path.join(name, season, '{}{}.mp4'.format(name, episode))
print newFilename
shutil.move(os.path.join('./1TV', filename), newFilename) 
```

# javascript - jQuery：未捕获的类型错误：对象# has no method 'apply' I'm using jQuery 1.9.1 and trying to have an ajax query which is called every 5 seconds and updates some content. Using the code below, I get the following error in Chrome's conso 问问题 问问题 2013-03-09T23:05:29.117 5288 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using jQuery 1.9.1 and trying to have an ajax query which is called every 5 seconds and updates some content. Using the code below, I get the following error in Chrome's console: Uncaught TypeError: Object # has no method 'apply' The line the error is on is line 3 of jquery.min.js $(document).ready(function(){ function getData() { $.getJSON('/ajax/pull', function(data){ console.log(data.items); $("span").each(data.items, function(items){ console.log(items); if($(this).attr('id') in items) { console.log('here'); } }); }); } window.setInterval(function() { getData(); } , 5000); }); I've looked through the other questions which have the same problem, but trying those fixes has no affect on my problem. why is jqXHR.responseText returning my PHP file and not executing the script? I'm trying to simply execute an ajax request to my server. The request passes my form data to signUp.php where the information is then process. Then php will echo back a responseText to my jqXHR object and I print the alert. The problem is that my php file is being executed, rather the jqXHR.responseText is instead returning the my php file itself as if it were a text file. A sample php responseTest would look like ... "" Instead I want the responseText to return my echoes. The code is written bellow. var formData = new FormData(document.getElementById("signUpForm")); $.ajax({ url: "./cgi-script/signUp.php", type: "POST", xhr: function giveXmlHTTP(){ myXhr = $.ajaxSettings.xhr(); if(myXhr.upload){ myXhr.upload.addEventListener('progress',progressHandler, false); } return myXhr; }, success: function(data,statusText,jqXHR){ alert(jqXHR.responseText); }, data:formData, cache: false, contentType: false, processData: false }); } javascriptjquery 4 1 回答 1 This answer is useful 5 .each() takes only 1 argument which is a function not an array. 于 2013-03-09T23:15:32.883 回答 Related 4 java - Java：强制接口的实现者具有不可变的名称字段？ 1 linux - 使用 OpenGL / Mesa3D 编译的便携式 Linux 可执行文件 1 php - 无法将视图保存为要在模板中使用的变量 1 cognos - 我想编辑我的十进制数。我如何给它模式？ 1 c# - 如何将 Visio 绘图存储在 SharePoint 列中 1 java - 如何实现类似于 Android 的消息处理程序，但在普通 Java 中 3 oracle - ORA-01775: 同义词循环链 1 asp.net-mvc - 继承的 Razor 视图 - 如何运行初始化方法？ 2 ruby - 使用 vim 生成基于整数的随机数表？ 1 ios - 使用 dispatch_async 或 performSelectorOnMainThread 在主线程上执行 UI 更改？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15316949
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery

I'm using jQuery 1.9.1 and trying to have an ajax query which is called every 5 seconds and updates some content.

Using the code below, I get the following error in Chrome's console:

```
Uncaught TypeError: Object #<Object> has no method 'apply' 
```

The line the error is on is line 3 of jquery.min.js

```
$(document).ready(function(){
      function getData()
      {
        $.getJSON('/ajax/pull', function(data){
          console.log(data.items);

          $("span").each(data.items, function(items){
            console.log(items);
            if($(this).attr('id') in items)
            {
                console.log('here');
            }
          });

        });
      }
      window.setInterval(function() { getData(); } , 5000);
  }); 
```

I've looked through the other questions which have the same problem, but trying those fixes has no affect on my problem.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T23:15:32.883

[.each()](http://api.jquery.com/each/) takes only 1 argument which is a function not an array.

# php - 为什么 jqXHR.responseText 返回我的 PHP 文件而不执行脚本？

> ID：15316950
> 
> 赞同：2
> 
> 时间：2013-03-09T23:05:40.020
> 
> 标签：php, jquery, ajax, xmlhttprequest, multipartform-data

我试图简单地对我的服务器执行一个 ajax 请求。该请求将我的表单数据传递给 signUp.php，然后在其中处理信息。然后 php 会将 responseText 回显到我的 jqXHR 对象并打印警报。问题是我的 php 文件正在被执行，而不是 jqXHR.responseText 而是返回我的 php 文件本身，就好像它是一个文本文件一样。一个示例 php responseTest 看起来像......

```
"<?php
 php code ...
  ?>" 
```

相反，我希望 responseText 返回我的回声。代码写在下面。

```
 var formData = new FormData(document.getElementById("signUpForm"));
            $.ajax({
                url: "./cgi-script/signUp.php",
                type: "POST",
                xhr: function giveXmlHTTP(){
                    myXhr = $.ajaxSettings.xhr();
                    if(myXhr.upload){
                        myXhr.upload.addEventListener('progress',progressHandler, false);
                    }
                    return myXhr;
                },
                success: function(data,statusText,jqXHR){
                    alert(jqXHR.responseText);
                },
                data:formData,
                cache: false,
                contentType: false,
                processData: false
            });

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:09:45.040

这些通常发生在 PHP 没有被解析时。因此，请确保您在能够并配置为运行 PHP 的**SERVER**上运行，而不是*双击 HTML 页面*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:08:54.040

导致此问题的两个最常见原因是您缺少初始`<?php`值以及您的服务器没有为 PHP 设置。我的猜测是，当您刚访问时，`signUp.php`您会发现同样的问题。

# c# - C# getting a line from appSetting?

> ID：15316951
> 
> 赞同：3
> 
> 时间：2013-03-09T23:05:44.950
> 
> 标签：c#, xml

Is there an easier way of doing the lines below?

```
var doc = new XmlDocument();
doc.Load("../../../MyWebSite/Web.config");
var mysqlconn = doc.DocumentElement.SelectSingleNode(
    "//appSettings//add[@key='mysqlconn']").Attributes["value"].Value; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T23:09:05.660

```
System.Configuration.ConfigurationManager.AppSettings["mysqlconn"] 
```

应该给你价值。您可能希望将它们移动到一个`<connectionStrings />`部分中，您可以使用它：

```
System.Configuration.ConfigurationManager.ConnectionStrings["mysqlconn"]
                                                                .ConnectionString 
```

# c# - Parallel Linq: Ordered treatment

> ID：15316955
> 
> 赞同：3
> 
> 时间：2013-03-09T23:06:15.143
> 
> 标签：c#, linq, parallel-processing

I'm following the material from the 70-516 MS exam, and I came across the section where they explain that we can ensure an ordered treatment while doing parallel processing if we use the AsOrdered method.

However, running the example below does not ouput the results in order.

Basically, the sample code below starts with an enumerable collection of 10 integers, which is then parallelised, then ordered and finally filtered by only selecting element for which the Compute function returns a even number. The Compute function just returns the input, after a 1 sec delay

```
private void TestLinqParallel()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        var source = Enumerable.Range(1, 10).AsParallel().AsOrdered();
        var evenNums = from num in source
                       where Compute(num) % 2 == 0
                       select num;
        evenNums.ForAll(ev =>
        {
            Debug.WriteLine(string.Format("{0} on Thread {1}", ev, Thread.CurrentThread.GetHashCode()));

        });
        sw.Stop();
        Debug.WriteLine(string.Format("Done {0}", sw.Elapsed));
    }
    public int Compute(int num)
    {
        Debug.WriteLine(string.Format("Computing {0} on Thread {1}", num, Thread.CurrentThread.GetHashCode()));
        Thread.Sleep(1000);
        return num;
    } 
```

The book states

> The results are ordered, at least for the even numbers, which is what the AsOrdered extension method is guaranteeing.

But here are my results.. The processing of 4 comes before the processing of 2

```
Computing 4 on Thread 11
Computing 3 on Thread 10
Computing 2 on Thread 12
Computing 1 on Thread 6
4 on Thread 11
Computing 7 on Thread 11
Computing 6 on Thread 6
2 on Thread 12
Computing 8 on Thread 12
Computing 5 on Thread 10
Computing 9 on Thread 11
6 on Thread 6
Computing 10 on Thread 6
8 on Thread 12
10 on Thread 6
Done 00:00:03.0561023 
```

Can anyone help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:13:43.583

`ForAll`是并行化的。这意味着所有的排序保证都超出了窗口，因为您的代码主体是同时执行的。尝试`foreach`循环。

# ruby - 将哈希转换为 csv 文件

> ID：15316957
> 
> 赞同：0
> 
> 时间：2013-03-09T23:06:29.357
> 
> 标签：ruby, csv

我有以下名为 的哈希`fcs`，并希望将其保存为 CSV。

```
{
  "bla"=>{
          "lower"=>[17.12241, 18.79847, 17.71413, 18.49174, 18.30381, 18.78557, 18.93176, 19.33453, 19.62619, 20.02301],
          "point"=>[21.84838, 23.86319, 23.93176, 25.19658, 25.72613, 26.70761, 27.41132, 28.28576, 29.05525, 29.88925],
          "upper"=>[26.57434, 28.92791, 30.14938, 31.90142, 33.14845, 34.62966, 35.89088, 37.23698, 38.48432, 39.7555]
         },
  "blo"=>{
          "lower"=>[17.12241, 18.79847, 17.71413, 18.49174, 18.30381, 18.78557, 18.93176, 19.33453, 19.62619, 20.02301],
          "point"=>[21.84838, 23.86319, 23.93176, 25.19658, 25.72613, 26.70761, 27.41132, 28.28576, 29.05525, 29.88925],
          "upper"=>[26.57434, 28.92791, 30.14938, 31.90142, 33.14845, 34.62966, 35.89088, 37.23698, 38.48432, 39.7555]
         }
} 
```

这是输出文件的所需内容：

```
lower.bla,bla,upper.bla,lower.blo,blo,upper.blo
17.12241,21.84838,26.57434,17.12241,21.84838,26.57434
18.79847,23.86319,28.92791,18.79847,23.86319,28.92791
.
.
. 
```

我正在使用以下代码来生成它：

```
def to_csv
  fcs = self.fcs
  CSV.generate(col_sep: self.delim) do |csv|
    names = Array.new
    cols = Array.new
    fcs.keys.each do |ts|
      names << "lower." + ts
      names << ts
      names << "upper." + ts
    end
    csv << names
    fcs.values.each do |ts|
      cols << ts.values       
    end
    cols.flatten(1).transpose.each do |row|
      csv << row
    end
  end
end 
```

然而，它使用三个不同的循环。我觉得这不是实现所需输出的最佳代码。有没有最好的重写方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:35:00.540

```
header, body =
fcs
.flat_map{|k1, h| h.map{|k2, v| ["#{k2}.#{k1}".sub(/point\./, ""), v]}}
.transpose

[header, *body.transpose].map{|e| e.join(",")}.join($/) 
```

给出：

```
lower.bla,bla,upper.bla,lower.blo,blo,upper.blo
17.12241,21.84838,26.57434,17.12241,21.84838,26.57434
18.79847,23.86319,28.92791,18.79847,23.86319,28.92791
17.71413,23.93176,30.14938,17.71413,23.93176,30.14938
18.49174,25.19658,31.90142,18.49174,25.19658,31.90142
18.30381,25.72613,33.14845,18.30381,25.72613,33.14845
18.78557,26.70761,34.62966,18.78557,26.70761,34.62966
18.93176,27.41132,35.89088,18.93176,27.41132,35.89088
19.33453,28.28576,37.23698,19.33453,28.28576,37.23698
19.62619,29.05525,38.48432,19.62619,29.05525,38.48432
20.02301,29.88925,39.7555,20.02301,29.88925,39.7555 
```

# actionscript-3 - Flash 滑块组件

> ID：15316960
> 
> 赞同：0
> 
> 时间：2013-03-09T23:06:47.063
> 
> 标签：actionscript-3, flash, actionscript, flash-cs6

我刚开始自学flash，我决定制作一个很酷的小图片库（有点像家庭相册）。当我测试电影时，第一张图片加载在中心。图像下方是缩略图大小的小按钮，可以单击这些按钮，图像将加载到中心。因为我要合并很多照片，所以我想使用滑块（从左到右），这样我就可以在照片中来回滚动并找到我想要点击显示的照片。

由于我没有使用 Action-script 的经验，我希望有人能让我开始这个过程，并解释一下 Slider 是如何工作的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:25:39.900

您可以轻松创建自己的滑块，并在过程中学习一些东西:)。

在滑块中 - 旋钮的移动，必须对应于画廊的移动，其中画廊的大小被转换为滑块的大小。基本上就是这样。所以你需要一些数学公式和基本元素：

> gallery.width/slider.width - 确定画廊是否比滑块宽（因此您希望继续滑动），您还可以使用此比例来确定旋钮的大小。因此，如果画廊小于滑块 - 那么您可能不会渲染滑块，或者将旋钮设置为滑块的大小，因此它是不可移动的。或者使旋钮的大小与画廊溢出的大小成比例 - 只需尝试我在这里写的所有内容。

您还需要使用这些元素：

1.  图库（显示对象），
2.  画廊的面具/容器（画廊的可见部分），
3.  滑块，
4.  旋钮。
5.  矩形对象

Gallery 将只是一个显示对象，其中包含所有图像作为子项。

掩码/容器将是显示对象，它将提供部分画廊可见的区域边界

滑块 - 任何 Sprite

旋钮 - 任何 Sprite

矩形 - 当然是矩形对象，宽度为slider.width - 旋钮.width，高度为0，因此它允许沿着滑块拖动旋钮而不会超出滑块，通过使用函数：

```
knob.startDrag(false, rect); // Use it at MouseEvent.MOUSE_DOWN of knob

knob.stopDrag() // Use it at MouseEvent.MOUSE_OUT of knob 
```

您可以使用以下代码创建矩形：

```
new Rectangle(0, knob.x, slider.width - knob.width, 0); 
```

您需要将旋钮的移动转换为画廊的移动，如下所示：

```
// When moving knob you can use this formula:
gallery.x = knob.y / (slider.width - knob.width) * (gallery.width - mask.width); // Use it at MouseEvent.MOUSE_MOVE of knob 
```

我认为应该是这样，我是根据我前一段时间写的一些库从头顶写的，所以如果你遇到任何问题，请告诉我，但我认为这些都是你需要的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:13:52.523

看看[ScrollPane](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/ScrollPane.html)
将缩略图添加到容器中，并将其用作 Scrollpane 的源，滚动将得到处理

# ajax - $.ajax statusCode handlers called after promise object returns complete

> ID：15316963
> 
> 赞同：0
> 
> 时间：2013-03-09T23:07:20.523
> 
> 标签：ajax, error-handling, http-status-code-404

I'm trying to write some qunit unit tests for my knockout view models and I've run into an interesting issue.

In my view model I have the following function:

```
 Get = function (id) {
        return $.ajax({
            url: API + "/" + id,
            type: 'GET',
            dataType: 'json',
            timeout: Timeout,
            statusCode: {
                200: GetOneSuccess,
                404: ItemNotFound
            },
            error: function () {
                //Item(null);
            }
        });
    }, 
```

Then in my unit test I have this:

```
vm.Get(vm.Item().Id()).then(function () {                    
   ok(false, "Failure!");
},function () {
   equal(vm.Item(), null, "Item was removed");
   start();
}); 
```

ItemNotFound is as follows:

```
 ItemNotFound = function () {
        Item(null);
    } 
```

This is pretty straight forward, if the API controller returns "NotFound (Error 404)" set the Item to null. I am finding that my test if failing because when "then" is called the ItemNotFound function has not completed yet.

If I add a timeout to my unit test, it works:

```
 vm.Get(vm.Item().Id()).then(function () {                    
                    ok(false, "Failure!");
            },function () {
                    setTimeout(function () {
                        equal(vm.Item(), null, "Item was removed");
                        start();
                    }, 2000);
            }); 
```

Anyone have any thoughts? Should I just not bother with the statusCodes and just handle all error types in the error handler? Doesn't seem as elegant.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:37:05.610

在触发状态代码函数之前首先触发错误处理程序。“then”函数接受“成功回调”和“错误回调”。所以本质上，你的错误（失败）是在状态码“notfound”触发之前触发的。

当您设置超时时，该函数会立即返回，触发您的状态代码，然后根据您设置的超时，触发该特定代码。

如果您仍然想要现有的代码结构，那么这就是我的做法。您的 GET 函数应该返回一个封装了实际 ajax 调用的延迟承诺对象，并且不指定成功或错误处理程序，并首先从您的 statusCode 调用您的成功或错误函数。

我为此创建了一个小提琴

[http://jsfiddle.net/sujesharukil/BWA9D/15/](http://jsfiddle.net/sujesharukil/BWA9D/15/)

```
var data = {
    json: $.toJSON({
        text: 'some text',
        array: [1, 2, 'three'],
        object: {
            par1: 'another text',
            par2: [3, 2, 'one'],
            par3: {}
        }
    })
}

var callEcho = function(url) {
    return $.Deferred(function(def){
        $.ajax({
        url: url,
        type: "POST",
        data: data,
        statusCode: {
            200: function(data,xhr){
                GetOneSuccess();
                def.resolve(data);
            },
            404: function(xhr){
                ItemNotFound();
                def.reject();
            }
        }
    });    
}).promise();

};

function GetOneSuccess(){
    alert('Get One success Called');
}

function ItemNotFound(){
    alert('Item Not Found Called');
}

var testFunc = function(url){
    var js = callEcho(url);
    js.done(function(data){
        alert(JSON.stringify(data) + ' done function called');
    });

    js.fail(function(){
        alert('fail function called.');
    });
}

//fire the success
testFunc("/echo/json/" );

//fire the fail
testFunc("/echo/jso/"); 
```

# node.js - grunt uglify 任务失败

> ID：15316964
> 
> 赞同：6
> 
> 时间：2013-03-09T23:07:24.457
> 
> 标签：node.js, gruntjs

运行 grunt 时，出现以下错误：

> 警告：无法写入“client/dist/js/build.js”文件（错误代码：未定义）。使用 --force 继续。

我的 uglify 配置`Gruntfile.js`：

```
uglify: {
      build: {
        src: ['client/src/js/*.js'],
        dest:['client/dist/js/build.js']
      }
    } 
```

我正在使用`grunt-contrib-uglify`.

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T10:11:30.790

假设你的 Grunt 版本是 0.4.0，AFAIK 你没有使用最新的语法（参见[https://github.com/gruntjs/grunt-contrib-uglify#usage-examples](https://github.com/gruntjs/grunt-contrib-uglify#usage-examples)）。

尝试

```
uglify: {
    build: {
        files: {
            'client/dist/js/build.js': ['client/src/js/*.js']
        }
    }
} 
```

我也不确定通配符是否处理得当。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-13T04:29:22.350

我知道这被标记为已解决，但我仍然更喜欢[类似问题的答案，](https://stackoverflow.com/a/15523431/1092815)因为您可以轻松地将文件再次用于其他命令，而无需两次编写它们。

简而言之，答案说

```
//Does not work
src: ['client/src/js/*.js'],
dest: ['client/dist/js/build.js']
//Works
src: ['client/src/js/*.js'],
dest: 'client/dist/js/build.js' 
```

**没有两次写入文件**的测试工作示例：****

 **```
'use strict';
module.exports = function(grunt) {
  grunt.initConfig({
    uglify: {
      build: {
        src: ['client/src/js/*.js'],
        dest: 'client/dist/js/build.js'
      }
    },
    watch: {
      js: {
        files: '<%= uglify.build.src %>',
        tasks: ['uglify']
      }
    }
  });
  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.registerTask('default', [
    'uglify',
    ]);
  grunt.registerTask('dev', [
    'watch'
    ]);
}; 
```

请注意，这`'<%= uglify.build.src %>'`非常方便；）

**执行**

```
$ grunt watch
Running "watch" task
Waiting...OK
>> File "client/src/js/hello.js" changed.
Running "uglify:build" (uglify) task
File "client/dist/js/build.js" created.
Uncompressed size: 15 bytes.
Compressed size: 32 bytes gzipped (15 bytes minified).

Done, without errors. 
```**

# plugins - Cordova.exec 函数不运行本机函数

> ID：15316974
> 
> 赞同：7
> 
> 时间：2013-03-09T23:08:29.627
> 
> 标签：plugins, cordova, ibm-mobilefirst

我尝试在 IBM worklight 中制作一个 cordova 插件。

Javascript：

```
HelloWorld = {     
  sayHello: function (success, fail, resultType) { 
      Cordova.exec( 
          success, 
          fail, 
          "HelloWorld", 
          "HelloWorld", 
           [resultType]
      );
   }
};

function callFunction() {
    HelloWorld.sayHello(basarili, basarisiz, "sinan");
} 
```

爪哇：

```
package com.Cordova1;
import org.apache.cordova.api.CordovaPlugin;
import org.json.JSONArray;

import android.util.Log;
public class HelloWorld extends CordovaPlugin {
    public boolean execute(String arg0, JSONArray arg1, String arg2) {
        Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!"); 
        return true;
    }
} 
```

当我调用 callFunction 时，我看到 fail 函数有效。此外，我在日志窗口中看不到任何 HelloPlugin 消息。我能做些什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:29:39.920

示例中的模块 09_3 ApacheCordovaPlugin 确实使用了已弃用的插件类而不是 CordovaPlugin。我在模块 09_3 中重写了 HelloWorldPlugin 类，以消除已弃用的 Cordova Plugin API 使用。样品工作正常。

```
package com.AndroidApacheCordovaPlugin;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.json.JSONArray;
import org.json.JSONException;

public class HelloWorldPlugin extends CordovaPlugin {

    @Override
    public boolean execute(String action, JSONArray arguments,
            CallbackContext callbackContext) throws JSONException {

        if (action.equals("sayHello")) {
            String responseText = "Hello world";
            try {
                responseText += ", " + arguments.getString(0);
                callbackContext.success(responseText);
                return true;
            } catch (JSONException e) {
                callbackContext.error(e.getMessage());
            }
        } else {
            callbackContext.error("Invalid action: " + action);
            return false;
        }
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T05:04:50.503

有几件事，1）您是否在 config.xml 文件中为您的插件添加了一行？和 2) 你似乎覆盖了 CordovaPlugin 中的错误方法。它应该是：

```
public boolean execute(String action, JSONArray args, CallbackContext callbackContext) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:09:15.923

我遇到了同样的问题。查看`09_3 ApacheCordovaPlugin`示例中的模块。该示例确实对我有用，但他们使用的是已弃用的`Plugin`类而不是`CordovaPlugin`.

```
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

...

public class HelloWorldPlugin extends Plugin {

    public PluginResult execute(String action, JSONArray arguments, String callbackId) { 
```

不推荐使用的类返回`PluginResult`，而不是`boolean`。我已经使用`CordovaPlugin`签名尝试了相同的代码，但每次都会导致**失败。**显然，任何调用插件的 WL 代码显然都在期待已弃用类的签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:18:43.190

我解决了这个问题。我使用的是cordova 2.4版。我不明白为什么它不起作用。当我使用“cordova.exec”时它不起作用，但是当我使用 PhoneGap.exec 时它起作用。

我也寻找定义；在 cordova-2.4.0.js 的最后一行，它说 var PhoneGap = cordova; 好的，Phonegap 已定义，但我不知道为什么 cordova 不起作用。

谢谢您的回答。

# junit - 安卓。机器人电动。测试 AccountManager 结果

> ID：15316975
> 
> 赞同：5
> 
> 时间：2013-03-09T23:08:31.653
> 
> 标签：junit, mockito, robolectric, android-testing

在我的应用程序中，我使用与客户经理一起获取所有者电子邮件的方法。我如何用 Robolectric 测试这种方法？我应该为此目的使用模拟吗？如果我是对的，我可以使用 Mockito 吗？有任何教程我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T10:00:24.033

首先我实现了单元测试

```
// Imports are skipped
/**
 * Created by fminatchy on 25/02/14.
 */
@RunWith(RobolectricTestRunner.class)
@Config(manifest = "/src/main/AndroidManifest.xml")
public class TestAuthorization {

    AccountManager accountManager;

    Account account0;
    Account account1;
    Account account2;

    @Before
    public void init() {
        creationComptes();
        accountManager = AccountManager.get(Robolectric.application);
        shadowOf(accountManager).addAccount(account0);
        shadowOf(accountManager).addAccount(account1);
        shadowOf(accountManager).addAccount(account2);
    }

    @Test
    public void test_comptes() {
       final AlbumsActivity activity = Robolectric.buildActivity(AlbumsActivity.class).create().get();

       final String[] accountsName = activity.getGoogleAccounts();
       assertThat(Arrays.asList(accountsName)).containsExactly("compte n°1", "compte n°3");

    }

    private void creationComptes() {
        account0 = new Account("compte n°1", GoogleAccountManager.ACCOUNT_TYPE);
        account1 = new Account("compte n°2", "pas google");
        account2 = new Account("compte n°3", GoogleAccountManager.ACCOUNT_TYPE);
    } 
```

它们是位于活动中的代码：

```
 public String[] getGoogleAccounts() {
        final AccountManager accountManager = AccountManager.get(this.getApplicationContext());
        Account[] accounts = accountManager.getAccountsByType(GoogleAccountManager.ACCOUNT_TYPE);
        String[] names = new String[accounts.length];
        for (int i = 0; i < names.length; i++) {
            names[i] = accounts[i].name;
        }
        return names;
    } 
```

# java - 获取Java数组的最后一个元素的任何更简单的方法？

> ID：15316979
> 
> 赞同：13
> 
> 时间：2013-03-09T23:08:44.493
> 
> 标签：java

```
String sentence = "Any simpler way to get the last element of a Java array?";
String lastToken = sentence.split(" ")[sentence.split(" ").length-1]; 
```

我想拆分句子并获得最后一个标记。我觉得我这样做的方式有点太尴尬了。基本上，我希望第二个语句更短。那可能吗？

**编辑**：我在找什么：1）无需单独声明数组 2）无需将句子拆分两次。如果有一个`last`用数组调用的方法会很好。我怀疑这是不可能的，但想确定一下。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T23:16:00.673

获取最后一个标记/单词的另一种方法

```
String lastToken = sentance.replaceAll(".* ", ""); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-09T23:11:30.083

您只需要拆分一次，然后取最后一个元素。

```
String sentence = "Any simpler way to get the last element of a Java array?";
String[] tokens = sentence.split(" ");
String lastToken = tokens[tokens.length-1]; 
```

这很尴尬，但是除非您预先知道字符串的长度，否则实际上没有其他方法可以做到这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T23:15:50.920

```
String sentence = "Any simpler way to get the last element of a Java array?";
String lastToken = sentence.substring( sentence.lastIndexOf(" ") + 1); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-09T23:21:20.243

如果您只这样做一次，那么 Peter Lawrey 的解决方案会更短，尽管 IMO 比原始版本更难理解。

如果您在多个地方执行此操作，那么以下方法会更好：

```
public String lastToken(String str, String separatorRegex) {
    String tokens[] = str.split(separatorRegex);
    return tokens[tokens.length - 1];
} 
```

进而

```
String lastToken = lastToken(sentence, " "); 
```

......这比任何聪明的黑客都更优雅...... IMO。

* * *

我更一般的观点是，试图缩短单行代码所花费的时间可能是浪费时间......或更糟的是：

*   从其他人阅读您的代码的角度来看，一行与两行是无关紧要的。
*   如果使行更短的巧妙技巧晦涩难懂，那么从下一个阅读/维护您的代码的人的角度来看，您实际上使用它做了一件坏事。
*   如果聪明的 hack 比不雅的版本效率低，您*可能*已经引入了性能问题。

但是，如果您在很多地方重复该行代码（或类似代码），那么最好的解决方案是使用过程抽象。编写一个静态或实例方法......一次......并多次调用它。

# spring - MappingInstantiationException 在春季从 mongo 检索多维度双精度数组

> ID：15316980
> 
> 赞同：1
> 
> 时间：2013-03-09T23:08:47.343
> 
> 标签：spring, mongodb, spring-mvc, spring-data

我正在使用 MongoDB 构建一个 Spring MVC 应用程序。我如何在春天从 mongo 读取矩阵？我有一个模型使用 MongoTemplate 类可以很好地坚持到 mongo：

```
Matrix m = new Matrix();
m.setId(UUID.randomUUID().toString());
m.setValues(values);
mongoTemplate.insert(m, "matrix"); 
```

上面的代码工作得很好。Values 是一个 double[][] 并且它是持久的。我正在使用 MongoRepository 类的扩展来对矩阵列表进行 findAll() 调用。

```
public interface MatrixRepository extends MongoRepository<Matrix, String> {

    Matrix findById(String id);
} 
```

在我的服务类中：

```
public List<Matrix> readAll() {
    return matrixRepository.findAll();
} 
```

调用 this 会导致以下堆栈跟踪：

```
org.springframework.data.mapping.model.MappingInstantiationException: Could not instantiate bean class [java.lang.Double]: No default constructor found; nested exception is java.lang.NoSuchMethodException: java.lang.Double.<init>()
    org.springframework.data.mapping.model.BeanWrapper.<init>(BeanWrapper.java:105)
    org.springframework.data.mapping.model.BeanWrapper.create(BeanWrapper.java:73)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:239)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:187)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.readCollectionOrArray(MappingMongoConverter.java:736)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:695)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:252)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter$2.doWithPersistentProperty(MappingMongoConverter.java:242)
    org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:173)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:242)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:187)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:151)
    org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:73)
    org.springframework.data.mongodb.core.MongoTemplate$ReadDbObjectCallback.doWith(MongoTemplate.java:1693)
    org.springframework.data.mongodb.core.MongoTemplate.executeFindMultiInternal(MongoTemplate.java:1444)
    org.springframework.data.mongodb.core.MongoTemplate.doFind(MongoTemplate.java:1259)
    org.springframework.data.mongodb.core.MongoTemplate.doFind(MongoTemplate.java:1248)
    org.springframework.data.mongodb.core.MongoTemplate.find(MongoTemplate.java:471)
    org.springframework.data.mongodb.repository.support.SimpleMongoRepository.findAll(SimpleMongoRepository.java:255)
    org.springframework.data.mongodb.repository.support.SimpleMongoRepository.findAll(SimpleMongoRepository.java:192)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T09:27:11.783

如果您的 monogo 实体类在 spring data mongodb 1.0.0.M5 环境中具有 Double 或 double 字段，则会发生这种情况。您可以通过在 pom.xml 中用更新版本 1.3.3 RELEASE 替换您的 spring 数据 mongodb 来解决此问题

# numpy - Numpy：通过平均重新网格化？

> ID：15316985
> 
> 赞同：2
> 
> 时间：2013-03-09T23:09:12.613
> 
> 标签：numpy

我正在尝试将一个 numpy 数组重新网格到一个新网格上。在这种特定情况下，我试图将功率谱重新网格到对数网格上，以便数据以对数均匀分布以用于绘图目的。

使用直接插值执行此操作`np.interp`会导致某些原始数据被完全忽略。Using`digitize`得到了我想要的结果，但我必须使用一些丑陋的循环来让它工作：

```
xfreq = np.fft.fftfreq(100)[1:50] # only positive, nonzero freqs
psw = np.arange(xfreq.size) # dummy array for MWE

# new logarithmic grid
logfreq = np.logspace(np.log10(np.min(xfreq)), np.log10(np.max(xfreq)), 100)

inds = np.digitize(xfreq,logfreq)

# interpolation: ignores data *but* populates all points
logpsw  = np.interp(logfreq, xfreq, psw)
# so average down where available...
logpsw[np.unique(inds)] = [psw[inds==i].mean() for i in np.unique(inds)]

# the new plot
loglog(logfreq, logpsw, linewidth=0.5, color='k') 
```

在 numpy 中是否有更好的方法来实现这一点？只需替换内联循环步骤，我就会感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:12:19.677

您可以使用`bincount()`两次来计算每个 bin 的平均值：

```
logpsw2  = np.interp(logfreq, xfreq, psw)
counts = np.bincount(inds)
mask = counts != 0
logpsw2[mask] = np.bincount(inds, psw)[mask] / counts[mask] 
```

或使用`unique(inds, return_inverse=True)`and`bincount()`两次：

```
logpsw4  = np.interp(logfreq, xfreq, psw)
uinds, inv_index = np.unique(inds, return_inverse=True)
logpsw4[uinds] = np.bincount(inv_index, psw) / np.bincount(inv_index) 
```

或者，如果您使用 Pandas：

```
import pandas as pd
logpsw4  = np.interp(logfreq, xfreq, psw)
s = pd.groupby(pd.Series(psw), inds).mean()
logpsw4[s.index] = s.values 
```

# ios - iOS 应用程序如何通过 iTunes 更新文件

> ID：15316989
> 
> 赞同：0
> 
> 时间：2013-03-09T23:09:29.537
> 
> 标签：ios

是否可以通过 iTunes 更新文件并从应用程序中读取？如果是，我该怎么做。
明确地说，我想拥有一个配置文件，该配置文件将与我的应用程序一起分发，我在一开始就阅读了该文件。现在，如果稍后通过 iTunes 下载另一个此类文件（例如，从用户的计算机上），是否可以读取它？无论如何它最终会在哪里？以及我需要搜索哪个特定的编程章节。

我只需要一个一般准则。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:00:03.643

按照 rmandy 的建议在 Plist 中启用 iTunes 文件共享后，您可以在以下位置访问这些文件：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

# android - 在没有 Eclipse 的情况下使用 jar 库

> ID：15316994
> 
> 赞同：0
> 
> 时间：2013-03-09T23:10:01.393
> 
> 标签：android, jar

我已经使用`android create project`. `package com.notreal`我在下面有我自己的代码`src/notreal/`。根据几乎无处不在，我所要做的就是将图书馆放入`libs/`

我正在尝试使用的库是 Google 的 Gson 库。我已经下载了一个`.zip`扩展为包含几个`.jar`文件的目录。我将整个目录移入`libs/`并包含`com.google.json`在我的源代码中。

问题是它看不到库。我得到`error: package com.google.json`不存在。我已经尝试了所有我能找到的东西，从使用`ant -lib lib debug`,`and -lib libs`到对所有`.jar`文件都直接在`libs/`.

从字面上看，那里的每一个答案都假设一个人正在使用 Eclipse。我没有使用 Eclipse，所以请不要发布如何使用 Eclipse 进行操作。

库在这里 - [http://code.google.com/p/google-gson/downloads/detail?name=google-gson-2.2.2-release.zip](http://code.google.com/p/google-gson/downloads/detail?name=google-gson-2.2.2-release.zip)

`ls libs/`-`gson-2.2.2.jar gson-2.2.2-javadoc.jar gson-2.2.2-sources.jar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:21:30.260

删除`gson-2.2.2-javadoc.jar`and`gson-2.2.2-sources.jar`文件，因为它们不是包含已编译 Java 代码的 JAR 文件。从那里，你应该没问题：

```
package com.example.asdfasd;

import android.app.Activity;
import android.os.Bundle;
import com.google.gson.Gson;

public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Gson g=new Gson();
  }
} 
```

只需`gson-2.2.2.jar`in `libs/`，它就可以从命令行和 Eclipse 编译而不会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:21:52.553

您可以在 ant 中指定 javac 的类路径。然后编译器可以看到该库。

```
<javac ...>
  <classpath>
    <pathelement location="lib/"/>
    <pathelement path=".../"/>
  </classpath>
</javac> 
```

# php - Joomla 1.5 密码检查

> ID：15316997
> 
> 赞同：1
> 
> 时间：2013-03-09T23:10:13.937
> 
> 标签：php, joomla

我继承了一个 joomla 1.5 站点，该站点有一个无法以最佳方式运行的重置密码组件。ATM 我可以将密码重置发送到用户输入的电子邮件，但该组件缺少一个功能，该功能可以检查现有用户以查看电子邮件是否有效。我对 PHP 比较陌生，所以我不能 100% 确定如何引入额外的 if 语句。

到目前为止的情况如下：

```
public function submitemail() {
    $db = JFactory::getDBO() ;
    $requestedEmail =   JRequest::getVar('emailaddr' , '') ;
    $db->setQuery('select id , username, name, email from #__users where block = 0  and email = "'.$requestedEmail.'"') ;
    if( $user =  $db->loadObject() )  {

        // Make sure the user isn't a Super Admin.
        $juser = JFactory::getUser($user->id) ;
        //joomla 1.6 and 1.5 check  
        if ($juser->authorize('core.admin') || $juser->usertype == 'Super Administrator') {
            $this->setRedirect( 'index.php?option=com_resetpassword'  , 'Email is not valid' ) ;        
        }
        else {          
            $result = $this->sendPasswordResetEmail( $user ) ;
            $this->setRedirect( 'index.php?option=com_resetpassword&layout=success'  //, 'Please check your email and follow the instructions to reset your password ' 
                ) ;
        }
    }
    else {
        $this->setRedirect( 'index.php?option=com_resetpassword'  );
    }
} 
```

我偶然发现了一个相关的帖子，在那里我找到了这个片段。我将如何检查当前数据库中的电子邮件地址与用户输入的电子邮件以进行重置？

```
function validate()
{ jimport('joomla.mail.helper');
$valid = true;
 if ($this->_data->email && !JMailHelper::isEmailAddress($this->_data->email))
{           
     $this->_app->enqueueMessage(JText::_('Invalid Email Address'),'error');                       
     $valid = false;           
}   
return $valid; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:48:05.290

这实际上正是它已经在做的事情。顶部根据提交的电子邮件地址为用户加载行：

```
$requestedEmail =   JRequest::getVar('emailaddr' , '') ;
$db->setQuery('select id , username, name, email from #__users where block = 0  and email = "'.$requestedEmail.'"') ;
if( $user =  $db->loadObject() )  {
    ... 
```

您可能需要做的就是在底部的 else 语句中添加一条消息，说明何时失败：

```
else {
    $this->_app->enqueueMessage(JText::_('Invalid Email Address'),'error');
    $this->setRedirect( 'index.php?option=com_resetpassword'  );
} 
```

如果`$this->_app`未设置，您应该可以通过使用它来获得它：

```
JFactory::getApplication()->enqueueMessage(JText::_('Invalid Email Address'),'error'); 
```

# llvm - 如何查找 llvm::Instruction 是否在流控制中？

> ID：15316998
> 
> 赞同：2
> 
> 时间：2013-03-09T23:10:39.077
> 
> 标签：llvm, llvm-ir

使用 LLVM，我试图找出流控制（if/switch/for）等中是否存在指令，我必须在 IR 级别执行此操作。伪代码如下所示。

```
if cond
    inst
endif 
```

我正在查看函数的 SCC，但我不确定如何推断指令是否存在于流控制中。

以这个 IR 的 Kaleidoscope 示例为例。

```
declare double @foo()

declare double @bar()

define double @baz(double %x) {
entry:
  %ifcond = fcmp one double %x, 0.000000e+00
  %0 = call double @foo()
  br i1 %ifcond, label %then, label %else

then:       ; preds = %entry
  %calltmp = call double @foo()
  br label %ifcont

else:       ; preds = %entry
  %calltmp1 = call double @bar()
  br label %ifcont

ifcont:     ; preds = %else, %then
  %iftmp = phi double [ %calltmp, %then ], [ %calltmp1, %else ]
  %1 = call double @foo()
  ret double %iftmp
} 
```

所以在上面的 IR 中，假设我想找出对函数 foo 的所有调用。因此，在入口块中，我们有一个使用 %0 的调用和一个在 then: 块中的调用，我们对 foo 进行了另一个调用，最后一个在 ifcont: 块中。

所以问题是，虽然 then: 块中的调用落在 if 块生成的代码中，但我该如何推断呢？即 entry 块和 ifcont 块将被执行，但是 then: 块不一定会根据条件执行。

有人可以给我一些指示吗？谢谢

编辑：再想一想，支配树可能有助于确定这一点，但我还没有这方面的算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T00:18:52.407

[以下是维基百科](http://en.wikipedia.org/wiki/Dominator_%28graph_theory%29)对统治后指令的定义：

> 类似于上述支配性的定义，如果从 n 开始到图的出口节点的所有路径都必须经过 z，则称节点 z 后支配节点 n。

在我看来，在您的情况下，您正在寻找在函数中占主导地位的第一条指令的调用。根据后支配的定义，这样的调用必须从第一条指令开始在每条路径上到达。这是你需要的吗？

您可以运行`DominatorTree`似乎支持后支配分析的通行证。

# r - 优化基础 R 中的重新编码

> ID：15316999
> 
> 赞同：8
> 
> 时间：2013-03-09T23:10:45.627
> 
> 标签：r, base

我正在根据一些相当长的字符串对变量进行重新编码，这里以字符串 A、B、C、D、E 和 G 为例。我想知道是否有一种方法可以重新编码，而不必重复引用`df$foo`使用基础 R 12 次？也许我可以探索一些更聪明更快的方式？这真的是在 R 中最聪明的方法吗？

```
df <- data.frame(
  foo = 1000:1010,
  bar = letters[1:11])
df  
    foo bar
1  1000   a
2  1001   b
3  1002   c
4  1003   d
5  1004   e
6  1005   f
7  1006   g
8  1007   h
9  1008   i
10 1009   j
11 1010   k

A  <- c(1002)
B  <- c(1007, 1008)
C  <- c(1001, 1003)
D  <- c(1004, 1006)
E  <- c(1000, 1005)
G  <- c(1010, 1009)

df$foo[df$foo %in% A] <- 1
df$foo[df$foo %in% B] <- 2
df$foo[df$foo %in% C] <- 3
df$foo[df$foo %in% D] <- 4
df$foo[df$foo %in% E] <- 5
df$foo[df$foo %in% G] <- 7
df
   foo bar
1    5   a
2    3   b
3    1   c
4    3   d
5    4   e
6    5   f
7    4   g
8    2   h
9    2   i
10   7   j
11   7   k 
```

## 更新于 2013-03-11 05:28:061Z,

我已经重写了函数的五个解决方案，以便能够使用 microbenchmark 包对它们进行比较，结果是 Tyler Rinker 和 flodel 的解决方案是最快的解决方案（见下面的结果），并不是说这个问题仅与速度有关。我也在寻找解决方案的简洁性和*智能性*。出于好奇，我还使用`Recode`car 包中的功能添加了一个解决方案。如果我可以以更优化的方式重写解决方案，或者 microbenchmark 包不是比较这些功能的最佳方式，请随时告诉我。

```
df <- data.frame(
  foo = sample(1000:1010, 1e5+22, replace = TRUE),
  bar = rep(letters, 3847))
str(df)

A  <- c(1002)
B  <- c(1007, 1008)
C  <- c(1001, 1003)
D  <- c(1004, 1006)
E  <- c(1000, 1005)
G  <- c(1010, 1009)

# juba's solution
juba <- function(df,foo) within(df, {foo[foo %in% A] <- 1; foo[foo %in% B] <- 2;foo[foo %in% C] <- 3;foo[foo %in% D] <- 4;foo[foo %in% E] <- 5;foo[foo %in% G] <- 7})
# Arun's solution
Arun <- function(df,x) factor(df[,x], levels=c(A,B,C,D,E,G), labels=c(1, rep(c(2:5, 7), each=2)))
# flodel's solution
flodel <- function(df,x) rep(c(1, 2, 3, 4, 5, 7), sapply(list(A, B, C, D, E, G), length))[match(df[,x], unlist(list(A, B, C, D, E, G)))]
# Tyler Rinker's solution
TylerRinker <- function(df,x)  data.frame(vals = unlist(list(A  = c(1002),B  = c(1007, 1008),C  = c(1001, 1003),D  = c(1004, 1006),E  = c(1000, 1005), G = c(1010, 1009))), labs = c(1, rep(c(2:5, 7), each=2)))[match(df[,x], unlist(list(A  = c(1002),B  = c(1007, 1008),C  = c(1001, 1003),D  = c(1004, 1006),E  = c(1000, 1005), G = c(1010, 1009)))), 2] 
# agstudy's solution
agstudy <- function(df,foo) merge(df,data.frame(foo=unlist(list(A, B, C, D, E, G)), val =rep((1:7)[-6],rapply(list(A, B, C, D, E, G), length))))
# Recode from the car package
ReINcar <- function(df,x) Recode(df[,x], "A='A'; B='B'; C='C'; D='D'; E='E'; G='G'")

# install.packages("microbenchmark", dependencies = TRUE)
require(microbenchmark)

# run test
res <- microbenchmark(juba(df, foo), Arun(df, 1), flodel(df, 1), TylerRinker(df,1) ,agstudy(df, foo), ReINcar(df, 1), times = 25)
There were 15 warnings (use warnings() to see them) # warning duo to x's solution

## Print results:
print(res) 
```

号码，

```
 Unit: milliseconds
                   expr        min         lq     median         uq        max neval
          juba(df, foo)  37.944355  39.521603  41.987174  46.385974  79.559750    25
            Arun(df, 1)  23.833334  24.115776  24.648842  26.987431  55.466448    25
          flodel(df, 1)   3.586179   3.637024   3.956814   6.468735  28.404166    25
     TylerRinker(df, 1)   3.919563   4.115994   4.529926   5.532688   8.508956    25
       agstudy(df, foo) 301.487732 324.641734 334.801005 352.753496 415.421212    25
         ReINcar(df, 1)  73.655566  77.903088  81.745037 101.038791 125.158208    25

### Plot results:
boxplot(res) 
```

### 微基准测试结果的箱线图，

![微基准测试结果的箱线图](../Images/24f64ed4823e16b2c21f0744680c937f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T00:09:42.460

这是一种通用（可扩展）方法，也非常快：

```
sets <- list(A, B, C, D, E, G)
vals <-    c(1, 2, 3, 4, 5, 7)

keys   <- unlist(sets)
values <- rep(vals, sapply(sets, length))
df$foo <- values[match(df$foo, keys)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T23:17:19.560

Using `within` can help you save some keystrokes :

```
df <- within(df,
       {foo[foo %in% A] <- 1;
        foo[foo %in% B] <- 2;
        foo[foo %in% C] <- 3;
        foo[foo %in% D] <- 4;
        foo[foo %in% E] <- 5;
        foo[foo %in% G] <- 7}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T23:26:00.110

你也可以这样做：（已编辑）

```
> df$foo <- factor(df$foo, levels=c(A,B,C,D,E,G), labels=c(1, rep(c(2:5, 7), each=2)))

# Warning message:
# In `levels<-`(`*tmp*`, value = if (nl == nL) as.character(labels) else paste0(labels,  :
#   duplicated levels will not be allowed in factors anymore

#    foo bar
# 1    5   a
# 2    3   b
# 3    1   c
# 4    3   d
# 5    4   e
# 6    5   f
# 7    4   g
# 8    2   h
# 9    2   i
# 10   7   j
# 11   7   k 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-10T00:12:31.287

我的方法（失去 A、B、C ......但我看到弗洛德尔的方法非常相似）。

```
keyL <- list(
    A  = c(1002),
    B  = c(1007, 1008),
    C  = c(1001, 1003),
    D  = c(1004, 1006),
    E  = c(1000, 1005),
    G  = c(1010, 1009)
)

key <- data.frame(vals = unlist(keyL), labs = c(1, rep(c(2:5, 7), each=2)))

df$foo2 <- key[match(df$foo, key$vals), 2] 
```

我不喜欢写旧专栏，所以创建了一个新专栏。我还将密钥存储为命名列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-10T03:29:49.993

另一种选择是使用`merge`，非常类似于@flodel 和@Tyler 方法

```
sets <- list(A, B, C, D, E, G)
df.code = data.frame(foo=unlist(sets),
                     val =rep((1:7)[-6],rapply(sets, length)))
> merge(df,df.code)
    foo bar val
1  1000   a   5
2  1001   b   3
3  1002   c   1
4  1003   d   3
5  1004   e   4
6  1005   f   5
7  1006   g   4
8  1007   h   2
9  1008   i   2
10 1009   j   7
11 1010   k   7 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-22T23:07:14.520

我认为这可以满足您的要求，尽管使用的格式略有不同。这可能是最快的方法。

```
library(data.table)

## Create the sample data:
dt <- data.table(foo=sample(1000:1010, 1e5+22, replace = TRUE), bar=rep(letters, 3847), key="foo")

## Create the table that maps the old value of foo to the new one:
dt.recode<-data.table(foo_old=1000:1010, foo_new=c(5L, 3L, 1L, 3L, 4L, 5L, 4L, 2L, 2L, 7L, 7L), key="foo_old")

## Show the result of the join/merge between the original and recoded table:
## (not necesary if you only want to update the original table)
dt[dt.recode]
##       foo bar foo_new
##  1: 1000   a       5
##  2: 1001   b       3
##  3: 1002   c       1
##  4: 1003   d       3
##  5: 1004   e       4
##  6: 1005   f       5
##  7: 1006   g       4
##  8: 1007   h       2
##  9: 1008   i       2
## 10: 1009   j       7
## 11: 1010   k       7

## Same as above, but updates the value of foo in the original table:
dt[dt.recode,foo:=foo_new][]
##     foo bar
##  1:   5   a
##  2:   3   b
##  3:   1   c
##  4:   3   d
##  5:   4   e
##  6:   5   f
##  7:   4   g
##  8:   2   h
##  9:   2   i
## 10:   7   j
## 11:   7   k 
```

如果您愿意，而不是从头开始创建数据表，以下是如何将您的数据框转换为数据表（并添加稍后连接所需的键）：

```
dt <- as.data.table(df)
setkey(dt,foo) 
```

我不确定你想如何使用这种方法计算时间，但假设 dt 和 dt.recode 已经存在并且已经被键入，然后运行更新表的单行显示我的系统上的 0 已用时间。

此外，如果您的 A、B、C、D、E、G 组有任何内在含义，我会将它们作为一列添加到您的原始表中。然后你可以加入这个字段，dt.recode 只需要 6 行（假设你有六个组）。