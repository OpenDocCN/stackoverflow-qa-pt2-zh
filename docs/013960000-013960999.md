# StackOverflow 问答 13960000-13960999

# ember.js - angular.js 与 ember.js 的具体好处是什么

> ID：13960000
> 
> 赞同：2
> 
> 时间：2012-12-19T19:46:32.400
> 
> 标签：ember.js, angularjs, angular-ui

本周我一直在这两个家伙之间进行研究，以便明年参与一个项目。到目前为止，我发现 angular 更适合中小型项目，而 ember 更适合大型项目。

我一直在玩 angular，它看起来很棒。它有几个规则，使开发人员保持在同一页面上。

好吧，让我知道你的想法。感谢社区！

# c++ - 如何以最快的方式将预编译的 PCRE 正则表达式缓存在链表中？

> ID：13960001
> 
> 赞同：1
> 
> 时间：2012-12-19T19:46:32.830
> 
> 标签：c++, linked-list, pcre

下午好，这是一个单链表 C++ 类的第一个剪辑，它缓存了预编译的 PCRE 正则表达式。我们希望以最快的方式运行。是否可以优化编译并经过简要测试的第一个剪辑？谢谢你。

```
class cRegexList {
private:
    struct Internal{
        cPCRE* Regex;
        char* String; 
    } Item;

    cRegexList *Head, *Current, *Tail;
    int Count;

public:
    cRegexList(void);
    ~cRegexList(void);

    bool Add(const char *string1);

    cPCRE* FindRegex(const char* Expression);

    const char* GetCharacterField(void);

    bool RestartIterator(void);
    bool Iterate(void);

    int GetCount(void);

    const char* GetString(void);

    void Dump(void);
};

inline bool cRegexList::RestartIterator(void) {
    Current = Head;
    return (Current!=0);
}

inline bool cRegexList::Iterate(void) {
    if (Current==0)
        return false;
    if (Current && Current != Tail){
        memcpy(&Current,Current,sizeof(cRegexList*));
        return (Current!=0);
    }

    return false;
}

inline int cRegexList::GetCount(void) {
    return Count;
}

//  return NULL for empty list or a problem occurs
inline cPCRE* cRegexList::FindRegex(const char* Expression) {
    cRegexList* Temp;

    if (Current==0 || Expression == 0)
        return NULL;
    if (Current != 0){
        RestartIterator();
        Mary = Current;
        for(int pos=1; Iterate() ; pos++){
            if (strcmp(Current->Item.String, Expression) == 0){
                return Current->Item.Regex;
            }
        }
    }

    Current = Temp;
    if (Current 
        &&
        strcmp(Current->Item.String, Expression) == 0){
        return Current->Item.Regex;
    }
    return NULL; 
}

inline const char* cRegexList::GetCharacterField(void) {
    if (Current && Current->Item.String){
        return Current->Item.String;
    }
    return NULL;
}

inline const char *cRegexList::GetString(void) {
    if (Current==0)
        return "";
    return Current->Item.String; 
}

#endif 
```

正则表达式列表.cpp

```
#include "Portability.h"

#include "cStringListTest.h"

cRegexList::cRegexList(void) {
    Head=Current=Tail=0;
    Count=0;
}

cRegexList::~cRegexList(void) {
}

bool cRegexList::Add(const char *string1_){ 
    cRegexList* newElement = (cRegexList*)new char[sizeof(cRegexList) 
                                +
                               strlen(string1_)
                                +
                                1];

    memset(newElement,'\x0', sizeof(cRegexList) + strlen(string1_)); 

    newElement->Item.String = new char[strlen(string1_) + 1];

    strcpy(newElement->Item.String, string1_);

    newElement->Item.Regex = new cPCRE();
    newElement->Item.Regex->SetOptions(PCRE_CASELESS);
    newElement->Item.Regex->Compile(string1_);

    if (Tail==0) {
        Head=Tail=newElement;
    } else {
        memcpy(Tail,&newElement,sizeof(cRegexList*));
        Tail=newElement;
    }

    Count++;
    return true;
}

void cRegexList::Dump(void) {
    int i=0;

    if (RestartIterator()) {
        do {
            printf(" %d: %s\n",i++,GetString());
        } while (Iterate());
    }
} 
```

# mysql - MySQL在左外连接上获取重复行

> ID：13960005
> 
> 赞同：0
> 
> 时间：2012-12-19T19:46:43.117
> 
> 标签：mysql

我试图获取每天的事件计数，包括我的数据库中没有数据的日子，我创建了一个日历表，并尝试了我找到的所有建议，但由于某种原因，我不断获得双倍的事件数量每天。下面是我一直在玩的查询。

```
 SELECT DAY(c.datefield) as date, COUNT(s.timestamp) as count
FROM calendar c 
LEFT OUTER JOIN Seizures s ON (DATE(s.timestamp) = c.datefield)
WHERE c.datefield LIKE '2012-11-%'
GROUP BY c.datefield 
```

如果有人可以帮助防止我将头撞到桌子上，将不胜感激。

笔记：

如果我直接进行计数查询而不尝试使用 JOIN 来填写没有数据的日期，我会得到正确的条目计数。只有在尝试加入时，计数才会因某种原因翻倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:47:31.177

事实证明，我的日历表的所有条目都以某种方式重复，这就是导致计数加倍的原因，@PinnyM 引导我找出这个解决方案。

感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:48:59.483

根据这些结果，您的表似乎`calendar`包含重复的行。您可以通过运行检查这一点：

```
SELECT datefield, COUNT(*) FROM calendar
WHERE datefield LIKE '2012-11-%'
GROUP BY datefield
HAVING COUNT(*) > 1 
```

如果返回任何行，那么您有重复项需要解决，然后您的查询才能按预期工作。

# git - 删除上游存储库中的标签是否有任何问题？

> ID：13960008
> 
> 赞同：2
> 
> 时间：2012-12-19T19:47:07.540
> 
> 标签：git, version-control

我知道你绝对不应该对你已经推送到远程的提交进行 rebase，因为在推送后修改历史可能会给其他开发人员造成混乱。

是否可以在本地存储库中移动标签 ( `git tag -a -f <tagname>`)，删除远程标签 ( `git push origin :refs/tags/<tagname`)，然后推送新标签 ( `git push --tags`)？

非注释（轻量级）标签呢？树枝呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:49:02.930

是的，没关系。只要你告诉别人你这样做了。我喜欢在它们的位置留下一些备用标签（分支相同），并在其末尾加上“-this-moved”。一个月后或无论您的活动水平如何，我也会删除它们。

# c# - 受保护的构造函数派生类问题

> ID：13960017
> 
> 赞同：3
> 
> 时间：2012-12-19T19:47:36.330
> 
> 标签：c#, class, methods, constructor, protected

我敢肯定这个问题已经被问过很多次了。但是我遇到了问题。所以我创建了一个单独的类；专门用于验证是否存在正确的用户级别。

下面是测试这些权限级别的代码：

```
 class Elevated_Rights
    {

        // Token Bool:
        private bool _level = false;

        #region Constructor:

        protected Elevated_Rights()
        {

            // Invoke Method On Creation:
            Elevate();

        }

        #endregion

        public void Elevate()
        {

            // Get Identity:
            WindowsIdentity user = WindowsIdentity.GetCurrent();

            // Set Principal
            WindowsPrincipal role = new WindowsPrincipal(user);

            #region Test Operating System for UAC:

            if (Environment.OSVersion.Platform != PlatformID.Win32NT || Environment.OSVersion.Version.Major < 6)
            {

                // False:
                _level = false;

                // Todo: Exception/ Exception Log

            }

            #endregion

            else
            {

                #region Test Identity Not Null:

                if (user == null)
                {

                    // False:
                    _level = false;

                    // Todo: "Exception Log / Exception"

                }

                #endregion

                else
                {

                    #region Ensure Security Role:

                    if (!(role.IsInRole(WindowsBuiltInRole.Administrator)))
                    {

                        // False:
                        _level = false;

                        // Todo: "Exception Log / Exception"

                    }

                    else
                    {

                        // True:
                        _level = true;

                    }

                    #endregion

                } // Nested Else 'Close'

            } // Initial Else 'Close'

        } // End of Class.

    } 
```

因此该部分按预期工作；但是，当我将此类继承到另一个类中以利用受保护的构造函数时，我遇到了障碍。

```
 class Default_Configuration : Elevated_Rights
    {

        #region Constructor:

        public Default_Configuration() : base()
        {

            Elevate();

        }

        #endregion

    } 
```

但是当我打电话给那个新班级时；该方法声明：“由于构造函数权限而导致无效访问”。它理论上应该有效；有什么我想念的吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:59:59.460

我认为您的问题出在其他地方：我将这两个类定义粘贴到一个项目中，构建得很好。实例化一个新的`Default_Configuration`，称为`Elevate()`，没有错误。

如果您在混合`public`和`protected`方法方面有其他问题，请参阅[Peter Hallam 的博客文章，](http://blogs.msdn.com/b/peterhal/archive/2005/06/29/434070.aspx)其中描述了这些问题。

基本上，您不能从派生类中`protected`的实例方法调用基类中的`public`实例方法；这样做将允许“恶意”派生类`protected`在基类中创建所有方法`public`，只需为它们编写包装器即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:13:23.993

```
 new Default_Configuration().Elevate(); 
```

这条线对我有用。

什么不适合你？

# html - Perl，使用 Mechanize-Firefox，我怎样才能扩展一个框架，同时保持在更大的框架集中。

> ID：13960018
> 
> 赞同：0
> 
> 时间：2012-12-19T19:47:41.977
> 
> 标签：html, perl, firefox, mechanize, frames

我正在抓取一个广泛使用框架的网站。在每一帧中都有一段 javascript，如下所示：

```
function CheckUniqName(uniq) {
if (top.name != uniq) {
top.window.location.assign("<a webpage I don't want to redirect to>");
return false;
}
return true;
}
CheckUniqName("#unique_string#") 
```

如果我使用 $mech->follow_link(name=>'FrameName') 打开其中一个框架，那么我会立即重定向到“我不想重定向到的网页”。关闭 JavaScript 会阻止重定向（显然），但我需要 JavaScript “打开”才能完成页面上的某些操作。

我对如何使这项工作有一些想法，但我不知道如何实现它们：

(1) 展开框架而不是跟随它们作为链接。如果我展开框架但保留在较大的框架集中，则 top.name 将等于 uniq 并且不会重定向（因为最顶层窗口的名称是“#unique_string#”）。怎么能做到这一点？我不明白 $mech->expand_frames 是如何工作的。

(2) 禁用这几行JS。是否可以在 Mechanize 中强制程序忽略某些内容行？如果 Mechanize 将忽略行“top.window.location.assign("");" 那么它不会重定向。那有可能吗？

(3) 改变变量top.name 的值。如果我可以将 top.name 重新分配为等于#unique_string#，那么无论窗口名称是什么，我都可以通过检查。那可能吗？我认为服务器定义了窗口名称。

堆栈的任何帮助将不胜感激。这让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:38:58.587

也许您可以使用greasemonkey 插件在页面加载之前从页面中删除这段JS？

问候，

# bash - GWT 托管模式脚本窗口

> ID：13960021
> 
> 赞同：0
> 
> 时间：2012-12-19T19:48:08.060
> 
> 标签：bash, gwt, batch-file

我工作的公司专门使用 Mac 电脑。虽然我喜欢我的 Mac，但它只是一台 13 英寸的笔记本电脑，所以我决定在我的 Windows 电脑上设置我的环境，因为我有两个 24 英寸的显示器可以工作。我希望能够使用 devMode，这样我就可以更新 UI 而无需重新编译所有内容。我想知道是否有一种简单的方法可以将 bash shell 脚本转换为 Windows 批处理文件。我在创建批处理文件方面完全没有经验，所以任何帮助将不胜感激

编辑：我使用了 Cygwin，我得到了错误：

```
$ ./devMode_osx.sh
Listening for transport dt_socket at address: 5006
Error: Could not find or load main class com.google.gwt.dev.DevMode 
```

这是文件

```
#!/bin/sh
#
# Startup script for hosted mode.
# You have to add MAVEN_REPO to your variables; for example:
#
# export MAVEN_REPO="/Users/james/.m2/repository"
#
MAVEN_REPO="C:/Users/James/.m2/repository"
JAVA_HOME="C:/Program Files (x86)/Java/jdk1.6.0_38"
PATH=$JAVA_HOME/bin:$PATH

APPDIR=`dirname $0`;

BASE_JAVA_SRC="$APPDIR/../src/main/java"
BASE_JAVA_CLASSES="$APPDIR/../target/classes"
BASE_RESOURCES="$APPDIR/../src/main/webapp/"
DOMAIN_JAVA_SRC="$APPDIR/../../sample-domain/src/main/java"
DOMAIN_JAVA_CLASSES="$APPDIR/../../sample-domain/target/classes"
DOMAIN_JAVA_RESOURCES="$APPDIR/../../sample-domain/src/main/resources"

GWT_USER="$MAVEN_REPO/com/google/gwt/gwt-user/2.3.0/gwt-user-2.3.0.jar"
GWT_DEV="$MAVEN_REPO/com/google/gwt/gwt-dev/2.3.0/gwt-dev-2.3.0.jar"
JAVAX_VALIDATION="$MAVEN_REPO/javax/validation/validation-api/1.0.0.GA/validation-api-        1.0.0.GA.jar"
JAVAX_VALIDATION_SRC="$MAVEN_REPO/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA-sources.jar"

JVMARGS="-agentlib:jdwp=transport=dt_socket,address=5006,server=y,suspend=n"

#MP: run HostedMode with 'war' parameter set, as below, to specify, where the gwt output files are written to
#-war $BASE_RESOURCES

java $JVMARGS -XX:PermSize=256m -Xmx900M -Xms900M -cp "$BASE_JAVA_SRC:$BASE_JAVA_CLASSES:$BASE_RESOURCES:$GWT_USER:$GWT_DEV:$JAVAX_VALIDATION:$JA    VAX_VALIDATION_SRC:$DOMAIN_JAVA_SRC:$DOMAIN_JAVA_CLASSES:$DOMAIN_JAVA_RESOURCES" \
com.google.gwt.dev.DevMode \
-startupUrl Sample.html com.ngcompliance.web.gwt.Sample\
-noserver -port 9999 -war $BASE_RESOURCES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:34:34.000

两种方法：

1.  使用 Cygwin (www.cygwin.com) 在 Windows 下运行 Bash shell 脚本。

2.  学习基本的批处理编程教程。

    注意设置和访问变量的部分。

    然后尝试修改你的 bash 脚本

    * * *

    **提示 1**设置变量

    代替

    ```
    MAVEN_REPO="C:/Users/James/.m2/repository" 
    ```

    采用

    ```
    SET MAVEN_REPO="C:/Users/James/.m2/repository" 
    ```

    * * *

    **提示 2**使用变量

    代替

    ```
    BASE_JAVA_SRC="$APPDIR/../src/main/java" 
    ```

    采用

    ```
    SET BASE_JAVA_SRC="%APPDIR%/../src/main/java" 
    ```

    * * *

    **提示 3**回顾外部命令的使用和 SO 特质

    代替

    ```
    APPDIR=`dirname $0`; 
    ```

    采用

    ```
    SET APPDIR=%~dp0 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:45:18.070

你能不能不使用eclipse、gpe插件和maven插件。

1.  Gpe - [https://developers.google.com/eclipse/](https://developers.google.com/eclipse/)

2.  Gwt gpe 常见问题解答-https://developers.google.com/eclipse/docs/faq

3.  Gwt 与 maven - htpp://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven

# ftp - Aptana 3 远程 FTP 超时

> ID：13960030
> 
> 赞同：0
> 
> 时间：2012-12-19T19:48:34.127
> 
> 标签：ftp, aptana, remote-server

问题很简单。Aptana 3 Studio 中是否有一个选项可以使 ftp/远程连接保持活动状态？每次我休息 4-5 分钟时，我的连接都会丢失，当我尝试打开服务器上的任何文件时，Aptana 会挂起，我需要 alt-ctrl-del 它。这真的很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:43:23.790

您可以使用以下设置设置 FTP 连接保持活动的时间：

`Window > Preferences > Aptana Studio > Publishing > FTP`

或者您可以简单地在对话框`ftp`左上角的搜索框中输入`Preferences`

在对话框的底部：

`The number of minutes to keep the FTP connection open:` **设置分钟数**

![在此处输入图像描述](../Images/eb7c3aa90da22586852871e4209e130d.png)

# html - 网站页脚在较小的屏幕上与页面内容重叠

> ID：13960035
> 
> 赞同：1
> 
> 时间：2012-12-19T19:48:45.847
> 
> 标签：html, css, overlapping

[我们公司的网站](http://www.bradfordlicensing.com)在最初设计的大屏幕尺寸（1920x1080 21.5" 屏幕）上看起来很好；但是当它在较小的屏幕尺寸（即 15" 笔记本电脑或手机）上查看时，页脚会与内容重叠以适应浏览器窗口的底部。

我遵循了一个粘性页脚教程，它似乎不起作用。页脚下方还有额外的空白区域，导致 a`y-scrollbar`出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:00:19.427

不要使用位置：绝对；为内容。使用位置：相对；反而

```
<style type="text/css">
html, body
{
    height: 99%;
    background-color:Black;
}
.header
{
    width: 960px;
    height: 15%;
    background-color:Gray;
}
#Content
{
    min-height: 85%;
    width: 960px;
    background-color:Navy;
}
.con
{
    min-height:900px;
    width:960px;
    background-color:Aqua;
} 
```

和

```
 <div class="header">
   </div>
   <div id="Content">
   <div class="con"></div>
   </div>
   <div class="header">
   </div> 
```

# c# - 如何返回任务 > 通过 C#？

> ID：13960036
> 
> 赞同：4
> 
> 时间：2012-12-19T19:48:53.067
> 
> 标签：c#, windows-store-apps

我目前正在使用 VS2012 和带有异步和等待的 .NET 4.5 迈出第一步。

为此，我正在实现一个具有以下签名的方法：

```
public Task<List<string>> foo() {...} 
```

**我知道如何返回 List 但我不知道如何将此列表放入 Task<>**。怎么做？

编辑：这是完整的例子，我需要知道我需要改变什么才能使 return 语句成为可能

```
public async Task<List<string>> foo()
{
    List<string> myList = new List<string>;
        {...}
    return mylist;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:51:46.130

如果你的方法实际上是异步的，你可以简单地添加`async`关键字，编译器会`Task`为你生成一个。

您还可以手动编写异步代码，`ContinueWith()`在现有任务上使用或使用`Task`类上的静态方法来创建新任务。

如果您的方法不是异步的，那就没有意义了；你应该`List<string>`直接返回一个。
如果由于某种原因，您*需要*从同步方法返回一个预先完成`Task<T>`的（如果您正在实现一个接口），您可以调用`Task.FromResult`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:51:20.603

像这样的东西？

```
public Task<List<string>> foo()
{
    return new Task<List<string>>(ReturnList);
}

List<string> ReturnList()
{
    //Do some work
    Thread.Sleep(1000);
    //Return the result
    return new List<string>();
} 
```

然而，这不是最佳实践。SLaks 的回答更详细地涵盖了异步/等待的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:02:29.590

如果您想要一个异步方法，请使用以下内容：

```
public async Task<List<string>> Testing()
{
    var uri1 = new Uri("http://www.google.com");
    using (var httpClient = new HttpClient())
    {
        var response = await httpClient.GetAsync(uri1);
        return (await response.Content.ReadAsAsync<List<string>>());
    }
} 
```

有关一个很好的示例，请参见[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)。

# ios - 设置UIITextView边框颜色

> ID：13960039
> 
> 赞同：2
> 
> 时间：2012-12-19T19:49:11.693
> 
> 标签：ios, xcode

我想为我的 UITextView 边框设置银色。我试过这个：

```
theGroupTextLabel.layer.borderWidth = 3.5f;
    theGroupTextLabel.layer.borderColor = [[UIColor whiteColor] CGColor]; 
```

...但是在颜色选项中只有一些颜色，例如 whiteColor、BlackColor、Green...

如果我想要银子怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:55:24.247

您需要为自定义颜色使用 RGB 值；

```
CGFloat nRed=128.0/255.0;
CGFloat nBlue=98.0/255.0;
CGFloat nGreen=53.0/255.0;
UIColor *myColor=[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1]; 
```

[在此处选择 RGB 值](http://cloford.com/resources/colours/500col.htm)

R:193 G:205 B:205 附近的东西会接近银

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:50:50.197

您只需要使用 RGB 值自定义颜色，因为您所看到的只是为您提供方便的少数预定义颜色。这是具有 RGB 值的自定义颜色的示例。

```
[[UIColor colorWithRed:0.5f green:0.2f blue:0.7f alpha:1.0f] CGColor]; // Not actually silver 
```

注意：通常您会为每个值找到一个介于 0 和 255 之间的数字，但此函数采用浮点数，因此只需将这些数字除以 255 即可获得所需的浮点值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:08:56.377

尝试像这样设置你的颜色

```
theGroupTextLabel.layer.borderWidth = 3.5f;
theGroupTextLabel.layer.borderColor = [[UIColor colorWithRed:(RedRGB.0/255.0) 
                                                       green:(GreenRGB.0/255.0) 
                                                        blue:(BlueRGB.0/255.0) 
                                                       alpha:(AlphaRGB.0/255.0)] CGColor]; 
```

# python - 打开多个具有不同参数的网页。PyQt4

> ID：13960040
> 
> 赞同：1
> 
> 时间：2012-12-19T19:49:16.627
> 
> 标签：python, qt, pyqt, pyqt4, qwebview

我已经按照[X.Jacobs](https://stackoverflow.com/users/1006989/x-jacobs)在这个[问题](https://stackoverflow.com/questions/13943558/multiple-threads-of-qwebview-in-pyqt4)上的回答，并试图创建一个应用程序，该应用程序将打开具有不同参数的多个窗口，但它不起作用，看起来，就像应用程序正在打开窗口，但不加载网页。

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import*
from PyQt4.QtWebKit import *
import sys, signal

url = 'http://http://forums.fedoraforum.org/showthread.php?t={0}'

class Opener(QWebView):
    def __init__(self, param=None):
        QWebView.__init__(self)
        self.param = param
        self.loadFinished.connect(self.print_title)

    def print_title(self):
        print self.title()

class Foo(QObject):
    def __init__(self):
        QObject.__init__(self)
        self.count = 0
        self.params = range(4)
        self.mapper = QSignalMapper(self)
        self.mapper.mapped.connect(self.mapper_mapped)

        for i in range(2):
            opener = Opener()
            opener.loadFinished.connect(self.mapper.map)
            self.mapper.setMapping(opener, i)
            opener.loadFinished.emit(True)
            QTimer.singleShot(1, lambda:opener.loadFinished.emit(True))  

    def mapper_mapped(self, gNumber):
        self.count += 1
        if self.count < len(self.params):
            gParam  = self.params[self.count]
            opener = self.mapper.mapping(gNumber)
            opener.load(QUrl(url.format(gParam)))
            opener.show()
            QTimer.singleShot(1, lambda:opener.loadFinished.emit(True)) 

if __name__ == "__main__":
    app = QApplication(sys.argv)
    main = Foo()
    if signal.signal(signal.SIGINT, signal.SIG_DFL):
        sys.exit(app.exec_()) 
    app_exec_() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:10:51.373

该代码中发生了几件事:)检查这个工作版本，看看你如何适应你的：

```
#!/usr/bin/env python

from PyQt4.QtCore import *
from PyQt4.QtGui import*
from PyQt4.QtWebKit import *

class Foo(QWidget):
    def __init__(self, parent=None):
        super(Foo, self).__init__(parent)    

        self.count  = 0
        self.params = range(4)
        self.url    = 'http://forums.fedoraforum.org/showthread.php?t={0}'

        self.gridLayout = QGridLayout(self)
        self.tabWidget = QTabWidget(self)
        self.gridLayout.addWidget(self.tabWidget, 0, 0, 1, 1)

        self.mapper = QSignalMapper(self)
        self.mapper.mapped.connect(self.on_mapper_mapped)

        for i in range(2):
            grabber = QWebView()
            grabber.loadFinished.connect(self.mapper.map)

            self.mapper.setMapping(grabber, i)
            self.tabWidget.addTab(grabber, "opener {0}".format(str(i)))

            grabber.loadFinished.emit(True)

    @pyqtSlot(int)
    def on_mapper_mapped(self, gNumber):
        self.count += 1
        if self.count < len(self.params):
            gParam = self.params[self.count]

            opener = self.mapper.mapping(gNumber)
            opener.load(QUrl(self.url.format(gParam)))

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = Foo()
    main.show()
    app.exec_() 
```

# asp.net - 用户使用 asp:login 登录时如何调用方法？

> ID：13960041
> 
> 赞同：0
> 
> 时间：2012-12-19T19:49:20.197
> 
> 标签：asp.net, c#-4.0, authentication, login

我正在使用`asp:Login`对网站上的用户进行身份验证。有没有办法可以在登录时调用方法（C#）？我想从数据库中获取一些用户详细信息并将它们保存在会话中以供以后使用。

我知道我可以通过在`Page_Load`事件中使用正确的代码重定向到“空白”页面来做到这一点，然后在检索到详细信息后重定向到登录页面。我不认为这是一个好习惯吗？我想知道是否可以将其添加到登录“onclick”事件中？

这可能`asp:login`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:34:30.680

**ASPX：**

```
<asp:Login ID="Login1" runat="server" OnLoggingIn="Authenticate">
</asp:Login> 
```

**背后的代码**

```
protected void Authenticate(object sender, LoginCancelEventArgs e)
{
    //Your authentication code...
} 
```

**一些附加信息：**

通过 HTTP 传输密码是一种潜在的安全威胁。恶意用户可以查看或破坏 HTTP 传输。为了提高使用登录控件时的安全性，您应该使用带有安全套接字层 (SSL) 加密的 HTTPS 协议，以确保在回发期间无法读取用户的密码。有关详细信息，请参阅[保护登录控制](http://msdn.microsoft.com/en-us/library/ms178346.aspx)

# python - 如何使用python在一个月内平均选择休息日？

> ID：13960045
> 
> 赞同：3
> 
> 时间：2012-12-19T19:49:45.217
> 
> 标签：python, algorithm, random

我将在一个日历月内随机分配 8 天的假期给船员。

我想随机选择8天，休息天数应该尽量均匀。例如，我的意思是，不应在每月的前 8 天收集所有 8 天的假期。

例如：[1, 5, 8, 14, 18, 24, 27, 30] 是一个很好的分布。[1,2,3,4,26,27,28,29] 不是一个好的分布。

实际上，一个船员不能连续工作 7 天。每 7 天必须有 1 天的休息日。

所有的日子都一视同仁，即星期天本身不是休息日。船员也可以在周末工作。

我要一一选择休息日。不是8个人同时在一起的。

你能推荐一个使用python的算法来实现这个吗？

并非该月的所有日子都可以休息。

最好的祝福

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:53:35.157

用于[`random.sample()`](http://docs.python.org/2/library/random.html#random.sample)从序列中获取随机集。列出可用的日期，然后将其传递给`.sample()`函数：

```
import sample
daysoff = [1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 15, 16, 17, 18, 19, 20]

picked = random.sample(daysoff, 8) 
```

在上面的示例中，我使用了一个月中的某天，并且列表省略了某些日子（例如，星期日和该月的最后 10 天），然后我们从该人群中随机选择 8 天。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:36:54.333

这是这里的关键：

`Actually, a crew can't work 7 consecutive days. In every 7 days, there must be 1 day-off.`

将问题改写为每 7 天随机选择 2 天（或酌情将一个月分为四个时间长度）。然后，您可以保证均匀分布。`random.sample()`按照 Martijn Pieters 的建议 使用。

您可以从第一周开始使用此技术生成两个值，然后如果您需要它们，请按顺序生成它们。

**编辑：**

正如 tcaswell 所观察到的，在某些情况下，您最终会连续值班十天。为了解决这个问题，您可以每三天分配一天休息，创建一个包含 10 天的列表，然后从不使 7 天连续标准无效的日期子集中随机删除两天。

或者，您可以继续使用原始算法生成列表，直到它符合标准，因为无论如何您很可能得到一个有效的解决方案。您必须编写某种验证函数，但这很容易做到，因为您只是在计算最长的连续天数。

**代码：**

第二个选项的实现。

```
import random
from itertools import chain
from itertools import count

def candidate(m):
    ''' Returns 2 days per week, in m days, where m is the length of the month. '''
    weeks = weeksmaker(m)
    return sorted(list(chain(*[random.sample(week, 2) for week in weeks])))

def weeksmaker(m):
    ''' Divides a month up into four weeks, randomly assigning extra days to weeks. '''
    weeks = [range(i, i+7) for i in xrange(1,29,7)]
    for i in range(m - 28):
        weeks[random.randint(1, len(weeks))-1].append(i)
    c = count(1)
    return [[c.next() for day in week] for week in weeks]

def valid(days, c):
    ''' Validity check. Cant work more than c consecutive days. '''
    for i in xrange(1, len(days)):
        if days[i] - days[i-1] > c:
            return False
    else:
        return True

def daysoff(m, n, c):
    ''' In month length m, need n days off, cant work more than c consecutive days. '''
    while True:
        days = candidate(n)
        if valid(days, c):
            return days

>>> for i in range(28, 32):
...     daysoff(i, 8, 7)
... 
[6, 7, 10, 14, 18, 20, 27, 28]
[4, 7, 10, 13, 19, 21, 23, 24]
[2, 4, 9, 13, 15, 20, 25, 27]
[1, 3, 9, 12, 18, 19, 24, 28] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:42:20.207

您应该只拆分总天数。

无论需要多少天，无论总共有多少天，此代码都有效。

```
from random import randint
def foo(l, n):
    dist = round(len(l)/n)
    return [randint(l[i*dist], l[(i+1)*dist-1]) for i in range(n)]

In [1]: days = [i for i in range(1,31)]
In [2]: foo(days, 8)
Out[2]: [1, 4, 6, 9, 13, 16, 20, 27]

In [3]: mylist = [i for i in range(500)]
In [4]: foo(mylist, 5)
Out[4]: [80, 147, 250, 346, 448] 
```

舍入会出现一些问题，列表索引可能会超出范围左右。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T22:08:26.333

这（我认为）做了@Martijn 所做的事情，并且具有不包括连续天数的额外好处（例如，如果您不希望连续休息 8 天）：

```
#Day selector

import random

Ndays = 8
daysoff = range(1,25)
concurrent_tol = 3

while True:
    cntr = 0
    sample = random.sample(daysoff, Ndays)
    sample.sort()
    for i in range(1,Ndays-1):
        if abs(sample[i]-sample[i-1]) == 1:
            cntr +=1
        if abs(sample[i]-sample[i+1]) == 1:
            cntr +=1

    if cntr<concurrent_tol:
        print "Found a good set of off-days :"
        print sample
        break
    else:
        print "Didn't find a good set, trying again"
        print sample 
```

输出示例：

```
Didn't find a good set, trying again
[3, 4, 5, 6, 7, 8, 9, 11]
Didn't find a good set, trying again
[1, 5, 6, 7, 12, 14, 19, 20]
Didn't find a good set, trying again
[4, 5, 7, 9, 11, 15, 16, 20]
Didn't find a good set, trying again
[3, 4, 6, 7, 12, 13, 14, 23]
Didn't find a good set, trying again
[1, 7, 10, 12, 15, 16, 17, 22]
Didn't find a good set, trying again
[5, 7, 8, 11, 17, 18, 19, 23]
Didn't find a good set, trying again
[3, 8, 11, 12, 13, 15, 17, 21]
Didn't find a good set, trying again
[2, 5, 7, 8, 9, 12, 13, 21]
Found a good set of off-days :
[1, 2, 5, 12, 15, 17, 19, 20] 
```

这还有一个额外的好处是看起来很丑。请注意，可能的天数为 1-24，如 daysoff 中所定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T21:05:46.643

生成（并存储）所有有效工作计划的列表（通过蛮力......只有 30C8 种方法可以做到）。然后，您可以稍后从该列表中安全快速地进行选择。

```
import itertools
import numpy as np
good_lst = []
for days_off in itertools.combinations(range(30),8):
    if np.max(np.diff( (0,) + days_off + (30,))) < 7:
        good_lst.append(days_off) 
```

（那里可能有一些错误的错误）

这在大约 5 分钟内在一台不错的机器上运行。您可能需要进行更多修剪，因为 (0, 1, 2, 3, 6, 12, 18, 24) 是有效的工作时间表，但涉及 6 个工作日的 4 个部分。

# mule - Multiple Collection Aggregators in Mule causing routes to get mixed up

> ID：13960052
> 
> 赞同：0
> 
> 时间：2012-12-19T19:50:01.083
> 
> 标签：mule

So, I'm trying to route invoices based on a field in the database using the Choice Flow Control. This works fine without using a collection aggregator, however I want to use the aggregator to group the transactions into a single email. However, when I add the collection aggregators the routing gets all mixed up. For example, in my last test run an invoice with LHF_INVOICE_METHOD='INACTV' and IS_ZERO_OR_NEGATIVE='1' got routed to "Trucking" (it routes correctly to "Inactive" without collection aggregation). I think the collection aggregators are causing the routes to get crossed with each other. I setup my MULE_CORRELATION_ID to include LHF_INVOICE_METHOD and IS_ZERO_OR_NEGATIVE so the collection aggregators have their own correlation IDs.

```
<flow name="InvoiceWorkflow" doc:name="InvoiceWorkflow" processingStrategy= "synchronous">
    <jdbc:inbound-endpoint queryKey="GetUnprocessedInvoices" queryTimeout="10000" pollingFrequency= "1000" connector-ref ="Database" doc:name="Get invoice run" >
        <jdbc:query key="GetUnprocessedInvoices" value="SELECT        COMPANY_CODE, DIVISION, INVOICE_NUMBER,&#13;&#10;LHF_INVOICE_METHOD, STATUS_FLAG,&#13;&#10;SYSTEM_DATE, USERNAME, RUN_NUMBER, ROWID, IS_ZERO_OR_NEGATIVE,&#13;&#10;LHF_INVOICE_METHOD || RUN_NUMBER || IS_ZERO_OR_NEGATIVE AS CORRELATION_ID,&#13;&#10;LHF_INVOICE_METHOD || RUN_NUMBER || IS_ZERO_OR_NEGATIVE || '2' AS CORRELATION_ID_2&#13;&#10;FROM             FIN.LHF_INVOICE_WORKFLOW &#13;&#10; WHERE         (STATUS_FLAG = 'N')"/>
    </jdbc:inbound-endpoint>
    <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="insert_invoice_run" queryTimeout= "10000" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name= "Load to custom_app_data">
        <jdbc:query key="insert_invoice_run" value="INSERT INTO lhf_ros_invoice_workflow ([COMPANY_CODE] ,[DIVISION] ,[INVOICE_NUMBER] ,[LHF_INVOICE_METHOD] ,[STATUS_FLAG] ,[SYSTEM_DATE] ,[USERNAME] ,[RUN_NUMBER] ,[IS_ZERO_OR_NEGATIVE]) VALUES (#[map-payload:COMPANY_CODE] ,#[map-payload:DIVISION] ,#[map-payload:INVOICE_NUMBER] ,#[map-payload:LHF_INVOICE_METHOD], #[map-payload:STATUS_FLAG] ,#[map-payload:SYSTEM_DATE] ,#[map-payload:USERNAME] ,#[map-payload:RUN_NUMBER] ,#[map-payload:IS_ZERO_OR_NEGATIVE])"/>
    </jdbc:outbound-endpoint>
    <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MarkAsProcessed" queryTimeout= "10000" connector-ref="DatabaseMuleLogin" doc:name= "Mark Processed in Ross" >
        <jdbc:query key="MarkAsProcessed" value="UPDATE       FIN.LHF_INVOICE_WORKFLOW SET                 STATUS_FLAG = 'P' WHERE        (ROWID = #[map-payload:ROWID])"/>
    </jdbc:outbound-endpoint>
    <message-properties-transformer doc:name="Message Properties">
        <add-message-property key="MULE_CORRELATION_GROUP_SIZE" value="1000"/>
        <add-message-property key="MULE_CORRELATION_ID" value="#[message.payload.CORRELATION_ID]"/>
    </message-properties-transformer>
    <choice doc:name="Choice" >
        <when expression="#[message.payload.LHF_INVOICE_METHOD == 'INACTV']">
            <processor-chain>
                <collection-aggregator failOnTimeout="false" doc:name="Inactive" timeout="2000"/>
                <smtp:outbound-endpoint  responseTimeout="10000" doc:name="Inactive" from="muleservice@example.com"  subject="[Invoice Workflow] Inactive 1" to="ben@example.com" host="mail.example.com"/>
                <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
            </processor-chain>
        </when>
        <when expression="#[message.payload.IS_ZERO_OR_NEGATIVE=='1']">
            <processor-chain>
                <collection-aggregator timeout="3000" failOnTimeout="false" doc:name="Zero"/>
                <smtp:outbound-endpoint to= "ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Zero Dollar " responseTimeout= "10000"  doc:name="Zero Dollar" host="mail.example.com"/>
                <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
            </processor-chain>
        </when>
        <when expression="#[message.payload.LHF_INVOICE_METHOD=='TRUCK']">
            <processor-chain>
                <collection-aggregator timeout="4000" failOnTimeout="false" doc:name="Truck"/>
                <smtp:outbound-endpoint to= "ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Trucking" responseTimeout= "10000"  doc:name="Trucking" host="mail.example.com"/>
                <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
            </processor-chain>
        </when>
        <otherwise>
            <processor-chain>
                <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] RSForms Email" responseTimeout="10000" doc:name="RSForms"/>
                <message-properties-transformer overwrite="true" doc:name="Message Properties">
                    <add-message-property key="MULE_CORRELATION_ID" value="#[message.payload.CORRELATION_ID_2]"/>
                </message-properties-transformer>
                <choice doc:name="Choice">
                    <when expression="#[message.payload.LHF_INVOICE_METHOD == 'SPEC']">
                        <processor-chain>
                            <collection-aggregator timeout="5000" failOnTimeout="false" doc:name="Special"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Special Handling" responseTimeout="10000" doc:name="Special"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </when>
                    <when expression="#[message.payload.LHF_INVOICE_METHOD == 'EMAIL']">
                        <processor-chain>
                            <collection-aggregator timeout="6000" failOnTimeout="false" doc:name="Do Nothing"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Do nothing" responseTimeout="10000" doc:name="Do Nothing"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </when>
                    <when expression="#[message.payload.LHF_INVOICE_METHOD == 'MAILUS']">
                        <processor-chain>
                            <collection-aggregator timeout="7000" failOnTimeout="false" doc:name="US Mail"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] US Mail" responseTimeout="10000" doc:name="US Mail"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </when>
                    <when expression="#[message.payload.LHF_INVOICE_METHOD == 'MAILCN']">
                        <processor-chain>
                            <collection-aggregator timeout="8000" failOnTimeout="false" doc:name="Intl Mail"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Intl Mail" responseTimeout="10000" doc:name="Intl Mail"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </when>
                    <when expression="#[message.payload.LHF_INVOICE_METHOD == 'EDI']">
                        <processor-chain>
                            <collection-aggregator timeout="9000" failOnTimeout="false" doc:name="EDI"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] EDI" responseTimeout="10000" doc:name="EDI"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </when>
                    <otherwise>
                        <processor-chain>
                            <collection-aggregator timeout="10000" failOnTimeout="false" doc:name="Exceptions"/>
                            <smtp:outbound-endpoint host="mail.example.com" to="ben@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Exceptions" responseTimeout="10000" doc:name="Exceptions"/>
                            <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
                        </processor-chain>
                    </otherwise>
                </choice>
            </processor-chain>
        </otherwise>
    </choice>
</flow > 
```

I added loggers after each WHEN branch before the aggregators and the transactions go to the proper branch before aggregation. Here is actual data, as far as I can tell the Mule Correlation IDs are unique to each aggregator. Here is some actual data sent through with what happened and what I expected:

**BEFORE Aggregation (all correct)**

**Logger Inactive**

{INVOICE_NUMBER=408908, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@5a72f4f7, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518101, CORRELATION_ID_2=INACTV486265181012, IS_ZERO_OR_NEGATIVE=1}

{INVOICE_NUMBER=406749, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@c0a628c, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518101, CORRELATION_ID_2=INACTV486265181012, IS_ZERO_OR_NEGATIVE=1}

{INVOICE_NUMBER=408691, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@42652ecc, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518100, CORRELATION_ID_2=INACTV486265181002, IS_ZERO_OR_NEGATIVE=0}

**Logger for Zero or Negative**

{INVOICE_NUMBER=409061, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=MAILUS, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@7933b36f, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=MAILUS48626518101, CORRELATION_ID_2=MAILUS486265181012, IS_ZERO_OR_NEGATIVE=1}

{INVOICE_NUMBER=410968, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=EDI, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@7a9b36be, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=EDI48626518101, CORRELATION_ID_2=EDI486265181012, IS_ZERO_OR_NEGATIVE=1}

**AFTER Aggregation**

**Inactive 1: (these two went to correct route)**

[{INVOICE_NUMBER=408908, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@5a72f4f7, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518101, CORRELATION_ID_2=INACTV486265181012, IS_ZERO_OR_NEGATIVE=1},

{INVOICE_NUMBER=406749, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@c0a628c, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518101, CORRELATION_ID_2=INACTV486265181012, IS_ZERO_OR_NEGATIVE=1}]

**Zero Dollar: (this one is correct)**

[{INVOICE_NUMBER=409061, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=MAILUS, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@7933b36f, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=MAILUS48626518101, CORRELATION_ID_2=MAILUS486265181012, IS_ZERO_OR_NEGATIVE=1}]

**Trucking: (this should have gone to Zero Dollar)**

[{INVOICE_NUMBER=410968, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=EDI, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@7a9b36be, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=EDI48626518101, CORRELATION_ID_2=EDI486265181012, IS_ZERO_OR_NEGATIVE=1}]

**Special Handling: (should have gone to "Inactive 1")**

[{INVOICE_NUMBER=408691, SYSTEM_DATE=2012-12-19 16:36:50.0, DIVISION=1, LHF_INVOICE_METHOD=INACTV, RUN_NUMBER=4862651810, ROWID=oracle.sql.ROWID@42652ecc, COMPANY_CODE=1, STATUS_FLAG=N, USERNAME=BBRYAN, CORRELATION_ID=INACTV48626518100, CORRELATION_ID_2=INACTV486265181002, IS_ZERO_OR_NEGATIVE=0}]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:54:05.267

Routing doesn't get affected but instead the message hits the right `collection-aggregator` but gets aggregated in the wrong group, thus ends **delivered** by another `collection-aggregator` when it times out.

This is because all the aggregators use the default shared message store which makes Mule completely mix messages together. This default behaviour is wrong IMO but to workaround the issue configure a **unique** `storePrefix` on each aggregator.

For example:

```
<when expression="#[message.payload.LHF_INVOICE_METHOD == 'INACTV']">
    <processor-chain>
        <collection-aggregator storePrefix="inactive" failOnTimeout="false" doc:name="Inactive" timeout="2000"/>
        <smtp:outbound-endpoint  responseTimeout="10000" doc:name="Inactive" from="muleservice@example.com"  subject="[Invoice Workflow] Inactive 1" to="ben@example.com" host="mail.example.com"/>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MARK_COMPLETE" queryTimeout="-1" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Mark Complete"/>
    </processor-chain>
</when> 
```

and so on and so forth.

# ios - xcode的调试器窗口中不同的ivar文本颜色是什么意思？

> ID：13960064
> 
> 赞同：1
> 
> 时间：2012-12-19T19:50:39.257
> 
> 标签：ios, xcode

从两个代码位置命中相同的断点......一个工作，一个不工作，我认为这种颜色差异可能是一个线索。如果我知道这意味着什么。但是搜索这个很难：

不起作用：

![灰色文本：不起作用](../Images/cda1df2e8ccddc254d3904cb8ca7e1eb.png)

作品：

![蓝色文字：作品](../Images/94c42e7aa01a7c28c36d9d1c93c0cacd.png)

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:06:17.480

我相信这意味着这些变量的值在上一个（或当前？）执行步骤中发生了变化。您的非工作示例可能没有获得您想要的适当新值。

# jquery - 使用jquery获取可变大小的图像宽度和高度

> ID：13960065
> 
> 赞同：0
> 
> 时间：2012-12-19T19:50:43.167
> 
> 标签：jquery, resize

我有一个在加载和调整窗口大小时运行的函数。我想在将其调整为另一个变量后使用新值。我没有得到值的尺寸部分​​。

```
$(window).load(function(){
           var a=imageSize();
           getResizeImageWidthHeight(a);
            otherFunction();    
        });
        $(window).resize(function(){
            imageSize();

        }); 
```

图像调整大小

```
var imageSize =function() {
            var status='0';
            if( $(window).width()-300 > $(window).height() ) {
                $('#images').css({
                    'width': 'auto',
                    'height': ( $(window).height() )+'px'
                });
                status='1';
            }
            else {
                $('#images').css({
                    'width': ( $(window).width() )+'px',
                    'height': 'auto'
                });
                status='2';
            }
            return status;

        } 
```

获取调整图像宽度和高度

```
function getResizeImageWidthHeight(a) {
           x=a;
           if(x=='1') {
                    $("#images").load(function() {
                        imgWidth = this.width;
                        alert( "imgWidth: " + imgWidth );
                    });
                var imgHeight = $("#images").height();

            } else if(x=='2') {
                    $("#images").load(function() {
                        var imgHeight = this.height;
                    });
                var imgWidth = $("#images").width();
                alert( " imgHeight: " + imgHeight);
            } 
        } 
```

并使用功能

```
function otherFunction() {
            var xWidth=imgWidth*2;
            var xHeight=imgHeight*3;
            .
            .
            etc. 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:56:37.210

如果您尝试使用容器缩放图像，则有一种比在窗口调整大小时重新计算宽度/高度更简单的方法，这是[流体布局](http://unstoppablerobotninja.com/entry/fluid-images)理念的一部分。

基本上，您将图像设置为`max-width: 100%;`，它们将随容器的大小而缩放。

不确定这是否是您的意图，但它不是 js。检查链接以获取更多详细信息。

**要在调整大小后获取图像的大小：**

您可以将大小保存在全局变量中，只需删除`var`: （不推荐）

```
imgHeight = $("#images").height();
imgWidth = $("#images").width(); 
```

或者您可以简单地使用 jquery 再次查询元素的高度：

```
var xWidth = $("#images").width() * 2;
var xHeight = $("#images").height() * 3; 
```

# silverlight - Silverlight 4 中带有拼写检查器的 RichTextBox

> ID：13960066
> 
> 赞同：1
> 
> 时间：2012-12-19T19:50:45.680
> 
> 标签：silverlight, spell-checking

我需要在silveright 4（在提升的信任模式下浏览器之外）应用程序中添加拼写检查器文本控件（文本框控件或richtextbox 控件）。我的应用程序可以加载超过 500 个编辑控件。它适用于文本框控件，但没有拼写检查功能。使用 RichTextBox 会导致 System out of memory 异常。

请建议我应该怎么做才能在没有系统内存不足异常的情况下使用 RichTextBox。欢迎任何其他选择...

问候

麦迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:30:01.123

这里有两个想法：

**1\. 使用可以连接到普通 TextBox 的拼写检查器**
如果您不需要富文本功能，请使用（例如）来自[Telerik RadControls](http://www.telerik.com/products/silverlight/overview.aspx)套件的拼写检查器组件。它可以附加到普通的 TextBox 和 RichTextBox，如本演示所示： http: [//demos.telerik.com/silverlight/#SpellChecker/TextBoxes](http://demos.telerik.com/silverlight/#SpellChecker/TextBoxes)。虽然它不是免费的。

**2\. 使用 VirtualizingStackPanel 来保存问题/评论**
如果您*确实*需要富文本，则必须改变您的方法。在 Silverlight 中一次加载这么多是不可能的。一种选择是使用 VirtualizingStackPanel 来保存 RichTextBox 组件。这样，实际上只会加载页面中可见的控件。这种方法的问题是每个问题/评论部分必须有一个固定的高度。查看此问题中发布的代码示例：
[Getting UI virtualization working with ItemsControl in Silverlight](https://stackoverflow.com/questions/3428374/getting-ui-virtualization-working-with-itemscontrol-in-silverlight)

# html - 如何链接到边框而不是 ,

> ID：13960076
> 
> 赞同：1
> 
> 时间：2012-12-19T19:51:04.830
> 
> 标签：html

我有一个带有锚定链接的长一页 HTML 网页 (llorch.org)。但我想要链接到蓝色边框而不是 h2。

```
<h2><a name="AboutMe">Sobre m&#237;</a></h2>. 
```

为了使这成为可能，我尝试链接到 div 而不是 h1。所以。

```
<a name="expositio1"><div class="expositio"></a>
<h2><a name="AboutMe">Sobre m&#237;</a></h2> 
```

它有效：http: [//jsfiddle.net/jv4cK/](http://jsfiddle.net/jv4cK/)

但它没有得到验证。

还有其他方法可以链接到边界吗？哦，我忘了说：它适用于所有浏览器，除了 IE。IE 将这个奇怪的边框置于蓝色边框之上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:54:51.230

您目前拥有的位置：

```
<div class="expositio"><a name="expositio2"></a> 
```

调整它以使用：

```
<div class="expositio" id="expositio2"> 
```

的现有书签`#expositio2`应该跳转到具有此 ID 的元素。`name`实际上不推荐使用该属性，因此使用 id 是执行此操作的正确方法。

# php - Find current count and total count from string using regex

> ID：13960083
> 
> 赞同：1
> 
> 时间：2012-12-19T19:51:31.727
> 
> 标签：php, regex, preg-match

I have a string that contains a lot of information, including a total count and current count. I want to use regex and php to match either `[001/100]` or `(001/100)`.

*   It can either be wrapped in parentheses or brackets.
*   It may also contain spaces inside the parentheses or brackets `( 001/100)`.
*   The delimiter can also be a `:` or `|`.

I want to ignore all spaces within the parentheses or brackets and the numbers can be any digets.

I plan to use preg_match_all. I am just struggling to figure out the regex.

```
preg_match_all('/[\(\[](\d+)[\:\|](\d+)[\)\]]/' $tmp, $matches); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:54:42.390

This should work for you but allows mixing parentheses and square brackets.

```
[([]\s*(\d+)\s*[/:|]\s*(\d+)\s*[)\]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:59:20.273

```
preg_match_all('@
   [([] #open paren or brace
   \s* #0 or more spaces
   (\d+) #capture the first number
   \s*
   [:/|] #delimeter
   \s*
   (\d+) #capture the second number
   \s*
   [)\]] #capture the closing paren or brace
@x', $string, $matches); 
```

# wget - wget - -nc 选项是否跳过下载现有文件？

> ID：13960092
> 
> 赞同：2
> 
> 时间：2012-12-19T19:51:59.987
> 
> 标签：wget

我正在用 wget 下载一个网站。命令如下：

```
wget -nc --recursive --page-requisites --html-extension --convert-links --restrict-file-names=windows --domain any-domain.com --no-parent http://any-domain.com/any-page.html 
```

即使我们递归下载网站，-nc 选项也会跳过下载现有文件吗？似乎 -nc 选项不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:56:30.923

男人说：

-nc --no-clobber 如果在同一个目录中多次下载文件，Wget 的行为取决于几个选项，包括 -nc。 在某些情况下，重复下载后**，本地文件将被破坏或覆盖。**

这是更多详细信息（也来自该人）：

**当使用 -r**或 -p 但没有 -N、-nd 或**-nc 运行 Wget 时，重新下载文件将导致新副本简单地覆盖**旧副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T09:24:15.557

该选项`--convert-links`与`-nc`. 尝试删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T21:17:26.877

Yes, the `-nc` option will prevent re-download of the file.

The manual page is confusing because it describes all of the related options together.

Here is pertinent bits from the man page:

> When running Wget with -r or -p, but without -N or -nc, re-downloading a file will result in the new copy simply overwriting the old. Adding -nc will prevent this behavior, instead causing the original version to be preserved and any newer copies on the server to be ignored.

# android - 从 InputStream 创建的 BitmapDrawable 的目标密度错误

> ID：13960093
> 
> 赞同：2
> 
> 时间：2012-12-19T19:52:00.220
> 
> 标签：android, image, android-layout

我需要使用 InputStream 创建一些 BitmapDrawables。我正在从 Uri 获取 InputStreams。但是，资源可绘制对象以错误的目标密度绘制。

我正在使用的设备的目标密度应为 320。相反，正在创建的 BitmapDrawable 的目标密度为 160（不好，图像显示一半大小）

在以下示例中，目标密度错误 - 将其设置为 160：

```
Uri fromResource = new Uri.Builder()
  .scheme(ContentResolver.SCHEME_ANDROID_RESOURCE)
  .authority("com.myapp.whatever")
  .path(String.valueOf(R.drawable.default_image))
  .build();

InputStream resourceStream = context.getContentResolver().openInputStream(fromResource);
// correct image, wrong size
Drawable resourceDrawable = new BitmapDrawable(context.getResources(), resourceStream); 
```

如果我使用其他方式，它会正确设置目标密度 - 设置为 320：

```
// same image, but right size
Drawable thisWayWorks = context.getResources().getDrawable(R.drawable.default_image); 
```

**为什么第一个示例中的目标密度错误？** BitmapDrawable 不应该使用传入的 Resources obj 正确设置密度吗？

“default_image”具有 md、hd 和 xd 资产。我尝试测试删除 md 和 hd 资产，以便我知道只有 xd 图像正在加载，但结果相同。

更多信息，我为什么要这样做：

我（应该）在磁盘上有一个图像，另一个默认图像作为可绘制资源（如果找不到磁盘上的图像则显示）。如果我总是可以使用 Uri 加载图像，并且没有“这个 Uri 实际上指向资源，而不是磁盘、内容、资产等”的特殊情况，我的整个管道就会得到简化

# git - 在推送更新之前将服务器端更新（如 WordPress 插件更新）提交到 Git 存储库

> ID：13960094
> 
> 赞同：0
> 
> 时间：2012-12-19T19:52:05.390
> 
> 标签：git, shell

我整天都在寻找一种方法来在服务器端进行更改（例如，当 WordPress 安装新插件更新或有人上传某些内容时）以提交到我用于站点部署的 Git 存储库。这是我得到的最接近的：

```
#!/bin/sh
git --git-dir=/home/cameronm/git/cameronmalek.git --work-tree=/home/cameronm/public_html/ checkout -f master
git --work-tree=/home/cameronm/public_html/ diff --exit-code &>-
if [ "$?" -ne 0 ]; then
    git --work-tree="/home/cameronm/public_html/" add .;
    git --work-tree="/home/cameronm/public_html/" commit -m "automated server-side update";
fi 
```

这个解决方案的问题，以及这篇文章的原因，是这一切都以错误的顺序发生。在我的更新被推送之前，我正在寻找一种将其他非 Git 方所做的所有更改提交到实时网站目录的方法。这样做的原因是，**如果我尝试推送的更新覆盖了最近添加到服务器的内容，我希望能够潜在地看到合并冲突。**

我整晚都在想办法解决这个问题。这是一个很难描述（和谷歌）的问题，所以如果我可以为你澄清任何事情，请给我一个便条。

感谢您提供的任何帮助！

* * *

# 更新！

您可以在我的 Gists 页面上查看我的工作解决方案（单独的预接收和接收后挂钩）。这是[pre-receive hook](https://gist.github.com/4353675 "预收挂钩")和[post-receive hook](https://gist.github.com/4354282 "接收后挂钩")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:34:45.480

您正在尝试做的事情有点棘手，因为如果那里有**任何**您在本地没有的提交（无论是否冲突），您都无法推送到远程分支。如果您对此感到满意，那么您就在正确的轨道上。我假设您将上面的脚本设置为您的接收后挂钩？您只需将其设置为[预接收挂钩](http://www.kernel.org/pub/software/scm/git/docs/githooks.html#pre-receive)并在有修改时返回非零值。您可能还想向用户回显一条错误消息，告诉他发生了什么。

如果发生这种情况，推送将失败，用户必须先拉动，然后才能推送（因为推送不再是快进）。

但是，为什么要在检查更改**之前进行结帐？**

# scala - 一个项目，许多主类，许多带有 sbt 的 jars？

> ID：13960096
> 
> 赞同：2
> 
> 时间：2012-12-19T19:52:07.497
> 
> 标签：scala, jar, sbt

我一直在阅读 sbt 文档，但找不到一个很好的明确示例。

这些只是简单的小命令行应用程序，它们彼此略有不同，对于我的用例来说，为每个应用程序创建不同的 jar 是最方便的。

看起来我只需要做这样的事情

```
packageOptions in (Compile, packageJar1) += ..

packageOptions in (Compile, packageJar2) += ..

packageOptions in (Compile, packageJar3) += .. 
```

来自（http://www.scala-sbt.org/release/docs/Howto/package.html）

然后以某种方式在每个人的清单中设置主类？如果是这种情况，我该如何完成这件事？否则，我真的需要做什么？

# android - 选择器项 android:state_xxx="false" vs 无状态项（默认）

> ID：13960101
> 
> 赞同：1
> 
> 时间：2012-12-19T19:52:16.927
> 
> 标签：android, android-xml, android-selector

```
<item android:state_enabled="false" android:color="@android:color/bright_foreground_dark_disabled"/>
<item android:color="@android:color/bright_foreground_dark"/> 
```

这两者有什么区别？根据文档，当状态未启用时使用第一项的颜色，第二项是默认颜色。那么，如果该项目未启用，则使用哪种颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:55:03.247

如果该项目未启用，`item`则使用第一个，因为它匹配其所有`state`选择器。选择器项目从上到下检查，第一个使用`state`匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:35:08.293

`false`状态旨在与其他状态结合使用。例如，您有可检查的项目，它可以被禁用或启用，并且您希望每个状态组合具有不同的可绘制对象。这可以通过以下方式实现：

```
<item android:state_checked="true" android:state_enabled="true" android:drawable="@drawable/drawable1"/>
<item android:state_checked="true" android:state_enabled="false" android:drawable="@drawable/drawable2"/>
<item android:state_checked="false" android:state_enabled="true" android:drawable="@drawable/drawable3"/>
<item android:state_checked="false" android:state_enabled="false" android:drawable="@drawable/drawable4"/>
<item android:drawable="@drawable/drawable0"/> 
```

如果你不需要这样的组合，那么`state_xxx="false"`没有其他状态就没有必要使用，尽管这不是一个错误。

# adb - ADBD 源代码是内核还是 AOSP 的一部分？

> ID：13960102
> 
> 赞同：0
> 
> 时间：2012-12-19T18:25:18.047
> 
> 标签：adb

ADBd（ADB Daemon）源代码是内核的一部分还是 AOSP（Android 开源项目）的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:22:48.573

我没有检查来源，但我相信它是 AOSP 的一部分。虽然，作为一个系统应用程序，它确实具有安装的应用程序在无根设备上无法获得的特殊权限。

# javascript - 达到固定宽度后防止在表格单元格上输入？

> ID：13960104
> 
> 赞同：6
> 
> 时间：2012-12-19T19:52:28.780
> 
> 标签：javascript, jquery, html, html-table, cell

一旦达到宽度，我想防止在 HTML 表格单元格上进行额外输入。

该表具有固定布局、无换行和特定宽度。溢出当前设置为隐藏。

是否可以过滤（并最终阻止）输入，使其在固定宽度处停止，从而不会出现溢出（隐藏或其他）。我目前正在使用 jQuery 过滤回车，以便单元格不会扩展到其他行。

也许我对 HTML 表格的要求太多了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:28:14.927

一种可能的解决方案是将单元格内容复制到`keydown`隐藏字段中并计算该字段的值：

```
$("table input").on("keydown", function(e) {
    $("#copy").text(this.value);

    var width = $("#copy").outerWidth();
    console.log("w: " + width);

    var code = e.keyCode ? e.keyCode : e.which;
    if (width > 50 && code  !== 8 && code !== 49) {
        return false;
    }
}); 
```

我用这样的解决方案创建了一个小提琴：http: [//jsfiddle.net/scaillerie/hnRjB/2/](http://jsfiddle.net/scaillerie/hnRjB/2/)。

`input`需要注意的一点是 font-family 和 font-size 在and 中应该是相同的`div`，才能有正确的值，这就是 CSS 规则的原因：

```
* {
    font-family: arial;
    font-size: 1em;  
} 
```

但是`*`，您应该限制以适合您的需要（例如，`table input, #copy`），而不是 。

* * *

**编辑 ：**

请注意，使用此代码，用户可以输入超过输入长度的内容，但您可以在复制的字段中添加一些“长”字符，以测试宽度：http: [//jsfiddle.net/scaillerie/hnRjB /3/](http://jsfiddle.net/scaillerie/hnRjB/3/)。

# javascript - 一次对多个数组进行排序

> ID：13960105
> 
> 赞同：5
> 
> 时间：2012-12-19T19:52:29.627
> 
> 标签：javascript, jquery

我有 3 个数组：

*   数组 1 是“姓名”John、Jim、Jack、Jill

*   数组 2 是“年龄”25、30、31、22

*   数组 3 是“性别”男、男、男、女

我将这些都列在一个带有可排序标题的表中。现在排序工作正常，例如按“名称”列排序。我怎样才能让它对“年龄”和“性别”数组进行排序以保持正确。我需要同时对所有 3 个进行排序。

```
_nameArray.sort(function(a, b){
    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
}) 
```

希望它解释得很好。

不，结构不能改变，事情的方式必须是 3 个数组，而不是一个，只需按数组中的字段排序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T20:05:09.097

即使从多个数组构造对象可能是理想的。您也可以使用**间接**方法在没有对象创建开销的情况下完成此操作。

```
/* An array of indexes */
var idx = [];
for (var i = 0; i < Name.length; i++) {
    idx.push(i);
}

/* A shorthand function */
var comparator = function(arr) {
    return function(a, b) {
        return ((arr[a] < arr[b]) ? -1 : ((arr[a] > arr[b]) ? 1 : 0));
    };
};

/* Sort by Age */
idx = idx.sort(comparator(Age));

/* Get the sorted order */
for (var i = 0; i < Name.length; i++) {
    console.log(Name[idx[i]], Age[idx[i]], Gender[idx[i]]);
}​ 
```

该`idx`数组包含指向其他数组元素的索引`idx[i]`。通过使用间接，您可以访问`Name`,`Age`和`Gender`;中的元素 也就是说，`Name[idx[i]]`.

如果性能是一个问题，那么使用就地排序构建对象可能会更快，如果你只做一次。否则，我会使用间接而不接触真正的数组。

[**你去吧。**](http://jsfiddle.net/ZTUyf/)

**注意**：该`comparator`函数只是一个示例，您需要根据您的标准实际创建自己的比较器函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:48:57.770

尝试制作对象（如一些评论中所建议的）我不确定增加的复杂性是否值得，但无论如何都会将它发布在这里以防万一它有用。在这种特殊情况下，一个对象几乎没有什么用途，可能更有`Person`用的是一个聚合对象（`PersonSet`（[jsfiddle](http://jsfiddle.net/dppJ4/3/)）

```
var names = ['John', 'Jim', 'Jack', 'Jill'],
    ages = [25, 30, 31, 22],
    genders = ['male', 'male', 'male', 'female'];
function Person(name, age, gender) {
    this.name = name;
    this.age = age;
    this.gender = gender;
}
function PersonSet(names, ages, genders) {
    this.content = [];
    for (var i = 0; i < names.length; i++) {
        this.content.push(new Person(names[i], ages[i], genders[i]));
        // (alternatively...)
        // this.content.push({name: names[i], age: ages[i], gender: 
        //     genders[i]});
    }
    this.sort = function(aspect) {
        this.content.sort(function(a, b) {
            return ((a[aspect] < b[aspect]) ? -1 : 
                ((a[aspect] > b[aspect]) ? 1 : 0));
        });
    };                    
    this.get = function(aspect) {
        var r = [];
        for (var i = 0; i < this.content.length; i++) {
            r.push(this.content[i][aspect]);
        }
        return r;
    }
}
var personSet = new PersonSet(names, ages, genders);
personSet.sort('age');
console.log(personSet.get('name'), personSet.get('age'), 
            personSet.get('gender'));​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:01:09.723

如果你想对表格中的数据进行排序，你应该看看[Tablesorter](http://tablesorter.com/docs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:04:10.700

鉴于您的限制，为什么不编写自己的排序函数。在 sort 函数内部维护所有数组，例如：

> 1.  找到最低的项目。假设它位于索引 5。现在在所有 3 个数组中将 item@index5 与 item@index0 交换。
> 2.  从索引 1 开始重复上述逻辑...

# java - 在 HTML 页面上显示 servlet

> ID：13960107
> 
> 赞同：0
> 
> 时间：2012-12-19T19:52:32.107
> 
> 标签：java, servlets

我有一个简单的 servlet，可以打印出带有一些文本的基本 HTML 标头。在主 html 页面上，我对其进行了设置，以便在按下提交按钮时，它会转到 servlet 页面。

如何在主页中显示该 servlet，而不是让用户按下提交按钮来显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:59:20.627

`doGet()`只需在方法中执行工作，而不是`doPost()`直接通过浏览器地址栏中的 URL 而不是 HTML 页面中的 URL 调用 servlet。

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

* * *

**与具体问题无关**，使用 servlet 发出 HTML 是一种不好的做法。将该 HTML 放入 JSP 文件中，然后让 servlet 转发到该 JSP。这提供了更好的 Java 代码和 HTML 标记分离，从而更容易维护，而无需摆弄带引号的字符串和其他 HTML 细节。这在上面链接的 Servlets wiki 页面中有详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:56:47.587

要请求 Servlet，请使用部署描述符（或最新版本中的注释）中配置的 URL。如果您打算将网站的默认页面作为您的 servlet，那么您只需配置映射，以便默认映射到您的 servlet。

```
 <servlet-mapping>
     <servlet-name>MyServlet</servlet-name>
     <url-pattern>/</url-pattern>
   </servlet-mapping> 
```

# ios - 在 setText 中更新子类 UILabel 框架：因为 UILabel 不会在 UITableViewCell 中调整大小，直到重新加载单元格

> ID：13960112
> 
> 赞同：0
> 
> 时间：2012-12-19T19:52:55.977
> 
> 标签：ios, uilabel, frame, sizewithfont

我将一个 UILabel 子类化，我打算在许多不同`UITableViewCell`的 s 中使用它。

在`setText:`我曾经`sizeWithFont`获得过动态高度的`UILabel`.

这一切都很好，但是，子类的框架在`UILabel`重绘单元格之前不会改变。我该如何克服呢？

**注意：**`if`在下面的代码中，由于语句的原因，重绘时大小不会改变。我把它拿出来测试，发现它在重绘后有效。

我认为它需要使用`setNeedsDisplay`或类似的，但它们也不起作用。

这是我正在使用的代码：

```
- (void)setText:(NSString *)text
{
    if (text != _text) {
        //  Adjust size to fit contents
        //
        CGSize maximumSize = CGSizeMake(CGRectGetWidth(self.frame), CGFLOAT_MAX);
        CGSize predictedSize = [text sizeWithFont:self.font constrainedToSize:maximumSize lineBreakMode:self.lineBreakMode];

        NSLog(@"Predicted size for \"%@\" (width: %f) is %@", text, self.frame.size.width, NSStringFromCGSize(predictedSize));

        CGRect headlineDescriptionLabelFrame = self.frame;

        headlineDescriptionLabelFrame.size = predictedSize;

        NSLog(@"Old frame: %@", NSStringFromCGRect(self.frame));

        [self setFrame:headlineDescriptionLabelFrame];

        NSLog(@"New frame: %@", NSStringFromCGRect(self.frame));

        _text = text;
    }
} 
```

我的输出看起来像这样（上面的'if'关闭）：

```
2012-12-19 19:51:23.576 myApp[1099:c07] Predicted size for "Facebook's photo-sharing service Instagram denies that it has changed its privacy policy to allow it to sell users' photos to advertisers." (width: 172.000000) is {170, 75}
2012-12-19 19:51:23.578 myApp[1099:c07] Old frame: {{138, 46}, {172, 49}}
2012-12-19 19:51:23.578 myApp[1099:c07] New frame: {{138, 46}, {170, 75}} 
```

**此处重新加载单元格**
**UILabel 已调整大小并在第一次单元格重新加载后显示**

```
2012-12-19 19:51:30.018 myApp[1099:c07] Predicted size for "Facebook's photo-sharing service Instagram denies that it has changed its privacy policy to allow it to sell users' photos to advertisers." (width: 172.000000) is {170, 75}
2012-12-19 19:51:30.018 myApp[1099:c07] Old frame: {{138, 46}, {172, 49}}
2012-12-19 19:51:30.019 myApp[1099:c07] New frame: {{138, 46}, {170, 75}} 
```

**单元格在此处重新加载**

```
2012-12-19 19:51:32.014 myApp[1099:c07] Predicted size for "Facebook's photo-sharing service Instagram denies that it has changed its privacy policy to allow it to sell users' photos to advertisers." (width: 170.000000) is {170, 75}
2012-12-19 19:51:32.014 myApp[1099:c07] Old frame: {{138, 46}, {170, 75}}
2012-12-19 19:51:32.015 myApp[1099:c07] New frame: {{138, 46}, {170, 75}} 
```

***编辑***

经过4天的尝试，我仍然遇到这个问题，有谁知道这是否是Apple方面的错误？其他人如何调整从 UITableViewCell 笔尖加载的 UILabel 的大小`cellForRowAtIndexPath:`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:37:06.403

事实证明，我需要做的就是将帧更改代码添加到`layoutSubviews`（以及超级方法`[super layoutSubviews]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:29:09.453

而不是“在此处重新加载单元格”，只需尝试

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

触发重新计算。在没有真正重新加载它们的情况下计算单元格的高度，这是不必要的，因为您只更改了标签的文本。

# c# - 如何构造一个类型，保存两种“类型”的数据，作为单个参数发送

> ID：13960116
> 
> 赞同：-1
> 
> 时间：2012-12-19T19:53:11.153
> 
> 标签：c#, class, optimization, types

我需要实现这种方法——两种数据作为一组参数发送**——** `Type`这样一种类型就可以保存这两个参数。这样我就可以`Type`通过某种方法来处理它。

第一个数据项是：

*   **要显示的列**，命名为： **`displayed`**

第二个数据项：

*   该 Columns的副本（或**只有一部分**`displayed`） ，因为它具有相同的来源，所以只有这些列**不会**显示......换句话说，**Columns 要省略**，所以我将其命名为： **`omitted`**

两者都是我命名的类型 Columns -`SelectedColumns`

```
public class SelectedcColoumns
{
    public enum renederingMode
    {
        Displayed,
        omitted
    }
    public class omitted
    {

    }
    public class displayed
    {
    }
} 
```

因为要显示的 SetOfColumns 请求是通过选择表名来完成的。因此，作为要显示的数据的 Column 类会根据用户选择的可用源 For`SelectedColumns`的选择而有所不同，如下所示：

```
public class tableNames
{
   public static readonly string tblCustomers = "tblCustomers";
   public static readonly string tblProducts = "tblProducts";
}

public class TblColumns
{
    public class tblCustomers
    {
        public const string custID = "custID",
                            Name = "Name",
                            Phone = "Phone";
                            Email = "Email";

    }
    public class tblProducts 
    {
        public const string PrudctID = "PrudctID ",
                            PrudctName = "PrudctID",
                            PrudctCategory = "PrudctCategory";
    }
    ...etc'

} 
```

当用户选择一组表列...从任何表用户可以，在这个例子中..选择一个`Customers`或`Products`列（例如`SelectedColumns` - 是`tblCustomers`列），然后我需要有另一个列表，用户选择省略的那些（不显示）来自所有可用的表列。

假设用户选择将表客户作为表。他选择省略 `tblCustomers.custID`+`tblCustomer.Email`因为他只需要显示姓名和电话。

我遇到的问题是，当这些参数在我的范围内（表名+要省略的列）时，我怎样才能将它发送到进程（将它作为**One Parameter**传递）？所以这就是为什么我创建了一个专用类，将其`Type`作为发送参数：`all columns`+`omitted Columns`放在一起。

这是我目前卡住的地方；我需要知道如何使用它来构建/构造用户选择的参数。

```
public class SelectedColoumns
{
    public enum renederingMode
    {
        Displayed,
        omitted
    }
        public class omitted
        {
           List<string> omitCols_ListStr = new List<string>();
        }

        public class displayed
        {
           List<string> dispCols_ListStr = new List<string>();
        }
} 
```

在这一部分中，我通过以下方法检索`reflection`作为数据提供*者*的列列表：

获取任何嵌套类字段， As `List<string>`，通过嵌套`class-name`和它的**父**级- `Type`。

```
public static List<string> anyNestedClassFiledsAsListByType<ClassToReturnOneOfitsNested_Fields>(string NetedClassName)
 {
                var RetNestedClassFildsListValues = typeof(ClassToReturnOneOFitsNested).GetNestedTypes()
                    .First(t => String.Compare(t.Name, NetedClassName, true) == 0).GetFields(BindingFlags.Public | BindingFlags.Static)
                    .Where(f => f.FieldType == typeof(string)).Select(f => (string)f.GetValue(null)).ToList();
                return RetNestedClassFildsListValues;
            } 
```

所以要产生这个我可以使用上面的方法就像那样

```
var TableColumns_ALL = 
anyNestedClassFldsAsListByType<TblColumns>(tableNames.tblCustomers); 
```

我的问题与需要发送 TableColumns_ALL + 选择的列以省略然后由`renderSelectedTable()`下面处理的类有关。

所以它比反射的复杂性更基本，但仍然有些我不知道构造的popper方法`SelectedColumns class`，所以它将容纳和格式化这种新数据类型的结构，该结构将作为方法的参数发送像这样的东西。

```
public void renderSelectedTable(SelectedColoumns CurrentUserSelectedCols)
{
    StringBuilder NwTRLoopSB = new StringBuilder();

    string curRowStyle= string.Empty,
           nwLine = Environment.NewLine + "\t\t\t",
           BaseTemplateTD = string.Empty;

    NwTRLoopSB.Append(
            string.Format(
                "<table id='tbl_Settings' cellspacing='0' border='1'><tr id='TR_headers'{0}>{1}",
                curRowStyle,
                nwLine
                )._Dhtml_DoubleQoutes()
        );
    foreach (var Item in SelectedListStr.Select((Val, counter) => new { Value = Val, Index = counter }))
    {
            curRowStyle = Lsts.DynamicStyle_Generator(Item.Index);

            if(Lsts.ExcludeColumns(Item.Value, OmittedCols))
            {
                BaseTemplateTD = string.Format("<td>{0}</td>{1}", Item.Value, nwLine)._Dhtml_DoubleQoutes();
                NwTRLoopSB.Append(BaseTemplateTD);
            }    

    }///ENd TR cells generator Section

    NwTRLoopSB.Append("</tr></table>");
    return NwTRLoopSB.ToString();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:24:32.723

我会这样处理：

```
public class Column{
    public string Name { get; set; }
    public bool Visible { get; set; }
}

public class Grid{
    public List<Column> Columns { get; set; }
} 
```

所以我可以很容易地用可见或省略的列定义我的完整表。在 OP 的示例中：

```
public class SelectedColumns
{
    //instead of the enum you would have boolean in the column type "Visible" (whether is shown or not)
    public enum renederingMode
    {
        Displayed,
        omitted
    }
    // instead of both these you would have a List o Column types that have a name AND a boolean, so you have your List<string> and a boolean to indicate whether it is visible or ommited. Well at least that's how I understood it.
    public class ommited
    {

    }
    public class displayed
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:12:31.270

所以..首先..一个设计说明：给定一个列列表..您将显示一列，或者不显示一列..在可见性方面没有其他选项。因此，您实际上只需要传入要显示的列或要省略的列的单个列表 - 但不能同时传递两者。

如果您选择进行该修改，那么您只需传入一个`List<string>`

如果您选择保留当前的设计，那么您将需要一个包含两个的类**`properties`**：

```
public class SelectedColumns {
    public List<string> displayed { get; set; }
    public List<string> omitted { get; set; }
} 
```

# html - 如何使标题栏折叠在网页css上

> ID：13960117
> 
> 赞同：7
> 
> 时间：2012-12-19T19:53:11.373
> 
> 标签：html, css, effect

有人可以告诉我CSS代码或指向一个关于如何实现这种效果的教程，一直都可以看到。这是我正在谈论的图像：

![在此处输入图像描述](../Images/1026c4fbeb5b9e5f735480ca83b30627.png)

注意：我知道如何使用绝对定位，我只需要知道它们是如何实现效果的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:07:17.060

如果功能区是问题，则在空（*0-size*）元素（*您可以使用`:after`伪元素*添加）上使用边框。

**html**

```
<div id="content">
    <div id="ribbon"></div>
</div> 
```

**CSS**

```
#content{
    background-color:#77c;
    width:300px;
    height:200px;
    position:relative;
}
#ribbon{
    position:absolute;
    width:80px;
    height:30px;
    right:-20px;
    top:50px;
    background-color:#999;
}
#ribbon:after{
    content:'';
    width:0;
    height:0;

    border-color: transparent transparent #666 #666;
    border-style:solid;
    border-width:5px 10px;

    position:absolute;
    right:0;
    top:-10px;
} 
```

**演示在** [http://jsfiddle.net/gaby/zJPhy/](http://jsfiddle.net/gaby/zJPhy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:56:51.017

这可以相对定位，也可以绝对定位——它可以通过任何一种方式完成：

```
#item {
    position: relative;
    right: -10px; /* moves it 10px to the right */
} 
```

或者绝对：

```
#item {
    position: absolute:
    top: 20px; /* 20px from the top */
    right: -20px; /* 20px off the right edge */
} 
```

请注意，如果绝对定位的元素没有定位的祖先，则它们将根据视口进行定位。

折叠部分可以使用伪元素上的边框`:before`或`:after`.

演示：http: [//jsfiddle.net/MaepP/2/](http://jsfiddle.net/MaepP/2/)

# c# - DefaultModelBinder 和继承对象的集合

> ID：13960120
> 
> 赞同：8
> 
> 时间：2012-12-19T19:53:32.200
> 
> 标签：c#, asp.net-mvc, model-view-controller, modelbinders

我有一个像下面这样的操作方法。

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Create(Form newForm)
{
     ...
} 
```

我有一个带有以下类的模型，我想从 ajax JSON 数据中加载数据。

```
public class Form
{
    public string title { get; set; }

    public List<FormElement> Controls { get; set; }

}

public class FormElement
{
    public string ControlType { get; set; }

    public string FieldSize { get; set; }
}

public class TextBox : FormElement
{
    public string DefaultValue { get; set; }
}

public class Combo : FormElement
{
    public string SelectedValue { get; set; }
} 
```

这是 JSON 数据。

```
{ "title": "FORM1", 
"Controls": 
[
{ "ControlType": "TextBox", "FieldSize": "Small" ,"DefaultValue":"test"}, 
{ "ControlType": "Combo", "FieldSize": "Large" , "SelectedValue":"Option1" }
] 
}

 $.ajax({
                url: '@Url.Action("Create", "Form")',
                type: 'POST',
                dataType: 'json',
                data: newForm,
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    var msg = data.Message;
                }
            }); 
```

DefaultModelBinder 正在处理嵌套对象结构，但它无法解析不同的子类。

用相应的子类加载 List 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:47:23.303

我查看了 mvc DefaultModelBinder 实现的代码。绑定模型时，DefaultModelBinder 使用 GetModelProperties() 查找模型的属性。以下是 DefaultModelBinder 如何查找属性：

```
 protected virtual ICustomTypeDescriptor GetTypeDescriptor(ControllerContext controllerContext, ModelBindingContext bindingContext) {
            return TypeDescriptorHelper.Get(bindingContext.ModelType);
        } 
```

TypeDescriptorHelper.Get 使用的是子类型 ModelType（在我的情况下为 FormElement），因此不会检索子类（TextBox、Combo）的属性。

您可以覆盖该方法并更改行为以检索特定的子类型，如下所示。

```
protected override System.ComponentModel.PropertyDescriptorCollection GetModelProperties(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    Type realType = bindingContext.Model.GetType();
    return new AssociatedMetadataTypeTypeDescriptionProvider(realType).GetTypeDescriptor(realType).GetProperties();
}

protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
        {
            ValueProviderResult result;
            result = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".ControlType");

            if (result == null)
                return null;

            if (result.AttemptedValue.Equals("TextBox"))
                return base.CreateModel(controllerContext,
                        bindingContext,
                        typeof(TextBox));
            else if (result.AttemptedValue.Equals("Combo"))
                return base.CreateModel(controllerContext,
                        bindingContext,
                        typeof(Combo));
            return null;
        } 
```

# iphone - __weak UIDataType *weakSelf 和 UIDataType __weak *weakSelf 的区别？

> ID：13960131
> 
> 赞同：6
> 
> 时间：2012-12-19T19:54:06.943
> 
> 标签：iphone, objective-c, ios

我看到了两种不同的实现......

```
__weak UIDataType *weakSelf = self; 
```

和

```
UIDataType __weak *weakSelf = self; 
```

然而，它们似乎都有效。引擎盖下发生的事情有什么不同吗？

提前感谢您的智慧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:16:46.440

没有区别。由于`__weak`只能应用于指向对象的类型，编译器认识到只有一种含义对以下所有内容有意义：

```
__weak UIDataType *weakSelf;
UIDataType __weak *weakSelf;
UIDataType * __weak weakSelf; 
```

这同样适用于其他所有权限定符（`__strong`、`__autoreleasing`等）

如果您喜欢阅读编程语言的技术规范，可以在此处阅读更多相关信息：http: [//clang.llvm.org/docs/AutomaticReferenceCounting.html#spelling](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#spelling)。

# sql - 如何从上午 12:00 到晚上 11:59 运行“今天”日期的查询

> ID：13960132
> 
> 赞同：5
> 
> 时间：2012-12-19T19:54:10.610
> 
> 标签：sql, sql-server, sql-server-2008

我有一个简单的查询，可以提取我们当天的支付报告。我想每天晚上自动发送此报告，但是我希望报告在每天上午 12:00 - 晚上 11:59 运行...我将在晚上 9:00 发送报告，所以我想它如果这样更容易的话，只需要到晚上 9:00。

这是我的查询：

```
SELECT        COUNT(*) AS Number, SUM(dblPayoutAmt) AS Amount
FROM            Payouts
WHERE        (dtCreated BETWEEN @startdate AND @enddate) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:57:40.287

不要使用 BETWEEN，使用 >= 开始日期和 < 结束日期之后的一天：

```
WHERE (dtCreated >= @startdate AND dtCreated < DATEADD(day, 1, @enddate)) 
```

原因是 BETWEEN 会一直查找到结束日期的上午 12:00，但不会超过该时间。

**更新**

对于今天的日期，您可以这样做：

```
WHERE DATEADD(dd, 0, DATEDIFF(dd, 0, dtCreated)) = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

这将检查它是否`dtCreated`等于今天的某个点。

**更新**

正如@ScottChapman 指出的那样，您可以通过`DATE`直接转换为类型来做同样的事情而无需转换体操。但是，此类型仅在 MSSQL 2008 及更高版本中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:58:22.567

```
SET @StartDate = CAST(GETDATE() AS date)
SET @EndDate = DATEADD(MINUTE, -1, DATEADD(DAY, 1, @StartDate))

SELECT        COUNT(*) AS Number, SUM(dblPayoutAmt) AS Amount
FROM            Payouts
WHERE        (dtCreated BETWEEN @startdate AND @enddate) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T20:12:23.030

其中一些答案很接近，但不包括一天中最后一分钟的时间，例如晚上 11:59:30。此查询将包括今天的所有内容：

```
SELECT        COUNT(*) AS Number, SUM(dblPayoutAmt) AS Amount
FROM            Payouts
WHERE        (dtCreated >= CAST(GETDATE() as date) AND dtCreated < DATEADD(day, 1, CAST(GETDATE() as date))) 
```

请注意，这在 SQL Server 2005 或更低版本中不起作用，因为该`date`类型是在 SQL Server 2008 中添加的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T20:13:49.980

当您使用 SQL/Server 2008 时，您可以从 DATETIME 列中删除任何时间元素，方法是将其转换为 DATE 并选择它，例如

```
SELECT COUNT(*) AS Number, SUM(dblPayoutAmt) AS Amount
  FROM Payouts
 WHERE CONVERT(DATE,dtCreated) = CONVERT(DATE,GETDATE()) 
```

优雅得多

[编辑] 哦，我刚刚阅读了 Scott Chapman 的回答，这更好，因为如果 dtCreated 被索引，那么查询将更有效率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:01:45.230

前面的答案还包括 < 12.00 am 的数据

```
SELECT 
  COUNT(*) AS Number
  , SUM(dblPayoutAmt) AS Amount
FROM 
  Payouts
WHERE
  dtCreated >= dateadd( hour, 12, cast( cast( getdate() as date ) as datetime ))
  and dtCreated < dateadd( second, -1, dateadd(day, datediff(day, -1, getdate()), 0)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T20:37:39.010

将它们都设置为简单的日期示例：`BETWEEN '2012-12-19' AND '2012-12-20'`没有时间戳，然后选择两者之间。

在此示例中，如果您将结束日期设置为`'2012-12-20 23:59:59.999'`然后执行 a`SELECT @enddate`它返回`'2012-12-21 00:00:00.000'`

或使用函数类型语法：

```
 declare @mystart as datetime
  declare @myend as datetime
  set @mystart = dateadd(day,datediff(day,0,CURRENT_TIMESTAMP),0)
  set @myend = dateadd(day,datediff(day,0,CURRENT_TIMESTAMP),1) 
  select @mystart, @myend 
```

这里的@mystart 设置为仅日期部分（时间为 00:00:00.000），并且结束发送到该日期加上一天，因此 BETWEEN 语法有效。

# php - php中特定日期的最后一个工作日

> ID：13960133
> 
> 赞同：9
> 
> 时间：2012-12-19T19:54:12.153
> 
> 标签：php, date

我正在寻找从特定日期获得最后一个工作日的最佳方法。我使用的示例是圣诞节前夕（12 月 24 日）前的最后一个工作日。

不幸的是，这不起作用：

```
echo date('l jS \of F Y h:i:s A', strtotime('last weekday before 24th December 2012')); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T20:12:11.363

只需删除`before`，您的示例就可以正常工作（从 PHP 5.2.0 开始）。[根据相对格式文档](http://php.net/manual/en/datetime.formats.relative.php)，首先处理绝对日期部分 ( `24th December 2012`)，然后处理相对部分 ( `last weekday`) 。

**原来的**

```
last weekday before 24th December 2012 
```

**正确的**

```
last weekday 24th December 2012 
```

* * *

根据其他答案，`previous`当`last`在问题中使用时，其行为方式完全相同；*表示某事*的前一次发生（在这种情况下，是工作日）。`last`在 的 样式中使用时确实有另一个特殊含义`last dayname of`，而问题中没有使用。

参考：

*   [相对格式手册页](http://php.net/manual/en/datetime.formats.relative.php)
*   事实上，每个[日期/时间格式页面](http://php.net/manual/en/datetime.formats.php)都记录了可用的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:59:07.413

你有没有尝试过这样的事情：

```
echo date('l jS \of F Y h:i:s A', strtotime('24th December 2012 previous weekday')); 
```

这将输出类似`Friday 21st of December 2012 12:00:00 AM`使用的东西`PHP 5.3.19`

这是您可以解决此问题的另一种方法，它不是最漂亮的东西，但应该可以：

```
$date = '24th December 2012';
$dateN = intval(date('N', strtotime($date)));

if ($dateN === 1) {
    $prevWeekday = date('l jS \of F Y h:i:s A', strtotime($date . '-3 days'));
} else if ($dateN === 7) {
    $prevWeekday = date('l jS \of F Y h:i:s A', strtotime($date . '-2 day'));
} else {
    $prevWeekday = date('l jS \of F Y h:i:s A', strtotime($date . '-1 day'));
}

echo $prevWeekday; 
```

# java - 使用 Java Mail API 从一个地址服务器向另一台服务器发送电子邮件

> ID：13960134
> 
> 赞同：1
> 
> 时间：2012-12-19T19:54:26.057
> 
> 标签：java, jakarta-mail

我有一个在线表格，允许用户通过电子邮件向公司投诉。为了测试它，我使用了 gmail smtp 作为我的主机。当发件人也是 gmail 时，我可以将邮件接收到指定的电子邮件帐户，但我希望“发件人”不仅限于 gmail 帐户。似乎 smtp 仅适用于从同一服务器发送电子邮件？

示例：如果发件人是 abc@gmail.com 并且公司电子邮件是 company@gmail.com，我的表单效果很好。

但是，如果为发件人输入 xyz@yahoo.com，则收件人 company@gmail.com 永远不会得到它。

任何帮助将不胜感激。如果需要，我也可以提供我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:06:58.840

您的问题是使用 SMTP 时的常见安全限制。传出的 SMTP 电子邮件只能包含属于发件人的“发件人”地址。如果您违反此规则，您的电子邮件可能会被视为垃圾邮件。

以下将允许您的收件人回复备用地址。

```
Properties properties = new Properties();
props.put("mail.smtp.from", "abc@gmail.com");
Session session = Session.getDefaultInstance(props, null);
MimeMessage m = new MimeMessage(session);
m.addFrom(InternetAddress.parse("xyz@yahoo.com"));
m.setReplyTo(InternetAddress.parse("xyz@yahoo.com")); 
```

也可以看看

*   [http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)
*   [http://www.openspf.org/Best_Practices/Webgenerated](http://www.openspf.org/Best_Practices/Webgenerated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:51:19.647

最好使用服务器上拥有该应用程序的用户身份将消息发送到您公司的邮件服务器，并将客户在在线表单中提供的信息作为数据包含在您发送的消息中。该消息看起来不像来自客户，但实际上它不是来自客户，因为它不是使用客户的邮件服务器发送的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:06:07.570

好吧，您将必须拥有另一封电子邮件并将其设置为与 gmail 一起使用，请[在此处](http://wonkabar.org/2009/09/02/gmail-smtp-custom-from-email-address/)查看更多详细信息。

# php - 使用 cookie 和会话变量的持久登录

> ID：13960136
> 
> 赞同：1
> 
> 时间：2012-12-19T19:54:41.127
> 
> 标签：php, session, cookies, login, session-variables

我一直在研究在我的网站上实现持久登录的最佳（和最安全）方法，我提出了以下建议：

当用户登录时，会创建一个包含用户 ID/用户名和随机生成的数字（令牌）的 cookie。令牌与用户 ID/用户名一起存储在关系表中。每次加载仅限成员的页面时，都会根据关系表检查此 cookie，如果它存在*并*与令牌匹配，则登录有效并且可以加载页面。但是，如果不是，则登录无效，cookie 被销毁，并提示用户登录。

我在想...为了在每次加载页面时节省数据库访问，我还可以有一个会话变量，例如持续 10 分钟，并在浏览器关闭时自动销毁。如果会话是活动的，那么它会被刷新并且用户可以继续。如果会话过期，但 cookie 仍然有效，请检查 cookie，重置令牌，将新令牌存储在数据库中（同时消除旧令牌，或将其存储在存档表中以供将来参考），然后重置 cookie使用新的令牌值。

但是，会话将包含什么内容？怎么能不简单地用一些 JavaScript 伪造会话呢？也许会话包含单向加密哈希？将使用什么来生成该哈希（用户 ID 等）？

我有点想从这里去哪里。我得到了 cookie 的东西，但是使用临时会话（以避免每次加载页面时重复调用数据库）让我望而却步。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T09:10:50.250

根据[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt) ，不建议使用 UUID ，它指出

> 不要假设 UUID 很难猜；它们不应用作安全功能。

我建议将以下所有信息组合并乘以散列，同时使用存储在服务器中的公钥对其进行加密。

*   UserId（或注册时为每个用户生成的用户 UUID）
*   **加密**他/她的密码（被认为是每个用户加密的私钥）
*   时间戳
*   客户端操作系统
*   客户端用户代理（浏览器名称）

对于存储令牌，您可以使用在大公司中大量使用的[memcache](http://memcached.org/) ，如果您专注于持久性，则可以使用[redis 。](http://redis.io)

确保您的 cookie 具有以下属性，以获取有关[cookie的更多信息](http://en.wikipedia.org/wiki/HTTP_cookie)

*   仅 HTTP cookie
*   安全 Cookie

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:10:30.230

Cookie 应该没问题（另一种方法是将其存储在 HTTP 标头中），但是我认为不需要将用户名/ID 存储在 cookie 中。令牌本身就足够了。您可以使用[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)作为令牌。将其与用户名和 last_access_timestamp 一起存储在数据库表中。并且只在每个请求上发送令牌（在 cookie 或 HTTP 请求标头中）。在我看来，这足以实现会话。

用户成功登录时会生成一个令牌，存储在数据库中并传递给用户。每当用户访问网页时，都会在请求中传递令牌并进行验证。如果有效，则刷新 last_acces_timestamp 并且用户可以继续。验证中的查找将通过令牌完成，您可以使用用户名进行身份验证和授权。如果令牌无效或过期，则将用户转发到登录页面。

可以使用 cron 作业或在创建新会话时定期从数据库中删除过期会话。

出于性能原因，您可能会考虑将会话存储在内存中的 hashmap 中。因为总是更新数据库可能会很昂贵。

还要考虑使用 HTTPS，以防止人们嗅探令牌。

几个月前，我通过以下方式解决了这个问题： [https ://stackoverflow.com/questions/12829994/java-custom-session-implementation-expired-sessions](https://stackoverflow.com/questions/12829994/java-custom-session-implementation-expired-sessions)

# excel - 如果达到阈值，则在 excel 中显示图片

> ID：13960142
> 
> 赞同：1
> 
> 时间：2012-12-19T19:54:55.163
> 
> 标签：excel, image

我正在创建一个 Excel 电子表格来跟踪销售配额。我希望电子表格在达到配额时显示烟花图片。我对宏了解不多，但对公式很好，但这似乎无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:13:53.500

我知道可以做到的一种方法：

1）将烟花的图片粘贴到一个单独的单元格（比如A1）中（最好是隐藏的表格）。确保调整单元格（或图片）的大小，使图片完全适合单元格 A1。

2）定义一个命名公式，可能命名为“烟花”，如下所示：

=IF([你的烟花表演条件],INDIRECT("[烟花图片所在的单元格]"),INDIRECT("[任何空白单元格"))

例如：

=IF(Sheet1!$C$6=TRUE,INDIRECT("Sheet2!$a$1"),INDIRECT("Sheet1!$M$8"))

3) 转到“插入”选项卡，单击对象，单击位图图像。如果绘画或任何图像编辑器打开，只需将其关闭，它就会在工作表中插入一个空白图像/对象。此图像将在编辑栏中具有“=EMBED("Paint.Picture","")"。将其替换为对我们命名公式的引用，例如 =fireworks

4) 调整和重新定位这个图像/对象。当条件满足时，图片应该会弹出。

# ravendb - 带有身份验证的 RavenDB 附件

> ID：13960145
> 
> 赞同：0
> 
> 时间：2012-12-19T19:55:11.423
> 
> 标签：ravendb

我正在运行 RavenDB server build 2174，并将以下行添加到 Raven.Server.exe.config 文件中：

```
<add key="Raven/Authorization/Windows/RequiredGroups" value="localhost\Administrators"/>
<add key="Raven/AnonymousAccess" value="None"/> 
```

我还设置了一个 ApiKey，我的应用程序使用它来与 RavenDB 服务器和数据库进行交互。ApiKey 已被授予我正在使用的数据库的管理员权限（选中管理员复选框）。

使用上面给出的配置，我正在尝试使用 DatabaseCommands.GetAttachment() 方法从 RavenDB 数据库加载附件。每当我这样做时，我都会收到 401（未经授权）响应。我已经能够通过使用 DatabaseCommands 对象上的 With() 方法使用管理员组中的登录名和密码组合传递身份验证来使其工作。这是执行此操作的代码行

```
SiteDocumentStore.DatabaseCommands
                 .With(new NetworkCredential("login", "password", "domain"))
                 .GetAttachment(attachment_key); 
```

所以我的问题是，如何使用 GetAttachment() 方法而不必使用 With() 并传入登录凭据？DocumentStore 已经拥有 ApiKey，它可以将它用于所有其他命令，而无需执行任何特殊操作。事实上，PutAttachment() 方法无需使用 With() 方法就可以工作，那么为什么 GetAttachment() 不能呢？这是疏忽还是错误？还是有什么我没有得到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:51:32.837

当您使用登录/密码时，您没有使用 Api Key，它应该自动为您使用正确的 Api Key 进行身份验证。我们刚刚发现了在某些情况下使用 Api Keys 的错误，请等待下一个版本 (2176)，它应该会解决它。

# java - 使用来自不同类的参数访问方法

> ID：13960146
> 
> 赞同：2
> 
> 时间：2012-12-19T19:55:20.513
> 
> 标签：java, class, netbeans, methods, parameters

如果这是一个简单的问题，我很抱歉，但我似乎无法使用另一个类的参数调用我的一个方法。

通常，如果我要调用我的方法，我会这样做。

第一类

```
public static void main(String [] args){
   Class2 class2Object = new Class2();
   class2Object.myMethod();
} 
```

2 类

```
public void myMethod(){
  System.out.print("Hello");
} 
```

上面只是一个例子，但是如果我必须将参数传递给 myMethod 方法（例如 arrayList），我将如何在我的其他类中调用它。

我需要调用的实际方法如下：

```
public void search(List<String> listOfWords) throws FileNotFoundException, IOException 
```

任何帮助将不胜感激，问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T19:57:02.050

在调用方法时，您只需在方法的参数中放置一个列表：

```
List<String> someList = new ArrayList<String>();
//populate list if you want
class2Object.search(someList); 
```

您可能会从阅读[有关方法参数的教程中](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:59:34.287

```
Class2 class2Object = new Class2();
List<String> myList = new List<String>();
class2Object.search(myList); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:00:27.187

您添加要在调用中传递的信息和数据类型以及要在定义中引用它的内容

```
public static void main(String [] args){
  Class2 class2Object = new Class2();
  class2Object.myMethod(5);
}

public void myMethod(int var){
  System.out.print(var);
} 
```

# maven - 在 Maven 中，如何在每个项目的基础上在本地和 Intranet 存储库之间切换？

> ID：13960150
> 
> 赞同：2
> 
> 时间：2012-12-19T19:55:25.400
> 
> 标签：maven

我一直在使用 Maven 进行项目，这些项目定期连接到基于内部网络的外部存储库。我有时想做一些一次性的，我不希望它们连接到我的 Intranet —— 只是严格地说是我的本地存储库。

在我的`settings.xml`文件中，我为这些项目添加了第二个配置文件，以便在构建期间指定该配置文件，但我不知道如何告诉它我只想在`/path/to/my/local/repo`.

辅助配置文件在这里是正确的方法，还是我应该在离线（`-o`）模式下运行 Maven 并添加新镜像？[我见过一些与此类似的方法](https://stackoverflow.com/questions/3164975/how-to-prevent-maven-from-accessing-remote-repositories)，但不确定如何在镜像声明中设置路径而不是 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:57:34.390

我保留了两份maven。其中之一是 conf/settings.xml 有 <mirrors/> 用于我们公司的 Nexus 服务器。另一方面，它没有。您可以根据需要扩展此技术，maven 安装树不是很大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T22:24:34.843

感谢@andrew_logvinov 指出只需`-o`在您的`mvn`请求中指定一个“”就可以相对容易地做到这一点。您的 settings.xml 文件中不需要任何本地镜像设置或配置文件。

如果您需要将文件安装到本地存储库中，您可以：

```
mvn install:install-file -DgroupId=com.something -DartifactId=theArtifact -Dversion=1.2.3 -Dfile=/local/path/to/the/file/some.pom -Dpackaging=pom 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T22:32:24.243

最好的区分方法是为 repo/no repo、公司 1 用户、公司 2 用户、github 上的私人黑客等不同用例分别设置一个单独的 settings.xml。

然后，您可以切换设置文件或使用命令行标志来指定设置文件 -s。

# php - 视图中的异常导致 ZF2 中出现白屏

> ID：13960152
> 
> 赞同：2
> 
> 时间：2012-12-19T19:55:33.470
> 
> 标签：php, zend-framework2

我已经开始在当前的 dev-develop 分支中使用 ZF2 的开发版本，从那时起，我在每个异常上都会出现白屏，并在视图的某个地方抛出。

我已经安装了 SkeletonApplication 来查看，如果它是我的应用程序中的某些东西，那是导致它的原因，但同样的问题也出现在那里。降级到 dev-master 解决了这个问题，我得到了标准的异常转储。

查看 zf2 代码，我想我已经找到了原因。在 Zend\Mvc\View\Http\DefaultRenderingStrategy::render() 现在我们有：

```
public function render(MvcEvent $e)
{
    ......
    try {
        $view->render($viewModel);
    } catch(\Exception $ex) {
        $application = $e->getApplication();
        $events      = $application->getEventManager();
        $e->setError(Application::ERROR_EXCEPTION)
          ->setParam('exception', $ex);
        $events->trigger(MvcEvent::EVENT_RENDER_ERROR, $e);
    }
    return $response;
} 
```

所以异常被捕获，但响应是空的，我不知道后者的原因。

但是出现了另一个问题：如果在布局中触发错误，错误处理程序将如何呈现异常页面？（就像在我的情况下 - 导航助手，它无法找到容器。）唯一可能的解决方案是有一个额外的错误布局，但这是没有意义的，因为不再存在良好的异常处理的原因。

于是产生了以下问题：

1.  ZF2 开发者打算如何解决这个问题？
2.  是否有当前的解决方法（实际上注释掉 try { } catch() { } 可以解决问题，但不是一个好的解决方案）
3.  由于带来上述代码的拉取请求已关闭，我是否在做任何完全错误的事情，我对它的工作方式是否完全错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T02:52:04.390

检查您的 zf2 配置文件以确保您已打开异常显示选项：

```
'view_manager' => array(
    'display_not_found_reason' => true,
    'display_exceptions'       => true,
), 
```

# android - putExtra treeMap 返回 HashMap 不能转换为 TreeMap android

> ID：13960153
> 
> 赞同：8
> 
> 时间：2012-12-19T19:55:35.777
> 
> 标签：android, android-intent, hashmap, treemap

我需要你的帮助，我不明白发生了什么？

我正在尝试在 2 个活动之间发送 TreeMap，代码如下所示：

```
class One extends Activity{
 public void send(){
   Intent intent = new Intent(One.this, Two.class);
   TreeMap<String, String> map = new TreeMap<String, String>();
   map.put("1","something");
   intent.putExtra("map", map);
   startActivity(intent);
   finish();
 }
}

class Two extends Activity{
  public void get(){
  (TreeMap<String, String>) getIntent().getExtras().get("map");//Here is the problem
  }
} 
```

这返回给我 HashMap 不能转换为 TreeMap。什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:30:10.267

作为@Jave 建议的替代方案，如果您确实需要将数据结构设为 a `TreeMap`，只需使用将另一个地图作为数据源的适当构造函数。因此，在接收端 ( `Two`) 执行以下操作：

```
public class Two extends Activity {
    @Override public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TreeMap<String, String> map = new TreeMap<String, String>((Map<String, String>) getIntent().getExtras().get("map"));
    }
} 
```

但是，根据您的项目，您可能不必担心确切的`Map`实现。因此，您可以改为转换到`Map`界面：

```
public class Two extends Activity {
    @Override public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Map<String, String> map = (Map<String, String>) getIntent().getExtras().get("map");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:05:41.173

听起来它序列化为 HashMap ，这就是你得到的。猜猜你将不得不满足于一个HashMap。或者，您可以创建自己的辅助类并实现 Parcelable，然后按顺序序列化键/字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:13:20.543

`TreeMap`您可以创建一个新的`TreeMap<String, String>`并使用- 方法，而不是将结果直接转换为 a [`putAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#putAll%28java.util.Map%29)：

```
TreeMap<String, String> myMap = new TreeMap<String, String>;
HashMap<String, String> receivedMap = getIntent().getExtras().get("map");
myMap.putAll(receivedMap); 
```

# .net - IBM MQ 创建对象失败的问题

> ID：13960154
> 
> 赞同：3
> 
> 时间：2012-12-19T19:55:40.563
> 
> 标签：.net, vb.net, activex, ibm-mq

Ibm mq 无法在 64 位 Windows 机器中加载它。

```
Dim objMQ As Object
objMQ=CreateObject("MQAX200.MQSession") 
```

我明白了

> “无法创建 ActiveX 组件。”

在 64 位机器中，它在 32 位机器操作系统中运行良好。

我的问题是如何更改上述代码以在 64 位操作系统中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:22:52.410

在 Windows 7 64 位上，那段代码对我来说很好用。我正在使用 MQ v7.1。

您想使用 MQAX200 是否有特定原因？这个界面很久没有更新了。您可以使用 MQ .NET 接口代替 MQAX200，该接口比 MQAX200 更新并具有更多功能。

MQ .NET 接口包含在“amqmdnet.dll”程序集中，可以在 MQ 安装的“bin”文件夹中找到。只有一个程序集适用于 32 位和 64 位架构。您只需要在项目中引用“amqmdnet”。“\tools\dotnet\samples\cs\base”文件夹下也有一些样本。

编辑：示例代码：

```
 properties = new Hashtable();
            properties.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_MANAGED);
            properties.Add(MQC.HOST_NAME_PROPERTY, hostName);
            properties.Add(MQC.PORT_PROPERTY, port);
            properties.Add(MQC.CHANNEL_PROPERTY, channelName);

            MQQueueManager queueManager = new MQQueueManager (queueManagerName,
                                                              properties);
            queue = queueManager.AccessQueue(queueName, 
                                       MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING); 
```

# bash - 无法使用双引号找出 sed 的正确语法

> ID：13960159
> 
> 赞同：0
> 
> 时间：2012-12-19T19:56:07.587
> 
> 标签：bash, sed

我有一个变量

`qsubFile="submitJob.sh"`

`echo $qsubFile`返回`submitJob.sh`不带双引号。

现在，我想找到包含字符串的行`qsubFile="someOtherFile.sh"`并将其替换为`qsubFile="submitJob.sh"`文件中的`"write.sh"`.

我尝试使用

`sed -i '/qsubFile=/c\qsubFile="'"$qsubFile"'"' write.sh`

`qsubFile=""`

我似乎无法为此获得正确的语法。

但它取代了它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:00:39.270

你只需要单引号就`sed`可以做到这一点，单引号内的双引号没有问题：

```
sed -i 's/qsubFile="someOtherFile.sh"/qsubFile="submitJob.sh"/g' write.sh 
```

如果`"someOtherFile.sh"`不是固定字符串，`write.sh`则使用以下内容将它们全部替换：

```
$ sed  -i 's/qsubFile="[^"]*"/qsubFile="submitJob.sh"/g' write.sh 
```

正则表达式`"[^"]*"`：

```
"      # double quote
[^"]*  # Anything not a double quote
"      # double quote 
```

似乎我第一次正确引用使用变量时误读了这个问题`$qsubFile`，你错过了最后一个`/`：

```
sed -i 's/qsubFile="[^"]*"/qsubFile="'"$qsubFile"'"/g' write.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:48:57.697

不过，如果您需要使用 shell 变量，那么您在某种程度上是正确的。

```
sed -i 's/qsubFile="someOtherFile.sh"/qsubFile="'"$qsubfile"'"/g' write.sh 
```

或者如果你想确保你得到整条线

```
sed -i 's/^\(qsubFile=\).*$/\1"'"$qsubfile"'"/g' write.sh 
```

# visual-studio-2010 - 防止 Visual Studio 在不使用“解决方案管理器”加载项的情况下加载解决方案项目

> ID：13960164
> 
> 赞同：0
> 
> 时间：2012-12-19T19:56:25.353
> 
> 标签：visual-studio-2010

我们的 Visual Studio 2010 解决方案包含一个安装程序项目，除非安装了安装工具，否则无法加载该安装程序项目。由于我们对此工具只有一个许可证，因此大多数开发人员每次加载解决方案时都会收到一条错误消息。我知道您可以将项目标记为已卸载，并且在调用 VS 之间保留此状态，但是，此选项仅在加载项目时可用。

当项目无法加载时，有没有办法防止VS加载项目？我已经尝试过“解决方案管理器”加载项，但在我们复杂的解决方案的上下文中启动时会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:07:42.150

为什么不直接从解决方案中删除项目，并创建一个新的等效解决方案，其中包含有问题的项目？

或者也许反过来更容易；创建一个新的解决方案，其中包含除引起问题的项目之外的所有项目。

# asp.net - 如何注入/处理 HttpContex.Cache 的使用

> ID：13960166
> 
> 赞同：2
> 
> 时间：2012-12-19T19:56:28.053
> 
> 标签：asp.net, caching, azure, autofac, azure-caching

我有一个广泛使用的遗留应用程序`HttpContext.Cache`......
这个应用程序现在应该迁移到**Windows Azure (multi-role)**。
它当然会导致缓存在不同角色上不同步的问题。
我正在考虑将我的“AzureCacheWrapper”（wrapper on ）*注入*（我正在使用 Autofac）中，以便旧应用程序继续工作但使用 Azure 缓存来代替？ 通常我们应该实现类似的东西，但不幸的是，有一些第 3 方 DLL 正在使用我们无权访问的缓存（并且不知道第 3 方库何时使用 Http 缓存）`Microsoft.ApplicationServer.Caching.DataCache``HttpContext.Cache`

`ICacheProvider`

我认为缓存提供程序不能通过 web.config（如 OutputCaching）进行配置，所以在我看来，唯一的解决方案是以某种方式将我的实现注入到运行时缓存上的 Add/Insert/Get 方法中。不幸的是，由于 System.Web.Caching.Cache （密封类）的 .NET 实现，我认为我不能重写`HttpContextBase`以返回不同的缓存或注入`System.Web.Caching.Cache`自身......

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:20:22.357

我认为您的应用程序需要代码/架构更改...

如果您有自己的类来处理获取和设置缓存，那么现在可能更容易在一个地方更改您的代码/架构。

如果您要使用单一角色，那么您的 scinario 中不存在任何问题。如果可能的话，您可以在 ExtraLarge 插槽中运行您的 webrole。

# php - 在无限滚动上使用 AJAX 和 PHP 从表中获取结果？

> ID：13960171
> 
> 赞同：6
> 
> 时间：2012-12-19T19:56:37.913
> 
> 标签：php, jquery, mysql, ajax, pdo

我正在尝试使用 AJAX 和 PHP 即时从我的表中获取 20 个结果（当用户滚动到底部时）。

到目前为止，我一直在关注...

**AJAX**

```
// Infinite Scroll
loadData( 0 );
//Hide Loader for Infinite Scroll
$('div.ajaxloader').hide();

});

function loadData ( last_id ) {
    var $entries = $('.directory'),
        $loader = $('.ajaxloader', $entries).show();
    $.get( '/getentries.php', { last_id : last_id }, function( data ) {
        $entries.append( data ).append( $loader.hide() );
        filterEntries();
    });
};

//Isotope filter - no changes to this code so I didn't include it

$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        $('div.ajaxloader').show('slow');
        loadData( $( '.directory item:last' ).data('id') )
    } 
```

**PHP**

```
try {
  // Connect and create the PDO object
  $conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
  $conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8

  // Define and perform the SQL SELECT query
  $sql = "SELECT * FROM `directory` WHERE user_active != ``";
  $result = $conn->query($sql);

  $sth = $conn->prepare("SELECT * FROM directory WHERE user_active != ''");
        $sth->execute(array(':county' => $county));

        $c = 1;
        while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
            echo '<div class="entry';
                 if (($c % 4) == 1) echo ' alpha ';
           // ECHO RESULT STYLES ETC HERE
        $c++;
        }

  $conn = null;        // Disconnect
}
catch(PDOException $e) {
  echo $e->getMessage();
} 
```

现在我的 AJAX 和查询似乎工作正常，但我遇到的问题是它只是再次提取所有记录，而不是接下来的 20 条记录？

我以前从未这样做过，如果我听起来很天真，我很抱歉，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:57:25.217

您需要在 mysql 查询中添加限制。请看下面的代码

```
// Infinite Scroll
loadData( 0 );
//Hide Loader for Infinite Scroll
$('div.ajaxloader').hide();

});

function loadData ( last_id ) {
    var $entries = $('.directory'),
        $loader = $('.ajaxloader', $entries).show();
    $.get( '/getentries.php?startp=0&endp=20', { last_id : last_id }, function( data ) {
        $entries.append( data ).append( $loader.hide() );
        filterEntries();
    });
};

//Isotope filter - no changes to this code so I didn't include it

$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        $('div.ajaxloader').show('slow');
        loadData( $( '.directory item:last' ).data('id') )
    }

PHP

try {
  // Connect and create the PDO object
  $conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
  $conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8

  // Define and perform the SQL SELECT query
  $sql = "SELECT * FROM `directory` WHERE user_active != ``";
  $result = $conn->query($sql);

  $sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' limit $_REQUEST['startp'],$_REQUEST['endp']");
        $sth->execute(array(':county' => $county));

        $c = 1;
        while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
            echo '<div class="entry';
                 if (($c % 4) == 1) echo ' alpha ';
           // ECHO RESULT STYLES ETC HERE
        $c++;
        }

  $conn = null;        // Disconnect
}
catch(PDOException $e) {
  echo $e->getMessage();
} 
```

谢谢里帕萨哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:13:34.020

`SELECT * FROM foo WHERE id > $lastIndex ORDER BY id LIMIT 20;`

编辑：哎呀。那是针对常规 mysql，而不是使用准备好的语句。基于[php docs](http://php.net/manual/en/pdo.prepare.php#example-993)，您的答案应该如下所示：

```
$sql = "SELECT * FROM directory WHERE id > :lastIndex AND user_active != '' LIMIT 20";
$sth = $conn->prepare($sql);
$sth->execute(array(':lastIndex' => $lastIndex)); 
```

它的作用是在`$lastIndex`. 您需要做的就是将 lastIndex 的值（*应该与页面上的结果数一致*）与您的请求一起发送并相应地使用它。

或者，您可以执行相反的操作并将`$lastIndex`结果发送到客户端，以便在用户发出新请求时存储和使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:31:29.040

好吧，简短的回答是为您的查询添加偏移量。就像分页一样。您只需跟踪您所在的页面并将查询偏移某个值。在这种情况下，您无需更改页面，而是在最后加载它。[这是一个例子](http://www.petefreitag.com/item/451.cfm)你可以谷歌它并阅读更多

# javascript - 删除可观察数组中的属性

> ID：13960173
> 
> 赞同：1
> 
> 时间：2012-12-19T19:56:40.800
> 
> 标签：javascript, knockout.js

如果我定义对象

```
var Person = function(id, name, country) {
    var self = this;
    self.id = ko.observable(id);
    self.name = ko.observable(name);
    self.country = ko.observable(country); 

    return self;
}; 
```

如何在按钮的单击事件中从此对象中删除属性“国家”。事情是，当我将数据发送到 web 服务时，我不想将此属性发送给它。

请在此处查看小提琴，我试图在保存按钮的单击事件上删除属性“国家”。 [http://jsfiddle.net/kirannandedkar/nZDrk/7/](http://jsfiddle.net/kirannandedkar/nZDrk/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:00:25.593

您可以使用`delete`关键字从对象中完全删除属性：

```
var somePerson = new Person(1, 'blah', 'blah');
delete somePerson.country;
// send somePerson to the webservice 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:05:38.767

您必须从所有对象中删除此属性：

```
this.SaveDetail = function() {
    ko.utils.arrayForEach(people(), function(item){
        delete item["country"];                 
    });
}; 
```

这是工作小提琴：http: [//jsfiddle.net/nZDrk/8/](http://jsfiddle.net/nZDrk/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:28:27.807

Since you're sending the data to this webservice, what you should be doing is implementing the `toJSON()` function on your object and remove the property there. Then send the result of calling `ko.toJSON()` on the model. That way, your model still contains the property but what you send has the properties removed.

```
var Person = function(id, name, country) {
    var self = this;
    self.id = ko.observable(id);
    self.name = ko.observable(name);
    self.country = ko.observable(country); 

    self.toJSON = function () {
        var data = ko.toJS(self); // get the values of this model
        // delete the property from the data
        delete data.country;
        return data;
    };
};

var person = new Person(1, 'foo', 'bar');
var data = ko.toJSON(person); // {"id":1,"name":"foo"} 
```

# sharepoint - 运行时基于 Active Directory 帐户的动态数据源

> ID：13960176
> 
> 赞同：1
> 
> 时间：2012-12-19T19:56:59.770
> 
> 标签：sharepoint, reporting-services

我有一组 SSRS 报告，我想向多个客户提供访问权限。每个客户都有自己的数据库。有一个所有报告都可以访问的共享数据源。每个客户的数据库都有相同的模式/对象，只是数据不同。每个客户都有一个 Active Directory 登录名。

共享数据源有没有办法根据访问报表的用户动态更改它连接到的数据库？有没有办法使用与 Sharepoint 集成的 SSRS？

我见过的唯一其他解决方案是将服务器/数据库作为参数传递，这需要应用程序和使用 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:18:48.767

Sharepoint Mode 可能会提供一些我不知道的（AD）身份验证和数据源的东西，但是您可以将您提到的参数解决方案与`[%UserId]` [global](http://msdn.microsoft.com/en-us/library/dd255216.aspx)结合起来，并基于它动态地建立一个连接。

这是一个带有单一源报告的替代解决方案，每个客户端部署一次：

*   每个数据库创建一个报告文件夹
*   使用共享数据源，每个数据库一个（位于该文件夹中）
*   首次部署时，为每个数据库配置数据源连接
*   设置[`OverwriteDatasources`](http://msdn.microsoft.com/en-us/library/ms155802.aspx)为假
*   设置将源报表部署到所有客户文件夹的部署过程（使用多个配置，或者可能是脚本）
*   更新您的网站，以便每个用户都能看到相应客户文件夹中的报告

# c# - 实体框架返回不完整的 xml 数据

> ID：13960179
> 
> 赞同：1
> 
> 时间：2012-12-19T19:57:03.763
> 
> 标签：c#, sql-server, xml, entity-framework, serialization

EntityFramework 为 xml 字段返回不完整的数据。我序列化数据并将其保存在数据库中的 xml 字段中。缺少的数据在 xml 中的 Images 节点值也被序列化了一个序列化的对象。当我序列化字段对象时，会发生值的编码。

**图片 -> 值字段中的缺失数据在哪里？为什么它消失了？**

这就是我在我的 ms sql xml 字段中的内容：

```
<ArrayOfField xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Field>
    <Key>Images</Key>
    <Value>&lt;ArrayOfImage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;Image&gt;
    &lt;Name&gt;Penguins.jpg&lt;/Name&gt;
    &lt;Path&gt;~/Fileshare/Pages/6/Penguins.jpg&lt;/Path&gt;
    &lt;AltText&gt;Test&lt;/AltText&gt;
  &lt;/Image&gt;
  &lt;Image&gt;
    &lt;Name&gt;Tulips.jpg&lt;/Name&gt;
    &lt;Path&gt;~/Fileshare/Pages/6/Tulips.jpg&lt;/Path&gt;
    &lt;AltText&gt;Test&lt;/AltText&gt;
  &lt;/Image&gt;
&lt;/ArrayOfImage&gt;</Value>
  </Field>
  <Field>
    <Key>Test</Key>
    <Value>Test</Value>
  </Field>
  <Field>
    <Key>MyEditor</Key>
    <Value />
  </Field>
</ArrayOfField> 
```

这是 EF 返回的内容：

```
<ArrayOfField xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><Field><Key>Images</Key><Value>&lt;ArrayOfImage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" /&gt;</Value></Field><Field><Key>Test</Key><Value>Test</Value></Field><Field><Key>MyEditor</Key><Value /></Field></ArrayOfField> 
```

我像这样从 EntityFramework 获取数据：

```
 public Item Get(int id)
        {
            using (var context = new Entities())
            {
                var item = context.Items.SingleOrDefault(x => x.ID == id);
                return item;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:28:23.197

我认为您需要编写一个存储过程来返回 xml 字段数据。对于实体框架，您需要编写如下内容来获取 xml 数据的完整列表

```
EntityCommand command = connection.CreateCommand();
command.CommandText = "XXXX";
command.CommandType = CommandType.StoredProcedure;

using (EntityDataReader reader = command.ExecuteReader(CommandBehavior.SequentialAccess))
{
    while (reader.Read())
    {
          str = str + reader.GetString(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:25:38.217

我认为要么数据在反序列化过程中丢失，要么是由于您的疲劳而导致的错误（我的意思是，您在比较时可能正在查看不同的实体并且您认为有问题）。

无论哪种方式，排除序列化问题的另一种方法是将其序列化为其他内容，或者通过将 ArrayOfImages 添加为类成员而避免在 xml 中包含 xml（即使不应该有任何问题），而不仅仅是数组中的另一个键/值对。

# ruby-on-rails - 一旦部署到 VPS，将记录添加到生产数据库的最佳实践是什么？

> ID：13960180
> 
> 赞同：0
> 
> 时间：2012-12-19T19:57:06.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚将我的 rails 应用程序部署到 Linode VPS，并且想知道将记录添加到数据库的最佳方式是什么。

我有诸如类别之类的表，我想填充这些表。

我想到了使用 csv 或 sql 转储文件的 Taps gem。

我想知道是否有任何工具可以解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:01:26.080

为此，有所谓的种子文件，默认为：

```
db/seeds.rb 
```

您可以在此处添加条目（种子文件中有一个示例），您可以在部署后使用 rake 任务生成这些条目：

```
rake db:seed 
```

您可能也在使用捆绑器，因此请使用：

```
bundle exec rake db:seed 
```

**如果有大量种子**，您始终可以创建多个文件，请参阅[这篇关于处理大型种子文件](http://dev.mensfeld.pl/2011/10/handling-large-seed-files-in-ruby-on-rails/)的博文。

但是，**如果**您处于**应用程序中已经存在的数据至关重要**的状态，并且您正在更改服务器或数据库驱动程序，您想看看[yaml_db gem](https://github.com/ludicast/yaml_db)，它提供了一个很好的方法来将现有数据从您的实际数据库中抽象出来驱动程序并将其导出到 .yaml 文件中，您可以稍后将其导入，例如：在新服务器上部署后。

请参阅[Railscast - #179](http://railscasts.com/episodes/179-seed-data)关于播种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:02:22.403

rails 方法是使用 db/seeds.rb 中的种子数据，然后使用`rake db:seed`.

您还可以使用 sql 转储文件并通过发出恢复`mysql -u <user> -p <database_name> < <mysql_dump_file>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:23:26.393

[Easy Reference Data](https://github.com/AbleTech/easy_reference_data) gem 类似于 db:seed，但如果条目已经存在，它将更新记录。它还可以与 Capistrano 轻松集成。

完全披露：我工作的公司开发了宝石。

# html - URL 不适用于 SVG 图形

> ID：13960182
> 
> 赞同：1
> 
> 时间：2012-12-19T19:57:17.263
> 
> 标签：html, css, svg

我以 SVG 格式给出了我的徽标，并在元素`<a>`周围放置了标签`object`。但是我的锚标签不起作用，它只是在 svg 图形下显示了 10px 的高度。看看我的代码，这将清楚地说明我在说什么..

```
<a href="#" class="logo">
<object data="images/tc_logo.svg" type="image/svg+xml" style="width:100%;">
<!--[if (gte IE 6)&(lte IE 8)]>
  <img src="images/tc_logo.png">
<![endif]-->
</object>
  </a> 
```

我给了徽标类，`display:block`但它不起作用..

CSS

```
.logo{
width: 100%;
height: 210px;
display: block;
cursor:pointer;
} 
```

**进行的编辑**

最后我找到了一个解决方案，我知道它不是正确的方法，但如果你还没有准备好退一步使用 SVG.. 试试这个..

像这样使用html..

```
<span style="display:block; position:relative;">
<a href="#" class="logo"></a>
    <object data="images/tc_logo.svg" type="image/svg+xml" style="width:100%;">
    <!--[if (gte IE 6)&(lte IE 8)]>
      <img src="images/tc_logo.png">
    <![endif]-->
    </object>
</span> 
```

和 css 将是..

```
.logo {
    display: block;
    height: 210px;
    position: absolute;
    width: 100%;
    z-index:9
} 
```

希望你有诀窍..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:01:16.150

您可以通过使您的 SVG 成为图像标签而不是对象标签来做到这一点，或者您可以摆脱这个小技巧！

```
<a href="#" class="logo">
    <span style="display: block;">
        <object data="images/tc_logo.svg" type="image/svg+xml" style="width:100%;">
        <!--[if (gte IE 6)&(lte IE 8)]>
          <img src="images/tc_logo.png">
        <![endif]-->
        </object>
    </span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:58:28.580

这是一种丑陋的方式：

```
<a href="#" class="logo">
    <![if gte IE 9]>
       <img src="images/tc_logo.svg">
    <![endif]>
    <!--[if lt IE 9]>
       <img src="images/tc_logo.png">
    <![endif]-->
</a> 
```

现场[示例在这里](http://jsfiddle.net/rnYQZ/)。

不过，这不适用于旧的 android 浏览器，因此最好研究其他选项，例如一旦检测到缺少 svg 支持（需要 javascript），就将所有 svg 替换为 png 后备。参见例如[http://css-tricks.com/forums/discussion/19965/svg-with-png-fallback/p1](http://css-tricks.com/forums/discussion/19965/svg-with-png-fallback/p1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T23:39:11.693

或者，您可以使用 CSS 删除指针事件。似乎取代了锚标记事件，因此`object`删除它似乎重新激活了锚标记：

```
.logo object {pointer-events:none;} 
```

请注意，我现在只使用 Chrome 来执行此操作，并没有在任何地方进行测试。

# ruby-on-rails - 语法错误，意外的 tIDENTIFIER，需要关键字_end

> ID：13960183
> 
> 赞同：-1
> 
> 时间：2012-12-19T19:57:16.930
> 
> 标签：ruby-on-rails

我收到语法错误我的测试代码是

```
require 'spec_helper'
describe "User pages" do
subject { page }
describe "signup page" do
before { visit signup_path }

it { should have_selector('h1',  text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }

before { visit user_path(user) }
it { should have_selector('h1',  text: user.name) }
it { should have_selector('title',  text: user.name) }
end

describe "signup" do
before { visit signup_path }
let(:submit) { "Create my account" }
describe "with invalid information" do
it "should not create a user" do
expect { click_button submit }.not_to change(User, :count)
end
end
describe "with valid information"  do
before do
fill_in "Name",  with: "Example User"
fill_in "Email"  with: "user@example.com"
fill_in "password" with: "foobar"
fill_in "confirmation" with: "foobar"
end

it "should create a user" do
expect { click_button submit }.to change(User, :count).by(1)
end
end
end

end 
```

和错误日志是

```
/home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load': /home/ritesh/projects/sample_app/spec/requests/user_pages_spec.rb:30: syntax error, unexpected tIDENTIFIER, expecting keyword_end (SyntaxError)
fill_in "Email"  with: "user@example.com"
                     ^
/home/ritesh/projects/sample_app/spec/requests/user_pages_spec.rb:31: syntax error, unexpected tIDENTIFIER, expecting keyword_end
fill_in "password" with: "foobar"
                       ^
/home/ritesh/projects/sample_app/spec/requests/user_pages_spec.rb:32: syntax error, unexpected tIDENTIFIER, expecting keyword_end
fill_in "confirmation" with: "foobar"
                           ^
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

请帮助我如何纠正它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:59:22.623

似乎你忘记了第 30 行附近的一两个昏迷......（在“with:”之前）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:04:30.373

**以你的代码外观为荣将帮助你发现语法问题**；`fill_in`在这种情况下，第一个参数后面的行中的逗号。

```
require 'spec_helper'

describe "User pages" do
  subject { page }

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',  text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',  text: user.name) }
    it { should have_selector('title',  text: user.name) }
  end

  describe "signup" do
    before { visit signup_path }
    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information"  do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "password",     with: "foobar"
        fill_in "confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
    end
  end
end 
```

# facebook - 使用 RestFB 获取用户到页面的连接不返回值

> ID：13960190
> 
> 赞同：0
> 
> 时间：2012-12-19T19:57:43.687
> 
> 标签：facebook, grails, restfb

我正在使用带有 RestFB 的 grails 来编写一个 facebook 画布/页面应用程序。在使用 oauth 登录过程获得有效的访问令牌后，我尝试获取与页面的用户连接，以便向用户提供选项。我使用以下代码：

```
List getPages() {
   FacebookClient client = new DefaultFacebookClient(this.accessToken)
   List pages = []
   Connection<Page> connection = client.fetchConnection("/me/accounts", Page.class)

   pages.addAll(connection.data)

   while(connection.hasNext()) {
       connection = client.fetchConnectionPage(connection.nextPageUrl, Page.class)
       pages.addAll(connection.data)
   }

   return pages
} 
```

此调用有时会起作用并返回用户页面。但是，有时连接对象会返回一个空数据列表。如果我使用 Graph API Explorer 尝试相同的访问令牌，页面列表总是会返回。

如果我使用restfb，有人可以帮我弄清楚为什么列表有时是空的，但如果我使用Graph API explorer，它永远不会是空的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-30T07:01:24.250

```
List <Page> getPages() {
   FacebookClient client = new DefaultFacebookClient(acces_token);

   Connection<Page> connection = client.fetchConnection("/me/accounts", Page.class);

   return connection.getData();
}

//call getPage()

List <Page> pages = getPages();
for(Page p:pages){
    System.out.println(p.getname());
} 
```

试试这个代码。

# git - 使用 git diff-tree / log 输出格式

> ID：13960192
> 
> 赞同：1
> 
> 时间：2012-12-19T19:58:07.233
> 
> 标签：git

我是 git 的新手。我正在尝试在 2 个分支或标签之间生成差异，以获取在 2 个分支或标签之间发生更改的文件列表，并将此文件列表 [每行 1 个]（以及其他一些详细信息）存储在一个文件中，例如“changelist.文本”

基本上这是我希望我的输出文件具有的格式：

[AbbrvHash1] [AbbrvHash2] [FullHash1] [FullHash2] [TypeOfChange] [FileName] [CommitComment(仅 AbbrvHash1 评论的前 14 个字符)] [Hash1 提交的日期/时间] [提交者 ID]

每行 9 条信息，按 AbbrvHash1 排序

我试过使用 git“diff-tree”和“log”。他们单独提供部分信息。我正在尝试查看如何合并 diff-tree 的 2 个输出并登录到 1 个苍蝇，以提供上述输出。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:52:31.187

可以使用`git show`和`--pretty=format:<string>`选项提取您需要的所有信息。

例如，仅显示任何给定 treeish 的哈希值，在这种情况下`HEAD`：

```
git show -s HEAD --pretty="%H" 
```

请注意，它会抑制通常打印`-s`的 diff 输出，这是该选项的简写。`show``--pretty="<string>"``--pretty=format:<string>`

对于您需要的数据，您可以将脚本基于以下命令：

```
git show --name-status <treeish> --pretty="%H %h %P %p %ce %at" 
```

以上将打印：

*   全散列
*   短哈希
*   完整的父哈希
*   短父哈希
*   用户电子邮件
*   提交的unix时间戳
*   两个换行符
*   本次提交中修改的文件列表，格式类似于`git status --short`

唯一缺少的部分是提交消息，可以单独打印：

```
git show -s <treeish> --pretty="%B" 
```

还有一种替代形式可以清理主题行，以便可以将其用作文件名：

```
git show -s <treeish> --pretty="%f" 
```

所有不同的选项都可以[在`git show`文档](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)中找到，查找“漂亮格式”部分。

# codemirror - Codemirror 3 使用 simpleHint 的多路复用模式

> ID：13960194
> 
> 赞同：2
> 
> 时间：2012-12-19T19:58:12.927
> 
> 标签：codemirror

所以我正在尝试制作一个 SCXML 编辑器，它基本上是 XML（状态机），其中包含 JavaScript 块。我很接近，但我无法添加提示。似乎归结为我不知道我在提示时所处的编辑模式。我在 CodeMirror 对象中查看了线索，但没有看到。我正在像这样进行多路复用：

```
CodeMirror.defineMode("scxml", function (config) {
    return CodeMirror.multiplexingMode(
      CodeMirror.getMode(config, "text/xml"),
      {
          open: "<script>", close: "</script>",
          mode: CodeMirror.getMode(config, "text/javascript"),
          delimStyle: "delimit"
      }
    );
});

editorXml = CodeMirror.fromTextArea(document.getElementById("editXmlFile"), {
    lineNumbers: true,
    mode: 'scxml',
    indentUnit: 4,
    autoCloseTags: true,
    matchBrackets: true,
    extraKeys: {
        "'>'": function (cm) { cm.closeTag(cm, '>'); },
        "'/'": function (cm) { cm.closeTag(cm, '/'); },
        "' '": function (cm) { CodeMirror.xmlHint(cm, ' '); },
        "'<'": function (cm) { CodeMirror.xmlHint(cm, '<'); },
        "Ctrl-Space": function (cm) { CodeMirror.xmlHint(cm, ''); }
    }
}); 
```

请注意`extraKeys`XML 提示的工作位置，如何在其中获取 JavaScript 提示？从 JavaScript 提示帮助看来，我会按照以下方式做一些事情：

```
 CodeMirror.commands.autocomplete = function(cm) {
    CodeMirror.simpleHint(cm, CodeMirror.javascriptHint);
  }

  ... extraKeys: {"Ctrl-Space": "autocomplete"} ... 
```

但无论哪种方式，我都需要知道我所处的模式（XML 或 JavaScript）才能知道使用`simpleHint`vs `xmlHint`. 任何人都知道如何做到这一点？

编辑：当我在任何一个部分时才`cm.getMode().name`回来`cm.getOption('mode')``scxml`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:45:13.587

我认为您应该可以发送 on ，您感兴趣的位置在`CodeMirror.innerMode(cm.getMode(), cm.getTokenAt(POS).state).mode.name`哪里。它将返回一个类似or的名称，描述该位置的内部模式。`POS``{line, ch}``"xml"``"javascript"`

# google-ads-api - 在 Google AdWords 效果报告中排除“总计”行

> ID：13960197
> 
> 赞同：6
> 
> 时间：2012-12-19T19:58:22.597
> 
> 标签：google-ads-api

我正在使用适用于 Google AdWords API v201209 的 .NET 客户端库下载广告效果报告（CSV 格式）。

我下载的每份报告中的最后一行数据是一个汇总行。一个示例如下所示：

```
Total, --, --, --, --, --, --, --, --, --,2.6, --, --, --,516,13,16 
```

我不需要汇总数据。目前我不得不编写代码来手动删除它或处理在解析过程中跳过这一行。

有没有办法将此行排除在下载的报告中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-30T15:25:57.163

对于使用 googleads-php-lib 的 php 用户：

```
$reportUtils = new ReportUtils();
$report = $reportUtils->DownloadReport($reportDefinition, null, $user, array('skipReportSummary'=>true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:03:54.847

恐怕目前不可能。我通常在每行的开头请求一个数字字段，这样我就可以过滤掉我不想要的行；这也适用于无法删除的标题行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-13T07:30:55.223

我使用版本 201509。您可以在 report_downloader 参数中抑制总计以及报表标题和列标题

```
report_downloader.DownloadReport(
report, outputfile, 
skip_report_header=True,
skip_column_header=False,
skip_report_summary=True, 
include_zero_impressions=False) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T22:15:00.027

到目前为止，您可以设置[HTTP 标头](https://developers.google.com/adwords/api/docs/guides/reporting#request_headers)：

```
skipReportSummary: true|false | If true, report output 
                                will not include a summary 
                                row containing the report 
                                totals. If false or not  
                                specified, report output
                                will include the summary row. 
```

# curl - CURL 的 PHP 内存不足错误

> ID：13960203
> 
> 赞同：1
> 
> 时间：2012-12-19T19:58:43.440
> 
> 标签：curl, imagick, php

我在使用 CURL 检索远程图像时遇到了一些致命错误。

错误消息：PHP 致命错误：内存不足（已分配 786432）（试图分配 266241 字节）

我有一个旨在检索远程图像并将其返回给变量的函数：

```
function download_file($file, $ref)
{   

    $curl_obj = curl_init();    
    curl_setopt($curl_obj, CURLOPT_URL, $file);
    curl_setopt($curl_obj, CURLOPT_HEADER, 0);
    curl_setopt($curl_obj, CURLOPT_REFERER, $ref);
    curl_setopt($curl_obj, CURLOPT_BINARYTRANSFER, 1);
    curl_setopt($curl_obj, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($curl_obj, CURLOPT_MAXREDIRS, 3);                           
    curl_setopt($curl_obj, CURLOPT_FOLLOWLOCATION, TRUE); //followlocation cannot be used when safe_mode/open_basedir are on
    curl_setopt($curl_obj, CURLOPT_SSL_VERIFYPEER, FALSE);               
    if(!$downloaded_binary = curl_exec($curl_obj)){
            $downloaded_binary = false; // downloading failed, return false
    }    

    curl_close($curl_obj);
    unset($curl_obj);
    return $downloaded_binary;
} 
```

调用 curl_exec 时发生故障。

**背景**

*   特定请求未发生故障
*   内存限制已增加到 3GB
*   imagick 用于执行图像转换任务
*   每张图片小于100kb
*   一些文档包含 500-600 页
*   运行 PHP 5.4.9（Windows 64 位）
*   这是通过命令行运行的，不附加到 Web 服务器
*   每条记录的平均处理时间（包括记录中的所有图像）为 3.5 秒。

应用程序本身从专有文档管理系统导出图像 (TIFF) 数据，将相关图像转换为单个 PDF 文档，并将文件写入逻辑结构。

失败对我来说没有意义，因为每个 curl 实例都应该是一个新句柄。

对此的任何帮助或指导将不胜感激！

**编辑**

我相信我通过添加以下几行找到了问题的解决方案：IMagick::setResourceLimit(imagick::RESOURCETYPE_MEMORY, 3072); IMagick::setResourceLimit(imagick::RESOURCETYPE_MAP, 3072);

在这篇文章中发现：[PHP Imagick 内存泄漏](https://stackoverflow.com/questions/9993085/php-imagick-memory-leak)

# wpf - WPF限制鼠标移动消息频率

> ID：13960205
> 
> 赞同：2
> 
> 时间：2012-12-19T19:58:48.417
> 
> 标签：wpf, frequency, mousemove

除了使用某种计时器滚动我自己的方法之外，还有更好更通用的方法来限制您收到鼠标移动消息的频率吗？

我正在对鼠标移动消息进行一些非常密集的处理，并希望将频率限制为每秒 30 次更新。目前看来，我每秒可以接收数百个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T23:49:36.480

好吧，这来晚了，但我通过检查秒表的经过时间解决了类似的问题，并且只在每个特定数量的滴答声中调用我的内部函数。间隔或多或少是凭经验定义的，但也许可以改进这种方法以获得更精确的毫秒结果。在我的情况下，解决方案就像一个魅力。

```
 public static Stopwatch stopwatch = new Stopwatch();

    public static void OnMouseMove(object sender, RoutedEventArgs e)
    {
            if (stopwatch.ElapsedTicks % 10L == 0L)
            {
                // do the heavy work here....
            }
        }
    } 
```

当然，您必须在某个地方启动秒表...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:08:54.207

据我了解，每次鼠标移动时都会触发 MouseMove 事件；即每次更改指针的 x,y 坐标时。因此，我不相信有办法限制事件触发的消息/秒，因为这只是由您移动鼠标的频率决定的。我的建议是，如果您只希望在某些时候触发 move 事件，您可以在这些时候添加和删除您的事件处理程序。非常欢迎您继续寻找实现所需功能的方法，如果您这样做，我会非常有兴趣看到它。 [这](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.mousemove%28v=vs.100%29.aspx)是有关 MouseMove 事件的 MSDN 文章，这可能是开始查找的好地方。祝你好运！

# iphone - 检查 NSDictionary 是否为空？

> ID：13960209
> 
> 赞同：16
> 
> 时间：2012-12-19T19:59:13.503
> 
> 标签：iphone, objective-c

我尝试了多种方法。我知道字典是 NULL，因为当我在那里休息时控制台也会打印出来。然而，当我把它放在 if( ) 中时，它不会触发。

```
([myDict count] == 0) //results in crash
(myDict == NULL)
[myDict isEqual:[NSNull null]] 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-19T20:28:54.640

It looks like you have a dangling or wild pointer.

You can consider Objective-C objects as pointers to structs.

You can then of course compare them with `NULL`, or with other pointers.

So:

```
( myDict == NULL ) 
```

and

```
( myDict == [ NSNull null ] ) 
```

are both valid.

The first one will check if the pointer is `NULL`. `NULL` is usually defined as a `void *` with a value of 0.
Note that, for Objective-C objects, we usually use `nil`. `nil` is also defined as a `void *` with a value of 0, so it equals `NULL`. It's just here to denote a `NULL` pointer to an object, rather than a standard pointer.

The second one compares the address of `myDict` with the singleton instance of the `NSNull` class. So you are here comparing two pointers values.

So to quickly resume:

```
NULL == nil == Nil == 0 
```

And as `[ NSNull null ]` is a valid instance:

```
NULL != [ NSNull null ] 
```

Now about this:

```
( [ myDict count ] == 0 ) 
```

It may crash if you have a wild pointer:

```
NSDictionary * myDict;

[ myDict count ]; 
```

Unless using ARC, it will surely crash, because the `myDict` variable has not been initialised, and may actually point to anything.

It may also crash if you have a dangling pointer:

```
NSDictionary * myDict;

myDict = [ [ NSDictionary alloc ] init ];

[ myDict release ];
[ myDict count ]; 
```

Then you'll try to send a message to a deallocated object.
Sending a message to `nil`/`NULL` is always valid in Objective-C.

So it depends if you want to check if a dictionary is `nil`, or if it doesn't have values (as a valid dictionary instance may be empty).

In the first case, compare with `nil`. Otherwise, checks if count is 0, and ensure you're instance is still valid. Maybe you just forgot a retain somewhere.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-13T11:11:46.363

```
if (TheDict == (NSDictionary*) [NSNull null]){

//TheDict is null
    }
else{
//TheDict is not null

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T11:48:51.787

要检查字典是否有 nil 或 NULL 数据，您可以检查 [dictionary count] 将在所有情况下返回 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T11:32:57.260

以上所有对我都不起作用，但是这个

```
if([mydict isKindOfClass:[NSNull class]])
{
   NSLog("Dic is Null")
}
else
{
   NSLog("Dic is Not Null")  
} 
```

为我工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-10T13:36:23.837

```
if([NSNull null] != [serverResponseObject objectForKey:@"Your_Key"])
{
//Success
} 
```

# javascript - 比较快递参数时失败（获取请求）

> ID：13960210
> 
> 赞同：2
> 
> 时间：2012-12-19T19:59:14.670
> 
> 标签：javascript, node.js, express

我正在使用 express 3.0，当我尝试解决一些查询时，我想测试数据库上是否有其他组件与这些 id 匹配。无论如何，这是我无法工作的代码：

```
function(req, res) {
 var Parking = mongoose.model('Parking');
 var parkingId = req.params.id;
 var userId = req.user['_id'];
 Parking
    .findOne({'_id': parkingId}, function(err, parking) {
        var parkingUserId = parking.userId;
        if (userId == parkingUserId) {
                       ...
                    } else {
                       ...
                    } 
```

req.params.id 在 url 内， req.user['_id'] 来自中间件。

虽然我在两个字段上都用相同的 id 调用这个 url ......它一直在变假......

为什么我做错了？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:09:41.313

您需要将 parkUserId 从 bson ObjectId 对象转换为字符串：

```
if (userId.toString() == parkingUserId.toString()) 
```

# python - aptana studio 3 与 python 3.x

> ID：13960211
> 
> 赞同：0
> 
> 时间：2012-12-19T19:59:15.980
> 
> 标签：python, macos, aptana

一段时间以来，我一直在我的 Mac 上使用 Aptana Studio 3 进行 Web 开发。我刚开始使用 IDLE 学习 python 3.3 和 tkinter，但它经常在我身上崩溃，我听说 Aptana 支持 python。安装 PyDev 时，我只看到使用 python 2.7 的选项。我宁愿继续使用 python 3.3，因为那是我一直在学习的。

有没有办法在 Aptana 中使用 python 3.3？
还有其他好的IDE吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:25:16.397

还有[PyCharm](http://www.jetbrains.com/pycharm/)支持您安装的任何解释器。

当然还有[Sublime Text](http://www.sublimetext.com/)，它不是一个完整的 IDE，而是一个绝对出色的文本编辑器，可用于任何目的。

# css - HTML/CSS: a:hover 似乎没有改变其他 div？

> ID：13960213
> 
> 赞同：0
> 
> 时间：2012-12-19T19:59:18.823
> 
> 标签：css, html

我可能已经监督了一个非常愚蠢的错误，但我不知道为什么这不起作用：

这是我的 HTML，它是一个简单的菜单，如果我将鼠标悬停在“主页”或“播放”上，则 div“装饰”的字体颜色会变为红色......

```
<div class="menu">
<h1>
    <a href="#">HOME</a> <a href="#">PLAY</a> <a href="#">LOGIN</a>
     <div id="deco">A</div>
</h1>
</div> 
```

CSS：

```
body { 
height:100%;
width:100%;
display: block;
background-color: #000;
overflow: hidden;
margin: 0;
padding:0;
}

.menu {

margin-top:10%;
margin-left: auto; 
margin-right: auto; 
text-align: center;
}

h1 { 
font-family: "Dauphin";
color: #FFFFFF;
} 

a {
color: #FFF;
text-decoration: none;  
}

a:hover #deco{
color: red;
}

#deco {
font-family: "Invader";
top: 123px;
color: #FFF;
width:100%;
height:100%;
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:02:51.683

您的选择器与元素不匹配。为了`a:hover #deco`工作，div 必须像这样住在锚内：

```
<a href="#">HOME
     <div id="deco">A</div>
</a> 
```

现代浏览器支持通用兄弟选择器~：

```
a:hover ~ #deco 
```

如果您需要支持不支持通用兄弟选择器的浏览器，您可以使用 jQuery 来实现这一点，如下所示：

```
$('a').hover(
    function() { $('#deco').addClass('link-hover'); }, 
    function() { $('#deco').removeClass('link-hover'); }); 
```

并定义 CSS：

```
#deco.link-hover {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:03:07.237

这不起作用，因为`#deco`它不是`a`标签的子元素。

CSS 声明`a:hover #deco`指的是任何 ID 为“deco”的元素，它是处于悬停状态的锚元素的子元素（例如包含在其中）。

要使其工作，您需要 #deco 位于 A 标记内，是子元素而不是兄弟元素。或者您可以保留 HTML 原样并使用简单的 jQuery 来完成此操作（使用 .css 或 .addClass 更改悬停时的样式定义）。

# matlab - 两个矩阵之间的Matlab相关性

> ID：13960218
> 
> 赞同：7
> 
> 时间：2012-12-19T19:59:25.997
> 
> 标签：matlab, matrix, correlation

基本上我有两个矩阵，如下所示：

```
 > Matrix A (100 rows x 2 features)

  Height - Weight
  1.48      75
  1.55      65
  1.60      70
  etc... 
```

和矩阵 B（矩阵 A 的维度相同，但值当然不同）

我想了解矩阵 A 和矩阵 B 之间是否存在某种相关性，您建议我采用哪种策略？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T06:18:59.090

您正在寻找的概念称为[典型相关](http://en.wikipedia.org/wiki/Canonical_correlation)。它是多变量分析领域中一个成熟的理论。本质上，这个想法是找到第一个矩阵中的列的线性组合和第二个矩阵中的列的线性组合，以使两个线性组合之间的相关性最大化。

这可以使用特征向量和特征值手动完成，但如果您有统计工具箱，那么 Matlab 已经将其打包并准备好使用。该函数被调用`canoncorr`，文档在[这里](http://www.mathworks.com.au/help/stats/canoncorr.html)

使用此函数的简要示例如下：

```
%# Set up some example data
CovMat = randi(5, 4, 4) + 20 * eye(4); %# Build a random covariance matrix
CovMat = (1/2) * (CovMat + CovMat'); %# Ensure random covriance matrix is symmetrix
X = mvnrnd(zeros(500, 4), CovMat); %# Simulate data using multivariate Normal

%# Partition the data into two matrices
X1 = X(:, 1:2);
X2 = X(:, 3:4);

%# Find the canonical correlations of the two matrices
[A, B, r] = canoncorr(X1, X2); 
```

第一个典型相关是 的第一个元素`r`，第二个典型相关是 的第二个元素`r`。

该`canoncorr`函数还有很多其他的输出。我不确定我是否足够聪明，无法在这里对它们提供令人满意但简洁的解释，所以我会跛脚并建议您在多元分析教科书中阅读它 - 大多数多元分析教科书都会有完整的专门讨论典型相关的章节。

最后，如果您没有统计工具箱，那么快速 google 显示了以下[FEX 提交](http://www.mathworks.com.au/matlabcentral/fileexchange/5230-acape/content/acape.m)，声称提供典型相关分析 - 注意，我自己没有测试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T20:57:09.403

好的，让我们做一个简短的尝试：

```
A = [1:20; rand(1,20)]'; % Generate some data... 
```

检查二维关系的最佳方法是查看数据图：

```
plot(A(:,1), A(:,2), 'o') % In the random data you should not see some pattern... 
```

如果我们真的想计算一些相关系数，我们可以用 来做到这一点`corrcoef`，正如你提到的：

```
B = corrcoef(A)
ans =

    1.0000   -0.1350
   -0.1350    1.0000 
```

这里，`B(1,1)`是第 1 列和第 1 列`B(2,1)`之间、第 1 列和第 2 列之间的相关性（反之亦然，因此`B`是对称的）。

有人可能会争论这种度量在二维环境中的有用性——在我看来，您通常通过查看图表获得更多见解。

# java - 在java中搜索字符串

> ID：13960220
> 
> 赞同：0
> 
> 时间：2012-12-19T19:59:34.950
> 
> 标签：java, string

我在这里有点迷路，我一直在寻找这个。

我有一个字符串`$#897950%-1`。现在我需要看看它是否包含一个`-1`。我试过了

`str.contains("-1")`但它没有用。有人可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:10:36.117

我试了一下：

```
public static void main(String ar[]){
    String str="$#897950%-1";
    System.out.println(str.contains("-1"));
} 
```

看，日食看到了我，（它工作正常并给了我`true`作为输出）：

![在此处输入图像描述](../Images/ff7c5a360e494fcbb19405f158bd07e3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:03:32.707

检查你是否真的有这个字符串。可能是调试器或输出系统替换了某些东西。

我有以下代码打印“真”

```
public static void main(String[] args) {

    String str = "$#897950%-1";
    System.out.println(str.contains("-1"));
} 
```

# c++ - 为什么 CMake 生成的 Makefile 找不到外部库？

> ID：13960221
> 
> 赞同：2
> 
> 时间：2012-12-19T19:59:50.443
> 
> 标签：c++, c, makefile, cmake

我第一次尝试使用 CMake，但收效甚微。我的 CMakeLists.txt 是：

```
# Sets the version of CMake that is required.
cmake_minimum_required(VERSION 2.8.10)

# Name of the project.
project(QTCODERLIB)

# Adds common directories to the build.
include_directories(/usr/local/include)
link_directories(/usr/local/lib)

# Check for header files that we depend on.
include(CheckIncludeFiles)
check_include_files(libavcodec/avcodec.h HAVE_AVCODEC_H)

# Adds all of the source files.
file(GLOB SOURCE RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *.cxx)

# Builds a library named `qtcoder` from source.
add_library(qtcoder SHARED ${SOURCE})

# Links the library against third-party dependencies.
target_link_libraries(qtcoder avcodec) 
```

我的 test.cxx 文件是：

```
#include "config.h"
#include <libavcodec/avcodec.h>

void f(void) {
  avcodec_register_all();
} 
```

制作。&& make VERBOSE=1 结果如下：

```
/usr/local/Cellar/cmake/2.8.10.1/bin/cmake -H/Users/phowes/Personal/QTCoder/QTCoderLib -B/Users/phowes/Personal/QTCoder/QTCoderLib --check-build-system CMakeFiles/Makefile.cmake 0
/usr/local/Cellar/cmake/2.8.10.1/bin/cmake -E cmake_progress_start /Users/phowes/Personal/QTCoder/QTCoderLib/CMakeFiles /Users/phowes/Personal/QTCoder/QTCoderLib/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make -f CMakeFiles/qtcoder.dir/build.make CMakeFiles/qtcoder.dir/depend
cd /Users/phowes/Personal/QTCoder/QTCoderLib && /usr/local/Cellar/cmake/2.8.10.1/bin/cmake -E cmake_depends "Unix Makefiles" /Users/phowes/Personal/QTCoder/QTCoderLib /Users/phowes/Personal/QTCoder/QTCoderLib /Users/phowes/Personal/QTCoder/QTCoderLib /Users/phowes/Personal/QTCoder/QTCoderLib /Users/phowes/Personal/QTCoder/QTCoderLib/CMakeFiles/qtcoder.dir/DependInfo.cmake --color=
make -f CMakeFiles/qtcoder.dir/build.make CMakeFiles/qtcoder.dir/build
/usr/local/Cellar/cmake/2.8.10.1/bin/cmake -E cmake_progress_report /Users/phowes/Personal/QTCoder/QTCoderLib/CMakeFiles 1
[100%] Building CXX object CMakeFiles/qtcoder.dir/test.cxx.o
/usr/bin/c++   -Dqtcoder_EXPORTS -fPIC -I/usr/local/include    -o CMakeFiles/qtcoder.dir/test.cxx.o -c /Users/phowes/Personal/QTCoder/QTCoderLib/test.cxx
Linking CXX shared library libqtcoder.dylib
/usr/local/Cellar/cmake/2.8.10.1/bin/cmake -E cmake_link_script CMakeFiles/qtcoder.dir/link.txt --verbose=1
/usr/bin/c++   -dynamiclib -Wl,-headerpad_max_install_names   -o libqtcoder.dylib -install_name /Users/phowes/Personal/QTCoder/QTCoderLib/libqtcoder.dylib CMakeFiles/qtcoder.dir/test.cxx.o  -L/usr/local/lib -lavcodec 
Undefined symbols for architecture x86_64:
  "avcodec_register_all()", referenced from:
      f() in test.cxx.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [libqtcoder.dylib] Error 1
make[1]: *** [CMakeFiles/qtcoder.dir/all] Error 2
make: *** [all] Error 2 
```

目标文件和库都编译为 64 位：

```
$ lipo -info CMakeFiles/qtcoder.dir/test.cxx.o
Non-fat file: CMakeFiles/qtcoder.dir/test.cxx.o is architecture: x86_64

$ lipo -info /usr/local/lib/libavcodec.dylib
Non-fat file: /usr/local/lib/libavcodec.dylib is architecture: x86_64 
```

该函数存在于库中：

```
$ nm /usr/local/lib/libavcodec.dylib | grep avcodec_register_all
0000000000033c01 T _avcodec_register_all 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:29:09.267

avcodec 库是一个 C 库，查看您正在为 CXX 编译的 cmake 输出。这个问题解决了如何精确处理这种情况：[g++ Linking Error on Mac while compiling FFMPEG](https://stackoverflow.com/questions/4585847/g-linking-error-on-mac-while-compiling-ffmpeg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:20:38.967

通常你会`find_package`用来做这些繁重的举重任务。默认情况下，CMake 附带了很多模块，但有时您必须下载一个用于较少使用的项目。

这是一些关于[如何查找库](http://www.cmake.org/Wiki/CMake:How_To_Find_Libraries)的文档。

这是您期望看到的他们人为的示例。

```
cmake_minimum_required(VERSION 2.8)
project(helloworld)
add_executable(helloworld hello.c)
find_package (BZip2)
if (BZIP2_FOUND)
  include_directories(${BZIP_INCLUDE_DIRS})
  target_link_libraries (helloworld ${BZIP2_LIBRARIES})
endif (BZIP2_FOUND) 
```

从简单的网络搜索中，我不清楚 CMake 是否提供了 AVCodec 模块。我在网上找了几个：

[https://github.com/arjanhouben/SDL_ffmpeg/blob/master/Findavcodec.cmake](https://github.com/arjanhouben/SDL_ffmpeg/blob/master/Findavcodec.cmake) [http://whispercast.org/trac/browser/trunk/cmake/FindLibAvCodec.cmake](http://whispercast.org/trac/browser/trunk/cmake/FindLibAvCodec.cmake)

我看到大多数使用这个库的人都对 FFMPEG 感兴趣，这可能也是你感兴趣的。

[https://github.com/zinnschlag/openmw/blob/master/cmake/FindFFMPEG.cmake](https://github.com/zinnschlag/openmw/blob/master/cmake/FindFFMPEG.cmake)

如果您确实需要使用您下载的模块，这里有一些关于[如何使用自定义模块](https://stackoverflow.com/questions/10765885/how-to-install-your-custom-cmake-find-module)的说明。

# php - 在 phpmyadmin 中工作的 Laravel 中的 MySQL 访问冲突

> ID：13960224
> 
> 赞同：2
> 
> 时间：2012-12-19T19:59:58.693
> 
> 标签：php, mysql, laravel

我刚刚开始使用 Laravel 框架，并找到了一个很好的分层数据小指南（通过这个网站），我工作得很好。

我遇到的唯一问题是通过 Laravel 运行以下代码：

```
DB::query("LOCK TABLE pages WRITE;
        SELECT @myLeft := lft FROM pages WHERE id = ?;
        UPDATE pages SET rgt = rgt + 2 WHERE rgt > @myLeft;
        UPDATE pages SET lft = lft + 2 WHERE lft > @myLeft;
        UNLOCK TABLES;", 1); 
```

当我通过 phpmyadmin 运行命令时工作正常，但在 Laravel 中出现错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; 
```

我有许多其他查询运行良好，所以我不知道从哪里开始寻找，我已经尝试将 ` 添加到表和字段名称中，并删除了锁以查看是否会做任何事情但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:15:37.233

好的，我在想 Lavarel 它想要运行一个查询并且我正在尝试运行五个，当我将命令拆分如下时它可以工作，

```
$ord = DB::first("SELECT lft FROM pages WHERE id = ?;", $order);            
        DB::query("UPDATE pages SET rgt = rgt + 2 WHERE rgt > ?;", $ord->lft);
        DB::query("UPDATE pages SET lft = lft + 2 WHERE lft > ?;", $ord->lft); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:18:39.653

每个只做一个查询`DB::query()`。在不查看源代码的情况下，此方法旨在仅运行*一条*语句。

# actionscript-3 - Flash Builder - 内部构建错误/类不能嵌套

> ID：13960232
> 
> 赞同：0
> 
> 时间：2012-12-19T20:00:22.783
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我已经在 Flash Builder 项目上工作了大约一周，在构建时偶尔会遇到以下两个错误之一：

```
An internal build error has occurred. See the error log for more information.

1131: Classes must not be nested. 
```

一个快速的 Project > Clean 解决了问题。当我今天早上打开我的项目并尝试构建它时，我再次收到内部构建错误。然而，这一次，Project > Clean 导致 5 个单独的“类不能嵌套”错误，都指向我的主类声明。

再次运行 Project > Clean 会导致内部构建错误。如果我再次清理，我会再次收到 5 个类错误，依此类推。

我正在使用 Flash Builder 4.6、Flex 4.6 和 AIR 3.5。自昨天以来，我没有对我的代码库进行任何更改。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T13:00:11.597

我在使用 flashb uilder 4.6 时遇到了同样的问题，当我尝试突然编译应用程序时，它说“发生了 flash builder 内部构建错误，请参阅错误日志以获取更多信息”

要解决此问题，您必须在发生这种情况时检查编译器参数，您将无法进入编译器参数 GUI，您必须在 .actionScriptProperties 文件中对其进行编辑

删除 -local 和本地名称保存文件并尝试编译你不会得到错误

要放回本地，您必须将本地改写如下 -locale=en_US,us_EN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T15:44:09.410

对我有用的是从项目的编译器设置中删除所有 swc 引用，然后重新插入它们。

# java - 幸运游戏 GUI.. 怎么了？

> ID：13960235
> 
> 赞同：4
> 
> 时间：2012-12-19T20:00:31.853
> 
> 标签：java, eclipse, swing, user-interface

我写了一个 GUI 程序，但我不确定我做错了什么。当我运行该程序时，它几乎立即退出。希望能帮到你，程序如下：

```
public class RandomGame extends JFrame {
    private JTextField t1 = new JTextField();
    private double t1num = Double.parseDouble(t1.getText());

    public RandomGame() {
        setLayout(new FlowLayout());
        Event1 e1 = new Event1();
        t1.addKeyListener(e1);
        add(t1);

    }

    public class Event1 implements KeyListener {
        @Override
        public void keyPressed(KeyEvent arg0) {
            Random r = new Random();
            switch (arg0.getKeyCode()) {
            case KeyEvent.VK_ENTER:
                if(t1num == r.nextInt()) {
                    t1.setText("You Won!");
                }
                else {
                    t1.setText("You Lost.");
                }

                }
            }

        @Override
        public void keyReleased(KeyEvent arg0) {
            // TODO Auto-generated method stub

        }
        @Override
        public void keyTyped(KeyEvent arg0) {
            // TODO Auto-generated method stub

        }
    }
    public static void main(String[] args) {
        RandomGame gui = new RandomGame();
        gui.setDefaultCloseOperation(EXIT_ON_CLOSE);
        gui.setSize(1280, 800);
        gui.setTitle("Random Game");
        gui.setVisible(true);

    }
} 
```

（不要担心进口，我只是没有包括它们）任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:04:13.543

A`NumberFormatException`在此行启动时抛出：

```
private double t1num = Double.parseDouble(t1.getText()); 
```

因为`JTextField` `t1`将包含一个空的`String`.

事实上，这可以简单地保持*未分配*，并将`0`采用用于数字基元的默认值。

* * *

另外使用时`Random`

```
t1num == r.nextInt(); 
```

可以写成：

```
t1num == r.nextDouble(); 
```

也不`KeyListener`推荐与`JTextComponents`. 在这里，您只需要处理 ENTER 键操作，这样使用`ActionListener`起来会更好更简单。

# postgresql - 如何独立设置 Archiva 以使用 Postgres？

> ID：13960237
> 
> 赞同：1
> 
> 时间：2012-12-19T20:00:55.923
> 
> 标签：postgresql, jetty, archiva

好的，我正在努力让 Archiva 1.4 在独立模式下使用现有的 Postgres 数据库。谁能帮我配置一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:56:39.917

与 Olivier 合作，这是我最后的工作数据库配置：

```
 <New id="users" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jdbc/users</Arg>
    <Arg>
      <New class="org.apache.tomcat.jdbc.pool.DataSource">
        <Set name="driverClassName">org.postgresql.Driver</Set>
        <Set name="url">jdbc:postgresql://<server>/Archiva</Set>
        <Set name="name">ArchivaApp</Set>
        <Set name="username">...</Set>
        <Set name="password">...</Set>
        <!-- depends on your concurrent users numbers -->
        <Set name="maxWait">10000</Set>
        <Set name="removeAbandonedTimeout">10000</Set>
        <Set name="maxActive">30</Set>
        <Set name="initialSize">15</Set>
        <Set name="removeAbandoned">true</Set>
        <Set name="logAbandoned">true</Set>
        <Set name="testOnBorrow">true</Set>
        <!-- very rigourous sql query validation -->
        <Set name="validationQuery">select 1</Set>
      </New>
    </Arg>
  </New> 
```

设置 testOnBorrow 参数很重要；其他一些无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:34:58.450

取决于您是使用独立还是在 servlet 容器中

1）独立看看这里 [http://archiva.apache.org/docs/1.4-M4-SNAPSHOT/adminguide/standalone.html](http://archiva.apache.org/docs/1.4-M4-SNAPSHOT/adminguide/standalone.html) 用你的 jdbc 驱动程序替换 com.mysql.jdbc.Driver 并替换 url jdbc:mysql:/ /本地主机/档案

将您的 jdbc 驱动程序 jar 放入 lib 目录 2) servlet 容器（取决于 :-)）对于 Apache Tomcat 参见 [http://archiva.apache.org/docs/1.4-M4-SNAPSHOT/adminguide/webapp.html](http://archiva.apache.org/docs/1.4-M4-SNAPSHOT/adminguide/webapp.html) 放置您的 jdbc 驱动程序jar 到 lib 目录更改值

driverClassName="org.apache.derby.jdbc.EmbeddedDriver" url="jdbc:derby:/path/to/database/users;create=true"

我在[这里更新了文档数据库部分](http://archiva.apache.org/docs/1.4-M4-SNAPSHOT/adminguide/standalone.html)

# charts - 在Highcharts中制作光标指针

> ID：13960241
> 
> 赞同：6
> 
> 时间：2012-12-19T20:01:10.743
> 
> 标签：charts, highcharts

我们使用[Highcharts](http://www.highcharts.com/)进行报告。单击图表时，应打开一个新选项卡/窗口。我可以通过处理图表中的点击事件来实现这一点。但我无法将光标设为指针。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T20:08:37.343

是的，这是可能的。见[光标](http://api.highcharts.com/highcharts#plotOptions.series.cursor)。 [示例](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-cursor-column/)（来自该链接）。基本上你为系列设置光标选项：

```
plotOptions: {
            series: {
                cursor: 'pointer',
                events: {
                    click: function() {
                        alert('You just clicked the graph');
                    }
                }
            }
        } 
```

如果您想让整个图表可点击，那么您需要处理鼠标悬停/悬停。但是随后您可能会丢失单击位置的详细信息（想要单击系列点，但现在不能，因为您在“顶层”层捕获了它）。

# tfs - 在 Team Foundation Server 2010 工作项表单中填充控件

> ID：13960245
> 
> 赞同：3
> 
> 时间：2012-12-19T20:01:15.433
> 
> 标签：tfs, tfs-sdk, tfs-power-tools

我的任务是创建一个小型应用程序来查询客户数据库，并将其错误条目映射到 TFS。到目前为止，几乎一切都很好。我的客户数据库查询有效，我可以轻松创建一个新数据库`WorkItem`并将其放入 TFS。但是我一直试图用我们用于错误`HtmlFieldControl`的模板的内容来填充一个。`WorkItem`我发现这个模板的 XML 存储在我们的 NAS 上，我假设它是通过 TFS PowerTools 创建的。该文件具有`.wt`扩展名。完成此操作后，`Value`元素的内容应该出现在`HtmlFieldControl`.

```
<Template xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FieldValues>
    <FieldValue>
      <ReferenceName>Microsoft.VSTS.TCM.ReproSteps</ReferenceName>
        <Value>...</Value>
    </FieldValue>
  </FieldValues>
  <WorkItemType>Bug</WorkItemType>
  <TeamServerUri>...</TeamServerUri>
  <TeamProjectName>...</TeamProjectName>
  <Description />
</Template> 
```

我在任何地方都找不到关于这个特定元素的任何文档，所以我不知道它如何适合现有的 bug `WorkItemType`。

模板存储在 TFS 上：

![TFS 中的工作项模板位置](../Images/5e3dabbb98e96f3261cc102187fb91f6.png)

它应该像这样出现在工作项表单本身中：

![工作项模板在其应有的位置](../Images/8ce264a4fd3dbd09b26f7676e843a41b.png)

如果没有办法做到这一点，我怎么能在这个填充表单的 XML 中看到一个高峰，看看我应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:25:36.830

在创建新的`WorkItem`填充字段时，我发现有一个名为“Repro Steps”的自定义字段，所以我输入模板如下：

```
workItem.Fields["Repro Steps"].Value = templateText; 
```

奇迹般有效。

# jquery - Twitter 引导程序展开/折叠全部 - 在引导程序选项卡中

> ID：13960248
> 
> 赞同：4
> 
> 时间：2012-12-19T20:01:20.977
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap 的选项卡在每个选项卡中保存一个手风琴的常见问题解答。要求是每个展开/折叠答案的选项卡都有一个展开/折叠所有按钮。我目前的展开/折叠按钮在加载的第一个选项卡上正常工作。但是，当我单击另一个选项卡并执行相同的按钮时，它不起作用。当我单击返回加载的初始选项卡时，它也不再起作用。

这是[jsfiddle](http://jsfiddle.net/xjkEa/7/)

下面的 HTML

```
<ul class="nav nav-tabs" id="tabFAQ">
        <li class="active"><a href="#GQ">General Questions</a></li>
        <li><a href="#ICQ">Insurance Coverage</a></li>
        <li><a href="#PQ">Payment</a></li>
        <li><a href="#FQ">Forms</a></li>
        <li><a href="#CQ">Claims</a></li>
    </ul>
    <div class="tab-content" id="faqContent">
        <div class="tab-pane active" id="GQ">
            <div class="accordion" id="generalQuestions">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseOne_GQ">Q. What do I do if I’m having trouble logging in?</a>
                    </div>
                    <div id="collapseOne_GQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Please contact our Customer Care team at 800-821-7303 for assistance.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseTwo_GQ">Q. Will additional online services be added to this portal?</a>
                    </div>
                    <div id="collapseTwo_GQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes. We will be adding many online services to this portal over the next six months.  Please check back often.</div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseThree_GQ">Q. What information am I able to access on this portal?</a>
                    </div>
                    <div id="collapseThree_GQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. We currently have the ability to display any premiums that are currently due and allow you to make an immediate one-time payment from your checking account, savings account, Visa or MasterCard.  Your payment will be confirmed immediately.  Other functions are planned to be added to the portal over the next six months.  Check back often.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFour_GQ">Q. Can I choose my own Username and Password?</a>
                    </div>
                    <div id="collapseFour_GQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can choose your own Username and Password.  We suggest using your email address for your Username, but any username that is between 8 and 20 characters long could be used.  A secure Password should be 8 to 20 characters long, with no spaces, and contains at least one special character.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFive_GQ">Q. Can I update by email address online?</a>
                    </div>
                    <div id="collapseFive_GQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, but I have no idea how right now.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="ICQ">
            <div class="accordion" id="Div1">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne_ICQ">Q. Insurance Coverage question Stub for Later? </a> </div>
                        <div id="collapseOne_ICQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="PQ">
        <div class="accordion" id="accordion3">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseOne_PQ">Q. When is my payment actually made to my account? </a> </div>
                        <div id="collapseOne_PQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Your payment is posted to your account within 24 hours after receipt of the funds.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseSeven_PQ">Q. What is a one-time payment? </a> </div>
                        <div id="collapseSeven_PQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. This is a web-based service that enables our customers to make a single payment to pay their insurance premium.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseEight_PQ">Q. How do I know my payments are secure? </a> </div>
                        <div id="collapseEight_PQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Our portal uses encryption software and hardware to protect your information. For more information, view our <a href="#">Privacy Policy</a>. </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseNine_PQ">Q. Can I use a debit card to make a one-time online payment? </a> </div>
                        <div id="collapseNine_PQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can use your debit card. Your PIN is not required because this is a PIN-less debit transaction.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseTen_PQ">Q. Can I use a credit card to make a one-time online payment? </a> </div>
                        <div id="collapseTen_PQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can use your Visa or MasterCard credit card to make a payment.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="FQ">
            <div class="accordion" id="Div3">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne_FQ">Q. Forms Question Stub for Later? </a> </div>
                        <div id="collapseOne_FQ" class="accordion-body collapse">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="CQ">
            <div class="accordion" id="Div5">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne_CQ">Q. Claims Question Stub for Later? </a> </div>
                        <div id="collapseOne_CQ" class="accordion-body collapse in">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
```

下面的Javascript：

```
$(document).ready(function () {
$('.modal').appendTo($("body"));

$('#tabFAQ a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
})

$('.expandcollapse').click(function () {

    $('.collapse').each(function(index) {
        $(this).collapse("toggle");
    });

    if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i> Expand All") {
        $(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
    }
    else {
        $(this).html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
    };
}); 
```

});

我想知道是不是因为最初加载页面时没有在 DOM 中加载其他选项卡内容。所以我使用了 jquery .each() 函数，希望即使最初没有加载它们也会切换。

有人可以帮我检测为什么在选择选项卡时按钮停止工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T21:11:45.530

首先，我看到您多次使用同一个锚 (href="#collapseOne")，请确保它们都是唯一的以避免任何冲突。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T18:21:22.973

有两个问题：

1) Bootstrap 使用 scrollHeight 来转换 .collapse div 的高度，但是当元素不显示时，scrollHeight 始终为 0；单击全部展开按钮时，无法正确设置隐藏选项卡中 .collapse div 的高度。

2) ontransitionend 事件不会在未显示的元素上触发。Bootstrap 在其折叠方法中设置了一个标志（过渡），该标志在 ontransitionend 中重置，但是从未为未显示的元素触发 ontransitionend。单击全部展开按钮后，Bootstrap 会认为所有未显示的 .collapse div 都处于过渡状态，并且随后对这些 div 的 collapse 方法的每次调用都会短路。

由于您无法控制这些问题中的任何一个，因此需要做的是仅在单击展开/折叠所有按钮时折叠**活动**选项卡的 div，并在选项卡变为时更新选项卡中 div 的折叠设置积极的。

我把它放在一起更新你的[jsfiddle](http://jsfiddle.net/xjKEa/19/)。

更新的 HTML：

```
 <ul class="nav nav-tabs" id="tabFAQ">
        <li class="active"><a href="#GQ" data-toggle="tab" state="0">General Questions</a></li>
        <li><a href="#ICQ" data-toggle="tab" state="0">Insurance Coverage</a></li>
        <li><a href="#PQ" data-toggle="tab" state="0">Payment</a></li>
        <li><a href="#FQ" data-toggle="tab" state="0">Forms</a></li>
        <li><a href="#CQ" data-toggle="tab" state="0">Claims</a></li>
    </ul>
    <div class="tab-content" id="faqContent">
        <div class="tab-pane active" id="GQ">
            <div class="accordion" id="generalQuestions">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseOne">Q. What do I do if I’m having trouble logging in?</a>
                    </div>
                    <div id="collapseOne" class="accordion-body collapse">
                        <div class="accordion-inner">A. Please contact our Customer Care team at 800-821-7303 for assistance.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseTwo">Q. Will additional online services be added to this portal?</a>
                    </div>
                    <div id="collapseTwo" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes. We will be adding many online services to this portal over the next six months.  Please check back often.</div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseThree">Q. What information am I able to access on this portal?</a>
                    </div>
                    <div id="collapseThree" class="accordion-body collapse">
                        <div class="accordion-inner">A. We currently have the ability to display any premiums that are currently due and allow you to make an immediate one-time payment from your checking account, savings account, Visa or MasterCard.  Your payment will be confirmed immediately.  Other functions are planned to be added to the portal over the next six months.  Check back often.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFour">Q. Can I choose my own Username and Password?</a>
                    </div>
                    <div id="collapseFour" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can choose your own Username and Password.  We suggest using your email address for your Username, but any username that is between 8 and 20 characters long could be used.  A secure Password should be 8 to 20 characters long, with no spaces, and contains at least one special character.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFive">Q. Can I update by email address online?</a>
                    </div>
                    <div id="collapseFive" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, but I have no idea how right now.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="ICQ">
            <div class="accordion" id="Div1">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">Q. Insurance Coverage question Stub for Later? </a> </div>
                        <div id="Div2" class="accordion-body collapse">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="PQ">
            <div class="accordion" id="accordion3">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseSix">Q. When is my payment actually made to my account? </a> </div>
                        <div id="collapseSix" class="accordion-body collapse">
                        <div class="accordion-inner">A. Your payment is posted to your account within 24 hours after receipt of the funds.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseSeven">Q. What is a one-time payment? </a> </div>
                        <div id="collapseSeven" class="accordion-body collapse">
                        <div class="accordion-inner">A. This is a web-based service that enables our customers to make a single payment to pay their insurance premium.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseEight">Q. How do I know my payments are secure? </a> </div>
                        <div id="collapseEight" class="accordion-body collapse">
                        <div class="accordion-inner">A. Our portal uses encryption software and hardware to protect your information. For more information, view our <a href="#">Privacy Policy</a>. </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseNine">Q. Can I use a debit card to make a one-time online payment? </a> </div>
                        <div id="collapseNine" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can use your debit card. Your PIN is not required because this is a PIN-less debit transaction.  </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapseTen">Q. Can I use a credit card to make a one-time online payment? </a> </div>
                        <div id="collapseTen" class="accordion-body collapse">
                        <div class="accordion-inner">A. Yes, you can use your Visa or MasterCard credit card to make a payment.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="FQ">
            <div class="accordion" id="Div3">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">Q. Forms Question Stub for Later? </a> </div>
                        <div id="Div4" class="accordion-body collapse">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="CQ">
            <div class="accordion" id="Div5">
                <div class="accordion-group">
                    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">Q. Claims Question Stub for Later? </a> </div>
                        <div id="Div6" class="accordion-body collapse">
                        <div class="accordion-inner">A. Answer stub for later.  </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
```

更新的 JavaScript：

```
$('.expandcollapse').click(function() {

    var newstate = $(this).attr('state') ^ 1,
        icon = newstate ? "minus" : "plus",
        text = newstate ? "Collapse" : "Expand";

    $('.nav-tabs').children().each(function(index) {
        if($(this).hasClass('active')) {
            var tab = $(this).children(':first');
            toggleTab(tab.prop('hash'));
            tab.attr('state',newstate);
        }
    });

    $(this).html("<i class=\"icon-white icon-" + icon + "-sign\"></i> " + text +" All");

    $(this).attr('state',newstate)

});

$('a[data-toggle="tab"]').on('shown', function (e) {

    var myState = $(this).attr('state'),
        state = $('.expandcollapse').attr('state');

    if(myState != state) {
      toggleTab($(this).prop('hash'));
      $(this).attr('state',state);
    }

})

function toggleTab(id){

    $(id).find('.collapse').each(function() {
        $(this).collapse('toggle');
      });

} 
```

# google-apps-script - Google 电子表格中带有图标的自定义按钮

> ID：13960254
> 
> 赞同：0
> 
> 时间：2012-12-19T20:01:37.717
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

有没有办法在 Google 电子表格中创建带有图标的自定义按钮？我知道我可以创建自定义菜单项，但按钮更加用户友好。

![看看我想在哪里添加按钮](../Images/8300a6e1204b602d41254a9d8949a285.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:41:42.253

您无法在指向的位置添加菜单项，但可以添加可以触发脚本功能的自定义[绘图](https://developers.google.com/apps-script/execution_extensions#drawings)和[图像。](https://developers.google.com/apps-script/execution_extensions#images)这可能会更好，因为您可以将这些按钮放置在更靠近数据/操作点的位置。

# java - Maven：打包期间执行antrun任务

> ID：13960256
> 
> 赞同：4
> 
> 时间：2012-12-19T20:01:46.027
> 
> 标签：java, hibernate, maven, maven-antrun-plugin

我需要使用 Maven antrun 插件将 Hibernate 字节码检测添加到我的 Java 类之一，以便启用各个字段的延迟加载。但是，我无法让插件在构建周期中执行。

**如何在编译后但在`mvn package`构建期间打包之前指示 Maven 执行 antrun 插件？**

当前 pom.xml（片段）：

```
<pluginManagement>
    <plugins>
    ...
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <inherited>false</inherited>
            <executions>
                <execution>
                    <id>default-cli</id>
                    <configuration>
                        <target>
                            <echo message="Running instrumentation task"/>
                            <taskdef name="instrument" classname="org.hibernate.tool.instrument.javassist.InstrumentTask">
                                <classpath>
                                    <path refid="maven.dependency.classpath" />
                                    <path refid="maven.plugin.classpath" />
                                </classpath>
                            </taskdef>
                            <instrument verbose="true">
                                <fileset dir="target/classes">
                                    <include name="**/UploadedFile.class" />
                                </fileset>
                            </instrument>
                        </target>
                    </configuration>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.hibernate</groupId>
                    <artifactId>hibernate-core</artifactId>
                    <version>${hibernate.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.javassist</groupId>
                    <artifactId>javassist</artifactId>
                    <version>${javassist.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-simple</artifactId>
                    <version>${org.slf4j-version}</version>
                </dependency>
            </dependencies>
        </plugin>
    ...
    </plugins>
</pluginManagement> 
```

我看到的有关此问题的所有文档都显示该插件被配置为在“进程类”阶段运行。但是，从 Maven[文档](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)来看，“流程类”阶段似乎不是`package`. 我可以使用 自行运行插件`mvn antrun:run`，但由于最后我需要`mvn package`生成一个 .war 文件以进行部署，我相当确定该插件需要在包任务中的某处执行才能放置修改后的类进入打包的.war。

我已经尝试了上述代码的许多变体（更改相位、更改为 、更新插件版本、更改 id 等），但没有明显的变化。我一直在运行`mvn`以`-e -X`显示所有可能的输出，无论我尝试什么，antrun 插件都不会执行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:38:53.657

显然，问题在于您的`antrun`插件配置位于`pluginManagement`部分而不是`plugins`部分。[您可以在我的回答中看到](https://stackoverflow.com/questions/13959358/where-should-be-placed-maven-compiler-plugin-declaration-in-plugins-or-plugi/13959711#13959711)这两个部分之间的区别。

为了让它工作，你应该把它移到`<build> -> <plugins>`你的 pom.xml 部分。

# jquery - ajax perl 聊天提交按钮发送参数并仅在框架内重新加载

> ID：13960257
> 
> 赞同：2
> 
> 时间：2012-12-19T20:01:49.350
> 
> 标签：jquery, ajax, perl

最好的问候，对不起我的英语不好，我有[ajax perl 聊天脚本](http://www.barattelli.com/ajaxperlchat/index_en.php)，

索引页是incoming.cgi

```
use strict;
use warnings;
use CGI;
use Fcntl qw(:DEFAULT :flock);
use File::Basename;

#DEBUG
    #use Carp qw( confess );
    #$SIG{__DIE__} =  \&confess;

# Not so elegant... to be improved
my ($scriptname,$scriptdir,$scriptsuffix) = fileparse($ENV{SCRIPT_FILENAME});
my %config = (do $scriptdir.'config.pl');

my $query = new CGI;

my $text = $query->param('text');
my $user = $query->param('user');

if ( !defined $text || !defined $user) { print $query->header('text/plain; charset="UTF-8"',401); exit; }   # Bad formed request

# Check for unwanted clients
my $badipfilename = $config{pathonserver}."banlist.dat";
open(my $badipfile,  "<:encoding(UTF-8)", $badipfilename )  or die "Unable to load file $badipfilename: $!";
my $ban = <$badipfile> || "";
if( $ban ne "" && $ENV{'REMOTE_ADDR'} =~ /$ban/ ) { print $query->header('text/plain; charset="UTF-8"',403); exit; }    # Banned IP
close($badipfile);

# OK Well formed request && accepted client
print $query->header('text/plain; charset="UTF-8"');

if ( length($text) > 1024  || length($text) == 0) { print "TEXTSIZE"; exit; }
if ( length($user) > 32 || length($text) == 0) { print "USERSIZE"; exit; }

# check for HTML
if ( $user =~ /<(?:.|\s)*?>/i ) { print "HTMLUSER|$&"; exit; }
if ( $text =~ /<(?:.|\s)*?>/i ) { print "HTMLTEXT|$&"; exit; }

# check for unwanted words
my $badwordsfilename = $config{pathonserver}."badwords.dat";
open(my $badwordsfile,  "<:encoding(UTF-8)", $badwordsfilename )  or die "Unable to load file $badwordsfilename: $!";
my $bw = <$badwordsfile> || "";
close($badwordsfile);
my $bwregex = '(^|\s)('.$bw.')($|\s)';

if ( $bw ne "" && $user =~ /$bwregex/i ) { print "BADUSER|$&"; exit; }
if ( $bw ne "" && $text =~ /$bwregex/i ) { print "BADTEXT|$&"; exit; }

# OK all test passed
my $lidfilename = $config{pathonserver}."lastid.dat";
my $chatfilename = $config{pathonserver}."chat.dat";

open(LASTIDFILE,  "+<:encoding(UTF-8)", $lidfilename )  or die "Unable to load file $lidfilename: $!";

# We use lock on this file to sync with other actions
# START OF CRITICAL SECTION
flock( LASTIDFILE, LOCK_EX ) or die "Cannot gain FLOCK on file $lidfilename: $!";

# Open this INTO critical section or other access will cause errors
open(my $chatfile,  "+<:encoding(UTF-8)", $chatfilename )  or die "Unable to open file $chatfilename: $!";

my $newid;

if( -s $chatfile > 150000 )
{   
    # The file is too big, let's prune
    my $newchatfilename = $config{pathonserver}."newchat.dat";
    open( my $newchatfile, ">:encoding(UTF-8)", $newchatfilename) or die "Unable to create file $newchatfilename: $!";

    my $i = 0;
    while( <$chatfile> )
    {   
        # Roll the file rows until we reach 75 K
        if( tell($chatfile) > 75000 )
        {
            # Ok we can copy the following rows reassigning a new ID
            my @chatfields = split /\|/;
            $chatfields[0] = $i;
            print $newchatfile join( '|' , @chatfields);
            $i ++;
        }
    }
    $newid = $i;

    close $chatfile;
    close $newchatfile;

    # Cleanup deleting old chat.txt and replacing with the new chat.txt
    if (unlink($chatfilename) != 1)
    {
        my $errstr = "Unable to delete file $chatfilename: $!";
        unlink $newchatfilename;
        die $errstr;
    }
    rename $newchatfilename,$chatfilename;

    # Re-open chat.txt as if it was never modified
    open($chatfile,  "+<", $chatfilename )  or die "Unable to open file $chatfilename: $!";
}
else
{
    seek(LASTIDFILE, 0, 0);

    my $lastserverid = <LASTIDFILE>;
    $newid = $lastserverid + 1;
}

# Do some checks on the text the user inserted
# We must do these tests here because we cannot trust the script input
chomp $text;
chomp $user;

$text =~ s/\|//g;
$user =~ s/\|//g;

# Ok let's format our record

my @localtime = localtime();
my @dateformat = ($localtime[3],$localtime[4] + 1,($localtime[5] + 1900)%100);
my $chatrow = $newid . '|' . $ENV{'REMOTE_ADDR'} . '|' . sprintf("%02d/%02d/%02d",$dateformat[$config{dateformat0}],$dateformat[$config{dateformat1}],$dateformat[$config{dateformat2}]) . '|' . 
                sprintf("%02d:%02d:%02d",$localtime[2],$localtime[1],$localtime[0]) . '|' . 
                $user . '|' . $text;

truncate(LASTIDFILE,0);
seek(LASTIDFILE, 0, 0);
print LASTIDFILE $newid;

seek($chatfile, 0, 2);
if( tell($chatfile) > 0 ) 
{
    print $chatfile "\n";
}
print $chatfile $chatrow;

close($chatfile);
#END OF CRITICAL SECTION
close(LASTIDFILE);

print "OK"; 
```

这里是 apc.js 的函数

```
function AJAXPerlChat() 
{
    // Config params
    this.cgiDir = "/cgi-bin/apc/";  // Path to AJAX Perl Chat CGIs
    this.documentDir = "/apc/";     // Path to AJAX Perl Chat JSs & HTMLs
    ///////////////////////////

    this.ajax = false;
    this.chatFrame = null;

    this.lastMsgId = 0;
    this.failedRequests = 0;
    this.timeoutRequests = 0;

    this.stick = true;
    this.started = false;   
    this.resetted = false;

    this.nickInput = null;
    this.textInput = null;
    this.adminLink = null;

    this.refreshAJAXObj = null;
    this.submitAJAXObj = null;
}

AJAXPerlChat.prototype.InstallAJAXObjects = function()
{
    var self = this;

    // The AJAX Objects
    this.refreshAJAXObj = new AJAXObj();
    this.submitAJAXObj = new AJAXObj();

    // Data receive callback for refresh request
    this.refreshAJAXObj.onReceiveResponse = function(status,statusText,responseText)
    {
        switch(status)
        {
            case 200:
                self.failedRequests = 0;
                self.timoeoutRequests = 0;
                if(responseText == 'RESET')
                {
                    self.Reset();
                    break;
                }
                else self.ReceiveChatData(responseText);
                break;
            default:
                // We had some troubles
                self.HandleFailedRequest();             
                break;
        }       
    }

    // Timeout callback for refresh request
    this.refreshAJAXObj.onRequestTimeout = function()
    {
        // We had timeout
        self.refreshAJAXObj.abort();
        self.HandleTimeoutRequest();
    }
    if(this.refreshAJAXObj.CreateRequest())
        this.ajax = true;
    else
        return;

    // Data receive callback for submit request
    this.submitAJAXObj.onReceiveResponse = function(status,statusText,responseText)
    {
        self.nickInput.disabled = false;
        self.textInput.disabled = false;

        if(status != 200)
        {
            // We had some troubles
            self.HandleFailedRequest();
        }
        else
        {
            var splitresponse = responseText.split("|");
            switch(splitresponse[0])
            {
                case "TEXTSIZE":
                    self.ReportError('Testo troppo lungo (o nullo)',4000);
                    break;
                case "USERSIZE":
                    self.ReportError('Nickname troppo lungo (o nullo)',4000);
                    break;
                case "HTMLUSER":
                    self.ReportError('Non &egrave; ammesso codice HTML nel nickname: &quot;' + htmlentities(splitresponse[1],'ENT_NOQUOTES') + '&quot;',4000);
                    break;
                case "HTMLTEXT":
                    self.ReportError('Non &egrave; ammesso codice HTML nel testo: &quot;' + htmlentities(splitresponse[1],'ENT_NOQUOTES') + '&quot;',4000);
                    break;
                case "BADUSER":
                    self.ReportError('Testo non ammesso nel nickname: &quot;' + htmlentities(splitresponse[1],'ENT_NOQUOTES') + '&quot;',4000);
                    break;
                case "BADTEXT":
                    self.ReportError('Testo non ammesso nel messaggio: &quot;' + htmlentities(splitresponse[1],'ENT_NOQUOTES') + '&quot;',4000);
                    break;
                case "OK":
                    self.textInput.value = "";
                    break;
            }
            // SEEMS NOT WORKING IN OPERA 9 AND IN FF3 the cursor caret hides if we had an error to report but the input focuses correctly
            self.textInput.focus();
        }
    }

    // Timeout callback for submit request
    this.submitAJAXObj.onRequestTimeout = function()
    {
        // We had timeout
        self.submitAJAXObj.abort();
        self.HandleFailedRequest();
    }

    this.submitAJAXObj.onRequestAborted = function()
    {
        // Unlock controls to allow new submit
        if( self.nickInput != undefined )
            self.nickInput.disabled = false;
        if( self.nickInput != undefined )
            self.textInput.disabled = false;
    }

    if(this.submitAJAXObj.CreateRequest())
        this.ajax = true;
    else
        return;
}

// This function can be overriden to install different handlers or to use different objects
AJAXPerlChat.prototype.InstallControls = function()
{
    var self = this;

    this.chatFrame = document.getElementById("apc_chatframe");  
    this.chatFrame.onscroll = function(event) 
    { 
        if(self.chatFrame.scrollTop == self.chatFrame.scrollHeight - self.chatFrame.clientHeight)
            self.stick = true;
        else
            self.stick = false;
    }

    // Install handlers for chat controls
    this.nickInput = document.getElementById("apc_nick");
    this.textInput = document.getElementById("apc_text");
    this.adminLink = document.getElementById("apc_adminlink");

    this.nickInput.disabled = true;
    this.textInput.disabled = true;

    this.nickInput.onfocus =    function(event) { if(self.nickInput.value == 'Nickname') self.nickInput.value = ''; }
    this.nickInput.onblur =     function(event) { if(self.nickInput.value == '') self.nickInput.value = 'Nickname'; }
    this.nickInput.onkeydown =  function(event) { if(event == undefined) event = window.event; if(event.keyCode && event.keyCode==13) self.textInput.focus(); }

    this.textInput.onkeydown =  function(event) { if(event == undefined) event = window.event; if(event.keyCode && event.keyCode==13) self.Submit(); }

    this.adminLink.onclick = function(event)
    {
        open(self.documentDir + 'admin.html','AjaxPerlChatADMIN','width=620,height=600,status=yes,resizable=yes');
    }

    this.errorDiv = document.getElementById("apc_errordiv");
    this.errorDiv.style.display = "none";

}

AJAXPerlChat.prototype.Start = function()
{
    var self = this;
    this.interval = setInterval(function(){self.Refresh();},1000);
    this.started = true;

    if( this.nickInput != undefined )
        this.nickInput.disabled = false;
    if( this.textInput != undefined )
        this.textInput.disabled = false;
}

AJAXPerlChat.prototype.Stop = function()
{
    if(this.interval)
        clearInterval(this.interval);
    if(this.overloadTimer)
        clearTimeout(this.overloadTimer);
    this.started = false;

    if( this.nickInput != undefined )
        this.nickInput.disabled = true;
    if( this.textInput != undefined )
        this.textInput.disabled = true;
}

AJAXPerlChat.prototype.Overload = function()
{
    var self = this;
    this.Stop();
    this.ReportError('La chat &egrave; temporaneamente fuori uso. Attendere 10 secondi',10000);

    this.overloadTimer = setTimeout(function(){ self.timeoutRequests = 0; self.Start();},10000);
}

AJAXPerlChat.prototype.Disconnection = function()
{
    var self = this;
    this.Stop();
    this.ReportError('La chat &egrave; temporaneamente fuori uso. Attendere 30 secondi',30000);

    this.overloadTimer = setTimeout(function(){ self.Reset(); self.Start();},30000);
}

AJAXPerlChat.prototype.Refresh = function()
{
    if(!this.ajax || !this.started) return;
    this.refreshAJAXObj.SendRequest(this.cgiDir + "refresh.cgi?lid=" + this.lastMsgId,null,950,false);
}

AJAXPerlChat.prototype.Reset = function()
{
    this.resetted = true;
    this.lastMsgId = 0;
    this.failedRequests = 0;
    this.timeoutRequests = 0;
}

AJAXPerlChat.prototype.ReceiveChatData = function(receivedText)
{
    // Here we format the data
    var lines = receivedText.split('\n');
    var output = "";

    for(var i = 0; i<lines.length;i++)
    {
        var elements = lines[i].split('|');
        if(elements.length < 5) continue;
        if(elements.length < 6) elements[5] = "";
        //0:MSGID 1:IP 2:DATE 3:TIME 4:NICK 5:MESSAGE
        elements[5] = htmlentities(elements[5],'ENT_NOQUOTES');
        output += '<div class="apc_chatentrydiv"><table><tr><td class="apc_littledate">' + elements[2] + '<br />' + elements[3] + '</td><td class="apc_chatentry"><span class = "apc_chatentrynick">' + elements[4] + ':</span> <span class = "apc_chatentrytext">' + elements[5] + '</span></td></tr></table></div>';
        this.lastMsgId = elements[0];
    }
    if(this.resetted)
    {
        this.resetted = false;
        this.ClearChatData();
    }
    this.PushChatData(output);
}

AJAXPerlChat.prototype.PushChatData = function(formatted)
{
    this.chatFrame.innerHTML += formatted;
    if(this.chatFrame.scrollHeight > this.chatFrame.clientHeight && this.stick)
        this.chatFrame.scrollTop = this.chatFrame.scrollHeight - this.chatFrame.clientHeight;
}

AJAXPerlChat.prototype.ClearChatData = function()
{
    this.chatFrame.innerHTML = "";
}

AJAXPerlChat.prototype.ReportError = function(errorstring,timer)
{
    var self = this;

    if(this.errorDivTimer)
        clearTimeout(this.errorDivTimer);
    this.errorDiv.style.display = "";
    this.errorDiv.innerHTML = errorstring;
    this.errorDivTimer = setTimeout(function(){ self.errorDiv.style.display = "none";}, timer);
}

AJAXPerlChat.prototype.Submit = function()
{
    if(!this.ajax) return;
    if(!this.started) return;

    username = encodeURIComponent(this.nickInput.value);
    usertext = encodeURIComponent(this.textInput.value);

    this.submitAJAXObj.SendRequest(this.cgiDir + "incoming.cgi?user=" + username + "&text=" + usertext,null,1500,false);

    if( this.nickInput != undefined )
        this.nickInput.disabled = true;
    if( this.textInput != undefined )
        this.textInput.disabled = true;
}

AJAXPerlChat.prototype.HandleFailedRequest = function()
{       
    this.failedRequests ++;
    if(this.failedRequests > 5) this.Disconnection();
}

AJAXPerlChat.prototype.HandleTimeoutRequest = function()
{       
    this.timeoutRequests ++;
    if(this.timeoutRequests > 5) this.Overload();
}

function htmlentities (string, quote_style) {
    // http://kevin.vanzonneveld.net
    // +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: nobbler
    // +    tweaked by: Jack
    // +   bugfixed by: Onno Marsman
    // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // -    depends on: get_html_translation_table
    // *     example 1: htmlentities('Kevin & van Zonneveld');
    // *     returns 1: 'Kevin &amp; van Zonneveld'

    var histogram = {}, symbol = '', tmp_str = '', entity = '';
    tmp_str = string.toString();

    if (false === (histogram = get_html_translation_table('HTML_ENTITIES', quote_style))) {
        return false;
    }

    for (symbol in histogram) {
        entity = histogram[symbol];
        tmp_str = tmp_str.split(symbol).join(entity);
    }

    return tmp_str;
}

function get_html_translation_table(table, quote_style) {
    // http://kevin.vanzonneveld.net
    // +   original by: Philip Peterson
    // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: noname
    // +   bugfixed by: Alex
    // +   bugfixed by: Marco
    // %          note: It has been decided that we're not going to add global
    // %          note: dependencies to php.js. Meaning the constants are not
    // %          note: real constants, but strings instead. integers are also supported if someone
    // %          note: chooses to create the constants themselves.
    // %          note: Table from http://www.the-art-of-web.com/html/character-codes/
    // *     example 1: get_html_translation_table('HTML_SPECIALCHARS');
    // *     returns 1: {'"': '&quot;', '&': '&amp;', '<': '&lt;', '>': '&gt;'}

    var entities = {}, histogram = {}, decimal = 0, symbol = '';
    var constMappingTable = {}, constMappingQuoteStyle = {};
    var useTable = {}, useQuoteStyle = {};

    useTable      = (table ? table.toUpperCase() : 'HTML_SPECIALCHARS');
    useQuoteStyle = (quote_style ? quote_style.toUpperCase() : 'ENT_COMPAT');

    // Translate arguments
    constMappingTable[0]      = 'HTML_SPECIALCHARS';
    constMappingTable[1]      = 'HTML_ENTITIES';
    constMappingQuoteStyle[0] = 'ENT_NOQUOTES';
    constMappingQuoteStyle[2] = 'ENT_COMPAT';
    constMappingQuoteStyle[3] = 'ENT_QUOTES';

    // Map numbers to strings for compatibilty with PHP constants
    if (!isNaN(useTable)) {
        useTable = constMappingTable[useTable];
    }
    if (!isNaN(useQuoteStyle)) {
        useQuoteStyle = constMappingQuoteStyle[useQuoteStyle];
    }

    if (useQuoteStyle != 'ENT_NOQUOTES') {
        entities['34'] = '&quot;';
    }

    if (useQuoteStyle == 'ENT_QUOTES') {
        entities['39'] = '&#039;';
    }

    if (useTable == 'HTML_SPECIALCHARS') {
        // ascii decimals for better compatibility
        entities['38'] = '&amp;';
        entities['60'] = '&lt;';
        entities['62'] = '&gt;';
    } else if (useTable == 'HTML_ENTITIES') {
        // ascii decimals for better compatibility
      entities['38']  = '&amp;';
      entities['60']  = '&lt;';
      entities['62']  = '&gt;';
      entities['160'] = '&nbsp;';
      entities['161'] = '&iexcl;';
      entities['162'] = '&cent;';
      entities['163'] = '&pound;';
      entities['164'] = '&curren;';
      entities['165'] = '&yen;';
      entities['166'] = '&brvbar;';
      entities['167'] = '&sect;';
      entities['168'] = '&uml;';
      entities['169'] = '&copy;';
      entities['170'] = '&ordf;';
      entities['171'] = '&laquo;';
      entities['172'] = '&not;';
      entities['173'] = '&shy;';
      entities['174'] = '&reg;';
      entities['175'] = '&macr;';
      entities['176'] = '&deg;';
      entities['177'] = '&plusmn;';
      entities['178'] = '&sup2;';
      entities['179'] = '&sup3;';
      entities['180'] = '&acute;';
      entities['181'] = '&micro;';
      entities['182'] = '&para;';
      entities['183'] = '&middot;';
      entities['184'] = '&cedil;';
      entities['185'] = '&sup1;';
      entities['186'] = '&ordm;';
      entities['187'] = '&raquo;';
      entities['188'] = '&frac14;';
      entities['189'] = '&frac12;';
      entities['190'] = '&frac34;';
      entities['191'] = '&iquest;';
      entities['192'] = '&Agrave;';
      entities['193'] = '&Aacute;';
      entities['194'] = '&Acirc;';
      entities['195'] = '&Atilde;';
      entities['196'] = '&Auml;';
      entities['197'] = '&Aring;';
      entities['198'] = '&AElig;';
      entities['199'] = '&Ccedil;';
      entities['200'] = '&Egrave;';
      entities['201'] = '&Eacute;';
      entities['202'] = '&Ecirc;';
      entities['203'] = '&Euml;';
      entities['204'] = '&Igrave;';
      entities['205'] = '&Iacute;';
      entities['206'] = '&Icirc;';
      entities['207'] = '&Iuml;';
      entities['208'] = '&ETH;';
      entities['209'] = '&Ntilde;';
      entities['210'] = '&Ograve;';
      entities['211'] = '&Oacute;';
      entities['212'] = '&Ocirc;';
      entities['213'] = '&Otilde;';
      entities['214'] = '&Ouml;';
      entities['215'] = '&times;';
      entities['216'] = '&Oslash;';
      entities['217'] = '&Ugrave;';
      entities['218'] = '&Uacute;';
      entities['219'] = '&Ucirc;';
      entities['220'] = '&Uuml;';
      entities['221'] = '&Yacute;';
      entities['222'] = '&THORN;';
      entities['223'] = '&szlig;';
      entities['224'] = '&agrave;';
      entities['225'] = '&aacute;';
      entities['226'] = '&acirc;';
      entities['227'] = '&atilde;';
      entities['228'] = '&auml;';
      entities['229'] = '&aring;';
      entities['230'] = '&aelig;';
      entities['231'] = '&ccedil;';
      entities['232'] = '&egrave;';
      entities['233'] = '&eacute;';
      entities['234'] = '&ecirc;';
      entities['235'] = '&euml;';
      entities['236'] = '&igrave;';
      entities['237'] = '&iacute;';
      entities['238'] = '&icirc;';
      entities['239'] = '&iuml;';
      entities['240'] = '&eth;';
      entities['241'] = '&ntilde;';
      entities['242'] = '&ograve;';
      entities['243'] = '&oacute;';
      entities['244'] = '&ocirc;';
      entities['245'] = '&otilde;';
      entities['246'] = '&ouml;';
      entities['247'] = '&divide;';
      entities['248'] = '&oslash;';
      entities['249'] = '&ugrave;';
      entities['250'] = '&uacute;';
      entities['251'] = '&ucirc;';
      entities['252'] = '&uuml;';
      entities['253'] = '&yacute;';
      entities['254'] = '&thorn;';
      entities['255'] = '&yuml;';
    } else {
        throw Error("Table: "+useTable+' not supported');
        return false;
    }

    // ascii decimals to real symbols
    for (decimal in entities) {
        symbol = String.fromCharCode(decimal);
        histogram[symbol] = entities[decimal];
    }

    return histogram;
} 
```

我已经向incoming.cgi 添加了一个提交按钮，以使用参数文本和用户发送

```
 <input type="submit" value=" POST " name="apc_text"> 
```

当我尝试通过按钮（名称和文本）发送它失败并且它（默认情况下）刷新整个页面，这需要很长时间才能响应，我试图使提交按钮仅重新加载内部框架

我怎么了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:20:08.580

我承认我浏览了您的代码，没有扫描它，但我注意到您正在禁用文本输入，并在其上挂起一个按键事件。

您可能还需要一个单击事件处理程序，并且您可能希望从处理程序返回 false 以便表单不会提交到服务器。

# java - 无法远程启动 WebLogic 进行调试

> ID：13960258
> 
> 赞同：6
> 
> 时间：2012-12-19T20:01:54.793
> 
> 标签：java, eclipse, weblogic, remote-debugging

我使用以下选项设置我的远程 WebLogic 服务器进行调试：

```
-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=${DEBUG_PORT},server=y,suspend=n -Djava.compiler=NONE" 
```

我在服务器上启动了 WebLogic，发现它正在 8453 上监听 dt_socket。我在本地 Eclipse 上添加了远程服务器并测试了连接。我还看到服务器已启动，我可以查看详细信息。但是，我无法在 DEBUG 中重新启动。我还在服务器上停止了 WebLogic，现在在 Eclipse 中我看到它已停止，但我无法启动它（调试和启动的图标显示为灰色）。当我在 Eclipse 中设置远程 Java 应用程序时，我确实检查了“允许终止远程 VM”。

在停止服务器之前，调试图标没有被禁用，当我点击它时，我收到了这条消息：

```
Cannot attach to remote server.
Please make sure the server myserver.com is running and listening for transport dt_socket at address: 8453
Failed to connect to remote VM. Connection refused.
Connection refused: connect 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-17T12:22:39.193

修改以下脚本，而不是使用 java 启动选项：

setDomainEnv.sh -> 确保设置了 DEBUG_PORT 即。8453

startWebLogic.sh -> 设置 PRODUCTION_MODE=false 并设置 debugFlag=true

重新启动服务器，远程调试应该在端口 8453 上工作。

# css - 模态框的对齐

> ID：13960261
> 
> 赞同：2
> 
> 时间：2012-12-19T20:02:16.553
> 
> 标签：css, alignment

我正在尝试对齐页面中心的模式框（在本例中为确认框）。所以我将主容器的位置设置为相对位置，然后使用以下**CSS**代码定位模态框的 div 元素：

```
.confirmBox{
    top:25%;
    left:25%;
} 
```

我已经调整了**顶部**和**左侧**属性的值。这在较低的缩放比例下效果很好，但是当我放大该框时，它不会保留在页面的中心。如何使用 CSS 解决这个问题？

原始代码实际上很大，我想不出这种情况的实例。我仍然在考虑将带有 class="confirmBox" 的 div 元素作为 confirmBox 的代码并附加小提琴[http://jsfiddle.net/W6ATN/47/](http://jsfiddle.net/W6ATN/47/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:12:30.387

可以使用 50% 的 left 和 top 位置，然后减去一半的宽度和高度来弥补元素的大小：

```
position:absolute;
top:50%;
height: <your value>px;
margin-top: (negative value of your height, divided by 2);
width:<your value>px;
left:50%;
margin-left: (negative value of your width, divided by 2); 
```

我认为这种方式更容易理解。如果元素的宽度是 40%（它的容器），那么它应该向左 30% 以同样居中：

`|-----30%-----|-------40%--------|-----30%-----|`

其中所有 == 100%

**或者**

您可以使用 % 宽度和 % 高度，并使用简单的数学计算出左侧和顶部的位置：

```
position:absolute;
height:40%;
width:40%;
left:30%; // (100 - width) divided by 2
top:30%; // (100 - height) divided by 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T15:16:25.173

```
// Slightly modified custom css with all due credit to it's previous owner  
//
//           @@ Cat...

.vertical-align-center {

left: 0%; // <<<------ Align left and comfortably stretch across the screen
display: table-cell;
vertical-align: middle pointer-events: none;
} 
```

# c# - CustomValidator 消息不显示

> ID：13960264
> 
> 赞同：6
> 
> 时间：2012-12-19T20:02:28.437
> 
> 标签：c#, asp.net

我有一个 CustomValidator 并定义了它的所有可能参数：

```
<asp:CustomValidator ID="custom" runat="server" Text="*" ErrorMessage="This email address is already registered" ControlToValidate="txtEmail" OnServerValidate="isExist" Display="None" ValidationGroup="valRegister"></asp:CustomValidator> 
```

PS：我有同一个文本框的RequiredFieldValidator，我不想检查空值。

以下是表单的其他对象：

```
<div class="row"><asp:Label runat="server" Text="Email" AssociatedControlID="txtEmail"></asp:Label><asp:RequiredFieldValidator runat="server" ErrorMessage="Please enter your email" Text="*" ControlToValidate="txtEmail"></asp:RequiredFieldValidator><asp:TextBox ID="txtEmail" runat="server" CssClass="inpBox"></asp:TextBox></div>

<asp:Button runat="server" Text="Register" CssClass="btn" OnClick="register_member" CausesValidation="true" ValidationGroup="valRegister" />

<asp:ValidationSummary ID="validationSummary" runat="server" ShowMessageBox="true" ShowSummary="false" ValidationGroup="valRegister" /> 
```

* * *

```
protected void isExist(object sender, ServerValidateEventArgs args){
if (cre.member.isExist(args.Value)){
    args.IsValid = false;
} else {
    args.IsValid = true;
} 
```

}

当我把一个已经存在于数据库表中的电子邮件 * 出现在表单上时，但没有显示错误消息。我尝试了自定义错误的所有显示选项，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:14:10.883

我完全按照您的问题获取了代码。

更改`Display="None"`为`Display="Dynamic"`导致`asp:CustomValidator`星号出现。

更改`ShowSummary="false"`为`ShowSummary="true"`in`asp:ValidationSummary`会导致错误消息出现在摘要中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T03:16:34.477

如果服务器没有**手动**`Display`处理验证，尤其是在使用. 即使 a有或没有 a也无济于事。`"Dynamic"`**`<asp:CustomValidator``ValidationGroup``ValidationSummary`**

 **在允许用户退出表单/gridview/etc**之前**，始终在服务器上强制进行验证。

IE

```
 ...your form here...
             <tr>
                <td colspan="3" style="text-align: center" valign="top">
                    <asp:Button ID="ButtonSubmit" runat="server" Text="Submit" OnClick="Submit_Click" CausesValidation="true"  />
                    <asp:Button ID="ButtonCancel" runat="server" Text="Cancel" OnClick="Cancel_Click" CausesValidation="false"  />
                </td>
            </tr>
        </table>
    </asp:Panel>

...
    protected void Submit_Click(object sender, EventArgs e)
    {
        Page.Validate();
        if (Page.IsValid)
        {
           //processing done after a successful submit here!
        }
    } 
```

这`Page.Validate()`将强制验证控件检查并显示您的错误消息。**

# php - 脚本不工作 - 错误报告已打开但仍然出现白屏

> ID：13960268
> 
> 赞同：-1
> 
> 时间：2012-12-19T20:02:36.993
> 
> 标签：php, mysql

因此，我正在编写以下脚本，只是对表单数据的“简单”收集-将其弹出到数据库中，然后快乐的日子！出于某种原因，我只是得到一个空白页——尽管打开了错误报告——它让我发疯！- 有任何想法吗？非常感谢您的帮助。

```
<?php
error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

session_start();
//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: ../main');

    die();
}

    //! Checks if the user type is admin full

 if ($_SESSION['type'] === 'admin-full') 
    {

    $comp_name = $_POST['comp_name'];
    $comp_number = $_POST['comp_number'];
    $vat_number = $_POST['vat_number'];
    $add1 = $_POST['add1'];
    $add2 = $_POST['add2'];
    $city = $_POST['city'];
    $postcode = $_POST['postcode'];
    $branch_name = $_POST['branch_name'];
    $contact_name = $_POST['contact_name'];
    $contact_number = $_POST['contact_number'];

    //! Real_escape the form data

    $comp_name =        mysql_real_escape_string($comp_name);
    $comp_number =      mysql_real_escape_string($comp_number);
    $vat_number =       mysql_real_escape_string($vat_number);
    $add1 =             mysql_real_escape_string($add1);
    $add2 =             mysql_real_escape_string($add2);
    $city =             mysql_real_escape_string($city);
    $postcode =         mysql_real_escape_string($postcode);
    $branch_name =      mysql_real_escape_string($branch_name);
    $contact_name =     mysql_real_escape_string($contact_name);
    $contact_number=    mysql_real_escape_string($contact_number);

    //! MySQL Query

    require_once('../Connections/PropSuite.php');
    mysql_select_db($database_PropSuite, $PropSuite);

    $query = "INSERT INTO franchises 

    (comp_name, comp_number, vat_number, add1, add2, city, postcode, branch_name, contact_name, contact_number )

    VALUES 
    ('$comp_name', '$comp_number', '$vat_number', '$add1', '$add2', '$city', '$postcode', '$branch_name', '$contact_name', '$contact_number');";

    mysql_query($query) or die(mysql_error());

        mysql_close();

    header(location:'franchise-new.php?success');

}

else {
    echo('You need to be an admin user to do that!, If you are seeing this message in error, please contact the system administrator.');
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:08:45.143

在你成功的 MySQL 命令结束时，你有这个命令：

```
header(location:'franchise-new.php?success'); 
```

这应该完全引用。否则不会加载任何内容，但您不会被重定向。

```
header('location: franchise-new.php?success'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:06:11.017

通常 Location 标头应使用绝对 URI（即`http://example.com/somewhere/main`）。否则你确定这是：

```
header('Location: ../main'); 
```

指向有效文件？尝试在标题调用后添加 echo 语句以缩小您所在的代码分支。

# c - CentOS 版本之间的 glibc 差异

> ID：13960270
> 
> 赞同：2
> 
> 时间：2012-12-19T20:02:41.823
> 
> 标签：c, linux, centos, glibc, libc

CentOS 似乎在每个版本中都捆绑了一个新版本的 glibc 库 RPM。

*   6.0 有 glibc-2.12-1.7.el6.x86_64.rpm

*   6.1 有 glibc-2.12-1.25.el6.x86_64.rpm

*   6.2 有 glibc-2.12-1.47.el6.x86_64.rpm

*   6.3 有 glibc-2.12-1.80.el6_3.5.x86_64

这些 RPM 中的 glibc 版本之间有什么不同？我正在专门寻找 mallopt() 函数的实现，它允许我们配置 malloc() 使用的 arenas 数量。

mallopt(M_ARENA_MAX, 1) 在 6.0、6.1 和 6.2 中无效，但在 6.3 中有效，即使 CentOS 的所有版本似乎都具有相同版本的 GLibc - 2.12。

我的具体问题是：即使所有 CentOS 6.X 版本上的 glibc 报告相同的版本号 - 2.12 - mallopt(M_ARENA_MAX) 仅适用于 CentOS 6.3。无论如何要找出与 CentOS 版本捆绑的 glibc 版本的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:46:57.077

区别在于发布或安全补丁。

```
rpm -q --changelog glibc-2.12-1.80.el6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:10:00.283

这应该在 glibc 包的更新日志中描述。我有一段时间没有使用 CentOS，所以我无法为您指出正确的位置。

# c# - Razor 令牌重置密码不起作用

> ID：13960271
> 
> 赞同：0
> 
> 时间：2012-12-19T20:02:43.920
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, security, razor

我有一个 MVC3 Razor 网站。我正在关注这里的教程：

[http://www.thecodingguys.net/tutorials/asp/webpages-membership-forgot-password-and-reset-password](http://www.thecodingguys.net/tutorials/asp/webpages-membership-forgot-password-and-reset-password)

我已经能够生成令牌并成功发送电子邮件

然后，这封电子邮件让我通过如下链接进入重置密码视图：

~/Account/resetpassword?token=fujgFIo7k27c72-UTTJeGA2fujgFIo7k27c72-UTTJeGA2

现在，这是我的 HttpGet 方法

```
 [AllowAnonymous]
    [HttpGet]
    public ActionResult resetpassword()
    {
        ResetPasswordModel model = new ResetPasswordModel()
        {
            Password = String.Empty,
            ConfirmPassword = String.Empty,
            Token = String.Empty
        };
        return View(model);
    } 
```

它所做的只是传入模型的一个实例

我对 resetpassword.cshtml 的看法

```
@model RazorARPP.Models.ResetPasswordModel
@{    
    var token = Request["token"];
    Model.Token = token;
}

<form action="" method="post" enctype="multipart/form-data" id="MyForm">
@Html.ValidationSummary(true)
<fieldset>
<legend>Reset Password</legend>
@Html.HiddenFor(m => m.Token)
@Html.LabelFor(m => m.Password)
@Html.PasswordFor(m => m.Password)
@Html.ValidationMessage("password")

<br/>

@Html.LabelFor(m => m.ConfirmPassword)
@Html.PasswordFor(m => m.ConfirmPassword)
@Html.ValidationMessage("confirmPassword")

<input type="submit"/>

</fieldset>
</form> 
```

现在我的 HttpPost 方法

```
[AllowAnonymous]
    [HttpPost]
    public ActionResult resetpassword(ResetPasswordModel model)
    {
        if (model.Password == model.ConfirmPassword)
        {
            WebSecurity.ResetPassword(model.Token, model.Password);
        }
        return RedirectToAction("Login");
    } 
```

它执行得很好，但重置密码不起作用。我确保该行正在调试器中运行。关于我做错了什么的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:12:59.917

您如何生成重置令牌？您是否使用正确的用户名？

```
WebSecurity.GeneratePasswordResetToken(model.Email) 
```

在生成令牌并立即将其传递给`WebSecurity.ResetPassword`. 我猜`resetpassword`是没有得到你期望的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:27:06.060

问题在于电子邮件在发送重复的令牌时。

```
 var confirmationUrl = hostUrl + VirtualPathUtility.ToAbsolute("~/Account/resetpassword?token=" + token +  HttpUtility.HtmlEncode(token)); 
```

应该是这样的

```
 var confirmationUrl = hostUrl + VirtualPathUtility.ToAbsolute("~/Account/resetpassword?token=" +  HttpUtility.HtmlEncode(token)); 
```

现在一切都应该工作了！

看你自己的网址

~/Account/resetpassword?token=fujgFIo7k27c72-UTTJeGA2fujgFIo7k27c72-UTTJeGA2

令牌是重复的，这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T01:57:33.210

如果输入的密码不符合密码规则，此调用将失败（返回 false）。检查您的会员资格提供商的配置文件中的哪些设置。

同样取决于会员资格提供商，如果帐户被锁定，它可能会返回 false - 但我现在无法验证。

# php - 错误解析错误：语法错误，意外的 T_STRING，期望 T_CONSTANT_ENCAPSED_STRING

> ID：13960277
> 
> 赞同：22
> 
> 时间：2012-12-19T20:03:14.157
> 
> 标签：php, wordpress

我收到此错误：

> “解析错误：语法错误，意外的 T_STRING，在第 14 行的 [wordpress dir]/wp-content/themes/[my-theme]/functions.php 中需要 T_CONSTANT_ENCAPSED_STRING 或 '('”

第 14 行只是一个简单的`use`命令...

第 13-15 行：

```
add_action('headway_setup_child_theme', array('HeadwaySchematic', 'init'), 1);
use mfbcaptheme\mobilebrowsertheme;
require_once 'mobilebrowsertheme.php'; 
```

这是在客户的网站上，它在我的测试网站上工作得很好......不确定是什么导致了这个错误。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-19T20:05:49.213

确保它们运行的​​是 PHP 5.3 或更高版本。如果他们运行的是早期版本，他们将不支持命名空间。

# wpf - WPF 绑定到 Xml；如何提取选定的 XmlElement 并转换为 Object

> ID：13960278
> 
> 赞同：2
> 
> 时间：2012-12-19T20:03:23.943
> 
> 标签：wpf, xml, serialization, combobox

我有一个绑定到 Xml 文件和 XmlDataProvider 的 WPF ComboBox

```
<ComboBox Canvas.Left="980"
          Canvas.Top="16"
          DisplayMemberPath="Name"
          FontSize="45"
          Height="76"
          SelectionChanged="comboBox1_SelectionChanged"
          Padding="10"
          ItemsSource="{Binding Source={StaticResource Sites}, XPath=Site}"
          Name="comboBox1"
          Style="{DynamicResource InfoKioskLargeStyledDropDown}"
          Width="600" /> 
```

我的 XML 看起来像这样：

```
<Site>
    <Name>Campus Pride</Name>    
    <Url>CampusPride</Url>
    <SlideCount>10</SlideCount>
</Site> 
```

然后我有一个匹配我的 XML 的对象：

```
public class Site
{
   public string Name { get; set; }
   public string Url { get; set; }
   public int SlideCount { get; set; }
} 
```

我想要做的是改变 ComboBox 选择，检索 SelectedItem 中的对象并将其转换为 Site 类型的对象。问题是combobox1.SelectedItem 属性是一个XmlElement。有没有一种快速的方法可以将我的 XmlElement 转换为 Site 对象，或者我是否必须调用序列化程序并手动执行？

# ruby-on-rails - Rails 3 中的 Ice_cube gem 和 find 方法

> ID：13960279
> 
> 赞同：0
> 
> 时间：2012-12-19T20:03:27.563
> 
> 标签：ruby-on-rails, pagination, find, ice-cube

我正在使用 Ice_cube gem 生成事件，看起来不错。实现 recurrency 的模型称为 "Job" ，现在我有一个工作列表，使用分页。我需要使用下一个事件对列表中的作业进行排序。问题是我正在使用 find 方法并将分页以获得工作。所以我的问题是我可以使用下一个事件（如参数）对作业进行排序吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T09:04:17.170

由于下一个事件（或*发生*在**ice_cube**术语中）不是存储字段，因此您必须在 ruby​​ 代码中对它们进行排序。

一种方法是：

```
sorted_jobs = Jobs.all.sort_by&:next_occurrence 
```

然后`sorted_jobs`随心所欲地使用。

# php - Codeigniter mod_rewrite：删除 URL 中的子文件夹

> ID：13960285
> 
> 赞同：1
> 
> 时间：2012-12-19T20:03:55.263
> 
> 标签：php, .htaccess, codeigniter

我使用 CI 并得到这样的 URL：www.example.com/product/id/5

使用此 .htaccess 文件删除 index.php：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|favicon\.ico|img|js|robots\.txt|css)
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我现在如何扩展 .htaccess 文件以摆脱 URL 中的“/id/”？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:08:49.457

您可以使用路由：

```
$route["product/(:num)"] = "product/id/$1"; 
```

[http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

但如果你坚持，这应该工作：

```
RewriteRule ^product/([0-9]) http://example.com/product/id/$1 
```

# javascript - page_action 在开发者模式下不起作用

> ID：13960288
> 
> 赞同：0
> 
> 时间：2012-12-19T20:04:02.097
> 
> 标签：javascript, html, google-chrome-extension, manifest, google-chrome-devtools

问题很简单：如果为 chrome 做扩展并使用

```
chrome.pageAction 
```

将图标放在地址栏中，此扩展在开发模式下不起作用。为什么不 ？

背景.html

```
<script language="javascript">

chrome.pageAction.onClicked.addListener(function (tab) {
    chrome.tabs.executeScript(tab.id, {
        file: "jquery.js"
    }, function () {
        chrome.tabs.executeScript(tab.id, {
            code: '$[CODE JQUERY];'
        });
    });
});

chrome.tabs.onUpdated.addListener(function (tabId, changeInfo, tab) {
    if(tab.url.indexOf("facebook.com") != -1) {
        chrome.pageAction.show(tabId);
    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:46:29.373

为 Konrad Dzwinel 提供评论，您不能在 HTML 中使用内联代码。将其移至外部 javascript，然后重试。

顺便说一句，Page Actions 确实在开发模式下工作，我一直都在使用它们！这是我的 Background.js 中的一个示例，它检查更新的选项卡上的页面 URL；如果 URL 是我要查找的内容，我会显示页面操作。

```
/**
* Listener for Displaying the Extension Page Action when the Tab is updated.
* @private
* @event displayPageAction
* @param {Number} tabId The tabId given by the tabs listener to know which tab was updated.
* @param {Object} changeInfo The current status of the tab.
* @param {Object} tab The metadata of the tab.
**/
var displayPageAction = function (tabId, changeInfo, tab) {
var regexAIESEC = new RegExp(/http:\/\/www.myaiesec.net\//); // My page URL
var match = regexAIESEC.exec(tab.url); 
// We only display the Page Action if we are inside a MyAIESEC Page AND it finished loading.
if(match && changeInfo.status == 'complete') {
   chrome.pageAction.show(tab.id);     
}
}; 
```

您通过选项卡 onUpdated 偶数处理程序回调此代码。

```
chrome.tabs.onUpdated.addListener(displayPageAction); 
```

# android - 自定义 SeekBar 中的 NoSuchMethodException

> ID：13960296
> 
> 赞同：0
> 
> 时间：2012-12-19T20:04:29.067
> 
> 标签：android, android-logcat

我创建了 SeekBar 类的扩展：

```
package com.simplemathgame;

import android.content.Context;
import android.widget.SeekBar;
import android.widget.TextView;

public class SeekBarPlus extends SeekBar {
    private TextView numberOfDrills;

    public SeekBarPlus(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        // TODO Auto-generated method stub
        numberOfDrills.setText(progress); 
    }

    public void setTextView(TextView textView){
        numberOfDrills = textView;
    }

} 
```

这是xml布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent"
    android:background="#000044">
    <TableRow 
        android:layout_marginTop="10dp"
        android:gravity="center_vertical" >
        <TextView 
            android:textColor="#FFFFFFFF"
            android:textSize="16sp"
            android:textStyle="bold"
            android:text="Addition Drills:"/>
    </TableRow>
    <TableRow
        android:layout_marginTop="5dp"
         android:gravity="center_vertical" >

        <com.simplemathgame.SeekBarPlus
            android:id="@+id/add_seek_bar"
            android:layout_width="20dp"
            android:max="10" 
            android:layout_weight="0.8"/>
        <TextView 
            android:id="@+id/add_drills_number" 
            android:textColor="#FFFFFFFF"
            android:textSize="16sp"
            android:textStyle="bold"
            android:layout_weight="0.2"
            android:gravity="center_horizontal"
            android:text="0"/>
    </TableRow>
</TableLayout> 
```

这是logCat：

```
12-19 19:52:48.457: D/dalvikvm(335): GC_EXTERNAL_ALLOC freed 46K, 53% free 2546K/5379K, external 1917K/2137K, paused 72ms
12-19 19:52:51.617: D/AndroidRuntime(335): Shutting down VM
12-19 19:52:51.617: W/dalvikvm(335): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-19 19:52:51.647: E/AndroidRuntime(335): FATAL EXCEPTION: main
12-19 19:52:51.647: E/AndroidRuntime(335): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.simplemathgame/com.simplemathgame.MainActivity}: android.view.InflateException: Binary XML file line #20: Error inflating class com.simplemathgame.SeekBarPlus
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-19 19:52:51.647: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
12-19 19:52:51.647: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
12-19 19:52:51.647: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-19 19:52:51.647: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-19 19:52:51.647: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method)
12-19 19:52:51.647: E/AndroidRuntime(335): Caused by: android.view.InflateException: Binary XML file line #20: Error inflating class com.simplemathgame.SeekBarPlus
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.createView(LayoutInflater.java:508)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-19 19:52:51.647: E/AndroidRuntime(335):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.Activity.setContentView(Activity.java:1657)
12-19 19:52:51.647: E/AndroidRuntime(335):  at com.simplemathgame.MainActivity.onCreate(MainActivity.java:16)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-19 19:52:51.647: E/AndroidRuntime(335):  ... 11 more
12-19 19:52:51.647: E/AndroidRuntime(335): Caused by: java.lang.NoSuchMethodException: SeekBarPlus(Context,AttributeSet)
12-19 19:52:51.647: E/AndroidRuntime(335):  at java.lang.Class.getMatchingConstructor(Class.java:643)
12-19 19:52:51.647: E/AndroidRuntime(335):  at java.lang.Class.getConstructor(Class.java:472)
12-19 19:52:51.647: E/AndroidRuntime(335):  at android.view.LayoutInflater.createView(LayoutInflater.java:480)
12-19 19:52:51.647: E/AndroidRuntime(335):  ... 22 more 
```

我看到扩展的 SeekBarPlus 类存在问题，但不知道为什么。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:07:04.950

您尚未在自定义视图类中指定完整的构造函数集。在您的特定情况下，`SeekBarPlus(Context,AttributeSet)`缺少构造函数。

自定义视图类需要有这 3 个构造函数：

```
public SeekBarPlus(Context context) {
    super(context);
}

public SeekBarPlus(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public SeekBarPlus(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
} 
```

如果您不需要它们，只需`super()`如上所示调用即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:08:23.037

您错过了实现 View 给出的另外两个 cstructors：

```
// Constructor that is called when inflating a view from XML.
View(Context context, AttributeSet attrs)

// Perform inflation from XML and apply a class-specific base style.
View(Context context, AttributeSet attrs, int defStyle) 
```

# arrays - 从数组中选择数据

> ID：13960298
> 
> 赞同：0
> 
> 时间：2012-12-19T20:04:33.887
> 
> 标签：arrays, matlab, selection, sampling

我想选择采样频率为 0.02 的数组中的数据，即 0、0.02、0.04 等。
我想从中提取数据，以便我的数据的采样频率为 0.3，即 0、0.3、0.6、0.9，等考虑到我可能必须从数组中选择 0.29 或 0.31 之间的数据，最好的方法是什么？

阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T13:31:43.270

这听起来更像是一个插值问题，而不是重采样。重采样必须通过合理的因素进行。在您的问题中，您希望估计未获取的数据。试试[interp1](http://www.mathworks.com/help/matlab/ref/interp1.html)

```
maxSample=(length(data)-1)*0.02;
y=interp1(0:0.02:maxSample,data,0:0.03:maxSample); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:17:16.640

`resample`假设您正在下采样 15 倍，您可以继续阅读并尝试一下：

```
y = resample(x, 1, 15); 
```

# iphone - 无需代码即可使用 iOS 模拟器，从 USB 闪存使用

> ID：13960299
> 
> 赞同：1
> 
> 时间：2012-12-19T20:04:36.397
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

我可以将我的 iOS 模拟器放在 USB 闪存上，然后从这个闪存或其他 Mac 上使用它吗？我把它从

```
Xcode/Contents/Developer/Platforms/iPhoneSimulator.platform
/Developer/Applications/Simulator iOS 
```

我尝试使用它，但不幸的是。我想我需要像图书馆这样的东西给他。我读到我可以在 iOS 文件夹中获取我的 .app，该文件夹中还有其他模拟器的应用程序，并且无需我的代码即可运行它。即使在我的 Mac 上，我也找不到带有模拟器应用程序的文件夹。在

```
...library/Application Support/ 
```

我没有文件夹 iOS 模拟器。在哪里可以找到运行在上面的应用程序的模拟器文件夹？我需要这一切，因为我必须在我的老师的 Mac 上展示我的项目，但它总是在除我的 Mac 之外的所有 Mac 上崩溃。那是我需要使用我的iOS模拟器，我想

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:14:17.503

您不能只使用您的模拟器并从 USB 闪存驱动器运行它。可能您可以在他们的 Mac 中安装 Xcode，然后从中复制应用程序文件夹`/Users/[username]/Library/Application Support/iPhone Simulator/6.0`并将其粘贴到他们的 Mac 中的同一文件夹中。应该有一个看起来像`0BE5QAF2-7F78-4C2B-BV5E-41212C635784`您需要复制的文件夹。检查里面，看看你是否可以找到一个带有你的项目名称的 .app 文件。之后，您可以在该 Mac 的模拟器上打开您的应用程序。您不需要代码即可在该模拟器中运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:37:06.333

不可能。就像他在上面所说的那样，唯一的解决方案是在另一台 Mac 上下载 xcode，然后将您的项目复制到那台计算机上......虽然有点浪费时间......

# c++ - 未定义的异常引用

> ID：13960300
> 
> 赞同：0
> 
> 时间：2012-12-19T20:04:38.050
> 
> 标签：c++

我对异常类有疑问...“对 GameProject::GamePlayerNullPointerException::~GamePlayerNullPointerException 的未定义引用”

上线：**throw GamePlayerNullPointerException();**

游戏.h

```
#ifndef GAME_H
#define GAME_H
#include <iostream>
#include "Player.h"
#include "Platform.h"
#include "Item.h"

#include <exception>
#include <stdexcept>
#include <string>

#define string std::string
#define ostream std::ostream
#define istream std::istream

namespace GameProject {

class Game
{
public:
    friend class Inner;
    Game();
    ~Game();
    void startNew();
    void quit();
    void pause();
    void resume();
    void update();
    void moveLeft();
    void moveRight();
    int getScore();
protected:
private:
    class Inner;
    Inner *i;

    Game(const Game& g);
};

class GameException : public std::exception{
    private:
        string error;
    public:
        GameException(const string& message ): error(message){};

        ~GameException()throw ();

        virtual const char* what() throw ();/*const{
            return error.c_str();
            throw ();
        }*/
};

class GameNullPointerException: public GameException{
    public:
        GameNullPointerException(const string & message)
            : GameException(message ) {};
        ~GameNullPointerException() throw ();
};
class GamePlayerNullPointerException: public GameNullPointerException{
    public:
        GamePlayerNullPointerException(const string & message = "Player not exist!")
            : GameNullPointerException( message )
        {}
        ~GamePlayerNullPointerException() throw ();
};
class GamePlatformNullPointerException: public GameNullPointerException{
    public:
        GamePlatformNullPointerException()
            : GameNullPointerException( "Platform not exist!" ){}
        ~GamePlatformNullPointerException() throw ();
};

class GamePlayerWrongPositionException: public GamePlayerNullPointerException{
    public:
        GamePlayerWrongPositionException(): GamePlayerNullPointerException( "Player off screen!!!" ){ }
        ~GamePlayerWrongPositionException() throw ();
};

 }
#undef string
#undef ostream
#undef istream
#endif // GAME_H 
```

游戏.cpp

```
void Game::startNew() {
if(i->pla==NULL)
    throw GamePlayerNullPointerException();
i->pla = new Player(20,20);
i->init();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:08:53.763

```
~GamePlayerNullPointerException() throw (); 
```

您已经声明了析构函数但没有定义它。将声明更改为`.h`文件中的定义：

```
~GamePlayerNullPointerException() throw () { } 
```

或者在`.cpp`文件中添加定义：

```
GamePlayerNullPointerException::~GamePlayerNullPointerException() throw ()
{
} 
```

* * *

或者，如果它不做任何事情，就摆脱它。如果您不提供，编译器将为您生成一个空的析构函数。

# java - String.replaceAll 奇怪的行为

> ID：13960302
> 
> 赞同：13
> 
> 时间：2012-12-19T20:04:55.850
> 
> 标签：java, regex, string

```
String s = "hi                  hello";
s = s.replaceAll("\\s*", " ");
System.out.println(s); 
```

我有上面的代码，但我无法弄清楚它为什么会产生

```
 h i  h e l l o 
```

而不是

```
 hi hello 
```

非常感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T20:06:47.107

使用`+`量词匹配 1 个或多个空格，而不是`*`：-

```
s = s.replaceAll("\\s+", " "); 
```

`\\s*`表示匹配 0 个或多个空格，并且会在每个字符之前匹配一个空字符并替换为一个空格。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T20:06:54.107

`*`匹配 0 个或多个空格，我想您想将其更改为`+`匹配 1 个或多个空格。

# actionscript-3 - 尽管 alpha 设置为 0，但 FXG 资产可见

> ID：13960303
> 
> 赞同：0
> 
> 时间：2012-12-19T20:04:55.603
> 
> 标签：actionscript-3, apache-flex, flex4.5, fxg, tweener

我在 Group 容器中有一个 FXG 图形资源。默认情况下它是不可见的。当我尝试淡入时，它第一次起作用并且淡入和淡出很好，但第二次和 90% 的时间之后它会立即显示（不淡入）然后淡入自身（如果那讲得通）。

我正在使用 Tweener，因此它可能是与 tweener 相关的问题，但我还有两个其他组件正在淡入淡出，它们确实淡入正确。

我猜 Tweener 在补间开始时拍摄每个对象的快照，并且 FXG 关闭按钮可见（但未应用 alpha），然后它从该图像淡入到最终图像。

MXML：

```
<s:Image id="image" 
         left="20" top="80" 
         width="620" height="300" 
         useHandCursor="true"
         buttonMode="true"
         backgroundColor="black"
         backgroundAlpha="1"
         click="handleClick(event)"/>

<fxg:RoundCloseButton id="closeImageButton" width="24" height="24" top="82" right="22" 
                      useHandCursor="true"
                      buttonMode="true"
                      click="handleClick(event)"/> 
```

代码：

```
image.alpha = 0;
image.visible = true;

closeImageButton.alpha = 0;
closeImageButton.visible = true;

imageExistsLabel.alpha = 0;
imageExistsLabel.visible = true;

Tweener.addTween([image, imageExistsLabel, closeImageButton], {alpha:1.0, time:0.25, transition:"easeOutExpo", delay:0.5}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:41:52.170

它似乎与延迟属性有关。如果我删除延迟，它会正确淡入。

```
Tweener.addTween([image, imageExistsLabel, closeImageButton], {alpha:1.0, time:0.25, transition:"easeOutExpo", delay:0}); 
```

# java - 如何让java使用最新版本的文件

> ID：13960304
> 
> 赞同：1
> 
> 时间：2012-12-19T20:05:04.573
> 
> 标签：java, eclipse

我有一个问题，我有一个程序可以编写和创建一个 .java 文件并将其放入我的包文件夹中，之后它从 .java 文件中获取信息并在其中使用它。（它使用我然后导入的方法创建一个新类）。问题是，如果在我使用 Eclipse 更新“自创建文件”之前它不会工作。有没有办法让我的主文件更新“自我创建的文件”。

抱歉，如果这是重复的。我只是在任何地方都找不到它。

我的代码：

```
package dk.Nicolai.Bonde;
import java.io.*;

public class main {

public String outputString ="Math.sqrt(25)" ;
static String outputPath ="src/output.txt";
/**
 * @param args
 * @throws UnsupportedEncodingException 
 * @throws FileNotFoundException 
 */
public static void main(String[] args) throws IOException{
        new main().doit(args);
    }

public void doit(String[] args) throws IOException{
    PrintWriter writer = new PrintWriter("src/dk/Nicolai/Bonde/calculate.java", "UTF-8");
        writer.println("package dk.Nicolai.Bonde;");
        writer.println("public class calculate{");
        writer.println("public void calc(){");
        writer.println("System.out.println("+outputString+");");
        writer.println("}");    
        writer.println("}");
        writer.flush();
        writer.close();

    calculate calcObj = new calculate();
    calcObj.calc();

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:16:54.787

您的主要错误是您希望它在运行时`.class`在保存后自动编译到文件中（每次按下 Ctrl+S 时，像 Eclipse 这样的理智 IDE 都会在幕后自动为您执行此操作）。因此这是不正确的。运行时需要自己编译[`JavaCompiler`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)，然后加载[`URLClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)。这个相关的问答中给出了一个具体的例子：[如何以编程方式编译和实例化 Java 类？](https://stackoverflow.com/questions/2946338/how-do-i-programmatically-compile-and-instantiate-a-java-class)

在具体示例中，您还会注意到您不能*只做*a`new calculate();`之后。类路径在运行时左右不会自动刷新。你需要做一个`Class#forName()`，通过 FQN 和`URLClassLoader`. 例如

```
Calculate calculate = (Calculate) Class.forName("com.example.Calculate", true, classLoader); 
```

您的另一个错误是您依赖磁盘文件系统的当前工作目录始终是 Eclipse 项目的源根文件夹。这并不稳健。在构建和分发应用程序时，此文件夹根本不存在。您应该改为将文件写入 IDE 项目结构之外的其他位置的固定/绝对文件夹。这也包含在上述答案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:12:54.027

你不能。您必须在 Eclipse 中手动更新资源。尽管您可以为 Eclipse 编写一个插件来运行您的文件并更新资源。

Eclipse 使用目录和文件来存储其资源，但不是文件系统的直接表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:15:08.397

您的代码无法工作，因为

*   **在 main 的编译时需要**计算。**您在运行时提供它。**
***   **calculate.java**不会编译，因此即使是其他动态加载类的技术也不起作用**

 **如果要在运行时构建类，请考虑使用反射 API**

# python - 将 2-D 数组列表转换为 3-D 数组，沿“快速”轴添加元素

> ID：13960307
> 
> 赞同：2
> 
> 时间：2012-12-19T20:05:14.850
> 
> 标签：python, numpy

我有一个二维 numpy 数组的列表。作为测试，请考虑以下列表：

```
lst = [np.arange(10).reshape(5,2)]*10 
```

现在我可以通过以下方式获取特定数据元素：

```
lst[k][j,i] 
```

我想将它转换为一个 numpy 数组，以便我可以索引它：

```
array[k,j,i] 
```

即，形状应该是`(10, 5, 2)`。

这似乎可行，但似乎完全没有必要：

```
z = np.empty((10,5,2))
for i,x in enumerate(z):
    x[:,:] = lst[i] 
```

这些不起作用：

```
np.hstack(lst)
np.vstack(lst)
np.dstack(lst)  #this is closest, but gives wrong shape (5, 2, 10) 
```

我想我可以将 a`np.dstack`与 a配对`np.rollaxis`，但同样，这似乎不太正确......

有没有用 numpy 做到这一点的好方法？

我看过[这个非常相关的帖子](https://stackoverflow.com/questions/12395420/combining-3-arrays-in-one-3d-array-in-numpy)，但我似乎无法解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:08:29.247

这应该只需调用数组构造函数即可工作，即`np.array(lst)`.

```
>>> l = [np.arange(10).reshape((5,2)) for i in range(10)]
>>> np.array(l).shape
(10, 5, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:08:06.263

你的意思是喜欢

```
>>> lst = [np.arange(10).reshape(5,2)]*10
>>> arr = np.array(lst)
>>> arr.shape
(10, 5, 2) 
```

?

# list - Haskell 列出重复元素

> ID：13960309
> 
> 赞同：0
> 
> 时间：2012-12-19T20:05:25.457
> 
> 标签：list, haskell

我正在尝试做一个函数告诉我，如果在元组列表中，如果元组的第一个元素在另一个元组中相同，则元组的其他元素也必须相等，如果不是，它返回`False`.

```
main> istup [(1,2,3,4,5),(1,2,3,4,5),(1,4,5,6,2),(4,2,1,5,6)]
>>> False
main> istup [(1,2,3,4,5),(1,2,3,4,5),(4,2,1,5,6),(4,2,1,5,6)]
>>> True 
```

这就是我所拥有的：

```
type Tuple = (a,b,c,d,e)

istup :: [Tuple] -> Bool
istup x = length (nub x) == length x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:18:28.857

只需将您的描述写成 Haskell 代码即可。这些是你的条件：

*   对于每一对元素，您都想检查一些条件
*   你定义条件
*   你写下“所有对”的含义：

这是生成的代码：

```
istup :: [(Int,Int,Int,Int,Int)] -> Bool
istup x = all ok (allPairs x)

ok t1 t2 = if fst5 t1 == fst5 t2 then t1 == t2 else True
    where fst5 (a,_,_,_,_) = a

allPairs x = [(a,b) | a <- x , b <- x] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:27:36.500

让我们将任务拆分为子任务。

1）我们需要将列表拆分为具有相同头部的元组列表，可以使用Data.List.groupBy来完成，它带有一个函数来确定是否将两个项目放在同一个子列表中：

```
 import Data.List
 import Data.Function (on)
 splitByHead = groupBy ((==) `on` fst5)    -- the function is same as (\a b -> fst5 a == fst5 b)
    where fst5 (a,_,_,_,_) = a 
```

2）然后我们需要检查子列表中的所有项目是否相等（可以通过查看不同项目列表的长度来完成，这是通过 获得的`nub`）：

```
 allEqual = (1 == ) . length . nub 
```

3）把它放在一起：

```
 import Data.List
 import Data.Function (on)

 istup = all ((1 == ) . length . nub) . groupBy ((==) `on` (\(a,_,_,_,_) -> a)) 
```

# android - 移除 Android PopupWindow 中的阴影

> ID：13960310
> 
> 赞同：6
> 
> 时间：2012-12-19T20:05:38.083
> 
> 标签：android, android-widget

我`PopupWindow`用一个简单`LinearLayout`的背景颜色创建了我的。上面有阴影`PopupWindow`。如何删除为`PopupWindow`. 我创建了`PopupWindow`以下内容：

```
 View view = LayoutInflater.from(getBaseContext()).inflate(R.layout.mylayout,null);
    pop = new PopupWindow(this);
    pop.setTouchable(false);
    pop.setHeight(200);
    pop.setWidth(200);
    pop.setContentView(view);
    pop.showAtLocation(parentview, 0, 50, 50); 
```

截屏：

![弹出阴影](../Images/d6ebe7df3b3654e669c28b5486d3a458.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T20:21:04.267

你有可能在那里遗漏了一些代码吗？我没有看到您正在将弹出添加到视图中。

无论如何，要移除阴影，您必须在 PopupWindow 中使用这行代码：

```
this.getWindow().setBackgroundDrawable(new ColorDrawable(0)); 
```

至少这对我有用...

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-23T17:59:28.377

您可以在应用程序中设置 PopupWindows 样式。此代码只是从所有 PopupWindows 中删除本机阴影

```
<style name="Base.AppTheme" parent="Theme.AppCompat.Light">
    <item name="android:popupMenuStyle">@style/PopupMenu</item>
</style>

<style name="PopupMenu" parent="android:Widget.Material.PopupMenu">
    <item name="android:popupElevation">0dp</item>
</style> 
```

# android - Android - 从听筒播放音频

> ID：13960313
> 
> 赞同：21
> 
> 时间：2012-12-19T20:05:43.823
> 
> 标签：android, audio

我想使用 android 将文件中的音频播放到手机的听筒（或已连接的耳机）中`MediaPlayer`。我尝试按照此线程中的建议使用 MODE_IN_CALL hack - [Android - Getting audio to play through earpiece](https://stackoverflow.com/questions/2119060/android-getting-audio-to-play-through-earpiece) 但这没有帮助。该应用程序还具有**android.permission.MODIFY_AUDIO_SETTINGS**权限，但任何调用`m_amAudioManager.setSpeakerphoneOn(false);`都会被忽略。

```
private AudioManager m_amAudioManager;  
m_amAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
m_amAudioManager.setMode(AudioManager.MODE_IN_CALL); 
m_amAudioManager.setSpeakerphoneOn(false); 
```

`setMode(AudioManager.STREAM_VOICE_CALL);`对on the的调用`MediaPlayer`也无济于事。

```
mediaPlayer.reset();
mediaPlayer.setAudioStreamType(AudioManager.STREAM_VOICE_CALL);
mediaPlayer.setDataSource(path);
mediaPlayer.prepare(); 
```

自 android 2.3 以来有什么改变来破坏这个代码吗？我在 Android ICS 上尝试了代码，但没有成功。有人能指出我正确的方向吗？到目前为止，音频始终从免提电话播放。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T18:46:00.850

事实证明，正确的方法是通过以下代码。

**通过耳机播放**

```
mediaPlayer.setAudioStreamType(AudioManager.STREAM_VOICE_CALL); 
```

**通过免提电话播放**

```
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC); 
```

这就对了。任何其他解决方案（包括此处发布的解决方案 -> [Android - Getting audio to play through earpiece](https://stackoverflow.com/questions/2119060/android-getting-audio-to-play-through-earpiece)）在不同设备上都无法始终如一地工作。事实上，使用 MODE_IN_CALL 可确保您的音频**永远不会**在某些设备上播放。

**注意：**您需要重新准备媒体播放器以更改流。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-11T08:58:34.550

我只是想为 Deepak Bala 的答案添加一个完整的示例。它在不使用 MediaPlayer.create() 方法时有效：

```
 this.player = new MediaPlayer(); 
    this.player.setAudioStreamType(AudioManager.STREAM_VOICE_CALL);

    try {
        this.player.setDataSource(getContext(), Uri.fromFile(new File(m.localFileUrl)));
        this.player.prepare();
    } catch (IllegalStateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-24T12:11:13.947

好的，在我的情况下，问题已通过使用以下代码解决

```
 mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

    mAudioManager.setMode(AudioManager.MODE_IN_COMMUNICATION);
    mAudioManager.setSpeakerphoneOn(false); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-31T08:05:07.697

以下代码对我来说很好，我已经在多个设备上进行了测试：

1-创建实例：

```
MediaPlayer mPlayer = MediaPlayer.create(MainActivity.this, R.raw.skype_call_dialing);
AudioManager mAudioManager = ((AudioManager).getSystemService(Context.AUDIO_SERVICE)); 
```

2-如果要将音量设置为最大（可选）

```
 int maxVolumeMusic = mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
 mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolumeMusic, AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
 mAudioManager.setMode(AudioManager.STREAM_MUSIC); 
```

3-设置从听筒播放的音频：

```
mAudioManager.setSpeakerphoneOn(false); 
```

4-玩：

```
mPlayer.setLooping(true);
mPlayer.start(); 
```

完毕！！！！但是有一些技巧我要和你分享：

1- 在第 2 步中，如果您在 AudioManager.setStreamVolume() 之前设置 Audiomanager.setMode()，则音量不会设置为最大！

2-如果您在 mPlayer.setLooping(true) 之前添加 mPlayer.prepare()；它会导致崩溃！，当 mPlayer 像这样初始化时，你不应该使用 mPlayer.prepare()：

```
MediaPlayer mPlayer = MediaPlayer.create(MainActivity.this, R.raw.skype_call_dialing); 
```

3- 在第 2 步中，mAudioManager.setMode() 我使用了 AudioManager.STREAM_MUSIC，当我尝试其他模式时，在很多情况下我无法打开和关闭扬声器！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-20T21:41:14.063

[这种方法](https://stackoverflow.com/a/28336558/6719359)对我来说效果很好。

> 您还需要设置音频管理器模式。然后使用 audiomgr.setSpeakerphoneOn(false) api，您可以切换。

```
AudioManager audiomgr = (AudioManager) 
    context.getSystemService(Context.AUDIO_SERVICE);
audiomgr.setMode(AudioManager.MODE_IN_COMMUNICATION);
audiomgr.setSpeakerphoneOn(false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T21:38:00.887

那么这个怎么样：

```
// Make sure that streams following the PHONE routing strategy aren't forced
// to play in the speaker.
Class audioSystemClass = Class.forName("android.media.AudioSystem");
Method setForceUse = audioSystemClass.getMethod("setForceUse",
    int.class,
    int.class);
// First 0 == FOR_COMMUNICATION, second 0 == FORCE_NONE.
setForceUse.invoke(null, 0, 0); 
```

然后`STREAM_VOICE_CALL`用于您的 MediaPlayer。

如果`setForceUse`呼叫成功并且您的 MediaPlayer 中的音频仍在扬声器中播放，那么我会说您正在测试它的手机/平板电脑上的 AudioPolicyManager 实现中出现了一些问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-15T17:47:44.180

Audio Manager 免提电话问题只能通过这种方式解决：

```
AudioManager audiomgr = (AudioManager) 
    context.getSystemService(Context.AUDIO_SERVICE);
audiomgr.setMode(AudioManager.MODE_IN_COMMUNICATION);
audiomgr.setSpeakerphoneOn(false); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-18T09:50:18.290

我发现我需要同时设置媒体播放器和音频管理器

```
private MediaPlayer mp = new MediaPlayer();
AudioManager mAudioManager = (AudioManager) v.getContext()
                                .getSystemService(Context.AUDIO_SERVICE);
                        mAudioManager.setSpeakerphoneOn(false);
                        mp.setAudioStreamType(AudioManager.STREAM_VOICE_CALL); 
```

# jsp - 如何使用struts2 ognl标签每行只显示4个项目

> ID：13960317
> 
> 赞同：-1
> 
> 时间：2012-12-19T20:05:57.913
> 
> 标签：jsp, struts2

我试图在单个 tr 中显示 4 个值，在下一个 tr 中显示接下来的四个值。但是在我下面的代码中，所有值都显示在一个带有长水平滚动的 tr 中。

我想显示我的列表值：每行有 4 个值，下一个 tr 中有 4 个值

请检查我的代码并告诉我解决问题的逻辑..

```
<s:if test="themes.size() > 0">  
   <table> 
      <s:iterator value="themes" status="userStatus"> 
               <tr> 
                        <td height="90%"> 
                 <s:property value="themeName" />                     
                        </td> 
               </tr>     

     </s:iterator>  
</table> 
```

**我尝试的是以下代码：**

```
 `<s:if test="themes.size() > 0">  
      <table>  
         <s:set var="index" value="%{0}" />
               <tr> 
                   <s:iterator value="themes" status="userStatus"> 
                        <td height="90%">
                                 <s:property value="themeName" /> 
                        </td>  
                         <s:set var="newindex" value="%{1 + #attr.index}" />   
                            <s:if test="#attr.newindex %4==0">
                                </tr><tr>
                             </s:if> 
                  </s:iterator>  
               </tr>      
          </table>   
      </s:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:28:00.877

使用模块：

```
<s:if test="themes.size() > 0">
    <table>         
        <s:iterator value="themes" status="currentRecord">
            <s:if test="(#currentRecord.index % 4) == 0">
            <!-- Record is First of row: 1st, 5th, 9th etc -->
                <s:if test="#currentRecord.index > 0">                  
                    </tr><!-- It's not the first, close previous row -->
                </s:if>                 
                    <tr><!-- Open row -->
            </s:if>
                        <td>
                            <s:property value="themeName" />
                        </td>                      
        </s:iterator>                       
                    </tr><!-- close last open row -->
    </table>
</s:if> 
```

# solr - 如何为名称搜索配置 Solr

> ID：13960323
> 
> 赞同：2
> 
> 时间：2012-12-19T20:06:19.320
> 
> 标签：solr

我正在尝试创建一个可搜索的名称列表（1M 个名称+），并且需要对名称进行一些松散的匹配。我尝试了几种配置服务器/查询实例的方法，但要么只返回完全匹配，要么我得到大量不适当的结果集，缺少完全匹配。

我是 Solr 的新手，有没有这样做的好例子，或者至少是一个很好的起点，我可以从中工作来实现我需要的东西？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:47:13.410

看看[模糊搜索](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)。它们提供[Levenstein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，也就是您所说的“松散匹配”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:16:00.360

如果您想搜索类似的发音名称，您还可以检查[PhoneticFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PhoneticFilterFactory)

# iphone - 本地化不在 xcode 列表中的国家/地区代码，其他国家/地区代码不起作用

> ID：13960324
> 
> 赞同：2
> 
> 时间：2012-12-19T20:06:24.950
> 
> 标签：iphone, ios, xcode, localization

我正在尝试添加他加禄语（菲律宾）的本地化，其国家代码`tl` [在此处](http://www.loc.gov/standards/iso639-2/php/English_list.php)列出，但它不在 Xcode 4.5 的大语言列表中。那么我该如何添加呢？如果我只是将`tl.lproj`文件夹添加到我的代码中，即使它没有出现在本地化列表中，它是否也能正常工作？还是我也应该在其他地方添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:14:52.577

只需将内容（例如`Localizable.strings`）放在项目目录中的 tl.lproj 文件夹中，然后将该内容添加到项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T16:18:03.010

如果您在“设置”>“通用”>“语言和地区”>“iPhone 语言”中搜索他加禄语，即使在 iOS 9 中也不存在。库尔德语和佛兰芒语也是如此。那么，如果用户甚至无法选择这些语言，为什么还要手动添加 tl.proj 呢？

如果 Xcode 没有列出它，那可能是有原因的......

# .net - 使用 WebInvoke 的 HTTP 缓存 WCF REST/SOAP 操作

> ID：13960325
> 
> 赞同：1
> 
> 时间：2012-12-19T20:06:27.083
> 
> 标签：.net, wcf, rest, soap, outputcache

我有一个看起来像这样的 WCF Web 服务（不是 Web Api）：

```
public interface ILogsService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "/Find")]
    [Description("-Service description-")]
    FindLogsResult FindLogs(LogsFilterRequest request);
} 
```

我想知道是否有一种方法（或更好的方法）通过将 HTTP 缓存标头发送回客户端来缓存服务响应。

我已经测试并看到这可以通过使用来完成：

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.Public);
HttpContext.Current.Response.Cache.SetExpires(DateTime.Now.AddSeconds(30)); 
```

但如果可能的话，我想要一个“更清洁”的解决方案。

此服务已经`aspNetCompatibilityEnabled="true"`并将始终托管在 IIS 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:11:33.393

您应该能够为您的方法添加缓存属性：

```
[AspNetCacheProfile("CacheMediumTerm")]
public FindLogsResult FindLogs(LogsFilterRequest request) {
    //... 
```

然后您可以在配置文件中进行配置：

```
<!-- ...  -->
<system.web>
   <caching>
      <outputCacheSettings>
         <outputCacheProfiles>
            <add name="CacheMediumTerm" duration="120" varyByParam="none" sqlDependency="MyTestDatabase:MyTable"/>
         </outputCacheProfiles>
      </outputCacheSettings>
   </caching>
   <!-- ... -->
</system.web> 
```

有关此功能的更多信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/ee230443.aspx](http://msdn.microsoft.com/en-us/library/ee230443.aspx)

# python - 如何在 python 中使用 Selenium 和 Beautifulsoup 解析网站？

> ID：13960326
> 
> 赞同：53
> 
> 时间：2012-12-19T20:06:26.390
> 
> 标签：python, selenium, beautifulsoup

编程新手，并想出了如何使用 Selenium 导航到我需要去的地方。我现在想解析数据，但不知道从哪里开始。有人可以握住我的手一秒钟并指出我正确的方向吗？

任何帮助表示赞赏 -

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-12-19T20:19:41.557

假设您在要解析的页面上，Selenium 将源 HTML 存储在驱动程序的`page_source`属性中。`page_source`然后，您将按`BeautifulSoup`如下方式加载：

```
In [8]: from bs4 import BeautifulSoup

In [9]: from selenium import webdriver

In [10]: driver = webdriver.Firefox()

In [11]: driver.get('http://news.ycombinator.com')

In [12]: html = driver.page_source

In [13]: soup = BeautifulSoup(html)

In [14]: for tag in soup.find_all('title'):
   ....:     print tag.text
   ....:     
   ....:     
Hacker News 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-19T20:18:28.107

由于您的问题不是特别具体，这里有一个简单的例子。要做一些更有用的事情，请阅读 BS[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。您还将在 SO 中找到大量使用硒（和 BS）的示例。

```
from selenium import webdriver
from bs4 import BeautifulSoup

browser=webdriver.Firefox()
browser.get('http://webpage.com')

soup=BeautifulSoup(browser.page_source)

#do something useful
#prints all the links with corresponding text

for link in soup.find_all('a'):
    print link.get('href',None),link.get_text() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T20:14:04.163

您确定要使用 Selenium 吗？出于这个原因，我使用了[PyQt4](http://www.riverbankcomputing.com/software/pyqt/download)，它非常强大，你可以做任何你想做的事情。

我可以给你一个我刚刚写的示例代码，只需更改 url 就可以了：

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from bs4 import BeautifulSoup
import sys, signal

class Browser(QWebView):
    def __init__(self):
        QWebView.__init__(self)
        self.loadProgress.connect(self._progress)
        self.loadFinished.connect(self._loadFinished)
        self.frame = self.page().currentFrame()

    def _progress(self, progress):
        print str(progress) + "%"

    def _loadFinished(self):
        print "Load Finished"
        html = unicode(self.frame.toHtml()).encode('utf-8')
        soup = BeautifulSoup(html)
        print soup.prettify()
        self.close()

if __name__ == "__main__":
    app = QApplication(sys.argv)
    br = Browser()
    url = QUrl('http://web site that can contain javascript.com')
    br.load(url)
    br.show()
    if signal.signal(signal.SIGINT, signal.SIG_DFL):
        sys.exit(app.exec_())
    app.exec_() 
```

# objective-c - 应用程序应如何使用数据存储进行身份验证？

> ID：13960333
> 
> 赞同：4
> 
> 时间：2012-12-19T20:06:48.293
> 
> 标签：objective-c, security, encryption, http-request

我正在编写一个 iPad 游戏，它将高分类型数据（即超出 Game Center 支持的数据）发送到 Google appengine 数据存储区。`GET`它通过 http或请求发送这些更新`POST`，例如[http://myapp.appspot.com/game/hiscore/925818](http://myapp.appspot.com/game/hiscore/925818)

以下是我认为确保 appengine 数据存储区不会被虚假数据发送的垃圾邮件的方法。

`p@ssw0rd`使用保存在 iOS 二进制文件中的硬编码[压缩/加密](http://code.google.com/p/ziparchive/)有效负载数据。将该二进制数据编码为 base64。在 url 查询字符串或 POST 数据中传递 base64 有效负载。在处理程序中，unbase64，然后使用`p@ssw0rd`. 按照有效负载中的说明更新高分类型数据。

CON：如果`p@ssw0rd`它以某种方式从 iOS 二进制文件中派生而来，则该方案可以被击败。

这是否足够/足够？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:50:19.967

**绝对没有办法确保发送数据的是您的客户端。您可以尝试的只是混淆某些内容，以使垃圾邮件发送者更难提交数据。**

但是，我认为您可以做两件事：

1.  将某种密钥保存在二进制文件中
2.  有一个自定义算法计算一些校验和

也许您可以将两者结合使用。让我给你举个例子：

创建一些自定义（复杂！）算法，如（简化）：

```
var result = ((score XOR score / 5) XOR score * 8) BITSHIFT_BY 3 
```

然后使用带有该结果的静态存储密钥和众所周知的哈希函数，例如：

```
var hash = SHA256(StaticKey + result) 
```

然后将该哈希与分数一起发送到服务器。服务器必须通过执行完全相同的步骤（评估算法+执行 SHA256 的东西）来“验证”哈希并比较哈希。如果他们匹配的分数希望来自您的应用程序，否则将其丢弃，它来自垃圾邮件发送者。

然而，这只是你能做的一件事。查看[mfanto 的链接](https://stackoverflow.com/questions/13960333/how-should-an-application-authenticate-with-a-datastore#comment19258106_13960333)，您可以查看许多其他想法。一定不要告诉任何人你是怎么做的，因为这是[通过默默无闻的安全](http://de.wikipedia.org/wiki/Security_through_obscurity)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:04:03.790

好的，有两种方法可以做到这一点。

1)[以 $FREE.99 购买 SSL 证书](http://webdesign.about.com/od/ssl/tp/cheapest-ssl-certificates.htm)并仅打开到您的服务器的 HTTPS 连接以提交他的核心类型数据。由于握手往返时间，连接速度应该在[500 毫秒左右。](https://stackoverflow.com/a/153448/111307)

2)[在您的 iOS 应用程序中嵌入 RSA 公钥证书](https://github.com/superwills/iOSRSAPublicKeyEncryption)，并[在您的服务器上拥有 RSA 私钥](http://bobobobo.wordpress.com/2013/04/20/ssl-in-linux/)。

然后，您可以使用第二种方案做两件事中的一件：

*   如果您的数据消息非常小（≤256 B），您可以加密并发送 256B 包（RSA 有效负载受密钥中的位数限制）

*   ELSE 如果数据太大（>256B），生成随机对称密钥（AES），然后打包：

    *   使用 RSA 公钥加密的对称 AES 密钥
    *   使用对称 AES 密钥编码的二进制数据

然后服务器获取前 256 个字节并对其进行解码，然后服务器使用该 AES 密钥来解密消息的其余部分。

* * *

以上 2 只是防止窃听，**但**它意味着你的消息的数据格式是隐藏的。在某种程度上，它仍然是一种隐蔽的安全性，因为如果黑客拥有您的公钥和您的消息格式，他们就可以制造消息。

# php - 如何将 1 个数组的值分配给 php 中的另一个数组的值？

> ID：13960337
> 
> 赞同：0
> 
> 时间：2012-12-19T20:07:07.460
> 
> 标签：php, arrays, assign, key-value-store

我有 2 个数组：

```
$arrA = array("a", "b");
$arrB = array("1", "2"); 
```

如何将数组 a 设置为数组 b 并使它们保持不同的对象，例如使 $arrayA 成为变​​量（a 和 b），而 $arrB 将成为变量 $a 和 $b 的变量？像：

```
$a = 1;
$b = 2; 
```

我想要的输出像测试代码是这样的：

```
$c = $a + $b;
echo $c; 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:11:28.997

你使用`extract`&`array_combine`

```
$arrA = array("a", "b");
$arrB = array("1", "2");

extract(array_combine($arrA, $arrB));
echo $a + $b ; 
```

输出

> 3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:09:40.557

采用[`array_combine()`](http://php.net/manual/en/function.array-combine.php)

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

上面的示例将输出：

```
Array
(
    [green]  => avocado
    [red]    => apple
    [yellow] => banana
) 
```

# html - Chrome 在某些元素背景中未正确显示“rgba()”样式...（无 alpha 混合）

> ID：13960341
> 
> 赞同：2
> 
> 时间：2012-12-19T20:07:14.933
> 
> 标签：html, google-chrome, css, internet-explorer-9, rgba

我正在整理一个页面，并且真的在跨浏览器的背景上苦苦挣扎。

该页面使用了许多 alpha 混合背景、框阴影和边框半径，并且几乎完全使用内联样式合成（基本上很少/没有使用 CSS 类）。

IE9 是我的主要浏览器，在其中，页面看起来很棒。然而，在 Chrome 上（我被告知 Firefox），我的大多数 alpha 混合背景要么完全不呈现（透明），要么呈现为纯色！我正在使用带有 HTML5 !DOCTYPE 声明的标准模式，所以我并不是在利用 IE 怪癖或任何东西！

显然，在 9 之前的 IE 版本上，背景（和其他东西都是有问题的）。但我并不关心支持古老的软件，这些用户获得了他们应得的浏览体验。

多年来的共同话题是“IE 的透明度糟透了！”，所以我很高兴地期待如果我让它在 IE（通常是最差的平台）上充分工作，那么其他人就会排队，但在这里我在反方向挣扎！我正在使用标准的“rgba(r,g,b,a);” 关于“背景颜色”属性的指令，所以我没有使用任何激进的 DirectX 过滤器或其他魔法，但是，在（不是 Internet Explorer 9+）浏览器上，我得到了一些非 alpha 混合结果（有时它可以工作，有时不会）。

该站点可以在以下位置预览：[https](https://net-xpert.com/ "https://net-xpert.com/") ://net-xpert.com/ - 所有下拉菜单都应该具有半透明背景，页面底部的悬停链接栏也是如此。此外，如果您转到“向我们提问”页面，那里的对话框应该在所有输入字段上都有着色背景......

哦，最后，我完全讨厌实现任何 b/s、特定于浏览器/平台的“实验性”样式代码！CSS2/3 中的任何东西都很好，但我只是拒绝使用任何类型的“-browser-some-quirky-CSSAttribute”样式！（我希望更多的开发人员也能这样做！——然后浏览器制造商将承受更大的压力来采用这些标准，我们的生活会变得容易得多，但我离题了......）

无论如何，任何对符合标准的解决方案的见解都将不胜感激（即使它只是一个公共承认“是的，Chrome 等人目前没有正确实施这个......”，至少那时我会知道没有什么可做的完成它...）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T17:15:03.427

好吧，这是一个很晚的答案，但也许这对您仍然有用（您的网站似乎仍在运行）。

我有一个应该为你工作的解决方案，假设你可以修改你的一个样式表。至于为什么你遇到这个问题..？我只能推测，因为我不知道如何重新创建您的确切配置。

修复；

```
div[id^=mainMenuOverDiv] {
  background-color: rgba(128,128,128,0.9) !important;
} 
```

我不喜欢`!important`不必要地使用，您可以通过使用更大的特异性来消除它。不过，我已经在 Firefox 中对此进行了测试，它似乎可以工作 - 显然，您需要用自己的值替换实际的 rgba(x,x,x,x) 值。

您似乎正在使用一些 JavaScript（我假设），每次您将鼠标悬停在菜单上时都会随机化 DIV ID - 但开头保持一致（即一次它将是`#mainMenuOverDivjkhasdfsd89f9f9sdfl3l4l34lfdbvbc`，然后下一次，它将是`#mainMenuOverDivLSDklsdkmlzxncbzmxnc90234xcvassf`）。使用 'starts with' CSS 选择器（如示例中提供的那样），您仍然可以隔离菜单，尽管这个潜在的扳手正在工作中。

考虑到内联 CSS 通常不能被覆盖，这很有趣（并且可能很有见地）。

至于为什么会发生这种情况，一种可能是某些 JavaScript 生成的代码没有正确移植到非 IE 浏览器。或者，如果您在任何地方使用它，代码缩小也可能会破坏某些功能（并且因浏览器而异） - 许多缩小插件需要针对个别设置进行调整，以确保一切继续正常工作，因为一种尺寸不一定适合所有人. 例如，您可能会发现在一个站点上，您可以缩小除 JavaScript 之外的所有内容，而在另一个站点上，JavaScript 很好，但您无法缩小内联 CSS 等。Google Analytics 代码有时会成为此问题的受害者。

所以在我看来，问题可能与 IE/Chrome/Firefox 或 Safari 无关——透明度在所有这些上都运行良好——我认为这很可能是您的代码被操纵或传递到浏览器的方式。

希望在某种程度上有所帮助。如果您不能使用外部样式表，请告诉我，我会尝试寻找替代方案。

# sql - 按奇数结果分组

> ID：13960346
> 
> 赞同：2
> 
> 时间：2012-12-19T20:07:37.187
> 
> 标签：sql, group-by

我正在运行以下查询：

```
SELECT DISTINCT
  CAST(ar_all_bills.a_unpaid_balance as decimal(5,2)) as "Total Unpaid Balance" 
FROM ar_all_bills WHERE a_ar_customer_cid = 100059 
```

结果是以下 2 条记录：

```
49.74
62.41 
```

但是，当我将 a 添加`GROUP BY`到查询中以获取`SUM`未付余额时：

```
SELECT DISTINCT
  SUM(CAST(ar_all_bills.a_unpaid_balance as decimal(5,2))) as "Total Unpaid Balance" 
FROM ar_all_bills  WHERE a_ar_customer_cid = 100059 GROUP BY a_ar_customer_cid 
```

结果是：

```
461.27 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T20:11:26.283

您`DISTINCT`在第一个查询中过滤掉`SUM`第二个查询中包含的项目。删除它`DISTINCT`，您会看到第一个的总和将等于第二个的总和。

如果你想`SUM`匹配原来的，试试这个：

```
SELECT SUM(DISTINCT CAST(ar_all_bills.a_unpaid_balance as decimal(5,2))) as "Total Unpaid Balance" FROM ar_all_bills  WHERE a_ar_customer_cid = 100059 GROUP BY a_ar_customer_cid 
```

`DISTINCT`需要在里面，而`SUM`不是外面。否则，您将获得`DISTINCT` `SUM`，而不是`SUM`of`DISTINCT`项目。

如果您希望`SUM`是所有项目（不仅仅是`DISTINCT`那些），那么只需删除`DISTINCT`全部（与您在特定情况下的第二个查询没有什么不同，但在所有情况下的含义不同）：

```
SELECT SUM(CAST(ar_all_bills.a_unpaid_balance as decimal(5,2))) as "Total Unpaid Balance" FROM ar_all_bills  WHERE a_ar_customer_cid = 100059 GROUP BY a_ar_customer_cid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:11:00.780

尝试运行第一个查询而不`DISTINCT`发布结果。那应该告诉你出了什么问题。

# java - 在发送/接收 UDP-DatagramPacket 时获取 java.net.SocketTimeoutException

> ID：13960347
> 
> 赞同：0
> 
> 时间：2012-12-19T20:07:39.047
> 
> 标签：java, sockets, networking, udp, datagram

我正在创建一个 DatagramPacket，我试图通过一个面向更好且更可靠的 UDP 协议（​​手动创建：我手动添加一个带有校验和、序列号和长度的标头）发送到我的“本地主机”数据），然后等待来自服务器的确认。

一开始一切都还好，我发送了很多文件，一些只有 1 个数据包长度（1000 字节），其他的每个 1000 字节有 20 个数据包，我没有问题，服务器以正确的 ACK（确认）响应，并且一切都好！但不知何故，5分钟后，我的程序不再发送文件，它只发送一个数据包，然后因异常停止......

```
java.net.SocketTimeoutException: Receive timed out
at java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)
at java.net.DualStackPlainDatagramSocketImpl.receive0(Unknown Source)
at java.net.AbstractPlainDatagramSocketImpl.receive(Unknown Source)
at java.net.DatagramSocket.receive(Unknown Source)
at blatt7.FileSender.sendFile(FileSender.java:100)
at blatt7.FileSender.main(FileSender.java:184)" 
```

对不起，代码太长了，但如果有人可以提供帮助，那就太好了！谢谢！这是我的客户代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.net.SocketTimeoutException;
import java.net.UnknownHostException;
import java.nio.ByteBuffer;
import java.nio.file.*;
import java.util.zip.CRC32;

public class FileSender {

DatagramSocket sock = null;
CRC32 checksumRechner = new CRC32();
private byte[] readLength;
private byte[] seqNrArray;
private byte[] checksumArray;
private String dateiPfad;
private String zielRechner;
private InetAddress host;
private File datei;
private int seqNr = 1;
FileInputStream fis;
int counter = 0;
byte[] daten = new byte[1000];
byte[] header = new byte[16];
byte[] packet;
byte[] ack_buffer = new byte[4];
int port = 7777;
DatagramPacket dp;
DatagramPacket ack_dp = new DatagramPacket(ack_buffer, ack_buffer.length);
private long receivedSeqNr = 0;
private int readLen;

public FileSender(String zielRechner, String dateiPfad) throws IOException {
    this.setZielRechner(zielRechner);
    this.setDateiPfad(dateiPfad);
    setHost(InetAddress.getByName(zielRechner));
    setDatei(new File(dateiPfad));
    fis = new FileInputStream(datei);
}

public void sendFile() throws IOException {
    while((readLen = fis.read(daten)) != -1) {
        if (getSeqNr() == 1)
            seqNr = 0;
        else
            seqNr = 1;

        readLength = intToBytes(readLen);

        for (int i = 0; i < readLength.length; i++) {
            header[8+i] = readLength[i];
        }

        seqNrArray = intToBytes(getSeqNr());

        for (int i = 0; i <seqNrArray.length; i++) {
            header[12+i] = seqNrArray[i];
        }

        packet = new byte[header.length + daten.length];

        //wir fügen Daten und Header ins Packet zusammen.
        int j=0; 
        for (int i=0; i<packet.length; i++) {
            if (i < header.length) 
                packet[i] = header[i];
            else { 
                packet[i] = daten[j];
                j++;
            }
        }

        //wir rechnen die prüfsumme
        checksumRechner.reset();
        checksumRechner.update(packet,8,8+readLen);

        checksumArray = longToBytes(checksumRechner.getValue());

        //wir schreiben uns checksum in das packet
        for(int i=0; i < 8; i++) {
            packet[i] = checksumArray[i];
        }

        dp = new DatagramPacket(packet , packet.length , host , port);

        while (receivedSeqNr == seqNr) {
            try {
                sock = new DatagramSocket();
                sock.send(dp);
                sock.setSoTimeout(7000);
                counter++;
                System.out.println("Paket sent with seqNr: " + getSeqNr() + " und Length: " + getReadLen() + " - PAKET NR: " + counter);
                sock.receive(ack_dp);
                ack_buffer = ack_dp.getData();
                receivedSeqNr = bytesToLong(ack_buffer,0);
                System.out.println("got SeqNr, with receivedSeq-Nr: " + receivedSeqNr);
            } catch (SocketTimeoutException e)
            { 
                e.printStackTrace();
                break;
            }
        }
    }
    fis.close();
}   

public static byte[] longToBytes(long value) {
    ByteBuffer buffer = ByteBuffer.allocate(8);
    buffer.putLong(value);
    return buffer.array();
}

public static long bytesToLong(byte[] bytes, int index) {
    ByteBuffer buffer = ByteBuffer.allocate(8);
    buffer.put(bytes);
    buffer.flip();//need flip 
    return buffer.getLong(index);
}

public static byte[] intToBytes(int value) {
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.putInt(value);
    return buffer.array();
}

public static int bytesToInt(byte[] bytes, int index) {
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.put(bytes);
    buffer.flip();//need flip 
    return buffer.getInt(index);
}

public String getDateiPfad() {
    return dateiPfad;
}

public void setDateiPfad(String dateiPfad2) {
    this.dateiPfad = dateiPfad2;
}

public String getZielRechner() {
    return zielRechner;
}

public void setZielRechner(String zielRechner) {
    this.zielRechner = zielRechner;
}

public InetAddress getHost() {
    return host;
}

public void setHost(InetAddress host) {
    this.host = host;
}

public File getDatei() {
    return datei;
}

public void setDatei(File datei) {
    this.datei = datei;
}

public int getSeqNr() {
    return seqNr;
}

public int getReadLen() {
    return readLen;
}

public static void main(String[] args) throws IOException,ClassNotFoundException {

    FileSender sender = new FileSender("localhost", "C:/Users/Kb/Desktop/wifi pops.txt");
    sender.sendFile();

}

} 
```

和我的服务器代码：

```
import java.io.ByteArrayOutputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.util.zip.CRC32; 
```

公共类 FileReceiver {

```
static byte[] buffer;
DatagramPacket incoming;
DatagramSocket serverSock = null;
CRC32 checksumRechner = new CRC32();
int dataLength;
long checksumReceiver;
long checksumSender;
int port = 7777;
int receivedSeqNr;

public FileReceiver() {
    buffer = new byte[1500];
    incoming = new DatagramPacket(buffer, buffer.length);
}

public void receive() {
    try
    {
        //1\. Erstellung eines server sockets, parameter ist localportnummer
        serverSock = new DatagramSocket(port);
        serverSock.setSoTimeout(10000);

        //2\. Warten für incoming data
        echo("Server socket created. Waiting for incoming data...");

        //kommunikationsloop
        while(true)
        {   
            serverSock.receive(incoming);

            byte[] dataLengthArray = new byte[4];
            for (int i=0; i <4; i++) {
                dataLengthArray[i] = buffer[i+8];
            }
            dataLength = FileSender.bytesToInt(dataLengthArray,0);

            checksumRechner.reset();
            checksumRechner.update(buffer, 8, dataLength+8);

            checksumReceiver = checksumRechner.getValue();

            byte[] receivedSeqNrArray = new byte[4];
            for (int i=0; i <4; i++) {
                receivedSeqNrArray[i] = buffer[i+12];
            }
            receivedSeqNr = FileSender.bytesToInt(receivedSeqNrArray,0);

            byte[] receivedChecksumArray = new byte[8];
            for (int i=0; i <8; i++) {
                receivedChecksumArray[i] = buffer[i];
            }
            long receivedChecksumNr = FileSender.bytesToLong(receivedChecksumArray,0);

            System.out.println("Paket received with checksum: " + receivedChecksumNr);
            System.out.println("Server-generated checksum: " + checksumReceiver);
            System.out.println("Paket got, with seqNr: " + receivedSeqNr + " und length: " + dataLength);
            if (checksumReceiver != receivedChecksumNr)  {
                sendACK(receivedSeqNr);
                System.out.println("Paket has errors! Must be sent again!");
            }
            else if(checksumReceiver == receivedChecksumNr && receivedSeqNr == 1) {
                sendACK(0);
                System.out.println("SeqNr sent --> SeqNr: 0");
            }
            else if (checksumReceiver == receivedChecksumNr && receivedSeqNr == 0) {
                sendACK(1);
                System.out.println("SeqNr sent --> SeqNr: 1");
            }

         }
     }
     catch(IOException e)
     {
         System.err.println("IOException " + e);
     }
 }

 //echo data ausgeben
public static void echo(String msg)
{
    System.out.println(msg);
}

public void sendACK(int seqNum) throws IOException {
    byte[] sendArray = FileSender.intToBytes(seqNum);
    DatagramPacket sendPacket = new DatagramPacket(sendArray, sendArray.length, InetAddress.getByName("localhost"), 7777);
    serverSock.send(sendPacket);
}

public static void main(String[] args) throws IOException,ClassNotFoundException {

    FileReceiver receiver = new FileReceiver();
    receiver.receive();

}

} 
```

# linux - 在 Linux 上移动 Git 安装

> ID：13960349
> 
> 赞同：2
> 
> 时间：2012-12-19T20:07:48.050
> 
> 标签：linux, git, terminal

看来我已经在以下目录中安装了 git：

```
/root/bin/git 
```

（说实话，不太确定如何。）

因此，除了 root 用户之外，任何人都无法访问 git。

我可以简单地将文件移动到`/usr/bin`（或类似）还是必须卸载并重新安装。

如果需要卸载，我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:12:49.997

在许多系统`$HOME/bin`中都`$PATH`使用了`.bashrc`或`/etc/bashrc`。这就是为什么在您的情况下只能`root`访问安装在`root`s 家中的 git。但没有其他人。

唯一的解决方案是删除那个 git。明智地安装 git 系统。

```
yum install git-core 
```

或者

```
apt-get install git-core 
```

如果 git`/root`作为前缀安装，您可能会在文件夹中找到`usr`, `etc`, `lib`etc 目录`/root`。也删除它们。还要确保没有像 git 一样安装任何其他软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:17:06.293

在我的系统上，git 安装了以下文件

```
extra/git       /etc/
extra/git       /etc/rc.d/
extra/git       /etc/conf.d/
extra/git       /etc/conf.d/git-daemon.conf
extra/git       /etc/rc.d/git-daemon
extra/git       /usr/
extra/git       /usr/bin/
extra/git       /usr/lib/
extra/git       /usr/share/gitk/lib/
extra/git       /usr/share/gitk/lib/msgs/
extra/git       /usr/share/gitk/lib/msgs/fr.msg
extra/git       /usr/share/gitk/lib/msgs/ru.msg
extra/git       /usr/share/gitk/lib/msgs/pt_br.msg
extra/git       /usr/share/gitk/lib/msgs/ja.msg
extra/git       /usr/share/gitk/lib/msgs/sv.msg
extra/git       /usr/share/gitk/lib/msgs/hu.msg
extra/git       /usr/share/gitk/lib/msgs/es.msg
extra/git       /usr/share/gitk/lib/msgs/it.msg
extra/git       /usr/share/gitk/lib/msgs/de.msg
extra/git       /usr/share/gitweb/gitweb.cgi
extra/git       /usr/share/gitweb/static/
extra/git       /usr/share/gitweb/static/gitweb.js
extra/git       /usr/share/gitweb/static/gitweb.css
extra/git       /usr/share/gitweb/static/git-logo.png
extra/git       /usr/share/gitweb/static/git-favicon.png
extra/git       /usr/share/perl5/vendor_perl/
extra/git       /usr/share/perl5/vendor_perl/Git/
extra/git       /usr/share/perl5/vendor_perl/Git.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/
extra/git       /usr/share/perl5/vendor_perl/Git/SVN.pm
extra/git       /usr/share/perl5/vendor_perl/Git/I18N.pm
extra/git       /usr/share/perl5/vendor_perl/Git/IndexInfo.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Memoize/
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Editor.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Migration.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Log.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Ra.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Prompt.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/GlobSpec.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Fetcher.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Utils.pm
extra/git       /usr/share/perl5/vendor_perl/Git/SVN/Memoize/YAML.pm
extra/git       /usr/share/man/man3/
extra/git       /usr/share/man/man1/
extra/git       /usr/share/man/man5/
extra/git       /usr/share/man/man7/
extra/git       /usr/share/man/man7/gitcli.7.gz
extra/git       /usr/share/man/man7/gitcore-tutorial.7.gz
extra/git       /usr/share/man/man7/gitcredentials.7.gz
extra/git       /usr/share/man/man7/gitcvs-migration.7.gz
extra/git       /usr/share/man/man7/gitdiffcore.7.gz
extra/git       /usr/share/man/man7/gitglossary.7.gz
extra/git       /usr/share/man/man7/gitnamespaces.7.gz
extra/git       /usr/share/man/man7/gitrevisions.7.gz
extra/git       /usr/share/man/man7/gittutorial-2.7.gz
extra/git       /usr/share/man/man7/gittutorial.7.gz
extra/git       /usr/share/man/man7/gitworkflows.7.gz
extra/git       /usr/share/man/man5/gitattributes.5.gz
extra/git       /usr/share/man/man5/githooks.5.gz
extra/git       /usr/share/man/man5/gitignore.5.gz
extra/git       /usr/share/man/man5/gitmodules.5.gz
extra/git       /usr/share/man/man5/gitrepository-layout.5.gz
extra/git       /usr/share/man/man5/gitweb.conf.5.gz
extra/git       /usr/share/man/man1/git-add.1.gz
extra/git       /usr/share/man/man1/git-am.1.gz
extra/git       /usr/share/man/man1/git-annotate.1.gz
extra/git       /usr/share/man/man1/git-apply.1.gz
extra/git       /usr/share/man/man1/git-archimport.1.gz
extra/git       /usr/share/man/man1/git-archive.1.gz
extra/git       /usr/share/man/man1/git-bisect.1.gz
extra/git       /usr/share/man/man1/git-blame.1.gz
extra/git       /usr/share/man/man1/git-branch.1.gz
extra/git       /usr/share/man/man1/git-bundle.1.gz
extra/git       /usr/share/man/man1/git-cat-file.1.gz
extra/git       /usr/share/man/man1/git-check-attr.1.gz
extra/git       /usr/share/man/man1/git-check-ref-format.1.gz
extra/git       /usr/share/man/man1/git-checkout-index.1.gz
extra/git       /usr/share/man/man1/git-checkout.1.gz
extra/git       /usr/share/man/man1/git-cherry-pick.1.gz
extra/git       /usr/share/man/man1/git-cherry.1.gz
extra/git       /usr/share/man/man1/git-citool.1.gz
extra/git       /usr/share/man/man1/git-clean.1.gz
extra/git       /usr/share/man/man1/git-clone.1.gz
extra/git       /usr/share/man/man1/git-column.1.gz
extra/git       /usr/share/man/man1/git-commit-tree.1.gz
extra/git       /usr/share/man/man1/git-commit.1.gz
extra/git       /usr/share/man/man1/git-config.1.gz
extra/git       /usr/share/man/man1/git-count-objects.1.gz
extra/git       /usr/share/man/man1/git-credential-cache--daemon.1.gz
extra/git       /usr/share/man/man1/git-credential-cache.1.gz
extra/git       /usr/share/man/man1/git-credential-store.1.gz
extra/git       /usr/share/man/man1/git-credential.1.gz
extra/git       /usr/share/man/man1/git-cvsexportcommit.1.gz
extra/git       /usr/share/man/man1/git-cvsimport.1.gz
extra/git       /usr/share/man/man1/git-cvsserver.1.gz
extra/git       /usr/share/man/man1/git-daemon.1.gz
extra/git       /usr/share/man/man1/git-describe.1.gz
extra/git       /usr/share/man/man1/git-diff-files.1.gz
extra/git       /usr/share/man/man1/git-diff-index.1.gz
extra/git       /usr/share/man/man1/git-diff-tree.1.gz
extra/git       /usr/share/man/man1/git-diff.1.gz
extra/git       /usr/share/man/man1/git-difftool.1.gz
extra/git       /usr/share/man/man1/git-fast-export.1.gz
extra/git       /usr/share/man/man1/git-fast-import.1.gz
extra/git       /usr/share/man/man1/git-fetch-pack.1.gz
extra/git       /usr/share/man/man1/git-fetch.1.gz
extra/git       /usr/share/man/man1/git-filter-branch.1.gz
extra/git       /usr/share/man/man1/git-fmt-merge-msg.1.gz
extra/git       /usr/share/man/man1/git-for-each-ref.1.gz
extra/git       /usr/share/man/man1/git-format-patch.1.gz
extra/git       /usr/share/man/man1/git-fsck-objects.1.gz
extra/git       /usr/share/man/man1/git-fsck.1.gz
extra/git       /usr/share/man/man1/git-gc.1.gz
extra/git       /usr/share/man/man1/git-get-tar-commit-id.1.gz
extra/git       /usr/share/man/man1/git-grep.1.gz
extra/git       /usr/share/man/man1/git-gui.1.gz
extra/git       /usr/share/man/man1/git-hash-object.1.gz
extra/git       /usr/share/man/man1/git-help.1.gz
extra/git       /usr/share/man/man1/git-http-backend.1.gz
extra/git       /usr/share/man/man1/git-http-fetch.1.gz
extra/git       /usr/share/man/man1/git-http-push.1.gz
extra/git       /usr/share/man/man1/git-imap-send.1.gz
extra/git       /usr/share/man/man1/git-index-pack.1.gz
extra/git       /usr/share/man/man1/git-init-db.1.gz
extra/git       /usr/share/man/man1/git-init.1.gz
extra/git       /usr/share/man/man1/git-instaweb.1.gz
extra/git       /usr/share/man/man1/git-log.1.gz
extra/git       /usr/share/man/man1/git-lost-found.1.gz
extra/git       /usr/share/man/man1/git-ls-files.1.gz
extra/git       /usr/share/man/man1/git-ls-remote.1.gz
extra/git       /usr/share/man/man1/git-ls-tree.1.gz
extra/git       /usr/share/man/man1/git-mailinfo.1.gz
extra/git       /usr/share/man/man1/git-mailsplit.1.gz
extra/git       /usr/share/man/man1/git-merge-base.1.gz
extra/git       /usr/share/man/man1/git-merge-file.1.gz
extra/git       /usr/share/man/man1/git-merge-index.1.gz
extra/git       /usr/share/man/man1/git-merge-one-file.1.gz
extra/git       /usr/share/man/man1/git-merge-tree.1.gz
extra/git       /usr/share/man/man1/git-merge.1.gz
extra/git       /usr/share/man/man1/git-mergetool--lib.1.gz
extra/git       /usr/share/man/man1/git-mergetool.1.gz
extra/git       /usr/share/man/man1/git-mktag.1.gz
extra/git       /usr/share/man/man1/git-mktree.1.gz
extra/git       /usr/share/man/man1/git-mv.1.gz
extra/git       /usr/share/man/man1/git-name-rev.1.gz
extra/git       /usr/share/man/man1/git-notes.1.gz
extra/git       /usr/share/man/man1/git-p4.1.gz
extra/git       /usr/share/man/man1/git-pack-objects.1.gz
extra/git       /usr/share/man/man1/git-pack-redundant.1.gz
extra/git       /usr/share/man/man1/git-pack-refs.1.gz
extra/git       /usr/share/man/man1/git-parse-remote.1.gz
extra/git       /usr/share/man/man1/git-patch-id.1.gz
extra/git       /usr/share/man/man1/git-peek-remote.1.gz
extra/git       /usr/share/man/man1/git-prune-packed.1.gz
extra/git       /usr/share/man/man1/git-prune.1.gz
extra/git       /usr/share/man/man1/git-pull.1.gz
extra/git       /usr/share/man/man1/git-push.1.gz
extra/git       /usr/share/man/man1/git-quiltimport.1.gz
extra/git       /usr/share/man/man1/git-read-tree.1.gz
extra/git       /usr/share/man/man1/git-rebase.1.gz
extra/git       /usr/share/man/man1/git-receive-pack.1.gz
extra/git       /usr/share/man/man1/git-reflog.1.gz
extra/git       /usr/share/man/man1/git-relink.1.gz
extra/git       /usr/share/man/man1/git-remote-ext.1.gz
extra/git       /usr/share/man/man1/git-remote-fd.1.gz
extra/git       /usr/share/man/man1/git-remote-helpers.1.gz
extra/git       /usr/share/man/man1/git-remote-testgit.1.gz
extra/git       /usr/share/man/man1/git-remote.1.gz
extra/git       /usr/share/man/man1/git-repack.1.gz
extra/git       /usr/share/man/man1/git-replace.1.gz
extra/git       /usr/share/man/man1/git-repo-config.1.gz
extra/git       /usr/share/man/man1/git-request-pull.1.gz
extra/git       /usr/share/man/man1/git-rerere.1.gz
extra/git       /usr/share/man/man1/git-reset.1.gz
extra/git       /usr/share/man/man1/git-rev-list.1.gz
extra/git       /usr/share/man/man1/git-rev-parse.1.gz
extra/git       /usr/share/man/man1/git-revert.1.gz
extra/git       /usr/share/man/man1/git-rm.1.gz
extra/git       /usr/share/man/man1/git-send-email.1.gz
extra/git       /usr/share/man/man1/git-send-pack.1.gz
extra/git       /usr/share/man/man1/git-sh-i18n--envsubst.1.gz
extra/git       /usr/share/man/man1/git-sh-i18n.1.gz
extra/git       /usr/share/man/man1/git-sh-setup.1.gz
extra/git       /usr/share/man/man1/git-shell.1.gz
extra/git       /usr/share/man/man1/git-shortlog.1.gz
extra/git       /usr/share/man/man1/git-show-branch.1.gz
extra/git       /usr/share/man/man1/git-show-index.1.gz
extra/git       /usr/share/man/man1/git-show-ref.1.gz
extra/git       /usr/share/man/man1/git-show.1.gz
extra/git       /usr/share/man/man1/git-stage.1.gz
extra/git       /usr/share/man/man1/git-stash.1.gz
extra/git       /usr/share/man/man1/git-status.1.gz
extra/git       /usr/share/man/man1/git-stripspace.1.gz
extra/git       /usr/share/man/man1/git-submodule.1.gz
extra/git       /usr/share/man/man1/git-svn.1.gz
extra/git       /usr/share/man/man1/git-symbolic-ref.1.gz
extra/git       /usr/share/man/man1/git-tag.1.gz
extra/git       /usr/share/man/man1/git-tar-tree.1.gz
extra/git       /usr/share/man/man1/git-unpack-file.1.gz
extra/git       /usr/share/man/man1/git-unpack-objects.1.gz
extra/git       /usr/share/man/man1/git-update-index.1.gz
extra/git       /usr/share/man/man1/git-update-ref.1.gz
extra/git       /usr/share/man/man1/git-update-server-info.1.gz
extra/git       /usr/share/man/man1/git-upload-archive.1.gz
extra/git       /usr/share/man/man1/git-upload-pack.1.gz
extra/git       /usr/share/man/man1/git-var.1.gz
extra/git       /usr/share/man/man1/git-verify-pack.1.gz
extra/git       /usr/share/man/man1/git-verify-tag.1.gz
extra/git       /usr/share/man/man1/git-web--browse.1.gz
extra/git       /usr/share/man/man1/git-whatchanged.1.gz
extra/git       /usr/share/man/man1/git-write-tree.1.gz
extra/git       /usr/share/man/man1/git.1.gz
extra/git       /usr/share/man/man1/gitk.1.gz
extra/git       /usr/share/man/man1/gitweb.1.gz
extra/git       /usr/share/man/man3/Git::SVN::Editor.3pm.gz
extra/git       /usr/share/man/man3/Git::SVN::Memoize::YAML.3pm.gz
extra/git       /usr/share/man/man3/Git::SVN::Ra.3pm.gz
extra/git       /usr/share/man/man3/Git::I18N.3pm.gz
extra/git       /usr/share/man/man3/Git::SVN::Prompt.3pm.gz
extra/git       /usr/share/man/man3/Git::SVN::Fetcher.3pm.gz
extra/git       /usr/share/man/man3/Git::SVN::Utils.3pm.gz
extra/git       /usr/share/man/man3/Git.3pm.gz
extra/git       /usr/share/locale/pt_PT/
extra/git       /usr/share/locale/vi/
extra/git       /usr/share/locale/da/
extra/git       /usr/share/locale/nl/
extra/git       /usr/share/locale/sv/
extra/git       /usr/share/locale/it/
extra/git       /usr/share/locale/de/
extra/git       /usr/share/locale/zh_CN/
extra/git       /usr/share/locale/is/
extra/git       /usr/share/locale/is/LC_MESSAGES/
extra/git       /usr/share/locale/is/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/zh_CN/LC_MESSAGES/
extra/git       /usr/share/locale/zh_CN/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/de/LC_MESSAGES/
extra/git       /usr/share/locale/de/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/it/LC_MESSAGES/
extra/git       /usr/share/locale/it/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/sv/LC_MESSAGES/
extra/git       /usr/share/locale/sv/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/nl/LC_MESSAGES/
extra/git       /usr/share/locale/nl/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/da/LC_MESSAGES/
extra/git       /usr/share/locale/da/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/vi/LC_MESSAGES/
extra/git       /usr/share/locale/vi/LC_MESSAGES/git.mo
extra/git       /usr/share/locale/pt_PT/LC_MESSAGES/
extra/git       /usr/share/locale/pt_PT/LC_MESSAGES/git.mo
extra/git       /usr/share/git-core/templates/
extra/git       /usr/share/git-core/templates/branches/
extra/git       /usr/share/git-core/templates/hooks/
extra/git       /usr/share/git-core/templates/info/
extra/git       /usr/share/git-core/templates/description
extra/git       /usr/share/git-core/templates/info/exclude
extra/git       /usr/share/git-core/templates/hooks/applypatch-msg.sample
extra/git       /usr/share/git-core/templates/hooks/commit-msg.sample
extra/git       /usr/share/git-core/templates/hooks/post-update.sample
extra/git       /usr/share/git-core/templates/hooks/pre-applypatch.sample
extra/git       /usr/share/git-core/templates/hooks/pre-commit.sample
extra/git       /usr/share/git-core/templates/hooks/pre-rebase.sample
extra/git       /usr/share/git-core/templates/hooks/prepare-commit-msg.sample
extra/git       /usr/share/git-core/templates/hooks/update.sample
extra/git       /usr/lib/git-core/
extra/git       /usr/lib/python2.7/
extra/git       /usr/lib/systemd/
extra/git       /usr/lib/systemd/system/
extra/git       /usr/lib/systemd/system/git-daemon@.service
extra/git       /usr/lib/systemd/system/git-daemon.socket
extra/git       /usr/lib/python2.7/site-packages/
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers-0.1.0-py2.7.egg-info
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/__init__.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/util.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/__init__.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/util.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/__init__.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/repo.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/exporter.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/importer.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/non_local.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/git.pyc
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/__init__.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/exporter.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/git.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/importer.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/non_local.py
extra/git       /usr/lib/python2.7/site-packages/git_remote_helpers/git/repo.py
extra/git       /usr/lib/git-core/git-remote-http
extra/git       /usr/lib/git-core/git-am
extra/git       /usr/lib/git-core/git-bisect
extra/git       /usr/lib/git-core/git-difftool--helper
extra/git       /usr/lib/git-core/git-filter-branch
extra/git       /usr/lib/git-core/git-lost-found
extra/git       /usr/lib/git-core/git-merge-octopus
extra/git       /usr/lib/git-core/git-merge-one-file
extra/git       /usr/lib/git-core/git-merge-resolve
extra/git       /usr/lib/git-core/git-mergetool
extra/git       /usr/lib/git-core/git-pull
extra/git       /usr/lib/git-core/git-quiltimport
extra/git       /usr/lib/git-core/git-rebase
extra/git       /usr/lib/git-core/git-repack
extra/git       /usr/lib/git-core/git-request-pull
extra/git       /usr/lib/git-core/git-stash
extra/git       /usr/lib/git-core/git-submodule
extra/git       /usr/lib/git-core/git-web--browse
extra/git       /usr/lib/git-core/git-add--interactive
extra/git       /usr/lib/git-core/git-difftool
extra/git       /usr/lib/git-core/git-archimport
extra/git       /usr/lib/git-core/git-cvsexportcommit
extra/git       /usr/lib/git-core/git-cvsimport
extra/git       /usr/lib/git-core/git-relink
extra/git       /usr/lib/git-core/git-send-email
extra/git       /usr/lib/git-core/git-svn
extra/git       /usr/lib/git-core/git-remote-testgit
extra/git       /usr/lib/git-core/git-instaweb
extra/git       /usr/lib/git-core/git-mergetool--lib
extra/git       /usr/lib/git-core/git-parse-remote
extra/git       /usr/lib/git-core/git-rebase--am
extra/git       /usr/lib/git-core/git-rebase--interactive
extra/git       /usr/lib/git-core/git-rebase--merge
extra/git       /usr/lib/git-core/git-sh-setup
extra/git       /usr/lib/git-core/git-sh-i18n
extra/git       /usr/lib/git-core/mergetools/
extra/git       /usr/lib/git-core/git-gui
extra/git       /usr/lib/git-core/git-gui--askpass
extra/git       /usr/lib/git-core/git-citool
extra/git       /usr/lib/git-core/git
extra/git       /usr/lib/git-core/git-cvsserver
extra/git       /usr/lib/git-core/git-add
extra/git       /usr/lib/git-core/git-annotate
extra/git       /usr/lib/git-core/git-apply
extra/git       /usr/lib/git-core/git-archive
extra/git       /usr/lib/git-core/git-bisect--helper
extra/git       /usr/lib/git-core/git-blame
extra/git       /usr/lib/git-core/git-branch
extra/git       /usr/lib/git-core/git-bundle
extra/git       /usr/lib/git-core/git-cat-file
extra/git       /usr/lib/git-core/git-check-attr
extra/git       /usr/lib/git-core/git-check-ref-format
extra/git       /usr/lib/git-core/git-checkout-index
extra/git       /usr/lib/git-core/git-checkout
extra/git       /usr/lib/git-core/git-clean
extra/git       /usr/lib/git-core/git-clone
extra/git       /usr/lib/git-core/git-column
extra/git       /usr/lib/git-core/git-commit-tree
extra/git       /usr/lib/git-core/git-commit
extra/git       /usr/lib/git-core/git-config
extra/git       /usr/lib/git-core/git-count-objects
extra/git       /usr/lib/git-core/git-credential
extra/git       /usr/lib/git-core/git-describe
extra/git       /usr/lib/git-core/git-diff-files
extra/git       /usr/lib/git-core/git-diff-index
extra/git       /usr/lib/git-core/git-diff-tree
extra/git       /usr/lib/git-core/git-diff
extra/git       /usr/lib/git-core/git-fast-export
extra/git       /usr/lib/git-core/git-fetch-pack
extra/git       /usr/lib/git-core/git-fetch
extra/git       /usr/lib/git-core/git-fmt-merge-msg
extra/git       /usr/lib/git-core/git-for-each-ref
extra/git       /usr/lib/git-core/git-fsck
extra/git       /usr/lib/git-core/git-gc
extra/git       /usr/lib/git-core/git-grep
extra/git       /usr/lib/git-core/git-hash-object
extra/git       /usr/lib/git-core/git-help
extra/git       /usr/lib/git-core/git-index-pack
extra/git       /usr/lib/git-core/git-init-db
extra/git       /usr/lib/git-core/git-log
extra/git       /usr/lib/git-core/git-ls-files
extra/git       /usr/lib/git-core/git-ls-remote
extra/git       /usr/lib/git-core/git-ls-tree
extra/git       /usr/lib/git-core/git-mailinfo
extra/git       /usr/lib/git-core/git-mailsplit
extra/git       /usr/lib/git-core/git-merge
extra/git       /usr/lib/git-core/git-merge-base
extra/git       /usr/lib/git-core/git-merge-file
extra/git       /usr/lib/git-core/git-merge-index
extra/git       /usr/lib/git-core/git-merge-ours
extra/git       /usr/lib/git-core/git-merge-recursive
extra/git       /usr/lib/git-core/git-merge-tree
extra/git       /usr/lib/git-core/git-mktag
extra/git       /usr/lib/git-core/git-mktree
extra/git       /usr/lib/git-core/git-mv
extra/git       /usr/lib/git-core/git-name-rev
extra/git       /usr/lib/git-core/git-notes
extra/git       /usr/lib/git-core/git-pack-objects
extra/git       /usr/lib/git-core/git-pack-redundant
extra/git       /usr/lib/git-core/git-pack-refs
extra/git       /usr/lib/git-core/git-patch-id
extra/git       /usr/lib/git-core/git-prune-packed
extra/git       /usr/lib/git-core/git-prune
extra/git       /usr/lib/git-core/git-push
extra/git       /usr/lib/git-core/git-read-tree
extra/git       /usr/lib/git-core/git-receive-pack
extra/git       /usr/lib/git-core/git-reflog
extra/git       /usr/lib/git-core/git-remote
extra/git       /usr/lib/git-core/git-remote-ext
extra/git       /usr/lib/git-core/git-remote-fd
extra/git       /usr/lib/git-core/git-replace
extra/git       /usr/lib/git-core/git-rerere
extra/git       /usr/lib/git-core/git-reset
extra/git       /usr/lib/git-core/git-rev-list
extra/git       /usr/lib/git-core/git-rev-parse
extra/git       /usr/lib/git-core/git-revert
extra/git       /usr/lib/git-core/git-rm
extra/git       /usr/lib/git-core/git-send-pack
extra/git       /usr/lib/git-core/git-shortlog
extra/git       /usr/lib/git-core/git-show-branch
extra/git       /usr/lib/git-core/git-show-ref
extra/git       /usr/lib/git-core/git-stripspace
extra/git       /usr/lib/git-core/git-symbolic-ref
extra/git       /usr/lib/git-core/git-tag
extra/git       /usr/lib/git-core/git-tar-tree
extra/git       /usr/lib/git-core/git-unpack-file
extra/git       /usr/lib/git-core/git-unpack-objects
extra/git       /usr/lib/git-core/git-update-index
extra/git       /usr/lib/git-core/git-update-ref
extra/git       /usr/lib/git-core/git-update-server-info
extra/git       /usr/lib/git-core/git-upload-archive
extra/git       /usr/lib/git-core/git-var
extra/git       /usr/lib/git-core/git-verify-pack
extra/git       /usr/lib/git-core/git-verify-tag
extra/git       /usr/lib/git-core/git-write-tree
extra/git       /usr/lib/git-core/git-cherry
extra/git       /usr/lib/git-core/git-cherry-pick
extra/git       /usr/lib/git-core/git-format-patch
extra/git       /usr/lib/git-core/git-fsck-objects
extra/git       /usr/lib/git-core/git-get-tar-commit-id
extra/git       /usr/lib/git-core/git-init
extra/git       /usr/lib/git-core/git-merge-subtree
extra/git       /usr/lib/git-core/git-peek-remote
extra/git       /usr/lib/git-core/git-repo-config
extra/git       /usr/lib/git-core/git-show
extra/git       /usr/lib/git-core/git-stage
extra/git       /usr/lib/git-core/git-status
extra/git       /usr/lib/git-core/git-whatchanged
extra/git       /usr/lib/git-core/git-remote-https
extra/git       /usr/lib/git-core/git-remote-ftp
extra/git       /usr/lib/git-core/git-remote-ftps
extra/git       /usr/lib/git-core/git-p4
extra/git       /usr/lib/git-core/git-credential-store
extra/git       /usr/lib/git-core/git-daemon
extra/git       /usr/lib/git-core/git-fast-import
extra/git       /usr/lib/git-core/git-http-backend
extra/git       /usr/lib/git-core/git-imap-send
extra/git       /usr/lib/git-core/git-sh-i18n--envsubst
extra/git       /usr/lib/git-core/git-show-index
extra/git       /usr/lib/git-core/git-http-fetch
extra/git       /usr/lib/git-core/git-http-push
extra/git       /usr/lib/git-core/git-credential-cache
extra/git       /usr/lib/git-core/git-credential-cache--daemon
extra/git       /usr/lib/git-core/git-shell
extra/git       /usr/lib/git-core/git-upload-pack
extra/git       /usr/lib/git-core/mergetools/araxis
extra/git       /usr/lib/git-core/mergetools/bc3
extra/git       /usr/lib/git-core/mergetools/codecompare
extra/git       /usr/lib/git-core/mergetools/defaults
extra/git       /usr/lib/git-core/mergetools/deltawalker
extra/git       /usr/lib/git-core/mergetools/diffuse
extra/git       /usr/lib/git-core/mergetools/ecmerge
extra/git       /usr/lib/git-core/mergetools/emerge
extra/git       /usr/lib/git-core/mergetools/kdiff3
extra/git       /usr/lib/git-core/mergetools/kompare
extra/git       /usr/lib/git-core/mergetools/meld
extra/git       /usr/lib/git-core/mergetools/opendiff
extra/git       /usr/lib/git-core/mergetools/p4merge
extra/git       /usr/lib/git-core/mergetools/tkdiff
extra/git       /usr/lib/git-core/mergetools/tortoisemerge
extra/git       /usr/lib/git-core/mergetools/vim
extra/git       /usr/lib/git-core/mergetools/xxdiff
extra/git       /usr/bin/git
extra/git       /usr/bin/git-cvsserver
extra/git       /usr/bin/gitk
extra/git       /usr/bin/git-receive-pack
extra/git       /usr/bin/git-upload-archive
extra/git       /usr/bin/git-upload-pack
extra/git       /usr/bin/git-shell 
```

所以它不仅仅是移动那么简单`/root/bin/git`，最好使用包管理器安装 git。

**Ubuntu**

```
$ apt-get install git 
```

**软呢帽**

```
$ yum install git 
```

对于 Mac 和 Windows：请参阅[下载页面](http://git-scm.com/downloads)。使用预构建的包是安装 git 的首选方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:02:51.803

Installing `git` places the lot of internal commands in `$PREFIX/libexec/git-core` (where `$PREFIX` is as set by `./configure --prefix=...`), and the `git` executable runs them from there. It also looks for configuration in `$PREFIX/etc/`, and so on. Can't just move the executable around, and moving the installed files won't help either.

# sorm - SORM：将字段映射到自定义列名？

> ID：13960352
> 
> 赞同：4
> 
> 时间：2012-12-19T20:07:52.123
> 
> 标签：sorm

从 SORM 文档来看，这并不是很清楚，API 也没有帮助。

那么，如何在实体中指定自定义列名？我还想更改每个实体的主键的列名。那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:58:06.323

不可以。因为 SORM 是关于约定优于配置的，所以无法更改列名。这就是让它变得简单的原因。

主键也是不可配置的，但[出于不同的原因](http://sorm-framework.org/Documentation.html#persisted_trait_and_ids)。

# sql-server - 在 Excel 导入 SQL Server 表期间添加列

> ID：13960354
> 
> 赞同：0
> 
> 时间：2012-12-19T20:07:56.987
> 
> 标签：sql-server, tsql, excel-2010, import-from-excel

我有一个脚本，它创建一个表以及一个用于跟踪负责导入的文件名的列。

```
select *, 'file1.xls' as 'Filename'
into dbo.SQLServerTable 
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 'Excel 8.0;Database=D:\testing.xls;HDR=YES','SELECT * FROM [Sheet1$]') 
```

然后我需要执行具有不同文件名的其他导入。我不相信这个语句在语法上是正确的，它会阻止导入。

```
INSERT INTO dbo.SQLServerTable 
Select *, 'File2.xlsx' as 'FileName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel      12.0;Database=D:\Convert\Converted\File2.xlsx;HDR=YES', 'SELECT * FROM [Worksheet$]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:38:54.623

我遇到了这个问题，这是因为默认表值，对于字符串值，例如我需要一个 varchar(120) 的 varchar(50)

我的解决方案是将 excel 放入 csv 文件（标准保存在 excel 中），然后使用 sql Import/export UI 将文件导入表中。在此过程中，您可以查看所有默认值，然后通过高级选项卡将这些值更改为您自己的偏好。

# asp.net-mvc-3 - MVC-3 找不到预编译的视图

> ID：13960372
> 
> 赞同：2
> 
> 时间：2012-12-19T20:09:18.217
> 
> 标签：asp.net-mvc-3, razor, views, razorgenerator

我有一个常见的 MVC3 项目，其中有一些使用 RazorGenerator 编译到程序集中的视图。我已经确认这些类出现在生成的 DLL 中。我从另一个 MVC3 项目中引用了这个项目。当我尝试在通用 MVC 项目中使用视图时（`CommonMvcProject.Views.Shared`例如，视图的命名空间是 ）...

```
@{Html.RenderPartial("ViewFromCommonMVCProject");} 
```

...我收到一个错误：

> 未找到部分视图“ViewFromCommonMVCProject”或没有视图引擎支持搜索到的位置。

我不想使用物理视图，我想在通用 MVC 项目的程序集中使用预编译视图。如何配置此项目以在通用程序集中进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:04:58.580

The following post looks like it has the details you need.

[http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)

Hope that helps.

# java - Java SWT 浏览器 xulrunner 崩溃 Java VM

> ID：13960376
> 
> 赞同：2
> 
> 时间：2012-12-19T20:09:38.730
> 
> 标签：java, browser, swt, embedding, xulrunner

我在基于 Swing 的应用程序中嵌入了一个基于 Xulrunner 的 SWT 浏览器，使用正确的路径和设置`SWT.MOZILLA`。主要是我有一个扩展类`JPanel`。这个类嵌入了一个带有浏览器小部件的外壳。如果我创建的 Java VM 类实例不止一个，则会导致整个应用程序崩溃。如果我创建浏览器`SWT.NONE`（所以基本上选择系统的浏览器），我可以在我的应用程序中显示任意数量的浏览器。问题出在哪里？

顺便说一句，它`nsCycleCollector.c`（xulrunner 的一部分）使 VM 崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T07:34:34.450

我在这里遇到同样的崩溃情况。

如果您使用 xulrunner 10.0.4esr，您会在 JVM 中止之前获得此 System.err 输出：

```
###!!! ABORT: Main-thread-only object used off the main thread: file e:/builds/moz2_slave/rel-m-esr10-xr-w32-bld/build/xpcom/base/nsCycleCollector.cpp, line 1278 
```

我发现你需要销毁 nsIWebBrowser 实例的 nsIBaseWindow 来清理东西：

```
nsIWebBrowser webBrowser = (nsIWebBrowser)b.getWebBrowser();
nsIBaseWindow baseWindow = (nsIBaseWindow)webBrowser.queryInterface(nsIBaseWindow.NS_IBASEWINDOW_IID);
baseWindow.destroy(); 
```

这样做之后，您可以在其中创建带有 Mozilla / xul 的 SWT 浏览器的新实例。

问题是，您不能再访问 nsInterfaces（因为 Browser.getWebBrowser() 返回 null）！

有没有办法在 xulrunner 10 或 24 上以编程方式访问该 nsIBaseWindow 对象？

这是崩溃日志的片段（使用 xulrunner 24 和 JDK6 运行时生成）：

```
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [xul.dll+0xaa1b4c]  NS_CycleCollectorSuspect2+0xc
C  [xul.dll+0x6d45d1]  xpc_ActivateDebugMode+0x1a588
C  [xul.dll+0x6d1192]  xpc_ActivateDebugMode+0x17149
C  [xul.dll+0xa74003]  JSD_GetValueForObject+0x2b8625
C  [xul.dll+0xa72ffa]  JSD_GetValueForObject+0x2b761c
C  [xul.dll+0x70fdae]  xpc_ActivateDebugMode+0x55d65
C  [xul.dll+0x711bc6]  xpc_ActivateDebugMode+0x57b7d
C  [swt-xulrunner-win32-4426.dll+0x11d6]  Java_org_eclipse_swt_internal_mozilla_XPCOM__1VtblCall__II+0xe
j  org.eclipse.swt.internal.mozilla.XPCOM.VtblCall(II)I+9
j  org.eclipse.swt.internal.mozilla.nsIBaseWindow.Create()I+9
j  org.eclipse.swt.browser.MozillaDelegate.createBaseWindow(Lorg/eclipse/swt/internal/mozilla/nsIBaseWindow;)I+1
j  org.eclipse.swt.browser.Mozilla.initWebBrowserWindows()V+184
j  org.eclipse.swt.browser.Mozilla.create(Lorg/eclipse/swt/widgets/Composite;I)V+665
j  org.eclipse.swt.browser.Browser.<init>(Lorg/eclipse/swt/widgets/Composite;I)V+81
j  XulTest$1.run()V+47 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:10:54.537

自己编写一个 SWT / AWT(Swing) 桥是很困难的。我目前正在为此使用[DJNative](http://djproject.sourceforge.net/ns/)，并且效果很好。请试一试 ;）

## 为 SWT 浏览器安装自己的 XULRunner

1.  首先从 Mozilla 下载一个 xulrunner 运行时。
2.  在任何地方提取它并记住应用程序引导期间的路径
3.  `org.eclipse.swt.browser.XULRunnerPath` 使用您的 xulrunner 安装路径设置以下系统属性

通过这种方法，您可以将预定义的 xulrunner 安装与您的应用程序一起发布。

# javascript - 加载 Txt 文件时出现 JQuery Load() 错误

> ID：13960381
> 
> 赞同：0
> 
> 时间：2012-12-19T20:09:47.807
> 
> 标签：javascript, jquery, html

我似乎无法让 jQuery 加载功能正常工作。

我的 HTML

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<script  type="text/javascript" src="jquery.js"></script> 
<script type="text/javascript" src="Jquery_script.js"></script>

<script>$(document).ready(function(){ladda(); });</script>
</head>

<body>

<form namne="load">
<fieldset>
    <legend>load</legend>
        <table>
        <tr>
            <td><div id="L1"><h1>vill du ändra denna text</h1></div></td>
        </tr>
         </table>
    <button id="load_text">ändra</button>
</fieldset>
</form>

</body>
</html> 
```

问题是加载按钮不加载外部内容

javascript文件：

```
(function($){
    ladda = function() {
    $("#load_text").click(function(){
            $("#L1").load("innehall.txt", function() {
                alert('Load was performed.');
            });
        });
    };
})(jQuery); 
```

和仅外部 .txt 文件

```
<h2>du har ändrat innehållet</h2>
<p>detta är det nya innehållet</p> 
```

请帮助我弄清楚为什么 .txt 文件在按下按钮“ändra”时没有替换 div id="L1" 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:15:14.413

检查文件的路径并注意：Chrome（如果您使用该浏览器）不允许本地 XHR 请求（例如，您不能将 less.js 与本地 .less 文件一起使用）。

# java - 在Java中拆分字符串以仅显示字符序列

> ID：13960385
> 
> 赞同：4
> 
> 时间：2012-12-19T20:09:59.313
> 
> 标签：java, regex, split

我正在尝试拆分一个字符串，如下面的字符串

```
3x2y3+5x2w3–8x2w3z4+3-2x2w3+9y–4xw–x2x3+8x2w3z4–4 
```

到没有任何数字或符号的字符串表。

这意味着

```
a[0]=x
a[1]=y
a[2]=x
a[3]=w 
```

我试过这个

```
split("(\\+|\\-|\\d)+\\d*") 
```

但似乎它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:17:44.160

以下应该有效：

```
String[] letters = input.split("[-+\\d]+"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:17:25.160

**编辑： -**

如果你想`xw`在你的结果数组中在一起，那么你需要拆分你的字符串：-

```
String[] arr = str.split("[-+\\d]+"); 
```

**输出： -**

```
[, x, y, x, w, x, w, z, x, w, y, xw, x, x, x, w, z] 
```

* * *

您可以用空字符串替换所有不需要的字符，并在空字符串上拆分。

```
String str = "3x2y3+5x2w3-8x2w3z4+3-2x2w3+9y-4xw-x2x3+8x2w3z4-4";
str = str.replaceAll("[-+\\d]", "");        
String[] arr = str.split("");       
System.out.println(Arrays.toString(arr)); 
```

请注意，这将添加一个空字符串作为您可以处理的数组的第一个元素。

**输出： -**

```
[, x, y, x, w, x, w, z, x, w, y, x, w, x, x, x, w, z] 
```

* * *

请注意，`-`您的问题登录是不同的。您应该将其替换为键盘上的那个。目前它不是匹配的`-`标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:14:49.917

这一条线可以做到这一切：

```
String[] letters = input.replaceAll("(^[^a-z]*)|([^a-z]*$)", "").split("[^a-z]+"); 
```

这也处理前导/尾随字符，因此您不会在数组的开头得到空白元素（就像其他一些答案一样）

用你的字符串进行测试：

```
public static void main(String[] args) {
    String input = "3x2y3+5x2w3–8x2w3z4+3-2x2w3+9y–4xw–x2x3+8x2w3z4–4";
    String[] letters = input.replaceAll("(^[^a-z]*)|([^a-z]*$)", "").split("[^a-z]+");
    System.out.println(Arrays.toString(letters));
} 
```

输出：

```
[x, y, x, w, x, w, z, x, w, y, xw, x, x, x, w, z] 
```

请注意，数组中没有前导“空白”元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:23:33.157

**备注 - 和 - 不是相同的代码，一个只是 ascii 减去另一个是 long （编码 UTF8 e28093 ）**

```
public class Test {
    public static void main(String pArgs[])
    {
        String s="3x2y3+5x2w3–8x2w3z4+3-2x2w3+9y–4xw–x2x3+8x2w3z4–4";
        String splitreg="(\\+|\\-|\\d|–)+\\d*";     if ( pArgs.length > 0 )
            {
                splitreg=pArgs[0];
        }
        System.out.println("splitting '" + s + "' with '"  + splitreg + "'"); 
        String[] splitted=s.split(splitreg);
        for (int i=0; i < splitted.length; i++ )
            {
                System.out.println("["+ i + "]" + "=" + splitted[i]);
            }
    }
} 
```

*/usr/lib/jvm/java-1.7.0-openjdk-amd64/bin/java 测试*

```
splitting '3x2y3+5x2w3–8x2w3z4+3-2x2w3+9y–4xw–x2x3+8x2w3z4–4' with '(\+|\-|\d|–)+\d*'
[0]=
[1]=x
[2]=y
[3]=x
[4]=w
[5]=x
[6]=w
[7]=z
[8]=x
[9]=w
[10]=y
[11]=xw
[12]=x
[13]=x
[14]=x
[15]=w
[16]=z 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:25:42.370

```
String[] letters = input.split("[\\d\\+\\-]+"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T20:52:02.783

这是你想要达到的目标吗？

```
 String data="3x2y3+5x2w3–8x2w3z4+3-2x2w3+9y–4xw–x2x3+8x2w3z4–4";

 //lets replace all unnecessary elements with spaces
 data=data.replaceAll("[-+–\\d]", " ");
 // now string looks like:
 // " x y   x w   x w z     x w   y  xw x x   x w z   "

 // lets remove spaces from start and end
 data=data.trim();
 // data looks like:
 // "x y   x w   x w z     x w   y  xw x x   x w z"

 // and split in places where is at least one space
 String[] arr=data.split("\\s+");

 System.out.println(Arrays.toString(arr)); 
```

输出：

```
[x, y, x, w, x, w, z, x, w, y, xw, x, x, x, w, z] 
```

# python - Django 数据库优化？这是慢还是正常？

> ID：13960386
> 
> 赞同：2
> 
> 时间：2012-12-19T20:10:14.960
> 
> 标签：python, mysql, django, amazon-web-services, rds

我有几个与数据库性能有关的问题。我的应用程序中有以下 Django 模型及其相应的管理类。数据库是 MySQL，它托管在 Amazon RDS 上。

1.  通过 for 循环在 Notifications 表中添加大约**45000 条记录**需要**20 多分钟。**这个时间是慢还是正常？
***   这个表的 django 管理界面太慢了。在无 dB 负载下加载大约需要 30 秒。并且数据库在执行任何工作时通常需要 2 分钟以上的时间来加载。该表通常每周或每两周添加一百万条记录。有没有办法提高数据库和/或系统的性能，或者这个当前的加载时间是否正常？**

 ****模型**

```
class Notification(models.Model):
    id = models.AutoField(primary_key=True)
    token = models.ForeignKey(Token, blank=False, null=False)
    alert = models.ForeignKey(Alert, blank=False, null=False)
    created_at = models.DateTimeField(auto_now=True)
    is_sent = models.BooleanField(default=False)
    is_processed = models.BooleanField(default=False)
    error_sending = models.BooleanField(default=False)
    # ...
    def __unicode__(self):
        return u'%s' % (self.alert ) 
```

**行政**

```
class AppNotification(admin.ModelAdmin):
    fields = ['token','alert','is_sent','is_processed','error_sending']

    #
    list_display = ('token','alert','created_at','is_sent','is_processed','error_sending')

    #
    search_fields = ('app__app_name','token__token')

    #
    list_select_related = True

    #
    list_per_page = 25

admin.site.register(Notification,AppNotification) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:15:53.877

关于你的第二个问题：

> 这个表的 django 管理界面太慢了。在无 dB 负载下加载大约需要 30 秒。并且数据库在执行任何工作时通常需要 2 分钟以上的时间来加载。

这似乎是一个缓慢的查询？一个好的起点是查看正在运行哪些查询（django 调试工具栏）并使用您的数据库提供的工具[`explain`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)来调试它们并添加适当的索引

* * *

在 django 1.4[`bulk_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)中添加了方法，该方法至少可以减少通过网络传输数据以进行插入的时间？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T20:22:47.673

> 通过 for 循环在 Notifications 表中添加大约 45000 条记录需要 20 多分钟。这个时间是慢还是正常？

在这种设置中并不罕见。如果速度很重要，Django ORM 并不快，也不是添加数千个条目的好方法。RDS 的速度取决于实例类型，但通常低端的也不快。

替代方法是使用低级 SQL 或使用[`bulk_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)，但是您必须记住，这些方法都不会调用对象`.save()`，也不会发送`pre_save`和`post_save`发出信号。在这些包含大量业务逻辑的情况下，这可能是一个问题。

> 这个表的 django 管理界面太慢了。在无 dB 负载下加载大约需要 30 秒。并且数据库在执行任何工作时通常需要 2 分钟以上的时间来加载。该表通常每周或每两周添加一百万条记录。有没有办法提高数据库和/或系统的性能，或者这个当前的加载时间是否正常？

你有`list_select_related = True`你的模型管理员，这似乎是唯一可以让它变慢的东西。它确实加入了`Tokens`and `Alerts`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T21:36:50.237

我最近遇到了完全相同的问题，不得不深入挖掘以找到解决方法，以让我的 Django 管理员为拥有 100M+ 记录的表而嗡嗡作响。我的问题最终是`COUNT(*)`页面加载时的昂贵查询，以及每当我使用`search_fields`来自`ModelAdmin`.

经过大量的研究和思考，我想出了一些不错的解决方案并在此处记录它们：http: [//crailabenz.me/2013/06/12/how-i-made-django-admin-scale/](http://craiglabenz.me/2013/06/12/how-i-made-django-admin-scale/)**

# javascript - Javascript：IE 全高

> ID：13960387
> 
> 赞同：0
> 
> 时间：2012-12-19T20:10:15.303
> 
> 标签：javascript, lightbox, lightbox2

我有以下代码来计算来自[该站点](http://leandrovieira.com/projects/jquery/lightbox/)的灯箱插件的窗口宽度。

```
 * getPageSize() by quirksmode.com
     *
     * @return Array Return an array with page width, height and window width, height
     */
    function ___getPageSize() {
        var xScroll, yScroll;
        if (window.innerHeight && window.scrollMaxY) {  
            xScroll = window.innerWidth + window.scrollMaxX;
            yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
            xScroll = document.body.scrollWidth;
            yScroll = document.body.scrollHeight;
        } else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
            xScroll = document.body.offsetWidth;
            yScroll = document.body.offsetHeight;
        }
        var windowWidth, windowHeight;
        if (self.innerHeight) { // all except Explorer
            if(document.documentElement.clientWidth){
                windowWidth = document.documentElement.clientWidth; 
            } else {
                windowWidth = self.innerWidth;
            }
            windowHeight = self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
            windowWidth = document.documentElement.clientWidth;
            windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
            windowWidth = document.body.clientWidth;
            windowHeight = document.body.clientHeight;
        }   
        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
            pageHeight = windowHeight;
        } else { 
            pageHeight = yScroll;
        }
        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){  
            pageWidth = xScroll;        
        } else {
            pageWidth = windowWidth;
        }
        arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight);
        return arrayPageSize;
    }; 
```

我注意到在 Internet Explorer 9 中，当我单击图像并激活 Lightbox 插件时，透明的背面覆盖仅覆盖 VIEWABLE 高度而不是整个高度。

![在此处输入图像描述](../Images/bc67406e5be9c49501dcf5a5664d368e.png)

这会产生一个问题，因为如果我有另一个带有修改后的灯箱插件的图像并单击透明覆盖层下方，它会在页面顶部打开另一个空灯箱窗口并且无法关闭。

它在 Chrome 和 Firefox 中运行良好。

# php - 将drupal面包屑的href更改为自定义链接

> ID：13960391
> 
> 赞同：0
> 
> 时间：2012-12-19T20:10:32.247
> 
> 标签：php, drupal-7, breadcrumbs

我需要将面包屑的`href`属性更改`drupal7`为自定义 URL。

我无法找到它生成链接的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:17:56.643

有一个很棒的模块，叫做 Hansel，可以完成这项工作：

[http://drupal.org/project/hansel](http://drupal.org/project/hansel)

说明，如何设置 Hansel 在这里：

[http://www.knackforge.com/blog/sabareesh/breadcrumbs-hansel-module-1-introduction](http://www.knackforge.com/blog/sabareesh/breadcrumbs-hansel-module-1-introduction)

[http://www.knackforge.com/blog/sabareesh/breadcrumbs-hansel-module-2-steps-create-breadcrumbs-all-scenarios](http://www.knackforge.com/blog/sabareesh/breadcrumbs-hansel-module-2-steps-create-breadcrumbs-all-scenarios)

# c++ - 新项目构建时出错 - 未更改代码

> ID：13960398
> 
> 赞同：1
> 
> 时间：2012-12-19T20:11:04.397
> 
> 标签：c++, macos, qt, osx-mountain-lion

我在 Mountain Lion 上安装了 4.8.4 QT 库。然后我安装了 QT Creator。

由于没有 CMD 工具/Xcode，我在编译时遇到了问题。

然后我安装了这些，现在在运行应用程序时，出现以下错误。

![错误！](../Images/7344218c6ce8355e5b1db8828af8d527.png)

值得一提的是，这是一个新项目，我没有更改任何代码，只是尝试运行它，这就是结果。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:33:16.320

听起来您在 32 位机器上安装了 64 位 Qt 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T01:56:19.430

这个问题的解决方案是我在 64 位机器上选择了 32 位编译器。就如此容易！

# apache - 无法远程连接到 Node.js 服务器

> ID：13960399
> 
> 赞同：1
> 
> 时间：2012-12-19T20:11:23.863
> 
> 标签：apache, node.js, remote-access

我刚刚开始使用 Node.js，我遇到了一个问题，我只能在本地访问我的 Node 服务器。我在这里松散地遵循教程：http: [//coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/](http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/)。

我将代码托管在 Apache 服务器共享上，尽管我已经让它在我的 win7 机器上本地运行。服务器共享托管实例运行良好，我可以用 lynx 在本地 ping 它，它运行良好。但是，当我尝试通过 hostname.com:3001 或 hostname.com:3001/wines 远程访问实例时，它只是超时。我的服务器日志显示该端口上的传入连接，但它似乎没有通过实例。

我尝试将实例从我的 Node 开发目录移动到 www 目录，认为这是一个权限问题，但这并没有帮助。我完全不熟悉使用 Apache，所以我可能缺少某种基本权限设置。该共享托管在 bluehost 上，物有所值。我检查了管理员设置，但找不到任何会阻止该端口的防火墙。

```
var express = require('express');
var http = require('http');
var app = express();
var server = http.createServer(app);

app.get('/', function(req, res){
        console.log('ping');
});
app.get('/wines', function(req, res){
        console.log('req @ /wines');
        res.send([{name:'wine1'},{name:'wine2'},{name:'wine foo'}]);
});

server.listen(3001);
console.log('listening to port ', server.address().port); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:28:27.613

为了在 bluehost 中工作，您首先必须拥有一个专用 IP 帐户（请参阅[https://my.bluehost.com/cgi/help/405](https://my.bluehost.com/cgi/help/405)），然后您必须请求他们允许传入连接到端口 3001。

但是，我怀疑如果你想要 nodejs，你最好找一个新的托管服务提供商。

# c# - 使用上下文或创建方法在控制器中获取数据？

> ID：13960404
> 
> 赞同：4
> 
> 时间：2012-12-19T20:11:29.137
> 
> 标签：c#, asp.net-mvc, entity-framework

以下哪一项是正确的，或者至少是最好的：

创建一个在控制器中检索数据的方法：

```
public ActionResult Index()
{
    var list = _context.MyClass.Take(10);
    return View(list);
} 
```

或直接使用上下文：

```
public ActionResult Index()
{
    var list = MyClass.MethodWrapperToGet(10);
    return View(list);
} 
```

我对第一个问题的担心是数据库过于暴露；让开发人员很容易误用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:17:21.167

理想情况下，您使用公开 _context 的变体，您可以通过依赖注入传递该上下文，以便您可以对控制器进行单元测试。

静态调用很难测试，至少在 .Net 中是这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:22:45.630

这实际上取决于您的项目的大小。对于小型或快速原型，我会选择控制器`DbContext`直接访问的选项。

```
public ActionResult Index()
{
    var list = _context.MyClass.Take(10);
    return View(list);
} 
```

我个人更喜欢分开音乐会。换句话说，我将创建一个服务类，将控制器所需的数据准确地传递给控制器​​。请记住，Controller 不应该知道**如何执行任务**，而是应该知道**what 之后需要执行什么**。

当然，这并不意味着您必须实现存储库模式。`DbContext`如果您愿意，您的服务类可以直接访问。

# excel - Excel VBA - 一次选择多个切片器项目而无需刷新

> ID：13960407
> 
> 赞同：2
> 
> 时间：2012-12-19T20:11:40.540
> 
> 标签：excel, pivot-table, vba

我正在尝试从单个切片器中选择和取消选择多个切片器项目，而不让它触发更新，直到我的所有选择都完成。通过按住 Ctrl 键单击我想要的所有选择，我可以在 Excel 前端非常简单地做到这一点。但是，当我记录具有此行为的宏并运行它时，它会在每次选择/取消选择后更新（记录的宏只是块中的一堆`.Selection = True/False`语句`With`）。

我尝试使用该`SlicerCaches.VisibleSlicerItemsList`函数，但这会引发 1004 应用程序错误 - 即使我已使用该`SlicerItem.Name`字段填充数组：

```
Dim tntw(0 To 2) as Variant
For i = 0 To 2
    tntw(i) = sc.SlicerItems(i + 1).Name
Next i
sc.VisibleSlicerItemsList = tntw 
```

我还尝试将所有相关的数据透视表设置为此手动更新，并尝试将 application.calculation 设置为手动（并在最后切换回），但都没有完成我想要的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T14:43:37.040

在您的选择放之前

```
Application.Calculation = xlmanual 
```

在您选择之后

```
Application.Calculation = xlautomatic 
```

这对我来说非常有效。我有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T20:07:06.720

正如@joseph4tw 在评论中发布的那样，真正需要的只是这`Application.EnableEvents = False`条线。但是，在迭代最终的切片器以使事件真正触发之前，我需要再次重新启用事件。我不再有权访问代码（以前的工作），但想象一下解决方案涉及计算切片器的数量和循环调用中的 n-1 以重新启用事件。

# matlab - 生物信息学matlab工具箱中多序列比对的蚁群算法

> ID：13960408
> 
> 赞同：0
> 
> 时间：2012-12-19T20:11:45.733
> 
> 标签：matlab

是否有任何用于生物信息学中多序列比对的蚁群算法的 matlab 工具箱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:30:41.270

可能有一个用于白蚁群落，但您必须处理类型转换：p

否则我会检查[http://www.mathworks.com/products/](http://www.mathworks.com/products/) 或者更具体地说[http://www.mathworks.com/products/bioinfo/](http://www.mathworks.com/products/bioinfo/)

# xml - 强制在肥皂消息中使用 xmlns 前缀

> ID：13960409
> 
> 赞同：2
> 
> 时间：2012-12-19T20:11:48.263
> 
> 标签：xml, wcf, cxf

调用 java SOAP 服务时，我需要强制 WCF 使用 XML 命名空间前缀

我传出的肥皂消息目前如下所示：

```
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<getStuff xmlns="http://XXXXXX.com/">
<Id>84</Id>
</getStuff>
</s:Body> 
```

我需要它利用 cxf 服务的命名空间前缀来正确解析消息。

```
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<nsXX:getStuff xmlns:nsXX="http://XXXXXX.com/">
<nsXX:Id>84</nsXX:Id>
</nsXX:getStuff>
</s:Body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:00:21.613

在我继续讨论一个解决方案之前，请注意这两个 XML 是不同的：在第一个中，元素`<Id>`位于`http://XXXXXX.com/`名称空间中，而在第二个中，元素位于空名称空间中。这真的是你想要的吗？

如果是这样，您将需要使用自定义编码器才能在编写消息时更改 WCF 使用的前缀。一种简单的实现是包装现有的编码器并将大多数调用委托给原始编码器。在编写传出消息时，您首先将其委托给原始编码器，将其写入本地缓冲区。然后，您可以根据需要更改 XML，然后将该消息返回给调用者。

[http://blogs.msdn.com/b/carlosfigueira/archive/2010/06/13/changed-prefixes-in-xml-responses.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2010/06/13/changing-prefixes-in-xml-responses.aspx)上的帖子显示了此场景的一种实现。

# ios - 光标在 UITextField 中闪烁，但没有出现键盘

> ID：13960410
> 
> 赞同：3
> 
> 时间：2012-12-19T20:11:51.400
> 
> 标签：ios, xcode, keyboard, uitextfield, becomefirstresponder

我得到了一个带有文本字段的简单细节视图。详细的 viewController 我写了这段代码：

```
- (void) viewDidAppear:(BOOL)animated{
    [self.textField becomeFirstResponder];
    NSLog(@"is textField 1st responder %d", [self.textField isFirstResponder]);
} 
```

当我将详细信息推送到导航控制器时，我在日志中看到“ *is textField 1st responder 0* ”。键盘没有出现。但是文本字段有闪烁的光标。

这一刻会发生什么？为什么键盘不显示？我确实尝试在我的 AppDelegate 中捕捉到通知“KeyboardDidShown”，但没有捕捉到任何东西： ![在此处输入图像描述](../Images/cc206f132feb79e7f9d188e1a97491d7.png)

这是我的主视图设计：

![在此处输入图像描述](../Images/e8788c9a8b3b66fc5b622e5b4dbd6114.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:35:38.207

打电话`reloadInputViews`有用吗？

# php - 使用属性值作为方法名

> ID：13960412
> 
> 赞同：1
> 
> 时间：2012-12-19T20:12:07.190
> 
> 标签：php

我需要在我的类中使用属​​性的值作为动态方法名称，但我得到了：

```
 Catchable fatal error: Object of class dispatcher could not be converted to string in ... 
```

我想做的是：

```
 class test {
      var $objectname = "object_name";
      var $methodname = "method";

      public function test_method() {
           require_once("some_class_file");
           // Here is where I am falling out:
           $some_object = new $this->objectname();
           $some_object->$this->methodname();
      }
 } 
```

所以换句话说，我想从我的类中预先存在的属性中动态设置对象名称和潜在方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:14:19.890

由于以下行而生成错误：

```
 $some_object->$this->methodname(); 
```

用。。。来代替 ：

```
 $some_object->{$this->methodname}(); 
```

# php - 按位访问控制列表是否被视为反模式？

> ID：13960414
> 
> 赞同：2
> 
> 时间：2012-12-19T20:12:19.203
> 
> 标签：php, user-interface

按位访问控制列表是否被视为反模式？我很好奇，因为我在我正在开发的应用程序中看到了这一点，虽然它看起来很有趣，但它有点工作，但普遍的共识是什么。我在其中看到的缺点是很难知道权限 8 是什么，因此更容易看到“编辑器”或“经理”。但按位方法似乎在技术层面上起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:18:40.553

它节省了存储空间，并且在任何地方都可以使用。例如，它非常适合您有一个人既是“编辑”又是“经理”的情况。而且您不必记住权限 8 是什么，您应该拥有引用您定义一次然后不必担心的那些数字的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:23:38.190

这不是一个反模式，但它确实有一些重要的问题需要注意：

*   使用位域进行访问控制使得无法有效地列出给定用户有权访问的对象。（搜索`canRead = 1`可以在 SQL 中建立索引，但`permissions & 0x40 = 0x40`不能。）
*   整数中的位数是有限的。确保您永远不需要超过 31 个。（使用符号位很麻烦，并且 PHP 在 32 位系统上运行时没有 64 位整数。）事实上，避免将它们用于任何动态分配的内容 - - 最好只将它们用于内置权限。
*   位掩码在数据库控制台中更难阅读。

总的来说，在数据库中使用一堆单独的`TINYINT`（或类似的）标志可能会好得多。将值打包到位域中所节省的存储空间不太可能值得麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:16:22.540

我不知道是否有官方共识，但因为如果它没有以某种聪明的方式使用字符串，我会认为它是一种反模式，因为你会受到特定数字类型使用的位数的限制。

您可能非常了解您的项目的范围，可以确定您永远不会超过 32/64。

权限值的可读性并没有引起太多关注。

# c# - 以编程方式将子节点添加到 xamdatatree 节点

> ID：13960423
> 
> 赞同：1
> 
> 时间：2012-12-19T20:12:38.400
> 
> 标签：c#, wpf

该代码`visualNode.Nodes.Add`给出了*NullReferenceException*，因为此时节点未启动。

```
private XamDataTreeNode LoadTree(XmlNode dataNode, int index)
{
    XamDataTreeNode visualNode = new XamDataTreeNode(index, null, MakeTextBox(dataNode.Name), false, null);

    foreach (XmlNode child in dataNode.ChildNodes)
    {
        visualNode.Nodes.Add(LoadTree(child, VisualChildrenCount));
    }

    visualNode.IsExpanded = true;

    return visualNode;  
} 
```

我试过使用`ItemsSource`，但`XamDataTreeNode.ItemsSource`受保护。

那么如何填充`XamDataTree`值呢？

我可以使用 WPF 树控件来做到这一点，但不能使用 Infragistics 树控件。

编辑，我会澄清一些：

@HighCore：我要使用的 UI 元素以及它们的外观只能在分析数据后确定。

@DJ：当数据结构可以是任何 xml 结构时，您将如何进行数据绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:09.817

我通过将 XamDataTree 映射到一个树结构来解决这个问题，其中提供了一个标签用作内容。使用标准的[PropertyChangedNotifier](http://www.e-pedro.com/2009/04/creating-a-custom-observable-collection-in-wpf/)

```
public class TreeNode : PropertyChangedNotifier
{
  private Label text;
  private System.Drawing.Image icon;
  private ObservableCollection<TreeNode> children;
}

        <ig:XamDataTree.GlobalNodeLayouts>
            <ig:NodeLayout
                Key="Children"
                DisplayMemberPath="Text"
                TargetTypeName="Model.TreeNode" 
                >
            </ig:NodeLayout>
        </ig:XamDataTree.GlobalNodeLayouts> 
```

# cucumber - 水豚与黄瓜给出假阳性

> ID：13960434
> 
> 赞同：2
> 
> 时间：2012-12-19T20:13:27.720
> 
> 标签：cucumber, capybara

我有这些测试步骤。app_host 指向“google.com”。

```
 Given /^I am on google\.com$/ do
      visit("/")
  end

  Then /^I should see something$/ do
      has_css?('a#something')
  end 
```

无论我在第二步中有什么，测试都通过了。我只是想知道我是否在这里遗漏了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:29:14.150

只有当断言失败时，黄瓜步骤才会失败。它们不会根据最后一行是真还是假而失败。

要`has_css?`在断言中使用，您可以执行以下操作之一：

```
#If you are using RSpec assertions
page.should have_css('a#something')

#If you are using Test::Unit assertions
assert page.has_css?('a#something') 
```

# c# - 在后台工作期间调用

> ID：13960435
> 
> 赞同：2
> 
> 时间：2012-12-19T20:13:28.320
> 
> 标签：c#, background, invoke, worker

我需要调用这个：`string input_ip_r = listView1.Items[lc].SubItems[1].Text;` 所以我用

```
if (InvokeRequired)
{
    this.Invoke(new MethodInvoker(function));
    return;
} 
```

这有效，但现在我已将其放入`BackgroundWorker`并使用它

```
if (InvokeRequired)
{
    this.Invoke(new MethodInvoker(bw.RunWorkerAsync));
    return;
} 
```

它给出了一个错误，您一次只能运行`BackgroundWorker`一个。

那么如何在 中调用 while`Backgroundworker`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T20:18:49.900

1）不要`RunWorkerAsync`作为调用的方法。它实际上并没有运行您认为的方法。你真正应该放的东西是这样的：

```
this.Invoke(new MethodInvoker(MethodToUpdateUI)); 
```

`MethodToUpdateUI`应该是您创建的一些新方法，专门执行在此上下文中应进行的任何 UI 更新。

2) 不需要`InvokeRequired`. 你在后台线程中。总是需要调用。

老实说，整个模式`if(invoke required) call myself else do stuff`是一个我不喜欢的奇怪结构。 `InvokeRequired`应该很少使用。你应该几乎总是知道你是在 UI 线程还是后台线程，如果你不知道，很可能有问题（要么你总是在一个或另一个，你只是不知道哪个，或者它不应该是不确定的）。通常这意味着拥有*必须*在 UI 线程中运行的方法。如果您已经在 UI 线程中，您只需调用它们，如果您在后台线程中并且知道它，那么您`Invoke`首先调用。

最重要的是，`Invoke`即使您已经在 UI 线程中调用它也可以正常工作，因此`Invoke`无论您是在后台线程中还是已经在 UI 线程中，调用都不会产生明显的负面影响。

3) 通常最好将解决业务问题的代码与 UI 代码分开。从 DoWork 的处理程序中调用是代码异味。如果这即将结束，您可能应该将事件处理程序添加到`RunWorkerCompleted`. 如果您定期调用它以使用工作人员的进度更新 UI，那么您应该正在使用`ReportProgress`和处理该`ProgressReported`事件。要从 UI 获取信息以用于长时间运行的任务，您应该在启动后台任务之前访问它。对于不属于上述任何一种的特殊情况，使用 可能是合适的`Invoke`，但其余情况应该很少见。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T21:26:39.630

我不太确定你想如何使用这些值，但只是给你一个例子，你可以很容易地在`BackgroundWorker`线程中这样做：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    string input_ip_r = "";
    this.Invoke(new Action(() => 
    {
        // Don't know what "lc" is (a loop variable?)
        input_ip_r = listView1.Items[lc].SubItems[1].Text;
    }));
} 
```

请参阅[此答案](https://stackoverflow.com/questions/978063/anonymous-delegates-in-c-sharp)以了解其他相同的方法（适用于 >= .Net 3.5）

# dart - 在 Dart M2 (web_ui) 中加载 Web 组件

> ID：13960440
> 
> 赞同：1
> 
> 时间：2012-12-19T20:13:49.983
> 
> 标签：dart, dart-webui

在我的飞镖之旅中，我偶然发现了一个加载组件的“阻塞器”。

虽然我的组件定义如下：

```
<!DOCTYPE html>
<element name="x-foo" constructor="FooComponent" extends="button">
  <template>
    <button type="button" class="btn {{classes}}"> {{text}} </button>
   </template>

   <script type="application/dart">

   import 'package:web_ui/web_ui.dart';

   String classes = '';
   String text = '';

   class FooComponent extends WebComponent {

   }
   </script>
</element> 
```

并引用组件如下：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>example</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- '../web/foo.html' or '../web/out/foo.html.dart' -->
    <link rel="components" href='foo.html'>
  </head>
  <body>
    <h1>example</h1>

    <p>Hello world from Dart!</p>

    <x-foo></x-foo>

    <script type="application/dart">void main() { }</script>
    <script type="text/javascript" src="dart.js"></script>
  </body>
</html> 
```

而且我的构建脚本没有创建 html 文件（输出文件夹：foo.html.dart），我不确定我必须参考哪个文件。

该手册的声明性也不足以解决我的问题： [http ://www.dartlang.org/articles/dart-web-components/spec.html#loading-components](http://www.dartlang.org/articles/dart-web-components/spec.html#loading-components)

引用组件的定义 (foo.html) 或其生成的输出 (foo.html.dart) 都不起作用。我还通过检查仔细检查了这两个文件的路径，这两个文件都下载了铬。

我的结论性问题：这个参考（链接元素href）是指向内部智能还是指向运行时的“物理”可用文件？如果是第二个，哪个（生成的（html/dart）或来源）？

为了避免误解，我添加了我的回购清单：

```
foo
  packages
  examples
    assets
    dart.js
    example.html
  web
    out
      foo.html.dart
    foo.html
  build.dart 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:10:12.840

组件文件 ( `foo.html`) 缺少`<html><body>...</body></html>`标记：

```
<!DOCTYPE html>
<html>
<body>
<element name="x-foo" constructor="FooComponent" extends="button">
...
</element>
</html>
</body> 
```

两个文件 (`examples.html`和`foo.html`) 必须在同一个基目录中：

```
web
  examples.html
  foo.html
  ... 
```

然后，`examples.html`需要用作内部参数`build.dart`：

```
build(new Options().arguments, ['web/example.html']); 
```

最后，`foo.html`（即`web/foo.html`）必须是要链接的那个：

```
<link rel="components" href='foo.html'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:00:39.950

您在主 HTML 文件中使用它的方式是正确的。你引用`foo.html`是因为引用的 HTML 文档需要用 dwc 编译。dwc 将获取主 HTML 文件并编译它以及它包含的所有组件。该组件已完全编译为 Dart，它们的`.html`文件将不再使用。

如果您尝试编辑 example.html 以包含您的组件，则需要 compile`example.html`而不是`foo.html`. 您仍然会生成 foo.html.dart，而且还会生成`example.html.dart`一个引导脚本来加载所有内容。

# xml - 仅在 xslt 中单例标签的模式匹配

> ID：13960443
> 
> 赞同：2
> 
> 时间：2012-12-19T20:13:52.773
> 
> 标签：xml, xslt, match

是否可以有类似于`<[a-zA-Z0-9]></[a-zA-Z0-9]>`匹配 xslt 样式表中每个节点的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:25:59.850

你不想使用正则表达式。只需使用谓词来匹配不包含任何子节点的标签（元素）...

```
<xsl:template match="*[not(node())]">
    ...
</xsl:template> 
```

您想如何对仅具有属性（如`<foo attr="bar"/>`）的元素进行分类？

如果您不想将具有属性的元素分类为单例，您可以将谓词更改为：

```
<xsl:template match="*[not(node()) and not(@*)]">
    ...
</xsl:template> 
```

# objective-c - NSLocalizedString 问题

> ID：13960445
> 
> 赞同：2
> 
> 时间：2012-12-19T20:14:04.173
> 
> 标签：objective-c, xcode, nsstring, nslocalizedstring

我有 eng、span、port、rus、arab、chin 的 Localizable.strings 文件。

一个非常奇怪的问题开始发生，关键是显示而不是值。奇怪的是，这就是导致它停止工作的原因：

我有：

```
self.title = NSLocalizedString(@"1OF5", @""); 
```

在 ViewControllerA 中，效果很好。然后我将这行代码复制并粘贴到 ViewControllerB。现在显示键 '1OF5' 而不是 .strings 文件中的值。

所有其他 NSLocalizedStrings 在整个应用程序中都可以正常工作（其中 100 多个），除了这个 >:|

我试过了：

1.  删除应用程序并重新安装
2.  重启设备
3.  清理项目并重新安装
4.  重启设备，清理项目，重新安装
5.  删除 .strings 文件并再次添加

我正在把头发拉出来。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:23:08.570

`NSLocalizedString`是 的宏`-[NSBundle localizedStringForKey:value:table:]`，其中`table`是 nil。这一切都意味着，通过这个宏，您可以在`Localizable.strings`位于应用程序主包中的资源文件中查找您的字符串。

确保键“10F5”引用的字符串位于`Localizable.strings`主包内的一个文件中。如果它*不在*主包中，那么您需要使用宏`NSLocalizedStringFromTableInBundle`来代替。

最后一件事：冒着提出愚蠢观点的风险，请确保您与您的“0”或“O”保持一致。

# jquery - 如何在选择中隐藏选定的元素？

> ID：13960447
> 
> 赞同：1
> 
> 时间：2012-12-19T20:14:10.917
> 
> 标签：jquery, html, css

如何隐藏选择中的选定元素？

见图片：

**图一** ![图一](../Images/7a9bb78515ecbefe647aff7b4e3ce9aa.png)

**图二** ![图二](../Images/fff177ebc7604f63710a3ed89c9eb440.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:25:08.040

你不需要javascript，但只需要一行css：

```
option:checked { display: none; } 
```

演示：

[http://jsfiddle.net/kJckW/2/](http://jsfiddle.net/kJckW/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:16:51.073

这一切都取决于你的加价。

```
$("#select_id option[value='foo']").remove(); 
```

这是[jsfiddle](http://jsfiddle.net/kJckW/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:19:39.530

好吧，您没有发布任何标记或代码，但我会为您制作一些：

```
<select id="shirts">
   <option>blue shirt</option>
</select>

$("#shirts").on('change', function () {
   //Remove the hidden input and restore the removed value
   if ($("#trueshirt").length) {
      $(this).append("<option>" + $("#trueshirt").val() + "</option>");
      $("#trueshirt").remove();
   }

   //get the selected value
   var val = $(this).val();

   //Remove the option as requested (simply hiding it is incompatible with
   //some browsers)
   $("option:selected", this).remove();

   //Create hidden input to keep the value
   $("<input>").val(val).attr({'type': 'hidden', 'name': 'shirt', id: 'trueshirt'})
      .insertAfter(this);
}); 
```

# java - 利用 cron 从远程程序终止数据库作业的策略

> ID：13960448
> 
> 赞同：0
> 
> 时间：2012-12-19T20:14:16.047
> 
> 标签：java, sql, oracle, cron, database-backups

**我还没有为此编写一个潜在的解决方案，所以在有人问我有零代码来支持它之前，我正试图牢牢掌握需要发生的事情背后的处理。**

我的问题是我有一个 Oracle 数据库，它将不断（每 10 分钟左右）启动作业，我需要一种安全的方式（安全和数据完整性）来终止这些作业并防止它们在每晚执行备份发生。为了便于讨论，这将通过 cron 作业来完成。我认为它应该工作的方式是 cron 作业将在凌晨 1 点启动（或其他一些低使用时间，低我的意思是 < .001% 的用户群将与系统交互）。java 进程将需要在数据库上执行一些 PL/SQL 函数来执行以下操作：

```
1)  A force terminate on all running jobs  
2)  A snapshot of data that is to be written to an arbitrary directory  
3)  Restart all jobs  (mark them as enabled instead of disabled) 
```

我的问题是这样的：

假设 Oracle 正确生成撤消/重做日志，如何以最少的权限实现这一点？这种松散的架构是否有助于防止数据损坏？如果这是一种不安全/糟糕的方式，我们将不胜感激任何其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:29:38.257

In Oracle 10+ DBMS_Scheduler has a window definition that does exactly what you want. When the window ends, processing of running jobs can be terminated.

[http://docs.oracle.com/cd/E14072_01/appdev.112/e10577/d_sched.htm](http://docs.oracle.com/cd/E14072_01/appdev.112/e10577/d_sched.htm)

# eclipse - Eclipse 包和插件有什么区别？

> ID：13960450
> 
> 赞同：5
> 
> 时间：2012-12-19T20:14:16.640
> 
> 标签：eclipse, eclipse-plugin, package

在 Dependencies 选项卡中，我可以在插件和包之间进行选择。他们之间有什么区别？对于`org.eclipse.compare`，我在导入的包和插件中都有它。

![在此处输入图像描述](../Images/1caea2b235ef4a6e8c3dee332be4bfac.png)

![在此处输入图像描述](../Images/68747c6cba58302fb74b57e6fdc72ddc.png)

我在plugins目录下找到jar文件，但是不知道org.eclipse.compare的包文件在哪里。

![在此处输入图像描述](../Images/deb2f3bfe0d7dbc67a6de792b6f7f9fc.png)

在导出菜单中，似乎只有导出到 jar，而不是导出插件或包。如何导出包？

![在此处输入图像描述](../Images/2934e88a5b4f24768f20ba6d7b86c0be.png)

## 添加

基于这篇文章 -[如何从 Eclipse 导入包？](https://stackoverflow.com/questions/2681161/how-to-import-a-package-from-eclipse)和shiplu的回答。这就是我明白的。如果我错了，请纠正我。

1.  在 Eclipse 中，当我使用外部类时，我可以使用快速助手或组织导入 (Ctrl-Shift-O) 来解析引用。`Imported Packages`Eclipse为我正在处理的项目添加了包含该类的包。一个包可以包含多个类（类型）。Eclipse 了解哪些插件包含该包，并解决参考问题。
2.  一个插件（jar 文件）可以包含多个包。通过在依赖项选项卡中指定所需的插件，我们可以引用eclipse IDE中所有java项目的所有包（以及包中的类）。

根据我的经验，我必须添加所有依赖项才能使无头 RCP 独立（[http://prosseek.blogspot.com/2012/12/headless-rcp-standalone.html](http://prosseek.blogspot.com/2012/12/headless-rcp-standalone.html)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:18:49.623

Eclipse 插件基本上是一个带有附加 plugin.xml 文件的 OSGi 包，Eclipse IDE 可以理解和解释该文件。

因此，您的问题的答案在于 OSGi 规范和 OSGi 编程模型，因为简单地说，Eclipse 是一个运行在称为 Equinox 的 OSGi 实现上的应用程序。

OSGi 是关于拥有模块化应用程序的，因此它定义了多个级别的模块化。一个这样的级别是捆绑级别（模块级别）的模块化，更细粒度的级别是包级别的模块化。

因此，您可以拥有由 db-bundle（提供数据存储服务）、app-domain-bundle（提供应用程序域服务）和 remote-bundle（例如，它通过 REST 向 Web 公开您的应用程序）。

然后你说remote-bundle 依赖于domain-bundle，而domain-bundle 又依赖于db-bundle。这一切都很好，但削弱了 OSGi 提供的固有模块化，因为您基本上将您的应用程序限制为 db-bundle 和 remote-bundle 的特定实现，即它们提供的服务的特定实现。

相反，您可以不在包之间而是在包之间建立上述依赖关系，即建立服务级别的依赖关系。然后你说 domain-bundle 需要 dbstore.service 包才能运行，它并不关心哪个包提供它，它只需要这个服务的一个实例才能工作。因此，您可以拥有多个提供 dbstore.service 实现的包，并且域包可以在运行时选择要使用的服务。

用几句话来解释 OSGi 概念真的很难，我真的建议你在网上搜索一下，甚至看看 OSGi 规范。

另一种解释方式是说 bundle/plug-in 是一个具有特定结构和元数据描述符（MANIFEST.MF 和 plugin.xml）的 jar 文件，它用 Java 语言概念描述了它的内容——哪些 java 封装和服务于这个特定的jar 包含并将暴露给 OSGi 运行时，以便它们可以被其他包使用。即，捆绑包是物理可部署实体，而描述符是关于实际部署内容的元数据。

编辑：包或服务级别的依赖也有一些缺点，正如 Lii 在下面的评论中指出的那样，主要是它增加了依赖模型的复杂性和动态性。看看下面她或他的评论 - 值得一读！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:17:42.293

当您想使用`Imported Packages`特定包但不关心哪个插件提供它时使用。OSGI 将为您选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:24:38.333

Eclipse 插件类似于 IDE 本身的扩展。但导入的包实际上是您将在当前项目中使用的包。

一个用于开发 IDE，另一个用于您正在编码的项目。

# c# - 重载的方法签名 - 编译器将可空类型视为常规值类型的同义词

> ID：13960456
> 
> 赞同：4
> 
> 时间：2012-12-19T20:14:37.513
> 
> 标签：c#, .net, compiler-errors, nullable

我们有一个库，其中包含许多重载的方法，方法签名从值类型更改为可空值类型，如下所示：

一个。）`IsEmpty(int obj, int defaultValue)`

乙）`IsEmpty(int? obj, int defaultValue)`

如您所见，唯一的区别是 B 可以为空。在我办公室的大多数工作站上，这种重载编译和类型被认为是真正不同的。

但是，由于某种原因，我所有的机器和虚拟机都无法编译。我们目前对为什么会发生这种情况感到困惑。我使用的机器应该接近其他正在工作/编译的机器的镜像。

**以下是编译期间出现的错误示例：**

> *   错误 28 以下方法或属性之间的调用不明确：“BayTech.Common.Fix.IfEmpty(System.Guid, System.Guid)”和“BayTech.Common.Fix.IfEmpty(System.Guid, System.Guid?) ' C:\Projects\Applications\JukeWeb\BayTech\Internal\Common Library\VS2010\Apps\BayTech.Common\Conversion\Fix.Empty.SL.cs 55 17 BayTech.Common
>     
>     
> *   错误 11 以下方法或属性之间的调用不明确：“BayTech.Common.Fix.IfEmpty(System.DateTime, System.DateTime)”和“BayTech.Common.Fix.IfEmpty(System.DateTime, System.DateTime?) ' C:\Projects\Applications\JukeWeb\BayTech\Internal\Common Library\VS2010\Apps\BayTech.Common\Conversion\Fix.Empty.SL.cs 35 17 BayTech.Common
>     
>     
> *   错误 165 以下方法或属性之间的调用不明确：'BayTech.Common.Fix.IfEmpty(string, System.Guid)' 和 'BayTech.Common.Fix.IfEmpty(string, System.Guid?)' C:\ Projects\Applications\JukeWeb\BayTech\Internal\Common Library\VS2010\Apps\BayTech.Common\Conversion\Fix.IfEmpty.Xml.cs 259 17 BayTech.Common

有谁知道为什么会发生这种情况？

**以下是有关环境设置的一些信息：**

*   VS2010
*   Idealblade（最新安装）
*   已安装 Telerik 控件，包括 Just-In-Code
*   包含 VS 和 Windows 7 的所有服务包
*   包含 VS 和 Windows 7 的所有服务包
*   Win7 终极版
*   SQL 2008 R2
*   用于 T4 模板的 VSExtensions、PostSharp、
*   Codesmith Professional 已安装
*   安装了 VisualSVN
*   开发快递
*   已安装 SQLComplete

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-18T23:13:26.710

没有理由进行这样的实施。如果您期望或想要处理这种情况，请使用内置语言功能并仅保留可为空的实现。可空类型具有 .hasvalue 或 .defaultValue 等属性。

# c# - 没有编码的 XML 文件中的问号在尝试加载时会产生错误

> ID：13960468
> 
> 赞同：1
> 
> 时间：2012-12-19T20:15:40.123
> 
> 标签：c#, xml

我正在尝试将 xml 文件加载到 xmlDocument 对象中..问题是它说“给定编码中的字符无效”..这是正确的，因为我作为输入的 xml 文件的定义只说`<?xml version="1.0" ?>`，并且没有指定编码..

问号是一个实际的问号。我做了一个小实用程序来搜索文档并找到造成麻烦的字符，当我找到它并将其显示在标签上时，它是一个被黑框包围的问号..

我要问的是，我仍然需要加载这个文件并分析它，有什么帮助吗？

我必须指定的 xmlDocument 对象的任何配置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:12:40.467

这样做有效：

```
 StreamReader sr = new StreamReader(TxtPath.Text, true);

            XDocument document = XDocument.Load(sr); 
```

这会将文档加载为 unicode 并修复非格式化 xml 文件中奇怪字符的问题

# javascript - 如何将动态点击处理程序添加到 jeditable

> ID：13960475
> 
> 赞同：5
> 
> 时间：2012-12-19T20:16:14.840
> 
> 标签：javascript, jquery, jeditable

我正在尝试使用 jeditable 更新表格单元格，因此当用户单击该单元格时，它变得可编辑。下面的代码工作正常：

```
 $(".click").editable("http://www.appelsiini.net/projects/jeditable/php/echo.php", { 
                indicator : "<img src='img/indicator.gif'>",
                tooltip   : "Click to edit...",
                style  : "inherit"
            });

<b class="click" style="display: inline">Click me if you dare!</b></> 
```

但是，当我尝试使用 jQuery 编辑已动态添加到表中的单元格时：

```
$("#rounded-corner tbody").append("<td class='clicked'>row</td>"); 
```

该事件不会触发。如何解决这个问题？我想我可能必须使用 .on 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:20:59.937

使用 on() 方法 -

```
$('body').on('click', '.click', function(){.... 
```

# scala - Scala - 系统命令 - R Batch - 单引号不适用于转义参数块

> ID：13960478
> 
> 赞同：2
> 
> 时间：2012-12-19T20:16:24.227
> 
> 标签：scala

这是我的问题：我想从 scala 以批处理模式执行 R 脚本。这是我尝试使用的代码：

```
import scala.sys.process._
"R CMD BATCH --no-save --no-restore '--args a=1' /path/test.r".! 
```

当我将其剪切并粘贴到终端中时，该命令有效。但是当我通过 scala 尝试时，'--args 被解释为脚本文件，我收到致命错误：

```
Fatal error: cannot open file ''--args': No such file or directory 
```

如果我删除参数块，一切正常：

```
import scala.sys.process._
"R CMD BATCH --no-save --no-restore /path/test.r".! 
```

关于如何恢复预期的“正常”执行的任何猜测？

提前致谢，

BHLB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:28:01.253

如果您在 Windows 上运行 R，则需要使用 "s 而不是 's。例如，这适用于 Windows：

```
R CMD BATCH --no-save --no-restore "--args a=1" /path/test.r 
```

从 Scala 调用时，为了方便起见，您可以使用字符串文字：

```
"""R CMD BATCH --no-save --no-restore "--args a=1" /path/test.r""".! 
```

# python - matplotlib 颜色条平滑度

> ID：13960480
> 
> 赞同：3
> 
> 时间：2012-12-19T20:16:37.360
> 
> 标签：python, matplotlib

我正在尝试使用此函数使用 contourf 绘制一些数据：

```
cmap = mpl.cm.jet
norm = mpl.colors.Normalize(vmin=min(zi), vmax=max(zi))
ax = plt.contourf(xi, yi, zi, N=20, norm=norm, cmap=cmap)
plt.colorbar(ax) 
```

我得到的颜色条是这个：

![替代文字](../Images/7098e8d1417bac0bd9e30d5ef6c25854.png)

但是，我希望颜色条有更多的渐变，例如：

![替代文字](../Images/4148c9ad74e4363a2cbf2e734e76514e.png)

有可能吗？我尝试将 N=50 添加到 contourf 函数，但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:41:39.157

颜色图中的级别数将与轮廓中的级别数相同。你的问题是你不能`N`作为关键字传递给`contourf`，它被忽略了。试试这个：

```
ax = plt.contourf(xi, yi, zi, 50, norm=norm, cmap=cmap)
plt.colorbar(ax) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T21:32:24.730

您需要将级别参数添加到contourf：

```
ax = plt.contourf(xi, yi, zi, N=20, norm=norm, 
        cmap=cmap,levels=np.linspace(zi.min(),zi.max(),1000)) 
```

# php - 如何在保持服务层抽象的同时使用 Yii 组件？

> ID：13960486
> 
> 赞同：3
> 
> 时间：2012-12-19T20:16:55.230
> 
> 标签：php, yii, service-layer

我喜欢并使用 Yii 框架，尤其是它的“组件”，它们是惰性实例化的，您可以在配置文件中将它们换入或换出。有点像依赖注入精简版。

我试图让我的代码的业务逻辑完全独立于框架，以防我想重新利用该代码，甚至改变框架。

假设我的服务层中有一个名为 AccountService 的类，它实现了 IAccountService 并有一个单参数构造函数。

```
interface IAccountService
{
  function getUserById($id);
}

class AccountService implements IAccountService
{
  private $_userRepository;

  public function __construct(IUserRepository $userRepository) {
    $this->_userRepository = $userRepository;
  }

  public function getUserById($id) {
    return $this->_userRepository->getById($id);
  }
} 
```

伟大的。到目前为止，它完全没有框架。现在我想把它作为一个 Yii 组件公开，这样它就可以被 Yii 控制器和其他 Yii 组件延迟实例化并轻松使用。

但是 Yii 组件（实现 IApplicationComponent）必须有零个构造函数参数，而我的类需要一个！

有任何想法吗？

这就是我所拥有的。我对他们中的任何一个都不满意。它们看起来都被过度设计了，我从它们身上发现了一种独特的气味。

**选项 1 - compose**：我创建了一个名为“AccountServiceComponent”的类，它实现了 Yii 的 IApplicationComponent。由于构造函数，它不能扩展我的 AccountService 类，但它可以将一个实例化为私有成员并包装它的所有方法，如下所示：

```
class AccountServiceComponent implements IApplicationComponent, IAccountservice
{
  private $_accountService;

  public __construct() {
    $this->_accountService = new AccountService(new UserRepository());
  }

  public getUserById($id) {
    return $this->_accountService->getUserById($id);
  }
} 
```

**缺点**：我必须像这样包装*每一个*方法，这很乏味并且可能导致“果仁蜜饼代码”。特别是考虑到会有多个服务类，每个服务类都有多种方法。

**选项 2 - mixin**：（或行为或特征，或者现在所谓的任何东西。）

Yii（在 PHP 5.4 之前编写）以实现 IBehavior 的类的形式提供“行为”。我可以创建一个扩展我的服务的行为类，并将其附加到一个组件：

```
class AccountServicesBehavior extends AccountService implements IBehavior
{
  // Implement the few required methods here
}

class AccountServiceComponent implements IApplicationComponent
{
  public function __construct() {
    $accountService = new AccountService(new UserRepository());
    $this->attachBehavior($accountService);
} 
```

**缺点**：我的组件不再正式实现 IAccountService。似乎也随着分层而变得过度。

**选项 3 - 可选构造函数参数**：

我可以将构造函数参数设置为我的服务类可选，然后将其扩展为组件：

```
class AccountService implements IAccountService
{
  public $userRepository;

  public function __construct(IUserRepository $userRepository = null) {
    $this->userRepository = $userRepository;
  }

  public function getUserById($id) {
    return $this->_userRepository->getById($id);
  }
}

class AccountServiceComponent extends AccountService implements IApplicationComponent
{
} 
```

**缺点**：可选的构造函数参数意味着现在可以实例化此类，而无需为其提供所需的一切。

...那么，我还缺少其他选择吗？还是我只需要选择最不打扰我的那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:48:00.433

选项 3，但将对象作为可选参数听起来最好 imo：

```
public function __construct(IUserRepository $userRepository = new UserRepository()) {
    $this->userRepository = $userRepository;
} 
```

# ruby-on-rails - 模型中的rails url助手

> ID：13960499
> 
> 赞同：4
> 
> 时间：2012-12-19T20:17:57.813
> 
> 标签：ruby-on-rails

我正在尝试访问我在`event`控制器中使用的 url 帮助程序，如下所示`event_url(event)`。

有没有办法在我的`event`模型中访问它？

像这样的东西？

```
event_url(self) 
```

我正在使用 rails v2.3.11。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:20:12.197

尝试在您的模型中添加它

```
include ActionController::UrlWriter 
```

您还需要将配置行添加到环境配置： development.rb

```
config.action_controller.default_url_options = {:host => "localhost:3000"} 
```

生产.rb

```
config.action_controller.default_url_options = {:host => "example.com"} 
```

# facebook - 发布到 facebook 有效，但显示“只有我”的隐私设置

> ID：13960505
> 
> 赞同：1
> 
> 时间：2012-12-19T20:18:38.827
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-apps, facebook-timeline

我刚刚注册了一个 Facebook 应用程序，这样我就可以让人们以 gizmodo 的方式将文章发布到他们的新闻源（[http://gizmodo.com/5969817/the-hobbit-an-unexpected-masterclass-in-why-48-fps-失败](http://gizmodo.com/5969817/the-hobbit-an-unexpected-masterclass-in-why-48-fps-fails)）。

但是，该帖子提出了“只有我”的权限。我该如何改变？我已经将应用程序中的默认权限更改为“朋友”。

重现步骤：

1.  访问[http://www.senseculture.com/blog/posts/75_adventure-time.php](http://www.senseculture.com/blog/posts/75_adventure-time.php)
2.  点击**喜欢**
3.  输入一些文字，然后点击**发布到 Facebook**
4.  在您的新闻提要中查看它。它会显示为“只有我”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:12:08.997

首先，**从您的应用设置**中删除您的应用。[链接到应用设置](http://www.facebook.com/settings?tab=applications)

其次，**再次从您的帐户转到应用程序，然后选择公开/朋友的朋友/朋友按钮。然后登录应用程序。**

现在去[http://www.senseculture.com/blog/posts/75_adventure-time.php](http://www.senseculture.com/blog/posts/75_adventure-time.php)并按照你前面提到的步骤进行操作。

该帖子将出现在您的新闻提要中，并且隐私将属于朋友/朋友的朋友。

如果对您有帮助，请考虑接受我的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T15:53:47.870

在`Permissions`Facebook 应用设置部分下，`Default Activity Privacy`从更改`Only me`为`Public`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:58:45.297

当他们授权您的应用程序时向用户显示的默认权限可以被他们覆盖；检查您的应用程序的隐私设置，并查看您为该应用程序的帖子的最大可见性选择了什么 - 我怀疑您之前将其设置为“只有我”，并且在不删除应用程序的情况下不会看到“朋友”的提示并重新安装

# post - 从浏览器控件获取 POST 变量

> ID：13960507
> 
> 赞同：0
> 
> 时间：2012-12-19T20:18:42.680
> 
> 标签：post, browser, get, request, windows-phone-8

在我的 winphone 应用程序中，我有一个浏览器控件和一个包含 HTML 表单的页面。在用户填写并在其中提交表单后，是否可以以某种方式从控件中提取 POST 变量？

尝试执行 JS 并将一些事件绑定到提交按钮不是一种选择。我想知道是否可以通过使用浏览器控件可访问的标准方法和事件来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:47:28.373

[Navigating 事件](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.navigating%28v=vs.92%29.aspx)将是您获取此信息的最有可能的选择，但您只能[获取被导航到的 Uri](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.navigatingeventargs%28v=vs.92%29.aspx)。您无法访问正在发送到服务器的 Request 对象。

# php - 如何使用自定义 url 在 php 中重定向

> ID：13960511
> 
> 赞同：-4
> 
> 时间：2012-12-19T20:19:06.607
> 
> 标签：php

我需要编写一个 php 页面，该页面使用自定义查询字符串（本质上是重定向）打开现有 url。

```
"http://existingurl?test=pass&newparam=".$_REQUEST['u']; 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:20:36.273

像这样：

```
<?php

header('Location: http://existingurl?test=pass&newparam='.urlencode($_REQUEST['u']));
exit();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:21:22.790

您只需要使用标头功能。不要忘记使用 urlencode 来保护来自 $_REQUEST['u'] 的用户输入。

```
<?php
    header('Location: http://existingurl?test=pass&newparam='.urlencode($_REQUEST['u']));
    exit();
?> 
```

更多信息，下次可以查看官方文档。 [http://php.net/manual/fr/function.header.php](http://php.net/manual/fr/function.header.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:27:22.467

```
header('Location: http://existingurl?test=pass&newparam='.urlencode($_REQUEST['u']));
die(); 
```

如果您可能的意思是您需要从您的 POST/GET 请求中构建一个具有多个参数的查询字符串，您可能需要查看[http_build_query](http://php.net/manual/en/function.http-build-query.php)并将其附加到 url

# php - 如何使我的插件适应多站点？

> ID：13960514
> 
> 赞同：32
> 
> 时间：2012-12-19T20:19:31.090
> 
> 标签：php, wordpress

我有许多为 WordPress 编写的插件，现在我想将它们改编为 MU。为了“升级”我的插件以支持多站点安装，我必须*遵循/避免/适应*
哪些*注意事项/最佳实践/工作流程/功能/陷阱？*

 *例如但不限于：

*   排队脚本/注册
*   包含文件（php、图像）
*   自定义文件上传路径
*   `$wpdb`
*   激活、卸载、停用
*   管理特定页面的处理

在 Codex 中，*有时会*在单个功能描述中提到 Multisite，但我没有找到任何涉及此主题的一站式页面。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-11T03:42:19.313

至于入队和包含，一切正常。插件路径和 URL 相同。

我从来没有处理过与 Multisite 中的上传路径相关的任何事情，我猜通常 WP 会处理这个问题。

* * *

# `$wpdb`

有一个常用的片段可以遍历所有博客：

```
global $wpdb;
$blogs = $wpdb->get_results("
    SELECT blog_id
    FROM {$wpdb->blogs}
    WHERE site_id = '{$wpdb->siteid}'
    AND spam = '0'
    AND deleted = '0'
    AND archived = '0'
");
$original_blog_id = get_current_blog_id();   
foreach ( $blogs as $blog_id ) 
{
    switch_to_blog( $blog_id->blog_id );
    // do something in the blog, like:
    // update_option()
}   
switch_to_blog( $original_blog_id ); 
```

您可能会找到`restore_current_blog()`使用 代替 的示例`switch_to_blog( $original_blog_id )`。但这`switch`就是更可靠的原因：[restore_current_blog() 与 switch_to_blog()](https://wordpress.stackexchange.com/q/89113/12615)。

* * *

# `$blog_id`

根据博客ID执行一些函数或钩子：

```
global $blog_id;
if( $blog_id != 3 )
    add_image_size( 'category-thumb', 300, 9999 ); //300 pixels wide (and unlimited height) 
```

或许：

```
if( 
    'child.multisite.com' === $_SERVER['SERVER_NAME'] 
    || 
    'domain-mapped-child.com' === $_SERVER['SERVER_NAME']
    )
{
    // do_something();
} 
```

* * *

# 安装 - 仅限网络激活

使用插件标题`Network: true` ^(（参见：**示例插件**）)只会在页面中显示插件`/wp-admin/network/plugins.php`。有了这个标头，我们可以使用以下内容来阻止某些操作，如果插件是仅限网络的。

```
function my_plugin_block_something()
{
    $plugin = plugin_basename( __FILE__ );
    if( !is_network_only_plugin( $plugin ) )
        wp_die(
            'Sorry, this action is meant for Network only', 
            'Network only',  
            array( 
                'response' => 500, 
                'back_link' => true 
            )
        );    
} 
```

* * *

# 卸载

对于 (De)Activation，它取决于每个插件。但是，对于卸载，这是我在文件中使用的代码[`uninstall.php`](http://codex.wordpress.org/Function_Reference/register_uninstall_hook)：

```
<?php
/**
 * Uninstall plugin - Single and Multisite
 * Source: https://wordpress.stackexchange.com/q/80350/12615
 */

// Make sure that we are uninstalling
if ( !defined( 'WP_UNINSTALL_PLUGIN' ) ) 
    exit();

// Leave no trail
$option_name = 'HardCodedOptionName';

if ( !is_multisite() ) 
{
    delete_option( $option_name );
} 
else 
{
    global $wpdb;
    $blog_ids = $wpdb->get_col( "SELECT blog_id FROM $wpdb->blogs" );
    $original_blog_id = get_current_blog_id();

    foreach ( $blog_ids as $blog_id ) 
    {
        switch_to_blog( $blog_id );
        delete_option( $option_name );    
    }
    switch_to_blog( $original_blog_id );
} 
```

* * *

# 管理页面

### 1）添加管理页面

要添加管理菜单，我们检查是否`is_multisite()`并相应地修改钩子：

```
$hook = is_multisite() ? 'network_' : '';
add_action( "{$hook}admin_menu", 'unique_prefix_function_callback' ); 
```

### 2) 检查多站点仪表板并修改管理 URL：

```
// Check for MS dashboard
if( is_network_admin() )
    $url = network_admin_url( 'plugins.php' );
else
    $url = admin_url( 'plugins.php' ); 
```

### 3) 仅在主站点中显示界面元素的解决方法

如果不创建网络管理菜单（操作挂钩`network_admin_menu`），则可以**仅在主站点中**显示插件的某些部分。

我开始在我[最大的插件](http://wordpress.org/extend/plugins/many-tips-together/)中包含一些多站点功能，并执行以下操作以将插件选项的一部分限制到主站点。意思是，如果插件在子站点中激活，该选项**将不会显示**。

```
$this->multisite = is_multisite() 
        ? ( is_super_admin() && is_main_site() ) // must meet this 2 conditions to be "our multisite"
        : false; 
```

^(再看一遍，也许可以简单的说：`is_multisite() && is_super_admin() && is_main_site()`。请注意，最后两个返回`true`单个站点。)

进而：

```
if( $this->multisite )
    echo "Something only for the main site, i.e.: Super Admin!"; 
```

### 4) 有用的钩子和函数的集合。

**挂钩**: [`network_admin_menu`](https://wordpress.stackexchange.com/search?q=network_admin_menu), [`wpmu_new_blog`](https://wordpress.stackexchange.com/q/70977/12615), [`signup_blogform`](https://wordpress.stackexchange.com/search?q=signup_blogform), [`wpmu_blogs_columns`](https://wordpress.stackexchange.com/search?q=wpmu_blogs_columns), [`manage_sites_custom_column`](https://wordpress.stackexchange.com/search?q=manage_sites_custom_column), `manage_blogs_custom_column`, [`wp_dashboard_setup`](https://wordpress.stackexchange.com/questions/67876/12615), [`network_admin_notices`](https://wordpress.stackexchange.com/q/76145/12615), [`site_option_active_sitewide_plugins`](https://wordpress.stackexchange.com/q/3426/12615),`{$hook}admin_menu`

**功能**: [`is_multisite`](https://wordpress.stackexchange.com/search?q=is_multisite%20is:answer), , , , , ,[`is_super_admin`](https://wordpress.stackexchange.com/search?q=is_super_admin%20is:answer) [`is_main_site`](https://wordpress.stackexchange.com/search?q=is_main_site)[`get_blogs_of_user`](https://wordpress.stackexchange.com/q/91745/12615)[`update_blog_option`](https://wordpress.stackexchange.com/search?q=update_blog_option)`is_network_admin``network_admin_url``is_network_only_plugin`

^(*PS：我宁愿链接到 WordPress Answers 而不是 Codex，因为会有更多的工作代码示例。*)

* * *

# 示例插件

我刚刚推出了一个多站点插件[Network Deactivated but Active Elsewhere](https://github.com/brasofilo/Network-Deactivated-but-Active-Elsewhere)，并在下面制作了一个**非工作的**恢复注释版本（有关完成的完整工作版本，请参见 GitHub）。完成的插件纯粹是功能性的，没有设置界面。

^(请注意，插件标头具有`Network: true`. 它可以防止插件[显示在子站点](https://wordpress.stackexchange.com/a/74649/12615)中。)

```
<?php
/**
 * Plugin Name: Network Deactivated but Active Elsewhere
 * Network: true
 */ 

/**
 * Start the plugin only if in Admin side and if site is Multisite
 */
if( is_admin() && is_multisite() )
{
    add_action(
        'plugins_loaded',
        array ( B5F_Blog_Active_Plugins_Multisite::get_instance(), 'plugin_setup' )
    );
}    

/**
 * Based on Plugin Class Demo - https://gist.github.com/toscho/3804204 
 */
class B5F_Blog_Active_Plugins_Multisite
{
    protected static $instance = NULL;
    public $blogs = array();
    public $plugin_url = '';
    public $plugin_path = '';

    public static function get_instance()
    {
        NULL === self::$instance and self::$instance = new self;
        return self::$instance;
    }

    /**
     * Plugin URL and Path work as normal
     */
    public function plugin_setup()
    {
        $this->plugin_url    = plugins_url( '/', __FILE__ );
        $this->plugin_path   = plugin_dir_path( __FILE__ );
        add_action( 
            'load-plugins.php', 
            array( $this, 'load_blogs' ) 
        );
    }

    public function __construct() {}

    public function load_blogs()
    { 
        /**
         * Using "is_network" property from $current_screen global variable.
         * Run only in /wp-admin/network/plugins.php
         */
        global $current_screen;
        if( !$current_screen->is_network )
            return;

        /**
         * A couple of Multisite-only filter hooks and a regular one.
         */
        add_action( 
                'network_admin_plugin_action_links', 
                array( $this, 'list_plugins' ), 
                10, 4 
        );
        add_filter( 
                'views_plugins-network', // 'views_{$current_screen->id}'
                array( $this, 'inactive_views' ), 
                10, 1 
        );
        add_action(
                'admin_print_scripts',
                array( $this, 'enqueue')
        );

        /**
         * This query is quite frequent to retrieve all blog IDs.
         */
        global $wpdb;
        $this->blogs = $wpdb->get_results(
                " SELECT blog_id, domain 
                FROM {$wpdb->blogs}
                WHERE site_id = '{$wpdb->siteid}'
                AND spam = '0'
                AND deleted = '0'
                AND archived = '0' "
        );  
    }

    /**
     * Enqueue script and style normally.
     */
    public function enqueue()
    {
        wp_enqueue_script( 
                'ndbae-js', 
                $this->plugin_url . '/ndbae.js', 
                array(), 
                false, 
                true 
        );
        wp_enqueue_style( 
                'ndbae-css', 
                $this->plugin_url . '/ndbae.css'
        );
    }

    /**
     * Check if plugin is active in any blog
     * Using Multisite function get_blog_option
     */
    private function get_network_plugins_active( $plug )
    {
        $active_in_blogs = array();
        foreach( $this->blogs as $blog )
        {
            $the_plugs = get_blog_option( $blog['blog_id'], 'active_plugins' );
            foreach( $the_plugs as $value )
            {
                if( $value == $plug )
                    $active_in_blogs[] = $blog['domain'];
            }
        }
        return $active_in_blogs;
    }
} 
```

* * *

# 其他资源 - 电子书

与插件开发没有直接关系，但对多站点管理至关重要。
电子书的作者不少于 Multisite 的两大巨头：Mika Epstein（又名 Ipstenu）和 Andrea Rennick。

*   [**WordPress 多站点 101**](http://halfelf.org/ebooks/wordpress-multisite-101/)
*   [**WordPress 多站点 110**](http://halfelf.org/ebooks/wordpress-multisite-110/)*

# batch-file - 以安全模式重新启动计算机 - 优化代码

> ID：13960536
> 
> 赞同：0
> 
> 时间：2012-12-19T20:21:20.980
> 
> 标签：batch-file, vbscript, restart, safe-mode

我有一个脚本可以在安全模式下重新启动 Windows 计算机。

此 vbscript 调用一个提示 UAC 提升的 BAT 文件，并以安全模式重新启动计算机。

**有关如何优化此脚本的任何建议？这可以在 Windows 8 中运行吗？**

```
[code]Dim oShell, retCode
Set oShell = WScript.CreateObject("WScript.Shell")
Set objShell = CreateObject("Wscript.Shell")

retCode = oShell.Popup("Do you want to restart your computer in Safe Mode", 0, "Restart In SafeMode", 4 + 48)

Select Case retCode
case 6, -1
objShell.Run "elevaterestart.bat"
case 7
WScript.quit(1) 'No was chosen
End Select 
```

**更新：**我按照建议更新了脚本，并`Operation Canceled`在用户选择时添加了一个弹出窗口`no`

```
Dim oShell, retCode, MsgBox
Set oShell = WScript.CreateObject("WScript.Shell")
Set objShell = CreateObject("Wscript.Shell")

retCode = oShell.popup("Do you want to restart your computer in Safe Mode", 0, "Restart                In Safe Mode", 4 + 48 + 256)

If retCode = 6 Or retCode = -1 Then
objShell.Run "elevaterestart.bat"
Else
oShell.popup "Operation Canceled", 0, "Restart In Safe Mode", 0 + 64 + 0
End If` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:02:51.520

似乎不需要 Set objShell 行，因为您的 objShell 变量从未使用过，并且与 oShell 是多余的。

当到达文件末尾时，VBScripts 将在没有 wscript.quit(ExitCode) 调用的情况下退出，但是如果您从其他地方调用它，则 1 退出代码将让您知道用户说他们不想重新启动（到达文件末尾且没有错误时的默认退出代码为 0）。

我不会使用 case 语句 - 如果您从一系列选项中进行选择，通常只会在样式方面使用。我更有可能像这样编写最后一部分，但这根本不会改变功能。

```
If retCode = 6 Or retCode = -1 Then
    objShell.Run "elevaterestart.bat"
Else
    WScript.quit(1)
End If 
```

# ios - 视图控制器最佳实践

> ID：13960539
> 
> 赞同：0
> 
> 时间：2012-12-19T20:21:30.340
> 
> 标签：ios, xcode, uiviewcontroller

我即将开始一个新项目，其中有一个自定义菜单，我需要在我拥有的每个视图上显示该菜单。我不想使用标签栏，因为此菜单是自定义设计的，并且可能会在某些时候添加一些动画。

有没有一种简单的方法可以在一个地方创建这个菜单，这样我就不必将它构建到每个 xib 文件中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:42:40.643

标签栏控制器是系统提供的容器控制器。如果您使用的是 iOS 5 及更高版本，您可以制作自己的自定义容器视图控制器：

*   请参阅*View Controller Programming Guide中的*[Custom Container View Controllers](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)讨论。

**   [UIViewController 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)中也列举了您需要的关键方法。

    *   我还建议查看 WWDC 2011 #102 - [Implementing UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)。* 

 ** * *

**更新：**

如果您想编写自己的自定义菜单，您可以执行以下操作。我没有做任何花哨的事情，但我只是添加了三个可能对应于您的自定义按钮的彩色子视图。而且我每个都有一个轻击手势识别器，您显然可以根据需要进行处理：

```
NSInteger const kHeight = 50;
NSInteger const kCount = 3;

@interface CustomMenu ()
@property (nonatomic, strong) NSMutableArray *menuViews;
@end

@implementation CustomMenu

- (id)init
{
    self = [super init];
    if (self)
    {
        _menuViews = [[NSMutableArray alloc] init];
        for (NSInteger i = 0; i < kCount; i++)
        {
            UIView *subview = [[UIView alloc] init];
            subview.tag = i;
            [self addSubview:subview];
            [_menuViews addObject:subview];
            UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
            [subview addGestureRecognizer:recognizer];
        }

        [_menuViews[0] setBackgroundColor:[UIColor blueColor]];
        [_menuViews[1] setBackgroundColor:[UIColor redColor]];
        [_menuViews[2] setBackgroundColor:[UIColor greenColor]];
    }
    return self;
}

- (void)layoutSubviews
{
    CGFloat width = self.superview.bounds.size.width;
    CGFloat height = self.superview.bounds.size.height;

    CGFloat menuChoiceWidth = width / kCount;

    self.frame = CGRectMake(0, height - kHeight, width, kHeight);

    NSInteger subviewIndex = 0;

    for (UIView *subview in self.menuViews)
    {
        subview.frame = CGRectMake(subviewIndex * menuChoiceWidth, 0,
                                   menuChoiceWidth, kHeight);
        subviewIndex++;
    }

}
- (void)handleTap:(UITapGestureRecognizer *)recognizer
{
    NSLog(@"%s tapped on %d", __FUNCTION__, recognizer.view.tag);
}

@end 
```

然后，您的各种视图控制器只需要确保将其添加`CustomMenu`到视图中：

```
@interface ViewController ()
@property (nonatomic, strong) CustomMenu *menu;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.menu = [[CustomMenu alloc] init];
    [self.view addSubview:self.menu];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self.menu layoutSubviews];
}

@end 
```

我承认我已经放弃了对 iOS 4.3 的支持（只是不值得心痛，而且现在 4.3 的受众规模很小），所以我不再处理这种愚蠢的事情，但希望这能给您了解一种可能的解决方案可能是什么样子。*

# php - 如何向用户显示已输入新评论

> ID：13960541
> 
> 赞同：5
> 
> 时间：2012-12-19T20:21:35.297
> 
> 标签：php, javascript, jquery, mysql, ajax

我有一个正在创建的小博客。它从数据库中获取信息。我想向已登录的用户显示其他人刚刚输入了新评论。我创建了 3 个页面：old_count、new_count、posts。我打算为 new_count 和 old_count 创建一个会话，并在帖子中减去它们。结果将在 div 中显示给用户。我已经放弃了这个想法，因为 old_count 和 new_count 将具有相同的信息，因此帖子中的结果将始终为 0。我正在寻找类似 Twitter 的东西，如果有新条目，则会出现一个 div 显示 - 1 新帖子--。我一直在寻找一种方法来做到这一点。有人可以帮帮我吗。（注意 - 请解释完整的脚本......提前谢谢！！！！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:35:08.733

设置他们上次检查内容的时间戳。

然后，使用 javascript，轮询服务器（SELECT * FROM posts WHERE created_timestamp > {$last_checked_timestamp}

如果结果 > 0 则显示计数。

更新时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:35:15.237

问题是：评论什么时候是新评论？如果它是在最近一次点击和当前点击之间创建的？或者如果用户还没有看到它？

最简单的方法是在会话中存储“已知”评论（例如 ID）并检查当前可用的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:19:51.747

您必须存储登录时间戳用户。也许在数据库或会话中。对照评论时间戳检查它。您必须为已插入数据库中的所有评论显示通知并遵守以下条件

1.  Comment_Timestamp < User_Login_Timestamp。
2.  (Current_Timestamp - Comment_Timestamp) <= Refresh_interval

PHP：

```
<?php

/*
    DB CONNECT AND SQL TO SELECT COMMENTS FROM THE TABLE. YOU CAN OPTIMIZE QUERY TO REDUCE THE NUMBER OF
    TUPLES
*/

$current_ts = strtotime(date('m/d/Y h:i:s a');
$notified = array();

foreach($all_comments as $comment) {
    if(strtotime($comment['ts']) < strtotime($_SESSION['user_login_ts'])) {
        if(($current_ts - strtotime($comment['ts']) <= REFRESH_INTERVAL) {
            $notified[] = $comment;     
        }
    }
}

echo json_encode($notified);

?> 
```

JS AJAX

```
setInterval(function(){
    $.ajax({ 
        url: "server", 
        success: function(data) {
            /* Data is the JSON Object for new comments for that user */
        }, 
        dataType: "json"
    });
}, <?=REFRESH_INTERVAL?>); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:05:21.647

根据 David 发布的建议，我针对之前提出的问题提出了以下解决方案。

1.  我在登录时创建了一个时间戳。
2.  然后我使用它在数据库上运行搜索。

包含此信息的 DIV 每 10 秒刷新一次，并且是指向时间戳重置页面的可点击链接。该页面的代码如下：

```
<?php
session_start();

$reset = $_POST['reset'];

if($reset == 'reset')
{
$_SESSION['time_stamp'] = time();
echo "done";//confirmation purpose
}
?> 
```

和我控制整个节目的javascript：

```
<script type="text/javascript">
<!--
$(document).ready(function(){
$('#divname').click(function(){
var r="reset";

$.ajax({
type: "POST",
url: "reset_time.php",
data: r,
success: function(html){
if(html == 'done')
{
 $('#divwithinfo').reload(/*my blog page url*/);
}
});
});
});
-->
</script> 
```

# encryption - 如何以编程方式解密 PGP 自解密存档？

> ID：13960544
> 
> 赞同：6
> 
> 时间：2012-12-19T20:22:00.097
> 
> 标签：encryption, cryptography, exe, gnupg, pgp

每天我都会收到我有密码的 SDA 文件。解密是通过运行文件并在弹出的程序窗口中手动输入密码来完成的。我想避免这个手动步骤，并将其变成自动化过程的一个步骤。

它的工作方式如下：一旦我的守护进程检测到一个新文件已到达我的收件箱，我的程序就会下载、解密并保存它。我知道如何用代码做所有这些，除了解密部分。

我不想运行 .exe 文件并手动输入密码，而是想读取它的内容，并使用密码解密其中包含的数据，如下所示：

```
4d5a 9000 0300 0000 0400 0000 ffff 0000
b800 0000 0000 0000 4000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 f000 0000
0e1f ba0e 00b4 09cd 21b8 014c cd21 5468
...etc 
```

我目前使用的语言是 PHP，但是看看任何语言的实现都会有所帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:00:23.880

PGP自解密档案只是该文件内的EXE存根+ PGP消息。您应该解析 EXE 标头，找到这些数据的存储位置，提取它，然后使用 GnuPG 或任何其他 PGP 库解密。

# java - Android OpenGL ES 1：用四边形填充显示

> ID：13960545
> 
> 赞同：1
> 
> 时间：2012-12-19T20:22:01.277
> 
> 标签：java, android, opengl-es, model-view, orthographic

我正在创建一个仅在横向模式下运行的应用程序。我正在尝试使用带纹理的四边形创建背景，尽管我还不会担心纹理。我一直在尝试简单地绘制一个从 drawOverlay(GL10 gl) 填充屏幕的四边形，并禁用 GL_DEPTH_TEST 但每当我这样做时，四边形都不会完全填满屏幕，我可以在底部和顶部看到 glClearColor 条屏幕。

无法使用我用于所有其他对象的模型视图矩阵来绘制它，我尝试使用 gluOrtho2D 和 glOrthof 来绘制它，但它们都不起作用。我真的不明白近和远剪裁平面如何与正交绘图一起使用。每当我尝试使用 glOrtho2D 或 glOrthof 绘制它时，根本没有绘制四边形（尽管场景的其余部分仍然被渲染）。

这是我尝试使用正交矩阵进行绘制

```
private void drawOverlay(GL10 gl) {
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glPushMatrix();
    gl.glLoadIdentity();
    GLU.gluOrtho2D(gl, 0f, 1f, 1f, 0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    background.draw(gl, 1.0f, 1.0f, 1.0f, 1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glPopMatrix();
    gl.glMatrixMode(GL10.GL_MODELVIEW);
} 
```

我从 onDrawFrame 的开头调用该函数 - 在绘制其他任何内容之前：

```
public void onDrawFrame(GL10 gl) {
    drawOverlay(gl);
    gl.glLoadIdentity
    //...
} 
```

以下是“背景”的创建方式：

```
background = new ShapePostcard(1f, 1f); 
```

我相当确定我无法使用普通的模型视图矩阵让四边形覆盖屏幕，但基本上我所做的只是在禁用深度测试的所有其他内容之前在 onDrawFrame 中绘制“背景”。

感谢您的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:10:19.503

绘制填充屏幕的四边形最简单的方法是将投影和模型都设置为单位矩阵，然后绘制坐标为 [-1,-1] 到 [1,1] 的网格。当你看到边界时，这就是你画的吗？我是说，

```
 (x, y, widht, height) = (-1,-1, 2, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:12:49.613

OpenGL ES 不支持四边形。

[http://www.songho.ca/opengl/gl_vertexarray.html](http://www.songho.ca/opengl/gl_vertexarray.html)

# jquery - 通过结果函数创建 jquery 插件

> ID：13960548
> 
> 赞同：-2
> 
> 时间：2012-12-19T20:22:16.593
> 
> 标签：jquery, plugins

我正在尝试创建一个 jQuery 插件。

```
$.fn.examplePlugin = function() {
    $.item = $(this);
    $(this).hide('fast',function () {
        return 'bla';
    });
} 
```

我需要在函数中显示结果：

```
$('form').examplePlugin(function(data)) {
    alert('data'); // need to return 'bla'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:37:29.970

```
$.fn.examplePlugin = function (callback) {
   $(this).hide('fast', function () { callback('bla'); });
}
$('form').examplePlugin(function (data) {
   alert(data);
}); 
```

[http://jsfiddle.net/u8tgA/](http://jsfiddle.net/u8tgA/)

请注意，有更好的方法来编写插件.. 查找[jQuery Plugin Boilerplate](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:51:27.393

```
$.fn.examplePlugin = function() {
    $.item = $(this);
    $(this).hide('fast',function () {
        return 'bla';
    });

    function show(a) {
       alert(a);
    }    

} 
```

需要修改为：

```
$('form').examplePlugin(function(data)) {
    this.show('data'); // need to return alert 'bla'
}); 
```

# c# - iTextPdf 如何分页

> ID：13960551
> 
> 赞同：6
> 
> 时间：2012-12-19T20:22:34.400
> 
> 标签：c#, asp.net, pdf, pdf-generation, itextsharp

我使用 iTextPdf 从 html 页面生成 pdf 文件，例如：

```
iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(document);
            TextReader reader = new StringReader(HTML);
            hw.Parse(reader);
            document.Close(); 
```

但是我的 html 页面很大，我需要在特定的地方添加页面刹车。

如何在 pdf 中添加这些分页符？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-10T11:15:28.177

**因为，iTextSharp 在理解少数 HTML 样式/标签方面确实存在局限性。**

**对此的解决方案是一个小解决方法：**

*   您需要创建一个新类来扩展`HTMLWorker`该类并覆盖在`StartElement`每个 html 元素开始时为我们提供事件的方法。

    ```
    public class HTMLWorkerExtended : HTMLWorker
    {
    public HTMLWorkerExtended(IDocListener document): base(document)
    {

    }
    public override void StartElement(string tag, IDictionary<string, string> str)
    {
        if (tag.Equals("newpage"))
            document.Add(Chunk.NEXTPAGE);
        else
            base.StartElement(tag, str);
    }
    } 
    ```

*   在您的 html 中，`<newpage />`在需要分页符的任何位置添加标签。

*   现在使用`HTMLWorkerExtended`类的对象来解析 html。

    ```
    using (TextReader htmlViewReader = new StringReader(htmlText))
     {
        using (var htmlWorker = new HTMLWorkerExtended(pdfDocument))
          {
             htmlWorker.Open();
             htmlWorker.Parse(htmlViewReader);
          }
     } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T20:56:34.903

尝试在您的 HTML 中添加以下内容：

```
<div style="page-break-before:always">&nbsp;</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T21:31:13.477

有一个`HTMLWorker.ParseToList`。你不能用那个吗？

1.  从 ParseToList 中获取 n 个元素
2.  将前 x 个元素添加到 PDF
3.  在 PDF 上调用 NewPage
4.  将剩余元素添加到 PDF

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-07T12:36:09.610

当您想插入分页符时使用此代码：

文档.NewPage();

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-14T18:19:45.373

使用以下内容：

我已经尝试过了，它有效：

```
<div style="page-break-after:always">&nbsp;</div> 
```

# java - 解释 eclipse .classpath 文件。'kind="con"' 和 'exported="true"' 是什么意思？

> ID：13960556
> 
> 赞同：35
> 
> 时间：2012-12-19T20:22:47.687
> 
> 标签：java, eclipse, eclipse-plugin, classpath

这是`.classpath`我下载的eclipse插件程序的eclipse文件。

我认为这`kind="src"`很`kind="output"`简单，因为它们意味着源 java 文件和编译的类文件所在的位置。

似乎表明插件正在引用的`kind="lib"`jar 文件，但我有一些我不确定的东西。

*   是什么`kind="con"`意思？
*   它有什么用`exported="true"`？我认为为了使用这个插件，插件引用的所有jar文件都应该被导出，但只有其中一部分被导出。

![在此处输入图像描述](../Images/944b8fe38cfd02df1382e0cacaf618ee.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-19T20:53:01.487

1）in `kind="con"`，`con`代表container，被eclipse解释为[classpath container](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IClasspathContainer.html)。如该链接中所述：

> 类路径容器提供了一种通过 CPE_CONTAINER 类型的类路径条目间接引用一组类路径条目的方法

换句话说，它可以以任何方式对其他类路径条目进行分组，并在任何地方重复使用它（包括为不同项目提供不同条目的能力）。

2) `exported`：假设您有 Project`B`依赖于 Project `C`。依赖关系定义为`exported=true`。然后，另一个`A`依赖于 Project 的 Project`B`也将 Project`C`存在于`A`“类路径”中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T20:42:05.940

*   kind="con" 表示[类路径容器](http://help.eclipse.org/kepler/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IClasspathContainer.html)
*   exports=true 导出依赖项，这意味着任何依赖于您的项目的项目也可以查看/访问导出的依赖项。

# javascript - 将自定义函数添加到 bootstrap typeahead

> ID：13960557
> 
> 赞同：1
> 
> 时间：2012-12-19T20:22:47.857
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead, typeahead

我正在使用 typeahead 来提取名称，然后使用与名称相对应的 id 更新隐藏字段。在我的表格中，名称可以留空，不需要填写。

有没有办法将自定义错误检查添加到 typeahead 功能？例如，我开始填写表格并键入/选择一个用户，然后我改变主意并想将其留空。至此，用户 ID 已经添加到隐藏字段中，因此即使我将名称字段留空，表单也会在其中传递用户 ID。

我想我总是可以在提交时进行错误检查，但我很好奇是否有办法添加到本机 api。

我的代码是：

```
$('#name_field').typeahead({
        minLength: 3,
        source: function (query, process){

            $.get('/url/getsource', {query: query}, function (data) {                   
                names = [];
                map = {};
                $.each(data, function (i, name) {
                    map[name.uName] = name;
                    names.push(name.uName);
                });
                process(names);                 
            });             
        },
        matcher: function (item) {
            if (item.toLowerCase().indexOf(this.query.trim().toLowerCase()) != -1) {
                return true;
            }
        },
        sorter: function (items) {
            return items.sort();
        },
        highlighter: function (item) {
            var regex = new RegExp( '(' + this.query + ')', 'gi' );
            return item.replace( regex, "<strong>$1</strong>" );
        },
        updater: function (item) {
            selectedID = map[item].id;              

            $('#id_field').val(selectedID);
            return item;
        }

    }); 
```

我希望我可以添加类似的东西

```
$('#name_field').typeahead({
    myCustom: function (){
        if($('#name_field').val() == ''){
            $('#id_field').val('');
     },
     rest, 
     of the,
     function
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:25:41.277

您可以将函数绑定到用户字段的模糊事件。因此，一旦用户对另一个表单元素进行任何更改（如果它留空），您就会清除 typeahead 字段。

```
$('#user-field').blur(function (e) {
   if(this.val() === ''){
        $('#typeahead-field').val(''); // Clear typeahead
   }
}); 
```

# c - 有人可以解释这段代码 - rtc 按位翻转（在 c 中）？

> ID：13960560
> 
> 赞同：3
> 
> 时间：2012-12-19T20:23:00.543
> 
> 标签：c, bit-manipulation

## 谁能解释一下（（~（preRtcInseconds <<1）+1）>>1）

```
unsigned long preInseconds;
unsigned long curInSeconds;
unsigned long elapsedInSeconds;

if(curInSeconds>=preInseconds)
{
   elapsedInSeconds = curInSeconds - preInseconds;//does easy thing. no needs roll over
}
else{ //rollover
  preInseconds = ((~(preInseconds <<1)+1)>>1);
  elapsedInSeconds = curInSeconds + preInseconds;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:37:10.250

设 为 的`unsigned long`宽度`w`。`unsigned long`那么一个可以容纳的最大值是

```
ULONG_MAX = 2^w - 1 
```

让`preInseconds = a + b`, 在哪里

```
a = preInseconds & (1ul << (w-1))
b = preInseconds & ((1ul << (w-1)) - 1) 
```

`a`是 0 还是`2^(w-1)`，取决于 是否`preInseconds >= 2^(w-1)`。然后最初的左移消失了`a`，所以

```
preInseconds << 1 
```

给出`b << 1`或`2*b`。

然后取按位补码，

```
~(b << 1) 
```

给`ULONG_MAX - (b << 1)`.

如果`b == 0`, 加 1`ULONG_MAX - (b << 1)`结果为 0, 否则

```
~(b << 1) + 1 
```

给

```
2^w - (b << 1) 
```

然后右移一位产生 0 如果`b == 0`并且

```
2^(w-1) - b 
```

除此以外。因此

```
preInseconds = ((~(preInseconds <<1)+1)>>1); 
```

设置`preInseconds`为

```
2^(w-1) - b 
```

如果`b != 0`，则为 0 `b == 0`。

最后，

```
elapsedInSeconds = curInSeconds + preInseconds; 
```

因此设置`elapsedInSeconds`为`curInSeconds`if`preInseconds`的值`2^(w-1)`[如果`else`分支被采用, `preInseconds > curInSeconds`, 所以它不是 0] 并且

```
curInSeconds - (preInseconds & (ULONG_MAX >> 1)) + 2^(w-1) 
```

除此以外。

我不确定该操作的目的是什么。对于`preInseconds > curInSeconds`, 计算

```
curInSeconds - preInseconds 
```

会导致

```
(2^w - preInseconds) + curInSeconds 
```

这与（数学上）相同

```
(2^w + curInSeconds) - preInseconds 
```

如果计数器自上次使用后`curInSeconds`翻转*一次*，这将是经过的时间`preInseconds`，如果当前计数器值小于前一个值，这可能会发生。这是有道理的。

在else分支完成体操，

*   如果`preInseconds <= 2^(w-1)`,`elapsedInSeconds`变为`curInSeconds - preInseconds + 2^(w-1)`, 翻转的当前计数器与前一个计数器之间的差减去`2^(w-1)`
*   如果`preInseconds > 2^(w-1)`，因为`x - 2^(w-1) == x + 2^(w-1)`在无符号算术中，我们得到与 相同的结果`curInSeconds - preInSeconds`。

因此，假设`curInSeconds`翻转一次，它会计算前一个事件和当前事件之间经过的秒数，除非翻转发生`2^(w-1)`在前一个事件之后或更长时间之后，在这种情况下，`2^(w-1)`从实际经过的时间中减去秒数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T22:51:35.350

它看起来像是由不理解 C 无符号算术是 mod 2^n （或不理解 mod 2^n 算术）的人编写的错误翻转代码。它实际上完全等同于：

```
elapsedInSeconds = curInSeconds - preInseconds;
if (curInSeconds < UNLONG_MAX/2 && preInseconds < ULONG_MAX/2)
    elapsedInSeconds &= ULONG_MAX/2; 
```

也就是说，它做了一个 mod 2^n 减法，但在少数情况下（可能从未在任何测试用例中命中），它会出错（清除而不是设置）。

这很可能是故意的，因为这里发生的情况是，如果两个数字都 <2^n-1，它会进行 mod 2^n-1 减法，如果任一数字 >=，它会进行 mod 2^n 减法2^n-1（其中`n`是无符号长整数的大小，以位为单位）。如果时间来自某些可能总是清除最高位或可能不清除的硬件设备，这可能是有道理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T22:25:42.877

首先，我在下面讨论的所有内容都假设您的`unsigned long`类型是 32 位宽。如果不是，那没关系；它有多宽并不重要，但我所有的例子都假设它是 32 位宽。我只是`uint32`用来表示，知道这`uint32`实际上不是标准类型`uint32_t`，请不要告诉我。

Daniel Fischer 已经很好地详细解释了每个低级操作，这里不再赘述。但是我认为您感兴趣的不是每个低级操作的*含义*，而是所有这些操作作为一个组应用的必要性。正如我将在下面解释的那样，无论如何都没有必要。事实上，他们有点错误，但只是在“当前”计数器读数比“先前”读数绕圆圈返回一半以上的情况下。

在我了解您的实现数学背后的“意义”之前，让我们首先看一个简单的例子，它如何在可能的最小翻转情况下计算 elapsedInSeconds：

如果 preInseconds = 0xffffffff 和 curInSeconds = 0x00000000，则 elapsedInSeconds 应为 1。

```
preInseconds = preInseconds<<1;     // 0xfffffffe
preInseconds = ~preInseconds;       // 0x00000001
preInseconds = preInseconds+1       // 0x00000002
preInseconds = preInseconds>>1;     // 0x00000001
elapsedInSeconds = curInSeconds + preInseconds;
             ... =  0x00000000  +  0x00000001    = 1 
```

...这正是我们所期望的。伟大的。

然而，有趣的是，不需要任何翻转处理逻辑。完全没有。每次我看到有人试图计算“当前”和“以前”计数器值之间的差异时，我总是看到他们跳过箍来处理翻车情况，而且他们往往做错了。这种情况的耻辱是用特殊情况处理翻转***永远不会***对于 2 次幂大小的计数器是必需的。如果计数器的满量程（翻转点）小于您的数据类型的大小，您需要将结果屏蔽回计数器中的位数，但这是您真正做过的唯一翻转处理需要，在这种情况下，您只需每次都进行屏蔽，而不必担心它是否翻转（这也避免了分支指令，因此速度更快）。由于您的翻转点是 uint32 的满量程值，因此您甚至不需要屏蔽结果。

原因如下：

如上所述，假设 preInseconds=0xffffffff 和 curInSeconds=0。同样，结果应该是 1。如果您不担心翻转，您只需将 curInSeconds-preInseconds 作为结果。但是在翻转的情况下，减法运算会产生下溢。这意味着什么？这意味着，如果您有更多要处理的位（即另一个 uint32 被用作 64 位复合计数器的高位字），那么您需要从高位字中借 1（就像小学用十进制数减法）。但在你的情况下，没有更高的词可以借用。没关系。真的。反正你也不在乎这些。您仍然可以获得您正在寻找的差异值：

```
elapsedInSeconds = curInSeconds - preInseconds;
             ... =  0x00000000  -  0xffffffff     = 1 
```

...这完全没有任何特殊的翻转处理逻辑就给出了预期的结果。

所以你可能会想，“当然，这适用于你的小例子，但是如果翻转很大怎么办？” 好吧，让我们探索一下这种可能性。然后假设 preInseconds=0xffffffff 和 curInSeconds=0xffffffffe。在这个例子中，我们几乎完全从前面的例子中恢复过来；事实上，我们离它只有一步之遥。在这种情况下，我们的结果应该是 0xffffffff（即比 uint32 可以表示的值的数量少一个）：

```
elapsedInSeconds = curInSeconds - preInseconds;
             ... =  0xfffffffe  -  0xffffffff     = 0xffffffff 
```

不相信我？试试这个：

```
#include <stdio.h>
typedef unsigned long uint32;
int main()
{
    uint32 prev = 0xffffffff;
    uint32 cur  = 0xfffffffe;
    uint32 result = cur - prev;
    printf("0x%08x - 0x%08x = 0x%08x\n", cur, prev, result);
} 
```

现在，让我们回到实现背后的数学：

该计算“有点”计算 preInseconds 的二进制补码并将结果分配回 preInseconds。如果您对数字的计算机表示和二进制补码加减法有所了解，您就会知道计算差 AB 与计算 A 和 B 的二进制补码之和相同，即 A+(-B)。如果您以前从未研究过它，请查看 Wikipedia 或任何地方，了解二进制补码如何使计算机的 ALU 能够重新使用其加法电路进行减法。

现在看看您显示的代码实际上“错误”的是什么：

要计算一个数字的二进制补码，请将该数字取反（将其所有 0 位更改为 1，将其所有 1 位更改为 0），然后加一。就是这么简单。这就是你的代码正在做的“有点”，但不完全是。

```
preInseconds = preInseconds<<1;     // oops, here we lose the top bit
preInseconds = ~preInseconds;       // do the 2's complement inversion step*
preInseconds = preInseconds+1       // do the 2's complement addition step*
preInseconds = preInseconds>>1;     // shift back to where it ought to be,
                                    // but without that top bit we wish we kept

*NOTE: The +1 above only works here because the low bit is
 guaranteed to be 1 after the ~ operation, which carries a 1
 up into the 2nd bit, where it matters. 
```

所以我们在这里看到，本质上数学所做的是通过对其执行“几乎”二进制补码转换来手动否定 preInseconds 的值。不幸的是，它也在这个过程中丢失了最高位，这使得翻转逻辑只能在 elapsedInSeconds = 0x7fffffff 的最大值下工作，而不是它的满量程限制 0xffffffff。

您可以将其转换为以下内容，并消除最高位的丢失：

```
preInseconds = ~preInseconds;       // do the 2's complement inversion step
preInseconds = preInseconds+1       // do the 2's complement addition step 
```

所以现在你已经直接计算了二进制补码，你可以计算结果：

```
elapsedInSeconds = curInSeconds + preInseconds; // (preInseconds is the 2's compl of its original value) 
```

但愚蠢的是，这在计算上等同于简单地这样做......

```
elapsedInSeconds = curInSeconds - preInseconds; // (preInseconds is its unconverted original value) 
```

一旦你意识到这一点，你的代码示例就变成了：

```
if(curInSeconds>=preInseconds)
{
    elapsedInSeconds = curInSeconds - preInseconds;
}
else // rollover
{
    elapsedInSeconds = curInSeconds - preInseconds;
} 
```

...这应该清楚地表明，首先不需要将翻转作为特殊情况处理。

# javascript - 使用 javascript 调整图像大小以在画布 createPattern 中使用

> ID：13960564
> 
> 赞同：16
> 
> 时间：2012-12-19T20:23:28.170
> 
> 标签：javascript, canvas, resize

我已经看到了一些关于如何调整要在 IMG 标记中使用的图像大小的技巧，但我想在 Javascript 中有一个图像变量，调整它的大小，然后在 context.createPattern(image, "重复”）。我还没有找到任何关于如何做到这一点的提示。

[您可以在http://karllarsson.batcave.net/moon.html](http://karllarsson.batcave.net/moon.html)找到一个功能演示， 其中包含我想要做的图像。

**Loktar 的解决方案看起来不错。我还没有时间修复正确的方面，但现在我知道该怎么做了。再一次感谢你。这是一个工作演示[http://karllarsson.batcave.net/moon2.html](http://karllarsson.batcave.net/moon2.html)**

这是我不想工作的两条线。

image.width = 边 * 2;
image.height = 边 * 2;

```
function drawShape() {
    try {
        var canvas = document.getElementById('tutorial');                 
        var image = new Image();                                          
        image.src = "http://xxx.yyy.zzz/jjj.jpg";                         
        image.width = side * 2;                                           
        image.height = side * 2;                                          

        if (canvas.getContext){
            var ctx = canvas.getContext('2d');                            
            ctx.clearRect(0, 0, canvas.width, canvas.height);             
            ctx.fillStyle = ctx.createPattern(image, "repeat");           
            ctx.beginPath();                                              
            var centerX = canvas.width / 2 - side / 2;                    
            var centerY = canvas.height / 2 - side / 2;                   
            ctx.rect(centerX, centerY, side, side);                       
            ctx.fill();                                                   
        } else {
            alert('You need Safari or Firefox 1.5+ to see this demo.');   
        }
    } catch (err) {
        console.log(err);                                                 
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T22:32:54.067

您可以做的是制作一个临时画布，并将图像以您需要的尺寸复制到其中，然后将该临时画布用作图案而不是图像本身。

**[现场演示](http://jsfiddle.net/loktar/cLpybwbb/)**

首先创建画布

```
 var tempCanvas = document.createElement("canvas"),
              tCtx = tempCanvas.getContext("2d");

          tempCanvas.width = side*2;
          tempCanvas.height = side*2; 
```

现在将图像绘制到它，使您需要的缩放大小

```
 tCtx.drawImage(image,0,0,image.width,image.height,0,0,side*2,side*2); 
```

现在使用您刚刚创建的画布作为图案

```
 ctx.fillStyle = ctx.createPattern(tempCanvas, "repeat"); 
```

完整代码

**编辑**创建了一个更通用的可重用示例

```
 function drawPattern(img, size) {
     var canvas = document.getElementById('canvas');

     canvas.height = 500;
     canvas.width = 500;

     var tempCanvas = document.createElement("canvas"),
         tCtx = tempCanvas.getContext("2d");

     tempCanvas.width = size;
     tempCanvas.height = size;
     tCtx.drawImage(img, 0, 0, img.width, img.height, 0, 0, size, size);

     // use getContext to use the canvas for drawing
     var ctx = canvas.getContext('2d');
     ctx.clearRect(0, 0, canvas.width, canvas.height);
     ctx.fillStyle = ctx.createPattern(tempCanvas, 'repeat');

     ctx.beginPath();
     ctx.rect(0,0,canvas.width,canvas.height);
     ctx.fill();

}

var img = new Image();
img.src = "http://static6.depositphotos.com/1070439/567/v/450/dep_5679549-Moon-Surface-seamless.jpg";
img.onload = function(){
    drawPattern(this, 100);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-09T08:44:15.007

还有另一种方法，对我很有用：

```
const ctx: CanvasRenderingContext2D;
const patternAsBase64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjIyRTA3RDgyNkUxMUU5ODQ1QUM2QjE5RUMzRTMwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjIyRTA3RTgyNkUxMUU5ODQ1QUM2QjE5RUMzRTMwRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZGMjJFMDdCODI2RTExRTk4NDVBQzZCMTlFQzNFMzBEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZGMjJFMDdDODI2RTExRTk4NDVBQzZCMTlFQzNFMzBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+y2y13AAAAV1JREFUeNqc0kFLAkEUB/B9b1ZR1m4FQZeocx2MYI3CxC8QmVBfJAjqVLQQfY/MFI+dREpQIeqQxwgiCrq72661M9Nb0ZKo3dU5zOU//Hj/3Qep04YUn04Ludxq7mdflYCzfFKbprdnLKatc9u8Z1zZbBxkHwc58q79gpGYLgBKqaPqTBB4s5t5Ewx2XNu8YvHEImeysnJYnf8GoyCz/MO+ZXFN56iUw6JSxW333SJ0YoEzpbJq1Oe8DLxLN2qzQoqSGkss8a41Un1wZUGNa2mq346A3IBB6KGSUOahdqeFEsZAO20YDnXjktDomKgoUMM0/A6HJ3UJZSNOCn+FPVSIMv3FpOuYTSaUfGj0v/AH1ZLcsZoYEgW/sF+/TPUJNUOh6Be29jJPAJijlbgjNEV7ehG0p6CEOIP62K/v900xXyyyILA3KWJO2FbgpPj8MHm+dnw9FRp1/Ot/CTAAd/XmF3ta0fUAAAAASUVORK5CYII=';
const imagePattern = new Image();
imagePattern.onload = () => {
    const pattern: CanvasPattern = ctx.createPattern(imagePattern, 'repeat-y');
    const svgMatrix: SVGMatrix = document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGMatrix();

    svgMatrix.scale(0.5);
    pattern.setTransform(svgMatrix);
}
imagePattern.src = patternAsBase64; 
```

* * *

基本上与将变换矩阵设置为此相同（以下内容）（但注意！模式 setTransform 方法等待一个 SVGMatrix。这在 Chrome 中也对我有用（但 TypeScript 抱怨当然）：

```
pattern.setTransform({
    a: 0.5, // Horizontal scaling. A value of 1 results in no scaling.
    b: 0,   // Vertical skewing.
    c: 0,   // Horizontal skewing.
    d: 0.5, // Vertical scaling. A value of 1 results in no scaling.
    e: 0,   // Horizontal translation (moving).
    f: 0    // Vertical translation (moving).
    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform
}); 
```

请记住，您可能还需要在绘制图案之前翻译您的画布，否则它无法从您希望它开始的位置开始。

```
const offset_x: number = positionXOfElement;
const offset_y: number = positionYOfElement;

// offset
ctx.translate(offset_x, offset_y);

// draw
ctx.fillStyle = pattern;
roundRect.fill();
//ctx.fillRect(0, 0, 300, 300);

// undo offset
ctx.translate(-offset_x, -offset_y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T14:47:59.177

这是使用范围按钮调整图像上图案大小的另一种方法。

```
var img1 = new Image, img2 = new Image, cnt = 2,
    canvas = document.getElementById("canvas"),
    canvas_original = document.getElementById("canvas_original"),
    ctx_original = canvas_original.getContext("2d"),
    ctx = canvas.getContext("2d");

img1.onload = img2.onload = function() {if (!--cnt) go()};

img1.src = "https://www.itailor.co.uk/images/product/shirt/it1823-1.png";   // shirt

img2.src = "https://i.stack.imgur.com/tkBVh.png";   // pattern

function go(source = null) {
    canvas.width = document.getElementById("first").clientWidth;
    canvas.height = window.innerHeight / 2;

    canvas_original.width = document.getElementById("second").clientWidth;
    canvas_original.height = window.innerHeight / 2;

    var oc = document.createElement('canvas'), octx = oc.getContext('2d');

    var cur = {
        width: Math.floor(img1.width * 0.5),
        height: Math.floor(img1.height * 0.5)
    }

    oc.width = cur.width;
    oc.height = cur.height;

    octx.drawImage(img1, 0, 0, cur.width, cur.height);

    while (cur.width * 0.5 > document.getElementById("first").clientWidth) {
        cur = {
            width: Math.floor(cur.width * 0.5),
            height: Math.floor(cur.height * 0.5)
        };
        octx.drawImage(oc, 0, 0, cur.width * 2, cur.height * 2, 0, 0, cur.width, cur.height);
    }

    ctx_original.drawImage(oc, 0, 0, cur.width, cur.height, 0, 0, canvas.width, canvas.height);

    //****//
    var rate = $('#rate').val();

    var tempCanvas = document.createElement("canvas"),
        tCtx = tempCanvas.getContext("2d");

    tempCanvas.width = canvas.width / 4 * rate;

    tempCanvas.height = canvas.height / 4 * rate;

    tCtx.drawImage(img2, 0, 0, img2.width, img2.height, 0, 0, tempCanvas.width, tempCanvas.height);
    //****//

    if (source !== null) {
        ctx.fillStyle = ctx.createPattern(tempCanvas, "repeat");
    }
    else {
        ctx.fillStyle = ctx.createPattern(tempCanvas, "repeat");
    }

    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.globalCompositeOperation = "multiply";

    ctx.drawImage(oc, 0, 0, cur.width, cur.height, 0, 0, canvas.width, canvas.height);

    ctx.globalCompositeOperation = "destination-in";

    ctx.drawImage(oc, 0, 0, cur.width, cur.height, 0, 0, canvas.width, canvas.height);
} 
```

HTML 标记

```
<div class="container" style="width: 100%; padding-right: 0 !important; padding-left: 0 !important;">
    <div id="clothesDiv" class="col-lg-2" style="max-height: 100vh; overflow-y: auto;">
    </div>
    <div class="col-lg-10">
        <div class="row" style="margin-right: 0 !important; margin-left: 0 !important; border: 0.5px solid black;">
            <div id="first" class="col-lg-6" style="padding-right: 0 !important; padding-left: 0 !important;">
                <canvas id="canvas_original"></canvas>
            </div>
            <div id="second" class="col-lg-6" style="padding-right: 0 !important; padding-left: 0 !important;">
                <canvas id="canvas"></canvas>
            </div>
        </div>
        <div class="row" style="margin-right: 0 !important; margin-left: 0 !important;">
            <div class="col-lg-offset-3 col-lg-6">
                <p class="text-center">Desen Ölçeklendirme</p>
                <input id="rate" type="range" min="1" max="4" value="4" onchange="resizePattern()"/>
            </div>
        </div> 
```

和功能

```
function resizePattern() {
    go();
} 
```

您可以对其进行调整以查看不同的结果。

# python - 向 urllib2.Request 添加数据

> ID：13960565
> 
> 赞同：1
> 
> 时间：2012-12-19T20:23:29.030
> 
> 标签：python, github, urllib2, github-api

朋友们。

我正在编写一个简短的脚本，它将获取一个人的 Github 登录名并使用它来查询 Github API 以获取授权令牌。这是代码：

```
def getGithubAuth():
    "Get a Github auth token and return it"
    gist_data = json.dumps({"scopes":["gist"]})
    req = urllib2.Request(auth_url)
    base64str = base64.encodestring("%s:%s" % \
        (github_user, github_pass)).replace('\n','') # user/pass vars are declared elsewhere
    req.add_header("Authorization", "Basic %s" % base64str);
    req.add_data(gist_data) # <- including this makes problems

    try:
        response = urllib2.urlopen(req)
    except urllib2.URLError, e:
        print "Something broke connecting to Github: %s" % e
        return None

    if response.getcode() == 200:
        jresp = json.loads('\n'.join(response.readlines()))[0]
        return jresp['token']
    return None 
```

如果我删除`add_data`呼叫，则请求有效并返回身份验证令牌。问题是，我需要包含传递给的数据`add_data`，以便接收能够与 Github 的 gist 工具交互的身份验证令牌。

### 我的两个问题

1.  如何将此数据添加到我的请求中，以便 Github 识别并接受它？
2.  我希望很快会发现自己处于需要发送更多数据集的类似情况；我将如何传递一组更复杂的值（例如带有嵌套值的大型字典等）？

### 我试过的

我发现一些互联网上的东西说我应该在发送它们之前对值进行编码，但是由于需要一个列表并需要一个元组列表`urllib.urlencode`，所以我无法完成这项工作。`scopes``urlencode`

我 100% 确定我在这里做了一些愚蠢的事情，所以如果你能告诉我它是什么，我将不胜感激:)

谢谢 - 请告诉我提供更多信息是否会使回答更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:28:43.253

基本上，你做的一切都是正确的。我试过你的代码，它工作正常，稍作修改。

这是发生的事情：

当您不包含数据时，发出的请求实际上是一个 GET 请求，它获取授权列表。这不是您想要的，因为它不会创建新的授权。

当您确实包含数据时，发出的请求是一个 POST 请求，这就是您想要的。但是，返回的状态码不是 200，而是 201。因此，只需修改代码以检查 201 并从 JSON 正文中获取令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:51:42.533

使用`requests`更好一点：

```
app_name = 'your_app'

import requests, json

def create_github_oauth_token(user, password):

    # Check there isn't already an auth code for your app:
    r = requests.get('https://api.github.com/authorizations',
        auth=(user, password))
    for auth in r.json():
        if auth['note'] == app_name \
            and 'repo' in auth['scopes']:
            print "Retrieving existing token"
            print json.dumps(auth, indent=4)
            return auth['token']

    print "Creating new token"
    # Otherwise create a new token
    r = requests.post('https://api.github.com/authorizations',
        data=json.dumps({
            'scopes':['repo'],
            'note':app_name
            }),
        headers={'content-type':'application/json'},
        auth=(user, password)
    )
    return r.json()['token'] 
```

# python - 使用python读取动态生成的网页

> ID：13960567
> 
> 赞同：24
> 
> 时间：2012-12-19T20:23:33.930
> 
> 标签：python, web-scraping

我正在尝试使用 python 和漂亮的汤来抓取一个网站。我遇到了在一些网站上，虽然在浏览器上看到的图片链接在源代码中却看不到。但是在使用 Chrome Inspect 或 Fiddler 时，我们可以看到相应的代码。我在源代码中看到的是：

```
<div id="cntnt"></div> 
```

但是在 Chrome Inspect 上，我可以看到在这个 div 类中生成的一大堆 HTML\CSS 代码。有没有办法在 python 中加载生成的内容？我在 python 中使用常规的 urllib，我能够获取源代码但没有生成的部分。

我不是网络开发人员，因此我无法更好地表达这种行为。如果我的问题似乎含糊不清，请随时澄清！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T20:56:13.333

您需要 JavaScript 引擎来解析和运行页面内的 JavaScript 代码。有一堆无头浏览器可以帮助你

[http://code.google.com/p/spynner/](http://code.google.com/p/spynner/)

[http://phantomjs.org/](http://phantomjs.org/)

[http://zombie.labnotes.org/](http://zombie.labnotes.org/)

[http://github.com/ryanpetrello/python-zombie](http://github.com/ryanpetrello/python-zombie)

[http://jeanphix.me/Ghost.py/](http://jeanphix.me/Ghost.py/)

[http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T20:33:13.703

通过javascript加载后可能会生成网站的内容，为了通过python获取生成的脚本，请参阅[this answer](https://stackoverflow.com/questions/8960288/get-page-generated-with-javascript-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T19:55:24.460

常规的抓取工具只获取 HTML 文档。要获取由 JavaScript 逻辑生成的任何内容，您宁愿需要一个[Headless 浏览器](https://en.wikipedia.org/wiki/Headless_browser)，它也可以生成 DOM、加载和运行脚本，就像普通浏览器一样。Wikipedia 文章和网络上的其他一些页面列出了这些及其功能。

选择时请记住，其中一些以前的主要产品现在已被放弃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T14:37:41.157

先试试这个！

也许技术上的数据可能在 javascript 本身中，并且需要所有这些 javascript 引擎业务。（这里有一些很棒的链接！）

但根据经验，我的第一个猜测是 JS 是通过 ajax 请求拉入数据的。如果你能让你的程序模拟它，你可能会得到你需要的一切，而不需要任何繁琐的解析/执行/抓取！

不过，这将需要一些侦探工作。我建议打开您的网络流量记录器（例如 Firefox 中的“Web Developer Toolbar”），然后访问该站点。将注意力集中在任何/所有 XmlHTTPRequest 上。您需要的数据应该在这些响应之一的某个地方找到，可能在一些 JSON 文本的中间。

现在，看看您是否可以重新创建该请求并直接获取数据。（注意：您可能必须设置请求的用户代理，以便服务器认为您是“真正的”网络浏览器。）

# objective-c - 部分而不是行导致崩溃

> ID：13960576
> 
> 赞同：1
> 
> 时间：2012-12-19T20:24:50.760
> 
> 标签：objective-c, ios, uitableview

我想在我的`TableView`单元格之间留一些间距，所以我将`TableView`代码更改为：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return [_boxs count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 1;
} 
```

我的问题是我的“添加行\对象”代码崩溃了。我应该对此代码进行哪些更改？

有问题的代码：

```
SomeClass *newObject = [[SomeClass alloc]initWithTitle:@".....  
[_boxs addObject:newObject];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:_boxs.count-1 inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];    
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:NO];    
[self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionMiddle];
[self performSegueWithIdentifier:@"FirstDetailsSegue" sender:self ]; 
```

`-boxs`是一个 NSMutableArray。

这是我得到的错误：***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试将第 7 行插入第 0 节，但更新后第 0 节中只有 1 行”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:34:04.177

您已在创建的行中切换了行和列`NSIndexPath`。您需要将代码修改为，

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:_boxs.count-1]; 
```

如果您打算只使用一个部分和多行，您应该更改您的委托方法以仅返回 1 个部分和`[_boxs count]`行。在这种情况下，您的代码会起作用。

根据您的评论，您似乎想插入一个新部分而不是一行。尝试这个，

```
[self.tableView insertSections:[NSIndexSet indexSetWithIndex:_boxs.count-1] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

您可以从代码中删除您的 insertRow 行。

# webgl - 如何让播放器控件与three.js中的墙壁碰撞

> ID：13960577
> 
> 赞同：1
> 
> 时间：2012-12-19T20:24:55.560
> 
> 标签：webgl, three.js

我有一个带有大网格的 three.js 场景作为我的地图（从搅拌机中导出）。

我这样加载它：

```
// map
var loader = new THREE.JSONLoader(true);
var thiz = this;
loader.load(
    "iceworld.js"
    , function(geometry, materials) {
        materials[0].side = THREE.DoubleSide;
        var faceMaterial = new THREE.MeshLambertMaterial( materials[0] );
        //var faceMaterial = new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'ice.jpg' ), side: THREE.DoubleSide } );

       mesh = new THREE.Mesh( geometry, faceMaterial );
       thiz.scene.add( mesh );
     }
); 
```

我使用`PointerLockControls`. 现在我可以穿过地图的墙壁，因为没有碰撞检测。

我该如何实施？我在示例和文档中没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:37:52.427

Three.js 是一个图形渲染库，不涉及碰撞检测。你需要一些不同的东西。这里有几个选项：

*   如果您的场景大部分是平面和矩形的，即即使它是 3d，玩家也只能在一个具有简单形状的墙壁的 2d 平面上行走，您可以创建一个简单的网格来标记障碍物的位置，然后根据网格并取消移动，如果它最终在墙内。
*   使用物理引擎：[Physijs](http://chandlerprall.github.com/Physijs/)是 Three.js 的易于使用且灵活的 Bullet 动态引擎包装器。您可以将场景网格包裹在单个`Physijs.ConcaveMesh`中，为您的相机添加碰撞形状并进行即时、准确的碰撞检测 - 但如果您有一个相当复杂的场景，这会很慢。
*   更好的方法是将场景分解为离散对象，例如矩形墙部分，并为它们单独添加廉价的碰撞形状（如立方体、球体、圆柱体）。Physijs 可以做到这一点，然后是[cannon.js](http://schteppe.github.com/cannon.js/)（[请参阅此处的 FPS 演示](https://t.co/Ziol8oy8)）。
*   滚动您自己的碰撞检测。我真的不推荐这个，因为它是一个兔子洞，但它可以让你完全控制哪些功能、准确性和性能权衡对你来说是完美的。

就个人而言，我用 Three.js 创建了一个 FPS 游戏。我的关卡设计非常规则，所以我可以使用网格方法来处理玩家碰撞，但我还想要动态对象（例如桶、盒子等），并且使用 Physijs 让我可以轻松地集成它们。因此，通过将 Physijs 立方体创建到墙壁部分来处理墙壁碰撞。

# php - 分组，然后排序，然后回显的一步方法？

> ID：13960579
> 
> 赞同：0
> 
> 时间：2012-12-19T20:25:13.090
> 
> 标签：php, arrays, sorting

mysql还是通过php？

我的设计要求按日期对文章进行分组。日期将是一个标题，最近 10 篇中的所有文章都将分组在每个标题下。日期可以是任何内容和/或高度零星的，文章必须按降序排列，等等。

我想我必须

1.  检索最后 10 篇文章并将它们放入一个多维数组中，如下所示：

    ```
    $allretrieved = array ( array ( id => a, date => b, title => c, body => d, image => e, etc.),
                            array ( id => a, date => b, title => c, body => d, image => e, etc.),
                            etc.
                    ); 
    ```

2.  然后使用我不完全理解的方法对数组进行分组（提取到另一个数组中？有人可以向我解释这个函数吗？）

    ```
    $date_groups[] = array();
    $group = '';

    foreach( $date_groups as $key=>$val ) {
        if($key == 'date'){
             $group = $val;
        }
    $comment_groups[$group][] = $val;
    } 
    ```

3.  然后对组进行排序？

还是我应该事先排序？

在 MySql 级别上做得更快吗？更高效？

编辑：我为此找到的最佳方法： [Basic PHP MySQL array grouping question](https://stackoverflow.com/questions/2003281/basic-php-mysql-array-grouping-question)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:33:39.590

在您的数据集不太大的某些时候，如果正确添加索引，则使用 mysql 排序应该更快，因为`default`mysql 索引是 b-tree。在您的情况下，将数据带入并对其进行循环，您将拥有一个`O(n)`因此随着数据变大，排序将花费更多时间。

我建议您查看您的数据库架构，用于`explain`查看您正在运行的查询和基准测试中如何使用索引。再次：这将取决于您的数据。

*现在，为了梦想：一旦你的数据足够大以至于在 mysql 中排序太慢，那么你应该切换一些你可以使用 map-reduce 或类似的东西并行排序的东西，但考虑到你的帖子的性质，我认为你现在是安全的。*

# python - 使用 cxfreeze 时无法使用 tkinter/python 脚本设置值

> ID：13960581
> 
> 赞同：11
> 
> 时间：2012-12-19T20:25:23.137
> 
> 标签：python, tkinter, tk, cx-freeze

我用 Python 编写了一个带有 tkinter GUI 前端的程序。从脚本运行时没有问题。

我使用 cx_freeze 将它打包到一个 exe 文件中，并从那里运行它适用于大多数程序。但是，它有一个问题：当试图在其中一个函数中为对象赋值时，`StringVar`会引发异常并终止程序。

当从程序中的不同点访问相同的函数时，它会正常运行。知道有什么问题吗？

导致问题的代码部分如下（我添加了消息框，以便查看失败的原因）：

```
if keyDetail.get('default', False):
    try:
        self.entries[key].set(keyDetail['default'])
    except Exception as err:
        messagebox.showinfo('error', 'key: %s, default: %s, error: %s'%(key, keyDetail['default'], err)) 
```

`self.entries[key]`是一个`tk.StringVar`。

运行时，我在消息框中收到以下消息：

`key: orderNo, default: Order Number, error: can't set "PY_VAR16:0"`

# jenkins - Jenkins 仪表板未显示作业状态

> ID：13960582
> 
> 赞同：5
> 
> 时间：2012-12-19T20:25:29.687
> 
> 标签：jenkins

我在 Jenkins 上遇到间歇性问题，仪表板会指示作业从未运行过，即使它已经运行过。

先前构建的文件和文件夹都已就位，如果我再次运行构建，它通常会在构建完成后正确更新状态。但是，该状态可能会回到表明该作业以后从未构建过。

大多数情况下，失去其状态的不是最新的作业/构建。在构建不同的作业后，状态可能会切换到正确的数据，但并非总是如此。

我还没有确定关于哪些构建被忽略的任何模式，更不用说为什么了。

有没有其他人看到过这种行为？

更新：我在 Windows Server 2008 R2 上运行 Jenkins 1.497。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:56:02.713

据说这个问题已经用 Jenkins 版本 1.505 解决了。（1.502 版的修复显然不够）

# http-post - 以编程方式提交到 .do 文件

> ID：13960584
> 
> 赞同：3
> 
> 时间：2012-12-19T20:25:33.737
> 
> 标签：http-post

我希望有人可能知道这个问题的答案。我正在编写一个必须向安全网页提交请求的应用程序，这本身就是安全网页表单页面的操作（不是很明显，但基本上我正在尝试提交将要填写的信息在初始表单上，并将其提交到表单的“操作”中指定的页面）。我必须提交的“操作”URL 以“.do”扩展名结尾，据我所知，它指定了一个在 JAVA 中动态构建的页面。

我的问题是提交时我没有得到任何回报。这是我正在使用的代码（VB.Net，针对 4.0 版）：

```
Dim PostValues As New NameValueCollection()
Dim RespString As String
Dim RespBytes() As Byte

' URL below is "action" for web form at https://www.deadiversion.usdoj.gov/webforms/validateLogin.jsp
Dim URL As String = "https://www.deadiversion.usdoj.gov/webforms/validateLogin.do"
' These POST values are obtained by examing the source code for the web form ".jsp" page, looking for "input" tags
PostValues.Add("submit", "")
PostValues.Add("deaNum", "--dea number value for our company--")
PostValues.Add("lname", HttpUtility.UrlEncode("boca pharmacal inc"))
PostValues.Add("ssn", "")
PostValues.Add("taxid", "--tax id value for our company--")
PostValues.Add("buttons.next", "Login")

Dim client As New WebClient()
client.Headers.Add("Content-Type", "application/x-www-form-urlencoded")
client.UseDefaultCredentials = True
RespBytes = client.UploadValues(URL, "POST", PostValues)
RespString = Encoding.UTF8.GetString(RespBytes) 
```

当我运行这段代码时，RespBytes 的长度为 0，然后 RespString 只是一个空字符串。相比之下，如果我实验性地替换上面评论中提到的以“.jsp”结尾的 URL，我会得到一个响应，没问题，所以我认为这与它是一个“https”这一事实没有任何关系“网址。

我还试验性地将“.do” URL 粘贴到我的浏览器中，然后尝试直接通过网络浏览它。在这种情况下，它发回了一个空页面，就像我以编程方式尝试它时它什么也没发回一样，这似乎表明由于某种原因它看不到我尝试通过 POST 发送的值。

这是否与 URL 以“.do”结尾的事实有关？提交到这样的 URL 是否需要我在提交时做一些特别的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:35:42.923

这是直接来自微软网站的代码片段：

```
Imports System
Imports System.IO
Imports System.Net
Imports System.Text
Namespace Examples.System.Net
    Public Class WebRequestPostExample

        Public Shared Sub Main()
            ' Create a request using a URL that can receive a post. 
            Dim request As WebRequest = WebRequest.Create("http://www.contoso.com/PostAccepter.aspx ")
            ' Set the Method property of the request to POST.
            request.Method = "POST"
            ' Create POST data and convert it to a byte array.
            Dim postData As String = "This is a test that posts this string to a Web server."
            Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
            ' Set the ContentType property of the WebRequest.
            request.ContentType = "application/x-www-form-urlencoded"
            ' Set the ContentLength property of the WebRequest.
            request.ContentLength = byteArray.Length
            ' Get the request stream.
            Dim dataStream As Stream = request.GetRequestStream()
            ' Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length)
            ' Close the Stream object.
            dataStream.Close()
            ' Get the response.
            Dim response As WebResponse = request.GetResponse()
            ' Display the status.
            Console.WriteLine(CType(response, HttpWebResponse).StatusDescription)
            ' Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream()
            ' Open the stream using a StreamReader for easy access.
            Dim reader As New StreamReader(dataStream)
            ' Read the content.
            Dim responseFromServer As String = reader.ReadToEnd()
            ' Display the content.
            Console.WriteLine(responseFromServer)
            ' Clean up the streams.
            reader.Close()
            dataStream.Close()
            response.Close()
        End Sub
    End Class
End Namespace 
```

[您可以在http://msdn.microsoft.com/en-us/library/debx8sh9.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-27](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-27)找到代码

# php - PHP Parse % 字符串的左字符

> ID：13960588
> 
> 赞同：2
> 
> 时间：2012-12-19T20:25:47.180
> 
> 标签：php

我需要在 80% 的左侧字符上匹配一些字符串。我可以使用`len()`然后计算出该长度的 80% 是多少并将其设置为变量。那我可以做`substr($var, 0, $len80)`

那应该选择 80% 的字符串，但是因为我处于 2 个循环中，并且我必须在两边都这样做，所以我希望有更好的方法来做到这一点。任何人都知道选择字符串的某个百分比的更简单，更有效的方法吗？

**更新**

我最终这样做了`$a2 = substr($a, 0, (strlen($a) * .80));`

相同的概念只是不必设置多个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:29:35.860

Grabbing the left 80% is pretty trivial:

```
$string = "This is my string";
$length = strlen($string);

echo substr($string, 0, $length * .8); 
```

To grab 50% from the middle, offset by 25% on the starting position:

```
$result = substr($string, $length * .25, $length * .5);

// Outputs '...is my s...'
echo "..." . trim($result) . "..."; 
```

Demo: [http://codepad.org/EZnoo2SZ](http://codepad.org/EZnoo2SZ)

# javascript - chrome\chromium 中的 document.location

> ID：13960592
> 
> 赞同：1
> 
> 时间：2012-12-19T20:26:00.690
> 
> 标签：javascript, google-chrome, redirect, chromium

如何在`document.location = 'http://something.com';`不实际禁用脚本的情况下使 chrome\chromium 忽略？

我想出的唯一方法是我自己 MitMing，这显然是一个糟糕的解决方案。

我使用扩展搜索，一无所获。

# iis - iis 7 SSL 网站在 32 位客户端机器上的 Internet Explorer 8 和 9 中不显示

> ID：13960595
> 
> 赞同：0
> 
> 时间：2012-12-19T20:26:16.047
> 
> 标签：iis, internet-explorer-8, internet-explorer-9, 64-bit, 32-bit

但是，在 64 位机器上 ie8 和 ie9 显示网站正常。Chrome、firefox、safari 在 32 或 64 位客户端机器上显示网站正常。

我不知道从哪里开始...我假设这是一个 IIS 问题，可以通过更改站点的配置来解决。有人知道从哪里开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:59:19.723

我建议检查 IE 设置，因为我不确定您是否可以使用 IIS 或 SSL 来为特定浏览器设置它。

# c# - 减少保存在视图状态属性中的代码行

> ID：13960596
> 
> 赞同：5
> 
> 时间：2012-12-19T20:26:16.083
> 
> 标签：c#, asp.net, custom-server-controls

我有一个自定义服务器控件，它有很多属性——每个属性都将它们的状态保存在视图状态中：

```
 public Color XXX
    {
        get
        {
            return (Color)ViewState["XXX"];
        }
        set
        {
            ViewState["XXX"] = value;
        }
    } 
```

这需要很多空间 - 有没有办法减少代码中的行数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:28:18.263

去掉一些空白？

```
public Color XXX
{
    get { return (Color)ViewState["XXX"]; }
    set { ViewState["XXX"] = value; }
} 
```

老实说，如果这确实是您的问题所在，我不会关心您的代码占用的垂直空间量。使用`#region`s 对属性进行分组。如果您不想看到它，您可以折叠该区域。

```
#region ViewState Properties

... your properties

#endregion 
```

# java - 泛型类中的 java 泛型转换

> ID：13960601
> 
> 赞同：2
> 
> 时间：2012-12-19T20:27:00.147
> 
> 标签：java, generics, casting

我正在编写一个通用最大堆的简单实现。如果我写

```
public class FastMaxHeap<T>{

  T[] data;
  int size;

  static final int HEAP_SIZE = 10000;

  @SuppressWarnings("unchecked")
  public FastMaxHeap(){
    data = (T[]) new Object[HEAP_SIZE];
  size = 0;
  }
} 
```

它编译。现在要实际实现堆，即编写 maxHeapify()，我需要能够比较两个 T。先验似乎可能的一种选择是告诉编译器 T 实现了 Comparable。但是，如果我输入 replace < T > with < T implements Comparable > 编译器会抱怨——我该怎么做呢？

或者，我可以定义一个类

```
public class HasValue{

  int value;

  public HasValue(int value){
        this.value = value;
  } 
```

}

理论上我应该能够比较两个 HasValue 对象，如 x.value > y.value。但是如果我输入

```
public class FastMaxHeap<T extends HasValue>{

  T[] data;
  int size;

  static final int HEAP_SIZE = 10000;

  @SuppressWarnings("unchecked")
  public FastMaxHeap(){
    data = (T[]) new Object[HEAP_SIZE];
  size = 0;
  }
} 
```

我现在得到一个 ClassCastException。这里发生了什么？Java 泛型伤害了我的大脑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:30:57.473

在第一种情况下，它在运行时`T extends Object`被擦除。`Object`

在第二种情况下`T extends HasValue`被抹去，`HasValue`所以你需要有。

```
data = (T[]) new HasValue[HEAP_SIZE]; 
```

恕我直言，Java 不允许`new T[HEAP_SIZE]`做你必须做的事情是不必要的迂腐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:34:08.413

你可以试试这个（尚未编译）

```
public class FastMaxHeap<T extends HasValue>{

  HasValue[] data;
  int size;

  static final int HEAP_SIZE = 10000;

   public FastMaxHeap(){
     data = new HasValue[HEAP_SIZE];
     size = 0;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:50:35.637

最好有类型令牌来创建这样的数组

```
public class FastMaxHeap<T>{

  T[] data;
  int size;

  static final int HEAP_SIZE = 10000;

  @SuppressWarnings("unchecked")
  public FastMaxHeap(Class<T> clazz){
    data = (T[])Array.newInstance(clazz, HEAP_SIZE);
    size = 0;
  }
} 
```

这样，您将在运行时没有 ClassCastExceptions

还有：`< T implements Comparable >`不正确，正确的是`< T extends Comparable >`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:51:31.623

您的堆应该接受 Comparator< T > 作为构造函数参数。问题解决了。客户可以使用他想要的任何类型。您还可以提供一个简单的重载来推断已经实现 Comparable 的类型 T 的比较器实现。

# sql - 内部加入 Rails 活动记录

> ID：13960604
> 
> 赞同：0
> 
> 时间：2012-12-19T20:27:16.430
> 
> 标签：sql, ruby-on-rails, activerecord, join

我是 Rails 新手，一直在阅读各种书籍和教程。我有一个简单的（ish）设置，下面的模型和模式。我正在尝试获取用户详细信息以及 usergroup_membership ID。我想我已经为我想要实现的目标正确设置了我的模型（关系就像它们出现的那样，用户通过 usergroup_memberships 属于组 - 没什么特别的）。使用“rails db”，我可以使用原始 SQL 来获取我需要的记录集，但我不知道如何使用 Rails 方式进行操作。

我的基础课

```
Class User
has_many :usergroup_memberships
has_many :usergroups, :through => :usergroup_memberships

Class Usergroup
has_many :usergroup_memberships, :dependent => :destroy
has_many :users, :through => :usergroup_memberships

Class UsergroupMembership
belongs_to :usergroup
belongs_to :user 
```

有效的 SQL

```
SELECT users.*, usergroup_memberships.id 
FROM users
LEFT JOIN usergroup_memberships ON usergroup_memberships.user_id = users.id 
WHERE usergroup_memberships.usergroup_id = 1; 
```

上面的 SQL 很好，并返回最后标记了加入的 usergroup_memberships.id 的记录集。非常感谢有关如何通过 Rails 解决此问题的任何帮助或文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:35:05.417

您可以在所谓的[rails 控制台](http://guides.rubyonrails.org/command_line.html)中进行类似的实验。

如果您在您的应用程序目录中，您可以使用以下命令启动 rails 控制台：

```
rails c 
```

等待提示！首先，您需要获取一个用户：

```
u = User.first 
```

然后你可以很容易地获得用户组：

```
g = u.usergroups 
```

你会发现自己总是在控制台中测试这些东西，你可以在你的应用程序中使用它们，例如：获取第一个用户用户组：

```
User.first.usergoups 
```

但是，让我推荐 gem: [pry](https://github.com/pry/pry)。通过使用此 gem（只需将其放入您的 Gemfile 中），您可以在应用程序中创建断点以进行调试，这将产生一个 rails 控制台。例如，在控制器方法中，您可以说：

```
binding.pry 
```

当这一行被执行时，rails 服务器将切换到调试模式并在断点处停止，您可以看到该范围内定义的所有变量和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:56:12.163

我发现了一些对我有用的东西：

```
@blah = Usergroup.find(groupID).usergroup_memberships.includes(:user) 
```

然后，访问用户详细信息：

```
@blah[i].user.email 
```

（感谢您的评论 - @Baldrick - 我认为我的模型有点破损/非常规，下一个项目要记住的东西）。

# wordpress - 我可以使用什么来代替 get_the_category() 进行自定义分类

> ID：13960606
> 
> 赞同：2
> 
> 时间：2012-12-19T20:27:23.113
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

基本上，我在 WordPress 中使用自定义分类法（custom_tax）创建了一个自定义帖子类型。现在我创建了一个自定义查询，我想在其中获取保存自定义帖子的自定义类别并将其名称作为字符串输出。我在使用 WordPress 标准分类时这样做：

```
//Start the query
   query_posts(array(
  'showposts' => $posts,
  'orderby' => 'asc',
  'category_name' => $category
));

$temp_title = get_the_title();
$temp_link = get_permalink();
$temp_excerpt = get_the_excerpt();
$temp_time = get_the_date('Y-m-d');
$temp_categories = get_the_category(', ');
$temp_author = get_the_author();
$temp_content = get_the_content();
$i++;

$output2 .= "<li class='item' data-id='id-" . $i . "' data-type='" . $temp_categories . "'><a href='" . $temp_link . "' rel='prettyPhoto[portfolio]'><img class='' src='" . $path . "/library/timthumb.php?src=" . $image[0] . "&h=130&w=210&zc=1&q=100' alt='" . $temp_title . "' /></a></li>"; 
```

它就像一个魅力。现在我需要使用自定义帖子和自定义分类，并尝试了很多变体：

```
//Start the query
query_posts(array(
  'post_type' => array('post', 'portfolio'),
  'showposts' => $posts,
  'orderby' => 'asc',
  'category_name' => $category
));

$temp_title = get_the_title();
$temp_link = get_permalink();
$temp_excerpt = get_the_excerpt();
$temp_time = get_the_date('Y-m-d');
$temp_categories = get_the_terms( get_the_ID(), 'custom_cat', ', ' );
$temp_author = get_the_author();
$temp_content = get_the_content();
$i++;

$output2 .= "<li class='item' data-id='id-" . $i . "' data-type='" . $temp_categories . "'><a href='" . $temp_link . "' rel='prettyPhoto[portfolio]'><img class='' src='" . $path . "/library/timthumb.php?src=" . $image[0] . "&h=130&w=210&zc=1&q=100' alt='" . $temp_title . "' /></a></li>"; 
```

它不起作用。我已经尝试过 get_the_terms()、the_terms() 和 get_terms()，但没有一个像 get_the_category() 以前那样有效——它输出的是一个带有类别名称的字符串。我错过了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:37:13.743

Wordpress 将分类法描述为“术语”。[他们在此处](http://codex.wordpress.org/Function_Reference/get_terms)找到的有关“get_terms()”的文档中可能有一些帮助。如果您想按术语排序，[wordpress 论坛上有一篇很棒的帖子](http://wordpress.org/support/topic/how-to-sort-terms-in-custom-taxonomies)可以做到这一点！

# django - Django 博客文章图片

> ID：13960612
> 
> 赞同：1
> 
> 时间：2012-12-19T20:27:51.943
> 
> 标签：django, models

添加了一个特色图像类，它增加了为博客文章设置特色图像的能力。

```
class PostFeaturedImage(models.Model):  
    last_modified = models.DateTimeField(auto_now_add=True,editable=False)
    created = models.DateTimeField(auto_now_add=True,editable=False)
    title = models.CharField(max_length=20)
    image = models.ImageField(upload_to='images/%Y/%m/%d')
    post = models.ForeignKey(Post)

    def get_image(self, field_attname):
        """Get upload_to path specific to this photo."""
        return 'photos/%Y/%m/%d' % (""" need this to make it work """) 
```

图片将上传到一个目录，如`images/2012/12/19/image.png`

我已经更新了 admin.py，我可以成功地将特定图像上传并保存到博客文章中，但我缺乏检索它的知识。我怎样才能完成`get_image`，这样我才能找回图像的路径，然后我用什么来显示它？我想它会是这样的......

```
{% if posts %}
    {% for post in posts %}
        {% if postfeaturedimage %}
         <img src="{{post.postfeaturedimage.get_image}}" alt="{{post.postfeaturedimage.title}}">
        {% endif %}
    {% endfor %}
{% endfor %} 
```

我对 Django 非常陌生，感觉自己正在取得重大进展，但我仍然在一些细节上有所疏忽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:06:06.253

试试这个

```
def get_image(self):
    """Get upload_to path specific to this photo."""
    return self.image.url 
```

此外，您在模板中的`if`条件`PostFeaturedImage`应该`{% if post.postfeaturedimage %}`是`{% if postfeaturedimage %}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T21:12:19.333

get_image 函数是不必要的。您可以像这样从模板访问图片网址：

```
{{ post.postfeaturedimage.image.url }} 
```

# sql - 查找返回多行的 count(*) 的平均值

> ID：13960613
> 
> 赞同：2
> 
> 时间：2012-12-19T20:27:56.460
> 
> 标签：sql, sql-server-2005

嗨，我正在尝试计算结果集的平均值，但我无法这样做，选择 count(*) 的查询返回 1 月 1 日至 31 日之间每天的调用计数，因此返回了近 20 行。我应该如何计算结果的平均值，然后将值分配给像 SET @abc = （下面的查询）这样的变量。我正在使用 sql server 2005。

```
SELECT avg(Calls) AS average 
FROM
(
     SELECT COUNT(*) Calls      
     FROM abc 
     WHERE CallDate  BETWEEN '20120101'  AND '20120131' 
     AND datepart(Hh,TranscribeDateTime) = '07' 
     AND datepart(Mi,TranscribeDateTime) BETWEEN '00' AND '59'  
     AND AppID = 123 AND Status ='T' 
     GROUP BY calldate
) 
```

如果我的方法是错误的，请提出一个。谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:30:43.760

Looks like you are just missing a table alias for the derived table (required in SQL Server) and the assignment statement (also you can't alias the column `AS average` if you are assigning it to a variable)

```
DECLARE @ABC INT;

SELECT @ABC = AVG(Calls)
FROM
(
     SELECT COUNT(*) Calls      
     FROM abc 
     WHERE CallDate  BETWEEN '20120101'  AND '20120131' 
     AND datepart(Hh,TranscribeDateTime) = '07' 
     AND datepart(Mi,TranscribeDateTime) BETWEEN '00' AND '59'  
     AND AppID = 123 AND Status ='T' 
     GROUP BY calldate
) T  /* <-- Alias here */ 
```

# c++ - Boost Geometry / intersection() 似乎返回不一致的结果

> ID：13960619
> 
> 赞同：6
> 
> 时间：2012-12-19T20:28:22.030
> 
> 标签：c++, debugging, boost, boost-geometry

我有一个适用于 Boost Geometry 的 3D 矢量作为 2D 点和环：

```
BOOST_GEOMETRY_REGISTER_POINT_2D(Vector3, float, cs::cartesian, x, y)
BOOST_GEOMETRY_REGISTER_RING( std::vector< Vector3 > ) 
```

然后：

1.  绘制一些非凸多边形（**环**）
2.  绘制线段，切割非凸多边形并将其分成 2（较小的通常是三角形）
3.  在线段上镜像较小的新 2 个多边形

结果是两个多边形，它们重叠并具有 1 个切边。

然后我检查两个多边形的交集。在 15% 的情况下，相交结果是空的，这令人惊讶（较小的多边形可以有面积 1.0f..10.f，所以它不是极端情况）

```
std::deque< Polygon > output;
bg::intersection(bigger_Polygon, mirrored_over_cutting_lineseg_Polygon, output);
// output.size() == 0 in 15% of cases 
```

可能是什么原因？在调用 intersection() 之前，我尝试在每个多边形上执行 boost::geometry::correct()，但它没有帮助。我的想法不多了

**编辑：：**

我已经测试过使用 Boost Geometry 类型和双存储类型创建新环是否会有所帮助：

```
void my_intersection( std::vector<Vector3>& polyA, std::vector<Vector3>& polyB, std::deque< ... > & output ) {
    typedef bg::model::d2::point_xy<double> point_type;
    bg::model::ring< point_type > ringA;
    bg::model::ring< point_type > ringB;

    for( int i = 0; i < (int) polyA.size(); i ++ ) {
        bg::append( ringA, bg::make< point_type >( polyA[i].x, polyA[i].y ) );
    }

    for( int i = 0; i < (int) polyB.size(); i ++ ) {
        bg::append( ringB, bg::make< point_type >( polyB[i].x, polyB[i].y ) );
    }
    ...
} 
```

我为 polyA、polyB（我的初始浮点 Vector3）和 ringA、ringB 执行了两个 intersection() 调用。然后，出现不一致：

```
A[6]( 58.20822143554688 100.0000076293945 , 89.18041229248047 100.0000076293945 , 100.0000076293945 93.08255767822266 , 100 80 , 64.98564147949219 80 , 58.20822143554688 100.0000076293945 )
B[4]( 89.18040466308594 100 , 100 93.08255004882812 , 93.72125244140625 90.17939758300781 , 89.18040466308594 100 )
INFO: ------ 1 vs 0 ------ INCONSISTENCY 
```

“1”表示：输出双端队列的 size() == 1，因此发生交集（这是用于 ringA/ringB 交集）。“0”代表 Vector3——空结果。

**编辑2**：

使用具有**浮点**存储类型的 boost 模型也会导致 ringA 和 ringB 调用返回不正确的结果。**我已经确认了这一点。**我曾经对双打不会改变错误的“逻辑”感到困惑，但这是因为意外删除了正确的（）调用。对于 ringA/ringB 冗余环的正确（）调用和双重存储类型，我无法获得空交叉点。

**编辑3**：

以下是 intersection() 返回的 5 种情况：

*   前两个环的空结果 (std::vector< Vector3 >)，
*   当第一次创建 std::vector<> 环的双类型副本时（使用 boost::geometry 模型），size() == 1 的正确结果。

情况1：

```
A[6]( 58.20822143554688 100.0000076293945 , 89.18041229248047 100.0000076293945 , 100.0000076293945 93.08255767822266 , 100 80 , 64.98564147949219 80 , 58.20822143554688 100.0000076293945 )

B[4]( 89.18040466308594 100 , 100 93.08255004882812 , 93.72125244140625 90.17939758300781 , 89.18040466308594 100 ) 
```

![戒指 1](../Images/25323650d1f99a6112ae94d97c331980.png)

案例二：

```
A[10]( 0 100 , 66.90238189697266 99.99999237060547 , 70.97279357910156 80 , 40 80 , 40 60 , 28.31221580505371 60 , 20 67.16078948974609 , 20 80 , 0 80 , 0 100 )

B[4]( 28.31221961975098 60.00000381469727 , 20.00000762939453 67.16079711914062 , 27.08192825317383 68.22066497802734 , 28.31221961975098 60.00000381469727 ) 
```

![戒指 2](../Images/c21b0e7b6b916f79c0dbed8628f655e6.png)

案例3：

```
A[10]( 0 100 , 72.89675903320312 100 , 73.80842590332031 80 , 40 80 , 40 60 , 26.65167617797852 60 , 20 65.58068084716797 , 20 80 , 0 80 , 0 100 )

B[4]( 26.65167999267578 60.00000381469727 , 20.00000381469727 65.5806884765625 , 25.49577522277832 66.55047607421875 , 26.65167999267578 60.00000381469727 ) 
```

![戒指 3](../Images/a3cface574f0e1f22b36f26f81ff6eb8.png)

案例4：

```
A[6]( 47.28099060058594 99.99999237060547 , 95.71660614013672 100 , 100 97.21295166015625 , 100 80 , 68.72442626953125 80.00000762939453 , 47.28099060058594 99.99999237060547 )

B[4]( 95.71659851074219 99.99999237060547 , 99.99998474121094 97.21293640136719 , 97.45189666748047 96.08384704589844 , 95.71659851074219 99.99999237060547 ) 
```

![戒指 4](../Images/42ca514eef02139038a2aac828694acb.png)

案例5：

```
A[6]( 57.69097518920898 100 , 91.16551208496094 100 , 99.99999237060547 92.9193115234375 , 100 80 , 64.8609619140625 80 , 57.69097518920898 100 )

B[4]( 91.16550445556641 99.99999237060547 , 99.99998474121094 92.9193115234375 , 93.08920288085938 91.37748718261719 , 91.16550445556641 99.99999237060547 ) 
```

![戒指 5](../Images/e5d3db693ec29458e66a23b44a1aadb1.png)

**编辑4**：

这是一个函数，我用它在交叉线 (x0,y0)-(x1,y1) 上镜像多边形。使用此功能创建切边——镜像后，点位于同一位置。

```
Vector3 mirror_point( Vector3 p, float x0, float y0, float x1, float y1 ) {
    float dx = x1 - x0;
    float dy = y1 - y0;

    float a = ( dx * dx - dy * dy ) / ( dx * dx + dy * dy );
    float b = 2.0f * dx * dy / ( dx * dx + dy * dy );

    float x2 = a * ( p.x - x0 ) + b * ( p.y - y0 ) + x0;
    float y2 = b * ( p.x - x0 ) - a * ( p.y - y0 ) + y0;

    return Vector3( x2, y2, p.z );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:16:41.127

我对您输入的分析：

第二个多边形（从 24.57 开始）是逆时针的。第二组的第二个多边形（从 90.61 开始）也是逆时针方向的。所以 boost::geometry::correct 当然应该被调用。它有所作为。

所以，如果我使用 geometry::correct，我会得到以下结果：

1）第一次组合，使用double：intersection area=12.3854，一个几何，4个点 2）第一个组合，使用float：intersection area=12.3854，一个几何，4个点（相同） 这个结果和SQL Server的结果是一样的

3）第二种组合，使用双精度：相交面积=34.7862，一个几何，4个点 4）第二种组合，使用浮点数：相交面积=34.7862，一个几何，4个点 这个结果与SQL Server的结果相同。

请注意，在这两种情况下，第二个多边形都在第一个多边形内（在第二种情况下不接触，在第一种情况下它是接触的 - 根据 SQL Server）。

所以所有输出似乎都是正确的。您提到：“消除空交叉点”，最近在 Boost.Geometry 中已解决。该修复尚未在 1.52 中发布，但将在 1.53 中发布。因此，如果这是特定问题，则必须使用 Boost.Trunk 版本。

但是，这不会导致空输出。

# php - 菱形中的两个问号而不是倒置的感叹号

> ID：13960620
> 
> 赞同：2
> 
> 时间：2012-12-19T20:28:23.410
> 
> 标签：php, eclipse, unicode, utf-8, character-encoding

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:30:52.117

# php - PHP not replacing a line with special characters

> ID：13960622
> 
> 赞同：1
> 
> 时间：2012-12-19T20:28:27.067
> 
> 标签：php

I have written a module for a PHP IRC bot which uses a database for saving which nicks are "linked" to a Wikipedia account. To do this, I have the following code:

```
$pudb_wnas = file('cache.ucb');
foreach ($pudb_wnas as $lineNumber => $line) {
    if (preg_match("/" . p_chars($ex[4]) . "~!/i", $line) != false) {
        $found = true;
        break;
    }
}
if ($found) {
    echo "!!!!!!!!!!!!!!!!FOUND!!!!!!!!!!!!!!!!!!\n";
    $lines = file('cache.ucb', FILE_IGNORE_NEW_LINES);
    $wnas_bu = $lines[$lineNumber];                                                                                                                                            
    $lines[$lineNumber] = trim($wnas_bu) . "~!" . $mask[0];                                                                                                                    
    file_put_contents('cache.ucb', implode("\n", $lines));                                                                                                                     
} else {
    $udb_wnas = fopen("cache.ucb", "a+");
    fwrite($udb_wnas, "\n" . p_chars($ex[4]) . "~!" . $mask[0]);
    fclose($udb_wnas);
} 
```

The `p_chars` function, alongside with `dp_chars`, is a custom function to add or remove backslashes to some special characters:

```
function p_chars( $text ) {
    $m_text = str_replace("(", "\(", $text);
    $m_text = str_replace(")", "\)", $m_text);
    return $m_text;
}

// Función para descodificar p_chars
function dp_chars( $text ) {
    $m_text = str_replace("\(", "(", $text);
    $m_text = str_replace("\)", ")", $m_text);
    return $m_text;
} 
```

The cache.ucb file (which is really nas.udb, but that's another story) contents are located [here](https://github.com/unrar/unbot/blob/master/nas.udb "UnBot's GitHub"). You can also see the full code [here](https://github.com/unrar/unbot/blob/master/sybil.php "UnBot's GitHub").

The variable $ex[4], in this context, means the argument passed to the %nas command, which is used from IRC like this: `%nas Test`.

When you call the command, it searches on the [cache.ucb](https://github.com/unrar/unbot/blob/master/nas.udb "UnBot's GitHub") file for a line starting with `$ex[4]."~!"`. I use `~!` as a separator. For example, if the command arguments were `%nas Testing`, it'd search for `Testing~!`. If it founds the line, it replaces it with itself **plus** `"~!".$mask[0]`. `$mask[0]` is the nickname of the user who called the command.

If it doesn't find the line, it'll add a new one following this structure: `$ex[4]~!$mask[0]`. So, as an example, if Bousie did `%nas Testing`, it would search for `Testing~!`. Assuming the line was `Testing~!Test`, it would replace it with `Testing~!Test~!Bousie`. Else, it'd add the line `Testing~!Bousie`.

The problem is that, if Bousie did `%nas UnRar`, it'd work properly. But if Bousie did `%nas I(L)Verano`, it'd add a new line. But there's already the I(L)Verano line. Note that it **should** convert the `I(L)Verano` argument to `I\(L\)Verano` before sarching it, so I don't know what I'm doing wrong on this code.

You'd really help me telling me what I'm doing wrong. Oh, and I tried with lots of codes I saw here, I tried mixing them and... Perhaps the problem is on the p_chars and dp_chars functions? I can't see it, though!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:30:44.197

所有你需要的是

```
$file = "cache.ucb";
$ex[4] = "I\(L\)Verano";
$nick = "Bousie";
$pudb_wnas = file($file, FILE_IGNORE_NEW_LINES);

var_dump($pudb_wnas); // before
foreach ( $pudb_wnas as $k => &$line ) {
    preg_match(sprintf("/^%s~/", preg_quote($ex[4])), $line) and $line = sprintf("%s~!%s", $line, $nick);
}
var_dump($pudb_wnas); // after
file_put_contents($file, implode(PHP_EOL, $pudb_wnas)); 
```

前

```
array (size=4)
  0 => string 'UnRar~!Catbuntu' (length=15)
  1 => string 'MistrX~!MRX' (length=11)
  2 => string 'I\(L\)Verano~!ILVerano' (length=22)
  3 => &string '-jem-~!jem-' (length=11) 
```

后

```
array (size=4)
  0 => string 'UnRar~!Catbuntu' (length=15)
  1 => string 'MistrX~!MRX' (length=11)
  2 => string 'I\(L\)Verano~!ILVerano~!Bousie' (length=30)  // works perfectly 
  3 => &string '-jem-~!jem-' (length=11) 
```

# wcf - Calling a Rest Service with WebClient is throwing Error

> ID：13960628
> 
> 赞同：0
> 
> 时间：2012-12-19T20:28:59.967
> 
> 标签：wcf, iis

Following exception is thrown when I tried to call the Rest Service from Webclient. I am Getting this exception only if I am calling this Rest service from another WCF service. If I call the Rest Service from the Console application, no error was thrown.

**Here are the exception details**..

```
{"Unable to connect to the remote server"}
    [System.Net.WebException]: {"Unable to connect to the remote server"}
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: null
    InnerException: {"A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx.xxx.xx.xxx:443"}
    Message: "Unable to connect to the remote server"
    Source: "System"
    StackTrace: "   at System.Net.WebClient.UploadDataInternal(Uri address, String method, Byte[] data, WebRequest& request)\r\n   at System.Net.WebClient.UploadString(Uri address, String method, String data)\r\n   at System.Net.WebClient.UploadString(String address, String method, String data)\r\n   at 
    TargetSite: {Byte[] UploadDataInternal(System.Uri, System.String, Byte[], System.Net.WebRequest ByRef)} 
```

**Here is the Inner Exception details**:

```
{"A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx.xxx.xx.xxx:443"}
    [System.Net.Sockets.SocketException]: {"A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx.xxx.xx.xxx:443"}
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: null
    InnerException: null
    Message: "A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx.xxx.xx.xxx:443"
    Source: "System"
    StackTrace: "   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)\r\n   at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP)\r\n   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)"
    TargetSite: {Void DoConnect(System.Net.EndPoint, System.Net.SocketAddress)} 
```

Any sort of Help in resolving this issue is appreciated ...

# standards-compliance - HTTP server not to support persistent connections

> ID：13960630
> 
> 赞同：0
> 
> 时间：2012-12-19T20:29:06.347
> 
> 标签：standards-compliance, httpserver, http-1.1

is it possible for an HTTP/1.1 server not to support persistent connections and still be HTTP-compliant?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:31:54.220

是的，您可以在此处阅读规范。

[HTTP 1.1 实现应该实现持久连接。](https://www.rfc-editor.org/rfc/rfc2616#section-8.1)

应该意味着在特定情况下可能存在忽略持久连接的正当理由，但在选择不同的课程之前必须理解并仔细权衡全部含义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T20:32:17.677

您应该为 HTTP/1.1 实现持久连接

> HTTP/1.1 和早期版本的 HTTP 之间的一个显着区别是持久连接是任何 HTTP 连接的默认行为。也就是说，除非另有说明，否则客户端应该假设服务器将保持持久连接，即使在服务器的错误响应之后也是如此。

其可选性实际上是为 HTTP 客户端设计的。

来源：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1)

# mysql - 应用程序的数据库结构

> ID：13960633
> 
> 赞同：1
> 
> 时间：2012-12-19T20:29:16.973
> 
> 标签：mysql, database, data-structures

我正在 MySQL 上构建一些关系数据库并且遇到了一些问题。
例如，我有一个表客户端和课程。
一位客户可以访问多个课程。
这如何存储在数据库中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:32:30.670

我猜这实际上是一个多对多的关系，你可以用三个表来建模：

```
Client
 - ClientId (PK)
 - other fields

Cource
 - CourceId (PK)
 - other fields

ClientCourceVisit
 - ClientId (FK)
 - CourceId (FK)
 - other fields 
```

# gcc - 如何编译混合的 C 和 C++ 代码？

> ID：13960635
> 
> 赞同：5
> 
> 时间：2012-12-19T20:29:22.743
> 
> 标签：gcc, compiler-construction, makefile

我有一个 C++ 类，我想包含在 C 代码中，所以我写了一个包装器：

```
#ifndef __PMPC_CMPC__
#define __PMPC_CMPC__

#ifdef __cplusplus
extern "C"
#endif
void init_motor();

#ifdef __cplusplus
extern "C"
#endif
double* calc_cont_sig(double  * );

#endif 
```

这是一个简单的测试

```
#include "cmpc_ekf.h"
#include <stdio.h>
int main(int argc, char* argv[]) {
    init_motor();
} 
```

我尝试使用静态库来包含 C++ 代码，所以这是我的 Makefile：

```
all : main.o libcmpc_ekf.a
    gcc $(EFLAGS) $(CFLAGS) -static  -o main.out main.o  -L. -lcmpc_ekf

main.o: libcmpc_ekf.a
    gcc $(EFLAGS) $(CFLAGS) -static  -c main.c -L. -lcmpc_ekf

libcmpc_ekf.a: cmpc_ekf.o
    ar  rcs libcmpc_ekf.a  cmpc_ekf.o

cmpc_ekf.o: 
    g++ $(EFLAGS) $(CPPFLAGS) -c cmpc_ekf.cpp

clean:
    rm *.o main.out 
```

但我收到以下错误（这只是错误代码中的一个标记）

```
cmpc_ekf.cpp:(.text+0x40): undefined reference to `std::cout'
cmpc_ekf.cpp:(.text+0x45): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)' 
```

如果我`g++`用来创建二进制文件，那么一切正常。如何在不使用`g++`或`-lstdc++`创建二进制文件时将 C++ 类或库包含到 C 代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:42:37.683

在 C++ 应用程序中包含 C 代码很简单（正如您在使用 g++ 构建二进制文件时发现的那样）。但是，实际上并不支持采用其他方式。我不会说这是不可能的，但是您的“C”代码必须链接到 C++ 运行时，然后初始化 C++ 运行时空间。稍后，它也必须终止 C++ 运行时。我想不出随便做这件事的理由。相反，只需将应用程序创建为 C++ 并链接到其运行时是 C++ 运行时子集的 C 代码。

我应该澄清一下，这一切意味着用 C++ 编译器编译你的 C 代码。它会为您处理上述所有问题。

# asp.net-mvc - MVC 路由未按预期工作

> ID：13960640
> 
> 赞同：2
> 
> 时间：2012-12-19T20:30:01.923
> 
> 标签：asp.net-mvc

我正在尝试掌握 MVC 路由系统，但它没有像我预期的那样工作。

假设我定义了这条路线：

```
context.MapRoute(
        "NewCertificates",
        "NewQuote/GetCertificate/{date}/{id}",
        new { area = "NewQuote", controller = "Quote", action = "GetCertificate" },
        new[] { "Acme.Areas.NewQuote.Controllers" }
    ); 
```

在我看来这个动作链接：

```
@Html.ActionLink("Click Here", "GetCertificate", new { controller = "Quote", area = "NewQuote", date = "20121219", id = "acme" }) 
```

我希望生成的 URL 看起来像：

```
http://localhost:50582/NewQuote/GetCertificate/20121219/acme 
```

但相反，我得到：

```
http://localhost:50582/NewQuote/GetCertificate/acme?date=20121219 
```

谁能告诉我为什么会这样？

编辑以显示上述路线之前的路线：

```
 context.MapRoute(
                "NewQuoteValidation",
                "NewQuote/Validation/{action}/{id}",
                new { area = "NewQuote", controller = "Validation", action = "IsImeiAvailable", id = UrlParameter.Optional },
                new[] { "Acme.Areas.NewQuote.Controllers" }
            );

        context.MapRoute(
                "NewAjax",
                "NewQuote/Ajax/{action}/{id}",
                new { area = "NewQuote", controller = "Ajax", action = "Index", id = UrlParameter.Optional },
                new[] { "Acme.Areas.NewQuote.Controllers" }
            );

        context.MapRoute(
                "NewQuote",
                "NewQuote/{action}/{id}",
                new { area = "NewQuote", controller = "Quote", action = "Select", id = UrlParameter.Optional },
                new[] { "Acme.Areas.NewQuote.Controllers" }
            ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:36:47.817

另一个先前的路由定义很可能正在声明该`ActionLink`定义的所有权。您可能想尝试：

1.  将“NewCertificates”路由定义放在列表的首位或更高的位置。
2.  根据路由显式构造链接，使用`Html.RouteLink`

* * *

```
@Html.RouteLink("Click Here", 
      // route name
    "NewCertificates", 
      // route attributes
    new { controller = "Quote", area = "NewQuote", date = "20121219", id = "acme" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:13:24.763

试试这个来调用你的路线：

@Html.RouteLink("点击这里", "NewCertificates", new { controller = "Quote", area = "NewQuote", id = "acme" })

# boost-mpi - 在同类机器上提升 mpi

> ID：13960653
> 
> 赞同：2
> 
> 时间：2012-12-19T20:30:50.790
> 
> 标签：boost-mpi

以前有没有人在 boost MPI 中成功使用过同类选项？在取消注释 boost mpi config.cpp 文件中的相应行并为我通过的几个类启用 BOOST_IS_BITWISE_SERIALIZABLE([classname]) 后，我构建了 boost mpi，但我发现性能没有变化，所以我不确定它是否是启用。

该文档说明了以下内容：

通过避免 MPI_Pack/MPI_Unpack 调用但使用直接按位复制，可以在同构机器上进行更多优化。在构建 Boost.MPI 和构建应用程序时，可以通过定义宏 BOOST_MPI_HOMOGENEOUS 来启用此功能。此外，所有类都需要标记为 is_mpi_datatype 和 is_bitwise_serializable，通过使用 Boost.Serialization 的帮助宏：

我在构建 boost 时定义了宏并标记了类，但是我在任何地方都找不到关于构建应用程序时要做什么的信息，所以我想也许这就是我所缺少的。任何帮助将非常感激。

# eclipse - 使用 ColdBox Platform Utilities 扩展时出现 ColdFusion Builder 2 连接重置错误

> ID：13960656
> 
> 赞同：1
> 
> 时间：2012-12-19T20:31:01.263
> 
> 标签：eclipse, coldfusion, coldfusionbuilder, coldbox

我有一个使用 CF10 和 CFBuilder 2 的 DEV 环境设置。

我有我的网络服务器设置（IIS 7.5），并且我已经授予了 wwwroot 目录的写入权限，因此在尝试创建文件或目录时不会收到提示。

当我尝试使用 ColdBox Platform Utilities 运行用于创建 CF 项目的扩展时，我最终收到错误消息。

错误是：连接休息和 Java 堆栈跟踪是：

```
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
    at com.adobe.ide.coldfusion.appcodegeneration.runtime.HTTPRequestSender.httpRequest(HTTPRequestSender.java:61)
    at com.adobe.ide.coldfusion.appcodegeneration.runtime.CFMHandler.callHandler(CFMHandler.java:191)
    at com.adobe.ide.coldfusion.appcodegeneration.runtime.CFMHandler.performExecute(CFMHandler.java:129)
    at com.adobe.ide.coldfusion.appcodegeneration.runtime.CFMenuHandler$1.run(CFMenuHandler.java:225)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

在使用 CFBuilder 或 ColdBox 工具之前，我从未遇到过这个问题。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:33:11.280

套接字异常：

> 抛出表示创建或访问 Socket 时出错。

所以它与TCP有关......检查防火墙，端口，ip......等。

# python - Python 会懒惰地评估 if 的条件吗？

> ID：13960657
> 
> 赞同：80
> 
> 时间：2012-12-19T20:31:12.323
> 
> 标签：python, lazy-evaluation

例如，如果我有以下语句：

```
if( foo1 or foo2)
    ...
    ... 
```

如果 foo1 为真，python 会检查 foo2 的条件吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-19T20:32:06.607

是的，Python 懒惰地评估布尔条件。

[文档](http://docs.python.org/2/reference/expressions.html#boolean-operations)说，

> 表达式 x 和 y 首先计算 x；如果 x 为假，则返回其值；否则，评估 y 并返回结果值。
> 
> 表达式 x 或 y 首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-05-20T08:59:50.267

`and` `or`懒惰

`&` `|`不懒惰

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-11-20T21:58:05.647

Python的懒惰可以通过以下代码来证明：

```
def foo():
    print('foo')
    return False

def bar():
    print('bar')
    return False

foo() and bar()         #Only 'foo' is printed 
```

另一方面，

```
foo() or bar() 
```

将导致打印“foo”和“bar”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-19T21:17:56.533

这在技术上不是惰性求值，而是短路布尔表达式。

懒惰的评价有一些不同的内涵。例如，真正的惰性评估可能会允许这样做

```
def foo(arg) :
    print "Couldn't care less"

foo([][0]) 
```

但Python没有。

Python 也很好，因为它“回声”它是布尔参数。例如，一个 or 条件返回它的第一个“真”参数或最后一个参数（如果所有参数都是“假的”）。与条件相反。

所以“回声参数”布尔值意味着

> 2 和 [] 和 1

计算为 []，并且

> [] 或 1 或 2

评估为 1

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-27T11:07:44.477

一个简短的演示是比较两者之间的时间差

```
all(xrange(1,1000000000)) 
```

和

```
any(xrange(1,1000000000)) 
```

all() 必须检查每一个值，而 any() 可以在找到第一个 True 后放弃。因此，作为生成器的 xrange 也会在评估器完成后立即放弃生成事物。出于这个原因， all 将消耗大量 RAM 并需要很长时间，而 any 将仅使用几个字节并立即返回。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-19T20:33:42.910

是的，Python 计算是惰性的，所以`foo2`不会被检查。

如果我不知道密钥是否存在，我一直使用它来从类似字典的对象中获取项目：

```
if 'key' in mydict and mydict['key'] == 'heyyo!':
    do_stuff() 
```

请参阅@unutbu 的答案以获得更全面的解释。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-19T21:34:14.663

确实`or`是短路的部分：

```
>>> 1 or 1/0  #also 0 and 1/0
1
>>> 0 or 1/0  #also 1 and 1/0

Traceback (most recent call last):
  File "<pyshell#1240>", line 1, in <module>
    0 or 1/0
ZeroDivisionError: integer division or modulo by zero 
```

# php - 如何使用 php 和 ssl 连接到 mysql 数据库？

> ID：13960658
> 
> 赞同：0
> 
> 时间：2012-12-19T20:31:14.553
> 
> 标签：php, mysql, ssl

> **可能重复：**
> [使用 PHP 通过 SSL 连接到 MySQL](https://stackoverflow.com/questions/6511999/connecting-to-mysql-via-ssl-using-php)

我是 php 新手，我不确定如何使用 ssl 远程连接到数据库。使用 mysql 工作台，我只需输入数据库的 url 和主机名以及我们的密码，然后选择使用 ssl，我就可以连接。我怎样才能使用 php 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:35:32.877

[在此处](http://www.madirish.net/214)描述的 mysql 服务器端进行了一些 preaprations 之后，您可以使用 ssl 和以下 php 代码进行连接：

```
$db = mysqlii_init();
$db->ssl_set('server-key.pem','server-cert.pem', 'cacert.pem', NULL, NULL);
$db->real_connct("your.server.net", "test", "testpass", "yourdb"); 
```

或者使用旧的（不推荐使用的）mysql API 这个cn可以这样完成：

```
$link = mysql_connect("your.server.net", "test", "testpass", false, MYSQL_CLIENT_SSL) 
if(!$link) {
    die (mysql_error()));
} 
```

笔记：

> 注意，PHP 5.3.3 之前的 MySQL Native Driver 不支持 SSL，所以在使用 MySQL Native Driver 时调用该函数会报错。从 PHP 版本 5.3 开始，默认情况下在 Microsoft Windows 上启用 MySQL Native Driver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:53:26.347

取决于您尝试连接到 mysql 的方法

```
$db = mysql_connect('your.server','username','pass',false,MYSQL_CLIENT_SSL); 
```

但是从 5.5 开始，不推荐使用 mysql_connect [旧连接器正在消失]

```
$db = mysqli::init();
$db->set_ssl($key,$cert,$ca,$capath,$cipher);
$db->real_connect($host,$username,$passwd,$dbname); 
```

# sql - SQL - 聚合函数 - GROUP BY 子句

> ID：13960671
> 
> 赞同：4
> 
> 时间：2012-12-19T20:32:29.170
> 
> 标签：sql, sql-server

我有以下查询：

```
select vkbr.vkID, vkbr.bid, vkbr.Date, vkbr.agID 
FROM camp c (NOLOCK)
JOIN ag (NOLOCK) ON ag.campID = c.id
JOIN vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
where c.id = 648322
order by vkbr.vkID; 
```

结果如下：

```
vkID        bid     Date                    agID
1072845175  NULL    2012-12-04 20:20:12.390 16074852
1072845177  0.74    2012-12-01 23:36:11.280 16074852
1072845177  0.18    2012-12-02 23:01:26.123 16074852
1072845177  0.72    2012-12-09 23:38:52.503 16074852
1072845177  0.62    2012-12-14 15:26:49.643 16074852
1072845178  2.91    2012-12-08 19:37:00.877 16074852
1072845178  0.73    2012-12-13 17:54:11.240 16074852
1072845178  2.70    2012-12-14 15:26:49.643 16074852 
```

我需要按 vkID 分组，获取 max(Date) 和 max(Date) 的出价以获得此结果：

```
1072845175  NULL    2012-12-04 20:20:12.390 16074852
1072845177  0.62    2012-12-14 15:26:49.643 16074852
1072845178  2.70    2012-12-14 15:26:49.643 16074852

select vkbr.vkID, MAX(vkbr.Date) as Date, MIN(vkbr.agID) as agID
FROM camp c (NOLOCK)
JOIN    ag (NOLOCK) ON ag.campID = c.id
JOIN    vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
where c.id=648322
group by vkbr.vkID
having Max(vkbr.Date) is not null
and Max(Date) <= '2012-12-18'; 
```

由于我无法在 SELECT 语句中添加出价列 - 收到此错误：选择列表中的“出价”列无效，因为它不包含在聚合函数或 GROUP BY 子句中。

所以我尝试用临时表来做到这一点：

```
create table #getBids ( 
vkID bigint not null,
Date datetime null,
agID bigint null);

insert into #getBids (vkID, Date, agID) 
select vkbr.vkID, MAX(vkbr.Date) as Date, MIN(vkbr.agID) as agID
FROM camp c (NOLOCK)
JOIN    ag (NOLOCK) ON ag.campID = c.id
JOIN    vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
where c.id = 648322
group by vkbr.vkID
having Max(vkbr.Date) is not null
and Max(Date) <= '2012-12-18';

Now this gives me the result I want:

select vkbr.vkID, vkbr.bid from vkbr
inner join #getBids on vkbr.Date = #getBids.Date
and vkbr.agID = #getBids.agID
and vkbr.vkID = #getBids.vkID 
```

我想知道是否可以在一个查询中完成相同的结果而无需创建临时表？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:01:11.877

如果您使用的是 SQL Server 2005 或更高版本，您可以使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)函数`MAX(Date)`为每个`vkID`.

我无法使用您的架构对此进行测试，但我认为它会像这样工作：

首先，声明一个公用表表达式 (CTE) 以在查询结果中添加行号

```
with cte as
(    
    select vkbr.vkID, vkbr.bid, vkbr.Date, vkbr.agID, ROW_NUMBER() OVER (PARTITION BY vkbr.vkID ORDER BY vkbr.Date DESC) AS RowNumber
    FROM camp c (NOLOCK)
    JOIN ag (NOLOCK) ON ag.campID = c.id
    JOIN vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
    where c.id = 648322
) 
```

那么，`SELECT`只有在哪里`RowNumber = 1`。这将为您提供每个的最新记录`vkbr.vkID`

```
select vkID, bid, Date, agID
from cte
where RowNumber = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:24:09.927

询问：

```
SELECT vkbr.vkID,
       vkbr.bid,
       vkbr.Date,
       vkbr.agID
FROM camp c (NOLOCK)
JOIN ag (NOLOCK) ON ag.campID = c.id
JOIN vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
WHERE c.id = 648322
AND vkbr.Date = (SELECT MAX(v.Date)
                 FROM vkbr v2
                 WHERE v2.vkID = vkbr.vkID
                 AND v2.agID = vkbr.agID)
ORDER BY vkbr.vkID 
```

示例查询：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/5a18f/2)**

```
SELECT t1.*
FROM Table1 t1
WHERE t1.Date = (SELECT MAX(t2.Date)
                 FROM Table1 t2
                 WHERE t1.vkID = t2.vkID
                 AND t1.agID = t2.agID) 
```

结果：

```
|       VKID |    BID |                            DATE |     AGID |
--------------------------------------------------------------------
| 1072845178 |   2.70 | December, 14 2012 15:26:49+0000 | 16074852 |
| 1072845177 |   0.62 | December, 14 2012 15:26:49+0000 | 16074852 |
| 1072845175 | (null) | December, 04 2012 20:20:12+0000 | 16074852 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:55:38.500

您可以通过一个查询来完成此操作。首先，查询必须通过 vkID 收集最大日期。接下来，它必须使用日期重新加入 vkbr 以获得实际出价。您可以使用[sub-query](http://msdn.microsoft.com/en-us/library/ms189575%28v=SQL.105%29.aspx)，即类似这样的东西：

```
select vkID, bid, Date, agID
from
(
    select vkbr.vkID, MAX(vkbr.Date) as Date, MIN(vkbr.agID) as agID
    from camp c with (nolock)
    inner join ag with (nolock)
        on ag.campID = c.id
    inner join vkbr with (nolock)
        on vkbr.agID = ag.id
    where c.id = 648322
    group by vkbr.vkID
    having Max(vkbr.Date) is not null
    and Max(vkbr.Date) <= '2012-12-18';
) MaxDate
    inner join vkbr with (nolock)
        on vkbr.agID = MaxDate.agID
        and vkbr.Date = MaxDate.Date 
```

我建议使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)(CTE) 而不是子查询。CTE 方法看起来像这样：

```
;with MaxDate (vkID, Date, agID) as
(
    select vkbr.vkID, MAX(vkbr.Date) as Date, MIN(vkbr.agID) as agID
    from ...
)
select ...
from MaxDate
inner join vkbr
    on vkbr.agID = MaxDate.agID
    and vkbr.Date = MaxDate.Date 
```

# android - Android：inflate() 忽略使用样式表中定义的根布局宽度/高度。二进制 XML 错误

> ID：13960673
> 
> 赞同：2
> 
> 时间：2012-12-19T20:32:35.300
> 
> 标签：android, android-layout, android-styles

我正在做一个项目，我正在将 GUI 转换为样式表。我使用布局，然后使用一组横向/纵向样式表。我使用充气机来充气布局，因为我正在动态添加和删除内容，并且视图本身是由我的代码插入的应用程序动态创建和销毁的。

```
myView = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.bearing_layout, parentView, false); 
```

错误：Java.Lang.RuntimeException：二进制 XML 文件，第 2 行：您必须提供 layout_width 属性。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/bearing_overall_layout">
    <LinearLayout 
        style = "@style/bearing_header_layout">
        <TextView android:id="@+id/header" 
            style = "@style/bearing_header"
            android:background="@drawable/transparentbackground"
            android:text="@string/bearing_title" />
    </LinearLayout>
    <RelativeLayout style="@style/BearingSelectListContainer"
        android:id="@+id/top_view">
        <LinearLayout 
            style="@style/BearingSelectList_linear_layout">
            <TextView style="@style/BearingSelectListTitle" 
                android:id="@+id/title"
                android:text="@string/bearing_title" />
            <ScrollView android:id="@+id/listScroller"
                style="@style/bearing_list_scroller">
                <LinearLayout
                    style="@style/bearing_scroll_list_linear_layout" >
                    <LinearLayout android:id="@+id/pointList"
                        style="@style/bearing_point_list">
                    </LinearLayout>
                </LinearLayout>
            </ScrollView>
        <LinearLayout 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_gravity="center_horizontal">
                <Button style="@style/BearingSelectListButton" android:id="@+id/view" android:text="@string/view_button" />
                <Button style="@style/BearingSelectListButton" android:id="@+id/my_loc" android:text="@string/my_loc_button" />
                <Button style="@style/BearingSelectListButton" android:id="@+id/center" android:text="@string/center_button" />
                <Button style="@style/BearingSelectListButton" android:id="@+id/exit" android:text="@string/exit_button" />
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

和样式表：

```
<resources>
<style name="bearing_overall_layout">
    <item name="android:orientation">vertical</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">300dp</item>
</style>
<style name = "bearing_header_layout">
    <item name ="android:orientation">horizontal</item>
    <item name ="android:layout_width">fill_parent</item>
    <item name ="android:layout_height">wrap_content</item>
    <item name ="android:layout_alignParentTop">true</item>
    <item name ="android:gravity">center</item>
</style>
<style name="bearing_header">
    <item name = "android:padding">10dp</item>
    <item name = "android:textSize">18sp</item>
    <item name = "android:textStyle">bold</item>
    <item name = "android:layout_width">wrap_content</item>
    <item name = "android:layout_height">wrap_content</item>
    <item name = "android:layout_alignParentTop">true</item>
    <item name = "android:gravity">center</item>
</style>
<style name="GotoMgrsInput">
    <item name="android:textSize">18dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">300dp</item>
    <item name="android:background">#ff000000</item>
</style>
    <style name="BearingSelectMgrsInput">
    <item name="android:textSize">16sp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_weight">1</item>
    <item name="android:typeface">monospace</item>
</style>
<style name="bearing_list_scroller">
    <item name="android:layout_width">fill_parent</item> 
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">1</item>
    <item name="android:gravity">center</item>

</style>
<style name = "bearing_scroll_list_linear_layout">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:orientation">vertical</item>
    <item name="android:layout_marginBottom">10dp</item>
    <item name="android:gravity">center</item>  
</style>
<style name = "bearing_point_list">
    <item name="android:layout_width">fill_parent</item> 
    <item name="android:layout_height">fill_parent</item>
    <item name="android:layout_marginRight">1dip</item>
    <item name="android:orientation">vertical</item>
    <item name="android:gravity">center</item>
</style>

<style name="bearing_BearingSelectListContainer">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:background">#a000</item>
    <item name="android:layout_alignParentLeft">true</item>
    <item name="android:id">@+id/top_view</item>
    <item name="android:gravity">center</item>
    <item name="android:layout_alignParentLeft">false</item>
</style>
<style name="BearingSelectList_linear_layout">
    <item name="android:orientation">vertical</item>
    <item name="android:layout_height">fill_parent</item> 
    <item name="android:layout_width">fill_parent</item>

</style>
<style name="BearingSelectListTitle">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_gravity">center</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">24sp</item>
</style>    
<style name="bearing_BearingSelectListButton">
    <item name="android:layout_width">80dp</item>
    <item name="android:layout_height">wrap_content</item>
</style>
<style name="bearing_text_label">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_gravity">center</item> 
    <item name="android:shadowColor">#ff000000</item> 
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item> 
    <item name="android:shadowRadius">1</item> 
    <item name="android:textStyle">bold</item>
    <item name="android:clickable">false</item> 
    <item name="android:longClickable">false</item>
</style>
<style name="bearing_item_inner_layout">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:gravity">center</item>
</style>
<style name="bearing_specific_view_layout">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:orientation">horizontal</item>
    <item name="android:layout_alignParentLeft">true</item>
</style> 
```

现在，如果我在基本布局中硬定义 android:width 和 android:height ，其他一切都会完美运行。这是不可接受的，因为我需要不同的布局值和纵向值，以及不同版本的手机。

下一个选项是将 inflate 的 rootView 设置为 null，这确实使布局参数正确（有点...），但是当我尝试访问返回的视图的内部元素时，这会导致空指针。

在我看来，膨胀只是忽略了膨胀视图的样式元素，从这个问题来看：

[为什么 LayoutInflater 会忽略我指定的 layout_width 和 layout_height 布局参数？](https://stackoverflow.com/questions/5026926/making-sense-of-layoutinflater)

我明白了原因，但是在这种情况下，这对我没有任何好处，因为我尝试了建议的方法（见上文），并且在使用样式表时仍然出现此错误。

我没有尝试过的唯一选择是将值硬编码到布局中，然后以编程方式检测屏幕的方向并相应地更改布局参数，但这同样需要针对各种手机版本进行，而且似乎破坏样式表的全部目的。

有人有想法么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-15T08:45:53.020

我在搜索为什么我的 TextView 没有正确膨胀 xml 参数时遇到了这个问题。与作者的解决方案不同，我必须使用添加 TextView 的父 LinearLayout 的名称。

```
TextView myTextView = (TextView) myInflater.inflate(R.layout.my_textview_xml, myLinearLayout, false); 
```

该视频有助于解决问题：

[http://www.youtube.com/watch?v=1Y0LlmTCOkM](http://www.youtube.com/watch?v=1Y0LlmTCOkM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:03:38.807

行，

所以我没有得到任何回应，这是我的工作：

改变这个：

```
myView = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.bearing_layout, parentView, false); 
```

对此：

```
myView = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.bearing_layout, null, false); 
```

这将在第一次正确加载您的资源。注意：这将不会检测您的最低级别视图的布局更改方向更改，尽管所有后续视图都应该可以正常工作。为了解决这个问题，我们添加了一个辅助函数：

```
genLayoutParams(yourView);

private void genLayoutParams(View reuse) { // apply whatever layout parameters you see fit, these are just examples.
    if (activity.getResources().getConfiguration().orientation == activity.getResources().getConfiguration().ORIENTATION_LANDSCAPE) {
        reuse.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.FILL_PARENT));

    }
    else {
        if (android.os.Build.VERSION.SDK_INT >= 13) {
            reuse.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                    250));
        }

        else{
            reuse.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                    300));
        }
    }
} 
```

希望这可以节省一些挫败感。

# python - 最佳实践：python中的动态方法执行

> ID：13960675
> 
> 赞同：3
> 
> 时间：2012-12-19T20:32:38.237
> 
> 标签：python

经过多年的 Java、C、c++ 等，我刚刚开始使用 python。我有一长串文件/模块，每个文件/模块都包含一个我想动态调用的主要方法。对于每个关键字，我都有一个名为 get_foo 的 .py 文件，在每个 get_foo.py 中，都有一个 foo 方法。所以我想传入命令名“foo”并执行get_foo.foo()方法

我真的不想用丑陋的 if/then/else 块来做这件事

```
sections = [ "abstract",  "claim",  "drawing", "examiner"]
command = "claim" 
```

我想要什么

```
exec("get_" + command + "." + command) 
```

但我真的不知道 exec/eval/etc 的哪些区域会这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:39:09.753

使用[`importlib`模块](http://docs.python.org/2/library/importlib.html)动态导入，并`getattr()`找到你的功能：

```
import importlib

def call_command(cmd):
    mod = importlib.import_module('get_' + cmd)
    func = getattr(mod, cmd)
    return func() 
```

Or, simply import all your modules and add them to a dict to map command to callable:

```
import get_foo, get_bar, get_baz

commands = dict(foo=get_foo.foo, bar=get_bar.bar, baz=get_baz.baz)

def call_command(cmd):
    return commands[cmd]() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T20:35:46.610

解决方案 1

```
from get_foo1 import foo1 # get_foo1.py in directory
from get_foo2 import foo2 # get_foo2.py in directory
foo1()
foo2() 
```

也可以通过其他方式完成

```
import get_foo1
import get_foo2

get_foo1.foo1()
get_foo2_foo2() 
```

动态地称呼他们你也有很多方法

```
commands = {"foo1":foo1, "foo2":foo2} 
# notice foo1 and foo2 have no "()" because we're referencing function and not calling it

#and then call them

commands["foo1"]()   # notice (), this means we're calling function now 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T20:41:31.987

You can have a function which calls a function from a module:

```
def call_function(func):
    module = __import__("get_" + func)
    return getattr(module, func)() 
```

Then call this function like this:

```
call_function("claim") 
```

# ruby - 如何同时使用 splat 和可选哈希在 ruby 中定义方法？

> ID：13960678
> 
> 赞同：10
> 
> 时间：2012-12-19T20:32:59.300
> 
> 标签：ruby, hash, methods, arguments, splat

我能够定义这样的方法：

```
def test(id, *ary, hash_params)
  # Do stuff here
end 
```

但这使得`hash_params`论证是强制性的。这些也不起作用：

```
def t(id, *ary, hash_params=nil)  # SyntaxError: unexpected '=', expecting ')'
def t(id, *ary, hash_params={})   # SyntaxError: unexpected '=', expecting ')' 
```

有没有办法让它成为可选的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T08:10:27.793

ActiveSupport 中通过使用数组扩展对此提供了支持`extract_options!`。

```
def test(*args)
  opts = args.extract_options!
end 
```

如果最后一个元素是散列，那么它将从数组中弹出并返回，否则将返回一个空散列，这在技术上与您想要`(*args, opts={})`做的相同。

[ActiveSupport 数组#extract_options！](https://github.com/rails/rails/blob/v3.2.12/activesupport/lib/active_support/core_ext/array/extract_options.rb)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-19T21:00:02.803

你不能那样做。您必须考虑 Ruby 如何能够确定什么属于 `*ary`可选散列以及什么属于可选散列。由于 Ruby 无法读懂您的想法，因此上述参数组合（splat + 可选）无法从逻辑上解决。

你要么必须重新排列你的论点：

```
def test(id, h, *a) 
```

在这种情况下`h`将不是可选的。或者然后手动编程：

```
def test(id, *a)
  h = a.last.is_a?(Hash) ? a.pop : nil
  # ^^ Or whatever rule you see as appropriate to determine if h
  # should be assigned a value or not. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T21:09:42.450

除了[caspers 回答](https://stackoverflow.com/a/13961106/676874)：

您可以使用 splash 参数并检查最后一个参数是否是散列。然后你把散列作为设置。

代码示例：

```
def test(id, *ary )
  if ary.last.is_a?(Hash)
    hash_params =   ary.pop
  else
    hash_params =   {}
  end
  # Do stuff here

  puts "#{id}:\t#{ary.inspect}\t#{hash_params.inspect}"
end

test(1, :a, :b )
test(2, :a, :b, :p1 => 1, :p2 => 2 )
test(3, :a,  :p1 => 1, :p2 => 2 ) 
```

结果是：

```
1:  [:a, :b]    {}
2:  [:a, :b]    {:p1=>1, :p2=>2}
3:  [:a]    {:p1=>1, :p2=>2} 
```

如果您的数组参数应在最后一个位置包含哈希，这将产生问题。

```
test(5, :a,  {:p1 => 1, :p2 => 2} )
test(6, :a,  {:p1 => 1, :p2 => 2}, {} ) 
```

结果：

```
5:  [:a]    {:p1=>1, :p2=>2}
6:  [:a, {:p1=>1, :p2=>2}]  {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T22:22:52.743

您可以（错误地）使用参数列表末尾的可选块：

```
def test(id,*ary, &block)
  if block_given?
    opt_hash = block.call
    p opt_hash
  end
  p id
  p ary
end

test(1,2,3){{:a=>1,:b=>2}}
# output:
# {:a=>1, :b=>2} #Hurray!
# 1
# [2, 3] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T21:05:24.027

@Casper 是对的。只有一个参数可以有 splat 运算符。参数首先从左到右分配给非喷溅参数。剩余的参数被分配给 splat 参数。

你可以按照他的建议去做。你也可以这样做：

```
def test(id,h={},*a)
  # do something with id
  # if not h.empty? then do something with h end
  # if not a.empty? then do something with a end
end 
```

以下是一些示例 irb 运行：

```
001 > def test (id, h={}, *a)
002?>   puts id.inspect
003?>   puts h.inspect
004?>   puts a.inspect
005?>   end
 => nil 
006 > test(1,2,3,4)
1
2
[3, 4]
 => nil 
007 > test(1,{"a"=>1,"b"=>2},3,4)
1
{"a"=>1, "b"=>2}
[3, 4]
 => nil 
008 > test(1,nil,3,4)
1
nil
[3, 4]
 => nil 
```

也许，我应该补充一下。你可以有一个可选参数作为最后一个参数，但它必须是一个块/过程。

例如：

```
def test(a,*b, &c)
  puts a.inspect
  puts b.inspect
  c.call if not c.nil?
end 
```

以下是一些示例调用：

```
006 > test(1,2,3)
1
[2, 3]
 => nil 
007 > test(1,2,3) {puts "hello"}
1
[2, 3]
hello
 => nil 
```

# jquery - 在 iOS 上的 Safari 和 Chrome 中只允许数字和冒号

> ID：13960679
> 
> 赞同：1
> 
> 时间：2012-12-19T20:33:06.310
> 
> 标签：jquery, ios, webkit, onkeyup, mobile-webkit

我正在使用以下代码来防止某些字符被输入到文本框中。除了 iPad 和 iPhone 上的 Chrome 和 Safari（webkit 移动设备？）外，它运行良好。在 Safari 和 Chrome 中的 Mac 上运行良好。任何想法如何限制这些设备的数字和冒号？

```
jQuery.fn.forceNumeric = function (allowDecimal, allowColon)
{
    return this.each(function ()
    {
        $(this).keydown(function (e)
        {
            var key = e.which || e.keyCode;

            if (!e.shiftKey && !e.altKey && !e.ctrlKey &&
            // numbers   
                    key >= 48 && key <= 57 ||
            // Numeric keypad
                    key >= 96 && key <= 105 ||
            // period, comma, minus adn period on keypad
            //      key == 190 ||   // period
            //      key == 188 ||   // comma
            //      key == 109 ||   // minus
            //      key == 110 ||   // period on keypad
            // Backspace and Tab and Enter
                    key == 8 || key == 9 || key == 13 ||
            // Home and End
                    key == 35 || key == 36 ||
            // left and right arrows
                    key == 37 || key == 39 ||
            // Del and Ins
                    key == 46 || key == 45)
                return true;
            else if (!e.shiftKey && !e.altKey && !e.ctrlKey && allowDecimal && key == 190) // period
                return true;
            else if (!e.shiftKey && !e.altKey && !e.ctrlKey && allowDecimal && key == 110) // period on keypad
                return true;
            else if (e.shiftKey && (key == 186 || key == 59) && allowColon) // colon (ie & chrome = 186, ff = 59)
                return true;
            else
                return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:46:04.750

我们使用类似的逻辑（keyCode 48-75 和 96-105）并且它有效。我没有测试您的示例代码，但是您的第一个大量使用且没有括号`if`的语句让我有点担心。也许尝试放入一些括号组并再试一次？`&&``||`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:50:47.670

这就是我最终做的事情 - 检测 iOS 设备并将 else 添加到原始脚本中。可能有更好的方法...

```
function isiPhone(){
    return (
        //Detect iPhone
        (navigator.platform.indexOf("iPhone") != -1) ||
        //Detect iPod
        (navigator.platform.indexOf("iPod") != -1)
    );
}

var isiPad = navigator.userAgent.match(/iPad/i) != null;

...
else if ((isiPhone() || isiPad) && (key == 186 || key == 59) && allowColon) // colon   (iOS devices don't have a shift key)
                return true; 
```

# xunit - 具有“弱”类型的 AutoFixture

> ID：13960681
> 
> 赞同：5
> 
> 时间：2012-12-19T20:33:13.957
> 
> 标签：xunit, autofixture

我喜欢[AutoFixture](https://github.com/AutoFixture)，但遇到了一些非常重复的“排列”代码，我觉得它应该能够处理 - 不知何故。

这是我的场景，使用[Castle Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)`IInterceptor`的实现进行说明。

首先是被测系统：

```
public class InterceptorA : IInterceptor
{
    public void Intercept(IInvocation context)
    {
        object proxy = context.Proxy;
        object returnValue = context.ReturnValue;
        // Do something with proxy and returnValue
    }
}

public class InterceptorB : IInterceptor
{
    public void Intercept(IInvocation context)
    {
        object returnValue = context.ReturnValue;
        // Do something with different returnValue
    }
} 
```

现在进行一些利用[xUnit](http://xunit.codeplex.com/)数据理论支持的简单测试：

```
public class InterceptorATests
{
    [Theory, CustomAutoData]
    public void TestA1(InterceptorA sut, IInvocation context)
    {
        Mock.Get(context).Setup(c => c.Proxy).Returns("a");
        Mock.Get(context).Setup(c => c.ReturnValue).Returns("b");

        sut.Intercept(context);
        // assert
    }
}

public class InterceptorBTests
{
    [Theory, CustomAutoData]
    public void TestB1(InterceptorB sut, IInvocation context)
    {
        Mock.Get(context).Setup(c => c.ReturnValue).Returns("z");
        sut.Intercept(context);
        // assert
    }
} 
```

实际上，我的`CustomAutoData`属性确实自定义了 AutoFixture 以便注入的实例`IInvocation`大部分*配置*正确，但是由于每个`IInterceptor`实现都期望`Proxy`和`ReturnValue`属性的类型完全不同，因此每个测试都必须自己设置它们。（因此`Mock.Get(context).Setup(...)`调用。）

这没关系，除了每个测试`InterceptorATests`必须重复相同的几行排列，以及`InterceptorBTests`.

有没有办法干净地删除重复`Mock.Get(...)`调用？有没有一种好方法可以访问`IFixture`给定测试类的实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T22:46:38.107

你可以做很多事情——这取决于你真正想要测试的是*什么。*

首先，我想指出，这个特定问题的大部分问题都源于 IInvocation 的类型极弱的 API，以及 Moq 没有像我们通常实现属性那样实现属性这一事实。

**如果您不需要存根，请不要设置它们**

首先，如果您不需要它们，则不必为 Proxy 和 ReturnValue 属性设置返回值*。*

AutoFixture.AutoMoq 设置`Mock<T>`实例的方式是它总是设置`DefaultValue = DefaultValue.Mock`. 由于这两个属性的返回类型都是`object`并且`object`具有默认构造函数，因此您将自动获取一个对象（实际上是一个`ObjectProxy`）。

换句话说，这些测试也通过了：

```
[Theory, CustomAutoData]
public void TestA2(InterceptorA sut, IInvocation context)
{
    sut.Intercept(context);
    // assert
}

[Theory, CustomAutoData]
public void TestB2(InterceptorB sut, IInvocation context)
{
    sut.Intercept(context);
    // assert
} 
```

**直接赋值 ReturnValue**

对于我的其余答案，我将假设您实际上需要在测试中分配和/或读取属性值。

首先，您可以通过直接分配 ReturnValue 来减少繁重的 Moq 语法：

```
[Theory, Custom3AutoData]
public void TestA3(InterceptorA sut, IInvocation context)
{
    context.ReturnValue = "b";

    sut.Intercept(context);
    // assert
    Assert.Equal("b", context.ReturnValue);
}

[Theory, Custom3AutoData]
public void TestB3(InterceptorB sut, IInvocation context)
{
    context.ReturnValue = "z";

    sut.Intercept(context);
    // assert
    Assert.Equal("z", context.ReturnValue);
} 
```

但是，它仅适用于`ReturnValue`因为它是可写属性。它不适用于该`Proxy`属性，因为它是只读的（它不会编译）。

为了完成这项工作，您必须指示 Moq 将`IInvocation`属性视为“真实”属性：

```
public class Customization3 : CompositeCustomization
{
    public Customization3()
        : base(
            new RealPropertiesOnInvocation(),
            new AutoMoqCustomization())
    {
    }

    private class RealPropertiesOnInvocation : ICustomization
    {
        public void Customize(IFixture fixture)
        {
            fixture.Register<Mock<IInvocation>>(() =>
                {
                    var td = new Mock<IInvocation>();
                    td.DefaultValue = DefaultValue.Mock;
                    td.SetupAllProperties();
                    return td;
                });
        }
    }
} 
```

注意对 的调用`SetupAllProperties`。

这是因为 AutoFixture.AutoMoq 的工作原理是将所有接口请求中继到该接口的 Mock 请求 - 即，请求`IInvocation`转换为请求`Mock<IInvocation>`。

**不要设置测试值；读回来**

最后，您应该问自己：我真的需要为这些属性分配特定的值（例如“a”、“b”和“z”）吗？我不能让 AutoFixture 创建所需的值吗？如果我这样做，我是否需要明确分配它们？我不能只读回分配的值吗？

这可能是我称之为*Signal Types*的一个小技巧。信号类型是一个表示值的特定*角色*的类。

为每个属性引入一个信号类型：

```
public class InvocationReturnValue
{
    private readonly object value;

    public InvocationReturnValue(object value)
    {
        this.value = value;
    }

    public object Value
    {
        get { return this.value; }
    }
}

public class InvocationProxy
{
    private readonly object value;

    public InvocationProxy(object value)
    {
        this.value = value;
    }

    public object Value
    {
        get { return this.value; }
    }
} 
```

（如果您要求值始终是字符串，您可以将构造函数签名更改为需要 a`string`而不是`object`.）

冻结您关心的信号类型，以便您知道在配置 IInvocation 实例时将重用相同的实例：

```
[Theory, Custom4AutoData]
public void TestA4(
    InterceptorA sut,
    [Frozen]InvocationProxy proxy,
    [Frozen]InvocationReturnValue returnValue,
    IInvocation context)
{
    sut.Intercept(context);
    // assert
    Assert.Equal(proxy.Value, context.Proxy);
    Assert.Equal(returnValue.Value, context.ReturnValue);
}

[Theory, Custom4AutoData]
public void TestB4(
    InterceptorB sut,
    [Frozen]InvocationReturnValue returnValue,
    IInvocation context)
{
    sut.Intercept(context);
    // assert
    Assert.Equal(returnValue.Value, context.ReturnValue);
} 
```

这种方法的美妙之处在于，在那些你不关心的测试用例中，`ReturnValue`或者`Proxy`你可以忽略那些方法参数。

对应的定制是对前面的扩展：

```
public class Customization4 : CompositeCustomization
{
    public Customization4()
        : base(
            new RelayedPropertiesOnInvocation(),
            new AutoMoqCustomization())
    {
    }

    private class RelayedPropertiesOnInvocation : ICustomization
    {
        public void Customize(IFixture fixture)
        {
            fixture.Register<Mock<IInvocation>>(() =>
                {
                    var td = new Mock<IInvocation>();
                    td.DefaultValue = DefaultValue.Mock;
                    td.SetupAllProperties();

                    td.Object.ReturnValue = 
                        fixture.CreateAnonymous<InvocationReturnValue>().Value;
                    td.Setup(i => i.Proxy).Returns(
                        fixture.CreateAnonymous<InvocationProxy>().Value);

                    return td;
                });
        }
    }
} 
```

请注意，每个属性的值是通过要求 IFixture 实例创建相应信号类型的新实例然后解包其值来分配的。

这种方法可以概括，但这就是它的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:37:54.610

我最终降低了 xUnit 的可扩展性点来解决这个问题 - 灵感来自 Mark 的回答中提到的 Signal Type 模式。

现在我的测试有一个附加属性：`Signal`.

```
public class InterceptorATests
{
    [Theory, CustomAutoData]
    public void TestA1(InterceptorA sut, [Signal(typeof(SpecialContext))] IInvocation context)
    {
        // no more repetitive arrangement!
        sut.Intercept(context);
        // assert
    }
} 
```

`SignalAttribute`课程非常简单：

```
[AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false)]
public class SignalAttribute : Attribute
{
    public ISignalType SignalType { get; set; }

    public SignalAttribute(Type customization)
    {
        SignalType = (ISignalType)Activator.CreateInstance(customization);
    }
} 
```

真正的魔法来自我新更新的`CustomAutoData`课程：

```
public class CustomAutoDataAttribute: AutoDataAttribute
{
    public CustomAutoDataAttribute() : base(new Fixture().Customize(new AutoMoqCustomization()))
    {
    }

    public override IEnumerable<object[]> GetData(MethodInfo methodUnderTest, Type[] parameterTypes)
    {
        Type input = null;
        ISignalType signalType = null;

        foreach (var parameter in methodUnderTest.GetParameters())
        {
            var attribute = parameter.GetCustomAttribute(typeof(SignalAttribute)) as SignalAttribute;

            if (attribute == null)
                continue;

            input = parameter.ParameterType;
            signalType = attribute.SignalType;

            break;
            // this proof of concept only supports one parameter at a time
        }

        var result = base.GetData(methodUnderTest, parameterTypes);

        if (input == null)
            return result;

        int index = Array.IndexOf(parameterTypes, input);

        foreach (var objectSet in result)
        {
            signalType.Customize(objectSet[index]);
        }

        return result;
    }
} 
```

最后，我只是创建了我的`SpecialContext`. 我将它创建为 中的嵌套类`InterceptorATests`，但它可以存在于任何地方：

```
public class SpecialContext : ISignalType
{
    public void Customize(object obj)
    {
        var input = (IInvocation)obj;
        Mock.Get(input).Setup(i => i.Proxy).Returns("a");
        Mock.Get(input).Setup(i => i.ReturnValue).Returns("b");
    }
} 
```

这使我可以在 AutoFixture 完成*大部分*工作后有效地加入`IInvocation`，但在一个地方指定进一步的自定义。

注意：这是概念验证代码！它不能正确处理许多场景。使用风险自负。

# ruby - 有没有办法把这个 Ruby MD5 翻译成 jQuery

> ID：13960688
> 
> 赞同：1
> 
> 时间：2012-12-19T20:33:34.127
> 
> 标签：ruby, ruby-on-rails-3, jquery, md5

我试图弄清楚是否可以将以下密码和质询的 MD5 转换从我的 Rails 应用程序中的方法转换为 jQuery。到目前为止，我在每一个障碍上都失败了。

基本上，我正在尝试从表单中获取用户名/密码/质询并将其提交到外部 url。

它适用于我们的 Rails 应用程序，但我们需要通过 ajax / jquery 发布。

```
 def my_method
    hex_chal = Array[params['challenge']].pack('H32')
    newchal = Array[Digest::MD5.hexdigest(hex_chal + secret)].pack('H*')
    response = Digest::MD5.hexdigest("\0" + params['password'] + newchal)
    new_pwd = Array[params['password']].pack('a32') 
 end 
```

使用 jquery md5 库，我尝试过这样的事情：

```
function Test() {
  ...
  var hex_chal = $.md5(params('challenge'));
  var new_chal = $.md5(hex_chal + params('password'));
  ...
} 
```

不知道这是否可能。如果不是，我将不得不找到另一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:20:15.760

西蒙，

密码比较通常不会在客户端执行，因为它太容易被击败。因此，通常不需要 MD5 的 javascript 实现。

但是，如果你真的想要一个，我相信你会在网络上的某个地方找到一个 js 实现。这比从另一种语言翻译要容易得多。

**（-： 红菜头 ：-）**

# java - Java面向对象编程对象作用域

> ID：13960690
> 
> 赞同：1
> 
> 时间：2012-12-19T20:33:35.460
> 
> 标签：java, oop, scope

好的，到目前为止我对java了解很多。数据库、URL、SQL 等。但到目前为止，我和我的书只涉及单类程序。我想知道关于 OOP 的一些事情。

如果我有一个定义示例对象的类，并且每个示例对象都有它自己的数组。

前任。

```
public class Example {
Array exampleArray;
} 
```

这是否意味着每个 'example' 对象都有自己独特的 'exampleArray' Array 对象，可以通过 "insert objectname here".exampleArray 引用？

前任。

```
Example dataBase = new Example();
int length = dataBase.exampleArray.length(); 
```

这行得通吗？

抱歉，由于某种原因，换行符不适用于我的示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:37:18.740

是的，每个`Example`对象都有自己独特的`exampleArray`数组对象。通常，您会将其`private`设为成员变量并通过方法访问它，而不是允许客户端直接访问该数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:41:05.490

这有点跑题了，但我觉得值得一提。如果您打算制作 Object 的副本，则需要小心制作[deep copy](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)。这样做将导致每个都像正常实例化一样行事。如果您不这样做，他们将“共享”该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:35:27.790

生成的每个对象都有自己的一组属性。所以下面的代码产生了两个唯一的对象：

```
Example first = new Example();  
Example second = new Example(); 
```

每个对象都有独特的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:35:37.470

在这个特定的例子中，你会得到一个`NullPointerException`，因为你从来没有在你的类中为 exampleArray**赋值过。**但总的来说，是的，每个*实例*都有`Example`自己独特的数组。

# python - 从头开始写文件

> ID：13960693
> 
> 赞同：2
> 
> 时间：2012-12-19T20:33:38.597
> 
> 标签：python, python-2.x

我正在编写我的第一个服务器脚本以查找和删除恶意软件 js 代码，但我找不到从头开始重写现有文件的简单方法，而不是在最后。

```
# -*- coding: utf-8 -*-

import os
import re
import codecs

for dirname, dirnames, filenames in os.walk('.'):
    for filename in filenames:
        f = open(os.path.join(dirname, filename), 'r+b')
        text=f.read()
        if re.search('function g\(\).*\n.*\<script src=\"http://linkfooter.org/linkfooter.js\"></script>\'\);}', text) and os.path.join(filename) != "bezr.py":
            print "starting with " + os.path.join(filename)
            match = re.compile('function g\(\).*\n.*\<script src=\"http://linkfooter.org/linkfooter.js\"></script>\'\);}')
            s = match.sub('', text)
            f.write(s)
        f.close()
        #else:
            #print "in " + os.path.join(dirname, filename) + " none"    
            #f.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:35:03.580

`f.seek(0)`在你写之前。`f.truncate()`之后切断任何额外的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:44:37.717

```
filepath = os.path.join(dirname, filename)
text = file.read(filepath)
if re.search('function g\(\).*\n.*\<script src=\"http://linkfooter.org/linkfooter.js\"></script>\'\);}', line) and os.path.join(filename) != "bezr.py":
    with open(filepath, 'w') as f:
            print "starting with " + os.path.join(filename)
            match = re.compile('function g\(\).*\n.*\<script src=\"http://linkfooter.org/linkfooter.js\"></script>\'\);}')
            s = match.sub('', text)
            f.write(s) 
```

# html - CSS：根据当前颜色更改字体颜色

> ID：13960695
> 
> 赞同：7
> 
> 时间：2012-12-19T20:33:41.893
> 
> 标签：html, css, text, colors

我正在尝试找到允许我根据文本的当前颜色更改文本颜色的 css。

这是我要更改的 HTML（*不是 HTML5 ）：*

```
 <a href="link"><font color="green">2</font></a>
    <a href="link"><font color="red">3</font></a>
    <a href="link"><font color="red">2</font></a>
    <a href="link"><font color="green">3</font></a>
    <a href="link"><font color="red">2</font></a>
    <a href="link"><font color="green">3</font></a> 
```

我想要做的是将红色链接更改为黄色，将绿色链接更改为蓝色。我不能使用 javascript 或更改 HTML 代码。我只允许添加 CSS 来更改样式。有没有办法只使用 CSS 来做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T20:35:39.247

```
a font[color="red"] { color: yellow; }
a font[color="green"] { color: blue; } 
```

[http://jsfiddle.net/3zLfb/](http://jsfiddle.net/3zLfb/)

# windows - cygwin 中的 vim 病原体错误

> ID：13960696
> 
> 赞同：4
> 
> 时间：2012-12-19T20:33:43.647
> 
> 标签：windows, vim, cygwin, pathogen

我最近安装了 cygwin（因为我仅限于 Windows 操作系统）并希望在其中使用 Vim。一切都已安装，我可以轻松访问 vim 并可以修改 .vimrc 等。从之前的帖子中，我了解到我的插件必须在 Windows 操作系统的 vimfiles 中并且已经这样做了。但是，现在当我尝试验证病原体时，我收到一条错误消息：

```
E492: Not an editor command: ^M (this repeats a couple times)
E15: Invalid expression: exists("g:loaded_pathogen") || &cp^M
E117: Unknown function: pathogen#infect 
```

我的 .virmc （同样非常基本，只是试图启动一切）

```
version 6.0
if &cp | set nocp | endif
let s:cpo_save=$cpo
enter code here
set cpo&vim
map! <C-Home> <C-Home>
map! <C-End> <C-End>
let &cpo=s:cpo_save
unlet s:cpo_save
set autoindent
set ff=unix
set background=dark
set backspace=2
set fileencodings=ucs-bom,utf-8,default,latin1
set helplang=en
set history=50
set laststatus=2
set ruler
set shelltemp
set viminfo='100,<50,s10,h
set window=55
" vim: set ft=vim :
call pathogen#infect()
syntax on
filetype plugin indent on 
```

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:03:34.990

从 shell 中，尝试执行以下命令：

```
find ~/.vim -type f -exec dos2unix \"{}\" \; 
```

这会将您`~/.vim`目录下的所有文件转换为 unix 文件格式。它应该消除`^M`您看到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:44:52.197

在您的 .vimrc 文件中，我注意到

```
set ff=unix 
```

但是在 vim 中，下面的命令解释了一些事情，

```
:help dos-file-formats

If the 'fileformat' option is set to "dos" (which is the default), Vim accepts
a single <NL> or a <CR><NL> pair for end-of-line (<EOL>).  When writing a
file, Vim uses <CR><NL>.  Thus, if you edit a file and write it, Vim replaces
<NL> with <CR><NL>.             

If the 'fileformat' option is set to "unix", Vim uses a single <NL> for <EOL>
and shows <CR> as ^M.

You can use Vim to replace <NL> with <CR><NL> by reading in any mode and
writing in Dos mode (":se ff=dos").
You can use Vim to replace <CR><NL> with <NL> by reading in Dos mode and
writing in Unix mode (":se ff=unix").

Vim sets 'fileformat' automatically when 'fileformats' is not empty (which is
the default), so you don't really have to worry about what you are doing. 
```

所以，你应该尝试删除

```
set ff=unix 
```

行，或修复文件的行尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:04:10.460

我只是有同样的问题。上述在捆绑文件上调用“dos2unix”的解决方案（由 nullrevolution 提出）应该可以解决当前插件的问题。

对于未来，我发现我的问题是由于将 git repos 克隆到 bundles 目录并将 git config core.autocrlf 设置为 true 引起的。在我将 git config core.autocrlf 设置回 false 后，我再次 git 克隆了插件，它又回到了 UNIX-y 文件结尾。

# c++ - OpenCv 中的stitcher() 错误

> ID：13960697
> 
> 赞同：2
> 
> 时间：2012-12-19T20:33:47.160
> 
> 标签：c++, visual-studio-2010, opencv, computer-vision, image-stitching

我有这个代码：

```
#include <opencv2\stitching\stitcher.hpp>

int Stitching()
{
Stitcher m_stitcher = m_stitcher.createDefault(false);

vector<Mat> images; 
Mat img1 = imread("0.jpg"); //read image 0
Mat img2 = imread("1.jpg"); //read image 1
Mat Result;

//add images to the array
images.push_back(img1);
images.push_back(img2);

m_stitcher.stitch(images, Result);
imwrite("panorama.jpg",Result);
return 0;
} 
```

构建后我收到此错误：

> 错误 4 错误 C2248: 'cv::Stitcher::Stitcher' : 无法访问在类 'cv::Stitcher' C:\Users\Desktop\Projects\SamplePanorama - PanoramaStitch\SamplePanorama \StitchEngine.cpp 602 中声明的私有成员

我应该添加什么才能使stitch() 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:45:28.170

您的类`Stitcher`似乎没有公共构造函数。如果这是您拥有的类，则需要给它一个公共构造函数，以便能够构造`Stitcher`. 然而，这似乎是一个第三方库，一个快速的谷歌搜索告诉你这个方法的存在[`Stitcher`](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/stitching/include/opencv2/stitching/stitcher.hpp?rev=6769#L64)：

```
static Stitcher createDefault(bool try_use_gpu = false); 
```

为了创建您的实例，`Stitcher`您可能必须执行以下操作：

```
Stitcher m_stitcher = Stitcher::CreateDefault(); 
```

编辑：为了修复链接器错误，您可能需要将正确的 lib 文件添加到链接器的输入列表中。此链接应该可以帮助您进行设置， http: [//opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)

# filtering - 如何从 Google Places API 结果中排除某些类型/类别？

> ID：13960698
> 
> 赞同：4
> 
> 时间：2012-12-19T20:33:51.907
> 
> 标签：filtering, google-places-api

我想在我的结果中排除个别医生的办公室。

大多数医生办公室属于“医生”和“健康”类别。

我确实想展示“健康”类别的地方。

我怎样才能做到这一点？

如果我从 types 参数中删除“医生”，但仍然有“健康”，我仍然会得到所有医生的办公室。

有没有办法专门排除类型“医生”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:25:02.187

如果不从结果中手动过滤它们，目前无法做到这一点。这听起来像是一个很棒的功能请求，请将其作为[Places API -](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request) Google Maps 问题跟踪器上的功能请求提交。

# objective-c - 为什么在创建少于 12 个字符的 NSXMLDocument 时忽略 NSXMLDocumentTidyHTML？

> ID：13960701
> 
> 赞同：1
> 
> 时间：2012-12-19T20:34:07.823
> 
> 标签：objective-c, cocoa, nsxmldocument

我正在使用`NSXMLDocument`选项`NSXMLDocumentTidyHTML`来解析可能“不整洁”的 HTML。它在我测试过的每个场景中都运行良好，除非我传递给`NSXMLDocument`'s的字符串`-initWithXMLString:options:error:`少于 12 个字符。

为了演示这个问题，请考虑以下两行代码中的一个简单示例：

```
NSXMLDocument *document = [[NSXMLDocument alloc] initWithXMLString:@"<p>Hello</p>" options:NSXMLDocumentTidyHTML error:NULL];
NSLog(@"%@", [document XMLStringWithOptions:NSXMLNodePrettyPrint]); 
```

这会将以下内容打印到控制台：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
    </head>
    <body>
        <p>Hello</p>
    </body>
</html> 
```

`<p>Hello</p>`传入的整个字符串是 12 个字符（

但是，从该字符串中删除一个字符（`<p>Helo</p>`例如 ），输出会发生巨大变化，就好像`NSXMLDocumentTidyHTML`没有指定为选项一样：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<p>Helo</p> 
```

我已经用更多不同长度和不同标签的字符串（例如`<tr>123</tr>`vs. `<tr>12</tr>`）对此进行了测试，并且遇到了同样的问题。有没有人对为什么在提供少于 12 个字符的字符串时无法生成我期望的 HTML 有任何建议？

# java - 识别和计算 JSP 中的 Java 代码行数以帮助推动单元测试

> ID：13960707
> 
> 赞同：2
> 
> 时间：2012-12-19T20:34:52.347
> 
> 标签：java, unit-testing, jsp, intellij-idea, code-coverage

我正在尝试为几个不同团队积极工作的大型代码库增加单元测试。大部分代码都是继承的，并且没有一个开始进行单元测试。此外，在 JSP 中发现大块 Java 代码是很常见的。我一直主张开发人员**不要**将 Java 代码放在 JSP 中，而是将其放在 Java 类中，以使单元测试更容易（出于其他原因，这是有道理的）。

虽然我可以通过我们拥有的单元测试获得*Java 类中代码的代码覆盖率数据，但***我无法知道 JSP 中存在多少 Java 代码**（现有单元测试的代码覆盖率为零）。我们正在使用最新版本的 Intellij，尽管我认为解决方案不一定需要受此限制。

我想知道 Java 代码的总行数——包括在 JSP 中找到的那些行——所以我可以获得 Java 代码的全面代码覆盖率，无论是在 JSP 中还是在 Java 类中。有一些东西可以跟踪将帮助我宣传单元测试。

**是否有一种自动方法来获取 Java 代码的总行数，无论它存在于 JSP 中还是 Java 类中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:19:42.727

我不知道有一种自动化方法，如果有一种方法，我会感到惊讶。

*   没有人打算测试 scriptlet 的代码覆盖率，因为就像您提到的那样，scriptlet 是可怕的可憎之物。
*   现在还没有编写 Scriptlet，因此不太可能有适合该要求的工具（开源/商业）。

我能想到的一些方法

*   编写一个 HTML 解析器来删除 scriptlet。这可能会变得很困难，因为我怀疑它们`<%= //code =>`会被转换成它们的文本形式。它们不是有效的标签，但您仍然可以从一些解析中受益。
*   使用 Jasper 或等效框架编译 JSP，并使用它们的 API 方法获取有关 JSP 页面的 scriptlet 信息。（我承认寻找可以揭示这些数据的 API 方法/成员变量并非易事。）
*   编写您自己的解析器，它将扫描文件中的`<%=`字符并开始计算遇到的每个 /n 和 /r/n 字符的代码行数，直到`%>`到达 a。

我认为编写自己的解析器可能是最简单的方法。

可能有另一种方法来解决这个问题。您可以使用 google [CodePro 之](https://developers.google.com/java-dev-tools/codepro/doc/features/audit/audit_rules_com.instantiations.assist.eclipse.auditGroup.jsp)类的工具来审核您的 JSP 文件。尝试[创建一个](https://developers.google.com/java-dev-tools/codepro/doc/features/audit/audit_adding_new_rules)禁止 JSP scriptlet 的自定义规则。

# java - 如何强制 Java 动态方法调用绑定

> ID：13960709
> 
> 赞同：2
> 
> 时间：2012-12-19T20:34:56.840
> 
> 标签：java, dynamic, polymorphism

> **可能重复：**
> [具有继承接口的 Java 重载方法](https://stackoverflow.com/questions/1601365/java-overload-method-with-inherited-interface)

我不肯定我的标题是正确的，但我相信如果不是，我会得到纠正。

我正在尝试像这样重载 helpIt 方法：

```
class Animal{}
class Dog extends Animal{}

class Foo implements AnimalHelper
{
  @Override
  public void helpAnAnimal( Animal a )
  { 
    helpIt( a );
  }

  private void helpIt( Dog d )
  {}

  private void helpIt( Animal a )
  {}
} 
```

问题是它从不调用 helpIt(Dog d) 方法，即使动物是狗。我使用这种方法是因为类 Foo 覆盖了 AnimalHelper 的 helpAnAnimal 方法。

我在这里错过了什么吗？我希望我不必检查 instanceof 然后强制转换它。我相信这在 .Net 中是开箱即用的，但是记忆有点褪色并且可能不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:45:29.847

使该`helpIt()`方法成为可覆盖的实例方法`Animal`：

```
class Foo implements AnimalHelper {
    @Override
    helpAnAnimal(Animal a) { 
        a.helpIt();
    }
} 
```

或者使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)：

```
public interface AnimalVisitor {
    void visitDog(Dog d);
    void visitOther(Animal a);
}

public class Animal {
    public void accept(AnimalVisitor visitor) {
        visitor.acceptOther(this);
    }
}

public class Dog extends Animal {
    public void accept(AnimalVisitor visitor) {
        visitor.acceptDog(this);
    }
}

class Foo implements AnimalHelper {
    @Override
    helpAnAnimal(Animal a) { 
        a.accept(new AnimalVisitor() {
            public void visitDog(Dog d) {
                helpIt(d);
            }
            public void visitOther(Animal a) {
                helpIt(a);
            }
        });
    }

    private void helpIt(Dog d) {
    }

    private void helpIt(Animal a) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:43:56.477

你不能这样做，因为 Java 在编译时将它们都视为动物。

您可以做的是添加特定于实际 Dog 类的 Animal / Dog 算法，例如：

```
class Animal {

    protected boolean hasRabies() {
        return animal.name.equals("Tim");
    }
}

class Dog {

    @Override
    protected boolean hasRabies() {
        return false; // Apparently dogs can't have rabies?
    }
} 
```

然后可以在 helpAnimal 中调用这些具体方法：

```
private void helpIt(Animal a) {
    if (a.hasRabies()) {
        a.setTreats(4000);
    } else {
        a.setTreats(3000);
    }
} 
```

我不是兽医。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:48:55.867

您是从同一类的方法中调用 helpIt(Dog d) 吗？

请注意，您已将私有方法用于这些方法，并且您将无法在此类之外使用这些方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:48:37.200

这里有几件事：

*   Java 肯定不会调用该`helpIt(Dog d)`方法，因为该变量`a`是 type `Animal`。您必须手动检查并调用正确的方法。这实际上是一种向下/向上类型转换的情况。虽然不确定.Net。

*   Foo 应该是什么？是辅助类吗？如果是这样，我不会实现接口，我会删除构造函数并将私有方法公开。这样您就可以直接使用它们并避免手动转换。

*   或者，Java 是一种面向对象的语言，因此如果`helpIt`是一种行为，`Animal`我会将方法移动到 Animal 类中，并将帮助类一起删除。

# ruby-on-rails - VirtualBox：无头 VM：从主机访问 Web 应用程序。

> ID：13960727
> 
> 赞同：0
> 
> 时间：2012-12-19T20:35:50.117
> 
> 标签：ruby-on-rails, networking, virtualbox, headless

我正在使用 VirtualBox (4.2.4) 运行无头 Ubuntu 12.10 来宾 VM。我可以在端口 2222 上使用 127.0.0.1 的腻子 ssh 进入它。VM 的网络配置为 NAT，用于 VM 的第一个也是唯一的网络适配器。

在来宾 VM 上，我在端口 3000 上运行开发 Rails Web 服务器。此外，当我在无头 VM 上运行 ifconfig 时，它说我的 IP 地址是 10.0.2.15 用于 eth0。

当我尝试 ping 10.0.2.15 时，我什么也得不到。当我尝试从 127.0.0.1:3000 的主机 (Windows) 访问 Web 应用程序时，我什么也得不到。当我尝试使用 10.0.2.15 访问 Web 应用程序时，我什么也得不到。

我需要做什么才能从 Windows 主机上的浏览器访问该 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:54:34.980

您需要配置端口转发，或者更好的是，设置内部网络。 [https://www.virtualbox.org/manual/ch06.html#network_internal](https://www.virtualbox.org/manual/ch06.html#network_internal)

您可能还需要配置 Windows 防火墙。

# c# - Moq - 使用在测试执行期间更改的参数验证调用

> ID：13960728
> 
> 赞同：5
> 
> 时间：2012-12-19T20:35:58.057
> 
> 标签：c#, unit-testing, moq

给定以下代码

```
public class Entity
{
    public string Name { get; set; }
    public string Status { get; set; }
}

public interface IRepository
{
    void InsertEntity(Entity entity);
    void UpdateEntity(Entity entity);
}

public class Processor
{
    private IRepository _repository;

    public Processor(IRepository repository)
    {
        _repository = repository;
    }

    public void Execute(string name)
    {
        var entity = new Entity() { Name = name, Status = "Initialized" };
        _repository.InsertEntity(entity);
        // do other things with the entity
        entity.Status = "Processed";
        _repository.UpdateEntity(entity);
    }
} 
```

我可以编写一个单元测试来验证存储库是否在 Execute 方法中被调用，并使用方法 InsertEntity 保存实体的值。换句话说，我想确保在调用 InsertEntity 时，实体的 Status 属性的值是“Initialized”。所以我的单元测试是这样的：

```
[TestMethod]
public void ShouldSaveEntityWithStatusInitialized()
{
    var mock = new Mock<IRepository>();
    var processor = new Processor(mock.Object);
    processor.Execute("test");
    mock.Verify(m => m.InsertEntity(It.Is<Entity>(e => e.Status == "Initialized")), Times.Once()); // fail
} 
```

但是，即使使用 Status = "Initialized" 调用 InsertEntity 方法，此代码也会失败（我已经调试过了）。我认为这是因为实体对象在 Execute 方法的执行过程中发生了变化（最后状态属性更改为“已处理”），并且 Moq 验证了对更改对象的调用。事实上，这个其他单元测试运行良好。

```
[TestMethod]
public void ShouldUpdateEntityWithStatusProcessedAtTheEnd()
{
    var mock = new Mock<IRepository>();
    var processor = new Processor(mock.Object);
    processor.Execute("test");
    mock.Verify(m => m.InsertEntity(It.Is<Entity>(e => e.Status == "Processed")), Times.Once());
} 
```

我发现使我的第一个单元测试有效的唯一方法是使用以下解决方法。我使用 Moq 的回调功能保存了 Status 属性的值，然后再断言。

```
[TestMethod]
public void ShouldSaveEntityWithStatusInitialized_withWorkaround()
{
    var mock = new Mock<IRepository>();
    var processor = new Processor(mock.Object);
    string status = string.Empty;
    mock.Setup(m => m.InsertEntity(It.IsAny<Entity>())).Callback((Entity e) => status = e.Status);
    processor.Execute("test");
    Assert.AreEqual("Initialized", status);
} 
```

但我不喜欢那样。我想知道是否有办法让 Moq在 STU（被测系统）执行**期间验证对模拟对象的调用，而不是在所有执行完成之后。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:58:53.110

恕我直言，最后一种方法（您称之为“hack”）是测试状态值的正确方法。对我来说更清楚的是，您要在此测试中验证的是在`InsertEntity`调用方法时状态设置为“已初始化”。

您想与验证一起使用的方法对于您正在测试的内容更加模糊。您是要确认`InsertEntity`被调用还是要测试参数是否为“已初始化”，或者两者兼而有之，我不知道。如果您想同时测试两者，那么这实际上是两个不同的单元测试。

您还可以执行以下操作...

```
mock.Setup(m => m.InsertEntity(It.Is<Entity>(e => e.Status == "Initialized"))); 
```

但我也不喜欢这种方法，因为这意味着`InsertEntity`当状态不是“Initialized”值时，生产代码将运行而不是你的模拟。更有可能单元测试仍然会失败，但是从单元测试返回的断言失败消息更加模糊（失败是由于真实方法内部发生的事情而发生的`InsertEntity`）。回调准确地说明了您在单元测试中测试的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:23:46.617

```
[TestMethod]
public void ShouldSaveEntityWithStatusInitialized()
{
    // arrange
    var mock = new Mock<IRepository>();
    mock.Setup(m => m.InsertEntity(It.Is<Entity>(e => e.Status == "Initialized")));
    var processor = new Processor(mock.Object);

    // act
    processor.Execute("test");

    // assert
    mock.Verify();
} 
```

# java - if 语句在计时器中循环

> ID：13960729
> 
> 赞同：-1
> 
> 时间：2012-12-19T20:36:01.417
> 
> 标签：java

我有一个休息计时器应用程序。它使用计时器类来计时，并在我的休息时间结束时通过短信通知我。一切正常，只是一旦 if 语句变为真，它就会每秒向我发送一条短信。所以我在一分钟内收到了大约 60 条消息，它会在运行时继续运行。我试过用很多不同的方式重写 if 语句，但它仍然做同样的事情。我知道没有 if 循环之类的东西，但这就是它正在做的事情。now 变量在公共类中声明的计时器循环之外。我在下面发布了大部分类代码。

```
 private static long now = System.currentTimeMillis();
       public BreakTimer() {
        this.setText(when());
    }
     public void actionPerformed(ActionEvent ae) {
     (some more code)            
        long currenttime = System.currentTimeMillis() - now;
        int breaknotify = 15 - SettingsIni.breaknotifytime();

                    if ((currenttime) /6000 == breaknotify){                                    
                            try {
                                TextMessage.main(null);
                            } catch (AddressException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (MessagingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }               
                    }       
        }
public void start() {
        BreakTimer.reset();
        timer.start();     
    }
    public static void main(String[] args) {
        running = true;
        BreakTimer jtl = new BreakTimer();
        jtl.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:40:46.883

您正在进行整数除法，这将经常返回 true。我建议这样做：

```
if ( (currenttime)/ 6000.0 == breaknotify 
```

此外，您需要终止计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:39:36.223

您需要在发送第一条短信时停止计时器。Timer 类为此提供了一个 stop() 方法。

```
 if ((currenttime) /6000 == breaknotify){                                    
          try {
              TextMessage.main(null);
              //stop the timer here
           } catch (AddressException e) { 
```

# java - 在 Java 中使用数据库 mysql

> ID：13960730
> 
> 赞同：0
> 
> 时间：2012-12-19T20:36:01.383
> 
> 标签：java, mysql, jdbc

我已经开始尝试一些东西，以便我可以将 mysql 数据库与 Java 一起使用。首先，我对此有一些疑问。

我在 PHP 开发中经常使用 mysql，但从未使用过 Java。我可以使用 MAMP 带来的 MySQL，还是必须单独安装它？

第二..我在教程的帮助下创建了这段代码，但我得到的唯一输出是

> com.mysql.jdbc.Driver

我用于此的代码您可以在下面找到：

```
package Databases;

import java.sql.*;

public class MysqlConnect{

/* These variable values are used to setup
the Connection object */

 static final String URL = "jdbc:mysql://localhost:3306/test";
 static final String USER = "root";
 static final String PASSWORD = "root";
 static final String DRIVER = "com.mysql.jdbc.Driver";

 public Connection getConnection() throws SQLException {
    Connection con = null;
    try {
       Class.forName(DRIVER); 
       con = DriverManager.getConnection(URL, USER, PASSWORD);
    }
    catch(ClassNotFoundException e) {
       System.out.println(e.getMessage());
       System.exit(-1);
    }
    return con;
 }

 public void getEmployees() {
    ResultSet rs = null;
    try {
       Statement s = getConnection().createStatement();
       rs = s.executeQuery("SELECT id, name, job_id, location FROM person");
       System.out.format("%3s %-15s %-7s %-7s%n", 
          "ID", "NAME", "JOB ID", 
            "LOCATION");
       System.out.format("%3s %15s %7s %7s%n", 
          "---", "---------------", 
            "-------", "--------");

       while(rs.next()) {
          long id = rs.getLong("id");
          String name = rs.getString("name");
          long job = rs.getLong("job_id");
          String location = rs.getString("location");
          System.out.format("%-3d %-15s %7d %5s%n", 
             id, name, job, location);
       }
    }
    catch(SQLException e) {
       System.out.println(e.getMessage());
       System.exit(-1);
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T20:39:15.537

它来自以下块：

```
catch(ClassNotFoundException e) {
   System.out.println(e.getMessage());
   System.exit(-1);
} 
```

这是处理异常的一种非常糟糕的方式。您只是在打印异常消息。你不知道发生了什么。而是直接**抛出**它（最终会得到一个很好的堆栈跟踪），或者单独打印一个更具描述性的消息以及异常消息，例如

```
catch(ClassNotFoundException e) {
   System.out.println("JDBC driver class not found in runtime classpath: " + e.getMessage());
   System.exit(-1);
} 
```

如何修复特定异常实际上是第二个问题（有一个非常明显的答案：只需将包含 JDBC 驱动程序类的 JAR 文件放在运行时类路径中），但是，你可能会发现这个迷你教程很有帮助：[将 Java 连接到MySQL 数据库](https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358)。

* * *

**与具体问题无关**，我不确定您正在阅读哪个教程，但我会持保留态度。除了糟糕的异常处理之外，它还`getEmployees()`通过从不关闭结果集、语句和连接来泄漏方法中的数据库资源。这也绝对不是一个好习惯。如何做到这一点也已经包含在前面链接的迷你教程中。另请参阅：[在 JDBC 中应多久关闭一次连接、语句和结果集？](https://stackoverflow.com/questions/5602772/how-often-should-statement-and-resultset-objects-be-closed-in-jdbc/5602821#5602821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:44:38.390

是的，您需要在本地或远程安装 MySQL 服务器。

如果您还从 MySQL 下载页面下载了 jdbc Driver jar，则该代码将可用。并且您使用正确的用户名和密码配置了您的 MySQL 实例。

# objective-c - 在 Cocoa 中，使用 webview，鼠标悬停时如何在状态栏中显示链接？

> ID：13960734
> 
> 赞同：5
> 
> 时间：2012-12-19T20:36:27.690
> 
> 标签：objective-c, cocoa, webview, mouseover

正如标题所说，我正在使用 webview 来显示一个网站，当鼠标悬停在超文本上时，我需要在状态栏中显示链接......我该怎么做？我敢肯定这很容易，但到目前为止我找不到任何关于这个的东西......谢谢你的帮助，Massy

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:29:23.767

我知道了！我很确定这很容易......这是我为遇到同样问题的任何人所做的：

```
-(void)webView:(WebView *)sender mouseDidMoveOverElement:(NSDictionary *)elementInformation modifierFlags:(unsigned int)modifierFlags
{    
   NSArray* keys = [elementInformation objectForKey:WebElementLinkURLKey];

   //here I pass the link to a label
   if (keys != nil) [statusBarLabel setStringValue:[NSString stringWithFormat:@"%@",keys]];
   else [statusBarLabel setStringValue:@""];

//  NSLog(@"%@",keys);
} 
```

也不要忘记 UIDelegate 你的 webView。和平，马西

# ios - TastyPie / RestKit 501 未实现

> ID：13960739
> 
> 赞同：1
> 
> 时间：2012-12-19T20:37:00.767
> 
> 标签：ios, django, restkit, tastypie

我在django中使用tastepie作为REST接口，从Xcode我可以调用服务器并使用RestKit成功获取数据，但是我无法发布数据。我知道它击中了正确的区域，因为我有一个 401 然后在 django 中打开`authentication()`并且该问题已解决，现在我收到一个`501 Not Implemented`错误。我还手动添加了详细信息并`list_allowed_methods`允许所有表单 POST/GET/ETC。我用谷歌搜索并溢出无济于事！帮助！

这是我用于发布的代码（我是 RestKit 的新手，所以要温柔）

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://127.0.0.1:8000/api/v1/"]];
RKObjectMapping *lotRequestMapping = [RKObjectMapping requestMapping];
[lotRequestMapping addAttributeMappingsFromDictionary:@{@"status" : @"parking_availability"}];
RKResponseDescriptor *lotResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:lotRequestMapping
                                                                                      pathPattern:@"parkinglot/:primaryKey/"
                                                                                          keyPath:nil
                                                                                      statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

截屏 - ![xcode RestKit 代码](../Images/4505c0c9c1526ae3fcf7029866848930.png)

这是错误请参阅屏幕截图 ![501 未实现 Xcode 错误](../Images/f5f2cbdf350c2b3df823b5234b9e68cc.png)

截图中的文字

> 2012-12-19 13:23:26.145 Parkable[36586:4b07] 我 restkit.network:RKHTTPRequestOperation.m:143 POST ' [http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json](http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json) ' 2012-12-19 13:23:26.158 Parkable [36586:3807] E restkit.network:RKHTTPRequestOperation.m:156 POST ' [http://127.0.0.1:8000/api/v1/parkinglot/22/?format= json](http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json) ' (501 Not Implemented): Error Domain=AFNetworkingErrorDomain Code=-1011 "预期状态码在 (200-299,400-499)，得到 501" UserInfo=0x9170260 {AFNetworkingOperationFailingURLRequestErrorKey=http://127.0.0.1:8000/api/ v1/parkinglot/22/?format=json>, NSErrorFailingURLKey= [http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json](http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json), NSLocalizedDescription=(200-299,400-499) 中的预期状态代码，得到 501，AFNetworkingOperationFailingURLResponseErrorKey=} 2012-12-19 13:23:26.158 Parkable[36586:4b07] E restkit.network:RKObjectRequestOperation.m:271 对象请求失败: 底层 HTTP 请求操作失败并出现错误：Error Domain=AFNetworkingErrorDomain Code=-1011 “预期状态代码在 (200-299,400-499)，得到 501” UserInfo=0x9470f10 {AFNetworkingOperationFailingURLRequestErrorKey=http://127.0.0.1:8000/api /v1/parkinglot/22/?format=json>, NSErrorFailingURLKey= [http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json](http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json), NSLocalizedDescription=(200-299,400-499) 中的预期状态代码，得到 501，AFNetworkingOperationFailingURLResponseErrorKey=} 2012-12-19 13:23:26.159 Parkable[36586:c07] 失败 - 错误域=AFNetworkingErrorDomain Code=-1011 “预期状态(200-299,400-499) 中的代码，得到 501" UserInfo=0x9470f10 {AFNetworkingOperationFailingURLRequestErrorKey=http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json>, NSErrorFailingURLKey= [http://127.0 .0.1:8000/api/v1/parkinglot/22/?format=json](http://127.0.0.1:8000/api/v1/parkinglot/22/?format=json) , NSLocalizedDescription=预期状态码在 (200-299,400-499), 得到 501, AFNetworkingOperationFailingURLResponseErrorKey=}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:39:17.987

为了回答我自己的问题，添加后 501 错误消失了

```
class UserResource(ModelResource): 
```

到 resources.py 文件并将其注册到 urls.py

```
v1_api.register(UserResource()) 
```

# ios - 屏幕空间光线投射

> ID：13960744
> 
> 赞同：2
> 
> 时间：2012-12-19T20:37:19.767
> 
> 标签：ios, opengl-es-2.0, raycasting

我正在使用 OpenGL ES 2.0 和最新的 iOS。

我有一个 3D 模型，我希望用户能够通过点击屏幕来选择模型的不同部分。我发现[本](http://www.mvps.org/directx/articles/rayproj.htm)教程将像素空间屏幕坐标转换为世界空间射线，并实施了射线-AABB 相交测试以确定模型的相交部分。

我在模型的看似随机的部分得到**了一些点击。**所以我需要调试这个功能，但我真的不知道从哪里开始。

我不能准确地画一条代表射线的线（因为它是从相机出来的，所以它会显示为一个点），所以我可以看到几种调试方法：

1.  检查模型部分的边界框。那么 OGL ES 有没有一种简单的方法可以在给定最小和最大点的情况下绘制边界框？

2.  沿着光线的路径绘制一些 3D 对象。这似乎更复杂。

3.  实际调试光线投射和交集代码。这似乎是最难完成的，因为算法是众所周知的（我直接从我的实时碰撞检测一书中进行了交叉测试）。

如果有人可以提供帮助，或者希望我发布一些代码，我真的可以使用它。

这是我转换为世界空间的代码：

```
- (IBAction)tappedBody:(UITapGestureRecognizer *)sender
{
    if ( !editMode )
    {
        return;
    }
    CGPoint tapPoint = [sender locationOfTouch:0 inView:self.view];
    const float tanFOV = tanf(GLKMathDegreesToRadians(65.0f*0.5f));
    const float width = self.view.frame.size.width,
                height = self.view.frame.size.height,
                aspect = width/height,
                w_2 = width * 0.5,
                h_2 = height * 0.5;

    CGPoint screenPoint;
    screenPoint.x = tanFOV * ( tapPoint.x / w_2 - 1 ) / aspect;
    screenPoint.y = tanFOV * ( 1.0 - tapPoint.y / h_2 );

    GLKVector3 nearPoint = GLKVector3Make(screenPoint.x * NEAR_PLANE, screenPoint.y * NEAR_PLANE, NEAR_PLANE );
    GLKVector3 farPoint = GLKVector3Make(screenPoint.x * FAR_PLANE, screenPoint.y * FAR_PLANE, FAR_PLANE );

    GLKVector3 nearWorldPoint = GLKMatrix4MultiplyVector3( _invViewMatrix, nearPoint );
    GLKVector3 farWorldPoint = GLKMatrix4MultiplyVector3( _invViewMatrix, farPoint );

    GLKVector3 worldRay = GLKVector3Subtract(farWorldPoint, nearWorldPoint);
    NSLog(@"Model matrix: %@", NSStringFromGLKMatrix4(_modelMatrix));
    worldRay = GLKVector4Normalize(worldRay);

    [male intersectWithRay:worldRay fromStartPoint:nearWorldPoint];

    for ( int i =0; i < 3; ++i )
    {
        touchPoint[i] = nearWorldPoint.v[i];
    }
} 
```

这是我获得矩阵的方法：

```
- (void)update
{
//  _rotation = 0;

    float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, NEAR_PLANE, FAR_PLANE);

    self.effect.transform.projectionMatrix = projectionMatrix;
    GLKMatrix4 baseModelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -5.0f);

    // Compute the model view matrix for the object rendered with ES2
    _viewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 0.0f);
    _modelMatrix = GLKMatrix4Rotate(baseModelViewMatrix, _rotation, 0.0f, 1.0f, 0.0f);
    _modelViewMatrix = GLKMatrix4Rotate(_viewMatrix, _rotation, 0.0f, 1.0f, 0.0f);
    _modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, _modelViewMatrix);

    _invViewMatrix = GLKMatrix4Invert(_viewMatrix, NULL);
    _invMVMatrix = GLKMatrix4Invert(_modelViewMatrix, NULL);

    _normalMatrix = GLKMatrix3InvertAndTranspose(GLKMatrix4GetMatrix3(_modelViewMatrix), NULL);

    _modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix, _modelViewMatrix);

    male.modelTransform = _modelMatrix;

    if ( !editMode )
    {
        _rotation += self.timeSinceLastUpdate * 0.5f;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:40:21.610

> 我不能准确地画一条代表射线的线（因为它是从相机出来的，所以它会显示为一个点）

不要这么快就丢弃它。这不是你想要测试的吗？我的意思是，如果你没有正确地预测事情，那就是这样。但是，如果您有错误，则不会。

我会先解决这个问题......如果您在手指下看到一个点，则转换是正确的，您可以开始研究您指出的其他选项，这些选项更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:02:40.357

我不确定为什么这解决了我遇到的问题但正在改变

```
screenPoint.x = tanFOV * ( tapPoint.x / w_2 - 1 ) / aspect; 
```

到

```
screenPoint.x = tanFOV * ( tapPoint.x / w_2 - 1 ) * aspect; 
```

和

```
GLKVector4 nearPoint = GLKVector4Make(screenPoint.x * NEAR_PLANE, screenPoint.y * NEAR_PLANE, NEAR_PLANE, 1 );
GLKVector4 farPoint = GLKVector4Make(screenPoint.x * FAR_PLANE, screenPoint.y * FAR_PLANE, FAR_PLANE, 1 ); 
```

到

```
GLKVector4 nearPoint = GLKVector4Make(screenPoint.x * NEAR_PLANE, screenPoint.y * NEAR_PLANE, -NEAR_PLANE, 1 );
GLKVector4 farPoint = GLKVector4Make(screenPoint.x * FAR_PLANE, screenPoint.y * FAR_PLANE, -FAR_PLANE, 1 ); 
```

似乎已经解决了光线投射问题。仍然不确定为什么我的视图矩阵似乎表明相机正在向下看正 Z 轴，但我的对象沿 z 轴平移为负

# variables - 我需要计算一个文件夹中有多少个 .zip 文件并传输到一个变量。然后与txt日志文件中的成功226传输进行比较

> ID：13960748
> 
> 赞同：0
> 
> 时间：2012-12-19T20:37:24.400
> 
> 标签：variables, ftp, batch-file

我通过搜索找到了这个网站，这对我很有帮助。我能够修改以前解决方案的一部分来做我需要的，但我仍然需要一些帮助。我需要在批处理文件中执行此操作，并希望获得一两个解决方案。

我需要做的是将 1 到 10 个 zip 文件从我的 PC 传输到多个 FTP 服务器。然后我需要检查以确保它们已成功转移。在我的 PC 上，我使用的是常规的 MS FTP，而服务器使用的是 IndiFTPD。除了检查部分，我已经完成了所有工作。一些 FTP 服务器是拨号和无线的，它们会不时断开连接。因此，如果我要传输 3 个文件并且第一个文件失败但其他两个文件成功，我的脚本会将其列为成功。

我已经能够计算出传输文件夹中有多少个 zip 文件并将其放入变量中。代码是：

```
@echo off

for /f %%A in ('dir *.zip ^| find "File(s)"') do set cnt=%%A
echo Zip File count = %cnt% 
```

我遇到的问题是从 FTP 传输的文本日志文件中获取相同的信息，然后比较两者以确保它们相同。这是我将进行的 FTP 传输日志的示例：

```
ftp> Connected to Host1.
open Host1 21 
220 Connected to IndiFTPD
ftp> Username user 
user1
331 Password required for Folder1.

230 User user1 logged in.
ftp> Hash mark printing On  ftp: (2048 bytes/hash mark) .
ftp> hash 
binary 
200 Type is set to I.
ftp> mput *.zip 
200 PORT command successful.
150 Opening BINARY mode data connection for 2012_07_01_03_40_1_3_TESTFTPs.zip.
###############################################################################################
226 [Bytes: 195046][Time: 1.13 s][Speed: 168.26 K/s]
ftp: 195046 bytes sent in Seconds Kbytes/sec.
0.78251.67200 PORT command successful.
150 Opening BINARY mode data connection for 2012_07_01_03_40_2_3_TESTFTPs.zip.
###############################################################################################
226 [Bytes: 195046][Time: 1.13 s][Speed: 168.41 K/s]
ftp: 195046 bytes sent in Seconds Kbytes/sec.
0.77253.31200 PORT command successful.
150 Opening BINARY mode data connection for 2012_07_01_03_40_3_3_TESTFTPs.zip.
###############################################################################################
226 [Bytes: 195046][Time: 1.14 s][Speed: 166.79 K/s]
ftp: 195046 bytes sent in Seconds Kbytes/sec.
ftp> 0.78249.42bye 
221 Exit. 
```

我希望能够使用`%cnt%`脚本第一部分中的变量来获取我拥有的 zip 文件的数量。然后我希望能够在名为 terminal-ftp.txt 的日志文件中计算“226 [Bytes”的数量。然后，一旦我有两个变量形式的值，我需要比较它们以确保我有 3 个 FTP 文件和 3 个成功的 226 传输。如果它们不匹配，那么我需要将其标记为重试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:53:02.277

得到 226 个结果：

```
for /f "usebackq tokens=3 delims=: " %%A in (`find /c "226 [Bytes" "terminal-ftp.txt"`) do set "xTTS=%%A"
echo Successful 226 Transfers = %xTTS% 
```

比较结果：

```
if "%xTTS%" EQU "%cnt%" echo The counts match
if "%xTTS%" NEQ "%cnt%" echo The counts do not match 
```

对于伟大的批次参考：

`command /?`, [`Technet`](http://technet.microsoft.com/en-us/library/cc772390%28v=ws.10%29.aspx), [`Rob van de Woude`](http://www.robvanderwoude.com/batchfiles.php), [`DosTips`](http://www.dostips.com/), 和[`SS64`](http://ss64.com/)

# jquery - 如何使 jQuery 悬停事件不排队？

> ID：13960750
> 
> 赞同：0
> 
> 时间：2012-12-19T20:37:35.820
> 
> 标签：jquery, hover, jquery-animate, mouseevent

我有一个 div，当我将鼠标悬停在它上面时，它里面的一个 div 动画，然后当我停止悬停时，它动画回到原来的位置。但是如果我将鼠标悬停在它上面多次，非常快，那么动画会排队并继续直到它们完成。示例：我快速将鼠标悬停在 div 上 10 次，当我坐在那里时，div 动画 10 次。我不希望这些动画像这样排队。

这是我的脚本：

```
$(".call1").hover(
    function(){
        $(".call-label").animate({"bottom": "+=50px"}, "slow");
    },
    function(){
        $(".call-label").animate({"bottom": "-=50px"}, "slow");    
    }
);​ 
```

我有一个 jsfiddle 来说明我遇到的问题：http: [//jsfiddle.net/mqpbm/](http://jsfiddle.net/mqpbm/1/)

我也尝试过 .mouseover 和 .mouseout，以及 .mouseenter 和 .mouseleave。他们都这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:39:29.093

使用[.stop()](http://api.jquery.com/stop/)

```
$(".call1").hover(
    function(){
        $(".call-label").stop().animate({"bottom": "50px"}, "slow");
    },
    function(){
        $(".call-label").stop().animate({"bottom": "0px"}, "slow");    
    }
);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:41:27.647

我过去曾使用 hoverIntent 插件来使悬停更能响应用户的实际意图。它应该对您的目的有用。

[hoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)

# javascript - Jquery动态创建复选框，并找到复选框

> ID：13960752
> 
> 赞同：1
> 
> 时间：2012-12-19T20:37:42.460
> 
> 标签：javascript, jquery, ajax

我有来自数据库的信息，并被每个元素放入一个带有复选框的列表中。这是目前的做法：

```
 function subjects(){
    $.ajax({
    url: "lib/search/search.subject.php",
    async: "false",
    success: function(response){
    alert(response);
            var responseArray = response.split(',');    
            for(var x=0;x<responseArray.length;x++){
            $("#subjects").append("<br />");
            $("#subjects").append(responseArray[x]);
            $("#subjects").append("<input type='checkbox' />");
            }           
        }
    });
} 
```

它工作正常，但我需要一种方法来确定是否单击了复选框，如果单击了它，则显示单击了哪个复选框，或者单击了多个复选框。

我似乎根本找不到选择复选框的方法。

响应变量是“数学、科学、技术、工程”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:56:46.557

因为您正在动态填充复选框，所以您需要**委托事件**

```
$("#subjects").on("click", "input[type='checkbox']", function() {
    if( $(this).is(":checked") ) {
       alert('Checkbox checked')
    }
}); 
```

为了更好地捕获数据，最好将相应的数据封装到一个 span 中，以便更容易搜索..

```
 $("#subjects").append('<span>'+responseArray[x] + '</span>'); 
```

* * *

```
$("#subjects").on("click", "input[type='checkbox']", function() {
        var $this = $(this);
        if( $this.is(":checked") ) {
            var data = $this.prev('span').html();
            alert('Current checkbox is : '+ data ) 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:49:41.783

最好为您的动态注入复选框提供一个类以更好地定位它们，但根据您的代码尝试：

```
$("#subjects").on("click", "input", function() {
    if( $(this).is(":checked") ) {
    // do something
    }
}); 
```

由于您的输入元素是动态添加的，因此您需要使用 jQuery 的[`.on()`](http://api.jquery.com/on/)函数将点击事件绑定到它们。在您的情况下，您需要`.on()`在加载脚本时使用绑定到 DOM 中存在的元素。在您的情况下，ID 为 #subjects 的元素。

文档中的此注释主要针对 machineghost，他们无缘无故地否决了我的答案：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:50:27.057

```
$('#subjects input[type=checkbox]').on('click',function(){
    alert($(this).prop('checked'));
}); 
```

或更改事件：以防有人使用键盘

```
$('#subjects input[type=checkbox]').on('change',function(){
    alert($(this).prop('checked'));
}); 
```

简单的小提琴示例：http: [//jsfiddle.net/Dr8k8/](http://jsfiddle.net/Dr8k8/)

要获取数组示例，请使用输入的索引

```
alert($(this).prop('checked') +'is'+ $(this).parent().find('input[type=checkbox]').index(this)+ responseArray[$(this).parent().find('input[type=checkbox]').index(this) ]); 
```

简化示例：http: [//jsfiddle.net/Dr8k8/1/](http://jsfiddle.net/Dr8k8/1/)

编辑：仅举个例子，您可以将结果放在所有选中框的数组中，然后用它做一些事情：

```
$('#subjects>input[type=checkbox]').on('change', function() {
    var checklist = [];
    $(this).parent().find('input[type=checkbox]').each(function() {
        $(this).css('background-color', "lime");
        var myindex = $(this).parent().find('input[type=checkbox]').index(this);
        if ($(this).prop('checked') == true) {
            checklist[myindex] = responseArray[myindex];
        }
    });
    $('#currentlyChecked').text(checklist);
}); 
```

编辑2：

我考虑了一下，您可以通过使用 .data() 并根据事件查询或存储它来改进它（我的按钮由其 id 为“whatschecked”调用）

```
var responseArray = ['math', 'science', 'technology', 'engineering'];// just for an example
var myList = '#subjects>input[type=checkbox]';//to reuse
for (var x = 0; x < responseArray.length; x++) {
    // here we insert it all so we do not hit the DOM so many times
    var iam = "<br />" + responseArray[x] + "<input type='checkbox' />";
    $("#subjects").append(iam);
    $(myList).last().data('subject', responseArray[x]);// add the data
}
var checklist = [];// holds most recent list set by change event
$(myList).on('change', function() {
    checklist = [];
    $(myList).each(function() {
        var myindex = $(this).parent().find('input[type=checkbox]').index(this);
        if ($(this).prop('checked') == true) {
            checklist.push($(this).data('subject'));
            alert('This one is checked:' + $(this).data('subject'));
        }
    });
});
// query the list we stored, but could query the checked list data() as well, see the .each() in the event handler for that example
$("#whatschecked").click(function() {
    var numberChecked = checklist.length;
    var x = 0;
    for (x = 0; x < numberChecked; x++) {
        alert("Number " + x + " is " + checklist[x] + " of " + numberChecked);
    }
}); 
```

最后一个的实例：http: [//jsfiddle.net/Dr8k8/5/](http://jsfiddle.net/Dr8k8/5/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T20:39:18.367

单击复选框输入时执行某些操作的一般模式是：

```
$('input[type=checkbox]').click(function() {
    // Do something
}) 
```

检查复选框输入是否被选中的一般模式是：

```
var isItChecked = $('input[type=checkbox]').is(':checked'); 
```

在您的特定情况下，您可能想要执行以下操作：

```
$('#subjects input[type=checkbox]').click(function() { 
```

将涉及的复选框限制为`#subjects`元素内的复选框。

# javascript - jQuery 1.8：Ajax beforeSend 阻止 deferred.done() 执行

> ID：13960757
> 
> 赞同：0
> 
> 时间：2012-12-19T20:38:13.043
> 
> 标签：javascript, jquery, jquery-deferred, jquery-1.8

如果您在 1.7 中执行此代码，则会出现警报，而 1.8 则不会：

```
$.when(
$.ajax({
    url: "whatever",
    dataType: "json",
    beforeSend: function(jqXHR, settings) {
        return false;
    }
})).done(function(a1) {
    alert("this appears in 1.7 but not in 1.8!");
});​ 
```

我无法在 jQuery 文档、1.8 发行说明或提到此问题的 jQuery 错误跟踪器中找到任何内容。我想知道哪种行为是正确的，以及是否有人可以提供错误票证或 Github 提交的链接。

这是这个问题的小提琴：

[http://jsfiddle.net/zJddg/](http://jsfiddle.net/zJddg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:43:27.203

来自 jQuery 文档：

> 在 beforeSend 函数中返回 false 将取消请求。

您在 1.8 中遇到的当前行为是预期的行为，如果它没有在 1.7 中取消请求，那将是一个错误。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

不过，我在任何版本中都没有看到指向修复此“错误”的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:48:57.247

不应出现警报。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)说：

> 特别是，在对象上调用 .abort() 将在请求完成之前停止请求。

在代码中：

```
 // Allow custom headers/mimetypes and early abort
    if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
            // Abort if not done already and return
            return jqXHR.abort();

    } 
```

我相信这是对[错误 #8193](http://bugs.jquery.com/ticket/8193)和可能的[错误 #10944](http://bugs.jquery.com/ticket/10944)的回应。

# mysql - 接受具有多个参数的字符串的 MySQL 存储过程

> ID：13960760
> 
> 赞同：8
> 
> 时间：2012-12-19T20:38:42.657
> 
> 标签：mysql, sql, stored-procedures

我想创建一个存储过程，它接受 IN 参数中的所有值作为单个字符串。

```
DELETE FROM object 
WHERE Type NOT IN 
    ('ListGrid',
     'TextField',
     'SpinBox',
     'MenuButton',
     'ListGrid',
     'RadioButton',
     'DropDown',
     'PopUp',
     'Element',
     'Checkbox',
     'TreeDropDown',
     'TblColumn',
     'Button',
     'Link',
     'Filter',
     'TblRow',
     'GridRow',
     'Popup') 
```

这是我尝试过的一个例子，但它不起作用。

```
DELIMITER //
CREATE PROCEDURE deleteObjectTypes(IN p_type VARCHAR(255))
BEGIN
SET @query = CONCAT ('DELETE FROM object WHERE Type NOT IN (',p_type,')');
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END //
DELIMITER ; 
```

我收到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''List)' at line 1 
```

运行此查询时：

```
CALL deleteObjectTypes("'ListGrid1','TextField1','SpinBox1','MenuButton1','ListGrid2','TextField2','SpinBox2','MenuButton2','ListGrid3','TextField3','SpinBox3','MenuButton3','ListGrid4','TextField4','SpinBox4','MenuButton4','ListGrid5','TextField5','SpinBox5','MenuButton5','ListGrid6','TextField6','SpinBox6','MenuButton6'") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T20:50:54.727

您需要将 VARCHAR 大小更改为最大值（或较低的有效值）。

```
DELIMITER //
CREATE PROCEDURE deleteObjectTypes(IN p_type VARCHAR(65535))
BEGIN
    SET @query = CONCAT ('DELETE FROM object WHERE Type NOT IN (',p_type,')');
    PREPARE stmt FROM @query;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END //
DELIMITER ; 
```

但是，请注意，如果您使用多字节字符集，则限制会更低：

```
VARCHAR(21844) CHARACTER SET utf8 
```

[如此处](https://stackoverflow.com/questions/332798/equivalent-of-varcharmax-in-mysql)所见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T21:01:03.503

（对不起，我不能添加评论太低的声誉）您的程序看起来不错，也许问题出在其他地方？请注意，我们已将 varchar 定义为 255 个字符，而您提供的示例超过了这个数字（291 个字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T23:53:02.953

你应该试试这个（缩短的例子）：

```
DELETE 
FROM 
  object 
WHERE 
  NOT FIND_IN_SET( Type, 'ListGrid,TextField,SpinBox,MenuButton,ListGrid' ); 
```

并使用存储过程

```
DELIMITER //
CREATE PROCEDURE deleteObjectTypes(IN p_type VARCHAR(255))
BEGIN
  DELETE 
  FROM 
    object 
  WHERE 
    NOT FIND_IN_SET( Type, p_type );
END //
DELIMITER ; 
```

* * *

```
CALL deleteObjectTypes( 'ListGrid1,TextField1,SpinBox1,MenuButton1,ListGrid2,TextField2,SpinBox2,MenuButton2,ListGrid3,TextField3,SpinBox3,MenuButton3,ListGrid4,TextField4,SpinBox4,MenuButton4,ListGrid5,TextField5,SpinBox5,MenuButton5,ListGrid6,TextField6,SpinBox6,MenuButton6' ); 
```

# html - 流体父子div中的垂直文本居中

> ID：13960761
> 
> 赞同：2
> 
> 时间：2012-12-19T20:38:44.437
> 
> 标签：html, css

我有这个 CSS：

```
div#all {
    width: 100%;
    height: auto;
    float: left;
    background: blue;
    position: relative;
}

div#left {
    width: 47%;
    float: left;
    font-size: 13px;
    height: auto;
    display: table;
    text-align: center;
    overflow: hidden;
    background: green;
    position: relative;
}
div.box span {
    width: 100%;
    background: red;
    display: table-cell;
    vertical-align: middle;
}

img#right {
    width: 53%;
    height: auto;
    float: right;
    display: block;
} 
```

这个HTML：

```
<div id="all">
    <div id="left">

        <span>
        My long text bla bla bla sadf asdfasdfasd fasdf asdfsadfasdf
        </span>

    </div>

    <img id="right" src="http://asset3.cbsistatic.com/cnwk.1d/i/tim/2012/09/19/35446285_620x433.jpg">
</div> 
```

我得到了这个：

![在此处输入图像描述](../Images/e5abc564a24ac71903a4bcb6cec00099.png)

但是我想像这样将文本部分居中：

![在此处输入图像描述](../Images/ed06730a797b1841a4ab104951c4ca80.png)

怎么做这样的事情？

**重要1！**垂直文本需要调整为一行或多行并动态垂直居中。

**重要2！**一切都需要流动！只允许 %，不允许 px,pt,em 等！

**这里也是 JSFIDDLE：http:** [//jsfiddle.net/GkF6R/3/](http://jsfiddle.net/GkF6R/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:05:28.660

我做了[这样的](http://jsfiddle.net/w8NzK/)事情......

***CSS：***

```
div#all {
   width: 100%;
   height: 100%;
   overflow: hidden;
   background: blue;
   position: relative;
}

div span {
   width: 40%;
   background: red;
   padding-left: 10%;
   display: inline-block;
   vertical-align: middle;
}

img#right {
   width: 50%;
   height: auto;

   display: inline-block;
   vertical-align: middle;
} 
```

***HTML：***

```
<div id="all">
    <span>
    My long text bla bla bla sadf asdfasdfasd fasdf asdfsadfasdf
    </span><img id="right" src="http://asset3.cbsistatic.com/cnwk.1d/i/tim/2012/09/19/35446285_620x433.jpg">
</div> 
```

那是你要的吗？

一件非常重要的事情-`<img>`标签必须就在 . 之后`</span>`。没有空格键或输入。这是因为这两个元素都是内联块。如果您放置“空格”或“输入”，则布局将无法按您想要的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:47:09.463

[这对你有用吗？](http://jsfiddle.net/luissanchezm86/GkF6R/4/)

**CSS 片段**

```
div span {
    top: 50%;
    position: absolute;
    color: red;
} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T21:13:12.340

看起来您接近表格布局，使用表格与尝试操作`<span>`并`<div>`进入表格

[示例 jsfiddle](http://jsfiddle.net/GkF6R/28/)

CSS

```
#all {border-collapse:collapse;background:blue;width:100%;}
#all .desc {width:49%;max-width:49%;vertical-align:middle;}
#all .desc p {background:green;text-align:center;}
#all .img {width:51%;line-height:0;font-size:0;}
#all img {width:100%;} 
```

HTML

```
<table id="all">
    <tr>
        <td class="desc">
            <p>My long text bla bla bla sadf asdfasdfasd fasdf asdfsadfasdf</p>
        </td>
        <td class="img">
            <img src="http://asset3.cbsistatic.com/cnwk.1d/i/tim/2012/09/19/35446285_620x433.jpg">
        </td>
    </tr>
</table> 
```

# c# - ASP.NET 按钮链接覆盖 URL 中的文件夹扩展名

> ID：13960762
> 
> 赞同：1
> 
> 时间：2012-12-19T20:38:47.877
> 
> 标签：c#, asp.net, jquery-mobile

我觉得问这个几乎是愚蠢的，因为我认为答案可能非常基本。但是，就这样吧。

我正在设计一个带有“掷骰子”按钮的网站，然后启用页面上的其他按钮（我的游戏中的类别），最终将使用这些按钮转到正确的类别。因此，实际上，[单击“滚动...”]，页面的 C# (Game.aspx.cs) 处理启用哪些按钮，显示/启用这些按钮以实现可点击性。

我的问题是这样的：

该页面是

```
[domain]/UncommonSense/Game.aspx 
```

但是在我单击“滚动...”按钮后，URL 变为

```
[domain]/Game.aspx#/Game.aspx 
```

这会导致`categories`按钮出现问题，因为我需要重定向到

```
[domain]/UncommonSense/Question.aspx 
```

但既然`Game.aspx#/`取而代之，`UncommonSense/`就失败了。

代码：

好的，这是我的 Game.aspx 文件中的代码。该按钮是“Label12”正下方列出的“ID=Roll”按钮。后面的代码现在实际上是一个空白函数，因此除了回发（显然）之外，它在 C# 端没有做任何事情。但是，当单击该按钮时，URL 来自：

[域]/UncommonSense/Game.aspx 到 [域]/Game.aspx#/Game.aspx

注意：我刚刚从根目录进行了测试，它做了同样的事情：

[域]/Game.aspx 变为 [域]/Game.aspx#/Game.aspx

也许这与表格有关？

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Game.aspx.cs" Inherits="Uncommon_Sense.Game" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Uncommon Sense</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript">
</script>
</head>
<body>
    <form id="form1" runat="server">
    <div data-role="page">
    <div data-role="header" data-theme="b">
        <h1><asp:Label ID="Label1" runat="server" Text="Uncommon Sense"></asp:Label></h1>
    </div>

    <div data-role="content">
        <h4><asp:Label ID="Label4" runat="server" Text="Game Statistics"></asp:Label></h4>
        <asp:Label ID="Label11" runat="server" data-mini="true" Text=""></asp:Label>
        <asp:Label ID="Label10" runat="server" data-mini="true" Text=""></asp:Label>

        <h4><asp:Label ID="Label2" runat="server" Text="Game Play"></asp:Label></h4>
<asp:Button ID="Roll" runat="server" Text="Roll Dice ..." data-mini="true" 
            onclick="Roll_Click" />
        <hr width="80%" />
    <div class="ui-grid-c">

    <div class="ui-block-a">
        <asp:Button ID="btnShortStuffChecked" runat="server" Text="Short Stuff" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnShortStuffNotChecked" runat="server" Text="Short Stuff" data-mini="true" 
            Enabled="False" Visible="False" onclick="btnShortStuffNotChecked_Click" /></div>
    <div class="ui-block-b">
        <asp:Button ID="btnWhoSaidChecked" runat="server" Text="Who Said?" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnWhoSaidNotChecked" runat="server" Text="Who Said?" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-c">
        <asp:Button ID="btnCommonQuipChecked" runat="server" Text="Common Quip" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnCommonQuipNotChecked" runat="server" Text="Common Quip" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-d">
        <asp:Button ID="btnRhymeTimeChecked" runat="server" Text="Rhyme Time" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnRhymeTimeNotChecked" runat="server" Text="Rhyme Time" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-a">
        <asp:Button ID="btnAnythingGoesChecked" runat="server" Text="Anything Goes" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnAnythingGoesNotChecked" runat="server" Text="Anything Goes" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-b">
        <asp:Button ID="btnDefineItChecked" runat="server" Text="Define It" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnDefineItNotChecked" runat="server" Text="Define It" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-c">
        <asp:Button ID="btnAllAbroadChecked" runat="server" Text="All Abroad" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnAllAbroadNotChecked" runat="server" Text="All Abroad" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    <div class="ui-block-d">
        <asp:Button ID="btnSpellItChecked" runat="server" Text="Spell It" data-mini="true" 
            data-icon="check" Enabled="False" Visible="False" />
        <asp:Button ID="btnSpellItNotChecked" runat="server" Text="Spell It" data-mini="true" 
            Enabled="False" Visible="False" /></div>
    </div>
        <h4><asp:Label ID="Label3" runat="server" Text="Settings"></asp:Label>
            <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/Question.aspx">HyperLink</asp:HyperLink>
        </h4>

    <label for="slider-0">Computer Difficulty:</label>
   <input type="range" name="slider" id="slider-0" value="2" min="1" max="4"  />
        <h3><asp:Label ID="Label5" runat="server" Text="Label"></asp:Label></h3>
        <asp:Button ID="ChoiceA" runat="server" Text="Button" onclick="ChoiceA_Click" />
        <asp:Button ID="Button2" runat="server" Text="Button" Visible="False" />
        <asp:Button ID="Button3" runat="server" Text="Button" Visible="False" />

</div>
</div>
    </form>
</body>
</html> 
```

更新：

答案是...... JQuery Mobile！

通过简单地删除对 JQuery Mobile 的引用，问题就解决了，所以显然这是他们的库中更改 URL 的东西。这很糟糕，因为我喜欢使用 JQuery Mobile。哦，好吧，我的评论现在将停止烦恼，因为我很感激他们所做的 99.9% 的帮助。但是，为了记录...

任何链接都将具有：

链接器.aspx

变成：

链接器#/linker.aspx

由于某些原因。

# android - 如何在所有应用程序中记录 Android 设备上的所有触摸和加速度计

> ID：13960765
> 
> 赞同：5
> 
> 时间：2012-12-19T20:38:56.483
> 
> 标签：android, user-input, capture, keylogger

我目前正在从事一个研究项目，该项目涉及人们在 Android 设备上玩游戏。我希望能够编写一个记录加速度计和触摸事件的安卓应用程序。我希望我的用户能够玩愤怒的小鸟等游戏，同时记录他们的触摸数据。

我知道这种类型的数据收集可以从应用程序内部进行，但是可以从应用程序外部进行吗？（也许通过在后台运行的应用程序？）

如果这不可能，是否有替代方案？（我相信理论上我可以进入 android OS 源代码并实现这一点？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:44:12.793

> 我知道这种类型的数据收集可以从应用程序内部进行，但是可以从应用程序外部进行吗？（也许通过在后台运行的应用程序？）

对于触摸事件，不，出于明显的隐私和安全原因。它*曾经*是可能的（研究术语“tapjacking”），但当前版本的 Android 最终阻止了这种行为。

对于加速度计事件，您可以记录它们，因为它们对于所有应用程序都是相同的。请记住，您的采样率可能与正在使用的应用程序的采样率不完全匹配。

> 我相信我理论上可以进入 android OS 源代码并实现这一点？

是的，尽管您需要将修改后的 Android 转换为 ROM 模块并将其安装在设备上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:00:46.687

不允许应用在受保护的设备（即尚未“root”的消费者手机/平板电脑）上执行此操作。

但是，根据您的需要，可以将开发工具连接到计算机。如果您可以在每次受控环境试验之前进行一些适度烦人的设置，我相信您可以在一些库存设备上通过使用 USB 电缆将 ADB 切换到 wifi 模式，然后通过无线 ADB 会话监控输入事件。看

[http://source.android.com/tech/input/getevent.html](http://source.android.com/tech/input/getevent.html)

该文档似乎暗示需要“su”（这很奇怪，因为非 root 用户无法使用官方的“su”），但是它在许多库存设备上都可以使用。

您可能还想运行 logcat 来确定前台是什么应用程序。

# android - TextView 不影响 seekBar 的 ProgressChanged

> ID：13960766
> 
> 赞同：0
> 
> 时间：2012-12-19T20:38:59.930
> 
> 标签：android

我有 SeekBar 的这个扩展：

```
package com.simplemathgame;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class SeekBarPlus extends SeekBar implements OnSeekBarChangeListener{
    private TextView numberOfDrills;

    public SeekBarPlus(Context context) {
        super(context);
    }

    public SeekBarPlus(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SeekBarPlus(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        // TODO Auto-generated method stub
        Log.w("SeekBarChanged", "change to" + progress);
        numberOfDrills.setText(String.valueOf(progress));
    }

    public void setTextView(TextView textView){
        numberOfDrills = textView;
        Log.w("SeekBar", "text to bar");
    }

} 
```

这是主要的活动代码：

```
package com.simplemathgame;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import com.simplemathgame.SeekBarPlus;

public class MainActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SeekBarPlus addSeekBar = (SeekBarPlus) findViewById(R.id.add_seek_bar);
        SeekBarPlus subSeekBar = (SeekBarPlus) findViewById(R.id.sub_seek_bar);
        SeekBarPlus mulSeekBar = (SeekBarPlus) findViewById(R.id.mul_seek_bar);
        SeekBarPlus divSeekBar = (SeekBarPlus) findViewById(R.id.div_seek_bar);

        TextView numberOfAddDrills = (TextView) findViewById(R.id.add_drills_number);
        TextView numberOfSubDrills = (TextView) findViewById(R.id.sub_drills_number);
        TextView numberOfMulDrills = (TextView) findViewById(R.id.mul_drills_number);
        TextView numberOfDivDrills = (TextView) findViewById(R.id.div_drills_number);

        addSeekBar.setTextView(numberOfAddDrills);
    subSeekBar.setTextView(numberOfSubDrills);
    mulSeekBar.setTextView(numberOfMulDrills);
    divSeekBar.setTextView(numberOfDivDrills);
    }   
} 
```

## 移动进度条后，没有任何反应，我拥有所有需要的元素（TextViews）。

## 我想：

我希望 SeekBarPlus 自动监听它的变化并按照我在 onProgressChanged 方法中编码的方式做出反应，换句话说，我希望在主活动中没有任何代码的情况下触发 onProgressChanged。

## 截屏

![在此处输入图像描述](../Images/6ef71b830826707bd163592d78e9e9c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:00:11.977

最简单的方法是直接在扩展类上实现 OnSeekBarChangeListener：

```
public class SeekBarPlus extends SeekBar implements OnSeekBarChangeListener{

public SeekBarPlus(Context context) {
        super(context);
        setOnSeekBarChangeListener(this);
    }

    public SeekBarPlus(Context context, AttributeSet attrs) {
        super(context, attrs);
        setOnSeekBarChangeListener(this);
    }

    public SeekBarPlus(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setOnSeekBarChangeListener(this);
    }

    ....
} 
```

否则不会调用任何 on* 方法。**注意：**这确实应该是一个[复合小部件](http://developer.android.com/guide/topics/ui/custom-components.html#compound)，您不需要传入 TextView。

您还需要执行 Sergio 建议的操作，而不是`int`直接使用该值：`numberOfDrills.setText("" + progress);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:15:17.057

阅读文档后：

> SeekBar 的客户端可以附加一个 SeekBar.OnSeekBarChangeListener 来通知用户的操作。

您需要在 Seekbar 上安装一个侦听器才能进行更新。

## 更新

这是可能的，但是您必须创建一个视图来容纳所有内容，然后以这种方式附加它。一旦你创建了这个，然后将自定义视图添加到你的布局文件中。然后根据需要从您的自定义视图中添加回调。当然，这意味着您在自定义视图类中添加了**侦听器。**

## 例子

你的课堂上会有这样的东西，**确保设置**视图的方向：

```
 package com.blah.my.package
    class MyCustomClass extends LinearLayout{

    CustomSeekbar v1 ...

    CustomSeekbar v2 ...

    CustomSeekbar v3 ...

    CustomSeekbar v4 ...

    CustomSeekbar v5 ...

    CustomSeekbar v6 ...

    ...

    Constructors and methods n' stuff...

    } 
```

一旦你有了这个，然后在你的布局 XML 中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.blah.my.package.MyCustomClass ... />
    ...
<LinearLayout> 
```

要了解更多信息：http: [//developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:43:17.547

那是因为您要发送一个*int*到`setText()`，所以它不起作用，因为它需要一个`String`. 将行更改为：

```
numberOfDrills.setText("" + progress); 
```

或者：

```
numberOfDrills.setText(String.valueOf(progress)); 
```

您可能也想在 MainActivity 中更改这 4 行，您将 4 个 TextViews 设置为同一个搜索栏：

```
/*addSeekBar.setTextView(numberOfAddDrills);
addSeekBar.setTextView(numberOfSubDrills);
addSeekBar.setTextView(numberOfMulDrills);
addSeekBar.setTextView(numberOfDivDrills);*/

addSeekBar.setTextView(numberOfAddDrills);
subSeekBar.setTextView(numberOfSubDrills);
mulSeekBar.setTextView(numberOfMulDrills);
divSeekBar.setTextView(numberOfDivDrills); 
```

# xslt - 没有出现带有 XSLT 的 CDATA

> ID：13960768
> 
> 赞同：1
> 
> 时间：2012-12-19T20:39:03.183
> 
> 标签：xslt, cdata

我有一个包含以下信息的 xml 文件：

```
 <infAdic>
   <infAdFisco>IMUNIDADE ICMS CONF. ART.155 DA CONST. FEDERAL-LUB.     DERIVADO</infAdFisco> 
    <infCpl>
      Preco sujeito alteracao. - O(s) produto(s) objeto(s) desta Nota Fiscal esta(ao)      adequadamente acondicionado(s) para suportar os riscosnormais de carregamento,     descarregamento, transbordo e transporte (Letra C do Item II, de Artigo 22, do Decreto N.96044/88) 
       <![CDATA[ <fabEntrega>Codi</fabEntrega>]]> 
        PO. number: Teste NFe 13122012 
    </infCpl>
    <obsCont xCampo="DOCNUM">
      <xTexto>0006703134</xTexto> 
    </obsCont>
    <obsCont xCampo="emailDestinatarioNFe">
      <xTexto>xxxxx@xxxx.com</xTexto> 
    </obsCont>
    <obsCont xCampo="idAplic">
    <xTexto>LUBES</xTexto> 
    </obsCont>
 </infAdic> 
```

但是当我使用下面的 xlst programa 执行上面的 xml 文件时

```
 <?xml version="1.0" encoding="UTF-8"?>
  <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:nfe="http://www.portalfiscal.inf.br/nfe">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no" cdata-section-elements="nfe:infCpl"/>
<xsl:template match="/nfe:enviNFe">
    <soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
        <soap12:Header>
            <nfeCabecMsg xmlns="http://www.portalfiscal.inf.br/nfe/wsdl/NfeRecepcao2">
                <cUF>
                    <xsl:value-of select="nfe:NFe[1]/nfe:infNFe/nfe:ide/nfe:cUF"/>
                </cUF>
                <versaoDados>
                    <xsl:value-of select="@versao"/>
                </versaoDados>
            </nfeCabecMsg>
        </soap12:Header>
        <soap12:Body>
            <nfeDadosMsg xmlns="http://www.portalfiscal.inf.br/nfe/wsdl/NfeRecepcao2">
                    <enviNFe xmlns="http://www.portalfiscal.inf.br/nfe">
                        <xsl:attribute name="versao"><xsl:value-of select="@versao"/></xsl:attribute>
                        <xsl:copy-of select="nfe:idLote"/>
                        <xsl:for-each select="nfe:NFe">
                            <xsl:text disable-output-escaping="yes"><![CDATA[<NFe xmlns="http://www.portalfiscal.inf.br/nfe">]]></xsl:text>
                            <xsl:copy-of select="*"/>
                            <xsl:text disable-output-escaping="yes"><![CDATA[</NFe>]]></xsl:text>
                        </xsl:for-each>
                    </enviNFe>
            </nfeDadosMsg>
        </soap12:Body>
    </soap12:Envelope>
 </xsl:template>
</xsl:stylesheet> 
```

我看不到带有 CDATA 信息的 infCpl 字段。这是我看到的结果：

```
 <infCpl>
     Preco sujeito alteracao. - O(s) produto(s) objeto(s) desta Nota Fiscal esta      (ao) adequadamente acondicionado(s) para suportar os riscosnormais de    carregamento,      descarregamento, transbordo e transporte (Letra C do Item II, de         Artigo     22, do Decreto N.96044/88) 
    <fabEntrega>Codi</fabEntrega> 
      PO. number: Teste NFe 13122012 
 </infCpl> 
```

你能帮我吗，因为我想要下面的结果？

```
 <infCpl>
    Preco sujeito alteracao. - O(s) produto(s) objeto(s) desta Nota Fiscal esta(ao)      adequadamente acondicionado(s) para suportar os riscosnormais de carregamento,     descarregamento, transbordo e transporte (Letra C do Item II, de Artigo     22, do Decreto N.96044/88) 
     <![CDATA[ <fabEntrega>Codi</fabEntrega>]]> 
  PO. number: Teste NFe 13122012 
 </infCpl> 
```

问候， 塞尔吉奥·萨洛芒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:43:19.543

如果您确定将`infCpl`只包含 CDATA 而不是混合内容（元素和 CDATA），您可以在您的`infCpl``cdata-section-element``xsl:output`

```
<xsl:output indent="yes" cdata-section-elements="infCpl"/> 
```

例子...

**XML 输入**

```
<infAdic>
    <infAdFisco>IMUNIDADE ICMS CONF. ART.155 DA CONST. FEDERAL-LUB.     DERIVADO</infAdFisco> 
    <infCpl>
        Preco &amp; &gt; &lt; &apos; &quot; sujeito alteracao. - O(s) produto(s) objeto(s) desta Nota Fiscal esta(ao)      adequadamente acondicionado(s) para suportar os riscosnormais de carregamento,     descarregamento, transbordo e transporte (Letra C do Item II, de Artigo 22, do Decreto N.96044/88) 
        <![CDATA[ <fabEntrega>Codi</fabEntrega>]]> 
        PO. number: Teste NFe 13122012 
    </infCpl>
    <obsCont xCampo="DOCNUM">
        <xTexto>0006703134</xTexto> 
    </obsCont>
    <obsCont xCampo="emailDestinatarioNFe">
        <xTexto>xxxxx@xxxx.com</xTexto> 
    </obsCont>
    <obsCont xCampo="idAplic">
        <xTexto>LUBES</xTexto> 
    </obsCont>
</infAdic> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" cdata-section-elements="infCpl"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<infAdic>
   <infAdFisco>IMUNIDADE ICMS CONF. ART.155 DA CONST. FEDERAL-LUB.     DERIVADO</infAdFisco>
   <infCpl><![CDATA[
        Preco & > < ' " sujeito alteracao. - O(s) produto(s) objeto(s) desta Nota Fiscal esta(ao)      adequadamente acondicionado(s) para suportar os riscosnormais de carregamento,     descarregamento, transbordo e transporte (Letra C do Item II, de Artigo 22, do Decreto N.96044/88) 
         <fabEntrega>Codi</fabEntrega> 
        PO. number: Teste NFe 13122012 
    ]]></infCpl>
   <obsCont xCampo="DOCNUM">
      <xTexto>0006703134</xTexto>
   </obsCont>
   <obsCont xCampo="emailDestinatarioNFe">
      <xTexto>xxxxx@xxxx.com</xTexto>
   </obsCont>
   <obsCont xCampo="idAplic">
      <xTexto>LUBES</xTexto>
   </obsCont>
</infAdic> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:24:33.233

XML 中的 CDATA 不是为携带信息而设计的。您不应该关心输入中的 CDATA 边界。如果您确实关心它们，那么您需要不同的工具 - XSLT 假定 CDATA 只是一种创作便利，而不是一种与文档接收者交流信息的方式。

但是，如果您在处理 CDATA 以这种方式被滥用的 XML 时遇到了困难，那么您可能会查看 Andrew Welch 的 LexEv 工具，该工具捆绑在 KernowForSaxon 中。

# c++ - 类型工厂

> ID：13960770
> 
> 赞同：3
> 
> 时间：2012-12-19T20:39:06.853
> 
> 标签：c++, design-patterns

为了创建算术求值器，我必须创建一个工厂，它接受一个字符串作为参数，并根据字符串返回一个不同类型的变量。

例子：

```
TypeFactory.make("int") return int i=0;
TypeFactory.make("float") return float f=0; 
```

我想到了许多不同类型的实现，但似乎没有一个可行：

我可以创建一个类 Type 及其子类 Float 和 Int，它们将由工厂返回，但是我怎样才能以通用方式获取类中的值（如 Type.getVal()，它不存在，所以我不能在我的程序的其余部分使用它）

我希望我的问题很清楚（对我来说甚至不是很清楚！）

有人有什么想法吗？谢谢

编辑：

当我意识到这个问题很难理解时，我将以更一般的方式解释我必须做什么。

目标是评估文件中的算术表达式。示例：

```
int a;
float b;
float c;
a=1;
b=6;
c=a+b; 
```

那是我的档案。我的程序将从这些表达式构造一棵树。为此，我使用 Composite 和 Visitor 模式。但是我的问题是，我必须先区分每种类型，以便在访问者进行操作时知道哪个变量属于哪个类型，并且能够得到正确类型的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:19:24.430

我的理解是您想要解析和评估类型化的算术表达式。

通常的策略（在编译器中使用）是构建一个抽象语法树，然后评估这棵树。您需要的模式是 [http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。

基本上，您将程序/表达式表示为节点树。Node 是一个抽象类，具有许多派生类型，它们代表每种类型的表达式。访问者模式允许您为每种类型的节点调用正确的访问者，从而决定要执行的正确代码。

```
struct Visitor
{
  void process(IntNode i) { int r = i.getInt(); ... }
  void process(FloatNode f) { float r = f.getFloat(); ... }
};

struct Node
{
    virtual void getProcessed(Visitor v);
};
struct IntNode : Node
{
    virtual void getProcessed(Visitor v) { v.process(*this); }
    int getInt() {...};
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:45:25.013

`boost::variant`如果您有一个有限的可能类型列表，请尝试。

假设您只支持`int`和`float`。然后您的数据将存储为`boost::variant<int,float>`.

要访问这些值，您可以使用`apply_visitor`. 添加两个值需要双重调度，这很棘手，但可行。您的访问者然后访问另一个参数，并基于这两种类型生成不同的结果。

# javascript - 等待多个事件

> ID：13960773
> 
> 赞同：14
> 
> 时间：2012-12-19T20:39:15.083
> 
> 标签：javascript, dom-events

我目前正在开发一个主要用于自学目的的应用程序，由于我还没有完全习惯 js，所以我可以为我的问题提供一些帮助：

在我的应用程序中，我使用了一个用于 DOM 操作、页面转换、ajax 调用等的 Javascript 库 (jqMobi)，并且我还使用 phonegap 来访问设备功能，例如地理位置。

当我启动我的应用程序时，我想获取设备的地理位置，向我的服务器发送一个 ajax (jsonp) 请求（包括设备的地理位置），它返回一个 JSON 对象数组，我将使用这些对象来建立一个列表.

在获得地理位置之前，我需要等待 phonegap 加载。在使用 jqMobi 进行 ajax 调用和处理响应之前，我还需要等待它加载。

所以我基本上必须听我听的事件

```
document.addEventListener("DOMContentLoaded",execute_this,false);  //jqMobi is now ready
document.addEventListener("deviceready", execure_sth, false); //Phonegap is now ready 
```

一旦这两个事件都被触发而不是之前，我如何执行一个函数？

如果我使用 jQuery，我会使用它的`$.Deferred`对象和它的 When ... Then 函数，但由于我无法访问这些，我正在寻找替代方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-19T20:44:34.417

乍一看，这样的事情肯定会奏效：

```
var executed_this = false, executed_sth = false;

function execute_this() {
  executed_this = true;
  combined_execution();
}

function execute_sth() {
  executed_sth = true;
  combined_execution();
}

function combined_execution() {
  if (executed_this && executed_sth) {
    // magic!
  }
} 
```

但不可扩展（如果您希望等待第三个事件怎么办？）。计数器会起作用：

```
var wait_on = 2;

function execute_this() {
  combined_execution();
}

function execute_sth() {
  combined_execution();
}

function combined_execution() {
  wait_on--;
  if (wait_on === 0) {
    // magic!
  }
} 
```

更具可扩展性，但假设事件只触发一次。无论哪种方式，这些都是可以控制您所要求的流控制类型的原语，而其他一切（在大多数情况下）都是对这两者的更高级别的抽象。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-07-09T00:30:47.793

你可以让 Promise 在事件触发时解决，并等待它们都准备好。

```
var dcl = new Promise(function(resolve) {
    document.addEventListener("DOMContentLoaded",resolve,false);
})
var deviceready = new Promise(function(resolve) {
    document.addEventListener("deviceready", resolve, false);
})

Promise.all([dcl, deviceready]).then(function() {
    //both are ready
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:44:21.920

尝试这个，

```
document.addEventListener("DOMContentLoaded",execute_this,false);
function execute_this(){
document.addEventListener("deviceready", execure_sth, false);
}
function execute_sth(){
//your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-11T14:11:05.237

`Promise.all`是要走的路，但为了好玩（以及懒惰地导入 polyfill），我想出了这个小解决方案：

```
 executedCount = 0

function onExecuted() {
    document.body.dispatchEvent(new Event('executedCountIs'+(++executedCount)));
}

function execute_this() {
    onExecuted()
}

function execute_sth() {
    onExecuted()
}

function main() {
    document.body.addEventListener('executedCountIs2', doStuffWhenBothAreReady)
    execute_this()
    execute_sth()
} 
```

我假设 Javascript 引擎在这里保护我免受竞争条件的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-07T14:41:05.553

将这里的一些答案合并到`waitForEvents(eventTarget, eventNames);`

用法：

```
waitForEvents(window, 'DOMContentLoaded,deviceready').then(function() {
    // do stuff
}); 
```

资源：

```
/**
 * Wait for multiple DOM events to fire
 * @param {object} eventTarget - element to listen for events on (default document)
 * @param {Array<string>|string} eventNames - array or csv string of event names
 * @returns {Promise<Array>} resolves with array of event objects
 */
function waitForEvents(eventTarget, eventNames) {

    eventTarget = eventTarget || document;
    eventNames = (!Array.isArray(eventNames)) ? String(eventNames).split(',') : eventNames;

    // clean event names
    eventNames = eventNames.map(function(item) {
        return String(item).trim();
    })
    .filter(function(item) {
        return item !== '';
    });

    var items = [];

    // create a promise to wait for each event
    var listeners = eventNames.map(function(eventName) {
        return new Promise(function(resolve) {
            eventTarget.addEventListener(eventName, function(e) {
                items.push(e);
                resolve();
            }, false);
        });
    });

    // resolve once all events have fired
    return Promise.all(listeners).then(function() {
        return Promise.resolve(items);
    });
} 
```

[GitHub 上](https://gist.github.com/john-doherty/ddbf13e625c52c7b8bb9645a39a3fb8b)的要点

# asp.net - ASP.NET C# 参数化查询不返回任何内容

> ID：13960779
> 
> 赞同：1
> 
> 时间：2012-12-19T20:39:40.293
> 
> 标签：asp.net, sql, parameterized

好的，我是参数化查询的菜鸟。我理解为什么你应该使用它们，但我找不到任何显示正确方式的资源或至少一个显示实际工作的正确方式的资源。

所以我的问题是关于我的代码是否正确。它编译并运行得很好，但它在 gridview 中绝对没有返回任何内容。

```
 protected void SearchButton_Click(object sender, EventArgs e)
{
    string searchBoxValue = SearchBox.Text;
    string columnNameValue = ColumnName.SelectedValue;
    columnNameValue.ToLower();

    SqlCommand searchCommand = new SqlCommand();
    searchCommand.Connection = connection;
    searchCommand.CommandText = "select firstname AS FirstName,lastname AS LastName, zipcode as ZipCode, phone AS Phone, email AS Email, cancersurvivor AS CancerSurvivor, ethnicity AS Ethnicity from registrants where @columnname = @searchterm";

    SqlParameter columnParam = new SqlParameter();
    columnParam.ParameterName = "@columnname";
    columnParam.Value = columnNameValue;

    SqlParameter searchBoxParam = new SqlParameter();
    searchBoxParam.ParameterName = "@searchterm";
    searchBoxParam.Value = searchBoxValue;

    searchCommand.Parameters.Add(columnParam);
    searchCommand.Parameters.Add(searchBoxParam);

    UpdateTable(searchCommand);

} 
```

UpdateTable 函数接受一个 SqlCommand 对象，然后使用一个 DataAdapter 对象来执行命令并填充一个 DataTable 对象，然后将 gridview 数据源设置为 datatable 对象并绑定它。

就像我之前说的那样，我真的在寻找正确的方法来做到这一点？我需要一个存储过程才能做到这一点吗？我对这一切以及为什么它不起作用感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:43:30.823

您不能参数化`@columnname`. 这需要是查询中的文字。

你的陈述

```
select 
 /* .... */
from registrants where @columnname = @searchterm 
```

`registrants`如果参数的值恰好相同或没有行，则将返回所有行。

它不会查看您是否有该名称的列并查看其中是否`@searchterm`存在。

要以安全的方式执行此操作，您需要检查是否`columnNameValue`与有效列名的白名单之一匹配（因为您必须知道该表中可能的列名）并将其连接到您的查询中。**不要连接未经验证的用户输入。**然后你就可以接受 SQL 注入了。

所以你可以实现它像

```
using System.Linq;

protected void SearchButton_Click(object sender, EventArgs e)
{
    string columnNameValue = ColumnName.SelectedValue.ToLower();

    var validColumnNames = new string[] { "firstname", "lastname", "zipcode" };

    if (!validColumnNames.Contains(columnNameValue))
    {
        throw new Exception("Unexpected column name " + columnNameValue);
    }

    /* ... code omitted */

    searchCommand.CommandText = "select firstname AS FirstName,lastname AS LastName, zipcode as ZipCode, phone AS Phone, email AS Email, cancersurvivor AS CancerSurvivor, ethnicity AS Ethnicity from registrants where " + columnNameValue + " = @searchterm";

    /* ... code omitted */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:46:00.883

参数化命令的目的是防止 sql 注入。您不能参数化列的名称，sql 会将其作为字符串。

```
protected void SearchButton_Click(object sender, EventArgs e)
{
    string searchBoxValue = SearchBox.Text;
    string columnNameValue = ColumnName.SelectedValue;
    columnNameValue.ToLower();

    SqlCommand searchCommand = new SqlCommand();
    searchCommand.Connection = connection;
    //Put the column name directly in the request, but use a parameter for the search value
    searchCommand.CommandText = "select firstname AS FirstName,lastname AS LastName, zipcode as ZipCode, phone AS Phone, email AS Email, cancersurvivor AS CancerSurvivor, ethnicity AS Ethnicity from registrants where " + columnNameValue  + " = @searchterm";

    /* No need for this part
    SqlParameter columnParam = new SqlParameter();
    columnParam.ParameterName = "@columnname";
    columnParam.Value = columnNameValue;
    */

    SqlParameter searchBoxParam = new SqlParameter();
    searchBoxParam.ParameterName = "@searchterm";
    searchBoxParam.Value = searchBoxValue;

    //searchCommand.Parameters.Add(columnParam);
    searchCommand.Parameters.Add(searchBoxParam);

    UpdateTable(searchCommand);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:45:08.060

您的问题在于您如何尝试将列名作为参数。您需要整体更改查询以反映您要过滤的列。尝试以下操作：

```
protected void SearchButton_Click(object sender, EventArgs e)
{
    string searchBoxValue = SearchBox.Text;
    string columnNameValue = ColumnName.SelectedValue;
    columnNameValue.ToLower();

    SqlCommand searchCommand = new SqlCommand();
    searchCommand.Connection = connection;
    searchCommand.CommandText = String.Format("select firstname AS FirstName,lastname AS LastName, zipcode as ZipCode, phone AS Phone, email AS Email, cancersurvivor AS CancerSurvivor, ethnicity AS Ethnicity from registrants where {0} = @searchterm",columnNameValue);

    SqlParameter searchBoxParam = new SqlParameter();
    searchBoxParam.ParameterName = "@searchterm";
    searchBoxParam.Value = searchBoxValue;

    searchCommand.Parameters.Add(columnParam);
    searchCommand.Parameters.Add(searchBoxParam);

    UpdateTable(searchCommand);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T20:52:44.973

如果你想让它工作，你必须动态构建 SQL 语句并在 proc 内使用 sp_executesql 执行，如下所示：

```
DECLARE @IntVariable int;
DECLARE @SQLString nvarchar(500);
DECLARE @ParmDefinition nvarchar(500);

/* Build the SQL string one time.*/
SET @SQLString =
     N'SELECT BusinessEntityID, NationalIDNumber, JobTitle, LoginID
       FROM AdventureWorks2012.HumanResources.Employee 
       WHERE BusinessEntityID = @BusinessEntityID';
SET @ParmDefinition = N'@BusinessEntityID tinyint';
/* Execute the string with the first parameter value. */
SET @IntVariable = 197;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @BusinessEntityID = @IntVariable;
/* Execute the same string with the second parameter value. */
SET @IntVariable = 109;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @BusinessEntityID = @IntVariable; 
```

您仍然有使用参数化查询的好处，并且不会将自己暴露在 SQL 注入中。

来源[在这里](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。另一个**非常有用**的链接[是这个](http://blogs.msdn.com/b/raulga/archive/2007/01/04/dynamic-sql-sql-injection.aspx)。

# backbone.js - 在模型中访问和维护一个固定的集合数组

> ID：13960780
> 
> 赞同：0
> 
> 时间：2012-12-19T20:39:44.303
> 
> 标签：backbone.js

我试图了解如何在我的 Backbone 模型中处理集合实例的数量。将有一个主模型，该模型由多个集合实例组成。集合本身是一些其他模型的组。

*   A型
    *   集合 B
        *   C型
        *   C型
    *   集合 B
        *   C型
        *   C型
        *   C型
    *   集合 B
        *   C型
    *   集合 B
        *   `might even be empty but will only add more Model C's`

这是非工作代码...

# 应用程序.js

```
(function() {
  var App = {};
  window.App = App;

  var template = function(name) {
    return Mustache.compile($('#'+name+'-template').html());
  };

  App.World = Backbone.Model.extend({
    initialize: function() {
      var this.continent = new Array(); 
      this.continent[0] = new App.Continent(0);
      this.continent[1] = new App.Continent(1);
      this.continent[2] = new App.Continent(2);
      this.continent[3] = new App.Continent(3);
      this.continent[4] = new App.Continent(4);
      this.continent[5] = new App.Continent(5);
    }
  });

  App.Continent = Backbone.Collection.extend({
    initialize: function(id) {
      switch (id) {
        case 0:
          this.id = "Europe";
        case 1:
          this.id = "Asia";
        case 2:
          this.id = "Africa";
        case 3:
          this.id = "Australia";
        case 4:
          this.id = "South America";
        default:
          this.id = "North America";
      }
    }
  });

  App.Index = Backbone.View.extend({
    template: template('index'),
    initialize: function() {
      this.world = new App.World();
      this.world.on('all', this.render, this);
    },
    render: function() {
      this.$el.html(this.template(this));
      return this;
    },
    bigland: function() {
      return this.world;
    },
  });

  App.Router = Backbone.Router.extend({
    initialize: function(options) {
      this.el = options.el
    },
    routes: {
      "": "index"
    },
    index: function() {
      var index = new App.Index();
      this.el.empty();
      this.el.append(index.render().el);
    }
  });

  App.boot = function(container) {
    container = $(container);
    var router = new App.Router({el: container})
    Backbone.history.start();
  }
})() 
```

# 索引.html

```
<!DOCTYPE html>
<html>
  <head></head>
  <body>
  <h1>Hello world</h1>
  <div id='app'>
    Loading...
  </div>

    <script type="text/x-mustache-template" id="index-template">

      <ul>
        {{#bigland}}
        <li>Hello {{.continent}}</li>
        {{/bigland}}
      </ul>

    </script>

    <script src="jquery.js"></script>
    <script src="underscore.js"></script>
    <script src="backbone.js"></script>
    <script src="mustache.js"></script>
    <script src="app.js"></script>    
    <script>$(function() { App.boot($('#app')); });</script>
  </body>
</html> 
```

# 我试图从这个演示中获得的输出

*   你好欧洲
*   你好亚洲
*   你好非洲
*   你好澳大利亚
*   你好南美
*   你好北美

# 问题：

1.  如何使用具有多个集合实例的模型使此代码工作。
2.  有没有更好的方法来构建这个模型？我愿意为嵌套模型使用主干插件，但希望看到一些工作代码。
3.  下一个级别的实验是使集合 B 的某些实例能够专门化和利用不同的业务规则。关于如何组织这种混乱的任何想法，比如在哪里放置辅助方法？关于该逻辑所在位置的任何最佳实践，我可以将它放在主模型 A、集合 B 内或其他地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:55:03.183

JS Bin 链接：

[http://jsbin.com/ejohom/1/edit](http://jsbin.com/ejohom/1/edit)

我只是探索了一种不同的方式来构建你的模型和集合。我创建了一个 testData 结构，它表示您在初始化时如何加载这些数据。

您还将在该系列中看到大陆查找器功能。

# winforms - Devexpress PopupContainerEdit 弹出窗口始终打开

> ID：13960782
> 
> 赞同：2
> 
> 时间：2012-12-19T20:39:50.730
> 
> 标签：winforms, c#-3.0, devexpress

我正在使用 winform DevExpress 库。现在需要基于 PopupContainerEdit 创建一个控件，但是该控件必须具有一些行为，例如当它获得焦点时，弹出窗口打开，当失去焦点时弹出窗口关闭。

这是我正在使用的代码，但是在获得焦点后弹出窗口消失了。

```
public class HelpEdit : PopupContainerEdit {
    private PopupContainerControl _container;
    private GridControl _gridControl;
    private GridView _gridView;

    [DefaultValue("")]
    [DXCategory("Data")]
    [AttributeProvider(typeof(IListSource))]
    public object Datasource {
        get { return _gridControl.DataSource; }
        set { _gridControl.DataSource = value; }
    }

    public HelpEdit() : base() {
        _container = new PopupContainerControl();
        this.Properties.TextEditStyle = DevExpress.XtraEditors.Controls.TextEditStyles.Standard;
        this._gridControl = new GridControl();
        this._gridControl.Dock = DockStyle.Fill;
        this._gridView = new GridView(_gridControl);
        _container.Controls.Add(_gridControl);
        _container.Size = new Size(this.Width, 250);

        this.Properties.PopupControl = _container;
        this.Properties.PopupControl.Size = new Size(this.Width, 250);
    }
    protected override void OnGotFocus(EventArgs e) {
        base.OnGotFocus(e);
        this.ShowPopup();
    }
    protected override void OnLostFocus(EventArgs e) {
        base.OnLostFocus(e);
        this.ClosePopup();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:51:25.530

你的弹出窗口消失了，因为一旦弹出容器 control( `_container`) 获得焦点，它就会被你的代码关闭。您不应该在 OnLostFocus() 覆盖中关闭弹出窗口，因为 is 的`base.OnLostFocus`方法`PopupContainerEdit`已经包含用于关闭弹出窗口的正确代码。或者使用以下代码有条件地关闭弹出窗口：

```
protected override void OnLostFocus(EventArgs e) {
    if(IsPopupOpen && !EditorContainsFocus) 
        ClosePopup(PopupCloseMode.Immediate);
    base.OnLostFocus(e);
} 
```

# objective-c - Cocos2d：CCMenu Item 恢复应用后触摸不响应

> ID：13960783
> 
> 赞同：1
> 
> 时间：2012-12-19T20:39:59.630
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个暂停按钮，`CCMenuItem`当我触摸它时，应用程序会进入菜单。我将游戏场景设置为菜单场景上的静态变量，这样当我恢复游戏时，我可以恢复我当前的游戏。

当我按下恢复按钮时，我会重新安排游戏场景的更新，并用静态游戏场景替换场景。暂停按钮位于游戏场景拥有的图层上。

当游戏继续时，暂停按钮在那里，但**对我的触摸没有反应**。我尝试使用 onEnter 来做 resumeSchedulerAndActions 但没有。

我想出了一个感觉很笨拙的解决方案，即`onEnter`在`onExit`.

我错过了什么吗？有没有办法让我的菜单再次响应触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:53:14.803

您可以使用`popScene`来`CCDirector`从游戏场景中弹出菜单场景。您可能不必自己安排时间。为此，暂停按钮必须首先将场景推送到场景堆栈上，而不是使用`replaceScene`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T23:02:56.077

你知道什么是hacky吗？将场景保存在静态变量中。如果你替换一个场景，你应该放手它。Cocos2d 不能正确处理多次调用 replaceScene 与同一对象。无论是这个，还是覆盖 onEnter 而不调用 [super onEnter] 都会导致输入问题。

如果你想继续游戏，要么

*   不要替换场景
*   推/弹出另一个场景
*   编写代码来保存场景的状态并恢复它

# javascript - .hide 不起作用

> ID：13960787
> 
> 赞同：0
> 
> 时间：2012-12-19T20:40:07.367
> 
> 标签：javascript, jquery

我正在做一个危险游戏。当我单击一个 div 时，我想对它做一些影响。但是，我什至无法让一个简单的 .hide 工作。有任何想法吗？

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Jeopardy</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap-responsive.css" rel="stylesheet">
        <link href="css/bootstrap.css" rel="stylesheet">        
        <link href="css/customStyles.css" rel="stylesheet">     
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="js/flip.js"></script>
    </head>
    <body>
        <div class ="container"> 
            <div class="row">   
                <div class="prizeAmount">                               
                    <div class="span2">     
                        <h3 id="test">100</h3>                          
                    </div>
                    <div class="span2">     
                        <h3>100</h3>                                
                    </div>  
                    <div class="span2">     
                        <h3>100</h3>                                
                    </div>
                        <div class="span2">     
                            <h3>100</h3>                            
                    </div>
                    <div class="span2">     
                        <h3>100</h3>                        
                    </div>  
                    <div class="span2">     
                        <h3>100</h3>    
                    </div>  
                </div>
            </div>
        </div><!--close container-->
    </body>
</html> 
```

javascript

```
$(function() {    
    $('#span2').click(function() {
        $(this).hide(400);
        /*$('#span2').hide(400);  <--tried this also */
    });
}); 
```

我以前使用 jquery 为网站上的导航设置动画。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:41:06.583

您的

```
$('#span2') // id selector 
```

应该

```
$('.span2') // class selector 
```

既然是课

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:43:30.310

您的问题是您使用的`#`是[id](http://api.jquery.com/id-selector/)选择器的 hash 而不是*dot的*[类](http://api.jquery.com/class-selector/)选择器。 *`.`*

 *尝试

```
$(function() {    
    $('.span2').click(function() {
        $(this).hide(400);
     });
 }); 
```

您可能想在官方[文档中阅读更多关于不同 jQuery 选择器的信息](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:41:53.200

您没有任何 ID 为“span2”的元素，它们都是 CLASS=span2。

试试这个：

```
$(function() {    
 $('.span2').click(function() {
  $(this).hide(400);
 });
}); 
```

注意：如果您不希望这种行为，这将影响具有类“span2”的所有元素，然后对单个元素使用 ID="span2"，并为每个元素使用唯一名称。*

# php - Symfony 2 登录验证

> ID：13960789
> 
> 赞同：4
> 
> 时间：2012-12-19T20:40:14.527
> 
> 标签：php, forms, validation, symfony

Symfony 2 文档向您展示了如何基于实体创建表单并在提交时在控制器中对其进行验证，以确保某些字段已在服务器端填充。

但是，在查看身份验证文档时，它使用了一种非常不同的方法来创建和处理表单，您只需在没有控制器声明的情况下为 check_login 定义一个路由，因为它由安全包处理。

因为登录/身份验证检查现在由安全包处理，所以您无法在控制器中实现任何验证，如表单验证文档所示。

如果没有 HTML5 required 标签，您可以使用空输入向登录表单发送垃圾邮件。

如何根据此处的 Symfony 身份验证文档为电子邮件和密码字段添加表单验证：http: [//symfony.com/doc/current/book/security.html#book-security-encoding-user-password](http://symfony.com/doc/current/book/security.html#book-security-encoding-user-password)

此外，提交不正确凭据时的错误也很简单，显示“凭据无效”，我该如何自定义此错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:44:24.997

有 Symfony2 文档部分正好涵盖了您的问题。一个是关于实际的[登录表单](http://symfony.com/doc/current/book/security.html#book-security-form-login)，另一个是关于[如何自定义它](http://symfony.com/doc/current/cookbook/security/form_login.html)。

验证完全在 Symfony2 的站点上进行。你不必担心这一点。您只需要创建一个控制器来显示登录表单和可能的错误。此外，[实体提供者](http://symfony.com/doc/current/cookbook/security/entity_provider.html)可用于使用动态创建的用户（存储在数据库中）。

最后，您可以通过使用[翻译](https://stackoverflow.com/questions/9201849/customize-authentication-login-symfony2-messages)来自定义错误消息。

# xml - 涉及属性的 XSLT 排序和分组

> ID：13960791
> 
> 赞同：5
> 
> 时间：2012-12-19T20:40:30.563
> 
> 标签：xml, sorting, xslt, grouping

我有一个类似于此示例的 XML 文件：

```
<Data>
  <defect>
    <record-id>1</record-id>
    <custom-field-value field-name="Release Version" field-value="1.0"/>
    <custom-field-value field-name="Other info" field-value=""/>
    <custom-field-value field-name="More info" field-value="blah"/>

    <event include-in-release-notes="yes">
      <notes>This is a release note to include</notes>
    </event>

    <event include-in-release-notes="no">
      <notes>This is not a release note</notes>
    </event>
  </defect>

  <defect>
    <record-id>2</record-id>
    <custom-field-value field-name="Release Version" field-value="1.5"/>
    <custom-field-value field-name="Other info" field-value=""/>
    <custom-field-value field-name="More info" field-value="blah"/>

    <event include-in-release-notes="yes">
      <notes>This is a release note to include for 1.5</notes>
    </event>

    <event include-in-release-notes="no">
      <notes>This is not a release note</notes>
    </event>
  </defect>
</Data> 
```

我要做的是创建一个发行说明文档，该文档首先对 @field-name 等于“发行版本”的元素的所有唯一 @field-value 值进行排序和查找。可能还有其他与发布版本无关的元素。这是我正在寻找的输出：

```
Release Version: 1.0
  o This is a release note to include
Release Version: 1.5
  o This is a release note to include for 1.5
Release Verison: x.x
  o one release note
  o another release note 
```

我已经阅读了很多关于“Muenchian”方法以及排序和分组的内容，但我正在努力解决我需要比较的属性这一事实。我读过的大多数示例都讨论了对元素进行排序，这似乎更直观。而且我需要找到多个属性并对其进行排序，好吧，我的脑袋刚刚开始爆炸。

我想出了样式表，它将为我提供所有具有“发布版本”作为文本的元素，使用：

```
<xsl:key name="keyMajorReleases" match="custom-field-value" use="@field-name"/>
<xsl:for-each select=key('keyMajorReleases', 'Release Version')">
  <xsl:sort order="descending" data-type="text" select="@field-value"/> 
```

但这给了我所有的东西，而不仅仅是独特的。然后我还没有弄清楚如何获取具有我需要打印的发行说明的“事件”元素。

当我尝试使用“generate-id()”时，我只得到一个结果，因为我猜只有一个具有我的值的唯一条目可以找到：

```
<xsl:for-each select="//custom-field-value[generate-id(.)=generate-id(key('keyMajorReleases', 'Release Version')[1])]"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:26:37.520

使用您当前的密钥...

```
<xsl:key name="keyMajorReleases" match="custom-field-value" use="@field-name"/> 
```

您将按字段名称对**自定义字段值**元素进行分组，如果您想查找不同的字段名称值，您可以这样做。但是，您希望按“发布版本”的字段值属性进行分组。这意味着您需要像这样定义您的密钥：

```
<xsl:key name="keyMajorReleases" match="custom-field-value[@field-name='Release Version']" use="@field-value"/> 
```

使用此键，您仅匹配字段名称为“发布版本”的**自定义字段值。**然后，您可以使用它来获取不同的字段值属性，如下所示：

```
<xsl:apply-templates 
     select="defect/custom-field-value[@field-name='Release Version']
         [generate-id()=generate-id(key('keyMajorReleases', @field-value)[1])]" /> 
```

然后要获取给定发行版本的发行说明，然后您可以再次使用该密钥

```
<xsl:apply-templates 
   select="key('keyMajorReleases', @field-value)
        /following-sibling::event[@include-in-release-notes='yes']" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="keyMajorReleases" match="custom-field-value[@field-name='Release Version']" use="@field-value"/>
   <xsl:template match="/Data">
      <ul>
         <xsl:apply-templates select="defect/custom-field-value[@field-name='Release Version'][generate-id()=generate-id(key('keyMajorReleases', @field-value)[1])]"/>
      </ul>
   </xsl:template>

   <xsl:template match="custom-field-value">
      <li>Release Version: <xsl:value-of select="@field-value"/>
         <ul>
            <xsl:apply-templates select="key('keyMajorReleases', @field-value)/following-sibling::event[@include-in-release-notes='yes']"/>
         </ul></li>
   </xsl:template>

   <xsl:template match="event">
      <li>
         <xsl:value-of select="notes"/>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<ul>
   <li>Release Version: 1.0
       <ul>
          <li>This is a release note to include</li>
       </ul>
   </li>
   <li>Release Version: 1.5
      <ul>
         <li>This is a release note to include for 1.5</li>
      </ul>
   </li>
</ul> 
```

# jquery - Firefox 扩展中的 jQuery

> ID：13960797
> 
> 赞同：2
> 
> 时间：2012-12-19T20:40:59.260
> 
> 标签：jquery, firefox-addon

我正在创建一个 Firefox 扩展。我在 xul 文件中包含 jquery 作为

```
 <script type="application/x-javascript" src="libs/project/libs/jquery.js" /> 
```

其次是其他一些使用 jquery 的文件

```
 <script type="application/x-javascript" src="sample.js" />
    <script type="application/x-javascript" src="sample2.js" />
                     .
                     .
                     . 
```

但是在这里我遇到了一些错误，例如

*   ReferenceError：未定义 jQuery

*   类型错误：a 未定义

*   ReferenceError: $ 未定义

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:41:14.240

可能的原因是这个错误： [http ://bugs.jquery.com/ticket/12357](http://bugs.jquery.com/ticket/12357)

XUL RUNNER 应用程序无法解析 JQUERY 1.8.0

您可以通过设置一个简单的 xul 运行器窗口并包含 jQuery 来测试这一点，然后提醒 typeof jQuery 或 $ 这将导致未定义的响应。

如果您将 jQuery 代码粘贴到 XUL 主窗口中的脚本标记中，您将能够看到在此构建中发布的所有各种解析问题。

# qt - 添加到 QListWidget 时的 SIGSEGV

> ID：13960798
> 
> 赞同：0
> 
> 时间：2012-12-19T20:41:03.447
> 
> 标签：qt, qlistwidget

我在向 QListWidget 添加元素时遇到问题。我已经用 QtDesigner 构建了一些框架，然后，我想在代码列表中添加一些元素。即使我写：

```
QListWidgetItem* i = new QListWidgetItem("text");
Q_ASSERT(stepsList);
qDebug() << "before";
stepsList->addItem(i);
qDebug() << "after"; 
```

它只打印“之前”并与 SIGSEGV 一起崩溃。另外，我设法得到这样的错误消息：

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff6f2a4a4 in QListWidget::count() const ()
from /usr/lib/x86_64-linux-gnu/libQtGui.so.4 
```

是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T09:49:59.227

Well, acceptation is needed so I'll write what was wrong:

I needed to call `setupUi()` first, in order to initialize the `stepsList` as @Timo Geusch wrote.

Solved.

# navigation - 列表项中的间距不一致和列表不响应边距/填充？

> ID：13960799
> 
> 赞同：1
> 
> 时间：2012-12-19T20:41:03.570
> 
> 标签：navigation, css-float, alignment, margin

好的，当涉及到 HTML 时，我是个菜鸟，但我遇到了一些问题。

我试图让我的链接在一个体面的地方。这是一个细分。我已经定义了一个 960px 宽的容器，并将其放入我的标题中。在该容器内，我有一个图像，它是我的徽标和一个无序列表，徽标与它与页面左侧边缘之间的一点空间完美对齐，但是列表向右对齐无论我如何更改右边距/填充，直到页面边缘。

```
<div id="header">
    <div class="container">
    <img src="images/headerlogo.jpg" height="240" width="381" />
        <ul id="nav">
            <li><a href="index.html"><b>.home</b></a></li>
            <li><a href="blog.html"><b>.blog</b></a><li>
            <li><a href="portfolio.html"><b>.portfolio</b></a></li>
        </ul>
    </div>
</div> 
```

这是伴随元素的 CSS。

```
/* Common Classes */
.container {width:960px;margin:0 auto;}

/* Header */
#header {
height:240px;
background:url(../images/headerbg.jpg) repeat-x; margin:0;
    }
#nav {list-style:none; margin:190px 0 0 0; padding:0; float:right;}
#nav li {float:left; height:45px; text-align: center; padding:7px 1px 5px 5px; margin:0 0 5px 5px;}
#nav li a {color:#a4b2b7; font-family:arial; font-size:25pt; letter-spacing:-2px; text-decoration:none;}
#nav li a:hover {color:#2f738c;} 
```

编辑：另外，第三个列表项的间距比前两个更远......好像它在该单个项目的左侧有一个边距......为什么？>_<

我完全错过了什么吗？还有什么你需要的就告诉我。

任何帮助表示赞赏，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:52:11.053

您没有关闭第二个`<li>`项目，这就是为什么您在第二个和第三个元素之间有一个空格。应该是： `<li><a href="blog.html"><b>.blog</b></a></li>`。

但是当我给出`margin-right: 10px;`for时，`#nav`我从右边得到 10px 的空间......

# android - 在哪里写入文本文件以及如何为 sd 卡设置它

> ID：13960805
> 
> 赞同：1
> 
> 时间：2012-12-19T20:41:26.697
> 
> 标签：android, input, output, android-file

我知道这是一个受欢迎的问题，但我查看了所有其他回复，但似乎没有一个有效。我想要做的是将一些代码写入文本文件。我的第一个问题：有没有办法在不向控制台写入代码的情况下查看该文本文件？其次，我不知道它在我的手机中的哪个位置，我想看到它以帮助解决问题，所以如果你也知道如何做到这一点，那就太好了。因此，现在我将为您概述正在发生的事情。当我启动我的程序时，它会检查文件是否存在，如果不存在，它会从我的资产文件夹中读取一个文件并将该信息复制并将其发送到一个文件到 SD 卡中。如果它退出，它会从 sd 卡中读取信息。接下来，如果我按下一个按钮并更改数字并再次将其打印到我的 SD 卡，然后我使用任务管理器将其关闭，然后当我回来时，原始信息就在这里。我觉得它无法找到我的 SD 卡位置。到目前为止我已经使用过。

```
File outfilepath = Environment.getExternalStorageDirectory();
String FileName = "ExSettings.txt" ;
File outfile = new File(outfilepath.getAbsolutePath()+"/TimeLeft/"+FileName);

File outfilepath = Environment.getExternalStorageDirectory();
String FileName = "ExSettings.txt" ;
File outfile = new File(outfilepath, FileName); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:00:51.847

这是我编写的一个函数，它将接收一个列表数组并逐行写入文件。

它将使用 fileName 中的路径在`myfolder`SDCard 的根目录中创建一个名为的新文件夹，里面将是您的`newtextfile.txt`.

```
List<String> File_Contents = new ArrayList<String>();

File_Contents.add("This is line one");
File_Contents.add("This is line two");

File f = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/myfolder/newtextfile.txt");
f.mkDirs();

try {
    BufferedWriter out = new BufferedWriter(new FileWriter(f));
    for (int x = 0; x < File_Contents.size(); x++) {
        out.write(File_Contents.get(x));
        out.write(System.getProperty("line.separator"));
    }
    out.close();
    return true;
} catch (Exception e) {
    return false;
} 
```

# google-app-engine - dev/urandom - strerror：文件不可访问

> ID：13960806
> 
> 赞同：3
> 
> 时间：2012-12-19T20:41:27.750
> 
> 标签：google-app-engine, google-cloud-storage

我正在使用 google app engine 创建一个访问预测 api 的应用程序。当我在网站上更新它时，我可以运行该应用程序，但是我无法在 localhost:8080 上运行它。

我是一个绝对的菜鸟，非常感谢任何帮助。

**这是错误：**

```
<type 'exceptions.IOError'>: [Errno 13] file not accessible: '/dev/urandom'
  args = (13, 'file not accessible')
  errno = 13
  filename = '/dev/urandom'
  message = ''
  strerror = 'file not accessible' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:46:20.513

你如何访问/dev/urandom？该文件在生产中不可访问，并且不应在 dev_appserver 中访问。如果要生成随机数据，请使用 os.urandom() 它将在本地和生产环境中正常工作。

# java - Java、JVM 和操作系统以及交换

> ID：13960807
> 
> 赞同：2
> 
> 时间：2012-12-19T20:41:31.387
> 
> 标签：java, jvm, solaris

我想知道我是否启动了一个java虚拟机：

```
-Xms2048m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=256m 
-XX:+UseParallelGC -XX:ParallelGCThreads=4 -XX:+UseParallelOldGC 
-XX:LargePageSizeInBytes=4m -XX:-BindGCTaskThreadsToCPUs 
```

所以我用 -Xms 等于 -Xmx 启动服务器，我的 java OS 进程将永远“持有”来自操作系统的内存？所以这个 JVM 将有 2GB 的空间，如果操作系统有它，那么它将允许进程启动，否则不会。

JVM启动后是否有可能使用2GB的操作系统的交换内存？

（因此，如果它最初在不使用交换内存的情况下启动）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:45:52.033

这将在启动时使用大约 2400 MB 的虚拟内存。它从不归还虚拟内存。它可以归还主内存，但很少这样做。

> JVM启动后是否有可能使用2GB的操作系统的交换内存？

技术上是的，但实际上这是一个非常糟糕的主意。GC 执行时假定它可以随机访问所有内存。如果您的 JVM 开始交换，它可能会停止很长一段时间（很多分钟），甚至会挂起机器。

鉴于您可以以大约 200 美元的价格购买 32 GB，因此购买足够的内存以满足您的需求通​​常更简单。

# java - 将居住时间添加到我的缓存中

> ID：13960809
> 
> 赞同：1
> 
> 时间：2012-12-19T20:41:37.643
> 
> 标签：java, gemfire, cache-expiration, spring-data-gemfire

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:gfe="http://www.springframework.org/schema/gemfire"
    xsi:schemaLocation="http://www.springframework.org/schema/gemfire http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <util:properties id="gemfire-props">
        <prop key="log-level">warning</prop>
    </util:properties>

    <gfe:cache properties-ref="gemfire-props" />

    <gfe:local-region id="LocalRegion1">
        <gfe:cache-listener>
            <bean
                class="com.mycompany.util.LoggingCacheListener" />
        </gfe:cache-listener>
    </gfe:local-region>

</beans> 
```

我们如何为 LocalRegion1 或上面定义的缓存添加生存时间？我想每 24 小时完全刷新一次缓存并从服务器获取新数据。我使用本地缓存，它从服务器获取一些数据并在本地存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:11:58.583

您可以通过添加 region-ttl 节点来设置区域的生存时间，如下所述：

```
<gfe:local-region id="LocalRegion1">
    <gfe:region-ttl timeout="${local.region1.ttl}" action="DESTROY"/>
    <gfe:cache-listener>
        <bean
            class="com.mycompany.util.LoggingCacheListener" />
    </gfe:cache-listener>
</gfe:local-region> 
```

在此示例中，您可以使用名为 的属性以秒为单位设置生存时间`local.region1.ttl`。当然，您始终可以重命名该属性或使用文字代替（60 秒）：

```
<gfe:region-ttl timeout="60" action="DESTROY"/> 
```

请注意，每次您向该区域更新/添加条目时，都会重置计时器。

# c# - MemoryStream 到虚拟文件

> ID：13960811
> 
> 赞同：2
> 
> 时间：2012-12-19T20:41:48.047
> 
> 标签：c#, openxml-sdk

我有以下内容：

```
using(var memoryStream = new MemoryStream())
{
   gc.CreatePackage(memoryStream);
} 
```

MemoryStream 吐出一个 excel 文件。从 memoryStream 中，我如何实际显示生成的文件。请注意，我不想将文件实际保存到磁盘，而只是显示它。

到目前为止，我有以下但似乎不起作用：

```
using (var memoryStream = new MemoryStream())
{
    gc.CreatePackage(memoryStream);

    using (var fileStream = File.OpenWrite("Test.xlsx"))
    {
        memoryStream.WriteTo(fileStream);
    }                
} 
```

但不确定我的方向是否正确。我收到一条错误消息：

> System.Web.Mvc.Controller.File(byte[], string)' 是一个“方法”，在给定的上下文中无效

我不确定我是否朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:10:33.653

假设您使用的是 ASP.NET MVC，您可能需要[File response helper](http://msdn.microsoft.com/en-us/library/dd493017%28v=vs.98%29.aspx)：

```
using (var memoryStream = new MemoryStream())
{
    gc.CreatePackage(memoryStream);
    memoryStream.Seek(0, SeekOrigin.Begin);
    return File(memoryStream, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
} 
```

如果您想让文件源实际出现在浏览器中，您也可以谎报 MIME 类型并`text/plain`改用它。浏览器很可能会将其呈现为纯文本。

您还可以添加第三个参数，`File`以指定下载文件应显示给最终用户的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:12:02.267

由于您发布的错误似乎表明您正在尝试从 MVC 控制器返回生成的文件，我认为这可能是您正在寻找的。

```
public ActionResult MyAction()
{
    using (var memoryStream = new MemoryStream())
    {
        gc.CreatePackage(memoryStream);
        //Make sure the position of the stream is at 0
        memoryStream.Position = 0;
        //Return the contents of the stream with the appropriate MIME type
        return File(memoryStream, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:26:41.020

您可以使用 MemoryMappedFile 创建虚拟文件。

示例代码：

写：

```
 using (var mmf = MemoryMappedFile.CreateNew("MappedFileName", size, MemoryMappedFileAccess.ReadWriteExecute))
   {
       using (MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor())
       {
            accessor.Write(Write your data to mapped file);
       }
    } 
```

读：

```
 using (var mmf = MemoryMappedFile.OpenExisting("MappedFileName"))
    {
        using (MemoryMappedViewAccessor accessor = mmf.CreateViewAccessor())
        {
            accessor.Read......
        }
    } 
```

# asp.net - 在asp.net注册控件中注册后防止用户登录

> ID：13960818
> 
> 赞同：3
> 
> 时间：2012-12-19T20:42:15.633
> 
> 标签：asp.net

我正在使用 ASP.Net 的创建用户向导控件。

我希望一旦创建用户，该用户就不应登录。用户不能自己注册，只有主机用户可以添加它们。

发生的情况是，一旦用户注册，主机帐户就会注销，而创建帐户的用户正在登录。

所以我希望新用户在创建后不要登录。

我尝试了创建用户向导控件的以下属性

*   添加`DisableCreatedUser="True"`了属性，以便用户在注册后被禁用
*   `LoginCreatedUser="False"`

这有效，用户在注册后不会直接登录，但如果页面刷新，用户会登录，主机会注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:54:07.277

保留您当前的代码并尝试删除它。当您刷新页面时，它应该会阻止用户登录。

```
FormsAuthentication.SetAuthCookie(createUserWizard1.UserName, False); 
```

# javascript - jQuery AJAX，数组未序列化

> ID：13960820
> 
> 赞同：0
> 
> 时间：2012-12-19T20:42:26.137
> 
> 标签：javascript, jquery, ajax, multidimensional-array

我正在尝试使用 jQuery 发布一个多维数组。我已经验证，在发送数组之前，它包含它应该包含的内容（通过检查特定元素并提醒它们）。

但是，当我发送请求时，它发送的是：

```
Array
(
    [undefined] => 
) 
```

这是整个事情...

```
 var mainArray = new Array();
           $(".list").each(function(){
               var day = $(this).attr("id");
               var order = 1;
               $("#" + id + " li").each(function(){
                   var subArray = new Array();
                   var id = $(this).attr("id");
                   subArray["id"] = id;
                   subArray["order"] = order;
                   subArray["day"] = day;
                   mainArray.push(subArray);
                   order++;
               });
           });

           // This displays what I would expect
           alert(mainArray[0]['id']);
           alert(mainArray[1]['id']);
           alert(mainArray[2]['id']);
           alert(mainArray[3]['id']);

           // This doesn't work
           $.ajax({
                type: 'post',
                url: 'test2.php',
                data: mainArray,
                success: function(data) {
                    $("#test").html(data);
                }
            }); 
```

有任何想法吗？我的理解是 jQuery 应该自动序列化数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:52:10.037

**在将数据**发送到服务器之前对数据进行字符串化

**此外，将数据作为地图**发送也是一种更好的做法。

 **而不是这个

```
data: mainArray, 
```

尝试

```
data: { 'arr': JSON.stringify(mainArray) }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:57:59.653

你的代码完全错误！

首先，为您的二维数组命名，例如项目（或任何您想要的）。其次，您不能`Array`用于创建哈希（理论上可以，但它很糟糕，jQuery 不理解这一点），您必须使用对象文字`{}`而不是`Array`，`Array`只能与数字键一起使用（使用文字`[]`来创建数组而不是`new Array`）。你的代码：

```
var mainArray = [];
$(".list").each(function(){
   var day = $(this).attr("id");
   var order = 1;

   $("#" + id + " li").each(function(){
       var subArray = {};

       subArray["id"] = $(this).attr("id");
       subArray["order"] = order;
       subArray["day"] = day;

       mainArray.push(subArray);
       order++;
   });
});

$.ajax({
    type: 'post',
    url: 'test2.php',
    data: { items: mainArray },
    success: function(data) {
        $("#test").html(data);
    }
}); 
```

**PS**：您可以使用`$.param`（将 js 对象转换为查询字符串）来找出您的错误**

# jsf - MyFaces 中的开发和生产有什么区别

> ID：13960829
> 
> 赞同：12
> 
> 时间：2012-12-19T20:43:07.170
> 
> 标签：jsf, jsf-2, myfaces

我正在使用 MyFaces 在 JSF 中做一些开发工作，我收到了这个警告。

```
*******************************************************************
*** WARNING: Apache MyFaces-2 is running in DEVELOPMENT mode.   ***
***                                         ^^^^^^^^^^^         ***
*** Do NOT deploy to your live server(s) without changing this. ***
*** See Application#getProjectStage() for more information.     ***
******************************************************************* 
```

开发和生产模式有什么区别？是否存在安全风险？仅仅是性能增强吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T00:38:28.193

没有安全风险，但是有性能影响。当项目阶段设置为开发时，记录的频率会更高，缓存的频率会更低。

关于日志记录，将记录有关如何构建和呈现组件的其他调试信息。例如，如果您有 a `<h:inputText>`without any parent `<h:form>`，那么这将被记录并显示为 faces 消息。无论如何，所有未在任何组件中显示的排队面孔消息都`<h:message(s)>`将显示在页面底部的单独消息列表中，并带有橙色警告字体，表示“未显示”消息。此外，异常处理不同，MyFaces 将代替`<error-page>`显示丰富的错误页面，包括有关组件树和范围变量的详细信息。

关于缓存，Facelet 缓存会更频繁地刷新。因此，如果您在 Facelet 文件中进行更改并按 F5，则更改将“立即”反映。这不适用于生产阶段，您基本上需要重新启动整个服务器。

此外，`jsf.js`JavaScript 文件将显示为未缩小的版本，从而可以更轻松地在 Web 浏览器中进行 JS 调试。在生产阶段，它是缩小版，因此更小，服务更快，但它完全不可读。

Mojarra 有很多类似的行为，除了丰富的错误页面。

# java - 从数据库中检索配置文件 - Java

> ID：13960833
> 
> 赞同：-2
> 
> 时间：2012-12-19T20:43:11.017
> 
> 标签：java, security, passwords, abstract-class

我有一个用户配置文件类，只是想知道加载它的最佳方式是什么。我有以下代码，想知道它是否是正确的方法。

```
UserProfile userProfile = null;
char[] password = {'a','b','c'};

for(UserProfile profile : UserProfiles){
    if(compareUserNameAndPassword("userName", password)){
        userProfile = profile;
    }

} 
```

我的个人资料课程：

```
package jlibfprint;

public class UserProfile extends Profile {

    /**
     * constructor
     */
    public UserProfile(String userName, int id, char[] password){
        this.name = userName;
        this.id = id;
        this.password = password;
    }

    /**
     * Users password
     */
    private char[] password;

    /**
     * Set User password
     * @param password
     */
    public void setPassword(char[] password){

        this.password = password;

    }

    /**
     * compare passwords
     */
    public boolean compareUserNameAndPassword(String userName,char[] password) {

        if(this.name.equals(userName) && this.password.equals(password)){

            return true;

        }
        return false;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:50:52.553

这不是[类加载](http://en.wikipedia.org/wiki/Java_Classloader)，而是检查作为单个类实例的对象。它应该是`profile.compareUserNameAndPassword(userName,password)`。

您当前的操作方式意味着您的所有`UserProfile`s 都在内存中。通常它们会在数据库中，您会在查询中进行用户名和密码比较，然后仅在匹配时获取一个。

您可能还想考虑是否应该在某个时候对密码进行哈希处理。

您可能还应该考虑不要“重新发明轮子”并借用一些框架工具来提供帮助。[Hibernate](http://www.hibernate.org/)是一个对象关系管理工具，旨在简化从数据库中检索 Java 对象的过程。[Spring](http://www.springsource.org/)是一个框架，它有助于促进良好的设计技术和管理授权和身份验证以及 MVC 方法

```
 /*
  * Retrieves a UserProfile from the database based on a username and password
  * Needs Apache Commons Codec package otherwise you have to use MessageDigest 
  * which gives a binary SHA-1
  * @param username The username to fetch
  * @param password The unhashed password
  * @return The UserProfile or null if the user was not found in the DB
  */ 
 private static UserProfile retrieveUserProfile(String username, char[] password) 
    throws SQLException {
     password  = DigestUtils.sha1Hex(password);
     //Assuming a pre-setup JDBC Connection object - `con`
     final String updateString = "SELECT userName, password FROM userProfiles" 
       + "WHERE username = ? AND password = ? LIMIT 1";
     PreparedStatement retrieveUserProfile = con.prepareStatement(updateString)
     retrieveUserProfile.setString(1,"username");
     retrieveUserProfile.setString(2,"password");
     ResultSet rs = retrieveUserProfile.execute();
     if(rs.next()) {
         return new UserProfile(username,password);
     }
     else {
         //User Not found
         return null;
     }
 } 
```

# git - 为什么 git 没有 pre-push 钩子？

> ID：13960839
> 
> 赞同：2
> 
> 时间：2012-12-19T20:43:45.927
> 
> 标签：git

在将更改推送到遥控器（位于 bitbucket 上）之前，我想有一个钩子来运行我的测试。

我通常从 master 分支，当功能完成后，我将它合并回 master 并推送，这就是我寻找 pre-push 挂钩的原因。相反，我使用了一个 post-merge 和一个限制在 master 分支的 pre-commit。我已经看到[为 Git 1.6 完成的补丁](http://kerneltrap.org/mailarchive/git/2008/8/19/2996404)和[另一个问题](https://stackoverflow.com/questions/4196148/git-pre-push-hooks#comment4537300_4196626)，这正是我提出的解决方案的问题。

我想知道的是***为什么***git 不支持 pre-push 钩子（特别是如果一个补丁已经被接受过一次）？（顺便说一句 - 我正在使用最新的 git 版本）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T21:47:59.190

该补丁尚未被*接受*，仅提交。上个月左右还有另一个提交。

如果您关注该补丁提交之后的讨论线程，则有一些讨论（[示例](http://kerneltrap.org/mailarchive/git/2008/8/19/2997144)）关于添加预推送挂钩的补丁需要什么才能被接受。但是，无论是您链接到的补丁程序还是更新的补丁程序，都没有完成额外的工作。

到目前为止已经提交的补丁被认为并不比在`git push`命令周围有一个自定义包装更好。git 的维护者不希望添加这样的钩子实现，这使得将来在不破坏兼容性的情况下添加更有用的实现变得更加困难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T13:18:53.240

在我看来，这一直是一个何时而不是为什么的问题。

Git`pre-push`在版本中得到了钩子`1.8.2`。

示例`pre-push`脚本：[https ://github.com/git/git/blob/87c86dd14abe8db7d00b0df5661ef8cf147a72a3/templates/hooks--pre-push.sample](https://github.com/git/git/blob/87c86dd14abe8db7d00b0df5661ef8cf147a72a3/templates/hooks--pre-push.sample)

1.8.2 发布说明谈论新的 pre-push hook：[https ://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt)

# ruby-on-rails - Rails gem 在日志中出现错误时接收通知？

> ID：13960849
> 
> 赞同：0
> 
> 时间：2012-12-19T20:44:33.707
> 
> 标签：ruby-on-rails, debugging

是否有一个我可以使用的 gem，它会在我的日志中出现错误时通知我？必须在终端日志中从上到下滚动才能找到错误以及应用程序中该错误的确切行，这似乎违反直觉。有没有什么东西可以用来整齐地显示所有错误实例以及应用程序中发生这些错误的确切位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:48:47.497

试试这个[https://github.com/rails/exception_notification](https://github.com/rails/exception_notification)。或者这个[https://airbrake.io/pages/home](https://airbrake.io/pages/home)（但它不是免费的）。为了获得更好的开发 500 错误页面，请尝试[https://github.com/charliesome/better_errors](https://github.com/charliesome/better_errors)

# iphone - 是否有可用于 iPhone/iPad 开发的第三方库可以帮助我在屏幕上制作 2D 矩阵视图？

> ID：13960856
> 
> 赞同：1
> 
> 时间：2012-12-19T20:44:49.230
> 
> 标签：iphone, ios, ipad, mobile, matrix

该矩阵主要用于比较网格中的产品，以及触摸其中一个产品并根据触摸采取行动的能力。真正棘手的部分是矩阵应该是可平移的......当水平平移时第一行滚动，而最左边的行保持冻结状态，当垂直平移时最左边的行滚动，而第一行保持冻结。

我需要这个以便同时按公司和类型比较大量产品，基本上是矩阵视图。

把它想象成类似于电视指南的控制。

在 iPhone/iPad（主要是 iPad）上是否有第三方库或任何其他好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:00:19.240

内部矩阵/网格本身是否可滚动？

听起来您可能想要的是`UICollectionView`网格（或者如果网格是静态的，则只是视图），然后是左侧和顶部的两个单独的滚动视图。

*编辑：*

好的，现在您将其与电视指南进行比较更有意义。我想我会使用 a`UICollectionView`然后滚动左侧和顶部的视图。您可以捕获滚动事件或将平移手势识别器附加到`UICollectionView`，然后告诉适当的滚动视图与集合视图同步移动。

您可以使用[PSTCollectionView](https://github.com/steipete/PSTCollectionView "PSTCollectionView")来支持 iOS 5。它的 API 与`UICollectionView`.

# perl - 为什么 Perl HTTP::Response 不解码这个撇号？

> ID：13960859
> 
> 赞同：3
> 
> 时间：2012-12-19T20:44:54.073
> 
> 标签：perl, request, decode, lwp, lwp-useragent

我正在使用

```
my $ua = new LWP::UserAgent;
$ua->agent("Mozilla/5.0 (Windows NT 6.1; Intel Mac OS X 10.6; rv:7.0.1) Gecko/20100101 Firefox/7.0.1 ");
my $url = "http://somedomain.com/page/";
my $req = new HTTP::Request 'GET' => $url;
$req->header('Accept' => 'text/html');
my $response = $ua->request($req);
my $html = $response->decoded_content; 
```

获取网页。在这个页面上，`Abobo's Big Adventure`出现。在`$request->content`和`$request->decoded_content`中，这显示为`Abobo&#39;s Big Adventure`。

我可以做些什么来正确解码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T21:05:26.503

为什么，那是完全有效的 HTML！[`HTML::Entities`](https://metacpan.org/module/HTML::Entities)但是，您可以使用CPAN解码实体。

```
use HTML::Entities;

...;
my $html = $response->decoded_content;
my $decoded_string = decode_entities($html); 
```

文档[`HTTP::Response::decoded_content`](https://metacpan.org/module/HTTP::Response)说明`Content-encoding`和 字符集是颠倒的，而不是 HTML 实体（这是一种 HTML/XML 语言功能，而不是真正的编码）。

### 编辑：

然而，正如 ikegami 指出的那样，立即解码实体可能会使 HTML 无法解析。因此，最好先解析 HTML（例如使用[`HTML::Tree`](https://metacpan.org/module/HTML::TreeBuilder)），然后仅在需要时解码文本节点。

```
use HTML::TreeBuilder;

my $url = ...;
my $tree = HTML::TreeBuilder->new_from_url($url);    # invokes LWP automatically
my $decoded_text = decode_entities($tree->as_text);  # dumps the tree as flat text, then decodes. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:54:30.420

我猜在哈希标记之前可能有一个＆符号。使其成为表达的 HTML 实体`&#39;`这些并不难改变。你可以这样做：

```
my $content =  $response->decoded_content;
$content    
    =~ s{(&#(\d{2,3});)}{
           $2 < 128 ? ord( $2 ) : $1
        }gem
    ; 
```

范围检查几乎可以确保您处理的是 ASCII。如果你想变得更复杂，你也可以把一个哈希值放在一起，然后像这样改变它：

```
my %entity_lookup
    = ( 150 => '-'
      , 151 => '--' # m-dash
      , 160 => ' '
      ... 
    );
...
$content
    =~ s{(&#(\d+);)}{ 
           $2 < 128 ? ord( $2 ) : $entity_lookup{ $2 } // $1
        }gem
    ; 
```

但这取决于你。

# jira - 将 JIRA 优先级转换为 Greenhopper 排名

> ID：13960860
> 
> 赞同：0
> 
> 时间：2012-12-19T20:44:59.917
> 
> 标签：jira, jira-agile

我有一个现有项目，它使用优先级来确定票证的优先级。我想将此项目转换为 Greenhopper 项目，但我不知道如何按优先级对我的积压进行一次性排序。

如何按旧优先级字段的顺序对 Greenhopper 积压工作进行一次性重新排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:58:19.720

我想一定有更好的方法，但是我是这样做的。

我为我的每个优先级创建了一个单独的快速过滤器，例如。P0、P1、P2 等各 1 个。

我为每个优先级创建了一个单独的 Sprint，例如。P0、P1、P2 等各一个，按此顺序各一个。

对于每个优先级，我启用了该优先级的快速过滤器，选择了待办事项中的所有故事（它们都具有相同的优先级），然后将这些故事拖到相应的 Sprint 中。

一旦我这样做了，积压的故事就没有了。

然后，我按倒序删除了每个 sprint。所以首先我删除了 P4，然后是 P3，然后是 P2，等等。每次删除时，那个 sprint 的故事都会被添加到 backlog 的顶部。

完成后，我的待办事项列表中有一个按优先级排序的故事列表。

然后我删除了优先级快速过滤器。

# cordova - Highstock 图表在 Phonegap 应用程序中未显示正确的宽度

> ID：13960864
> 
> 赞同：2
> 
> 时间：2012-12-19T20:45:23.877
> 
> 标签：cordova, jquery-mobile, highcharts, highstock

我正在使用 Jquery Mobile (1.2.0) 和 Highstock 图表测试 Phonegap (2.2.0) 应用程序。我有一个带有 jquery`ready`函数的 javascript，它调用我的`graph()`函数。下面我放了一个这样的div：

```
<div data-role="content" style="text-align:center;">
    <div id="container" style="height:220px; right:10px;"></div>
</div> 
```

此外，highstock 代码位于 function.js 文件中：

```
function graph(){

    $(function() {

      $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
                // Create the chart
                window.chart = new Highcharts.StockChart({
                     chart : {
                     renderTo : 'container' 
                     },
                     rangeSelector : {
                     selected : 1
                     },

                     title : {
                     text : 'AAPL Stock Price'
                     },

                     series : [{
                               name : 'AAPL',
                               data : data,
                               tooltip: {
                               valueDecimals: 2
                               }
                               }]
                     });
                });

      });
} 
```

当我在 Xcode 中运行它时，它没有调整到正确的宽度。当我手动输入宽度和高度时，我没有任何问题，但由于我是通过跨平台开发的，所以我想把它放在 %或者喜欢它只是填满正确的屏幕。我尝试使用最小宽度和高度但没有结果，图表在 index.html 中呈现，如果我使用函数 beforecreate 呈现图表，我会得到更好的结果，但存在性能问题。

希望你能帮忙。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:32:32.703

然后你应该使用 jQuery 来计算 div 尺寸。假设您的图形页面有一个 id 索引：

```
$('#index').live('pagebeforeshow',function(e,data){    
    screenWidth = $('[data-role="page"]').first().width() - 30;  // -30 to counter content padding
    $('#container').css({'width': screenWidth,'height':screenWidth/2});
});

$(window).resize(function() {
    if($.mobile.activePage.attr('id') === 'index'){
        screenWidth = $('[data-role="page"]').first().width() - 30;  // -30 to counter content padding
        $('#container').css({'width': screenWidth,'height':screenWidth/2});    
    }
}); 
```

此 div 将响应页面大小调整。我还为您创建了一个示例：http: [//jsfiddle.net/Gajotres/bXsCV/](http://jsfiddle.net/Gajotres/bXsCV/)

# mysql - SQL 语法中的 JPA 错误

> ID：13960868
> 
> 赞同：0
> 
> 时间：2012-12-19T20:45:42.977
> 
> 标签：mysql, sql, spring-data

我正在使用 Spring Data 并创建了以下查询：

```
public interface UserRepository extends JpaRepository<User, Long>, QueryDslPredicateExecutor<User> {

    @Modifying
    @Query("DELETE FROM User u WHERE u.userDetails.userName = :username")
    public void deleteByUserName(@Param("username") String userName);
} 
```

在运行时我不断得到：

```
ERROR: org.hibernate.engine.jdbc.spi.SqlExceptionHelper - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'cross join UserDetails userdetail1_ where User_Name='rb2x5yv7'' at line 1 
```

我将 MySql 与 MySQL5Dialect 一起使用。

我的查询有什么问题？

**

## 更新：

**

在[这个](https://stackoverflow.com/questions/7246563/hibernate-exception-on-mysql-cross-join-query)线程之后，我更改了我的代码：

```
public interface UserRepository extends JpaRepository<User, Long>, QueryDslPredicateExecutor<User> {

    @Modifying
    @Query("DELETE FROM User u WHERE u.id in (SELECT u1.id FROM User WHERE u1.userDetails.userName = :username)")
    public void deleteByUserName(@Param("username") String userName);
} 
```

但现在我得到：

```
org.hibernate.QueryException: Unable to resolve path [u1.id], unexpected token [u1] [DELETE FROM com.bs.dal.domain.User u WHERE u.id in (SELECT u1.id FROM com.bs.dal.domain.User WHERE u1.userDetails.userName = :username)] 
```

**

## 更新 2：

**

看来我在子查询中缺少“u1”。将查询更改为：

```
 @Query("DELETE FROM User u WHERE u.id in (SELECT u1.id FROM User u1 WHERE u1.userDetails.userName = :username)") 
```

现在我得到：

```
org.hibernate.exception.GenericJDBCException: You can't specify target table 'Users' for update in FROM clause. 
```

我知道会发生这种情况，因为您无法修改在 SELECT 部分中使用的同一个表。此行为记录在：dev.mysql.com/doc/refman/5.6/en/update.html。

我该如何解决？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:35:45.877

为了让它发挥作用，我必须做两件事：

第一个，使用这个查询：

```
public interface UserRepository extends JpaRepository<User, Long>, QueryDslPredicateExecutor<User> {

    @Modifying
    @Query(name = "Delete User by UserName", value = "DELETE FROM User u WHERE u.id IN (SELECT ud.id FROM UserDetails ud WHERE ud.userName = :username)")
    public void deleteByUserName(@Param("username") String userName);
} 
```

第二：

我必须确保删除级联在数据库中得到很好的实现。由于某种原因，它不是自动生成的。你可以看到我与这一点相关[的新线程。](https://stackoverflow.com/questions/14005442/on-delete-cascade-option-not-in-generated-when-using-ddl-schema-generation-on-my)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:30:42.153

[在DELETE 语句](http://dev.mysql.com/doc/refman/5.5/en/delete.html)中分配表别名的正确方法是：

```
DELETE u FROM User u WHERE u.userName = :username
       ^ 
```

当然，如果只涉及一张表，您可以简单地省略别名：

```
DELETE FROM User WHERE userName = :username 
```

# .net - Linq在其他列表中查找列表的第一个值

> ID：13960869
> 
> 赞同：1
> 
> 时间：2012-12-19T20:45:49.043
> 
> 标签：.net, linq, list, lambda

一个看似简单的问题：我有一个字符串列表（从属性文件中读取）：

```
IList<string> defaultValues = new List<string> {"0458","0309"}; 
```

和一些对象的另一个列表，每个对象都有一个字符串类型的属性：

```
IList<Token> tokens = new List<Token>
{
    new Token {DisplayValue = "0123"},
    new Token {DisplayValue = "0309"},
    new Token {DisplayValue = "0203"},
    new Token {DisplayValue = "0458"},
    new Token {DisplayValue = "0911"}
};

public class Token
{
   public string DisplayValue { get; set; }
} 
```

现在我想获取 DisplayValue 与 defaultValues (0485) 的第一个元素匹配的标记元素。如果未找到具有 DisplayValue 0485 的元素，则默认值中的第二个元素应匹配 (0309)，依此类推。

defaultValues 列表可以是动态的，因此可以添加更多值，并且总是第一个条目应该具有优先级。

所以 defaultValues 列表是字符串的优先级列表，索引越低优先级越高。在上面的示例中，结果应该是“0458”。

我可以做这样的事情：

```
string result = string.Empty;

foreach (var searchValue in defaultValues)
{
    if (tokens.Any(token => token.DisplayValue == searchValue))
    {
        result = searchValue;
    }   
} 
```

但我认为这样的事情可以更优雅地完成并且没有 foreach ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:37:17.617

在这种情况下，使用`Any`是 O(n^2)，这可能不是最高效的。可能最好的方法是执行一个`GroupJoin`（改为 O(n)），然后选择匹配的第一个标记。请记住，`GroupJoin`仅在完全匹配的键上执行此操作，因此如果您正在寻找比较或子字符串搜索，则必须找到其他方法。

```
defaultValues
    .GroupJoin(
        tokens, // matching 0:n tokens per default value
        defVals => defVals, // key selector for our left source
        tks => tks.DisplayValue, // key selector for our right source
        (defVal, tks) => tks.FirstOrDefault()) // result selector for our matches
    .FirstOrDefault(match => match != null) 
```

这样做的好处是只遍历每个集合一次，并将所有标记与对应的标记匹配`DefaultValue`（因此每个默认值可以有多个匹配项）。你可以这样做`defaultValues.FirstOrDefault(x => tokens.Any(t => t == x))`，但你会遇到同样的问题（可能复杂度为 O(n^2)）。从这里，您可以检查它是否为 null（使用 null 合并）并添加一个`Empty`在 Token 中调用的静态常量，该常量初始化为`new Token { DisplayValue = string.Empty }`. 之后你可以这样做：

```
(defaultValues
    .GroupJoin(
        ...
    .FirstOrDefault(match => match != null) ?? Token.Empty).DisplayValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:52:01.643

基本上你需要从你的 Linq/Lambada结果中寻找一个**投影。**

我会尝试这样的事情：

```
var macthes = tokens.Any(t => t.DisplayValue.In(defaultValues))
              .Select(y =>y.DisplayValue); 
```

# ios - Lib 导入问题：SUPApplication.h 和 SUPConnectionProperties.h 位于何处？

> ID：13960873
> 
> 赞同：3
> 
> 时间：2012-12-19T20:46:03.677
> 
> 标签：ios, import, sybase, sap, sup

我正在开发一个与 SAP 的 SUP 平台一起使用的应用程序。在导入生成的代码时，我遇到了一个问题。

代码说找不到 SUPApplication.h 和 SUPConnectionProperties.h' 导入。

我遵循了所有官方 Sybase 指南 (http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01217.0212/doc/html/jne1320712216435.html) 并找到了一些谷歌上的信息，但与此无关。

有谁知道说这些文件在库中的位置？所有其他导入，如 SUPDataVault、SUPConnectionProfile 和所有其他 SUP_* 都很好。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:49:59.643

解决了。

这是一个版本问题。我在 SUP 2.1.0 中开发了该应用程序，并试图达到 SUP 2.1.2。

我的错，谢谢

# ios - Cocos 2D - 在平铺地图上移动精灵

> ID：13960875
> 
> 赞同：0
> 
> 时间：2012-12-19T20:46:23.970
> 
> 标签：ios, animation, cocos2d-iphone, sprite

我正在尝试以平滑的方式在 CCTMXMap 周围移动精灵。我已经弄清楚如何（使用CCActions）从一个瓷砖移动到另一个瓷砖，但是我的动画出现了间隙（它在重新评估行走的方向时暂停了一帧）。我已经尝试在预定的 update: 方法中移动角色，但是当您尝试将精灵限制为仅从瓷砖移动到瓷砖时，这会变得混乱。关于如何使用更新获得干净、一致的动画而没有混乱的手动动画的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:09:50.477

是的，不要使用动作。使用 CCActions 时总是会遇到 1 帧延迟问题。

在更新中移动精灵非常简单。尤其是如果您将移动限制在可以明显被图块大小整除的速度（每帧点数）。例如，如果您的图块是 40x30，则 1、2、4、8、10 的水平速度可以正常工作。垂直 1,2,3,5,6,10 可以工作。

通过这个数字更新位置，将其转​​换为 int，将其与目标位置进行比较：

```
if ((int)currentPos.x == (int)targetPos.x && (int)currentPos.y == (int)targetPos.y)
{
    NSLog(@"I'm there!");
} 
```

强制转换为 int 的原因是为了避免浮点值的舍入错误。

另一种解决方案是——特别是如果你的角色一次只能向一个方向移动——计算出他到达那里需要多少帧。如果角色必须向右移动 40 点，而他以每帧 4 点的速度移动，则需要 10 帧。然后只计算帧数（更新方法运行了多少次），如果它达到 10（或者如果你倒数，则为 0），那么你就知道角色已经到达，而无需检查他的位置。

# javascript - 将远程验证与 HTML5 验证集成

> ID：13960877
> 
> 赞同：0
> 
> 时间：2012-12-19T20:46:41.180
> 
> 标签：javascript, asp.net-mvc, html

我有一个使用 HTML5 验证的表单，我想在其中加入一些远程验证。这是我的页面上生成的相关 HTML 和 Javascript：

```
<form action="/en-GB/Main/UserAdd" method="post">    <fieldset>
        <legend>Fields</legend>
        <div class="editor-label">
            <label for="Username">Username</label>
        </div>
        <div>
            <input data-val="true" data-val-remote="&#39;Username&#39; is invalid." data-val-remote-additionalfields="*.Username" data-val-remote-url="/en-GB/Validation/IsUsernameAvailable" data-val-required="The Username field is required." id="Username" name="Username" required="true" type="text" value="" />
        </div>
        <div class="editor-label">
            <label for="FirstName">FirstName</label>
        </div>
        <div class="editor-field">
            <input data-val="true" data-val-required="The FirstName field is required." id="FirstName" name="FirstName" required="true" type="text" value="" />
        </div>
        <div class="editor-label">
            <label for="Surname">Surname</label>
        </div>
        <div class="editor-field">
            <input data-val="true" data-val-required="The Surname field is required." id="Surname" name="Surname" required="true" type="text" value="" />
        </div>
        <div>
            <label for="Country">Country</label>
        </div>
        <div>
            <select data-val="true" data-val-number="The field CountryId must be a number." data-val-required="The CountryId field is required." id="CountryId" name="CountryId"><option value="1">United Kingdom</option>
<option value="2">Republic of Ireland</option>
<option value="3">Australia</option>
<option value="4">New Zealand</option>
<option value="5">United States</option>
</select>
        </div>
        <p>
            <input type="submit" value="Add User" style="font-size:11px;font-family:Verdana;font-weight:bold;" />
        </p>
    </fieldset>
    <script type="text/javascript">
        $(document).ready(function () {

            //set up buttons
            $(function () {
                $("input:submit").button();
            });

            var elementsInput = document.getElementsByTagName("input");

            for (var i = 0; i < elementsInput.length; i++) {

                elementsInput[i].oninvalid = function (e) {

                    if (!e.target.validity.valid) {

                        switch (e.target.name) {

                            case "Username":
                                e.target.setCustomValidity("Please enter a Username");
                                break;

                            case "FirstName":
                                e.target.setCustomValidity("Please enter a First Name");
                                break;

                            case "Surname":
                                e.target.setCustomValidity("Please enter a Surname");
                                    break;
                    }
                }
                    };
            elementsInput[i].oninput = function (e) {
                e.target.setCustomValidity("");
            };
        }

        });

        </script> 
```

是否可以将 data-val-remote 属性合并到我的 javascript 中，以便我可以在我的 HTML5 验证中显示验证消息？

编辑：这是我的远程验证类：

```
public class ValidationController : Controller
{
    IMainRepository _repository;

    public ValidationController() : this(new MainRepository())
    {
    }

    public ValidationController(IMainRepository repository)
    {
        _repository = repository;
    }

    public static string GetAltName(string Username, IMainRepository repository)
    {

        string suggestedUID = String.Format(CultureInfo.InvariantCulture,
            "{0} is not available.", Username);

        for (int i = 1; i < 100; i++)
        {
            string altCandidate = Username + i.ToString();
            if (!repository.UsernameExists(altCandidate))
            {
                suggestedUID = String.Format(CultureInfo.InvariantCulture,
               "{0} is not available. Try {1}.", Username, altCandidate);
                break;
            }
        }

        return suggestedUID;
    }

    public JsonResult IsUsernameAvailable(string Username)
    {

        if (!_repository.UsernameExists(Username))
            return Json(true, JsonRequestBehavior.AllowGet);

        string suggestedUID = GetAltName(Username, _repository);
        return Json(suggestedUID, JsonRequestBehavior.AllowGet);
    }
} 
```

# c# - 检查 dbgeometry dbgeometry/dbgeography 点是否在多边形内

> ID：13960878
> 
> 赞同：5
> 
> 时间：2012-12-19T20:46:42.913
> 
> 标签：c#, sql-server, polygon, point-in-polygon

我有一个问题希望大家帮我解决。

我有一个 DbGeometry 点（或 DbGeography，我可以同时使用两者），我想检查它是否在 DbGeometry 多边形内（或者 DbGeography）。

我现在正在这样做：

```
var dbZones = new List<WasteManager.Database.Zone>();
foreach(var zone in zones)
        {
            var res = from z in DatabaseContext.Zones
                   let boundary =
                       !z.BoundaryGeometry.IsValid
                           ? SqlSpatialFunctions.MakeValid(z.BoundaryGeometry)
                           : z.BoundaryGeometry
                      where z.ID == zone.ID && point.Within(boundary)
                      select z;

            if(res.FirstOrDefault() != null) dbZones.Add(res.FirstOrDefault());

        } 
```

所以我遍历区域（我的数据库的 EF 实体）并检查我拥有的这个点是否在这个边界内。

问题是它不返回任何结果，但我知道该点在该边界内，因为我手动创建了边界和该边界内的点。

谁能告诉我我做错了什么，是否有其他方法可以做到这一点或其他什么？

非常感谢。

曼努埃尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-06-22T09:58:08.480

我想对 Nick Strupat 发表评论。

你应该小心戒指的方向。SQL Server 使用左手方向，这意味着如果您沿着多边形的周边行走，您的左手应该在多边形的内侧，而您的右手应该在外侧（逆时针或逆时针）。我得到了“环方向”错误，因为我以相反的方向（顺时针或右手方向）绘制了我的多边形，这意味着 SQL Server 将地球的整个表面视为多边形的区域，但我的多边形除外。

要检查一个点是否在多边形中，您应该始终使用`point.Intersects(polygon)`而不是`!point.Intersects(polygon)`.

有一个解决方案可以通过检查区域的大小来检查您的多边形是否正常，有关更多信息，请访问：

[https://blog.falafel.com/ring-orientation-sql-spatial/](https://blog.falafel.com/ring-orientation-sql-spatial/)

这是我基于博客解释的代码：

```
 private bool isInside(DbGeography polygon, double longitude, double latitude)
    {
        DbGeography point = DbGeography.FromText(string.Format("POINT({1} {0})", latitude.ToString().Replace(',', '.'), longitude.ToString().Replace(',','.')), DbGeography.DefaultCoordinateSystemId);

        // If the polygon area is larger than an earth hemisphere (510 Trillion m2 / 2), we know it needs to be fixed
        if (polygon.Area.HasValue && polygon.Area.Value > 255000000000000L)
        {
            // Convert our DbGeography polygon into a SqlGeography object for the ReorientObject() call
            SqlGeography sqlPolygon = SqlGeography.STGeomFromWKB(new System.Data.SqlTypes.SqlBytes(polygon.AsBinary()), DbGeography.DefaultCoordinateSystemId);

            // ReorientObject will flip the polygon so the outside becomes the inside
            sqlPolygon = sqlPolygon.ReorientObject();

            // Convert the SqlGeography object back into DbGeography
            polygon = DbGeography.FromBinary(sqlPolygon.STAsBinary().Value);

        }
        return point.Intersects(polygon);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-21T04:57:15.067

其实很容易。

```
bool isInside(DbGeometry polygon, double longitude, double latitude) //or DbGeography in your case
{
    DbGeometry point = DbGeometry.FromText(string.Format("POINT({0} {1})",longitude, latitude), 4326);
    return polygon.Contains(point);    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T15:24:37.417

除了@BenoitGlaizette，我还想添加评论。

该代码`polygon.Area.HasValue`可能会引发以下错误`Multipolygons`。

> ArgumentException：24144：此操作无法完成，因为实例无效。使用 MakeValid 将实例转换为有效实例。请注意，MakeValid 可能会导致几何实例的点稍微移动。

但是，如果我们直接转换为，则不会发生这种情况`SqlGeography`。

```
public bool IsInside(DbGeography polygon, double longitude, double latitude)
{
    DbGeography point = DbGeography.FromText(string.Format("POINT({1} {0})", latitude.ToString().Replace(',', '.'), longitude.ToString().Replace(',', '.')), DbGeography.DefaultCoordinateSystemId);

    var wellKnownText = polygon.AsText();

    var sqlGeography =
        SqlGeography.STGeomFromText(new SqlChars(wellKnownText), DbGeography.DefaultCoordinateSystemId)
            .MakeValid();

    //Now get the inversion of the above area
    var invertedSqlGeography = sqlGeography.ReorientObject();

    //Whichever of these is smaller is the enclosed polygon, so we use that one.
    if (sqlGeography.STArea() > invertedSqlGeography.STArea())
    {
        sqlGeography = invertedSqlGeography;
    }

    polygon = DbSpatialServices.Default.GeographyFromProviderValue(sqlGeography);

    return point.Intersects(polygon);
} 
```

**对于那些使用 Entity Framework 5<:**

我使用这种扩展方法在将它们保存到数据库之前进行`Polygon`检查`Multipolygon`。

```
public static DbGeography MakePolygonValid(this DbGeography geom)
{
    var wellKnownText = geom.AsText();

    //First, get the area defined by the well-known text using left-hand rule
    var sqlGeography =
        SqlGeography.STGeomFromText(new SqlChars(wellKnownText), DbGeography.DefaultCoordinateSystemId)
            .MakeValid();

    //Now get the inversion of the above area
    var invertedSqlGeography = sqlGeography.ReorientObject();

    //Whichever of these is smaller is the enclosed polygon, so we use that one.
    if (sqlGeography.STArea() > invertedSqlGeography.STArea())
    {
        sqlGeography = invertedSqlGeography;
    }
    return DbSpatialServices.Default.GeographyFromProviderValue(sqlGeography);
} 
```

然后我可以使用这样的方法`Intersects`在数据库级别进行检查。

```
public static class GeoHelper
{
    public const int SridGoogleMaps = 4326;
    public const int SridCustomMap = 3857;

    public static DbGeography PointFromLatLng(double lat, double lng)
    {
        return DbGeography.PointFromText(
            "POINT("
            + lng.ToString(CultureInfo.InvariantCulture) + " "
            + lat.ToString(CultureInfo.InvariantCulture) + ")",
            SridGoogleMaps);
    }
}

public County GetCurrentCounty(double latitude, double longitude)
{
    var point = GeoHelper.PointFromLatLng(latitude, longitude);

    var county = db.Counties.FirstOrDefault(x =>
        x.Area.Intersects(point));

    return county;
} 
```

Entity Framework 生成的 T-SQL：

```
SELECT TOP (1) 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[Code] AS [Code], 
[Extent1].[Area] AS [Area]
FROM [Election].[County] AS [Extent1]
WHERE ([Extent1].[Area].STIntersects(@p__linq__0)) = 1

-- p__linq__0: 'POINT (10.0000000 32.0000000)' (Type = Object) 
```

可以像这样手动测试：

```
declare @p__linq__0 varchar(max)
set @p__linq__0 = 'POINT (10.0000000 32.0000000)' 

SELECT TOP (1) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Area] AS [Area]
    FROM [Election].[County] AS [Extent1]
    WHERE ([Extent1].[Area].STIntersects(@p__linq__0)) = 1 
```

更多信息可以在这里找到：

[https://docs.microsoft.com/en-us/sql/t-sql/spatial-geometry/stintersects-geometry-data-type](https://docs.microsoft.com/en-us/sql/t-sql/spatial-geometry/stintersects-geometry-data-type)

# javascript - 多个可拖动的 iFrame，始终让 iFrame 成为焦点

> ID：13960879
> 
> 赞同：5
> 
> 时间：2012-12-19T20:46:49.790
> 
> 标签：javascript, jquery, html, css, iframe

我的页面上有 2 个 iFrame。两者都可以使用 jQuery UI 进行拖动。如果两个 iFrame 都被拖动到相同的空间上，则第二个加载的 iFrame 始终是主要的 iFrame，即。它覆盖了第一个 iFrame。有没有办法将 iFrame 设置为主要 iFrame，这样如果我移动第一个 iFrame 并将其放在第二个 iFrame 上，它将覆盖第二个框架，反之亦然？

HTML：

```
<a class = 'expandorcollapse3' href = '#'>Web Page 1</a>
<br>
<a class = 'expandorcollapse4' href = '#'>Web Page 2</a>

<div id = 'iframetest1' style = 'display: none'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe></a></div>
<div id = 'iframetest2' style = 'display: none'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe></a></div> 
```

CSS：

```
#iframe1 {width: 600px; height: 500px; border; 1px solid black; zoom: 1.00; -moz-transform: scale(0.65); -moz-transform-orgin: 0 0;
         -o-transform: scale(0.65); -o-transform-origin: 0 0; -webkit-transform: scale(0.65); -webkit-transform-origin: 0 0;}

#iframetest1 {width: 390px; height: 325px; margin: 10px; border-style: solid; border-width: 10px;}    

#iframetest2 {width: 390px; height: 325px; margin: 10 px; border-style: solid; border-width: 10px;} 
```

Javascript：

```
$(document).ready(function(){
    $(".expandorcollapse3").click(function(){
        if($("#iframetest1").is(":hidden")){
            $("#iframetest1").show("slow");
            }
        else{
            $("#iframetest1").hide("slow");
            }
        });
    });

$(document).ready(function(){
    $(".expandorcollapse4").click(function(){
        if($("#iframetest2").is(":hidden")){
            $("#iframetest2").show("slow");
            }
        else{
            $("#iframetest2").hide("slow");
            }
        });
    });

$("#iframetest1").draggable({containment: "document"});
$("#iframetest2").draggable({containment: "document"}); 
```

在这里查看[jsFiddle](http://jsfiddle.net/KAd9c/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:44:10.683

您可以在 draggable 中指定[堆栈](http://api.jqueryui.com/draggable/#option-stack)选项，以便当前拖动的元素到前面

```
$("#iframetest1,#iframetest2").draggable({
    containment: "document",
    stack: 'div'
}); 
```

您还可以通过使用切换功能而不是使用 if/else 语句来缩短代码

```
$(document).ready(function() {
    $(".expandorcollapse3").click(function() {
        $("#iframetest1").toggle('slow');
    });
    $(".expandorcollapse4").click(function() {
        $("#iframetest2").toggle('slow');
    });
}); 
```

[http://jsfiddle.net/nwu4Q/](http://jsfiddle.net/nwu4Q/) ​</p>

# .net - 在 Sony Vegas 脚本中使用 System.IO.Pipes.NamedPipeClientStream

> ID：13960886
> 
> 赞同：0
> 
> 时间：2012-12-19T20:47:12.490
> 
> 标签：.net, namedpipeserverstream

当我尝试在 Sony Vegas Script 中使用 NamedPipeClientStream 时，我得到了异常

```
The type or namespace name 'NamedPipeClientStream' could not be found (are you missing   
a using directive or an assembly reference?) 
```

和

```
The type or namespace name 'Pipe' could not be found in System.IO (are you missing     
a an assembly reference?) 
```

这就是我的代码的样子：

```
new System.IO.Pipes.NamedPipeClientStream("UniqueString"); 
```

我已经完整安装了最新的 .Net Framework (4.5)。索尼维加斯从哪里获得组件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:15:48.507

好吧，那离我的床很近，我在 Sony Vegas 工作过，并且非常了解它的 CLR 托管方案。您遇到此问题是因为 System.IO.Pipes 是一个 .NET 4 命名空间，Vegas 中的自定义 CLR 主机加载 CLR 版本 2.0.50727。

您可以覆盖该选择，您可以编辑 Program Files 文件夹中的 .exe.config 文件并使用该`<supportedRuntime>`元素来加载 v4 版本。不确定这样做会遇到什么样的麻烦，否则它不是经过测试或支持的场景。

下一个最接近的替代方法是使用 Socket。通常比 WM_COPYDATA 更​​容易上手，因为您只需要选择一个端口号。获取窗口句柄可能很棘手，FindWindow() 不是一个非常可靠的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:23:58.057

Sony Vegas 托管的 CLR 似乎不支持 NamedPipeClientStream。我通过使用 Windows 中的消息系统实现了相同的行为。这是我在 Sony Vegas Script 中使用的代码

```
public static class SonyVegasWindowMessageHelper
{
    private const int WM_USER = 0x400;
    private const int WM_COPYDATA = 0x4A;
    private const int VIDEO_RENDERED = 52;

    [DllImport("user32.dll")]
    private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    [DllImport("user32.dll", SetLastError = true)]
    private static extern bool SendMessage(IntPtr hWnd, uint msg, IntPtr wParam, ref COPYDATASTRUCT lParam);

    public static void SendMessage(string message)
    {
        IntPtr window = FindWindow(null, "Youtube Video Uploader");
        if (window != IntPtr.Zero)
        {
            byte[] data = Encoding.Default.GetBytes(message);

            COPYDATASTRUCT str = new COPYDATASTRUCT();
            str.CbData = data.Length + 1;
            str.DwData = (IntPtr)VIDEO_RENDERED;
            str.LpData = message;

            SendMessage(window, WM_COPYDATA, IntPtr.Zero, ref str);
        }
    }

    private struct COPYDATASTRUCT
    {
        public IntPtr DwData;
        public int CbData;

        [MarshalAs(UnmanagedType.LPStr)]
        public string LpData;
    }
} 
```

使用 SendMessage，您可以将任何您想要的消息发送到其他应用程序。

# javascript - 我什么时候不应该在javascript中保留客户端的数据完整性

> ID：13960887
> 
> 赞同：0
> 
> 时间：2012-12-19T20:47:14.210
> 
> 标签：javascript, asp.net-mvc, jquery-dialog

我正在显示一个带有 JQuery UI 对话框的编辑树节点对话框。用户选择一个树节点，然后单击编辑链接。对话框打开并在文本框中显示所选节点的名称以进行编辑。

在我的树节点中，我保存了 id + 名称。当我在 GET 请求中打开 JQuery 对话框时，我将树节点 ID 传递给 mvc 控制器，该控制器从数据库中获取树节点的名称。

好吧，有什么理由我不应该直接从选定的树节点中获取名称，这会减轻一些事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:46:35.187

我能看到的唯一缺点是，如果这个系统被多个用户同时使用，树节点可能在初始加载和您想要重命名它的时间之间在数据库中被更改甚至删除。通过从数据库中获取新数据，您可以提前通知用户。

如果这对您来说不是问题，那就去做吧。

# objective-c - 不使用应用程序时的报亭工具包推送通知如何获取用户信息

> ID：13960889
> 
> 赞同：0
> 
> 时间：2012-12-19T20:47:15.567
> 
> 标签：objective-c, ios, push-notification, newsstand-kit

我正在构建一个`Newsstand`应用程序，我想在后台下载最新一期。我设置了适当的后台模式键以允许这样做。

我将有效负载推送到我的应用程序，例如：

```
{"aps": {"badge": 1,"content-available":"1"}} 
```

但是如果我的应用程序不在前台，我怎么知道推送通知已发送，以便我可以开始后台下载？如果应用程序在前台，我会使用`didReceiveRemoteNotification:`但对当应用程序不在前台或什至没有运行时该怎么做感到困惑。

根据文档：

> 如果在传递通知时应用程序未在前台运行，则会在后台激活（或在必要时启动到后台）以下载问题资产。否则，您将像处理任何推送通知一样处理通知。有关如何发送和处理推送通知的信息，请参阅本地和推送通知编程指南。
> 
> 客户端应用程序与其服务器通信并获取定位问题资产的 URL 以进行下载。它可能还需要从服务器获取问题的名称和日期。在此阶段，它还可能验证用户是否有资格订阅或执行任何其他所需的授权。

但它从未说明使用哪种方法开始下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:52:06.327

只有当用户启动应用程序以响应推送通知（例如，在锁定屏幕上或从通知中心滑动），或者它已经在运行时，您的应用程序才会收到推送通知。此外，不保证会发送推送通知。

*更新：*

正如您所提到的，对于 Newstand 应用程序，您应该使用该`UIRemoteNotificationTypeNewsstandContentAvailability`权限来启用新问题的后台下载。然而，这并非没有它自己的一系列技术挑战：

> “...您的应用可能每 24 小时仅启动一次后台下载。iOS 将忽略尝试在 24 小时内多次启动后台下载的通知。”

和

> **用户可以禁用后台下载吗？**
> 
> 是的，用户可以在“设置”中针对每个应用禁用报亭的推送通知启动的后台下载。您可以通过在 UIApplication 的 enabledRemoteNotificationTypes 属性返回的启用类型集中查找 UIRemoteNotificationTypeNewsstandContentAvailability 来确定您的应用是否已禁用后台下载。

来自：http: [//developer.apple.com/library/ios/#technotes/tn2280/_index.html](http://developer.apple.com/library/ios/#technotes/tn2280/_index.html)

完全有可能在您的测试期间，您全天发送了太多的内容更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:38:14.160

> “只有当用户启动应用程序以响应推送通知（例如，在锁定屏幕上或从通知中心滑动），或者它已经在运行时，您的应用程序才会收到推送通知。”

如果报刊亭通知（在有效负载中有 content-available:1），上述声明是不正确的。收到它后，iOS 在后台启动应用程序（如果未运行）并调用应用程序委托的 didFinishLaunchingWithOptions 方法。您可以检查启动选项字典的 UIApplicationLaunchOptionsRemoteNotificationKey 的值，以检查您的应用程序是否通过通知启动。

```
NSDictionary *payload = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];    

    if(payload && [[payload objectForKey:kContentAvailablePush] caseInsensitiveCompare:@"1"] == NSOrderedSame)
    {
        NSLog(@"app launched by Newsstand Remote notification. payload %@", payload);
        [self scheduleNewsStandDownload:payload];        
    } 
```

在方法 scheduleNewsStandDownload 中，您可以简单地获取托管内容的路径/日期等并将其添加到报亭队列中。下面是伪代码。

```
NKLibrary *nkLib = [NKLibrary sharedLibrary];
NKIssue *nkIssue = [nkLib issueWithName:<your content id>];
if(!nkIssue)
   nkIssue = [nkLib addIssueWithName:<your content id>  date:<your content date>];

    NKAssetDownload *nkAssetDownloadGridCover = [nkIssue addAssetWithRequest:<urlRequest for the content>];        
    [nkAssetDownloadGridCover downloadWithDelegate:self]; 
```

# c# - 列不填充延迟加载关闭

> ID：13960895
> 
> 赞同：1
> 
> 时间：2012-12-19T20:47:42.170
> 
> 标签：c#, linq, entity-framework, lazy-loading, lazy-evaluation

我有一个 linq 查询：

```
var query = from ct in ClaimTypes
            join c in Claims.OrderBy(x => x.ClaimValue)
                            .Include("SubClaims") on ct.ClaimTypeId equals c.ClaimTypeId into t
            select new { ct.ClaimTypeName, t }; 
```

结果是一个声明字典，键是声明类型，值是该声明类型下的声明列表。在声明中，有一列称为子声明。但是，由于服务器问题，我们关闭了延迟加载，现在 subclaims 列不会填充。在 JOIN 中使用 INCLUDE 不会填充列。任何人都可以提出任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:19:47.563

您没有在结果集中返回 t.SubClaims。包含应用于子查询，而不是最终选择。运行 SQL 探查器以确认最终选择集不包括 SubClaims 字段。

尝试：

```
select new { ct.ClaimTypeName, t, t.SubClaims }; 
```

或者：

```
var query = /* you're query */;
query = query.Include(a => a.t.SubClaims); 
```

# r - 向直方图和累积直方图添加密度线

> ID：13960896
> 
> 赞同：16
> 
> 时间：2012-12-19T20:47:50.443
> 
> 标签：r, graph, plot, base, kernel-density

我想将密度曲线添加到直方图和累积直方图，如下所示：

![在此处输入图像描述](../Images/9eb668cf316e8a015e78fd3ebe82aeea.png)

这是我能做到的：

```
hist.cum <- function(x, plot=TRUE, ...){
  h <- hist(x, plot=FALSE, ...)
  h$counts <- cumsum(h$counts)
  h$density <- cumsum(h$density)
  h$itensities <- cumsum(h$itensities)
  if(plot)
    plot(h)
  h
}
 x <- rnorm(100, 15, 5)
hist.cum(x)
 hist(x, add=TRUE, col="lightseagreen")

 #
lines (density(x), add = TRUE, col="red") 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T21:32:39.627

提供不解释：

```
## Make some sample data
x <- sample(0:30, 200, replace=T, prob=15 - abs(15 - 0:30))

## Calculate and plot the two histograms
hcum <- h <- hist(x, plot=FALSE)
hcum$counts <- cumsum(hcum$counts)
plot(hcum, main="")
plot(h, add=T, col="grey")

## Plot the density and cumulative density
d <- density(x)
lines(x = d$x, y = d$y * length(x) * diff(h$breaks)[1], lwd = 2)
lines(x = d$x, y = cumsum(d$y)/max(cumsum(d$y)) * length(x), lwd = 2) 
```

![在此处输入图像描述](../Images/01cc8d6c4bf750c06a5e8130f4d9f76e.png)

# java - Selenium Webdriver 与 Java 与 Python

> ID：13960897
> 
> 赞同：6
> 
> 时间：2012-12-19T20:47:50.110
> 
> 标签：java, python, selenium, webdriver

我想知道将 Selenium Webdriver 与 python 绑定与 Java 结合使用的优缺点是什么。到目前为止，似乎走 java 路线有更好的文档。除此之外，似乎取决于您喜欢哪种语言，但也许我遗漏了一些东西。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-27T14:22:30.247

“如果您正在针对 Java 应用程序运行 selenium 测试，那么使用 Java 驱动您的测试是有意义的。” 这是不真实的。编写 Web 应用程序的内容没有区别。

就我个人而言，我更喜欢 python，因为它与其他语言（如 Java）一样强大，而且更简洁，使代码维护不那么令人头疼。但是，如果您选择一种语言，请不要像用另一种语言编程一样编写它。例如，如果您使用 Python 编写代码，请不要像使用 Java 一样编写代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T21:41:41.087

一般来说，Java selenium web 驱动程序的文档更好。当我寻找特定问题的帮助时，我更有可能找到关于我的问题的 Java 讨论，而不是 Python 讨论。

要考虑的另一件事是，您的代码库的其余部分使用什么语言？如果您正在针对 Java 应用程序运行 selenium 测试，那么使用 Java 驱动测试是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:37:52.310

你已经明白了，有大量的 Java 文档。所有新功能的实现大部分都是用 Java 解释的。甚至 stackoverflow 也有一个非常强大的 java + selenium 社区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:36:05.187

真的没关系。甚至文档。Selenium lib 一点也不大。

此外，如果您擅长开发，您会将 selenium 包装在自己的代码中，并且永远不会使用`driver.find(By.whatever(description))`. 此外，您将使用一些标准，`By.whatever`并将成为`By.xpath`唯一的。

就个人而言，我更喜欢 python，原因是我的其他软件测试使用其他 python 库->这样我可以统一我的测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T21:40:34.850

对我来说，这只是一种语言偏好。有其他语言的绑定，但我相信它们通过某种套接字接口与 Webdriver 通信。

# apache2 - 在 AIX 7.1 中，Apache 模块未构建为共享

> ID：13960899
> 
> 赞同：0
> 
> 时间：2012-12-19T20:48:00.643
> 
> 标签：apache2, aix

我希望我的所有模块都使用 .so 扩展名构建，以便共享它们。但是，我所有的模块都是用 .la 扩展名构建的。以下是模块目录的内容：

```
httpd.exp                libmod_proxy_ajp.a       libmod_speling.a         mod_info.la              mod_proxy_scgi.la
libmod_cern_meta.a       libmod_proxy_balancer.a  libmod_ssl.a             mod_proxy.la             mod_rewrite.la
libmod_dbd.a             libmod_proxy_connect.a   libmod_vhost_alias.a     mod_proxy_ajp.la         mod_speling.la
libmod_deflate.a         libmod_proxy_ftp.a       mod_cern_meta.la         mod_proxy_balancer.la    mod_ssl.la
libmod_expires.a         libmod_proxy_http.a      mod_dbd.la               mod_proxy_connect.la     mod_vhost_alias.la
libmod_info.a            libmod_proxy_scgi.a      mod_deflate.la           mod_proxy_ftp.la
libmod_proxy.a           libmod_rewrite.a         mod_expires.la           mod_proxy_http.la 
```

这是我的配置命令：

```
./configure \
--with-mpm=prefork \
--with-ssl=/opt/freeware \
--enable-cern-meta \
--enable-dbd \
--enable-deflate \
--enable-expires \
--enable-info \
--enable-proxy \
--enable-rewrite \
--enable-speling \
--enable-ssl \
--enable-vhost-alias \
--enable-mods-shared="cern_meta dbd deflate expires info proxy rewrite speling ssl    vhost_alias" 
```

我过去在 AIX 5.2、5.3 和 6.1 上做过很多次，没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:47:44.007

`.la`files 是[libtool 的库控制文件语法](http://www.gnu.org/software/libtool/manual/html_node/Linking-libraries.html)。请注意，它们实际上只是小脚本。检查`.libs`目录中的共享库对象。你也可以明确告诉`configure`你想要共享库`--enable-shared`

# json - 在 Play 框架中进入 JSON 数组

> ID：13960900
> 
> 赞同：6
> 
> 时间：2012-12-19T20:48:01.667
> 
> 标签：json, scala, playframework-2.0

我正在尝试从远程 http 响应中解析播放框架中的一些 json。我正在尝试进入结果 [0]->locations[0]->latLng->lat。我正在使用带有 scala 的 playframework 2.0。

下面是我正在使用的代码，其中包含一些我迄今为止尝试过的注释示例。

```
 val promise = WS.url("http://www.mapquestapi.com/geocoding/v2/address?...").get()
  val body = promise.value.get.body
  val json = Json.parse(body)
  val maybeLat = (json \ "results" \ "0" \ "locations" \ "0" \ "latLng" \ "lat").asInstanceOf[String]
  //val maybeLat = (json \ "results[0]" \ "locations[0]" \ "latLng" \ "lat").asInstanceOf[String]
  //val maybeLat = (json \ "results(0) \ "locations(0) \ "latLng" \ "lat").asInstanceOf[String]

  Ok(body).withHeaders(CONTENT_TYPE -> "text/json") 
```

我从游戏框架中得到的错误：http: [//pastebin.com/S5S3nY5D](http://pastebin.com/S5S3nY5D) JSON 我正在尝试解析： http: [//pastebin.com/7rfD0j2n](http://pastebin.com/7rfD0j2n)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T23:18:57.970

试试这个，顺序访问必须在路径遍历之后。

```
val result = (json \ "results")(0)
val location = (result \ "locations")(0)
val lat = (location \ "latLng" \ "lat") 
```

有了这个，您可以构建您的单线解决方案：

```
(((json \ "results")(0) \ "locations")(0) \ "latLng" \ "lat") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-03T10:20:07.463

我认为更好的方法是：

```
val resultsArray = (json \ "results").as[JsArray]
val locations = resultsArray \\ "locations" 
```

此时，`locations`将是您可以遍历的对象列表，而无需通过它们的索引手动访问它们。

# php - 亚马逊产品广告 API PHP 显示图像

> ID：13960901
> 
> 赞同：1
> 
> 时间：2012-12-19T20:48:02.643
> 
> 标签：php, amazon-ec2, amazon, product

我很困惑如何在我的网站上显示产品图片。我已经编写了以下代码。如何从响应中仅提取产品图像？

```
 <?php

  require_once 'lib/AmazonECS.class.php';

 $client = new AmazonECS('AWSApi','AWSSected','DE','Assoicate');

 $response  = $client->category('Photo')->search('Nikon');

  var_dump($response);

   ?> 
```

我得到以下回复（其中很多）。我删除了一些信息。

```
[8]=>
  object(stdClass)#71 (5) {
    ["ASIN"]=>
    string(10) "B008VO4INW"
    ["ParentASIN"]=>
    string(10) "B0091FA5PA"
    ["DetailPageURL"]=>
    string(217) "http://www.amazon.de/Nikon-Coolpix-L610-Kompaktkamera-Megapixel/dp/B008VO4INW%3FSubscriptionId%3XXX%26tag%3DXXXX%26linkCode%3Dsp1%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB008VO4INW"
    ["ItemLinks"]=>
    object(stdClass)#72 (1) {
      ["ItemLink"]=>
      array(4) {
        [0]=>
        object(stdClass)#73 (2) {
          ["Description"]=>
          string(15) "Add To Wishlist"
          ["URL"]=>
          string(216) "http://www.amazon.de/gp/registry/wishlist/add-item.html%3Fasin.0%3DB008VO4INW%26SubscriptionId%3XXXQ%26tag%3DXXX%26linkCode%3Dsp1%26camp%3D2025%26creative%3D12738%26creativeASIN%3DB008VO4INW"
        }
        [1]=>
        object(stdClass)#74 (2) {
          ["Description"]=>
          string(13) "Tell A Friend"
          ["URL"]=>
          string(181) "http://www.amazon.de/gp/pdp/taf/B008VO4INW%3FSubscriptionId%3XXXFQ%26tag%3DXXX0%26linkCode%3Dsp1%26camp%3D2025%26creative%3D12738%26creativeASIN%3DB008VO4INW"
        }
        [2]=>
        object(stdClass)#75 (2) {
          ["Description"]=>
          string(20) "All Customer Reviews"
          ["URL"]=>
          string(185) "http://www.amazon.de/review/product/B008VO4INW%3FSubscriptionId%3DXXXTFQ%26tag%3DxXXX-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D12738%26creativeASIN%3DB008VO4INW"
        }
        [3]=>
        object(stdClass)#76 (2) {
          ["Description"]=>
          string(10) "All Offers"
          ["URL"]=>
          string(187) "http://www.amazon.de/gp/offer-listing/B008VO4INW%3FSubscriptionId%3DXXXXQ%26tag%3DXXX0%26linkCode%3Dsp1%26camp%3D2025%26creative%3D12738%26creativeASIN%3DB008VO4INW"
        }
      }
    }
    ["ItemAttributes"]=>
    object(stdClass)#77 (3) {
      ["Manufacturer"]=>
      string(5) "Nikon"
      ["ProductGroup"]=>
      string(11) "Photography"
      ["Title"]=>
      string(95) "Nikon Coolpix L610 Kompaktkamera (16 Megapixel, 14-fach opt. Zoom, 7,6 cm (3 Zoll) Display) rot"
    }
  }

 After incorporate changes below, got this response:

 object(stdClass)#85 (2) {
   ["OperationRequest"]=>
   object(stdClass)#86 (4) {
      ["HTTPHeaders"]=>
    object(stdClass)#87 (1) {
      ["Header"]=>
      object(stdClass)#88 (2) {
       ["Name"]=>
       string(9) "UserAgent"
        ["Value"]=>
        string(26) "PHP-SOAP/5.3.10-1ubuntu3.4"
      }
      }
    ["RequestId"]=>
    string(36) "2af6eed8-4c6e-4211-bdd6-48304336624d"
   ["Arguments"]=>
    object(stdClass)#89 (1) {
     ["Argument"]=>
      object(stdClass)#90 (2) {
        ["Name"]=>
        string(7) "Service"
       ["Value"]=>
        string(19) "AWSECommerceService"
     }
    }
    ["RequestProcessingTime"]=>
    float(0.00219)
   }
  ["Items"]=>
   object(stdClass)#91 (1) {
    ["Request"]=>
    object(stdClass)#92 (3) {
      ["IsValid"]=>
      string(5) "False"
      ["ItemLookupRequest"]=>
      object(stdClass)#93 (3) {
    ["IdType"]=>
    string(4) "ASIN"
    ["ResponseGroup"]=>
    string(6) "Images"
    ["VariationPage"]=>
    string(3) "All"
  }
  ["Errors"]=>
  object(stdClass)#94 (1) {
    ["Error"]=>
    object(stdClass)#95 (2) {
      ["Code"]=>
      string(21) "AWS.MissingParameters"
      ["Message"]=>
      string(80) "Your request is missing required parameters. Required parameters include ItemId."
    }
  }
} 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:47:23.147

该`search`方法为您提供搜索结果，您需要做更多工作才能获得图像。

```
 require_once 'lib/AmazonECS.class.php';
  $client = new AmazonECS('AWSApi','AWSSected','DE','Assoicate');
  $search  = $client->category('Photo')->search('Nikon');
  if ($search) {
    $lookup = $client->responseGroup('Images')->lookup($search->ASIN);
    echo '<pre>';
    var_dump($lookup); // will give you the item's object and the image's url
  } 
```

# arduino - 使用 Arduino 获取客户端 IP 地址

> ID：13960902
> 
> 赞同：0
> 
> 时间：2012-12-19T20:48:06.303
> 
> 标签：arduino

我有一个带有 Ethernet Shield 的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)作为服务器，我通过 Internet 在 Arduino 上提出请求。我使用了两个库（Ethernet.h 和 SPI.h）。

我想检查客户端[IP 地址](http://en.wikipedia.org/wiki/IP_address)，所以我只接受来自已知 IP 地址（例如 50.50.50.50）的[HTTP请求，这是我办公室的静态 IP 地址。](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)如何获取 Arduino 上的客户端 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-29T19:45:18.730

看看以下内容，这适用于 TCP：

[http://forum.arduino.cc/index.php?PHPSESSID=jh6t8omt7vrb8nget5c9j5dbk4&/topic,82416.0.html](http://forum.arduino.cc/index.php?PHPSESSID=jh6t8omt7vrb8nget5c9j5dbk4&/topic,82416.0.html)

**以下是引用作者的帖子，我只是复制优秀作品：**

为了使它工作，我做了以下工作：

我在 EthernetClient.cpp 文件的末尾添加了以下几行：

```
uint8_t *EthernetClient::getRemoteIP(uint8_t remoteIP[])
{
  W5100.readSnDIPR(_sock, remoteIP);
  return remoteIP;
} 
```

然后，我在 EthernetClient.h 文件中添加了以下行（在 virtual void stop(); 行下）：

```
uint8_t *getRemoteIP(uint8_t RemoteIP[]);//adds remote ip address 
```

最后，我在我的草图中使用了以下代码来访问远程 IP：

```
client.getRemoteIP(rip); // where rip is defined as byte rip[] = {0,0,0,0 }; 
```

为了在串行监视器中显示 IP，我使用了：

```
for (int bcount= 0; bcount < 4; bcount++)
     {
        Serial.print(rip[bcount], DEC);
        if (bcount<3) Serial.print(".");
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:58:48.077

我已经使用UDP完成了这个，希望这会对你有所帮助。

在此处从 Google 获取 UDP.h：[UDP.h](http://code.google.com/p/arduino/source/browse/trunk/libraries/Ethernet/Udp.h?r=1094)

代码：

```
#include <SPI.h>
#include <Ethernet.h>
#include <Udp.h> 

// *****  ETHERNET VARS *****
// MAC address and IP for arduino
byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
byte ip[] = { 192,168,1,98};
unsigned int localPort = 8888;      // local port to listen on

// SenderIP and SenderPort are set when message is received
byte SenderIP[IP_LENGTH];        // holds received packet's originating IP
unsigned int SenderPort;        // holds received packet's originating port

// buffer for receiving data
char packetBuffer[UDP_TX_PACKET_MAX_SIZE]; //buffer to hold incoming packet
int packetSize = 0;

void setup() 
{
  Ethernet.begin(mac,ip);  //start Ethernet
  Udp.begin(localPort);    //start UDP
}

void loop()
{
  if(NewPortMessage())
  {
      // Do stuff, SenderIP is the IP where the UDP message was received from
  }
}

boolean NewPortMessage()
{
  packetSize = Udp.available();
  if(packetSize > 0)
  {
    packetSize -= 8; //subtract UDP 8-byte header
    // read the packet into packetBufffer and get the senders IP addr and port number
    Udp.readPacket(packetBuffer,UDP_TX_PACKET_MAX_SIZE, SenderIP, SenderPort);
    return true;
  }
  clearPacketBuffer();
  return false;
}

void clearPacketBuffer()
{
  for(int i=0; i < packetSize; i++)
    packetBuffer[i] = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:36:19.883

改变方法呢？你可以使用 SOA，你可以让你的 arduino 成为一个 web 客户端而不是 web 服务器......然后你可以在托管你的 web 服务的 web 服务器中处理所有这些限制，这个 web 服务将是核心你的应用程序，这样你就可以从任何你想要的移动设备上调用它：D

只是一个想法 arduino 网络服务器不是很有用，通过这种方法，您可以使用互联网而不是仅使用 LAN

祝你的项目好运

# ios - 如何确定我在应用程序中使用的课程是否为私有课程？

> ID：13960903
> 
> 赞同：1
> 
> 时间：2012-12-19T20:48:10.023
> 
> 标签：ios

如何确定我在应用程序中使用的课程是否为私有课程？这是否在课程文档中指定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:52:54.570

就像您要将应用程序提交到 iTunes Connect 一样，创建应用程序的存档。打开 Xcode 的管理器窗口，然后在存档上运行“验证”。如果您调用了私有 API，它将生成警告。

# javascript - Flexslider 文本+图像在页面加载时闪烁

> ID：13960905
> 
> 赞同：2
> 
> 时间：2012-12-19T20:48:14.867
> 
> 标签：javascript, jquery, html, css, flexslider

`ul > li`为什么使用[Flexslider](http://www.woothemes.com/flexslider/)时内容会闪烁？当我强制重新加载整个页面 (F5) 时它不会闪烁，但是当您在网站上四处浏览时，它会开始闪烁 - 但只有第一张幻灯片。

代码如下所示：

```
<ul class="slides">
    <li>
        <div class="img-holder">
            <img src="/path/to/image.png" alt="" />

            <div class="text">
                Some
                Kind
                Of
                Text
            </div>
        </div>
    </li>
</ul> 
```

**Javascript：**

```
$('.slider').flexslider({
    directionNav: false,
    animation: "slide",
}); 
```

有谁知道我可以做些什么来阻止第一个图像和文本加载时的“闪烁”？

该问题与图像加载无关，因为文本也会闪烁。项目内的全部内容都在`li`闪烁。所以我该怎么做？

# math - 数字到 [0,1] 的线性映射区间

> ID：13960907
> 
> 赞同：0
> 
> 时间：2012-12-19T20:48:22.607
> 
> 标签：math, language-agnostic, numbers

我知道这应该是微不足道的，但今晚我没有找到解决方案。假设我在给定范围内有一系列浮点数，例如 [0.25, 1.0]。例如：

```
{0.25, 0.625, 1.0} 
```

为了将[0.25,1.0]区间映射到[0.0,1.0]，转换它们的正确方法是什么？示例序列应变为：

```
{0.0, 0.5, 1.0} 
```

第二个问题，如何概括？将给定区间 [a,b] 映射到 [0,1] 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:51:32.107

```
fun lin-map(list) :=
    mx = max(list), mn = min(list)
    return [ (x - mn)/(mx-mn) | x <- list ] 
```

# javascript - Javascript - onclick、播放声音、等待 x 秒、加载 URL

> ID：13960908
> 
> 赞同：1
> 
> 时间：2012-12-19T20:48:35.727
> 
> 标签：javascript, html, audio, onclick

目前，我有一个链接到带有 onClick 事件的页面的图像，以便在单击时播放声音。

```
<div style="display:none;">
    <audio id="audio1" src="SOUND.wav" controls preload="auto" autobuffer></audio>
</div>

<script> function EvalSound(soundobj) 
    { var thissound=document.getElementById(soundobj); thissound.play(); } 
</script>

<a href="PAGE.php" onClick="EvalSound('audio1')"><img src="IMAGE.png"></a> 
```

这可以正常工作，但是页面加载会切断声音。假设“SOUND.wav”为 10 秒长，我将如何编辑我的代码，以便在单击图像时，在播放声音时暂停 10 秒，然后加载页面？

谢谢你或你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:52:58.027

您可以按如下方式更改代码：

```
<div style="display:none;">
    <audio id="audio1" src="SOUND.wav" controls preload="auto" autobuffer></audio>
</div>

<script> function EvalSound(soundobj) 
    { var thissound=document.getElementById(soundobj); thissound.play(); 
setTimeout( function() { window.location.href = 'PAGE.php'; }, 1000); } // change 1000 to whatever value you would want to wait in milliseconds.
</script>

<a href="#" onClick="EvalSound('audio1')"><img src="IMAGE.png"></a 
```

>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:04:07.180

和我之前的答案一样，只是我建议你使用音频api来确定声音的持续时间并将其设置为超时。

此外，要更改 url，您可以将其添加为参数。

```
function EvalSoundAndRedirect(soundobj, url) {
    var thissound = document.getElementById(soundobj);
    thissound.play();
    setTimeout(function() {
        window.location.href = url;
    }, thissound.duration);
} 
```

使用：

```
<a href="#" onClick="EvalSoundAndRedirect('audio1', 'PAGE.php')"><img src="IMAGE.png" /></a> 
```

# connection - 如何将我的练习 LAMP 服务器打开到非本地连接？

> ID：13960913
> 
> 赞同：1
> 
> 时间：2012-12-19T20:48:44.680
> 
> 标签：connection, external, lamp

所以我真的很喜欢设置服务器，我正在尝试获得一些经验。我已经在 Virtual Box VM 上的 Ubuntu Server 中设置了一个简单的本地 LAMP 服务器，并且到目前为止能够找到我自己的资源，我只是不知道如何允许外部连接。

据我所知，我需要将端口 80 连接转发到路由器内服务器机器的本地 ip。然后我应该能够通过使用它的 ip 从我的网络外部连接？我收集到我需要使用 dns 将我的服务器与域名配对。

我只是找不到这个过程的直接概述，它让我发疯！

任何资源都会很棒，除非我上面的内容是正确的！

# android - ListView 中的 CheckedTextView 未使用 AVD SDK 2.2 进行切换

> ID：13960915
> 
> 赞同：1
> 
> 时间：2012-12-19T20:48:48.763
> 
> 标签：android, android-layout, android-view

我正在使用 AVD 在不同的 API 中调试我的应用程序。使用 4.2.1（或 API 16/17）目标平台，一切顺利。但是当我使用 API 8 时，复选框之一不会被切换。是错误还是什么？我的代码如下：

listview_item_checkbox.xml

```
<CheckedTextView
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:textSize="22sp"
    android:paddingTop="7dp"
    android:paddingBottom="7dp"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
     /> 
```

MainActivity.java

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    CheckedTextView checkBox = (CheckedTextView) v.findViewById(R.id.text1);
    final int finalPosition = position;
    if (checkBox != null) {

        checkBox.toggle(); 
```

# datetime - SQLite 管理器中的 datetime()

> ID：13960916
> 
> 赞同：0
> 
> 时间：2012-12-19T20:48:51.300
> 
> 标签：datetime, sqlite, sqlitemanager

我似乎无法弄清楚为什么 datetime 对我从 CSV 导入的一些数据不起作用。我有一个列 TIMESTAMP，它的类型是日期时间。

从 GPS 限制 1 中选择 TIMESTAMP <-这给了我一个时间，“2009 年 6 月 29 日 00:00:00” 从 GPS 限制 1 中选择日期时间（TIMESTAMP）<- 这给了我 SQLite 管理器中的一个粉红色字段，它看起来是空的. 从 GPS 限制 1 中选择 datetime('now') <- 这给了我当前的日期和时间。（“2012-12-19 20:45:17”）它的格式与我的其他数据不同 - 是否存在数据类型问题？

到底是怎么回事？我的“时间戳”数据实际上没有转换为 DATETIME 对象吗？为什么存储为文本？有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:30:06.243

SQLite 没有原生日期/时间类型；日期存储为数字或字符串。

要被 SQLite 的内置[日期函数](http://www.sqlite.org/lang_datefunc.html)理解，日期字符串的格式必须类似于`yyyy-mm-dd hh:mm:ss`.

# webrtc - WebRTC 代码故障排除

> ID：13960924
> 
> 赞同：1
> 
> 时间：2012-12-19T20:49:05.807
> 
> 标签：webrtc

我用这个把头发拉出来。大约一个月前，我能够使用 SignalR 的优秀人员提供的一些示例代码，整理出一个概念验证 WebRTC 演示。该演示位于[此处](http://demo.alanta.com)，它的源代码在[此处](https://bitbucket.org/smithkl42/xsockets.webrtc)，它完成了它应该做的事情。

但是，当我使用该代码并将其移动到我们的实际应用程序中时，我无法让它工作。当然，必须对代码进行重大更改——不同的后端、不同的框架集和支持代码、支持多个同时连接等等——但核心逻辑非常相似。但我无法让它工作。

我在这里整理了一个示例应用程序来演示该问题：

[https://bitbucket.org/smithkl42/signalr.webrtc](https://bitbucket.org/smithkl42/signalr.webrtc)

核心 WebRTC 逻辑都在这个 TypeScript 文件中：

[https://bitbucket.org/smithkl42/signalr.webrtc/src/tip/SignalR.WebRTC/Scripts/Media/WebRTC.ts?at=default](https://bitbucket.org/smithkl42/signalr.webrtc/src/tip/SignalR.WebRTC/Scripts/Media/WebRTC.ts?at=default)

它有几百行长，所以我不会在这里发布它，但是您可以通过单击上面的链接来查看它。

当它运行时，它会产生如下输出：

> 12:17:58.531 WebRTCController.call(): 准备完成后调用 7d9e0d39-5047-4afe-86e5-e6e01b9f5955
> 
> 12:17:58.533 WebRTCController.prepareForCall()：准备通话：localSessionId='39d2df53-6854-415a-8748-b5230eda2eb1'; remoteSessionId='7d9e0d39-5047-4afe-86e5-e6e01b9f5955'
> 
> 12:18:0.139 Object.()：用户已授予媒体设备访问权限，因此继续准备通话
> 
> 12:18:0.141 Connection.createPeerConnection()：创建对等连接；使用 stunServer stun:stun1.l.google.com:19302
> 
> 12:18:0.144 ()：准备工作完成。创建和发送 JSEP 报价。实用程序.js:21
> 
> 12:18:0.272 Connection.handleIceCandidate()：STUN 服务器找到了一个 ICE 候选者（event.type='icecandidate'）。
> 
> 12:18:0.282 Connection.handleIceCandidate()：STUN 服务器找到了一个 ICE 候选者（event.type='icecandidate'）。
> 
> （更像这样）
> 
> 12:18:0.655 WebRTCController.handleJsepAnswer()：处理来自 7d9e0d39-5047-4afe-86e5-e6e01b9f5955 的 JsepAnswer
> 
> 12:18:0.694 Object.(): 将 ICE 候选发送到远程机器：{"sdpMLineIndex":0,"sdpMid":"audio","candidate":"a=candidate:2999745851 1 udp 2113937151 192.168.56.1 62978类型主机代 0\r\n"}
> 
> 12:18:0.706 Object.()：向远程机器发送 ICE 候选：{"sdpMLineIndex":0,"sdpMid":"audio","candidate":"a=candidate:2999745851 2 udp 2113937151 192.168.56.1 62978类型主机代 0\r\n"}
> 
> （更像这样）

但是它永远不会连接，即来自另一端的视频永远不会开始播放。在信令层，我可以通过日志和单步执行代码来判断第一个浏览器正在发送 JSEP 报价；第二个浏览器正在接收它、存储它并发回一个适当的 JSEP 答案；第一台机器正在存储该答案。然后每个 peerConnection 找到 ICE 候选并将它们发送到远程机器；并且每个 peerConnection 都在接收并显然在尝试那些 ICE 候选人；peerConnections 甚至引发了`onaddstream`事件。但视频永远不会开始播放。

peerConnection 对象的状态一直如下所示：

`(iceGatheringState=new; iceState=starting; readyState=active)`

令人沮丧的是，每隔一段时间，也许 20 次中就有一次，它*确实*有效，即两个视频都会出现。所以我没有做错*一切*。这听起来像是某种时间问题 - 但我无法弄清楚它是什么。据我所知，WebRTC 对象（特别是 RTCPeerConnection）中没有太多可以告诉您出了什么问题。

我不想让其他人为我进行故障排除，但是......好吧，我已经没有选择了。有没有其他人看到我做错了什么？

*2012-12-19 更新*：我正在取得一些进展。我意识到我正在`peerConnection.setLocalDescription()`同步调用，即没有指定回调。所以现在我有一些看起来像这样的代码行：

```
// Answer the call by sending a JsepAnswer message.
connection.peerConnection.createAnswer(
    answer => {
        connection.peerConnection.setLocalDescription(answer, () => {
            var signalState: mData.SignalState = {
                FromSessionId: connection.localSessionId,
                ToSessionId: connection.remoteSessionId,
                Message: JSON.stringify(answer)
            };
            me.roomHub.server.jsepAnswer(signalState);
            mUtil.log("Sent JSEP answer: " + signalState.Message);
            connection.readyForIceCandidates.resolve();
        },
        error => {
            mUtil.error("Error setting local description from created answer: " + error + "; answer=" + JSON.stringify(answer));
        });
    },
error => {
    mUtil.error("Error creating answer: " + error);
}, me.mediaConstraints); 
```

错误回调显示此`setLocalDescription()`错误：

> 16：14：42.439 WebRTCController.handleJsepOffer（）：从创建的答案设置本地描述时出错：SetLocalDescription 失败。answer={"sdp":"v=0\r\no=- 439659381 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=group:BUNDLE 音频视频\r\ na=msid 语义：WMS u9fhVrWeLLweqb5ubLkw61Ijsh6BM6vZLhjf\r\nm=音频 1 RTP/SAVPF 103 104 111 0 8 107 106 105 13 126\r\nc=IN IP4 0.0.0.0\r\na=rtcp:1 IN IP4 0.0。 0.0\r\na=ice-ufrag:vOKflTJ56gV0R9i0\r\na=ice-pwd:9nuXPMDvQ2mZATFCQyEzPRQz\r\na=sendrecv\r\na=mid:audio\r\na=rtcp-mux\r\na=crypto: 1 AES_CM_128_HMAC_SHA1_80 内联：m9q9pmLgLuFnfFC09KXKW5p8TjsKk+VdqX0OWv77\r\na=rtpmap:103 ISAC/16000\r\na=rtpmap:104 ISAC/32000\r\na=rtpmap:111 opus/48000/2\r\na=rtpmap PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:107 CN/48000\r\na=rtpmap:106 CN/32000\r\na=rtpmap:105 CN/16000\r\ na=rtpmap:13 CN/8000\r\na=rtpmap:

现在我只需要弄清楚为什么直接来自该`createAnswer()`方法的特定 SDP 失败了。

*2012-12-20 更新*：我在此处创建了该问题的在线演示：http: [//srdemo.alanta.com/](http://srdemo.alanta.com/)。我还打开了 Chrome 调试日志记录，结果我看到一堆看起来像这样的错误：

`[6584:7308:1220/091356:ERROR:rtc_peer_connection_handler.cc(84)] Native session description is null. [6584:7308:1220/091356:ERROR:rtc_peer_connection_handler.cc(84)] Native session description is null. [6584:7308:1220/091356:ERROR:rtc_peer_connection_handler.cc(84)] Native session description is null. [6584:7308:1220/091356:ERROR:rtc_peer_connection_handler.cc(84)] Native session description is null. [6584:7308:1220/091356:ERROR:rtc_peer_connection_handler.cc(84)] Native session description is null.`

不确定他们与我的问题有什么关系，但我正在继续调查。

*编辑 2012-12-20：我已经设法（我认为）缩小了问题的范围。有关更精确的详细信息，请参阅[此问题](https://stackoverflow.com/questions/13982309/using-signalr-as-service-layer-for-webrtc)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:39:02.943

Figured it out. Turns out that SignalR 1.0 RC1 has a bug in it that changes any "+" in a string into a space. So lines in the SDP that looked like this:

`a=ice-pwd:qZFVvgfnSso1b8UV1SUDd2+z`

Were getting changed into this:

`a=ice-pwd:qZFVvgfnSso1b8UV1SUDd2 z`

But because not every SDP had a "+" in it on a critical line, sometimes it would work. Everything explained.

The bug has been reported to the good folks working on SignalR (see [https://github.com/SignalR/SignalR/issues/1194](https://github.com/SignalR/SignalR/issues/1194)), and in the meantime, a simple `encodeURIComponent()` and `decodeURIComponent()` around the strings in question fixed it.

# ruby-on-rails - Ruby，如何为 hostmonster 上的 Rails 项目设置 GEM_PATH？

> ID：13960925
> 
> 赞同：2
> 
> 时间：2012-12-19T20:49:21.473
> 
> 标签：ruby-on-rails, gem

我是红宝石新手，很难设置我的宝石。有人可以帮我理解这条路径在**environment.rb中是如何工作的**

一些背景信息：

我在 hostmonster 上安装了我的 rails 应用程序，我正在尝试使用 SHELL 运行 SASS。我没有我的应用程序的本地副本。当我运行 SASS 命令时，我得到***-bash: sass: command not found***。这让我相信我的宝石之路是错误的。但问题是我并不真正了解路径是如何工作的。

**我特别对这条线感到困惑......**

```
home = File.expand_path("/home/#{ENV['USER']}")    
ENV['GEM_PATH'] = "#{home}/ruby/gems:/usr/lib64/ruby/gems/1.8" 
```

**注意：**这是我从 Cpanel 安装 Rails 应用程序时设置的默认路径。

**有些东西我不明白...**

1.  分号的目的是什么？
2.  对于`#{home}`，我想用我的主目录替换它吗？
3.  usr/lib64 来自哪里？我没有看到那个目录。我假设我必须创建它。

**另外：** 这就是hostmonster告诉我要做的（我已经做过了）......

使用 cPanel 中的文件管理器复制根目录中的**.bashrc 文件，将其命名为****.bashrc.bak**。现在编辑 .bashrc 文件并将以下内容添加到文件末尾：

*   导出 GEM_HOME=$HOME/ruby/gems
*   导出 GEM_PATH=$GEM_HOME:/usr/lib/ruby/gems/1.8
*   导出 GEM_CACHE=$GEM_HOME/cache
*   导出 PATH=$PATH:$HOME/ruby/gems/bin

使用 rails 应用程序时，请确保将以下内容添加到 ./config/environment.rb：ENV['GEM_PATH']'/path/to/your/home/ruby/gems:/usr/lib/ruby/gems /1.8'

*如果这是一个“noobish”问题，我深表歉意，我从未使用过 Ruby，所以我仍在学习它是如何工作的。我已经安装了 ruby​​、rails 和 sass。我可以在浏览器中运行我的项目。我只是无法让我的宝石工作。提前致谢。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:52:18.427

显然，我试图使用的 gem 没有安装在我的服务器上。当我运行 gem install sass 时，我以为我自己安装了它们。但是这不能正常工作，因为 Hostmonster 必须允许我安装 gems。

**我在这里发现了...**

[https://my.hostmonster.com/cgi/help/221](https://my.hostmonster.com/cgi/help/221)

**至于我必须执行以下操作的路径..**

```
home = File.expand_path("/home/#{ENV['MYCPANELUSERNAME']}")
ENV['GEM_PATH'] = "#{home}/ruby/gems:/usr/lib64/ruby/gems/1.8" 
```

所以基本上对于路径，我所要做的就是将“用户”更改为我的 cpanel 用户名。

另请注意，这仅在我的 .htaccess 设置为*“生产”*而不是*“开发*”时才有效。

[生产与开发的主题](https://stackoverflow.com/questions/8280318/running-a-rails-site-development-vs-production)

**除此之外，我的 .htaccess 文件也有问题。**

所以我不得不使用 vi 编辑器编辑我的 .htacess 文件。（可能对其他人不同）

**确保 .htaccess 中包含此内容**

*   选项 - 多视图
*   PassengerResolveSymlinksInDocumentRoot on
*   RailsEnv 制作 RackBaseURI / SetEnv GEM_HOME
*   /home1/examplec/ruby/gems

# java - 为数组按钮上的按钮设置 onclickListener 的最佳实践

> ID：13960926
> 
> 赞同：1
> 
> 时间：2012-12-19T20:49:24.203
> 
> 标签：java, arrays, swing, jbutton, actionlistener

我有一个类`Game`和一组按钮`buts`，我想在`fun(i,j)`单击任何 buts[i][j] 时调用 Game 类上的函数，我试过这样：

```
buts = new JButton[Setting.length][Setting.width];
    Game game = new Game(setting);
    int hgap = 4, vgap = 4;
    panel = new JPanel(new GridLayout(Setting.length, Setting.width, hgap, vgap));
for (int i = 0; i < Setting.length; i++) {
            for (int j = 0; j < Setting.width; j++) {
                //JButton btn = new JButton();
                buts[i][j] = new JButton();
                buts[i][j].setText(String.valueOf(j));
                setColor(buts[i][j], Game.cells[i][j].getColor());
                buts[i][j].addActionListener(new java.awt.event.ActionListener() {

                    @Override
                    public void actionPerformed(java.awt.event.ActionEvent evt) {
                        buttonActionPerformed(evt);
                    }
                });
                panel.add(buts[i][j]);
            }
        }
    private void buttonActionPerformed(ActionEvent evt) {

    } 
```

但我怎样才能将 i,j 发送到函数`buttonActionPerformed`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:58:29.100

您可以为每个使用具体的[Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)`JButton`并将值`i`&传递`j`到类的构造函数中。

**添加：**

```
buts[i][j].setAction(new MyAction(i, j)); 
```

**`Action`实施：**

```
class MyAction extends AbstractAction {
   private final int iValue;
   private final int jValue;

   public MyAction(int i, int j) {
      this.iValue = i;
      this.jValue = j;
   }

   @Override    
   public void actionPerformed(ActionEvent e) {
      buttonActionPerformed(e, iValue, jValue);
   }
} 
```

**和：**

```
private void buttonActionPerformed(ActionEvent evt, int i, int j) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T21:01:45.873

```
class MyActionListener implemments ActionListener{

     private final int i;
     private final int j;
     MyActionListener (int i, int j){
          this.i = i;
          this.j = j;
     }
}

buts[i][j].addActionListener(new MyActionListener(i,j) {
       public void actionPerformed(java.awt.event.ActionEvent evt) {
                    buttonActionPerformed(evt,this.i,this.j);
       }
});

private void buttonActionPerformed(ActionEvent evt,int i,int j) {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T22:28:45.067

有几种选择：

*   您可以将事件的来源 ( `ActionEvent#getSource()`) 与数组中的按钮进行比较，并检索`i`和`j`。缺点是你不断循环遍历数组
*   您可以按照其他答案中的建议将`i`and传递`j`给 an`Action`或 the`ActionListener`
*   您可以使用`JComponent#putClientProperty`and`JComponent#getClientProperty`方法将`i`and存储`j`在`JButton`. `JButton`可以通过`ActionEvent#getSource`方法访问

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T23:06:55.490

我最喜欢的做法是将 actionListener 设置为一个函数，并将 i 和 j 声明为 final。所以你会像这样设置你的按钮：

```
 for (int i = 0; i < Setting.length; i++) {
        for (int j = 0; j < Setting.width; j++) {
            //JButton btn = new JButton();
            buts[i][j] = new JButton();
            buts[i][j].setText(String.valueOf(j));
            setColor(buts[i][j], Game.cells[i][j].getColor());
            setButtonAction(buts[i][j], i, j);
            panel.add(buts[i][j]);
        }
    } 
```

并像这样声明方法`setButtonAction`：

```
public void setButtonAction(JButton button, final int i, final int j){
    button.addActionListener(new java.awt.event.ActionListener() {

        @Override
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            fun(i,j);
        }
    });
} 
```

您也可以在没有额外方法的情况下完成所有这些操作，但是您必须声明一些最终的 int 变量并将 i 和 j 的值传递给最终......它看起来很难看。

# java - 在Java中加密/解密输入/输出流？

> ID：13960927
> 
> 赞同：3
> 
> 时间：2012-12-19T20:49:34.290
> 
> 标签：java, security, encryption, stream

有没有办法在Java中加密和解密输入和输出流？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T20:52:22.530

看看 CipherInputStream 和 CipherOutputStream。

> CipherInputStream由 InputStream 和**Cipher**组成，因此 read() 方法返回从底层 InputStream 读取但已由 Cipher 额外处理的数据。Cipher 在被 CipherInputStream 使用之前必须完全初始化。
> 
> 例如，如果 Cipher 被初始化以进行解密，则 CipherInputStream 将尝试读取数据并对其进行解密，然后再返回解密的数据。
> 
> 此类严格遵守其祖先类 java.io.FilterInputStream 和 java.io.InputStream 的语义，尤其是失败语义。此类具有在其祖先类中指定的那些方法，并覆盖它们。此外，此类捕获其祖先类未引发的所有异常。特别是skip方法跳过，可用方法只统计封装Cipher处理过的数据。
> 
> 对于使用此类的程序员来说，不要使用未在此类中定义或覆盖的方法（例如后来添加到超类之一的新方法或构造函数），因为这些方法的设计和实现不太可能考虑对 CipherInputStream 的安全影响。

* * *

> CipherOutputStream由 OutputStream 和**Cipher**组成，因此 write() 方法首先处理数据，然后再将其写入底层 OutputStream。密码必须在被 CipherOutputStream 使用之前完全初始化。
> 
> 例如，如果密码被初始化为加密，CipherOutputStream 将在写出加密数据之前尝试加密数据。
> 
> 此类严格遵守其祖先类 java.io.OutputStream 和 java.io.FilterOutputStream 的语义，尤其是失败语义。此类具有在其祖先类中指定的那些方法，并覆盖它们。此外，此类捕获其祖先类未引发的所有异常。
> 
> 对于使用此类的程序员来说，不要使用未在此类中定义或覆盖的方法（例如后来添加到超类之一的新方法或构造函数），因为这些方法的设计和实现不太可能考虑对 CipherOutputStream 的安全影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:52:45.353

您可以使用[CipherOutputStream](http://docs.oracle.com/javase/7/docs/api/javax/crypto/CipherOutputStream.html)和[CipherInputStream](http://docs.oracle.com/javase/7/docs/api/javax/crypto/CipherInputStream.html)来加密或解密 Input/OutputStreams

# java - 启动带有 .bat 问题的程序

> ID：13960930
> 
> 赞同：0
> 
> 时间：2012-12-19T20:49:47.660
> 
> 标签：java, windows, cmd

我目前在 .bat 文件中运行它：

```
java -jar BungeeCord.jar 
```

运行 .bat 文件后，它会打开和关闭，并且不会保持打开状态。如果我手动进入 CMD，cd 进入文件夹并启动 bat 文件，它保持打开状态。单击并打开 .bat 文件与进入 cmd 并打开它有什么区别？

我可以说它没有启动，因为我根本无法连接到它。我需要一种纠正此问题的方法，因此只需单击它即可通过 .bat 启动它，现在它会快速打开和关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:10:12.560

这将在罐子完成后保持窗口打开。我不确定你的意思，所以我不确定这是否是你要找的。

```
cmd /k java -jar BungeeCord.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:56:52.483

如果它是立即打开和关闭，则该过程正在终止......

从命令提示符打开它时到底发生了什么？完成后您的 jar 是否正在运行？

尝试将输出重定向到如下文件：

java -jar BungeeCord.jar > out.txt

查看 out.txt 的内容，您可以找出可能是什么问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T01:14:30.143

我希望这会有所帮助，我使用这个脚本：

```
@ECHO OFF
TITLE LOBBY SERVER
color 0b
SET BINDIR=%~dp0
CD /D "%BINDIR%"

echo ---------------------------------------------------------------------
echo            STARTING UP SERVER, PLEACE WAIT...
echo ---------------------------------------------------------------------
timeout /t 5 /nobreak

:Start-Server
"%ProgramFiles(x86)%\Java\jre1.8.0_45\bin\java.exe" -Xincgc -Xmx1G -Xloggc:J:\logs\lobby.log -jar craftbukkit.jar

echo ---------------------------------------------------------------------
echo            SERVER HAS CRASHED!
echo            RESTARTING IN 5 SEKUNDES...
echo ---------------------------------------------------------------------
ping -n 10 127.0.0.1 > NUL

cls
GOTO Start-Server 
```

# c++ - Why only declare functions in headers

> ID：13960931
> 
> 赞同：2
> 
> 时间：2012-12-19T20:50:01.300
> 
> 标签：c++, header

i know what is a header file,but,i still don't understand why a lot of programmers make a header file,and a source file with the same name,and only **prototype** functions in the header file,while tell what the function does in the source file.

I never make functions and their prototypes in separate files,just stuff it all into the header file.

The question is,why make a source file for headers?Does it give any advantages?Is it just to make the code look cleaner?I don't understand.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T20:53:07.633

If you implement a function in a header, and then include the header into two or more different source files, you'll have multiple definitions of the same function. This violates the one definition rule.

It's possible to get around that by declaring the functions inline, but (unless the linker knows how to merge the multiple definitions) that can lead to code bloat.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T20:53:33.987

You usually define (not only declare) [inlined functions](http://en.wikipedia.org/wiki/Inline_expansion) in headers.

And you declare non-inlined functions (e.g. functions whose body is large enough), and define them (i.e. implement them) in one particular compilation unit.

Then the linker resolves the appropriate function names (usually [mangled names](http://en.wikipedia.org/wiki/Name_mangling)) at link-time. And you don't want to have multiply defined functions.

Having a function definition provided only by one compilation unit makes the total build time a bit faster.

With [link-time optimizations](http://en.wikipedia.org/wiki/Link-time_optimization) (e.g. the `-flto` option to `g++` both during compilation and during linking) things become more complicated.

Notice that huge software (some executables are nearly one gigabyte of binary, and simply linking them takes several minutes) bring constraints that a lone programmer don't even imagine. Just try to compile a large free software (Libreoffice, Firefox, Qt5, ...) from its source code to guess the issues.

BTW, you could in principle put all the code of some program in a single source file, but for valid and obvious reasons people don't do that.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T20:55:12.820

Putting function definitions into the header causes lengthy compile times when using any non-trivial system. It may work for small projects to make everything `inline` but it certainly does not work for bigger systems (not to mention large systems with a couple of hundred million lines of code).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T20:56:31.050

The function declarations inside a header file provide symbol references that can be used to link code together. When you compile individual source files, each one gets generated into object code.

If you want to use one source's functions in another source file, you need some way to know where that code is and how to call it. The compiler is able to use the function declarations for just this reason. It knows how to call it and what it returns, but it doesn't yet know where the source for the function is.

Once all the sources are compiled into object code, the linker then assembles all the object files into an executable (or library), and these symbol references are resolved.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:59:21.577

If you have all the code in a single, non-shared file it really doesn't matter where it is - in header or in source file.

There are 2 main reasons for splitting the code to headers and source files. They can be summarized like this:

*   **Technical**. If you have several source files interacting with each other, you need to include the headers. If you define everything in the header, you'll have multiple definitions of you code included - and that's a compilation error.

*   **Design**. Header files define the interface of your software which can be distributed to client software without exposure of the internal implementation.

# c# - 在 add in 中设置单元格的值

> ID：13960932
> 
> 赞同：0
> 
> 时间：2012-12-19T20:50:06.543
> 
> 标签：c#, excel, vba, excel-addins

我将解释我发现的所有内容，但简而言之，我只想**在后面的代码中设置单元格 A1 的值**。我已经尝试过[创建 Excel 插件 - 获取单元格值](https://stackoverflow.com/questions/5550726/create-excel-add-in-get-cell-value)以及其他链接，所有这些技术只有在我在宏上运行它们但我想从函数中执行它们时才有效。

那么让我开始解释：

我不明白为什么当我在函数和 Sub 上运行相同的代码时会出现奇怪的行为。举个例子：

```
Dim TimeToRun

Sub Macro1()

    'Dim addIn As COMAddIn
    'Dim automationObject As Object
    'Set addIn = Application.COMAddIns("ProbeAddIn")
    'Set automationObject = addIn.Object

    'automationObject.ImportData

    MsgBox "Hello world"

End Sub

Sub Macro2()

    TimeToRun = Now + TimeValue("00:00:01")

    Application.OnTime TimeToRun, "Macro1" ' run Macro1 on 1 seconds

End Sub

Function Test()

    TimeToRun = Now + TimeValue("00:00:01")

    Application.OnTime TimeToRun, "Macro1" ' run Macro1 on 1 seconds

End Function 
```

请注意，`Macro2`和函数`Test`具有相同的代码。为什么如果我运行 Macro2 它可以正常工作（出现消息框）。但是，如果我去一个单元格并输入`=Test()`，即使我有相同的代码，我也会收到错误！

我展示这个例子的原因是因为如果我通过直接运行宏来运行它，我在 Macro1 上注释掉的代码效果很好。如果我将该代码放在函数 Test 中，它将不起作用。该代码在我的 Visual Studio 加载项项目中执行以下方法：

![在此处输入图像描述](../Images/ec3fe2a1dd8a23e5c463e4061aadf2a7.png)

例外是：

> System.Runtime.InteropServices.COMException 未被用户代码处理 HResult=-2146827284 Message=Exception from HRESULT: 0x800A03EC
> Source="" ErrorCode=-2146827284 StackTrace: at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32 [] aWrapperTypes, MessageData& msgData) 在 Microsoft.Office.Interop.Excel.Range.set_Value2(Object value) 在 ReadWrite.ImportData() 在 C:\Users\Antonio\Dropbox_Temp\visual studio\Probe 添加测试\ProbeAddIn\ProbeAddIn \Class1.cs：第 82 行内部异常：

我得到了那个例外，因为我跑了：

```
Function Test()

    Dim addIn As COMAddIn
    Dim automationObject As Object
    Set addIn = Application.COMAddIns("ProbeAddIn")
    Set automationObject = addIn.Object                

    automationObject.ImportData

End Function 
```

代替

```
Sub Test()

    Dim addIn As COMAddIn
    Dim automationObject As Object
    Set addIn = Application.COMAddIns("ProbeAddIn")
    Set automationObject = addIn.Object

    automationObject.ImportData

End Function 
```

如何使宏和函数中的代码以相同的方式运行？我想在用户键入公式而不是在用户运行宏时触发该方法的执行。**即使我让函数运行宏，我也会得到相同的异常**我没有得到异常的唯一方法是，如果首先运行的是宏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:44:37.017

不确定，但您遇到的问题可能是因为当您的函数被触发时，Excel 应用程序处于**编辑模式**，因此无法接受来自外部的任何输入，因此当您尝试插入数据时出现异常。

如果您想以干净的方式以连续的方式更新单元，您需要一个**RTD 服务器**。

从您的单元格中，您只需调用：

```
=RTD("my.super.rtdserver",,"mydata") 
```

**您的RTD 服务器**会不时通知 Excel 新数据，并让 Excel在准备好时**回调以检索它们。**

# php - 在类构造函数中实例化供应商类

> ID：13960938
> 
> 赞同：0
> 
> 时间：2012-12-19T20:50:27.150
> 
> 标签：php, cakephp, cakephp-2.0, instantiation

在我的 CakePHP 2 应用程序中，我有这样的供应商。我需要在我的控制器类中创建这个供应商类的实例。因此，我将在控制器的不同功能中使用该实例。

```
App::import('Vendor', 'fancyVendor', array('file' => 'fancyVendor.php'));

class MyController extends AppController {

    public $fancyVendor;

    function beforeFilter() {
       $fancyVendor = new fancyVendor();
       $fancyVendor->setValue("12");
    }

    function showMe() {
       echo $fancyVendor->getValue();
    }
} 
```

在我的**showMe**函数中，我无法获得我在**beforeFilter**函数中设置的值。有没有合适的方法来实例化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:51:19.647

您需要了解[范围](http://php.net/manual/en/language.variables.scope.php)。您已经在作用域中初始化了一个变量，`beforeFilter()`然后尝试在`showMe`作用域中使用它。两者完全不同。

您可以创建一个范围为整个类的变量，通常称为属性...

```
function beforeFilter() {
   $this->fancyVendor = new fancyVendor();
   $this->fancyVendor->setValue("12");
}

function showMe() {
   echo $this->fancyVendor->getValue();
} 
```

还有一点需要注意的是，你可以使用`App::uses()`方法来加载类。根据您的命名，它会起作用。（类是通过这种方式延迟加载的）

```
App::uses('fancyVendor', 'Vendor'); 
```

# c++ - reinterpret_cast vs c 风格转换

> ID：13960939
> 
> 赞同：1
> 
> 时间：2012-12-19T20:50:28.587
> 
> 标签：c++

> **可能重复：**
> [c-style cast vs reinterpret_cast](https://stackoverflow.com/questions/8427107/c-style-cast-vs-reinterpret-cast)

有什么区别：

```
A* pA = new B;

B* p1 = (B*)pA;
B* p2 = reinterpret_cast<B*>(pA); 
```

他们都是做同一件事的相同方式吗？有什么理由选择一个而不是另一个吗？是否应该在 C++ 代码中避免“C 风格”转换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T20:53:09.623

C 风格的强制转换等价于以下成功的第一个：

*   一种`const_cast`
*   一种`static_cast`
*   一个`static_cast`接着`const_cast`
*   一种`reinterpret_cast`
*   一个`reinterpret_cast`接着`const_cast`

因此，在某些情况下，C 风格的演员表将具有相同的效果，`reinterpret_cast`但它们并不等效。由于 C 风格的演员表基本上是“哦，随便你怎么做”演员表，最好选择更具体的演员表。

对于您的示例，最好使用 a ，`static_cast`因为您知道派生对象的实际类型。如果不这样做，请使用`dynamic_cast`.

# css - 无法使缩略图居中

> ID：13960941
> 
> 赞同：4
> 
> 时间：2012-12-19T20:50:35.573
> 
> 标签：css, twitter-bootstrap, html-lists, thumbnails, center

我使用 Twitter Bootstrap 作为我的应用程序的框架，并使用缩略图来显示有关不同产品的信息（6 个分为两行）。但是，缩略图是左对齐的，我无法让它们居中。那怎么可能呢？

**html:**

```
<div class="row span12">
    <ul class="thumbnails span12">
        <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 1
          </div>
        </li>
        <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 2
          </div>
        </li>
        <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 3
          </div>
        </li>
          <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 4
          </div>
        </li>
        <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 5
          </div>
        </li>
          <li class="span3 product">
          <div class="thumbnail padding pagination-centered">
            Product 6
          </div>
        </li>
    </ul>
</div> 
```

**输出：**

```
 _____________________
    |                     |
    |  Products           |
    | ___   ___   ___     |
    ||   | |   | |   |    |
    ||___| |___| |___|    |
    | ___   ___   ___     |
    ||   | |   | |   |    |
    ||___| |___| |___|    |
    |                     |
    |_____________________| 
```

**期望的输出：**

```
 _____________________
    |                     |
    |  Products           |
    |   ___   ___   ___   |
    |  |   | |   | |   |  |
    |  |___| |___| |___|  |
    |   ___   ___   ___   |
    |  |   | |   | |   |  |
    |  |___| |___| |___|  |
    |                     |
    |_____________________| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:07:39.547

您需要将 uls 宽度设置为等于添加宽度 + 边框、边距和填充的 3 个元素。居中您可以通过将左右边距设置为自动来实现。

查看演示 [http://jsbin.com/odojit/2/edit](http://jsbin.com/odojit/2/edit)

```
.thumbnails li {
  width:100px;
  list-style:none;
  float:left;
  height:100px;
  margin:10px;
    border:solid black 1px;

}
ul {
  padding:0px;margin:0px;}
.span12 {
  width:368px;
  border:red solid 1px;
  margin-left:auto;
  margin-right:auto;
} 
```

要覆盖诸如引导程序之类的东西，您需要在新代码中具有更高的 css 特异性，这意味着更高的优先级。

根据经验：

id 选择器的价值是类选择器的 10 倍，类选择器是元素选择器的 10 倍。

```
#id div {code} 
```

覆盖

```
.class .class .class .class .class .class .class .class .class .class {css code} 
```

查看这篇文章了解更多详情：

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

因此，如果 bootstrap 使用 ID 选择器来覆盖它，您可以使用 body #idselector，这将赋予它 +1 特异性。!important 也有效，但在 IE6 中并不总是有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T14:03:23.573

你可以用这个............

```
.thumbnails li {
  width:100px;
  list-style:none;
  float:left;
  height:100px;
  margin:10px;
    border:solid black 1px;

}
ul {
  padding:{0px; 
```

边距：0px；}

```
 <ul class="thumbnails">
        <li>
          <div class="thumbnail">
            Product 1
          </div>
        </li>
        <li>
          <div class="thumbnail">
            Product 2
          </div>
        </li>
        <li>
          <div class="thumbnail">
            Product 3
          </div>
        </li>
          <li>
          <div class="thumbnail">
            Product 4
          </div>
        </li>
        <li class="span3 producer">
          <div class="thumbnail">
            Product 5
          </div>
        </li>
          <li>
          <div class="thumbnail">
            Product 6
          </div>
        </li>
      </ul> 
```

# objective-c - 子类中的 NSNotificationCenter addObserver

> ID：13960943
> 
> 赞同：4
> 
> 时间：2012-12-19T20:50:42.423
> 
> 标签：objective-c, cocoa, subclass, superclass, nsnotifications

我注册在超类（UIViewController）中得到通知，如下所示：

**超类.m**

```
- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(notification:)
                                                 name:@"Notification"
                                               object:nil];
}

- (void)notification:(NSNotification *)notification {

    // Do something for SuperClass with the notification
} 
```

现在在子类（SuperClass.m 的子类）中，我也像这样监听相同的通知：

**子类.m**

```
- (void)notification:(NSNotification *)notification {

    // Do something specific for SubClass with the notification
} 
```

这是一种可接受的（代码方面）方式来处理在处理超类中的通知时具有一般行为以及在处理子类中的通知时具有更具体的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:41:16.963

通常，当您希望在子类中允许更具体的行为，同时仍保持超类中的一般行为时，您可以调用子类`super`。例如，`-[UIViewController viewDidAppear:]`文档说：

> 您可以覆盖此方法以执行与呈现视图相关的其他任务。如果您覆盖此方法，则必须`super`在您的实现中的某个时间点调用。

因此，您的通知设置很好（尽管将`NSNotification`对象作为您希望被覆盖的方法的参数有点奇怪）——但您也需要调用`[super notification:notification]`以获取超类的行为。

# node.js - 从多个集合中填充菜单

> ID：13960946
> 
> 赞同：1
> 
> 时间：2012-12-19T20:50:54.420
> 
> 标签：node.js, mongodb, backbone.js, express, socket.io

我是backbone.js 和express 的新手，我一直在为我自己的项目改编Christophe Coenraets Wine Cellar REST API 示例应用程序。

我正在构建一个表单，该表单需要从 mongodb 中的多个不相关集合中填充多个菜单。

我可以用一个集合填充一个菜单，但我不知道如何将多个集合添加到我的表单视图中。

这是我用来填充一个菜单的文件。如何扩展它以填充两个菜单？

我想我可以为我想要填充的每个菜单创建一个新视图——但这似乎有点矫枉过正。

我可以将两个 mongodb find() 集合合并到一个对象中，并在页面上分别列出它们吗？如果是这样，怎么做？

提前致谢！

/routes/modules.js 包含：

> 出口.findAllModules = 功能（请求，RES）{
> 
> ```
> db.collection('modules', function(err, collection) {
> 
>     collection.find().toArray(function(err, items) {
> 
>         res.send(items);
> 
>     });
> 
> }); 
> ```
> 
> };

/server.js 包含：

> app.get('/modules', module.findAllModules);

/public/js/main.js 包含：

> 路线：{
> 
> “模块”：“列表”}

...

> 列表：功能（页面）{
> 
> ```
>  var p = page ? parseInt(page, 10) : 1;
> 
>     var moduleList = new ModuleCollection();
> 
>     moduleList.fetch({success: function(){
> 
>         console.log('in list function');
> 
>         $("#content").html(new ModuleListView({model: moduleList, page: p}).el);
> 
>     }});
> 
>     this.headerView.selectMenuItem('home-menu');
> 
> }, 
> ```

...

> utils.loadTemplate([
> 
> ```
> 'ModuleListItemView' ], function() {
> 
> app = new AppRouter();
> 
> Backbone.history.start(); }); 
> ```

/public/models/models.js 包含：

> window.Module = Backbone.Model.extend({
> 
> ```
> urlRoot: "/modules",
> 
> idAttribute: "_id",
> 
> initialize: function () {
>     this.validators = {};
> 
>     this.validators.name = function (value) {
>         return value.length > 0 ? {isValid: true} : {isValid: false, message: "You must enter a name"};
>     };
> 
> validateItem: function (key) {
>     return (this.validators[key]) ? this.validators[key](this.get(key)) : {isValid: true};
> },
> validateAll: function () {
>     var messages = {};
> 
>     for (var key in this.validators) {
>         if(this.validators.hasOwnProperty(key)) {
>             var check = this.validators[key](this.get(key));
>             if (check.isValid === false) {
>                 messages[key] = check.message;
>             }
>         }
>     }
>     return _.size(messages) > 0 ? {isValid: false, messages: messages} : {isValid: true};
> },
> 
> defaults: {
>     _id: null,
>     name: ""
> } }); 
> ```
> 
> window.ModuleCollection = Backbone.Collection.extend({
> 
> ```
> model: Module,
> 
> url: "/modules" 
> ```
> 
> });

/public/js/views/modulelist.js 包含：

> window.ModuleListView = Backbone.View.extend({
> 
> ```
> initialize: function () {
>     this.render();
> },
> 
> render: function () {
>     var modules = this.model.models;
> 
>     $(this.el).html('<ul class="thumbnails"></ul>');
> 
>     for (var i = 0; i < modules.length; i++) {
>         $('.thumbnails', this.el).append(new ModuleListItemView({model: modules[i]}).render().el);
>     }
>     return this;
> } }); 
> ```
> 
> window.ModuleListItemView = Backbone.View.extend({
> 
> ```
> tagName: "li",
> 
> initialize: function () {
> 
>     this.model.bind("change", this.render, this);
> 
>     this.model.bind("destroy", this.close, this);
> 
> },
> 
> render: function () {
> 
>     $(this.el).html(this.template(this.model.toJSON()));
> 
>     return this;
> 
> } }); 
> ```

/public/tpl/ModuleListView.html 包含：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:31:34.340

不完全确定您的代码是如何工作的，但这里有一些主干提示。

如果您想从集合中构建菜单，请不要将集合作为模型传递。

代替：

```
 $("#content").html(new ModuleListView({model: moduleList, page: p}).el); 
```

采用：

```
 $("#content").empty().append(new ModuleListView({collection: moduleList, page: p}).el); 
```

代替：

```
render: function () {
    var modules = this.model.models;

    $(this.el).html('<ul class="thumbnails"></ul>');

    for (var i = 0; i < modules.length; i++) {
        $('.thumbnails', this.el).append(new ModuleListItemView({model: modules[i]}).render().el);
    }
    return this;
} 
```

采用：

```
render: function () {
    this.$el.html('<ul class="thumbnails">');

    this.collection.each(function(model) {
        this.$('.thumbnails').append(new ModuleListItemView({model: model}).render().el);
    }, this);

    return this;
} 
```

如果您不需要更新或删除模型，只需将 url 路径添加`/modules`到集合中即可读取初始模块。

# c++ - AfxLoadLibrary 与 LoadLibrary

> ID：13960949
> 
> 赞同：4
> 
> 时间：2012-12-19T20:51:21.207
> 
> 标签：c++, visual-studio, visual-c++, dll, mfc

我有一个需要动态加载 DLL 的 MFC 应用程序。DLL 将用于检索运行时值，然后被卸载。我需要创建一个 MFC DLL 并通过加载它`AfxLoadLibrary()`还是可以创建一个传统的 C++ dll 并使用 Win32`LoadLibrary()`调用？有关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T21:00:40.657

MSDN 库文章的备注部分明确提到了这一点：

> 如果您的应用程序使用多个线程并且动态加载扩展 DLL，请务必使用 AfxLoadLibrary 和 AfxFreeLibrary（而不是 Win32 函数 LoadLibrary 和 FreeLibrary）。使用 AfxLoadLibrary 和 AfxFreeLibrary 可确保在加载和卸载扩展 DLL 时执行的启动和关闭代码不会破坏全局 MFC 状态。

因此，如果您正在加载包含 MFC 代码的 DLL，或者如果您在程序中使用线程，那么您应该使用它。

也就是说，至少在现代版本的 MFC 中，AfxLoadLibrary() 并没有做任何特别的事情：

```
HINSTANCE AFXAPI AfxLoadLibrary(LPCTSTR lpszModuleName)
{
     ASSERT(lpszModuleName != NULL);
     HINSTANCE hInstLib = LoadLibrary(lpszModuleName);
     return hInstLib;
} 
```

所以如果你猜错了，没有什么会发生严重的爆炸。谢天谢地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:58:10.047

如果您正在创建一个根本不使用 MFC 的普通 C++ DLL，则不需要创建 MFC DLL，您应该能够使用普通`LoadLibrary()`的 .

# asp.net - WCF - AspNetCompatibility 和 net.tcp 绑定

> ID：13960955
> 
> 赞同：1
> 
> 时间：2012-12-19T20:51:35.817
> 
> 标签：asp.net, wcf, .net-4.5

我需要将我的 WCF 服务公开给 ASP.Net 兼容性（因为我需要将对象存储在`ApplicationState`）

如果我这样做，我是否也可以通过 net.tcp 端点使用相同的服务？当使用 net.tcp 端点时，它是否仍会通过 Global.asax 从而使我能够访问`ApplicationState`值？

# python - Web 字体总是从静态路径返回 404

> ID：13960956
> 
> 赞同：1
> 
> 时间：2012-12-19T20:51:35.773
> 
> 标签：python, pyramid

我在使用静态视图时遇到问题，它被配置为从服务器上的“资产”文件夹中提供文件，并且适用于以下“/assets/img/hdr.png”、“/assets/style/default” .css' 但是，当尝试提供网络字体时，它总是返回 404 not found （尽管我已经三次检查文件是否位于正确的位置（'/assets/font.woff'）

我需要配置一些额外的东西以允许提供非 img/css 文件吗？

`config.add_static_view(name='assets', path='assets')`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:20:08.577

`path`参数应该是资产[规范](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/glossary.html#term-asset-specification)。这意味着你应该在`path`你的包名前面加上前缀`mypkg:assets`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T22:11:12.800

不确定它是否仍然与 OP 相关，但我遇到了同样的问题。

原因是`setup.py install`根本没有复制字体文件，解决方案是在`MANIFEST.in`文件中包含所有字体扩展名。

# c# - 如何以编程方式将图像添加到 asp.net 链接按钮

> ID：13960958
> 
> 赞同：4
> 
> 时间：2012-12-19T20:51:46.897
> 
> 标签：c#, asp.net, asplinkbutton

我有一个 ASP.NET 链接按钮，我需要向其中添加文本和图像，我认为我可以使用`Controls.Add`但不使用骰子将图像添加到按钮。

这是我到目前为止所拥有的：

```
foreach (var entity in metadata.Meta.Where(e => e.ReportableObject == true))
{
    LinkButton lb = new LinkButton();
    string iconpath = "~/images/search/" + entity.ClassName + ".png";
    lb.CssClass = "entityIcon";
    lb.Controls.Add(new Image { ImageUrl =  iconpath , CssClass = "imgSize"});
    lb.Text = entity.ClassName;
    entityHolder.Controls.Add(lb);
} 
```

当控件呈现时，我看到了文本，但我什至没有得到呈现的图像容器。我认为它可能是图像的路径，但即使我尝试使用完整的限定路径从现有站点映射到图像，也不会呈现任何内容。

编辑：为澄清起见，主页（链接或图像）中没有 asp.net 控件，此 for 循环正在迭代集合并在运行时创建控件。最后一行`entityHolder`是添加按钮的 ASP.NET 面板。

如果这是可能的，有人可以帮助我理解我做错了什么。我必须使用 a`LinkButton`而不是 a`ImageButton`因为我需要渲染文本和图像。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:56:30.373

使用`background`css 属性而不是添加新控件。

```
 LinkButton lb = new LinkButton;
 string iconpath = "~/images/search/" + entity.ClassName + ".png";

 lb.Style.Add("background", "url('" + base.ResolveUrl(iconpath) + "') left center no-repeat");

 lb.CssClass = "entityIcon";
 lb.Text = entity.ClassName;
 entityHolder.Controls.Add(lb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:19:51.130

您必须通过操作控件的 Text 属性来呈现`<img`标记，例如：

```
foreach (var entity in metadata.Meta.Where(e => e.ReportableObject == true))
{
      LinkButton lb = new LinkButton();
      string iconpath = ResolveClientUrl("~/images/search/" + entity.ClassName + ".png");
      lb.CssClass = "entityIcon";
      lb.Text = string.Format(@"image <img src=""{0}"" class=""{1}"" />",iconpath,"imgSize");
      entityHolder.Controls.Add(lb);
} 
```

# python - pymongo：优雅地删除记录

> ID：13960959
> 
> 赞同：29
> 
> 时间：2012-12-19T20:51:50.377
> 
> 标签：python, mongodb, pymongo

这是我使用 pymongo 删除一堆记录的代码

```
ids = []
with MongoClient(MONGODB_HOST) as connection:
    db = connection[MONGODB_NAME]
    collection = db[MONGODN_COLLECTION]
    for obj in collection.find({"date": {"$gt": "2012-12-15"}}):
        ids.append(obj["_id"])
    for id in ids:
        print id
        collection.remove({"_id":ObjectId(id)}) 
```

有没有更好的方法来删除这些记录？比如直接删除一整套记录

```
collection.find({"date": {"$gt": "2012-12-15"}}).delete() or remove() 
```

或从 obj 中删除

```
 obj.delete() or obj.remove() 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-19T21:00:20.573

您可以使用以下内容：

```
collection.remove({"date": {"$gt": "2012-12-15"}}) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-11-30T17:55:54.790

目前`collection.remove(filter)`已弃用，请使用`collection.delete_many(filter)`.

例子：`collection.delete_many({"author": ObjectId("...")})`

# xml - 默认 Jersery 输出 MIME 类型为 xml

> ID：13960960
> 
> 赞同：1
> 
> 时间：2012-12-19T20:51:50.707
> 
> 标签：xml, jersey, http-status-code-404

当 Jersey 返回 404 时（未找到 @Path 时），它默认将 404 作为 HTML 返回。但是，因为我们的 Web 服务的客户端需要 XML 来处理所有内容（我们在代码中使用 @Produces("application/xml") 处理这些内容），所以我们希望将 Jersey 配置为也将其所有*默认*错误内容作为 XML 发送。

你如何配置泽西岛来做到这一点。如果没有办法，建议如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:32:43.613

对于 tomcat，您可以尝试在 web.xml 中执行此操作

```
 <error-page> 
 <error-code>404</error-code> 
 <location>/404.jsp</location> 
 </error-page> 
```

您的 404.jsp 可能包含客户端期望的 xml 响应。

# javascript - 在本地文件应用程序中拥有多个 js 文件是否会影响性能？

> ID：13960961
> 
> 赞同：2
> 
> 时间：2012-12-19T20:51:52.043
> 
> 标签：javascript, html, performance

[这个问题](https://stackoverflow.com/questions/316944/jquery-javascript-performance-issue-when-having-a-lot-of-small-js-files)表明拥有更少的 js 文件可以提高性能，因为每个文件都会引发一个 HTTP 请求。我的问题是关于本地文件应用程序（具体是PhoneGap 应用程序），其中 html 和 js 文件都存储在设备本地，因此它们是通过`file://`. 因为它们不需要 http 请求，所以减少文件是否还有性能优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:55:36.440

我在我的 PhoneGap 应用程序中加载了大约 200 个 .js 文件，没有明显的性能问题，所以我不这么认为。特别是，我使用 Require.js 根据需要加载它们。例如，按钮单击处理程序可能需要显示操作结果所需的代码。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:55:49.217

不，那里不应该有问题。HTTP 请求的主要问题是[*延迟*](http://en.wikipedia.org/wiki/Latency_%28engineering%29)。对于本地请求（尤其是对 SSD，如手机和大多数平板电脑），延迟确实非常低。

我会仔细检查是否拥有大量单独的小文件而不是一个大文件不会使您的应用程序看起来比需要的大。这取决于存储文件的文件系统的性质，但请记住，大多数文件系统都有我们过去所说的“集群”大小，这是文件最终占用的最小空间量（即使文件本身实际上比那个小得多）。因此，如果您在最小分配单元为 4k 的文件系统上有 100 个 1k 文件，您将占用 400k；如果你有一个 100k 的文件，你将占用 100k。当然，即使是 400k 在今天的设备上也不算多。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:56:37.653

尝试有 1000 个不同的 js 文件，大小为 1kb，然后加载程序 100 次。现在有 1 个 1000kb 的 js 文件并加载 100 次。相比。:)

# sql - SQL - 将变量从第一个选择传递到第二个选择

> ID：13960969
> 
> 赞同：4
> 
> 时间：2012-12-19T20:52:13.383
> 
> 标签：sql, select

我有一张桌子，里面有`things`列出的物品`ItemID`。给定一个 ItemID，我需要获取具有 ItemID 的记录以及具有相同的所有其他项目`name`。

在下面的示例数据中，给定 ItemID 为 1，我需要选择与 ItemID 1 具有相同名称（在本例中为“poptarts”）的所有记录，包括 ItemID 为 1 的记录。

```
ItemID = 1 name = poptarts
ItemID = 7 name = poptarts
ItemID = 8 name = cheddar
ItemID = 323 name = poptarts

select a.ItemID, a.name from things where a.ItemID = '1'
UNION
select b.ItemID, b.name from things where b.name = a.name 
```

但是，我在上面编写的 SQL 不会将 a.name 传递给第二个选择。有没有办法将名字值传递给第二个选择？我希望语句返回 itemid = 1 作为第一行，7 和 323 作为其他行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:56:07.590

`UNION`仅用于连接两个不同的集合。根据您的示例，您可能可以执行以下操作：

```
SELECT a.ItemID, a.Name
FROM things a
WHERE name IN (SELECT name FROM things WHERE itemID = 1) 
```

有很多方法可以编写这种查询，并且取决于您使用的 SQL 的风格，但这应该或多或少是通用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:57:00.647

```
select 
  a.itemID,
  a.name
from
  things a
where a.name in (
  select name
  from things b
  where b.itemID = '1'
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:06:18.990

```
SELECT this.name, this.id, that.id
FROM thing this
LEFT JOIN thing that ON that.name=this.name AND that.id <> this.id
WHERE this.id = 1
   ; 
```

注意：这也会选择没有双记录的 this-rows；在这种情况下，that.id 将为 NULL。如果要抑制没有双记录的记录，请删除`LEFT`.

更新：添加了 id <> id 子句来抑制明显的匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:58:35.793

如果您真的只有一张桌子，则无需将其带入两次`UNION`，或者像 htat 之类的任何花哨的东西。

```
SELECT 
    name
FROM
    a --assuming this is your only table
GROUP BY 
    itemID, name
HAVING
    itemID = '1' 
```

# php - PHP sql不返回所有值

> ID：13960974
> 
> 赞同：1
> 
> 时间：2012-12-19T20:52:28.173
> 
> 标签：php, html, mysql, phpmyadmin

当我直接从我的管理员 PHP 执行此查询时，我得到了 5 个结果。

```
SELECT img FROM `table`.`goog` WHERE `url` LIKE '%google.com%' and `pictureID` != 'picture_50d22657a423b6.62354164'; 
```

但是，当我的代码

```
$sql2 = "SELECT img FROM `table`.`goog` WHERE `url` LIKE '%$url%' and `pictureID` != '$pictureID';";
    // echo $sql2;
$result2=mysql_query($sql2);
$rows2 = mysql_fetch_array($result2);

mysql_close($con);

print_r(count($rows2));

echo "<br/>";

echo $sql2; 
```

它打印出来

```
2 
SELECT img FROM `ashkan`.`goog` WHERE `url` LIKE '%66.228.42.45%' and `pictureID` != 'picture_50d22657a423b6.62354164'; 
```

我还想指出，我在管理员的 php 中运行的查询是从我的代码返回的内容中复制的。

那么，为什么一个只返回 2 个项目，而另一个返回 5 个？

**编辑**

我在底部添加了以下内容

```
var_dump($rows2);
echo "<br/>";
echo mysql_num_rows($result2); 
```

得到了这个

```
array(2) { [0]=> string(1) "b" ["img"]=> string(1) "b" } 
5 
```

我有一些东西可以手动选择一行

本质上我希望能够做到

```
echo $rows2[somenum]; //that some number is at random and only one at a time 
```

但是，照原样，我只能访问第 0 项，而不是全部 5 项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:54:07.047

`mysql_fetch_array()`仅从结果集中获取一行并将指针向前移动。

如果要计算查询返回的行数，请使用[`mysql_num_rows()`](http://us3.php.net/manual/en/function.mysql-num-rows.php)

```
echo mysql_num_rows($result2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:55:05.777

# 更新代码

这是您更新的代码：

```
$mysqlQuery=mysql_query("SELECT img FROM `table`.`goog` WHERE `url` LIKE '%$url%' and `pictureID` != '$pictureID");
$databaseArray=array();

while($arrayQuery=mysql_fetch_array($mysqlQuery))
{
    $imageName=$arrayQuery['img'];

    $databaseArray[]=$imageName;
}

echo "Database returned ".count($databaseArray)." rows.";

print_r($databaseArray);

echo $databaseArray[0]; // prints image name row 1
echo $databaseArray[1]; // prints image name row 2
echo $databaseArray[2]; // prints image name row 3
// etc etc etc 
```

* * *

## 旧代码

做这个：

```
$sql2 = "SELECT img FROM `table`.`goog` WHERE `url` LIKE '%$url%' and `pictureID` != '$pictureID';";
    // echo $sql2;
$result2=mysql_query($sql2);

while($data = mysql_fetch_array($result2))
{
    var_dump($data);
} 
```

[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)一次只返回一行。上面的代码循环在您的数据库中找到的所有行。如果你只想计算行数，那么检查[mysql_num_rows](http://php.net/manual/en/function.mysql-num-rows.php) () 函数。

您还应该使用 mysqli_* 而不是 mysql_*，因为它已被弃用。请阅读更多内容：http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T20:57:42.027

通过使用：

`print_r(count($rows2));`

你只是在计算这一行的数组键的数量

你应该这样做：

`echo mysql_num_rows($result2);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:55:17.640

您必须迭代结果。

```
$sql2 = "SELECT img FROM `table`.`goog` WHERE `url` LIKE '%$url%' and `pictureID` != '$pictureID';";
    // echo $sql2;
$result2=mysql_query($sql2);

// iterate over the results
while($row = mysql_fetch_assoc($result2)) {
    print_r($row); 
}

mysql_close($con); 
```

# java - 如何在 Play 框架 2 中格式化输入值？

> ID：13960975
> 
> 赞同：4
> 
> 时间：2012-12-19T20:52:30.300
> 
> 标签：java, scala, view, playframework, playframework-2.0

如何在 Play 中格式化输入值以保留 2 位小数！框架 2？例如，我希望价格看起来像“100.00”，但它显示为“100.0”。我是在模型上添加注释，还是在表单中输入参数？

我试过了，但它没有改变格式：

```
@inputText(myForm("price"), 'format -> "###.##") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T21:32:35.103

我将数据类型从 Double 更改为 BigDecimal 并将比例设置为 2。这会自动处理格式化它。

```
@Column(scale = 2)
public BigDecimal price; 
```

# javascript - Highcharts：在一个系列直方图中为图例添加不同的颜色

> ID：13960984
> 
> 赞同：5
> 
> 时间：2012-12-19T20:53:07.307
> 
> 标签：javascript, highcharts, histogram, legend, series

我在这里有问题的示例代码：http: [//jsfiddle.net/pzamora/ztxPr/1/](http://jsfiddle.net/pzamora/ztxPr/1/)

我的系列中有不同的颜色，但是我需要它们出现在图例中

```
series: [{ name: 'V Genes',
        data: 
        [
            { 
                count: 18320.0, 
                y: 0.92, 
                color: '#3D96AE' 
            }, 
            { 
                count: 1337.0, 
                y: 0.17, 
                color: '#3D96AE' 
            }, 
            { 
                count: 33970.0, 
                y: 1.71, 
                color: '#4572A7' 
            }, 
            { 
                count: 1221.0, 
                y: 1.06, 
                color: '#3D96AE' 
            }, 
            { 
                count: 22073.0, 
                y: 1.11, 
                color: '#4572A7' 
            }, 
            { 
                count: 8331.0, 
                y: 0.42, 
                color: '#3D96AE' 
            }, 
            { 
                count: 64974.0, 
                y: 3.27, 
                color: '#4572A7' 
            },
            { 
                count: 9532.0, 
                y: 0.48, 
                color: '#3D96AE' 
            }, 
            { 
                count: 18106.0, 
                y: 0.91, 
                color: '#4572A7' 
            }
        ]
    }] 
```

..我将 x 值与类别位置匹配，但我没有将所有数据显示在图表上

@jsfiddle：http: [//jsfiddle.net/pzamora/phrP7/4/](http://jsfiddle.net/pzamora/phrP7/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:05:03.977

您可以执行以下操作：

1.  将数据分成两个系列
2.  `color`为每个系列中的图例添加
3.  为每个值添加`x`参数，使它们不重叠

    ```
    series: [{ name: 'X Genes', color: '#3D96AE',
        data:
        [ 
            {
                count: 18320.0,
                y: 0.92,
                color: '#3D96AE',
                x: 0
            },
            {
                count: 1337.0,
                y: 0.17,
                color: '#3D96AE',
                x: 1
            },
            {
                count: 1221.0,
                y: 1.06,
                color: '#3D96AE',
                x: 3
            },
            {
                count: 8331.0,
                y: 0.42,
                color: '#3D96AE',
                x: 5
            },
            {
                count: 9532.0,
                y: 0.48,
                color: '#3D96AE',
                x: 7
            }
        ]
    },
    { name: 'V Genes', color: '#4572A7',
        data:
        [
            {
                count: 33970.0,
                y: 1.71,
                color: '#4572A7',
                x: 2
            },
            {
                count: 22073.0,
                y: 1.11,
                color: '#4572A7',
                x: 4
            },
            {
                count: 64974.0,
                y: 3.27,
                color: '#4572A7',
                x: 6
            },
            {
                count: 18106.0,
                y: 0.91,
                color: '#4572A7',
                x: 8
            }
        ]
    }] 
    ```

4.  添加`stacking: 'normal`到 ，`plotOptions`使值位于每列的中间。

    ```
    plotOptions: {
            column: {
                cursor: 'pointer',
                stacking: 'normal'
            }
    }, 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:30:13.730

```
series: [{ name: 'X Genes', color: '#3D96AE',
        data:
        [
            {
                count: 18320.0,
                y: 0.92,
                x: 0
            },
            {
                count: 1337.0,
                y: 0.17,
                x: 1
            },
            {
                count: 1221.0,
                y: 1.06,
                x: 3
            },
            {
                count: 8331.0,
                y: 0.42,
                x: 5
            },
            {
                count: 9532.0,
                y: 0.48,
                x: 7
            }
        ]
    },
    { name: 'V Genes', color: '#4572A7',
        data:
        [
            {
                count: 33970.0,
                y: 1.71,
                x: 2
            },
            {
                count: 22073.0,
                y: 1.11,
                x: 4
            },
            {
                count: 64974.0,
                y: 3.27,
                x: 6
            },
            {
                count: 18106.0,
                y: 0.91,
                x: 8
            }
        ]
    }] 
```

You do not need to specify color attribute for each point if you specify it for series.

[JsFiddle Demo](http://jsfiddle.net/zaheerahmed/ztxPr/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T23:37:01.813

对于每个图例元素，您必须创建一个系列。
因此，如果您想要两个元素，则必须创建 2 个系列。
然后您必须`x`为每个点设置值，以使列堆叠在类别上。

[**演示**](http://jsfiddle.net/3dwSh/)

所以，如果我有以下类别：

```
['first', 'second', 'third'] 
```

我的系列必须有以下数据：
serie1：`[{count: 400, y: 10, x: 1}]`
serie2：`[{count: 300, y: 5, x: 0}, {count: 500, y: 15, x: 2}]`

这个案例系列 1 出现在`second`和系列 2 上`first`和`third`。

[**演示**](http://jsfiddle.net/3dwSh/1/)

*参考*

*   [系列数据](http://api.highcharts.com/highstock#series.data)

**更新**：

更新是因为她的类别有问题。发生这种情况是因为`x`值必须是 a`integer`而不是 a `string`。

```
{
    y: 40,
    x: 2,
    count: 300
} 
```

[**演示**](http://jsfiddle.net/phrP7/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:58:14.837

图例中的系列只能有一种颜色，而系列中的每个点都可以覆盖这种颜色（正如您在代码中所做的那样）。如果您想在图例中获得更多数据，您可以使用您想要的代码将您的单个系列分成多个。目前尚不清楚您对该问题的预期结果是什么。

# directx - DirectX11 CreateWICTextureFromMemory 使用 PNG

> ID：13960986
> 
> 赞同：2
> 
> 时间：2012-12-19T20:53:12.193
> 
> 标签：directx, png, directx-11, wic

我目前已经使用 CreateWICTextureFromFile 加载了纹理，但是我想对其进行更多控制，并且我想将图像以字节形式存储在资源加载器中。下面只是两组测试代码，它们返回两个单独的结果，我正在寻找对可能解决方案的任何见解。

```
ID3D11ShaderResourceView* srv;

std::basic_ifstream<unsigned char> file("image.png", std::ios::binary);

file.seekg(0,std::ios::end);
int length = file.tellg();
file.seekg(0,std::ios::beg);

unsigned char* buffer = new unsigned char[length];
file.read(&buffer[0],length);

file.close();

HRESULT hr;
hr = DirectX::CreateWICTextureFromMemory(_D3D->GetDevice(), _D3D->GetDeviceContext(), &buffer[0], sizeof(buffer), nullptr, &srv, NULL); 
```

作为上述代码的返回，我得到 Component not found。

```
std::ifstream file;
ID3D11ShaderResourceView* srv;

file.open("../Assets/Textures/osg.png", std::ios::binary);

file.seekg(0,std::ios::end);
int length = file.tellg();
file.seekg(0,std::ios::beg);

std::vector<char> buffer(length);
file.read(&buffer[0],length);

file.close();

HRESULT hr;
hr = DirectX::CreateWICTextureFromMemory(_D3D->GetDevice(), _D3D->GetDeviceContext(), (const uint8_t*)&buffer[0], sizeof(buffer), nullptr, &srv, NULL); 
```

上面的代码返回图像格式未知。

我显然在这里做错了什么，非常感谢任何帮助。试图在stackoverflow上找到任何类似的东西，谷歌无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:19:38.123

希望尝试做同样事情的人会找到这个解决方案。

下面是我用来解决这个问题的代码。

```
std::basic_ifstream<unsigned char> file("image.png", std::ios::binary);

if (file.is_open())
{
    file.seekg(0,std::ios::end);
    int length = file.tellg();
    file.seekg(0,std::ios::beg);

    unsigned char* buffer = new unsigned char[length];
    file.read(&buffer[0],length);
    file.close();

    HRESULT hr;
    hr = DirectX::CreateWICTextureFromMemory(_D3D->GetDevice(), _D3D->GetDeviceContext(), &buffer[0], (size_t)length, nullptr, &srv, NULL);
} 
```

重要的变化`(size_t)length`在于`CreateWICTextureFromMemory`

这确实是一个愚蠢的错误。

# ios - 按角度旋转 UIImageView

> ID：13960989
> 
> 赞同：1
> 
> 时间：2012-12-19T20:53:20.380
> 
> 标签：ios, xcode

我想通过按下按钮来旋转 UIImageView。我正在使用这段代码：

```
#import "UIImage-Extensions.h"
UIImage *rotatedImage = [SplashItGroupPicker.image imageRotatedByDegrees:360/arrayCount];
SplashItGroupPicker.image = rotatedImage; 
```

在“UIImage-Extensions.h”中我有：

```
@interface UIImage (CS_Extensions)
- (UIImage *)imageRotatedByRadians:(CGFloat)radians;
- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees; 
```

在 .m 中：

```
- (UIImage *)imageRotatedByRadians:(CGFloat)radians
{
return [self imageRotatedByDegrees:RadiansToDegrees(radians)];
}

 - (UIImage *)imageRotatedByDegrees:(CGFloat)degrees
{
// calculate the size of the rotated view's containing box for our drawing space
UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,self.size.width,     self.size.height)];
CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));
rotatedViewBox.transform = t;
CGSize rotatedSize = rotatedViewBox.frame.size;

// Create the bitmap context
UIGraphicsBeginImageContext(rotatedSize);
CGContextRef bitmap = UIGraphicsGetCurrentContext();

// Move the origin to the middle of the image so we will rotate and scale around the center.
CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

//   // Rotate the image context
CGContextRotateCTM(bitmap, DegreesToRadians(degrees));

// Now, draw the rotated/scaled image into the context
CGContextScaleCTM(bitmap, 1.0, -1.0);
CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage;

} 
```

...旋转工作正常，但是当图像旋转时，图像也会变小，我不明白为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:46:50.343

这是一个猜测，这是否只发生在 Retina 屏幕上？每当从图形上下文中保存 UIImage 时，您需要确保比例正确。这就是我的做法：

```
CGFloat scale = [[UIScreen mainScreen] scale];
CGSize size = CGSizeMake(rotatedViewBox.frame.size.width * scale, rotatedViewBox.frame.size.height * scale);

UIGraphicsBeginImageContext( size );

/* Do your image manipulations here */

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// overwrite the image with one that has the correct scale set
newImage = [UIImage imageWithCGImage:newImage.CGImage scale:scale orientation:newImage.imageOrientation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T15:54:41.240

使用 Kekoa 的代码片段（非常感谢），我能够获得一个可以在基于 Apples rotateImage 代码的视网膜设备上运行的 rotateImage 函数：

```
- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees {
    CGFloat radians = DegreesToRadians(degrees);

    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0, self.size.width, self.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(radians);
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;

    UIGraphicsBeginImageContextWithOptions(rotatedSize, NO, [[UIScreen mainScreen] scale]);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    CGContextTranslateCTM(bitmap, rotatedSize.width / 2, rotatedSize.height / 2);

    CGContextRotateCTM(bitmap, radians);

    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2 , self.size.width, self.size.height), self.CGImage );

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T07:40:11.943

没有必要`UIGraphicsGetImageFromCurrentImageContext`。它是一种获取主屏幕所需部分的屏幕截图的方法。所以结果图像质量受到影响。获得旋转图像的唯一方法是......

首先旋转你的图像视图（如果你想显示旋转视图）

```
[mainImgV setTransform:CGAffineTransformRotate(mainImgV.transform, M_PI)]; 
```

它会旋转你的图像视图。现在你将通过这些线来拍摄这个旋转的图像。（你也可以在不旋转 imgaeview 的情况下调用这些线。）

```
 CGImageRef cgRef = mainImgV.image.CGImage;
    newImage = [[UIImage alloc] initWithCGImage:cgRef scale:1.0 orientation:UIImageOrientationDown]; 
```

无需保存或截取屏幕截图或损害质量差的图像。只是享受编码。

# mysql - mysql从join查询中得到多个结果

> ID：13960990
> 
> 赞同：2
> 
> 时间：2012-12-19T20:53:22.627
> 
> 标签：mysql

当我对特定标签执行搜索查询时，我无法从“catalog_tag”表中返回多个“标签”。如果我对“catalog.catalog_id”进行搜索，我会通过内部连接获得所有关联的标签。搜索特定标签时有没有办法抓取标签？

表：

```
catalog table has: catalog_id|name|post_date

catalog_tag_relationship has: catalog_id|tag_id

catalog_tag has: tag_id|tag_name 
```

SQL：

```
SELECT catalog_id, name, tag.tag_id, tag.tag_name 
FROM catalog   
INNER JOIN catalog_tag_relationship tagRel ON (tagRel.catalog_id=catalog.catalog_id)  
INNER JOIN catalog_tag tag ON (tagRel.catalog_tag_id=tag.tag_id)  
WHERE (tag.tag_name='dinosaurs') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:11:20.010

修改：

```
SELECT
  catalog.catalog_id,
  catalog.name,
  tag.tag_id,
  tag.tag_name
FROM (
  SELECT
    catalog.catalog_id as search_id
  FROM catalog
  INNER JOIN catalog_tag_relationship tagRel
          ON tagRel.catalog_id=catalog.catalog_id
  INNER JOIN catalog_tag tag ON tagRel.catalog_tag_id=tag.tag_id
  WHERE tag_name='dinosaurs'
  GROUP BY catalog.catalog_id
) AS searchList
INNER JOIN catalog ON catalog.catalog_id = search_id
INNER JOIN catalog_tag_relationship tagRel
        ON tagRel.catalog_id=catalog.catalog_id
INNER JOIN catalog_tag tag ON tagRel.catalog_tag_id=tag.tag_id 
```

编辑：这应该返回与从表中选择单个列表相同的结果`catalog`。

第 1 步：查找目录 ID 的匹配搜索条件列表。

第 2 步：填写第 1 步中找到的目录 ID 的所有目录信息。

这将返回每个目录条目多行，但每个唯一目录 <-> 标记映射仅返回 1 行。如果您希望每个目录有一行，则需要`GROUP_CONCAT()`查看该目录的所有不同标签。

# java - 类抛出异常

> ID：13960991
> 
> 赞同：-3
> 
> 时间：2012-12-19T20:53:24.850
> 
> 标签：java, class, exception

我正在尝试在 Netbeans 中重构一个大型程序，但我有点迷茫。我从来都不是非常模块化的，但我现在正试图通过实际学习如何做到这一点来纠正它，并为未来而努力。不幸的是，我在将一些教程翻译成我的程序野兽时遇到了麻烦。所以我希望这里有人可以提供帮助。目前我正在尝试中断一段代码，该代码采用特定格式的文件并制作表格。我知道我需要创建一个类并使用它来创建一个表对象，但我不确定如何。我有一个 main 获取文件所在位置的命令行输入：

```
public class Print {
  public static void main(String[] args) throws Exception {
            // I know this part works
     JSAP jsap = new JSAP();
     FlaggedOption opt3 = new FlaggedOption("cllmap")
            .setRequired(true)
            .setShortFlag('c')
            .setLongFlag("call map");
     opt3.setHelp("Where is the flu, map file? Full path");
     jsap.registerParameter(opt3);
     String cllmp = config.getString("map"); 
```

我还没有尝试引用我创建的任何新类，因为我还没有弄清楚如何正确地做到这一点。然后我尝试将文件的位置发送给另一个类，以便其他类可以读取文件并将其解析为表对象。

```
public class Reader extends Print {
 String inpt;

public class FReader {
    //reading in
 //throws exception error
    FileInputStream fstream = new FileInputStream(cllmp);
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    while ((inpt  = br.readLine()) != null) {
        if (!inpt.equals("Calls")) {
          ... 
```

那么为什么我的 FReader 类会抛出异常以及如何让它停止呢？我不能说`public class FReader throws Exception{`，因为然后我得到了错误：`'{' expected`与将它放在`extends Fingerprint2`. 我在这里做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:57:40.443

代码必须放在方法中，而不是直接放在类主体中。该类被调用`Reader`，因此它可能应该有一个`read()`方法，并且该方法应该读取，如果不能执行，则抛出 IOException：

```
public class Reader extends FingerPrint2 {
    public String read() throws IOException {
        // PUT YOUR CODE HERE
    }
} 
```

# java - 在 Java 中重新实现 RSA 解密

> ID：13960996
> 
> 赞同：3
> 
> 时间：2012-12-19T20:53:36.303
> 
> 标签：java, rsa, padding

我正在使用私有 RSA 密钥使用默认的 Java RSA 实现来加密随机 AES 密钥：

```
Cipher cipher = Cipher.getInstance("RSA");
cipher.init(Cipher.ENCRYPT_MODE, privateKey);
byte[] cipherBytes = cipher.doFinal(plainText.getBytes()); 
```

由于无论如何我们都需要一个公钥，这是一种伪装密钥并确保它已用我们的私钥加密的便捷方法。解密方法类似：

```
Cipher cipher = Cipher.getInstance("RSA");
cipher.init(Cipher.DECRYPT_MODE, publicKey);
byte[] plainBytes = cipher.doFinal(cipherBytes); 
```

这适用于 Oracle 的 JDK，但对于 IBM 的则失败，因为 IBM 认为使用私钥进行加密不是一个有效的用例。不幸的是，我必须同时支持这两个 JDK，所以我正在尝试自己重新实现 RSA 解密。

这是我到目前为止的代码：

```
BigInteger big = new BigInteger(cipherBytes);
big = big.modPow(pub.getPublicExponent(), pub.getModulus()); 
System.out.println(new String(big.toByteArray())); 
```

它几乎可以工作，但似乎存在填充问题。大多数时候，我得到的原始文本前面有一串点状符号，但有时它只是随机字节。

不幸的是，我无法弄清楚默认使用哪种填充方案。有谁知道我的代码中缺少什么，或者至少可以提示使用哪种算法处理填充？

这是一个输入和输出值的示例，根据要求。我使用 512 位密钥来避免数字太大。

```
Public modulus :  8117919732251191237549784557538073836207094968952416063837701691514861428726690140363567956265691836505266266364256892197254736023284927189008247933889303
Public exponent:  65537
Plaintext:        teststring
Plaintext as BN:  549665952565679142563431
Ciphertext as BN: 6304229782339071167863563708554898540621778162930150363326921290545577949349781053660336996882823758722402137580193903457839924005473545992074817339077456
"Decrypted" BN:   409173825987017733751648712103449894027080255755383098685411421012016724550584319360408761540738019643860835515945008876151848132891805352276483731047
Resultstring: ˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇteststring 
```

为了解决我为什么要这样做的讨论：

公钥被硬编码到我的软件中。我使用私钥**为 AES 加密另一个密钥**。因此，要使用 AES 实际解码任何内容，您首先需要 AES 密钥。要获取此密钥，您必须先使用公钥对其进行解密。由于公钥不能在未经严重操纵的情况下被修改，因此只有用私钥加密的 AES 密钥才能工作。您可以以某种方式提取公钥并解密 AES 密钥，但这很复杂，只能让您获得 AES 密钥来解密受保护的内容。还有一个用私钥计算的签名，也用公钥验证。所以操纵是不可能的。

所以是的，从技术上讲，签名就足够了，因为有阅读内容的方法。但这些都是精心设计的，我不介意是否有人真的费尽心思，但我不想让事情变得简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:35:04.150

公钥用于加密和验证签名。私钥用于解密和签名。公钥的目的就是：公开。如果你做对了，就没有理由隐藏公钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:33:29.893

您尝试做的看起来更像是*签名*而不是加密。使用单独的密钥对进行签名，因为它与加密并不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:34:17.773

好的，我已经通过阅读 RSA 规范弄清楚了。为了增加安全性，在加密之前添加了一个填充，并创建了以下“字符串”：

```
0x00 + BT + Padding + 0x00 + Data 
```

块类型 (BT) 指示填充的类型。BT = 0x01 填充为 0xff，BT = 0x02 填充是随机的但非零。然后对连接的字符串进行加密。

解密时，可以验证格式，但要读取数据，必须删除前导字节。在数据之前的 0x00 之前，它们都是非零的。因此，可以删除填充之后的所有内容，包括填充之后的 0x00。剩下的就是消息。

此代码现在有效：

```
// Decrypt
byte[] decryptedBytes = (new BigInteger(1, cipherBytes)).modPow(pub.getPublicExponent(), pub.getModulus()).toByteArray();

// Extract msg
int dataStart;
for (dataStart = 0; decryptedBytes[msgStart] != 0; dataStart++);
dataStart++;

byte finalBytes[] = new byte[decryptedBytes.length - msgStart];
System.arraycopy(decryptedBytes, msgStart, finalBytes, 0, finalBytes.length); 
```

这也解释了我之前尝试中的“^”字符串。这些是填充字节，它们是 0xff，BT = 0x01。

我只需要解密，但为了完整起见，这是加密的代码：

```
int bitLength = 512;
String plainText = "teststring";

// Convert to bytes
byte plainBytes[] = plainText.getBytes(); 

byte encryptionBytes[] = new byte[bitLength / 8];

encryptionBytes[0] = 0; // Leading 0
encryptionBytes[1] = 1; // Block type

// Padding String
int paddingEnd = (bitLength / 8) - plainBytes.length - 2;
for (int i = 2; i < paddingEnd; i++) {
    encryptionBytes[i] = (byte) 0xff;
}
encryptionBytes[paddingEnd + 1] = 0;

// Actual data
System.arraycopy(plainBytes, 0, encryptionBytes, paddingEnd + 1, plainBytes.length);

// Encrypt
byte[] cipherBytes = (new BigInteger(1, encryptionBytes)).modPow(priv.getPrivateExponent(), priv.getModulus()).toByteArray(); 
```

希望这对任何人都有帮助:)