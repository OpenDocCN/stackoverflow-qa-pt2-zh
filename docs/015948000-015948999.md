# StackOverflow 问答 15948000-15948999

# apache - 重写规则不加载网站内容

> ID：15948001
> 
> 赞同：0
> 
> 时间：2013-04-11T11:48:09.833
> 
> 标签：apache, .htaccess, mod-rewrite

我使用此重写规则为俄罗斯加载不同的页面，使用 cloudflare IP Geolocation。

```
RewriteCond %{HTTP:CF-IPCountry} ^(RU)$

RewriteCond $1 !^(__test)

RewriteRule ^(.*)$ russia.html [L]

DirectoryIndex index.html 
```

问题是 russia.html 只加载文本内容。我已尝试对 CSS 文件使用绝对 URL，如此处所述[htaccess 重写规则不加载站点内容](https://stackoverflow.com/questions/1274001/htaccess-rewrite-rule-not-loading-site-content)但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:48:15.183

尝试在顶部添加这两个条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

这样，所有现有文件和目录都被排除在规则之外。

# php - 为索引设置 cron

> ID：15948013
> 
> 赞同：0
> 
> 时间：2013-04-11T11:48:47.380
> 
> 标签：php, search, cron

这不是任何具体的编码问题。我想要`theoretical`以下知识和观点/评论：（或请发布指向您可能引导我访问的某个博客的链接！）

我正在尝试为我的一个项目开发搜索工具。基本上，搜索将能够返回数据库中的几乎所有内容。为此，我想到了通过 cron 进行索引。

我只是一个新手。我想知道在为 cron 编制索引时需要注意哪些不同的事情？除了和。`memory size required`_`time interval of successive crons``updating from the last cron run`

我正在使用`PHP`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:57:14.580

您需要确保您的索引表带有大多数数据库现在提供的最新更新字段。应该设计您的索引脚本，记住对索引的增量更新。假设您已决定选择 Solr（或直接选择 Lucene），则每次执行更新 cron 脚本时都必须重新打开索引，然后根据数据库更改添加/更新搜索记录。我建议制作索引副本，然后更新并使用一些自动化测试查询以确保操作正常运行，然后将其移动到实时副本。最好使用 Solr 而不是 Zend Lucene，因为后者很难扩展。作为服务器运行的 Solr 为您提供了很多缓存和优化搜索查询的选项，这是我在 Zend Lucene 中没有看到的。

# perl - 我想使用递归来获取目录结构中所有文件的名称

> ID：15948015
> 
> 赞同：0
> 
> 时间：2013-04-11T11:48:51.963
> 
> 标签：perl

我知道有更简单的方法可以做到这一点，但是当我找到文件时我需要对它们进行一些操作，所以这就是我想要的方式。

我正在为 Windows 使用草莓 Perl。

```
my $baseDir = 'U:\\bin\\';
my $logFile = 'C:\\bintmp\\replace.log';

open(LOG,'>',$logFile);

folder($baseDir);

sub folder {
  my $input = shift; # May be a file or dir

  my @fileList = <$input*>;

  foreach my $file (@fileList) {
    if (-f ($file)) {   
      print LOG basename($file) . "\n";
      next;
    }

    if (-d ($file)) {
      folder($file); # Recursively call the folder function
    }
  }
  return 1;
}
close(LOG); 
```

我想我知道发生了什么。当我深入研究新文件夹时，`@fileList`正在被替换，以便它位于底部目录。此代码将永远运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:03:02.927

`*`问题是您的 . 之前没有反斜杠`glob`，因此您正在搜索`U:\bin\XX`然后`U:\bin\XX*`其中包含相同的目录。

另请注意，您应该始终*使用* `use strict`; `use warnings`小写和下划线标识符是 Perl 局部变量的事实标准；你应该*经常*检查你的`open`电话是否成功。

没有必要在单引号字符串中使用多个反斜杠，除非它位于字符串的末尾或多个反斜杠在一起。

试试这个

```
use strict;
use warnings;

use File::Basename 'basename';

my $base_dir = 'U:\bin';
my $log_file = 'C:\bintmp\replace.log';

open(my $log, '>', $log_file) or die $!;

folder($base_dir);

sub folder {

  my ($input) = @_;

  my @file_list = glob "$input\\*";

  foreach my $file (@file_list) {
    if (-f $file) {   
      print $log basename($file), "\n";
    }
    elsif (-d $file) {
      folder($file);
    }
  }
} 
```

# javascript - 如何创建 cookie 并写入数值？

> ID：15948016
> 
> 赞同：-3
> 
> 时间：2013-04-11T11:48:52.477
> 
> 标签：javascript, javascript, cookies

您能否创建一个创建 cookie 并在 cookie 中写入数值的[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")（带有一点点 html），然后是一个读取 cookie 值的函数，然后是一个条件，如果它是某个值，它会显示一个图像?

请注意，写入的函数将需要始终重写先前的值。

帮我做这件事。我正在等待很好的答复。

给我这里的代码朋友。
这对我来说太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:01:57.773

```
function setCookie(name,value,days){
    var expires='';
    if (days){
        var date=new Date();
        date.setTime( date.getTime() + (days*24*60*60*1000) );
        expires='; expires=' + date.toGMTString();
    }
    document.cookie= name + '=' + value + expires + '; path=/';
}
function getCookie(name){
    var nameEQ = name + '=';
    var ca=document.cookie.split(';');
    for (var i=0; i<ca.length; i++) {
        var c=ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ)===0) return c.substring(nameEQ.length,c.length);
}
    return null;
}
function deleteCookie(name){
    setCookie(name,'',-1);
} 
```

设置你的 cookie

```
var value = 1001; // number of cookies to eat
setCookie('yourcookiename', value, 1); 
```

得到你的饼干

```
var cookievalue=parseInt( getCookie('yourcookiename'), 10);
//do your stuff here..
//i.e. show a img with jquery
if (cookievalue==1001) $('#yourImgID').show(); 
```

但是请考虑一下，必须在您设置好 cookie 后进行 if-check

你的 html 标记在某处

```
<img id='yourImgID' src='superpictuefromsweetcookies.jpg'> 
```

您的 css 标记，以便在您的页面加载时不会显示它，否则它已经可见并且没有任何操作可以显示它。

```
#yourImgID {
    display:none;
} 
```

如果不再使用则删除

```
deleteCookie('yourcookiename'); 
```

吃饼干

```
//go and buy me some!! :) 
```

# sql - 使用存储过程的 sql server 中的事务概念

> ID：15948017
> 
> 赞同：0
> 
> 时间：2013-04-11T11:48:58.103
> 
> 标签：sql, sql-server

我需要将一个数据插入到另一个表中……在这一步之后，我需要仅从该表中获取插入的数据……这整个我必须使用单个存储过程……使用 sql 中的事务概念。

就像我有一张`abc`有内容的桌子

```
id name
1  ashu 
```

现在我在其中插入了新数据

```
id name
2  ashish 
```

我不知道我插入的数据...我正在通过存储过程执行此操作...现在我需要那些由此插入的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:53:55.113

您可以使用`@@IDENTITY`or `SCOPE_IDENTITY()`in`SQL SERVER`返回最后插入的身份，因此在存储过程结束时执行以下操作：

```
SELECT * FROM YOUR_TABLE WHERE ID = @@IDENTITY 
```

这将返回插入的最后一行。

[有关@@IDENTITY 和 SCOPE_IDENTITY() 的信息，](http://msdn.microsoft.com/en-gb/library/ms190315.aspx)请参阅MSDN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:21:58.467

我得到了解决方案。我在用：

```
Output inserted.SNO into @temp 
```

从这个命令中，所有插入的行都将进入这个临时表。所以我可以继续下一步。

# ios - UIImage 变成 NSNumber

> ID：15948018
> 
> 赞同：0
> 
> 时间：2013-04-11T11:49:02.297
> 
> 标签：ios, ios6, uiimageview, uiimage, appdelegate

我正在尝试将 UIImage 保存到应用程序委托。当我第一次加载 UIViewController 时，它返回 UIImage（见第一个屏幕截图）。

帮我 ！在这里卡了将近 2 天。

![在此处输入图像描述](https://i.stack.imgur.com/3zxC6.jpg)

但是当我重定向回那个控制器时，UIImage 变成了 NSNumber。（见第二个屏幕截图） ![在此处输入图像描述](https://i.stack.imgur.com/X2bG7.jpg)

在我离开控制器之前，我将图像设置为应用程序委托，如下所示

```
UIGraphicsBeginImageContextWithOptions(self.imageView.frame.size,YES, 0.0);
[self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

del.getImage = resultingImage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:22:24.173

使用调试器最容易解决此问题。首先，正如评论所说，将属性名称更改为 myImage。然后，在您的 UIViewController 类中，为您提供自己的设置器：

```
- (void)setMyImage:(UIImage *)myImage
{
    NSLog(@"Image class: %@", NSStringFromClass([myImage class]));
    if([myImage isKindOfClass:[NSNumber class]]) {
        NSLog(@"YIKES: a number!");
    }
    _myImage = myImage; // assumes ARC
} 
```

在第二个 NSLog 上放置一个断点，或两者兼而有之。当你遇到第二个断点时，查看调用堆栈，你会发现是谁在设置它。

# actionscript-3 - 错误 #1034：类型强制失败：无法将 flash.display::Stage@27dfe089 转换为 flash.display.MovieClip

> ID：15948021
> 
> 赞同：0
> 
> 时间：2013-04-11T11:49:07.977
> 
> 标签：actionscript-3, flash, actionscript

这里是错误 >> TypeError: Error #1034: Type Coercion failed: cannot convert flash.display::Stage@261b4089 to flash.display.MovieClip。在 com.ply::Heli/fireBullet() 在 com.ply::Heli/myOnPress()

这是 Heli 的课程：

```
package com.ply 
{
import flash.display.MovieClip;
import flash.display.*;
import flash.events.Event;
import flash.events.KeyboardEvent;

import flash.ui.Keyboard;
import com.peluru.Bullet;

public class Heli extends MovieClip
{
    var shotCooldown:int;
    const MAX_COOLDOWN = 10;
    //Settings
    public var xAcceleration:Number = 0;
    public var yAcceleration:Number = 0;
    private var xSpeed:Number = 0;
    private var ySpeed:Number = 0;

    private var up:Boolean = false;
    private var down:Boolean = false;
    private var left:Boolean = false;
    private var right:Boolean = false;

    public function Heli()
    {
        shotCooldown = MAX_COOLDOWN;
        bullets = new Array();
        addEventListener(Event.ENTER_FRAME, update);
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        init();
    }

    public function onAddedToStage(event:Event):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, myOnPress);
        stage.addEventListener(KeyboardEvent.KEY_UP, myOnRelease);
        init();
    }

    private function init():void
    {
        addEventListener(Event.ENTER_FRAME, RunHeli);           
    }

    private function RunHeli(event:Event):void
    {
        xSpeed += xAcceleration ;       //increase the speed by the acceleration
        ySpeed += yAcceleration ;       //increase the speed by the acceleration

        xSpeed *= 0.95;                 //apply friction
        ySpeed *= 0.95;                 //so the speed lowers after time

        if(Math.abs(xSpeed) < 0.02)     //if the speed is really low
        {
            xSpeed = 0;                 //set it to 0
                                //Otherwise I'd go very small but never really 0
        }
        if(Math.abs(ySpeed) < 0.02)     //same for the y speed
        {
            ySpeed = 0;
        }

        xSpeed = Math.max(Math.min(xSpeed, 10), -10);       //dont let the speed get bigger as 10
        ySpeed = Math.max(Math.min(ySpeed, 10), -10);       //and dont let it get lower than -10

        this.x += xSpeed;               //increase the position by the speed
        this.y += ySpeed;               //idem

    }

    public function update(e:Event){
    shotCooldown-- ;
    }

    /**
     * Keyboard Handlers
     */
    public function myOnPress(event:KeyboardEvent):void
    {
        if(event.keyCode == Keyboard.LEFT)
        {
            xAcceleration  = -1;
        }
        else if(event.keyCode == Keyboard.RIGHT)
        {
            xAcceleration  = 1;
        }
        else if(event.keyCode == Keyboard.UP)
        {
            yAcceleration  = -1;
        }
        else if(event.keyCode == Keyboard.DOWN)
        {
            yAcceleration  = 1;
        }
        else if (event.keyCode == 32)
        {
            fireBullet();   
        }
    }

    public function myOnRelease(event:KeyboardEvent):void
    {

        if(event.keyCode == Keyboard.LEFT || event.keyCode == Keyboard.RIGHT)
        {
            xAcceleration  = 0;
        }
        else if(event.keyCode == Keyboard.UP || event.keyCode == Keyboard.DOWN)
        {
            yAcceleration  = 0;
        }

    }       

    public function fireBullet() {
        if (shotCooldown <=0 )
        {
            shotCooldown=MAX_COOLDOWN;
            var b = new Bullet();
            var b2= new Bullet();
            b.x = this.x +20;
            b.y = this.y ;
            b2.x= this.x -20;
            b2.y= this.y ;
            MovieClip(parent).bullets.push(b);
            MovieClip(parent).bullets.push(b2);
            trace(bullets.length);
            parent.addChild(b);
            parent.addChild(b2);
        }
    }

} 
```

}

这是主要课程

```
package  
{
import com.ply.Heli;
import com.peluru.Bullet;
import com.musuh.Airplane2;

import flash.display.Sprite;
import flash.display.Stage;
import flash.display.MovieClip;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;
import flash.display.*;
import flash.events.*;
import flash.utils.*;

public class Main extends MovieClip
{
    public static const STATE_INIT:int = 10;
    public static const STATE_START_PLAYER:int = 20;
    public static const STATE_PLAY_GAME:int = 30;
    public static const STATE_REMOVE_PLAYER:int = 40;
    public static const STATE_END_GAME:int = 50;        
    public var gameState:int = 0;
    public var player:Heli;
    public var enemy:Airplane2;
    //public var bulletholder:MovieClip = new MovieClip();

    //================================================
    public var cTime:int = 1;
    //the time it has to reach in order to be allowed to shoot (in frames)
    public var cLimit:int = 10;
    //whether or not the user is allowed to shoot
    public var shootAllow:Boolean = true;
    //how much time before another enemy is made
    public var enemyTime:int = 0;
    //how much time needed to make an enemy
    //it should be more than the shooting rate
    //or else killing all of the enemies would
    //be impossible :O
    public var enemyLimit:int = 64;
    //the player's score
    public var score:int = 0;
    public var gameOver:Boolean = false;
    public var bulletContainer:MovieClip = new MovieClip();
    //================================================
    private var nextPlane:Timer;
    public var enemies:Array;
    public var bullets:Array;

    public function Main() 
    {
        gameState = STATE_INIT;
        gameLoop();
    }

    public function gameLoop(): void {
        switch(gameState) {
            case STATE_INIT :
                initGame();
                break
            case STATE_START_PLAYER:
                startPlayer();
                break;  
            case STATE_PLAY_GAME:
                 playGame();
                break;
            case STATE_REMOVE_PLAYER:
                //removePlayer();
                break;      
            case STATE_END_GAME:                    
                break;  

        }

    }       

    public function initGame() :void {
        enemies = new Array();
        bullets = ne Array();

        setNextPlane();

        gameState = STATE_START_PLAYER;
        gameLoop();
        //stage.addEventListener(Event.ENTER_FRAME, AddEnemy);
        stage.addEventListener(Event.ENTER_FRAME, back);
        stage.addEventListener(Event.ENTER_FRAME,checkForHits);
    }

    public function setNextPlane() {
        nextPlane = new Timer(1000+Math.random()*1000,1);
        nextPlane.addEventListener(TimerEvent.TIMER_COMPLETE,newPlane);
        nextPlane.start();
    }

    public function newPlane(event:TimerEvent) {
        // random side, speed and altitude

        // create plane
        var enemy:Airplane2 = new Airplane2();
        enemy.y = -1 * enemy.height;
        //making the enemy's x coordinates random
        //the "int" function will act the same as Math.floor but a bit faster
        enemy.x = Math.floor(Math.random()*(stage.stageWidth - enemy.width));
        //then add the enemy to stage
        addChild(enemy);
        enemies.push(enemy);

        // set time for next plane
        setNextPlane();
    }

    public function removePlane(plane:Airplane2) {
        for(var i in enemies) {
            if (enemies[i] == plane) {
                enemies.splice(i,1);
                break;
            }
        }
    }

    // take a bullet from the array
    public function removeBullet(bullet:Bullet) {
        for(var i in bullets) {
            if (bullets[i] == bullet) {
                bullets.splice(i,1);
                break;
            }
        }
    }

    public function checkForHits(event:Event) {
        for(var bulletNum:int=bullets.length-1;bulletNum>=0;bulletNum--){ 
            for (var airplaneNum:int=enemies.length-1;airplaneNum>=0;airplaneNum--) {
                if (bullets[bulletNum].hitTestObject(enemies[airplaneNum])) {
                    enemies[airplaneNum].planeHit();
                    bullets[bulletNum].deleteBullet();
                    trace("kena");
                    //shotsHit++;
                    //showGameScore();
                    break;
                }
            }
        }

        //if ((shotsLeft == 0) && (bullets.length == 0)) {
        //  endGame();
        //}
    }

    public function back( evt:Event ):void
    {   // Backgroud Land
        if (Dessert2.y >= 0 && Dessert.y >= 720)
        {
            Dessert.y = Dessert2.y - 1240 ;
        }
        else if (Dessert.y >= 0 && Dessert2.y >= 720)
        {
            Dessert2.y = Dessert.y - 1240 ;
        }
        else 
        {
        Dessert.y = Dessert.y +5 ;
        Dessert2.y = Dessert2.y +5 ;
        }
        // Background Clouds
        if (Clouds2.y >= 0 && Clouds.y >= 720)
        {
            Clouds.y = Clouds2.y - 2480 ;
        }
        else if (Clouds.y >= 0 && Clouds2.y >= 720)
        {
            Clouds2.y = Clouds.y - 2480 ;
        }
        else 
        {
        Clouds.y = Clouds.y +10 ;
        Clouds2.y = Clouds2.y +10 ;
        }
    }

    public function startPlayer() : void { 
        player=new Heli();
        player.x = stage.stageWidth / 2;
        player.y = stage.stageHeight / 2;
        // add Player to display list
        stage.addChild(player);
        gameState = STATE_PLAY_GAME;

    }

    public function playGame():void {

        gameLoop();

        //txtScore.text = 'Score: '+score;

    }

    function AddEnemy(event:Event){
    if(enemyTime < enemyLimit){
        enemyTime ++;
    }   else {
        //defining a variable which will hold the new enemy
        enemy =new Airplane2();
        //making the enemy offstage when it is created
        enemy.y = -1 * enemy.height;
        //making the enemy's x coordinates random
        //the "int" function will act the same as Math.floor but a bit faster
        enemy.x = Math.floor(Math.random()*(stage.stageWidth - enemy.width));
        //then add the enemy to stage
        addChild(enemy);
        //and reset the enemyTime
        enemyTime = 0;

     }

        if(cTime <= cLimit){
            cTime ++;
        } else {
        //if it has, then allow the user to shoot
        shootAllow = true;
        //and reset cTime
        cTime = 1;
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:25:56.270

您已将您的`player`in Main 添加到`stage`而不是`this`- 顺便说一下，为什么？因此，有两种方法可以解决此问题：首先，更改添加`player`到显示列表的行，其次，从`Heli.fireBullet()`函数中删除直接强制。我会说使用第一个。

```
public function startPlayer() : void { 
    player=new Heli();
    player.x = stage.stageWidth / 2;
    player.y = stage.stageHeight / 2;
    // add Player to display list
    this.addChild(player); // <-- this, not stage
    gameState = STATE_PLAY_GAME;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:28.153

改变

```
MovieClip(parent).bullets.push(b);
MovieClip(parent).bullets.push(b2); 
```

到

```
MovieClip(root).bullets.push(b);
MovieClip(root).bullets.push(b2); 
```

# android - 无法使用 Android 操作栏下拉导航更改文本颜色

> ID：15948026
> 
> 赞同：6
> 
> 时间：2013-04-11T11:49:18.413
> 
> 标签：android, android-actionbar, android-styles

我在我的操作栏上使用下拉导航，当使用深色操作栏时，我无法为相应的文本获得合理的颜色。操作栏本身是深灰色的，文字颜色是黑色的，所以很难阅读。

我遵循了[操作栏开发人员指南](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)上的基本说明，所以我的代码很简单

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.action_list, android.R.layout.simple_spinner_dropdown_item);
ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {
    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
        // TODO
        return false;
    }
};
ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);        
actionBar.setListNavigationCallbacks(mSpinnerAdapter, navigationListener); 
```

我的styles.xml 很简单

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    </style>
</resources> 
```

我*认为*这应该给了我一些明智的东西，但如下图所示，它在深灰色背景上显示为黑色文本，所以它不好。

![深灰色背景上带有黑色文本的菜单图像](https://i.stack.imgur.com/HS9Zp.jpg)

我尝试使用 styles.xml 文件来尝试解决问题。我最好的尝试是以下

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
        <item name="android:actionDropDownStyle">@style/myActionDropDownStyle</item>
        <item name="android:actionBarStyle">@style/myActionBar</item>
    </style>

    <style name="myActionDropDownStyle" parent="android:style/Widget.Holo.Light.Spinner">
        <item name="android:background">@color/LightCyan</item>
    </style>

    <style name="myActionBar" parent="@android:style/Widget.Holo.Light.ActionBar.Solid.Inverse">    
        <item name="android:titleTextStyle">@style/myActionBar.titleTextStyle</item>
    </style>

    <style name="myActionBar.titleTextStyle" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title.Inverse">
        <item name="android:textColor">@color/Orange</item>
    </style>
</resources> 
```

![使导航下拉列表中的项目可读的最佳尝试](https://i.stack.imgur.com/as20U.jpg)

这是（1）能够将应用标题的文本颜色更改为橙​​色，（2）能够将操作栏中所选导航项的背景颜色更改为浅蓝色，（3）能够更改背景颜色的下拉菜单，以便至少在浅色背景下显示黑色文本。但是，对于操作栏中显示的所选项目或下拉菜单中显示的项目，我所做的任何操作都不会更改文本颜色本身。我最好的尝试也看起来很糟糕:-(！

我想要的只是一个深色操作栏，其中显示在操作栏中的所选项目的文本颜色合理，这应该与选择项目时使用的文本颜色相同，并且在项目被选中时使用下拉菜单的背景颜色被选中的颜色与操作栏相同。但是我不知道该怎么做，有人可以帮忙吗？

仅供参考，我正在使用 Eclipse 和我最近下载的 adt-bundle (adt-bundle-windows-x86_64-20130219)。当我搜索解决方案时，我发现了很多关于 Sherlock 操作栏的信息，但是，Sherlock 的样式不包含在那个 adt-bundle 中。无论如何，我使用的 Holo.Light.DarkActionBar 肯定可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-12-26T19:43:13.740

请原谅我的死灵法，但这确实困扰着我，解决方案实际上非常快，不需要自定义适配器或样式。

如果您将 SpinnerAdapter 的构造函数中的上下文更改为使用 getActionBar().getThemedContext() 而不是这个，它将在深色背景上显示浅色文本，以匹配操作栏的样式。

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(getActionBar().getThemedContext(), R.array.action_list, android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T17:37:45.653

我发现我可以通过创建我自己的 ArrayAdapter 子类来更改代码中下拉导航的颜色，如下所示：

```
public class myArrayAdaptor<T> extends ArrayAdapter<T> {

    public myArrayAdaptor(Context context, int textViewResourceId, T[] objects) {
        super(context, textViewResourceId, objects);
    }

    public static myArrayAdaptor<CharSequence> createFromResource(Context context, int textArrayResId, int textViewResId) {
        CharSequence[] strings = context.getResources().getTextArray(textArrayResId);
        return new myArrayAdaptor<CharSequence>(context, textViewResId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return SetColourWhite(super.getView(position, convertView, parent));
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        return SetColourWhite(super.getView(position, convertView, parent));
    }

    private View SetColourWhite(View v) {
        if (v instanceof TextView) ((TextView)v).setTextColor(Color.rgb(0xff, 0xff, 0xff)); // white
        return v;
    }
} 
```

然后使用简单的styles.xml

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    </style>
</resources> 
```

我可以替换类 myArrayAdaptor

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.action_list, android.R.layout.simple_spinner_dropdown_item) 
```

并且文本颜色将始终为白色。但是使用styles.xml 文件中的设置没有更简单的方法吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-24T16:46:44.693

Java 代码

```
SpinnerAdapter adapter = ArrayAdapter.createFromResource(this,
        R.array.actions,R.layout.dropdown_textcolor);

// OnNavigationListener
OnNavigationListener callback = new OnNavigationListener() {

    String[] items = getResources().getStringArray(R.array.actions); 
    public boolean onNavigationItemSelected(int position, long id) {

        // Do stuff when navigation item is selected
        Log.d("NavigationItemSelected", items[position]); // Debug
        return true;
    }

};

ActionBar actions = getSupportActionBar();
actions.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
actions.setDisplayShowTitleEnabled(false);

actions.setListNavigationCallbacks(adapter, callback); 
```

XML dropdown_textcolor.xml

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:textColor="@android:color/white"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:ellipsize="marquee"
    android:textAlignment="inherit"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-08T18:15:52.137

将此添加到您的 styles.xml 中，这将更改隐藏操作菜单文本的颜色：

```
<style name="AppTheme.AppCompat.Light" parent="@android:style/Theme.Holo.Light.DarkActionBar"> 
        <item name="android:itemTextAppearance">@style/MenuTextAppearance</item>    
</style>

<style name="MenuTextAppearance">
        <item name="android:textColor">@android:color/black</item>
</style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-04T13:22:10.963

```
<resources>
  <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <!-- Customize your theme here. -->
        <item name="android:textColor">#ffffff</item>

        <item name="android:itemBackground">#991005</item>

        <item name="android:actionBarSize">40dp</item>

        <item name="android:divider">#ff0000</item>
        <item name="android:dividerHeight">1dp</item>

        <item name="android:textSize">14sp</item>

    </style>
</resources>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-29T16:06:06.983

如果您正在使用 AppCompat 支持库..这可能会对您有所帮助..

```
<style name="MyActionBar3" parent="@style/Widget.AppCompat.Light.ActionBar">
    <item name="android:background">@color/ActionBarBackground</item>         
</style>

<style name="MyActionBarDropDownStyle" parent="">
    <item name="android:background">#00FF00</item>        
    <item name="android:divider">#ff0000</item>
    <item name="android:dividerHeight">1dp</item> 
    <item name="android:textColor">#FFFFFF</item>     
    <item name="android:textSize">10sp</item>
</style>

<style name="MyTextStyle" parent="@style/Widget.AppCompat.Light.Base.ListPopupWindow">
    <item name="android:popupBackground">#FF0000</item>        
</style> 
```

# java - SharedPreferences 不起作用

> ID：15948030
> 
> 赞同：1
> 
> 时间：2013-04-11T11:49:31.627
> 
> 标签：java, android, eclipse, sharedpreferences

我在使用 SharedPreferences 时遇到了一些问题。我想保存并稍后将字符串加载到首选项中/从首选项中加载。我在 onCreate 方法中初始化我的首选项：

```
prefs = this.getSharedPreferences("com.example.android_test", Activity.MODE_PRIVATE); 
```

我用另一种方法保存：

```
 public void saveUser()
    {   
        prefs.edit().putString("username", username);
        prefs.edit().putString("password", password);
        prefs.edit().apply();
    } 
```

并加载另一种方法：

```
 public void loadUser()
    {
        username = prefs.getString("username", "default");
        password = prefs.getString("password", "test");
    } 
```

这些是我的测试方法：

```
 public void showUser(View v) 
    {
       loadUser();
       text.setText(username);
    }

    public void addUser(View v)
    {
        changeUser(eingabe.getText().toString(),"newpass");
    }

    public void changeUser(String user, String pass)
    {
        username = user;
        password = pass;
        saveUser();
    } 
```

用户名和密码是全局的私有字符串，eingabe 是 EditText，text 是 TextView。但是，在执行 showUser() 时，我只会将默认值显示到 TextView，即使我使用具有不同用户名的 saveUser ......没有崩溃或任何东西......它只是显示的默认值......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:51:17.820

您忘记提交您的编辑：

```
prefs.edit().putString("username", username).commit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:51:42.973

```
 prefs.edit().putString("username", username);
 prefs.edit().putString("password", password); 
```

每次更改它`edit`都会返回不同的实例，因此您的更改不会被提交。

```
Editor editor = prefs.edit();
editor.putString("username", username);
editor.putString("password", password);
editor.commit(); 
```

尝试这个。

> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍然未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身都完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:58:50.697

**好的， apply 与 commit 相同**，它只是原子地写入首选项，使其线程安全。（虽然它需要 API 级别 9，所以要小心）

请参阅[文档](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)

问题在于 Rajesh CP 所说的。您需要创建一个编辑器指针，然后应用：

```
Editor editor = prefs.edit();
editor.putString("username", username);
editor.putString("password", password);
editor.apply(); 
```

否则，每次创建编辑器的新实例并应用更改时，被指示应用更改的编辑器都没有任何更改

# shell - Shell：使用 shell 运行 vim 命令

> ID：15948041
> 
> 赞同：3
> 
> 时间：2013-04-11T11:49:53.327
> 
> 标签：shell, vim

如何使用 shell 脚本对当前目录中的所有文件运行 vim 命令“:retab”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:53:30.403

我找到了可以帮助你的东西

```
for F in *.{c,h}pp ; do vim -c ":retab" -c ":wq" "$F" ; done 
```

这应该可以满足您的需求；）也许您需要根据需要更改 for 循环条件

# sql - 使用数据和外键复制数据库，无需身份插入

> ID：15948042
> 
> 赞同：0
> 
> 时间：2013-04-11T11:49:55.433
> 
> 标签：sql, database, relational-database, sql-server-2012

设想：

我有一组测试数据需要每天部署到我们的构建服务器（我们的构建服务器数据库首先被当前的实时数据库覆盖，并删除了一个多月前的所有数据）。

该测试数据中包含需要保留的外键引用。

我不能简单地打开 IDENTITY_INSERT，因为主键可能与数据库中已经存在的数据发生冲突（因为我们不是从空白数据库开始的）。

测试数据需要能够相当定期地重新生成，因此尽管通过部署脚本并将 id 列捏造为古怪的东西（或例如负数），然后将相关的外键列更改为每次我们重新生成数据时都使用相同的 ID，这并不让我兴奋。

理想情况下，我想知道是否有一种工具可以扫描数据库，获取外键约束并相应地生成插入脚本，例如：

```
INSERT INTO MyTable VALUES('TEST','TEST');

DECLARE @Id INT;
SET @Id = (SELECT @@IDENTITY)

INSERT INTO MyRelatedTable VALUES(@Id,'TEST') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:04:29.077

听起来您想研究一个处理 id 变化的 ETL 过程。当您使用 SQL Server 时，您可以查看该[`OUTPUT`子句](http://msdn.microsoft.com/en-gb/library/ms177564.aspx)- 使用它来构建一些临时表，这些临时表可以将每个主键的“旧”id 映射到“新”id，以便在迁移“子”表。

# c# - Farseer 断言失败

> ID：15948043
> 
> 赞同：2
> 
> 时间：2013-04-11T11:49:57.280
> 
> 标签：c#, xna, assertion, farseer

我们正在为一个学校项目创建一个游戏。这是一款 2D 平台游戏，目前还处于早期阶段。我们使用 C#/XNA 并且正在实施 Farseer 物理引擎。我目前正在与地图类作斗争。在类中，我们有一个 DrawableGameObjects 列表，我们存储地图的每个图块并绘制它们。但是当我们尝试绘制它们时，我们会得到“断言失败”。进一步研究这个问题，我得出的结论是，每当我们尝试向世界添加比静态物体更多的东西时（即使没有绘制它们），我们都会失败。[抛出消息](http://i.imgur.com/YdG7s3l.jpg)

Game1.cs：第 210 行是：

`world.Step(0.033333f);`

而 Program.cs:line 15 是：

```
game.Run(); 
```

这是 Map 类的代码：

```
class Map
{
    private List<DrawableGameObject> ground = new List<DrawableGameObject>();

    public Map(World world, Texture2D texture)
    {
        for (int i = 0; i < 32; i++)
        {
            DrawableGameObject floor = new DrawableGameObject(world, texture, new Vector2(40, 40), 100, "ground");
            floor.Position = new Vector2(i * 40, 500);
            floor.body.BodyType = BodyType.Static;
            ground.Add(floor);
        }

    }

    public void Draw(SpriteBatch spriteBatch){
        foreach (DrawableGameObject dgo in ground)
            dgo.Draw(spriteBatch);

    }

} 
```

有任何想法吗？我已经在[Farseer 的论坛](https://farseerphysics.codeplex.com/discussions/439767)上发布了这个问题，但他们还没有很有帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:52:53.577

**这是 Farseer 中的一个错误。**（版本 3.3.1）

我打开了有问题的方法的 Farseer 源代码 ( `World.SolveTOI`)，发现两个调用`Debug.Assert`. 而且，事实上，在我的代码副本中，我实际上已经遇到了这个错误并将其中一个错误注释掉，具体来说：

```
Debug.Assert(typeA == BodyType.Dynamic || typeB == BodyType.Dynamic); 
```

基本上它不想尝试处理两个静态物体之间的接触。

幸运的是，下面的代码实际上检查了基本相同的条件，`continue`如果是这种情况，则循环：

```
bool awakeA = bA.Awake && typeA != BodyType.Static;
bool awakeB = bB.Awake && typeB != BodyType.Static;

// Is at least one body awake?
if (awakeA == false && awakeB == false)
{
    continue;
} 
```

因此，简单地注释掉或删除断言是非常安全的。（当然，您应该从源代码构建 Farseer - 它让生活变得更轻松。）

* * *

重现 Farseer 错误：拥有两个静态主体和一个动态主体，与两者接触，然后将动态主体设为静态。断言将触发。

断言在联系人处理循环中。通常一对静态物体不会产生接触。但是，如果一个身体一开始是动态的，则可以创建联系——当身体变成静态时，它们不会被删除。

# javascript - Windows 商店应用程序消息对话框 - 关闭时继续

> ID：15948044
> 
> 赞同：0
> 
> 时间：2013-04-11T11:50:08.593
> 
> 标签：javascript, windows-8, windows-store-apps

`close`我希望实现该程序在用户单击按钮之前不会继续执行代码中的下一行`messageDialog`。那可能吗？

在此示例中，我希望将文档背景颜色更改为红色，直到用户单击`close`。在此之后它将回到白色背景。所以我希望只有当 messageDialog 处于活动/可见/显示时才具有红色背景。

```
Globals["messageDialog"]("Something went wrong!", "#FF0000");

WinJS.Namespace.define("Globals", {
    messageDialog: function (string) {
        Windows.UI.Popups.MessageDialog(string).showAsync();
        document.body.style.backgroundColor = "#FF0000";
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:31:09.503

当然，`showAsync()`返回一个仅在用户关闭对话框时完成的承诺。所以只需写一些类似的东西

```
Windows.UI.Popups.MessageDialog(string).showAsync().done(function () {
    document.body.style.backgroundColor = "#FF0000";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:23:47.297

使用等待关键字

`await Windows.UI.Popups.MessageDialog(string).showAsync();`

# php - API 到 API 转换的通用结构或服务

> ID：15948045
> 
> 赞同：1
> 
> 时间：2013-04-11T11:50:16.980
> 
> 标签：php, web-services, api, rest, soap

作为我正在开发的应用程序的一部分，需要在我们的 RESTful JSON API 和许多其他格式之间创建转换。目的是允许转换我们 API 的输出，以向使用不同格式（如 SOAP）或其他具有不同要求的基于 REST 的 API 的 API 发出进一步的请求。

我认为这可能需要做的一些事情的例子：

*   操纵 JSON 输出以使用不同的键（可能只是数据的一个子集
*   转换为 XML 数据包/文档
*   转换为有效的 SOAP 请求
*   将数据输出为特定的文件类型/结构（例如 csv）

我真的很感兴趣我应该在这里看什么方法。在我看来，这应该是一个相当普遍的请求，所以如果有我应该查看的特定库或现有服务，我很感兴趣。如果这样的服务不存在，那么理想情况下，我想创建一个通用结构，从而可以使用一组通用的工具映射 2 个不同的服务，然后将这些工具配置为一起工作。这将在 Laravel PHP 应用程序中，因此任何 Composer 兼容库都可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:49:39.337

继我的评论之后：

```
"I am not aware of any such library to do this, but as a rough guide I think you probably want to create some kind of adapters which all use a common interface. These adapters can then be written to deal with the conversion you are trying to achieve via some open-source library. Manipulating the output might be a good excuse to use the decorator pattern :) Sorry I could not be of much more help." 
```

我认为你所追求的一个例子如下：

适配器接口

```
interface DataConvertor
{
     public function convert(DataInterface $data);
} 
```

您正在传递的数据的接口（数据将是一个对象，也具有一个通用接口来工作）。

```
interface DataInterface
{
    /**
     * returns a json string 
     */
    public function asJson();
} 
```

然后，您可以创建适配器以与某些 3rd 方库一起使用。

```
class SomeThirdPartyNameAdapter implements DataConvertor
{

    public function convert($data)
    {
         //some logic here to make my data object with a known asJon method
         //suitable for use for some 3rd party library, and use that library.

         $rawJson = $data->asJson();
         //manipulate this as needed ($compatibleData)

         $thirdPartyLib = new ThirdPartyLib();
         return $thirdPartyLib->thirdPartyMethod($compatibleData);
    }

} 
```

显然，这只是一个粗略的指南，可能还有其他部分可以抽象化（例如，让适配器实现 DataConvertor 接口，但也扩展一些抽象类以继承某些功能，或添加到您的接口的其他方法）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:18:52.820

Carl 说得对，一个很好的方法是使用通用接口创建一些适配器。然后您可以提供将 JSON 转换为 XML 或 JSON 转换为 CSV 等的实现。

但是，我强烈建议也将 Mule ESB 作为解决方案。 [http://www.mulesoft.org/](http://www.mulesoft.org/)

这是一个基于 Java 的开源项目，可让您进行快速高效的集成。例如，您可以创建一个“流”（Mule 术语）进行 RESTful 调用，然后转换数据并将其泵送到特定目的地（CSV、SOAP 调用、XML 等）

Mule 的真正卖点（对我很有效的东西）：

1.  非常容易部署。它的工作方式类似于 Tomcat，您可以在其中部署包并在服务器上运行。

2.  已经为您完成了大量的样板代码。

3.  免费且稳定。他们有大量的知名客户，所以它经过了相当多的考验，我们已经能够让他们的免费版本在生产中顺利运行。

# c# - 如何播放即时加载的声音

> ID：15948046
> 
> 赞同：9
> 
> 时间：2013-04-11T11:50:18.420
> 
> 标签：c#, unity3d, audio

我试图为我小组的声音设计师制作一个工具，让他可以听到他在 Unity 中播放的声音文件。

*   检查它是否可以加载
*   检查音量是否正确
*   检查循环是否正确

等等 ...

我的问题是找到 Unity 如何管理加载位于文件夹中某处的音频文件。

我发现很多话题都在谈论它，但没有真正解决如何让 Unity 动态加载外部文件的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:50:18.420

如果**要从与 .exe / .app 相同的目录**加载文件，可以使用：

*   使用 System.IO **DirectoryInfo()**获取所有文件名
*   使用**WWW 类**流式传输/加载找到的文件

这里的代码：

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using System.IO;

public class SoundPlayer : MonoBehaviour {

    string absolutePath = "./"; // relative path to where the app is running

    AudioSource src;
    List<AudioClip> clips = new List<AudioClip>();
    int soundIndex = 0;

    //compatible file extensions
    string[] fileTypes = {"ogg","wav"};

    FileInfo[] files;

    void Start () {
        //being able to test in unity
        if(Application.isEditor)    absolutePath = "Assets/";
        if(src == null) src = gameObject.AddComponent<AudioSource>();
        reloadSounds();
    }

    void reloadSounds() {
        DirectoryInfo info = new DirectoryInfo(absolutePath);
        files = info.GetFiles();

        //check if the file is valid and load it
        foreach(FileInfo f in files) {
            if(validFileType(f.FullName)) {
                //Debug.Log("Start loading "+f.FullName);
                StartCoroutine(loadFile(f.FullName));
            }
        }
    }

    bool validFileType(string filename) {
        foreach(string ext in fileTypes) {
            if(filename.IndexOf(ext) > -1) return true;
        }
        return false;
    }

    IEnumerator loadFile(string path) {
        WWW www = new WWW("file://"+path);

        AudioClip myAudioClip = www.audioClip;
        while (!myAudioClip.isReadyToPlay)
        yield return www;

        AudioClip clip = www.GetAudioClip(false);
        string[] parts = path.Split('\\');
        clip.name = parts[parts.Length - 1];
        clips.Add(clip);
    }
} 
```

[编辑]

如果人们想改进文件管理，我推荐[这个链接](http://wiki.unity3d.com/index.php?title=Save_and_Load_from_XML)

# php - 按其他配置文件跟踪配置文件视图

> ID：15948048
> 
> 赞同：0
> 
> 时间：2013-04-11T11:50:23.687
> 
> 标签：php, mysql

我有一个用户数据库，每个用户都有一个唯一的 ID，我想跟踪每个用户查看的用户简介：

例如，如果用户 56 查看用户 104 的配置文件，那么在 MySQL 中存储该配置文件的最佳/推荐方式是什么？

我不想计算观看次数，我想知道谁观看了谁。

毒性解决方案对此是否最好？在我看来，如果我为每个新视图在表中添加一个新行，那么该表会很快变得非常大吗？

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:02:49.770

如果您只想存储访问配置文件的用户 ID，您可以将逗号分隔的 ID 存储在一行中，您只需将用户 ID 附加到现有字符串中，以逗号分隔

例如，如果个人资料用户 id 是 56，那么其他 profile_visitor_id 可能是 23,42,56,23

所以桌子会像

```
id, user_id, profile_visitor_id 
```

我认为这是以小方式管理大数据的好方法。

# workflow - 如何在 alfresco activiti 中使用 activiti:formProperty？

> ID：15948052
> 
> 赞同：1
> 
> 时间：2013-04-11T11:50:41.030
> 
> 标签：workflow, alfresco, activiti, bpmn, alfresco-share

我想设计一个 activiti 工作流程并将其部署到 alfresco。要为此工作流准备表单，一种方法是定义一个表单并使用它的 formKey。但是通过这种方式，我应该更改 share-workflow-form-config.xml 并重新启动 tomcat，并部署模型和 bpmn 文件。

我需要一种无需重新启动tomcat即可部署的方法。我在 activiti 中找到了一种使用 activit:formProperty 的方法，但它似乎在 alfresco 中不起作用。我对么？这不是在露天吗？如果露天有它，我该如何使用它？

换句话说，当我在 alfresco 工作流控制台中部署了一个 activiti-explorer 示例时，部署的工作流启动事件表单中没有显示任何这些字段。单击“开始工作流程”后显示错误

```
org.alfresco.service.cmr.workflow.WorkflowException: 03110260 Failed to start workflow activiti$vacationRequest:1:2352. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:45:53.687

您可以通过工作流控制台来完成。看看这个 [http://wiki.alfresco.com/wiki/Workflow_Console](http://wiki.alfresco.com/wiki/Workflow_Console)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:26:38.130

您好，据我所知，目前的设置无法做到这一点。因为您缺少的是在 Alfresco Share 中运行工作流。并且每个屏幕都是由 Alfresco 自己的表单引擎渲染的。

要实现你想要的，可以通过单独运行 Activi 并使用 Activit 自己的 UI 来完成。

回到您的帖子，我引用：“但是通过这种方式，我应该更改 share-workflow-form-config.xml 并重新启动 tomcat，并部署模型和 bpmn 文件。”

您可以加快速度：

1.  首先定义您的模型，完成并测试后，重新启动 Alfresco
2.  可以在运行时完成对 share-workflow-form-config.xml 或任何其他表单 XML 的更改。您只需要通过 post 方法重新加载共享 webscripts 和表单 --> alfresco/service/index?reset=on 或 reset=all （get 可能有效，尚未尝试过）。我正在使用 Will Abson 的构建 ANT 脚本。签出一个谷歌项目附加组件，你会在那里找到它
3.  部署工作流时无需重启 Alfresco！有一个[activiti-workflow](http://docs.alfresco.com/4.1/topic/com.alfresco.enterprise.doc/tasks/adminconsole-workflow-activiti-console.html)控制台，您可以在运行时上传新的 bpmn20.xml 文件或创建 *.bar 包并上传该文件
4.  使用 Alfresco 模型的优点是您可以通过在多个步骤中使用相同的模型和表单配置来重复使用工作流屏幕。例如，我经常使用审查和批准任务和表单配置，因为这是一项一般任务。

# uml - ArgoUML 仍然是流行的 UML 建模工具之一吗？

> ID：15948065
> 
> 赞同：0
> 
> 时间：2013-04-11T11:51:27.817
> 
> 标签：uml, tool-uml

在过去的几年里，我使用了 Rational-Rose 和 StartUML。前段时间，我接受了关于建模的培训，并注意到工具是 UML。现在，我尝试使用它对我的系统进行建模，发现官网上的帮助文档不完整，并且该工具不像网站声称的那样好。比如不支持undo/redo功能，有些问题很久没更新了。

[ArgoUML](http://argouml.tigris.org/)是否放弃了对下一代的开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:20:41.897

[ArgoUML 论坛](http://argouml-users.net/forum/)上有很多活动，我会在那里表达您的担忧和问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T00:27:35.693

不是真的，最后一次发布是在2011 年[12 月](http://argouml.tigris.org/servlets/ProjectNewsList)，他们的[SVN 跟踪器](http://argouml.tigris.org/source/browse/argouml/)中几乎没有活动。

考虑到他们还没有实现[Undo](http://argouml.tigris.org/issues/show_bug.cgi?id=1834)和 Redo 等功能，您将了解项目的一般状态。

您可能想知道原始 StarUML 代码有一个积极维护的分支，它是[WhiteStarUML](http://sourceforge.net/projects/whitestaruml/)。

# design-patterns - 如何正确设计常用设置

> ID：15948068
> 
> 赞同：0
> 
> 时间：2013-04-11T11:51:36.380
> 
> 标签：design-patterns, mvvm

此桌面应用程序的业务要求是某些视图上存在通用过滤器选项。这意味着对于那些包含通用过滤器选项的视图，如果我在一个视图上检查某个选项，则包含它的每个其他视图也需要检查相同的选项（许多视图已经显示，因此需要更新这些选项）。

```
CommonSettings { CommonSetting1, CommonSetting2, CommonSetting3, CommonSetting4, CommonSetting5  }
ScreenASettings {ScreenASetting1, ScreenASetting2, CommonSetting2, CommonSetting4 }
ScreenBSettings {ScreenASetting1, CommonSetting1, CommonSetting2, CommonSetting3 }
// and so on 
```

此设置需要保存在文件中以供以后阅读。这个想法是，当屏幕打开时应用此设置。如果 ScreenA 和 ScreenB 都打开了，并且我更改了 ScreenA 上的 CommonSetting2，ScreenB 也应该为此设置应用新值，因为它也包含它。

我目前的设计是这样的： - 只有一个 CommonSettings 实例存在 - 我有 CommonSettingsViewModel，它包含对 CommonSettings 实例的引用。CommonSettingsViewModel 处理所有事情：在屏幕上显示选项（向 CommonSettingsView 公开常用设置、保存常用设置、加载常用设置等） - 每个包含自定义和常用设置的 CustomViewModel 都将（通过 DI）获取对 CustomSetting 和 CommonSettingViewModel 实例的引用。通过这种方式，它可以将创建通用设置的控制权传递给 CommonSettingViewModel，并且只处理其自定义设置（加载、保存）

使用这种方法，我将负责自定义和通用设置。我在这里看到的一个缺点是，当我需要查询数据时，我总是需要同时传递 CustomSettings 和 CommonSettings 实例，而我需要两者。

您认为这种方法正确吗，或者您认为有更好的方法？

**编辑：**这是我用于设置的当前实现

```
public interface ISettings {
    string ElementPath { get; set; }
    Exception Error { get; }
    object GetValue(string setting);
    bool HasError { get; }
    void Read();
    void Save();
    void SetValue(string setting, object value);
}

// base class for ScreenASettings, CommonSettings, etc
public abstract class SettingsBase : ISettings { ... }

// ancestor class only needs to add settings
public class CommonSettings : BaseSettings {
    private bool _ommonSetting1;
    [Setting]
    public bool CommonSetting1 { .... }
    // CommonSetting2, CommonSetting3, etc
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:55:58.127

为什么不定义一个像这样的通用接口：

```
public interface ISettings
{
    T GetSetting<T>(string key);
    bool TryGetSetting<T>(string key, out T result);
} 
```

然后，您可以接受`ISettings`任何函数的参数，并使用[Composite 模式](http://en.wikipedia.org/wiki/Composite_pattern)定义一个`CompositeSettings`可以表示多个其他对象的`ISettings`对象：

```
public class CompositeSettings : ISettings
{
    private IEnumerable<ISettings> settings;
    public CompositeSettings(params ISettings[] settings)
    {
        this.settings = settings;
    }

    public T GetSetting<T>(string key)
    {
        T result;
        if (TryGetSetting<T>(key, out result))
            return result;
        throw KeyNotFoundException(key);
    }

    public bool TryGetSetting<T>(string key, out T result)
    {
        foreach (var setting in this.settings)
        {
            T innerResult;
            if (setting.TryGetSetting<T>(out innerResult))
            {
                result = innerResult;
                return true;
            }
        }
        return false;
    }
} 
```

（现在我读了一遍，也许我的命名并没有完全有帮助......可能`ISettingsProvider`更清楚）

# php - 无法在我的服务器上执行 PHP 文件

> ID：15948073
> 
> 赞同：2
> 
> 时间：2013-04-11T11:51:57.633
> 
> 标签：php, cpanel

在我的服务器中访问 PHP 文件时，它会阻止执行 PHP 文件。可以浏览图像和文本文件等。当我尝试浏览 PHP 文件时，出现以下错误：

> **服务器遇到了一个意外情况，导致它无法完成请求。**脚本有错误或没有产生任何输出。如果出现错误，您应该能够在错误日志中看到它。

.htaccess 文件是空的，我可以访问 cpanel 但不知道出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:05:05.287

将您的 php 文件权限更改为 775。

# actionscript-3 - 访问加载的 swf 的内容

> ID：15948074
> 
> 赞同：0
> 
> 时间：2013-04-11T11:51:58.710
> 
> 标签：actionscript-3, flash, actionscript, flash-builder, action

我想访问已加载`SWF`文件的内容。我使用了以下代码，

```
function _browse(e:MouseEvent):void
{  
     loader.load(new URLRequest("artwork3.swf.swf"));
     loader.contentLoaderInfo.addEventListener(Event.COMPLETE,loading);
     target_clip.addChild(loader);
}

function loading(event:Event)
{
     trace(target_clip.getChildAt(0));
     trace(target_clip.getChildAt(1));
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:47:48.720

尝试`MovieClip(loader.content)`而不是像这样的target_clip，

```
function _browse(e:MouseEvent):void
{  
     loader.load(new URLRequest("artwork3.swf.swf"));
     loader.contentLoaderInfo.addEventListener(Event.COMPLETE,loading);
     target_clip.addChild(loader);
}

function loading(event:Event)
{
     trace(MovieClip(loader.content).getChildAt(0));
     trace(MovieClip(loader.content).getChildAt(1));
} 
```

好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:03:19.457

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener( Event.COMPLETE, handleComplete );
var request:URLRequest = new URLRequest("artwork3.swf.swf");
loader.load(request);

protected function handleComplete(event:Event):void
{   
    DisplayObject loadedSwf = target_clip.addChild(event.currentTarget.content as DisplayObject) as DisplayObject;
    //you can access variables from loaded swf
    trace(loadedSwf.name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:06:46.500

```
 function _browse(e:MouseEvent):void
    {  
         loader.load(new URLRequest("artwork3.swf.swf"));
         loader.contentLoaderInfo.addEventListener(Event.COMPLETE,loading);
         target_clip.addChild(loader);
    }
    function loading(event:Event)
    {
         var myLoadedSwf:MovieClip = loader.content as MovieClip;

         trace(myLoadedSwf.getChildAt(0));
         trace(myLoadedSwf.getChildAt(1));
         //trace(target_clip.getChildAt(0));
         //trace(target_clip.getChildAt(1));
    } 
```

# php - 使不同的图像图案出现在剪影衬衫中

> ID：15948076
> 
> 赞同：1
> 
> 时间：2013-04-11T11:52:10.067
> 
> 标签：php, javascript, jquery, ajax

基本上我正在寻找有关如何处理“衬衫设计师”这一想法的建议：

想象一下有一件衬衫的轮廓。现在想象一下，我有 200 多种用于那件衬衫的面料图案。

单击`$fabric_x`将用该特定图案填充轮廓。

基本上就像这里的做法一样：（点击左侧的面料） [http://www.savvytailor.com/build-a-shirt.php?osCsid=c55610679180fcaa69abcae9b22dc0c5](http://www.savvytailor.com/build-a-shirt.php?osCsid=c55610679180fcaa69abcae9b22dc0c5)

*我的想法* ......这是一条艰难的道路，将是：

*   为从 Photoshop 填充的每个图案保存一个剪影（大量工作）
*   管理 XML 列表中的所有不同面料图案
*   使用 Jquery -> 加载 XML > 在前端生成列表
*   使用 Jquery -> 创建一个函数来替换/显示特定点击`$fabric_x`

我认为可能会有一些更简单的方法来处理在剪影中显示 $fabric - 除了必须为每个剪影 - $fabric 选项保存图像之外。

有什么想法、意见或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:56:17.697

我可能想的很简单，但你不能在图案的图像上放一个负片形式的 T 恤（衬衫是透明的，其余是白色的）图像吗？

```
<img src="http://us.123rf.com/400wm/400/400/davorr/davorr1101/davorr110100011/8627355-pilze-seamless-pattern-swatch-muster-included-in-eps-datei.jpg" 
width="400" 
height="400" 
STYLE="position:absolute; TOP:0px; LEFT:0px" />
<img src="https://dl.dropboxusercontent.com/u/62849616/Stackoverflow/shirts/hemd.gif" 
width="400" 
height="400" 
STYLE="position:absolute; TOP:0px; LEFT:0px" /> 
```

看看这里：http: [//jsfiddle.net/Vloxxity/m4APD/](http://jsfiddle.net/Vloxxity/m4APD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:07:34.007

您在[http://www.savvytailor.com](http://www.savvytailor.com)上的好友正是这样做的：为每种面料类型（袖口、背面、正面、袖子等）创建十几个图像，然后根据用户选择的面料类型加载必要的图像。这些文件分布在多个文件夹中，每件衬衫一个文件夹。文件名对应于织物类型。所以面料编码 PC04CP09-05 的外领图像位于[http://www.savvytailor.com/3D_Shirt_Files/low-res-images/front-view/opened-collar/outside-collar/CL02/PC04CP09-05.png](http://www.savvytailor.com/3D_Shirt_Files/low-res-images/front-view/opened-collar/outside-collar/CL02/PC04CP09-05.png)

如果您使用智能文件夹结构，则不需要单独的 XML 来描述在哪里是什么，您的 PHP 脚本无论如何都会找到它。

您显然可以自动化文件和文件夹生成过程 - 使用 Photoshop 中的脚本功能或最流行的 3D 创作工具。

或者，您可以使用 WebGL 将衬衫加载为 3d 模型，然后只更改纹理。

# .net - 是否有可能制作一个可以深入了解 .net 程序的自动化工具？

> ID：15948078
> 
> 赞同：1
> 
> 时间：2013-04-11T11:52:10.553
> 
> 标签：.net, automation

最近我一直在为我的自动化脚本使用 TestComplete 并且效果很好。在看到它能够看到有关 .net 应用程序的深入信息（例如按钮名称和属性等）之后，我很好奇这个壮举是否可以正常进行。

是否可以创建一个工具来显示 TestComplete 那样的信息？更多地作为我创建自动化工具的副项目。

（旁注：我处理的唯一应用程序通常是 .NET 有时使用 Java）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:56:19.520

你需要的是**反射**类。

**手册** [http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)

**实施** [http://www.codeproject.com/Articles/55710/Reflection-in-NET](http://www.codeproject.com/Articles/55710/Reflection-in-NET)

# php - 处理错误 file_get_contents

> ID：15948083
> 
> 赞同：0
> 
> 时间：2013-04-11T11:52:24.507
> 
> 标签：php, json, twitter, file-get-contents

我正在编写一个应用程序，它使用 .php 脚本来使用 twitter 搜索 API 获取推文。见下面的代码：

```
<?php
$hashtag = 'hashtag'; // We search Twitter for the hashtag
$show = 25; // And we want to get 25 tweets
// Local path
$cacheFile = '../../_data/tweets.json.cache'; // A cachefile will be placed in _data/

$json = file_get_contents("http://search.twitter.com/search.json?result_type=recent&rpp=$show&q=%23" . $hashtag. "%20-RT") or die("Could not get tweets");
$fp = fopen($cacheFile, 'w');
fwrite($fp, $json);
fclose($fp);
?> 
```

我的问题是我想确保这个脚本运行没有失败，或者如果它确实失败了至少不会继续循环。

该脚本将每 1 分钟自动运行一次。有人知道在这里处理错误的好方法吗？

TL;DR：如何处理代码中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:56:08.137

简单来说，使用 '@' 前缀作为函数。它禁止显示错误。[在这里阅读更多](http://us2.php.net/manual/en/language.operators.errorcontrol.php)

```
<?php
$hashtag = 'hashtag'; // We search Twitter for the hashtag
$show = 25; // And we want to get 25 tweets
$cacheFile = '../../_data/tweets.json.cache'; // A cachefile will be placed in _data/
$json = @file_get_contents("http://search.twitter.com/search.json?result_type=recent&rpp=$show&q=%23" . $hashtag . "%20-RT");
if (!empty($json)) {
  $fp = fopen($cacheFile, 'w');
  fwrite($fp, $json);
  fclose($fp);
} else {
  echo "Could not get tweets";
  exit;
}
?> 
```

# c# - 根据上下文添加/删除事件

> ID：15948084
> 
> 赞同：0
> 
> 时间：2013-04-11T11:52:26.147
> 
> 标签：c#, winforms, events

我是 C# 和 WinForms 的新手。我有一些带有右键单击（上下文菜单）事件的对象。但是，根据上下文（例如，取决于用户是在向导屏幕还是主屏幕中），我想更改右键单击的功能。我用谷歌搜索了一下，发现我可以使用`+=`和`-=`运算符，但我仍然无法实现我想要做的事情。例如，给定下面的代码，

有任何想法吗 ？

编辑：我希望`OnClickCard`在不同的地方表现不同。

示例代码：

```
public override ContextMenuStrip GetContextMenuStrip(GoView view)
{
    if (Selectable)
    {

        ContextMenuStrip contextMenu = new ContextMenuStrip();

        if (!Empty)
        {
            // this is just for example so not showing the implementation
            contextMenu.Items.Add(new ToolStripMenuItem(
                "Delete", 
                null, 
                new EventHandler(OnClickDelete))); 
        }

        // Empty
        else
        {
            ToolStripMenuItem addCard = new ToolStripMenuItem("Add");

                foreach (..some data..)
                {
                    ToolStripMenuItem card = new ToolStripMenuItem(
                            data,
                            null,
                            new EventHandler(OnClickCard));

                    addCard.DropDownItems.Add(card);

                }
        }

    }
    else
    {
        return null;
    }
}

private void OnClickCard(object sender, EventArgs e)
{
    ToolStripMenuItem cardItem = (ToolStripMenuItem)sender;
    if (cardItem.Text.Contains("ABC"))
    {
        Common.Forms.FormMMUSettings f = new FormMMUSettings(cardItem.Text,ParentMagazine.NextSite);
        f.Show();
    }
    SetCard(new MagazineCard(2, cardItem.Text));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:06:22.853

您是说要根据单击时的情况更改上下文菜单的内容吗？如果是这样，最简单的方法是创建多个上下文菜单，然后使用一个事件来设置您想要的任何上下文菜单。

```
ContextMenu menu1 = new ContextMenu();

MenuItem menu1Item1 = new MenuItem();
menu1Item1.Header = "Menu 1 Item 1";
menu1Item1.Click += new RoutedEventHandler(menu1Item1Clicked);
menu1.Items.Add(mnu1Item1);

MenuItem menu1Item2 = new MenuItem();
menu1Item2.Header = "Menu 1 Item 2";
menu1Item2.Click += new RoutedEventHandler(menu1Item2Clicked);
menu1.Items.Add(menu1Item2);

ContextMenu menu2 = new ContextMenu();

MenuItem menu2Item1 = new MenuItem();
menu2Item1.Header = "Menu 2 Item 1";
menu2Item1.Click += new RoutedEventHandler(menu2Item1Clicked);
menu2.Items.Add(menu2Item1);

MenuItem menu2Item2 = new MenuItem();
menu2Item2.Header = "Menu 2 Item 2";
menu2Item2.Click += new RoutedEventHandler(menu2Item2Clicked);
menu2.Items.Add(menu2Item2);

public void menu1Item1Clicked(object sender, EventArgs e)
{

}

etc.. 
```

现在您可以设置您需要使用的任何菜单：

```
myForm.ContextMenu = menu1; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:57:24.320

`+=`并且`-=`应该可以正常工作，但我建议您使用一种处理程序存储库，您可以在其中切换要使用的处理程序。这应该像[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式一样工作，其中不同的向导步骤将是不同的策略。

*如果您向我们展示一些代码并指出哪些代码部分无法正常工作，将会更容易为您提供帮助。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:02:12.040

您似乎建议您希望根据上下文附加不同的处理程序：

```
if(that)
    obj.event += HandleThat;
else
    obj.event += HandleSomethingElse; 
```

这应该可行，但您也可以在一个处理程序中执行此操作：

```
obj.event += HandleAll;

void HandleAll(object sender, EventArgs arg) {
    if(that)
        HandleThat();
    else
        HandleSomethingElse();
} 
```

编辑：好的，您编辑的问题确实意味着别的。

第一个明显的问题是您添加`OnClickDelete`为处理程序，并显示`OnClickCard`在您的示例中不会调用的实现。如果是拼写错误，那么您只需要根据需要实现处理程序方法。究竟是哪一部分不工作？

# powershell - 远程位置：无法访问，或不存在/离线？

> ID：15948095
> 
> 赞同：0
> 
> 时间：2013-04-11T11:53:20.500
> 
> 标签：powershell, login

我正在制作一个 PowerShell 脚本，允许用户将某些本地文件移动到某个服务器。为了简化这个过程，我想检查用户是否可以访问服务器，如果没有，我想提示输入用户名/密码。

使用`Test-Path`我可以检查用户是否可以访问特定的远程位置。但是，如果 Test-Path 失败，则无法知道是因为远程位置不存在，还是因为用户没有足够的权限。

我正在寻找一种方法：

*   查明用户是否可以访问远程位置（可以为此使用 Test-Path）
*   （*如果上述失败*）找出这是因为远程位置不可用还是因为用户没有足够的权限
*   （*取决于上述*）显示错误消息或提示输入凭据

当然我可以测试路径，如有必要，要求提供凭据，然后再次测试路径。但我正在努力寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:48:38.223

您可以使用`Test-Connection`查看服务器是否存在。这不是一个万无一失的方法，因为并非所有可能在网络路径中的服务器和其他设备都响应 ICMP 请求，这是什么`Test-Connection`和`ping`使用。

# c# - 使用 iTextSharp 将图像附加到 PDF 页面

> ID：15948097
> 
> 赞同：0
> 
> 时间：2013-04-11T11:53:24.547
> 
> 标签：c#, image, pdf, itextsharp

我正在尝试使用以下方法将图像附加到现有 PDF。

```
public static byte[] Append(byte[] inputPdf, params Image[] images)
{
    var ms = new MemoryStream();
    ms.Write(inputPdf, 0, inputPdf.Length);
    ms.Seek(0, SeekOrigin.Begin);

    using (Document pdf = new Document(iTextSharp.text.PageSize.A4, 10, 10, 10, 10))
    using (PdfWriter writer = PdfWriter.GetInstance(pdf, ms))
    {
        pdf.Open();
        foreach (var image in images)
        {

            var result = pdf.NewPage();

            ImageFormat format = image.PixelFormat == PixelFormat.Format1bppIndexed
                || image.PixelFormat == PixelFormat.Format4bppIndexed
                || image.PixelFormat == PixelFormat.Format8bppIndexed
                ? ImageFormat.Tiff
                : ImageFormat.Jpeg;
            var pdfImage = iTextSharp.text.Image.GetInstance(image, format);
            pdfImage.Alignment = Element.ALIGN_CENTER;
            pdfImage.ScaleToFit(pdf.PageSize.Width, pdf.PageSize.Height);
            pdf.Add(pdfImage);
        }
        pdf.Close();
    }
    ms.Flush();
    return ms.GetBuffer();
} 
```

该`result`值没有使用，我正在调试它。该值始终为 true，因此添加页面正在运行。

生成的 PDF 与原始文件大小相同，但不可读。打开它时出现无效的根对象错误。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:53:11.090

**方法 1（没有 PdfStamper）**

```
using (var ms = new MemoryStream())
{
        var pdf = new PdfReader(inputPdf);
        var doc = new Document(pdf.GetPageSizeWithRotation(1));
        using (var writer = PdfWriter.GetInstance(doc, ms))
        {
            doc.Open();

            for (int page = 0; page < pdf.NumberOfPages; page++)
            {
                doc.SetPageSize(pdf.GetPageSizeWithRotation(page + 1));
                doc.NewPage();
                var pg = writer.GetImportedPage(pdf, page + 1);
                int rotation = pdf.GetPageRotation(page + 1);
                if (rotation == 90 || rotation == 270)
                    writer.DirectContent.AddTemplate(
                        pg, 0, -1f, 1f, 0, 0, pdf.GetPageSizeWithRotation(page).Height);
                else
                    writer.DirectContent.AddTemplate(pg, 1f, 0, 0, 1f, 0, 0);
            }
            foreach (var image in images)
            {
                doc.NewPage();

                ImageFormat format = image.PixelFormat == PixelFormat.Format1bppIndexed
                                     || image.PixelFormat == PixelFormat.Format4bppIndexed
                                     || image.PixelFormat == PixelFormat.Format8bppIndexed
                                         ? ImageFormat.Tiff
                                         : ImageFormat.Jpeg;
                var pdfImage = iTextSharp.text.Image.GetInstance(image, format);
                pdfImage.Alignment = Element.ALIGN_CENTER;
                pdfImage.ScaleToFit(doc.PageSize.Width - 10, doc.PageSize.Height - 10);
                doc.Add(pdfImage);
            }
            doc.Close();
            writer.Close();
        }
        ms.Flush();
        return ms.GetBuffer();
} 
```

**方法 2（使用 PdfStamper）**

```
var pdfReader = new PdfReader(inputPdf);
using (var ms = new MemoryStream())
{
        using (var stamp = new PdfStamper(pdfReader, ms))
        {
            foreach (var image in images)
            {
                var size = pdfReader.GetPageSize(1);
                var page = pdfReader.NumberOfPages + 1;
                stamp.InsertPage(page, pdfReader.GetPageSize(1));
                ImageFormat format = image.PixelFormat == PixelFormat.Format1bppIndexed
                                     || image.PixelFormat == PixelFormat.Format4bppIndexed
                                     || image.PixelFormat == PixelFormat.Format8bppIndexed
                                         ? ImageFormat.Tiff
                                         : ImageFormat.Jpeg;
                var pdfImage = iTextSharp.text.Image.GetInstance(image, format);
                pdfImage.Alignment = Element.ALIGN_CENTER;
                pdfImage.SetAbsolutePosition(0, size.Height - pdfImage.Height);
                pdfImage.ScaleToFit(size.Width, size.Height);
                stamp.GetOverContent(page).AddImage(pdfImage);
            }
        }
        ms.Flush();
        return ms.GetBuffer();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:18:15.913

您错误地假设可以将两个 PDF 文档的字节粘合在一起。

您有一个如下所示的 PDF：

```
%PDF-1.6
%âãÏÓ
1 0 obj <<
... PDF syntax
%%EOF 
```

另一个看起来像这样：

```
%PDF-1.6
%âãÏÓ
1 0 obj <<
... PDF syntax
%%EOF 
```

生成一个如下所示的文件：

```
%PDF-1.6
%âãÏÓ
1 0 obj <<
... PDF syntax
%%EOF
%PDF-1.6
%âãÏÓ
1 0 obj <<
... PDF syntax
%%EOF 
```

你真的不应该指望这会奏效！请从阅读我的书的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)开始，然后阅读有关调用的内容`PdfStamper`。然后转到这个问题：[如何在现有 PDF 中插入带有 iTextSharp 的图像？](https://stackoverflow.com/questions/583629/how-can-i-insert-an-image-with-itextsharp-in-an-existing-pdf)

# android - 如何在单选按钮中保存选定的值？

> ID：15948107
> 
> 赞同：0
> 
> 时间：2013-04-11T11:53:53.387
> 
> 标签：android, radio-button, store

我正在做测验应用程序。我设置了 50 个问题，每个问题包含 4 个选项（单选组），带有上一个和下一个按钮。我需要的是选择答案并进行下一个问题时，他再次提出了以前的问题，那时他会在选定的状态下卑鄙地选择答案。但是用户选择的值我 getText() 如何实现呢？任何人帮助我..

提前致谢..

```
ImageView previousbtn1 = (ImageView) findViewById(R.id.prv_btn);
        previousbtn1.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v)
            {
                if ( j < 1 )
                {
                    Toast.makeText(Question.this, "First Question", Toast.LENGTH_SHORT).show();
                }
                else
                {
                    --j;
                    --num;
                    --m;
                    TextView txtque = (TextView) findViewById(R.id.que_txt);
                    txtque.setText("Q" + num + ")" + ques1.get(j));
                    --k;
                    btn_practice1.setText(answ1.get((k * 4) + 0));
                    btn_practice2.setText(answ1.get((k * 4) + 1));
                    btn_practice3.setText(answ1.get((k * 4) + 2));
                    btn_practice4.setText(answ1.get((k * 4) + 3));
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:06:46.843

使用 SharedPreferences，它将永久保存您的值，直到用户重新安装（清除数据）应用程序。共享首选项的工作原理是这样的

```
// save string in sharedPreferences
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putString("some_key", string); // here string is the value you want to save
                    editor.commit();                    

// restore string in sharedPreferences 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
string = settings.getString("some_key", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:03:17.303

基本上看起来你的问题不是如何设置一个单选按钮，而是整个概念——所以我描述了我会怎么做：

**简单的方法**

使用任何类型的列表或映射（最好是 hashmap，其中键是问题编号，值是答案值（1,2 或 3 - 简单整数））。然后，例如，当您在问题 2 中时，您检查是否已经存在键 2 的条目，如果是，则读出值并激活相应的单选按钮（这是通过 完成的方式`radio1.setChecked(true)`）-如果没有一旦用户单击单选按钮，分析器就会存储在哈希图中。

**也许更好的方法:)**

与以前几乎相同，但不是简单的“整数”作为答案，而是使用对象作为答案（也许也用于问题，然后您可以将答案直接存储在问题中） - 如果答案/问题将是，这很好比简单的“1,2 或 3”更复杂。

**边注**

如果应用程序关闭后用户的答案应该可用，您必须将它们存储在 sqlite db 或共享首选项中。我认为 sqlite 对此更好，因为这些分析器并不是真正的 SharedPreferences/Settings，但你肯定需要更多的努力。

* * *

既然你要求它：

```
switch(answer){
    case 1:
        radio1.setChecked(true)
    break;
    case 2:
        radio2.setChecked(true)
    break;
    case 3:
        radio3.setChecked(true)
    break;
    default:
    break;
} 
```

# c# - 使用 BinaryWriter 写入 usblp0 的非阻塞 io

> ID：15948112
> 
> 赞同：3
> 
> 时间：2013-04-11T11:54:06.207
> 
> 标签：c#, binarywriter

我正在用 c# (mono) 编写一个程序来打印到财务打印机 (escpos)，它工作正常。问题是当我打印时，程序会挂起，直到我拥有的缓冲区被清除。因此，正如您想象的那样，如果我打印几张图像，它会变得更大，因此会挂起一段时间。这是不可取的。我用两种方式测试过

**一种方式**：

```
BinaryWriter outBuffer;
this.outBuffer = new BinaryWriter(new  FileStream (this.portName,System.IO.FileMode.Open));
.... apend bytes to buffer...
IAsyncResult asyncResult = null; 
asyncResult = outBuffer.BaseStream.BeginWrite(buffer,offset,count,null,null);
asyncResult.AsyncWaitHandle.WaitOne(100);
outBuffer.BaseStream.EndWrite(asyncResult); // Last step to the 'write'.
if (!asyncResult.IsCompleted) // Make sure the write really completed.
{
throw new IOException("Writte to printer failed.");             
} 
```

**第二种方式**：

```
BinaryWriter outBuffer;
this.outBuffer = new BinaryWriter(new  FileStream (this.portName,System.IO.FileMode.Open));
.... apend bytes to buffer...
outBuffer.Write(buffer, 0, buffer.Length); 
```

并且这两种方法都不允许程序继续执行。示例：如果它开始打印并且纸张用完，它将一直挂起，直到打印机恢复打印，这是不正确的方式。

提前感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:15:59.880

问题是您让程序等待写入完成。如果您希望它异步发生，那么您需要提供一个回调方法，该方法将在写入完成时调用。例如：

```
asyncResult = outBuffer.BaseStream.BeginWrite(buffer,offset,count,WriteCallback,outBuffer);

private void WriteCallback(IAsyncResult ar)
{
    var buff = (BinaryWriter)ar.AsyncState;
    // following will throw an exception if there was an error
    var bytesWritten = buff.BaseStream.EndWrite(ar);

    // do whatever you need to do to notify the program that the write completed.
} 
```

这是一种方法。您应该阅读[异步编程模型](http://msdn.microsoft.com/en-us/library/ms228963.aspx)以了解其他选项，并选择最适合您需求的选项。

您还可以使用[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，这可能更合适。

# java - 创建一个新的类实例，然后使用 arg Java 调用方法

> ID：15948114
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:54:09.577
> 
> 标签：java, reflection

我正在尝试创建一个类“ImageViewer”的新实例，然后调用一个名为“OpenFile”的方法，该方法具有另一个类“OFImage”的参数，这必须全部在“OpenFile”的原始实例中完成图像查看器"

我进行了反思，但是不断出现错误

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:06:29.017

> 我正在尝试创建一个类“ImageViewer”的新实例，然后调用一个名为“OpenFile”的方法，该方法具有另一个类“OFImage”的参数，这必须全部在“OpenFile”的原始实例中完成图像查看器"

好的。所以让我们创建一个新的`ImageViewer`：

```
ImageViewer iV = new ImageViewer(); 
```

然后调用该`OpenFile`方法。请记住，Java 命名约定规定方法的第一个单词始终以小写字母开头。

```
iV.openFile( // Some code ); 
```

现在您想将类类型传递给`OFImage`方法`OpenFile`。所以你可以在一个`Class`对象中传递它：

```
iv.openFile(OFImage.class); 
```

这将发送一个`Class`对象的实例，其中包含一个`OFImage`.

或者，如果您打算将对象的实例传递给它`OFImage`，则可以使用匿名对象：

```
iv.openFile(new OFImage(// necessary parameters)); 
```

# wix - 未运行主要升级回滚的 WiX 自定义操作

> ID：15948121
> 
> 赞同：2
> 
> 时间：2013-04-11T11:54:31.037
> 
> 标签：wix, custom-action, rollback, major-upgrade

我有一个 WiX 设置

```
<MajorUpgrade Schedule="afterInstallInitialize" 
  DowngradeErrorMessage="A later version of [ProductName] is already installed. Setup will now exit." /> 
```

如果在升级过程中发生错误，安装程序会回滚并恢复之前安装的版本。但是，通过自定义操作创建的计划任务会丢失并且永远不会恢复。

我用于创建/删除/回滚任务的自定义操作是：

```
<!-- task scheduling -->
<CustomAction Id="CreateScheduledTask" Return="check" Directory="SystemFolder"
              ExeCommand="&quot;[SystemFolder]SCHTASKS.EXE&quot; /Create /RU &quot;[TASK_DOMAIN]\[TASK_USERNAME]&quot; /RP [TASK_PASSWORD] /SC DAILY /TN &quot;Maintenance&quot; /TR &quot;[\\]&quot;[SERVICELOCATION]Maintenance.exe[\\]&quot;&quot; /ST [TASK_TIME]"
              Execute= "deferred"/>
<!-- rollback in case something went wrong -->
<CustomAction Id="CreateScheduledTask_Rollback" Execute="rollback"  Return="ignore" Directory="SystemFolder" ExeCommand="&quot;[SystemFolder]SCHTASKS.EXE&quot; /Delete /TN &quot;Maintenance&quot; /F" />
<!-- removal of task -->
<CustomAction Id="RemoveScheduledTask" Return="ignore" Directory="SystemFolder" ExeCommand="&quot;[SystemFolder]SCHTASKS.EXE&quot; /Delete /TN &quot;Maintenance&quot; /F" Execute= "immediate"/> 
```

排队为

```
<InstallExecuteSequence>
  <Custom Action="CreateScheduledTask_Rollback" Before="CreateScheduledTask"></Custom>
  <Custom Action="CreateScheduledTask"  Before="InstallFinalize"></Custom>
  <Custom Action="RemoveScheduledTask"  Before="RemoveFiles">
    <![CDATA[(REMOVE="ALL")]]>
  </Custom>
</InstallExecuteSequence> 
```

`CreateScheduledTask`-action 有一个条件`NOT Installed`，我出于测试目的删除了该条件。

谁能告诉我，为了在升级设置回滚时重新创建任务，我需要做什么？PS：我无权访问最初创建任务时使用的域、用户名或密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:07:46.770

您需要另一个回滚自定义操作，`RemoveScheduledTask`因为它基本上完成了`CreateScheduledTask`. 例如：

```
<CustomAction Id="RemoveScheduledTask_Rollback" Return="ignore" Directory="SystemFolder"
          ExeCommand="&quot;[SystemFolder]SCHTASKS.EXE&quot; /Create /RU &quot;[TASK_DOMAIN]\[TASK_USERNAME]&quot; /RP [TASK_PASSWORD] /SC DAILY /TN &quot;Maintenance&quot; /TR &quot;[\\]&quot;[SERVICELOCATION]Maintenance.exe[\\]&quot;&quot; /ST [TASK_TIME]"
          Execute="rollback" />

<InstallExecuteSequence>
   <Custom Action="RemoveScheduledTask_Rollback" Before="RemoveScheduledTask"">
    REMOVE="ALL"
   </Custom>
</InstallExecuteSequence> 
```

您将需要访问域、用户名和密码才能以与最初相同的方式创建任务。您可以使用[记住属性模式](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)在卸载期间使属性可用，尽管您可能希望在存储密码之前添加另外几个操作来加密/解密密码。

# javascript - 扩展更改时更改站点的内容

> ID：15948122
> 
> 赞同：0
> 
> 时间：2013-04-11T11:54:32.980
> 
> 标签：javascript, jquery, html, css

好的，所以我正在为一个朋友创建一个网站，他希望该网站以下列方式工作。

他有一页可以显示两个部分。一次只能出现一个部分。按钮用于在不同部分之间切换。我目前这样做的方式是使用两个 div 并在按下按钮时显示/隐藏它们。因此，如果第 1 部分正在显示并且按下按钮，第 1 部分将淡出，第 2 部分将面朝内。

这一切都很好，但是他希望它能够向人们发送到他的网站的链接，并且取决于扩展显示该特定部分。例如，假设这两个部分是学分和内容。如果他向某人发送 www.site.com/credits 的 url，那么他希望显示 credits 部分。如果他发送 www.site.com/content 的 url，那么他希望显示内容部分。他还想保持按钮点击在两者之间切换。

我一直在研究它，似乎这可以使用哈希值 (#) 来完成，例如 www.site.com#credits。有没有办法做到这一点，但使用/而不是#？

**编辑**

另一件事是，他不希望在单击按钮时刷新页面，他只想使用 javascript 来更改部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:04:59.577

如果您正在运行 Apache，则可以使用 rewrite 模块。

例如，像这样设置它：

```
RewriteEngine On
RewriteRule ^/(credits|content)/?$ switch.php?view=$1 
```

然后在*switch.php*中，您必须使用 URL 评估`view`变量`GET`，默认情况下会显示哪个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:16:11.813

[这](https://stackoverflow.com/questions/2426958/get-page-url-using-javascript)将帮助您从您的网址中获取最后一部分，基于您可以隐藏/显示您的内容或信用。

```
jQuery(function() {
var url, page, n;
url = window.location.pathname;
n = url.lastIndexOf('/');
if (n >= 0) {
    page = url.substring(n + 1);
}
if(page == "content"){
//display content
} else {
//display credits
}
}); 
```

# security - 在线销售 pdf 并使用 drm 保护它们

> ID：15948123
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:54:34.453
> 
> 标签：security, pdf, drm

我想在线销售 PDF 文件，所以我需要一种方法来保护它们。

我知道如何防止它下载（只有付费的人才能下载），但现在我需要一些 DRM 工具来防止它在其他设备上打开（也许用户上传它并获取下载到其他设备的链接）。

我可以为 windows、linux 和 android 开发自己的 pdf 阅读器，但我正在寻找不强制用户通过我自己的 pdf 阅读器打开我的 pdf 文件的东西。

在不为 android、windows 和 linux 开发任何东西的情况下进行 drm 的最佳方法是什么？（类似插件或......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:01:17.093

PDF 作为一种格式的强制性程度如何？您是否考虑过通过亚马逊商店等地方为电子阅读器发布它？

虽然我个人反对 DRM，但请阅读以下兴趣点： [http](http://www.locklizard.com/pdf_security_drm.htm) ://www.locklizard.com/pdf_security_drm.htm 另外，您可能已经注意到，谷歌搜索 DRM 将为您提供有关如何摆脱的更多结果它，而不是提供 pdf DRM 安全措施的公司。

除了 DRM，我认为密码也是 PDF 的一个选项。也许您可以考虑使用**唯一密码**分发 PDF 。

# php - 更好地实现自定义用户导航

> ID：15948125
> 
> 赞同：0
> 
> 时间：2013-04-11T11:54:35.267
> 
> 标签：php, navigation, switch-statement

我有根据单个变量生成用户导航的代码，用户部门 id，这是在他们在网站上注册时选择的。

我查询用户个人资料以获取扇区 ID。

使用此扇区 ID，我在此扇区 ID 上执行大量 switch 语句（问题），然后将值推送到导航数组，然后导航数组。

由于我有 40 个或更多扇区，因此这个 switch 语句变得庞大且非常混乱。

有没有办法整理这段代码？也许是 MySQL 解决方案或任何替代方案？

这是我实现的一个案例，想象它大 50 倍：

```
switch($sectorid){
 //SECTOR HEADING- SECTORS
    case '9322938ef17ecfe2db3ed25738ed2debca78b9f4':
    case '94ab631f251624ef0a05485961c6f95f38767bbf':
    case '7e0c4c8f07128ea0cc5c5c9884242fcd4565bc72':
    case 'b32dd88a8baf60026fc01e1b0c10fc3371af0880':
    case '2f4d1285c7e0ebe8c448a87142e9d9d5aca0c0a6':
    case '5dc9d9a34c1cd4304c308a9a14189ea01110e85e':
    case '7e3201c9cab00bfe134f0e9277a8bbe16030440d':
    case '949d9ab17fc3f3e5af6db0dfcec6fc7fafa2b11f':
    case 'ef9839efe7b6d780b05fd332ca430a6a8f0c1606':
    case '526cb8abe2b45bb5ead83834310001f683491c0c':
        $key_array = array('catalogue',         'news',         'product_stories',          'staff');
        $url_array = array($d.'catalogue/',      $d.'news/',    $d.'product_stories/',      $d.'staff/');
        $name_array = array('Catalogue',         'News',        'Product Stories',          'Staff');
        break;  
} 
```

所以是的，它占用了大量的编码，我个人认为这样做很单调。

谁能看到更好的方法来实现这一点？

干杯

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:17:49.210

我有一种实现，但我在一个方面很挣扎，

这是建议的数据库结构：

```
nav_link_table - sector entry

id      sectorid        nav_id

nav_table - nav entry

id      name    key     url     name 
```

所以我可以将许多 nav_table 字段添加到 nav_link_table 中的扇区

但问题是如何使导航条目的顺序自定义到该部门？

# jakarta-ee - i18n 在上下文中的含义

> ID：15948127
> 
> 赞同：0
> 
> 时间：2013-04-11T11:54:35.977
> 
> 标签：jakarta-ee, xhtml

在我看到的代码片段中，我想了解代码中 i18n（国际化）的使用..任何人都可以简单地向我解释为什么它在那里..我只是想了解为什么会有“i18n.createTitle “这是否意味着，它将语言翻译成英语的国际化或什么？这可能是一个愚蠢的问题，但我是新手..谢谢..

```
<ui:composition template="/_decorator.xhtml">
    <ui:define name="title">#{i18n.createTitle}</ui:define>
    <ui:define name="heading">#{i18n.createHeading}</ui:define>
    <ui:define name="body"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:07:53.470

简而言之：每种语言都有一个属性文件。在这些文件中，每段文本都有一个标签。例如：

i18n_ES.properties：（西班牙语为 ES）

```
helloworld=Hola Mundo
share_button=Comparte esta entrada 
```

i18n_EN.properties：（英语为 EN）

```
helloworld=Hello World
share_button=Share this post 
```

浏览器请求通常在标头中有语言首选项，因此响应使用它来选择文本。如果要支持更多语言，则需要创建更多属性文件。

然后您可以使用 i18n 加载属性并请求文本：例如 i18n.helloworld。

# ruby-on-rails - 如何扫描单行参数字符串并返回两个数组？

> ID：15948128
> 
> 赞同：0
> 
> 时间：2013-04-11T11:54:39.880
> 
> 标签：ruby-on-rails, ruby, regex, json, wufoo

我有以下单行字符串：

```
params = {"FieldStructure"=>"{\"Fields\":[{\"Title\":\"Company Name\",\"Type\":\"text\",\"ID\":\"Field6\"},{\"Title\":\"Email\",\"Type\":\"email\",\"ID\":\"Field5\"}]}", "Field6"=>"tettetette", "Field5"=>"test@tessss.pl", "EntryId"=>"25"} 
```

格式化版：

```
params = {
  "FieldStructure"=>"
    {\"Fields\":[
      {\"Title\":\"Company Name\",\"Type\":\"text\",\"ID\":\"Field6\"},
      {\"Title\":\"Email\",\"Type\":\"email\",\"ID\":\"Field5\"}]}",
    "Field6"=>"tettetette", 
    "Field5"=>"test@tessss.pl", 
    "EntryId"=>"25"
} 
```

我想收到：`[["Company Name", "Field6"], ["Email", "Field5"]]`

我尝试使用扫描方法但有一些问题：

```
>>  fields = params['FieldStructure'].scan(/Title\":\"(.+?)\".+ID\":\"(.+?)\"/)  
=> [["Company Name", "Field5"]] 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:05:29.973

非正则表达式解决方案：

```
require 'json'
params = {"FieldStructure"=>"{\"Fields\":[{\"Title\":\"Company Name\",\"Type\":\"text\",\"ID\":\"Field6\"},{\"Title\":\"Email\",\"Type\":\"email\",\"ID\":\"Field5\"}]}", "Field6"=>"tettetette", "Field5"=>"test@tessss.pl", "EntryId"=>"25"}

a = JSON.parse(params["FieldStructure"])
out = a["Fields"].map {|a| [a["Title"],a["ID"]]}
p out  # [["Company Name", "Field6"], ["Email", "Field5"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:01:22.413

正确的方法是：

```
params['FieldStructure'].scan(/Title\":\"(.+?)\".+?ID\":\"(.+?)\"/) 
```

您在 ID 之前的 .+ 是贪婪的，这意味着它会消耗尽可能多的字符，直到找到下一个 ID。这 ？最终使它变得不那么贪婪。

# sql - 使用 Access 检查日期范围冲突

> ID：15948129
> 
> 赞同：0
> 
> 时间：2013-04-11T11:54:43.830
> 
> 标签：sql, date, ms-access

我在编写一个查询时遇到问题，该查询将告诉我给定的汽车是否在指定的日期期间被预订。我的表被称为`Bookings`并且有`CarID`,`StartDate`和`EndDate`列。如果在用户输入的时间段内预订了汽车，我想返回一行。目前我有这个查询，我从互联网上得到了一些修补：

```
SELECT *
FROM Bookings
WHERE BookingID NOT IN
(SELECT BookingID
 FROM Bookings
 WHERE
   (StartDate <= user_start_date AND EndDate >= user_start_date) OR
   (StartDate <= user_end_date AND EndDate >= user_end_date) OR
   (StartDate >= user_start_date AND EndDate <= user_end_date)) AND
   (CarID = 7) 
```

在这里，我使用`user_start_date`用户的开始日期和用户`user_end_date`的结束日期以及`7`汽车。但是，逻辑似乎不起作用。即使我验证日期中绝对没有冲突，它总是返回行。

如何修改此查询以使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:39:27.137

假设没有任何日期可以为空，并且开始日期小于结束日期，以下查询应列出与给定日期范围重叠的 7 号车的所有预订：

```
SELECT *
FROM Bookings
WHERE CarID = 7
AND StartDate < user_end_date
AND EndDate > user_start_date 
```

# javascript - 如果未选中另一组中的复选框，如何禁用一组复选框

> ID：15948133
> 
> 赞同：2
> 
> 时间：2013-04-11T11:54:47.710
> 
> 标签：javascript, html, forms, checkbox

我想这很简单，但不幸的是我根本不了解 JavaScript，也无法找到现有的解决方案。

```
<input type='checkbox' class='group1' name='1'> Name1<br>    
<input type='checkbox' class='group1' name='2'> Name2<br>     
<input type='checkbox' class='group1' name='3'> Name3<br><br>   
<input type='checkbox' class='group2' name='4'> Name4<br>    
<input type='checkbox' class='group2' name='5'> Name5<br> 
```

因此，如果既未选择`Name1`、`Name2`、 也未`Name3`选择，`Name4`则应`Name5`禁用。

提前谢谢各位！

由于我的页面已经将 jQuery 包含在其 <head> 部分中，因此我决定使用需要此库的变体。因此，我尝试了**Wing Leong**提供的代码，并取得了成功。但是，它有以下两个缺点：

1.  我忘了提到禁用的复选框应该明确设置为未选中。在当前的实现中，当我选择第二组中的一个复选框（例如，`Name4`）然后取消选中第一个中的所有复选框时，`Name4`将被禁用但仍处于选中状态。这是完全错误的，因为处理表单的服务器将接受`Name4`作为选定选项。如果不是真的，用户可能会感到困惑。
2.  在这个页面上，我有另一个 jQuery 脚本，当用户选择一个名为“全选”的复选框时，它会自动选择第一组的所有复选框。这里是：

    ```
    <input type='checkbox' id='maincb'> Check all 
    ```

和JavaScript为此：

```
<script type="text/javascript">    
    $(document).ready( function() {       
     $("#maincb").click( function() {    
if($('#maincb').attr('checked')) {    
    $('.group1:enabled').attr('checked', true);    
} else {    
    $('.group1:enabled').attr('checked', false);    
}    
});    
    });    
</script> 
```

问题是，这两个脚本不能很好地相互配合。即使在我将班级分配给`group1`“全选”复选框之后，它也不会影响第二组的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:05:35.533

你想要这样的工作吗？

[http://jsfiddle.net/steelywing/MtDLB/1/](http://jsfiddle.net/steelywing/MtDLB/1/)

```
$('#check_group1').click(function () {
    $('.group1:enabled').prop('checked', $(this).prop('checked'));
    updateButton();
});

function updateButton() {
    if ($('.group1:checked').length == 0) {
        $('.group2')
            .prop('disabled', true)
            .prop("checked", false);
    } else {
        $('.group2').prop('disabled', false);
    }
}

$('.group1').change(function () {
    updateButton();
});

updateButton(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:10:58.963

**HTML**

```
<input type='checkbox' class='group1' name='1'> Name1<br>    
<input type='checkbox' class='group1' name='2'> Name2<br>     
<input type='checkbox' class='group1' name='3'> Name3<br><br>   
<input type='checkbox' class='group2' name='4'> Name4<br>    
<input type='checkbox' class='group2' name='5'> Name5<br> 
```

**JavaScript（纯的，没有 jQuery）**

```
function checkFields() {
    var inputs = document.getElementsByTagName('input');

    if (inputs.length == 5) {
        if (inputs[0].checked == true || inputs[1].checked == true || inputs[2].checked == true) {
            inputs[3].disabled = false;
            inputs[4].disabled = false;
        }
        else {
            inputs[3].disabled = true;
            inputs[4].disabled = true;
        }
    }
}

// On-load
checkFields();

var inputs = document.getElementsByTagName('input');

for (var i = 0; i < inputs.length; i++) {
    inputs[i].addEventListener('click', function() {
        checkFields();
    });
} 
```

可能会将首字母`checkFields();`放入`<body onload="">`. 另请记住，您希望`document.getElementsByTagName('input');`使用 ID 定位父包装器，以免意外匹配页面上的其他输入字段。

**HTML**

```
<form id="wrappingForm">
    <input type='checkbox' class='group1' name='1'> Name1<br>    
    <input type='checkbox' class='group1' name='2'> Name2<br>     
    <input type='checkbox' class='group1' name='3'> Name3<br><br>   
    <input type='checkbox' class='group2' name='4'> Name4<br>    
    <input type='checkbox' class='group2' name='5'> Name5<br>
</form> 
```

**JavaScript**

```
var wrapper = document.getElementById('wrappingForm');
var inputs = wrapper.getElementsByTagName('input'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:06:11.150

Jquery是一种选择吗？如果是这样，那很简单...

```
 $('input').click(function() {

        if ($('.group1').is(':checked')) {
             $('.group2').attr('disabled', 'disabled');  
        } else {
            $('.group2').removeAttr('disabled');
        }

    }); 
```

[演示](http://jsfiddle.net/EkxgH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:18:49.520

```
<script type=text/javascript>
function clk(){
if (op1.checked == 1 && op2.checked == 1 && op3.checked == 1){
          op4.checked=1 ;
          op5.checked=1 ;
}
}
</script>

<input type='checkbox' class='group1' onclick="clk()" name='op1'> Name1<br>    
<input type='checkbox' class='group1' onclick="clk()" name='op2'> Name2<br>     
<input type='checkbox' class='group1' onclick="clk()" name='op3'> Name3<br> 
<input type='checkbox' class='group2' name='op4'> Name4<br>    
<input type='checkbox' class='group2' name='op5'> Name5<br> 
```

# wcf - Expand() 方法不会将所有数据绑定到对象

> ID：15948137
> 
> 赞同：1
> 
> 时间：2013-04-11T11:54:51.013
> 
> 标签：wcf, wcf-data-services, odata

我正在尝试使用 oData 查询 WCF 数据服务。一切正常，但在多对多关系中，扩展函数不起作用。关系是：`Product 1-* ProductOrder *-1 Order` 这是我查询服务的代码：

```
var queryProductOrder = (DataServiceQuery<ProductOrder>)SessionHelper.context.ProductOrder.Expand(x=>x.Product);
var allProductOrders = await queryProductOrder.ExecuteAsync(); 
```

如果我在调试模式下运行它并检查 allProductOrder 对象，则没有产品。有趣的事实是，当我检查生成的 OData 查询并在浏览器上运行它时，产品会展开。

查询如下所示：

```
http://localhost:10000/ProductOrder()?$expand=Product 
```

并且 JSON-Result 被扩展：

```
{"odata.metadata":"http://localhost:10000/$metadata#ProductOrder","value":[{"Product":{"id":1,"Name":"Die Sims","Tax_fk":1,"Price":"44.99","Description":"Lebenssimulation","Stock":"99.00","TotalOrder":"0.00","ProductUnit_fk":1,"Barcode":"121212121","MainImage_fk":null,"Tenant_fk":1,"PurchasePrice":null},"id":1,"Product_fk":1,"Order_fk":1,"Tenant_fk":1,"Amount":"10"}]} 
```

同样令人困惑的是，在其他多对多关系上，expand 方法的工作方式应该如此。

为什么它不扩展`allProductOrders`对象？为什么是`allProductOrders.First().Product`对象`null`，但生成的 OData 查询返回扩展数据？

# javascript - dropzonejs 文件类型

> ID：15948146
> 
> 赞同：0
> 
> 时间：2013-04-11T11:55:09.290
> 
> 标签：javascript, jquery, file-upload, multifile-uploader

我正在使用[dropzonejs](http://www.dropzonejs.com/)进行简单的文件上传。我目前有一些问题。

我不知道如何限制**上传文件的类型**。我的 PHP 后端有文件验证，但文件似乎已上传（它们得到复选标记），即使它们没有通过这些过滤器。不过，这不是一个真正的问题。我想要的唯一类型的额外 javascript 过滤是文件类型。目前您可以选择任何类型的文件，但我想将其限制为一个上传器中的图像文件和另一个上传器中的 pdf/word/excell。这可以在插件本身中完成，或者如何在其他地方使用 js 完成？

该插件不需要 jquery，但我在其他地方使用 jquery，因此它可以用于解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:35:31.020

从 dropzone 文档 ( [http://www.dropzonejs.com/](http://www.dropzonejs.com/) ) 中有接受选项 -

```
Dropzone.options.myAwesomeDropzone = {
  paramName: "file", // The name that will be used to transfer the file
  maxFilesize: 2, // MB
  accept: function(file, done) {
    if (file.name == "justinbieber.jpg") {
      done("Naha, you don't.");
    }
    else { done(); }
  }
}; 
```

您所要做的就是根据您的目的对其进行修改，例如接受具有某些扩展名的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-28T14:15:12.007

Dropzone 处理错误的默认方式是将其显示在屏幕上（在其默认模板中显示为 X）。为了以不同的方式处理它，我处理了错误事件：

```
this.on('error', function (file, errorMessage, xhrError) {
        this.removeFile(file);
        alert(errorMessage);
    }); 
```

这样就显示了一个错误，并且没有文件上传的UI错觉显示出来。

# javascript - 当文本框值与另一个 div 的内容相同时显示 div

> ID：15948148
> 
> 赞同：0
> 
> 时间：2013-04-11T11:55:12.977
> 
> 标签：javascript, html, show

我正在做一个测验，答案是随机的。我想要“正确！” div 显示文本框值何时与另一个 div 相同。

这是我到目前为止所得到的：

```
$(document).ready(function(){
    $("#buttontest").click(function(){
        if ($('#full_day').val() == '#answer') {   
            $("#correct").show("fast"); //Slide Down Effect
        } 
        else {
            $("#correct").hide("fast");    //Slide Up Effect
            $("#incorrect").show("500").delay("1000").hide("500");
        }
    });
}); 
```

```
<p>What is the animal?</p>
<div id="correct">
    That's Correct!
</div>
<div id="incorrect">
    Sorry, Try again!
</div>
<div id="answer">Monkey</div>
<input type='text' id="full_day"/>
<input type='button' id="buttontest" value="clickme"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:00:42.660

利用

```
$('#answer').text() 
```

而不仅仅是

```
'#answer' 
```

在 if 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:59:19.030

```
$(document).ready(function(){
    $("#buttontest").click(function(){

        if ($('#full_day').val() == $('#answer').html()) {   
            $("#correct").show("fast"); //Slide Down Effect
        } 
        else {
            $("#correct").hide("fast");    //Slide Up Effect
            $("#incorrect").show("500").delay("1000").hide("500");
        }
    });
});

<p>What is the animal?</p>
<div id="correct" style="display:none;">
    That's Correct!
</div>
<div id="incorrect" style="display:none;">
    Sorry, Try again!
</div>
<div id="answer" style="display:none;">Monkey</div>
<input type='text' id="full_day"/>
<input type='button' id="buttontest" value="clickme"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:59:27.153

```
if ($('#full_day').val() == $('#answer').text()) 
```

这是区分大小写的。使其不区分大小写：

```
if ($('#full_day').val().toLowerCase() == $('#answer').text().toLowerCase()) 
```

编辑：根据要求，这是一个允许多个答案的解决方案：

```
$('#check').bind('click', function() {
    var possibleAnswers = $('#answers').text().toLowerCase().split(' ');
    var givenAnswer = $('#user-answer').val().toLowerCase();
    var isAnswerCorrect = false;
    for (var indexPossibleAnswers = 0; indexPossibleAnswers < possibleAnswers.length; indexPossibleAnswers++)
    {
         if (possibleAnswers[indexPossibleAnswers] == givenAnswer)
         {
              isAnswerCorrect = true  
              break;
         }
    }
    if (isAnswerCorrect)
    {
         alert('Correct');   
    }
    else 
    {
         alert('Incorrect, try again.');   
    }
}); 
```

[现场演示。](http://jsfiddle.net/dislick/SrvNQ/)

# ms-access - 您如何在子表单中自动从关闭时间开始营业时间

> ID：15948150
> 
> 赞同：0
> 
> 时间：2013-04-11T11:55:22.647
> 
> 标签：ms-access, ms-access-2007, vba

嘿，我已经为此苦苦挣扎了很长时间，任何人都可以帮助我，这将使我过得愉快，我有一个子表单，我的子表单上有三个字段：营业时间、关闭时间和工作时间，就像我的营业时间以 9000 开头我的关闭时间是 12000 = 工作时间现在是 3000 在子表单中的下一条记录上我的营业时间必须自动成为我以前的记录的关闭时间，营业时间将自动变为 12000 任何人都可以帮助我，因为我承受着巨大的压力，我真的很感激提前谢谢。如果你能帮我解决这个问题，你会让我开心:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:25:52.513

所有这些信息都在一张表中吗？如果是，你的主键是什么？

如果您使用自动编号。

只需使用例如 dlookup 进行查找：

```
MyPreviousProject = me.IDProject - 1
MyReturn = DLookup("[ClosingHours]", "[TProject]", "[IDProject]=" & MyPreviousProject ) 
```

或类似的东西。

如果您需要任何帮助，请告诉我。

# oracle - 为什么 select 5 from emp 没有给出错误

> ID：15948159
> 
> 赞同：-4
> 
> 时间：2013-04-11T11:55:34.190
> 
> 标签：oracle, select

如果 emp 表包含 14 行并且当我执行时`SELECT 5 FROM EMP`为什么它显示以下输出而不是显示错误

```
5
-----
5
5
5
5
5
5
5
5
5
5
5
5
5
5 
```

为什么它只是将 5 作为列别名并将结果重复行作为数字 5 提供到表的行数。

另一方面，它不起作用

```
SQL> select something from emp;
select something from emp
       *
ERROR at line 1:
ORA-00904: "SOMETHING": invalid identifier 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:58:06.957

没有错误，因为您选择的是静态值，`5`并且对表中的每一行都重复此操作。这与使用相同：

```
select id, 5
from emp 
```

您将返回所有 id，但您还将返回`5`所有行的值为 的列。它是有效的 SQL，因此不会出现错误。

这只是选择一个常量值作为列，你不会收到错误，因为它是一个数字，如果你想对字符串做同样的事情，你会用单引号将值括起来：

```
select id, 'something'
from emp 
```

由于您是从表中选择的，因此您将为表中的每一行返回常量值。

如果您将查询更改为从对偶中选择，您将只返回一行，但您的表有 14 行，因此每一行的值都重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:06:23.790

你[`select`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_10002.htm#i2080424)一个或多个表达式，可能是[简单的表达式](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions002.htm)。

简单表达式的语法图显示一个数字或另一个固定值是有效的 - 所以您所做的就是`5`为表中的每一行选择一个常量值 , 。

也许毫无意义，但完全有效。（我通常选择`8`，输入太快并且输入错误`*`......）。默认情况下它被别名为`"5"`，因为它必须被称为某些东西；否则这将失败：

```
 select "5" from (select 5 from dual); 
```

在您的第二个示例中，没有名为 的列`something`，但是如果您想获得一个常量字符串，那么它将起作用：

```
 select 'something' from dual; 
```

如果没有引号，`something`这将是列的有效名称，因此 Oracle 尝试将其解释为该名称并失败，因为没有这样的列。`5`不是有效的列名（请参阅[对象命名规则](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements008.htm)，以免混淆，它被解释为固定值，而不是列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:57:54.990

您选择 14 行（`emp`表中的行数）。对于每一行，您选择的*值是恒定的。*`5`所以，你得到 14 行，每行包含`5`.

根据您的查询，该列也被`5`隐式命名。

* * *

```
select something from emp; 
```

`something`既不是常数，也不是列。连一个表情都没有。如果你会说

```
select 'something' from emp; 
```

那么你会得到 14 行，每行包含一个文本（varchar）值`something`。

# paypal - 从贝宝获得待处理的响应

> ID：15948160
> 
> 赞同：1
> 
> 时间：2013-04-11T11:55:43.567
> 
> 标签：paypal, payment-gateway, paypal-sandbox

我正在尝试将贝宝帐户集成到我的门户网站，它运行良好，但现在它向我显示贝宝响应待处理。如果我做错了什么或忘记了，请帮助我。并告诉我为什么当每件事情看起来都很好时它的显示挂起。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:09:17.420

您应该能够在您的卖家账户中查看您的交易详情，并查看交易为何处于待处理状态。如果您使用的是 IPN，您还应该看到它显示为待处理的交易状态，但您还应该得到一个待处理的原因，它会告诉您为什么它是待处理的。如果您愿意，我可以在我这边看一下，但我需要一个交易 ID。

# php - 用于在任何操作或页面加载之前执行的 WordPress 钩子

> ID：15948162
> 
> 赞同：12
> 
> 时间：2013-04-11T11:55:51.307
> 
> 标签：php, wordpress, action, hook

我对WP很陌生。任务是在一个不流行的 openID 提供者上开发一个用于 oauth 身份验证的插件。我对 CodeIgniter 项目做了同样的事情，但是 WP 是一个 CMS，对我来说理解起来有点复杂。在 Codeigniter 中，我在每个操作之前检查授权。在 WP 中，我需要一个用于它的钩子......在每页打印之前，或者......在框架方面的每个动作之前说是正确的。这个钩子叫什么名字？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-02-23T11:08:36.787

加载模板前的最后一个钩子是 **template_redirect**

你可以像这样使用它：

```
function my_function(){
    // your code goes here
}
add_action( "template_redirect", "my_function" ); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-15T19:46:18.637

您可以使用“初始化”挂钩。它将在元素或 html 代码之前执行。管理 POST 和 GET 变量也很有用。语法是这样的：

```
function yourfunction() {
    dosomething();
}
add_action('init', yourfunction); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T12:00:54.033

可以在此处找到所有可用挂钩的列表：[https ://codex.wordpress.org/Plugin_API/Action_Reference](https://codex.wordpress.org/Plugin_API/Action_Reference)

关于 Hooks 的信息：[https ://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters](https://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)

必须建议其他钩子，如果有好的建议，将在未来的版本中添加。或者您必须编辑核心文件；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T12:16:43.517

您的意思是当所有 wordpress 功能都可用但在包括标头在内的任何输出发送之前的钩子？

好吧，将您的功能挂在`init`. 访问网站时会调用。如果您只想将此钩子用于管理区域，那么它是`admin_init`.

# mongodb - MongoDB C# 驱动程序 - InsertBatch 获取受影响的文档计数

> ID：15948176
> 
> 赞同：0
> 
> 时间：2013-04-11T11:56:50.343
> 
> 标签：mongodb, mongodb-.net-driver

```
 var collection = database.GetCollection<Publication>("Publications");
 var result = collection.InsertBatch(bookCollection); 
```

我想获得受影响的文档数量。我将 AffectedDocumentCount 设为零。

有什么问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:02:22.917

看签名：

```
 IEnumerable<SafeModeResult> InsertBatch(
Type nominalType,
IEnumerable<Object> documents,
SafeMode safeMode 
```

[安全模式](http://api.mongodb.org/csharp/1.1/html/cac72c74-ae6d-9b2e-a503-303a40104143.htm)可能会导致您推迟真正的批量写入。玩`FSyncTrue`（可能很慢）或`True`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T21:14:47.497

服务器仅提供受更新操作影响的文档数的计数。

WriteConcernResult 的 DocumentsAffected 属性来自对 getLastErrorCommand 的响应的“n”字段，对于插入，该字段的值始终为 0。

# node.js - 动态连接到 socket.io

> ID：15948182
> 
> 赞同：1
> 
> 时间：2013-04-11T11:57:19.093
> 
> 标签：node.js, socket.io

我正在尝试通过 socket.io 将浏览器连接到我的应用程序。

```
<script type="text/javascript" src="http://localhost:4000/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('http://localhost:4000');
</script> 
```

使用这种标准方法，一切正常。现在我正在尝试根据服务器的 IP 将这个连接转换为“动态”，如下所示：

```
<html>
    <head>
        var socket;
        function loadFile(filename){
            var ip_server = location.host;
            var body = document.getElementsByTagName( 'body' )[0],
                fileref = document.createElement('script');
            fileref.setAttribute("type","text/javascript");
            fileref.setAttribute("src", "http://"+ip_server+"/"+filename);
            body.appendChild( fileref ); 
        }
    </head>
    <body>
        <script type="text/javascript">
            loadFile("socket.io/socket.io.js");
            socket = io.connect('http://'+location.host);
        </script>
    </body>
</html> 
```

但是萤火虫说***ReferenceError: io is not defined*** on line `socket = io.connect('http://'+location.host);`。

我该如何解决？有一种简单的方法可以做我在想的事情吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T12:16:21.183

Socket.io 与 Node.js 具有“神奇”的集成，这意味着更简单的东西将自动运行：

```
<script src="/socket.io/socket.io.js"></script>
var socket = io.connect(); 
```

这将找到没有明确主机或路径的库和套接字。它应该“正常工作”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-04T10:11:36.670

```
const socket = io.connect(location.href); 
```

# c# - 日历控件 - 显示季度

> ID：15948192
> 
> 赞同：1
> 
> 时间：2013-04-11T11:57:48.613
> 
> 标签：c#, wpf, .net-3.5

我正在尝试组合一个日历控件（WPF），它只会显示来自季度性质的日期集合中的日期。

例如，我的日期集合（日期时间对象列表）如下

```
31/Mar/2012

31/Dec/2012

30/Sep/2012

30/Jun/2012

30/Mar/2012 
```

现在我可以使用日历控件并将其显示模式设置为 Year 只是为了显示年月视图，但是如何设置控件来屏蔽上述集合中不可用的月份，只显示可用月份收藏？

请注意，这个问题有 2 个部分：

1.  当日历的显示模式设置为年份时，如何关闭一个月？
2.  我如何关闭不属于收藏的月份？

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:21:18.983

你可以尝试这样的事情：

```
public void BlackOutDates(startDate, endDate, periodInDays)
{
    while(startDate < endDate)
    {
        calender.BlackoutDates.Add(new CalendarDateRange(startDate, startDate.AddDays(periodInDays));
        startDate = startDate.AddDays(periodInDays+1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:03:26.720

只需找到最小和最大日期，然后执行以下操作：

```
calendarControl.BlackoutDates.Add(new CalendarDateRange(minDate, maxDate)); 
```

进一步你可以做范围，所以假设它不是那么直截了当，你需要多个范围（尽管从你的问题看起来不像）那么你可以这样做：

```
calendarControl.BlackoutDates.Add(new CalendarDateRange(rangeStart, rangeEnd)); 
```

此外，您甚至可以像这样涂黑一个特定的日期：

```
calendarControl.BlackoutDates.Add(new CalendarDateRange(blackoutDate)); 
```

因此，在您的情况下，将某些日期涂黑可能是最简单的。只需遍历列表并利用我给您的最后一个代码示例。

# jquery-ui - 在 Yii 中动态创建的 CJuiAutoComplete 不起作用

> ID：15948193
> 
> 赞同：0
> 
> 时间：2013-04-11T11:57:52.240
> 
> 标签：jquery-ui, yii, yii-components

我过去使用过 jQuery 的自动完成插件，但之前从未通过 Yii 将它作为小部件实现。

我正在动态创建另一个自动完成字段并且无法将其设置为实时：

```
$('input.ui-autocomplete-input').live("keydown.autocomplete", function() {
    $(this).autocomplete();
}); 
```

或者在创建它时简单地调用 .autocomplete() 以使其工作。任何想法为什么这会通过 Yii 与仅使用插件本身不同，或者我错过了一些非常简单的东西？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:36:41.820

我的解决方案过于简单。

每个自动完成字段必须具有唯一的名称属性。我正在使用

```
 <input name="family[]"/>
    <input name="family[]"/>
    <input name="family[]"/> 
```

通过将其更改为修复：

```
 <input name="family_0"/>
    <input name="family_1"/>
    <input name="family_2"/> 
```

只是有点尴尬，但值得张贴，以防其他人忽略了这样一个简单的问题。

**注意：上面的代码并不准确，重点是确保您为使用 jQueryUI 自动完成功能的每个字段使用*唯一名称*。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:53:39.910

`CJuiAutoComplete`依赖于 jQuery UI 的[自动完成功能](http://jqueryui.com/autocomplete/)，因此请确保 jQuery UI 已为您在其中动态创建字段的视图注册：

```
Yii::app()->clientScript->registerCoreScript("jquery.ui"); 
```

还要确保`source`提供带有自动完成标签的参数以供`autocomplete()`调用。以下对我来说很好：

```
<?php
$source = array(
    "hello",
    "test"
);
?>
<div id="wrapper">
</div>
<?php
Yii::app()->clientScript->registerScript("autocomplete", "
    $('<input />')
        .addClass('ui-autocomplete-input')
        .appendTo($('#wrapper'));
    $('input.ui-autocomplete-input').autocomplete({
        'source': " . CJavaScript::encode($source) . "
    });
", CClientScript::POS_READY); 
```

# backbone.js - 更好的前端和后端开发方式

> ID：15948200
> 
> 赞同：1
> 
> 时间：2013-04-11T11:58:19.460
> 
> 标签：backbone.js, frameworks, ember.js, frontend, backend

我正在启动一个项目，但我不确定**在后端和前端使用什么技术**。该项目需要生成图表和大量统计数据，所以我一直在网站上冲浪，我认为前端的最佳方式是 Backbone.js 或 Ember.js，是吗？

另一方面，我必须决定服务器部分。我是一个老派的开发人员... PHP。我需要开发一个读取 de ddbb 并将信息提供给前端的 API。我不知道开发一个系统的最佳方法是什么，让最终用户选择一个日期间隔来查看他们的统计数据（如 Google Analytics、Square 等）。也许是鲁比？Symfony 也一样？

谢谢！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:26:03.423

几个月前我也遇到过同样的情况，我决定选择 Backbone。主要原因是它更常用，因此更容易获得帮助和找到好的教程，而且它没有太多的固执己见，所以我认为您可以在开发时了解更多信息，并且您可以塑造您的应用程序以更好地满足您的需求。无论如何，我没有尝试过深入的 Ember 或 Angular，所以请谨慎对待我的意见。对于服务器端部分，我也一直使用 PHP，我尝试了 Ruby，我认为它对 web 应用程序的支持更好，但由于我公司的需要，我最终还是使用了 PHP。你也可以用 PHP 做得很好，但我建议使用像 Silex、Slim 或 Laravel 这样的框架，它们更适合放置一个 REST api，如果你想使用 Backbone，你将需要它。

# c# - ASP.NET：获取外部 IP 地址

> ID：15948201
> 
> 赞同：2
> 
> 时间：2013-04-11T11:58:20.193
> 
> 标签：c#, asp.net, ip

我开发了网站。我需要获取网站访问者的 IP。我尝试使用请求，但它只有内部 IP：

```
Response.Write(Request.ServerVariables["REMOTE_ADDR"]); 
```

我查看了服务器变量集合中的所有键 - 结果相同：

```
foreach (string var in Request.ServerVariables)
{
    Response.Write(Request[var]);
} 
```

如何获取外部 IP 地址？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-17T11:18:08.753

您可以使用它来获取外部（公共）IP 地址..

```
public static string getExternalIp()
    {
        try
        {
            string externalIP;
            externalIP = (new WebClient()).DownloadString("http://checkip.dyndns.org/");
            externalIP = (new Regex(@"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}"))
                         .Matches(externalIP)[0].ToString();
            return externalIP;
        }
        catch { return null; }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-17T11:21:53.577

这是我实现 WebTracking 的一部分。因此，您可以在这里获取 IpAddress 检索的片段。您可以在 Wikipedia 上阅读有关服务器变量的更多信息。

```
 /// <summary>
    /// Get ip address from request
    /// </summary>
    /// <param name="request"></param>
    /// <returns></returns>
    private string GetIpAddress(HttpRequest request)
    {
        if (request.ServerVariables.IsNull()) return null;

        var _realAddress = request.ServerVariables[@"HTTP_X_FORWARDED_FOR"];
        if (_realAddress.IsNullOrEmpty())
        {
            _realAddress = request.ServerVariables[@"HTTP_FORWARDED"];
        }
        if (_realAddress.IsNullOrEmpty())
        {
            _realAddress = request.ServerVariables[@"REMOTE_ADDR"];
        }

        return _realAddress;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:00:42.407

你在负载均衡器/代理后面吗？如果是这样，请检查请求的标头集合中是否存在类似于[`X-FORWARDED-FOR`](http://en.wikipedia.org/wiki/X-Forwarded-For).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T12:02:48.310

你可以这样使用

```
String lstrIpAddress;
if (Request.ServerVariables["HTTP_X_FORWARDED_FOR"] != null || Request.ServerVariables["HTTP_CLIENT_IP"] != null)
    lstrIpAddress = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
else
    lstrIpAddress = Request.ServerVariables["REMOTE_ADDR"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-03T10:00:34.243

你可以简单地使用这个 nuget 包。 [https://www.nuget.org/packages/IpPublicKnowledge/](https://www.nuget.org/packages/IpPublicKnowledge/)

简单易行。这是一个例子：

```
// Get Public IP
            var ip = IPK.GetMyPublicIp();

            //Get all IP infos
            var IPinfo = IPK.GetIpInfo(ip);

            //print some info
            Console.WriteLine("*--------------------------- IPK -----------------------------*");

            Console.WriteLine("My public IP : " + IPinfo.IP);
            Console.WriteLine();
            Console.WriteLine("My ISP : " + IPinfo.isp);
            Console.WriteLine();
            Console.WriteLine("My Country : " + IPinfo.country);
            Console.WriteLine();
            Console.WriteLine("My Languages : ");

            foreach (var lang in IPinfo.languages)
            {
                Console.WriteLine(" " + lang.Key + " : " + lang.Value);
            }

            Console.WriteLine("*-------------------------------------------------------------*");
            Console.Read(); 
```

# git - 如何找到分支的第一次提交？

> ID：15948202
> 
> 赞同：11
> 
> 时间：2013-04-11T11:58:24.383
> 
> 标签：git

假设下图：

```
A -- B -- C -- D -- E -- F
      \
       G -- H -- I 
```

我想找到`G`一个交互式 rebase 来压缩提交（但仍然在主题分支上保留一个提交），稍后将对其进行审查和合并。我不想只是重新调整整个分支，因为我想保留有一个分支并且它被合并的信息。

（我知道我可以查看历史记录并只使用提交的 SHA 校验和，但我正在寻找一种方法来做到这一点，而无需手动挖掘信息或计算提交的次数并使用 HEAD 中的 ~那个号码）。

编辑：澄清我想要实现的目标：

我想避免这种情况：

```
A -- B -- C -- D -- E -- F -- J
      \                      /
       G -- H -- I -- -- -- - 
```

并有这样的东西：

```
A -- B -- C -- D -- E -- F -- J
      \                      /
       G' -- -- -- -- -- -- - 
```

换句话说，我想通过主题分支上的交互式变基将提交压缩为一个，但仍保留分支并使用常规合并将主题分支的更改集成到主分支中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T13:22:06.020

git 中没有“在分支上”的提交。只能从分支*访问提交。*而且这些信息并不是提交最初属于哪个分支的一个很好的指标。所以我看到了两种解释你的问题的方法：

*   我想在分支的合并基础`branch`之后找到第一个提交。`master`
*   我想找到可以从 到达的第一个提交`branch`，但不能从`master`。

我假设你的意思是第二个。此命令返回的答案是：

```
 git rev-list ^master mybranch | tail -n 1 
```

**注意：**如果你分支出主题分支，这一切都会失败。

* * *

我对你想要达到的目标有点困惑。如果您希望整个分支由一个提交表示，但仍然获得合并，您应该这样做：

```
git checkout mybranch
git reset --soft `git merge-base mybranch master`
git commit -m 'All of Mybranch'
git checkout master
git merge --no-ff mybranch 
```

请注意，这将在第一个合并基础处启动壁球。`master`如果您之前合并，这可能不是您想要`mybranch`的。您可以将其修改为在 mybranch 上的第一次提交时开始，而不是在 master 上（在复杂的历史中可能会产生奇怪和意外的结果），方法是用以下命令替换第二个命令：

```
 git reset --soft `git rev-list ^master mybranch | tail -n 1`^ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T12:46:02.887

你会得到 B 与[git merge-base](https://www.kernel.org/pub/software/scm/git/docs/git-merge-base.html)

```
git merge-base F I 
```

或者更简单地说

```
git merge-base my_branch my_other_branch 
```

然后，您可以使用结果变基

```
git rebase -i B 
```

并且只保留第一个提交 G，同时压缩所有其他提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:15:53.123

`git merge-base`会给你 B。你想要 B 的所有直接孩子也是 I 的祖先。这与[我如何在 git 中找到下一个提交有关？](https://stackoverflow.com/questions/2263674/how-do-i-find-the-next-commit-in-git)并[在 Git 中引用提交的子项](https://stackoverflow.com/questions/1761825/referencing-the-child-of-a-commit-in-git)。尝试类似：

```
root=$(git merge-base master topic-branch)

git rev-list --parents ^$root topic-branch | grep " $root" | cut -f1 -d' ' 
```

这将列出从根到顶端的所有提交及其父项`topic-branch`，并显示父项是`merge-base`根的提交。

因为主题分支可能包含合并，所以从拓扑上来说，分支中可能有多个“第一次”提交。

# android - 应用程序崩溃说不包含库，即使它是

> ID：15948203
> 
> 赞同：0
> 
> 时间：2013-04-11T11:58:26.930
> 
> 标签：android, event-bus

在我对其进行 git reset 之前，我的 Android 应用程序似乎一直运行良好。现在它不断崩溃并说我正在使用的库不存在。

这是我得到的崩溃日志

```
04-11 16:31:31.230: E/AndroidRuntime(9206): FATAL EXCEPTION: main
04-11 16:31:31.230: E/AndroidRuntime(9206): java.lang.NoClassDefFoundError: de.greenrobot.event.EventBus$3
04-11 16:31:31.230: E/AndroidRuntime(9206):     at de.greenrobot.event.EventBus.postToSubscription(EventBus.java:413)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at de.greenrobot.event.EventBus.postSingleEvent(EventBus.java:399)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at de.greenrobot.event.EventBus.post(EventBus.java:326)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at com.cobboc.eashmartdemo.Session$5.onError(Session.java:362)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at com.cobboc.eashmartdemo.Session$5.onSuccess(Session.java:355)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at com.cobboc.eashmartdemo.Session$3.run(Session.java:238)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at android.os.Handler.handleCallback(Handler.java:615)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at android.os.Looper.loop(Looper.java:137)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at android.app.ActivityThread.main(ActivityThread.java:4931)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-11 16:31:31.230: E/AndroidRuntime(9206):     at dalvik.system.NativeStart.main(Native Method) 
```

我也尝试过恢复最后一个已知的工作副本。会不会是我机器的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:01:24.580

您需要确保该库位于 app libs 目录中

查看 eclipse - 确保您有一个 libs 目录并且该库在其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T18:00:13.790

事实证明，我使用 new relic 构建应用程序，当我使用 eclipse 构建它时，库失败了。

# php - 将数据添加到数据库中的不同表中

> ID：15948204
> 
> 赞同：0
> 
> 时间：2013-04-11T11:58:27.730
> 
> 标签：php, mysql, database

如何将客户端表单中的数据添加到数据库中的不同表中？

我的情况是这样的，我有三种形式的客户端，第一种是用于书籍项目（精装本、杂志等），第二种是用于音乐项目（CD、磁带等），第三种是用于电影项目（DVD、VHS 等） .)。

用户应该能够在任何表单中输入详细信息，然后数据应该填充到数据库中的正确表中。

任何想法家伙或脚本随时可用？我需要它是可扩展的，因此它应该处理多个请求而不会减慢或导致许多错误（我不介意调试一些:)）。我还必须考虑谁发布了使系统可扩展的内容。

哦，我是前端设计师，而不是 exp 核心软件应用程序网络程序员工程师编码器。

设置：PHP mySQL JS HTML

欢迎大家帮忙。

我很抱歉，伙计们！书籍的当前代码如下，音乐和电影的代码相同：

```
<?php
//Start session
session_start();

//Include database connection details
require_once('../config.php');

//Array to store validation errors
$errmsg_arr = array();

//Validation error flag
$errflag = false;

//Connect to mysql server
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if(!$link) {
    die('Failed to connect to server: ' . mysql_error());
}

//Select database
$db = mysql_select_db(DB_DATABASE);
if(!$db) {
    die("Unable to select database");
}

//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//Sanitize the POST values
$isbn = clean($_POST['isbn']);
$bookTitle = clean($_POST['bookTitle']);
    $author = clean($_POST['author']);  
$genre = clean($_POST['genre']);
$year= clean($_POST['year']);

//Input Validations
if($isbn == '') {
    $errmsg_arr[] = 'ISBN missing';
    $errflag = true;
}
if($bookTitle == '') {
    $errmsg_arr[] = 'Book Title missing';
    $errflag = true;
}
if($author == '') {
    $errmsg_arr[] = 'author missing';
    $errflag = true;
}
if($genre == '') {
    $errmsg_arr[] = 'Genre missing';
    $errflag = true;
}
if($year == '') {
    $errmsg_arr[] = 'Year missing';
    $errflag = true;
}

//Check for duplicate login ID
if($isbn != '') {
    $qry = "SELECT * FROM books WHERE isbn='$isbn'";
    $result = mysql_query($qry);
    if($result) {
        if(mysql_num_rows($result) > 0) {
            $errmsg_arr[] = 'Book and ISBN ID already in system';
            $errflag = true;
        }
        @mysql_free_result($result);
    }
    else {
        die('Query Failed: ' . mysql_error());
    }
}

//If there are input validations, redirect back to the registration form
if($errflag) {
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    die('Query Failed: ' . mysql_error());
    header("location: addMedia.php");
    exit();
}

//Create INSERT query
$qry = "INSERT INTO books(isbn, title, author, genre, year) VALUES('$isbn','$bookTitle','$author','$genre','$year')";
$result = @mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    header("location: bookAdded.php");
    exit();
}else {
    die('Query Failed: ' . mysql_error());
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:05:20.757

您将需要一个服务器端脚本来处理您的前端表单。

Foreach 表单，您将使用 PHP 的 PDO 扩展将其插入到不同的表中，[请在此处阅读有关它的更多信息。](http://php.net/manual/en/book.pdo.php)

# php - 直接从代码中调用特定的滑块

> ID：15948206
> 
> 赞同：0
> 
> 时间：2013-04-11T11:58:29.040
> 
> 标签：php, wordpress, slider, echo, nivo-slider

我正在运行一个 Wordpress 网站和我安装的主题，它带有一个显示在主页上的 nivoSlider。现在，我可以通过登录 WP 仪表板并导航到主题选项面板来选择要在主页上显示的滑块。从那里，我可以从下拉列表中选择要在主页上显示的滑块（随着我创建更多滑块，列表会不断填充）。这是与主题选项面板中“滑块”部分相呼应的代码：

```
//------------------------------------------------------------------------------
// SLIDER
//------------------------------------------------------------------------------

        $options[] = array( "name" => __('SLIDER','gxg_textdomain'),
                                                "type" => "heading",
                                                "img" => "/includes/admin/images/s.png");

        $options[] = array( "name" => __('Set up your slider','gxg_textdomain'),
        "type" => "info");

        $options[] = array( "name" => __('Show Slider on Homepage','gxg_textdomain'),
                                                "id" => $shortname."_slider",
                                                "std" => "1",
                                                "type" => "checkbox");

        $options[] = array( "name" => __('Select a Slider','gxg_textdomain'),
                                                "desc" => __('After you have created a slider, you can select it here.','gxg_textdomain'),
                                                "id" => $shortname."_sliderimages",
                                                "type" => "select",
                                                "options" => $options_slides); 
```

这是 header.php 文件中的代码，它与主页上的滑块相呼应：

```
<?php get_template_part( 'slider' ); ?> 
```

现在，如果我将上述代码放在任何模板文件中以在该特定模板上显示滑块，则显示的唯一滑块是从主题选项面板中选择的滑块。这是slider.php文件中的代码：

```
<div id="slider" class="nivoSlider">

        <?php

                if ( of_get_option('gg_slider') && of_get_option('gg_sliderimages') ) {

                        global $wpdb, $post;

                        $slider = of_get_option('gg_sliderimages');

                        $meta = get_post_meta( $slider, 'gxg_slider_images', false );

                        if ( !is_array( $meta ) )

                                $meta = ( array ) $meta;

                        if ( !empty( $meta ) ) {

                                $meta = implode( ',', $meta );

                                $images = $wpdb->get_col( "

                                        SELECT ID FROM $wpdb->posts

                                        WHERE post_type = 'attachment'

                                        AND ID IN ( $meta )

                                        ORDER BY menu_order ASC

                                    " );

                                foreach ( $images as $att ) {

                                        // Get image's source

                                        $src = wp_get_attachment_image_src( $att, 'full' );

                                        $src = $src[0];

                                        $caption = get_post_meta( $att , '_slidercaption', true);

                                        $caption = htmlspecialchars($caption, ENT_QUOTES);

                                        $cf = get_post_meta( $att , '_sliderurl', true);

                                        // Show image

                                        if ($cf) {    

                                        echo "<a href='$cf'><img src='{$src}' alt='' title='$caption' /></a>";

                                        } else {    

                                        echo "<img src='{$src}' alt='' title='$caption' />";

                                        }

                                }

                        }        

                }        

        ?>

</div><!-- .slider--> 
```

我基本上想要做的是我想修改slider.php文件，以便我可以直接输入滑块的ID或滑块的slug（在slider.php文件内），以便它是echo无论我在“主题选项”面板中选择了哪个滑块，都会退出。据我了解，这可能是根据我在“主题选项”面板中的选择来选择滑块的代码：

```
$slider = of_get_option('gg_sliderimages'); 
```

而不是`of_get_option('gg_sliderimages')`上面代码中的“”，我想知道是否有任何方法可以输入我想要显示的滑块的 ID/slug。

期待解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:24:12.660

如果我对您的理解正确，您想将代码的第二部分复制到自定义视图（例如 single.php），并回显带有自定义帖子的自定义滑块，您将不得不硬输入这些帖子？

好吧，在你复制了代码之后，你应该从你的模板选项中删除第一个需要参数的条件，正如你已经想到的那样。这样，无论您在菜单中选择了什么，它都会始终显示滑块。

其次，注释掉这行代码：

```
$slider = of_get_option('gg_sliderimages'); 
```

您将这样做是因为 $slider 变量包含一组帖子 ID，这些帖子 ID 由自定义主题函数 of_get_option() 转发。之后，您将需要定义自己的数组，就像您想要的那样，一组自定义帖子。例子：

```
$slider[] = array('123', '256', '455'); 
```

另外，请记住，如果您的 single.php 文件期望之前由 query_posts(); 定义的 $post ，则重新定义全局变量可能会进一步分解您的代码。在这种情况下，您应该在 foreach 循环之后重置查询。

# android - (ANDROID PAYPAL SDK) 如何在 PayPalPayment 方法中添加 PayPal ReceiverDetails？

> ID：15948207
> 
> 赞同：1
> 
> 时间：2013-04-11T11:58:29.633
> 
> 标签：android, in-app-purchase, paypal, paypal-sandbox

如何在 PayPalPayment 对象中添加 PayPalReceiverDetails 对象

因为 PayPalPayment 中没有方法 `getReceivers().add(PayPalReceiverDetails)，

这是我的代码：

```
PayPalPayment payPalPayment = new PayPalPayment();
payPalPayment.setCurrencyType("USD");
payPalPayment.setRecipient("example-merchant-1@paypal.com");
payPalPayment.setSubtotal(new BigDecimal("1.00"));
payPalPayment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);
PayPalInvoiceData invoiceData = new PayPalInvoiceData();
invoiceData.setTax(new BigDecimal("0.00"));
invoiceData.setShipping(new BigDecimal("0.00"));
PayPalInvoiceItem invoiceItem = new PayPalInvoiceItem();
invoiceItem.setName("Samsung Gallexy S4 toy");
invoiceItem.setID("87238");
invoiceItem.setTotalPrice(new BigDecimal("1.00"));
invoiceItem.setUnitPrice(new BigDecimal("1.00"));
invoiceItem.setQuantity(1);
invoiceData.getInvoiceItems().add(invoiceItem);
payPalPayment.setInvoiceData(invoiceData);
payPalPayment.setMerchantName("The Store");
payPalPayment.setDescription("Pay Pal Example");
payPalPayment.setCustomID("1212121212");
payPalPayment.setIpnUrl("http://www.Test.com/ipn");
payPalPayment.setMemo("Test MEMO");
Intent chckoutIntent = PayPal.getInstance().checkout(payPalPayment, MainActivity.this,new ResultDelegate());
startActivityForResult(chckoutIntent, requestCode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T12:56:03.377

我用一个 Receiver 创建了这个。

```
 PayPalPayment newPayment = new PayPalPayment();
    newPayment.setSubtotal(new BigDecimal(1));
    newPayment.setCurrencyType("USD");
    newPayment.setRecipient("validPaypalEmailaccount");
    newPayment.setMerchantName("My Company");
    Intent paypalIntent = PayPal.getInstance().checkout ( newPayment , PaypalDetailImplementation.this , adjustclass , new ResultDelegate()) ;

    startActivityForResult(paypalIntent,request ); 
```

# php - 按星期几分组日期

> ID：15948208
> 
> 赞同：0
> 
> 时间：2013-04-11T11:58:36.647
> 
> 标签：php, sql

我有一个问题，找不到解决方案。

我有一个简单的电视节目表，如下所示：

```
CREATE TABLE IF NOT EXISTS 程序 (
    id_program int NOT NULL AUTO_INCREMENT 主键，
    播出日期时间，
    标题 varchar(50)
);

```

和表中的一些行：

```
2003-10-20 17:00 因素
2003-10-21 17:00 因素
2003-10-22 17:00 因素
2003-10-20 19:00 表格
2003-10-21 14:00 因素

```

如何获得因子的结果，如下所示：

```
周一至周三：17.00
星期二：14.00；

```

是否可以在 SQL 中执行此操作，或者我是否需要在 PHP 中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:25:35.613

我认为在一个查询中得到你想要的东西并不容易。但我得出的结果几乎是您想要的结果：

```
SELECT TIME(air), title, GROUP_CONCAT(DAYOFWEEK(air)) 
FROM programs WHERE title = 'Factor' 
GROUP BY TIME(air) 
```

这给了我以下结果：

```
TIME(air)   title   GROUP_CONCAT(DAYOFWEEK(air))
-------------------------------------------------
14:00:00    Factor  3
17:00:00    Factor  2,3,4 
```

有了这个结果，您可以轻松地利用 php 来获得您想要的结果。像“周一、周三、周五-周六”这样的结果也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:39:01.837

这并不能完全像在 MSSQL 中那样回答问题。我知道有 MySQL 的风格可以做到这一点

```
declare @tempTable TABLE (dt_timeOfProgram datetime, str_name varchar(10));

insert into @tempTable values 
('2003-10-20 17:00', 'Factor'),
('2003-10-21 17:00', 'Factor'),
('2003-10-22 17:00', 'Factor'),
('2003-10-20 19:00', 'Form'),
('2003-10-21 14:00', 'Factor');

select
REPLACE(REPLACE(REPLACE(dow, '</dow><dow>', ','), '<dow>',''),'</dow>', '') as DOW
,   [time]
,   [showName]
from (  select distinct
        CAST(dt_timeOfProgram as time) as [time], 
        str_name [showName],
        (   SELECT DATENAME(dw, t1.dt_timeOfProgram) as [dow]
            FROM @tempTable t1 
            where t1.str_name=t2.str_name
            and  CAST(t1.dt_timeOfProgram as time) = CAST(t2.dt_timeOfProgram as time)
            order by t1.dt_timeOfProgram
            for XML PATH('')) [dow]
    from @tempTable t2) as t 
```

这是结果集

```
Tuesday                     14:00:00.0000000    Factor
Monday,Tuesday,Wednesday    17:00:00.0000000    Factor
Monday                      19:00:00.0000000    Form 
```

这是一个相当草率的工作。我永远不会在实时应用程序中这样做。此逻辑将由业务逻辑而不是 db 处理。

数据库资源一般都是 LEASE 可伸缩的。所以最后，您希望尽可能少地使用它们。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:07:07.417

```
select date_format(`air`,'%d-%b %h:%i') from programs 
```

# svn - svn 子树，从一个 repo 更新，提交到另一个

> ID：15948209
> 
> 赞同：4
> 
> 时间：2013-04-11T11:58:36.530
> 
> 标签：svn, svn-externals, subtree, svn-export

A 在 SVN 存储库中有一个大项目。我想在其他应用程序中使用该项目的一些模块，所以我考虑从我的主 SVN 存储库中签出它们，以便我可以更新我的代码。

如何“导出”我的存储库的一个文件夹/模块，以便仅将该模块签出到其他项目？我想要包含该模块的其他项目也在他们自己的 SVN 存储库中。

在简历中，我希望能够对主仓库进行 SVN 更新，但对项目仓库进行提交。

我希望它清楚我想要做什么。

回应 DavidW anwser：

*   我有一个包含多个项目的存储库，但如有必要我可能会更改它。
*   我想提供源代码。它是一个 php 项目。我正在分叉模块。（我有一个全球通用项目，如果我的
    客户需要一些特定的功能，
*   我想为该客户创建一个单独的项目（在 svn 中也分开）。但我想
    有一种方法将主项目中所做的一些更改合并到
    客户端项目中。（例如：全局错误修复或功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:34:34.173

几个问题：

*   您是在谈论多个存储库，还是*同一个*存储库中的多个项目？
*   如果你*借用*这个其他模块的代码，你是让它与那个模块保持同步，还是你在分叉那个模块？
*   你**真正**想分享什么？您是否必须共享源代码或编译后的输出（`*.so`或`*.a`在 Unix C/C+、`*.jar`Java 等中）。

你给出的答案很大程度上取决于你对这些问题的回答。

让我们假设代码实际上是共享的。你在一个中所做的就是你希望在另一个中完成的。您在项目中进行了更改，**其他**项目中的代码也会更改。

在这种情况下，使用`svn:externals`. 这是您放置在目录上的属性。它所做的是将 Subversion URL 与子目录名称相关联。例如：

```
$ svn propset svn:externals "http://svn.vegibanc.com/svn/trunk/project/stuff utils" . 
```

将属性放置在当前目录中。当您进行更新或签出时，`utils`将在您的项目中创建一个名为的目录，Subversion 将自动签`http://svn.vegibanc.com/svn/trunk/project/stuff`出到该目录。这是魔法，但就像所有魔法一样，它既有光明的一面，也有黑暗的一面。

首先是光明的一面：

这是在两个项目之间共享代码。您在`utils`目录中进行更改并提交更改，其中的`stuff`子目录`project`将被更新。我用它在我的项目中构建工具。如果我升级该工具，所有项目都会获得升级后的工具。

现在，黑暗的一面：

如果你`svn:externals`像我展示给你的那样定义，你会后悔的。想象一下，如果您决定将工作分支以发布。好吧，您的目录`utils`仍然指向`trunk`. `project/stuff`如果您为 2.1 版分支，并且主干现在在 2.2 上工作，那么您将获得`utils`您不想要的东西。

更糟糕的是，如果您创建一个标签，该标签将继续更改，因为`utils`主干中的该目录仍在更改。

因此，强烈建议您指定 URL 的**确切**版本：

```
$ svn propset svn:externals "-r23283 ^/trunk/project/stuff@23283 utils" .
$ svn propset svn:externals "^/tags/2.3.3/project/stuff utils" . 
```

首先，我指的是 URL 的***特定***修订。它是完全不变的。如果我需要将它指向另一个修订版，我需要更改`svn:externals`属性本身。

第二个是指向一个特定的标签。它*不安全*，因为标签可以更改，但我可以通过这种方式将我的外部依赖项视为发布。我正在使用 2.3.3 版的*东西*实用程序。

两者都使用`^`快捷方式，这只是意味着*Subversion Repository Root*。这样，如果您将 Subversion 存储库移动到另一个系统，或者从 更改`http`为`svn`，您的外部存储库仍然可以工作。当然，如果你这样做，你将永远无法更改`svn:externals`. 而且，这不是你想要的。

您也可以使用**相对**URL，但它们更危险。

想象一下你的两个项目是这样的，你想让*stuff*目录成为*utils*`svn:external`目录的链接：

 *```
http://svn.vegibanc.com/svn/trunk/project/foo/stuff
http://svn.vegibanc.com/svn/trunk/project/bar/utils 
```

项目一起分支并标记在一起。你可以这样做：

```
$ co http://svn.vegibanc.com/svn/trunk/project/bar bar-trunk
$ cd project-bar
$ svn propset svn:externals "../foo/stuff utils" . 
```

这会将*stuff*目录从外部链接到您的*utils*目录。但是，它是以相对的方式完成的。如果你这样做：

```
$ cp http://svn.vegibanc.com/svn/trunk http://svn.vegibank.com/svn/branches/2.3 
```

您的*utils*目录仍将外部链接到 foo 项目下的*stuff*目录，但它们都将位于 2.3 分支上。

更改代码`bar/utils`将更改代码，`foo/stuff`反之亦然。您仍在共享代码，但在某种程度上，两个项目仍在同一个分支中。

稍后，如果您像这样标记：

```
$ cp http://svn.vegibank.com/svn/branches/2.3 http://svn.vegibank.com/svn/tags/2.3.0 
```

您的标签 2.3.0 不太可能更改，因为外部链接及其链接的内容都包含在该标签中。

以上假设您正在共享代码，并且任何一个项目中的更改都会影响另一个项目。

更好的方法是`foo`创建可以存储在发布服务器上的某种编译对象（如 JAR 文件或 *.so）。您将此编译对象视为具有自己的版本控制的自己的项目，并且您的项目将依赖于该对象的特定版本。不幸的是，这并不总是有效。

如果您只是分叉代码，请`svn cp`从存储库中的一个位置到另一个位置。您可以在不影响其他项目的情况下进行更改，反之亦然。更好的是，您可以在两个位置之间来回合并更改，以使它们保持同步。

希望这能回答你的问题。如果您可以扩展您的问题并向我们提供有关您想要的更多详细信息，我将能够更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:12:48.400

*   如果你想在 Subversion 存储库中使用共享代码 - 它是 svn:externals
*   如果您希望将共享代码上的主线端口更改为特定于客户的共享代码版本 - 它是 svn lingo 中的“供应商分支”

结合a）和b）将为您提供所需的结果

1.  选择一些节点（客户存储库的外部主干），您将链接到 dev-repo 中的共享节点
2.  创建外部定义（首选 PEG 修订，如果在提交到 dev-repo 后您必须轻松地收回手动更新定义的成本）
3.  将节点复制到该位置，其中 in 必须在实时项目中 ( `svn cp ...`)
4.  代码...
5.  当您在 dev-repo 中进行更改时，您希望将其转移到客户 repo - 将外部更新为所需的修订，将“供应商”节点合并到“实时”

样本：

如果您在客户的仓库中有

*   /vendor/lib（其中 lib 是来自国外 repo 的目录）*/trunk/common/lib（上面的 lib 的客户版本）

合并来自 lib-mainline 的更改是从 /vendor/lib 合并到 /trunk/common/lib （在您的主干的工作副本的相应节点中）

大卫关于外部的笔记仍然有效、正确和有用*

# c++ - sfml 平台错误：缺少类型说明符 - 假定为 int

> ID：15948222
> 
> 赞同：0
> 
> 时间：2013-04-11T11:59:05.527
> 
> 标签：c++, sfml

嘿，我试图检查我的玩家类中的边界框是否与我的地图图块的边界框发生冲突。但是它出现了这个错误。我的 map.h 中有一个名为 Player playermap 的定义；包含我的播放器 h。然后我通过说如果 mapplayer.boundingbox.intersects(platformboundingbox) 然后发生碰撞来检查它们是否相交。看看，任何见解将不胜感激

这是我的地图类的一部分

```
if(mapVector[i][j] == 1)
                         {
                            sprite.SetImage(BlockImage);
                            sprite.SetPosition(j * BLOCKSIZE, i * BLOCKSIZE);
                            platformBoundingBox.Top = sprite.GetPosition().y - 5;
                            platformBoundingBox.Bottom = sprite.GetPosition().y;
                            platformBoundingBox.Left = sprite.GetPosition().x - 5;
                            platformBoundingBox.Right = sprite.GetPosition().x;
                            Window.Draw(sprite);    
                            if(mapPlayer.boundingBox.Intersects(platformBoundingBox))
                                cout<<"collision occured";
                         } 
```

这是我的 map.h 文件中出现错误的地方

```
Player mapPlayer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:11:43.383

问题是你的

```
using namespace sf; 
```

这将使您的变量与类`Window`发生冲突。[`sf::Window`](http://www.sfml-dev.org/documentation/1.6/classsf_1_1Window.php)

要么使用例如

```
this->Window.Draw(...); 
```

或者（我建议）停止`using`声明。在声明中只需要多写四个字符，而且还有一个好处是它可以让你的代码更清晰。

# sql - 带有 IF 语句的 PL/SQL Oracle 查询

> ID：15948224
> 
> 赞同：1
> 
> 时间：2013-04-11T11:59:11.120
> 
> 标签：sql, oracle, if-statement, plsql, oracle-apex

我想实现一个只返回登录用户并只显示那里记录的查询，我做了如下并且它有效：

```
SELECT * FROM EMPLOYEE
WHERE UPPER(username) = v('APP_USER') 
```

但是，我有另一列名为 User_Type，用户可以是类型 1、2 或 3。如果我的用户类型为 1，我希望查询也返回所有表记录，因为用户类型 1 是管理员。

我想过这样做：

```
BEGIN
SELECT * FROM Employee 
WHERE upper(username) = v('APP_USER')
IF User_Type = 1
THEN SELECT * FROM Employee
END IF;
END;
/ 
```

但它在 APEX Oracle PLSQL 中不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T12:18:10.660

据我了解，您需要尝试以下操作：

```
DECLARE
  emp employee%ROWTYPE; -- Create a record type
  tbl_emp IS TABLE OF emp;
  -- ^^^ Create a table of that record type
  v_user_type employee.user_type%TYPE;
  -- ^^^ Variable to store user type
BEGIN
  SELECT user_type
    INTO v_user_type
    FROM Employee 
   WHERE upper(username) = v('APP_USER');

  IF v_user_type = 1 THEN
    SELECT *
           BULK COLLECT INTO tbl_emp
      FROM employee;
    -- ^^ Returns the entire table
  ELSE
    SELECT *
           BULK COLLECT INTO tbl_emp
      FROM employee;
     WHERE upper(username) = v('APP_USER');
    -- ^^ Returns the row related to the user.
  END IF;
END;
/ 
```

输出存储在嵌套表变量`tbl_emp`中。

**编辑：**

也可以使用纯 SQL 来实现，如下所示：

```
SELECT *
  FROM employee e
 WHERE EXISTS (SELECT 1
                 FROM employees e_in
                WHERE e_in.user_type = 1
                  AND UPPER(e_in.username) = v('APP_USER'))
    OR UPPER(e.username) = v('APP_USER') 
```

选择最适合您的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:01:31.337

你想要来自用户的所有记录，要么`UPPER(username)`是`v('APP_USER')`要么`User_Type`是 1？然后只需使用`OR`：

```
SELECT * FROM Employee WHERE upper(username) = v('APP_USER') OR User_Type = 1 
```

如果这不是你的意思，那么你能解释得更清楚吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:12:52.937

尝试：

```
select distinct e2.*
from employee e1
join employee e2 on (e1.username = e2.username or e1.User_Type = 1)
where UPPER(e1.username) = v('APP_USER') 
```

# ios - 在 iPad 上的 UIWebView 中定位弹出框

> ID：15948230
> 
> 赞同：2
> 
> 时间：2013-04-11T11:59:32.743
> 
> 标签：ios, objective-c, ipad, uipopovercontroller

我已向 UIMenuController 添加了自定义操作。单击该操作时，我希望弹出窗口类似于“定义”操作的工作方式（请参见下面的屏幕截图）。

![弹出窗口时出现](https://i.stack.imgur.com/05JDV.png)

但是，我无法让弹出框在 UIWebView 中正确定位。这是我的代码的摘录，当用户选择自定义操作时会生成弹出框：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    popover = [[UIPopoverController alloc]
                         initWithContentViewController:contentController];
    [popover setDelegate:self];
    popover.popoverContentSize = CGSizeMake(240., 60.);
    UIMenuController *menuController = [UIMenuController sharedMenuController];

    [popover presentPopoverFromRect:menuController.menuFrame
                             inView:webView
           permittedArrowDirections:UIPopoverArrowDirectionAny
                           animated:YES];
} 
```

这是设备处于纵向模式时的结果：

![弹出框的结果位置](https://i.stack.imgur.com/q9JvB.png)

如您所见，这还不错，但我无法使其与所选文本完全对齐；在横向模式下，弹出框的位置甚至不接近。

有谁知道我如何将弹出框正确定位到所选文本，并在用户旋转设备时正确定位？SDK 版本为 iOS 6.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:12:59.287

Your code is going wrong here:

```
[popover presentPopoverFromRect:menuController.menuFrame
                         inView:webView
       permittedArrowDirections:UIPopoverArrowDirectionAny
                       animated:YES]; 
```

You are using the menuController's view as the rect to which to anchor the popover window, whereas what you really want is the rect of the text selection.

You can get the text selection rect like so:

```
- (CGRect) textSelectionRect:(UITextView*)textView
{

    UITextRange *selectionRange = [textView selectedTextRange];
    NSArray *selectionRects = [self.textView selectionRectsForRange:selectionRange];
    CGRect completeRect = CGRectNull;
    for (UITextSelectionRect *selectionRect in selectionRects) {
        if (CGRectIsNull(completeRect)) {
            completeRect = selectionRect.rect;
        } else completeRect = CGRectUnion(completeRect,selectionRect.rect);
    }
    return completeRect;
} 
```

(see answer [here](https://stackoverflow.com/a/15299923/1375695))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:09:33.713

您可以使用 Javascript 代码从选定的文本中返回 CGRect。创建一个 file.js 并添加此代码（或将其放在 NSString 上）：

```
// Method that gets the Rect of current selected text
// and returns in a JSON format
var getRectForSelectedText = function(elm) {
    if (typeof elm === "undefined") {
        elm = window.getSelection().getRangeAt(0);
    }

    var rect = elm.getBoundingClientRect();
    return "{{" + rect.left + "," + rect.top + "}, {" + rect.width + "," + rect.height + "}}";
} 
```

加载 Javascript（文件或 NSString）

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView
{
    //Load JS file
    NSString *filePath  = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"js"];
    NSData *fileData    = [NSData dataWithContentsOfFile:filePath];
    NSString *jsString  = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];

    [self.webview stringByEvaluatingJavaScriptFromString:jsString];
} 
```

现在展示你的弹出框：

```
CGRect rect = CGRectFromString([self.webview stringByEvaluatingJavaScriptFromString:@"getRectForSelectedText()"]);

[popover presentPopoverFromRect:rect
                         inView:webView
       permittedArrowDirections:UIPopoverArrowDirectionAny
                       animated:YES]; 
```

如果您需要在 self.view 中使用 rect，请调整框架：

```
- (CGRect)rectForSelectedText
{
    CGRect rect = CGRectFromString([self.webview stringByEvaluatingJavaScriptFromString:@"getRectForSelectedText()"]);
    rect.origin.x += self.webview.frame.origin.x;
    rect.origin.y += self.webview.frame.origin.y;
    return rect;
} 
```

希望对你有所帮助！

# css - 使用 :target 和相邻的兄弟选择器来制作切换按钮

> ID：15948234
> 
> 赞同：0
> 
> 时间：2013-04-11T11:59:41.870
> 
> 标签：css, css-selectors

无论如何，我正在尝试创建一个切换链接，它基本上是两个相互重叠的按钮。其中一个会`display:none`在单击时变为，反之亦然。

目前，我的 CSS 是这样的

```
#main-nav:target + .page-wrap {
    position:absolute;
    left:-80px;
    #open-menu {
    display: none;
    }
    #close-menu {
    display: block;
    }
} 
```

...但 #open-menu 和 #close-menu 显示选项似乎没有显示。有什么帮助吗？

编辑：好的，所以我需要一个预处理器好吧._。

再次编辑：得到它的工作，谢谢大家！只是想知道，有没有办法让我的整个页面 div（不包括菜单）滑出**页面**？还是一些简单的溢出-x：隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:15:30.047

如果您没有使用预处理器并且您不想使用，我怀疑您可以像这样重写您的 CSS，假设您的 HTML 结构实际上对应于选择器：

```
#main-nav:target + .page-wrap {
    position: absolute;
    left: -80px;
}

#main-nav:target + .page-wrap #open-menu {
    display: none;
}

#main-nav:target + .page-wrap #close-menu {
    display: block;
} 
```

当然，如果`#open-menu`并且`#close-menu`不是 的后代`.page-wrap`，那么即使您确实使用预处理器来支持编写嵌套样式规则，这也根本不起作用（因为预处理器不能做某事，如果它不能用 plain CSS）。

如前所述，如果这些元素的相关性不能用后代和同级组合符来表达，那么您将不得不使用 JavaScript 来实现您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:21:10.630

作为演示，我尝试了以下方法：

```
<div class="page-wrap">
    <a id="close-menu" href="#open-menu">Close</a> 
    <a id="open-menu" href="#close-menu">Open</a> 
</div> 
```

使用以下 CSS：

```
.page-wrap #open-menu {
    display: block;
}
.page-wrap #close-menu {
    display: none;
}

.page-wrap #open-menu:target {
    display: block;
}
.page-wrap #open-menu:target + #close-menu {
    display: none;
}

.page-wrap #close-menu:target {
    display: block;
}
.page-wrap #close-menu:target + #open-menu {
    display: none;
} 
```

小提琴参考： http: [//jsfiddle.net/audetwebdesign/5aSdW/](http://jsfiddle.net/audetwebdesign/5aSdW/)
演示链接：http: [//jsfiddle.net/audetwebdesign/5aSdW/show](http://jsfiddle.net/audetwebdesign/5aSdW/show)

每次单击打开或关闭链接时，都会显示备用链接。

我不确定这是否过于有用，但可以做到。

# java - new File(path) 总是在 android 上创建一个文件？

> ID：15948236
> 
> 赞同：4
> 
> 时间：2013-04-11T11:59:46.007
> 
> 标签：java, android, file, android-file

我正在尝试检查android sd卡上是否存在文件...所以我这样做：

```
File f=new File(sdpath + "/" + DATABASE_NAME); //   
if(!f.exits()) {
...create new file..
}
else {
...do something...
} 
```

每次这实际上都会在 sd 卡上创建目录或文件。

我知道它不存在，并且当执行新文件时它被创建并且它不应该？

我在谷歌上读到新文件不会在文件系统上创建实际文件，但在我的情况下它确实......

检查文件/目录是否在不使用新文件的情况下退出的任何替代方法。

编辑1：好吧，我想补充一下（4年后:)）这个问题只发生在我写这篇文章时的两台设备上，以后再也不会出现了，其中一个是带有android 4.0的HTC Desire C和其他的是一些带有android 2.x的华为，不记得了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:03:44.203

出于某种奇怪的原因，结果发现新文件每次都会创建一个目录......

我没有检查`if (!f.exists())`，而是将其更改为检查`if (!f.isFile())`

在那种情况下，我创建了一个新文件并且效果很好，下次我运行它时，该文件已经在 sd 卡上......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:06:34.660

工作方式几乎和你的一样：

```
File f = new File(Environment.getExternalStorageDirectory(), "a directory");
if(!f.exists){
// do something
} 
```

并检查文件是否存在几乎相同的方式：

```
File f = new File(Environment.getExternalStorageDirectory() + "/a directory/" + "a file");
if(!f.exists){
// do something
} 
```

我希望它可以帮助你，因为它没有在我的应用程序中创建文件或目录。它只是检查了路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:02:36.040

这可能对你有帮助，试试

```
if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
                    //handle case of no SDCARD present
                } else {
                    File file = new File(Environment.getExternalStorageDirectory()
                         +File.separator
                         +"myDirectory" //folder name
                         +File.separator
                         +"myFile.example"); //file name

                    if(file.exists()){
                        Toast.makeText(MainActivity.this, "Not Create ", 12).show();
                    }else{
                        file.mkdirs();
                        Toast.makeText(MainActivity.this, "Create ", 12).show();
                    }

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:09:20.173

尝试这个

```
 File[] files = filedir.listFiles();
    for (File file2 : files) {
        if (file2.isDirectory()) {
            Toast.makeText(this, "directory", Toast.LENGTH_LONG).show();
        } else {  
            if (file2.getName().equals(DATABASE_NAME)) {
                Toast.makeText(this, "File found",Toast.LENGTH_LONG).show();
            }
          else{Toast.makeText(this, "File not found",Toast.LENGTH_LONG).show();
        }
}
} 
```

# javascript - 使用javascript的vb.net文件上传预览图像

> ID：15948238
> 
> 赞同：0
> 
> 时间：2013-04-11T12:00:22.020
> 
> 标签：javascript, html, css, vb.net

我想使用 fileupload 上传图像并在提交前预览所选图像，但它只能在 Firefox 和 IE6 中工作。我想在 IE 7 8 和 chrome 中工作，它也应该在 Firefox 中工作

```
<style type="text/css">
#newPreview
{ 
  filter: progidXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale);
    width: 136px;
    height: 134px;
    margin-left: 1px;
} 
</style>

<script language="javascript" type="text/javascript">
function PreviewImg(imgFile) {
    var newPreview = document.getElementById("newPreview");
    var src;
    if (document.all) {
        newPreview.innerHTML = "<img src=\"file:///" + imgFile.value + "\" width=\"130px\">";
    }
    else {
        newPreview.innerHTML = "<img src=\"" + imgFile.files.item(0).getAsDataURL() + "\" width=\"130px\">";
    }
} 
```

```
 <form id="form1" runat="Server" method="post" enctype="multipart/form-data">
       <div id="newPreview">
      <asp:FileUpload ID="file" runat="server" size="20" Width="129px" 
          onchange="PreviewImg(this)"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:26:55.987

尝试如下.. 它在 FireFox 和 Chrome 中工作

它会帮助你...

**CSS：**

```
<style>
#imgPreview
{ 
filter: progidXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale);
width: 136px;
height: 134px;
margin-left: 1px;
} 
</style> 
```

**脚本：**

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script>
        function PreviewImg(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgPreview').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }
</script> 
```

**HTML：**

```
<asp:FileUpload ID="file" runat="server" size="20" Width="258px" 
          onchange="PreviewImg(this)"/>
          <img id="imgPreview" src="#"/> 
```

# java - DirectoryChooser 未检测到 Unicode 字符 - 可能的错误

> ID：15948239
> 
> 赞同：2
> 
> 时间：2013-04-11T12:00:28.423
> 
> 标签：java, javafx-2

`DirectoryChooser`JavaFX 不接受带有外语字符（非 ascii）的文件。

```
DirectoryChooser dc = dcb.title("Place Renamed Pictures In").build();
    if(op!=null){
        File file = new File("/users/some/default/path");
        if(file.isDirectory()){
            dc.setInitialDirectory(file);
        }
    }
    File selected = dc.showDialog(stage);
    System.out.println(selected+" "+selected.isDirectory()+" "+selected.exists()); 
```

在对话框中选择目录时。它确实显示了所有文件。但是当你接受并选择一些非ascii时，上面的打印`/Users/a/prøveråfå false false`是模糊的。

此行为在 Mac 上。这是一个[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7193966)（之前它甚至没有列出非 ascii 文件，现在它列出了），但是 DialogChooser 的奇怪行为

我的配置：Java 1.7._10。Mac OS X 10.7.5

编辑：做

```
File f = new File("Users/a/prøveråfå");
f.exists();
f.isDirectory(); 
```

在这两种情况下都返回 true

# delphi - 缺少连接或 connstr delphi

> ID：15948242
> 
> 赞同：0
> 
> 时间：2013-04-11T12:00:32.833
> 
> 标签：delphi, delphi-xe3

当我运行我的程序并按下我的登录按钮之一时，它说缺少连接或连接字符串连接字符串已经存在

```
procedure TFmLogin.BtnLogin2Click(Sender: TObject);
begin
  ADOUser.ConnectionString:=Connstr;
  ADOUser.TableName:='TblUser';
  ADOUser.Open;
  if ADOUser.Locate('Username', EdUsename.Text,[]) then    
  begin
    if EdPassword.Text=ADOUser['Pword'] then
    begin
      if ADOUser['AdminLevel']>=0 then
  begin
    FmBrowse.Delete;
    Close
  end
  else
  showmessage('password invalid.');
    End;
  end
  else
  Begin
showmessage('Username invalid.');
  end;
  Close;
end; 
```

我在此过程中找不到任何应该寻找连接字符串的地方，并想知道是否有人可以帮助我找出哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T08:18:28.803

通常在 ADO 中，您必须编写数据库的完整路径。

而你的是

```
Const ConnStr='Provider=Microsoft.Jet.OLEDB.4.0;Data Source=cardb.mdb;Persist Security Info=False'; 
```

尝试更改 Source=cardb.mdb；源=[[完整路径]]\cardb.mdb；

希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T06:30:46.883

只要数据库与正在编译可执行文件的位置相同，路径就无关紧要。如果不是，那么是的，您需要按照 Dreamer64 的建议输入完整路径 + 他之前的连接`auth`，我认为他缺少用户名，他的`connections`字符串和未保存在组件上的密码。尝试 ：

```
 Const ConnStr='Provider=Microsoft.Jet.OLEDB.4.0;'+
'Persist Security Info=False;'+
'User ID=[yourdbusername];'+
'Initial Catalog=[yourtablename];'+
'Data Source=cardb.mdb;'; 
```

现在`ado component`右键单击它并编辑字符串，在该构建字符串旁边，第一个选项卡应向您显示路径用户名和密码，填写密码和测试连接，如果测试成功，您就可以开始了。

# java - Java 正则表达式。奇怪的行为

> ID：15948247
> 
> 赞同：2
> 
> 时间：2013-04-11T12:00:46.270
> 
> 标签：java, regex

任何人都可以帮助使用正则表达式吗？这段代码工作得很好。

```
public static void main(String[] args) {

    String s = "with name=successfully already exist\n";

    Pattern p = Pattern.compile(".+name=.*successfully.+", Pattern.DOTALL);
    java.util.regex.Matcher m = p.matcher(s);

    if (m.matches()) {
        System.out.println("match");
    } else {
        System.out.println("not match");
    }

} 
```

但是此代码返回“不匹配”。为什么？

```
public static void main(String[] args) {

    String s = "with name=successfully already exist\n";

    if (s.matches(".+name=.*successfully.+")) {
        System.out.println("match");
    } else {
        System.out.println("not match");
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:04:44.780

两者之间的唯一区别是第一个示例中的 DOTALL 标志。

如果没有该标志，`\n`字符串末尾的 将与最后一个模式 ( `.+`) 不匹配。

[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL)

> 在 dotall 模式下，表达式 . 匹配任何字符，包括行终止符。默认情况下，此表达式不匹配行终止符。

请注意，`matches`尝试匹配整个字符串（在您的情况下包括尾随换行符），而不仅仅是尝试查找子字符串（这在 Java 中与许多其他语言不同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T12:05:56.707

您在使用 compile() 时提供的 Pattern.DOTALL 参数使得 '.' 匹配“行结束符”。您需要提供一个内联标记以使 match() 执行相同的操作。尝试以下操作：

```
s.matches("(?s).+name=.*successfully(?s).+") 
```

干杯。

# php - 如何在 slim 框架上获取环境模式

> ID：15948250
> 
> 赞同：2
> 
> 时间：2013-04-11T12:00:55.647
> 
> 标签：php, slim

从 Slim 框架文档中挑选：

> **模式**
> 
> 这是应用程序当前操作模式的标识符。该模式不会影响 Slim 应用程序的内部功能。相反，该模式仅供您选择使用**configMode()**应用程序方法为给定模式调用您自己的代码。
> 
> 应用程序模式在实例化期间被声明为环境变量或作为 Slim 应用程序构造函数的参数。之后无法更改。模式可以是任何你想要的——“开发”、“测试”和“生产”是典型的，但你可以自由地使用任何你想要的东西（例如“foo”）。

```
<?php
  $app = new \Slim\Slim(array(
    'mode' => 'development'
  ));
?> 
```

问题是，当我尝试调用**$app->configMode();** 我收到一个致命错误，说 configMode() 方法未定义...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T12:21:57.113

您可以通过调用来访问环境模式`$app->getMode();`

另一种方法是使用[configureMode()](http://docs.slimframework.com/#Application-Modes)。

```
<?php
// Set the current mode
$app = new \Slim\Slim(array(
    'mode' => 'production'
));

// Only invoked if mode is "production"
$app->configureMode('production', function () use ($app) {
    $app->config(array(
        'log.enable' => true,
        'debug' => false
    ));
});

// Only invoked if mode is "development"
$app->configureMode('development', function () use ($app) {
    $app->config(array(
        'log.enable' => false,
        'debug' => true
    ));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T18:52:29.340

一旦你配置它，你可以做：`$app->mode;`或`$_ENV["SLIM_MODE"];`检索它。

# objective-c - 暂时禁用与 ViewController 的用户交互

> ID：15948251
> 
> 赞同：2
> 
> 时间：2013-04-11T12:01:09.063
> 
> 标签：objective-c, uiviewcontroller

我使用 Main ViewController 和 Navigation ViewController。如果用户使用 Navigation，Navigation ViewController 会占据屏幕的 80%，而 Main ViewController 会占据另外 20%。在这种情况下，用户不应与主 ViewController 交互。

如何暂时禁用与主 ViewController 的交互？

* * *

编辑：这声明了进一步的问题：

这部分工作正常。现在，如果导航打开，用户将无法与 MainViewController 交互，但这会产生另外两个问题：

问题：用户可以在MainView的位置（右侧20%的App）与NavigationView交互。用户不应该进行值得较低 NavigationController (Navigation) 的交互

问题：用户无法拖动 MainView 的 20% 来关闭 NavigationView 并打开 MainView 完成。

我认为这可能是禁用与 MainView 下分层的所有对象交互的原因。如果我在另一个 ViewController 的功能中执行此操作，这可能吗？困难在于，我应该为不同类型的“MainViews”执行此操作。有时它只包含一个 TableViewController，有时它是一组 UIButtons，等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:03:34.780

`mainViewController.view.userInteractionEnabled = NO`应该为你工作。

这会关闭视图对触摸的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:06:22.360

Now i like to show you my Solution, maybe someone got an similar problem. (I hope its ok, that i show this in a new Post and not an Edit, otherwise i cant check it as solved)

If the MainViewContent shouldn't be user interacted:

```
CGRect viewSize = self.centerView.frame;
UIView *disableInteractionView = [[UIView alloc] initWithFrame:CGRectMake(viewSize.origin.x, (viewSize.origin.y + 44.0), viewSize.size.width, (viewSize.size.height - 44.0))];
disableInteractionView.backgroundColor = [UIColor clearColor];
disableInteractionView.tag = 1234;
[self.centerView addSubview:disableInteractionView]; 
```

If the MainViewContent is free for interaction:

```
[[self.centerView viewWithTag:1234] removeFromSuperview]; 
```

# javascript - 如何在 Google Chrome 扩展中构建 HUD？

> ID：15948261
> 
> 赞同：1
> 
> 时间：2013-04-11T12:01:34.030
> 
> 标签：javascript, backbone.js, architecture, google-chrome-extension, angularjs

我正在尝试使用`content script`. 我的目标是在页面顶部（已经在我自己的页面上工作）显示可以与页面交互。

由于安全策略，我需要将非常复杂的东西放在扩展中：

*   在扩展上使用`require.js`（现在可以使用，使用[这个 Github repo](https://github.com/nonowarn/content-script-with-requirejs)）
*   使用模板引擎来描述我的显示：我需要向页面添加大量内容，我认为用 javascript 编写 HTML 不是一个好的工作流程。
*   对于我当前的版本，我在我的服务器上使用了翡翠，但这对于扩展是不可能的。我想我需要使用类似`Angular.js`or的东西`Backbone.js`，但我不能让它们在内容脚本上工作。
*   我的扩展程序和页面之间需要大量通信：例如，我需要检测几乎不断的鼠标移动
*   我需要使用与我的服务器通信`socket.io`

我的扩展程序的每一个功能都已经在一个独立的网页中开发和尝试过，但现在我需要将它集成到一个真正的扩展程序中，我真的被卡住了

所以由于这些要求，我想知道构建这个的正确方法是什么：把它全部放在一个 iFrame 中（服务器端通信会工作吗？以及如何与页面通信？），或者一种方法来制作模板引擎在那里工作得很好，还是我没有想到的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:05:45.883

尝试这个：

*   将 HUD 部分开发为内容脚本将包含在 iframe 中的独立页面。您[应该能够使用 Angular.js](https://stackoverflow.com/q/11336969/331508)等，但您需要尽可能多的本地副本，并且您需要在扩展中使用适当的条目以`manifest.json`使其在扩展中工作。有关详细信息，请参阅/创建其他问题。

*   让您的内容脚本将监控鼠标移动等的代码*注入目标页面。*让这段代码消化和总结数据，这样它就不会向系统发送垃圾邮件。可能每秒向 HUD 页面和/或内容脚本发送五六次摘要。

在那之后，它应该只是让这些部分工作的问题，一次一个。将其分解为具体问题，并一次针对一个具体问题提出问题（如果您在之前的问题中找不到答案）。

我很确定您似乎想要的是可行的，但是对于单个 Stack Overflow 问题来说，细节太宽泛了。

# c# - ASP.NET HttpContext 项在服务器上消失

> ID：15948262
> 
> 赞同：2
> 
> 时间：2013-04-11T12:01:38.303
> 
> 标签：c#, asp.net, sitecore, httpcontext

我们目前看到`HttpContext.Current.Items`在服务器环境中使用开发人员的本地环境没有问题（所有工作都按预期工作）的问题，我们突然丢失了放置在里面的项目（得到一个`NullReferenceException`）。

我草绘了一些代码并在下面使用：

Global.asax 我们在 BeginRequest 初始化工厂：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Items["Key"] = new Factory();
} 
```

在内部，`BaseControl`我们有一个属性可以轻松检索工厂：

```
public Factory Factory
{
    get { return HttpContext.Current.Items["Key"] as Factory; }
} 
```

在`UserControl`我们通过基本属性使用它：

```
protected void Page_Load(object sender, EventArgs e)
{
    Product p = Factory.CreateProduct();
} 
```

环境信息：

*   本地 DEV 使用 IIS 7.5 和 8 以及 Sitecore 6.6 在 Windows 7 和 8 上运行
*   服务器正在使用 IIS 7.5 和 Sitecore 6.6 运行 Windows Server 2008 R2

对于所有本地开发人员（我们正在与 6 人一起进行此项目），上述代码没有问题。但是，一旦我们将代码部署到测试服务器，使用工厂中断的位置（`HttpContext.Current.Items`即为空）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:45:51.800

I noticed you use the same name for your property as it's type:

```
public Factory Factory {} 
```

Maybe this initiates some unexpected behavior?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:20:48.920

当它的行为与您描述的一样时，我只能想象一种情况：在`Global.asax`文件中`Inherits`，测试服务器上的属性指向`Sitecore.Web.Application`直接省略您的代码执行。

您能否仔细检查`Global.asax`文件是否以

```
<%@Application Language='C#' Inherits="My.Assembly.Namespace.Global" %> 
```

如果`Global.asax`在您的开发环境中更改但尚未部署到测试环境，则可能会发生这种情况。

如果这不是问题，请尝试检查是否`Application_BeginRequest`在测试服务器上执行。它会给你一个答案，无论`Factory`是从不添加`HttpContext.Current.Items`还是`Items`在请求处理期间从 中删除。

# android - 关于服务、活动和通知之间交互的建议

> ID：15948265
> 
> 赞同：0
> 
> 时间：2013-04-11T12:01:44.430
> 
> 标签：android, service, android-activity

我正在实现一个将在 MainActivity 启动时启动的服务。该服务检查并维护网络连接。

我没有将服务绑定到活动，因为即使活动不可用，我也希望服务继续运行。该服务将从它所连接的服务器接收消息。

当服务收到消息时，我正在努力选择最佳逻辑来执行以下操作。

检查 MainActivity 当前是否打开并在用户面前

如果是调用activity中的一些方法与UI交互

如果没有活动更新，则通知是。

我的问题是；

如何正确检查活动是否在我的服务的 UI 中运行？我知道我可以绑定服务，但如果活动关闭，我不想取消绑定。那会是个问题吗？

我将需要以某种方式将消息从服​​务发送到活动。鉴于上述情况，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:08:18.033

做不同的事情。

*   如果您的服务没有在与您的活动分开的进程中运行，那么您的服务可以通过子类`Application`对象提供一个同步的（多线程安全的）消息列表，您的活动可以在其中查找它。但是，只有在轮询发生在某些其他事件上时，这才是最好的。

*   如果您想将消息“推送”到您的 Activity，您的 Activity 应该在发现它运行时向您的服务注册，而不是相反。在这种情况下，您的 Activity 应该实现一个接口，通过该接口，Service 可以以线程安全的方式通知您的 Activity 新消息。

当然，您也可以直接发布打开 Activity 的通知，但据我了解，您希望提供更顺畅的集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:07:31.280

一个想法是让您的服务在有新更新时发送状态栏通知。
实现通知，以便在单击时打开`MainActivity`.

然后，当用户点击通知时，如果`MainActivity`已经在运行，则将其置于最前面，否则将启动。
所以这基本上消除了检查`MainActivity`当前是否在用户面前打开的需要（我认为这是一种不好的做法）。

# objective-c - 为什么不在 init 和 dealloc 方法中使用访问器方法？

> ID：15948267
> 
> 赞同：2
> 
> 时间：2013-04-11T12:01:46.147
> 
> 标签：objective-c, memory-management

在线程“我如何管理内存”中，作者说“我不会在 init 和 dealloc 中使用完整的形式，因为它可能会触发 KVO 或有其他副作用。” 我没明白你的意思？

来源在这里[http://inessential.com/2010/06/28/how_i_manage_memory](http://inessential.com/2010/06/28/how_i_manage_memory)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:09:46.793

我认为作者应该更加小心命名约定。

```
@property (nonatomic, retain) NSString *something; 
```

应该综合到

```
@synthesize something = _something; 
```

这样，您可以参考`self.something`使用访问器方法或`_something`使用支持该属性的 ivar。它不太容易出错。

关于你的问题。当您拥有访问器时，除了在该访问器方法中设置该属性（例如通知另一个对象或更新 UI）之外，您可能还在做其他事情。而且您可能不想在 init 或 dealloc 上执行此操作。这就是为什么您可能希望直接访问 ivar，但情况并非总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:08:39.863

他指的是通过自我表示法访问您的@properties。合成属性时，会自动为您创建该变量的 getter 和 setter：

```
@property (nonatomic,strong) MyClass myVar;

@synthesize myVar = _myVar;

- (MyVar *)myVar
{
   return _myVar;
}

- (void)setMyVar:(MyClass *)myVar
{
  _myVar = myVar;
} 
```

这些方法是在定义和/或合成属性时在幕后创建的（取决于 Xcode 版本）

所以当你这样做的时候

```
self.myVar = 5; 
```

你实际上在做`[self setMyVar:5];`

但是，可以使用以下符号直接访问变量并绕过设置器

```
_myVar = 5; 
```

例子：

```
@property (nonatomic,strong) MyClass myVar;

@synthesize myVar = _myVar;

 - (void)someMethod
{
    // All do the same thing
    self.myVar = 5;
    [self setMyVar:5];
    _myVar = 5;
} 
```

文章的作者建议不要在 dealloc 和 init 方法中使用 getter 和 setter，而是使用`_myVar`符号直接访问变量。

有关最佳实践等的更多信息，请参阅此答案，但这是一个有争议的问题：[为什么我不应该在 init/dealloc 中使用 Objective C 2.0 访问器？](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)

# asp.net - SQL子查询错误不起作用

> ID：15948272
> 
> 赞同：0
> 
> 时间：2013-04-11T12:01:52.877
> 
> 标签：asp.net, sql, ms-access

我的 SQL 查询在尝试执行查询时出错：

> 错误：查询输入必须包含至少一个表或查询

```
INSERT into Posts (PostText,TimePosted, TID) 
       VALUES ('My Post','2013-04-11 13:50:18',
             (SELECT MAX(TID) FROM Threads AS TID)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:06:18.143

将文字字段与选择和移动别名结合起来；

```
INSERT into Posts (PostText,TimePosted, TID) 
   SELECT 'My Post','2013-04-11 13:50:18', MAX(TID) AS TID FROM Threads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:04:05.620

您没有在查询中指定表名。

您的表中有 3 个字段，您正在发送 3 个值（选择查询的最后一个值）。

但是您还没有为要插入数据的主查询编写表名。

# c++ - 静态 QString 初始化失败

> ID：15948274
> 
> 赞同：1
> 
> 时间：2013-04-11T12:01:58.877
> 
> 标签：c++, qt, static, static-members, qstring

对不起我令人毛骨悚然的英语。在 Qt 4.8.4 中，我尝试使用静态 QString 字段创建单例类。它不能是 const，因为这个字段会在运行时改变值。用常量 QString 初始化这个字段，在同一个文件中声明。

不幸的是，这不起作用并且在初始化字符串中

```
LogWay = QString("file.txt"); 
```

程序意外以错误结束

> 下级停止了，因为它收到了来自操作系统的信号。信号名称：SIGSEGV 信号含义：分段错误

在文件“qatomic_i386.h”中

我做错了什么？此代码示例适用于 int、bool 或 double 变量，但不适用于 QString。为什么？我尝试在没有 QString 构造函数的情况下编写，使用简单的等式

```
LogWay = "..."; 
```

但我有同样的错误。感谢您的帮助。

类的完整代码：

这是.h文件#include

```
const double _ACCURACY_ = 0.0001;
static const QString _LOG_WAY_ = "GrafPrinterLog.txt";

class GlobalSet
{
private:
static QSettings *_Settings;
GlobalSet(){}
GlobalSet(const GlobalSet&){}
GlobalSet &operator=(const GlobalSet&);

static GlobalSet *GS;

public:
static double IntToCut;
static double ReplaceSize;
static double Accuracy;
static int MaxPointCount;
static bool NeedProper;
static QString LogWay;

~GlobalSet();

static GlobalSet *Instance()
{
    if (GS == NULL)
    {
        GS = new GlobalSet();
        GS->firstSetUp();
    }
    return GS;
}

void firstSetUp()
{        
    Accuracy = _ACCURACY_;
    LogWay = QString("file.txt");//fail is here!
    NeedProper = false;
    _Settings = new QSettings("options.ini",QSettings::IniFormat);             
}

}; 
```

这是 .cpp 文件

```
#include "globalset.h"
GlobalSet *GlobalSet::GS = NULL;
QSettings *GlobalSet::_Settings = NULL;
double GlobalSet::Accuracy = _ACCURACY_;
QString GlobalSet::LogWay = _LOG_WAY_; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:24:42.167

它可能是“静态订单初始化惨败”（参见[此处](http://www.parashift.com/c++-faq/static-init-order.html)），因为您正试图`QString`从另一个 static 创建一个 static `QString`。

# r - 参数 C. epsilon 作为 R 中 kernlab 的 ksvm 中的向量

> ID：15948280
> 
> 赞同：2
> 
> 时间：2013-04-11T12:02:12.743
> 
> 标签：r, machine-learning, svm, kernlab

我正在尝试使用 R 中 kernlab 包的 ksvm 函数进行 epsilon-SVM 回归。我想将参数 C（正则化常数）和 epsilon（不敏感）作为向量（向量长度 = 训练数据长度）。但我无法弄清楚如何做到这一点。请提出一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T19:37:17.203

Why do you assume that you can do it? According to [documentation](http://cran.r-project.org/web/packages/kernlab/kernlab.pdf) of `ksvm` you can only weight classes, not particular samples. Such modification is accessible in for example [sklearn](http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html) python library (as samples' weights).

To artificialy implement per samples C-weights you could oversample your data. It will be very inefficient (especially if you have large differences in C values), but it can be applied to almost any SVM library.

# android - 根据 Spinner 中选择的项目更新 Activity

> ID：15948281
> 
> 赞同：1
> 
> 时间：2013-04-11T12:02:18.957
> 
> 标签：android, spinner, android-spinner, androidplot

在当前活动中，我正在打印上一个活动中选定股票的收盘价图表（使用 Androidplot）。
在这个活动中，我有一个用户可以覆盖的指标列表的微调器。
现在，我希望使用微调器中的这个新选择重新绘制图形。
我确实尝试刷新/重新加载页面 onItemSelected 但这会导致页面保持刷新，即使不等待用户输入。

```
public class DispGraph extends Activity {

private XYPlot plotstock;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.graph);

    // PRINTING SELECTED STOCK_NAME

    Bundle bundle = getIntent().getExtras();
    String sname = bundle.getString("SN");
    TextView t = (TextView) findViewById(R.id.textView1);
    t.setText(sname);

    // INDICATOR LIST

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.Indicators, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    String iname = spinner.getSelectedItem().toString();
    spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            startActivity(getIntent());
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }});

    //PASSING STOCK-TICKER & INDICATOR TO PHP

    // PLOTTING GRAPH

    plotstock = (XYPlot) findViewById(R.id.mySimpleXYPlot);
    Number[] series1Numbers = ind;
    Number[] series2Numbers = closing;

    XYSeries series1 = new SimpleXYSeries(Arrays.asList(series1Numbers),SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, iname);
    XYSeries series2 = new SimpleXYSeries(Arrays.asList(series2Numbers),SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "Closing Price");

    plotstock.setDomainLabel("Date");
    plotstock.setRangeLabel("Price");

    plotstock.addSeries(series1,new LineAndPointFormatter(Color.rgb(0, 200, 0), Color.rgb(0,100, 0), null, new PointLabelFormatter(Color.TRANSPARENT)));
    plotstock.addSeries(series2,new LineAndPointFormatter(Color.rgb(0, 0, 200), Color.rgb(0, 0, 100),null, new PointLabelFormatter(Color.TRANSPARENT)));

    plotstock.setTicksPerRangeLabel(2);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:55:54.343

使用您当前的方法，每次用户选择一个微调器值时，您当前的活动将再次启动，因此它将被放在 Android Stack 上。很快，如果用户更改您的微调器 n 次，您应该按 n + 1 次关闭您的应用程序。这是一个非常烦人的行为。

好吧，我不知道 AndroidPlot，但是查看它的 API，我发现了 redraw 方法。所以，我认为你可以尝试这种方式：

每次用户选择微调器值时，我都可以`plotstock`在调用后进行修改`plotstock.redraw()`

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        // TODO Auto-generated method stub
        //Change the graphics value here!
        plotstock.redraw();
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }}); 
```

# google-chrome-extension - 我可以从 background.js 调用 popup.js 中的函数吗？

> ID：15948283
> 
> 赞同：0
> 
> 时间：2013-04-11T12:02:23.283
> 
> 标签：google-chrome-extension

我想从 background.js 访问 popup.js

这是我的背景.js

```
function abc(){

  //call function of popup.js
   xyz()
}

and this is popup.js 

function xyz(){
  //do something
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-31T13:58:16.263

您可以使用 chrome 事件

背景
`chrome.runtime.sendMessage({yourMsg: 'Your Msg'});`

.js：popup.js：

```
chrome.runtime.onMessage.addListener(function(message) {
    //here you can call your popup.js function        
    xyz()
}); 
```

# c++ - 重新定义运算符 C++

> ID：15948284
> 
> 赞同：1
> 
> 时间：2013-04-11T12:02:26.870
> 
> 标签：c++, class, matrix, operators

我试图重新定义 + 运算符，它是对 2 个矩阵求和并在 C++ 中返回求和矩阵。但不知何故，它一直显示为 0。我错过了什么？这是我的代码。我也写了这段代码。

```
#include <iostream>
using namespace std;
class matrix{
    public:
        int a[100][100], n;
        matrix(int b[100][100], int n){
            for(int i=0; i<n; i++){
                for(int l=0; l<n; l++){
                    a[i][l]=b[i][l];
                }
            }
            n=n;
        }
        matrix(){}
        void matrix_input(int n){
            for(int i=0; i<n; i++){
                for(int l=0; l<n; l++){
                    cin >> a[i][l];
                }
            }
        }
        void matrix_print(int n){
            for(int i=0; i<n; i++){
                for(int l=0; l<n; l++){
                    cout << a[i][l] << " ";
                }
                cout << endl;
            }
        }

} ;
matrix operator + (matrix x, matrix y){
            int s;
            int n=x.n;
            matrix sum;
            for(int i=0; i<n; i++){
                for(int l=0; l<n; l++){
                    sum.a[i][l]=y.a[i][l]+x.a[i][l];

                }
            }
            return sum; 
}

int main(){
    int n;
    cin >> n;
    matrix o;
    o.matrix_input(n);
    matrix c;
    c.matrix_input(n);
    matrix sum;
    sum=o+c;
    sum.matrix_print(n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:06:58.320

您的主要错误在于该行`n=n`，这是一个自我分配。

正如你可以猜到的，当 n 是一个整数（并且应该是大多数时候）时，这几乎是一个空操作。你的意思是`this->n = n`；

（更好的方法是不冲突命名，但小修复会起作用。您还需要修复 operator+ 来分配`sum.n = n;`

local`n`参数优先于类成员，因此您需要`this->n`限定类成员。

顺便说一句，您的矩阵非常大（10,000 个整数），因此复制起来很昂贵。因此`operator+`，如果将其参数作为 const 引用，您的重载会更有效。

大概`n`是一个逻辑大小，因为物理上你的矩阵总是 100 * 100。你的默认构造函数至少应该初始化`n`为 0，否则试图读取这个矩阵的后续行为将是未定义的。在读取可能超出矩阵范围的内容时，您应该进行断言检查。（您的 operator+ 可以检查两者是否具有相同的尺寸）。

如果你想使用“动态”大小，那么你只使用你将实际用于矩阵的内存资源，你会以不同的方式实现它。我想这对你的水平来说是一个更高级的练习。

顺便说一句，它“一直打印 0”是随机的，因为您应该得到的行为实际上是未定义的，因为`x.n`（`sum.n`此外）是您正在读取的未初始化变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:07:45.657

在您的矩阵构造函数中，`n = n`将参数分配给自身。你可能的意思是`this->n = n;`。但是，最好使用成员初始化器列表：

```
matrix(int b[100][100], int n) : n(n)
{
  for(int i=0; i<n; i++) {
    for(int l=0; l<n; l++) {
        a[i][l]=b[i][l];
    }
  }
} 
```

而你的`operator +`没有设置`sum.n`。

**更新**

`matrix_input()`也不修改矩阵的`n`成员。换句话说，您的类不维护自己的不变量。`x.n`在里面查询`operator +`是没有意义的。

您应该进行修改`matrix`，使其成员`n`始终有效并反映矩阵中的内容。然后，您可以`n`从中删除参数`matrix_print()`。

顺便说一句，你为什么叫你的成员函数`matrix_something`？它们已经在`matrix`. 只是`input`，`print`会很好。

# python - 从数据库中一一获取结果

> ID：15948294
> 
> 赞同：1
> 
> 时间：2013-04-11T12:02:49.670
> 
> 标签：python, database, sqlalchemy

我正在编写从数据库（单表）查询结果的小程序。我正在使用 python 3.3、sqlalchemy 和 postgres 数据库。

```
result = db_session.query(Data).all()
progress = 0
for row in result:
    update_progress_bar(progress, len(result))
    do_something_with_data(row)
    progress += 1 
```

变量“结果”将包含几千行，数据处理需要一些时间。这就是为什么我引入了简单的进度条来说明需要多长时间。问题是，总时间的 30% 用于查询数据库（第一行）。所以当我开始程序时，我的进度条开始移动之前会有很大的延迟。此外，我不需要将所有结果都保存在内存中。我可以分别处理它们。

有什么方法可以修改上面的程序以逐一获取行，直到收到所有行，而不将所有内容加载到内存中？另外我想监控查询和处理数据的进度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:08:41.643

您只需在*不*调用的情况下循环查询`.all()`，*然后*调用[`.yield_per()`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.yield_per)以设置批处理大小：

```
for row in db_session.query(Data).yield_per(10):
    do_something_with_data(row) 
```

`.all()`*确实首先*将整个结果集转换为列表，如果结果集很大，则会导致延迟。*如果数据库 API 支持，则*在设置后直接迭代查询，`.yield_per()`而是根据需要获取结果。

 *如果您想预先知道将返回多少行，`.count()`请先调用：

```
result = db_session.query(Data)
count = result.count()

for row in result.yield_per(10):
    update_progress_bar(progress, count)
    do_something_with_data(row)
    progress += 1 
```

`.count()`要求*数据库*首先给我们一个项目计数。

即使使用. *_* `.yield_per()`在这种情况下，您需要使用[窗口查询根据](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/WindowedRangeQuery)*其中一*列中的值范围将查询分解为块。这是否有效取决于您的确切表格布局。*

# android - 在android中运行应用程序时如何确定GPS被解锁？

> ID：15948300
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:09.843
> 
> 标签：android, gps, locking, unlock

我需要检查 GPS 是否已锁定在我的应用程序中。我可以检查手机中是否启用了 GP。但是一旦 GPS 被锁定，在运行应用程序时，它就会被解锁，我注意到手机的 GPS 图标在闪烁。我需要在我的应用程序中显示类似于手机的动画，以确认用户 GPS 已解锁。任何知道解决方案的人请发布它。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:18:50.683

这就是我使用的。当你开始你的动画，`requestLocationUpdates`当你接到电话时结束它`onLocationChanged`。请参阅下面的代码，它应该可以解决您的问题。

```
public class YourLocationClass implements LocationListener {
    private LocationManager lm;

    public void getLocation(Context ctx) {
        lm = (LocationManager)  ctx.getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 15000, 25, this);

        //START YOUR ANIMATION
    }

    public void onLocationChanged(Location location) {
        //HERE YOU STOP YOUR ANIMATION AND GET NEW LOCATION
    }

    public void onProviderDisabled(String provider) {
        // DO SOME STUFF

    }

    public void onProviderEnabled(String provider) {
        // DO SOME STUFF

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // DO SOME STUFF
    }

} 
```

# java - GWT 注入：需要良好的实践

> ID：15948301
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:10.807
> 
> 标签：java, gwt, gwt-gin

我经常需要客户端包和演示者和视图中的一些 i18n-ed 消息。

我想知道获得它们的最佳方法是：注入还是单例？

**解决方案 1：**到目前为止，我曾经使用 Singleton 获取消息：

```
public interface MyMessages extends Messages{

  String key1();
  String key2();
  ...

  class Instance {
    private static MyMessages instance = null;

    public static MyMessages getInstance() {
      if (instance == null) {
       instance = GWT.create(MyMessages.class);
      }
      return instance;
    }
  }
} 
```

FooView.java：

```
MyMessages.Instance.getInstance().key1(); 
```

**解决方案2：**像这样注射会更好吗？

```
private MyMessages i18n;    

@Inject
public FooView(MyMessages i18n){
  this.i18n=i18n;    
} 
```

第二种解决方案对我来说似乎更干净，但是当我需要一个使用一些 i18n 字符串的非空构造函数时，我有时会卡住：

```
@Inject
private MyMessages i18n;

public Bar(Foo foo){
  /*
   * do something which absolutely requires i18n here.
   * The problem is that injectable attributes are called
   * after the constructor so i18n is null here.
   */
  foobar();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:54:18.930

首先，客户端包和 I18N 消息虽然本身不​​是单例，但与所有实例共享它们的状态，因此一旦编译为 JavaScript 并由编译器优化，就好像它们是单例一样。有一些极端情况（IIRC，当使用`WithLookup`I18N 接口的变体时），但一般来说，它不会给你任何明确地将它们视为单例的东西。

所以问题基本上变成了是`GWT.create()`显式使用还是注入实例。我会说这是一个品味问题，但从技术上讲，非单元测试`GWT.create()`也不能很好地发挥作用。`GWTTestCase`

最后，至于您的最新问题，我认为“非空构造函数”是指它采用非依赖项的值（即值对象）；在这种情况下，您可能应该使用辅助注入而不是自己构建对象然后注入其成员（顺便说一句：那么您如何注入成员？）

# java - 桌面 Java 编程书籍

> ID：15948310
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:28.113
> 
> 标签：java

我有一些如何编写 Java Server Faces 应用程序的知识，但现在我需要学习使用 Java 的桌面应用程序。请给我推荐一些专门用于桌面编程的书籍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:08:10.487

这个可以帮助你我发现它很有用

[开始 Java SE 6 平台：从新手到专业人士](http://books.google.co.uk/books?id=emcgAeq_oXgC&pg=PA80&dq=java%20desktop%20applications&hl=en&sa=X&ei=WqdmUcPGNuKL0AW9woGICQ&ved=0CFUQ6AEwBA#v=onepage&q=java%20desktop%20applications&f=false)

# kendo-ui - 剑道面板中的前两项

> ID：15948312
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:33.283
> 
> 标签：kendo-ui

我需要在 Kendo PanelBar 中找到前两个标签来添加一个 css 类。谁能建议如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:09:30.643

你说的标签是什么意思？标头？如果是这种情况，您可以使用以下代码：

```
$(".k-panelbar li > .k-header:lt(2)").addClass("my-class"); 
```

# mysql - 如果行不存在于一个以上的表中，则插入行

> ID：15948316
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:45.133
> 
> 标签：mysql, sql, insert

我有两张表：
一张用于活动用户，另一张用于非活动用户。两者都有用户的全名和他的电子邮件地址。我希望只有在两个表中都不存在新用户（例如他的电子邮件地址）时才能插入新用户。如果他存在于非活动表中，我将通过将用户从非活动表移动到活动表来重新激活他。

有没有办法通过尝试插入某种查询并在他存在时捕获异常，而不是通过在插入之前检查用户是否存在来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:26:16.673

仅仅因为你的数据很大并不意味着你应该把它一分为二，这会让你很头疼。您不仅会在 CRUD 操作中遇到麻烦，而且在将表链接到其他表时也会遇到麻烦。您绝对应该有一个表和一个布尔字段来指示用户是活动的还是非活动的。

为了依次处理大数据和查询的速度，您可以采取其他操作，例如[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-list.html)。

Ps：您正在尝试做的是以某种方式重新发明分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:11:02.303

通过捕获异常来实现条件逻辑是一种低效的设计。您最好先检查一下电子邮件地址是否存在于任一表中：

```
IF EXISTS (SELECT 1 FROM InactiveUsers WHERE Email = @new_email)
    BEGIN
    INSERT INTO ActiveUsers ...
    DELETE FROM InactiveUsers ...
    END
IF NOT EXISTS (SELECT 1 FROM ActiveUsers WHERE Email = @new_email)
    INSERT INTO ActiveUsers... 
```

# sql - 相关子查询和内联视图执行的区别？

> ID：15948319
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:49.673
> 
> 标签：sql

同时比较相关子查询和内联视图。哪个执行得更快？在考虑 SQL 执行性能的同时，任何人都可以解释哪个是最好的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:23:21.530

浏览速度更快。他们的查询是“预先优化的”，它可以缓存您的结果。这将使 DBMS（在大多数情况下）从缓冲区中提取结果，而不是访问硬盘来运行查询。如果您索引视图，您将看到更大的性能提升。

干杯。

# mysql - 选择表正在关闭我的 MySQL 服务器（错误 2013）

> ID：15948321
> 
> 赞同：1
> 
> 时间：2013-04-11T12:03:51.877
> 
> 标签：mysql, database, wamp

在我的 Moodle 数据库中，每次我选择 mdl_certificate 表时，MySQL 服务器都会关闭。我认为这可能是 PHPMyAdmin 的问题，但我安装了 MySQL Workbench 并且仍然发生同样的情况。

所以我尝试了控制台。问题仍然存在。我得到了两个打印件：

![使用其他表，一切正常。](https://i.stack.imgur.com/OZQJx.jpg)

![失去联系](https://i.stack.imgur.com/TAjNm.jpg)

我从来没有见过这个。我该如何解决？

谢谢！

更新：这是显示错误时的日志：

```
130411  8:51:20 [Note] Plugin 'FEDERATED' is disabled.
130411  8:51:20 InnoDB: The InnoDB memory heap is disabled
130411  8:51:20 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130411  8:51:20 InnoDB: Compressed tables use zlib 1.2.3
130411  8:51:20 InnoDB: Initializing buffer pool, size = 128.0M
130411  8:51:20 InnoDB: Completed initialization of buffer pool
130411  8:51:20 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130411  8:51:20  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
130411  8:51:20  InnoDB: Operating system error number 1392 in a file operation.
InnoDB: Some operating system error numbers are described at
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/operating-system-error-codes.html
InnoDB: File name .\prestashopprod
InnoDB: File operation call: 'readdir_next_file'.
InnoDB: Error: os_file_readdir_next_file() returned -1 in
InnoDB: directory .\prestashopprod
InnoDB: Crash recovery may have failed for some .ibd files!
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Last MySQL binlog file position 0 4793, file name .\mysql-bin.000062
130411  8:51:33  InnoDB: Waiting for the background threads to start
130411  8:51:34 InnoDB: 1.1.8 started; log sequence number 795429719
130411  8:51:34 [Note] Recovering after a crash using mysql-bin
130411  8:51:34 [Note] Starting crash recovery...
130411  8:51:34 [Note] Crash recovery finished.
130411  8:51:34 [Note] Event Scheduler: Loaded 0 events
130411  8:51:34 [Note] wampmysqld: ready for connections.
Version: '5.5.20-log'  socket: ''  port: 3306  MySQL Community Server (GPL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:18:09.413

解决方案是删除表并重新创建它们。幸运的是，它们是空的。

# jquery - Signalr 库存样本操作

> ID：15948322
> 
> 赞同：0
> 
> 时间：2013-04-11T12:03:53.020
> 
> 标签：jquery, asp.net-mvc, signalr, jquery-ui-tabs, single-page-application

我已经下载[了 SignalR Sample](https://nuget.org/packages/SignalR.Sample)并对其进行了测试。它就像一个魅力。出于测试目的，我使用单页模板创建了一个新的 mvc 4 应用程序，并在示例中添加了一个包含 StockTicker.html html 的部分视图。我将此部分视图动态加载为 jquery ui 选项卡的选项卡之一。我也添加了其他必需的文件。

当我调试应用程序时，我看到可以在 SignalR.StockTicker.js 文件中找到的以下脚本在视图加载之前工作。

```
$.connection.hub.start()
    .pipe(init)
    .pipe(function () {
        return ticker.server.getMarketState();
    })
    .done(function (state) {
        if (state === 'Open') {
            ticker.client.marketOpened();
        } else {
            ticker.client.marketClosed();
        }

        // Wire up the buttons
        $("#open").click(function () {
            ticker.server.openMarket();
        });

        $("#close").click(function () {
            ticker.server.closeMarket();
        });

        $("#reset").click(function () {
            ticker.server.reset();
        });
    }); 
```

所以函数 init 不能做它必须做的 dom 操作。

```
function init() {
    return ticker.server.getAllStocks().done(function (stocks) {
        $stockTableBody.empty();
        $stockTickerUl.empty();
        $.each(stocks, function () {
            var stock = formatStock(this);
            $stockTableBody.append(rowTemplate.supplant(stock));
            $stockTickerUl.append(liTemplate.supplant(stock));
        });
    });
} 
```

我必须做什么才能使我的代码正常工作？[在这里](https://dl.dropboxusercontent.com/u/12816287/SpaFirst.rar)你可以找到我的测试项目。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:23:48.037

您需要为此使用 jQuery UI Tabs 的[加载](http://api.jqueryui.com/tabs/#event-load)事件而不是文档就绪（因为在文档就绪触发*后，选项卡内容是异步加载的）。*像这样修改你的代码：

1.  在您的“外汇”选项卡中添加某种标识（例如`<li id="forex"><a href="/Forex">Forex</a></li>`）
2.  将您的“SignalR.StockTicker.js”内部更改`$(function(){//init code here})`为您可以自己调用的函数（我称之为`initStockTicker`）：

    ```
    $(function () {
        var ticker = $.connection.stockTicker, // the generated client-side hub proxy
        ...
    }); 
    ```

    =>

    ```
    function initStockTicker () {
        var ticker = $.connection.stockTicker, // the generated client-side hub proxy
        ...
    } 
    ```

3.  将`load`处理程序添加到选项卡初始化：

    ```
    $("#marketWatchTabs").tabs({
        load: function (event, ui) {
            if (ui.tab.is("#forex")) {
                initStockTicker();
            }
        }
    }); 
    ```

# sql - 从 PostgreSQL 中的 unix 时间中提取年份

> ID：15948326
> 
> 赞同：1
> 
> 时间：2013-04-11T12:04:18.637
> 
> 标签：sql, postgresql, date

我有一个日志表，这是它的描述：

```
user_id(bigint)
  time (bigint) 
```

我的问题是，如何从`time`PostgreSQL 的列中提取年份？

这适用于**MySQL**：

```
 SELECT l.user_id, year(from_unixtime(l.time)) 
 FROM log l; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:14:24.823

```
select date_part('year', to_timestamp(1365682413)); 
```

[to_timestamp](http://www.postgresql.org/docs/8.1/static/functions-formatting.html)是我们这里的朋友，至少从 8.1 版开始，它就已经花费了 unix 时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:10:39.803

```
select extract(year from timestamp 'epoch' + "time" * interval '1 second')
from log; 
```

# c# - C#在按钮单击时执行另一个程序

> ID：15948328
> 
> 赞同：5
> 
> 时间：2013-04-11T12:04:35.813
> 
> 标签：c#

我有一个 C# Windows 窗体应用程序。我想通过单击按钮执行位于同一目录中的另一个程序。我只需要这段代码来执行另一个程序。

我有以下代码：

```
 using System.Diagnostics;

    private void buttonRunScript_Click(object sender, EventArgs e)
    {
        System.Diagnostics.ProcessStartInfo start = 
                                        new System.Diagnostics.ProcessStartInfo();
        start.FileName = @"C:\Scripts\XLXS-CSV.exe";
    } 
```

我怎样才能使它正常工作？它现在没有做任何事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T12:07:06.293

为什么你使用 ProcessStartInfo，你需要一个 Process

```
Process notePad = new Process();    
notePad.StartInfo.FileName   = "notepad.exe";
notePad.StartInfo.Arguments = "ProcessStart.cs"; // if you need some
notePad.Start(); 
```

这应该工作;）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T12:06:17.353

```
ProcessStartInfo start = new ProcessStartInfo();
start.FileName = @"C:\Scripts\XLXS-CSV.exe";
Process.Start(start); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T12:06:58.420

```
Process yourProcess = new Process();
yourProcess.StartInfo.FileName = @"C:\Scripts\XLXS-CSV.exe";

yourProcess.Start(); 
```

您错过了调用 Start 方法和使用 Process 类。:)

# symfony - 覆盖属性并使其在 Doctrine Translatable / Symfony2 中可翻译

> ID：15948330
> 
> 赞同：2
> 
> 时间：2013-04-11T12:04:40.847
> 
> 标签：symfony, doctrine-extensions

我有一个映射超类，其字符串属性“名称”属于一个包（实际上是 SyliusAssortmentBundle）。我的包中有一个继承自该映射超类的类。我想通过使用 DoctrineExtensions (Translatable) 为我的实体添加可翻译功能。由于我无法在我的映射中重新声明属性“名称”，因此我正在尝试按照此原则文档覆盖该属性的映射：

[http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#attribute-override](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#attribute-override)

受此启发，我将其添加到我的 product.orm.xml 文件中

```
 <attribute-overrides>
        <attribute-override name="name">
            <field name="name" column="name" type="string">
                <gedmo:translatable/>
            </field>
        </attribute-override>
    </attribute-overrides> 
```

这似乎不起作用。我已向我的实体添加了一个虚拟属性 (trans_name)，因此我确信可翻译扩展正在工作。

```
 <field name="trans_name" type="string">
        <gedmo:translatable/>
    </field> 
```

在坚持以下内容后：

```
$e->setTranslatableLocale('fr_fr');
$e->setName('name fr');
$e->setTransName('trans name fr'); 
```

只是“trans_name”已保存到“ext_translations”表中。

所以。是否可以覆盖映射并添加可翻译？如果是这样。我究竟做错了什么？...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T11:59:04.993

据我所知`@AttributeOverrides`，`@AssociationOverrides`引入 , 等注释是为了覆盖 Doctrine 的字段和关联。`@Gedmo\Translatable`不支持覆盖其他注释（如）。

作为替代方案，您可以将映射复制/粘贴到您自己的包中，添加您需要的额外映射（如`@Gedmo\Translatable`）并加载这些映射而不是 SyliusAssortmentBundle 中的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T17:48:57.763

假设问题在几年前解决了，但我刚刚创建了拉取请求，`gedmo/doctrine-extensions`因为遇到了同样的问题：[https ://github.com/Atlantic18/DoctrineExtensions/pull/1631](https://github.com/Atlantic18/DoctrineExtensions/pull/1631)

# vb.net - 如何打开 .db 悖论文件

> ID：15948333
> 
> 赞同：4
> 
> 时间：2013-04-11T12:04:45.613
> 
> 标签：vb.net, paradox

我想查看 test.db 文件，我搜索它的编辑器但没有得到任何人所以请帮助在编辑器中查看它，就像 sql server 一样。

我找到了一些 sqlite 编辑器，但它不是大多数论坛上的 sqlite 文件，它说它是一个矛盾的 .db 文件。

那我怎么打开

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:48:46.213

要访问 .NET 中的 Paradox 表，您可以使用 ODBC。这是一个小例子（在 C# 中）：

```
private static void RunMinimumParadoxTest()
{
    const string ConnectionStringFormat =
        "Driver={{Microsoft Paradox Driver (*.db )}};Uid={0};UserCommitSync=Yes;Threads=3;SafeTransactions=0;" +
        "ParadoxUserName={0};ParadoxNetStyle=4.x;ParadoxNetPath={1};PageTimeout=5;MaxScanRows=8;" +
        "MaxBufferSize=65535;DriverID=538;Fil=Paradox 7.X;DefaultDir={2};Dbq={2};CollatingSequence={3}";

    DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.Odbc");
    using (DbConnection connection = factory.CreateConnection())
    {
        string userName = "Tor";
        string paradoxNetPath = @"C:\BdeNet";
        string databasePath = @"C:\LangloMainSrv\LData\Ordre\LordWin\Database2011";
        string collatingSequence = "Norwegian-Danish";
        connection.ConnectionString = 
            String.Format(ConnectionStringFormat, userName, paradoxNetPath, databasePath, collatingSequence);
        connection.Open();
        using (DbCommand command = connection.CreateCommand())
        {
            command.CommandText = "select Count(*) from [OrdreDet] where [Ordrenr] = 81699002";
            object itemCount = command.ExecuteScalar();
            Console.WriteLine("Order items: {0}", itemCount);
            Console.ReadKey();
        }
    }
} 
```

另请参阅以下链接了解更多详细信息：http: [//msdn.microsoft.com/en-us/library/ms710922](http://msdn.microsoft.com/en-us/library/ms710922(VS.85).aspx) (VS.85).aspx 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:08:02.487

Paradox db 文件只包含一个平面表。DB 文件的实际结构随着时间和不同版本的变化而变化。但是您通常可以使用 MS Excel 打开 DB 文件——当然，不同的版本也不同。

如上所述，其他数据库应用程序，包括 Paradox for Dos 和 Paradox for Windows，也将打开文件和其他功能。例如，密钥在具有相同表名的 PX 文件中。

所有这些都假设该表没有密码保护，应用程序数据库可能是密码保护 - 或者您知道密码。请注意，如果您收到与此相关的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-01T04:12:56.300

您可以使用 gnumeric 电子表格、paradox-db-reader 或 BB 数据库桌面来读取 db paradox 文件。BB 数据库 dekstop 也可以读取 XG0 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T09:32:33.300

您可以使用 Borland C++Builder 附带的 Database Desktop 打开和查看 Paradox 数据库文件。一个免费的替代品是[BB 的 Database Desktop](http://sourceforge.net/projects/bbdbd/)。该软件可能需要管理员权限才能正确运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T10:03:58.533

BB 的数据库桌面现在称为 JEDI 数据库桌面，但项目已关闭，无法编辑我的表。我不得不使用一些技巧：在 MS Excel 2007 中打开 *.db 文件，编辑它，导出到 *.csv，关闭文件，然后在 Paradox Data Editor 3.2.0 中打开 *.db 文件，清除所有表数据并预先导入保存的 csv 文件。它可以工作（不知道为什么，但这个应用程序无法在我的文件本身中插入行）！

# asp.net - 在下拉列表中使用增量运算符

> ID：15948334
> 
> 赞同：0
> 
> 时间：2013-04-11T12:04:46.810
> 
> 标签：asp.net, drop-down-menu

`MonthDropDownList`我有一个名为由 sql 数据源限定的月份组成的下拉列表。现在我想访问`MonthDropDownList`like的值

```
MonthDropDownList.selecteditem++. 
```

所以

```
if MonthDropDownList.selecteditem=January 
    then MonthDropDownList.selecteditem++=Febraury 
```

我怎么能做到这一点？？？

这是我的代码

```
DataClassesDataContext db = null;
    db = new DataClassesDataContext();
    tblAdvance advance = new tblAdvance();
    advance.StudentID = Convert.ToInt32(StudentNameDropDownList.SelectedValue);
    advance.FromMonth = FromMonthDropDownList.SelectedItem.Value;
    advance.UptoMonth = ToMonthDropDownList.SelectedItem.Value;
    advance.AdvanceAmount = Convert.ToInt32(txtAdvanceAmount.Text);
    advance.RollNo = Convert.ToInt32(txtRollNo.Text);
    db.tblAdvances.InsertOnSubmit(advance);
    db.SubmitChanges();
    db.Connection.Close();
    db.Dispose();
    for (int i = FromMonthDropDownList.SelectedIndex; i <= ToMonthDropDownList.SelectedIndex;i++ )
    {
     DataClassesDataContext dc = null;
     dc = new DataClassesDataContext();
     tblTotalFee bill = new tblTotalFee();
     bill.StudentID = Convert.ToInt32(StudentNameDropDownList.SelectedValue); 
```

> bill.MonthName=FromMonthDropDownList.SelectedIndex[i]

```
 bill.DueFromPreviousMonth = 0;
        bill.ECAFee = 0;
        bill.HostelFee = 0;
        bill.LateFeeCharges = 0;
        bill.MonthlyFee = 0;
        bill.TransportFee = 0;
        bill.TotalFeeThisMonthAlongwithDueinthismonth=0;
        dc.tblTotalFees.InsertOnSubmit(bill);
        dc.SubmitChanges();
I want something like the blockquoted line
        dc.Connection.Close();
        dc.Dispose();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:59:18.450

我用这段代码弄清楚了。这很简单，但可能我觉得问题太复杂了......

```
 DataClassesDataContext db = null;
    db = new DataClassesDataContext();
    tblAdvance advance = new tblAdvance();
    advance.StudentID = Convert.ToInt32(StudentNameDropDownList.SelectedValue);
    advance.FromMonth = FromMonthDropDownList.SelectedItem.Value;
    advance.UptoMonth = ToMonthDropDownList.SelectedItem.Value;
    advance.AdvanceAmount = Convert.ToInt32(txtAdvanceAmount.Text);
    advance.RollNo = Convert.ToInt32(txtRollNo.Text);
    db.tblAdvances.InsertOnSubmit(advance);
    db.SubmitChanges();
    db.Connection.Close();
    db.Dispose();
    int k = FromMonthDropDownList.SelectedIndex;
    int l = ToMonthDropDownList.SelectedIndex;
    for (int i = k; i <= l;i++ )
    {
        DataClassesDataContext dc = null;
        dc = new DataClassesDataContext();
        tblTotalFee bill = new tblTotalFee();
        bill.StudentID = Convert.ToInt32(StudentNameDropDownList.SelectedValue);
        bill.MonthName = FromMonthDropDownList.SelectedItem.Value;
        bill.DueFromPreviousMonth = 0;
        bill.ECAFee = 0;
        bill.HostelFee = 0;
        bill.LateFeeCharges = 0;
        bill.MonthlyFee = 0;
        bill.TransportFee = 0;
        bill.TotalFeeThisMonthAlongwithDueinthismonth=0;
        FromMonthDropDownList.SelectedIndex++;
        dc.tblTotalFees.InsertOnSubmit(bill);
        dc.SubmitChanges();
        dc.Connection.Close();
        dc.Dispose();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:06:26.587

创建一个月份数组，
使用它的索引来添加月份

```
string[] months = new string[] {"January", "February", "March", "April", "May",
         "June", "July", "August", "September", "October", "November", "December"}; 
```

假设你有一个`dropdownlist`id`dd1`和你有的值`0,1,2,......`

如果你需要找到`February`并且你有价值`1`，那么你可以这样做

```
int current month=1;
string nextmonth=months[current+1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:08:51.580

好的，所以如果您有两个下拉列表作为上限和下限运行几个月，那么您的 SelectedValue++ 函数将如下所示（VB.NET）：

```
Public Function GetNextMonth(ByVal dd1 as DropDownList, Byval dd2 as DropDownList) as String
     If dd1.Items(dd1.SelectedIndex + 1).SelectedValue >= dd2.SelectedValue then
            Return dd2.SelectedItem.Text
     else
            Return dd1.Items(dd1.SelectedIndex + 1).Text
     end if
End Sub 
```

这将返回列表中的下个月，除非“下限”列表中的月份等于或大于“上限”列表中的月份，在这种情况下，它只会返回上限月份。

这是你的意思，还是你需要一些递归的东西？

# xml - 使用 XML 和 R 有效地获取具有特定名称的孩子的数量

> ID：15948339
> 
> 赞同：1
> 
> 时间：2013-04-11T12:05:13.223
> 
> 标签：xml, r, xpath, xml-parsing

使用 R 和包 XML 我正在解析巨大的 XML 文件。作为数据处理的一部分，我现在需要在一长串节点中，每个节点有多少特定名称的子节点（节点数可以超过 20.000）

我目前的做法是：

```
nChildrenWithName <- xpathSApply(doc, path="/path/to/node/*", namespaces=ns, xmlName) == 'NAME'
nChildren <- xpathSApply(doc, path="/path/to/node", namespaces=ns, fun=xmlSize)
nID <- sapply(split(nChildrenWithName, rep(seq(along=nChildren), nChildren)), sum) 
```

我可以得到它的矢量化。我仍然觉得这可以通过使用正确的 XPATH 表达式在单个调用中实现。不过，我对 XPATH 的了解有限，所以如果有人知道该怎么做，我将不胜感激……

最好的托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:58:11.210

如果我理解正确的问题，有一个 XML 像：

```
<path>
  <to>
    <node>
      <NAME>A</NAME>
      <NAME>B</NAME>
      <NAME>C</NAME>
    </node>
    <node>
      <NAME>X</NAME>
      <NAME>Y</NAME>
    </node>
  </to>
  <to>
    <node>
      <NAME>AA</NAME>
      <NAME>BB</NAME>
      <NAME>CC</NAME>
    </node>
  </to>
</path> 
```

并且需要的是`NAME`每个元素下的元素数量`node`- 在上面的示例中为 3、2、3。

这在 XPath 1.0 中是不可能的：表达式可以返回节点列表或单个值 - 但不能返回计算值列表。

使用 XPath 2.0，您可以编写：

```
for $node in /path/to/node return count($node/NAME) 
```

或者简单地说：

```
/path/to/node/count(NAME) 
```

[（你可以在这里](http://videlibri.sourceforge.net/cgi-bin/xidelcgi)测试它们）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:36:11.980

```
library(XML)
doc <- xmlTreeParse(
  system.file("exampleData", "mtcars.xml", package="XML"),
  useInternalNodes=TRUE      )
xpathApply(xmlRoot(doc),path="count(//variable)",xmlValue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-03T14:31:14.003

[考虑MiMo](https://stackoverflow.com/users/920539/mimo)提到的例子

```
<path>
  <to>
    <node>
      <NAME>A</NAME>
      <NAME>B</NAME>
      <NAME>C</NAME>
    </node>
    <node>
      <NAME>X</NAME>
      <NAME>Y</NAME>
    </node>
  </to>
  <to>
    <node>
      <NAME>AA</NAME>
      <NAME>BB</NAME>
      <NAME>CC</NAME>
    </node>
  </to>
</path> 
```

获取 /path/to/node 下的子节点数

```
library(XML)
doc = xmlParse("filename", useInternalNodes = TRUE)
rootNode = xmlRoot(doc)
childnodes = xpathSApply(rootNode[[1]][[1]], ".//NAME", xmlChildren)
length(childnodes)
[1] 3 
```

它会给你 3，类似地获取第二个节点下的子节点数，只需相应地传递索引，

```
childnodes = xpathSApply(rootNode[[1]][[2]], ".//NAME", xmlChildren)
length(childnodes)
[1] 2 
```

我希望它会帮助你。

# windows-store-apps - 带内笔画的形状

> ID：15948343
> 
> 赞同：4
> 
> 时间：2013-04-11T12:05:35.070
> 
> 标签：windows-store-apps, winrt-xaml

默认情况下，在 WPF/WinRT XAML 中将 a 添加`Stroke`到 a`Shape`会创建一个以边缘为中心的轮廓，这意味着轮廓的一半在形状之外。但是我需要创建一个有描边但没有填充的形状，它与有填充但没有描边的形状具有相同的轮廓。有没有一种简单的方法来改变笔画，使整个轮廓在里面？

我可以创建一个覆盖倒置形状的 OpacityMask，但 WinRT XAML 不支持 OpacityMask。我还可以通过向内多边形缓冲（[一种用于膨胀/放气（偏移、缓冲）多边形的算法）](https://stackoverflow.com/questions/1109536/an-algorithm-for-inflating-deflating-offsetting-buffering-polygons)创建一个更小的形状，但我希望有一个更简单的解决方案，例如将笔划更改为“内部”的简单属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T22:49:59.180

我一直在努力想出这个问题的答案。一遍又一遍，每一次尝试都有某种限制。恐怕答案是，你不能这样做——至少不能用动态向量。您始终可以创建图像来模拟它。但这很糟糕。

# asp.net-mvc - 向模型添加动态属性

> ID：15948347
> 
> 赞同：0
> 
> 时间：2013-04-11T12:05:44.680
> 
> 标签：asp.net-mvc, entity-framework, design-patterns

我无法解决这个问题并且还没有找到正确的搜索键：

我想有几个`categories`，`items`其中`items`都有特定的`attributes`. 那些`attributes`（文本字段、下拉菜单或复选框）应该添加到 a 中`category`，我想`attributes`为每个`item`.

我正在使用 MVC 4 和代码优先 EF5。我该如何实施？

我的第一种方法是几个类`Text`，例如，它们是从抽象类和这样的类`Dropdown`继承的：`Attribute``Category`

```
public class Category
{
    [Key]
    public int CategoryId { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Item> Items { get; set; }
    public virtual ICollection<Attribute> Attributes { get; set; } 
} 
```

但后来我不知道继续。我是在正确的道路上还是完全错误的？有人可以给我一些我可以搜索的提示吗？

**编辑**

最终，我正在尝试建立一个高保真设备列表。扬声器具有与放大器不同的属性，而扬声器具有与录音机不同的属性。我想统一查看每个设备的详细信息，并通过额外的免费文本区域为该类别预定义特定属性。Speaker XYZ is my `item`, Speaker my`category`和 dB an `attribute`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:53:54.553

好的，所以这个问题基本上是关于数据设计的。

首先，我假设规则是：

1.  一个项目有一个类别
2.  一个类别有很多属性
3.  一项具有与该类别相关的许多属性

对于规则 1，它在您的设计中已经足够好了。（简化示例）

```
public class Category{
  public IEnumerable<Item> Items{get;set;}
}
public class Item{
  public Category Category{get;set;}
} 
```

它足够清楚。

对于第 2 条规则，我认为您应该创建一个 CategoryAttribute 类。它持有一对多类别和属性之间的关系。基本上，CategoryAttribute 是主属性，而子属性是 ItemAttribute。

```
public class Category{
  public IEnumerable<CategoryAttribute> CategoryAttributes{get;set;}
}
public class CategoryAttribute{
  public Category Category{get;set;}
  public string CategoryName{get;set;}
  public string DefaultValue{get;set;} // maybe a default value for specific 
                                       // attribute, but it's up to you

  public IEnumerable<ItemAttribute> ItemAttributes{get;set;}
} 
```

这`IEnumerable<ItemAttribute>`是类别属性和项目属性之间的一对多关系。

对于规则 3，规则 2 中描述的 ItemAttribute 将表示每个项目拥有的属性。

```
public class Item{
  public IEnumerable<ItemAttribute> ItemAttributes{get;set;}
}
public class ItemAttribute{
  public Item Item {get;set;} // it owned by one attribute
  public CategoryAttribute{get;set;} // it owned by one category attribute
} 
```

我不太确定如何首先在代码中表示关系或主键和外键。希望如果需要（如果可以的话），我可以增强我的答案。但希望我对每个对象的关系和类设计的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:13:35.257

实际上，我从未使用过代码优先方法，但我可以让您了解如何处理这种情况......对我来说，它看起来`Item`是主要的，而不是`Category`. 所以你可以有这个结构......

```
public class Category
{
    [Key]
    public int CategoryId { get; set; }
    public string CategoryName { get; set; }
    public string CategoryDescription { get; set; }
    // use attributes here if you want them for Category
    //public Dictionary<string, string> ItemnAttributes { get; set; }
}

public class MyItem
{
    [Key]
    public int ItemId { get; set; }
    public string ItemName { get; set; }
    public string ItemDescription { get; set; }
    public Category ItemnCatagory { get; set; }
    public Dictionary<string, string> ItemnAttributes { get; set; }
} 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:22:49.387

我认为这样的事情可能对你有用......

```
public class Category
{
    public int CategoryId { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Item> Items { get; set; }
    public virtual ICollection<Attribute> Attributes { get; set; }
}

public class Item
{
    public int ItemId { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public int CategoryId { get; set; }
    public Category Category { get; set; }
    public virtual ICollection<ItemAttribute> ItemAttributes { get; set; }
}

public class Attribute
{
    public int AttributeId { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Category> Categories { get; set; }
    public virtual ICollection<ItemAttribute> ItemAttributes { get; set; }
}

public class ItemAttribute
{
    public int ItemId { get; set; }
    public int AttributeId { get; set; }

    public Item Item { get; set; }
    public Attribute Attribute { get; set; }

    public string Value { get; set; }
    public int ValueInt{ get; set; }
    // etc. 
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<ItemAttribute>()
        .HasKey(x => new { x.ItemId, x.AttributeId });
    modelBuilder.Entity<ItemAttribute>()
        .HasRequired(x => x.Item)
        .WithMany(x => x.ItemAttributes)
        .HasForeignKey(x => x.ItemId)
        .WillCascadeOnDelete(false);
    modelBuilder.Entity<ItemAttribute>()
        .HasRequired(x => x.Attribute)
        .WithMany(x => x.ItemAttributes)
        .HasForeignKey(x => x.AttributeId)
        .WillCascadeOnDelete(false);
    // AttributeCategories is created for you - but you can do the same as ^ above to customize
    // just change 'ICollection<Category> Categories' to collection of 'ItemAttribute'
}

// use it like e.g.
var item = new Item { Name = "ItemTest", };
var attribute = new Attribute { Name = "attributeTest", };
item.ItemAttributes = new List<ItemAttribute> 
{
    new ItemAttribute { Item = item, Attribute = attribute, Value = "test", },
};
var category = new Category
{
    Name = "cat1",
    Items = new[]
    {
        item,
        new Item{ Name = "Item1", },
        new Item{ Name = "Item2", },
        new Item{ Name = "Item3", },
        new Item{ Name = "Item4", },
        new Item{ Name = "Item5", },
    },
    Attributes = new[]
    {
        attribute,
        new Attribute{ Name = "att1", },
        new Attribute{ Name = "att2", },
    }
};
db.Categories.Add(category);
db.SaveChanges();
var categories = db.Categories.ToList(); 
```

`ItemAttribute`用于连接和存储`values`。

您将需要根据您的要求进一步调整。

# java - 如何在 Java 客户端中启用 GOST 密码

> ID：15948348
> 
> 赞同：0
> 
> 时间：2013-04-11T12:05:50.350
> 
> 标签：java, ssl, network-security, gost3410, gost28147

我想在我的客户端密码列表中使用 GOST 密码时使用 Java 客户端与某些 Web 服务器建立 SSL 连接。我尝试使用以下方法检查 Java 中启用和支持的密码套件：`getEnabledCipherSuites()`并且`getSupportedCipherSuites()`没有返回 GOST 密码。如何使用 GOST 密码从我的 Java 客户端到 Web 服务器建立 SSL 连接？有什么方法可以指定我客户的密码列表以包含 GOST 密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:14:55.570

试试 BouncyCastle SSL 库，据我所知，它们支持 GOST 密码。

# ruby-on-rails - youtube 嵌入链接未显示在 Rails 视图中

> ID：15948349
> 
> 赞同：1
> 
> 时间：2013-04-11T12:05:56.100
> 
> 标签：ruby-on-rails, ruby, youtube, embed

我试图显示链接的 youtube 嵌入式 iframe（用户将输入并保存在表单中）

嵌入的视频不显示。我得到的只是空白。

这是我的代码

```
<iframe width="560" height="315" src= "<%= video.link %>" frameborder="1" allowfullscreen></iframe> 
```

我已经检查了源代码

截图在这里[http://screencast.com/t/gmQAiFHEj](http://screencast.com/t/gmQAiFHEj)

在源代码中，您可以看到它显示 youtube 视频的 URL，但我怎样才能让它呈现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T12:12:04.400

您使用的 YouTube 网址不是正确的嵌入网址。

*   **错误：** [http ://www.youtube.com/watch?v=VKvlBCfi_v8](http://www.youtube.com/watch?v=VKvlBCfi_v8)
*   **右：** [http ://www.youtube.com/embed/VKvlBCfi_v8](http://www.youtube.com/embed/VKvlBCfi_v8)

当使用 YouTube 页面的直接 URL 时，YouTube 会阻止直接嵌入请求。

请参阅下面显示差异的示例（上面的**Right** URL 工作正常）。

*   [http://fiddle.jshell.net/2RvGE/show/](http://fiddle.jshell.net/2RvGE/show/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:18:07.187

迪福是对的。我发布答案只是为了向您展示显示 youtube 视频的更好方法（这对您来说会更容易）

创建部分 _youtube.html.erb 并粘贴：

```
<iframe width="490" height="275" src="<%= url %>" frameborder="0" allowfullscreen></iframe> 
```

然后添加你的应用程序控制器：

```
module ApplicationHelper
  def youtube_video(url)
    render :partial => 'shared/youtube', :locals => { :url => url }
  end 
end 
```

然后在你看来调用：

```
<%= youtube_video @video.url %> 
```

但是，是的，尽量不要复制错误的链接，使用如下链接：

```
"http://www.youtube.com/embed/NWHfY_lvKIQ" 
```

# mysql - 大规模推荐人

> ID：15948351
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:00.783
> 
> 标签：mysql, real-time, recommendation-engine, collaborative-filtering, large-scale

我正在处理一个推荐问题，它涉及 300 万用户和 500,000 个产品。推荐的目的是在访问给定产品时向特定用户推荐 5-10 多个产品。

我们完成了实时推荐引擎部分，但我们发现1-2秒推荐并不那么容易。我们考虑两种策略：

1.  以批处理模式离线运行推荐，然后将结果存储在**MySQL** DB 中。但是，表中的条目数似乎是一个巨大的数字。每个产品的每个用户应至少存储 5-10 个推荐产品。如果我创建一个以用户和产品作为表属性的表，将有 300 万 x 500,000 个条目。

2.  即时预测推荐。我们刚试了一下，但是响应时间太长了。

谁能给我一些关于这个问题的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T14:26:09.793

为每个用户产品对创建推荐产品列表对我来说看起来很奇怪。通常，对于像您这样的用例，您只有每个产品的类似产品列表。

# iphone - 通过 CLLocation 获取用户的方向

> ID：15948352
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:01.097
> 
> 标签：iphone, ios, gps, location, angle

嗨，我正在开发 GPS ios 应用程序。

我想在 Circle 上显示用户的位置，如图所示。

用户处于中心位置。

我想在正确的方向上显示他朋友的位置。

我已经得到了两个用户的经度和纬度。

但是我怎样才能得到其他用户的方向呢？

如果我可以使用方位角？

![在此处输入图像描述](https://i.stack.imgur.com/XY7a3.png)

我通过这段代码得到了两次使用之间的距离

```
CLLocation *locA = [[CLLocation alloc] initWithLatitude:Latitude longitude:Longitude];
CLLocation *locB = [[CLLocation alloc] initWithLatitude:app.lat longitude:app.lag];
CLLocationDistance distance = [locB distanceFromLocation:locA]; 
```

感谢帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:21:56.987

您可以使用两种方法来做到这一点：
1。

```
CLLocationCoordinate2D start = { c_lat, c_long };
CLLocationCoordinate2D destination = { [[dic valueForKey:@"business_lat"]doubleValue], [[dic valueForKey:@"business_long"]doubleValue] };

NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f&",start.latitude, start.longitude, destination.latitude, destination.longitude];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]]; 
```

2.

使用谷歌[API](http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false&avoid=highways&mode=bicycling)

在 API 中，您只需要传递来源名称和目的地名称

希望这有帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:25:05.910

这个[问题](https://stackoverflow.com/questions/3925942/cllocation-category-for-calculating-bearing-w-haversine-function)描述了如何使用 hasrsine 函数计算方位角

# javascript - jQuery（移动）未在 Phonegap 应用程序上触发 .change 事件

> ID：15948353
> 
> 赞同：3
> 
> 时间：2013-04-11T12:06:01.900
> 
> 标签：javascript, cordova, jquery-mobile, jquery

（因为 2 天我对此没有任何问题......）

我有一个多页布局，在我的一个页面中，我的结构如下：

```
<div id="view_offer" data-role="page">
        <div data-role="header">
            <h1>Edit Offer</h1>
        </div>
        <div data-role="content">
            <p><label><input id="auto_renew" type="checkbox" name="checkbox-0">Auto renew?</label></p>
        </div>
    </div> 
```

在我关闭 body 标签之前使用以下脚本（按此顺序）：

```
 <script src="js/cordova-2.5.0.js"></script>
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.3.0.min.js"></script>
    <script src="js/home_m_scripts.js"></script> 
```

我的**home_m_scripts.js**文件：

```
$("#auto_renew").change(function(){
    alert("Changed!");
}); 
```

我的更改事件没有触发，我在这里不知所措。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T12:17:20.487

更改您的代码：

```
$("#auto_renew").change(function(){
    alert("Changed!");
}); 
```

至：

```
$(document).on('change','#auto_renew',function(){ 
    alert("Changed!"); 
}); 
```

当您绑定这样的事件时，它将充当事件委托。执行此绑定时，基本上对象不需要存在于 DOM 中。

# python - 如果 'dialog-bmp' 是 'dialog-bmp'，Python 返回 false

> ID：15948354
> 
> 赞同：1
> 
> 时间：2013-04-11T12:06:06.437
> 
> 标签：python, python-2.7

在这里学习的机会。我有一种情况，我正在更新文件中的某些属性。我有一个更新文件的功能：

```
def update_tiapp(property, value):
  print 'update_tiapp: updating "%s" to "%s"' % (property, value)
  for line in fileinput.input(os.path.join(app_dir, 'tiapp.xml')):  # , inplace=True
    if property is 'version':
      line = re.sub(r'(<version>).*?(</version>)', '\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE)
    elif property is 'brand':
      line = re.sub(r'(<property name="brand" type="string">).*?(</property>)', '\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE)'\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE)
    elif property is 'banner-bmp':
      line = re.sub(r'(<banner-bmp>).*?(</banner-bmp>)', '\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE)
    elif property is 'dialog-bmp':
      line = re.sub(r'(<dialog-bmp>).*?(</dialog-bmp>)', '\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE)
    elif property is 'url':
      line = re.sub(r'(<url>).*?(</url>)', '\g<1>%s\g<2>' % value, line.strip(), flags=re.IGNORECASE) 
```

除了`dialog-bmp`& ，所有条件都很好`banner-bmp`。由于某种我无法理解或找到的原因，条件不匹配。如果我将属性和条件更改为`dialog`，python 很乐意匹配并为我进行更改。

哇？！

这是一个简单的改变，我不介意做，但我想理解。

把一切都搞砸的连字符是什么？我们不是只是在这里进行字符串匹配，还是在引擎盖下发生了我没想到的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:07:37.387

永远不要使用`is`检查相等性（它检查对象身份）！改用`==`：

```
if property == "version":
    ...
elif property == "brand":
    ...
etc. 
```

`is`可能适用于被实习/缓存的短字符串，但前提是它们只包含对 Python 标识符（“变量名”）有效的字符。您的程序就是一个很好的例子：

```
>>> a = "dialog-bmp"
>>> b = "dialog-bmp"
>>> a is b
False
>>> id(a)
32571184L
>>> id(b)
32571088L
>>> a = "brand"
>>> b = "brand"
>>> a is b
True
>>> id(a)
32610664L
>>> id(b)
32610664L 
```

# python - Circus：运行一次进程？

> ID：15948358
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:16.783
> 
> 标签：python, circusd

我`circus`用来管理许多松散耦合的流程；一个需要运行一次的主进程，然后是一些稍后启动的辅助进程。次要进程需要重新启动，直到工作完成，但主要进程只能执行一次。似乎一旦该过程完成，尽管有各种设置，它都会重新运行。我尝试设置`max_retry`为：

*   `-1`, 没有效果，不断地重新运行进程
*   `0`，它根本不运行该过程
*   `1`，这也没有效果并不断重新运行该过程

**有什么方法可以在第一次运行后安全成功地结束主进程？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:17:01.390

找到它：它不在`config`文档的部分中，但您可以在配置中设置`respawn`，`False`如果/当进程终止时，它将不会重新启动。`circus.watcher.Watcher`在文档的方法签名中找到`Circus Library`。

# android-actionbar - ActionBarSherlock 中的操作栏主页图标

> ID：15948364
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:24.373
> 
> 标签：android-actionbar, actionbarsherlock

我正在处理 ABS 的 Styled 项目。我想自定义操作栏中的主页图标。但是，我所做的任何事情似乎都没有任何效果。我尝试在 Manifest、样式和 MainActivity 中设置徽标。有人遇到过这个吗？

谢谢你，伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:11:08.397

这在[另一个帖子中得到了回答](https://stackoverflow.com/questions/7953807/custom-home-icon-in-action-bar-sherlock)

显然你必须`getSupportActionBar().setIcon(R.drawable.my_custom_drawable);`在 MainActivity 中做。我明白了，但是不能在Manifest中设置它很麻烦......

# c# - 如何处理 linq 中的空值？

> ID：15948369
> 
> 赞同：8
> 
> 时间：2013-04-11T12:06:29.567
> 
> 标签：c#, linq, select, null, dynamic-list

```
recordsList.ListOfRecords = new StudentRecordsBAL()
                                .GetStudentsList()
                                .Select(q => new StudentRecords()
            {
                _RollNumber = q._RollNumber,
                _Class = q._Class,
                _Name = q._Name,
                _Address = q._Address,
                _City = q._City,
                _State = q._State,
                _Subjects = q._Subject,
                _AttendedDays = new AttendanceBAL()
                                    .GetAttendanceListOf(q._RollNumber)
                                    .Where(date => date != null)
                                    .Select(date => 
                                        new DateTime(date._Date.Year, date._Date.Month, date._Date.Day))
                                    .Distinct()
                                    .ToList(),
                _AttendedSubjects = GetAttendedSubjects(q._RollNumber)                                            
        }).ToList(); 
```

上面代码中的方法**`GetAttendanceListOf(q._RollNumber)`**将返回数据库中的记录列表，如果传递的“roll-no”没有记录，则返回“null”。一个 linq 查询将被终止生成错误

> “值不能为空”。

有没有办法处理这个错误并使 LINQ 跳转到下一步？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T12:12:21.047

```
_AttendedDays = new AttendanceBAL()
    .GetAttendanceListOf(q._RollNumber)
    .Where(date => date != null)
    .Select(date => new DateTime(date._Date.Year, date._Date.Month, date._Date.Day))
    .Distinct()
    .ToList(), 
```

问题在于`Where()`在空实例上运行。可能的解决方案：

1）如果没有出席，修改`GetAttendanceListOf`为返回一个空列表（一般来说是个好主意，因为[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)通常是救命稻草，对于集合，空集合通常在语义上类似于空）
2）如果你不控制该方法，编写一个安全的扩展方法，它会在 null 的情况下返回空列表，例如

```
List<AttendanceType> SafeAttendanceList(this AttendanceBALType bal, RollNumber rn)
{
    return bal.GetAttendanceListOf(rn) ?? new List<AttendanceType>();
} 
```

然后将其称为：

```
_AttendedDays = new AttendanceBAL()
    .SafeAttendanceListOf(q._RollNumber)
    .Where(date => date != null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:13:02.357

如果没有结果，Linq ToList() 将返回一个空列表。错误可能来自其他地方。

我建议您使用方法来创建对象，这将使您的查询更易于阅读和调试。我建议您分多个步骤来确定什么是空的，以及它在哪里执行失败。

错误可能来自 GetAttendanceListOf()，当有方法返回 IList 或 IEnumerable 时，如果没有结果，您应该返回一个空列表，它会阻止您每次验证它是否为 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:14:45.137

你可以试试

```
recordsList.ListOfRecords = new StudentRecordsBAL().GetStudentsList().Select(q => 
            {
                var attendanceList = new AttendanceBAL().GetAttendanceListOf(q._RollNumber);
                if (attendanceList == null)
                    return null;
                return new StudentRecords()
                    {
                        _RollNumber = q._RollNumber,
                        _Class = q._Class,
                        _Name = q._Name,
                        _Address = q._Address,
                        _City = q._City,
                        _State = q._State,
                        _Subjects = q._Subject,
                        _AttendedDays = attendanceList.Where(date => date != null).Select(date => new DateTime(date._Date.Year, date._Date.Month, date._Date.Day)).Distinct().ToList(),
                        _AttendedSubjects = GetAttendedSubjects(q._RollNumber)
                    };
            }).Where(q => q != null).ToList(); 
```

这将检查您是否没有`Where`对空对象执行操作并过滤掉任何空结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:26:38.887

正如@Zdeslav Vojkovic 建议的那样`GetAttendanceListOf`，如果为空，则修改为返回空列表或执行以下操作：

```
_AttendedDays = (新的出勤率()
    .GetAttendanceListOf(q._RollNumber) ?? Enumerator.Empty<typeofrecord>())
    .Where(date => date != null)
    .Select(date => new DateTime(date._Date.Year, date._Date.Month, date._Date.Day))
    。清楚的（）
    .ToList(),

```

（你也许可以在没有额外括号的情况下做到这一点）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:33:03.250

为了快速修复，修改此行

> _AttendedDays = new AttendanceBAL().GetAttendanceListOf(q._RollNumber).Where...

对此

> _AttendedDays = (new AttendanceBAL().GetAttendanceListOf(q._RollNumber) **??new List()** ).Where...

# c++ - 如何使在 Visual C++ 2010 中开发的解决方案在 Visual C++ 2012 中工作？

> ID：15948371
> 
> 赞同：1
> 
> 时间：2013-04-11T12:06:32.980
> 
> 标签：c++, visual-c++, compiler-errors

如何使在 Visual C++ 2010 中开发的 .cpp 解决方案在 Visual C++ 2012 中工作，每次尝试构建时都会出现以下错误，

```
 1>DinaPhysics-vc10-md-32-d.lib(smPrinter.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smEventGeneratorTrait.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smIntegralType.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smTypes.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec3rBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec3r.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec2rBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec2r.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec3dBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec3d.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec4r.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVecTypes.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smMath.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smUtil.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec4rBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec2d.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec2dBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>DinaPhysics-vc10-md-32-d.lib(smVec4dBase.obj) : error LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in ShipDeckLandingExample.obj
1>..\..\..\Bin\VC10-32\Debug\ShipDeckLandingExample-vc10-md-32-d.exe : fatal error LNK1319: 18 mismatches detected 
```

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:10:57.417

如果“重建解决方案”不能修复它，则可能是静态链接到使用以前版本的 Visual Studio 创建的 .lib 并且也使用标准模板库。

在这里引用[MSDN](http://msdn.microsoft.com/en-us/library/bb531344.aspx)

> • 为了实现各种优化和调试检查，C++ 标准库实现有意破坏了 Visual Studio 版本（2005、2008、2010、2012）之间的二进制兼容性。使用 C++ 标准库时，禁止将使用不同版本编译的目标文件和静态库混合到一个二进制文件（EXE 或 DLL）中，并禁止使用 C++ 标准库编译的二进制文件之间传递 C++ 标准库对象。不同的版本。使用 Visual C++ 2010 编译的目标文件和静态库（使用 C++ 标准库）与使用 Visual Studio 2012 中的 Visual C++ 编译的目标文件和静态库（使用 C++ 标准库）混合会发出有关 _MSC_VER 不匹配的链接器错误，其中 _MSC_VER 是包含编译器的主要版本（Visual Studio 2012 中的 Visual C++ 为 1700）。

# list - 列表的 ::: 和 ++ 有什么区别？

> ID：15948375
> 
> 赞同：5
> 
> 时间：2013-04-11T12:06:37.433
> 
> 标签：list, scala, operators

给定两个列表`a`and ， and`b`有什么区别？我怀疑其中一个运算符会简单地调用另一个，但实际上，实现看起来完全不同：`a ::: b``a ++ b`

```
def :::[B >: A](prefix: List[B]): List[B] =
  if (isEmpty) prefix
  else if (prefix.isEmpty) this
  else (new ListBuffer[B] ++= prefix).prependToList(this)

override def ++[B >: A, That](that: GenTraversableOnce[B])
                      (implicit bf: CanBuildFrom[List[A], B, That]): That = {
  val b = bf(this)
  if (b.isInstanceOf[ListBuffer[_]])(this ::: that.seq.toList).asInstanceOf[That]
  else super.++(that)
} 
```

从使用的角度来看，我应该更喜欢`a ::: b`还是`a ++ b`？从实现的角度来看，这些运算符中的一个不简单地调用另一个是否有特定的原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T12:17:03.123

不同之处在于您只能`:::`在 2 个列表上使用 - 此操作仅适用于`List`数据类型。由于列表是序列，因此它充当列表的连接运算符。

该`++`方法更通用 - 它允许创建任意两个集合的联合。这可能是两个集合，在这种情况下，它充当联合，或者两个序列，在这种情况下，它充当连接。

`++`和`:::`for 2 个列表在语义上没有区别——`:::`是函数式列表的变体，`++`对于函数式程序员来说应该更熟悉。

`if`您在实现中看到的语句`++`是一种优化——如果`this`集合和`that`集合都是列表，只需使用列表连接运算符`:::`将两个列表相加即可。否则，使用`++`将所有元素`this`和`that`集合添加到 type 的适当构建器的通用实现`That`。

因此，列表的相关区别在于性能——对于功能列表，您不需要像通用`++`实现那样遍历第二个列表——只需要重新实例化第一个列表的节点以创建新的功能列表。

# php - MySQL 搜索包含空格的值返回空结果（无行）

> ID：15948377
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:49.793
> 
> 标签：php, mysql

我有一个`MySQL` **数据库**，其中有一列包含**零件编号**。一些部件号包含**空格**：

```
3864205010  J 
```

当我查询数据库或**搜索**`phpMyAdmin`未返回任何结果的部分时。

然而，当我`delete`输入**2 个空格**然后再次*键入*它们时，搜索会返回一个结果。

此查询不返回结果：

```
SELECT * 
FROM  `parts` 
WHERE  `part_no` LIKE  '3864205010  K' 
```

此查询返回结果：

```
SELECT * 
FROM  `parts` 
WHERE  `part_no` LIKE  '3864205010  K' 
```

它们看起来相同，但在第二个查询中，我删除了“K”之前的 2 个空格并再次输入了这些空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:42:33.130

如果您可以使用通配符代替空格：

```
SELECT * 
FROM  `parts` 
WHERE  `part_no` LIKE  '3864205010%K' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:37:30.967

是的，作为更新的问题，如果您希望删除更多的空间，内容之间可能是 3 或 4 个空格，下面的查询将对您使用完整

```
SELECT REPLACE( REPLACE( part_no, " ", " " ), " ", " " ) from parts. 
```

让我知道它是否适合你？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:11:30.093

这可能不是空格，而是 HTAB（ascii 代码 9）甚至是换行符/回车符（10 和 13）。在一个好的文本编辑器中复制粘贴，你会看到它的真正含义。

*现在，关于您想知道为什么即使它看起来像*一个空格它也不起作用，这是因为我们*看到*的每个字符都是由引擎解释的（记事本、phpmyadmin、firefox……任何带有文本渲染的软件）

实际发生的是，当引擎找到一个 ascii 代码时，它会将其转换为可见字符。例如，CHAR(9) 经常被转换成一个“大空间”，通常等于 2 或 4 个空格。但是 phpmyadmin 可能只是决定不那样做。

其他示例是换行符 (CHAR(10))。在文本编辑器中，这将是行结束的信号，并且（主要在 unix 系统下）必须开始新行。但是您可以将此换行符复制到数据库字段中，您只是不确定它将如何呈现。因为他们希望您看到单元格中的所有内容，他们可能会选择将其渲染为一个空格......但如果您查看它的 ascii 代码，那不是一个空格（这里没有技巧，所有渲染引擎都会告诉您正确的ASCII码）。

这对于始终使用其 ascii 代码处理字符很重要。

* * *

上面有一个答案建议使用通配符而不是空格。这可能匹配，也可能不匹配。假设您的字符串是 '386420K5010'，所以它不是您要查找的字符串，但 LIKE '3864205010%K' 模式仍然会返回它。最好的可能是使用正则表达式或至少识别这些字符串的固定模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:45:31.160

```
SELECT * 
FROM  `parts` 
WHERE  REPLACE(REPLACE(`part_no`, CHAR(9), ''),' ','') LIKE  REPLACE(REPLACE('3864205010  K', CHAR(9), ''),' ','') 
```

如果`part_no`和/或搜索字符串有制表符和/或空格，这可能会起作用。

# ruby-on-rails-3 - Rails 徽标在新表单上消失

> ID：15948378
> 
> 赞同：0
> 
> 时间：2013-04-11T12:06:55.347
> 
> 标签：ruby-on-rails-3, image, user-interface

我正在构建一个 Rails 应用程序，该应用程序在控制器中有一个带有新操作的表单。

我的 application.html.erb 中有一个基本的导航模板

```
<a class="brand" href="index.html">
<img src="assets/logo.png" height="30" alt="logo" /></a> 
```

当我单击呈现索引操作的操作时，徽标保持不变。但是，当我单击一个新操作时，徽标会消失。

知道为什么会这样吗？我在 Rails 上还可以，但我在设计/ui/ux 方面很糟糕。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:48:48.110

如果您使用的是 Sprockets，那么您的方式有点错误。您应该使用`image_tag`helper 来显示图像

```
<%= image_tag "logo.png", height: 30, alt: 'logo' %> 
```

它应该防止它消失，并且它应该始终为您的图像设置正确的路径（因为 sprockets 可以向该路径添加一些额外的数据（散列））。

# c++ - 什么决定了 C++ 程序中对象销毁的顺序？

> ID：15948381
> 
> 赞同：0
> 
> 时间：2013-04-11T12:07:00.637
> 
> 标签：c++, oop, object

C++程序是这样的：

```
class Foo
{ 
    // something here
};

int main ()
{
     Foo f_A;
     Foo f_B;
     Foo f_C;
     //do something here

     return 0;
} 
```

已经证明，在g++中`f_A`，which之前构造`f_B`，之后解构，之后`f_B`解构`f_B`。什么决定了顺序？`f_C`它与编译器有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:08:45.743

这将是施工的相反顺序。这是由 C++ 标准指定的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T12:10:20.833

C++ 标准指定了顺序。

第 6.7/2 段：

> 每次执行声明语句时都会初始化具有自动存储持续时间 (3.7.3) 的变量。在块中声明的具有自动存储持续时间的变量在退出块时被销毁（6.6）。

这意味着构造顺序与上面源代码中列出的变量顺序相同，这很重要，因为...

第 6.6/2 段：

> 从范围退出时（无论如何完成），已在该范围内构建的具有自动存储持续时间 (3.7.3) 的对象将按其构建的相反顺序销毁。

# android - 自动完成文本视图

> ID：15948385
> 
> 赞同：0
> 
> 时间：2013-04-11T12:07:24.227
> 
> 标签：android

我已经使用简单的代码来显示自动完成文本视图，但为什么文本对文本视图和下拉列表是透明的。我没有得到原因。请检查并告诉我原因。

爪哇代码

```
public class SendEmailScreenActivity extends Activity{

 /** Called when the activity is first created. */
AutoCompleteTextView autoText;

String president[]=  {"manmohan","Bush","clinton","arafat","vajpayee","brown","apple1","apple2","apple3","apple4"};
      @Override
      protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        //Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
        setContentView(R.layout.activity_sendemail_screen);
        autoText = (AutoCompleteTextView)findViewById(R.id.AutoCompleteTextView_email_to);
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line,president);
        autoText.setThreshold(2);
        autoText.setAdapter(adapter);

    } 
```

.xml

```
 <TableLayout
       android:id="@+id/tableLayout_personalinfo_memsa"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_margin="5sp"
       android:padding="10sp"
       android:shrinkColumns="*">

    <TableRow
           android:id="@+id/tablerow_email_to"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content">

       <AutoCompleteTextView
           android:id="@+id/AutoCompleteTextView_email_to"
           android:layout_width="0sp"
           android:layout_height="fill_parent"
           android:layout_weight=".7"
           android:padding="10sp"
           android:imeOptions="actionDone"
           android:dropDownSelector="@drawable/selected_state"
           android:background="@drawable/subscription_textarea_gray"
           android:hint="@string/hint_sms_to"/>

       <Button 
           android:id="@+id/button_send_email"
           android:layout_width="0sp"
           android:layout_height="fill_parent"
           android:layout_weight=".3"
           android:contentDescription="@string/string_test"
           android:text="@string/string_email_send"/>
      </TableRow>
        </TableLayout> 
```

# gcc - GCC 插件入门

> ID：15948386
> 
> 赞同：7
> 
> 时间：2013-04-11T12:07:27.460
> 
> 标签：gcc, undefined, symbols, gcc-plugins

所以在网上搜索了一段时间后，我决定在这里尝试一下，因为它似乎是一个很好的讨论论坛。我试图创建一个简单的 gcc 插件。程序代码附在这封邮件的末尾，但用简单的英语它注册插件并确保在注册 pragma 时调用 pragma_init 函数。正是在这里，我使用 c_register_pragma 来截取一些 pragma。

我使用[http://gcc.gnu.org/onlinedocs/gccint/Plugins-building.html#Plugins-building](http://gcc.gnu.org/onlinedocs/gccint/Plugins-building.html#Plugins-building)中的示例对其进行编译。编译和链接工作正常。但是，当我加载插件时，我得到：

```
gcc -c -fplugin=plugin.so   test.c -o test.o 

cc1: error: cannot load plugin plugin.so

plugin.so: undefined symbol: warning 
```

我究竟做错了什么？此外，当包含一些头文件（稍后将需要）时，我得到了很多错误。例如，包括“tree.h”会产生（在 50 个其他错误中）：

```
/machmode.h:262:1: error: unknown type name 'class'

 class bit_field_mode_iterator
 ^
/machmode.h:263:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before '{' token

 {
 ^
/plugin/include/tree.h:27:0,
             from conftest.c:63:

/vec.h:220:8: error: field 'register_overhead' declared as a function 
```

有人知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-26T12:18:18.813

这里有两个问题：

错误：“无法加载插件 plugin.so”意味着您应该将存储新共享库插件的目录添加到 LD_LIBRARY_PATH。

如果您使用 g++ 而不是 gcc 进行编译，那么包含中所有文件的数百个错误都会在我的计算机中得到解决（不确定为什么会这样想）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:13:32.720

您使用哪个版本的 GCC 来编译您的插件和使用该插件？运行简单

```
 gcc -v 
```

无需任何其他程序参数即可找出！

您是否为 GCC 插件开发安装了适当的软件包（在 Debian 或 Ubuntu 上，可能是`gcc-4.7-plugin-dev`，但`4.7`要根据您的特定 GCC 版本调整版本）？

您是否安装了构建 GCC 所需的所有依赖项（在 Debian 或 Ubuntu 上`apt-get build-dep gcc-4.7 gcc-4.7-plugin-dev`）？

最新版本的 GCC（尤其是发行版提供的许多 GCC 4.7，以及所有 GCC 4.8）都是由 C++ 编译器编译的，而不是 C 编译器。

您可以通过运行检查您的*GCC*是如何构建的（在 C 或 C++ 中）

```
nm -D -C $(gcc -print-file-name=cc1) 
```

如果该命令显示键入的 C++ 管理名称，例如，`execute_ipa_pass_list(opt_pass*)`而不只是`execute_ipa_pass_list`您的 GCC 已使用 C++ 编译器编译（可能`g++`）

所以你可能需要使用`g++`(not `gcc`) 来编译你的 GCC 插件。

正如我所评论的，您是否考虑过使用[MELT](http://gcc-melt.org/)（一种扩展 GCC 的领域特定语言）来扩展或自定义您的`gcc`编译器？

^(我建议下载最新的[http://gcc-melt.org/melt-plugin-snapshot.tar.bz2](http://gcc-melt.org/melt-plugin-snapshot.tar.bz2)，因为我将在几周内为 GCC 4.7 和 4.8 发布下一个 MELT)

并且不要期望使用插件来改变 GCC 的*解析*行为。这是不可能的（GCC 仅提供插件挂钩来添加您的内置函数和编译指示，而不是扩展解析的语法）。

# android - 为什么 HttpUrlConnection 没有关闭？

> ID：15948393
> 
> 赞同：0
> 
> 时间：2013-04-11T12:07:39.290
> 
> 标签：android, httpurlconnection

为什么这个连接没有关闭。当它建立初始连接时，它会随机发送 1 或 2 个后续请求，或者它可能会发送空字符串，如 {}。

并且服务器没有故意给出任何响应。

```
 private void playOnLoqooTv (String finalUrl) {
         HttpURLConnection con = null;
         try {

             URL url = new URL(finalUrl);

             // Log.d("TAG", url);
             System.out.println(url);
             //  Log.d("yo");
             con = (HttpURLConnection) url.openConnection();
             readStream(con.getInputStream());
         } catch (Exception e) {
             e.printStackTrace();
         }finally {
             if (con != null) {
                 con.disconnect();
             }
         }
    }

    private void readStream(InputStream in) {
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(in));
            String line = "";
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
            reader.close();
        }catch (IOException e)
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:19:51.243

如果您正在检查连接是否在系统中的某处处于活动状态，则连接保持在 KeepAlive 上，它可能看起来连接已打开，因为套接字保持打开的时间比单独的连接长一点。

# javascript - MVVM中模型的职责

> ID：15948396
> 
> 赞同：1
> 
> 时间：2013-04-11T12:07:50.463
> 
> 标签：javascript, mvvm, knockout.js, durandal

这个问题更多地与如何构造代码有关，或者更准确地说是使用 Knockout 在 MVVM 模式中模型的责任。我将 Knockout 与 Durandal 一起使用，但问题可能是 MVVM 模式的通用问题。例如

我有这样的模型：

```
var Model = function(data){
      this.name = data.name;
      this.count = ko.observable();
};

Model.prototype.getCount = function(){
       var self = this;
       setInterval(function(){
             //some ajax call to get the count
             self.count(data.count);
       }, 1000);

}; 
```

我的 viewModel 收集了我的模型，例如：

```
var ViewModel = function(){
       this.models = ko.observableArray([]);
       //ajax call to get the required data
       data.Items.forEach(function(item){
             var model = new Model(item);    
             model.getCount();
             this.models.push(model); 
       }
}; 
```

现在我的看法

```
<div data-bind="foreach: models">
    <div data-bind="text: name"></div>
    <div data-bind="text: count"></div>
</div> 
```

我的问题是因为我的模型具有可观察的属性，并且每当属性更改时，它都会更新视图。但本质上它是一个模型，更新 UI 的责任应该完全取决于视图模型。

因此，与更新计数相关的代码本质上应该是**getCount**，存在于视图模型上，而模型不适合它。哪些代码应该保留在 viewModel 或模型中的区别在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:19:07.673

老实说，我会将您的模型归类为视图模型。您的模型是您从 Ajax 调用中返回的 json 对象，您可以为每个对象创建一个视图模型。就我而言，嵌套视图模型没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:50:11.097

Knockout 并没有真正实现 MVVM；它更像是 VVM。其他库，如 Backbone 等，使用模型；淘汰赛真的不行。为了在 Knockout 中使用 MVVM，您的“模型”是您的服务器端数据库实体。

# javascript - 在javascript中将xml声明为常量

> ID：15948400
> 
> 赞同：0
> 
> 时间：2013-04-11T12:07:57.987
> 
> 标签：javascript

任何人都可以帮助将此xml分配为javascript中的常量字符串。如何将此 xml 分配为常量而不进行任何更改？

```
 "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
    "<wp:Notification xmlns:wp=\"WPNotification\">
      " +
      "<wp:Tile>
        " +
        "<wp:BackgroundImage>" + TextBoxBackgroundImage.Text + "</wp:BackgroundImage>" +
        "<wp:Count>" + TextBoxCount.Text + "</wp:Count>" +
        "<wp:Title>" + TextBoxTitle.Text + "</wp:Title>" +
        "<wp:BackBackgroundImage>" + TextBoxBackBackgroundImage.Text + "</wp:BackBackgroundImage>" +
        "<wp:BackTitle>" + TextBoxBackTitle.Text + "</wp:BackTitle>" +
        "<wp:BackContent>" + TextBoxBackContent.Text + "</wp:BackContent>" +
        "
      </wp:Tile> " +
      "
    </wp:Notification>"; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:09:35.737

JavaScript 没有常量修饰符。

您可以做的最接近的方法是将其定义[`defineProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)并设置`writable`为`false`.

另外，你的字符串...

```
 "<wp:Tile>
    " + 
```

...不会工作，因为解析器当前不支持多行字符串。您需要将其拆分`" + "`或使用转义字符作为最后一个字符。

# php - 通过 Pear 安装 PHPUnit 3.8

> ID：15948401
> 
> 赞同：0
> 
> 时间：2013-04-11T12:08:04.523
> 
> 标签：php, phpunit, pear

我无法使用 Pear 将 PHPUnit 从 3.7 升级到 3.8。以下：

```
pear install --alldeps phpunit/PHPUnit 
```

退货

```
phpunit/PHPUnit is already installed and is the same as the released version 3.7.19 
```

我已经尝试将我的 pear 首选状态更改为 beta / devel，这并没有什么不同。关于如何升级到 3.8 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:55:23.157

跑

```
$ pear clear-cache 
```

摆脱旧的缓存文件并重试。

如果这没有帮助，请明确使用版本号：

```
$ pear upgrade -f phpunit/phpunit-3.8.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T01:00:12.110

看起来 3.8 已从梨回购中删除。

[http://pear.phpunit.de/](http://pear.phpunit.de/)

# c# - 根据数字更改数据网格中单元格的值

> ID：15948408
> 
> 赞同：1
> 
> 时间：2013-04-11T12:08:23.817
> 
> 标签：c#, winforms, datagridview

我正在尝试将网格内的数字更改为文本。根据单元格中的值，我应该得到另一个文本。如果`value = 0`它应该显示`"inkomst"`，如果`value = 1`它应该显示`"Uitgave"`。

我已经有了这段代码来显示正确的行并格式化宽度。

```
private void updateAll()
{
    dataGridViewInkomsten.DataSource = blFinancien.getFinancienByInkomsten();

    //kolommen niet tonen waarin enkel id's worden getoond
    dataGridViewInkomsten.Columns[0].Visible = false;
    dataGridViewInkomsten.Columns[1].Visible = false;
    dataGridViewInkomsten.Columns[2].Visible = false;
    dataGridViewInkomsten.Columns[8].Visible = false;

    dataGridViewInkomsten.Columns[6].HeaderText = "Inkomst/uitgave";

    int breedtevankolommen = dataGridViewInkomsten.Width / 5;
    dataGridViewInkomsten.Columns[3].Width = breedtevankolommen;
    dataGridViewInkomsten.Columns[4].Width = breedtevankolommen;
    dataGridViewInkomsten.Columns[5].Width = breedtevankolommen;
    dataGridViewInkomsten.Columns[6].Width = breedtevankolommen;
    dataGridViewInkomsten.Columns[7].Width = breedtevankolommen;
} 
```

现在取决于第六列中的 int 值，我应该得到`"Inkomst"`or `"Uitgave"`。我也有一个打印屏幕，所以你明白我的意思。

![数据网格](https://i.stack.imgur.com/zQmXJ.png)

有人可以告诉我如何完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:20:15.537

首先创建单元格样式：

```
 System.Windows.Forms.DataGridViewCellStyle dataGridViewCellStyle1 = new System.Windows.Forms.DataGridViewCellStyle();
 dataGridViewCellStyle1.Format = "One;\'\';Zero";
 dataGridViewCellStyle1.NullValue = null; 
```

然后将单元格样式应用于您的动态列：

```
 dataGridViewInkomsten.Columns[6].DefaultCellStyle = dataGridViewCellStyle1; 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:36:00.707

将数据保存到数据库后，使用 datagridview.rows[].cells[].value

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:58:11.303

有几种方法可以做到这一点。

1.  您可以在 SQL 查询中编写 switch case 并设置所需的文本。

2.  或者，您可以在网格中添加另一列。说第 2 列。隐藏实际列说 COLUMN1。
    然后在您的网格单元格格式化事件（或任何类似事件）中，您可以根据实际列（COLUMN1）中的值设置此列（COLUMN2）的文本。

    private sub grid_CellFormatting(sender ,e) { if(grid.Rows(e.RowIndex).Cells("COLUMN1").Text == "0") grid.Rows(e.RowIndex).Cells("COLUMN2"). text = "value1" else(grid.Rows(e.RowIndex).Cells("COLUMN1").Text == "1") grid.Rows(e.RowIndex).Cells("COLUMN2").text = "value2 " }

3.  实际上，您应该在域模型中对 UI 进行这种格式化，然后将域模型绑定到网格。那是在您从数据库中获取数据之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:54:10.057

尝试这个：

```
SqlCeCommand cmd = new SqlCeCommand();
SqlCeConnection conn = new SqlCeConnection("connString");
cmd.Connection = conn;
cmd.CommandText = "SELECT COUNT(*) FROM yourTable";
var count = cmd.ExecuteScalar();

for (int i = 0; i <= int.Parse(count.ToString()); i++)
{
     if (dataGridViewCategories.Rows[i].Cells["cellName"].Value.ToString() == "0")
     {
        dataGridViewCategories.Rows[i].Cells["coulmnName"].Value = "Inkomst";
     }
     else
     {
        dataGridViewCategories.Rows[i].Cells["coulmnName"].Value = "Uitgave";
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:13:12.113

编辑您绑定网格的查询。

**在其中包含 case 如下：**

```
CASE WHEN lnkomst/uitgave = 0 THEN 'lnkomst' ELSE 'uitgave' END

select col1,col2,(CASE WHEN lnkomst/uitgave = 0 THEN 'lnkomst' ELSE 'uitgave' END) as lnkomst/uitgave  from tablename 
```

像这样写查询。

**编辑访问：**

```
select col1,col2,lnkomst/uitgave = Switch(
    NUMREG=0,'lnkomst',
    NUMREG=1,'uitgave');  from tablename 
```

希望能帮助到你。

# visual-studio-2010 - 如何向 MFC-ActiveX 添加方法

> ID：15948409
> 
> 赞同：1
> 
> 时间：2013-04-11T12:08:33.750
> 
> 标签：visual-studio-2010, mfc, activex, ocx, visual-studio-6

这个问题似乎很愚蠢，因为互联网上有很多解释，描述了如何添加一个新方法，以后生成的 OCX 的用户可以调用该方法。不幸的是，它对我不起作用。

我有一个使用 Visual Studio 6 创建并导入到 VS2010 的基于 MFC 的 ActiveX 控件项目。在那里我没有可以使用向导添加方法的类视图（类视图选项卡窗格在那里，但它是空的）。到现在为止，现有代码还没有提供任何可调用的方法，因此我可以简单地复制它们。

那么：如何启用/调用 VS2010 中的类视图生成以使用向导？

一旦它起作用：这种方法应该是什么类型的外部可见？据我所知，向导要求某种类型...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-09T12:01:36.960

要将方法添加到您的 ActiveX 控件，您必须遵循以下步骤：

**1.在头文件中声明函数。**

例如

```
public:
    int Connect(int timeout); 
```

**2\. 在 CPP 文件中添加定义。**

```
 int CSLWebLinkCtrl::Connect(int timeout)

    // Your logic here.

    return 0;
} 
```

**3\. 在 .idl 文件中公开你的方法**

```
[id(4), helpstring("method Connect")] int Connect(int timeout); 
```

希望它会帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:02:58.250

也许 SDF 文件已损坏？

如果您右键单击类视图对话框栏，您应该会看到类向导的上下文菜单选项。从那里，您应该能够使用项目的类。

# neo4j - Cypher 查询：通过关系属性查找路径

> ID：15948417
> 
> 赞同：3
> 
> 时间：2013-04-11T12:08:57.683
> 
> 标签：neo4j, cypher

我的问题非常接近这个主题：[Cypher 查询：查找两个节点之间的所有路径，通过关系属性过滤，](https://stackoverflow.com/questions/14104682/cypher-query-finding-all-paths-between-two-nodes-filtered-by-relationship-prope)但我想要做的是找到沿路径具有增加的关系属性值的路径。因此，在之前的主题中，示例解决方案路径（从 A 到 D）将是：

**A->D**和**A->B->D**

我使用了上一个主题的解决方案

```
START a=node(1), d=node(4) 
MATCH p=a-[r:ACTIVATES*..]->d 
WITH head(relationships(p)) as r1,p
WHERE all(r2 in relationships(p) 
      where r2.temperature > r1.temperature) 
return p; 
```

它适用于这个例子。问题是当路径具有超过 2 个关系时，例如：

```
 activates:50      activates:70      activates:60
(A)-------------->(B)-------------->(C)-------------->(D) 
```

不幸的是，这条路也匹配。

有没有办法如何用密码编写这个查询，否则我将不得不使用 gremlin 代替？

感谢您的任何建议。

**更新：**我需要的是一些结构，例如（在伪编程语言中）：

```
WITH head(relationships(p)) as r1,p
FOREACH(r2 in tail(relationships(p)):
    r1.temperature < r2.temperature, r1 = r2) 
```

但如果可能的话，在密码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:59:47.077

这个在我的例子中有效

```
START a=node(1), d=node(4) 
MATCH p=a-[r:ACTIVATES*..]-d 
WITH head(relationships(p))as r1,last(relationships(p))as r2,p
WHERE all(r3 in relationships(p) 
      where r2.temperature > r1.temperature AND NOT r3.temperature < r1.temperature) 
return p; 
```

**更新：**有没有办法用节点属性来做到这一点？

# php - 将php变量发送到另一个页面的问题

> ID：15948419
> 
> 赞同：1
> 
> 时间：2013-04-11T12:09:00.430
> 
> 标签：php, session, variables, cookies, xampp

有没有其他方法可以在不使用`get`、`post`、 cookie 或的情况下将变量从一个页面发送到另一个页面`session`？

我正在使用标头重定向，所以我不能使用`get`or`post`并且我无法设置 cookie，所以我不能使用`setcookie`. `session`会话正在工作，但由于其他原因我不想使用。

还有其他方法可以发送变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:12:18.820

> 我正在使用标头重定向，所以不能使用 get ...

当然可以。利用：

```
header('Location: test.php?foo=bar'); 
```

通过 HTTP 重定向发送 var foo 作为 GET 参数

**另请注意，在以下情况**下，重定向后 cookie 仍然有效：

*   它是一个域 cookie，您在同一个域内重定向
*   它是一个路径 cookie，您正在使用相同的路径进行重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:26:41.267

您可以使用 session 和 getmethod 发送值

获取方法

```
header("location:update_profile.php?variable=value") 
```

并将它的另一页作为

```
<?php echo $_GET['variable']; ?> 
```

设置会话

```
<?php 
   session_start();
   $_SESSION['variable']='value';
   header("location:update_profile.php");
?> 
```

获得价值

```
<?php
    session_start();
    $value=$_SESSION['variable'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:21:46.523

也许下面的 HTML5 功能会对您有所帮助，我的意思是：`sessionStorage` [http ://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

告诉我它是否是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:15:49.167

你可以用作......

```
header("location:update_profile.php?msg=record updated") 
```

并将它的另一页作为

```
<?php echo $_GET['msg']; ?> 
```

或者你可以使用链接作为

```
<a href='yoursite.php?user=anything......'>click</a> 
```

并通过检索它`Get[]`

# arrays - 检查是否填充了预定义大小的数组 - Pascal

> ID：15948421
> 
> 赞同：0
> 
> 时间：2013-04-11T12:09:10.363
> 
> 标签：arrays, size, conditional, pascal, procedure

我正在做一些家庭作业，它定义了应该如何制作程序，`procedure DoSort`.
该过程有一个局部变量，称为“数据”，它是一个由 25 个整数组成的数组。 `data : array[0..24] of Integer;`该程序有四个主要步骤：

1) PopulateArray(data)
2) ShowNumbersInList(data)
3) PlotBars(data)
4) Sort(data)

这些步骤都是对额外过程的过程调用。但是，如果我这样编码，每次调用`DoSort`. 我需要仅在初始调用时填充数组。我已经尝试了很多东西...

```
 if data[0] = data[1]
    if data[0] = nil
    if data[0].free
    if data.free
    if data = nil 
```

等等。我需要在不创建另一个变量的情况下执行此操作，即`firstRun : Boolean`. 所以基本上，我需要做的是检查数组是否已被填充

```
 procedure DoSort();
    Var
      data : array[0..24] of Integer;
    begin
      if data[0] = data[1] then // DOESN'T WORK
      begin
        PopulateArray(data); 
      end
      else
      begin
        ShowNumbersInList(data);
        PlotBars(data);
        Sort(data);
      end;
    end; 
```

这让我发疯，因为我无法弄清楚。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:46:40.120

您的`data`数组在您的过程中是本地的`DoSort()`。这意味着每次`DoSort()`调用时，都会使用一个未初始化的数组。（分配在堆栈上）。

要持久保存数据，请将其声明在您的过程范围之外并通过引用传递它，`procedure DoSort(var data: array of integer);`.

仅在第一次进入 DoSort 之前初始化您的数据。

例子：

```
procedure Main;
var
  data : array[0..24] of Integer;
begin
  PopulateData(data);

  while jobNotDone do
  begin
    DoSort(data);
    ...
  end;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T12:29:00.930

自从我写任何 Pascal 以来，已经有很多个月了。但是，在其他语言中，我会创建一个单例（Java、C++ 等），基本上可以将构造函数设为 PRIVATE，因此您只能通过调用创建单个实例。

由于这是家庭作业，我不会给你完整的答案，但下面的链接应该能让你走上一条好的道路。

[http://wiki.freepascal.org/Singleton_Pattern#Simple_Singleton](http://wiki.freepascal.org/Singleton_Pattern#Simple_Singleton)

祝你好运，希望你能详细回答。

# android - 为什么我在 Android 类文件编辑器中收到源文件未找到错误？

> ID：15948422
> 
> 赞同：1
> 
> 时间：2013-04-11T12:09:13.540
> 
> 标签：android

我正在开发一个 Android 应用程序。我的代码有问题，还是我的源文件真的丢失了？

![源文件丢失](https://i.stack.imgur.com/O99cW.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:12:44.203

您正在尝试查看已编译的文件。这些文件中只有字节码，即设备“理解”的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:21:31.460

如果您想查看 android java 文件的源代码，您必须确保通过 eclipse 中的 sdk 管理器下载源代码。然后，您可以在 eclipse 中附加该源，以便您看到它而不是您现在看到的，即字节码。要附加您的源，只需单击附加源按钮并导航到您的 sdk 文件夹，就会有一个 souces 文件夹。从那里您可以选择要附加的版本 sdk。祝你好运！

# javascript - JS：通过变量onclick

> ID：15948427
> 
> 赞同：4
> 
> 时间：2013-04-11T12:09:30.613
> 
> 标签：javascript, jquery, variables, jquery-templates

我正在尝试将变量传递给函数，我知道有很多关于此的主题，并且我几乎尝试了所有建议，但仍然无法使其正常工作，这些是我的尝试：

**编辑：**没有onclick，一切正常

```
var filename = file.name;

<button class="btn btn-danger delete" onclick="deleteImage(\''+filename+'\');"> 
```

**结果：** Uncaught SyntaxError: Unexpected token ILLEGAL

```
<button class="btn btn-danger delete" onclick="deleteImage(&quot;'+type+'&quot;);"> 
```

**结果（警报）：** '文件名'

```
<button class="btn btn-danger delete" onclick="deleteImage('" + filename + "');"> 
```

**结果：** Uncaught SyntaxError: Unexpected token ILLEGAL

```
<button class="btn btn-danger delete" onclick="deleteImage(" + filename + ");"> 
```

**导致：** Uncaught SyntaxError: Unexpected token }

这是完整的代码（修改，blueimp fileuploader）

```
 <script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else { 
            // add the image urls to the file inputbox
            var filename = file.name;
            var prev = $("#mFile").val(); 
            $("#mFile").val(prev + file.name + ","); 

            %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="modules/mod_stern_form_prijsopgave/upload/server/php/files/{%=file.name%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="modules/mod_stern_form_prijsopgave/upload/server/php/files/thumbnail/{%=file.name%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="modules/mod_stern_form_prijsopgave/upload/server/php/files/{%=file.name%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td>
            <button class="btn btn-danger delete" onclick="deleteImage('" + filename + "');" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                <i class="icon-trash icon-white"></i>
                <span>Verwijderen</span>
            </button>
        </td>
    </tr>
{% } %}
</script> 
```

**和这样的测试：**

```
 function deleteImage(filename) {
      alert(filename);
    } 
```

我究竟做错了什么？谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:56:15.070

尝试 onclick 值的模板格式：

```
onclick="deleteImage('{%=filename%}');" 
```

也试试 file.name

```
onclick="deleteImage('{%=file.name%}');" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:14:01.970

```
<button id="deleteOnClick" class="btn btn-danger delete">...</button> 
```

在javascript中：

```
document.getElementById("deleteOnClick").onclick = function(){deleteImage(filename);} 
```

**编辑：**

如果要删除仅由原始文件名值指定的文件：

```
var deleteByFile = (function (filename){
    return function(){deleteImage(filename);};
}(filename));
document.getElementById("deleteOnClick").onclick = deleteByFile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T12:12:25.977

您无法从 HTML 访问 JS 变量。你必须这样做：

```
var filename = 'testing';
document.getElementById('testdiv')
    .setAttribute('onclick', "alert('" + filename + "')");
filename = 'more testing'; 
```

[这是一个小提琴](http://jsfiddle.net/FZmbn/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T12:21:48.633

尝试使用`onclick="deleteImage(" + filename + ");"`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-23T07:47:39.110

您可以设置一个变量，如 var counter = 1;

无论在哪里需要，您都可以像这样更新它

```
 onclick="updateCount('+counter+')" 
```

# android - Android地图获取位置

> ID：15948428
> 
> 赞同：0
> 
> 时间：2013-04-11T12:09:32.863
> 
> 标签：android, networking, gps, maps, location

我的应用程序有一点问题。我从 GPS 或网络获取位置，一切正常，但...

如果我从 GPS 获取位置并且当我没有从网络获取位置时我从手机关闭 GPS 所以.. 我需要帮助，

当我在网络上关闭 GPS 开关时如何制作

我的代码：

```
public class Background_work extends Service implements LocationListener{

    static String TAG="Service Created";
    private Timer timer = new Timer();
    private TimerTask task;
    int count = 0;
    LocationManager lm;
    // Platuma ilguma
    double lat,log;
    //Tikrina kas ijungta
    boolean GPSStatus = false;
    boolean NetworkStatus = false;

    public void setX(double X){
        lat = X;
    }
    public void setY(double Y){
        log = Y;
    }
    public double getX(){
        return lat;
    }
    public double getY(){
        return log;
    }

    public int onStartComand(Intent intent, int flags, int startId){
        Toast.makeText(this, "Setver Started", Toast.LENGTH_LONG).show();
        return Service.START_NOT_STICKY;
    }

    public void onCreate() {
        super.onCreate();
        Log.d(Background_work.TAG, "Service Created");
    }

    @Override
    public void onStart(Intent intent, int startId) {   

    Log.d(Background_work.TAG, "Service started");

    subscribeToLocationUpdates();

}
       @Override
       public void onDestroy() {
           super.onDestroy();
       }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onLocationChanged(Location location) {

        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        if(location != null){

        setX(latitude);
        setY(longitude);

        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void subscribeToLocationUpdates() {

        this.lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        // GPS status
        GPSStatus = this.lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        // Network status
        NetworkStatus = this.lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        Log.i("", "GPS" + GPSStatus + " network" + NetworkStatus);

        if(GPSStatus == true){
            this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 0, this);
        }else if(NetworkStatus == true){
            this.lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000, 0, this);
        }else if(NetworkStatus == true && GPSStatus == true){
            this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 0, this);
        }

    }

} 
```

# ios - CATextLayer 的分辨率

> ID：15948434
> 
> 赞同：0
> 
> 时间：2013-04-11T12:09:44.907
> 
> 标签：ios, ipad

我正在尝试开发一个 IOS 应用程序，它列出了一组不同大小的文本，并允许用户放大和查看较小的项目。我在 CAShapelayer 中使用 CATextLayer 来绘制文本，这又添加到 UIVIew 中被添加到 UIScrollView。当滚动时，我在“viewForZoomingInScrollView”委托方法中返回 UIView 对象。现在的问题是放大时CATextlayer中的文本变得模糊。是否可以设置分辨率或纵横比以在缩放时保持较小文本的清晰度...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:16:50.977

如果要放大，则文本层将变得不清晰。您可以以更高分辨率绘制图层，然后缩小以适合视图。

这样，您将允许用户仅放大到 1:1 的最大比例，这将使 TextLayer 保持清晰。

当然，我假设您已经在设置图层的 contentScale 以匹配屏幕比例（视网膜显示）。正确的？

# git - 仅 Git 取消提交消息

> ID：15948437
> 
> 赞同：0
> 
> 时间：2013-04-11T12:09:54.377
> 
> 标签：git, github, bitbucket, merge-conflict-resolution

我经常在这种情况下，我不知道该怎么办。

1.  我在一个分支中被改变了一些东西。承诺并推动。
2.  我仍在同一个分支上工作，有人提交并推动。
3.  我完成了更改并做了**git commit -m "Blabla"**并推送了。
4.  Git 拒绝推送，因为存储库在前面，我可能会丢失一些更改

我的想法是：

*   Go pre **git commit -m "blabla"** (<- 这是我卡住的地方)
*   存储更改
*   从 repo 中提取最新更改
*   将存储与工作目录合并
*   再次提交
*   推

您如何解决此类“冲突”，或者在这种情况下最好的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:12:22.513

无需删除/存储您的提交。要解决冲突，请使用`git pull --rebase`第 3 步中的提交，并且您的第 3 步中的提交将自动重新设置（堆叠在）同事在第 2 步中的提交。重新设置后，您将能够在没有冲突的情况下推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:03:27.823

上[一个答案](https://stackoverflow.com/a/15948473/1507392)提供了实现最终目标的更好方法，但您提出的问题的答案是：

```
git reset HEAD~ 
```

这将倒回您当前的分支以指向最近一个提交之前的提交，但保持索引和工作树与其当前状态保持不变。

# c# - 当我重新启动应用程序时，我的 DatagridView 丢失了数据，我该如何解决这个问题？

> ID：15948438
> 
> 赞同：0
> 
> 时间：2013-04-11T12:09:54.950
> 
> 标签：c#, datagridview

我目前有两种形式。第一个表单上有一个 dataGridView，第二个表单有六个文本框和一个按钮。单击按钮上的信息从文本框中获取并放入 dataGridView。我遇到的问题是，当我退出应用程序并再次运行应用程序时，dataGridView 中没有显示任何数据。我该如何解决这个问题？

有没有办法保存输入到 dataGridView 的信息，或者我必须制作一个数据表并将文本框中的信息存储在其中，然后将其用作 dataGridView 的数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:13:07.707

正如您所说，您可以使用数据表来存储文本框的信息，但是当您关闭应用程序时，您仍然会丢失信息。

如果您想保留每次运行应用程序时的信息，您需要将信息保存在文件或数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:26:56.793

您必须使用数据库来保存数据，或者您可以将数据`TXT`保存在文件中并将它们保存在文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:28:02.147

将本地数据库添加到您的项目并将 dataGridView 绑定到它。

# c# - Nhibernate：以相同的精度和比例映射所有小数

> ID：15948439
> 
> 赞同：7
> 
> 时间：2013-04-11T12:10:07.017
> 
> 标签：c#, nhibernate, nhibernate-mapping

我知道在 NHibernate 中，使用代码映射，我可以指定小数属性的精度和比例，如下所示：

```
Property(
    x => x.Dollars,
    m =>
        {
            m.Precision(9);
            m.Scale(6);
        }
 ); 
```

这很好，但我想知道是否有一种方法可以轻松地映射**所有**类中的所有小数属性。我必须遍历所有映射并手动更新每个映射，这似乎有点疯狂。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:25:50.540

`BeforeMapProperty`在 ModelMapper 上使用：-

```
var mapper = new ModelMapper();

mapper.BeforeMapProperty += (inspector, member, customizer) =>  {
    if (member.LocalMember.GetPropertyOrFieldType() == typeof (decimal))
    {
      customizer.Precision(9);
      customizer.Scale(6);
    }
}; 
```

唯一要添加的另一件事是删除所有出现的：-

```
 m => { m.Precision(9); m.Scale(6); } 
```

来自您的映射类，因为这些将覆盖您设置的约定，`BeforeMapProperty`除非您有其他具有不同比例或精度的小数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:26:04.420

你可以写一个`UserType`. 优点是您可以轻松区分不同类型的小数（您很可能不希望*所有*小数具有相同的精度）。

```
Property(
    x => x.Dollars,
    m => m.Type<MoneyUserType>()
 ); 
```

您有一些努力将其放入所有货币属性中，但随后您将获得一个**更具可读性和自我描述性**的映射定义。

* * *

一个类似的解决方案（在语法上），但更容易实现，是编写一个设置精度的**扩展方法。**

```
Property(
    x => x.Dollars,
    m => m.MapMoney()
 );

public static void MapMoney(this IPropertyMapper mapper)
{
    m.Precision(9);
    m.Scale(6);
} 
```

这里也一样：它使映射定义更具自我描述性。

（是的，我知道您不想更改所有文件，但我仍然*建议*将此信息放入映射文件中，因为它更明确小数实际上是什么。更改所有文件的映射非常容易Money 属性，但保留 Amount 属性。对于完全隐式的解决方案，请继续阅读。）

* * *

或者，您可以使用**映射约定**。这些非常强大。您仍然可以*覆盖*映射文件中的精度，这提供了很大的灵活性。

```
mapper.BeforeMapProperty += MapperOnBeforeMapProperty;

private void MapperOnBeforeMapProperty(
    IModelInspector modelInspector,
    PropertyPath member,
    IPropertyMapper propertyCustomizer)
{
    Type propertyType;
    // requires some more condition to check if it is a property mapping or field mapping
    propertyType = (PropertyInfo)member.LocalMember.PropertyType;
    if (propertyType == typeof(decimal)) 
    {
        propertyCustomizer.Precision(9);
        propertyCustomizer.Scale(6);
    }
} 
```

也可以将用户类型作为*默认值*放入映射约定中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:20:51.097

你可以使用[FluentNHibernate](http://www.fluentnhibernate.org/)吗？它使您能够根据需要灵活地应用约定。请参见此处：[https](https://github.com/jagregory/fluent-nhibernate/wiki/Conventions) ://github.com/jagregory/fluent-nhibernate/wiki/Conventions和此处： http: [//marcinobel.com/index.php/fluent-nhibernate-conventions-examples/](http://marcinobel.com/index.php/fluent-nhibernate-conventions-examples/)其中有这个特定示例：

```
public class StringColumnLengthConvention
    : IPropertyConvention, IPropertyConventionAcceptance
{
    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        criteria.Expect(x => x.Type == typeof(string))
            .Expect(x => x.Length == 0);
    }

    public void Apply(IPropertyInstance instance)
    {
        instance.Length(100);
    }
} 
```

这看起来您可以轻松地适应映射所有小数，就像他对字符串所做的那样。

# jquery - 动态高度 tinyscrollbar

> ID：15948442
> 
> 赞同：0
> 
> 时间：2013-04-11T12:10:17.890
> 
> 标签：jquery, tinyscrollbar

我真的被这个卡住了...

我在 div 上使用 tinyscrollbar.js 插件。在该 div 中，我有一个视口，其中包含一个段落和一个用于在 500px 和 1000px 之间切换段落高度的按钮。如何动态更新 tinyscrollbar 以注意新高度并自行纠正？（请想象还有九个其他“box_content review”div）

我尝试使用网站建议的 tinyscrollbar_update 方法，但它似乎不起作用。有人有想法吗？

谢谢

HTML -

```
<div id="scrollbar3">
<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
    <div class="overview">
    <div class="box_content review">
    <h5 class="reviewTitle">Review title: D90 is the best camera</h5>
    <img src="../../images/gen_rating_5.png" />
    <div class="topCont">
    <img src="../../images/profile.png" />
    <p class="pros">Pros - LightWeight, Quality, Performance, Durable, Reliable  </p>
    <p class="cons">Cons - Expensive, Interchangable Parts </p>
    </div>
    <p class="reviewContent">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book... &nbsp <span><i><a class="readMore">read more</a></i></span></p>
</div>
</div>
</div>
</div> 
```

jQuery -

```
$('#scrollbar3').tinyscrollbar({ sizethumb: 45 });
    $(".readMore").toggle(function(){
        $(this).parent().parent().parent().animate({height:530},400);
        $('#scrollbar3').tinyscrollbar_update();
    },function(){
        $(this).parent().parent().parent().animate({height:76},400);
        $('#scrollbar3').tinyscrollbar_update();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T14:38:04.890

更新 tinyscrollbar 时动画尚未完成。动画完成后，使用[complete 回调函数](http://api.jquery.com/animate/#complete)更新 tinyscrollbar。

```
$(this).parent().parent().parent().animate(
    { height:530 }, 
    400, 
    function() {
        $('#scrollbar3').tinyscrollbar_update();
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T08:53:10.367

好的，所以我最后做的是预先添加内容并给父 div 一个溢出：隐藏和一个固定的高度来“隐藏”内容。然后单击我将高度更改为“自动”。

# jsf - Java bean 体系结构的 Domino 数据库连接

> ID：15948446
> 
> 赞同：2
> 
> 时间：2013-04-11T12:10:21.930
> 
> 标签：jsf, javabeans, xpages, lotus-domino

我们正在将我们的多数据库 Web 应用程序从 LS 迁移到 Java bean 架构，但正在努力决定如何最好地处理数据库连接以及我们应该为它们使用什么范围。

如果我们使用 sessionScope，那么每次调用都会为每个用户创建到 5-6 个数据库的连接。如果我们使用 applicationScope bean 进行数据库连接，那么它将保持打开状态，直到服务器重新启动，从而导致内存泄漏。我知道某些值（例如很少更改的系统配置值）可以在 applicationScope 级别缓存，但我担心其余的连接。

我的问题真的是在不影响性能或内存泄漏或自动 GC 问题的情况下处理 domino 数据库连接（domino 对象不可序列化）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:40:03.940

这是一个艰难的问题，因为它涉及构建一个特定的解决方案，而不是一些通用的“这比那个更好”的建议。我们在构建消费者 XPage 应用程序以便从其他数据库检索数据方面取得了巨大成功。有点像带有数据库后端但带有 Domino 的前端。

我们不使用 applicationScope 任何东西，因为应用程序没有任何全局性，但即使有足够的喋喋不休表明可能 applicationScope 并不像听起来那么普遍，因此您必须密切监视您的对象。

您已经解决了 Domino 对象问题，因此无论您选择哪种方法都必须这样做。

根据您的应用程序，您可能正在关注一些主要的重新架构，但我的建议是首先使用 sessionScope 尝试它，看看它是如何执行的。做一些基准测试。如果它工作得足够快，那就继续吧，但是当你开发你的 bean 时，你应该非常关注性能优化。多个数据库调用可能是一个问题，但你真的不会知道，直到你稍微玩一下它。

有帮助的一件事是，如果您使用比您最初认为需要的更详细的架构来构建您的类 bean（不要试图将所有内容堆积到单个类或 bean 中），不仅可以更容易地调整您的如果需要，您还将开始看到您可能甚至不知道的设计模式的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:13:52.037

正如罗素所提到的，没有一种方法可以做到这一点，每种方法都有其优点/缺点。

有一个 Wrapped Document 类可用于存储文档信息。

```
public static DominoDocument wrap(java.lang.String database,
                              lotus.domino.Database db,
                              java.lang.String parentId,
                              java.lang.String form,
                              java.lang.String computeWithForm,
                              java.lang.String concurrencyMode,
                              boolean allowDeletedDocs,
                              java.lang.String saveLinksAs) 
```

Javadoc 在这里：

[http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/model/domino/wrapped/DominoDocument.html](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/model/domino/wrapped/DominoDocument.html)

然而，这只是在后台对 recycle() 进行了一些处理。因此，您仍然会产生与数据库对象的 make/recycle() 相同的开销。

您将发现的主要开销是在 Java 代码中创建与数据库的连接。一旦建立了连接，其他一切都会相对更快。

在测试性能时，我建议您使用 XPages Toolkit。关于如何使用它的视频是 openNTF 上 XPages Masterclass 的一部分。

[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Masterclass](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Masterclass)

# java - JPA OneToMany 使用继承

> ID：15948452
> 
> 赞同：0
> 
> 时间：2013-04-11T12:10:45.963
> 
> 标签：java, inheritance, jpa

我有以下课程：

硬件.java

```
 @Entity
    @Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
    public class Hardware{
    @Id
    @GeneratedValue(strategy=GenerationType.TABLE)
    private long id;
    private String serialnumber;    

    @OneToMany (mappedBy="hardware")
    private List<Equipment> equipments;
} 
```

计算机.java

```
 @Entity
    public class Computer extends Hardware {

    private String hostname;
    private String macAdress;
    private String ipNumber;

    public Computer(){
        super();
    }

    public Computer(String serialnumber, String hostname,
        String macAdress, String ipNumber) {
        super(serialnumber);
        this.hostname = hostname;
        this.macAdress = macAdress;
        this.ipNumber = ipNumber;
    }
} 
```

网络设备.java

```
 @Entity
    public class NetworkDevice extends Hardware {

    private String hostname;
    private String ipAdress;

    public NetworkDevice(){
        super();
    }

    public NetworkDevice(String serialnumber, String hostname,
            String ipAdress) {
        super(serialnumber);
        this.hostname = hostname;
        this.ipAdress = ipAdress;
    }
} 
```

现在映射到硬件类的类：

设备.java

```
@Entity
public class Equipment {

    public Equipment(){
    }
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private long id;
    private String serialnumber;
    private String info;

    @ManyToOne (fetch=FetchType.EAGER)
    @JoinColumn(name="HW_ID")
    private Hardware hardware;
} 
```

现在，如果我将设备添加到计算机，一切正常，但是如果我尝试将设备添加到 NetworkDevice，我会收到此错误：内部异常：

内部异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`inventorytool_beta`.`EQUIPMENT`, CONSTRAINT `FK_EQUIPMENT_HW_ID` FOREIGN KEY (`HW_ID`) REFERENCES `COMPUTER` (`ID`))
Error Code: 1452
Call: INSERT INTO EQUIPMENT (INFO, SERIALNUMBER, HW_ID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(domain.hardware.Equipment@600a620d)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at main.dbTest(main.java:74)
    at main.main(main.java:18)
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`inventorytool_beta`.`EQUIPMENT`, CONSTRAINT `FK_EQUIPMENT_HW_ID` FOREIGN KEY (`HW_ID`) REFERENCES `COMPUTER` (`ID`))
Error Code: 1452
Call: INSERT INTO EQUIPMENT (INFO, SERIALNUMBER, HW_ID) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(domain.hardware.Equipment@600a620d)
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:851)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:913)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`inventorytool_beta`.`EQUIPMENT`, CONSTRAINT `FK_EQUIPMENT_HW_ID` FOREIGN KEY (`HW_ID`) REFERENCES `COMPUTER` (`ID`))
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 
```

所以我认为这是继承的问题......我不太擅长JPA..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:53:30.557

查看生成的架构。由于您的继承策略，您应该有三个不同的硬件表：一张 for `Hardware`，一张 for`Computer`和一张 fon `NetworkDevice`。问题是`HW_ID`只能引用一张表。在这里，您的 JPA 提供者选择了`Computer`，可能是因为它按字母顺序排列在第一位，但它不能处理所有三个类。

考虑使用另一种继承策略，例如`JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:42:58.800

检查将设备插入 NetworkDevice 的代码。看起来主表（硬件）中不存在 HW_ID。因为它试图在子表（设备）中插入不存在的主表 HW_ID 作为外键。

问候，拉维

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:33:04.317

是的，它来自您的继承策略。你不能使用`@GeneratedValue(strategy=GenerationType.IDENTITY)`with `table_per_class`。

请参阅[Java/Hibernate JPA：InheritanceType.TABLE_PER_CLASS 和 ID](https://stackoverflow.com/questions/3154649/java-hibernate-jpa-inheritancetype-table-per-class-and-ids)

# javascript - Javascript更改所有输入的文本

> ID：15948458
> 
> 赞同：2
> 
> 时间：2013-04-11T12:11:14.187
> 
> 标签：javascript, html, input, replace, getelementsbytagname

我真的是 Web 开发的新手，我正在尝试使用 Javascript 更改一些输入的文本。这是我的代码必须执行的示例

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to replace "R$" with "" in the field below:</p>

<input id="demo" value="R$ 1223,43"></input>
<input id="demo1" value="R$ 134523,67"></input>
<input id="demo2" value="R$ 12453,41"></input>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var x=document.getElementByTagName("input")

for(var i = 0; i < x.length; i++) {

  var str=x[i].innerHTML; 

  var n=str.replace(",",".");
  var n1 = n.replace("R$ ","");

  document.getElementById("demo").innerHTML=n1;
 }

}
</script>

</body>
</html> 
```

所以，我想撤回“R$”并将“，”替换为“。” 对于一些数学运算。我必须对代码中的所有输入执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:15:54.713

你快到了，替换了一些东西让它看起来像这样：

```
function myFunction() {
    var x = document.getElementsByTagName("input"); // ; was missing and you used getElementByTagName instead of getElementsByTagName

    for (var i = 0; i < x.length; i++) {

        var str = x[i].value; // use .value

        var n = str.replace(",", ".");
        var n1 = n.replace("R$ ", "");

        //document.getElementById("demo").innerHTML=n1; // use x[i] again instead
        x[i].value = n1; // and again use .value
    }
} 
```

* * *

[**演示**](http://jsfiddle.net/KUxBA/)- 运行更新的代码

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:15:36.957

这些是所需的步骤 - 至少是第 1 步到第 3 步

1.  将脚本移动到它所属的头部
2.  将 getElementByTagName 更改为 getElementsByTagName，复数
3.  获取和更改 x[i].value
4.  链接替换

[演示](http://jsfiddle.net/mplungjan/v55kV/)

```
<!DOCTYPE html>
<html>
<head>
<title>Replace example</title>
<script>
function myFunction() {
  var x=document.getElementsByTagName("input"); // plural

  for(var i = 0; i < x.length; i++) {
    var str=x[i].value; 
    x[i].value=str.replace(",",".").replace("R$ ","");
  }
 }
</script>
</head>

<body>

<p>Click the button to replace "R$" with "" in the field below:</p>

<input id="demo" value="R$ 1223,43"></input>
<input id="demo1" value="R$ 134523,67"></input>
<input id="demo2" value="R$ 12453,41"></input>

<button onclick="myFunction()">Try it</button>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:16:11.987

首先，使用 .value 而不是 .innerHTML。.innerHTML 指的是标签打开和关闭内的文本。

其次，更正 var x=document.getElementByTagName("input") 的拼写，它应该是 getElementsByTagName

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:17:11.763

这个函数应该做你想做的：

```
function myFunction()
{
    var eles=document.getElementsByTagName("input");

    for(var i = 0; i < eles.length; i++) 
    {
        if(eles[i].type != 'text') continue; // inputs that aren't of type text dont make sense here
        var str = eles[i].value; 
        str=str.replace(",",".");
        str=str.replace("R$ ","");
        eles[i].value=str;
    }
} 
```

# c# - GetHashCode() 方法是否应该关注作为参数给出的空值？

> ID：15948459
> 
> 赞同：4
> 
> 时间：2013-04-11T12:11:16.050
> 
> 标签：c#, linq, equals, gethashcode

在一些 C# 代码中，我使用`linq` `GroupBy<TSource, TKey>()`带有自定义`IEqualityComparer<T>`.

```
GroupBy(x => x.SomeField, new FooComparer()); 
```

我用作分组键的字段可以是`null`. 因此，我不得不`null`在方法中添加一些检查`Equals()`：

```
public bool Equals(Foo x, Foo y)
{
    if (x == null && y == null)
       return true;
    else if (x == null && y != null)
       return false;
    else if (x != null && y == null)
       return false;
    else 
       return x.Id == y.Id;
} 
```

**问题是：我应该在`GetHashCode()`功能上做同样的事情吗？**

```
public int GetHashCode(Foo obj)
{
    if (obj == null)          //is this really needed ?
       return default(int);   //
    else
       return obj.Id;
} 
```

我不明白的东西：即使`GroupBy()`方法中提供了空键，`GetHashCode()`也永远不会用`null`obj 参数中的对象调用。有人可以解释一下为什么吗？（这只是“纯粹的机会”，因为`GroupBy()`实施方式和我给它的元素的顺序吗？）

* * *

编辑 ：

正如*caerolus*指出的那样，在`GroupBy()`实施过程中进行了一些特殊检查。

我签入`ILSpy`并`GroupBy()`实施了`Lookup<TKey, TElement>`

这是相关的功能：

```
internal int InternalGetHashCode(TKey key)
{
    if (key != null)
    {
        return this.comparer.GetHashCode(key) & 2147483647;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:24:01.563

根据[以下文件`IEqualityComparer<T>.GetHashCode`](http://msdn.microsoft.com/en-us/library/ms132155.aspx)：

> **ArgumentNullException**
> 的类型`obj` 是引用类型并且`obj`是**null**。

所以这是该接口合同的一部分，因此您应该关心。通过抛出`ArgumentNullException`if `obj`is 来实现它`null`。

即使您怀疑或可以证明代码永远不会触及您不关心的部分，您也应该始终遵守界面。稍后的更改可能会引入依赖于该行为的代码。

# java - 在一个 EAR 中部署多个依赖的 CDI jar

> ID：15948463
> 
> 赞同：3
> 
> 时间：2013-04-11T12:11:34.337
> 
> 标签：java, jakarta-ee, deployment, cdi, ear

我有一个关于如何部署多个包含 CDi 实现和 webapp 的 jar 的问题。

这是我的 Jar 结构

```
--------     ----------      ------------
| WAR  | <-- | API Jar | <-- | Data Jar |
--------     ----------      ------------ 
                  ^
                  |
           --------------  
           | Common Jar |    And many more implementations
           -------------- 
```

WAR 本身是使用在 API Jar 中定义的类的 webapp。API jar 仅包含接口、注释、非逻辑类、限定符等...

API 的实现存储在不同的 JAR 中，按主题划分。因此，数据、安全、日志记录、通用等方面的所有数据访问/操作实现。这个实现依赖于 API Jar 和可能的库。所有包都通过事件进行通信。

我们在每个实现和 webapp 中都使用 CDI。完整的配置仅在 WAR 中。

我想在一个 EAR 中部署所有内容。所以这是我使用的文件结构：

```
EAR
  - META-INF/application.xml
  - api.jar
    - api classes, no beans.xml here
  - common.jar
    - api implementation for common project classes
    - META-INF/beans.xml
  - data.jar
    - api implementation for data classes
    - META-INF/beans.xml
  - logging.jar
    - api implementation for logging classes
    - META-INF/beans.xml
  - webapp.war
    - classes 
      - ( project classes which uses the api)
      - META-INF
        - services
        - persistence.xml
    - WEB-INF/beans.xml
      - beans.xml
      - web.xml 
```

我的 application.xml 看起来像这样：

```
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <display-name>test-ear</display-name>
  <module>
    <java>api-1.0.0.jar</java>
  </module>
  <module>
    <java>common-package-1.0.0.jar</java>
  </module>
  <module>
    <java>data-package-1.0.0.jar</java>
  </module>
  <module>
    <java>logging-package-1.0.0.jar</java>
  </module>
  <module>
    <web>
      <web-uri>test-war-1.0.0.war</web-uri>
      <context-root>/war</context-root>
    </web>
  </module>
</application> 
```

我现在的问题是，这根本不起作用。CDI 容器抱怨缺少一些 bean。我搜索了谷歌，发现包含 beans.xml 的 jar 必须部署为 ejbModule，但在这里我需要为所有内容创建一个 ejb.jar。另一个结果说我只需要将所有依赖项添加到 WEB-INF/lib 中的 WAR 文件中。同样的抱怨在这里。

我无法运行它并尝试在此处请求帮助。

作为服务器，我想使用 websphere（也许还有 tomee）。

编辑： Maven 用于将所有文件组装在一起。

非常感谢，如果有人可以帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:58:04.510

您是否尝试在战争清单中引用您的罐子？

就像是`Class-Path: api.jar data.jar logging.jar common.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T03:32:01.120

添加到 Gab 的答案中，添加 webapp.war 的清单类路径，`<optional>true</optional>` 如下所示

```
<dependency>
    <groupId>common</groupId>
    <artifactId>common</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <optional>true</optional>
</dependency> 
```

[https://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html](https://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html)

# iphone - 在IOS中，如何删除从通讯录中获取的+-#*()

> ID：15948468
> 
> 赞同：2
> 
> 时间：2013-04-11T12:12:12.093
> 
> 标签：iphone, ios, phone-number, openurl

在IOS中，如何删除从通讯录中获取的+-#*()。例如：

```
 NSString *txt = @"+1(510)1234567"
 txt = [NSString stringWithFormat:@"tel://%@", txt];
 [[UIApplication sharedApplication]canOpenURL:[NSURL URLWithString:txt]]; 
```

这是一个无效的号码。 `[[UIApplication sharedApplication]openURL:[NSURL URLWithString:urlToCall]];`对这个类型号没用。

我能不能有一些更好的选择，除了使用 `[txt stringByReplacingOccurrencesOfString:@"-" withString:@""]`...。我只是想打个电话。

谢谢你的帮助。

* * *

实际上：我们可以通过openURL进行调用：调用的格式不是“tel://”，而是“tel:”。所以，我应该做的是：

```
NSString *cleanedString = [[phoneNumber componentsSeparatedByCharactersInSet:  
  [[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] 
invertedSet]]     componentsJoinedByString:@""];
NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", cleanedString]]; 
```

没关系。

———————————————————————————————— ***@"tel://" 不是拨打电话的正确网址！我们必须使用@"tel:"***

如果不是某个数字，则为 +1 (510) 3436 which
BOOL bCanCall = [[UIApplication sharedApplication]canOpenURL:urlToCall]; 将返回 False。你不能打电话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:22:27.013

试试这个，它可能会工作

```
-(NSString *) formatIdentificationNumber:(NSString *)string
{
    NSCharacterSet * invalidNumberSet = [NSCharacterSet characterSetWithCharactersInString:@"\n_!@#$%^&*()[]{}'\".,<>:;|\\/?+=\t~` "];

    NSString  * result  = @"";
    NSScanner * scanner = [NSScanner scannerWithString:string];
    NSString  * scannerResult;

    [scanner setCharactersToBeSkipped:nil];

    while (![scanner isAtEnd])
    {
        if([scanner scanUpToCharactersFromSet:invalidNumberSet intoString:&scannerResult])
        {
            result = [result stringByAppendingString:scannerResult];
        }
        else
        {
            if(![scanner isAtEnd])
            {
                [scanner setScanLocation:[scanner scanLocation]+1];
            }
        }
    }

    return result;
} 
```

或查看[链接](https://stackoverflow.com/questions/7185903/how-to-remove-special-characters-from-uitextfield-iphone)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:23:11.883

你可以像这样删除..

```
NSString *s = @"+1(510)1234567";
NSCharacterSet *unwantedStr = [NSCharacterSet characterSetWithCharactersInString:@"+()"];
s = [[s componentsSeparatedByCharactersInSet: unwantedStr] componentsJoinedByString: @""];
NSLog(@"%@", s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:31:42.703

Alternativ，这里有一些提示，但您可以优化代码。

```
- (void)testExample
{
    NSMutableCharacterSet *mvalidCharSet = [[NSMutableCharacterSet alloc] init];
    [mvalidCharSet formUnionWithCharacterSet:[NSCharacterSet decimalDigitCharacterSet] ];
    [mvalidCharSet addCharactersInString: @"+"]; 
    NSCharacterSet *validCharSet = [mvalidCharSet copy]; // not mutable -> more efficient
    NSCharacterSet *invalidCharSet = [validCharSet invertedSet];
    NSString *txt = @"+1(510)1234567";
    NSArray * components = [txt componentsSeparatedByCharactersInSet:invalidCharSet];
    NSString * rejoin = [components componentsJoinedByString:@""];
    NSLog(@"%@", rejoin);
} 
```

# wordpress - wp_insert_post 仅用于自定义帖子类型一次

> ID：15948469
> 
> 赞同：0
> 
> 时间：2013-04-11T12:12:14.250
> 
> 标签：wordpress, plugins, custom-post-type

我创建了一个启用自定义帖子类型的插件，并使用 wp_insert_post 为该帖子类型插入了一些默认值。

```
wp_insert_post( array(
    'ID' => '3',
    'post_status' => 'publish',
    'post_type' => 'exhibitor',
    'post_title' => 'Title',
    'post_content' => 'Description...'
) ); 
```

问题是每次页面刷新时都会重新插入我的值。我无法编辑或删除它们。

当我的插件被激活时，如何让 Wordpress 只更新自定义帖子类型？每次我刷新页面时，帖子都会再次发布。所以我无法编辑或删除帖子。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:35:36.393

在您的插件中使用 register_activation_hook，这是插件激活时要运行的插件函数。

```
register_activation_hook(__FILE__, 'newplugin_install');
function newplugin_install() {
wp_insert_post( array(
    'ID' => '3',
    'post_status' => 'publish',
    'post_type' => 'exhibitor',
    'post_title' => 'Title',
    'post_content' => 'Description...'
) );

} 
```

希望这对你有用；）

# html - 我需要一种方法来填充链接左侧和右侧的空白

> ID：15948470
> 
> 赞同：1
> 
> 时间：2013-04-11T12:12:18.353
> 
> 标签：html, css

我需要自动填充菜单链接旁边的空格。我有组成菜单栏的未知数量的链接。

我需要一种方法来填充链接旁边的空白区域，使其看起来与链接完全相同。

如果你看看我的小提琴，你会看到有绿色和黑色的链接分类：a.menu(green) 和 a.menu_filler(black)。我将它们设置为绿色和黑色，以明确我所谈论的链接最终它们将具有相同的背景。

我需要 a.menu_filler(black) 链接自行调整为导航栏 div 剩余宽度的 100%，称为 div.navbar (silver)。

[http://jsfiddle.net/RFZees/Gt4SG/6/](http://jsfiddle.net/RFZees/Gt4SG/6/)

我希望我的解释是可以理解的。

HTML：

```
<div class='navbar'> 
 <a class='menu_filler'></a>
 <a class='menu' href='#'>LINK</a>
 <a class='menu' href='#'>BIGGER LINK</a>
 <a class='menu' href='#'>BIGGEST LINK</a>
 <a class='menu_filler'></a>
</div> 
```

CSS：

```
div.navbar {
    background:silver;
    height:50px;
    width:600px;
    margin:auto;
    text-align: center;
}
a.menu_filler {
    background:black;
    height:30px;
    width:auto;
    padding:10px;
    margin:5px;
}
a.menu {
    background:green;
    height:30px;
    padding:10px;
    margin:5px;
    color:blue;
}
a.menu:hover {
    background:blue;
    color:green;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:52:08.503

您可以在 .navbar 中使用`display: table;`和`border-spacing: 10px;`，然后将每个`<a/>`元素声明为`display:table-cell;`.

这样填充物将自动计算，div 之间的空间将自动调整，并且它们将是透明的。

代码

```
div.navbar {
    /* all your stuff */
    display: table;
    border-spacing: 10px;
}

div.navbar > a{
  display: table-cell;  
} 
```

演示：http: [//jsfiddle.net/nWzqc/](http://jsfiddle.net/nWzqc/)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-11T13:08:41.200

`display: table-cell;`在中添加`a`和删除高度`div.navbar`。

**[演示](http://jsfiddle.net/Gt4SG/10/)**

# c++ - 访问不同类中的顶级变量和方法

> ID：15948476
> 
> 赞同：0
> 
> 时间：2013-04-11T12:12:27.220
> 
> 标签：c++, visual-c++, artificial-intelligence

以下是我正在使用的头文件和 cpp 文件

标题

```
#include "2d/Vector2D.h"
#include <list>
#include "../../AbstTargetingSystem.h"

class AbstRaven_Bot;

class Fletcher_getClosestBotStrategy
{

public:
    Fletcher_getClosestBotStrategy()
    {}
    Fletcher_getClosestBotStrategy(AbstRaven_Bot* owner);

    //each time this method is called the opponents in the owner's sensory 
    //memory are examined and the closest  is assigned to m_pCurrentTarget.
    //if there are no opponents that have had their memory records updated
    //within the memory span of the owner then the current target is set
    //to null

    void       pickTarget();
};
class Fletcher_TargetingSystem : public AbstTargetingSystem
{

public:
    Fletcher_TargetingSystem(AbstRaven_Bot* owner);

    //each time this method is called the opponents in the owner's sensory 
    //memory are examined and the closest  is assigned to m_pCurrentTarget.
    //if there are no opponents that have had their memory records updated
    //within the memory span of the owner then the current target is set
    //to null
    void       Update();
    void         closestBotStrategy();

    void      setCurrentTarget(AbstRaven_Bot* t);
    AbstRaven_Bot* getCurrentTarget();

    void      setCurrentOwner(AbstRaven_Bot* t);
    AbstRaven_Bot* getCurrentOwner();
};

#endif 
```

cpp

```
#include "Fletcher_TargetingSystem.h"
#include "../../AbstRaven_Bot.h"
#include "../../Raven_SensoryMemory.h"
#include "../../Debug/DebugConsole.h"

//-------------------------------- ctor ---------------------------------------
//-----------------------------------------------------------------------------
Fletcher_TargetingSystem::Fletcher_TargetingSystem(AbstRaven_Bot* owner):
AbstTargetingSystem(owner){

}

//-------------------------------- ctor ---------------------------------------
//-----------------------------------------------------------------------------
Fletcher_getClosestBotStrategy::Fletcher_getClosestBotStrategy(AbstRaven_Bot* owner){

}

//----------------------------- Update ----------------------------------------

//-----------------------------------------------------------------------------

//#define script AbstTargetingSystem::Instance()
//class AbstTargetingSystem;
//----------------------------- closestPlayer ----------------------------------------

//-----------------------------------------------------------------------------
void Fletcher_getClosestBotStrategy::pickTarget()
{

    double ClosestDistSoFar = MaxDouble;

    for (curBot; curBot != SensedBots.end(); ++curBot)
    {
        //make sure the bot is alive and that it is not the owner
        if ((*curBot)->isAlive() && (*curBot != getCurrentOwner()) )
        {
            double dist = Vec2DDistanceSq((*curBot)->Pos(), getCurrentOwner()->Pos());
            if (dist < ClosestDistSoFar)
            {
                ClosestDistSoFar = dist;
                setCurrentTarget(*curBot);// = *curBot;
            }

        }
    }

}
void Fletcher_TargetingSystem::Update()
{
    // currentStrategy = targetClosestBotStrategy;
    // target = currentStrategy.pickTarget();
    std::list<AbstRaven_Bot*> SensedBots;
    SensedBots = getCurrentOwner()->GetSensoryMem()->GetListOfRecentlySensedOpponents();

    std::list<AbstRaven_Bot*>::const_iterator curBot = SensedBots.begin();
    setCurrentTarget(0);//       = 0;

    Fletcher_getClosestBotStrategy* fGCBS = new Fletcher_getClosestBotStrategy(this->getCurrentOwner());
    fGCBS->pickTarget();
}

AbstRaven_Bot* Fletcher_TargetingSystem::getCurrentOwner(){
    return m_pOwner;
}
AbstRaven_Bot* Fletcher_TargetingSystem::getCurrentTarget(){
    return m_pCurrentTarget;
}

void Fletcher_TargetingSystem::setCurrentTarget(AbstRaven_Bot* t){
    m_pCurrentTarget = t;
}
void Fletcher_TargetingSystem::setCurrentOwner(AbstRaven_Bot* t){
    m_pOwner = m_pOwner;
} 
```

在 `void Fletcher_getClosestBotStrategy::pickTarget()`我试图访问更新中的 curBot 和 SensedBot 方法`void Fletcher_TargetingSystem::Update()`。我也希望能够访问`void Fletcher_TargetingSystem::setCurrentOwner(AbstRaven_Bot* t)`和其他 3 类似于 dat

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:59:50.660

从您的方法`Fletcher_getClosestBotStrategy::pickTarget()`中，您无法访问`Fletcher_TargetingSystem::Update()`变量`curBot`，`SensedBot`因为它们是局部变量。

因此，如果您确实需要访问它们，请将它们转换为`Fletcher_TargetingSystem`类属性，创建 setter 和 getter，并尝试避免`friend`clases，重新定义您的类依赖项：将`Fletcher_TargetingSystem`const 引用传递给您的`Fletcher_getClosestBotStrategy`方法：

例如：

```
class Fletcher_getClosestBotStrategy
{
    void pickTarget(const Fletcher_TargetingSystem & targeting);
    ....
};

....

class Fletcher_TargetingSystem 
{
    protected:
        std::list<AbstRaven_Bot*> SensedBots;
    public:
        std::list<AbstRaven_Bot*> & getSensedBots() const { return SensedBots; }
};

void Fletcher_getClosestBotStrategy::pickTarget(const Fletcher_TargetingSystem & targeting)
{
    double ClosestDistSoFar = MaxDouble;
    std::list<AbstRaven_Bot*> & myLocalSensedBots = targeting.getSensedBots();
    ...
} 
```

# node.js - 节点包管理器（NPM）似乎产生重复的包

> ID：15948477
> 
> 赞同：5
> 
> 时间：2013-04-11T12:12:30.983
> 
> 标签：node.js, module, npm

我一直在安装一些节点包，我注意到 NPM 创建了一堆重复项。

比如我先安装了mongoose，自然就安装了一堆依赖。然后我安装了 mongodb 包，它也作为依赖项附带了 bson。由于重叠的依赖关系，我有以下异常：

Mongodb 存在于以下目录中：

```
/usr/local/lib/node_modules/mongodb/
/usr/local/lib/node_modules/mongoose/node_modules/mongodb/ 
```

此外，bson，mongodb 的依赖项存在于这两个中：

```
/usr/local/lib/node_modules/mongodb/
/usr/local/lib/node_modules/mongoose/node_modules/mongodb/ 
```

我意识到这些只是千字节的文件，但我觉得这可能会产生很多冗余，最终我可能会得到一个非常复杂的树，类似于以下内容：

```
/usr/local/lib/node_modules/[something1]/node_modules/[something2]/node_modules/[something3/.../.../node_modules/[somethingX]/ 
```

在这种情况下，给定的 [依赖项] 可能存在于 /usr/local/lib/node_modules 下的 X 级别上。

我主要关心的是更新这些模块。我不觉得很难想象同时安装不同版本的并发模块。

将所有内容直接放入 /usr/local/lib/node_modules/ 然后交叉引用依赖项不是更容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:18:06.423

问题是，当 mongoose 仅​​被编码为使用 mongodb v1 时，而您已经将应用程序编码为使用 mongodb 的 v2 - 因此，它安装并加载了两个版本，因此一切正常。我们可以在 node 中轻松做到这一点，因为 require 模块方式不会污染全局命名空间，这与浏览器不同 - 由于全局命名空间污染，这使得管理和包含正确的依赖项变得非常痛苦。

现在，如果您的 package.json 和 mongoose 的 package.json 允许相同的 mongodb 版本（您可以指定特定版本或范围），那么执行 a`rm -Rf node_modules; npm install`只会安装一个 mongodb 副本，而不是两个。但是如前所述，如果指定了多个版本，则会安装和加载多个版本。

# php - 如何存储来自推荐网站的客户销售？

> ID：15948486
> 
> 赞同：1
> 
> 时间：2013-04-11T12:12:59.700
> 
> 标签：php, opencart

这是通过 URL 发送引荐来源网址的 url。

```
http://www.myshop.com/index.php?referrer=xyz 
```

我想知道如何存储在那次访问中发生的客户销售情况。我正在考虑使用cookies来做到这一点。有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:50:13.177

无需编写任何代码。希望您使用的是新版本的 Opencart。它具有内置的会员系统。因此，您可以创建会员（虚拟）并共享 URL 以供参考。所以 Opencart 处理一切。您可以在报告 -> 会员 -> 佣金下查看销售额和其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:17:01.733

用于`$_GET['referrer']`捕获引荐来源代码或名称。将其存储在变量中并将其保存到数据库中，以记录谁被推荐到您的站点。

# java - 我在面板上有一个按钮的 actionListener，得到空指针

> ID：15948499
> 
> 赞同：0
> 
> 时间：2013-04-11T12:13:38.093
> 
> 标签：java, swing, pointers, null, actionlistener

我已经查看并测试了各种方法，但是这个面板（通过另一个面板组件调用）将看不到 actionListener 已设置。我在 Netbeans 7.0 工作。这是面板代码：

```
public class PanelAddClient extends javax.swing.JPanel {

 private AppEventListener appEventListener;

public PanelAddClient() {
    initComponents();
    //paneClientDBTable = new PanelClientDBTable(sqlModule);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    jToolBar1 = new javax.swing.JToolBar();
    filler1 = new javax.swing.Box.Filler(new java.awt.Dimension(500, 0), new java.awt.Dimension(500, 0), new java.awt.Dimension(500, 32767));
    jLabel11 = new javax.swing.JLabel();
    jPanel1 = new javax.swing.JPanel();
    jLabel1 = new javax.swing.JLabel();
    textClientNo = new javax.swing.JTextField();
    jLabel2 = new javax.swing.JLabel();
    textFName = new javax.swing.JTextField();
    jLabel3 = new javax.swing.JLabel();
    textLName = new javax.swing.JTextField();
    jLabel4 = new javax.swing.JLabel();
    textStreetAddress = new javax.swing.JTextField();
    jLabel5 = new javax.swing.JLabel();
    textCity = new javax.swing.JTextField();
    jLabel6 = new javax.swing.JLabel();
    comboStatebox = new javax.swing.JComboBox();
    jLabel7 = new javax.swing.JLabel();
    textZipCode = new javax.swing.JTextField();
    jPanel2 = new javax.swing.JPanel();
    jLabel8 = new javax.swing.JLabel();
    textHomePhone = new javax.swing.JTextField();
    jLabel9 = new javax.swing.JLabel();
    textMobilePhone = new javax.swing.JTextField();
    jLabel10 = new javax.swing.JLabel();
    textEmail = new javax.swing.JTextField();
    buttonAddClient = new javax.swing.JButton();

    setLayout(new java.awt.BorderLayout());

    jToolBar1.setBackground(new java.awt.Color(102, 0, 102));
    jToolBar1.setFloatable(false);
    jToolBar1.setRollover(true);
    jToolBar1.add(filler1);

    jLabel11.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
    jLabel11.setForeground(new java.awt.Color(51, 255, 51));
    jLabel11.setText("Add New Client Panel");
    jToolBar1.add(jLabel11);

    add(jToolBar1, java.awt.BorderLayout.PAGE_START);

    jPanel1.setBackground(new java.awt.Color(204, 0, 204));

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel1.setForeground(new java.awt.Color(255, 255, 255));
    jLabel1.setText("Client Number:");

    textClientNo.setToolTipText("");
    textClientNo.setPreferredSize(new java.awt.Dimension(50, 15));

    jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel2.setForeground(new java.awt.Color(255, 255, 255));
    jLabel2.setText("First Name :");
    jLabel2.setToolTipText("");

    textFName.setToolTipText("");

    jLabel3.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel3.setForeground(new java.awt.Color(255, 255, 255));
    jLabel3.setText("Last Name :");
    jLabel3.setToolTipText("");

    textLName.setToolTipText("");

    jLabel4.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel4.setForeground(new java.awt.Color(255, 255, 255));
    jLabel4.setText("Stree Address :");

    textStreetAddress.setToolTipText("");

    jLabel5.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel5.setForeground(new java.awt.Color(255, 255, 255));
    jLabel5.setText("City :");

    textCity.setToolTipText("");

    jLabel6.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel6.setForeground(new java.awt.Color(255, 255, 255));
    jLabel6.setText("State :");

    comboStatebox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "AL", "AK", "MS", "CA", "TX", "OK", "GA", "SC", "TN", "NC", "NY", "IL", "LA", "IN", "WA", "ND", "SD", "MD", "CO", "MA", "RI" }));

    jLabel7.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel7.setForeground(new java.awt.Color(255, 255, 255));
    jLabel7.setText("Zip Code :");

    textZipCode.setToolTipText("");

    jPanel2.setBackground(new java.awt.Color(204, 0, 204));
    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Contact Information", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 12), java.awt.Color.white)); // NOI18N
    jPanel2.setForeground(new java.awt.Color(255, 255, 255));
    jPanel2.setLayout(new java.awt.GridBagLayout());

    jLabel8.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel8.setForeground(new java.awt.Color(255, 255, 255));
    jLabel8.setText("Phone Number :");
    jPanel2.add(jLabel8, new java.awt.GridBagConstraints());

    textHomePhone.setPreferredSize(new java.awt.Dimension(100, 20));
    jPanel2.add(textHomePhone, new java.awt.GridBagConstraints());

    jLabel9.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel9.setForeground(new java.awt.Color(255, 255, 255));
    jLabel9.setText("Mobile Phone :");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    jPanel2.add(jLabel9, gridBagConstraints);

    textMobilePhone.setPreferredSize(new java.awt.Dimension(100, 20));
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 1;
    jPanel2.add(textMobilePhone, gridBagConstraints);

    jLabel10.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    jLabel10.setForeground(new java.awt.Color(255, 255, 255));
    jLabel10.setText("Email :");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 2;
    jPanel2.add(jLabel10, gridBagConstraints);

    textEmail.setToolTipText("");
    textEmail.setMaximumSize(new java.awt.Dimension(100, 27));
    textEmail.setMinimumSize(new java.awt.Dimension(100, 20));
    textEmail.setPreferredSize(new java.awt.Dimension(100, 20));
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 2;
    jPanel2.add(textEmail, gridBagConstraints);

    buttonAddClient.setBackground(new java.awt.Color(204, 153, 0));
    buttonAddClient.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
    buttonAddClient.setForeground(new java.awt.Color(153, 0, 0));
    buttonAddClient.setText("Add Client Now");
    buttonAddClient.setFocusable(false);
    buttonAddClient.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
    buttonAddClient.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
    buttonAddClient.setInheritsPopupMenu(true);
    buttonAddClient.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
    buttonAddClient.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            buttonAddClientActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jLabel1)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(textClientNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jLabel4)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(textStreetAddress, javax.swing.GroupLayout.PREFERRED_SIZE, 352, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jLabel2)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(textFName, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(31, 31, 31)
                    .addComponent(jLabel3)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(textLName))
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jLabel5)
                    .addGap(18, 18, 18)
                    .addComponent(textCity, javax.swing.GroupLayout.PREFERRED_SIZE, 97, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(40, 40, 40)
                    .addComponent(jLabel6)
                    .addGap(18, 18, 18)
                    .addComponent(comboStatebox, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18)
                    .addComponent(jLabel7)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(textZipCode, javax.swing.GroupLayout.PREFERRED_SIZE, 46, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(267, Short.MAX_VALUE))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(buttonAddClient)
            .addGap(279, 279, 279))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(40, 40, 40)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(textClientNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel1))
            .addGap(18, 18, 18)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(textFName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel3)
                .addComponent(textLName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel4)
                .addComponent(textStreetAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel5)
                .addComponent(textCity, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel6)
                .addComponent(comboStatebox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel7)
                .addComponent(textZipCode, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(30, 30, 30)
            .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(buttonAddClient)
            .addContainerGap())
    );

    add(jPanel1, java.awt.BorderLayout.CENTER);
}// </editor-fold>

private void buttonAddClientActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
    //card.show(panelMain, PANEL_SQLDB_RESULT);

    //SQLModule sqlModule = new SQLModule();
    //this.appEventListener = appEventListener;

    //JOptionPane.showMessageDialog(null, "Button Add Client Clicked On", "Client ADD Button Click", JOptionPane.ERROR_MESSAGE);

    String clientNo = textClientNo.getText();
    String clientFName = textFName.getText();
    String clientLName = textLName.getText();

    if (clientNo.equals("")) {
        JOptionPane.showMessageDialog(this, "You must enter a Client Number (Client ID).", "Error", JOptionPane.ERROR_MESSAGE);
        textClientNo.requestFocus();
        return;
    }

    System.out.print("JUST BEFORE APP-EVENT " + clientNo + " was HIT!");

    //appEventListener.buttonAddClientActionPerformed(clientNo, clientFName, clientLName);

    if (appEventListener != null) {

        System.out.print(" appEventListener " + clientNo + " was Secondly HIT!");
        appEventListener.buttonAddClientActionPerformed(clientNo, clientFName, clientLName);
    }   

} 
```

* * *

这是我得到空指针（或缺少）的地方..，由于appEventListener为空，这段代码永远不会被执行。

* * *

```
if (appEventListener != null) {

    System.out.print(" appEventListener " + clientNo + " was Secondly HIT!");
    appEventListener.buttonAddClientActionPerformed(clientNo, clientFName, clientLName);
} 
```

## 异常跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at com.zflex.cims.panels.PanelAddClient.buttonAddClientActionPerformed(PanelAddClient.java:297)
    at com.zflex.cims.panels.PanelAddClient.access$000(PanelAddClient.java:16)
    at com.zflex.cims.panels.PanelAddClient$1.actionPerformed(PanelAddClient.java:181)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6038)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3260)
    at java.awt.Component.processEvent(Component.java:5803)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
    at java.awt.Container.dispatchEventImpl(Container.java:2102)
    at java.awt.Window.dispatchEventImpl(Window.java:2429)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

就在 APP-EVENT 6565 被击中之前！关闭

* * *

## 这是来自抽象的 App Listener 模块

```
public interface AppEventListener {

    public void buttonAddClientActionPerformed(String clientNo, String clientFName, String clientLName);

    //void buttonDisplayRawLDAPStatsActionPerformed();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:19:46.430

你声明了你的事件监听器，但你从来没有像这样初始化它：

```
private AppEventListener appEventListener = new AppEventListener(); 
```

在使用它之前声明它（`initComponet()`例如）

# android - 在 Android 应用程序中设置文本大小

> ID：15948500
> 
> 赞同：1
> 
> 时间：2013-04-11T12:13:38.627
> 
> 标签：android, textview

我使用 Eclipse 编写一个 android 应用程序并使用最新的 API 进行编译。

我正在设置多个 TextView 控件的 TextSize。一些控件是在 XML 中定义的，而一些 TextView 控件是在代码中动态创建的。当我查看应用程序中的 TextView 控件时，文本大小是不同的。我正在使用相同的尺寸设置文本大小，所以我不明白为什么它会出现不同的结果。

这是我定义的维度：

```
<!--  Default Font Size -->
<dimen name="font_size">12sp</dimen> 
```

这是我在 XML 中设置 textview 控件之一的地方：

```
<TextView
android:id="@+id/lblSection1Title"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/device_info_title"
android:textColor="@color/FontColor"
android:textSize="@dimen/font_size" /> 
```

这是我在代码中设置文本大小的地方：

```
m_fTextSize = getResources().getDimension( R.dimen.font_size );
txtLabel = new TextView(this.m_xContext);
xLayoutParams = new TableRow.LayoutParams( 0, LayoutParams.WRAP_CONTENT, 0.35f );
xLayoutParams.setMargins((int)m_fMarginLeft,  (int)m_fMarginTop,  (int)m_fMarginRight,  (int)m_fMarginBottom);
txtLabel.setLayoutParams(xLayoutParams);
txtLabel.setTextColor(this.m_iTextColor);
txtLabel.setTextSize(this.m_fTextSize); 
```

如果您查看屏幕截图，您可以看到动态创建的 TextView 控件小于屏幕上在 XML 中定义的其余 TextView。

这是屏幕截图的链接： http: [//emildiego.com/systemprofiler/wp-content/uploads/sites/2/2013/04/screen-shot-text-copy.png](http://emildiego.com/systemprofiler/wp-content/uploads/sites/2/2013/04/screen-shot-text-copy.png)

我知道调用 getDimension 会根据屏幕密度调整文本大小，但是在 XML 中设置 TextSize 不会做同样的事情吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:22:18.303

你的答案可以在这里找到：http: [//developer.android.com/reference/android/content/res/Resources.html#getDimension(int)](http://developer.android.com/reference/android/content/res/Resources.html#getDimension(int))

当 Android 返回值时，`getDimension()`它已经在调整屏幕密度。尝试`getDimensionPixelSize()`改用。

# sql - SQL Server 触发器的游标不起作用

> ID：15948508
> 
> 赞同：0
> 
> 时间：2013-04-11T12:14:06.290
> 
> 标签：sql, sql-server, tsql, triggers, cursor

我在触发器内创建了一个光标，但它无法正常工作。请帮我修复它

```
Create trigger Posts_Raw_To_Queue_Trigger  ON SendNotificationPostsRaw FOR INSERT
AS
BEGIN

DECLARE @PostID uniqueidentifier  
DECLARE @UserID uniqueidentifier
DECLARE @ProfID int
DECLARE @Email nvarchar(100)
DECLARE @CreationTime  datetime
DECLARE @SpecialityID int

SELECT @ProfID= ProfessionalID,@Email= Email from Professionals where UserID=@UserID
SELECT @PostID = I.PostID,@UserID = I.UserID ,@CreationTime =I.CreationTime  FROM INSERTED I

DECLARE post_relation_cursor CURSOR FOR select CategoryId  from PostCategoryRelations  where PostId=@PostID;

OPEN post_relation_cursor;
FETCH NEXT FROM post_relation_cursor INTO @SpecialityID 
WHILE @@FETCH_STATUS = 0  
BEGIN  
       INSERT INTO SendNotificationPostsQueue (UserID,PostID,SpecialityID,TemplateID,CreationTime,SendTime,JSONParameters) Values(@UserID,@PostID,1,1,'04/11/2013','04/11/2013','')

       FETCH NEXT FROM post_relation_cursor INTO @SpecialityID;
END;
CLOSE post_relation_cursor;
DEALLOCATE post_relation_cursor;

END 
```

如果我删除光标并将虚拟值插入`SendNotificationPostsQueue`，它可以工作。所以我的光标有问题...请告诉我为什么光标不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:45:24.180

看来您根本不需要使用光标，并且几乎在所有情况下都不使用光标会更好。只需用标准插件替换触发器的主体（开始和结束之间的部分）：

```
INSERT INTO SendNotificationPostsQueue (UserID,PostID,SpecialityID,TemplateID,CreationTime,SendTime,JSONParameters)
SELECT
    i.UserID,
    i.PostID,
    1,
    1,
    '04/11/2013', -- Might want i.CreationTime or current_timestamp
    '04/11/2013',
    ''
FROM INSERTED i
    -- possibly want "LEFT JOIN Professionals p on i.UserID = p.UserID" here to grab other info 
```

请注意我没有使用`values`只能插入一行的插入子句。我将选择语句作为插入的一部分，因此插入的行数与选择返回的行数一样多。这意味着我们不需要使用游标，也不需要一堆变量来为游标提供动力。

正如@automatic 所提到的，您当前代码的一个问题是您假设 INSERTED 仅保留一行。如果它有多个，那么当您尝试将列分配给变量时会引发错误。

出于优雅、可维护性和性能的原因，我强烈建议您放弃此游标并运行一个简单的插入（因为这就是您的游标所做的一切）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:31:22.960

可能的问题在这里 -

```
CREATE TRIGGER dbo.Posts_Raw_To_Queue_Trigger 

    ON SendNotificationPostsRaw
    -- for view
    INSTEAD OF INSERT
    -- OR
    -- for table
    AFTER INSERT

AS BEGIN

    DECLARE 
          @PostID UNIQUEIDENTIFIER
        , @UserID UNIQUEIDENTIFIER
        , @ProfID INT
        , @Email NVARCHAR(100)
        , @CreationTime DATETIME
        , @SpecialityID INT

    SELECT  @ProfID = ProfessionalID
        ,   @Email = Email
    FROM Professionals
    WHERE UserID = @UserID

    -- this posible return invalid result (random record from inserted sequence)
    SELECT  @PostID = I.PostID
        ,   @UserID = I.UserID
        ,   @CreationTime = I.CreationTime
    FROM INSERTED I

    DECLARE post_relation_cursor CURSOR LOCAL READ_ONLY FAST_FORWARD FOR
        SELECT CategoryID
        FROM dbo.PostCategoryRelations
        WHERE PostId = @PostID;

    OPEN post_relation_cursor;

    FETCH NEXT FROM post_relation_cursor INTO @SpecialityID

    WHILE @@FETCH_STATUS=0 BEGIN

        INSERT INTO SendNotificationPostsQueue (
                UserID
            ,   PostID
            ,   SpecialityID
            ,   TemplateID
            ,   CreationTime
            ,   SendTime
            ,   JSONParameters
        )
        SELECT
                 @UserID
             ,   @PostID
             ,   @SpecialityID --- !!!
             ,   1
             ,   '04/11/2013'
             ,   '04/11/2013'
             ,   ''

        FETCH NEXT FROM post_relation_cursor INTO @SpecialityID;

    END;

    CLOSE post_relation_cursor;
    DEALLOCATE post_relation_cursor;

END 
```

* * *

**更新**

如果我理解正确的话，业务逻辑一定是这样的：

```
CREATE TRIGGER dbo.Posts_Raw_To_Queue_Trigger 

    ON dbo.SendNotificationPostsRaw
    [INSTEAD OF]/[AFTER] INSERT

AS BEGIN

    SET NOCOUNT ON;

    DECLARE 
          @PostID UNIQUEIDENTIFIER
        , @UserID UNIQUEIDENTIFIER
        , @ProfID INT
        , @Email NVARCHAR(100)
        , @CreationTime DATETIME
        , @SpecialityID INT

    DECLARE cur CURSOR LOCAL READ_ONLY FAST_FORWARD FOR
        SELECT
              i.PostID
            , i.UserID
            , ProfID = p.ProfessionalID
            , p.Email
            , i.CreationTime
            , pcr.CategoryID
        FROM INSERTED i
        JOIN dbo.Professionals p ON i.UserID = p.UserID
        JOIN dbo.PostCategoryRelations pcr ON i.PostID = pcr.PostID

    OPEN cur

    FETCH NEXT FROM cur INTO 
          @PostID 
        , @UserID 
        , @ProfID 
        , @Email
        , @CreationTime 
        , @SpecialityID 

    WHILE @@FETCH_STATUS = 0 BEGIN

        INSERT INTO dbo.SendNotificationPostsQueue 
        (
              UserID
            , PostID
            , SpecialityID
            , TemplateID
            , CreationTime
            , SendTime
            , JSONParameters
        )
        SELECT
              @UserID
            , @PostID
            , @SpecialityID
            , 1
            , @CreationTime
            , @CreationTime
            , ''

        FETCH NEXT FROM cur INTO 
              @PostID 
            , @UserID 
            , @ProfID 
            , @Email
            , @CreationTime 
            , @SpecialityID 

    END

    CLOSE cur
    DEALLOCATE cur

END 
```

# jquery - 如果元素具有已动态添加的类，则执行

> ID：15948511
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:14:19.750
> 
> 标签：jquery, css

我有一个元素，它通过一个函数添加了一个类，我想对其进行检查..

如果 ELEMENT 有类，则显示另一个元素

我有一个 if else 语句，我认为它会起作用，但 class="selected" 似乎只在页面没有动态更改类时才起作用。

我使用 jquery isotope 作为过滤工具，如果有帮助，它会添加选定的类。

```
if ($("#comingsoonfilter").hasClass('selected')){ //this gets dynamically added
    $("#datesorter").css({
        'display' : 'block'
    });
} else {
    $("#datesorter").css({
        'display' : 'none'
    });
} 
```

HTML

```
<div class="filter big">
    <p>Filter Schemes:</p>
    <ul id="filters" class="option-set clearfix" data-option-key="filter">
        <li><a href="#filter" data-option-value="*" class="selected">All Schemes</a></li>
        <li><a href="#filter" data-option-value=".comingsoon" id="comingsoonfilter">Coming Soon</a></li>
    </ul>
    </div>
    <div class="filter">
    <p>View by:</p>
    <ul id="sort-by" class="option-set clearfix" data-option-key="sortBy">
        <li><a href="#sortBy=original-order" data-option-value="original-order" class="selected" data>Date Added</a></li>
        <li><a href="#sortBy=name" data-option-value="name">Alphabetical</a></li>
        <li><a href="#sortBy=price" data-option-value="price">Price</a></li>
        <li><a href="#sortBy=date" data-option-value="date" id="datesorter">Date</a></li>
    </ul> 
```

回答 ：

如果有人卡住，则必须在与添加 .selected 类的位相同的部分中触发该函数，这是该部分的整个 javascript 部分（包括下面的同位素）。

```
$(function() {
    var $container = $('.scheme-archive');
    $checkboxes = $('#cityfilters input');
    $container.isotope({
        itemSelector : '.scheme',
                    getSortData : {
            price : function( $elem ) {
                return parseFloat( $elem.find('.price').text().replace( /[\£\,]/g, ''), 1000 );
            },
            date : function( $elem ) {
                return $elem.find('.date').text();
            },
            name : function ( $elem ) {
                return $elem.find('.name').text();
            }
        }
    });

    $checkboxes.change(function() {
        var filters = [];
        // get checked checkboxes values
        $checkboxes.filter(':checked').each(function(){
            filters.push( this.value );
        });
        filters = filters.join(', ');
        $container.isotope({ filter: filters });
    });

    var $optionSets = $('#options .option-set'),
        $optionLinks = $optionSets.find('a');

    $optionLinks.click(function() {
        var $this = $(this);
        // don't proceed if already selected
        if ( $this.hasClass('selected') ) {
            return false;
        }
        var $optionSet = $this.parents('.option-set');
        $optionSet.find('.selected').removeClass('selected');
        $this.addClass('selected');
        // make option object dynamically, i.e. { filter: '.my-filter-class' }
        // Show / hide the date sorter
    if ($('.selected').is('#comingsoonfilter')){
                $('#datesorter').show();
        } else {
            $('#datesorter').hide();
        }
        var options = {},
            key = $optionSet.attr('data-option-key'),
            value = $this.attr('data-option-value');
        // parse 'false' as false boolean
        value = value === 'false' ? false : value;
        options[ key ] = value;
        if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
            // changes in layout modes need extra logic
            changeLayoutMode( $this, options );
        } else {
            // otherwise, apply new options
            $container.isotope( options );
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:09:55.240

为什么不尝试`$('#datesorter').toggle();`在添加“选定”类的相同位置使用？

# scala - scala数学回合错误

> ID：15948518
> 
> 赞同：1
> 
> 时间：2013-04-11T12:14:30.227
> 
> 标签：scala, math, rounding

在scala中试试这个：

```
val value1 = -1.3323651E7f
val value2 = Math.round(value1)
val value3 = value1.toInt
val value4 = Math.round(value3)

value1: Float = -1.3323651E7
value2: Int = -13323650
value3: Int = -13323651
value4: Int = -13323650 
```

为什么`value2`和`value4`不同于`value1`和`value3`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:24:55.363

在[`java.lang.Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28float%29)模块中找到答案：

```
Math.round(a) = (int)Math.floor(a+0.5f) 
```

此外，使用浮点变量计算：

```
-1.3323651E7 + 0.5f = -1.3323650E7 
```

因为 0.5f 首先四舍五入到 1f 以适应差异。这是我之前问题的部分解决方案：

```
val value2 = Math.floor(value1 + 0.499f).toInt
value2: Int = -13323651 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:46:44.077

A`float`有大约[7 位有效的十进制数字](http://en.wikipedia.org/wiki/Single_precision)。因此，鉴于您的结果取决于保留变量`val value1 = -1.3323651E7f`的所有数字，因此您会遇到麻烦并不奇怪。我会`double`改用。

# c# - MVC在哪里选择路由？

> ID：15948519
> 
> 赞同：1
> 
> 时间：2013-04-11T12:14:30.683
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我使用 MVC4，我寻找事件处理程序，其中决定使用路线？这个事件是什么时候发生的？

所有路线都有注册（在`Application_Start()`事件中）

```
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

代码中的位置，在哪里决定出现请求时应该使用哪个路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:19:26.477

它`RouteConfig.cs`位于**App_Start**文件夹中的一个类中。

![在此处输入图像描述](https://i.stack.imgur.com/MNnE2.png)

选择`RegisterRoutes`方法并按**F12**，它将带您到正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:19:48.717

它在类中的方法`RegisterRoutes`中配置，该类`RouteConfig`将位于`App_Start`Web 项目的目录中。

# iphone - 无缓冲播放音频

> ID：15948520
> 
> 赞同：0
> 
> 时间：2013-04-11T12:14:33.330
> 
> 标签：iphone, ios, avaudioplayer

我正在我的 iphone 应用程序中播放音频文件，我从 url 获取音频。播放时它会停止一段时间以缓冲。如何在没有任何缓冲区的情况下播放音频或在完全加载后播放？

```
 -(void) playAudio2
    {

     NSURL *url = [NSURL URLWithString:@"http:domain/iphonetest/mp3/sol.mp3"];

     NSData *data = [NSData dataWithContentsOfURL:url];

    audioPlayer  = [[AVAudioPlayer alloc] initWithData:data error:nil];
    [audioPlayer  setVolume:1];

     [audioPlayer  play];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:41:22.010

尝试使用 NSURLConnection 或 AFNetworkingKit 下载文件（有很多资源显示如何下载文件。只需搜索即可）。

然后在`-(void)connectionDidFinishLoading:(NSURLConnection *)connection`NSURLConnection 的委托方法或 AFNetworkingKit 的 completionBlock 中，像您的代码一样播放文件。但`NSURL *url = [[NSURL alloc] initFileURLWithPath:sound_file]`用于初始化 url 并`[audioPlayer prepareToPlay]`在播放之前使用。

# apache - 设置 Apache 以使用内部代理服务器（代理链？）

> ID：15948523
> 
> 赞同：0
> 
> 时间：2013-04-11T12:14:44.020
> 
> 标签：apache, mod-proxy, proxypass

我有一种情况，在重定向到外部站点之前，我需要通过内部代理服务器将请求路由到 Apache，设置是这样的：

```
Browser Request --> Apache --> Internal Proxy Server --> External Site 
```

在没有代理服务器的情况下，我使用作为代理处理的重写完成了重定向（ [P] ）

```
RewriteRule ^/somepath/(.*) http://www.externalsite.com/$1 [P,QSA,L] 
```

我发现[在转发代理后面设置 apache，](https://stackoverflow.com/questions/7554225/setting-up-apache-behind-a-forward-proxy)这看起来像是我想要设置的，并建议我尝试以下指令：

```
ProxyPass /somepath/ http://www.externalsite.com/
ProxyPassReverse /somepath/ http://www.externalsite.com/
ProxyRemote  http://www.externalsite.com/ http://internal.proxy.ip.addy:8080 
```

当我设置它时，我得到了 503 和以下 Apache 日志条目：

```
[Thu Apr 11 07:47:14 2013] [debug] mod_proxy_http.c(1973): proxy: HTTP: serving URL http://www.externalsite.com/somefile.html
[Thu Apr 11 07:47:14 2013] [debug] proxy_util.c(2011): proxy: HTTP: has acquired connection for (www.externalsite.com)
[Thu Apr 11 07:47:14 2013] [debug] proxy_util.c(2067): proxy: connecting http://www.externalsite.com/somefile.html to www.externalsite.com:80
[Thu Apr 11 07:47:14 2013] [debug] proxy_util.c(2193): proxy: connected http://www.externalsite.com/somefile.html to internal.proxy.ip.addy:8080
[Thu Apr 11 07:47:14 2013] [debug] proxy_util.c(2444): proxy: HTTP: fam 2 socket created to connect to www.externalsite.com
[Thu Apr 11 07:47:35 2013] [error] (OS 10060)A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.  : proxy: HTTP: attempt to connect to internal.proxy.ip.addy:8080 (www.externalsite.com) failed 
```

代理服务器日志中没有记录任何内容，如果我在浏览器中明确设置并加载该 externalsite.com，我知道代理服务器可以工作

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:43:08.477

连接到代理时最终成为 vmware IP 地址问题...上述指令似乎确实将 apache 正确代理到代理服务器。

# c# - 如何以编程方式获取 TFS 团队项目名称

> ID：15948527
> 
> 赞同：1
> 
> 时间：2013-04-11T12:14:49.193
> 
> 标签：c#, tfs, checkin-policy

我正在使用以下方法创建签入策略：

```
using Microsoft.TeamFoundation.VersionControl.Client; 
```

我想从当前工作区或 PendingCheckin 中获取当前 TFS 团队项目名称

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:55:47.050

您可以在待定更改上使用[VersionControlServer.GetTeamProjectForServerPath ，因此：](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.getteamprojectforserverpath.aspx)

```
var pendingChange = pendingCheckin.GetAllPendingChanges().FirstOrDefault();
if(pendingChange != null) {
    return vcs.GetTeamProjectForServerPath(pendingChange.ServerItem);
} 
```

这也意味着您可以检测待处理的更改是否跨越多个团队项目。

* * *

编辑/扩展：

现在我考虑了一下，您可能应该使用本地路径，因为您要签入的文件可能尚未在服务器上（添加）。

因此，您可以改用[Workspace.GetTeamProjectForLocalPath](http://msdn.microsoft.com/en-US/library/microsoft.teamfoundation.versioncontrol.client.workspace.getteamprojectforlocalpath.aspx)：

```
var workspace = pendingCheckin.GetWorkspace();
var pendingChange = pendingCheckin.GetAllPendingChanges().FirstOrDefault();
if(pendingChange != null) {
    return workspace.GetTeamProjectForLocalPath(pendingChange.LocalItem);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:17:42.510

您可以使用它访问它

```
 BuildDetail.TeamProject 
```

在以下位置找到程序集：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Build.Client.dll

# mysql - WSO2 ESB - XML 到 MySQL 数据库

> ID：15948528
> 
> 赞同：0
> 
> 时间：2013-04-11T12:14:53.423
> 
> 标签：mysql, xml, wso2, esb

我需要一个问题的解决方案：我刚刚为 WSO2 ESB 尝试了这个示例，它正在工作： [http ://wso2.org/library/articles/2011/01/wso2-esb-example-file-processing](http://wso2.org/library/articles/2011/01/wso2-esb-example-file-processing)

但我喜欢使用 XML 文件作为输入并将其写入 MySQL-DB。XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
  <Name>word</Name>
  <Surname>processor</Surname>
  <Phone>12333</Phone>
</soapenv:Body>
</soapenv:Envelope> 
```

如果我把它放入我的“in”文件夹，文件将被移动到“out”文件夹，但没有任何内容写入数据库。没有错误信息。

我的代理服务：

```
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="FileProxy" transports="vfs" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full"/>
         <clone>
            <target sequence="fileWriteSequence"/>
            <target sequence="databaseSequence"/>
         </clone>
      </inSequence>
   </target>
   <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
   <parameter name="transport.PollInterval">15</parameter>
   <parameter name="transport.vfs.MoveAfterProcess">C:/wso2esb/testordner/out</parameter>
   <parameter name="transport.vfs.FileURI">C:/wso2esb/testordner/in</parameter>
   <parameter name="transport.vfs.MoveAfterFailure">C:/wso2esb/testordner/error</parameter>
   <parameter name="transport.vfs.FileNamePattern">.*.xml</parameter>
   <parameter name="transport.vfs.ContentType">text/xml</parameter>
   <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
   <description></description>
</proxy> 
```

还有我的序列：

```
 <?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse"
          name="databaseSequence"
          trace="enable"
          statistics="enable">
   <log level="full">
      <property name="sequence" value="before-smooks"/>
   </log>
   <smooks config-key="smooks">
      <input type="xml"/>
      <output type="xml"/>
   </smooks>
   <log level="full">
      <property name="sequence" value="after-smooks"/>
   </log>
   <log level="full">
      <property xmlns:ns="http://org.apache.synapse/xsd"
                name="name"
                expression="//csv-record/name/text()"/>
      <property xmlns:ns="http://org.apache.synapse/xsd"
                name="surname"
                expression="//csv-record/surname/text()"/>
      <property name="phone" value="//csv-record/phone/text()"/>
   </log>
   <iterate xmlns:ns2="http://org.apache.synapse/xsd"
            xmlns:ns="http://org.apache.synapse/xsd"
            xmlns:sec="http://secservice.samples.esb.wso2.org"
            expression="//csv-set/csv-record">
      <target>
         <sequence>
            <log level="full">
               <property name="State" value="Iteration"/>
            </log>
            <log level="full" category="DEBUG"/>
            <dbreport>
               <connection>
                  <pool>
                     <password>passwort</password>
                     <user>esb</user>
                     <url>jdbc:mysql://localhost:3306/</url>
                     <driver>com.mysql.jdbc.Driver</driver>
                  </pool>
               </connection>
               <statement>
                  <sql>insert into info.info (name, surname, phone) values (?, ?, ?)</sql>
                  <parameter expression="//csv-record/name/text()" type="VARCHAR"/>
                  <parameter expression="//csv-record/surname/text()" type="VARCHAR"/>
                  <parameter expression="//csv-record/phone/text()" type="VARCHAR"/>
               </statement>
            </dbreport>
         </sequence>
      </target>
   </iterate>
   <log level="full" category="DEBUG"/>
</sequence> 
```

我认为这将是一个简单的问题，但我无法得到它......就像我说的，它适用于普通的文本文件，但不适用于 XML。我尝试了不同的想法，不知道我还能尝试什么……有人知道我的错误是什么吗？

更新：

来自控制台的日志：

```
[2013-04-12 09:35:55,687]  INFO - DBReportMediator Successfully created data source for jdbc:mysql://localhost:3306/.
[2013-04-12 09:36:10,170]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPAction: urn:mediate, MessageID: urn:uuid:
2CBD1753113A1373101365752170177, Direction: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope x
mlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body>
  <Name>word</Name>
  <Surname>processor</Surname>
  <Phone>12333</Phone>
</soapenv:Body></soapenv:Envelope>
[2013-04-12 09:36:10,175]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPAction: urn:mediate, MessageID: urn:uuid:
a9252cd8-fe73-4e85-9f41-0842872d3a73, Direction: request, sequence = before-smooks, Envelope: <?xml version='1.0' encodi
ng='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body>
  <Name>word</Name>
  <Surname>processor</Surname>
  <Phone>12333</Phone>
</soapenv:Body></soapenv:Envelope>
[2013-04-12 09:36:10,178]  INFO - LogMediator sequence = fileWriteSequence
[2013-04-12 09:36:10,246]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPAction: urn:mediate, MessageID: urn:uuid:
a9252cd8-fe73-4e85-9f41-0842872d3a73, Direction: request, sequence = after-smooks, Envelope: <?xml version='1.0' encodin
g='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><csv-set/></soapenv
:Body></soapenv:Envelope>
[2013-04-12 09:36:10,249]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPAction: urn:mediate, MessageID: urn:uuid:
a9252cd8-fe73-4e85-9f41-0842872d3a73, Direction: request, name = , surname = , phone = //csv-record/phone/text(), Envelo
pe: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><s
oapenv:Body><csv-set/></soapenv:Body></soapenv:Envelope>
[2013-04-12 09:36:11,254]  WARN - TimeoutHandler Expiring message ID : urn:uuid:4c422f4e-aed5-4eaa-ad9b-e5407db20562; dr
opping message after global timeout of : 120 seconds 
```

fileWriteSequence 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse"
          name="fileWriteSequence"
          trace="enable"
          statistics="enable">
   <log level="custom">
      <property name="sequence" value="fileWriteSequence"/>
   </log>
   <property xmlns:ns2="http://org.apache.synapse/xsd"
             xmlns:ns="http://org.apache.synapse/xsd"
             name="transport.vfs.ReplyFileName"
             expression="fn:concat(fn:substring-after(get-property('MessageID'), 'urn:uuid:'), '.xml')"
             scope="transport"
             type="STRING"/>
   <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
   <send>
      <endpoint name="FileEpr">
         <address uri="vfs:C:/wso2esb/testordner/out"/>
      </endpoint>
   </send>
</sequence> 
```

烟雾配置：

```
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.0.xsd">

  <!--Configure the CSVParser to parse the message into a stream of SAX events. -->
  <resource-config selector="org.xml.sax.driver">
    <resource>org.milyn.csv.CSVParser</resource>
    <param name="fields" type="string-list">name,surname,phone</param>
  </resource-config>

</smooks-resource-list> 
```

我还更改了上面databaseSequence的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:24:50.713

您的代理服务看起来不错。但我几乎没有什么顾虑。

1.  为什么将 sql 查询作为 CDATA。请在[此处](http://docs.wso2.org/wiki/display/ESB451/DBReport+Mediator)查看可用示例。
2.  您没有在连接 url 中提到数据库名称。可能这不是问题，因为您在 sql 查询中使用了 database.table 格式。
3.  修复 1 和 2 后，如果问题仍然存在，请尝试仅使用一个序列的代理。即暂时避免文件写入序列，仅尝试使用 dbwrite 序列。

您还可以记录要在 DBReport 中介之前插入的条目。即在smooks 调解员之后，放置一个日志调解员并记录姓名、姓氏和电话。这将确保您尝试插入从消息中正确提取的值。

# java - ObjectOutputStream 最大缓冲区大小

> ID：15948531
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:14:57.757
> 
> 标签：java, networking

我有一个客户端-服务器应用程序。客户端和服务器端都在使用 java.net API。相反，`java.net.ObjectOutputStream`并且`java.net.ObjectInputStream`同时，要具体。

我试图找出`ObjectOutputStream.write`当底层 TCP 层缓冲区已满时的行为方式。我想写尽可能多的数据。但目前我担心我可能最终不会抽取太多数据。因此，为了在编写频繁且庞大的数据之前确认这一点，如果文档可以提及这方面的任何内容，那将是有帮助的。

我应该写多少。到什么时候我才能继续写。当它变得太多时，我将如何知道？

任何知道如何或一个好的指针？

我假设最大带宽将取决于底层物理网络的功效。问候， 马维亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:20:33.720

与所有其他流和写入器一样，ObjectOutputStream 在底层套接字发送缓冲区已满时阻塞。不存在“太多”、“抽取太多数据”等问题，更不用说*不*“抽取太多数据”，这是您自称担心的问题。

不是一个真正的问题。

# c# - 触摸屏上的 Windows 会通过触摸手指来模拟 MouseDown 事件吗？

> ID：15948533
> 
> 赞同：0
> 
> 时间：2013-04-11T12:15:02.803
> 
> 标签：c#, wpf, touch, mouseevent, sensors

我正在编写一个需要支持触摸屏的应用程序。现在我使用鼠标调试应用程序。请指教。我是否需要覆盖所有消息，例如`TouchDown`响应触摸。还是足够我处理`MouseDown`？触摸屏上的 Windows 会通过触摸手指来模拟`MouseDown`事件吗？

ps 不幸的是，我现在没有要测试的触摸屏设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:18:10.003

我在带触摸屏的 Win7 x64 上工作的经验是，触摸屏确实模拟了 MouseDown 事件。

# javascript - 如何使用javascript中的for循环解析这个json中的每个值

> ID：15948537
> 
> 赞同：0
> 
> 时间：2013-04-11T12:15:28.403
> 
> 标签：javascript, json

我想我们如何使用 javacsript 解析这样的 json，直到使用 for 循环的最后一个元素我已经完成了这个，但是我在第一个 lart 和 2 中得到的结果是 [object,object],[object,object]在第二个和第三个中的 [object,object] 如何警告 json 数组中的每个值

```
[
    {
        "location": [
            {
                "building": [
                    "Default Building"
                ],
                "name": "Default Location"
            }
        ],
        "name": "Default Organization"
    },
    {
        "location": [
            {
                "building": [
                    "test_loc1_building1",
                    "test_loc1_building2"
                ],
                "name": "test location1"
            },
            {
                "building": [
                    "test_loc2_building2"
                ],
                "name": "test location2"
            }
        ],
        "name": "test Organization"
    }
] 
```

我一直在工作的代码是

```
function orgname()
{
    var json = <?php echo $response ?>;
    alert(json);
    alert(json.length);
    for(var i=0; i<json.length; i++)
    {
        var item = json[i];
        alert(item);   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:25:22.460

根据您的代码，我判断您将其直接作为 JavaScript 对象插入。我假设，您已经`json_encode()`在`$response`.

然后，要实际遍历整个对象，我建议采用这样的递归方法：

```
var json = <?php echo $response; ?>;

function traverse( obj, cb ) {
  if( Array.isArray( obj ) ) {
    // array in here
    for( var i=0; i<obj.length; i++ ) {
       traverse( obj[i], cb );
    }
  } else if ( typeof obj == 'Object' {
    // object in here
    for( var i in obj ) {
      if( obj.hasOwnProperty( i ) ) {
        traverse( obj[i], cb );
      }
    }
  } else {
    // literal value in here
    cb( obj );
  }

}

traverse( json, alert ); 
```

根据您的实际需要，您可能希望保留键或在其他点使用回调。但一般方法应该看起来相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:21:56.447

你的 JSON 对象很奇怪。经过一些重新格式化后，您的 JSON 如下所示：

```
[
    {
        "location" :
            [
                {
                    "building" : [ "Default Building" ],
                    "name" : "Default Location"
                }
            ],
        "name" : "Default Organization"
    },
    {
        "location" :
            [
                {
                    "building" : [ "test_loc1_building1",  "test_loc1_building2"  ],
                    "name" : "test location1"
                },
                {
                    "building" : [ "test_loc2_building2" ],
                    "name" : "test location2"
                }
            ],
        "name" : "test Organization"
    }
]; 
```

外部数组中只有两个对象（位置？）。其中，第二个对象包含两座建筑物。您将需要双嵌套循环或递归来遍历所有建筑物。

```
for (var i=0; i<json.length; i++)
{
    var item = json[i];
    for (var j = 0; j < item.location.length; j++)
    {
        var loc = item.location[j];
        // do stuff here with item and/or loc.
    }
} 
```

# soapui - 我在哪里可以看到soapUI添加到我的请求中的安全标头

> ID：15948545
> 
> 赞同：13
> 
> 时间：2013-04-11T12:15:49.120
> 
> 标签：soapui

我创建了一个带有 ws - security 的轴 2 Web 服务（由 armart 模块启用）。

我想在soapUi 4.5.1 中测试它。并且soapUI向我提出的要求如下

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:nlo="http://nlo">
   <soapenv:Header/>
   <soapenv:Body>
      <nlo:echo>

         <nlo:arg>echoo</nlo:arg>
      </nlo:echo>
   </soapenv:Body>
</soapenv:Envelope> 
```

但是当然，当我以这种方式对其进行测试时，它给了我：缺少安全标头

所以我点击 Show Project View - 点击 Outgoing WS-Security Configuration；然后我添加 WS Security Entry - UserName 并输入用户名、密码，对于 PasswordType，我选择`PasswordText`.

然后我再次回到我的请求——它与soapUI 之前向我提出的请求相同，但这次我单击 AUT 部分并为 Outgoing WSS 我选择我的配置。一切正常。但我看不到 SoapUI 添加的安全标头。（既不在 XML 部分，也不在 RAW 部分）。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-23T10:14:57.653

您可以在 Raw 部分查看 WS-Security 标头块，但在前往之前进行一些更改并重新发送请求。![在此处输入图像描述](https://i.stack.imgur.com/GWCu0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T19:22:36.130

尝试使用 Wireshark 捕获整个请求。

我遇到了同样的麻烦。因此，通过[Wireshark](https://www.wireshark.org/)捕获网络流量似乎是下一个最佳方法。

只需继续 ping 您正在向其发送 SOAP 请求的服务器，以便获得其 IP 地址。

然后在发送有问题的 SOAP 请求时使用 Wireshark 运行捕获，并按目标 IP 过滤数据包。过滤器表达式将如下所示：
`ip.dst == [your server IP]`.

它应该已经捕获了协议类型为 HTTP/XML 的数据包。您可以在底部的*eXtensivle Markup Language*选项卡下找到您的请求。

PS。我意识到这篇文章已经有一年左右的历史了，但我想给其他任何人一个提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T15:36:45.367

WS-Security 标头块在 XML 部分中不可见，但在运行测试后它应该在 Raw 选项卡中可见。如果您重新运行测试，它仍然不存在吗？

您还可以尝试使用[Fiddler](http://fiddler2.com/)或[Request Bin](http://requestb.in/)来捕获发送到网络上的实际消息。

# c++ - 调整视频捕获的分辨率

> ID：15948552
> 
> 赞同：1
> 
> 时间：2013-04-11T12:16:02.457
> 
> 标签：c++, opencv, image-processing

我有一个 1280x1024 的视频输入设备，我写了一个小的 opencv 项目来从中捕获图像，但我只得到一个 640x480 的图像？？任何人都知道我为什么会这样，这是我的代码：

```
 #include <opencv2\highgui\highgui.hpp>
 #include <opencv2\core\core.hpp>
 #include <opencv2\opencv.hpp>

using namespace std;

 int main(){
cv::VideoCapture cap(2);
cv::Mat  frame;
int key = 0;
while(key != 27){
    cap.read(frame);

    cv::imshow("test",frame);
    key = cv::waitKey(10);
}
return 0 ;} 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:24:38.827

截至 OpenCV 的最新版本：

```
cap.set(CV_CAP_PROP_FRAME_WIDTH, 1280);
cap.set(CV_CAP_PROP_FRAME_HEIGHT, 1024); 
```

# netbeans - 在 Netbeans 7.2 中禁用模板的编码警告

> ID：15948553
> 
> 赞同：4
> 
> 时间：2013-04-11T12:16:02.963
> 
> 标签：netbeans, encoding, smarty, typo3, fluid

我经常在 Netbeans 7.2 中使用模板文件： 在 TYPO3 中，使用基于 HTML 和 Fluid 的模板；在 OXID eSales 中，带有 Smarty 模板。

如果模板文件包含如下所示的**字符集变量**，则 Netbeans 每次打开或保存文件时都会发出警告。
`<meta http-equiv="Content-Type" content="text/html; charset=[{$oView->getCharSet()}]">`

警告：

> > ```
> > The encoding [{$oView->getCharSet()}] specified in meta tag of the 
> > document base.tpl is invalid. Do you want to load the file using 
> > UTF-8 encoding?
> >                                                             [Yes] [No] 
> > ```

我怎样才能关闭它？
（作为一种解决方法，我通常替换`[{$oView->getCharSet()}]`为`utf-8`。但它很难看。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:50:34.473

可以使用 Netbeans 在某种程度上配置 HTML 验证警告`hints`。我无法验证这一点（因为我没有最新版本），但如果您的 IDE 版本没有提供关闭警告的选项，也许您可​​以检查最新版本。

去`Tools -> Options -> Editor -> Hints -> HTML Validator`

从 Build 7.1 开始，Netbeans 中添加了一个名为`Encoding`问题的新类别。我认为您可能会找到一个选项来启用/禁用控制此 HTML 编码警告的提示。

参考：
[HTML 文件上的错误编码警告](https://netbeans.org/bugzilla/show_bug.cgi?id=197935#c11)
不是您所面临的确切错误，但它引用了相关的验证提示：

> 编辑器选项中有一些新的 HTML 语言提示选项。Html Validator 类别有三个新的子类别 - 编码问题、标签匹配问题和其他。

![Netbeans 中的 HTML 提示](https://i.stack.imgur.com/IKUgC.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T12:21:06.500

我在 7.1 和 7.0.1 上都试过了，得到了相同的结果。似乎在重新启动 NetBeans 之前更改字符集编码不起作用。

```
1\. Start NetBeans
2\. Create a project by default
It means project encoding is set to "UTF-8" by default

3\. Create a HTML file from File>New File... and Other>HTML File
The project encoding is set to UTF-8, so created file also should be UTF-8
encoding. -> OK

<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <div>TODO write content</div>
</body>
</html> 
```

1.  将“UTF-8”修改为“Shift_JIS”或其他编码，如

    ```
    <meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">

    <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> 
    ```

    黄线显示​​在线路上，它抱怨

    警告 内部编码声明“euc-jp”与文档的实际编码（“utf-8”）不一致。从第 9 行第 9 列开始；到第 9 行第 76 列（规则类别：所有其他）newhtml.html
    /home/mkatakai/NetBeansProjects/WebApplication7/web/newhtml.html:9

2.  打开文件的属性，它仍然显示“UTF-8”（截图）

3.  关闭文件并再次打开它，仍然显示警告，文件的项目对话框仍然说它是 UTF-8
4.  关闭项目并再次打开它，但是仍然显示警告，文件的项目对话框仍然说它是 UTF-8
5.  退出 NetBeans 并重新启动它，最后警告消失和项目对话框说它是 EUC-JP（屏幕截图）

# macos - 拉普苹果事件不起作用

> ID：15948556
> 
> 赞同：0
> 
> 时间：2013-04-11T12:16:13.607
> 
> 标签：macos, macos-carbon, appleevents

我编写了一个发送“rapp”Apple 事件的程序。从调试控制台我可以看到目标应用程序接收到事件并且参数看起来不错。但是程序什么也没做

```
 AppleEvent e;
        AEBuildError be;
        ProcessSerialNumber psn;
        OSStatus result = GetProcessForPID(81188, &psn);
        result = AEBuildAppleEvent(kCoreEventClass,
                          kAEReopenApplication,
                          typeProcessSerialNumber,
                          &psn,
                          sizeof(ProcessSerialNumber),
                          kAutoGenerateReturnID,
                          kAnyTransactionID,
                          &e,
                          &be,
                          "~'frnt':bool(@)", 0);
        if(result == 0) {
            result = AESendMessage(&e, NULL, kAENoReply, 0);
            int x=0;
        } 
```

这是确保收到事件的控制台输出

```
------oo start of event oo------
aevt('aevt'\'rapp' transactionID=0 sourcePSN=[0x0,d72d72 "smart_back_test_app"] timeout=0 eventSource=3 sourceUID=1992786101 sourceGID=593637566 sourceEUID=1992786101 sourceEGID=593637566 sourcePID=81994 auditToken=[1992786101,1992786101,593637566,1992786101,593637566,81994,100005,81994]{ ~'frnt':bool(0) })
------oo  end of event  oo------ 
```

我究竟做错了什么？

# android - 如何快速加载图像缩略图android？

> ID：15948557
> 
> 赞同：0
> 
> 时间：2013-04-11T12:16:18.963
> 
> 标签：android, caching, thumbnails

我的应用程序中有一个自定义画廊，我正在使用我自己的缩略图目录。在这里，我缓存图像缩略图并将其存储在我自己的 sdcard 目录中，并通过从自定义图像目录加载缩略图来显示缩略图。它运作良好，但如果它有更多图片，则加载时间过长。有什么方法可以更快地加载它而且我不使用android的默认缩略图目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:26:34.243

我猜你正在将它们加载到主线程上。尝试使用 AsyncTask 加载每个缩略图。首先检查缩略图是否被缓存并返回。如果没有 - 下载、缓存并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:19:19.613

您也可以尝试[ImageLoader Library](http://androidimageloader.com/)。

它使用两级内存/SD 卡缓存策略透明地缓存图像。图像在后台线程中获取，使您的 UI 保持响应。

还有很棒的文档和演示应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:30:52.687

您是否尝试过使用[Smart Image View](http://loopj.com/android-smart-image-view/)之类的东西？

它已经缓存了图像并保存到外部（例如，如果您尝试从服务器获取图像）。

它还使用线程池执行器，因此您不会遇到 asynctask 的问题（如 [这里](https://stackoverflow.com/a/4072832/2156661)）。

但是智能图像视图只是一个例子，那里有很多项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T07:11:54.160

您可以根据需要使用 AsyncTask 更快地加载动态可绘制图像。

# svg - NVD3.js - lineplusbar 的 x 轴类别未正确显示

> ID：15948563
> 
> 赞同：0
> 
> 时间：2013-04-11T12:16:40.187
> 
> 标签：svg, d3.js, nvd3.js

我希望轴读取“1x”、“2x”、3x”。在其他图形类型中，它正确地从值中获取 x 值，但这似乎不同。我知道我是否注释掉

```
.x(function(d,i) { return i }); 
```

图表的显示不再正常工作。我可以添加

```
chart.xAxis.tickFormat(function(d) { return d3.format(',f')(d+1)+"x" }); 
```

但是，如果 x 轴是其他字符串，那将是一种作弊。

代码：[https ://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html](https://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html)

示例：[http ://tvinci.github.io/webs/lineplusbar.html](http://tvinci.github.io/webs/lineplusbar.html)

页面代码：

```
 nv.addGraph(function() {
     //var testdata = exampleData();
     var chart = nv.models.linePlusBarChart()
           .margin({top: 30, right: 60, bottom: 50, left: 70})
           //if this is commented out, the graph does not display properly
           .x(function(d,i) { return i });
     //this is the cheat I use to show the correct X axis
     //chart.xAxis.tickFormat(function(d) { return d3.format(',f')(d+1)+"x" });
     chart.y1Axis.tickFormat(d3.format(',f'));
     chart.y2Axis.tickFormat(d3.format(',f'));

     //forces the chart to start at 0
     // if you set this to [0,100] and your data's domain is -10 to 110, the domain will be [-10,110]
     chart.lines.forceY([0]);

     d3.select('#chart svg').datum(eval("overview_data")).transition().duration(500).call(chart);
      d3.selectAll("rect.nv-bar").style("fill", function(d, i){return i > 50 ? "red":"blue";});
     nv.utils.windowResize(chart.update); 
```

数据：

```
var overview_data=[
     { "key" : "Achieved" , "bar": true,"values" : [ [ "1x" , 30] , [ "2x" , 70] , [ "3x" , 200] ]} ,
     { "key" : "Required" , "values" : [ [ "1x" , 50] , [ "2x" , 100] , [ "3x" , 150] ]}
    ].map(function(series) {series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });return series;}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:31:50.483

我看到的唯一技巧是在不需要时不要使用 d3.format() 。只需这样做：

```
 chart.xAxis.tickFormat(function(d) { return (d+1)+"x" }); 
```

jsFiddle：http: [//jsfiddle.net/chrisJamesC/RqvJR/](http://jsfiddle.net/chrisJamesC/RqvJR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:30:03.803

@chris - 那是我的作弊。:) 如果 x 值更改为“星期一”之类的内容，它将不起作用。

我能够弄清楚我可以将索引提供给我的数据对象以提取正确的值。

```
chart.xAxis.tickFormat(function(d) {return overview_data[0].values[d].x; }); 
```

# elasticsearch - 在单个查询中同时使用缺失和存在过滤器

> ID：15948566
> 
> 赞同：13
> 
> 时间：2013-04-11T12:16:51.400
> 
> 标签：elasticsearch

我正在尝试获取一个可以返回满足过滤条件的 json 的查询。我试图得到一个响应，其中包含一个名为“test1”的字段，它也应该缺少一个字段“test2”，我试过查询

```
{
 "query": {
  "filtered": {
  "query": {
    "match_all": {}
   },
      "filter": {
         "missing": {
        "field": "test2"
       },
       "exists": {
         "field": "test1"
       }
      }
    }
  } 
} 
```

上面的查询返回所有具有字段“test1”的字段，它还返回缺少字段“test2”的提要，我试图缩小响应范围，因为我只希望提要满足这两个条件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T12:23:02.293

[您可以使用bool filter](http://www.elasticsearch.org/guide/reference/query-dsl/bool-filter/)组合两个或多个过滤器：

```
{
  "query": {
    "filtered": {
      "query": {
        "match_all": {}
      },
      "filter": {
        "bool": {
          "must": [{
            "missing": {
              "field": "test2"
            }
          }, {
            "exists": {
              "field": "test1"
            }
          }]
        }
      }
    }
  }
} 
```

# mysql - MySQL Join 与空计数

> ID：15948567
> 
> 赞同：0
> 
> 时间：2013-04-11T12:16:51.700
> 
> 标签：mysql, join

我想计算桌子库存中的所有物品，也包括空物品。但我只能显示完整的，我尝试了几个 tuts，但它不起作用。

餐桌产品：

*   ID
*   地位

表库存：

*   ID
*   pid（产品编号）
*   地位

MySQL 查询：

```
SELECT p.id , COUNT( p.id ) AS pcount
FROM products p
LEFT JOIN stock s ON p.id = s.pid
WHERE s.status=1
  AND p.status=1
GROUP BY p.id    
ORDER BY pcount 
```

逻辑可能有问题，因为在空库存上 s.status 永远不会是 1 ......但不要落后......我需要 OUTER JOIN 或类似的东西吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:18:59.963

如果您只需要计算每个产品的库存行数，试试这个：

```
SELECT p.id , COUNT( s.id ) AS pcount
FROM products p
LEFT JOIN stock s ON p.id = s.pid
WHERE s.status=1
AND p.status=1
GROUP BY p.id    
ORDER BY pcount 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:34:46.837

通过添加您的 WHERE s.Status=1 将您的查询变成一个 INNER JOIN。将该条件移至 LEFT JOIN 部分

```
SELECT 
      p.id, 
      COUNT( s.pid ) AS pcount
   FROM 
      products p
         LEFT JOIN stock s 
            ON p.id = s.pid
           AND s.status = 1
   WHERE 
      p.status = 1
   GROUP BY 
      p.id    
   ORDER BY 
      pcount 
```

# android - 我想在后台运行我的应用程序并在我说出一些关键字（如应用程序名称）时启动它

> ID：15948574
> 
> 赞同：1
> 
> 时间：2013-04-11T12:17:11.817
> 
> 标签：android, android-asynctask, android-service

我已经搜索了很多，但没有得到任何有趣的东西。

我想要做两件事，如下所述：

1.App应该在后台运行。

2.应该听用户说什么，如果用户说像“android”这个名字，应用程序应该进入前台并正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:48:33.890

我已经使用 service 和 Alarammanager 完成了它，当我说一些像“android”这样的关键字时，它会启动 Main Activity。

在后台 RecognitionListener 在 Service 的帮助下运行

# php - 确定检查 IS_IDENTITY 和/或 IN_PRIMARY_KEY 的表字段？

> ID：15948577
> 
> 赞同：0
> 
> 时间：2013-04-11T12:17:12.000
> 
> 标签：php, codeigniter, azure, azure-sql-database

我正在尝试确定已被标识为（或其中的一部分）给定表名的主键的表列。

我一直在玩 INFORMATION_SCHEMA 和其中的数据，但似乎与这些表列无关。

也一直在浏览这个网站：

```
http://msdn.microsoft.com/en-us/library/aa933201%28v=sql.80%29.aspx 
```

但到目前为止没有太多运气。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:31:47.410

我实际上在这里找到了我想要的[东西](http://coding-in.net/445/)

# sql - 用于一对一的非识别关系

> ID：15948580
> 
> 赞同：0
> 
> 时间：2013-04-11T12:17:28.350
> 
> 标签：sql

关于识别与非识别关系存在许多问题，但是，它们都集中在一对多关系上。以下是我目前的理解，如有错误请指正。

如果 parent 的 key 是 child PK 的一部分，则它是一个标识关系。这意味着子表中的一条记录不能没有父表中的对应记录而存在（一本书没有作者就不能存在），并且需要父表的PK来唯一标识子表中的一条记录（显然，因为它是部分子PK）。

一对一的识别关系是相似的。一个示例是传输表、自动传输表和手动传输表，其中自动传输表和手动传输表都与传输具有一对一的识别关系。每一个automatic_transmissions 表和manual_transmissions 表都必须有一个关联的传输，传输PK 可以唯一标识automatic_transmissions 表或manual_transmissions 表中的任何关联记录。使用这种方法是因为 automatic_transmissions 表和 manual_transmissions 表都共享许多属性，但每个都有自己特定的属性。

我到现在还好吗？

现在采取一对一的非识别关系。什么，没有PK的桌子？为什么需要这样一张桌子？有哪些例子？它是如何使用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:30:48.973

假设您有一张汽车表和一张变速器表。每辆车都有一个变速器。在给定的时间，每个变速器只在一辆车上。然而，相同的变速器并不总是留在同一辆车上。有时，汽车的变速箱坏了，必须更换。有时，变速箱会从一辆破旧的汽车中取出并放入另一辆汽车中。

汽车和变速箱之间存在一对一的关系。然而，这是一种非识别关系，因为孩子的（传输）身份不依赖于父母（汽车）。

这些都不意味着“没有 PK 的表”。car 和 transmissions 表都有主键。只是汽车的PK不属于变速箱的PK。

# vim - 我可以用 vim 创建无限标记吗？

> ID：15948582
> 
> 赞同：6
> 
> 时间：2013-04-11T12:17:33.640
> 
> 标签：vim

我希望能够为已经存在的*单字母标记设置额外的标记*。因此，我可以解决我目前面临的两个问题：

1.  标记是在脚本中设置的，我不想破坏脚本用户已经设置的标记

2.  我可以设置无限数量的标记，这样我就不必计算它们（我将它们命名为`"script_mrk_" . s:mark_count`）。

所以，如果表示为函数调用，我可能正在寻找一些东西

```
setPrivateMark(l:mark_name, l:line, l:pos) 
```

和

```
let line_pos = getPrivateMark(l:mark_name) 
```

当然，解决方案应该能够抵抗在使用`setPrivateMark`和之前设置标记之后对标记上方缓冲区的更改`getPrivateMark(...)`。

有这样的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:40:49.493

Vim 仅在更改时更新其内置标记的位置；如果您需要该功能，则必须使用这些功能，并且仅限于现有标记的数量。

没有办法解决这个问题。对于简单的用户编辑，您可以挂钩`CursorMovedI`事件并调整您记录的位置，但无法挂钩 Ex 命令，例如`:append`.

如果您需要为插件设置几个标记，最好允许用户配置脚本使用的标记（例如通过`g:MyPlugin_UseMarks`变量）；几乎没有人一直使用所有的标记，但是不同的人有不同的偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:21:22.420

无限标记我不知道，但你可以创建一个字典类型，键是你的“标记”名称，值是光标的位置。

位置可以通过

```
getpos() and setpos() 
```

或者你想要实际的代码？

# jsf - 每当加载 Facelet 页面时，在支持 bean 中运行代码块

> ID：15948587
> 
> 赞同：1
> 
> 时间：2013-04-11T12:17:52.413
> 
> 标签：jsf, session, jsf-2, facelets

我正在使用 JSF 建立一个网站。我想在每次加载 Facelet 页面时运行一段代码，我需要使用会话范围支持 bean。我尝试使用支持 bean 的构造函数来运行代码块，但它仅第一次运行，我使用的是以下代码

```
<c:forEach var="p" items="#{statusBean.statusList}"
                        varStatus="loop"> 
```

由于`statusBean`是会话范围，因此它在页面加载时第一次运行构造函数。

是否有任何其他替代方法可以在页面加载时运行代码块，而不仅仅是第一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:12:37.190

有不同的方法可以实现这一目标。首先，您必须定义“何时加载 Facelets 页面”的含义。我假设您的意思是在页面呈现之前。

**预渲染视图事件**

对于 JSF 2.x，最简单的方法是为`PreRenderViewEvent`. 为此，您首先需要`f:event`在页面中添加一个标签，如下所示：

```
<f:event type="javax.faces.event.PreRenderViewEvent"
    listener="#{bean.preRenderView}"/> 
```

的监听器`PreRenderViewEvent`必须在视图根 ( `f:view`) 上注册。因此`f:event`，`f:view`如果您不使用`f:view`. with 模板`f:event`必须放在`ui:define`保证相同的 a 中。

`listener`在渲染视图之前调用属性中引用的侦听器方法。该方法可能如下所示：

```
public void preRenderView(ComponentSystemEvent ev) {
    //Do something
} 
```

**@PreRenderView**

如果您将 CDI 与 MyFaces CODI 一起使用，您可以简单地注释托管 bean 方法，`@PreRenderView`它会在页面呈现之前被调用。

**查看操作**

使用 JSF 2.2（尚未最终版本），您可以使用视图操作在生命周期的不同阶段调用方法。有关详细信息，请参阅我[关于 JSF 2.2 查看操作的 JSFlive 帖子](http://jsflive.wordpress.com/2013/03/22/jsf22-view-actions/)。

[您可以在我的GitHub 存储库](https://github.com/jsflive/jsf-get-examples)中找到示例`PreRenderViewEvent`并查看操作

# java - HashMap 一个包含 ArrayList 的函数

> ID：15948597
> 
> 赞同：0
> 
> 时间：2013-04-11T12:18:25.753
> 
> 标签：java, hashmap

如何将`sheetData`下面的函数放入 Hashmap？

私人静态无效showExcelData（列表sheetData）{

```
for (int i = 0; i < sheetData.size(); i++) {
  List list = (List) sheetData.get(i);
    for (int j = 0; j < list.size(); j++) {
      Cell cell = (Cell) list.get(j);
      if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC)
        System.out.print(cell.getNumericCellValue());
      else if (cell.getCellType() == Cell.CELL_TYPE_STRING)
        System.out.print(cell.getRichStringCellValue());
      else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN)
        System.out.print(cell.getBooleanCellValue());
    }
    if (j < list.size() - 1) {
      System.out.print(", ");
    }
}
  System.out.println("");
} 
```

}

程序正在从 excel 文件中读取数据！

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;

public class readexcel{

@SuppressWarnings({ "unchecked", "unchecked" })
public static void main(String[] args) throws Exception {

String filename = "C:\\Users\\xxxx\\Documents\\test5.xls";

List sheetData = new ArrayList();
FileInputStream fis = null;
try {

fis = new FileInputStream(filename);

HSSFWorkbook workbook = new HSSFWorkbook(fis);

HSSFSheet sheet = workbook.getSheetAt(0);

Iterator rows = sheet.rowIterator();
while (rows.hasNext()) {
HSSFRow row = (HSSFRow) rows.next();
Iterator cells = row.cellIterator();

List data = new ArrayList();
while (cells.hasNext()) {
HSSFCell cell = (HSSFCell) cells.next();
data.add(cell);
}

sheetData.add(data);
}
} catch (IOException e) {
e.printStackTrace();
} finally {
if (fis != null) {
fis.close();
}
}

showExcelData(sheetData);
}

private static void showExcelData(List sheetData) {

for (int i = 0; i < sheetData.size(); i++) {
List list = (List) sheetData.get(i);
for (int j = 0; j < list.size(); j++) {
Cell cell = (Cell) list.get(j);
if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
System.out.print(cell.getNumericCellValue());
} else if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
System.out.print(cell.getRichStringCellValue());
} else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
System.out.print(cell.getBooleanCellValue());
 }
if (j < list.size() - 1) {
System.out.print(", ");
}
}
System.out.println("");
 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:29:44.883

目前尚不清楚，但我认为您在问如何使用 Strategy 设计模式，所以您使用 a`Map`而不是`if`.. `else if`。

所以你需要

1.  编写表示抽象操作的接口或抽象基类。
2.  编写类型到操作的映射（`Map`从单元类型到操作。
3.  更改您的`showExcelData`方法以使用该映射来查找要使用的操作，然后委托给该操作。

但我不会为你编写代码，因为这不是代码编写服务。

# java - ClassFormatError：类文件 javax/mail/MessagingException 中非本机或抽象方法中的缺失代码属性

> ID：15948598
> 
> 赞同：20
> 
> 时间：2013-04-11T12:18:30.610
> 
> 标签：java, spring, jakarta-mail, javabeans, classformaterror

`ClassFormatError`使用 javaMail api 在我的 spring mvc web 应用程序上发送电子邮件时，我感到很奇怪。

下面是我的 mail-cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="mailSource" class="org.springframework.mail.javamail.JavaMailSenderImpl">
        <property name="host" value="${mail.host}" />
        <property name="port" value="${mail.port}" />
        <property name="username" value="${mail.username}" />
        <property name="password" value="${mail.password}" />

        <property name="javaMailProperties">
            <props>
                <prop key="mail.smtp.auth">true</prop>
                <prop key="mail.smtp.starttls.enable">true</prop>
            </props>
        </property>
    </bean>

    <bean id="mailHelper" class="com.jr.freedom.util.MailHelper">
        <property name="mailSender" ref="mailSource"></property>
        <property name="messageText"
            value="Thank you for reigistering to the Freedom Application. Please copy and paste your activation code below \n\n"></property>
    </bean>
</beans> 
```

我的 POM 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>FreedomSpring</groupId>
    <artifactId>FreedomSpring</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <!-- specifiy which directory within the project hierarchy will be considered 
                        as the root directory from the generated war file -->
                    <warSourceDirectory>WebContent</warSourceDirectory>
                    <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <!-- Dependencies below for spring, hibernate, json etc -->
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>
        <dependency>
            <groupId>net.sf.json-lib</groupId>
            <artifactId>json-lib</artifactId>
            <version>2.4</version>
            <classifier>jdk15</classifier>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-mock</artifactId>
            <version>2.0.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.0</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>
        <dependency>
            <groupId>org.apache.shiro</groupId>
            <artifactId>shiro-spring</artifactId>
            <version>1.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.shiro</groupId>
            <artifactId>shiro-core</artifactId>
            <version>1.2.1</version>
        </dependency>

    </dependencies>

</project> 
```

全栈跟踪

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.jr.freedom.user.UserService com.jr.freedom.controllers.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.jr.freedom.user.UserService.setMailHelper(com.jr.freedom.util.MailHelper); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mailHelper' defined in class path resource [mail-cfg.xml]: Initialization of bean failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.jr.freedom.user.UserService com.jr.freedom.controllers.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.jr.freedom.user.UserService.setMailHelper(com.jr.freedom.util.MailHelper); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mailHelper' defined in class path resource [mail-cfg.xml]: Initialization of bean failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 39 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.jr.freedom.user.UserService.setMailHelper(com.jr.freedom.util.MailHelper); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mailHelper' defined in class path resource [mail-cfg.xml]: Initialization of bean failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 41 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.jr.freedom.user.UserService.setMailHelper(com.jr.freedom.util.MailHelper); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mailHelper' defined in class path resource [mail-cfg.xml]: Initialization of bean failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 52 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mailHelper' defined in class path resource [mail-cfg.xml]: Initialization of bean failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 54 more
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getDeclaredConstructors(Unknown Source)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:229)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:962)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:935)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 63 more 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T03:53:24.910

`javax:javaee-api`旨在编译，而不是运行，包括单元测试。如果您需要适合运行的类，请针对 Java EE 应用程序服务器运行。

此外，正确的名称是[**Java EE**](https://javaee.github.io/javaee-spec/)，而不是**JEE**。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-29T20:05:10.777

我遇到了类似的问题，...所以，当我运行 JUnit 时出现错误：

```
Absent Code attribute in method that is not native or abstract in class file javax/servlet/http/HttpServlet 
```

我解决它添加以下依赖项（第一个）：

```
<dependency>
    <groupId>org.glassfish.main.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2.2</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-11T13:05:25.700

当您的类路径中有多个冲突的 JAR 时，您通常会收到此错误。更常见的原因之一是如果您在类路径中包含应该由应用程序容器提供的工件。查看您的 POM，您有几个冗余和重叠的依赖项。删除这些：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.0.GA</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.3</version>
</dependency>
<dependency>
    <groupId>javaee</groupId>
    <artifactId>javaee-api</artifactId>
    <version>5</version>
</dependency> 
```

并将您的 Java EE 依赖项的范围更改为“提供”：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

最后，确保您正在部署到支持 Java EE 6 的 Web 服务器，并且该错误*应该*会消失。

**- - 编辑 - -**

刚刚注意到您正在编译到 Java 5 合规级别。改变这个：

```
<configuration>
    <source>1.5</source>
    <target>1.5</target>
</configuration> 
```

并将源值和目标值设为 1.6。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-23T10:22:34.390

在使用 jmock 和 maven 运行 junit 时，我也遇到了同样的异常：

> 构造函数中的异常：testDoExecute（java.lang.ClassFormatError：在 java.lang.ClassLoader.defineClass1（Native Method）的类文件 javax/servlet/http/Cookie 中的类文件 javax/servlet/http/Cookie 中的方法中的缺失代码属性不是本机或抽象的

*这是由于您的代码尝试访问的类在项目中使用的 javaee api jar 中不可用，因为您的代码针对不完整的类进行编译，例如 JavaEE6 Api，并且您的单元测试尝试访问不存在的代码。JUnit 将简单地失败并将测试标记为错误，打印类似于上述异常的内容。*

**可以通过添加 javax.servlet jar/dependency 或更改 javaee jar 版本来解决，如下所示：**

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency>

**OR** 

<dependency>
    <groupId>javax.j2ee</groupId>
    <artifactId>j2ee</artifactId>
    <version>1.4</version>
    <scope>provided</scope>
</dependency> 
```

**PS**：请添加与项目中其他现有 jar 兼容的 jar 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-30T21:25:27.670

我遇到了一个非常相似的问题，因为我`javax.validation`在 Spring Boot 模块所依赖的模块中添加了带有验证的类。我的 Spring Boot 模块没有 javaee 依赖项，添加明确排除它没有帮助。

解决方案是包含`spring-boot-starter-validation`对我的 Spring Boot 模块的依赖：

```
 <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency> 
```

我在这里找到了诀窍——https: [//nullbeans.com/how-to-use-java-bean-validation-in-spring-boot/](https://nullbeans.com/how-to-use-java-bean-validation-in-spring-boot/)。

# performance - High CPU usage with CSS rotation in Spotify

> ID：15948601
> 
> 赞同：4
> 
> 时间：2013-04-11T12:18:35.943
> 
> 标签：performance, css, spotify, css-animations

I need to use a rotation in our Spotify app. For this I use the following CSS:

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    @-webkit-keyframes rotate {
      from {
        -webkit-transform: rotate(0deg);
      }

      to {
        -webkit-transform: rotate(360deg);
      }
    }

    #entity {
      background-color: #000;
      width: 200px;
      height: 200px;
      -webkit-animation: rotate 3s infinite linear;
    }
  </style>
</head>
<body>
  <div id="entity"></div>
</body>
</html> 
```

In Chrome (26.0.1410.43) there is no big change in the CPU usage (~3%). But in Spotify 0.8.8.459.g4430eae7 I get a permanent CPU usage between 50% and 100%. Besides this code the same happens for Spotify's native load throbber. My computer is a MacBook Pro 2.5 GHz Intel Core i5, 8 GB 1600 Mhz DDR3 main memory, Mac OS 10.8.1\. How can I implement this rotation with less CPU usage?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:20:03.780

The version of Chromium in Spotify doesn't support hardware acceleration at all, therefore CSS transforms like that are going to incur a very significant overhead.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:21:18.420

Try to force hardware acceleration:

```
 #entity {
   -webkit-transform: translate3d(0, 0, 0);
 } 
```

Source: [http://davidwalsh.name/translate3d](http://davidwalsh.name/translate3d)

# sql - 汇总表，删除其数据，将汇总插入原始表

> ID：15948606
> 
> 赞同：0
> 
> 时间：2013-04-11T12:18:56.940
> 
> 标签：sql, sql-server

我知道这必须是一个简单的，但我想做的一切都是通用的，所以很难创建谷歌术语来获得我想要的！

基本上我有一个数据表和一个每 30 秒输入新数据的作业。此数据已按相应字段和日期分组。

由于有大量数据进入，其中大部分类似于表中已有的数据，我希望对表本身进行汇总。显然，一种方法是创建第二个表，每 30 秒执行以下操作：

```
==> group by on the primary table and insert into secondary table 
==> delete primary table 
==> insert secondary table into primary table 
==> delete secondary table 
```

现在我知道有一种更简单的方法可以做到这一点，而无需创建另一个表和一堆工作以及相关的开销，但我无法使用谷歌找到它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:39:25.107

你把你的数据和你的数据摘要放在同一个表中？您能否更准确地了解表格的结构？

我认为您应该有两个表（一个用于数据，另一个用于聚合）或在表中有一个“类型”字段，说明它是简单的数据行还是聚合的结果。

如果您选择使用“类型”字段，您可以执行类似的操作

```
INSERT into mytable (a,b,c,type)
    select count(a),MAX(b),c,'aggregate' from mytable 
    where type='line' GROUP BY c

delete from mytable where type='line' 
```

# iphone - EBCDIC 代码到 ASCII 的转换

> ID：15948609
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:19:08.220
> 
> 标签：iphone, ios

有什么方法可以将 EBCDIC 代码转换为 ASCII 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:06:12.287

iOS Foundation 框架中实际上有[EBCDIC 037的编码。](http://de.wikipedia.org/wiki/Extended_Binary_Coded_Decimals_Interchange_Code#EBCDIC_037)以下示例显示了如何使用它：

```
// EBCDIC string  "hello!"
char ebcdicString[] = { 0x88, 0x85, 0x93, 0x93, 0x96, 0x5A, 0 };

// Convert EBCDIC to NSString:
NSStringEncoding cp037 = CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingEBCDIC_CP037);
NSString *string = [[NSString alloc] initWithBytes:ebcdicString length:strlen(ebcdicString) encoding:cp037];

// Convert NSString to ASCII:
char asciiBuf[20];
if ([string getCString:asciiBuf maxLength:sizeof(asciiBuf) encoding:NSASCIIStringEncoding]) {
    printf("%s\n", asciiBuf);
} else {
    printf("conversion failed\n");
} 
```

# postgresql - 选择没有表格的硬编码值

> ID：15948614
> 
> 赞同：88
> 
> 时间：2013-04-11T12:19:39.327
> 
> 标签：postgresql

我需要运行一个选择而不实际连接到任何表。我只有一组需要循环的预定义硬编码值：

```
foo
bar
fooBar 
```

我想遍历这些值。我可以：

```
select 'foo', 'bar', 'fooBar'; 
```

但这会将其返回为一行：

```
 ?column? | ?column? | ?column? 
----------+----------+----------
 foo      | bar      | fooBar
(1 row) 
```

我正在使用 Postgresql。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-11T12:24:46.157

```
select a
from (
    values ('foo'), ('bar'), ('fooBar')
) s(a); 
```

[http://www.postgresql.org/docs/current/static/queries-values.html](http://www.postgresql.org/docs/current/static/queries-values.html)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-05-28T12:14:26.450

使用[`unnest()`](https://www.postgresql.org/docs/current/static/functions-array.html)

> 将数组扩展为一组行

```
select unnest(array['foo', 'bar', 'fooBar']); 
```

[演示](http://rextester.com/AZQUM38483)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-02-24T06:09:23.937

**Postgres SQL：**

对于作为单行和多列表示的静态数据输出，请使用以下查询：

```
select a,b,c from (values('foo','bar','fooBar')) s(a,b,c); 
```

此 SQL 查询的结果：

[![在此处输入图像描述](https://i.stack.imgur.com/36pKl.png)](https://i.stack.imgur.com/36pKl.png)

# knockout.js - 基于 observableArray 构造带有 optgroup 的淘汰赛 SELECT

> ID：15948619
> 
> 赞同：3
> 
> 时间：2013-04-11T12:19:53.843
> 
> 标签：knockout.js

我开发了一个淘汰赛项目。我找到了一种使用淘汰绑定和 optgroup 进行选择的方法。这是解决方案：http: [//jsfiddle.net/HPhmB/3/](http://jsfiddle.net/HPhmB/3/)

不幸的是，此解决方案使用静态模型在选择中填充“选项”和“选择组”。

对于我个人的需要，我想要一些更有活力的东西。我想从数据库提供的 observableArray 开始。这个 observableArray 看起来像这样：

```
var vehicles = ko.observableArray([
    {
     Id: 1,
     Brand: "Volkswagen",
     Type: "Golf"
    },
    {
     Id: 2,
     Brand: "Volkswagen",
     Type: "Sharan" 
    },
    {
     Id: 3,
     Brand: "BMW",
     Type: "118i"
    }
    {
     Id: 4,
     Brand: "BMW",
     Type: "525D"
    }
 ]); 
```

![在此处输入图像描述](https://i.stack.imgur.com/vD8re.png)

**我的问题**：是否有可能有一个基于这个单一 observableArray 的解决方案来构造选择。也许在计算属性的帮助下检索 optgroup/options？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T12:32:34.340

这是执行此操作的方法之一。它不是最佳的，但效果很好：

```
var ViewModel = function () {
    var self = this;
    self.vehicles = ko.observableArray([{
        Id: 1,
        Brand: "Volkswagen",
        Type: "Golf"
    }, {
        Id: 2,
        Brand: "Volkswagen",
        Type: "Sharan"
    }, {
        Id: 3,
        Brand: "BMW",
        Type: "118i"
    }, {
        Id: 2,
        Brand: "BMW",
        Type: "525D"
    }]);

    self.brands = ko.computed(function(){
        var list = ko.utils.arrayMap(self.vehicles(), function(item){
            return item.Brand;
        });

        return ko.utils.arrayGetDistinctValues(list);
    });
};

ko.applyBindings(new ViewModel());

<select data-bind="foreach: brands">
    <optgroup data-bind="attr: {label: $data}, foreach: $parent.vehicles">
    <!-- ko if: Brand == $parent -->
        <option data-bind="text: Type"></option>
    <!-- /ko -->
    </optgroup>
</select> 
```

小提琴：http: [//jsfiddle.net/HPhmB/55/](http://jsfiddle.net/HPhmB/55/)

# java - 将对象强制转换为数组

> ID：15948624
> 
> 赞同：6
> 
> 时间：2013-04-11T12:20:12.633
> 
> 标签：java, arrays, reflection, casting

```
public static void main(String[] args) throws Exception {
    int[] a = new int[] { 1, 2, 3 };
    method(a);
}

public static void method(Object o) {
    if (o != null && o.getClass().isArray()) {
        Object[] a = (Object[]) o;
        // java.lang.ClassCastException: [I cannot be cast to [Ljava.lang.Object;
    }
} 
```

我不应该知道`o`. `method`然后我怎样才能将它转换成一个`Object[]`数组？

**`instanceof`不能成为解决方案，因为参数可以是任何类型的数组。**

*PS：我已经看到几个关于 SO 处理数组转换的问题，但没有人（还没有？）你不知道数组的类型。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T12:28:01.630

您可以使用`java.lang.reflect.Array.get()`从未知数组中获取特定元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T12:25:11.590

您不能将原始数组（`int`在您的情况下为 s ）转换为 s 数组`Object`。如果你改变：

```
int[] a = new int[] { 1, 2, 3 }; 
```

至

```
Integer[] a = new Integer[] { 1, 2, 3 }; 
```

它应该工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T12:23:39.097

您不能将此对象强制转换为`Object[]`类，因为实际上这是一个`int`-s 数组。所以，如果你写，那将是正确的：

```
public static void method(Object o) {
    if (o instanceof int[]) {
        int[] a = (int[]) o;
        // ....
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T12:23:32.290

**选项1**

使用**o.getClass().getComponentType()**来确定它是什么类型：

```
if (o != null) {
  Class ofArray = o.getClass().getComponentType(); // returns int  
} 
```

看[演示](http://ideone.com/20B9qY)

* * *

**选项 2**

```
if (o instanceof int[]) {
  int[] a = (int[]) o;           
} 
```

*Noice：您可以使用除 int 之外的任何类型来确定它是什么类型的数组，并在需要时强制转换为它。

# sql-server-2008 - 为数据库中的所有表创建一个触发器

> ID：15948625
> 
> 赞同：1
> 
> 时间：2013-04-11T12:20:13.500
> 
> 标签：sql-server-2008, triggers

我想在数据库上创建触发器，首先检查是否存在类似的触发器，如果​​不存在则创建它。对于数据库中任何表上的任何插入，它都会填充该表上的 DateCreated 和 DateModified 列。我目前的一个是只在一张桌子上做。这是我的代码：

```
USE [Issue]
GO

/****** Object:  Trigger [dbo].[Update_DateCreated_DateModified]    Script Date: 04/11/2013 12:07:41 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

-- =============================================
-- Author:      <Author,,Nyname>
-- Create date: <Create ,10-04-13,>
-- Description: <Description,Add DateCreate and DateModifid for last records inserted,>
-- =============================================
CREATE TRIGGER [dbo].[Update_DateCreated_DateModified]
ON  [dbo].[Patient] 
FOR  INSERT
AS 
BEGIN
DECLARE @getDateCreated Datetime = GETDATE()
DECLARE @getDateModified DATETIME=GETDATE()
DECLARE @patient_nin VARCHAR(50) = (SELECT NIN FROM INSERTED i)

-- interfering with SELECT statements.
SET NOCOUNT ON;
-- Insert statements for trigger here
UPDATE dbo.Patient SET DateCreated=@getDateCreated,DateModified=@getDateModified

END

GO 
```

# r - 如何控制 Y 轴上数值的显示？

> ID：15948626
> 
> 赞同：3
> 
> 时间：2013-04-11T12:20:16.367
> 
> 标签：r, plot

我有几个需要绘制的文件，但我注意到每个绘图的 Y 轴都不同（所有文件的值都彼此接近）。我希望绘图在所有文件的 y 轴上显示相同的值。

例子

如果您在此处绘制 f，您将仅在 y 轴上获得两个刻度 100 和 300

```
f=c(1:477)

plot(f) 
```

我如何告诉 R 在 Y 轴上不仅显示 100 和 300 之类的东西 100 200 300 400

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T12:23:51.183

绘图时，不要绘制 y 轴：

```
plot(x,y,yaxt="n") 
```

现在绘制 y 轴，表示刻度：

```
ticks<-c(100,200,300,400)
axis(2,at=ticks,labels=ticks) 
```

如果您想确保所有图在 y 轴上显示某个范围（例如从 0 到 500），您可以`ylim`像这样强制它：

```
plot(x,y,yaxt="n",ylim=c(0,500)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:21:37.063

您的问题不在于要使用的参数，而在于 R 绘图的缩放...

我刚刚绘制

`plot(1:477)`

得到这个

![小缩放绘图](https://i.stack.imgur.com/0Vx5u.jpg)

然后只是扩大情节

![以更大的缩放比例绘图](https://i.stack.imgur.com/v6tOs.jpg)

# vb6 - 如何将控件名称传递给子过程

> ID：15948633
> 
> 赞同：1
> 
> 时间：2013-04-11T12:20:52.910
> 
> 标签：vb6

我想将控件名称传递给子过程。

```
LoadDetails grid1

Sub LoadDetails(grid1 as string)
    Dim a as control
    a = grid1
    ... 
```

上面的代码显示错误为

> 对象变量或未设置块变量

如何解决这个问题呢。

需要vb6代码帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:39:47.273

您正在尝试将字符串 (grid1) 分配给控件 (a)。如果可以，请传递控件本身而不是控件的名称：

```
LoadDetails grid1 'grid1 is here of type Control

Sub LoadDetails(a as Control)
    ... 
```

grid1 现在是控件而不是控件的名称。您将需要更改代码之前`LoadDetails grid1`。如果您知道控件的类型，那就更好了。例如，如果控件是 MSFlexGrid，则可以使用：

```
LoadDetails grid1 'grid1 is a MSFLexGrid

Sub LoadDetails(a as MSFlexGrid)
    'Do stuff with the grid 
```

如果无法传递控件本身，则可以使用此方法查找具有给定名称的控件：

```
Me.Controls(sName) 
```

（感谢 Deanna 指点我这个函数）

在您的代码中：

```
LoadDetails grid1 'grid1 is here a string, like in your original code

Sub LoadDetails(grid1 as string)
    Dim a as control
    a = Me.Controls(grid1)
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:40:38.940

你的参数不正确。您应该像这样更改它（带有文本框控件的示例）。

```
Private Sub HighlightText(ByRef txtBox As TextBox)

    txtBox.SelStart = 0
    txtBox.SelLength = Len(txtBox.Text)

End Sub 
```

该代码示例将突出显示文本框控件的内容。不过，重要的部分是您可以将参数声明为控件类型，然后直接在子程序中使用它。

# matlab - Matlab title() in loglog plot not working under some conditions

> ID：15948636
> 
> 赞同：2
> 
> 时间：2013-04-11T12:21:09.907
> 
> 标签：matlab

I'm having a problem getting the title to set for some loglog plots in Matlab. The title function works fine when plotting the same data using plot(x,y), but fails to display when using loglog(x,y). I thought it might be a bug triggered by the data, but it looks like I was wrong - please see the commenting below.

```
%title_prob
figure
x=0:1:1000;                     
y=3*x.^x;                       %The sum of this vecor is Inf
loglog(x,y)
title('Title','FontSize',16)    %This title doesn't set
xlabel('X Label','FontSize',12)
ylabel('Y Label','FontSize',12)

figure
x2=0:1:100;
y2=3*x2.^x2;                    %The sum of this vector is finite
loglog(x2,y2)
title('Title','FontSize',16)    %This title does set
xlabel('X Label','FontSize',12)
ylabel('Y Label','FontSize',12)

%Further investigation - is Inf to blame?  Apparently not.
FirstInf=max(find(y<Inf))+1;
figure
loglog(x(1:FirstInf),y(1:FirstInf))
title('Inf value in the y vector','FontSize',16)    %Title not set

figure
loglog(x(1:FirstInf-1),y(1:FirstInf-1))
title('NO Inf value in the y vector','FontSize',16) %Title not set
figure
plot(x,y)
title('Works for the plot function','FontSize',16) 
```

Thanks for any suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:07:23.820

```
%Further investigation - is Inf to blame?  Apparently not.
FirstInf=max(find(y<Inf))+1;
figure
loglog(x(1:FirstInf),y(1:FirstInf))
title('Inf value in the y vector','FontSize',16)    %Title not set 
```

Yes but you may have a NAN right there in the first position, in **y(1)**. As 0^0 is undefined, so perhaps that is causing the anomaly.

Edit. Technically 0^0 is undefined because the limit depends upon which way you approach zero in the augmements. Lim x^0 (as x goes to zero from above) is **1**, whereas lim 0^x (as x goes to zero) is **0**. That's why it's technically undefined.

However I just checked in gnu-Octave and 0^0 returned 1 without any issues. So probably Matlab returns the same. So I guess this isn't the answer, but I'll leave it here anyway as someone might be interested in the technical difficulties with 0^0.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:50:34.507

Title position is always calculated in axes coordinates based on upper `y` limit. So if it's `Inf` the title position will be also Inf and it will not be visible.

When you are taking out the Inf value from `y` (figure 4), the next value is still very large, about 1e306\. To calculate title's position MATLAB adds some number to upper y limit (little below 1.8e308, check by `ylim`) and it becomes Inf (1.8e308 is already Inf). Check double values limit with REALMAX.

You can check the title position with

```
get(get(gca,'title'),'position') 
```

So, yes, it is Inf values that make your title disappear.

You can set the y axis limit manually before calling `title`:

```
yl = ylim;
ylim([yl(1), 10^302]) 
```

# templates - 如何在 Joomla 3.0 中修复此模块样式问题

> ID：15948638
> 
> 赞同：0
> 
> 时间：2013-04-11T12:21:13.030
> 
> 标签：templates, joomla, module, styles, joomla-extensions

我有一个这样的 CSS 类：

```
.divTourCategorySummaryBoxLeft, .divTourCategorySummaryBoxRight {
    width: 98%;
    min-height: 350px;
    border: 1px dashed #9CAAC6;
    padding: 2px;
    margin-bottom:3px;
    background: #DEE7EF;
    color: #000063;
    line-height: 1.4em;
    display:block;
    overflow:auto;

} 
```

然后我在 index.php 中包含这样的模块：

```
<div class="divTourCategorySummaryBoxRight">
    <jdoc:include type="modules" name="modTourCategorySummaryRight" />
</div> 
```

这看起来很完美。但是，我需要在同一页面上有多个模块。因此，当我添加另一个模块时，它会出现在同一个 div 中。这不是我想要的方式。对于每个模块，必须有一个单独的 div。并且模块的数量是未知的。

所以我尝试了这个：

```
<jdoc:include type="modules" name="modTourCategorySummaryLeft" style="divTourCategorySummaryBoxLeft" /> 
```

但是样式在这里失败了。我如何让它为每个模块显示一组新的 div？

请指教。

这是我自己查看 joomla 文档从头开始构建的模板。我对此很陌生。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:17:01.283

您需要创建一个新的`module chrome`. 在您的模板 html 文件夹中，创建名为`modules.php`.

在里面，做一个这样的函数

```
defined('_JEXEC') or die;

function modChrome_customstyle($module, &$params, &$attribs)
{
    if (!empty ($module->content)) : ?>
            <div class="divTourCategorySummaryBoxRight">
                 <div class="moduletable">
                      <?php if ($module->showtitle != 0) : ?>
                           <h3><?php echo $module->title; ?></h3>
                      <?php endif; ?>
                      <?php echo $module->content; ?>
                 </div>
            </div>
    <?php endif;
} 
```

这样您就可以创建自定义模块输出。

然后，在您的模板文件中，包含这样的模块：

```
 <jdoc:include type="modules" name="modTourCategorySummaryLeft" style="customstyle" /> 
```

添加`style="customstyle"`新功能后，将用于渲染模块。默认样式是`xhtml`，你可以`templates/system/html`在 modules.php 文件的文件夹中找到它的代码

# c# - net.tcp 端口共享和单声道

> ID：15948639
> 
> 赞同：0
> 
> 时间：2013-04-11T12:21:15.313
> 
> 标签：c#, wcf, mono, net.tcp

在我的自托管 WCF 应用程序中，我在使用单声道端口共享时遇到了问题。给定以下代码，将引发此异常：

> System.Net.Sockets.SocketException：地址已在使用中

这是我的代码：

```
NetTcpBinding tcpBinding = new NetTcpBinding();
ServiceHost host1 = new ServiceHost(myService1);
host1.AddServiceEndpoint(typeof(IMyService1Contract), tcpBinding, "net.tcp://192.168.0.70:8075/service1");
host1.Open();

ServiceHost host2 = new ServiceHost(myService2);
host2.AddServiceEndpoint(typeof(IMyService2Contract), tcpBinding, "net.tcp://192.168.0.70:8075/service2");
host2.Open(); 
```

我已经在这里找到了这个错误报告[https://bugzilla.xamarin.com/show_bug.cgi?id=277](https://bugzilla.xamarin.com/show_bug.cgi?id=277)。不幸的是，最后一条评论从未得到回应。

就像写报告的人一样，我的代码在 windows/.net 上运行得非常好，但是在我使用 mono 2.10.8.1 (raspberry pi, soft-float Debian) 的 linux 机器上发生了提到的异常。

非常感谢您的回答！

# forms - 如何在 symfony2 中使用 formbuilder 创建一个引用到另一个文档的表单字段？

> ID：15948647
> 
> 赞同：0
> 
> 时间：2013-04-11T12:21:37.377
> 
> 标签：forms, symfony, doctrine-mongodb

在我的文档中，我有一个类别成员属性，它引用了同一个类别 Category

```
/**
 * Parent Category's path ( Indexed )
 *
 * @var String
 * @MongoDB\ReferenceOne( targetDocument = "Category", simple="true" )
 */
protected $parent; 
```

现在在我的表单中，我想创建`parent`一个选择下拉字段并在其中显示我的所有类别

```
$builder->add( 'parent', 'choice', array(                                                                                        
    'choices' => array( '..', '..' )
)); 
```

如何在下拉列表中显示我的所有类别并映射该下拉字段，以便在提交表单时该`parent`字段包含父字段的对象 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:14:58.887

使用`document`字段类型：

```
$builder->add('parent', 'document', array(
    'class' => 'AcmeDemoBundle:Category',
    'property' => 'name_of_property_to_display_as_item_label',
)); 
```

# asp.net-mvc - API 的另一种模型

> ID：15948658
> 
> 赞同：1
> 
> 时间：2013-04-11T12:21:57.117
> 
> 标签：asp.net-mvc, asp.net-web-api

我在 ASP.net MVC 4.5 中使用 WebAPI，我想知道处理 db 实体时的最佳实践是什么，我是否应该创建另一个处理 API 的模型（你可以称之为 API 模型或服务模型），漂亮与创建视图模型来处理剃刀视图的方式非常相似，或者只是使用 EF 实体直接与数据库通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:25:54.650

当它是一个公共 API 时，我认为创建额外的 Web API 实体（MVC 中的模型）会更好。您可以编写一个方法来将 db 实体映射到 Web API 实体。当您创建额外的实体时，您可以确保 API 的公共方面在您更改数据库实体时不会改变。

# ios - 使用 MPMoviePlayerController 播放视频时如何静音/取消静音？

> ID：15948661
> 
> 赞同：10
> 
> 时间：2013-04-11T12:21:58.517
> 
> 标签：ios, ios6, mpmovieplayercontroller, avaudiosession, mute

我创建了自己的自定义控件，用于`MPMoviePlayerController`. 到目前为止一切正常，除了静音按钮控制。

在`AVAudioSession`创建`MPMoviePlayerController`.

```
 NSError *modeError = nil;
    [self.audioSession setMode:AVAudioSessionModeMoviePlayback error:&modeError];
    if (modeError != nil) {
        NSLog(@"Error setting mode for AVAudioSession: %@", modeError);
    }

    NSError *categoryError = nil;
    [self.audioSession setCategory:AVAudioSessionCategoryPlayback error:&categoryError];
    if (categoryError != nil) {
        NSLog(@"Error setting category for AVAudioSession: %@", categoryError);
    } 
```

然后在我的静音按钮回调方法中，我有以下代码：

```
 NSError *activeError = nil;
    [self.audioSession setActive:NO error:&activeError];
    if (activeError != nil) {
        NSLog(@"Error setting inactive state for AVAudioSession: %@", activeError);
    } 
```

单击静音按钮时，我收到以下无用错误：

```
Error Domain=NSOSStatusErrorDomain Code=560030580 "The operation couldn’t be completed. (OSStatus error 560030580.)" 
```

我正在链接到`AVFoundation`框架。

这真的开始困扰我，因为我一生都无法找到一种方法来减少或静音我的应用程序的播放音​​频。

我不想仅更改`AVAudioSession` `AVAudioSessionCategoryPlayback`类别定义的应用程序级别的系统全局卷。

好像可以设置音量，`AVAudioPlayer`但不能设置`MPMoviePlayerController`。我在 SO 上看到了其他帖子，说只是创建一个实例`AVAudioPlayer`并设置音量，但这只会导致我的应用程序崩溃，我希望这与我没有使用`initWithContentsOfURL:error:`or`initWithData:error:`而是使用 `的事实有关在里面'。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T11:15:01.820

与 Apple 技术人员交谈后，发现无法使用`MPMoviePlayerController`.

`AVPlayer`相反，您必须使用 AVFoundations类创建自己的控制器。

一旦你使用它，它就是创建自定义音频混合和设置音量级别的问题。它实际上工作得很好。

示例代码：

```
 AVURLAsset * asset = [AVURLAsset URLAssetWithURL:[self localMovieURL] options:nil];
    NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

    // Mute all the audio tracks
    NSMutableArray * allAudioParams = [NSMutableArray array];
    for (AVAssetTrack *track in audioTracks) {
            AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
            [audioInputParams setVolume:0.0 atTime:kCMTimeZero ];
            [audioInputParams setTrackID:[track trackID]];
            [allAudioParams addObject:audioInputParams];
    }
    AVMutableAudioMix * audioZeroMix = [AVMutableAudioMix audioMix];
    [audioZeroMix setInputParameters:allAudioParams];

    // Create a player item
    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
    [playerItem setAudioMix:audioZeroMix]; // Mute the player item

    // Create a new Player, and set the player to use the player item
    // with the muted audio mix
    AVPlayer *player = [AVPlayer playerWithPlayerItem:playerItem];

    self.mPlayer = player;

    [mPlayer play]; 
```

我编写了一个`MPMoviePlayerController`替换类，增加了对音量级别的支持。我将很快上传到 github 并在这篇文章中添加链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-05T17:58:18.263

我知道这是一篇旧帖子，但我设法找到了一种方法，使用 MPVolumeView 成功控制 iOS6 和 iOS7 中 MPMoviePlayerController 控件的音量。一个问题是它不能在模拟器中工作，只能在物理设备上工作。为了控制音量，添加一个隐藏的 MPVolumeView 就可以了。但是，如果您使用隐藏的，当您使用物理设备音量按钮更改音量时出现的本机操作系统音量显示仍将出现在中央屏幕上。如果您想防止这种情况发生，请确保您的 MPVolumeView 未隐藏。相反，您可以给它一个非常低的 alpha 透明度并将其放在其他视图后面，这样用户就看不到它。

这是我使用的代码：

```
MPVolumeView *volumeView = [[MPVolumeView alloc]initWithFrame:CGRectZero];
[volumeView setShowsVolumeSlider:YES];
[volumeView setShowsRouteButton:NO];

// control must be VISIBLE if you want to prevent default OS volume display
// from appearing when you change the volume level
[volumeView setHidden:NO];
volumeView.alpha = 0.1f;
volumeView.userInteractionEnabled = NO;

// to hide from view just insert behind all other views
[self.view insertSubview:volumeView atIndex:0]; 
```

这允许您通过调用来控制音量： [[MPMusicPlayerController applicationMusicPlayer] setVolume:0.0];

但是我第一次尝试更改音量时仍然出现本机操作系统音量显示 - 在随后的加载中它没有显示此显示，因此认为这与视图控制器生命周期中的阶段有关，我移动了它从我的 viewDidLoad 方法到 viewDidAppear 方法 - 它起作用了 - 音量静音并且没有出现本机音量显示，**但**我现在能够在视频开始播放之前听到一秒钟的音频。所以我进入播放状态确实改变了 MPMoviePlayerController 的委托。在 viewDidload 我添加了：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(videoPlaybackStateDidChange:) 
    name:MPMoviePlayerPlaybackStateDidChangeNotification object:nil]; 
```

以及委托回调方法：

```
-(void)videoPlaybackStateDidChange:(NSNotification *)aNotification
{
    // Note, this doesn't work in simulator (even in iOS7), only on actual device!
    if ([moviePlayerController playbackState] == MPMoviePlaybackStatePlaying)
    {
        [[MPMusicPlayerController applicationMusicPlayer] setVolume:0.0];
    }
} 
```

这在视频开始播放之前静音了视频的音频，但在生命周期中的 viewDidLoad 之后，因此没有本机操作系统音量静音显示。

在我的应用程序中，我在静音之前检索并存储了当前音量级别（使用 [MPMusicPlayerController applicationMusicPlayer].volume 属性），然后在关闭视图控制器时将音量恢复到此级别，这意味着用户不会知道他们的设备音量级别被修改和恢复。

此外，如果您的 MPMoviePlayerController 在 iOS7 中使用非标准音频路由，则调用 [[MPMusicPlayerController applicationMusicPlayer] setVolume:0.0] 可能对您不起作用 - 在这种情况下，您可以遍历 MPVolumeView 控件的子视图，直到找到视图它是 UISlider 的子类。然后，您可以调用应该适合您的 [sliderView setValue:0 animated:NO]。此方法不使用任何私有 Apple API，因此不应让您的应用程序被拒绝 - 毕竟您提供此功能的正当理由有很多，而且在 iOS6 中也有可能，而无需费尽心思！事实上，我很困惑地发现，Apple 首先在 iOS7 中删除了在 MPMoviePlayerController 上设置音量的功能.. 强制迁移到 AVPlayer？

**更新：**我的 iPad 应用程序现在已使用此方法获得批准，并且已在应用程序商店上架。

# java - 使用 Blowfish 在 Java 中解密

> ID：15948662
> 
> 赞同：2
> 
> 时间：2013-04-11T12:21:58.940
> 
> 标签：java, cryptography, encryption, blowfish

你好，

我正在使用 Blowfish 在 Java 中进行加密和解密。

加密工作正常，但解密失败。

这是我用于解密的 Java 代码：

```
String encryptedString = … ;
String decryptedString = null;
SecretKeySpec key = new SecretKeySpec(myKey.getBytes(), "Blowfish");
Cipher cipher;
try {
    cipher = Cipher.getInstance("Blowfish");
    cipher.init(Cipher.DECRYPT_MODE, key);
    byte[] decrypted = cipher.doFinal(encryptedString.getBytes());
    decryptedString = new String(decrypted, Charset.forName("UTF-8"));
} [ catch Exceptions … ] 
```

我得到一个例外：

`Exception. javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher`

你能告诉我如何让它简单地工作吗？谢谢你。

我提供的输入来自我的加密 Java 代码，+ Base64 中的编码，我在将其提供给此解密操作之前从 Base64 对其进行解码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T13:16:46.830

将字节转换为十六进制并返回是很棘手的。这应该可以解决您的问题。（您需要修复 encryptedString 的字符串表示形式）

**输出：**

```
StackOverflow 537461636B4F766572666C6F77 [83, 116, 97, 99, 107, 79, 118, 101, 114, 102, 108, 111, 119]
J~3¹ÙÂÖ"¢ª„¨u 194A7E33B9060CD9C2D622A2AA84A875 [25, 74, 126, 51, -71, 6, 12, -39, -62, -42, 34, -94, -86, -124, -88, 117]
StackOverflow 537461636B4F766572666C6F77 [83, 116, 97, 99, 107, 79, 118, 101, 114, 102, 108, 111, 119] 
```

**代码：**

```
import java.util.Arrays;
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class Main {

  public static void main(String[] args) throws Exception {

    KeyGenerator keygenerator = KeyGenerator.getInstance("Blowfish");
    SecretKey secretkey = keygenerator.generateKey();

    String plaintextString = "StackOverflow";
    System.out.println(plaintextString + " " + bytesToHex(plaintextString.getBytes()) + " " + Arrays.toString(plaintextString.getBytes()));

    SecretKeySpec key = new SecretKeySpec(secretkey.getEncoded(), "Blowfish");
    Cipher cipher = Cipher.getInstance("Blowfish");

    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] encrypted = cipher.doFinal(plaintextString.getBytes());
    String encryptedString = bytesToHex(encrypted);
    System.out.println(new String(encrypted) + " " + encryptedString + " " + Arrays.toString(encrypted));

    cipher.init(Cipher.DECRYPT_MODE, key);
    byte[] decrypted = cipher.doFinal(hexToBytes(encryptedString));
    String decryptedString = bytesToHex(decrypted);
    System.out.println(new String(decrypted) + " " + decryptedString + " " + Arrays.toString(decrypted));

  }

  public static byte[] hexToBytes(String str) {
    if (str == null) {
      return null;
    } else if (str.length() < 2) {
      return null;
    } else {
      int len = str.length() / 2;
      byte[] buffer = new byte[len];
      for (int i = 0; i < len; i++) {
        buffer[i] = (byte) Integer.parseInt(str.substring(i * 2, i * 2 + 2), 16);
      }
      return buffer;
    }

  }

  public static String bytesToHex(byte[] data) {
    if (data == null) {
      return null;
    } else {
      int len = data.length;
      String str = "";
      for (int i = 0; i < len; i++) {
        if ((data[i] & 0xFF) < 16)
          str = str + "0" + java.lang.Integer.toHexString(data[i] & 0xFF);
        else
          str = str + java.lang.Integer.toHexString(data[i] & 0xFF);
      }
      return str.toUpperCase();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T12:30:06.663

您的 myKey 变量长度必须是 8 的倍数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:56:23.193

```
String encryptedString = … ;  
String decryptedString = null;
SecretKeySpec key = new SecretKeySpec(myKey.getBytes(), "Blowfish");
private static byte[] linebreak = {}; // Remove Base64 encoder default linebreak
private static Base64 coder;
Cipher cipher;
try {
    coder = new Base64(32, linebreak, true);
    cipher = Cipher.getInstance("Blowfish");
    cipher.init(Cipher.DECRYPT_MODE, key);
    byte[] decrypted = cipher.doFinal(encryptedString.getBytes());
    decryptedString = new String(coder.encode(decrypted));
} [ catch Exceptions … ] 
```

你可以使用 Base64 类来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T15:27:19.737

现在我有了解决方案！

首先，Unicode 存在一些问题，所以我将 ISO-8859-1 放在了各处。[包括在Base64编码和解码中。](https://stackoverflow.com/a/10319155/1824094)

然后，我处理了变体。

这是我用于 Blowfish 解密的 Java 代码：

```
String encryptedString = … ;
String decryptedString = null;
SecretKeySpec key = new SecretKeySpec(myKey.getBytes(CHARSET_ISO_8859_1), "Blowfish");
Cipher cipher;
try {
    cipher = Cipher.getInstance("Blowfish/ECB/PKCS5Padding");
    cipher.init(Cipher.DECRYPT_MODE, key);
    byte[] decrypted = cipher.doFinal(encryptedString.getBytes(CHARSET_ISO_8859_1));
    decryptedString = new String(decrypted, CHARSET_ISO_8859_1);
} [ catch Exceptions … ] 
```

请注意，我已替换`"Blowfish"`为`"Blowfish/ECB/PKCS5Padding"`获取`Cipher` 实例，但是，如果您对密钥执行相同操作，则会失败。

密钥 `myKey`必须是 8 个字符的 Latin-1 字符串。这使得密钥为 128 位。Blowfish 算法允许更大的密钥，但由于 JRE 中的美国出口限制，它们在 Java 中失败——美国允许加密，但不比[NSA](http://en.wikipedia.org/wiki/NSA)可以破解的更强。

是一个像这样定义的`CHARSET_ISO_8859_1`常量：

```
final Charset CHARSET_ISO_8859_1 = Charset.forName("ISO-8859-1"); 
```

并且`Charset`是`java.nio.charset.Charset`。

最后但同样重要的是，我相应地更改了我的加密 Java 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-02T12:20:50.087

尝试这个

```
private byte[] encrypt(String key, String plainText) throws GeneralSecurityException {

    SecretKey secret_key = new SecretKeySpec(key.getBytes(), ALGORITM);

    Cipher cipher = Cipher.getInstance(ALGORITM);
    cipher.init(Cipher.ENCRYPT_MODE, secret_key);

    return cipher.doFinal(plainText.getBytes());
} 
```

在这里你可以找到整个班级 enc/dec --- [http://dexxtr.com/post/57145943236/blowfish-encrypt-and-decrypt-in-java-android](http://dexxtr.com/post/57145943236/blowfish-encrypt-and-decrypt-in-java-android)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:25:22.207

`Cipher`通过声明模式和填充，您绝对应该更加明确。这段代码是如何加密的？里面到底有什么`String` `encryptedString`？它是十六进制编码还是base64编码？如果它没有被编码，那肯定是麻烦的根源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-29T09:17:22.157

try { /** * 初始化用于解密的密码 */ cipher.init(Cipher.DECRYPT_MODE, secretKey); /* * * 初始化输入输出流 */ inStream = new FileInputStream(encryptedFile); outStream = new FileOutputStream(decryptedFile); 字节[]缓冲区=新字节[1024]；国际化; while ((len = inStream.read(buffer)) > 0) { outStream.write(cipher.update(buffer, 0, len)); outStream.flush(); } outStream.write(cipher.doFinal()); inStream.close(); outStream.close(); }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-29T09:30:56.523

```
 try {
        /**
         * Initialize the cipher for decryption
         */
     cipher.init(Cipher.DECRYPT_MODE, secretKey);
        /**
         * Initialize input and output streams
         */
        inStream = new FileInputStream(encryptedFile);
        outStream = new FileOutputStream(decryptedFile);
        byte[] buffer = new byte[1024];
        int len;
        while ((len = inStream.read(buffer)) > 0) {
            outStream.write(cipher.update(buffer, 0, len));
            outStream.flush();
        }
        outStream.write(cipher.doFinal());
        inStream.close();
        outStream.close();
    } 
```

...

1.  项目清单

# python - Python 正则表达式 - 替换

> ID：15948665
> 
> 赞同：1
> 
> 时间：2013-04-11T12:22:06.003
> 
> 标签：python, regex

我写了一个python代码：

```
import re

url = "www.google.com";
line = "../../asyouwish.html"

num = re.sub(r'(\.\.\/)*', url, line)
print ("Final : ", num) 
```

我的意图是用提供的 url 值替换 ../ （任意次数）。但是我没有得到正确的输出。我想要的输出是“www.google.com/asyouwish.html”。

我得到的是：

```
Final :  www.google.comawww.google.comswww.google.comywww.google.comowww.google.
comuwww.google.comwwww.google.comiwww.google.comswww.google.comhwww.google.com.w
ww.google.comhwww.google.comtwww.google.commwww.google.comlwww.google.com 
```

谁能帮我看看我哪里出错了！！！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:26:26.377

`*`表示 0 次或多次出现。`+`表示 1 个或多个。您希望匹配至少出现 1 次`../`. 所以更改`*`为`+`：

```
import re

url = "www.google.com/"
line = "../../asyouwish.html"

num = re.sub(r'([.]{2}/)+', url, line)
print ("Final : ", num) 
```

产量

```
('Final : ', 'www.google.com/asyouwish.html') 
```

由于`re.sub`将删除 1-or-more `'../'`，因此您需要在`url`. 在上面，我已将正斜杠添加到`url`自身。如果`url`没有正斜杠，您可以（作为替代）添加它

```
num = re.sub(r'([.]{2}/)+', url+'/', line) 
```

* * *

当您匹配 0 次或多次出现时，中的字符*之间*`r'([.]{2}/)*'`的每个位置都与模式匹配，因此您会在每个空隙处获得替换。*`line`*

 *```
In [9]: x = 'www.google.comawww.google.comswww.google.comywww.google.comowww.google.comuwww.google.comwwww.google.comiwww.google.comswww.google.comhwww.google.com.www.google.comhwww.google.comtwww.google.commwww.google.comlwww.google.com'

In [13]: x.split('www.google.com')
Out[13]: ['', 'a', 's', 'y', 'o', 'u', 'w', 'i', 's', 'h', '.', 'h', 't', 'm', 'l', ''] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:24:52.953

使用类似的东西

```
url = "www.google.com";
line = "../../asyouwish.html"
link_part = line.split("/")

final_url = url + "/" + link_part[-1] 
```*

# matlab - .fig 文件未在 Matlab 中打开

> ID：15948669
> 
> 赞同：2
> 
> 时间：2013-04-11T12:22:10.453
> 
> 标签：matlab, matlab-figure

我已经将一个 matlab 图形保存为 .fig 文件，当我尝试打开它时它没有打开。我不知道为什么？所以如果有人可以帮助我。

这是用于保存图形的代码：

```
h=figure('visible','off'); imagesc(m); colormap(jet(4096)); colorbar; title('mean');
filename = strcat(name,'_mean');
imPath=strcat(name,'/',filename);
saveas(h,imPath,'fig'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:54:57.353

你的代码对我来说很好。尝试将您的图形可见性从“关闭”更改为“打开”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:18:10.137

首先，在创建图形时更改`'visible','off'`为`'visible','on'`

如果由于某种原因无法执行此操作，请从命令行或使用 File->Open 打开图窗，然后在命令行中键入`>>figure(1)`（假设这是您打开的唯一图窗）。这应该显示数字。

# regex - 如何使用正则表达式属性在 MVC 文本框中禁止句点

> ID：15948673
> 
> 赞同：0
> 
> 时间：2013-04-11T12:22:22.200
> 
> 标签：regex, asp.net-mvc-4

我有一个当前要求，我需要确保用户没有在使用 MVC4 的文本框中输入句点（“.”）。

所以，这应该是允许的：30
但这应该是不允许的：30.2

我正在尝试使用 RegularExpression 属性，但找不到有效的组合：

```
public class StudyRandomizationCap
{
    [Range(1, 100, ErrorMessage = "Milestone must be between 1 and 100.")]
    [RegularExpression(@"\.", ErrorMessage = "Milestone percentage values cannot contain decimals.")]
    public short? MilestonePercentage1 { get; set; }
} 
```

无论我输入的任何数字是否有小数，这都会在客户端验证失败。

将其更改为：
[RegularExpression(@"[^.]", ErrorMessage = "里程碑百分比值不能包含小数。")]

将允许 1-9 之间的单个数字，但数字为 10 及以上的分钟将失败。同样，这一切都在客户端。

为什么它在 1-100 之间的数字上失败，具体取决于我使用的正则表达式？有比使用正则表达式更好/更简单的方法吗？Javascript 如何执行与 ModelBinder 不同的正则表达式是否存在某种类型的限制？

这似乎是一个相当简单和微不足道的检查，对我来说，正则表达式检查应该只有在有“。”时才会失败。在文本框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:28:15.090

您的正则表达式只匹配一个字符，您需要告诉它能够匹配更多，例如：

```
[RegularExpression(@"[^\.]+", ErrorMessage = "Milestone percentage values cannot contain decimals.")] 
```

+ 意味着它必须是 1 个或多个字符长。如果你只想要数字，你*应该*做的是有类似的东西

```
[RegularExpression(@"[0-9]+", ErrorMessage = "Milestone percentage values cannot contain decimals.")] 
```

您的初始查询将阻止他们输入 . 但他们仍然可以输入其他字符，例如符号或 Az

# java - 如何从 SQLite 对 android 上的结果进行排序？

> ID：15948677
> 
> 赞同：0
> 
> 时间：2013-04-11T12:22:30.183
> 
> 标签：java, android, sqlite

我需要显示多个数据库表来分隔文本视图。

所以我需要从表中提取所有“约会”并将它们排序以显示在 mainActivity 上的单独文本视图中，例如 txtMonday、txtTuesday、txtWednesday

该数据库旨在存储日期以及其他详细信息：

```
private static final String DATABASE_CREATE =
        "create table " + TABLE_AP + "(" + COLUMN_ID + " integer primary key autoincrement, "
        + COLUMN_DAY + " text not null, "
        + COLUMN_TIME + " text not null, "
        + COLUMN_DURATION + " text not null, "
        + COLUMN_DESCRIPTION + " text not null);"; 
```

这就是我尝试通过 MainActivity 调用它的方式：（我也将使用 onCreate 调用它）

```
 public void onResume (){
      APData = new AppointmentDataSource(this);
      APData.open();
      List<Appointment> appointments = APData.retrieveAllAppointments();
      APData.close(); 
```

预约资料来源：

```
public List<Appointment> retrieveAllAppointments () {
    List<Appointment> appointments = new ArrayList<Appointment>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_AP, , null, null, null, null, null);

    cursor.moveToFirst();

    while (!cursor.isAfterLast()) {
        Appointment ap = cursorToBk(cursor);
        appointments.add(ap);
        cursor.moveToNext();
    }

    cursor.close();
    return appointments;        
} 
```

同样在这些日子里，我使用单选按钮在星期一/星期二/星期三/星期四/星期五之间进行选择，所以我将这一天存储为：

```
createButton.setOnClickListener(new View.OnClickListener() {

      @Override
      public void onClick(View view) {
        findRadioGroup = (RadioGroup) findViewById(R.id.radioDay);
        int selectedId = findRadioGroup.getCheckedRadioButtonId();
        radioButton = (RadioButton) findViewById(selectedId);

        String day=radioButton.getText().toString();
        String time=txtTime.getText().toString();
        String duration=txtDuration.getText().toString();
        String description=txtDescription.getText().toString();

        APData.insert(day, time, duration, description);
        APData.close();
        finish();
      }

    }); 
```

以及它们的 XML/字符串：

```
<string name="RadioMon">Mon</string>
<string name="RadioTue">Tue</string>
<string name="RadioWed">Wed</string>
<string name="RadioThu">Thur</string>
<string name="RadioFri">Fri</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:39:00.047

在您的数据模型中，您应该有一个操作约会的类，因此当您从数据库中检索所有约会时，只需`appointments[i].Day`根据您的约会类的创建方式过滤它们，或类似的东西。您不需要为它们中的每一个显式创建不同的数据库选择。

```
 public void onResume (){
  APData = new AppointmentDataSource(this);
  APData.open();
  List<Appointment> appointments = APData.retrieveAllAppointments();
  APData.close();
  TextView tvMonday = (TextView)findViewById(R.id.tvMonday);
  TextView tvTuesday = (TextView)findViewById(R.id.tvTuesday);
  ... (all your days textViews).
  for(Iterator<Appointment> i = appointments.iterator(); i.hasNext();){ 
  Appointment item = i.next();
     if(item.Day.equals("Monday") tvMonday.append(item.ToString());
     //same for the rest of your textViews
  } 
```

应该是这样的。

# ruby-on-rails - 将 Rails 版本升级到 3.2 后 CSS 未加载

> ID：15948678
> 
> 赞同：1
> 
> 时间：2013-04-11T12:22:31.613
> 
> 标签：ruby-on-rails, asset-pipeline, upgrade

我已经将我的应用程序从 Rails 3.0 升级到 Rails 3.2，我在 CSS 中遇到了一个问题，因为它没有正确加载。在使用之前`asset-pipeline`，我一直在使用`jammit`for assets 预编译。我在日志中发现以下消息：

```
Started GET "/assets/js_templates.jst" for 127.0.0.1 at 2013-04-11 17:41:59 +0530   
Processing by Jammit::Controller#package as */*     
Parameters: {"package"=>"js_templates", "extension"=>"jst"}   
Completed 200 OK in 75ms (Views: 0.2ms | ActiveRecord: 0.0ms | Solr: 0.0ms)   
Completed 500 Internal Server Error in 225ms  

ActionView::MissingTemplate (Missing template errors/page_not_found, 
application/page_not_found with {:locale=>[:en], :formats=>[:jpeg], :handlers=>[:erb, 
:builder, :coffee, :haml]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:48:29.717

通过使用以下方法解决了这个问题：在 rails 3.0.1 中，

```
class ErrorsController < ApplicationController
    def page_not_found
        render :status => 404
    end
end 
```

在 rails 3.2 中，将渲染更改为 respond_to

```
class ErrorsController < ApplicationController
    def page_not_found
        respond_to do |format|
        format.html { render :status => 404 }
        format.any { head :status=>404 }
    end
end 
```

# c# - 编组回调到本机 dll

> ID：15948680
> 
> 赞同：2
> 
> 时间：2013-04-11T12:22:35.273
> 
> 标签：c#

我正在处理从非托管本机库到托管 C# 代码的回调。回调函数在头文件中声明：

```
typedef void* (TNotice)(wchar_t *msg, bool error); 
```

回调有字符串参数 msg。我不知道，为什么在 c# 中声明不起作用：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate IntPtr CallbackDelegate([MarshalAs(UnmanagedType.LPWStr)]string msg, bool error); 
```

但声明：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate IntPtr CallbackDelegate([MarshalAs(UnmanagedType.LPWStr)]StringBuilder msg, bool error); 
```

工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:31:05.720

您必须使用 a `StringBuilder`，因为参数是`out`参数或返回值。在这些情况下，您不能使用常规`string`. 您使用的编组是正确的。

# android - 开发后Android小部件未显示在列表中

> ID：15948682
> 
> 赞同：22
> 
> 时间：2013-04-11T12:22:39.903
> 
> 标签：android, android-widget

我正在使用小部件升级我的应用程序。这不是我做的第一个小部件。我总是遇到奇怪的问题，但小部件最终出现在列表中。

这是我到目前为止所做的：

*   创建了 widget_layout.xml
*   创建了 widget_info.xml

> ```
> <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"  
>     android:minWidth="110dp"
>     android:minHeight="30dp"
>     android:updatePeriodMillis="86400000"
>     android:initialLayout="@layout/widget_layout"
>     android:resizeMode="none">
> </appwidget-provider> 
> ```

*   创建 WidgetProvider 类
*   在该部分中添加了小部件到清单`<application>`（由于某种原因无法在此处粘贴清单片段，它只是没有显示，请参见[此处](http://pastebin.com/9BmpX0rA)的代码）

不过，在小部件列表中找不到小部件。我正在真实设备上调试应用程序。我正在使用库项目，但小部件文件却都在我直接运行的项目中。这里会发生什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-07-08T03:44:29.157

遇到类似的问题，这就是发生在我身上的事情。在添加 minResizeHeight 之前，下面的 Widget 从未出现在 Widget 抽屉中。很奇怪，但可能是可调整大小的小部件所必需的。本来可以更友好的。

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
android:initialLayout="@layout/pmt_schedule_scroll_widget"
android:minHeight="146dip"
android:minResizeHeight="73dp"
android:minWidth="146dip"
android:resizeMode="vertical"
android:updatePeriodMillis="0" /> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-20T06:12:07.990

这种问题可能发生在两种情况下。两者都在上面得到了回答，这是一个完整的答案，我遇到了这两种情况并解决了它们。

# 场景1

如果应用程序在 manifest 中指定了 android:installLocation="preferExternal" 参数，则应用程序将安装在外部内存中，并且不会显示在小部件列表中。此外，如果您让手机将所有应用程序安装在 sd 卡上，也会发生这种情况。

## 解决方案

转到设置-> 应用程序-> YourApp 然后“移动到手机”。这会将应用程序移动到您的手机内存中，现在您可以在小部件列表中看到小部件

# 情景2

如果上述修复没有解决您的问题，那么您的设备可能是 android 4.XX 版本。

然后你必须在 widget_info.xml 文件中至少设置以下参数

## 解决方案2

安卓:minHeight="XXXdp" 安卓:minWidth="XXXdp"

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-12T07:35:03.273

问题是`android:installLocation="preferExternal"`

如果应用程序安装在 SD 上，它会以某种方式导致小部件列表出现问题

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-12-17T13:39:59.923

我尝试了所有可能的解决方案，但对我没有任何效果......最后我解决了它。

就我而言，问题是想多了：我认为在**元数据**标签中，我们需要为提供者定义一个唯一名称（例如：“com.example.myprovider”）以及指向 xml 资源的链接。

错误的：

```
<meta-data
      android:name="com.example.myprovider"
      android:resource="@xml/widget_info" /> 
```

正确的：

```
<meta-data
  android:name="android.appwidget.provider"
  android:resource="@xml/widget_info" /> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-11T13:14:20.473

您需要在清单文件中注册一个 BroadcastReceiver。例如：

```
<receiver
   android:icon="@drawable/icon"
   android:label="Example Widget"
   android:name="MyWidgetProvider" >
   <intent-filter >
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
   </intent-filter>

   <meta-data
      android:name="android.appwidget.provider"
      android:resource="@xml/widget_info" />
</receiver> 
```

[我从http://www.vogella.com/articles/AndroidWidgets/article.html](http://www.vogella.com/articles/AndroidWidgets/article.html)借用了这段代码

查看完整教程的链接

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-29T09:39:33.683

经过数小时的搜索并未能解决，我决定打开一个可以工作的小部件示例项目并逐项比较以查看问题所在，最后，我解决了在我的 res/xml/widget_info 中添加了以下行.xml：

```
android:minHeight="XXXdp"
android:minResizeHeight="XXXdp"
android:minResizeWidth="XXXdp"
android:minWidth="XXXdp" 
```

其中 XXX 是某个值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-11T18:23:04.077

就我而言，问题出在接收器内的意图过滤器中。

错误的：

```
<intent-filter>
    <action android:name="APPWIDGET_UPDATE" />
</intent-filter> 
```

正确的：

```
<intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
</intent-filter> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-23T19:31:57.547

在我的情况下，它是 minWidth，它太大了，只需放一个较小的 dp，它也适用于 minHeight 太高！

# django - 如何以 json 格式（不仅仅是 id）返回多对多关系值？

> ID：15948683
> 
> 赞同：2
> 
> 时间：2013-04-11T12:22:48.450
> 
> 标签：django, json, generics, many-to-many

我有一个带有 ManyToManyField 的模型到另一个模型。我想获取 JSON 返回的特定记录的所有信息（包括来自其他模型的相关信息）。

在发布我的问题之前，我已经阅读[了这个](https://stackoverflow.com/questions/3049519/django-piston-how-to-get-values-of-a-many-to-many-field)，但它与我正在寻找的不同。我没有使用活塞。

**模型.py**

```
class Subject(models.Model):
    description = models.CharField(max_length=200)

    def __unicode__(self):
        return self.description

class Practice(models.Model):

    title = models.CharField(max_length=200)
    main_subject = models.ForeignKey(to=Subject)
    related_subjects = models.ManyToManyField(to=Subject, related_name="practices")

    def __unicode__(self):
        return "%s" % (self.title) 
```

我实现了一个通用列表视图，它以 json 格式返回**练习**实例列表......

**列表视图.py**

```
class PracticeListView(ListView):
    def get_queryset(self):
        return Practice.objects.all()

class PracticeListViewJSON(PracticeListView):
def get(self, request, *args, **kwargs):
    queryset = self.get_queryset()
    json_serializer = serializers.get_serializer("json")()
    data = json_serializer.serialize(queryset, ensure_ascii=False)        
    return HttpResponse(data, content_type="application/json") 
```

但是 json 数据并没有带来**主题**描述值，而只是作为 id 的引用。

**json**

[{"pk": 1, "model": "app.pratice", "fields": {"related_subjects": [2, 4]}}]

我该怎么做才能有这样的回报

```
[{"pk": 1, "model": "app.pratice", 
           "fields": {"related_subjects": ["model": "app.subject", 
                                                    "fields": {"description": "description of the subject #1"}, 
                                           "model": "app.subject", 
                                                    "fields": {"description": "description of the subject #2"},
                                                    ...
] 
```

# php - PHP中的父子及其子关系

> ID：15948686
> 
> 赞同：0
> 
> 时间：2013-04-11T12:22:49.857
> 
> 标签：php

我正在尝试对 Parent -child 和他们的孩子进行分类，等等我有一个数组，其中包含子项意味着子项。

```
$navarray= Array
(
    [0] => Array
        (
            [id] => 3
            [name] => add
            [controller] => ClassYearsSubjectsController
            [action] => getsubjects
            [parent] => 0
            [sub] => Array
                (
                )

        )

    [1] => Array
        (
            [id] => 1
            [name] => occupations
            [controller] => OccupationsController
            [action] => index
            [parent] => 0
            [sub] => Array
                (
                    [0] => Array
                        (
                            [id] => 7
                            [name] => test
                            [controller] => AddressesController
                            [action] => index
                            [parent] => 1
                            [sub] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 8
                                            [name] => testnew
                                            [controller] => AdmissionEnquiriesController
                                            [action] => giveadmissions
                                            [parent] => 7
                                            [sub] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [1] => Array
                        (
                            [id] => 2
                            [name] => add
                            [controller] => OccupationsController
                            [action] => add
                            [parent] => 1
                            [sub] => Array
                                (
                                )

                        )

                )

        )

) 
```

我正在尝试生成树。 **但我试过了**

```
<?php echo GenerateNavHTML($navarray);  ?> 
```

和功能**GenerateNavHTML**

```
<?php 

function GenerateNavHTML($nav)
{ 

    $html = '';
    foreach($nav as $page)
    {
        $html.='<ul><li>';    

        $html .= '<a href="#">k</a>';
        $html .= GenerateNavHTML($page['sub']);
        $html .= '</li></ul>';
    }
    return $html;
}

   ?> 
```

我的输出是

```
<ul style="display: block;" class="nav">
    <li class="test"><a href="">add</a>
    </li>
</ul><ul style="display: block;" class="nav"><li class="test"><a href="">occupations</a><ul style="display: block;" class="nav"><li class="test"><a href="">test</a><ul style="display: block;" class="nav"><li class="test"><a href="">testnew</a></li></ul></li></ul><ul style="display: block;" class="nav"><li class="test"><a href="">add</a></li></ul></li></ul> 
```

但我期待这个输出。

```
<ul style="display: block;" class="nav">
    <li class="test">
    <li class="test">
        <a class="parent" href="#">Shoes</a>
        <ul>
            <li>
                <a class="parent" href="#">Womens</a>
                <ul>
                    <li><a href="#">Sandals</a></li>
                    <li><a href="#">Sneakers</a></li>
                    <li><a href="#">Wedges</a></li>
                    <li><a href="#">Heels</a></li>
                    <li><a href="#">Loafers</a></li>
                    <li><a href="#" class="last" >Flats</a></li>
                </ul>
            </li>
            <li>
                <a class="parent last"  href="#">Mens</a>
                <ul>
                    <li><a href="#">Loafers</a></li>
                    <li><a href="#">Sneakers</a></li>
                    <li><a href="#">Formal</a></li>
                </ul>
            </li>
        </ul>
    </li>
    </ul>
Can anybody tell what logic i need to change
Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:15:43.753

试试这个

```
<?php 

function GenerateNavHTML($nav)
{ 
    if(!empty($nav)) {

          if(isset($nav[0]['parent'])) {
                 $parentid=$nav[0]['parent'];
          }else{
              $parentid=1;
          }
         if($parentid==0) {
             $html = '<ul style="display: block;" class="nav">';
         }else {
             $html='<ul>';
         }
           foreach($nav as $page) {
                $html.='<li>';    
                $html .= '<a href="#">k</a>';
                $html .= GenerateNavHTML($page['sub']);
                $html .= '</li>';
            }
            $html.='</ul>';
            return $html;
     }
}

   ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:31:46.503

尝试这样做：

```
<?php 

function GenerateNavHTML($nav)
{ 
    $html = '<ul>';
    foreach ($nav as $page) {
        $html.='<li>';
        $html .= '<a href="#">k</a>';
        $html .= GenerateNavHTML($page['sub']);
        $html .= '</li>';
    }

    $html .= '</ul>';
    return $html;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:53:26.127

你可以试试这个方法：

```
function GenerateNavHTML($nav)
{
    if (empty ($nav))
        return;

    $html = '';
    $html.='<ul>';

        foreach($nav as $page)
        {
            $html.='<li>';
                $html .= '<a href="#">'.$page["name"].'</a>';
                $html .= GenerateNavHTML($page['sub']);
            $html .= '</li>';
        }

    $html.='</ul>';

    return $html;
} 
```

从 for each 循环中获取 ul 标签。

# java - 包含对象类型的 Java JPanel 组合框

> ID：15948688
> 
> 赞同：0
> 
> 时间：2013-04-11T12:22:58.103
> 
> 标签：java, swing, class, object, jpanel

到目前为止，我所看到的组合框只能保存 string 和 int 类型的值，但这是我想要实现的。

```
Class Node
{
  //code here
}

Node a = new Node();
Node b = new Node();

//I am wondering if I can somehow achieve something like
Node item = comboBox.getSelectedItem(); 
```

所以我希望组合框包含节点类型的项目。组合框将允许 a 和 b 值，但选择时它们将注册为 Node 对象。我不确定这是否可能，但只是想知道。感谢您的输入:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:25:02.377

是的，JComboBox 能够包含任何类型的对象。从 1.7 开始，您还可以使用模板定义来定义包含的类型。

# c++ - 增加大小后打印动态数组

> ID：15948690
> 
> 赞同：0
> 
> 时间：2013-04-11T12:23:04.820
> 
> 标签：c++, dynamic-arrays

我目前正在使用动态数组在 MU 游戏上编写代码，但在打印序列时遇到了问题。

规则：如果第一个字符用字符 M 表示，序列的其余部分用 R 表示，则新序列是 MRR。

示例包括：

> 当前序列：MIUI
> 
> 新序列：MIUIIUI
> 
> 当前序列：MUM
> 
> 新序列：妈妈
> 
> 当前序列：MU
> 
> 新序列：MUU

以下是我的代码片段：

主要：

```
if (userchoice == 2)
{
    if (rule2valid == false)
    {
        cout << "This rule may not be applied to your input." << endl;
        return 0;
    }       
    int newsize = size + size - 1;
    char *resultant = new char[newsize];
    resultant = applyRule2(userinput, size);
    printarray (resultant, newsize);
} 
```

在应用规则的函数中：

```
char *applyRule2(char* sequence, int size)
{
int newsize = size + size - 1;
int j = 1;

char* applyRule = new char[newsize];
for (int i = 0; i < size; i++)
    applyRule[i] = sequence[i];
for (int i = size; i < newsize; i++)
{
    applyRule[i] == sequence[j];
}   
return applyRule;
} 
```

和打印功能：

```
void printarray(char* sequence, int size)
{
for (int i = 0; i < size; i++){
cout << sequence[i] << "\t";    
}
cout << "The length of this array is : " << size;
cout << endl;
} 
```

问题是当我运行程序时，我的输出是这样的：

> 输入：妈妈
> 
> 输出：MUM，这个字符串的长度是5。（应该是MUMUM）
> 
> 输入：MIUI
> 
> 输出：MIUI，这个字符串的长度是7。（应该是MIUIIUI）

到目前为止，我所做的是分配了一个具有新大小的新动态数组，并相应地将值添加到数组中。但是，我不知道问题出在 applyRule2 函数还是 printarray 函数中。

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:34:19.317

您的代码中有一些错误。正如 Alf 所说，你真的应该使用`std::string`. 但无论如何这里有一些错误。

```
for (int i = size; i < newsize; i++)
{
    applyRule[i] == sequence[j];
} 
```

应该

```
for (int i = size; i < newsize; i++)
{
    applyRule[i] = sequence[j];
} 
```

`==`当你应该写一个 equals 时，你有一个 double equals `=`。你的编译器应该已经警告你了，注意编译器警告。

另一个错误

```
char *resultant = new char[newsize];
resultant = applyRule2(userinput, size); 
```

应该

```
char *resultant = applyRule2(userinput, size); 
```

您编写的代码分配了一些内存，然后在下一行它丢弃了该内存，而是使用您在`applyRule2`. 所以这实际上不是一个错误，但它是一种资源浪费。你的程序永远不会收回浪费的内存。这称为*内存泄漏*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:23:44.277

只需使用`std::string`而不是原始数组和原始指针和`new`

# c++ - STL 映射插入复制构造函数

> ID：15948695
> 
> 赞同：1
> 
> 时间：2013-04-11T12:23:16.467
> 
> 标签：c++, map, stl

我将 MyClass 类型的对象作为对存储`<std::string, MyClass>`在 STL 映射中。std::string 是每个 MyClass 对象的唯一名称。我希望每个 MyClass 对象每个名称只实例化一次，因此在我的应用程序最后只销毁一次。所以我尽量避免调用复制构造函数或默认构造函数，因为它们可能会调用破坏。MyClass 对象是指某种只应分配/释放一次的资源。我尝试使用此代码创建 MyClass 的实例，将它们放在我的地图中并返回指向刚刚创建的实例的指针。

```
MyClass* FooClass::GetItem(std::string name)
{
    MyClass* item = GetItemExists(name);

    if (item == NULL)
    {
        item = &(*((this->myMap.insert(std::pair<std::string, MyClass>
                                      (name, MyClass(name)))).first)).second;       
    }

    return item;
} 
```

创建和插入以这种方式工作。但是MyClass类的析构函数叫做3！次。甚至`return item;`语句也会调用析构函数，因为这是一个指针？！我认为这是不可能的，必须被强迫`delete item`？！

我认为另一种方法是在地图中存储指针 MyClass* 而不是对象。还是有更好的选择？我没有使用`myMap[name] = MyClass(name);`以避免复制/破坏，但我认为插入并没有让它变得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:30:27.707

您需要放置并分段构造插入的元素：

```
item = &(this->myMap.emplace(std::piecewise_construct,
                             std::forward_as_tuple(name),
                             std::forward_as_tuple(name)).first->second); 
```

# javascript - CryptoJS.AES.decrypt 失败的原因？

> ID：15948699
> 
> 赞同：3
> 
> 时间：2013-04-11T12:23:34.990
> 
> 标签：javascript, encryption, cryptojs

该`CryptoJS.AES.decrypt`函数返回一个空的 WordArray。

我的参数是`secret`、`key`和`iv`。key 是一个 256 位的 WordArray 并且被确认是正确的，iv 是一个 128 位的 WordArray 并且也被确认是正确的。

秘密是使用 php 加密的`openssl_encrypt()`- 明文是 32 个字节 - 结果是 48 个字节（所以它似乎是正确填充）。

我已经尝试将 secret 作为 WordArray、Hex 字符串和 base64 字符串，但是当我调用时：

```
var decrypted = CryptoJS.AES.decrypt(secret, key, {iv: iv}); 
```

解密的是一个空的 WordArray。这让我发疯......什么失败了？我认为这个错误在某个地方是秘密的，有填充格式或一些奇怪的东西，但是`Cryptojs`和 o`penssl_(encrypt/decrypt)`之前已经证明对我来说是相互兼容的。在我失去理智之前请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:54:42.507

好的，所以关键是文档`CryptoJS.AES.decrypt(message, key, {iv:iv})`说您可以为参数提供 WordArray、Hex 或 Base64 `message`。这似乎不是真的。

我可以让它工作的唯一方法是给它一个 Base64 字符串来工作。

key 和 iv 必须仍然是`WordArray`

*当我在数小时的时间里尝试 Base64 字符串时，我一定没有将服务器上的输出更改为实际发送 Base64 - 所以你去吧。

不过，感谢@CodesInChaos 提出了字节序。它让我再次搞乱了编码。

...现在清理所有那些散布在代码中`console.log()`的 ' 和`var_dump()`'...

# php - 如何使用 jQuery 和 PHP 创建计算以及动态添加的行

> ID：15948703
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:23:43.030
> 
> 标签：php, jquery

我有一个表单，可以在单击按钮时动态添加表格行。到目前为止一切正常，但现在我需要计算两个名为`unit`and`rate` 的字段，计算应该类似于`unit*rate = amount`，金额的值应该显示在我的总金额字段中。我知道简单的计算，但我不知道如何使用动态添加的行来做到这一点。谁能帮我吗？

**这是我添加新行的脚本：**

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type='text/javascript'>
        //<![CDATA[
  $(document).ready(function() {
          var currentItem = $('#items').val();
                $('#addnew').click(function() {
                    currentItem++;
                    $('#items').val(currentItem);
                    //var strToAdd = ;
                     $('#data').append('<tr><td align="center"><input type="text" size="6" maxlength="6" id="ord" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth" onkeyup="return copy(this.val());"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="6" id="srno" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth"/></td>\n\
                                        <td align="center"><textarea name="descrip_' + currentItem + '" id="descrip" cols="70" class="form-input-textarea"></textarea></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="unit" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="prevqty" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="thisqty" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="qty" maxlength="6" name="unit_' + currentItem + '" class="qty form-input-rate"  onkeyup="calculateRow();"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="rate" maxlength="6" name="rate_' + currentItem + '" class="rate form-input-rate"  onkeyup="calculateRow();"/></td>\n\
                                        <td align="center"><input type="text" size="6" maxlength="9" id="amt" maxlength="6" name="amt_' + currentItem + '" class="cal form-input-rate"  onkeyup="calculateRow();"/></td>\n\
                                        </tr>');

                });
            });
   //]]>
     </script> 
```

这是我的计算代码，但是当我添加新行时它似乎不起作用

```
function calculateSum() {

    var sum = 0;
    $(".cal").each(function () {
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    $("#total").val(sum.toFixed(2));
}

function calculateRow() {

    $('.qty, .rate').keyup(function () {
        var cost = 0;
        var $row = $(this).closest("tr");
        var qty = parseFloat($row.find('.qty').val());
        var rate = parseFloat($(".rate").val())
        cost = qty * rate;
           //  alert($("#rate").val());

        if (isNaN(cost)) {
            $row.find('.cal').val("0");
        } else {
            $row.find('.cal').val(cost);
        }
        calculateSum();
    })
}
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:23:06.437

您的代码有一些问题。首先，输入元素上的 ID 属性将在页面上的每一行重复。这是无效的 HTML。页面上的每个 ID 都应该是唯一的。

其次，您要`onkeyup`在调用 的单位、速率和总输入上添加一个事件，`calculateRow`然后将另一个事件重新绑定`keyup`到输入。所以每次你按下一个键，你就是在*一次又一次地*绑定函数。尝试这个：

```
function calculateRow() {
    var cost = 0;
    var $row = $(this).closest("tr");
    var qty = parseFloat($row.find('.qty').val());

    // changed the following line to only look within the current row
    var rate = parseFloat($row.find('.rate').val());

    cost = qty * rate;

    if (isNaN(cost)) {
        $row.find('.cal').val("0");
    } else {
        $row.find('.cal').val(cost);
    }
    calculateSum();
} 
```

* * *

***更新：***

我还将删除内联`onkeydown`事件绑定并将其向上移动：

```
$('#data').on('keyup', '.qty, .rate, .cal', calculateRow); 
```

这会将事件绑定到元素，并且仅在其中匹配的元素触发事件`#data`时才调用事件侦听器。所以这也适用于动态添加的元素，只要你不删除元素。`.qty, .rate, .cal``#data``#data`

# c# - 通过其子 ui 控件获取 xaml 类名（引用）

> ID：15948707
> 
> 赞同：0
> 
> 时间：2013-04-11T12:23:47.180
> 
> 标签：c#, class, windows-phone-7, xaml

有没有办法通过其子 ui 控件访问 xaml 类引用/名称？代码是--->

```
private void AvailableItemListScrollViewer_Loaded(object sender, RoutedEventArgs e)
        {
             _listScrollViewer = sender as ScrollViewer;

             Binding binding = new Binding();
             binding.Source = _listScrollViewer;
             binding.Path = new PropertyPath("VerticalOffset");
             binding.Mode = BindingMode.OneWay;
             this.SetBinding(ListVerticalOffsetProperty, binding); <---//(this)
        } 
```

这里（如上所示）引用包含`_listScrollViewer`控件的父类，但我想为`AvailableItemListScrollViewer_Loaded`我的应用程序的所有页面编写方法，所以我将它放入一个单独的类中，但这里这个监听器只接收那个 ui 元素引用，所以我怎样才能得到父类？所以我可以像这样写上面的最后一行代码--->

```
(class reference).SetBinding(ListVerticalOffsetProperty, binding) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:31:57.833

为什么不在这里使用 XAML 绑定？喜欢

```
<Page ListVerticalOffset="{Binding Path="VerticalOffset" 
                                   ElementName="ScrollViewerName"}/> 
```

只需根据 ElementName 将此绑定复制到您需要的每个页面

# objective-c - 从 iPhone 中的 UTF8String 编码中检索数据

> ID：15948713
> 
> 赞同：0
> 
> 时间：2013-04-11T12:23:59.157
> 
> 标签：objective-c

我正在使用以下代码将文本保存在 serverDb 中。它可以包含从空格到冒号的任何字符。

```
queryString = [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

可以说我发送了字符串`"I Can't come"`。在服务器中，它将存储为`I can\'t come.`

在检索如何删除此类反斜杠和其他字符时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:35:10.387

```
// While storing       
NSString *queryString =@"I can't come";
queryString = [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%@",queryString);

// While retrieving
queryString = [queryString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%@",queryString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:57:45.763

如果您想处理所有输入，我建议您对您在查询字符串中发送的任何内容进行 url 编码和解码：

```
+ (NSString*)urlEncode:(NSString*)rawString {
    NSMutableString *escaped = [[rawString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] mutableCopy];   
    [escaped replaceOccurrencesOfString:@"$" withString:@"%24" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"&" withString:@"%26" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"+" withString:@"%2B" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"," withString:@"%2C" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"/" withString:@"%2F" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@":" withString:@"%3A" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@";" withString:@"%3B" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"=" withString:@"%3D" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"?" withString:@"%3F" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"@" withString:@"%40" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@" " withString:@"%20" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"\t" withString:@"%09" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"#" withString:@"%23" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"<" withString:@"%3C" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@">" withString:@"%3E" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"\"" withString:@"%22" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"\n" withString:@"%0A" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];

    return escaped;
}

+ (NSString *)urlDecode:(NSString *)rawString {
    NSMutableString *escaped =  [rawString mutableCopy];
    [escaped replaceOccurrencesOfString:@"%24" withString:@"$" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%26" withString:@"&" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%2B" withString:@"+" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%2C" withString:@"," options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%2F" withString:@"/" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3A" withString:@":" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3B" withString:@";" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3D" withString:@"=" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3F" withString:@"?" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%20" withString:@" " options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%40" withString:@"@" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%09" withString:@"\t" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%23" withString:@"#" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3C" withString:@"<" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%3E" withString:@">" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%22" withString:@"\"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];
    [escaped replaceOccurrencesOfString:@"%0A" withString:@"\n" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [escaped length])];

    return escaped;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:32:04.270

这很简单，您只需使用该`- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement`方法即可。这是您的一小段代码：

```
NSString *str = your server string with backslashes
NSString *stringWithoutBackSlashes = [str stringByReplacingOccurrencesOfString:@"\" withString:@""]; 
```

# java - 仅从 html 中获取 href 内容和 src 内容

> ID：15948714
> 
> 赞同：0
> 
> 时间：2013-04-11T12:23:59.860
> 
> 标签：java, android, regex

我想知道如何仅从 html 内容中提取内容`href`。`src`我尝试了正则表达式，但失败了。

这是我想要获取的文本`href`和`src`内容：

```
<a href="http://rdmobile.fr/blog/mobile-la-pub-consomme-plus-que-les-applications-elles-memes/"><img align="left" hspace="5" width="150" height="150" src="http://rdmobile.fr/blog/wp-content/uploads/2012/03/angry-birds-150x150.jpg" class="alignleft tfe wp-post-image" alt="angry-birds" title="angry-birds" /></a>Si vous aussi vous vous étonnez de voir votre batterie fondre comme neige au soleil dès lors que jouez à Angry Birds, rassurez-vous, c’est normal. Des chercheurs de l&#8217;université de Purdue se sont intéressés aux publicités destinées majoritairement aux applications gratuites, et oui, comment les développeurs mangent-ils autrement ? Plus sérieusement, cette étude, publiée sur le [...] 
```

我想提取这样的数据。

href 内容：[http](http://rdmobile.fr/blog/mobile-la-pub-consomme-plus-que-les-applications-elles-memes/) ://rdmobile.fr/blog/mobile-la-pub-consomme-plus-que-les-applications-elles-memes/ src 内容：[http ://rdmobile.fr/blog/wp-content/上传/2012/03/angry-birds-150x150.jpg](http://rdmobile.fr/blog/wp-content/uploads/2012/03/angry-birds-150x150.jpg)

任何人都可以帮助我，我也喜欢学习基本的正则表达式。

谢谢，伊苏鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:45:52.737

像**[JSoup](http://jsoup.org/)**这样的 DOM 解析器非常适合这类问题，并且允许直接与文档交互并使用 CSS 样式选择器：

```
Document document = Jsoup.connect(url).get();
Elements elementsWithSrcAttributes = document.select("[src]");
Elements elementsWithHrefAttributes = document.select("[href]");

for (Element element: elementsWithSrcAttributes) {
    System.out.println("src content: " + element.attr("src"));
}

for (Element element: elementsWithHrefAttributes) {
    System.out.println("href content: " + element.attr("href"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:32:53.530

您可以使用 XML 解析器解析内容。

查看[解析 XML 数据](http://developer.android.com/training/basics/network-ops/xml.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:55:02.827

您不想为此使用正则表达式。只是……不要。[坏事发生](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

您要使用的是[XPath](http://developer.android.com/reference/javax/xml/xpath/package-summary.html)。对于给定的 HTML 文档，`/a/@href`XPath 表达式将返回节点的所有`href`属性。`a`将其视为 XML 的正则表达式。

困难的部分不是 XPath，它相对简单，而是从 HTML 文件中获取有效的 DOM。我推荐[Cyber​​neko](http://sourceforge.net/projects/nekohtml/)，但不知道这是否符合您的 Android 要求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T15:24:49.513

一般不建议使用正则表达式从 html 中提取数据，但以下是一种基本方法的示例

```
String str = "<a href=\"http://rdmobile.fr/blog/mobile-la-pub-consomme-plus-que-les-applications-elles-memes/\"><img align=\"left\" hspace=\"5\" width=\"150\" height=\"150\" src=\"http://rdmobile.fr/blog/wp-content/uploads/2012/03/angry-birds-150x150.jpg\" class=\"alignleft tfe wp-post-image\" alt=\"angry-birds\" title=\"angry-birds\" /></a>Si vous aussi vous vous étonnez de voir votre batterie fondre comme neige au soleil dès lors que jouez à Angry Birds, rassurez-vous, c’est normal. Des chercheurs de l&#8217;université de Purdue se sont intéressés aux publicités destinées majoritairement aux applications gratuites, et oui, comment les développeurs mangent-ils autrement ? Plus sérieusement, cette étude, publiée sur le [...]";        
Matcher m = Pattern.compile(" (?:href|src)=\"([^\"]+)").matcher(str);

while (m.find()) {
    System.out.println(m.group(1));
} 
```

上面将只匹配任何一个或多个不是的字符序列`"`，当它前面有一个`' href="'`或时`' src="'`。

因此，如果属性值周围有单引号或没有引号，或者`=`.

应要求提供进一步解释，或参见例如[Regular-Expressions.info](http://www.regular-expressions.info/index.html)。

# mootools - Mootools - 为所有输入文本元素分配一个功能以清空/撤消内容

> ID：15948728
> 
> 赞同：-2
> 
> 时间：2013-04-11T12:24:51.923
> 
> 标签：mootools

假设我在一个页面上有很多输入 type="text" 。

每当我点击它时，我想删除输入的内容。如果我要更改内容，它将保存它。如果没有，它将恢复原始值。

我想将这种功能自动分配给页面中的所有输入（在准备好文档时）。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:14:38.083

简单的解决方案，使用事件委托，其中父元素（document.body）监视子元素（文本类型的所有输入）的事件：

*   焦点（当用户关注某个元素时触发）
*   模糊（当元素失去焦点时发生事件）

* * *

```
window.addEvent('domready', function() {

    document.body.addEvents({
        'focus:relay(input[type=text])': function(event, target) {
            this.original = this.get( 'value' );
            this.set( 'value', '' );
        },
        'blur:relay(input[type=text])': function(event, target) {
            if ( !this.get( 'value' ) ) this.set( 'value', this.original );
        }
    });

}); 
```

# javascript - 解析具有多个级别的 JSON

> ID：15948732
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:25:00.823
> 
> 标签：javascript, jquery, json

我正在尝试解析已分配给 javascript 变量的 JSON，但由于它具有多个级别，我很难循环遍历它

```
<script type="text/javascript">

        var varJson = {
            "d": {
                "results": [
                    {
                        "__metadata": {
                            "id": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Offices(100013449)",
                            "uri": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Offices(100013449)",
                            "type": "AlfWebApiInfrastructure.Poco.Office"
                        },
                        "Agency": {
                            "__deferred": {
                                "uri": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Offices(100013449)/Agency"
                            }
                        },
                        "Advertiser": {
                            "__deferred": {
                                "uri": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Offices(100013449)/Advertiser"
                            }
                        },
                        "Contacts": {
                            "results": [
                                {
                                    "__metadata": {
                                        "id": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Contacts(id=59980,jobId=1000105450)",
                                        "uri": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Contacts(id=59980,jobId=1000105450)",
                                        "type": "AlfWebApiInfrastructure.Poco.Contact"
                                    },
                                    "id": 59980,
                                    "jobId": 1000105450,
                                    "mask": 67108863,
                                    "name": "Name",
                                    "jobtitle": "Job Title",
                                    "email": "email",
                                    "companyType": "companyType",
                                    "companyId": 1787,
                                    "officeId": 100013449,
                                    "address1": "address1",
                                    "address2": "",
                                    "address3": "",
                                    "address4": "",
                                    "addressTown": "addressTown",
                                    "addressPostCode": "addressPostCode",
                                    "tel": "tel",
                                    "fax": "fax",
                                    "responsibilities": "responsibilities"
                                },
                                {
                                    "__metadata": {
                                        "id": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Contacts(id=64085,jobId=1000105448)",
                                        "uri": "http://www.bradinsight.com/ALFAPI/AlfWebApi/Contacts(id=64085,jobId=1000105448)",
                                        "type": "AlfWebApiInfrastructure.Poco.Contact"
                                    },
                                    "id": 64085,
                                    "jobId": 1000105448,
                                    "mask": 67108863,
                                    "name": "name",
                                    "jobtitle": "jobtitle",
                                    "email": "email",
                                    "companyType": "companyType",
                                    "companyId": 1787,
                                    "officeId": 100013449,
                                    "address1": "address1",
                                    "address2": "",
                                    "address3": "",
                                    "address4": "",
                                    "addressTown": "addressTown",
                                    "addressPostCode": "addressPostCode",
                                    "tel": "tel",
                                    "fax": "fax",
                                    "responsibilities": "responsibilities"
                                }
                            ]
                        },
                        "id": 100013449,
                        "companyId": 1787,
                        "addressLine1": "addressLine1",
                        "addressLine2": "",
                        "addressLine3": "",
                        "addressLine4": "",
                        "addressLine5": "addressLine5",
                        "postCode": "postCode",
                        "regionId": "regionId",
                        "countyId": "countyId",
                        "tvAreaId": "L",
                        "telephone": "telephone",
                        "fax": "fax8",
                        "countryId": "countryId",
                        "email": "email",
                        "isdn": null,
                        "mask": 66060287
                    }
                ]
            }
        };

        $(document).ready(function () {

            //var parsed = JSON.parse(varJson);

            alert(varJson);

        });

    </script> 
```

我尝试使用这个：

```
$.each(varJson, function (index, item) {
              alert(item);

                }); 
```

但它只是在我的警报中说对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:37:19.890

试试这个，

```
function traverse(jsonObj) {
  if( typeof jsonObj == "object" ) {
    $.each(jsonObj, function(k,v) {
        traverse(v);
    });
  }
  else {
    alert(jsonObj);
  }
}

$(document).ready(function () {
   traverse(varJson);
}); 
```

[http://jsfiddle.net/satpalsingh/hXEr8/](http://jsfiddle.net/satpalsingh/hXEr8/)

参考[Traverse the all Nodes of a JSON Object Tree with JavaScript](https://stackoverflow.com/questions/722668/traverse-all-the-nodes-of-a-json-object-tree-with-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:26:52.947

你不需要在你的例子中解析它。

使用`console.log`代替，`alert`您将在您的网络检查器中使用该对象。

* * *

如果你确实想做`alert`这样的事情

`alert(varJson.d.results[0].__metadata.id)`

# php - 使用 preg_match 检查单词

> ID：15948733
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:25:02.237
> 
> 标签：php, preg-match

我在每个单词之间都有一些单词，`|`我试图用`preg_match`它来检测它是否包含目标单词。

我用过这个：

```
<?php

$c_words = 'od|lom|pod|dyk'; 
$my_word = 'od';  // only od not pod or other word

if (preg_match('/$my_word/', $c_words))
{
echo 'ok';
}

?> 
```

但它不能正常工作。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:27:11.327

不需要正则表达式。这些功能将为您做一切[`explode($delimiter, $str);`](http://php.net/manual/en/function.explode.php)。[`in_array($needle, $haystack);`](http://php.net/manual/en/function.in-array.php)

```
// splits words into an array
$array = explode('|', $c_words);

// check if "$my_word" exists in the array.
if(in_array($my_word, $array)) {
    // YEP
} else {
    // NOPE
} 
```

* * *

除此之外，您的正则表达式也会匹配包含相同序列的其他单词。

```
preg_match('/my/', 'myword|anotherword'); // true
preg_match('/another/', 'myword|anotherword'); // true 
```

这就是为什么在这种情况下不应该使用正则表达式的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:27:28.743

您不能将变量传递给带有单引号的字符串，您需要使用

```
preg_match("/$my_word/", $c_words); 
```

或者——我发现那个更清洁的：

```
preg_match('/' .$my_word. '/', $c_words); 
```

但是对于像我什至不知道我是否会使用正则表达式这样简单的事情，一个简单的`if (strpos($c_words, $my_word) !== 0)`就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:29:48.870

你用`preg_match()`错了方法。由于您使用`|`的是分隔符，您可以试试这个：

```
if (preg_match('/'.$all_words.'/', $my_word, $c_words))
{
    echo 'ok';
} 
```

阅读. [_`preg_match()`](http://php.net/manual/en/function.preg-match.php)

# java - 无法在 servlet 中使用 Axis2 Web 服务存根

> ID：15948740
> 
> 赞同：0
> 
> 时间：2013-04-11T12:25:17.927
> 
> 标签：java, servlets, axis2

我已经为它创建了一个 Axis2 Web 服务和一个客户端。我想在我的 servlet 中使用这个客户端。我的 ServiceStub 中有类型（带有字段的类和这些字段的 getter/setter）。如果我想使用使用存根和这些类型的客户端，我会得到错误。我尝试不使用这些类型，但存根遇到了同样的错误：`java.lang.NoClassDefFoundError: services/ManagerServiceStub.`这是我的代码的一部分：

```
public static Protocol[] someMethod(ServiceMessage srvMsg) {
        try {
            ProtocolMessage prMsg = ManagerServiceClient.getProtocols("user","pw");
            if (prMsg.getCode() == 1)
                return prMsg.getProtocolArray();
            else
                return null;
        } catch (Exception e) {
            System.err.println("Failed getting protocolos");
            e.printStackTrace(System.err);
            return null;
        }
    } 
```

从 servlet 调用此方法。如果从简单的 Java 应用程序调用它，它就可以正常工作。堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [servlets.Node] in context with path [/nodeCreation] threw exception [Servlet execution threw an exception] with root cause
java.lang.NoClassDefFoundError: services/ManagerServiceStub
    at client.ManagerServiceClient.getStub(ManagerServiceClient.java:28)
    at client.ManagerServiceClient.getProtocols(ManagerServiceClient.java:116)
    at jsp.Protocols.someMethod(Protocols.java:11)
    at servlets.Node.doGet(Node.java:35)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我想到的一件事是我在同一个 tomcat 服务器上使用了 servlet 和 web 服务。另一方面，如果 servlet 不尝试调用 Web 服务，它们都可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:53:14.337

它清楚地表明在运行时您的 servlet 找不到存根。您是否将存根类保存在 servlet 可以访问的类路径中？确保存根在类路径中可用。

# vim - GVim/Vim。如何删除直到某个单词的所有空格

> ID：15948742
> 
> 赞同：0
> 
> 时间：2013-04-11T12:25:21.003
> 
> 标签：vim

我是一名 .Net 开发人员，但最近开始涉足 Vim（或在我的实例中为 GVim），以便在需要执行重复的文本编辑器类型任务时使用。

我的经验基本上是不存在的。所以请多多包涵。此外，我意识到我可以在 Visual Studio 中使用 GUI 工具或东西，但我正在尝试 Vim 路线，因为我想时不时地掌握一个新的实用程序/应用程序。

假设我有一个文本文件，其中包含很多属性（尽管可以是任何文本），如下所示：

> ```
>  public string AccountNumber { get; set; }
> 
>     public string CustomerName { get; set; }
> 
>     public string ExpiryDate { get; set; }
> 
>     public string IdentityNumber { get; set; }
> 
>     public string OfferDate { get; set; } 
> ```

我想使用字符串替换方法来删除属性名称之前和之后的所有内容。

例如以：

```
 AccountNumber, 
 CustomerName, ... etc. 
```

到目前为止，我已经成功

> *   1）Alt+左键+拖动选中前面的所有空格&删除
> *   2) :%s/public\ string\ //
> *   3) :%s/\{\get;\set;\}/,/

纯粹出于好奇，我想知道是否可以更新我的第二步以包括删除空白。

我意识到 ^ 字符表示行首，而（我认为） \s 表示空格，但这就是我的知识结束的地方。

我在想类似的东西？

> :%s/^\s+字符串//

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:32:04.787

解决此问题的一种方法是录制宏

```
qq          # start recording macro into register q
0w          # move to first non-whitespace caracter. Omit this if no WS at start of line
d2w         # delete 2 words
w           # move a word forward
D           # delete to en of line 
q           # quit macro recording 
```

站在一行的开头，做`@q` 后续行，重复使用宏`.`

或者，尝试以下替换

```
:%s/^\s*public string\s*\([a-zA-Z]*\).*$/\1/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:34:35.097

我想出了这个，

```
%s/^\v\s*(\s*\w+){2}\s?(\w+).*/\2/g 
```

准确地说，这条线不知道哪个词是你的“财产”。它只是将第三个单词留在该行中，删除其他任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:24:13.350

在这种情况下，使用`:normal`将是宏的替代方法或宏：`:s`

```
:%norm 03dwelD 
```

您可能想要使用除整个文件之外的其他范围，`%`. 我建议使用`V`then execute直观地选择行`:norm 03dwelD`。键入后，`:`您的提示将如下所示`:'<,'>`。这是对的。

如需更多帮助，请参阅：

```
:h :norm 
```

# c# - 本机 Xml 处理或（外部）库

> ID：15948744
> 
> 赞同：0
> 
> 时间：2013-04-11T12:25:24.643
> 
> 标签：c#, xml-deserialization

我有多个项目，每个项目都有不同的配置，所有这些配置都必须在一个 XML 文件中指定。那不是 app.config，而是在通用位置上指定的。

我目前的项目结构：

*   核心项目（带有一些 XML）
*   子项目（需要以通用方式访问核心 XML 配置 + 来自同一 XML 文件的自己的配置）

哪种 .NET XML 技术最适合这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:37:32.743

我没有在您的帖子中读到任何建议，即 .Net 框架的内置 Xml 功能无法胜任这项任务。

我几乎每天都使用 Xml，到目前为止，我从来不需要任何外部库。当然，这完全取决于您的项目要求，但是您有两个项目将使用相同的功能，因此您可以（并且应该）轻松地对两个项目的 Xml 处理进行抽象和隔离，或者引用您自己的核心\子项目中的 xml 类或（我的偏好）在单独的 dll 项目中。一个 dll 可以在未来很好地为您服务。

编写自己的 Xml 功能的另一个好处是，您可以收集更多关于 .Net Xml 命名空间的内部工作原理的知识，这些知识绝不会被浪费，而您可以通过使用外部库（即通常只是 .Net 类的包装器和外观）

希望这对编码有所帮助和快乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:49:33.883

app.config 文件可能最适合这种情况。您可以创建自己的配置部分，并且所有引用的程序集都可以访问项目的单个配置文件，因此每个程序集都可以有自己的部分。您还可以在 user.config 中进行用户特定的配置（请参阅[应用程序设置架构](http://msdn.microsoft.com/en-AU/library/8eyb2ct1.aspx)）。

如果你不能使用 app.config 因为它需要在一个特定的位置，你总是可以从不同的位置加载一个 app.config 文件`[ConfigurationManager.OpenMappedExeConfiguration](http://msdn.microsoft.com/en-us/library/ms134269.aspx)`

其他选择：

*   使用`[XmlSerializer](http://msdn.microsoft.com/en-au/library/system.xml.serialization.xmlserializer.aspx)`您的配置将 XML 反序列化为 POCO。
*   自虐选项：使用普通`XDocument`或动态`XmlDocument`手动解析您的配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:18:33.737

当前问题的解决方案：

使用 LINQ to XML，我采用了与对象匹配的 XML 元素。此 XML 元素比根更深一层。通过这种方式，我首先“过滤”根标签，然后将其转换为字符串，然后转换为具有反序列化的对象。

例如

```
<root>
    <project1>
       <somevalue>myvalue</somevalue>
    </project1>
    <project2/>
</root> 
```

如果我想要 project1 中的所有内容，我将使用 LINQ to XML 获取带有后代的字符串，然后将字符串反序列化为相应的对象。

# symfony - Symfony2 FOS 评论包错误

> ID：15948749
> 
> 赞同：2
> 
> 时间：2013-04-11T12:25:37.477
> 
> 标签：symfony, bundle, foscommentbundle

我的 FOSCommentBundle 有问题。我已经设置了我的捆绑包，它工作了几天，但今天它不工作了。我正在粉碎我的头，无法找到解决方案。

问题是 fos_comment_script.src = '/web/js/35a8e64_comments_1.js' 不存在，我无法访问它，因此没有添加任何线程，也没有显示任何内容。我没有收到任何错误，什么都没有，一切看起来都很好，但什么也没发生。我正在使用 async.twig.html 并且在我的页面上生成的 javascript 看起来像这样

```
// thread id
var fos_comment_thread_id = '309';

// api base url to use for initial requests
var fos_comment_thread_api_base_url = '/web/api/threads';

// Snippet for asynchronously loading the comments
(function() {
var fos_comment_script = document.createElement('script');
fos_comment_script.async = true;
fos_comment_script.src = '/web/js/35a8e64_comments_1.js';
fos_comment_script.type = 'text/javascript';

(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(fos_comment_script);
})(); 
```

谢谢你提前变化很大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:24:18.363

您可能在清除缓存后忘记运行 php`./app/console assetic:dump --env=dev`什么的。有关更多信息，请查看[symfony 食谱的资产管理部分](http://symfony.com/doc/2.0/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment)

# c# - HttpListener 调用了两次

> ID：15948750
> 
> 赞同：1
> 
> 时间：2013-04-11T12:25:38.967
> 
> 标签：c#, .net

我正在使用此代码来实现 Http Server：

```
public Server()
    {
        _httpListener = new HttpListener();
        _httpListener.Prefixes.Add(Server.UriAddress);
        StartServer();
    }

    public void StartServer()
    {
        _httpListener.Start();

        while (_httpListener.IsListening)
            ProcessRequest();
    }

    void ProcessRequest()
    {
        var result = _httpListener.BeginGetContext(ListenerCallback, _httpListener);
        result.AsyncWaitHandle.WaitOne();
    }

    void ListenerCallback(IAsyncResult result)
    {
        HttpListenerContext context = _httpListener.EndGetContext(result);
        HttpListenerRequest request = context.Request;
        string url = request.RawUrl;
        url = url.Substring(1, url.Length - 1);

        HttpListenerResponse response = context.Response;
        string responseString = url;
        byte[] buffer = System.Text.Encoding.UTF8.GetBytes(responseString);
        response.ContentLength64 = buffer.Length;
        System.IO.Stream output = response.OutputStream;
        output.Write(buffer, 0, buffer.Length);
        output.Close();
    } 
```

我有一个问题，如果我在浏览器中写了这个（这是一个例子，每次通话都会发生）：

```
http://localhost:8888/Hello%20World 
```

该`ListenerCallback`方法被调用了两次，知道如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-11T06:12:26.917

一个答案已经被接受，但我认为它可能对其他人以后仍然有用。

默认情况下，给定 URL 的大多数浏览器至少会进行两次调用。一次调用请求 URL，另一次调用 favicon.ico。

所以应该在 ListenerCallback 中进行检查，例如

```
HttpListenerContext context = _httpListener.EndGetContext(result);
HttpListenerRequest request = context.Request;
string url = request.RawUrl;
url = url.Substring(1);
if (url == "favicon.ico")
{
    return;
}
//normal request handling code 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:32:37.090

如果您的网站需要多次调用服务器，它将被多次调用。当您的页面上有图片或其他任何内容时，就会发生这种情况。
尝试调用同步方法或使用或`_httpListener.GetContext()`同步您的调用。 `lock``Mutex`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T17:00:32.030

我不确定，但我想我知道您的代码可能有什么问题。您正在混合两种异步处理模式您通过等待异步结果中的等待句柄来释放主线程。但我认为只有你可以调用 endgetcontext 的信号，而不是另一个线程可以使用监听器的信号。如果您使用回调模式，则应使用 asyncresult 中提供的等待句柄以外的等待句柄释放主线程

# mysql - 如何在另一个表B中加入mysql复选框表A和复选框结果字段？

> ID：15948754
> 
> 赞同：2
> 
> 时间：2013-04-11T12:25:50.467
> 
> 标签：mysql, sql

我有按照这个 sqlFiddle 的表： [http ://www.sqlfiddle.com/#!2/df04a/1](http://www.sqlfiddle.com/#!2/df04a/1)

```
Onepiece table:

|  ID |  Checkbox_IDs   | 
| 1   | 1,2             |
| 2   | 3               |

checkbox
| ID  | Name            |
|  1  | Luffy           |
|  2  | Zorro           | 
```

请帮我查询，我想要“onepiece”表中的所有行，而不是显示“1,2”或“2,3,4”的 checkbox_id 列，它应该显示复选框上的数字链接桌子：

```
Onepiece results table:

|  ID |  Checkbox_IDs   | 
| 1   | Luffy, Zorro    |
| 2   | Sanji           | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:40:57.673

```
SELECT  a.ID,
        GROUP_CONCAT(b.Name) Names
FROM    OnePiece a
        INNER JOIN CheckBoxes b
            ON FIND_IN_SET(b.ID, a.Checkbox_ID) > 0
GROUP   BY a.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/df04a/34)
*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

输出

```
╔════╦═════════════════════╗
║ ID ║        NAMES        ║
╠════╬═════════════════════╣
║  7 ║ Luffy,Zorro         ║
║  8 ║ Sanji               ║
║  9 ║ Sanji,Chopper,Zorro ║
╚════╩═════════════════════╝ 
```

# ios - 将新单元格添加到 UITableView 时选择 UITableViewCell 文本

> ID：15948757
> 
> 赞同：0
> 
> 时间：2013-04-11T12:25:57.540
> 
> 标签：ios, uitableview

我有一个`UITableView`包含 basic`UITableViewCell`的 basic。当我在表格中添加一个新单元格时，我想：

1）滚动到新行

2) 选择新 UITableViewCell 中的所有文本，使键盘可见，用户可以立即编辑单元格的文本。

下一次通过事件循环（在表视图上调用 -reloadData 之后）我这样做：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:wordIndex inSection:0];

[self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:(UITableViewScrollPositionNone)];

UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:indexPath];  
[cell.textLabel becomeFirstResponder];
cell.highlighted = YES; 
```

滚动正确，但未选择单元格中的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:37:49.760

A`UILabel`不能成为第一响应者，因为它`NO`从`canBecomeFirstResponder`. 要给出已编辑标签的错觉，您可以尝试使用 a`UITextField`和 a `borderStyle`of `UITextBorderStyleNone`。

注意`becomeFirstResponder`调用的时间，因为如果控件不是窗口的子视图，它就不能成为第一响应者。如果您滚动到离屏幕很远的行并`becomeFirstResponder`在将其添加为可见行之前立即尝试调用，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:33:34.690

与之前的答案一样，您可以创建 UITableViewCell 的自定义子项，在其上添加 UITextField。

```
@interface MyTableViewCell : UITableViewCell
@property(nonatomic, retain) IBOutlet UITextField *editableTextField;
@end 
```

比您可以在控制器中捕获 didSelectRowAtIndexPath 并将其文本字段设置为第一响应者

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
MyTableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
[cell.editableTextField becomeFirstResponder];
} 
```

UPD：作为 Not-in-wind-cell 故障的故障解决方法，如上答案所述，您必须在方法中调用 selectCellAtIndexPath

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

# eclipse - 如何在 Git 中忽略这个 Eclipse 文件？

> ID：15948761
> 
> 赞同：1
> 
> 时间：2013-04-11T12:26:04.623
> 
> 标签：eclipse, git, ignore

我尝试将它添加到我的全局*.gitignore*但当我这样做时它仍然显示为未跟踪的文件`git status`。

```
researchProject/.externalToolBuilders/org.eclipse.wst.jsdt.core.javascriptValidator (4).launch 
```

我禁用了 JavaScript 验证器，因为它一直给我的构建错误——我找到的唯一解决方案是禁用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T12:31:03.577

将以下行添加到您的`.gitignore`文件中：

```
.project
.settings
.classpath
.metadata 
```

对于你的情况也

```
.externalToolBuilders 
```

你应该很高兴。

如果您正在处理特定于 Eclipse 的项目，请不要添加`.project`和。`.classpath``.gitignore`

# mongodb - 查询嵌套在 mongoDB

> ID：15948762
> 
> 赞同：1
> 
> 时间：2013-04-11T12:26:05.640
> 
> 标签：mongodb, mongodb-query

我现在正在学习 MongoDB 几个星期，但我仍然不知道如何在我的项目中查询嵌套文档。我阅读了 MongoDB 文档并在 Google 上搜索了很多，但我没有找到很好的解释或教程来解决我的问题。也许你可以帮助我！

我有一个具有以下结构的集合（这里是 JSON 输出）：

```
{
    community: "1",
    date: 1365680790125,
    isIndoor: "true",
    party: {
        teams: [
            {
                isWinner: true,
                players: [
                    {
                        name: "jim",
                        hits: 4,
                        isFinisher: true
                        },
                        {
                            name: "john",
                            hits: 6,
                            isFinisher: false
                        }
                    ]
                    },
                    {
                        isWinner: false,
                        players: [
                            {
                                name: "mike",
                                hits: 6,
                                isFinisher: false
                                },
                                {
                                    name: "moe",
                                    hits: 3,
                                    isFinisher: false
                                }
                            ]
                        }
                    ]
                    },
                    id: "3141be7f9988d872"
                } 
```

现在我想获取“jim”参与的所有记录。

我试过这个查询（在coffeescript中），但我没有得到任何结果，我认为它非常糟糕......

```
query = party:
$all:[
    teams: 
        $in: [
            player: [
                name: 'jim'
            ]
        ]
    ] 
```

我希望你能帮助我理解查询嵌套文档。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:41:02.333

使用[点表示法](http://docs.mongodb.org/manual/core/document/#dot-notation)查询嵌入对象的字段：

```
query = { 'party.teams.players.name': 'jim' } 
```

# c# - 0x800a1391 - JavaScript 运行时错误：“jQuery”未定义

> ID：15948763
> 
> 赞同：4
> 
> 时间：2013-04-11T12:26:12.390
> 
> 标签：c#, javascript, jquery, razor, asp.net-mvc-4

我有一个 ASP .Net MVC4 Web 应用程序。在其中我有我常用的 _Layout.cshtml html，它依次加载默认的 Home/Index。一切正常。

在我的索引中，我还加载了部分视图。这也很好。没有问题。

我正在使用来自以下站点的 UI 工具：

[http://www.keenthemes.com/preview/index.php?theme=metronic](http://www.keenthemes.com/preview/index.php?theme=metronic)

问题是它似乎主要是 HTML4 并且不是为开箱即用的 MVC 设计的，所以我不得不稍微调整它以使其以我想要的方式工作。（除了任何非常基本的东西之外没有什么）。例如，将一部分移出索引并使用 Renderbody() 加载它，因此实际的 html 结构永远不会改变。我已经这样做了一百万次，以确保我没有遗漏任何结束标签或任何其他可能导致我的问题的东西。

到目前为止，完全没有问题。一切都按原样加载。

我继续创建第二个视图及其部分以提取站点的其他部分。像往常一样，婴儿先一步。在提取任何其他代码之前，我只是在第一页中使用了一点“Hello World”，并在部分中使用了一个类似的字符串以确保它正常工作。它是。

现在，当我输入 url Home/ActionName 时，整个事情会按原样重新加载，但看起来很糟糕。我收到此错误消息：

0x800a1391 - JavaScript 运行时错误：“jQuery”未定义

下面是我的代码，它清楚地定义了它：

```
<!-- BEGIN CORE PLUGINS -->
<script src="assets/plugins/jquery-1.8.3.min.js" type="text/javascript"></script>
<script>
    jQuery(document).ready(function ()
    {
        App.init(); // initlayout and core plugins
        _Layout.init();
        _Layout.initJQVMAP(); // init index page's custom scripts
        _Layout.initCalendar(); // init index page's custom scripts
        _Layout.initCharts(); // init index page's custom scripts
        _Layout.initChat();
        _Layout.initDashboardDaterange(); //Red date range
        _Layout.initIntro(); //Pop up messages
    });
</script> 
```

当我看到消息时，它指向 jQuery(document).ready 部分。

同样，当我正常加载页面时，它工作正常。当我自己键入 Home 时，它​​工作正常。只有当我键入 Home/AnythingElse 时，它​​才会给出此错误消息。即使我键入 Home/ 应该加载到索引文件中，它也会给我这个错误消息。

jQuery 已定义，那么为什么会在回发时发生这种情况？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T12:48:35.293

尝试将 jQuery 的 src 设置为站点根目录中的绝对值：

```
<script src="/assets/plugins/jquery-1.8.3.min.js" type="text/javascript"></script> 
```

请注意`/`之前`assets`- 当您的 src 路径不以 a 开头时`/`，浏览器将尝试加载相对于当前路径的资产，因此在您的示例中，当您添加斜杠时`Home`，它将尝试从`Home/assets/plugins/...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T23:47:22.477

对我来说，MVC捆绑器**引起了问题**（在我的例子中是 ui 捆绑器）

这是对我有用的订单。

```
 <script src="/Scripts/modernizr-2.5.3.js"></script>
    <script src="/Scripts/jquery-1.7.1.js"></script>
    <script src="/bundles/jquery-ui"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="/Scripts/jquery.validate.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T16:01:01.443

您需要在 validate.js 之前先添加 jquery-x.xx.x.js 像这样

```
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script> 
```

# c++ - 为什么我们要为 C++ 应用程序构建 64 位目标？

> ID：15948767
> 
> 赞同：10
> 
> 时间：2013-04-11T12:26:25.720
> 
> 标签：c++, 32bit-64bit

这是我的一个非常基本的疑问。我不是 IT 或 CS 人，所以请尽量用简单的语言解释。现在我问这个问题的原因是因为我们可以在 64 位和 32 位操作系统中运行 32 位应用程序。AFAIK 64 位的数据类型占用的内存量是 32 位应用程序的两倍。此外，64 位应用程序只能在 64 位操作系统上运行。那为什么还要麻烦构建 64 位应用程序呢？也许这就是为什么 Firefox 只提供 32 位的原因？？？抱歉，如果这个问题与 SO 的标准不符，但我无法控制停止思考同样的问题。谢谢你。

更新：不知何故，似乎有些混乱。我并不是要质疑为什么我们需要 64 位架构的机器。我知道 32 位机器只能使用 4GB RAM 而 64 位机器有更高的限制。 **我在质疑为什么我们需要构建 64 位应用程序！**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T12:42:22.517

除了上面给出的显而易见的原因（主要是“使用超过 2-3GB 的内存”）之外，编译 64 位的原因是 x86-64 有 16 个寄存器，而 x86-32 有 8 个。因为其中一个寄存器是堆栈指针，通常`rBP`是为“帧指针”保留的，实际有用的寄存器数量分别是 6 和 14。例如，附加寄存器允许在寄存器中传递更多数量的参数，以及在函数内的寄存器中保存更多数量的临时变量。这对代码的实际执行速度有积极影响，因为每次使用内存而不是寄存器时，它至少会导致更复杂的指令，并且通常会导致必须使用额外的指令。当没有足够的寄存器时，这反过来会使代码变大。

通常，64 位 x86 代码在不修改实际算法的情况下运行速度快 5-15%，并且通常具有 . 有时可以更改算法以获得更多收益[因为例如，您可以拥有一个由“电话号码”索引的数组，而不是对电话号码进行散列然后在散列上进行索引，或者使用 64 位整数值代替32 位的，这意味着“一半的操作”的速度提高了 2 倍]。

如果您需要应用程序的性能，则必须进行基准测试（在多个平台上）。在某些情况下，例如，更大的指针意味着缓存更快地被填满，而代码最终运行得更慢，因为“只有一半的链表条目适合缓存”。

简而言之：在大多数情况下，64 位应用程序比 32 位应用程序做同样的事情要快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T12:29:18.863

最重要的用例是当您真的想为您的进程消耗超过 2 GB 的内存时。

接下来是 32 位支持将慢慢下降，就像您现在不会看到很多 16 位应用程序一样。虽然这是一个缓慢的过程。目前有一个版本的 Windows Server 2008 默认不支持 32 位。

最后，有时您只需要 64 位 - 那就是您构建加载到 64 位消费者进程中的任何类型的扩展时。由于 64 位进程无法加载 32 位代码，因此您必须为它们提供 64 位扩展或制作互操作解决方案以将您的代码放在单独的进程中 - 后者并不总是可行的，有时效率非常低。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T12:31:26.827

*   物理内存

32 位系统架构只能直接寻址 4 GB 地址空间。运行 64 位版本的 Windows Server 的 64 位系统体系结构可以支持高达 1,024 GB 的物理内存和可寻址内存。

*   更好的并行处理

使用 32 位架构的服务器（Windows 操作系统）限制为 32 个 CPU。并行处理和总线架构的改进使 64 位环境能够支持多达 64 个处理器，并为每个额外的处理器提供几乎线性的可扩展性。

*   更快的总线架构

64 位架构提供更多和更广泛的通用寄存器，有助于提高整体应用程序速度。当有更多寄存器时，就不需要将持久数据写入内存，然后只需几条指令就可以将其读回。函数调用在 64 位环境中也更快，因为一次最多可以将四个参数通过寄存器传递给函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T12:36:04.507

数据类型的大小不会随着 x64 自动翻倍，而是处理器寄存器的大小，就像指针大小一样。使用 32 位，您可以处理 4294967295 字节的内存（~ 4 Gb），这对于某些应用程序（如数据库管理系统，...）来说是不够的。

由于兼容性问题，Firefox 仅提供 32 位版本。您不能为 x86（32 位）架构编写库并从 x64 处理器调用它们，因为它们的指针不兼容（如上所述）。同时创建：x64**和**x86 版本会增加测试费用。如果您的应用程序很少使用超过 3.5 Gb 的内存，那么它实际上并不能从 x64 架构中获益。

32 位程序也不能简单地在 x64 架构上运行。在 Windows 上有一个用于此的层，称为[Windows on Windows (WoW)](http://de.wikipedia.org/wiki/Windows_on_Windows)或用于 x64/x86 接口的 WoW64。通过各种缓存案例，x86 应用程序在 WoW 上的运行速度实际上可能比原生 x64 应用程序更快。

# android - 无法更改android中自定义列表视图中按钮的背景图像

> ID：15948774
> 
> 赞同：1
> 
> 时间：2013-04-11T12:26:43.773
> 
> 标签：android, android-layout, android-listview, custom-controls

```
 // Mystock.java

                public class MyStock extends Activity
                {

                    DatabaseHelper db;
                    DownloadFileviaHTTP1 d;
                    private mItems[] itemss;
                    EditText txtPriceEdit=null;
                    ProgressDialog progressDialog;
                    public ListView lst_stockListing;
                    List<HashMap<String, String>> fillMaps ;
                    ArrayList<mItems> planetList = new ArrayList<mItems>();
                    RelativeLayout slider = null,listview=null,topHeader=null,remaniningBucks=null;
                    Button btn_leftpanel,btn_editstock,btnbuy,btncancel,btnaccept,btnsub,btnadd,btnsell;
                    String[] from = new String[] {"companyName", "ButtonBuy", "currentPrice", "ButtonSell"};
                    private ArrayAdapter<com.indusa.stockapp.stockListing.DownloadFileviaHTTP1.mItems> listAdapter;
                    int[] to = new int[] { R.id.txtstockname_custom, R.id.btnbuy_custom, R.id.txtcurrent_custom, R.id.btnsell_custom };
                    TextView txtnifty=null,txtremainingbucks=null,txt_stockqty=null,txt_quantity=null,txtPrice=null,txtPriceChange=null;

                    @Override
                    public void onCreate(Bundle savedInstanceState) 
                    {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.mystock);

                        //Button
                        btn_leftpanel=(Button)findViewById(R.id.btn_leftpanel);
                        btncancel=(Button)findViewById(R.id.btncancel);
                        btnaccept=(Button)findViewById(R.id.btnaccept);
                        btnsub=(Button)findViewById(R.id.btn_sub);
                        btnadd=(Button)findViewById(R.id.btn_add);
                        btn_editstock=(Button)findViewById(R.id.btn_editstock);

                        //layout
                        listview=(RelativeLayout)findViewById(R.id.listview);
                        slider = (RelativeLayout)findViewById(R.id.layout_relative_slider);
                        topHeader=(RelativeLayout)findViewById(R.id.layout_top_header);
                        remaniningBucks=(RelativeLayout)findViewById(R.id.layout_remainingbucks);

                        //TextView
                        txtnifty=(TextView)findViewById(R.id.txtnifty50_text);
                        txtremainingbucks=(TextView)findViewById(R.id.txtremainingbucks_text);
                        txt_stockqty=(TextView)findViewById(R.id.txtstockqty);
                        txt_quantity=(TextView)findViewById(R.id.txtquantity);
                        txtPriceEdit=(EditText)findViewById(R.id.txtprice_edit);
                        txtPrice=(TextView)findViewById(R.id.txtprice);
                        txtPriceChange=(TextView)findViewById(R.id.txtprice_change);

                        //listview
                        lst_stockListing=(ListView)findViewById(R.id.lst_mystock);

                        itemss = (mItems[]) getLastNonConfigurationInstance();

                        d=new DownloadFileviaHTTP1();

                        txtnifty.setText("100000.00");
                        txtremainingbucks.setText("100000.00");
                        txtremainingbucks.setTextColor(android.graphics.Color.rgb(105,160,38));

                         ArrayList<Items>details = new ArrayList<Items>();

                            //displyaing the stock in the listview from the table
                            DatabaseHelper db = new DatabaseHelper(MyStock.this,"StockApp");
                            db.getReadableDatabase();
                            Cursor cur=db.view_mystock("TBL_MYSTOCK", db);
                            Log.d("cursor count : "," " +cur.getCount());

                         Items item;
                         while(cur.moveToNext())
                         {
                             item=new Items();
                             item.setName(cur.getString(1));
                             item.setPrice(cur.getString(2));
                             Log.d("quantity count ",cur.getString(6));
                             if (Integer.parseInt(cur.getString(6).toString())>0)
                             {
                                item.setButtonbackground();
                                // btnbuy.setBackgroundDrawable(getResources().getDrawable(R.drawable.buy_stock_number));
                                 item.setBuy(cur.getString(6));
                             }
                                 details.add(item);
                         } 

                         lst_stockListing.setAdapter(new abc(details , this));

                        function();
                    }
                    public void display_called(Cursor cur)
                    {
                        fillMaps= new ArrayList<HashMap<String, String>>();
                         String s="";
                        int count=0;
                        Log.d("cursor count"," "+cur.getCount());
                        while(cur.moveToNext())
                        { 
                            Log.d("company name",cur.getString(1));
                           HashMap<String, String> map = new HashMap<String, String>();
                           String str=cur.getString(1);
                           s="";
                           count=0;
                           for(int i=0;i<str.length();i++)
                           {    
                            char c=str.charAt(i);
                            if (Character.isWhitespace(c)==true)
                            {
                                count=count+1;
                                if (count==2)
                                    s=s+System.getProperty("line.separator");
                                else
                                    s=s+c;
                            }
                            else
                            {
                                s=s+c;
                            }
                           }
                           map.put("companyName",s);
                           map.put("ButtonBuy"," " );
                           map.put("currentPrice",cur.getString(2));
                           map.put("ButtonSell"," ");
                           fillMaps.add(map);
                       }
                    }
                    public static class Items
                    {
                        private String companyName = "";
                        private Button btnbuy=null;
                        private String price = "";
                        private String buy,sell;

                        public Items() 
                        {

                        }
                        public Items(String name)
                        {
                            this.companyName = name;    
                        }
                        public Items(String name,String price)
                        {
                            this.companyName=name;
                            this.price=price;
                        }
                        public Items(String name,String price,String buy,String sell)
                        {
                            this.companyName=name;
                            this.price=price;
                            this.buy=buy;
                            this.sell=sell;
                        }
                        public void setButtonbackground()
                        {
                            btnbuy.setBackgroundResource(R.drawable.buy_stock_number);
                        }
                        public String getName() 
                        {
                            return companyName;
                        }

                        public String getPrice()
                        {
                            return price;
                        }
                        public String getBuy()
                        {
                            return buy;
                        }
                        public String getSell()
                        {
                            return sell;
                        }

                        public void setName(String name) 
                        {
                            this.companyName = name;
                        }
                        public void setPrice(String price)
                        {
                            this.price=price;
                        }
                        public void setBuy(String buy)
                        {
                            this.buy=buy;
                        }
                        public void setSell(String sell)
                        {
                            this.sell=sell;
                        }
                    }

                    public class abc extends BaseAdapter
                    {

                        private ArrayList<Items> _data;
                        Context _c;

                         abc (ArrayList<Items> data, Context c)
                         {
                                _data = data;
                                _c = c;
                         }
                        public int getCount() 
                        {
                             return _data.size();
                        }

                        public Object getItem(int position) 
                        {   
                            return _data.get(position);
                        }

                        public long getItemId(int position) 
                        {   
                            return position;
                        }

                        public View getView(final int position, View convertView, ViewGroup parent) 
                        {
                             final Items item =new Items();

                            View v = convertView;
                             if (v == null)
                             {
                                LayoutInflater vi = (LayoutInflater)_c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                                v = vi.inflate(R.layout.custom_mystock, null);
                             }

                               TextView companyName = (TextView) v.findViewById(R.id.txtstockname_custom);
                               Button buy = (Button)v.findViewById(R.id.btnbuy_custom);
                               TextView current= (TextView)v.findViewById(R.id.txtcurrent_custom);
                               Button sell = (Button)v.findViewById(R.id.btnsell_custom);

                               Items msg = _data.get(position);
                               Log.d("msg view paret ",""+msg);

                               companyName.setText(msg.companyName);
                               current.setText(msg.price);
                               buy.setText(msg.buy) ;
                               sell.setText(msg.sell);

                               buy.setOnClickListener(new  View.OnClickListener()
                               {
                                   public void onClick(View v1)
                                   {
                                       slider.setVisibility(View.VISIBLE);
                                       /* Items i =lst_stockListing.getChildCount();
                                        holder.planetNameView.setText(p.getName());
                                        holder.distView.setText("" + p.getDistance());*/
                                       DatabaseHelper db = new DatabaseHelper(MyStock.this,"StockApp");
                                        db.getReadableDatabase();
                                        Cursor cur=db.view_mystock("TBL_MYSTOCK", db);
                                        Log.d("cursor count : "," " +cur.getCount());
                                        db.close();
                                        cur.move(position);
                                        while(cur.moveToNext())
                                        {
                                            Toast.makeText(MyStock.this,cur.getString(2), 1000).show();
                                            txtPrice.setText(cur.getString(2));
                                            txtPriceEdit.setText(cur.getString(2));
                                            Float i=Float.parseFloat(txtPrice.getText().toString()) * Integer.parseInt(txt_quantity.getText().toString());
                                            txtPriceChange.setText(""+i);
                                            break;
                                        }
                                   }
                               });
                               sell.setOnClickListener(new View.OnClickListener()
                               {
                                   public void onClick(View v) 
                                   {
                                       slider.setVisibility(View.VISIBLE);
                                       txtPrice.setText(""+position);
                                        Toast.makeText(MyStock.this," "+position, 1000).show();     
                                   }
                               });
                               return v;
                        }
                    }
                    public class periodicChecker extends Thread
                    {
                        public void run()
                        {
                            while(true)
                            {
                                 try 
                                   {
                                       final Handler refresh = new Handler(Looper.getMainLooper());
                                    refresh.post(new Runnable() 
                                    {

                                        public void run()
                                        {
                                                planetList.clear();
                                                progressDialog = ProgressDialog.show(MyStock.this, "", "Fetching Current Price...");
                                                DatabaseHelper db = new DatabaseHelper(MyStock.this,"StockApp");
                                                db.getWritableDatabase();
                                                Cursor cur=db.view_mystock("TBL_MYSTOCK", db);
                                                Log.d("cursor count : "," " +cur.getCount());
                                                db.close();
                                                display_called(cur);
                                                while(cur.moveToNext())
                                                    Log.d("cursor symbol",cur.getString(0));
                                                d.downloadFileViaHTTP1(db);
                                                //listAdapter = new com.indusa.stockapp.stockListing.DownloadFileviaHTTP1.SelectArralAdapter(MyStock.this,planetList);
                                                //lst_stockListing.setAdapter(listAdapter);
                                        }
                                    });
                                    Thread.sleep(5000);
                                    progressDialog.dismiss();
                                    Thread.sleep(50000);

                                    } 
                                   catch (InterruptedException e) 
                                   {
                                       e.printStackTrace();
                                   }

                            }
                        }

                    }
                    void function()
                    {
                        btn_leftpanel.setOnClickListener(new View.OnClickListener()
                        {
                            public void onClick(View v) 
                            {   
                                Intent in =new Intent(MyStock.this,ListingItem.class);
                                startActivity(in);
                            }
                        });

                        btn_editstock.setOnClickListener(new View.OnClickListener()
                        {   
                            public void onClick(View v) 
                            {   

                                Log.d("top position ","" +listview.getTop());
                            }
                        });
                        btncancel.setOnClickListener(new View.OnClickListener()
                        {
                            public void onClick(View v) 
                            {
                                Log.d("cancel","called");
                                slider.setVisibility(View.GONE);
                            }
                        });
                        btnaccept.setOnClickListener(new View.OnClickListener()
                        {   
                            public void onClick(View v) 
                            {               

                            }
                        });
                        btnadd.setOnClickListener(new View.OnClickListener()
                        {
                            public void onClick(View v)
                            {
                                int val=Integer.parseInt(txt_stockqty.getText().toString());
                                if (val<100)
                                    val=val+10;

                                txt_stockqty.setText(""+val);
                                txt_quantity.setText(""+val);
                                txtPriceEdit.setText(""+txtPrice.getText().toString());
                                float val1=Float.parseFloat(txtPriceEdit.getText().toString());             
                                txtPriceChange.setText("" + val*val1);
                            }
                        });
                        btnsub.setOnClickListener(new View.OnClickListener()
                        {   
                            public void onClick(View v)
                            {
                                int val=Integer.parseInt(txt_stockqty.getText().toString());
                                if (val>10)
                                    val=val-10;

                                txt_stockqty.setText(""+val);
                                txt_quantity.setText(""+val);
                                txtPriceEdit.setText(txtPrice.getText().toString());
                                float val1=Float.parseFloat(txtPriceEdit.getText().toString());
                                txtPriceChange. setText(""+val*val1);
                            }
                        });
                        txtPriceEdit.setOnClickListener(new View.OnClickListener() 
                        {
                            public void onClick(View v) 
                            {

                            }
                        });
                    }
                }
            //===========
            //mystock.xml
            //=============
            <?xml version="1.0" encoding="utf-8"?>
            <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="320dp"
                android:layout_height="match_parent"
                android:background="@drawable/main_bg"
                android:orientation="vertical" >

                <RelativeLayout
                    android:id="@+id/layout_name"
                    android:layout_width="320dp"
                    android:layout_height="30dp"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/layout_remainingbucks"
                    android:background="@drawable/top_header2" >

                    <TextView
                        android:id="@+id/txtstockname"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:paddingLeft="10dp"
                        android:text="@string/lblstockname"
                        android:textColor="#ffffff"
                        android:textSize="18sp"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/txtbuy"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:layout_toLeftOf="@+id/txtcurrent"
                        android:drawableLeft="@drawable/seperator_header2"
                        android:drawablePadding="10dp"
                        android:paddingRight="12dp"
                        android:text="@string/lblbuy"
                        android:textColor="#ffffff"
                        android:textSize="18sp"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/txtcurrent"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:layout_toLeftOf="@+id/txtsell"
                        android:drawableLeft="@drawable/seperator_header2"
                        android:drawablePadding="2dp"
                        android:paddingRight="2dp"
                        android:text="@string/lblcurrent"
                        android:textColor="#ffffff"
                        android:textSize="18sp"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/txtsell"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_marginTop="3dp"
                        android:drawableLeft="@drawable/seperator_header2"
                        android:drawablePadding="10dp"
                        android:paddingRight="12dp"
                        android:text="@string/lblsell"
                        android:textColor="#ffffff"
                        android:textSize="18sp"
                        android:textStyle="bold" />
                </RelativeLayout>
            </RelativeLayout>
            //==================
            //custom_mystock.xml
           //===================
            <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/txtstockname_custom"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_alignParentLeft="true"
                    android:layout_toLeftOf="@+id/btnbuy_custom"
                    android:gravity="center_vertical"
                    android:paddingLeft="10dp"
                    android:singleLine="false"
                    android:text="@string/lblstockname"
                    android:textColor="#000000"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/btnbuy_custom"
                    android:layout_width="53dp"
                    android:layout_height="40dp"
                    android:layout_toLeftOf="@+id/txtcurrent_custom"
                    android:drawableLeft="@drawable/seperator_header2"
                    android:drawablePadding="10dp"
                    android:background="@drawable/buy_stock2"
                    android:paddingRight="12dp"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/txtcurrent_custom"
                    android:layout_width="72dp"
                    android:layout_height="40dp"
                    android:layout_toLeftOf="@+id/btnsell_custom"
                    android:drawableLeft="@drawable/seperator_header2"
                    android:drawablePadding="2dp"
                    android:paddingRight="2dp"
                    android:gravity="center"
                    android:text="@string/lblcurrent"
                    android:textColor="#000000"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/btnsell_custom"
                    android:layout_width="52dp"
                    android:layout_height="40dp"
                    android:layout_alignParentRight="true"
                    android:drawableLeft="@drawable/seperator_header2"
                    android:drawablePadding="10dp"
                    android:paddingRight="12dp"
                    android:textColor="#000000"
                    android:background="@drawable/sell_stock2"
                    android:textSize="18sp"
                    android:textStyle="bold" />

            </RelativeLayout>
//========
//logcat
//======
04-11 18:12:17.110: D/cursor(28082):  android.database.sqlite.SQLiteCursor@40564dd0
04-11 18:12:17.110: D/cursor count :(28082):  5
04-11 18:12:17.110: D/quantity count(28082): 0
04-11 18:12:17.110: D/quantity count(28082): 0
04-11 18:12:17.110: D/quantity count(28082): 0
04-11 18:12:17.110: D/quantity count(28082): 10
04-11 18:12:17.110: W/dalvikvm(28082): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-11 18:12:17.130: E/AndroidRuntime(28082): FATAL EXCEPTION: main
04-11 18:12:17.130: E/AndroidRuntime(28082): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.indusa.stockapp/com.indusa.stockapp.stockListing.MyStock}: java.lang.NullPointerException
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.os.Looper.loop(Looper.java:130)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at android.app.ActivityThread.main(ActivityThread.java:3770)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at java.lang.reflect.Method.invoke(Method.java:507)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
04-11 18:12:17.130: E/AndroidRuntime(28082):    at dalvik.system.NativeStart.main(Native Method)
04-11 18:12:17.130: E/AndroidRuntime(28082): Caused by: java.lang.NullPointerException
04-11 18:12:17.130: E/AndroidRuntime(28082):    at com.indusa.stockapp.stockListing.MyStock.onCreate(MyStock.java:110)

//======
//note 
//===== 
```

//在上面的代码中，我的列表视图显示有文本框、按钮、文本框和按钮，如果在 //数据库中的加载时间如果购买了任何数量的数量，那么我想//更改 R.drawable .buy_stock2到那个特定的//按钮的 R.drawable.buy_stock_number 我无法根据它们的 id 区分按钮..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:32:11.067

`buttons`您可以使用 android 提供的良好工具而不是使用`imagebutton`它来轻松处理该控件的外观和感觉......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:41:04.973

您正在使用 ListView 并且它不会为每个项目创建一个新视图，它会重用缓存的视图，因此如果您想更改列表项中的某些属性，您应该在适配器方法中执行此操作

```
getView(final int position, View convertView, ViewGroup parent) 
```

你可以通过位置参数来识别你的项目。更改列表视图数据后，您应该调用方法 Adapter.notifyDataSetChanged() 该方法通知列表视图以重绘其项目，现在您的 getView 逻辑工作

# sockets - Phonegap UDP套接字？

> ID：15948779
> 
> 赞同：5
> 
> 时间：2013-04-11T12:26:56.713
> 
> 标签：sockets, cordova, udp, socket.io, phonegap-plugins

是否有可能为 Phonegap 应用程序设置 UDP 套接字？通过任何可用的插件等？它必须与 Android 和 iPhone 兼容。

我知道 TCP 可通过 Web Sockets 使用，但我正在开发的应用程序需要 UDP（由于它的速度）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-07T15:47:14.227

这可能有用吗？我在 OP 将近两年后正在研究这个问题，但我发现了 chrome 的 cordova UDP 插件。对此一无所知，但认为它可能会有所帮助。

[https://github.com/MobileChromeApps/cordova-plugin-chrome-apps-sockets-udp](https://github.com/MobileChromeApps/cordova-plugin-chrome-apps-sockets-udp)

它也与 NPM 兼容......不知道这是否重要，但[https://www.npmjs.com/package/cordova-plugin-chrome-apps-sockets-udp](https://www.npmjs.com/package/cordova-plugin-chrome-apps-sockets-udp)

# apache-camel - Apache Camel：访问 CamelLoopIndex

> ID：15948792
> 
> 赞同：3
> 
> 时间：2013-04-11T12:27:56.740
> 
> 标签：apache-camel

我有以下路由DSL：

```
from("file:" + autoLoadBaseDir + "?move=.classified")
                .loop(fileTypes.length)
                    .choice()
                        .when(header("CamelFileName").contains(fileTypes[Integer.valueOf("${CamelLoopIndex}")]))
                            .to("file:" + classesBaseDir + "/" + fileTypes[Integer.valueOf("${CamelLoopIndex}")]); 
```

如图所示，我希望访问`CamelLoopIndex`并将其用作数组中的索引。不评估表达式，因此不创建路由。我究竟做错了什么？提前致谢。

这方面的文档很少，经过数小时的搜索，我还没有成功获得解决方案。

**更新**：我已将相同的问题发布到 Camel 用户邮件列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T15:49:04.870

你应该使用 ${property.CamelLoopIndex}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-17T13:11:34.950

您可以使用[处理器](https://camel.apache.org/manual/latest/processor.html)或直接访问该属性

```
${exchangeProperty.CamelLoopIndex}

...
    .loop(4)
       .log("${exchangeProperty.CamelLoopIndex}")
       .process(exchange -> {
          Integer index = (Integer) exchange.getProperty(Exchange.LOOP_INDEX);
       })
     .end()
... 
```

[![在此处输入图像描述](https://i.stack.imgur.com/S9sEI.png)](https://i.stack.imgur.com/S9sEI.png) [https://camel.apache.org/components/latest/eips/loop-eip.html ](https://camel.apache.org/components/latest/eips/loop-eip.html) [https://camel.apache.org/manual/latest/processor.html](https://camel.apache.org/manual/latest/processor.html)

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-17T07:04:46.950

我迟到了，但也许有人会从这个答案中得到帮助。在上面给出的示例中，这适用于我访问 Java DSL 中的循环索引。

```
property(Exchange.LOOP_INDEX) 
```

因此，对于上面 okello 的第一篇文章中的示例，我想这会起作用

```
Integer.valueOf(property(Exchange.LOOP_INDEX).toString()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T06:38:42.670

在尝试了许多选项后，以下对我有用：

```
from("file:" + autoLoadBaseDir + "?preMove=inprogress&move=.classified")
                .routeId("Test-Route")
                .loop(fileTypes.length)
                .processRef("keFileTypeNameService")
                    .choice()
                        .when(header("CamelFileName").contains(header("MyFileType")))
                            .to("file:" + classesBaseDir + "/?autoCreate=true&fileName=${header[MyFileType]}/${header[CamelFileName]}"); 
```

从交易所`keFileTypeNameService`检索属性。`CamelLoopIndex`然后它使用它来获取该索引处的文件类型。然后只需在标题中设置此文件类型名称。豆子如下图`keFileTypeNameService`所示：

```
@Service( value = "keFileTypeNameService" )
public class FileTypeNameService implements Processor {

    private @Value("${ke.file.types}") String[] fileTypes;

    public void process(Exchange exchange) throws Exception {
        Integer count = exchange.getProperty("CamelLoopIndex", Integer.class);
        String fileType = fileTypes[count];
        exchange.getIn().setHeader("MyFileType", fileType);
    }

} 
```

我希望这对其他人有帮助。

# java - 是否可以在 Spring 存储库中使用原始 SQL

> ID：15948795
> 
> 赞同：134
> 
> 时间：2013-04-11T12:28:09.377
> 
> 标签：java, hibernate, spring-data-jpa

我需要在 Spring Data Repository 中使用原始 SQL，这可能吗？我所看到的一切`@Query`都是基于实体的。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-04-11T12:38:16.860

> @Query 注释允许通过将 nativeQuery 标志设置为 true 来执行本机查询。

引用自 Spring Data JPA[参考文档](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#_native_queries)。

此外，请参阅[本节](http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.named-queries)以了解如何使用命名的本机查询来执行此操作。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2018-05-16T08:08:57.617

是的，您可以通过以下方式执行此操作：

**1\. 通过 CrudRepository（投影）**

Spring Data Repositories 通常在使用查询方法时返回域模型。但是，有时，您可能出于各种原因需要更改该模型的视图。

假设您的实体是这样的：

```
 import javax.persistence.*;
    import java.math.BigDecimal;

    @Entity
    @Table(name = "USER_INFO_TEST")
    public class UserInfoTest {
        private int id;
        private String name;
        private String rollNo;

        public UserInfoTest() {
        }

        public UserInfoTest(int id, String name) {
        this.id = id;
        this.name = name;
        }

        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        @Column(name = "ID", nullable = false, precision = 0)
        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        @Basic
        @Column(name = "name", nullable = true)
        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        @Basic
        @Column(name = "roll_no", nullable = true)
        public String getRollNo() {
            return rollNo;
        }

        public void setRollNo(String rollNo) {
            this.rollNo = rollNo;
        }
    } 
```

现在您的 Projection 类如下所示。它可以是您需要的那些字段。

```
public interface IUserProjection {
     int getId();
     String getName();
     String getRollNo();
} 
```

并且`Your Data Access Object(Dao) is like bellow`：

```
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.CrudRepository;

import java.util.ArrayList;

public interface UserInfoTestDao extends CrudRepository<UserInfoTest,Integer> {
    @Query(value = "select id,name,roll_no from USER_INFO_TEST where rollNo = ?1", nativeQuery = true)
    ArrayList<IUserProjection> findUserUsingRollNo(String rollNo);
} 
```

现在`ArrayList<IUserProjection> findUserUsingRollNo(String rollNo)`将为您提供用户列表。

**2.使用EntityManager**

假设您的查询是“ ***select id,name from users where roll_no = 1001*** ”。

这里查询将返回一个带有 id 和 name 列的对象。您的 Response 类如下所示：

你的 Response 类是这样的：

```
public class UserObject{
        int id;
        String name;
        String rollNo;

        public UserObject(Object[] columns) {
            this.id = (columns[0] != null)?((BigDecimal)columns[0]).intValue():0;
            this.name = (String) columns[1];
        }

        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getRollNo() {
            return rollNo;
        }

        public void setRollNo(String rollNo) {
            this.rollNo = rollNo;
        }
    } 
```

此处 UserObject 构造函数将获取一个对象数组并使用该对象设置数据。

```
public UserObject(Object[] columns) {
            this.id = (columns[0] != null)?((BigDecimal)columns[0]).intValue():0;
            this.name = (String) columns[1];
        } 
```

您的查询执行功能如下所示：

```
public UserObject getUserByRoll(EntityManager entityManager,String rollNo) {

        String queryStr = "select id,name from users where roll_no = ?1";
        try {
            Query query = entityManager.createNativeQuery(queryStr);
            query.setParameter(1, rollNo);

            return new UserObject((Object[]) query.getSingleResult());
        } catch (Exception e) {
            e.printStackTrace();
            throw e;
        }
    } 
```

在这里你必须导入波纹管包：

```
import javax.persistence.Query;
import javax.persistence.EntityManager; 
```

现在你的主类，你必须调用这个函数。首先获取 EntityManager 并调用此`getUserByRoll(EntityManager entityManager,String rollNo)`函数。调用过程如下：

**这里是进口**

```
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext; 
```

`EntityManager`从这种方式获得：

```
@PersistenceContext
private EntityManager entityManager;

UserObject userObject = getUserByRoll(entityManager,"1001"); 
```

现在您在这个 userObject 中有数据。

**笔记：**

**query.getSingleResult()**返回一个对象数组。您必须使用查询列位置来维护列位置和数据类型。

```
select id,name from users where roll_no = 1001 
```

查询返回一个数组，它是`[0] --> id and [1] -> name`.

更多信息访问这个[线程](https://stackoverflow.com/a/50367467/3073945)和[这个线程](https://stackoverflow.com/a/50367467/3073945)

谢谢 ：）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-06-21T09:45:06.603

可以在 Spring 存储库中使用原始查询。

```
 @Query(value = "SELECT A.IS_MUTUAL_AID FROM planex AS A 
             INNER JOIN planex_rel AS B ON A.PLANEX_ID=B.PLANEX_ID  
             WHERE B.GOOD_ID = :goodId",nativeQuery = true)

      Boolean mutualAidFlag(@Param("goodId")Integer goodId); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-13T14:01:44.440

也可以使用[Spring Data JDBC repository](https://github.com/jirutka/spring-data-jdbc-repository)，这是一个建立在 Spring Data Commons 之上的社区项目，可以使用原始 SQL 访问数据库，而无需使用 JPA。

它不如 Spring Data JPA 强大，但如果您想要简单项目的轻量级解决方案而不使用像 Hibernate 这样的 ORM，那么值得一试的解决方案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-17T10:05:06.143

我们可以使用 createNativeQuery("Here Native SQL Query");

例如 ：

```
Query q = em.createNativeQuery("SELECT a.firstname, a.lastname FROM Author a");
List<Object[]> authors = q.getResultList(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-06T02:52:29.827

这是您可以以简单形式使用的方式

```
@RestController
public class PlaceAPIController {

 @Autowired
 private EntityManager entityManager;

 @RequestMapping(value = "/api/places", method = RequestMethod.GET)
 public List<Place> getPlaces() {
 List<Place> results = entityManager.createNativeQuery("SELECT *  FROM places p limit 10").getResultList();
    return results;
 }

} 
```

# php - 从 MYSQL 中选择 Blob，得到 null

> ID：15948798
> 
> 赞同：2
> 
> 时间：2013-04-11T12:28:16.830
> 
> 标签：php, mysql, json, blob

从 MySQL 中选择 blob 时，我需要做些什么特别的事情吗？我得到以下内容的 NULL（数据是 mediumblob，file_extension 是 varchar）：

```
$sql = "SELECT data, file_extension FROM table1 WHERE table1.id = ?";
$q = $con->prepare($sql);
$q->execute(array(1));

if ($q->rowCount() == 0)
{
    disconnectSqlConnection($con);
    $arr = array('success' => 'false',
                 'error'   => -2);
    return json_encode($arr);
}
else
{
    $row = $q->fetch();
    $arr = array('success'   => 'true',
                 'data'      => $row[0],
                 'extension' => $row[1]);
    disconnectSqlConnection($con);
    return json_encode($arr);
} 
```

$row[1] 有'pdf'，这是正确的。$row[0] 为 NULL，但在数据库中，我看到一个大小为 244.8KB 的 blob

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:30:33.280

用于`CAST`将其转换为文本

```
$sql = "SELECT CAST(data AS CHAR(10000) CHARACTER SET utf8) as data, file_extension FROM table1 WHERE table1.id = ?"; 
```

# javascript - 如何在迭代表时获取当前行以外的行的单元格的值？

> ID：15948801
> 
> 赞同：0
> 
> 时间：2013-04-11T12:28:30.393
> 
> 标签：javascript, jquery, html

除了我目前所在的表格之外，我必须找到表格中其他单元格的值。我正在做某事——

```
$('#poTable  > .bodyTr').each(function() {
    if ($(this).find(".variant").val() == productVariantId){
        alert('Cannot add mutiple rows for same Variant');
        value= false;
        $(this).find(".variant").val('');
        return value;
    }
}); 
```

但这也占用了我所在的行。`live`实施，因此将其自身的值与自身进行比较，从而导致`false`. 我必须排除当前行的值，同时检查相同的值是否与其他行无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:34:31.610

假设这段代码在一个处理程序中，这是选择的元素......

```
$('#poTable > .bodyTr').not(this).each(...); 
```

# mysql - MySQL：哪个更好，选择然后更新，还是更新？

> ID：15948813
> 
> 赞同：0
> 
> 时间：2013-04-11T12:29:33.197
> 
> 标签：mysql

哪个更好，先选择然后更新。或者更确切地说，像这样合而为一：

```
UPDATE items set status = 'NEW' 
    where 
      itemid in (1,2,3,4,5,6,7) AND
      status = 'OLD' AND
      9387487484 >= itemdate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:35:04.377

语句可用的每个优化`SELECT`都将在语句处理期间应用`UPDATE`（如果我怀疑这是您所关心的）。因此，只需发出一个`UPDATE`.

参考：[http ://dev.mysql.com/doc/refman/5.5/en/update-speed.html](http://dev.mysql.com/doc/refman/5.5/en/update-speed.html)

# php - 如何为 REST API 查询验证 Javascript 前端？

> ID：15948814
> 
> 赞同：0
> 
> 时间：2013-04-11T12:29:33.590
> 
> 标签：php, javascript

我开始创建包含大量 javascript 小部件的应用程序，这些小部件使用来自 REST API 的一些外部 json。

所以我被困在身份验证部分。要获得 API 响应，我需要在标题中传递用户名和密码，所以问题是我应该如何在不暴露代码中的用户名/密码的情况下做到这一点？

现在我能想到的就是创建一个 php 脚本，其中用户登录表单将用户/密码（如果有效）保存到会话中，然后我将创建另一个 php 脚本，它将像所有 api 调用的代理一样工作（curl添加带有用户和密码的标题）。

任何更好的想法如何做到这一点？

# java - java中的视频隐写术

> ID：15948815
> 
> 赞同：0
> 
> 时间：2013-04-11T12:29:38.037
> 
> 标签：java, video, indexoutofboundsexception, steganography

我正在为我的项目实施视频隐写术。我从[这里](http://www.dreamincode.net/forums/topic/269189-video-steganography/.)遇到了算法。我已经尝试并测试了代码，嵌入部分工作正常。但是我遇到了一个问题，`readByte`这是`VideoSteganography`类中的最后一个方法。方法给出`ArrayIndexOutOfBoundsException`。下面是方法。

我将参数传递为

```
 String fname = jTextField3.getText();
    File fil = new File(fname);
    String password = "123456";

    SteganoInformation cls = new SteganoInformation(fil);

    VideoSteganography.retrieveFile(cls, password, true); 
```

方法是

```
public static boolean retrieveFile(SteganoInformation info, String password, boolean overwrite)
    {
        File dataFile= null;
        features= info.getFeatures();
        try
        {
            masterFile= info.getFile();
            byteArrayIn= new byte[(int) masterFile.length()];

            DataInputStream in= new DataInputStream(new FileInputStream(masterFile));
            in.read(byteArrayIn, 0, (int)masterFile.length());
            in.close();  
            messageSize= info.getDataLength();
            byte[] fileArray= new byte[messageSize];
            inputOutputMarker= info.getInputMarker();
            readBytes(fileArray);
.......
} 
```

注意上面的方法readBytes，它抛出异常，它的写法如下

```
private static void readBytes(byte[] bytes)
    {
        int size= bytes.length;

        for(int i=0; i<size ; i++)
        {

            bytes[i]= byteArrayIn[inputOutputMarker];
            inputOutputMarker++;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:38:16.550

这里的问题是“byteArrayIn[inputOutputMarker]”，重新检查 inputOutputMarker 的值以及它可能具有的值的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:08:15.310

@Mazen Wadi，感谢您的回复。但我想出了是什么触发了这个异常，并想分享一下，以防有人遇到同样的问题。从两个类 "VideoSteganography class" 和 "SteganoInformation class" 中，两个类的方法 retrieveBytes() 有两个循环。将循环更改为下面的循环，并确保两个类中的循环大小一致。注意：从两个类的retrieveBytes 方法中更改j=6，您的问题就解决了。

```
private static void retrieveBytes(byte[] bytes)
        {
            int size= bytes.length;

            for(int i=0; i< size; i++)
            {
                byte1= 0;
                for(int j=6; j>=0; j-=2)
                {
                    byte2= byteArrayIn[inputOutputMarker];
                    inputOutputMarker++;

                    byte2&= 0x03;
                    byte2<<= j;
                    byte1|= byte2;
                }
                bytes[i]= byte1;
            }
        } 
```

# makefile - Makefile 模式规则中的目录通配符

> ID：15948822
> 
> 赞同：3
> 
> 时间：2013-04-11T12:30:00.763
> 
> 标签：makefile, gnu-make

我正在尝试创建一个 Makefile，它将通过`tic`. `tic`还将它自动创建的 termcap 文件复制到系统或用户特定的目标文件夹。对于普通用户，如果 terminfo 文件是 eg `screen-256color-bce-s.terminfo`，它将被编译并复制到`~/.terminfo/s/screen-256color-bce-s`. 所以它看起来像这样：

```
terminfo/screen-256color-bce-s.terminfo => /home/user/.terminfo/s/screen-256color-bce-s
terminfo/screen-256color-s.terminfo => /home/user/.terminfo/s/screen-256color-s 
```

如果我将这样的内容放入我的 Makefile 中：

```
TISRC = $(wildcard terminfo/*.terminfo)
TIDST = $(foreach x, $(TISRC), $(HOME)/.terminfo/$(shell basename $x|cut -c 1)/$(shell basename $x .terminfo))

$(HOME)/.terminfo/s/%: terminfo/%.terminfo
    @echo "$< => $@"
    @tic $<

install: $(TIDST) 
```

有用。但是，我想让它通用，并在目标中使用通配符，即：

```
$(HOME)/.terminfo/**/%: terminfo/%.terminfo
    @echo "$< => $@"
    @tic $< 
```

能够将 terminfo 文件添加到我的本地存储库。但是，上述方法不起作用。如何在模式规则中指定通配符目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:03:19.860

您可以使用[GNU Make Secondary Expansion 功能](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)做到这一点：

```
all : ${HOME}/.terminfo/x/a
all : ${HOME}/.terminfo/y/b

.SECONDEXPANSION:
${HOME}/.terminfo/%: terminfo/$$(notdir $$*).terminfo
    @echo "$< ---> $@" 
```

输出：

```
[~/tmp] $ make
terminfo/a.terminfo ---> /home/max/.terminfo/x/a
terminfo/b.terminfo ---> /home/max/.terminfo/y/b 
```

附带说明一下，make 提供了[一些路径操作函数](http://www.gnu.org/software/make/manual/make.html#File-Name-Functions)，因此您实际上不需要为此调用 shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:02:12.787

我不认为您可以按照您尝试的方式使用通配符，但如果您不介意使用**eval**技巧，则无需明确拼出所有目录路径即可获得所需的效果：

```
TISRC = $(wildcard terminfo/*.terminfo)
BASENAMES = $(notdir $(basename ${TISRC}))

MKDST = ${HOME}/.terminfo/$(shell echo $1 | cut -c 1)/$1
TIDST := $(foreach s,${BASENAMES},$(call MKDST,$s))
DIRLTRS = $(notdir $(patsubst %/,%,$(sort $(dir ${TIDST}))))

install: ${TIDST}

# $1 - Directory Name
# $2 - File name
define T
${HOME}/.terminfo/$1/$2 : terminfo/$2.terminfo
    @echo "$$< => $$@"
    tic $$<
endef

# This is the tricky part: use template T to make the rules you need.
$(foreach d,${DIRLTRS},$(foreach f,${BASENAMES},$(eval $(call T,$d,$f)))) 
```

# c# - 如何将字符串参数从 c# 发送到 powershell？

> ID：15948830
> 
> 赞同：1
> 
> 时间：2013-04-11T12:30:20.403
> 
> 标签：c#, powershell

我正在编写 2 个应用程序，一个使用 c#，另一个使用 powershell 1.0，在我的代码的某些位置，我想将指示服务器名称的字符串从我的 c# 应用程序传递到我编写的 powershell 脚本文件，我该如何发送它？我该如何接受？

我的代码：

```
RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
runspace.Open();
RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);

Pipeline pipeline = runspace.CreatePipeline();

String scriptfile = @"c:\test.ps1";

Command myCommand = new Command(scriptfile, false);
CommandParameter testParam = new CommandParameter("username", "serverName");

myCommand.Parameters.Add(testParam);

pipeline.Commands.Add(myCommand);
Collection<PSObject> psObjects;
psObjects = pipeline.Invoke();
runspace.Close(); 
```

和我的powershell脚本

```
param([string]$Username)

write-host $username 
```

我错过了什么？我对powershell有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T18:07:14.300

我有 PowerShell 2.0 和 3.0 但不是 1.0 的机器，所以我的结果可能会有所不同。当我在我的 PowerShell 3.0 机器上运行您的代码时，我得到：

> 提示用户的命令失败，因为主机程序或命令类型不支持用户交互。尝试支持用户交互的主机程序，例如 Windows PowerShell 控制台或 Windows PowerShell ISE，并从不支持用户交互的命令类型（例如 Windows PowerShell 工作流）中删除与提示相关的命令。

它不喜欢 Write-Host，所以我将您的脚本更改为

```
param([string]$Username)

Get-Date
Get-ChildItem -Path $userName 
```

Get-Date 这样我就可以看到一些输出而不依赖于参数和 GCI 来使用参数。我将您的代码修改为如下所示：

```
RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
using (var runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration))
{
    runspace.Open();

    String scriptfile = @"..\..\..\test.ps1";
    String path = @"C:\Users\Public\";

    var pipeline = runspace.CreatePipeline();
    pipeline.Commands.Add(new Command("Set-ExecutionPolicy RemoteSigned -Scope Process", true));
    pipeline.Invoke();

    pipeline = runspace.CreatePipeline();
    var myCommand = new Command(scriptfile, false);
    var testParam = new CommandParameter("username", path);
    myCommand.Parameters.Add(testParam);
    pipeline.Commands.Add(myCommand);
    var psObjects = pipeline.Invoke();
    foreach (var obj in psObjects)
    {
        Console.WriteLine(obj.ToString());
    }
    runspace.Close();
}

Console.WriteLine("Press a key to continue...");
Console.ReadKey(true); 
```

它运行没有错误，并在 PoSh 2 和 3 上显示了文件夹内容。

对于信息，如果您只是为当前进程设置执行策略，则不需要运行提升，因此我能够在代码中执行此操作。

# javascript - 谷歌地图上的两个标记为一个地方

> ID：15948833
> 
> 赞同：0
> 
> 时间：2013-04-11T12:30:31.503
> 
> 标签：javascript, google-maps, google-maps-api-3

我有带有标记的简单谷歌地图。例如，当我为越南创建标记时，我在地图上看到两个标记（在开头和结尾，请参见屏幕截图）。

有没有办法只显示一个标记？我无法更改地图的大小或缩放。

代码：

```
function loadMap() {
 var mapOptions = {
   zoom: 1,
   disableDefaultUI: true,
   zoomControl: false,
   scrollwheel: false,
   center: new google.maps.LatLng(10.0, -97.2070),
   mapTypeId: google.maps.MapTypeId.ROADMAP
 }
 MAP = new google.maps.Map(document.getElementById("map"), mapOptions);
}

function addMarker(address) {
 geocoder = new google.maps.Geocoder();
 geocoder.geocode( { 'address': address}, function(results, status) {
 if (status == google.maps.GeocoderStatus.OK) {
  var marker = new google.maps.Marker({
    map: MAP,
    position: results[0].geometry.location
  });
  MARKERS.push(marker);
 }});
} 
```

![两个标记的屏幕截图](https://i.stack.imgur.com/OBc97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:40:56.023

简短的回答是：`No`，您基本上会在相同的位置看到相同的图标。因为您将地图缩小到两次看到同一块土地的方式。这是正常的行为。没有逻辑说在一轮中会有一个标记，而在第二轮中则没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:03:50.993

我的问题解决了，我需要为标记添加选项“优化：假”。在此之后，我在一个地方有一个标记。![一个地方一个标记的地图](https://i.stack.imgur.com/yd2t5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:47:15.523

您可以将最小缩放设置为更大的数字，这样您就无法缩小那么远。但这会带来一些问题，您的地图必须具有固定的宽度。

看看`minZoom` [https://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

否则我看不出你怎么能做到这一点。

# c# - windows控制台应用程序c#的替代品

> ID：15948838
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:30:52.323
> 
> 标签：c#, console

基本上，我正在创建一个基于文本的 RPG，但是一旦完成就想发布它，是否有任何替代控制台应用程序在发布时看起来更好的宣传。

另外，如果我在哪里将这样的项目发布到 android orr apple market，那么最好的框架是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:33:47.613

您可以创建一个 WindowsForms 应用程序，甚至是一个 WPF 应用程序，您可以在表单上放置一个巨大的 TextBox。将背景颜色设置为黑色，将前景色设置为您喜欢的颜色。这样你“模拟”了一个控制台，但你有使用表单应用程序的优势。现在，您可以在 UI 中添加一些额外的东西，使它看起来比控制台更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T12:45:43.303

如果你真的想改进设计，你应该考虑使用 WPF。它也来自 Microsoft，您可以下载 Visual Studio Express for WPF。

实际上，用于 WPF 的 VS Express 可以在以下位置下载：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)

祝你好运 ：）

# php - 使用 PHP 将 XML 模式默认值注入文档

> ID：15948847
> 
> 赞同：2
> 
> 时间：2013-04-11T12:31:07.870
> 
> 标签：php, xml, xsd, default-value

这里我们有一个简单的 XML 模式：

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="item">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="item" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="is-foo" type="xs:boolean" default="true" use="optional" />
            <xs:attribute name="is-bar" type="xs:boolean" default="false" use="optional" />
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

只是`<item>`具有可选`is-foo`/`is-bar`布尔属性的递归节点，默认为`true`和`false`。

现在，在 PHP 中读取 XML 数据的上下文中，这些默认值有什么用处？如果我有一个有效的 XML 文档：

```
<item is-foo="false" is-bar="false">
    <item is-bar="true">
        <item>
            <item is-foo="true">
                <item />
                <item is-foo="true" />
            </item>
        </item>
        <item is-foo="true" is-bar="true" />
    </item>
</item> 
```

我针对它运行：

```
$document = new DOMDocument();
$document->load('./test.xml');
var_dump($document->schemaValidate('./test.xsd'));

$xpath = new DOMXPath($document);
foreach ($xpath->query('//item') as $item) {
    echo $item->getNodePath() . PHP_EOL
        . '  is-foo : ' . $item->getAttribute('is-foo') . PHP_EOL
        . '  is-bar : ' . $item->getAttribute('is-bar') . PHP_EOL;
} 
```

我得到以下输出（*虽然可以预期，但很不幸*）：

```
bool(true)
/item
  is-foo : false
  is-bar : false
/item/item
  is-foo :
  is-bar : true
/item/item/item[1]
  is-foo :
  is-bar :
/item/item/item[1]/item
  is-foo : true
  is-bar :
/item/item/item[1]/item/item[1]
  is-foo :
  is-bar :
/item/item/item[1]/item/item[2]
  is-foo : true
  is-bar :
/item/item/item[2]
  is-foo : true
  is-bar : true 
```

这里的问题是所有空属性值。

除了以编程方式将默认值注入文档（*这将需要解释架构以实现任何可重用性*）之外，是否有任何选项可以将 XML 文档转换为包含相应架构中定义的默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:54:03.333

DOM 扩展目前无法做到这一点。

libxml 不会这样做，除非[`XML_SCHEMA_VAL_VC_I_CREATE`](http://www.xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaValidOption)在使用的模式验证上下文中设置了 ，而目前[它不是](http://lxr.php.net/xref/PHP_5_4/ext/dom/document.c#2025 "它需要在 L2025 之后和 L2033 之前设置").

我创建了一个[补丁](https://github.com/DaveRandom/php-src/commit/d7b05a192953e4fc4efb1b05c6337d80fa159ee4)，希望通过/的附加`$flags`参数和新常量（[示例目标代码](http://codepad.viper-7.com/zWG0ZE)）来公开此功能，但我尚未对其进行测试，因为我没有现成可用的构建环境.`schemaValidate()``schemaValidateSource()``LIBXML_SCHEMA_CREATE`

*编辑*

该补丁现在已经过测试，我创建了一个[PR](https://github.com/php/php-src/pull/325)以合并到 5.5 分支中。

*编辑 2*

PR 现在已合并到 master 中，该功能应该可以从 PHP 5.5.2 获得。

*编辑 3*

[看到它工作](http://3v4l.org/qCdY3)

# java - 简单 gui 中的 java.awt.Container.checkNotAWindow 错误

> ID：15948848
> 
> 赞同：0
> 
> 时间：2013-04-11T12:31:09.183
> 
> 标签：java, swing, jframe, illegalargumentexception, windowbuilder

我正在尝试绘制一个简单的 GUI（在 Eclipse 中使用 windowbuilder 创建），我希望它们之间有 2 个按钮和一个可滚动的文本区域。我创建了以下代码来实现上述目的：

```
public class Main extends JFrame implements ActionListener{
    public Font font; //used for the font file
    public JTextArea txtDataWillBe;

     public Main() throws FontFormatException, IOException{
        setTitle("Main title ");

        setBounds(100, 100, 1200, 600);
        getContentPane().setLayout(null);

        txtDataWillBe = new JTextArea();
        txtDataWillBe.setText("Your data will display here");
        txtDataWillBe.setFont(new Font("Droid Sans", Font.BOLD, 18));
        txtDataWillBe.setEditable(false);
        txtDataWillBe.setColumns(1);
        txtDataWillBe.setBounds(0, 40, 919, 484);
        getContentPane().add(txtDataWillBe);

        JButton button = new JButton("CLICK TO OPEN");
        button.setBounds(0, 0, 940, 40);
        button.setFont(new Font("Coalition", Font.PLAIN, 18));
        getContentPane().add(button);

        JButton btnPrint = new JButton("PRINT");
        btnPrint.setBounds(0, 531, 940, 40);
        btnPrint.setFont(new Font("Coalition", Font.PLAIN, 18));
        getContentPane().add(btnPrint);

    }

        private final String JTextFile = null;
        JFileChooser chooser;
        String choosertitle;

        public static File deletefile; 
```

编辑：

```
 public static void main(String s[]) {

            JFrame frame = new JFrame("Reader");
            Main panel = null;
            try {
                panel = new Main();
            } catch (FontFormatException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            frame.addWindowListener(
              new WindowAdapter() {
                public void windowClosing(WindowEvent e) {
                    File deleteme = new File (deletefile + "mx.txt");
                    deleteme.delete();
                  System.exit(0);
                  }
                }
              );
            frame.getContentPane().add(panel,"Center");
            frame.setSize(panel.getPreferredSize());
            frame.setVisible(true);
            } 
```

我最初在 JScrollPane 中有 JTextarea （认为这是获得我想要的滚动的最佳方式）。我删除了导致控制台错误的 JScrollPane 想法，但我仍然收到错误消息。

控制台输出为：

```
Exception in thread "main" java.lang.IllegalArgumentException: adding a window to a container
    at java.awt.Container.checkNotAWindow(Container.java:439)
    at java.awt.Container.addImpl(Container.java:1035)
    at java.awt.Container.add(Container.java:923) 
```

编辑：上面添加了主要内容。

我的 GUI 做错了什么？
我需要 JScrollPane 和 JTextArea 来启用加载文本的垂直滚动吗？

谢谢你的帮助;

安迪

编辑：

我已根据以下建议进行了编辑，因此我的代码现在为：

```
 public Main() throws FontFormatException, IOException{

        JFrame frame = new JFrame("Reader ");
          frame.addWindowListener(
                  new WindowAdapter() {
                    public void windowClosing(WindowEvent e) {
                        File deleteme = new File (deletefile + "mx.txt");
                        deleteme.delete();
                      System.exit(0);
                      }
                    }
                  );
                frame.getContentPane().add(panel,"Center");
                frame.setSize(getPreferredSize());
                frame.setVisible(true); 
```

其余代码与以前一样，但我所显示的只是一个空白的灰色框架，没有我的任何组件（尽管它们都显示在 windowbuilder 中）。

感谢您的持续帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:51:12.430

控制台输出准确描述了这里出了什么问题。

```
IllegalArgumentException: adding a window to a container 
```

在`frame.getContentPane().add(panel,"Center");`您添加`panel`到内容窗格的行中，但`panel`它本身是`Main extends JFrame`.

您应该完全删除对外部框架的任何引用，只需将窗口侦听器添加到`Main`框架中，即主代码简化为类似

```
JFrame frame = new Main();
frame.addWindowListener( ... );
frame.setVisible(true); 
```

您可能还想`addWindowListener`在 class 内移动部件`Main`。

# iphone - 创建文件夹并添加多个图像

> ID：15948851
> 
> 赞同：0
> 
> 时间：2013-04-11T12:31:11.737
> 
> 标签：iphone, ios, uiimage

我正在创建一个 iPhone 应用程序，我需要在其中创建单独的文件夹并在这些文件夹中添加图像并将整个文件夹上传到谷歌驱动器上。我如何为它创建文件夹和图像。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:37:08.657

**创建文件夹**

```
 NSString  *pngPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:[NSString stringWithFormat:@"/WB/%@",self.viewIndex]];

        // Check if the directory already exists
        BOOL isDir;        
        BOOL exists = [[NSFileManager defaultManager] fileExistsAtPath:pngPath isDirectory:&isDir];
        if (exists) 
        {
            if (!isDir) 
            {
                NSError *error = nil;
                [[NSFileManager defaultManager]  removeItemAtPath:pngPath error:&error];
                // Directory does not exist so create it
                [[NSFileManager defaultManager] createDirectoryAtPath:pngPath withIntermediateDirectories:YES attributes:nil error:nil];
            }
        }
        else
        {
            // Directory does not exist so create it
            [[NSFileManager defaultManager] createDirectoryAtPath:pngPath withIntermediateDirectories:YES attributes:nil error:nil];
        } 
```

**将图像添加到该文件夹**

```
 NSString  *pngImagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:[NSString stringWithFormat:@"/WB/%@/%d.png",self.viewIndex,lineIndex]];
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 1.0);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    self.curImage = UIGraphicsGetImageFromCurrentImageContext();
    [UIImagePNGRepresentation(self.curImage) writeToFile:pngImagePath atomically:YES];
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:30:23.127

尝试这个 ：

//用于保存到文档目录

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd"];

NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"HH:mm:ss"];

NSDate *now = [[NSDate alloc] init];

NSString *theDate = [dateFormat stringFromDate:now];
NSString *theTime = [timeFormat stringFromDate:now];

NSString *strImageName=[NSString stringWithFormat:@"Documents/MyPhotos/Dt%@%@.png",theDate,theTime];
strImageName=[strImageName stringByReplacingOccurrencesOfString:@"-" withString:@""];
strImageName=[strImageName stringByReplacingOccurrencesOfString:@":" withString:@""];

[self createDocumentDirectory:@"MyPhotos"];
NSString  *pngPath = [NSHomeDirectory()  stringByAppendingPathComponent:strImageName];
[UIImagePNGRepresentation(YourImageView.image) writeToFile:pngPath atomically:YES];

    -(void)createDocumentDirectory:(NSString*)pStrDirectoryName
    {
        NSString *dataPath = [self getDocumentDirectoryPath:pStrDirectoryName];

        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:NULL];
    }

    -(NSString*)getDocumentDirectoryPath:(NSString*)pStrPathName
    {
NSString *strPath = @"";
        if(pStrPathName)
            strPath = [[kAppDirectoryPath objectAtIndex:0] stringByAppendingPathComponent:pStrPathName];

        return strPath;
    }

   //Get Photo Onebyone

    NSError *error = nil;
    NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[self getDocumentDirectoryPath:@"MyPhotos"] error:&error];

    if (!error) {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
        NSArray *imagesOnly = [dirContents filteredArrayUsingPredicate:predicate];

        for (int i=0;i<[imagesOnly count]; i++) {
            [arrSaveImage addObject:[imagesOnly objectAtIndex:i]];//Save in your array.
        }
    } 
```

# ios - UITableViewCell 视图中的动画和更改视图

> ID：15948852
> 
> 赞同：3
> 
> 时间：2013-04-11T12:31:12.610
> 
> 标签：ios, xcode, uitableview, core-animation

假设我进行了子类化`UITableViewCell`，并且在其中有一些视图（例如`UILabel`）。

表格**已渲染。** 现在我想改变/动画那个视图。

```
|                       |         |                       |
|-----------------------|         |-----------------------|
|      label alpha=1.0  | animate |      label alpha=0.5  | 
|-----------------------|  ===>   |-----------------------|
|      label alpha=1.0  |         |      label alpha=0.5  |
|-----------------------|         |-----------------------|
|                       |         |                       | 
```

所以`cellForRowAtIndexPath`, `willDisplayCell`,`didEndDisplayingCell`现在不是很好的选择，我认为。

我`animateTest`在子类中创建了一个方法，`UITableViewCell`它改变了标签的样式——例如颜色或执行一些动画。

现在在呈现表格的视图控制器中，我尝试对表格视图子视图执行快速枚举。感谢枚举，我捕获了所有子类`UITableViewCell`实例并使用`performSelector`了触发该方法的`animateTest`方法。但没有任何改变。即使做`[tableview reloadData]`。

**如何在表格呈现后为表格单元格中的内容设置动画？（使用`[UIView animateWithDuration.........]`）？**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:25:13.970

实际上，由于错误的单元初始化，没有发生任何事情。

我之前以以下方式初始化单元格：

```
NSString *cellIdentifier = [NSString stringWithFormat:@"Cell%d", [indexPath section]];

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
NSArray *topLevelObjects;
topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];

    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[CustomCell class]])
        {
            cell = (CustomCell *)currentObject;
            break;
        }
    } 
```

现在我以这种方式初始化单元格：

```
static NSString *reuseIdentifier = @"Cell";

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];

if (cell == nil) {
  cell = [[[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil] objectAtIndex:0];
} 
```

一切正常使用：

```
CustomCell *cell = (CustomCell*)[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:3]];
[UIView animateWithDuration:2 animations:^{
    cell.element.alpha = 0;
}]; 
```

如果有人能简单地解释第一种方法出了什么问题，我将不胜感激。我怀疑单元格在初始化时以某种方式被重置，所以我的更改不可见，因为旧单元格（应用了动画）被丢弃并且再次生成了单元格。

我前段时间从某个网站复制了该片段，所以我习惯了使用它，但显然这不是一个好的实现。

# java - 填充多边形并移动它，但它留下了痕迹

> ID：15948853
> 
> 赞同：2
> 
> 时间：2013-04-11T12:31:17.330
> 
> 标签：java, draw, polygon

好的，所以我一直在尝试移动我的多边形，让它在屏幕上反弹。现在它会这样做，但会在整个过程中留下痕迹。我有一个由 Aquarium 类扩展的 GUI 类，它用蓝色填充屏幕，创建一个“生物”对象（来自 Creature 类）并使用更新将其向下移动到屏幕上。但是，当它更新时，会留下痕迹。我尝试了网站上类似案例中提到的许多方法，但没有任何效果。有人能帮帮我吗？

GUI 类（包含 JPanel 等）

```
package artilife;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class AquariumGUI {

    private GooPanel gooPanel;

    private boolean loop = true;

    protected int width, height;

    private int frameTimeInMillis = 300;

    private RenderingHints renderingHints = new RenderingHints(
            RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    @SuppressWarnings("serial")
    class GooPanel extends JPanel {

        public void paintComponent(Graphics g) {

            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHints(renderingHints);
            draw(g2d);
        }
    }

    public AquariumGUI() {

        this(800, 500);
    }

    public AquariumGUI(int w, int h) {

        width = w;
        height = h;

        JFrame frame = new JFrame();
        frame.setSize(width, height);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        gooPanel = new GooPanel();
        gooPanel.setPreferredSize(new Dimension(w, h));
        frame.getContentPane().add(gooPanel);
        frame.pack();

        frame.setVisible(true);
    }

    public void go() {

        while (loop) {

            gooPanel.repaint(); 
            update();

            try {
                Thread.sleep(frameTimeInMillis);
            } catch (InterruptedException e) {
            }
        }
    }

    public void draw(Graphics2D g) {

    }

    public void update(){
    }

    public void setFrameTime(int millis){

        frameTimeInMillis = millis;
    }
} 
```

Aquarium 类扩展了这个并尝试为屏幕着色并在其上放置一个 Polygon 生物：

```
package artilife;

import java.awt.Color;
import java.awt.Graphics2D;
import java.util.ArrayList;
import java.util.Random;

public class MyAquarium extends AquariumGUI {

    Creature tester;

    public MyAquarium() 
    {
        tester = new Creature();
    }

    public void draw(Graphics2D g) {

        // Fill background 
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, width, height);
        tester.draw(g);

    }

    public void update(){

        tester.move(width, height);

    }

    public static void main(String[] args) {

        MyAquarium aquarium = new MyAquarium();
        aquarium.go();

    }
} 
```

而被绘制的生物，并持有 move 方法：

```
package artilife;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Creature 
{
  // Position and radius of the drop
    private double x, y, r, Vx, Vy;
    Polygon p = new Polygon();
    int numSides;

    public Creature() {

        x = 800 / 2;
        r = 10;
        y = 50;
        Vx = 10;
        Vy = 3;
        numSides = 3;
        //creatureShape(numSides); 
    } 

    public void creatureShape (int sides)
    {
        if (sides <= 10){
            for (int i = 0; i < sides; i++){
            p.addPoint((int) (x + 50 * Math.cos((i) * 2 * Math.PI / sides)),
            (int) (y + 50 * Math.sin((i) * 2 * Math.PI / sides)));
            }
        }
        else{
            for (int i = 0; i < 360; i++) {
            double value = i / 360.0;
            p.addPoint((int) (90 + 50 * value * Math.cos(8 * value * Math.PI)),
            (int) (50 + 50 * value * Math.sin(8 * value * Math.PI)));
            }
        }
    }

    public void draw(Graphics2D g) {

        creatureShape(numSides); 
        g.setColor(Color.BLUE);
        g.fillPolygon(p);

    }

    public void move(int width, int height){

        // Move the drop
       x = x + Vx;
       y = y +Vy;
       if (y >= height){
       Vy = -Vy;
       y = height;
       }
       else if(y <= 0){
       Vy = -Vy;
       y = 0;
       }
       if(x >= width){
       Vx = -Vx; 
       x = width;
       }
       if(x <= 0){
       Vx = -Vx; 
       x = 0;
       }

    }
    /*
    public void attraction ()
    {
        if ( 

    }*/
    /*
    public boolean check4Creatures () 
    {
      boolean isThere = false;
      //if there is an another create object within a 60 point radius
      isThere = true;

        return isThere;
    }*/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:47:50.270

解决方案：因此，为永远的感觉而努力，现在它可以工作了。在运动中绘制多边形时，一些 java 函数会存储一些关于顶点的信息。干净地移动它们的最好方法是在更新信息时使用 translate() 而不是直接操作顶点（通过更新 x 和 y 值），然后绘制新的多边形。

感谢大家抽出时间来看看我的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:34:43.640

您需要在两次绘图操作之间清除屏幕。您可以通过调用`super.paintComponent()`方法将其留给框架，也可以通过在屏幕上填充某些内容（例如`g.fillRect()`调用）来按照自己的方式进行。

第一种方法实际上会调用 fillRect 函数，使用面板背景颜色。

# android - 发送的电子邮件客户端中不存在 Android 发送电子邮件

> ID：15948857
> 
> 赞同：0
> 
> 时间：2013-04-11T12:31:29.147
> 
> 标签：android, email, android-intent

当我尝试通过 INTENT 发送电子邮件（例如使用 gmail 客户端）时，在我的电子邮件客户端中，我看不到已发送的电子邮件。代码是：

```
Intent email = new Intent(Intent.ACTION_SEND);
email.putExtra(Intent.EXTRA_EMAIL, new String[] { to });
email.putExtra(Intent.EXTRA_SUBJECT, subject);
email.putExtra(Intent.EXTRA_TEXT, message);
email.setType("application/zip");
email.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(pathZipCryptDestination)));
email.setType("message/rfc822");
activity.startActivity(Intent.createChooser(email, "E-Mail:")); 
```

电子邮件到达，但我没有在发送的电子邮件中看到它。我必须设置一些参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:46:53.727

您到底在使用什么客户端？

基本上你所做的就是将一些数据传递给另一个使用它的应用程序。它与您自己的应用程序几乎没有关系，因为另一个应用程序接管并完成了电子邮件的发送。如果他们以某种方式没有正确执行此操作，因此您的电子邮件不会添加到您的“发送电子邮件”中，这听起来更像是他们的应用程序中的问题并且不在您的手中。

# java - Android OpenGLES2.0 - 渲染时的纯黑色纹理

> ID：15948859
> 
> 赞同：0
> 
> 时间：2013-04-11T12:31:35.920
> 
> 标签：java, android, opengl-es, opengl-es-2.0, textures

在过去一周左右的时间里，我一直在制作一个 Android OpenGLES2.0 2D 游戏引擎，经过几次颠簸，我基本上取得了成功。我已经实现了 ModelMatrix、ProjectionMatrix、ViewMatrix、LightMatrix、着色器、2D 平面和纹理。然而，虽然我的数据似乎很好地通过了这个管道丛林，但我的纹理没有出现，而是纯黑色。

大多数（如果不是全部）代码都是从[这个源](http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/)派生的，而且它最终是相同的，除了我创建了自己的着色器类、边界框类、房间类和游戏对象类来简化实例化对象的过程 -游戏。Renderer 使用 Room，Room 使用 GameObject(s)（SpaceShip 扩展游戏对象），GameObject 使用 BoundingBox，然后 Renderer 在 for 循环中渲染房间的对象。为此，我移动了示例中的确切代码，以便某些句柄是我创建的某些类的元素，而不是渲染器的元素。这并没有导致矩阵乘法或我的数据到达管道末端的任何问题，所以我怀疑移动手柄是问题，但我觉得知道这一点很重要。

我尝试过的事情：

1.  更改位图
    *   将其更改为没有 Alpha 通道的位图，均为 32x32 (2^5) 且均为 .png。
2.  更改操作顺序
    *   我在我的实现中移动了 glBindTexture，所以我把它移回来，然后又移回来。
3.  更改纹理参数
    *   我尝试了几种组合，没有一个使用 mip-mapping
4.  改变我加载图像的方式
    *   从 BitmapFactory.decodeResource 到 BitmapFactory.decodeStream
5.  将纹理移至所有可绘制文件夹
    *   在 raw 文件夹中也试过
6.  在另一台设备上试过
    *   我朋友的 DROID (Froyo 2.2)，我扎根的 NextBook (Gingerbread 2.3)。两者都支持OpenGLES2.0。

我没有尝试过的Thigs（我知道）：

1.  更改纹理坐标
    *   它们直接来自示例。我只拍了立方体的一张脸。
2.  更改我的着色器
    *   它也直接来自示例（除了它现在是它自己的类）。
3.  将我的程序重组为两个 (3, 4... x) 类
    *   伙计...

我已经在模拟器（Eclipse Indigo、AVD、Intel Atom x86、ICS 4.2.2、API 级别 17）上测试了一段时间，就在我让所有矩阵工作的时候，模拟器无法渲染任何东西. 它过去渲染得很好（当投影全乱时），现在它只是显示为黑色并带有标题栏。这使得调试变得异常困难。我不确定这是否与我所做的事情有关（可能是），或者它是否与模拟器在 OpenGL 上的表现有关。

很抱歉啰嗦了这么多代码，但我不知道如何使用显示/隐藏按钮。

有任何想法吗？

编辑：我使用了示例中的错误着色器。命名非常具有误导性。我没有传递颜色信息。我仍然没有纹理，但是模拟器又可以工作了。:)

OpenGLES20_2DRenderer

```
package mycompany.OpenGLES20_2DEngine;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLES20;
import android.opengl.GLSurfaceView;
import android.opengl.Matrix;
import android.util.Log;

public class OpenGLES20_2DRenderer implements GLSurfaceView.Renderer {

/** Used for debug logs. */
private static final String TAG = "Renderer";

//Matrix Declarations*************************
/**
 * Store the model matrix. This matrix is used to move models from object space (where each model can be thought
 * of being located at the center of the universe) to world space.
 */
private float[] mModelMatrix = new float[16];
/**
 * Store the view matrix. This can be thought of as our camera. This matrix transforms world space to eye space;
 * it positions things relative to our eye.
 */
private float[] mViewMatrix = new float[16];
/** Store the projection matrix. This is used to project the scene onto a 2D viewport. */
private float[] mProjectionMatrix = new float[16];
/** Allocate storage for the final combined matrix. This will be passed into the shader program. */
private float[] mMVPMatrix = new float[16];
/**
 * Stores a copy of the model matrix specifically for the light position.
 */
private float[] mLightModelMatrix = new float[16];

//********************************************

//Global Variable Declarations****************
//Shader
Shader shader;
//PointShader
PointShader pointShader;
//Application Context
Context context;
//A room to add objects to
Room room;
//********************************************

public OpenGLES20_2DRenderer(Context ctx) {
    context = ctx;
}

public void onSurfaceCreated(GL10 unused, EGLConfig config) {

    //Initialize GLES20***************************
    // Set the background frame color
    GLES20.glClearColor(0.0f, 1.0f, 0.0f, 1.0f);
    // Use culling to remove back faces.
    GLES20.glEnable(GLES20.GL_CULL_FACE);
    // Enable depth testing
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    // Position the eye in front of the origin.
    final float eyeX = 0.0f;
    final float eyeY = 0.0f;
    final float eyeZ = -0.5f;
    // We are looking toward the distance
    final float lookX = 0.0f;
    final float lookY = 0.0f;
    final float lookZ = -5.0f;
    // Set our up vector. This is where our head would be pointing were we holding the camera.
    final float upX = 0.0f;
    final float upY = 1.0f;
    final float upZ = 0.0f;
    // Set the view matrix. This matrix can be said to represent the camera position.
    // NOTE: In OpenGL 1, a ModelView matrix is used, which is a combination of a model and
    // view matrix. In OpenGL 2, we can keep track of these matrices separately if we choose.
    Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);    
    //********************************************

    //Initialize Shaders**************************
    shader = new Shader();
    pointShader = new PointShader();
    //********************************************

    //Load The Level******************************
    //Create a new room
    room = new Room(800,600, 0);
    //Load game objects
    SpaceShip user = new SpaceShip();
    //Load sprites
    for(int i=0;i<room.numberOfGameObjects;i++) {
        room.gameObjects[i].spriteGLIndex = room.gameObjects[i].loadSprite(context, room.gameObjects[i].spriteResId);   
    }
    //Add them to the room
    room.addGameObject(user);
    //********************************************

}

public void onDrawFrame(GL10 unused) {

    //Caclulate MVPMatrix*************************
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
    // Set our per-vertex lighting program.
    GLES20.glUseProgram(shader.mProgram);
    // Set program handles for object drawing.
    shader.mMVPMatrixHandle = GLES20.glGetUniformLocation(shader.mProgram, "u_MVPMatrix");
    shader.mMVMatrixHandle = GLES20.glGetUniformLocation(shader.mProgram, "u_MVMatrix");
    shader.mLightPosHandle = GLES20.glGetUniformLocation(shader.mProgram, "u_LightPos");
    shader.mTextureUniformHandle = GLES20.glGetUniformLocation(shader.mProgram, "u_Texture");
    shader.mPositionHandle = GLES20.glGetAttribLocation(shader.mProgram, "a_Position");
    shader.mColorHandle = GLES20.glGetAttribLocation(shader.mProgram, "a_Color");
    shader.mNormalHandle = GLES20.glGetAttribLocation(shader.mProgram, "a_Normal");
    shader.mTextureCoordinateHandle = GLES20.glGetAttribLocation(shader.mProgram, "a_TexCoordinate");

    // Calculate position of the light. Rotate and then push into the distance.
    Matrix.setIdentityM(mLightModelMatrix, 0);
    Matrix.translateM(mLightModelMatrix, 0, 0.0f, 0.0f, -5.0f);
    Matrix.rotateM(mLightModelMatrix, 0, 0, 0.0f, 1.0f, 0.0f);
    Matrix.translateM(mLightModelMatrix, 0, 0.0f, 0.0f, 2.0f);
    Matrix.multiplyMV(shader.mLightPosInWorldSpace, 0, mLightModelMatrix, 0, shader.mLightPosInModelSpace, 0);
    Matrix.multiplyMV(shader.mLightPosInEyeSpace, 0, mViewMatrix, 0, shader.mLightPosInWorldSpace, 0); 
    //********************************************

    //Draw****************************************
    //Draw the background
    //room.drawBackground(mMVPMatrix);
    // Draw game objects
    for(int i=0;i<room.numberOfGameObjects;i++) {

        // Set the active texture unit to texture unit 0.
        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        // Bind the texture to this unit.
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, room.gameObjects[i].spriteGLIndex);
        // Tell the texture uniform sampler to use this texture in the shader by binding to texture unit 0.
        GLES20.glUniform1i(shader.mTextureUniformHandle, 0);

        //Set up the model matrix
        Matrix.setIdentityM(mModelMatrix, 0);
        Matrix.translateM(mModelMatrix, 0, 4.0f, 0.0f, -7.0f);
        Matrix.rotateM(mModelMatrix, 0, room.gameObjects[i].rotation, 1.0f, 0.0f, 0.0f); 

        //Draw the object
        room.gameObjects[i].draw(mModelMatrix, mViewMatrix, mProjectionMatrix, mMVPMatrix, shader);
    }
    //********************************************

    // Draw a point to indicate the light.********
    drawLight();
    //********************************************

}

public void onSurfaceChanged(GL10 unused, int width, int height) {

    //Initialize Projection Matrix****************
    // Set the OpenGL viewport to the same size as the surface.
    GLES20.glViewport(0, 0, width, height);
    // Create a new perspective projection matrix. The height will stay the same
    // while the width will vary as per aspect ratio.
    final float ratio = (float) width / height;
    final float left = -ratio;
    final float right = ratio;
    final float bottom = -1.0f;
    final float top = 1.0f;
    final float near = 1.0f;
    final float far = 10.0f;
    Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);
    //********************************************

}

// Draws a point representing the position of the light.
private void drawLight()
{
    GLES20.glUseProgram(pointShader.mProgram);
    final int pointMVPMatrixHandle = GLES20.glGetUniformLocation(pointShader.mProgram, "u_MVPMatrix");
    final int pointPositionHandle = GLES20.glGetAttribLocation(pointShader.mProgram, "a_Position");
    // Pass in the position.
    GLES20.glVertexAttrib3f(pointPositionHandle, shader.mLightPosInModelSpace[0], shader.mLightPosInModelSpace[1], shader.mLightPosInModelSpace[2]);
    // Since we are not using a buffer object, disable vertex arrays for this attribute.
    GLES20.glDisableVertexAttribArray(pointPositionHandle);
    // Pass in the transformation matrix.
    Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mLightModelMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);
    GLES20.glUniformMatrix4fv(pointMVPMatrixHandle, 1, false, mMVPMatrix, 0);
    // Draw the point.
    GLES20.glDrawArrays(GLES20.GL_POINTS, 0, 1);
}
} 
```

着色器

```
package mycompany.OpenGLES20_2DEngine;

import android.opengl.GLES20;
import android.util.Log;

public class Shader {

/** Used for debug logs. */
private static final String TAG = "Shader";

//Shaders*************************************
public int vertexShader;
public int fragmentShader;
//********************************************

//Handles*************************************
/** This will be used to pass in model position information. */
public int mPositionHandle;
/** This will be used to pass in model color information. */
public int mColorHandle;
/** This will be used to pass in model normal information. */
public int mNormalHandle;
/** This will be used to pass in model texture coordinate information. */
public int mTextureCoordinateHandle;
/** This will be used to pass in the transformation matrix. */
public int mMVPMatrixHandle;
/** This will be used to pass in the modelview matrix. */
public int mMVMatrixHandle;
/** This will be used to pass in the light position. */
public int mLightPosHandle;
/** This will be used to pass in the texture. */
public int mTextureUniformHandle;
/** Used to hold a light centered on the origin in model space. We need a 4th coordinate so we can get translations to work when
 * we multiply this by our transformation matrices. */
public final float[] mLightPosInModelSpace = new float[] {0.0f, 0.0f, 0.0f, 1.0f};
/** Used to hold the current position of the light in world space (after transformation via model matrix). */
public final float[] mLightPosInWorldSpace = new float[4];
/** Used to hold the transformed position of the light in eye space (after transformation via modelview matrix) */
public final float[] mLightPosInEyeSpace = new float[4];
//********************************************

//GL Code For Shaders*************************
public final String vertexShaderCode =
    // A constant representing the combined model/view/projection matrix.
    "uniform mat4 u_MVPMatrix;" + "\n" + 
    // A constant representing the combined model/view matrix.
    "uniform mat4 u_MVMatrix;" + "\n" + 
    // Per-vertex position information we will pass in.
    "attribute vec4 a_Position;" + "\n" + 
    // Per-vertex normal information we will pass in.
    "attribute vec3 a_Normal;" + "\n" + 
    // Per-vertex texture coordinate information we will pass in.
    "attribute vec2 a_TexCoordinate;" + "\n" + 
    // This will be passed into the fragment shader.
    "varying vec3 v_Position;" + "\n" + 
    // This will be passed into the fragment shader.
    "varying vec3 v_Normal;" + "\n" + 
    // This will be passed into the fragment shader.
    "varying vec2 v_TexCoordinate;" + "\n" + 

    // The entry point for our vertex shader.
    "void main()" + "\n" +
        "{" + "\n" +
        // Transform the vertex into eye space.
        "v_Position = vec3(u_MVMatrix * a_Position);" + "\n" +
        // Pass through the texture coordinate.
        "v_TexCoordinate = a_TexCoordinate;" + "\n" +
        // Transform the normal's orientation into eye space.
        "v_Normal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));" + "\n" +
        // gl_Position is a special variable used to store the final position.
        // Multiply the vertex by the matrix to get the final point in normalized screen coordinates.
        "gl_Position = u_MVPMatrix * a_Position;" + "\n" +
    "}";
public final String fragmentShaderCode =
    "precision mediump float;" + "\n" +  // Set the default precision to medium. We don't need as high of a
    // precision in the fragment shader.
    "uniform vec3 u_LightPos;" + "\n" +  // The position of the light in eye space.
    "uniform sampler2D u_Texture;" + "\n" +  // The input texture.
    "varying vec3 v_Position;" + "\n" +  // Interpolated position for this fragment.
    "varying vec3 v_Normal;" + "\n" +  // Interpolated normal for this fragment.
    "varying vec2 v_TexCoordinate;" + "\n" +  // Interpolated texture coordinate per fragment.

    // The entry point for our fragment shader.
    "void main()" + "\n" + 
    "{" + "\n" + 
        // Will be used for attenuation.
        "float distance = length(u_LightPos - v_Position);" + "\n" + 
        // Get a lighting direction vector from the light to the vertex.
        "vec3 lightVector = normalize(u_LightPos - v_Position);" + "\n" + 
        // Calculate the dot product of the light vector and vertex normal. If the normal and light vector are
        // pointing in the same direction then it will get max illumination.
        "float diffuse = max(dot(v_Normal, lightVector), 0.0);" + "\n" + 
        // Add attenuation.
        "diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance)));" + "\n" + 
        // Add ambient lighting
        "diffuse = diffuse + 0.7;" + "\n" + 
        // Multiply the color by the diffuse illumination level and texture value to get final output color.
        "gl_FragColor = (diffuse * texture2D(u_Texture, v_TexCoordinate));" + "\n" + 
    "}";
//********************************************

//GL Program Handle***************************
public int mProgram;
//********************************************

public Shader() {

    //Load Shaders********************************
    vertexShader = compileShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    fragmentShader = compileShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);
    //********************************************

    //Create GL Program***************************
    mProgram = createAndLinkProgram(vertexShader, fragmentShader, new String[] {"a_Position",  "a_Color", "a_Normal", "a_TexCoordinate"});
    //********************************************

}

/**
 * Helper function to compile a shader.
 *
 * @param shaderType The shader type.
 * @param shaderSource The shader source code.
 * @return An OpenGL handle to the shader.
 */
public static int compileShader(final int shaderType, final String shaderSource)
{
    int shaderHandle = GLES20.glCreateShader(shaderType);

    if (shaderHandle != 0)
    {
        // Pass in the shader source.
        GLES20.glShaderSource(shaderHandle, shaderSource);

        // Compile the shader.
        GLES20.glCompileShader(shaderHandle);

        // Get the compilation status.
        final int[] compileStatus = new int[1];
        GLES20.glGetShaderiv(shaderHandle, GLES20.GL_COMPILE_STATUS, compileStatus, 0);

        // If the compilation failed, delete the shader.
        if (compileStatus[0] == 0)
        {
            Log.e(TAG, "Error compiling shader " /*+ GLES20.glGetShaderInfoLog(shaderHandle)*/);
            GLES20.glDeleteShader(shaderHandle);
            shaderHandle = 0;
        }
    }

    if (shaderHandle == 0)
    {   
        throw new RuntimeException("Error creating shader.");
    }

    return shaderHandle;
}

/**
 * Helper function to compile and link a program.
 *
 * @param vertexShaderHandle An OpenGL handle to an already-compiled vertex shader.
 * @param fragmentShaderHandle An OpenGL handle to an already-compiled fragment shader.
 * @param attributes Attributes that need to be bound to the program.
 * @return An OpenGL handle to the program.
 */
public static int createAndLinkProgram(final int vertexShaderHandle, final int fragmentShaderHandle, final String[] attributes)
{
    int programHandle = GLES20.glCreateProgram();

    if (programHandle != 0)
    {
        // Bind the vertex shader to the program.
        GLES20.glAttachShader(programHandle, vertexShaderHandle);   

        // Bind the fragment shader to the program.
        GLES20.glAttachShader(programHandle, fragmentShaderHandle);

        // Bind attributes
        if (attributes != null)
        {
            final int size = attributes.length;
            for (int i = 0; i < size; i++)
            {
                GLES20.glBindAttribLocation(programHandle, i, attributes[i]);
            }   
        }

        // Link the two shaders together into a program.
        GLES20.glLinkProgram(programHandle);

        // Get the link status.
        final int[] linkStatus = new int[1];
        GLES20.glGetProgramiv(programHandle, GLES20.GL_LINK_STATUS, linkStatus, 0);

        // If the link failed, delete the program.
        if (linkStatus[0] == 0)
        {   
            Log.e(TAG, "Error compiling program " /*+ GLES20.glGetProgramInfoLog(programHandle)*/);
            GLES20.glDeleteProgram(programHandle);
            programHandle = 0;
        }
    }

    if (programHandle == 0)
    {
        throw new RuntimeException("Error creating program.");
    }

    return programHandle;
}

} 
```

游戏对象

```
package mycompany.OpenGLES20_2DEngine;

import java.io.IOException;
import java.io.InputStream;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLES20;
import android.opengl.GLUtils;
import android.opengl.Matrix;
import android.util.Log;

public class GameObject {

/** Used for debug logs. */
private static final String TAG = "GameObject";

//Declare Variables****************************
//Position
public int x;
public int y;
public int z;
//Size
public int width;
public int height;
//Movement
double thrustX;
double thrustY;
//Rotation
public int rotation;
public int rotationSpeed;
//Unique Identifier
public int UID;
//Sprite Resource ID
int spriteResId;
//GL Texture Reference
int spriteGLIndex;
//Bounding Box
BoundingBox boundingBox;
//********************************************

GameObject() {

}

public int loadSprite(final Context context, final int resourceId) {
    final int[] textureHandle = new int[1];

    GLES20.glGenTextures(1, textureHandle, 0);

    if (textureHandle[0] != 0)
    {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = false;   // No pre-scaling

        // Read in the resource
        InputStream is = context.getResources()
                .openRawResource(resourceId);
        Bitmap bitmap = null;
        try {
            bitmap = BitmapFactory.decodeStream(is);
            is.close();
        } catch(IOException e) {
            Log.e(TAG, "Could not load the texture");
        }

        // Bind to the texture in OpenGL
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);

        // Set filtering
        //TODO: Offending Line - Makes textures black because of parameters
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);

        // Load the bitmap into the bound texture.
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Recycle the bitmap, since its data has been loaded into OpenGL.
        bitmap.recycle();
    }

    if (textureHandle[0] == 0)
    {
        throw new RuntimeException("Error loading texture.");
    }

    return textureHandle[0];
}

public void setUID(int uid) {
    UID = uid;
}

public int getUID() {
    return UID;
}

public void draw(float[] mModelMatrix, float[] mViewMatrix, float[] mProjectionMatrix, float[] mMVPMatrix, Shader shader) {

    {   
        // Pass in the position information
        boundingBox.mPositions.position(0); 
        GLES20.glVertexAttribPointer(shader.mPositionHandle, boundingBox.mPositionDataSize, GLES20.GL_FLOAT, false,
                0, boundingBox.mPositions);

        GLES20.glEnableVertexAttribArray(shader.mPositionHandle);

        // Pass in the color information
        boundingBox.mColors.position(0);
        GLES20.glVertexAttribPointer(shader.mColorHandle, boundingBox.mColorDataSize, GLES20.GL_FLOAT, false,
                0, boundingBox.mColors);

        GLES20.glEnableVertexAttribArray(shader.mColorHandle);

        // Pass in the normal information
        boundingBox.mNormals.position(0);
        GLES20.glVertexAttribPointer(shader.mNormalHandle, boundingBox.mNormalDataSize, GLES20.GL_FLOAT, false,
                0, boundingBox.mNormals);

        GLES20.glEnableVertexAttribArray(shader.mNormalHandle);

        // Pass in the texture coordinate information
        boundingBox.mTextureCoordinates.position(0);
        GLES20.glVertexAttribPointer(shader.mTextureCoordinateHandle, boundingBox.mTextureCoordinateDataSize, GLES20.GL_FLOAT, false,
                0, boundingBox.mTextureCoordinates);

        GLES20.glEnableVertexAttribArray(shader.mTextureCoordinateHandle);

        // This multiplies the view matrix by the model matrix, and stores the result in the MVP matrix
        // (which currently contains model * view).
        Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);

        // Pass in the modelview matrix.
        GLES20.glUniformMatrix4fv(shader.mMVMatrixHandle, 1, false, mMVPMatrix, 0);

        // This multiplies the modelview matrix by the projection matrix, and stores the result in the MVP matrix
        // (which now contains model * view * projection).
        Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);

        // Pass in the combined matrix.
        GLES20.glUniformMatrix4fv(shader.mMVPMatrixHandle, 1, false, mMVPMatrix, 0);

        // Pass in the light position in eye space.
        GLES20.glUniform3f(shader.mLightPosHandle, shader.mLightPosInEyeSpace[0], shader.mLightPosInEyeSpace[1], shader.mLightPosInEyeSpace[2]);

        // Draw the object
        GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 6);
    }
}
} 
```

边界框

```
package mycompany.OpenGLES20_2DEngine;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
//TODO: make this dynamic, both the constructor and the coordinates.
class BoundingBox {

//Variable Declarations***********************
/** How many bytes per float. */
private final int mBytesPerFloat = 4;
/** Store our model data in a float buffer. */
public final FloatBuffer mPositions;
public final FloatBuffer mColors;
public final FloatBuffer mNormals;
public final FloatBuffer mTextureCoordinates;
//Number of coordinates per vertex in this array
final int COORDS_PER_VERTEX = 3;
//Coordinates
float[] positionData;
//Texture Coordinates
float[] textureCoordinateData;
//Vertex Color
float[] colorData;
float[] normalData;
//Vertex Stride
final int vertexStride = COORDS_PER_VERTEX * 4;
/** Size of the position data in elements. */
public final int mPositionDataSize = 3; 
/** Size of the color data in elements. */
public final int mColorDataSize = 4;    
/** Size of the normal data in elements. */
public final int mNormalDataSize = 3;
/** Size of the texture coordinate data in elements. */
public final int mTextureCoordinateDataSize = 2;
//********************************************

public BoundingBox(float[] coords) {
    //TODO: Normalize values
    //Set Coordinates and Texture Coordinates*****
    if(coords==null) {
        float[] newPositionData = {
                // Front face
                -1.0f, 1.0f, 1.0f,  
                -1.0f, -1.0f, 1.0f,
                1.0f, 1.0f, 1.0f,
                -1.0f, -1.0f, 1.0f,
                1.0f, -1.0f, 1.0f,
                1.0f, 1.0f, 1.0f
        };
        positionData = newPositionData;

        float[] newColorData = {
                // Front face (red)
                1.0f, 0.0f, 0.0f, 1.0f, 
                1.0f, 0.0f, 0.0f, 1.0f,
                1.0f, 0.0f, 0.0f, 1.0f,
                1.0f, 0.0f, 0.0f, 1.0f, 
                1.0f, 0.0f, 0.0f, 1.0f,
                1.0f, 0.0f, 0.0f, 1.0f
        };

        colorData = newColorData;

        float[] newTextureCoordinateData =
            {   
                // Front face
                0.0f, 0.0f,
                0.0f, 1.0f,
                1.0f, 0.0f,
                0.0f, 1.0f,
                1.0f, 1.0f,
                1.0f, 0.0f, 
            };
        textureCoordinateData = newTextureCoordinateData;

        float[] newNormalData = {
                // Front face
                0.0f, 0.0f, 1.0f,   
                0.0f, 0.0f, 1.0f,
                0.0f, 0.0f, 1.0f,
                0.0f, 0.0f, 1.0f,   
                0.0f, 0.0f, 1.0f,
                0.0f, 0.0f, 1.0f
        };

        normalData = newNormalData;
    }
    else {
        positionData = coords;
        //TODO:Reverse coords HERE
        textureCoordinateData = coords;
    }
    //********************************************

    //Initialize Buffers**************************
    mPositions = ByteBuffer.allocateDirect(positionData.length * mBytesPerFloat)
            .order(ByteOrder.nativeOrder()).asFloatBuffer();    
    mPositions.put(positionData).position(0);   

    mColors = ByteBuffer.allocateDirect(colorData.length * mBytesPerFloat)
            .order(ByteOrder.nativeOrder()).asFloatBuffer();    
    mColors.put(colorData).position(0);

    mNormals = ByteBuffer.allocateDirect(normalData.length * mBytesPerFloat)
            .order(ByteOrder.nativeOrder()).asFloatBuffer();    
    mNormals.put(normalData).position(0);

    mTextureCoordinates = ByteBuffer.allocateDirect(textureCoordinateData.length * mBytesPerFloat)
            .order(ByteOrder.nativeOrder()).asFloatBuffer();
    mTextureCoordinates.put(textureCoordinateData).position(0);
    //********************************************
}
} 
```

飞船

```
package mycompany.OpenGLES20_2DEngine;

public class SpaceShip extends GameObject{

public SpaceShip() {
    spriteResId = R.drawable.spaceship;
    boundingBox = new BoundingBox(null);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:09:05.583

知道了。在加载位图（从房间）之后，我将宇宙飞船添加到房间。

```
 //Load The Level******************************
    //Create a new room
    room = new Room(800,600, 0);
    //Load game objects
    SpaceShip user = new SpaceShip();
    **//Load sprites
    for(int i=0;i<room.numberOfGameObjects;i++) {
        room.gameObjects[i].spriteGLIndex = room.gameObjects[i].loadSprite(context, room.gameObjects[i].spriteResId);   
    }
    //Add them to the room
    room.addGameObject(user);**
    //******************************************** 
```

# java - 当请求超时时，http servlet 会发生什么？

> ID：15948872
> 
> 赞同：4
> 
> 时间：2013-04-11T12:32:04.350
> 
> 标签：java, servlets

我有从 http servlet 调用的繁重、耗时的逻辑。当请求超时时会发生什么？servlet 容器会挂起底层的 http 线程吗？还是会继续运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:39:53.110

servlet线程仍在运行，因为超时是客户端行为，唯一的影响是客户端关闭请求的输入流（servlet的输出流），结果可能不会发送到客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:25:57.860

它将继续运行，而不会意识到请求请求的客户端可能早已不复存在。

# 线程池

应用程序服务器通常包含一个有界[线程池](http://docs.oracle.com/cd/E13222_01/wls/docs100/perform/appb_queues.html)来服务请求。这些池可用于每个 Web 应用程序，甚至可以针对 servlet/EJB。当您长时间（或永远）运行一个线程时，它会利用池中的一个线程，并且在完成之前永远不会返回该资源。这可能会导致线程池达到其最大大小并最终降低对 Web 应用程序的调用性能。

还有一个**无界线程池**的概念，其中池可以使用的最大线程数仅受硬件限制。这对于服务器定义的“服务质量”属性可能不是一个好主意，因为无界池会影响整个机器，而不仅仅是导致问题的 WAR / 代码。

# 卡住的线程

一些应用程序服务器提供了检测这一点并将此类线程标记为[STUCK](http://docs.oracle.com/cd/E13222_01/wls/docs81/perform/WLSTuning.html)的规定。有可以杀死线程的 JMX api，或者您可以核对 WAR 以将线程释放回池中。

# 超时

超时适用于 HTTP 层而不是服务器端。这些是各种 HTTP 超时，例如。

*   **连接超时**- 建立连接所用的时间。
*   **读取超时**- 由于客户端读取响应时间过长而发生的超时。
*   ~~**SO Timeout** - 整个操作的套接字超时。~~

servlet 不知道这些。写入关闭的连接时，您应该会看到以下错误 -`Connection close by remote host`

想避免这一切吗？编写一个快速处理您的请求并尽快返回的 servlet。这将保持您的高吞吐量和用户满意。

# ssas - 具有类似子句 SSAS 的维度值

> ID：15948883
> 
> 赞同：1
> 
> 时间：2013-04-11T12:32:41.007
> 
> 标签：ssas, mdx

我想要带有like子句的维度值..我试过这个

```
WITH 
SET CITY
AS
FILTER(
      [CITY].[CITY].CHILDREN,
      vbamdx!INSTR([CITY].[CITY].CURRENTMEMBER.Name,'In',1 >= 1 )
)
   MEMBER [Measures].[Label] AS [CITY].[CITY].CURRENTMEMBER.MEMBER_CAPTION 
SELECT {[Measures].[Label]
      } ON COLUMNS , 
      [CITY].[CITY].ALLMEMBERS ON ROWS 
FROM [TEST_Cube] 
```

想要名称包含“In”的所有城市。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:24:52.960

您没有使用您制作的过滤集。

此外，您将您的集合命名为与可能给您带来麻烦的维度相同。

尝试：

```
WITH 

SET FilteredCities AS
FILTER
(
    [CITY].[CITY].CHILDREN,
    vbamdx!INSTR([CITY].[CITY].CURRENTMEMBER.Name,'In',1 >= 1 )
)

MEMBER [Measures].[Label] AS 
[CITY].[CITY].CURRENTMEMBER.MEMBER_CAPTION 

SELECT 
{
    [Measures].[Label]
} 
ON COLUMNS , 
      FilteredCities //Use the set
ON ROWS 
FROM [TEST_Cube] 
```

# ios - 将变量从 ViewController 传递到 UIPopoverControllerView iOS

> ID：15948885
> 
> 赞同：0
> 
> 时间：2013-04-11T12:32:47.763
> 
> 标签：ios, uiviewcontroller, uipopovercontroller

我在将变量从视图控制器传递到 UIPopoverViewcontroller 时遇到问题

逻辑与在两个常用视图控制器之间传递数据不同吗？

即在view1 & view2 中设置一个变量并合成然后呈现PopoverView 将变量从view1 传递到view2？

我真的在为此苦苦挣扎，我已经阅读了一些关于协议的内容，但如果它像通常的视图控制器一样工作，似乎有点过头了？

一个例子

```
 self.optionsPopover.delegate = self;
    popOverViewController = [[PopOverViewController alloc]initWithNibName:@"PopOverViewController" bundle:nil];
    self.optionsPopover = [[UIPopoverController alloc]initWithContentViewController:popOverViewController];

    //dictionary to pass from view1 to view2 which is a popover
    self.popOverViewController.statsDict = self.statsDict;
    [self.optionsPopover setPopoverContentSize:CGSizeMake(320, 480)];
    [self.optionsPopover presentPopoverFromBarButtonItem:optionsButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:35:50.133

这`UIPopOverViewController`将允许您展示自己的`UIViewController`（充当容器）。就像`UINavigationController`接收到的 a一样`UIViewController`。你到底想做什么`UIPopoverViewController`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:45:12.987

之后`initWithContentViewController`，你`popOverViewController`的`viewDidLoad`方法已经被调用了（那个时候`statsDict`属性是`nil`）。

因此，要么在调用初始化程序之前设置属性，要么编写自定义设置器，如：

```
- (void)seStatsDict(NSDictionary *)statsDict
{
    _statsDict = statsDict;
    if (self.view) {
        // Set UILabel texts, etc...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:59:47.167

除了在创建弹出框之前设置 popOver 的委托之外，您的代码没有任何问题。我已经改变了顺序。并检查您的字典是否为零

```
self.popOverViewController = [[PopOverViewController alloc]initWithNibName:@"PopOverViewController" bundle:nil];

 //dictionary to pass from view1 to view2 which is a popover
//self.popOverViewController.statsDict = self.statsDict;

 self.popOverViewController.testString = @"testing"; // This is for testing only

 self.optionsPopover = [[UIPopoverController alloc]initWithContentViewController:popOverViewController];
 self.optionsPopover.delegate = self;

[self.optionsPopover setPopoverContentSize:CGSizeMake(320, 480)];
[self.optionsPopover presentPopoverFromBarButtonItem:optionsButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

# ipython-notebook - Ipython Notebook：为一个功能使用不同的单元格

> ID：15948887
> 
> 赞同：1
> 
> 时间：2013-04-11T12:32:54.953
> 
> 标签：ipython-notebook

我正在使用 ipython 笔记本。为了评论我的函数，我想在我的函数定义中插入一个降价。但是在第二个代码单元中，它开始就像与我之前写的内容无关。

例子：

*   单元格 1:
    def my_function(one,two): i=0
*   Markdown:
    i 用于索引
*   单元格 2：
    i+=2

首先我有一个'IndentationError：意外缩进'，其次是一个'NameError：名称'i'没有定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:10:21.707

IPython notebook 中的每个单元都必须是独立的并且单独运行。当您进入第一个单元格时，您实际上`my_function`只用一行的正文完全定义。`i=0`在你的情况下。无法在定义函数后向函数添加代码。在 (I)Python 提示符中输入一些内容时也是如此。您没有跨多个输入查询定义函数。

至于为什么`i`in undefined ，是因为范围`i`仅限于函数，但这在大多数编程语言中都是经典的。

因此，不要将 IPython 笔记本视为带有 markdown 的全文文件，而应将其视为在每个单元格中要做的不同事情，并按顺序执行。

# php - 根据 url 中的 PHP $GET 在短时间内显示隐藏的 div

> ID：15948894
> 
> 赞同：1
> 
> 时间：2013-04-11T12:33:24.603
> 
> 标签：php, javascript, jquery

我有两个不同的隐藏 div。它们被 css "display:none;" 隐藏。两个 div 都包含一个图像。在页面加载时，如果 url 是“www.myserver.com/index.php?succeded=yes”，我希望 div 1 显示一小段时间，如果 url 显示“www. myserver.com/index.php?succeded=no”。

这可以用jquery完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:40:15.337

阅读“成功”：[获取转义的 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)。

使用功能`function getURLParameter(name)`：

```
if (getURLParameter('succeded') == 'yes') {
    $('#mydiv').show();
    window.setTimeout(function () { $('#mydiv').hide(); }, 5000); // hide after 5s
} 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:39:40.800

您可以使用`.split()`jQuery 的方法：

```
var url = "www.myserver.com/index.php?succeded=yes"; // window.location.href;
var str = url.split('?')[1];

if(str == "succeded=yes"){
    $('.yesdiv').show().delay(2000).hide();
}else{
    $('.nodiv').show().delay(2000).hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:37:08.217

首先，URL 中的参数是*GET*参数，而不是 POST。

当然这是可以做到的——或者你已经在服务器端检查了这个参数，然后输出适当的 JS 代码；或者您自己在JS中查看当前文档的URL，`location.search`用于访问URL的查询字符串部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:58:07.233

我认为如果将 php 变量解析为 js 会更容易

```
var any = "<?=isset($_GET['success'])?$_GET['success']:''?>"; 
```

# css-position - jpCarousel 定位错误

> ID：15948896
> 
> 赞同：0
> 
> 时间：2013-04-11T12:33:26.620
> 
> 标签：css-position, typo3, jcarousel

我在 Typo3 中安装了扩展 jpCarousel 并想添加幻灯片。我在 jpCarousel 的模板 css 文件中没有任何更改，但是容器和红色 div 不在同一位置，它也是扩展的 div...

谁能帮助我，并告诉我如何将画廊调整为红色 div？谢谢！

[http://preview-list.lmenges.de/index.php?id=auto](http://preview-list.lmenges.de/index.php?id=auto)

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:51:52.370

优化**您的**CSS，例如`width`导致`#content_left`右列内容向下移动的示例。在您的浏览器中使用一些检查器以使其正确，因为现在您有一个相当大的混乱。

# asp.net - 除非指定了 DeleteCommand，否则数据源“SqlDataSource1”不支持删除

> ID：15948897
> 
> 赞同：1
> 
> 时间：2013-04-11T12:33:27.453
> 
> 标签：asp.net, vb.net, gridview, sql-server-2012, sqldatasource

我有一个 ASP 按钮链接，`GridView1`它应该在单击时从 db 表中删除一个项目，并且我收到以下错误消息：

```
Deleting is not supported by data source 'SqlDataSource1' unless DeleteCommand is specified. 
```

这是代码：

**VB.NET**

```
Protected Sub GridView1_RowCommand(sender As Object, e As GridViewCommandEventArgs) Handles GridView1.RowCommand

    If e.CommandName.Equals("Delete") Then

        Dim rowIndex As Integer = Convert.ToInt32(e.CommandArgument)
        Dim rowID As String = e.CommandArgument.ToString()
        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True;")
        Dim cmd As New SqlCommand("DELETE content WHERE content_id=@rowID", conn)

        cmd.Parameters.AddWithValue("@rowID", rowID)

        conn.Open()
        cmd.ExecuteNonQuery()
        conn.Close()

    End If

End Sub 
```

**ASP**

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None" ViewStateMode="Enabled">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:BoundField DataField="content_name" HeaderText="Content Name" SortExpression="content_name">
            </asp:BoundField>
            <asp:BoundField DataField="content_type" HeaderText="Content Type" SortExpression="content_type">
            </asp:BoundField>
            <asp:buttonfield buttontype="Link" commandname="Delete" text="Delete"> 
             <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
            </asp:buttonfield>
             <asp:TemplateField HeaderText=" ">
            <ItemTemplate>
            <asp:LinkButton ID="lnkDownload" runat="server" Text="Download" OnClick="lnkDownload_Click" ></asp:LinkButton>
            </ItemTemplate>
            </asp:TemplateField>
        </Columns>
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
    </asp:GridView> 
```

根据我阅读的内容，您需要为`SQLDataSource1`.

在我的情况下我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T05:56:25.117

如果您将其更改为...`CommandName="DeleteRow"`或其他内容..然后将其更改为`if(e.CommandName == "DeleteRow")`您将绕过该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:13:30.253

您必须输入 asp 代码：

```
<asp:ButtonColumn CommandName="Delete" Text="Delete"></asp:ButtonColumn> 
```

真挚地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T17:04:18.210

只是一个关于我是如何做到这一点的快速回答。

如果您在选择字段的命令字段属性下选择“ShowDeleteButton”，则“删除”将显示在gridview 的每一行的左侧。但是，当您这样做时，期望 sql 数据源将有一个删除命令。如果没有，您会收到关于未指定删除命令的令人讨厌的消息。

由于我希望 BusinessObject 处理删除而不是 sql 数据源，因此我使用了 select，就像您要选择一行一样，然后我将命令字段属性下的“SelectText”更改为“Delete”。这允许我使用 RowCommand 事件来捕获删除操作。从那里我只是抓取了我需要的行信息，并将其传递给业务对象以进行删除。

请注意，当您这样做时，即使命令文本是“删除”，CommandName 仍然是“选择”。所以你检查如下：

```
 if (e.CommandName.ToString() == "Select") 
```

希望对某人有所帮助。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T13:58:32.143

您需要将其更改为 Else Like

```
<asp:buttonfield buttontype="Link" commandname="Del" text="Delete"> 
```

然后将其更改为`(e.CommandName == "Del")` 因为 "DELETE" 保留给 SQlDataSource 控件

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-11T06:08:05.447

发生此错误是因为您写入命令名称删除。所以你写了像删除记录这样的东西。并且当您使用 SQLDataSource 时，该时间命令不应与删除或更新相同。请使用替代名称。

# css - DataView：有条件地突出显示某些行（OneUI）

> ID：15948902
> 
> 赞同：0
> 
> 时间：2013-04-11T12:33:49.650
> 
> 标签：css, xpages, xpages-extlib

使用默认的 OneUI 主题，我想突出显示单行，即使设置了更多列。对于 3 列，它呈现为：

```
<TR>
  <TD>
  <TD>
  <TD> 
```

我尝试设置属性 rowStyleClass="row#{i}"，以演示它的呈现方式：

```
<TR class="row0">
  <TD>
  <TD>
  <TD>
<TR class="row3">
  <TD>
  <TD>
  <TD>
<TR class="row6">
  <TD>
  <TD>
  <TD> 
```

所以它适用于表格行中的所有数据行——同时适用于所有三个文档。

我知道我可以制作自己的渲染器，或者使用 dojo/jQ 来后处理 DOM，但我正在寻找最简单的 CSS 设置来基于视图条目属性突出显示整个 TD。

示例来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
 xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.data>
        <xp:dominoView var="view1" databaseName=" names.nsf"
            viewName="PeopClver">
        </xp:dominoView>
    </xp:this.data>
    <xe:dataView id="dataView1" value="#{view1}" rowStyleClass="#{ve.$17}"
        var="ve" multiColumnCount="3">
        <xe:this.summaryColumn>
            <xe:viewSummaryColumn columnName="$17"></xe:viewSummaryColumn>
        </xe:this.summaryColumn>
        <xe:this.extraColumns>
            <xe:viewExtraColumn columnName="$26"></xe:viewExtraColumn>
        </xe:this.extraColumns>
        <xe:this.categoryColumn>
            <xe:viewCategoryColumn columnName="ClntBld"></xe:viewCategoryColumn>
        </xe:this.categoryColumn>
    </xe:dataView>
</xp:view> 
```

这表明，对于所有 3 列 styleClass`<TR>`仅由第一个单元格/文档评估。无法设置其余 dataView 行（最多包含三个文档）的样式。我想根据某些条件（例如空邮件地址或某些特定域）突出显示文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:28:46.450

你应该能够做到：

```
rowStyleClass="row#{(i%2)=1 ? 'oddRow' : 'evenRow'}" 
```

用于交替行。

如果您不想交替使用相同的方法，但要突出显示某些行。这里很可能您需要使用 SSJS 来评估您的条件并将行变量作为参数传递。

# sql - SQL 来自一个分组的两个条件

> ID：15948905
> 
> 赞同：1
> 
> 时间：2013-04-11T12:34:00.617
> 
> 标签：sql, postgresql, duplicates, greatest-n-per-group, postgresql-9.0

我有一个包含一些“功能重复”记录的表 - 不同的 ID，但 4 列“用户数据”（甚至更多列）是相同的。我有一个查询工作，它将选择所有具有此类重复项的记录。

现在我想从每组重复项中首先选择列`A`不为空的任何一个 - 我已经从数据中验证了每组最多有 1 个这样的行 - 如果在这个特定组中没有，然后是列的最小值`ID`。

我该如何选择？我不能完全在 CASE 的 THEN 中使用非聚合，而在 ELSE 中使用聚合。例如，这不起作用：

```
SELECT CASE
           WHEN d.A IS NULL THEN d.ID
           ELSE MIN(d.ID) END,
       d.B,
       d.C,
       d.E,
       d.F
FROM TABLE T
JOIN (my duplicate query here) D ON T.B=D.B
AND T.C=D.C
AND T.E=D.E
AND T.F=D.F
GROUP BY T.B,
         T.C,
         T.E,
         T.F 
```

错误是：

> A 列必须出现在 GROUP BY 子句中或在聚合函数中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:29:09.430

这可以**从根本上更简单**：

```
SELECT DISTINCT ON (b, c, e, f)
       b, c, e, f, id   -- add more columns freely
FROM   (<duplicate query here>) sub
ORDER  BY b, c, e, f, (a IS NOT NULL), id 
```

*   您的重复查询包含所有列。无需`JOIN`再次访问基表。

*   使用标准 SQL 的 Postgres扩展`DISTINCT`：[`DISTINCT ON`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)

    *   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)
*   Postgres 具有适当的布尔类型。您可以`ORDER BY`直接布尔表达式。顺序是`FALSE`(0), `TRUE`(1), `NULL`(NULL)。如果 a 为 NULL，则此表达式为`FALSE`并首先排序：`(a IS NOT NULL)`。其余的由 订购`id`。瞧。

*   选择`ID`自动发生。根据您的描述，您需要在此查询中选择的行的 ID。没有什么可做的了。

*   您可以直接将其集成到您的重复查询中。

# api - Slim 框架 - 调用外部 API

> ID：15948906
> 
> 赞同：5
> 
> 时间：2013-04-11T12:34:00.893
> 
> 标签：api, rest, curl, slim

我对 Slim Framework 2 完全陌生，我想对外部 API 进行 HTTP 调用。

它只是这样的： `GET http://website.com/method`

有没有办法使用 Slim 来做到这一点，还是我必须使用 curl 来处理 PHP？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T12:37:09.077

您可以使用 Slim 框架构建 API。要使用其他 API，您可以使用 PHP Curl。

例如：

```
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://website.com/method");
curl_setopt($ch, CURLOPT_HEADER, 0);            // No header in the result 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // Return, do not echo result   

// Fetch and return content, save it.
$raw_data = curl_exec($ch);
curl_close($ch);

// If the API is JSON, use json_decode.
$data = json_decode($raw_data);
var_dump($data);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-24T22:17:36.110

```
<?php
  try {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://website.com/method");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TCP_KEEPALIVE, 1);
    curl_setopt($ch, CURLOPT_TCP_KEEPIDLE, 2);
    $data = curl_exec($ch);
    if(curl_errno($ch)){
        throw new Exception(curl_error($ch));
    }
    curl_close($ch);
    $data = json_decode($data);
    var_dump($data);
  } catch(Exception $e) {
    // do something on exception
  }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T15:30:21.750

我更喜欢使用能够获取远程文件并且可以使用参数进行调整的[file_get_contents 。](http://php.net/manual/en/function.file-get-contents.php)[`$context`](http://php.net/manual/en/function.stream-context-create.php)第四[个示例](http://php.net/manual/en/function.file-get-contents.php)显示了一个获取请求。

```
$file = file_get_contents('http://www.example.com/', false, $context); 
```

# javascript - 为什么在更改引用时将 textContent 分配给引用不会更新 DOM？

> ID：15948920
> 
> 赞同：0
> 
> 时间：2013-04-11T12:34:37.210
> 
> 标签：javascript, html, dom

看起来 textContent 是 Node 中的一个属性，但为什么下面的代码不能按预期工作：

[http://jsbin.com/ukexab/1/edit](http://jsbin.com/ukexab/1/edit)

```
var d = document.getElementById("container");

var data = {text: "something different"};

d.textContent = data.text;

data.text = "new text"; 
```

这类似于复制而不是引用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:42:01.520

是的，这是由于分配的工作方式。

将一个`Object`或从它派生的任何内容分配给变量实际上会分配对该对象的引用，并增加对象的引用计数。

分配原语将传递其值的副本。

# c# - 属性属性的反射集值

> ID：15948925
> 
> 赞同：0
> 
> 时间：2013-04-11T12:35:00.280
> 
> 标签：c#, reflection

我有 2 节课：

```
public class CustomerViewModel {
  public SystemViewModel system { get;set; }
}

public class SystemViewModel {
  public bool isReadOnly { get; set; }
} 
```

在方法控制器操作上，我有一个自定义过滤器属性，它执行一些代码并确定用户是否具有只读或写入访问权限。此属性可以应用于跨多个控制器的多个操作。

到目前为止，使用反射我可以使用以下方法访问模型：

```
var viewModel = filterContext.Controller.ViewData.Model; 
```

我无法将此模型转换为 CustomerViewModel，因为在不同的操作中它可能类似于 SalaryViewModel。我所知道的是，任何需要 readonly 属性的模型都将具有 SystemViewModel 属性。

从我的自定义过滤器中，我需要一种能够更改只读值的方法。

到目前为止，我有这个：

```
public override void OnActionExecuted(ActionExecutedContext filterContext) {
    var viewModel = filterContext.Controller.ViewData.Model;

    var systemViewModelPropertyInfo = model.GetType()
        .GetProperties()
        .FirstOrDefault(p => p.PropertyType == typeof(SystemViewModel));

    if (systemViewModelPropertyInfo != null) {
        // Up to here, everything works, systemViewModelPropertyInfo is of
        // type PropertyInfo, and the systemViewModelPropertyInfo.PropertyType 
        // shows the SystemViewModel type
        // If we get here, the model has the system property
        // Here I need to try and set the IsReadOnly property to true/false;
        // This is where I need help please
    }
} 
```

**已解决** 感谢所有参与解决此问题的人。特别感谢**Julián Urbano**提供了我一直在寻找的解决方案。这是我的过滤器中生成的代码：

```
public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    try
    {
        var viewModel = filterContext.Controller.ViewData.Model;
        var systemViewModelPropertyInfoCount = viewModel.GetType().GetProperties().Count(p => p.PropertyType == typeof(SystemViewModel));

        if(systemViewModelPropertyInfoCount == 1)
        {
            var systemViewModelPropertyInfo = viewModel.GetType().GetProperties().First(p => p.PropertyType == typeof(SystemViewModel));
            if(systemViewModelPropertyInfo != null)
            {
                var systemViewModel = systemViewModelPropertyInfo.GetValue(viewModel, null) as SystemViewModel;

                if(systemViewModel != null)
                {
                    var admin = GetAdmin(filterContext.HttpContext.User.Identity.Name);
                    if(admin != null && _adminService.HasPermission(admin, _privilege, Access.Level.ReadWrite))
                        systemViewModel.ReadOnly = false;
                    else
                        systemViewModel.ReadOnly = true;
                }
            }
        } else if(systemViewModelPropertyInfoCount > 1)
        {
            throw new Exception("Only once instance of type SystemViewModel allowed");
        }
    }
    catch (Exception exception)
    {
        Log.Error(MethodBase.GetCurrentMethod(), exception);
        filterContext.Controller.TempData["ErrorMessage"] = string.Format("Technical error occurred");
        filterContext.Result = new RedirectResult("/Error/Index");
    }
    finally
    {
        base.OnActionExecuted(filterContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:42:58.300

> 我无法将此模型转换为 CustomerViewModel，因为在不同的操作中它可能类似于 SalaryViewModel。我所知道的是，任何需要 readonly 属性的模型都将具有 SystemViewModel 属性。

**选项1**

在我看来，最好的选择是编写如下界面：

```
public interface IWithSystemViewModel {
    SystemViewModel System {get;}
} 
```

并从您的类中实现它，就像：

```
public class CustomerViewModel : IWithSystemViewModel{
    public SystemViewModel System { get;set; }
}
public class SalaryViewModel : IWithSystemViewModel{
    public SystemViewModel System { get;set; }
} 
```

因此您**可以**对其进行转换并访问该`isReadOnly`属性：

```
IWithSystemViewModel viewModel = filterContext.Controller.ViewData.Model as IWithSystemViewModel;
if(viewModel!=null){
    viewModel.System.isReadOnly ...
} 
```

**选项 2**

如果你想坚持使用反射：

```
var viewModel = filterContext.Controller.ViewData.Model;
SystemViewModel  theSystem = viewModel.GetType().GetProperty("system")
    .GetValue(viewModel, null) as SystemViewModel;
theSystem.isReadOnly ... 
```

棘手的事情：在您的代码中，您选择类型为`SystemViewModel`. 但是如果对象实际上有几个`SystemViewModel`你不知道的属性呢？你确定你访问的是正确的吗？您可以强制它们都使用相同的名称，但话又说回来，这就像使用上面选项 1 中的接口一样。

我肯定会选择选项1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:52:23.387

```
var viewModel = new CustomerViewModel();

var systemViewModelPropertyInfo = viewModel.GetType()
    .GetProperties()
    .FirstOrDefault(p => p.PropertyType == typeof(SystemViewModel));

if (systemViewModelPropertyInfo != null) {
    var systemViewModelProperty = systemViewModelPropertyInfo.GetValue(viewModel, null) as SystemViewModel;

    // get the desired value of isReadOnly here...
    var isReadOnly = false;

    // here, systemViewModelProperty may be null if it has not been set.
    // You can decide what to do in that case. If you need a value to be
    // present, you'll have to do something like this...
    if (systemViewModelProperty == null) {
        systemViewModelPropertyInfo.SetValue(viewModel, new SystemViewModel { isReadOnly = isReadOnly }, null);
    }
    else {
        systemViewModelProperty.isReadOnly = isReadOnly;
    }
} 
```

也就是说，如果你实现了一个接口，整个过程可能会更容易......

```
public interface IHaveSystemViewModel {
    SystemViewModel system { get; set; }
}

var model = viewModel as IHaveSystemViewModel;
if (model != null) {

    // again, you need to make sure you actually have a reference here...
    var system = model.system ?? (model.system = new SystemViewModel());
    system.isReadOnly = false; // or true
} 
```

# java - 工作肥皂客户端示例

> ID：15948927
> 
> 赞同：127
> 
> 时间：2013-04-11T12:35:02.693
> 
> 标签：java, web-services, soap

我试图在 JAVA 中找到一个简单的（ha）SOAP 示例和一个工作服务，我似乎发现的任何一个都不起作用。

我已经从这个[示例](http://cafeconleche.org/books/xmljava/chapters/ch03s05.html)[中](http://www.elharo.com/fibonacci/SOAP)尝试过这个，但它只是不工作，它要求我输入一个正斜杠，但它在那里并且没有发生任何事情。

那么有谁知道任何 SOAP 示例链接，我可以下载/请求并弄乱？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-04-11T13:18:49.657

要在 Java 中实现简单的 SOAP 客户端，您可以使用 SAAJ 框架（它随 JSE 1.6 及更高版本提供，但在 Java 11 中再次被删除）：

> **SOAP with Attachments API for Java (SAAJ)**主要用于直接处理在任何 Web 服务 API 中发生在幕后的 SOAP 请求/响应消息。它允许开发人员直接发送和接收肥皂消息，而不是使用 JAX-WS。

请参阅下面使用 SAAJ 的 SOAP Web 服务调用的工作示例（运行它！）。它调用[这个网络服务](http://www.webservicex.net/uszip.asmx?op=GetInfoByCity)。

```
import javax.xml.soap.*;

public class SOAPClientSAAJ {

    // SAAJ - SOAP Client Testing
    public static void main(String args[]) {
        /*
            The example below requests from the Web Service at:
             http://www.webservicex.net/uszip.asmx?op=GetInfoByCity

            To call other WS, change the parameters below, which are:
             - the SOAP Endpoint URL (that is, where the service is responding from)
             - the SOAP Action

            Also change the contents of the method createSoapEnvelope() in this class. It constructs
             the inner part of the SOAP envelope that is actually sent.
         */
        String soapEndpointUrl = "http://www.webservicex.net/uszip.asmx";
        String soapAction = "http://www.webserviceX.NET/GetInfoByCity";

        callSoapWebService(soapEndpointUrl, soapAction);
    }

    private static void createSoapEnvelope(SOAPMessage soapMessage) throws SOAPException {
        SOAPPart soapPart = soapMessage.getSOAPPart();

        String myNamespace = "myNamespace";
        String myNamespaceURI = "http://www.webserviceX.NET";

        // SOAP Envelope
        SOAPEnvelope envelope = soapPart.getEnvelope();
        envelope.addNamespaceDeclaration(myNamespace, myNamespaceURI);

            /*
            Constructed SOAP Request Message:
            <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:myNamespace="http://www.webserviceX.NET">
                <SOAP-ENV:Header/>
                <SOAP-ENV:Body>
                    <myNamespace:GetInfoByCity>
                        <myNamespace:USCity>New York</myNamespace:USCity>
                    </myNamespace:GetInfoByCity>
                </SOAP-ENV:Body>
            </SOAP-ENV:Envelope>
            */

        // SOAP Body
        SOAPBody soapBody = envelope.getBody();
        SOAPElement soapBodyElem = soapBody.addChildElement("GetInfoByCity", myNamespace);
        SOAPElement soapBodyElem1 = soapBodyElem.addChildElement("USCity", myNamespace);
        soapBodyElem1.addTextNode("New York");
    }

    private static void callSoapWebService(String soapEndpointUrl, String soapAction) {
        try {
            // Create SOAP Connection
            SOAPConnectionFactory soapConnectionFactory = SOAPConnectionFactory.newInstance();
            SOAPConnection soapConnection = soapConnectionFactory.createConnection();

            // Send SOAP Message to SOAP Server
            SOAPMessage soapResponse = soapConnection.call(createSOAPRequest(soapAction), soapEndpointUrl);

            // Print the SOAP Response
            System.out.println("Response SOAP Message:");
            soapResponse.writeTo(System.out);
            System.out.println();

            soapConnection.close();
        } catch (Exception e) {
            System.err.println("\nError occurred while sending SOAP Request to Server!\nMake sure you have the correct endpoint URL and SOAPAction!\n");
            e.printStackTrace();
        }
    }

    private static SOAPMessage createSOAPRequest(String soapAction) throws Exception {
        MessageFactory messageFactory = MessageFactory.newInstance();
        SOAPMessage soapMessage = messageFactory.createMessage();

        createSoapEnvelope(soapMessage);

        MimeHeaders headers = soapMessage.getMimeHeaders();
        headers.addHeader("SOAPAction", soapAction);

        soapMessage.saveChanges();

        /* Print the request message, just for debugging purposes */
        System.out.println("Request SOAP Message:");
        soapMessage.writeTo(System.out);
        System.out.println("\n");

        return soapMessage;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T16:18:51.907

是的，如果您可以获得任何 WSDL 文件，那么您可以使用 SoapUI 创建该服务的模拟服务，并完成单元测试请求。我[创建了一个示例（使用 Maven），您可以尝试一下](https://github.com/djangofan/soapui-maven-template)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-17T11:51:47.027

> [来自SoapUI](https://www.soapui.org/docs/soap-and-wsdl/)的计算器 SOAP 服务测试，[在线 SoapClient 计算器](http://www.soapclient.com/soapclient?template=%2Fclientform.html&fn=soapform&SoapTemplate=%2FSoapResult.html&SoapWSDL=http%3A%2F%2Fwww.dneonline.com%2Fcalculator.asmx%3Fwsdl&_ArraySize=2)

![](https://www.soapui.org/getmedia/8fe10338-e322-4159-b350-fb49249055da/wsdl-request-gettingstarted_new?width=700&height=300)

`SoapMessage`从输入`SoapEnvelopeXML`和生成对象`SoapDataXml`。

> 肥皂信封XML

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:Add xmlns:tem="http://tempuri.org/">
         <tem:intA>3</tem:intA>
         <tem:intB>4</tem:intB>
      </tem:Add>
   </soapenv:Body>
</soapenv:Envelope> 
```

使用以下代码获取 SoapMessage 对象。

```
MessageFactory messageFactory = MessageFactory.newInstance();
    MimeHeaders headers = new MimeHeaders();
    ByteArrayInputStream xmlByteStream = new ByteArrayInputStream(SoapEnvelopeXML.getBytes());
SOAPMessage soapMsg = messageFactory.createMessage(headers, xmlByteStream); 
```

> 肥皂数据Xml

```
<tem:Add xmlns:tem="http://tempuri.org/">
    <tem:intA>3</tem:intA>
    <tem:intB>4</tem:intB>
</tem:Add> 
```

使用以下代码获取 SoapMessage 对象。

```
public static SOAPMessage getSOAPMessagefromDataXML(String saopBodyXML) throws Exception {
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    dbFactory.setNamespaceAware(true);
    dbFactory.setIgnoringComments(true);
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    InputSource ips = new org.xml.sax.InputSource(new StringReader(saopBodyXML));
    Document docBody = dBuilder.parse(ips);
    System.out.println("Data Document: "+docBody.getDocumentElement());

    MessageFactory messageFactory = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL);
    SOAPMessage soapMsg = messageFactory.createMessage();

    SOAPBody soapBody = soapMsg.getSOAPPart().getEnvelope().getBody();
    soapBody.addDocument(docBody);

    return soapMsg;
} 
```

* * *

通过获取 SoapMessage 对象。很明显，Soap XML 是有效的。然后准备点击服务以获得响应。它可以通过多种方式完成。

1.  使用客户端代码生成表单 WSDL。

```
java.net.URL endpointURL = new java.net.URL(endPointUrl);
javax.xml.rpc.Service service = new org.apache.axis.client.Service();
((org.apache.axis.client.Service) service).setTypeMappingVersion("1.2");
CalculatorSoap12Stub obj_axis = new CalculatorSoap12Stub(endpointURL, service);
int add = obj_axis.add(10, 20);
System.out.println("Response: "+ add); 
```

2.  使用`javax.xml.soap.SOAPConnection`.

```
public static void getSOAPConnection(SOAPMessage soapMsg) throws Exception {
    System.out.println("===== SOAPConnection =====");
    MimeHeaders headers = soapMsg.getMimeHeaders(); // new MimeHeaders();
    headers.addHeader("SoapBinding",   serverDetails.get("SoapBinding") );
    headers.addHeader("MethodName",    serverDetails.get("MethodName") );
    headers.addHeader("SOAPAction",    serverDetails.get("SOAPAction") );
    headers.addHeader("Content-Type",  serverDetails.get("Content-Type"));
    headers.addHeader("Accept-Encoding", serverDetails.get("Accept-Encoding"));
    if (soapMsg.saveRequired()) {
        soapMsg.saveChanges();
    }

    SOAPConnectionFactory newInstance = SOAPConnectionFactory.newInstance();
    javax.xml.soap.SOAPConnection connection = newInstance.createConnection();
    SOAPMessage soapMsgResponse = connection.call(soapMsg, getURL( serverDetails.get("SoapServerURI"), 5*1000 ));

    getSOAPXMLasString(soapMsgResponse);
} 
```

3.  形成 HTTP 连接类`org.apache.commons.httpclient`。

```
public static void getHttpConnection(SOAPMessage soapMsg) throws SOAPException, IOException {
    System.out.println("===== HttpClient =====");
    HttpClient httpClient = new HttpClient();
    HttpConnectionManagerParams params = httpClient.getHttpConnectionManager().getParams();
    params.setConnectionTimeout(3 * 1000); // Connection timed out
    params.setSoTimeout(3 * 1000);         // Request timed out
    params.setParameter("http.useragent", "Web Service Test Client");

    PostMethod methodPost = new PostMethod( serverDetails.get("SoapServerURI") );
    methodPost.setRequestBody( getSOAPXMLasString(soapMsg) );
    methodPost.setRequestHeader("Content-Type", serverDetails.get("Content-Type") );
    methodPost.setRequestHeader("SoapBinding",  serverDetails.get("SoapBinding") );
    methodPost.setRequestHeader("MethodName",   serverDetails.get("MethodName") );
    methodPost.setRequestHeader("SOAPAction",   serverDetails.get("SOAPAction") );

    methodPost.setRequestHeader("Accept-Encoding", serverDetails.get("Accept-Encoding"));

    try {
        int returnCode = httpClient.executeMethod(methodPost);
        if (returnCode == HttpStatus.SC_NOT_IMPLEMENTED) {
            System.out.println("The Post method is not implemented by this URI");
            methodPost.getResponseBodyAsString();
        } else {
            BufferedReader br = new BufferedReader(new InputStreamReader(methodPost.getResponseBodyAsStream()));
            String readLine;
            while (((readLine = br.readLine()) != null)) {
                System.out.println(readLine);
            }
            br.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        methodPost.releaseConnection();
    }
} 
```

```
public static void accessResource_AppachePOST(SOAPMessage soapMsg) throws Exception {
    System.out.println("===== HttpClientBuilder =====");
    CloseableHttpClient httpClient = HttpClientBuilder.create().build();
    URIBuilder builder = new URIBuilder( serverDetails.get("SoapServerURI") );
    HttpPost methodPost = new HttpPost(builder.build());
    RequestConfig config = RequestConfig.custom()
            .setConnectTimeout(5 * 1000)
            .setConnectionRequestTimeout(5 * 1000)
            .setSocketTimeout(5 * 1000)
            .build();
    methodPost.setConfig(config);
        HttpEntity xmlEntity = new StringEntity(getSOAPXMLasString(soapMsg), "utf-8");
    methodPost.setEntity(xmlEntity);

    methodPost.setHeader("Content-Type", serverDetails.get("Content-Type"));
    methodPost.setHeader("SoapBinding", serverDetails.get("SoapBinding") );
    methodPost.setHeader("MethodName", serverDetails.get("MethodName") );
    methodPost.setHeader("SOAPAction", serverDetails.get("SOAPAction") );
    methodPost.setHeader("Accept-Encoding", serverDetails.get("Accept-Encoding"));

    // Create a custom response handler
    ResponseHandler<String> responseHandler = new ResponseHandler<String>() {
        @Override
        public String handleResponse( final HttpResponse response) throws ClientProtocolException, IOException {
            int status = response.getStatusLine().getStatusCode();
            if (status >= 200 && status <= 500) {
                HttpEntity entity = response.getEntity();
                return entity != null ? EntityUtils.toString(entity) : null;
            }
            return "";
        }
    };
    String execute = httpClient.execute( methodPost, responseHandler );
    System.out.println("AppachePOST : "+execute);
} 
```

完整示例：

```
public class SOAP_Calculator {
    static HashMap<String, String> serverDetails = new HashMap<>();
    static {
        // Calculator
        serverDetails.put("SoapServerURI", "http://www.dneonline.com/calculator.asmx");
        serverDetails.put("SoapWSDL", "http://www.dneonline.com/calculator.asmx?wsdl");
        serverDetails.put("SoapBinding", "CalculatorSoap");        // <wsdl:binding name="CalculatorSoap12" type="tns:CalculatorSoap">
        serverDetails.put("MethodName", "Add");                    // <wsdl:operation name="Add">
        serverDetails.put("SOAPAction", "http://tempuri.org/Add"); // <soap12:operation soapAction="http://tempuri.org/Add" style="document"/>
        serverDetails.put("SoapXML", "<tem:Add xmlns:tem=\"http://tempuri.org/\"><tem:intA>2</tem:intA><tem:intB>4</tem:intB></tem:Add>");

        serverDetails.put("Accept-Encoding", "gzip,deflate");
        serverDetails.put("Content-Type", "");
    }
    public static void callSoapService( ) throws Exception {
        String xmlData = serverDetails.get("SoapXML");

        SOAPMessage soapMsg = getSOAPMessagefromDataXML(xmlData);
        System.out.println("Requesting SOAP Message:\n"+ getSOAPXMLasString(soapMsg) +"\n");

        SOAPEnvelope envelope = soapMsg.getSOAPPart().getEnvelope();
        if (envelope.getElementQName().getNamespaceURI().equals("http://schemas.xmlsoap.org/soap/envelope/")) {
            System.out.println("SOAP 1.1 NamespaceURI: http://schemas.xmlsoap.org/soap/envelope/");
            serverDetails.put("Content-Type", "text/xml; charset=utf-8");
        } else {
            System.out.println("SOAP 1.2 NamespaceURI: http://www.w3.org/2003/05/soap-envelope");
            serverDetails.put("Content-Type", "application/soap+xml; charset=utf-8");
        }

        getHttpConnection(soapMsg);
        getSOAPConnection(soapMsg);
        accessResource_AppachePOST(soapMsg);
    }
    public static void main(String[] args) throws Exception {
        callSoapService();
    }

    private static URL getURL(String endPointUrl, final int timeOutinSeconds) throws MalformedURLException {
        URL endpoint = new URL(null, endPointUrl, new URLStreamHandler() {
            protected URLConnection openConnection(URL url) throws IOException {
                URL clone = new URL(url.toString());
                URLConnection connection = clone.openConnection();
                connection.setConnectTimeout(timeOutinSeconds);
                connection.setReadTimeout(timeOutinSeconds);
                //connection.addRequestProperty("Developer-Mood", "Happy"); // Custom header
                return connection;
            }
        });
        return endpoint;
    }
    public static String getSOAPXMLasString(SOAPMessage soapMsg) throws SOAPException, IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        soapMsg.writeTo(out);
        // soapMsg.writeTo(System.out);
        String strMsg = new String(out.toByteArray());
        System.out.println("Soap XML: "+ strMsg);
        return strMsg;
    }
} 
```

[@查看http://sofa.uqam.ca/soda/webservices.php](http://sofa.uqam.ca/soda/webservices.php)上的一些 WebServices 列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-04T03:12:53.577

acdcjunior 的响应太棒了，我只是用下一个代码扩展了他的解释，您可以在其中看到如何迭代 XML 元素。

```
public class SOAPClientSAAJ {

public static void main(String args[]) throws Exception {
    // Create SOAP Connection
    SOAPConnectionFactory soapConnectionFactory = SOAPConnectionFactory.newInstance();
    SOAPConnection soapConnection = soapConnectionFactory.createConnection();

    // Send SOAP Message to SOAP Server
    String url = "http://ws.cdyne.com/emailverify/Emailvernotestemail.asmx";
    SOAPMessage soapResponse = soapConnection.call(createSOAPRequest(), url);

    SOAPPart soapPart=soapResponse.getSOAPPart();
    // SOAP Envelope
    SOAPEnvelope envelope=soapPart.getEnvelope();
    SOAPBody soapBody = envelope.getBody();

    @SuppressWarnings("unchecked")
    Iterator<Node> itr=soapBody.getChildElements();
    while (itr.hasNext()) {

        Node node=(Node)itr.next();
        if (node.getNodeType()==Node.ELEMENT_NODE) {
            System.out.println("reading Node.ELEMENT_NODE");
            Element ele=(Element)node;
            System.out.println("Body childs : "+ele.getLocalName());

            switch (ele.getNodeName()) {

          case "VerifyEmailResponse":
             NodeList statusNodeList = ele.getChildNodes();

             for(int i=0;i<statusNodeList.getLength();i++){
               Element emailResult = (Element) statusNodeList.item(i);
               System.out.println("VerifyEmailResponse childs : "+emailResult.getLocalName());
                switch (emailResult.getNodeName()) {

                case "VerifyEmailResult":
                    NodeList emailResultList = emailResult.getChildNodes();

                    for(int j=0;j<emailResultList.getLength();j++){
                      Element emailResponse = (Element) emailResultList.item(j);
                      System.out.println("VerifyEmailResult childs : "+emailResponse.getLocalName());
                       switch (emailResponse.getNodeName()) {
                       case "ResponseText":
                           System.out.println(emailResponse.getTextContent());
                           break;
                        case "ResponseCode":
                          System.out.println(emailResponse.getTextContent());
                           break;
                        case "LastMailServer":
                          System.out.println(emailResponse.getTextContent());
                          break;
                        case "GoodEmail":
                          System.out.println(emailResponse.getTextContent());
                       default:
                          break;
                       }
                    }
                    break;
                default:
                   break;
                }
             }

             break;

          default:
             break;
          }

        } else if (node.getNodeType()==Node.TEXT_NODE) {
            System.out.println("reading Node.TEXT_NODE");
            //do nothing here most likely, as the response nearly never has mixed content type
            //this is just for your reference
        }
    }
    // print SOAP Response
    System.out.println("Response SOAP Message:");
    soapResponse.writeTo(System.out);

    soapConnection.close();
}

private static SOAPMessage createSOAPRequest() throws Exception {
    MessageFactory messageFactory = MessageFactory.newInstance();
    SOAPMessage soapMessage = messageFactory.createMessage();
    SOAPPart soapPart = soapMessage.getSOAPPart();

    String serverURI = "http://ws.cdyne.com/";

    // SOAP Envelope
    SOAPEnvelope envelope = soapPart.getEnvelope();
    envelope.addNamespaceDeclaration("example", serverURI);

    /*
    Constructed SOAP Request Message:
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:example="http://ws.cdyne.com/">
        <SOAP-ENV:Header/>
        <SOAP-ENV:Body>
            <example:VerifyEmail>
                <example:email>mutantninja@gmail.com</example:email>
                <example:LicenseKey>123</example:LicenseKey>
            </example:VerifyEmail>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
     */

    // SOAP Body
    SOAPBody soapBody = envelope.getBody();
    SOAPElement soapBodyElem = soapBody.addChildElement("VerifyEmail", "example");
    SOAPElement soapBodyElem1 = soapBodyElem.addChildElement("email", "example");
    soapBodyElem1.addTextNode("mutantninja@gmail.com");
    SOAPElement soapBodyElem2 = soapBodyElem.addChildElement("LicenseKey", "example");
    soapBodyElem2.addTextNode("123");

    MimeHeaders headers = soapMessage.getMimeHeaders();
    headers.addHeader("SOAPAction", serverURI  + "VerifyEmail");

    soapMessage.saveChanges();

    /* Print the request message */
    System.out.println("Request SOAP Message:");
    soapMessage.writeTo(System.out);
    System.out.println("");
    System.out.println("------");

    return soapMessage;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T16:33:46.783

这可能会帮助那些将 xml 请求作为字符串并希望像我一样从 Java 发出肥皂请求的人。
如果您有 WSDL，您可以使用该 WSDL 文件在 SoapUI 中创建一个新的肥皂请求。
它将自动为输入请求生成结构/XML。

如果您有来自 SoapUI 的输入请求 xml，则可以使用以下 Java 代码的一些简单版本来调用 Soap 服务：

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class SimpleSoapClient {

public static void main(String args[]) throws IOException {

    String address="Hyderabad";

    /* place your xml request from soap ui below with necessary changes in parameters*/

    String xml="<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ws=\"http://www.YourUrlAsPerWsdl.com/\">\r\n" + 
                 "   <soapenv:Header/>\r\n" + 
                 "   <soapenv:Body>\r\n" + 
                 "      <ws:callRest>\r\n" + 
                 "         <name>"+"Hello"+"</name>\r\n" + 
                 "         <address>"+address+"</address>\r\n" + 
                 "      </ws:callRest>\r\n" + 
                 "   </soapenv:Body>\r\n" + 
                 "</soapenv:Envelope>";
            String responseF=callSoapService(xml);
            System.out.println(responseF);
    }

}

static String callSoapService(String soapRequest) {
    try {
     String url = "https://gogle.com/service/hello"; // replace your URL here
     URL obj = new URL(url);
     HttpURLConnection con = (HttpURLConnection) obj.openConnection();

     // change these values as per soapui request on top left of request, click on RAW, you will find all the headers
     con.setRequestMethod("POST");
     con.setRequestProperty("Content-Type","text/xml; charset=utf-8"); 
     con.setDoOutput(true);
     DataOutputStream wr = new DataOutputStream(con.getOutputStream());
     wr.writeBytes(soapRequest);
     wr.flush();
     wr.close();
     String responseStatus = con.getResponseMessage();
     System.out.println(responseStatus);
     BufferedReader in = new BufferedReader(new InputStreamReader(
     con.getInputStream()));
     String inputLine;
     StringBuffer response = new StringBuffer();
     while ((inputLine = in.readLine()) != null) {
         response.append(inputLine);
     }
     in.close();

     // You can play with response which is available as string now:
     String finalvalue= response.toString();

     // or you can parse/substring the required tag from response as below based your response code
     finalvalue= finalvalue.substring(finalvalue.indexOf("<response>")+10,finalvalue.indexOf("</response>")); */

     return finalvalue;
     } 
    catch (Exception e) {
        return e.getMessage();
    }   
} 
```

}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-01T20:21:18.487

对于 WSDL 的基本身份验证，接受的答案代码会引发错误。请尝试以下操作

```
Authenticator.setDefault(new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication("username","password".toCharArray());
    }
}); 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2016-11-18T19:09:42.800

```
String send = 
    "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
    "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n" +
    "        <soap:Body>\n" +
    "        </soap:Body>\n" +
    "</soap:Envelope>";

private static String getResponse(String send) throws Exception {
    String url = "https://api.comscore.com/KeyMeasures.asmx"; //endpoint
    String result = "";
    String username="user_name";
    String password="pass_word";
    String[] command = {"curl", "-u", username+":"+password ,"-X", "POST", "-H", "Content-Type: text/xml", "-d", send, url};
    ProcessBuilder process = new ProcessBuilder(command); 
    Process p;
    try {
        p = process.start();
        BufferedReader reader =  new BufferedReader(new InputStreamReader(p.getInputStream()));
        StringBuilder builder = new StringBuilder();
        String line = null;
        while ( (line = reader.readLine()) != null) {
                builder.append(line);
                builder.append(System.getProperty("line.separator"));
        }
        result = builder.toString();
    }
    catch (IOException e)
    {   System.out.print("error");
        e.printStackTrace();
    }

    return result;
} 
```

# manifest - Robolectric 测试 AndroidManifest 属性

> ID：15948932
> 
> 赞同：0
> 
> 时间：2013-04-11T12:35:18.927
> 
> 标签：manifest, robolectric

任何人都有一个示例如何访问 AndroidManifest.xml 以测试是否设置了几个属性？

例如，我想测试一个活动是否有一个动作作为意图过滤器集。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T07:56:17.720

如果您浏览 Robolectric 的[源代码](https://github.com/robolectric/robolectric)，特别是`[master]/src/test/java/org/robolectric/AndroidManifestTest.java`，您会找到灵感。他们在彻底测试 xml 方面做得很好。

# sql - 如何从临时表中检索多个值并将它们插入另一个表？

> ID：15948934
> 
> 赞同：-1
> 
> 时间：2013-04-11T12:35:20.047
> 
> 标签：sql, sql-server, tsql

我有一个包含以下值的临时表

```
@TempTable
ID
1
2 
```

对于临时表中的每个 ID，我要执行以下操作：

```
insert into ItemOrganisationSources
    select ByLineID, <TempTable.ID>, SourceTypeID
    from ItemOrganisationSources
    where ItemOrganisationID in (
        select ID from @TempTable) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:40:59.880

从您的代码中不清楚您是否有临时表（以“#”为前缀）或表变量（以“@”为前缀，如您的示例）。不过，无论哪种方式，您都可以像引用任何其他表一样引用临时表/变量。

表变量：

```
insert into ItemOrganisationSources
    select i.ByLineID, t.ID, i.SourceTypeID
    from ItemOrganisationSources AS i
    inner join @TempTable AS t
      on i.ID = t.ID --Plug in the appropriate field to join on here
    where i.ItemOrganisationID in (
        select ID from @itemOrganisationIDsToBeDuplicated) 
```

温度表：

```
insert into ItemOrganisationSources
    select i.ByLineID, t.ID, i.SourceTypeID
    from ItemOrganisationSources AS i
    inner join #TempTable AS t
      on i.ID = t.ID --Plug in the appropriate field to join on here
    where i.ItemOrganisationID in (
        select ID from @itemOrganisationIDsToBeDuplicated) 
```

再次阅读您的问题后，我不确定您是要尝试将临时表连接到其他数据，还是只为临时表中的每个 ID 插入一次。如果是后者，这可能很少用于`CROSS JOIN`：

```
insert into ItemOrganisationSources
    select i.ByLineID, t.ID, i.SourceTypeID
    from ItemOrganisationSources AS i
    cross join #TempTable AS t --cross join instead of inner join
    where i.ItemOrganisationID in (
        select ID from @itemOrganisationIDsToBeDuplicated) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:51:59.580

```
 insert into ItemOrganisationSources
    select ByLineID, TT.ID, SourceTypeID
    from ItemOrganisationSources IO JOIN
        @TempTable TT ON TT.ID = IO.ItemOrganisationID 
```

# javascript - Javascript - 在两个图像之间切换

> ID：15948938
> 
> 赞同：3
> 
> 时间：2013-04-11T12:35:25.567
> 
> 标签：javascript, html, image

我有以下 Javascript 代码，应该可以在两个图像之间快速切换：

```
<head runat="server">
    <title>Home Page</title>

    <script src="Resources/jQuery.js" type="text/javascript"></script>
    <script type="text/javascript">
        function changeImage()
        {
            requestAnimationFrame(changeImage);

            var url = document.getElementById('Change_Image').src;

            if (url == 'Resources/Share1.bmp')
            {
                document.getElementById('Change_Image').src = 'Resources/Share2.bmp';
            }

            else
            {
                if (url == 'Resources/Share2.bmp')
                {
                    document.getElementById('Change_Image').src = 'Resources/Share1.bmp';
                }
            }
        }    
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <h1>Welcome to my Website</h1>
            <h2>Below you can find an example of visual cryptography</h2>
            <br />
            <br />
            <div><img id="Change_Image" src="Resources/Share1.bmp" alt="Letter A" /></div>
        </div>
    </form>
</body>
</html> 
```

不幸的是，该代码不起作用，并且图像不会更改为另一个。我究竟做错了什么？我对 JavaScript 很陌生，所以请多多包涵？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:38:46.627

您正在使用**分配运算符**而不是**比较运算符**。也使用`else if`or 只是`else`在第二种情况下。

改成

```
if (url == 'Resources/Share1.bmp') 
```

和

```
else if (url == 'Resources/Share2.bmp') 
```

它应该可以工作。

**请参阅此[DEMO](http://jsfiddle.net/cCvtL/1/)以帮助您。它以 2 秒的间隔切换图像**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:44:39.500

你的逻辑似乎有问题。看这段代码

```
var url = document.getElementById('Change_Image').src;

            if (url = 'Resources/Share1.bmp')
            {
                document.getElementById('Change_Image').src = 'Resources/Share2.bmp';
            } 
```

你的标记是

```
<div><img id="Change_Image" src="Resources/Share1.bmp" alt="Letter A" /></div> 
```

url 的值将始终为 Resources/Share1.bmp。同样正如其他海报提到的平等是 == 而不是 =

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:50:53.967

我看到 jquery 包括在内，也许是 mvc 应用程序？

您可以使用 jquery 切换： [http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

你的html：

```
<div class="someContainer">
 <img class="Change_Image" src="Resources/Share1.bmp" alt="Letter A" />
 <img class="Change_Image" src="Resources/Share2.bmp" alt="Letter B" style="display:none"/>
</div> 
```

你的JavaScript：

```
$(".someContainer").find(".Change_Image").toggle(); 
```

你想要一些效果

```
$(".someContainer").find(".Change_Image").toggle("slow"); 
```

# ios - 在片段着色器中将颜色应用于 OpenGL ES 2.0 Point Sprite 纹理？

> ID：15948939
> 
> 赞同：1
> 
> 时间：2013-04-11T12:35:26.010
> 
> 标签：ios, objective-c, opengl-es, opengl-es-2.0, particle-system

我正在创建一个粒子发射器，其纹理是带有 alpha 的白色圆圈。无法使用传递给片段着色器的颜色为精灵着色。

我尝试了以下方法：

```
 gl_FragColor = texture2D(Sampler, gl_PointCoord) * colorVarying; 
```

这似乎是在做某种加色。

我正在尝试将此移植：http: [//maniacdev.com/2009/07/source-code-particle-based-explosions-in-iphone-opengl-es/](http://maniacdev.com/2009/07/source-code-particle-based-explosions-in-iphone-opengl-es/) 从 ES 1.1 到 ES 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:34:47.447

使用您的代码，请考虑以下示例：

*   texture2D = (1,0,0,1) = 红色 - 完全不透明
*   colorVarying = (0,1,0,0.5) = 绿色 - 半透明

那么 gl_FragColor 将是 (0,0,0,0.5) 黑色 - 半透明。

通常，您可以使用[mix](http://www.opengl.org/sdk/docs/manglsl/xhtml/mix.xml)来插入值，但如果我理解您的问题，那就更容易了。

基本上，您只需要纹理中的 Alpha 通道并将其应用于另一种颜色，对吗？那么你可以这样做：

```
gl_FragColor = vec4(colorVarying.rgb, texture2D(Sampler, gl_PointCoord).a) 
```

# python - 神经网络 - 输出收敛到 0，python

> ID：15948940
> 
> 赞同：1
> 
> 时间：2013-04-11T12:35:26.583
> 
> 标签：python, machine-learning, neural-network, backpropagation

我正在尝试使用简单的反向传播和单热编码将 2D 数据分为多层神经网络中的 3 个类。在我将增量学习更改为批量学习后，我的输出收敛到 0 ( `[0,0,0]`)，主要是在我使用更多数据或更高学习速度的情况下。我不知道我是否必须派生其他东西，或者我是否在代码中犯了一些错误。

```
for each epoch: #pseudocode
    for each input:
        caluclate hiden neurons activations (logsig)
        calculate output neurons activations (logsig)

        #error propagation   
        for i in range(3):  
            error = (desired_out[i] - aktivations_out[i])
            error_out[i] = error * deriv_logsig(aktivations_out[i])             
        t_weights_out = zip(*weights_out)           
        for i in range(hiden_neurons):  
            sum_error = sum(e*w for e, w in zip(error_out, t_weights_out[i]))               
            error_h[i] =  sum_error * deriv_logsig(input_out[i])

        #cumulate deltas             
        for i in range(len(weights_out)):                               
            delta_out[i] = [d + x * coef * error_out[i] for d, x in zip(delta_out[i],        input_out)]               
        for i in range(len(weights_h)):
            delta_h[i] = [d + x * coef * error_h[i] for d, x in zip(delta_h[i], input)]

    #batch learning after epoch
    for i in range(len(weights_out)):                               
            weights_out[i] = [w + delta for w, delta in zip(weights_out[i], delta_out[i])]
    for i in range(len(weights_h)):
            weights_h[i] = [w + delta for w, delta in zip(weights_h[i], delta_h[i])] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:58:45.437

我会尝试一些玩具示例，我可以确定 NN 会如何表现和调试我的代码。如果我确定我的代码是有效的 NN 并且我仍然没有得到好的结果，我会尝试更改 NN 的参数。但这可能会非常耗时，因此我会选择一些更简单的 ML 技术，例如决策树，它们不是 NN 的黑盒。使用决策树，您应该更容易、更快地找到解决方案。问题是您是否可以在NN以外的地方实现它......

# cocoa - 有没有推荐的方法让 NSDatePicker 使用我的步长？

> ID：15948943
> 
> 赞同：1
> 
> 时间：2013-04-11T12:35:34.257
> 
> 标签：cocoa, nsdatepicker

我想知道你们中的一些人是否可以就此提供建议。

我正在尝试将 NSDatePicker 的步长更改为 1 以外的另一个值。最重要的是，我发现步进分钟不会改变小时数，也不会改变天数。

我正在使用委托方法 datePickerCell:validateProposedDateValue:timeInterval:。

现在，虽然它确实按预期工作，但整个事情看起来非常糟糕，以至于我开始想知道是否有更简单的方法来实现这一点。

任何有关文档的建议或指导表示赞赏。谢谢你。

这是我的代码：

```
- (void)datePickerCell:(NSDatePickerCell *)aDatePickerCell validateProposedDateValue:(NSDate **)proposedDateValue
          timeInterval:(NSTimeInterval *)proposedTimeInterval {
    DLog(@"date picker for: %@", [aDatePickerCell identifier]);
    NSDate *newProposedDateValue = nil;
    // just in case that we don't need a correction
    NSDate *correctedProposedDateValue = *proposedDateValue;

    // the interval that the step generates
    // > 0 means: the old date is later than the new proposed date
    // < 0 means: the old date is earlier than the new proposed date
    int interval = [[self dateValue] timeIntervalSinceDate:*proposedDateValue];

    // define expected interval values for our scenarios
    // we don't care about a minute step that does not cross the hour here
    // nor do we care about an hour step that does not cross the day

    // minutes are stepped:    minute is stepped but hour remains (01:59 <-> 01:00), so the difference is 59 minutes
    int const minuteSteppedUpAcrossHour   = -59 *60;
    int const minuteSteppedDownAcrossHour = - minuteSteppedUpAcrossHour;
    // nor do we care about an hour step that does not cross the day
    // hours are stepped:      hour is stepped but day remains (10.03.13 00:30 <-> 10.03.13 23:30) we have a difference of 23 hours
    int const hourSteppedUpAcrossDay      = -23 *60 *60;
    int const hourSteppedDownAcrossDay    = - hourSteppedUpAcrossDay;

    // define correction values for our scenarios
    int const anHour = 60 *60;
    int const aDay = anHour *24;

    switch (interval) {
        case hourSteppedUpAcrossDay:
            correctedProposedDateValue = [*proposedDateValue dateByAddingTimeInterval:(-aDay)];
            break;
        case minuteSteppedDownAcrossHour:
            correctedProposedDateValue = [*proposedDateValue dateByAddingTimeInterval:(+anHour)];
            break;
        case hourSteppedDownAcrossDay:
            correctedProposedDateValue = [*proposedDateValue dateByAddingTimeInterval:(+aDay)];
            break;
        case minuteSteppedUpAcrossHour:
            correctedProposedDateValue = [*proposedDateValue dateByAddingTimeInterval:(-anHour)];
            break;

        default:
            break;
    }
    if ([self dateValue] < correctedProposedDateValue) {
        newProposedDateValue = [self roundDateUpForMinuteIntervalConstraint:correctedProposedDateValue];
    } else {
        newProposedDateValue = [self roundDateDownForMinuteIntervalConstraint:correctedProposedDateValue];
    }
    *proposedDateValue = newProposedDateValue;
}

- (NSDate *)roundDateUpForMinuteIntervalConstraint:(NSDate *)date {
    return [self date:date roundedUpToMinutes:MINUTE_INTERVAL_CONSTRAINT_FOR_SESSIONS_START];
}

- (NSDate *)roundDateDownForMinuteIntervalConstraint:(NSDate *)date {
    return [self date:date roundedDownToMinutes:MINUTE_INTERVAL_CONSTRAINT_FOR_SESSIONS_START];
}

- (NSDate *)date:(NSDate *)date roundedUpToMinutes:(int)minutes {
    // Strip miliseconds by converting to int
    int referenceTimeInterval = (int)[date timeIntervalSinceReferenceDate];
    int remainingSeconds = referenceTimeInterval %(60 *minutes);
    int timeRoundedUpToMinutes = 0;
    if (remainingSeconds== 0) {
        timeRoundedUpToMinutes = referenceTimeInterval;
    } else {
        timeRoundedUpToMinutes = referenceTimeInterval -remainingSeconds +(60 *minutes);
    }

    return [NSDate dateWithTimeIntervalSinceReferenceDate:(NSTimeInterval)timeRoundedUpToMinutes];
}

- (NSDate *)date:(NSDate *)date roundedDownToMinutes:(int)minutes {
    // Strip miliseconds by converting to int
    int referenceTimeInterval = (int)[date timeIntervalSinceReferenceDate];
    int remainingSeconds = referenceTimeInterval %(60 *minutes);
    int timeRoundedUpToMinutes = referenceTimeInterval -remainingSeconds;

    return [NSDate dateWithTimeIntervalSinceReferenceDate:(NSTimeInterval)timeRoundedUpToMinutes];
} 
```

# php - 使用一种形式使用 php 和 ajax 添加和编辑

> ID：15948947
> 
> 赞同：0
> 
> 时间：2013-04-11T12:35:43.803
> 
> 标签：php, ajax, forms, ajaxform

我使用 ajax 和 php 创建了一个表单。从主页，用户可以编辑客户详细信息，或添加新客户。当用户单击编辑客户端按钮时，使用 ajax 加载表单，并使用 id 插入客户端详细信息，对于添加新客户端，不发送任何 id。我想知道的是，如何更改添加客户端的“提交”按钮和编辑客户端的“更新”按钮。两个阶段的表单标记相同，但这里是用于区分两者的 jquery：

添加：

```
$.ajax({
    dataType: "html",
    url: "ajax.php?action=client_form",
    beforeSend: function() {
        $('.error, .success, .notice').remove();
    },
    success: function(html) {
        $('#users-contain_t').html(html);
    }
}); 
```

对于编辑部分，我创建了一个函数，如下所示：

```
function editClient(client_id){

    $('#users-contain_t').load('ajax.php?action=client_form&client_id='+client_id);

}; 
```

编辑按钮的标记是：

```
<button class="editClient" type="button" onclick="editClient('.$client['client_id']. ')">Edit Client</button> 
```

这将显示表单中的详细信息。我想知道的是，如何在同一个表单上加载两个不同的按钮，在编辑时，以及在添加新记录时，使用 php？

这两个按钮的标记类似于：

```
<button id="updateList" type="button" >Update</button>
<button id="addClient" type="button" >Submit</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:49:33.343

您可以在 form is none like style="display:none" 中设置默认显示样式用于更新列表

但是当您调用 editClient 函数时，您可以将 show() hide() 效果添加到两个按钮

喜欢

```
$('#updateList').show();
$('#addClient').hide(); 
```

像这样的默认形式

```
<button id="updateList" type="button" style="display:none;" >Update</button>
<button id="addClient" type="button" >Submit</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:47:45.600

放置一个用于添加和更新的通用按钮，它可以在 php 上区分以下代码：如果您有一个关于客户详细信息（如电子邮件）的唯一列

```
if(isset($_POST['save']))
{
//get all client email in your table
//check if the email already exist
//if (yes) 
//update query exected
//else
//insert
} 
```

“保存”是您的按钮名称，我希望这是您真正想要的！

# c# - 如何检查 DirectX 是否可用？

> ID：15948951
> 
> 赞同：0
> 
> 时间：2013-04-11T12:35:50.490
> 
> 标签：c#, error-handling, directx, try-catch, direct3d

目前我用 C# 开发一个项目。在这个项目中，我使用 DirectX API。现在我想实现一个函数来检查 DirectX 是否可用？

你知道怎么做吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:02:48.937

您是否需要检测系统中是否有兼容 DirectX 的 GPU，以便可以创建 Direct3D9 设备，某些虚拟操作系统等不是这种情况？可以通过创建一个设备实例并捕获它可能抛出的异常来简单地测试它。

DirectX 安装本身可以通过查看 Windows\System32 文件夹来检查。例如，检查 d3d9d.dll 和 D3DX9_43.dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:03:45.607

获取 DirectX - 版本的另一种方法：

```
 void CheckDirectXMajorVersion()
    {
        int directxMajorVersion = 0;

        var OSVersion = Environment.OSVersion;

        // if Windows Vista or later
        if (OSVersion.Version.Major >= 6)
        {
            // if Windows 7 or later
            if (OSVersion.Version.Major > 6 || OSVersion.Version.Minor >= 1)
            {
                directxMajorVersion = 11;
            }
            // if Windows Vista
            else
            {
                directxMajorVersion = 10;
            }
        }
        // if Windows XP or earlier.
        else
        {
            using (RegistryKey key = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\DirectX"))
            {
                string versionStr = key.GetValue("Version") as string;
                if (!string.IsNullOrEmpty(versionStr))
                {
                    var versionComponents = versionStr.Split('.');
                    if (versionComponents.Length > 1)
                    {
                        int directXLevel;
                        if (int.TryParse(versionComponents[1], out directXLevel))
                        {
                            directxMajorVersion = directXLevel;
                        }
                    }
                }
            }
        }

        Console.WriteLine("DirectX Version: " + directxMajorVersion.ToString());

        Console.ReadKey();
    } 
```

# tomcat6 - 得到错误：org.apache.tomcat.dbcp.DataSourceConnectionFactory

> ID：15948952
> 
> 赞同：1
> 
> 时间：2013-04-11T12:35:52.240
> 
> 标签：tomcat6, ubuntu-10.04, postgresql-9.1

javax.naming.NamingException：无法加载资源工厂类 [根异常是 java.lang.ClassNotFoundException：org.apache.tomcat.dbcp.DataSourceConnectionFactory]

我正在使用 apache-tomcat-6.0.16，操作系统：Ubuntu，数据库 Posrgresql9.1

我的 context.xml 代码

```
<Resource name="jdbc/GisProject" scope="Shareable" type="javax.sql.DataSource"
        factory="org.apache.tomcat.dbcp.DataSourceConnectionFactory"
        url="jdbc:postgresql://localhost:5432/postgres?zeroDateTimeBehavior=convertToNull"
        driverClassName="org.postgresql.Driver"
        username="khushi"
        password="ispl12345"
        maxIdle="5"
        maxActive="50"
 /> 
```

# php - glob 模式同时匹配两个日期

> ID：15948959
> 
> 赞同：1
> 
> 时间：2013-04-11T12:36:05.837
> 
> 标签：php, date, glob

我目前正在使用这种格式的 glob：

```
glob('/STORAGE/LOGFILES/*.*') 
```

在 /STORAGE/LOGFILES 中，有数百个文本文件都以 YYYY-MM-DD 开头。我想将`*.*`模式更改为仅查看当前月份和上个月：

```
glob('/STORAGE/LOGFILES/2013-04*')
glob('/STORAGE/LOGFILES/2013-03*') 
```

我似乎无法弄清楚如何在一个语句中做到这一点。我想我已经想出了如何做本月：

```
glob('/STORAGE/LOGFILES/'.date("Y-m").'*') 
```

但我想要一种将它们组合成一个语句的方法。感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:45:54.433

您可以使用`GLOB_BRACE`这样的选项：

```
$now = new DateTime();
$lastMonth = new DateTime('-1 month');
$monthList = $now->format('Y-m').','.$lastMonth->format('Y-m');
$pattern = '/STORAGE/LOGFILES/{'.$monthList.'}*';
glob($pattern, GLOB_BRACE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:41:29.817

试试这个代码

```
glob('/STORAGE/LOGFILES/[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]*') 
```

您可以玩 glob 模式：[http](http://cowburn.info/2010/04/30/glob-patterns/) ://cowburn.info/2010/04/30/glob-patterns/ 玩得开心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:41:55.850

在我看来，这取决于平台（或外壳）。

> glob() 函数根据 libc glob() 函数使用的规则搜索所有匹配模式的路径名，这类似于普通 shell 使用的规则。

请参阅此说明：[http ://www.php.net/manual/en/function.glob.php#110340](http://www.php.net/manual/en/function.glob.php#110340)

```
<?php

$a = glob('/path/*{foo,bar}.dat',GLOB_BRACE);
print_r($a);

?>

Result : 
Array
(
    [0] => /path/file_foo.dat
    [1] => /path/file_foobar.dat
    [2] => /path/file_foobar.dat
) 
```

也许你可以尝试一个'|' 或签名？

它不支持正则表达式：[http](http://www.php.net/manual/en/function.glob.php#88250) ://www.php.net/manual/en/function.glob.php#88250吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:42:55.703

怎么样

```
glob('/STORAGE/LOGFILES/'.date("Y").'-{'.date("m").','.date("m")-1.'}*',GLOB_BRACE) 
```

# jquery - 占位符是否支持 IE 8？

> ID：15948965
> 
> 赞同：0
> 
> 时间：2013-04-11T12:36:24.283
> 
> 标签：jquery, internet-explorer, internet-explorer-8, haml, onedrive

我认为 IE 8 不支持占位符，但是当我加载 www.skydrive.com 时，它带有占位符文本“someone@example.com & password”

有没有办法在 IE 8 中访问没有 jQuery 等的占位符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:44:17.410

根据[我可以使用](http://caniuse.com/#feat=input-placeholder)`placeholder`IE10中的属性。

[Modernizr](http://modernizr.com)是一个很好的库，用于进行诸如此类的特征检测，并且它们也有[很多你可以使用的 polyfils 列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#web-forms--input-placeholder)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T06:00:11.723

只需将其添加到您的标题中。希望能帮助到你

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

# tfs - Team Foundation Server 自动构建标签

> ID：15948969
> 
> 赞同：2
> 
> 时间：2013-04-11T12:36:45.090
> 
> 标签：tfs, tfsbuild

我们正在使用 TFS 2012 (Express) 和 MSDEV 2010。

我们的代码是使用 Source Safe 设置的，因此 UAT 构建作为 DEV 代码上的标签实现。现在我们希望使用 TFS 保持相同的系统，并在最新版本的代码（当前工作）和我们在代码中设置的标签上运行自动构建。

我认为这将是构建队列对话框的高级设置中的“获取版本”选项，但似乎并非如此。

在 TFS 中这仍然可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:37:40.163

您应该能够按照[versionspec 文档](http://msdn.microsoft.com/en-us/library/56f7w6be%28v=vs.100%29.aspx)中的描述在“获取版本”中使用 Lmylabel，或者您可以创建一个新的构建定义并在`Process`-> `Advanced`->下指定它`Get Version`

# spring - 是否可以使用 HQL 查询连接表？

> ID：15948973
> 
> 赞同：0
> 
> 时间：2013-04-11T12:36:49.733
> 
> 标签：spring, hibernate, hql

我的数据库：

```
WorkflowProcess
id | name

WorkflowProcessToWorkflowProcess
ancestor | descendent 
```

我需要查询 root `WorkflowProcess`。有了这个表结构，我正在寻找类似的查询`SELECT * FROM WorkflowProcess WHERE id NOT IN (SELECT DISTINCT descendent FROM WorkflowProcessToWorkflowProcess)`

我的`WorkflowProcess`实体：

```
private Collection<WorkflowProcessEntity> workflowProcesses;

@JoinTable(name = "Workflow_Process_to_Workflow_Process", joinColumns = {
        @JoinColumn(name = "ancestor", referencedColumnName = "id")}, inverseJoinColumns = {
        @JoinColumn(name = "descendent", referencedColumnName = "id")})
@ManyToMany()
public Collection<WorkflowProcessEntity> getWorkflowProcesses() {
    return workflowProcesses;
}

public void setWorkflowProcesses(Collection<WorkflowProcessEntity> workflowProcesses) {
    this.workflowProcesses = workflowProcesses;
} 
```

是否可以使用 HQL 来完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:41:04.503

尝试这样的事情：

```
select child 
from WorkflowProcess parent right join parent.workflowProcesses child 
where parent is null 
```

# mysql - 计算字符串在结果中出现的次数

> ID：15948974
> 
> 赞同：0
> 
> 时间：2013-04-11T12:36:53.653
> 
> 标签：mysql

我有一个 MySQL 查询，它从多个表中提取数据。其中一个字段是 customer_id，它可以多次出现在结果中。有没有办法可以在结果中附加一个字段，显示每个唯一 customer_id 在结果集中出现的次数？我的查询如下...

```
SELECT customer.customer_id, customer.name, customer.email, Date_format(orders.datetime,'%d-%m-%Y') AS order_date, order_items.order_item_id, order_items.order_id

FROM order_items, product, orders, customer

WHERE order_items.product_id = product.product_id AND product.manufacturer = 'Nike' AND order_items.order_id = orders.order_id AND  orders.customer_id = customer.customer_id  ORDER BY customer_id, order_date 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:46:28.550

它效率低下，但它应该完成这项工作：

```
SELECT 
    customer.customer_id, 
    customer.name, 
    customer.email, Date_format(orders.datetime,'%d-%m-%Y') AS order_date, 
    order_items.order_item_id, 
    order_items.order_id,
    tmp.za_count
FROM 
    order_items, product, orders, customer
INNER JOIN (
    SELECT 
        customer.customer_id, 
        COUNT(*) as za_count

    FROM 
        order_items, product, orders, customer
    WHERE 
        order_items.product_id = product.product_id 
        AND product.manufacturer = 'Nike' 
        AND order_items.order_id = orders.order_id 
        AND  orders.customer_id = customer.customer_id 
    GROUP BY
        customer.customer_id
) as tmp
    ON tmp.customer_id = customer.customer_id
WHERE 
    order_items.product_id = product.product_id 
    AND product.manufacturer = 'Nike' 
    AND order_items.order_id = orders.order_id 
    AND  orders.customer_id = customer.customer_id  
ORDER BY 
    customer_id, 
    order_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:46:43.863

您要添加：在您的 SELECT ->`COUNT(customer.customer_id)`

并添加查询的结尾 ->`GROUP BY (customer.customer_id)`

您可能需要稍微调整查询 - 或将某些`SELECT`术语分解为子查询以使其正常工作。

# ios - iphone从睡眠模式恢复时UIPasteboard的字符串值为nil

> ID：15948978
> 
> 赞同：0
> 
> 时间：2013-04-11T12:36:59.743
> 
> 标签：ios, objective-c, iphone-5, pasteboard

从睡眠模式恢复后（点击睡眠/唤醒按钮，然后点击主页按钮），我尝试获取带有代码打击的粘贴板字符串，结果为零。

```
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
self.beforeValue = pasteboard.string; 
```

我可以用 iPhone 4S(iOS5.1.1)、iPodtouch4G(iOS6.1.3)、iPad(iOS6.1.3) 获得它，但我不能用 5(iOS6.1.3)。是 iPhone5 的错误吗？任何提示表示赞赏。

# c# - 获取 SqlDataSource 发送者对象的 ID

> ID：15948985
> 
> 赞同：1
> 
> 时间：2013-04-11T12:37:14.623
> 
> 标签：c#, asp.net, sqldatasource, sender-id

我正在尝试根据对象（发送者）的 ID 使用 switch 语句。

```
 protected void SqlDataSource_Selected(object sender, SqlDataSourceStatusEventArgs e)
        {
            int count = e.AffectedRows;
            SqlDataSource sqlds = (SqlDataSource)sender;
            switch (sqlds.ID)
            {
                case "sqldsPTY":
                    lblPTYCount.Text = "(" + count.ToString() + ")";
                    break;
                case "sqldsINC":
                    lblINCCount.Text = "(" + count.ToString() + ")";
                    break;
                ...
            }
         } 
```

但我得到了例外：

> System.InvalidCastException：无法将“System.Web.UI.WebControls.SqlDataSourceView”类型的对象转换为“System.Web.UI.WebControls.SqlDataSource”类型。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:39:55.257

```
SqlDataSource sqlds = (SqlDataSource)sender; 
```

导致您的问题 - 发件人必须是 SQLDataSourceView。所以试试

```
SQLDataSourceView sqlds = (SQLDataSourceView)sender 
```

并根据需要更改其余代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T08:57:27.440

正如@NDJ 所说，`sender`是`SQLDataSourceView`. 问题是如何获得`SqlDataSource`。

`SqlDataSource`传递给构造函数`SQLDataSourceView`（[MSDN：SqlDataSourceView 构造函数](https://msdn.microsoft.com/EN-US/library/ez9425kx(v=VS.110,d=hv.2).aspx)）。问题是它只存储在私有字段`_owner`（[referencesource：SqlDataSourceView](https://referencesource.microsoft.com/#System.Web/UI/WebControls/SqlDataSourceView.cs,c55f34fd2e430c7c)）中。所以需要使用反射来获取：

```
private string GetSqlDataSourceID(object sender)
{
    return (sender.GetType().GetField("_owner", BindingFlags.NonPublic | 
          BindingFlags.Instance).GetValue(sender) as SqlDataSource).ID;
} 
```

# c# - 指定的实体已包含在 EntitySet 中

> ID：15948992
> 
> 赞同：2
> 
> 时间：2013-04-11T12:37:29.047
> 
> 标签：c#, entityset

我在更新数据库中的数据时遇到了困难，所以也许你可以帮助我。

我有一个基于此依赖流（ A -> B -> C ）的带有 3 个 EntitySet 的 DataContext 。

当我的程序执行时，创建了 4 个实体（一个用于实体集 A，两个用于实体集 B，一个用于实体集 C）。

我使用以下方法添加这些新创建的实体：context_name.Entity_set_name.Add(Entity_name)。例如 ：

```
context.A.Add(AEntity);
context.B.Add(BEntity1);
context.B.Add(BEntity2);   // gives error
context.C.Add(CEntity); 
```

程序在执行 BEntity2 添加时给出“指定的实体已包含在 EntitySet 中”。请注意，两个实体（BEntity1 和 BEntity2）不包含相同的数据集。

# c# - ComboBox 不显示在单独线程中添加的项目

> ID：15948995
> 
> 赞同：0
> 
> 时间：2013-04-11T12:37:32.643
> 
> 标签：c#, multithreading, lambda

我正在将项目（字符串）加载到单独线程中的组合框中。加载完成后，组合似乎是空的。但是，如果我开始在其中输入现有项目的名称，然后点击向下或向上箭头，它会自动完成我的项目，然后我突然看到我的所有项目都在组合中。我究竟做错了什么？注意：myItem 只是我们使用名为 Name 的公共属性创建的类，getItems 返回这些项目的数组。

```
 void cmb_GotFocus(object sender, System.EventArgs e)
    {
        if (cmb.Items.Count == 0)
        {
            Thread thread = new Thread(new ThreadStart(GetItems));
            thread.Start();
        }
    }

    private void GetItems()
    {
        try
        {
            this.Invoke(new Action(() => cmb.Items.Clear()));

            myItem[] items = Library.GetItems();
            if (items != null && items.Length > 0)
            {
                foreach (myItem item in items)
                {
                    this.Invoke(new Action(() => cmb.Items.Add(item.name)));
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Could not get items.\nError: " + ex.Message);
        }
    } 
```