# StackOverflow 问答 15306000-15306999

# asp.net - Visual Studio 2012 ASP.NET 性能检测“无法找到 'vsinstr.exe at 。”

> ID：15306003
> 
> 赞同：0
> 
> 时间：2013-03-09T01:12:23.033
> 
> 标签：asp.net, visual-studio-2012

我正在尝试分析 ASP.NET 网站，但遇到了性能输出中显示的特殊错误。每当我访问分析器启动的开发站点时，我都会得到一行：

> “无法找到 'vsinstr.exe' 在。”

搜索了一段时间，我一直无法解决这个问题......有什么建议吗？

请注意，我确实去了每个谷歌搜索结果“无法在 . 只有10个左右。此外，我尝试使用 vsperfaspnetcmd 来分析我在 IIS 中设置的同一站点，我得到：

> C:\Windows\system32>vsperfaspnetcmd /t /s /i [http://example.com](http://example.com) Microsoft (R) VSPerf ASP.NET 命令，版本 11.0.0.0 版权所有 (C) Microsoft Corporation。版权所有。
> 
> 配置并附加到 ASP.NET 进程。请稍等。
> 
> 错误 VSP 7008：ASP.net 异常：“无法正确配置网站；获取 ASP.NET 进程信息失败。请求“ [http://example.com/VSEnterpriseHelper.axd](http://example.com/VSEnterpriseHelper.axd) ”返回错误：远程服务器返回一个错误：（403）禁止。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:02:23.233

我假设您使用的是 Windows 8 64 位 VS 2012 Ultimate。

浏览器窗口是否在出现错误““无法在 'vsinstr.exe' 处找到。”后启动？

如果是这样，您所做的最新更改是什么？在我们的例子中，我们正在运行应用程序池“.Net 4.5”，后来将其更改为“默认”，虽然错误存在，但配置文件继续运行使用 ASP .Net Web 应用程序启动的进一步浏览器，我们能够收集工具.

# android - Sencha Touch - 添加 AdView 时不会调整大小

> ID：15306011
> 
> 赞同：1
> 
> 时间：2013-03-09T01:13:11.570
> 
> 标签：android, cordova, sencha-touch-2, admob

我有这个：

```
private void setupAds() {
    AdView adView = new AdView(this, AdSize.BANNER, "a15138083566f58");
    LinearLayout layout = super.root;
    layout.addView(adView);

    AdRequest request = new AdRequest();
    request.setTesting(true);
    adView.loadAd(request);

    super.root.requestLayout();
} 
```

当广告加载时，它会覆盖我的应用程序的底部。如果我切换方向，一切都会正确重新渲染。这一定意味着 WebView 的大小是正确的，但是 Sencha Touch 不尊重大小的变化，对吧？

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:09:42.943

当以编程方式添加 AdView 时，通常会将其添加到您为此目的专门创建和调整大小的 ViewGroup 中。我不知道 Sencha Touch 是什么，但如果 super.root 是整个 Activity 的 ViewGroup，那么您的显示将完全取决于为根视图指定的布局类型。

建议您在布局中创建 AdViewParent 并将 AdView 添加到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T18:15:38.553

诀窍是不要将 adView 放在`super.root`布局上，而是放在 WebView 的布局上（`appView`DridGap 的）。这是屏幕底部水平对齐横幅的代码

```
private void setupAds() {
    AdView adView = new AdView(this, AdSize.BANNER, "a15138083566f58");
    //         
    RelativeLayout layout = new RelativeLayout(this);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT,
                AdSize.BANNER.getHeightInPixels(this));
    rparams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    layout.addView(adView, params);
    // 
    appView.addView(layout, new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
    request adRequest = new AdRequest();
    adView.loadAd(request);
} 
```

使用这种方法，您必须避免 admob 横幅的内容重叠。您可以在 app.scss 中执行此操作，例如

```
#bottomitemid{
   padding-bottom: 50px;
} 
```

# ios - UITableView 停止滚动

> ID：15306014
> 
> 赞同：1
> 
> 时间：2013-03-09T01:13:27.153
> 
> 标签：ios, objective-c, uitableview, scroll

我的 TableView 使用自定义单元格，当我从 DetailView 返回时，有时会“停止”滚动。

我可以将视图向上推几英寸左右，下面的单元格确实会出现，但滚动视图的高度应该是 4 或 5 个窗口。

通过 segue 调用详细视图。除了返回按钮，我还用滑动手势触发返回。无论哪种方式都会发生。- 虽然不是所有的时间。

希望这是足够的信息。有谁知道我在搞砸什么？谢谢！

这是一些代码：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath{
int row = [indexPath row];
int sect = [indexPath section];
NSDictionary *shift = [globals.shifts objectAtIndex:sect];
NSLog(@"\nShift = %@", shift);
NSLog(@"\nEmployees = %@", [shift objectForKey:@"Employees"]);
NSArray *employees = [shift objectForKey:@"Employees"];
NSDictionary *employee = [employees objectAtIndex:row];

globals.badge = [employee objectForKey:@"Badge"];
globals.name = [employee objectForKey:@"Name"];

return indexPath;
}

- (void)receivedData:(NSData *)responseData {
NSError* error;
globals.report = [NSJSONSerialization
          JSONObjectWithData:responseData
          options:kNilOptions
          error:&error];

globals.shifts = [globals.report objectForKey:@"shifts"];
[globals.ai removeFromSuperview];
[table reloadData];
self.title = [ [NSString alloc] initWithFormat:@"%@ - %@",
              [globals.clientNames objectAtIndex:globals.curClient],
              [self.dateFormatter stringFromDate: globals.weekEnd]];
self.title = [ [NSString alloc] initWithFormat:@"%@",
              [self.dateFormatter stringFromDate: globals.weekEnd]];
}

-(void) viewWillAppear:(BOOL)animated {

if( globals == nil || globals.report == nil )
{
    appDelegate = (MSIAppDelegate *)[[UIApplication sharedApplication] delegate];
    globals = [appDelegate globals];
    [[self view] addSubview:globals.ai];
    NSString *urlString = [[NSString alloc] initWithFormat:
                          @"http://www.msiwebtrax.com/Client/%@/WeeklyReport?id=%@&start=%@&end=%@", [globals.clientIDs objectAtIndex:globals.curClient], globals.userName, [globals.formatter stringFromDate: globals.weekEnd], [globals.formatter stringFromDate: [globals.weekEnd dateByAddingTimeInterval:(-7) * 24 * 60 * 60] ]];
    NSURL *url = [NSURL URLWithString: urlString];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0 ), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        url];
        [self performSelectorOnMainThread:@selector(receivedData:)
                               withObject:data waitUntilDone:YES];
    });
}
}

- (void)viewDidLoad
{
[super viewDidLoad];

UIScrollView *tempScrollView=(UIScrollView *)self.view;
NSLog(@"scroll view dimensions: %f, %f", tempScrollView.contentSize.height, tempScrollView.contentSize.width);

self.dateFormatter = [[NSDateFormatter alloc] init];
[self.dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[self.dateFormatter setTimeStyle:NSDateFormatterNoStyle];

// Uncomment the following line to preserve selection between presentations.
self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

这是部分/行的数量

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
int sections = [globals.shifts count];
return sections;
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
NSDictionary* shift = [globals.shifts objectAtIndex:section];
int rowCount = [[shift objectForKey:@"Employees"] count];
return rowCount;
} 
```

--

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"EmployeeHoursCell";
EmployeeHoursCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if( cell == nil ) {
    cell = [[EmployeeHoursCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];
globals.employees = [[globals.shifts objectAtIndex:section] objectForKey:@"Employees"];

cell.Row.text = [[NSString alloc] initWithFormat:@"%3d", (row+1)];
cell.Id.text = [[globals.employees objectAtIndex:row] objectForKey:@"Badge"];

cell.Name.text = [[globals.employees objectAtIndex:row] objectForKey:@"Name"];

NSArray *days = [[globals.employees objectAtIndex:0]  objectForKey:@"Days"];

cell.Hrs1.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:0] objectForKey:@"Rounded"] ];
cell.Hrs1.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs1.text doubleValue]];

cell.Hrs2.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:1] objectForKey:@"Rounded"] ];
cell.Hrs2.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs2.text doubleValue]];

cell.Hrs3.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:2] objectForKey:@"Rounded"] ];
cell.Hrs3.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs3.text doubleValue]];

cell.Hrs4.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:3] objectForKey:@"Rounded"] ];
cell.Hrs4.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs4.text doubleValue]];

cell.Hrs5.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:4] objectForKey:@"Rounded"] ];
cell.Hrs5.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs5.text doubleValue]];

cell.Hrs6.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:5] objectForKey:@"Rounded"] ];
cell.Hrs6.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs6.text doubleValue]];

cell.Hrs7.text = [[NSString alloc] initWithFormat:@"%@",[[days objectAtIndex:6] objectForKey:@"Rounded"] ];
cell.Hrs7.text = [[NSString alloc] initWithFormat:@"%.2f", [cell.Hrs7.text doubleValue]];

return cell;
} 
```

好的 - 在 vi​​ewWillAppear 方法中，我尝试重新加载表，但没有任何影响。但是我之前将 contentSize 重置为 0,0，现在它似乎工作正常，不完全确定为什么 - 但我注意到我第一次从详细视图返回时，高度设置为 2000 左右，第二次返回它为零 - 在这一点上它起作用。所以我将它设置为零并重新加载。感谢达伦和所有人的回复！

# jquery - jQuery: Listing element number versus total number of element

> ID：15306021
> 
> 赞同：1
> 
> 时间：2013-03-09T01:14:03.487
> 
> 标签：jquery

Let's look at the following code:

```
<ul>
  <li>What is jQuery?</li>
  <li>What is HTML?</li>
  <li>What is CSS</li>
</ul> 
```

What I want to be able to do is to append after each question (into another div) this kind of text: question 1/3, question 2/3 and question 3/3...

I know `length()` calculates the total number of matched elements so that would give me the number "3" that goes after the "/" but how do I display the current question's number? I know it's something related to `index()` but I am not sure on how to do this.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:16:44.233

I'd suggest:

```
var size = $('li').length;
$('li').each(function(i){
    $('<div />', {'text' : 'Question ' + (i+1) + '/' + size}).appendTo(this);
}); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/rupTu/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:17:49.257

demo: [http://jsfiddle.net/tGLQk/1](http://jsfiddle.net/tGLQk/1)

use `each`

html

```
<ul>
  <li>What is jQuery?</li>
  <li>What is HTML?</li>
  <li>What is CSS</li>
</ul> 
```

js

```
var count = $("ul li").length;
$("ul li").each(function(key,val){
 this.innerHTML += " " + (key+1) + "/"+count;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T01:26:43.727

无法保证`.each`顺序正确，但您可以使用 CSS 来做到这一点。参见这个小提琴的例子：http: [//jsfiddle.net/NCzsG/](http://jsfiddle.net/NCzsG/)

（请注意，如果您有多个列表，则需要在每个列表的s上`.each`遍历每个`ul`运行 this 的列表）`li`

# eclipse - Eclipse egit，协作问题和提示

> ID：15306023
> 
> 赞同：1
> 
> 时间：2013-03-09T01:14:07.700
> 
> 标签：eclipse, git, egit

我和我的朋友现在使用 Git 已经两天了，但我们仍然缺乏正确使用它并充分利用其全部功能的知识，尽管与使用 Facebook 消息发送和同步文件相比，这是朝着正确方向迈出的巨大一步。我们已经在网上搜索过，大多数 Egit 指南要么假设您独自工作，要么假设其他人克隆并分支到他们自己的 repo。然而，我们正在同一个项目（一个 2D 角色扮演游戏）上合作，不知道如何正确使用 Egit 一起工作。我们面临的一些问题：

1.我们有完全相同的项目副本，他改变了我们使用的一些方法，我改变了我们使用的一些类和资源。他首先承诺并推动回购。现在，由于必须解决 Egit 抱怨的文件（repo 与本地）冲突，我无法推送或提交甚至拉取。

2\. 您如何正确同步正在协作的代码？假设我们中的任何一个是第一个推送回购，另一个（拉取者）必须做什么来确保他自己的代码没有被完全覆盖，只接受已经改变的部分，我们认为应该改变的部分。

3\. 我们是否总是需要创建一个（新的）本地分支，拉到这个分支，查看更改，并将我们想要的更改与主/主合并？你如何正确地做到这一点。

任何输入都是最受欢迎的，我们已经有了我们破碎的知识更有效率，更多只会有好处:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:46:22.050

好的，这是我的答案：

1.  我们有完全相同的副本......因为必须解决 Egit 抱怨的文件（repo 与本地）冲突。

    *   首先，您应该确保使用单独的分支，以便始终可以提交。
    *   然后，您必须在合并时解决任何冲突。
2.  你如何正确同步代码......

    *   在将代码拉入主分支之前，请使用单独的分支以确保代码正常。
3.  我们是否总是必须建立一个（新的）本地分支......

    *   是的，git 是建立在这样的假设之上的，即这是最好的工作方式。“一切都是本地的”

这是我或我们通常使用分支的方式：

*   主开发分支（主）

*   项目分支，用于合并本项目添加的功能。当所有功能都已添加并且似乎可以工作时，这将被推送/合并到主分支中。

*   开发人员分支，每个开发人员都有自己的分支来开发特定功能，然后再将其推送/合并到项目分支中。

有时也可以拥有特定的发布分支。即，当一个项目将所有添加的功能合并到主分支中并且一切正常时，就会创建一个发布分支用于回归测试。完成所有测试后，此分支最终将包含已发布的软件。做一个单独的发布分支的好处是可以继续开发主分支，但是如果必须在较早的版本上完成快速错误修复，可以在该发布分支上完成，然后再合并到主分支中。

//jk

# ember.js - 未要求父路由处理事件？

> ID：15306028
> 
> 赞同：2
> 
> 时间：2013-03-09T01:15:01.337
> 
> 标签：ember.js

[指南](http://emberjs.com/guides/templates/actions/)说当一个动作被触发时，Ember 首先在当前控制器中寻找一个处理程序，然后如果它在控制器中找不到它，它会在当前路由中查找，然后是父路由，等等。我不是看到这种情况发生。

我的路线：

```
App.Router.map(function() {
    // Creates 'products' and 'products.index' routes
    this.resource('products', function(){
        // ...
    });
}); 
```

我的超级琐碎*products.index*模板；

```
<span {{action fooBar}}>Run fooBar</span> 
```

为了测试这一点，我目前在*浏览器中的 /#/products 中*，并且 Ember 记录*“已转换为 'products.index'”*说我目前在 products.index 路线中，正如我所期望的那样。现在，如果单击该操作，Ember 应该在以下位置查找处理程序：

1.  产品索引控制器
2.  产品索引路线
3.  产品路线

我的观察：

*   如果我将处理程序放在 ProductsIndexController 中，它就可以工作。
*   如果我将处理程序放在 ProductsIndexRoute 中，它就可以工作。
*   但是，如果我将处理程序放在 ProductsRou​​te 中，它永远不会被调用：

.

```
App.ProductsRoute = Ember.Route.extend({
    events: {
        fooBar: function(){
            alert("alarm!");
        }
    }
}); 
```

相反，我看到了错误：

```
*Error: Nothing handled the event 'fooBar'.* 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:21:31.120

我的其他 javascript 文件之一也在设置/创建 App.ProductsRou​​te （并且什么都不做），这导致了冲突。愚蠢的错误。

# css - CSS3变换旋转文本，左右固定位置，垂直居中

> ID：15306032
> 
> 赞同：11
> 
> 时间：2013-03-09T01:16:01.257
> 
> 标签：css, position, transform, vertical-alignment, css-transforms

我试图将一个元素放置在浏览器窗口的左侧和右侧，两者都包含一个`ul`带有 CSS 变换的旋转。我已经设法将`.rotate-left`其定位`ul`到左侧，但我无法将`ul`内部定位`.rotate-right`到右侧。（如果不支持转换，它需要在从右到左的水平线上可见。）

CSS：

```
.rotate-left ul li,
.rotate-right ul li {
    display: inline;
}

.rotate-left {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 10em;
    white-space: nowrap;
    background: silver;
}

.rotate-left ul {
    display: inline-block;
    position: fixed;
    top: 0;
    bottom: 0;
    height: 1.5em;
    margin: auto;
    background: red;
    -webkit-transform-origin: 0 50%;
       -moz-transform-origin: 0 50%;
    -webkit-transform: rotate(-90deg) translate(-50%, 50%);
       -moz-transform: rotate(-90deg) translate(-50%, 50%);
}

.rotate-right {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 10em; 
    white-space: nowrap;
    background: silver;
}

.rotate-right ul {
    position: fixed;
    top: 0;
    bottom: 0;
    right: 0;
    height: 1.5em; 
    margin: auto;
    background: red;
    -webkit-transform-origin: 0 50%;
       -moz-transform-origin: 0 50%;
    -webkit-transform: rotate(90deg) translate(-50%, 50%);
       -moz-transform: rotate(90deg) translate(-50%, 50%);
} 
```

HTML：

```
<div class="rotate-left">
    <ul>
        <li>left</li>
        <li>left</li>
        <li>left</li>
    </ul>
</div>
<div class="rotate-right">
    <ul>
        <li>right</li>
        <li>right</li>
        <li>right</li>
    </ul>
</div> 
```

-

演示：[http ://codepen.io/anon/pen/FtyEG](http://codepen.io/anon/pen/FtyEG)

我建立在这个[100% 高度块的垂直文本](https://stackoverflow.com/questions/10843380/100-height-block-with-vertical-text)之上。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T20:56:48.960

I solved it and cleaned the code up a bit.

```
.left,
.right {
    position: fixed;
    top: 0;
    bottom: 0;
    height: 1.5em;
    margin: auto;
}

.left {
    left: 0;
    -webkit-transform-origin: 0 50%;
       -moz-transform-origin: 0 50%;
        -ms-transform-origin: 0 50%;
         -o-transform-origin: 0 50%;
            transform-origin: 0 50%;
    -webkit-transform: rotate(-90deg) translate(-50%, 50%);
       -moz-transform: rotate(-90deg) translate(-50%, 50%);
        -ms-transform: rotate(-90deg) translate(-50%, 50%);
         -o-transform: rotate(-90deg) translate(-50%, 50%);
            transform: rotate(-90deg) translate(-50%, 50%);
}

.right {
    right: 0;
    -webkit-transform-origin: 100% 50%;
       -moz-transform-origin: 100% 50%;
        -ms-transform-origin: 100% 50%;
         -o-transform-origin: 100% 50%;
            transform-origin: 100% 50%;
    -webkit-transform: rotate(90deg) translate(50%, 50%);
       -moz-transform: rotate(90deg) translate(50%, 50%);
        -ms-transform: rotate(90deg) translate(50%, 50%);
         -o-transform: rotate(90deg) translate(50%, 50%);
            transform: rotate(90deg) translate(50%, 50%);
} 
```

Demo: [http://codepen.io/anon/pen/LHeaB](http://codepen.io/anon/pen/LHeaB)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T22:25:52.830

我认为我或多或少是正确的。这将是：

```
.rotate-right ul {
    -webkit-transform-origin: 78% 100%;
    -webkit-transform: rotate(90deg) translate(0%, 0%); 
```

You don't need to translate if you choose ok the transform origin; going to 78% would be to compensate for the li width

# c# - Unable to Make this log in Form in c# / SqlDataReader Issue

> ID：15306039
> 
> 赞同：1
> 
> 时间：2013-03-09T01:17:16.320
> 
> 标签：c#, sql, windows-forms-designer, sqldatareader

I am trying to make a windows Form Application with a login screen,Form3 Will open Form1 if the username and password are correct.

The code is linked to a database

The code is as follows:

```
 private void button1_Click(object sender, EventArgs e)
 {
            string u_id = textBox1.Text;
            string u_pwd = textBox2.Text;

            SqlConnection conn = new SqlConnection("Data Source=mmtsql.XXX.XXXXX.ac.uk;Initial Catalog=mmt12-186;User ID=XXXXXX;Password=XXXXXX");
            conn.Open();

            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = ("SELECT * FROM UsersData WHERE User = '" + textBox1.Text + "'");
            cmd.Parameters.AddWithValue("un", u_id);

            SqlDataReader reader = cmd.ExecuteReader();

            if (reader.Read() == false)
            { 
                    label3.Text = "Invalid Username or Password !";
                    return;
            }

            string realpwd = reader.GetString(0);

            if (u_pwd == realpwd)
            {
                    Form1 formload = new Form1();
                    formload.Show();
            }
} 
```

Every time I run this code, I get an exception on with the line:

```
string realpwd = reader.GetString(0); 
```

The exception is:

> Invalid attempt to read when no data is present.

The `UsersData` table has 3 columns, Id, User, Password

Thanks goes to "Alfred Sanz" who answered the question, the problem now is that no error is present but no data is shown, as if the button1_click has no method, the current code is:

```
 private void button1_Click(object sender, EventArgs e)
    {
        string u_id = textBox1.Text;
        string u_pwd = textBox2.Text;
        SqlConnection conn = new SqlConnection("Data Source=mmtsql.XX.XXX.ac.uk;Initial Catalog=XXXXXXX ;User ID=XXXX;Password=XXXXX");
        conn.Open();
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = ("SELECT * FROM UsersData WHERE User = @un");
        cmd.Parameters.AddWithValue("@un", u_id);
        SqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
            if (reader["Password"].ToString() == u_pwd)
            {
                Form1 formload = new Form1();
                formload.Show();
            }
            else
            {
                label3.Text = "Invalid Username or Password !";
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:24:33.470

您已经将`value`USER 设置为，`'" + textBox1.Text + "'"`但您还设置了一个`cmd.Parameters.AddWithValue("un", u_id);`确实不存在的值，请将您的代码更改为

```
 cmd.CommandText = "SELECT * FROM UsersData WHERE User = @un";
            cmd.Parameters.AddWithValue("@un", u_id); 
```

您还可以将阅读器部分更改为：

```
while (reader.Read())
{
    if (reader["Password"].ToString() == u_pwd.Text
        {
              Form1 formload = new Form1();
              formload.Show();
        }
    else
      {
        label3.Text = "Invalid Username or Password !";
      }
} 
```

# c# - 为加权图生成邻接矩阵

> ID：15306040
> 
> 赞同：10
> 
> 时间：2013-03-09T01:17:20.830
> 
> 标签：c#, data-structures, graph, adjacency-matrix

我正在尝试实现[Floyd-Warshall Algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)。为此，它需要我设置`adjacency matrix` 一个加权图。我该怎么做呢？我知道这些值并附上了加权图的图片。我试图在网上寻找一些这样的例子，但我似乎找不到任何东西。我了解 Floyd-Warshall 算法，我只需要帮助设置它，以便我能够实现它。这是我之前构建的一个，但我不必使用特定的值。

**代码：**

```
public static void buildAdjMatrix()
{

    for (int i = 0; i < 100; i++)
    {
        for (int j = 0; j < 100; j++)
        {
            if (directionAllowed(i, j) == true)
            {
                adjMatrix[i, j] = 1;
            }
            else
            {
                adjMatrix[i, j] = 50;
            }
        }
    }

} 
```

这是手头的特定图表：

![在此处输入图像描述](../Images/5ee8398ccf5bbbe662345f2c741ef4a3.png)

这是我需要创建的矩阵的图片。抱歉质量太差了...

![在此处输入图像描述](../Images/833f5ee60d3412f6db4c6d0bfd5776b3.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-09T12:49:13.143

[因此，您似乎对Graphs](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)不熟悉，请查看 Wikipedia。也浏览一些图像，它变得更容易理解。

## 一点概念

您的图片可以表示为`Graph`. 通常，图形使用 2 种基本类型的元素`Nodes`和`Links`（有时称为`Arcs`）来实现。

A`Node`代表您图片中的字母，它们将是 A、B、C 等。 An `Arc`or`Link`是连接两个节点的线，如果您查看 H 到 L 之间的连接，则两者之间有联系，在 a加权图，不同的链接有不同的权重。

## 解决您的问题 - 第 1 部分

我们要做的是在代码中将您的图片表示为图形，所以让我们开始创建基本元素`Node`和`Arc`：

**节点**

一个节点有一个`Name`，所以我们可以识别这个节点。一个节点可以连接到其他节点，我们可以使用节点的集合，但你的是一个加权图，所以，每个连接都必须由链接节点和它的权重表示。因此，我们使用 Arcs 的集合。

```
public class Node
{
    public string Name;
    public List<Arc> Arcs = new List<Arc>();

    public Node(string name)
    {
        Name = name;
    }

    /// <summary>
    /// Create a new arc, connecting this Node to the Nod passed in the parameter
    /// Also, it creates the inversed node in the passed node
    /// </summary>
    public Node AddArc(Node child, int w)
    {
        Arcs.Add(new Arc
        {
            Parent = this,
            Child = child,
            Weigth = w
        });

        if (!child.Arcs.Exists(a => a.Parent == child && a.Child == this))
        {
            child.AddArc(this, w);
        }

        return this;
    }
} 
```

**弧**

非常简单的类，它包含链接的节点，以及连接的权重：

```
public class Arc
{
    public int Weigth;
    public Node Parent;
    public Node Child;
} 
```

**图形**

Graph 是一种包装类，用于组织目的。我还为图表声明了一个 Root，我们没有使用它，但在以下几种情况下很有用：

```
public class Graph
{
    public Node Root;
    public List<Node> AllNodes = new List<Node>();

    public Node CreateRoot(string name)
    {
        Root = CreateNode(name);
        return Root;
    }

    public Node CreateNode(string name)
    {
        var n = new Node(name);
        AllNodes.Add(n);
        return n;
    }

    public int?[,] CreateAdjMatrix()
    {
        // Matrix will be created here...
    }
} 
```

## 解决您的问题 - 第 2 部分

现在我们有了保存图形的所有数据结构，让我们用一些数据填充它。这是一些初始化类似于您的立方体图片的图形的代码。这很枯燥乏味，但在现实生活中，图表将动态创建：

```
static void Main(string[] args)
{
    var graph = new Graph();

    var a = graph.CreateRoot("A");
    var b = graph.CreateNode("B");
    var c = graph.CreateNode("C");
    var d = graph.CreateNode("D");
    var e = graph.CreateNode("E");
    var f = graph.CreateNode("F");
    var g = graph.CreateNode("G");
    var h = graph.CreateNode("H");
    var i = graph.CreateNode("I");
    var j = graph.CreateNode("J");
    var k = graph.CreateNode("K");
    var l = graph.CreateNode("L");
    var m = graph.CreateNode("M");
    var n = graph.CreateNode("N");
    var o = graph.CreateNode("O");
    var p = graph.CreateNode("P");

    a.AddArc(b, 1)
     .AddArc(c, 1);

    b.AddArc(e, 1)
     .AddArc(d, 3);

    c.AddArc(f, 1)
     .AddArc(d, 3);

    c.AddArc(f, 1)
     .AddArc(d, 3);

    d.AddArc(h, 8);

    e.AddArc(g, 1)
     .AddArc(h, 3);

    f.AddArc(h, 3)
     .AddArc(i, 1);

    g.AddArc(j, 3)
     .AddArc(l, 1);

    h.AddArc(j, 8)
     .AddArc(k, 8)
     .AddArc(m, 3);

    i.AddArc(k, 3)
     .AddArc(n, 1);

    j.AddArc(o, 3);

    k.AddArc(p, 3);

    l.AddArc(o, 1);

    m.AddArc(o, 1)
     .AddArc(p, 1);

    n.AddArc(p, 1);

    // o - Already added

    // p - Already added

    int?[,] adj = graph.CreateAdjMatrix(); // We're going to implement that down below

    PrintMatrix(ref adj, graph.AllNodes.Count); // We're going to implement that down below
} 
```

# 解决您的问题 - 第 3 部分

所以，我们有一个完全初始化的图，让我们创建矩阵。下一个方法创建一个二维矩阵，n x n，其中 n 是我们从图形类中获得的节点数。对于每个节点，我们搜索它们是否有链接，如果它们有链接，则在适当的位置填充矩阵。看，在你的邻接矩阵例子中，你只有`1`s，这里我放了链接的权重，我是这样放的，所以有一个加权图是没有意义的！

```
public int?[,] CreateAdjMatrix()
{
    int?[,] adj = new int?[AllNodes.Count, AllNodes.Count];

    for (int i = 0; i < AllNodes.Count; i++)
    {
        Node n1 = AllNodes[i];

        for (int j = 0; j < AllNodes.Count; j++)
        {
            Node n2 = AllNodes[j];

            var arc = n1.Arcs.FirstOrDefault(a => a.Child == n2);

            if (arc != null)
            {
                adj[i, j] = arc.Weigth;
            }
        }
    }
    return adj;
} 
```

# 完毕

完成了，你有你的加权邻接矩阵，打印它的某种方式：

```
private static void PrintMatrix(ref int?[,] matrix, int Count)
{
    Console.Write("       ");
    for (int i = 0; i < Count; i++)
    {
        Console.Write("{0}  ", (char)('A' + i));
    }

    Console.WriteLine();

    for (int i = 0; i < Count; i++)
    {
        Console.Write("{0} | [ ", (char)('A' + i));

        for (int j = 0; j < Count; j++)
        {
            if (i == j)
            {
                Console.Write(" &,");
            }
            else if (matrix[i, j] == null)
            {
                Console.Write(" .,");
            }
            else
            {
                Console.Write(" {0},", matrix[i, j]);
            }

        }
        Console.Write(" ]\r\n");
    }
    Console.Write("\r\n");
} 
```

什么给了我们以下输出：

```
 A  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P
A | [  &, 1, 1, ., ., ., ., ., ., ., ., ., ., ., ., ., ]
B | [  1, &, ., 3, 1, ., ., ., ., ., ., ., ., ., ., ., ]
C | [  1, ., &, 3, ., 1, ., ., ., ., ., ., ., ., ., ., ]
D | [  ., 3, 3, &, ., ., ., 8, ., ., ., ., ., ., ., ., ]
E | [  ., 1, ., ., &, ., 1, 3, ., ., ., ., ., ., ., ., ]
F | [  ., ., 1, ., ., &, ., 3, 1, ., ., ., ., ., ., ., ]
G | [  ., ., ., ., 1, ., &, ., ., 3, ., 1, ., ., ., ., ]
H | [  ., ., ., 8, 3, 3, ., &, ., 8, 8, ., 3, ., ., ., ]
I | [  ., ., ., ., ., 1, ., ., &, ., 3, ., ., 1, ., ., ]
J | [  ., ., ., ., ., ., 3, 8, ., &, ., ., ., ., 3, ., ]
K | [  ., ., ., ., ., ., ., 8, 3, ., &, ., ., ., ., 3, ]
L | [  ., ., ., ., ., ., 1, ., ., ., ., &, ., ., 1, ., ]
M | [  ., ., ., ., ., ., ., 3, ., ., ., ., &, ., 1, 1, ]
N | [  ., ., ., ., ., ., ., ., 1, ., ., ., ., &, ., 1, ]
O | [  ., ., ., ., ., ., ., ., ., 3, ., 1, 1, ., &, ., ]
P | [  ., ., ., ., ., ., ., ., ., ., 3, ., 1, 1, ., &, ] 
```

# sql - SQL Server 中复杂主键的表索引

> ID：15306042
> 
> 赞同：3
> 
> 时间：2013-03-09T01:17:45.850
> 
> 标签：sql, sql-server

我的数据库中有以下表格

*   用户
*   地位
*   状态到用户

statusToUser 用作其他两个之间的链接表，用于多对多关系

表定义如下：

*   用户身份
*   Status_Id

这些列是表的主键，并且有一个包含它们的单个索引，但是当为“丢失的查询”运行查询优化时，我在列表中得到了在 user_id 上添加另一个索引的建议。

问题是我真的需要在那个列上有另一个索引，已经有了另一个索引吗？

谢谢

编辑：

这是两个不同的查询，相同的方法：

```
SELECT  user_seeks * avg_total_user_cost * ( avg_user_impact * 0.01 ) AS [index_advantage] ,
        dbmigs.last_user_seek ,
        dbmid.[statement] AS [Database.Schema.Table] ,
        dbmid.equality_columns ,
        dbmid.inequality_columns ,
        dbmid.included_columns ,
        dbmigs.unique_compiles ,
        dbmigs.user_seeks ,
        dbmigs.avg_total_user_cost ,
        dbmigs.avg_user_impact
FROM    sys.dm_db_missing_index_group_stats AS dbmigs WITH ( NOLOCK )
        INNER JOIN sys.dm_db_missing_index_groups AS dbmig WITH ( NOLOCK )
                    ON dbmigs.group_handle = dbmig.index_group_handle
        INNER JOIN sys.dm_db_missing_index_details AS dbmid WITH ( NOLOCK )
                    ON dbmig.index_handle = dbmid.index_handle
WHERE   dbmid.[database_id] = DB_ID()
ORDER BY index_advantage DESC ; 
```

2号

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
SELECT TOP 20 
ROUND(s.avg_total_user_cost * 
s.avg_user_impact 
* (s.user_seeks + s.user_scans),0) 
AS [Total Cost]
, d.[statement] AS [Table Name]
, equality_columns
, inequality_columns
, included_columns
FROM sys.dm_db_missing_index_groups g 
INNER JOIN sys.dm_db_missing_index_group_stats s 
ON s.group_handle = g.index_group_handle 
INNER JOIN sys.dm_db_missing_index_details d 
ON d.index_handle = g.index_handle
ORDER BY [Total Cost] DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:50:40.783

联结表中的两个字段都是其他表的外键。在外键上建立索引通常是一个好主意，因此聚集键`(user_id, status_id)`和非聚集键`(status_id, user_id)`将是一个好主意。

表中或表`delete`中的A必须检查是否存在行那里的行与要删除的行匹配。`status``user``statusToUser``(user_id, status_id)``delete``user``status``statusToUser`

查询中的谓词`status`也是如此。主键`(user_id, status_id)`不会有任何帮助，您最终可能会进行聚集索引扫描而不是潜在的搜索，或者可能需要执行昂贵的排序操作。

# java - JFrame Size Persistience

> ID：15306044
> 
> 赞同：0
> 
> 时间：2013-03-09T01:17:51.050
> 
> 标签：java, swing, persistence

I am persisting a JFrame size / state information.

I can get the height, width and extended state number; however, this information is simply not enough. For example, if a window is maximized, the height and width returned are not what it would be after returning to a normal size.

Is there a helpful way of persisting and restoring this state data, or do I simply have to switch the window to JFrame.NORMAL before reading state? Is this even sufficient for all the possible fringe cases?

Obviously, in normal, we restore to normal with the size.

When maximize_both, we want to restore the normal size then maximize_both.

When maximize_horiz or maximize_vert, I am guessing we want to restore the normal size then maximize_horiz or maximize_vert respectively. I'm not sure. Will this address the vertical and horizontal sizes appropriately? Probably.

When iconified, we want to restore the normal size then iconify -- or maybe not iconify... Not sure.

To clarify, the issue is less about the persistence mechanism and more about what to persist and how to get it from the JFrame.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:45:41.340

与其仅保留框架的宽度和高度，还不如尝试保留首选尺寸信息。

这样，如果扩展状态不等于`MAXIMIZED_BOTH`（或两者的变体），您可以将大小设置为首选大小。

当然，您可以简单地调用`pack`...

# c# - Continuous integration and software versioning

> ID：15306045
> 
> 赞同：3
> 
> 时间：2013-03-09T01:17:54.453
> 
> 标签：c#, continuous-integration

I like the idea of automatically versioning my builds but I'm not sure what the right way is to get the AssemblyInfo.cs change back into source control (or should it not go into source control?). Is this something the CI server should be committing automatically for each build?

Using Bamboo at the moment.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:28:41.567

我们使用 Teamcity 作为我们的 CI 服务器，它带有一个名为[AssemblyInfo 修补程序的功能](http://confluence.jetbrains.com/display/TCD65/AssemblyInfo+Patcher)

这样做是在 Assemblyinfo.cs 中临时添加 teamcity 内部版本号，生成工件，然后恢复更改。这样生成的工件具有与内部版本号相同的版本。

源代码管理可以将 assemblyinfo.cs 版本条目作为开发人员正在处理的当前版本，其中“*”作为内部版本号。这可以在每次发布后更新。

**编辑 1：** 由于您使用的是 Bamboo，因此[这里](http://itrathnasekara.blogspot.in/2011/05/setting-assembly-version-automatically.html)有一个链接，它描述了一种在竹子中设置生成的工件中的内部版本号的方法，而无需签入 AssemblyInfo.cs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:25:11.543

我对你的问题有点困惑。如果您希望更改持续存在，则必须在构建作业对其进行编辑后提交 AssemblyInfo.cs。然而，大多数试图解决这些问题的构建系统都不会保留这些更改。他们只需在开始构建任务之前检查文件并编辑本地版本。

# mysql - 将两个查询合二为一

> ID：15306048
> 
> 赞同：2
> 
> 时间：2013-03-09T01:18:14.493
> 
> 标签：mysql, sql

我正在编写的查询有一些问题。这似乎是非常频繁的表结构，所以我希望得到一些帮助。

假设我有 3 个类似于 facebook 结构的表。`Users`, `Wall Posts`, 和`Comments`. 用户可以发布墙帖，并对其他墙帖发表评论。

在用户页面上，我想显示用户墙帖子和该帖子有多少评论的计数。这是我到目前为止所拥有的

我`Wall Post`使用用户 ID 作为表的内部连接来查询`User`表。这为我提供了该用户页面的墙贴结果集。然后我遍历该结果集，从每个结果集中获取 Wall Post id，并在`Comment`表中查询该 Wall Post Id 的评论计数。这可行，但是我必须两次访问数据库。谁能想到我可以通过一个查询来做到这一点？

第一个查询示例：

```
SELECT wallPost.*, user.currentDefault, user.displayName, user.userName 
FROM wallPost 
INNER JOIN user ON user.id = wallPost.sourceUserId 
WHERE wallPost.recipientId = ? ORDER BY wallPost.id DESC 
```

第二个查询示例：

```
SELECT COUNT(id) AS count 
FROM comment 
WHERE wallPostId = ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:28:31.340

我会将计数添加为子查询并将子查询加入主查询

```
SELECT
    wallPost.*,
    user.currentDefault,
    user.displayName,
    user.userName,
    wallpost_commentcount.total
FROM
    wallPost
        INNER JOIN user ON user.id=wallPost.sourceUserId
        LEFT JOIN (SELECT wallPostId,COUNT(*) as total FROM comment GROUP BY wallPostId) as wallpost_commentcount ON (wallpost_commentcount.wallPostId=wallPost.id)
WHERE
    wallPost.recipientId = ?
ORDER BY wallPost.id DESC 
```

请确保您有一个索引，`comment.wallPostId`否则此查询将需要很长时间。

我使用了，`LEFT JOIN`因为即使还没有评论记录，您也总是想获得 wallPost

# javascript - binding resize function to images upon loading

> ID：15306050
> 
> 赞同：0
> 
> 时间：2013-03-09T01:18:15.153
> 
> 标签：javascript, twitter-bootstrap, carousel, image-resizing, function-binding

I've been working with twitter bootstrap carousel, and I've written my own image resize function so that images are proportionally resized to the window size. I've also implemented the lazy load for images so that images are only loaded when its the active current slide. So my problem is, how do I bind my resize function to each carousel item when it becomes active?

HTML:

```
<div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item" id="item1"> 
      <img src="img1.jpg">
    </div>
    <div class="item" id="item2">
      <img lazy-src="img2">
    </div>
      <div class="item" id="item3">
        <img lazy-src="img3">
    </div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

My image resize JS:

```
$.fn.imagefit = function(options) {
    var fit = {
        all : function(imgs){
            imgs.each(function(){
                fit.one(this);
                })
            },
        one : function(img){
            var winRatio = parseInt($(window).width()) / parseInt($(window).height());
            var imgRatio = parseInt($(img).width()) / parseInt($(img).height());

            //If imgRatio > winRatio, image is proportionally wider than the resolution ratio for window
            if(imgRatio > winRatio){
                // Fit to width
                $(img).width($(window).width());
                $(img).height(parseInt($(img).width())/imgRatio);
            } else {
                // Fit to height
                $(img).height($(window).height());
                $(img).width(parseInt($(img).height())*imgRatio);

            }
        }
    };

    this.each(function(){
            var container = this;

            // store list of contained images (excluding those in tables)
            var imgs = $('img', container).not($("table img"));

            // store initial dimensions on each image 
            imgs.each(function(){
                $(this).attr('startwidth', $(this).width())
                    .attr('startheight', $(this).height())
                    .css('max-width', $(this).attr('startwidth')+"px");

                fit.one(this);
            });
            // Re-adjust when window width is changed
            $(window).bind('resize', function(){
                fit.all(imgs);
            });
        });
    return this;
}; 
```

I've tried this, but the method wan'st even invoked

```
 $("#item1").bind("load", function(){
    ("#item1").imagefit(); 
    }); 
```

I've also tried this, but it broke the carousel as item2,3 are not shown after becoming active item, their width is set to 0

```
 $(window).load(function(){
     $('#item1, #item2, item3').imagefit();
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:47:44.170

你有错误

```
$("#item1").bind("load", function(){
  ("#item1").imagefit(); // no $ 
}); 
```

所以

```
$("#item1").bind("load", function(){
  $(this).imagefit();
}); 
```

和这里

```
$(window).load(function(){
   $('#item1, #item2, item3').imagefit(); // #item3
}); 
```

# c# - 如何在 C# 中创建有效的基本身份验证

> ID：15306054
> 
> 赞同：0
> 
> 时间：2013-03-09T01:18:50.653
> 
> 标签：c#, authentication, iis-7

我使用本教程为我的网站创建基本身份验证：http:
[//msdn.microsoft.com/en-us/data/gg192997.aspx](http://msdn.microsoft.com/en-us/data/gg192997.aspx)
我将密码修改为管理员，但是，当我尝试以任何方式访问该网站时浏览器，它总是提示输入用户名和密码，但从**不**接受。*如果*我将代码更改为在

```
public static bool Authenticate(HttpContext context) 
```

它不会改变任何东西。我还应该设置什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:19:23.637

确保禁用 IIS（针对特定站点）中的所有身份验证设置，并且仅启用基本身份验证。浏览器应该请求一个在有效时总是可以接受的用户和密码。有时重新启动站点及其相关应用程序池也可能会有所帮助（尤其是在旧版本的 Windows 中）。

请记住，基本身份验证是不安全的，因为它通过 base64 编码的请求标头传递凭据。一个好主意是使用 ssl - 您可以从startssl.com 获得一个免费的用于实时站点，或者从iis 创建一个自签名的用于开发人员。

# css - 使用 CSS 将 div 水平居中

> ID：15306056
> 
> 赞同：-1
> 
> 时间：2013-03-09T01:19:22.417
> 
> 标签：css

所以，在我的网站上，我试图在这里[http://prntscr.com/vk3cv](http://prntscr.com/vk3cv)做这个。如您所见，文本没有居中。我的 HTML [http://prntscr.com/vk3iy](http://prntscr.com/vk3iy)中有以下代码，我的 CSS prntscr.com/vk3ml 中有此代码。

但是，它似乎并没有把它放在中心。我有一个朋友帮我解决了那个代码。我之前的代码只是左对齐。我想知道如何使它完全居中？

在我之前的代码中，html 已从更改`DIV class="row"` 为`DIV class="row feature"`

在 CSS 中我没有`feature`添加那个东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:33:26.177

**基本选项**

1.  给容器一个固定的宽度和`margin:0 auto;`
2.  将容器放入 HTML 表格单元格（或使用 CSS 表格的类似嵌套 div 集）并给出表格单元格`text-align:center;`
3.  使用 JavaScript 或 jQuery

如果容器具有可变宽度，那么您将需要 #2 或 #3。

如果您决定使用#2，在这种情况下使用 CSS 表格在语义上更正确（数据网格使用 HTML 表格，布局使用 CSS 表格）（请参阅[此处的最后几段](https://stackoverflow.com/a/15206968/1306809)）。两者都是合理的选择。但如果您需要支持 IE7 或更早版本，则必须使用 HTML 表格。

**自动边距**

```
.feature {
    width: 600px;
    margin: 0 auto;
}
.feature .3u {
    width: 200px;
} 
```

**CSS 表**

```
<div class="table">
    <div class="row">
        <div class="cell">Content goes here</div>
    </div>
</div>
...
.table   {display: table;}
.row     {display: table-row;}
.cell    {display: table-cell;   text-align: center;}
.feature {display: inline-block; text-align: left;    width: auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:22:56.737

您可以`text-align: center;`在用于保存文本的 div 中的样式表中使用，以使文本居中。

# coded-ui-tests - 如何在编码的 UI 测试中单击隐藏元素？

> ID：15306059
> 
> 赞同：2
> 
> 时间：2013-03-09T01:19:36.367
> 
> 标签：coded-ui-tests

我创建了一个很长的编码 UI 测试。其中一个表单元素实际上是一个 javascript 小部件，它使用 jQuery 和引导程序来更改隐藏表单值的值。（基本上我在模仿一个具有三个级别的 optgroup）。

测试记录很好，但是当我重播测试时，它会到达 javascript 小部件并抛出错误

```
Cannot perform 'Click'on the hidden control.  Additional Details:
TechnologyNmae: 'Web'
ControlType: 'HyperLink'
TagName: 'A'
ID: ''
Name: ''
Target: ''
InnerText: 'Atlanta' 
```

我怎样才能让测试浏览器点击正确的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:33:12.443

为控件的内部文本而不是完整的控件创建不同的方法和断言。在我的情况下，使用按钮上传文件时出现“**无法在隐藏控件上执行'单击'”的问题。**所以我通过将断言集中在内部文本而不是控件上来改变我的断言。它在我的情况下有效。

这是创建断言后生成的代码：

```
public void AssertBrowser()
        {
            #region Variable Declarations
            WinEdit uIItemEdit = this.UIMozillaFirefoxWindow.UIItemCell.UIItemEdit;
            #endregion

            // Verify that the 'Name' property of '...' text box equals '...'
            Assert.AreEqual(this.AssertBrowserExpectedValues.UIItemEditName, uIItemEdit.Name);
        } 
```

# ios - 我想将用户数据保存在 uitextfields 列表中

> ID：15306060
> 
> 赞同：0
> 
> 时间：2013-03-09T01:19:47.430
> 
> 标签：ios, objective-c

我想保存用户在 UITextFields 中输入的所有数据，以便在应用程序停止时保存，并在用户返回时重新加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:23:55.810

从每个 UITextField 中提取字符串并将其存储在字符串或类中。

然后你有多种选择来保存它，比如：

[列表](https://stackoverflow.com/questions/905542/how-to-write-data-in-plist)。

[核心数据](https://stackoverflow.com/questions/3902958/good-core-data-tutorial)。

[普通文件](https://stackoverflow.com/questions/2933255/saving-files-in-cocoa)。

# php - Prestashop Language.php 出现阻止访问商店和管理员

> ID：15306062
> 
> 赞同：0
> 
> 时间：2013-03-09T01:20:02.817
> 
> 标签：php, prestashop

我完全无法解决这些问题，迫切需要帮助。

我正要开始在一个新的（文件夹）位置将我的 prestahsop 1.4.4 升级到 1.5。我安装了新的 prestashop 没有任何问题。它与我现有的 prestashop 位于不同的文件夹中。

但自从安装后，我无法访问我现有的 prestashop，无论是管理员还是商店。在那之前我没有任何问题。

这些是错误报告：

店面

```
Warning: Invalid argument supplied for foreach() in /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php on line 554

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Cookie.php on line 300

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Cookie.php on line 300

Fatal error: Cannot access empty property in /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/FrontController.php on line 228 
```

行政

```
Warning: Invalid argument supplied for foreach() in /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php on line 554

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/admin0811/header.inc.php on line 29

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/admin0811/header.inc.php on line 30

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/admin0811/header.inc.php on line 31

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/admin0811/header.inc.php on line 32

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Cookie.php on line 300

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Cookie.php on line 300

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in/hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Cookie.php on line 300

Warning: Cannot modify header information - headers already sent by (output started at /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Language.php:554) in /hermes/bosweb25a/b56/nf.logorythm/public_html/logostore/classes/Tools.phpon line 104[/quote] 
```

Language.php l554 的代码是

```
 foreach ($result AS $row) 
```

这是下`/** Load all languages in memory for caching`

FrontController.php l228 的代码是

```
if ($cart->{Configuration::get('PS_TAX_ADDRESS_TYPE')}) 
```

Tools.php l104 的代码是

```
header('Location: '.$url); 
```

这是下`/** redirect to another admin page`

Cookie.php l300 的代码是

```
return setcookie($this->_name, $content, $time, $this->_path, $this->_domain, 0, true); 
```

我希望这些信息足以让有人指出我正确的方向。我需要紧急援助。

非常感谢，

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:07:51.563

这些问题可能有几个原因。能否请您回答以下问题：

1) 在安装 Prestashop 1.5 时，您是否为它创建了一个新数据库，或者您使用了与旧 prestashop 1.4 相同的数据库？

2) 你的 Prestashop 1.5 安装的站点是否运行良好？

3) 你读过 [http://doc.prestashop.com/display/PS15/Updating+PrestaShop](http://doc.prestashop.com/display/PS15/Updating+PrestaShop)和[http://doc.prestashop.com/display/PS14/Updating+PrestaShop](http://doc.prestashop.com/display/PS14/Updating+PrestaShop)吗？

请在您的站点上启用错误，然后就可以看到确切的问题。

谢谢

# javascript - 取消选择选择列表

> ID：15306064
> 
> 赞同：0
> 
> 时间：2013-03-09T01:20:43.907
> 
> 标签：javascript, jquery, html

我有两个选择列表，一个是团队列表，另一个是球员列表。球员名单根据球队的选择而变化。如果重新选择团队列表中的团队，我希望取消选择在球员列表中选择的任何球员。我有：

```
 $("#playerList select option").prop("selected", false); 
```

这会取消选择播放器，但只有当我将鼠标悬停在列表上时才会这样做。我如何让这种变化立即出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:46:50.393

尝试这个：

```
$( '#TeamList' ).on( 'change', function ()
                {

                    if ( condition1==true )
                    {

                        $( "#playerList option[value='1']" ).remove();
                        $( "#playerList option[value='2']" ).remove();

    //.................... and so on (Remove the items you dont need and add new items)
                        $( "#playerList" ).append( '<option value="3" style="background-color:#A9F5A9">Player new1</option>' );
                        $( "#playerList " ).append( '<option value="4" style="background-color:#A9F5A9">Player new2</option>' );

                    }
                    else
                    {

                        $( "#playerList option[value='3']" ).remove(); //Remove the items
                        $( "#playerList option[value='4']" ).remove();

                        $( "#playerList " ).append( '<option value="1">Player1</option>' );
                        $( "#playerList " ).append( '<option value="2">player2</option>' );

                    }
                } ); 
```

# iphone - 使用 GPUImage 框架模糊图像

> ID：15306073
> 
> 赞同：0
> 
> 时间：2013-03-09T01:21:44.470
> 
> 标签：iphone, objective-c

有人想了解一下用于模糊图像的 GPUImage 框架是如何工作的吗？

# jquery - 如何将背景裁剪为透明图像的形状？

> ID：15306084
> 
> 赞同：0
> 
> 时间：2013-03-09T01:22:48.543
> 
> 标签：jquery, html, css, wordpress

你可以在这里看到我想要做什么...... [http://branchclothing.com/test/](http://branchclothing.com/test/)

我就是无法让口袋面料适合不同口袋的形状？？是否有捷径可寻？抱歉，如果这很明显，但我以前从未使用过 HTML，我要感谢 Codecademy 让我走到这一步。我在 wordpress 上使用 Html、CSS 和 jQuery。

我有口袋形状作为 div，除了尖和边缘的底部之外，它们可以完美地工作。

提前致谢！

# android - 在 Android 中的 VideoView 上显示和隐藏播放按钮

> ID：15306087
> 
> 赞同：13
> 
> 时间：2013-03-09T01:23:27.863
> 
> 标签：android, android-videoview

我希望能够显示一个按钮来开始一个视频，在视频将播放的同一视图内居中（使用 VideoView）。我还希望按钮在单击后消失，因为我正在使用 MediaController 类在视频开始后执行暂停、倒带、快进操作。

我该怎么做呢？

这是我到目前为止的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/LinearLayout1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

<FrameLayout
  android:id="@+id/video_frame"
  android:layout_width="fill_parent"
  android:layout_height="480px"
  android:background="#000"
  >

  <VideoView
    android:id="@+id/video_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />

</FrameLayout> 
```

我尝试以编程方式将 ImageButton 添加到 FrameLayout，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T01:36:32.597

好的，这就是我解决这个问题的方法。布局文件非常简单。只需在 VideoView 元素**后**添加一个 ImageButton ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/LinearLayout1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

<FrameLayout
  android:id="@+id/video_frame"
  android:layout_width="fill_parent"
  android:layout_height="480px"
  android:background="#000"
  >

  <VideoView
    android:id="@+id/video_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />

  <ImageButton
    android:id="@+id/play_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal"
    android:src="@drawable/ic_launcher"
    />

</FrameLayout> 
```

FrameLayout 视图元素按照您在布局中定义它们的顺序将其子元素层叠在一起。因此，布局中添加的最后一个元素被绘制在顶部。注意 ImageButton 有这个属性：

```
android:layout_gravity="center_vertical|center_horizontal" 
```

此属性使 ImageButton 在 FrameLayout 中居中。

下一个技巧是让 ImageButton 在单击后消失。使用 ImageButton 上的 setVisibility() 方法来执行此操作：

```
 // Setup a play button to start the video
    mPlayButton = (ImageButton) findViewById(R.id.play_button);
    mPlayButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (mPlayer.isPlaying()) {
                resetPlayer();
            } else {
                playVideo(videoUrl, mVideoView.getHolder());
                // show the media controls
                mController.show();
                // hide button once playback starts
                mPlayButton.setVisibility(View.GONE);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T17:21:41.567

有一个鲜为人知的功能`FrameLayout`称为**Foreground Drawable**。您可以指定将在所有 FrameLayout 子**项之上**呈现的可绘制对象。所以：

```
mFrameLayout.setForegroundDrawable(mPlayDrawable); 
```

会成功的，你的布局会更有效率（更少的视图）。

您可以使用 Gravity 常量将可绘制对象与

```
mFrameLayout.setForegroundGravity(Gravity.XXXX) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T01:30:53.093

[尝试制作 FrameLayout Clickable](http://developer.android.com/reference/android/view/View.html#attr_android:clickable)，而不是使用按钮。

或者，您可以在 FrameLayout 下方放置一个 Button，然后在 onClick 事件处理程序中，将 View 的可见性设置为 GONE。

编辑：或尝试这样的事情：[https ://stackoverflow.com/a/7511535/826731](https://stackoverflow.com/a/7511535/826731)

# opencv - 如何找到移动物体的坐标来绘制矩形

> ID：15306088
> 
> 赞同：1
> 
> 时间：2013-03-09T01:23:29.260
> 
> 标签：opencv

有谁知道如何定位移动物体的坐标？我在网上找到了一些关于使用光流跟踪物体的例子，但我只在移动物体上得到了一些跟踪点。我可以在每个移动对象周围画一个矩形吗？有没有办法获取每个移动物体的坐标？提前感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:56:17.233

将矩形拟合到通过光流获得的点，您可以将拟合矩形的中心视为对整个移动体的 2D 轨迹的公平估计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T15:01:45.507

您可以使用 Moments 运算符

首先计算轮廓大小....然后添加这个代码块

```
Moments moment = moments((cv::Mat)contours[index]);
           area = moment.m00;//m00 gives the area
                       x = moment.m10/area;//gives the x coordinate
                    y = moment.m01/area;  //gives y coordiante 
```

其中轮廓是 findcontours() 的输出，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:41:20.987

仅从对象上的几个点很难判断对象的坐标。您可以使用时刻（[这里是一个教程](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/moments/moments.html)）来获得一个非常稳定的点来描述您的对象在哪里。

~~您还可以做一些额外的工作，例如使用跟踪点进行分割以获取跟踪对象的轮廓，这应该更容易找到它的质心。~~过火了。

还有一个被调用的跟踪方法[`CAMSHIFT`](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#camshift)，它返回一个包围被跟踪对象的矩形。

如果您确切地知道您在跟踪什么，并且可以确保跟踪对象上的一些已知点，并且您能够识别它们，那么您可以使用 POSIT 来确定对象的 3D 坐标和方向。看一眼[ArUco](http://sourceforge.net/projects/aruco/)就知道我在说什么。

要从以前的方法中获取 3D 位置，您可以使用立体视觉，并使用两个相机的质心来计算坐标。

# c - 无法使用 GDB 进入 string.h 函数

> ID：15306090
> 
> 赞同：13
> 
> 时间：2013-03-09T01:23:43.543
> 
> 标签：c, gdb

无法进入`string.h`GDB 7.5。这是一个简单的示例程序：

**源代码：**

```
#include <stdio.h>
#include <string.h>

int main() {
    char str1[20];
    strcpy(str1, "STEP INTO ME\n");
    printf(str1);
} 
```

**编译：** `~$ gcc -g foo.c`

**调用：** `~$ gdb -q ./a.out`

**广发银行：**

```
(gdb) break 5
Breakpoint 1 at 0x8048471: file foo.c, line 6.
(gdb) break strcpy
Function "strcpy" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 2 (strcpy) pending.
(gdb) run 
Starting program: /home/user/a.out 

Breakpoint 1, main () at foo.c:6
6               strcpy(str_a, "Hello, world!\n");
(gdb) step
7               printf(str_a); 
```

此时我不应该在字符串库中吗？相反，它继续到 printf()。

* * *

**编辑：**

斯科特的建议“奏效”了，但不是以预期的方式。

```
Breakpoint 1, main () at foo.c:6
6               strcpy(str_a, "Hello, world!\n");
(gdb) i r $eip
eip            0x80484a1        0x80484a1 <main+21>
(gdb) step

Breakpoint 2, __strcpy_ssse3 () at ../sysdeps/i386/i686/multiarch/strcpy-ssse3.S:78
78      ../sysdeps/i386/i686/multiarch/strcpy-ssse3.S: No such file or directory.
(gdb) i r $eip
eip            0xb7e9c820       0xb7e9c820 <__strcpy_ssse3> 
```

我对`78`...中的目录感到惊讶，预期类似：`/lib/.../cmov/libc.so.6`. 并声称没有这样的文件或目录。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-09T01:31:22.517

重新编译你的代码，`gcc -fno-builtin -g foo.c`gdb`step`命令就可以工作了。（参见[-fno-builtin 文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/C-Dialect-Options.html#index-fno_002dbuiltin-107)）。否则`strcpy()`，`memcpy()`调用通常会被转换为开放编码的数据移动指令，例如在 x86-64 上：

```
4   int main() {
   0x000000000040052c <+0>: push   %rbp
   0x000000000040052d <+1>: mov    %rsp,%rbp
   0x0000000000400530 <+4>: sub    $0x20,%rsp

5       char str1[20];
6       strcpy(str1, "STEP INTO ME\n");
   0x0000000000400534 <+8>: lea    -0x20(%rbp),%rax
   0x0000000000400538 <+12>:    movl   $0x50455453,(%rax)
   0x000000000040053e <+18>:    movl   $0x544e4920,0x4(%rax)
   0x0000000000400545 <+25>:    movl   $0x454d204f,0x8(%rax)
   0x000000000040054c <+32>:    movw   $0xa,0xc(%rax)

7       printf(str1);
   0x0000000000400552 <+38>:    lea    -0x20(%rbp),%rax
   0x0000000000400556 <+42>:    mov    %rax,%rdi
   0x0000000000400559 <+45>:    mov    $0x0,%eax
   0x000000000040055e <+50>:    callq  0x400410 <printf@plt>

8   }
   0x0000000000400563 <+55>:    leaveq 
   0x0000000000400564 <+56>:    retq 
```

您可以看到`strpcy()`调用被编译成多个**MOV**指令。

`gcc -fno-builtin`将相同的程序编译成：

```
4   int main() {
   0x000000000040057c <+0>: push   %rbp
   0x000000000040057d <+1>: mov    %rsp,%rbp
   0x0000000000400580 <+4>: sub    $0x20,%rsp

5       char str1[20];
6       strcpy(str1, "STEP INTO ME\n");
   0x0000000000400584 <+8>: lea    -0x20(%rbp),%rax
   0x0000000000400588 <+12>:    mov    $0x400660,%esi
   0x000000000040058d <+17>:    mov    %rax,%rdi
   0x0000000000400590 <+20>:    callq  0x400450 <strcpy@plt>

7       printf(str1);
   0x0000000000400595 <+25>:    lea    -0x20(%rbp),%rax
   0x0000000000400599 <+29>:    mov    %rax,%rdi
   0x000000000040059c <+32>:    mov    $0x0,%eax
   0x00000000004005a1 <+37>:    callq  0x400460 <printf@plt>

8   }
   0x00000000004005a6 <+42>:    leaveq 
   0x00000000004005a7 <+43>:    retq 
```

你可以看到对`<strcpy@plt>`.

假设您想深入`strcpy()`研究其实现，您需要安装 libc.so 的调试信息。不幸的是，获取调试信息的方式在 Linux 发行版之间有所不同。在 Fedora 上，它就像`debuginfo-install glibc`. 它在 Ubuntu 和 Debian 上需要更多步骤。此[RPM DPKG Rosetta Stone](http://itrs.tw/wiki/RPM_DPKG_Rosetta_Stone)页面包含指向 Fedora、Ubuntu 和 Debian 说明的链接（搜索**debuginfo**）。

由于您使用的是 Ubuntu 12.10，并且实际上想查看`strcpy()`汇编源代码：

```
$ sudo apt-get install libc6-dbg
$ sudo apt-get source libc6-dev
$ gdb ./a.out
(gdb) directory eglibc-2.15/sysdeps
Source directories searched: /home/scottt/eglibc-2.15/sysdeps:$cdir:$cwd
(gdb) break strcpy
Breakpoint 1 at 0x400450
(gdb) run
Starting program: /home/scottt/a.out 

Breakpoint 1, __strcpy_sse2 () at ../sysdeps/x86_64/multiarch/../strcpy.S:32
32      movq %rsi, %rcx     /* Source register. */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T01:28:10.117

您试图为字符串库中定义的函数设置断点，通常是`standard C library - libc.so`

正如`gdb`通知你的那样：

```
(gdb) break strcpy
Function "strcpy" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 2 (strcpy) pending. 
```

该库尚未加载。

但真正的问题是，即使加载了库，如果库 ie`libc.so`中没有调试符号，您将无法使用`gdb`.

您可以启用详细模式以查看哪些符号`gdb`能够加载：

```
(gdb) b main
Breakpoint 1 at 0x400914: file test.cpp, line 7.
(gdb) set verbose on
(gdb) run
Starting program: /home/agururaghave/.scratch/gdb-test/test 
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from system-supplied DSO at 0x7ffff7ffb000...(no debugging symbols found)...done.
Reading symbols from /usr/lib64/libstdc++.so.6...(no debugging symbols found)...done.
Registering libstdc++-v6 pretty-printer for /usr/lib64/libstdc++.so.6 ...
Loaded symbols for /usr/lib64/libstdc++.so.6
Reading symbols from /lib64/libm.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib64/libm.so.6
Reading symbols from /lib64/libgcc_s.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib64/libgcc_s.so.1
Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib64/libc.so.6

Breakpoint 1, main () at test.cpp:7
7       bool result = myObj1 < myObj2; 
```

例如，这一行告诉您它是否能够获取 libc.so 的符号：

```
Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done. 
```

然后，您可以使用以下命令找出调试符号的来源`show debug-file-directory`：

```
(gdb) show debug-file-directory 
The directory where separate debug symbols are searched for is "/usr/lib/debug". 
```

如您所见`/usr/lib/debug`，此处不包含带有调试符号的完整 .so。相反，它只有调试信息，没有程序用于执行的实际 libc.so 的任何`.text`或部分。`.data`

为库安装调试信息的解决方案将是特定于发行版的。

我认为该软件包是`libc6-dbg`在基于 debian 的发行版上调用的。在我的 openSUSE 机器上，它似乎被称为`glibc-debuginfo`

顺便说一句，+1 on`scottt`的建议使用`-fno-builtin`，以便 gcc 不会将其内置方法用于`strcpy`定义为 C 标准一部分的函数和其他标准函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T01:26:21.177

您的 C 库可能没有任何符号。试试看`stepi`，但要准备好只看汇编说明。

# php - 空输入类型未在 html 中发布

> ID：15306093
> 
> 赞同：0
> 
> 时间：2013-03-09T01:23:56.240
> 
> 标签：php, html, post, input

我创建了一个 PHP 函数，它将为您在数据库中的任何表创建一个表单。此功能允许您指定表格的名称和您想要在 html 表单中的所有列的列表。如果用户在文本输入中输入内容，一切都很好。如果他们不这样做，那么在尝试检索列名时会发生奇怪的事情。请看下面的功能...

```
function generateSubmissionFromTable($db, $tablename, $rowstoinclude,$action)
    {
        $query = 'SHOW COLUMNS from '.$tablename;   
        $colsresult = mysql_query($query,$db);

        $table = array();
        while($row = mysql_fetch_array($colsresult))
        {
            array_push($table,$row[0]);
        }

        $finalcolumns = array();
        foreach($table as $row)
        {
            foreach($rowstoinclude as $inc)
            {
                if($row == $inc)
                {
                    array_push($finalcolumns,$row);
                }
            }
        }
        echo '<form name="loginy" method="post" action="'.$action.'">';
        foreach($finalcolumns as $column)
        {
            echo 'Please enter the '.$column.'<br/>';
            echo '<input type=text name=column['.$column.'] value="blah"/><br/>';
        }
        echo '<input type="hidden" name="tablename" value="'.$tablename.'" />';         
        echo '<button type="button" size="4" style="font-size:35px;" onClick="document.loginy.submit()">Submit</button>';
        echo '</form>';
    } 
```

现在，奇怪的部分来了……我有另一个函数，它将根据自动生成的表单生成查询语句。

```
function submitDataToTable($post)
    {
        $query = 'INSERT INTO '.$post['tablename'].'(';
        $buf = "";
        while($col = current($post['column']))
        {
            $query = $query.$buf.key($post['column']);
            $buf=",";
            next($post['column']);
        }

        $buf = "";
        $query = $query.') VALUES (';
        foreach($post['column'] as $val)
        {
            $query = $query.$buf.$val;
            $buf = ",";
        }
        $query = $query.')';
        echo 'QUERY='.$query;
    } 
```

例如，现在我有一个表，我想输入 3 列（名称、链接、描述），我填写顶部 2 而不是底部，查询生成如下......

```
QUERY=INSERT INTO LinksWebsites(name,link) VALUES (blah,blah,) 
```

如您所见，查询缺少列（名称，链接，描述），但是如果您看一下帖子，那会很奇怪...

```
POST =Array ( [column] => Array ( [name] => blah [link] => blah [description] => ) [tablename] => LinksWebsites ) 
```

它显示了所有的键，但是我提取键的 PHP 方法没有显示所有的键！（可能与 current($array) 和 key($array) 调用有关？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T08:39:25.073

**尝试在您的html**中放置一个 java 脚本，您将在其中放置文本输入不能为空的 php 函数，然后再尝试提交它。

```
 <script>
    function validateForm()
    {
    if (inputbox==null || inputbox=="")
    {alert("Input should not be empty");
    return false; 
    }
    }
    </script> 
```

只需`onsubmit="return validateForm()"`在表单标签中包含。

# php - [ function.implode ]：无效参数错误？

> ID：15306094
> 
> 赞同：0
> 
> 时间：2013-03-09T01:24:01.473
> 
> 标签：php, implode

我收到以下错误，

```
[08-Mar-2013 22:10:20] PHP Warning: implode() 
[<a href='function.implode'>function.implode</a>]: 
Invalid arguments passed in /home5/palekico/public_html/_import/functions.php 
on line 235 
```

这是行：

```
<p class="bline"><strong>Cast: </strong> <?= implode("<br>", $p['cast']); ?></p> 
```

知道为什么吗？

# ios - 用户到达最后一页后，如何将新页面添加到 UIPageViewController？

> ID：15306096
> 
> 赞同：8
> 
> 时间：2013-03-09T01:24:25.303
> 
> 标签：ios, uipageviewcontroller

我有一个[UIPageViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)，其中包含从通过网络获取的数据实例化的视图控制器。当用户进行分页并在几页内结束时，我启动了一个新的网络操作并将生成的新视图控制器放在我`UIPageViewControllerDataSource`的可变视图控制器数组的末尾。一般来说，这一切都很好。

但是如果网络很慢（或者用户很快），有可能在网络操作完成之前到达最后一页。由于[pageViewController:viewControllerAfterViewController:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerDataSourceProtocolRef/UIPageViewControllerDataSource.html)在用户到达最后一页时被调用，所以它已经返回`nil`（“表示没有下一个视图控制器”）。

是否有强制 UIPageViewController`pageViewController:viewControllerAfterViewController:`再次调用的好方法（这样当网络操作完成并且现在有新页面时，我可以强制此调用以便用户可以分页到新页面）？或者是否有解决方法（可能阻止用户分页到最后一页，但仍显示弹跳动画）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:39:29.123

请参见此处：[刷新 UIPageViewController - 重新排序页面并添加新页面](https://stackoverflow.com/questions/15325891/refresh-uipageviewcontroller-reorder-pages-and-add-new-pages/15325927?noredirect=1#15325927)

当您从网络取回数据时，再次调用`setViewControllers: direction: animated: completion:`并将当前视图设置为当前视图。这迫使它重新调用`pageViewController:viewControllerAfterViewController:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:10:02.400

ssloan 的回答是关键的一部分，但在我的情况下，仅仅调用`setViewControllers:direction:animated:completion:`网络操作完成块是不够的（由于某些边缘情况）。

`pageViewController:viewControllerAfterViewController:`我的解决方案是存储返回的最新视图控制器`nil`（我称之为`endPage`）并创建一个方法......

```
- (void)fixAndResetEndPage {
    if (self.endPage && self.endPage == self.currentPage) {
        [self.pageController setViewControllers:@[self.currentPage] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
        self.endPage = nil;
    }
} 
```

...每当我的内容控制器的 NSMutableArray 发生突变（例如，网络操作完成）时，我都会调用它，并且`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`无论何时完成都是`YES`.

# json - 这个 JSON 是什么时间格式

> ID：15306097
> 
> 赞同：-1
> 
> 时间：2013-03-09T01:24:27.280
> 
> 标签：json

我正在查看一个带有日期的 JSON 输入的示例，如下所示：

```
1136005200000 
```

它对应于日期

```
12/30/05 
```

这是什么时间格式？我对此比较陌生，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T01:28:10.190

Unix 时间以毫秒为单位，即[`Date.getTime()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)返回什么。

# c# - 如何从另一个类（不是继承）中获取价值

> ID：15306101
> 
> 赞同：0
> 
> 时间：2013-03-09T01:24:37.323
> 
> 标签：c#, arraylist

我试图从另一个班级获得一些东西，但它不起作用。

```
namespace grafiskdel_1_Adam_Erlandsson {
public partial class Form1 : Form
{
    public List<Arbetare> array;       

    public Form1()
    {
        InitializeComponent();
        this.array = new List<Arbetare>();
    }
} 
```

这是目前我的“Arbetare”课程的代码：

```
namespace grafiskdel_1_Adam_Erlandsson
{
   public class Arbetare : Person
    {

    }
} 
```

这是我的 Form1 类的一些代码，我试图从“Arbetare”类中获取一些东西，但我无法达到它。我的程序员老师告诉我我可以做到这一点，或者我做错了什么？

我正在尝试从“Arbetare”类中获取一个变量以放入我的`List<>`. 如果您有任何问题，请问我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:32:08.083

我想您是在问如何创建一个新实例`Arbetare`并将其添加到列表中。

```
public Form1()
{
    InitializeComponent();
    this.array = new List<Arbetare>();
    Arbetare v = new Arbetare();
    this.array.Add(v);

    Arbetrare v1 = this.array[0];

    // this will be true as v and v1 both point to the same instance
    System.Diagnostics.Debug.Assert(object.ReferenceEquals(v, v1));  
}

void SomeOtherMethod()
{
    // you can now access any of the items in your array and any of their properties
    // assuming of course some other code hasn't removed them 
    Arbetrare v1 = this.array[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:33:16.530

我认为这是范围界定的问题，但我不是 C# 大师。

确保您将要访问的变量设置为公共变量。

也许这可以帮助你？

[http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx)

# zepto - 在zepto中获得下一个兄弟姐妹

> ID：15306104
> 
> 赞同：1
> 
> 时间：2013-03-09T01:25:00.570
> 
> 标签：zepto, sizzle

通常这不会有问题，但这次我不控制 dom。反正

```
<dt>foo</dt>
<dd>bar</dd>
<dd>bar
    <div id="myElem">baz</div>
</dd>
<dd>bar</dd>
<dd>bar</dd>
<dd class="moo">bar</dd> <-- I want to get this one
<dd>bar</dd>
<dd>bar</dd>
<dd class="moo">bar</dd>
<dd>bar</dd>
<dd>bar</dd> 
```

这是我尝试过的

```
$('#myElem').closest('dd').next('.moo').something();
$('#myElem').closest('dd').nextUntil('.moo').something(); 
```

然而，这些都没有获得班级的下一个兄弟姐妹。

任何人都知道如何遍历这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T01:26:49.303

尝试

```
$('#myElem').closest('dd').nextAll('.moo:first').something(); 
```

或者

```
$('#myElem').closest('dd').nextUntil('.moo').next().something(); 
```

* * *

我不知道 zepto，但从快速检查文档来看，您似乎无法使用简单的链来完成此操作。尝试

```
var $dd = $('#myElem').closest('dd');
var $moo = $dd.next();
while (!$moo.is('.moo')){
    $moo = $moo.next();
    if ($moo.length == 0) break;
} 
```

[**演示**](http://jsfiddle.net/DYP3Z/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T20:44:36.967

您可以通过创建一个简单的新方法来完成：

```
/**
* Get the next element of a particular class, relative to a different element.
*/ 
var nextOfClass = function(relativeTo, className) {
    var el = relativeTo, nextEl;

    // Leading period will confuse Zepto. 
    if (className[0] === '.') className = className.slice(1); 

    while (el.next()) {

        // If target element is found, stop
        if (el.hasClass(className)) return el; 

        nextEl = el.next(); 
        if (nextEl.length === 0) {
            // No more siblings. Go up in DOM and restart loop to check parent
            el = el.parent(); 
            continue; 
        }

        el = nextEl;  

         // End of doc. Give up. 
        if (el.parent().length === 0) return false;
    }
}; 
```

然后，您可以简单地使用以下方法：

```
var moo = nextOfClass($("#myElem"), '.moo'); 
```

# c# - 文件无法使用，因为另一个进程正在使用它 - 找不到打开的流

> ID：15306107
> 
> 赞同：0
> 
> 时间：2013-03-09T01:25:29.723
> 
> 标签：c#, asp.net, visual-studio-2012

我正在使用 StreamWriter 写入文件。我正在使用“使用”，因此它应该自动关闭，但是当我尝试保存（写入文件）时，它给了我“无法访问文件，因为另一个进程正在使用它”错误。我似乎无法弄清楚它在哪里或为什么给我这个错误。这是我的代码

```
[WebMethod]
    public static bool saveToCSV(string[] valueArray)
    {
        bool saveOK = false;

        try
        {
            string filepath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);

            using (StreamWriter sw = new StreamWriter(filepath + "\\spreadsheet.csv", false))
            {

                foreach (var i in valueArray)
                {
                    if (i.ToString() == "\n")
                    {
                        sw.Write(sw.NewLine);
                    }
                    else
                    {
                        {
                            if (i.ToString() == "")
                            {
                                sw.Write(" ");
                                sw.Write(",");
                            }
                            else
                            {
                                sw.Write(i.ToString());
                                sw.Write(",");
                            }
                        }
                    }
                }
                sw.Flush();
            }//close using

            saveOK = true;
        }
        catch (Exception ex)
        {
            saveOK = false;
        }

        return saveOK;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:32:53.363

该代码看起来不错。

您还在哪里处理文件？所有其他文件 IO 操作是否都包含在一个`using`块中？还有哪些其他应用程序可能会触及该文件？

如果您在其他地方打开文件并且没有处理流，或者如果另一个应用程序打开了文件，您将收到此异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:55:28.003

这里可能发生的是您的`saveToCSV`方法同时被调用两次。本质上是两个客户端同时调用 Web 服务。这可能导致第一次调用打开文件以进行写入，因此第二次调用被拒绝访问。

为了防止这种情况，您应该使用锁来规范对文件的访问

```
private static object _key = new object();

[WebMethod]
public static bool saveToCSV(string[] valueArray)
{
   ...
   lock (_key) { 
    using (StreamWriter sw = new StreamWriter(filePath + "\\spreadsheet.csv")) {
      ...
    }
   }
} 
```

现在，如果同时发生多个客户端调用，他们将只尝试一次访问一个文件

# html - 如何使用 CSS 在项目之间设置带有项目符号的水平列表样式？

> ID：15306108
> 
> 赞同：45
> 
> 时间：2013-03-09T01:25:51.613
> 
> 标签：html, css

我不确定如何构建一个如下所示的水平列表：

![项目之间带有项目符号的居中列表](../Images/261dd6206f9b24eec563e3a3028f9226.png)

以下是规则：

*   列表中有无限数量的项目。
*   每个项目都应该在一行上，而不是换行到第二行。
*   如果有空间可以容纳多个项目，则可以在一行上
*   如果多个项目在一行上，它们应该用分隔符分隔
*   分隔线看起来像子弹，但它可能是图像
*   需要它在现代浏览器以及 IE8+ 中工作

我不知道该怎么做是让项目符号只出现在项目之间，而不是在每行项目之前或之后。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-07-11T20:55:32.793

对于那些不必担心 IE8 的人来说，这很简单：

```
ul li { list-style: none; display: inline; }
ul li:after { content: " \00b7"; }
ul li:last-child:after { content: none; } 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-10-20T18:54:23.533

此解决方案符合 OP 的所有要求，除了 IE8 兼容性（即 2013 年）。

简单的标记。没有 JavaScript。不`:last-child`

[链接到 CodePen](https://codepen.io/TomRobinson/pen/WGLbbz)

```
<ul>
    <li><a>Profile Image</a></li>
    <li><a>Name</a></li>
    <li><a>Activity Information</a></li>
    <li><a>Distance</a></li>
    <li><a>Pace</a></li>
    <li><a>Points Earned</a></li>
</ul>

ul { display:inline-block; padding:0; text-align:center }
li { display:inline }
li a { white-space:nowrap }
li:after { content:" "; letter-spacing:1em; background:center center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwAAADsABataJCQAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xMkMEa+wAAAAnSURBVBhXY/Dz89MA4sNA/B9Ka4AEYQIwfBgkiCwAxjhVopnppwEApxQqhnyQ+VkAAAAASUVORK5CYII=); } 
```

[![在此处输入图像描述](../Images/c7be1e8bb25e0c7b72383edcf8f3dc08.png)](https://i.stack.imgur.com/QXboY.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-18T00:55:58.580

对于[几乎所有浏览器](http://caniuse.com/#feat=css-sel3)，您都可以使用 CSS3 选择器`last-child`而不是 JavaScript：

```
ul li { display: inline; white-space: pre; }
ul li:after { content: "  \00b7  "; }
ul li:last-child:after { content: ""; } 
```

停止在列表项内`white-space: pre`换行（因为通常您希望它在列表项*之间*换行），并且是一种允许您通过在第二行添加空格来增加列表项之间空间的技巧。

`u00b7`⋅ ( `MIDDLE DOT`) 是用于插播的标准 unicode 字符，但您也可以使用`u2022`• ( `BULLET`)、   `u2b24`⬤ ( `BLACK LARGE CIRCLE`)、   `U+2043`⁃ ( `HYPHEN BULLET`) 或您选择的任何其他 unicode 字符。

请注意，并非所有系统都支持某些字符。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-25T16:00:25.300

这是一个进一步改进的版本。我一直在某些页面宽度上遇到不一致的情况，其中两个项目符号会丢失，而不仅仅是最后一个。IE

链接1·链接2·链接3链接4

链接5·链接6

我认为问题在于如果页面宽度恰到好处，删除最后一个项目符号分隔符本身可能会影响文本流。新脚本通过添加和删除文字换行符来锁定原始文本流。

每次调整屏幕大小时，我都会运行相同的脚本，这样您就不会遇到尴尬的换行符。

```
<style>
ul { width: 700px; text-align : center }
ul li { display: inline; white-space: nowrap; }
ul li:after { content: " \00b7"; }
ul li.nobullet:after { content: none; }
</style>

<body onresize="processBullets()" onload="processBullets()">
<ul>
    <li><a href="http://google.com">Harvard Medical School</a></li>
    <li><a href="http://google.com">Harvard College</a></li>
    <li><a href="http://google.com">Harvard Medical School</a></li>
    <li><a href="http://google.com">Harvard College</a></li>
    <li><a href="http://google.com">Harvard Medical School</a></li>
    <li><a href="http://google.com">Harvard College</a></li>
    <li><a href="http://google.com">Harvard Medical School</a></li>
    <li><a href="http://google.com">Harvard College</a></li>
</ul>
<body>

<script>
function processBullets() {
    var lastElement = false;
    $("br").remove(".tempbreak");
    $("ul li").each(function() {
        $(this).removeClass("nobullet");
        if (lastElement && lastElement.offset().top != $(this).offset().top) {
            $(lastElement).addClass("nobullet");
            $(lastElement).append('<br class="tempbreak" />');
        }
        lastElement = $(this);
    }).last().addClass("nobullet");
}

</script> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-30T18:51:16.760

如果您不介意创建`PNG`项目符号（或其他分隔符）的图像（具有透明背景），那么您可以在使用它作为背景绘制的列表项之间使用自然空间。

在列表项换行到下一行的地方，空间——以及它的背景——将不会被呈现。

这避免了与分隔符占用空间相关的布局问题，也避免了任何 Javascript/jQuery，利用浏览器自己的布局引擎来完成这项工作。您可以使用 word-spacing 属性调整分隔符的间距。

您需要确保标记中没有其他可能用作自然空间的空白。您可以在此处使用比 5x5 更高分辨率的图像，并结合背景大小，以便在缩放时看起来仍然可以，但请注意 IE8 不支持背景图像的缩放。另一个缺点是，如果要更改颜色，则必须编辑 PNG。

**[小提琴](http://jsfiddle.net/webtiki/58vNS/)**

基于修改@bleuscyther的答案的代码：

*CSS：*

```
ul { max-width: 700px; padding: 0; text-align: center; }
ul li { display: inline; white-space: nowrap; }
ul .separator {
  word-spacing: 1.1em;
  background-repeat: no-repeat;
  background-position: 50% 60%;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAOElEQVQI113M0Q3AIBRC0aM76P7jmHSmSj/6mibyc4EQkEEWuYtDmU1SXO1d6H7tjgupIl8+P+cD22cff9U1wbsAAAAASUVORK5CYII=);
} 
```

*HTML：*

```
<ul>
    <li><a href="http://google.com">Harvard Medical School</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard College</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard Medical School</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard College</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard Medical School</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard College</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard Medical School</a></li><span class='separator'>
    </span><li><a href="http://google.com">Harvard College</a></li>
</ul> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-01T13:58:12.870

[user2511031](https://stackoverflow.com/users/2511031/user2511031)的解决方案几乎是理想的......它只是不是一个有效的 HTML。在 LI 之外，UL 之内不应该有任何 SPAN。

但这并不意味着没有真正理想的解决方案。我找到了一个！

无需在标记中放置整个跨度和干净的空白。将所需的空间放入“:after”伪元素内容中，为其应用背景图像。

它也一样！

```
ul { max-width: 700px; padding: 0; text-align: center; }
ul li { display: inline; white-space: nowrap; }
ul li:after {
    content: " ";
    word-spacing: 2em;
    background-repeat: no-repeat;
    background-position: 50% 60%;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAOElEQVQI113M0Q3AIBRC0aM76P7jmHSmSj/6mibyc4EQkEEWuYtDmU1SXO1d6H7tjgupIl8+P+cD22cff9U1wbsAAAAASUVORK5CYII=);
} 
```

这是[小提琴](http://jsfiddle.net/24jFZ/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-10T17:51:48.013

我刚刚使用 text-indent 成功设置了项目符号列表的样式，如下所示：

HTML：

```
<ul class="horizontal">
<li>Payment</li>
<li>Check</li>
<li>Direct Deposit</li>
</ul> 
```

CSS：

```
ul.horizontal li { 
  list-style-type:disc; 
  float: left; 
  text-indent:-4px; 
  margin-right:16px; 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-09T09:14:04.183

**[http://jsfiddle.net/caramba/tSnnP/](http://jsfiddle.net/caramba/tSnnP/)**

```
<div>
    <ul>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
    </ul>
    <ul>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
        <li><span class="icon bull"></span>xxx</li>
    </ul>
</div>

<style type="text/css">
div {
    white-space: nowrap;
    width: 100%;
}
span {
    display:inline-block;
    margin:0 5px;
}
ul {
    text-align:center;
}
ul li {
    display:inline;
    margin:20px;

}
.hide {
    display:none;
}

.icon {
    position:relative;
    display:inline-block;
    background-position:-1000px -1000px;
    background-image:url(http://www.alexander-bown.com/wp-content/uploads/2011/05/big-black-dot.jpg);
    background-repeat:no-repeat;
    background-size:5px 5px;
    width:5px;
    height:5px;
}
.icon {
    background-position:0px 0px;
    top:-2px;
}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('ul li:first-child').children('span').addClass("hide");
    });
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-13T13:11:44.243

以最简单的方式，您只需要在样式表中设置`text-align: center`on`ul`和`display: inline-block`on即可。`li`如果您愿意，可以通过利用`:after`on 上的伪类来使用图像作为分隔符`li`。

这是一个[例子](http://jsfiddle.net/gth5d/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-16T21:27:55.180

```
 ul li {
        display: inline;
        text-align: center
    }

  .separator {
        display: inline-block;
        background-color: black;
        width: 5px;
        height: 5px;
        border-radius: 45px;
        vertical-align: middle;

    } 
```

```
<ul>
    <li>item 1</li> <div class='separator'></div>
    <li>item 2</li> <div class='separator'></div>
    <li>item 3</li> <div class='separator'></div>
    <li>item 4</li> <div class='separator'></div>
    <li>item 5</li>
</ul> 
```

您也可以使用循环在 JavaScript 中构建它，并为 x 数量的列表项连接一个新的 li，但看到您的帖子没有说明动态生成的列表，我暂时将其保留。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2013-10-23T11:13:11.717

```
<table>
    <tr>
        <td>
    <ul>
        <li>First menu item</li>
    </ul>
            </td>
        <td>
    <ul>
        <li>Second menu item</li>
    </ul>
        </td>
        <td>
    <ul>
        <li>Third menu item</li>
    </ul>
        </td>
        </tr>
</table> 
```

# cross-browser - 任何人都有确定IE10将使用哪种文档模式的流程图，例如IE9的这个？

> ID：15306109
> 
> 赞同：2
> 
> 时间：2013-03-09T01:25:53.330
> 
> 标签：cross-browser, internet-explorer-10

我发现这个非常棒的文档显示了我想要的信息，但对于 IE9。这有助于消除我对 IE 文档模式如何工作的许多困惑：

[http://ie.microsoft.com/testdrive/ieblog/2010/Jun/16_IEsCompatibilityFeaturesforSiteDevelopers_1.svg](http://ie.microsoft.com/testdrive/ieblog/2010/Jun/16_IEsCompatibilityFeaturesforSiteDevelopers_1.svg)

我搜索了 IE10 的更新版本，但没有找到任何东西。有人看过同等的但更新了吗？

到目前为止，我对 msdn 文档的体验（例如他们的[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)）非常令人沮丧，其中有很多圈子和未定义的术语。

特别是，我一直无法回答的问题（虽然我真的只是在寻找答案，因为我很沮丧它没有在任何地方提供）是这样的：IE10 兼容模式是否仍然意味着它正在模拟 IE7？我想我认为它确实如此，但它让我非常恼火，似乎没有什么说得这么明确。疯狂的道具给任何可以找到 MSDN 文档说明是否存在的地方的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:29:44.420

我也在寻找更新的图表，并在进行 Google 图片搜索（滚动到底部）后发现以下内容：http: [//msdn.microsoft.com/en-us/library/ff955275(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/ff955275(v=vs.85).aspx)

左侧有链接可将您带到兼容性视图设置和文档类型表，因为它们不包含在页面上的流程图​​中。

对于您的第二个问题，关于兼容模式是否仍在模拟 IE7，我假设您的意思是通过单击浏览器中的图标而不是通过设置元标记或标题来进入 IE10 兼容模式。我相信答案是肯定的，但不是因为我在微软的文档中看到过。当我单击该图标并查看开发人员工具时，我看到浏览器模式是“IE10 兼容性”，而文档模式是“IE7 标准”，所以这似乎是默认设置。您可以在 nytimes.com 上看到这种情况。

# iphone - 如何在 UIWebView 中加载 HTML 对象？

> ID：15306110
> 
> 赞同：1
> 
> 时间：2013-03-09T01:25:58.707
> 
> 标签：iphone, html, string, url, uiwebview

我是 iPhone 开发的新手，我正在尝试将 HTML 对象加载到`UIWebView`.

问题是当我将 HTML 数据转换为字符串时，应用程序崩溃并显示`EXC_BAD_ACCESS`. 该对象是一个brightcove视频，我直接从brightcove网站复制了嵌入代码，所以我不明白为什么它不起作用。任何帮助是极大的赞赏。

代码：

```
NSString *brightstring = [NSString stringWithFormat:@"<html><body><object id=flashObj width=540 height=400 classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase=http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0><param name=movie value=http://c.brightcove.com/services/viewer/federated_f9?isVid=1 /><param name=bgcolor value=#FFFFFF /><param name=flashVars value=videoId=%@&playerID=659636031001&playerKey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBM6WfpHEsDft5laXH9ASJhF&domain=embed&dynamicStreaming=true /><param name=base value=http://admin.brightcove.com /><param name=seamlesstabbing value=false /><param name=allowFullScreen value=true /><param name=swLiveConnect value=true /><param name=allowScriptAccess value=always /><embed src=http://c.brightcove.com/services/viewer/federated_f9?isVid=1 bgcolor=#FFFFFF flashVars=videoId=%@&playerID=659636031001&playerKey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBM6WfpHEsDft5laXH9ASJhF&domain=embed&dynamicStreaming=true base=http://admin.brightcove.com name=flashObj width=540 height=400 seamlesstabbing=false type=application/x-shockwave-flash allowFullScreen=true swLiveConnect=true allowScriptAccess=always pluginspage=http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash></embed></object></body></html>", clipid]; //<--Crashes Here

NSString* html = [NSString stringWithFormat:brightstring, 540, 400];  

[videoScreen loadHTMLString:html baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:34:38.413

这很简单：

```
NSString *brightstring = [NSString stringWithFormat:@"...videoId=%@&...videoId=%@&...", clipid]; //<--Crashes Here 
```

您的格式字符串中有`%@`两次，但您只传入一个参数。

我建议从文件中加载 HTML 并使用`-stringByReplacingOccurrencesOfString:withString:`来填写视频 ID（使用类似 的占位符`${VIDEO_ID}`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:47:56.007

看起来该视频是 Flash 视频，据我所知（我可能错了），但 iOS 不支持 Flash。尝试使用其他格式，如 mp4、mpv、3gp 等。出于测试目的，我将首先托管 .html 文件（如果您有托管公司，或使用 apache 在本地运行），然后从手机的网络浏览器访问它. 如果它在那里不起作用，那么肯定它也不会以这种方式工作。

# google-maps-api-3 - 在 Google Maps v3 中使用 Yandex 地图图块

> ID：15306111
> 
> 赞同：0
> 
> 时间：2013-03-09T01:26:09.407
> 
> 标签：google-maps-api-3

我有 Yandex 地图图块（俄语）在 Google Maps API v2 中工作，但在 Google Maps API v3 中有些东西不起作用，请参阅以下 jsfiddle：http: [//jsfiddle.net/VkGjq/1 ​​/](http://jsfiddle.net/VkGjq/1/)

请注意，在 Google 路线图和 Yandex 磁贴之间切换时，它们不会对齐且标记位置错误。

对于 Maps v2，我制作了一个等效的 jsfiddle，但由于它需要 API 密钥，所以它被破坏了：http: [//jsfiddle.net/ggrgQ/1/](http://jsfiddle.net/ggrgQ/1/)

您可以在这里看到类似的代码，但您必须手动导航到莫斯科，因为 Yandex 在俄罗斯以外没有任何像样的数据：http: [//gpsloglabs.com/share/2367c16f3a0e75b05ac8a5529afba225dd929518/](http://gpsloglabs.com/share/2367c16f3a0e75b05ac8a5529afba225dd929518/)

我不记得我从哪里得到 v3 代码，但常量似乎大致对应于 v2 版本。除此之外，我不明白投影在做什么，所以我被卡住了。

有任何想法吗？

来自 jsfiddle 的代码如下：

```
var center = new google.maps.LatLng(55.75, 37.62);
var mapOptions = {
    zoom: 10,
    center: center,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map'), mapOptions);

new google.maps.Marker({map: map, position: center});

map.mapTypes.set("Yandex",
                 new google.maps.ImageMapType(
                     {getTileUrl: function(coord, zoom) {
                         return "http://vec0"+((coord.x+coord.y)%5)+".maps.yandex.net/tiles?l=map&v=2.16.0&x=" + 
                             coord.x + "&y=" + coord.y + "&z=" + zoom + "";
                     },
                      tileSize: new google.maps.Size(256, 256),
                      isPng: true,
                      alt: "Yandex",
                      name: "Yandex",
                      projection: new YandexProjection(),
                      maxZoom: 17}));

map.setOptions({mapTypeControlOptions: {mapTypeIds: [google.maps.MapTypeId.ROADMAP, "Yandex"]} });

function YandexProjection() {
    this.pixelOrigin_ = new google.maps.Point(128,128);
    var MERCATOR_RANGE = 256;
    this.pixelsPerLonDegree_ = MERCATOR_RANGE / 360;
    this.pixelsPerLonRadian_ = MERCATOR_RANGE / (2 * Math.PI);

    this.fromLatLngToPoint = function(latLng) {
        function atanh(x) {
            return 0.5*Math.log((1+x)/(1-x));
        }
        function degreesToRadians(deg) {
            return deg * (Math.PI / 180);
        }
        function bound(value, opt_min, opt_max) {
            if (opt_min != null) value = Math.max(value, opt_min);
            if (opt_max != null) value = Math.min(value, opt_max);
            return value;
        }

        var origin = this.pixelOrigin_;
        var exct = 0.0818197;
        var z = Math.sin(latLng.lat()/180*Math.PI);
        return new google.maps.Point(origin.x + latLng.lng() *this.pixelsPerLonDegree_,
                                     Math.abs(origin.y - this.pixelsPerLonRadian_*(atanh(z)-exct*atanh(exct*z))));
    };

    this.fromPointToLatLng = function(point) {
        var origin = this.pixelOrigin_;
        var lng = (point.x - origin.x) / this.pixelsPerLonDegree_;
        var latRadians = (point.y - origin.y) / -this.pixelsPerLonRadian_;
        var lat = Math.abs((2*Math.atan(Math.exp(latRadians))-Math.PI/2)*180/Math.PI);
        var Zu = lat/(180/Math.PI);
        var Zum1 = Zu+1;
        var exct = 0.0818197;
        var yy = -Math.abs(((point.y)-128));
        while (Math.abs(Zum1-Zu)>0.0000001){
        Zum1 = Zu;
        Zu = Math.asin(1-((1+Math.sin(Zum1))*Math.pow(1-exct*Math.sin(Zum1),exct))
                       / (Math.exp((2*yy)/-(256/(2*Math.PI)))*Math.pow(1+exct*Math.sin(Zum1),exct)));
        }
        if (point.y>256/2) {
            lat=-Zu*180/Math.PI;
        } else {
            lat=Zu*180/Math.PI;
        }
        return new google.maps.LatLng(lat, lng);
    };

    return this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:24:24.597

事实证明，该`projection`属性不能通过设置，`ImageMapTypeOptions`并且必须在构造后分配`ImageMapType`，这个 jsfiddle 现在可以工作：http: [//jsfiddle.net/VkGjq/2/](http://jsfiddle.net/VkGjq/2/)

```
var yandexMapType = new google.maps.ImageMapType(
                     {getTileUrl: function(coord, zoom) {
                         return "http://vec0"+((coord.x+coord.y)%5)+".maps.yandex.net/tiles?l=map&v=2.16.0&x=" + 
                             coord.x + "&y=" + coord.y + "&z=" + zoom + "";
                     },
                      tileSize: new google.maps.Size(256, 256),
                      isPng: true,
                      alt: "Yandex",
                      name: "Yandex",
                      maxZoom: 17});
// projection is ignored if passed to MapTypeOptions
yandexMapType.projection = new YandexProjection();
map.mapTypes.set("Yandex", yandexMapType); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T18:03:35.933

根据[许可协议](https://yandex.ru/legal/maps_api/)，您不能在没有 yandex api 的情况下使用 yandex 地图。您不能在传单中使用 yandex 瓷砖。

您需要包装 yandex api 或使用[http://leafletjs.com/plugins.html](http://leafletjs.com/plugins.html)

或编写自己的包装器。

示例[https://all-maps.herokuapp.com/](https://all-maps.herokuapp.com/)

[https://github.com/artamonovdev/all-maps](https://github.com/artamonovdev/all-maps)

# hashset - 检查一个项目是否在一个非常大的哈希集中的好方法是什么？

> ID：15306112
> 
> 赞同：0
> 
> 时间：2013-03-09T01:26:10.473
> 
> 标签：hashset, bigdata

我有一个无法完全加载到内存中的哈希集。所以假设它有 ABC 部分，每个都可以加载到内存中，但不是一次全部加载。
我也时不时收到随机条目，我几乎无法分辨它可能属于哪个部分。所以其中一种方法可能是我先加载A然后进行检查，然后是B，C。但是下一个条目可能属于B，所以我必须卸载C，然后加载A，然后B......希望我让这个理解。

这显然会很慢，所以我想知道有没有更好的方法来做到这一点？（如果使用 db 不是替代方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:42:31.420

我建议您不要使用某些标准将数据输入到 A 或 B。换句话说，A、B、C - 这只是将整个数据划分为 3 个相等部分的结果。我对吗？如果是这样，我建议您在向集合中添加新条目时添加一些标准。例如，如果您的条目是数字，则将那些从 0-3 开始到 A，从 4-6 到 B，从 7-9 到 C。在 A 或 B 或 C 中。如果您的条目是单词 - 相同的解决方案，但现在标准是第一个字母。可能在这里最好不要使用 3 套，而是使用 26 大小的英文字母。请注意，无论如何您都必须将其中一组存储在内存中。您看到了一个优势 - 您最多进行 1 次加载/卸载操作，您无需检查所有集合 - 您现在可以真正存储您的价值。这个想法在 DB - 分区中被广泛使用。如果您存储在集合、数字或单词中，而是存储一些复杂的对象，那么您无论如何都可以发明一些简单的标准。

# django - 使用 RabbitMQ 启动 django-celery 导致的致命错误 [Unknown AMQP Method (10, 60)]

> ID：15306118
> 
> 赞同：5
> 
> 时间：2013-03-09T01:27:00.777
> 
> 标签：django, rabbitmq, celery, django-celery

我正在尝试在 django-celery 与 RabbitMQ 对话以执行分布式任务的 debian 服务器上设置 Django 实例。

我可以设置 RabbitMQ 服务器，它会以良好的状态响应，但是一旦 celery 与 RabbitMQ 联系，它就会抛出错误并关闭。这是我尝试启动 celery 的开发实例时的样子：

```
[2013-03-08 16:59:23,707: WARNING/MainProcess] celery@myserver ready.
[2013-03-08 16:59:23,725: INFO/MainProcess] consumer: Connected to amqp://celery_rabbit@127.0.0.1:5672//rabbit_vhost.
[2013-03-08 16:59:23,734: ERROR/MainProcess] Unrecoverable error: AMQPError('Unknown AMQP method (10, 60)', None, None, None, '')
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/__init__.py", line 351, in start
    component.start()
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 392, in start
    self.reset_connection()
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 748, in reset_connection
    self.reset_pidbox_node()
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 687, in reset_pidbox_node
    callback=self.on_control,
  File "/usr/local/lib/python2.6/dist-packages/kombu/pidbox.py", line 71, in listen
    consumer.consume()
  File "/usr/local/lib/python2.6/dist-packages/kombu/messaging.py", line 401, in consume
    self._basic_consume(T, no_ack=no_ack, nowait=False)
  File "/usr/local/lib/python2.6/dist-packages/kombu/messaging.py", line 522, in _basic_consume
    no_ack=no_ack, nowait=nowait)
  File "/usr/local/lib/python2.6/dist-packages/kombu/entity.py", line 571, in consume
    nowait=nowait)
  File "/usr/local/lib/python2.6/dist-packages/amqp/channel.py", line 1766, in basic_consume
    (60, 21),  # Channel.basic_consume_ok
  File "/usr/local/lib/python2.6/dist-packages/amqp/abstract_channel.py", line 69, in wait
    self.channel_id, allowed_methods)
  File "/usr/local/lib/python2.6/dist-packages/amqp/connection.py", line 230, in _wait_method
    self.wait()
  File "/usr/local/lib/python2.6/dist-packages/amqp/abstract_channel.py", line 71, in wait
    return self.dispatch_method(method_sig, args, content)
  File "/usr/local/lib/python2.6/dist-packages/amqp/abstract_channel.py", line 85, in dispatch_method
    raise AMQPError('Unknown AMQP method %r' % (method_sig, ))
AMQPError: Unknown AMQP method (10, 60) 
```

为了确认，我可以检查 RabbitMQ 之后是否仍在运行：

```
# rabbitmqctl status
Status of node rabbit@myserver ...
[{running_applications,[{rabbit,"RabbitMQ","1.8.1"},
                        {mnesia,"MNESIA  CXC 138 12","4.4.14"},
                        {os_mon,"CPO  CXC 138 46","2.2.5"},
                        {sasl,"SASL  CXC 138 11","2.1.9.2"},
                        {stdlib,"ERTS  CXC 138 10","1.17"},
                        {kernel,"ERTS  CXC 138 10","2.14"}]},
 {nodes,[{disc,[rabbit@myserver]}]},
 {running_nodes,[rabbit@myserver]}]
...done. 
```

这是阻止我启动我的网站的最后一件事，让我筋疲力尽，所以任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T01:46:03.343

将 kombu 降级到 2.4.7 将修复它。rabbitmq-server 还不够新，无法支持 AMQP 0-9-1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:28:08.360

我在 Ubuntu 中遇到了同样的问题。看起来（可能取决于 Ubuntu 版本）包含的 RabbitMQ 包可能已经过时了。[RabbitMQ 安装指南](http://www.rabbitmq.com/install-debian.html)指出这是完全可能的。因此，他们建议从他们的网站安装 .deb 包。

# php - 在有时间限制的php中下载大文件

> ID：15306119
> 
> 赞同：1
> 
> 时间：2013-03-09T01:27:07.153
> 
> 标签：php, download

我正在尝试创建一个简单的脚本，该脚本采用表单中的 URL，下载文件并将该文件交付给用户。类似于代理服务器的东西，仅用于下载文件。唯一的问题是服务器的执行时间有限，为 10 秒，对于大多数大文件来说这将失败。我无法更改执行时间（使用`set_time_limit`），因为这也被阻止了。有什么**办法**可以过去吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:10:49.360

您可以使用云存储服务为您存储文件

1.  [谷歌驱动API](http://hublog.hubmed.org/archives/001954.html)
2.  [保管箱-php](https://code.google.com/p/dropbox-php/wiki/Dropbox_API)

将文件“交付”给您在云存储服务上共享链接的用户。

Ps：抱歉之前的错误答案，ftp_get 仅在您尝试从 ftp 服务器获取它时才有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:54:05.300

获得一个新的网络主机，我可以推荐一个便宜的主机是[Dreamhost](http://www.dreamhost.com/r.cgi?90832)，它非常便宜，而且他们有很多 PHP ini 设置可以覆盖（但不是全部）。或者，如果您只是在玩耍并且正在寻找临时的东西，我推荐 AWS EC2，微型实例的价格低至 0.02 美元/小时，具体取决于您选择的区域，并且您可以[免费获得 1 个月](http://aws.amazon.com/free/)，但最重要的是，您获得完全根访问权限。

编辑：

忘了提及在哪里查看覆盖 PHP 设置信息：wiki.dreamhost.com/index.php/PHP.ini （对不起，我不能将其设为链接，我是 stackoverflow 上的 n00b 并且仅限于 2 个链接）

# python - 赋值前引用的变量 'cmd_part_1'

> ID：15306120
> 
> 赞同：2
> 
> 时间：2013-03-09T01:27:07.900
> 
> 标签：python, python-2.7, python-3.x

我的机器人程序一直有这个错误：

> start.py:890 分配前引用的局部变量 'cmd_part_1'

### 代码：

```
try:
    my_alias = message.body.split(" ", 3)
    if len(my_alias) > 2:
        cmd_part_1 = my_alias[0]
        cmd_part_2 = my_alias[1]
    elif len(my_alias) < 2:
        cmd_part_1 = ""
        cmd_part_2 = ""
except Exception as e:
    cmd_part_1 = ""
    cmd_part_2 = ""

if self.getAccess(user.name.lower()) >= lvl_config.rank_req_callme and cmd_part_1 == "call" and cmd_part_2 == "me":
    whole_body = message.body
    whole_body = whole_body.replace("call me ", "");
    whole_body = whole_body.replace(",", "&#44;");
    chat_message("<font color='#%s' face='%s' size='%s'>%s <b>%s</b></font>" % (font_color, font_face, font_size, random.choice(["Recorded! ^_^ I will now call you", "Registah'd, you are now", "Yo, dis mah big homie, I call dem", "Ye-a-a-ah, I guess I can call you that...", "If I have to.. I suppose I'll call you..", "I decided I will call you"]), whole_body), True)
    alias_flag = 0
    finished_proc = 1
    file = open("storage/flatfile/various/aliases.csv", "r")
    for line in file.readlines():
        alias_data = line.strip()
        alias_username, alias_nickname = alias_data.split(",", 1) 
```

### 错误行：

```
if self.getAccess(user.name.lower()) >= lvl_config.rank_req_callme and cmd_part_1 == "call" and cmd_part_2 == "me": 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T01:30:10.050

您在set 的第一个块中有`if`and`elif`语句。`try``cmd_part_1`

如果这些`if`语句中的条件都不是 会发生什么`True`？

在这种情况下，`cmd_part_1`永远不会被赋值。这就是您的代码中发生的事情。解决这个问题，它会工作。也许在`else`那里添加一个子句并为两者分配一个默认值`cmd_part_1`和`cmd_part_2`。或者让其中一个拥有`=`.

例如：

```
if len(my_alias) >= 2: 
```

代替：

```
if len(my_alias) > 2: 
```

之后，正如 eryksun 在下面的评论中建议的那样，您可以将 替换`elif`为`else`.

# java - 有状态 bean 的行为类似于无状态 bean

> ID：15306125
> 
> 赞同：0
> 
> 时间：2013-03-09T01:28:03.167
> 
> 标签：java, jboss, ejb, stateless-session-bean, stateful-session-bean

我是 EJB 新手并尝试为 EJB 有状态 bean 编写实现，但是当我尝试执行事务时，它像无状态 bean 一样返回

```
package beanpackage;

import javax.ejb.Stateful;
//import javax.ejb.Stateless;

/**
 * Session Bean implementation class bankbean
 */
@Stateful
public class bankbean implements bankbeanRemote, bankbeanLocal {
    /**
     * Default constructor. 
     */
    static int accountbalance;
    public bankbean() {
        accountbalance=10;
    }
    public int accountbalancecheck()
    {
        return accountbalance;
    }
    public int accountwithdraw(int amount)
    {
    return (accountbalance-amount);
    }
    public int accountdeposit(int amount)
    {
        return (accountbalance+amount);
    }
}

import java.util.Properties;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import beanpackage.bankbeanRemote;

public class appclient {
public static void main(String args[]) throws NamingException
    {
        Context c = appclient.getIntitialContext();
        bankbeanRemote bbr = (bankbeanRemote)c.lookup("bankbean/remote");
        int s = bbr.accountbalancecheck();
        System.out.print(s+"  this is first ejb output");
        s=bbr.accountwithdraw(1);
        System.out.print(s+"  this is first ejb output");
        s=bbr.accountwithdraw(1);
        System.out.print(s+"  this is first ejb output");
    }
public static Context getIntitialContext() throws NamingException
    {
        Properties prop = new Properties();
         prop.setProperty("java.naming.factory.initial","org.jnp.interfaces.NamingContextFactory");
        prop.setProperty("java.naming.factory.url.pkgs", "org.jboss.naming");
        prop.setProperty("java.naming.provider.url", "127.0.0.1:1099");
        return new InitialContext(prop);
    }
} 
```

输出是：

```
10  this is first ejb output
9  this is first ejb output
9  this is first ejb output 
```

我无法理解。它应该返回 10 9 然后 8..但返回 10 9 9..请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T01:32:19.910

你忘记了 decrement/increment `accountbalance`。我认为这是你打算做的：

```
public int accountwithdraw(int amount)
{
    accountbalance = accountbalance-amount;
    return accountbalance;
}

public int accountdeposit(int amount)
{
    accountbalance = accountbalance-amount;
    return accountbalance;
} 
```

ps - 为什么您在 ejb 定义中使用注释而不是用于查找 ( `@EJB`) 的任何特殊原因？将更容易和更便携的 IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:33:46.330

在 fvu 答案之上，您不应该设为`accountbalance`静态，否则该值将由 bean 的所有实例共享。

像这样声明它：

```
int accountbalance; 
```

# perl - Perl：如何匹配每行中的相同单词直到新行中的不同单词

> ID：15306128
> 
> 赞同：1
> 
> 时间：2013-03-09T01:28:27.913
> 
> 标签：perl

我正在尝试在每行中打印具有不同值的相同类型数据。之后将每个类型值与相应的名称（MMaaa/gg/dd）结合起来。
数据示例如下所示。以组 1 为例，名称格式为 MMxxxx/xxx/xxxx (MMaaa/gg/dd)，类型值为 ID03。一组由水果（例如：apple）、水果名称（例如：MMbb/gggg/iii）和类型值（例如：ID02、ID04、ID05）或两种类型的水果和名称（例如：苹果和橙子）组成。

我想要的是苹果名称及其类型值的唯一组合。我试图打印组合以获得预期的结果但失败了。到目前为止，我已经尝试过：

```
while (@array = <FILE>) {
    foreach $line (@array) {
        if($line =~ m/apple\s{1}MM/) {
            $a = $line;
            if($line =~ m/(type)/) {
                $b = $line;
            }
        }
        print "\n$a/$b\n";
    }
} 
```

* * *

数据：

```
apple                    
apple MMaaa/gg/dd        
type  ID03_________________group 1               
apple                   
apple MMsss/ff/dd        
orange MMmm/ss             
orange MMll/fff______________group 2             
apple                    
apple MMbb/gggg/iii      
type  ID02             
type  ID04             
type  ID05_________________group 3               
apple                 
apple MMhh/jj/lll       
orange MMff/gg_______________group 4           
apple                 
apple MMll/pp/ooo       
type  ID09             
type  ID03_________________group 5  
..  
..  
.  
. 
```

预期结果：

```
aaa/gg/dd/ID03  
bb/gggg/iii/ID02  
bb/gggg/iii/ID04  
bb/gggg/iii/ID05  
ll/pp/ooo/ID09  
ll/pp/ooo/ID03 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:00:18.917

也许以下内容会有所帮助：

```
use strict;
use warnings;

my $first;

while (<DATA>) {
    chomp;
    $first = ( split ' ' )[1] if m!/!;
    print "$first/" . ( split ' ' )[1], "\n" if /^type/ and $first;
}

__DATA__
apple                    
apple MMaaa/gg/dd/MMhh/jj/lll
type  ID03
apple
apple MMsss/ff/dd
orange MMmm/ss
orange MMll/fff
apple
apple MMbb/gggg/iii
type  ID02
type  ID04
type  ID05
apple
apple MMhh/jj/lll
orange MMff/gg
apple
apple MMll/pp/ooo
type  ID09
type  ID03 
```

输出：

```
MMaaa/gg/dd/MMhh/jj/lll/ID03
MMbb/gggg/iii/ID02
MMbb/gggg/iii/ID04
MMbb/gggg/iii/ID05
MMll/pp/ooo/ID09
MMll/pp/ooo/ID03 
```

`$first`如果行中有 a ，则脚本将“路径”字符串存储到其中`/`。如果其中有一行`type`，它会打印“路径”并`type`一起提供`$first`一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:05:11.810

这并不能解决您的匹配问题，但您需要了解其他一些事情。

这是错误的。

```
while (@array = <FILE>) {
    foreach $line (@array) {
        ...
    }
} 
```

所做的是将文件的全部内容读入`@array`，然后进入`while`循环。`while`循环只执行一次（除非文件为空并且执行零次）。您试图一次遍历文件一行，但您正在组合两个不同的循环结构。

你想做的是：

```
while ($line = <FILE>) {
    ... loop contents ...
} 
```

这一次将一行分配给`$line`。

你也可以这样做：

```
for $line (<FILE>) {
    .... loop contents
} 
```

但这会将整个内容读入一个临时数组，然后您一次遍历一个数组元素。

# php - HTML 头块太大

> ID：15306131
> 
> 赞同：0
> 
> 时间：2013-03-09T01:28:44.513
> 
> 标签：php, html, iis-7

我遇到了一个问题。我想使用我的 HTML“head”块，并将其加载到每个页面上。我在 Windows Server 2008 R2 上使用 IIS7。我正在尝试找到一种方法来拥有类似的东西

```
 <link rel="header" href="mywebsite.com/src/header.html" type="text/html" /> 
```

或类似的东西，在每一页上，而不是一个大块。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:35:55.577

使用 php 包含 head ：

```
<?php
      include "mywebsite.com/src/header.html";
?> 
```

把它放在每个文件的开头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:36:09.237

我不建议在您的 Web 服务器中解决此问题，因此您使用 IIS 的事实并不重要，尽管许多人会告诉您这不是理想的选择。

有许多后端框架，例如 symfony、rails、meteor 和其他使用模板引擎（handlebars、jade、Twig）的框架，它们会根据文件的物理位置自动将文件放置在您的脑海中。在某些情况下，例如 Symfony2 的 Twig，您可以在 head 中使用模板，并拥有一个单独的文件，其中包含您的 head 声明，就像您在上面展示的那样。

除此之外，您还可以使用服务器端或客户端聚合器，例如 Yahoo 聚合器。(yui min) 这些工具会将你的 JS 和 CSS 文件合并为一个，从而减少文件的总数和你的头。

如果您使用的是 PHP，那么 Symfony2 可能是您的解决方案，因为它提供了上述所有功能。

# mysql - 恢复数据库转储时出现 information_schema 错误

> ID：15306132
> 
> 赞同：2
> 
> 时间：2013-03-09T01:28:50.953
> 
> 标签：mysql, phpmyadmin

像往常一样，我使用 PMA 完成了完全导出。现在，当我尝试导入转储的数据时，出现此错误：

> #1044 - 用户 'root'@'localhost' 拒绝访问数据库 'information_schema'

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:39:09.293

确保您的转储不包含 CREATE DATABASE `information_schema`， Information_Schema 不是您应该创建的东西。可能会或可能不会帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:39:16.990

information_schema 数据库中的每个表都是一个 TEMPORARY MEMORY TABLE

例如，通知`information_schema.tables`

```
mysql> show create table information_schema.tables\G
*************************** 1\. row ***************************
       Table: TABLES
Create Table: CREATE TEMPORARY TABLE `TABLES` (
  `TABLE_CATALOG` varchar(512) NOT NULL DEFAULT '',
  `TABLE_SCHEMA` varchar(64) NOT NULL DEFAULT '',
  `TABLE_NAME` varchar(64) NOT NULL DEFAULT '',
  `TABLE_TYPE` varchar(64) NOT NULL DEFAULT '',
  `ENGINE` varchar(64) DEFAULT NULL,
  `VERSION` bigint(21) unsigned DEFAULT NULL,
  `ROW_FORMAT` varchar(10) DEFAULT NULL,
  `TABLE_ROWS` bigint(21) unsigned DEFAULT NULL,
  `AVG_ROW_LENGTH` bigint(21) unsigned DEFAULT NULL,
  `DATA_LENGTH` bigint(21) unsigned DEFAULT NULL,
  `MAX_DATA_LENGTH` bigint(21) unsigned DEFAULT NULL,
  `INDEX_LENGTH` bigint(21) unsigned DEFAULT NULL,
  `DATA_FREE` bigint(21) unsigned DEFAULT NULL,
  `AUTO_INCREMENT` bigint(21) unsigned DEFAULT NULL,
  `CREATE_TIME` datetime DEFAULT NULL,
  `UPDATE_TIME` datetime DEFAULT NULL,
  `CHECK_TIME` datetime DEFAULT NULL,
  `TABLE_COLLATION` varchar(32) DEFAULT NULL,
  `CHECKSUM` bigint(21) unsigned DEFAULT NULL,
  `CREATE_OPTIONS` varchar(255) DEFAULT NULL,
  `TABLE_COMMENT` varchar(2048) NOT NULL DEFAULT ''
) ENGINE=MEMORY DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> 
```

另外，请注意，每当您使用 --all-databases 运行 mysqldump 时，`information_schema`永远不会显示。

information_schema 数据库的唯一目的是存储物理文件的元数据和数据库中表的逻辑描述。每当您运行`service mysql start`时，mysqld 都会创建所有 information_schema 表。之后，mysqld 用有关物理文件的信息填充这些临时内存表。

在重新加载数据库方面，请让 mysqld 处理 information_schema 数据库。请参阅[**我在 2011 年 6 月 15 日发布**](https://dba.stackexchange.com/a/3336/877)的关于 MySQL information_schema 的 DBA StackExchange 帖子。

# r - 动画：删除点保持控制面板

> ID：15306136
> 
> 赞同：4
> 
> 时间：2013-03-09T01:29:55.930
> 
> 标签：r, animation

我最近一直在玩动画包。非常漂亮的东西，但在使用时，`saveHTML`我得到了一个控制面板，每个图像都有一个绿点（见下文），而且我有很多图像。如何使绿点消失但保留控制面板？

我昨天问了一个相关问题，所以最小的工作示例就[在那里（我的数据集和 mnel 的答案）](https://stackoverflow.com/questions/15286380/plotting-animated-exchange-plotting-directional-edges)。

这是我用来制作 html 文件的代码：

```
saveHTML(pp(), autoplay=FALSE, loop=FALSE, verbose=FALSE, outdir = "new") 
```

动画帮助手册说*请参阅参考以获取可用选项的完整列表，*但我无法弄清楚如何执行我上面提出的问题。

![在此处输入图像描述](../Images/e5cfd34011c06105df748d4f2fa3c81e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T02:59:19.903

您想从“控件”中删除“导航器”选项。尝试将其添加到参数列表中：`single.opts = "'controls': ['first', 'previous', 'play', 'next', 'last', 'loop', 'speed'], 'delayMin': 0"`

得到类似的东西：

```
saveHTML(pp(), autoplay=FALSE, loop=FALSE, 
         verbose=FALSE, outdir = "new", 
         single.opts = "'controls': ['first', 'previous', 'play', 'next', 'last', 'loop', 'speed'], 'delayMin': 0") 
```

默认列表包括“导航器”，因此我们只是删除了该选项。如果需要，您也可以重新排序这些选项。

# c# - C# StringBuilder 使用会话构建字符串的方法

> ID：15306137
> 
> 赞同：0
> 
> 时间：2013-03-09T01:30:09.357
> 
> 标签：c#, string, text, operators, stringbuilder

我有这样一段代码，我是如何构建字符串的：

```
foreach (var item in Session)
{
    StringBuilder sb = new StringBuilder();
    sb.Append("Session Parameter: [" + item.ToString() + "]<p />Guid Value: [" + Session[item.ToString()] + "]");
    Response.Write(sb.ToString());
} 
```

我想知道，这样的方式正确吗？我的意思是，`StringBuilder`这里有一个非常有用的东西吗？

如果没有，这段代码会更快`StringBuilder`吗？

如果它是使用附加运算符构建的`Label1.Text += ...`

我记得`+=`使用比`StringBuilder`as 更多的操作：

*   从原始字符串制作临时变量（副本）
*   然后改变 copy 的值
*   然后用 copy 的值重新定义原始值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T01:33:02.113

为什么不创建`StringBuilder`一次并使用一个`Response.Write`？：

```
StringBuilder sb = new StringBuilder();
foreach (string item in Session)
{
    sb.Append("Session Parameter: [");
    sb.Append(item.ToString());
    sb.Append("]<p />Guid Value: [");
    sb.Append(((string)Session[item]));        
    sb.Append(']');
}
Response.Write(sb.ToString()); 
```

你应该进行基准测试。我认为除非循环非常大，否则不会有太大区别。

每当您担心性能时，都应该进行基准测试。可以从优化中获得最大收益的代码并不总是您认为的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T01:33:01.197

您可能希望像这样重组您的代码：

```
StringBuilder sb = new StringBuilder();
foreach (var item in Session)
{
    sb.Append("Session Parameter: [");
    sb.Append(item.ToString());
    sb.Append("]<p />Guid Value: [");
    sb.Append(Session[item.ToString()]);
    sb.Append("]");
}
Response.Write(sb.ToString()); 
```

你只需要一个`StringBuilder`和一个`Response.Write`。将它们放在循环中会破坏您可能从使用中获得的任何优化，`StringBuilder`并且没有理由`Response.Write`多次执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T01:33:55.560

您没有得到 的好处，`StringBuilder`因为您仍在将字符串与`+`. 优化的版本`StringBuilder`是：

```
foreach (var item in Session)
{
    StringBuilder sb = new StringBuilder();
    sb.Append("Session Parameter: [");
    sb.Append(item.ToString());
    sb.Append("]<p />Guid Value: [");
    sb.Append(Session[item.ToString()]);
    sb.Append("]");

    Response.Write(sb.ToString());
} 
```

注意：您还可以将`StringBuilder`初始化和调用移到`Response.Write`外部`foreach`作为另一种可能的改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T01:34:01.800

你应该改变你的代码如下：

```
sb.Append("Session Parameter: [");
sb.Append(item); // ToString is implicit
sb.Append("]<p />Guid Value: [");
sb.Append(Session[item.ToString()]);
sb.Append("]"); 
```

否则，字符串生成器就没那么有用了：您所做的只是附加一个值，该值是由编译器为您创建的隐式构造的生成器构造的。

最重要的是移动字符串构建器并将响应写入循环*之外。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T02:01:19.753

Response.Write 对于这项任务来说绰绰有余。字符串生成器使它变慢。

```
foreach (var item in Session)
{
    Response.Write("Session Parameter: [");
    Response.Write(item.ToString());
    Response.Write("]<p />Guid Value: [");
    Response.Write(Session[item.ToString()]);        
    Response.Write(']');
} 
```

看看[http://www.dotnetperls.com/response-write](http://www.dotnetperls.com/response-write)

# iis-7 - IIS 7 创建新网站

> ID：15306147
> 
> 赞同：0
> 
> 时间：2013-03-09T01:31:52.490
> 
> 标签：iis-7, web

我正在尝试学习 IIS，并且正在我的计算机上本地创建一个基本网站。这就是我所做的......

1.  打开 IIS 7 管理器
2.  右键单击“站点”
3.  点击“添加网站”
4.  设置“站点名称”
5.  使用名为“default.htm”的文件（c:\inetput\site1）设置“物理路径”
6.  将“主机名：”设置为 site1.com
7.  点击确定

当我尝试访问我的新 site1.com（不是 www，我还没有设置该绑定）时，我不断收到一条消息，说服务器“响应时间太长”。

我究竟做错了什么？

PS - 我使用的是 Windows 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:59:42.177

site1.com 可能无法解析，因为它没有 DNS 条目。您需要在您的`hosts`文件中为 site1.com 添加一个条目，或尝试通过您分配的 IP 地址直接访问它。

# gwt - GWT如何在运行时更改css

> ID：15306152
> 
> 赞同：3
> 
> 时间：2013-03-09T01:32:16.187
> 
> 标签：gwt

我们在下一个应用程序中需要可访问性，我们需要为此定制主题。实现的第一个目标是能够增加和减少应用程序中的字体大小。为此，我们将有两个按钮，一个用于增加，另一个用于减小所有组件中文本的大小。您可以使用 Enterprise Blue 作为参考主题。您可以在以下 URL 中看到一个示例：http: [//emag.governoeletronico.gov.br/emag/#](http://emag.governoeletronico.gov.br/emag/#)。您可以点击“Aumentar Fonte”和“Diminuir Fonte”。

知道如何在 GWT/SmartGWT 中实现这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:21:16.267

```
static Label lblNewLabel = new Label("New label");
Button btnNewButton = new Button("New button");
private int fontSize=10;

btnNewButton.addClickHandler(new ClickHandler() {
  public void onClick(ClickEvent event) {
    fontSize += 5;
    lblNewLabel.getElement().getStyle().setFontSize(fontSize  , Unit.PX);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:19:36.660

简短的回答是[RootPanel.getBodyElement()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/RootPanel.html#getBodyElement%28%29)。

最方便的方法是在`body element`.

有多种方法可以做到这一点。

```
RootPanel.get("body").setStyleName("newbodyclass"); //Not recommended. 
```

**高效的方式**

```
RootPanel.getBodyElement().setClassName("newbodyclass"); //Recommended 
```

**几个新方法**：

```
Document.get().getBody().setClassName("newbodyclass"); 
```

最后最适合你的问题：

```
Document.get().getBody().getStyle().setFontSize(value, unit); 
```

# bash - 终端通过 bash for 循环运行程序时遇到问题

> ID：15306158
> 
> 赞同：0
> 
> 时间：2013-03-09T01:33:02.910
> 
> 标签：bash, loops, terminal

```
#!/bin/bash

for i in {10..11}
do
    ./duffing -a 1 -b -1 -u 0.25 -w -1 -A 0.4 -t $i | ./stroboscopic > $i.data
done 
```

$i 似乎在程序参数行中不起作用，但我得到了数据文件。这是错误

```
error converting i to a double for max-time:
leftover characters: i

Bad input data 
error converting i to a double for max-time:
leftover characters: i

 Bad input data 
```

这是我在 duffing 程序中解析参数的地方：

```
void parse_args(int argc, char **argv, state_t *state, system_t *system,
            simulation_t *simulation, int *read_initial, int *print_final)
{
    int ch;
duffing_state_t *duffing = (duffing_state_t *)system->dx_dt_state;
double dtemp;
size_t i;

while (1) {
    ch = getopt_long(argc, argv, short_options, long_options, NULL);
    if (ch == -1)
        break;
    switch(ch) {
    case 'd':
        simulation->dt = safe_strtod(optarg, "time-step");
        break;
    case 't':
        simulation->t_max = safe_strtod(optarg, "max-time");
        break;
    case 'T':
        duffing->T = safe_strtod(optarg, "transient-time");
        break;
    case 'x':
        state->x[0] = safe_strtod(optarg, "x0");
        break;
    case 'v':
        state->x[1] = safe_strtod(optarg, "v0");
        break;
    case 'm':
        system->m = safe_strtod(optarg, "mass");
        break;
    case 'a':
        duffing->a = safe_strtod(optarg, "alpha");
        break;
    case 'b':
        duffing->b = safe_strtod(optarg, "beta");
        break;
    case 'u':
        duffing->u = safe_strtod(optarg, "mu");
        break;
    case 'w':
        duffing->w = safe_strtod(optarg, "omega");
        break;
    case 'A':
        duffing->A = safe_strtod(optarg, "amplitude");
        break;
    case 'E':
        simulation->step_fn = &euler_step;
        break;
    case 'M':
        simulation->step_fn = &midpoint_step;
        break;
    case 'R':
        simulation->step_fn = &rk4_step;
        break;
    case 'i':
        *read_initial = 1;
        break;
    case 'f':
        *print_final = 1;
        break;
    case '?':
        exit(EXIT_FAILURE);
    default:
        fprintf(stderr, "?? getopt returned character code 0%o ??\n", ch);
    }
}

/* convert input from periods to seconds */
simulation->t_max *= 2*M_PI / duffing->w;
duffing->T *= 2*M_PI / duffing->w;

return;
} 
```

我已经使用 -t 10 直接从终端运行程序，所以我很困惑为什么程序拒绝接受来自脚本的输入。

# c# - 使用 C# GUI 应用程序通过在线提供商查询 MySQL 数据库

> ID：15306169
> 
> 赞同：0
> 
> 时间：2013-03-09T01:34:50.007
> 
> 标签：c#, mysql, winforms, wcf

托管服务通常为 webapps（例如 ASP.net、Rails 或 Django）和一些数据库（例如 SQLServer、MySQL）提供支持。对于我自己的大多数应用程序（例如图形更新速度），我更喜欢 C# WinForms，但我希望在它后面有一个基于 Web 的数据库，以便我可以从多个位置访问它。

有没有理由我不能只为我的数据库使用这样的网络提供商，即不提供动态网页而只是回答我的 sql 查询？

存在似乎回答类似问题的现有帖子，但我想更清楚。例如，网络服务器是否提供了其他难以获得的额外安全性？

“正确”答案是否包含关键字 WCF？我是否需要托管服务来明确支持 WCF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:44:54.900

完成您的要求没有技术限制，但大多数托管服务提供商（主要是共享托管）将对其数据库的访问限制在其内部网络内。如果您能找到一个为您提供从外部网络连接的选项的托管服务提供商，那么您就可以开始了。

分发客户端时要记住的一件事`winforms`是，如果最终用户足够聪明，则可以提取连接字符串。谨慎的做法是在配置文件中加密连接字符串，并对它与数据库建立的连接（`SslMode=Required`在连接字符串中）使用加密。

当您使用 WCF 时，它可以帮助您实现额外的抽象和保护层。您可以使用自己的成员身份验证可以访问 WCF 服务的用户，而不必担心从客户端直接连接到数据库。

考虑到所有因素，使用 WCF 或任何其他 Web 服务层而不是直接从客户端连接到数据库会是更好的方法。

# api - Salesforce Tooling API - 访问权限不足

> ID：15306170
> 
> 赞同：2
> 
> 时间：2013-03-09T01:34:58.587
> 
> 标签：api, salesforce

我正在尝试通过 Tooling API 创建触发器。这在 Salesforce 内执行，并在同一个 Salesforce 组织上执行。这是在开发组织中完成的，运行用户是管理员。

当我创建`MetadataContainer`它时，它按预期工作。当我创建`ApexTriggerMember`时，出现以下错误：

```
INSUFFICIENT_ACCESS_ON_CROSS_REFERENCE_ENTITY 
```

以下是过程中的一些调试：

```
The JSON that is sent to create the MetadataContainer
{"Name":"Container 2013-03-08 17:28:06"} 
```

它被发送到的 URL

```
https://na11.salesforce.com/services/data/v27.0/tooling/sobjects/MetadataContainer/ 
```

响应：

```
{"id":"1dcG0000000PAwZIAW","success":true,"errors":[]} 
```

为创建 ApexTriggerMember 而发送的 JSON

```
{"MetadataContainerId":"1dcG0000000PAwZIAW","Body":"trigger TestTrg1 on Account (after insert, after update, before insert, before update) {\n\n}"} 
```

它被发送到的 URL：

```
https://na11.salesforce.com/services/data/v27.0/tooling/sobjects/ApexTriggerMember/ 
```

响应：

```
[{"fields":[],"message":"insufficient access rights on cross-reference id","errorCode":"INSUFFICIENT_ACCESS_ON_CROSS_REFERENCE_ENTITY"}] 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:43:41.383

我只是通过工具 API 的 SOAP 版本尝试了同样的事情。

如果我将 ApexTriggerMember.ContentEntityId 指定为现有的触发器 ID（键前缀 01q），它工作正常。当然，这是更新现有触发器而不是创建新触发器。

如果我没有设置 ContentEntityId 我会得到与你完全相同的错误。“交叉引用 ID 的访问权限不足”（StatusCode.INSUFFICIENT_ACCESS_ON_CROSS_REFERENCE_ENTITY）

[文档](http://www.salesforce.com/us/developer/docs/api_tooling/index.htm)说（我的重点）：

> **ContentEntityId**
> 类型：引用
> 属性：创建、过滤器、组、排序
> 描述：
> 对 Apex 触发器的引用。每个 ApexTriggerMember 只能有一个 ContentEntityId，否则会报错。 **此字段是必需的。**

所以该字段是必需的，但我们还没有要分配给它的 ID...

请注意，我在专用的 Salesforce StackExchange 上提出了类似的问题 -[如何使用工具 API 创建新的 Apex 触发器？](https://salesforce.stackexchange.com/questions/9603/how-do-i-use-the-tooling-api-to-create-a-new-apex-trigger)

# ios - 在 iOS 的 Core Plot 中居中多行标签

> ID：15306171
> 
> 赞同：1
> 
> 时间：2013-03-09T01:35:05.773
> 
> 标签：ios, objective-c, core-plot, labels

我正在做一个 Core Plot 项目并且遇到了问题。我的 X 轴标签都不止一行。我希望它们完全居中，到目前为止我能够做到这一点的唯一方法是手动将空格添加到作为标签的 NSString 中。请看下面的代码...

```
 NSDictionary *dataTemp=[NSDictionary dictionaryWithObjectsAndKeys:white,@"      
 White\rBuilding\r(220 max)",rec,@"Rec. Hall\r(240 max)",im,@"    IM\rBuilding\r(60 
 max)",fit,@"Fitness\r   Loft\r(40 max)",nil]; 
```

我认为有一种方法可以以编程方式对齐标签，但我还没有找到它。我会很感激任何帮助。这是图表标签的截图

![在此处输入图像描述](../Images/00a3be6e89e0258326b464f80b10ced7.png)

这是我定义 x 轴标签的代码...

```
//Array containing all the names that will be displayed on the X axis
dates = [NSArray arrayWithObjects:@"Rec. Hall\r(240 max)", @"  White\rBuilding\r(220 
max)", @"    IM\rBuilding\r(60 max)",
         @"Fitness\r   Loft\r(40 max)",  nil]; 
```

这是我在图表上制作标签的代码

```
 //X labels
int labelLocations = 0;
NSMutableArray *customXLabels = [NSMutableArray array];
for (NSString *day in dates) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:day 
textStyle:x.labelTextStyle];
    newLabel.tickLocation   = [[NSNumber numberWithInt:labelLocations] decimalValue];
    newLabel.offset         = x.labelOffset + x.majorTickLength;
    [customXLabels addObject:newLabel];
    labelLocations++;
    [newLabel release];
}
x.axisLabels                    = [NSSet setWithArray:customXLabels]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:37:32.113

这应该有效 - 您应该尝试使用`textAlignment`标签上的属性：

```
label.textAlignment = NSTextAlignmentCenter; 
```

正如@Martin 所指出的，您还可以添加`UILineBreakModeWordWrap`这样的换行符，仅在整个单词之后出现：

```
label.lineBreakMode = UILineBreakModeWordWrap; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:35:17.303

确保创建标签 ( `x.labelTextStyle`) 时使用的文本样式包括以下属性设置：

```
textStyle.textAlignment = CPTTextAlignmentCenter; 
```

# ios - PageViewController 的数据源 - 使用数组/字典将视图控制器存储在数据源中

> ID：15306172
> 
> 赞同：0
> 
> 时间：2013-03-09T01:35:06.997
> 
> 标签：ios, uipageviewcontroller

我正在为我的应用程序实现滚动样式页面视图控制器，基于基于页面的应用程序模板。

在数据源类中，我将视图控制器列表存储在字典中（我猜也可以使用数组），以便在用户滑回他们已经查看过的视图控制器时可以重用它们。页面视图控制器中总共有大约 15 个视图控制器。

我想知道与每次调用故事板 instanceViewControllerWithIdentifier 相比，这是否是一个好主意。（我了解 pageviewcontroller 本身无论如何都会存储自己的视图控制器数组。）

相反，我可以将模型对象存储在字典或数组中并实例化视图控制器并在调用 instanceViewControllerWithIdentifier 后传入模型对象。

我对可能是更好的方法感兴趣。

# jakarta-ee - EclipseLink 不正确地创建表（来自另一个持久性单元）

> ID：15306180
> 
> 赞同：0
> 
> 时间：2013-03-09T01:36:44.483
> 
> 标签：jakarta-ee, jpa, eclipselink

我有一个使用 JPA 2 的 JAVE EE6 项目，使用在 Glassfish 3.1.2.2 上运行的 Eclipselink 2.4.1 将实体持久保存到 MySQL 数据库中。

我将数据存储在两个单独的数据库中，为此我有两个 JNDI JDBC 资源和两个 JDBC 连接池。在代码中，我有两个持久性单元，每个都有不同的实体，如下所示（注意还有两个 persistence.xml 文件）。

**项目结构：**

EAR
-EJBOne
--persistence.xml
--- PersistenceUnitA ----(
X 类列表)
-EJBwo
--persistence.xml
---PersistenceUnitA
----(X + Z 类列表)
---PersistenceUnitB
- ---（Y类列表）
----（orm.xml）

我已经`<property name="eclipselink.ddl-generation" value="create-tables"/>`设置了所有的持久性单元，我也`<exclude-unlisted-classes>true</exclude-unlisted-classes>`设置了。

发生的事情是，在部署 PersistenceUnitB 中的 orm.xml 中的所有实体时，都在 PersistenceUnitA 的数据库中创建（作为表）。通过反复试验，我发现生成此表的原因是 EJBTwo 中 persitence.xml 中 PersistenceUnitA 中的属性（即具有两个持久性单元的 persistence.xml）。

但是，应用程序在其他方面运行正常，仅在指定的持久性单元中查找实体。即使用unitName=PersistenceUnitB 的EntityManager 确实会将实体存储在PersistenceUnitB 的数据库中。

在 PersistenceUnitB（类 Y 列表）中手动列出的类`<class>name</class>`不会在 PersistenceUnitA 的数据库中生成 - 仅在 orm.xml 中生成。

这很烦人，如果有人知道为什么会发生这种情况，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:03:42.453

默认情况下会为两个持久性单元查找 orm.xml。尝试重命名文件并在 PersistenceUnitB 中明确列出

# servicestack - ServiceStacks 元数据页面是否有剃须刀模板

> ID：15306184
> 
> 赞同：2
> 
> 时间：2013-03-09T01:37:23.733
> 
> 标签：servicestack

我现在有 20 多次手术，很快就会翻一番。没有某种分组元数据页面不是很有用。我想通过路由地址添加一些简单的分组。因为它是一个 RESTful API，所以最好按文件夹结构对其进行分组。如果默认视图有 Razor 视图，则将其更改为组或其他方式会很容易。

XSD 中也没有路由地址。

我看了这个，但它似乎只是页面上的链接：[是否可以自定义 ServiceStack /元数据页面？](https://stackoverflow.com/questions/12344149/is-it-possible-to-customize-the-servicestack-metadata-page)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:47:18.720

没有您可以更改的[ServiceStack 元数据](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page)剃须刀页面，但有一个[用于 ServiceStack 的 Swagger API，](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)并且内置的[元数据功能](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/MetadataFeature.cs)只是一个[插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)，因此您可以轻松删除它，此时您可以自由添加自己的自定义元数据页面。

它有帮助，您可以从[元数据页面](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/MetadataFeature.cs)的副本开始。

# jquery - highchart列的条件堆叠

> ID：15306186
> 
> 赞同：0
> 
> 时间：2013-03-09T01:37:52.240
> 
> 标签：jquery, graph, highcharts

我正在尝试创建一个`columnchart`using `highcharts`. 目的是将系列中的 2 个堆叠在一起，将第三个放在它们旁边。

我的示例 CSV 文件如下所示：

```
Datoer,01/2013,02/2013,03/2013,04/2013
Disk - Freespace,800,1000,1243,1387
Disk - Allokeret,1000,1200,1456,1689
Tape Forbrug,5241,5942,6752,7210 
```

代码如下所示：

```
$(document)
  .ready(function () {

  var graph = {
    chart: {
      renderTo: 'container',
      type: 'column'
    },
    credits: {
      enabled: false
    },
    title: {
      text: 'Imaginært Diskforbrug'
    },
    xAxis: {
      categories: []
    },
    yAxis: {
      min: 0,
      title: {
        text: 'Gigabyte'
      },
      stackLabels: {
        enabled: true,
        style: {
          fontWeight: 'bold',
          color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
        }
      }
    },
    legend: {
      align: 'right',
      x: -100,
      verticalAlign: 'top',
      y: 20,
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
      borderColor: '#CCC',
      borderWidth: 1,
      shadow: false
    },
    plotOptions: {
      column: {
        stacking: 'normal',
        dataLabels: {
          enabled: true,
          color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
        }
      }
    },
    series: []
  };

  $.get('data.txt', function (data) {
    // Split the lines
    var lines = data.split('\n');
    $.each(lines, function (lineNo, line) {
      var items = line.split(',');

      // header line containes categories
      if(lineNo == 0) {
        $.each(items, function (itemNo, item) {
          if(itemNo > 0) graph.xAxis.categories.push(item);
        });
      }

      // the rest of the lines contain data with their name in the first position
      else {
        var series = {
          data: []

        };
        $.each(items, function (itemNo, item) {
          if(itemNo == 0) {
            series.name = item;
          } else {
            series.data.push(parseFloat(item));
          }
        });

        graph.series.push(series);
      }

    });

    var chart = new Highcharts.Chart(graph);
  });

}); 
```

我的问题是我似乎无法弄清楚如何区分哪些系列是堆叠的，哪些不是。我希望 CSV 文件中的第四行不与其他 2 行（文件中的编号 2 和 3）堆叠，而是出现在它们旁边。

似乎我定义列是否堆叠的唯一选择是在 中`plotOptions`，但这让我别无选择来分离系列的堆叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:54:23.527

我建议熟悉预处理 CSV 数据 [http://docs.highcharts.com/#preprocessing](http://docs.highcharts.com/#preprocessing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:49:46.287

这是，你在找什么？

[http://api.highcharts.com/highcharts#series.stack](http://api.highcharts.com/highcharts#series.stack)

```
jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/series/stack/ 
```

# rspec - 您如何确定当前运行的 RSpec 测试是否失败？

> ID：15306187
> 
> 赞同：0
> 
> 时间：2013-03-09T01:38:00.307
> 
> 标签：rspec

从规范文件的上下文之外，您如何/可以弄清楚如何获取当前示例并检查其元数据？

如果测试失败，[我正在尝试让 VCR 不记录。](https://github.com/vcr/vcr/issues/274)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:51:10.030

`before`RSpec 目前不提供用于访问当前示例的公共 API（因为它在内部没有全局可访问的当前示例的概念），但是使用全局挂钩自行公开它是相当简单的：

```
RSpec.configure do |rspec|
  rspec.before(:each) do
    $current_rspec_example = self
  end
end 
```

然后，您可以`$current_rspec_example`从任何地方访问当前的 rspec 示例。

# api - 在对 Firebase 的 POST 请求中删除了空数组

> ID：15306191
> 
> 赞同：2
> 
> 时间：2013-03-09T01:39:34.137
> 
> 标签：api, rest, firebase

当尝试使用[Firebase REST API](https://www.firebase.com/docs/rest-api.html)将 hashmap 推送到列表时，任何具有空数组作为值的 key:value 对都将被静默删除，例如：

`curl -X POST -d '{"name": "Persists", "words": ["what", "is", "this"], "toBeDropped": []}' "https://fbdev.firebaseio.com/channels/example.json?auth=sometoken`

生成 Firebase 数据结构：

```
{
 "random-id": {
    "name": "Persists",
    "words": ["what", "is", "this"]
  }
} 
```

这给我们的客户带来了问题，因为他们期望 toBeDropped 是`[]`，而不是`null`在这种情况下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T02:54:45.340

这实际上是 Firebase 的预期行为。在内部，Firebase 将数组和对象视为同一类型（如果所有键名都是整数，则仅在客户端将它们转换为数组）。Firebase 还将空对象和 null 视为同一类型。

结果，您的空数组最终为空。

# php - 覆盖 laravel 4 的身份验证方法以使用自定义 hasing 函数

> ID：15306196
> 
> 赞同：9
> 
> 时间：2013-03-09T01:40:51.827
> 
> 标签：php, laravel, laravel-4

我的数据库中有一个包含用户的表。他们的密码是用我自己的自定义散列函数生成的。

如何覆盖 laravel 4 中的身份验证方法以使用我自己的哈希类？

这就是我一直在尝试做的事情：

```
 class CustomUserProvider implements Illuminate\Auth\UserProviderInterface {

    public function retrieveByID($identifier)
    {
        return $this->createModel()->newQuery()->find($identifier);
    }

    public function retrieveByCredentials(array $credentials)
    {
        // First we will add each credential element to the query as a where clause.
        // Then we can execute the query and, if we found a user, return it in a
        // Eloquent User "model" that will be utilized by the Guard instances.
        $query = $this->createModel()->newQuery();

        foreach ($credentials as $key => $value)
        {
            if ( ! str_contains($key, 'password')) $query->where($key, $value);
        }

        return $query->first();
    }

    public function validateCredentials(Illuminate\Auth\UserInterface $user, array $credentials)
    {
        $plain = $credentials['password'];

        return $this->hasher->check($plain, $user->getAuthPassword());
    }

}

class CodeIgniter extends Illuminate\Auth\Guard {

}

App::bind('Illuminate\Auth\UserProviderInterface', 'CustomUserProvider');

Auth::extend('codeigniter', function()
{
    return new CodeIgniter( App::make('CustomUserProvider'), App::make('session'));
}); 
```

当我运行 Auth::attempt 方法时，出现此错误： ErrorException: Warning: Illegal offset type in isset or empty in G:\Dropbox\Workspaces\www\video\vendor\laravel\framework\src\Illuminate\Foundation\Application .php 第 352 行

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T16:02:43.807

这就是最终解决问题的方式：

**库\CustomHasherServiceProvider.php**

```
use Illuminate\Support\ServiceProvider;

class CustomHasherServiceProvider extends ServiceProvider {

    public function register()
    {
        $this->app->bind('hash', function()
        {
            return new CustomHasher;
        });
    }

} 
```

**库\CustomHasher.php**

```
class CustomHasher implements Illuminate\Hashing\HasherInterface {

private $NUMBER_OF_ROUNDS = '$5$rounds=7331$';

public function make($value, array $options = array())
{

    $salt = uniqid();
    $hash = crypt($password, $this->NUMBER_OF_ROUNDS . $salt);
    return substr($hash, 15);
}

public function check($value, $hashedValue, array $options = array())
{
    return $this->NUMBER_OF_ROUNDS . $hashedValue === crypt($value, $this->NUMBER_OF_ROUNDS . $hashedValue);
}

} 
```

然后我在 app/config/app.php 的 providers 数组中将 'Illuminate\Hashing\HashServiceProvider' 替换为 'CustomHasherServiceProvider'

并在 composer.json 中添加了“app/libraries”来自动加载类映射

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T17:08:41.327

@vFragosop 是在正确的道路上扩展`Auth`.

有几种方法可以给猫剥皮，下面是我在不替换默认`Hasher`类的情况下如何做到这一点：

包括在您的`app/routes.php`或任何地方：

```
use Illuminate\Auth\Guard;
Auth::extend("eloquent", function() {
    return new Guard(
        new \Illuminate\Auth\EloquentUserProvider(new CustomHasher(), "User"),  
        App::make('session.store')
    );
}); 
```

创建并自动加载一个`CustomHasher`类（即`app/libraries/CustomHasher.php`）：

```
class CustomHasher extends Illuminate\Hashing\BcryptHasher {
    public function make($value, array $options = array())
    {
        ...
    }
    public function check($value, $hashedValue, array $options = array())
    {
        ...
    }
} 
```

就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T02:51:42.813

**警告：**我不能确保这是开箱即用的，可能会有一些问题。请记住，Laravel 4 仍在开发中。希望我能提供更准确的答案，但代码库仍在经历许多更改，并非所有内容都已正确记录。无论如何，你正在寻找这样的东西：

```
// on config/auth.php
'driver' => 'custom' 
```

```
// on start/global.php
Auth::extend('custom', function() {
    // CustomUserProvider is your custom driver and should
    // implement Illuminate\Auth\UserProviderInterface;
    return new Guard(new CustomUserProvider, App::make('session'));
}); 
```

如果这没有为您提供足够的信息来开始，您应该能够通过查看以下这些类来弄清楚：

[EloquentUserProvider](https://github.com/laravel/framework/blob/master/src/Illuminate/Auth/EloquentUserProvider.php)和[DatabaseUserProvider](https://github.com/laravel/framework/blob/master/src/Illuminate/Auth/DatabaseUserProvider.php)
这些类是当前支持的身份验证驱动程序。他们应该指导您如何创建您的`CustomUserProvider`（或您真正喜欢的任何名称）。

[Manager](https://github.com/laravel/framework/blob/master/src/Illuminate/Support/Manager.php)
这是任何接受自定义驱动程序（包括[AuthManager](https://github.com/laravel/framework/blob/master/src/Illuminate/Auth/AuthManager.php)）的基类。它提供了像在 Laravel 3 中一样注册它们的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-22T01:14:22.850

这是 Google 上的最高结果，但这些答案对于 Laravel 5 上的任何人来说都是不够的。即使是文档也不够。

我已经成功地只为 UserProvider 替换了 Hasher。我的应用程序的其余部分继续使用非常好的 BcryptHasher，而用户身份验证使用自定义哈希。为此，我必须研究这些答案、文档和 Laravel 的源代码本身。这是我发现的。希望我能拯救别人的头发。随意将其交叉发布到有关 Laravel 5 的问题中。

* * *

首先，创建您的自定义哈希（如果您还没有的话）。把它放在你想要的任何地方。

```
class MyCustomHasher implements Hasher {

    public function make($value, array $options = []) {
        return md5( $value );  // PLEASE DON'T USE MD5!
    }

    public function check($value, $hashedValue, array $options = []) {
        if (strlen($hashedValue) === 0) {
            return false;
        }
        return $hashedValue === $this->make($value);
    }

    public function needsRehash($hashedValue, array $options = []) {
        return false;
    }

} 
```

* * *

编辑任何注册`ServiceProvider`如下...

```
class AppServiceProvider extends ServiceProvider {

    public function boot() {
        Auth::provider('eloquentCustom', function ($app, $config) {
            return new EloquentUserProvider(new MyCustomHasher(), $config['model']);
        });
    }

} 
```

你可以`'eloquentCustom'`用你喜欢的任何东西替换。

* * *

最后，编辑您的`config/auth.php`以使用您的自定义提供程序。以下是相关部分...

```
return [

    // ...

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
        // ...
    ],

    // ...

    'providers' => [
        'users' => [
            'driver' => 'eloquentCustom',  // <--- This is the only change
            'model' => App\User::class,
        ],
        // ...
    ],

    // ...

]; 
```

* * *

* * *

这里有一点解释，因为我不敢相信这是多么晦涩难懂。

如您所料，身份验证配置为`config/auth.php`. 有两个关键部分：Guards 和 Providers。我还没有费心去了解守卫的确切工作，但他们似乎强制执行身份验证要求。提供者负责向警卫提供必要的信息。因此，Guard 需要 Provider。您可以看到，在默认配置中，`guards.web.provider`映射到`providers.users`.

Laravel provides two implementations of `UserProvider` by default: `EloquentUserProvider` and `DatabaseUserProvider`. These correspond to the two possible values for `providers.users.driver`: `eloquent` and `database`, respectively. Normally, the `eloquent` option is chosen. `EloquentUserProvider` needs a `Hasher`, so Laravel gives it whatever the standard implementation is (ie. `BcryptHasher`). We override this behavior by creating our own "driver" for instantiating the Provider.

`Auth` is our friendly neighborhood facade. It is backed by the `AuthManager`. The often suggested `Auth::extend()` method expects a `Guard` (contrary to what the documentation might suggest). We have no need to mess with the Guard. Instead, we can use `Auth::provider()` which basically does the same thing as `extend()`, except it expects a Provider. So we provide a function to create our own instance of a `EloquentUserProvider`, giving it our custom Hasher (eg. `MyCustomHasher`). We also include a driver "name" that can be used in the config file.

Now back to the config file. That driver name that we just created is now a valid value for `providers.users.driver`. Set it there and you're good to go!

I hope this all makes sense and is useful for someone!

# python - 如何在 tkinter 中使用文本框并使用值？蟒蛇 3

> ID：15306197
> 
> 赞同：1
> 
> 时间：2013-03-09T01:40:53.720
> 
> 标签：python, user-interface, tkinter

如何在 tkinter 的条目小部件中创建多行并使用这些输入来创建一些东西？例如，我想要一个文本框小部件出现并询问用户：

```
How many squares do you want? (ex: 4x4, 5x5)
What color do you want them? 
```

通过用户输入，我想在特定的高度/宽度中创建那么多 x 数量的正方形并指定颜色等。我对 tkinter 完全陌生，我不确定如何处理这个问题。

我尝试使用它，但我不确定如何添加更多行并使用输入的值。

```
import tkinter
from tkinter import *

class Squares:
    root = Tk()
    root.title('Random')
    x = Label(text='How many squares? (ex: 4x4, 5x3)').pack(side=TOP,padx=10,pady=10)
    Entry(root, width=10).pack(side=TOP,padx=10,pady=10)
    Button(root, text='OK').pack(side= LEFT)
    Button(root, text='CLOSE').pack(side= RIGHT) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T02:16:44.947

你在这里有很多问题。

我不确定这`Squares`门课应该做什么，但它基本上什么也没做。当您定义类时，您有一堆代码在运行，创建了一些变量（最终将作为类属性，由类的所有实例共享），并且……就是这样。而不是试图弄清楚你在这里想要什么，我只是要废弃这个类并使其成为模块级代码。

你永远不会调用`root.mainloop()`，所以你的程序只会定义一个 GUI，然后永远不会运行它。

您不会将按钮绑定到任何东西，因此它们无法产生任何效果。您需要创建某种功能来做某事，然后将其作为`command`参数传递，或者`.bind`稍后传递。

您不存储任何控件的引用，因此以后无法访问它们。如果要从条目中获取值，则需要某种方式来引用它。（例外是您的`x`变量，但这将是`None`，因为您将其设置为调用 的结果`pack`，`Label`而不是`Label`本身。）

一旦你完成了，你只需要解析这个值，这很容易。

把它们放在一起：

```
import tkinter
from tkinter import *

root = Tk()
root.title('Random')
Label(text='How many squares? (ex: 4x4, 5x3)').pack(side=TOP,padx=10,pady=10)

entry = Entry(root, width=10)
entry.pack(side=TOP,padx=10,pady=10)

def onok():
    x, y = entry.get().split('x')
    for row in range(int(y)):
        for col in range(int(x)):
            print((col, row))

Button(root, text='OK', command=onok).pack(side=LEFT)
Button(root, text='CLOSE').pack(side= RIGHT)

root.mainloop() 
```

你只需要改变它`print`来做一些有用的事情，比如创建正方形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T23:59:25.740

如果您不需要文本框的大纲， create_text 将是最简单的事情，即使它没有自动换行功能（至少，在 python 3 中您可以这样做）：

```
from tkinter import *
tk = Tk()
canvas = Canvas(tk, 1000, 1000)
canvas.pack()
canvas.create_text(200, 200, text="Example Text") 
```

试试看！

# sql - 在 Greenplum 中实现公用表表达式

> ID：15306199
> 
> 赞同：0
> 
> 时间：2013-03-09T01:40:59.670
> 
> 标签：sql, postgresql, common-table-expression, greenplum

有没有办法强制Greenplum PostgreSQL在一个`WITH`子句中实现子查询，就像Oracle中`MATERIALIZE`的`INLINE` [优化器提示](http://www.oracle-base.com/articles/misc/with-clause.php)在下面所做的那样？

```
WITH dept_count AS (
  SELECT /*+ MATERIALIZE */ deptno, COUNT(*) AS dept_count
  FROM   emp
  GROUP BY deptno)
SELECT ... 
```

我已经搜索了一段时间，只是在 Oracle 中找到了这个功能。

我知道我可以使用`CREATE TABLE AS`，但是我有几个类似的查询，迫使我在每次查询后删除临时表，这非常不方便，而且可能效率低下。

**更新**：我测试了下表：

```
CREATE TABLE test (id: INT);

EXPLAIN WITH test2 AS (SELECT id FROM test)
SELECT COUNT(*) FROM test2;

                                 QUERY PLAN                                     
------------------------------------------------------------------------------------
Aggregate  (cost=0.36..0.37 rows=1 width=8)
   ->  Gather Motion 32:1  (slice1; segments: 32)  (cost=0.01..0.35 rows=1 width=8)
         ->  Aggregate  (cost=0.01..0.01 rows=1 width=8)
               ->  Subquery Scan test2  (cost=0.00..0.00 rows=1 width=0)
                     ->  Seq Scan on test  (cost=0.00..0.00 rows=1 width=4) 
```

我正在使用 Greenplum Postgresql 8.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:05:21.703

在 PostgreSQL 中，CTE 是强制实现 CTE 术语的优化障碍。这有望在未来的版本中改变，但如果有的话，将提供向后兼容性选项。

如果您`explain analyze`对查询执行 an ，您会发现该`dept_count`术语正在单独的计划树中作为`CTE Scan`. 它像物化结果一样累积到元组存储中，IIRC。

**更新**：作者实际上是在使用 Greenplum。上述声明对于 Greenplum 来说似乎并不正确，Greenplum 在 PostgreSQL 8.2 代码库之上实现了自己的 CTE 支持，或者对 8.4 CTE 特性进行了非直接的反向移植，并进行了重大更改。在 Greenplum 中，除非有额外的 Greenplum 特定功能可用，否则您可能必须使用临时表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:48:16.900

### 临时表

*如果您正在寻找在会话*期间持续存在的临时表，请使用实际的`TEMPORARY TABLE`.

```
CREATE TEMPORARY TABLE t AS
SELECT deptno, COUNT(*) AS dept_count
FROM   emp
GROUP  BY deptno;

SELECT ...
FROM t ... 
```

[`CREATE [TEMPORARY] TABLE AS`在手册中。](http://www.postgresql.org/docs/current/interactive/sql-createtableas.html)

但是，PostgreSQL 中没有“全局”临时表。临时表仅对创建它的用户可见，并且仅在创建它的会话期间可见。

[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)仅在它们所属的查询中可见。永远不会超越。

### 单个查询专有的临时表

要将临时表的可见性限制为单个查询，请将它们放入事务中并添加[`ON COMMIT DROP`](http://www.postgresql.org/docs/current/interactive/sql-createtableas.html)，这会在事务结束时自动删除临时表：

```
BEGIN;
CREATE TEMP TABLE t ON COMMIT DROP AS
SELECT ... 
```

我能想到的唯一用例，这是有意义的：如果你想在一个巨大的临时表上创建索引：

```
CREATE INDEX ON t(col1);

SELECT ..
FROM t ...;

ROLLBACK; 
```

或者（在这里没有区别）：

```
COMMIT; 
```

如果您使用`ROLLBACK`，您也可以只使用临时表而不使用，`ON COMMIT DROP`因为无论如何都会回滚。

# algorithm - 遍历线段

> ID：15306201
> 
> 赞同：11
> 
> 时间：2013-03-09T01:41:03.767
> 
> 标签：algorithm, data-structures

我对这个算法问题有疑问；我将粘贴问题，然后回顾一下我目前的想法和解决方案。

有`N (up to 100,000)`线段定义为`[(x1, y1), (x2, y2)]`，其中`x1 < x2`和`y1 < y2`（例如，线段具有正斜率）。没有线段接触或相交，即使在端点处也是如此。第一段有`(x1, y1) = (0, 0)`. 将每个部分想象成一个人必须攀登的二维小山。

一个人从第一座山丘开始`(0, 0)`并降落。每当一个人降落在山上时，他都会爬到尽头，`(x2, y2)`然后直接向下跳。如果他降落在另一座山上（路段上的任何地方），该过程将继续：他爬上那座山并跳跃。如果没有更多的山丘，他就会跌倒`-INFINITY`，这个过程就结束了。每个小山`(x1, y1) -> (x2, y2)`都应该被看成是含点`(x1, y1)`而不是含点`(x2, y2)`，这样人从上面的一个位置跌到山上就着地，从上面`x = x1`跌到山上就不会着地。以上在`x = x2`。

目标是计算他接触了多少座山。

**我现在的想法**

我正在考虑沿 x 轴在平面上扫一条线。每个段由一个 BEGIN 和 END 事件组成；每次遇到线段的开头，我们将它添加到一个集合中。每次遇到线段的结尾时，我们都会将其从集合中删除。当我们到达当前山的终点时，我们应该检查我们可以登陆的最高山的集合。但是，我不知道如何确定如何快速检查，因为集合内可能有 N 个条目。另外，跳到另一座山后，这些顺序会改变，因为每个段的坡度可能不同，我不知道如何解释这种差异。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T09:02:40.997

巴伦，你的算法是完全正确的。排序列表中元素的顺序不会随着扫描线的移动而改变，因为如果发生这种情况，您将拥有线段的交点。

您只需要一种方法来跟踪已排序的线段。做到这一点的一种方法是保留线段图，其中比较运算符通过线段上的 y 值比较线段，该线段由当前扫描位置的当前 x 值计算得出。从此映射中插入、删除和查询是 O(log(n))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T05:14:16.293

在预处理中，您可以遍历所有线段并在 stl multimap<pair,linesegment> 或类似的东西中添加点。这种预处理的成本将是 O(NlogN)。然后你可以继续你的扫线方法。您需要从多图迭代点。因为所有点都是排序的，并且包含对点对应的线的引用，所以它将花费 O(N)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:25:40.443

我认为线扫描算法在这里是个好主意。让我总结一下到目前为止的算法并添加我的改进：

*   您正在从左到右扫过一条线。
*   您有一个活动列表，其中列出了所有当前活动的段。这些是与扫描线相交的线段
*   每个线段的每个端点都被认为是一个“事件”
*   当线扫过段的“开始”时，该段被添加到活动段列表中
*   当线扫过段的“末端”时，该段将从活动段列表中删除
*   如果在移除线段时活动集中没有线段，则该过程结束
*   如果移除一条线段后激活集中有线段，我们需要确定
    *   A) 活动集中是否有任何线段的部分“低于”先前移除的端顶点，以及
    *   B）该人将降落在这些线段中的哪一个。

这个想法是对“活动集”中的线段进行排序，以便此查询有效。我在想的是，如果我们知道一条线的斜率和 y 截距，我们可以计算起始顶点 x 位置的交点

```
GreaterThan(segment1,segment2){ // is segment 1 higher than segment 2?
//y = mx + b; compute y value of point on segment 2 for a given x value from s1
//that is, m and b are slope and y-intercept of s2
yVal = m * (segment1.first.x) + b
if (yVal < segment1.first.y)
   return true //the point on s2 corresponding to s1.first is lower than s1.first
return false
} 
```

因为线不相交，所以你可以假设没有其他线会“穿过”这条线。

如果我们避免添加任何开始顶点高于我们“人”当前行的结束顶点的线段，那么我们应该成功地避免将任何无关的线段添加到活动集中（即线段“高于”我们当前的线段）

现在我们只需要担心最后一条线段的顶点不是“可着陆”的特殊情况。因为顶点是事件，所以我们将在进行分段测试之前处理所有事件。这样，您不会意外地落在活动集中线的末端顶点，而是会*落在*刚刚添加的线段上。

现在我们在活动集中有一个线段的排序列表，我们可以在恒定时间内查询它以获得顶部的线段，并且添加一个新的线段应该只需要对数时间。

这听起来如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T04:10:51.800

这是 Haskell 的粗略方向。“段”是线段。（在此示例中，第三段略高于第二段以测试代码。）“匹配”查找将最后一段顶部 pt (x0,y0) 置于其 x 范围内的山/段并且大于或等于对应于 x0 的仿射变换的 y（“仿射”计算段的仿射函数 - 可以说是 ax+b）。最后，countHills 测试下一个山丘的可能匹配项，并选择 y 与 y0 最接近的那个（由仿射 a*x0+b 计算），并输出结果，按顺序累积爬上的山丘。显然，这个想法可能需要针对更长的段列表进行优化。

下面的结果输出显示了第一段和第三段。第二个山/段不在结果中，因为它低于第三个 - 我们落在第三个上：

*Main> countHills 段
[((0.0,0.0),(2.0,5.0)),((1.0,1.5 ),(5.0,3.0))]

```
import Data.List

segments = [((0,0),(2,5)),((1,1),(5,2)),((1,1.5),(5,3))]

top segment = snd segment

matches pt = 
  let x0 = fst pt 
      y0 = snd pt
  in filter (\x -> x0 >= fst (fst x) 
                   && x0 < fst (snd x) 
                   && (affine x) x0 <= y0) segments  

affine segment = 
  let x1 = fst $ fst segment
      y1 = snd $ fst segment
      x2 = fst $ snd segment
      y2 = snd $ snd segment
  in (+ ((x1*y2-x2*y1) / (x1-x2))) . (* ((y2-y1) / (x2-x1)))

countHills segments = countHills' (head segments) [] where
  countHills' x result = 
    let hills = matches $ top x
        x0 = fst (top x)
        y0 = snd (top x)
    in if null hills 
          then result ++ [x]
          else let nextHill = 
                     minimumBy (\a b -> compare 
                                        (y0 - (affine a) x0) 
                                        (y0 - (affine b) x0)) hills
               in countHills' nextHill (result ++ [x]) 
```

# java - Apache Commons Math 的标准差

> ID：15306207
> 
> 赞同：8
> 
> 时间：2013-03-09T01:41:49.783
> 
> 标签：java, math, apache-commons, apache-commons-math

我正在使用 Apache Commons Math 计算向量的 SD。问题：我得到的值与手工不同

```
DescriptiveStatistics stats = new DescriptiveStatistics();
stats.addValue(value1);
...
stats.addValue(value8);
stats.getStandardDeviation(); 
```

例如，取值 [1699.0, 1819.0, 1699.0, 1719.0, 1689.0, 1709.0, 1819.0, 1689.0]。SD 应为 52.067，但 Commons Math = 55.662。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-15T09:43:21.933

Apache *StandardDeviation*类可用于计算两个值：“标准偏差”和“人口标准偏差”。

为了计算第二个值，将其初始化为

```
 StandardDeviation sd = new StandardDeviation(false); 
```

例子：

```
 double[] v = {1.0, 2.0, 3.0, 4.0, 5.0};
    StandardDeviation sd = new StandardDeviation(false);
    sd.evaluate(v);
    // returns 1.414

    StandardDeviation sd2 = new StandardDeviation();
    sd2.evaluate(v);
    // returns 1.581 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T01:48:56.690

Apache 为您提供“标准偏差”，但您正在寻找“人口标准偏差”

也许你可以使用`getPopulationVariance()`然后自己取平方根？我在 DS 库中没有看到此功能。

# c# - 并行运行 Winform 和 XNA 游戏

> ID：15306208
> 
> 赞同：0
> 
> 时间：2013-03-09T01:41:57.097
> 
> 标签：c#, winforms, xna

注意：这个问题**不是**将一个嵌入另一个！

我正在考虑一种方法，让 XNA 游戏窗口在[拖动或调整大小时](https://stackoverflow.com/questions/14324395/xna-game-does-not-update-while-dragging-window-any-event-handlers)[停止执行](https://stackoverflow.com/questions/15299885/preventing-execution-pause-when-dragging-game-window/)，因为它在大多数情况下会中断网络连接并导致与游戏服务器不同步。拥有一个无边界的游戏窗口和一个作为视觉容器的 winform 可以解决问题。问题是，当用户调整假游戏窗口边框（实际上是 winform）的大小时，游戏窗口会检查并调整其边界以适应 winform 的客户区域。听起来很简单，但我一直无法完成这项工作。

游戏窗口和 winform 都应该知道对方的存在，这样如果焦点在 winform 上，它会立即转移到游戏窗口，游戏窗口会自行调整大小以适应 winform，轮询大小变化，或者等待事件触发。我想这涉及交换窗口句柄。

有[一个最近的问题](https://stackoverflow.com/questions/15300887/run-two-winform-windows-simultaneously)，几个小时前被问到关于让两个 WinForms 一起运行。希望它可以帮助您帮助我，从而帮助我们所有人:)

* * *

也在这个问题上：

[XNA 如何在调整大小时渲染和更新](https://stackoverflow.com/questions/15075480/xna-how-to-render-and-update-while-resizing)

[移除焦点时 XNA 运行缓慢](https://stackoverflow.com/questions/15031898/xna-is-running-slow-when-focus-is-removed/15032383#comment21135802_15032383)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:28:45.363

事实证明这并不难，尽管它可能会带来不良的副作用，例如从游戏中窃取资源，导致自发延迟（略微明显），并且要使其完美运行，还需要一些时间。

我所做的是创建一个新`Form`的并为其`ResizeEnd`事件分配一个事件处理程序。事件处理程序将`public static Rectangle fakeWindowRect`假窗口客户区的新矩形设置为使用`Form.RectangleToScreen()`方法计算的新矩形。

以下是一些代码片段：

```
static void Main(string[] args)
{
    System.Windows.Forms.Form f = new System.Windows.Forms.Form();
    f.ClientSize = new System.Drawing.Size(800, 600);
    f.TransparencyKey = f.BackColor;
    ((Action)(() => System.Windows.Forms.Application.Run(f))).BeginInvoke(
                                                               null, null);

    using (Game1 game = new Game1())
    {
        f.ResizeEnd += new EventHandler(game.f_LocationChanged);
        game.Run();
    }
}

public class Game1 : Microsoft.Xna.Framework.Game
{
    public static Rectangle windowRect;

    /* ... */

    protected override void Update(GameTime gameTime)
    {
        if (windowRect.X != this.Window.ClientBounds.X ||
            windowRect.Y != this.Window.ClientBounds.Y ||
            windowRect.Width != this.Window.ClientBounds.Width ||
            windowRect.Height != this.Window.ClientBounds.Height)
        {
             // this method sets the game window size, but not location
            InitGraphicsMode(windowRect.Width, windowRect.Height,
              this.graphics.IsFullScreen);

            var win = System.Windows.Forms.Control.FromHandle(
             this.Window.Handle) as
              System.Windows.Forms.Form;

            win.SetBounds(windowRect.X,
                          windowRect.Y,
                          windowRect.Width,
                          windowRect.Height);
            win.Activate();
        }
    }

    public void f_LocationChanged(object sender, EventArgs e)
    {
        var FakeWindow = sender as System.Windows.Forms.Form;

        var drawClientArea = FakeWindow.RectangleToScreen(
                               FakeWindow.ClientRectangle);
        windowRect = new Rectangle(
                   drawClientArea.X,
                   drawClientArea.Y,
                   drawClientArea.Width,
                   drawClientArea.Height);
    }

} 
```

实施可能到处都是可怕和错误的，但它可以在不从游戏中窃取所有资源的情况下工作，即使在调整假表单的大小时，游戏也会丢弃一些帧，但不会完全暂停。

所以我测试了它，它有效，但它主要用于科学，我不打算很快使用这种方法。也许当我真的，真的需要它的时候。

# c - Matrix 中的同时旋转

> ID：15306213
> 
> 赞同：-1
> 
> 时间：2013-03-09T01:42:53.543
> 
> 标签：c, opengl

有人可以（再次）帮助我吗？我有一个这样的矩阵：

```
1.0  0.0  0.0  2.5
0.0  1.0  0.0  0.0
0.0  0.0  1.0  0.0
0.0  0.0  0.0  1.0 
```

如何同时在 X 轴旋转 20°，在 Y 轴旋转 -128°，在 Z 轴旋转 72.1°？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T01:51:25.483

> 我想同时旋转......在X轴，......在Y轴和......在Z轴

你不能。你所要求的在数学上是不确定的。可以组合基本旋转的顺序有 6 种排列......</p>

*   XYZ
*   XZY
*   YXZ
*   YZX
*   ZXY
*   ZYX

他们每个人都有不同的结果。轮换不像你想的那样工作。在数学上，3 维空间中的旋转形成了一个特殊的 2 次酉群，也写为 SU(2)。SU(2) 中的每个旋转都是唯一的，但可以通过组合 SU(2) 中的无数其他旋转来构造。

在您的特定情况下，该问题没有特定的解决方案。您可以做的最好的事情是选择一个特定的执行顺序，并通过形成相应的旋转矩阵并乘以表示前一个坐标系/转换步骤的矩阵，将旋转一个接一个地应用到您现有的坐标系上。

# c - 使用函数在c中填充和返回字符串数组

> ID：15306215
> 
> 赞同：0
> 
> 时间：2013-03-09T01:43:51.950
> 
> 标签：c, arrays, string, return, populate

好的，所以我的目标是使用该函数来填充字符串数组，然后它将返回这些字符串数组：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int getinfo (char* nam[], int ag[], char* dot[], char* gende[], int x)
{
    printf ("What is the student's name?\t");
    scanf ("%d", &nam[x]);
    printf ("\nWhat is the student's age?\t");
    scanf ("%d", &ag[x]);
    printf ("\nWhat is the student's Date of Birth?\t");
    scanf ("%s", &dot[x]);
    printf ("\nWhat is the student's gender?\t");
    scanf ("%c", &gende[x]);
    printf ("\nWhat is the student's adress?\t");
    return nam[x];
}

int main ()
{
    int amount, y;
    printf("How many students are you admitting?\t");
    scanf ("%d", &amount);
    char *name[50], *dob[50], gender[50];
    int age[50];

    for(y = 0; y < amount; y++)
    {
        getinfo(&name[y], &age[y], &dob[y], &gender[y],y);
    }
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:12:30.427

这只会初始化名称数组，以便您更好地理解发生了什么。缺少的最基本的事情是您必须为字符串数组中的每个字符串分配空间。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void getinfo (char* nam[],int count){
  int y;
  for(y = 0; y < count; y++){
    nam[y] = malloc(50);
    printf ("What is the student's name?\t");
    scanf ("%s", nam[y]);
  }
}

int main (){
  int amount, y;
  printf("How many students are you admitting?\t");
  scanf ("%d", &amount);
  char *name[50];
  getinfo(name,amount);
  for(y = 0; y < amount; y++){
    printf("%s\n",name[y]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:44:14.747

一些东西：

*   您正在阅读`char`s 而不是`char*`s 性别，因此您必须在参数列表中修复它。

*   对于`name`and `dot`，您只是声明了一个包含*指向*字符串的指针的数组。您还需要分配内存来存储字符串。在下面的代码中，为每个字符串分配了 50 个字符。

我还建议不要使用`scanf`来读取字符串，因为下面的代码*很*容易受到缓冲区溢出的影响。没有什么可以阻止用户输入超过 50 个字符。见[http://c-faq.com/stdio/scanfprobs.html](http://c-faq.com/stdio/scanfprobs.html)

无论如何，这里有一些改动很小的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int getinfo (char* nam[], int ag[], char* dot[], char gende[], int x)
{
    printf ("What is the student's name?\t");
    scanf ("%d", &nam[x]);
    printf ("\nWhat is the student's age?\t");
    scanf ("%d", &ag[x]);
    printf ("\nWhat is the student's Date of Birth?\t");
    scanf ("%s", &dot[x]);
    printf ("\nWhat is the student's gender?\t");
    scanf ("%c", &gende[x]);
    printf ("\nWhat is the student's adress?\t");
    return nam[x];
}

int main ()
{
    int amount, y;
    printf("How many students are you admitting?\t");
    scanf ("%d", &amount);
    char *name[50], *dob[50], gender[50];
    int age[50];

    for(y = 0; y < amount; y++)
    {
        name[y] = malloc(50);
        dob[y] = malloc(50);
    }

    for(y = 0; y < amount; y++)
    {
        getinfo(&name[y], &age[y], &dob[y], &gender[y],y);
    }
    system("pause");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:05:05.093

尝试这个：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

typedef char string[50];

void getinfo(char *nam, int *ag, char *dot, char *gende){
    printf ("What is the student's name?\t");
    scanf("%s", nam);

    printf ("\nWhat is the student's age?\t");
    scanf("%d", ag);

    printf ("\nWhat is the student's Date of Birth?\t");
    scanf("%s", dot);

    printf ("\nWhat is the student's gender?\t");
    scanf("%s", gende);

}

int main(){

    int
        amount,
        *age,
        y;

    string
        *name,
        *dob,
        *gender;

    printf("How many students are you admitting?\t");
    scanf("%d", &amount);

    name    = (string *)malloc(sizeof(string));
    dob     = (string *)malloc(sizeof(string));
    gender  = (string *)malloc(sizeof(string));
    age     = (int *)malloc(sizeof(int));

    for(y = 0; y < amount; ++y)
        getinfo(name[y], &age[y], dob[y], gender[y]);

    system("pause");

} 
```

比较你所做的并尝试从中学习。

# jquery - Magento 图像翻转效果

> ID：15306220
> 
> 赞同：0
> 
> 时间：2013-03-09T01:44:22.660
> 
> 标签：jquery, css, magento, rollover

我想在 magento 产品页面上创建一个翻转图像效果，我想知道您是否可以指向我的教程或扩展，或者帮助我编写代码。![在此处输入图像描述](../Images/48b0a986984ed03f761d1347a68e7db0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:46:57.363

您可以使用 Jquery 或 Javascript 执行简单的鼠标悬停功能。只需将其插入主模板。有关更多信息，请发布更多信息或指向实时网站的链接。

像这样的东西，其中 img 表示翻转所需的图像的类或 id。

```
$(function() {

$("img")
    .mouseover(function() { 
        $(this).attr("src", newImageUrl);
    })
    .mouseout(function() {
        var = $(this).attr("src").replace("over.gif", ".gif");
        $(this).attr("src", src);
    });
});` 
```

# python - 一定时间后自动关闭窗口

> ID：15306222
> 
> 赞同：9
> 
> 时间：2013-03-09T01:44:51.130
> 
> 标签：python, tkinter

在一个类中，在一个函数中，我正在创建一个 Tkinter 画布。这个函数正在被另一个类调用，我想让 Tkinter 窗口弹出 30 秒然后自行关闭。我有它的电话

```
master.mainloop()
time.sleep(30)
master.destroy() 
```

但我得到一个错误

> “elf.tk.call（'destroy'，self._w）_tkinter.TclError：无法调用“destroy”命令：应用程序已被销毁”

那么我怎样才能让它自己关闭呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T01:55:28.767

不要`time.sleep()`与 tkinter 一起使用。相反，请在[`after`](http://www.pythonware.com/library/tkinter/introduction/x9507-alarm-handlers-and-other.htm#AEN9509)要关闭的小部件上调用该函数。

这是最简单的例子：

```
import tkinter as tk

w = tk.Tk()
w.after(30000, lambda: w.destroy()) # Destroy the widget after 30 seconds
w.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T01:55:12.423

这里的问题是`mainloop()`直到 GUI 关闭才返回。

因此，在 GUI 关闭并自行销毁30 秒*后，您尝试将其销毁。*显然这失败了。

但是你不能只在主循环中移动`sleep`and`destroy`调用，因为如果你`sleep`在主循环的中间，GUI 将冻结。

因此，您需要某种不会停止主循环的计时器。`tkinter`包括`after`用于该目的的方法。[这个答案](https://stackoverflow.com/questions/2400262/code-a-timer-in-a-python-gui-in-tkinter)给出了一个使用它的详细例子。

# memory-leaks - SublimeCodeIntel 内存泄漏

> ID：15306223
> 
> 赞同：1
> 
> 时间：2013-03-09T01:44:52.430
> 
> 标签：memory-leaks, editor, sublimetext2

当我在编写代码或纯文本时将 Sublime 与*sublimecodeintel*包一起使用时，它使用了 ~1.2GB 的内存和 0% 的 CPU。我观察了内存使用的行为，似乎每次我输入一个单词时，内存使用量都会跳跃~1MB。如果我设置`"codeintel": false,`内存使用恢复正常。这对我来说似乎是一个内存泄漏问题。有什么办法可以解决这个问题吗？

这是我对 sublimecodeintel 的设置（我使用默认设置）

```
/*
    SublimeCodeIntel default settings
*/
{
    /*
        Sets the mode in which SublimeCodeIntel runs:

        true - Enabled (the default).
        false - Disabled.
    */
    "codeintel": true,

    // An array of language names which are disabled.
    "codeintel_disabled_languages":
    [
    ],

    /*
        Sets the mode in which SublimeCodeIntel's live autocomplete runs:

        true - Autocomplete popups as you type (the default).
        false - Autocomplete popups only when you request it.
    */
    "codeintel_live": true,

    // An array of language names to disable.
    "codeintel_live_disabled_languages":
    [
    ],

    /*
        Maps syntax names to languages. This allows variations on a syntax
        (for example "Python (Django)") to be used. The key is
        the base filename of the .tmLanguage syntax files, and the value
        is the syntax it maps to.
    */
    "codeintel_syntax_map":
    {
        "Python Django": "Python"
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:16:55.773

最简单的解决方法是设置`"codeintel":false,`不幸。如果您前往[Github](https://github.com/Kronuz/SublimeCodeIntel)并查看问题，您会发现许多人在性能方面存在问题，尤其是在大型项目中。该插件最初是从[Open Komodo Editor](http://www.openkomodo.com/)移植到 Sublime，我认为在翻译中损失了一些性能。在处理小型项目时我没有任何问题，但是如果我开始`pylab`在[SublimeREPL](https://github.com/wuub/SublimeREPL)`numpy`中使用 IPython（它导入了and的很大一部分`matplotlib`），那么性能可能会慢到爬行 - 这是在四边形上- 核心 3.4 GHz i7 和 20GB RAM，所以我并不渴望电力。

不幸的是，似乎没有任何性能问题得到响应，更不用说在代码中解决了，所以如果有人愿意分析和修复它，我们都会感激不尽！

# c++ - 如何在 C/C++ 中读取结构的类型

> ID：15306224
> 
> 赞同：1
> 
> 时间：2013-03-09T01:45:02.957
> 
> 标签：c++, c, types, struct

我试图在不同的结构中找到任何给定变量的“类型”并能够读取它们。（记住这是伪代码）

例如：

```
#include "stream.h" //a custom stream reader class I made

typedef unsigned char BYTE;

/***** SERIES OF DIFFERENT STRUCTS ******/

struct asset
{
    char *name;
    int size;
    BYTE *data;
};

struct asset2
{
    char *lang;
    char *entry;
};

/*****************************************/

    void readAsset( Enumerable<struct> &istruct)
    {
        foreach( object o in istruct )
        {
            switch( o )
            {
                case int:
                    &o = _stream->ReadInt32();
                    break;
                case char:
                    &o = _stream->ReadChar();
                    break;
                case *:
                    &o = _stream->ReadInt32();
                    break;
                default: break;
            }
        }
    } 
```

我希望它能够执行以下操作：

```
asset a1;
asset2 a2;

readAsset( a1 );
readAsset( a2 ); 
```

并将文件中的所有信息传递给 a1 和 a2。

我想知道 C/C++ 中是否有一种方法可以从结构中的任何对象中获取数据的类型，然后基于该类型进行读取？复杂的枚举有可能吗？抱歉代码不好，但我希望它更容易理解我正在尝试做的事情。

附加信息：

_stream 是一个指向 Stream 类的指针，类似于我在 .Net 中创建的 Stream Reader 它从文件中读取数据并根据读取的数据量来推进它的位置。

如果你不明白我在问什么，我很乐意重新措辞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:48:59.417

如果不将它们全部列出，就无法遍历结构的成员。

您可以在编译时使用`::std::tuple`C++11 迭代结构之类的东西。

你也不能真正以这种方式打开类型。你可以这样做，但你这样做的方式是让几个函数具有相同的名称，每个函数都采用不同的参数类型。就像是：

```
 void doRead(StreamType &stream, int &data)
 {
     data = stream.readInt32();
 }
 void doRead(StreamType &stream, char &data)
 {
     data = stream.readChar();
 }
 // etc... 
```

然后，您只需调用`doRead`您的结构成员，*编译*器就会根据类型神奇地选择正确的成员。

在 C++ 中，解决您在此处解决的问题的方法是使用序列化库。如果您可以控制写入的格式和读取的格式，则可以使用类似[protobuf](https://code.google.com/p/protobuf/)或[boost::serialization](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)的东西相对轻松地完成此操作，而无需编写大量自己的代码。

此外，您的代码还有一些问题。不要`_`在标识符中使用前导字符。带有前导`_`的标识符保留供编译器或标准库实现使用。许多编译器都有特殊的关键字，它们是编译器特定的语言扩展，以`_`字符开头。使用带有前导`_`字符的标识符可能会导致您的代码在某些环境中神秘地无法编译，并出现各种奇怪的难以理解的错误。

* * *

您可以获得类似结构的东西，它在编译时是可枚举的。但这很丑：

```
#include <tuple>
#include <string>
#include <vector>
#include <type_traits>

class asset : public ::std::tuple< ::std::string, ::std::vector<BYTE> >
{
 public:
   ::std::string &name()                   { return ::std::get<0>(*this); }
   const ::std::string &name() const       { return ::std::get<0>(*this); }
   ::std::vector<BYTE> &data()             { return ::std::get<1>(*this); }
   const ::std::vector<BYTE> &data() const { return ::std::get<1>(*this); }
};

void writeToStream(Stream *out, const ::std::string &field)
{
   out->writeString(field);
}
void writeToStream(Stream *out, const ::std::vector<BYTE> &field)
{
   out->writeInt(field.size());
   out->writeRaw(field.data(), field.size());
}

template <unsigned int fnum, typename... T>
typename ::std::enable_if< (fnum < sizeof...(T)), void >::type
writeToStream_n(Stream *out, const::std::tuple<T...> &field)
{
   writeToStream(out, ::std::get<fnum>(field));
   writeToStream_n<fnum+1, T...>(out, field);
}

template <unsigned int fnum, typename... T>
typename ::std::enable_if< (fnum >= sizeof...(T)) >::type
writeToStream_n(Stream *, const::std::tuple<T...> &)
{
}

template <typename... Tp>
void writeToStream(Stream *out, const ::std::tuple<Tp...> &composite)
{
   writeToStream_n<0, Tp...>(out, composite);
}

void foo(Stream *out, const asset &a)
{
   writeToStream(out, a);
} 
```

请注意，没有明确`writeToStream`的`asset`类型。编译器将在运行时通过解包`::std::tuple`它的派生并写出每个单独的字段来编写它。

此外，如果您有裸指针，那么您正在编写糟糕的 C++。如果您要编写 C++，请编写惯用的、好的 C++。你想用运行时反射做的这整件事并不是做事的方式。

这就是我将你`char *name`的和字段表示的`::std::string`大小分隔`BYTE`数组转换为 a 的原因。使用这些类型是编写 C++ 的惯用正确方法。不像以前那样使用裸指针。此外，拥有两个具有高度相关值的字段（和）字段没有行为或任何其他指示它们相关联的字段，即使对于在运行时进行自省的编译器来说，也很难找出正确的做法。它无法知道所指向的数组有多大，也无法知道您决定将其编码为.`size``data``::std::vector``data``size``BYTE``data``size`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T02:01:22.140

你要的是一种叫做[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)的东西——它是：

> 计算机程序在运行时检查和修改对象的结构和行为（特别是值、元数据、属性和函数）的能力。

**C++ 没有“*本机*”。**

我的意思是 - 已经有一些尝试引入它的某些方面 - 取得了不同程度的成功 - 这产生了反射的某些方面，但不是“完整的”反射本身，因为你会在像 Ruby 这样的语言中获得。

但是，如果您喜欢冒险，可以尝试一个名为[Reflectabit](https://bitbucket.org/dwilliamson/reflectabit)的反射库：

要查看它是否值得（它可能正在考虑您的代码），请在此处引用它 - 其中有很多关于如何使用 API 的示例：

[http://www.altdevblogaday.com/2011/09/25/reflection-in-c-part-1-introduction/](http://www.altdevblogaday.com/2011/09/25/reflection-in-c-part-1-introduction/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:17:15.023

C++ 中的常见模式不是试图找出类型的成员是什么，而是提供一个由该类型的实现者实现的运算符，该运算符能够序列化/反序列化到磁盘。

例如，您可以查看 boost::serialize 库。用法并不太复杂，您需要提供一个按某种顺序列出您的成员的函数，然后库将从那里获取它并实现不同格式的序列化。

# opengl - glBufferSubData 改变颜色

> ID：15306230
> 
> 赞同：0
> 
> 时间：2013-03-09T01:45:44.037
> 
> 标签：opengl

我正在尝试更改网格的颜色，但它不起作用。请看下面的代码。

```
typedef struct{
    GLubyte red, green, blue, alpha;
} MTcolor;

typedef struct{
    GLfloat x, y, z;
} MTvertex;

typedef struct{
    MTvertex verts;
    MTcolor colors;
} MTmesh;

GLuint vbo;
GLuint ibo;

static const MTmesh mesh[] = {
    { {0, 0, 0}, {0, 0, 255, 255} },
    { {1, 1, 0}, {0, 0, 255, 255} },
    { {2, 0, 0}, {0, 0, 255, 255} }
};

static const GLushort indices[] = {
    0, 1, 2
}; 
```

制作缓冲区

```
glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, sizeof(mesh), mesh, GL_STREAM_DRAW);

glGenBuffers(1, &ibo);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW); 
```

使成为

```
glEnableClientState(GL_VERTEX_ARRAY);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glVertexPointer(3, GL_FLOAT, sizeof(MTmesh), (void*)offsetof(MTmesh, verts));

glEnableClientState(GL_COLOR_ARRAY);
glColorPointer(4, GL_UNSIGNED_BYTE, sizeof(MTmesh), (void*)offsetof(MTmesh, colors)); 
```

我想改变颜色，但它不起作用。有任何想法吗？

```
MTcolor col[] = {
    255, 0, 0, 255,
    255, 0, 0, 255,
    255, 0, 0, 255
};
glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(col), col); 
```

//绑定索引并绘制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:56:45.093

创建 VBO 时，您使用的是交错数组布局。OpenGL 不知道 VBO 中的内容是什么，它只是一堆字节。当您使用 glBufferSubData 更新 VBO 内容时，“col”数组的布局与网格数组的布局不匹配，因此您会弄乱数据。

为每个顶点属性使用非交错布局或单独的 VBO，或使用 glMapBuffer 将 VBO 映射到客户端地址空间并更新那里的内容。

# python - 如何计算两个列表的所有交错？

> ID：15306231
> 
> 赞同：5
> 
> 时间：2013-03-09T01:45:45.410
> 
> 标签：python, algorithm

我想创建一个接收两个列表的函数，这些列表不保证长度相等，并返回两个列表之间的所有交错。

**输入：**两个大小不必相等的列表。

**输出：**保留原始列表顺序的两个列表之间的所有可能交错。

**示例：** AllInter([1,2],[3,4]) -> [[1,2,3,4], [1,3,2,4], [1,3,4,2], [ 3,1,2,4]，[3,1,4,2]，[3,4,1,2]]

我不想要一个解决方案。我想要一个提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T06:11:00.550

Itertools 不足以处理这个问题，需要对钉子和孔问题有一些了解

考虑您的示例列表

A = [1, 2] B = [3, 4]

有四个孔 ( `len(A) + len(B)`)，您可以在其中放置元素（钉子）

```
|   ||   ||   ||   |
|___||___||___||___| 
```

在 Python 中，您可以将空槽表示为`None`

```
slots = [None]*(len(A) + len(B)) 
```

您可以将第二个列表中的元素（钉子）放入钉子的方式数量很简单，您可以从孔中选择插槽的方式数量是

^(`len(A) + len(B)`)C[`len(B)`]

= ^(`4`)C[`2`]

=`itertools.combinations(range(0, len(len(A) + len(B)))`

可以描述为

```
|   ||   ||   ||   |  Slots
|___||___||___||___|  Selected

  3    4              (0,1)
  3         4         (0,2)
  3              4    (0,3) 
       3    4         (1,2) 
       3         4    (1,3)
            3    4    (2,3) 
```

现在对于这些插槽位置中的每一个，用第二个列表中的元素（钉子）填充它

```
for splice in combinations(range(0,len(slots)),len(B)):
    it_B = iter(B)
    for s in splice:
        slots[s] = next(it_B) 
```

完成后，您只需用第一个列表中的元素（钉子）填充剩余的空槽

```
 it_A = iter(A)
    slots = [e if e else next(it_A) for e in slots] 
```

在使用另一个插槽位置开始下一次迭代之前，请冲洗孔

```
 slots = [None]*(len(slots)) 
```

上述方法的 Python 实现

```
def slot_combinations(A,B):
    slots = [None]*(len(A) + len(B))
    for splice in combinations(range(0,len(slots)),len(B)):
        it_B = iter(B)
        for s in splice:
            slots[s] = next(it_B)
        it_A = iter(A)
        slots = [e if e else next(it_A) for e in slots]
        yield slots
        slots = [None]*(len(slots)) 
```

以及来自上述实现的 O/P

```
list(slot_combinations(A,B))
[[3, 4, 1, 2], [3, 1, 4, 2], [3, 1, 2, 4], [1, 3, 4, 2], [1, 3, 2, 4], [1, 2, 3, 4]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:03:01.183

提示：假设每个列表具有相同的元素（但列表之间不同），即一个列表完全是红色的（比如其中的 r 个），而另一个是蓝色的（比如其中的 b 个）。

输出的每个元素都包含 r+b 或它们，其中 r 是红色的。

似乎其他人已经为您宠坏了，即使您没有要求解决方案（但他们有一个很好的解释）

所以这里是我快速编写的代码。

```
import itertools

def interleave(lst1, lst2):
    r,b = len(lst1), len(lst2)
    for s in itertools.combinations(xrange(0,r+b), r):
        lst = [0]*(r+b)
        tuple_idx,idx1,idx2 = 0,0,0
        for i in xrange(0, r+b):
            if tuple_idx < r and i == s[tuple_idx]:
                lst[i] = lst1[idx1]
                idx1 += 1
                tuple_idx += 1
            else: 
                lst[i] = lst2[idx2]
                idx2 += 1
        yield lst

def main():
    for s in interleave([1,2,3], ['a','b']):
        print s

if __name__ == "__main__":
    main() 
```

基本思想是将输出映射到 (r+b) 选择 r 个组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T01:56:03.280

正如@airza 所建议的那样，该`itertools`模块是您的朋友。

如果您想避免使用封装的神奇优点，我的提示是使用递归。

开始**在你的脑海中播放生成列表的过程**，当你注意到你又在做同样的事情时，**试着找到模式**。例如：

1.  从第一个列表中取出第一个元素
2.  从另一个列表中选择第二个或第一个
3.  要么拿第三名，要么拿第二名，如果你没有，或者从另一个列表中选择另一个
4.  ...

好的，这开始看起来我们没有使用一些更大的逻辑。我只是增加数字。当然，我可以找到一个在更改“第一个元素而不是命名更高元素”时有效的基本案例？

玩它。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T06:08:44.007

你可以尝试一些更接近金属的东西，更优雅（在我看来）迭代不同的可能切片。基本上逐步遍历并遍历标准切片操作的所有三个参数，删除添加到最终列表中的任何内容。如果您有兴趣，可以发布代码片段。

# c# - '对匹配指定绑定约束的类型调用构造函数引发异常

> ID：15306233
> 
> 赞同：4
> 
> 时间：2013-03-09T01:45:59.153
> 
> 标签：c#, xaml, exception-handling

因此，我正在尝试构建一个访问 Etsy API 的程序，到目前为止，我所做的只是使用 OAuth 对其进行调用，然后它会引发此异常。

> '调用与指定绑定约束匹配的'testEtsy.MainWindow'类型的构造函数引发异常。行号“3”和行位置“9”。

这是我的 XAML

```
<Window x:Class="testEtsy.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid></Grid> 
```

这是我在 MainWindow.cs 中的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace testEtsy
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }
        string[] orderNumbers = System.IO.File.ReadAllLines(@"F:\ordernumbers.txt");

        public static void getOAuthKey()
        {

            string ConsumerKey = "q6uqzk27z2yw4tl5s4qerdtp";
            string ConsumerSecret = "tkjz2mu4x1";
            OAuth.Manager m = new OAuth.Manager();
            m["consumer_key"] = ConsumerKey;
            m["consumer_secret"] = ConsumerSecret;
            OAuth.OAuthResponse requestToken =
                m.AcquireRequestToken("https://openapi.etsy.com/v2/oauth/request_token?scope=transactions_r", "POST");
        }

    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T01:51:26.200

最有可能的异常是以下字段初始值设定项

```
string[] orderNumbers = System.IO.File.ReadAllLines(@"F:\ordernumbers.txt"); 
```

此代码将作为`MainWindow`构造函数的一部分运行。如果在读取文件时发生异常，这将传播出构造函数并导致初始化失败。最可能的原因是该文件不存在或无法访问

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T13:04:54.480

您项目的目标可能与第三方库的目标不同。就像快速测试一样，将您的平台目标（在项目 -> 属性 -> 构建下）更改为 x86。如果可行，请检查您拥有的任何外部库是否为 64 位，否则只需构建所有 x86 而不是“任何 CPU”。对我来说，罪魁祸首是 WebsocketSharp，因为你看起来像 OAuth 库？

# css - CSS 中的 at 规则是什么，“at”用于什么

> ID：15306235
> 
> 赞同：5
> 
> 时间：2013-03-09T01:46:09.957
> 
> 标签：css

在 CSS 中有 at-rules 可以做不同的事情，但是我已经看到在几个关键字中使用了**@**符号，例如：

```
@import   
@media   
@keyframes 
```

和其他人，但我正在寻找知道**@**的实际含义以及它是如何使用或更好的，它如何受益、改变或区别于 CSS 的其余部分。

我已经阅读了[关于 at-rules 的 W3 部分，](http://www.w3.org/TR/CSS21/syndata.html#at-rules)但它没有清楚地解释（我实际上读过，我最终更加困惑）**@**的含义和它的具体用途。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T01:53:30.647

`@charset`at-rule 可用于指定外部样式表的字符编码。它必须出现在文件中的任何其他内容之前。

`@import`at-rule 允许我们将一个样式表导入另一个样式表。所有@import at-rules 必须出现在任何规则之前。

`@media`at-rule 让我们将规则定位到我们指定的媒体类型。

`@page`at-rule 可用于指定分页媒体的边距。当您打印双面页面时，您可以为左侧页面和右侧页面设置不同的边距，也可以为第一页设置不同的边距。

`@font-face`at-rule 允许我们指定自定义字体。

`@namespace`CSS3 中的 at-rule 允许我们声明一个 XML 命名空间，以及可以指定该命名空间的可选前缀。

如果我是你，我会查看以下链接。

**首先**：[http ://reference.sitepoint.com/css/atrulesref](http://reference.sitepoint.com/css/atrulesref)

以及以下内容：

[https://developer.mozilla.org/en-US/docs/CSS/At-rule](https://developer.mozilla.org/en-US/docs/CSS/At-rule)
[http://css-tricks.com/at-rule-css/](http://css-tricks.com/at-rule-css/)

# javascript - 为什么 .ico ( Base64 ) 似乎浪费了这么多空间？

> ID：15306240
> 
> 赞同：3
> 
> 时间：2013-03-09T01:47:08.060
> 
> 标签：javascript, base64, gimp

下面是我的徽标图标的 base64 表示。它主要是字符 A。我在 gimp 中制作了它，然后将其转换为 base64。

有没有什么我可以做的不同的事情，这样我就不会浪费那么多空间。我会假设有某种方式可以一遍又一遍地对 A 进行编码，而不是明确地编写它们？

我知道 Base64 会造成 33% 的损失，但这不是我关心的问题。

在 gimp 中，我保存到 .ico，然后使用[在线工具转换为 Base64。](http://webcodertools.com/imagetobase64converter)

> 网址（数据：图像/vnd.microsoft.icon；base64，/3d3d/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN3d3f/d3d3/3d3d/93d3f/d3d1WAAAA

.../snip 继续这样

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T01:53:37.527

Windows 图标文件包含原始未压缩的位图数据，Base64 只是一种具有 33% 扩展率的数据编码方式。

根据您想要做的事情，有几种解决方案：

*   使用 PNG ICO 格式：这是一个普通的多图像 Windows *.ico 文件，除了位图数据存储为 PNG 而不是原始位图。这仅受 Windows Vista 或更高版本支持。（PNG 用于 128x128 和更大的图标尺寸，但出于兼容性和性能原因，位图用于所有较小的尺寸）。
*   直接使用 PNG - 看起来您没有利用 ICO 格式的多图像功能，这是用于网站图标吗？请注意，网站图标可以是任何位图格式，而不仅仅是 ICO。
*   使用你的网络服务器的 GZIP 压缩——假设你通过网络提供你的 ICO 文件，那么低效的存储就不是问题了，因为大多数服务器，包括 IIS，都带有 HTTP Gzip 压缩支持，这真的缩小了这些东西。

除此之外，我/我们需要更多关于你想要完成的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:35:36.947

将其另存为 2 调色板 GIF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T01:49:53.377

一旦你知道了 Base64 的值，你就可以编写一个循环来制作我想的那么多。根据循环的长度，它可能会也可能不会节省文件空间。

# php - 登录数据库失败

> ID：15306248
> 
> 赞同：-3
> 
> 时间：2013-03-09T01:48:11.977
> 
> 标签：php, login, phpmyadmin, registration

我找到了一个登录教程（忘记了 URL），并且我正在通过 PHP 和 HTML 将其制作成游戏，但是为了让用户能够玩，他们必须登录。当我自己访问我的[网页](http://medievaltvg.freeoda.com/)时，我去登录并使用我通过我的网络主机 6te.net 使用 PHPmyAdmin 输入的数据库凭据。我制作了假凭证作为一种测试：`vSpark123`和`ChloeGrace417`. 我收到以下错误消息：

> 数据库登录失败！请确保提供的数据库登录凭据正确 mysqlerror:Access denied for user 'prasanth'@'localhost' (using password: YES) Database login failed!`。

当我去`register.php`我的网站时，我得到了同样的信息。

使用 PHPmyAdmin，它默认将数据库名称设置为`619154`，我在里面创建了带有名称的表`Login`，两列是`Username`和`Password`。是我在 PHPmyAdmin 上做错了什么还是需要在我的 PHP 中修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:08:30.813

您似乎在数据库连接文件中输入了错误的数据库用户名或密码。

如果您忘记了密码，您可以使用以下查询来更新它。

```
UPDATE mysql.user SET Password=PASSWORD('newpassword') WHERE User='prasanth' AND Host='localhost'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:11:30.620

您在这里有两组凭据，您似乎对它们各自的工作方式感到困惑。第一组凭据是您在基于 Web 的登录表单中输入的内容，并存储在您的数据库中；您的用户输入这些凭据，它们将由您的脚本进行验证。第二组，是您的 PHP 脚本必须用来连接到 MySQL 服务器和访问数据库的凭据；您的脚本将这些发送到数据库服务器，并由您的 Web 主机配置的数据库 (MySQL) 服务器验证它们。

当 MySQL 服务器告诉它“访问被拒绝”时，您收到的错误消息是 PHP 执行的典型操作。即错误与*第二*组凭据有关，而不是第一组（因此数据库的结构无关紧要，因为错误发生在您的脚本可以访问数据库之前）。

当您在您的虚拟主机上创建数据库时，您应该已经获得了以下详细信息：服务器（您说过这是`localhost`）、数据库名称（您说过这是`619154`）、用户名和密码。您需要将此信息输入到脚本中的数据库连接调用中；有关查找内容的详细信息，请参阅有关[选择 MySQL API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)的示例。

# google-chrome - Autohotkey Chrome IfWinExist 问题

> ID：15306249
> 
> 赞同：0
> 
> 时间：2013-03-09T01:48:13.677
> 
> 标签：google-chrome, autohotkey

当 Google 语音收件箱中有新消息时，我希望定期重复声音。到目前为止，我想出的是让 GV 收件箱始终在 chrome 中打开，并运行以下脚本：

```
100:
IfWinExist, Google Voice - Inbox (
    SoundPlay, C:\Users\Terry's\Desktop\chimes.wav, wait
Sleep, 1000
Goto 100 
```

如果有新消息，则 GV 选项卡的标题为“Google Voice - Inbox (1) - Google Chrome”，如果没有新消息，则缺少“(1)”，这就是搜索字符串的原因IfWinExist 包含一个“（”。

但是，这仅在 GV 选项卡在 chrome 中具有注意力时才有效（只要 GV 是 chrome 中的选定选项卡，它就会在 chrome 最小化或另一个窗口处于活动状态时起作用）。但是，如果 chrome 中的另一个选项卡引起了注意，那么它将无法工作，我无法弄清楚如何使其工作。我试过调整 SetTitleMatchMode，但这就是我能想出的全部。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:01:47.053

您是否尝试过 AutoHotKey Windows Spy 来查看它`GV`是如何识别的？这就是您需要的（很可能是您已经拥有的字符串）然后将 SetTitleMatchMode 设置为 2（在标题中的任意位置查找字符串）。您可以尝试“转义”“左括号”。

请不要使用睡眠，而是启动一个计时器。我暂时将声音改回我知道有效的声音。一旦这工作，您可以更改回 SoundPlay 并删除 MsgBox。

# 伪代码

```
#SingleInstance Force
#installKeybdHook
#Persistent
SetTitleMatchMode, 2
SetTimer, CheckWin, 10000 ; Run CheckWin every 10 seconds.

CheckWin:
IfWinExist, Google Voice - Inbox (
{
    MsgBox, Alert
    SoundBeep, 700, 700
}
Return 
```

# ruby-on-rails - 在多个端口上运行 Rails 应用程序

> ID：15306251
> 
> 赞同：1
> 
> 时间：2013-03-09T01:48:19.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, passenger

我有一个 Rails 应用程序，我在默认端口 3000 以及使用乘客的端口 80 上运行。这有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:00:01.713

不，除了两个 Rails 服务器实例正在运行。只要它们在不同的端口上就可以了。

作为Passenger 的替代方案，我建议看一下pow ( [http://pow.cx](http://pow.cx) ) 作为运行多个具有域名的实例的一种方式，而无需大惊小怪。

# java - java中的字符串比较解决方案不起作用

> ID：15306255
> 
> 赞同：0
> 
> 时间：2013-03-09T01:49:08.373
> 
> 标签：java, string

我知道这个问题已经被问死了，但我已经尝试了所有针对[这个问题](https://stackoverflow.com/questions/658953/if-statement-with-string-comparison-fails)的解决方案，我的 if 语句仍然没有执行。我的代码是这样的：

```
String s = "Something*like*this*";
String[] sarray = s.split("\\*");

for(int i = 0; i < sarray.length; i++) {
  if(sarray[i].equals("this")) {
    //do something
  }
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:55:18.623

这确实按预期工作

```
for (String token : "Something*like*this*".split("\\*")) {
    if (token.equals("this")) {
        System.out.println("Found this");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:54:36.960

将`if` *在*这里执行。

在 drJava 交互窗格（或您最喜欢的 IDE 窗格）中测试这一点，各个部分（检查它们是否有效）。

```
Welcome to DrJava.  Working directory is C:\JavaProjects
> String s = "Something*like*this";

> String[] sarray = s.split("\\*");

> sarray[0]

"Something"

> sarray[1]

"like"

> sarray[2]

"this"

> sarray[3]

java.lang.ArrayIndexOutOfBoundsException

> sarray.length

> 3 

> sarray[1].equals("this")

false
> 
```

# php - PHP：如何从 .caf 转换为 .mp3 格式？

> ID：15306259
> 
> 赞同：0
> 
> 时间：2013-03-09T01:49:37.420
> 
> 标签：php, api, mp3, caf

我想知道是否有任何方法可以将 caf 文件转换为 mp3 文件，使用任何 api 或任何其他方法用于我基于 php 构建的 Web 应用程序。我不知道这在 php 中是否可行。

我知道我可以`pacpl input.caf -to mp3`在我的服务器上使用它来使其工作，但我有共享主机，我想知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:55:55.227

如果`pacpl input.caf -to mp3`在 bash 中工作，为什么不像这样从 PHP 调用它：

`shell_exec("pacpl input.caf -to mp3");`

`sudo`根据主机服务器配置，您可能需要也可能不需要重新配置权限或在其中使用。

# css - 为什么我的部门在那里？

> ID：15306262
> 
> 赞同：0
> 
> 时间：2013-03-09T01:50:05.190
> 
> 标签：css, html

我有一个包含多个部门的页面。前 3 个从上到下占据页面的整个宽度 170px。接下来是换行符，然后是第四个分区，它应该显示在之前的分区下方。相反，它显示在页面顶部的 3 个分区下方。我已经检查并重新检查以确保所有部门都正确关闭，但这不是问题。我将在下面发布相关代码，首先是 CSS，然后是 HTML，因为我使用的是单独的样式表。

```
#banleft
{
    padding-top: 20px;
    margin-top: 0px;
    margin-left: auto;
    margin-right: auto;
    float: left;
    text-align: center;
    width: 200px;
    height: 170px;
}

#bancenter
{
    padding-top: 20px;
    margin-top: 0px;
    margin-left: auto;
    margin-right: auto;
    float: left;
    text-align: center;
    width: 600px;
    height: 170px;
}

#banright
{
    padding-top: 20px;
    margin-top: 0px;
    margin-left: auto;
    margin-right: auto;
    float: left;
    text-align: center;
    width: 400px;
    height: 170px;
}

#nav
{
    background-image: url(../media/purplemenubar.jpg);
    background-repeat: no-repeat;
    padding-top: 3px;
    padding-left: 30px;
    padding-right: 90px;
    margin-top: 0px;
    margin-left: 0px;
    margin-right: 0px;
    width: 1150px;
    height: 25px;
}

<div id="banleft">Content </div>
<div id="bancenter">Content </div>
<div id="banright">Content </div><br>
<div id="nav" class="cambria3black">Content </div> 
```

值得注意的是：我尝试从最终 div 中删除该类，但这没有帮助。此外，当我将实际内容放入“导航”div 时，它会显示在页面上的适当位置。它只是浮动到顶部和其他分区后面的分区的背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:52:06.200

添加`clear:both`到`#nav`的样式。

或者，考虑使用`display:inline-block`而不是`float:left`.

# ios - GLDrawElements 崩溃程序

> ID：15306264
> 
> 赞同：0
> 
> 时间：2013-03-09T01:50:40.443
> 
> 标签：ios, objective-c, xcode, opengl-es

我正在尝试将一些顶点渲染到 Open GL ES 窗口。我的程序在 GLDrawElements 命令上不断崩溃。我正在尝试为 GLFloat 类型的顶点“bindPosition”、“bindNorml”和“Index”传递一些 VBO。

这是我的渲染方法的链接：

```
- (void)render:(CADisplayLink*)displayLink {

glViewport(0, 0, self.frame.size.width, self.frame.size.height);

glClearColor(0.3, 0.5, 0.9, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glEnable(GL_DEPTH_TEST);
glEnable(GL_CULL_FACE);

GLKMatrix4 modelView = GLKMatrix4Make(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -10, -30, 1);
GLKMatrix4 projectionView = GLKMatrix4Make(3.6213202476501465, 0, 0, 0, 0, 2.4142136573791504, 0, 0, 0, 0, -1.0020020008087158, -1, 0, -24.142135620117188, 28.05805778503418, 30);

// Upload Transforms
glUniformMatrix4fv(_modelViewMatrixUniform, 1, 0, modelView.m);
glUniformMatrix4fv(_modelViewProjMatrixUniform, 1, 0, projectionView.m);

// Upload Bones
glUniformMatrix4fv(_bonesUniform, 1, 0, bones);

glBindBuffer(GL_ARRAY_BUFFER, _bindPositionBuffer);
glVertexAttribPointer(_VertexPositionAttribute, 3, GL_FLOAT, GL_FALSE, sizeof(bindPosition), 0);

glBindBuffer(GL_ARRAY_BUFFER, _bindNormalBuffer);
glVertexAttribPointer(_VertexNormalAttribute, 3, GL_FLOAT, GL_FALSE, sizeof(bindNormal), 0);

// 3
glBindBuffer(GL_ARRAY_BUFFER, _indexBuffer);
glDrawElements(GL_TRIANGLE_STRIP, sizeof(Index)/sizeof(Index[0]), GL_UNSIGNED_SHORT, 0);

[_context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

设置 VBOS：

```
- (void)setupVBOs {

glGenBuffers(1, &_bindPositionBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _bindPositionBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(bindPosition), bindPosition, GL_STATIC_DRAW);

glGenBuffers(1, &_bindNormalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _bindNormalBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(bindNormal), bindNormal, GL_STATIC_DRAW);

glGenBuffers(1, &_indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Index), Index, GL_STATIC_DRAW);

} 
```

编译着色器：

```
- (void)compileShaders {

// 1
GLuint vertexShader = [self compileShader:@"SimpleVertex" withType:GL_VERTEX_SHADER];
GLuint fragmentShader = [self compileShader:@"SimpleFragment" withType:GL_FRAGMENT_SHADER];

// 2
GLuint programHandle = glCreateProgram();
glAttachShader(programHandle, vertexShader);
glAttachShader(programHandle, fragmentShader);
glLinkProgram(programHandle);

// 3
GLint linkSuccess;
glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
if (linkSuccess == GL_FALSE) {
    GLchar messages[256];
    glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
    NSString *messageString = [NSString stringWithUTF8String:messages];
    NSLog(@"%@", messageString);
    exit(1);
}

// 4
glUseProgram(programHandle);

// 5    
// Uniform Locations
_bonesUniform               = glGetUniformLocation(programHandle, "Bones[0]");
_modelViewMatrixUniform     = glGetUniformLocation(programHandle, "ModelViewMatrix");
_modelViewProjMatrixUniform = glGetUniformLocation(programHandle, "ModelViewProjMatrix");
_textureUniform             = glGetUniformLocation(programHandle, "Texture");

// Attribute Locations
_VertexBoneWeightAttribute = glGetAttribLocation(programHandle, "VertexBoneWeight");
_VertexBoneIDAttribute     = glGetAttribLocation(programHandle, "VertexBoneID");
_VertexTexCoord0Attribute  = glGetAttribLocation(programHandle, "VertexTexCoord0");
_VertexNormalAttribute     = glGetAttribLocation(programHandle, "VertexNormal");
_VertexPositionAttribute   = glGetAttribLocation(programHandle, "VertexPosition");    

// Enable vertex pointers
glEnableVertexAttribArray(_VertexBoneWeightAttribute);
glEnableVertexAttribArray(_VertexBoneIDAttribute);
glEnableVertexAttribArray(_VertexTexCoord0Attribute);
glEnableVertexAttribArray(_VertexNormalAttribute);
glEnableVertexAttribArray(_VertexPositionAttribute);

} 
```

这是我的着色器的链接：

```
attribute vec3 VertexPosition;
attribute vec3 VertexNormal;
attribute vec2 VertexTexCoord0;
attribute vec4 VertexBoneID;
attribute vec4 VertexBoneWeight;

uniform mat4 ModelViewMatrix;
uniform mat4 ModelViewProjMatrix;

uniform vec4 Bones[222];

varying vec3 Normal;
varying vec2 TexCoord0;

void main(void)
{
TexCoord0 = VertexTexCoord0;

// Build 4x3 skinning matrix.
vec4 r0 = Bones[int(VertexBoneID.x) * 3 + 0] * VertexBoneWeight.x;
vec4 r1 = Bones[int(VertexBoneID.x) * 3 + 1] * VertexBoneWeight.x;
vec4 r2 = Bones[int(VertexBoneID.x) * 3 + 2] * VertexBoneWeight.x;

r0 += Bones[int(VertexBoneID.y) * 3 + 0] * VertexBoneWeight.y;
r1 += Bones[int(VertexBoneID.y) * 3 + 1] * VertexBoneWeight.y;
r2 += Bones[int(VertexBoneID.y) * 3 + 2] * VertexBoneWeight.y;

r0 += Bones[int(VertexBoneID.z) * 3 + 0] * VertexBoneWeight.z;
r1 += Bones[int(VertexBoneID.z) * 3 + 1] * VertexBoneWeight.z;
r2 += Bones[int(VertexBoneID.z) * 3 + 2] * VertexBoneWeight.z;

r0 += Bones[int(VertexBoneID.w) * 3 + 0] * VertexBoneWeight.w;
r1 += Bones[int(VertexBoneID.w) * 3 + 1] * VertexBoneWeight.w;
r2 += Bones[int(VertexBoneID.w) * 3 + 2] * VertexBoneWeight.w;

// Skin and transform position.
float px = dot(r0, vec4(VertexPosition, 1.0));
float py = dot(r1, vec4(VertexPosition, 1.0));
float pz = dot(r2, vec4(VertexPosition, 1.0));

gl_Position = ModelViewProjMatrix * vec4(px, py, pz, 1.0);

/*  Skin and transform normal into view-space. We assume that the modelview matrix
 doesn't contain a scale. Should pass pass in the inverse-transpose really. */
float nx = dot(r0, vec4(VertexNormal, 0.0));
float ny = dot(r1, vec4(VertexNormal, 0.0));
float nz = dot(r2, vec4(VertexNormal, 0.0));

Normal = normalize((ModelViewMatrix * vec4(nx, ny, nz, 0.0)).xyz);
} 
```

片段着色器：

```
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D Texture;

varying vec3 Normal;
varying vec2 TexCoord0;

void main(void)
{
// Ambient term.
vec3 lighting = vec3(0.5,0.5,0.5) * 0.7;

/*  Very cheap lighting. Three directional lights, one shining slighting upwards to     illuminate
 underneath the chin, and then one each shining from the left and right. Light directional
 are in view-space and follow the camera rotation by default. */
lighting += dot(Normal, normalize(vec3( 0.0, -0.2, 0.8))) * vec3(0.8, 0.8, 0.6) * 0.6;      // Shines forwards and slightly upwards.
lighting += dot(Normal, normalize(vec3(-0.8,  0.4, 0.8))) * vec3(0.8, 0.8, 0.6) * 0.4;      // Shines forwards and from left to right.
lighting += dot(Normal, normalize(vec3( 0.8,  0.4, 0.8))) * vec3(0.8, 0.8, 0.6) * 0.4;      // Shines forwards and from right to left.

//gl_FragColor = vec4(Normal * 0.5 + vec3(0.5), 1.0);
gl_FragColor = vec4(texture2D(Texture, TexCoord0).xyz * lighting, 1.0);
} 
```

任何人都可以在我的渲染方法中看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T08:05:09.260

如果您将 GLFloat 值绑定到您的 GL_ELEMENT_ARRAY_BUFFER，这可能是个问题。您应该绑定 GL_UNSIGNED_BYTE 或 GL_UNSIGNED_SHORT。
[http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawElements.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawElements.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:00:07.503

在您的渲染方法中绑定索引缓冲区时，您应该使用`GL_ELEMENT_ARRAY_BUFFER`而不是`GL_ARRAY_BUFFER`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T08:31:43.647

你的电话`glDrawElements`看起来不正确。你的电话也没有`glBufferData`。

```
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Index), Index, GL_STATIC_DRAW);

glDrawElements(GL_TRIANGLE_STRIP, sizeof(Index)/sizeof(Index[0]), GL_UNSIGNED_SHORT, 0); 
```

看起来您将结构传递给`glBufferData`而不是索引数组。除非您的参数被调用`Index`，但由于您使用它的方式，它似乎不是这样。您需要构建一个顶点索引数组并将其传入以告诉 GPU 您要绘制什么。

第二个参数`glDrawElement`应该是要渲染的元素数量。[我在这个问题](https://stackoverflow.com/questions/8157957/opengl-es-interleaving-vertex-buffer-object)中遇到了类似的问题，有人很有帮助地指出我犯了同样的错误。希望它对你也有帮助。

# java - 休眠左加入lazycollection untouchable

> ID：15306265
> 
> 赞同：0
> 
> 时间：2013-03-09T01:50:52.567
> 
> 标签：java, hibernate

我得到了这样的东西：

```
Criteria crit = session.createCriteria(Parent.class,"p");
parentsList = crit.createCriteria(
    "childSet","c",
    JoinType.LEFT_OUTER_JOIN,
    Restrictions.eq("jt.2ndParentDto.pk2ndParentDto", pk2ndParent))
    .list(); 
```

我的查询返回一个有一个孩子或没有孩子的父母列表，我已经直接测试了记录的查询，所以我很确定。

我必须检索一个孩子列表，所以我添加了父母并创建了缺失的孩子。

```
List<ChildDto> list=new ArrayList<ChildDto>();
for(ParentDto item:parentsList){
    Iterator<ChildDto> it=item.getChildSet().iterator();
    if(it.hasNext()){
        ChildDto dto = it.next();
        dto.setParentDto(item);
        list.add(dto);
    }
    else{
        ChildDto dto = new ChildDto();
        dto.setParentDto(item);
        list.add(dto);
    }
}
return list; 
```

通过调用`item.getChildSet().iterator()`休眠加载整个集合，所以我不能调用`item.getChildSet().iterator().hasNext`来检查集合中是否有东西，我也不能`item.getChildSet().size()`因为完全相同的原因调用...

那怎么办？，还有什么？，我目前没有想法，如果有一套，我怎么能得到唯一的项目？

**更新**：我刚刚尝试了额外的延迟加载，但它并没有改变更好或更坏......

`item.getChildSet().iterator()`仍然会导致加载整个集合。

当我做`item.getChildSet().size()`休眠触发计数时......所以我总是得到整个集合的大小（没用）。

差不多就是这样=/

**更新**：我通过获取 Object[] 项目列表并手动创建类来使用投影。我不喜欢这样做，因为随着 Hbm 的改变，你不得不维护这种查询，所以我尽量避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:58:57.937

您可以更改查询以返回子记录吗？这样你就不会得到整个集合。我开始不清楚。您可以从数据库中获取子对象，然后调用 getParent() 之类的方法来获取您需要的父对象吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:09:03.007

我不确定我是否完全理解您的要求，但我认为您正在寻找 Hibernate [“额外懒惰”的](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-fetching)集合，它允许您获取有关集合的一些信息，包括大小，而无需初始化整个集合，以及将大型集合分批加载到内存中，而不是一次全部加载。

# facebook - 链接到 Facebook 应用程序内的页面

> ID：15306268
> 
> 赞同：0
> 
> 时间：2013-03-09T01:51:26.140
> 
> 标签：facebook

我在 facebook 中有一个应用程序，在该应用程序中你注册了一些东西，你会得到一个个人链接，你可以与人们分享以查看你的个人资料......我如何在 facebook 中获取该链接？

一个例子可能是为了使这更有意义。应用程序位于我的服务器上

[http://example.com/app](http://example.com/app)

您注册并获得个人资料页面

[http://example.com/app/my/profile/123](http://example.com/app/my/profile/123)

我不想给人们那个链接，因为这个应用程序仅适用于 facebook，所以该页面确实需要类似于 facebook.com/mypage/appId/my/profile/123

tl;博士希望人们直接链接到我的 Facebook 应用程序中的特定页面，我不知道该怎么做，或者是否有可能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:39:17.147

如果我正确理解您的问题，请不要使用[http://example.com/app/my/profile/123](http://example.com/app/my/profile/123)尝试使用您的 Facebook 应用 URL，例如[http://apps.facebook.com/app/my/profile/123](http://apps.facebook.com/app/my/profile/123)

# java - java对象比较

> ID：15306271
> 
> 赞同：-1
> 
> 时间：2013-03-09T01:51:50.433
> 
> 标签：java

我正在尝试检查一个对象是否存在于链表中，并根据它是否存在来执行操作，但是，无论我做什么，java都会将所有对象视为不同的。下面提供了主要代码，我很确定逻辑中的错误在此代码中。文章和客户等级非常标准。如果列表包含带有标题的文章，则 flag 变量应该为 true，但始终为 false。任何帮助将非常感激。

```
import java.util.*;
import java.io.*;

public class Proj1 {
public static void main(String[] args) throws FileNotFoundException {

    LinkedList<Article> Articles = new LinkedList<Article>();
    LinkedList<Customer> Customers = new LinkedList<Customer>();
    ListIterator<Customer> it = Customers.listIterator();
    int id = 0;
    String command = "";

    if (args.length == 0 || args[0] == null) {
        System.out.println("Please give a valid command file");
    } else {
        try {
            Scanner reader = new Scanner(new FileInputStream(args[0]));

            while (reader.hasNext()) {
                String arg = reader.nextLine();
                arg.split(" ");
                String[] commands = arg.split("\\s+");

                if (isInt(commands[0])) {
                    id = Integer.parseInt(commands[0]);
                    command = commands[1];
                    Customer temp = new Customer(id);
                    if (Customers.size() == 0) {
                        Customers.add(temp);
                    } else {
                        boolean flag = false;
                        for (int i = 0; i < Customers.size(); i++) {
                            if (id == Customers.get(i).getId()) {
                                flag = true;
                            }
                        }
                        if (flag == false) {
                            Customers.add(temp);
                        }
                    }
                } else {
                    command = commands[0];
                }
                // System.out.println(id+" "+command);
                if (command.equalsIgnoreCase("borrow")) {
                    String title = "";
                    int x = commands.length;
                    boolean flag = false;
                    for (int j = 2; j < x; j++) {
                        title += commands[j] + " ";
                    }
                    Article Article = new Article(title);
                    System.out.println(Articles.size());
                    if (Articles.size() == 0) {
                        Articles.add(Article);
                    } else {

                        for (int i = 0; i < Articles.size(); i++) {
                            if (Article.getTitle() == Articles.get(i).getTitle()) {
                                flag = true;
                            }
                        }
                        if (flag == false) {
                            Articles.add(Article);
                        }
                    }

                    System.out.println(flag);
                    for (int i = 0; i < Customers.size(); i++) {
                        if (Customers.get(i).CustomerList().contains(title) && flag == true) {
                            Article.addToQ(Customers.get(i));

                        } else {
                            Customers.get(i).CustomerBorrow(Article);

                        }

                    }

                    // System.out.println(title);
                } else if (command.equalsIgnoreCase("return")) {
                    String title = "";
                    int x = commands.length;
                    for (int j = 2; j < x; j++) {
                        title += commands[j] + " ";
                    }
                    Article Article = new Article(title);
                    if (Articles.size() == 0) {
                        Articles.add(Article);
                    } else {
                        boolean flag = false;
                        for (int i = 0; i < Articles.size(); i++) {
                            if (title == Articles.get(i).getTitle()) {
                                flag = true;
                            }
                        }
                        if (flag == false) {
                            Articles.add(Article);
                        }
                    }
                    for (int i = 0; i < Customers.size(); i++) {
                        if (id == Customers.get(i).getId()) {
                            Customers.get(i).CustomerReturn(Article);
                        }
                    }
                    // System.out.println(title);
                } else if (command.equalsIgnoreCase("list")) {
                    for (int i = 0; i < Customers.size(); i++) {
                        if (id == Customers.get(i).getId()) {
                            System.out.println("Customer " + id
                                    + " currently has: "
                                    + Customers.get(i).CustomerList());
                        }
                    }
                } else if (command.equalsIgnoreCase("whohas")) {
                    String title = "";
                    int x = commands.length;
                    for (int i = 1; i < x; i++) {
                        title += commands[i] + " ";
                    }
                    boolean flag = false;
                    int tempId = 0;
                    for (int i = 0; i < Customers.size(); i++) {
                        tempId = Customers.get(i).getId();
                        if (Customers.get(i).CustomerList().contains(title)) {
                            flag = true;
                            tempId = Customers.get(i).getId();
                        }
                    }
                    if (flag = true) {
                        System.out.println(tempId + " currently has "
                                + title);
                    } else {
                        System.out
                                .println("Currently no one has checked out "
                                        + title);
                    }

                    // System.out.println(title);
                } else if (command.equalsIgnoreCase("waitlist")) {
                    String title = "";
                    int x = commands.length;
                    for (int i = 1; i < x; i++) {
                        title += commands[i] + " ";
                    }
                    for (int i = 0; i < Customers.size(); i++) {
                        if (Customers.get(i).CustomerList().contains(title)) {
                            Articles.get(i).printQ();

                        }
                    }
                    // System.out.println(title);
                } else if (command.equalsIgnoreCase("listCustomers")) {
                    System.out.println("Customers include: ");
                    for (int i = 0; i < Customers.size(); i++) {
                        System.out.println(Customers.get(i).getId());
                    }

                } else {
                    System.out.println("Command not recognized");
                }

            }

            reader.close();
        }

        catch (Exception e) {
            System.out.println("command not formatted correctly");
        }
    }

}

public static boolean isInt(String string) {
    try {
        Integer.parseInt(string);

    } catch (NumberFormatException nfe) {
        return false;
    }
    return true;
}

} 
```

命令，例如

29 借《纽约时报》

29 借《纽约时报》

允许重复，我试图避免这种情况。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:59:45.200

难道是这样

```
if (Article.getTitle() == Articles.get(i).getTitle()) { 
```

打算比较字符串？这可以解释为什么你的标志总是返回错误。要在 Java 中比较字符串，您应该使用`equals`（或`equalsIgnoreCase`用于不区分大小写的比较）

```
if (Article.getTitle().equals(Articles.get(i).getTitle()) { 
```

更多背景信息[在这里](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:54:00.240

我只是猜测，但我敢打赌，您要么没有在您的and类中覆盖`equals`and ，*要么*您没有正确执行。`hashCode``Customer``Article`

 *Joshua Bloch 在“Effective Java”的第 3 章中向您展示了如何操作。

我还想知道`Set`如果不允许重复，为什么您不选择数据结构。*

# inheritance - 一个方法如何在咖啡脚本中既可被覆盖又可用作回调

> ID：15306273
> 
> 赞同：0
> 
> 时间：2013-03-09T01:52:23.097
> 
> 标签：inheritance, methods, callback, coffeescript

我想创建一个类，它的方法可以被子类覆盖，但也可以用作回调。看来我只能在一种或另一种情况下获得所需的行为。这是一个例子：

```
class Parent
    constructor: () ->
        @foo = "foo"

    fooNotAlwaysDefined: () ->
        console.log("In parent.fooNotAlwaysDefined, @foo:#{@foo}")

    childNotCalled: () =>
        console.log("In parent.childNotCalled, @foo:#{@foo}")

class Child extends Parent
    fooNotAlwaysDefined: () ->
        console.log("In child.fooNotAlwaysDefined, @foo:#{@foo}")

    childNotCalled: () ->
        console.log("In child.childNotCalled, @foo:#{@foo}")

c = new Child()
c.fooNotAlwaysDefined()
c.childNotCalled()
process.nextTick(c.fooNotAlwaysDefined)
process.nextTick(c.childNotCalled) 
```

我想要的是调用子函数并且 @foo 在两种用途中都在范围内（c。和作为回调）。这是我得到的输出：

> 在 child.fooNotAlwaysDefined 中，@foo:foo
> 
> 在 parent.childNotCalled 中，@foo:foo
> 
> 在 child.fooNotAlwaysDefined 中，@foo:undefined
> 
> 在 parent.childNotCalled 中，@foo:foo

我发现的最好的解决方法是我可以将 fooNotAlwaysDefined 包装在一个提供给 process.nextTick 的匿名函数中，但这并不理想。

```
process.nextTick(() -> c.fooNotAlwaysDefined()) 
```

> 在 child.fooNotAlwaysDefined 中，@foo:foo

有没有办法构造类，以便我得到我想要的行为？

编辑：回答：下面非常有用的评论的摘要是 childNotCalled 看到的行为是一个错误。我会注意到我在 1.6.1 中看到了这种行为，所以虽然它可能已经得到改进，但它并没有解决这个问题。

第二次编辑：问题似乎已在 1.6.2 中完全解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:21:15.893

这是`this`没有正确绑定的经典问题。除了您已经找到的解决方案之外，还有两种可能的解决方案：

您也可以`childNotCalled`使用粗箭头进行定义。

嗯，有点恶心。粗箭头方法是一种代码味道，因为它们“通常有效”但允许你偷懒而不去考虑`this`. 更清洁的方式：

```
process.nextTick child.fooNotAlwaysDefined.bind(child) 
```

这*大致*相当于将其包装为一个匿名函数，但更具声明性，即使您将`child`变量重新分配给其他东西也可以工作。`fooNotAlwaysDefined`它返回一个带有`this`绑定到的新实例`child`，因此当它在下一个滴答时执行时，它将具有正确的`this`.

这与用粗箭头声明方法的做法非常相似，只是让它更明确、更高效、更容易理解（因为你可以从那行代码中看到它在做正确的事情，而不是必须检查方法的定义以确保正确性）。

超类中的胖箭头将覆盖子方法的实现，除非他们也使用胖箭头，这一事实使它们对我没有吸引力（检查编译的代码以了解为什么会这样。这是唯一的方法，并且没有办法绕过它（除了禁止胖箭头方法），但这不是你所期望的）。这是 CoffeeScript 的一个特性，我觉得没有它会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:49:03.997

这正是 Underscore 的`bindAll`方法所针对的情况。它将一组方法绑定到`this`，以便它们可以用作回调。此外，它与继承配合得很好，这在 CoffeeScript 的粗箭头语法中似乎失败了。

[http://underscorejs.org/#bindAll](http://underscorejs.org/#bindAll)

如果您不想使用 Underscore 或 LoDash，您可以通过在`Parent`的构造函数中添加以下内容来自己完成：

```
for methodName in ['fooNotAlwaysDefined', 'childNotCalled']
    @[methodName] = do(method = @[methodName]) =>
        => method.apply @, arguments 
```

使用下划线的`bindAll`方法更干净：

```
_.bindAll @, 'fooNotAlwaysDefined', 'childNotCalled' 
```

或者，如果您不担心与旧浏览器的兼容性（好像您在 Node 中运行），您可以假设函数具有内置`bind`方法：

```
@fooNotAlwaysDefined = @fooNotAlwaysDefined.bind @
@childNotCalled = @childNotCalled.bind @ 
```

# css - 在 DIV 中使用不同的 CSS 文件？

> ID：15306293
> 
> 赞同：0
> 
> 时间：2013-03-09T01:56:03.720
> 
> 标签：css, html

我有一个网站，其中包含定义其所有样式的相应 CSS 文件。但是，在其中一个网页上有一个特定的 DIV 容器，我希望样式有所不同。

这是我的新手问题：有没有办法指定另一个仅适用于该 DIV 的 CSS 文件？如果是这样，怎么做？如果没有，有没有其他方法可以达到类似的效果？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:03:36.027

您可以通过以下方式实现它：
1\. 为相关 div 分配一个类，例如

```
<div class="different"> 
```

然后在您的默认 css 中为此类设置不同的样式，例如：

```
.different{
    font-size:12px;
} 
```

2.另一种方法是使用ID，因为ID对于一个元素是唯一的，并且在页面上只有一个元素可以具有该ID。

```
<div id="diff"> 
```

而不是在您当前的 css 文件中，您可以编写如下内容：

```
#diff{
    font-size:12px;
} 
```

它们都可以满足您的目的，但类可以多次使用，并且 ID 对于给定元素是唯一的。因此，由您决定采用哪种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:00:54.950

您可以编写现有 css 文件的另一类或创建一个新文件（如果是新文件，您需要在 head 标签中添加对它的引用）并像这样为该 div 编写它们的 css 属性

```
.MyDivClass
{
// your properties here
} 
```

并像这样与你的 div 一起使用它

```
<div class="MyDivClass">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:00:55.007

我不知道。我会这样做

```
<div id="special-div"></div> 
```

我将创建一个特殊的 css 文件并包含`#special-div{/*styles here*/}`

我认为最好将样式表包含在其中`<head>`。

# php - PHP 只选择一项显示

> ID：15306299
> 
> 赞同：0
> 
> 时间：2013-03-09T01:57:03.233
> 
> 标签：php, mysql, sql, select, mysqli

当我使用这段代码时怎么会：

```
$emailc = 'thomas990428@me.com_classes';
$emaila = 'thomas990428@me.com_assignments';
$emailp = 'thomas990428@me.com_projects';

$resulty = mysqli_query($con,"SELECT * FROM `$emailc` ORDER BY period"); if (!$result) echo mysqli_error(); else // ok, do your thing.
$resulti = mysqli_query($con,"SELECT * FROM `$emaila` ORDER BY duehw"); if (!$result) echo mysqli_error(); else // ok, do your thing.
$resulto = mysqli_query($con,"SELECT * FROM `$emailp` ORDER BY dueproj"); if (!$result) echo mysqli_error(); else // ok, do your thing.

$classcount = 1;

while($row = mysqli_fetch_array($resulty))
  {

  $period = $row['period'];
  $teacher = $row['teacher'];
  $subject = $row['subject'];
  $subjecto = strtolower($subject);
  $subjecto = str_replace(' ', '', $subjecto);
  $grade = $rowy['grade'];

  echo "<section id='" . $subjecto . "'> \n";
  echo "<p class='title'>" . $subject . "</p> \n";
  echo "<a style='cursor:pointer;' onclick='homework" . $classcount . "()'>Homework&nbsp;</a>|<a style='cursor:pointer;' onclick='projects" . $classcount . "()'>&nbsp;Projects</a> \n";
  echo "<div id='homework" . $classcount . "'><br /><a onclick='addassignment()'>Add Assignment</a><br />";
  echo "<table class='homework'>";
  echo "<tr>";
  echo "<th class='title'>";
  echo "Title";
  echo "</th>";
  echo "<th class='duedate'>";
  echo "Due Date";
  echo "</th>";
  echo "</tr>";

  while($row = mysqli_fetch_array($resulti))
    {

      $subjecthw = $row['subjecthw'];
      $namehw = $row['namehw'];
      $duehw = $row['duehw'];

      echo "<tr>";
      echo "<td class='title'>";
      echo $namehw;
      echo "</td>";
      echo "<td class='duedate'>March ";
      echo $duehw;
      echo "</td>";
      echo "</tr>";

    }

  echo "</table>";
  echo "</div> \n";
  echo "<div id='projects" . $classcount . "'><br /><a onclick='addassignment()'>Add Assignment</a><br />";
  echo "<table class='homework'>";
  echo "<tr>";
  echo "<th class='title'>";
  echo "Title";
  echo "</th>";
  echo "<th class='duedate'>";
  echo "Due Date";
  echo "</th>";
  echo "</tr>";

  while($row = mysqli_fetch_array($resulto))
    {

      $subjectproj = $row['subjectproj'];
      $nameproj = $row['nameproj'];
      $dueproj = $row['dueproj'];

      echo "<tr>";
      echo "<td class='title'>";
      echo $nameproj;
      echo "</td>";
      echo "<td class='duedate'>March ";
      echo $dueproj;
      echo "</td>";
      echo "</tr>";

    }

  echo "</table>";
  echo "</div> \n";
  echo "</section> \n";

  $classcount += 1;

  } 
```

我只在一个部分中获得了硬件和项目。我做错了吗？谢谢！我知道它可能永远不会起作用，但是我该如何解决呢？我有 3 个表，我需要从所有表中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:55:18.350

不要`$row`在`while`循环内使用。

例如

```
while($row = mysql_fetch_row($resulti)){
    while($row2 = mysql_fetch_row($resulto)){

    }
} 
```

也没有时间浏览代码，但在循环中运行 SQL 绝不是一个好主意。

# c# - C# var 有强类型吗？

> ID：15306301
> 
> 赞同：4
> 
> 时间：2013-03-09T01:57:14.417
> 
> 标签：c#, runtime, type-conversion, var, rtti

如链接所示：http: [//msdn.microsoft.com/en-us/library/bb383973.aspx](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

...隐式类型的局部变量是强类型的，就像您自己声明了类型一样，***但是编译器确定类型***...

但我有这样一段代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["user"] == null) Response.Redirect("Default.aspx");

        StringBuilder sb = new StringBuilder();

        foreach (var item in Session)
        {
            sb.Append("Session Parameter: [");
            sb.Append(item);
            sb.Append("]<p />Guid Value: [");
            sb.Append(Session[item] + "]");
        }

        Response.Write(sb.ToString());
    } 
```

我在 Visual Studio 中遇到这样的错误：

***参数 1：无法从 'object' 转换为 'string' 的行：***

```
 sb.Append(Session[item] + "]"); 
```

但是`item`在运行时将其识别`string`为我在调试器中查看的类型。

当我`var`在 msdn/in 上阅读书籍时，我认为这`var`与 RTTI 无关。编译器只是在编译时使用这种隐式类型在显式类型等上更改变量`string, int`。

为什么我会发现这样的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T02:00:03.207

C# 中的`var`声明是强类型的，但在这种情况下，您正在处理 value 中的非泛型集合类型`Session`。这会导致 C# 选择`object`的类型，`item`因此您在尝试`item`在需要`string`.

对于非泛型集合，您仍需要在`foreach`块中显式键入迭代器变量

```
foreach(string item in Session) { 
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T02:00:08.157

“为什么我会发现这样的错误？” - 因为`sb.Append(Session[item] + "]");`期待一个字符串 - 所以你需要将它`Session[item]`转换为一个字符串：

```
sb.Append(((string)Session[item]) + "]"); 
```

根据 MSDN 文章[How to: Read Values from Session State](http://msdn.microsoft.com/en-us/library/03sekbw5%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T01:59:55.310

在这种情况下，`Session`是一个[HttpSessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx)实现`IEnumerable`（尽管如果它实现也会发生同样的情况`IEnumerable<object>`），所以你`var`被编译器映射到：

```
 foreach (object item in Session)
  { 
```

在这种情况下，这很可能是`IEnumerable`，因此您需要在 中明确指定类型`foreach`：

```
 foreach (string item in Session)
  { 
```

`foreach`对于非泛型`IEnumerable`集合，这是允许的。

至于你的主要问题：

> C# var 有强类型吗？

是的。在这种情况下，*集合本身*不提供强类型，因此`var`使用`System.Object`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T02:00:22.443

你是对的，`var`是静态输入的（即在编译时）。然而，的静态类型`var`来自上下文，它允许编译器派生`var`.

在`Session`which implements的情况下`IEnumerable`，编译器可以派生的唯一类型是`object`，导致您描述的错误。

已经`Session`实现了，比如说，`IEnumerable<string>`循环`var`中的 将等效于`string`，而不是`object`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T02:00:44.637

在您的示例中，它归结为集合`Session`的类型。在这种情况下，它是对象的集合，因此编译器`var item`会将`object item`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T02:01:10.627

正如其他答案所表明的那样，Session 的 Item 属性（这是默认索引器）是 object 类型的。这就是您从索引器获取对象的原因 - 这是它的返回类型。

[http://msdn.microsoft.com/en-us/library/k8s0kehy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/k8s0kehy(v=vs.100).aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-09T02:03:45.073

这是因为对象是不同的类型。很像为什么派生类与其基类不同（例如：）`class D : B{}`。所有类类型都继承`Object`，值（结构）我相信没有。他们需要装在盒子里。该`Session`系列只是说它有一堆物品，里面可能有任何东西。除非您要求（通过 typecast 或 is 关键字），否则运行时不会尝试检查。（更多关于下面的编译器）

The var in that foreach is saying this variable (item) should be whatever type Session enumerator returns. For the most part specifying a different type there is like a typecast.

Just because something is a class or boxes (which means it is an object) doesn't mean the compiler has any idea of what the object actually is. In fact I think the standards suggest if something becomes an object the compiler should not auto convert it even if it knows what type it actually is (perhaps it knows from a few lines above)

# actionscript - Actionscript：舞台宽度小于提供的嵌入尺寸和 StageVideo.videoWidth

> ID：15306302
> 
> 赞同：0
> 
> 时间：2013-03-09T01:57:18.070
> 
> 标签：actionscript

这怎么可能。如何在 html embed costructor 中小于提供的嵌入宽度和高度？

```
<script type="text/javascript">
    // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
    var swfVersionStr = "${version_major}.${version_minor}.${version_revision}";
    // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
    var xiSwfUrlStr = "${expressInstallSwf}";
    var attributes = {};
    attributes.id = "${application}";
    attributes.name = "${application}";
    attributes.align = "middle";
    swfobject.embedSWF(
        "${swf}.swf", "flashContent"
        ,"640", "360"
        ,swfVersionStr
        ,xiSwfUrlStr
        // flashvars
        ,{}
        // Params
        ,{
            wmode:'direct'
            ,quality:'high'
            ,bgcolor:'#ffffff'
            ,allowscriptaccess:'always'
            ,allowfullscreen:'true'
            ,allownetworking:'all'
        }
        ,attributes
    );
</script> 
```

动作脚本部分：

```
stage.addEventListener(Event.ENTER_FRAME, onFrame);
private function onFrame(event:Event):void 
{
    log('stage width,height',stage.width,stage.height,sv.videoWidth,sv.videoHeight);
} 
```

输出：

```
stage width,height 320 276 720 404 
```

如何让舞台全屏？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:15:33.310

对于嵌入中设置的尺寸，您需要[stage.stageWidth](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#stageWidth)和 stage.stageHeight。

对于所有 DisplayObject，.width 和 .height 表示内容的大小。因此，无论在嵌入代码中给出的 Flash Player 的大小如何，一个空的舞台的宽度和高度都为零。

换句话说，`stage.stageWidth`是 Flash Player`stage.width`的宽度，而是添加到舞台上的东西的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:15:23.317

如果您的问题是关于使您的 Flash 全屏显示，那么只需添加以下代码：

```
stage.displayState=StageDisplayState.FULL_SCREEN; 
```

# html - CSS 选择器选择第一个和第二个表格单元格

> ID：15306303
> 
> 赞同：6
> 
> 时间：2013-03-09T01:57:24.333
> 
> 标签：html, css

有人可以帮我弄清楚在我的两列表上全局更改列的宽度需要哪些选择器？

使用它，当然会选择所有单元格：

```
table td {
    width: 50px;
} 
```

我想要的是这样的：

```
<table>
    <tr>
        <td style="width: 50px">data in first column</td>
        <td style="width: 180px">data in second column</td>
    </tr>
    <tr>
        <td style="width: 50px">more data in first column</td>
        <td style="width: 180px">more data in second column</td>
    </tr>
</table> 
```

我想将宽度规范放在样式表中，而不是为每个标签隐式输入宽度。什么 CSS 选择器可以让我适当地设置 50px 的宽度和 180px 的宽度？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-09T02:00:24.210

是的。

```
td:first-child{
   width:50px;
}

td:nth-child(2){
   width: 180px;
} 
```

或者，正如 Brainslav 的编辑所建议的那样：

```
td:nth-child(1) {
      width: 50px;}
td:nth-child(2) {
      width: 180px;} 
```

[关联](http://jsfiddle.net/BRANIS/QmMz4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T02:01:40.467

尝试`class`在标记中使用名称并使用`colgroup`. 这是迄今为止最省事的，因为您仅在 中定义宽度`colgroup`，并且与跨浏览器兼容。

例如。

```
<table>
    <colgroup>
        <col class="colOne" />
        <col class="colTwo" />
    </colgroup>
    <tr>
        <td>data in first column</td>
        <td>data in second column</td>
    </tr>
    <tr>
        <td>more data in first column</td>
        <td>more data in second column</td>
    </tr>
</table>

/* CSS */

.colOne{
    width: 50px;
}
.colTwo{
    width: 180px;
} 
```

见小提琴：http: [//jsfiddle.net/4ebnE/](http://jsfiddle.net/4ebnE/)

但有一件事`colgroup`在 HTML5 中已被弃用。但话说回来，HTML5 还没有标准化，所以你可以打电话。

哦，如果您愿意，也可以不使用任何 CSS：

```
<table>
    <colgroup>
        <col width="50"/>
        <col width="180" />
    </colgroup>
    <tr>
        <td>data in first column</td>
        <td>data in second column</td>
    </tr>
    <tr>
        <td>more data in first column</td>
        <td>more data in second column</td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:10:56.063

我认为你最好的选择是使用 css 伪选择器：

```
table tr td:first-child {
    width: 50px;
}
table tr td:last-child {
    width: 150px;
}
td {
    background: gray;
}

<table>
    <tr>
        <td>data in first column</td>
        <td>data in second column</td>
    </tr>
    <tr>
        <td>more data in first column</td>
        <td>more data in second column</td>
    </tr>
</table> 
```

这是关于 JSFiddle 的示例：http: [//jsfiddle.net/scottm28/gGXy6/11/](http://jsfiddle.net/scottm28/gGXy6/11/)

或者，您也可以使用[CSS3 :nth-child() 选择器](http://www.w3schools.com/cssref/sel_nth-child.asp)

# c - 从文本文件中读取字符串和整数

> ID：15306314
> 
> 赞同：3
> 
> 时间：2013-03-09T01:59:43.447
> 
> 标签：c, string, scanf

假设我有一个文件看起来像这样

```
51.41 52.07 52.01 51.22 50.44 49.97 Coal Diggers
77.26 78.33 78.29 78.12 77.09 75.74 Airplane Flyers
31.25 31.44 31.43 31.09 31.01 30.92 Oil Fracting and Pumping
52.03 12.02 12.04 22.00 31.98 61.97 Big Bank
44.21 44.32 44.29 43.98 43.82 43.71 Rail Container Shipping
93.21 93.11 93.02 93.31 92.98 92.89 Gold Bugs 
```

我想使用 fscanf 读取这个文件字，将数字放在浮点数组中，将字放在字符串数组中。但是，经过几个小时的艰苦思考，我仍然无法弄清楚如何解决这件事。

```
void dataInsert (COMPANY* company1, COMPANY* company2, COMPANY* company3, COMPANY* company4, COMPANY* company5, COMPANY* company6)
{
//Function Declaration
FILE* spData;
float number;
char* name[20];

//Statement
if ((spData = fopen("dataFile","r")) == NULL)
{
    fprintf(stderr, "ERROR OPENING!!");
    exit (1);
}

int i = 0;
int numCount = 0;
int lineCount = 0;
while (fscanf(spData, "%f", &number) != EOF)
{
    if(isdigit(number))
    {
        if (lineCount == 0)
        {
            company1 -> stock_price[i] = number;
        }
        else if (lineCount == 1)
        {
            company2 -> stock_price[i] = number;
        }
        else if (lineCount == 2)
        {
            company3 -> stock_price[i] = number;
        }
        else if (lineCount == 3)
        {
            company4 -> stock_price[i] = number;
        }
        else if (lineCount == 4)
        {
            company5 -> stock_price[i] = number;
        }
        else if (lineCount == 5)
        {
            company6 -> stock_price[i] = number;
        }

        numCount++;
        i++;
        if (numCount == 6)
        {
            lineCount++;
            numCount = 0;
            i = 0;
        }
    }
}//while
fclose (spData);
}//dataInsert 
```

我不知道如何处理每行末尾的字符串。我想把这些字符串放在结构公司-> 名称 [10] 中。这些数据在一个文本文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:23:52.047

`fscanf`我建议不要使用`fgets`来获取线路。然后`sscanf`在该行上使用以获取数值，并搜索第一个字母字符以了解字符串的开始位置（使用 eg [`strspn`](http://en.cppreference.com/w/c/string/byte/strspn)）。

像这样的东西：

```
char line[256];

while (fgets(line, sizeof(line), fp) != NULL)
{
    /* Get the numbers */
    float numbers[6];
    sscanf(line, "%f %f %f %f %f %f",
        &numbers[0], &numbers[1], &numbers[2],
        &numbers[3], &numbers[4], &numbers[5]);

    /* Where do the numbers end... */
    size_t numbers_end = strspn(line, "1234567890\. \t");

    /* And get the name */
    char *name = line + numbers_end;

    /* Do something with the numbers and the name */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T02:26:19.683

如果文件正是该格式，您可以`scanf()`轻松使用。这是一些可以帮助您入门的代码；我没有对此进行测试，您需要填写一些缺失的内容。

```
#include <ctypes.h>  // for isspace()
#include <stdio.h> // for scanf(), getchar(), and EOF

char c2d[MAX_LINES][MAX_LENGTH_STRING_PER_LINE];
char *pstr;
float f2d[MAX_LINES][6]; // 6 floats per line
float *p;
int c, current_line_number;
char ch;
FILE *input;

input = fopen(...);
if (!input)
    ... handle the error

for (current_line_number = 0; ; ++current_line_number)
{
    // handle each line of input

    // first read 6 float values
    p = f2d + current_line_number;
    c = fscanf(input, "%f %f %f %f %f %f", p + 0, p + 1, p + 2, p + 3, p + 4, p + 5);
    if (c != 6)
        ... handle the error here

    // next grab string; stop at '<' or end of line or EOF
    pstr = c2d + current_line_number;
    for (;;)
    {
        ch = fgetc(input);
        if (ch == EOF || ch == '<' || ch == '\n')
        {
            *pstr = '\0';
            break;
        }
        *pstr++ = ch;
    }
    if (ch == '<')
    {
        // char was '<' so throw away rest of input line until end of line
        for (;;)
        {
            if (ch == EOF || ch == '\n')
                break;
            ch = fgetc(input);
        }
    }
    for (;;)
    {
        // eat up any white space, including blank lines in input file
        if (ch == EOF || !isspace(ch))
            break;
        ch = fgetc(input);
    }
    // once we have hit end of file we are done; break out of loop
    if (ch == EOF)
        break;
}

fclose(input); 
```

我`scanf()`不习惯在行尾读取字符串，因为它在遇到空格时停止，并且您的字符串值中有空格。

如果输入文件并不总是六个浮点值，则需要编写代码一次调用`scanf()`一个浮点数，直到遇到无法解析为浮点数的内容，并且需要使浮点数数组足够宽处理每行允许的最大浮点数。

祝你好运。

# html - 修复导航栏格式

> ID：15306339
> 
> 赞同：0
> 
> 时间：2013-03-09T02:01:49.893
> 
> 标签：html, css

是什么决定了主页按钮左侧和建议按钮右侧的空间？我不希望它在那里，但我不确定如何。

```
<div class="container">
  <ul class="nav">
    <li class="nav-home">
        <a href="index.html">Home</a>
    </li>
    <li class="nav-games"> 
        <a href="games.html">Games</a>
    </li>
    <li class="nav-chat">
        <a href="chat.html">Chat</a>
    </li>
    <li class="nav-suggestions">
        <a href="suggestions.html">Suggestions</a>
    </li>
  </ul>
</div>

.nav {
width: 900;
clear: right;
height: 55px;
margin-left: 25px;
margin-right: 25px;
z-index: 5;
overflow: visible;
background: #161616; 
background: -moz-linear-gradient(top,  #161616 0%, #282828 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#161616), color-stop(100%,#282828)); 
background: -webkit-linear-gradient(top,  #161616 0%,#282828 100%);
background: -o-linear-gradient(top,  #161616 0%,#282828 100%);
background: -ms-linear-gradient(top,  #161616 0%,#282828 100%); 
background: linear-gradient(to bottom,  #161616 0%,#282828 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#161616', endColorstr='#282828',GradientType=0 );
border: 1px solid #090909;
box-shadow: inset 0px 0px 1px rgba(255,255,255,.2), 0px 3px 5px rgba(0,0,0,.5);
}

.nav li {
list-style-type: none;
float: left;
display: inline-block;
padding: 0px 80px;
padding: 0px 80px\9;
width: 55;
text-align: center;
height: 55px;
border-right: 1px solid #090909;
box-shadow: 1px 0px 0px rgba(255,255,255,.1);
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2inear; 
-o-transition:all 1s linear; 
transition:all 0.2s linear; 
}

.nav li.logo:hover { opacity: 1; background-color: transparent;}

.nav li:last-child { border: none; box-shadow: none; }

.nav li a, nav ul li a:visited {
line-height: 55px;
text-decoration: none;
color: #9c9c9c;
font-size: 15px;
font-family: "Droid Sans", Arial, sans-serif;
text-transform: uppercase;
text-shadow: 0px 1px 0px rgba(0,0,0,.9);
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;     
}

.nav li:hover { 
background-color: rgba(0,0,0,.2); 
background-color: #191919\9; 
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;
color: white;
}

.nav li:hover a { color: white; 
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;
}

#nav-home .nav li.nav-home, #nav-home .nav li.nav-home:hover, #nav-home .nav li.nav-home,
#nav-games .nav li.nav-games, #nav-games .nav li.nav-games:hover, #nav-games .nav li.nav-games,
#nav-chat .nav li.nav-chat, #nav-chat .nav li.nav-chat:hover, #nav-chat .nav li.nav-chat,
#nav-comments .nav li.nav-comments, #nav-comments .nav li.nav-comments:hover, #nav-comments .nav li.nav-comments    { 
background: url(../img/tools/pattern.png) top center repeat;
box-shadow: inset 0px 0px 1px rgba(255,255,255,0.5);
}

#nav-home .nav li.nav-home a, #nav-games .nav li.nav-games a, #nav-chat .nav li.nav-chat a, 
#nav-comments .nav li.nav-comments a  { color: white; } 
```

这是 jsfiddle [http://jsfiddle.net/DAcgr/](http://jsfiddle.net/DAcgr/)所以你可以直观地看到我的意思。如果需要更多信息，请在投票前询问。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:03:57.157

列表元素默认有填充。添加`padding:0`以删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:05:49.763

`ul`左侧的默认填充

使固定

```
ul{
    padding:0;
    margin:0;
} 
```

# mongodb - 如何从嵌套在数组中的子文档中获取翻译？

> ID：15306341
> 
> 赞同：0
> 
> 时间：2013-03-09T02:02:06.097
> 
> 标签：mongodb

使用这样的模式，其中“items”字段包含一个带有嵌套翻译的子文档数组：

```
{
        "_id" : ObjectId("513740415b51ea0803000001"),
        "items" : [
                {
                        "id" : ObjectId("5137407f5b51ea100f000000"),
                        "title" : {
                                "en" : "Yes",
                                "fr" : "Oui",
                                "es" : "Si"
                        }
                },
                {
                        "id" : ObjectId("5137407f5b51ea100f000003"),
                        "title" : {
                                "en" : "No"
                        }
                }

        ],
} 
```

您将如何从项目“5137407f5b51ea100f000000”中获取英文（“en”）翻译？

结果应返回“是”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:48:55.953

在外壳中它将是：

```
db.test.findOne(
    {'items.id': ObjectId("5137407f5b51ea100f000000")}, 
    {'items.$': 1}
).items[0].title.en 
```

# python - 确保除了 Google Wallet 之外没有人可以成功回调应用内购买

> ID：15306345
> 
> 赞同：0
> 
> 时间：2013-03-09T02:02:44.497
> 
> 标签：python, android-pay

我计划使用 Google 电子钱包（应用内购买）来销售对我基于 Web 的应用程序的订阅。钱包[回调](https://developers.google.com/commerce/wallet/digital/docs/postback)我的服务器生成的服务器（基于 JWT）。

作为回调实现的一部分，我想确保除了 Google Wallet 之外没有人可以成功调用回发处理程序。

据我所知，我所能做的就是信任卖家 ID 和卖家数据（可能包含有关我的客户等的信息），以确保回电是合法的。

我目前的计划是加密卖方数据字段，因此希望只有我的应用程序可以读取该字段中的数据。是否有任何其他*最佳实践*/*想法*可能值得考虑以确保回发处理程序尽可能安全。

该应用程序是一个 Python WSGI 应用程序，在 Apache（当然是 SSL）下运行。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:18:09.433

请注意，回发 JWT 使用您的卖家密码签名。只有您和 Google 知道卖家秘密。您可以通过确保使用卖方机密（下文有更多详细信息）对其进行签名来验证回发 JWT 的真实性。

另请注意，回发 JWT 与您的服务器生成的订单 JWT 不同，因为它还包含订单 ID。在不知道卖家秘密的情况下，黑客将无法重新使用订单 JWT 来生成有效的回发 JWT。

当您收到回发 JWT 时，您可以通过验证他的签名来确保它是由 Google 发送的。JWT 由“Header.Claims.Signature”组成。“签名”是使用带有卖家密码的 SHA-256 算法生成的。

有关更多详细信息和代码示例，请参见以下内容：

JWT 规范： [http ://self-issued.info/docs/draft-ietf-oauth-json-web-token.html#anchor4](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html#anchor4)

Python 示例： [https ://developers.google.com/commerce/wallet/digital/docs/samples#iap-py](https://developers.google.com/commerce/wallet/digital/docs/samples#iap-py)

JWT 解码器： [https ://developers.google.com/commerce/wallet/digital/docs/jwtdecoder](https://developers.google.com/commerce/wallet/digital/docs/jwtdecoder)

# android - Android/ios/Mobile：我们如何“安全地”进行蓝牙配对而不在用户屏幕上提示任何内容？

> ID：15306347
> 
> 赞同：-1
> 
> 时间：2013-03-09T02:03:08.770
> 
> 标签：android, ios, bluetooth, core-bluetooth, bluetooth-lowenergy

我知道我们可以配对任何蓝牙设备而无需在用户屏幕上进行宣传，但这并不安全。我猜想对于所有设备的此类连接，密码将保持不变，因此任何人都可以嗅探或窃听。我们如何才能降低风险或使其更安全？

我听说有人说用户公钥/私钥来生成链接密钥，但是这种不安全的连接可能吗？参考[安全简单配对](http://www.ellisys.com/technology/een_bt07.pdf)

我希望我能把问题说清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:39:01.223

我一直在使用蓝牙低功耗，所以我不确定另一个。我知道您可以在没有 PIN 的情况下配对两台设备，然后切换到安全连接，我相信这会加密设备之间的通信。我还没有使用安全连接，但我认为它使用某种形式的公钥交换来加密通信。

因此，这只会是安全的，因为您无法窃听。由于没有 PIN，因此没有限制阻止其他人连接到设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T17:39:28.393

“Just Works”连接可以防止窃听——只是不能防止中间人攻击。

如果您希望在没有任何用户交互的情况下保护 MitM，唯一的方法是使用预共享密钥（即您在设备中嵌入密钥）。这就是 Apple 对他们的 MFi 设备所做的，但它非常昂贵。

# javascript - jquery & html5 文本框从本地存储保存/加载

> ID：15306359
> 
> 赞同：2
> 
> 时间：2013-03-09T02:04:54.870
> 
> 标签：javascript, jquery, html, jquery-mobile

希望将我的文本框值存储到本地存储中，在页面加载时调用它们，但如果没有输入值（即第一次加载应用程序），我会收到一条错误消息

```
 TypeError: pName is null
 [Break On This Error]  

 if(pName.length>0){ 
```

JS：

```
$('#form').on("pageinit", function() {
    $('#saveButton').click(function() {
        localStorage.setItem("Name", $('#Name').val());
    });
});

$('#form').on("pageinit", function() {
var pName = localStorage.getItem("Name");    
if(pName.length>0){
$('#Name').val(pName);
} 
}); 
```

我尝试添加它，但如果值低于 0，它似乎并没有实际加载 Enter Name ....

```
$('#form').on("pageinit", function() {
 var pName = localStorage.getItem("Name");

   if(pName.length>0){
        $('#Name').val(pName);
     } else {
        $('#Name').val("Enter name.");
     }
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:21:01.977

只需使用`if(!pName)`instead of `if(pName.length>0)`, null 并且空字符串是虚假的，因此它满足不是空字符串的条件并且如果它为 null 则不会导致错误。

# c++ - 对泛型函数使用继承

> ID：15306367
> 
> 赞同：1
> 
> 时间：2013-03-09T02:05:36.430
> 
> 标签：c++, inheritance

我正在尝试创建一个具有多个子级的模板类，这些子级覆盖模板的方法（我相信我这样做是正确的）。然后我想要一个可以与所有孩子一起使用的函数。

例如：

```
#include <iostream>
using namespace std;

class base{
public:
    virtual void print(void){
        cout << "Base" << endl;
    }
};

class inherit_a : public base{
public:
    virtual void print(void) override{
        cout << "inherit_a" << endl;
    }
};

class inherit_b : public base{
public:
    virtual void print(void){
        cout << "inherit_b" << endl;
    }
};

void print_function(base item){
    item.print();
}

int main(){
    inherit_a item_a;
    print_function(item_a);
    return(0);
} 
```

这会像我期望的那样打印“base”，但是我希望它使用`inherit_a`'s print 方法或`inherit_b`'s print 方法（如果`inherit_b`被归为`print_function`. 这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T02:09:26.680

您正在寻找的是所谓的*subtype polymorphism*；在 C++ 中，只有引用类型才允许多态`virtual`函数调用按预期工作。您可以使用参考：

```
void print_function(base& item){
    item.print();
} 
```

或指针：

```
void print_function(base* item){
    item->print();
} 
```

您所做的*按值*传递对象，仅复制对象的`base`一部分——这称为*切片*：

```
void print_function(base item){
    item.print();
} 
```

请注意，由于您的`print()`成员函数不会修改对象，因此可以并且应该声明它`const`。此外，`(void)`在参数列表中是 C 风格，在 C++ 中是多余的；改为使用`()`。

```
virtual void print() const {
    cout << "Base" << endl;
} 
```

`const`是签名的一部分，因此子类也必须指定它：

```
virtual void print() const override {
    cout << "inherit_a" << endl;
} 
```

然后`print_function()`可以引用一个`const`对象：

```
void print_function(const base& item){
    item.print();
} 
```

或指向`const`对象的指针：

```
void print_function(const base* item){
    item->print();
} 
```

该文档`print_function()`也没有修改其论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:10:33.297

这里的问题是您正在`base`获取`print_function`. 即使您传递一个`inherit_a`实例，它也会导致创建一个新对象，该对象被键入`base`（称为对象切片）。在`print_function`运行点它不再是一个`inherit_a`值，因此不会调用派生方法。

您正在寻找的是`base`防止切片并允许值保持其原始类型的参考

```
void print_function(base& item){
  item.print();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:09:44.683

“这样的事情可能吗？” - 是的，它被称为[多态性](http://forums.codeguru.com/showthread.php?256008-C-Polymorphism-What-is-polymorphism)。

# angularjs - 如何从控制器获取内部指令创建的范围？

> ID：15306369
> 
> 赞同：1
> 
> 时间：2013-03-09T02:05:43.373
> 
> 标签：angularjs, angularjs-directive

HTML 代码：

```
<body ng-controller="MainCtrl">
    <h1>Hello {{name}}</h1>
    <div id="aaa" myd1>
      In a directive
    </div>
    <button ng-click="showDirectiveScope()">Show Directive Scope</button>
</body> 
```

角代码：

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope,$element) {
    $scope.name = 'World';
    $scope.showDirectiveScope = function() {
        var aaa = $element.find("#aaa");
        console.log(aaa);
        console.log(angular.element(aaa).scope());
    }
});

app.directive('myd1', function(){
    return {
        scope: true
    }
}); 
```

页面中将有一个**Show Directive Scope**按钮。当我单击它时，我希望 angular 用 找到 DOM `id=aaa`，然后获取并记录它由指令创建的范围`myd1`。

但它会打印`undefined`，哪里错了？

现场演示：[http ://plnkr.co/edit/ravJoVH2oGLDD0VUsO82?p=preview](http://plnkr.co/edit/ravJoVH2oGLDD0VUsO82?p=preview)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:37:42.877

没有jQuery的答案：

```
app.controller('MainCtrl', function($scope,$element,$window) {
    $scope.name = 'World';
    $scope.showDirectiveScope = function() {
        var aaa = $window.document.getElementById('aaa');
        console.log(aaa);
        console.log(angular.element(aaa).scope());
        console.log($element.scope());
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:14:20.503

[jqLit​​e](http://docs.angularjs.org/api/angular.element)不支持选择器。在您的 plunker 中包含 Angular 之前的 jQuery，它将起作用：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

您还可以稍微简化您的日志，因为 var`aaa`是一个包装的 jQuery 元素：

```
console.log(aaa.scope()); 
```

[工作插件： http](http://plnkr.co/edit/bUsxo2UBWuiNkXBf8fsI?p=preview) ://plnkr.co/edit/bUsxo2UBWuiNkXBf8fsI?p=preview

# vim - 父目录中的 Vim Makefile

> ID：15306371
> 
> 赞同：1
> 
> 时间：2013-03-09T02:06:11.687
> 
> 标签：vim, makefile

对于在源文件的父目录中具有 Makefile 的项目，在 vim 中我将 makeprg 变量设置为：

```
:set makeprg=[[\ -f\ Makefile\ ]]\ &&\ make\ \\|\\|\ make\ -C\ .. 
```

正如这个[线程中所建议的](https://stackoverflow.com/questions/729249/how-to-efficiently-make-with-vim)

这种替换对父目录中的 Makefile 非常有效，但当 Makefile 在当前目录中时会中断。

vim make 和 :make 命令的无限循环。如果找不到 Makefile，我已经尝试了运行命令，并且我确定在运行 make 之后，vim 无论如何都会运行三元的失败案例（作为编辑器命令）。

因此，对 :make 的新调用扩展为无限地拥有另一个 :make。

如何防止 vim 尝试执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T03:28:28.380

运行三元的失败案例，因为显然，`make`在当前目录中的调用返回错误。`makeprg`您可以通过如下设置来防止此缺陷：

```
:let &makeprg = 'if [ -f Makefile ]; then make; else make -C ..; fi' 
```

使用`let`构造避免了逃生标志的必要性。这是在您所指的同一线程中建议的，[here](https://stackoverflow.com/questions/729249/how-to-efficiently-make-with-vim#comment9525693_731393)。

或者您可以在当前目录中修复`make`问题，使其不会返回错误代码...

# java - 行结束时如何使文本区域文本自动转到下一行？

> ID：15306373
> 
> 赞同：10
> 
> 时间：2013-03-09T02:06:26.507
> 
> 标签：java, swing, jtextarea, word-wrap

这是我的文本字段代码。它不是在行结束时更改行，而是继续进行，使框架看起来很奇怪。

我尝试使用滚动窗格，但对我没有帮助。

```
JTextArea TextArea = new JTextArea(7,10);
gridConstraints.gridx = 0;
gridConstraints.gridy = 0;
TextPanel.add(TextArea, gridConstraints);
TextArea.setEditable(true); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-09T02:27:53.043

如果没有换行和自动换行，a 的大小`JTextArea`将超出其原始大小。您可以致电：

```
textArea.setLineWrap(true);
textArea.setWrapStyleWord(true); 
```

* * *

旁注：

*   `JTextArea`通常放置在`JScollPane`容器中以方便滚动。
*   Java 命名约定表明变量以*小写*字母开头，使得`TextArea` `textArea`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T16:02:43.970

如果您使用的是 SceneBuilder，我可以提供解决方案。

从层次树中选择 TextArea 元素，转到“Inspector”，选择“Properties”选项卡并激活“Wrap Text”。

然后，TextArrea 元素中的每个文本都将在行尾返回。

[截屏](https://i.stack.imgur.com/rLe4v.jpg)

干杯

# java - JAXB - 可序列化

> ID：15306374
> 
> 赞同：2
> 
> 时间：2013-03-09T02:07:05.913
> 
> 标签：java, serialization, jaxb

我只是想知道...是否可以为[这种 jaxb 根对象](http://sushantworld.wordpress.com/2011/02/07/jaxb-custom-xml-to-java-map-using-xmladapter/)`Serializable`序列化（实现接口）以使其可以用and读/写它？`ObjectOutputStream``ObjectInputStream`

或者最佳的绕行方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:29:35.920

JAXB (JSR-222) 对象只是 POJO，因此您可以添加`implements Serializable`到它们。您还可以通过 JAXB 从实现 Serializable 的 XML 模式生成 Java 模型。

*   [如何从实现可序列化的 XSD 生成类？](https://stackoverflow.com/questions/3677088/how-to-generate-classes-from-xsd-that-implements-serializable)

# xaml - XAML 水平滚动两个项目

> ID：15306376
> 
> 赞同：2
> 
> 时间：2013-03-09T02:07:18.910
> 
> 标签：xaml, windows-8

我在项目页面上进行水平滚动时遇到了一些问题。

如果默认网格模板有更多数据并且屏幕会适应它，它将水平滚动。但我也想在页面中添加一个列表视图。

所以基本上，我希望页面与网格一起水平滚动，然后滚动到列表。

目前，它只是部分切断了“MessageList”。

请参阅下面的 XAML：

```
 <common:LayoutAwarePage.Resources>

    <!-- Collection of items displayed by this page -->
    <CollectionViewSource
        x:Name="itemsViewSource"
        Source="{Binding Items}"
        d:Source="{Binding AllGroups, Source={d:DesignInstance IsDesignTimeCreatable=True, Type=data:SampleDataSource}}"/>
</common:LayoutAwarePage.Resources>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
-->
<Grid Style="{StaticResource LayoutRootStyle}" ScrollViewer.HorizontalScrollBarVisibility="Auto" Margin="0,0,0.429,0.429">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Padding">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="96,136,86,56"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!--
                The back button and title have different styles when snapped, and the list representation is substituted
                for the grid displayed in all other view states
            -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>

                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

    <!-- Horizontal scrolling grid used in most view states -->
    <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.RowSpan="2"
        Padding="116,136,116,46"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick" ScrollViewer.HorizontalScrollBarVisibility="Auto"/>

    <ListView x:Name="MessageList" Height="628" VerticalAlignment="Top" Margin="1191,0,-219,0"  
        ItemsSource="{Binding}"
        ItemTemplate="{StaticResource MessageTemplate}" Grid.Row="1" HorizontalAlignment="Left" Width="399"/>

    <!-- Vertical scrolling list only used when snapped -->
    <ListView
        x:Name="itemListView"
        AutomationProperties.AutomationId="ItemsListView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.Row="1"
        Visibility="Collapsed"
        Margin="0,-10,0,0"
        Padding="10,0,0,60"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource Standard80ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick"/>

    <!-- Back button and page title -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" IsHitTestVisible="false" Style="{StaticResource PageHeaderTextStyle}"/>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T02:46:41.670

`GridView`将,`ListView`和包装在`ListView`, 中`ScrollViewer`并设置以下属性：

```
<ScrollViewer HorizontalScrollMode="Auto" 
              HorizontalScrollBarVisibility="Auto"
              VerticalScrollMode="Disabled"
              VerticalScrollBarVisibility="Hidden">
<!-- The elements you want to be horizontally scrollable goes here -->
</ScrollViewer> 
```

# mongodb - 在 Meteor Collection 中插入多个文档与纯 mongodb 的工作方式相同吗？

> ID：15306390
> 
> 赞同：15
> 
> 时间：2013-03-09T02:10:53.243
> 
> 标签：mongodb, meteor

看来我不能像在 Mongodb 文档中[描述的那样在 Meteor 中进行多次插入...](http://docs.mongodb.org/manual/reference/method/db.collection.insert/)

在我的 js 控制台中：

`> Test.insert([{name:'hello'},{name:'hello again'}])`

它返回

```
 "g3pq8GvWoJiWMcPkC" 
```

当我走的时候

`Test.find().fetch()`

我得到以下信息：

```
Object
0: Object
name: "hello"
__proto__: Object
1: Object
name: "hello again"
__proto__: Object
_id: "g3pq8GvWoJiWMcPkC"
__proto__: Object 
```

Meteor 似乎创建了一个超级文档，其中包含我尝试插入的两个单独的文档。

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T05:17:07.020

从 Meteor 排行榜[示例代码](https://github.com/meteor/meteor/blob/master/examples/leaderboard/leaderboard.js)中，您似乎无法批量插入。您可以使用循环或下划线迭代函数。

使用下划线，

```
var names = [{name:'hello'},{name:'hello again'}]

_.each(names, function(doc) { 
  Test.insert(doc);
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-11T21:32:14.033

对于这些事情，您应该始终使用[批量插入。](https://docs.mongodb.com/v3.2/reference/method/Bulk.insert/)Meteor 不支持此功能。您可以使用[批量插入插件](https://atmospherejs.com/mikowals/batch-insert)或访问节点 Mongodb 驱动程序来本地执行此操作：

```
var items = [{name:'hello'},{name:'hello again'}],

    testCollection = new Mongo.Collection("Test"),
    bulk = testCollection.rawCollection().initializeUnorderedBulkOp();

for (var i = 0, len = items.length; i < len; i++) {
    bulk.insert(  items[i] );
}

bulk.execute(); 
```

请注意，这只适用于 mongoDB 2.6+

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-09T12:19:20.413

截至 2018 年 11 月，您可以使用[rawCollection](https://docs.meteor.com/api/collections.html#Mongo-Collection-rawCollection)访问 Mongo Driver 返回的集合，然后根据[Mongo 文档插入一组文档](https://docs.mongodb.com/manual/reference/method/db.collection.insert/#insert-multiple-documents)。

例子：

```
let History = new Mongo.Collection('History');

History.rawCollection().insert([entry1, entry2, entry3]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T03:33:44.803

要在您的集合中插入多条记录，您可以使用[mikowals:batch-insert](https://github.com/mikowals/batch-insert)插件。

一个简单的例子是：

```
var names = [{name:'hello'},{name:'hello again'}];
yourCollection.batchInsert(names); 
```

您在这里得到的是仅使用一个连接，您将能够一次性插入所有数据，这与 mongo 批量插入操作相同。

# .net - IE6中的垂直滚动条

> ID：15306398
> 
> 赞同：0
> 
> 时间：2013-03-09T02:11:56.603
> 
> 标签：.net, css, html

我在垂直滚动的 div 标签上遇到问题。当我最小化窗口时，滚动条不会出现在小尺寸窗口中。我使用 Window Server 2003 sp2 和 IE6 作为客户端。

下面是我的 div 标签..

```
<div style="border: 1 none Black; vertical-align: top;overflow:auto; height:470px; width:980px;"
class="content"> 
```

CSS：

```
.content
{
font-size: 11px;
background: url(../Images/bg-content.jpg) repeat-x top center;
padding: 20px;
height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:00:14.950

您的代码中的问题是属性溢出：自动；ie6 有问题。您可以在 CSS 中添加以下两个属性，例如：

```
_overflow:hidden;
_overflow-y: visible; 
```

# asp.net - Web 表单中的 ASP.NET 全局变量

> ID：15306399
> 
> 赞同：1
> 
> 时间：2013-03-09T02:12:01.660
> 
> 标签：asp.net, asp.net-mvc

简单的问题，但经过几个小时的搜索，我还没有找到一个简单的答案。是否有一种简单的方法可以在多个服务器上运行的 ASP.NET MVC 4 网站中的所有会话之间共享全局变量？

在单个服务器上，我只需创建一个静态类，其中包含围绕成员访问器的适当线程同步。但这显然不会在服务器之间同步。

您会认为，因为保存每个会话状态非常容易，并且可以在服务器之间神奇地同步它，所以您可以对应用程序状态做同样的事情。但是我读过的所有东西都说应用程序状态是服务器本地的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:51:14.540

如果您的意思是存储会话状态，您有 3 个选项：

*   进程内存储（听起来像您正在使用的）
*   会话状态服务
*   微软 SQL 服务器

后两者提供您正在寻找的“共享全局变量”。请注意，会话状态服务是单点故障。如果您的 SQL 配置是冗余的，那么 SQL Server 会话状态存储可以是冗余的。

也可以看看：

*   [http://windowsdevcenter.com/dotnet/2003/03/24/sessionstate.html](http://windowsdevcenter.com/dotnet/2003/03/24/sessionstate.html)
*   [http://forums.asp.net/t/1409607.aspx/1](http://forums.asp.net/t/1409607.aspx/1)

如果您想迁移到 ASP.Net 本身不支持的其他解决方案，您可以使用：

*   [内存缓存](http://memcached.org/)
*   [雷迪斯](https://stackoverflow.com/questions/6476945/how-do-i-run-redis-on-windows)

注意我没有使用过 Memcached 或 Redis，但我听说过很棒的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:58:45.817

答案是您需要一个公共数据库，您可以在其中写入和读取公共变量。

所谓通用数据库，你甚至可以使用一个简单的xml文件——但它必须是一个文件，你的服务器之间的一个通用共享文件，这是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:27:26.880

听起来是时候将一些数据移动到持久存储（数据库、文件系统）并可选地在顶部添加一个缓存层（我们很高兴[AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)用户）以提高性能。

# c++ - 将非 char* 参数传递给 execvp

> ID：15306400
> 
> 赞同：1
> 
> 时间：2013-03-09T02:12:15.110
> 
> 标签：c++, unix, execvp

基本上，我想执行一个名为“worker”的程序，它有 6 个参数是整数......

```
char* args[7] = {(char*)"worker",workerID,i+1,msgID,shmID,semaphoreID,NULL};
if(execvp("worker",args)<0){
    cerr << "execvp failed" << endl;
    exit(1);
} 
```

我如何正确地将这些转换为类型 char* ？我已经尝试`(char*)`使用 stringstream 将它们存储在 char 数组中，但我仍然遇到编译器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:15:07.983

您需要将它们实际转换为字符串。查看 sprintf 或这个 SO question：

[Linux中的itoa函数在哪里？](https://stackoverflow.com/questions/190229/where-is-the-itoa-function-in-linux)

# jquery - 等到一切都执行，甚至使用 $.when() 失败

> ID：15306401
> 
> 赞同：2
> 
> 时间：2013-03-09T02:12:21.633
> 
> 标签：jquery, wait, jquery-deferred

使用`jQuery.when()`，如果一个请求失败，那么它们都会失败。

```
$.when(deferred1, deferred2).then(function() {
    // Called only after both deferred are resolved
}, function() {
    // Called immediately after one of the deferreds is rejected
}); 
```

你怎么能等待一切都执行甚至失败？我尝试使用`.always()`而不是，`.then()`但在第一次失败后也立即调用了回调。

一个（丑陋的）解决方案是使用标志来控制两个操作何时完成并`.always()`在每个操作上使用 （不带`$.when()`）。

```
var deferred1Complete = false;
var deferred2Complete = false;

function callback() {
    if (deferred1Complete && deferred2Complete) {
        // Execute after both deferred are either resolved or rejected
    }
}

deferred1.always(function() {
    deferred1Complete = true;
    callback();
});

deferred2.always(function() {
    deferred2Complete = true;
    callback();
}); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:33:03.273

乔纳坦，

我喜欢您的解决方案，并提供了一些改进：

*   短语作为 jQuery 实用方法，如[$.when()](https://api.jquery.com/jquery.when/)
*   允许传入单个 promise 或一组 promise
*   如果没有传入参数或传入空数组，则立即解析
*   容忍非承诺/非延迟
*   允许在解决或拒绝每个承诺时报告链的进度。

这是代码：

```
(function($) {
    $.whenAlways = function(chain) {
        if(!chain || !$.isArray(chain)) chain = $.extend([], arguments);
        var n = chain.length;
        return $.Deferred(function(deferred) {
            $.each(chain, function(i, promise) {
                if(!promise.always) n--;
                else {
                    promise.always(function() {
                        deferred.notify(--n);
                        if(n == 0) deferred.resolve();
                    });
                }
            });
            if(n == 0) deferred.resolve();
        }).promise();
    }
})(jQuery); 
```

这种方法将允许任何progressCallbacks（添加到重新调整的promise）在`chain`promise 被reolved/rejected 时被调用，而不管reollution/rejection 顺序如何。例如，通过将未完成的`chain`承诺数量传递给 progressCallbacks，您可以提供倒计时指示或响应中间倒计时里程碑。

似乎工作 -[演示](http://jsfiddle.net/kbHqr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T04:21:19.943

另一个解决方案（不是那么难看）是链接延迟`.always()`回调。

```
deferred1.always(function() {
    deferred2.always(function() {
        // Execute after both deferred are either resolved or rejected
    });
}); 
```

我写了一个小函数来处理这个：

```
function whenAlways() {
    var chain = $.extend([], arguments);
    return new $.Deferred(function(deferred) {
        var callback = function() {
            if (chain.length == 0) {
                deferred.resolve();
                return;
            }
            var object = chain.shift();
            $.when(object).always(callback);
        };
        callback();
    }).promise();
} 
```

用法：

```
whenAlways(deferred1, deferred2)
    .done(function() {
        // Execute after both deferred are either resolved or rejected
    }); 
```

# flash - Flash 游戏改善 SEO 行为因素

> ID：15306404
> 
> 赞同：-2
> 
> 时间：2013-03-09T02:12:55.537
> 
> 标签：flash, seo

这是我想知道的问题。我希望我的网站访问者在我的网站上停留更长时间，因此我考虑在侧边栏的某个位置创建一个简单的 Flash 游戏。如果访问者参与这个简单的游戏并在某个页面上花费更多时间，谷歌和其他人会更好地考虑我的网站吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:13:42.603

Google 在衡量用户体验时似乎最关心的指标是“反弹率”。这就是有多少搜索者从该网站返回点击 Google SERP 中的其他列表，或优化他们的查询。我认为谷歌根本不关注“现场时间”。如果这款 Flash 游戏如此引人入胜，以至于人们在搜索时会分心并立即开始玩游戏而不是返回 Google，那么它会有所帮助。

# ruby-on-rails - 如何在请求之间重置 ruby 类访问器？

> ID：15306406
> 
> 赞同：1
> 
> 时间：2013-03-09T02:13:29.030
> 
> 标签：ruby-on-rails, ruby, scoping, settingslogic

我正在研究电子商务解决方案，它在单个 Rails 应用程序中提供了几个不同的商店。

我有一个类来保存特定于商店的设置。

```
# models/shop.rb
class Shop < Settingslogic
  source "#{Rails.root}/config/shop.yml"

  def self.init!(shop)
    namespace shop.to_s
    load!
  end

end 
```

商店::初始化！从配置文件加载指定部分

这是 yml 文件以防万一：

```
# config/shop.yml
shop_1:
  shop_name: Shop 1
shop_2:
  shop_name: Shop 2 
```

我在应用程序控制器中按域名匹配请求的商店。

```
# controllers/application_controller.rb
class ApplicationController < ActionController::Base
  before_filter :set_shop

  protected

  def set_shop
    Shop.init! if request.domain.match(/^.*shop1\.com$/)
      :shop_1
    elsif request.domain.match(/^.*shop2\.com$/)
      :shop_2
    end
  end
end 
```

问题是 Shop 在请求之间以某种方式保留了第一个请求的商店的设置。例如：

shop1.com

```
Shop.shop_name # => Shop 1 
```

shop2.com

```
Shop.shop_name # => Shop 1 
```

它会保留初始设置，直到我对 application_controller.rb 或 shop.rb 进行一些更改。（我认为这是答案的第一把钥匙）

我所知道的是 Settingslogic 为 shop.yml 中的每个选项定义了 attr_accessor （仅在第一次调用时）。但是为什么它们在重新加载后仍然有效（我在 cache_classes = false 的开发环境中工作）

当我这样做时：

```
# models/shop.rb
class Shop < Settingslogic
  source "#{Rails.root}/config/shop.yml"
  namespace  "shop_#{Random.rand(1..2)}"
  load!
end 
```

它按预期工作 - 它每次都会加载适当的设置。但我不能在这个阶段按域设置商店名称。当我无法从外部指定 shop_name 时，我也无法测试不同的商店。所以我需要一个方法。

我试过`class_eval`

```
def self.init!(shop)
  class_eval do
    namespace shop.to_s
    load!
  end
end 
```

但这没有帮助。我觉得这里缺乏关于范围界定的知识。你有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:41:25.713

没有理由不保留类属性，直到它们下一次更新。

在 Rails 应用程序的开发模式下，您的代码在更改时会重新加载，这将产生重置这些类变量的副作用，但您不想依赖它。

你之前的过滤器应该做的是设置一个 @current_shop 实例变量，其中包含用于当前请求的商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:45:01.360

我终于想出了一个解决方案，如何坚持所提到的初始计划，但不存在“类缓存”问题。

它基于我对这个主题[的另一个问题的回答。](https://stackoverflow.com/questions/15310711/accessing-object-everywhere-in-rails-app)

无论如何这里是新的 Shop.rb

```
class Shop < Settingslogic
  source "#{Rails.root}/config/shop.yml"
  load!

  def self.current=(shop)
    Thread.current[:current_shop] = shop.to_sym
  end

  def self.current
    self.send(Thread.current[:current_shop])
  end
end 
```

我决定加载 shop.yml 的所有部分并通过 Shop::current 访问它们，它将调用转发到适当的部分。

所以我可以在任何地方使用`Shop.current.name`and`Shop.current.tax`它对应于在applicationController或spec_helper中设置的商店。

# python - 如果没有实现 __lt__ 协议，比较如何工作？

> ID：15306407
> 
> 赞同：2
> 
> 时间：2013-03-09T02:13:57.093
> 
> 标签：python, python-2.7, comparison

我对正在发生的事情最感兴趣，但可以说我有一个自定义类，实现了 __eq__ ，没有别的。

其他比较如何解决？默认行为是什么？每次进行比较时，我都会得到不同的结果。我知道我需要实现这些，并且我也可以用它`@total_ordering`来简化工作。

幕后究竟发生了什么？这主要是出于好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T02:19:06.330

如果`__lt__`未定义，则使用比较`__cmp__`。如果未定义，则使用默认比较器。似乎默认比较器通过“对象标识（地址）”进行比较。

有关详细信息，请参阅[文档`__cmp__`](http://docs.python.org/2/reference/datamodel.html#object.__cmp__)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:23:27.403

[Python 文档这一](http://docs.python.org/2/library/stdtypes.html#comparisons)部分的一些附加信息：

> 不同类型的对象，除了不同的数值类型和不同的字符串类型，从不比较相等；此类对象的排序一致但任意（因此对异构数组进行排序会产生一致的结果）。
> 
> **CPython 实现细节：**除数字外的不同类型的对象按其类型名称排序；不支持正确比较的相同类型的对象按其地址排序。

# database - Symfony2 3 个实体之间的映射

> ID：15306414
> 
> 赞同：1
> 
> 时间：2013-03-09T02:16:14.863
> 
> 标签：database, symfony, mapping, associations

我有三个实体：**事件**、**照片**和**用户**。

![在此处输入图像描述](../Images/e88a2b7e1dd0b53421c0c403838d59f1.png)

**三个主要关系：**

*   一个事件有 0 张或更多张照片（蓝色关系，OneToMany）
*   一张照片创建了一个事件，我称之为 firstPhoto（红色关系，OneToOne）
*   一个用户可以创建 0 张或多张照片（紫罗兰色关系，OneToMany）

我想要的是**映射事件和创建它的用户之间的关系**，而不添加或更改我的数据库。它表示创建事件的第一张照片的用户。

我不是在寻找我成功执行的 SQL 查询，而是在我的 User.php 实体中寻找真正的映射。

`$user->getEvents()`将给出用户创建的事件。

我不能成功这样做......有什么想法吗？我是否有义务在我的数据库中添加或更改某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:39:01.710

我看到了两种方法：

1）进行命名本机查询[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#named-native-query](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#named-native-query)

2）写类似的东西

```
public function getEvents()
{
     $res = array();
     $photos = $this->getPhotos();
     foreach($photos as $photo) {
         $res[] = $photo->getEvent();
     }

     return $res;
} 
```

# html - HTML/CSS 转换的问题

> ID：15306416
> 
> 赞同：0
> 
> 时间：2013-03-09T02:16:48.200
> 
> 标签：html, css, css-transitions, transitions

我正在努力添加类似本网站上的过渡：http: [//tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/](http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/)

更具体地说，我正在尝试执行示例 #6。我已经完全按照代码进行了操作，但它仍然无法正常工作。这是我的代码：http: [//jsfiddle.net/S2Wzj/](http://jsfiddle.net/S2Wzj/)

我查看了一下，我认为是 CSS 代码导致了问题。在某些点上，它的背景设置为

```
background: #f9f9f9 url(../images/bg.jpg); 
```

此代码取自鼓膜网站，我认为它可能不起作用，因为我没有链接图像。这是我想要的效果：http: [//tympanus.net/Tutorials/CircleHoverEffects/index6.html](http://tympanus.net/Tutorials/CircleHoverEffects/index6.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:37:54.120

如果图像没有显示，那么可能是因为图像实际上不在正确的路径中，为了让它正确显示，您应该抓取 bg.jpg 并将其放在图像文件夹中，从 html/css 文件夹**向上一个目录**. 所以，你的结构看起来有点像这样，

```
root
    source
        index.html
        stylesheet.css
    images
        bg.jpg 
```

这是否回答你的问题？

编辑：误解了这个问题，图片可以在这里找到[http://tympanus.net/Tutorials/CircleHoverEffects/images/bg.jpg](http://tympanus.net/Tutorials/CircleHoverEffects/images/bg.jpg)

# php - 为 php REST API 编写 web.config

> ID：15306420
> 
> 赞同：2
> 
> 时间：2013-03-09T02:17:22.280
> 
> 标签：php, .htaccess, iis

对于一个大学项目，我在我的开发服务器（localhost）上使用 php 编写了一个 REST api。我必须编辑 .htaccess 才能工作。内容在这里：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* api.php/$0 [L] 
```

但是部署服务器是 IIS，我不知道如何配置 webconfig 文件。我试图阅读它，但我不知道如何去做。

该服务器位于大学网络上，不会对服务器的主要配置进行任何更改，也不会安装其他库。

如果不能简单地完成，那么我可以访问我自己的托管 Apache 服务器，我可以从中运行它。

我想知道是否有人能够将上述内容转换为我需要的 IIS？

编辑：我花了一些时间阅读更多关于重写的信息，根据我的模块负责人，它在服务器上启用。我试图将规则写入 web.config，这就是我所拥有的：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <customErrors mode="Off"/>
  </system.web>
  <system.webServer>

  </system.webServer>
  <rewrite>
    <rules>
      <rule name="Rewrite to server.php">
        <match url="^([0-9]+)/([_0-9a-z-]+).*" />
        <action type="Rewrite" url="api.php" />
      </rule>
    </rules>
  </rewrite>
</configuration> 
```

但它不工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:20:59.410

你不需要一个`web.config`. 这仅适用于 .Net 项目。您需要使用 IIS 等效于 apache 的`mod_rewrite`. 这是一篇有助于在 IIS 上配置重写规则的文章。

[http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)

# ios - 未找到 ios 开发证书并且未找到未过期的配置文件

> ID：15306427
> 
> 赞同：2
> 
> 时间：2013-03-09T02:18:46.353
> 
> 标签：ios, xcode

今晚我决定将我的新应用程序提交到 AppStore，我承认 - 我对这个过程是多么的复杂和可笑的混乱感到震惊。我设法在 iTunes Connect 中提交了所有信息并继续存档我的应​​用程序，我这样做了，但后来一切都崩溃了.. 我试图验证我的应用程序但收到错误“没有开发证书。..联系管理员”很好，我是我帐户的管理员，此证书已激活并已安装。

我的下一步是在我的 Mac 上卸载 Dev 和 Distribution Profiles&Certificates 并再次安装它们......现在，在此之后 - 无法归档我的应用程序。我在 Xcode 中收到以下错误：No unexpired provisioning profile found 和 Organizer: Code Signing error - No ios development certificate found。

我希望有人能给我任何关于如何解决这个问题的指导，这个问题真的很奇怪——我所有的证书都是活动的，而且我确实有开发证书，可以从这些屏幕中看到： ![在此处输入图像描述](../Images/293031f3508c2bd98863b0a5099d26c4.png) ![在此处输入图像描述](../Images/02b965d90146b4da5682c17c1b04b664.png) ![在此处输入图像描述](../Images/0f4da8dfba5da5d97a347bac80c97b43.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:39:43.180

我会一步一步地和你一起去：

1-首先将以下附图中标记的信息发送给我 ![在此处输入图像描述](../Images/dd69175904b32dbd8a8f3344c86b87f3.png)

2- 然后将这里标记为红色的信息也发送给我。 ![在此处输入图像描述](../Images/17dfee689cea3edb6b90a500d2825101.png)

我会要求你在那之后做点什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T17:11:06.323

当您“找出”解决问题的方法时分享您的发现，而不仅仅是“我找出了这些捆绑 ID 之间的联系”，这将非常有帮助。我知道这不是你解决问题时的第一个想法，但你可以帮助其他人解决同样的问题。

# mysql - MySQL Workbench - 修复索引名称警告

> ID：15306436
> 
> 赞同：1
> 
> 时间：2013-03-09T02:19:57.923
> 
> 标签：mysql, mysql-workbench

我有一个新客户端，它正在运行一个包含 170 个左右 MySQL 表的 Symfony 应用程序。他最近将他的 MySQL Workbench 更新到最新版本，现在在他启动应用程序时弹出警告

FIX INDEX NAMES 在模型中发现与 FK 名称相同的索引名称，这在 MySQL5.5 及更高版本中是不允许的。是否要重命名索引？

我不是 DBA，但我知道索引和主键名称有冲突。重命名这些索引与忽略这些索引有何含义？

他正在运行的 Symfony 应用程序使用 Doctrine ORM，如果索引重命名，是否需要更新任何查询或模型？

使用 InnoDB 引擎

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:06:34.080

MySQL Workbench 在打开模型时检查是否有任何重复的索引名称，并提供将它们重命名为唯一的。让它这样做没有坏的副作用。事实上，甚至有必要能够将模型应用于服务器。否则，服务器将拒绝创建包含名称已被占用的索引的表。

简而言之：让 Workbench 修复这个 bug 是个好主意（因为重复的键名只不过是一个 bug）。

# c# - 通过 map[x][y] 将 2 个参数传递给单个类

> ID：15306437
> 
> 赞同：1
> 
> 时间：2013-03-09T02:20:17.510
> 
> 标签：c#

**目标：**

我目前正在对现有库（迷宫生成器）进行补充。我正在尝试做的是定义一种存储迷宫的新方法（部分在内存中，部分在硬盘上）。

*- 如果您只想查看问题，请跳至问题段落。我添加了一些额外的信息，因为您可能会建议完全不同的方法。*

**现在的情况：**

迷宫生成器存储迷宫（在内存中）的当前方式是使用地图。Map 包含一堆 InnerMapArrays，每个 InnerMapArrays 包含迷宫中的一行像素。点可以像这样在迷宫中读/写：

```
… //Code that creates maze map
map[x][y] = true; 
```

在 Map 类中有一个方法可以返回正确的数组 (x)

```
public override InnerMapArray this[int x]
{
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    get
    {
        return innerData[x];
    }
} 
```

然后它会在 innerData 上调用 [y]，它也包含一个类似的方法来最终返回正确的像素。

**问题：**

回到我想要做的是创建一个新的 Map 类型，它将迷宫的一部分保存在内存中，并将迷宫的一部分保存在磁盘上。例如，我想以 100x100 像素为一组加载迷宫区域，而不是按行加载。（下图中红色部分应在像素 x=50,y=50 更改时加载，例如）

![红色方块是当前应该加载到内存中的部分](../Images/3dd4401747596c06e8c09bd3b7ca2fa1.png)

Map/InnerMapArray 结构的当前实现不允许这样做。我想要的是一种实际获取在一个方法中传递的 X 和 Y 的方法。我认为可能可行的是以下**（不工作的代码）**：

```
public override InnerMapArray this[int x][int y]
{
    get
    {
        //load a certain 100x100 part of the maze in memory and set it as current
        //so while generating the maze pixels near the currently generated/read pixel
        //can be read really fast while others far away won't use any memory
    }
} 
```

遗憾的是，C# 编译器不允许这样做。有没有人有线索可以帮助我以“好”的方式解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:35:29.377

实现你想要的方法是：

```
public overrride InnerMapArray this[int x, int y] { ... } 
```

这段代码只有在你有一个像这样的“双”索引器时才有效，当然要在 de 基类中被覆盖。希望这可以帮助 ：）

# php - php：打印所有子目录中名为error_log的所有文件的最后10行？

> ID：15306441
> 
> 赞同：0
> 
> 时间：2013-03-09T02:20:32.530
> 
> 标签：php, unix

我发现了一些可笑的长代码（大约 50 行长）用于使用 php 函数做这样的事情，我只是认为必须有更好的方法。

然后经过一番搜索，我发现了 unix 的“查找”和“尾”功能。

```
$lines = `find . -name "error_log" -exec tail '{}' +`; 
```

但是我的服务器在 atm 下线，所以我无法对其进行测试，但这会起作用吗？

编辑：它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:27:44.260

好的，我的服务器刚刚恢复正常，并且运行良好。不需要递归迭代器等等。

# git - Git 添加 -p 但对于新文件

> ID：15306442
> 
> 赞同：0
> 
> 时间：2013-03-09T02:20:32.840
> 
> 标签：git

我经常`git add -p`在添加准备提交的更新时使用。

但是，是否也可以对新文件执行相同的操作？它似乎并不并且仅限于对现有文件的编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:36:31.197

该命令`git add`用于向存储库添加一个新文件，并告诉 Git 你想要一个已更改的文件在下一次提交中。

这有很多优点，因为 git commit 只提交那些已显式添加的文件。注意 SVN add 仅用于将新文件添加到 repo。

```
-p，--补丁
   以交互方式在索引和工作树之间选择大块补丁，然后
   将它们添加到索引中。这使用户有机会查看差异
   在将修改的内容添加到索引之前。

```

# architecture - ARM v7 平台上的 ARM v5 共享库 (ftd2xx) - 硬浮点与软浮点问题

> ID：15306447
> 
> 赞同：7
> 
> 时间：2013-03-09T02:21:18.373
> 
> 标签：architecture, arm, backwards-compatibility, beagleboard

我需要在运行 Ubuntu 12.04 的 BeagleBoard xM rev C 上运行一个使用 ftd2xx 的程序。我正在尝试使用[此处](http://www.ftdichip.com/Drivers/D2XX.htm)提供的 ARM 库 libftd2xx.so 。libFTDI 不是一个选项。

我注意到的差异来自于`readelf -hA`在 libftd2xx.so 上运行与在 BeagleBoard 上运行的其他库。arch-specific 部分将 ftd2xx 的操作系统名称指定为“ARM926EF-S”，而不是其他库的“7-A”，并将 CPU_arch 指定为“v5TEJ”而不是“v7”。

我假设这意味着该库适用于 ARM v5 指令集，而 BeagleBoard 正在运行 ARM v7。有什么方法可以让 ftd2xx 工作吗？

编辑：有人告诉我 ARM7 向后兼容 ARM5，但这并不能解决我的问题。

另外需要注意的是，`ldd libftd2xx.so`在 BeagleBoard 上运行不会列出依赖项，而是打印出来`not a dynamic executable`，而在其他库上运行。

编辑2：

问题似乎出在软浮动 ABI 与硬浮动 ABI 上。我在 BeagleBoard xM 上有一个 gnueabihf 图像。当我尝试使用静态 libftd2xx.a 编译示例程序时，我得到了很多：

`/usr/bin/ld: error: static_link_uses VFP register arguments, libftd2xx.a(file.o) does not
/usr/bin/ld: failed to merge target specific data of file libftd2xx.a(file.o)`

如果我尝试使用`mfloat-abi=soft`or编译`mfloatabi=softfp`，我会得到

`In file included from /usr/include/stdio.h:28:0,
from main.c:12:
/usr/include/features.h:324:26 fatal error: bits/predef.h: No such file or directory
compilation terminated`

我还尝试使用`arm-linux-gnueabi`而不是交叉编译`arm-linux-gnueabihf`，但生成的程序不会在 BeagleBoard 上执行。有什么我能做的还是不可能的？

- - - - - 解决方案 - - - - - - - -

在遇到一些麻烦之后，FTDI 为我提供了他们的库的硬浮动版本，它可以工作。在许多人单独请求之后，我在这里提供它：

[https://s3.amazonaws.com/hayk-public/arm926-hf.zip](https://s3.amazonaws.com/hayk-public/arm926-hf.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:32:20.777

v5TEJ 是 v7-A 指令集的子集。

代码运行速度可能会慢一些，并且可能比要求的大一些，但它应该仍然可以正常工作，而不会因非法指令等而崩溃。除了极少数例外，ARM 代码向后兼容以前的指令集。

如果代码在您的平台上不起作用，则很可能是其他原因，例如缺少对 USB 子系统的访问权限等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:30:43.673

请在 ARM926 处理器上查看我的[pastebin](http://pastebin.com/utwVw9Bb)输出。[libftd2xx1.1.12](http://www.ftdichip.com/Drivers/D2XX/Linux/libftd2xx1.1.12.tar.gz)中的二进制文件有多个处理器。确保您正在使用. 我可以使用 eglibc 和 Linux 2.6.36 在 ARM926 CPU 上运行二进制文件。`strace``ldd``release/build/arm926``statictest`

从`ldd`输出中，需要以下库。

*   `libdl.so.2`- 动态加载。
*   `librt.so.1`- 实时图书馆
*   `libpthread.so.0`- pthreads
*   `libgcc_s.so.1`- gcc 助手。
*   `libc.so.6`- eglibc 库
*   `ld-linux.so.3`- Linux 共享库加载器。

`ldd`不需要功能，以下命令应显示库，

```
LD_TRACE_LOADED_OBJECTS=1 LD_WARN=yes LD_BIND_NOW=yes LD_VERBOSE=yes \
 /lib/ld-linux.so.3 ./libftd2xx.so.1.1.12 
```

验证`statictest`二进制工作。如果是这样，请尝试设置`LD_LIBRARY_PATH`到该`release/build/arm926/libftd2xx.so.1.1.12`位置。从`strace`输出来看，路径`/lib/tls/v5l`和`/lib/tls`优先于`/lib`. 上面列出的所有库都应该在`/lib`. 您可以尝试将`ln`它们（硬链接）到该位置。此外，从`strace`输出中，`/proc/bus/usb`应该挂载文件系统。这是一个内核配置选项。 `/sys/bus/usb/devices`广泛用于查找设备；您的 Ubuntu 12.04 ARM Linux 不太可能缺少此功能。还有一个`libd2xx_table.so`最有可能用于查找非标准 USB 描述符。

最后，对问题进行更多描述会有所帮助。您尝试运行一些程序并且没有输出？或者你运行程序并且它有异常？如果`statictest` **ARM**二进制文件无法运行，那么您最初的假设可能是正确的。较旧的 2.6.32 内核（或 ld-linux.so）可能`ARM926EJ-S`兼容，但较新的 Ubuntu 12.04 不兼容。在这种情况下，`man ld-linux`请在 PC 主机上使用以查看`ld-linux.so`环境变量。具体来说，`LD_DEBUG`可能`LD_ASSUME_KERNEL`有助于诱使加载程序加载二进制文件。

# python - JSON的结构化查询语言（Python）

> ID：15306448
> 
> 赞同：11
> 
> 时间：2013-03-09T02:21:23.050
> 
> 标签：python, sql, json

我正在开发一个输出 JSON 文件的系统，我使用 Python 解析数据并将其显示在 UI (PySide) 中。我现在想为该系统添加过滤功能，我认为与其编写查询系统，不如为 JSON（在 Python 中）提供一个查询系统，这将为我节省大量的开发时间。我找到了这个线程：

[JSON 是否有查询语言？](https://stackoverflow.com/questions/777455/is-there-a-query-language-for-json)

但这对于基于 Web 的系统来说更是如此。关于 Python 等价物的任何想法？

编辑[为清楚起见]：

我将生成的数据格式如下：

```
{
    "Operations": [
    {
        "OpID": "0", 
        "type": "callback", 
        "stringTag1": "foo1", 
        "stringTag2": "FooMsg", 
        "Children": [...],
        "value": "0.000694053"
   },
   {
        "OpID": "1", 
        "type": "callback", 
        "stringTag1": "moo1", 
        "string2": "MooMsg", 
        "Children": [...],
        "value": "0.000468427"
   }
} 
```

'Children' 可以是同一事物的嵌套数组（其他操作）。该系统将被构建为允许用户将自己的标签也添加到数据中。我希望有一个查询系统，允许用户定义他们自己的“过滤器”，因此是关于查询语言的问题。如果有什么东西可以让我做类似“SELECT * WHERE "type" == "callback" 并获得必要的操作，那就太好了。

Pync 的建议很有趣，我来看看。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T03:57:00.773

我稍微考虑了一下，我倾向于一些不太具体的东西，比如“JSON 查询语言”，并考虑了更通用的东西。我记得在使用 C# 时，他们有一个有点通用的查询系统，称为[LINQ](http://msdn.microsoft.com/en-us/library/bb397897.aspx)，用于处理这类查询问题。

看起来 Python 有类似的称为[Pynq](https://github.com/heynemann/pynq/wiki)的东西，它支持基本查询，例如：

```
filtered_collection = From(some_collection).where("item.property > 10").select_many() 
```

它甚至似乎有一些基本的[聚合功能](https://github.com/heynemann/pynq/wiki/Pynq-Factory)。虽然不是特定于 JSON，但我认为它至少是一个很好的查询起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-29T21:14:28.850

我注意到几年前有人问过这个问题，但如果其他人发现了这个问题，这里有一些新的项目试图解决同样的问题：

*   ObjectPath（用于 Python 和 Javascript）： http: [//objectpath.org/](http://objectpath.org/)
*   jsonpath（Javascript 等价物的 Python 重新实现）：[https ://pypi.org/project/jsonpath/](https://pypi.org/project/jsonpath/)
*   yaql：[https ://yaql.readthedocs.io/en/latest/readme.html](https://yaql.readthedocs.io/en/latest/readme.html)
*   pyjq（jq 的 Python 绑定[https://stedolan.github.io/jq/](https://stedolan.github.io/jq/)）：[https ://pypi.org/project/pyjq/](https://pypi.org/project/pyjq/)
*   JMESPath：[https ://github.com/jmespath/jmespath.py](https://github.com/jmespath/jmespath.py)

我个人选择了，`pyjq`因为我`jq`一直都在使用数据探索，但 ObjectPath 似乎非常有吸引力，并且不仅限于 json。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-06T16:05:34.150

您还可以查看 PythonQL，这是一种处理 SQL 和 JSON 查询的 Python 查询语言扩展：[pythonql](https://github.com/pythonql/pythonql)

# java - Java遍历二叉树的所有节点

> ID：15306452
> 
> 赞同：18
> 
> 时间：2013-03-09T02:22:47.100
> 
> 标签：java, binary-tree, traversal, tree-traversal

假设我有一个简单的二叉树节点类，如下所示：

```
public class BinaryTreeNode {
    public String identifier = "";
    public BinaryTreeNode parent = null;
    public BinaryTreeNode left = null;
    public BinaryTreeNode right = null;

    public BinaryTreeNode(BinaryTreeNode parent, String identifier)
    {
        this.parent = parent; //passing null makes this the root node
        this.identifier = identifier;
    }

    public boolean IsRoot() {
        return parent == null;
    }
} 
```

我将如何添加一种能够递归遍历任何大小的树的方法，从左到右访问每个现有节点，*而无需*重新访问已经遍历过的节点？

这会工作吗？：

```
public void traverseFrom(BinaryTreeNode rootNode)
{
    /* insert code dealing with this node here */

    if(rootNode.left != null)
        rootNode.left.traverseFrom(rootNode.left);

    if(rootNode.right != null)
        rootNode.traverseFrom(rootNode.right);
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-09T02:25:43.590

您可以实现 3 种类型的二叉树遍历：

例子：

考虑以下二叉树：

![在此处输入图像描述](../Images/ed4ec64ad12de8731e260cd400d03587.png)

```
Pre-order traversal sequence: F, B, A, D, C, E, G, I, H (root, left, right)
In-order traversal sequence: A, B, C, D, E, F, G, H ,I (left, root, right)
Post-order traversal sequence: A, C, E, D, B, H, I, G, F (left, right, root) 
```

代码示例：

从左到右遍历二叉树，不按顺序遍历二叉树：

```
public void traverse (Node root){ // Each child of a tree is a root of its subtree.
    if (root.left != null){
        traverse (root.left);
    }
    System.out.println(root.data);
    if (root.right != null){
        traverse (root.right);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T02:29:19.393

codeMan 是对的。遍历将访问左侧的每个节点。一旦它到达左侧的最后一个节点，它就会开始沿着右侧节点返回。这是深度优先搜索 (DFS) 遍历。因此，每个节点只被访问一次，并且算法在 O(n) 时间内运行。快乐编码。

# java - 积分不对齐

> ID：15306455
> 
> 赞同：1
> 
> 时间：2013-03-09T02:23:30.893
> 
> 标签：java, android, graphics, graph

我正在尝试为我的应用程序创建一个基本图表，但我遇到了一个小问题。目前，发生的事情是我的图表是如我所愿生成的，但是当我在其中绘制我的点时，这些点总是“偏离 1”，具体来说，我的点应该位于第 15 位图表显示为 14。我的图表中的所有其他点也是如此，因为它们的显示也比应有的低 1。我尝试将 1 添加到 cond，但这似乎并没有改变任何实际显示的点，只是将我的标签在 y 轴上移动以开始更高。以下是我认为负责的代码，但如果需要更多，只需询问，我将发布所询问的内容。

注意：这是用于生成 2d 图形的课程作业，所以我不能专门使用图形课程，尽管我知道这样做要容易得多。

代码如下：

```
public class GraphicsView extends View {

     ArrayList<Point> points = new ArrayList<Point>();
     Path xPath = new Path();
     Path yPath = new Path();
     Path zPath = new Path();
     Path drawGrid = new Path();
         ...
     Integer xAxis;
     Integer yAxis;

     @Override
     protected void onDraw(Canvas canvas) {
       Integer counter = points.size();
       Integer xCord;
       super.onDraw(canvas);        
       yAxis = this.getHeight();
       xAxis = this.getWidth();
       canvas.drawColor(R.color.Background);
       <Setting different paint objects to the right colors here>
       xPath.moveTo(20, yAxis-20);
       yPath.moveTo(20, yAxis-20);
       zPath.moveTo(20, yAxis-20);
       drawGrid.moveTo(22, yAxis-20);
       drawGrid.lineTo(22, 0);
       canvas.drawPath(drawGrid,grid);
       drawGrid.moveTo(22, yAxis-20);
       drawGrid.lineTo(xAxis, yAxis-22);
       canvas.drawPath(drawGrid,grid);
       //Left right Axis (X)
       for (Integer ctr = counter; ctr > 0; ctr--) {
           Integer value = counter- ctr + 1;
           canvas.drawText(value.toString(), (xAxis-20)/ctr,yAxis-5, grid);
       }
       //Up down Axis (Y)
       for (Integer ctr = 1; ctr < 22; ctr++) {
           Integer value = ctr - 1;
           canvas.drawText(value.toString(), 5, scale(yAxis, ctr), grid);
       }
       for (Point point : points)
       {        
           xCord = ((xAxis -20) / counter);
           xPath.lineTo(xCord, scale(yAxis,point.getxCord()));
           xPath.addCircle(xCord, scale(yAxis, point.getxCord()), 2, Direction.CW);
           yPath.lineTo(xCord, scale(yAxis, point.getyCord()));
           yPath.addCircle(xCord, scale(yAxis,point.getyCord()), 2, Direction.CW);
           zPath.lineTo(xCord, scale(yAxis, point.getzCord()));
           zPath.addCircle(xCord, scale(yAxis, point.getzCord()), 2, Direction.CW);
           canvas.drawPath(xPath, xPaint);
           canvas.drawPath(yPath, yPaint);
           canvas.drawPath(zPath, zPaint);
           counter -= 1;
        }       
     }

     private Integer scale(Integer Axis, Integer cord) {
         Integer point = 0;
         point = (Axis - (((Axis-20)/21)) * cord);
         return point;
     }
} 
```

重申一下，我正在寻找一种解决它的方法，以便当一个值设置为 15 时，它显示它沿着 y 轴上的 15。目前显示为14左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:48:44.650

每当您调用时`point.getyCord()`，只需添加一个`+ 1`即可。

```
point.getyCord() + 1 
```

您能否确认当您设置 y 值时，它实际上是作为所需值输入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:23:21.627

你的问题出在这里：

```
for (Integer ctr = 1; ctr < 22; ctr++) {
    Integer value = ctr - 1;
    canvas.drawText(value.toString(), 5, scale(yAxis, ctr), grid); 
```

你的 Y 轴以 label 开头`0`，但它把它放在`1`位置，因为`value = ctr - 1`。当您`scale()`稍后使用该功能时，您不会将其偏移一。

解决此问题的两种方法：

**修改 scale() 为您偏移**

```
private Integer scale(Integer Axis, Integer cord) {
    Integer point = 0;
    point = (Axis - (((Axis-20)/21)) * (cord + 1));
    return point;
} 
```

如果你使用这个方法，你也应该去掉`value`你在绘制轴时使用的变量，因为你也可以只使用`ctr`字符串。

*   **每次偏移你的 y 坐标**

正如 Colin Gillespie 所说，您只需将 1 添加到`point.getCord()`.

* * *

我更喜欢第一种方法，因为它更干净，而且你只需要在那个函数中抵消一次。使用第二种方法，每当您将坐标传递给比例时，您都必须记住偏移它。

# windows - Windows 上的 TideSDK / Titanium 桌面字体问题

> ID：15306458
> 
> 赞同：0
> 
> 时间：2013-03-09T02:25:23.687
> 
> 标签：windows, fonts, webkit, titanium, tidesdk

我对 Titanium 桌面和 TideSDK 都有疑问。这个问题在这里解释

[Webkit（内钛桌面）缩小字体](https://stackoverflow.com/questions/8961880/webkit-inside-titanium-desktop-shrinked-fonts)

并在此处报告为“已修复”错误 [https://jira.appcelerator.org/browse/TIDESK-136](https://jira.appcelerator.org/browse/TIDESK-136)

为了快速总结，这个问题涉及到最后一个字体的最后 1px 列被切断。

该案例显示它已解决，但它在 Windows 7 和 Windows XP 上都发生在我身上。我认为这是由于过时的 webkit 造成的，但我刚刚发现 wunderlist 是基于此构建的，但似乎没有受到影响。

有没有人经历过这个，如果是这样修复它？

目前我正在使用 TideSDK v1.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:35:05.080

使用`-webkit-font-size-adjust`，应该可以解决问题。

# regex - 如何使用正则表达式在大括号内侧插入空格

> ID：15306459
> 
> 赞同：0
> 
> 时间：2013-03-09T02:25:25.587
> 
> 标签：regex, sublimetext2

我想在每个字符的~~前后插入空格。~~`( ) [ ]`我想使用 Sublime Edit 的查找和替换操作，但我猜所有的文本编辑器都一样。

对于单个查询，我构建了这个：

寻找：`([\[\(])(\S)`

用。。。来代替：`$1 $2`

当然，我可以构建两个查询并按顺序运行它们，但我计划将其保存为一个快速片段，我可以将其应用于所有文件，以使大括号更易于阅读。

有没有办法让多个正则表达式查找替换操作同时运行？

编号（$1、$2 等）如何在 OR 查询中发生？还是完全依赖于文本编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:51:30.837

你可能会喜欢这样：

查找正则表达式：在此处`(\[|\()\s*(.*?)\s*(\]|\))`
替换为`$1 $2 $3`
解释演示：[http ://regex101.com/r/hF5uI5](http://regex101.com/r/hF5uI5)

或者

查找正则表达式：在此处`([\[\(])\s*|\s*([\]\)])`
替换为`$1 $2`
解释演示：[http ://regex101.com/r/vA2aH3](http://regex101.com/r/vA2aH3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:09:00.803

对于甚至单个空格填充：

**版本#1：一（二）[三]四**

图案 -`([ ]+)?([\[\]\(\)])([ ]+)?`

替换——“ `$2`”

**版本 #2：一（二）[三]四** *（从 kaᵠ 学到一两件事；）*

图案：`\s*([\[\(])\s*([^\]\)]*?)\s*([\]\)])\s*`

替换：“ `$1 $2 $3`”

**版本#3：一（二）[三]四**

图案：`\s*([\[\(])\s*([^\]\)]*?)\s*([\]\)])\s*`

替换：“ `$1$2$3`”

也很高兴发现[regex101.com](http://regex101.com/)。

# ios - StageWebViewDisk 中断 iPad 上的文件上传（iOS？）

> ID：15306461
> 
> 赞同：0
> 
> 时间：2013-03-09T02:25:55.647
> 
> 标签：ios, file-upload, adobe, stagewebview, stagewebviewbridge

我正在为 iPad/iPhone 应用程序使用 Adob​​e Air。

我还使用`StageWebViewBridge`( [https://github.com/paleozogt/StageWebViewBridge](https://github.com/paleozogt/StageWebViewBridge) ) 作为主要的 Web 内容显示容器。

我的应用程序适用于桌面版本，但是`StageWebViewBridge`会`StageWebViewDisk`破坏 HTML 文件上传功能：

```
<input id="user_avatar" name="user[avatar]" style="width:100%" type="file" /> 
```

即，无论何时从任何一个`Take Photo or Video`或`Choose Existing`从真正的 iPad 设备中浏览和选择文件，上述`user_avatar`输入都不会得到更新。

我相信有些路径被`StageWebViewDisk.initialize(stage)`.

你可以在`StageWebViewDisk`这里找到完整的来源： [https ://github.com/paleozogt/StageWebViewBridge/blob/master/StageWebViewBridge/src/es/xperiments/media/StageWebViewDisk.as](https://github.com/paleozogt/StageWebViewBridge/blob/master/StageWebViewBridge/src/es/xperiments/media/StageWebViewDisk.as)

而下面的代码片段非常可疑：

```
case isIPHONE :
    /* new iOS 5.0 Data Storage Guidelines
     * https://developer.apple.com/icloud/documentation/data-storage/
     * https://developer.apple.com/library/ios/#qa/qa1719/_index.html
     */
    _appCacheFile = new File(File.applicationDirectory.nativePath +"/\.\./Library/Caches");

    _applicationCacheDirectory = new File( _appCacheFile.nativePath ).url;
    _applicationRootPath = _applicationCacheDirectory + '/' + getWorkingDir();
    _applicationSourcesDirectory = new File( new File( "app:/" + _document_root ).nativePath ).url;
    _appDocsDirectory = File.documentsDirectory.url;

    /* new iOS 5.0 Data Storage Guidelines
     * https://developer.apple.com/icloud/documentation/data-storage/
     * https://developer.apple.com/library/ios/#qa/qa1719/_index.html
     */                 
    _applicationTempDir = new File(File.applicationDirectory.nativePath +"/\.\./tmp");

    // To acomplish the Apple  Data Storage Guidelines Rules delete our TMP files dir at exit
    NativeApplication.nativeApplication.addEventListener(Event.EXITING, deleteTempFolder,false,0,true );
    NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, deleteTempFolder, false, 0, true);                   

    break; 
```

我调试了很多，我终于发现这`StageWebViewDisk.initialize(stage)`是导致问题的原因。

证明是，当我不使用`StageWebViewDisk.initialize(stage)`时，直接分配`stage`to `StageWebViewBridge._view.stage`，效果很好。

我不熟悉 iOS app/cache 目录。

请给我提意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:17:28.167

我终于想通了：

```
_applicationTempDir = new File(File.applicationDirectory.nativePath +"/\.\./SWVBTmp");
// It seems "tmp" is being used by the iOS system (such as the html file upload), so we changed to "SWVBTmp"; 
```

# c - getchar() 为向上和向下箭头键返回相同的值 (27)

> ID：15306463
> 
> 赞同：8
> 
> 时间：2013-03-09T02:26:11.473
> 
> 标签：c, keyboard, getchar

因此，对于键盘上的向上键，我得到 27，令人惊讶的是，对于向下键，我也得到 27。我需要我的程序在向上和向下键上表现不同，我似乎无法弄清楚。我正在使用 Linux，并且需要它在 Linux 上工作。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
int main()
{
    int c = getchar();

    if(c==27)
    {
        printf("UP");
    }

    if(c==28)
    {
        printf("DOWN");
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T02:31:45.990

这`27`意味着您正在获得箭头的 ANSI 转义序列。它们将是三个字符序列：27、91，然后是 65、66、67、68 (IIRC) 表示上、下、右、左。如果您`27`从对 的调用中得到 a `getchar()`，则再调用两次以获取`91`确定按下哪个箭头键的 和 数字。

正如其他人提到的，这是特定于平台的，但您可能不在乎。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T03:05:52.333

这是使用 ncurses 库编写的程序，并显示按下的箭头键。

```
#include<ncurses.h>

int main()
{
int ch;

/* Curses Initialisations */
initscr();
raw();
keypad(stdscr, TRUE);
noecho();

printw("Press E to Exit\n");

while((ch = getch()) != 'E')
{
    switch(ch)
    {
    case KEY_UP:         printw("\nUp Arrow");
                break;
    case KEY_DOWN:      printw("\nDown Arrow");
                break;
    case KEY_LEFT:      printw("\nLeft Arrow");
                break;
    case KEY_RIGHT:     printw("\nRight Arrow");
                break;
    default:    
                printw("\nThe pressed key is %c",ch);

    }
}

printw("\n\Exiting Now\n");
endwin();

return 0;
} 
```

编译时，您必须链接到 ncurses 库。

```
gcc main.c -lncurses 
```

这是一个帮助您开始使用 ncurses的[教程。](http://www.tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T02:49:31.823

查看[http://www.gnu.org/software/ncurses/](http://www.gnu.org/software/ncurses/)上的 ncurses 库。将其链接到您的程序将使您能够对关键事件进行各种巧妙的处理。阅读文档，看看你是否想使用它。它提供的正是您所说的您正在寻找的功能。

快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T02:31:25.260

您将按下的键与按下时生成的字符混淆了。当按下 shift 键时，您希望得到一个字符吗？试试这个程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
int main()
{
    do
    {
        int c = getchar();
        printf("c=%d\n", c);
    }
    while (1);
} 
```

尝试按向上箭头，然后输入。然后尝试按向下箭头，然后输入。你会看到键到字符的转换并不简单。

# jquery - 为类别实现 Json 自动完成

> ID：15306467
> 
> 赞同：0
> 
> 时间：2013-03-09T02:26:40.427
> 
> 标签：jquery, ruby-on-rails, ruby, json, ruby-on-rails-3

我正在尝试实现使用 rails 分类的 jquery 自动完成功能。

我能够报告以下看起来像这样的 json 响应

```
["Air Canada to appeal Quebec court ruling on Aveos","First Nations meeting with PM in jeopardy","Neanderthals, humans may have missed each other","New York state enacts tougher gun control measures","Ontario high school teachers drop next week's walkout plan","test","Jean-Sebastien","Serge","Dean","feng","Heather","Carmen","Frank"] 
```

他是 user.firstname 和 article.titles 的组合，由以下响应生成。

```
render :json => (@titles.map(&:title) || []) | (@cus.map(&:first_name) || []) 
```

问题是这对普通的jquery自动完成很有好处，但我正在寻找分类，我想知道如何创建带有标题和类别标签存在标签的对象，我会插入“用户" 或 "article" 取决于对象的类型。

这个想法是为 jquery categorize 提供以下输出

```
 { label: "annttop C13", category: "Products" },
  { label: "anders andersson", category: "People" },
  { label: "andreas andersson", category: "People" },
  { label: "andreas johnson", category: "People" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:39:50.700

我没有看到任何快速的方法来做到这一点，但就像这样

```
@titles.map { |title| { label: title.title, category: 'Products' } } +
@cus.map { |cus| { label: cus.first_name, category: 'People' } } 
```

# iphone - 从Objective-c中的类中归档和检索数组

> ID：15306468
> 
> 赞同：0
> 
> 时间：2013-03-09T02:26:47.307
> 
> 标签：iphone, objective-c, xcode, nsobject, archiving

嗨，我正在尝试借助保存到磁盘的类将数据保存在文件中。它正在保存数据但不检索正确的数据。请帮帮我

这是我的 ViewController.h

```
@interface MIGViewController : UIViewController
- (IBAction)hideKeyboard:(id)sender;
@property (strong, nonatomic) NSMutableArray * myArray;
@property (strong, nonatomic) NSString * pathToFile;
@property (weak, nonatomic) IBOutlet UITextField *nameField;
@property (weak, nonatomic) IBOutlet UITextField *idField;
@property (weak, nonatomic) IBOutlet UITextField *addressField;
@property (weak, nonatomic) IBOutlet UITextField *phoneField;
- (IBAction)addButtonTapped:(id)sender;
- (IBAction)saveButtonTapped:(id)sender;

@end 
```

这是视图 Controller.m

```
#import "MIGViewController.h"
#import "MIGStudent.h"

@interface MIGViewController ()

@end

@implementation MIGViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString * documentsPath = [paths objectAtIndex:0];
    self.pathToFile = [documentsPath stringByAppendingPathComponent:@"students.sukh"];

    NSFileManager * manager = [NSFileManager defaultManager];
    if ([manager fileExistsAtPath:self.pathToFile])
    {
        //File exists
        self.myArray = [NSKeyedUnarchiver unarchiveObjectWithFile:self.pathToFile];

        UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@"Students array" message:[self.myArray description]delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
        [alert show];
    }
    else
    {
        //File doesn't exist
        self.myArray = [NSMutableArray array];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)addButtonTapped:(id)sender {
    NSString * name =self.nameField.text;
    NSString * address = self.addressField.text;
    int studentID = [self.idField.text intValue];
    int phoneNumber = [self.phoneField.text intValue];
    MIGStudent * student = [[MIGStudent alloc] initWithName:name address:address studentID:studentID phoneNumber:phoneNumber];
    [self.myArray addObject:student];
    self.nameField.text = @"";
    self.addressField.text = @"";
    self.idField.text = @"";
    self.phoneField.text = @"";
}

- (IBAction)saveButtonTapped:(id)sender {
    [NSKeyedArchiver archiveRootObject:self.myArray toFile:self.pathToFile];
}
- (IBAction)hideKeyboard:(id)sender {
    [self resignFirstResponder];
}
@end 
```

这是我的班级 Student.h

```
@interface MIGStudent : NSObject <NSCoding>

@property (strong, nonatomic) NSString * name;
@property (strong, nonatomic) NSString * address;
@property (nonatomic) int studentID;
@property (nonatomic) int phoneNumber;

-(id)initWithName:(NSString *) name address:(NSString *)address studentID: (int)studentID phoneNumber:(int) phoneNumber;

@end 
```

这是Student.m

```
#import "MIGStudent.h"

@implementation MIGStudent

-(id) initWithName:(NSString *)name address:(NSString *)address studentID:(int)studentID phoneNumber:(int)phoneNumber
{
    if (self=[super init])
    {
        self.name = name;
        self.address = address;
        self.phoneNumber = phoneNumber;
        self.studentID = studentID;
    }
    return self;
}

-(void) encodeWithCoder:(NSCoder *)aCoder
{
   //Used when saving to disk
    [aCoder encodeObject:self.name forKey:@"name"];
    [aCoder encodeObject:self.address forKey:@"address"];
    [aCoder encodeInt:self.phoneNumber forKey:@"phoneNumber"];
    [aCoder encodeInt:self.studentID forKey:@"studentID"];
}

-(id) initWithCoder:(NSCoder *)aDecoder
{
    //Used when reading from disk
    self.name = [aDecoder decodeObjectForKey:@"name"];
    self.address = [aDecoder decodeObjectForKey:@"address"];
    self.phoneNumber = [aDecoder decodeIntForKey:@"phoneNumber"];
    self.studentID = [aDecoder decodeIntForKey:@"studentID"];

    return self;
}
@end 
```

这是我每次认为一切正常但在检索数据时出现问题时得到的输出

![在此处输入图像描述](../Images/85ea19129f7f083dac3f5b2ed0dd1e10.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:36:30.547

这对您的 NSCoding 实现来说不是问题，实际上这根本不是问题！这就是 NSArray 从字面上打印自己的方式（该`-description`方法的结果）。它这样做的事实表明归档/取消归档过程进展顺利。数组是括号 () 的集合，其中的对象格式为`<Class : memory address>`. 如果您有一个无效对象数组，那么您的数组很可能会拒绝打印，或者在将学生对象添加到其中时崩溃。

您可以在课堂上利用这一点`MIGStudent`并覆盖`-description`以打印更友好的格式。例如：

```
-(NSString*)description {
    return [NSString stringWithFormat:@"<%@ : %p Student named: %@ - who lives at: %@ With the ID number: %d and the phone number: %d>", NSStringFromClass(self.class), self, self.name, self.address, self.studentID, self.phoneNumber];
} 
```

[作为旁注，初始化程序***总是***调用 super。您的`initWithCoder:`方法将始终返回 nil。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:54:09.203

您的`initWithCoder:`方法不正确，它将失败，因为当前它将返回 nil 或一些垃圾值，它应该是：

```
-(id) initWithCoder:(NSCoder *)aDecoder
{
     self = [super init];
     if (self)
     {
         //Used when reading from disk
         self.name = [aDecoder decodeObjectForKey:@"name"];
         self.address = [aDecoder decodeObjectForKey:@"address"];
         self.phoneNumber = [aDecoder decodeIntForKey:@"phoneNumber"];
         self.studentID = [aDecoder decodeIntForKey:@"studentID"];
     }

     return self;
 } 
```

其次，您可以覆盖您的类的方法`description`或`debugDescription`方法以返回有关该类的自定义信息。

# ios - 文本字段中的数据未保存

> ID：15306469
> 
> 赞同：0
> 
> 时间：2013-03-09T02:26:48.683
> 
> 标签：ios, objective-c

这是我的 .h 文件

```
#import <UIKit/UIKit.h>

// for use in xib/storyboard:
#define TAG_TEXT_FIELD 10000
#define CELL_REUSE_IDENTIFIER @"EditableTextCell"

@interface EditableListViewController : UITableViewController

// list data:
@property (nonatomic, copy) NSArray *contents;

// methods for possible overriding:
- (void)contentsDidChange;
- (UITextField *)createTextFieldForCell:(UITableViewCell *)cell;

@end 
```

这是我的 .m 文件

```
#import "EditableListViewController.h"

static NSString *inactiveTextFieldHint = @"Tap to add item";
static NSString *activeTextFieldHint = @"";
static NSString *returnTappedTextFieldHint = @"~"; // HACK to mark when return was tapped

#pragma mark - Helper Categories

@interface UITextField (ChangeReturnKey)
- (void)changeReturnKey:(UIReturnKeyType)returnKeyType;
@end

@implementation UITextField (ChangeReturnKey)
- (void)changeReturnKey:(UIReturnKeyType)returnKeyType
{
    self.returnKeyType = returnKeyType;
    [self reloadInputViews];
}
@end

#pragma mark - EditableListViewController

@interface EditableListViewController () <UITextFieldDelegate> {
    NSMutableArray *rowsContent;
}
@end

@implementation EditableListViewController

#pragma mark - Contents Assignment

- (NSArray *)contents
{
    return rowsContent;
}

- (void)setContents:(NSArray *)contents
{
    rowsContent = [NSMutableArray arrayWithArray:contents];
    [self.tableView reloadData];
}

#pragma mark - Table Changes

- (void)deleteRow:(NSIndexPath *)indexPath
{
    [rowsContent removeObjectAtIndex:indexPath.row];
    [self.tableView beginUpdates];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView endUpdates];
    [self contentsDidChange];
}

- (void)addRow:(NSIndexPath *)indexPath text:(NSString *)text
{
    if (rowsContent == nil) {
        rowsContent = [[NSMutableArray alloc] initWithCapacity:1];
    }
    [rowsContent addObject:text];
    NSIndexPath *nextRow = [NSIndexPath indexPathForRow:indexPath.row+1 inSection:indexPath.section];
    [self.tableView beginUpdates];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:nextRow] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView endUpdates];
    [self contentsDidChange];
}

- (void)contentsDidChange
{
}

#pragma mark - Table View Data Source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return rowsContent.count + 1; // extra one for inserting new row
}

- (UITextField *)createTextFieldForCell:(UITableViewCell *)cell
{
    CGFloat padding = 8.0f;
    CGRect frame = CGRectInset(cell.contentView.bounds, padding, padding / 2);
    UITextField *textField = [[UITextField alloc] initWithFrame:frame];
    CGFloat spareHeight = cell.contentView.bounds.size.height - textField.font.pointSize;
    frame.origin.y = self.tableView.style == UITableViewStyleGrouped ? spareHeight / 2 : spareHeight - padding/2;
    textField.frame = frame;
    textField.tag = TAG_TEXT_FIELD;
    textField.borderStyle = UITextBorderStyleNone;
    textField.returnKeyType = UIReturnKeyDone;
    textField.autocapitalizationType = UITextAutocapitalizationTypeSentences;
    textField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
    return textField;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *reuseIdentifier = CELL_REUSE_IDENTIFIER;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    }

    UITextField *textField = (UITextField *)[cell viewWithTag:TAG_TEXT_FIELD];
    if (textField == nil) {
        textField = [self createTextFieldForCell:cell];
        [cell.contentView addSubview:textField];
    }
    textField.delegate = self;
    if (indexPath.row < rowsContent.count) {
        textField.text = [rowsContent objectAtIndex:indexPath.row];
        textField.placeholder = nil;
    } else {
        textField.text = nil;
        textField.placeholder = NSLocalizedString(inactiveTextFieldHint, nil);
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch (editingStyle) {

        case UITableViewCellEditingStyleDelete: {
            [self deleteRow:indexPath];
            break;
        }

        case UITableViewCellEditingStyleInsert: {
            UITableViewCell *sourceCell = [tableView cellForRowAtIndexPath:indexPath];
            UIView *textField = [sourceCell viewWithTag:TAG_TEXT_FIELD];
            [textField becomeFirstResponder];
            break;
        }

        case UITableViewCellEditingStyleNone:
            break;
    }
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return (indexPath.section == 0);
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return indexPath.section == 0 && indexPath.row < rowsContent.count;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    NSString *rowContent = [rowsContent objectAtIndex:fromIndexPath.row];
    [rowsContent removeObjectAtIndex:fromIndexPath.row];
    [rowsContent insertObject:rowContent atIndex:toIndexPath.row];
    [self contentsDidChange];
}

#pragma mark - Table View Delegate

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section != 0) return UITableViewCellEditingStyleNone;
    return indexPath.row < rowsContent.count ? UITableViewCellEditingStyleDelete : UITableViewCellEditingStyleInsert;
}

- (NSIndexPath *)tableView:(UITableView *)tableView
    targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath
    toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath
{
    return proposedDestinationIndexPath.section == 0 && proposedDestinationIndexPath.row < rowsContent.count
        ? proposedDestinationIndexPath
        : [NSIndexPath indexPathForRow:rowsContent.count-1 inSection:0];
}

#pragma mark - UITextFieldDelegate

- (NSIndexPath *)cellIndexPathForField:(UITextField *)textField
{
    UITableViewCell *parentCell = (UITableViewCell *)[[textField superview] superview];
    return [self.tableView indexPathForCell:parentCell];
}

- (NSUInteger)rowIndexForField:(UITextField *)textField
{
    return [self cellIndexPathForField:textField].row;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if ([textField.text length] == 0) {
        textField.placeholder = NSLocalizedString(activeTextFieldHint, nil);
    }
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    textField.placeholder = returnTappedTextFieldHint;
    [textField resignFirstResponder];
    return YES;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.text.length == 0) {
        // if it's the last field, change the return key to "Next"
        if ([self rowIndexForField:textField] == rowsContent.count) {
            [textField changeReturnKey:UIReturnKeyNext];
        }
    }
    else {
        // if return button is "Next" and field is about to be empty, change to "Done"
        if (textField.returnKeyType == UIReturnKeyNext && string.length == 0 && range.length == textField.text.length) {
            [textField changeReturnKey:UIReturnKeyDone];
        }
    }

    return YES;
}

- (BOOL)textFieldShouldClear:(UITextField *)textField
{
    if (textField.returnKeyType == UIReturnKeyNext) {
        [textField changeReturnKey:UIReturnKeyDone];
    }

    return YES;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSIndexPath *currRow = [self cellIndexPathForField:textField];
    NSUInteger cellIndex = currRow.row;
    if (cellIndex < rowsContent.count) {
        if ([textField.text length]) {
            if (![textField.text isEqualToString:[rowsContent objectAtIndex:cellIndex]]) {
                [rowsContent replaceObjectAtIndex:cellIndex withObject:textField.text];
                [self contentsDidChange];
            }
        }
        else {
            [self deleteRow:currRow];
        }
    }
    else { // new row
        if ([textField.text length]) {
            [self addRow:currRow text:textField.text];
            [textField changeReturnKey:UIReturnKeyDone];
            if ([textField.placeholder isEqual:returnTappedTextFieldHint]) { // if tapped return, go to the next field
                UITableViewCell *nextCell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:cellIndex+1 inSection:currRow.section]];
                UIView *nextTextField = [nextCell viewWithTag:TAG_TEXT_FIELD];
                [nextTextField becomeFirstResponder];
            }
        }
        else {
            textField.placeholder = NSLocalizedString(inactiveTextFieldHint, nil);
        }
    }
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

当用户输入内容并离开应用程序，在多任务处理中退出应用程序时，用户输入的文本会消失并将文本重置为开始时的样子。

我该怎么做才能保存用户输入的文本。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:54:22.970

@user2102538 正如你所问，这是使用 NSUserDefaults 的方式。

```
Saving

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// saving an NSString
 [prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];

// saving an NSInteger
 [prefs setInteger:42 forKey:@"integerKey"];

// saving a Double
 [prefs setDouble:3.1415 forKey:@"doubleKey"];

// saving a Float
 [prefs setFloat:1.2345678 forKey:@"floatKey"];

// This is suggested to synch prefs.

 [prefs synchronize];///////Very Important. This SAVES THE NEWLY ADDED INTO NSUserDefaults

Retrieving

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSString
 NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// getting an NSInteger
 NSInteger myInt = [prefs integerForKey:@"integerKey"];

// getting an Float
 float myFloat = [prefs floatForKey:@"floatKey"]; 
```

你可以检查 NSUserDefault 是否有对象

```
[[NSUserDefaults standardUserDefaults] boolForKey:@"yourKey"] // returns bool 
```

甚至可以像这样使用

```
if(![[NSUserDefaults standardUserDefaults] objectForKey:@"yourKey"])
{
//no object present. Set the object.
}
else
{
//retrieve the object and do what u wish 
} 
```

# jfreechart - 如何处理具有确切值的 2 个 TimeSeries？

> ID：15306471
> 
> 赞同：1
> 
> 时间：2013-03-09T02:27:10.437
> 
> 标签：jfreechart

我正在创建一个`TimeSeries`包含 2 个 es 的图表`TimeSeries`（即 A`Dataset`持有 2 个`TimeSeries`对象。

碰巧两个`TimeSeries`对象都具有相同的确切值，并且它们只是重叠，但是客户并不清楚，因为他只看到结果颜色或混合了两个`TimeSeries`对象的颜色！

所以他看到图表显示了 2 组数据，而只绘制了一条线！

他们是解决这个问题的内置方法吗？你会如何解决这个问题？

就我个人而言，我正在考虑将这张图表分成 2 份，以便客户清楚地了解，但我想知道是否有一种方法可以更省力、更有效地解决这种情况。

**编辑：**最终输出应该是图像，所以这不是桌面应用程序（即 Swing）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:34:55.740

一种方法是让用户使用合适的控件来控制系列的可见性`Action`，如本[例](https://stackoverflow.com/a/11895709/230513)所示。

![图片](../Images/788d178a073bc5894471e76212d78317.png)

# android - 为什么使用 EditText 的字体分辨率不好？

> ID：15306479
> 
> 赞同：2
> 
> 时间：2013-03-09T02:28:18.267
> 
> 标签：android, android-layout

我在我的应用程序中使用默认的[EditText](http://developer.android.com/reference/android/widget/EditText.html)控件，字体和分辨率看起来很差，特别是与 DbTextViewer 或 Internet/Chrome 浏览器使用的任何东西相比，它看起来更干净。

该应用程序旨在在平板电脑等大屏幕设备上运行，而不是在手机上运行。

您如何改善此处文本的外观？

这是我的应用程序 ![我的应用](../Images/fd449479604f1a829468a3a1d080ec45.png)

DbTextEditViewer 看起来好多了 ![数据库文本](../Images/feeff7acc15a598c60d1385001993081.png)

主要的.xml

```
 <EditText
        android:id="@+id/edtx"
        android:inputType="textFilter|textMultiLine"
        android:textSize="10sp" />
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"    
    android:paddingTop="0dp"
    android:paddingBottom="0dp"
    android:paddingLeft="8dp"
    android:paddingRight="8dp"
        android:orientation="horizontal" >
    <Button
            android:id="@+id/button2"
    android:paddingBottom="8dp"      
            android:layout_width="wrap_content"
        android:layout_height="26sp"      
     android:textSize="8sp"      
            android:text="save"/>
  </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:38:58.090

我间接找到了我的问题的答案

[https://stackoverflow.com/a/6922397/266457](https://stackoverflow.com/a/6922397/266457) [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# python - 递归与迭代图遍历中的内存利用率

> ID：15306483
> 
> 赞同：7
> 
> 时间：2013-03-09T02:29:35.293
> 
> 标签：python, memory, recursion, stack, iteration

我查看了一些常用工具，如[Heapy](https://stackoverflow.com/questions/110259/python-memory-profiler)来测量每种遍历技术使用了多少内存，但我不知道它们是否给了我正确的结果。这是一些给出上下文的代码。

该代码只是测量图中唯一节点的数量。提供了两种遍历技术，即。`count_bfs`和`count_dfs`

```
import sys
from guppy import hpy
class Graph:
    def __init__(self, key):
        self.key = key       #unique id for a vertex 
        self.connections = []
        self.visited = False 

def count_bfs(start):
    parents = [start]
    children = []
    count = 0
    while parents:
        for ind in parents:
            if not ind.visited:
                count += 1
                ind.visited = True
                for child in ind.connections:
                        children.append(child)

        parents = children
        children = []
    return count

def count_dfs(start):
    if not start.visited:
          start.visited = True
    else:
          return 0

    n = 1
    for connection in start.connections:
        n += count_dfs(connection)
    return n

def construct(file, s=1): 
    """Constructs a Graph using the adjacency matrix given in the file

    :param file: path to the file with the matrix
    :param s: starting node key. Defaults to 1

    :return start vertex of the graph
    """
    d = {}
    f = open(file,'rU')
    size = int(f.readline())
    for x in xrange(1,size+1):
        d[x] = Graph(x)
    start = d[s]
    for i in xrange(0,size):
           l = map(lambda x: int(x), f.readline().split())
           node = l[0]
           for child in l[1:]:
               d[node].connections.append(d[child])
    return start

if __name__ == "__main__":
    s = construct(sys.argv[1])
    #h = hpy()
    print(count_bfs(s))
    #print h.heap()
    s = construct(sys.argv[1])
    #h = hpy()
    print(count_dfs(s))
    #print h.heap() 
```

我想知道两种遍历技术的总内存利用率不同的因素是什么。`count_dfs`和`count_bfs`？一个人的直觉`dfs`可能是昂贵的，因为每个函数调用都会创建一个新堆栈。如何测量每种遍历技术中的总内存分配？
（评论的）`hpy`陈述是否给出了所需的衡量标准？

带有连接的示例文件：

```
4
1 2 3
2 1 3
3 4 
4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T03:15:43.753

这是一个 python 问题，使用多少*堆栈空间*可能比多少总内存更重要。Cpython 的下限为 1000 帧，因为它与 c 调用堆栈共享其调用堆栈，而 c 调用堆栈又在大多数地方限制为 1 兆字节的数量级。出于这个原因，当递归深度不受限制时，您几乎应该总是更喜欢迭代解决方案而不是递归解决方案。

[* python 的其他实现可能没有这个限制。cpython 和 pypy 的无堆栈变体具有这个确切的属性]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:34:13.993

很难准确测量使用了多少内存，因为系统在实现堆栈帧的方式上有所不同。一般来说，递归算法比迭代算法使用更多的内存，因为每当发生新的函数调用时，每个堆栈帧都必须存储其变量的状态。考虑动态规划解决方案和递归解决方案之间的区别。算法的迭代实现比递归实现的运行时间快得多。

如果您真的必须知道您的代码使用了多少内存，请将您的软件加载到 OllyDbg ( [http://www.ollydbg.de/](http://www.ollydbg.de/) ) 等调试器中并计算字节数。快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:19:53.280

对于您的具体问题，我不知道是否会有一个简单的解决方案。这是因为，图遍历的峰值内存使用取决于图本身的细节。

对于深度优先遍历，当算法到达最深的深度时，最大的使用将出现。在您的示例图中，它将遍历`1->2->3->4`并为每个级别创建一个堆栈框架。因此，当它为 4 时，它分配了最多的内存。

对于广度优先遍历，使用的内存将与每个深度的节点数加上下一个深度的子节点数成正比。这些值存储在列表中，这可能比堆栈帧更有效。在示例中，由于第一个节点连接到所有其他节点，因此它会在第一步中立即发生`[1]->[2,3,4]`。

我敢肯定，有一些图表在一种搜索或另一种搜索中会做得更好。

例如，想象一个看起来像链表的图，所有顶点都在一条长链中。深度优先遍历将有一个非常高的峰值内存使用，因为它会一直递归到链中，为每个级别分配一个堆栈帧。广度优先遍历将使用更少的内存，因为它只有一个顶点和一个子节点来跟踪每一步。

现在，将其与深度 2 树的图进行对比。也就是说，有一个根元素连接到大量子元素，而这些子元素都没有相互连接。深度优先遍历在任何给定时间都不会使用太多内存，因为它只需要遍历两个节点，然后就必须备份并尝试另一个分支。另一方面，深度优先遍历将一次将所有子节点放入内存中，这对于一棵大树可能是有问题的。

您当前的分析代码不会找到您想要的峰值内存使用量，因为它只找到您调用时堆上的对象使用的内存`heap`。在您的遍历之前和之后，这可能是相同的。相反，您需要将分析代码插入到遍历函数本身中。我找不到`guppy`自己尝试的预构建包，但我认为这个未经测试的代码可以工作：

```
from guppy import hpy

def count_bfs(start):
    hp = hpy()
    base_mem = hpy.heap().size
    max_mem = 0
    parents = [start]
    children = []
    count = 0
    while parents:
        for ind in parents:
            if not ind.visited:
                count += 1
                ind.visited = True
                for child in ind.connections:
                        children.append(child)
        mem = hpy.heap().size - base_mem
        if mem > max_mem:
            max_mem = mem
        parents = children
        children = []
    return count, max_mem

def count_dfs(start, hp=hpy(), base_mem=None):
    if base_mem is None:
        base_mem = hp.heap().size

    if not start.visited:
          start.visited = True
    else:
          return 0, hp.heap().size - base_mem

    n = 1
    max_mem = 0
    for connection in start.connections:
        c, mem = count_dfs(connection, base_mem)
        if mem > max_mem:
            max_mem = mem
        n += c
    return n, max_mem 
```

两个遍历函数现在都返回一个`(count, max-memory-used)`元组。您可以在各种图表上试用它们，看看有什么区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T04:23:15.157

在这两者中，如果大多数遍历最终触及大部分图形，则深度优先使用较少的内存。

当目标靠近起始节点时，广度优先可能会更好，或者当节点数量没有很快增加时，代码中的父/子数组保持较小（例如，另一个答案提到链表是最坏的情况对于 DFS）。

如果您正在搜索的图形是空间数据，或者具有所谓的“可接受的启发式”，A* 是另一种非常好的算法： [http ://en.wikipedia.org/wiki/A_star](http://en.wikipedia.org/wiki/A_star)

然而，过早的优化是万恶之源。查看您要使用的实际数据；如果它适合合理的内存量，并且搜索在合理的时间内运行，那么您使用哪种算法并不重要。注意，什么是“合理的”取决于您使用它的应用程序以及将运行它的硬件上的资源量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T05:21:57.467

对于使用描述它的标准数据结构（BFS 的队列，DFS 的堆栈）迭代实现的任一搜索顺序，我可以构造一个使用`O(n)`内存的图。对于 BFS，它是一个 n-star，对于 DFS，它是一个 n-chain。我不相信它们中的任何一个都可以在一般情况下做得比这更好，因此这也给出了`Omega(n)`最大内存使用的下限。因此，通过有效实施每一个，它通常应该是一个清洗。

现在，如果您的输入图有一些特征使它们更倾向于这些极端之一或另一个，这可能会通知您决定在实践中使用哪个。

# sql - 需要帮助让我的 Oracle 数据库正常工作。使用 SQL 开发人员

> ID：15306486
> 
> 赞同：1
> 
> 时间：2013-03-09T02:30:28.607
> 
> 标签：sql, database, oracle

这是我的数据库代码，出于某种原因，我无法让它工作，并且遇到了一些我无法摆脱的错误。任何人都可以帮助我吗？

```
CREATE TABLE customer
(CustNo         NUMBER(8),
 CustFname      VARCHAR2(20),
 CustLname      VARCHAR2(25) CONSTRAINT nn_lname NOT NULL,
 CustAdress1    VARCHAR2(30),
 CustAdress2    VARCHAR2(25),
 CustAdress3    VARCHAR2(25),
 CustPcode      VARCHAR2(7) NOT NULL,
 CustEmail      VARCHAR2(30) CONSTRAINT cust_email UNIQUE,
 CustMobile     NUMBER(14),
 CustPhone      NUMBER(14),
 OpenForOffers  CHAR(1),
 CONSTRAINT CustID1_PK
 PRIMARY KEY(CustNo),  
 FOREIGN KEY(CustNo)
 REFERENCES customer (CustNo)
 );

CREATE TABLE bike
(BikeNo        NUMBER(8) PRIMARY KEY,
 DealerNo      NUMBER(8) NOT NULL,
 PurchasePrice NUMBER(8) NOT NULL,
 PurchaseDate  DATE NOT NULL,
 SellPrice     NUMBER(10),
 SellDate      NUMBER(10)
 CONSTRAINT fk_DealerNo FOREIGN KEY (DealerNo)
 REFERENCES Dealer (DealerNo)
 );

CREATE TABLE ClassBikeSize
(BikeNo      NUMBER(8),/* FK */
 BikeModel   VARCHAR(10),
 BikeClass   VARCHAR(10),
 BikeSize    VARCHAR(6),
 PRIMARY KEY(BikeNo),
 CONSTRAINT fk_bikeNo FOREIGN KEY (BikeNo)
 REFERENCES bike (BikeNo));

CREATE TABLE Rental
(CustNo           NUMBER(8),/* FK */
 BikeNo           NUMBER(8),/* FK */
 TimeRented       VARCHAR2(2),
 TimeDueBack      VARCHAR2(2),
 ReservationDate  DATE CONSTRAINT nn_reservationdate NOT NULL,
 RentalPaid       CHAR(1),
 ReservationPaid  VARCHAR2(3),
 ReturnedLate     CHAR(1),
 PRIMARY KEY(BikeNo, CustNo),
 CONSTRAINT fk_Rental_Bike FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo),
 CONSTRAINT fk_Rental_Cust FOREIGN KEY (custNo) REFERENCES customer (CustNo)
 );

CREATE TABLE Dealer
(DealerNo         NUMBER(8),
 BikeNo           NUMBER(8),
 DealerFname      VARCHAR2(10),
 DealerLname      VARCHAR2(10) CONSTRAINT nn_DealerLname NOT NULL,
 DealerAdress1    VARCHAR2(20),
 DealerAdress2    VARCHAR2(20),
 DealerAdress3    VARCHAR2(20),
 DealerPcode      VARCHAR2(8),
 DealerEmail      VARCHAR2(30),
 DealerMob        NUMBER(14),
 DealerPhone      NUMBER(14),
 PRIMARY KEY (BikeNo, DealerNo),
 FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)
 );

CREATE TABLE Employee
(EmpNo          NUMBER(8)CONSTRAINT EmpNo_PK PRIMARY KEY,
 EmpFname       VARCHAR2(10),
 EmpLname       VARCHAR2(10) CONSTRAINT nn_emp_Lname NOT NULL,
 EmpAddress1    VARCHAR2(20),
 EmpAddress2    VARCHAR2(20),
 EmpAddress3    VARCHAR2(20),
 EmpPCode       VARCHAR2(8) CONSTRAINT nn_emp_pcode NOT NULL,
 EmpEmail       VARCHAR2(30),
 EmpMob         NUMBER(14),
 EmpPhone       NUMBER(14)
 );

CREATE TABLE Manufacturer
(ManuNo        NUMBER(8),
 BikeNo        NUMBER(8), /* FK */
 ManuFname     VARCHAR2(10),
 ManuLname     VARCHAR2(10),
 ManuAddress1  VARCHAR2(20),
 ManuAddress2  VARCHAR2(20),
 ManuAddress3  VARCHAR2(20),
 ManuPcode     VARCHAR2(8),
 ManuEmail     VARCHAR2(30),
 ManuMob       NUMBER(14),
 ManuPhone     NUMBER(14),
 PRIMARY KEY (ManuNo, BikeNo),
 CONSTRAINT fk_manu_bikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)
 );

CREATE TABLE Part
(PartNo       NUMBER(8),
 ManuNo       NUMBER(8),/* FK */
 BikeNo       NUMBER(8),/* FK */
 PartPrice    VARCHAR2(3),
 PartSellDate DATE CONSTRAINT nn_selldate NOT NULL,
 PartSupplied VARCHAR(3),
 PRIMARY KEY (PartNo, ManuNo, BikeNo),
 CONSTRAINT fk_part_ManuNo FOREIGN KEY (ManuNo) REFERENCES Manufacturer (ManuNo),
 CONSTRAINT fk_part_BikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)
 );

CREATE TABLE Maintenance
(MainNo       NUMBER(8),
 BikeNo       NUMBER(8),/* FK */
 Fault        VARCHAR(145)CONSTRAINT nn_bikefault NOT NULL,
 FaultDate    DATE CONSTRAINT nn_faultdate NOT NULL,
 Action       VARCHAR(10),
 ActionDate   DATE CONSTRAINT nn_actiondate NOT NULL,
 ActionSuccess VARCHAR(3), 
 PRIMARY KEY (BikeNo, MainNo),
 CONSTRAINT fk_main_BikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)
 );

CREATE TABLE Delivery
(DelNo        NUMBER(8),
 EmpNo        NUMBER(8)NOT NULL,/* FK */
 DelTime      VARCHAR2(10),
 PRIMARY KEY (DelNo, EmpNo),
 CONSTRAINT fk_del_emp FOREIGN KEY (EmpNo) REFERENCES Employee (EmpNo)
 );

CREATE TABLE DeliOrder
(DelNo        NUMBER(8),/* FK */
 EmpNo        NUMBER(8),/* FK */
 OrderNo      NUMBER(8),/* FK */
 PartsDeli    VARCHAR2(3),
 PRIMARY KEY (DelNo, EmpNo, OrderNo),
 CONSTRAINT fk_delicorder_DelNo FOREIGN KEY (DelNo) REFERENCES Delivery (DelNo),
 CONSTRAINT fk_delicorder_EmpNo FOREIGN KEY (EmpNo) REFERENCES Employee (EmpNo),
 CONSTRAINT fk_delicorder_OrderNo FOREIGN KEY (OrderNo) REFERENCES OrderPart (OrderNo)
 );

CREATE TABLE OrderPart
(OrderNo      NUMBER(8),
 EmpNo        NUMBER(8),/* FK */
 PartNo       NUMBER(8),/* FK */
 ManuNo       NUMBER(8),/* FK */
 BikeNo       NUMBER(8),/* FK */
 DeliNo       NUMBER(8),/* FK */
 OrderDate    DATE,
 Orderplaced  VARCHAR(3),
 ArrivalDate  VARCHAR(10),
 PRIMARY KEY (OrderNo, EmpNo, PartNo, ManuNo, BikeNo, DeliNo),
 CONSTRAINT fk_orderpart_EmpNo FOREIGN KEY (EmpNo) REFERENCES Employee (EmpNo),
 CONSTRAINT fk_orderpart_PartNo FOREIGN KEY (PartNo) REFERENCES Part (PartNo),
 CONSTRAINT fk_orderpart_ManuNo FOREIGN KEY (ManuNo) REFERENCES Manufacturer (ManuNo),
 CONSTRAINT fk_orderpart_BikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo),
 CONSTRAINT fk_orderpart_DeliNo FOREIGN KEY (DeliNo) REFERENCES Delivery (DelNo)
 );

CREATE TABLE OrderLine
(OrderNo      NUMBER(8), /* FK */
 ManuNo       NUMBER(8), /* FK */
 BikeNo       NUMBER(8), /* FK */
 LineCost     VARCHAR2(10),
 QuantOrdered VARCHAR2(999),
 PRIMARY KEY (OrderNo, ManuNo, BikeNo),
 CONSTRAINT fk_orderline_OrderNo FOREIGN KEY (OrderNo) REFERENCES OrderPart (OrderNo),
 CONSTRAINT fk_orderline_ManuNo FOREIGN KEY (ManuNo) REFERENCES Manufacturer (ManuNo),
 CONSTRAINT fk_orderline_BikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)
 );

CREATE TABLE ManuPart
(ManuNo       NUMBER(8),/* FK */
 BikeNo       NUMBER(8),/* FK */
 Part         VARCHAR2(10),
 PRIMARY KEY  (ManuNo, BikeNo),
 CONSTRAINT fk_ManuPart_ManuNo FOREIGN KEY (ManuNo) REFERENCES Manufacturuer (ManuNo),
 CONSTRAINT fk_manupart_bikeNo FOREIGN KEY (BikeNo) REFERENCES bike (BikeNo)     
 ); 
```

我去掉了顶部的 Drop 表只是为了显示主要代码。任何帮助将不胜感激！

这是错误：

> 命令行错误：58 列：6 错误报告：SQL 错误：ORA-02253：此处不允许约束规范
> 
> 命令行错误：209 列：68 错误报告：SQL 错误：ORA-00942：表或视图不存在 00942。00000 -“表或视图不存在”
> 
> 命令行错误：199 列：71 错误报告：SQL 错误：ORA-00942：表或视图不存在 00942。00000 -“表或视图不存在”
> 
> 命令行错误：186 列：69 错误报告：SQL 错误：ORA-00942：表或视图不存在 00942。00000 -“表或视图不存在”
> 
> 命令行错误：169 列：78 错误报告：SQL 错误：ORA-02270：此列列表 02270 没有匹配的唯一键或主键。00000 -“此列没有匹配的唯一键或主键。

所有表都有相同的`TABLE OR VIEW DOES NOT EXIST`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:40:16.860

您需要在引用它们的表*之前*定义被引用的表。
例如，定义`dealer` *之前* `bike`（因为自行车参考经销商）。

如果您遇到 A 引用 B 和反之亦然的循环情况，请将两个表 create 语句包装在一个带有前导`BEGIN`和尾随的事务中`COMMIT`。请注意，这样做是很常见的，只有在仔细考虑并在绝对必要的情况下才应该这样做。

我认为您的桌子设计也存在根本性的问题。该`dealer`表具有`bikeno`作为其主键的一部分。这对我来说似乎完全错误 -`bikeno`根本不应该在经销商表中，更不用说成为其钥匙的一部分！

这有点疯狂：

```
CREATE TABLE customer (
  CustNo         NUMBER(8),
  ...
  PRIMARY KEY(CustNo),  
  FOREIGN KEY(CustNo)
  REFERENCES customer (CustNo)
); 
```

嗯？我以前从未见过这个 - 一个引用自身的表！？

# gsm - GSM初学者：开发GSM定位器

> ID：15306489
> 
> 赞同：-1
> 
> 时间：2013-03-09T02:30:55.140
> 
> 标签：gsm

我是一个初学者，我正在尝试构建一个可以向手机发送短信的 GSM 嵌入式设备，以便手机可以定位设备的位置。

我在这个网站上搜索过类似的主题，我想到的是三角测量。

我的问题是我如何知道 GSM 设备靠近哪个塔，以及如何连接到这三个塔来计算位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:44:00.567

为了进行蜂窝三角测量，您需要知道蜂窝塔的地理位置。

要么您付出巨大的努力来建立手机信号塔库存，要么您是网络运营商。在实践中，只有网络运营商提供此服务，其中一些允许通过接口查询位置。但是，这不是标准化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T12:17:00.933

您必须购买 GSM 模块。将其与微控制器连接

首先阅读制造商提供的命令。

您的应用程序有一个 AT 命令

尝试在数据表中搜索以下内容：

AT+CREG。

首先使用此命令配置模块。（请参阅您的 gsm 模块数据表）。

然后使用命令打开工程模式：

AT+QENG=2,1。（参考数据表）

现在它会自动给你 ncell,bcch,dbm,bsic,c1,c2,mcc,mnc,lac & cellid

它会定期或根据您的命令通过查询为您提供此信息。

有许多网站可以对设备进行三角测量，为他们提供这些信息

即opencellid.org/

我希望这有帮助！

# jquery - 如何从以前加载的脚本库（如 jQuery）中隐藏/保护元素

> ID：15306502
> 
> 赞同：0
> 
> 时间：2013-03-09T02:34:06.647
> 
> 标签：jquery, forms

我需要知道是否有办法防止脚本无意中调用 jQuery 中的函数。

基本上，我在每个页面的页眉中调用 jQuery，因为它是整个站点的某些功能所必需的。但是，在我的“联系”页面上，我嵌入了一个使用 JotForm 构建的联系表单。该表单在本地托管，以减少加载时间。

在大多数情况下（在所有现代浏览器中）这不会导致任何问题 - 但在 IE8 中，我在尝试离开页面时遇到堆栈溢出错误。这似乎是由于表单中的某些代码无意中以毫无意义的方式调用了 jQuery 函数。

所以我需要排除包含表单的 div 及其所有内容，使其无法调用 jQuery 函数。

我希望这可以通过我可以在表单之前输入的相对简单的代码行来实现。在这一点上，修改表单脚本超出了我的能力范围。任何建议表示赞赏。

仅供参考 - 这是一个 PHP 网站。不确定这是否有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:01:45.580

加载 jQuery 后立即执行以下操作：

```
myJQuery = jQuery.noConflict(true); 
```

现在使用`myJQuery`代替`jQuery`or `$`（你当然可以称它为更短的名称）。noConflict 将从全局范围中删除`jQuery`和删除`$`（将它们恢复到以前的状态），但会保留它对事件所做的任何摆弄，等等。

你也可以使用这种风格：

```
(function($){
    // all code here
})(jQuery.noConflict(true)) 
```

`$`为了方便起见，它保持命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:22:37.390

戴夫的回答更可取，但如果您不需要 jQuery 的联系页面，您总是可以设置：

```
jQuery = null; 
$ = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T16:47:42.537

noConflict 解决方案对我不起作用。

我最终通过将表单嵌入到单独的 html 页面上，然后使用 iframe 调用该页面来解决这个问题。

感谢您的建议。

# jquery - 让 CoffeeScript 函数返回 true，以便我可以在 click 函数中检查它们

> ID：15306506
> 
> 赞同：0
> 
> 时间：2013-03-09T02:34:41.233
> 
> 标签：jquery, coffeescript

我正在使用一些 CoffeeScript 函数在表单中执行验证，以确保选择了内容或填写了输入内容。单击提交按钮时，我再次运行这些函数。如果功能都为真，则表单可以提交。如果一个是假的，我会打电话`event.preventDefault()`给它。然而，当我点击提交按钮时，我的页面仍然会重新加载。就好像函数没有返回真或假一样。

这是我的 CoffeeScript 函数之一：

```
checkHSGradYearSelect = ->
  valid = false
  hs_present         = $("#profile_high_school").val() isnt ""
  hs_grad_year_empty = $("#profile_hs_grad_year_1i").val() is ""
  if hs_present and hs_grad_year_empty
    $("#hs_grad label.message").text("High School Grad Year can't be blank")
  else
    $("#hs_grad label.message").text("")
    valid = true
  return valid 
```

我还有两个非常相似的。

这是我的点击功能：

```
$("form.edit_profile input[type='submit']").click (event) ->
  bday_valid     = $ checkBirthdaySelects
  hs_valid       = $ checkHSGradYearSelect
  highered_valid = $ checkCollegeGradYearSelect
  if !bday_valid  or !hs_valid or !highered_valid
    event.preventDefault() 
```

有人可以帮我弄清楚我做错了什么吗？

**更新：**如果我登录`bday_valid`或者我得到`hs_valid``highered_valid`

```
[document, context: document, constructor: function, init: function, selector: "", jquery: "1.8.3"…] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:46:17.270

从函数调用中删除 $s 并添加括号：

```
bday_valid     = checkBirthdaySelects()
hs_valid       = checkHSGradYearSelect()
highered_valid = checkCollegeGradYearSelect() 
```

# php - PHP Socket_read 什么都不返回

> ID：15306518
> 
> 赞同：3
> 
> 时间：2013-03-09T02:36:27.860
> 
> 标签：php, html, sockets, websocket

我可以成功地将一些文本写入我的套接字（我知道这一点，因为它返回字节长度），但是当我尝试 socket_read 时，它返回并返回空字符串。我用 MSG_WAITALL 参数尝试了 socket_recv，它返回 0 个字节。这是怎么回事？奇怪的是，我可以收到这样的消息：

```
$input = "HEAD / HTTP/1.1\r\n";
$input .= "Host: mydomain.com\r\n";
$input .= "Connection: Close\r\n\r\n"; 
```

这是我的完整代码：

```
<?php
echo "loading socket...";

$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
$result = socket_connect($socket, "fefansoftware.com", 80);

$input = "hello world";
echo socket_write($socket, $input, strlen($input));

$buffer = 'This is my buffer.';
if ($bytes = socket_recv($socket, $buffer, 2048, MSG_WAITALL)) {
    echo $bytes . " bytes received";
    echo $buffer;
}else {
    echo "read failed";
}

socket_close($socket);
?> 
```

为什么我收不到 hello world 消息，但我可以收到“HEAD / HTTP1.1...”消息？

# iphone - 未知类 在 Interface Builder 文件中 + 本地化问题

> ID：15306526
> 
> 赞同：2
> 
> 时间：2013-03-09T02:37:34.150
> 
> 标签：iphone, ios, xcode, uiviewcontroller, localization

我有一个有两个本地化的应用程序。通常我使用 'NSLocalizedString' 并为两种本地化保留相同的源代码，但我的一个 ViewController 必须在每个区域设置中看起来和功能都不同。所以我按下“Localize..”并创建了它的两个本地化版本。正常的东西。

从那时起 - 在运行时我得到：

> Interface Builder 文件中的未知类 MyViewController。

并且不显示视图控制器（如果重要，它是 UITableViewController）。我检查了我的故事板，自定义类仍然列出并链接到视图控制器显示。我没有更改每个语言环境中的类名 - 它仍然是相同的。

这里有什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:16:37.993

我在我的项目中试验了这种问题，我的问题是我的 viewcontrollers .m 文件未包含在 Build Phases->Compile Sources 的编译源中我手动将它添加到 Compile Sources 并为我解决了问题。我希望它会帮助你。

# iphone - 从 iPhone 中的推送通知唤醒

> ID：15306529
> 
> 赞同：0
> 
> 时间：2013-03-09T02:38:33.807
> 
> 标签：iphone, objective-c, push-notification, launch

我成功配置了我的 iphone 应用程序以接收推送通知。

但是当我的应用程序完全关闭[不在后台状态]时用户单击通知时，我无法弄清楚如何捕获嵌入的用户信息。应用完全关闭时不会调用 didReceiveRemoteNotification。

有关如何捕获该数据的任何建议？

谢谢;

# sql - 与第二个字段相交的 SQL 中的返回字段？

> ID：15306531
> 
> 赞同：2
> 
> 时间：2013-03-09T02:38:39.763
> 
> 标签：sql, db2, relational-division

我正在尝试为特定人员返回具有相交字段的字段。我的意思是

```
Name    Friend
----    -----
Joe     Sally
Joe     Bill
Mary    Sally
Mary    Michael
Mike    Joe
Bill    Bill
Bill    Sally
Gil     Sally
Gil     Bill
Gil     David 
```

比如说，我们想要匹配 Joe 的第二列的人员列表，他们必须同时匹配 Sally 和 Bill。所以只有比尔符合这个标准，因为玛丽有一个，但她没有比尔。吉尔有莎莉和比尔，但他也有大卫。所以只有比尔应该被退回。我在想一些东西`INTERSECT`会起作用，因为它会返回公共字段，但我认为这并不能说明某人拥有更多。不知道如何编写 SQL 查询来做我想做的事。

明确指出，与乔有相同朋友的名字列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:45:12.980

### 没有重复

```
SELECT p2.name
FROM   people AS p1
JOIN   people AS p2 ON p2.number = p1.number
                   AND p2.name <> p1.name    -- exclude self-join
WHERE  p1.name = 'Joe'
AND NOT EXISTS (
   SELECT 1 
   FROM   people p3
   WHERE  p3.name = p2.name  
   AND    p3.number <> p1.number
   )
GROUP  BY p2.name
HAVING count(*) = (SELECT count(*) FROM people WHERE name = 'Joe') 
```

`AND NOT EXISTS ...`仅当您要排除拥有乔没有的*其他*朋友的人时，才需要最后一个条件。它在您的示例中从结果中
排除。`Gil`

**这是关系除法**的一个特例（带有自引用表）。您可以在此相关答案中找到一整套查询技术：
[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation/7774879#7774879)

### 有重复

如果可能有重复项（例如在您的问题初稿中），事情会变得有点复杂：

```
WITH p AS (
   SELECT name, number, count(*) AS ct
   FROM   people
   GROUP  BY name, number
   )
SELECT p2.name
FROM   p AS p1
JOIN   p AS p2 ON p2.number = p1.number
              AND p2.ct = p1.ct
              AND p2.name <> p1.name    -- exclude self-join
WHERE  p1.name = 'Joe'
AND NOT EXISTS (
   SELECT 1 
   FROM   p p3
   WHERE  p3.name = p2.name  
   AND    p3.number <> p1.number
   )
GROUP  BY p2.name
HAVING count(*) = (SELECT count(*) FROM p WHERE name = 'Joe') 
```

# telerik - 使用数据属性初始化时，在 Kendo TreeView 中无法识别父数据文本字段

> ID：15306534
> 
> 赞同：2
> 
> 时间：2013-03-09T02:39:16.250
> 
> 标签：telerik, treeview, kendo-ui

我正在尝试按照[官方文档](http://docs.kendoui.com/getting-started/data-attribute-initialization)使用 Kendo TreeView 和属性数据初始化。据我了解，接下来的两部分代码应该是等价的：

1.-数据属性初始化样式：

```
 <div id="treeview-right" 
             data-role="treeview" 
             data-source="inline"
             data-text-field="['categoryName', 'subCategoryName']">
  </div> 
```

2.- jQuery 风格：

```
<script>
            $("#treeview-right").kendoTreeView({
            dataSource: inline,
            dataTextField: ["categoryName", "subCategoryName"]
            });
</script> 
```

数字 2 的方式按预期工作，但数字 1 呈现树但没有父节点的文本（显示“未定义”文本，就像它无法从数据文本字段值中识别“类别名称”参数一样。顺便说一句,当我将data-text-field设置为它时,`data-text-field="['categoryName']`它显示父节点文本,而不是子节点的文本,正如预期的那样.我使用[的是官方教程中的示例](http://demos.kendoui.com/web/treeview/local-data.html)(JQuery样式初始化),如果有人想看到整个代码。我的假设是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:04:19.003

事实证明这是一个错误。它将在下一个版本中修复。这是官方剑道论坛遮阳篷[的链接。](http://www.kendoui.com/forums/ui/treeview/parent-data-text-field-not-recognized-in-kendo-treeview-when-using-data-attribute-initialization.aspx)

# jquery - 无法使用 Jquery 为轮播动态添加 Li

> ID：15306541
> 
> 赞同：1
> 
> 时间：2013-03-09T02:39:51.010
> 
> 标签：jquery, html

我正在使用 Elastislide 轮播插件，并从具有图像路径的表中动态添加图像。现在我正在使用 jQuery 将列表项附加到 Elastislide 的无序列表中。

问题是，在 Elastislide 的 CSS 中，显示设置为无（我在 CSS 文件中检查了它），并且当它们被渲染时，它们会正确显示。

当我动态添加列表项时，它们不会显示。我猜他们的 CSS 仍然没有显示。

这是我用来附加到列表项的代码。

```
$(document).ready(function () {
     $('#aspnetGridView tr').each(function () {
         if (!this.rowIndex) return; // skip first row
         var path = this.cells[0].innerHTML;
         alert(path);
         $('#rack1 #carousel').append('<li><a href="#"><img src="'+ path +'" alt="image03" /></a></li>');
    });
}); 
```

这里是添加静态列表项的地方。

```
<div id="rack1"><ul id="carousel"  class="elastislide-list">
<li><a href="#"><img src="images/bookCover/java2.jpg" alt="image05" /></a></li></ul></div> 
```

这就是页面渲染后轮播中静态项目的显示方式。我用萤火虫检查了这个。

```
<li style="width: 33.2418%; max-width: 65px; max-height: 76px;"><a href="#"><img src="images/bookCover/aspnetDesign.jpg"></a> 
```

请帮助我，告诉我我做错了什么。是使用JavaScript的定位吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:51:29.780

如果您使用的轮播与我在其他几个插件中看到的一样，则问题实际上是缓存问题。当页面加载时，插件会创建一个包含所有需要循环访问的项目的内存数组，然后使用这些来确定要显示的内容。因此，当您向标记添加新项目时，它们不会包含在插件所知道的“幻灯片”数组中，因为它们在初始化时不是 DOM 的一部分。

在检查您正在使用的插件的文档后，我将对其进行修改，但希望这可以让您同时解决一些问题。

**编辑：**

看起来你只是错过了一个（诚然重要的）步骤。您需要`.add()`在附加项目后调用。所以，添加这个：

```
$('#rack1 #carousel').add(); 
```

你应该准备好（参考：[http](http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/) ://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/ ）。

# jquery - 使用“::”时 jQuery 选择器中的“无法识别的表达式”

> ID：15306542
> 
> 赞同：-3
> 
> 时间：2013-03-09T02:39:54.103
> 
> 标签：jquery, jquery-selectors

出于某种原因，我无法让这个功能工作..我已经包含了来自 Chrome 的代码和错误。

这是`::`造成问题的原因吗？它快把我逼疯了。变量 101 在这里嘿嘿。

**编辑：**我试图调用一个伪元素，它不能通过 .css() 设置样式。

```
var grabColor = $('.sb-custom-color').val();
var placeholder = 'form .entry-form-wrap input::-webkit-input-placeholder';

$(placeholder).css("color", grabColor); 
```

`Uncaught Error: Syntax error, unrecognized expression: form .entry-form-wrap input::-webkit-input-placeholder`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:46:08.813

就此而言，您不能使用 jQuery 或 JavaScript 选择伪元素。而是创建样式标记或修改样式元素。

# android-layout - Android：尝试在两个图像之间切换并将它们显示为相同的大小

> ID：15306545
> 
> 赞同：3
> 
> 时间：2013-03-09T02:40:08.120
> 
> 标签：android-layout

所以，基本上，我只想显示一个图像，当单击该图像时，我想用另一个图像替换它（并在两个图像之间来回点击）。这很好用，但我想将它们显示为完全相同的尺寸，但无论我尝试什么，它们在屏幕上都不会显示为相同的尺寸。

这是我的java文件：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ImageView baneling = (ImageView) findViewById(R.id.bane);
    baneling.setTag("alive");
    baneling.setClickable(true);
    baneling.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if(baneling.getTag().equals("alive"))
            {
                baneling.setImageResource(R.drawable.banelingexplosion);
                baneling.setTag("dead");
                resizeImage(baneling);
            }
            else
            {
                baneling.setImageResource(R.drawable.baneling);
                baneling.setTag("alive");
            }
        }
    });
}

public void resizeImage(ImageView v)
{
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT);
    v.setLayoutParams(layoutParams);
} 
```

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dip" >
    <ImageView
            android:id="@+id/bane"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/baneling" />
</LinearLayout> 
```

我已经尝试了很多东西并成功地调整了图像的大小，但永远无法使它们具有相同的大小，即使我在 xml 和 .java 中明确地为它们分配了数字像素值也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:44:10.810

在 ImageView 中设置`android:scaleType="fitXY"`属性将确保您的图像填充 ImageView 的整个边界。这应该有助于明确设置图像的宽度和高度。

顺便说一句，不错的星际争霸主题。

# java - Java Reader 前后数据

> ID：15306548
> 
> 赞同：0
> 
> 时间：2013-03-09T02:40:35.733
> 
> 标签：java, decorator, bufferedreader, streamreader

是否有一个 Reader 类（JDK 或库）我可以用来装饰另一个 Reader 以使新阅读器返回`"PREFIX" + everythong of innerReader + "POSTFIX"`？

在将 Reader 返回给调用者之前，我想用页眉和页脚装饰文件内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:51:33.927

不在标准库中，但是看看[http://ostermiller.org/utils/Concat.html](http://ostermiller.org/utils/Concat.html) 看起来很有希望，但我自己没有使用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:58:29.180

我代表 GreyBeardedGeek 的帖子构建了这个，也许有人可以使用它：

```
/**
 * Utility <code>Reader</code> implementation which joins one or more other <code>Reader</code> to appear as one.
 */
public class CompositeReader extends Reader {

/** Logger. */
private final static Logger log = LoggerFactory.getLogger(CompositeReader.class);

/** List of readers (in order). */
private final Reader[] readers;
/** Current index. */
private int index;

/**
 * @param readers ordered list of <code>Reader</code> to read from.
 */
public CompositeReader(final Reader... readers) {
    checkArgument(readers.length > 0, "Argument readers must not be empty.");

    this.readers = readers;
    index = 0;
}

@Override
public int read(final char[] cbuf, final int off, final int len) throws IOException {
    int read = 0;
    while (read < len && index != readers.length) {
        final Reader reader = readers[index];
        final int readFromReader = reader.read(cbuf, off + read, len - read);

        if (readFromReader == -1) {
            ++index;
        } else {
            read += readFromReader;
        }
    }

    if (read == 0) {
        return -1;
    }

    return read;
}

@Override
public void close() throws IOException {
    IOException firstException = null;

    for (final Reader reader : readers) {
        try {
            reader.close();
        } catch (final IOException ex) {
            if (firstException != null) {
                log.warn("Multiple readers could not be closed, only first exception will be thrown.");
                firstException = ex;
            }
        }
    }

    if (firstException != null) {
        throw firstException;
    }
}
} 
```

干得好 ：-）

# jquery - jplayer没有在IE中显示播放列表

> ID：15306552
> 
> 赞同：0
> 
> 时间：2013-03-09T02:41:45.073
> 
> 标签：jquery, jplayer

谁能告诉我为什么我这里的 jQuery 播放器在 FF 和 Chrome 中运行良好，但在 IE 中不显示播放列表？

[http://374designs.com/adaville/media-player.html](http://374designs.com/adaville/media-player.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:38:23.730

与其直接在您的网站上使用 jQuery Player，不如使用以下网址中提到的基于 jQuery 播放器的媒体播放器...

[http://www.codebasehero.com/2011/07/html5-music-player-updated/](http://www.codebasehero.com/2011/07/html5-music-player-updated/)

# ios - 如何实现 iOS 谷歌地图 SDK

> ID：15306553
> 
> 赞同：5
> 
> 时间：2013-03-09T02:41:49.180
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我只是有一个问题，似乎无法在任何地方找到它。

我是 iOS 开发的新手，并尝试在我的应用程序中使用 Google 地图。

我浏览了他们在[这里](https://developers.google.com/maps/documentation/ios/map#add_a_map)给你的例子。

```
 #import "DemoViewController.h"
#import <GoogleMaps/GoogleMaps.h>

@implementation DemoViewController {
  GMSMapView *mapView_;
}

- (void)loadView {
  GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:1.285
                                                          longitude:103.848
                                                               zoom:12];
  mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
  self.view = mapView_;
}

@end 
```

但是正如您所看到的，它们设置`self.view = mapView_;`并且 UIView 类没有视图功能。

我希望地图位于另一个 ViewController 中的 UIView 中

我还没有失去你吗？无论哪种方式，这里都是一张照片。 ![在此处输入图像描述](../Images/8622c518391b5a82df1032b21ab339a6.png)

因此，在视图（或空白）内部，我希望加载地图。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T02:55:41.857

所以你有一个 GMSMapView。并且您可以在界面中将一个视图作为另一个视图的子视图`addSubview:`。`loadView`不过，如果我是你，我不会这样做。`viewDidLoad`是最早的好机会。

我认为你真正的问题是你领先于自己。在不知道视图如何工作、视图控制器如何工作等的情况下尝试执行此操作。我建议您在四足投入之前深呼吸并了解 iOS 编程。否则你甚至不知道你的代码（或谷歌的代码）是什么意思。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T19:04:53.690

[我在这里](https://github.com/kaskaderc/ios_samples/tree/master/MapWithZoomInOutButtons)做了完全相同的事情。

只需`GMSMapView`通过界面生成器添加类型视图，然后在控制器中设置属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T01:56:24.247

如果有人需要做类似的事情，我找到了一个适合我的解决方案。

我只是使用了一个容器视图，然后创建了一个单独`UIViewController`的类（其中有[google maps sdk 代码](https://developers.google.com/maps/documentation/ios/start)添加了一个地图部分），然后通过使用**`[self.view addSubview:googleMapsView];`**googleMapsView 作为我连接到主 ViewController 的容器视图将它连接到我的主 ViewController。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-23T11:12:57.137

```
Please try below code.
@property (strong, nonatomic) IBOutlet GMSMapView *mapView;
-(void)addAllPinsOnMapView
{
arrMapPin=[[NSMutableArray alloc] init];
for(int i = 0; i < arrOfferList.count; i++)
{
    GMSCameraPosition *cameraPosition=[GMSCameraPosition cameraWithLatitude:[[[arrOfferList objectAtIndex:i] objectForKey:@"latitude"] floatValue] longitude:[[[arrOfferList objectAtIndex:i] objectForKey:@"longitude"] floatValue] zoom:12];
    //    mapView = [GMSMapView mapWithFrame:CGRectZero camera:cameraPosition];
    _mapView.camera = cameraPosition;
    _mapView.myLocationEnabled=YES;

    GMSMarker *marker=[[GMSMarker alloc]init];
    marker.position=CLLocationCoordinate2DMake([[[arrOfferList objectAtIndex:i] objectForKey:@"latitude"] floatValue], [[[arrOfferList objectAtIndex:i] objectForKey:@"longitude"] floatValue]);
    marker.title = [[arrOfferList objectAtIndex:i] objectForKey:@"business"];
    marker.map=_mapView;
    _mapView.delegate = self;
}
}
- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:
(GMSMarker *)marker {
NSPredicate *result;
result=[NSPredicate predicateWithFormat:@"business CONTAINS[c] %@",marker.title];
NSArray * array = [arrOfferList filteredArrayUsingPredicate:result];
OfferDetailsViewController *objOfferDetailsViewController = [[OfferDetailsViewController alloc]init];
objOfferDetailsViewController.dictOfferDetails=[array objectAtIndex:0];
[self.navigationController pushViewController:objOfferDetailsViewController animated:YES];
}
- (IBAction)btnLocateMe:(UIButton *)sender
{
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:[[[AppDelegate initAppDelegate].DictLocation objectForKey:@"Latitude"] floatValue] longitude:[[[AppDelegate initAppDelegate].DictLocation objectForKey:@"Longitude"] floatValue] zoom:14];
[_mapView animateToCameraPosition:camera];
} 
```

# ios - 在不使用 XCode 的情况下对 iOS 应用程序进行代码设计（启用 APNS）

> ID：15306555
> 
> 赞同：5
> 
> 时间：2013-03-09T02:42:01.767
> 
> 标签：ios, objective-c, xcode, macos, code-signing

我想构建一个单窗口 Mac 应用程序，它可用于在不使用 XCode 的情况下对 iOS 应用程序进行代码设计。

我们的许多客户使用“企业许可证”来分发他们的应用程序。每年他们都需要辞职，这是一项重复性的工作。他们的要求如下

1.  应用程序使用 APNS
2.  他们不想共享他们的企业许可证
3.  使用证书签名时，捆绑标识符应该是可替换的
4.  他们在钥匙串中有同名的证书

用户界面具有以下字段

1.  *.ipa 文件的路径
2.  *.mobileprovision 文件的路径
3.  钥匙串名称（如果存在多个同名证书，则可选）
4.  证书名称（iPhone 开发者：.....）

我**能够对**应用程序进行代码设计，但**APNS 在辞职后无法正常工作**。还是不能使用 bundleIdentifier 辞职应用程序？

而且我还想在 Keychain 中添加可用证书下拉列表的功能，以提高可用性。任何指针都会有很大帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:38:26.240

要启用推送通知，应用 ID 和配置文件需要经过 Apple 配置和允许（通过门户）。您不能仅通过辞职就为任意配置文件/应用启用它。

在协同设计期间，权利需要将`apns-environment`密钥设置为`sandbox`/ `production`，具体取决于应用程序使用的内容。这将在运行时由 iOS 进行验证。如果您使用的是第三方签名工具，它*应该*`apns-environment`从配置文件中获取值。

对于调试，您可以使用以下命令查看 .app 的权利：

```
codesign -d --requirements - --entitlements - path/to/My.app 
```

您应该会看到一个`apns-environment`值，但前提是配置文件启用了该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T18:54:15.790

刚刚花了几个小时研究同样的问题并发现了以下过程。将 Mike 的评论更进一步，为遇到相同问题的其他人提供以下命令行。

我开始使用已为生产推送通知配置的捆绑 ID 的 xcode 发布版本。

从终端窗口运行以下命令 - 用您的信息替换“CAPITAL SECTIONS”

```
codesign -d --entitlements -"NAME OF APP.app" > entitlements.plist

codesign -f -s "SIGNING CERTIFICATE NAME" --resource-rules "NAME OF APP.app/ResourceRules.plist" --entitlements entitlements.plist "NAME OF APP.app" 
```

希望这可以帮助下一个遇到同样问题的人

# ios - 从重大位置更改通知中醒来时，我有多少时间在后台？

> ID：15306556
> 
> 赞同：3
> 
> 时间：2013-03-09T02:42:09.547
> 
> 标签：ios, core-location

测试监控区域的应用程序然后唤醒以进行一些处理。我似乎找不到任何文档说明在看门狗计时器启动并终止应用程序之前我必须在后台工作多长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:32:01.590

我看到了一份文件（甚至我相信是官方的），其中显示了与背景相关的大部分时间。但是，我现在找不到它（我会尝试找到它并在此处发布）。

根据我的经验，我相信应用程序会在位置发生重大变化时被唤醒 10 秒。此外，有趣的是，如果您尝试调用 backgroundTimeRemaining，它将在这 10 秒内返回 +INFINITY（一般来说，此 API 仅针对 beginBackgroundTaskWithExpirationHandler 设计：）

**更新 1**

对不起。我找不到那个文件。我感觉它已被 Apple 删除/更新，因为之前（大约 6 个月前）我在搜索 iOS 后台信息时经常点击它。

我发现了一些有趣的事情。一个在[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。它与 VOIP 回调有关。

它说：“您的处理程序最多有 10 秒的时间来执行任何需要的任务并退出。如果在时间到期之前它没有退出，则应用程序被挂起。”

[此外，这里](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)提到了蓝牙的相同 10 秒：

“在被唤醒后，应用程序有大约 10 秒的时间来处理数据。”

我相信位置管理器唤醒、VOIP 和蓝牙唤醒的基本机制是完全相同的，它们都授予 10 秒的执行时间/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T10:04:12.490

您最多可以注册 10 分钟的后台任务。但是，如果您想知道被调用的方法可以执行多长时间，请尝试使用无限循环来测量它！

# java - Android 倒数计时器不会停止

> ID：15306557
> 
> 赞同：2
> 
> 时间：2013-03-09T02:42:20.993
> 
> 标签：java, android

好的，这是我的问题。我正在开发一个问答游戏，它使用一个问题计数器来显示 10 个问题，一旦发生这种情况，它就会调用 finalscore 类。我已经实现了一个计时器，它为每个问题重置，如果时间用完，它会进入下一个问题。但是，如果在最后一个问题上没有点击任何内容，即使在开始新游戏后，它也会继续循环回到 finalscore 类。

```
public class game extends Activity implements OnClickListener {

// int[] anArray;
int[] anArray2 = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; 
int numberOfQuestionsDisplayedCounter = 0; 

int nextOrFinishValue = 0; 

int randomValueZeroToThree = 0; 
int randomValue0to29 = 0; 
boolean alreadyDisplayQuestion = false; 
boolean validQuestionNumber = false;
boolean rightButton1 = false; 
boolean rightButton2 = false; 
boolean rightButton3 = false; 
boolean rightButton4 = false;
String questionFromDatabase; 
String answer1FromDatabase; 
String answer2FromDatabase; 
String answer3FromDatabase; 
String answer4FromDatabase; 
String displayedQuestionFromDatabase = "question "; 
String displayedAnswer1FromDatabase = "answer1a ";
String displayedAnswer2FromDatabase = "answer2a "; 
String displayedAnswer3FromDatabase = "answer3a "; 
String displayedAnswer4FromDatabase = "answer4a "; 

int categoryId = 0; 
int questionId = 0; 
int currentScore = 0;
private CountDownTimer mCountDown;

public void onCreate(Bundle savedInstanceState) {
    int randomInt = 1;

    super.onCreate(savedInstanceState);
    categoryId = com.triviagame.Trivia_Game.categoryIdInMainMenu;
    // System.out.println("categoryID =" + categoryId);

    setContentView(R.layout.displayquestion);

    // gathers question and answers from database
    gatherInfoBeforePopulating(); // includes generating random number
                                    // between getting info from database 1
                                    // to 30

    // displays question, answers, score
    populateWithQuestionInfo(displayedQuestionFromDatabase,
            displayedAnswer1FromDatabase, displayedAnswer2FromDatabase,
            displayedAnswer3FromDatabase, displayedAnswer4FromDatabase,
            nextOrFinishValue);

    // Sets buttons and listers for the buttons with the 4 possible answers
    View answer1button = findViewById(R.id.answer1button);
    answer1button.setOnClickListener(this);
    View answer2button = findViewById(R.id.answer2button);
    answer2button.setOnClickListener(this);
    View answer3button = findViewById(R.id.answer3button);
    answer3button.setOnClickListener(this);
    View answer4button = findViewById(R.id.answer4button);
    answer4button.setOnClickListener(this);

    final TextView myCounter = (TextView) findViewById(R.id.tv);

    mCountDown = new CountDownTimer(21000, 1000) {

        @Override
        public void onFinish() {

            questionCheck();

            resetTimer();

        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }
    }.start();

}

// Displays question, answers, score
public void populateWithQuestionInfo(String question, String answer1,
        String answer2, String answer3, String answer4,
        int nextQuestionOrFinish) {
    // populate the question label
    TextView questionLabel = (TextView) findViewById(R.id.question);
    questionLabel.setText(question);

    // populate answer1
    Button buttonAnswer1 = (Button) findViewById(R.id.answer1button);
    buttonAnswer1.setText(answer1);

    // populate answer2
    Button buttonAnswer2 = (Button) findViewById(R.id.answer2button);
    buttonAnswer2.setText(answer2);

    // populate answer3
    Button buttonAnswer3 = (Button) findViewById(R.id.answer3button);
    buttonAnswer3.setText(answer3);

    // populate answer4
    Button buttonAnswer4 = (Button) findViewById(R.id.answer4button);
    buttonAnswer4.setText(answer4);

    numberOfQuestionsDisplayedCounter++;

}

// Generates a random number between 0 and 3 to be used to display the
// possible answers randomly
int RandomGeneratorZeroToThree() {
    int randomInt = 0;
    Random randomGenerator = new Random();
    for (int idx = 1; idx <= 10; ++idx) {
        randomInt = randomGenerator.nextInt(4);

    }
    return randomInt;
}

// Generates a random number between 0 and 29 to be used to select the
// question to be displayed
int RandomGenerator0To29() {
    int randomInt2 = 0;
    Random randomGenerator2 = new Random();
    for (int idx2 = 1; idx2 <= 10; ++idx2) {
        randomInt2 = randomGenerator2.nextInt(30);
    }
    return randomInt2;
}

// returns true if the question has already been displayed
// returns false if the question has not been already displayed
boolean questionsAlreadyDisplayed(int randomValue0to29) {
    for (int i = 0; i < 10; i++) {
        if (anArray2[i] == randomValue0to29) {
            return true; // question already displayed
        }

    }
    anArray2[numberOfQuestionsDisplayedCounter] = randomValue0to29; // questionId
                                                                    // added
                                                                    // to
                                                                    // array
                                                                    // of
                                                                    // displayed
                                                                    // questions
    return false; // random number can be used as it has been used already
}

// Connects to the database to gather the question and 4 possible answers.
// Uses DataBaseHelper class
void getInfoFromDatabase(int categoryId, int questionId) {

    DataBaseHelper myDbHelper = new DataBaseHelper(
            this.getApplicationContext());
    myDbHelper = new DataBaseHelper(this);

    try {

        myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();
        questionFromDatabase = myDbHelper.getQuestion(categoryId,
                questionId);

        displayedQuestionFromDatabase = questionFromDatabase;
        System.out
                .println("questionFromDatabase = " + questionFromDatabase);
        answer1FromDatabase = myDbHelper.getCorrectAnswer(categoryId,
                questionId); // correct answer from database
        System.out.println("correct answer from db = "
                + answer1FromDatabase);
        answer2FromDatabase = myDbHelper.getWrongAnswer1(categoryId,
                questionId);
        answer3FromDatabase = myDbHelper.getWrongAnswer2(categoryId,
                questionId);
        answer4FromDatabase = myDbHelper.getWrongAnswer3(categoryId,
                questionId);

        myDbHelper.close();

    } catch (SQLException sqle) {
        System.out.println("Errored out");
        try {
            throw sqle;
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

}

// If the player selects the right answer this method is called to increase
// the score by 10 points
void increaseScore() {
    currentScore = currentScore + 10;
    com.triviagame.Trivia_Game.finalScore = currentScore;
}

// If the player selects the wrong answer this method is called to decrease
// the score by 10 points
void decreaseScore() {
    currentScore = currentScore - 10;
    // score can't go below 0
    if (currentScore < 0) {
        currentScore = 0;
    }
    com.triviagame.Trivia_Game.finalScore = currentScore;
}

// Displays the current scores on the activity
void displayScore() {
    TextView yourScore = (TextView) findViewById(R.id.yourscore);
    String currentScoreText;
    currentScoreText = Integer.toString(currentScore);
    yourScore.setText(currentScoreText);

}

void resetTimer() {

    if (mCountDown != null) {
        mCountDown.cancel();
    }

    final TextView myCounter = (TextView) findViewById(R.id.tv);
    mCountDown = new CountDownTimer(21000, 1000) {

        @Override
        public void onFinish() {

            questionCheck();
            resetTimer();

        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }
    }.start();

}

void cancelTimer() {
    if (mCountDown != null) {
        mCountDown.cancel();
    }

}

void questionCheck() {
    if (nextOrFinishValue == 1) {

        Intent e = new Intent(this, finalscore.class); 
        startActivity(e);
        cancelTimer();

    }
    if (nextOrFinishValue == 0) { // If 10 questions have not been displayed
                                    // yet, display the next question
        gatherInfoBeforePopulating();
        displayScore();
        populateWithQuestionInfo(displayedQuestionFromDatabase,
                displayedAnswer1FromDatabase, displayedAnswer2FromDatabase,
                displayedAnswer3FromDatabase, displayedAnswer4FromDatabase,
                nextOrFinishValue);
    }
}

// gathers question and answers from database
void gatherInfoBeforePopulating() {

    categoryId = Trivia_Game.getCategoryIdInMainMenu();

    // Loop until a valid questionId that hasn't been used is obtained
    while (validQuestionNumber == false) {
        randomValue0to29 = RandomGenerator0To29();
        System.out.println("random30 in onClick = " + randomValue0to29);

        alreadyDisplayQuestion = questionsAlreadyDisplayed(randomValue0to29);
        if (alreadyDisplayQuestion == true) {
            System.out
                    .println("question number already displayed looking for a non displayed question");
        }
        if (alreadyDisplayQuestion == false) {
            System.out.println("question not displayed yet");
            validQuestionNumber = true;
        }
    }

    validQuestionNumber = false;
    alreadyDisplayQuestion = false;
    questionId = randomValue0to29; // sets the valid random generated number
                                    // to the questionID

    // connect to database to gather the question and answers
    getInfoFromDatabase(categoryId, questionId);

    // Calls random number from 0 to 3 to determine which button will
    // display the correct answer
    randomValueZeroToThree = RandomGeneratorZeroToThree();
    System.out.println("random4 in onClick = " + randomValueZeroToThree);

    // Sets the order according to the button that is to display the correct
    // answer
    switch (randomValueZeroToThree) {
    case 0:
        displayedAnswer1FromDatabase = answer1FromDatabase; // correct
                                                            // answer
        displayedAnswer2FromDatabase = answer2FromDatabase;
        displayedAnswer3FromDatabase = answer3FromDatabase;
        displayedAnswer4FromDatabase = answer4FromDatabase;
        rightButton1 = true;
        rightButton2 = false;
        rightButton3 = false;
        rightButton4 = false;
        break;

    case 1:
        displayedAnswer2FromDatabase = answer1FromDatabase; // correct
                                                            // answer
        displayedAnswer1FromDatabase = answer2FromDatabase;
        displayedAnswer3FromDatabase = answer3FromDatabase;
        displayedAnswer4FromDatabase = answer4FromDatabase;
        rightButton1 = false;
        rightButton2 = true;
        rightButton3 = false;
        rightButton4 = false;
        break;

    case 2:
        displayedAnswer3FromDatabase = answer1FromDatabase; // correct
                                                            // answer
        displayedAnswer1FromDatabase = answer2FromDatabase;
        displayedAnswer2FromDatabase = answer3FromDatabase;
        displayedAnswer4FromDatabase = answer4FromDatabase;
        rightButton1 = false;
        rightButton2 = false;
        rightButton3 = true;
        rightButton4 = false;
        break;

    case 3:
        displayedAnswer4FromDatabase = answer1FromDatabase; // correct
                                                            // answer
        displayedAnswer1FromDatabase = answer2FromDatabase;
        displayedAnswer3FromDatabase = answer3FromDatabase;
        displayedAnswer2FromDatabase = answer4FromDatabase;
        rightButton1 = false;
        rightButton2 = false;
        rightButton3 = false;
        rightButton4 = true;
        break;

    default:
        displayedAnswer1FromDatabase = answer4FromDatabase; // no correct
                                                            // answer
        displayedAnswer2FromDatabase = answer2FromDatabase;
        displayedAnswer3FromDatabase = answer3FromDatabase;
        displayedAnswer4FromDatabase = answer1FromDatabase;
        rightButton1 = false;
        rightButton2 = false;
        rightButton3 = false;
        rightButton4 = false;

    }

    // After the 9th question is displayed, the nextOfFinishValue should be
    // set to 1 so the button displayes Finish instead of Next
    if (numberOfQuestionsDisplayedCounter < 9) {
        nextOrFinishValue = 0;

    } else {
        nextOrFinishValue = 1;
    }

}

// Listeners for the 4 buttons with answers and the Next or Finish buttons
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.answer1button:
        if (rightButton1 == true) {
            increaseScore();
            resetTimer();

            // put here to change color of button

        } else {
            decreaseScore();
            resetTimer();
            // change button to red

        }
        questionCheck();

        break;

    case R.id.answer2button:
        if (rightButton2 == true) {
            increaseScore();
            resetTimer();
        } else {
            decreaseScore();
            resetTimer();
        }
        questionCheck();

        break;

    case R.id.answer3button:
        if (rightButton3 == true) {
            increaseScore();
            resetTimer();
        } else {
            decreaseScore();
            resetTimer();
        }
        questionCheck();
        break;

    case R.id.answer4button:
        if (rightButton4 == true) {
            increaseScore();
            resetTimer();
        } else {
            decreaseScore();
            resetTimer();
        }
        questionCheck();
        break;

    }

}

@Override
protected void onResume() {
    super.onResume();
    music.play(this, R.raw.musicbackground); // play background music
}

@Override
protected void onPause() {
    super.onPause();
    music.stop(this); // stop playing background music

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T02:56:33.010

mCountdown 永远不会为空，因此请更改您的代码

```
void cancelTimer() {
if (mCountDown != null) {
    mCountDown.cancel();
} 
```

}

至

```
void cancelTimer() {
mCountDown.cancel();
} 
```

# html - 在托管站点中拖放期间图像不显示

> ID：15306559
> 
> 赞同：0
> 
> 时间：2013-03-09T02:43:29.437
> 
> 标签：html, web, firebug

我有一个拖放功能，在本地主机期间显示图像似乎很好，但是当我在托管站点中尝试它时，就会出现问题。它似乎`image corrupt or truncated`也在萤火虫中发出这个错误，但是当我下载它并在本地主机中再次尝试时，它似乎很好。知道问题可能是什么吗？

```
<?php
session_start();
?>

<?php
require "menu.php";
?>
<!DOCTYPE HTML>
<html>
<title>imageload</title>
<head>
<style type="text/css">
#div1 {width:255px;height:285px;border:1px solid #aaaaaa;z-index:1;}
</style>
<script>

function dress()
{
document.getElementById("shirt1").style.visibility = "visible";
document.getElementById("shirt2").style.visibility = "visible";
document.getElementById("shirt3").style.visibility = "visible";
}

function braces()
{

document.getElementById("brace1").style.visibility = "visible";
document.getElementById("brace2").style.visibility = "visible";
document.getElementById("brace3").style.visibility = "visible";
}

function shoes()
{
document.getElementById("shoe1").style.visibility = "visible";
document.getElementById("shoe2").style.visibility = "visible";
document.getElementById("shoe3").style.visibility = "visible";
}

var x = "waa";
var y = "waa";
var z = "waa";
var shoe = "waa";
var shirt = "waa";
var brace = "waa";

function AddCart()
{

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("DivAddDrag").innerHTML=xmlhttp.responseText;
    }
  }
var formData = new FormData();
var q1 = document.getElementById("quantity1").value;
var q2 = document.getElementById("quantity2").value;
var q3 = document.getElementById("quantity3").value;

formData.append("shoe", shoe);
formData.append("shirt", shirt);

formData.append("brace", brace);
formData.append("q1", q1);
formData.append("q2", q2);

formData.append("q3", q3);
xmlhttp.open("POST","adddrag.php");
xmlhttp.send(formData);
}

function allowDrop(ev)
{

if(x=="shirt1" || x == "shirt2" || x =="shirt3")
{
document.getElementById(x).style.visibility = "hidden";
}

if(x=="shirt1" && y=="waa" && z=="waa")
{
    // is this what you are referring to? 
document.getElementById('image').src = "dragged/d1.jpg";
}

if(x=="shirt2" && y=="waa" && z=="waa")
{
document.getElementById('image').src = "dragged/d2.jpg";
}

if(x=="shirt3" && y=="waa" && z=="waa")
{
document.getElementById('image').src = "dragged/d3.jpg";
}

if(y=="brace1" || y == "brace2" || y =="brace3")
{
document.getElementById(y).style.visibility = "hidden";

}

if(z=="shoe1" || z == "shoe2" || z =="shoe3")
{
document.getElementById(z).style.visibility = "hidden";
}

if(x=="shirt1")
{
shirt = "upload/d1.jpg";
}
if(x=="shirt2")
{
shirt = "upload/d2.jpg";
}
if(x=="shirt3")
{
shirt = "upload/d3.jpg";
}

if(y=="brace1")
{
brace = "upload/b1.jpg";
}
if(y=="brace2")
{
brace = "upload/b2.jpg";
}
if(y=="brace3")
{
brace = "upload/b3.jpg";
}

if(z=="shoe1")
{
shoe = "upload/s1.jpg";
}
if(z=="shoe2")
{
shoe = "upload/s2.jpg";
}
if(z=="shoe3")
{
shoe = "upload/s3.jpg";
}

ev.preventDefault();
}

function drag(ev)
{
if(ev.target.id == "shirt1" || ev.target.id == "shirt2" || ev.target.id == "shirt3")
{
x = ev.target.id;

}

if(ev.target.id == "brace1" || ev.target.id == "brace2" || ev.target.id == "brace3")
{
y = ev.target.id;
}

if(ev.target.id == "shoe1" || ev.target.id == "shoe2" || ev.target.id == "shoe3")
{
z = ev.target.id;
}

ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{

ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}

</script>
</head>
<body>
<?php
require "header.php";
?>

<div id = "wrapper" style="background-color:white; width:1013px; margin-left: auto;margin-right: auto;height:auto;z-index:1100;" >
<?php
if ($_SESSION['users_userName'] == "user")
{
?>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)" style="position:relative;top:120px;left:730px;border: 5px solid #032472;height:500px;">
<img id ="image" src = "draggable/d1.jpg" style = "height:500px;width:255px;position:relative;bottom:30px;"/></div>
<?php

echo '<div style = "position:relative;left:50px;bottom:400px;">';
$sql = "select * from draggable Limit 6,3";
$data = mysql_query($sql,$con);
$y = 1;

while($row = mysql_fetch_array($data))
{
$id="shirt".$y;
echo '<img src="'.$row['Drag'].'" id = "'.$id.'" name="shirt" width="85px" height="85px" draggable="true" ondragstart="drag(event)"  onClick="next()" style = "visibility:hidden;"/>';
$y=$y+1;
}

echo '<label> Quantity : </label>';
echo '<input type = "text" id = "quantity1" />';
echo '</br>';

$sql = "select * from draggable Limit 3";
$data = mysql_query($sql,$con);
$y = 1;
while($row = mysql_fetch_array($data))
{
$id="brace".$y;
echo '<img src="'.$row['Drag'].'" id = "'.$id.'" name="brace" width="85px" height="85px" draggable="true" ondragstart="drag(event)"  onClick="next()" style = "visibility:hidden;"/>';
$y=$y+1;
}

echo '<label> Quantity : </label>';
echo '<input type = "text" id = "quantity2" />';

echo'</br>';

$sql = "select * from draggable Limit 3,3";
$data = mysql_query($sql,$con);
$y = 1;
while($row = mysql_fetch_array($data))
{
$id="shoe".$y;
echo '<img src="'.$row['Drag'].'" id = "'.$id.'" name="shoe" width="85px" height="85px" draggable="true" ondragstart="drag(event)"  onClick="next()" style = "visibility:hidden;"/>';
$y=$y+1;
}
echo '<label> Quantity : </label>';
echo '<input type = "text" id = "quantity3" />';
echo'</br>';
echo '</div>';

?>

<button style = "position:relative;bottom:250px;left:30px;" onClick="AddCart()"> Add to Cart</button>
<div style ="position:relative;left:150px;bottom:750px;z-index:1300;">
<button id = "dressclick" onclick = "dress()"> Dress </button>
<button id = "shoeclick" onclick = "shoes()"> Shoes </button>
<button id = "braceclick" onclick = "braces()"> Bracelet </button>
</div>
<div id ="DivAddDrag" style ="position:relative;height:200px;width:500px;left:150px;bottom:400px;border:3px solid black"></div>
<?php
}

?>
<div class="push4">
</div>
</div>
    <div id="footer4" style="margin-left:auto;margin-right:auto;width:1013px;"><?php require "footer.php";?></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:53:40.257

听起来您的图像链接是针对您的本地环境进行硬编码的。您可能需要使您的路径相对于根目录，以便其链接独立于部署环境。您正在运行什么服务器操作系统？您的代码在哪里供我们查看？

# java - Java Makefile 错误

> ID：15306561
> 
> 赞同：4
> 
> 时间：2013-03-09T02:44:03.107
> 
> 标签：java, makefile, package

尝试使用我创建的 Makefile 编译我的 Java 项目时出现此错误。

错误：

**制作：****没有制定目标`src/edu/osu/lispinterpreter/output/*.class', needed by`课程的规则。停止。***

 *生成文件内容：

```
JFLAGS = -g
JC = javac
.SUFFIXES: .java .class
.java.class:
    $(JC) $(JFLAGS) $*.java

CLASSES = \
        src/edu/osu/lispinterpreter/tokenizer/*.java \
        src/edu/osu/lispinterpreter/core/*.java \
        src/edu/osu/lispinterpreter/output/*.java \
        src/edu/osu/lispinterpreter/exceptions/*.java \
        src/edu/osu/lispinterpreter/input/InputParser.java \
        src/edu/osu/lispinterpreter/input/ReadInputString.java 

default: classes

classes: $(CLASSES:.java=.class)

clean:
    $(RM) *.class 
```

有人可以帮我看看Makefile吗？

我正在使用 Eclipse 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:56:52.817

来自[http://www.gnu.org/software/make/manual/html_node/Wildcard-Pitfall.html#Wildcard-Pitfall](http://www.gnu.org/software/make/manual/html_node/Wildcard-Pitfall.html#Wildcard-Pitfall)

> 当通配符不匹配任何文件时，它会保持原样

似乎 src/edu/osu/lispinterpreter/output 是空的，所以 src/edu/osu/lispinterpreter/output/*.java 不匹配任何文件并保持原样，这不是预期的。使用[通配符功能](http://www.gnu.org/software/make/manual/html_node/Wildcard-Function.html#Wildcard-Function)，可以避免这种情况。

解决方案是更换

```
src/edu/osu/lispinterpreter/output/*.java 
```

经过

```
$(wildcard src/edu/osu/lispinterpreter/output/*.java) 
```

依此类推，我认为所有其他行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:57:39.803

我认为问题在于您`*`在`CLASSES`变量中的使用。您编写该变量的方式是使用其中包含字符的“文件名”列表填充`*`......这将在其余的处理过程中传播。

你要么需要单独列出这些类，要么做一些事情来告诉 Make “glob”这个列表。如果您使用的是 GNU Make，那么通配符功能应该可以解决问题。

但请注意，这不适用于其他版本的 Make，因此您遇到了 Makefile 可移植性问题。（这让我回到了我认为 Ant 更好的评论。）

* * *

一旦你克服了这个问题，你就会遇到一个问题，如果你一次编译一个 Java 类：

*   你的构建会很慢......'因为每个`javac`命令都会导致 JVM 启动（假设你使用的是 Hotspot 或 OpenJDK 工具链），
*   您必须以正确的顺序构建类...根据源代码中固有的依赖关系，
*   您必须将这些依赖项添加到 Makefile (!!!)，并且
*   如果你有依赖循环，你就有问题了！

如果有足够的耐心，您可以构建一个应对此问题的 Makefile，但这确实很棘手，并且生成的 Makefile 会很脆弱。现实的选择是：

*   只需在一个命令中构建所有*/* .java 文件`javac`，而不考虑依赖关系，
*   添加一个“makedepend”规则，该规则使用某些东西来分析源代码或字节码文件并在 Makefile 中*生成依赖关系。*

或者只是使用蚂蚁。

参考：

*   [为什么没有人使用 make for Java？](https://stackoverflow.com/questions/2209827/why-is-no-one-using-make-for-java)
*   Java / Make 依赖生成器 - [http://ptolemy.eecs.berkeley.edu/~cxh/java/javadepend/](http://ptolemy.eecs.berkeley.edu/~cxh/java/javadepend/)
*   另一个用于 Java 的 Makefile 生成器 - [http://www.tildeslash.com/mmake/mmake.html](http://www.tildeslash.com/mmake/mmake.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:04:42.617

您可以单独列出所有源文件，也可以使用`wildcard`Makefile 中的指令自动匹配文件。

此外，从您的评论看来，java 文件的包名称是`edu.osu.lispinterpreter.*`.

所以我建议将 移动`Makefile`到`src`目录并在 Makefile 中进行这些更改。

```
CLASSES := $(wildcard edu/osu/lispinterpreter/tokenizer/*.java)
CLASSES += $(wildcard edu/osu/lispinterpreter/core/*.java)
CLASSES += $(wildcard edu/osu/lispinterpreter/output/*.java)
CLASSES += $(wildcard edu/osu/lispinterpreter/exceptions/*.java)
CLASSES += edu/osu/lispinterpreter/input/InputParser.java
CLASSES += edu/osu/lispinterpreter/input/ReadInputString.java 
```

只要包名与目录结构相对应，java 编译器应该能够从其他包中获取类的定义，而无需在`Makefile`.*

# svn - 如何为私人项目设置 Assembla Subversion - 源代码控制新手

> ID：15306565
> 
> 赞同：3
> 
> 时间：2013-03-09T02:45:04.517
> 
> 标签：svn, visual-studio-2012, visualsvn, assembla

2009 年，当我使用 .NET 框架 2.0 时，我过去曾使用源代码管理来提交代码。我已经离开编程大约 3 年了。现在我正在尝试在 C# 中进行一些 Win 8 编程，并且需要为我的私人项目设置源代码控制。

我遇到了 Visual SVN for VS 2012，它在 VS 中集成了源代码控制。任何人都可以指导我找到一个文档，该文档为我提供了有关如何为我的私人项目设置 SVN 的分步说明？我虽然使用过 Assembla，因为它看起来是免费的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-27T13:43:22.750

1.  下载并安装 Tortoise SVN - [http://tortoisesvn.net/downloads.html](http://tortoisesvn.net/downloads.html)
2.  安装 Visual SVN
3.  注册一个新的 Assembla 帐户
4.  设置 Assembla 存储库（请注意，免费帐户只为您提供 500MB 的空间）

设置存储库后，记下您的存储库 URL（例如[https://subversion.assembla.com/svn/RooiWillie/](https://subversion.assembla.com/svn/RooiWillie/)）

接下来，您需要确定硬盘驱动器上放置源文件的空间（例如 C:\Subversion\RooiWillie）。创建目录（如果您还没有）并右键单击。突出显示 TortoiseSVN 并单击 Repo-Browser。

输入您的存储库的 URL。

系统将提示您输入凭据，只需使用您的 Assembla 凭据即可。

就是这样，您现在可以将文件（您的 VS2012 解决方案/s）添加到您的存储库并签出工作副本。

安装 VisualSVN 后，您会注意到 Visual Studio 中的 VisualSVN 菜单。它搭载在 Tortoise 上，因此对话将是相似的。你应该能够解决问题。

一个很好的资源将是乌龟文档：

[http://sourceforge.net/projects/tortoisesvn/files/latest/download](http://sourceforge.net/projects/tortoisesvn/files/latest/download)

*编辑 - 链接更新

# asp.net-mvc - 如何在 MVC4 中执行两次 DisplayForModel？

> ID：15306567
> 
> 赞同：0
> 
> 时间：2013-03-09T02:45:14.387
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是我的场景。我在`_QuestionBox`DisplayTemplates 内部有一个局部视图。这将呈现以下内容

![在此处输入图像描述](../Images/0366b651d0769b6ca69e25756d37ebdc.png) ![在此处输入图像描述](../Images/1a70a16216e644ea412c8cec67aa33d4.png)

我的意思是，我执行 DisplayForModel 两次，但只显示第一个，第二个（“问题内容）”不显示。我需要什么才能执行？

***编辑*** 让我澄清一下，我正在使用一个派生自基础类的类。

**因此，QuestionBox 视图用于基类，而内部显示用于具体类。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:52:08.960

如果您在部分中使用视图模型，则需要将模型传递给部分。

```
@Html.Partial("_partialView", model); 
```

# c# - Set of maximal independent subsets via a c# generator

> ID：15306574
> 
> 赞同：5
> 
> 时间：2013-03-09T02:46:43.713
> 
> 标签：c#, iterator, set

I want to find all subsets of a given set that are mutually exclusive and contain as many elements of the superset as possible. Where the user defines a meaning for exclusiveness:

```
bool exclusion<T>(T a, T b) 
```

where at least `exclusion(a, b) == exclusion(b, a)` holds.

And `exclusion(a, b) == true` is guaranteed if `a.Equals(b) == true`

My code looks like this:

```
public static HashSet<HashSet<T>> MutuallyExclusive<T>(this IEnumerable<T> available, Func<T, T, bool> exclusion) {
    HashSet<HashSet<T>> finished = new HashSet<HashSet<T>>(new HashSetEquality<T>());
    Recursion<T>(available, new HashSet<T>(), finished, exclusion);
    return finished;
}

private static void Recursion<T>(IEnumerable<T> available, HashSet<T> accepted, HashSet<HashSet<T>> finished, Func<T, T, bool> exclusion) {
    if (!available.Any())
        finished.Add(accepted);
    else
        foreach (T a in available)
            Recursion<T>(available.Where(b => !exclusion(a, b)), new HashSet<T>(accepted) { a }, finished, exclusion);
}

private class HashSetEquality<T> : IEqualityComparer<HashSet<T>> {
    public bool Equals(HashSet<T> x, HashSet<T> y) {
        if (x.Count != y.Count)
            return false;
        return x.All(t => y.Contains(t));
    }

    public int GetHashCode(HashSet<T> obj) {
        return obj.Aggregate(0, (i, t) => i ^ t.GetHashCode());
    }
} 
```

Is there a way to turn this code into an iterator moving through the accepted values one by one?

**Edit:**

It seems I was I little unprecise in my question, sorry. I was actually searching for a Generator for deffered execution. So that every time you call it only the next accepted set is calculated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:47:13.563

Basically, what you want to do is to yield a new set every time you call `finished.Add()` and it returns `true`.

But because of the recursion, you also need to yield all values returned from the recursive calls. You can do that by yielding all those values in a loop:

```
public static IEnumerable<HashSet<T>> MutuallyExclusive<T>(
    this IEnumerable<T> available, Func<T, T, bool> exclusion)
{
    var finished = new HashSet<HashSet<T>>(new HashSetEquality<T>());
    return Recursion<T>(available, new HashSet<T>(), finished, exclusion);
}

private static IEnumerable<HashSet<T>> Recursion<T>(
    IEnumerable<T> available, HashSet<T> accepted, HashSet<HashSet<T>> finished,
    Func<T, T, bool> exclusion)
{
    if (!available.Any())
    {
        if (finished.Add(accepted))
            yield return finished;
    }
    else
        foreach (T a in available)
        {
            var results = Recursion<T>(
                available.Where(b => !exclusion(a, b)),
                new HashSet<T>(accepted) { a }, finished, exclusion);

            foreach (var set in results)
                yield return set;
        }
} 
```

It's probably not the most efficient solution, but it gets the job done.

Also, you might want to consider going through every subset only once. That way, you wouldn't need the `finished` set and you could directly yield all results you find.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T04:58:27.530

Instead of `return finished;` you could use

```
foreach (HashSet<T> set in finished)
    yield return set; 
```

And since you are making a generator (I think that's what they're called?), you need to change the signature of `MutuallyExclusive`from `HashSet<HashSet<T>>` to `IEnumerable<HashSet<T>>`. So basically `MutuallyExclusive` would look like:

```
public static IEnumerable<HashSet<T>> MutuallyExclusive<T>(this IEnumerable<T> available, Func<T, T, bool> exclusion)
{
    HashSet<HashSet<T>> finished = new HashSet<HashSet<T>>(new HashSetEquality<T>());
    Recursion<T>(available, new HashSet<T>(), finished, exclusion);
    foreach (HashSet<T> set in finished)
        yield return set;
} 
```

# c++ - Direct3D：从纹理创建渲染目标视图

> ID：15306578
> 
> 赞同：1
> 
> 时间：2013-03-09T02:47:36.023
> 
> 标签：c++, direct3d, render-to-texture

我想从纹理创建一个渲染目标视图，用于多目标渲染。我目前能够为后台缓冲区创建一个渲染目标视图——所有这些都很好。此外，我能够创建纹理。但是，当我尝试从中构建视图时，出现错误。

首先，这是代码：

```
D3D11_TEXTURE2D_DESC textureDesc;
ZeroMemory(&textureDesc, sizeof(textureDesc));

textureDesc.ArraySize = 1;
textureDesc.BindFlags = D3D11_BIND_RENDER_TARGET | D3D11_BIND_SHADER_RESOURCE;
textureDesc.CPUAccessFlags = 0;
textureDesc.Format = DXGI_FORMAT_R32_FLOAT;
textureDesc.Height = m_renderTargetSize.Height;
textureDesc.Width = m_renderTargetSize.Width;
textureDesc.MipLevels = 1;
textureDesc.MiscFlags = 0;
textureDesc.SampleDesc.Count = 1;
textureDesc.SampleDesc.Quality = 0;
textureDesc.Usage = D3D11_USAGE_DEFAULT;

ComPtr<ID3D11Texture2D> texture;
DX::ThrowIfFailed(
    m_d3dDevice->CreateTexture2D(
        &textureDesc,
        nullptr,
        &texture
        )
    );

D3D11_RENDER_TARGET_VIEW_DESC renderTargetViewDescription;
ZeroMemory(&renderTargetViewDescription, sizeof(renderTargetViewDescription));
renderTargetViewDescription.Format = textureDesc.Format;

DX::ThrowIfFailed(
    m_d3dDevice->CreateRenderTargetView(
        texture,
        &renderTargetViewDescription,
        &m_renderTargetView[1]
        )
    ); 
```

我在调用以下行时从编译器收到以下错误`CreateRenderTargetView`：

> 错误：不存在从“Microsoft::WRL::ComPtr”到“ID3D11Resource *”的合适转换函数。

[根据 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476635%28v=vs.85%29.aspx)，ID3D11Texture2D 继承自 ID3D11Resource。我必须先以某种方式向上吗？

我正在使用 DirectX 11，并使用 vc110 进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:24:34.547

WRL 的 ComPtr 似乎不支持隐式转换为 T*（与 ATL 的 CComPtr 不同），因此您需要使用 Get 方法：

```
DX::ThrowIfFailed(
    m_d3dDevice->CreateRenderTargetView(
        texture.Get(),
        &renderTargetViewDescription,
        &m_renderTargetView[1]
        )
    ); 
```

# javascript - Javascript 不止一个 RegEx 反向引用

> ID：15306584
> 
> 赞同：0
> 
> 时间：2013-03-09T02:49:25.823
> 
> 标签：javascript, regex

javascript 是否可以使用 RegEx 反向引用创建多个新变量？就像是：

```
var temp = fileName.replace(new RegExp( "(^.)(.*)(_.*)(-.*)", "i" ),"\$1\$2\$3\$4");
var first = $1;
var forth = $4; 
```

在 perl 我会做这样的事情：

```
$uprate =~ /(^.)(.*)(_.*)(-.*)/$1 $2 $3 $4/;

$first = $1;
$forth = $4; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:58:23.003

尝试使用 Javascript 字符串的`match`方法。它将返回一个包含所有匹配组的对象。

```
var matches = fileName.match(/(^.)(.*)(_.*)(-.*)/i);
var first = matches[1];
var fourth = matches[4]; 
```

如果字符串与正则表达式不匹配，则match 方法将返回`null`，因此请务必对其进行测试，除非您确定它会成功。

# mysql - 如何在特定条件下删除重复项

> ID：15306596
> 
> 赞同：0
> 
> 时间：2013-03-09T02:51:36.303
> 
> 标签：mysql, sql

我有一个 mysql 表我想删除具有特定条件的重复项

我想删除如果名称、cl_1、cl_2、cl_3、cl_4、cl_5、cl_6 完全相同，否则如果一个不同且其他列相同则无需删除。

例如我想删除第 1 行和第 4 行而不是第 7 行

```
id  name    cl_1    cl_2    cl_3    cl_4    cl_5    cl_6    
--------------------------------------------------------------  
1   name1   T1      T2      T3      T4      T5      T6    (<< Remove)
2   name2   L1      M2      L3      L4      T5      T6
3   name3   T1      T2      T3      T4      T5      T6
4   name1   T1      T2      T3      T4      T5      T6  (<< Remove)
5   name2   T1      T2      T3      T4      T5      T6
6   name3   T1      T2      T3      T4      T5      T6
7   name1   T1      T2      T3      T4      T5      K6  (Not this one)
8   name5   T1      T2      T3      T4      T5      N6
9   name6   T1      T2      T3      T4      T5      H6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:07:36.213

这应该有效：

```
DELETE Y
FROM YourTable Y JOIN 
   (
  SELECT
    name, cl_1, cl_2, cl_3, cl_4, cl_5, cl_6 
  FROM YourTable
  GROUP BY name, cl_1, cl_2, cl_3, cl_4, cl_5, cl_6
  HAVING COUNT(1) > 1
     ) T ON Y.name = T.name 
        AND Y.cl_1 = T.cl_1
        AND Y.cl_2 = T.cl_2
        AND Y.cl_3 = T.cl_3
        AND Y.cl_4 = T.cl_4
        AND Y.cl_5 = T.cl_5
        AND Y.cl_6 = T.cl_6 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/cf11b/2)

顺便说一句——第 3 行和第 6 行呢？那些似乎完全一样？

[http://sqlfiddle.com/#!2/26b8b/1](http://sqlfiddle.com/#!2/26b8b/1)

# iphone - iPhone 4s 问题

> ID：15306602
> 
> 赞同：-4
> 
> 时间：2013-03-09T02:52:17.310
> 
> 标签：iphone, css

我对[这个页面](http://creativusmouse.com/Proteus/html_preview/portfolio_4_col.html)的画廊有一点问题 。

在 iPhone 4S 上，当我单击图像并在图库中滑动时，右侧的空白区域变得可见。但是，这不会在其他设备上发生。我一直在尝试解决这个问题，但由于我没有 iPhone 4S，事情变得有点困难，我不知道是什么导致了这个问题。

希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:10:47.960

您应该`initial-scale`在[视口元标记](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)中设置。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# coldfusion - Mura CMS - 将导航项链接到另一个项

> ID：15306604
> 
> 赞同：0
> 
> 时间：2013-03-09T02:53:07.930
> 
> 标签：coldfusion, cfml, mura

我有一个多级菜单。我需要它，这样如果用户点击顶级菜单，他们就会被带到他们的孩子那里。例如..

```
- Products (top level)
-->Product 1 (sub)
-->Product 2 (sub)
-->Product 3 (sub) 
```

我需要进行设置，以便如果用户单击“产品”，它会打开“产品 1”而不是产品？

关于我如何做到这一点的任何建议？我确信它可以完成，但我找不到任何东西，也没有解决它..

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:55:15.857

我每天都更爱 Mura。感谢 Mura 论坛上的 CatherineMM 提供了实现这一目标的最简单方法：

“如果您在产品的显示对象中添加“转到第一个孩子”（在系统下），您应该全部设置好！”。

做我的问题：

1.  顶级菜单项（产品）。
2.  转到“布局和对象”。
3.  在“内容对象”下选择“系统”。
4.  然后“转到第一个孩子”并进入主要内容区域。

就是这样......然后当我点击“产品”时，它只会打开“产品1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:19:53.970

如果此菜单是查询驱动的，您也许可以使用 cfoutput 的组属性。像这样的东西：

```
<cfoutput query="yourquery" group="TopLevel">
<a href="somewhere.cfm?somevariable="#fieldfromquery#">#TopLevel"</a>
<cfoutput>
<a href="somewhere.cfm?somevariable="#fieldfromquery#">#NextLevel"</a>
</cfoutput>
</cfoutput> 
```

组级别和第一个未分组级别将在您的查询中读取相同的记录。

# c# - 如何打开具有给定源端口的 TCPClient？

> ID：15306609
> 
> 赞同：1
> 
> 时间：2013-03-09T02:53:40.617
> 
> 标签：c#, .net, tcpclient

首先，我不想在生产中这样做！我需要测试其他人在 TCP 之上的协议实现是否会导致问题。

我想反复使用某个出站端口进行多个 TCP 会话。Windows 通常会为每个新会话增加端口，我想绕过它进行测试。如何设置 TcpClient 的出站端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:05:22.390

根据另一篇文章（[Is there a way to specify the local port to used in tcpClient?](https://stackoverflow.com/questions/2869840/is-there-a-way-to-specify-the-local-port-to-used-in-tcpclient)）。您需要使用带有 a 的构造函数重载`IPEndpoint`来指定要使用的本地端口。

# google-chrome - 检查 IndexedDB objectStore 是否已经包含键

> ID：15306611
> 
> 赞同：11
> 
> 时间：2013-03-09T02:54:08.957
> 
> 标签：google-chrome, indexeddb

如果键已存在，则将对象添加到 IndexedDB objectStore 将失败。我如何使用给定的键检查对象的存在——最好是同步的（没有理由需要另一层回调）并且不拉动对象。

我知道如何通过事务异步获取请求，但每次我想添加一个对象时似乎有点考验。

*note*解决方案只需要在 Chrome 中工作（如果有帮助的话）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T00:55:11.233

检查密钥是否存在的最佳方法是 objectStore.count(key)。这是异步的。

在您的情况下，最好的选择是您的密钥的 openCursor 。如果存在，光标会出现。

```
var req = objectStore.openCursor(key);
req.onsuccess = function(e) {
  var cursor = e.target.result; 
  if (cursor) { // key already exist
     cursor.update(obj);
  } else { // key not exist
     objectStore.add(obj)
  }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T23:47:35.327

到目前为止，所有浏览器都没有实现同步 API，因此您将不得不异步进行。An`objectStore`公开了一个`get`方法，您为它提供了一个键，它将返回与该键匹配的对象（或 null）。

MDN 上有一个非常好的教程，其中涵盖了使用 IDB，也涵盖了[获取记录](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Getting_data_from_the_database)，但内联代码是：

```
db.transaction("customers").objectStore("customers").get("444-44-4444").onsuccess = function(event) {
  alert("Name for SSN 444-44-4444 is " + event.target.result.name);
}; 
```

如果您不想检索记录，那么您始终可以[按照规范中的](http://www.w3.org/TR/IndexedDB/#widl-IDBIndex-count-IDBRequest-any-key)`count`说明在索引上使用该方法。根据您可以使用或修改记录的结果，如果您不需要，它将保存提取记录。`add``put`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-24T09:28:09.390

答案有点晚，但可能对其他人有帮助。我仍然偶然发现 - 正如我猜想的那样 - 相同的问题，但它非常简单：

如果您想插入或更新您使用的记录`objectStore.put(object)` [（帮助）](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/put "（？）")
如果您只想插入您使用的记录`objectStore.add(object)` [（帮助）](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/add "帮助")

因此，如果您使用`add(object)`，并且 DB 中仍然存在记录键，它不会被覆盖并触发错误 0“ConstraintError：对象存储中已存在键”。

如果使用`put(object)`，它将被覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T09:31:05.613

问题是你为什么想知道这个？也许你应该使用另一种方法？

你可以使用自动增量，这样你就不需要检查一个键是否存在，你总是会得到一个唯一的。

您也可以使用 put 方法而不是 add 方法。如果键存在，则使用 put 更新数据，如果键不存在，则添加数据。

一切都取决于您要检查某物是否存在的原因。

# java - 在 JPA 范围内以编程方式“非动态”构建 HQL 查询

> ID：15306614
> 
> 赞同：1
> 
> 时间：2013-03-09T02:54:24.167
> 
> 标签：java, jpa, hql, dsl

例子：

```
List<Object[]> list = em.createQuery(
  "SELECT 'Foo', 123 FROM IrcEvent ev", Object[].class).getResultList(); 
```

我不喜欢那个例子：

*   我怎么知道表名？我不能指定实体类吗？
*   我怎么知道列名？[jOOQ](http://www.jooq.org)通过从数据库模式创建 DSL 来提供自动完成功能。
*   到处都可能存在语法错误。

我基本上想要的是

```
entityManager.deleteAll(EntityClass.class); 
```

删除 antire 表的行（例如）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:39:30.073

JPA 2 Criteria API [http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html)用于以编程方式创建类型安全查询，但不支持删除

# php - 错误重定向和上传照片

> ID：15306615
> 
> 赞同：0
> 
> 时间：2013-03-09T02:54:41.233
> 
> 标签：php, codeigniter

有一个有趣的时间试图让上传工作。所以事情是这样的：我有一个表单，它使用一些 javascript 来假装它是 3 个单独的页面。这都是一种形式，但是当您单击“下一步”时，一个部分会消失，而另一个部分会显示出来。最后一页是您最容易出错的页面...... A：

```
redirect(/path/to/app#!section2); 
```

显示错误所在的正确页面。通过快速将所有变量放入 flashvar 中，我可以取回所有数据。因此，如果发生此重定向，我将在表单中显示所有数据....除了....如果您尝试上传照片，我已经丢失了照片上传。我的第一个想法是尝试将 $_FILES 数据保存到 flashvar，但我认为这不会奏效。

有人以前看过这个吗？必须有办法解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:10:25.893

我将使整个过程基于 ajax，因此您不必担心通过重定向保留数据。您可以像往常一样在控制器中进行所有验证，然后将 json 或 javascript 代码返回给浏览器以解析和处理下一步要做什么。

# windows-8 - 取消按钮不会关闭 W8 Facebook C# SDK 6.1.2 中的登录弹出窗口

> ID：15306617
> 
> 赞同：0
> 
> 时间：2013-03-09T02:54:46.647
> 
> 标签：windows-8, facebook-c#-sdk, windows-store-apps, facebook-login, cancel-button

我正在使用 Facebook C# SDK 6.1.2 ( [https://github.com/facebook-csharp-sdk/facebook-windows8-sample](https://github.com/facebook-csharp-sdk/facebook-windows8-sample) ) 开发 Windows Store 应用程序。

但是，我有一个问题：打开登录弹出窗口后，如果用户单击取消按钮，则没有任何反应。

我认为必须关闭登录弹出窗口。

有没有办法处理取消按钮事件点击？或者这是一个sdk问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:39:43.317

取消按钮在facebook页面本身，不能在这个框架内处理，但是如果用户想取消操作，他可以​​按下`ESC`按钮，或者点击这个框架左上角的返回箭头下一个连接**到服务**。

# ios - 当前 ViewController 模态显示奇怪的动画

> ID：15306618
> 
> 赞同：3
> 
> 时间：2013-03-09T02:55:05.990
> 
> 标签：ios, uiviewcontroller, keyboard, first-responder

我正在尝试创建一个简单的模式视图控制器，让您可以使用文本视图编辑文本。但是，当我以模态方式呈现视图控制器时，它会从左下方向滑入，而不是仅从底部滑入。

这是一段奇怪效果的视频：http: [//youtu.be/9M_MHA5mt1M](http://youtu.be/9M_MHA5mt1M)

我的控制器只是监视键盘显示，然后适当地使用自动布局调整文本视图的大小。这是代码：

```
#import "TextPicker.h"

@interface TextPicker ()

@property (weak, nonatomic) IBOutlet NSLayoutConstraint *keyboardHeight;

@end

@implementation TextPicker

- (id)initWithText:(NSString *)text
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    self = [storyboard instantiateViewControllerWithIdentifier:@"textPicker"];
    if (self) {
        self.text = text;

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self observeKeyboard];

    //self.textView.text = self.text;
    [self.textView becomeFirstResponder];
}

- (void) viewWillDisappear:(BOOL)animated {
    [self.textView resignFirstResponder];
}

- (IBAction)savePressed:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];    
}

- (IBAction)cancelPressed:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void) dealloc {
    [self stopObervingKeyboard];
}

- (void)observeKeyboard {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillChangeFrameNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)stopObervingKeyboard {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillChangeFrameNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
}

- (void)keyboardWillShow:(NSNotification *)notification {
    NSDictionary *info = [notification userInfo];

    NSValue *kbFrame = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardFrame = [kbFrame CGRectValue];
    self.keyboardHeight.constant = -keyboardFrame.size.height;

    NSTimeInterval animationDuration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    [UIView animateWithDuration:animationDuration animations:^{
        [self.view layoutIfNeeded];
    }];
}

- (void)keyboardWillHide:(NSNotification *)notification {
    NSDictionary *info = [notification userInfo];
    NSTimeInterval animationDuration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    self.keyboardHeight.constant = 0;
    [UIView animateWithDuration:animationDuration animations:^{
        [self.view layoutIfNeeded];
    }];
}

- (IBAction)dismissKeyboard:(id)sender {
    [self.textView resignFirstResponder];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T05:49:53.780

`[self.view layoutIfNeeded]`通过将调用包装在动画块中，您的视图正在动画化。

在`viewDidLoad`您开始观察键盘变化时，当您检测到它们时，您会为调整设置动画，这通常是正确的。但是，在视图进行第一次布局之前，您会显示键盘；这会导致所有视图的动画从`CGRectZero`它们的适当大小。这就是您所看到的效果。

所以基本上你需要在你的动画调用*之前*给视图一个布局的机会。`layoutIfNeeded`可能最简单的方法是简单地移动`[self.textView becomeFirstResponder];`到`viewWillAppear:`或`viewDidAppear:`。

*作为旁注，请记住在外观呼叫中呼叫超级。我注意到你没有打电话`[super viewWillDisappear];`。

# ios - 如何通过一个按钮切换到多个屏幕

> ID：15306620
> 
> 赞同：0
> 
> 时间：2013-03-09T02:55:22.237
> 
> 标签：ios, objective-c, uiviewcontroller

我在 MacBook Pro 上使用 XCode 4.6 在 Objective-C 中进行编码，我想知道如何在故事板中使用相同的按钮来连接到两个不同的屏幕，我的意思是，我想设置一个条件结构来决定当用户按下按钮时应用程序将进入哪个屏幕，例如 if(x==1) {转到视图控制器 1} else {转到视图控制器 2}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:04:43.420

从情节提要中的视图控制器（而不是按钮）连接 segue。给按钮一个 IBAction 并在 IBAction 的实现中抛出你的 if 语句：

```
- (IBAction)buttonPressed:(id)sender
{
    if (x == 1) {
        [self performSegueWithIdentifier:@"Go to view controller 1" sender:self];
    } else {
        [self performSegueWithIdentifier:@"Go to view controller 2" sender:self];

    }
} 
```

# mysql - MySQL 中的类层次结构

> ID：15306626
> 
> 赞同：1
> 
> 时间：2013-03-09T02:56:42.370
> 
> 标签：mysql, database-design, database-schema

我正在创建服装店，因此我正在创建包含 2 种类型的图库功能：产品图库和外观图库。产品图库只是单个产品的图片，而外观图库是包含多个产品的图片。

到目前为止，我有一个简化的 UML 图，有点像这样

![画廊类 UML 图](../Images/f4619996b9bf45234cf394211ab6a1f5.png)

我不确定如何将其转换为 MySQL 表。我试过了，我想出了这样的东西

![图库数据库UML图](../Images/11b2cb2543ad7e26d4051e7e3c5357ea.png)

但这对我来说似乎有点矫枉过正，而且闻起来很有趣。在我的情况下，最佳做法是什么？我是在正确的轨道上还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:03:41.483

我不知道这方面的“最佳实践”是什么，您可以使用 NO-SQL 数据库，或者如果您使用关系数据库，您可以只使用 3 个表格、画廊、图片和产品。

一个画廊可以包含许多图片

一张图片可以包含许多产品。

画廊类型之间的区别仅包含在一个属性中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T03:12:06.180

首先考虑继承是否是实现所需行为的最佳方式。通常，最好[选择组合而不是继承](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。从你的图表我会说你真的不需要继承来解决你的问题。

如果您确实需要实现继承，那么您可以使用多种策略。寻找一个对象关系映射器是一个非常好的主意，因为一个好的映射器可以使以下策略的实现变得更加容易。如果您使用 .NET，那么[NHibernate](http://nhforge.org/)或[Entity Framework](http://msdn.microsoft.com/en-gb/data/ef.aspx)是不错的选择。对于 Java ， [Hibernate](http://www.hibernate.org/)非常好。

**每个类层次结构的表**

在这里，您将为整个类层次结构创建一个表。当层次结构中的类都共享许多列时，这是最有意义的。您需要添加一个“鉴别器”列，以便您可以识别每行属于哪个子类。在您的示例中，您将拥有

*   画廊
*   图片

我想说这种策略对您来说最有意义，因为您的子类之间似乎没有很多不同的列。

**每个子类的表**

在此示例中，您将为每个子类创建一个表。当继承层次结构中的类不共享许多公共列时，这是最有意义的。

所以你会有这样的表：

*   产品图库
*   日志_画廊
*   产品图片
*   日志_图片

**每班表**

这是您图表中的策略。就像每个子类的表一样，当每个子类都有不同的列时，这很有用。相对于每个子类的表的优点是更容易在一个大连接中查询整个类层次结构，缺点是您最终会得到很多表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:04:16.577

该数据库模式看起来注定要失败。定义模式时最重要的事情是从问题的名词和动词开始。用文字描述你的环境是什么样的。有哪些实体？实体如何相互交互？例如，“画廊有图片”。仅此声明就告诉您画廊和图片之间存在关联。

一旦你想出了你的名词-动词关联，你就可以开始说明诸如“画廊”和“图片”之类的实体。画廊和图片之间是一对一的关系，还是一个画廊对许多图片？

考虑这些事情，并在这里查看一些基本的设计技巧：http: [//msdn.microsoft.com/en-us/library/b42dwsa3 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b42dwsa3(v=vs.71).aspx)

# python - 如何使用 Python tkinter 创建子窗口？

> ID：15306631
> 
> 赞同：14
> 
> 时间：2013-03-09T02:57:39.890
> 
> 标签：python, tkinter, window

我正在使用 Python 3.3 和 tkinter 为行人逃离模拟制作 GUI 界面。

我编写了两个模拟程序，它们运行良好。但是，当我试图从我的主应用程序中调用它们时，我被卡住了。我希望模拟窗口出现在单独的窗口中（创建主窗口的子窗口）。

```
#flee_GUI.py
#!/usr/bin/env python
import tkinter

class MenuBar(tkinter.Menu):
    def __init__(self,parent):
        tkinter.Menu.__init__(self,parent)
        ###File###
        fileMenu = tkinter.Menu(self, tearoff=False)
        self.add_cascade(label="File",underline=0, menu=fileMenu)
        fileMenu.add_command(label='Open',underline=1)
        fileMenu.add_separator()
        fileMenu.add_command(label="Exit", underline=1, command=self.quit)
        ###Run###
        runMenu=tkinter.Menu(self,tearoff=False)
        self.add_cascade(label='Run',underline=1,menu=runMenu)
        runMenu.add_command(label='Open Bounary Model',underline=1,command=runModel1)

class Frame(tkinter.Tk):
    def __init__(self,parent):
        tkinter.Frame.__init__(self,parent)
        self.parent=parent

def runModel1():
    from drawcanvas_Alpha_7_0_open_border import cell
    I=cell(None)

class App(tkinter.Tk):
    def __init__(self,parent):
        tkinter.Tk.__init__(self,parent)
        self.parent=parent
        runModel1()

        menubar=MenuBar(self)
        self.config(menu=menubar)

if __name__=='__main__':
    app=App(None)
    app.mainloop()

#drawcanvas_Alpha_7_0_open_border.py
#!/usr/bin/env python
# -*- coding:utf-8 -*-

#Run this by python3.x.
#If you are using Python2.x,be aware of the difference such as print,Tkinter and tkinter,etc.

#from tkinter import *
import tkinter
import random

#class cell(Frame):
class cell(tkinter.Tk):
    def __init__(self,parent):

        tkinter.Tk.__init__(self,parent)
        self.parent=parent
        self.channel_length=40#aisle length (1 unit for 10 pixel)
        self.channel_width=40#aisle width
        self.origin_x=0
        self.origin_y=0
        self.pixel_unit=10
        self.speed=100
        self.alltime=0
        self.PN=100#Number of pedestrian
        self.Pu=0.1
        self.Pd=0.9#probability of going down if the right side were occupied
        self.window_width=self.origin_x+self.channel_length*self.pixel_unit
       self.window_height=self.origin_y+self.channel_width*self.pixel_unit+2*self.pixel_unit
        self.canvas=tkinter.Canvas(
    self.parent,width=self.window_width,height=self.window_height,bg='lightblue')

        self.Ped_x=[]
        self.Ped_y=[]
        self.block_flag=[]
        self.block_occupy=[]
        self.draw_canvas()
        self.draw_grid()
        self.draw_architecture()
        self.draw_pedestrian_init()
        self.draw_pedestrian()

    def draw_canvas(self):
        self.canvas.pack()
    def destroy_canvas(self):
        self.canvas.destroy()
    def destroy_architecture(self):
        pass
    def draw_grid(self):
        for i in range(2,self.channel_width+1):
            self.draw_line(0,i,self.channel_length,i)
        for i in range(1,self.channel_length):
            self.draw_line(i,0,i,self.channel_width+1)

    def draw_line(self,x0,y0,x1,y1,linedash=1):
        self.canvas.create_line(
        self.origin_x+x0*self.pixel_unit,
        self.origin_y+y0*self.pixel_unit,
        self.origin_x+x1*self.pixel_unit,
        self.origin_y+y1*self.pixel_unit,dash=linedash)

    def draw(self,x0,y0,x1,y1,color='black'):
        self.canvas.create_rectangle(
        self.origin_x+x0*self.pixel_unit,
        self.origin_y+y0*self.pixel_unit,
        self.origin_x+x1*self.pixel_unit,
        self.origin_y+y1*self.pixel_unit,
        fill=color)
        for i in range(y0,y1):
            for j in range(x0,x1):
                self.block_occupy[i][j]=1
                #print(j,i)
    def draw_architecture(self):

        for i in range(0,(self.channel_width+1)+1):
            self.block_occupy.append([])
            for j in range(0,self.channel_length):
                self.block_occupy[i].append(0)
        self.draw(0,0,self.channel_length,1)
         self.draw(0,self.channel_width+1,self.channel_length,self.channel_width+2)

        self.draw(30,1,31,int(self.channel_width/2-1),'red')
        #self.draw(30,int(self.channel_width/2+1),31,self.channel_width+1,'red')

    def draw_pedestrian_init(self):
        Ped_count=0
        while Ped_count<self.PN:
            self.Ped_x.append(
            int(random.randrange(
        self.origin_x,self.origin_x+30*self.pixel_unit)/self.pixel_unit)*self.pixel_unit)

            self.Ped_y.append(
            int(random.randrange(
            self.origin_y+self.pixel_unit,self.origin_y+(self.channel_width+1)*self.pixel_unit)/self.pixel_unit)*self.pixel_unit)
            tmp_x=int((self.Ped_x[Ped_count]-self.origin_x)/self.pixel_unit)
            tmp_y=int((self.Ped_y[Ped_count]-self.origin_y)/self.pixel_unit)
            if self.block_occupy[tmp_y][tmp_x]==1:
                self.Ped_x.pop()
                self.Ped_y.pop()
            else:
                self.block_occupy[tmp_y][tmp_x]=1
                Ped_count=Ped_count+1

        self.block_flag=[self.canvas.create_rectangle(self.Ped_x[i],self.Ped_y[i],
        self.Ped_x[i]+self.pixel_unit,self.Ped_y[i]+self.pixel_unit,fill='green') for i in range(0,self.PN)]
    def draw_pedestrian(self):
        for i in range(0,self.PN):
            self.canvas.delete(self.block_flag[i])

        #print(self.block_occupy)
        #count_f=self.PN
        for i in range(0,self.PN):
            if self.Ped_x[i]>self.origin_x+(self.channel_length-1)*self.pixel_unit-1:
                #self.Ped_x[i]=self.Ped_x[i]-self.channel_length*self.pixel_unit
                dummy_x=int((self.Ped_x[i]-self.origin_x)/self.pixel_unit)
                dummy_y=int((self.Ped_y[i]-self.origin_y)/self.pixel_unit)
                self.block_occupy[dummy_y][dummy_x]=0
                #count_f=self.PN-1
                self.Ped_x[i]=-1
                self.Ped_y[i]=-1
        temp_block_flag1=[]
        temp_block_flag2=[]
        for i in range(0,self.PN):
            if self.Ped_x[i]!=-1:
                temp_block_flag1.append(self.block_flag[i])
            else:
                temp_block_flag2.append(self.block_flag[i])
        self.block_flag=temp_block_flag1
        for i in range(0,len(temp_block_flag2)):
            self.canvas.delete(temp_block_flag2[i])

        self.Ped_x=[self.Ped_x[i] for i in range(0,self.PN) if self.Ped_x[i]!=-1]
        self.Ped_y=[self.Ped_y[i] for i in range(0,self.PN) if self.Ped_y[i]!=-1]
        self.PN=len(self.Ped_x)

        for i in range(0,self.PN):
            print(self.PN,i,len(self.Ped_x))
            tmp_x=int((self.Ped_x[i]-self.origin_x)/self.pixel_unit)
            tmp_y=int((self.Ped_y[i]-self.origin_y)/self.pixel_unit)

            if self.block_occupy[tmp_y][tmp_x+1]==0:
                self.block_occupy[tmp_y][tmp_x]=0
                self.block_occupy[tmp_y][tmp_x+1]=1
                self.Ped_x[i]=self.Ped_x[i]+self.pixel_unit

            elif (self.block_occupy[tmp_y+1][tmp_x]==0 
            and self.block_occupy[tmp_y-1][tmp_x]==0):#The right side is occupied,while the up and down side is free
                if random.uniform(0,1)<self.Pd:#go down
                    self.block_occupy[tmp_y][tmp_x]=0
                    self.block_occupy[tmp_y+1][tmp_x]=1
                    self.Ped_y[i]=self.Ped_y[i]+self.pixel_unit
                else:#go up
                    self.block_occupy[tmp_y][tmp_x]=0
                    self.block_occupy[tmp_y-1][tmp_x]=1
                    self.Ped_y[i]=self.Ped_y[i]-self.pixel_unit

            elif (self.block_occupy[tmp_y+1][tmp_x]==1 #the up side is occupied,while the down side is free
            and self.block_occupy[tmp_y-1][tmp_x]==0):
                self.block_occupy[tmp_y][tmp_x]=0
                self.block_occupy[tmp_y-1][tmp_x]=1
                self.Ped_y[i]=self.Ped_y[i]-self.pixel_unit
            elif (self.block_occupy[tmp_y+1][tmp_x]==0 #the up side is free,while the down side is occupied 
            and self.block_occupy[tmp_y-1][tmp_x]==1):
                self.block_occupy[tmp_y][tmp_x]=0
                self.block_occupy[tmp_y+1][tmp_x]=1
                self.Ped_y[i]=self.Ped_y[i]+self.pixel_unit

        #print(self.block_occupy)

        self.block_flag=[self.canvas.create_rectangle(self.Ped_x[i],self.Ped_y[i],
        self.Ped_x[i]+self.pixel_unit,self.Ped_y[i]+self.pixel_unit,fill='green') for i in   range(0,self.PN)]

        self.alltime+=1
        self.after(self.speed,self.draw_pedestrian)
        if self.PN==0:
            print("Fleeing complete!,total time:",self.alltime)

            self.destroy_canvas()

if __name__=='__main__':
    Io=cell(None)
    Io.mainloop() 
```

如何使用 tkinter 从我的主应用程序启动子窗口？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-09T03:26:23.447

您可以通过创建`Toplevel`. 有关详细信息，请参阅[http://effbot.org/tkinterbook/toplevel.htm](http://effbot.org/tkinterbook/toplevel.htm)。

这是一个示例，可让您通过单击按钮来创建新窗口：

```
import Tkinter as tk

class MainWindow(tk.Frame):
    counter = 0
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self.button = tk.Button(self, text="Create new window", 
                                command=self.create_window)
        self.button.pack(side="top")

    def create_window(self):
        self.counter += 1
        t = tk.Toplevel(self)
        t.wm_title("Window #%s" % self.counter)
        l = tk.Label(t, text="This is window #%s" % self.counter)
        l.pack(side="top", fill="both", expand=True, padx=100, pady=100)

if __name__ == "__main__":
    root = tk.Tk()
    main = MainWindow(root)
    main.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# ios - 虚拟键盘和我的 UIView 正在打架（不断地相互绘制）

> ID：15306633
> 
> 赞同：0
> 
> 时间：2013-03-09T02:58:09.357
> 
> 标签：ios, uiview, keyboard, flicker

我有一个 UIViewController，我在其中添加了一个带有一些 UIButtons 的 UIView，以及一个用于输入用户名的 UITextField。当我选择 UITextField 并开始在虚拟键盘上键入时，它的一部分会在 UIView 后面闪烁，UIButtons 会出现在键盘前面等。粘贴操作也会发生这种情况，所以由于某种原因，顺序我的 UIView 和键盘看起来是一样的吗？

什么可能导致这种情况？

请看图片@http: [//img268.imageshack.us/img268/8606/iossimulatorscreenshotm.png](http://img268.imageshack.us/img268/8606/iossimulatorscreenshotm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:13:54.150

我追踪到“[self.layer setShadowOpacity:0.8f];” 在我的 UIView 上。出于某种原因，设置了阴影不透明度的 UIView 的模态视图控制器会导致键盘闪烁。

```
[self.layer setShadowColor:[UIColor blackColor].CGColor];
[self.layer setShadowOpacity:0.8f]; // this causes flickering with the keyboard.
[self.layer setShadowRadius:3.0f];
[self.layer setShadowOffset:CGSizeMake(2.0f, 2.0f)]; 
```

# facebook-graph-api - 为什么 Facebook 的 JSONP 回调以“/**/”开头

> ID：15306636
> 
> 赞同：11
> 
> 时间：2013-03-09T02:58:24.460
> 
> 标签：facebook-graph-api, jsonp

当我使用 Facebook 的 Open Graph API 时，我注意到 Facebook 生成的 JSONP 响应似乎在每个响应的开头都有一个无关的“/**/”，如下所示：

```
URL: 
https://graph.facebook.com/SOME_ID?method=get&pretty=0&sdk=joey&callback=FB.__globalCallbacks.f1c77f051c

Response:
/**/ FB.__globalCallbacks.f887adeec(...); 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T05:22:41.933

我们添加它是为了防止第三方站点通过执行以下操作绕过响应的内容类型的攻击：<object type="application/x-shockwave-flash" data="http://graph.facebook.com? callback=[特制的闪存字节]"></object>

谷歌做了类似的事情，除了他们使用 //... + \n （例如[http://www.google.com/calendar/feeds/developer-calendar@google.com/public/full?alt=json&callback=foo](http://www.google.com/calendar/feeds/developer-calendar@google.com/public/full?alt=json&callback=foo)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:23:35.513

当然是为了防止 XSSI ......所以你不能执行它......

http://maxime.sh/2013/02/javascript-quest-ce-que-le-xssi-et-comment-leviter/&usg=ALkJrhhjfdwBrK7kxNipOowAYacIcJm89g">这是一篇关于此的法语博客文章（带有谷歌翻译）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:27:56.217

为了防止 XSSI 查看 facebook 的图表以获取更多帮助 [https://developers.facebook.com/docs/opengraph/overview/](https://developers.facebook.com/docs/opengraph/overview/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T06:27:30.917

似乎 Facebook 在他们的 JSON 上使用了一个清理器，它只是在一开始就留下了剩余的评论持有者。很可能会在此处留下评论以进行调试，但在生产中实际评论会被清除。

# ruby-on-rails - RVM 不使用已安装的 gem

> ID：15306639
> 
> 赞同：0
> 
> 时间：2013-03-09T02:58:53.127
> 
> 标签：ruby-on-rails, rvm

知道如何解决吗？

看看这个：

```
funkdified@vizio ~/rails_projects/goodsounds.org $ rvm current
ruby-1.9.3-p392@goodsounds
funkdified@vizio ~/rails_projects/goodsounds.org $ gem install bundler
Fetching: bundler-1.3.2.gem (100%)
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /var/lib/gems
funkdified@vizio ~/rails_projects/goodsounds.org $ rvm gemset list

gemsets for ruby-1.9.3-p392 (found in /home/funkdified/.rvm/gems/ruby-1.9.3-p392)
   (default)
   global
=> goodsounds

funkdified@vizio ~/rails_projects/goodsounds.org $ rvm @goodsounds do gem list

*** LOCAL GEMS ***

actionmailer (3.2.13.rc1)
actionpack (3.2.13.rc1)
activemodel (3.2.13.rc1)
activerecord (3.2.13.rc1)
activeresource (3.2.13.rc1)
activesupport (3.2.13.rc1)
acts-as-taggable-on (2.3.3)
annotate (2.4.1.beta1)
arel (3.0.2)
awesome_print (1.1.0)
bcrypt-ruby (3.0.1)
better_errors (0.7.0)
binding_of_caller (0.7.1)
blankslate (3.1.2)
bootstrap-sass (2.3.0.1)
bootstrap-will_paginate (0.0.9)
builder (3.0.4)
bundler (1.3.2)
cancan (1.6.8)
celluloid (0.12.4)
chronic (0.9.1)
climate_control (0.0.3)
cocaine (0.5.1)
coderay (1.0.9)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.5.0)
columnize (0.3.6)
connection_pool (1.0.0)
country_select (1.1.3)
daemons (1.1.9)
debug_inspector (0.0.2)
debugger (1.2.4)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.1.9)
decorators (1.0.3)
devise (2.2.3)
diff-lcs (1.2.1)
erubis (2.7.0)
eventmachine (1.0.1)
execjs (1.4.0)
facter (1.6.17)
factory_girl (4.2.0)
factory_girl_rails (4.2.1)
fastthread (1.0.7)
ffi (1.0.11)
font-awesome-sass-rails (3.0.2.2)
forem-redcarpet (1.0.0)
friendly_id (4.0.9)
gemoji (1.1.2)
geocoder (1.1.6)
gmaps4rails (1.5.6)
gon (4.0.2)
google_visualr (2.1.7)
googlecharts (1.6.8)
guard (1.6.2)
guard-rspec (2.5.0)
haml (4.0.0)
hash-deep-merge (0.1.1)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.2.1)
jquery-ui-rails (3.0.1)
json (1.7.7)
kaminari (0.14.1)
lazy_high_charts (1.3.3)
libnotify (0.8.0)
libv8 (3.11.8.13 x86_64-linux)
listen (0.7.3)
lumberjack (1.0.2)
mail (2.5.3)
meta_request (0.2.0)
method_source (0.8.1)
mime-types (1.21)
multi_json (1.6.1)
nested_form (0.3.1)
nifty-generators (0.4.6)
nokogiri (1.5.6)
orm_adapter (0.4.0)
pg (0.14.1, 0.13.2)
polyamorous (0.5.0)
polyglot (0.3.3)
pry (0.9.12)
pry-debugger (0.2.1)
pygments.rb (0.2.4)
quiet_assets (1.0.2)
rack (1.4.5)
rack-cache (1.2)
rack-contrib (1.1.0)
rack-pjax (0.7.0)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.13.rc1)
rails_admin (0.4.5)
railties (3.2.13.rc1)
rake (10.0.3)
rdoc (3.12.2)
redcarpet (2.0.1)
RedCloth (4.2.9)
redis (3.0.3)
redis-namespace (1.2.1)
ref (1.0.2)
remotipart (1.0.5)
rest-client (1.6.7)
rolify (3.2.0)
rspec (2.13.0)
rspec-core (2.13.0)
rspec-expectations (2.13.0)
rspec-mocks (2.13.0)
rspec-rails (2.13.0)
rubygems-bundler (1.1.1)
rubypython (0.5.3)
rvm (1.11.3.6)
safe_yaml (0.8.4)
sass (3.2.6)
sass-rails (3.2.6)
select2-rails (3.3.0)
sequel (3.20.0)
sidekiq (2.8.0)
simple_form (2.1.0)
sinatra (1.0)
slim (1.3.6)
slop (3.4.3)
sprockets (2.2.2)
squeel (1.0.17)
taps (0.3.24)
temple (0.5.5)
terminal-table (1.4.5)
therubyracer (0.11.4)
thin (1.5.0)
thor (0.17.0)
tilt (1.3.4)
timers (1.1.0)
treetop (1.4.12)
tzinfo (0.3.36)
uglifier (1.3.0)
v (0.1.1)
warden (1.2.1)
webrat (0.7.3)
whenever (0.8.2)
will_paginate (3.0.4)
workflow (0.8.0)
funkdified@vizio ~/rails_projects/goodsounds.org $ bundle
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:55:48.903

可能是捆绑程序的安装和执行捆绑命令的权限的问题。

```
funkdified@vizio ~/rails_projects/goodsounds.org $ gem install bundler
Fetching: bundler-1.3.2.gem (100%)
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /var/lib/gems
funkdified@vizio ~/rails_projects/goods 
```

您是否通过系统的包管理器安装了任何 ruby​​/gem 或在 gem 安装期间使用了 sudo？

这个问题有类似的问题，即[rvm and bundle install in Ubuntu 12.10: Errno::EACCES](https://stackoverflow.com/questions/13055062/rvm-and-bundle-install-in-ubuntu-12-10-errnoeacces) 和这个正确安装 rvm [Installed Ruby 1.9.3 with RVM 但命令行不显示 ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:40:33.610

我必须在 gnome 终端中选择“作为登录 shell 运行命令”！

正如上面的评论所暗示的：

> 打开终端并转到编辑并选择配置文件首选项..它将显示弹出。然后选择 Title and Command 选项卡并取消选中 Run command as login shell

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:52:04.730

你有root权限吗？

如果是这样，请尝试：

```
sudo gem install bundler 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:55:14.013

我相信这里的问题是您没有安装到 /var/lib/gems 的权限。您是否尝试以“root”身份执行安装：

> `sudo gem install bundler`

如果您没有将 rvm 安装为用户安装，那么您将无法在没有 sudo 的情况下安装 gems。

# javascript - Google Maps v3 - 设置标记中心的边界

> ID：15306640
> 
> 赞同：1
> 
> 时间：2013-03-09T02:59:11.427
> 
> 标签：javascript, google-maps, google-maps-api-3

尽管花了一整天的时间搜索并尝试了许多代码方法，但我仍然无法正确地居中和缩放谷歌地图。

我想知道是否有人会这么好心地指出我在我的代码中做错了什么。在 v2 中一切正常，但我很难更新到 v3。

参考 该地图是一个更大的 php 应用程序的一小部分，所需的纬度和经度地图参数已经通过主程序中使用的其他方法获得，并声明如下：-

```
var myDestination=new google.maps.LatLng(e_lat,e_long);
var myHome=new google.maps.LatLng(h_lat,h_long); 
```

除了缩放和中心之外，一切似乎都正常。有问题的代码如下： -

```
function initialize()
{

// set the map properties
var mapProp = {
  center:myHome,
  zoom:12,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

// set the home marker
var marker_home=new google.maps.Marker({
  position:myHome,
  icon:'house.png'
   });

  marker_home.setMap(map);

//set the destination marker  
var marker_destination=new google.maps.Marker({
  position:myDestination,
  icon:'flag_red.png'
  });

  marker_destination.setMap(map);

//google polyline between the 2 points 
 var myPolyline = [myDestination,myHome];
 var directPath = new google.maps.Polyline({
  path:myPolyline,
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2  
});

directPath.setMap(map);

//  Make an array of the LatLng's of the markers you want to show
var LatLngList = array (new google.maps.LatLng (e_lat,e_long), new google.maps.LatLng  (h_lat,h_long));
//  Create a new viewpoint bound
var bounds = new google.maps.LatLngBounds ();
//  Go through each...
for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
//  And increase the bounds to take this point
bounds.extend (LatLngList[i]);
}
//  Fit these bounds to the map
map.fitBounds (bounds);

}

google.maps.event.addDomListener(window, 'load', initialize); 
```

TIA 寻求帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:30:34.147

在您的代码中未定义“数组”。请参阅[jsFiddle](http://jsfiddle.net/tQf9n/1/)。

```
var LatLngList = array (new google.maps.LatLng (e_lat,e_long), new google.maps.LatLng  (h_lat,h_long)); 
```

你应该使用

```
var LatLngList = new Array(new google.maps.LatLng...) 
```

或者

```
var LatLngList = [new google.maps.LatLng...] 
```

# c# - 下载网站的 HTML 会返回完全不同的内容

> ID：15306643
> 
> 赞同：0
> 
> 时间：2013-03-09T02:59:41.810
> 
> 标签：c#

我正在使用 C# 下载网页的 HTML，但是当我检查网页的实际代码和我下载的代码时，它们完全不同。这是代码：

```
public static string getSourceCode(string url) {
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        req.Method = "GET";
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader(resp.GetResponseStream());
        string soruceCode = sr.ReadToEnd();
        sr.Close();
        resp.Close();
        return soruceCode;

        using (StreamReader sRead = new StreamReader(resp.GetResponseStream(), Encoding.UTF8)) {

            // veriyi döndür
            return sRead.ReadToEnd();
        }

private void button1_Click(object sender, EventArgs e) {

        string url = "http://www.booking.com/hotel/tr/nena.en-gb.html?label=gog235jc-hotel-en-tr-mina-nobrand-tr-com-T002-1;sid=fcc1c6c78f188a42870dcbe1cabf2fb4;dcid=1;origin=disamb;srhash=3938286438;srpos=5";
        string sourceCode = Finder.getSourceCode(url);
        StreamWriter sw = new StreamWriter("HotelPrice.txt");//Here the code are completly different with web page code.
        sw.Write(sourceCode);
        sw.Close();

        #region //Get Score Value

        int StartIndex = sourceCode.IndexOf("<strong id=\"rsc_total\">") + 23;
        sourceCode = sourceCode.Substring(StartIndex, 3);

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:06:40.013

我在尝试使用`HttpWebRequest`爬取页面时遇到了同样的问题，并且该页面用于`ajax`加载我所追求的所有数据。为了让`ajax`调用发生，我切换到[WebBrowser](http://msdn.microsoft.com/en-us/library/2te2y1x6.aspx)控件。

[这个答案](https://stackoverflow.com/a/4271581/1289454)提供了一个如何在 WinForms 应用程序之外使用控件的示例。`DocumentCompleted`在解析页面之前，您需要连接到浏览器的事件。请注意，在准备好解析页面之前，此事件可能会触发多次。您可能想要添加类似这样的内容

```
if(browser.ReadyState == WebBrowserReadyState.Complete) 
```

到您的事件处理程序，以了解页面何时完全完成加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:04:37.043

造成这种差异的最可能原因是，当您使用浏览器请求同一页面时，它是会话的一部分，当您使用 WebRequest 请求同一页面时，该会话未建立。

查看 URL，查询参数看起来像是`sid`会话标识符或某种随机数。该页面可能会根据实际会话 ID 验证这一点，并且当它确定它们不同时，它会给您某种“糟糕……错误的视野”类型的响应。

为了模仿浏览器的请求，您必须确保生成正确的请求，该请求可能需要包含以下一项或多项：

*   cookie（之前由网络服务器发送给您）
*   有效/适当的用户代理
*   一些特定的查询参数（同样取决于页面的预期）
*   可能是引荐来源网址
*   身份验证凭据

确定您需要什么的最佳方法是从头到尾跟踪您的浏览器和为该页面提供服务的 Web 服务器之间的*对话，并准确查看请求的页面、顺序以及来回传递的信息。*您可以使用 WireShark 或 Fidler 来完成此操作——这两种工具都是免费的！

# parsing - 使用 Scala 将文本文件解析为组

> ID：15306645
> 
> 赞同：1
> 
> 时间：2013-03-09T02:59:48.593
> 
> 标签：parsing, scala

我有一个 CSV 文件，它实际上是一组许多 CSV 文件。像这样的东西：

```
"First Part"
"Some", "data", "in", "here"
"More", "stuff", "over", "here"

"Another Part"
"This", "section", "is", "not", "the", "same", "as", "the", "first"
"blah", "blah", "blah", "blah", "blah", "blah", "blah", "blah", "blah"

"Yet another section"
"And", "this", "is", "yet", "another"
"blah", "blah", "blah", "blah", "blah" 
```

我想把它分解成单独的组件。鉴于我知道每个部分的标题，如果我可以做某种`groupBy`或某事，我可以传递一组表示标题模式的正则表达式并返回 a`Seq[Seq[String]]`或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:29:02.780

您可以执行以下操作：

```
val groups = List("\"First Part\"", "\"Another Part\"", "\"Yet another section\"")
val accumulator = List[List[String]]()
val result = input.split("\n").foldLeft(accumulator)((acc,e) => {
  if (groups.contains(e)) {
    // Make new group when we encounter a string matching one of the groups
    Nil :: acc
  } else {
    // Grab current group and modify it
    val newHead = e :: acc.head 
    newHead :: acc.tail 
  }
}) 
```

现在的每个列表`result`都代表一个组。如果您想使用正则表达式来查找匹配项，则只需将 替换`groups.contains(e)`为匹配测试。这里有一些微妙之处可能值得一提：

*   如果输入不是以标题开头，算法将失败
*   如果一个标题每次出现多次都会生成一个新组
*   组将反向包含输入中的行。
*   结果中也将包含空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:32:49.753

编辑这类似于同时发布的其他解决方案。可以对部分标题进行类似的操作，而不是我对 size==1 的快速破解。此解决方案具有包含部分名称的额外好处，因此排序无关紧要。

```
val file: List[String] = """

heading
1,2,3
4,5

heading2
5,6
""".split("\n").toList
val splitFile = file
  .map(_.split(",").toList)
  .filterNot(_ == List(""))
  .foldLeft(List[(String, List[List[String]])]()){
    case (h::t,l) => {if(l.size==1) (l(0),List()):: h :: t else (h._1, l :: h._2) :: t}; 
    case (Nil, l)=> if(l.size==1) List((l(0),List())) else List() }
  .reverse 
```

生产

```
 splitFile: List[(String, List[List[String]])] = List((heading,List(List(4, 5), List(1, 2, 3))), (heading2,List(List(5, 6)))) 
```

# c - C中不兼容的指针类型的赋值

> ID：15306655
> 
> 赞同：1
> 
> 时间：2013-03-09T03:01:50.817
> 
> 标签：c, linked-list

我不断收到“来自不兼容指针类型的分配”，但我不知道为什么。我认为它看起来不错。我只是想在 C 中做链表的基础知识。

```
typedef struct{
   int id;
   struct node *next;
} node;

node *root = NULL; // Sets up a root node when the program starts.

create nodes(int id){
   if(root == NULL){
      root = (node*)malloc(sizeof(node));
      root-> id = -1;
      node *nextNode;
      nextNode = (node*)malloc(sizeof(node));
      nextNode -> id = id;
      root-> next = nextNode; // This line is throwing an error.
   }
} 
```

我觉得这很简单，但我不能把手指放在它上面......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:08:24.253

您的结构实际上是一个*未命名的结构*typedef-d to `node`，但您试图`struct node`稍后引用它（这与您的`node`typedef 不同）。快速解决方法是简单地为结构命名：

```
typedef struct node {
   int id;
   struct node *next;
} node; 
```

或者，如果您愿意（这完全符合风格），请删除 typedef 并更正您对结构的其他引用：

```
struct node {
   int id;
   struct node *next;
};

struct node *root = NULL;

create nodes(int id){
   if(root == NULL){
      root = malloc(sizeof(struct node));
      root->id = -1;
      struct node *nextNode;
      nextNode = malloc(sizeof(struct node));
      nextNode->id = id;
      root->next = nextNode;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T03:36:07.547

这里有四点：

第一的。如果必须在结构的字段中包含指针，请添加 的名称`struct node`（如上面@JamesMcLaughlin 指出的那样）。例如：

typedef struct nodetag { int id; 结构节点标签*下一个；} 节点；

第二。确保您`create`按预期使用变量类型。我假设用户定义的变量类型`create`存在于您`#define`或其他地方。如果不是，这将导致编译器错误。即使你这样做了，这也不会编译，因为你没有s的`return`语句。`return``create`

第三。包含`node *root = NULL;`在您的功能`nodes`中。否则，函数`nodes`将无法识别变量`root`并导致编译器错误。

第四。在函数的开头声明局部变量。该行将`struct node *nextNode;`导致 C89 的[编译器错误，](https://stackoverflow.com/questions/8474100/where-you-can-and-cannot-declare-new-variables-in-c) 因为 C89 不允许在语句之后进行类型声明。然而，C99 允许这种做法。建议在函数开头声明所有局部变量以兼容 C89 和 C99。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T03:04:53.993

尝试这个

```
struct node{
   int id;
   struct node *next;
} ;

struct node *root = NULL; // Sets up a root node when the program starts.

/* Return type is missing in your code*/ create_nodes(int id){
   if(root == NULL){
      root = (struct node*)malloc(sizeof(struct node));
      root-> id = -1;
      struct node *nextNode;
      nextNode = (struct node*)malloc(sizeof(struct node));
      nextNode -> id = id;
      root-> next = nextNode; // This line is throwing an error.
   }
} 
```

# ios - iOS Reachability 无法捕捉连接到 WiFi 但未登录的情况

> ID：15306658
> 
> 赞同：3
> 
> 时间：2013-03-09T03:02:44.347
> 
> 标签：ios, reachability

今天，我公开了我的 Beta 版应用程序。我在一家酒店，还没有获得 WiFi 的访问代码。在测试可达性时，我注意到它并没有像它应该的那样失败。它已*连接*到 WiFi，但实际上什么都无法访问，因为我没有登录。这个用例*应该*包含在**reachabilityWithHostname**中。这是我的代码：

在 AppDelegate.h 中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate> {

    Reachability* hostReach;
    Reachability* internetReach;
    Reachability* wifiReach;
} 
```

在 AppDelegate.m 中：

```
 internetReach = [Reachability reachabilityForInternetConnection];
    [internetReach startNotifier];

    wifiReach = [Reachability reachabilityForLocalWiFi];
    [wifiReach startNotifier];

    hostReach = [Reachability reachabilityWithHostname: @"http://www.google.com"];
    [hostReach connectionRequired];
    [hostReach startNotifier]; 
```

在需要连接的模块中：

```
- (BOOL) isInternetReachable
{
    Reachability *currentReach = [Reachability reachabilityForInternetConnection];
    NetworkStatus netStatus = [currentReach currentReachabilityStatus];

    return (netStatus == ReachableViaWiFi || netStatus == ReachableViaWWAN);
} 
```

有谁知道如何涵盖这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T03:18:47.707

您使用的可达性错误。Apple 的文档非常糟糕，因此请忽略它。

**诀窍是在不**先咨询可达性的情况下尝试建立网络连接。NSURLConnection 将启动无线电并根据需要建立连接。当然，一定要处理错误。

当网络在离线后重新在线时，可达性仍然有用。如果您有事先无法发送/接收的信息，您可以在此时重试连接。

此外，您不应该在主线程上调用 Reachability。在质量差的网络上，尤其是丢包率高或 DNS 损坏的网络上，Reachability 会挂起您的应用程序超过 20 秒，系统会杀死您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T03:07:19.863

```
...
[Reachability reachabilityWithHostname: @"http://www.google.com"]
... 
```

[根据Apple 的文档](https://developer.apple.com/library/mac/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html#//apple_ref/c/func/SCNetworkReachabilityCreateWithName)，您应该使用主机名（不带`http://`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-20T12:22:06.983

我使用可达性来证明网络层。当它应该没问题时，我会尝试从我的服务器加载一个字节的文件来确定。性能还可以。

```
BOOL isOnline =  [[[RKClient sharedClient] reachabilityObserver] isReachabilityDetermined] != YES || [[RKClient sharedClient] isNetworkReachable];

    if(isOnline){
        NSData *data = [NSData dataWithContentsOfURL:[[URLManager sharedInstance]availabilityCheckURL]];

        NSString *strTemp = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
        isOnline = [strTemp isEqualToString:@"1"];
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:25:53.057

Reachability 示例使用[SystemConfiguration 的 Reachability API](https://developer.apple.com/library/ios/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)：

> 当应用程序发送到网络堆栈的数据包可以离开本地设备时，远程主机被认为是可达的。可达性并不能保证数据包会真正被主机接收。

它可能会做两件事：

*   （重复？）将主机名解析为 IP 地址。
*   观察路由表并在该 IP 的“可达性”发生变化时发送回调。

对于[强制门户](http://en.wikipedia.org/wiki/Captive_portal)（又名 Wi-Fi 登录页面），`http://www.example.com`必须在您的网络浏览器中显示为将您重定向到登录页面的站点；这意味着`www.example.com` *必须解析*（无论是否为其实际 IP），并且该 IP 必须有一个站点才能将您重定向到登录页面。

可达性主要用于检测飞行模式或与 Wi-Fi 断开连接等情况。

# sorting - 负整数的基数排序

> ID：15306665
> 
> 赞同：20
> 
> 时间：2013-03-09T03:04:28.470
> 
> 标签：sorting, language-agnostic, radix-sort, radix

我正在尝试为整数（包括负整数）实现基数排序。对于非负整数，我计划为数字 0-9 创建一个包含 10 个队列的队列，并实现 LSD 算法。但我有点对负整数感到困惑。我现在在想的是，继续为它们创建另一个包含 10 个队列的队列并分别对它们进行排序，然后最后，我将给出 2 个列表，一个包含已排序的负整数，另一个包含非负整数。最后我会合并它们。

你怎么看待这件事？有没有更有效的方法来处理负整数？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-09T03:10:31.973

您可以将符号视为一种特殊的数字。您将一堆堆放在单位上，然后是十位，等等，最后在标志上。这确实会为否定产生相反的顺序，然后您只需反转该存储桶的内容即可。这就是老式机械卡片分拣机的工作方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T19:25:00.533

另一种解决方案是将负整数从数组中分离出来，使其为正数，使用基数排序为正值，然后将其反转并附加已排序的非负数组。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-25T03:40:54.457

请注意，符号位是有符号整数中的最高位，但默认情况下，所有数字都被基数排序视为无符号整数。所以你需要告诉算法负数小于正数。对于 32 位有符号整数，您可以先对三个低字节进行排序，然后对第四个（高）字节进行排序，并将符号位反转，这样 0 将用于负数而不是 1，因此它们将首先出现。

我强烈建议按字节对数字进行排序，而不是按十进制数字排序，因为机器获取字节比提取数字容易得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-24T04:15:37.280

接受的答案需要多过一次。

**只需翻转符号位。**

这假设您正在使用二进制补码表示，这对我们 99% 的人来说都是正确的。

下表演示了简单地翻转符号位将导致二进制补码整数在按字典顺序排序时正确排序。

第一列给出了一个 4 位二进制值，第二列给出了这些位作为有符号整数的解释，第三列给出了高位翻转后的这些位的解释。

```
Binary    | 2s-comp  | Flip sign
----------+----------+----------
0000      | 00       | -8
0001      | +1       | -7
0010      | +2       | -6
0011      | +3       | -5
0100      | +4       | -4
0101      | +5       | -3
0110      | +6       | -2
0111      | +7       | -1
1000      | -8       | 00
1001      | -7       | +1
1010      | -6       | +2
1011      | -5       | +3
1100      | -4       | +4
1101      | -3       | +5
1110      | -2       | +6
1111      | -1       | +7 
```

punpcklbw 给出的答案建议仅在查看最高字节时翻转该位，但每次都简单地翻转符号位会更快。那是因为翻转位的单个 xor 将比分支更快地决定是否应该翻转。

[需要提及的一个重要细节，一些教科书未能正确解决，即真正的实现应该使用基数 256 而不是基数 10。这允许您读取字节而不是十进制数字。]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-17T04:06:07.980

绝对地！当然，您确实必须注意将负面因素与正面因素分开，但幸运的是这很容易。在排序算法开始时，您所要做的就是围绕值 0 对数组进行分区。之后，在分区的下方和上方进行基数排序。

这是实践中的算法。我从 Kevin Wayne 和 Bob Sedgewick 的 MSD 基数排序中得出这个：http: [//algs4.cs.princeton.edu/51radix/MSD.java.html](http://algs4.cs.princeton.edu/51radix/MSD.java.html)

```
private static final int CUTOFF = 15;
private static final int BITS_PER_INT = 32;
private static final int BITS_PER_BYTE = 8;
private static final int R = 256;

public void sort(int[] a){
    int firstPositiveIndex = partition(0, a, 0, a.length-1);
    int[] aux =new int[a.length];
    if(firstPositiveIndex>0){
        recSort(a, firstPositiveIndex, a.length-1, 0,aux);
        recSort(a, 0, firstPositiveIndex-1, 0,aux);
    }else{//all positive
        recSort(a, 0, a.length-1, 0, aux);
    }
}

private void recSort(int[] a, int lo, int hi, int d, int[] aux){
    if(d>4)return;
    if(hi-lo<CUTOFF){
        insertionSort(a,lo, hi);
        return;
    }

    int[] count = new int[R+1];

    //compute counts
    int bitsToShift = BITS_PER_INT-BITS_PER_BYTE*d-BITS_PER_BYTE;
    int mask = 0b1111_1111;
    for(int i = lo; i<=hi; i++){
        int c = (a[i]>>bitsToShift) & mask;
        count[c+1]++;
    }

    //compute indices
    for(int i = 0; i<R; i++){
        count[i+1]=count[i]+count[i+1];
    }

    //distribute
    for(int i = lo; i<=hi; i++){
        int c = (a[i]>>bitsToShift) & mask;
        aux[count[c]+lo] = a[i];
        count[c]++;
    }
    //copy back
    for(int i = lo; i<=hi; i++){
        a[i]=aux[i];
    }

    if(count[0]>0)
        recSort(a, lo, lo+count[0]-1, d+1, aux);
    for(int i = 1; i<R; i++){
        if(count[i]>0)
            recSort(a, lo+count[i-1], lo+count[i]-1, d+1, aux);
    }
}

// insertion sort a[lo..hi], starting at dth character
private void insertionSort(int[] a, int lo, int hi) {
    for (int i = lo; i <= hi; i++)
        for (int j = i; j > lo && a[j] < a[j-1]; j--)
            swap(a, j, j-1);
}

//returns the index of the partition or to the right of where it should be if the pivot is not in the array 
public int partition(int pivot, int[] a, int lo, int hi){
    int curLo = lo;
    int curHi = hi;
    while(curLo<curHi){
        while(a[curLo]<pivot){
            if((curLo+1)>hi)return hi+1;
            curLo++;
        }

        while(a[curHi]>pivot){
            if((curHi-1)<lo)return lo-1;
            curHi--;
        }
        if(curLo<curHi){
            swap(a, curLo, curHi);
            if(a[curLo]!=pivot)curLo++;
            if(a[curHi]!=pivot)curHi--;             
        }
    }
    return curLo;
}

private void swap(int[] a, int i1, int i2){
    int t = a[i1];
    a[i1]=a[i2];
    a[i2]=t;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-23T17:00:32.690

处理有符号值的最简单方法可能是在对最高有效位进行操作时偏移累加的起始位置（即位置偏移的生成）。转换输入以使所有数字都可以被视为无符号也是一种选择，但需要对值数组至少应用两次操作（一次用于准备输入，再次用于恢复输出）。

这使用第一种技术以及*字节大小的*数字（字节访问通常更有效）：

```
void lsdradixsort(int* a, size_t n)
{
    // isolate integer byte by index.
    auto bmask = [](int x, size_t i)
    {
        return (static_cast<unsigned int>(x) >> i*8) & 0xFF;
    };

    // allocate temporary buffer.
    auto m = std::make_unique<int[]>(n);
    int* b = m.get();

    // for each byte in integer (assuming 4-byte int).
    for ( size_t i, j = 0; j < 4; j++ ) {
        // initialize counter to zero;
        size_t h[256] = {}, start;

        // histogram.
        // count each occurrence of indexed-byte value.
        for ( i = 0; i < n; i++ )
            h[bmask(a[i], j)]++;

        // accumulate.
        // generate positional offsets. adjust starting point
        // if most significant digit.
        start = (j != 3) ? 0 : 128;
        for ( i = 1+start; i < 256+start; i++ )
            h[i % 256] += h[(i-1) % 256];

        // distribute.
        // stable reordering of elements. backward to avoid shifting
        // the counter array.
        for ( i = n; i > 0; i-- )
            b[--h[bmask(a[i-1], j)]] = a[i-1];
        std::swap(a, b);
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-07T08:16:48.780

如果您不使用“bitshift”和“bitwise AND”进行基数计算，您的基数排序不会比著名的比较排序快。

计算机使用 2 的补码来表示有符号数，这里符号位位于二进制数字的最左端，在内存表示中

例如
436163157（作为 32 位数）= **0** 0011001 11111111 01010010 01010101
-436163157（作为 32 位数）= **1** 1100110 00000000 10101101 10101011

1（作为 32 位数）= **0** 0000000 00000000 00000000 00000001
-1（作为 32 位数）= **1** 1111111 1111111 1111111 11111111

0 表示为 = **0** 0000000 00000000 00000000 00000000
最大负值 = **1** 0000000 00000000 00000000 00000000

所以你看，一个数越是负数，它就会失去很多1，一个小的负数有很多1，如果你只将符号位设置为0，它就会变成一个非常大的正数。反之亦然，一个小的正数变成一个大的负数。

在基数排序中，对负数进行排序的关键是如何处理最后 8 位，对于负数，至少最后一位必须为 1，在 32 位方案中，它必须从
**1** 0000000 00000000 00000000 00000000 开始，这是最从零到**1**最远的负值1111111 11111111 11111111 11111111 即 -1。如果你看最左边的 8 位，幅度范围从 10000000 到 11111111，即从 128 到 255。

这些值可以通过这段代码获得

```
V = ( A[i] >> 24 ) & 255 
```

对于负数，V 总是从 128 到 255。对于正数，它将从 0 到 127。如前所述，对于 -1，M 的值为 255，对于 32 位方案中的最大负数，M 的值为 128。像往常一样建立你的直方图。然后从索引 128 到 255 进行累积和，然后将 255 的频率添加到 0，然后从 0 到索引 127 进行累积和。像往常一样执行排序。这种技术在理论上和实践中都是最优的、快速的、优雅的和整洁的。排序后不需要任何类型的单独列表，也不需要反转顺序，也不需要将所有输入转换为正数，这会使排序缓慢而混乱。

有关代码，请参阅[基数排序优化](https://stackoverflow.com/questions/43701076/radix-sort-optimization)
64 位版本可以使用相同的概念构建

进一步阅读：
[http ://codercorner.com/RadixSortRevisited.htm](http://codercorner.com/RadixSortRevisited.htm)
[http://stereopsis.com/radix.html](http://stereopsis.com/radix.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-11T04:23:37.507

这可以在不需要分区或实际上反转 MSB 的情况下完成。这是Java中的一个有效解决方案：

```
public class RadixSortsInterviewQuestions {
    private static final int MSB = 64;

    static Map.Entry<Integer, Integer> twoSum(long[] a, long sum) {
        int n = a.length - 1;
        sort(a, MSB, 0, n);

        for (int i = 0, j = n; i < j; ) {
            long t = a[i] + a[j];
            if (t == sum) {
                return new SimpleImmutableEntry<>(i, j);
            } else if (t < sum) {
                i++;
            } else {
                j--;
            }
        }
        return null;
    }

    // Binary MSD radix sort: https://en.wikipedia.org/wiki/Radix_sort#In-place_MSD_radix_sort_implementations
    private static void sort(long[] a, int d, int lo, int hi) {
        if (hi < lo || d < 1) return;

        int left = lo - 1;
        int right = hi + 1;

        for (int i = left + 1; i < right; ) {
            if (isBitSet(a[i], d)) {
                swap(a, i, --right);
            } else {
                left++;
                i++;
            }
        }
        sort(a, d - 1, lo, left);
        sort(a, d - 1, right, hi);
    }

    private static boolean isBitSet(long x, int k) {
        boolean set = (x & 1L << (k - 1)) != 0;

        // invert signed bit so that all positive integers come after negative ones
        return (k == MSB) != set;
    }

    private static void swap(long[] a, int i, int j) {
        long tmp = a[i];
        a[i] = a[j];
        a[j] = tmp;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-15T13:16:59.127

这里提出的所有解决方案都意味着性能损失：

*   在分组阶段通过 (a[i] XOR 0x8000000000000000) 翻转最高位；
*   将符号位视为基数并使用额外的通道，按其排序；
*   将负数与数组分开；
*   使用特殊的位掩码等。

你不需要它们。使用常规基数排序。在最后一次迭代中，您将数组项分成 0..255 个组。示例项目：1 50 200 -500 -300 -2 -1

唯一需要调整的是我们如何将这些组复制回原始数组。我们应该开始复制签名的 128..255 组（实际上是 -128..-1），然后是 0..127。

结果：-500 -300 -2 -1 1 50 200

在 PHP 7.4 中测试。常规基数排序实现比 QuickSort 快 2-2.5 倍。添加额外的异或运算会使结果减慢到 1.7-1.8 倍。使用上述方法完全没有性能损失。

编码：

```
 function sortRadix (array &$arr) {
  static $groups;
  isset($groups) or $groups = [];

  $numRadix = 8;
  $arrSize  = count($arr);
  $shift    = 0;

  for ($i = 0; $i < $numRadix; $i++) {
    // Cleaning groups
    for ($j = 0; $j < 256; $j++) { 
      $groups[$j] = [];
    }

    // Splitting items into radix groups
    for ($j = 0; $j < $arrSize; $j++) {
      $currItem = $arr[$j];
      $groups[(($currItem >> $shift) & 0xFF)][] = $currItem;
    }

    // Copying sorted by radix items back into original array
    $arrPos = 0;

    // Treat the last radix with sign bit specially
    // Output signed groups (128..256 = -128..-1) first
    // Other groups afterwards. No performance penalty, as compared to flipping sign bit
    // via (($currItem ^ 0x8000000000000000) >> $shift) & 0xFF)
    if ($i === 7) {
      for ($j = 128; $j < 256; $j++) { 
        foreach ($groups[$j] as $item) {
          $arr[$arrPos++] = $item;
        }
      }

      for ($j = 0; $j < 128; $j++) { 
        foreach ($groups[$j] as $item) {
          $arr[$arrPos++] = $item;
        }
      }
    } else {
      foreach ($groups as $group) {
        foreach ($group as $item) {
          $arr[$arrPos++] = $item;
        }
      }
    }

    // Change shift value for next iterations
    $shift += 8;
  } // .for
} // .function sortRadix 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-05T18:34:41.463

您还可以对最高有效字节（包含有符号位）以不同方式解释直方图 (count[])。这是C中的解决方案：

```
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

static void sortbno(const int32_t* tab, // table of entries
                    int tabsz,    // #entries in tab
                    int bno,      // byte number in T
                    int* inidx,   // current sorted index before this byte
                    int* outidx)  // indices after sorting this byte
{
    int count[256];
    memset(count, 0, sizeof(count));

    // count occurrences of each byte value
    for (int i = 0; i < tabsz; i++) {
        int32_t x = tab[i];
        int v = (x >> (8 * bno)) & 0xff;
        count[v]++;
    }

    // change count[i] so it now reflects the actual
    // position of this byte value in outidx
    if (bno == sizeof(tab[0]) - 1) {
        /* account for signed bit for most-significant-byte */
        for (int i = 129; i < 256; i++) {
            count[i] += count[i - 1];
        }
        count[0] += count[255];
        for (int i = 1; i < 128; i++) {
            count[i] += count[i - 1];
        }
    } else {
        for (int i = 1; i < 256; i++) {
            count[i] += count[i - 1];
        }
    }

    // fill outidx[]
    for (int i = tabsz - 1; i >= 0; i--) {
        int in = inidx[i];
        int32_t x = tab[in];
        int v = (x >> (8 * bno)) & 0xff;
        outidx[--count[v]] = in;
    }
}

/**
 *  Sort tab[].
 *  Return the indices into tab[] in ascending order.
 */
int* rsort(const int32_t* tab, int tabsz)
{
    int* r[2];

    r[0] = malloc(tabsz * sizeof(*r[0]));
    r[1] = malloc(tabsz * sizeof(*r[1]));
    if (! (r[0] && r[1]))
        goto bail;

    // Artificially assign indices to items
    for (int i = 0; i < tabsz; i++) {
        r[0][i] = i;
    }

    // Sort byte by byte. byte #0 is x & 0xff.
    int bin = 0;
    for (int i = 0; i < (int)sizeof(tab[0]); i++) {
        sortbno(tab, tabsz, i, r[bin], r[1-bin]);
        bin = !bin;
    }

    free(r[1-bin]);
    return r[bin];

    bail:
    if (r[0]) free(r[0]);
    if (r[1]) free(r[1]);
    return 0;
} 
```

# session - 门户应用程序中的会话标识符

> ID：15306672
> 
> 赞同：0
> 
> 时间：2013-03-09T03:05:03.067
> 
> 标签：session, portlet, portal, websphere-portal, jsr286

我正在构建几个 Portlet 以部署在 WebSphere Portal Server 上，每个 Portlet 都部署在它自己的 WAR 中。现在，我需要跟踪用户在登录门户时访问的每个 Portlet。我试图使用以下方法从 Portlet 获取会话标识符：

```
HttpServletRequest servletRequest = PortletUtils.getHttpServletRequest(request);
String sessionId = servletRequest.getSession().getId(); 
```

但是在我登录后，我`sessionId`从我访问的每个 Portlet/WAR 中获得了不同的值。我想这是有道理的，因为每个 WAR 都有一个会话范围。

那么，我如何获得门户会话（而不是 Portlet 会话）的标识符？我看到`JSESSIONID`每个 HTTP 请求中的 cookie 都是相同的，但我不确定它是否通过 Servlet 或 Portlet API 公开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:11:31.397

未登录门户的用户没有这样的会话。您可以通过启用公共会话让 Portal 跟踪匿名用户的会话信息。

[http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation#action=openDocument&res_title=Portal_configuration_services_wp7&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+7+Product+Documentation#action=openDocument&res_title=Portal_configuration_services_wp7&content=pdcontent)

在导航器服务下查找要更改的属性。

另外，我认为这可能更容易在主题或 portlet 过滤器中完成。您应该仍然可以在其中任何一个地方访问 Portal 会话，但您不需要在每个 portlet 中都包含代码。

这是用于创建全局 portlet 过滤器的链接。

[http://wpcertification.blogspot.com/2010/11/applying-global-filter-to-all-portlets.html](http://wpcertification.blogspot.com/2010/11/applying-global-filter-to-all-portlets.html)

更新：像任何大型框架一样，有很多选择。我将提供一个我能想到/找到的大脑转储。您可能需要进行试验，看看您更喜欢哪种方法。

在整个会话期间，用户的 JSESSIONID cookie 应该相同。如果会话过期，他们将获得一个新的 JSESSIONID cookie。使用它，您将能够通过单个会话跟踪用户，但可能无法跨多个会话。

您可以考虑使用`getUserPrinipal()`或`getRemoteUser()`关闭 PortletRequest 对象。我已经有一段时间没有使用这些方法了，所以你必须看看它们会产生什么信息。

还有`request.getAttribute(PortletRequest.USER_INFO)`. 您必须在 portlet.xml 中进行一些配置，以使某些属性在返回的 Map 中可用。[这里](http://wpcertification.blogspot.com/2009/03/accessing-user-information-from-jsr-168.html)有一个例子。我们使用 ibm-primaryEmail 而不是我当前项目中的示例中的名字和姓氏。

最后，您可以考虑使用 Portal 中内置的 PUMA API。它在编码上会有点重，并且显然更特定于容器，但应该能够完成您需要的与用户相关的任何工作。

# plot - 在 Mathematica 中用不同颜色绘制表格的不同条目

> ID：15306675
> 
> 赞同：0
> 
> 时间：2013-03-09T03:05:15.313
> 
> 标签：plot, colors, wolfram-mathematica

在 Mathematica 中，我有一个表格，其中表格的每个条目都是 3 维曲线。我想为不同的曲线分配不同的颜色，但我不知道该怎么做。

我当前的命令是：

```
Plot3D[
      Table[
            Max[Table[SocPlanGen[4,1,1,R,2,p,Min[4/(1+2 k/N),N], N], {k,0,N}]]
                ,{N, 1, 4}
           ]
      , {R,2,20}, {p, 0.1, 1}
      , PlotStyle -> ColorData[1, "ColorList"], PlotLegends -> {"4","3","2","1"}
      ] 
```

其中 SocPlanGen[.] 是我之前定义的函数。

外部 Table[.] 有 4 个条目 ({N,1,4})。外部 Table[.] 的每个条目都是在空间 (R,p) 中定义的曲线，我希望每条曲线都具有单独的颜色。但是按照我目前的方式，所有曲线都是相同的颜色，因为它们属于同一个表。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:39:46.527

图形函数具有 HoldAll 属性，这意味着参数集是根据第一个参数的未计算形式确定的。由于它的头部是 Table（而不是 List），因此分配了单一颜色。要更改默认行为，只需将 Plot3D 的第一个参数包含在 Evaluate[] 中

由于没有提供 SocPlanGen 的定义，我无法自己检查，但我很确定这是解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:13:52.327

您是否尝试过使用[ColorFunction](http://reference.wolfram.com/mathematica/ref/ColorFunction.html)选项？

与涉及表格的问题（和相应的解决方案）类似的最佳示例似乎在此处实现（使用 ColorFunction 和用户**belisarius**的另一种方法）：

[https://mathematica.stackexchange.com/questions/16963/how-do-i-identify-each-surface-in-a-multi-surface-plot3d](https://mathematica.stackexchange.com/questions/16963/how-do-i-identify-each-surface-in-a-multi-surface-plot3d)

# html - 为什么变换元素的透视图出现倒退？

> ID：15306679
> 
> 赞同：7
> 
> 时间：2013-03-09T03:06:27.357
> 
> 标签：html, css, css-transforms

我[这里](http://jsfiddle.net/vmnja/)有一个小提琴你可以玩。移动 rotateX 和 rotateY 滑块以查看。元素中离你最近的部分较小，而离你较远的部分则较大。如果你翻转它使用

```
transform:rotateZ(180deg); 
```

它看起来不错，但我不明白为什么它一开始看起来不正确。

![在此处输入图像描述](../Images/1873eb30cb0071614ca73ffd6c2d5f3f.png)

**更新**

[如果你看一下这个 3d 立方体](http://jsfiddle.net/dLKsd/)，它是有道理的。*立方体的变换原点是立方体的中间。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:33:06.613

# 等距

据我所知，这些方法按预期工作，只是它们在等距 3D 中旋转，即没有透视。这将使您最近和更远的边缘具有相同的大小，这与真实 3D 不同，后者的更远边缘看起来更小，而更近的边缘看起来更大。

要深入了解等距投影，请阅读[维基百科文章](http://en.wikipedia.org/wiki/Isometric_projection)。

# 看法

如果您想了解旋转，您必须将`perspective`属性添加到包含元素的 CSS 中。如果您在第一个小提琴中添加`-webkit-perspective: 1000px;`并`<body>`在 Chrome 中查看结果，您将获得您可能想要的透视 3D。

有关该属性的更多信息可以在[CSS3 转换规范](http://www.w3.org/TR/css3-transforms/#perspective-property)中找到。

# php - PhP：使用匹配键合并数组并删除/删除额外的不匹配值

> ID：15306680
> 
> 赞同：2
> 
> 时间：2013-03-09T03:06:27.423
> 
> 标签：php, arrays, merge, key, key-value

我想根据它们的键合并这两个数组，并且只保留键匹配。合并后的数组应保留键，值应来自第二个数组。

**数组 #1：我访问过的州**

```
Array
(
    [AL] => 113
    [AZ] => 83
    [CA] => 50
    [CO] => 1
... 
```

**数组 #2：所有状态**

```
Array
(
    [AL] => ALABAMA
    [AK] => ALASKA
    [AZ] => ARIZONA
    [AR] => ARKANSAS
    [CA] => CALIFORNIA
    [CO] => COLORADO
    [CT] => CONNECTICUT
... 
```

所以，如果我去过一个州，我想从数组 2 中获取该州的名称。并从数组 #2 中抛出任何不匹配的节点。

**期望的结果**

```
Array
(
    [AL] => ALABAMA
    [AZ] => ARIZONA
    [CA] => CALIFORNIA
    [CO] => COLORADO
... 
```

我在 PHP 手册和 StackOverflow 上进行了广泛的研究，但找不到特定的答案。我认为它可能存在于一个比我目前能力更复杂的用户定义函数中。

`array_merge()`几乎做了我想要的，但随后它将我没有访问过的状态添加到数组的末尾

`array_intersect_key()`也接近了。它只保留匹配的键，但随后会删除值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:12:06.273

在我编写更好的解决方案时，请享受这个效率较低的示例。[http://codepad.org/hIjPEM81](http://codepad.org/hIjPEM81)

**低效解决方案1：**

```
<?php
$allstates=array("MO"=>"Missouri", "TX"=>"Texas");
$statesIveBeenTo = array("MO"=>1);
foreach($allstates as $k=>$v){
  if(!array_key_exists($k,$statesIveBeenTo)){
    unset($allstates[$k]);
  }
}

var_dump($allstates); 
```

**输出：**

```
array(1) {
  ["MO"]=>
  string(8) "Missouri"
} 
```

**解决方案2：**

```
$test = array_intersect_key($allstates, $statesIveBeenTo);
var_dump($test); 
```

与上面相同的输出。

# haskell - Haskell IO 示例

> ID：15306681
> 
> 赞同：4
> 
> 时间：2013-03-09T03:07:07.327
> 
> 标签：haskell, io, monads

[我在他们的wiki](http://www.haskell.org/haskellwiki/IO_inside)上阅读了Haskell中IO monad的更深层次的工作， 我遇到了这段代码

```
main = do a <- ask "What is your name?"
      b <- ask "How old are you?"
      return ()
ask s = do putStr s
       readLn 
```

这对我来说很有意义。ask 函数应该打印出给它的字符串并返回可以传递给 a 或 b 的行。

但是将其加载到 GHCi 中我遇到了问题。告诉我没有使用 ask 读取的实例，并且我可以导入 GHC.Read。那不应该是必要的。这段代码在 Haskell.org 上，所以我认为它应该可以工作。语言中的某些内容是否发生了变化，或者我是否缺少一些重要的理解？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T03:28:24.153

如果您只使用 ask 函数（没有有问题的 main）创建一个文件并将其加载到 ghci，您将能够看到 ask 的类型是

```
ask :: (Read a) => String -> IO a 
```

意味着它在返回类型中是多态的。

问题是当你这样做时

```
a <- ask "What is your name" 
```

编译器需要知道什么是类型，`a`以便它可以为您从输入中读取的行使用正确的反序列化函数。但是`a`没有在其他任何地方使用，也没有类型签名，因此类型推断无法推断`a`. 编译器放弃并为您提供“歧义类型”消息。

有两种主要方法可以解决此问题：

1.  使 ask 函数始终返回相同的类型。您可以通过添加特定签名来执行此操作

    ```
    ask :: String -> IO String 
    ```

    或者通过将 更改`readLn`为类似`getLine`.

2.  在使用多态函数的地方添加类型签名。您可以向 ask 调用本身添加类型签名：

    ```
    a <- ask "What is your name" :: IO String 
    ```

    或者您可以直接将其添加到变量中

    ```
    (a :: String) <- ask "What is your name" 
    ```

    但是，默认的 Haskell 语法不允许第二个选项。您需要通过将以下注释添加为文件的第一行来启用 ScopedTypeVariables 扩展

    ```
    {-# LANGUAGE ScopedTypeVariables #-} 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T03:21:49.590

我对代码做了两次更改。

1.  修复缩进——记住haskell是“空间敏感的”，所以请确保代码看起来正确对齐
2.  显式类型签名。这有点棘手。但是根据经验，当您期望的代码不起作用时。尝试使用类型注释您的代码，如下所示。你会明白为什么会这样。

这是修改后的代码：

```
main = do
  a <- askString "What is your name?"
  b <- askOther "How old are you?"

  putStrLn ""
  putStrLn "Name and age"
  putStrLn (a :: String)
  print (b :: Int)
  return ()

askString s = do
  putStrLn s
  getLine

askOther s = do
  putStrLn s
  readLn 
```

编辑：对不起，代码现在实际编译。同样，随着您的 haskell 成熟，您会明白为什么 askString 和 askOther 看起来确实不同。这是一个示例运行：

```
$ runghc Hello.hs
What is your name?
Arash
How old are you?
22

Name and age
Arash
22 
```

# php - 使用 git 的 Web 开发工作流程

> ID：15306684
> 
> 赞同：11
> 
> 时间：2013-03-09T03:07:43.390
> 
> 标签：php, javascript, git, css, project-management

我正在管理一个由 4 名开发人员组成的团队。我们在 PHP / MySQL 后端开发基于 CMS 的网站。

我想改进工作流程。我想要的是：

![在此处输入图像描述](../Images/35384646f73e446e022d0759409932b4.png)

*   是否有任何托管 git repo 并自动与服务器同步的服务？
*   生产服务器将是主分支
*   测试服务器将是一个不同的分支
*   我们处理许多小型站点和一些大型站点，因此我们需要快速敏捷的工作流程
*   数据库呢？哈哈

（如果有人想添加到图表 PSD 文件，可以在这里找到：[workflow.psd](http://andrewmclagan.com.au/workflow.psd)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:19:39.970

如果您想要快速轻松地设置某些东西，我强烈建议您使用[Beanstalk 。](http://beanstalkapp.com)它很好地处理部署。如果您正在考虑自己做更多事情（设置挂钩等），那么另一个选择是[github](http://github.com)。

请不要使用 Master 作为您的生产分支，master 永远不应该是生产分支。更好的工作流程是拥有一个暂存、开发和生产分支/环境。请参阅Beanstalk 指南上的分支指南，它非常有见地[。](http://guides.beanstalkapp.com/version-control/branching-best-practices.html)

至于跟踪数据库，如果您的框架/cms 不支持数据库迁移，我强烈建议在内部开发某种形式的迁移/数据库版本控制。您还可以查看像[FuelPHP](http://fuelphp.com/)这样的框架，它内置了迁移功能。我在四处寻找时发现了一个不错的小型数据库版本控制系统：[dbv.php](http://dbv.vizuina.com/)。

# c# - 如何使用 C# 更改 XML 文件中元素内的数据？

> ID：15306690
> 
> 赞同：0
> 
> 时间：2013-03-09T03:09:20.680
> 
> 标签：c#, asp.net, .net, xml

我对 C# ASP.NET 中的 XML 文件有点陌生。我有以下格式的 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Installation>
  <ServerIP>192.168.20.110</ServerIP>
  <DB_Name>USTCKT1</DB_Name>
  <Username>jorame</Username>
  <Password>Cru$%e20</Password>
  <Table_PreFix>TCK</Table_PreFix>
</Installation> 
```

我需要更改每个元素中的值。例如，当用户单击时，我应该能够将 192.168.20.110 替换为 192.168.1.12。

我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:22:02.197

您可以使用 XDocument 类执行以下操作：

```
XDocument doc = XDocument.Load(file.xml);
doc.Element("Installation").Element("ServerIP").Value = "192.168.1.12";
//Update the rest of the elements
doc.Save(file.xml); 
```

[更多细节](http://msdn.microsoft.com/en-us/library/bb387052.aspx)

如果在选择元素时遇到命名空间问题，则需要在 XElement 选择器中包含 xml 命名空间，例如`doc.Element(namspace + "Installation")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:22:03.720

您应该查看使用 XDocument 类中的方法。[http://msdn.microsoft.com/en-us/library/bb301598.aspx](http://msdn.microsoft.com/en-us/library/bb301598.aspx)

具体看一下方法：Load(string) - 加载 XML 文件，Element() - 访问特定元素和 Save(string) - 保存 XML 文档。Element() 上的页面有一些可以提供帮助的示例代码。 [http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:07:15.473

一般来说，您可以通过以下步骤进行操作：

1.  创建一个新的 XmlDocument 对象并加载内容。内容可能是文件或字符串。
2.  找到要修改的元素。如果你的xml文件的结构太复杂，你可以使用[xpath](http://www.w3schools.com/xpath/default.asp)找到你想要的。
3.  将您的修改应用于该元素。
4.  更新您的 xml 文件。

这是一个简单的演示：

```
 XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.Load("file.xml"); // use LoadXml(string xml) to load xml string
    string path = "/Installation/ServerIP";
    XmlNode node = xmlDoc.SelectSingleNode(path); // use xpath to find a node
    node.InnerText = "192.168.1.12"; // update node, replace the inner text
    xmlDoc.Save("file.xml"); // save updated content 
```

希望它有帮助。

# c - 为什么这个程序会出现运行时错误？

> ID：15306691
> 
> 赞同：-1
> 
> 时间：2013-03-09T03:09:49.747
> 
> 标签：c, file, io, stack

```
#define String char*
#define FileP FILE*
#define null ((void*) 0)
#include "defs.h"

int main(int argc, char** argv) {

    Stack stack;
    init(&stack);

    FileP file = readp("Props.props");

    if (file == null){
        printf("Unable to Load\n");
        exit(1);
    }

    String buffer;
    int m = 0;
    char ch;

    while (!feof(file)) {
        ch = getc(file);
        if (ch != ' ') {
            *(buffer + (m++)) = ch;
        } else {
            push(&stack, buffer);
            m = 0;
        }
    }

    int i;

    for (i = 0; i < MAX_SIZE; i++) {
        printf("%s\n", pop(&stack));
    }

     fclose(file);

     return 0;

} 
```

defs.h 包含所有#defines，但我将它们包含在此处以便您知道它们是什么。该程序打开一个名为“props.props”的文本文件并读取每个字符串，然后将它们存储到堆栈中，最后将堆栈打印出来。运行时没有任何反应，只是由于运行时错误而退出。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:14:02.250

`buffer`未初始化。您需要分配内存

```
buffer = (char*) malloc(n * sizeof (char)); 
```

其中 n 是您需要存储的字符数。此外，该文件似乎没有在任何地方打开（`fopen`）。是什么`readp`？

# c++ - 通过非静态成员而不进行外部设置

> ID：15306694
> 
> 赞同：0
> 
> 时间：2013-03-09T03:10:37.990
> 
> 标签：c++, winapi, static-members

我有两个类定义为：

```
class Control
{
    private:
        std::vector<int> Info;

    public:
        Control(..);
        virtual ~Control();
        LRESULT __stdcall SubClass(HWND Window, UINT Msg, WPARAM wParam, LPARAM lParam, UINT_PTR uIdSubclass, DWORD_PTR dwRefData);
};

class Button: public Control
{
    //...
};

Control::Control(..)
{
    SetWindowSubclass(..., SubClass, ...); //Need to pass member function as callback..
}

LRESULT __stdcall Control::SubClass(HWND Window, UINT Msg, WPARAM wParam, LPARAM lParam, UINT_PTR uIdSubclass, DWORD_PTR dwRefData)
{
    //Use "Info" data member in here.. thus I cannot have static callback in order to use it.
} 
```

所以我想出了：

```
class Control
{
    private:
        std::vector<int> Info;
        static LRESULT __stdcall SetCallback(void* ThisPtr) {return static_cast<Control*>(ThisPtr)->SubClass;};

    public:
        //all the same stuff..
};

Control::Control(..)
{
    SetWindowSubclass(..., SetCallback, ...);
} 
```

但是上面会引发一大堆错误。无论如何，要么让我的静态回调访问其他数据成员，要么让我的回调非静态？我不想为创建的每个实例（我在整个互联网上都视为建议）执行以下操作：

```
Control F;
F.SetCallback(&F::SubClass, &F); //Externally sets member as callback which I don't want. 
```

我试图将所有内容保留在构造函数或类本身中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:34:02.723

这可能是 Win32 API UI 编程中最常见的问题。看：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff381400(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381400(v=vs.85).aspx)

**基本上，诀窍是使用 GWLP_USERDATA 作为第一个参数和this**作为第二个参数调用 SetWindowLongPtr 。然后在 WindowProc 回调中使用 GetWindowLongPtr 从 HWND 获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:20:16.023

下面展示了如何将独立消息处理函数的调用传递给 C++ 对象的成员函数。

这是很多代码，但通常你会在一些可重用的模块中抽象出来，最基本的东西就是小类**`gui::api_level::window_subclasser_t`**。

我没有展示太多的错误处理，而且这段代码也不支持通过外部对 C++ 对象进行编程销毁`delete`（我认为这样做的明智方法是仅`DestroyWindow`使用 API 级别窗口并让它传播到自毁） C++ 对象，但距离我上次这样做已经有很多年了）。

```
#undef  UNICODE
#define UNICODE
#undef  NOMINMAX
#define NOMINMAX
#undef  STRICT
#define STRICT
#undef  WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
//#include <windowsx.h>
#include <commctrl.h>   // SetWindowSubclass

#include <assert.h>     // assert
#include <stdexcept>    // std::exception, std::runtime_error
#include <stdlib.h>     // EXIT_SUCCESS, EXIT_FAILURE
#include <string>       // std::string

#ifndef IS_DELETED
#   define  IS_DELETED      = delete            // C++11
#endif

namespace cpp {
    using namespace std;

    bool hopefully( bool condition ) { return condition; }
    bool throw_x( string const& s ) { throw runtime_error( s ); }
}  // namespace cpp

namespace winapi {
    using cpp::hopefully;
    using cpp::throw_x;

    bool get( MSG& m )
    {
        int const code = ::GetMessage( &m, 0, 0, 0 );
        hopefully( code >= 0 )
            || throw_x( "winapi::get( MSG ): GetMessage failed" );
        return !!code;
    }
}  // namespace winapi

namespace gui {
    using cpp::hopefully;
    using cpp::throw_x;

    namespace api_level
    {
        class message_handler_t
        {
        public:
            virtual LRESULT window_proc( MSG const& message ) = 0;
        };

        LRESULT CALLBACK main_window_subclassproc(
            HWND const      window,
            UINT const      message_id,
            WPARAM const    w_param,
            LPARAM const    l_param,
            UINT_PTR const  subclass_id,
            DWORD_PTR const data
            )
        {
            (void) subclass_id; struct subclass_id;

            auto const p_handler = reinterpret_cast< message_handler_t* >( data );
            MSG const message = { window, message_id, w_param, l_param, DWORD(), POINT() };
            return p_handler->window_proc( message );
        }

        class window_subclasser_t
        {
        private:
            enum { subclass_id = 1 };

            HWND    window_handle_;

            window_subclasser_t( window_subclasser_t const& ) IS_DELETED;
            window_subclasser_t& operator=( window_subclasser_t const& ) IS_DELETED;

        public:
            HWND handle() const { return window_handle_; }

            LRESULT pass_to_superclass( MSG const& m )
            {
                return ::DefSubclassProc( m.hwnd, m.message, m.wParam, m.lParam );
            }

            ~window_subclasser_t()
            {
                ::RemoveWindowSubclass(
                    window_handle_,
                    &main_window_subclassproc,
                    subclass_id
                    )
                    || throw_x( "gui::api_level::window_subclass_t::<destroy>(): RemoveWindowSubclass failed" );
            }

            window_subclasser_t(
                HWND const          api_window,
                message_handler_t*  cpp_window
                )
                : window_handle_( api_window )
            {
                assert( cpp_window != 0 );
                ::SetWindowSubclass(
                    window_handle_,
                    main_window_subclassproc,
                    subclass_id,
                    reinterpret_cast<DWORD_PTR>( cpp_window )
                    )
                    || throw_x( "gui::api_level::window_subclass_t::<init>(): SetWindowSubclass failed" );
            }
        };

        ATOM create_main_window_class()
        {
            WNDCLASS params = {};
            params.hbrBackground = reinterpret_cast<HBRUSH>( COLOR_WINDOW + 1 );
            params.hCursor = ::LoadCursor( 0, IDC_ARROW );
            params.hIcon = ::LoadIcon( 0, IDI_APPLICATION );
            params.hInstance = ::GetModuleHandle( nullptr );
            params.lpfnWndProc = &::DefWindowProc;
            params.lpszClassName = L"MainWindow";
            ATOM const result = ::RegisterClass( &params );
            hopefully( result != 0 )
                || throw_x( "gui::api_level::create_main_window_class: RegisterClass failed" );
            return result;
        }

        ATOM main_window_class()
        {
            static ATOM const the_class = create_main_window_class();
            return the_class;
        }

        HWND create_main_window()
        {
            HWND const window = ::CreateWindow(
                MAKEINTATOM( main_window_class() ),
                L"My main window",
                WS_OVERLAPPEDWINDOW,
                CW_USEDEFAULT, CW_USEDEFAULT,
                400, 300,
                HWND(),             // Parent.
                HMENU(),            // Menu.
                ::GetModuleHandle( nullptr ),
                nullptr             // Param.
                );
            hopefully( window != 0 )
                || throw_x( "gui::api_level::create_main_window: CreateWindow failed" );
            return window;
        }
    }  // api_level

    class window_t
        : private api_level::message_handler_t
    {
    private:
        window_t( window_t const& ) IS_DELETED;
        window_t& operator=( window_t const& ) IS_DELETED;

        api_level::window_subclasser_t  subclasser_;

        virtual LRESULT window_proc( MSG const& m ) override
        {
            switch( m.message )
            {
            case WM_DESTROY:
                delete this;
                ::PostQuitMessage( 0 );
                return 0;
            default:
                return subclasser_.pass_to_superclass( m );
            }
        }

    protected:
        struct api_object_factory_t
        {
            virtual HWND create() const
            {
                return api_level::create_main_window();
            }
        };

        virtual ~window_t() {}

        window_t( api_object_factory_t const& factory )
            : subclasser_( factory.create(), this )
        {}

    public:
        HWND handle() const { return subclasser_.handle(); }
        void show() { ::ShowWindow( handle(), SW_SHOW ); }
    };
}  // namespage gui

// ---------------------------------------------------------------------------------------
//                               Usage:

class main_window_t
    : public gui::window_t
{
public:
    main_window_t()
        : gui::window_t( api_object_factory_t() )
    {}
};

void cpp_main()
{
    auto const main_window = new main_window_t();
    main_window->show();
    MSG msg;
    while( winapi::get( msg ) )
    {
        ::TranslateMessage( &msg );
        ::DispatchMessage( &msg );
    }
    assert( msg.message == WM_QUIT );
}

#include <iostream>
auto main() -> int
{
    using namespace std;

    try                         { cpp_main();  return EXIT_SUCCESS; }
    catch( exception const& x ) { wcerr << "!" << x.what() << endl; }

    return EXIT_FAILURE;
} 
```

* * *

要使用 Visual C++ 11.0 编译它，请将预处理器符号定义`IS_DELETED`为空。

# c - 系统调用如何与 linux 和除 C 之外的编程语言一起工作

> ID：15306696
> 
> 赞同：0
> 
> 时间：2013-03-09T03:10:53.433
> 
> 标签：c, linux, linux-kernel, system-calls

我了解系统调用如何在 C 和 Linux 中工作。我想知道每种编程语言是否都有自己独立的系统库来与内核通信。

> 如果是的话，每种编程语言都应该有自己的系统库来与内核一起工作吗？
> 
> 如果否，那么另一种编程语言的系统调用如何在 linux 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:19:55.937

在 AMD64 Linux 上，系统调用是通过加载适当的寄存器并执行`syscall`函数来完成的。在其他架构上，这当然是不同的。

C 以外的语言必须要么对进行系统调用的 C 函数进行外部调用（这通常更容易，因此也很常见），或者像 C 一样使用适当的处理器指令进行系统调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T04:09:35.010

系统调用是一种从用户空间执行内核驻留函数的机制。

大局观是系统调用被包装在用户空间函数调用中，它接受来自用户的某些参数。这些参数与指示要执行哪个内核驻留函数的代码一起打包到一个结构中。然后代码执行一条 CPU 指令，使其特权级别上升到内核的特权级别，同时执行现在位于内核内部的代码路径。这称为进入内核。内核中的这段代码可以访问为系统调用组装的数据结构。它定位目标代码，从结构中为代码设置参数，然后进行调用。它收集返回码并安排它通过反向遍历路径返回到用户空间。

在此过程中还会发生其他事情，例如地址空间切换等，但这几乎是概念上发生的事情。

[以下是一些具体细节。](http://articles.manugarg.com/systemcallinlinux2_6.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:15:36.113

由于 C 几乎是 21 世纪的操作系统通用语言（从某种意义上说，大多数主流操作系统主要是用 C 编写的），因此许多编程语言实现都提供了调用 C 代码的方法。例如，Java 有 JNI，Python 和 Ruby 的参考实现（CPython 和 CRuby）都提供了创建 C 扩展模块等的能力。

大多数主流操作系统（包括 Linux）通常会公开一个或多个低级 C API，用于直接与设备交互、生成进程等。高级语言可以包装这些系统调用并使其在语言级别上可用程序员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T08:54:03.993

在英特尔架构中，任何对内核模式功能的调用都涉及带有一些参数（系统调用号和 linux 中的其他参数）的中断。如果任何编程语言想要利用它，它必须提供一个可以编译成正确程序集的构造（例如 int 80）。

C 和 C++ 提供了这一点。也可以使其他语言编译成本机代码来提供此功能。通常通过一些 RPC/COM 调用来调用 C/C++ 功能更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T03:23:38.177

大多数语言都有一些方法来调用通常称为`Foreign Function Interface`. 我列出了一些我遇到的：

```
Java - JNI
Python, Ruby, Perl, TCL - have extensions for directly calling native C code. Python also provides `ctypes`
Microsoft's CLR - P/Invoke a mechanism to invoke native platform code 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T21:53:05.310

首先，系统调用使用汇编来调用内核——CPU 可以理解的语言。C被编译成汇编。x86 上的系统调用是使用 int 0x80 或 sysenter 完成的——两者都是由 CPU 执行的汇编指令。内核本身也是编译代码。您有两种类型的语言被编译和解释。编译后的语言被编译成汇编——它们可以在语言本身中有一层自己的代码，一种胶水，用系统调用实现调用 ac 库，或者它们可以有自己的编译成汇编的系统调用实现。解释语言是用随机语言编写的编译代码解释器，但编译为在 CPU 上运行的东西 - 它们具有相同的两个选项，但在解释器中 - 不是在字节码中，不是在脚本代码中。

# ruby - 特定连续字符零次或多次 ruby 正则表达式

> ID：15306697
> 
> 赞同：-1
> 
> 时间：2013-03-09T03:11:03.263
> 
> 标签：ruby, regex

尝试使用`gsub`以转换字符串的顺序同意字符以及字符的组合`'qu'`。如何通过正则表达式声明`((two specific character in a specific order) OR (any character in a set of characters)) any number of times`

我尝试了以下方法无济于事：

```
"stupid".gsub( /([(qu)]*[^aeiou]*)(.*)/, '\2\1') + 'ay' #=> "upidstay" correct!
"uce".gsub( /([(qu)]*[^aeiou]*)(.*)/, '\2\1') + 'ay' #=> "eucay" NOT correct :(

"stupid".gsub( /((qu)*[^aeiou]*)(.*)/, '\2\1') + 'ay' #=> "stay" 

"uce".gsub( /([(qu)|[^aeiou]]*)(.*)/, '\2\1') + 'ay' #=> "eucay" # why does just a "u" match? 
```

我认为归根结底是我不知道如何在 中选择多个特定的连续字符`[]`，我以为是，`[(qu)]`但为什么只是`u`匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:44:38.540

这是你想要的？

```
cons = "(?:qu|[^aeiou])"
"uce".gsub(/^(#{cons}+)(.*)/,'\2\1') + 'ay' # => uceay
"stupid".gsub(/^(#{cons}+)(.*)/,'\2\1') + 'ay' # => upidstay
"quduck".gsub(/^(#{cons}+)(.*)/,'\2\1') + 'ay' # => uckquday 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:44:48.807

字符类`[]`指定要匹配的字符，因此将`[(qu)]`匹配`(`、和`q``u``)`

*皮拉丁正则*表达式：`/((?:(?:qu))*[^aeiou]*)(\w*)/`

替换为：`'\2\1'`并附加一个`'ay'`

代码：

```
"quick".gsub( /((?:(?:qu))*[^aeiou]*)(\w*)/, '\2\1') + 'ay' 
```

[请参见此处](http://regex101.com/r/jH5eF6)的示例。

# delphi - Delphi 和 Free Pascal 中的 SQRT 函数有多准确？

> ID：15306698
> 
> 赞同：3
> 
> 时间：2013-03-09T03:11:09.497
> 
> 标签：delphi, fpc, sqrt

`SQRT`在 Delphi XE 中作为 80 位浮点值的 FPU 函数实现；不确定它是如何在 64 位编译器中实现的。众所周知，浮点函数是近似的。

我可以假设下一个断言永远不会失败吗？

```
procedure Test1(Value: Cardinal);
var
  Root: Cardinal;

begin
  Root:= Trunc(Sqrt(Value));
  Assert(Root * Root <= Value);
  if Root < $FFFF then
    Assert((Root + 1) * (Root + 1) > Value);
end;

procedure Test2(Value: UInt64);
var
  Root: UInt64;

begin
  Root:= Trunc(Sqrt(Value));
  Assert(Root * Root <= Value);
  if Root < $FFFFFFFF then
    Assert((Root + 1) * (Root + 1) > Value);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:25:51.313

实践胜于理论：

对所有数字执行测试，如下所示：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

{$IFNDEF DEBUG}
  {$DEFINE DEBUG}
{$ENDIF}

procedure Test1(Value: Cardinal);
var
  Root: Cardinal;

begin
  Root:= Trunc(Sqrt(Value));
  Assert(Root * Root <= Value);
  if Root < $FFFF then
    Assert((Root + 1) * (Root + 1) > Value);
end;

procedure Test2(Value: UInt64);
var
  Root: UInt64;

begin
  Root:= Trunc(Sqrt(Value));
  Assert(Root * Root <= Value);
  if Root < $FFFFFFFF then
    Assert((Root + 1) * (Root + 1) > Value);
end;

var
  VCar: Cardinal;
  VUInt: UInt64;
const
  Limit1: Cardinal = $FFFFFFFF;
  Limit2: UInt64 = $FFFFFFFFFFFFFFFF;
begin
  try
    for VCar := 0 to Limit1 do
    begin
      if (VCar mod 10000000) = 0 then
        Writeln('VCarTest ', VCar, ' ', (VCar / Limit1 * 100):0:2, '%');
      Test1(VCar);
    end;
    Writeln('VCarTest 0 .. $', IntToHex(Limit1, 8), ' passed');
{ commented because cannot be executed in a reasonable time
    VUInt := 0;
    while (VUInt <= Limit2) do
    begin
      if (VUInt mod 2500000) = 0 then
        Writeln('VUIntTest ', VUInt, ' ', (VUInt / Limit2 * 100):0:2, '%');
      Test2(VUInt);
      Inc(VUInt);
    end;
    Writeln('VUIntTest ', VUInt);
    Writeln('All passed');
}

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

**由于测试UInt64**的整个范围确实需要很长时间，所以我稍微更改了测试以测试所有完美的正方形，之前的数字和每个之后的数字，只是为了让它更快并且有更好的想法。我个人对 32 位进行了一段时间的测试而没有失败（占整个测试的 1%），而在 64 位上它显示失败的速度非常快。我仍在寻找更接近此的方法，但我发布了代码以防万一您感兴趣：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

{$IFNDEF DEBUG}
  {$message error 'change your build configuration to Debug!'}
{$ENDIF}

procedure Test2(Value: UInt64);
var
  Root: UInt64;
begin
//try/except block only for 64 bits, since in 32 bits it makes the process much slower
{$ifdef CPUX64}
  try
{$endif}
    Root:= Trunc(Sqrt(Value));
    Assert(Root * Root <= Value);
    if Root < $FFFFFFFF then
      Assert((Root + 1) * (Root + 1) > Value);
{$ifdef CPUX64}
  except
    Writeln('Fails for value: ', Value, ' root: ', Root
      , ' test: ', (Root + 1) * (Root + 1));
    raise;
  end;
{$endif}
end;

var
  RUInt, VUInt: UInt64;

const
  Limit2: UInt64 = $FFFFFFFFFFF00000;
begin
  try
    RUInt := 1;
    repeat
      Inc(RUInt);
      VUInt := RUInt * RUInt;
      if (RUInt mod 2500000) = 0 then
        Writeln('VUIntTest ', VUInt, ' ', (VUInt / Limit2 * 100):0:4, '%');
      Test2(VUInt - 1);
      Test2(VUInt);
      Test2(VUInt + 1);
    until (VUInt >= Limit2);
    Writeln('VUIntTest ', VUInt);
    Writeln('All passed');
  except
    on E:EAssertionFailed do
      Writeln('The assertion failed for value ', VUInt, ' root base ', RUInt);
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

# ruby - 如果花费的时间太长，则中止 Curses.getch

> ID：15306702
> 
> 赞同：1
> 
> 时间：2013-03-09T03:12:27.767
> 
> 标签：ruby, curses

如果响应`Curses.getch`时间过长（超过毫秒），如何让我的 Ruby 应用程序什么都不做并继续？`x`

例子：

```
case Curses.getch
  when ?a (do stuff)
  when ?s (do stuff)
  etc.
  when takesTooLong (do nothing)
end 
```

如果用户在指定的时间内没有按键，我希望应用程序继续。

我怎样才能做到这一点？我想过在`sleep`之后做一个，但是在用户按下一个键*后*`Curses.getch`会执行睡眠。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:33:38.060

使用[Curses::timeout=](http://www.ruby-doc.org/stdlib-2.0/libdoc/curses/rdoc/Curses.html#method-c-timeout-3D)，门把手。*

# ios - 尝试使用 rangeOfString 来表现 youtube 视频的 url

> ID：15306705
> 
> 赞同：0
> 
> 时间：2013-03-09T03:13:45.240
> 
> 标签：ios, objective-c, string, webview, nsstring

我需要应用识别它是否是嵌入的 youtube 视频，然后是应用内 webView

这是我现在使用的代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
NSString *urlString = request.URL.absoluteString;
NSString *youtube;

youtube = @"youtube";

if ([urlString rangeOfString:youtube options: NSCaseInsensitiveSearch].location != NSNotFound){
    return YES;
}
[[UIApplication sharedApplication] openURL:request.URL];
return NO;
} 
```

这在大多数情况下都有效，因为大多数 youtube 链接已作为嵌入视频直接传输到网页上。但是，我检查我是否从 youtube 选择个人资料页面或其他页面，这仍会在应用内打开，因为我的应用没有后退按钮（html 页面中的按钮）。因此，任何不是视频的链接都会导致无法返回。我尝试使用*@"youtube.com/watch"* *@"/watch?"* *@“手表？”* 作为 rangeOfString，但只有*youtube*有效。

例如：这是一个 youtube 视频 url：data-url="http://youtube.com/watch?feature=player_detailpage&v=Ke1Y3P9D0Bc"（应用内视图很好）

dara-url="youtube.com"（失败，仍在应用内查看）

我想知道我以错误的格式存储字符串，rangeOfString 中不支持的符号？或者可以有另一种方式，比如`urlString rangeOfString:youtube && @"watch"`

谢谢你，真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:16:09.003

你当然可以使用，

```
if ([urlString rangeOfString:youtube options: NSCaseInsensitiveSearch].location != NSNotFound && [urlString rangeOfString:@"watch" options: NSCaseInsensitiveSearch].location != NSNotFound) 
```

我不知道这是否会让你得到你想要的，但它应该作为一个有效的 if 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:16:50.987

```
NSURL *myURL = [NSURL URLWithString:@"http://www.youtube.com/watch?feature=player_detailpage&v=Ke1Y3P9D0Bc"];
NSString *host = myURL.host;
NSString *path = myURL.path;
NSLog(@"%@", host); // Output: www.youtube.com
NSLog(@"%@", path); // Output: /watch
NSLog(@"%@", myURL.query); // Output: feature=player_detailpage&v=Ke1Y3P9D0Bc
if (NSMaxRange([host rangeOfString:@"youtube.com" options:(NSCaseInsensitiveSearch|NSBackwardsSearch)]) == host.length &&
    [path.lowercaseString isEqualToString:@"/watch"]) {
    NSLog(@"This is a youtube video.");
} 
```

# jquery - jquery fadeIn 和 fadeOut 不起作用

> ID：15306707
> 
> 赞同：0
> 
> 时间：2013-03-09T03:14:14.840
> 
> 标签：jquery

所以我有 3 张图片，当用户点击它时，它会变成另一张图片。但是我想添加一个jQuery`fadeOut`并`fadeIn`给出切换过程的过渡效果。这是我想出的，但它不起作用，知道吗？

```
$(".chosen").click(function() {     
    var src = $(this).attr("src");      
    if (src == "blank.png") (function() {
        $(this).fadeOut(400);
        {
            $(this).attr("src", "ex.png").fadeIn(400);      
        }
    });

    else if (src == "ex.png") (function() {
        $(this).fadeOut(400);
        {
            $(this).attr("src", "oh.png").fadeIn(400);          
        }
    });

    else (function() {
        {
            $(this).fadeOut(400);
            $(this).attr("src", "blank.png").fadeIn(400);       
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:24:22.913

您应该更改图像的来源并在`fadeOut`动画完成后重新过渡。

当动画完成渲染时， [fadeOut](http://api.jquery.com/fadeOut/)文档显示了`complete`一个回调参数。

```
$(this).fadeOut(400, function(){/*code to be executed when animation finishes*/}); 
```

在您的示例中，您可以执行以下操作：

```
$(this).fadeOut(400, function(){
    $(this).attr("src", "ex.png").fadeIn(400); 
}); 
```

您可以重构代码以减少冗余代码，如下所示：

```
$(".chosen").click(function() {     
    var $this = $(this); // avoid calling $ multiple times

    $this.fadeOut(400, function() {
        var src = $this.attr("src");    
        var newSrc = "";

        // this if/else block could be refactored further
        if (src == "blank.png") {
            newSrc = "ex.png";
        }
        else if (src == "ex.png") {
            newSrc = "oh.png";
        }
        else { // if src == "oh.png"
            newSrc = "blank.png";
        }

        $this.attr("src", newSrc).fadeIn(400);
    });
}); 
```

# c++ - 在 Qt 创建器中使用 Boost python

> ID：15306709
> 
> 赞同：1
> 
> 时间：2013-03-09T03:14:37.267
> 
> 标签：c++, python, qt, boost

我想在 Qt C++ 代码中嵌入 python 代码。我创建了一个控制台 Qt 应用程序进行测试。

我`.pro`的是

```
SOURCES += main.cpp
LIBS = -lboost_python -lpython27

HEADERS += /usr/include/python2.7 
```

我的`main.cpp`文件是

```
#include <QCoreApplication>
#include <boost/python.hpp>

using namespace boost::python;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    return a.exec();
} 
```

但我发现我无法构建这个程序。

错误信息是：

```
/usr/include/boost/python/detail/wrap_python.hpp:50: 
Error:pyconfig.h: No such file or directory 
```

我用谷歌搜索了这个问题，但没有得到答案。

如何配置 Qt 我想在 My Qt C++ 程序中嵌入 Python 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:13:17.380

它是 INCLUDEPATH，而不是 .pro 文件中的 HEADERS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T09:26:07.333

您必须首先安装 python 开发者包。在 Ubuntu 中，您可以使用`apt-get`如下方式：

`apt-get install python2.7-dev`

# cmake - 针对非标准位置的库编译 CMake 项目

> ID：15306713
> 
> 赞同：2
> 
> 时间：2013-03-09T03:15:39.220
> 
> 标签：cmake, dynamic-linking, include-path

我有两个使用 CMake 的项目。

第一个是共享库。它编译和安装很好。目前，仍然需要构建它的“调试”版本。所以目前它安装在`~/localdebug`. 该文件夹看起来像具有“include”和“lib”目录的文件系统的根目录。与'/usr/local' 相同的概念。

二是节目。它需要编译并链接到我的库`~/localdebug`。它的`CMakeLists.txt`文件如下所示：

```
cmake_minimum_required(VERSION 2.6)
set(CMAKE_C_FLAGS "-std=gnu99")

#add_definitions(-pg)
find_library(SANDGROUSE_LIB NAMES sandgrouse)
add_library(http_parser http_parser.c)
add_executable(rsva11001adapter main.c rsva11001.c)

target_link_libraries(rsva11001adapter http_parser ${SANDGROUSE_LIB}) 
```

我运行以下命令来设置 make 文件：

```
cmake --debug-output -DCMAKE_BUILD_TYPE=Debug -DCMAKE_PREFIX_PATH="/home/ericu/localdebug" .. 
```

基于 CMake wiki，设置`DCMAKE_PREFIX_PATH`正是我想要的。

> CMAKE_PREFIX_PATH
> 
> > （自 CMake 2.6.0 起）在使用 FIND_PACKAGE()、FIND_PATH()、FIND_PROGRAM() 或 FIND_LIBRARY() 命令搜索包含文件、二进制文件或库时使用。对于 CMAKE_PREFIX_PATH 列表中的每个路径，CMake 将在 FIND_PATH() 被调用时检查“PATH/include”和“PATH”，在 FIND_PROGRAM() 被调用时检查“PATH/bin”和“PATH”，以及“PATH/lib”和调用 FIND_LIBRARY() 时的“PATH”。有关详细信息，请参阅 FIND_PACKAGE()、FIND_LIBRARY()、FIND_PATH() 和 FIND_PROGRAM() 的文档。

但是，当我执行 'make VERBOSE=1' 这就是我得到的：

> cd /home/ericu/rsva11001adapter/build/src && /usr/bin/gcc -std=gnu99 -g -o CMakeFiles/rsva11001adapter.dir/main.co -c /home/ericu/rsva11001adapter/src/main.c
> / home/ericu/rsva11001adapter/src/main.c:19:31：致命错误：sandgrouse/server.h：没有此类文件或目录
> 编译终止。

因此，CMake 似乎没有在`CMAKE_PREFIX_PATH`. 它显然也没有向`-I`编译器调用添加变量。

对 CMakeCache.txt 的检查使它看起来好像不知道变量是什么：

```
// No help, variable specified on the command line.
CMAKE_PREFIX_PATH:UNINITIALIZED=/home/ericu/localdebug 
```

我已经为此工作了一个多小时。如果很难使用非标准库，我几乎要放弃使用 CMake。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T09:35:51.573

您应该指示 CMake 在编译库时添加 -I 标志：

```
find_path(SANDGROUSE_INCLUDE_DIR sandgrouse/server.h)
include_directories(${SANDGROUSE_INCLUDE_DIR} 
```

`add_library()`在调用之前放置这些行。

# php - 插入（或以有组织的方式“洗牌”）从 MySQL 数据库获得的值

> ID：15306720
> 
> 赞同：3
> 
> 时间：2013-03-09T03:16:40.707
> 
> 标签：php, jquery, mysql, jquery-masonry

有很多主题涉及从数据库中获取不同的值，但我认为没有一个完全考虑到这种特定情况。我找不到任何可以回答这些关键字的东西，所以也许对这个问题的解释会更成功。

我有一张很像这样的桌子：

```
 | ID   | Name   | Location   | Color   | ...
    ============================================
    | 1    | Apple  | Cupboard   | Red     |
    | 2    | Banana | Fridge     | Yellow  |
    | 3    | Lemon  | Fridge     | Yellow  |
    | 4    | Kiwi   | Drawer     | Green   |
    | 5    | Orange | Basket     | Orange  |
    | 6    | Peach  | Drawer     | Orange  |
    | 7    | Grapes | Fridge     | Purple  |
    | 8    | Lime   | Basket     | Green   | 
```

可以看出，有几个水果值按照它们输入到数据库的方式排序。所以他们的身份证对我们没有多大帮助，因为他们承诺不会真正组织水果和他们的信息。

我正在做的是根据位置将它们从数据库中取出。到目前为止一切都很好。然而，事情并没有那么容易。我正在使用 jQuery Masonry 将我的数据块分布在整个页面中，并且我希望访问者能够查看每个位置的水果样本，这些样本相互插入。

让我们假设这张桌子有 100 多个项目。例如，如果我只是根据位置按字母顺序对它们进行排序，那么普通观众会在他或她到达“冰箱”位置中的那些物品之前感到无聊并跑掉。所以我真的需要插入这些价值观。

现在，我已经在 MySQL 查询级别尝试过这个，但似乎没有任何`SELECT`代码允许插入。现在我在想，如果我从每个位置提取所有值并将它们分别设置在一个单独的数组中，那么我也许可以将具有相同 # 的行联合起来并将它们一个接一个地放置。

例如，我得到 Array A 与 Orange 和 Lime，然后 Array B 与 Apple，然后 Array C 与 Kiwi 和 Peach，然后 Array D 与 Banana、Lemon 和 Grapes。所以 Orange、Apple、Kiwi 和 Banana 在它们各自的数组中都是 1。不知何故，我也许可以调用所有 1 并将它们并排放置，以便它打印我们的 4 个数据块，每个数据块都包含属于所有相应行 1 中的每个水果的所有信息。然后，我可以对所有人做同样的事情相应的第 2 行、第 3 行等，等等。

但是，我被困在这一点上。我已经尝试提出几个代码来做到这一点，但我已经从 MySQL 查询了所有单独的位置，然后设置为单独的数组，然后分成单独的子数组......但是如何我应该按数字“配对”这些单独的数组吗？

我不确定这是否是最清楚的解释......对此感到抱歉。但我确实希望你能理解并且有人可以帮我一把。

也许，为了在解释方面更清楚，我可以向您展示我想在这一切结束时获得什么，这是所有按位置插入的值（排序`ASC`，“橱柜”除外，它将首先出现全部）并按 ID 排序`DESC`：

*哼！还不让我发图片！为此，我还需要 2 个代表点！哦，好吧，[这里有图片的链接。](http://www.procesosaltavida.com/TRIAL/kiwis-and-apples.jpg)*

**编辑：**没关系！耶！得到了我需要发布图片的代表点。谢谢！

![在此处输入图像描述](../Images/79bb2b279dd667cc64c81cd958800d2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:01:34.553

从数据库中获取值并将它们放入一个数组中，在该数组中将位置设置为键。然后，您可以遍历位置/键，并使用 array_shift() 为每个位置/键选择一项：

```
<?php

$set['cupboard'] = array('apple');
$set['basket'] = array('orange', 'lime');
$set['drawer'] = array('kiwi', 'peach');
$set['fridge'] = array('banana', 'lemon', 'grapes');

$locations = array_keys($set);

$found=true;
while($found) { //as long as there are fruits in at least one array
    $found = false;
    foreach($locations as $row) { //go through all arrays
        $fruit = array_shift($set[$row]); //get the first fruit of the array and delete it from the array
        if(isset($fruit)) { //there is a fruit
            $finalArr[] = $fruit." ($row)"; //add the fruit to the final array
            $found = true; //I found a fruit so keep going
        }
    }
}

var_dump($finalArr);
//Output array(8) { [0]=> string(16) "apple (cupboard)" [1]=> string(15) "orange (basket)" [2]=> string(13) "kiwi (drawer)" [3]=> string(15) "banana (fridge)" [4]=> string(13) "lime (basket)" [5]=> string(14) "peach (drawer)" [6]=> string(14) "lemon (fridge)" [7]=> string(15) "grapes (fridge)" }
?> 
```

希望这可以帮助。

编辑：这里有一个版本，它适用于整个 DB 行

```
<?php

$dbresult = mysqli_query($dblink, 'SELECT * FROM yourtable');
while ($dbrow = mysqli_fetch_array($dbresult, MYSQLI_ASSOC)) {
    $set[$dbrow['Location']][] = $dbrow;
}

$locations = array_keys($set);

$found=true;
while($found) { //as long as there are fruits in at least one array
    $found = false;
    foreach($locations as $row) { //go through all arrays
        $fruitArr = array_shift($set[$row]); //get the first fruit of the array and delete it from the array
        if(isset($fruitArr)) { //there is a fruit
            $finalArr[] = $fruitArr; //add the whole fruit-array (= row from DB) to the final array
            $found = true; //I found a fruit so keep going
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:46:46.347

# 我基于 Thorsten 代码的最终代码非常好用。

Thorsten 的代码非常适合一开始构建的数组。**非常感谢托尔斯滕！**

我需要处理从我的 MySQL DB 处理程序代码输出的预构建数组。所以我不得不对 Thorsten 的代码做一些小改动，现在它可以满足我的特定需求。

这里有我的最终代码。Thorsten 的原始代码在底部的他/她的响应中。

希望它可以帮助其他人！

```
 <?php

    /* The vars below come from the MySQL DB handler. */
    $set['cupboard'] = $fruits_in_cupboard;
    $set['basket'] = $fruits_in_basket;
    $set['drawer'] = $fruits_in_drawer;
    $set['fridge'] = $fruits_in_fridge;

    $locations = array_keys($set);

    $found=true;
    while($found) { //as long as there are fruits in at least one array
        $found = false;
        foreach($locations as $row) { //go through all arrays
            $fruit = array_shift($set[$row]); //get the first fruit of the array and delete it from the array

            /* Here I include a code to handle every var passed
               through each $fruit sub-array. */
            include('inc/fruity-builder.inc');

            if(isset($fruit)) { //there is a fruit
                /* Here I make a final array out of all $item values. */
                $finalArr[] = array('id'=>$id,'name'=>$name,'location'=>$location,'color'=>$color); //get the first fruit of the array and delete it from the array
                $found = true; //I found a fruit so keep going
            }
        }
    }

    foreach($finalArr as $fruit):

    ?>

    <!-- This is just in order to output our data for each item
         and will surely change according to specific needs. It is
         setup here as an example, following the example I gave
         in the image I posted (above). -->
    <div>
        <h2><?php $fruit['fruit_name'] ?></h2>
        <p>is <?php $fruit['fruit_color'] ?><br />
           and in <?php $fruit['fruit_location'] ?></p>
    </div>

    <?php

    endforeach;

    ?> 
```

# c++ - 功能模板

> ID：15306722
> 
> 赞同：1
> 
> 时间：2013-03-09T03:17:03.973
> 
> 标签：c++, templates

你能帮我理解为什么这段代码不能编译吗？我正在尝试理解 C++ 模板。

```
#include <iostream>
#include <algorithm>
#include <vector>

template <class myT>
void myfunction (myT i)
{
  std::cout << ' ' << i;
}

int main ()
{
  double array1[] = {1.0, 4.6, 3.5, 7.8};

  std::vector<double> haystack(array1, array1 + 4);

  std::sort(haystack.begin(), haystack.end());

  std::cout << "myvector contains:";
  for_each (haystack.begin(), haystack.end(), myfunction);
  std::cout << '\n';
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:20:27.390

因为您要传递`myfunction`给一个函数，所以它无法自动确定要使用哪个模板，所以您必须告诉它`myfunction<double>`

这在直接调用它时并不适用，`myfunction(2.0)`因为为了方便起见，编译器会根据你给它的参数确定要使用哪个模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:19:59.490

模板就像蓝图。可能有很多`myfunction`s，每个都采用不同的类型。在这种情况下，您必须在实例化它时给出类型，以告诉编译器使用哪一个：

```
for_each (haystack.begin(), haystack.end(), myfunction<double>);
                                                      ^^^^^^^^ 
```

# javascript - 使用 android webview 与网站交互

> ID：15306725
> 
> 赞同：0
> 
> 时间：2013-03-09T03:18:17.170
> 
> 标签：javascript, android, plugins, webview

我运行一个论坛，其中安装了一个喊话框插件，用户可以在其中像即时消息一样互相交谈。我决定做一个我认为会是一个快速的应用程序，它只会显示喊话框，这样用户就可以在旅途中交谈，而不是使用那里的浏览器。我发现的问题是，使用 android webview 一切都很好，但是当你尝试发送一个喊叫时，它会出现一个错误，说“失败！” 好像它与实际的喊话箱没有通信。

我的问题是 webview 可以像这样使用还是只能用于显示网页而不实际与之交互？以下是我正在使用的代码，因此你们可以查看我是否遗漏了任何内容，如果有，请指出正确的方向，谢谢。

```
public class splash extends Activity {

        WebView mWebView;

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            final Activity mActivity = this;
            super.onCreate(savedInstanceState);

            // Adds Progrss bar Support
            this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
            setContentView(R.layout.mainx);

            // Makes Progress bar Visible
            getWindow().setFeatureInt( Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON);

            mWebView = (WebView) findViewById( R.id.webview);
            mWebView.getSettings().setJavaScriptEnabled(true);     
            mWebView.loadUrl("http://www.myforum.com/forums/shoutbox.php");

            mWebView.setWebChromeClient(new WebChromeClient() 
            {
                public void onProgressChanged(WebView view, int progress)  
                {
                    //Make the bar disappear after URL is loaded, and changes string to Loading...
                    mActivity .setTitle("Loading...");
                    mActivity .setProgress(progress * 100); //Make the bar disappear after URL is loaded

                    // Return the app name after finish loading
                    if(progress == 100)
                    {
                       setTitle(R.string.title);
                    }
                }
            });
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:15:01.907

创建和设置一个

`WebViewClient`

子类。当发生影响内容呈现的事情时（例如，错误或表单提交）将调用它。您还可以在此处拦截 URL 加载（通过`shouldOverrideUrlLoading()`）。

# html - 如何将文本放入页脚边距

> ID：15306726
> 
> 赞同：1
> 
> 时间：2013-03-09T03:18:30.823
> 
> 标签：html, css, margin, footer

我知道这对你们大多数人来说可能很简单，但它让我很恼火。我正在使用 Dreamweaver CS6 构建我的企业网站，以编辑从免费网站模板下载的模板。我遇到的问题是我无法将页脚右侧的链接放入页脚。我不确定这是 HTML 问题还是 CSS 问题。这是我正在谈论的一个例子：

左边距.........右边距

主页...关于...画廊...联系方式

似乎有多少链接并不重要，最后一个悬垂在页脚上。我很感激你能给我的任何帮助。谢谢你。

[http://tinypic.com/r/2nvcljq/6](http://tinypic.com/r/2nvcljq/6)

[小提琴](http://jsfiddle.net/BRANIS/dABzc/)

```
#footer ul.navigation {
float: right;
display: inline-block;
line-height: 24px;
list-style: none;
margin: 0;
padding: 0;
}
#footer ul.navigation li {
float: left;
margin-left: 15px;
}
#footer ul.navigation li:first-child {
margin-left: 0;
}
#footer ul.navigation li a {
color: #ab7d0f;
font: 11px/24px "Oswald";
text-decoration: none;
text-transform: uppercase;
}
#footer ul.navigation li a:hover {
color: #241b18;
}
#footer #footnote {
color: #ab7d0f;
font: 11px/24px "Oswald";
margin: 0;
text-transform: uppercase;
}

<div id="footer">
    <div>
      <div id="links">
        <div class="showroom">

              <p>4885 Wilson Street<br> Victorville, CA 92392<br><br> 702-409-5373<br>
                <br> 
                  <a href="index.html">info@briarpatchfurniture.com</a>
          </p>
          </div>

        <ul class="navigation">
            <li><a href="index.html">Home</a>
                <a href="about.html">About</a><a href="gallery.html"> Gallery</a>
              <a href="contact.html">Contact</a>
            </li>
        </ul>
        <p id="footnote">
            © Copyright TIBISI, Inc 2013\. All Rights Reserved.
      </p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:04:42.457

这对我来说看起来不正确：

```
<ul class="navigation">
    <li><a href="index.html">Home</a>
        <a href="about.html">About</a><a href="gallery.html"> Gallery</a>
        <a href="contact.html">Contact</a>
    </li>
</ul> 
```

我假设如果打算使用列表，标记应该如下所示：

```
<ul class="navigation">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a><a href="gallery.html"> Gallery</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:02:29.817

我建议`#footer ul.navigation`用这个替换当前规则

```
#footer ul.navigation {
    float: right;
    display: block;
    line-height: 24px;
    list-style: none;
    margin: 0;
    padding: 0 10px 0 0;
} 
```

Fiddle 和您页面的页脚看起来不一样。

# php - 如何为无限项创建菜单？

> ID：15306727
> 
> 赞同：0
> 
> 时间：2013-03-09T03:18:31.370
> 
> 标签：php, css, menu

我有一个 CSS 菜单，但是当我添加更多菜单项时会出现问题。我应该怎么做才能为无限的菜单项创建菜单？

我的 CSS

```
<style type="text/css">
#nav, #nav ul{
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
     line-height:1.5em;
 }

 #nav a:link, #nav a:active, #nav a:visited{
    display:block;
    padding:0px 5px;
    border:1px solid #333;
    color:#fff;
    text-decoration:none;
    background-color:#333;
 }

#nav a:hover{
    background-color:#fff;
    color:#333;
}

#nav li{
    float:left;
    position:relative;
}

#nav ul {
    position:absolute;
    width:12em;
    top:1.5em;
    display:none;
}

#nav li ul a{
    width:12em;
    float:left;
}

#nav ul ul{
    top:auto;
    }

#nav li ul ul {
    left:12em;
    margin:0px 0 0 10px;
    }

#nav li:hover ul ul, #nav li:hover ul ul ul, #nav li:hover ul ul ul ul{
    display:none;
    }
#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li li li li:hover ul{
    display:block;
    }
</style> 
```

我的静态项目示例菜单

```
<ul id="nav">
    <li><a href="#">1 HTML</a></li>
    <li><a href="#">2 CSS</a>
        <ul>
            <li><a href="#">3.1 jQuery</a>
                <ul>
                    <li><a href="#">3.1.1 Download</a>
        <ul>
            <li><a href="#">3.1 jQuery</a>
                <ul>
                    <li><a href="#">3.1.1 Download</a>
<!-- If I add this ul here then it doesn't follow the current css.
       <ul>
            <li><a href="#">3.1 jQuery</a>
                <ul>
                    <li><a href="#">3.1.1 Download</a></li>
                    <li><a href="#">3.1.2 Tutorial</a></li>
                </ul>
            </li>
            <li><a href="#">3.2 Mootools</a></li>
            <li><a href="#">3.3 Prototype</a></li>
        </ul>
-->
</li>
                    <li><a href="#">3.1.2 Tutorial</a></li>
                </ul>
            </li>
            <li><a href="#">3.2 Mootools</a></li>
            <li><a href="#">3.3 Prototype</a></li>
        </ul>
</li>
                    <li><a href="#">3.1.2 Tutorial</a></li>
                </ul>
            </li>
            <li><a href="#">3.2 Mootools</a></li>
            <li><a href="#">3.3 Prototype</a></li>
        </ul>
    </li>
    <li><a href="#">3 Javascript</a>
        <ul>
            <li><a href="#">3.1 jQuery</a>
                <ul>
                    <li><a href="#">3.1.1 Download</a></li>
                    <li><a href="#">3.1.2 Tutorial</a></li>
                </ul>
            </li>
            <li><a href="#">3.2 Mootools</a></li>
            <li><a href="#">3.3 Prototype</a></li>
        </ul>
    </li>
</ul> 
```

（假设，我想显示产品类别将来自数据库的产品菜单。所以它还需要使用一些 php，mysql。只是告诉我应该如何为未知数量的类别和子类别设计 css 菜单）

-谢谢。

# objective-c - Objective-C iOS 6 委托 NSString 查询

> ID：15306736
> 
> 赞同：0
> 
> 时间：2013-03-09T03:20:45.923
> 
> 标签：objective-c, ios6, delegates, nsstring, viewwillappear

我正在尝试使用委托将值从一个 VC 传递到另一个。我想我误解了它应该工作的方式。

在我的主要 ViewController.h 我有这个：

```
@protocol defaultLocationChoice <NSObject>

- (NSString *) locChoice;

@end 
```

在我的 PreferencesViewController.h 和 ChooseServerViewController.h 中，我已经`defaultLocationChoice`在 @interface 部分声明了属性，如下所示：

```
@property (nonatomic, assign) id <defaultLocationChoice> locationDelegate; 
```

两者也是合成的。

当用户从 PreferencesViewController 转到 ChooseServerViewController 时，准备 segue 的代码是：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"toServerChoice"]) {
        ChooseServerViewController *viewController = (ChooseServerViewController *)segue.destinationViewController;
        viewController.locationDelegate = self;

    }

} 
```

在 ChooseServerViewController 中选择单元格时，我调用：

```
[self locChoice]; 
```

这是：

```
- (NSString *) locChoice {
    NSLog(@"Cell Vale Loc choice %@",cellValue);
    return cellValue;
} 
```

NSLog 验证返回的值是否正确。

**现在，我想我明白了，委托中 LocChoice 的值现在是返回的值，不是吗？**

当用户返回（NavController）时，PreferencesViewController 具有：

```
-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    defaultLocation = [locationDelegate locChoice];
    [self.tableView reloadData];  
} 
```

我期待 defaultLocation 的值现在等于传递给 locChoice 的值。但是，当表格重新加载时，有问题的单元格仍然是空白的，这意味着我期望发生的事情没有发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:41:17.807

如果我正确地遵循了你的代码，你不需要在你的`ChooseServerViewController`, only中采用提到的协议`PreferencesViewController`。

原因是您希望将数据发送**回**之前的视图控制器。尝试：

```
@protocol defaultLocationChoice <NSObject>
    - (void) locChoice:(NSString*)choice;
@end 
```

让您`PreferencesViewController`实现该方法，以便它**接收**选择。您必须将其存储在适当的实例变量中。

```
// in PreferencesViewController.m
-(void)locChoice:(NSString*)choice {
    self.choice = choice;  // this just my example
} 
```

当做出选择（在 中`ChooseServerViewController`）发送回选择时，调用：

```
// this is in 'ChooseServerViewController.m' some where appropriate
[self.delegate locChoice:cellValue]; 
```

您的实现只是对单元格值不做任何事情（甚至不存储它，只是记录它）。当您返回 时`PreferencesViewController`，您现在将拥有选定的值，并且该视图控制器可以随心所欲地使用它。

协议在某种程度上类似于 Java 或 C# 中的接口，但更灵活。

*   [关于委托的更多概念](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)。
*   [使用协议](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)。

**更新**：

的声明`ChooseServerViewController`应如下所示：

```
#import "FileWithProtocolDecalration.h"
@interface ChooseServerViewController
.
.
.
@property ( nonatomic,assign) id<defaultLocationChoice> delegate;
.
.
.
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:35:38.317

我想你确实有一些误解

协议和委托是传递的东西。换句话说，有人需要成为接收者，有人需要成为发送者。在你的情况下。
将您的协议更新为此

```
@protocol defaultLocationChoice <NSObject>

- (void)locChoice:(NSString *)updateString;  // the method from delegate and implementer must be exact

@end 
```

并将协议实现为 ViewController 作为接收器

```
@interface VCReceiver : UIViewController <defaultLocationChoice> 
```

然后稍后在 VCReceiver

```
- (void)viewDidLoad {  
    ChooseServerViewController *vcSender = [[ChooseServerViewController alloc] init];
    [vcSender setLocationDelegate:self]; // this is like saying. i have implemented method from protocol in this file (self)
}
- (void)locChoice:(NSString *)updateString {
    // update the VCReceiver here
    // or access vcSender value 
    // or use the updateString value
} 
```

然后在`ChooseServerViewController locChoice:`方法（您的示例中的那个）替换为这个并调用`[self updateChoice]`：

```
- (void)updateChoice {
    if ([self.locationDelegate respondsToSelector:@selector(locChoice:)]) {
         [self.locationDelegate locChoice:aStringToUpdate]; // this will call VCReceiver locChoice
   } 
```

它不必返回任何内容，因为它实际上是在调用 VCReceiver 方法来告诉它已`ChooseServerViewController`准备好读取值。

# youtube - 获取 youtube 缩略图 simplepie

> ID：15306738
> 
> 赞同：0
> 
> 时间：2013-03-09T03:20:56.487
> 
> 标签：youtube, simplepie

所以我试图在简单的饼图中获取 youtube 视频的缩略图，我的问题是 get_thumbnail() 函数似乎没有拉它，因为 get_enclosure 函数似乎没有返回任何值。

是否必须做一些事情来初始化 simplepie 对象以正确获取外壳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:04:42.197

并非所有提要都支持/使用 RSS 附件，它不是 RSS 标准的一部分，至少不是原始 RSS 标准。它是称为[MediaRSS](http://en.wikipedia.org/wiki/Media_RSS)的一部分。尽管如此，这是可以做到的。另一个问题是 Google 一直在更改[GData API](https://developers.google.com/gdata/)，这实际上是为 YouTube 制作 RSS 提要的原因，或者确实如此，您可能希望使用[此 API](https://developers.google.com/youtube/getting_started#data_api)来代替生成 Atom 提要。您可能想查看一些文档。

您必须使用 SimplePie 之外的其他代码来为某些提要创建缩略图，我使用了名为 simple_html_dom 的东西和另一个名为 thumbnail.php 的脚本来根据需要制作缩略图。如果您有像 Flickr 这样支持 MediaRSS 的提要，您的生活会更好，但如果您必须强制创建缩略图，我使用了以下代码：

```
if ($enclosure = $item->get_enclosure())
{
// Check to see if we have a thumbnail.  We need it because this is going to display an image.
    if ($thumb = $enclosure->get_thumbnail())
{
    // Add each item: item title, linked back to the original posting, with a tooltip containing the description.
    $html .= '<li class="' . $item_classname . '">';
    $html .= '<a href="' . $item->get_permalink() . '" title="' . $title_attr . '">'; 
    $html .= '<img src="' . $thumb . '" alt="' . $item->get_title() . '" border="0" />';
    $html .= '</a>';
    $html .= '</li>' . "\n";
}
}
else
{
// There are feeds that don't use enclosures that none the less are desireable to dsipaly wide as they contain primarily images
// Dakka Dakka and some YouTube feeds fall into this category, not sure what is up with Chest of Colors...
$htmlDOM = new simple_html_dom();
$htmlDOM->load($item->get_content());

$image = $htmlDOM->find('img', 0);
$link = $htmlDOM->find('a', 0); 

// Add each item: item title, linked back to the original posting, with a tooltip containing the description.
$html .= '<li class="' . $item_classname . '">';
$html .= '<a href="' . $link->href . '" title="' . $title_attr . '">'; 
// Sometimes I'm not getting thumbnails, so I'm going to try to make them on the fly using this tutorial:
// http://www.webgeekly.com/tutorials/php/how-to-create-an-image-thumbnail-on-the-fly-using-php/
$html .= '<img src="thumbnail.php?file=' . $image->src . '&maxw=100&maxh=150" alt="' . $item->get_title() . '" border="0" />';
$html .= '</a>';
$html .= '</li>' . "\n";
} 
```

格式似乎有点奇怪，但这是从我[在此处](http://news.muschamp.ca)运行的代码中提取的。您仍然最好不要从不支持它们的提要中制作大量缩略图。

# html - 是否可以只设置图像替代文本的一部分？

> ID：15306741
> 
> 赞同：0
> 
> 时间：2013-03-09T03:21:42.490
> 
> 标签：html, css

基本上我想要这样的东西，`<img src="doesntexist.png alt="Image does <b>Not</b> exist" />`.

**编辑** 感谢您提供的信息，但我希望在没有 JavaScript 的情况下完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:44:47.827

你不能用传统的 HTML 做你所要求的。

> alt 属性在一组标签（即 img、area 和可选的输入和小程序）中定义，以允许您为对象提供等效的文本。

[http://www.w3.org/QA/Tips/altAttribute](http://www.w3.org/QA/Tips/altAttribute)

当图像不可用、浏览器不显示或用户看不到图像时，Alt 属性用于显示图像的文本描述。一些用户可能是盲人、色盲或弱视。在这种情况下，alt 属性用于通过描述图像的意图来帮助用户。

您可能想查看类似工具提示的内容。使用工具提示，您可以自定义样式以及它们对最终用户的显示方式。那里有很多。一个例子是 jQuery 的工具提示：http: [//jqueryui.com/tooltip/#custom-style](http://jqueryui.com/tooltip/#custom-style)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:27:27.927

抱歉不行。然而，它可以被复制以允许使用 Javascript 进行标记。

```
function altContent(img) {
    var alt = document.createElement('div');

    alt.innerHTML = img.getAttribute('alt');

    img.parentNode.replaceChild(alt, img);
} 
```

然后只需将属性添加`onerror`到图像中，就像这样。

```
<img src="doesntexist.png alt="Image does <b>Not</b> exist" onerror="altContent(this)" /> 
```

[**JSFiddle 示例**](http://jsfiddle.net/qdK8n/)

**[更清洁的解决方案](http://jsfiddle.net/qdK8n/1/)**

# php - PHP $_session 时间

> ID：15306746
> 
> 赞同：0
> 
> 时间：2013-03-09T03:22:07.527
> 
> 标签：php, session, time

所以我创建了一个登录页面，在输入密码后将有 8 小时的生命周期要在此处添加什么

```
session_start();
if (!isset($_SESSION['loggedIn'])) {
$_SESSION['loggedIn'] = false;
}

if (isset($_POST['password'])) {
    if (sha1($_POST['password']) == $password) {
        $_SESSION['loggedIn'] = true;
        ini_set("session.cookie_lifetime","3600000000");
    } else {
        die ('Incorrect password');
    }
} 
```

# javascript - 如何通过 XML 中的节点值优化 Javascript 搜索

> ID：15306748
> 
> 赞同：0
> 
> 时间：2013-03-09T03:22:18.823
> 
> 标签：javascript, xml

我在编码方面非常新手，并且正在尝试使用 XML 创建一个站点。我正在尝试创建三个按钮来显示“所有控制台”、“专用控制台”和“手持控制台”的信息。我已经弄清楚如何一次显示所有这些，但我不知道如何重新定义搜索，以便 div 只显示来自三个选项之一的信息。我认为我必须编辑 javascript 以便它执行 where 或 if else 语句，因此仅按值“Handheld Console”或“Dedicated Console”搜索，然后编写三个单独的 javascript 函数：S！

因此，如果元素是手持控制台，为了更好地解释，我希望 Javascript 搜索仅输出“手持控制台”类型的结果，而不是“类型”本身，其他按钮也一样。

抱歉，如果这是一个简单的问题，但我非常感谢您的帮助！

# buddypress - BuddyPress 新的 sub_nav 项目和屏幕

> ID：15306752
> 
> 赞同：0
> 
> 时间：2013-03-09T03:22:47.917
> 
> 标签：buddypress, screens

如何让我的新 sub_nav 项目正确显示我创建的屏幕？

我正在使用我自己的子主题。我想要完成的是让我的用户能够为他们的孩子创建子帐户。我有单独的功能，它工作正常。

**什么有效：** “子帐户”选项卡按预期显示。

**出了什么问题** 单击时，我收到 404 错误。

我在文件夹 bp-themes/bp-default/members/single/child 中有一个 child-account.php

我错过了什么？

这是我的代码：

```
add_action( 'bp_setup_nav', 'add_subnav_items', 100 ); 
function add_subnav_items() {
    global $bp;

   //Child Account(s) tab
    $tab_array['name'] = 'Child Account(s)';    
    $tab_array['link'] =  $bp->displayed_user->domain.'child';   
    $tab_array['slug'] = 'child';    
    $tab_array['parent_url'] = $bp->displayed_user->domain; 
    $tab_array['parent_slug'] = bp_core_get_userlink(bp_loggedin_user_id());    
    $tab_array['css_id'] = 'child';  
    $tab_array['position'] = 100;   
    $tab_array['user_has_access'] = '1';    
    $tab_array['screen_function'] = 'profile_screen_child_account';

    $bp->bp_nav['child'] = $tab_array; 
}// End add_subnav_items

function profile_screen_child_account() {
    add_action( 'bp_template_content', 'profile_screen_child_account_show' );
    bp_core_load_template( apply_filters( 'bp_core_template_plugin', 'members/single/plugins' ) );
}// End profile_screen_child_account

function profile_screen_child_account_show() {
    echo "Manage Child Account Screen";
    locate_template( array( 'child-template.php' ), true );
}// End profile_screen_child_account_show 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:33:07.877

代替：

```
 bp_core_load_template( apply_filters( 'bp_core_template_plugin', 'members/single/plugins' ) ); 
```

尝试这个：

```
 bp_core_load_template( apply_filters( 'bp_core_template_plugin', 'members/single/child/child-account' ) ); 
```

# php - 重定向到另一个页面上的特定 div？

> ID：15306755
> 
> 赞同：1
> 
> 时间：2013-03-09T03:23:38.873
> 
> 标签：php, html

我正在尝试重定向到页面 index.php 上名为 #login-box 的 div，以便它可以触发 jquery 登录表单。我可以在下面的代码中添加什么来做到这一点？

```
header("Location: ".$config['site_url']."index.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:26:16.070

尝试以下操作：

```
header("Location: ".$config['site_url']."index.php#login-box"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-12T08:25:01.967

这是我以前从未见过的最好的解决方案。也许这对你有帮助。

下面的代码是我想在点击链接时重定向的页面。

```
<div ><a onclick="myHash()"></a></div> 
```

这是重定向到新页面并通过 url 发送哈希。

```
 function myHash() {
      $(document).ready(function () {

                  window.location.href="contact.html#link"
      });
  } 
```

在我想要打开并滚动到特定 div 的新页面上。

```
<div id="link"></div> 
```

并使用 url 的哈希在新页面上滚动特定的 div

```
 $(document).ready(function() {    
    if (window.location.hash) {
           setTimeout(function() {
               $('html, body').scrollTop(0).show();
               $('html, body').animate({
                   scrollTop: $(window.location.hash).offset().top
                   }, 1500)
           }, 0);
       }

   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:41:45.163

执行重定向的页面的代码示例在这里会很有帮助。还要记住，`header('Location: .... ')`只有在您还没有向浏览器发送任何输出时才会起作用。也就是说，如果你有一个`echo()`before`header()`函数，它将无法工作。

根据[PHP.net](http://www.php.net/manual/en/function.header.php)：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

# django - Django reportlab 插入分页符 html 端

> ID：15306757
> 
> 赞同：8
> 
> 时间：2013-03-09T03:23:48.187
> 
> 标签：django, pdf, reportlab

我正在尝试在使用reportlab生成的pdf中的表格后插入分页符，我正在使用以下函数生成pdf：

```
def render_to_pdf(template_src, context_dict):
  template = get_template(template_src)
  context = Context(context_dict)
  html  = template.render(context)
  result = StringIO.StringIO()
  pdf = pisa.pisaDocument(StringIO.StringIO(html.encode("ISO-8859-1")), dest=result, link_callback=fetch_resources)
  if not pdf.err:
    return result.getvalue()
  return HttpResponse('We had some errors<pre>%s</pre>' % escape(html))
def fetch_resources(uri, rel):
    return os.path.join(MEDIA_ROOT, uri.replace(MEDIA_URL, "")) 
```

我以这种方式从视图中调用该函数：

```
@login_required(login_url=reverse('accounts:login_box'))
def quote_pdf(request, quote_id):
    data_pdf = {}
    quote = get_object_or_404(Quote, id=quote_id)
    data_pdf['pagesize'] = 'letter'
    data_pdf['quote'] = quote
    pdf = render_to_pdf('rents/quote_pdf.html', data_pdf)
    return HttpResponse(pdf, mimetype='application/pdf') 
```

这是我的模板（quote_pdf.html）

```
{% load humanize compress verbatim %}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Cotización No. {{ quote.id }} Flasherz.co/alquiler</title>
    <style type="text/css">
        @page {
            size: {{ pagesize }};
            margin: 1cm;
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: 0cm;
                margin-left: 0cm;
                margin-right: 0cm;
                height: 0cm;
            }
        }
    </style>
    <style type="text/css">
        body {
            font-size: 12px;
            line-height: 13px;
        }
        div#pdf-header {
            display: block;
        }
        div#pdf-header h2 {
            display: block;
            text-align: center;
            font-weight: normal;
            line-height: 35px;
            font-size: 18px;
        }
        div#pdf-quote-info {
            display: block;
            margin-bottom: 20px;
        }
        p {
            margin: 0;
        }
        table {
            border-top: 1px solid #eee;
        }
        table td, table th {
            border-right: 1px solid #eee;
            border-bottom: 1px solid #eee;
            padding: 5px;
            border-left: 1px solid #eee;
        }
        table .price {
            text-align: right;
        }
        table th {
            padding: 5px 0;
            font-size: 13px;
            text-transform: uppercase;
            color: black;
            text-align: left;
            background-color: #eee;
            padding-left: 5px;
        }
        table p.description {
            color: #555;
            font-size: 11px;
        }
        table#quote-info {
            border: none;
        }
        table#quote-info td, table#quote-info th {
            border: none;
            padding: 0;
        }
        table td.quantity {
            text-align: center;
        }
    </style>
</head>
<body>
<div id="pdf-header">
    <div style="width: 100%; text-align: center;">
        <img src="{{ STATIC_URL }}img/quotes-logo.jpeg" alt="Flasherz.co Alquiler" width="600" height="126" />
        <div style="display: block; text-align: center; margin: 10px 0;">
            <h2>Cotización No. {{ quote.id }}, {{ quote.client_name }}</h2>
        </div>
    </div>
</div>
<div id="pdf-quote-info">
    <table id="quote-info" width="70%" border="none" cellpadding="3" cellspacing="0">
        <tr>
            <td width="25%">Fecha:</td>
            <td width="75%">{{ quote.created|date:'l j' }} de {{ quote.created|date:'F' }} de {{ quote.created|date:'Y' }}</td>
        </tr>
        {% if quote.client_name %}
            <tr>
                <td>Cliente:</td>
                <td>{{ quote.client_name }}</td>
            </tr>
        {% endif %}
        {% if quote.client_email %}
            <tr>
                <td>Correo:</td>
                <td>{{ quote.client_email }}</td>
            </tr>
        {% endif %}
        {% if quote.client_address %}
            <tr>
                <td>Dirección:</td>
                <td>{{ quote.client_address }}</td>
            </tr>
        {% endif %}
        {% if quote.client_phone %}
            <tr>
                <td>Teléfono:</td>
                <td>{{ quote.client_phone }}</td>
            </tr>
        {% endif %}
        <tr>
            <td>Cantidad de días:</td>
            <td>{{ quote.rental_days }}</td>
        </tr>
    </table>
    </div>
</div>
<div id="pdf-quote-table">
    <table id="quote-table" cellpadding="0" cellspacing="0" width="100%">
        {% for category in quote.categories.all %}
            <tbody>
            <tr>
                <th colspan="4" class="category-header">{{ category.category.name }}</th>
            </tr>
            {% for item in category.items.all %}
                <tr>
                    <td class="quantity" width="10%">
                        <p>{{ item.quantity }}</p>
                    </td>
                    <td class="name" width="50%">
                        <p class="name">{{ item.name }}</p>
                        {% if item.content %}<p class="description">{{ item.content }}</p>{% endif %}
                    </td>
                    <td class="price" width="20%">
                        <p>${{ item.price|intcomma }}</p>
                    </td>
                    <td class="price total-price" width="20%">
                        <p>${{ item.total_price|intcomma }}</p>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        {% endfor %}
        <tbody id="others">
        <tr>
            <th colspan="4" class="category-header">Seguro del 10%</th>
        </tr>
        <tr>
            <td class="quantity"></td>
            <td class="name">Seguro 10%</td>
            <td class="price"></td>
            <td class="price total-price">
                <p>${{ quote.get_insurance_price|intcomma }}</p>
            </td>
        </tr>
        </tbody>
        {% if quote.discount %}
            <tbody id="others">
            <tr>
                <th colspan="4" class="category-header">Descuento</th>
            </tr>
            <tr>
                <td class="quantity">
                </td>
                <td class="name">Descuento</td>
                <td class="price"></td>
                <td class="price total-price">
                    <p>${{ quote.discount|intcomma }}</p>
                </td>
            </tr>
            </tbody>
        {% endif %}
        <tbody id="totals">
        <tr>
            <th colspan="4" class="category-header">Total</th>
        </tr>
        <tr>
            <td class="fake" colspan="2"></td>
            <td class="name">Subtotal</td>
            <td class="price">
                <p>${{ quote.get_subtotal|intcomma }}</p>
            </td>
        </tr>
        <tr>
            <td class="fake" colspan="2"></td>
            <td class="name">Total días</td>
            <td class="price">
                <p>${{ quote.get_total_days|intcomma }}</p>
            </td>
        </tr>
        <tr>
            <td class="fake" colspan="2"></td>
            <td class="name">Total</td>
            <td class="price">
                <p><strong>${{ quote.get_total|intcomma }}</strong></p>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html> 
```

我不知道如何在表格后插入分页符以在下一页中插入“条款和条件”。

我对pdf中的图像也有问题，渲染时没有人出现。

谢谢你帮助我

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T01:08:48.260

根据我在[Pisa 的文档](http://xhtml2pdf.appspot.com/static/pisa-en.html)（和[此论坛帖子](https://groups.google.com/forum/?fromgroups=#!topic/xhtml2pdf/RllJjS1YYgM)）中学到的知识，您可以使用标准 CSS 标签，例如`page-break-after`和`page-break-before`。比萨也有一些它自己的标签，比如`pdf:nextpage`. 要使用它，只需在需要分页符的位置插入以下代码块（div 是必需的，因此 Pisa 的 HTML5 解析器不会尝试解释它们）：

```
<div>
    <pdf:nextpage /> 
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T15:33:07.390

我找到了正确的方法，我需要在我的 pdf 中插入一些特定的样式

```
<style type="text/css">
    @page {
        size: {{ pagesize }};
        margin: 1cm;
        @frame footer {
            -pdf-frame-content: footerContent;
            bottom: 0cm;
            margin-left: 0cm;
            margin-right: 0cm;
            height: 0cm;
        }
    }
    .page-break{
        page-break-after: always;
    }
</style> 
```

然后将具有 .page-break 类的元素放在您希望在 pdf 中分页的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T21:00:46.407

我对css方法没有运气。

只需将这段代码插入您的 template.html 中您想要分页符的任何位置。这个对我有用。我不确定，但我认为它必须在一个div中。

```
<div> 
   <pdf:nextpage /> 
</div> 
```

# c - strcmp 不比较

> ID：15306761
> 
> 赞同：0
> 
> 时间：2013-03-09T03:24:07.630
> 
> 标签：c, linked-list, strcmp

我需要一些有关 strcmp 函数的帮助。我正在尝试将 const char 字与 char 数组进行比较。但无论出于何种原因，strcmp 都没有比较这两种类型。这就是我所拥有的：

```
typedef struct Node {    
    char word[LENGTH+1];  
    struct Node *Next;    
}
Node;

for (NodePointer=hashtable->table[hashval];NodePointer !=NULL;NodePointer=NodePointer->Next)
    {
        i=0;
        i=strcmp(word,NodePointer->word); 

        if (i==0) 
          return true;
    }

    return false;
} 
```

有人知道可能是什么问题吗？我是否应该事先将每个 null 终止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:01:44.110

1.  确保`word`由 终止`'\0'`。
2.  你可以考虑使用[strncmp](http://www.cplusplus.com/reference/cstring/strncmp/)

    strncmp（字，节点指针->字，长度）

# c++ - 当派生定义了析构函数时，使用复制 ctor 而不是移动 ctor

> ID：15306764
> 
> 赞同：4
> 
> 时间：2013-03-09T03:24:28.107
> 
> 标签：c++, gcc

当我向派生类添加析构函数时，当它尝试使用复制 ctor 而不是定义的移动 ctor 时，会出现编译器错误（使用 gcc 4.7）：

```
#include <utility>
#include <iostream>

template <typename T>
struct Base 
{
  T value;

  Base(T&& value) :
    value(value)
  {
    std::cout << "base ctor" << std::endl;
  }

  Base& operator=(const Base&) = delete;
  Base(const Base&) = delete;

  Base& operator=(Base&& rhs)
  {
    value = rhs.value;
    std::cout << "move assignment" << std::endl;
  }

  Base(Base&& other) :
    value(other.value)
  {
    std::cout << "move ctor" << std::endl;
  }

  virtual ~Base()
  {
    std::cout << "base dtor" << std::endl;
  }
};

template <typename T>
struct Derived : public Base<T>
{
  Derived(T&& value) :
    Base<T>(std::forward<T>(value))
  {
    std::cout << "derived ctor" << std::endl;
  }

  ~Derived()
  {
    std::cout << "derived dtor" << std::endl;
  }
};

template <typename T>
Derived<T> MakeDerived(T&& value)
{
  return Derived<T>(std::forward<T>(value));
}

struct Dummy {};

int main()
{
  auto test = MakeDerived(Dummy());
} 
```

这段代码在 gcc-4.5 和 gcc-4.6 上编译得很好。gcc-4.7 的错误是：

```
test.cpp: In function ‘int main()’:
test.cpp:61:34: error: use of deleted function ‘Derived<Dummy>::Derived(const Derived<Dummy>&)’
test.cpp:37:8: note: ‘Derived<Dummy>::Derived(const Derived<Dummy>&)’ is implicitly deleted because the default definition would be ill-formed:
test.cpp:37:8: error: use of deleted function ‘Base<T>::Base(const Base<T>&) [with T = Dummy; Base<T> = Base<Dummy>]’
test.cpp:16:3: error: declared here
test.cpp: In instantiation of ‘Derived<T> MakeDerived(T&&) [with T = Dummy]’:
test.cpp:61:34:   required from here
test.cpp:54:43: error: use of deleted function ‘Derived<Dummy>::Derived(const Derived<Dummy>&)’ 
```

我在这里遗漏了什么还是应该在 gcc 4.7 上也能正常编译？当我在 Derived 类上注释掉析构函数时，一切都很好。

```
gcc version 4.5.3 (Ubuntu/Linaro 4.5.3-12ubuntu2) 
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-11precise2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:50:20.797

错误是正确的；只有当类没有用户定义的析构函数时，才会隐式生成移动构造函数。如果添加析构函数，那么您将禁止默认移动构造函数，并尝试复制构造函数。当一个类具有不可复制的基类时，默认复制构造函数的生成被抑制，就像你的那样，所以`Derived`既不可复制也不可移动。

解决方案是简单地将移动构造函数添加到`Derived`.

# ruby-on-rails - PostgreSQL：致命 - 用户的对等身份验证失败 (PG::ConnectionBad)

> ID：15306770
> 
> 赞同：33
> 
> 时间：2013-03-09T03:24:57.930
> 
> 标签：ruby-on-rails, postgresql

我正在使用 PostgreSQL，并且我有一个用户，其密码与 database.yml 中指定的密码匹配

```
postgres=# select * from pg_user
;
  usename   | usesysid | usecreatedb | usesuper | usecatupd | userepl |  passwd  | valuntil | useconfig 
------------+----------+-------------+----------+-----------+---------+----------+----------+-----------
 goodsounds |    16386 | t           | t        | t         | t       | ******** |          | 
 postgres   |       10 | t           | t        | t         | t       | ******** |          | 
(2 rows) 
```

但是当我尝试通过运行命令创建数据库时

```
rails db:create 
```

我得到错误

> 致命：用户“goodsounds”的对等身份验证失败

这是我的 pg_hba.conf：

```
# Database administrative login by Unix domain socket
local   all             postgres                                peer

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            trust
#host    replication     postgres        ::1/128                 trust 
```

以前上面的“信任”是md5，但我改变了看看是否有帮助。

这是我的database.yml：

```
# PostgreSQL. Versions 8.2 and up are supported.
#
# Install the pg driver:
#   gem install pg
# On Mac OS X with macports:
#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config
# On Windows:
#   gem install pg
#       Choose the win32 build.
#       Install PostgreSQL and put its /bin directory on your path.
#
# Configure Using Gemfile
# gem 'pg'
#
development:
  adapter: postgresql
  encoding: unicode
  database: goodsounds_development
  pool: 5
  username: goodsounds
  password: test

  # Connect on a TCP socket. Omitted by default since the client uses a
  # domain socket that doesn't need configuration. Windows does not have
  # domain sockets, so uncomment these lines.
  host: localhost
  port: 5432

  # Schema search path. The server defaults to $user,public
  #schema_search_path: myapp,sharedapp,public

  # Minimum log levels, in increasing order:
  #   debug5, debug4, debug3, debug2, debug1,
  #   log, notice, warning, error, fatal, and panic
  # The server defaults to notice.
  #min_messages: warning

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  database: goodsounds_test
  pool: 5
  username: goodsounds
  password: test

production:
  adapter: postgresql
  encoding: unicode
  database: goodsounds_production
  pool: 5
  username: goodsounds
  password: test 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-09T07:48:36.790

“对等身份验证”意味着它使用 unix 套接字并期望连接的 unix 用户具有与 postgresql 用户名相同的 unix 用户名。

由于您的本地 unix 用户名是`funkdified`并且您正尝试以用户身份通过​​您指定身份验证`goodsounds`的 unix 域套接字 ( ) 连接进行连接，因此 Pg 正确地拒绝了您的连接尝试。`local``pg_hba.conf``peer`

这是使用 unix 套接字时许多安装的默认行为。

你可以：

*   通过在数据库连接设置中指定主机名来通过 TCP/IP 连接；
*   编辑`pg_hba.conf`以使用`md5`密码身份验证而不是`peer`unix 套接字（`local`连接类型）的身份验证，因此 Pg 接受密码身份验证；或者
*   使用与您的 unix 用户名相同的 PostgreSQL 用户名进行连接，如果该用户尚不存在，则在 PostgreSQL 中创建该用户。

请参阅[文档以及文档的`pg_hba.conf`](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)[客户端身份验证章节的](http://www.postgresql.org/docs/current/static/client-authentication.html)其余部分。

请注意，更改`pg_hba.conf`不会立即生效，您必须重新启动或至少重新加载 PostgreSQL 以使其重新读取`pg_hba.conf`。

* * *

哦，另外，如果你安装了多个 PostgreSQL 版本，你可能有一个版本的 libpq 和另一个版本的服务器。在这种情况下，请确保 libpq 默认连接到的 unix 套接字的位置与服务器的位置相同，或者在连接字符串中`unix_socket_directories`使用（例如）覆盖它 。`host=/tmp`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-29T13:16:57.217

我在 Ubuntu 机器上遇到了同样的问题，所以我按照一些步骤删除了这个错误。切换到 postgres 用户

```
$ sudo su - postgres 
```

它会要求输入密码，默认密码是`postgres`

将用户切换到 postgres 后，打开 psql 控制台

```
$ psql 
```

如果有多个版本可用，请检查 postgres 的版本

```
psql=# select VERSION();

PostgreSQL 9.1.13 on x86_64-unk....         # so version is 9.1 
```

现在打开`postgres user`

```
vim /etc/postgresql/9.1/main/pg_hba.conf 
```

`9.1`是版本返回形式上层命令

并更换

```
local   all             postgres                                peer 
```

到

```
local   all             postgres                                md5 
```

重启服务

```
sudo service postgresql restart 
```

我也在我的博客上写了步骤

[http://tarungarg402.blogspot.in/2014/10/set-up-postgresql-on-ubuntu.html](http://tarungarg402.blogspot.in/2014/10/set-up-postgresql-on-ubuntu.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-17T19:56:32.597

如果“对等身份验证”不起作用，请尝试 md5 authenticationaion。

要指定主机尝试这样的事情：

```
 psql -d <dbname> -U <username> -h <hostname> 
```

或这个：

```
 psql -d <dbname> -U <username> -h <hostname> -W 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-14T06:52:46.690

编辑 /etc/postgresql/9.3/main/pg_hba.conf

```
# "local" is for Unix domain socket connections only
    local   all             all                                     peer 
```

更改为下一行，它对我有用

```
# "local" is for Unix domain socket connections only
local   all             all                                     md5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-01T20:22:16.417

**这是我解决它的方法**；

运行以下命令以确认您的 PostgreSQL 版本。

```
psql --version 
```

导航到服务器上的**PostgreSQL**配置目录，该目录位于`/etc/postgresql/10/main`. 请注意，这`10`是我在服务器上安装的**PostgreSQL版本。**您的版本可能是`9.5`，`11`或`12`任何其他版本。

```
cd ~
cd /etc/postgresql/10/main 
```

导航到目录后，使用以下命令`/etc/postgresql/10/main`打开文件。`pg_hba.conf`该文件控制：允许连接哪些主机，如何验证客户端，可以使用哪些 PostgreSQL 用户名，可以访问哪些数据库：

```
sudo nano pg_hba.conf 
```

替换以下行：

```
# Database administrative login by Unix domain socket
local       all       postgres       peer 
```

与下面的行：

```
# Database administrative login by Unix domain socket
local       all       postgres       md5 
```

另外，替换下面的行：

```
# "local" is for Unix domain socket connections only
local       all       all            peer 
```

与下面的行：

```
# "local" is for Unix domain socket connections only
local       all       all            md5 
```

**此外**，我们可能希望在生产环境中允许到 PostgreSQL 数据库的入站连接（允许使用 md5 方法从所有数据库、所有用户、所有地址进行主机连接）。

为此，请在文件末尾添加以下行，然后保存文件：

```
# remote connections
host      all      all      all      md5 
```

仍在目录中，使用以下命令`/etc/postgresql/10/main`打开并编辑文件：`postgresql.conf`

```
sudo nano postgresql.conf 
```

用下面的行替换行`# listen_address='127.0.0.1'`或行`listen_address='127.0.0.1'`或行`# listen_address='localhost'`或行`listen_address='localhost'`，以允许 PostgreSQL 数据库侦听来自所有地址的连接：

```
listen_addresses = '*' 
```

保存文件，然后导航到服务器的根目录：

```
cd ~ 
```

使用以下命令重新启动或重新加载 PostgreSQL 服务器：

```
sudo systemctl restart postgresql       # To restart
sudo systemctl reload postgresql        # To reload 
```

# php - PHP fopen（x标志）保证只运行一次？

> ID：15306771
> 
> 赞同：2
> 
> 时间：2013-03-09T03:25:02.637
> 
> 标签：php, web-applications, locking, mutex, fopen

PHP 允许我们`x`在执行[fopen](http://www.php.net/manual/en/function.fopen.php)时使用该标志：

> 创建和开放仅用于写作；将文件指针放在文件的开头。
> 
> **如果文件已经存在，则 fopen() 调用将失败，返回 FALSE**并生成 E_WARNING 级别的错误。
> 
> 如果该文件不存在，请尝试创建它。这等效于为底层 open(2) 系统调用指定 O_EXCL|O_CREAT 标志。

这是否意味着无论我们（来自不同用户）有多少并发 fopen 请求，都**可以保证文件只会被创建一次并且永远不会被覆盖？**

```
if ($handle = fopen("part006", "x+b")) {
    do_some_processing();
    echo "You managed to process.";
    /*

    can we guarantee that only 1 user (http request)
    will ever process the function and see the
    message "you managed to process" ?

    */
} else {
    echo "You failed to process.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:58:20.913

答：保证文件只创建一次，永远不会被覆盖，只要其他进程也使用O_EXCL。如果他们不这样做，则可以覆盖该文件。因此，使用 O_EXCL 打开（创建）一个文件并不意味着该文件受到某种*写保护*

说明： fopen 使用底层`open`系统调用。从手册页：`man 2 open`

> O_EXCL
> 
> 如果设置了 O_CREAT 和 O_EXCL，如果文件存在，则 open() 将失败。检查文件是否存在以及如果文件不存在则创建文件对于执行 open() 的其他线程在同一目录中命名相同的文件名并设置了 O_EXCL 和 O_CREAT 应该是原子的。如果设置了 O_EXCL 和 O_CREAT，并且路径名称为符号链接，则无论符号链接的内容如何，​​open() 都将失败并将 errno 设置为 [EEXIST]。如果设置了 O_EXCL 而未设置 O_CREAT，则结果未定义。

# ios - jpeg 图像的背景透明度的可用性

> ID：15306772
> 
> 赞同：1
> 
> 时间：2013-03-09T03:25:06.307
> 
> 标签：ios, image, gimp

我需要编辑一个 png 图像，通过赋予它边框和阴影效果。但是编辑后图像的最终尺寸太大而无法用于移动应用程序。我知道 jpeg 的尺寸比 png 的尺寸小。所以我将该图像转换为 jpeg 并尝试提供阴影和边框效果。但是该图像没有透明背景..他们是否有任何其他方法可以使用 jpeg 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:47:38.963

另一种选择是尝试使用[ImageOptim](http://imageoptim.com)进行无损压缩，或者尝试其有损表亲[ImageAlpha](http://pngmini.com)。

ImageOptim 尝试了一系列无损算法来缩小 PNG 并选择一堆中最小的结果。它占用了我们很多图像的 25% 到 50%+。

另一方面，ImageAlpha 是有损的，可以进一步压缩图像，结果更像 JPEG，但不会丢失 Alpha。

您还可以在 Xcode 中禁用 PNG 压缩，如此处所示，[此处](http://imageoptim.com/xcode.html)提供更多详细[信息](http://bjango.com/articles/pngcompression/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:00:20.697

@minitech 想说的不是缩放，而是**文件压缩**。jpg 和 png 文件通常有一些可以从文件中删除的数据。有一些压缩方法可以减小文件大小（注意是以 kbs 为单位的大小，而不是按比例测量的）。Jpg 图像也可以通过降低图像质量来减小文件大小。

如果您想要另一种接受透明度的文件类型，则可以使用 gif 格式，它为您提供更小的文件，但有一些缺点，例如缺少 alpha 通道（可变透明度）。查看此链接了解更多详情：[http ://www.w3.org/QA/Tips/png-gif](http://www.w3.org/QA/Tips/png-gif)

有几个在线文件压缩器。如果你想压缩 png 文件，你可以尝试使用[http://tinypng.org/](http://tinypng.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:37:58.330

不，jpeg 图像不支持透明度。但是您可以更改 jpeg 图像附带的白色背景

# javascript - jQuery 隐藏 div，用新内容显示 div

> ID：15306777
> 
> 赞同：0
> 
> 时间：2013-03-09T03:25:49.730
> 
> 标签：javascript, jquery, user-interface, hide, show

我试图收回我的 div，然后根据他们单击的链接显示新内容。

HTML：

```
 <div id="menu">
    <ul>
                <a href="#" title="content_1" alt="about" class="menu"><li>about</li></a>
                <a href="#" title="content_2" alt="contact" class="menu"><li>contact</li></a>
                <a href="#" title="content_3" alt="cv" class="menu"><li>cv</li></a>
            </ul>
        </div>

       <div class="content">
            test
        <div id="content_1" class="content">
            content1
        </div>
        <div id="content_2" class="content">
            content2
        </div>
        <div id="content_3" class="content">
            content3
        </div>
    </div> 
```

JS：

```
<script type="text/javascript">
        $(document).ready(function(){
            $("a.menu").click(function() {
                var clicked = $(this).attr('title');
                $(".content").hide('slide', {direction: 'right'}, 1000);
                $("#"+clicked).show('slide', {direction: 'left'}, 1000);
            });
        });
    </script> 
```

CSS：

```
.content {
position: absolute;

left:303px;
top: 200px;
width: 100%;

margin-top: 200px;
background: #6c7373;

 }

#content_1, #content_2, #content_3 {
display: none;
 } 
```

发生的情况是：div 缩回，但根本没有重新出现，这里出了什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:38:35.277

首先，请注意所有潜在 DIV 的容器都有`content`该类，因此它也被隐藏了。由于容器是隐藏的，因此“显示”其中一个包含的元素并不重要。其次，请注意“隐藏”语句和“显示”语句将具有竞争条件，因为它们都将应用于被隐藏的元素。最好在隐藏操作的回调中显示该项目或将其排除在隐藏之外。

```
<div class="content_wrapper"> <!-- give it a different class -->
        test
    <div id="content_1" class="content">
        content1
    </div>
    <div id="content_2" class="content">
        content2
    </div>
    <div id="content_3" class="content">
        content3
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $("a.menu").click(function() {
            var clickedID = '#' + $(this).attr('title');
            $(".content:not(" + clickedID +")").hide('slide', {direction: 'right'}, 1000);
            $(clickedID).show('slide', {direction: 'left'}, 1000);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:28:56.323

将外部更改`.content`为`.content-wrapper`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:36:18.677

显示和隐藏同时工作。为避免冲突（如果用户单击同一项目两次，则不隐藏然后显示可见的内容），显示您想要的内容并通过使用选择它们来隐藏其他内容`siblings()`

[工作演示](http://jsfiddle.net/deLb8/1/)

```
$("a.menu").click(function() {
    var clicked = $(this).attr('title');
    $("#"+clicked).show(1000).siblings().hide(1000);
}); 
```

这也将解决您为包装器 div 也提供了 .content 类的问题。

你的 ul li 结构也是错误的。您需要 li 中的 a 标签。li 必须直接跟在 ul 之后。

# angularjs - 使用 ng-class 有条件地应用 CSS 类

> ID：15306780
> 
> 赞同：2
> 
> 时间：2013-03-09T03:25:54.713
> 
> 标签：angularjs

我正在尝试使用 ng-class 应用多个 css 类。我正在做以下事情。

```
 <span ng-class="{'label':true, 'label-success':status=='Ok', 'label-warning':status=='Warnings', 'label-important':status=='Critical'}">{{status}}</span> 
```

[请参阅此处](http://plnkr.co/edit/dzm7qT?p=preview)的工作 plunker 。有没有更短的方法？我尝试的另一种方法是调用返回 CSS 类列表的控制器函数，但我不想用 CSS 类名污染我的控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T04:21:52.387

重构您认为过于复杂的 DOM 功能的一个好方法是创建指令；例如，您可以创建一个指令，该指令仅根据字符串有条件地应用一个类：

```
<span status-class='status'>{{status}}</span> 
```

```
app.directive('statusClass', function() {
  return function(scope, elem, attrs) {
    scope.watch(attrs.statusClass, function(value) {
      if(value == 'Ok')
        elem.addClass('label-success');
      else
        elem.removeClass('label-success');
      // ... etc ...
    });
  };
}); 
```

幕后有更多代码，但您的视图已简化

如果您的类名不同并且您不能使用这样的单个指令，您可能会发现`ng-class`在您的问题中使用 as 是获得所需效果的最快方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T09:12:12.380

为了以更短的方式使它变得更短，您可以尝试使状态名称和类名称匹配，然后是这样的：

```
<span class="label" ng-class="'label-'+status">{{status}}</span> 
```

**但...**

在现实生活中，事情可能更复杂。由于您可能拥有比引导警报更多的状态，并且由于应用程序中的状态标签与引导类名称不完全相同，因此这可能是最佳选择：

```
<span class="label" ng-class="alert_class(status)">{{status}}</span> 
```

在你的控制器中：

```
 $scope.alerts = {
    'Warnings': 'label-warning',
    'Ok': 'label-success',
    'Critical': 'lablel-important'
  }; 
```

最后，如果您的代码中的状态、状态标签和引导类都不同，您将需要更复杂的结构，如下所示：

```
$scope.statuses =
  warning:
    label: 'Warnings'
    class: 'label-warning'
  ok:
    label: 'It`s OK'
    class: 'label-success'
  critical:
    label: 'Something is going wrong...'
    class: 'label-important' 
```

并以这种方式使用它：

```
<span class="label" ng-class="statuses[status].class">{{statuses[status].label}}</span> 
```

# core-data - 使用CoreData和标量属性时将日期属性重置为零的正确方法是什么

> ID：15306784
> 
> 赞同：1
> 
> 时间：2013-03-09T03:26:18.790
> 
> 标签：core-data

如果您在 NSManagedObject 子类中有一个日期属性，如下所示：

```
@interface Task : NSManagedObject

@property (nonatomic) NSTimeInterval finishTime;

@end 
```

“finishTime”的默认值为 nil。将“finishTime”设置为其他日期后，是否可以将“finishTime”重置为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:30:03.763

只需`nil`通过 KVC 设置值：

```
 [object setValue:nil forKey:@"finishTime"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:34:19.463

由于`NSTimeInterval`是 a 的 typedef `double`，因此将其包装成 a 是常见的做法`NSNumber`。

# bigdata - 从查询日志中查找并建议最相似的查询

> ID：15306787
> 
> 赞同：0
> 
> 时间：2013-03-09T03:26:32.620
> 
> 标签：bigdata, nearest-neighbor, search-suggestion, locality-sensitive-hash

给定一个大约 1000 万个查询的查询日志，我必须编写一个程序来询问用户的查询，并显示与输入查询最相似的 10 个查询作为输出。此外，在拼写错误的情况下，它可能会建议正确的拼写。

在这种情况下，我研究了一些关于局部敏感哈希的教程，但无法理解如何将它应用于这个问题。首先，我正在考虑按字典顺序对日志进行排序。但我认为就日志大小而言对日志进行排序不是一个好主意，因为将整个日志加载到内存中可能效率不高。

所以可以请任何人建议我解决这个问题的任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T01:51:23.307

如果你想并行处理，你肯定会想看看这个。[Mahout 中的 Minhash 聚类](https://cwiki.apache.org/confluence/display/MAHOUT/Minhash+Clustering)

1.  生成带状疱疹（具有适当 n 的 n-gram）
2.  生成 MinHash
3.  运行 LSH

可以在这里找到关于 LSH 的非常详细的信息：[挖掘海量数据集](http://infolab.stanford.edu/~ullman/mmds/ch3.pdf)

# android - 错误覆盖 OnMeasure 方法

> ID：15306788
> 
> 赞同：0
> 
> 时间：2013-03-09T03:26:39.733
> 
> 标签：android, android-layout, fullscreen, android-videoview

嗨，我正在使用播放视频的 android 应用程序，现在我想控制我的视频全屏播放我有一个代码，但它包含错误，它说 void 不是变量 onmeasure 的有效类型我不知道如何纠正那

```
public class video extends Activity {

String SrcPath =  "rtsp://v8.cache3.c.youtube.com/CjYLENy73wIaLQltaP8vg4qMsBMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYOL6qv2DoMPrUAw=/0/0/0/video.3gp";

/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.video1);

protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec){
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
   this.setMeasuredDimension(parentWidth/2, parentHeight);
   this.setLayoutParams(new *ParentLayoutType*.LayoutParams(parentWidth/2,parentHeight));
   super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

VideoView myVideoView = (VideoView)findViewById(R.id.vview);
myVideoView.setVideoURI(Uri.parse(SrcPath));
myVideoView.setMediaController(new MediaController(this));
myVideoView.requestFocus();

}
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:32:30.680

编译问题是有括号问题。移动

```
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec){
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
   this.setMeasuredDimension(parentWidth/2, parentHeight);
   this.setLayoutParams(new *ParentLayoutType*.LayoutParams(parentWidth/2,parentHeight));
   super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

所以它*不在*. `onCreate()`目前，方法不能直接包含其他方法。

此外，[`onMeasure()`](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)不是 中的方法`Activity`，而是 中的方法`View`。您应该查看文档，以便准确了解您想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:42:14.543

似乎您可能希望将这两个函数作为类中的方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video1);

    // Set up the video when you create the activity
    VideoView myVideoView = (VideoView)findViewById(R.id.vview);
    myVideoView.setVideoURI(Uri.parse(SrcPath));
    myVideoView.setMediaController(new MediaController(this));
    myVideoView.requestFocus();
}

// On measure should be a different method also in the class video
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec) {
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
   this.setMeasuredDimension(parentWidth/2, parentHeight);
   this.setLayoutParams(new *ParentLayoutType*.LayoutParams(parentWidth/2,parentHeight));
   super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

# asp.net-mvc-3 - ActiveReports 作为转换为 pdf 的机器

> ID：15306789
> 
> 赞同：0
> 
> 时间：2013-03-09T03:26:41.253
> 
> 标签：asp.net-mvc-3, pdf-generation, activereports

我所在的公司可能会获得 ActiveReports 7 许可证。有一个新的项目要求需要将几个 webgrids（实际上不是 webgrids，但更像是用 zurb 呈现的 html）转换为 pdf。在代码中的某一时刻，它们实际上是数据集，或者可以创建成这样的数据集。有没有办法将数据集中的数据传送到活动报告中，然后将其呈现为 PDF。我希望报告尽可能通用，因此所有数据表都有一个活动报告，因此像通常那样使用活动报告是不可能的。

目前我唯一能想到的是组标题中的单个文本框，我可以将所有标题连接到其中，以及详细信息中的单个文本框，我可以将每行的所有数据放入其中。这里的问题是我会遇到许多格式问题，因为没有任何东西可以正确排列 - 因为制表符分隔在这里什么也解决不了。我可以有多个不同间距的文本框，但它最终会演变为每个数据集的不同报告。是否可以应用某种标记，以便在输入数据时保持列间距。活动报告 Richtextbox 是否尊重 html 标记？还是完全有另一种解决方案？

我会使用 Itextsharp，但它对商业产品不是免费的。

谢谢，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:32:57.617

您可以动态构建一个报表，该报表将基于指定的 DataSet 输出一个简单的表，实际上是一个 System.Data.DataTable。基本上对于 DataTable 中的每一列，在标题中添加一个文本框来保存列的名称，并在 Detail 部分添加另一个文本框来保存值。

对于详细信息部分中的文本框，将其 DataField 属性设置为列的名称。绑定到位后，您可以将报表的 DataSource 属性设置为 DataTable，然后运行报表并将其导出为 PDF。

以下代码是一个基本示例：

```
var left = 0f;
var width = 1f;
var height = .25f;
var space = .25f;

var rpt = new SectionReport();
rpt.Sections.Add(SectionType.ReportHeader, "rh").Height = height;
rpt.Sections.Add(SectionType.Detail, "detail").Height = height;
rpt.Sections.Add(SectionType.ReportFooter, "rf").Height = height;

foreach (System.Data.DataColumn col in dataTable.Columns)
{
    var txt = new TextBox { Location = new PointF(left, 0), Size = new SizeF(width, height) };
    txt.Text = col.ColumnName;
    rpt.Sections["rh"].Controls.Add(txt);

    txt = new TextBox { Location = new PointF(left, 0), Size = new SizeF(width, height) };
    txt.DataField = col.ColumnName;
    rpt.Sections["detail"].Controls.Add(txt);
    left += width + space;
}

rpt.DataSource = dataTable;
rpt.Run();
var pdf = new PdfExport();
pdf.Export(rpt.Document, @"c:\Users\scott\downloads\test.pdf"); 
```

# android - 如何将缩略图（blob）与实体同时上传到谷歌应用引擎的数据存储中？

> ID：15306790
> 
> 赞同：0
> 
> 时间：2013-03-09T03:27:19.517
> 
> 标签：android, google-app-engine, blob, google-cloud-endpoints, google-cloud-datastore

我今天刚开始使用谷歌应用引擎，我爱上了端点。我很容易地做了一个，它将一个对象存储在只有几个字符串值的数据存储区中。但我还想要一个小的缩略图图像与该数据存储实体一起使用。我了解如何使用 HttpServlet 从 android 上传 blob。我正在考虑使用数据存储实体的 id 作为 blobstore 中的图像名称，但我不知道如何连接这两个事件，因为我会将实体上传到数据存储，然后是该请求之后的 blob。有谁知道我如何在 blobstore 中以某种方式连接到数据存储中的实体的图像，所以当我访问数据存储时，我还可以调用与之关联的 blob。任何帮助将不胜感激！

谢谢，扎克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:40:19.877

好吧，您可以在 GAE 中使用[ImageService](https://developers.google.com/appengine/docs/java/images/overview#Transforming_Images_from_the_Blobstore) API 来提供不同大小的图像，也可以对这些图像应用各种转换。

我也在下面与您分享一些代码，以便您了解我如何使用存储的 blobkey 提供图像 url。

```
String blobKeyString = blobKey.getKeyString();   // Returned value of blobkey when upload is done.
ImagesService services = ImagesServiceFactory.getImagesService();
ServingUrlOptions serve = ServingUrlOptions.Builder.withBlobKey(blobKey);
String imageUrl = services.getServingUrl(serve); 
```

# barcode - zxing准确吗？

> ID：15306794
> 
> 赞同：-1
> 
> 时间：2013-03-09T03:27:38.597
> 
> 标签：barcode, zxing, barcode-scanner, barcode-printing

我正在开发一个使用非常简单的条形码扫描的 iphone 和 android 应用程序。我们已将条形码类型缩小到二维，特别是 QR 或 DataMatrix。

我使用 Scandit 和 Zxing（主要使用它们的示例代码）编写了两个快速而肮脏的应用程序来测试和比较，我发现 Scandit 在采集和解码方面要快得多，但更重要的是，要准确得多。

免责声明：对于我的测试，我使用在线条形码生成器并在我的激光打印机上打印它们——不确定这是否重要。

问题：这听起来很典型吗？鉴于 Zxing 的开源支持，我想使用它，但我担心它的可靠性。对此的任何见解，特别是 Zxing 对 QR 和/或 DataMatrix 的可信度，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:00:42.373

我会尝试使用 Barcode Scanner 进行扫描以管理我们的代码。它代表了 ZXing 应该如何在 Android 设备上工作。

如果您不能很容易地扫描 QR 码，则说明设备有问题。尝试设备错误解决方法设置。

DM 不如二维码强。你应该会发现它有效。再次尝试该应用程序。

在桌面上，这会发生变化，您需要启用 TRY_HARDER 之类的提示。但不是在手机上。

# django - Django'强制转换为 Unicode：需要字符串或缓冲区，找到 NoneType

> ID：15306795
> 
> 赞同：1
> 
> 时间：2013-03-09T03:27:48.440
> 
> 标签：django

我正在开发一个简单的应用程序，我刚刚在我的 models.py 中添加了一个名为 Picture 的新模块。当我尝试在管理页面访问 Person 模块时，我收到此错误。我已经删除了我的数据库和syncdb

当我单击其他模块（例如 Picture 和 Pet ）时，它是成功的，但是当我在管理页面单击 Person 时，我收到此错误

我做了一些研究，一个解决方案是返回一个有效的 unicode 。我想，我做到了

```
TypeError at /admin/pet/person/

coercing to Unicode: need string or buffer, NoneType found
Request Method:     GET
Django Version:     1.4.3
Exception Type:     TypeError
Exception Value:    

coercing to Unicode: need string or buffer, NoneType found

In template C:\Python26\lib\site-packages\django\contrib\admin\templates\admin\change_list.html, error at line 93
{% result_list cl %} 
```

问题与我的 modules.py 有关

```
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User

class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100,blank=True,null=True)

    def __unicode__(self):
        return self.name

class Picture(models.Model):
    user = models.ForeignKey(Person)
    image = models.FileField(upload_to="images/",blank=True,null=True)
    name = models.CharField(max_length=100,blank=True,null=True)

    def __unicode__(self):
        return self.name

class Pet(models.Model):
    Person = models.ForeignKey(Person)
    description = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.description 
```

我的管理员.py

```
 from django.contrib import admin
 from pet.models import *

 admin.site.register(Person)
 admin.site.register(Pet)
 admin.site.register(Picture) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T05:05:22.250

检查是否有任何有价值的`Person`对象。最好从模型的字段中 删除配置。拥有存在[不是一个好](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.Field.null)习惯。`name``None`
`null=True``name``Person``CharField``nullable`

```
>>> class Foo(object):
...     name = None
...     def __unicode__(self):
...         return self.name
>>> unicode(Foo())
TypeError: coercing to Unicode: need string or buffer, NoneType found 
```

# c# - 如何使用编码的 UI 或 MSAA 以编程方式访问在模拟器中运行的 Windows CE 应用程序的控件？

> ID：15306796
> 
> 赞同：0
> 
> 时间：2013-03-09T03:28:18.780
> 
> 标签：c#, automated-tests, windows-ce

我正在尝试自动化在 Windows CE 中开发的应用程序。我创建了一个由 Button 和 TextBox 组成的简单表单。**我使用Pocket PC 2003 Emulator**运行该应用程序，一旦我记录了测试，它就能够自动执行该过程，就像它可以单击按钮并使用模拟器上的键盘一样，它也可以在文本框中键入。

现在我关心的是验证我想要将 TextBox 作为我的客户端应用程序中的控件并想要验证其中的文本。

使用 CodedUI，我无法“***添加断言”***，因为焦点不会像下面那样进入模拟器内部 ![在此处输入图像描述](../Images/483e2d6140ed8995ba7c32b7a8fbf49f.png)

现在，模拟器的窗口显示它是在 MSAA 技术中开发的，我想在我的测试中添加验证点，为了做到这一点，我需要对模拟器中的控件进行编程访问。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:34:26.253

模拟器是一台虚拟机，这意味着对于您的 PC 来说，它是一台完全独立的机器。主机 PC 无法以任何方式访问托管计算机的窗口或控件。您可能可以编写某种基于位置的输出脚本来模拟对 VM 的点击，但是您无法获得 Windows 句柄并执行诸如将文本放入控件或从控件中读取文本之类的操作。您最好创建一个在设备（可以是模拟器或物理设备）上运行的测试代理，并通过网络、RAPI、远程工具框架或类似的东西与该代理通信。

# javascript - ios风格文件夹动画

> ID：15306798
> 
> 赞同：0
> 
> 时间：2013-03-09T03:28:23.277
> 
> 标签：javascript, jquery, ios, html, css

我目前正在制作一个视频缩略图库，其中包含两行 5 张图片，总共 10 张图片。功能是用户单击视频拇指，然后会发生类似动画的 ios 文件夹，并且在打开的区域内是带有一些信息的视频。我目前有一半在工作，但我很难弄清楚底行的功能。我想当用户点击第二行视频拇指时，该区域会在视频上方打开。这是到目前为止我所拥有的链接 [http://jsfiddle.net/jsavage/Vnya7/14/] 希望它对我正在尝试做的事情更有意义。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:53:23.230

这是一个粗略的想法，如何实现这样的效果。我在这里更新了你的小提琴：http: [//jsfiddle.net/Vnya7/29/](http://jsfiddle.net/Vnya7/29/)

为了理解，我创建了具有多个可见性参数的函数。

`function expandToDirection(self, row, content, dir) {..}`

基本上，通过正确的班级分配，您将知道哪一行正在调用，如下所示`<div class="row bottom">`。请注意，底部是方向的另一个参数。

有了这个方向，我可以轻松地在之前/之后注入所需的元素：

```
if (dir == direction.top) {
    row.before(content);  // will inject content before the said row
    content.find(".folderName").text($(self).text());

} else if (dir == direction.bottom) {
    row.after(content);   // will inject content after the said row
    content.find(".folderName").text($(self).text());

} 
```

注入完成后，您可以简单地添加到`.folderContent`任何样式类以偏移位置，使其看起来对齐。除此之外，这是一个反复试验的问题。

### jQuery 文档

> **.before( content [, content ] )**
> 描述：在匹配元素集合中的每个元素之前插入由参数指定的内容。
> 见：[http ://api.jquery.com/after/](http://api.jquery.com/after/)
> 
> **.after( content [, content ] )**
> 描述：在匹配元素集合中的每个元素之后插入由参数指定的内容。
> 见：[http ://api.jquery.com/before/](http://api.jquery.com/before/)

# css - 无法让引导下拉菜单工作

> ID：15306802
> 
> 赞同：1
> 
> 时间：2013-03-09T03:28:50.110
> 
> 标签：css, twitter-bootstrap

我检查了我的 javascript 文件，我认为我拥有所有正确的文件。但我没有得到任何下拉。

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>

...
        <div class="span3"><center>       
        <a href="#" class="btn btn-success dropdown-toggle" data-toggle="dropdown">Buy A Contract</a>
        <ul class="dropdown-menu">
            <li><a href="#">Hello World</a></li>
            <li><a href="#">Why am I not seeing this?</a></li>

        </ul>
        </div>

        </center>
        </div>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:34:53.490

看起来像一个明显的问题：没有 jQuery 参考。另外，由于您包含以下内容：

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script> 
```

您不需要参考`bootstrap-dropdown.js`（最小文件包含所有插件）。

**编辑：**

需要明确的是，在 Bootstrap 引用之前，您需要有一个脚本标记指向 jQuery 库的副本，因此您的头部应该类似于：

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script> 
```

您可能需要支持 jQuery 版本，因为您正在链接到旧版本的 Bootstrap。如果您从 Bootstrap 源代码中收到错误，请将 jQuery 版本更改为`1.8.3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:38:38.350

在页面上的所有其他脚本之前声明 Jquery 很重要。在标题中，在每个脚本之前插入以下行：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

但是您也有错误的语法来创建下拉菜单。它必须如下所示：

```
 <ul class="nav">
           <li><a href="#">Link</a></li>  
            <li><a href="#">Link</a></li>
             <li class="dropdown"> <!-- this is the item where your dropdown menu will popup-->
             <a data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown <b class="caret"></b></a>

        <ul class="dropdown-menu"><!-- your drop-down -menu-->
            <li><a href="#">nav1</a>
            </li>
            <li><a href="#">nav2</a>
            </li>
         </ul><!-- dropdown menu ends-->
      </li><!-- li with dropdown ends-->
  </ul><!-- Main nav ends--> 
```

# java - 向 Map、List 和 ArrayList 插入数据

> ID：15306810
> 
> 赞同：0
> 
> 时间：2013-03-09T03:30:08.077
> 
> 标签：java, list, arraylist, hashmap

我对这张地图有点新，对不起我的菜鸟问题。我知道如何制作一个 ArrayList 或 List 并从中添加数据，我如何将数据插入到一个`List<Map<ArrayList<String>,ArrayList<String>>>`，

我对尝试阅读文档的地图感到困惑，但我仍然感到困惑。我如何将 ArrayList 添加到这个 ,ArrayList>> 类型的地图中？

它是这样安装的

```
List<Map<ArrayList<String>,ArrayList<String>>> security = new LinkedList<Map<ArrayList<String>,ArrayList<String>>>(); 
```

提前感谢您的建议和意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:44:46.237

如果您正在考虑使用 HashMap，则键需要具有`.equals()`和`.hashCode()`功能，我想 ArrayList 应该具有。

但是您可能还希望使列表不可变，否则哈希码在您将其添加到映射后可能会更改。

# c - c中的字符串反转

> ID：15306814
> 
> 赞同：1
> 
> 时间：2013-03-09T03:30:45.727
> 
> 标签：c

```
#include<stdio.h>
#include<malloc.h>
#include<string.h>
#define SUCCESS 0
#define FAILURE -1
int str_rev(char **s, char **d){
  int count = 0;
  if(s == NULL || d == NULL){
   printf("\n Invalid address received! \n");
   return FAILURE;
  }
  else{
   while(**s != '\0'){
    **s++;count++;
   }
   while(count > 0){
    **d++ = **s--;count--;
   }
   **d = '\0';
   return SUCCESS;
  }
}
int main(){
 int ret_val = SUCCESS;
 char *a = "angus";
 char *b;
 b = malloc((strlen(a) * sizeof(*a)) + 1);
 ret_val = str_rev(&a,&b);
 if(ret_val == FAILURE){
   printf("\n String is not reversed! going to quit! \n");
   free(b);
   return FAILURE;
 }
 printf("\n b:%s \n",b);
 free(b);
 return SUCCESS;
} 
```

我正在编写一个简单的程序，而不使用预定义的字符串反转函数。但这给我带来了分段错误。我相信我正在访问正确的内存地址。

**编辑：**

```
#include<stdio.h>
#include<malloc.h>
#include<string.h>
#define SUCCESS 0
#define FAILURE -1
int str_rev(char *s, char **d){
  int count = 0;
  if(s == NULL || d == NULL){
   printf("\n Invalid address received! \n");
   return FAILURE;
  }
  else{
   while(*s != '\0'){
    s++;count++;
   }
   s--;
   while(count > 0){
    printf("\n *s:%c \n",*s);   // prints the values correctly in the reverse order
    *(*d)++ = *s--;count--;
    printf("\n **d:%c \n",*((*d)-1)); // doesnt print the values, after the assignement
   }
   **d = '\0';
   printf("\n s:%s *d:%s \n",s,*d); // both s and d doesnt print the values copied
   return SUCCESS;
  }
}
int main(){
 int ret_val = SUCCESS;
 char *a = "angus";
 char *b,*x;
 b = malloc((strlen(a) * sizeof(*a)) + 1);
 x = b;
 if(b == NULL){
 }
 ret_val = str_rev(a,&b);
 if(ret_val == FAILURE){
   printf("\n String is not reversed! going to quit! \n");
   free(b);
   return FAILURE;
 }
 printf("\n b:%s \n",b);
 free(b);
 return SUCCESS;
} 
```

我改变了上面的代码，因为 'a' 包含字符串。因此，一个指针就足以指向该位置，因为不需要进行任何更改。但即使在上述更改之后，“s”中的内容也不会被复制到“d”。打印“printf(”\nb:%s \n",b);”后出现段错误 .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T03:36:43.743

除了内存分配问题外，您的代码中还有第二个问题：

**首先**
在您的复制循环之后：

```
 while(count > 0){
    **d++ = **s--;count--;
   } 
```

你不终止`d`字符串 ny`null`

添加

```
**d= '\0'; 
```

**第二：**在你的第一个循环之后

```
 while(**s != '\0'){
    **s++;count++;
   } 
```

您从 Null 复制目标第一个字符变为 '\0' 然后如何使用打印`%s`

您应该递减`s`以指向最后一个字符而不是空字符。由`--s`.

**第三**

内存分配喜欢：

```
 char *a = "angus";
 char *b;
 b = malloc(strlen(a)*sizeof(*a) + 1); 
```

不要忘记释放（）内存`b`

**四**
下一个是你忘记 `return SUCCESS;`从`str_rev()`

**弗斯**

您正在*传递指向指针的指针，该指针`b`在调用函数时改变了它自己的和's'值*。当您调用`&s`并修改时`s`，没有字符串指向“angus”字符串。

像下面一样，我用单指针代替了你的逻辑。

```
int str_rev(char *s, char *d){
  int count = 0;
  if(s == NULL || d == NULL){
   printf("\n Invalid address received! \n");
   return FAILURE;
  }
  else{
   while(*s != '\0'){
    s++;
    count++;
   }
   count;
   --s;
   while(count > 0){
    *d = *s;
   // printf("\n %c %c", *d, *s);
    d++ ;
    s--;
    count--;
   } 
   *d = '\0';
  }
  return SUCCESS;
} 
```

在主要只是调用：

```
ret_val = str_rev(a, b); 
```

## 编辑：第二个代码

我注意到您对我对两者都使用单指针的建议不满意！

那么在你的第二个（编辑）中有一些重复的错误：

**(1)：** 从功能`str_rev()`你又忘记了`return SUCCESS`。
**(2):** 你的 str_rcv 函数的语法是`int str_rev(char *s, char **d)`，第一个参数是，`char*`但`main()`你这样称呼它`ret_val = str_rev(&a,&b);`是错误的不兼容的指针分配。你应该这样称呼：

```
ret_val = str_rev(a, &b); 
```

**（3）：**对您很重要：在第二个参数中，您传递`&b`Where 作为`str_rev()`函数，您正在更新`d`指针，因此更新`b`您通过分配内存的位置`malloc()`，您不能这样做！
这也会导致**错误**：`memory clobbered before allocated block`

你应该纠正你的代码这样调用：（*请阅读评论*）

```
 b = malloc((strlen(a) * sizeof(*a)) + 1);
 if(b == NULL){
   return FAILURE; // added this line too 
 }
 char* x = b;  // first assign b to x, notice x and b are of 
               // same type char*
 ret_val = str_rev(a,&x);  // know pass &x instead of &b 
```

**(4)：**虽然我以前的代码也可以工作，但也可以得到新版本：

```
#define SUCCESS 0
#define FAILURE -1
int str_rev(char *s, char **d){
  int count = 0;
  if(s == NULL || d == NULL){
   printf("\n Invalid address received! \n");
   return FAILURE;
  }
  else{
   while(*s != '\0'){
    s++;count++;
   }
   s--;
   while(count > 0){   
    *(*d)++ = *s--;
    printf("\n *s:%c And **d: %c\n",*(s+1), *((*d)-1));  // for bug finding 
                             // because s decremented and d incremented  
     count--;

   }
   **d = '\0';

   return 0;
  }
} 
```

主要功能（）：

```
int main(){
 int ret_val = SUCCESS;
 char *a = "angus";
 char *b;
 b = malloc((strlen(a) * sizeof(*a)) + 1);
 if(b == NULL){
   return -1;
 }
 char* x = b;
 ret_val = str_rev(a,&x);
 if(ret_val == FAILURE){
   printf("\n String is not reversed! going to quit! \n");
   free(b);
   return FAILURE;
 }
 printf("\n b:%s \n",b);
 free(b);
 return SUCCESS;
} 
```

它的工作输出是：

```
 *s:s And **d: s

 *s:u And **d: u

 *s:g And **d: g

 *s:n And **d: n

 *s:a And **d: a

 b:sugna 
```

[这是你在 Codpad 上的运行代码](http://codepad.org/oUrVYSdD)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T03:38:18.870

这里：

```
**s++ 
```

你正在增加`char **` `s`. 这会将其更改为指向`char *`在您的程序中没有意义的下一个。

由于运算符优先级，`**s++`与 相同`(*(*(s++))`。也就是说，它返回`char`指向 by 所`char *`指向的值`s`，并作为副作用递增`s`以指向“下一个” `char *`（它没有明确定义，因为您没有`char *`s的数组）。

C 字符串操作中的一个典型习惯用法是`*p++`，与`(*(p++))`. 这将返回`char`指向 by的值，`p`并且作为副作用设置`p`为指向 next `char`，这将是字符串中的下一个字符。要做同样的事情，`char **`必须写`*(*p)++`，或者更明确地说`(*((*p)++))`。

此外，**不必使用`char **`s 来反转字符串；只能用`char *`s 来完成。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:35:00.933

在这一行

```
b = malloc(sizeof(b)); 
```

`sizeof(b)`只是指针的大小，不足以容纳整个字符串。

要么传递你想要 malloc 的大小

```
b = malloc(42);
b = malloc(strlen(a) + 1); 
```

或更改`b`为数组而不是指针

```
char b[42]; 
```

* * *

除此之外，我强烈建议学习使用 gdb 或 valgrind 等工具来调试这些分段错误。至少他们会告诉你哪条线路出现了段错误，这将有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:34:49.373

更改`ret = str_rev(&a,&b);`为`ret_val = str_rev(&a,&b);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T06:03:46.940

```
char str[] = "hello";
char *foo = foo; 
```

`*foo++`是等价于`*(foo++)`，不是`(*foo)++`。`foo++`导致 foo 指向下一个`char`。

```
char str[] = "hello";
char *foo = str;
char **bar = &foo; 
```

`**bar++`是等价于`**(bar++);`，不是`(**bar)++`。`bar++`导致 bar 指向下一个`char *`... 你看到问题了吗？

`(*bar)++`导致 foo 指向下一个`char`。考虑您将对调用者的 a 和 b 变量执行什么操作`ret_val = str_rev(&a,&b);`,`(*s)++;`和`(*d)++`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T03:57:23.380

请找到一个返工的功能如下

```
int str_rev(char **sinp, char **dout){
    int count = 0;
    char *s = *sinp; // Dereference the starting address of source
    char *d = *dout; // Dereference the starting address of destination

    if(s == NULL || d == NULL){
        printf("\n Invalid address received! \n");
        return FAILURE;
    }
    else{
        while(*s != '\0'){
            *s++;count++;
        }
        s--; // Requires a decrement as it is pointing to NULL

        while(count > 0){
             *d++ = *s--;
             count--;
        }
    }
    *d = '\0'; // Need a NULL terminator to convert it to string
    return SUCCESS; // Requires a return as all branches of function should return values
} 
```

# rest - 无法在 JAX-RS jersey web 服务中处理来自 ajax 的多部分/表单数据

> ID：15306818
> 
> 赞同：2
> 
> 时间：2013-03-09T03:31:13.547
> 
> 标签：rest, tomcat, jersey, jax-rs, multipartform-data

我正在从以下 Javascript 发送表单数据请求：

```
xmlHttpReq.open("POST", "https://server.com/resource", true);
formData = new FormData(form);
xmlHttpReq.send(formData); 
```

在 tomcat 容器中运行的服务器代码如下：

```
@POST
@Path("{computation}")
@Consumes({"application/x-www-form-urlencoded,multipart/form-data"})
String doPost(MultivaluedMap <String, String> formParams) {
    ....
    return strVar;
} 
```

服务器接收内容类型

```
content-type="multipart/form-data; 
boundary=----WebKitFormBoundaryM1A3izVTDMdn1xsJ" 
```

并引发以下异常：

```
SEVERE: A message body reader for Java class javax.ws.rs.core.MultivaluedMap, 
and Java type javax.ws.rs.core.MultivaluedMap<java.lang.String, java.lang.String>, 
and MIME media type multipart/form-data; 
boundary=----WebKitFormBoundaryM1A3izVTDMdn1xsJ was not found. 
```

如何让服务器接受`multipart/form-data`请求？它适用于`application/x-www-form-urlencoded`内容类型。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T01:39:55.390

你的@Consumes 应该这样格式化：

```
@Consumes("application/x-www-form-urlencoded","multipart/form-data") 
```

# php - htmlentities() 字符串中的双重编码实体

> ID：15306819
> 
> 赞同：7
> 
> 时间：2013-03-09T03:31:14.160
> 
> 标签：php

我只想将未编码的字符转换为 html 实体，而不影响已经存在的实体。我有一个先前已编码实体的字符串，例如：

```
gaIUSHIUGhj>&hyphen; hjb&times;jkn.jhuh>hh> &hellip; 
```

当我使用时`htmlentities()`，`&`实体开头的 再次被编码。这意味着`&hyphen;`和其他实体的`&`编码为`&amp;`：

```
&amp;times; 
```

我尝试解码完整的字符串，然后再次对其进行编码，但它似乎无法正常工作。这是我试过的代码：

```
header('Content-Type: text/html; charset=iso-8859-1');
...

$b = 'gaIUSHIUGhj>&hyphen; hjb&times;jkn.jhuh>hh> &hellip;';
$b = html_entity_decode($b, ENT_QUOTES, 'UTF-8');
$b = iconv("UTF-8", "ISO-8859-1//TRANSLIT", $b);
$b = htmlentities($b, ENT_QUOTES, 'UTF-8'); 
```

但它似乎并没有以正确的方式工作。有没有办法防止或阻止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T03:52:56.830

将可选`$double_encode`变量设置为`false`。有关更多信息，请参阅[文档](http://php.net/htmlentities)。

您生成的代码应如下所示：

```
$b = htmlentities($b, ENT_QUOTES, 'UTF-8', false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T03:59:41.697

您很好地查看了[文档](http://php.net/manual/en/function.htmlentities.php)，但您错过了最好的部分。有时可能很难破译：

```
//     >    >    >    >    >    >    Scroll    >>>    >    >    >    >    >     Keep going.    >    >    >    >>>>>>  See below.  <<<<<<
string htmlentities ( string $string [, int $flags = ENT_COMPAT | ENT_HTML401 [, string $encoding = 'UTF-8' [, bool $double_encode = true ]]] ) 
```

^(*看看最后。*)

我知道。*令人困惑。*我通常会忽略签名行并直接进入下一个块（***`Parameters`***）以获取每个参数的简介。

所以你想***`double_encoded`***在最后使用参数来告诉`htmlentities`不要重新编码（你可能想坚持下去，`UTF-8`除非你有特定的理由不这样做）：

```
$str = "gaIUSHIUGhj>&hyphen; hjb&times;jkn.jhuh>hh> &hellip;";

// Double-encoded!
echo htmlentities($str, ENT_COMPAT, 'utf-8', true) . "\n";

// Not double-encoded!
echo htmlentities($str, ENT_COMPAT, 'utf-8', false); 
```

[https://ignite.io/code/513ab23bec221e4837000000](https://ignite.io/code/513ab23bec221e4837000000)

# vb.net - VB.NET 在月历中禁用过去的日期

> ID：15306822
> 
> 赞同：0
> 
> 时间：2013-03-09T03:32:27.647
> 
> 标签：vb.net, monthcalendar

如何使用 vb.net 在月历中禁用过去日期并仅启用从今天开始的 3 个日期？我找不到 dayrender 事件。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:58:32.993

您可以利用 MonthCalendar 控件的 MinDate 和 MaxDate 属性来满足您的需要，

**代码：**

```
MonthCalTest.MinDate = New DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day)
MonthCalTest.MaxDate = MonthCalTest.MinDate.AddDays(3) 
```

[MINDATE](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.mindate%28v=vs.71%29.aspx) - [MAXDATE](http://msdn.microsoft.com/en-in/library/system.windows.forms.monthcalendar.maxdate%28v=vs.85%29.aspx)

# jquery-ui - 使用 uniForm 并尝试禁用输入

> ID：15306824
> 
> 赞同：0
> 
> 时间：2013-03-09T03:32:40.740
> 
> 标签：jquery-ui, coldfusion, coldfusion-9, uniform, cfml

我有一个表单，我有 2 组不同的表单域，这些表单域根据选择框的值使用。我遇到的问题是当我尝试禁用不相关的输入字段时，我的 disabled 属性出现为： disabled="" 而不是 disabled="disabled" 这是我正在使用的代码。这是一个相当复杂的表格，所以我将使用相关字段，这样我就可以尽量让大家尽可能简单。如果您认为缺少某些内容...如果您需要查看更多信息，请告诉我。

```
<cfform id="entry-form" ACTION="index-10.cfm?Company" name="send" class="uniForm">
        <div class="ctrlHolder"><label for="" style="display:none"><em>*</em>Builder or Individual</label>                        
                        <cfselect name="select1" id="select1">                
                            <option value="" <cfif Individual is "">selected="selected"</cfif>>Who is this Case for? (choose one)</option>                
                            <option value="0"<cfif Individual is 1>selected="selected"</cfif>>An Individual Home Owner</option>                
                            <option value="1"<cfif Individual is not 1 and Individual is not "">selected="selected"</cfif>>A Builder</option>              
                         </cfselect>
                     <p class="formHint">A selection is required</p>        
    </div>

    <!--- this is for individual home owner. --->        
                <div class="hide" id="hide1">  

                  <div class="ctrlHolder"><label for="" style="display:none"><em>*</em>First name</label>
                  <cfinput type="text"             
                              name="FirstName" 
                              id="FirstName" 
                              data-default-value="Enter your first name" 
                              size="35" 
                              class="textInput required validateAlpha"
                              maxlength="50"
                              value="#FirstName#">
                  <p class="formHint">First Name is required</p>
                  </div>
               </div>

               <div class="hide" id="hide2">

                 <div class="ctrlHolder"><label for="" style="display:none"><em>*</em>Builder Name</label>
                    <cfinput type="text" id="builder"
                                name="BuilderName"
                                data-default-value="Type a builder's name"
                                size="35" 
                                class="textInput required"
                                value=""  />
                      <p class="formHint">Builder's name is required</p>
                        <cfinput id="builder_hidden" name="BuilderID" type="hidden" value=""  />  
                        <cfinput id="builder_hidden_plan" name="PlanID" type="hidden" value="" />  
                    </div>  
               </div>
</cfform>

    <script>

     $(document).ready(function(){    
        $("#select1").change(function(){         
            if ($(this).val() == "1" ) {             
                $("#hide2").slideDown("fast"); //Slide Down Effect              
                $("#hide1").slideUp("fast");
                $("#FirstName").prop("disabled", true);
                        $("#builder").prop("disabled", false);
    } else if ($(this).val() == "0" ){             
                $("#hide1").slideDown("fast");    //Slide Down Effect             
                $("#hide2").slideUp("fast");
                        $("#FirstName").prop("disabled", false);
                        $("#builder").prop("disabled", true);    
            }   
        });
</script> 
```

我在用：

*   jquery-1.9.1.js
*   jquery-ui-1.10.1.custom.js
*   统一验证.jquery.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:44:26.773

我发现了这个问题。正在添加 disabled 属性。正是必需的课程阻止了它的工作。我添加了 removeClass 和 addClass 方法来纠正这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:05:41.893

请将 jQuery 'prop' 更改为 'attr' 并在其正常工作后检查以下脚本.....

```
<script type="text/javascript">
 $(document).ready(function(){    
    $("#select1").change(function(){         
        if ($(this).val() == "1" ){             
            $("#hide2").slideDown("fast"); //Slide Down Effect              
            $("#hide1").slideUp("fast");
            $("#firstname").attr("disabled", "disabled");
            $("#builder").attr("disabled", false);
        }
        else if ($(this).val() == "0" ){             
            $("#hide1").slideDown("fast");    //Slide Down Effect             
            $("#hide2").slideUp("fast");
            $("#firstname").attr("disabled", false);
            $("#builder").attr("disabled", "disabled");    
        }   
    });
}); 
```

# c# - 查询在 Access 中有效，但在我的程序中无效。为什么？

> ID：15306826
> 
> 赞同：0
> 
> 时间：2013-03-09T03:32:55.717
> 
> 标签：c#, sql, ms-access

我在我的应用程序中设置了这个查询来搜索我的数据库。我将此查询放入 Access 中，它工作正常。但是，当我将它放入我的程序时，该表有 0 个条目。你能帮忙吗？

```
private async Task FilterDB()
        {
            List<string> Filter = new List<string>();

            if (CardNameCheck.IsChecked == true)
                Filter.Add("*" + CardNameBox.Text + "*");
            else
                Filter.Add("*");

            if (CardExpanCheck.IsChecked == true)
                Filter.Add("*" + CardExpanBox.Text + "*");
            else
                Filter.Add("*");

                OleDbConnection DBCon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + Properties.Settings.Default.DatabaseLocation);
                await DBCon.OpenAsync();

                OleDbDataAdapter CardDA = new OleDbDataAdapter("SELECT * FROM Cards WHERE Name like '" + Filter[0] + "' and Expansion like '" + Filter[1] + "'", DBCon);
                DataSet CardDS = new DataSet();
                CardDA.Fill(CardDS);
                DBCon.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:16:03.507

我尝试了您的代码并对其进行了一些修改。适用于 Access2003 .mdb 格式的我。

```
OleDbConnection DBCon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=(k:\mydatabases\mydatabase.mdb");
DBCon.Open();  

// Create a select Command - you need System.Data.OleDb and System.Data for this

OleDbCommand selectCommand = new OleDbCommand();
// define the CommandText with two parameters @Filter1 and @Filter2
selectCommand.CommandText = "SELECT * FROM Cards WHERE Name like @Filter1 and Expansion like @Filter2";

selectCommand.Connection = DBCon;

// Create two string / VarChar Parameters - 
// the following is a standard I commonly use 
// for string/varchar; you might also use OleDbType.NVarChar
OleDbParameter param01 = new OleDbParameter();
param01.ParameterName = "Filter1";
param01.DbType = DbType.AnsiString;
param01.OleDbType = OleDbType.VarChar;
param01.SourceVersion = DataRowVersion.Current;
param01.SourceColumn = "Name";
// provide them with values - I used text boxes for input
// use '%' for like statement - if no parameter provided use single '%' only
if (txtFilter1.Text.ToString().Equals(""))
{
    param01.Value = '%';
}
else
{ 
    param01.Value = '%' + txtFilter1.Text.ToString() + '%'; 
}
// add the parameter to the SelectCommand
selectCommand.Parameters.Add(param01);

// same goes for the second parameter
OleDbParameter param02 = new OleDbParameter();
param02.ParameterName = "Filter2";
param02.DbType = DbType.AnsiString;
param02.OleDbType = OleDbType.VarChar;
param02.SourceVersion = DataRowVersion.Current;
param02.SourceColumn = "Expansion";
if (txtFilter2.Text.ToString().Equals(""))
{
    param02.Value = '%';
}
    else
{
    param02.Value = '%' + txtFilter2.Text.ToString() + '%';
}
selectCommand.Parameters.Add(param02);

OleDbDataAdapter CardDA = new OleDbDataAdapter();
// tell the DataAdapter to use a SelectCommand
CardDA.SelectCommand = selectCommand;
CardDA.GetFillParameters();   // actually not sure if you need this but does no harm either
DataSet CardDS = new DataSet();
CardDA.Fill(CardDS, "TargetTable");
DBCon.Close();

foreach(DataRow row in CardDS.Tables["TargetTable"].Rows)
{
    // do something ;
} 
```

祝你好运！

# javascript - Highslide：重新缩小图像的问题

> ID：15306827
> 
> 赞同：0
> 
> 时间：2013-03-09T03:33:03.843
> 
> 标签：javascript, highslide

首先，只想感谢作者免费提供这么多的代码，感谢社区帮助像我这样的 Java 文盲。

任何人，这是我的问题：当我单击缩略图放大它时，它放大得很好。但是，当它被放大时，我可以缩小它的唯一方法是将光标放在非常细的 ~1px 边框上。在图像本身上方时，我没有得到放大镜缩小光标。如果您想查看问题，代码位于[http://www.coloradocanopyclub.com/photos.html](http://www.coloradocanopyclub.com/photos.html)。

****编辑添加****这个问题似乎只影响第一张照片。(塔利森.JPG)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:10:41.290

style.css 文件顶部的通用选择器会导致此问题：
`* {margin:0px;padding:0px;top:0px;left: 0}`
可以将所有元素的边距和填充设置为 0，但是当您将所有相对/绝对定位元素的顶部/左侧位置设置为 0 时，问题就开始了。

您可能已经注意到 Highslide 完全展开按钮。此按钮位于图像顶部的叠加层中。完全展开按钮的标准位置是右下角：[http](http://screencast.com/t/WPP4iwwCI9dq) ://screencast.com/t/WPP4iwwCI9dq您的通用选择器将其移动到左上角：[http](http://screencast.com/t/maXl9rzveH) ://screencast.com/t/maXl9rzveH当按钮移动时像这样使用 CSS，它将导致覆盖整个图像的覆盖 - 在此屏幕截图中为红色：http: [//screencast.com/t/6pdDnxaMRQ](http://screencast.com/t/6pdDnxaMRQ) - 这使得无法关闭图像。

您需要将您的通用选择器更改为：
`* {margin:0px;padding:0px;}`
并且`top:0px;left:0px;`只添加到您需要它的选择器中，它们是（据我所知）`#navlist li a span`和`#content`

# objective-c - “生活在堆中”是什么意思？

> ID：15306834
> 
> 赞同：6
> 
> 时间：2013-03-09T03:34:07.857
> 
> 标签：objective-c

我正在学习Objectiv C，我经常听到“生活在堆中”这个词，据我所知，它是指针所在的某种未知区域，但试图真正理解确切的术语......比如“我们应该制作我们的财产`strong`，这样它就不会生活在堆中。他说，因为财产是私有的。我知道这是一个很大的不同。很明显，我们要确保我们想要计算对这个对象，所以自动释放不会清理它（我们想从我目前所知道的“保留”它），但我想确保我理解这个术语，因为它经常被使用。

欣赏它

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T03:43:09.803

C（以及扩展，Objective C）程序使用三个主要的内存区域来存储数据：

*   静态区域
*   自动区域（也称为“堆栈”），以及
*   动态区域（也称为“堆”）。

当您通过发送对象的类 a`new`或`alloc`消息来分配对象时，结果对象被分配在动态存储区域中，因此该对象被称为存在于堆中。所有 Objective-C 对象都是这样（尽管*引用*这些对象的指针可能位于三个内存数据区域中的任何一个中）。相反，原始局部变量和数组“存在”在堆栈中，而全局原始变量和数组存在于静态数据存储中。

只有堆对象被引用计数，尽管您可以使用`malloc`/ `calloc`/从堆中分配内存`realloc`，在这种情况下分配不会被引用计数：您的代码将负责决定何时`free`分配动态内存。

# wpf - PasswordBox 绑定问题 MVVM

> ID：15306835
> 
> 赞同：2
> 
> 时间：2013-03-09T03:34:13.247
> 
> 标签：wpf, mvvm, securestring, passwordbox

我遇到了密码框绑定的问题。我的应用程序遵循 MVVM。当我试图搜索谷歌以了解如何解决密码框绑定问题时，我发现了两种解决方案 - 1> 使用附加属性 2> 使用安全字符串（[http://www.griffinscs.com/blog /?tag=mvvm](http://www.griffinscs.com/blog/?tag=mvvm)）。由于第二个选项似乎更安全，我倾向于选择这个选项。但后来我发现我可以使用以下代码在安全字符串中提取实际字符串

```
IntPtr iPtr = Marshal.SecureStringToBSTR(securePassword);
// securePassword is of SecureString type

string str = Marshal.PtrToStringUni(iPtr); 
```

现在我有点困惑。请帮助我理解以下问题 1> 使用安全字符串真的比使用字符串更好吗？2> 当我遵循 MVVM 模式并且同时我希望密码字符串是安全的时，以上两者中的哪一个是正确的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:27:32.177

> 使用安全字符串真的比使用字符串更好吗

是和不是。[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)为您提供了如何将秘密字符串保存在内存中的选项。它们有助于防止调皮的人使用调试器检查应用程序的内存内容以寻找秘密，并且它们还提供比常规字符串更好的处置保证。但也必须说它们是一个可以使用的 PITA，目前实际上很少有框架使用它们。[这个先前的 SO 答案](https://stackoverflow.com/a/141393/109702)可能会很好地说明它们的好处。

> 当我遵循 MVVM 模式并且同时我希望密码字符串是安全的时，以上两者中的哪一个是正确的选择

在某些阶段，您将需要使用密码。很难获得 SecureString 的内容——它是为了安全。但是您如何获取内容并将该密码存储到您的数据库中，以便您可以将未来的登录与其进行比较？答案是 SecureString 不能解决这个问题——你仍然需要在盐和散列并存储它之前提取真正的字符串。如果输入的密码用于创建 X509Certificate2 并且您永远不会存储它，则使用 SecureString。

**所以，答案是……**
在需要自己访问字符串内容的地方使用常规字符串，在框架方法或 API 函数需要的地方使用安全字符串。

这意味着如果您要在 UI 中使用 PasswordBox，那么您将需要访问未加密的内容，以便您可以将其存储或将其与先前存储的条目进行比较。

# java - 将二维数组加载到 java 链表中

> ID：15306836
> 
> 赞同：-2
> 
> 时间：2013-03-09T03:34:13.733
> 
> 标签：java, linked-list

我是一个写数独程序的新程序员。我将猜测值存储到链表结构中。我有一种方法可以确定最佳猜测位置在哪里，然后猜测该条目的所有可能值。

我的具体问题是，当我循环输入多个猜测时，后续的猜测会覆盖之前的猜测，所以我最终会得到guessQueue 持有相同猜测的多个副本。我应该如何调用加载到链表中以避免这个问题？我创建了一个简短的示例方法来说明此处的要点（希望是 SCCE）：

```
public void TestLinkedList(){
    LinkedList testQueue = new LinkedList();
    int[][] testGrid = new int[9][9];
    for (int k=0;k<10;k++){
        for (int j=0;j<9;j++){
            for (int jj=0;jj<9;jj++){
                testGrid[j][jj]=k;
            }            
        }
        testQueue.addLast(testGrid);
    }
} 
```

我希望链表中的每个条目都包含一个数组，数组中的每个值都比链表中的前一个条目高 1，但是链表中数组中的所有值都是相同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:55:01.873

Arrays 类和 Collections 框架可以帮助您：

Java 代码：T[] 数组= new T[ ... ]; List list= new LinkedList(Arrays.asList(array));

# c# - 无法映射路径“/”

> ID：15306843
> 
> 赞同：1
> 
> 时间：2013-03-09T03:35:13.053
> 
> 标签：c#, asp.net, visual-studio-2010, iis-7.5

我在 Visual Studio 中有一个 ASP.Net 网站解决方案，在尝试时`Server.MapPath(@"\");`收到以下错误。我知道以前有人问过这个问题，但我还没有找到适合我的解决方案。任何想法都会很棒。

```
Failed to map the path '/'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Failed to map the path '/'.

Source Error: 

Line 10:     protected void Page_Load(object sender, EventArgs e)
Line 11:     {
Line 12:       string directory = Server.MapPath(@"\");
Line 13:       Response.Write(directory);
Line 14:     }

Source File: c:\Users\Josh\Documents\Visual Studio 2010\WebSites\MMCR\About.aspx.cs    Line: 12 

Stack Trace: 

[InvalidOperationException: Failed to map the path '/'.]
   System.Web.Hosting.HostingEnvironment.MapPathActual(VirtualPath virtualPath, Boolean permitNull) +8937646
   System.Web.Hosting.HostingEnvironment.MapPathInternal(VirtualPath virtualPath) +42
   System.Web.VirtualPath.MapPathInternal() +4
   System.Web.HttpRequest.MapPath(VirtualPath virtualPath, VirtualPath baseVirtualDir, Boolean allowCrossAppMapping) +107
   System.Web.HttpRequest.MapPath(VirtualPath virtualPath) +37
   System.Web.HttpServerUtility.MapPath(String path) +99
   About.Page_Load(Object sender, EventArgs e) in c:\Users\Josh\Documents\Visual Studio 2010\WebSites\MMCR\About.aspx.cs:12
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T04:01:14.097

如果所有其他人建议的解决方案都不起作用，则意味着您的 Visual Studio 没有管理权限。

因此，您可以运行 Visual Studio“以管理员身份运行”并尝试再次执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T03:52:18.763

尝试这个：

```
Server.mapPath("~/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:53:32.600

如果此处没有答案[如何解决错误消息：“无法映射路径'/'。”](https://stackoverflow.com/questions/7355252/how-to-solve-error-message-failed-to-map-the-path) 帮忙，试试`Server.MapPath(@".\");`。这和你的代码对我有用，并产生了相同的结果。

# c++ - 编写程序分析文件

> ID：15306845
> 
> 赞同：-1
> 
> 时间：2013-03-09T03:35:22.617
> 
> 标签：c++

我正在编写一个分析行数未知的输入文件的代码。每行的格式为“国家、城市、城市、州、人口、纬度、经度”。我目前遇到一个错误，我的代码设置了最小和最大的人口。错误说“左操作数必须是左值”。我尝试查找此内容，但找不到答案。

```
#include "city.h"
#include <iostream>
#include <fstream>
#include <string>

using std::string;
using std::ifstream;
using std::istream;
using std::ostream;
using std::cout;
using std::endl;
using std::getline;

void readLineOfData( istream& in, ostream& out, string &country,  string &city, string &city2, 
    string &state, int &pop, string &lat, string &longi);

void output( ostream& out, string country, string city, string city2,
    string state, int pop, string lat, string longi );

void cities( istream& in, ostream& out )
{
    ifstream ("cities.txt");
    string country, city, city2, state, lat, longi;
    int pop;
    readLineOfData(in, country, city, city2, state, pop, lat, longi);
    while(!in.fail())
    {

        output( cout, country, city, city2, state, pop, lat, longi );

        readLineOfData(in, country, city, city2, state, pop, lat, longi);
    }
    return;
}

void readLineOfData( istream& in, string &country,  string &city, string &city2, 
    string &state, int &pop, string &lat, string &longi)
{
    getline( in, country, ',');
    getline( in, city, ',');
    getline( in, city2, ',');
    getline( in, state, ',');
    in >> pop;
    in.ignore( 200, ',' );
    getline( in, lat, ',');
    getline( in, longi, '\n' );

}

void output( istream& in, ostream& out, string country, string city, string city2,
    string state, int pop, string lat, string longi )
{
    int smallestPop = 0;
    int largestPop = 0;
    string smallestCity;
    string largestCity;

    cout << country << endl;
    cout << city << endl;
    cout << city2 << endl;
    cout << state << endl;
    cout << pop << endl;
    cout << lat << endl;
    cout << longi << endl;

        if (pop < smallestPop || smallestPop == 0)
        {
            smallestPop = pop;
            smallestCity = city;
        }

        if (pop > largestPop || largestPop == 0)
        {
            largestPop = pop;
            largestCity = city;
        }

        out << "Smallest City: " << smallestCity << endl;
        out << "Population: " << smallestPop << endl;
        out << endl;
        out << "Largest City: " << largestCity << endl;
        out << "Largest Population: " << largestPop << endl;

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:40:14.920

您在多个表达式中使用`=`而不是：`==`

```
if (pop < smallestPop || smallestPop = 0) 
```

和：

```
if (pop > largestPop || largestPop = 0) 
```

所以你正在做一个分配而不是一个比较。由于[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)，我们看到了这个错误。由于两者`<`和`||`都比第一种情况具有更高的优先级`=`，我们最终得到：

```
((pop > smallestPop) || smallestPop) = 0 
```

这是分配给一个`lvalue`。另一方面，如果你有这个：

```
 if ( pop < smallestPop || (smallestPop = 0) ) 
```

该程序将编译得很好，因为括号会导致分配首先发生。如评论中所述，避免此类问题的一种简单方法是将常量放在左侧。尽管我喜欢这种解决方案，但许多开发人员对这种非传统表示法犹豫不决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:40:01.320

通过查看代码快速猜测。我看到报告“左操作数必须是左值”的常见情况是，当您在尝试比较相等时不小心使用了“=”（赋值）运算符（C++ 和许多其他语言中的“==”） .

# html - 多个属性的CSS？

> ID：15306846
> 
> 赞同：2
> 
> 时间：2013-03-09T03:35:24.520
> 
> 标签：html, css

我正在尝试巩固以下内容：

```
input[type="text"] {
    width: 300px;
}
input[type="password"] {
    width: 300px;
} 
```

变成这样：

```
input[type="text"][type="password"] {
    width: 300px;
} 
```

我试过这个，，`type="text", "password"`和其他一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T03:36:39.583

您可以根据需要使用许多选择器`commas`，

```
input[type="text"],input[type="password"] {
    width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:43:41.880

或者干脆

```
input { width: 300px; } 
```

然后通过类型选择器应用任何其他样式

```
input[type="text"] { background: #ffd; }
input[type="password"] { background: #fff; } 
```

# api - Win32 项目 (API)：与其他版本的 Windows 的兼容性

> ID：15306847
> 
> 赞同：0
> 
> 时间：2013-03-09T03:35:29.850
> 
> 标签：api, winapi, compatibility

我使用 API 来制作程序。它在 Windows 7 上运行得很好（带有调试文件 .exe），但是当我在 Windows XP 上运行它时就不行了。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:21:10.427

根据您收到的消息，我想您正在使用 Visual C++。

您的项目（默认情况下）设置为动态链接 Microsoft C++ 运行时库，因此它可以节省最终可执行文件中的空间，但您需要将动态链接库放在您的系统或可执行文件的文件夹中。

为了在 Visual C++ 中解决这个问题，在不让谁在他们的机器上执行程序的情况下，您可以更改 MSVC 如何将他们的运行时库链接到您的可执行文件，也就是说，如果您将其设置为静态链接，则所有依赖项都将是链接在你的 final`.exe`中，不需要额外`.dll`的 s。

要更改此选项，请参阅[/MD、/MT、/LD（使用运行时库）- MSDN](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.100%29)。

或者简而言之：`Project Properties`> `Configuration Properties`> `C/C++`> `Code Generation`>`Runtime Library`

如果处于调试模式，则使用`/MTd`，否则使用`/MT`.

# haskell - 过滤单值的无限列表

> ID：15306848
> 
> 赞同：7
> 
> 时间：2013-03-09T03:35:34.083
> 
> 标签：haskell, monads

也许这很明显，但我似乎无法弄清楚如何最好地过滤无限的 IO 值列表。这是一个简化的示例：

```
infinitelist :: [IO Int]

predicate :: (a -> Bool)

-- how to implement this?
mysteryFilter :: (a -> Bool) -> [IO a] -> IO [a]

-- or perhaps even this?
mysteryFilter' :: (a -> Bool) -> [IO a] -> [IO a] 
```

也许我必须以`sequence`某种方式使用，但我希望评估是懒惰的。有什么建议么？本质是，对于`IO Int`输出中的每一个，我们可能必须检查`IO Int`输入中的几个值。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T03:56:11.990

不使用`unsafeInterleaveIO`或类似的东西是不可行的。您不能使用第二种类型签名编写过滤器，因为如果可以的话，您可以说

```
unsafePerformIOBool :: IO Bool -> Bool
unsafePerformIOBool m  = case mysteryFilter' id [m] of
    []    -> False
    (_:_) -> True 
```

同样，第一个类型签名不起作用——任何递归调用都会给你返回 type 的东西`IO [a]`，但是要从中构建一个列表，你需要在返回结果之前*执行*`:`此操作（因为不在IO 你需要使用`>>=`）。通过归纳，您必须先执行列表中的所有操作（当列表无限长时，这将永远需要）才能返回结果。

`unsafeInterleaveIO`解决了这个问题，但不安全。

```
 mysteryFilter f [] = return []
 mysteryFilter f (x:xs) = do ys <- unsafeInterleaveIO $ mysteryFilter f xs
                             y <- x
                             if f y then return (y:ys) else return ys 
```

问题是这破坏了 monad 应该提供的顺序。你不再保证你的一元动作何时发生（它们可能永远不会发生，它们可能会发生多次，等等）。

列表不能很好地与 IO 配合使用。这就是为什么我们有过多的流类型（Iteratees、Conduits、Pipes 等）。

最简单的这种类型可能是

```
data MList m a = Nil | Cons a (m (MList m a)) 
```

请注意，我们观察到

```
[a] == MList Id a 
```

自从

```
toMList :: [a] -> MList Id a
toMList [] = Nil
toMList (x:xs) = Cons x $ return $ toMList xs

fromMList :: MList Id a -> [a]
fromMList Nil = []
fromMList (Cons x xs) = x:(fromMList . runId $ xs) 
```

此外，MList 是一个仿函数

```
instance Functor m => Functor (MList m) where
  fmap f Nil = Nil
  fmap f (Cons x xs) = Cons (f x) (fmap (fmap f) xs) 
```

它是函子和自然变换范畴中的函子。

```
trans :: Functor m => (forall x. m x -> n x) -> MList m a -> MList n a
trans f Nil = Nil
trans f (Cons x xs) = Cons x (f (fmap trans f xs)) 
```

有了这个很容易写出你想要的

```
mysteryFilter :: (a -> Bool) -> MList IO (IO a) -> IO (MList IO a)
mysteryFilter f Nil = return Nil
mysteryFilter f (Cons x xs)
  = do y <- x
       let ys = liftM (mysteryFilter f) xs
       if f y then Cons y ys else ys 
```

或其他各种类似的功能。

# ffmpeg - 使用 gstreamer 扰动音频/视频解码执行跟踪

> ID：15306850
> 
> 赞同：0
> 
> 时间：2013-03-09T03:36:01.983
> 
> 标签：ffmpeg, gstreamer

我是 gstreamer 社区的新成员，我有一个管道来解码和跟踪 .mp4 文件。

```
gst-launch --gst debug=filesrc:7,queue:7,audioconvert:7,audioresample:7,qtdemux:7,faad:7,ffmpeg:7,audioresample:7,audioconvert:7,autoaudiosink:7,autovideosink:7,  filesrc location=...! qtdemux name=demuxer demuxer. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demuxer. ! queue ! ffdec_h264 ! ffmpegcolorspace ! autovideosink > file1 
```

我插入了“身份”组件来干扰解码，并且有效地，我看到图像变得非常缓慢并且声音消失了。我使用了这个命令：

```
gst-launch --gst debug=filesrc:7,queue:7,audioconvert:7,audioresample:7,qtdemux:7,faad:7,ffmpeg:7,audioresample:7,audioconvert:7,autoaudiosink:7,autovideosink:7,  filesrc location=...! qtdemux name=demuxer demuxer. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demuxer. ! queue ! identity sleep-time=1000000 ! ffdec_h264 ! ffmpegcolorspace ! autovideosink > file2 
```

我第一次执行此操作时，file2 中出现了两个新函数，

(i) **gst_ffmpegdec_chain...'跳过...'**，

(ii) **gst_ffmpegdec_video_frame...'正在丢弃..'**

我认为意思是某些数据被删除或其他

但是，自从很多天以来，我使用相同的管道，使用相同的视频进行解码；我获得了同样糟糕的可视化，但是文件 2 中的任何新函数 :( 唯一的区别是以下函数的出现次数：

*gst_ffmpegdec_update_qos:...'update* 558 次在一种情况下

*gst_ffmpegdec_update_qos:...'update* 4 次在其他情况下

我不知道为什么我无法再次用**“skipping..”**和**“dropping..”产生干扰痕迹**

我的问题是：

1-您对上述功能的含义有任何想法吗？

2-您知道任何其他有助于干扰 A/V 解码处理的组件吗？

谢谢你的任何回复

# javascript - 骨干集合提取（add：true）不更新集合

> ID：15306852
> 
> 赞同：8
> 
> 时间：2013-03-09T03:36:12.210
> 
> 标签：javascript, backbone.js, underscore.js

```
loadMore: function(){
    var $this = this;
    console.log(this.Messages); //SAME AS AFTER
    this.Messages.url = '/js/messages/?start=' + this.Messages.length
    this.Messages.fetch({'add':true,
        success:function(){
            console.log($this.Messages); //SAME AS BEFORE??
        },
        error:function(){
        }
    });
 }, 
```

集合未更新。在此函数之后，会触发事件，并在屏幕上绘制新项目。问题是该集合没有添加新模型。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T05:05:14.520

如前一个答案中所述，该`add`选项已在 1.0.0 中删除。你可以通过传递`remove: false`来完成同样的事情。从[文档：](http://backbonejs.org/#Collection-fetch)

> 可以使用可用的 set 选项自定义 fetch 的行为。例如，要获取一个集合，为每个新模型获取一个“添加”事件，为每个更改的现有模型获取一个“更改”事件，而不删除任何内容：`collection.fetch({remove: false})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T12:05:16.987

在骨干网 1.0 中，您必须手动触发重置：

```
youColloection.fetch({reset: true}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:35:26.300

Backbone 1.0 删除了这个特性，破坏了依赖于这个的代码：

[http://backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)

与之比较：

“如果您想将传入的模型添加到当前集合中，而不是替换集合的内容，请将 {add: true} 作为获取的选项传递。”

[http://htmlpreview.github.com/?https://raw.github.com/documentcloud/backbone/0.9.2/index.html#Collection-fetch](http://htmlpreview.github.com/?https://raw.github.com/documentcloud/backbone/0.9.2/index.html#Collection-fetch)

我建议在修复此问题之前恢复到旧版本的 Backbone。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T11:38:36.150

Backbone.Collection.fetch()：

```
fetch: function(options) {
  options = options ? _.clone(options) : {};
  if (options.parse === void 0) options.parse = true;
  var success = options.success;
  options.success = function(collection, resp, options) {
    var method = options.update ? 'update' : 'reset';
    collection[method](resp, options);
    if (success) success(collection, resp, options);
  };
  return this.sync('read', this, options);
}, 
```

所以这里的情况是，您传入的函数被分配给`var succees`.
`collection[method](resp, options);`被调用，在你的情况下方法是`'reset'`.
`collection.reset`必须通过并添加所有模型，在途中触发所有事件。我不知道到底发生了什么，但它经历了`collection.reset`, `collection.add`, `model.add`, 等等……我没有完全按照。

我不确定到底是什么问题，对此我很抱歉。我希望我至少可以帮助您尝试一些事情，这样也许我们可以弄清楚。该行`if (success) success(collection, resp, options)`是对您的 succes 函数的调用。您可能会尝试做的是让您的成功回调接受传回的参数并对其进行一些安慰：

```
success: function(collection, resp, options) {
  console.log(collection); // this might do the trick.

  // if not, you could try the following
  collection.on("reset", function(c, options) {
    console.log(c); // see what that gives ya.
  });
} 
```

另一件事是，我在源代码或文档中找不到 collection.fetch 采用添加选项的任何地方。如果我错过了，请告诉我我想看一下。

祝你好运，让我知道你发现了什么。也可能值得通过调试器逐步完成。

妈的，我也很震惊，控制台经常向我展示不应该展示的最新版本的集合对象。

尝试安慰集合的长度，而不是什么：

```
var len = $this.Messages.length;
console.log(len);

//...
// or in the success callback
var len = collection.length;
console.log(len); 
```

# c# - 之前存储了两个 DateTimeOffset 对象后，IsolatedStorageSettings.ApplicationSettings 无法加载设置

> ID：15306853
> 
> 赞同：3
> 
> 时间：2013-03-09T03:36:15.910
> 
> 标签：c#, windows-phone-8

这是一个有趣的奇怪行为（阅读：错误）。我的简单测试应用程序中有以下两种方法：

```
 private void Save()
    {
        var settings = IsolatedStorageSettings.ApplicationSettings;
        settings["foo"] = new DateTimeOffset(2012, 12, 12, 12, 12, 12, TimeSpan.Zero);
        settings["bar"] = new DateTimeOffset(2011, 11, 11, 11, 11, 11, TimeSpan.Zero);
        settings.Save();
    }

    private void Load()
    {
        var settings = IsolatedStorageSettings.ApplicationSettings;
        string foo = settings["foo"].ToString();
        string bar = settings["bar"].ToString();
    } 
```

当我运行我的应用程序时，我可以调用 Save 然后 Load 并获得保存的值。但是，当我停止应用程序，再次启动它并尝试加载时，有第一次机会`InvalidOperationException`（在`ApplicationSettings`属性内），然后设置对象为空（我的值丢失了）。异常说：

> 类型“System.DateTimeOffset”无法添加到已知类型列表，因为另一个类型“System.Runtime.Serialization.DateTimeOffsetAdapter”具有相同的数据合同名称“ [http://schemas.datacontract.org/2004/07/System:DateTimeOffset](http://schemas.datacontract.org/2004/07/System:DateTimeOffset) ' 已经存在。

当我使用 ISETool.exe 查看保存到`_ApplicationSettings`文件的内容时，我可以看到有两种`DateTimeOffset`类型引用，这可能是问题所在。换句话说，`IsolatedStorageSettings.Save()`创建一个以后无法加载的损坏文件。

如果我将不同的类型保存到“栏”设置，一切正常。仅当我保存两个或多个 DateTimeOffset 值时才会出现此问题。作为一种解决方法，我可以将所有 DateTimeOffset 值手动序列化为字符串。不过我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:13:15.983

您似乎确实发现了 AppliationSettings 对象的错误。如果您打算在 ApplicationSettings 中存储 DateTimeOffset 值，那么这种方法将起作用。

使用您的设置创建一个类：

```
 public class MyAppSettings
    {
        public DateTimeOffset Foo { get; set; }
        public DateTimeOffset Bar { get; set; }
    } 
```

改变你的方法如下：

```
 private void Save()
    {
        Collection<MyAppSettings> myAppSettings = new Collection<MyAppSettings>();
        myAppSettings.Add(new MyAppSettings
        {
            Foo = new DateTimeOffset(2012, 12, 12, 12, 12, 12, TimeSpan.Zero),
            Bar = new DateTimeOffset(2011, 11, 11, 11, 11, 11, TimeSpan.Zero)
        });
        IsolatedStorageSettings.ApplicationSettings["MyAppSettings"] = myAppSettings;
    }

    private void Load()
    {
        Collection<MyAppSettings> myAppSettings = (Collection<MyAppSettings>)IsolatedStorageSettings.ApplicationSettings["MyAppSettings"];
        string foo = myAppSettings.First().Foo.ToString();
        string bar = myAppSettings.First().Bar.ToString();
    } 
```

但是，我会阅读此答案以了解将此类信息存储在您自己的设置文件中的技术。 [windows phone 7 隔离存储设置.ApplicationSettings 复杂数据](https://stackoverflow.com/questions/6684416/windows-phone-7-isolatedstoragesettings-applicationsettings-complex-data)

此外，您可以更简单地处理此问题，并通过如下更改 Save 和 Load 方法来避免使用 Collection。

```
 private void Save()
    {
        MyAppSettings myAppSettingsSimple = new MyAppSettings
        {
            Foo = new DateTimeOffset(2012, 12, 12, 12, 12, 12, TimeSpan.Zero),
            Bar = new DateTimeOffset(2011, 11, 11, 11, 11, 11, TimeSpan.Zero)
        };
        IsolatedStorageSettings.ApplicationSettings["MyAppSettingsSimple"] = myAppSettingsSimple;
    }

    private void Load()
    {
        MyAppSettings myAppSettingsSimple = (MyAppSettings)IsolatedStorageSettings.ApplicationSettings["MyAppSettingsSimple"];
        txtFoo.Text = myAppSettingsSimple.Foo.ToString();
        txtBar.Text = myAppSettingsSimple.Bar.ToString();
    } 
```

# c# - Box2D 身体速度上限？

> ID：15306860
> 
> 赞同：13
> 
> 时间：2013-03-09T03:36:55.747
> 
> 标签：c#, box2d

我有一个质量为 10 的物体，程序的每个循环我使用简单的方法对其施加 100 的力；

```
Vector2 force = new Vector2(0, 1) * 100;
bod.ApplyForce(force, bod.GetWorldCenter()); 
```

It works great, accelerates and all of that, but once it gets to a velocity of 10 (100 / 10 I assume) it won't go any faster. I am not a physicist by any means, but I do recall that the body should continually accelerate, like it would under gravity. Is this speed limit a result of the way Box2D does things, or am I royally screwing something up ? Also, what do I do to fix it.

**NOTE:** I get the same limited velocity if I use ApplyLinearImpulse instead of ApplyForce

**Update:** I am well aware of the overall max speed limit imposed by Box2D (in b2Settings.h). In my example, the item in question is moving well below this limit as changing the appplied force, be it 1000 or 10000 will always come around to the max velocity of (force / mass).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:59:45.610

您正在达到物体的最大允许速度。有两种方法可以解决此问题：

1.  在 Box2D 设置中调整最大允许速度；打开设置并将`MaxTranslation`float/const 更改为更高的值，我假设它是默认的`2.0`.

2.  缩小对象大小，执行必要的计算，放大对象。这是技术上正确的做法，正如 Box2D 的注释`MaxTranslation`：

> 物体的最大线速度。此限制非常大，用于防止出现数值问题。您不需要对此进行调整。

所以尝试#1，如果这确实有效，那么这意味着你可能需要扩展。希望有帮助。

# c++ - 如何使用 websocket++ 0.3X 跟踪用户

> ID：15306862
> 
> 赞同：5
> 
> 时间：2013-03-09T03:37:24.357
> 
> 标签：c++, boost, websocket, sessionid, websocket++

有没有办法使用 websocket++ 0.3X 跟踪每个用户的数据？

我希望能够识别他们，以便跟踪他们正在查看的内容以及应该发送给他们的内容。以堆栈为例：当您查看此问题时，websocket 可以（我认为*确实如此*）记住您正在查看此问题并向您发送适当的更新，如投票、新评论和答案，以及StackExchange 更新在左上角。

此外，用户需要能够识别。websocket 中是否存在已经隐藏在 websocket++ 中的会话 ID？如果没有，websocket++ 如何跟踪用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:32:51.183

正如您在回答中提到的，最简单的方法是使用 connection_hdl 作为关联容器的键，该容器存储您需要的任何其他数据。对于这种查找成本太高的情况，WebSocket++ 确实有一些其他选项。

由于这是一个常见问题，我在这里写了一些更正式的示例和文档来说明如何做到这一点：[http](http://www.zaphoyd.com/websocketpp/manual/common-patterns/storing-connection-specificsession-information) ://www.zaphoyd.com/websocketpp/manual/common-patterns/storing-connection-specificsession-information .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:37:58.737

喔好吧。它一直隐藏在人们的视线中。 [http://www.zaphoyd.com/websocketpp/manual/building-program-websocket](http://www.zaphoyd.com/websocketpp/manual/building-program-websocket)

> 连接句柄是唯一标识接收到消息的连接的令牌。它可用于标识发送回复消息的位置或存储并用于稍后推送消息。连接句柄的类型是 websocketpp::connection_hdl。

# python - HICON/HBITMAP 到 QIcon/QPixmap/QImage/任何带有 Q 的东西

> ID：15306866
> 
> 赞同：4
> 
> 时间：2013-03-09T03:38:01.697
> 
> 标签：python, pyside

我正在尝试从 Windows 中的文件中获取 48x48 或 256x256 图标，但遇到了看似死胡同的情况。目前我在 python 中有一个 HICON 句柄（因为 PySides QFileIconProvider 只返回 32x32 图标），我想在 pyside 窗口中显示它，但是像 QPixmap.fromHICON/HBITMAP 这样的函数没有实现，而且似乎已经从源代码中删除了从 Qt 4.8（？）开始。另外，我试图避免将图标保存到文件中。

那么，有什么方法可以将 HICON 或任何其他您可以将其转换为任何类型的 PySide 对象的东西？

编辑：我一直在尝试简单地重写 python 中的 WinHBITMAP 函数中的旧函数，但效果并不好。我不确定如何将 src 行转换为 python，我也不知道如何更改 QImage.scanLine() 返回的内存缓冲区的值

```
for (int y=0; y<h; ++y) {
            QRgb *dest = (QRgb *) image.scanLine(y);
            const QRgb *src = (const QRgb *) (data + y * bytes_per_line);
            for (int x=0; x<w; ++x) {
                dest[x] = src[x] | mask;
            }
        } 
```

目前，我使用 win32api 从 HICON 创建 PyCBITMAP 并检索位列表。

```
for y in range(0, hIcon.height):
    dest = i.scanLine(y)
    src = bitmapbits[y*hIcon.widthBytes:(y*hIcon.widthBytes)+hIcon.widthBytes]

    for x in range(0, hIcon.width):
        dest[x] = bytes(ctypes.c_uint32(src[x] | 0)) 
```

这导致“ValueError：无法修改 memoryview 对象的大小”

该函数的来源可以在这里找到：[http ://www.qtcentre.org/threads/19188-Converting-from-HBitmap-to-a-QPixmap?p=94747#post94747](http://www.qtcentre.org/threads/19188-Converting-from-HBitmap-to-a-QPixmap?p=94747#post94747)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:03:26.887

修复！

```
def iconToQImage(hIcon):
    hdc = win32ui.CreateDCFromHandle(win32gui.GetDC(0))
    hbmp = win32ui.CreateBitmap()
    hbmp.CreateCompatibleBitmap(hdc, hIcon.width, hIcon.height)
    hdc = hdc.CreateCompatibleDC()
    hdc.SelectObject(hbmp)

    win32gui.DrawIconEx(hdc.GetHandleOutput(), 0, 0, hIcon.hIcon, hIcon.width, hIcon.height, 0, None, 0x0003)

    bitmapbits = hbmp.GetBitmapBits(True)
    image = QtGui.QImage(bitmapbits, hIcon.width, hIcon.height, QtGui.QImage.Format_ARGB32_Premultiplied)
    return image 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:57:31.487

进行这种设置有点困难，但从我读到 Python Imaging Library (PIL) 支持[位图和 ICO 文件](http://www.pythonware.com/library/pil/handbook/index.htm)，并且有[适用于 Windows 的下载](http://www.pythonware.com/products/pil/)。假设您可以获得图标的文件名，您可以使用 PIL 加载它，然后将[原始数据传输到 QImage](http://qt-project.org/forums/viewthread/5866/#35038)：

```
from PIL import Image
from PySide.QtGui import QImage, QImageReader, QLabel, QPixmap, QApplication

im = Image.open("my_image.png")
data = im.tostring('raw', 'RGBA')

app = QApplication([])

image = QImage(data, im.size[0], im.size[1], QImage.Format_ARGB32)
pix = QPixmap.fromImage(image)
lbl = QLabel()
lbl.setPixmap(pix)
lbl.show()

app.exec_() 
```

然后`QImage`从那里开始您需要执行的任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T11:05:55.773

虽然@egs0 的答案是准确的，但尝试显示输出可能会导致问题，因为`QLabel`不能很好地处理位图。要解决这些问题，请将结果转换为另一种图像格式。

```
import win32ui
import win32gui
# Doesn't matter which library. Qt5 should work just as well.
from PySide6 import QtGui, QtCore

def iconToQImage(hIcon, width, height, im_format="PNG"):
    hdc = win32ui.CreateDCFromHandle(win32gui.GetDC(0))
    hbmp = win32ui.CreateBitmap()
    hbmp.CreateCompatibleBitmap(hdc, width, height)
    hdc = hdc.CreateCompatibleDC()
    hdc.SelectObject(hbmp)

    win32gui.DrawIconEx(hdc.GetHandleOutput(), 0, 0, hIcon, width, height, 0, None, 0x0003)

    bitmapbits = hbmp.GetBitmapBits(True)
    image = QtGui.QImage(bitmapbits, width, height, QtGui.QImage.Format_ARGB32_Premultiplied)

    # Write to and then load from a buffer to convert to PNG.
    buffer = QtCore.QBuffer()
    buffer.setOpenMode(QtCore.QIODevice.ReadWrite)
    image.save(buffer, im_format)
    image.loadFromData(buffer.data(), im_format)

    # Use QtGui.Pixmap.fromImage() to get a pixmap instead.
    return image 
```

也可以使用以下函数获取图标的大小，改编自[此处](https://stackoverflow.com/questions/1913468/how-to-determine-the-size-of-an-icon-from-a-hicon)：

```
def getIconSize(HIcon):
    info = win32gui.GetIconInfo(HIcon)

    if info[4]:  # Icon has color plane.
        bmp = win32gui.GetObject(info[4])

        width = bmp.bmWidth
        height = bmp.bmHeight
    else: # Icon has no colour plane, image data stored in mask.
        bmp = win32gui.GetObject(info[3])

        width = bmp.width 
        height = bmp.height // 2  # A monochrome icon contains image and XOR mask in the hbmMask.

    info[3].close()
    info[4].close()

    return width, height 
```

# exception - 在代码中命名异常

> ID：15306868
> 
> 赞同：1
> 
> 时间：2013-03-09T03:38:03.367
> 
> 标签：exception, perspective

我正在编写一个编译器。如您所知，可能需要处理大量不同的错误。例如，如果你在符号表中插入一个已经存在的值，你会抛出一个异常（然后在某处的代码中捕获它）。

我想从堆栈溢出中获得一些关于人们如何命名他们自己的自定义异常的观点。

*   你遵守什么特别的规则吗？
*   它们只是一些你马上想到的名字吗？
*   名字有多长？例如 SymbolValueInTableException 听起来太多了！

感谢您分享您的观点。

（如果您愿意，我可以显示一些代码，但这对讨论毫无意义）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:48:10.953

异常名称应该清楚地概述您的程序遇到了什么样的错误。例如，“NullPointerReferenceException”明确概述了您遇到的确切错误 - 空指针引用！只要准确，通常越长越好。最后，这取决于你。好好评论，一切都会好起来的。

# python - 在 Python 中返回一个角色中的对象并在 QML 中获取另一个对象的引用

> ID：15306872
> 
> 赞同：1
> 
> 时间：2013-03-09T03:38:37.663
> 
> 标签：python, qt, pyqt, qml

我正在写一个 Twitter 客户端。我实施了`TweetItem`和`TweetModel`. `TweetItem`问题是在被调用的中有一个角色`original`。我希望它指向原始推文。

更新：我的代码中有一些错字。现在我修好了它们。

```
import sys
from PyQt4 import QtCore, QtGui, QtDeclarative

class TweetModel(QtCore.QAbstractListModel):
    def __init__(self, prototype, parent=None):
        QtCore.QAbstractListModel.__init__(self, parent)
        self.setRoleNames(prototype.roleNames())
        self.tweets = []

    def appendRow(self, item):
        self.tweets.append(item)

    def rowCount(self, parent=QtCore.QModelIndex()):
        return len(self.tweets)

    def data(self, index, role):
        return self.tweets[index.row()].data(role)

class TweetItem(QtCore.QAbstractItemModel):
    def __init__(self, id=None, original=None, parent=None):
        QtCore.QAbstractItemModel.__init__(self, parent)
        self.idRole = QtCore.Qt.UserRole + 1
        # More Roles
        self.originalRole = QtCore.Qt.UserRole + 6

        self.id = id
        self.original = original

    def roleNames(self):
        names = {}
        names[self.idRole] = "id"
        names[self.originalRole] = "original"
        return names

    def data(self, role):
        if role == self.idRole:
            return self.id
        elif role == self.originalRole:
            # self.original == <__main__.TweetItem object at 0x7fb703d95d40>
            return self.original
        else:
            return None

if __name__ == "__main__":
    model = TweetModel(TweetItem())
    item = TweetItem("0001", None, model)
    model.appendRow(TweetItem("0002", item, model))

    App = QtGui.QApplication(sys.argv)
    view = QtDeclarative.QDeclarativeView()
    view.rootContext().setContextProperty("mymodel", model)
    view.setSource(QtCore.QUrl.fromLocalFile("main.qml"))
    view.show()
    App.exec_() 
```

但我不能在 QML 中使用它。我得到一个`undefined`值。

```
import QtQuick 1.0

Rectangle {
  width: 360
  height: 360

  ListView {
         anchors.fill: parent
         model: mymodel
         // original.id == undefined
         delegate: Component { Text { text: id + " " + original.id } }
  } 
} 
```

那么，是否可以在 a 中返回一个对象`role`并使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:35:59.533

我的猜测是，您未定义不是在访问您的**TweetItem**对象时，而是在尝试从中获取 id 时。

看起来，您在**TweetItem中的*****QAbstractItemModel***实现是不正确的。它的数据方法不接受任何索引，也不实现rowCount。如果您仍然不想使用它，请参阅 Qt 文档以了解如何正确实现***QAbstractItemModel接口。***

 ***为了实现您想要的，我的建议是改为将**QObject**子类化，并提供您的附加数据，因为它被命名为属性以在 QML 中使用它们。[**有关如何将 QObject 与 QML 绑定，**](http://qt-project.org/doc/qt-4.8/qtbinding.html#modifying-properties)请参阅 Qt 指南的这一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:52:20.280

正如[dant3](https://stackoverflow.com/users/2272176/dant3)所建议的，将 QObject 与属性一起使用。

这是一个如何做到这一点的例子：

```
import sys
from PyQt4 import QtCore, QtGui, QtDeclarative
from PyQt4.QtCore import pyqtProperty, pyqtSignal, QObject

class TweetModel(QtCore.QAbstractListModel):
    def __init__(self, prototype, parent=None):
        QtCore.QAbstractListModel.__init__(self, parent)
        self.setRoleNames(prototype.roles)
        self.tweets = []

    def appendRow(self, item):
        self.tweets.append(item)

    def rowCount(self, parent=QtCore.QModelIndex()):
        return len(self.tweets)

    def data(self, index, role):
        return self.tweets[index.row()].data(role)

class TweetItem(QObject):
    roles = {
        QtCore.Qt.UserRole + 1: 'id',
        QtCore.Qt.UserRole + 6: 'original',
    }

    id_changed = pyqtSignal()

    def __init__(self, id=None, original=None, parent=None):
        QObject.__init__(self, parent=parent)

        self._data = {'original': original}
        self.id = id

    def data(self, key):
        return self._data[self.roles[key]]

    @pyqtProperty(str, notify=id_changed)
    def id(self):
        return self._data['id']

    @id.setter
    def id(self, value):
        if self._data.get('id') != value:
            self._data['id'] = value
            self.id_changed.emit()

if __name__ == "__main__":
    model = TweetModel(TweetItem)
    item = TweetItem("0001", None, model)
    model.appendRow(TweetItem("0002", item, model))

    App = QtGui.QApplication(sys.argv)
    view = QtDeclarative.QDeclarativeView()
    view.rootContext().setContextProperty("mymodel", model)
    view.setSource(QtCore.QUrl.fromLocalFile("main.qml"))
    view.show()
    App.exec_() 
```

QML 文件保持不变。

我没有创建`original`属性，因为您将其作为模型数据获取，但您可以以与`id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:55:32.607

1.  直接回答：你得到了`undefined`因为，因为你`TweetItem.original`实际上是`None`。
2.  我不确定您要完成什么，但我想澄清一些可能的误解。`QAbstractItemModel`也是一个模型类，看到有点奇怪

    ```
    def data(self, index, role):
        return self.tweets[index.row()].data(role) 
    ```

那里。***

# ruby - Ruby on Rails 在具有依赖关系的 OSX 上安装问题

> ID：15306875
> 
> 赞同：1
> 
> 时间：2013-03-09T03:39:09.437
> 
> 标签：ruby

我正在尝试在 Mountain Lion 上安装 RoR。我安装了以下内容：

*   来自 App Store 的带有命令行工具的 Xcode
*   虚拟机
*   自制

在终端中，我验证了 gcc 已安装。

当我输入时，`"rvm requirements"`我收到一条消息，说我缺少许多依赖项，包括、`OpenSSL`、`autoconf`等等。还说用. 所以我这样做了，不再抱怨缺少依赖项。`automake``libxslt``RVM``brew``rvm`

但是当我尝试通过安装`ruby 1.9.3`时`"rvm install 1.9.3"`，在编译结束时我收到一条消息`"ruby was built using clang -but it's not (fully) supported, expect errors."`

在这一点上我很难过。我试图弄清楚：

1.  为什么我安装`Xcode`命令行工具时缺少依赖项？
2.  为什么使用 brew 安装依赖项后仍然出现编译错误？

请帮忙。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:10:48.520

尝试使用**gcc**编译器，即

**`rvm install 1.9.3 --with-gcc-4.2`**

参考：[https ://github.com/wayneeseguin/rvm/issues/1480](https://github.com/wayneeseguin/rvm/issues/1480)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:26:38.617

所以这是我在安装任何红宝石之前通常会经历的顺序。

**第一件事：**安装 XCode 和[Mountain Lion 的命令行工具](https://developer.apple.com/downloads/index.action)（您也可以从 Preferences > Downloads 窗口安装它们）。

**第二：**确保您已安装[Homebrew](https://github.com/mxcl/homebrew/)。

**第三：**一旦设置好，运行`brew tap homebrew/dupes`

**第四：**然后`brew install openssl autoconf apple-gcc42 automake`

我遇到了 RVM 问题，并且早就切换到[RBenv](https://github.com/sstephenson/rbenv) / [Ruby-Build](https://github.com/sstephenson/ruby-build)。存在各种差异，但真正执行上述步骤应该可以解决您遇到的任何问题，并且很多人使用其中一个。两者都很棒。

然后，只需尝试安装 Ruby 即可。

# asp.net - 将 LINQ to SQL 查询的结果转换为 XML/JSON

> ID：15306883
> 
> 赞同：1
> 
> 时间：2013-03-09T03:40:34.100
> 
> 标签：asp.net, database, linq-to-sql, webforms

我希望用数据库查询的结果填充一个 JavaScript 数组。据我了解，一个好的方法是在我的服务器上使用序列化的 XML 或 JSON 文件填充一堆目录，然后我的 JS 函数可以读取这些文件，而无需访问数据库。这是真的？数据库应该在用户交互时写入这些 XML 文件，还是应该预先填充它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:46:28.630

根据您提供的详细信息：

我个人会创建一个 Web 服务端点，使用 JSON.NET 或等效方法将您的 linq 查询序列化为 JSON。然后可以在客户端页面中使用 ajax 调用端点。

[您可以在ASP.NET](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet)上查看此示例，了解如何创建 asmx（旧版）Web 服务。您还可以查看使用 [WebMethod] 属性[的](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.80%29.aspx)示例。

代码隐藏文件中的 Web 方法。

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public string GetMyQueryResultsAsJson()
{
    var results = GetQueryResults();
    var jss = new JavaScriptSerializer();
    string json = jss.Serialize(results);
    return json;
} 
```

客户端页面上的 ajax 调用：

```
function loadData() {
   var myArray = []; 
   $.getJSON("<%= ResolveUrl("~/MyPage.aspx/GetMyQueryResultsAsJson") %>", function (data) {
       $.each(data, function(obj) {
           myArray.push([obj.id, obj.someValue, obj.AnotherValue]);
       });
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:03:37.423

我使用`jQuery ajax`reuring`generic http handler`我`json`
创建了处理程序并将我的业务逻辑放在那里。
它以`json`
我迭代`json`使用 jquery 的形式返回结果。
并创建了我的 html 表单。

## 编辑 1

这里有一些有用的链接
[http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev](http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev)
[http://www.sharepointnutsandbolts.com/2010/11/sp2010- ajax-part-4-returning-json-from.html](http://www.sharepointnutsandbolts.com/2010/11/sp2010-ajax-part-4-returning-json-from.html)

## 编辑 2

您还可以利用 jtemplate
[http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/](http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/)
[http://encosia .com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/](http://encosia.com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/)

# java - 如何在没有 SDK 级别 11 的情况下创建 Android Google MapView？

> ID：15306884
> 
> 赞同：0
> 
> 时间：2013-03-09T03:40:41.163
> 
> 标签：java, android, google-maps, google-maps-android-api-2

我正在尝试在 SDK 版本 10 上创建 MapView，但如何创建 MapView 的所有示例都使用[Fragments](http://developer.android.com/reference/android/app/Fragment.html)，这仅在 API 11 中。

[https://developers.google.com/maps/documentation/android/map#add_a_map_to_an_android_application](https://developers.google.com/maps/documentation/android/map#add_a_map_to_an_android_application)

我不想添加额外的支持库。

我能够加载应用程序，但地图显示为空的灰色网格。这些在日志文件中显示为唯一的半相关行：

```
03-08 23:20:25.088: W/dalvikvm(32615): VFY: unable to resolve instance field 23
03-08 23:20:25.088: D/dalvikvm(32615): VFY: replacing opcode 0x52 at 0x0012
03-08 23:20:25.088: D/dalvikvm(32615): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-08 23:20:25.213: D/dalvikvm(32615): GC_CONCURRENT freed 1276K, 48% free 3765K/7175K, external 9476K/10157K, paused 5ms+8ms
03-08 23:20:25.236: I/dalvikvm(32615): Total arena pages for JIT: 11
03-08 23:20:25.541: W/dalvikvm(32615): Unable to resolve superclass of Lmaps/p/s; (427)
03-08 23:20:25.541: W/dalvikvm(32615): Link of class 'Lmaps/p/s;' failed
03-08 23:20:25.541: W/dalvikvm(32615): Unable to resolve superclass of Lmaps/y/bo; (3820)
03-08 23:20:25.541: W/dalvikvm(32615): Link of class 'Lmaps/y/bo;' failed
03-08 23:20:25.541: W/dalvikvm(32615): Unable to resolve superclass of Lmaps/i/k; (4208)
03-08 23:20:25.541: W/dalvikvm(32615): Link of class 'Lmaps/i/k;' failed
03-08 23:20:25.541: E/dalvikvm(32615): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-08 23:20:25.541: W/dalvikvm(32615): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag;
03-08 23:20:25.541: D/dalvikvm(32615): VFY: replacing opcode 0x22 at 0x006d
03-08 23:20:25.627: D/dalvikvm(32615): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
03-08 23:20:26.275: D/MPAY(32615): map = com.google.android.gms.maps.GoogleMap@40718398 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:07:52.960

由于 API 11 或更高版本支持 Fragments，并且 Maps 现在封装在`MapFragment`类中，这是 Android 类的扩展`Fragment`。现在您可以将地图添加为更大活动的一部分。使用`MapFragment`对象，您可以在较小的屏幕（例如手机）上单独显示地图，或者作为较大屏幕设备（例如平板电脑）上更复杂 UI 的一部分。所以google也提供了支持库在API 11或以下实现。

您可以`android-support-v4.jar`在应用程序中使用该库并实现 GoogleMap，如下所示：

在您的项目中添加支持库`Goto->android SDK->extras->android->support->v4->android-support-v4.jar`。只需复制此 jar 文件并添加到应用程序的 libs 文件夹中，然后添加到构建路径即可。之后，您可以使用 Fragment 添加 GoogleMap。

在这里，我将向您展示我们如何在 API 10 或以下版本中实现 GoogleMap：

首先，我们需要使用 GoogleMap 的支持库 Fragment，而不是`MapFragment`我们将`SupportMapFragment`在布局文件中使用。

> ```
>  <fragment xmlns:android="http://schemas.android.com/apk/res/android"
>             android:id="@+id/map"
>               android:layout_width="match_parent"
>               android:layout_height="match_parent"
>              class="com.google.android.gms.maps.SupportMapFragment"/> 
> ```

在您的 java 文件中访问地图，如下所示：

> ```
> public class MapActivity extends android.support.v4.app.FragmentActivity {
> 
>        private GoogleMap mMap;
> 
>     @Override
>     protected void onCreate(Bundle savedInstanceState) {
>        super.onCreate(savedInstanceState);
>        setContentView(R.layout.main);
>             // Try to obtain the map from the SupportMapFragment.
>          mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
>                 .getMap();
>     }
>    } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:57:07.407

我认为答案是你（可能）不能。

[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)概述是这样说的：

> *   地图现在封装在 MapFragment 类中，它是 Android 的 Fragment 类的扩展。现在您可以将地图添加为更大活动的一部分。使用 MapFragment 对象，您可以在较小的屏幕（例如手机）上单独显示地图，或者在较大屏幕的设备（例如平板电脑）上作为更复杂 UI 的一部分。
> *   因为地图封装在 MapFragment 类中，所以可以通过扩展 Android 标准 Activity 类来实现，而不是扩展版本 1 中使用的 MapActivity。

虽然没有明确说明，但我认为这意味着 v2 中的 Maps 从根本上依赖于 Fragment。

如果您需要使用 SDK 10 或更早版本，并且您不能使用某种 backport `Fragment`，那么您可能无法使用 Google Maps API v2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:05:55.063

目前支持所有版本，没有库你不能使用它。特别是杰克

wharton 的 sherlock 库[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock) 为您提供

支持所有版本。您可以为 MapView 和 android sherlock mapview 使用 mapview 气球

jar 文件已提供。您可以使用它。

[https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:15:23.017

我发现了如何。这是一堆小事情，包括我必须实现 onResume()、onPause() 等……我以为我可以通过调用 mapView.onCreate() 来进行测试，但我想这还不够.

我还在 Google Play 库中找到了一个示例`...\Java\android-sdk\extras\google\google_play_services\samples\maps\src\com\example\mapdemo\RawMapViewDemoActivity.java`

该示例扩展了 FragmentActivity，但这不是必需的，也不是导入 android.support.v4.*。

```
public class RawMapViewDemoActivity extends Activity {
    private MapView mMapView;
    private GoogleMap mMap;

    protected void onCreate(Bundle savedInstanceState) {
        ...
        mMapView = (MapView) findViewById(R.id.map);
        mMapView.onCreate(savedInstanceState);

    protected void onResume() {
        super.onResume();
        mMapView.onResume();

    protected void onPause() {
        mMapView.onPause();
        super.onPause();

    protected void onDestroy() {
        mMapView.onDestroy();
        super.onDestroy();

    public void onLowMemory() {
        super.onLowMemory();
        mMapView.onLowMemory();

    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        mMapView.onSaveInstanceState(outState); 
```

# vb.net - 如何在继承的共享方法中获取类类型

> ID：15306885
> 
> 赞同：1
> 
> 时间：2013-03-09T03:41:03.690
> 
> 标签：vb.net, class

伙计们；

代码如下：

```
Public Class MasterA
  Inherits Underling
End Class

Public Class MasterB
  Inherits Underling
End Class

Public Mustinherit Class Underling
  Sub DoSomething()
    Me.GetType 'Using the instance, I can get the class.
  end sub
  Shared function() as ???? 'How can I define the return type based on the class that inherited me?
    'Me.GetType 'Won't work as this is a shared function with no instance 'Me'
  End Function
End class 
```

好的。问题是：有没有办法从另一个类继承的共享函数中获取类类型？

我正在构建的是一个作为可继承类的 XML 序列化器/反序列化器，以便继承它的类可以序列化为 XML 文件，然后再返回。我不想为我想要使用的每种类型的类编写序列化器/反序列化器，我只想继承该功能。

但是，要做到这一点，需要我能够确定在共享函数中继承了我的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:00:25.887

您可以使用通用基类获得所需的行为，我的 VB 有点生疏，所以您可能会发现杂散的括号或括号。这实际上是在共享基类函数中获取对继承类的类型引用的唯一方法。

```
Public Mustinherit Class Underling(Of T)
  Sub DoSomething()
    Me.GetType 'Using the instance, I can get the class.
  end sub
  Shared function() As T
    ' GetType(T)  should get the type at this point
  End Function
End class

Public Class MasterA
  Inherits Underling(Of MasterA)
End Class

Public Class MasterB
  Inherits Underling(Of MasterB)
End Class 
```

作为旁注，它似乎是一个相当奇怪的解决方案来处理`XmlSerialization`而不是通过您自己的序列化器实现或[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# iphone - [self viewDidAppear:YES];

> ID：15306888
> 
> 赞同：0
> 
> 时间：2013-03-09T03:41:27.027
> 
> 标签：iphone, ipad, viewdidload, viewdidappear

代码的 viewDidLoad 部分是否`[self viewDidAppear:YES];`确保代码的 viewDidAppear 部分将运行？

根据我们一小部分用户的反馈，无论出于何种原因，我在主菜单视图的 viewDidAppear 部分编写的代码似乎都没有为他们运行——但它对大多数用户和所有用户都非常有效我的测试。我希望通过添加 [self viewDidAppear:YES]; 这将解决那些由于某种原因没有调用 viewDidAppear 的设备的问题......

你们有什么感想？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:44:01.427

我个人认为这是一个可怕的想法。我认为你最好找出为什么`viewDidAppear`没有为那部分用户执行。您可能只是通过“修复”看似错误的地方来治疗更大问题的症状。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T05:11:55.407

如果 ViewDidAppear 位于嵌套在另一个视图控制器中并在旧操作系统上运行的视图控制器上，则可能不会调用它。在 iOS 5 之前，委托命令并不总是被转发到子控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:47:02.223

你永远不应该直接调用委托方法。

# cocoa - 将文件上传到谷歌驱动器后如何获取文件ID？

> ID：15306890
> 
> 赞同：3
> 
> 时间：2013-03-09T03:42:01.083
> 
> 标签：cocoa, google-drive-api

我想知道上传后的文件ID。从文件列表中找到它，我认为这不是好主意和性能。那么，我怎样才能获得好主意的文件ID？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-03T04:40:54.057

例如：

```
$file = new Google_Service_Drive_DriveFile();
$file->setName($fileTitle);
$result = $service->files->create(
    $file,
    array(
        'data' => file_get_contents(FILE),
        'mimeType' => 'application/octet-stream',
        'uploadType' => 'multipart'
    )
); 
```

var $result 包含上传文件的所有信息，所以你所要做的就是显示或使用 id。

```
echo 'Uploaded file id is '.$result['id']; 
```

# java - JDK8 b80 中的 Nashorn？

> ID：15306892
> 
> 赞同：2
> 
> 时间：2013-03-09T03:42:52.233
> 
> 标签：java, javascript, nashorn

有人对如何开始使用 Oracle 的新 JS 引擎 Nashorn 有任何指示吗？

我已经安装了 JDK 8 b80，但仍然只有 Rhino：

```
@Test
public void list() {
   ScriptEngineManager manager = new ScriptEngineManager();
   List<ScriptEngineFactory> factories = manager.getEngineFactories();
   for (ScriptEngineFactory factory : factories) {
       System.out.println(factory.getEngineName());
   }
} 
```

输出：

```
"C:\Program Files\Java\jdk1.8.0\bin\java" -ea -Didea.launcher.port=7537...
Mozilla Rhino 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T15:12:00.973

Install the JDK8 and create an alias for your JDK's jjs (Nashorn Interpreter), e.g., if you create a file called test.js, you can run the program with:

$ jjs test.js

Mac OS = alias jjs=’/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/jre/bin/jjs’</p>

Windows = Define an environment variable called ‘JAVA8_HOME’ and point to your jdk8 folder, then you can invoke jjs by running this command:

> “%JAVA8_HOME%\jre\bin\jjs” test.js

Here's an example of a Nashorn App: [http://marcelorjava.wordpress.com/2013/08/24/code-walkthrough-online-kanban-board-with-nashorn/](http://marcelorjava.wordpress.com/2013/08/24/code-walkthrough-online-kanban-board-with-nashorn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T19:57:34.423

抱歉，我也不喜欢别名的东西，所以正如 wickund 建议的那样，我会简短地说（并且还使用了 hohonuuli 发布的技巧）

```
cd /usr/bin; ln -s $(/usr/libexec/java_home -v 1.8)/bin/jjs jjs 
```

以root身份执行，否则由于缺少权限，您将不会幸运

# html - 简单的 CSS 布局在 IE 中包装图像，但不是 FF 或 Chrome

> ID：15306896
> 
> 赞同：1
> 
> 时间：2013-03-09T03:43:44.843
> 
> 标签：html, css

我有一个非常简单的布局，在 Ie 中看起来不正确。我已经搞砸了 Firebug Lite 和 IE 开发人员工具栏，但似乎无法归结为什么在这种情况下右图像会包裹在左图像下方。这是我为调试目的而简化的问题的链接。 [http://tunetra.de/test/layout.html](http://tunetra.de/test/layout.html)

我还将在下面传递我的 HTML。

```
<html>
<head>
<style>
#container
{
    margin: 0px auto;
    width: 1000px;
    background: #fff;
}

#main
{
  text-align: left;
}
</style>
</head>
<body style="text-align:center;">
  <div id="container">
    <div id="header">
      <img src="img/left_image.png" style="width: 272px; height: 90px; float: left;position: relative;"> 
      <div style="float: right;position: relative;background-color: #fff;width: 728px;height: 90px;">
      <img src="img/right_image.png" style="">
    </div>
  </div>     
  <div id="main">
    Lorem Ipsum Bla<br/> Bla<br/> Bla
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:53:50.653

默认情况下，您的页面在 Internet Explorer 10 中运行良好。不过，我确实看到了您在 Internet Explorer 9 中提到的问题。这是由于您在 Quirks 模式下加载页面造成的。插入以下 Doctype 以更正此问题：

```
<!DOCTYPE html> 
```

将其`<html>`放在第一行之前。这解决了您的问题。

您可以通过使用 F12 开发人员工具将您的页面置于标准模式来快速测试这一点。按键盘上的 F12 以显示开发人员工具。在右上角，单击“文档模式：怪癖模式”并将其更改为“Internet Explorer 9 标准”。

# python - Django 反向查找外键

> ID：15306897
> 
> 赞同：94
> 
> 时间：2013-03-09T03:43:54.513
> 
> 标签：python, django, django-forms, django-views

我有一个场地，这个场地有很多活动。我的模型如下所示：

```
class Event(models.Model):
    title = models.CharField(max_length=200)
    date_published = models.DateTimeField('published date',default=datetime.now, blank=True)
    date_start = models.DateTimeField('start date')
    date_end = models.DateTimeField('end date')
    def __unicode__(self):
        return self.title
    description = models.TextField()
    price = models.IntegerField(null=True, blank=True)
    venue = models.ForeignKey(Venue)

class Venue(models.Model):
    title = models.CharField(max_length=200)
    date_published = models.DateTimeField('published date',default=datetime.now, blank=True)
    venue_latitude = models.CharField(max_length=200)
    venue_longitude = models.CharField(max_length=200)
    venue_address = models.CharField(max_length=200)
    venue_city = models.CharField(max_length=200)
    venue_state = models.CharField(max_length=200)
    venue_country = models.CharField(max_length=200)
    description = models.TextField()
    def __unicode__(self):
        return u'%s' % (self.title) 
```

我想展示在某个地点发生的所有事件。我怎样才能做到这一点？我当前的视图如下所示：

```
def detail(request, venue_id):
    venue = get_object_or_404(Venue, pk=venue_id)
    return render(request, 'venue-detail.html', {'venue': venue}) 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-03-09T04:41:09.727

您可以使用`events = venue.event_set`其他方式。

请注意，它`venue.event_set`是一个管理器对象，例如`Event.objects`，因此您可以在其上调用`.all`、`.filter`和`.exclude`类似的方法来获取查询集。

请参阅[Django 文档](https://docs.djangoproject.com/en/3.0/topics/db/queries/#following-relationships-backward)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-20T11:44:47.557

对于那些拥有“'RelatedManager' 对象不可迭代”的人

添加所有以从管理器中检索元素。

```
{% for area in world_areas.all %} 
```

[https://stackoverflow.com/a/16909142/2491526](https://stackoverflow.com/a/16909142/2491526) （不能在第一个答案的评论中添加这个）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T03:51:02.387

反过来。使用`Event`模型。

```
def detail(request, venue_id):
    venue = Event.objects.filter(venue__id=venue_id)
    return render(request, 'venue-detail.html', {'venue': venue}) 
```

PS：我没用过`get_object_or_404()`。相应地修改代码。

# opengl-es - 是否可以在 OpenGL 中将数据从一个帧缓冲区复制到另一个帧缓冲区？

> ID：15306899
> 
> 赞同：4
> 
> 时间：2013-03-09T03:44:33.903
> 
> 标签：opengl-es, opengl-es-2.0

我想这是有可能的，因为这样：

```
glBindFramebuffer(GL_READ_FRAMEBUFFER_APPLE, _multisampleFramebuffer);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER_APPLE, _framebuffer);
glResolveMultisampleFramebufferAPPLE(); 
```

正是这样做的，并且最重要的是解决了多重采样。但是，它是一个 Apple 扩展，我想知道是否有类似的东西可以将所有逻辑缓冲区从一个帧缓冲区复制到另一个帧缓冲区，并且在 vanilla 实现中不执行多重采样部分。`GL_READ_FRAMEBUFFER`似乎不是一个有效的目标，所以我猜没有直接的方法？解决方法如何？

编辑：似乎可以`glCopyImageSubData`在 OpenGL 4 中使用，不幸的是，我在 iPhone 上使用的是 OpenGL ES 2.0，这似乎缺少该功能。还有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:58:19.710

glBlitFramebuffer 完成您正在寻找的内容。此外，您可以在不需要两个帧缓冲区的情况下将一个 TEXTURE 粘贴到另一个上。我不确定 OpenGL ES 2.0 是否可以使用一个 fbo，但可以轻松修改以下代码以使用两个 fbo。您只需要将不同的纹理附加到不同的帧缓冲区附件。glBlitFramebuffer 功能甚至可以管理抗锯齿应用程序的下采样/上采样！这是它的用法示例：

```
// bind fbo as read / draw fbo
glBindFramebuffer(GL_DRAW_FRAMEBUFFER,m_fbo);
glBindFramebuffer(GL_READ_FRAMEBUFFER, m_fbo);

// bind source texture to color attachment
glBindTexture(GL_TEXTURE_2D,m_textureHandle0);
glFramebufferTexture2D(GL_TEXTURE_2D, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_textureHandle0, 0);
glDrawBuffer(GL_COLOR_ATTACHMENT0);

// bind destination texture to another color attachment
glBindTexture(GL_TEXTURE_2D,m_textureHandle1);
glFramebufferTexture2D(GL_TEXTURE_2D, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, m_textureHandle1, 0);
glReadBuffer(GL_COLOR_ATTACHMENT1);

// specify source, destination drawing (sub)rectangles. 
glBlitFramebuffer(from.left(),from.top(), from.width(), from.height(),
                  to.left(),to.top(), to.width(), to.height(), GL_COLOR_BUFFER_BIT, GL_NEAREST);

// release state
glBindTexture(GL_TEXTURE_2D,0);
glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T00:54:50.880

在 OpenGL 4 中测试，OpenGL ES 2.0 不支持 glBlitFramebuffer。

我已经修复了上一个答案中的错误，并概括为一个可以支持两个帧缓冲区的函数：

```
// Assumes the two textures are the same dimensions
void copyFrameBufferTexture(int width, int height, int fboIn, int textureIn, int fboOut, int textureOut)
{
    // Bind input FBO + texture to a color attachment
    glBindFramebuffer(GL_READ_FRAMEBUFFER, fboIn);
    glFramebufferTexture2D(GL_READ_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, textureIn, 0);
    glReadBuffer(GL_COLOR_ATTACHMENT0);

    // Bind destination FBO + texture to another color attachment
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER, fboOut);
    glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, textureOut, 0);
    glDrawBuffer(GL_COLOR_ATTACHMENT1);

    // specify source, destination drawing (sub)rectangles.
    glBlitFramebuffer(0, 0, width, height,
                        0, 0, width, height,
                        GL_COLOR_BUFFER_BIT, GL_NEAREST);

    // unbind the color attachments
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, 0, 0);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-08T22:30:41.060

你可以直接用 OpenGL ES 2.0 来做，而且好像也没有扩展。

我不确定您要实现什么，但总的来说，只需删除您已完成屏幕外渲染的 FBO 的附件。然后绑定默认的 FBO 以便能够在屏幕上绘制，在这里您可以简单地绘制一个四边形，它带有一个填充屏幕的正交相机和一个将屏幕外生成的纹理作为输入的着色器。如果您使用多采样纹理，您也可以进行解析。

```
glBindFramebuffer(GL_FRAMEBUFFER, off_screenFBO);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, 0, 0);

glBindFramebuffer(GL_FRAMEBUFFER, 0); // Default FBO, on iOS it is 1 if I am correct

// Set the viewport at the size of screen
// Use your compositing shader (it doesn't have to manage any transform)
// Active and bind your textures
// Sent textures uniforms
// Draw your quad 
```

以下是着色器的示例：

```
// Vertex
attribute vec2 in_position2D;
attribute vec2 in_texCoord0;
varying lowp vec2 v_texCoord0;
void main()
{
   v_texCoord0 = in_texCoord0;
   gl_Position = vec4(in_position2D, 0.0, 1.0);
}

// Fragment
uniform sampler2D u_texture0;
varying lowp vec2 v_texCoord0;

void main()
{
    gl_FragColor =  texture2D(u_texture0, v_texCoord0);
} 
```

# clojure - clojure 中的负十六进制文字

> ID：15306906
> 
> 赞同：3
> 
> 时间：2013-03-09T03:44:55.430
> 
> 标签：clojure

我发现这`0xFFFFFFFFFFFFFFFF`不在`18446744073709551615N`clojure`-1`中。`(unchecked-long 0xFFFFFFFFFFFFFFFF)`有效，但会产生运行时成本。

还有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:36:53.577

我建议只使用`unchecked-long`.

运行时开销可能为零，因为 JIT 编译器应该足够聪明，可以将其优化为恒定负载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:21:51.227

您可以在读取时计算该值，以防止它成为运行时成本：

```
#=(unchecked-long 0xFFFFFFFFFFFFFFFF) 
```

# php - PHP没有获取数据但正在生成表

> ID：15306907
> 
> 赞同：0
> 
> 时间：2013-03-09T03:45:18.623
> 
> 标签：php, minecraft

我需要它做的是访问我的数据库并获取我在那里的数据。虽然它不起作用。我得到了一个没有数据的表格！随着更多数据的添加，它仍然会生成新表，只是不添加数据。这是我的php：

```
 <?php 

 mysql_connect("localhost", "", "")

 or die(mysql_error()); 

 mysql_select_db("tcordero_playtime") or die(mysql_error()); 

 $query = mysql_query("SELECT * FROM players") 

 or die(mysql_error()); 
if (mysql_num_rows($query) == 0) {
    echo "No player information has been entered yet!";
}
else {
 Print "<table border cellpadding=1>"; 

 while($row = mysql_fetch_array( $query )) 

 { 

 Print "<tr>"; 

 Print "<th>Playername:</th> <td>".$query['playerName'] . "</td> "; 

 Print "<th>Total playtime:</th> <td>".$query['playtime' / 1000 / 60] . "</td> ";

 } 

 Print "</table>"; 
}
 ?> 
```

此外，时间在数据库中以毫秒为单位。我如何让它们在几分钟甚至几小时内显示出来？这是该页面的示例以及出了什么问题：[http ://tomascordero.com/example/playertime.php](http://tomascordero.com/example/playertime.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:47:45.043

它应该是`$row['playerName']`，等等，而不是`$query['playerName']`。打开错误日志，应该会更明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T03:50:52.090

在此行中将 $query 更改为 $row：

前

```
Print "<th>Playername:</th> <td>".$query['playerName'] . "</td> "; 

Print "<th>Total playtime:</th> <td>".$query['playtime' / 1000 / 60] . "</td> "; 
```

后

```
Print "<th>Playername:</th> <td>".$row['playerName'] . "</td> "; 

Print "<th>Total playtime:</th> <td>".$row['playtime' / 1000 / 60] . "</td> "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:15:35.590

您可以像这样更改编码

> 玩家名称：".$row['playerName'] ." ";
> 
> 打印 "总游戏时间：".$row['playtime' / 1000 / 60] 。"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:51:44.163

你必须使用`$row['playerName']`not `$query['playerName']`。

您正在检索 $row 的值，因此应该使用 $row 来获取值。

也`<tr>`应该关闭。在您的代码`<tr>`中没有关闭。

# assembly - 如何使用 NASM（汇编）显示存储在 dl 寄存器中的值？

> ID：15306911
> 
> 赞同：0
> 
> 时间：2013-03-09T03:46:07.880
> 
> 标签：assembly, x86, nasm

我对组装还很陌生，所以如果这个问题太含糊而无法回答，或者我是否需要包含更多信息，请告诉我。

基本上，我有一些信息存储在`dl`寄存器中。、和寄存器也有存储在其中的值`eax`，我想保留这些值。如何在不更改其他寄存器值的情况下将寄存器显示到屏幕上？`ebx``ecx``dl`

我也试过 used `int 21h`，但我在使用它时遇到了分段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:13:46.443

您正在工作的环境将决定您如何显示您要显示的内容。`int 21h`中断是 DOS 服务，因此除非您在 DOS 环境中工作（例如，在没有加载 DOS 的纯 BIOS 环境中），否则这些中断将不可用。如果是这种情况，您应该查看[`int 10h`视频服务](http://www.ctyme.com/intr/int-10.htm)——例如[`int 10h AX=0Ah`](http://www.ctyme.com/intr/rb-0100.htm)。

至于保留其他寄存器的值 - 这将取决于您选择如何显示您的输出。`int 10h AX=0Ah`我上面提到的服务需要使用`AH`, `AH`,`BH`和寄存器 - 要使用此服务，您必须将值从,`BL`和寄存器移到其他地方 - 可能通过移动到其他寄存器，将它们存储到特定的内存位置，或者通过设置向上堆栈并ing，然后在显示您的值后将值返回到寄存器中。`CX``EAX``EBX``ECX``PUSH``POP`

# node.js - 使用 Mongoose 动态创建集合

> ID：15306916
> 
> 赞同：26
> 
> 时间：2013-03-09T03:47:11.437
> 
> 标签：node.js, mongoose

我想让用户能够在我的 Node 应用程序中创建集合。我真的只在猫鼬的集合中看到过硬编码的例子。任何人都知道是否可以使用猫鼬动态创建集合？如果是这样，一个例子将非常有帮助。

基本上我希望能够在不同的集合中存储不同“事件”的数据。

IE 事件：event1, event2, ... eventN

用户可以在那里创建自己的自定义事件并将数据存储在该集合中。最后，每个事件可能有成百上千行。我想让用户能够对他们的事件执行 CRUD 操作。而不是存储在一个大集合中，我想将每个事件数据存储在不同的集合中。

我没有真正尝试过的示例，因为我只用猫鼬创建了“硬编码”集合。我什至不确定是否可以根据用户请求在 mongoose 中创建一个动态的新集合。

```
var mongoose = require('mongoose');
mongoose.connect('localhost', 'events');

var schema = mongoose.Schema({ name: 'string' });
var Event1 = mongoose.model('Event1', schema);

var event1= new Event1({ name: 'something' });
event1.save(function (err) {
  if (err) // ...
  console.log('meow');
}); 
```

如果我将“Event1”硬编码为一个集合，上面的效果很好。不确定我创建了一个动态集合。

```
var mongoose = require('mongoose');
mongoose.connect('localhost', 'events');

...

var userDefinedEvent = //get this from a client side request
...

var schema = mongoose.Schema({ name: 'string' });
var userDefinedEvent = mongoose.model(userDefinedEvent, schema); 
```

你能做到吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T10:13:00.440

我认为这是一个糟糕的想法，但一个问题值得回答。您需要定义一个具有动态名称的模式，该名称允许其中包含“任何”类型的信息。执行此操作的函数可能与此函数有点相似：

```
var establishedModels = {};
function createModelForName(name) {
    if (!(name in establishedModels)) {
        var Any = new Schema({ any: Schema.Types.Mixed });
        establishedModels[name] = mongoose.model(name, Any);
    }
    return establishedModels[name];
} 
```

现在，您可以创建允许信息不受任何限制（包括名称）的模型。我将假设一个像这样定义的对象`{name: 'hello', content: {x: 1}}`，它是由“用户”提供的。为了保存它，我可以运行以下代码：

```
var stuff = {name: 'hello', content: {x: 1}}; // Define info.
var Model = createModelForName(name); // Create the model.
var model = Model(stuff.content); // Create a model instance.
model.save(function (err) { // Save
    if (err) {
        console.log(err);
    }
}); 
```

查询非常相似，获取模型然后进行查询：

```
var stuff = {name: 'hello', query: {x: {'$gt': 0}}}; // Define info.
var Model = createModelForName(name); // Create the model.
model.find(stuff.query, function (err, entries) {
    // Do something with the matched entries.
}); 
```

您将不得不实施代码来保护您的查询。您不希望用户炸毁您的数据库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-04T18:55:16.350

From mongo docs here: data modeling

> In certain situations, you might choose to store information in several collections rather than in a single collection.
> 
> Consider a sample collection logs that stores log documents for various environment and applications. The logs collection contains documents of the following form:
> 
> { log: "dev", ts: ..., info: ... } { log: "debug", ts: ..., info: ...}
> 
> If the total number of documents is low you may group documents into collection by type. For logs, consider maintaining distinct log collections, such as logs.dev and logs.debug. The logs.dev collection would contain only the documents related to the dev environment.
> 
> Generally, having large number of collections has no significant performance penalty and results in very good performance. Distinct collections are very important for high-throughput batch processing.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-28T05:41:43.967

> 假设我有 20 个不同的事件。每个事件都有 100 万个条目......因此，如果这一切都在一个集合中，我将不得不为每个 CRUD 操作按事件过滤集合。

我建议您将所有事件保存在同一个集合中，特别是如果事件名称取决于客户端代码并因此可能发生更改。相反，索引名称和用户参考。

```
mongoose.Schema({
  name: { type: String, index: true },
  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', index: true } 
}); 
```

此外，我认为您遇到的问题有点倒退（但我可能弄错了）。您是在用户的上下文中查找事件，还是在事件名称的上下文中查找用户？我有一种感觉是前者，您应该首先根据用户参考进行分区，而不是事件名称。

如果您不需要查找用户的所有事件而只需要同时处理用户和事件名称，则可以使用复合索引：

```
schema.index({ user: 1, name: 1 }); 
```

如果您正在处理数百万个文档，请确保关闭自动索引：

```
schema.set('autoIndex', false); 
```

* * *

这篇文章有一些关于命名集合和使用特定模式的有趣内容：

[如何使用 Mongoose 访问预先存在的集合？](https://stackoverflow.com/questions/5794834/how-to-access-a-preexisting-collection-with-mongoose)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-01T16:25:38.653

您可以尝试以下方法：

```
var createDB = function(name) {

  var connection = mongoose.createConnection(
    'mongodb://localhost:27017/' + name);

  connection.on('open', function() {
    connection.db.collectionNames(function(error) {
      if (error) {
        return console.log("error", error)
      }
    });

  });
  connection.on('error', function(error) {
    return console.log("error", error)
  });

}
```

使用 connection.db.collectionNames 获取集合名称很重要，否则将不会创建数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-09T11:12:16.040

这种方法最适合我，这个例子为每个用户创建动态集合，每个集合将只保存相应的用户信息（登录详细信息），首先在单独的文件中声明函数dynamicModel：example model.js

```
/* model.js */
'use strict';

var mongoose = require('mongoose'),
  Schema = mongoose.Schema;

  function dynamicModel(suffix) {
      var addressSchema = new Schema(
          {
               "name" : {type: String, default: '',trim: true},
               "login_time" : {type: Date},
               "location" : {type: String, default: '',trim: true},
          }
  );

     return mongoose.model('user_' + suffix, addressSchema);

  }

module.exports = dynamicModel; 
```

在控制器文件示例 user.js 中，第一个函数创建动态集合，第二个函数将数据保存到特定集合

```
/* user.js */
var  mongoose = require('mongoose'),

function CreateModel(user_name){//function to create collection , user_name  argument contains collection name

  var Model  = require(path.resolve('./model.js'))(user_name);

}

function save_user_info(user_name,data){//function to save user info , data argument contains user info
     var UserModel  = mongoose.model(user_name) ;
     var usermodel  = UserModel(data);
              usermodel.save(function (err) {

               if (err) {
                  console.log(err);
                } else {
                 console.log("\nSaved");
                }
           });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-22T14:49:52.713

是的，我们可以做到这一点。我已经尝试过它并且它的工作原理。

参考代码：

```
app.post("/",function(req,res){

  var Cat=req.body.catg;
  const link= req.body.link;
  const rating=req.body.rating;
  Cat=mongoose.model(Cat,schema);
  const item=new Cat({
  name:link,
  age:rating
  });
 item.save();
  res.render("\index");
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-02T05:11:49.573

我试过[Magesh varan](https://stackoverflow.com/a/59862331/11579741)参考代码，

这段代码对我有用

```
 router.post("/auto-create-collection", (req, res) => {
  var reqData = req.body; // {"username":"123","password":"321","collectionName":"user_data"}

  let userName = reqData.username;
  let passWord = reqData.password;
  let collectionName = reqData.collectionName;

  // create schema
  var mySchema = new mongoose.Schema({
    userName: String,
    passWord: String,
  });

  // create model
  var myModel = mongoose.model(collectionName, mySchema);

  const storeData = new myModel({
    userName: userName,
    passWord: passWord,
  });
  storeData.save();

  res.json(storeData);
}); 
```

# xpath - XML 文档的子报表数据源表达式

> ID：15306917
> 
> 赞同：0
> 
> 时间：2013-03-09T03:47:11.430
> 
> 标签：xpath, jasper-reports

我试图让一个子报表为使用 XML 文档作为数据源的报表工作。

当我对主报表数据进行排序时，子报表不必重新查询 XML 文档。它期待*JRSortableDataSource*，而不是*JRXmlDataSource*。

我究竟做错了什么？

我使用了以下数据源表达式：

```
$P{REPORT_DATA_SOURCE}).subDataSource("/person/phone") 
```

堆栈跟踪：

```
Error filling print... Error evaluating expression :      Source text : $P{REPORT_DATA_SOURCE}.subDataSource("/person/phone")

net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error evaluating expression :  

    Source text : $P{REPORT_DATA_SOURCE}.subDataSource("/person/phone")     
at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:203)     
at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:591)     
at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:559)     
at net.sf.jasperreports.engine.fill.JRFillElement.evaluateExpression(JRFillElement.java:966)     
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:384)     
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:286)     
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:259)     
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:459)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2044)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:778)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:288)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:151)     
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909)     
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:126)     
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:464)     
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:300)     
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:757)     
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:1003)     
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)     
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) Caused by: groovy.lang.MissingMethodException: 
No signature of method: net.sf.jasperreports.engine.fill.SortedDataSource.subDataSource() 
is applicable for argument types: (java.lang.String) values: [/person/phone]     
at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:54)     
at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46)     
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)     
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)     
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)     
at TestParam_1362739351228_895383.evaluate(calculator_TestParam_1362739351228_895383:223)     
at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:190) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:36:10.863

你的数据源表达式`$P{REPORT_DATA_SOURCE}).subDataSource("/B/C")`
有一个语法错误
你一开始错过了不匹配的字符`(`
然后

如果它期待一个`JRSortableDataSource`
使用这个表达式
`((net.sf.jasperreports.engine.data.JRSortableDataSource)$P{REPORT_DATA_SOURCE}).subDataSource("DefineThat")`

如果它期待一个`JRXmlDataSource`
使用这个表达式
`((net.sf.jasperreports.engine.data.JRXmlDataSource)$P{REPORT_DATA_SOURCE}).subDataSource("DefineThat")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T16:15:57.683

$P{REPORT_DATA_SOURCE}).subDataSource("Xpath")

当有人使用上述表达式连接以使用 XML 数据源在 Jasper 中创建子报告时，我们需要将报告语言设置为 groovy 而不是 Java。我认为 subdatasource 不是在 Java 中定义的方法，而是在 groovy 中定义的。我试图找到在Java中等效于上述方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T15:28:23.380

有同样的问题，在 jaspersoft-community 找到了这个解决方案：

在参数中捕获原始数据源：

```
<parameter name="MyDataSource" class="net.sf.jasperreports.engine.JRDataSource" isForPrompting="false">
    <defaultValueExpression><![CDATA[$P{REPORT_DATA_SOURCE}]]></defaultValueExpression>
</parameter> 
```

在 iReport-GUI 中相同：

*   在主报告中创建新参数
*   名称：“我的数据源”
*   参数类：“net.sf.jasperreports.engine.JRDataSource”
*   用作提示：否
*   默认值表达式：“$P{REPORT_DATA_SOURCE}”

现在在 subreport-datasource 中使用 MyDataSource 参数：

```
<dataSourceExpression><![CDATA[((net.sf.jasperreports.engine.data.JRXmlDataSource)$P{MyDataSource}).dataSource("/Subreport/path")]]></dataSourceExpression> 
```

# debugging - Ruby193 在调试模式下完全忽略断点

> ID：15306920
> 
> 赞同：0
> 
> 时间：2013-03-09T03:48:00.710
> 
> 标签：debugging, ruby-on-rails-3.2, netbeans-6.9

我刚刚从 Ruby192 升级到 Ruby193 (rubyinstaller-1.9.3-p392)。

在经历了许多错误和谷歌搜索之后，我设法正常启动服务器而没有任何错误。

当我以调试模式（在 NetBeans 6.9.1 中）启动服务器时，它只是忽略断点并继续加载页面，请参见下面的输出。

```
Fast Debugger (ruby-debug-ide 0.4.17.beta16, ruby-debug-base19x 0.11) listens on 127.0.0.1:49628
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-03-09 11:34:54] INFO  WEBrick 1.3.1
[2013-03-09 11:34:54] INFO  ruby 1.9.3 (2013-02-22) [i386-mingw32]
[2013-03-09 11:34:54] INFO  WEBrick::HTTPServer#start: pid=708 port=3000
Breakpoint 32 at D:/MyWorkspace/NetBeans_Projects/homeloqsg/app/controllers/miscellaneous_controller.rb:7 
```

我安装了以下 gem

```
$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.12)
actionpack (3.2.12)
activemodel (3.2.12)
activerecord (3.2.12)
activeresource (3.2.12)
activesupport (3.2.12)
addressable (2.3.3)
archive-tar-minitar (0.5.2)
arel (3.0.2)
authlogic (3.2.0)
aws-s3 (0.6.3)
aws-sdk (1.8.3.1)
bigdecimal (1.1.0)
bson (1.8.3)
bson_ext (1.8.3)
builder (3.0.4)
bundler (1.3.1)
carrierwave (0.8.0)
climate_control (0.0.3)
cocaine (0.5.1)
columnize (0.3.6)
debugger (1.4.0)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.2.0)
erubis (2.7.0)
excon (0.16.10)
fog (1.10.0)
formatador (0.2.4)
gmaps4rails (1.5.6)
heroku (2.35.0)
heroku-api (0.3.8)
hike (1.2.1)
i18n (0.6.4)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.2.1)
json (1.5.5)
launchy (2.2.0)
linecache19 (0.5.12)
mail (2.4.4)
mime-types (1.21)
minitest (2.5.1)
multi_json (1.6.1)
mysql (2.8.1 x86-mingw32)
net-scp (1.1.0)
net-ssh (2.6.6)
netrc (0.7.7)
nokogiri (1.5.6 x86-mingw32)
paperclip (3.4.1)
pg (0.14.1 x86-mingw32)
polyglot (0.3.3)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.12)
railties (3.2.12)
rake (0.9.2.2)
rdiscount (1.6.8)
rdoc (3.9.5)
rest-client (1.6.7)
rmagick (2.13.2)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta16)
ruby-hmac (0.4.0)
ruby_core_source (0.1.5)
rubygems-update (2.0.1)
rubyzip (0.9.9)
sitemap_generator (3.4)
sprockets (2.2.2)
thor (0.17.0)
tilt (1.3.4)
treetop (1.4.12)
tzinfo (0.3.36)
uuidtools (2.1.3)
will_paginate (3.0.4)
xml-simple (1.1.2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:32:14.490

经过几个小时的努力，我设法解决了这个问题。

我想我有太多的调试宝石。

```
debugger (1.4.0)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.2.0)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta16)
linecache19 (0.5.12) 
```

删除以下宝石后，它工作正常，断点停在我想要的行。

```
debugger (1.4.0)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.2.0) 
```

谢谢。

# jquery - jQuery 导致 Firefox box-sizing 警告

> ID：15306923
> 
> 赞同：19
> 
> 时间：2013-03-09T03:48:13.980
> 
> 标签：jquery, css, firefox, web-developer-toolbar

我有 WebDeveloper 扩展并且收到 CSS 警告，所以我去调查它。警告是以下 3 个：

```
Warning: Unknown property 'box-sizing'.  Declaration dropped.
Line: 0 
```

然后我做了一个空白文件，发现它不存在。几分钟后，我发现了一个可重现的原因：包括 jQuery 1.9.1 脚本！

我可以或应该做什么？我想使用 jquery，但我觉得我将永远在我的工具栏中看到 CSS 警告有点烦人。

```
<!DOCTYPE html>
<html>
<head></head>
<body>
<div>Empty</div>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T04:02:49.563

**选项**

1.  使用 jQuery 1.7.2。
2.  向 jQuery 团队提出问题并希望得到修复（或自己提供）。
3.  使用 Firebug 而不是 WebDeveloper（这可能有帮助，也可能没有帮助）。
4.  忽略它。

只要页面正确呈现，我相信这是一个您可以放心忽略的警告，即使您正在构建一个严格要求验证 CSS 的网站。

一旦 Firefox 完全支持`box-sizing`（不需要`-moz-`前缀），警告就会消失，但直到 Firefox 21 之后的某个版本才会发生。

**背景资料**

警告来自某些 CSS 样式所需的不同语法。要支持所有浏览器，您通常必须指定所有各种语法。浏览器将忽略他们不认识的那些。

在 的情况下`box-sizing`，Firefox 需要`-moz-`前缀，早期版本的 Safari Mobile 和 Android 浏览器需要`-webkit-`前缀，而其他浏览器则根本不需要前缀：

```
-webkit-box-sizing: content-box;
   -moz-box-sizing: content-box;
        box-sizing: content-box; 
```

添加线性渐变时会出现类似的问题，在这种情况下是由值而不是属性名称引起的：

```
background-image: -webkit-linear-gradient(top, #444, #999);
background-image:    -moz-linear-gradient(top, #444, #999);
background-image:     -ms-linear-gradient(top, #444, #999);
background-image:      -o-linear-gradient(top, #444, #999);
background-image:         linear-gradient(top, #444, #999); 
```

当警告来自使用的不同语法时，通常是验证器或错误控制台不够聪明，无法从通常不可避免的无害问题中识别出真正的问题。公平地说，它实际上被识别为警告，而不是错误。

**附加信息**

较新版本的 jQuery 将`box-sizing`样式用于内部目的。jQuery 1.8.0 只产生一个`box-sizing`警告，而 jQuery 1.7.2 不产生任何警告。

jQuery 可能以稍微粗心的方式使用它——没有首先测试是否有某种类型的支持——但没有造成任何实际伤害。如果是这样，如果有足够多的人向 jQuery 团队抱怨它，那么 jQuery 代码可能会被重构以解决这个问题（以 jQuery 运行速度稍慢一点为代价）。

如果警告是 about`-moz-box-sizing`而不是`box-sizing`，那更可能表明 Firefox 可能存在错误，而不是 jQuery 的小问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T22:54:17.140

根据 jQuery 人员的说法，这是一个 Firefox 问题，他们对此无能为力。从 Firefox 27(beta) 开始，它仍在发生。见：[http ://bugs.jquery.com/ticket/13569](http://bugs.jquery.com/ticket/13569)

# image - iOS6如何知道app能否通过UIImageWriteToSavedPhotosAlbum访问相册

> ID：15306926
> 
> 赞同：3
> 
> 时间：2013-03-09T03:48:43.310
> 
> 标签：image, ios6, privacy

我想知道我的应用程序在将图像保存到相册时是否可以访问相册。当应用程序在隐私设置中被禁用时会`didFinishSavingWithError`返回错误。如何在保存图像之前检测是否允许应用访问相册？

```
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if (error != NULL)
    {
        // error        
    }
    else  
    {
        // No errors
    }
} 
```

# javascript - 在 Javascript 行为异常的情况下在两个状态之间应用转换

> ID：15306931
> 
> 赞同：1
> 
> 时间：2013-03-09T03:49:07.773
> 
> 标签：javascript, jquery, css, css-transitions, jquery-events

我正在努力理解为什么转换没有按预期运行。它应该应用“from”，然后将“transition”添加到“el”，然后它应该运行“to”，最后 onTransitionEnd 它应该运行“callback”（前面有一些代码可以清除过渡属性）。

在 Webkit 浏览器中，它可以正确转换 slideDown，但 slideUp 是即时的。反向在 Firefox 中是正确的。

尔格？

JSFiddle：http: [//jsfiddle.net/enhTd/](http://jsfiddle.net/enhTd/)

```
var $ = function(query) {
                var a = [],
                    n = document.querySelectorAll(query),
                    l = n.length;

                for( var i = 0; i<l; i++){
                    a.push(n[i]);
                    }
                if(l>1) {return a;} else {return a[0];}

                },
    $id = function(query) { return document.getElementById(query);},
    getSupportedPropertyName = function(properties) {
        for (var i = 0; i < properties.length; i++) {
            if (typeof document.body.style[properties[i]] != "undefined") {
                return properties[i];
            }
        }
        return null;
    },
    vendorTransitions = ["transition", "msTransition", "webkitTransition", "MozTransition", "OTransition"],
    prefixedTransitionProperty = getSupportedPropertyName(vendorTransitions),
    transition = function(opts){

        opts.from && opts.from();

        if(prefixedTransitionProperty){
            var c = opts.callback || function() {},
                el = opts.el,
                cb = function(event){
                    var ev = event, callback = c;
                    ev.target.removeEventListener(prefixedTransitionProperty+"End", cb);
                    ev.target.style[prefixedTransitionProperty] = "none";
                    if(callback) {
                        callback(ev);
                        }
                    };

            el.style[prefixedTransitionProperty] = opts.transition || "";
            el.addEventListener(prefixedTransitionProperty+"End", cb);
        }

        opts.to && opts.to();

    },
    slideDown = function(el, t){
        var style = el.style,
            h, oh = el.offsetHeight,
            t = t || 1000;

        //Grab real height
        style.height = "";
        h = el.offsetHeight;

        transition({
            "el": el,
            transition: "height "+t+"ms ease",
            from: function() {
                style.height = oh+"px";
            },
            to: function(){
                style.overflow = "hidden";
                style.height = h+"px";
                },
            callback: function(event){
                event.target.style.height = "";
                }
            });

    },
    slideUp = function(el, t){
        var style = el.style,
            h = el.offsetHeight,
            t = t || 1000;

        transition({
            "el": el,
            transition: "height "+t+"ms ease",
            from: function() {
                style.height = h+"px";
                },
            to: function(){
                style.overflow = "hidden";
                style.height = "0";
                }
            });

    },
    slideToggle = function(el, t){
        var t = t || 1000;

        if(el.style.height=="0px"){
            slideDown(el, t);
        } else {
            slideUp(el, t);
        }
    };

slideUp($id("intro"));
$("a[href='#intro']").forEach(function(el){
    el.addEventListener("click", function(ev) { 
        ev.preventDefault();
        if(ev.target.classList.contains("hide")){
            slideUp($(ev.target.hash));
        } else {
            slideDown($(ev.target.hash));
        }
    });
});
$("li h3").forEach(function(el){
    el.addEventListener("click", function(ev) { 
        ev.preventDefault();
        slideToggle(ev.target.parentNode);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:10:25.663

试试这个： http: [//jsfiddle.net/enhTd/1/](http://jsfiddle.net/enhTd/1/)（在chrome和ff中测试）

**第一：**做jfriend00[所说的](https://stackoverflow.com/a/15307565/766570)：

在您的转换功能中：

```
transition = function (opts) {
    ..
    setTimeout(function() {
        opts.to && opts.to();
    }, 1)
} 
```

**第二：**您的方法中不需要回调`slideDown()`：

```
slideDown = function (el, t) {
    ..
    take this out:
      /*callback: function (event) {
            event.target.style.height = "";
        }*/
    }); 
```

从设计的角度来看..回调函数没有增加任何价值..你应该从你离开的地方继续过渡。

**第三：**当幻灯片已经向下时禁用向下滑动.. 但我会把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:31:12.483

在某些浏览器中，您不能只设置初始状态、设置最终状态并期望 CSS 转换起作用。

相反，必须设置初始状态，然后必须渲染它，然后才能设置最终状态并期望转换运行。使其被渲染的最简单方法是返回事件循环，然后在`setTimeout()`调用后进行任何进一步的处理（如设置最终状态）。

# c# - 在 XMLSerialzation 添加缺少的属性

> ID：15306938
> 
> 赞同：1
> 
> 时间：2013-03-09T03:50:29.767
> 
> 标签：c#, xml-serialization, xmlserializer

如何让 IPDR 节点看起来像这样：

```
<ns2:IPDR xmlns:ns0="http://www.ipdr.org/namespaces/PWA" xsi:type="ns0:PublicWLANAccessUsageEntry"> 
```

而不是这个：

```
<ns2:IPDR xsi:type="ns0:PublicWLANAccessUsageEntry"> 
```

无需将它生成的 xml 文件加载到 xmlDoc 中并添加它。当调用 XmlSerializer.Serialize 时，我更愿意这样做。

预期的：

```
 <?xml version="1.0" encoding="utf-8"?>
<ns2:IPDRDoc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns0="http://www.ipdr.org/namespaces/PWA" xmlns:ns1="http://www.w3.org/2001/XMLSchema" docId="xxx" version="3.5.1" creationTime="2013-03-09T01:17:27Z" IPDRRecorderInfo="xxx" xmlns:ns2="http://www.ipdr.org/namespaces/ipdr">
  <ns2:IPDR xmlns:ns0="http://www.ipdr.org/namespaces/PWA" xsi:type="ns0:PublicWLANAccessUsageEntry">
    <ns2:IPDRCreationTime></ns2:IPDRCreationTime>
    <ns2:seqNum></ns2:seqNum>
    <ns0:userName></ns0:userName>
    <ns0:subscriberID></ns0:subscriberID>
    <ns0:sessionID></ns0:sessionID>
    <ns0:callingStationID></ns0:callingStationID>
    <ns0:locationPort></ns0:locationPort>
    <ns0:calledStationID></ns0:calledStationID>
    <ns0:NASIPaddress></ns0:NASIPaddress>
    <ns0:NASID></ns0:NASID>
    <ns0:locationName></ns0:locationName>
    <ns0:locationID></ns0:locationID>
    <ns0:locationCountryCode></ns0:locationCountryCode>
    <ns0:locationStateProvince></ns0:locationStateProvince>
    <ns0:locationCity></ns0:locationCity>
    <ns0:NASPortType></ns0:NASPortType>
    <ns0:networkConnectionType></ns0:networkConnectionType>
    <ns0:sessionDuration></ns0:sessionDuration>
    <ns0:unitOfMeasure></ns0:unitOfMeasure>
    <ns0:chargeableUnit></ns0:chargeableUnit>
    <ns0:chargeableQuantityCumulative></ns0:chargeableQuantityCumulative>
    <ns0:inputOctetsCumulative></ns0:inputOctetsCumulative>
    <ns0:outputOctetsCumulative></ns0:outputOctetsCumulative>
    <ns0:GMTSessionStartDateTime>
      <ns0:sessionStartDateTime></ns0:sessionStartDateTime>
      <ns0:timeZoneOffset></ns0:timeZoneOffset>
    </ns0:GMTSessionStartDateTime>
    <ns0:GMTSessionEndDateTime>
      <ns0:sessionEndDateTime></ns0:sessionEndDateTime>
      <ns0:timeZoneOffset></ns0:timeZoneOffset>
    </ns0:GMTSessionEndDateTime>
    <ns0:sessionTerminationCause></ns0:sessionTerminationCause>
    <ns0:acctStatusType></ns0:acctStatusType>
  </ns2:IPDR>
</ns2:IPDRDoc> 
```

实际的：

```
 <?xml version="1.0" encoding="utf-8"?>
<ns2:IPDRDoc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns0="http://www.ipdr.org/namespaces/PWA" xmlns:ns1="http://www.w3.org/2001/XMLSchema" docId="xxx" version="3.5.1" creationTime="2013-03-09T02:53:36Z" IPDRRecorderInfo="xxx" xmlns:ns2="http://www.ipdr.org/namespaces/ipdr">
  <ns2:IPDR xsi:type="ns0:PublicWLANAccessUsageEntry">
    <ns2:IPDRCreationTime></ns2:IPDRCreationTime>
    <ns2:seqNum></ns2:seqNum>
    <ns0:userName></ns0:userName>
    <ns0:subscriberID></ns0:subscriberID>
    <ns0:sessionID></ns0:sessionID>
    <ns0:callingStationID></ns0:callingStationID>
    <ns0:locationPort></ns0:locationPort>
    <ns0:calledStationID></ns0:calledStationID>
    <ns0:NASIPaddress></ns0:NASIPaddress>
    <ns0:NASID></ns0:NASID>
    <ns0:locationName></ns0:locationName>
    <ns0:locationID></ns0:locationID>
    <ns0:locationCountryCode></ns0:locationCountryCode>
    <ns0:locationStateProvince></ns0:locationStateProvince>
    <ns0:locationCity></ns0:locationCity>
    <ns0:NASPortType></ns0:NASPortType>
    <ns0:networkConnectionType></ns0:networkConnectionType>
    <ns0:sessionDuration></ns0:sessionDuration>
    <ns0:unitOfMeasure></ns0:unitOfMeasure>
    <ns0:chargeableUnit></ns0:chargeableUnit>
    <ns0:chargeableQuantityCumulative></ns0:chargeableQuantityCumulative>
    <ns0:inputOctetsCumulative></ns0:inputOctetsCumulative>
    <ns0:outputOctetsCumulative></ns0:outputOctetsCumulative>
    <ns0:GMTSessionStartDateTime>
      <ns0:sessionStartDateTime></ns0:sessionStartDateTime>
      <ns0:timeZoneOffset></ns0:timeZoneOffset>
    </ns0:GMTSessionStartDateTime>
    <ns0:GMTSessionEndDateTime>
      <ns0:sessionEndDateTime></ns0:sessionEndDateTime>
      <ns0:timeZoneOffset></ns0:timeZoneOffset>
    </ns0:GMTSessionEndDateTime>
    <ns0:sessionTerminationCause></ns0:sessionTerminationCause>
    <ns0:acctStatusType></ns0:acctStatusType>
  </ns2:IPDR> 
```

我的代码片段：

```
[System.SerializableAttribute]
[System.Diagnostics.DebuggerStepThroughAttribute]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = false, Namespace = "http://www.ipdr.org/namespaces/ipdr", IncludeInSchema = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://www.ipdr.org/namespaces/ipdr", IsNullable = false)]
public partial class IPDRDoc
{
}

[System.SerializableAttribute]
[System.Diagnostics.DebuggerStepThroughAttribute]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://www.ipdr.org/namespaces/PWA", IncludeInSchema = true, AnonymousType = false)]
public partial class PublicWLANAccessUsageEntry : IPDRType // this is the IPDR Node
{
}

XmlSerializer ser = new XmlSerializer(typeof(IPDRDoc));
FileStream stream = new FileStream(filePath, FileMode.Create);
StreamWriter writer = new StreamWriter(stream, new UTF8Encoding());
XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
xmlns.Add("ns2", "http://www.ipdr.org/namespaces/ipdr");
xmlns.Add("ns0", "http://www.ipdr.org/namespaces/PWA");
xmlns.Add("ns1", "http://www.w3.org/2001/XMLSchema");
xmlns.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
ser.Serialize(writer, Ipdr, xmlns); 
```

# ios - UIAlertView 警报在长按手势识别器中重复三次

> ID：15306942
> 
> 赞同：0
> 
> 时间：2013-03-09T03:51:21.873
> 
> 标签：ios, uigesturerecognizer, uialertview

我创建了一个应用程序。通过开发它，我使用长按按钮来显示警报。

这是我的代码：

```
- (IBAction)longPressDetected1:(UIGestureRecognizer *)sender {
    //     label1.text = @"Select Iran to observe its historical data projections ";

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                    message:@"Press the blue button (+) to select your region "
                                                   delegate:self
                                          cancelButtonTitle:@"Ok"
                                          otherButtonTitles:nil];

    [alert show];    
} 
```

问题：当我想通过cancelI按钮取消UIAlertView时，我必须按此按钮3次才能取消UIAlertView。这意味着 UIAlterview 不能一键取消。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T04:35:32.113

问题是您显示了多个警报视图。您的长按处理程序将被调用用于不同的状态。

从文档中`UILongPressGestureRecognizer`：

> 长按手势是连续的。当允许的手指数量 (numberOfTouchesRequired) 在指定的时间 (minimumPressDuration) 内被按下并且触摸没有超出允许的移动范围 (allowableMovement) 时，手势开始 (UIGestureRecognizerStateBegan)。每当手指移动时，手势识别器就会转换到 Change 状态，并在任何手指抬起时结束 (UIGestureRecognizerStateEnded)。

因此，您最终会显示“开始”状态的警报，然后是“已更改”状态，然后再次显示“已结束”状态。如果你四处移动你的手指，你会得到一连串“已更改”状态，你最终也会为每个状态显示一个警报。

您需要决定何时真正希望出现警报。您是否希望它出现在第一个“已更改”状态或当用户抬起手指并且您获得“已结束”状态时。

您的代码需要是这样的：

```
- (IBAction)longPressDetected1:(UIGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateEnded) {
        //     label1.text = @"Select Iran to observe its historical data projections ";

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                    message:@"Press the blue button (+) to select your region "
                                                   delegate:self
                                          cancelButtonTitle:@"Ok"
                                          otherButtonTitles:nil];

        [alert show];
    }
} 
```

这将在用户抬起手指时显示警报。如果您希望在识别出长按后立即显示警报，请更改`UIGestureRecognizerStateEnded`为。`UIGestureRecognizerStateChanged`但请记住，由于长按会产生多个“已更改”状态，因此您仍然可能会得到多个。在这种情况下，您需要添加一个额外的检查以仅在没有警报时才显示警报。

实际上，这是支持“已更改”状态的单个警报的简单方法：

```
- (IBAction)longPressDetected1:(UIGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateChanged) {
        sender.enabled = NO; // Prevent any more state updates so you only get this one
        sender.enabled = YES; // reenable the gesture recognizer for the next long press

        //     label1.text = @"Select Iran to observe its historical data projections ";

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                    message:@"Press the blue button (+) to select your region "
                                                   delegate:self
                                          cancelButtonTitle:@"Ok"
                                          otherButtonTitles:nil];

        [alert show];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:35:17.863

尝试这个

```
- (IBAction)longPressDetected1:(UIGestureRecognizer *)sender {
//     label1.text = @"Select Iran to observe its historical data projections ";

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                message:@"Press the blue button (+) to select your region "
                                               delegate:self
                                      cancelButtonTitle:@"Ok"
                                      otherButtonTitles:nil];
alert.tag =10;
[alert show];    

}

- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex {

  switch (alertView.tag)
{
    case 10:
        if (buttonIndex==0)
        {

        }
        break;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T00:17:03.437

这是一个老问题，但我有一个类似的问题。

任何 UILongPressGestureRecognizer 都会产生至少 4 次状态变化：

*   改变 - （即改变为开始）
*   开始 - （即开始）
*   改变 - （即改变为结束）
*   结束 - （即结束）

因此，要处理好它，您需要选择哪些条件会激活一个动作。

最简单的，与 UIButton 的“内部修饰”相对应的是检测“结束”状态。

下面是一个示例，其中“longPress”是 UILongPressGestureRecognizer 的实例

```
- (void)longPressedLastImage:(UILongPressGestureRecognizer*) longPress {
    if (longPress.state == UIGestureRecognizerStateEnded) {
       // do what you would in response to an equivalent button press 
    }
} 
```

这使您可以将连续按下更像是基本的 UIButton 操作。

“简单胜于复杂”——T Peters——Python 之禅

# jquery - Bootstrap modal 的 data-dismiss on close modal 不关闭 mozila 和 IE 中的音频

> ID：15306944
> 
> 赞同：2
> 
> 时间：2013-03-09T03:51:54.563
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, haml

我正在使用引导模式弹出窗口来显示项目中附加的音频/视频。单击取消按钮时，模式应关闭并且音频应停止播放。这在 Chrome 中正常工作，但在 mozila 和 IE 中，当我单击取消模式时，模式会消失，但音频/视频继续播放。

这是模式弹出的 HAML 代码：

```
%a{ href: "#", class: "x", title: "Close", :'data-dismiss' => "modal" }
    .diagRepeater &nbsp;

    = swf_tag "StrobeMediaPlayback",
      :width => '620',
      :height => (attachment.media_content_type.split('/')[0] == 'audio' ? '65' : '340'),
      :flashvars => { :urlIncludesFMSApplicationInstance => "true",
      :src => URI.encode("#{request.protocol}#{request.host_with_port}" + attachment.media.url),
      :playButtonOverlay => (attachment.media_content_type.split('/')[0] == 'audio' ? 'false' : 'true'),
      :controlBarAutoHide => (attachment.media_content_type.split('/')[0] == 'audio' ? 'false' : 'true') },
      :parameters => { :allowFullScreen => "true", :wmode => "direct",     :allowScriptAccess => "always" } 
```

这是 bootstrap.js 文件中的代码：

```
hide: function (e) {
e && e.preventDefault()

    var that = this
    alert(this.toString());
    e = $.Event('hide')

    this.$element.trigger(e)

    if (!this.isShown || e.isDefaultPrevented()) return

    this.isShown = false

    $('body').removeClass('modal-open')

    escape.call(this)

    this.$element.removeClass('in')

    $.support.transition && this.$element.hasClass('fade') ?
      hideWithTransition.call(this) :
      hideModal.call(this)
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:26:00.930

如果您遇到任何问题，有一个简单的方法，只需使用下面的代码并首先清除模态的 html 并重新放置它，它应该每次都可以工作：

```
$('.x').live('click',function(){
    var media_html = '';
    $('.modalBox').each(function(){
         media_html = $(this).html();
         $(this).html('');
         $(this).html(media_html);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:59:06.620

尝试这样的事情：

```
$('.x').click(function(){
    var myAudio = document.getElementsByTagName("audio")[0];
    if(myAudio != undefined){
        myAudio.StopPlay();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:56:38.027

这真的不应该太难。我认为您的 javascript 存在问题。你有没有像 Railscasts 解释的那样实现 Bootstrap？我从来没有对模态和视频有任何问题。

[http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T04:53:16.470

```
<a href="#" class="mydemo">Open Video</a>
<div id="myModal" class="modal hide" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    </div>
    <div class="modal-body"> <iframe width="470" height="310" frameborder="0" allowfullscreen=""></iframe></div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div>

<script type="text/javascript">
$('.mydemo').click(function () {
            var src = 

'http://www.youtube.com/v/2EnI9K8Fkf4&amp;rel=0&amp;autohide=1&amp;showinfo=0&amp;autoplay=1';
            $('#myModal').modal('show');
            $('#myModal iframe').attr('src', src);
            });

        $('#myModal.modal').bind('hide', function () {
            var iframe = $(this).children('div.modal-body').find('iframe');
            var src = iframe.attr('src');
            iframe.attr('src', '');
            iframe.attr('src', src);
            });

</script> 
```

此代码在 IE 上完美运行。

# scala - 项目的 Sbt 构建分发

> ID：15306949
> 
> 赞同：2
> 
> 时间：2013-03-09T03:52:54.397
> 
> 标签：scala, sbt

有没有一种简单的方法来为 SBT 项目创建分发，它将所有依赖项 jar 收集到一个像 lib 一样的目录中，并且主项目 jar 文件使用清单条目引用它的所有依赖项？如果能定义一个主类就好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:30:12.713

这个[回答](https://stackoverflow.com/a/7989565/355499)说如何做你想做的一部分。即将托管的依赖项放入`lib_managed`目录。基本上只需添加：

```
retrieveManaged := true 
```

到您的 build.sbt 文件。

或者，您可以查看 One-jar 插件[https://github.com/sbt/sbt-onejar](https://github.com/sbt/sbt-onejar)它可能比您想要的要多一点。

# java - iPhone 上的响应式站点...在基地加载？

> ID：15306952
> 
> 赞同：0
> 
> 时间：2013-03-09T03:53:30.367
> 
> 标签：java, jquery, html, mobile-safari, responsive-design

查看[http://brybell.me](http://brybell.me)。

```
window.addEventListener("load",function() {
    setTimeout(function() {
        document.body.scrollTop || window.scrollTo(0, 1);
    }, 0);
}); 
```

这是我目前用来自动隐藏 Safari iOS 浏览器导航栏的代码。但是，如果您在 iPhone 上查看它，您会看到底部的 2 个社交媒体按钮被切断，您必须滚动才能看到完整的按钮。

我的问题是：有没有一种简单的方法可以使页面在页面底部而不是顶部自动加载？因为整个网页适合屏幕，所以用户不需要滚动。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:15:22.157

试试这个。

```
window.addEventListener("load",function() {
  setTimeout(function() {
    document.body.scrollTop = document.body.offsetHeight;
  }, 0);
}); 
```

# eclipse - 从外部 jar 到 maven 的项目转换失败

> ID：15306957
> 
> 赞同：0
> 
> 时间：2013-03-09T03:54:06.137
> 
> 标签：eclipse, maven, tomcat, maven-plugin

我正在尝试将我的项目从使用外部 jar 转换为 maven。我已经在 Eclipse 中安装了 m2e 插件。但是我无法正确配置它。我已经基于外部 jar 生成了一个 pom.xml 文件，但是有一个冲突 jar - spring-orm-3.2.1.RELEASE.jar （它在列表中出现了两次，可能是重复的？）。然后我从 /WEB-INF/lib 目录中删除了 jar，并尝试将项目部署到 Tomcat。当我在 pom.xml Overview 'jar' 中选择包装时，我得到：

```
 2013-03-09 04:35:05 org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/apm/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/keepGeo/WEB-INF/lib/tomcat-el-api-7.0.37.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/el/Expression.class
2013-03-09 04:35:05 org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/apm/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/keepGeo/WEB-INF/lib/tomcat-servlet-api-7.0.37.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
2013-03-09 04:35:05 org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception
java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addServlet
2013-03-09 04:35:05 org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at file:/home/apm/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf/web.xml
org.xml.sax.SAXParseException; systemId: file:/home/apm/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf/web.xml; lineNumber: 103; columnNumber: 15; Error at (103, 15) : org.apache.catalina.deploy.WebXml addServlet
... 
```

当我选择其他选项'war'，'pom'时，我得到：

```
...
2013-03-09 04:47:14 org.apache.catalina.startup.ContextConfig processAnnotationsJar
SEVERE: Unable to process Jar entry [org/springframework/orm/ibatis/SqlMapClientTemplate$10.class] from Jar [jar:file:/home/apm/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/keepGeo/WEB-INF/lib/spring-orm-3.2.1.RELEASE.jar!/] for annotations
java.util.zip.ZipException: invalid LOC header (bad signature) 
```

我尝试 `<scope>provided</scope>`在 pom.xml 中添加 tomcat-el-api 和 tomcat-servlet-api 依赖项，但没有成功。我也多次尝试清理和构建 Maven/Project...不知道下一步该做什么。

[编辑]

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>keepGeo</groupId>
  <artifactId>keepGeo</artifactId>
  <version>0.0.1-SNAPSHOT</version>
   <repositories>
      <repository>
    <id>Geoserver-Manager</id>
    <url>http://maven.geo-solutions.it/</url>
      </repository>
    </repositories>
  <dependencies>

    <dependency>
      <groupId>org.eclipse.jdt.core.compiler</groupId>
      <artifactId>ecj</artifactId>
      <version>4.2.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-tribes</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-jdbc</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-jasper-el</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-util</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-jsp-api</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
    <scope>provided</scope>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-el-api</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-i18n-fr</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-jasper</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-i18n-ja</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-catalina-ha</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-api</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-annotations-api</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-catalina-ant</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
        <scope>provided</scope>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-catalina</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-dbcp</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-i18n-es</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
    <scope>provided</scope>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-servlet-api</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomcat</groupId>
      <artifactId>tomcat-coyote</artifactId>
      <version>7.0.37</version>
    </dependency>
    <dependency>
      <groupId>antlr</groupId>
      <artifactId>antlr</artifactId>
      <version>2.7.7</version>
    </dependency>
    <dependency>
      <groupId>org.antlr</groupId>
      <artifactId>antlr-runtime</artifactId>
      <version>3.5</version>
    </dependency>
    <dependency>
      <groupId>commons-collections</groupId>
      <artifactId>commons-collections</artifactId>
      <version>3.2.1</version>
    </dependency>
    <dependency>
      <groupId>commons-dbcp</groupId>
      <artifactId>commons-dbcp</artifactId>
      <version>1.4</version>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>
    </dependency>
    <dependency>
      <groupId>commons-pool</groupId>
      <artifactId>commons-pool</artifactId>
      <version>1.6</version>
    </dependency>
    <dependency>
      <groupId>dom4j</groupId>
      <artifactId>dom4j</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>ejb3-persistence</artifactId>
      <version>1.0.2.GA</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate.common</groupId>
      <artifactId>hibernate-commons-annotations</artifactId>
      <version>4.0.1.Final</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>4.1.10.Final</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate.javax.persistence</groupId>
      <artifactId>hibernate-jpa-2.0-api</artifactId>
      <version>1.0.1.Final</version>
    </dependency>
    <dependency>
      <groupId>org.javassist</groupId>
      <artifactId>javassist</artifactId>
      <version>3.15.0-GA</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.logging</groupId>
      <artifactId>jboss-logging</artifactId>
      <version>3.1.0.GA</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.spec.javax.transaction</groupId>
      <artifactId>jboss-transaction-api_1.1_spec</artifactId>
      <version>1.0.0.Final</version>
    </dependency>
    <dependency>
      <groupId>jstl</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
    </dependency>
    <dependency>
      <groupId>javax.transaction</groupId>
      <artifactId>transaction-api</artifactId>
      <version>1.1</version>
    </dependency>
    <dependency>
      <groupId>org.jumpmind.symmetric.jdbc</groupId>
      <artifactId>postgresql</artifactId>
      <version>9.2-1002-jdbc4</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.7.2</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <version>1.7.2</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-aop</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context-support</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-expression</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-jdbc</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-config</artifactId>
      <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-core</artifactId>
      <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-taglibs</artifactId>
      <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-web</artifactId>
      <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>taglibs</groupId>
      <artifactId>standard</artifactId>
      <version>1.1.2</version>
    </dependency>
    <dependency>
    <groupId>it.geosolutions</groupId>
    <artifactId>geoserver-manager</artifactId>
    <version>1.3.0</version>
  </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
  </dependencies>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <packaging>war</packaging>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:39:59.270

你想发动一场战争。

对于容器提供的所有 maven 依赖项（servlet jar 等），您需要添加`scope`元素。

例如

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-api</artifactId>
    <version>7.0.37</version>
    <scope>provided</scope>
</dependency> 
```

这样你的类将被编译，但这些 jars 不会进入你的战争的最终构建。

# java - 将会话变量数据从jsp传递到java

> ID：15306958
> 
> 赞同：0
> 
> 时间：2013-03-09T03:54:08.407
> 
> 标签：java, javascript, jsp, session, session-variables

我创建了会话变量，因为我想将数据从一个 JSP 传输到另一个。我的每个 JSP 都是一个选项卡。我使用请求正文将用户提供的数据从一个 JSP 传输到另一个。我`<form>..><button type = "submit"/> </form>`在最后一个 JSP 中提交数据并在 Java 类中使用它。

当我尝试从所有 JSP 页面访问会话数据时，它会为所有数据返回一个空值。

我应该如何将所有 JSP 中的所有会话数据传输到 Java 类？请注意，每个 JSP 都是一个选项卡，我从最后一个 JSP 提交数据。

代码：

```
<% 
    String joindate = request.getParameter( "joindate" );
    session.setAttribute("joindate",joindate);
    String birthdate = request.getParameter( "birthdate" );
    session.setAttribute("birthdate",birthdate);
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:45:25.470

一般来说，尽量避免使用scriptlet。您绝对应该按照 Makoto 的建议去做：使用 MVC 模式，让您的 JSP 将他们的数据提交给一个 servlet，该 servlet 完成繁重的工作。

每当您在 JSP 中有表单时，请考虑使用

`<form action="servletpattern?action=add_date" method="post">`

然后在servlet中：

```
 HttpSession session = request.getSession();
 String action = request.getParameter("action");
 if(action.equals("add_date")){
     String joindate = request.getParameter( "joindate" );
     session.setAttribute("joindate",joindate);
     String birthdate = request.getParameter( "birthdate" );
     session.setAttribute("birthdate",birthdate);
 } else if(action.equals("someotheraction"){
     //do something else
 } 
```

在 JSP 中，您不应再次使用 scriptlet，而应通过 EL 访问会话变量：

```
join date: ${joindate}, birth date: ${birthdate} 
```

# android - 从 JAR 文件在 Android 中存储文件

> ID：15306962
> 
> 赞同：0
> 
> 时间：2013-03-09T03:55:03.873
> 
> 标签：android, api, jar, file-permissions

我正在为 Android 应用程序编写一些后端接口代码。我想将后端 api 打包在一个 jar 文件中，并将其作为 lib 包含在主应用程序中。（即使它是一个图书馆项目，我也有同样的问题）。

此 api 的功能之一是从远程服务器下载文件。我有一个方法，我将“根路径”传递给 api。

```
public void storeRemoteFile(String rootPath) 
```

该方法启动一个线程，并在后台抓取文件并将其存储到 roothPath。我在控制台中运行此代码没有问题，并且该文件已下载到我的 PC。因此，在 jar 文件中的类中调用此方法会给我一个文件权限错误。

```
java.io.FileNotFoundException: /storage/adcard0/Android/data/com.myapp/files/temp.zip: open failed: EACCES (Permission denied) 
```

有没有办法给api权限来写文件？如果没有，是否有关于如何允许 api jar 下载文件并将其传递到主应用程序进行存储的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:32:05.170

确保你有

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

在您的清单中。

# java - 为什么我的 Java 程序中的循环不起作用？

> ID：15306963
> 
> 赞同：-1
> 
> 时间：2013-03-09T03:55:09.187
> 
> 标签：java, loops, arraylist

我想创建一个构造函数，我将要求用户输入将存储在 ArrayList 中的人名，然后要求用户输入该人的电话号码，该电话号码也将存储在另一个 ArrayList 中。这应该保持循环，除非用户输入“否”，然后结束循环。

但是，当我在演示类中运行该方法时，第一次迭代工作正常，但第二次超时，它不起作用，因为它跳过了用户输入的人名并直接跳转到电话号码的输入。

我到底做错了什么？

```
public PhoneBookEntry()
{
    System.out.println("Enter the following requested data.");
    System.out.println("");
    int i=0;
    while(i==0)
    {       
        System.out.println("Enter the name of the person (enter 'no' to end): ");
        input_name = kb.nextLine();
        if(!input_name.equalsIgnoreCase("no"))
        {
            name.add(input_name);
            System.out.println("Enter the phone number of that person (enter '-1' to end): ");
            input_number = kb.nextLong();
            phone_number.add(input_number);
        }
        else
        {
            name.trimToSize();
            break;
        }

        System.out.println("");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T03:59:06.763

您的问题在于您的 Scanner 对象。了解 Scanner`nextLong()`和类似方法（例如`nextInt()`、`nextDouble()`、`next()`）不处理行尾 (EOL) 令牌。你必须自己费力去处理。

一种方法是添加这样的调用`nextLine()`：

```
 System.out.println("Enter the name of the person (enter 'no' to end): ");
    input_name = kb.nextLine();
    if(!input_name.equalsIgnoreCase("no"))
    {
        name.add(input_name);
        System.out.println("Enter the phone number of that person (enter '-1' to end): ");
        input_number = kb.nextLong();
        phone_number.add(input_number); 
```

对此：

```
 System.out.println("Enter the name of the person (enter 'no' to end): ");
    input_name = kb.nextLine();
    if(!input_name.equalsIgnoreCase("no"))
    {
        name.add(input_name);
        System.out.println("Enter the phone number of that person (enter '-1' to end): ");
        input_number = kb.nextLong();
        kb.nextLine();  // **** added to handle the EOL ****
        phone_number.add(input_number); 
```

结束是的，评论是正确的——这是一个*糟糕*的构造函数。构造函数不是用于直接与用户交互，而是仅用于创建对象。

# iphone - 用户应该为在多个设备上使用 iPhone 应用程序付费吗？

> ID：15306967
> 
> 赞同：-2
> 
> 时间：2013-03-09T03:55:14.643
> 
> 标签：iphone, ios

我有一个 senario，如果应用程序是从我的 1account 购买的 1 个设备（假设是 iphone 3），并且如果我将相同的应用程序安装到另一台设备上，并且在另一台设备（iphone 4）中使用相同的 iTunes 登录详细信息，我应该支付再次？还是我应该为我所有已支付的应用内购买再次付款？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:59:21.600

不，如果您的产品类型是非消耗品，您不想多次支付。

[在In App Purchase Programming Guide](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html)中查看使用 App Store概念**注册产品**。

享受编程！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:59:15.797

Apple 的规则规定应用程序属于帐户，而不是设备。您不能将应用程序（或非消耗性 IAP）的访问权限限制在单个设备上。

如果您在另一台设备上安装该应用程序，您应该能够将任何以前购买的（非消耗性）IAP 恢复到该新设备。

# html - 页脚在不同的浏览器中采用不同的大小

> ID：15306974
> 
> 赞同：0
> 
> 时间：2013-03-09T03:56:18.453
> 
> 标签：html, css, footer, sticky-footer

我正在构建一个 Web 应用程序。

我在页面中添加了页脚。

Firefox 中的页脚变大（水平）。有什么可能的原因吗？

页脚是此处提到的粘性 div - [http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

容器 CSS -

```
.container{

    background: #ffffff;
    width: 90%;
    min-height: 100%;
            height: auto !important;
            height: 100%;

    background: #FFF;
    margin: 0 auto -60px;
    max-width: 1200px;/* a max-width may be desirable to keep this layout from getting too wide on a large monitor. This keeps line length more readable. IE6 does not respect this declaration. */
    min-width: 768px;/* a min-width may be desirable to keep this layout from getting too narrow. This keeps line length more readable in the side columns. IE6 does not respect this declaration. */

} 
```

页脚 CSS -

```
#footer {
        height: 60px;

        background-color: #F0F0F0  ;

    width: 90%;
    margin: 0 auto 0;

    -moz-border-radius: 2px;
    border-radius: 2px;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:03:25.207

只需将页脚元素的这两个属性添加到容器元素中即可

```
#footer
{
max-width: 1200px;
min-width: 768px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:05:44.780

在css中去掉-60px的margin来解决固定页脚UI设计的问题

# android - 不幸的是，Google Maps API 已在模拟器上停止

> ID：15306981
> 
> 赞同：-5
> 
> 时间：2013-03-09T03:58:02.290
> 
> 标签：android

我从 Android 开发开始，并从这里[https://developers.google.com/maps/documentation/android/intro#sample_code](https://developers.google.com/maps/documentation/android/intro#sample_code)使用示例代码访问 Google 地图。我按照本网站中的所有步骤进行操作，我这边没有任何改变，当我运行时，我在模拟器上看到这条消息：不幸的是 Google Maps API 已停止。

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapdemo"
    android:versionCode="2"
    android:versionName="2.1.0">
    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
    <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission >android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <!-- My Location -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
    <!-- End of copy. -->
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/demo_title"
        android:hardwareAccelerated="true">
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyDYj6PVzqEyVw5ZItRp-PKrVEIb8woTdVc"/>
        <activity android:name="com.example.mapdemo.MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name=".BasicMapActivity"
            android:label="@string/basic_map"/>
        <activity
            android:name=".CameraDemoActivity"
            android:label="@string/camera_demo"/>
        <activity
            android:name=".CircleDemoActivity"
            android:label="@string/circle_demo"/>
        <activity
            android:name=".EventsDemoActivity"
            android:label="@string/events_demo"/>
        <activity
            android:name=".GroundOverlayDemoActivity"
            android:label="@string/groundoverlay_demo"/>
        <activity
            android:name=".LayersDemoActivity"
            android:label="@string/layers_demo"/>
        <activity
            android:name=".LocationSourceDemoActivity"
            android:label="@string/locationsource_demo"/>
        <activity
            android:name=".MarkerDemoActivity"
            android:label="@string/marker_demo"/>
        <activity
            android:name=".OptionsDemoActivity"
            android:label="@string/options_demo"/>
        <activity
            android:name=".PolygonDemoActivity"
            android:label="@string/polygon_demo"/>
        <activity
            android:name=".PolylineDemoActivity"
            android:label="@string/polyline_demo"/>
        <activity
            android:name=".ProgrammaticDemoActivity"
            android:label="@string/programmatic_demo"/>
        <activity
            android:name=".TileOverlayDemoActivity"
            android:label="@string/tile_overlay_demo"/>
        <activity
            android:name=".UiSettingsDemoActivity"
            android:label="@string/uisettings_demo"/>
        <activity
            android:name=".RawMapViewDemoActivity"
            android:label="@string/raw_mapview_demo"/>
        <activity
            android:name=".RetainMapActivity"
            android:label="@string/retain_map"/>
        <activity
            android:name=".MultiMapDemoActivity"
            android:label="@string/multi_map_demo"/>
    </application>
</manifest> 
```

这是`main.java`文件：

```
package com.example.mapdemo;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

import com.example.mapdemo.view.FeatureView;
import android.app.Activity;

public final class MainActivity extends ListActivity {

    private static class DemoDetails {
        private final int titleId;
        private final int descriptionId;
        private final Class<? extends FragmentActivity> activityClass;
        public DemoDetails(
                int titleId, int descriptionId, Class<? extends FragmentActivity> >activityClass) {
            super();
            this.titleId = titleId;
            this.descriptionId = descriptionId;
            this.activityClass = activityClass;
        }
    }

    private static class CustomArrayAdapter extends ArrayAdapter<DemoDetails> {
        public CustomArrayAdapter(Context context, DemoDetails[] demos) {
            super(context, R.layout.feature, R.id.title, demos);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            FeatureView featureView;
            if (convertView instanceof FeatureView) {
                featureView = (FeatureView) convertView;
            } else {
                featureView = new FeatureView(getContext());
            }

            DemoDetails demo = getItem(position);

            featureView.setTitleId(demo.titleId);
            featureView.setDescriptionId(demo.descriptionId);

            return featureView;
        }
    }

    private static final DemoDetails[] demos = {
        new DemoDetails(
            R.string.basic_map, R.string.basic_description, BasicMapActivity.class),
            new DemoDetails(R.string.camera_demo, R.string.camera_description,
                    CameraDemoActivity.class),
            new DemoDetails(R.string.events_demo, R.string.events_description,
                    EventsDemoActivity.class),
            new DemoDetails(R.string.layers_demo, R.string.layers_description,
                    LayersDemoActivity.class),
            new DemoDetails(
                    R.string.locationsource_demo, R.string.locationsource_description,
                    LocationSourceDemoActivity.class),
            new DemoDetails(R.string.uisettings_demo, R.string.uisettings_description,
                    UiSettingsDemoActivity.class),
            new DemoDetails(R.string.groundoverlay_demo, >R.string.groundoverlay_description,
                    GroundOverlayDemoActivity.class),
            new DemoDetails(R.string.marker_demo, R.string.marker_description,
                    MarkerDemoActivity.class),
            new DemoDetails(R.string.polygon_demo, R.string.polygon_description,
                    PolygonDemoActivity.class),
            new DemoDetails(R.string.polyline_demo, R.string.polyline_description,
                    PolylineDemoActivity.class),
            new DemoDetails(R.string.circle_demo, R.string.circle_description,
                    CircleDemoActivity.class),
            new DemoDetails(R.string.tile_overlay_demo, R.string.tile_overlay_description,
                    TileOverlayDemoActivity.class),
            new DemoDetails(R.string.options_demo, R.string.options_description,
                    OptionsDemoActivity.class),
            new DemoDetails(R.string.multi_map_demo, R.string.multi_map_description,
                    MultiMapDemoActivity.class),
            new DemoDetails(R.string.retain_map, R.string.retain_map_description,
                    RetainMapActivity.class),
            new DemoDetails(R.string.raw_mapview_demo, R.string.raw_mapview_description,
                    RawMapViewDemoActivity.class),
            new DemoDetails(R.string.programmatic_demo, R.string.programmatic_description,
                    ProgrammaticDemoActivity.class)
        };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListAdapter adapter = new CustomArrayAdapter(this, demos);

        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        DemoDetails demo = (DemoDetails) getListAdapter().getItem(position);
        startActivity(new Intent(this, demo.activityClass));
    }
} 
```

这是 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
  <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"/>
  <TextView
    android:id="@android:id/empty"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="@string/no_demos"/>
</LinearLayout> 
```

这是完整的logcat：

```
03-09 03:09:11.425: W/dalvikvm(2796): Unable to resolve superclass of Lcom/example/mapdemo/BasicMapActivity; (75)
03-09 03:09:11.425: W/dalvikvm(2796): Link of class 'Lcom/example/mapdemo/BasicMapActivity;' failed
03-09 03:09:11.455: E/dalvikvm(2796): Could not find class 'com.example.mapdemo.BasicMapActivity', referenced from method com.example.mapdemo.MainActivity.<clinit>
03-09 03:09:11.455: W/dalvikvm(2796): VFY: unable to resolve const-class 117 (Lcom/example/mapdemo/BasicMapActivity;) in Lcom/example/mapdemo/MainActivity;
03-09 03:09:11.455: D/dalvikvm(2796): VFY: replacing opcode 0x1c at 0x000d
03-09 03:09:11.485: W/dalvikvm(2796): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/example/mapdemo/MainActivity;
03-09 03:09:11.555: W/dalvikvm(2796): Class init failed in newInstance call (Lcom/example/mapdemo/MainActivity;)
03-09 03:09:11.555: D/AndroidRuntime(2796): Shutting down VM
03-09 03:09:11.555: W/dalvikvm(2796): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-09 03:09:11.585: E/AndroidRuntime(2796): FATAL EXCEPTION: main
03-09 03:09:11.585: E/AndroidRuntime(2796): java.lang.ExceptionInInitializerError
03-09 03:09:11.585: E/AndroidRuntime(2796):     at java.lang.Class.newInstanceImpl(Native Method)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at java.lang.Class.newInstance(Class.java:1319)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.os.Looper.loop(Looper.java:137)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at java.lang.reflect.Method.invokeNative(Native Method)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at java.lang.reflect.Method.invoke(Method.java:511)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-09 03:09:11.585: E/AndroidRuntime(2796):     at dalvik.system.NativeStart.main(Native Method)
03-09 03:09:11.585: E/AndroidRuntime(2796): Caused by: java.lang.NoClassDefFoundError: com.example.mapdemo.BasicMapActivity
03-09 03:09:11.585: E/AndroidRuntime(2796):     at com.example.mapdemo.MainActivity.<clinit>(MainActivity.java:98)
03-09 03:09:11.585: E/AndroidRuntime(2796):     ... 15 more
03-09 03:09:15.014: I/Process(2796): Sending signal. PID: 2796 SIG: 9 
```

我正在使用带有 API 17 Platform 4.2.2 Target Google API 和设备 5.1 "WVGA (480 * 800: mdpi) 的模拟器。

我怎么解决这个问题？

此外，我正在考虑购买设备[三星 Galaxy Mini 2](https://en.wikipedia.org/wiki/Samsung_Galaxy_Mini_2) S6500 以在其上运行我的应用程序而不是模拟器。该设备是否合适？

它有 512 MB RAM 和 Android 操作系统，v2.3.6 ( [Gingerbread](http://en.wikipedia.org/wiki/Android_version_history#Gingerbread) )，计划升级到 v4.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:29:01.290

根据[这个问题](https://stackoverflow.com/questions/14040185/running-google-maps-v2-on-android-emulator)和[这个问题](https://stackoverflow.com/questions/14445093/how-to-show-google-map-v2-on-android-emulator)以及谷歌地图 V2 和模拟器上的许多其他问题，谷歌地图 API 需要一个真实的设备才能运行。任何 Gingerbread+ 手机都可以。

# java - 泛化二叉树遍历的动作？

> ID：15306982
> 
> 赞同：5
> 
> 时间：2013-03-09T03:58:10.440
> 
> 标签：java, function, generics, methods, binary-tree

我试图找到一种方法，我可以采用二叉树类并遍历其节点，在每个节点上
执行*X*数量的内联操作，而无需一遍又一遍地重写相同的遍历代码。
我想如果Java允许函数指针，这对我来说会更简单......

基本上，我需要的是以下内容：

```
public class BinaryTreeNode {

    //...

    public void inOrderTraversalFrom(BinaryTreeNode node, /* ??? */ actions) {
        if(node.left != null)
            inOrderTraversalFrom(node.left);

        /* do something with "actions" here */

        if(node.right != null)
            inOrderTraversalFrom(node.right);
    }
} 
```

...其中*动作*可以允许执行不同的方法，根据要在每个节点上执行的动作类型**采用不同的参数集。**

一个很好的例子是可以传递一个旨在绘制这些节点的类，接受一个 Graphics 对象作为它的参数之一，而一个类旨在执行一些不需要 Graphics 的其他一系列动作对象作为参数，而是一组完全不同的参数。

这怎么可能？执行此操作的最动态方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:18:12.140

一种方法是：

`action`可以是接收 a`Node`并对其应用 Action 的类的实例：

```
public interface Action{
  public void apply(Node node){
  // To be done in the classes that will implement 
  // this interface. If it's a graphic-display of the nodes, the apply 
  // method will call draw(node.value), for example
  }
} 
```

该行：

```
/* do something with "actions" here */ 
```

应该替换为

```
action.apply(node); 
```

该方法的签名应更改为：

```
public void inOrderTraversalFrom(BinaryTreeNode node, Action action) 
```

递归调用应该是：

```
inOrderTraversalFrom(node.left, action); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:46:20.160

我找到了一个解决方案，虽然它可能不是最好的......

BinaryTreeNode.java：

```
public void inOrderTraversalFrom(BinaryTreeNode rootNode, BinaryTreeActions actions)
{
    if(rootNode.left != null)
        inOrderTraversalFrom(rootNode.left, actions);

    if(actions != null)
        actions.Perform(rootNode);

    if(rootNode.right != null)
        inOrderTraversalFrom(rootNode.right, actions);
} 
```

BinaryTreeActions.java：

```
public interface BinaryTreeActions {
    public void Perform(BinaryTreeNode node);
} 
```

BinaryTreeGraphicsActions.java：

```
public interface BinaryTreeGraphicsActions extends BinaryTreeActions {
    void DrawNode(BinaryTreeNode node, Graphics g);
} 
```

BinaryTreeView.java：

```
private void DrawNodes(final Graphics graphics)
{
    BinaryTreeNode node = root;
    root.inOrderTraversalFrom(node, new BinaryTreeGraphicsActions() {
        @Override
        public void DrawNode(BinaryTreeNode node, Graphics g) {
            // draw the node
        }

        @Override
        public void Perform(BinaryTreeNode node) {
            DrawNode(node, graphics);
        }
    });
} 
```

...并且任何时候你需要一组新的动作，你会为它创建一个新的界面，遵循同样的`BinaryTreeGraphicsActions`想法`BinaryTreeView`。这允许您执行任何一组操作，具体取决于您为它们设计的界面。

* * *

**#EDIT：** 在发现不需要 for 后，我接受了类似的答案`BinaryTreeGraphicsActions`，因为您可以像这样简单地使用*BinaryTreeActions*执行相同的内联代码：

```
private void DrawNodes(final Graphics graphics)
{
    BinaryTreeNode node = root;
    root.inOrderTraversalFrom(node, new BinaryTreeActions() {
        @Override
        public void Perform(BinaryTreeNode node) {
            /* draw the node, using any local vars (providing they are final) */
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:02:55.250

以下解决方案与此处建议的其他解决方案非常相似。但是，如果您喜欢这些东西，请使用一些设计模式结冰。

这个想法是不仅要隔离动作，还要隔离遍历。这可以通过以下两个抽象来完成。

*   二叉树节点遍历策略
*   二叉树节点访问者

```
public interface Visitable<T extends Visitor> {

  public void accept(T visitor);
}

public interface Visitor<T extends Visitable> {

  public void visit(T visitable);
}

public interface BinaryTreeNode implements Visitable<BinaryTreeNodeVisitor> {

  public void accept(BinaryTreeNodeVisitor visitor);
}

public interface BinaryTreeNodeVisitor implements Visitor<BinaryTreeNode> {

  public void visit(BinaryTreeNode visitable);
}

public interface BinaryTreeNodeTraversalStrategy {

  public void traverse(BinaryTreeNode root);
} 
```

# ios - 是否可以使用脚本在 Xcode 中引发错误？

> ID：15306994
> 
> 赞同：2
> 
> 时间：2013-03-09T04:01:09.697
> 
> 标签：ios, objective-c, xcode, error-handling

在 Xcode 的构建阶段部分，可以在构建过程期间或之后运行脚本来执行任何操作。

我想知道是否可以编写一个脚本来分析我的项目中的代码并在出现问题时发出警告。有点像添加我自己的额外规则集，如果这些规则被破坏，Xcode 将不会构建应用程序。

这可能吗？有人可以让我朝着正确的方向前进吗？

谢谢！

# ios - 现在如何知道具有嵌套循环的多个服务器调用方法何时全部完成

> ID：15306997
> 
> 赞同：1
> 
> 时间：2013-03-09T04:01:42.017
> 
> 标签：ios, objective-c, objective-c-blocks, grand-central-dispatch

我有多种方法，每种方法都有嵌套循环和 facebook 请求。有一个 X id 的数组，每个方法循环遍历每个 id，对该 id 发出请求，然后对结果数据进行处理。

当每个方法完成时，我需要得到通知......即，当方法完成遍历数组中的所有 id 时，为每个方法发出 facebook 请求，接收结果并使用结果数据完成其任务。我似乎无法弄清楚如何做到这一点。以下是这些方法的示例：

```
- (void)runLoopForFacebookFriendsContent1 {

    for (NSString *fbIdStr in self.fbIdsArr){
        FBRequest *fbRequest = [FBRequest requestWithGraphPath:graphPathString parameters:nil HTTPMethod:@"GET"];
        [fbRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
            if (error) {
                //show alert
            } else {
                //Do stuff with the resulting data
            }
        }];
    }    
}

- (void)runLoopForFacebookFriendsContent2 {

    for (NSString *fbIdStr in self.fbIdsArr){
        FBRequest *fbRequest2 = [FBRequest requestWithGraphPath:graphPathStringNumber2 parameters:nil HTTPMethod:@"GET"];
        [fbRequest2 startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
            if (error) {
                //show alert
            } else {
                for (PF_FBGraphObject *obj in [result objectForKey:@"data"]){
                    NSLog(@"facebook result:  %@",result);
                        NSMutableDictionary *dict          = [[NSMutableDictionary alloc]init];
                        [dict setValue:@"type2" forKey:@"ContentType"];
                        [dict setValue:obj forKey:@"data"];
                        [self.theFacebookDataArray addObject:dict];
                }
            }
        }];
    }    
} 
```

我在 viewWillAppear 中调用这些方法。有没有办法设置某种完成处理程序来调用这些方法？然后在它们都完成后发布一个 NSNotification ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:31:08.143

一种选择是查看[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/README.md)框架。我发现它对这种模式有很大帮助，在你通过了一点学习曲线之后。

以下是直接来自链接文件的示例：

```
// Perform 2 network operations and log a message to the console when they are
// both completed.
//
// +merge: takes an array of signals and returns a new RACSignal that passes
// through the values of all of the signals and completes when all of the
// signals complete.
//
// -subscribeCompleted: will execute the block when the signal completes.
[[RACSignal 
    merge:@[ [client fetchUserRepos], [client fetchOrgRepos] ]] 
    subscribeCompleted:^{
        NSLog(@"They're both done!");
    }]; 
```

您可以很容易地将其适应 Facebook SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:02:22.407

这种行为是意料之中的，因为您正在呼叫`dispatch_group_enter`然后立即呼叫`dispatch_group_leave`，这意味着该组无需等待。

您应该`dispatch_group_enter`在每个块之前调用并在每个块`dispatch_group_leave`结束时调用。

在此处检查接受的答案： [等到多个网络请求全部执行 - 包括它们的完成块](https://stackoverflow.com/questions/10643797/wait-until-multiple-operations-executed-including-completion-block-afnetworki)

**更新：** 对于给定的示例，您可以`dispatch_group_enter`在每次调用之前调用`startWithCompletionHandler:`，并`dispatch_group_leave`在完成块的末尾调用：

```
for (...) {
    FBRequest *fbRequest = ...;
    dispatch_group_enter(group);
    [fbRequest startWithCompletionHandler:^(...) {
        ...
        dispatch_group_leave(group);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:54:41.810

不想回答我自己的问题......不太喜欢这样做，并希望有一个更优雅的解决方案......但它似乎并没有到来，甚至有人对这个问题投了反对票。所以我只是要发布我的解决方案并关闭问题。如果您最终遇到类似的问题并且正在阅读本文，我会通过以下方式处理它：

为每个方法创建 2 个 int。一个 int 立即设置为迭代数组的计数。在每次迭代结束时，我都会发布一个 NSNotification。在 NSNotification 处理程序方法中，我 ++ 每次运行 if 条件时都会增加第二个 int &，检查它们是否匹配。

当有很多这样的方法发生时，跟踪所有这些是很痛苦的……所以如果有人找到更好的解决方案，我很想听听。感谢所有回答并试图提供帮助的人，我很感激！