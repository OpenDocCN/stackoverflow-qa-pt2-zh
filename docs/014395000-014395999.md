# StackOverflow 问答 14395000-14395999

# objective-c - Phonegap Plugins

> ID：14395002
> 
> 赞同：1
> 
> 时间：2013-01-18T08:28:55.923
> 
> 标签：objective-c, xcode, cordova, sencha-touch-2, phonegap-plugins

I need some Help regarding Phonegap plugins:

First , i have a JS File which invoke the native code using the phonegap.exec() containing the result handler function, error handler function , a reference to the native class's name and native function name as well as an array of parameters . My question is : if it is possible to invoke the function (native method) with given specified parameters?

That means : in my phonegap plugin file (.h & .m) 1- can i specify the arguments and their Types (NSInteger, NSString) like java void myMethod(int a , string b){}

-(void) myMethod:(NSMutableArray *)arguments withDict:(NSMutableDictionary*)options;

Or is it as specified by Phonegap or Objective C ?

2- And what does it withDict means in this case ?? 3- can i addicate this?

4- Why should my Code looks like this ?

-(void)myMethod: (NSMutableArray*)arguments withDict:(NSMutableDictionary*)options { NSString *callbackID =[arguments pop]; NSString *myParam = @"";

```
NSArray *arrayArguments = [[arguments objectAtIndex:0] componentsSeparatedByString:@"|"];
    NSString *stringArgument  = ([arArguments objectAtIndex:0]); 
```

I want to invoke my method like this :

why shall i put my arguments (as a String array element) then take it out , split it to get the right element from the String )?

Many Thanks for helping

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T14:46:40.240

好的，这就是你的做法……我在下面添加的示例是 Phonegap 中电子邮件插件的实现，具有多个字符串。您可以随时替换我的字符串代码来识别 NSNumber 或任何其他类型的参数。

在 JS ::

首先，我用它们的值创建参数。. .

```
var attachmentData = {}; 
attachmentData.data = userData; 
attachmentData.fileName = fileName;
var mailData = {};
mailData.toRecipients = "";
mailData.subject = "Exporting Backup for user data";
mailData.body = "User data for application. Please find the attachment containing the data from the last week.";
nativeMail(attachmentData, mailData); 
```

现在我们调用一个函数，为 Phonegap 插件打包所有这些数据并将其发送到插件类

```
function nativeMail(attachmentData, mailData){
    e_args = {};
    if(mailData.toRecipients)
    e_args.toRecipients = mailData.toRecipients; 
    if(mailData.subject)
    e_args.subject = mailData.subject; //"Hello World";
    if(mailData.body)
    e_args.body = mailData.body; 
    //call to phonegap plugin for native mail iOS
    e_args.attachmentFileName = attachmentData.fileName;
    e_args.datatoattach = attachmentData.data;
    cordova.exec(null, fail, "EmailComposer", "showEmailComposer", [e_args]);
} 
```

现在是 EmailComposer.h 文件

```
- (void) showEmailComposer:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options; 
```

最后，如何从 Mutablle Dictionary/Array 中获取这些参数并检索我们的字符串值。

```
- (void) showEmailComposer:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
{   
    NSString* toRecipientsString = [options valueForKey:@"toRecipients"];
    NSString* ccRecipientsString = [options valueForKey:@"ccRecipients"];
    NSString* bccRecipientsString = [options valueForKey:@"bccRecipients"];
    NSString* subject = [options valueForKey:@"subject"];
    NSString* body = [options valueForKey:@"body"];
    NSString* isHTML = [options valueForKey:@"bIsHTML"];
. . . . . . 
} 
```

这是解决它的唯一方法。它与 Phonegap 本身处理从您的 javascript Web 应用程序传递到本机类的数据的方式有关。它不能改变。MutableDictionary 或 MutableArray 将处理您需要的任何类型的数据。没有限制。但是，只能使用上述格式传递此数据。一旦您在 .m 类中获得了选项和参数，您就可以自由地检索它们或将它们解析为您需要的数据类型。

# java - 您是否需要在 Hibernate 表的 @id 列上创建索引

> ID：14395003
> 
> 赞同：5
> 
> 时间：2013-01-18T08:28:59.290
> 
> 标签：java, database, hibernate, indexing, hbm2ddl

我是否需要为休眠表的主键添加索引注释以获得良好的性能，我认为用@id 标记字段意味着创建了索引

```
@Id
private String guid; 
```

但我没有注意到在生成的 ddl 中创建了任何东西

但是如果我添加了一个 @index 注释

```
@Id
@org.hibernate.annotations.Index(name = "IDX_GUID")
private String guid; 
```

然后我注意到在 DDL 中创建了一个索引。

所以我想我需要为每个表都这样做，但我的一部分认为这真的有必要吗，因为 hibernate 肯定会希望为主键创建索引作为起点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:32:56.117

您不必显式创建索引。而不是看到 DDL 语句；我会建议你检查 hibernate 创建的最终模式。索引是作为 create table 语句的一部分创建的。

# datagrid - c# datagrid splitting using character "|"

> ID：14395005
> 
> 赞同：0
> 
> 时间：2013-01-18T08:29:04.963
> 
> 标签：datagrid, using, split

I have a text file having these inside:

test | 11 | 12 | 13 | 14 | 0

i am making a program with a data grid and im having problems splitting the rows because of the character "|". Does anyone know a solution for this ? my code below doesn't seem to work:

```
 foreach( string data in strArray )
             {
                 string[] textData = System.IO.File.ReadAllLines(fName);
                 string[] storedData = strArray[0].Split("|");   

                 for(int i=1; i < textData.Length; i++)
                 {
                    dataGridView1.Rows.Add(textData[i].Split(','));
                    dataGridView1.Rows.Add();
                    dataGridView1.Rows[i].Cells[0].Value = data;
                     j++;
                 }                                  
             } 
```

im getting the error "Cannot convert from 'string' to 'char[]'

Thanks for the help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:38:35.180

Split() 的分隔符参数必须是`char`s，而不是字符串：替换`Split("|")`为`Split('|')`.

# machine-learning - Unsupervised Feature extraction of dishes by building tree structure of ingerdients with Natural Language Processing

> ID：14395006
> 
> 赞同：0
> 
> 时间：2013-01-18T08:29:07.650
> 
> 标签：machine-learning, nlp, tree-structure

I am building a recommendation system for dishes. Consider a user eating french fries and rates it a 5\. Then I want to give a good rating to all the ingredients that the dish is made of. In the case of french fires the linked words should be "fried" "potato" "junk food" "salty" and so on. From the word Tsatsiki I want to extract "Cucumbers", "Yoghurt" "Garlic". From Yoghurt I want to extract Milk product, From Cucumbers vegetable and so on.

What is this problem called in Natural Language Processing and is there a way to address it?

I have no data at all, and I am thinking of building web crawler that analyzes the web for the dish. I would like it to be as little Ad-Hoc as possible and not necessarily in English. Is there a way, maybe in within deep learning to do the thing? I would not only a dish to be linked to the ingredients but also a category: junk food, vegetarian, Italian food and so on.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:56:37.897

这种类型的问题称为本体工程或本体构建。有关大型本体及其结构的示例，您可以查看类似[YAGO](http://www.mpi-inf.mpg.de/yago-naga/yago/)的内容。似乎您要为食品构建精品本体，然后覆盖评级系统。我不知道您正在寻找的任何形式的本体，但是您应该看看相关的东西，例如，这个[基于 OWL 的食物本体](http://krono.act.uji.es/Links/ontologies/food.owl/view)和这个[食谱本体](http://linkedrecipes.org/schema)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:30:10.223

你有这样的食谱吗：

```
Ingredients:
*Cucumbers
*Garlic
*Yoghurt 
```

或者像这样：

```
Grate a cucumber or chop it. Add garlic and yoghurt. 
```

如果是前者，则您的特征已经被提取。下一步将转换为向量推荐其他食谱。最简单的方法是对食谱进行（无监督）聚类。

如果是后者，我怀疑你可以用一个简单的经验法则逃脱。首先，使用词性标注器提取食谱中的所有名词。这将提取所有成分和更多成分（例如厨房用具、餐具等）。[在诸如此类的](http://www.fda.gov/Food/FoodIngredientsPackaging/ucm112642.htm)食品配料数据库中查找名词。

# hudson - Hudson + Email Extension Plugin+ Add BCC and CC

> ID：14395008
> 
> 赞同：1
> 
> 时间：2013-01-18T08:29:09.743
> 
> 标签：hudson, hudson-plugins, hudson-api

I am using Email extension plugin with Hudson. There is only TO list option available with the plugin. Is there any way I can add CC and BCC options? Please guide.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:35:06.157

不在哈德逊，但我知道詹金斯已经实现了这个[https://issues.jenkins-ci.org/browse/JENKINS-6703](https://issues.jenkins-ci.org/browse/JENKINS-6703)。您可以在电子邮件地址前加上“cc”，例如`cc:you@company.com`

# android - Forcibly create new contact when insert new raw contact

> ID：14395011
> 
> 赞同：4
> 
> 时间：2013-01-18T08:29:21.830
> 
> 标签：android, android-contacts

According to the official documentation, when there is a new `RawContact` inserted to the contact's database, the system initiates the mechanism of aggregation to find a `Contact` which the inserted `RawContact` will be aggregated with.

In the case of presence similar contact information in the contacts database the inserted `RawContact` will be aggregated with the existing `Contact` and in the case of absence of such information the system will create a new `Contact` and will aggregate the inserted `RawContact` with it.

I have already looked through the `ContactsContract.AggregationExceptions` and `ContactsContract.Contacts.AggregationSuggestions` but haven't found any information which could help me to figure out how to forcibly tell the system to create a new `Contact` when I insert a new `RawContact` in my application.

If anybody knows how to do that, I would be glad to get your suggestions.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:16:44.040

要创建新联系人，请插入`ACCOUNT_NAME`和`ACCOUNT_TYPE`in的值`ContactsContract.RawContacts`并获取新行的`_ID`. 然后在插入联系人数据时使用它`_ID`来填写。`RAW_CONTACT_ID``ContactsContract.Data`

新`_ID`的 in`ContactsContract.RawContacts`不应该已经存在，因此在插入/更新相应的数据之前不会聚合`ContactsContract.Data`。

`ContactsContract.Contacts`只是一个自动聚合表，以简化数据查询。你不应该直接改变它。

# ios - How to increase number of rows in UITableview at run time?

> ID：14395012
> 
> 赞同：3
> 
> 时间：2013-01-18T08:29:22.910
> 
> 标签：ios, objective-c

I want to know whether there is any way to increase the number of rows of a `UITableview` without calling reload? I dont want to reload entire table just add new rows at run time. i Know how to insert new row and updates but the row count increases only after calling reload on the `UITableView` object is there a way out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:35:52.363

尝试做这样的事情：

```
NSIndexPath *indexPath1 = [NSIndexPath indexPathForRow:0 inSection:1];    
//put these indexpaths in a NSArray

[tableView insertRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:39:46.197

一般来说，我不会太担心调用`reloadData`表格视图。`UITableView`实际上在显示和重用单元格方面非常有效。

只需确保您正确创建单元格（使用 a `cell reuse identifier`），否则您可能（或者更确切地说，很可能）泄漏内存，这效率**不**高（不断创建新单元格而不是重用它们是处理器费用）。

如果您不熟悉使用`UITableView`，或者需要重新使用它们，这里有一个教程：

[http://www.iosdevnotes.com/2011/10/uitableview-tutorial/](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)

`UITableView`在 Ray Wenderlich 的网站上还有很多很好的教程（你可以随意点击任何一个，它会在其中的某个地方有一个示例）：

[http://www.raywenderlich.com/](http://www.raywenderlich.com/)

# css - chrome 更新后，CSS first-of-type 选择器错误地应用

> ID：14395014
> 
> 赞同：7
> 
> 时间：2013-01-18T08:29:34.153
> 
> 标签：css, google-chrome

昨天我将 Chrome 更新到了 24 版，在这样做之后，`display:none`我应用于选择器的属性似乎没有被应用。

我有一个将 apply 的第一个类型选择器，`display:block`似乎这适用于该类型的所有成员，除了最后一个。

`display`当我在 Chrome 开发者工具中禁用/启用这个 css属性时，`display:none`它确实得到了正确应用。开发人员工具甚至显示`display`仍然`none`允许从网页中选择元素

此行为适用于以前版本的 chrome 和 firefox。

有没有办法可以强制触发这种行为？

我目前尝试设置一个不同的类来应用 Javascript 中的显示逻辑，但我更希望有一个 CSS 解决方案。

**编辑**

“用户代理样式表”中还有一个“div {display:block;}”，尽管这在开发人员工具中被标记为覆盖，也许这是问题的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T17:41:24.173

如果您遇到的问题是使用 display:block/none “打开和关闭”元素；可能是Chrome很久以前遇到的渲染问题。

有时用显示替换内容会导致 Chrome 中的重绘问题，即使控制台显示属性被替换，它也不会影响窗口及其元素。

尝试将此添加到要隐藏/显示的元素中：

```
-webkit-transform: translate3d(0,0,0); 
```

或者，如果您对 X 和 Y 使用 translate 可以简单地添加：

```
-webkit-transform: translateZ(0); // This affects only the Z preserving X and Y 
```

您还可以在Yotam Omer 提出的[这个答案](https://stackoverflow.com/questions/18529381/what-does-webkit-transform-translate3d0-0-0-exactly-do-apply-to-body)中阅读对浏览器的转换操作究竟做了什么以使其“行动”

# multithreading - 不允许使用可变线程本地数据的别名

> ID：14395018
> 
> 赞同：6
> 
> 时间：2013-01-18T08:29:53.550
> 
> 标签：multithreading, concurrency, alias, d

我是 D 新手，我正在编写一个简单的多线程服务器进行练习。在 C 中启动客户端处理程序线程的一个常见范例是将新接受 () 的套接字的文件描述符传递给 pthread_create()，但 D 的 std.concurrency.spawn() 不允许我传递套接字，因为它是可变的并由两个线程访问。

当然，我实际上并不想要一个不可变的套接字（这就是为什么我真的不想在主线程中强制转换它，除非我必须这样做） - 我想传递一个可变的套接字并让它超出范围在主线程中。我该怎么办？应该（/可以）我`tid.send(s)`用来让线程使用套接字吗？出于某种原因，这对我来说似乎很笨拙。

我现在的代码：

```
void main() {
    Socket listener = new TcpSocket;
    ...
    for (;;) {
        Socket s = listener.accept();
        scope(exit) s.close();

        auto tid = spawn(&clientHandler, s);
    }
}

void clientHandler(Socket s) {
    ...
} 
```

这会产生：错误：静态断言“不允许使用可变线程本地数据的别名。” ...从这里实例化：spawn!(Socket)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T11:16:18.330

您需要在客户端处理程序中将套接字转换为共享并再次返回

```
auto tid = spawn(&clientHandler, cast(shared) s);

void clientHandler(shared Socket s) {
    Socket sock = cast(Socket)s;
    scope(exit)sock.close();
} 
```

这样做的原因是，除非指定`shared`，否则所有局部变量都是隐式线程局部的，并且只有对共享或不可变的引用才能作为参数传递给`spawn`（或`send`），而按值传递的东西（没有引用和原语的结构）很好

您还应该将 close int 处理程序与您当前的实现一样，套接字可能会在新生成的线程有机会运行之前关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:49:00.557

这里的问题不在于套接字，它是一个局部变量。它是clientHandler，您没有显示它的声明，但显然它是线程本地的，正如它在错误消息中所说的那样，当每个接受的套接字应该有一个新的套接字时。提示是“别名”这个词，它指的是 & 运算符。

# php - 以相反顺序排列的 Amazon S3 列表对象

> ID：14395022
> 
> 赞同：6
> 
> 时间：2013-01-18T08:30:35.543
> 
> 标签：php, amazon-web-services, amazon-s3

目前，当我调用`$s3->list_objects()`方法时，它会按照添加这些对象的顺序返回对象。我想以相反的顺序列出对象，以便我可以首先拥有最新的对象。我找不到任何可以传递给`$s3->list_objects()`可以反转顺序的方法的参数。我正在使用 Amazon S3 PHP SDK。有没有这样的参数或方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-03T21:55:45.430

我想做同样的事情，我真的不觉得我想要一个数据库来跟踪最新的对象。因为您只需要它们具有按字母顺序排列的键。

时间戳通常按字母顺序排列。时间戳可以表示为 long。我们可以通过获取 (max long - timestamp long) 并将其格式化为所有前导 0 来获得反向字母时间标识符。

因此，如果您使用 key = prefix + timestampId + postfix 存储 S3 对象，您可以使用 list 来获取最新的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:28:25.963

返回的对象`list_objects()`是 a `Guzzle\Service\Resource\Model`，因此您需要使用该类提供的方法。为了执行您在下面评论中提到的分页请求，您可能需要执行以下操作：

```
$object_array = array();
$continue = true;
$list_params = array('Bucket' => 'your_aws_bucket', 'MaxKeys' => 1000);
while (true === $continue) {
    $result_obj = $s3->list_objects($list_params);
    $current_array = $result_obj->get('Contents');
    $object_array = array_merge($object_array, $current_array);
    $is_truncated = $result_obj->get('isTruncated');
    if ($is_truncated) {
        $list_params['Marker'] = $result_obj->get('NextKeyMarker');
    } else {
        $continue = false;
    }
}  
$reversed_array = array_reverse($object_array); 
```

请注意，如果您谈论的是 100,000 个文件，您可能会发现将所有文件的整个数组保存在内存中会变得有问题，因此您可能需要重新考虑是否需要像您建议的那样将所有文件都保存在内存中。

# c# - 关于网站部署到 IIS

> ID：14395024
> 
> 赞同：0
> 
> 时间：2013-01-18T08:30:40.867
> 
> 标签：c#, asp.net, .net

我创建了一个网站并将其部署在 IIS 服务器上。我想更改default.aspx 上的一些代码。在我在自己的计算机上更改代码之后。我将 default.aspx 和 default.aspx.cs 文件复制到服务器。但似乎在服务器上不起作用。但该网站在我自己的电脑上运行良好。我想问一下，除了default.aspx和default.aspx.cs以外的文件还需要复制吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:33:15.840

它是 VS 中的网站还是 Web 应用程序项目？从您的简短描述中可以看出，它可能是一个 Web 应用程序（代码隐藏文件），因此一旦 C# 代码发生更改，您就需要编译它，将 default.aspx 和新编译的 dll 放在您的主机上。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:33:23.750

根据[项目类型](http://msdn.microsoft.com/en-us/library/dd547590.aspx)，您需要部署编译更改的程序集。如果这是一个 web 应用程序，web 项目应该有一个相应的 DLL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:33:45.790

如果您更改后面的代码，请上传 dll，如果您更改设计，请上传 aspx

在浏览器上加载您的页面，如果没有任何更改，请按“ctrl + f5”清除缓存并刷新您的页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:34:04.610

您还需要编译您的解决方案并将包含文件的项目的最新***dll***`Default.aspx`放在服务器的`bin`目录中，因为您已经对代码隐藏文件进行了更改`Default.aspx.cs`。

# ruby-on-rails - 删除关联模型

> ID：14395027
> 
> 赞同：0
> 
> 时间：2013-01-18T08:30:57.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, associations

我有以下模型关联

客户模型

```
class Customer
   has_many :readings
   has_many :invoices
end 
```

阅读模式

```
class Reading
  belongs_to :customer
 end 
```

发票型号

```
class Invoice
   belongs_to :customer
   has_many :invoice_items
end 
```

发票项目

```
class Invoiceitem
  belongs_to :invoice
end 
```

在我的 customers_controller 中创建一个销毁操作会删除客户，但是它会留下很多孤立的记录，使我不得不在发票控制器上调用 show 操作，因为它的值为 nil。

我怎样才能删除模型中的客户和所有相关记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:37:26.337

您可以添加`:dependent => :destroy`到`has_many`

[API 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)部分从关联中**删除**包含此示例。

例如：

```
class Author
  has_many :posts, :dependent => :destroy
end
Author.find(1).destroy # => Will destroy all of the author's posts, too 
```

# html - HTML 3.1 中的垂直对齐顶部

> ID：14395028
> 
> 赞同：0
> 
> 时间：2013-01-18T08:31:00.363
> 
> 标签：html

我不得不在 HTML 3.1 中实现一个 HTML 表格（不，没有机会升级 :( ）

现在，我创建了一个包含两列的简单表。

第一列只有一行文本，第二列有更多文本。现在第一列在中心垂直对齐（标准行为）。

如何使列在 HTML 3.1 中垂直对齐到顶部？：/

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:22:20.010

将两列都对齐到顶部是最安全的（以防万一有一天内容发生变化，从而使第一个单元格内容变得更高）。您可以通过在`tr`元素上设置垂直对齐来实现；然后它会影响该行中的所有单元格。但是，您需要在 HTML 中的每一行执行此操作（在 CSS 中，您可以只使用一个规则）：

```
<table>
  <tr valign=top><td>...<td>...
  <tr valign=top><td>...<td>...
  ...
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:34:34.530

您可以使用属性[`valign`](http://www.w3schools.com/tags/att_td_valign.asp)或 css 属性[`vertical-align`](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

```
<table>
<tr>
<td valign="top">1</td>
<td>2<br />3<br />4</td>
</tr>
</table> 
```

或使用 css

```
<table>
   <tr>
      <td style="vertical-align: top;">1</td>
   </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:33:33.160

您可以使用以下 CSS 执行此操作：

```
td, th {
    vertical-align: top;
} 
```

现在每个表格单元格的文本都将垂直对齐到顶部。请不要`valign`为此使用 HTML 版本 ( )，因为如今 CSS 是正确的方式。

就像您有机会使用 HTML5 时进一步开发的信息一样：HTML5`valign`不支持。它可能会起作用，但标记将无效。

# android - 如何在 Android 中获取 Wi-Fi 协议版本（802.11 a/b/g/n）？

> ID：14395029
> 
> 赞同：1
> 
> 时间：2013-01-18T08:31:01.427
> 
> 标签：android, wifi, android-wifi

我无法在 Android API 或开发人员指南中找到获取 Wi-Fi 协议版本（我的意思是 a/b/g/n）的方法。我还尝试通过以下方式获取 Wi-Fi 信息

> `adb shell dumpsys wifi`

我看到“key_mgmt”信息，例如“key_mgmt=WPA2/IEEE 802.1X/EAP”。但该信息并未表明它是哪个版本。是否有任何计算方法或 adb 工具可以帮助我获取协议版本（a/b/g/n）？

*（更新）* Linux 命令`iwlist wlan0 scan`包括**协议**信息，这正是我想要的（例如 IEEE 802.11bg）。但是，`iwlist`它不是 Android 中的内置功能。我想在没有root权限的情况下获取信息。

# php - 如何通过外部 URL 将对象放入 amazon s3

> ID：14395033
> 
> 赞同：7
> 
> 时间：2013-01-18T08:31:09.693
> 
> 标签：php, amazon-s3

使用 PHP

如何通过外部 URL 将对象放入 amazon s3？

所以假设我有一个 URL：[http](http://example.com/file.avi) ://example.com/file.avi我希望能够将它移动到我的存储桶中，而无需将文件下载到我的桌​​面并重新上传文件。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T12:40:02.187

S3 仅支持从另一个 S3 存储桶复制对象，或上传本地文件。无法上传位于外部 URL 的资源。有关更多详细信息，请参见此处： [Put Object from remote resource in Amazon S3](https://stackoverflow.com/questions/15316616/put-object-from-remote-resource-in-amazon-s3)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2016-11-09T03:10:01.630

您可以通过 tpyo [https://github.com/tpyo/amazon-s3-php-class使用 S3.php 来做到这一点](https://github.com/tpyo/amazon-s3-php-class)

即使它不包含在他的自述文件中，您也可以使用它的 putObjectString() 静态函数，但您必须先将 url 转换为字符串文件

$fileUrl = file_get_contents(" [http://www.somesite.com/imagesample.png](http://www.somesite.com/imagesample.png) ");

> S3::putObjectString($fileUrl, "yourBucket", "uploads/filenamehere.png");

更多详情：[https ://gist.github.com/neilmaledev/d255c42f1289a9ab9394121b7896d4d3](https://gist.github.com/neilmaledev/d255c42f1289a9ab9394121b7896d4d3)

# asp.net-mvc - 使用 Castle Windsor 时出现错误“会话已关闭！对象名称：'ISession'

> ID：14395034
> 
> 赞同：0
> 
> 时间：2013-01-18T08:31:16.773
> 
> 标签：asp.net-mvc, nhibernate, castle-windsor

是的。这是一个与我如何要求 Castle Windsor 解决我的 ISession 有关的问题，但我已经重读了 5 次代码，但仍然无法弄清楚它有什么问题。

下面是我相当标准的 NHibernate 设施，除了我注册的最后两个组件：

```
 public class NHibernateFacility : AbstractFacility
    {
        protected override void Init()
        {
            var config = new Configuration().Configure();
            Kernel.Register(
                Component.For<ISessionFactory>()
                    .UsingFactoryMethod((kernel, context) => config.BuildSessionFactory()),
                Component.For<ISession>()
                    .UsingFactoryMethod((kernel, context) => kernel.Resolve<ISessionFactory>().OpenSession())
                    .LifestylePerWebRequest(),
                     Component.For<IStatelessSession>()
                    .UsingFactoryMethod((kernel, context) => kernel.Resolve<ISessionFactory>().OpenStatelessSession())
                    .LifestylePerWebRequest(),
                    Component.For<StatefulSessionWrapper>().LifestylePerWebRequest(),
                    Component.For<StatelessSessionWrapper>().LifestylePerWebRequest()
                );
        }
    } 
```

StatefulSessionWrapper/StatelessSessionWrapper 用作 ISession/IStateless 会话的...包装器，如下所示：

```
public class StatefulSessionWrapper : ISessionWrapper
    {
        public StatefulSessionWrapper(ISession session)
        {
            this.Session = session;
        }

        private readonly ISession Session;

        #region ISessionWrapper Members

        public ITransaction BeginTransaction()
        {
            return Session.BeginTransaction();
        }

        public ITransaction BeginTransaction(IsolationLevel isolationLevel)
        {
            return Session.BeginTransaction(isolationLevel);
        }

        public ITransaction Transaction { get { return Session.Transaction; } }

        public bool IsConnected
        {
            get { return Session.IsConnected; }
        }

        public bool IsOpen
        {
            get { return Session.IsOpen; }
        }

        #endregion
    } 
```

这样，我可以使用单个操作过滤器，它只处理 NHibernate 会话的事务部分：

```
public class NHibernateActionFilter<T> : Castle.MonoRail.Framework.IFilter where T:ISessionWrapper
    {
        private readonly T NHibernateSession;

        public NHibernateActionFilter(T session)
        {
            if (session != null)
                NHibernateSession = session;
            else
                throw new NullReferenceException("Session is null");
        }

        #region IFilter Members

        public bool Perform(ExecuteWhen exec, IEngineContext context, IController controller, IControllerContext controllerContext)
        {
            if (exec == ExecuteWhen.BeforeAction)
            {
                NHibernateSession.BeginTransaction();
                return true;
            }
            if (exec == ExecuteWhen.AfterAction)
            {
                if (NHibernateSession.Transaction == null || !NHibernateSession.Transaction.IsActive)
                    return false;
                if (context.LastException != null)
                {
                    NHibernateSession.Transaction.Rollback();
                    return false;
                }
                else
                {
                    NHibernateSession.Transaction.Commit();
                    return true;
                }

            }
            return false;
        }

        #endregion
    } 
```

并像这样简单地使用它：

```
 [Filter(ExecuteWhen.Always, typeof(NHibernateActionFilter<StatefulSessionWrapper>), ExecutionOrder = 1)]
    [Filter(ExecuteWhen.BeforeAction, typeof(AuthenticationFilter), ExecutionOrder = 2)]
    [Layout("Default"), Rescue("Default")]
    public abstract class NHibernateController : SmartDispatcherController
    {
        public NHibernateController(ISession session)
        {
            this.NHibernateSession = session;
        }

        protected readonly ISession NHibernateSession;
        .................. 
```

唯一的问题？

> 这是救援页面。请参阅下面的异常详细信息
> 
> ObjectDisposedException
> 
> 消息：会话已关闭！对象名称：'ISession'。
> 
> StackTrace：在 NHibernate.Impl.AbstractSessionImpl.ErrorIfClosed() 在 p:\nhibernate-core\src\NHibernate\Impl\AbstractSessionImpl.cs：第 207 行在 NHibernate.Impl.AbstractSessionImpl.CheckAndUpdateSessionStatus() 在 p:\nhibernate-core\ src\NHibernate\Impl\AbstractSessionImpl.cs：NHibernate.Impl.SessionImpl.BeginTransaction() 的第 199 行，p:\nhibernate-core\src\NHibernate\Impl\SessionImpl.cs：ADAutoTotal.Monorail.StatefulSessionWrapper.BeginTransaction 的第 1456 行() 在 C:\Dropbox\Projects\ADAutoTotal\ADAutoTotal.Monorail\StatefulSessionWrapper.cs:第 23 行 ADAutoTotal.Monorail.NHibernateActionFilter`1.Perform(ExecuteWhen exec, IEngineContext context, IController controller, IControllerContext controllerContext) in C:\Dropbox \Projects\ADAutoTotal\ADAutoTotal.Monorail\NHibernateActionFilter.cs：C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework 中 Castle.MonoRail.Framework.Controller.ProcessFilter(ExecuteWhen when, FilterDescriptor desc) 的第 31 行\Controller.cs:C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework.Controller.ProcessFilters(IExecutableAction action, ExecuteWhen when) 的第 2099 行Castle.MonoRail.Framework\Controller.cs:C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac 中 Castle.MonoRail.Framework.Controller.RunBeforeActionFilters(IExecutableAction action, Boolean& cancel) 的第 2054 行\MR2\src\Castle.MonoRail.Framework\Controller.cs：Castle.MonoRail.Framework.Controller 的 1953 行。RunActionAndRenderView() 在 C:\Dropbox\Projects\Monorail\castleproject-MonoRail-98c93ac\castleproject-MonoRail-98c93ac\MR2\src\Castle.MonoRail.Framework\Controller.cs:line 1622

因此，很明显 NHibernateActionFilter 获得了一个封闭的会话。但在我看来，不应该。哈尔普。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:50:59.387

好吧，事实证明我忘了在我的动作过滤器中添加他们正确的生活方式，因此让温莎让他们成为单身......

# ios - 如果用户取消 InApp 购买或只是另一个失败状态，如何处理

> ID：14395042
> 
> 赞同：4
> 
> 时间：2013-01-18T08:32:04.930
> 
> 标签：ios, xcode, in-app-purchase, payment

我正在尝试通过处理 SKErrorPaymentCancelled 错误代码来处理取消按钮。但是 SKErrorPaymentCancelled 错误代码和 SKPaymentTransactionStateFailed 状态返回相同的值。所以所有 SKPaymentTransactionStateFailed 状态就像用户取消了交易。有没有办法区分这两个代码？

我的代码是这样的：

```
case SKPaymentTransactionStateFailed:
{
    if (transaction.error.code == SKErrorPaymentCancelled)
    {
        [kUIActivator stopAnimating];
        button1.enabled = YES;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:29:19.650

Wallahi 我不知道:(，我有同样的问题，SKErrorPaymentCancelled 和 SKPaymentTransactionStateFailed 在任何情况下都有相同的代码。如果有人能回答这个问题，我也会很高兴....

# c++ - Boost状态图：如何分布在多个文件中？

> ID：14395044
> 
> 赞同：1
> 
> 时间：2013-01-18T08:32:15.770
> 
> 标签：c++, boost

首先，我设法在单个头文件中实现了一个状态机。我知道我需要一些前向声明，并且我必须从外到内定义状态。我真正不明白的是：我将如何处理多个文件？

我的方法：

*   每个状态一个标题
*   一个包含所有可能状态的标头，前向声明
*   每个声明状态的标头都包含声明其上下文的标头

然后它看起来像这样：

```
// forward.h
struct Machine;
struct StA;
struct StB;

// machine.h
#include "forward.h"
struct Machine : sc::state_machine< Machine, StA > {};

// a.h
#include "forward.h" // for StB
#include "machine.h"
struct StA : sc::simple_state< StA, Machine, StB > {};

// b.h
#include "forward.h"
#include "a.h"
struct StB : sc::simple_state< StB, StA > {}; 
```

现在，如何将整个内容包含在程序中仍然是开放的。我的想法是有一个标题，其中包括从外部到内部所有州的标题。

```
// the_machine.h
#include "forward.h"
#include "machine.h"
#include "a.h"
#include "b.h"

// use this header now where you need the state machine 
```

但是，我不知道一般的想法是否可以，即使可以，我也无法编译它（嗯，不*完全是*这个，而是我按照这个设计原则建造的机器）。一旦你意识到上下文需要完整，状态需要提前声明等等，将所有内容放在一个文件中就很容易了，但是由于复杂性和维护原因而拆分让我很紧张......`Incomplete type 'StXY' used in nested name specifier`等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:20:08.810

`Incomplete type`如果您弄乱了包含标题的顺序，则通常会出现该错误。

*   您是否在头文件中使用了正确的包含保护？
*   当你有循环包含时，有时前向声明会搞砸。
*   有时，人们会复制一个标题来制作一个类似的标题（egah 和 bh）而忘记更改包含保护。这可能很难追踪。

试试下面的方法：创建一个空的 .cpp，它只包含`the_machine.h`并且只预编译它。对于编写包含预处理翻译单元的文件（即一个包含编译器可以看到的所有代码的文件）的不同编译器，有命令行标志。检查该文件以查看所有内容是否按照您认为的顺序进行。大多数预处理器生成`#line`控制命令，告诉编译器（和您）您正在查看的标头/源代码的哪一行。

**编辑：**

如果您只想使用`#include`machine.h，则必须在机器定义*之后*包含状态定义。乍一看这可能看起来很奇怪，但如果您想拆分依赖部分，这就是它与模板一起工作的一般方式。许多人对后面包含的部分使用不同的文件后缀，因为它们本身并不是真正的标题，即您不能单独包含它们。例子：

```
//Something.h
template <class T>
struct Something
{
   void meow(T const& t);
   int wuff(T const& t, int b);
};

#include "Something.impl" //or .ipp, or other endings...

//Something.impl
template <class T>
void Something<T>::meow(T const& t)
{ /* implement... */ }

template <class T>
int Something<T>::wuff(T const& t, int b)
{ /* implement... */ } 
```

您的 machine.h 看起来很相似 - 定义机器并在其后包含状态的实现。我不会命名州的实施文件`X.h`，因为它们不是一个可以单独包含和使用的单个标头。

# ios - iPad 故事板应用程序 - 弹出框和模态代表

> ID：14395045
> 
> 赞同：0
> 
> 时间：2013-01-18T08:32:18.800
> 
> 标签：ios, ipad, uitableview, protocols, uipopovercontroller

我对 iOS 开发很陌生，我正在编写我的第一个 iPad 应用程序。

我有3个问题：

1）我注意到有一个用于 Popover 代表的**UIPopoverControllerDelegate**协议。但是，我找不到任何模态。我需要知道为什么 Modals 没有官方代表？

2）为这种情况声明自定义协议通常是否正确？什么是正确的方法？

3）我正在寻找一个完整的模态和弹出框示例（内部带有**UITableViewController**），用于使用 Storyboard 的 iPad，但不幸的是，我能找到的只是过时的示例。我觉得 Storyboard 有点不推荐用于 iPad 应用程序。这是对的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:51:18.220

1.  弹出框控制器的委托处理弹出框的解除，这可能在用户点击屏幕上的其他任何位置时发生。对于其他呈现的视图控制器，情况并非如此，解雇只能通过您编写的代码来实现，因此不需要委托。

2.  如果需要，声明一个委托协议，是的。这才是正确的做法。周围有几十个例子。

3.  Apple 推荐所有 iOS 项目都使用 Storyboard。对于 iPad 项目，你需要一个该死的大显示器。

# javascript - 在 Javascript 中读取 Firefox 的 media.navigator.enabled 的值

> ID：14395046
> 
> 赞同：2
> 
> 时间：2013-01-18T08:32:23.937
> 
> 标签：javascript, firefox, config, webrtc, getusermedia

我一直在使用 Javascript 中的 getUserMedia() 构建一个演示，以获取设备网络摄像头并将视频流绘制到 html5 画布上。对于不支持 getUserMedia() 的浏览器，我默认使用 Flash 版本的演示。

现在这一切在 Chrome 和 Opera 以及*几乎*在 Firefox 18 中都可以正常工作。但是 Firefox 仍然存在问题 - 在配置文件中 media.navigator.enabled 默认仍设置为 false。这意味着用户无法选择是否启用相机，我的脚本只是等待永远不会出现的答案。

现在显然我无法在配置文件中更改或设置此首选项，我也不想这样做。但是，无论如何获取此标志的值，以便我可以在继续“if（media.navigator.enabled）...”之前运行检查？

否则，我将不得不始终将 Flash 用于 Firefox，这有点可惜。

演示在[这里](http://www.craigmccahill.me.uk/index.html#mosaic)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:28:07.553

`media.navigator.enabled`偏好不是应该由用户打开的东西。之所以设置为，`false`是因为此功能在 Firefox 18 中还不够成熟，目前仅包含用于测试。好消息：它将在 Firefox 20 中[默认启用](https://bugzilla.mozilla.org/show_bug.cgi?id=825594)。Firefox 20 应该在 3 月 2 日发布，几天后您已经可以假设 Firefox 支持此功能（只有极少数的 Firefox 用户继续使用旧版本）。

坏消息：我认为你不能很好地处理旧的 Firefox 版本。他们也有`navigator.mozGetUserMedia()`方法，但它根本没有做任何事情。您可以选择超时（例如，如果在一分钟内既没有调用成功回调也没有调用错误回调，则切换到 Flash 回退）或用户代理嗅探。后者很难看，但对您来说可能是更好的解决方案：

```
var match = /\brv:([\d\.]+)/.exec(navigator.userAgent);
if (match && parseFloat(match[1]) < 20)
  alert("getUserMedia() not supported"); 
```

请注意，我明确地嗅探 Gecko 版本而不是 Firefox 版本——那里有更多基于 Gecko 的浏览器，而不仅仅是 Firefox。

# javascript - 从 N 到最后一个元素的切片数组

> ID：14395050
> 
> 赞同：62
> 
> 时间：2013-01-18T08:33:00.053
> 
> 标签：javascript

如何进行这种转变？

```
["a","b","c","d","e"] // => ["c", "d", "e"] 
```

我以为`slice`可以做到这一点，但是..

```
["a","b","c","d","e"].slice(2,-1) // [ 'c', 'd' ]
["a","b","c","d","e"].slice(2,0)  // [] 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-01-18T08:34:29.583

不要使用第二个参数：

```
Array.slice(2); 
```

* * *

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

> 如果 end 被省略，切片将提取到序列的末尾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-20T14:15:57.923

与@insomniac 的答案有关的一个重要考虑因素是`splice`和`slice`是两个**完全不同的功能**，主要区别在于：

*   `splice`操作原始数组。
*   `slice`返回原始数组的子集，原始数组保持不变。

请参阅：[http](http://ariya.ofilabs.com/2014/02/javascript-array-slice-vs-splice.html) ://ariya.ofilabs.com/2014/02/javascript-array-slice-vs-splice.html了解更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T08:35:34.303

只需给出起始索引，因为您想要数组中的其余数据..

```
["a","b","c","d","e"].splice(2) => ["c", "d", "e"] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-08T14:24:14.810

```
["a","b","c","d","e"].slice(-3) => ["c","d","e"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-30T20:33:54.723

切片在指定的结束参数处结束，但不包括它。如果要包含它，则必须将最后一个索引指定为数组的长度（在本例中为 5），而不是结束索引（-1）等。

```
["a","b","c","d","e"].slice(2,5) 
// = ['c','d','e'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-09T11:31:10.647

必须在 n 之前添加一个“-” 如果索引为负数，则 end 表示与 end 的偏移量。

```
function getTail(arr, n) {
return arr.slice(-n);
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-10-30T12:23:31.687

```
var arr = ["a", "b", "c", "d", "e"];
arr.splice(0,2);
console.log(arr);
```

请使用上面的代码。可能是你需要的。

# disqus - 将没有标识符的 disqus 评论迁移到具有标识符的新评论

> ID：14395051
> 
> 赞同：1
> 
> 时间：2013-01-18T08:33:03.103
> 
> 标签：disqus

所以以前的线程没有标识符，我将它更改为每篇文章都有标识符，现在以前的评论不会显示。

没有找到任何方法将没有标识符的旧评论迁移到具有标识符的新系统。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:33:21.230

简短的回答：

*   确保您的文章显示相同的主题，无论使用什么 URL 访问文章
*   然后将标识符添加到您文章的嵌入代码中
*   之后，通过其主要 URL 重新访问您的文章

这就是为什么我认为这应该基于不久前对我有用的工作：

我的一个页面有 2 个 URL，它嵌入了一个 disqus 线程，将它们称为 URL A 和 B。我没有设置`disqus_url`或`disqus_identifier`从一开始就没有设置。

人们通常使用 URL B 访问我的页面，并且他们已经发布了一些评论，这意味着当通过 URL A 访问该页面时，该页面没有显示任何这些评论。但是，URL A 应该是我页面的主要页面，所以我使用了来自 disqus 管理员的迁移工具的 URL 映射器。它说应该等待一段时间，直到映射开始生效。不过，几分钟后，我通过 URL A 访问了我的页面，以及那里已经存在的所有评论。在那之后，我没有再次通过 URL B 访问我的页面。

然后，我设置`disqus_url`为 URL A*和* `disqus_identifier`一些与我的页面相关的唯一值。之后，我通过 URL A 重新访问了我的页面。所有评论都还在。然后，我通过 URL B 访问了该页面，并且仍然存在相同的评论。

在此之后，我取消设置，`disqus_url`因为您通常仅在未设置时才需要它`disqus_identifier`。通过两个 URL 重新访问我的页面仍然显示相同的评论（在此之后我没有尝试发布评论，但我认为它仍然会出现在任何地方）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T10:50:32.157

看起来您可以使用他们的 API 来做到这一点：

[https://disqus.com/api/docs/threads/update/](https://disqus.com/api/docs/threads/update/)

将在接下来的几天里尝试这个并发布一些细节，如果我让它工作（或者如果他们先到那里，欢迎其他人！）

# java - 更改外观后无法调整窗口大小

> ID：14395060
> 
> 赞同：3
> 
> 时间：2013-01-18T08:33:53.200
> 
> 标签：java, swing

在按钮单击事件开始后，我改变了摇摆应用程序的外观。但是在改变了小窗口的外观之后，它的窗口大小就不能调整大小了。如果我们在最大化窗口中更改外观和感觉，它会完美运行。

这是我的代码

```
UIManager.setLookAndFeel(new AluminiumLookAndFeel());
SwingUtilities.updateComponentTreeUI(nextFrame);
nextFrame.pack();
SwingUtilities.updateComponentTreeUI(this);
this.pack(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:42:12.313

我通过在第一次启动程序时设置基本（JAVA）外观解决了这个问题，然后使用组合框将其更改为外部。

# wpf - 如何使用动画移动 ContentControl WPF

> ID：14395062
> 
> 赞同：1
> 
> 时间：2013-01-18T08:34:05.307
> 
> 标签：wpf, animation, user-controls, wpf-controls, contentcontrol

我正在尝试在页面上模拟这种效果`OnLoad`：

![在此处输入图像描述](../Images/81b48a18bddb2ef813e86d71f4dcb2a7.png)

蓝色方块代表开始交易，红色方块代表动画结束。

在 WPF 中，那个正方形对我来说是 a `ContentControl`，我试过这个：

```
<Window x:Class="WPFShapes.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="802" Width="1557" WindowState="Maximized" WindowStyle="None" WindowStartupLocation="CenterScreen">
<Window.Resources>
    <!-- This effect makes the main container appear the first time smoothly -->
    <Style TargetType="Border" x:Key="animatedBorder">
        <Setter Property="Opacity" Value="0.0" />
        <Style.Triggers>
            <Trigger Property="Opacity" Value="0.0">
                <Trigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="0.0" To="1.0" Duration="0:0:0.4"/>
                        </Storyboard>
                    </BeginStoryboard>
                </Trigger.EnterActions>
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="900*" />
        <RowDefinition Height="150" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="460" />
        <ColumnDefinition Width="850*" />
        <ColumnDefinition Width="150" />
    </Grid.ColumnDefinitions>
<ContentControl Grid.Column="1" Grid.Row="1" Margin="150,0,150,0" Name="contentControl1" Width="Auto" Height="650" >
        <ContentControl.RenderTransform>
            <TranslateTransform X="0" Y="0"/>
        </ContentControl.RenderTransform>
        <Border Style="{StaticResource animatedBorder}"
            Name="movableBorder"
            Background="WhiteSmoke"
                >
            <Border.Effect>
                <DropShadowEffect 
                BlurRadius="10"
                Color="#877b77"
                Opacity="100"
                ShadowDepth="10"
                Direction="-50" />
            </Border.Effect>
        </Border>
    </ContentControl>
</Grid> 
```

我的想法是，给`ContentControl`一个起始位置（蓝色方块），当它被加载时，将它从位置 1（蓝色方块）平滑地平移到位置 2（红色方块）。我试过了`RenderTransform`，但我想我找不到足够的信息，我觉得有点失落。

你可以看到我有一个`ContentControl`带有淡入淡出效果的边框。这种`Border`效果发生了，但我对如何使`ContentControl`我想要的出现有点迷茫。

到目前为止，我还没有任何 C# 代码。

关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:34:51.477

您可以使用为您的内容控件`ThicknessAnimation`设置动画`Margin`。

这是一个示例，它会在鼠标悬停时进行动画处理，但您将能够看到如何使用`ThicknessAnimation`

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="317.3" Width="337" x:Name="UI">
    <Grid>
        <Border BorderBrush="Red" BorderThickness="2" Margin="10,107,60,10">
            <Border.Style>
                <Style TargetType="Border">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation Storyboard.TargetProperty="Margin" Duration="0:0:1.5" FillBehavior="HoldEnd" From="10,107,60,10" To="36,48,34,69" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
       </Border>
   </Grid>
</Window> 
```

# ios - 按函数过滤具有谓词的对象数组

> ID：14395071
> 
> 赞同：1
> 
> 时间：2013-01-18T08:34:35.590
> 
> 标签：ios, objective-c

我对 NSPredicate 很陌生，如果这是新手问题，我很抱歉，但我已经完成了研究，但找不到答案。

我想按功能过滤自定义对象数组，而不是属性。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@ LIKE %@", [times objectAtIndex:x] ,[unit realTime]];
NSArray *filtered  = [objectArray filteredArrayUsingPredicate:predicate]; 
```

`objectArray`仅包含对象`unit`。我想按`[unit realTime]`方法结果按数组中的每个对象过滤数组。基本上我想要过滤数组 where `[times objectAtIndex:x] == [unit realTime]`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:15:10.490

您可以添加`realTime`为`@property() NSDate *realTime;`Unit.h 文件，然后`realTime`像您已经完成的那样实现方法。这种方式`realTime`是类中的一个参数，您正在用您的自定义实现覆盖 getter 方法。在这种情况下它不应该显示`undeclared identifier`错误。

完成后，将谓词语句更改为，

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K LIKE %@", unit.realTime, [times objectAtIndex:x]];
NSArray *filtered  = [objectArray filteredArrayUsingPredicate:predicate]; 
```

您应该使用`%K`to`unit.realTime`和 not `%@`。

# android - ProgressDialogue 抛出 NullPointerException

> ID：14395072
> 
> 赞同：1
> 
> 时间：2013-01-18T08:34:48.783
> 
> 标签：android, android-asynctask, android-progressbar

我正在将 ProgressDialogue 与 AsyncTask 一起使用，但正在发生 NullPointerException。

**代码**

```
public class MainActivity extends Activity {

    //private MyProgressDialog dialog;
    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);

        setContentView(R.layout.activity_main);

        new ProgressTask(MainActivity.this).execute();
   }

  /**
 * this class performs all the work, shows dialog before the work and dismiss it after
 */
public class ProgressTask extends AsyncTask<String, Void, Boolean> {

    private Activity context;

    public ProgressTask(Activity mainActivity) {
        this.activity = mainActivity;
        dialog = new ProgressDialog(context);
    }

    /** progress dialog to show user that the backup is processing. */
    private ProgressDialog dialog;
    /** application context. */
    private Activity activity;

    protected void onPreExecute() {
        this.dialog.setMessage("Progress start");
        this.dialog.show();
    }

        @Override
    protected void onPostExecute(final Boolean success) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
 }

    protected Boolean doInBackground(final String... args) {
       try{    

          return true;
       } catch (Exception e){
          Log.e("tag", "error", e);
          return false;
       }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:37:39.770

`context`你传递给`ProgressDialog`is `null`。传递`activity`在构造函数中初始化的变量。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:37:00.510

试试这个，

```
public ProgressTask(Activity mainActivity) {
    this.activity = mainActivity;
    dialog = new ProgressDialog(activity); } 
```

实际上在这里， `dialog = new ProgressDialog(context);`上下文还没有被你初始化。由于它为空，因此它为您提供了 NPE。

所以要么初始化它，要么也尝试以下选项之一，

```
dialog = new ProgressDialog(mainActivity); 
```

# wordpress - 使用 Wordpress 作为 CMS 的 Symfony 2 应用程序

> ID：14395074
> 
> 赞同：13
> 
> 时间：2013-01-18T08:34:53.013
> 
> 标签：wordpress, symfony

我想构建一个 sf2 应用程序并通过国际化（wpml 插件）维护 WordPress 中的所有内容（类别、文章、页面、媒体等）。该应用程序将拥有自己的管理员，并且为了管理用户将登录到 WordPress 后端的内容。

我的计划是让路由系统支持一个 sf2 控制器，并让它第一次有机会识别路由并执行它的操作。如果不是，那么它应该让 WordPress 处理页面的呈现。

我还认为我需要在一些 sf2 页面中提取 WordPress 内容，例如我可能希望将最新文章与 sf2 内容放在一起的主页。

以前有人做过吗？优点和缺点？关于如何实施的建议？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-17T15:04:16.920

看看这两个从不同角度接近 Symfony-WordPress 集成的项目：

*   [https://github.com/ekino/EkinoWordpressBundle](https://github.com/ekino/EkinoWordpressBundle)提供了一种在 WordPress 中使用 Symfony 组件和服务的方法
*   [https://github.com/outlandishideas/symfony-wordpress-edition](https://github.com/outlandishideas/symfony-wordpress-edition)提供了一种将 WordPress 核心加载到 Symfony 应用程序中的方法（披露：我是主要作者）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-10T08:41:25.293

有一些 Sf2 捆绑包可以帮助缩小差距，例如[https://github.com/kayue/KayueWordpressBundle](https://github.com/kayue/KayueWordpressBundle)，您可以在其中使用 Symfony2 实体获取 Wordpress 数据、在 Wordpress 中进行身份验证、在 Twig 中使用 Wordpress 函数等。也许你可以使用它。

我在最近的一个项目中做到了这一点，并且效果非常好。

要完成这项工作，您需要有两个单独的数据库和两个实体管理器（一个用于您的 sf2 应用程序，一个用于 Wordpress） - 至少这对我来说效果最好，一侧有一个真正的 sf2 应用程序并使用 Wordpress处理动态页面的一面。

这是我的配置示例：

```
//app/config.yml
doctrine:
dbal:
    default_connection:   default
    connections:
        default:
            driver:   "%database_driver%"
            host:     "%database_host%"
            port:     "%database_port%"
            dbname:   "%database_name%"
            user:     "%database_user%"
            password: "%database_password%"
            charset:  UTF8
        cms:
            driver:   "%database_driver_cms%"
            host:     "%database_host_cms%"
            port:     "%database_port_cms%"
            dbname:   "%database_name_cms%"
            user:     "%database_user_cms%"
            password: "%database_password_cms%"
            charset:  UTF8

orm:
    auto_generate_proxy_classes: %kernel.debug%
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                MyFirstBundle: ~
                MySecondBundle: ~ #if you have more than one bundle in your application
        cms:
            connection:       cms
            mappings:
                KayueWordpressBundle: ~ 
```

KayueWordpressBundle 配置：

```
//app/config.yml
kayue_wordpress:
# Site URL must match *EXACTLY* with WordPress's setting. Can be found
# on the Settings > General screen, there are field named "WordPress Address"
site_url:       %blog_url% 

#Note : I put the site_url in my parameters.yml to get this working on all my environments (see comment below) 

# Logged in key and salt. Can be found in the wp-config.php file.
logged_in_key:  'samethingasinyourwpconfig'
logged_in_salt: 'samethingasinyourwpconfig'

# Optional: WordPress cookie path / domain settings.
cookie_path:    '/'
cookie_domain:  null

# Optional: Custom table prefix. Default is "wp_".
table_prefix:   'wp_'

# Optional: Entity manager configuration to use (cache etc). Default is 'default'.
entity_manager: 'cms' #here is where i put the name of my new entity manager defined above 
```

使用 KayueWordpressBundle，我现在可以使用“cms”实体管理器访问我的 Wordpress 的所有元素。使用 Wordpress 菜单，我们能够使我们的应用程序菜单动态集成添加到其中的新页面。我们还能够使用 curl 在我们的 Wordpress 上保持相同的页眉和页脚，因此整个事情几乎是无缝的。

**在实际方面：**

我将 Wordpress 安装在项目根目录中的一个文件中。这意味着我可以使用 Git，使用 Capifony 部署它等等。

请注意，需要在您的本地环境中添加/编辑设计、插件和内容，然后在使用 Capifony 进行部署之前将其推送到您的 Git 存储库。然而，您的 wordpress 的动态内容（页面、文章）取决于您的数据库，因此最终内容应仅在您的生产环境中编写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:23:41.337

首先，为了将 Wordpress 与 Symfony 2 集成，你必须想出一个“胶水”计划，因为 Wordpress 不遵循[互操作性标准](https://github.com/php-fig/fig-standards/)，其次是 Symfony 2 和其他框架来实现这种级别的轻松集成.

[其次，如果您可以查看Symfony CMF](http://cmf.symfony.com/)那就太好了，它基本上是一个内容管理框架的实现，可以让您在 Symfony 2 组件之上创建自己的 CMS。

第三点也是最后一点是，您尝试实现的这种集成没有多大意义。您的需求的第一部分，您需要在 Wordpress 之上的一个简单层来处理传入的请求，可以通过对 Wordpress 的前端控制器代码进行简单的破解来解决。

# angularjs - 动态内容和 AngularJS

> ID：14395077
> 
> 赞同：1
> 
> 时间：2013-01-18T08:35:23.913
> 
> 标签：angularjs

我正在玩 angularjs 和页面的动态内容。问题是页面不能有模板，因为我需要显示从服务器获取的多个不同对象的表示。

目前我正在 $watching 一个 body 元素的内容以进行更改，然后编译 body 的全部内容。有用。但我有一种感觉，有一种更好的方法来做我需要的事情。

同样，基本上我获取对象的 JSON 表示，构建 HTML 表示并将其附加到正文。然后 watch 启动并编译 body 的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:50:40.037

好，我知道了。广泛的谷歌搜索总是有帮助的。

有一种更好的方法可以做到这一点。首先确定要附加到的 targetElement，然后创建要附加的 html。

然后

```
var element = angular.element(targetElement);
var scope = element.scope();
var injector = element.injector();
var compile = injector.get('$compile');

compile(html)(scope).appendTo(targetElement); 
```

可能这是一个基本的东西，但我只是在学习 AngularJS 框架。

# opengl - 使用 glPrimitiveRestartIndex 绘制 GL_LINE_LOOPS

> ID：14395084
> 
> 赞同：0
> 
> 时间：2013-01-18T08:35:44.563
> 
> 标签：opengl, primitive

我对 glPrimitiveRestartIndex 以及如何使用它有一些疑问。基本上，我想用 GL_LINE_LOOP 绘制一些轮廓，其顶点存储在一个数组中。我已经阅读了 OpenGL 超级圣经中关于使用 glPrimitiveRestart 的章节，但对我来说并不是很清楚。据我了解，您只能通过在数组中存储“特殊顶点”来将此函数与 glDrawElements 一起使用，而不能与 glDrawArrays 一起使用……对吗？此外，如果轮廓/线循环具有不同数量的顶点，如何使用 glPrimitiveRestart ......假设一个循环在 z=100 平面中，它有 40 个顶点，另一个在 z=99 -plane，它只有 16 个顶点。如何设置 glPrimitiveRestartIndex，以便正确呈现不同的循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:43:47.830

您不会将重新启动索引设置为现有顶点索引之一，而是选择一个不用作索引的值，并将其插入图元之间。

显然，如果您不使用索引进行绘图，它将无法正常工作。

# vb.net - 移动文件访问路径被拒绝

> ID：14395085
> 
> 赞同：0
> 
> 时间：2013-01-18T08:35:46.533
> 
> 标签：vb.net, path

我正在使用 VB.net 中的代码将我的应用程序从当前路径移动到`C:\file.exe`，问题是：

当应用程序在管理员权限下运行时，它可以运行，但是当它在普通用户权限下运行时，它不会；它说*`Access to path is denied`*。虽然我知道类似的应用程序具有相同的功能并且在标准用户下工作而没有上述问题。

编码：

```
Dim filepath As String = Application.ExecutablePath
Dim newfilepath As String = "C:\file.exe"
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    System.IO.File.Move(filepath, newfilepath)
end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:47:23.603

你已经回答了你自己的问题。这是因为 vista 和后来的 MS OS 中的新 UAC 设置

# java - 如何告诉漂亮的 GUI 我的字体文件在哪里？

> ID：14395087
> 
> 赞同：1
> 
> 时间：2013-01-18T08:35:57.280
> 
> 标签：java, fonts, assets, nifty-gui

我厌倦了使用捆绑在默认样式 jar 中的默认字体，所以我认为它就像下载一些位图字体文件并通过相对于工作空间的路径指定我想使用的那样简单。

例如

```
//inside of a ScreenBuilder init
//...
control(new LabelBuilder("score"){{
    alignCenter();
    font("font/13-Nimbus.fnt");
    color("#f00f");
    backgroundColor("#3300af");
    text("foobar");
    width((wGUI/3-10)+"px");
    height((hGUI-10)+"px");
}}); 
```

不幸的是，这给了我以下错误：

> java.lang.RuntimeException：找不到资源：de.lessvoid.nifty.tools.resourceloader.NiftyResourceLoader.getResourceAsStream(NiftyResourceLoader.java:72) 处的 font/13-Nimbus.fnt ...

所以这让我相信我应该调用一些 add-resource-location 函数来告诉我的字体在哪里。但是在查看了 Javadoc 之后，我找不到任何这样的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:46:07.067

确保 font/13-Nimbus.fnt 在你的类路径中。我们将其设置为包含 font/etc.fnt 的资产源目录的方式

# javascript - 什么是 javascript 中的 location.search

> ID：14395090
> 
> 赞同：49
> 
> 时间：2013-01-18T08:36:16.760
> 
> 标签：javascript

我想知道`location.search.substring(1)`实际上是做什么的。我在某个网站上看到了这段代码。我尝试使用 打印`alert`，但这没有给出任何结果。它应该提醒位置href吗？

```
alert(location.search.substring(1)) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-18T08:38:58.443

```
http://example.com/index.php?foo=bar

location.search
> ?foo=bar
location.search.substring(1)
> foo=bar 
```

*因此该代码将返回不带*问号的整个查询参数。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-18T08:39:35.883

location.search 属性包含 URI 的查询字符串（包括 ?），如果有的话。

例子：

```
http://www.example.org/index.php?param=arg
location.search is ?param=arg 
```

所以你的代码剪掉了领先？并返回`param=arg`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-18T08:38:32.420

> 搜索属性返回 URL 的查询部分，包括问号 (?)。

这意味着，`location.search.substring(1)`应该返回*不带*问号的数据。

```
// http://www.example.com/index.html
console.log(location.search.substring(1)); // no query string, so displays nothing

// http://www.example.com/index.html?property=value
console.log(location.search.substring(1)); // should display "property=value" 
```

* * *

“查询部分”是查询字符串：

```
http://www.example.com/?property=value&property2=value
                       |        query string         | 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-18T08:41:15.807

例如，如果您有以下网址

```
http://www.example.org/index.htm?Browser=Netscape 
```

然后`window.location.search`将`?Browser=Netscape`作为字符串返回

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-19T20:48:53.243

location.search 返回一个包含初始问号的查询字符串。substr 方法是从返回的查询字符串中删除初始问号。

你在 alert() 中没有得到任何结果的原因是你试图在一个没有任何结果的网站上读取查询字符串。

以下是您的测试方式：

1.  转到此[网址](https://www.google.com/?name=rehan&age=22&message=nomessageshere!)
2.  在浏览器上打开控制台
3.  粘贴下面共享的代码片段，然后按 Enter

```
var container = {};
location.search.split('&').toString().substr(1).split(",").forEach(item => {
    container[item.split("=")[0]] = decodeURIComponent(item.split("=")[1]) ?  item.split("=")[1]: "No query strings available" ;
});
console.log(container);
```

老问题，但答案可能对本页的新访问者有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T08:39:06.903

它返回查询字符串，不带初始问号。如果页面上有查询字符串，您只会看到结果，例如[http://www.example.com?parameter=value](http://www.example.com?parameter=value)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-11T22:46:17.660

现在是 2018 年，这就是你在 2018 年的做法。

示例网址：

```
http://localhost:10/mapserver1/viewer/?config=viewer_simple1&url=https://maps2.dcgis.dc.gov/dcgis/rest/services/Zoning/MapServer&zoom=17&lat=38.917292&long=-77.036420 
```

我提取每个查询参数的工作代码：

```
 var ___zoom;
        var ___lat;
        var ___long;
        var ___basemap;

        var ___type;
        var ___url;
        var ___title;
        var ___opacity;

        if ( location.search.match(/zoom=([^&]*)/i) )
        {
             ___zoom = location.search.match(/zoom=([^&]*)/i)[1];
         }

        if ( location.search.match(/lat=([^&]*)/i) )
        {
           ___lat = location.search.match(/lat=([^&]*)/i)[1];
        }

        if (location.search.match(/long=([^&]*)/i))
        {
            ___long = location.search.match(/long=([^&]*)/i)[1];
        }

        if (location.search.match(/basemap=([^&]*)/i))
        {
            ___basemap = location.search.match(/basemap=([^&]*)/i)[1];
        }

        if (location.search.match(/type=([^&]*)/i))
        {
            ___type = location.search.match(/type=([^&]*)/i)[1];
        }

       if (location.search.match(/url=([^&]*)/i))
        {
            ___url = location.search.match(/url=([^&]*)/i)[1];
        }

        if (location.search.match(/title=([^&]*)/i))
        {
            ___title = location.search.match(/title=([^&]*)/i)[1];
        }

        if (location.search.match(/opacity=([^&]*)/i))
        {
            ___opacity = location.search.match(/opacity=([^&]*)/i)[1];
        }

        //console.log(location.search.match(/zoom=([^&]*)/i)[0]);   //    'zoom=17'
        //console.log(location.search.match(/zoom=([^&]*)/i)[1]);   //     '17'
        console.log(___zoom); 
        console.log(___lat); 
        console.log(___long); 
        console.log(___basemap); 

        console.log(___type); 
        console.log(___url); 
        console.log(___title); 
        console.log(___opacity); 
```

# jsf-2 - selectoneMenu 更改事件不适用于一个值

> ID：14395099
> 
> 赞同：2
> 
> 时间：2013-01-18T08:37:07.290
> 
> 标签：jsf-2, selectonemenu

我的程序中有两个下拉菜单，第二个是根据第一个中选择的值填充的。

当第一个菜单中只有一个值时，第二个菜单不反映这些值，但是当我有多个值时它可以工作。什么可能导致错误？

这是代码：

```
<h:selectOneMenu id="blSearchFacilityInput"
                 value="#{bLDashBoardAction.facilityId}" style="width:80px;">
    <f:ajax event="valueChange" render="blSearchzoneInput"
            listener="#{bLDashBoardAction.facValueChangeEvent}"/> 
    <f:selectItems value="#{bLDashBoardAction.svaFaciltyList}" var="c"
                   itemLabel="#{c.facCode}" itemValue="#{c.id}"/>
</h:selectOneMenu>
<h:selectOneMenu id="blSearchzoneInput" value="#{bLDashBoardAction.zoneId}"
                 style="width:80px;">
    <f:ajax event="valueChange" render="blSearchSectorInput"
            listener="#{bLDashBoardAction.zoneValueChangeEvent}"/>
    <f:selectItems value="#{bLDashBoardAction.zoneList}" var="c"
                   itemLabel="#{c.zoneCode}" itemValue="#{c.zoneId}"/>
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:34:43.517

如果默认情况下只有一个项目已经预先选择，那么当您再次尝试选择它时实际上没有任何变化。您确实需要物理第二项才能触发更改事件。

添加另一个带有`null`值或`noSelectionOption="true"`.

```
<h:selectOneMenu id="blSearchFacilityInput"
                 value="#{bLDashBoardAction.facilityId}" style="width:80px;">
    <f:ajax render="blSearchzoneInput"
            listener="#{bLDashBoardAction.facValueChangeEvent}"/> 
    <f:selectItem itemLabel="--select one--" noSelectionOption="true" />
    <f:selectItems value="#{bLDashBoardAction.svaFaciltyList}" var="c"
                   itemLabel="#{c.facCode}" itemValue="#{c.id}"/>
</h:selectOneMenu> 
```

现在您可以成功触发值更改事件。请注意，它已经是默认事件，因此为了简洁起见，我从代码中省略了它。无需重复默认设置。

如果父下拉列表中只有一个项目，另一种方法是自动预填充子下拉列表。例如，在您填写的那一刻之后`svaFacilityList`：

```
if (svaFaciltyList.size() == 1) {
    zoneList = fillItBasedOn(svaFaciltyList.get(0));
} 
```

# c# - 取消分组的项目

> ID：14395102
> 
> 赞同：1
> 
> 时间：2013-01-18T08:37:15.090
> 
> 标签：c#, sharepoint-2010

我有从任何视图显示项目的 Web 部件。我通过以下方式显示它：

```
protected override void RenderContents(HtmlTextWriter writer)
{
String res = "";
SPView def = list.Views[_ViewName];
res = def.RenderAsHtml();
writer.write(res);
} 
```

如果它们在视图中分组，我如何显示未分组的项目？

它应该是这样的：

![在此处输入图像描述](../Images/e8b3a4f0a75fa0e74581e9910495f6fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:17:19.803

您需要获取视图的`Query`属性，然后删除该`<GroupBy>`元素。在大多数情况下，您可能可以使用正则表达式执行此操作

```
SPView def = list.Views[_ViewName];
string query = def.Query;
query = Regex.Replace(query, @"\<GroupBy.+?\</GroupBy\>", "", RegexOptions.IgnoreCase);
def.Query = query;
string res = def.RenderAsHtml();
writer.Write(res); 
```

但在更复杂的情况下，您可能需要使用适当的 XML 操纵器。

我在这里不确定的是是否`RenderAsHtml`需要您调用`Update`视图才能反映更改。显然你不想这样做，因为它会永久影响视图。

# php - CSV 第二次导入后 MySQL 值更新为最大值

> ID：14395105
> 
> 赞同：0
> 
> 时间：2013-01-18T08:37:27.367
> 
> 标签：php, mysql

我正在使用 php 脚本将 CSV 文件中的值导入 table1，然后使用内部联接从 table1 更新 table2 的字段：

```
UPDATE table2 AS t2
INNER JOIN
  (
  SELECT field, id
  FROM table1  ) AS t1 ON (t2.id=t1.id)
SET t2.field = t2.field+t1.field; 
```

但是，如果我执行两次导入，则在第一次导入中更新而不在第二次导入中更新的字段将更新为最大值 9999.999 ，字段类型为 Decimal(7,3)。任何想法为什么以及合适的修复方法是什么？PS表1中的值是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:47:57.027

使用简单的更新语法

```
UPDATE table2 AS t2, table1 AS t1
SET t2.field = t2.field+t1.field
WHERE (t2.id=t1.id) 
```

# jquery - 使用 jquery flot 在同一个占位符中绘制两个不同的图

> ID：14395109
> 
> 赞同：0
> 
> 时间：2013-01-18T08:37:41.100
> 
> 标签：jquery, graph, flot

我正在使用 flot 来绘制特定月份的预定账单支付。如何区分相对于当天绘制的折线图的颜色，即过去的日期应该有一种颜色，而未来的日期应该有不同的颜色？

我正在使用以下代码：

```
$.plot($("#placeholder1"),  [current_d1,current_d2],options_current); 
```

`current_d1`并且`current_d2`是我的两个数组，并且`options_current`是为占位符定义的选项。

```
var options_current= {

    series: {
      //dashes: { show: true,   shadowSize: 0, steps:true},
    lines: { show: true,lineWidth:5,steps:true},
        points: { show: true,radius:4 },
        color: ('#0000ff'),
        threshold: {below:0, color: "#DF0101"}  
      },
     xaxis:  {min:1,max :max_value_current, tickFormatter: dayFormatter,tickColor: "rgba(255, 255, 255, 0)", tickDecimals:0,ticks:max_value} ,
     yaxis:  {min:1,tickFormatter: dollarFormatter} ,

      grid: { hoverable: true, clickable: true, 

             borderWidth: 0,

              markings: [ 
                  {xaxis: {from:temp_day, to: temp_day}, color: '#A4A4A4'},
                  {xaxis: {from:1, to: 1}, color: '#000000'},
                  {yaxis: {from:1, to: 1}, color: '#000000'}                      

                           ]

            },

              legend: { position: 'se'}

  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:05:55.970

您正在为所有线条提供全局“颜色”选项，这会强制它们全部使用相同的颜色（蓝色）。您只需省略该选项，Flot 将为每个系列选择不同的颜色。

如果您真的想强制使用特定颜色，请查看文档；在顶部的[Data Format](https://github.com/flot/flot/blob/master/API.md#data-format)下，请注意系列可以是原始数据或具有属性的对象。如果您使用后面几段解释的后一种形式，那么您可以为每个系列提供不同的线路选项，从而提供不同的颜色。

# java - 在服务器上运行的 jax-rs 代码

> ID：14395114
> 
> 赞同：-2
> 
> 时间：2013-01-18T08:38:17.837
> 
> 标签：java, rest, restful-authentication, java-server

我有一个使用 RESTFul 的代码：

```
@Path(/...)
public class ..{
    @GET
    void func(){
        "Hello";
    }
} 
```

我的问题是如何从浏览器运行这段代码？我在 Eclipse 中编写了这段代码，并想从浏览器中运行它。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:57:41.977

首先，您需要启动您的网络服务。为此，您需要打包应用程序以`WAR`存档并部署到 appserver/servlet 容器。我建议[Tomcat](http://tomcat.apache.org/)或[Jetty](http://jetty.codehaus.org/jetty/)。它们都是轻量级的，并且具有 Eclipse WTP 插件的连接器。当您的应用程序部署到服务器时，它将在您的浏览器中可用。例如，如果您在 8080 端口上使用 Tomcat，并且部署了名为`myws.war`然后您的 webapp 的 war 文件，`http://127.0.0.1:8080/myws/`那么您可以导航到`@Path`url 并调用 WS 方法。

**更新**

好的，假设您使用的是 Tomcat。[从他们的网站下载](http://tomcat.apache.org/download-70.cgi)zip 并在系统的某个位置解压。然后你需要在 eclipse 中配置 Tomcat 绑定。在此之前，请确保您使用的是面向 Web 开发人员的 Eclipse（安装了 Web 工具平台）。转到`Window`-> `Preferences`-> `Server`-> `Runtime Environments`。单击`Add`。选择`Apache`->`Apache Tomcat 7`并单击`Next`。在弹出窗口中提供服务器名称 ( `Apache Tomcat v7.0`) 并选择它的安装路径。将自动选择 JRE。单击`Finish`。然后选择`Window`->`Show view`并选择`Servers`。服务器视图将打开。它是空的，但我们将添加一个服务器。右键单击此视图的某处并选择`New`-> `Server`。从列表中选择`Apache Tomcat v7.0 Server`，然后设置`Server's host name`到`localhost`. 指定任何`Server name`并`Server runtime environment`从下拉列表中选择。（它应该包含一个运行时，我们在前面的步骤中创建了它）。完成！现在你有一个服务器来运行你的 webapps。右键单击您的项目并选择`Run As`-> `Run on Server`。选择您的服务器，等待部署并测试您的应用程序！

# python - 如何输入一个表单，解析用户上传的文件，然后显示在新的 url 上？

> ID：14395115
> 
> 赞同：1
> 
> 时间：2013-01-18T08:38:18.630
> 
> 标签：python, file-upload, url-routing, pyramid

最终，我想要它，以便当用户上传文件时，它会解析文件，然后创建一个新的 url（使用`save_url`），它会在其中显示该解析的输出。

这是呈现表单的edit.pt：

```
<form action="/add_page" method="post" accept-charset="utf-8" enctype="multipart/form-data">
<label for="stl">Stl</label>
<input name="stl" type="file" value="" />
<input type="submit" value="submit"/>
</form> 
```

以下是 的`add_page`部分`views.py`：

```
@view_config(route_name='add_page', renderer='templates/edit.pt')
def add_page(request):
    input_file=request.POST['stl'].file
    i1, i2 = itertools.tee(input_file)
    vertices = [map(float, line.split()[1:4])
                for line in i1
                if line.lstrip().startswith('vertex')]

    normals = [map(float, line.split()[2:5])
                for line in i2
                if line.lstrip().startswith('facet')]

    ordering=[]
    N=len(normals)

    ...(parsing data)...

    return data
    if data is None:
        displayNotification['please upload file']
    if 'stl' in request.params:
        name=request.params('name')
        page=Page(name,data)
        return HTTPFound(location=request.route_url('view_page',pagename=name))
    save_url=request.route_url('add_page',pagename=name)
    page=Page('','')
    return dict(page=page,save_url=save_url) 
```

当我尝试转到`http://localhost:6543/add_page/new`（添加带有新网址的新页面）时，我收到此错误：

```
KeyError: "No key 'stl': Not a form request". 
```

此错误发生在`def add_page(request):`. 我正在格式化它，以便脱离[本教程](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/forms/file_uploads.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:33:39.597

There are basically two scenarios of "what to do after you saved data on form submit":

1.  you save the data (say, the result of the file parsing) to some permanent storage (database, which will give you some unique URI to address that file (say, `/files/123123`). Then you just issue an HTTP redirect to that location:

    ```
    @view_config(renderer="templates/form_view.pt")
    def form_view(self):

        if self.request.method == 'POST':
            if _validation_passed(request):
                new_url = _save_data(request)
                return HTTPFound(new_url)
            else:
                return _render_form(values=request.POST, msg="Validation failed")

        # We are a GET not a POST, render empty form
        return _render_form() 
    ```

The new "page" stays permanently, so if you just visit `/files/123123` in your browser you'll see the same page.

1.  Alternatively, your view receives an HTTP post, does something with the data and, instead of redirecting to another view, just returns a blob of HTML just like any other "normal" view. This is used when, say, the form fails validation and you want to re-display the form, but is also useful when you do not save the data anywhere, so basically you don't have an URI to redirect to.

    ```
    @view_config(renderer="templates/form_view.pt")
    def form_view(self):

        if self.request.method == 'POST':
            if _validation_passed(request):
                return _render_data(request)
            else:
                return _render_form(values=request.POST, msg="Validation failed")

        # We are a GET not a POST, render empty form
        return _render_form() 
    ```

In this case, the result page will only be visible after the file is submitted, to view it again the user will need to re-upload the file.

Just follow one of those patterns and you'll be able to sort the things out.

There is an additional complication with file submits - you generally can't re-display the form with the file field populated without doing some trickery with storing a file in a temporary location on the server.

# c++ - 使用结构传递多个值

> ID：14395117
> 
> 赞同：1
> 
> 时间：2013-01-18T08:38:21.320
> 
> 标签：c++, function, struct

所以我有一个需要两个字符和两个整数的函数：

```
void need_2xcha_2xint(char a, char b, int x, int y)
{
  cout << "Working! a: " << a << ", b: " << b << ", x : " << x << ", y: " << y << ".\n";
} 
```

我想通过传递一个包含四个值的结构来调用它：

```
struct Value_Holder
{
char a;
char b;
int x;
int y;

Value_Holder()
    : a('g'), b('h'), x(3), y(5)
  {
  }
}; 
```

我希望能够按如下方式调用它：

```
Value_Holder vh;
need_2xcha_2xint(vh); 
```

当然，我可以编写另一个函数来接受我的自定义结构并适当地处理它，但我想知道是否有办法告诉结构直接输出四个单独的值。这将主要用于与 DirectX 库进行交互。

我确信这是基本的东西，但我一直在研究 C++ 的许多不同领域，很难记住所有内容。我已经搜索了一段时间的答案，但我不太确定我应该搜索什么。我的谷歌技能让我失望了！

提前致谢。

*   编辑 -

似乎人们对我的问题感到困惑，我将在这里尝试简化它：

有没有办法让需要 2 个整数和 2 个字符的函数接受一个保存这些值而不是四个单独值的结构？

我希望这能澄清我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:58:06.360

包装第三方库：

```
namespace david {

void need_2xcha_2xint(const Value_Holder& value) {
    ::need_2xcha_2xint(value.a, value.b, value.x, value.y);
}

} 
```

使用它：

```
int main() {
    Value_Holder value;

    using david::need_2xcha_2xint;
    need_2xcha_2xint(value);
    return 0;
} 
```

**编辑**

我很确定您可以使用模板和函数指针来封装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:42:59.087

> 一种告诉结构直接输出四个单独值的方法

如果您的意思是输出到`std::ostream`（例如`std::cout`），那么为 Value_Holder 添加一个流式操作符...

```
std::ostream& operator<<(std::ostream& os, const Value_Holder& v)
{
    return os << "{ a " << v.a << ", b " << b.b << ", x " << x << ", y " << y << " }";
} 
```

然后你可以使用例如简洁地打印它：

```
Value_Holder v;
...
std::cout << "whatever " << v << " some more\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:55:52.157

我认为 fuchsgeist 提供的答案是最好的方法。如果我理解正确，那么您需要将 4 个参数传递给您的库函数。我希望下面的代码可以解决您的问题。

```
Value_Holder vh;
need_2xcha_2xint(vh.a,vh.b,vh.x,vh.y); 
```

我希望我正确理解了您的问题。

好的，我在您编辑后收到了您的问题。您可以在此处使用函数重载概念。重载库函数以接受您的结构。这可以解决您的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:01:24.013

我知道这不是一个很好的决定，你应该避免任何定义，但无论如何，你可以试试这个：

```
void f(int i, char c)
{
    std::cout << i << " : " << c;
}

struct s
{
    int i;
    char c;
};

#define S_CALL(f, s) (f(s.i, s.c))

int main(int argc, char* argv[])
{
    s param;
    param.i = 1;
    param.c = 'a';

    f(param.i, param.c);
    S_CALL(f, param);

    return 0;
} 
```

当然，离把这个函数包装在你自己的里面也不远了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T09:15:51.837

> 有没有办法让需要 2 个整数和 2 个字符的函数接受一个保存这些值而不是四个单独值的结构？

不，没有。

您可以使用预处理器尝试不同的技巧，但这是一种错误且死胡同的方式。

为什么不直接使用结构？尽可能多地遵循[KISS 原则。](http://en.wikipedia.org/wiki/KISS_principle)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T09:29:15.717

需要将几个参数传递给函数导致需要下层对象的结论。在您的情况下，您创建了结构。

但是不要忘记[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，它需要考虑类的职责：**类应该保持简单明了**，而不仅仅是一堆有时不相关的参数。

在您的情况下，我不确定，但是当我看到 (int x, int y) 时，我想知道**类 Point**或**Vector**或**类 Size**是否处于危险之中。如果是这样，我将只封装一对 int x, int y 在相关的新类中。

For such questions, I recommend the Book **"Refactoring: Improving the Design of Existing Code" by Martin Fowler**. He list the ways to modify, the code into a cleaner more maintainable, modifiable sate, and when/why to refactor the code.

# javascript - Firefox为浏览器错误添加监听器

> ID：14395122
> 
> 赞同：6
> 
> 时间：2013-01-18T08:38:39.223
> 
> 标签：javascript, firefox-addon

我正在使用在线插件生成器来创建一个小插件。我们可以通过以下方式获取页面加载和网址：[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/listen-for-page-load.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/listen-for-page-load.html)

我在上面进行了测试并且可以工作。

但是如何为浏览器错误消息添加监听器`Problem loading page`（当互联网连接失败时）。我想捕捉这个错误（例如警报“错误加载页面”）。怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:12:39.893

*   [“拦截页面加载”](https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads)列出了几个可以让您监视 HTTP 流量的小工具。
*   [“识别页面加载失败”](https://groups.google.com/forum/?fromgroups=#!topic/mozilla.dev.extensions/LZHTXR9r1c4)对如何使用 WebProgressListeners 进行了非常简短的描述。（它是从上面的页面链接的，但链接是旧的和损坏的。）

看起来这种事情没有任何特定于 Jetpack 的功能，因此您可能会被这些更冗长和低级的解决方案中的一个所困。但我不知道我在说什么，所以也许`mozilla.dev.extensions`在你相信我的话之前先发帖。：） 祝你好运！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T07:01:01.893

这个js可以注入-

```
window.onerror = function(message, url, linenumber) {
      alert("Err"+message);
    } 
```

# asp.net - 检查 ssrs 服务器报告中的数据源数量，而不使用 GetDataSources.count()

> ID：14395124
> 
> 赞同：2
> 
> 时间：2013-01-18T08:38:58.630
> 
> 标签：asp.net, reporting-services, reportviewer, report-viewer2010

我正在使用 ASP.net Reportviewer 在我的网站上显示 SSRS 报告。

我想知道报告有多少数据源。

我目前正在使用：

```
int noOfReports = ReportViewer.ServerReport.GetDataSources().Count() 
```

这仅返回需要提示的数据源的数量。

如何获取报表数据源的完整列表？

编辑：

我们希望计算数据源的原因是我们只允许我们的报表开发人员拥有系统可以在运行时更改数据源凭据的数据源。

因此，如果有一个方法返回：“此报告正在使用数据源，它使用集成的安全性或存储的凭据”这也适用于我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:30:22.990

AFAIK ReportViewer ServerReport 无法检索报告[中使用的](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.serverreport_methods%28v=vs.100%29.aspx)*所有*数据源。另一种方法是使用[`GetItemDataSources(string itemPath)`](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.getitemdatasources%28v=sql.105%29.aspx)Web 服务 API 中的方法。

# sql - 将 if 作为条件存在于 WHERE

> ID：14395127
> 
> 赞同：0
> 
> 时间：2013-01-18T08:39:08.973
> 
> 标签：sql, sql-server-2008

我在 Google 中找不到答案，因为我不知道关键字...所以这是我的查询

```
SELECT col1 
from table1
WHERE col2 in (select col2 from table2 where user_id=@ID) 
```

我想知道是否可以放置 if 条件语句...如果 table2 为空，那么我会改为使用此条件

```
select col1 from table1 <no condition> 
```

就像`select col2 from table2 where user_id=@id is null`它会提取所有数据一样

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:44:16.060

```
SELECT table1.col1 
FROM table1 LEFT OUTER JOIN table2 ON table1.col2 = table1.col2 AND table2.user_id = @ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:55:10.553

```
DECLARE @sql VARCHAR(500)

SET @sql = 'SELECT col1 from table1'
IF((select col2 from table2 where user_id=@ID )IS NOT NULL) 
BEGIN
    SET @sql = @sql + ' WHERE col2 in (select col2 from table2 where user_id= ' + CAST(@ID AS VARCHAR) + ' )'
END
EXEC (@sql) 
```

您可以根据您的要求对这种情况使用动态查询

# logging - 集中记录 ng-click

> ID：14395128
> 
> 赞同：2
> 
> 时间：2013-01-18T08:39:18.257
> 
> 标签：logging, click, angularjs

在我的 angular-js 应用程序中，我想跟踪每个用户如何使用它。因此，最初我在客户端上构建了一个日志机制，以跟踪用户单击的内容，然后将数据发送到我的服务器。

这里的主要问题是我想记录我的应用程序中的所有 ng-click 事件。是否可以集中执行此操作而不必转到每个功能并添加我的功能？

最终，我想在日志消息中包含被点击的 div 的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:40:06.430

使用指令和服务，如下所示：

```
app.directive('logClickEvent', function(Logger) {
  return {
    restrict: 'A',
    link: function (scope, element, attrs) { 
      element.bind('click', function(event) {
        Logger.logEvent(event);
      });
    }
  }  
})

app.factory('Logger', function () {
  return { 
    logEvent: function(event) {
      // implement your logger logic here
    }
  };
}); 
```

然后将指令放在要记录的所有元素上：

```
<button id="button1" log-click-event>button1</button> 
```

**jsFiddle**：http: [//jsfiddle.net/bmleite/7wBsv/](http://jsfiddle.net/bmleite/7wBsv/)

**选项#2**：“覆盖” `ng-click`：http: [//jsfiddle.net/bmleite/7wBsv/2/](http://jsfiddle.net/bmleite/7wBsv/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:19:01.383

如何将点击事件处理程序添加到 html 正文/文档对象并以这种方式处理？

扩展 bmleite 的 jsFiddle - [http://jsfiddle.net/w8txe/3/](http://jsfiddle.net/w8txe/3/)

主要的事情是，如果记录 ID 将提供足够的信息，如果不是 - 您将如何提取相关信息以使记录有用？

总是可以传入 $location / $rootScope / etc 以在日志处理程序中提取更多上下文信息。

```
<body log-click-event>
    <div ng-controller="Ctrl">
      <button id="button1">button1</button>
      <button id="button2">button2</button>
     <div id="div1" class="box">
          <ul>
              <li id="li1">Some LI</li>
              <li id="li2">Some LI</li>
              <li id="li3">Some LI</li>
         </ul>
     </div>
<div> 
```

# jquery - 页面加载功能

> ID：14395132
> 
> 赞同：2
> 
> 时间：2013-01-18T08:39:45.490
> 
> 标签：jquery, resize, pageload

我在我的 html 标头中使用以下 javascript 在调整浏览器窗口大小时运行一些代码：

```
$(window).resize(function () {
    //run some javascript code here
}); 
```

我的问题是有没有办法修改脚本以使代码在页面最初加载时也运行？或者如果用户刷新浏览器窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:43:31.077

我经常在我的应用程序中安静地使用它，但我会这样说。

```
function doLayout(){
 //run some javascript code here
}

$(document).ready(function () {
    doLayout();
});

$(window).resize(function () {
    doLayout();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:43:44.993

你可以这样做：

```
function onResizeOrLoad () {
  // run some JS code here
}

$( window ).resize ( onResizeOrLoad );
$( document ).ready ( onResizeOrLoad ); 
```

这定义了一个函数`onResizeOrLoad`，然后您将其绑定到两个事件：窗口调整大小和页面加载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T08:45:10.510

您可以通过以下两种方式解决此问题：

```
$(window).resize(function () {
    //run some javascript code here
});

$(document).ready(function() {
  //run some javascript code here
}); 
```

或者你可以运行有共同的功能来执行..

```
function executeCode() {
   // Javascript code here..
}

$(window).resize(executeCode);
$(document).ready(executeCode); 
```

# image - seo如何优化一堆相似的图片？

> ID：14395140
> 
> 赞同：3
> 
> 时间：2013-01-18T08:40:39.987
> 
> 标签：image, seo, meta-tags, googlebot

例如，我有一个网站包含 1000 张类似主题的图像（例如：卧室装饰设计）。

当定义元标记、替代文本和图像文件名时，从逻辑上讲，1000 张图像中的许多图像将具有相似的文件名、标签、替代文本和...

此问题是否会影响 Google Bots 将我的网站检测为包含许多重复内容的网站？
如果是，解决方案是什么？

图像定义示例：

```
image1:  
name: bedroom-decoration-design-1.jpg  
alt text: bedroom decoration design  
description: new decoration designs for your bedroom 
```

...

```
image2:  
name: bedroom-decoration-design-2.jpg  
alt text: bedroom decoration design  
description: new decoration designs for your bedroom 
```

...

```
image3:  
name: bedroom-decoration-design-3.jpg  
alt text: bedroom decoration design  
description: new decoration designs for your bedroom 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:37:59.030

您应该做的最好的事情是查看 Google 网站管理员工具上的图片发布指南。这将为您提供有关图像和 ALT 标签的详细信息。我的建议是想出创造性的方法来使用最能描述产品的关键词。请参见下面的示例：

```
image1:  
name: decorative-bedroom-design-one.jpg  
alt text: creative bedroom decorations
description: stylish designs for your bedroom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:16:56.873

使用同义词、交换词、添加/删除单个词、使用复数和单数、不同的变体、与图像/网站有关的术语

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:15:23.313

您可以使用卧室装饰设计关键字添加不同的同义词、相关搜索和其他相关变体，并添加图像名称、alt 标签和描述标签。

例如 image1： 名称：glamorous-bedroom-decoration-design.jpg 替代文字：迷人的卧室装饰设计说明：为您的卧室装饰设计的迷人设计。

图片2：名称：传统卧室装饰设计.jpg 替代文字：传统卧室装饰设计描述：卧室装饰的传统设计

图片3：名称：卧室颜色方案.jpg 替代文字：卧室配色方案描述：卧室装饰设计的最佳配色方案

image4: 名称: night-bedroom-decoration-design.jpg 替代文字: 夜间卧室装饰设计描述: 夜间卧室装饰理念

图片5：名称：婚礼卧室装饰设计.jpg 替代文字：婚礼卧室装饰设计描述：婚礼卧室装饰理念

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:24:52.613

重复的内容出现在文本上，而不是图像名称和 alt 属性上。此外，您的图像没有相同的名称。

但是，您的图像名称包含所有相同的三个关键字。我不确定，但我猜这些关键字可以被 Google 视为关键字填充（图像名称过于优化）。谷歌可以决定惩罚你的网站。

如果我是你，我会尝试给出与图像显示的替代关键字相关的特定图像名称。

# c# - 使用特定于枚举的方法将枚举映射到函数/动作

> ID：14395147
> 
> 赞同：6
> 
> 时间：2013-01-18T08:41:30.403
> 
> 标签：c#, .net, enums, mapping

我正在在线预订网站（航空公司）上工作，我想根据某些设置验证用户/客户选择的路线是否有效。现有代码使用了很多枚举，我发现自己做了很多 if/if else/else 来将特定枚举映射到我想要发生的特定操作。`What I want to do is to write a enum-specific method that would do the mapping for me. Is there any standard way to do this?`

这是应用程序代码的简化版本，使用来自真实应用程序的相同类名/枚举值等：

```
// real app has 9 members, shortened for simplicity's sake
public enum RegionType
{
    Station,
    Country,
    All
}

public enum Directionality
{
    Between,
    From,
    To
}

// simplified version
public class Flight
{
     public RegionType RegionType { get; set; }
     public RegionType TravelRegionType { get; set; }
     public string RegionCode { get; set; }
     public string TravelRegionCode { get; set; }
     public string RegionCountryCode { get; set; }
     public string TravelRegionCountryCode { get; set; }
     public Directionality Directionality { get; set; }
} 
```

以下是一些示例用法：

```
 // valid flight
    Flight flight = new Flight()
    {
        RegionCode = "NY",
        CountryCode = "JP",
        RegionType = RegionType.Station,
        TravelRegionType = RegionType.Country,
        Directionality = Directionality.Between
    };

    // these are the station code/country code that user selected
    // needs to be validated against the Flight object above
    var userSelectedRoutes = new List<KeyValuePair<string, string>>() 
    { 
        new KeyValuePair<string, string>("NY", "JP"),
        new KeyValuePair<string, string>("NY", "AU"),
        new KeyValuePair<string, string>("JP", "NY")
    }; 
```

我写了一些代码验证来减少嵌套的 if/else if/else 枚举匹配：

```
private bool IsRouteValid(Directionality direction, string origin, 
                          string destination, string departure, string arrival)
{
    // both departure station and arrival station
    if (direction == Directionality.Between)
    {
        return (origin.Equals(departure, StringComparison.OrdinalIgnoreCase) 
          && destination.Equals(arrival, StringComparison.OrdinalIgnoreCase)
               || origin.Equals(arrival, StringComparison.OrdinalIgnoreCase) 
          && destination.Equals(departure, StringComparison.OrdinalIgnoreCase));
    }
    else if (direction == Directionality.From)
    {
            return (origin.Equals(departure, 
                    StringComparison.OrdinalIgnoreCase));   
    }
    else if (direction == Directionality.To)
    {
            return (destination.Equals(arrival, 
                    StringComparison.OrdinalIgnoreCase));
    }

    return false;
} 
```

这是我要更改的凌乱代码：

```
if (flight.RegionType == RegionType.Station 
    && flight.TravelRegionType == RegionType.Country)
{
     return userSelectedRoutes.Any(route => 
            IsRouteValid(flight.Directionality, route.Key, route.Value,
            flight.RegionCode, flight.TravelRegionCode));
}
else if (flight.RegionType == RegionType.Country 
&& flight.TravelRegionType == RegionType.Station)
{
    return userSelectedRoutes.Any(route => 
           IsRouteValid(flight.Directionality, route.Key, route.Value,
           flight.CountryCode, flight.RegionCode));
}
else if (flight.RegionType == RegionType.Station 
&& flight.TravelRegionType == RegionType.Station)
{
    return userSelectedRoutes.Any(route => 
           IsRouteValid(flight.Directionality, route.Key, route.Value,
                       flight.RegionCode, flight.TravelRegionCode));
}
else if (flight.RegionType == RegionType.Station 
&& flight.TravelRegionType == RegionType.All)
{
    return userSelectedRoutes.Any(route => 
           IsRouteValid(flight.Directionality, route.Key, route.Value,
                       flight.RegionCode, route.Value));
}
else if (flight.RegionType == RegionType.All 
&& flight.TravelRegionType == RegionType.Station)
{
    return userSelectedRoutes.Any(route =>
           IsRouteValid(flight.Directionality, route.Key, route.Value,
           route.Key, flight.TravelRegionCode));
}
else if (flight.RegionType == RegionType.All 
        && flight.TravelRegionType == RegionType.All)
{
    return true;
}
else
{
    return false;
} 
```

**传奇：**

`RegionCode`= 出发站/出发地
`TravelRegionCode`= 到达站/目的地
`Between`= 路线必须仅来自给定的出发站和到达站，反之亦然（例如 NY-JP 或 JP-NY）
`From`= 从特定车站到任何路线（例如 AU - *All*）
`To`= 到特定车站的任何路线（例如*All* -AU）

如果您注意到，上述`.Any`所有条件都相同，略有变化。如果可能的话，我想减少代码冗余。我使用过`KeyValuePair`，所以我在单一数据类型上同时拥有出发站和到达站。

关于如何使此代码不那么混乱/美观的任何想法？我知道我也硬编码`IsRouteValid()`，但我 100% 确定`Directionality`只能有 3 种可能的组合。`RegionType`另一方面，可以有几种组合，例如 Station-Station、Station-Country、Country-Station、Country-Country 等。

**预期输出：**

第一条路线有效/真 (NY-JP)
第二条路线无效/错误 (NY-AU)
第三条路线有效/真 (JP-NY) [因为`Directionality`是`Between`]

感谢您阅读这个很长的查询，并提前感谢您的反馈和建议。

**类似帖子：**

[枚举和字典](https://stackoverflow.com/questions/10033077/enum-and-dictionaryenum-action)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T08:57:44.630

处理此类枚举-动作映射的一种方法是使用字典。这是一个例子：

```
public enum MyEnum
{
    EnumValue1,
    EnumValue2,
    EnumValue3
}

private IDictionary<MyEnum, Action> Mapping = new Dictionary<MyEnum, Action>
    {
        { MyEnum.EnumValue1, () => { /* Action 1 */ } },
        { MyEnum.EnumValue2, () => { /* Action 2 */ } },
        { MyEnum.EnumValue3, () => { /* Action 3 */ } }
    };

public void HandleEnumValue(MyEnum enumValue)
{
    if (Mapping.ContainsKey(enumValue))
    {
        Mapping[enumValue]();
    }
} 
```

当然你也可以使用`Func`代替`Action`来处理参数。

**编辑：**

由于您不仅使用一个枚举，而且还使用一对枚举，因此您必须调整上面的示例以处理`Tuple`聚合枚举值的一种或另一种方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T03:17:10.100

遵循@MatthiasG 的建议，这是我最终编写的代码：

```
private List<KeyValuePair<RegionType, string>> 
                GetRegionTypeAndValueMapping(Flight flight, 
                                             RegionType regionType,
                                             RegionType travelRegionType)
{
    var mapping = new List<KeyValuePair<RegionType, string>>();
    if(regionType == RegionType.Station)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.Station, flight.RegionCode));
    }
    else if(regionType == RegionType.Country)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.Country, flight.RegionCountryCode));
    }
    else if(regionType == RegionType.All)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.All, null));
    }

    if(travelRegionType == RegionType.Station)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.Station, flight.TravelRegionCode));
    }
    else if(travelRegionType == RegionType.Country)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.Country, 
                           flight.TravelRegionCountryCode));
    }
    else if(travelRegionType == RegionType.All)
    {
        mapping.Add(new KeyValuePair<RegionType, string>
                          (RegionType.All, null));
    }

    return mapping;
} 
```

我使用`List<KeyValuePair<RegionType, string>>`是因为`Dictionary`不允许密钥重复。我的钥匙是 的，`RegionType enum`而且有时出发站和到达站的钥匙都是一样的`RegionType enum`。（即 Station-Station、Country-Country 和 All-All）。

```
// Copyright (c) 2010 Alex Regueiro
// Licensed under MIT license, available at 
// <http://www.opensource.org/licenses/mit-license.php>.
// Published originally at 
// <http://blog.noldorin.com/2010/05/combinatorics-in-csharp/>.
// Version 1.0, released 22nd May 2010.

// modified by moi to be a generator 
public static IEnumerable<T[]> GetPermutations<T>(IList<T> list, 
                                                  int? resultSize, 
                                                  bool withRepetition)
{
    if (list == null)
    {
        throw new ArgumentNullException("Source list is null.");
    }

    if (resultSize.HasValue && resultSize.Value <= 0)
    {
        throw new ArgumentException("Result size must be any 
                                     number greater than zero.");
    }

    var result = new T[resultSize.HasValue ? resultSize.Value : list.Count];
    var indices = new int[result.Length];
    for (int i = 0; i < indices.Length; i++)
    {
        indices[i] = withRepetition ? -1 : i - 1;
    }

    int curIndex = 0;
    while (curIndex != -1)
    {
        indices[curIndex]++;
        if (indices[curIndex] == list.Count)
        {
            indices[curIndex] = withRepetition ? -1 : curIndex - 1;
            curIndex--;
        }
        else
        {
            result[curIndex] = list[indices[curIndex]];
            if (curIndex < indices.Length - 1)
            {
                curIndex++;
            }
            else
            {
                yield return result;
            }

        }
    }
} 
```

好吧，我作弊了。:PI 需要一种计算重复排列的方法，所以我没有写一个，而是用谷歌搜索。（呵呵）我使用排列的原因是为了避免对所有可能的组合进行硬编码`RegionType`。我将 Alex Regueiro 的方法修改为生成器，以便我可以使用`Linq`它。有关排列和组合的复习，请参阅[这篇非常出色的数学 stackexchange 帖子](https://math.stackexchange.com/a/128064/26954)。

我修改`IsRouteValid()`为处理`RegionType.All`其值为`null`.

这是修改后的版本：

```
private bool IsRouteValid(Directionality direction, string origin, 
                          string destination, string departure, 
                          string arrival)
{
     // ** == All stations/countries
     if ((origin == null && departure == "**") &&
         (destination == null && arrival == "**"))
     {
         return true;
     }
     else if (origin == null && departure == "**")
     {
        return destination.Equals(arrival, StringComparison.OrdinalIgnoreCase);
     }
     else if (destination == null && arrival == "**")
     { 
       return origin.Equals(departure, StringComparison.OrdinalIgnoreCase);
     }

    // both departure station and arrival station
    if (direction == Directionality.Between)
    {
            return (origin.Equals(departure,
                    StringComparison.OrdinalIgnoreCase) && 
                    destination.Equals(arrival, 
                    StringComparison.OrdinalIgnoreCase) || 
                    origin.Equals(arrival, 
                    StringComparison.OrdinalIgnoreCase) &&         
                    destination.Equals(departure,
                    StringComparison.OrdinalIgnoreCase));
    }
    else if (direction == Directionality.From)
    {
        return (origin.Equals(arrival, StringComparison.OrdinalIgnoreCase));
    }
    else if (direction == Directionality.To)
    {
        return (destination.Equals(departure, 
               StringComparison.OrdinalIgnoreCase));
    }

    return false;
} 
```

好戏开始！

```
RegionType[] allRegionTypes = (RegionType[]) 
                              Enum.GetValues(typeof(RegionType));

var validFlights = 
      GetPermutations<RegionType>(allRegionTypes, 2, true)
         .Select(perm => new 
                         { 
                           RegionType = perm.First(),
                           TravelRegionType = perm.Last() 
                         })
         .Where(result => result.RegionType == flight.RegionType &&  
                          result.TravelRegionType ==                            
                          flight.TravelRegionType)
         .Select(map => 
                   GetRegionTypeAndValueMapping(flight,
                     map.RegionType, 
                     map.TravelRegionType));

    // same functionality as my previous messy code
    // validates all flights selected by user
    // it doesn't matter if not all flights are valid
    // as long as one of them is
    foreach(var validFlight in validFlights)
    {
        userSelectedRoutes.Any(kvp => IsRouteValid(flight.Directionality, 
                                                   kvp.Key, 
                                                   kvp.Value, 
                                                   validFlight.First().Value,
                                                   validFlight.Last().Value))
                                      .Dump("Any Flight");
    } 
```

我创建了这段代码来演示我是如何得到与上面的预期结果相同的结果。

```
 foreach(var route in userSelectedRoutes)
    {
        foreach(var validFlight in validFlights)
        {
            bool condition = IsRouteValid(flight.Directionality, 
                                          route.Key, 
                                          route.Value, 
                                          validFlight.First().Value, 
                                          validFlight.Last().Value);

            Console.WriteLine(string.Format("{0}-{1} {2}", 
                                               route.Key,     
                                               route.Value, 
                                               condition.ToString()));
        }
    } 
```

**结果：**

![预期结果截图](../Images/6d412e0b3fbbe077ae968a30f349b9ef.png)

**笔记：**

`.Dump()`是一个[Linqpad](http://www.linqpad.net/)扩展。

# iphone - 滚动期间的 UIScrollview addSubviews（动态）导致抖动

> ID：14395148
> 
> 赞同：0
> 
> 时间：2013-01-18T08:41:35.103
> 
> 标签：iphone, ios, objective-c, image, uiscrollview

我正在构建一个 iOS 应用程序，它实际上在滚动视图上显示图像（从上到下），图像显示在另一个下方。但是我遇到的问题是，当用户将视图滚动到一定程度（滚动视图大小的一半）时，我尝试在滚动视图底部添加更多图像视图（滚动期间），但这会导致延迟滚动视图滚动。有没有办法在没有这种滞后/抖动效应的情况下在滚动视图上添加视图？

非常感谢，

雷诺琼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:50:22.133

原因是这种**滞后/抖动效应**可能是在滚动视图正在滚动时在主线程上完成的大量 UI 工作。这也可以在滚动显示一些图像的表格视图时看到（如果这些图像是从某个远程服务器下载的，那么这种**滞后/抖动效果**会增加很多倍）

您可以在这里做的是重用您的 Imageviews 或 Image 容器（一些包含您的 imageview 的自定义视图）。

a) 您可以在加载时创建所有这些自定义视图/图像视图，并在滚动 Scrollview 时更新内容。

b) 一次性创建滚动视图和内容。（这包括获取要显示的图像）

如果图像是从服务器加载的，那么您肯定想看看名为[LazyLoading的示例之一](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

希望能帮助到你 ！！！

# java - android - 如何以编程方式读取清单意图？

> ID：14395152
> 
> 赞同：7
> 
> 时间：2013-01-18T08:41:59.137
> 
> 标签：java, android, android-intent, manifest

我正在尝试制作一段可以跨多个应用程序运行的代码。不过，我不知道如何从 Java 中读取它。是否可以不手动解析清单？我想用几行代码来获取 scheme1 和 scheme2。

```
<activity android:name="urlHandlingBlah">
    <intent-filter>
        <action android:name="android.intent.action.VIEW"></action>
        <category android:name="android.intent.category.DEFAULT"></category>
        <category android:name="android.intent.category.BROWSABLE"></category>
        <data android:scheme="scheme1"></data>
        <data android:scheme="scheme2"></data>
    </intent-filter>
</activity> 
```

编辑：我的意思是我将如何使用 PackageManager 来获取这些信息。我本身并不关心实际的 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:43:38.887

不，这是不可能的，因为一旦您的应用程序创建完成，所有内容都会转换为 APK，并且该清单在运行时不再可读。但是，您可以阅读这些与 PackageManager 交互的属性。

# .net - 装箱和拆箱如何在最低级别工作

> ID：14395154
> 
> 赞同：0
> 
> 时间：2013-01-18T08:42:05.893
> 
> 标签：.net, memory-management, runtime, boxing

首先让我告诉我，我知道[MSDN 关于装箱和拆箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx%20MSDN%20on%20boxing)的内容，并在 SO 上看到了关于装箱和拆箱的帖子。我也理解为什么拳击是有用的，它在高水平上做了什么，并且在很多场合都与 IL 合作过......所以请不要退缩。

我想知道的是装箱和拆箱是如何工作*的*，最好有证据。我的意思是：

*   运行时是否真的为每个装箱/拆箱操作复制堆上的数据，还是使用引用计数等技巧？
*   是用 std 收集的堆垃圾上的装箱值。垃圾收集器还是在一块特殊的内存中？
*   或更笼统地说：堆上的装箱值是否适用不同的规则？（因为我能理解为什么会这样）
*   内联代码时，运行时 IL 是否优化了装箱/拆箱操作，或者那是不可能的？如果可能的话，你能“帮助”一下 JIT 编译吗？
*   盒装值似乎包含一种类型；装箱值的数据结构（或：开销）是什么/多少？“内部”是什么样的？
*   由于值类型和类类型都派生自对象，并且装箱值应该是类类型，我想知道装箱值类型的 vtable 查找是否不同于值类型的 vtable 查找？
*   为什么是'int？实现为值类型而不是框？

换句话说，我读过的帖子谈论“运行时实现细节”，这正是我想知道的:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:08:56.937

最后我想我想通了......这是我找到的答案。如果我犯了错误，请告诉我。

*   运行时是否真的为每个装箱/拆箱操作复制堆上的数据，还是使用引用计数等技巧？

    ```
    public void Test6()
    {
        GC.Collect(GC.MaxGeneration);
        GC.WaitForFullGCComplete();

        object[] myarr = new object[1024 * 1024];

        long mem1 = GC.GetTotalMemory(true);

        int a = 1;
        for (int i = 0; i < myarr.Length; ++i)
        {
            myarr[i] = a;
        }

        long mem2 = GC.GetTotalMemory(true);

        Console.WriteLine("Total memory usage is {0} bytes", mem2 - mem1);

        // Make sure we use it so that the JIT doesn't optimize our code
        int sum = 0;
        for (int i = 0; i < myarr.Length; ++i)
        {
            sum += (int)myarr[i];
        }
        Console.WriteLine("Sum = {0}", sum);
    } 
    ```

其结果是 x86 的 12582912 - 这是成熟对象的行为：4x1M int、4x1M 类型引用和存储在数组中的 4x1M 指针。答：它只是复制到堆中。

这使得运行时不太可能使用不同的 IMO 规则。

*   内联代码时，运行时 IL 是否优化了装箱/拆箱操作，或者那是不可能的？如果可能的话，你能“帮助”一下 JIT 编译吗？

看来不是。尝试：

```
 private object IntBox1()
    {
        return 1;
    }

    private int IntNotBox1()
    {
        return 1;
    }

    public int Total1()
    {
        int sum = 0;
        for (int i = 0; i < 100000000; ++i)
        {
            sum += (int)IntBox1();
        }
        return sum;
    }
    public int Total2()
    {
        int sum = 0;
        for (int i = 0; i < 100000000; ++i)
        {
            sum += IntNotBox1();
        }
        return sum;
    } 
```

时间上有显着差异，所以没有。我还没有找到一种方法来帮助运行时优化装箱/拆箱。如果有人找到任何方法使运行时优化开箱/拆箱操作，请分享。

*   由于值类型和类类型都派生自对象，并且装箱值应该是类类型，我想知道装箱值类型的 vtable 查找是否不同于值类型的 vtable 查找？

情况似乎是这样：对值类型的 vtable 查找要快得多。

```
 public void Test4()
    {
        int a = 1;
        object oa = a;

        Stopwatch sw = new Stopwatch();
        sw.Start();
        int sum = 0;
        for (int i = 0; i < 100000000; ++i)
        {
            sum += a.GetHashCode();
        }
        Console.WriteLine("Calc {0} took {1:0.000}s", sum, new TimeSpan(sw.ElapsedTicks).TotalSeconds);

        sw = new Stopwatch();
        sw.Start();
        sum = 0;
        for (int i = 0; i < 100000000; ++i)
        {
            sum += oa.GetHashCode();
        }
        Console.WriteLine("Calc {0} took {1:0.000}s", sum, new TimeSpan(sw.ElapsedTicks).TotalSeconds);
    } 
```

*   为什么是'int？实现为值类型而不是框？

我现在认为这与两个原因有关。

1.  性能和内存大小。int 的开销？是 4 个字节，而装箱值的开销在 x86 上是 4 个字节，在 x64 上是 8 个字节。这意味着int？作为对象复制更快或同样快。通过方法复制时的开销是相同的。同样使用值类型的 vtable 查找要快得多。
2.  兼容性。装箱对象的类型 = 未装箱对象的类型。对于整数？你想要一个不同的类型而不破坏与旧版本代码的兼容性。改变int？反对需要语言支持并打破依赖这些类型的旧版本相同。

结论：装箱确实总是将值类型复制到堆中，它只是一个普通对象。您可能注意到的唯一奇怪的事情是对象中的类型引用是对未装箱值的原始（值）类型的类型引用。我找不到任何证据表明装箱值不是存在于堆上的“普通类类型”对象。

# multithreading - 返回在 Thread 中更改/初始化的值

> ID：14395158
> 
> 赞同：2
> 
> 时间：2013-01-18T08:42:39.913
> 
> 标签：multithreading, java-me, jsr75

在我的 j2me JAVA 应用程序中，有一个 Thread 初始化一个对象，之后我必须通过在其他类中返回它的值来获取它。

在我之后调用该线程的主类中，我必须获取在线程中更改的值，但问题是在线程完成之前调用该函数并且它返回 null 并且程序不会继续进行。

我所做的是将返回值等待，直到布尔状态在线程内没有变为真，但由于那个 while 循环，它挂在那里并且不会回来。

我发布下面的代码让我知道最好的解决方案，记住这段代码是在 J2me (Java) 中，即使是线程也有有限的功能，所以不要建议我使用 Latch 或 BackgroundWorker 之类的方法，因为它在这里不起作用。

**这是hsa返回值的线程和其他函数**

```
public synchronized void run() {
    try {
        contacts.removeAllElements();
        pim = PIM.getInstance();
        String lists[] = pim.listPIMLists(PIM.CONTACT_LIST);
        for (int i = 0; i < lists.length; i++) {
            //code for custom backup operation
            if (customCode == 1 && i == 0) {
                continue;
            } else if (customCode == 0 && i > 0) {
                continue;
            }
            clist = (ContactList) pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_WRITE, lists[i]);
            Enumeration cenum = clist.items();
            while (cenum.hasMoreElements()) {
                Contact c = (Contact) cenum.nextElement();
                ContactDTO contact = new ContactDTO();
                parseContactInfo(c, contact);
                contacts.addElement(contact);
            }
            clist.close();
        }
        readComplete = true;
    } catch (Exception e) {
    }
}

//Return contacts loaded into vector list
public ContactVector getLoadedContacts() {
    while(!readComplete){
         Thread.sleep(100);
        }
     return contacts;
} 
```

**这是我必须调用它的主要课程**

```
public ContactVector getContactVector() {
    DeviceContactRetriever dcr = new DeviceContactRetriever(this, language);
    dcr.start();
    ContactVector vector = dcr.getLoadedContacts();      //problem line*
    return vector;
} 
```

所以 *problem 行在完成之前返回对象，因此它为空。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T09:54:28.027

您的问题是代码不同步。

您需要使用方法`wait()`和`notify()`，如下所示：

```
public synchronized void run() {
    try {
        contacts.removeAllElements();
        //...
        readComplete = true;
        this.notify();
    } catch (Exception e) {
    }
}

//Return contacts loaded into vector list
public synchronized // <-- note sync'd here
        ContactVector getLoadedContacts() {
    while(!readComplete){
         this.wait();
        }
     return contacts;
} 
```

这是非常基本的东西，考虑学习 Java 并发教程。

如果可能的话，寻找早于 Java 5 的 Java 版本的教程，否则你可以在 Java ME（目前仅限于 Java 1.3）中使用的东西的解释将与现代特性“混合”，这使得学习这些部分变得更加困难。与您相关。

一个对我有用的示例教程是 Jacob Jenkov**[在这里](http://tutorials.jenkov.com/java-concurrency/index.html)**，从“介绍......”到“滑倒条件”的章节包括在内。请注意，其他章节（“锁”和其他章节）也不错，但这些章节严重依赖自 Java 5 以来引入的功能（JSR 133 / 166 - JMM 和并发实用程序）。

* * *

对与上述错误无关的代码的几个观察。

1.  由于您的代码非常复杂，请考虑添加日志消息以使其更易于调试（[如此处所述](https://stackoverflow.com/a/13932314/839601)）。特别是，我*强烈*希望在 catch 块中记录诸如异常之类的内容（如果您对为什么感兴趣，请在网上搜索类似 _Java 的内容，不要吞下异常），以及是否`lists`为空，如果不是，什么是它的大小以及 和 是否`clist`为`cenum`空`c`。

2.  [考虑通过提取到单独的方法（如此处所述](http://martinfowler.com/refactoring/catalog/extractMethod.html "提取方法重构")）中的代码来使您的代码更易于阅读和修改，这些代码在您的代码段内`for`和`while`循环中。

3.  请注意，由于代码`getContactVector()`可能需要很长时间才能运行，因此您最好避免从 UI 线程调用它。如果您有兴趣了解为什么会这样以及如何正确地做到这一点，请查看[lcdui 标签 wiki](https://stackoverflow.com/tags/lcdui/info)中提到的教程“网络、用户体验和线程” 。

# java - 如何在Java中为特定方法实现线程？

> ID：14395163
> 
> 赞同：0
> 
> 时间：2013-01-18T08:43:02.887
> 
> 标签：java, multithreading

我有这个我想用线程调用的方法，因为我想在后台独立执行这个方法。那么，谁能告诉我我该怎么做？

我在`EmailNotification`课堂上有以下功能

```
public class EmailNotification {
public void SendEmailNotificationForCampaign(String[] pCamp_ids,
            List<String> pReciepientAddresses, campaign pCampObj,
            ThemeDisplay pThemeDisplay, OPERATION pOperation,
            List<String> pSmptpObjList, String pLogoPath) {

        GenerateCampaignEmailMessage(pCamp_ids, pReciepientAddresses, pCampObj,
                pThemeDisplay, pOperation, pSmptpObjList, pLogoPath);
    }
} 
```

以下是调用上述方法的 RestaurantPortlet 类的代码

```
EmailNotification emailnotifyObj = new EmailNotification();
                            emailnotifyObj.SendEmailNotificationForAdvertise(sAdvIds,
                                    RecipientAdress, updatedAdv, pthemeDisplay,
                                    OPERATION.AD_DELETE, ReadSmtpDataForMailNotification(), pthemeDisplay.getPortalURL()+"/eMenuAdvertise-portlet/img/eMenuLogo.png"); 
```

那么我如何使用线程实现 SendEmailNotificationForCampaign 方法。谁能让我指导一下？我是线程概念的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:54:34.500

创建一个内部包含 ExecutorService 的服务，并将电子邮件发送任务传递给 executor 服务。依稀：

```
class EmailService {
   private ExecutorService executor;

   public sendMail(arguments) {
      executor.submit(new Runnable() {
         //send mail with given parameters
      }
   }
} 
```

这样，您将拥有后台运行的线程的句柄，并且可以在需要时关闭它们（例如运行时间过长）。如果同时启动太多线程，简单地启动新线程可能会杀死您的应用程序。

看看[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:47:26.620

最简单也可能是最好的想法是为所有待处理的电子邮件创建一个静态队列。所有生产者线程都会将邮件添加到队列中，而另一个线程将处理并发送这些电子邮件。

看看 wiki 中的[生产者/消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem#Example_in_Java)问题，它会给你一个很好的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:47:44.170

您的问题的简短回答是：

```
Runnable task = new Runnable () {
    public void run() {
        //your code here, for example:
        EmailNotification emailnotifyObj = new EmailNotification();
        emailnotifyObj.SendEmailNotificationForAdvertise(sAdvIds,
                                RecipientAdress, updatedAdv, pthemeDisplay,
                                OPERATION.AD_DELETE, ReadSmtpDataForMailNotification(), pthemeDisplay.getPortalURL()+"/eMenuAdvertise-portlet/img/eMenuLogo.png");
    }
}

new Thread(task).start(); 
```

注意：

*   这将或不会按预期工作，具体取决于做什么`GenerateCampaignEmailMessage`。特别是，如果它访问您也可以从其余代码访问的变量，则需要正确同步这些访问。
*   如果您发送许多电子邮件，您不想为每封电子邮件创建一个线程，而应该使用线程池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T08:48:41.167

根据我的建议，除了使用 JMS 之类的线程之外，还可以使用 java 邮件发送消息。

如果您希望使用 Thread 发送邮件，您也可以使用 TimerTask。

如果您只需要 Thread 而不是其他选项来使单个方法可同步。

**[检查链接](http://javarevisited.blogspot.in/2011/04/synchronization-in-java-synchronized.html)**

```
public synchoronized setCount(int count){
   this.count = count;
} 
```

# php - 在 mysql-php 中出现语法错误。您的 SQL 语法有错误；

> ID：14395167
> 
> 赞同：2
> 
> 时间：2013-01-18T08:43:15.297
> 
> 标签：php, mysql, sql

我正在使用表格`user_like`来保存用户喜欢的点击。

表结构如下。

```
id  user_id     song_id     like
--------------------------------
67    2           148         0 
```

所有列数据类型为`int(11).`

```
$song_id=$_GET['song_id'];
$query="select * from atr_like WHERE song_id = '$song_id' and like = 0";
$rs = mysql_query($query) or
die(mysql_error());
echo mysql_num_rows($rs); 
```

我收到以下错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行**的“like = 0”**附近使用正确的语法。

我无法指出错误的根本原因是它看起来一切正常。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T08:44:28.027

`LIKE`是保留关键字。你可以用反引号来逃避它。

```
SELECT  * 
FROM    atr_like 
WHERE   song_id = '$song_id' and 
        `like` = 0 
```

另一种方法是在表上提供别名，例如

```
SELECT  a.* 
FROM    atr_like a
WHERE   a.song_id = '$song_id' and 
        a.like = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7e165/3)

其他来源

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有时间更改它，请不要使用保留关键字列表中的 tablename 或 columnname。以后会给你这样的脖子疼。

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:44:59.227

`LIKE`是保留关键字。不要以此命名你的列。

[http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

# java - 如何在java中将int转换为uint8

> ID：14395168
> 
> 赞同：2
> 
> 时间：2013-01-18T08:43:21.473
> 
> 标签：java, matlab, int, type-conversion

我在 Matlab 中编写了一个图像过滤器，我想将它翻译成 java 以便使用我的 android 应用程序。如何将 short 或 int 转换为 uint8 数据格式。

顺便说一句：我知道 java 中没有像 uint8 这样的类型。

任何帮助将不胜感激。

**MATLAB：**

```
for iX = 1:imageX
    for iY = 1:imageY
        x(1:3) = input(iX,iY,:);
        output(iX, iY, :) = uint8(p1.*x.^5 + p2.*x.^4 + p3.*x.^3 + p4.*x.^2 + p5.*x + p6);
    end
end 
```

**爪哇：**

```
for (int iX = 0; iX < width; iX++) {
            for (int iY = 0; iY < height; iY++) {
                Arrays.fill(x, bitmap.getPixel(iX, iY));
                short total = 0;
                for (int i = 0; i < 3; i++) {
                    total +=p1[i] * Math.pow(x[i], 5) + p2[i]
                            * Math.pow(x[i], 4) + p3[i] * Math.pow(x[i], 3)
                            + p4[i] * Math.pow(x[i], 2) + p5[i] * x[i] + p6[i];
                }
                output.setPixel(iX, iY, total);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:18:21.163

在 Java 中使用较长的类型，例如`short`<-> `uint8`、`int`<-> `uint16`、`long`<-> `uint32`。

或者仅`int`用于 32 位以下和 32 位的所有无符号类型`long`：

当你对其进行操作时，`&`最后执行操作：

```
int i = 256 & 0xff;                             //uint8
int i = 65536 & 0xffff;                         //uint16
long i = (long) Math.pow(2, 32) & 0xffffffff;   //uint32;
// And So on 
```

有一个“有点浪费”，因为它总是使用类型长度的一半。但在大多数情况下，这不会是一个严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:50:00.040

这是 java 的一个不幸的限制。这就是我会做的。

1.  不要担心大小，使用 char 或 int
2.  编写您自己的附加包装器，以`byte`使用位掩码检查符号。这会很慢，所以我会选择#1。另一种方法是在操作期间强制转换为不同的数据类型。例如在将截断版本序列化为字节数据类型之前使用 int。
3.  请参阅[是否有用于无符号数字类型包装器的 Java 库？](https://stackoverflow.com/questions/8193031/is-there-a-java-library-for-unsigned-number-type-wrappers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:53:17.403

不要创建`total`. 在 matlab 中，您分别处理每个颜色分量。在java中做同样的事情：

```
for (int iX = 0; iX < width; iX++) {
        for (int iY = 0; iY < height; iY++) {
            Arrays.fill(x, bitmap.getPixel(iX, iY));
            // Result color components.
            int[] res = new int[3];
            short total = 0;
            for (int i = 0; i < 3; i++) {
                res[i] = p1[i] * Math.pow(x[i], 5) + p2[i]
                        * Math.pow(x[i], 4) + p3[i] * Math.pow(x[i], 3)
                        + p4[i] * Math.pow(x[i], 2) + p5[i] * x[i] + p6[i];
                // Make sure final value is in range [0, 255]
                res[i] = Math.min(255, Math.max(0, res[i]));
            }
            output.setPixel(iX, iY, Color.rgb(res[0], res[1], res[2]);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:51:22.020

编译器将为您进行转换：

```
int value = 115;
byte transformed = (byte) value;
// value == transformed => true 
```

警告：如果将 int 转换为字节，则可能会丢失 3 * 8 位信息：

```
int value2 = 357;
byte transformed2 = (byte) value2;
// value2 == transformed2 => false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:00:50.767

java中没有无符号数据类型，所以你必须选择其中一种

```
int,char,short,byte. 
```

这些都是 java 中的签名数据类型，但请记住类型转换规则，同时将一种数据类型值的值分配给另一种数据类型值。

# ios - 如何知道键盘建议是否显示？

> ID：14395173
> 
> 赞同：1
> 
> 时间：2013-01-18T08:43:35.127
> 
> 标签：ios, keyboard, autosuggest

我想在显示键盘建议时设置一个标志，但我找不到任何事件。你知道怎么得到吗？

# asp.net - 如何在asp.net应用程序中接收http数据

> ID：14395188
> 
> 赞同：0
> 
> 时间：2013-01-18T08:44:21.963
> 
> 标签：asp.net

“回复将直接发布到应用程序 URL。一旦发布，应用程序将需要从该信息中获取状态代码和消息 ID 以确定 SMS 传递的结果。”

基本上，我向 API 发送一个 http 请求以发送文本消息，并且该网站进一步将传递状态发送到我给他们的另一个 URL。现在我想使用 http 接收发送到我的应用程序的数据我如何在 asp.net 中做到这一点

编辑部分

```
 NameValueCollection pColl = Request.Params;

    // Iterate through the collection and add
    // each key to the string variable.
    for (int i = 0; i <= pColl.Count - 1; i++)
    {
        paramInfo += "Key: " + pColl.GetKey(i) + "<br />";

        // Create a string array that contains
        // the values associated with each key.
        string[]pValues = pColl.GetValues(i);

        // Iterate through the array and add
        // each value to the string variable.
        for (int j = 0; j <= pValues.Length - 1; j++)
        {

            paramInfo += "Value:" + pValues[j] + "<br /><br />";

        }
    }
Log(add, paramInfo); 
```

上面的代码为我生成以下响应：

```
Key: result<br />Value:-5<br /><br />Key: transactionid<br        />Value:2a8b0559d2a6d96ff2250c5339356293<br /><br />Key: notification<br />Value:msgresult<br /><br />Key: messageid<br />Value:My test message.<br /><br />Key: botkey<br />Value:123456<br /><br />Key: ALL_HTTP<br />Value:HTTP_CONNECTION:keep-alive
HTTP_CONTENT_LENGTH:120
HTTP_CONTENT_TYPE:application/x-www-form-urlencoded
HTTP_ACCEPT:text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
HTTP_HOST:abcdef
HTTP_USER_AGENT:Java/1.6.0_21
HTTP_TRANSACTIONID:2a8b0559d2a6d96ff2250c5339356293
HTTP_MESSAGEID:95a8e9c37b9e449fe47e7d3acdd6f6e5
br /><br />Key: ALL_RAW<br /> 
```

如果 Key 的值是-5，我需要从整个响应中得到什么：结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:56:53.183

您的服务提供商所说的是，他们会调用您的页面向您的页面发送数据（很可能是 POST）。

默认情况下，通过 http 调用 Asp.net 页面。

您可以接收如下参数：

```
protected void Page_Load(object sender, EventArgs e)
{
    var param1 = Request.Form["paramName"];
} 
```

我确信您的服务提供商必须提供他们将发布的参数名称。

**编辑：** 您的编辑使它更容易。您需要的`result`已经是`Request.Params`.

你可以使用它

```
var result = Request.Params["result"]; 
```

或者更简单

```
var result = Request["result"]; 
```

**注意：**`Request.Params`在第一次调用时使用成本很高，因为它`NameValueCollection`通过添加来自 QueryString、Form、Cookie 和 ServerVariables 的参数来构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:59:11.493

然后你可以去 httpwebrequest 和 httpwebresponse 如下

```
 HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create("http://Smsprovider");
 HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse(); 
```

然后您可以使用 myResp.StatusCode 类似的方式查看传递报告，例如，如果消息已传递，则 myResp.StatusCode 将等于 OK，您可以看到许多类似 [http://msdn.microsoft.com/en-的属性我们/图书馆/system.net.httpwebresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)

# spring - 如何在 AbstractTransactionalJUnit4SpringContextTests 事务中执行 junit 规则？

> ID：14395189
> 
> 赞同：9
> 
> 时间：2013-01-18T08:44:25.800
> 
> 标签：spring, testing, junit

我想在测试方法事务中做一些数据库操作。我想为此使用junit TestRules。但是规则是在事务之外执行的。有没有办法让我的规则在交易中执行？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    "classpath:/META-INF/spring/applicationContext.xml"})
public class ProductServiceTest extends AbstractTransactionalJUnit4SpringContextTests {

public @Rule @Autowired MySimpleSpringRule mySimpleSpringRule;

@Before
public void before() {
    logger.debug("before");
}

@After
public void after() {
    logger.debug("after");
}

@Test
public void testFindProducts() {
... 
```

和

```
@Component
public class MySimpleSpringRule implements TestRule {

private class Banaani extends ExternalResource {
    @Override
    protected void before() throws Throwable {
        logger.debug("before");
    };

    @Override
    protected void after() {
        logger.debug("after");
    };
}

private final Banaani banaani = new Banaani();

@Override
public Statement apply(Statement st, Description desc) {
    return banaani.apply(st, desc);
} 
```

结果是

```
2013-01-18 10:33:24,845 DEBUG [main]: MySimpleSpringRule         - before
2013-01-18 10:33:24,869 INFO  [main]: ionalTestExecutionListener - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@a713a5]; rollback [true]
2013-01-18 10:33:24,869 DEBUG [main]: ProductServiceTest         - before
2013-01-18 10:33:24,869 DEBUG [main]: ProductServiceTest         - running test...
2013-01-18 10:33:24,984 DEBUG [main]: ProductServiceTest         - after
2013-01-18 10:33:24,986 INFO  [main]: ionalTestExecutionListener - Rolled back transaction after test execution for test context [[TestContext@67946a testClass = ProductServiceTest, testInstance = fi.liikennevirasto.service.ProductServiceTest@40f0b2, testMethod = testFindRootProducts@ProductServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@17a6b96 testClass = ProductServiceTest, locations = '{classpath:/META-INF/spring/test-bean-configuration.xml, classpath:/META-INF/spring/applicationContext.xml, classpath:/META-INF/spring/infrastructure.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
2013-01-18 10:33:24,987 DEBUG [main]: MySimpleSpringRule         - after 
```

直接在测试类中的@Before 和@After 方法在事务内部执行，而MySimpleSpringRule 中的方法在事务外部执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:46:26.723

这可能无法使用@Rules ....？

如果没有，可以使用[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/context/TestExecutionListener.html来完成同样的事情](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/context/TestExecutionListener.html)

# c++ - 为什么 C++11 不支持在静态成员函数上声明 extern "C"？

> ID：14395192
> 
> 赞同：16
> 
> 时间：2013-01-18T08:44:46.683
> 
> 标签：c++, c, static, c++11, extern

假设我有一个包含声明为`void g(void (*callback)());`以下代码的函数的 C 库是优雅但非法的：

```
struct A
{
    // error C2159: more than one storage class specified (VC++ Nov 2012 CTP)
    static extern "C" void callback()
    {}
};

g(A::callback); 
```

为什么 C++11 不支持这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T09:46:55.987

这是一个特别令人困惑的话题。让我们攻击§7.5“链接规范”[dcl.link]。

> 1) 所有函数类型、带外部链接的函数名、带外部链接的变量名都有*语言链接*。

请注意，语言链接的属性适用于两种完全不同的实体：*类型*和*名称*。

一个函数在其类型中有一个通常不可见的信息位，用于标识它符合哪个 ABI：C 调用约定、Pascal、Fortran，所有这些都可能被指定以不同的方式使用堆栈，因此通过指针调用它们需要知道看不见的语言标签。

来自另一种语言的变量或函数的*名称*可以通过 C++ 在语法上访问，或者从引用 C++ 声明的另一种语言中访问。但并不是每一种语言都能与 C++ 的命名方案和 OO 模型相匹配。所以这个方案中的接口不包括类。

因为这些东西是分开管理的，所以它的类型（调用约定）和它的名称（链接器符号）可能有不同的链接。

> 4) 联动规格嵌套。当链接规范嵌套时，最里面的一个确定语言链接。链接规范不建立范围。*链接规范*应仅出现在命名空间范围 (3.3) 中。在*链接规范*中，指定的语言链接适用于所有函数声明符的函数类型、具有外部链接的函数名以及链接规范中声明的具有外部链接的变量名*。*在确定类成员名称和类成员函数的函数类型的语言链接时，忽略了 AC 语言链接。

影响所有函数声明，`extern "C" {}`包括指针和引用，成员函数除外。由于函数只能在命名空间中定义或作为成员定义，因此 C 函数只能在命名空间范围内定义。

该标准在这里给出了一个例子：

```
extern "C" typedef void FUNC_c();

class C {
   // the name of the function mf1 and the member 
   // function’s type have C++ language linkage; the 
   // parameter has type pointer to C function
   void mf1(FUNC_c*);

   // the name of the function mf2 and the member
   // function’s type have C++ language linkage
   FUNC_c mf2;

   // the name of the data member q has C++ language
   // linkage and the data member’s type is pointer to
   // C function
   static FUNC_c* q;
}; 
```

不过，您可以使用 模拟您想要的行为`typedef`。从第 7.5/4 节中的另一个示例，

```
extern "C" typedef void FUNC();

// the name f2 has C++ language linkage and the 
// function’s type has C language linkage
FUNC f2; 
```

将这些示例与您的示例相结合，您可以拥有

```
extern "C" typedef void callback_t();

callback_t A_callback; // declare function with C++ name and C type

struct A
{
    static callback_t &callback; // not a member function
};

// in source file:

// definition matches semantics of declaration, although not syntax
void A_callback() { ... }

// define static member reference
callback_t &A::callback = A_callback;

g(A::callback); // call syntax is emulated 
```

在实践中，它很少有所作为。只要您不尝试传递或返回非 POD C++ 类类型，C 和 C++ 在大多数平台上都使用兼容的调用约定（有关例外情况，请参阅本页上 Jonathan Wakely 的评论）。这是 C++ 的一个较少实现的特性，因为术语的重载和从微妙到学术的概念区别令人困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T08:54:42.800

首先，函数声明*是*合法的。但是`extern "C"`，类成员会忽略 ，因此如果`g`需要 `extern "C" void (*)()`，则不能通过`callback`。

至于为什么会这样，我怀疑最初主要是正交性的问题：类成员函数`extern "C"`一般是没有意义的，而正交性（或者根本没有人考虑静态成员的情况）意味着这也适用于静态成员函数，尽管允许它们`extern "C"`是有用的。今天（即 C++11），更改规则会出现问题，因为它可能会破坏现有代码。恕我直言，这种变化是可以接受的，因为它会破坏的代码量可能非常小，并且破坏会导致编译时错误——而不是运行时语义的变化——因此很容易检测和修复。尽管如此，据我所知，没有人提出改变这一点的建议，所以它没有改变。

# ajax - UpdateListItems ajax 调用成功但不返回创建的项目

> ID：14395195
> 
> 赞同：1
> 
> 时间：2013-01-18T08:45:02.357
> 
> 标签：ajax, sharepoint, sharepoint-2010

尝试在其中创建一个新的列表项并将创建的项的 ID 存储在一个变量中以供以后使用。（在 SharepointOnline 2010 中）我能够完美地创建项目，但无法获得结果对象的 ID。

我当前的解决方案是使用 UpdateListItems 发出 ajax 请求来创建项目，然后在成功回调函数中尝试在结果对象中查找和 ID。

```
 var onsuccessArg = function (data) {
        $(data).find('z\\:row').each(function () {
            savedItemID = $(this).attr('ows_ID');
        });
    }; 
```

所以列表项创建成功并调用了onSuccess。但是从未输入 each 子句。起初我认为存在浏览器问题，`find('z\\:row')`但我`data`在 chrome 调试器中查看了它的对象，我可以看到虽然`<z:row>`元素确实存在，但它不包含任何子节点！所以它就像服务没有返回任何项目，即使它确实成功地创建了一个列表项。为什么会这样？

我应该能够以这种方式获取创建的列表项ID，对吗？我只是错过了什么还是我的方法不正确？导致这种情况的服务器是否存在一些奇怪的问题？我认为这段代码以前一直运行良好

编辑：由于某种原因无法将整个代码粘贴到帖子中。所以这里是一个pastebin，而不是[http://pastebin.com/iGrvytgn](http://pastebin.com/iGrvytgn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:59:38.607

正如 Eric 所说，应该指定 ID 字段，但似乎不是必需的。无论有没有它，我都设法完美地执行了 UpdateListItems 命令......

但是我在第一篇文章中发现了代码的另外两个问题：

1.  `$(data).find('z\\:row')`在铬中不起作用。不得不追加这一行`$(data.responseText).find('z\\:row')`。事实证明，chrome 将数据放置在与其他浏览器不同的属性中。它使用 responseText 属性而不是 responseXML 属性。并且 `$(data).find('z\:row') 不会在 responseText 属性中找到任何内容。这真是令人头疼，因为当我检查 chrome 调试器时，我仍然可以看到 responseXML 属性存在并且包含所有预期的节点，只是缺少任何数据，例如 ows_ID。

2.  回调函数 ( `function(data,status)`) 不必更正参数即可用作 ajax 调用的成功函数。ajax 调用的响应数据放在 jqXHR 对象中。我认为这个对象总是第一个参数，但结果参数列表对于`success`and是不同的`complete`。

    *   完整定义为：`Function( jqXHR jqXHR, String textStatus )`
    *   成功定义为： `Function( Object data, String textStatus, jqXHR jqXHR )`

因此，要将我的回调用作成功函数，它的标题应该是`function(obj,status,data)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:14:35.607

调用 UpdateListItems 时必须填写 ID。[请参阅MSDN](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems%28office.12%29.aspx)中的 Cmd="New" 示例。

因此，在您的情况下，将 Batch 元素更改为：

```
var batch = "<Batch OnError=\"Continue\"><Method ID=\"1\" Cmd=\"New\">" + 
                "<Field Name=\"Title\">" + title + "</Field>" +
                "<Field Name=\"ID\">" + New + "</Field>" +
            "</Method></Batch>"; 
```

其中 New 是一个虚构的 ID。您仍然需要解析真实 ID 的结果，就像您已经在做的那样。

以下是对 SP2010 服务器列表的请求示例：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <UpdateListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
      <listName>Announcements</listName>
      <updates>
        <Batch OnError="Continue">
          <Method ID="1" Cmd="New">
            <Field Name="ID">998877</Field>
            <Field Name="Title">abcdef</Field>
          </Method>
        </Batch>
      </updates>
    </UpdateListItems>
  </soap:Body>
</soap:Envelope> 
```

和回应：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <UpdateListItemsResponse xmlns="http://schemas.microsoft.com/sharepoint/soap/">
      <UpdateListItemsResult>
        <Results>
          <Result ID="1,New">
            <ErrorCode>0x00000000</ErrorCode>
            <ID />
            <z:row ows_ID="6" details="removed" xmlns:z="#RowsetSchema" />
          </Result>
        </Results>
      </UpdateListItemsResult>
    </UpdateListItemsResponse>
  </soap:Body>
</soap:Envelope> 
```

# asp.net - 需要粘性会话的负载平衡网络的正确设置？

> ID：14395198
> 
> 赞同：6
> 
> 时间：2013-01-18T08:45:16.020
> 
> 标签：asp.net, iis, load-balancing

我找到了很多关于这个主题的问答，但我仍然没有弄清楚我们服务器的正确配置。背景是这样的：我们在负载均衡器后面有两个 Web 服务器，并且必须确保用户不会丢失他们的会话。

*   Web 服务器是 IIS7/ASP.NET 4。
*   我们目前无法设置单独的会话状态服务器，因此必须在 LB 上使用粘性会话。

据我了解，必须确保以下几点：

*   在两个 Web 服务器上设置相同的机器密钥。
*   使用预编译站点，以便程序集在两台机器上获得相同的命名。
*   我们要么必须基于 ip-number 或 cookie 的粘性会话（后者是首选）

有必要有预编译的网站吗？（我知道它更快，但我们失去了一些灵活性）

由于我们有粘性会话，因此具有相同的机器密钥是否仅影响用户会话超时并且他/她因此最终在另一台服务器上的情况是否正确（这意味着包含视图状态的回发可能无效，除非他们有相同的机器钥匙？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T09:27:15.407

您在所有方面都是正确的 - LB 上的粘性会话将确保相同的 Web 服务器将在后续请求中被命中，因此正确的进程内会话状态将可用。但是，LB 粘性必须与 ASP.NET 会话的超时值匹配（或更多）。例如，如果 LB 使用 cookie 进行粘性，那么 cookie 的过期时间应该比 ASP.NET 会话的过期时间长。

相同的机器密钥参数对于无论出于何种原因将请求回发到其他服务器的情况很有用。客户端状态（例如视图状态和事件验证，可能是身份验证票证）使用机器密钥加密，因此拥有相同的密钥可确保任何服务器都可以服务回发。附带说明一下，在所有 Web 农场场景中，在所有 Web 服务器上都有准确的 S/W 环境（以及可能的 H/W 环境）是 100% 有意义的，以避免任何意外。

需要预先编译网站以避免序列化冲突 - 序列化/反序列化时类型名称必须相同。因此，您不能从动态生成的程序集中获得序列化类型，并且每次编译可以避免这种情况。IMO，这更有可能影响视图状态存储而不是会话状态（因为您的会话状态以任何方式不共享并且在第二台服务器上不可用）。最后，如果您不使用网站，而是使用 Web 应用程序项目，那么这一点或多或少变得无关紧要，因为在构建项目时无论如何都会编译代码文件。只有页面（标记）会被动态编译，并且标记中可序列化类型的机会几乎为零（无论如何听起来都是个坏主意）。

# arrays - 带条件的循环索引树枝

> ID：14395200
> 
> 赞同：2
> 
> 时间：2013-01-18T08:45:28.480
> 
> 标签：arrays, loops, if-statement, twig

我想从像数据库这样的数组多维进行循环。这是我制作的示例数组：

```
array[0]['name_product'] = 'big cola';
array[0]['size'] = '4';
array[1]['name_product'] = 'cfc';
array[1]['size'] = '1';
array[2]['name_product'] = 'hot dog';
array[2]['size'] = '1';
array[3]['name_product'] = 'pizza';
array[3]['size'] = '6'; 
```

我想用 2 个条件进行循环，这是 size == '1' 和 size > '1'。之后我想从每个条件创建循环，例如：

大小 == '1'，所以：

```
no     name_product      size
1      big cola           4
2      pizza              6 
```

尺寸 > '1'：

```
no     name_product      size
1      cfc                1
2      hot dog            1 
```

如何使“不”是用树枝中的数组和条件增加它？我希望你能帮助我。谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:51:14.893

您的问题有点不清楚，我假设您正在寻找条件循环。Twig 对此有内置支持，[这里是文档](http://twig.sensiolabs.org/doc/tags/for.html#adding-a-condition)。它是在树枝 1.2 中添加的。

在您的情况下，您将制作两个循环（对于两个表），如下所示：

```
{% for product in products if product.size == 1 %}
    {# your first table #}
{% endfor %}

{% for product in products if product.size > 1 %}
    {# your second table #}
{% endfor %} 
```

# python - 注释的“全局代码”也可以执行吗？

> ID：14395203
> 
> 赞同：1
> 
> 时间：2013-01-18T08:45:37.503
> 
> 标签：python

我不知道为什么注释掉第七行时输出不同。代码如下：

```
#!/usr/bin/python
import threading
import time    
def loop(thread_name):      
    if False:
        print "1111"   #The print is only used to prove this code block indeed not excute 
        global dict_test   # The output will be different when commenting this line code
    else:
        dict_test = {}
    i = 0
    while i < 10:
        i+=1
        print  "thread %s %s" % (thread_name,id(dict_test))
        time.sleep(1)

t1=threading.Thread(target=loop,args=('1'))
t2=threading.Thread(target=loop,args=('2'))
t1.start()
t2.start()
t1.join()
t2.join() 
```

如果解释是不管匹配哪个条件都预编译全局变量，为什么下面的代码会报错？

```
#!/usr/bin/python
import threading
import time    
def loop(thread_name):        
    if False:
        print "1111"   #The print is only used to prove this code block indeed not excute 
        global dict_test   # The output will be different when commenting or uncommenting this line code 
    else:
#        dict_test = {}
        pass
    i = 0
    while i < 10:
        i+=1
        print  "thread %s %s" % (thread_name,id(dict_test))
        time.sleep(1)

t1=threading.Thread(target=loop,args=('1'))
t2=threading.Thread(target=loop,args=('2'))
t1.start()
t2.start()
t1.join()
t2.join() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:13:50.277

要解析 Python 搜索的变量名称：

*   本地范围

*   任何封闭函数的范围

*   全局范围

*   内置插件

（[来源](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)）

`if`其他流控结构这里就不说了。因此，内部的范围`if`与外部的范围相同，因此现有变量`dict_test`成为全局变量，无论此块是否正在执行。

这可能令人惊讶，但这就是它的定义方式。

我的输出是

```
thread 1 50663904
thread 2 50667360
thread 1 50667360
thread 2 50667360
thread 1 50667360
thread 2 50667360
... 
```

所以最初，当两个线程同时启动时，这两个变量是独立的。从第二次迭代开始，它们都引用同一个全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:07:25.577

无论是否执行 if 语句，都适用 global 语句。所以在注释掉全局语句时，dict_test 的赋值适用于局部范围。

# jquery - Phonegap 不加载 json - 浏览器加载

> ID：14395205
> 
> 赞同：0
> 
> 时间：2013-01-18T08:45:53.557
> 
> 标签：jquery, ios, json, cordova

我制作了一个 Phonegap/cordova 2.3 应用程序，它从服务器加载 json 格式的菜谱列表并输出菜谱的名称。在浏览器中它工作正常。但是当我编译到 iOS 时，没有加载 json，我看到一个空白屏幕。但是，当我将服务器输出放在公用文件夹中的文件中并加载该文件时，它确实在 iOS 中工作。所以我会说json输出没有错。

```
function load() {
  $.getJSON('http://localhost:3000/nl/recipes.json', function(data) {
  for (i in data) {
    document.write(data[i].name+"<br>")
  }           
}); 
```

配置文件中允许使用外部主机：

```
<access origin="*" /> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:56:42.643

该地址不再是*localhost*，因为您在另一台机器上。

如果您在同一网络上，则需要更改`localhost`为您计算机的本地 IP 地址。像这样的东西；

```
$.getJSON('http://192.168.1.10:3000/nl/recipes.json', function(data) {
 ...
}); 
```

# c# - 调用泛型方法的类型数组

> ID：14395206
> 
> 赞同：3
> 
> 时间：2013-01-18T08:45:56.773
> 
> 标签：c#, generics

我有一个具有以下签名的通用方法：

```
Broker.GetMessages<TType>(); 
```

它可以通过以下方式使用：

```
IList<IEmailMessage> emails = Broker.GetMessages<IEmailMessage>(); 
```

我需要对该结构的数组中可用的一系列类型执行此方法：

```
var messageTypes = new [] { typeof(IEmailMessage), typeof(IFaxMessage) } 
```

我的最终结果应该是这样的：

```
foreach ( IMessage message in messageTypes)
{
   Broker.GetMessages<xxx>();
} 
```

问题是我不知道如何隐藏类型以便将其作为泛型传递。我知道我可以使用反射来调用该方法，但我想知道是否有更好的方法来实现这一点。我可以更改数组结构，但不能更改方法签名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:48:18.750

不，您需要使用反射。你已经成功了一半，因为你有一个`Type[]`- 任何时候你使用`typeof`，你都在走向反思的道路。泛型适用于您在编译时知道类型的情况 - 尽管您已将这些类型硬编码到`messageTypes`数组中，但您仍然将类型的编译时知识与方法的调用断开连接。

这样做相当简单：

```
var definition = typeof(Broker).GetMethod("GetMessages");
var generic = definition.MakeGenericMethod(type);
var result = generic.Invoke(null); 
```

# java - 获取任何文件的二进制值

> ID：14395209
> 
> 赞同：3
> 
> 时间：2013-01-18T08:46:21.370
> 
> 标签：java, binary

如果假设我有一个文件，例如`music.mp3`or`image.jpg`或任何要考虑的文件。如何将这些文件的二进制表示形式转换为 java 中的字符串值，以便我可以查看它？

例如：假设我调用了文件，`'video.mp4'`那么它必须`101011010101000111010`在内存中表示为或类似的东西，我需要获取值并将其存储在 String 中`String s = "101011010101000111010"`

有谁知道如何在java中做到这一点？

编辑 2 如何将字符串转换回实际文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:43:12.687

我建议使用十六进制，它更加紧凑和可读

```
 StringBuilder sb = new StringBuilder();
    try (BufferedInputStream is = new BufferedInputStream(new FileInputStream("1.txt"))) {
        for (int b; (b = is.read()) != -1;) {
            String s = Integer.toHexString(b).toUpperCase();
            if (s.length() == 1) {
                sb.append('0');
            }
            sb.append(s).append(' ');
        }
    }
    System.out.println(sb); 
```

输出

```
71 77 65 77 65 72 0D 0A 71 77 72 65 0D 0A 72 77 65 72 0D 0A 
```

对于二进制字符串更改代码

```
 String s = "0000000" + Integer.toBinaryString(b);
            s = s.substring(s.length() - 8); 
            sb.append(s).append(' '); 
```

并得到这个输出

```
01110001 01110111 01100101 01110111 01100101 01110010 00001101 00001010 
```

这就是如何解析字符串并写回文件

```
 BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream("2.txt"));
    Scanner sc = new Scanner(s);
    while (sc.hasNextInt()) {
        int b = sc.nextInt(2);
        out.write(b);
    }
    out.close(); 
```

# ruby-on-rails - 获取嵌套哈希的键/值对

> ID：14395210
> 
> 赞同：2
> 
> 时间：2013-01-18T08:46:22.683
> 
> 标签：ruby-on-rails, ruby, hash

请参阅以下哈希：

```
params[:category] #=> {"category"=>{"name"=>"name1", "parent_id"=>1, "category"=>{"name"=>"name2"}}} 
```

和所需的输出：

```
params[:category] #=> {"category"=>{"name"=>"name1", "parent_id"=>1 }} 
```

我尝试了几件事，但都没有成功

```
params[:category].delete(params[:category][...] 
```

如何获取此嵌套哈希的键/值对以将其删除？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:59:17.740

如果哈希是：

```
params[:category] = {"category"=>{"name"=>"name1", "parent_id"=>1, "category"=>{"name"=>"name2"}}} 
```

然后使用：

```
params[:category]['category'].delete('category')
params[:category]
=> {"category"=>{"name"=>"name1", "parent_id"=>1}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:58:48.480

```
h = {"category"=>{"name"=>"name1", "parent_id"=>1, "category"=>{"name"=>"name2"}}}
h['category'].delete('category')
{"category"=>{"name"=>"name1", "parent_id"=>1}} 
```

第三行是结果。您想删除`category`的键`h['category']`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:04:50.110

如果哈希是：

```
params[:category] = {"category"=>{"name"=>"name1", "parent_id"=>1, "category"=>{"name"=>"name2"}}} 
```

然后使用：

```
params[:category]["category"].slice!("category") 
```

# xslt - 如何检查具有属性的最后一个元素？

> ID：14395211
> 
> 赞同：-1
> 
> 时间：2013-01-18T08:46:24.387
> 
> 标签：xslt

我有一个这样的xml：

```
<xml>
    <node name="1">node1</node>
    <node name="2">node2</node>
    <node name="3">node3</node>
    <node>node4</node>
</xml> 
```

如何检查这`<node name="3">node3</node>`是具有`@name`属性的最后一个节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:57:33.400

您可以在此处使用**以下兄弟**运算符。假设您位于**节点**elemenet 上，您只需要检查当前节点是否具有**name**属性，但没有 follow-sibling

```
<xsl:if test="@name and not(following-sibling::node[@name])"> 
```

这也可以作为模板匹配的一部分来完成

```
<xsl:template match="node[@name][not(following-sibling::node[@name])]"> 
```

例如，尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="node[@name][not(following-sibling::node[@name])]">
        <xsl:copy>
                <xsl:attribute name="last">1</xsl:attribute>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<xml>
   <node name="1">node1</node>
   <node name="2">node2</node>
   <node last="1" name="3">node3</node>
   <node>node4</node>
</xml> 
```

编辑：实际上，在模板匹配中，您可以在此处使用**last**。以下模板匹配也应该有效。

```
<xsl:template match="node[@name][last()]"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:02:28.590

你刚刚使用了这段代码：

```
<xsl:template match="/node/[@name='3'][last()]"> 
```

# c# - 单击 MenuStrip Control 中的选项（托盘通知图标）

> ID：14395216
> 
> 赞同：1
> 
> 时间：2013-01-18T08:46:51.163
> 
> 标签：c#, vb.net, winforms, system-tray, trayicon

我想做类似的事情：

![http://i.stack.imgur.com/CVKCq.png](../Images/dbde7d2362fc45ddbfc95d500bdc198b.png)

此代码打开托盘通知图标窗口：

```
Dim Shell_TrayWnd As IntPtr = FindWindow("Shell_TrayWnd", "")
Dim TrayNotifyWnd As IntPtr = FindWindowEx(Shell_TrayWnd, 0, "TrayNotifyWnd", "")
Dim TrayNotifyButtonWnd As IntPtr = FindWindowEx(TrayNotifyWnd, 0, "Button", "")

Dim BM_CLICK As Integer = &HF5
SendMessage(TrayNotifyButtonWnd, BM_CLICK, 0, 0) 
```

现在我想做类似的事情：

```
RightMouseClick(SkypetrayIcon)
ClickOnOption(SkypetrayIconMenuHandle,0) 
```

我怎么能做这样的事情？也许还有另一种方法（更简单的方法）

# html - 将文本作为标题放在表格边框上

> ID：14395223
> 
> 赞同：0
> 
> 时间：2013-01-18T08:47:24.913
> 
> 标签：html, tabular

我有一个困难。我必须将文本放在表格边框上作为标题。例如：

--------------这是标题-----------

是否有可能，如果有人可以提供解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:49:44.223

有多种方法。

您可以创建一个表头，并设置文本`position: relative`并将其向上移动一点。虽然，这不是优雅的。

我会改用一个 100% 有效的字段集。您需要给字段集一个边框而不是表格。

```
<fieldset>
    <legend>Your text</legend>

    <!-- table goes here -->
</fieldset> 
```

# html - 如何隐藏此 URL 的参数？

> ID：14395234
> 
> 赞同：0
> 
> 时间：2013-01-18T08:48:13.603
> 
> 标签：html, ajax, dojo

我在我的javascript中有一个ajax调用，它以json的形式返回一些响应并将json值重定向到另一个jsp页面..在重定向的jsp页面中，我在url选项卡中获取了整个json..如何避免这种情况......这是我在js文件中的ajax调用...

```
var cols="PRIORITY,USER_ID,PARTICIPANT_TYPE,CREATION_DATE,ASSIGN_TO_USER_DATE,START_WORK_DATE,DUE_DATE,OPERATION,ORDER_VK,SENDER_TYPE,SENDER_ID,ORDER_ID,FLAGS";
    var ioArgs = {
                                                        url: "./DynamicDBServlet",
                                                        content: { TABLE_NAME:'CWPWORKLIST',WHERE_CONDN:cond,COLUMNS:cols}, 
                                                        handleAs: "json",
                                                        load: function(response) {
                                                        alert("new  "+new String(response));
                                                            window.location.href = "worklist.jsp?PRIORITY="+response;
                                                        },
                                                        error: function(error) {
                                                            alert("An unexpected error occurred: " + error);
                                                        }
                                                }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:34:34.443

替换这一行：

```
window.location.href = "worklist.jsp?PRIORITY="+response; 
```

和：

```
openWindowWithPost("worklist.jsp",'height=300px,width=300px,top=200px,left=500px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no','title',param); 
```

然后具有以下功能：

```
function openWindowWithPost(url, windowoption, name, params)
{
         var form = document.createElement("form");
         form.setAttribute("method", "post");
         form.setAttribute("action", url);
         form.setAttribute("target", name);
         var input = document.createElement('input');
         input.type = 'hidden';
         input.name = "PARAM";
         input.value = params;
         form.appendChild(input);
         /*for (var i in params) {
             if (params.hasOwnProperty(i)) {
                 var input = document.createElement('input');
                 input.type = 'hidden';
                 input.name = i;
                 input.value = params[i];
                 form.appendChild(input);
             }
         }*/
         document.body.appendChild(form);
         window.open(url, name, windowoption);
         //alert("inside openpost");
         form.submit();
         document.body.removeChild(form);
 } 
```

并使用名称 PARAM 将值读取到 worklist.jsp......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:50:24.173

您现在正在使用 GET 发送您的`PRIORITY`变量。使用邮政！

您将必须创建一个由单个隐藏输入组成的表单，将响应放入所述输入的 value 属性中，并将具有其操作点的表单提交到您的 worklist.jsp。

# c# - AsfMojo - asp.net MVC / 从 WMV C# 缓存中提取帧

> ID：14395238
> 
> 赞同：2
> 
> 时间：2013-01-18T08:48:32.910
> 
> 标签：c#, asp.net-mvc, wmv

我在我的 MVC 应用程序中使用 AsfMojo（在处理程序中）从 WMV 文件中提取 bmp，它在我的本地主机 IIS7 上运行良好，但是当我将应用程序发布到我们的托管服务时，图像没有显示。

视图脚本：

```
 <img id="Image1" alt="image"  src="ImageHandler.ashx?img=CT0001.wmv" height="512" width="512" /> 
```

处理程序脚本：

```
 string videoname = System.Web.HttpContext.Current.Server.MapPath("Video/" + sImageFileName);
            if(File.Exists(videoname)) 
                {
                Bitmap bmp = AsfImage.FromFile(videoname).AtOffset(timeOffset);
                bmp.Save(objMemoryStream, ImageFormat.Png);
                byte[] imageContent = new byte[objMemoryStream.Length];
                objMemoryStream.Position = 0;
                objMemoryStream.Read(imageContent, 0, (int)objMemoryStream.Length);
                context.Response.ContentType = "image/jpeg";
                context.Response.BinaryWrite(imageContent);
                context.Response.Cache.SetExpires(DateTime.Now.AddMinutes(5));
                context.Response.Cache.SetMaxAge(TimeSpan.FromMinutes(5)); 
```

这是我尝试使用 Chrome 在新窗口中显示图像时的错误消息：

```
Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ArgumentNullException: Value cannot be null.
Parameter name: image]
   System.Drawing.Graphics.DrawImage(Image image, Int32 x, Int32 y, Int32 width, Int32 height) +1133063
   DirectshowTest.ImageHandler.ProcessRequest(HttpContext context) in E:\..\projects\DirectshowTest\DirectshowTest\ImageHandler.ashx.cs:40
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +341
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

我怀疑由于 wmv 文件的大小，处理程序脚本不会等到它在此行中读取文件中的所有帧：

```
 Bitmap bmp = AsfImage.FromFile(videoname).AtOffset(timeOffset); 
```

我试图在没有任何运气的情况下缓存 contnet 响应。有没有办法在生成图像之前检查文件是否已完全读取。

我会很感激你的建议，在此先感谢。

# php - 找不到类“DOMDocument”

> ID：14395239
> 
> 赞同：266
> 
> 时间：2013-01-18T08:48:33.010
> 
> 标签：php, xml, magento

我在我的 Magento 应用程序的页面上发现了一个错误；当我访问它时，它总是显示此消息错误：

> 致命错误：在第 95 行的 /home/.../lib/Zend/Feed/Abstract.php 中找不到类 'DOMDocument'

你能给我一个解决方案吗？我正在使用 magento 1.4.1.1。

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2013-01-18T08:59:26.993

您需要安装[DOM](http://www.php.net/en/dom)扩展。您可以在 Debian / Ubuntu 上使用：

```
sudo apt-get install php-dom 
```

在 Centos / Fedora / Red Hat 上：

```
yum install php-xml 
```

如果您遇到 PHP 包之间的冲突，您可以尝试查看是否存在特定的 PHP 版本包：例如`php53-xml`，如果您的系统运行 PHP5.3。

* * *

## 回答 #2

> 赞同：200
> 
> 时间：2016-03-01T12:20:50.930

**PHP 7.0**：

*   Ubuntu：`apt-get install php7.0-xml`
*   CentOS / Fedora / 红帽：`yum install php70w-xml`

**PHP 7.1**：

*   Ubuntu：`apt-get install php7.1-xml`
*   CentOS / Fedora / 红帽：`yum install php71w-xml`

**PHP 7.2**：

*   Ubuntu：`apt-get install php7.2-xml`
*   CentOS / Fedora / 红帽：`yum install php72w-xml`

**PHP 7.3**：

*   Ubuntu：`apt-get install php7.3-xml`
*   CentOS / Fedora / 红帽：`yum install php73w-xml`

**PHP 7.4**：

*   Ubuntu：`apt-get install php7.4-xml`
*   CentOS / Fedora / 红帽：`yum install php74w-xml`

**PHP 8.0**

*   Ubuntu：`apt-get install php8.0-xml`
*   CentOS 8 [已`php:remi-8.0`启用]：`dnf install php-xml`

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-07-25T17:54:04.450

**PHP8**：（最新版本）

```
sudo apt-get install php8.0-xml 
```

**PHP7**：

```
sudo apt-get install php7.1-xml 
```

你也可以这样做：

```
sudo apt-get install php-dom 
```

并`apt-get`会告诉你它在哪里。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-04-08T14:23:19.750

```
Package php-dom is a virtual package provided by:
  php7.1-xml 7.1.3+-3+deb.sury.org~xenial+1
  php7.0-xml 7.0.17-3+deb.sury.org~xenial+1
  php5.6-xml 5.6.30-9+deb.sury.org~xenial+1
You should explicitly select one to install. 
```

如果有人使用 5.6 版本，那么就用这种方式

```
sudo apt-get install php5.6-xml 
```

对于 PHP 版本 PHP7，Ubuntu：

```
sudo apt-get install php7.1-xml 
```

或通过

```
yum install php-xml 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-02-20T08:42:34.987

我正在使用**Centos**，以下对我有用，我运行这个命令

```
yum --enablerepo remi install php-xml 
```

并使用此命令重新启动 Apache

```
sudo service httpd restart 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-18T08:52:57.233

创建一个空的 PHP 文件并只`<?php phpinfo();`放入其中，在浏览器中查看。
检查您是否可以`--disable-dom`在配置选项中发现和/或是否可以在下面的列表中查看有关 DOM 扩展的详细信息。

如果您在列表中看不到 DOM 或者您看到它被禁用，则您的 PHP 安装不包含 DOM 扩展。您需要从源代码重新编译您的 PHP 安装来解决这个问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-19T12:01:07.980

这对我有帮助（Ubuntu Linux）PHP 5.6.3

> sudo apt-get install php5.6-dom

那对我有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-13T17:57:25.133

在我的情况下，问题是在 php 文件顶部使用命名空间，例如：

```
命名空间 MediaWiki\Extensions\ParserFunctions；
```

要解决此问题，请添加以下行：

```
使用 DOMDocument；
```

因此，如果已经安装了 dom 或 xml，则无需安装它们。这是一个php语言陷阱。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-22T16:46:11.267

经过很长时间在PHPunit中遭受它......

对于那些使用命名空间的人来说，这在框架或 CMS 中很常见，除了查看 php-xml 是否已安装并处于活动状态之外，一个很好的检查是记住在命名空间之后声明 DOMDocument：

```
namespace YourNameSpace\YourNameSpace;

use DOMDocument; //<--- here, check this! 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-12-05T18:32:58.157

使用 Suse Linux (Linux linux 3.16.7-48-default) 和 PHP 5.6.1 作为 root，这有助于：

```
zypper in php5-dom 
```

加上重启

```
systemctl restart apache2 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-08-14T12:36:05.777

在 Fedora 26 上：

```
dnf install php-dom 
```

修复它！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-16T17:44:06.620

对于 Centos 7 和 php 7.1：
yum install php71w-xml
apachectl restart

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-11-07T11:50:41.787

如果从源代码编译，`--disable-all`则可以启用 DOMDocument 支持
`--enable-dom`

例子：

```
./configure --disable-all --enable-dom 
```

经过测试并适用于 Centos7 和 PHP7

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-09-03T14:41:37.430

我正在使用带有 virtualmin 和三个 PHP 版本的 CentOS 7。我也启用了 REMI repo。它对我有用：

# 第1步：

只需像这样附加 PHP 主要版本号`php{version number}-xml`。并运行`yum install`

```
yum install php70-php-xml
yum install php71-php-xml
yum install php72-php-xml 
```

## 第2步：

不要忘记重新启动 Apache：

```
service httpd restart 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-10-21T18:06:11.610

对于 PHP 7.4，安装 DOM 扩展。

**Debian / Ubuntu：**

```
sudo apt-get update
sudo apt-get install php7.4-xml
sudo service apache2 restart 
```

**Centos / Fedora / Red Hat：**

```
yum update
yum install php74w-xml
systemctl restart httpd 
```

对于以前的 PHP 版本，请替换为您的版本。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-05T06:03:29.500

在带有 PHP 8.0 的 Amazon Linux 2 上，我必须

```
yum-config-manager --enable remi-php80
yum install php-xml 
```

不要忘记重新启动 PHP

```
systemctl restart php-fpm 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-11-17T06:14:01.467

如果您使用 PHP7.0 安装 Magento，我建议通过此命令安装所有扩展

`sudo apt-get install php7.0 php7.0-xml php7.0-mcrypt php7.0-curl php7.0-cli php7.0-mysql php7.0-gd libapache2-mod-php7.0 php7.0-intl php7.0-soap php7.0-zip php7.0-bcmath`

我需要谷歌一些时间来满足 Magento 的要求。

如果您使用另一个 PHP 版本，我认为您可以将 PHP 版本替换为 7.x

并且需要重启 Apache 来加载新的扩展

`sudo service apache2 restart`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-09-06T22:09:42.210

PHP 7.X Centos 7

尝试使用上述建议安装模块时遇到依赖性问题，添加此标志：

`--enablerepo=remi-php7X`

解决的依赖关系。

所以

`sudo yum --enablerepo=remi-php7X install php-xml`

然后

`service httpd restart`

参考： [安装 PHP 模块](https://tecadmin.net/install-php7-on-centos7/#post-9400)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-12-22T03:06:14.917

这是 php v 8.0 的最新版本

```
sudo apt-get install php8.0-xml 
```

# matrix - 如何从其变换矩阵中获取 3D 对象的旋转角度

> ID：14395242
> 
> 赞同：0
> 
> 时间：2013-01-18T08:48:42.887
> 
> 标签：matrix, 3d, transform, angle, euler-angles

我有一个可以沿 x、y 和 z 轴自由旋转的 3d 对象，然后将其保存为变换矩阵。在旋转顺序未知且对象旋转超过 3 次的情况下（例如：-如果我将对象旋转 x-60 度、y-30 度、z-45 度，然后再旋转 x->30 度），是否可以提取从变换矩阵旋转的角度？我知道如果旋转序列已知，则可以获得角度，但是如果我只有最终的变换矩阵而没有其他东西，是吗可以从变换矩阵中获得旋转的角度（x、y 和 z）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:53:34.840

欧拉角转换是一个众所周知的话题。只需标准化矩阵方向向量，然后使用类似这个[c 源代码](http://tog.acm.org/resources/GraphicsGems/gemsiv/euler_angle/)的东西。

矩阵是事物的当前状态，它不知道过去的转换是什么。它不知道矩阵是如何构建的。您可以将矩阵放入并将其分解为您喜欢的任何部分，只要：

1.  数据不重叠。例如：两个 X 转后彼此无法区分（无法知道它的 1 2 或三个不同的旋转相加）。
2.  序列顺序已知
3.  可以从数据中构建分解（例如可以测量规模）

# wpf - 无法拖动 ControlTemplate 中的 WPF Thumb

> ID：14395246
> 
> 赞同：1
> 
> 时间：2013-01-18T08:48:52.697
> 
> 标签：wpf, slider, controltemplate

我在 Canvas 中添加了一个 Thumb 控件，它的行为正是我想要的。然后我想创建多个这样的控件，我使用自定义类和 ControlTemplate 来实现。我遇到的问题是 ControlTemplate 中的代码和外面的代码完全一样，但是 Thumb 不能拖动。

```
<Canvas x:Name="cnvs" Width="300" Height="300" Background="LightBlue">
        <Canvas.Resources>
            <Style TargetType="{x:Type current:AnchorPoint}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type current:AnchorPoint}">
                            <Thumb Width="5" Height="5" DragDelta="Thumb_DragDelta" Cursor="Cross" Canvas.Left="0" Canvas.Top="0">
                                <Thumb.Template>
                                    <ControlTemplate TargetType="Thumb">
                                        <Grid>
                                            <Rectangle Fill="Transparent" Margin="-3"/>
                                            <Rectangle Stroke="Red" Fill="White" StrokeThickness="1"/>
                                        </Grid>
                                    </ControlTemplate>
                                </Thumb.Template>
                            </Thumb>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Canvas.Resources>

        <Thumb Width="5" Height="5" DragDelta="Thumb_DragDelta" Cursor="Cross" Canvas.Left="0" Canvas.Top="0">
            <Thumb.Template>
                <ControlTemplate TargetType="Thumb">
                    <Grid>
                        <Rectangle Fill="Transparent" Margin="-3"/>
                        <Rectangle Stroke="Red" Fill="White" StrokeThickness="1"/>
                    </Grid>
                </ControlTemplate>
            </Thumb.Template>
        </Thumb>

        <Path Stroke="Black" StrokeThickness="1" Name="pth"/>

    </Canvas> 
```

# android - android Webview方向问题，当改变方向然后应用程序重新启动并从开始显示页面

> ID：14395248
> 
> 赞同：3
> 
> 时间：2013-01-18T08:49:06.757
> 
> 标签：android, webview, orientation, android-webview

您好我正面临 android Webview 方向问题，当更改方向然后应用程序重新启动并从头开始显示页面。我正在阅读不同的答案，但没有解决方案让我知道为什么我在这里给出我的代码。请任何 android 开发人员帮助我并告诉我我在哪里编辑我的代码或添加一些东西

```
package com.example.edarabia;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Bitmap;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

@SuppressLint("SetJavaScriptEnabled")

public class MainActivity extends Activity{
WebView mywebview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(isNetworkConnected() == true){
    setContentView(R.layout.activity_main);
    mywebview = (WebView) findViewById(R.id.webview);       
    mywebview.getSettings().setJavaScriptEnabled(true);
    mywebview.setWebViewClient(new myWebClient());
    mywebview.loadUrl("http://www.grafdom.com/operations/projects/ma/edarabiaapp/");        
    mywebview.getSettings().setBuiltInZoomControls(true);
    mywebview.getSettings().setLoadWithOverviewMode(false);
    mywebview.getSettings().setUseWideViewPort(false);
    }else{
    setContentView(R.layout.splash);    
    showBuyDialog();
    }
}

//  @Override
//    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
//        if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
//          mywebview.goBack();
//            return true;
 //       }

 //       return super.onKeyDown(keyCode, event);

//  }

 // To handle "Back" key press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
        mywebview.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onBackPressed() {
    finish();
}

public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
        view.loadUrl(url);
        return true;
    }
}

//// This method will retun boolean value if net conect then value will be true otherwise false
private boolean isNetworkConnected() {
    ConnectivityManager connectivity = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null)
            for (int i = 0; i < info.length; i++)
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
    }
    return false;
}

public void showBuyDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("Unable to connect");

    builder.setMessage("You Must have an Internet connection to use Edarabia. Please connect and try again.");
    builder.setCancelable(false);
    builder.setNegativeButton("Close", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            finish(); 
        }
    });
    builder.show();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-04T23:59:19.337

添加`android:configChanges="keyboard|keyboardHidden|screenSize|orientation"`到 AndroidManifest.xml 文件上的活动。它应该看起来像这样

```
<activity
        android:name=".MainActivity"
        android:configChanges="keyboard|keyboardHidden|screenSize|orientation"
        android:label="@string/app_name" > 
```

如此处所示 - [Android WebView 处理方向更改](https://stackoverflow.com/questions/1002085/android-webview-handling-orientation-changes)

# gwt - 允许用户配置 GWT 应用程序外观

> ID：14395254
> 
> 赞同：0
> 
> 时间：2013-01-18T08:49:42.667
> 
> 标签：gwt

我的应用程序包含 3 个视图（目前）每个按钮都有几个按钮、下拉菜单等。我使用 widget.setStyle(xxx) 设置按钮的外观和感觉我应该使用什么方法让用户可以选择更改外观以及每个视图中按钮、字体等的感觉。我最初的想法是，当我调用 widget.setStyle( xxx ) 时， xxx 必须是从静态类中拉回的一些值，而静态类又是由用户设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:08:15.263

有很多方法可以做到这一点。

1）如果它是一个轻量级的过程。

将 setStyle 与您的设置类值一起使用 user 。

2）如果有变化的数量

保存设置后，通过 JSNI 方法重新加载应用程序并附加相应的 css 文件。

# unity3d - 如何在 Unity3d 中制作演示游戏？

> ID：14395256
> 
> 赞同：2
> 
> 时间：2013-01-18T08:49:46.693
> 
> 标签：unity3d, demo, trial

我在unity3d 中为pc 和mac 开发了一个游戏。我想以 30 天的试用期发布游戏。
我该怎么做？如何写入系统注册表。在开发这个试用版时我应该记住什么。
每当我在谷歌搜索时，我都会得到 unity3d 的试用版，而不是关于如何在 unity3d 中制作试用游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:29:39.093

下面的[文章](http://www.kalzumeus.com/2006/09/05/everything-you-need-to-know-about-registration-systems/)有很多信息，但是很长。

**写入注册表** 关于保存到注册表，仅当您有大型游戏并且将其他值写入注册表时才执行此操作。如果它只是一个小型独立游戏，那么宁愿避免注册。人们不喜欢小型独立游戏将值写入注册表，因为大多数开发人员永远不会删除该值。

有2种方式。您可以让用户每次“登录”到您的服务器，也称为“在线验证”。这种方式更安全，但确实需要用户登录，这并不理想。您可以使用以下离线方法。请注意，我只是想到了这一点，因此可能存在一些小缺陷。

**离线方法** 您可以获得当前系统的日期和时间。加密日期和时间并将其保存到磁盘。然后每次游戏启动时，再次获取系统日期和时间，并检查这个“新”时间与您存储在磁盘上的日期和时间。此检查将更多地确保用户没有修改系统日期和时间。明明每次开始游戏都会覆盖日期和时间，但显然要先检查数值。

如果您获得的“新”日期和时间不超过旧的存储日期和时间，您就会知道用户是否修改了他们的时间。您还可以在游戏退出之前获取日期和时间。然后当游戏再次启动时，您可以确保当前日期和时间大于您存储到磁盘的日期和时间。

还要获取游戏首次启动的日期和时间并保存。因为您可以检查他们的试用期结束前的确切天数。

**你应该记住什么** 允许用户保留他们保存的游戏（如果他们可以保存）。这样当您购买游戏时，就不必重新开始。

# php - 将 mysqli_ 函数与 mysql_ 连接一起使用？

> ID：14395263
> 
> 赞同：1
> 
> 时间：2013-01-18T08:50:11.380
> 
> 标签：php, mysql, mysqli

我写了一些使用`mysqli_`很多的代码。问题是我现在需要将此代码与正在使用的代码集成`mysql_`，并负责连接、身份验证等。我不想创建第二个连接，但`mysql_`缺少一些功能，例如准备好的查询。所以我想以某种方式神奇地将连接“导入”到`mysqli`. 这甚至可能吗？如果是这样，那该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:10:57.567

`mysql_connect`不能通过 MySQLi 扩展重用创建的连接资源。您要么必须处理当前代码中的连接，要么重构旧代码。

这并不像听起来那么难。MySQLi 也有一个过程接口，您可以像使用旧的 MySQL 扩展一样使用该扩展。MySQLi 最大的好处是面向对象的接口，这将使重构变得更加复杂。MySQLi 本身也支持（包装到方法/函数中）MySQL 特性，如准备好的语句、事务和连接字符集，但这并不意味着你不能提交 a`START TRANSACTION`或`SET CHARSET utf8`就像你所做的那样`mysql_query`

希望这可以帮助。如果您对重构有更具体的问题，请随时提问：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:02:19.423

不，那是不可能的。

顺便说一句，准备好的语句并不是使查询安全的唯一方法。
它是每个人都应该使用的*占位符*，它们不一定必须使用准备好的语句来实现。
虽然占位符也可以使用 mysql_* 函数轻松实现

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T08:54:17.937

正如 F4r-20 指出的那样，您可以更改连接到数据库的方式并用函数替换`mysql_`函数`msqli_`！

尝试在开始项目之前决定要使用什么，而不是在中间。准备可以节省大量时间和此类问题。

* * *

PS。下次我会使用[PDO 。](http://php.net/manual/en/book.pdo.php)它简单、快速、面向对象且支持多种数据库类型！

* * *

**编辑：**由于您无权访问凭据或连接到数据库的方式，您将不得不使用`mysql_`、更改连接`mysqli_`或建立新连接......对不起:(

# java - 你如何使用@index和hibernate在一个字段上放置多个索引

> ID：14395264
> 
> 赞同：3
> 
> 时间：2013-01-18T08:50:12.743
> 
> 标签：java, hibernate, annotations, indexing

给定表中的两个字段，我可以创建一个包含这两个字段的索引，如下所示：

```
@org.hibernate.annotations.Index(name = "IDX_REPORTID_RECNO")
private Integer reportId;

@org.hibernate.annotations.Index(name = "IDX_REPORTID_RECNO")
private Integer recNo; 
```

我可以单独在每一列上创建索引

```
@org.hibernate.annotations.Index(name = "IDX_REPORTID")
private Integer reportId;

@org.hibernate.annotations.Index(name = "IDX_RECNO")
private Integer recNo; 
```

但是它不允许我两者都做，这似乎是不允许的

```
@org.hibernate.annotations.Index(name = "IDX_REPORTID_RECNO")
@org.hibernate.annotations.Index(name = "IDX_REPORTID")
private Integer reportId;

@org.hibernate.annotations.Index(name = "IDX_REPORTID_RECNO")
@org.hibernate.annotations.Index(name = "IDX_RECNO")
private Integer recNo; 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:08:51.227

我认为您可以在类级别指定第二个索引：

```
@org.hibernate.annotations.Table(indexes = 
    @org.hibernate.annotations.Index(name = "IDX_REPORTID_RECNO",
        columnNames = {"reportId", "recNo"})
)
public class MyEntity {
    @org.hibernate.annotations.Index(name = "IDX_REPORTID")
    private Integer reportId;

    @org.hibernate.annotations.Index(name = "IDX_RECNO")
    private Integer recNo;
} 
```

# iphone - iOS 5.0 模式视图不旋转（故事板）

> ID：14395268
> 
> 赞同：0
> 
> 时间：2013-01-18T08:50:22.913
> 
> 标签：iphone, ios, objective-c, ipad, storyboard

我使用故事板。在我想旋转的每个视图控制器中，我都包含了这样的方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:
(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

在 iOS 6 中，它可以很好地旋转到我在故事板上的横向和纵向视图。

在 iOS 5 中，父视图控制器会旋转，但模式在屏幕上时不会旋转，它们只会在屏幕上之前旋转，但不会在屏幕上旋转。因此，当用户改变方向时，它保持不变。父级在屏幕上会改变，但模态将采用父级的方向，但在屏幕上不会改变。如何让我的模态视图像 iOS 6 一样在屏幕上旋转时工作。模态视图是通过情节提要创建的。

编辑*

当我对模态进行弹出窗口时，模态不会旋转。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:22:37.940

在 iOS5 和 iOS6 中，旋转的处理方式不同。我使用下面的代码来支持这两个版本。

```
// iOS5
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// iOS6
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

`shouldAutorotateToInterfaceOrientation:`在 iOS6 中已弃用。你可以在这里阅读： http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation)：

# objective-c - Objective-c：读取由 json 创建的数组

> ID：14395270
> 
> 赞同：-2
> 
> 时间：2013-01-18T08:50:25.610
> 
> 标签：objective-c, json, nsarray, nsdictionary

我从 Ios 开发开始，在操作 Json 创建的数组时遇到了一些麻烦：我在我的应用程序中调用了一个返回数据的 Web 服务：

```
{evenements =(
             ({
            dateEvenement ={
                1 = "01-01-2013";
                2 = "02-01-2013";
                3 = "03-01-2013";
                4 = "04-01-2013";
            };
            idEvenement = 61;
            nbrInvite = 1;
            nomEvenement = "My event Name";
            nomUtilisateur = "Lucas ";
        }
    ),
 );
} 
```

除了 "dateEvenement" 之外，我可以通过以下代码获取所有值：

```
NSArray *msgList;
msgList = [ jsonResults objectForKey:@"evenements" ];

for (NSDictionary *evenements in msgList) {

    for (NSDictionary *evenement in evenements ) {

        NSString *idEvenement = [evenement objectForKey:@"idEvenement"];
        NSString *nomUtilisateur = [evenement objectForKey:@"nomUtilisateur"];
        NSString *nomEvenement = [evenement objectForKey:@"nomEvenement"];
        NSString *nbrInvite = [evenement objectForKey:@"nbrInvite"];

        NSArray *dates = [ evenement objectForKey:@"dateEvenement" ];
     }
} 
```

你能帮我获取“dateEvenement”的数据吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:56:44.310

那么在你的 JSON 中，`dateEvenement`不是一个数组而是一个字典：

```
NSDictionary *dates = [ evenement objectForKey:@"dateEvenement"];

for(NSNumber *key in dates) {
   NSString *dateString = [dates objectForKey:key];
   NSLog(%@ : %@, key, dateString); 
} 
```

正如您在 JSON 示例中声明的那样，字典的键是数字，因此您应该`NSNumber`反对键类型。

# android - 是否可以将 Manifext.XML 文件的内容导入 MonkeyRunner 脚本文件

> ID：14395274
> 
> 赞同：0
> 
> 时间：2013-01-18T08:50:54.610
> 
> 标签：android, monkeyrunner

我正在编写 MonkeyRunner 脚本，它检查 wifi 的状态并启用它。

为此，我正在导入 android API 及其类。以下是代码片段；

```
from android.net.wifi import WifiManager
global state
state = WifiManager.isWifiEnabled()
print state 
```

执行时出现错误：

```
state = WifiManager.isWifiEnabled()
TypeError: isWifiEnabled(): expected 1 args; got 0 
```

然后我意识到我需要权限才能进行 wifi 操作，并在他们使用过的一些 Manifest.XML 文件中找到

我的疑问是我在真实设备上运行脚本以及如何在我的 MonkeyRunner 脚本文件中使用。

在此先感谢 Surendra Valsangker

# android - Android 位置管理器不起作用

> ID：14395278
> 
> 赞同：1
> 
> 时间：2013-01-18T08:51:12.113
> 
> 标签：android, gps, maps, location

我正在尝试创建并显示设备当前位置和定义点之间的路线。我使用这段代码：

```
public class RoutePath extends MapActivity {
    /** Called when the activity is first created. */
    MapView mapView;
    private RoutePath _activity;
    GeoPoint srcGeoPoint,destGeoPoint;
    private static List<Overlay> mOverlays;
    MapController mc;
    Location location;
    private MyLocationOverlay myLocationOverlay;
    String n;
    double longitude;
    double latitude;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SharedData data = SharedData.getInstance();
        mapView = new MapView(this,"apyKey");
        mapView.setClickable(true); 

        setContentView(mapView);
        _activity = this;
        LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
        Location location =lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        longitude = location.getLongitude();
        latitude = location.getLatitude();

        double src_lat = latitude;
        double src_long = longitude;
        double dest_lat = 38.1267303;
        double dest_long = 13.3466097;

       String n = String.valueOf(src_long);
       Log.d("asd",n);

        if(src_lat == -1 || src_long == -1 || dest_lat == -1 || dest_long == -1){
            showAlert("Please enter source and destination points");
        }else{

            srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6));
            destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6));

            List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pushpin1);
            CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable);
            //CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_green.png"));
            OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

            Drawable destdrawable = this.getResources().getDrawable(R.drawable.pushpin1);
            CustomItemizedOverlay  destitemizedOverlay = new CustomItemizedOverlay( destdrawable );
           // CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_red.png"));
            OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

            srcitemizedOverlay.addOverlay(srcoverlayitem);
            destitemizedOverlay.addOverlay(destoverlayitem);

            mapOverlays.add(srcitemizedOverlay);
            mapOverlays.add(destitemizedOverlay);

            connectAsyncTask _connectAsyncTask = new connectAsyncTask();
            _connectAsyncTask.execute();       
            mapView.setBuiltInZoomControls(true);
            mapView.displayZoomControls(true);
            mOverlays = mapView.getOverlays();
            mapView.getController().animateTo(srcGeoPoint);
            mapView.getController().setZoom(12);
        }
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    //era private prima di 
   private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
        private ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            progressDialog = new ProgressDialog(_activity);
            progressDialog.setMessage("Caricamento del percorso...");
            progressDialog.setIndeterminate(true);
            progressDialog.show();
        }
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            fetchData();

            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);           
            if(doc!=null){
                Overlay ol = new MyOverlay(_activity,srcGeoPoint,srcGeoPoint,1);
                mOverlays.add(ol);
                NodeList _nodelist = doc.getElementsByTagName("status");
                Node node1 = _nodelist.item(0);
                String _status1  = node1.getChildNodes().item(0).getNodeValue();
                if(_status1.equalsIgnoreCase("OK")){
                    NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                    Node node_path = _nodelist_path.item(0);
                    Element _status_path = (Element)node_path;
                    NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                    Node _nodelist_dest = _nodelist_destination_path.item(0);
                    String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                    List<GeoPoint> _geopoints = decodePoly(_path);
                    GeoPoint gp1;
                    GeoPoint gp2;
                    gp2 = _geopoints.get(0);
                    Log.d("_geopoints","::"+_geopoints.size());
                    for(int i=1;i<_geopoints.size();i++) // the last one would be crash
                    {

                        gp1 = gp2;
                        gp2 = _geopoints.get(i);
                        Overlay ol1 = new MyOverlay(gp1,gp2,2,Color.BLUE);
                        mOverlays.add(ol1);
                    }
                    Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);

                    progressDialog.dismiss();
                }else{
                    showAlert("Unable to find the route");
                }

                Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                mOverlays.add(ol2);
                progressDialog.dismiss();
                mapView.scrollBy(-1,-1);
                mapView.scrollBy(1,1);
            }else{
                showAlert("Unable to find the route");
            }

        }

    } //end Async
    Document doc = null;
    private void fetchData()
    {

        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
        urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 ));
        urlString.append("&destination=");//to
        urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 ));
        urlString.append("&sensor=true&mode=driving");    
        Log.d("url","::"+urlString.toString());
        HttpURLConnection urlConnection= null;
        URL url = null;
        try
        {
            url = new URL(urlString.toString());
            urlConnection=(HttpURLConnection)url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
        }catch (MalformedURLException e){
            e.printStackTrace();
        }catch (IOException e){
            e.printStackTrace();
        }catch (ParserConfigurationException e){
            e.printStackTrace();
        }
        catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }
    private void showAlert(String message){
        AlertDialog.Builder alert = new AlertDialog.Builder(_activity);
        alert.setTitle("Error");
        alert.setCancelable(false);
        alert.setMessage(message);
        alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        alert.show();
    }

    private Drawable getDrawable(String fileName){
        return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
    }

} 
```

这是针对智能手机 Galaxy Nexus，android 4.2 的应用程序。我在我的平板电脑 android 4.0.2 上对其进行了测试，它运行良好。但是当我在智能手机上测试它时，它崩溃了。我试图改变`LocationManager.NETWORK_PROVIDER`，`LocationManager.GPS_PROVIDER`但它还是崩溃了。我无法解决这个问题。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:02:22.440

我为同样的问题苦苦挣扎了几个小时。同一段代码在我的 Android 2.7 设备上运行良好，但不适用于我的 Android 4.1.1。最终，我发现，由于某些原因，如果没有先调用 requestLocationUpdates()，则 getLastKnownLocation() 不起作用。结果，我的 LocationListener 在我放了这两行之后开始更新：

```
locationManager.requestLocationUpdates(provider, 1000, 10, locationListener);
Location location = locationManager.getLastKnownLocation(provider); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:52:52.023

您是否在清单文件中授予了适当的权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

[在此处](http://developer.android.com/guide/topics/location/strategies.html)查看 Android 开发文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:16:55.540

任何机会你得到一个空指针。

您从 getLastKnownLocation() 获取位置，然后使用此对象而不检查它是否为空。如果没有已知位置，getLastKnownLocation 可以返回 null。

# ruby-on-rails - 字体很棒的 sass rails 的奇怪异常

> ID：14395282
> 
> 赞同：0
> 
> 时间：2013-01-18T08:51:17.043
> 
> 标签：ruby-on-rails, font-awesome

正如你在下面看到的，我已经清楚地尝试使用带有类 user-md 的图标，但这以某种方式显示为 ubuntu 图标。我非常非常困惑。

![在此处输入图像描述](../Images/b836102b2cfcb31e0988aa374202bfbb.png)

另外，另一个异常...我有一个导航列表，如 twitter bootstrap 中所述... [http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

由于某种原因，活动 li 显示了 icon-glass .. 覆盖在所需的 icon-home 上。正常的 li 只显示房子。

![在此处输入图像描述](../Images/b38c01ae0a1994372617646a5b5caadd.png)

我正在使用带有 GNOME Shell 3.6.2 的 ubuntu 12.10，这是我的 gemfile 锁定文件：

```
GEM
  remote: https://rubygems.org/
  specs:
    RedCloth (4.2.9)
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    active_enum (0.9.12)
      activesupport (~> 3.0)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    annotate (2.4.1.beta1)
    arel (3.0.2)
    awesome_print (1.1.0)
    bcrypt-ruby (3.0.1)
    better_errors (0.3.2)
      coderay (>= 1.0.0)
      erubis (>= 2.7.0)
    binding_of_caller (0.6.8)
    blankslate (3.1.2)
    bootstrap-sass (2.2.2.0)
      sass (~> 3.2)
    bootstrap-will_paginate (0.0.9)
      will_paginate
    builder (3.0.4)
    cancan (1.6.7)
    cocaine (0.4.2)
    coderay (1.0.8)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    columnize (0.3.6)
    country_select (1.1.3)
    daemons (1.1.9)
    debugger (1.2.4)
      columnize (>= 0.3.1)
      debugger-linecache (~> 1.1.1)
      debugger-ruby_core_source (~> 1.1.7)
    debugger-linecache (1.1.2)
      debugger-ruby_core_source (>= 1.1.1)
    debugger-ruby_core_source (1.1.7)
    devise (2.2.2)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (4.1.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (4.1.0)
      factory_girl (~> 4.1.0)
      railties (>= 3.0.0)
    ffi (1.0.11)
    font-awesome-sass-rails (3.0.0.1)
      railties (>= 3.1.1)
      sass-rails (>= 3.1.1)
    forem-redcarpet (1.0.0)
      pygments.rb (= 0.2.4)
      redcarpet (= 2.0.1)
    geocoder (1.1.6)
    gmaps4rails (1.5.6)
    gon (4.0.2)
      actionpack (>= 2.3.0)
      json
    google_visualr (2.1.5)
    googlecharts (1.6.8)
    guard (1.6.1)
      listen (>= 0.6.0)
      lumberjack (>= 1.0.2)
      pry (>= 0.9.10)
      thor (>= 0.14.6)
    guard-rspec (2.4.0)
      guard (>= 1.1)
      rspec (~> 2.11)
    haml (3.1.7)
    hash-deep-merge (0.1.1)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.4)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    jquery-ui-rails (3.0.1)
      jquery-rails
      railties (>= 3.1.0)
    json (1.7.6)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    lazy_high_charts (1.3.2)
      bundler (~> 1.0)
      hash-deep-merge
    libnotify (0.8.0)
      ffi (>= 1.0.11)
    listen (0.7.2)
    lumberjack (1.0.2)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    meta_request (0.2.0)
      rack-contrib
      rails
    method_source (0.8.1)
    mime-types (1.19)
    multi_json (1.5.0)
    nested_form (0.3.1)
    nifty-generators (0.4.6)
    nokogiri (1.5.6)
    orm_adapter (0.4.0)
    pg (0.13.2)
    polyamorous (0.5.0)
      activerecord (~> 3.0)
    polyglot (0.3.3)
    pry (0.9.11.3)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
    pry-debugger (0.2.1)
      debugger (~> 1.2.0)
      pry (~> 0.9.10)
    pygments.rb (0.2.4)
      rubypython (~> 0.5.3)
    quiet_assets (1.0.1)
      railties (~> 3.1)
    rack (1.4.4)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-contrib (1.1.0)
      rack (>= 0.9.1)
    rack-pjax (0.7.0)
      nokogiri (~> 1.5)
      rack (~> 1.3)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    rails_admin (0.4.1)
      bootstrap-sass (~> 2.1)
      builder (~> 3.0)
      coffee-rails (~> 3.1)
      font-awesome-sass-rails (~> 3.0, >= 3.0.0.1)
      haml (~> 3.1)
      jquery-rails (~> 2.1)
      jquery-ui-rails (~> 3.0)
      kaminari (~> 0.14)
      nested_form (~> 0.2)
      rack-pjax (~> 0.6)
      rails (~> 3.1)
      remotipart (~> 1.0)
      sass-rails (~> 3.1)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12)
      json (~> 1.4)
    redcarpet (2.0.1)
    remotipart (1.0.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rolify (3.2.0)
    rspec (2.12.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    rspec-core (2.12.2)
    rspec-expectations (2.12.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.12.1)
    rspec-rails (2.12.2)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    rubypython (0.5.3)
      blankslate (>= 2.1.2.3)
      ffi (~> 1.0.7)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sequel (3.20.0)
    simple_form (2.0.4)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    sinatra (1.0)
      rack (>= 1.0)
    slop (3.4.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    squeel (1.0.14)
      activerecord (~> 3.0)
      activesupport (~> 3.0)
      polyamorous (~> 0.5.0)
    taps (0.3.24)
      rack (>= 1.0.1)
      rest-client (>= 1.4.0, < 1.7.0)
      sequel (~> 3.20.0)
      sinatra (~> 1.0.0)
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    warden (1.2.1)
      rack (>= 1.0)
    webrat (0.7.3)
      nokogiri (>= 1.2.0)
      rack (>= 1.0)
      rack-test (>= 0.5.3)
    will_paginate (3.0.4)
    workflow (0.8.0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:20:49.423

我不知道 Ubuntu 图标发生了什么。很奇怪。

第二个问题要容易一些。它已在最新的 Font Awesome 3.0.2 中修复，您使用的 Gem 似乎尚未更新。

尝试从 Bootstrap CDN 调用 Font Awesome 和 Bootstrap 到您的 HTML：[http ://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome](http://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome)

-戴夫

字体真棒创建者和维护者

# sql - 记录 MERGE 语句的结果

> ID：14395287
> 
> 赞同：1
> 
> 时间：2013-01-18T08:51:32.960
> 
> 标签：sql, oracle, oracle11g, sql-merge

我有 2 个表：一个带有原始数据的临时表。其中的行可能会重复（超过 1 次）。第二个是具有实际数据的目标表（每一行都是唯一的）。

我正在使用游标传输行。在游标内，我使用 MERGE 语句。如何使用 DBMS_OUTPUT.PUT_LINE 打印到控制台，哪些行被更新，哪些被删除？

根据[官方文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)，此声明没有此类功能。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:03:41.727

以前的海报已经说过这种方法是可疑的，因为光标/循环和输出日志供审查。

在 SQL Server 上，MERGE 语句中有一个 OUTPUT 子句，它允许您在另一个表中插入一行，并执行 $ 操作（插入、更新、删除）以及您想要的插入或删除/覆盖数据中的任何列。这可以让您完全按照您的要求进行总结。

等效的 Oracle RETURNING 子句可能不适用于 MERGE，但适用于 UPDATE 和 DELETE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:08:12.797

我不明白你为什么要这样做。的输出`dbms_output` *需要*有人在那里查看。不仅需要有人查看*所有*输出，否则毫无意义。如果有超过 20 行，那么没有人会费心这样做。如果没有人查看所有输出以进行验证，但您*需要*实际记录它，那么您这样做是在积极伤害自己。

如果你真的需要记录哪些行被更新或删除，有几个选项；两者都涉及性能命中。

1.  您可以切换到[BULK COLLECT](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#LNPLS891)，它使您能够使用临时表的 ROWID 创建游标。您将两个表的 JOIN 批量收集到此中。根据 rowid 并根据您的业务逻辑从目标表中更新/删除，然后使用某种标志更新临时表以指示执行的操作。

2.  您在目标表上创建一个[触发器](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7004.htm#SQLRF01405)，该触发器记录另一个表发生的情况。

实际上，除非知道更新/删除的数量很重要，否则您不应该做任何事情。创建您的 MERGE 语句，以确保在出现任何问题时出错，并使用错误日志记录子句记录您收到的任何错误。这些更有可能是您应该注意的事情。

# java - 如何确保T线程可以访问n个资源而不会死锁？

> ID：14395289
> 
> 赞同：1
> 
> 时间：2013-01-18T08:51:41.370
> 
> 标签：java, multithreading, synchronization, deadlock

假设我有线程 t1,t2,t3......t10 并且我需要访问打印机和扫描仪，顺序是首先扫描然后使用这些线程打印，那么我如何确保 t1,t2...t10(由多个用户）可以无死锁地访问扫描仪或打印机。

t1 完成了扫描和等待打印机的工作，现在 t2 正在完成打印文档的工作。那么如何确保 t1 不应该中断工作 t2。现在 t2 完成了打印同一个用户想要扫描另一个文档的工作，但它没有被 t1 释放。所以 t1 和 t2 之间的死锁，t1 想要打印机，t2 想要扫描仪，但他们已经持有其他资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:00:15.207

> t1 完成了扫描和等待打印机的工作，现在 t2 正在完成打印文档的工作。那么如何确保 t1 不应该中断工作 t2。

实现这种机制的一个好方法是使用队列，例如线程安全的[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)并拥有 2 个使用者线程：

*   从打印机队列中获取作业的打印机线程
*   从scannerQueue中获取作业的Scanner Thread

然后您的 T0...T10 只需将作业放入其中一个队列中，然后等待（或不等待）它们在打印机/扫描仪准备好时执行。

通过这样做，您无需锁定客户端/生产者端并让消费者端（打印机和扫描仪）管理他们的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T08:55:11.923

1.  使用一把锁
2.  如果您决定使用多个锁，请始终以相同的顺序获取它们（例如，始终先获取打印机锁，然后再获取扫描仪锁）

# java - RESTlet 授权过滤器

> ID：14395291
> 
> 赞同：1
> 
> 时间：2013-01-18T08:51:46.737
> 
> 标签：java, restlet

我正在开发一个 RESTlet API (JAVA)，并且我创建了一个自定义授权过滤器，我在将所有请求传递给我的路由器之前运行它。在我的请求中，我总是将会话 ID 作为请求属性传递，例如

```
 http://localhost:8080/myAPI/{sid}/someResource/ 
```

现在，在我扩展*ServerResource*的函数中，我可以做这样的事情来轻松提取*{sid}*：

```
 String sid = (getRequestAttributes().containsKey("sid")) ? getRequestAttributes().get("sid").toString() : ""; 
```

我的问题是，在我的扩展*过滤器*的授权函数中（授权函数不是通过路由器调用，而是在我的主*createInboundRoot()*函数中调用），我不能使用相同的方法来提取*{sid}*。我已经使用*request.getResourceRef().getSegments()*的字符串操作创建了一个解决方法，但是必须有更好的方法吗？

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:50:01.217

您*可以*为`ServerResource`. 像这样：

```
public class CommonParentResource extends ServerResource
{
    // class definition
} 
```

然后*重写*里面的ServerResource类的`doInit()`方法。

```
public class CommonParentResource extends ServerResource
{
    public void doInit()
    {
        boolean authorized=false;

        String sid = getRequestAttributes().containsKey("sid") ? (String)getRequestAttributes().get("sid") : StringUtils.EMPTY;

        // Authorization logic here.

        if(!authorized)//after authorization process completed.
        {
            getResponse().setStatus(Status.CLIENT_ERROR_UNAUTHORIZED);
            getResponse().setEntity(/*Representation carrrying message for unauthorized user*/);
        }
    }
} 
```

`ServerResource`现在，您要执行此授权检查的任何新子类都必须扩展`CommonParentResource`该类。像这样：

```
public class FriendsListResource extends CommonParentResource
{
    @Get
    //......
} 
```

这里有两点很重要：

1.  `doInit()`的任何子类`ServerResource`在调用任何带有 // ... 注释的方法之前`@Get`被`@Post`调用

2.  （注意）如果您不使用此语句：

    ```
    getResponse().setStatus(Status.CLIENT_ERROR_UNAUTHORIZED); 
    ```

    即，如果您没有设置对*错误*的*响应**状态*，那么带有/// ...注释的方法将被调用！但是如果你的程序将响应的状态设置为错误状态，那么// / ... 将不会被执行，最终用户将看到如下所示的错误消息：**`@Get``@Post``@Put``@Get``@Post``@Put`**

     **```
    getResponse().setEntity(/*Representation carrrying message for unauthorized user*/); 
    ```**

# javascript - 使用 jquery 仅从内部循环退出

> ID：14395292
> 
> 赞同：0
> 
> 时间：2013-01-18T08:51:50.710
> 
> 标签：javascript, jquery, asp.net

我知道这个问题已经被问过很多次了。但我没有完成它。有人只能帮助退出内循环吗？break labelname 对我不起作用。

```
loop1:
    for (var i = 0; i < timeHolder.length; i++) {
    loop2:
        for (var key2 in self.TimeHolder[0]) {

            if (self.TimeHolder[0].hasOwnProperty(key2)) {
                if (self.TimeHolder[0][key2] == timeHolder[i]) {
                    var pattern = _.pick(row, key2)[key2];
                    var status = pattern.split('-');

                    $('#tblMatrix tr:last').append(self.createCompanyStatusRowsByRow(status));
                  break loop2;
                }
            }
        }
    } 
```

但是 break loop2 也从外循环退出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:53:51.943

看看这个问题：[Best way to break from nested loops in Javascript？](https://stackoverflow.com/questions/183161/best-way-to-break-from-nested-loops-in-javascript) 最佳答案（我认为）是：

```
loop1:
    for (var i in set1) {
loop2:
        for (var j in set2) {
loop3:
            for (var k in set3) {
                break loop2;  // breaks out of loop3 and loop2
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:57:48.507

只需使用`break`而不是`break loop2`.

该`break`关键字将使您脱离当前的执行循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:02:39.383

一个简单的休息非常适合我。

```
var elems = [ "a","b","c","d","e" ];
for( var i = 0; i < 5; i++ ) {

  console.log( i );

  for( var j in els ) {

    if( elems[j] == "c" ) {

      break;
    }

    console.log( " " + elems[j] );
  }
} 
```

有预期的输出

```
0
 a
 b
1
 a
 b
2
 a
 b
3
 a
 b
4
 a
 b 
```

# java - Porter2 Stemming Java 实现查询

> ID：14395294
> 
> 赞同：1
> 
> 时间：2013-01-18T08:52:00.007
> 
> 标签：java, netbeans, porter-stemmer

我看过其他关于这个的帖子，但我仍然无法让它工作。

[http://snowball.tartarus.org/dist/libstemmer_java.tgz](http://snowball.tartarus.org/dist/libstemmer_java.tgz) <<- 这包含了 porter2 算法的 java 实现。

我所做的是提取桌面上的内容（以便于访问）并使用 Netbeans IDE 打开其 .java 文件。我运行了它，但它返回了一个错误。

Netbeans 不读取其他 java 文件。由于所有 java 文件都相互连接，因此 javaX 文件中的一个错误会在 javaY 文件上产生错误，依此类推。

TestApp.java 是应该运行的。但是会出现以下错误。请参阅屏幕截图。

以下是截图：

[http://img248.imageshack.us/img248/290/java1.jpg](http://img248.imageshack.us/img248/290/java1.jpg)

[http://img4.imageshack.us/img4/5196/java2l.jpg](http://img4.imageshack.us/img4/5196/java2l.jpg)

[http://img441.imageshack.us/img441/8625/java3i.jpg](http://img441.imageshack.us/img441/8625/java3i.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-01T16:11:29.570

我再也看不到你的照片了。由于 frenchStemmer.java 中有 3 个无法访问的语句，ext 文件夹将无法编译。如果您不使用法语，它们可以很容易地被删除，或者只是删除整个文件。

```
case 13:
                        // (, line 155
                        // call RV, line 155
                        if (!r_RV())
                        {
                            return false;
                        }
                        // fail, line 155
                        // (, line 155
                        // <-, line 155
                        slice_from("ant");
                        return false;
                        break;                 <<<- remove this 
```

我在 Intellij 的免费社区版中编译并运行，也使用命令行。

# java - Solaris 中的 Log4j 多线程

> ID：14395295
> 
> 赞同：0
> 
> 时间：2013-01-18T08:52:00.460
> 
> 标签：java, multithreading, log4j, solaris

我有一个多线程应用程序，我使用 log4j 进行日志记录。当我在 Windows 7/intel 笔记本电脑上测试我的应用程序时，它工作得很好。但是当我将相同的应用程序部署到生产服务器（solaris/sparc）时，它工作了 10 分钟，然后开始变慢（非常慢）。我使用分析器查看线程状态。由于线程转储中的 log4j 操作，有很多线程被阻塞。我也在使用异步追加器，但无法获得任何成功的结果。有什么猜测吗？

这里有一些转储：

```
"pool-7-thread-105" - Thread t@22939
   java.lang.Thread.State: BLOCKED
    at org.apache.log4j.Category.callAppenders(Category.java:204)
    - waiting to lock <794f2dae> (a org.apache.log4j.spi.RootLogger) owned by "pool-7-thread-112" t@22946
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.info(Category.java:666)

"pool-7-thread-112" - Thread t@22946
   java.lang.Thread.State: RUNNABLE
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(Unknown Source)
    at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
    at java.io.BufferedOutputStream.flush(Unknown Source)
    - locked <5fcbc329> (a java.io.BufferedOutputStream)
    at java.io.PrintStream.write(Unknown Source)
    - locked <19e9d0c5> (a java.io.PrintStream)
    at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
    at sun.nio.cs.StreamEncoder.flush(Unknown Source)
    - locked <3680c465> (a java.io.OutputStreamWriter)
    at java.io.OutputStreamWriter.flush(Unknown Source)
    at org.apache.log4j.helpers.QuietWriter.flush(QuietWriter.java:59)
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:324)
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    - locked <3fddded7> (a org.apache.log4j.ConsoleAppender)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    - locked <794f2dae> (a org.apache.log4j.spi.RootLogger)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.info(Category.java:666) 
```

还有 log4j.xml - 版本 1.2.17

```
<appender name="scripts" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="threshold" value="INFO"/>
    <param name="file" value="log/script.log"/>
    <param name="DatePattern" value="'.'yyyy-MM-dd"/>
    <layout class="org.apache.log4j.EnhancedPatternLayout">
        <param name="ConversionPattern"
               value="%-6p[%-d{ISO8601}] [%t] %m (%F:%L) %n"/>
    </layout>
</appender>

<appender name="stdout" class="org.apache.log4j.ConsoleAppender">
    <param name="threshold" value="INFO"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-6p[%-d{ISO8601}] [%t] %m (%F:%L) %n"/>
    </layout>
</appender>

<appender name="ASYNC" class="org.apache.log4j.AsyncAppender">
    <param name="BufferSize" value="5000"/>
    <appender-ref ref="scripts"/>
</appender>

<root>
    <priority value="debug"/>
    <appender-ref ref="stdout"/>
    <appender-ref ref="ASYNC"/>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:02:31.690

所以试图记录的线程被阻塞了。为什么？因为日志线程当前被阻塞在`java.io.FileOutputStream.writeBytes(Native Method)`. 这强烈表明日志记录的内容（文件或其他）无法跟上正在完成的日志记录量。

解决此问题的方法是首先查看您的日志记录的去向。如果要写入文件，该文件是否位于快速的本地文件系统上？磁盘 I/O 有问题吗？

您可能希望使用不会阻塞 I/O 的日志记录方案。它不必——当一个线程正在执行磁盘 I/O 时，其他线程可以登录到一个内部队列。但是，如果日志记录速率超过 I/O 速率，最终您必须以某种方式停止在内存中建立日志记录，这需要阻塞线程或丢弃日志条目。也就是说，这不应该是一个问题，除非您记录太多，有严重的 I/O 性能问题（例如在拥挤的网络上通过 NFS 登录），或者以某种方式禁用了文件缓冲。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:08:53.073

从堆栈转储来看，有些东西正在调用 flush() ......所以这将否定使用 BufferedOutputStream 的许多“优点”。如果您能弄清楚如何避免刷新，吞吐量将会提高。

大卫施瓦茨这样评论：

> Windows 因没有真正将文件刷新作为提高其性能的一种方式而臭名昭著。Solaris 和 Linux 确实可以完全刷新。这可能有助于解释平台相关的性能差异。

（我不知道。是的，它会的。）

> 在 WriterAppender 中关闭[immediateFlush可能会有所帮助](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/WriterAppender.html#immediateFlush)

很好的建议。

# html - Magento 1.7.0.2 标头中的 W3 验证器错误

> ID：14395298
> 
> 赞同：0
> 
> 时间：2013-01-18T08:52:06.157
> 
> 标签：html, seo, w3c-validation

我正在 W3 验证器中验证我的商店，我在这一行中遇到了一些错误：

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'/> 
```

问题似乎在于`&subset=`代码。

w3 验证器返回：

> 在文档中找到实体引用，但没有定义该名称的引用。这通常是由拼写错误的引用名称、未编码的 & 号或遗漏尾随分号 (;) 引起的。此错误的最常见原因是 URL 中未编码的 & 符号，如 WDG 在“URL 中的符号”中所述。
> 
> 实体引用以和号 (&) 开头，以分号 (;) 结尾。如果您想在文档中使用文字 & 符号，则必须将其编码为“&”（即使在 URL 中！）。请注意以分号结束实体引用，否则您的实体引用可能会被解释为与以下文本相关。还要记住，命名实体引用是区分大小写的；&Aelig; 和 æ 是不同的字符。
> 
> 如果此错误出现在 PHP 的会话处理代码生成的某些标记中，本文对您的问题进行了解释和解决方案。
> 
> 请注意，在大多数文档中，与实体引用相关的错误将触发来自验证器的最多 5 条单独的消息。通常，当原始问题得到解决时，这些都会消失。

我有四个问题：

*   这条线是在哪里生成的？我似乎找不到它。
*   它的正确语法是什么？
*   元`name="keywords"`标签过时了吗？我认为是这样，但即使是最新的 magento 版本仍然会自动生成它。可以去掉吗？
*   我想在标题中添加自定义 SEO 内容。它的正确位置是什么，因为标头从多个位置解析。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:46:20.540

您需要`&`在链接中进行编码。例如，请参阅问题：[我是否在 <a href...> 中编码 & 符号？](https://stackoverflow.com/q/3705591/1591669)

所以`&`应该成为`&amp;`（只要您不想引用不同的实体）。

# wpf - 使用带有 MVVM 灯的“X”按钮关闭窗口时的确认

> ID：14395301
> 
> 赞同：2
> 
> 时间：2013-01-18T08:52:29.730
> 
> 标签：wpf, mvvm-light

我正在使用 WPF 和 MVVM Light 框架（我是新手）。

我想做以下事情：

1.  当用户单击“X”关闭按钮时，如果他是否要退出应用程序，我想显示一个确认窗口。
2.  如果是，应用程序关闭
3.  如果否，则没有任何反应，他仍然可以正常使用该应用程序

到目前为止，我有这个：

*   在 MainWindow.xaml.cs 中：

    ```
    public MainWindow()
    {
        InitializeComponent();
        Closing += (s, e) => ViewModelLocator.Cleanup();
    } 
    ```

*   在 ViewModelLocator.cs 中：

    ```
    public static void Cleanup()
    {
        ServiceLocator.Current.GetInstance<MainViewModel>().Cleanup();
    } 
    ```

*   在 MainViewModel.cs 中：

    ```
    public override void Cleanup()
    {
        MessageBoxResult result = MessageBox.Show(
                        "Unsaved data will be lost, would you like to exit?",
                        "Confirmation",
                        MessageBoxButton.YesNo,
                        MessageBoxImage.Question);

        if (result == MessageBoxResult.Yes)
        {
          // clean-up resources and exit
        }
        else
        {
          // ????
        } 
    ```

实际上，如果用户回答“是”或“否”，在这两种情况下应用程序都会退出。

我不太确定如何从这里开始......

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:32:05.813

如果要取消关闭，可以使用`EventToCommand`in an`EventTrigger`来捕获关闭事件并将`Cancel`传递的属性设置为 true：`CancelEventArgs`

**XAML：**

```
<Window ...
   xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
   xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF45"
   DataContext="{Binding Main, Source={StaticResource Locator}}">
   <i:Interaction.Triggers>
      <i:EventTrigger EventName="Closing">
         <cmd:EventToCommand Command="{Binding OnClosingCommand}" 
            PassEventArgsToCommand="True"/>
      </i:EventTrigger>
   </i:Interaction.Triggers>
   <Grid>
     ...
   </Grid>
</Window> 
```

**视图模型：**

```
public class MainViewModel : ViewModelBase
{
   public RelayCommand<CancelEventArgs> OnClosingCommand { get; set; }

   public MainViewModel()
   {
      this.OnClosingCommand = 
         new RelayCommand<CancelEventArgs>(this.OnClosingCommandExecuted);
   }

   private void OnClosingCommandExecuted(CancelEventArgs cancelEventArgs)
   {
      ...

      if (mustCancelClosing)
      {
         cancelEventArgs.Cancel = true;
      } 
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:11:22.447

如果用户取消关闭，`Closing`事件参数具有`Cancel`您需要设置的属性。`true`因此，您的`Cleanup()`方法应该返回`bool`并且您应该将其分配给`Cancel`属性。

# yii - 使用 Yii authManager 时需要用户组表吗？

> ID：14395302
> 
> 赞同：0
> 
> 时间：2013-01-18T08:52:30.663
> 
> 标签：yii

如果我使用的是 Yii 的 authManager，我还需要创建一个用户组表吗？如果我错了，请纠正我，如果我们使用 authManager 和 RBAC 模式，我们会创建角色并为其分配任务。然后我们将角色分配给用户。

在这种情况下，我们是否还需要一个组表并在用户表中有一个引用组表 ID 列的 FK？

谢谢你。

# c# - 无法显示堆栈中的最后一项 pop()

> ID：14395307
> 
> 赞同：0
> 
> 时间：2013-01-18T08:52:50.617
> 
> 标签：c#, winforms, stack

我正在按钮上实现 backword 功能。单击时将移动到堆栈中的上一个链接。问题是，如果它在堆栈 pop() 中有一个元素，则会给出堆栈为空的错误。

```
 private void Backward_Click(object sender, EventArgs e)
{
try
{
if (simpleStack.Count != 0)
{
simpleStack.Pop();
string open = simpleStack.Pop();

PopulateListView(open);

complicatedStack.Push(open);

}

else if (simpleStack.Count == 0)
{
Backward.Enabled = false;

} 
```

当我点击不止一次时，它会工作 n 返回上一个选中的项目。但不显示最后一个。我在 simpleStack 中传递字符串。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:54:42.770

看看你的代码：

```
simpleStack.Pop();
string open = simpleStack.Pop(); 
```

你弹出两次，忽略第一个结果。为什么要这么做？我怀疑你可以删除第一个`Pop`电话。

另请注意，您的`else`子句不需要检查`simpleStack.Count == 0`- 它必须是，否则您将不会评估该`else`子句。（当然，除非你有多个线程在做一些事情——这不是一个好主意。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:57:05.830

试试这个 -

```
private void Backward_Click(object sender, EventArgs e)
    {
        try
        {
            if (simpleStack.Count != 0)
            {
                //simpleStack.Pop();    // Remove this line
                string open = simpleStack.Pop();

                PopulateListView(open);

                complicatedStack.Push(open);

            }
            else if (simpleStack.Count == 0)
            {
                Backward.Enabled = false;
            }
        }
    } 
```

# java - Android 插入语句

> ID：14395309
> 
> 赞同：2
> 
> 时间：2013-01-18T08:52:55.130
> 
> 标签：java, android, eclipse, sqlite, insert

我创建了一个 android 应用程序，用户可以在其中添加、更新和删除数据库中的内容

在我的 DataSource java 文件中，我有以下代码：

```
public void addWebsite(String sitename, String username, String password) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_URL, sitename);
        values.put(MySQLiteHelper.COLUMN_USERNAME, username);
        values.put(MySQLiteHelper.COLUMN_PASSWORD, password);
        database.insert(MySQLiteHelper.TABLE_URL, null,values);
    } 
```

上面的代码使插入语句。

```
public void updateWebsite(WebsiteRecords website){
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_URL, website.getSitename());
        values.put(MySQLiteHelper.COLUMN_USERNAME, website.getUsername());
        values.put(MySQLiteHelper.COLUMN_PASSWORD, website.getPassword());
        database.update(MySQLiteHelper.TABLE_URL, values, MySQLiteHelper.COLUMN_ID  + " = " + website.getId(), null);
    } 
```

上面的代码显示了一条更新语句

```
public void deleteWebsite(WebsiteRecords website) {
        database.delete(MySQLiteHelper.TABLE_URL, MySQLiteHelper.COLUMN_ID  + " = " + website.getId(), null);
    } 
```

最后，上面的代码用于删除语句。

我的问题是，我从我的登录中获得了这个用户名，并且我想从中添加、更新和删除具有我从登录屏幕获得的用户名的东西。我正在考虑制作

```
Cursor mCursor = database.rawQuery("INSERT INTO " + TABLE_URL + " VALUES('" + sitename + "', '" + username + "', '" + password + "') " WHERE loginname=?", new String [] {loginname}); 
```

或类似的东西，但我害怕它不起作用。更新和删除也是如此。它只会添加、更新、删除、查看登录名为“iamcoolin3d”的文件。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:58:48.797

该行：

```
Cursor mCursor = database.rawQuery("INSERT INTO " + TABLE_URL + " VALUES('" + sitename + "', '" + username + "', '" + password + "') " WHERE loginname=?", new String [] {loginname}); 
```

应该：

```
Cursor mCursor = database.rawQuery("INSERT INTO " + TABLE_URL + " VALUES('" + sitename + "', '" + username + "', '" + password + "')  WHERE loginname=?", new String [] {loginname}); 
```

**`"`**之前有一个额外的`WHERE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:59:25.063

你的最后一行有问题，必须把WHERE放在String里面，否则不行。

# .net - 如何在 ftp 中部署 .net Web 服务？

> ID：14395315
> 
> 赞同：0
> 
> 时间：2013-01-18T08:53:11.847
> 
> 标签：.net, web-services, ftp

我需要在实时服务器上部署我的 .NET Web 服务，以便我可以在我的实时站点中访问它。

我只有 ftp 凭据。请告诉我如何部署我的 Web 服务，从而在我的实时站点中访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:06:23.200

也许你可以使用批处理文件来做到这一点。这是一些信息：

[http://msdn.microsoft.com/en-us/library/dd465323.aspx](http://msdn.microsoft.com/en-us/library/dd465323.aspx)

[http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic8.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic8.aspx)

# wcf - 将安全绑定添加到 wcf 端点

> ID：14395325
> 
> 赞同：0
> 
> 时间：2013-01-18T08:53:42.893
> 
> 标签：wcf, wcf-security

我在下面的配置中添加了一个绑定：

```
<services> 
  <service name="MyNamespace.Service.ServiceName.ServiceEndPoint"> 
    <endpoint address="http://localhost:8012/ServiceEndPoint" binding="webHttpBinding" contract="MyNamespace.Service.ServiceName.IServiceEndPoint" behaviorConfiguration="webHttp" name="ServiceName"/>

  </service> 
</services> 
<behaviors> 
  <endpointBehaviors> 
    <behavior name="webHttp"> 
      <webHttp/> 
    </behavior> 
  </endpointBehaviors> 
</behaviors> 
```

所以我添加了 binding="webHttpBinding" 因为我想保护端点。这是我拥有的相应配置：

```
<bindings> 
  <wsHttpBinding> 
    <binding name="ServiceName"> 
      <security mode="Transport"> 
        <transport clientCredentialType="Windows" /> 
      </security> 
    </binding> 
  </wsHttpBinding> 
</bindings> 
```

但这似乎不能确保终点。我已经用 Firefox 进行了尝试，以确认 IE 不会自动进行身份验证并检查了 firebug 中的标头。

谁能指出我这样做的正确配置方向？

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:05:02.597

你忘记设置`bindingConfiguration`

```
<endpoint address="http://localhost:8012/ServiceEndPoint" binding="webHttpBinding" contract="MyNamespace.Service.ServiceName.IServiceEndPoint" behaviorConfiguration="webHttp" name="ServiceNameEndpoint" bindingConfiguration="ServiceName"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:44:14.860

在您的绑定中，您已经配置了 a`wsHttpBinding`并且在您的服务端点中您已经指定了 a `webHttpBinding`。我认为您希望将端点绑定设置为`wsHttpBinding`.

检查WCF 绑定上的[此链接。](http://wcfsecurityguide.codeplex.com/wikipage?title=Ch%2008%20-%20WCF%20Bindings%20Fundamentals&referringTitle=Home)

# c# - MVC 3 Razor 语法来创建 RadioButtons

> ID：14395335
> 
> 赞同：0
> 
> 时间：2013-01-18T08:54:45.867
> 
> 标签：c#, asp.net-mvc, razor

我需要在 MVC3 C# 中使用 RAZOR 创建两个单选按钮。
下面显示的是预期最终结果的示例：

```
<input type="radio" name="set-accessibility-on" value="on">Accessibility On<br>
<input type="radio" name="set-accessibility-off" value="off">Accessibility Off 
```

`set-accessibility-on`应该调用`ActionResult SetAccessibilityOn()`

和

`set-accessibility-off`应该调用`ActionResult SetAccessibilityOff()`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:10:54.723

像这样更改标记：

```
<input type="radio" name="set-accessibility" value="on">Accessibility On</input>
<input type="radio" name="set-accessibility" value="off">Accessibility Off</input>

$(document).ready(function() {
    $('input[name=setaccessibility]').bind('change', function() 
    { 
        if(this.value == 'on')
        //call this one: SetAccessibilityOn() -- ajax
        else
        //call the other one: SetAccessibilityOff() -- ajax
    });
}); 
```

# python - 如何使用 python 或 django 知道浏览器支持 cookie

> ID：14395337
> 
> 赞同：1
> 
> 时间：2013-01-18T08:54:54.823
> 
> 标签：python, django, cookies, browser

在设置 cookie 之前，我想检查网络浏览器是否支持 cookie。如何使用 python 或 django 做到这一点。我没有在 google 和 python 文档和 django doc 上找到它？有谁知道？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:57:59.073

检查[设置测试cookie](https://docs.djangoproject.com/en/1.0/topics/http/sessions/#setting-test-cookies)以测试用户的浏览器是否接受cookie。

# sql - 我如何 RIGHT OUTER JOIN 包含多个列？

> ID：14395338
> 
> 赞同：0
> 
> 时间：2013-01-18T08:54:58.337
> 
> 标签：sql, sql-server-2008, tsql, join

我有一个表，我想加入一个日历表来生成一个时间序列，我这样做是这样的：

```
SELECT thedate AS Date
INTO #CALENDAR
FROM
(
    SELECT *
    FROM Sample.dbo.ExplodeDates('20120101','20121231') as d
) X
GO

CREATE INDEX D ON #CALENDAR(Date)
GO

    SELECT Date, A, B, Value
FROM
(
      SELECT StartDate, A, B, Value
      FROM Sample.dbo.Values
) X
RIGHT OUTER JOIN #CALENDAR
    ON Date = StartDate
ORDER BY Date

DROP TABLE #CALENDAR
GO 
```

这有效，除了 A 和 B 的列包含`NULL`s 即我得到这样的东西：

```
2012-04-06 00:00:00.000 NULL    NULL    NULL
2012-04-07 00:00:00.000 NULL    NULL    NULL
2012-04-08 00:00:00.000 NULL    NULL    NULL
2012-04-09 00:00:00.000 A1  B1  4256
2012-04-10 00:00:00.000 A1  B1  4498 
```

有没有办法我可以得到这样的东西：

```
2012-04-06 00:00:00.000 A1  B1  0
2012-04-07 00:00:00.000 A1  B1  0
2012-04-08 00:00:00.000 A1  B1  0
2012-04-09 00:00:00.000 A1  B1  4256
2012-04-10 00:00:00.000 A1  B1  4498 
```

我为一对（A1，B1）举了这个例子，但还有其他的。关于如何实现这一目标的任何建议？

**更新：**

更好的独立示例：

```
-- The explore dates function

USE Sample
GO

/****** Object:  UserDefinedFunction [dbo].[ExplodeDates]    Script Date: 01/18/2013 01:08:11 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ExplodeDates]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
BEGIN
execute dbo.sp_executesql @statement = N'CREATE FUNCTION [dbo].[ExplodeDates](@startdate datetime, @enddate datetime)
returns table as
return (
with 
 N0 as (SELECT 1 as n UNION ALL SELECT 1)
,N1 as (SELECT 1 as n FROM N0 t1, N0 t2)
,N2 as (SELECT 1 as n FROM N1 t1, N1 t2)
,N3 as (SELECT 1 as n FROM N2 t1, N2 t2)
,N4 as (SELECT 1 as n FROM N3 t1, N3 t2)
,N5 as (SELECT 1 as n FROM N4 t1, N4 t2)
,N6 as (SELECT 1 as n FROM N5 t1, N5 t2)
,nums as (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as num FROM N6)
SELECT DATEADD(day,num-1,@startdate) as thedate
FROM nums
WHERE num <= DATEDIFF(day,@startdate,@enddate) + 1
);' 
END

GO

SELECT thedate AS Date
INTO #CALENDAR
FROM
(
    SELECT *
    FROM Sample.dbo.ExplodeDates('20120101','20120103') as d
) X
GO

CREATE INDEX D ON #CALENDAR(Date)
GO

CREATE TABLE #TEMP(StartDate datetime, A varchar(50), B varchar(50), Value int)

INSERT INTO #TEMP VALUES('2012-01-01', 'A1', 'A1B1', 10)
INSERT INTO #TEMP VALUES('2012-01-02', 'A1', 'A1B2', 10)
INSERT INTO #TEMP VALUES('2012-01-02', 'A2', 'A2B2', 100)

-- SELECT all traffic values
SELECT Date, A, B, Value
FROM
(
  SELECT StartDate, A, B, Value
  FROM #TEMP
) X
RIGHT OUTER JOIN #CALENDAR
ON Date = StartDate
ORDER BY A, B, Date

DROP TABLE #CALENDAR
DROP TABLE #TEMP
GO 
```

它现在给我的输出：

```
2012-01-03 00:00:00.000 NULL    NULL    NULL
2012-01-01 00:00:00.000 A1  A1B1    10
2012-01-02 00:00:00.000 A1  A1B2    14
2012-01-02 00:00:00.000 A2  A2B2    100 
```

我想要的输出：

```
2012-01-01 00:00:00.000 A1  A1B1    0
2012-01-02 00:00:00.000 A1  A1B1    10
2012-01-03 00:00:00.000 A1  A1B1    0
2012-01-01 00:00:00.000 A1  A1B1    10
2012-01-02 00:00:00.000 A1  A1B2    14
2012-01-03 00:00:00.000 A1  A1B2    0
2012-01-01 00:00:00.000 A2  A2B2    0
2012-01-02 00:00:00.000 A2  A2B2    100
2012-01-03 00:00:00.000 A2  A2B2    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:09:50.327

要使 Value 列包含值 0 而不是 NULL，请使用：

```
SELECT Date, A, B, ISNULL(Value,0)
FROM
(
      SELECT StartDate, A, B, Value
      FROM Sample.dbo.Values
) X
RIGHT OUTER JOIN #CALENDAR
    ON Date = StartDate
ORDER BY Date 
```

同样，您可以使 A 和 B 列包含 A1 和 B1，如下所示：

```
SELECT Date, ISNULL(A,'A1'), ISNULL(B,'B1'), ISNULL(Value,0)
FROM
(
      SELECT StartDate, A, B, Value
      FROM Sample.dbo.Values
) X
RIGHT OUTER JOIN #CALENDAR
    ON Date = StartDate
ORDER BY Date 
```

如果 A 和 B 有其他值，这是否足够好从问题中不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:20:35.177

```
select 
    b.date, 
    a.A, 
    a.B, 
    case 
      when a.date = b.date then a.value 
      else 0 
    end as Value
from #temp a 
cross join #calendar b
-- where b.date between -- as calendar filter 
```

这不是我没有测试过的典型交叉连接的例子，但会在 sec 中进行：D

# android - NetworkInfo TYPE_MOBILE_MMS 功能

> ID：14395340
> 
> 赞同：1
> 
> 时间：2013-01-18T08:55:03.370
> 
> 标签：android, mms, connectivity

我想使用库存彩信源发送彩信。在更多解释之前，我想说它确实适用于某些 android 版本，但 4.0.3 和 4.0.4。

在我的服务中，我要求设备使用以下代码启用彩信网络功能：

```
createWakeLock();

int result = mConnMgr.startUsingNetworkFeature(ConnectivityManager.TYPE_MOBILE, PhoneEx.FEATURE_ENABLE_MMS);

Log.v(TAG, "beginMmsConnectivity: result=" + result);

switch (result) {
    case PhoneEx.APN_ALREADY_ACTIVE:
    case PhoneEx.APN_REQUEST_STARTED:
        acquireWakeLock();
        return result;
}

throw new IOException("Cannot establish MMS connectivity"); 
```

在某些设备上（运行 4.0.3 的 Xperia T），它会抛出异常，因为`result`equals `PhoneEx.APN_TYPE_NOT_AVAILABLE`。彩信在我的手机设置中启用，我可以使用股票彩信应用程序发送一个。

在其他设备上（运行 4.0.4 的 HTC Desire S），问题位于更远的位置，在`ConnectivityBroadcastReceiver`. 这是我的代码：

```
private class ConnectivityBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(final Context context, Intent intent) {
        String action = intent.getAction();

        mNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        mOtherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

        networkAttempt++;

        if (networkAttempt < APN_RETRY_ATTEMPTS) {
            // Check availability of the mobile network.
            if ((mNetworkInfo == null) || (mNetworkInfo.getType() != ConnectivityManager.TYPE_MOBILE_MMS)) {
                // ERROR is located here, it returns TYPE_MOBILE :s
                Log.v(TAG, "   type is not TYPE_MOBILE_MMS, bail");
                return;
            }
        }
        ... 
```

正如你在评论中看到的，`mNetworkInfo.getType()`返回`TYPE_MOBILE`但我期望`TYPE_MOBILE_MMS`.

所以，我的问题如下：我做错了吗？或者，还有其他方法吗？

Ps：它适用于运行Android 2.3到3.2和4.1及更高版本的设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:44:52.210

它出现在某些设备上，对于某些提供商，TYPE_MOBILE 不是默认的 MMS 网关，您必须使用另一个。这是我发现解决我的问题的解决方案。

我希望这可以帮助别人。

```
// Take a wake lock so we don't fall asleep before the message is downloaded.
createWakeLock();

// Let's try every type
int result = -1;
int[] apnTypes = new int[] {ConnectivityManager.TYPE_MOBILE, ConnectivityManager.TYPE_MOBILE_MMS, ConnectivityManager.TYPE_MOBILE_DUN, ConnectivityManager.TYPE_MOBILE_HIPRI, ConnectivityManager.TYPE_MOBILE_SUPL};
for (int i=0; i<apnTypes.length; i++)
{
    result = mConnMgr.startUsingNetworkFeature(apnTypes[i], PhoneEx.FEATURE_ENABLE_MMS);
    Log.v(TAG, "beginMmsConnectivity: result=" + result);
    switch (result)
    {
        case PhoneEx.APN_ALREADY_ACTIVE:
        case PhoneEx.APN_REQUEST_STARTED:
            acquireWakeLock();
            return result;
    }
}

// None found
throw new IOException("Cannot establish MMS connectivity"); 
```

# jquery - 如何通过JQUERY/AJAX传递不确定数量的php变量

> ID：14395346
> 
> 赞同：2
> 
> 时间：2013-01-18T08:55:13.213
> 
> 标签：jquery

请看一下这个 PHP 脚本（sendingpage.php）：

```
$i=1;

While(whatever){

echo "<input id='ref".$i."' type='hidden' value='".$variable."' />";
echo "<input id='ref2".$i."' type='hidden' value='".$variable2."' />";
$i++;

} 
```

现在，我要做的是使用 JQUERY AJAX 方法将所有值传递到另一个 php 页面（receivingpage.php），并在接收页面.php 中处理接收到的数据后，将结果加载到我的 sendpage.php 中。请注意，我不知道该脚本将生成多少个 cicle，也不知道 $variable 和 $variable2 将在每个 cicle 处保存哪些值。

我想我可以完成所有最终加载的事情，但是我遇到麻烦的地方是使用 AJAX/JQUERY 将所有值从 send.php 传递到接收.php

我希望你们中的任何人为我阐明一下。我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:57:06.370

如果这是在 a 中，`<form>`那么您可以使用`serialize`函数将其作为数据传递给 ajax 调用。喜欢

```
$.ajax({
     type :'POST',
     data:$('#formId').serialize();
     ...so on
}) 
```

还建议将类型设置为 post，因为它允许您将其作为 post 请求发送，并将发送请求中的所有表单字段。

# caching - Haskell：部分删除惰性评估结果

> ID：14395347
> 
> 赞同：8
> 
> 时间：2013-01-18T08:55:14.307
> 
> 标签：caching, haskell, lazy-evaluation

我有一个非常大的决策树。它的用法如下：

```
-- once per application start
t :: Tree
t = buildDecisionTree
-- done several times
makeDecision :: Something -> Decision
makeDecision something = search t something 
```

此决策树太大而无法放入内存。但是，由于惰性评估，它只被部分评估。

问题是，在某些情况下会尝试所有可能的决策，从而导致对整个树进行评估。这不会终止，但也不应该导致内存溢出。此外，如果此过程中止，内存使用量不会减少，因为仍然已经评估了一个巨大的子树。

一种解决方案是每次`makeDecision`调用时都重新评估树，但这会失去缓存决策的好处并显着减慢`makeDecision`.

我想参加中级课程。特别是在我的应用程序中，使用树中的公共路径前缀进行连续决策是很常见的。所以我想缓存最后使用的路径，但删除其他路径，使它们在下次使用时重新评估。我怎样才能在 Haskell 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:32:54.643

在纯 Haskell 中是不可能的，请参阅问题[Can a thunk be duplicated to raise memory performance？](https://stackoverflow.com/questions/11675807/can-a-thunk-be-duplicated-to-improve-memory-performance)（正如@shang 所指出的）。但是，您可以使用 IO 执行此操作。

我们从模块头开始，只列出应该使这个模块（将使用 unsafePerformIO）安全的类型和函数。也可以在没有 unsafePerformIO 的情况下执行此操作，但这意味着用户必须将更多代码保留在 IO 中。

```
{-# LANGUAGE ExistentialQuantification #-}
module ReEval (ReEval, newReEval, readReEval, resetReEval) where

import Data.IORef
import System.IO.Unsafe 
```

我们首先定义一种数据类型，该数据类型以防止所有共享的方式存储值，方法是使函数和参数彼此远离，并且仅在我们需要该值时应用该函数。请注意，返回的值`unsharedValue` *可以*共享，但不能与其他调用的返回值共享（假设函数正在做一些不平凡的事情）：

```
data Unshared a = forall b. Unshared (b -> a) b

unsharedValue :: Unshared a -> a
unsharedValue (Unshared f x) = f x 
```

现在我们定义可重置计算的数据类型。我们需要存储计算和当前值。后者存储在 中`IORef`，因为我们希望能够重置它。

```
data ReEval a = ReEval {
    calculation :: Unshared a,
    currentValue :: IORef a
    } 
```

要将一个值包装在一个`ReEval`盒子中，我们需要一个函数和一个参数。为什么不只是`a -> ReEval a`？因为那样就没有办法阻止参数被共享。

```
newReEval :: (b -> a) -> b -> ReEval a
newReEval f x = unsafePerformIO $ do
    let c = Unshared f x
    ref <- newIORef (unsharedValue c)
    return $ ReEval c ref 
```

阅读很简单：只需从`IORef`. 这种使用`unsafePerformIO`是安全的，因为我们总是会得到 的值`unsharedValue c`，尽管它是不同的“副本”。

```
readReEval :: ReEval a -> a
readReEval r = unsafePerformIO $ readIORef (currentValue r) 
```

最后是重置。我将它留在 IO monad 中，不是因为它比其他要包装的函数更安全`unsafePerformIO`，而是因为这是让用户控制*何时*实际发生重置的最简单方法。您不想冒这样的风险，`resetReEval`因为没有返回值可供使用，所以您的所有调用都会被延迟延迟，直到您的内存用完甚至优化掉。

```
resetReEval :: ReEval a -> IO ()
resetReEval r = writeIORef (currentValue r) (unsharedValue (calculation r)) 
```

这是模块的结尾。这是示例代码：

```
import Debug.Trace
import ReEval
main = do
    let func a = trace ("func " ++ show a) negate a
    let l = [ newReEval func n | n <- [1..5] ]
    print (map readReEval l)
    print (map readReEval l)
    mapM_ resetReEval l
    print (map readReEval l) 
```

在这里你可以看到它做了预期的事情：

```
$ runhaskell test.hs 
func 1
func 2
func 3
func 4
func 5
[-1,-2,-3,-4,-5]
[-1,-2,-3,-4,-5]
func 1
func 2
func 3
func 4
func 5
[-1,-2,-3,-4,-5] 
```

# wpf - wpf数据模板绑定（动态生成表单）

> ID：14395349
> 
> 赞同：2
> 
> 时间：2013-01-18T08:55:18.643
> 
> 标签：wpf, data-binding

我想在`WPF`. 我想用**XAML来做**而不是来自后面的代码（我目前正在做的）。

如果我有一个像下面这样的**数据模板**，我可以使用的父控制器是什么。（就像我们使用的一样`Listbox`）

我有如下数据模板

```
<DataTemplate x:Key="FieldTemlate">
       <TextBlock HorizontalAlignment="Left"  VerticalAlignment="Top" />
       <TextBox  VerticalAlignment="Top"  Width="40" />
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:17:25.090

[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)是您所需要的。

在这里你可以找到一个[例子](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)。

# typo3 - Typo3：更多域，相同内容

> ID：14395350
> 
> 赞同：0
> 
> 时间：2013-01-18T08:55:19.360
> 
> 标签：typo3, typoscript

我有一个带有域站点的typo3 安装（我称之为aaa.com）。现在我有一个新域（我称之为 bbb.com），它链接到正确的页面 aaa.com/muster。目标是当我访问 bbb.com 时，网址是这样的：bbb.com/muster 而不是。aaa.com/muster。

任何人都可以修复我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:53:56.360

另一种解决方案：

如果您不想创建一个新页面，那么您也可以使用打字稿来完成，例如：

```
[globalVar=IENV:TYPO3_HOST_ONLY=www.bbb.com]
config.baseURL = http://www.aaa.com/
[end] 
```

或者

```
[globalVar=IENV:TYPO3_HOST_ONLY=www.bbb.com]
page.config.additionalHeaders = Location: http://www.aaa.com/muster
[end] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:34:01.300

在 aaa.com 的页面树之外创建一个新页面，并在该页面中添加一个域记录，其 url: domain - [http://bbb.com](http://bbb.com)。然后在“重定向到：”字段中输入[http://aaa.com/muster](http://aaa.com/muster)。

# android - Android线程有时不启动

> ID：14395353
> 
> 赞同：2
> 
> 时间：2013-01-18T08:55:32.607
> 
> 标签：android, multithreading, thread-synchronization

我必须在 Android 项目中使用 Thread。有时，它可以正常工作，但有时不能；它不启动（不调用 SendToServer() 方法）或它启动但在线程未完成之前突然返回到另一个函数（返回更新；行）。

注意：影响值大于 0，它给出条件，它转到 if 语句。

这是我的代码示例；

```
public static Boolean MyUpdateFunction(MyObject myobject){

Boolean updated=false;
//Code for updating local database

int affected= SqliteDb.update(....);

if(affected>0)
{
    //Send updated data to server
    //For this I must use Thread(I can't use AsyncThread)
    updated=true;
    SendToServer();

}

return updated;
}

public static void SendToServer()

{
    try{
        ;
        Thread th=new Thread(new Runnable() {

        public void run() {
            try {

                //Create data and send it to server
                //.......
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
    th.start();
    th.join();

}
catch(SQLException e)
{
    Toast.makeText(myContext,"ERROR: "+e.getMessage(), Toast.LENGTH_LONG).show();
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:05:02.337

其他人是正确的，因为 AsyncTask 是前进的方向，但是由于您所遇到的直接问题是这样的（因此，我建议阅读线程的工作原理）：

当您启动线程时，它会开始一个新进程。UI 线程（通常是您的大部分代码所在的位置）继续。因此，您的代码**将**使用 触发线程`SendToServer()`，然后根据定义将立即触发`return updated`，因为 UI 线程立即转到下一行。

您需要的是来自线程的回调，它在`onPostExecute()`AsyncTask 的方法中处理。有一个关于如何使用它们以及它们在[这里做什么的很好的教程](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

**编辑：** 我刚刚从上面的评论中看到你不能使用 Asynctasks，这很公平，但你仍然需要从你的 Thread 触发一个回调/事件来返回任何结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:01:32.717

您可以使用 AsyncTasks，而不是使用线程和变量（已更新和受影响）：请参阅：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

使用 AsyncTask，您有一些方法可以完全按照您的意愿进行操作：

*   预执行
*   做背景
*   后执行

因此，您可以做的是在 onPreExecute 中检查您的条件，然后在 doInBackground 中执行您的 SendToServer 并在 onPostExecute 中执行您需要的操作。

# pcap - pcap - 不适用于特定接口

> ID：14395354
> 
> 赞同：1
> 
> 时间：2013-01-18T08:55:33.827
> 
> 标签：pcap, tcpdump

我在我的应用程序中使用了 pcap 库。它以前工作过。

我没有对我的代码进行任何更改，但未能仅在特定接口“eth0”上捕获数据包。但对于 eth1 和 wlan0 等其他接口，它按预期工作。

Ifconfig 命令的输出是：

```
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.1.14.128  netmask 255.255.255.0  broadcast 10.1.14.255
        inet6 fe80::5642:49ff:fee1:3a03  prefixlen 64  scopeid 0x20<link>
        ether 54:42:49:e1:3a:03  txqueuelen 1000  (Ethernet)
        RX packets 476  bytes 53618 (52.3 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 365  bytes 61306 (59.8 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 18  

eth1: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet6 fe80::280:c8ff:fe3c:fe04  prefixlen 64  scopeid 0x20<link>
        ether 00:80:c8:3c:fe:04  txqueuelen 1000  (Ethernet)
        RX packets 34500  bytes 48274193 (46.0 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 1732834 (1.6 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 16436
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 0  (Local Loopback)
        RX packets 10775  bytes 1170782 (1.1 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 10775  bytes 1170782 (1.1 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlan0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 134.96.174.7  netmask 255.255.248.0  broadcast 134.96.175.255
        inet6 fe80::226:c7ff:fe9d:1f00  prefixlen 64  scopeid 0x20<link>
        ether 00:26:c7:9d:1f:00  txqueuelen 1000  (Ethernet)
        RX packets 981018  bytes 1250676710 (1.1 GiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 248507  bytes 31718095 (30.2 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0 
```

这些标志ID（所有人都一样）与我的问题有什么关系吗？

最好的 yash

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:58:41.230

您的接口驱动程序需要支持将 iface 置于[混杂模式](http://en.wikipedia.org/wiki/Promiscuous_mode)以收集不直接发送到您的 NIC 的数据包。

# powerbuilder - PowerBuilder 中的短信服务

> ID：14395357
> 
> 赞同：0
> 
> 时间：2013-01-18T08:55:43.397
> 
> 标签：powerbuilder

我们有一个 PowerBuilder 11.5 中的应用程序，我们必须在我们的应用程序中实现短消息服务。

为了满足这个要求，我们需要具备哪些东西？

我在 2009 年初左右在谷歌搜索，我得到了一个使用 WSDL 在一个站点中启用的免费短信服务，我还为我们的 PBL 部署了代理对象，那时它正在工作。但现在它不起作用..

例如，我有一个站点 Jawalbsms 或 way2sms（短信站点），我如何从这里获取该 WSDL 文件，或者我们如何为这些站点创建 wsdl 文件。

问候， 安巴特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:20:32.783

您通常从运行服务的公司获得 WSDL。WSDL 通常与`targetNamespace`. 例如[http://example.com/wsdl/MyService.wsdl](http://example.com/wsdl/MyService.wsdl). 这只是让人们获取 WSDL 的常用方法。该 URI 处不需要任何内容​​。您提供的网站通过向发送短信的人展示广告来赚钱。我认为他们不会让您从程序中发送消息。任何免费服务的一个问题是免费服务很容易在没有警告的情况下消失。如果您的程序用于商业用途，我建议您寻找付费服务。如果您的程序供您自己使用或帮助他人，您必须做出决定，您的程序是否可以在没有警告的情况下停止工作，直到您可以找到其他服务。此外，您应该考虑寻找另一项服务的时间价值。就我自己而言，几年前我做出决定，免费电子邮件服务和免费网络托管比我从中获得的价值更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T19:50:25.057

也许现在你可能得到了我不知道的免费服务提供商的服务提供商，但你肯定会从供应商那里得到 api。

我真的不明白您正在寻找供应商或如何从 PowerBuilder 应用程序发送 SMS。我在雅虎 PB 论坛上发布了这个，但现在我有一点改进的代码，我为 Mvayoo 和 SMS Country 定制了它。

# c# - 在windows窗体中更改dataGridview中滚动条的颜色

> ID：14395358
> 
> 赞同：0
> 
> 时间：2013-01-18T08:55:48.973
> 
> 标签：c#, winforms

我正在使用我使用过 DataGridView 的 windows 窗体，现在我想更改这些滚动条的颜色。我在 CodeProject 上也有一个解决方案，但它不起作用。我使用的代码如下

`foreach (Control child in DataGridview1.Controls) { child.Enabled = true; child.IsAccessible = true; child.ForeColor = Color.Red; child.BackColor = Color.Green; child.Width = 5; }`

但它不会改变滚动条的颜色。

我没有得到其他需要做的事情。还有其他方法可以做到这一点。

# windows - 本地主机 WAMP Windows 中的 Codeigniter

> ID：14395360
> 
> 赞同：0
> 
> 时间：2013-01-18T08:55:58.720
> 
> 标签：windows, codeigniter, localhost, wamp

我尝试在带有 WAMP 的 localhost 中使用 Codeigniter。问题是，我只能在基本控制器中打开基本功能，当我尝试使用像站点/控制器/功能这样的 root 时，它不起作用。结果是它让我回到了 wamp 起始页面，或者找不到该页面的文本。

大多数情况下，我找到了有关制作 .htaccess 文件的解决方案，以及在其中放入的许多变体。在 wamp .conf 文件中取消注释 rewrtie mod。并在我的网页中将 index_page 留空。

但它对我不起作用。

我的控制器：

```
class Home extends CI_Controller {

    function index() {

            $this->load->view('index');
            }

    function slide() {

            $this->load->view('slider');
            }
 } 
```

我的网页位于：www/mysite/....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:57:43.180

试试这个`.htaccess`

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond $1 !^(index\.php|indexcp\.php?|resources|robots\.txt)
RewriteRule ^([A-Za-z0-9_/.-]+)$ index.php?$1 

RewriteRule ^(CSI) index.php?/CSI
AddType text/x-component .htc 
```

**编辑**

在此处添加上述代码

![在此处输入图像描述](../Images/50a3417cdc646e2dad78725ac13a5fab.png)

不要改变任何东西在`CI system`..

一旦检查这个[repo](https://github.com/mrsrinivas/ci_template)

# javascript - Safari 中的弹出窗口

> ID：14395363
> 
> 赞同：0
> 
> 时间：2013-01-18T08:56:18.500
> 
> 标签：javascript

当我尝试在 Safari 中打开一个弹出窗口时

```
var win = window.open(pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left); 
```

它作为新选项卡打开，而不是具有适当大小的弹出窗口。有边界很重要，否则布局就不好了。

任何想法为什么 Mac 上的 Safari 不允许弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T00:45:56.950

Safari 仅允许在用户交互时弹出窗口。如果您正在等待其他代码执行，则必须在单击时打开一个新窗口，然后在代码准备好后更改该窗口的属性：

```
var win;
$("#test-modal1").on("click",function(){
    win = window.open("", title, 'toolbar=no, location=no...')
});

// ...other code
// ...when ready, you assign a pageURL to the same window.

win = window.open(pageURL); 
```

# .net - 在 Web 引用的情况下增加 SOAP 消息大小

> ID：14395367
> 
> 赞同：1
> 
> 时间：2013-01-18T08:56:35.713
> 
> 标签：.net, wcf, .net-1.1, web-reference

我有一个 WCF 肥皂服务和一个 .net 1.1 项目。

.net 1.1 项目通过 Web 引用调用服务 (.svc)。理想情况下，这应该是一个服务参考，但对于兼容性问题，它必须是这样的。

问题是我的消息可能会变得非常大，我需要增加消息大小。在“添加服务参考”的情况下，我会更改客户端 web.config 中的一些参数，但我的 Web 参考无法做到这一点。

如何增加允许的肥皂消息大小？

这是异常消息：“请求失败，HTTP 状态 400：错误请求。” 一旦超过特定大小，就会抛出异常。

# php - .htaccess 带有 1 或 2 个 GET 参数

> ID：14395374
> 
> 赞同：1
> 
> 时间：2013-01-18T08:57:02.750
> 
> 标签：php, .htaccess

我想在我的`.htaccess`：

*   我希望所有的 PHP 文件都可以通过访问来工作，`/index`而不必放在`.php`后面。

我用了：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

*   我有一个`index.php`页面，有时有 1 个 GET 参数，有时有 2 个：

    *   www.domain.com/?first=data

    *   www.domain.com/?first=data&second=data2

我用了：

```
RewriteRule ^(.*)/(.*)$ index.php?id=$1&p=$2
RewriteRule ^(.*)$  index.php?id=$1 [L] 
```

但只有当我有两个元素时它才有效；如果我只使用第一个参数的链接，我会得到一个错误页面。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:07:56.103

希望能帮助到你：

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^(member)-([0-9-]+)$ index.php?action=member&id=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([a-zA-Z-]+)-([0-9-]+)$ index.php?action=$1&saction=$2&sid=$3 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([0-9-]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^([0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/(.*).html$ index.php?action=details&id=$1&p1=$2&p2=$3&p3=$4 [NC,L] 
```

# c# - 如何使用 keybd_event 模拟 Ctrl A + Ctrl C

> ID：14395377
> 
> 赞同：5
> 
> 时间：2013-01-18T08:57:07.007
> 
> 标签：c#, keyboard-events

如何模拟`Ctrl`- `A`+ `Ctrl`-`C`使用`keybd_event`？

因为我在 webbrowser 表单上模拟 ctrl a + ctrl c 来复制剪贴板上的全部内容。我使用了 SendKeys.SendWait 但它没有复制全部内容！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T10:10:37.647

这应该工作

```
[DllImport("user32.dll", SetLastError = true)]
static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

public const int KEYEVENTF_KEYDOWN = 0x0000; // New definition
public const int KEYEVENTF_EXTENDEDKEY = 0x0001; //Key down flag
public const int KEYEVENTF_KEYUP = 0x0002; //Key up flag
public const int VK_LCONTROL = 0xA2; //Left Control key code
public const int A = 0x41; //A key code
public const int C = 0x43; //C key code

public static void PressKeys()
{
    // Hold Control down and press A
    keybd_event(VK_LCONTROL, 0, KEYEVENTF_KEYDOWN, 0);
    keybd_event(A, 0, KEYEVENTF_KEYDOWN, 0);
    keybd_event(A, 0, KEYEVENTF_KEYUP, 0);
    keybd_event(VK_LCONTROL, 0, KEYEVENTF_KEYUP, 0);

    // Hold Control down and press C
    keybd_event(VK_LCONTROL, 0, KEYEVENTF_KEYDOWN, 0);
    keybd_event(C, 0, KEYEVENTF_KEYDOWN, 0);
    keybd_event(C, 0, KEYEVENTF_KEYUP, 0);
    keybd_event(VK_LCONTROL, 0, KEYEVENTF_KEYUP, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:21:05.123

您可以触发 Cntrl-A + Cntrl-C 事件，对吗？但由于某种原因，您没有将所有网页文本复制到剪贴板？

我对进行 Cntrl-A + Cntrl-C 事件知之甚少，我也不清楚你想做什么，但我尽了最大努力，想出了一些抓住所有文本的东西从网页中复制到按钮单击事件的剪贴板...（现在显然你会想要使用你的 Cntrl-A + Cntrl-C）。同样出于调试目的，我将剪贴板文本放在 .txt 文件中，以便您仔细检查。

我也在使用 HTML Agility Pack。你可以从[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

**代码**

```
 private void btnClip_Click(object sender, EventArgs e)
    {
        string address = "http://animalrights.about.com/";
        string text = "";

        // Retrieve resource as a stream
        Stream data = client.OpenRead(new Uri(address)); //client here is a WebClient

        //create document
        HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
        document.Load(data);

        //receive all the text fields
        foreach (HtmlNode node in document.DocumentNode.SelectNodes("//child::p"))
        {
            text += node.InnerText + "\n\n";
        }

        Clipboard.SetText(text);
        string path = @"C:\Users\David\Documents\Visual Studio 2012\Projects\CopyToClipBoard\CopyToClipBoard\bin\MyTest.txt";

        // Delete the file if it exists.
        if (File.Exists(path))
        {
            File.Delete(path);
        }

        // Create the file.
        using (FileStream fs = File.Create(path, 1024))
        {
            Byte[] info = new UTF8Encoding(true).GetBytes(text);

            // Add some information to the file.
            fs.Write(info, 0, info.Length);
        }

        //destroy data object
        data.Close();
        data.Dispose();
    } 
```

打开记事本查看文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T19:16:50.810

Windows 输入模拟器让这变得超级简单。

> Windows Input Simulator 提供了一个简单的 .NET (C#) 接口来使用 Win32 SendInput 方法模拟键盘或鼠标输入。所有的互操作都是为您完成的，并且有一个用于发送多个击键的简单编程模型。

Nuget 包 -> 安装包 InputSimulator

[https://inputsimulator.codeplex.com/](https://inputsimulator.codeplex.com/)

# javascript - 使用 innerhtml 填充下拉列表

> ID：14395379
> 
> 赞同：0
> 
> 时间：2013-01-18T08:57:25.903
> 
> 标签：javascript

我正在开发一个自动完成文本框，它以文本框下方的下拉形式显示搜索结果。

```
document.getElementById(elementId).innerHTML = response 
```

上面的行在**Firefox**中使用值填充下拉列表，但在**IE**下拉列表中不显示任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:16:40.637

尝试将跨度 ID 更改为元素 ID

改变这个`getRequest('ajax.jsp?id='+this.value,'useeme','loading.gif',event);`

# android - 如何在 RealtiveLayout 中使 ToggleButton 和 ImageButton 的高度相同？

> ID：14395380
> 
> 赞同：2
> 
> 时间：2013-01-18T08:57:30.550
> 
> 标签：android, layout, button, alignment, togglebutton

我有一个`RelativeLayout`with one `ImageButton`， one`ToggleButton`和其他一些控件。两个按钮都在 RelativeLayout 的右侧对齐。我希望它们具有相同的高度。这是我的布局xml：

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="5dip"
    android:paddingRight="5dip"
    android:paddingBottom="10dip" >

    <ImageButton
        android:id="@+id/imageButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/copy"
        android:layout_alignParentRight="true" />

    <ToggleButton
        android:id="@+id/buttonView"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:textOn="Hide"
        android:textOff="View" 
        android:layout_toLeftOf="@id/imageButton" 
        android:layout_alignTop="@id/imageButton"
        android:layout_alignBottom="@id/imageButton" />

    <!-- ... other controls ... -->
</RelativeLayout> 
```

我尝试设置`layout_height="0dip"`和使用`layout_alignTop`并使`layout_alignBottom`ToggleButton 具有与 ImageButton 相同的高度，但这不起作用：

![在此处输入图像描述](../Images/6d9cbc5b3b5211be0135bf897d6971fc.png)

如您所见，ToggleButton 对齐不正确，它总是比 ImageButton 高一点。我究竟做错了什么？

*在 Android 2.3 上测试*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:02:59.533

试试这样。。

```
 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="10dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" >

    <ImageButton
        android:id="@+id/imageButton"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_launcher" />

    <ToggleButton
        android:id="@+id/buttonView"
        android:layout_width="55dp"
        android:layout_height="54dp"
        android:layout_alignTop="@id/imageButton"
        android:layout_toLeftOf="@+id/imageButton"
        android:textOff="View"
        android:textOn="Hide" />

    <!-- ... other controls ... -->
</RelativeLayout> 
```

切换按钮的高度将比图像按钮高一点，您必须增加图像按钮的宽度和高度，这将是完美的，使用相同的宽度和高度，您会发现差异很小

![在此处输入图像描述](../Images/c21c09dc9958d53d3825b0323010aa0b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:58:44.897

改成

```
<ImageButton
    android:id="@+id/imageButton"
    android:layout_height="150dp"//some height
    ...

<ToggleButton
    android:id="@+id/buttonView"
    android:layout_height="150dp"//same height as above 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:05:48.320

1.  有一个水平`LinearLayout`作为 the 的子元素，`RelativeLayout`并添加`ToggleButton`and `ImageView`到它。
2.  为`ToggleButton`集`android:layout_height="match_parent"`。

**编辑：**
这是工作代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="5dip"
    android:paddingRight="5dip"
    android:paddingBottom="10dip" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ToggleButton
            android:id="@+id/buttonView"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:textOff="View"
            android:textOn="Hide" />

        <ImageButton
            android:id="@+id/imageButton"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:src="@drawable/copy" />
    </LinearLayout>
</RelativeLayout> 
```

**编辑2：**

明白你的问题。上面的代码*似乎*只适用于 Android 4.0，默认 Holo 主题。

在 Android 2.3 上，在默认主题中，样式`ImageButton`指定背景为[`btn_default_normal`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_default_normal.9.png)，其中最上面一行像素是透明的。而`ToggleButton`同一主题的背景使用[`btn_default_small_normal`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_default_small_normal.9.png)，在顶行具有不透明像素。（单击链接自行检查。）

因此，当放置在 a 旁边时`ToggleButton`，它们的高度*似乎不同。*

# php - HTML 中的 PHP 和 SQL 表

> ID：14395383
> 
> 赞同：0
> 
> 时间：2013-01-18T08:57:35.200
> 
> 标签：php, html, css

我正在尝试找到一种方法以这种方式在 HTML 中显示来自 SQL 的表，如下面的 html 部分所示：

**html**

```
 <table>
    <tr>
    <td><a><img src="" width=135 height=100/></a></td>
    <td><a><h2>Title</h2></a><p>DDMMYY</p><p>Description</p></td>
    </tr>
 </table> 
```

我当前的脚本只在一行中输出结果，如下所示：

**PHP**

```
<?php    
    $stmt = $db->prepare('SELECT title, tag, desc FROM Tbl1;'); 
    $stmt->execute();
    $res = $stmt->fetchAll(PDO::FETCH_ASSOC);

    echo "<table>";
    foreach($res AS $val) {
        echo "<tr>";
        foreach($val AS $val1) {
            echo "<td>$val1</td>";
        }
        echo "</tr>";
    }
    echo "</table>";
    $db = null;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:05:48.427

```
$stmt = $db->prepare('SELECT title, tag, `desc` FROM Tbl1;');
$stmt->execute();
$results = $stmt->fetchAll(PDO::FETCH_ASSOC));
echo '<table>';
for($results as $row) {
    echo '<tr>';
    echo '<td>' . $row['imagefield'] . '</td>';
    echo '<td style="text-align: right">' . $row['description'] . '<br />' . $text . '</td>';
    // etc...
    echo '</tr>';
}
echo '</table>'; 
```

这段代码没有理由不显示有效的表格。

# xtext - Xtext Xbase JvmTypesBuilder 仅生成最终参数

> ID：14395395
> 
> 赞同：1
> 
> 时间：2013-01-18T08:58:16.703
> 
> 标签：xtext, xtend, xbase

我正在尝试使用 Xtend Xbase API 生成一个简单的 Java 数学。这是 Xtend 代码。

```
 var jvmMethod = element.toMethod("fromSap",element.newTypeRef(element.dtoFullName))[
    var jvmTypeReference= fromSap.sapType;
    var param = toParameter("sapOb",jvmTypeReference)
    parameters+=param
    body = ['''....''')] 
```

除了具有最终修饰符的参数外，一切正常。这是生成的代码：

```
 public class DTOTest {
     public DTOTest fromSap(final String sapOb) {
    DTOTest result = new DTOTest();
    return result;   
  }
} 
```

我试图添加：

```
param.setFinal(false); 
```

但我得到了

```
This expression is not allowed in this context, since it doesn't cause any side effects. 
```

在编译时

有人可以帮我从生成的代码中删除 final 修饰符吗？

戴维德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:06:35.420

方法参数在您的方法中包含的表达式的链接/作用域中被认为是最终的。如果参数不是最终的，则不能在 lambda 表达式中使用它们。不幸的是，反射 API (java.lang.reflect) 中没有参数的“最终”方法。因此，不能公开任何属性“isFinal”，但我们只是在内部将它们标记为这样。

错误消息“此表达式在此上下文中是不允许的，因为它不会导致任何副作用。” 虽然是误导。它可能掩盖了没有这种方法的真正错误`JvmFormalParameter.setFinal(boolean)`。

# spring - 如何组合依赖不同 Spring 版本的 Spring 库？

> ID：14395396
> 
> 赞同：1
> 
> 时间：2013-01-18T08:58:21.980
> 
> 标签：spring, maven, dependency-management

我想在 Maven 项目中同时使用 spring-amqp 和 spring-data-mongodb。Spring-amqp 依赖于 Spring 3.0.7，而 spring-data-mongodb 依赖于 Spring 3.1.2。最终结果是我的依赖树中有 Spring 3.0.7 和 3.1.2 的包，这似乎会导致运行时出现问题。

我应该如何解决这个问题？为 spring-amqp 和 spring-data-mongodb 的所有传递依赖项手动添加具有特定版本的直接依赖项到我的项目？重新编译一个或两个以依赖于一个常见的 Spring 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:00:36.060

看看POM 的[dependencyManagement](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)部分。一旦您在那里指定了工件版本，maven 就会被迫在该模块中使用它们并且它是子模块。

# node.js - 如何在 MongoDB 中为共同的朋友建模

> ID：14395397
> 
> 赞同：1
> 
> 时间：2013-01-18T08:58:35.247
> 
> 标签：node.js, mongodb, hadoop, mapreduce, database

我们需要为每个列表显示共同的 Facebook 朋友（类似于 airbnb 所做的）。我们不需要朋友查询，只显示每个列表的相互联系。这在关系数据库中相对简单，但我有点坚持在 MongoDB 中实现它的最佳方法。在登录用户和列表所有者之间查询共同朋友的最佳方式是什么？我应该在查询列表后使用 foreach 循环单独查询每个列表，还是有办法一次性查询列表和共同的朋友？

我拥有的当前架构是：

```
Listing: {
   user_id: object id,
   ...
}

User: {
      _id: object id,
      friends: [{facebook_id: string, name: string}]
      ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:47:42.417

据我了解这个问题，在关系世界中你需要一个简单的内部连接，对吧？您将一个用户的朋友与另一个用户进行内部连接，并获得共同的朋友。这看起来很简单，也很容易，但实际上，这是一项代价高昂的操作，它并不比在 Mongo 中运行自定义 Map/Reduce 并获得相同的数据更好。内部操作将是相同的：只需与 id 列表相交。由于我目前对 Map/Reduce 不是很好，所以我不会发布示例。我个人只会将两个用户的朋友加载到内存中并在那里相交。这应该不会差很多，然后在 RDBMS 中进行内部联接。

# java - Nexus 7 4.2 上的 Android Java 日历日期 WEEK_OF_YEAR 问题

> ID：14395398
> 
> 赞同：1
> 
> 时间：2013-01-18T08:58:40.540
> 
> 标签：java, android, calendar, nexus-7, android-4.2-jelly-bean

好吧，所以这个难倒我。我有以下代码尝试创建此字符串：

> 输出：52\. 2012（12 月 24 日至 12 月 30 日）

这是 2012 年第 52 周的开始和结束，星期一是一周的第一天。

```
private Date getDateObject() {
    Calendar cld = Calendar.getInstance();
    cld.set(Calendar.YEAR, year);
    cld.set(Calendar.WEEK_OF_YEAR, week);
    cld.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
    return cld.getTime();
}

private Date getEndDateObject() {
    Calendar cld = Calendar.getInstance();

    if (week < 52) {
        cld.set(Calendar.YEAR, year);
        cld.set(Calendar.WEEK_OF_YEAR, week + 1);
    } else {
        cld.set(Calendar.YEAR, year + 1);
        cld.set(Calendar.WEEK_OF_YEAR, 1);
    }

    cld.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
    return cld.getTime();
}

public String getDateRangeString() {
    String pattern = "d MMM";
    SimpleDateFormat formatter = new SimpleDateFormat(pattern); 

    Date startDate = getDateObject();
    Date endDate = getEndDateObject();

    String startDateFormatted = formatter.format(startDate);
    String endDateFormatted = formatter.format(endDate);

    String dateString = "" + this.week + ". " + this.year + " (" + startDateFormatted + " to " + endDateFormatted + ")";
    return dateString;
} 
```

当在 YEAR = 2012 和 WEEK = 52 的对象上使用函数 getDateRangeString 时，会在以下设备上提供以下输出：

*   连结 S - 4.1
*   模拟器 4.1
*   模拟器 4.2

> 输出：52\. 2012（12 月 24 日至 12 月 30 日）

哪个是对的！

但是在运行 4.2.1 的 Nexus 7 上，我得到：

> 输出：52\. 2012（12 月 24 日至 1 月 6 日）

哇！！！！！

所有设备都设置为澳大利亚东部标准时间 +10，并且现在具有正确的时间/日期。我认为这与 4.2 中缺少的 12 月没有任何关系，无论如何应该在 4.2.1 中修复。

当我调试它时，日历说它具有所有正确的值。然后1月6日出来？

我的意思是它很奇怪，因为 12 月 31 日就像是第 53 周或其他什么？我不知道，我只是不明白为什么这个设备有任何不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:00:33.403

好的，首先感谢 Jon Skeet 建议增加 6 天来结束一周以避免各种问题。这绝对是要走的路。

因此，为了将来参考，请避免使用 Java 日历/日期。但是我偶然让我的代码在每个设备/平台上工作。

这是我修改后的代码：

```
private Date getDateObject() {
    Calendar cld = Calendar.getInstance();
    cld.set(Calendar.YEAR, year);
    cld.set(Calendar.WEEK_OF_YEAR, week);
    cld.get(Calendar.DAY_OF_WEEK); // WARNING this line is required to make the code work. Might have something to do with an inner function called complete which gets called on get.
    cld.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
    return cld.getTime();
}

private Date getEndDateObject() {
    Date endDateObject = getDateObject();
    long timeMilliseconds = endDateObject.getTime();
    long sixDaysMilliseconds = 60 * 60 * 24 * 6 * 1000;
    endDateObject.setTime(timeMilliseconds + sixDaysMilliseconds);
    return endDateObject;
} 
```

特别注意线路

```
 cld.get(Calendar.DAY_OF_WEEK); 
```

如果有人可以解释为什么吸气剂会影响日历的输出，那么他们会获得奖励积分。但我很抱歉 WTF.... 我偶然发现这个的唯一原因是我在我的 Log.i 中有一个 get ，然后代码可以在所有设备上运行。然后，当我去清理它并删除我所有的调试和注释代码时，它再次停止工作。所以我最终把它归结为吸气剂。如果我评论指出返回的日期是错误的，更糟糕​​的是.....每次调用日历都会返回相同的日期/时间，即使日志显示它们使用不同的年份和周......所以简而言之，如果可能，请不要使用 Java Date。

但是，如果我使用旧代码，这仍然不能解释为什么 4.2.1 上的 Nexus 7 会返回不同的周末日期。人们可能会假设我的 4.2 模拟器和 Nexus 7 4.2.1 之间存在差异，但这似乎不太可能。

尽管如此，使用 6 天加法似乎是最安全的，并且可以全面发挥作用。

下次我将使用 Joda Time，但我现在没有时间弄清楚如何使用它。

感谢所有提供帮助的人，这在两个方面仍然是一个奇怪的谜团。

*   为什么 getter 会改变 Calendar 函数的输出？我的猜测是它与它声称在内部调用的完整方法有关。但是，即使文档中提到了，我也不能称自己为完整。

*   为什么当日历功能提供完全相同的参数时，nexus 7 4.2.1 的一周与我所有其他设备/模拟器不同。

奇怪的。

# facebook - 喜欢按钮 - 截断的 url .. 特殊情况

> ID：14395407
> 
> 赞同：0
> 
> 时间：2013-01-18T08:59:15.993
> 
> 标签：facebook, url, facebook-like

我在这里找到了一些提示，但都对我没有好处。所以问题是，点击一个赞按钮，弹出窗口有正确的生成链接，但在 facebook 页面上，我只有基本 url。

OG标签：我不能设置OG标签，因为页面上同时有数百个like按钮。

我还使用了 encodeURIComponents() 作为 url。

有趣的是，早些时候它还在工作，我们在 2012 年底观察到这个问题，所以 FB 改变了一些东西。同时代码没有改变。

知道如何在帖子中获取正确的网址吗？

您可以自己尝试一下：madarmegfigyeles.hu - 点击一个鸟图标然后点赞（先查看完整的 url，然后是 fb 的帖子）

谢谢你

编辑：如果我将 url 硬编码到 og:url 标签中，我会收到“循环重定向”错误，并带有 302 响应代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:14:19.933

> 所以问题是，点击一个赞按钮，弹出窗口有正确的生成链接，但在 facebook 页面上，我只有基本 url。

当然，因为您的所有个人文章（？）都重定向到您的基本 URL，[正如调试工具清楚地显示](https://developers.facebook.com/tools/debug/og/object?q=http://madarmegfigyeles.hu/megfigyeles/65)的那样 - 因此 Facebook 将后者作为固有 URL 来点赞。

如果您在普通用户访问页面时需要在您的应用程序逻辑中进行此重定向 - 那么您必须免除 Facebook 的爬虫（通过其用户代理 -> 搜索）

# mysql - MYSQL 查询从具有最多条目的表中选择用户

> ID：14395410
> 
> 赞同：1
> 
> 时间：2013-01-18T08:59:19.167
> 
> 标签：mysql, count

我目前有一个这种结构的表：

![在此处输入图像描述](../Images/bee1f48901824a4d2256aeb778f603c6.png)

我希望能够根据条目的数量从表中选择*前 3* `user_id`个，因此表中行数最多的三个用户。（它仅在下面的屏幕截图中显示 id 为 111 的用户，但该表中显然还有更多条目）。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:03:40.467

试试这个：

```
select user_id,count(user_id) as cnt from table
group by user_id
order by cnt desc
limit 0,3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:05:12.997

```
select user_id, count(*) from table group by user_id order by count(*) desc limit 0,3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:05:12.010

试试这个查询，按用户 ID 分组，按最高条目排序并将结果限制为前 3 个结果。

```
select user_id, count(sickness_submission_id) as entries from <table Name> group by user_id order by entries  desc limit 0, 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:14:19.333

试试这个[选择前 n 条记录谓词示例](http://www.blueclaw-db.com/accessquerysql/select_top.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T11:32:14.217

怎么样：

```
SELECT COUNT(user_id) AS Number-of-entries, user_id FROM table GROUP BY user_id ORDER BY count(user_id) DESC LIMIT 3; 
```

细分： COUNT(user_id) 计算所有 user_id（并为其提供输出标题“条目数”）。GROUP BY 只显示每个 user_id 一次。ORDER BY DESC 打印带有条目数的结果，从多到少。LIMIT 3 仅显示前三个结果。

# clojure - 如何让 Leiningen 下载所需库的源代码？

> ID：14395413
> 
> 赞同：2
> 
> 时间：2013-01-18T08:59:25.830
> 
> 标签：clojure, leiningen

我认为有一些选项，`project.clj`但我没有在 Leiningen 的文档中找到它。

例如我有这个`project.clj`

```
(defproject test-app "0.1.0-SNAPSHOT"
            :dependencies [[org.clojure/clojure "1.4.0"]
                           [noir "1.3.0-beta3"]] 
```

如何让 Leiningen 下载 noir 的源代码？我现在只有二进制文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T09:08:39.023

noir 由 clj 文件组成，它们本身就是来源。所以检索 jar: `$HOME/.m2/repository/noir/noir/1.3.0-beta3/noir-1.3.0-beta3.jar`，解压并检查。您还可以使用[源](http://clojuredocs.org/clojure_core/clojure.repl/source)方法检查 REPL 中方法的来源。
如果您需要 java 库的来源，那么您可能会遇到问题。我不确定 lein 是否支持开箱即用的资源下载。如果您需要下载 java 库的源代码，那么您可以使用 maven：

1.  生成pom文件：`lein pom`
2.  通过以下方式下载源代码`mvn dependency:sources`：[从 Maven 存储库获取源 JAR](https://stackoverflow.com/questions/2059431/get-source-jars-from-maven-repository)
3.  源代码将下载到您的本地 maven repo 下`$HOME/.m2/repository`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-02T14:55:49.593

我发现一个名为 leiningen 的插件`ubersource`非常方便。

只需将其添加到您的 project.clj 中：

```
:plugins [[lein-cljsbuild "1.0.1"]
          [lein-ubersource "0.1.1"]] 
```

然后调用： `lein ubersource`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T01:24:10.637

您可以从[http://clojars.org/repo/](http://clojars.org/repo/)手动获取 jar 。然后打开包装看看周围。

当然，如果您愿意，您可以直接访问给定库的源代码（Clojars 页面应该显示 url）。

顺便提一下，请注意 noir 已弃用，建议您改用 Compojure + lib-noir。

# java - 用于问题的表单验证的 Spring 注释？

> ID：14395415
> 
> 赞同：1
> 
> 时间：2013-01-18T08:59:30.883
> 
> 标签：java, spring, javabeans, spring-annotations

抱歉问了这么简单的问题。我搜索了很多，但找不到确切的解决方案。

在我的 spring bean 类中，我有 int 字段，例如 (private int id) 。我用`@NotEmpty`了注解。

我需要在输入字段中只允许数字而不是任何字母或字符串。我需要使用什么注释。

我已经尝试了`@NumberFormat(style = Style.NUMBER)`,`@Digits(fraction = 0, integer = 5)`注释，但没有任何结果。

请向我建议表单验证的解决方案或任何示例...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:32:17.690

建议您仔细阅读[参考资料的相关部分。](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/validation.html)您创建实现 Validator 接口的验证器：

```
public class FooValidator implements Validator {

/**
* This Validator validates *just* Foo instances
*/
public boolean supports(Class clazz) {
    return Foo.class.equals(clazz);
}

public void validate(Object obj, Errors e) {
    ValidationUtils.rejectIfEmpty(e, "name", "name.empty");
    Foo foo = (Foo) obj;
    if (!isNumeric(foo.getFieldThatShouldBeNumeric())
    {
        e.rejectValue("fieldThatShouldBeNumeric", "notnumeric");
    }
}
} 
```

然后将其“本地”注入控制器本身：

```
@Controller
public class MyController {

@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new FooValidator());
}

@RequestMapping("/foo", method=RequestMethod.POST)
public void processFoo(@Valid Foo foo) { ... } 
```

或“全球”：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <mvc:annotation-driven validator="globalValidator"/>

</beans> 
```

# javascript - 使用'document.createElement（）'方法创建后如何在javascript中设置单元格宽度？

> ID：14395420
> 
> 赞同：5
> 
> 时间：2013-01-18T08:59:45.217
> 
> 标签：javascript, html

我已经使用“document.createElement('td')”方法为 html 页面中的动态表格创建了单元格，现在希望为每个单独的单元格设置不同的值。试过“cell.width = width”，但没有用。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T09:02:54.593

使用`style.width`：

```
var cell = document.createElement('td');
parent.appendChild(cell);
cell.style.width = '200px'; 
```

这是一个[例子](http://jsfiddle.net/ZvEDn/1/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T09:05:32.380

发表我的评论作为答案：

使用`cell.style.width = width;`.

# c - C函数中的无符号整数

> ID：14395421
> 
> 赞同：1
> 
> 时间：2013-01-18T08:59:47.447
> 
> 标签：c, r

如何将 unsigned int 类型的变量从 C 函数返回到 R？信息以变量位编码。我可以在 C 中提取此信息，但我更愿意在 R 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:26:07.873

由于 R 没有带符号/无符号类型，因此您必须将您的类型`unsigned int`转换为`int`or `double`。

或者创建一个新的 R 类型以在 R 级别实现无符号整数。

# visual-studio-2012 - 我们可以使用德语 .net 框架在德语 Windows 8 上的德语 Visual Studio 2012 中切换到英语吗？

> ID：14395426
> 
> 赞同：0
> 
> 时间：2013-01-18T09:00:04.053
> 
> 标签：visual-studio-2012

我在使用德语的 Windows8 上使用德语的 Visual Studio 2012 和使用德语的 .Netframework 4。我想至少将 Visual Studio 的 IDE 语言更改为英语，可以吗？如何？

由于我没有管理员权限在工作计算机上安装任何东西，我无法尝试可能的解决方案。

感谢您的建议，因为我发现很难用德语调试和理解错误消息。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:02:00.790

[Microsoft 语言界面包 (LIP) 和 Visual Studio](http://msdn.microsoft.com/en-us/library/ms246590.aspx)应涵盖您需要了解的所有内容。相关部分可以在*更改用于 Visual Studio 中的 UI 文本的语言*部分中找到。但是您应该注意，语言包似乎至少需要专业许可证，它不适用于 VS2012 Express。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T02:48:40.107

问题是链接并不总是改变语言包。这是微软开发人员的问题。如果您想获得英文版的 Visual Studio，请在打开 .exe 文件时检查您正在安装的包语言。检查它是否显示“ENU”。

这是 Visual Studio 2015 的正确链接：

[https://www.microsoft.com/en-us/download/confirmation.aspx?id=48157](https://www.microsoft.com/en-us/download/confirmation.aspx?id=48157)

有时您切换语言但它下载相同的文件，并且当您打开它时，您会看到正在安装相同的语言，并且您认为您选择了更正的语言，并且您做到了，但是微软您是否给了您正确的文件，并且只有在安装标题中看到时，才能知道您正在安装正确的语言。

[![在此处输入图像描述](../Images/6625ab9afd1882ff980883c11998bf34.png)](https://i.stack.imgur.com/AI2MA.png)

# ios - Phonegap 2.3.0 Xcode 编译错误

> ID：14395432
> 
> 赞同：0
> 
> 时间：2013-01-18T09:00:42.763
> 
> 标签：ios, xcode, cordova

当我通过控制台创建一个 phonegap-xcode 项目，然后编译它时，我遇到了一个我无法处理的错误。我在多个论坛、群组、博客等中寻找解决方案，但没有一个适合。实际上，没有人给出一个完全的解决方案。

我获得的错误与 CordovaLib_Prefix.pch 中的此导入有关：

```
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
#endif 
```

我遇到了 XCODE 4.5、Phonegap 2.1.0、2.2.0 和 2.3.0 的错误。

在此先感谢，DGM.-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:06:40.940

将您的构建目标设置为 iOS5.0 并从架构列表中删除 armv6。从 Cordova/Phonegap 2.3 中删除了对 iOS4.x 的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T12:04:09.263

我在使用 Phonegap 2.7 时遇到了完全相同的问题，我所做的是我从[这里](http://phonegap.com/download/#)下载了最新版本的 phonegap而不是 cordova，然后按照[这里](http://docs.phonegap.com/en/2.7.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)的安装说明进行操作。为我工作，希望对你有用。

# javascript - 具有 min-height 属性的元素上的 jQuery 动画高度？

> ID：14395434
> 
> 赞同：2
> 
> 时间：2013-01-18T09:00:47.273
> 
> 标签：javascript, jquery, css

我在 CSS 中设置了一个最小高度为 300px 的元素：

```
<!-- HTML -->
<div id="summary"></div>
<div id="collapse"></div>
/* CSS */
#summary { min-height: 300px } 
```

当我点击`#collapse`元素时，我希望`#summary`元素平滑地折叠到 100px 的高度。

```
$("#collapse").click(function() {
   $("#summary").animate({ height: 100}, 1000);
}); 
```

但是，什么都没有发生，我认为这是因为 min-height 属性。

我[已经在 jQuery 论坛上阅读了这个讨论](http://forum.jquery.com/topic/animations-should-temporarily-override-min-height-and-min-width)，但我仍然无法弄清楚如何使`#summary`div 动画顺利 - 按照他们的建议将 min-height 设置为 auto 会使 div 消失然后重新出现！任何人都可以帮忙吗？

更新：我制作[了一个 jsFiddle 来演示这个问题](http://jsfiddle.net/8jn7v/3/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:03:47.847

你可以尝试做类似的事情

```
$("#collapse").click(function() {
   var summary = $("#summary"),
       height  = summary.height();

   summary
     .css({ height: height + 'px', minHeight: 0 }) 
     .animate({ height: 100}, 1000);
}); 
```

这个想法是在动画之前重置`min-height`并将css属性设置为元素本身的计算高度。`height`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:03:56.817

您需要`height`在 css 中使用，而不是`min-height`在事件中将高度降低到 100 并且 min-height 为 300 `click`。

**[现场演示](http://jsfiddle.net/rajaadil/8qkxH/)**

改变

```
#summary { min-height: 300px } 
```

到

```
#summary { height: 300px; } 
```

*如果您需要使用 min-width，那么您需要在 animate 中更改 min-width 而不是 height。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:06:46.540

在小提琴中试试这个：http: **[//jsfiddle.net/8jn7v/5/](http://jsfiddle.net/8jn7v/5/)**

改变这个：

```
height: 50 
```

对此：

```
$('#summary').animate({ 
  'min-height': 50+'px' // <--see the quotes at min-height and add pixels to it
}, 1000); 
```

`min-height`让您不要将高度降低到小于`min-height`

您的元素仅限于`300px`，`min-height`因此您必须设置动画`min-height`而不是`height`

# laravel - OneAuth 多次登录

> ID：14395436
> 
> 赞同：0
> 
> 时间：2013-01-18T09:00:52.063
> 
> 标签：laravel

我是 laravel 的新手，并试图处理多个社交登录到我的网站。

到目前为止，我已经尝试过安装 OneAuth 并且能够通过身份验证，直到它进入我的控制器注册部分。当我在客户端表中查看 DB 时，我将 user_id 字段设置为 0。所以我假设根据我的理解，这是一个将同一用户链接到多个提供程序的外键。是的，这就是让我兴奋的原因。

所以这就是我卡住的地方。可以说，在 facebook 登录后，我呈现注册视图，其中填充了从 facebook 返回的 email_id。用户填写所有必填字段并填充用户表。现在我如何使用刚刚创建的用户表中的 id 更新 OneAuth 客户端表 user_id 字段。

我想知道我所做的是否正确？如果是，我该如何解决给定的问题。

更新：

我们可以使用这个事件来同步表。

```
Event::fire('oneauth.sync', array( $user->id )  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:06:56.897

尝试这个：

```
$user = new User;
if ($_POST)
{
    // it a POST Request, you should validate the form
    $user->nickname = Input::get('username');
    $user->password = Hash::create(Input::get('password'));
    $user->email    = Input::get('email');
} else {
  $user_data = Session::get('oneauth'); 
  $existing_user = User::where_uid($user_data['info']['uid'])->first();
  if (is_object($existing_user)){
    $user = $existing_user;
    $user->setUserData($user_data);
  } else {
    $user->setUserData($user_data);
  }
}
$user->save();

Auth::login($user->id, true);

Event::fire('oneauth.sync', array($user->id)); 
```

# php - 为什么 javascript 不采用我的 JSON 数组？

> ID：14395437
> 
> 赞同：0
> 
> 时间：2013-01-18T09:00:53.327
> 
> 标签：php, javascript, alert

我的 php 文件以以下结尾：

```
echo json_encode($array1);
echo ";";
echo json_encode($array2); 
```

并打印出来，例如

> [1358499135965,68];[1358499140000,2]

我的 javascript 代码看起来是这样的：

```
function requestData() {
    $.ajax({
        url: 'livedata.php',
        success: function(point) {    
            var yenidata = point.split(";");
            alert(yenidata[0]);
            alert(yenidata[1]);
        });
    } 
```

为什么我没有收到警报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:05:20.577

您的 JSON 无效。

尝试：

```
echo '[';
echo json_encode($array1);
echo ",";
echo json_encode($array2);
echo ']'; 
```

现在 PHP 页面将打印您：可以在您的 ajax 调用中`[[1358499135965,68],[1358499140000,2]]` 使用 JSON 自动解析。`dataType:"json"`

当您包含 jQuery 时，您的代码应如下所示：

```
function requestData() {
   $.ajax({
      url: 'livedata.php',
      dataType: 'json',
      success: function(point) {
         console.log(point[0]); //Array [1358499135965,68]
         console.log(point[1]); //Array [1358499140000,2]
      }
   });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:05:35.787

`Uncaught ReferenceError: $ is not defined`意味着你不包括[jQuery](http://jquery.com/)。您需要拥有它才能使用您尝试使用的功能。

# json - Playframework 2.0.X scala - 如何为一个对象实现多个 json 读/写？

> ID：14395438
> 
> 赞同：1
> 
> 时间：2013-01-18T09:00:56.520
> 
> 标签：json, scala, playframework-2.0

让我们假设有一个 json 对象测试。它有两种格式：

```
{
    "name": "Test",
    "id": "41"
} 
```

和

```
{
    "object": {
        "name": "Test",
        "id": "41"
    }
} 
```

我创建了 Test.scala ：

```
case class Test (name: String, id: String)

object Test {

    implicit object FopReads extends Format[Test] {

        def reads(json: JsValue): Test = {
            Test (
                (json \ "name").as[String],
                (json \ "id").as[String]
            )
        }

        def writes(ts: Test) = JsObject(Seq(
            "name" -> JsString(ts.name),
            "id" -> JsString(ts.id)
        ))

    }
} 
```

如您所见，实际上，我只处理第一种格式。我的问题是：如何轻松实现`Format[Test]`它可以读写两种格式？我知道 json 机制在 play 2.10 中发生了变化。我应该改变这个版本来做我想做的事吗？

感谢您的时间 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:15:40.403

在我看来，你的方法并不理想，你必须重新考虑你的设计。让我解释一下为什么。

虽然您可以有效地开发`Format[A]`能够读取两种格式的文件，但您无法编写`Format[A]`可以写入两种格式的文件

```
trait Format[T]{
    def reads (json: JsValue): T
    def writes (o: T): JsValue
} 
```

如您所见， writes 方法只有一个参数，因此您`Format[Test]`将无法知道它是否应该使用一种或另一种输出格式。如果您遵循推理，您会同意该`Format`特征被委派以从/向**特定**Json 格式写入和读取，而不是在格式之间进行选择。您选择正确格式的逻辑与读写正确格式无关，您应该将其解耦。

话虽如此，您可以通过以下方式重新使用您的 Format[Test] ：

```
case class ObjectParser(nestedFormatter:Format[T]) extends Format[T]{
    def reads (json: JsValue): T = nestedFormatter.read(json \ "object")
    def writes (o: T): JsValue  = JsObject("object" -> nestedFormatter.write(o))
} 
```

此类将采用任何现有的格式化程序，并使其能够在附加的“对象”节点内读写。

现在想象一下，您有一个控制器需要根据 url 端点生成或解析两个不同的答案：

```
object TestController extends Controller {

    def endPoint1Action = Action{
        implicit request => 
        generateResponse(FopReads)
    }

    def endPoin21Action = Action{
        implicit request => 
        generateResponse(ObjectParser(FopReads))
    }

    def generateResponse(formatter:Format[Test])(implicit request:Request[AnyContent]):Response  = BadRequest("!")

} 
```

# machine-learning - 相似性检测技术可以应用于格式化为大 ASCII 编码整数字节数组的文本文档吗？

> ID：14395441
> 
> 赞同：2
> 
> 时间：2013-01-18T09:01:22.233
> 
> 标签：machine-learning, cosine-similarity

我想检测文件之间的相似之处。这样做的一种方法是对文件进行编码，以减少相似性算法的输入空间，然后为结果提供更准确的结果。这是通过仅考虑文档的信息特征来完成的。这样做的一种方法是将文件转换为遵循 tf-idf 频率的向量空间转换，这会放大信息量很大的术语并缩小频繁的术语。我的问题是这是否可以在不保留其文本表示的文档中完成。例如，假设首先将文档转换为一个大整数数组，其中其字符表示为其 ASCII 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:15:44.450

正如@Ivan Koblik 指出的那样，字节数组中的文档编码不是问题，因为文本总是用数字数据编码。你的任务是一个标准的文档相似性检测问题。我建议以下步骤：

# 预处理

*   解码
*   标记化；
*   外壳折叠；
*   删除停用词；
*   词干。

# 生成特征

*   正如您所指出的， tf-idf 可能是一个不错的选择。
*   一组加权特征构成一个高维向量。

# 指纹识别

使用`simhash`或[locality-sensitive-hash](/questions/tagged/locality-sensitive-hash "显示标记为“locality-sensitive-hash”的问题")，您可以将高维向量转换为`f-bit`指纹，例如`f=64`。这正是 Google 用于[检测近似重复网页](http://www.wwwconference.org/www2007/papers/paper215.pdf)的技术。

> 我们维护一个 f 维向量 V ，其每个维度都初始化为零。一个特征被散列成一个 f 位的散列值。这些 f 位（该特征独有）通过该特征的权重递增/递减向量的 f 个分量，如下所示：如果哈希值的第 i 位为 1，则 V 的第 i 个分量递增该特征的权重；如果哈希值的第 i 位为 0，则 V 的第 i 个分量按该特征的权重递减。处理完所有特征后，V 的某些分量为正，而其他分量为负。分量的符号决定了最终指纹的对应位。

但是，在您的情况下，您可能会发现余弦距离或欧几里德距离等其他相似性函数表现更好。`simhash`如果不适合您，请尝试为您的问题找到最佳相似度函数。

# 查询类似文件

为每个文档生成指纹后，相似的文档应该具有相似的指纹（相似意味着它们的指纹汉明距离小）。更多详情请参考 [近重复网页检测](http://www.wwwconference.org/www2007/papers/paper215.pdf)。

# 编辑

如果你不能做第一步，即解码，简单地计算每个唯一整数的出现仍然是可行的。您可以将 tf-idf 应用于这些唯一整数并遵循子序列步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:00:29.943

嗯有趣的问题。AFAIK 的答案是**不**

*文本文档*意味着单词 ei 同义词、搭配、后缀、前缀（词干）......

*大整数字节数组* 无法涵盖所有​​这些内容。因此，比较转换为字节数组的文件不会告诉您是否有相似的文本。

将此答案作为标题的答案。您的问题的主体相当复杂，似乎您将更多的东西混合在一起（很难理解） - 也许提出更简单的问题会有所帮助......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:34:24.997

如果您不介意 TF-IDF 方法，布隆过滤器适合您的情况：[http](http://research.microsoft.com/en-us/um/people/navendu/mypapers/webdb-167.pdf)
://research.microsoft.com/en-us/um/people/navendu/mypapers/webdb-167.pdf 这样您就可以制作矢量任意小或大取决于您对误报的容忍度。

无论如何，看看 NLP 工具包，大多数算法都可以适应任务，问题是你如何指定相似度？

如果您可以指定不同类别的文档，那么值得研究朴素贝叶斯，或者如果您想以不同方式定义相似性 MaxEnt 模型可能适合您： [http ://www.kamalnigam.com/papers/maxent-ijcaiws99.pdf](http://www.kamalnigam.com/papers/maxent-ijcaiws99.pdf)

# c# - 在 C# 中实现消息/订阅机制

> ID：14395442
> 
> 赞同：7
> 
> 时间：2013-01-18T09:01:23.773
> 
> 标签：c#, wpf, events, mvvm, message

我正在使用 MVVM 模式对 WPF 应用程序进行原型设计。在回答[这个问题](https://stackoverflow.com/questions/14361687/interaction-of-view-models-in-mvvm)之后，我设置了一个`ModelProviderService`将模型公开为属性的方法。服务的消费者是视图模型，即他们从服务中提取模型，而不是自己实例化它们。

```
class ModelProviderService {

  private LoginModel loginModel;
  public LoginModel LoginModel {
    get { return loginModel; }
    set { loginModel = value; }
  }

  private ProjectsModel projectsModel;
  public ProjectsModel ProjectsModel {
    get { return projectsModel; }
    set { projectsModel = value; }
  }

  public ModelProviderService() {
    loginModel = new LoginModel();
    projectsModel = new ProjectsModel();
  }    
} 
```

现在，这就是将会发生的事情：

*   视图模型更改例如属性的`LoginModel`属性。
*   viewmodel 通过设置其属性将模型属性推回服务：`modelService.LoginModel.MyProperty = localLoginModel.MyProperty;`
*   该服务应发布一条消息：“嘿，我的类型模型`LoginModel`刚刚改变。”
*   已订阅此消息的任何其他视图模型将从服务中提取此更改的模型。

我该如何实施：

1.  “广播信息”？
2.  订阅消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:09:46.323

您可以使用 a `MessageBus`or`EventAggregator`通过弱引用向订阅者发布消息。看看[我的实现](https://github.com/khellang/Hellang.MessageBus)（或[NuGet 包](http://nuget.org/packages/Hellang.MessageBus)）。

它还可以通过应用`HandleOnUIThreadAttribute`on`Handle`方法为您将消息处理编组到 UI 线程（如果您需要更新 UI 组件）。

在您的情况下，用法类似于：

```
// The message
public class LoginModelChanged
{
    public LoginModelChanged(LoginModel model)
    {
        Model = model;
    }

    public LoginModel Model { get; private set; }
}

// Service that publishes messages
public class ModelProviderService
{
    private IMessageBus _messageBus;
    private LoginModel _loginModel;

    public ModelProviderService(IMessageBus messageBus)
    {
        _messageBus = messageBus;
    }

    public LoginModel LoginModel
    {
        get { return _loginModel; }
        set
        {
            _loginModel = value;
            _messageBus.Publish(new LoginModelChanged(value));
        }
    }
}

// Subscribing ViewModel
public class SomeViewModel : IHandle<LoginModelChanged>
{
    public SomeViewModel(IMessageBus messageBus)
    {
        messageBus.Subscribe(this);
    }

    public void Handle(LoginModelChanged message)
    {
        // Do something with message.Model
    }
} 
```

如果您想了解更多有关内部工作原理以及如何实现的信息；查看[GitHub 存储库](https://github.com/khellang/Hellang.MessageBus)中的源代码。随意使用代码:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T09:06:42.463

如果要在 WPF 应用程序中分发消息，可以使用prism[框架](http://compositewpf.codeplex.com/)的[EventAggregator 。](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

EventAggregator 允许视图模型弱订阅事件，不需要知道发送者。这使您可以轻松地跨组件或模块分发消息。

# authentication - WebSecurity.GeneratePasswordResetToken 返回错误（但用户存在！）

> ID：14395453
> 
> 赞同：5
> 
> 时间：2013-01-18T09:02:34.603
> 
> 标签：authentication, asp.net-mvc-4, simplemembership

我正在使用 ASP.NET MVC 4 Web 应用程序，我正在尝试制作密码忘记页面。在我的 POST 中，我检查与密码相关的用户是否存在

```
WebSecurity.UserExists(email) 
```

它返回**true**，但是当我执行时

```
WebSecurity.GeneratePasswordResetToken(email, 10); 
```

我收到此错误

```
No account exists for *email* 
```

作为参考，我正在关注本教程：[http](http://www.thecodingguys.net/tutorials/asp/webpages-membership-forgot-password-and-reset-password) ://www.thecodingguys.net/tutorials/asp/webpages-membership-forgot-password-and-reset-password 。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T10:11:30.673

解决了，不知何故在 [webpages_Membership] 表中它没有为用户提供确认。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T12:24:29.640

如果用户没有被确认，也会抛出同样的错误。我花了一段时间才知道，所以这可能会对某人有所帮助。也许有人有更好的方法，因为这有点骇人听闻。

在我的情况下，客户希望通过邮件向用户发送密码（我知道....），如果需要重新发送邮件，则必须生成新密码。

```
 private string ChangePasswordForNotConfirmedUser(string emailAdress)
    {
        var membership = _membershipRepository.GetByUserName(emailAdress);
        membership.IsConfirmed = true;
        _membershipRepository.Save(membership);
        var token = WebSecurity.GeneratePasswordResetToken(emailAdress);
        var password = Membership.GeneratePassword(GlobalSettings.PasswordLenght, GlobalSettings.PasswordNoAlphaChars);
        WebSecurity.ResetPassword(token, password);
        membership.IsConfirmed = false;
        _membershipRepository.Save(membership);
        return password;
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-22T14:53:19.660

这为我解决了问题，而无需考虑其他任何事情。

```
try
        {
            token = WebSecurity.GeneratePasswordResetToken(username);
        }
        catch (Exception ex)
        {
            if (ex.Message.Contains("No account"))
            { 
                string password = System.Web.Security.Membership.GeneratePassword(6, 0);
                WebSecurity.CreateAccount(username, password);

            }
            token = WebSecurity.GeneratePasswordResetToken(username);
        } 
```

# android - 我的 android 应用在 android 市场中不可见

> ID：14395456
> 
> 赞同：2
> 
> 时间：2013-01-18T09:02:40.970
> 
> 标签：android, google-play

我上周发布了我的安卓应用程序。现在该应用程序的状态在控制台中处于活动状态，并且显示的详细信息是

**API 级别：8-17+ 支持的屏幕：small-xlarge OpenGL 纹理：全部**

但是在市场上搜索应用程序时，它是不可见的。

我的应用内容分级为**所有人**，并在所有国家/地区发布。

在支持的设备类别中，它显示了 1882 台设备，并且它肯定也包括我的 htc 感觉。

我尝试使用链接`https://play.google.com/store/apps/details?id=MyPackage`（从堆栈中获取）来查找我的应用程序，但那时我得到了**我们很抱歉，在此服务器上找不到请求的 URL。**

我根本没有遇到问题。请帮忙。如果我取消发布并再次上传应用程序会怎样？？

请查看清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="MyPackage"
android:versionCode="1"
android:versionName="1.0.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.BROADCAST_SMS" />

<application
    android:icon="@drawable/launcher_icon"
    android:label="@string/label"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Activity1"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity2"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <action android:name="android.speech.extra.RESULTS" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
    <activity
        android:name=".Activity3"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Activity4"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
    <activity
        android:name=".SettingsActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" />

    <receiver
        android:name=".Receiver1"
        android:exported="true" >
        <intent-filter android:priority="1000" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="SMS" />
            <action android:name="REGISTERED" />
        </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:06:47.283

尝试这个：

[https://play.google.com/store/search?q=com.yourapp.appname&c=apps](https://play.google.com/store/search?q=com.yourapp.appname&c=apps)

首次上传应用时，可能需要大约 1 天才能在 Play 商店中显示，更新大约需要 1-12 小时。但最近只需要大约2个小时！

# performance - 性能 linq group by with count

> ID：14395457
> 
> 赞同：2
> 
> 时间：2013-01-18T09:02:41.297
> 
> 标签：performance, linq, entity-framework, group-by

我有一个使用 linq 和 group by 表达式的方法：

```
public List<SerieVu> ListSeriesLesPlusVuesSemaine()
{
    DateTime dateIlYaSeptJours = DateTime.Now.AddDays(-7);

    var resultat =
    from uev in Query(uev => uev.userepivu_date > dateIlYaSeptJours)
    group uev by uev.Episode.Saison.Serie into pgroup
    let count = pgroup.Count()
    orderby count descending
    select new SerieVu() { nombreDeVus = count, Serie = pgroup.Key };

    return resultat.Take(7).ToList();
} 
```

此 linq 查询生成此 SQL 查询：

```
SELECT TOP (7) [Project1].[C2]                        AS [C1],
               [Project1].[C1]                        AS [C2],
               [Project1].[serie_id]                  AS [serie_id],
               [Project1].[serie_image]               AS [serie_image],
               [Project1].[serie_image_thumb]         AS [serie_image_thumb],
               [Project1].[serie_format]              AS [serie_format],
               [Project1].[serie_motsclefs]           AS [serie_motsclefs],
               [Project1].[serie_statusproduction_id] AS [serie_statusproduction_id],
               [Project1].[serie_nom]                 AS [serie_nom],
               [Project1].[serie_nomvf]               AS [serie_nomvf],
               [Project1].[serie_synopsis]            AS [serie_synopsis],
               [Project1].[serie_syncthetvdb]         AS [serie_syncthetvdb],
               [Project1].[serie_dateajout]           AS [serie_dateajout],
               [Project1].[serie_datemiseajour]       AS [serie_datemiseajour],
               [Project1].[serie_actif]               AS [serie_actif],
               [Project1].[utilisateur_id]            AS [utilisateur_id],
               [Project1].[serie_francais]            AS [serie_francais]
FROM   (SELECT [GroupBy1].[A1]  AS [C1],
               [GroupBy1].[K1]  AS [serie_id],
               [GroupBy1].[K2]  AS [serie_image],
               [GroupBy1].[K3]  AS [serie_image_thumb],
               [GroupBy1].[K4]  AS [serie_format],
               [GroupBy1].[K5]  AS [serie_motsclefs],
               [GroupBy1].[K6]  AS [serie_statusproduction_id],
               [GroupBy1].[K7]  AS [serie_nom],
               [GroupBy1].[K8]  AS [serie_nomvf],
               [GroupBy1].[K9]  AS [serie_synopsis],
               [GroupBy1].[K10] AS [serie_syncthetvdb],
               [GroupBy1].[K11] AS [serie_dateajout],
               [GroupBy1].[K12] AS [serie_datemiseajour],
               [GroupBy1].[K13] AS [serie_actif],
               [GroupBy1].[K14] AS [utilisateur_id],
               [GroupBy1].[K15] AS [serie_francais],
               1                AS [C2]
        FROM   (SELECT [Extent4].[serie_id]                  AS [K1],
                       [Extent4].[serie_image]               AS [K2],
                       [Extent4].[serie_image_thumb]         AS [K3],
                       [Extent4].[serie_format]              AS [K4],
                       [Extent4].[serie_motsclefs]           AS [K5],
                       [Extent4].[serie_statusproduction_id] AS [K6],
                       [Extent4].[serie_nom]                 AS [K7],
                       [Extent4].[serie_nomvf]               AS [K8],
                       [Extent4].[serie_synopsis]            AS [K9],
                       [Extent4].[serie_syncthetvdb]         AS [K10],
                       [Extent4].[serie_dateajout]           AS [K11],
                       [Extent4].[serie_datemiseajour]       AS [K12],
                       [Extent4].[serie_actif]               AS [K13],
                       [Extent4].[utilisateur_id]            AS [K14],
                       [Extent4].[serie_francais]            AS [K15],
                       COUNT(1)                              AS [A1]
                FROM   [dbo].[UtilisateurEpisodeVu] AS [Extent1]
                       INNER JOIN [dbo].[Episode] AS [Extent2]
                         ON [Extent1].[episode_id] = [Extent2].[episode_id]
                       INNER JOIN [dbo].[Saison] AS [Extent3]
                         ON [Extent2].[saison_id] = [Extent3].[saison_id]
                       LEFT OUTER JOIN [dbo].[Serie] AS [Extent4]
                         ON [Extent3].[serie_id] = [Extent4].[serie_id]
                WHERE  [Extent1].[userepivu_date] > '2013-01-11T09:53:26' /* @p__linq__0 */
                GROUP  BY [Extent4].[serie_id],
                          [Extent4].[serie_image],
                          [Extent4].[serie_image_thumb],
                          [Extent4].[serie_format],
                          [Extent4].[serie_motsclefs],
                          [Extent4].[serie_statusproduction_id],
                          [Extent4].[serie_nom],
                          [Extent4].[serie_nomvf],
                          [Extent4].[serie_synopsis],
                          [Extent4].[serie_syncthetvdb],
                          [Extent4].[serie_dateajout],
                          [Extent4].[serie_datemiseajour],
                          [Extent4].[serie_actif],
                          [Extent4].[utilisateur_id],
                          [Extent4].[serie_francais]) AS [GroupBy1]) AS [Project1]
ORDER  BY [Project1].[C1] DESC 
```

我的问题是如何提高此查询的性能？在我网站的一个非常重要的页面上大约需要 6 秒。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:45:04.453

您可以从在数据库中创建一些索引开始，您应该将字段表单放在索引中的位置、排序依据和分组依据，您可能会通过在 userepivu_date 上创建索引来获得最大的性能改进，因为这个 WHERE [Extent1].[userepivu_date ] > '2013-01-11T09:53:26' 将扫描你的整个表

在 SQL Server 上创建索引：

```
CREATE INDEX [indexname] ON Extent1 (userepivu_date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:47:51.870

我找到了解决方案。我已经使用显式连接强制内部连接：

```
public List<SerieVu> ListSeriesLesPlusVuesSemaine()
{
    DateTime dateIlYaSeptJours = DateTime.Now.AddDays(-7);

    ObjectSet<UtilisateurEpisodeVu> UtilisateurEpisodeVuSet = _context.CreateObjectSet<UtilisateurEpisodeVu>();
    ObjectSet<Episode> EpisodeSet = _context.CreateObjectSet<Episode>();
    ObjectSet<Saison> SaisonSet = _context.CreateObjectSet<Saison>();
    ObjectSet<Serie> SerieSet = _context.CreateObjectSet<Serie>();

    var resultat =
    from uev in UtilisateurEpisodeVuSet.Include("Episode.Saison.Serie").Where(uev => uev.userepivu_date > dateIlYaSeptJours)
    join e in EpisodeSet on uev.episode_id equals e.episode_id
    join sai in SaisonSet on e.saison_id equals sai.saison_id
    join s in SerieSet on sai.serie_id equals s.serie_id
    group uev by s into pgroup
    let count = pgroup.Count()
    orderby count descending
    select new SerieVu() { nombreDeVus = count, Serie = pgroup.Key };

    return resultat.Take(7).ToList();
} 
```

使用这种方法，linq 查询只生成内部连接；）感谢所有试图帮助我的人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:17:59.643

我应该给出的第一个建议是查看执行计划并寻找瓶颈

那么，为什么要在那里使用 LEFT OUTER JOIN 呢？

`LEFT OUTER JOIN [dbo].[Serie] AS [Extent4]`

它不应该是一个内部连接（如果是这样，你的映射可能有问题）？我猜想它可能会通过阻止在连接过程的早期执行 where 子句来搞砸查询优化。

也许您可以尝试运行查询，将左外连接替换为内连接，看看是否有区别。另外，同意@user1802430 ，如果userepivu_date 上没有索引，你肯定需要放置一个。

# java - 通过 JAVA 将数据从 Excel 表插入到 Oracle 表中

> ID：14395465
> 
> 赞同：-2
> 
> 时间：2013-01-18T09:03:00.143
> 
> 标签：java, swing, oracle11g

我们需要从 Java 将电子表格数据插入到 oracle 表中。我们必须将一张表数据插入到 2 个表中。

下面是场景。

**.xls**文件中的工作表结构

列 1 列 2 列 3 列 4 列 5 列 6

A1 B1 10 5 80

A1 B1 10 20 AB1234

现在我们需要将数据插入到数据库中的两个表中，如下所述。

```
Table A

HID PID Column1 Column2 Column3 Column4

1001    2001    A1  B1  10  5

1001    2002    A1  B1  10  20

Table B
HID PID G_N G_V

1001    2001   Column5  80

1001    2002   Column6  AB1234 
```

`PID`只有在表 A 中插入记录时才可用。有了这个引用，我们必须将记录插入表 B

我们正在使用**jxl.jar**

任何解决方案都会有很大帮助..

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:35:04.147

概述：

*   使用[apache-](/questions/tagged/apache-poi "显示标记为“apache-poi”的问题")`.xls` poi以`Workbook`.

*   遍历单元格，如此[处所示](https://stackoverflow.com/a/2079316/230513)。

*   使用[jdbc](/questions/tagged/jdbc "显示标记为“jdbc”的问题")根据迭代结果填充表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:31:41.883

为此，您可以使用 liquibase 从 .csv（Excel 工作表）插入数据。您可以使用 liquibase 将数据插入任何底层数据库，也可以通过 XML 执行所有与数据库相关的操作。您只需要进行配置并编写 xml 格式的 changeLog 文件。

```
<loadData tableName="A" file="com/sample/a.csv">
    <column name="HID" type="NUMERIC"/>
    <column name="PID" type="NUMERIC"/>
    <column name="Column1" type="STRING"/>
    <column name="Column2" type="STRING"/>
    <column name="Column3" type="STRING"/>
    <column name="Column4" type="STRING"/>
</loadData>

 <loadData tableName="B" file="com/sample/b.csv">
    <column name="HID" type="NUMERIC"/>
    <column name="PID" type="NUMERIC"/>
    <column name="G_N" type="STRING"/>
    <column name="G_V" type="STRING"/>
</loadData> 
```

更多详情：[http ://www.liquibase.org/quickstart](http://www.liquibase.org/quickstart)

# xml - 如何序列化以下格式？

> ID：14395466
> 
> 赞同：1
> 
> 时间：2013-01-18T09:03:04.160
> 
> 标签：xml, vb.net, class

我想知道如何在包括类型的单个属性上获得以下格式。像这样：

```
**<Productname type ="Drinks">coke<Productname>** 
```

**我尝试了什么？**

```
<XmlRoot("Productname1")> _
Public Class Productname
<XmlAttribute("Type")> Public type As String = "Drinks"

Private m_Productname As String
Public Property Productname() As String
    Get
        Return m_Productname
    End Get
    Set(ByVal value As String)
        m_Productname = value
    End Set
End Property
End Class 
```

但是我的代码会发生以下情况

```
 <Productname1 Type="Drinks">
  <Productname >coke</Productname > 
  </Productname1> 
```

我只是不明白这是如何工作的，我已经搜索了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:27:08.167

试试这个，它应该工作。

```
 Public Class ProductName
        <XmlAttribute("Type")>
        Property type As String = "Drinks"
        <XmlText()>
        Property Text As String = "Coke"
    End Class 
```

# c# - 如何在这种情况下使用更少的代码

> ID：14395471
> 
> 赞同：2
> 
> 时间：2013-01-18T09:03:39.113
> 
> 标签：c#

目前，我有这样的代码：

```
 static void Main()
    {
        int whichClass = 0;
        if (whichClass == 0)
        {
            //repeat code
            TestAbstract clTest = new ClassA();
            clTest.MainFunc();
        }
        else if (whichClass == 1)
        {
            //repeat code
            TestAbstract clTest = new ClassB();
            clTest.MainFunc();
        }
        else if (whichClass == 10)
        {
            //repeat code
            TestAbstract clTest = new ClassX();
            clTest.MainFunc();
        }
    } 
```

如您所见，我必须为 3 个不同类的初始和调用函数编写 3 次代码。

我想要的是我们只用动态类调用 1 次。怎么可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T09:05:59.570

好吧，你可以有一个`Dictionary<int, Type>`，或一个`Dictionary<int, Func<TestAbstract>`：

```
var typeMapping = new Dictionary<int, Type>
{
    { 0, typeof(ClassA) },
    { 1, typeof(ClassB) },
    { 10, typeof(ClassX) }
};

...
Type type;
if (typeMapping.TryGetValue(whichClass, out type))
{
    TestAbstract test = (TestAbstract) Activator.CreateInstance(type);
    test.MainFunc();
} 
```

使用 a`Func<TestAbstract>`将为您创建`TestAbstract`实例的方式提供更大的灵活性，并提供更多的编译时类型安全性，但更冗长：

```
var factoryMapping = new Dictionary<int, Func<TestAbstract>>
{
    { 0, () => new ClassA() },
    { 1, () => new ClassB() },
    { 10, () => new ClassX() }
};

...
Func<TestAbstract> factory;
if (factoryMapping.TryGetValue(whichClass, out factory))
{
    TestAbstract test = factory();
    test.MainFunc();
} 
```

顺便说一下，尚不清楚整数值的来源 - 你可能需要一个枚举。哎呀，枚举名称甚至可以是类型的名称：

```
TestClass whichClass = TestClass.ClassA;

...

Type type = Type.GetType("SomeNamespace." + whichClass);
TestAbstract test = (TestAbstract) Activator.CreateInstance(type); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T09:06:10.197

您可以创建一个工厂类，它将根据传递的参数返回对象。

```
public static TestAbstractFactory
{
  public static TestAbstract GetTestAbstract(int whichClass)
  { 
      switch(whichClass)
      {
      case 0:
        return new ClassA();
      case 1:
        return new ClassB();
      case 10:
        return new ClassX();
      default: 
        return null;
      }
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T09:07:17.050

```
static void Main()
{
        int whichClass = 0;
        TestAbstract clTest = null;
        if (whichClass == 0)
            clTest = new ClassA();
        else if (whichClass == 1)
             clTest = new ClassB();
        else if (whichClass == 10)
             clTest = new ClassX();
        if(clTest != null)
             clTest.MainFunc(); 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T09:08:24.847

Assuming ClassA to C derives from TestAbstract and assuming MainFunc is a virtual method on TestAbstract, you can use the following code

```
static void Main()
{
    int whichClass = 0; // 0 to 2
    Type type = new[] { typeof(ClassA), typeof(ClassB), typeof(ClassC) } [ whichClass ];        
    TestAbstract clTest = (TestAbstract) Activator.CreateInstance(type);
    clTest.MainFunc();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:06:42.660

```
static void Main()
{
  int whichClass = 0;
  TestAbstract clTest ;
  if (whichClass == 0)
  {
   //repeat code
   clTest = new ClassA();
  }
  else if (whichClass == 1)
  {
   //repeat code
   clTest = new ClassB();
  }
 else if (whichClass == 10)
 {
  //repeat code
   clTest = new ClassX();        
  }

  clTest.MainFunc();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T09:07:48.337

> 静态无效主要（）
> 
> ```
> {
>     int whichClass = 0;
>     TestAbstract clTest;
> 
>     if (whichClass == 0)
>     {
>         //repeat code
>          clTest = new ClassA();
>     }
>     else if (whichClass == 1)
>     {
>         //repeat code
>         clTest = new ClassB();
>     }
>     else if (whichClass == 10)
>     {
>         //repeat code
>         clTest = new ClassX();
>     }
>     if(clTest != null)
>         clTest.MainFunc();
> } 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T09:09:27.823

you can use reflection.

```
string whichClass = "className";
Type t = Type.GetType(whichClass);
TestAbstract o = (TestAbstract)Activator.CreateInstance(t);
o.MainFunc(); 
```

# javascript - 获取当前 HTML 表单的 ID

> ID：14395477
> 
> 赞同：0
> 
> 时间：2013-01-18T09:03:49.357
> 
> 标签：javascript, html, json

我正在构建 Firefox 插件。我需要在 JSON 对象的帮助下填写加载在当前网页上的 html 表单。我在工具栏上有一个按钮，它将加载包含 JSON 对象的 javascript 代码。但是如何检索加载的 html 表单的 ID？

# yii - 如何删除 CListView 的寻呼机？

> ID：14395479
> 
> 赞同：1
> 
> 时间：2013-01-18T09:03:56.347
> 
> 标签：yii

嗨，我正在使用 CListView，我想删除像这样的寻呼机标题

[第一个] [上一个] 1 2 3 4 [下一个] [最后一个]

我想删除所有这些我使用的代码是

```
$this->widget('zii.widgets.CListView', array(
'dataProvider'=>$dataProvider,
'itemView'=>'_view',
'enablePagination' => false )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:19:12.083

将该[`template`](http://www.yiiframework.com/doc/api/1.1/CListView#template-detail)属性设置为`"{summary}\n{sorter}\n{items}"`，这与默认值的不同之处`"{summary}\n{sorter}\n{items}\n{pager}"`在于它根本不显示寻呼机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T09:47:41.263

PostController.php：

```
$dataProvider=new CActiveDataProvider('Post',
                    array(
                    'criteria'=>$criteria,
                    'pagination'=>array(
                                    'pageSize'=>1,
                            ),
                    )
            ); 
```

这是视图：

```
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
    'enableSorting'=>true,
    'template'=>"{items}\n{pager}", //this remove: Displaying #... of ... result
    'cssFile'=> Yii::app()->theme->baseUrl.'/style.css',
)); ?> 
```

# java-me - 在 J2ME 中的画布上更改方向

> ID：14395482
> 
> 赞同：0
> 
> 时间：2013-01-18T09:04:03.010
> 
> 标签：java-me, lwuit

我正在 J2ME 的画布上开发视频播放器。如果高度大于手机的宽度，我想以横向模式显示视频，否则以纵向模式显示视频。我怎样才能做到这一点 ？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:47:02.347

不幸的是，您不能在 J2ME 中动态地强制执行此操作。

有些手机包含一个 jad 属性来强制定向，但我不知道那些允许动态强制定向的手机。

# sql - SQL Server 2005 加入问题

> ID：14395483
> 
> 赞同：2
> 
> 时间：2013-01-18T09:04:17.640
> 
> 标签：sql, sql-server, sql-server-2005, select

我有以下3个数据表

```
Options Table
UID (pk) SID (pk) TID (pk)
--------------------------
1        20       2
1        20       3
1        13       3
1        14       4

Types Table
TID (pk) TText
--------------------------
1        Text 1
2        Text 2
3        Text 3
4        Text 4

Sets Table
SID (pk)  SText
--------------------------
13        Set 13
14        Set 14
20        Set 20 
```

我试图获得如下输出，选项表中只有 4 行，但其他 2 个表中的相应文本。我的加入似乎已关闭。

我想要的结果是：

```
UID (pk) SID (pk) TID (pk)  SText      TText
------------------------------------------------------
1        20       2         Set 20     Text 2
1        20       3         Set 20     Text 3
1        13       3         Set 13     Text 3
1        14       4         Set 14     Text 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:07:47.790

```
SELECT  a.*, b.Stext, c.TText
FROM    Options a
        INNER JOIN Sets b
            ON a.SID = b.SID
        INNER JOIN  Types c
            ON a.TID = c.TID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/1890d/1)

**更新 1**

添加`DISTINCT`

```
SELECT  DISTINCT a.*, b.Stext, c.TText
FROM    Options a
        INNER JOIN Sets b
            ON a.SID = b.SID
        INNER JOIN  Types c
            ON a.TID = c.TID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:12:43.643

```
SELECT O.UID,O.SID,O.TID,T.TText,S.SText
FROM Options O
INNER JOIN Types T ON
    T.TID = O.TID
INNER JOIN Sets S ON
    S.SID = O.SID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:15:01.090

你可以试试这个：

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/4b265/9)

编辑：因为第一个查询是用 mysql 编写的，所以对 sql server 使用 distinct

```
select distinct o.*, t.ttext, s.stext from 
    options o
    inner join 
    types t
    on o.tid = t.tid
    left join 
    sets s
    on s.sid = o.sid
    ;

select o.*, t.ttext, s.stext from 
options o
inner join 
types t
on o.tid = t.tid
left join 
sets s
on s.sid = o.sid
group by o.uid, o.tid, o.sid
;

| UID | SID | TID |  TTEXT |  STEXT |
-------------------------------------
|   1 |  20 |   2 | Text 2 | Set 20 |
|   1 |  13 |   3 | Text 3 | Set 13 |
|   1 |  20 |   3 | Text 3 | Set 20 |
|   1 |  14 |   4 | Text 4 | Set 14 | 
```

# google-app-engine - 结果集中行的 AppEngine 位置

> ID：14395484
> 
> 赞同：1
> 
> 时间：2013-01-18T09:04:28.707
> 
> 标签：google-app-engine, google-cloud-datastore, data-modeling, app-engine-ndb

我正在开发一个带有排行榜的应用程序，排行榜会不断更新。当我显示排行榜时，我通过对多列应用排序顺序来做到这一点。

不过，我想做的是通过适当的排序，找出用户（键）在结果集中的排名。

排行榜如下所示：

```
userKey->Key Property
todaysXScore->Int
TotalXScore->Int
todaysYScore->Int
TotalYScore->Int
todaysZScore->Int
TotalZScore->Int 
```

我想到的一个解决方案是简单地获取结果集，然后搜索我正在寻找的用户并将位置作为排名，但这似乎效率低下，尽管我还没有计时。

谢谢

# msbuild - 构建网站项目时发布配置文件不起作用

> ID：14395487
> 
> 赞同：11
> 
> 时间：2013-01-18T09:04:35.630
> 
> 标签：msbuild, msdeploy, web-site-project, publish-profiles

我认识`Web Deployment Projects`到`Visual Studio 2012`. 读完[这篇文章](http://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead-ndash-long-live-publishing-profiles)后，我试着开始`Publish Profiles`工作。

安装[Visual Studio Web 发布更新](http://msdn.microsoft.com/library/jj161045)后，我能够使用`Visual Studio 2012`.

因为我们正在使用`TFS 2010 Team Build`我尝试通过`MSBuild`参数使用发布配置文件。但以下语句仅适用于发布 Web 应用程序项目。

```
MSBuild.exe MyWebs.sln /p:Configuration=Release /p:DeployOnBuild=true;PublishProfile=DeployToDirectory.pubxml 
```

如果我尝试发布网站项目，则不会发生任何事情。我的网站项目的发布配置文件仅适用于新的发布对话框，`Visual Studio 2012`但在调用`MSBuild`.

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:45:55.073

我在自己的环境中花了大约 3 周的时间来解决这个问题，并认为我有一个解决方案。

我认为问题在于，当您传入解决方案时，不会真正构建 website.publishproj 文件。我设法通过执行以下操作解决了这个问题：

1.  请确保您使用的是新的 ASP.Net 和 Tools 2012.2 更新。[在这里下载](http://www.asp.net/vnext/overview/fall-2012-update)。
2.  在名为 after.MyWebs.sln.targets 的解决方案文件旁边创建一个文件。该文件应如下所示：

    ```
    <!--?xml version="1.0" encoding="utf-8"?-->
    <Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
        <Target Name="Deploy Website" AfterTargets="Build">
            <Message Text="Starting Website deployment" Importance="high">
            </Message>
            <MSBuild Projects="$(MSBuildProjectDirectory)\MyWebs\website.publishproj" 
            BuildInParallel="true" /> 
        </Target>
    </Project> 
    ```

这样做的目的是，当 MSBuild 开始构建解决方案文件时，它实际上会在内存中创建一个扩展名为**metaproj**的 MSBuild 文件。有一些方法可以让 MSBuild 将此文件保存到磁盘，以便您可以检查它，但这很容易在 google 上找到。在第一步中创建的文件被注入到**metaproj**文件中，并在构建之后运行。

这是我可以获得新的发布配置文件的唯一方法，以提供我过去通过旧的 Web 部署项目获得的输出。

**警告**：如果您想在 TFS 构建中使用它，那么在这种情况下，您将在放置位置获得一个 _PublishedWebsites 文件夹，该文件夹与您在 pubxml 文件中指定的 PublishUrl 无关。这是我正在努力解决的问题，但到目前为止，并没有太多的快乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T19:33:29.517

我遇到了与上面完全相同的问题。我删除了以下密钥，自动构建开始正常工作。

```
**<Content Include="website.publishproj" />** 
```

# dynamics-ax-2012 - 嵌入式 MS Dynamics AX 2012 现场控制

> ID：14395489
> 
> 赞同：0
> 
> 时间：2013-01-18T09:04:39.767
> 
> 标签：dynamics-ax-2012

在 Dynamics AX 2012 中，我发现一个字段控件可以嵌入到另一个字段控件中，我不明白这是什么意思，以及他们是如何做到的，见下图。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:10:11.823

您的帖子没有附加图片，但根据您的描述，我猜您指的是**分段条目控件**或**参考组控件**。

参考**组控件**与代理键一起用于表单中的外键替换。此处对此进行了描述：

[白皮书：Microsoft Dynamics AX 2012 中的代理键替换介绍](http://www.microsoft.com/en-us/download/details.aspx?id=35369)

一般来说，分段进入控制代表财务维度。控件中的每个段（字段）代表一个财务维度。所有段（财务维度）的组合存储在**DimensionAttributeValueCombination**表中，事务表中有一个字段 (RecId) 引用回**DimensionAttributeValueCombination**表。

以下是有关 SEG 的更多信息：

*   [财务维度：分段进入控制](http://junctionsolutions.com/blogjuice/4-segmented-entry-control/)
*   [MSDN：分段条目 (AX 2012)](http://msdn.microsoft.com/en-us/library/hh300646.aspx)
*   [MSDN：如何将分段条目控件添加到表单](http://msdn.microsoft.com/en-us/library/hh300644.aspx)

# java - 监控所有正在运行和生成的 JVM

> ID：14395490
> 
> 赞同：1
> 
> 时间：2013-01-18T09:04:42.847
> 
> 标签：java, memory, jvm, jenkins, out-of-memory

我有一个 8Go 编译服务器，运行一个 Jenkins 实例，一个 Jenkins 从代理。所有作业都运行相同的脚本 sh。这个脚本启动其他脚本和一个大的 ant 构建。在此构建中，可以启动多个 JVM（带有 fork 的 javac、junitreports 等……）。

我需要跟踪 OutOfMemoryError。但是我无法使用工具监视生成的 Java 进程，因为它们是临时的。

我正在寻找一种工具来跟踪服务器上运行的所有当前和未来的 JVM，并显示内存图。它存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:27:50.600

好问题。我知道有几种工具可以监视/检查 JVM 实例，但据我所知，它们中的大多数都依赖于已经启动并运行的 JVM。

*   [JVM 监视器](http://www.jvmmonitor.org/)
*   [视觉虚拟机](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)

我想一个解决方案是有一个定期运行的脚本来检查 JVM 实例（使用命令`jps`），然后启动其他监控工具......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:21:14.037

我从来没有听说过这样的工具。

但是您可以使用定期运行的 shell 脚本来做类似的事情

```
jps | grep -v -i 'jps'  | cut -d' ' -f 1 | xargs -n1 jmap -heap 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:45:12.397

我建议运行 JConsole。它是免费的，而且是一个非常容易分析的工具。您可以跟踪对象的寿命、应用程序的质量（通过检查 Eden Space 区域和其他区域）。您可以获得 JVM 的完整内存使用分析。

默认情况下，您会在下载 JDK 时获得 JConsole。

# emacs - 用于 emacs 的 sublime linter 包（语法错误实时突出显示）

> ID：14395503
> 
> 赞同：1
> 
> 时间：2013-01-18T09:05:20.390
> 
> 标签：emacs

在 Sublime Text 2 中有一个名为 sublime linter 的包，它会突出显示在您键入时出现语法错误的任何部分。

emacs 中是否有类似的软件包？

谢谢穆尔塔萨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:29:58.480

[`flycheck`](https://github.com/lunaryorn/flycheck)是一个新的新兴替代品，`flymake`包括以下功能

*   基于主要模式的检查器（而不是文件名模式），
*   简单的声明性检查器定义（而不是 init 函数）
*   适用于多种语言的现成语法检查器（而不是使用不存在工具的损坏检查器）
*   一个干净、简洁且易于理解的实现（而不是几乎 2k 行的意大利面条代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:44:59.937

该`flymake`软件包与 Emacs 捆绑在一起。它支持某些语言，并且有许多收据可以针对不支持开箱即用的语言对其进行自定义。有关详细信息，请参阅[EmacsWiki](http://www.emacswiki.org/emacs/FlyMake)

# c# - 带有链接服务器选择查询的简单存储过程仅在 .NET 应用程序中工作一次

> ID：14395509
> 
> 赞同：0
> 
> 时间：2013-01-18T09:05:44.227
> 
> 标签：c#, .net, linked-server, sql-server-2008-express

我玩了几天与链接服务器使用的存储过程有关的烦人问题。在我共享数据库的服务器上。服务器正在运行 MS SQL Server 2008 EE sp3。作为新用户，我不能放图像，所以我会尝试不

所以假设我有看起来的存储过程

```
CREATE PROCEDURE [dbo].[spSynchronizeArticles] 
    -- Add the parameters for the stored procedure here
(
    @pDebug bit,
    @siteId bigint
)
AS
BEGIN

  SELECT *
  FROM [LinkedServer].[MyDatabase].dbo.Storages 
  WHERE Storage.siteId = @siteId

  RETURN 0

END 
```

配置链接服务器的位置

**编辑：**

```
enable promotion of distributed transaction = false
RPC = false
RPC out = false 
```

当我从 MS SQL 管理工作室运行查询时，它总是成功运行。当我从 c# 应用程序代码运行查询时

```
StringBuilder sb;
    public bool ActualizeArticlesFromServer(Int64 siteId, out string messages)
    {
      SqlCommand sqlCmd = new SqlCommand("spSynchronizeArticles");
      try
      {
        sb = new StringBuilder();
        sqlCmd.CommandType = CommandType.StoredProcedure;
        sqlCmd.Parameters.AddWithValue("@pDebug", "false");
        sqlCmd.Parameters.AddWithValue("@siteId", siteId);

        // Return value as parameter
        SqlParameter returnValue = new SqlParameter("returnVal", SqlDbType.Int);
        returnValue.Direction = ParameterDirection.ReturnValue;
        sqlCmd.Parameters.Add(returnValue);

        using (SqlConnection conn = new SqlConnection(Context.LocalData.ConnectionString))
        {
          try
          {
            try
            {
              conn.Open();
              sqlCmd.Connection = conn;
              //TODO: find out how to print from stored procedure
              //((SqlConnection)Context.LocalData.Connection).InfoMessage += new SqlInfoMessageEventHandler(Connection_InfoMessage);
               sqlCmd.ExecuteScalar();
            }
            catch (Exception ex)
            {
              Log.LogMethodException(ex);
              return false;
            }
          }
          finally
          {
            try
            {
              conn.Close();
            }
            catch (Exception ex) 
            {
              Log.LogMethodException(ex);
            }
          }
        }

        return Convert.ToInt64(returnValue.Value) == 0;
      }
      finally
      {
        messages = sb.ToString();
      }
    } 
```

我在应用程序中有用户列表，但它是在内部解决的。没有 Windows 用户。

当我为实际用户运行此代码时，一切正常，我可以运行查询更多时间。然后我更改用户并尝试从上面的代码执行过程我得到了异常

```
System.Data.SqlClient.SqlException (0x80131904): The operation could not be performed because OLE DB provider "SQLNCLI10" for linked server "someServer" was unable to begin a distributed transaction. 
```

**当我重新启动整个应用程序时，查询再次正常工作。**我不知道它是否与连接池或什么有关？

我认为分布式事务以某种方式挂起（但在 SQL 中没有使用事务）。

在 DTC 统计信息中，即使触发了异常，我也可以看到活动事务。

我已经在客户端和服务器上设置了 DTC 组件确实允许一切（它是捷克语，但我希望它足够清楚）

```
Network DTC Access checked
Allow inbound true
Allow outbound true
No authentication Required 
```

服务器 SQL 服务器安装在带有 Microsoft Windows Server 2008 的虚拟计算机上。当 DTC 设置在 Windows 服务器和虚拟 Windows 服务器上时。防火墙用于在服务器和虚拟机上进行测试。

**编辑2：**

好的。所以我做了一些研究，看起来@JanVanHerck 是对的。这对我来说仍然很困惑，但我会尝试写下我所做的。

1.  我关闭 MS DTC
2.  第一次运行我的应用程序代码来执行存储过程并且工作正常
3.  然后我注销了，我的注销方法做了一些我在下面解释的事情。
4.  我使用相同的用户名登录（确实没关系）并运行我的应用程序代码来执行存储过程，并且 MS DTC 未在计算机上运行的异常出现。

注意：存储过程中没有事务（也没有分布式事务）。

所以我检查了注销方法，我发现我正在更新事务中的一个本地表 - 我在代码中注释了事务并且一切正常。

我会尝试将其放入生产系统中并会看到，但我们在这里有一些改进。谢谢@JanVanHerck。其实我之前没有检查我的代码，因为我不知道它可能会影响执行程序。

但有趣的是，MS DTC 在使用事务后会出现（即使仅在本地数据库中）。

# c# - 如何在 Windows 8 应用程序中使用 c# 添加 facebook rss 提要？

> ID：14395514
> 
> 赞同：4
> 
> 时间：2013-01-18T09:06:11.933
> 
> 标签：c#, windows-8, rss, windows-store-apps, syndication-feed

我目前正在使用 C# 和 XAML 开发一个 Windows 8 Metro 应用程序。我正在使用 Syndication 方法从多个来源读取 RSS 提要，它运行良好，但来自 FACEBOOK 的 RSS 实际上并非如此，并且由于错误“INVALID XML”而崩溃。将它作为 XmlDocument 读取是否有效？怎么做？

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Net;
using System.Net.Http.Headers;
using System.Text;
using System.Threading.Tasks;
using System.Xml;
using System.Xml.Linq;
using Windows.Data.Xml.Dom;
using Windows.Web.Syndication;

namespace App1
{

public class FeedData
{
    public string title { get; set; }
    public string description { get; set; }
    public DateTime pubDate { get; set; }

    private List<FeedItem> _Items = new List<FeedItem>();
    public List<FeedItem> Items
    {
        get
        {
            return this._Items;
        }
    }
}

// FeedItem 
// Holds info for a single blog post 
public class FeedItem
{
    public string title { get; set; }
    public string description { get; set; }
    public DateTime pubDate { get; set; }
    public Uri link { get; set; }
}

// FeedDataSource 
// Holds a collection of blog feeds (FeedData), and contains methods needed to 
// retreive the feeds. 
public class FeedDataSource
{
    private ObservableCollection<FeedData> _Feeds = new ObservableCollection<FeedData>();
    public ObservableCollection<FeedData> Feeds
    {
        get
        {
            return this._Feeds;
        }
    }

    public async Task GetFeedsAsync(Int32 ID)
    {
        if (ID == 1003)
        {
            Task<FeedData> feed1 =
            GetFeedAsync("http://outbound.indevcogroup.com/feeds/posts/default/-/INDEVCO%20Group");
            this.Feeds.Add(await feed1);
        }
        else if (ID == 1002)
        {
            Task<FeedData> feed12 =
          GetFeedAsync("http://www.facebook.com/feeds/page.php?format=rss20&id=126332847400326");
            this.Feeds.Add(await feed12);
        }
    }

    private async Task<FeedData> GetFeedAsync(string feedUriString)
    {
        // using Windows.Web.Syndication; 
        SyndicationClient client = new SyndicationClient();
        Uri feedUri = new Uri(feedUriString);

        try
        {

            SyndicationFeed feed = await client.RetrieveFeedAsync(feedUri);

            // This code is executed after RetrieveFeedAsync returns the SyndicationFeed. 
            // Process it and copy the data we want into our FeedData and FeedItem classes. 
            FeedData feedData = new FeedData();

            feedData.title = feed.Title.Text;
            if (feed.Subtitle != null && feed.Subtitle.Text != null)
            {
                feedData.description = feed.Subtitle.Text;
            }
            // Use the date of the latest post as the last updated date. 
            feedData.pubDate = feed.Items[0].PublishedDate.DateTime;

            foreach (SyndicationItem item in feed.Items)
            {
                FeedItem feedItem = new FeedItem();
                feedItem.title = item.Title.Text;
                feedItem.pubDate = item.PublishedDate.DateTime;
                // Handle the differences between RSS and Atom feeds. 
                if (feed.SourceFormat == SyndicationFormat.Atom10)
                {
                    feedItem.description = item.Content.Text;
                    feedItem.link = new Uri("http://www.scoop.it/t/agricultural-horticultural-                        news" + item.Source);
                }
                else if (feed.SourceFormat == SyndicationFormat.Rss20)
                {
                    feedItem.description = item.Summary.Text;
                    feedItem.link = item.Links[0].Uri;
                }
                feedData.Items.Add(feedItem);
            }
            return feedData;
        }
        catch (Exception)
        {
            return null;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:04:02.573

像这样：

```
// this example pulls coca-cola's posts
var _Uri = new Uri("http://www.facebook.com/feeds/page.php?format=rss20&id=40796308305");

// including user agent, otherwise FB rejects the request
var _Client = new HttpClient();
_Client.DefaultRequestHeaders.Add("user-agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)");

// fetch as string to avoid error
var _Response = await _Client.GetAsync(_Uri);
var _String = await _Response.Content.ReadAsStringAsync();

// convert to xml (will validate, too)
var _XmlDocument = new Windows.Data.Xml.Dom.XmlDocument();
_XmlDocument.LoadXml(_String);

// manually fill feed from xml
var _Feed = new Windows.Web.Syndication.SyndicationFeed();
_Feed.LoadFromXml(_XmlDocument);

// continue as usual...
foreach (var item in _Feed.Items)
{
    // do something
} 
```

祝你好运！

# sql - 查询优化 SQL

> ID：14395517
> 
> 赞同：1
> 
> 时间：2013-01-18T09:06:23.253
> 
> 标签：sql, optimization, union-all

好的，所以我已经连续尝试和测试了几个小时，但我似乎无法让我的查询更快地工作。

我有一个巨大的疑问，`UNION ALL`他们之间有很多。遗憾的是，查询执行大约需要 10 秒，当然，这对于用户来说等待时间太长了。

它看起来像这样（简化版）：

```
SELECT distinct  * 
FROM (
    SELECT 
        'QUD' as typeString, 
        1 as typeInt,
        Process.END_USER_PROJECT.id,
        .......,
        1 as actionAvailable
    FROM Process.END_USER_PROJECT (nolock)
    INNER JOIN Process.EXTERNAL_ORGANISATION (nolock)
        ON externalID = Process.EXTERNAL_ORGANISATION.Id
    WHERE externalID = 1111

UNION ALL

    SELECT 'SPECS' AS typeString, 
        2 as typeInt ,
        Process.SPECIFICATION_GENERAL.id,
        ......., 
        1 as actionAvailable
    FROM Process.SPECIFICATION_GENERAL (nolock)
    INNER JOIN Process.END_USER_PROJECT (nolock) 
        ON Process.SPECIFICATION_GENERAL.EndUserProjectId = Process.END_USER_PROJECT.id
    INNER JOIN ....
    WHERE externalID = 1112

UNION ALL

    ....................

UNION ALL

    ....................

--AND SO ON...
) AS myTempTable ORDER BY typeString, .... 
```

我一直在寻找`VIEWS`可能使其工作得更快，但事实并非如此。它给了我大约相同的时间来处理整个查询。

我的选择已经不多了，我真的应该让它发挥作用。

任何人都有优化的想法，特别是在我的情况下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:03:52.550

您至少应该在 externalID 上有一个索引：

```
Create index [indexname] on [tablename] (externalID) 
```

# ruby-on-rails - has_many 关系的“未定义方法”？

> ID：14395520
> 
> 赞同：1
> 
> 时间：2013-01-18T09:06:29.427
> 
> 标签：ruby-on-rails, has-many

为什么这不起作用？

```
class Customer < ActiveRecord::Base
    has_many :notes, :class_name => "CustomerNote", :foreign_key => 'customer_id'

    def self.called_this_month
        self.notes.where(:date => Date.today.beginning_of_month..Date.today.end_of_month).count
    end
end 
```

我收到此错误：

```
undefined method `notes` for #<Class:0x00000004b37190> 
```

备注型号：

```
class CustomerNote < ActiveRecord::Base
  self.table_name = "customer_contact"

  belongs_to :customer
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:30:00.350

**模型：**

```
class Customer < ActiveRecord::Base
     def self.called_this_month(customer)
             customer.notes.where(:date => Date.today.beginning_of_month..Date.today.end_of_month).count
     end
 end 
```

**控制器：**

```
@customer = Customer.find(params[:customer_id])

//this will give you the count of the method call as output.
@count  = Customer.called_this_month(@customer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:19:55.737

您不能`self.notes`在类方法中调用它，因为它读取为`Customer.notes`您想要“Customer.new.notes”的位置。

所以你必须做类似以下的事情

更改`def self.called_this_month`为`def called_this_month`

或者

```
self.notes.where(:date => Date.today.beginning_of_month..Date.today.end_of_month).count 
```

至

```
Customer.first.notes.where(:date => Date.today.beginning_of_month..Date.today.end_of_month).count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:20:19.483

`notes`不是类方法，是实例方法。如果您需要一个范围`notes`，请将其放入`Notes`模型中并使用类似的东西

```
def self.called_this_month
  where(:id => Notes.called_this_month.pluck(:customer_id).uniq)
end 
```

# php - 字符串后的正则表达式php

> ID：14395526
> 
> 赞同：0
> 
> 时间：2013-01-18T09:06:39.510
> 
> 标签：php, pattern-matching

嗨，我有一个很长的文本标准，我想在标准字符串之后取一部分字符串：

```
$string = "bla bla bla... Refer: my text /n bla bla bla"; 
```

我想取字符串：`my text`。在or之后`Refer:`和之前。可以用正则表达式吗？我已经用 substr 和 strpos 完成了这个，但我想优化我的文本。`/n``/r`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:20:40.147

\s 表示空格 ^ 表示除

```
preg_match('|.*Refer:\s+([^/n/r]*)|', $string, $out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:12:16.737

```
preg_match('/Refer:\s+(.*?)$/i', $string, $matches);
echo $matches[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:18:44.960

```
$regex = "/.*Refer:(.*?)(?:\/n|\/r)/";
preg_match($regex, $string, $matches);
echo $matches[1]; 
```

# wpf - 让一个接口从画布 WPF VB.net 继承

> ID：14395531
> 
> 赞同：0
> 
> 时间：2013-01-18T09:06:51.323
> 
> 标签：wpf, vb.net, class, interface

我的接口是用一些方法和属性定义的

```
Public Interface ITouchInterface
   'Inherits System.Windows.Controls.Canvas ' This is the problem

   'Methods and Properties

End Interface 
```

我了解我遇到的问题，该接口只能从另一个接口继承，因为`System.Windows.Controls.Canvas`它不是我不能从它继承的接口。

我的实现接口的类依赖于画布的属性来运行。

目前我的接口实现如下所示：

```
Public Class TouchClass
    Inherits Canvas
    Implements ITouchInterface

    'Implementation
End Class 
```

基本上，为了与我的应用程序的其余部分一起工作，我需要接口来指定从画布继承。应用程序的其余部分需要一个类型的对象`ITouchInterface`，但是在我当前的实现中，应用程序在实例化一个类之前不知道画布属性。

例如，我声明了一个`ITouchInterface`. 然后用实现接口的类填充它。现在我需要遍历这个列表并获取每个项目的宽度，但宽度是画布的一个属性，目前无法访问。

是否存在我不知道的画布界面或是否有任何替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:35:04.957

你可以添加一个抽象类，在它之间扮演你的接口角色。当然，这会导致更多的耦合......

这正是你想要的结果：你可以有几个不同的实现 ITouchInterface 并从画布继承的类

```
Public Interface ITouchInterface

End Interface

Public MustInherit Class TouchCanvasBase
    Inherits Canvas
    Implements ITouchInterface

End Class

Public Class TouchCanvas
    Inherits TouchCanvasBase

    'specific implementation

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:40:01.603

继承仍然意味着**是一个**，所以你说你的 ITouchInterface*是一个*画布。这听起来不对。

正如评论中所说，改为查看组合，这意味着**有一个**. 所以你的触摸界面*有一个*画布。这听起来已经更好了，但似乎仍然不完全正确。重新思考您的设计，看看 ITouchInterface 的客户真正需要什么。他们需要整个画布，还是只需要一些方法来绘制它，您可以轻松地将它们放在另一个界面中？

# vba - 意外的 App_Sheet_SelectionChange 行为

> ID：14395536
> 
> 赞同：1
> 
> 时间：2013-01-18T09:06:59.683
> 
> 标签：vba

我有一个包含两个项目的自定义菜单：“开”和“关”。“开”项调用加载项函数来初始化某些功能（十字准线）。按下“开”项后，我希望看到每次选择更改时十字准线移动（即单击一个单元格并突出显示相应的行/列）。因此，我已经实现了一些东西，`Worksheet_SelectionChange()`并打开功能使代码`Worksheet_SelectionChange()`做一些事情。但是，`Worksheet_SelectionChange`它是特定于工作表的，我想跨工作表使用此功能，而不必在我想使用十字准线的每个工作表中添加代码。所以，我到达了应用程序事件。因此，我声明

```
Public WithEvents App As Application 

Public Sub Auto_Open()
   Set App = Application
End Sub  

Private Sub App_SheetSelectionChange(ByVal Sh As Object, ByVal Target As Range)
   Call DrawCrossHair(...)
End Sub 
```

只要我不点击 Excel 进入另一个应用程序，一切都很酷。一旦发生这种情况，`App`就会重置为`Nothing`并且`App_SheetSelectionChange`不会被调用，因为 Auto_Open 不会在每个`"Excel_getFocus"`. 如何防止应用程序重置？还是我使用了错误的工具（应用程序事件）来实现我想要实现的目标？

非常感谢，丹尼尔

# android - 如何使谷歌电视中的焦点指示器（橙色矩形）不可见？

> ID：14395537
> 
> 赞同：1
> 
> 时间：2013-01-18T09:07:02.430
> 
> 标签：android, android-layout, google-tv

当我在 ListView 中为 TextView 应用以下选择器时，listItem 的指示器消失了。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:state_pressed="false" 
      android:drawable="@color/myGreenLight"/>
    <item android:state_pressed="true" android:drawable="@color/myGreenDark"/>
    <item android:drawable="@color/black"/> 
</selector> 
```

但是无论如何要禁用整个项目的指标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:22:29.297

这看起来像一个类似的问题。其中一个答案可能适用于您的情况。

[移除 EditText 的焦点边框](https://stackoverflow.com/questions/5478109/remove-focus-border-of-edittext)

问题是您为什么要摆脱选择器突出显示？用户如何知道项目被选中？

# php - Yii - 获取过滤后的 CGridView 的所有数据

> ID：14395539
> 
> 赞同：0
> 
> 时间：2013-01-18T09:07:13.050
> 
> 标签：php, yii

我有一个关于`CGridView`Yii 的问题。情况是我想将 a 中所有页面的当前过滤数据导出`CGridView`到 Excel 工作表。现在的问题是我正在使用 jQuery 获取 gridview 中每一行的 id。这意味着只有当前在分页页面上可见的行被发送到 excel 生成器，而不是其他页面上的行。

`CGridView`我的问题是，在 Yii 中有没有办法从某种对象中获取所有分页页面的所有数据？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:49:18.640

您可以使用`$.fn.yiiGridView.getSelection(containerID)`来检索 jQuery 中选定行的键值。然后您可以发布您的结果并检索导出的文件以供下载。

# c# - 获取和设置与指定索引关联的值

> ID：14395557
> 
> 赞同：2
> 
> 时间：2013-01-18T09:08:34.330
> 
> 标签：c#, list

我正在创建一个列表，并希望设置添加到列表中的项目的值，然后检索该值以显示。

```
// Create a list of strings

List<string> AuthorList = new List<string>();

AuthorList.Add("AA");

AuthorList.Add("BB");

AuthorList.Add("CC");

AuthorList.Add("DD");

AuthorList.Add("EE");

// Set Item value

AuthorList["AA"] = 20;

// Get Item value

Int16 age = Convert.ToInt16(AuthorList["AA"]);

// Get first item of a List

string auth = AuthorList[0];

Console.WriteLine(auth);

// Set first item of a List

AuthorList[0] = "New Author"; 
```

但是发生了错误

> “'System.Collections.Generic.List.this[int]' 的最佳重载方法匹配有一些无效参数”

帮助我更正此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:09:43.463

如果要存储密钥对，请使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)的单个值列表。

```
Dictionary<string,int> AuthorList  = new Dictionary<string,int>();
AuthorList.Add("AA", 20);
AuthorList.Add("BB", 30); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:10:33.447

您需要使用 a[`Dictionary<string,int>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)而不是 a `List<string>`。

```
var authorAges = new Dictionary<string,int>();

authorAges.Add("AA",60);
authorAges.Add("BB",61);
authorAges["CC"] = 63; //add or update

// Set Item value
authorAges["AA"] = 20;

// Get Item value
int age = authorAges["AA"];

// Get first item of a List
string auth = authorAges.Keys.First();
Console.WriteLine(auth);

// Set first item of a List 
// (You can't change the key of an existing item, 
//  but you can remove it and add a new item)
var firstKey = authorAges.Keys.First();
authorAges.Remove(firstKey);
authorAges["New author"] = 32; 
```

字典中真的没有“第一”，这毫无价值。也许您应该创建一个`Author`类并列出以下内容：

```
class Author 
{ 
   public string Name {get; set;}
   public int Age {get; set;}
} 
```

然后

```
var authors = new List<Author>();

authors.Add(new Author { Name = "AA" };
authors.Add(new Author { Name = "BB"};

// Get first item of a List
Author firstAuthor = authors[0];
Console.WriteLine(
    "First author -- Name:{0} Age:{1}",firstAuthor.Name, firstAuthor.Age);

// Get Item value
int age = authors[1].Age

// Set first item of a List 
authors[0] = new Author { Name = "New Author"}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:11:06.890

您不能将密钥对与[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx). 尝试使用[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx).

> 表示键和值的集合。

试试看；

```
Dictionary<string,int> YourAuthorList  = new Dictionary<string,int>(); 
```

`string`对于您的`AA`, `BB`,`CC`值，`int`对于`20`,`30`等。示例；

```
YourAuthorList.Add("AA", 20); 
```

# php - 只有变量可以通过引用传递错误 - 如何修复

> ID：14395567
> 
> 赞同：0
> 
> 时间：2013-01-18T09:09:11.273
> 
> 标签：php, mysqli

我正在尝试将数据插入数据库，但我在 bind_param() 中收到此错误：

```
Fatal error: Only variables can be passed by reference in ... on line 48 
```

我一直在网上搜索，但我不太明白这个错误是什么意思，因为在我所做的所有插入中，这是我第一次收到这个错误。

导致此错误的问题是什么？

下面是插入代码：

```
 $answersql = "INSERT INTO Penalty_Marks (PenaltyAnswer, PenaltyMarks, QuestionId) 
    VALUES (?, ?, ?)";

if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
}

   $c = count($_POST['incorrect']);

    for($i = 0;  $i < $c; $i++ )
    {

$insertanswer->bind_param('iii', $_POST['incorrect'][$i], $_POST['answerMarks'][$i], $_POST['numQuestion'][$i]); 
```

下面是它检索详细信息的表格（为了便于查看，下面的表格已被删减）：

```
<form id="PenaltyMarks" action="insertpenaltymarks.php" method="post">

    <table id='penaltytbl'>
    <?php

    foreach($ques_ans as $questionId => $inc_ans)
    {
        $q_row_span = count($inc_ans);
        $row_count = 0;
        $inc_ans = array_values($inc_ans);

    ?>

    <tr class="questiontd">
    <td>
    <input type="hidden" name="numQuestion" value="<?php echo$questionId?>" />
    </td>

    <td>
    <input type="hidden" class="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$row_count];?>">
    </td>

    <td>
    <input  name="answerMarks[]" type="text" data-type="qmark" value='0'  />
    </td>

    </tr>
        <?php
            //remaining incorrect answers in separate row (if any) follows here
        if($row_count < $q_row_span - 1) 
        {
            for($i=($row_count + 1); $i<$q_row_span; $i++) { ?>     
                <tr>
                <td>
                <input type="hidden" class="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$i];?>">
                </td>

                <td class="answermarkstd">
                <input  name="answerMarks[]" type="text" data-type="qmark" value='0'  />            
                </td>
                </tr>
        <?php
            }
        }
    }

    ?>
    </table>

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:22:38.620

问题是 bindParam 的参数实际上必须是变量，而不是字符串或数组。此代码应该可以工作：

```
$incorrect = $_POST['incorrect'][$i];
$answerMarks = $_POST['answerMarks'][$i];
$numQuestion = $_POST['numQuestion'][$i];
$insertanswer->bind_param('iii', $incorrect, $answerMarks, $numQuestion); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-18T09:25:04.393

```
Try this:
Declare variables x,y,z at appropriate locations.

$answersql = "INSERT INTO Penalty_Marks (PenaltyAnswer, PenaltyMarks, QuestionId) 
    VALUES (?, ?, ?)";

    $x = $_POST['incorrect'][$i];
    $y = $_POST['answerMarks'][$i];
    $z = $_POST['numQuestion'][$i];

if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
}

   $c = count($_POST['incorrect']);

    for($i = 0;  $i < $c; $i++ )
    {

$insertanswer->bind_param('iii', x,y,z);

Hope that solves it. 
```

# java - 使用 maven 和 eclipse 导出为 Jar 构建项目之间的区别

> ID：14395568
> 
> 赞同：9
> 
> 时间：2013-01-18T09:09:12.887
> 
> 标签：java, eclipse, maven, github, m2eclipse

这听起来像一个愚蠢的问题，但我真的很困惑。我从未使用过 maven，但我知道它用于构建项目。

所以，我有一个问题：当我们可以在 Eclipse 中构建项目（没有 Maven）时，为什么需要使用 Maven 构建项目。只需将 eclipse 项目导出为 JAR 并包含所需的库和所有内容。

假设，我从 github 下载任何项目。现在我可以在 Eclipse 中导入该项目并将其导出为 JAR 并使用它的功能。那么为什么所有人都建议使用 MAVEN 来构建项目并生成二进制文件并使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T09:24:36.747

首先，不是每个人都使用 Eclipse（即使在同一个团队中），不同的 IDE 可能会产生稍微不同的工件（JAR 文件）。

Maven 的一个优点是它不仅可以构建项目：

*   它倾向于约定优于配置，并建议项目的“标准”布局
*   它允许使用特定版本收集项目中所需的所有依赖项（与“lib/log4j.jar”之类的东西相反，没有指定版本）
*   它允许制作许多不同的工件：包含已编译代码或源代码的 JAR、javadoc、WAR 等。
*   它可以在 IDE 之外运行，通常在[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)服务器上

我建议即使是小型项目也使用 Maven :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T09:10:44.383

因为您很快就会希望使用自动化工具自动构建您的项目，并且没有 Eclipse 可以帮助您。

您很快就会需要的可能的东西：

*   在每次提交到您的存储库时构建您的项目
*   在持续集成工具 UI 中的某处单击即可构建您的项目
*   您的用户可能不了解或不关心 Eclipse，但他们知道如何使用 UI 来发布构建

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T09:18:03.250

假设一个简单的实时场景

开发环境 -> 生产环境（现在离开测试）

在开发环境中，您将拥有所有对开发人员友好的工具来减少您的写作工作量并花更多时间在逻辑上。

一旦你完成了你的部分，你将把它签入版本控制。

这应该现在转移到生产中。您将从版本控制中检出最新版本并投入生产

现在，你也不能在这里吃日食！因为你不会开发任何东西。在这种情况下，将一直使用一个简单的 pom.xml 和名为 Maven 的工具

并非所有时候，开发人员都会准备二进制文件。因此，假设某个不是开发人员的人正在部署您的应用程序。与其要求他打开 eclipse 并说 export blah blah blah，不如说，运行这个命令/批处理文件。该批处理文件显然将包含 maven 命令（mvn compile、mvn package）等。

最后，Eclipse 是为了缩短开发人员的开发时间，因为，由于简单的拼写错误，你可能会一次又一次地运行 maven，这可以被 Eclipse 缩短。在生产中，有一次，运行一个批处理文件。您的应用已部署

# r - 如何在 R 控制台中输出文本而不创建新行？

> ID：14395569
> 
> 赞同：51
> 
> 时间：2013-01-18T09:09:18.313
> 
> 标签：r, newline, rstudio, output-formatting

我想在我长时间运行的算法中输出一个进度指示器。我可以很容易地从我的算法中“冒泡”一个进度值（例如，通过专门为此目的调用提供的函数回调），但困难在于实际的文本输出过程。每次调用`print`都会创建一个新行，并且每个都以`[1]`.

**有没有办法在不同的时间打印而不引入换行符？**

具体来说，我想实现一个“动画”，如果在两个不同的时间观察，它看起来像下面这样。

```
0%... 
```

...

```
0%...2%...4%... 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-18T09:15:49.553

使用`cat()`代替`print()`：

```
cat("0%")
cat("..10%") 
```

输出：

```
0%..10% 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-18T09:16:40.527

呸，安德烈以 28 秒的优势击败了我。

```
> for (i in 1:10) {
+ cat(paste("..", i, ".."))
+ }
.. 1 .... 2 .... 3 .... 4 .... 5 .... 6 .... 7 .... 8 .... 9 .... 10 .. 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-18T09:18:19.437

也许你可以`plyr`

```
 l_ply(1:4,function(x) x+1,.progress= progress_text(char = '+'),.print=TRUE)
  |                                 |   0%[1] 2
  |++++++                           |  25%[1] 3
  |+++++++++++++++                  |  50%[1] 4
  |++++++++++++++++++++++           |  75%[1] 5
  |++++++++++++++++++++++++++++++++ |  100%[1] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-18T09:31:17.563

如果您真的需要这样的进度条，请使用`txtProgressBar`控制台输出。或者`winProgressBar`在 Windows 下查看窗口进度条。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-20T10:30:31.107

我相信您正在寻找`\r`如下`cat`功能：

```
for(i in 1:100) {
    cat('\r',
            i,
            '% |',
            rep('=', i / 4),
            ifelse(i == 100, '|\n',  '>'), sep = '')
    Sys.sleep(.1)
} 
```

# jquery - jqGrid - 可编辑：真的不工作

> ID：14395570
> 
> 赞同：1
> 
> 时间：2013-01-18T09:09:23.713
> 
> 标签：jquery, jqgrid

我为此发疯了..

即使在阅读了jqGrid 的[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules)之后，之前使用过这个网格（成功），现在我也无法编辑单元格。

我什至评论了大部分代码，并留下以下几行：

```
function initGridProjectDetail(options) {
    $("#" + options.table).jqGrid({
        url: options.dataUrl,
        colModel: [
            {name: 'CategoryName', label: 'Kategorie', editable: true }
        ],
        jsonReader: { id: 'Id' }
    });
} 
```

无法编辑此单元格的原因可能是什么？谢谢您的帮助。

**注意**：网格已呈现，有内容，甚至排序工作。唯一缺少的是“可编辑”功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:41:33.520

这完全是我的错。

```
onSelectRow: function (id) {
            if (id && id !== lastsel2) {
                jQuery("#" + options.table).restoreRow(lastsel2);
                jQuery("#" + options.table).editRow(id, true);
                lastsel2 = id;
            }
        }, 
```

使用示例源中的复制粘贴，我留下了错误的表 ID。我很欣赏奥列格的最后评论，因为它让我对此进行了调查。请写一个答案以接受它作为解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:15:49.683

我认为你应该只使用`jQuery(this)`而不是`jQuery("#" + options.table)`. 您可以在每个回调中使用`$(this)`or 。`jQuery(this)`您应该另外验证您是否定义了 variable `lastsel2`。

# jquery - event.preventDefault() 并返回 false；让我失望了

> ID：14395575
> 
> 赞同：1
> 
> 时间：2013-01-18T09:09:31.980
> 
> 标签：jquery, ajax, forms

我想我现在太累了，但为什么这不起作用？得到一个 id="contact" 的简单表格

```
 $("#contact").on('submit', function(event) {
       event.preventDefault();

       var name = $('#name').serialize();
       var email = $('#email').serialize();
       var message = $('#message').serialize();
       alert(name);

        }); 
    }); 
```

（我去掉了后面的 AJAX）为什么不阻止窗口刷新？返回假；也没有做任何事情..我可能在这里遗漏了一些明显的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:15:13.880

你可以试试这个：

```
$(document).on('submit', "#contact", function(event) {
   event.preventDefault();

   var name = $('#name').serialize();
   var email = $('#email').serialize();
   var message = $('#message').serialize();
   alert(name);
   return true; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:17:12.927

第一点：

*   您应该使用 .val() 而不是 serialize() 。
*   .serialize() 是适用于元素的方法，该方法返回如下字符串： field1=value1&field2=value2&...&fieldn=valuen

一个例子：

```
$("#contact").submit(function(event) {
    event.preventDefault();
    var name = $('#name').val(),
        email = $('#email').val(),
        message = $('#message').val();

    alert(name);
    return false; // "Defensive" line (i think it's not necessary)
}); 
```

我希望它会有所帮助！

# meteor - 所有模板的事件处理程序？

> ID：14395578
> 
> 赞同：4
> 
> 时间：2013-01-18T09:09:44.257
> 
> 标签：meteor

我想安装一个事件处理程序来处理所有`<a class="nav" />`链接。目前，我几乎在每个模板中都为事件映射提供了相同的条目。所以我得到像这样的条目

```
Template.XXX.events = { 
  'click a.nav'          : linkCallback
} 
```

到处都是。有没有办法在全球范围内安装事件处理程序？[查看文档](http://docs.meteor.com/#eventmaps)时我找不到方法，但[tmeasdays meteor-router](https://github.com/tmeasday/meteor-router)似乎能够做到。我只是想不通怎么做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T09:37:52.823

只需制作一个包含所有其他模板的模板并将事件附加到它：

```
<body>
  {{> body}}
</body>

<template name="body">
</template>

Template.body.events = function() {
  'click .nav': linkCallback
} 
```

# ruby-on-rails - 如何在两次之间进行搜索？

> ID：14395585
> 
> 赞同：1
> 
> 时间：2013-01-18T09:10:07.527
> 
> 标签：ruby-on-rails, ruby, time, rails-activerecord

如何使用 Rails 和 ActiveRecord*仅比较时间值？*例如，查找下午 3:00 之后创建的所有行？

我尝试使用`Time.parse`，但是他们似乎期望完整的 DateTime 值，而不是 Time （晚上 11:00 等）。

我基本上是在寻找两个日期之间存在的所有行，然后是两次之间。例如，在“3:00PM”之后创建的“21/01/2012”和“23/02/2012”之间创建的所有行。日期部分似乎工作正常，但是如果没有简单的 SQL，我似乎无法让时间部分工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:50:07.703

你可以这样做：

```
User.where("created_at > ? and created_at < ?", Time.now - 3.days, Time.now) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:27:33.253

据我了解，您正在应用一个函数来从 SQL 中的 datetime 属性中提取时间。像`select HOUR(created_at)`...

ActiveRecord 无法做到这一点，但是 gem [squeel](https://github.com/ernie/squeel#functions)在 Ruby 中做到了。

```
Person.select{coalesce(name, '<no name given>')} 
```

但是没有什么比用纯 SQL 做的根本不同。

# javascript - D3JS 嵌套插入。SVG 示例：文本分组

> ID：14395586
> 
> 赞同：1
> 
> 时间：2013-01-18T09:10:10.617
> 
> 标签：javascript, svg, d3.js

我一直在检查一些关于 D3JS 关于加入和嵌套的教程，但我无法解决下一个问题，我也在检查[http://bl.ocks.org/4061961](http://bl.ocks.org/4061961)之类的示例，但我没有找到所有解决方案魔法。

所以，我有一个元素数组，使用这个数组我可以为每个元素创建一个“g”标签，我可以为每个元素创建一个“文本”标签，但我无法将“文本”标签放在里面“g”标签。

所以我在 DOM 中得到的是：HTML -> BODY -> SVG -> G HTML -> BODY -> SVG -> TEXT

我喜欢的是：HTML -> BODY -> SVG -> G -> TEXT

我的小测试代码是这个：

```
data = ["1", "2", "3", "4", "5"];

// Grups de selecció
svg.selectAll("svg_group")
  .data(data)
  .enter()
  .append("g")
  .attr("class", 'svg_group');

// Text dels dies / anys
svg.selectAll("g .svg_group")
  .data(data)
  .enter()
  .append("text")
  .text( function(d) { return d; } ); 
```

我会很感激任何帮助。提前致谢。

更新 16:08

我需要向组中添加多个元素，如果可能的话，分两步。现在我在 DOM 中有这个：

```
 <svg id="gantt" width="500" height="500">
    <g class="svg_group">
    <g class="svg_group">
    <g class="svg_group">
    <g class="svg_group">
    <g class="svg_group">
    <text>1</text>
    <text>2</text>
    <text>3</text>
    <text>4</text>
    <text>5</text>
    <line>1</line>
    <line>2</line>
    <line>3</line>
    <line>4</line>
    <line>5</line>  
  </svg> 
```

我喜欢这样的东西：

```
 <svg id="gantt" width="500" height="500">
    <g class="svg_group">
      <text>1</text>
      <line>1</line>
    </g>
    <g class="svg_group">
      <text>2</text>
      <line>2</line>
    </g>
    <g class="svg_group">
      <text>3</text>
      <line>3</line>
    </g>
    <g class="svg_group">
      <text>4</text>
      <line>4</line>
    </g>
    <g class="svg_group">
      <text>5</text>
      <line>5</line>
    </g>
  </svg> 
```

示例：http: [//jsfiddle.net/y394h/10/](http://jsfiddle.net/y394h/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:28:26.733

这个怎么样？

```
svg.selectAll("svg_group")
  .data(data)
  .enter()
  .append("g")
  .attr("class", 'svg_group')
  .append("text")
  .text( function(d) { return d; } ); 
```

或者

```
var group = svg.selectAll("svg_group")
  .data(data)
  .enter()
  .append("g")
  .attr("class", 'svg_group');

group.append("text")
  .text( function(d) { return d; } ); 
```

# visual-studio-2012 - 使用 VS2012 & TFS2012 重新创建文件

> ID：14395589
> 
> 赞同：1
> 
> 时间：2013-01-18T09:10:28.533
> 
> 标签：visual-studio-2012

如果文件由 TFS 控制，我无法重新创建文件。

重现步骤：

> *   创建一个新的控制台应用程序。
> *   添加一个新文件：Class1.cs
> *   将整个解决方案签入到 TFS。
> *   删除 Class1.cs。
> *   再次创建 Class1.cs。

我收到一个错误消息框：

> 查看。在您的工作区中找不到项目 <...>，或者您没有访问它的权限。

将创建文件，但在“解决方案资源管理器”中它附近没有 TFS 图标。并且该文件仍将在“待更改”中标记为已删除，而不是已更新。

所以如果我想重新创建文件，我必须

> *   删除文件
> *   签入变更集（这会导致 CI​​ 构建中断）
> *   创建文件。

**问题是：** 这是本地工作空间的设计吗？或者这只是一个错误，稍后会修复？或者这只是我的本地错误，没有人可以在他们的机器上重现它？

PS 我需要重新创建一些文件，例如因为有一些方便的 VS 工具用于创建 WCF RIA 域服务类（包含所有相关元数据），但没有工具可以更新它们。而且我不想更改域服务的名称，否则我将不得不更新客户端。

**更新：** 我只是试图在另一台 PC 上重现该错误。文件 Class1.cs 已成功重新创建，并被标记为“已更新”。没有消息框窗口，但在输出窗口中有相同的消息：

> 在您的工作区中找不到项目 <...>，或者您没有访问它的权限。

如果我尝试重新创建 EDMX 模型，我仍然会收到一个带有该错误的消息框，但文件被成功识别为已编辑。我不明白，这两款电脑有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:47:26.280

我尝试重现您的情况，答案是“是”，详细信息如下：

标记为“已更新”的文件。正如您所说，输出窗口中有一条消息，但这条消息很有意义，因为当您第一次删除文件时，现在当您添加同名文件时，它被标记为“删除”团队资源管理器认为您想要编辑文件，因为它仍然在源代码管理中退出，所以当它尝试签出编辑时，因为它是默认配置，请查看图像，它无法在本地工作区找到文件，因为您删除了它，这是消息在输出窗口中。

![在此处输入图像描述](../Images/64a1e2ae2671acfb015193f03aef2e6a.png)

第二部分，您在有关 EDMX 文件的更新中提到：因此，当您使用实体设计器修改模型以及使用更新模型向导根据基础数据库的更改更新模型时，EDMX 文件已更新，因此生成了文件。

好的，让我给你一个黄金建议.....我们不会在源代码管理中保留任何生成的文件，但我们会保留生成它们的文件，我们会保留手动编辑的文件，这就是我们不保留的原因'不保留我们代码的 DLL，但我们保留生成该 DLL 的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:06:55.123

致拉德万先生。

1.  感谢您的回答。
2.  对不起我的英语不好。
3.  我在源代码管理选项中有相同的设置。
4.  **我删除了 Update 1，修复了 VS 并重新安装了 Update 1。现在一切正常。** 当我重新创建文件时，现在我在输出窗口而不是对话窗口中有一条消息。该文件被标记为已编辑。
5.  更新 Edmx 不同于从头开始重新创建它。据我所知，当您更新它时，EF 会保留您对概念部分所做的更改。在某些情况下，重新创建文件然后清理它会更容易。
6.  我们从未将 *.generated.cs 存储在 TFS 和其他在每次构建时自动生成的代码中。无论如何，谢谢你的建议。

# c# - 定位后重置控制位置

> ID：14395592
> 
> 赞同：6
> 
> 时间：2013-01-18T09:10:36.687
> 
> 标签：c#, winforms, localization

我有一个基本语言为英语的 WinForms 应用程序。我将表格本地化为德语。德语中的某些单词比英语对应的单词要长得多，因此我需要在德语版本的表单上移动一些控件。问题是当我移动英语控件时，德语本地化不反映移动（显然）。

但是有些控件被错误地移动了，我想重新设置它们，所以它们在英文表格上的移动也会反映在德文表格上。

如何重置德语表单上单个控件的位置和大小（或所有属性），以便在英语表单上移动时，控件将在表单的两种语言版本上移动？除了挖掘本地化的 .resx 文件并删除控件的所有属性分配之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T18:20:49.947

我是 Visual Studio 开发人员本地化产品的作者（为了全面披露）。从本地化的“.resx”文件中删除的任何属性，无论是在 Visual Studio 表单设计器中还是在“.resx”文件本身中手动删除，都会导致控件再次遵循该属性的默认语言值。然而，没有特定的功能可以处理这个问题。您需要在逐个控制的基础上自己进行操作。但是请注意，Visual Studio 有时是不稳定的，并且有各种错误，对于这个和其他问题，所以即使你使用设计器删除它们，事情也并不总是有效（上次我回顾了这种情况）。除非它现在已经修复（我对此表示怀疑），否则如果您将德语控件的“位置”属性设置回默认语言的“

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:18:05.557

我认为，如果您以无需更改控件的方式创建 UI，这将使您未来的开发更容易。然后你可以只翻译标签而不弄乱控制位置。

例如，将标签放在相应编辑字段的顶部，而不是左侧，使按钮足够大以处理所有文本。并考虑改写德语文本以使其尺寸更小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:38:05.957

现代本地化工具可以提供帮助。表格在工具中以可视方式呈现，允许编辑大小和位置值（如果已明确设置）。将显示自动尺寸控件，但尺寸/位置不可编辑。

在设计软件时要考虑本地化，这一点很重要。避免在运行时显着更改表单；避免硬编码和连接字符串等。

本地化工具将检查您的源代码或编译的二进制文件。它将发现要翻译的表单、字符串、菜单等。它会将这些呈现给语言学家进行翻译，然后将翻译后的源代码或二进制文件返回给您（取决于您开始使用的内容）。这些工具了解语言文件夹等的 .net 命名约定。

搜索“.net 软件本地化”以找到可以完成这项工作的有用工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-14T16:57:17.357

正如@Larry 所说，在设计时进行更改时，并非总是更新表单的 resx 文件。它们变得损坏，有时我们需要将 Localizable 属性设置为 false 并再次设置为 true 以解决此问题。但最重要的是保持 .Designer.cs 文件始终在编辑器中打开以假设更改，因为如果关闭它并不总是更新。如果您使用的语言不是默认语言，则切勿将 Localizable 属性设置为 false，除非您希望这是新的默认语言。

# android - 如何去除按钮后面的边框？

> ID：14395603
> 
> 赞同：34
> 
> 时间：2013-01-18T09:11:22.040
> 
> 标签：android, android-layout

我的应用程序按钮后面有一个灰色边框，我该如何删除它？

我这样定义`ImageButton`：

```
<ImageButton
    android:id="@+id/btn_photo_lib"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="startPhotoLibAction"
    android:src="@drawable/library_blau_2" /> 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-12-15T15:59:01.263

你必须使用`style="?android:attr/borderlessButtonStyle"`：

```
<ImageButton
    android:id="@+id/btn_photo_lib"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="startPhotoLibAction"
    android:src="@drawable/library_blau_2"
    style="?android:attr/borderlessButtonStyle"/> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-18T09:12:46.583

尝试这个 ：

```
<ImageButton
        android:id="@+id/btn_photo_lib"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startPhotoLibAction"
        android:background="@android:color/transparent"
        android:src="@drawable/library_blau_2" /> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-19T08:09:24.923

简单易行的方法是

```
android:background="?android:attr/selectableItemBackground" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-16T08:58:38.357

我发现这很好用：

机器人：背景=“@null”

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-18T09:23:25.173

只需将图像视图的背景更改为透明，如下所示：

```
<ImageButton
    android:id="@+id/btn_photo_lib"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent" <----- Set background.
    android:onClick="startPhotoLibAction"
    android:src="@drawable/library_blau_2" /> 
```

**或者**您只能设置背景，然后您不需要应用透明颜色。

```
<ImageButton
    android:id="@+id/btn_photo_lib"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/download" <--- set only the background
    android:onClick="startPhotoLibAction"
 /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-14T06:53:52.073

在你的按钮标签中试试这个 style="?android:attr/borderlessButtonStyle"

# jquery - 带有 .on() 的 Wordpress 和 jQuery 事件处理程序

> ID：14395613
> 
> 赞同：0
> 
> 时间：2013-01-18T09:12:25.740
> 
> 标签：jquery, wordpress, jquery-events

我在使用 jQuery `s` .on() `/`.bind()` 函数时遇到了一些问题。我想要做的是将点击事件附加到某个元素，因此无论何时在内容中使用它，都可以单击它并打开一个弹出窗口，而无需单独声明一个函数。

这是我的代码：它适用于简单的测试，但不适用于本地 Wordpress 环境。没有附加点击事件，调试没有告诉我任何事情......：

```
$(document).ready(function() {
$('#eins_audiotrigger').bind('click', function() {
    if($('#eins_audiotarget').attr('class') != 'fadeInUp'){
        $('#eins_audiotarget').removeClass().addClass('fadeInUp');
    }
    else {
        $('#eins_audiotarget').removeClass().addClass('fadeOutDown');   
    }
});

}); 
```

好吧，这里还有一些细节：

我用它来包含 jQuery：[将 jQuery 包含到 wordpress中](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way)

我尝试了所有关于 jQuery 的无冲突模式的方法。我还有另一个 (document).ready 函数被调用并且工作正常（多个 (document).ready 在一个文件中是否存在问题？

有了这整件事，我想调用一个简单的 css 动画，它在我要添加到元素的类中定义。基本上会飞进来，并且嵌入了一个媒体播放器。

这在直接从帖子中调用时有效，但如果应该提前将此事件添加到相应的按钮，则应该实现这一点，因为 Wordpress 在使用普通编辑器时会去除脚本标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:09:56.623

我终于想出来了！作为一个 Javascript-newbee 我意识到，我可以通过这样做简单地添加一个点击按钮：

```
 $('#trigger').click( function() {
        $('#trigger').removeClass().addClass('fadeOutDown');
        $('#eins_audiotarget').removeClass().addClass('fadeInUp');
});
$('#closeIt').click( function () {
        $('#eins_audiotarget').removeClass().addClass('fadeOutDown');
        $('#trigger').removeClass().addClass('fadeInUp');
        setTimeout( function() {$('#trigger').removeClass()}, 1000);
}); 
```

在这里可以学到很多东西！谢谢你的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:52:32.210

有时它是 $ 的问题，所以试试这个。

```
jQuery(document).ready(function($) {
    $('#eins_audiotrigger').bind('click', function() {
        if($('#eins_audiotarget').hasClass('fadeInUp') === false){
            $('#eins_audiotarget').removeClass().addClass('fadeInUp');
        }
        else {
            $('#eins_audiotarget').removeClass().addClass('fadeOutDown');   
        }
    });
}); 
```

# bash - 从 bash 中的命名管道读取并将其通过管道传输到 java 进程中

> ID：14395618
> 
> 赞同：0
> 
> 时间：2013-01-18T09:12:42.887
> 
> 标签：bash, named-pipes

我有一个由第三方开发者提供的 JAVA-Jar-File。文件从 STDIN 读取并写入 STDOUT。

我能够将 JAR 文件配置为写入日志文件。

但我还必须将输入源从 STDIN 重写为命名管道，这样我就可以通过自己的应用程序向 java-pocess 发送命令。

我已经尝试过从管道（bash）中读取这两件事：

```
cat < pipeline_name | java -jar external_application.jar 
```

这适用于第一个命令。收到第一行输入后，“猫”终止，之后我无法发送命令。

我的另一个尝试：

```
tail -f pipeline_name | java -jar external_application.jar 
```

这工作正常。所有命令都传递给 JAVA 应用程序。但是：如果 java-application 正在终止，tail -f 将像以前一样运行。

我需要一个解决方案，如果 JAVA 进程终止，则停止从管道读取。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:17:59.693

使用[bash 重定向](http://www.catonmat.net/blog/bash-one-liners-explained-part-three/)，[这是一个备忘单](http://www.catonmat.net/blog/bash-redirections-cheat-sheet/)

```
java -jar external_application.jar < pipeline_name 
```

< 表示 java 进程将从 pipeline_name 读取它的标准输入

# java - 我也想滚动相对布局，也想拖动相对布局中的图像视图，但按钮不在滚动视图中拖动

> ID：14395620
> 
> 赞同：2
> 
> 时间：2013-01-18T09:12:44.770
> 
> 标签：java, android, xml

这是我的**xml**布局在这里

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/vg"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/background"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/img1"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="16dp"
                android:src="@drawable/button" />

        </RelativeLayout>

        </ScrollView> 
```

当我删除此滚动条然后 imageview 移动
**MainActivity.Java时，上面是我的带有滚动条的 Xml 布局**

```
package com.example.wordcombat1;

import android.net.wifi.WifiConfiguration.Status;
import android.os.Bundle;
import android.app.Activity;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.ScrollView;

public class MainActivity extends Activity {

    private View selected_item = null;
    private int offset_x = 0;
    private int offset_y = 0;
    int status = 0;
    int windowwidth,windowheight;
    ImageView tv1;
    RelativeLayout.LayoutParams layoutParams1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final ViewGroup vg = (ViewGroup) findViewById(R.id.vg);
        windowwidth = getWindowManager().getDefaultDisplay().getWidth();
        windowheight = getWindowManager().getDefaultDisplay().getHeight();

        tv1 = (ImageView)findViewById(R.id.img1);
        tv1.setOnTouchListener(new View.OnTouchListener() {         

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
            switch(event.getActionMasked())
            {
                case MotionEvent.ACTION_DOWN:
                    break;
                case MotionEvent.ACTION_MOVE:
                    int x_cord = (int) event.getRawX();
                    int y_cord = (int) event.getRawY();
                    if (x_cord > windowwidth) {
                        x_cord = windowwidth;
                    }
                    if (y_cord > windowheight) {
                        y_cord = windowheight;
                    }
                    layoutParams1.leftMargin = x_cord - 25;
                    layoutParams1.topMargin = y_cord - 75;
                    tv1.setLayoutParams(layoutParams1);
                    break;
                default:
                    break;
            }
            return true;
        }
        });
    }

} 
```

任何人都可以帮助我如何移动这两件事。相对布局也滚动以及 imageview 也正确拖动。没有滚动条 imageview 移动得很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:42:23.520

使用网格视图而不是滚动视图我认为你的问题解决了

# vb.net - 用于大写和小写的文本框

> ID：14395625
> 
> 赞同：0
> 
> 时间：2013-01-18T09:12:55.197
> 
> 标签：vb.net

我有一个文本框，可以从另一个文本框中查找单词。除非我用完全相同的大写或小写输入了完全相同的单词，否则它不会找到该单词。视觉基础网

我如何使文本框能够接受天气它找到的单词有大写和小写，所以如果我搜索单词“John”并且文本框有单词“john”它将起作用，请注意“J”是大写。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:17:41.983

尝试这个：

```
If TextBox2.Text.ToLower.Contains(TextBox1.Text.ToLower) Then
    '[...]
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:16:41.027

这应该工作

```
Textbox1.Text.ToUpper().Contains(Textbox2.Text.ToUpper()) 
```

但是，为了将来参考，我强烈建议您先尝试一下。将您尝试的内容与您的解释一起发布。像你刚才那样要求代码是不会被接受的，尤其是在像这样的简单任务上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:20:35.670

使用 IndexOf 和不区分大小写的搜索

```
If Textbox1.Text.IndexOf(Textbox2.Test, StringComparison.InvariantIgnoreCase) >= 0 Then
    'The string was found, do something with it.
End If 
```

# asp.net-mvc - 在 MVC 的母版页中添加功能

> ID：14395630
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:02.507
> 
> 标签：asp.net-mvc, master-pages

我们如何在 MVC 的母版页中添加功能。我正在使用 razor 视图引擎，并且有一些使用“site.cshtml”作为母版页的视图。现在我希望所有视图都有一些搜索框和按钮来搜索，所以我在母版页（site.cshtml）中放置了一个搜索框和按钮。现在我想在按钮点击上添加功能。我应该在哪里编写代码？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:43:10.483

您应该将表单添加到您的母版页，在您的控制器之一中定义搜索方法，并在需要时定义搜索视图以显示结果。可以像下面的例子一样定义表格：

```
@using (@Html.BeginForm("Search", "Home", FormMethod.Post))
{

    <label for="searchTerm">Search</label>
    @Html.TextBox("searchTerm")
    <input type="submit" value="Search"/>
} 
```

控制器`Search`中的操作在哪里，是作为参数传递的搜索字符串`Home``searchTerm`

# php - php创建没有类的对象

> ID：14395631
> 
> 赞同：366
> 
> 时间：2013-01-18T09:13:03.307
> 
> 标签：php

在 JavaScript 中，您可以通过以下方式轻松创建没有类的对象：

```
 myObj = {};
 myObj.abc = "aaaa"; 
```

对于 PHP，我找到了这个，但它已经有将近 4 年的历史了： http: [//www.subclosure.com/php-creating-anonymous-objects-on-the-fly.html](http://www.subclosure.com/php-creating-anonymous-objects-on-the-fly.html)

```
$obj = (object) array('foo' => 'bar', 'property' => 'value'); 
```

现在有了 2013 年的 PHP 5.4，还有其他选择吗？

* * *

## 回答 #1

> 赞同：780
> 
> 时间：2013-01-18T09:16:07.553

您可以随时使用`new stdClass()`. 示例代码：

```
 $object = new stdClass();
   $object->property = 'Here we go';

   var_dump($object);
   /*
   outputs:

   object(stdClass)#2 (1) {
      ["property"]=>
      string(10) "Here we go"
    }
   */ 
```

同样从 PHP 5.4 开始，您可以通过以下方式获得相同的输出：

```
$object = (object) ['property' => 'Here we go']; 
```

# php - 在 SugarCRM 的查看页面中检索引用的表数据

> ID：14395633
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:13.250
> 
> 标签：php, crm, sugarcrm

我是 PHP 和 SugarCRM 的新手，我在我的模块下编写了自己的 DetailView.php 和 DetailView.html 来制作全新的布局。已经知道当前的 bean 可以通过以下方法获得

```
$focus = new PYR_Player();
$detailView = new DetailView();
$offset=0;
$result = $detailView->processSugarBean("PYR_Player", $focus, $offset); 
```

但是如何从引用的表中获取列表数据呢？我尝试了 processUnionBeans，但不知道如何获取 subpanel_definitions。有任何想法吗？

```
$query=$detailView->processUnionBeans($focus, $subpanel_definitions, "pyr_player_pyr_balance_CELL"); 
```

SugarCRM 版本是 Pro 6.5.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T03:23:53.197

要自定义“子面板”中引用列表的查询，只需更改 layoutdefs.ext.php 中的“get_subpanel_data”属性，即可指定自定义查询

```
 $layout_defs['Accounts'] = array(
    'subpanel_setup' => array(
        'xxxs' => array(
            'order' => 30,
            'module' => 'xxx',
            'sort_order' => 'desc',
            'sort_by' => 'start_date',
            'subpanel_name' => 'XXXForAccounts',
            'get_subpanel_data' => 'function:get_xxxs_list_query',  // customed query sql.
            'add_subpanel_data' => 'id',
            'title_key' => 'LBL_XXX_SUBPANEL_TITLE',
            'default_hidden' => true,
        ),
    ),
); 
```

然后在Account.php中添加函数

```
function get_xxxs_list_query(){ ... return sql;} 
```

# sql - 如何在表上进行自连接。

> ID：14395634
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:18.747
> 
> 标签：sql

我需要编写一个自联接查询

我的表是：-

```
id locid parentid filename 

1    1      0       word 
2    1      0       excel 
3    1      1       power 
4    2      0       word 
5    2      4       power 
```

> 我只需要使用 selfjoin 检索 parentid=0 的那些数据

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:19:13.967

我不明白为什么需要自加入，因为您可以使用`WHERE`-clause 获得所需的一切：

```
SELECT
    id, locid, parentid, filename
FROM
    dbo.YourTable
WHERE
    parentid = 0 
```

也许您还想要父记录的所有列：

```
SELECT
    p.id AS ParentID, p.locid AS PlocID, p.parentid AS ParentID, p.filename AS ParentFileName,
    c.id, c.locid, c.parentid, c.filename
FROM
    dbo.YourTable p
    INNER JOIN dbo.YourTable c 
        ON p.id = c.parentid
WHERE
    c.parentid = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:32:44.560

我用这个：

```
CREATE TABLE my_table(ID NUMBER, locid NUMBER, parentid NUMBER, filename VARCHAR2(10));
BEGIN

INSERT INTO my_table VALUES(1,1,0,'word');
INSERT INTO my_table VALUES(2,1,0,'excel');
INSERT INTO my_table VALUES(3,1,1,'power');
INSERT INTO my_table VALUES(4,2,0,'word');
INSERT INTO my_table VALUES(5,2,4,'power');
END;
/ 
```

通常的方法是：

```
SELECT * FROM my_table;

select * from my_table  where parentid=0;

SELECT  distinct t1.ID, t1.locid, t1.parentid, t1.filename FROM my_table t1
JOIN my_table t2 ON t1.parentid = t2.parentid AND t2.parentid = 0; 
```

结果为：

```
1   1   0   word
2   1   0   excel
4   2   0   word 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:23:26.110

从您的查询中，不清楚您要使用自联接。

不管怎样，下面是一个例子，它可以让你清楚地了解自我加入。

假设员工是包含与员工相关的数据的表。员工可以是其他员工的经理，但自己可以被视为任何组织的员工。

示例：

表名：员工

```
EmployeeID  EmployeeName    ManagerID         
    1            A            null         
    2            B             1         
    3            C             1         
    4            D             3         
    5            E             3 
```

询问：

```
select e1.EmployeeName as Employee,
    e2.EmployeeName as ReportsTo
from employees e1 
left outer join employees e2
on e1.ManagerID  = e2.EmployeeID 
order by e1.EmployeeID 
```

输出将如下：

```
Employee  Reports To
-------- ----------- 
  B          A    
  C          A    
  D          C    
  E          C 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:25:23.340

试试这个：

```
SELECT *.t1
FROM Table1 AS t1
JOIN Table1 t2 ON t1.id = t2.parentid AND t2.parentid = 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T09:41:17.263

我认为您正在寻找自我加入。[在这里](https://stackoverflow.com/questions/14279757/join-data-from-same-table)检查一下，我已经给出了解释。

例如：
**表名**：员工
**字段**：EmpId、EmpName、ManagerId

现在，如果您想获取处于经理职位的员工的详细信息，我们需要编写如下查询：

```
SELECT e1.EmpId, e1.EmpName 
FROM EmployeeDetails e1, EmployeeDetails e2 
where e1.EmpId=e2.ManagerId; 
```

希望它会帮助你。

有关更多信息，请查看[此](http://www.w3resource.com/sql/joins/perform-a-self-join.php)链接。

# c# - C#中如何匹配css样式的文本

> ID：14395635
> 
> 赞同：1
> 
> 时间：2013-01-18T09:13:18.883
> 
> 标签：c#, css, regex, match

我在文本中遇到了“匹配器”css 样式的问题。我想获得以下风格：

**风格搜索**

```
<a id="d325" style="color: #ffffff;"> Visio Infrastructure and Applications </ a> 
```

**使用的正则表达式：**

```
Regex myRegex = new Regex(@"<a id=""d(.+?)"" style=""(.+)"" ><\/a>"); 
```

我认为问题是`style = "color: # fffff"`，但我就是无法理解。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:20:37.983

您的正则表达式的问题是

```
Regex myRegex = new Regex(@"<a id=""d(.+?)"" style=""(.+)"" ><\/a>");
                                                           ^         no space in the string
                                                             ^       the text between the tags is not matched
                                                                ^    there is a space in the string 
```

另一个问题是，正则表达式是否适合这项工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:25:33.160

从我的角度来看，您只是忘记了正则表达式中的空格

```
<a\sid="d(.+?)"\sstyle="(.+)">.*?</a> 
```

你得到了结果：**325**和**颜色：#ffffff**；

是你想要的结果吗？

# javascript - 使用 scrollTop() 从浏览器窗口底部检测 30%

> ID：14395636
> 
> 赞同：5
> 
> 时间：2013-01-18T09:13:22.553
> 
> 标签：javascript, jquery

我的代码可以像下面这样检测浏览器窗口底部，然后运行`last_msg_funtion();`：

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
       last_msg_funtion();
    }
}); 
```

我的问题是用户需要向下滚动直到底部（*页脚*）然后`last_msg_funtion();`才会运行但我想调整检测可能从底部大约 30%

见下图： ![在此处输入图像描述](../Images/2f061cebf7f351e3806108bdcb06f680.png)

我的网站：[点击这里](http://www.micespanel.com/classified.php)

完整代码：[点击这里](http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:19:08.643

尝试这个：

```
$(window).scroll(function(){
    if ($(window).scrollTop() == ($(document).height() * 0.7) - $(window).height()){
       last_msg_funtion();
    }
}); 
```

请注意，`* 0.7`这意味着该函数将在滚动到页面下方的 70% 时触发 - 即。30% 从底部开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T17:33:52.617

试试这些：

```
$(window).scroll(function(){
    if ($(window).scrollTop() >= ($(document).height() * 0.7) - $(window).height()){
       last_msg_funtion();
    }
}); 
```

你必须`>=`在 if 条件下使用。

如果你使用`==`，那么 last_msg_funtion() 只会在滚动到 70% 时调用。

如果您使用`>=`，那么 last_msg_funtion() 将仅在滚动大于 70% 时调用。

# c++ - 在 C++ 中为类的助手使用静态函数

> ID：14395638
> 
> 赞同：2
> 
> 时间：2013-01-18T09:13:22.820
> 
> 标签：c++

在 C++ 中使用静态函数作为助手仍然值得吗？

示例：在 file.cpp 中

```
static void helperFunc() { do something }

// class implementation
// ...

// some public method, not static
void myClass::doSomething() { helperFunc(); } 
```

这样我就不必在类的声明中声明私有方法。

或者最好使用未命名的命名空间并写入（在与上面相同的文件中）？

```
namespace {
    void helperFunc() { }
} 
```

什么是更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:34:11.993

你的两个例子都不比另一个好。这是风格问题。`static`关键字更具表现力。它直接说明“不要导出此名称”。使用匿名命名空间并不那么富有表现力。名称不会被导出的事实是副作用，而不是主要功能。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-18T09:17:50.487

最好在类中声明一个私有（可能是静态的）方法。

# post - 413 向 CloudBees 发送请求时请求实体太大

> ID：14395639
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:32.200
> 
> 标签：post, cloudbees, multipartform-data

我正在尝试通过 HTML 表单上传一个 500 MB 的文件。该网站托管在 CloudBees RUN@Cloud 上。

我在实例的访问日志中收到 413（请求实体太大）错误：

```
188.180.79.66 - - [18/Jan/2013:08:33:59 +0000] "POST /upload HTTP/1.1" 413 600 "http://website.net/uploadsite/" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11" 
```

如何配置 CloudBees 实例的最大上传大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:53:09.567

我认为通常没有一种方法可以使其可靠。

您可以为您的应用配置设置 proxyBuffering=false - 这应该有助于它应对更大的上传（我们将其用于应用部署）

但是通过网络表单获取 500MB 似乎是一种错误的技术——您希望拥有可以为该大小及以上的文件进行可恢复上传的东西。

# codeigniter - 更新 id 不等于当前 id 的所有记录

> ID：14395640
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:36.250
> 
> 标签：codeigniter

```
$id = $this->db->query("SELECT LAST_INSERT_ID() AS ID")->row();
$w = $this->db->query("UPDATE bet_type_default SET current = 0 WHERE id <> ".$id."  "); 
```

错误输出为：

> 遇到 PHP 错误
> 
> 严重性：4096
> 
> 消息：stdClass 类的对象无法转换为字符串
> 
> 文件名：models/model_name.php
> 
> 行号：29 发生数据库错误
> 
> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法
> 
> 更新 bet_type_default SET current = 0 WHERE id <>
> 
> 文件名：C:\wamp\www\testing\system\database\DB_driver.php
> 
> 行号：330

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:19:52.523

尝试 ：

```
$row = $this->db->query("SELECT LAST_INSERT_ID() AS ID ")->row_array();

$w = $this->db->query(
             "UPDATE bet_type_default SET current = 0 WHERE id <> ".$row['ID']
     ); 
```

相反，您应该使用活动记录模式：

```
$id = $this->db->insert_id();
$this->db->where('id <> ', $id)
         ->update('bet_type_default' , array('current'=>0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:29:38.943

试试这个-

```
$id = $this->db->insert_id();
$w = $this->db->query("UPDATE bet_type_default SET current = 0 WHERE id <> $id"); 
```

# wcf - 同一个 WCF 服务的多个实例？

> ID：14395643
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:48.550
> 
> 标签：wcf, visual-studio-2012

我试图在 Visual Studio 2012 中运行同一 WCF 服务的多个实例。该服务需要是有状态的，所以我使用`[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]`. 服务需要模仿服务器行为，因为无论哪个客户端连接到它们，它们都必须保持状态。

我怎样才能做到这一点？

**- - 编辑 - -**

一个示例：服务的三个实例分别称为 Shop1、Shop2 和 Shop3。每个人都有自己的平衡作为“状态”。Client1 和 Client2 现在从 Shop1 购买东西，这涉及增加 Shop1 的余额。客户 3 从 Shop2 购买了一些东西，这增加了它的余额。

目的是 Shop1、Shop2 和 Shop3 托管在不同的机器上，但出于测试目的，我想在同一台机器上运行它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:20:22.567

对双向使用回调模型，可以处理更多的客户端

或者

`[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]`在静态属性中设置和保存状态

* * *

```
var serviseHost1 = new ServiceHost(typeof(Shop));
serviseHost1.AddServiceEndpoint(typeof(Shop), binding, endpoint);
serviseHost1.Open();
var serviseHost2 = new ServiceHost(typeof(Shop));
serviseHost2.AddServiceEndpoint(typeof(Shop), binding, endpoint);
serviseHost2.Open(); 
```

# python - 在 Python 中使用 .find 方法时如何获取第二个匹配的对象

> ID：14395646
> 
> 赞同：0
> 
> 时间：2013-01-18T09:13:56.930
> 
> 标签：python, python-2.7, beautifulsoup

我正在使用以下代码从网站获取计划详细信息。

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import urllib
import time
from bs4 import BeautifulSoup
from itertools import islice

page = urllib2.urlopen('http://www.t-mobile.com/shop/plans/individual-plans.aspx').read()
soup = BeautifulSoup(page)

#find the container for all the plans
tabcontent = soup.find('div', {"id": "divIndFamilyDetails"})
containers = tabcontent.findAll('ul', {"class": "plans"})

for plan in containers:
  planTitle = plan.find("li", {"class": "detail"})
  if planTitle:
       title = planTitle.find("h3").text     
       print title 
```

目前`print title`正在打印第一个匹配的标题，计划变量还有一个具有相同类和元素组合的变量。我想打印那个。

我也尝试过使用`findNext`，但它再次打印了相同的结果。我不知道如何使用`findAll`方法来完成此操作。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:03:17.350

`findAll`返回一个列表，所以只需引用索引：

```
title2 = planTitle.findAll("h3")[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:23:47.937

定义自己的方法：

```
def find_second(container, item):
    idx1 = container.find(item)
    return container[idx1+1:].find(item) + idx1 
```

# java - Linux内存问题..用java程序

> ID：14395649
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:14:10.510
> 
> 标签：java, linux, memory

> **可能重复：**
> [如何设置 JVM 的最大内存使用量？](https://stackoverflow.com/questions/1493913/how-to-set-the-maximum-memory-usage-for-jvm)

我正在运行一个 java 程序，但是当内存使用率达到 26.1% 时，它不再增加，程序变得非常慢。

可能是什么问题呢？java有内存使用限制吗？或者Linux上每个应用程序的内存限制？

java 版本“1.7.0_11”Java(TM) SE 运行时环境（构建 1.7.0_11-b21）Java HotSpot(TM) 64 位服务器 VM（构建 23.6-b04，混合模式）

* * *

```
Tasks: 126 total,   1 running, 125 sleeping,   0 stopped,   0 zombie
Cpu(s): 97.5%us,  0.4%sy,  0.0%ni,  2.1%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  33018800k total,  9522548k used, 23496252k free,    12100k buffers
Swap: 32764528k total,        0k used, 32764528k free,   391812k cached
  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 3463 wonn24    20   0 8769m 8.2g 9.8m S 391.3 26.1 257:09.24 java
 3725 hong8e    20   0 14876 1148  872 R  0.3  0.0   0:01.81 top
    1 root      20   0  4088  972  720 S  0.0  0.0   0:00.71 init
    2 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kthreadd
    3 root      RT  -5     0    0    0 S  0.0  0.0   0:00.17 migration/0
    4 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/0
    5 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/0
    6 root      RT  -5     0    0    0 S  0.0  0.0   0:00.15 migration/1
    7 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:22:24.283

默认情况下，Java 的服务器版本的最大堆大小为主内存的 1/4。由于库和线程堆栈的少量开销，这很容易占据主内存的 26% 或 27%。

当您的 JVM 开始填满时，执行 GC 所需的时间会更短，并且可用内存越少意味着它也更频繁地发生（非常糟糕）理想情况下，您的实际使用量可能低至最大大小的 40%。在您的情况下，您的实际使用量可能至少为 7 GB。

我建议您尝试将最大堆大小增加到至少 16 GB，如果可以节省内存，可能会增加到 24 GB。即`-Xmx16g`或`-Xmx24g`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:18:15.263

默认情况下，Java 的堆大小限制为 64Mb（如果内存服务器......）您可以使用命令行参数增加它，但在此之前，请确保您需要额外的内存并且没有泄漏。

# php - 带有 charset=utf-8 的 PHP 邮件标头会发送到垃圾邮件

> ID：14395652
> 
> 赞同：2
> 
> 时间：2013-01-18T09:14:20.597
> 
> 标签：php

我在 PHP 中使用以下标头发送邮件，但邮件总是在垃圾邮件中接收。

```
 $headers   = 'MIME-Version: 1.0' . "\r\n";
     $headers  .= 'From:noreply<noreply@noreply.com>'. "\r\n";
     $headers  .= "Content-type: text/html;\r\n charset=utf-8\r\n";
     $headers  .= "Content-Transfer-Encoding: 8bit\r\n"; 
```

如何防止邮件从垃圾邮件中获取。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:18:59.200

一般来说，电子邮件在接收端被归类为垃圾邮件或非垃圾邮件，而不是发送端 - 否则，垃圾邮件发送者会简单地说他们所有的邮件都不是垃圾邮件，完全违背了目的。因此，您不能只强制将邮件发送到发件人的收件箱。

但是，您可能需要做的是查看您用于发送邮件的机器当前是否列在任何垃圾邮件阻止列表中，如果是，请采取必要的步骤将其从这些阻止列表中删除。最常见的可能是 Spamhaus [http://www.spamhaus.org/](http://www.spamhaus.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-22T04:58:00.060

```
 $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
    $headers .= 'Cc: notifications@cityiot.ca' . "\r\n";*/
    $headers .= 'From: info@depictr.com'. "\r\n"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-22T11:09:48.737

```
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=UTF-8\r\n";
$headers .= "From: example@example.com\r\n";
$headers .= "Reply-To: example@example.com\r\n"; 
```

# delphi - 创建新类型

> ID：14395653
> 
> 赞同：1
> 
> 时间：2013-01-18T09:14:31.673
> 
> 标签：delphi, delphi-xe2

在 delphi 中，我想创建一个复制 TShape 的新类型（机器）。主要是因为想要添加更多的程序和功能。例如我可以做这样的事情

```
Machine.type('402') 
```

它会绘制形状，但具有定义的高度/宽度。像这样

```
Machine.before('Microclean'); 
```

它会知道将形状放在哪里。

所以..两部分问题。
1\. 制作一种新类型的声音是否符合我的需要？2.我如何制作一个新的空白类型，作为它自己的单元，并可以添加我的新程序？

谢谢格伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:20:03.193

听起来您需要一个继承自 TShape 的新类：

```
TMachine = class(TShape)
public
  procedure MyType(const AType: string);
  procedure Before(const ABfore: string);
end; 
```

然后，您可以为这两个过程提供代码。

请注意，您不能使用 type 作为过程名称 - 这是一个保留字。此外，使用“T”作为类名前缀也是 Delphi 约定（但不是要求）

# php - 如何在 SQL 查询中使用 preg 变量

> ID：14395660
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:14:58.827
> 
> 标签：php, sql, preg-replace, preg-match

我在我的 bbcode 中使用了用户 ID，但我想显示用户名！所以我想要一个查询来做类似的事情

```
SELECT username 
FROM users 
WHERE id = "$1"'; 
```

这怎么可能？或者有没有其他解决方案？我希望输出是“约翰说”而不是“2 说”。

```
<?php
$str = "[quote=2]Foobar[/quote]";

$match = "/\[quote=(.*?)\](.*?)\[\/quote\]/is";
$replace = "<div class=\"quote\">$1 said:<br />>$2</div>";
$bbcode = preg_replace($match, $replace, $str);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:23:53.823

你使用[preg_replace_callback](http://php.net/manual/de/function.preg-replace-callback.php)函数来做，

```
$bbcode = preg_replace_callback($match, function($matches){
       // execute query
       $query = "SELECT username FROM users WHERE id = '{$matches[1]}'";
       // get user name
       $username = $row['username']; // just for illustration.
       // return formatted string.
       return "<div class=\"quote\">$username said:<br />>$matches[2]</div>";
}, $str); 
```

哦，还有更好的方法。为它们中的每一个运行 SQL 查询并不是一个好主意。因此，首先获取所有用户 ID 的内容。然后从 db 中获取所有对应的名称。

```
$match = "/\[quote=(.*?)\](.*?)\[\/quote\]/is";
preg_match_all($match, $str, $matches);

$query = "SELECT id, username from tbl1 where id IN (".implode(",", $matches[1]).")";
// run the query. get all the row in a hash.
$hash[$row['id']] = $hash[$row['username']];

$bbcode = preg_replace_callback($match, create_function(
    '$m',
    'global $hash;return "<div class=\\"quote\\">{$hash[$m[1]]} said:<br />$m[2]</div>";'
    ), $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:22:04.490

您需要[preg_replace_callback](http://php.net/manual/de/function.preg-replace-callback.php)修改替换/将用户 ID 替换为正确的用户名，然后再将其插入到您的字符串中。

# java - activemq http代理

> ID：14395664
> 
> 赞同：8
> 
> 时间：2013-01-18T09:15:27.463
> 
> 标签：java, jakarta-ee, jms, activemq, http-proxy

我需要通过 HTTP/HTTPS 代理将 ActiveMQ-Listener 连接到防火墙外的代理。我到处搜索，但没有找到如何为 AcitveMQ-Client 设置代理设置的解决方案。

ActiveMQ 正在使用 Apache HttpClient，但我不知道如何在 ActiveMQ 中操作该客户端的创建。HttpClient 不使用 htttps.proxyHost 和 https.proxyPort。

有没有办法为 HttpClient 的所有实例设置全局 http/https 代理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:13:32.687

ActiveMQ [HttpClientTransport](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.activemq/activemq-optional/5.6.0/org/apache/activemq/transport/http/HttpClientTransport.java?av=h#HttpClientTransport)包含以下可用于指定代理主机和端口的方法：

```
public void setProxyHost(String proxyHost)
public void setProxyPort(int proxyPort) 
```

对于 5.6+ 版本，您还可以提供代理用户名和密码：

```
public void setProxyUser(String proxyUser)
public void setProxyPassword(String proxyPassword) 
```

要配置 JmsInvokerProxyFactoryBean：

```
<bean id="jmsClientFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
      <value>http://myendpoint.somewhere.com:5186?proxyUser=fred&amp;proxyPassword=ahoy&amp;proxyHost=myproxyhost.somewhere.com&amp;proxyPort=8081</value>
    </property>
</bean>

<bean id="remotingService"
        class="org.springframework.jms.remoting.JmsInvokerProxyFactoryBean">
      <property name="serviceInterface" value="com.foo.CheckingAccountService"/>
      <property name="connectionFactory" ref="jmsClientFactory"/>
      <property name="queue" ref="queue"/>
   </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-26T11:17:09.147

如果您不使用 xml 配置，这是在 ActiveMQ 中启用 http 代理的方法：

1.  将 activemq-http 库添加到类路径（[https://mvnrepository.com/artifact/org.apache.activemq/activemq-http](https://mvnrepository.com/artifact/org.apache.activemq/activemq-http)）

2.  添加`proxyHost`和`proxyPort`作为 URI 参数并使用该 URI 创建连接工厂：

    ```
    URI brokerUri = new URI("http://host:port");
    Map<String, String> additionalParameters = new HashMap<>();
    additionalParameters.put("proxyHost", "localhost");
    additionalParameters.put("proxyPort", "8888");
    additionalParameters.put("proxyUser", "xxxx"); // optional
    additionalParameters.put("proxyPassword", "xxxx"); // optional
    brokerUri = org.apache.activemq.util.URISupport.applyParameters(brokerUri, additionalParameters);
    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(brokerUri);
    Connection connection = connectionFactory.createConnection(); 
    ```

# javascript - 搜索后提交按钮不起作用

> ID：14395668
> 
> 赞同：0
> 
> 时间：2013-01-18T09:15:40.377
> 
> 标签：javascript, ajax, ruby-on-rails-3

我一直在寻找解决方案，但这是不可能的。我希望它得到很好的解释。

我有一个带有小表单的用户列表来更改数据库中的一个属性（该属性是知道用户已经完成了签到）。

![在此处输入图像描述](../Images/c6f67159bc953bb6e4d6af5c83fc707a.png)

还有一个搜索器使用 AJAX 显示结果，这样所有页面都不会重新加载。当我第一次加载页面时，浏览器呈现 HTML，并且`Save`按钮按预期工作。但是当我使用搜索器并出现列表（使用 JS）时，提交按钮不起作用。在 Mozilla Firefox 中什么都不做，在 Google Chrome 中我得到这个错误：`No route matches "user's profile route"`. 搜索器工作正常（显示正确的用户）。我使用 Rails 3.0.1 和 Ruby 1.8.7

**check_in.html.erb**

这是搜索器和渲染调用

```
<%= form_tag({:controller => "admins", :action => "check_in"}, :id => "users_search", :method => "get", :html => {:autocomplete => "off"}) do %>
  <%= hidden_field_tag :selected_event_id, params[:selected_event_id] %>
  <p>
     <%= text_field_tag :search, params[:search] %>
     <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>    
<div id="check_in"><%= render :partial => 'check_in' %></div> 
```

**_check_in.html.erb**

这是上面渲染的部分

```
 <%@event_user_infos.each do |user_info|subscription = Subscription.find(:first, :conditions => ["user_id = ? and event_id = ?", user_info.user_id, params[:selected_event_id]])%>
       <%= simple_form_for(subscription) do |f| %>
          <%= f.hidden_field :user_id %>  
          <%= f.hidden_field :event_id %>
          <tr>
          <td><%= link_to user_info.name, subscription %></td>
          <td><%= user_info.company %></td>
          <td><%= user_info.user.email %></td>
          <td><%= subscription.networkId %></td>
              <td><%= f.input :token, :input_html => { :size => 15, :maxlength => 15 }, :as => :integer, :label => false %></td>
              <td width='5px'>
                 <%= f.submit 'save' %>
              </td>
         </tr>
      <% end %>
 <% end %> 
```

**admins_controller.rb**

我只放了代码的相关部分

```
def check_in
    event_id = params[:selected_event_id]
    if !event_id.nil?
      session[:event_id] = event_id      
      @event_user_infos = UserInfo.search(params[:search],event_id).order(sort_column + ' ' + sort_direction)
   end
end 
```

**check_in.js.erb**

```
$('#check_in').html('<%= escape_javascript(render :partial => 'check_in') %>'); 
```

**编辑**

我在部分表单中添加了一个条件`:remote => remote`选项（如果有搜索`remote == true`，如果没有`remote == false`），谷歌浏览器中的错误消失了，但它仍然什么都不做（现在在两个浏览器中）。我还检查了 HTML 源代码，它似乎没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:04:33.193

我终于设法解决了这个问题。我更改了文件`<%= javascript_include_tag :defaults%>`中的代码行，它现在可以在两个浏览器中使用。`<%= javascript_include_tag 'prototype'%>``application.html.erb`

# mercurial - teamcity octopus deploy 处理具有相同项目名称的多个代码分支（默认和开发）

> ID：14395671
> 
> 赞同：7
> 
> 时间：2013-01-18T09:15:49.027
> 
> 标签：mercurial, nuget, teamcity-7.0, octopus-deploy

目前，teamcity 正在使用 AssemblyInfoPatcher 插件监视和构建一个反复无常的开发分支，并且 Project.Website.2.xxxnupkg 出现在工件中，章鱼正在将其部署到暂存环境中。很棒的东西。

现在我只是想弄清楚如何设置章鱼部署来处理默认分支现在也部署到生产中。

我已经设置了 teamcity 从默认分支生成 Project.Website.1.xxxnupkg 但是章鱼如何知道哪个包是来自开发分支的临时构建，哪个是来自默认分支的生产，除了他们拥有的版本号与 Project.Website 中的项目名称相同吗？

目前我有一个登台环境、登台角色和一个登台项目组。我是否只需要为生产创建一个新的组环境和角色，如果是这样，章鱼如何知道如何做呢？

这两种工具都很棒，我相信我现在已经很接近了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:44:54.313

您需要在 Octopus Deploy 中设置生产环境。

假设：

*   您在 Octopus 中的生产环境名为 Production
*   您在 TeamCity 的命令行构建步骤中使用 octo.exe 来创建和部署版本。

您可以使用`--deployto`octo.exe 的选项来指定将新创建的版本部署到的环境。像这样的东西：

`octo create-release --server=http://your-octopus/api --project=Project.Website --version=%build.number% --packageVersion=%build.number% --deployto=Production`

该命令将：

*   使用您的 TeamCity 内部版本号作为版本创建版本
*   使用您的 TeamCity 内部版本号作为所有包的包版本
*   将发布部署到生产环境

提示：TeamCity 有时需要几秒钟才能将工件发布到其 NuGet 源中。如果您的 octo 命令尝试使用尚未发布的包版本创建发布，则该命令（和构建步骤）将失败。在运行 octo.exe 命令之前，我在脚本中构建了 30 秒的“睡眠”，以确保构建服务器有时间发布当前版本的包。

# java - 如何将 JFreeChart 设置为不订购 DataSet？

> ID：14395673
> 
> 赞同：3
> 
> 时间：2013-01-18T09:15:49.487
> 
> 标签：java, jfreechart

我有一个小项目，它可以绘制数据库中数据的图表。DB中的一条记录是这样的：

```
ID, Name, Xcoord, Ycoord 
```

例如，我添加了 10 个点的坐标，它们或多或少是这样的：

```
1st(1:1) 2nd(2:2) 3rd(3:3) 4th(4:4) ... 10th(10:10); 
```

之后我想再添加一个点`11th(5,7:5,7)`，第 10 点必须与第 11 点连接。所以线必须向左走。现在`XYPlot`排序我`XYDataset`的第 11 个点被绘制在第 5 个和第 6 个点之间，我不希望这样。

任何人都可以帮忙吗？

更新：正如 mr.Trashgod 正确假设的那样，我正在使用 org.jfree.data.xy.XYSeries()，并将自动排序标志设置为 false 会导致正确的绘图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:28:25.713

在不知道`XYDataset`您使用的是哪个的情况下，很难具体说明。几个`XxxSeriesCollection`子类通常包含在构造函数中具有可选`autoSort`参数的系列。例如， an`XYSeriesCollection`包含零个或多个[`XYSeries`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/XYSeries.html)具有合适的构造函数：

```
XYSeries(java.lang.Comparable key, boolean autoSort)
XYSeries(java.lang.Comparable key, boolean autoSort, boolean allowDuplicateXValues) 
```

# c# - 如何使用核心服务根据 Tridion 中的描述获取特定的 tcm uri？

> ID：14395675
> 
> 赞同：1
> 
> 时间：2013-01-18T09:15:54.623
> 
> 标签：c#, tridion, tridion-2011, xelement

我得到了使用核心服务的所有用户的`XElement`列表`Tridion`。现在我想根据描述搜索特定用户的 tcm uri？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:41:38.110

您可以使用 LINQ 通过描述查询以获取用户 TCMURI。这只是其中一种方法，因为您已经拥有用户列表的 XElement。您也可以使用`GetSystemWideList`并对其执行 LINQ 操作。

```
 XElement userListXml = _client.GetSystemWideListXml(
            new UsersFilterData { 
                   BaseColumns = ListBaseColumns.Default, 
                   IsPredefined = false 
             });

     // LINQ to query by description
    var user = (from el in userListXml.Elements()
                where (string) el.Attribute("Description") == "USERDESCRIPTON" 
                select el).FirstOrDefault();

    string usrTcmURI = user.Attribute("ID").Value; 
```

# asp.net-mvc - 如何使用带有 Razor 多行语法的 html 帮助程序类？

> ID：14395676
> 
> 赞同：0
> 
> 时间：2013-01-18T09:15:58.047
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我使用 MVC3，在 c# 中我有这个多行剃须刀代码

```
@{
    var accessibilityVb = ViewBag.Accessibility;

    if (accessibilityVb == "accessibility")
    {
        Html.ActionLink("Accessibility On", "SetAccessibilityOn");
    }
    else if (accessibilityVb == "no-accessibility")
    {
    Html.ActionLink("Accessibility Off", "SetAccessibilityOff");
    }
} 
```

`Html.ActionLink`不会按预期创建 HTML 代码。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:19:44.303

尝试改变

```
Html.ActionLink("Accessibility On", "SetAccessibilityOn"); 
```

到

```
@Html.ActionLink("Accessibility On", "SetAccessibilityOn") 
```

# c# - 错误 (407) “需要代理身份验证”。

> ID：14395677
> 
> 赞同：3
> 
> 时间：2013-01-18T09:16:01.337
> 
> 标签：c#, authentication, httpwebrequest

我有一个要求，比如...我想从 winforms 访问一个 url（登录页面是 web）。我必须将凭据传递给该 url，并且响应应该是经过身份验证的网页（标记）的内容。

我编写了一个函数，它将请求 url 并返回响应。但我收到错误代码（407）

> “需要代理身份验证。”

这是我的代码。

```
private static void GetPageContent(){
    string url = "https://LoginPage.aspx/";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.Method = "GET";
    // If required by the server, set the credentials.
    //request.Proxy.Credentials = CredentialCache.DefaultCredentials;
    request.Credentials = new NetworkCredential("user1", "testuser#");
    // Get the response.
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    // Display the status.
    Console.WriteLine(response.StatusDescription);
    // Get the stream containing content returned by the server.
    Stream dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();
    // Display the content.
    Console.WriteLine(responseFromServer);
    // Cleanup the streams and the response.
    reader.Close();
    dataStream.Close();
    response.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:28:30.977

```
WebProxy proxy = new WebProxy(proxyAddress);
proxy.Credentials = new NetworkCredential("username", "password", "domain");
proxy.UseDefaultCredentials = true;
WebRequest.DefaultWebProxy = proxy;

HttpWebRequest request = new HttpWebRequest();
request.Proxy = proxy; 
```

或者你可以使用`WebClient`.

```
WebClient client = new WebClient();
client.Proxy = proxy;
string downloadString = client.DownloadString("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:34:03.957

您可能想查看[MSDN 上的 System.Net.HttpWebRequest.Proxy](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)。
这提供了如何设置代理身份验证的详细信息。

这个 SO 答案还有一个工作代码示例：[https ://stackoverflow.com/a/9603791/204690](https://stackoverflow.com/a/9603791/204690)

例如：

```
// Create a new request to the mentioned URL.               
HttpWebRequest myWebRequest= (HttpWebRequest)WebRequest.Create("http://www.microsoft.com");

// Obtain the 'Proxy' of the  Default browser.  
IWebProxy proxy = myWebRequest.Proxy;

if (proxy != null)
{
    // Create a NetworkCredential object and associate it with the  
    // Proxy property of request object.
    proxy.Credentials=new NetworkCredential(username,password);
    // or 
    proxy.UseDefaultCredentials = true; 

    // try forcing the proxy to use http (just to the proxy not from proxy to server)
    UriBuilder proxyAddress = new UriBuilder(proxy.Address);
    proxyAddress.Scheme = "http";

    myWebRequest.Proxy=proxy;
}
HttpWebResponse myWebResponse=(HttpWebResponse)myWebRequest.GetResponse(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T08:50:59.580

对我来说，它就像告诉它使用 DefaultCredentials 一样简单（尽管我还没有弄清楚为什么它不能默认使用这些）：

```
request.Proxy.Credentials = (System.Net.NetworkCredential)System.Net.CredentialCache.DefaultCredentials; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T07:56:33.543

您可以先检查是否可以连接到代理。这是一个例子：

```
 System.Net.Sockets.Socket sock = new System.Net.Sockets.Socket(System.Net.Sockets.AddressFamily.InterNetwork, System.Net.Sockets.SocketType.Stream, System.Net.Sockets.ProtocolType.Tcp);
                sock.Connect(url, proxyPort);
                if (sock.Connected == true)  // Port is in use and connection is successful
                {
                    sock.Close();
                    return true;
                }
                else
                {
                    sock.Close();
                }`enter code here`
                return false; 
```

# python - 如何删除 Pandas 系列重复索引的额外副本？

> ID：14395678
> 
> 赞同：16
> 
> 时间：2013-01-18T09:16:01.987
> 
> 标签：python, pandas

我有一个`s`带有重复索引的系列：

```
>>> s
STK_ID  RPT_Date
600809  20061231    demo_str
        20070331    demo_str
        20070630    demo_str
        20070930    demo_str
        20071231    demo_str
        20060331    demo_str
        20060630    demo_str
        20060930    demo_str
        20061231    demo_str
        20070331    demo_str
        20070630    demo_str
Name: STK_Name, Length: 11 
```

我只想通过以下方式保留唯一行和重复行的一份副本：

```
s[s.index.unique()] 
```

`Pandas 0.10.1.dev-f7f7e13` 给出以下错误消息

```
>>> s[s.index.unique()]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "d:\Python27\lib\site-packages\pandas\core\series.py", line 515, in __getitem__
    return self._get_with(key)
  File "d:\Python27\lib\site-packages\pandas\core\series.py", line 558, in _get_with
    return self.reindex(key)
  File "d:\Python27\lib\site-packages\pandas\core\series.py", line 2361, in reindex
    level=level, limit=limit)
  File "d:\Python27\lib\site-packages\pandas\core\index.py", line 2063, in reindex
    limit=limit)
  File "d:\Python27\lib\site-packages\pandas\core\index.py", line 2021, in get_indexer
    raise Exception('Reindexing only valid with uniquely valued Index '
Exception: Reindexing only valid with uniquely valued Index objects
>>> 
```

那么如何以有效的方式删除额外的重复行，保留唯一行和重复行的一个副本？（最好在一行中）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T14:10:30.430

您可以按索引分组并应用一个函数，该函数为每个索引组返回一个值。在这里，我取第一个值：

```
In [1]: s = Series(range(10), index=[1,2,2,2,5,6,7,7,7,8])

In [2]: s
Out[2]:
1    0
2    1
2    2
2    3
5    4
6    5
7    6
7    7
7    8
8    9

In [3]: s.groupby(s.index).first()
Out[3]:
1    0
2    1
5    4
6    5
7    6
8    9 
```

**更新**

解决 BigBug 关于将 MultiIndex 传递给 Series.groupby() 时崩溃的评论：

```
In [1]: s
Out[1]:
STK_ID  RPT_Date
600809  20061231    demo
        20070331    demo
        20070630    demo
        20070331    demo

In [2]: s.reset_index().groupby(s.index.names).first()
Out[2]:
                    0
STK_ID RPT_Date
600809 20061231  demo
       20070331  demo
       20070630  demo 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-10T10:43:18.160

您可以使用[`duplicated`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html)（默认情况下保留第一个值）为您的数据子集`index`。以@Zelazny7 为例：

```
s = pd.Series(range(10), index=[1,2,2,2,5,6,7,7,7,8])

In [130]: s[~s.index.duplicated()]
Out[130]: 
1    0
2    1
5    4
6    5
7    6
8    9
dtype: int64 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-18T12:56:24.630

一种方法是使用`drop`and `index.get_duplicates`：

```
In [43]: df
Out[43]: 
                      String
STK_ID RPT_Date             
600809 20061231  demo_string
       20070331  demo_string
       20070630  demo_string
       20070930  demo_string
       20071231  demo_string
       20060331  demo_string
       20060630  demo_string
       20060930  demo_string
       20061231  demo_string
       20070331  demo_string
       20070630  demo_string

In [44]: df.drop(df.index.get_duplicates())
Out[44]: 
                      String
STK_ID RPT_Date             
600809 20070930  demo_string
       20071231  demo_string
       20060331  demo_string
       20060630  demo_string
       20060930  demo_string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T20:51:15.183

关于什么？

```
s.reset_index().drop_duplicates(subset=s.index.names).set_index(s.index.names) 
```

例如，对于`s`：

```
STK_ID  RPT_Date
600809  20061231    demo_str
        20070331    demo_str
        20070630    demo_str
        20070930    demo_str
        20071231    demo_str
        20060331    demo_str
        20060630    demo_str
        20060930    demo_str
        20061231    demo_str
        20070331    demo_str
        20070630    demo_str
dtype: object 
```

```
s.reset_index().drop_duplicates(subset=s.index.names).set_index(s.index.names) 
```

```
 0
STK_ID  RPT_Date    
600809  20061231    demo_str
        20070331    demo_str
        20070630    demo_str
        20070930    demo_str
        20071231    demo_str
        20060331    demo_str
        20060630    demo_str
        20060930    demo_str 
```

# javascript - 是否有将 JSON 嵌入 HTML 的标准？

> ID：14395682
> 
> 赞同：22
> 
> 时间：2013-01-18T09:16:18.030
> 
> 标签：javascript, html, json, inline, dot.js

我想在 HTML 中嵌入 JSON。我发现的最优雅的解决方案是使用`script`-tag 和 mime 媒体类型`application/json`。

```
<script id="data" type="application/json">
    {
        "foo" : "bar"
    }
</script> 
```

这是嵌入 JSON 的标准方式吗？如果没有，上述解决方案是否存在风险？

使用内联 JSON（而不是 JSON-P 服务）的原因：

*   少量 JSON 数据
*   更少的 HTTP 请求
*   内联 JSON 优先于 HTML 属性中的数据

**[更新]**嵌入 json 的原因。

我有一个用于流量非常高的网站的图库小部件。图库可以包含 100 张或更多张图片。我一次只显示一张图像，其余图像将被延迟加载。但是，所有图像的信息（图像 src）将在页面加载时呈现在 html 中。有多种方法可以在 html 中呈现图像信息。除了使用 JSON，我还可以使用 html 数据属性，如下所示：

```
<li class="image" data-src="image-path.jpg">
    <!-- image tag will be created here using javascript -->
</li> 
```

将导致：

```
<li class="image image-loaded" data-src="image-path.jpg">
    <img src="image-path.jpg" />
</li> 
```

上述解决方案的缺点是额外的标记。我宁愿使用 JSON 和 Javascript 模板引擎，例如[doT.js](http://olado.github.com/doT/tutorial.html#intro)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-09T14:15:54.813

你的建议是绝对正确的。标记的`type`属性`script`必须是有效的 MIME 描述符。根据[官方 JSON RFC](https://www.rfc-editor.org/rfc/rfc4627)第 6 节“IANA 注意事项”：

> JSON 文本的 MIME 媒体类型是 application/json。
> 类型名称：应用程序
> 子类型名称：json

所以你的 HTML 是有效的：

```
<script id="data" type="application/json">
    {
        "foo" : "bar"
    }
</script> 
```

而且，不，这样做没有额外的风险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T14:49:25.627

我正在回答我自己的问题，因为我必须找到解决方案。我的解决方案是基于**Bergi**建议使用内联 JSONP 的。这是一个比找到我的实际问题的答案更好的解决方案，因为不需要手动 JSON 解析。

JSON 数据（和 HTML）是使用 Java Server Pages (JSP) 生成的。

**第1步**

使用 JSP 创建自定义变量名称。它将用作将分配 json 数据的 javascript 全局变量。名称是随机生成的，防止同一页面出现命名冲突。

```
<c:set var="jsonpVarName">jsnpData<%= java.lang.Math.round(java.lang.Math.random() * 1000000) %></c:set> 
```

**步骤 2** script 标签有一个 cssClassname 来识别它和一个`data-var`-attribute，以便可以确定自定义变量名称。`${ctrl.json}`是 JSP 并打印出 JSON。与使用回调函数的 JSONP 不同，使用了全局变量。到目前为止，我还没有遇到任何缺点。

```
<script class="data" data-var="${jsonpVarName}" type="text/javascript">
    window.${jsonpVarName} = ${ctrl.json};
</script> 
```

**第 3 步** 访问数据（使用 jQuery）非常简单：

```
var data = window[$('script.data').data('var')]; 
```

**带上下文的示例**

**HTML**

```
<div class="myWidget">
    <button class="fetchData">Fetch Data</button>

    <c:set var="jsonpVarName">jsnpData<%= java.lang.Math.round(java.lang.Math.random() * 1000000) %></c:set>

    <script class="data" data-var="${jsonpVarName}" type="text/javascript">
        window.${jsonpVarName} = ${ctrl.json};
    </script>

</div> 
```

**Javascript**

```
$('button.fetchData', '.myWidget').click(function (e) {

    var data = window[$('script.data', '.myWidget').data('var')];    

}); 
```

我正在使用内联 JSONP 加载页面加载所需的 JSON 数据。它不是很多数据，而且是一个 HTTP-Request 少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T10:12:42.080

> 使用内联 JSON（而不是 JSON-P 服务）的原因

您也可以内联 JSON-P。好的，您只需将该方法称为“内联脚本”，但它具有两者的优点:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:48:47.980

尝试[http://json2html.com/](http://json2html.com/) 这是将 JSON 转换为 HTML 的好方法。

# javascript - javascript this 在ajax回调后引用同一个对象

> ID：14395685
> 
> 赞同：0
> 
> 时间：2013-01-18T09:16:29.130
> 
> 标签：javascript, ajax, closures, this, javascript-objects

我正在尝试使用用于 javascript 的 oauth 库来获取推文。我创建了一个对象，该对象接收 twitter 时间线的 url 以获取并将其放入列中。代码是

```
 lister=function(opts) {
    this.setresource =lister.setresource;
    this.config = lister.config;
    this.config.resource = opts;
    this.putTweet = lister.putTweet;
    this.listerstrap = lister.listerstrap;
    this.addStrip = lister.addStrip;
    this.setTweets = lister.setTweets;
    this.addTweets = lister.addTweets;

} 
```

现在，如果我创建两个新的 lister 对象，

```
 var l1 = new lister('user1'); //user1 and user2 refer to url of the timelines 
    l1.listerstrap();
    var l2 = new lister('user2');
    l2.listerstrap(); 
```

listerstrap 函数是：

```
 lister.listerstrap = function () {
   this.addStrip().setresource().addTweets();

   } 
```

问题发生在 addTweets()

```
 lister.addTweets = function () {

   var _ = this;
   oauth.get(twiapi + _.config.resource, function (res) {
       _.setTweets(JSON.parse(res.text));
       console.log(_.config.resource);  // * 
   }); 
```

在 * 处， this (_) 指的是相同的（l2 实例），因此当调用 setTweets 时，来自两个资源的推文被设置到同一列中

这是一个关闭问题吗？

编辑：我正在尝试根据时间线或列表将推文设置为不同的列（如 Tweetdeck 中所做的那样，每个列表都有不同的列）。虽然我从两个网址获得了推文，但它们被设置在同一列中。_ 包含对我在 addStrip() 中创建的每一列的 div 元素的引用。但不知何故 _ 在回调中引用同一个实例。我希望它将推文设置到各自的列中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:31:37.010

我很确定 指的`_`是不同的实例。问题是您在执行此操作时覆盖了共享配置对象的属性：

```
this.config = lister.config;
this.config.resource = opts; 
```

所以，你`l1`和`l2`总是有相同的`config`对象。一旦您实例化`l2`，它就会覆盖该`resource`属性。

您可能想要创建一个克隆：

```
this.config = clone(lister.config); 
```

哪里`clone`可能是您选择的一些[实现](http://jsperf.com/cloning-an-object/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:34:21.167

问题不在于`addTweets`方法，如果您阅读了我之前的回答：忘记它。

问题是这样的：

```
this.config = lister.config;
this.config.resource = opts; 
```

您的构造函数分配对对象*的引用*，对象本身*不会被复制*。因此，通过分配对实例的引用，然后更改*被引用的对象*，您正在更改*所有实例*引用的对象。

快速解决方法是更改`this.config = lister.config;`​​为：

```
this.config = {foo: 'bar', something: 'else', resource: opts};//each time the constructor is called, create a new object literal 
```

但是，请务必考虑使用原型，因为将引用分配给函数对象的属性，这也可以兼作构造函数，这不是最好的方法。

*更新：*

回应 OP 的评论：您所看到的非常有意义。您正在创建一个新实例，将单个`config.resource`对象（*只有*一个）设置为`User1`，然后`addTweets`调用该函数。此函数执行**异步**请求。*异步*是经常被忽视的东西，但在这种情况下非常重要：在调用回调函数（使用该`config.resource`值）之前，您创建一个新实例，*然后*更改`config.resource`属性。直到构造第二个实例之后才会调用回调函数。这就是为什么`config.resource`值在调用之间的那一瞬间发生变化的原因`addTweets`并调用异步回调，因为那是创建第二个实例的时间。就这么简单，真的。

# python - Python - 在 re.compile 开头使用 (?!...) 失败

> ID：14395687
> 
> 赞同：2
> 
> 时间：2013-01-18T09:16:36.057
> 
> 标签：python

我想要实现的是搜索以下模式`XXXxXXX`，但我不想要类似`XXXXxXXX`或`XXXxXXXX`匹配的东西。

当我尝试以下操作时，它只是无法给我一个输出

```
test = "DDDfSSSsFFFjKKKk"
p = re.compile('(?![A-Z])[A-Z]{3}([a-z]{1})[A-Z]{3}(?![A-Z])')
x = p.findall(test) 
```

虽然当我开始`(?![A-Z])`时它工作得很好，但它并没有起到避免的作用`XXXXxXXX`

```
test = "DDDfSSSsFFFjKKKk"
p = re.compile('[A-Z]{3}([a-z]{1})[A-Z]{3}(?![A-Z])')
x = p.findall(test) 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:19:21.150

您需要使用后向断言，而不是前瞻断言：

```
p = re.compile('(?<![A-Z])[A-Z]{3}([a-z])[A-Z]{3}(?![A-Z])') 
```

您当前的正则表达式是说：

```
(?![A-Z]) # Make sure that the next character isn't an uppercase ASCII letter 
[A-Z]{3}  # Now match three uppercase ASCII letters (<-- impossible> 
```

# ruby - Rails 3.2：如何从一组孩子中找到所有父母

> ID：14395692
> 
> 赞同：4
> 
> 时间：2013-01-18T09:16:47.313
> 
> 标签：ruby, ruby-on-rails-3, associations, parent-child

给定一组“书籍”，找到所有“作者”（不重复）的最佳方法是什么？

所以假设我们有一个经典的关联：

```
class Author < ActiveRecord::Base
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :author
end 
```

我现在的做法是这样的：

```
@books = Book.where("some condition")
@authors = Author.where(:id => @books.map(&:author_id)) 
```

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:52:21.317

这是一种方法：

```
@books = Book.where("some condition").includes(:author)
@authors = @books.map(&:author).compact.uniq 
```

解释 ：

*   include 将急切加载作者，因此每次一本书想要其作者时，您都不会害怕 O(n) db 调用...
*   uniq 删除重复的作者（在这种情况下你可能想使用 inverse_of 选项不确定）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:34:23.357

```
@books.each.collect(&:author) 
```

或者只是简单地：

```
@books.collect(&:author) 
```

[您可以在此处](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)阅读有关收集的更多信息

# ajax - 在 wordpress 中使用 AJAX 调用插件中的文件

> ID：14395694
> 
> 赞同：0
> 
> 时间：2013-01-18T09:17:05.170
> 
> 标签：ajax, wordpress, plugins, subscribe

我正在使用 wordpress 3.5 并使用插件来处理时事通讯。我放置了由一个用于电子邮件的文本框和一个用于订阅的按钮组成的时事通讯小部件。单击该按钮时，它将被定向到一个名为 subscribe.php 的文件。它在 [wordpress_plugin_directory]/subscribe.php 中。

我想为此订阅使用 AJAX。单击该按钮时，它将简单地调用 [wordpress_plugin_directory]/subscribe.php 并让该文件完成工作。我已经阅读了很多关于如何在 Wordpress 上使用 AJAX 的文章，但似乎我无法掌握它的窍门。

您如何使用 AJAX 调用该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:30:53.590

这很难回答，因为您没有展示您尝试过的内容。

按照[codex](http://codex.wordpress.org/AJAX_in_Plugins)中的示例，它可以工作。进一步阅读文章（特别是关于安全性的）也值得阅读和实施。

AJAX 将调用一个函数，而不是打开一个文件（尽管您可以使用[include](http://php.net/manual/en/function.include.php)或[require](http://php.net/manual/en/function.require.php)在函数中打开文件- 但这可能不是必需的，为什么不只使用该函数返回您需要的内容？我不知道 subscribe.php 中有什么，所以这可能合适，也可能不合适。

如果您仍然无法使其工作，请展示您尝试过的内容以及失败的地方，以便提供更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:31:11.787

你有这样的表格

```
<form id="newletterBoxForm" method="POST" action="[wordpress_plugin_directory]/subscribe.php">
    <input type="text" ... />
    <input type="text" ... />
    <input type="submit" ... />
</form> 
```

使用 jQuery，您将在事件开始之前获得事件并取消如下操作：

```
$(document).ready(function() {
    $("#newletterBoxForm").on("submit", function() {
        $.ajax({
        type: "POST",
        url: "[wordpress_plugin_directory]/subscribe.php.",
        // get the data of your form
        data: $(this).serialize(),
        success: function (data) {
            // if it is ok, do some actions
            alert("ok DONE!")
        },
        error : function(s , i , error){
            console.log(error);
        }
    });
    // cancel normal behaviour which will refresh your page
    return false;
}); 
```

# asp.net-mvc - MVC 4 Chrome 要求用户登录两次

> ID：14395697
> 
> 赞同：3
> 
> 时间：2013-01-18T09:17:15.717
> 
> 标签：asp.net-mvc, google-chrome, authentication, asp.net-mvc-4, .aspxauth

这是一个非常烦人的问题，我不知道从哪里开始寻找解决它。

当我在本地运行代码时不会发生此问题，仅当我在实时环境中运行它时才会发生。我知道我遗漏了一些东西，这可能很明显我可以弄清楚。

好的，我有一个 MVC 4 应用程序，我在其中覆盖了 MembershipProvider。我很确定这不是问题，因为登录确实有效。登录在 IE、Firefox、Safari 上有效，但在 Chrome 桌面 (Windows 7) 和 Chrome IOS（在 Ipad 上）上失败。

在 Chrome 上，用户需要登录两次。在第一次尝试时，未设置 cookie 的 ASPXAUTH 元素。但它是在第二次尝试时设置的。（在提琴手审查）

我环顾四周，发现了这个建议，我已经实施了它，但我仍然有问题。（这并没有完全详细说明我的问题，但很接近）

[http://www.hanselman.com/blog/FormsAuthenticationOnASPNETSitesWithTheGoogleChromeBrowserOnIOS.aspx](http://www.hanselman.com/blog/FormsAuthenticationOnASPNETSitesWithTheGoogleChromeBrowserOnIOS.aspx)

（我安装了 4.5，所以我知道这是一个很长的镜头）

我不知道从哪里开始寻找解决这个问题。这是我创建cookie的代码。

```
 private void SignIn(string userName, bool RememberMe)
    {
        MyMembershipProvider provider = (MyMembershipProvider)System.Web.Security.Membership.Provider;
        MyMembershipUser user = (MyMembershipUser)provider.GetUser(userName, false);

        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
          user.UserName,
          DateTime.Now,
          DateTime.Now.AddMinutes(30),
          true,
          user.UserID.ToString(),
          FormsAuthentication.FormsCookiePath);

        // Encrypt the ticket.
        string encTicket = FormsAuthentication.Encrypt(ticket);

        // Create the cookie.
        HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);

        Response.Cookies.Add(authCookie);
    } 
```

创建cookie后，我重定向

```
 return Redirect("Https://www.sitehome.local"); 
```

请注意，我在 HTTPS 下运行整个站点，以防导致问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:20:40.957

正如我们在评论中发现的那样，cookie 没有在重定向时被转发，而是通过以这种方式创建 cookie 来修复：

```
var authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, ticketString) 
    { 
       Secure = FormsAuthentication.RequireSSL, 
       Path = FormsAuthentication.FormsCookiePath, 
       HttpOnly = true, 
       Domain = FormsAuthentication.CookieDomain 
    };

Response.Cookies.Add(authCookie); 
```

# c# - 计时器间隔 1000 ！= 1 秒？

> ID：14395700
> 
> 赞同：10
> 
> 时间：2013-01-18T09:17:23.773
> 
> 标签：c#, timer, seconds

我有一个标签，它应该显示我的计时器的秒数（或者换句话说，我有一个变量，每个计时器的间隔都加 1）。我的计时器的间隔设置为 1000，因此标签应该每秒更新一次（并且还应该显示秒数）。但是标签在 1 秒后已经有数百个。获得 1 秒的适当间隔是多少？

```
int _counter = 0;
Timer timer;

timer = new Timer();
timer.Interval = 1000;
timer.Tick += new EventHandler(TimerEventProcessor);
label1.Text = _counter.ToString();
timer.Start();

private void TimerEventProcessor(object sender, EventArgs e)
{
  label1.Text = _counter.ToString();
  _counter += 1;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T09:27:37.170

获得一秒的正确间隔是 1000。该`Interval`属性是滴答之间的时间，以毫秒为单位：

[MSDN：Timer.Interval 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.interval%28v=vs.71%29.aspx)

所以，这不是你设置的间隔是错误的。检查其余代码，例如更改计时器的间隔或`Tick`多次绑定事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T09:22:21.587

`Tick`使用事件代替`Elapsed`事件。

```
timer.Elapsed += new EventHandler(TimerEventProcessor); 
```

并更改 TimerEventProcessor 方法的签名；

```
private void TimerEventProcessor(object sender, ElapsedEventArgs e)
{
  label1.Text = _counter.ToString();
  _counter += 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:33:36.110

您使用 TimerEventProcessor 或 Counter 的任何其他地方？

无论如何，您不能依赖每秒准确传递一个事件。时间可能会有所不同，系统将无法确保平均时间是正确的。

因此，您应该使用以下命令代替 _Counter：

```
 // when starting the timer:
 DateTime _started = DateTime.UtcNow;

 // in TimerEventProcessor:
 seconds = (DateTime.UtcNow-started).TotalSeconds;
 Label.Text = seconds.ToString(); 
```

* * *

注意：这并不能解决 TimerEventProcessor 被频繁调用的问题，或者 _Counter 被频繁递增的问题。它只是掩盖它，但它也是正确的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-18T18:38:54.887

已经是一个旧线程，但我刚刚阅读了 Microsoft 的文章，他们提到 System.Timer 取决于操作系统。这意味着如果您使用 Windows 7 并且间隔小于 15 毫秒，则间隔将被延迟。

> 您可以使用 Interval 属性来确定触发 Elapsed 事件的频率。因为 Timer 类依赖于系统时钟，所以它具有与系统时钟相同的分辨率。这意味着如果 Interval 属性小于系统时钟的分辨率，则 Elapsed 事件将以系统时钟的分辨率定义的时间间隔触发。下面的示例将 Interval 属性设置为 5 毫秒。在系统时钟分辨率约为 15 毫秒的 Windows 7 系统上运行时，该事件大约每 15 毫秒触发一次，而不是每 5 毫秒触发一次。

# javascript - PhoneGap 应用程序不会连续两次查询服务器

> ID：14395702
> 
> 赞同：2
> 
> 时间：2013-01-18T09:17:32.570
> 
> 标签：javascript, jquery, ios, cordova

情况如下：

我有一个 PhoneGap 应用程序和一个 Tomcat 服务器。该应用程序通过 $.ajax POST 调用向服务器查询一些数据并显示它。

我第一次尝试按我的应用程序 UI 上的某个按钮执行查询时一切顺利，发生的情况是，如果我第二次尝试相同的操作，服务器没有得到查询并且应用程序显示与上次相同的数据。看起来它正在捕获应用内浏览器中的数据......

任何想法如何使应用程序每次都实际查询服务器？

非常感谢你！

编辑：这是我的代码

PhoneGap 代码：

```
function showDialog() {
    var sessionid = window.localStorage.getItem("sessionid");
    $.mobile.showPageLoadingMsg();
    $.ajax({
        type: "POST",
        url: "https://192.168.7.56:8443/Mobile_Signature/service/pdf-signature",
        data: { action : "get-txcertificates" , sessionid : sessionid },
        success: function(result) {
                    $.mobile.hidePageLoadingMsg();
                    CertificatesDialog.show(function() {}, function() {alert("some error");}, JSON.parse(result));
                 }
    });
} 
```

这是接收 POST 查询并且只在第一次被调用的 servlet 代码：

```
if (request.getParameter("action").equals("get-txcertificates")) {

    System.out.println("Obtaining certificates");
String user = DataController.getInstance().getUserID(sessionid);
    String access_token = DataController.getInstance()
                .getTxAccessToken(sessionid);
try {
    System.out.println("getting certificates with user " + user
            + " and accesstoken: " + access_token);
    X509Certificate[] certs = ServiceFactory.getServiceWrapper(
            ServiceFactory.SW_SERVICE).getUserCertificates(user,
                    access_token);

    JSONArray certsArray = new JSONArray();
    for (X509Certificate c : certs) {
    System.out.println("dn: " + c.getSubjectDN().toString());
    certsArray.put(c.getSubjectDN().toString());
    }
    response.getWriter().print(certsArray);

    } catch (NoSuchMethodException | MessageNotAuthenticatedException e) {

    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:20:04.410

找到了一个虚拟解决方案来避免在 iOS 6 中缓存 POST 请求：

生成一个随机数并将其作为参数添加到您的请求中。像这样的东西：

```
var randomnumber = Math.floor(Math.random()*1001);
$.ajax({
    type: "POST",
    url: "http://yoururl/yourservice",
    data: { foo : "bar" , nocaching : randomnumber },
    success: successCallback
}); 
```

通过添加 randomnumber 参数，每个 POST 请求对浏览器来说看起来都不同，因此它不再缓存它。无论服务器不读取它。

希望这对某人有所帮助。

# html - 在 phonegap 2.0.0 中创建一个 .txt 文件

> ID：14395704
> 
> 赞同：0
> 
> 时间：2013-01-18T09:17:39.570
> 
> 标签：html, cordova, forms, cordova-2.0.0

我正在尝试向现有的 PhoneGap Build（通过 Cordova 2.0.0）应用程序添加一个功能。

该应用程序具有许多现有功能，这应该是一个简单的mod。

我想要做的就是用 Cordova 2.0.0 FileWriter API（我认为）编写一个简单的 HTML 页面，将笔记保存为 .txt 文件（或者它可以是 .html 文件） 任何我以后可以做的事情上传到 PC 并将文本内容复制到 Word 文档/电子邮件等中...

我已经开始在[http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileWriter)使用 Apache Cordova API但是我很难理解这一点。#

我也看过[Can't get Phonegaps FileWriter to work](https://stackoverflow.com/questions/14329010/cant-get-phonegaps-filewriter-to-work)但是这看起来甚至没有得到解决......

实际上，这是我正在尝试使用的 HTML 文件...

```
<form action="" method="post">
    <br>
    <input style="width:100%" class="center" type="text" name="filename" placeholder="Input File Name Here"><br>
    <textarea name="notes" class="center" style="width:100%" placeholder="Please Type Notes Here"></textarea><br>
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><input style="width:100%" class="button-big" type="submit" name="save2" value="save"></td>
        <td><input style="width:100%" class="button-big" type="reset" name="clear2" value="clear"></td>
      </tr>
      </table>
    <br>
    </form> 
```

它是一个简单的 HTML 表单，但我想要一些 JS 或其他东西来使保存按钮使用文件名+预定义的文件扩展名（.txt 或 .htm 或 .html）将文件保存到根目录

如果有人可以提供帮助，那就太好了

谢谢，

亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:29:34.017

```
// create a file writer object
function CreateFileWriter()
{
    // request the file system object
    window.requestFileSystem( LocalFileSystem.PERSISTENT, 0, OnFileSystemSuccess,fail);
}

function OnFileSystemSuccess( pFileSystemObj )
{
    console.log( pFileSystemObj.name );
    console.log( pFileSystemObj.root.name );

    var file_name = document.getElementById('filename').value;

    pFileSystemObj.root.getFile( file_name, {create: true, exclusive: false}, OnFileGetSuccess, fail);
}

function OnFileGetSuccess( pFileEntryObj )
{
    pFileEntryObj.createWriter( function(pWriterObj){ 
    gWriterObj  = pWriterObj; 
    }, fail );
}

function fail(evt)
{
    console.log(evt.target.error.code);
} 
```

希望有帮助。

# c# - 使用表中的 where 子句计算行数

> ID：14395714
> 
> 赞同：0
> 
> 时间：2013-01-18T09:18:09.483
> 
> 标签：c#, asp.net, sql

我正在尝试计算`SomeColumn=SomeValue`. 我的代码如下所示。它什么也没显示。

```
using (SqlConnection conn = new SqlConnection("ConnectionString"))
{
    conn.Open();
    string selectStatement = "Select count(*) from Jobs where 'JobCategory=cse'";

    SqlCommand cmd = new SqlCommand(selectStatement, conn);
    int count = (int)cmd.ExecuteScalar();
    Label1.Text = count.ToString();

    conn.Close(); 
```

我应该采取什么步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:20:28.467

**将 'JobCategory=cse' 更改为 JobCategory = 'cse'**

像

```
string selectStatement = "Select count(*) from Jobs where JobCategory = 'cse'"; 
```

或尝试这样

```
string selectStatement = "Select count(*) from Jobs where JobCategory Like 'cse'"; 
```

在代码中实现之前，在 SQL 中检查一次查询。您是否获得预期的结果检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:20:49.557

你的单引号在错误的地方。试试这样；

```
string selectStatement = "Select count(*) from Jobs where JobCategory = 'cse'"; 
```

并且请始终参数化您的 sql 查询。这可能是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击的原因。在这里如何使用它；

```
string realcse = "Write here which value you want to filter in where clause";
string selectStatement = "Select count(*) from Jobs where JobCategory = @cse";
SqlCommand cmd = new SqlCommand(selectStatement, conn);
cmd.Parameters.AddWithValue("@cse", realcse); 
```

在你的情况下，它应该是这样的；

```
string realcse = "cse";
cmd.Parameters.AddWithValue("@cse", realcse); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:23:26.353

```
string selectStatement = "Select COUNT(*) from [Jobs] where JobCategory='cse'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:35:51.970

请使用这个

```
string selectStatement = "Select  COUNT(*) as cnt from [Jobs] where JobCategory='cse'"; 
```

# html - div的背景图片

> ID：14395719
> 
> 赞同：0
> 
> 时间：2013-01-18T09:18:25.613
> 
> 标签：html, css

我正在尝试为 div 设置背景，但我想让背景的大小固定并且 div 的大小是可变的！所以当 div 宽度减少到一半时，我只需要显示图像的前半部分！而不是调整它的大小以适应它！我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:24:18.397

默认情况下，背景图像将保持固定在其实际大小。听起来您可能已将`background-size`属性应用于元素，您可以在 Fiddle 或类似文件中提供您的代码吗？

[https://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:48:42.807

我已经解决了。

我刚刚设置了“背景位置：0px 0px;”。

# php - 如何根据值将mysql结果显示到不同的列中

> ID：14395720
> 
> 赞同：0
> 
> 时间：2013-01-18T09:18:26.583
> 
> 标签：php, html

好的，在学习如何从查询中获取值以根据查询中的值显示在不同的列中时，我真的挣扎了 3 天。这就是我想要的样子......

```
Name    0-30    30-60    60-90    90+
john            $50
june    $0.00
joe                               $100
fred                     $500 
```

截至目前，我可以获得上面的名称和货币价值的列表，但我只知道如何显示它们如下......

```
Name    0-30    30-60    60-90    90+
john    $50     $50      $50      $50
june    $0.00   $0.00    $0.00    $0.00
joe     $100    $100     $100     $100
fred    $500    $500     $500     $500 
```

我很简单地打印每列中的变量。任何帮助是极大的赞赏。

```
echo "<TABLE WIDTH='100%' BORDER='0' CELLSPACING='0' CELLPADDING='5'>
<TR>
<TD WIDTH='5%'><B>Job</B><BR></TD>
<TD WIDTH='30%'><B>Name</B><BR></TD>
<TD WIDTH='12%'><B>0-30 Days</B><BR></TD>
<TD WIDTH='12%'><B>30-60 Days</B><BR></TD>
<TD WIDTH='12%'><B>60-90 Days</B><BR></TD>
<TD WIDTH='12%'><B>90+ Days</B><BR></TD>
<TD WIDTH='15%'><B>Total Amount</B><BR></TD>
</TR><TR>"; 
```

SQL 查询在这里...... sqlfiddle。[http://sqlfiddle.com/#!2/e5d9c/1/0](http://sqlfiddle.com/#!2/e5d9c/1/0)

```
echo "<TD WIDTH='5%'>$primary_key</TD>
<TD WIDTH='30%'>$a_name</TD>
<TD WIDTH='12%'>$total / $timeperiod</TD>
<TD WIDTH='12%'>$total / $timeperiod</TD>
<TD WIDTH='12%'>$total / $timeperiod</TD>
<TD WIDTH='12%'>$total / $timeperiod</TD>
<TD WIDTH='15%'>$total / $timeperiod</TD>
</TR>"; 
```

我知道上面是错误的，但我不确定在上面放什么来显示我想要的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:27:29.463

只需尝试在列中的 echo 之前添加一个条件。这应该看起来像：

`if ($res['name']>=0 and $res['name']<30) echo $res['data'];

if ($res['name']>=30 and $res['name']<60) echo $res['data'];

if ($res['name']>=60 and $res['name']<90) echo $res['data'];`

……

//$res['name'] --> john / june ... //$res['data'] --> $50 / $500 ...

我认为这是最简单的方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:31:23.627

下面的代码片段将做必要的。

```
<?php

$query = "SELECT amount FROM mytable";

$res  = mysql_query($query);

while($data = mysql_fetch_row($res))
{
    echo "<tr>";
    if($data[0] < 30)
    {
        echo "<td colspan='4' align='left'>".$data[0]."</td>";
    }
    else
    {
        echo "<td>&nbsp;</td>";
        if($data[0] > 30 && $data[0] < 60)
            echo "<td colspan='3' align='left'>".$data[0]."</td>";
        else
        {
            echo "<td>&nbsp;</td>";
            if($data[0] > 60 && $data[0] < 90)
                echo "<td colspan='2' align='left'>".$data[0]."</td>";
            else
            {
                echo "<td>&nbsp;</td>";
                if($data[0] >  90)
                    echo "<td align='left'>".$data[0]."</td>";

            }
        }
    }
    echo "</tr>";
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:36:29.497

```
SELECT 
  Name,
  c0_30, c30_60, c60_90, c90
  FROM (                                   
    SELECT                                 
      Name,
      SUM(IF(val BETWEEN 0 AND 30, val, NULL)) As 'c0_30',
      SUM(IF(val BETWEEN 31 AND 60, val, NULL)) As 'c30_60',
      SUM(IF(val BETWEEN 61 AND 90, val, NULL)) As 'c60_90',
      SUM(IF(val > 90, val, NULL)) As 'c90'
    FROM talName
    GROUP BY Name WITH ROLLUP
  ) AS sums; 
```

此查询将输出一个人的 col 的总值，`val`并根据其总值将它们​​分类到合适的列。

# c# - 正则表达式在特定单词之后立即查找单词

> ID：14395721
> 
> 赞同：7
> 
> 时间：2013-01-18T09:18:27.780
> 
> 标签：c#, .net, regex

我想使用正则表达式在字符串中的特定单词之后立即找到该单词。例如，如果这个词是“我的”，

“这是我的祈祷”——祈祷

“这是我的书（）”-书

是否可以使用正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T09:24:34.870

正则表达式将是

```
(?<=\bmy\s+)\p{L}+ 
```

`\p{L}+`是一个字母序列。这`\p{L}`是一个具有“字母”[属性的 Unicode 代码点](http://www.regular-expressions.info/unicode.html#prop)，因此它匹配任何语言的字母。

`(?<=\bmy\s+)`是一个后向断言，确保“我的”这个词在前面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:23:05.080

您可以使用

```
my\s+\b(\w+)\b 
```

这在第一个子组中捕获了 my 之后的单词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T09:30:34.987

使用前瞻 REGEX：

```
(?<=my )\b\w+\b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:22:10.977

对于`my`，请使用以下正则表达式：

```
my (\w+) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:28:23.130

如果`my`取自用户输入，

```
static string GetWordAfter(string word, string phrase)
{
    var pattern = @"\b" + Regex.Escape(word) + @"\s+(\w+)";
    return Regex.Match(phrase, pattern, RegexOptions.IgnoreCase).Groups[1].Value;
}

...

string wordAfterMy = GetWordAfter("my", "this is my book()"); // gives book 
```

如果没有匹配，这将返回一个空字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T09:29:42.923

“这是我的祈祷”

```
.* (my )(\D*)( ).* 
```

group2 结果将你的话“祈祷”

# backbone.js - 如果项目列表很大，谁应该处理事件

> ID：14395722
> 
> 赞同：0
> 
> 时间：2013-01-18T09:18:30.623
> 
> 标签：backbone.js

考虑以下场景：

```
<ListView>
     <ItemView>
         <div class="ticket-id">136</div>
         <div class="ticket-label">Hello everyone</div>
     </ItemView>
     <ItemView></ItemView>
     ... 500+ item views
</ListView> 
```

每个项目视图都有相应的模型。ListView 通过遍历项目集合并创建新的 ItemView 来创建自己。

问题是 - 谁应该处理项目事件？

将它放在每个 ItemView 本身上是非常合乎逻辑和好的。这样我们就可以访问模型了。但是由于我们有大量的物品，这意味着我们将拥有相同数量的处理程序 - 可能是一个问题。另一种方法是在 ListView 级别处理它，但这样我们将查看 DOM 内部以检查票证 ID，例如，并且无权访问模型。

更新：另一个问题是正确删除这样的视图。如果我们在 ItemViews 上使用事件处理程序，那么我们需要将它们存储起来，以便以后删除每一个。如果它们上面什么都没有——它们应该被自动收集起来，因为它们只给了我们一个 html 字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:11:41.543

如果您实际上没有看到性能问题，我不会过度优化。处理`ItemView`事件，因为这是有道理的。

如果您已经知道性能/内存问题，或者您遇到了一个问题，那么您的两个选项的组合可能是要走的路：`ItemView` *处理*事件，但*听*parent 中的事件`ListView`。这将要求您跟踪您的子视图

因此，如果您`ItemView`目前看起来像这样：

```
var ItemView = Backbone.View.extend({
    events: {
        "click .submit" : "onSubmitClicked"
    },

    onSubmitClicked: function() {
        //...
    }
}); 
```

你可以像这样重构它：

```
var ItemView = Backbone.View.extend({
    //give item a css class to scope the events
    cssClass: "item-view",

    initialize: function() {
        //set id attribute to the DOM element
        this.attributes["data-id"] = this.model.id;
    },
    onSubmitClicked: function() {
        //...
    }
}); 
```

并在列表视图中监听冒泡事件，并将它们代理到项目视图：

```
var Listview = Backbone.View.extend({
    events: {
        //scope child events by css class
        "click .item-view .submit" : "onItemSubmitClicked"
    },
    render function() {
        var childViews = this._childViews = {};

        this.collection.each(function(model) {
            //render the child views any way you want
            var itemView = new ItemView({model:model}).render();

            //keep a id->view map
            childViews[model.id] = itemView;
        });
    },
    //proxy events to the correct childview
    onItemSubmitClicked: function(event) {
        var itemView = this._childViews[$(event.target).attr('data-id')];
        itemView.onSubmitClicked(event);
    }
}); 
```

我以这种方式轻松地重构了现有视图，因为事件处理程序保持原样，并且只有侦听器代码被提升了一个档次。它确实带来了复杂性开销，但如果您需要优化性能，通常必须付出一些代价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:47:09.467

你提出了很好的观点。如果我是你（我已经列出了一个包含 100 个项目的列表，其中包含几个没有问题的事件处理程序），我会选择 ItemView 处理事件的逻辑项。

在您知道它有问题之前，我不会预先优化并使您的代码更复杂。

# algorithm - 师大O

> ID：14395725
> 
> 赞同：0
> 
> 时间：2013-01-18T09:18:48.307
> 
> 标签：algorithm, architecture, big-o, division, integer-division

大多数现代 ISA 中的 Big-O 是什么？是否有某种优化或者是天真的O（分子/分母）？我正在编写严重依赖模数运算的代码。

例如，执行 10/5 和 20/5 和 40/5 所需的相对时间是多少？Intel、nVidia、Qualcomm 等的现代处理器是否具有相同的 Big-O 分区？

注意：假设除法是 O（分子的大小），我在这里可能是错的，这个问题可能根本没有任何意义。如果是这样，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:35:00.223

这个问题不太好。但这也不是那么“愚蠢”，所以我尝试回答/澄清一些观点：

几乎所有现代 CPU/GPU 都有除法指令。由于它适用于默认字长，所以不管它有多快，就 Big-O 而言它是恒定的，所以它总是 O(1)。即使对于没有除法指令的嵌入式处理器、微控制器和类似物，这也是正确的，因为它是在软件中模拟的，并且软件模拟受字大小的限制，因此执行除法指令的时间总是恒定的操作（这意味着它也是 O(1)）。

例外是在谈到对非字长数据执行的操作时。例如，在谈论 BigInt 库时会发生这种情况。但在这种情况下，所有操作（加法、乘法等）不再是 O(1)，而是取决于数字的大小。

但请注意：Big-O 并没有说明实际计算时间。它只是忽略常数因素的渐近行为。这意味着，即使您有两种采用 O(n) 的算法，时间差也可能是 1000 倍（或一百万或任何您想要的）。除法的最佳示例：例如，加法都是 O(1)，但通常除法比加法需要更多的周期/时间来执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-16T22:11:25.417

尽管您可以使用二进制除法创建自己的实现； [https://www.youtube.com/watch?v=TPVFYoxna98](https://www.youtube.com/watch?v=TPVFYoxna98)

根据上一篇文章，我认为大多数处理器优化实际上会快得多。您需要查看您创建的字节码才能确定，但​​这可能涉及将内容放入处理器缓存中，因此您坚持将其作为最佳解决方案；

整数 a = ... 整数 b = ...

整数商 = a / b; int 余数 = a - (商 * b);

即 a=5, b=2 商：2 余数：1

从这里开始（虽然它有错误:)-）； [Java - 在同一步骤中获得商和余数？](https://stackoverflow.com/questions/52447569/java-get-the-quotient-and-remainder-in-the-same-step)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T00:10:39.213

但是，如果您使用 2 的基数并且您知道它，您可以使用它进行优化；

```
public class Foo {
  public static void println(String s) {
    System.out.println(s);
  }

  public static void main(String [] args) {
    int size = 100;
    int[] randoms = new int[size];
    for (int i = 0; i < randoms.length; i++) {
      randoms[i] = (int) (Math.random() * 1000);
    }

    for (int i = 0; i < randoms.length; i++) {
      int j = randoms[i];
      int k = j >> 3;
      int l = j - (k << 3);
      println("value " + i + " " + j );
      println(" " + j + " / 8 =  " + k + " remainder " + l );
    }
    //println("hey got " + c + " from " + a + " >> " + b);

  }
} 
```

# php - 如何让多个用户访问后端并保存数据？

> ID：14395736
> 
> 赞同：0
> 
> 时间：2013-01-18T09:19:22.863
> 
> 标签：php, jquery, mysql

我希望有人可以用外行的方式帮助解释这个过程，因为我仍然是“新手”并且正在学习。

我已经构建了一个带有后端的基本内容管理系统，并且我正在尝试创建一个系统，让数十名用户可以访问一项服务，将数据保存到他们的帐户，并在以后选择时调用这些数据。

到目前为止，我已经完成了登录、注册和表单（用于保存数据）。我只是在一点我不知道如何在 MySQL 中保存这些数据（顺便使用 PHP），以便几十个用户都可以保存数据而不是一个。

例如：数十名用户访问 WordPress 并可以创建帖子，但无法查看其他用户在其帐户上发布的帖子。

我了解如何设置一个帐户来保存数据，而不是多个。

任何建议将不胜感激。

PS如果有人有任何指南/教程/推荐文章要阅读，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:31:04.343

我认为您在 PHP 的工作方式中缺少一个相当重要的部分。

每个单独的用户使用您的应用程序的不同实例。例如，如果我进入并登录到应用程序，而您也这样做，我们将（例如）设置变量 $_SESSION，但我将拥有`$_SESSION['idUser'] = 3`，而您将拥有`$_SESSION['idUser'] = 5`. 他们不会知道彼此的存在。

因此，基本上，您需要为单个用户考虑您的应用程序，并具有适当的限制。这意味着，例如，如果您想创建编辑配置文件页面，您将`$idUser = $_SESSION['idUser']`在 SQL 查询中使用来选择/更新/插入适当的信息。

这是一个示例查询：

```
// view users profile page
$idUser = intval($_SESSION['idUser']);
$query = "SELECT * FROM `users` WHERE id = {$idUser}";

// edit profile checks/database update
$idUser = intval($_SESSION['idUser']);
$userData = $_POST['user']; // let's say all your inputs have a name="user[...]"
// !!! validation for the user data !!!
$query = "UPDATE `users` SET col1='{$userData[col1]}', col2='{$userData[col2]}' WHERE id = {$idUser}"; 
```

希望这会有所帮助，如果您需要进一步的说明，请告诉我。

PS：不要忘记在 SQL 查询中使用数据之前正确转义数据，并使用 mysqli 或 PDO 扩展（不要使用 mysql，因为它已被弃用，并将在未来的 PHP 版本中删除）。

# mysql - 为 mysql 优化商店模式

> ID：14395740
> 
> 赞同：0
> 
> 时间：2013-01-18T09:19:41.073
> 
> 标签：mysql, database-design

我已经创建了一个[数据库模式](http://dbdsgnr.appspot.com/app#agdkYmRzZ25ycg8LEgZTY2hlbWEYmuCEAQw)，但我不确定它是否真的经过优化。有人可以看看它并帮助我优化它吗？

它有表格`Categories`，其中包含类似的值`"Pizza, Salat, Pasta, Drinks"`。

`Sizes`表将包含每个类别的尺寸，比如`Pizza`可能有尺寸`small,large,family,party`。

并且`prices`表将包含`product_id,size_id,price`.

但我不确定是否`sizes`应该加入`products`表格或`categories`像我一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:15:01.147

当然，您的设计可能都完美地反映了您的基础业务领域——您并没有真正提供足够的信息来帮助我们做出任何决定。我鼓励您首先用文字表达架构 - 这通常有助于更好地理解关系。

我认为您的域大致如下：

*   一个类别有 1 个或多个产品。
*   一种产品恰好属于一个类别。
*   一种产品有 1 种或多种尺寸可供选择。
*   产品的基本价格由其尺寸决定。
*   一些（但不是全部）产品有配料。
*   一些（但不是全部）产品可以通过添加额外的配料来定制。
*   部分定制产品的总价由底价加上附加配料的总和决定。
*   一些定制产品的总价格由基础价格加上产品尺寸的额外配料的总和确定。
*   浇头可以添加到一种或多种产品中。
*   产品可以添加零个或多个浇头。

这有点像您在设计中展示的内容，只是您展示的是产品类别，而不是产品，它决定了可用的尺寸。那可能是对的。回答这个问题的方法是“是否存在并非所有产品都提供相同尺寸的产品类别？” 我认为有——例如，饮料制造商销售各种容器尺寸的饮料。

# google-maps - 使用openlayers lib，同一点显示在不同层之间的不同位置

> ID：14395749
> 
> 赞同：0
> 
> 时间：2013-01-18T09:19:58.917
> 
> 标签：google-maps, openlayers, projection

在[这个演示](http://sunsetsunrising.com/openlayers/mine/index-debug.html)中，共有三层：

1.  `MyLayer`：使用自定义平铺数据
2.  `Google`: 使用`Openlayer.Layer.Google`v3 API
3.  `TMS`

当我在地图上放置三个标记时，切换不同图层后显示不同的地方。我已经将 Google'layers 投影更改为 Openlayers 默认投影`EPSG:4326`。

我该如何解决这个问题？

还有为什么？

三点坐标为：

*   `(0, 0)`
*   `(31.22689446881399, 121.475830078125)`
*   `(18.255436745247998, 109.51309204101562)`

我所有[的代码都来自这里](https://github.com/lizzie/openlayers/blob/master/mine/assets/map/src/map.js#L94)

等待答案，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:39:01.717

如果您使用的是 Google 或 OSM 之类的图层，则必须将默认投影设置为`EPSG:900913`而不是`EPSG:4326`. 然后，您应该将所有图层重新投影到墨卡托投影。

[您可以在此处](http://docs.openlayers.org/library/spherical_mercator.html)阅读有关球形墨卡托的更多文档。您也可以`mercator`在此[示例页面上搜索](http://openlayers.org/dev/examples/)

# javascript - 将 2 位变量号拆分为两个输入字段

> ID：14395751
> 
> 赞同：2
> 
> 时间：2013-01-18T09:20:04.590
> 
> 标签：javascript, jquery

是否可以将两位数变量拆分为两个输入字段，例如：

假设我有一个变量`var age = 23;`，我想将其拆分为`<input class="age" id = "age1" />`，`<input class="age" id = "age2" />`因此 age1 的值为 2，age2 的值为 3。

任何帮助非常感谢...

这就是我获得年龄值的方式：

```
$.each(age_input_groups , function(i){
                var id = 'age-group-'+g_counter;
                var agevalues = $.map($('#'+id + ' input') , function(e,i){
                    return $(e).val(age);
                });
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:22:37.750

您可以这样做：

```
var age = 23;
document.getElementById('age1').value = Math.floor(age / 10);
document.getElementById('age2').value = age % 10; 
```

还有一个[例子](http://jsfiddle.net/wQaGN/1/)。

* * *

对于您的情况，您可以使用以下 JavaScript：

```
var age = 23,
    g_counter = 1;

$('.group').each(function(i){
  var id = 'input-group'+g_counter,
      selector = '#'+id + ' input',
      elem = $(selector);
  g_counter += 1;
  elem.first().val(Math.floor(age / 10));
  elem.last().val(age % 10);
}); 
```

和：

```
<div id="input-group1" class="group">
  <input type="text" />
  <input type="text" />
</div>
<div id="input-group2" class="group">
  <input type="text" />
  <input type="text" />
</div> 
```

再举一个[例子](http://jsfiddle.net/wQaGN/3/)。如果你有一个年龄列表，你可以使用[它](http://jsfiddle.net/wQaGN/4/)。

最后一个例子是[最终解决方案。](http://jsfiddle.net/mgechev/hkJ6K/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:21:07.220

您可以使用[**substring()**](http://www.w3schools.com/jsref/jsref_substring.asp)并将数字转换为字符串。

**[现场演示](http://jsfiddle.net/rajaadil/5swa3/)**

```
var age = '23';
age1 = age.toString();
docucment.getElementById('age1').value = age1.substring(0,1);
docucment.getElementById('age2').value = age1.substring(1,2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T09:22:53.173

可以将字符串作为数组访问以获取单个字符。因此你可以使用这个：

```
var foo = 23;
$('#age1').val(foo.toString()[0]);
$('#age2').val(foo.toString()[1]); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/7JWk7/)

# android - Android：当用户在管理应用程序中按下清除数据时执行操作

> ID：14395754
> 
> 赞同：2
> 
> 时间：2013-01-18T09:20:09.963
> 
> 标签：android, android-intent, android-broadcast

就像我们可以处理应用程序的卸载一样：[在应用程序卸载之前收听广播](https://stackoverflow.com/questions/8633761/listen-broadcast-before-application-uninstall)，是否有任何可用的方法或任何意图，通过它我可以处理 CLEAR DATA？

当用户在“管理应用程序”屏幕中按下“清除数据”时，我想执行一些步骤。

# android - 如何自定义这样的小部件？微调器？子菜单？

> ID：14395762
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:20:38.540
> 
> 标签：android, android-actionbar, actionbarsherlock, android-spinner, android-holo-everywhere

我想在操作栏上有一个这样的小部件：

![图片](../Images/a35f36d65c9f62b458aa03c51ee7f67b.png)

如何使用全息无处不在或 actionbarsherlock 自定义操作栏上的小部件？

单击**修改**或**FaceBook**项目时，**名称**文本不会更改，就像菜单一样。

带有 dropDownItems 的微调器或按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:10:29.690

您可以通过使用`Spinner`. [这](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ListNavigation.java)是 ActionBarSherlock 示例中的一个简单示例。

要在顶部有一个静态文本，您必须创建自己的`Adapter`来覆盖`getView()`. 在那里，您使用图像和文本“名称”膨胀布局并将其返回所有位置。

# ajax - dojo 1.8：通过小部件从其他内容窗格远程更新内容窗格

> ID：14395774
> 
> 赞同：0
> 
> 时间：2013-01-18T09:21:11.133
> 
> 标签：ajax, dojo

嗨，您知道如何从其他内容窗格远程更新内容窗格吗？即在一个内容窗格中更新 html 并通过 ajax 更改其他内容窗格中的一部分...
是否有任何示例或教程适合我。

谢谢克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:05:28.490

让我们试试这个教程，你可能会从中得到一个想法。

[http://dojotoolkit.org/reference-guide/1.8/dijit/form/TextBox.html#getting-and-manipulating-the-value](http://dojotoolkit.org/reference-guide/1.8/dijit/form/TextBox.html#getting-and-manipulating-the-value)

然后让我们尝试更多关于 dijit/registry 的示例。

[http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#dijit-registry](http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#dijit-registry)

# java - 关于处理属性的更好方法

> ID：14395776
> 
> 赞同：3
> 
> 时间：2013-01-18T09:21:25.350
> 
> 标签：java

我需要通过属性文件读取用户详细信息的以下两个属性。

```
username and userid. 
```

属性文件中可能有`n`多个用户。数量不固定。在这种情况下，使用 java.util.properties 文件处理此要求的最佳实践是什么？

如何使用以下方法。

在属性文件中：

```
 userA = Jhon#001
   userB = Smith#002
   userC = Snack#003 
```

请提供您的指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:23:45.767

对于这种方法，我更喜欢 XML

```
<users>
   <user>
       <username>John</username>
       <userid>001</userid>
    </user>
    <user>
       <username>Smith</username>
       <userid>002</userid>
   </user>
</users> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:37:30.450

为什么不使用 JSON 格式，比 XML 更小，速度更快

```
{"users": [
  { "userid":"01" , "username":"Jhon" }, 
  { "userid":"02" , "username":"Smith" }
  { "userid":"03" , "username":"SmithX" },    
  ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:25:44.623

正如@guess_me[提到](https://stackoverflow.com/a/14395813/1479414)的，XML 方法会更好。

但是如果你强烈需要使用`.properties`文件，那么最好将人数添加到键值中：

```
 user#001 = Jhon
 user#002 = Smith
 user#003 = Snack 
```

# linq - 使用 LINQ 删除具有特定索引的项目

> ID：14395777
> 
> 赞同：1
> 
> 时间：2013-01-18T09:21:29.433
> 
> 标签：linq, c#-4.0

像，

```
List<string> a = {"a0","a1","a2","a3"}; 
```

使用 LINQ，我如何获取`a[2]`和删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:25:10.930

听起来好像您正在寻找[`List.RemoveAt`](http://msdn.microsoft.com/en-us/library/5cw9x18z%28v=vs.80%29.aspx)方法：

```
a.RemoveAt(2); 
```

**编辑**：

> 我怎样才能知道它是在最后一个索引之前

所以你想删除倒数第二个而不是索引为 2 的那个，你可以使用该`Count`属性来找到它。这里绝对不需要使用 Linq：

```
if(a.Count > 1)
    a.RemoveAt(a.Count - 2); 
```

[**演示**](http://ideone.com/Q9xPgT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:27:04.440

试试这个方法，

```
 a.RemoveRange(2,1); 
```

或者

```
 a.RemoveAt(2); 
```

# c# - C# - WPF 在 DataGridColumnHeader 中使用 DataTrigger

> ID：14395781
> 
> 赞同：1
> 
> 时间：2013-01-18T09:21:58.540
> 
> 标签：c#, wpf, mvvm, binding, datagridtextcolumn

如何在 DataGridColumHeader 中使用 DataTriggers？使用下面的这段代码，它不起作用。有人知道我该如何解决这个问题吗？

```
<DataGridTextColumn.HeaderStyle>
   <Style TargetType="{x:Type DataGridColumnHeader}">
     <Setter Property="Background" Value="#FFFFBD21" />
     <Style.Triggers>
      <DataTrigger Binding="{Binding HasChangedRows}" Value="false">
        <Setter Property="Background" Value="#66FFBD21"/>
      </DataTrigger>
    </Style.Triggers>
  </Style>
</DataGridTextColumn.HeaderStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:07:38.097

在新解决方案中检查此代码，如果 HasChangedRows 绑定设置正确，您将看到它应该可以工作。您可以使用复选框来更改 HasChangedRows 的值

```
<Window x:Class="WpfApplication10.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
<StackPanel>
    <CheckBox IsThreeState="False" IsChecked="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=HasChanges, Mode=TwoWay}"
              Content="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}"/>

    <DataGrid Name="MainGrid" AutoGenerateColumns="False">
        <DataGrid.Resources>
            <Style TargetType="{x:Type DataGridColumnHeader}" x:Key="customheaderstyle">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=HasChanges}" Value="false">
                        <Setter Property="Background" Value="#66FFBD21"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=HasChanges}" Value="true">
                        <Setter Property="Background" Value="#FFFFBD21" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.Resources>
        <DataGrid.Columns>
            <DataGridTextColumn HeaderStyle="{StaticResource customheaderstyle}" Binding="{Binding}"/>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel>
</Window> 
```

和后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace WpfApplication10
{
  public partial class MainWindow : Window, INotifyPropertyChanged
  {

   #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChange(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    private bool _HasChanges = false;
    public bool HasChanges
    {
        get { return this._HasChanges; }
        set
        {
            this._HasChanges = value;                
            NotifyPropertyChange("HasChanges");

        }
    } 

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        String[] list = { "1", "2", "3", "4" };
        this.MainGrid.ItemsSource = list;            
    }
  }
} 
```

最后结果：

![在此处输入图像描述](../Images/6fa010f23a7b256deaa51c026e2f2b28.png)

和

![在此处输入图像描述](../Images/84ea4472fd634e1ec77740d8bd4a5e78.png)

# less - 检索文件名并将其用作带有 LESS 的类选择器

> ID：14395788
> 
> 赞同：0
> 
> 时间：2013-01-18T09:22:27.170
> 
> 标签：less

是否可以检索文件名并将其用作类选择器？我有一个名为“colorScheme.less”的文件，在这个文件中我有所有以“.colorScheme”为前缀的样式规则。当我更改 colorScheme.less 的文件名时，如何替换这个选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:26:12.380

## 解决方法

可能有一种方法可以使用 LESS 中的 javascript 功能来获取文件名并执行您想要的操作；但是，这不是我在这里提供的解决方案。相反，这使用了两个文件的解决方案。

假设最近版本的 LESS (1.3.3)，你有你的`colorScheme.less`文件，然后是另一个，我们称之为`loader.less`文件。中只有两行`loader.less`：

**loader.less**

```
@fileName: colorScheme;   
@import: "pathToFile/@{fileName}.less"; 
```

现在，在您的内部，您`colorScheme.less`已将其配置为利用您在文件`@fileName`中设置的变量。`loader.less`所以我们有类似的东西：

**colorScheme.less**

```
.@{fileName} p {color: red;}
.myClass-@{fileName} {color: blue;}
.@{fileName}-extended {color: yellow;} 
```

编译为...

```
.colorScheme p {color: red;}
.myClass-colorScheme {color: blue;}
.colorScheme-extended {color: yellow;} 
```

您拥有的每个地方都有您将`.colorScheme`其更改为`.@{fileName}`. 然后，您可以创建新`loader`文件来改变您的类名（我相信，这部分是您想要做的）。

# python - PyQt4 - 拖放

> ID：14395799
> 
> 赞同：9
> 
> 时间：2013-01-18T09:23:07.120
> 
> 标签：python, qt, button, drag-and-drop, pyqt4

嘿，我一直在阅读本[教程](http://zetcode.com/tutorials/pyqt4/dragdrop/)以了解 PyQt4 中的拖放方法。但是我无法理解以下几点。如果 somepne 能让我更清楚，那就太好了。

```
 def mouseMoveEvent(self, e): //class Button

    mimeData = QtCore.QMimeData()

    drag = QtGui.QDrag(self)
    drag.setMimeData(mimeData)
    drag.setHotSpot(e.pos() - self.rect().topLeft())

    dropAction = drag.start(QtCore.Qt.MoveAction)

def dropEvent(self, e): //class Example

    position = e.pos()
    self.button.move(position)

    e.setDropAction(QtCore.Qt.MoveAction)
    e.accept() 
```

为什么有一个单独的 self.button.move() 和 e.setDropAction() self.button.move() 实际上不移动按钮本身？有人可以解释一下 drag.setHotSpot 和 drag.start() 的作用吗？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-19T03:45:21.193

该教程严重过时。[自Qt 4.3](http://doc.qt.digia.com/4.3/qdrag-obsolete.html)`QDrag.start`以来已过时。应改为使用。[`QDrag.exec_`](http://qt-project.org/doc/qt-4.8/qdrag.html#exec)

正如您从文档中看到的那样`exec`，它有一个返回值。`setDropAction`in`dropEvent`确定这个值。它不执行移动。这就是为什么你需要一个`self.button.move()`来做实际的移动。那么， a 的意义`setDropAction`何在？你可能需要知道你做了什么样的拖拽操作。想象一下，您正在两个列表小部件之间实现拖放。如果您执行了移动操作，这意味着您需要从源小部件中删除该项目并在目标中创建一个。如果是复制操作，您可以保留原件并在目标中创建一个副本。

`setHotSpot`/`hotSpot`与`setPixmap`a有关`QDrag`。您可以`QPixmap`在拖动项目时显示 a。`hotSpot`确定像素图的位置。像素图的位置将使得光标`hotSpot`相对于像素图的左上角。因此，在该教程的情况下，它是相当没有意义的，因为没有要显示的像素图。

这是该教程的一些修改和更新版本。希望我已经包含了足够多的评论。您可以使用*移动*`Right-Click`或*复制*：`Shift + Right-Click`

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui, QtCore

class Button(QtGui.QPushButton):
    def mouseMoveEvent(self, e):
        if e.buttons() != QtCore.Qt.RightButton:
            return

        # write the relative cursor position to mime data
        mimeData = QtCore.QMimeData()
        # simple string with 'x,y'
        mimeData.setText('%d,%d' % (e.x(), e.y()))

        # let's make it fancy. we'll show a "ghost" of the button as we drag
        # grab the button to a pixmap
        pixmap = QtGui.QPixmap.grabWidget(self)

        # below makes the pixmap half transparent
        painter = QtGui.QPainter(pixmap)
        painter.setCompositionMode(painter.CompositionMode_DestinationIn)
        painter.fillRect(pixmap.rect(), QtGui.QColor(0, 0, 0, 127))
        painter.end()

        # make a QDrag
        drag = QtGui.QDrag(self)
        # put our MimeData
        drag.setMimeData(mimeData)
        # set its Pixmap
        drag.setPixmap(pixmap)
        # shift the Pixmap so that it coincides with the cursor position
        drag.setHotSpot(e.pos())

        # start the drag operation
        # exec_ will return the accepted action from dropEvent
        if drag.exec_(QtCore.Qt.CopyAction | QtCore.Qt.MoveAction) == QtCore.Qt.MoveAction:
            print 'moved'
        else:
            print 'copied'

    def mousePressEvent(self, e):
        QtGui.QPushButton.mousePressEvent(self, e)
        if e.button() == QtCore.Qt.LeftButton:
            print 'press'

class Example(QtGui.QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        self.setAcceptDrops(True)

        button = Button('Button', self)
        button.move(100, 65)

        self.buttons = [button]

        self.setWindowTitle('Copy or Move')
        self.setGeometry(300, 300, 280, 150)

    def dragEnterEvent(self, e):
        e.accept()

    def dropEvent(self, e):
        # get the relative position from the mime data
        mime = e.mimeData().text()
        x, y = map(int, mime.split(','))

        if e.keyboardModifiers() & QtCore.Qt.ShiftModifier:
            # copy
            # so create a new button
            button = Button('Button', self)
            # move it to the position adjusted with the cursor position at drag
            button.move(e.pos()-QtCore.QPoint(x, y))
            # show it
            button.show()
            # store it
            self.buttons.append(button)
            # set the drop action as Copy
            e.setDropAction(QtCore.Qt.CopyAction)
        else:
            # move
            # so move the dragged button (i.e. event.source())
            e.source().move(e.pos()-QtCore.QPoint(x, y))
            # set the drop action as Move
            e.setDropAction(QtCore.Qt.MoveAction)
        # tell the QDrag we accepted it
        e.accept()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    app.exec_() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-11T09:21:02.530

Avaris 的答案适用于 PyQt5 和 Python 3。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

# Adapted for PyQt5 and Python 3 from Avaris' answer to
# https://stackoverflow.com/questions/14395799/pyqt4-drag-and-drop

import sys
from PyQt5.QtWidgets import QPushButton, QWidget, QApplication
from PyQt5.QtCore import Qt, QMimeData, QPoint
from PyQt5.QtGui import QDrag, QPixmap, QPainter, QColor

class Button(QPushButton):
    def mouseMoveEvent(self, e):
        if e.buttons() != Qt.RightButton:
            return

        # write the relative cursor position to mime data
        mimeData = QMimeData()
        # simple string with 'x,y'
        mimeData.setText('%d,%d' % (e.x(), e.y()))

        # let's make it fancy. we'll show a "ghost" of the button as we drag
        # grab the button to a pixmap
        pixmap = QWidget.grab(self)

        # below makes the pixmap half transparent
        painter = QPainter(pixmap)
        painter.setCompositionMode(painter.CompositionMode_DestinationIn)
        painter.fillRect(pixmap.rect(), QColor(0, 0, 0, 127))
        painter.end()

        # make a QDrag
        drag = QDrag(self)
        # put our MimeData
        drag.setMimeData(mimeData)
        # set its Pixmap
        drag.setPixmap(pixmap)
        # shift the Pixmap so that it coincides with the cursor position
        drag.setHotSpot(e.pos())

        # start the drag operation
        # exec_ will return the accepted action from dropEvent
        if drag.exec_(Qt.CopyAction | Qt.MoveAction) == Qt.MoveAction:
            print('moved')
        else:
            print('copied')

    def mousePressEvent(self, e):
        QPushButton.mousePressEvent(self, e)
        if e.button() == Qt.LeftButton:
            print('press')

class Example(QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        self.setAcceptDrops(True)

        button = Button('Button', self)
        button.move(100, 65)

        self.buttons = [button]

        self.setWindowTitle('Copy or Move')
        self.setGeometry(300, 300, 280, 150)

    def dragEnterEvent(self, e):
        e.accept()

    def dropEvent(self, e):
        # get the relative position from the mime data
        mime = e.mimeData().text()
        x, y = map(int, mime.split(','))

        if e.keyboardModifiers() & Qt.ShiftModifier:
            # copy
            # so create a new button
            button = Button('Button', self)
            # move it to the position adjusted with the cursor position at drag
            button.move(e.pos()-QPoint(x, y))
            # show it
            button.show()
            # store it
            self.buttons.append(button)
            # set the drop action as Copy
            e.setDropAction(Qt.CopyAction)
        else:
            # move
            # so move the dragged button (i.e. event.source())
            e.source().move(e.pos()-QPoint(x, y))
            # set the drop action as Move
            e.setDropAction(Qt.MoveAction)
        # tell the QDrag we accepted it
        e.accept()

if __name__ == '__main__':
    app = QApplication(sys.argv)
    ex = Example()
    ex.show()
    app.exec_() 
```

# perl - Perl Net::FTPSSL 无法正常工作 - 尝试传输数据时超时

> ID：14395800
> 
> 赞同：1
> 
> 时间：2013-01-18T09:23:06.733
> 
> 标签：perl, cpan

我必须使用 TLS 将 pure-ftpd 的传输模式从常规 ftp 切换到 ftp。所以我将配置标志 TLS 切换为 2（只有 TSL，没有常规 FTP）。

文件的连接和传输在 filezilla 上运行良好。

现在我有一个 perl 脚本，它使用 NET::FTP 从服务器获取一些文件。

这是主要功能：

```
use Net::FTP;

$ftp = Net::FTP->new("[SERVERNAME]", Debug => 1)
  or die "Cannot connect to [SERVERNAME]: $@";

$ftp->login("[USER]",'[PASSWORD]')
  or die "Cannot login ", $ftp->message;

$ftp->cwd("/")
  or die "Cannot change working directory ", $ftp->message;

$ftp->dir("/")
  or die "get failed ", $ftp->message;

$ftp->get("somefile.txt")
  or die "get failed ", $ftp->message;

$ftp->quit; 
```

为了重建 GET 功能，我尝试将 CPAN 模块 NET::FTPSSL 与以下脚本片段一起使用：

```
use Net::FTPSSL;

  my $ftps = Net::FTPSSL->new('[SERVERNAME]', 
                  Port => 21,
                              Encryption => EXP_CRYPT,
                  Croak => 1,
                  Trace => 1,
                              Debug => 2
                  )
    or die "Can't open [SERVERNAME]\n$Net::FTPSSL::ERRSTR";
  $ftps->login('[USER]', '[PASSWORD]') 
    or die "Can't login: ", $ftps->last_message();

  $ftps->cwd("/anyfolder") or die "Can't change directory: " . $ftps->last_message();
  $ftps->quot("PASV");
  $ftps->nlst() or die "Error: " . $ftps->last_message();
  $ftps->list("/anyfolder") or die "Can't change directory: " . $ftps->last_message();
  $ftps->binary() or die "Can't change directory: " . $ftps->last_message();
  $ftps->put("anyfile.txt") or die "Can't get file: " . $ftps->last_message();
  $ftps->get("anyfile.txt") or die "Can't get file: " . $ftps->last_message();

  $ftps->quit(); 
```

该脚本在身份验证过程中运行良好。当涉及到文件传输时，它会停止，直到达到常规 timeaut。

脚本的调试输出如下所示：

> SKT <<< 220-欢迎来到 Pure-FTPd。SKT <<< 220-您是允许的 100 名用户中的第 1 名。SKT <<< 220-这是一个私人系统 - 没有匿名登录 SKT <<< 220-此服务器也欢迎 IPv6 连接。SKT <<< 220 您将在 15 分钟不活动后断开连接。SKT >>> AUTH TLS SKT <<< 234 AUTH TLS OK。
> 
> > > > 用户 +++++++ <<< 331 用户 <++++++> 好的。需要密码 PASS ******* <<< 230-用户 <++++++> 具有组访问权限：100 <<< 230-此服务器支持 FXP 传输 <<< 230 OK。当前目录为 /CWD /rollout <<< 250 OK。当前目录是 /anyfolder PASV <<< 227 进入被动模式 ( ***...*** , 27,254) PBSZ 0 <<< 200 PBSZ=0 PROT P <<< 200 数据保护级别设置为“私有” PASV <<< 227 进入***被动***模式 ( ***.*** . ***.*** ,145,153) --- 主机 ( ***.*** . ***.*** ) 端口 (37273) NLST

因此，可以使用 filezilla 与服务器连接，但无法连接到服务器并使用脚本传输文件。

我知道这很可能不是一件大事，但我目前无法找到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:26:01.130

I had a similar problem switching from Net::FTP to Net::FTPSSL, and I found that passing the OverridePASV parameter with the same remote address fixed it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T14:52:49.333

因此，您已经说过您尝试过 OverridePASV，但没有成功。通常，这是显而易见的解决方法，因为几个 FTP 服务器在 PASV 命令的响应中错误地返回了它们的 IP 地址。如果它们位于防火墙等后面，则它们的外向 IP 地址不是它们返回的 IP 地址。

由于您是从广域网而不是内部局域网与服务器交谈，因此将 PASV 连接设置到它为您提供的 IP 地址只会挂起。当您使用 OverridePASV 时，您可以强制被动连接使用 WAN IP 地址（即您用来连接它的地址）。

鉴于 OverridePASV 不起作用，问题更可能是您的 FTP 服务器位于不允许被动连接完成的防火墙后面（即 FTP 服务器设置的端口未从WAN) 或 FTP 服务器不支持被动。Net::FTPSSL 只做被动（至少我正在查看的代码版本，标记为 0.31）。如果您正在与之交谈的 FTP 服务器不支持 PASV，或者您无法连接到被动端口，则连接通常会挂起，直到超时。FileZilla 很可能使用的是 PORT 而不是 PASV，这就是它起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T15:25:07.760

$ftps->quot("PASV");

quot 将文本发送到服务器以获得 Net::FTPSSL 中不存在的功能。

PASV 改变了服务器的工作方式，但是因为“quot”，客户端并不在意。

如果你想让 PASV 工作，你必须在 NET::FTPSSL 中创建一个新命令。

这个新命令必须：

1.  将“PASV”发送到服务器，并且
2.  将客户端配置为作为 DATA 连接的服务器。

net::ftpssl 使用仅在客户端模式下工作的 DATA 连接库。

# android - 尝试通过蓝牙与 android 连接时出现“服务发现失败”

> ID：14395801
> 
> 赞同：0
> 
> 时间：2013-01-18T09:23:09.670
> 
> 标签：android, service, bluetooth, discovery

我想在我的智能手机 HTC One X 上运行 android 示例项目“BluetoothChat”。当尝试连接到连接到我的电脑的蓝牙适配器时，我收到“服务发现失败”- 错误。
我已经阅读了一些适用于某些开发人员但不适用于我的解决方案：

1.  我使用标准的 UUID`00000000-0000-1000-8000-00805F9B34FB`

2.  我试图更换
    `tmp = device.createRfcommSocketToServiceRecord(MY_UUID);`

和

```
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
         tmp = (BluetoothSocket) m.invoke(device, 1); 
```

`btAdapter.cancelDiscovery()`3.我在连接之前 打电话

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:14:34.823

您的机器上是否存在蓝牙聊天应用程序？

对于您的用例，流程是这样的：

1.  使用 Rfcomm[serviceID] 连接 [服务应该存在于两个蓝牙设备中的蓝牙服务发现数据库中]
2.  无线连接后，在另一个蓝牙设备上运行的远程RFCOMM服务，将搜索该服务是否存在于其服务发现数据库中。如果不存在，则返回服务未找到。

把它放在一个线程中 一个蓝牙设备请求的 RFCOMM SERVICE 应该在远程设备中可用。

如果您有兴趣，请随时讨论。乐于帮助

# javascript - 有没有办法将 html 代码（链接、表单、按钮）与视频“硬链接”，以便它们都直接显示在 facebook 提要上？

> ID：14395802
> 
> 赞同：0
> 
> 时间：2013-01-18T09:23:12.680
> 
> 标签：javascript, facebook, html, facebook-graph-api, html5-video

举一个具体的例子，kpsule.me 设法将与用户交互的元素（文本链接、表单...）集成到视频（但它是在 flash/swf 中）中。

当用户在 Facebook 上分享视频时，他们不仅分享了“视频”，还分享了视频中包含的所有这些元素（链接热点、表单……）。

示例：[http](http://player.kpsule.me/kpsule.swf?place=embed&ecoverID=1795281&typecover=none&openWith=undefined) ://player.kpsule.me/kpsule.swf?place=embed&ecoverID=1795281&typecover=none&openWith=undefined （然后点击底部的 F 图标让 Facebook 分享到 FB）。（其他示例：[http](http://www.kpsule.me/fr/produit/?popin=248) ://www.kpsule.me/fr/produit/?popin=248 ）

我的问题是：由于 Facebook 只接受直接显示在 mp4 或 swf 等提要格式上，因此可以在没有 flash/swf 但使用 html5/javascript 的情况下实现 kpsule.me（发送包含在共享组中的视频文字链接、表格……）

如果您有任何想法或希望加入我的头脑风暴，那将是受欢迎的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:25:36.097

这并不是您在 facebook 等方面所要寻找的。但我认为您正在努力实现这一目标。我不知道结果与 facebook 的集成程度如何。我刚刚在视频中看到了它的演示。

[https://popcorn.webmaker.org/](https://popcorn.webmaker.org/)

# android - 为什么 MapView 显示灰色瓷砖而不是地图？

> ID：14395809
> 
> 赞同：2
> 
> 时间：2013-01-18T09:23:25.503
> 
> 标签：android, android-mapview, tiles, sha1, api-key

好的，所以我通过创建一个批处理文件获得了我的 SHA1 指纹。之后，我转到“服务”页面并启用 Google Maps API v2 和 v3。我还去了“API 访问”页面并使用 SHA1;PACKAGENAME 创建了一个新的 Android 密钥。在此之后，我转到我的项目文件夹并添加以下代码：

```
<permission
    android:name            = "com.example.test.permission.MAPS_RECEIVE"
    android:protectionLevel = "signature" 
/>

<uses-feature
    android:glEsVersion     = "0x00020000"
    android:required        = "true" 
/>

<uses-permission android:name="com.example.test.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-library android:name="com.google.android.maps" />

<meta-data
        android:name    = "com.google.android.maps.v2.API_KEY"
        android:value   = "APIKEY" 
/> 
```

我还创建了一个 XML 文件并粘贴了以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android           = "http://schemas.android.com/apk/res/android"
    android:id              = "@+id/mapview_MV"
    android:layout_width    = "fill_parent"
    android:layout_height   = "fill_parent"
    android:clickable       = "true"
    android:apiKey          = "APIKEY"
/> 
```

在我的 HTC One X+ 上编译并运行该项目后，我只看到一堆灰色瓷砖。我还尝试在代码中使用 MapView，如下所示：

```
/********************************************************************
* ONCREATE                                                          *
********************************************************************/
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView( R.layout.general_layout );

    MapView mapView = new MapView( GamePage.this, "APIKEY" );
    MapController mc = mapView.getController();
    String coordinates[] = {"1.352566007", "103.78921587"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    GeoPoint p = new GeoPoint( (int) (lat * 1E6), (int) (lng * 1E6) );

    mc.animateTo(p);
    mc.setZoom(17); 

    FrameLayout fl = ( FrameLayout ) findViewById(R.id.general_frameHolder_FL);
    fl.addView(mapView);
} 
```

我看到以下错误：

```
Couldn't get connection factory client 
```

谁能告诉我我到底做错了什么！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-23T08:57:58.623

当我们实施`MapView`或`Fragment`必须`Activity`实施其生命周期方法[时](https://developers.google.com/android/reference/com/google/android/gms/maps/MapView#public-methods)

放**mmapView.onCreate(savedInstanceState);**

在里面`onCreateView()`或`onCreate()`

```
 @Override
public void onResume() {
    super.onResume();
    mMapView.onResume();
}

@Override
public void onDestroy() {
    super.onDestroy();
    mMapView.onDestroy();
}

@Override
public void onPause() {
    super.onPause();
    mMapView.onPause();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:40:21.583

尝试启用谷歌地图 Android API v2 ![在此处输入图像描述](../Images/b5b197dae97326be4e4f8d3244b1f47b.png)

元键必须低于应用程序标签

```
<permission
    android:name            = "com.example.test.permission.MAPS_RECEIVE"
    android:protectionLevel = "signature" 
/>

<uses-feature
    android:glEsVersion     = "0x00020000"
    android:required        = "true" 
/>

<uses-permission android:name="com.example.test.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-library android:name="com.google.android.maps" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <!-- key v2 -->
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="Bla Bla" />

    <uses-library
        android:name="com.google.android.maps"
        android:required="false" />
    <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/st_google_activity_main" >
    </activity>
</application> 
```

而如果你使用 MapView，你必须转发所有的[Activity 生命周期方法](https://i.stack.imgur.com/uwz2b.png)。

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
        <fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />
</LinearLayout> 
```

班级

```
public class MainActivity extends android.support.v4.app.FragmentActivity implements OnMapClickListener , OnMapLongClickListener , OnCameraChangeListener {
    private GoogleMap                   mMap;
    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_googlev2);
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        mMap.setOnMapClickListener(this);
        mMap.setOnMapLongClickListener(this);
        mMap.setOnCameraChangeListener(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:02:33.527

在我看来 api-key 问题..尝试以这种方式给予

```
android:apiKey="0BYX7MFyg8lWRKFxzwG-D93VMxZP6wH5eObwEtw" 
```

检查您的日志..您是否从 Google Map Lib 获得任何错误日志？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:55:53.873

我找到了解决问题的方法。我需要做的是删除 SDK 管理器中的 Google Play 服务并重新安装它，因为由于某种原因我错过了很多包。感谢 Fido，我发现 Google Maps Android v2 API 不支持 MapView，并在以下网址阅读了完整的介绍：[https](https://developers.google.com/maps/documentation/android/start#specifying_permissions) ://developers.google.com/maps/documentation/android/start#specifying_permissions 。

之后，我还找到了一个可以解决 NoClassFoundError 的网站： [http](http://www.user.tu-berlin.de/hennroja/tutorial_fixing_java.lang.NoClassDefFoundError%20com.google.android.gms.R) : //www.user.tu-berlin.de/hennroja/tutorial_fixing_java.lang.NoClassDefFoundError%20com.google.android.gms.R $styleable。 html

我用新的 Google Maps API 解决了这个可怕的问题花了我 +- 5 个小时。

# visual-studio-2012 - 在 Server Explorer (LocalDB) VS2012 中查看数据

> ID：14395817
> 
> 赞同：3
> 
> 时间：2013-01-18T09:24:04.767
> 
> 标签：visual-studio-2012, localdb

我创建了一个 LocalDB 并将其添加到我的解决方案中。我正在使用实体框架。

我可以从 localdb 添加和检索数据（我正在运行 Release），但数据库正在复制到 bin/Release 文件夹。

我想在我的服务器资源管理器中查看已添加的数据。这甚至可能吗？

怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T02:02:38.623

好的，我想做类似的事情。您可以看到添加到 localDB 的数据的方式如下，在您的解决方案资源管理器上右键单击数据库 - 示例（mydb.mdf），然后单击打开，应该会弹出一个窗口询问您数据库源和文件名称，它应该具有默认值，只需单击确定。现在您可以在服务器资源管理器上看到 localDB。您现在要做的就是查找一个表并创建一个新查询 - 示例（从 mytablename 中选择 *）。您应该能够看到查询检索到的数据。希望这有帮助

# visual-studio-2010 - 壁虎外汇入门

> ID：14395822
> 
> 赞同：0
> 
> 时间：2013-01-18T09:24:25.273
> 
> 标签：visual-studio-2010, freeze, xulrunner, gecko

我正在使用以下代码将壁虎嵌入到我的应用程序中：

```
Dim browser As Gecko.GeckoWebBrowser

Gecko.Xpcom.Initialize("C:\temp\MozilaTeste\xulrunner")
browser = New Gecko.GeckoWebBrowser

Me.Controls.Add(browser)
browser.Dock = DockStyle.Fill
browser.Navigate("http://www.aol.com") 
```

但是我的应用程序在 call 后冻结了`browser.Navigate("http://www.aol.com")`。我正在使用 VS2010 Express。我已经下载了 xulrunner 并将其解压缩到“C:\temp\MozilaTeste\xulrunner”。我已经下载了 gecko fx 并将 and 添加`geckofx-core-14.dll`到`Geckofx-Winforms-14.dll`项目参考中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:54:17.970

注释掉以下行：

```
browser.Navigate("http://www.aol.com") 
```

它还结冰吗？

如果否，则将导航移动到 Window Created Event 处理程序中。

GeckoWebBrowser 控件会在创建 WinForms 控件时自行初始化。控件初始化成功后需要调用Navigate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:03:19.820

到 xulrunner 目录的路径可能有问题吗？尝试使用 "\" 。我的代码（调试文件夹中的 xulrunner 目录）： Gecko.Xpcom.Initialize(AppDomain.CurrentDomain.BaseDirectory + "xulrunner\");

# java - 递归词 trie 遍历

> ID：14395823
> 
> 赞同：2
> 
> 时间：2013-01-18T09:24:30.850
> 
> 标签：java, traversal, trie

我在这里找到了同样的问题[Traversing a trie to get all words](https://stackoverflow.com/questions/6041142/traversing-a-trie-to-get-all-words)，但它是针对 Perl 的，我只熟悉 Java。我的 trie 结构是普通整数数组，其中前 26 个整数是根，每个整数都有 firstChild 索引，它是子数组元素的索引（最多 25 个最高位），列表结束位标志，字结束位标志，从 1 到 26（最低 5 位）的字母索引。`CAGE`如果我将 2（字母 c 的根索引）作为参数传递，我可以递归打印一个单词

```
private void oneWord(int node) {
        System.out.print(getChar(Trie[node]));
        if (getEOL(Trie[node]) != 1) {
            oneWord(getFirstChild(Trie[node]));
        }
    } 
```

或一个共同的开头和不同的结尾，例如 `YARDELLOW`单词 yard 和 yellow（传递 24 作为参数）

```
private void DFTSearch(int node) {
    System.out.print(getChar(Trie[node]));
    if (getFirstChild(Trie[node]) != 0) {
        for (int i = 0; i < getSiblingsNum((getFirstChild(Trie[node])); i++) {
            DFTSearch(getFirstChild(Trie[node]) + i);
        }
    }
} 
```

但不能用所有的词来做到这一点（（我已经尝试过这个和那个让它返回一个字符串，但没有取得任何成功（只是得到一个字符串的第一个字母。请帮助使用该方法为我的 trie 中的所有单词递归打印（更好的是 - 返回字符串数组）。这不是家庭作业，我是自学的））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:20:26.833

您能否分享更多代码和输入数据，以更好地了解您要做什么？

**这个关于Java 中的 Trie 数据结构的**Stack Overflow 讨论可能会有所帮助：[Trie 数据结构 - Java](https://stackoverflow.com/questions/3806788/trie-data-structures-java?rq=1)。我发现以下链接（来自答案之一）非常有用：[https](https://forums.oracle.com/forums/thread.jspa?messageID=8787521) ://forums.oracle.com/forums/thread.jspa?messageID=8787521 。

编辑：在[https://forums.oracle.com/forums/thread.jspa?messageID=8787521](https://forums.oracle.com/forums/thread.jspa?messageID=8787521)和[Java 树数据结构的帮助下？](https://stackoverflow.com/questions/3522454/java-tree-data-structure?rq=1)，我创建了以下代码：

```
public Stack<List<Character>> createTreeAndGetAllWords() {
    // Create the tree.
    final Tree<Character> rootTree = new Tree<Character>('*');
    final Tree<Character> cTree = rootTree.addChild(new Tree<Character>('c'));
    final Tree<Character> aTree = cTree.addChild(new Tree<Character>('a'));
    aTree.addChild(new Tree<Character>('r'));
    aTree.addChild(new Tree<Character>('t'));
    final Tree<Character> dTree = rootTree.addChild(new Tree<Character>('d'));
    final Tree<Character> oTree = dTree.addChild(new Tree<Character>('o'));
    oTree.addChild(new Tree<Character>('g'));
    // Traverse the tree.
    return getAllWords(rootTree);
}

private Stack<List<Character>> getAllWords(final Tree<Character> tree) {
    final Stack<List<Character>> listStack = new Stack<List<Character>>();
    for (final Tree<Character> child : tree.getChildren()) {
        listStack.push(new ArrayList<Character>());
        traverseSubtree(child, listStack);
    }
    return listStack;
}

private void traverseSubtree(final Tree<Character> tree, final Stack<List<Character>> listStack) {
    final List<Character> currentWord = listStack.pop();
    if (tree.hasChildren()) {
        for (final Tree<Character> child : tree.getChildren()) {
            final List<Character> extendedWord = new ArrayList<Character>(currentWord);
            extendedWord.add(tree.getValue());
            listStack.push(extendedWord);
            traverseSubtree(child, listStack);
        }
    } else {
        currentWord.add(tree.getValue());
        listStack.push(currentWord);
    }
}

public class Tree<T> {
    private T value;
    private List<Tree<T>> children;

    public Tree(T value) {
        this.value = value;
        this.children = new ArrayList<Tree<T>>();
    }

    public T getValue() {
        return value;
    }

    public boolean hasChildren() {
        return children.size() > 0;
    }

    public Tree<T> addChild(Tree<T> child) {
        children.add(child);
        return child;
    }

    public List<Tree<T>> getChildren() {
        return children;
    }
} 
```

当我调用 createTreeAndGetAllWords 时，它会返回我期望的三个字符列表：[c, a, r], [c, a, t] 和 [d, o, g]。

```
for (final List<Character> word : createTreeAndGetAllWords()) {
    System.out.println("word = " + word);
} 
```

干杯，弗里克

# javascript - 用于简单 webapp 的 Javascript 框架

> ID：14395828
> 
> 赞同：1
> 
> 时间：2013-01-18T09:25:01.180
> 
> 标签：javascript, web-applications

我需要为互联网连接速度差的设备开发简单的 webapp。这个 webapp 应该从服务器 (jsonrpc\restfull web-service) 获取 json 字符串并在客户端呈现它。换句话说，它应该是这样的：

> — 在 url **/list**上加载文件**list.htm**并对其执行**list.js**
> 
> — 在 url **/about**上加载文件**about.htm**并在其上执行**about.js**

在某些页面上，我应该打开`WebSocket`连接，当用户转到另一个页面时，我需要关闭此连接。所以，我基本上需要生命周期事件。如果我可以在 url 之间使用过渡动画，那就太好了。

## 骨干网.js

首先我检查`backbone.js`。具有大社区的出色低级工具。但它是非常低级的，视图没有这样的生命周期事件。还有难以理解的逻辑。

## Ember.js

好工具，但我对文档有一些误解。似乎开发人员编写代码比文档更快，因此文档的许多部分根本不可用。

## Angular.js

我认为这是我所看到的最棒的工具！很棒的 MVC 逻辑，但文档也有问题。堆积了这个问题：[https ://github.com/angular/angular.js/issues/1830](https://github.com/angular/angular.js/issues/1830)

========

现在我真的厌倦了选择适合我需要的工具包。对于这项任务，所有 fw 看起来都太复杂了。也许我在错误的地方寻找？今天我看`jQueryMobile`框架。它看起来像我需要的（使用页面预加载器、页面更改动画）。但它的目标是开发具有移动 UI 的移动应用程序。

也许我想念什么？我还应该看到什么fw？或者我应该使用主干\ember\angular？有一些我可以检查的例子吗？所有示例仅显示模型如何绑定到视图等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:28:32.220

你的问题没有一个正确的答案。我建议查看[ToDoMVC 项目](http://todomvc.com/)，它展示了使用一系列 JavaScript 框架实现的相同应用程序。

您还应该阅读

[穿越 JavaScript MVC 丛林之旅。](http://coding.smashingmagazine.com/2012/07/27/journey-through-the-javascript-mvc-jungle/)

# search - 批量搜索文件并移动它们

> ID：14395840
> 
> 赞同：0
> 
> 时间：2013-01-18T09:25:31.153
> 
> 标签：search, batch-file, copy

我有一个正在搜索 PST 文件的批处理文件，使用搜索到的文件的位置创建一个**.txt**文件，然后在 Documents 目录中创建一个文件夹。我想要做的是将 PST 文件复制到 Documents 目录中的新目录。问题是我无法将 PST 复制到新目录？？知道我在做什么错吗？

**.bat**看起来像这样；

```
dir C:\*.pst /s /b > %USERPROFILE%\Desktop\pstFileLocation.txt
md %USERPROFILE%\Documents\Refresh_PST
for /F "tokens=3" %%v in ('pstFileLocation.txt') do copy "%i" "%USERPROFILE%\Documents\Refresh_PST" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:30:37.773

可能是文件被 Outlook 锁定。在执行批处理之前尝试停止 Outlook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:23:44.997

问题是您如何阅读文本文件。您正在使用`tokens=3`这意味着您正在尝试读取每行中的第 3 项（默认情况下，项目由空格分隔）并且如果它们只是文件路径，则很可能没有第 3 项。

您还试图复制`%i`不存在的变量。

您可以使用将整行读取为一个项目来修复令牌问题`tokens=*`，但这样做会更容易和更快

```
md "%USERPROFILE%\Documents\Refresh_PST"
for /r C:\ %%a in (*.pst) do copy "%%a" "%USERPROFILE%\Documents\Refresh_PST" 
```

这节省了将文件导出到列表然后再读回的需要。

# c# - 多个插入事务连接超时 - ADO.NET - SQL Server

> ID：14395846
> 
> 赞同：2
> 
> 时间：2013-01-18T09:25:51.413
> 
> 标签：c#, sql-server, ado.net, connection-timeout

我有一个包含多个插入的事务。除一个外，所有插件都可以正常工作。我验证了参数，拼写，所有这些，似乎我没有弄清楚。它给了我错误：

```
Timeout expired. The timeout period elapsed prior to completion of the operation 
or the server is not responding. 
```

我的交易如下所示：

```
SqlConnection db = new SqlConnection(connString);
DataSet dataSet = new DataSet();
SqlDataAdapter da = new SqlDataAdapter();
using (db)
{
    db.Open();
    SqlTransaction trans = db.BeginTransaction();
    try
    {
        //insert into COMMSignalDefinition !!Problem HERE
        da.InsertCommand = 
            new SqlCommand("INSERT INTO COMMSignalDefinition(Name) " 
                           + "VALUES (@name)", db, trans);

        da.InsertCommand.Parameters.Add("@name", SqlDbType.NVarChar);
        foreach (DataRow row in ds.Tables["COMMTerminalSignal"].Select())
        {
            da.InsertCommand.Parameters[0].Value = row.ItemArray[1];
            da.InsertCommand.ExecuteNonQuery();
        }

        // insert into COMMSignalExceptionDefinition -- names
        da.InsertCommand = 
            new SqlCommand("INSERT INTO COMMSignalExceptionDefinition(Name) " 
                           + "VALUES (@name)", db, trans);
        da.InsertCommand.Parameters.Add("@name", SqlDbType.NVarChar);
        foreach (DataRow row in ds.Tables["COMMSignalExceptionDef"].Select())
        {
            da.InsertCommand.Parameters[0].Value = row.ItemArray[1];
            da.InsertCommand.ExecuteNonQuery();
        }

        trans.Commit();
        MessageBox.Show("You have successfully imported your Settings. " 
                        + "You can now exit the program.", 
                         "Success",
                         MessageBoxButtons.OK, 
                         MessageBoxIcon.Information);
    }
    catch (Exception e)
    {
        trans.Rollback();
        MessageBox.Show(e.Message,
                        "Error", 
                        MessageBoxButtons.OK, 
                        MessageBoxIcon.Error);
    }
} 
```

我有更多可以正常工作的插入（我删除了其余的），并且我在开始时移动了有问题的插入。我的问题是我可能做错什么？我什至验证了“有问题的”查询是否已发送到服务器，`SQL Server Profiler,`并且确实如此！如果我在 中执行它`SQL Server Management studio`，它也可以工作。

`Connection Timeout`设置为 30

你能给我一些线索吗？SQL Server 版本是 2005 ！谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:34:52.830

请删除此帖。我真为自己感到羞耻……经过数小时的挖掘，结果我在 Management Studio 中进行了一些测试，在那里我测试了一些交易而根本没有提交它们。所以它在等待提交，我一直在做，或者试图做插入......！真丢人！为此事道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:48:35.093

如果这是一个运行时间很长的操作，您可以尝试更改[Command Timeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:52:17.440

1.  检查您的连接字符串。也许您的 connString var 中有一些错误
2.  检查您的 SqlDataAdapter 命令超时。它们可能是异常的原因（请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)）通常这种异常是长时间运行的任务或未提交的交易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:36:05.907

> 连接超时设置为 1

[`SqlConnection.ConnectionTimeout`财产](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)

> 等待连接打开的时间（以**秒为单位）。**默认值为 15 秒。

因此，您已将超时设置为 1 秒。这是否回答你的问题？

> 备注：您可以使用连接字符串中的 ConnectTimeout 或 Connection Timeout 关键字来设置连接等待超时的时间。**值 0 表示没有限制**，应避免在 ConnectionString 中使用，因为连接尝试会无限期地等待。

# android - Android：创建多列按钮，每列都有独立的滚动视图

> ID：14395848
> 
> 赞同：2
> 
> 时间：2013-01-18T09:26:05.873
> 
> 标签：android, scroll, multiple-columns

这是我编写的示例 XML。我正在尝试制作一个垂直对齐的按钮列表，以及另外 2 列这样的按钮。所以总共会有3列。每列都可以垂直滚动。如何添加更多列并使它们可单独滚动？

我已经搜索并尝试了其他几种变体；我能达到的最接近的是tablelayout，但是垂直滚动似乎是不可能的！

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/table" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:stretchColumns="*"> 

                <Button 
                    android:id="@+id/button1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/button1"/>

                <Button
                    android:id="@+id/button2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/button2"/>
                <Button
                     android:id="@+id/button3"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/button3"/>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:36:04.493

您可以使用一个水平`LinearLayout`作为根容器，然后`ScrollView`为每列使用一个具有相等宽度并包含一个垂直的`LinearLayout`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ScrollView
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button1_2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button1_3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />
    </LinearLayout>
</ScrollView>

<ScrollView
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button2_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button2_2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button2_3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />
    </LinearLayout>
</ScrollView>

<ScrollView
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button3_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button3_2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />

        <Button
            android:id="@+id/button3_3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/button1" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:36:44.260

您可以通过创建水平线性布局并并排放置三个列表视图来做到这一点，将它们的高度作为填充父级，宽度作为总屏幕宽度的 1/3。现在您可以将按钮分别放在每个列表中，并且可以独立滚动它们。您可以尝试这种方法，看看它是否是您想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T09:36:28.463

你可以这样做：

```
<LinearLayout 
    ....
     android:orientation="horizontal">
    <ScrollView ...
       android:layout_weight="1">
      <LinearLayout android:orientation="vertical">
        <Button android:id="@+id/b4">
        <Button android:id="@+id/b5">
        <Button android:id="@+id/b6">
      </LinearLayout>
    </ScrollView>
    <ScrollView ...
       android:layout_weight="1">
      <LinearLayout android:orientation="vertical">
        <Button android:id="@+id/b7">
        <Button android:id="@+id/b8">
        <Button android:id="@+id/b9">
      </LinearLayout>
    </ScrollView>
    <ScrollView ...
       android:layout_weight="1">
      <LinearLayout android:orientation="vertical">
        <Button android:id="@+id/b1">
        <Button android:id="@+id/b2">
        <Button android:id="@+id/b3">
      </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

# objective-c - 使用 Objective-C 更改具有随机值的按钮文本

> ID：14395850
> 
> 赞同：0
> 
> 时间：2013-01-18T09:26:46.583
> 
> 标签：objective-c, xcode

我是 Objective-C 和 X-Code 的新手，基本上是在 iOS 中编程，所以这可能是一个非常简单的问题。无论如何，我正在尝试进行徽标测验，其中徽标和选项以随机顺序生成，即（徽标 1）--- 选择：第一次尝试的 ABCD。然后下次用户打开应用程序时，Logo 4 首先出现并选择 ADB C。（我希望这很清楚）。我设法随机显示徽标，但不知道如何对会修改徽标下方 4 个按钮的值的选项执行相同操作。

根据我的搜索，您使用以下内容：

```
 [btnA setTitle:@"answer" forState:UIControlStateNormal]; 
```

我的问题是，我也在考虑将选择放入一个数组中，所以我尝试了这样的方法：

```
[btnA setTitle:[answerArray objectAtIndex:i] forState:UIControlStateNormal];] 
```

与我为徽标所做的类似，但我没有得到按钮的任何值。我在这里缺少什么吗？我也没有收到任何错误。这是我的代码的一部分，可以更好地解释我一直在尝试做的事情：

```
NSMutableArray *answerList = [[NSMutableArray alloc] initWithObjects:
                               @"AnswerA",
                               @"AnswerB",
                               @"AnswerC",
                               nil];
answerArray = answerList;
int i = arc4random() % [answerArray count];
[self.btn1 setTitle:[answerArray objectAtIndex:i] forState:UIControlStateNormal];
[self.btn2 setTitle:[answerArray objectAtIndex:i] forState:UIControlStateNormal];
[self.btn3 setTitle:[answerArray objectAtIndex:i] forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:42:56.563

只是`Shuffle`您的`buttonTitleArray`，`MutableArray`无需重复`same logo quiz`使用[此](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)链接。

也`Shuffle logo quiz's choice`使它与`above link`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:47:51.913

请参阅以下代码 - 它可以从 100 个集合中生成随机标题：

```
-(int)getRandomNumber:(int)fromVal to:(int)toVal {
    return (int)fromVal + arc4random() % (toVal-fromVal+1);
}

-(void) setButtonTitle
{
    NSArray * buttonTitleArray = [NSArray arrayWithObjects:@"title1", @"title2",... @"title100", nil};
    int x = [getRandomNumber :0 :100];
    NSString * title = [buttonTitleArray objectAtIndex:x];
    [button setTitle:title :forState:UIControlStateNormal];
} 
```

# magento - 从其他地方注册到magento数据库

> ID：14395852
> 
> 赞同：0
> 
> 时间：2013-01-18T09:26:55.963
> 
> 标签：magento

我如何从另一个地方注册新用户。我想使用单个数据库。

我有另一个网站，我想使用 magento 的注册类，因为我想为两个网站提供一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:05:46.437

您可以通过[Magento SOAP API从外部站点注册新客户](http://www.magentocommerce.com/api/soap/customer/customer.create.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:47:58.137

您可以从磁电机安装创建**多网站。**那将只使用单个数据库。查看 magento wiki 了解[多站点配置](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)。

# c#-4.0 - 谷歌文档。我需要使用公共链接 c# 编辑文档

> ID：14395853
> 
> 赞同：0
> 
> 时间：2013-01-18T09:27:01.077
> 
> 标签：c#-4.0, google-docs-api

谷歌文档。我需要在 c# 中编辑带有公共链接的文档。到底有没有？

```
FileStream fs = FileStream("C:\*****.jpg", FileMode.Open); 
DocumentEntry entry2 = service.Update(new Uri(strAlternateUriComesFromServer), fs, "text/plain", null) as DocumentEntry; 
```

此代码给出错误。我如何编辑公共文档。

我只有共享文档链接，我需要更新它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:23:59.337

如果您知道文档名称或资源 ID，并且该文档与您共享，并且您具有正确的读/写访问权限 (ACL)，那么更新资源应该没有任何问题。

通常使用 Google Documents API 更新文档是这样的：

1.  获取文档的 DocumentEntry。您可以构造一个 DocumentQuery 以根据某些搜索参数查找目标文档。请参阅此处的文档： [Google Documents List API 3.0](https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files)

2.  从 DocumentEntry 对象获取下载 URL 并将文档下载到您的 PC。如果您对修改原始内容不感兴趣并且只想上传并用您在本地制作的内容覆盖内容，则下载是可选的。

3.  编辑文档并将其更新（上传）到 Google 文档。 [更新文档。](https://developers.google.com/google-apps/documents-list/#updatingchanging_documents_and_files) 具体来说，请查看“**使用可恢复协议更新文档或文件内容”部分。**现在将任何内容上传到 Docs 时**必须**使用 ResumableUploader。

编辑添加：尝试使用以下方法从公共链接获取 DocumentEntry：

```
// Public Link contains the resourceID
// example:  https://docs.google.com/file/d/097iZigwrANhGTElvZDdCVmlZNzQ/edit
// resourceID:  097iZigwrANhGTElvZDdCVmlZNzQ
// Get Your Document Entry

string editUri = "http://docs.google.com/feeds/documents/private/full/%3A" + resourceID;
DocumentEntry docEntry = (DocumentEntry)service.Get(editUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:47:00.707

```
 string editUri = "https://docs.google.com/feeds/default/private/full/file%3A" + resId;

    DocumentEntry docEntry = (DocumentEntry)dsServ1.Get(editUri);
    docEntry.Title.Text = strNewName;
    docEntry.MediaSource = new MediaFileSource("C:\\new.txt", "text/plain");
    ResumableUploader uploader = new ResumableUploader();

    // Start the update process.
    ClientLoginAuthenticator oa = new ClientLoginAuthenticator("Komote", ServiceNames.Documents, strUsername, strPassword);
    uploader.UpdateAsync(oa, docEntry, new object()); 
```

这段代码很好用。谢谢你的帮助。

# android - onCreateScene 出错

> ID：14395855
> 
> 赞同：1
> 
> 时间：2013-01-18T09:27:04.830
> 
> 标签：android, andengine

```
protected Scene onCreateScene() {
    // TODO Auto-generated method stub
    this.mEngine.registerUpdateHandler(new FPSLogger());
            this.myScene=new Scene();
            SpriteBackground myback=new SpriteBackground(new Sprite(0,0,CAMERA_WIDTH,CAMERA_HEIGHT, myBackGroundTextureRegion, this.getVertexBufferObjectManager()));
    myScene.setBackground(myback);
           myHandler.postDelayed(mStartVamp, 5000);
            return myScene;
}

private Runnable mStartVamp=new Runnable() {

    @Override
    public void run() {
        AnimatedSprite scrumSprite=new AnimatedSprite(CAMERA_WIDTH-20, CAMERA_HEIGHT/2,myScrumTiledTextureRegion, getVertexBufferObjectManager());

        scrumSprite.animate(500);
        scrumSprite.registerEntityModifier(new SequenceEntityModifier(new AlphaModifier(5, 0, 1),new MoveModifier(60, scrumSprite.getX(),20,scrumSprite.getY(),(CAMERA_HEIGHT/2))));
        myScene.attachChild(scrumSprite);
} 
```

# javascript - 我可以覆盖或设置确认功能按钮的文本吗

> ID：14395857
> 
> 赞同：1
> 
> 时间：2013-01-18T09:27:08.170
> 
> 标签：javascript, html

当用户删除某些内容（如类别）时，我使用方法确认作为

```
 <input id="id1"  class="button" onclick="return confirm("Are you sure?")" type="submit>            <input/> 
```

它可以正常工作。但我的网站支持多语言。这是问题；如何为每种语言设置确认按钮文本？确认屏幕语言是默认浏览器的语言，但我想为每种语言设置这些按钮文本。例如：在英语中使用“确认”和“取消”按钮，但在土耳其语中使用“Onayla”和“Vazgeç”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:28:35.017

在这种情况下，您将必须创建自定义对话框/确认框，内置确认基于浏览器语言并且无法更改。

# postgresql - 两个日期之间的最高间隔同一张表

> ID：14395865
> 
> 赞同：0
> 
> 时间：2013-01-18T09:27:52.203
> 
> 标签：postgresql, date, intervals

我搜索了很多，然后再试一次，我真的不知道如何解决我的问题，也许是因为我不知道 SQL 需求是如何工作的以及如何处理表。

这是我的问题。我有一个包含列 (id, sentdate, data) 的表。其中一列是日期（发送日期），例如“2011-03-21 05:17:48”。我需要的是比较第一个日期和第二个日期并获得天数的差异，然后是第二个日期和第三个日期的差异......等等。最后，我想获得开始日期和结束日期的最高间隔。我正在使用 PostgreSQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:14:19.260

如果你想要整数天的差异：

```
select
    sentdate, lag(sentdate) over(order by sentdate) previous_sentdate,
    sentdate::date - lag(sentdate) over(order by sentdate) days
from t
order by sentdate 
```

# c++ - C++ Boost::thread 可升级互斥锁“尝试升级锁”？

> ID：14395866
> 
> 赞同：0
> 
> 时间：2013-01-18T09:27:59.620
> 
> 标签：c++, boost, boost-thread

我在此处的最佳答案之后[实施了 boost 可升级互斥锁 Example of how to use boost upgradeable mutexes](https://stackoverflow.com/questions/3896717/example-of-how-to-use-boost-upgradeable-mutexes)

我想做的是“尝试”升级是否会阻塞：如果升级不会阻塞则执行升级，否则不要锁定并返回。

有什么功能可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:33:38.747

是的，有：
-bool try_lock_upgrade_for(duration d)
-bool try_lock_upgrade_until(time when)

见[http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.upgrade_mutex](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.upgrade_mutex)

# java - Struts 2 XML 验证

> ID：14395867
> 
> 赞同：2
> 
> 时间：2013-01-18T09:28:01.663
> 
> 标签：java, xml, validation, struts2

我开始使用 Struts 2，我正在尝试使用 Struts xml 验证器验证 2 个文本字段。

```
<s:textfield name="userName" id="userName" label="User Name">
<s:textfield name="passWord" id="userName" label="Password"> 
```

我能够通过单击提交按钮来验证字段。

是否可以在单击提交按钮之前验证字段？条件是：当您尝试输入没有用户名的密码时，验证用户名字段并在它为空时显示错误消息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:53:17.767

您必须在请求之前执行此操作，即在客户端。您可以在文本框上使用`Javascript`or`OnChange`事件`OnKeyDown`。触发的方法可以使提交无效并使用 DOM 显示错误消息。只是出于好奇，你为什么需要这样做呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:55:03.817

```
Regarding this question in stack overflow so many discussions are already there (but not   in strtus2  it is in JQuery). 
```

我提供了这些链接，您可以从这里引用它，
[如何直接使用 jQuery Validate，无需提交按钮](https://stackoverflow.com/questions/2340127/how-do-i-use-jquery-validate-directly-without-the-submit-button.)

[jquery validate：如果表单有效，则显示提交按钮](https://stackoverflow.com/questions/13031376/jquery-validate-if-form-valid-then-show-submit-button.)

[隐藏提交按钮，直到表单有效](https://stackoverflow.com/questions/11690947/hide-submit-button-until-form-is-valid.)

# android - facebook graph Api，如何设置隐私设置

> ID：14395868
> 
> 赞同：2
> 
> 时间：2013-01-18T09:28:02.600
> 
> 标签：android, facebook-graph-api

我有一个带有微调器的自定义 dailog，可以选择谁可以在用户墙上看到我们的帖子，我想选择并在我的墙上发帖，但不知道如何将隐私设置放在墙上并发送。

```
getId = getfbId(id);

        if (getId != null) {

            String url = Constants.fbindexURL + "lang=" + lang + "&lat=" + lat + "&getfbid=" + getId;
            myplace = Constants.loadedplace.getCityName();
            parameters.putString("name", getString(R.string.reply));
            parameters.putString("caption", fbUuer + " in " + Constants.loadedplace.getCityName());
            parameters.putString("link", url);
            parameters.putString("picture", Constants.ImageURL);    
//------------> parameters.putString("privacy",  ); 
```

下面是获取我的微调器值的代码

```
 spinner = (Spinner)dialog.findViewById(R.id.spinner);
             spinner.setOnItemSelectedListener(new Adapter

View.OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                        String choose = spinner.getSelectedItem().toString();

                    }
                    public void onNothingSelected(AdapterView<?> parent) {
                    }
                }); 
```

有人可以建议我如何选择从微调器中看到谁并相应地张贴在我的墙上。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T10:01:09.710

两个 Facebook 文档在这里很重要：

1.  [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)（几乎向下滚动到页面末尾以查看*POSTS - Create*部分。）
2.  [https://developers.facebook.com/docs/reference/api/privacy-parameter/](https://developers.facebook.com/docs/reference/api/privacy-parameter/)

*这里有一点很重要，您只能为自己墙上的帖子选择不同的隐私设置。更重要的是用户必须自己主动选择隐私。当用户第一次为您的应用选择权限时，您不能覆盖用户选择的默认设置。（在他们的帐户设置中可用）*

要更改单个帖子的隐私，例如，如果您需要让帖子仅对您可用，则需要将其包含在您的参数中：

*注意：隐私设置必须在 JSON 对象中。*

```
privacy={'value':'SELF'} 
```

*使用示例：*

```
JSONObject jsonObject = new JSONObject();
jsonObject.put("value", "SELF");
parameters.putString("privacy", jsonObject.toString()); 
```

上面提到的第二个链接有更多有用的细节。请阅读它们以更好地配置您的应用程序。

建议：要在 FB 上选择您希望允许帖子可见的朋友，您可以在此处使用此示例从以下位置选择多个用户：http `GridView`: [//vikaskanani.wordpress.com/2011/07/20/android-custom -image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

# css - 在我无法控制的外部 CSS 文件中更改 CSS 值？

> ID：14395871
> 
> 赞同：1
> 
> 时间：2013-01-18T09:28:12.897
> 
> 标签：css, google-chrome, tinymce, userscripts

我使用一个使用*TinyMCE*编辑器作为可视化编辑器的 CMS。它的 CSS 进行了奇怪的编辑，因此 ul-lists 不会显示项目符号，并且段落之间没有任何空格。

是否有一种简单方便的方法来更改在**我无权访问的服务器上特定 CSS 文件中定义的外观？**我需要覆盖这些属性`www.site.com/global.css`：

```
ul { list-style-type: square; }
p { margin: 10 px; } 
```

我相信使用 Greasemonkey 有一种简单的方法，但我不擅长编写脚本。哦，我正在使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:53:39.270

因为您使用 TinyMCE，所以您需要将 CSS 文件加载到 TinyMCE iframe 头部而不是主页面中。

为此使用[content_css](http://www.tinymce.com/wiki.php/Configuration:content_css)设置。这是一种覆盖 TinyMCE 默认 CSS 的方法。

**更新**：无需访问服务器文件或 TinyMCE 配置，您仍然可以访问 TinyMCE API。查看此选项以[将 CSS 加载](http://www.tinymce.com/wiki.php/API3:method.tinymce.dom.DOMUtils.loadCSS)到您需要的位置。您应该将 CSS 文件放在 Internet/Intranet 上可以访问的某个位置。

```
// Loads a CSS file dynamically into the current document
tinymce.DOM.loadCSS('somepath/some.css');

// Loads a CSS file into the currently active editor instance
tinyMCE.activeEditor.dom.loadCSS('somepath/some.css');

// Loads a CSS file into an editor instance by id
tinyMCE.get('someid').dom.loadCSS('somepath/some.css');

// Loads multiple CSS files into the current document
tinymce.DOM.loadCSS('somepath/some.css,somepath/someother.css'); 
```

**更新 2**：可以将 CSS 字符串加载到 iframe 头部。为此，请使用以下*用户脚本*：

```
// ==UserScript==
// @name    YOUR_SCRIPT_NAME
// @match   http://YOUR_SERVER.COM/YOUR_PATH/*
// ==/UserScript==

var css_to_add = 'p { margin: 10 px; }'; // example
var iframe_id = 'your_editor_id' + '_ifr'; // place your editor id here+'_ifr'
with(document.getElementById(iframe_id).contentWindow) {
    var h = document.getElementsByTagName("head");
    if (!h.length) return;
    var newStyleSheet = document.createElement("style");
    newStyleSheet.type = "text/css";
    h[0].appendChild (newStyleSheet);
    try {
        if ( typeof newStyleSheet.styleSheet !== "undefined" ) {
            newStyleSheet.styleSheet.cssText = css_to_add;
        }
        else {
            newStyleSheet.appendChild( document.createTextNode ( css_to_add ) );
            newStyleSheet.innerHTML = css_to_add;
        }
    }
    catch(e){}
} 
```

将代码另存为并按照[**这些说明**](https://superuser.com/q/450893/41023)`MyCSSFix.user.js`将其安装在 Chrome 中（在为您的详细信息编辑指示的位置之后）。[](https://superuser.com/q/450893/41023)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:40:25.490

添加到标记内联的属性应该覆盖以前加载的样式表声明。

```
<p style="margin:0px;"></p> 
```

应该覆盖 global.css 中的任何 p-margin 样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:41:17.730

在您的 css 文件上使用**!important**

```
ul { list-style-type: square !important; } 
```**

# oauth-2.0 - 我的 OAuth2 客户端也可以发出自己的访问令牌吗？

> ID：14395875
> 
> 赞同：0
> 
> 时间：2013-01-18T09:28:29.963
> 
> 标签：oauth-2.0

我们的应用程序已经是委托给多个授权服务器的客户端。关键是我们有用户帐户，但我们不存储任何凭据。我们的用户来自 Facebook / Google / 等，他们的本地帐户是自动创建的。

现在，随着该应用程序的发展，其他应用程序希望与我们的 API 集成，因此我们希望提供自己的 OAuth2 端点。我们正在实现一个成熟的 OAuth2 服务器，将部分委托给 Facebook/Google/whatnot，否则作为普通服务器工作（发出我们自己的访问令牌、刷新令牌等）。这是预期的事情吗？标准中有什么特定于这个用例的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T22:51:23.920

你的做法很正常。今天你实现了资源服务器，谷歌等是授权服务器。您正计划实施一个新的授权服务器。从逻辑上讲，这将与资源服务器完全不同，即使它*可能*位于同一物理服务器上。

但是，实现授权服务器相对复杂，因为它旨在支持多个独立的客户端。如果您不想支持其他第 3 方客户端，您可以为自己的身份验证选择更简单的成员资格提供程序类型模型，并为外部身份验证提供程序保留 OAuth 部分。也就是说，只需在您的应用程序中有一个登录页面，将用户名和散列凭据保存在您的数据库中并使用应用程序会话。提供一些 UI 让用户选择使用您的会员提供商“本地”登录，还是使用外部的。

许多网站采用这种双重方法（例如 StackOverflow 本身 ​​- 您可以使用 Facebook 或 SO 帐户登录）。这将比成熟的 OAuth 2 授权服务器更省力。

# jquery - Z-Index IE 7 和 8

> ID：14395879
> 
> 赞同：0
> 
> 时间：2013-01-18T09:28:35.830
> 
> 标签：jquery, html, css, internet-explorer, z-index

我正在处理以下内容，我制作了一个不错的下拉菜单，问题是它可以在除 IE 7 和 8（或 LTE）之外的**所有浏览器中运行......**

我一直在看stackoverflow上的问题，我已经测试了很多，但似乎没有任何效果。所以我一直想知道是否有任何 jquery/javascript 修复来修复 ie 中的 Z-Index。

我一直在看很多网站，所以我希望你不要在这里发布其他问题的任何网站。

我已将 z-index 更改为更高，我已将其他 div 也指定为 z-index，但似乎不起作用。

它应该如何工作：[example1](http://img341.imageshack.us/img341/9805/ex2z.png)

现在如何工作：[example2](http://img805.imageshack.us/img805/569/ex1g.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:34:10.253

尝试将 position:relative 和更大的 z-index 赋予包含用户名/密码下拉列表的 div 的父级，以及位置：相对于与用户名/密码下拉列表重叠但 z-index 较小的 div 的父级。

# ios - 进入 iPhone 应用程序。逆向工程 iPhone 应用程序

> ID：14395882
> 
> 赞同：3
> 
> 时间：2013-01-18T09:28:53.860
> 
> 标签：ios, iphone, cocoa-touch, reverse-engineering

> **可能重复：**
> [反编译 iPhone 应用程序二进制文件](https://stackoverflow.com/questions/1976699/decompile-iphone-app-binary)

**这个问题可能是不道德的，或者至少它属于黑客领域或 iPhone 开发的阴暗面。**

我想在没有登录的情况下查看应用程序（*没有注册，不是每个人都可以拥有帐户*）。

是否有可能我将它下载到 iPhone，以某种方式传输`IPA`文件。打开它并查看其中的内容 - 例如资源文件和 xib 文件？

你知道从应用商店下载的 iPhone 应用逆向工程的任何成功方法吗？

**欢迎任何建议！**

*请不要支持不道德/非法的垃圾邮件答案/声明。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:50:22.640

为了查看安装在设备上的应用程序，您需要越狱设备。

***这是合法的，至少在美国是这样。几年前，电子前沿基金会成功地论证了这一点，[最近又进行了更新](https://www.eff.org/press/releases/eff-wins-renewal-smartphone-jailbreaking-rights-plus-new-legal-protections-video)。***

***道德与否，取决于你想做什么。***

请记住，史蒂夫·乔布斯和史蒂夫·沃兹尼亚克设计的首批产品之一是“蓝盒子”——一种用于拨打免费电话的设备。一定程度的好奇心有助于成为一名优秀的工程师，尤其是如果你想专攻安全。

同时，我们现在拥有如此强大的 iOS 行业的原因是因为最终用户可以合理地确保他们安装的应用程序会像广告宣传的那样运行（而不是做任何有趣的事情）。

如果你想继续，请确保你有一个强大的道德指南针。不要做任何不道德的事情。

越狱设备后，您可以安装 ssh 和 scp。将它放在您的本地网络上，并以 root 身份登录 ssh。更改为：

```
/Application 
```

. . . 目录并将您感兴趣的 .app 文件 scp 到本地计算机。调查。

# c# - 多次注册接近事件

> ID：14395883
> 
> 赞同：1
> 
> 时间：2013-01-18T09:28:57.013
> 
> 标签：c#, xaml, windows-phone-8, windows-phone

我有这个应用程序正在监听 NFC 设备的到来。它基于 Microsoft 的示例：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465221.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465221.aspx)

```
Windows.Networking.Proximity.ProximityDevice proximityDevice;

public MainPage()
{
    InitializeComponent();

    proximityDevice = Windows.Networking.Proximity.ProximityDevice.GetDefault();

    if (proximityDevice != null)
    {
        proximityDevice.DeviceArrived += ProximityDeviceArrived;
    }
    else
    {
        MessageTextBlock.Text += "Failed to initialize proximity device.\n";
    }
} 
```

这是在我的 MainPage.xaml 中实现的。我的问题是，如果我导航到另一个页面，然后按后退按钮返回（我没有覆盖该功能），我现在似乎得到了多个事件。

因此，当设备在导航之前到达时注册一次，在我访问另一个 .xaml 页面并返回后，即使只有一个设备到达，也会多次触发 DeviceArrived。

我必须以某种方式锁定它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:22:41.243

您应该在基于 XAML 的静态事件框架中遵循的设计模式是在 OnNavigatedTo 方法覆盖中注册并在 OnNavigatedFrom 方法覆盖中取消注册。

```
private ProximityDevice proximity = ProximityDevice.GetDefault();

protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if (proximity != null)
    {
        proximity.DeviceArrived += proximity_DeviceArrived;
    }   

    base.OnNavigatedTo(e);
}

protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    if (proximity != null)
    {
        proximity.DeviceArrived -= proximity_DeviceArrived;
    }   

    base.OnNavigatedFrom(e);
} 
```

或者，对于架构上更合理的解决方案，在单例类中注册静态事件并将其转换为 Messenger/EventAggregator/etc 的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:43:00.990

对于每个设备，您不止一次地注册到同一事件。相反，只需通过检查之前是否已注册事件来仅注册一次事件。

```
if (proximityDevice != null)
{
    if(proximityDevice.DeviceArrived == null)
       proximityDevice.DeviceArrived += ProximityDeviceArrived;
} 
```

# php - 验证和显示来自多维数组的错误

> ID：14395884
> 
> 赞同：0
> 
> 时间：2013-01-18T09:28:57.390
> 
> 标签：php

为了从县获得著名的运动，我创建了这个表格。

```
$sports = array (
            'Australia' =>  array (
                            1 => 'Cricket',
                            2 => 'Foot Ball',
                            3 => 'Net Ball',
                            4 => 'Kabadi',
                            5 => 'Ragby',
                            6 => 'Basket Ball',
                            7 => 'Volley Ball',
                        ),          
          'New Zealand' =>  array (
                            1 => 'Cricket',
                            2 => 'Foot Ball',
                            3 => 'Net Ball',
                            4 => 'Ragby',
                            5 => 'Basket Ball',                         
                        ),        
              'England' =>  array (
                            1 => 'Cricket',
                            2 => 'Foot Ball',
                            3 => 'Net Ball',
                            4 => 'Ragby',
                            5 => 'Karom',                           
                            6 => 'Basket Ball',                         
                            7 => 'Table Tennis',                            
                            8 => 'Tennis',                          
                        ), 
                );

echo '<br><form action="" method="post">';
    foreach ( $sports AS $country => $sport ) { 
        echo "<h3>{$country}</h3\n";    
        foreach ($sport AS $k => $v) { 
            echo "<br /><input type='checkbox'  name='country-sport[{$country}][]' value='{$k}' />{$v}\n";
        } 
    }
echo "\n<br><input type='submit' value='go' />\n</form>"; 
```

我的问题是当我要验证这一点时。在这里，我需要使用此表单验证检查一些条件。

1.  country-subject 数组是否完全为空
2.  每个国家/地区至少选择了 1 项或最多 3 项运动

不满足这些条件需要显示错误信息。

我尝试了这样的事情..使用此代码，我可以获得第一个错误消息，即如果整个数组为空..

**更新：**到目前为止，这是我的验证码..

```
if ( isset($_POST['country-sport']) && is_array( $_POST['country-sport'])) {

    foreach ( $_POST['country-sport'] AS $country => $sport) { 

        if ( count($sport) >= 1 && count($sport) <= 3) { //checking that it has 3 or more values.
             //process
        } else {
            echo "select at leat 1 or upto 3 sports for {$country} ";          
        }   
    }

} else {    
    echo 'You have not selected sports for any country!';
} 
```

**更新：**使用 var_dump($_POST['country-sport']);

```
array(3) {
  ["Australia"]=>
  array(3) {
    [0]=>
    string(1) "1"
    [1]=>
    string(1) "2"
    [2]=>
    string(1) "3"
  }
  ["New Zealand"]=>
  array(3) {
    [0]=>
    string(1) "2"
    [1]=>
    string(1) "3"
    [2]=>
    string(1) "4"
  }
  ["England"]=>
  array(3) {
    [0]=>
    string(1) "6"
    [1]=>
    string(1) "7"
    [2]=>
    string(1) "8"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:18:31.280

请尝试以下代码：

```
<?php
if (isset($_POST['country-sport']) && is_array($_POST['country-sport']))
{      
    foreach ($_POST['country-sport'] AS $country => $sport)
    {
        $varTotal = 0;
        foreach($sport as $k=>$v)
        {
            if($v != '')
            {
                $varTotal += 1;
            }
        }
        if ($varTotal >= 1 && $varTotal <= 3)
        {

        } 
        else
        {
            $arrError[$country] = 'select at least 1 or upto 3 sports for '.$country ;
        }
    }
    print_r($arrError);
} 
else
{
    echo 'You have not selected sports for any country!';
}
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        $sports = array(
            'Australia' => array(
                1 => 'Cricket',
                2 => 'Foot Ball',
                3 => 'Net Ball',
                4 => 'Kabadi',
                5 => 'Ragby',
                6 => 'Basket Ball',
                7 => 'Volley Ball',
            ),
            'New Zealand' => array(
                1 => 'Cricket',
                2 => 'Foot Ball',
                3 => 'Net Ball',
                4 => 'Ragby',
                5 => 'Basket Ball',
            ),
            'England' => array(
                1 => 'Cricket',
                2 => 'Foot Ball',
                3 => 'Net Ball',
                4 => 'Ragby',
                5 => 'Karom',
                6 => 'Basket Ball',
                7 => 'Table Tennis',
                8 => 'Tennis',
            ),
        );

        echo '<br><form action="" method="post">';
        foreach ($sports AS $country => $sport)
        {
            echo "<h3>{$country}</h3\n";
            $i=0;
            foreach ($sport AS $k => $v)
            {  
                // This will help to get all the fields name in post 
                echo "<input type='hidden'  name='country-sport[{$country}][]' value='' />";              
                echo "<br /><input type='checkbox'  name='country-sport[{$country}][]' value='{$k}' />{$v}\n";
                $i++;
            }
        }
        echo "\n<br><input type='submit' value='go' />\n</form>";
        ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:22:13.560

试试这个：

```
if ( isset($_POST['country-sport']) && !empty( $_POST['country-sport'])) {//using empty

    foreach ( $_POST['country-sport'] AS $country => $sport) { 

        if ( count($sport) > 2) { //checking that it has 3 or more values.
             //process
        } else {
            echo "select at leat 1 or upto 3 sports for {$country} ";          
        }   
    }
} else {    
    echo 'You have not selected sports for any country!';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:38:54.987

我认为最好的方法是通过遍历每个国家/地区单独检查该国家/地区的运动是否满足您所述的要求（是否为空，和/或至少选择了 1 到 3 个运动）将其分解为块)，然后将错误的结果放在一个单独的数组中，以确定它是否已验证。

这意味着，一旦它通过国家/地区，您将拥有一个具有类似结构的数组，其中哪些是有效的，哪些是无效的。然后您可以从那里显示您的错误和原因。您甚至可以突出显示未正确填写的国家/地区，因为您已将其全部分解。

```
$result = array(
    'Australia' => array('error' => false, 'reason' => ''),
    'New Zealand' => array('error' => true, 'reason' => 'No countries selected')
); 
```

# wso2 - 负载平衡的集群配置 - WSO2 BAM/CEP

> ID：14395885
> 
> 赞同：1
> 
> 时间：2013-01-18T09:29:07.737
> 
> 标签：wso2, complex-event-processing, wso2bam, wso2cep

WSO2 CEP 或 BAM 如何进行负载平衡？使其处于集群模式（主动-主动）需要哪些配置更改。

发布者如何通过 Thrift 向此集群服务器发送事件，请提供示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:37:52.017

通过更改连接 URL 字符串，可以简单地对 BAM 或 CEP 进行负载平衡。

在单服务器模式（无负载平衡）下，连接 URL 如下；

```
tcp://10.100.3.97:7611 
```

当需要负载平衡时，您需要连接到多个 BAM/CEP 服务器。请注意，此负载平衡是在数据代理的客户端以循环方式完成的，因为 Thrift 协议不支持 WSO2 负载平衡器。

如果您需要连接到多个如上所述的负载均衡的 BAM/CEP 服务器，您可以输入每个服务器的逗号分隔的连接 URL，如下所示。

```
tcp://10.200.3.218:7611, tcp://10.100.3.97:7611, tcp://10.300.3.197:7611 
```

从数据代理客户端接收到的每条消息都将以循环方式定向到每个 URL，这将导致负载平衡。

现在让我们考虑一种情况，您希望同时向 BAM 和 CEP 服务器发送相同的消息。与 BAM 和 CEP 服务器相关的 URL（其中有 2 个 BAM 服务器和 3 个 CEP 服务器）可以如下给出负载平衡消息。

```
{tcp://10.200.3.218:7611, tcp://10.100.3.97:7611, tcp://10.300.3.197:7611}, {tcp://10.400.3.297:7611, tcp://10.500.3.597:7611} 
```

请注意，第一个大括号中的三个 URL 与 3 个 CEP 服务器相关，另外 2 个与 2 个 BAM 服务器相关。

如上所述输入相应的连接 URL 以配置数据代理后，您可以照常发布。消息将自动以循环方式切换到每个服务器。

# javascript - JavaScript 图片本地路径

> ID：14395897
> 
> 赞同：1
> 
> 时间：2013-01-18T09:30:03.270
> 
> 标签：javascript, asp.net

抱歉这个菜鸟问题，但我想在网页上加载一个 gif 并使用

如下所示的 HTTP 链接非常完美。

但是当我用路径替换它时它不起作用

gif在网页的同一文件夹中

我确实尝试过：

*   /thegifname.gif
*   ./thegifname.gif
*   //thegifname.gif
*   gif名称.gif

但是这些都不起作用，在ie中使用调试器，在代码和本地路径中使用断点

./thegifname.gif 它有效！但没有调试工具我看不到 gif。

```
<script language="javascript" type="text/javascript">
var size = 0;
var id= 0;

function add_gif() {
    document.getElementById("Label1").style.display = "none";       
    show_image("http://i789.photobucket.com/albums/yy180/Lendisson/progress_bar.gif", 300,15, "Running");
}

function show_image(src, width, height, alt) {
    var img = document.createElement("img");
    img.src = src;
    img.width = width;
    img.height = height;
    img.alt = alt;
    document.getElementById("divUpload").style.display="inline";
    var div = document.getElementById("divUpload");
    div.appendChild(img);
 }

 </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:20:37.813

好的，这是查找和调试的过程。

`1.`打开您的萤火虫并尝试单击图像源，如果它打开图像，则表示它正在获取正确的图像资源并且有一些显示问题。

如果不是，那么提供的路径有问题，请检查它。

`2.`如果图像正确打开，则意味着您的图像已正确加载，稍后会被其他元素覆盖。

`3.`如果是这种情况，再次打开 firebug 并使用样式属性，您将看到您的图像。

`4.`如果没有，则调试它。你一定会发现问题的。

如果我留下了您在从问题中恢复时发现的东西。请发表评论

# iphone - 我想在选项卡控件上重新定位徽章图形

> ID：14395899
> 
> 赞同：0
> 
> 时间：2013-01-18T09:30:17.617
> 
> 标签：iphone, xcode, layout, badge, uitabcontroller

有谁知道如何在 UITabController 上重新定位徽章？我正在使用自定义图形，并且徽章图形的右边缘被切断。

![截屏](../Images/2b2bb86ba43a81e578d8aabac8fc92fe.png)

# javascript - 使用 ajax 加载 Javascript 时出错

> ID：14395900
> 
> 赞同：2
> 
> 时间：2013-01-18T09:30:22.207
> 
> 标签：javascript, ajax

我有需要使用 Ajax 加载应用程序的要求，在应用程序中我加载了一些 javascript。

```
 <script type="text/javascript" src="some.js"></script> 
```

现在的问题是，当我直接加载应用程序（没有 ajax）时它工作正常，但是当我使用 ajax 加载应用程序时；javascripts 没有被加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:39:03.820

您是否尝试动态加载 JavaScript 文件？

如果是这样，AJAX 不是你的朋友。您只需将 SCRIPT 标记添加到 DOM。

```
var jsTag = document.createElement("script");
jsTag.src = "some.js";
document.getElementsByTagName("body")[0].appendChild(jsTag); 
```

当然，这个特定的例子需要你有一个 body 元素来附加脚本标签...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:36:37.200

使用 jquery ajax 方法`ajax.getScript`，我猜你正在做动态加载，所以你需要在 ajax 调用后注册脚本。

参考[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# php - error_log 未按预期工作

> ID：14395905
> 
> 赞同：0
> 
> 时间：2013-01-18T09:30:35.250
> 
> 标签：php, error-handling, error-logging, error-log

我有以下基本代码：

```
<?php

    //http://localhost/error_log.php
    echo "write to the error_log";
    error_log("error_log entry");
    //error_log("error_log entry",0);

?> 
```

当我导航到此页面时，我`write to the error_log`在浏览器中看到。它甚至出现在 access_log 中`/var/log/apache2/access.log`。

```
[my ip here] - - [18/Jan/2013:09:18:54 +0000] "GET /error_log.php HTTP/1.1" 200 314 "-" "Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11" 
```

但是当我检查 error_log ie 时`/var/log/apache2/error.log`，我看不到任何一个 error_log 消息。

为什么这些没有进入error_log？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:38:09.443

您在没有第二个参数的情况下调用它，这意味着默认值为 0

```
0   message is sent to PHP's system logger, using the Operating System's system logging mechanism or a file, depending on what the error_log configuration directive is set to. This is the default option. 
```

现在它取决于[error_log 的配置](http://php.net/manual/en/errorfunc.configuration.php#ini.error-log)。

如果这里不是“stderr”，php 将不会登录到 apache 错误日志中。

它似乎是这个 php 的“syslog”，将您的日志消息发送到[syslog](http://en.wikipedia.org/wiki/Syslog)。

现在这取决于您如何配置[rsyslog.d](http://linux.die.net/man/5/rsyslog.conf)。

但是看看以下日志

```
tail /var/log/syslog
tail /var/log/messages
tail /var/log/php
tail /var/log/php.log 
```

您的消息应该在其中之一中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:50:59.883

`error.log`除非 error_log.php 页面出错，否则不会记录任何内容。

`access.log`记录 Apache 服务器处理的所有事件

这就是您`error.log`不记录事件的原因

检查[http://httpd.apache.org/docs/2.2/logs.html](http://httpd.apache.org/docs/2.2/logs.html)了解更多信息

# vb.net - 使用 vb.net 在类文件中调用函数

> ID：14395907
> 
> 赞同：0
> 
> 时间：2013-01-18T09:30:45.233
> 
> 标签：vb.net, dll, .net-4.0

我的数据库访问方法在类文件中。此文件有一个单独的项目名称：`Usr_mysqladapter`. 在另一个网站项目中，我将类文件作为 dll 导入，并通过创建对象来调用类文件中的函数。

类文件包含以下函数：

```
Public Function readfunctioid(ByVal query As String) As DataTable
    Try
        connecttodb()
        mysqlcmd = New MySqlCommand(query, con)
        da = New MySqlDataAdapter(mysqlcmd)
        dt = New DataTable
        da.Fill(dt)
    Catch ex As Exception
        Throw ex
    Finally
        disconnect()
    End Try
    Return dt
End Function 
```

网站项目导入 dll 如下：

```
 Imports Usr_mysqladapter

  Dim obj As Usr_mysqladapter.Class1 = New Usr_mysqladapter.Class1 
```

我的按钮单击调用这样的函数：

```
dt = obj.readfunctioid("select fld_functionid  from tbl_users_function_permission") 
```

不幸的是，我遇到了错误。如何从我的网站项目访问类文件中的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:44:31.340

我在对问题的评论中开始了这一点，但让我向您展示一个*大大*改进的数据访问类的开始：

```
Public Class SqlDataHelper

    Private Property ConnectionString() As String
         Get
            'return the connection string, perhaps read/cached from a config file
            'I'll often require this as an argument to the class constructor as well
         End Get
         'May not need a setter, depending on how you build this
    End Property

    Private Function GetConnection() As SqlConnection
         GetConnection = New SqlConnection(ConnectionString)
         GetConnection.Open()
    End Function

    Private Function GetDataTable(ByVal query As String, ByVal ParamArray args() As SqlParameter) As DataTable
       Dim ds As New DataTable
       Dim cmd As New SqlCommand(query, GetConnection())     
       If args IsNot Nothing Then
           For Each p As SqlParameter In args
               cmd.Parameters.Add(p)
           Next p
       End If

       Dim da As New SqlDataAdapter(cmd)
       da.Fill(dt)
       Return dt

    End Function

    Private Function UpdateData(ByVal command As String, ByVal ParamArray args() As SqlParameter) As Integer
       Using cn As SqlConnection = GetConnection(), _
             cmd As New SqlCommand(command, cn) 

           If args IsNot Nothing Then
               For Each p As SqlParameter In args
                   cmd.Parameters.Add(p)
               Next p
           End If

           Return cmd.ExecuteNonQuery()
    End Function

    Private Function GetSingleValue(ByVal query As String, ByVal ParamArray args() As SqlParameter) As Object
       Using cn As SqlConnection = GetConnection(), _
             cmd As New SqlCommand(query, cn) 

           If args IsNot Nothing Then
               For Each p As SqlParameter In args
                   cmd.Parameters.Add(p)
               Next p
           End If

           Return cmd.ExecuteScalar()
    End Function

    Public Function ReadFunctionID() As DataTable  
        Return GetDataTable("SELECT fld_functionid FROM tbl_users_function_permission", Nothing)
    End Function

    Public Function ReadFunctionIDByUser(ByVal UserID As Integer) As DataTable
         Return GetDataTable("SELECT fld_functionid FROM tbl_users_function_permission WHERE UserID = @UserID", _
                    New SqlParameter("@UserID", UserID))
    End Function
End Class 
```

让我们仔细看看这段代码中的一些改进。首先，请注意什么是公共与什么是私有。在任何时候，您都不想接受来自表示层的临时 sql 字符串。这并不意味着您不能使用 ad hoc sql，只是您希望将数据和演示部分分开。

看看类中最后两个函数是如何处理参数数据的。`Nothing`在不使用任何参数时需要使用显式的事实是此代码的一个*特性*。它不断提醒您应该使用查询参数。如果您不知道什么是 sql 注入以及如何防止它，*那么您不应该编写数据库代码！*

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:23:45.580

在您的网站项目中，只需像......

```
Dim MyCustomSqlAdapter As = New MyCustomClass() 
```

这是当你的类被称为 MyCustomClass 而实例被称为 MyCustomSqlAdapter

然后在按钮做喜欢....

```
dt = MyCustomSqlAdapter.readfunctioid("select fld_functionid  from tbl_users_function_permission") 
```

# php - Firefox 301 和 302 重定向错误

> ID：14395908
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:30:46.700
> 
> 标签：php, wordpress, firefox, http-status-code-301, http-status-code-302

我正在建立一个 wordpress 网站，我的一个页面不断地一次又一次地给我一个 301，然后很快又给我一个 302 错误。这仅在 FF 中发生，因为 Chrome 和 IE 可以正常运行页面。我似乎无法确定此错误的来源。我已经注释掉了我的大部分 PHP 函数。

以前有人遇到过这个问题。也许这是 FF 或 Wordpress 中的错误？

301 和 302 响应是： `Reload the page to get source for: http://perceptive.nathan/supportarea/account/index.php?error=2`

![在此处输入图像描述](../Images/379db94f2d8a5cf7fe69a606759c47f3.png)

![在此处输入图像描述](../Images/671c3e398374276d95c2fc41d4a20ecf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:43:04.650

该站点[http://perceptive.nathan/supportarea/account/index.php](http://perceptive.nathan/supportarea/account/index.php)有一个错误 - 页面 A 重定向到页面 B，而页面 B 又重定向回 A；这创造了一个无限循环。我不确定为什么您只在FF中遇到这种情况；可能是 FF 正在触发一个条件，从而使站点错误浮出水面。我会说该网站仍然存在错误。

另外，FF不是会在一段时间后抱怨它检测到调用永远不会成功吗？它通常能够足够早地检测到重定向和断开链的循环。

# javascript - PHPBB BBcode - 代码标签：选择、展开/折叠功能

> ID：14395909
> 
> 赞同：0
> 
> 时间：2013-01-18T09:30:47.680
> 
> 标签：javascript, jquery, bbcode, phpbb

我为 phpbb 创建了一个自定义 bbcode，其中我需要一个“全选”和一个“展开/折叠”功能。当滚动处于活动状态时，展开/折叠选项应该具有特定的样式。

选择和展开/折叠工作正常，但我遇到的问题是在寻找滚动是否处于活动状态时。

首先滚动和寻找它工作正常，但 bbcode 不是唯一的（仅适用于发布的第一个） 其次，展开/折叠链接的 getElementByTagName('testlink') 不起作用。

这么快就知道我想让脚本做什么，以及到目前为止的工作。

*   当 div 类准备好运行功能 - 工作
*   为链接类（testlink）设置 var - 不起作用
*   为内容 div 类设置 var - 工作
*   为滚动设置 var - 工作
*   尝试滚动内容 - 工作
*   如果滚动有效，则向上滚动 - 工作
*   如果滚动工作将（testlink）的可见性设置为可见 - 不工作
*   如果没有滚动（否则）将（testlink）的可见性设置为隐藏 - 不起作用

Javascript：

```
$(document.getElementsByTagName('pre_header')[0]).ready(
    function () {
    var expandlink = this.getElementsByTagName('testlink')[0];  
    var eee = this.getElementsByTagName('dd')[0];   
    var old = eee.scrollTop;
    eee.scrollTop += 220;

    if (eee.scrollTop > old) {
        eee.scrollTop -= 220;
        expandlink.style.visibility = "visible";
    } 
    else {
        expandlink.style.visibility = "hidden";
        };  
    }
); 
```

HTML：

```
<div class="pre">
    <dt class="pre_header">
        <b>Code: </b>
        <a class="testlink" href="#">expand</a>
    </dt>
    <dd style="overflow:auto;">
        content here
    </dd>
</div> 
```

希望能得到一些帮助，当一切都完成后，添加整个 BBcode 供其他人使用..

/超人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:26:35.333

好吧，我让我自己工作，所以在这里承诺我的工作代码。希望这对其他人有帮助。并随时在您自己的 phpbb 论坛上使用它。

/超人

附言。由于 scrollTop 的问题，我为 IE 禁用了展开/折叠按钮。

**BBCode 用法：**

```
[pre]{TEXT}[/pre] 
```

**HTML 替换**

```
<script type="text/javascript">
// select all function
function selectCode(a)
{
    // Get ID of code block
    var e = a.parentNode.parentNode.getElementsByTagName('CODE')[0];
    // Not IE and IE9+
    if (window.getSelection)
    {
        var s = window.getSelection();
        // Safari
        if (s.setBaseAndExtent)
        {
            s.setBaseAndExtent(e, 0, e, e.innerText.length - 1);
        }
        // Firefox and Opera
        else
        {
            // workaround for bug # 42885
            if (window.opera && e.innerHTML.substring(e.innerHTML.length - 4) == '<BR>')
            {
                e.innerHTML = e.innerHTML + '&nbsp;';
            }

            var r = document.createRange();
            r.selectNodeContents(e);
            s.removeAllRanges();
            s.addRange(r);
        }
    }
    // Some older browsers
    else if (document.getSelection)
    {
        var s = document.getSelection();
        var r = document.createRange();
        r.selectNodeContents(e);
        s.removeAllRanges();
        s.addRange(r);
    }
    // IE
    else if (document.selection)
    {
        var r = document.body.createTextRange();
        r.moveToElementText(e);
        r.select();
    }
}

//expand - collapse settings
function expandcollapse(a) {
    var ee = a.parentNode.parentNode.getElementsByTagName('dd')[0];
    if (ee.style.maxHeight == '200px') 
        { 
        ee.style.maxHeight = '2000px'; 
        a.innerHTML = 'collapse';
        } 
        else { 
            ee.style.maxHeight = '200px';
            a.innerHTML = 'expand';
            };
}

</script>
<![if !IE]>
<script type="text/javascript">
    function scrolltest(k) {
        var eee = k.getElementsByTagName('dd')[0];
        var old = eee.scrollTop;
        eee.scrollTop += 1;

        if (eee.scrollTop > old) {
            eee.scrollTop -= 1;
            k.getElementsByTagName('a')[1].style.visibility = "visible";
        } 
    }
</script>
<![endif]>

<div class="pre" onmouseover="scrolltest(this); return false;">
    <dt class="pre_header">
        <b>Code: </b>
        <a href="#" onclick="selectCode(this); return false;">Select all</a>
        <a style="float:right; visibility:hidden;" href="#" onclick="expandcollapse(this); return false;">expand</a>
    </dt>
    <dd style="max-height:200px; overflow:auto;">
        <code>
            {TEXT}
        </code>
    </dd>
</div> 
```

**帮助热线**

```
Code: [pre]Add content here[/pre] 
```

# java - 在java中的变量名末尾附加一个数字

> ID：14395913
> 
> 赞同：5
> 
> 时间：2013-01-18T09:31:09.763
> 
> 标签：java, variables, append, variable-names

假设我在代码中定义了很多变量，名称如下

```
public javax.swing.JPanel BenderPanel1;
public javax.swing.JPanel BenderPanel2;
public javax.swing.JPanel BenderPanel3;
etc... 
```

所以他们的一般类型是这样的：`BenderPanel"NUMBER"`.

我想访问其中的一些并设置它们的可见性，`.setVisible(false);`但是我想访问的那些面板的数量是用户在运行时定义的。

是否有任何可能的方法通过库将数字附加到每个变量的末尾，以便在`for`循环中访问它，如下所示：

```
for (int i=1; i<=UserInput; i++)
{
     BenderPanel"i".setVisible(false); // Watch this "i" right there.
} 
```

**无需**先添加它们`ArrayList`并以明显的方式进行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:35:37.877

您不能在 Java 中动态*创建成员（您**可以*通过反射动态访问它们，但这里不需要它）。

而不是拥有

```
public javax.swing.JPanel BenderPanel1;
public javax.swing.JPanel BenderPanel2;
public javax.swing.JPanel BenderPanel3; 
```

有

```
public javax.swing.JPanel[] BenderPanels; 
```

或者

```
public List<javax.swing.JPanel> BenderPanels; 
```

然后，您可以使用增强的`for`循环遍历它们。

```
for (javax.swing.JPanel panel : BenderPanels) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:34:54.233

如果您真的不想将对象存储在诸如 ArrayList 之类的数据结构中，我建议您使用[Reflection API](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

对你来说特别有趣的应该是[领域](http://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html)。

顺便说一句：根据[Java Naming Conventions](http://www.oracle.com/technetwork/java/codeconv-138413.html)，变量名不应该以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:38:25.070

我将为您提供有关使用的想法`Reflection`：

```
public class YourClassContainer extends ... {

public javax.swing.JPanel BenderPanel1;
public javax.swing.JPanel BenderPanel2;
public javax.swing.JPanel BenderPanel3;
....
public javax.swing.JPanel BenderPanelXXX;

....

//to access all of them:

for (Field field : YourClassContainer.class.getFields()) {
    if (field.getName().startsWith("BenderPanel")) {
        ((javax.swing.JPanel)field.get(YourClassContainer.this)).setVisible(false);
    }
}

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T09:47:52.293

使用您的设置的简单示例：

```
 List<Integer> visibleItems = new ArrayList<Integer>();

    JPanel[] myPanels = new JPanel[]{BenderPanel1, BenderPanel2, BenderPanel3};

    for (int i = 0; i < myPanels .length; i++) {
        myPanels[i].setVisible(false);
        if(visibleItems.contains(i) ){
            myPanels[i].setVisible(true);
        } 
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T09:41:16.633

以这种方式使用反射：

```
YourClasss instance; // this instance has those all JPanel fields
Method setVisible = JPanel.class.getMethod("setVisible", new Class[] {Boolean.class});

List<String> numberOfFieldList = getNumbersOfFieldsToSetInvisible(); 

for (String number : numerOfFieldList) {
  Field benderPanelField = YourClass.getField("BenderPanel" + number);
  Object fieldInYourInstance = benderPanelField.get(instance);
  setVisible.invoke(fieldInYourInstance, Boolean.FALSE);
} 
```

也许会有所帮助。

# jakarta-ee - 启动 arquillian 时出错

> ID：14395918
> 
> 赞同：1
> 
> 时间：2013-01-18T09:31:25.947
> 
> 标签：jakarta-ee, glassfish, ejb, cdi, jboss-arquillian

我正在尝试使用 Arquillian 为一个已经存在的项目运行一些单元测试。

我的基本测试：

```
@RunWith(Arquillian.class)
public class InferenceTest {

    @EJB private InferenceEJB inferenceEJB;

    @Deployment
    public static JavaArchive createDeployment() {
        return ShrinkWrap.create(JavaArchive.class)
                .addClasses(...my classes...)
                .addPackages(false, ...packages from my classes...)
                .addAsManifestResource(
                    EmptyAsset.INSTANCE,
                    ArchivePaths.create("beans.xml")
                    );
    }

    @Test
    public void testInference() throws NamingException {
        assertNotNull("Successfully injected an EJB", inferenceEJB);
    }
} 
```

当我用 maven (mvn test) 运行它时，我遇到了一大堆问题。基本上，它们归结为三件事：

*   “严重”消息表明某些 EJB（此处未进行测试，并且未注入此测试使用的任何内容）未解决，例如

> 严重：部署应用程序时出现异常 [e03a719e-27d5-4cdd-af7f-70831402560c]：无法解析引用本地 ejb-ref 名称=......ExportEJB/managerEJB，本地 3.x 接口 =...... .DataManagerEntity,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session PlainTextActionReporterFAILUREDescription：部署期间发生部署 AdminCommandError：部署应用程序时出现异常 [e03a719e-27d5-4cdd-af7f-70831402560c]：无法解决参考 Local ejb-ref name=.......ExportEJB/managerEJB,Local 3.x interface =.......DataManagerEntity,ejb-link=null,lookup=,mappedName=,jndi-name= ,refType=会话。有关详细信息，请参阅 server.log。

*   测试失败，因为 inferenceEJB 为空。

我试图通过将所有相关的类/包添加到@Deployment 来解决第一个问题，但没有成功。我不知道是什么导致了最后一个。

有人有什么想法吗？

# android - 如何摆脱每次我恢复活动时出现的空视图屏幕？

> ID：14395924
> 
> 赞同：1
> 
> 时间：2013-01-18T09:31:46.267
> 
> 标签：android, listview, user-interface, android-asynctask, simplecursoradapter

我的主要活动中有一个 SimpleCursorAdapter 和一个列表。当数据库中没有项目时，我设置了一个 emptyView 显示。但是 AsyncTask 每次都会为 onResume 创建一个新列表。因此，在加载列表之前，我会在几分之一秒内看到 emptyView 屏幕。现在我需要 AsyncTask，因为数据查询必须在单独的线程上运行。但我不喜欢每次都弹出emptyView。我在下面附上了我的 AsyncTask 和 onResume 方法。两者都在编译。我该怎么做？

```
class GetItems extends AsyncTask<Object, Void, Cursor> {
    DbHelper dbHelper = new DbHelper (MainActivity.this);

    @Override
    protected Cursor doInBackground(Object... params) {
        dbHelper.open();
        return dbHelper.getAllItems();
    }

    @Override
    protected void onPostExecute(Cursor result) {
        adapter.changeCursor(result);
        dbHelper.close();
    }

}

@Override
protected void onResume() {
    super.onResume();
    new GetItems().execute((Object[]) null);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:44:43.457

问题似乎是线程问题，您在其中触发 AsyncTask 并`onResume`完成，然后在等待 AyncTask 完成时您的视图是空白的。

想到的一个修复方法是在 Activity 生命周期的早期触发 AsyncTask（例如 onCreate 或 onStart 方法），这可能会在第一次加载时及时为您提供结果。

然后，您可以存储检索到的结果，如果用户只是导航离开然后返回而没有破坏 Activity，您可以加载旧列表，然后在使用 AsyncTask 检索更新的列表后刷新它。

**编辑**`onPre`另一个简单的解决方法是在 AsyncTask 的和方法中 放置一个进度对话框`onPostExecute`，这会使 UI 线程阻塞，直到检索到结果，但进度对话框的闪烁可能比空白屏幕更刺耳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:42:03.963

如果您使用 a `ListFragment`，您可以调用`setListShown(false)`任务启动，它显示一个加载微调器。在任务结束时，您调用`setListShown(true)`，然后`setEmptyText()`根据任务的结果调用以放置一些错误消息或空消息。

或简单的开关可见性：

```
class GetItems extends AsyncTask<Object, Void, Cursor> {
    DbHelper dbHelper = new DbHelper (MainActivity.this);

    @Override
    protected void onPreExecute() {
        myListView.setVisibility(View.GONE)
    }

    @Override
    protected Cursor doInBackground(Object... params) {
        dbHelper.open();
        return dbHelper.getAllItems();
    }

    @Override
    protected void onPostExecute(Cursor result) {
        adapter.changeCursor(result);
        myListView.setVisibility(View.VISIBLE);
        dbHelper.close();
    }

}

@Override
protected void onResume() {
    super.onResume();
    new GetItems().execute((Object[]) null);

} 
```

# android - 广播接收器不处理短信

> ID：14395925
> 
> 赞同：0
> 
> 时间：2013-01-18T09:31:51.367
> 
> 标签：android, service, sms, broadcastreceiver

我在 SO 上看到 @Commonsware 声明接收 SMS 所需的只是广播接收器（即，*不*使用服务）。我想采用这种方法，因为它对我来说很有意义。不幸的是，在我的广播接收器中似乎没有接收/处理 SMS。apk 已成功安装，但在我发送测试 SMS 时未生成任何日志条目。我究竟做错了什么？

这是清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.oheller.pete2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon_broadcastreceiver"
        android:label="@string/sms_broadcastreceiver"
        android:theme="@style/Theme.eagleeyeactionbar" >

        <receiver android:name=".SMSReceiver_Test" >
            <intent-filter android:priority="999">
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>

        <provider
            android:name=".contentprovider.GPSTrackerContentProvider"
            android:authorities="net.oheller.pete2.contentprovider"
            android:grantUriPermissions="true"
            android:multiprocess="true"
            android:permission="true" >
        </provider>
    </application>

</manifest> 
```

这是短信接收器代码。它的目的是通过 SMS 收集数据并将每个记录写入内容提供者（SQLite 数据库）。

```
public class SMSReceiver_Test extends BroadcastReceiver { 
TelephonyManager telephonyManager;
String deviceCountryCode = "";

@Override
public void onReceive(Context context, Intent intent) {
    //Get the SMS message passed in from the intent
    Bundle SMSmessageContent = intent.getExtras();
    SmsMessage[] receivedSMS = null;
    String returnStr = "";
    Long current_time_stamp = Calendar.getInstance().getTimeInMillis();
    String curTimeString = getFormattedDate(current_time_stamp, "dd-MMM-yy h:mma");     

    telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);       

    String incoming_SMSphone_number = "";
    String SMSmsgText = "";
    long timeStamp = current_time_stamp;

    if (SMSmessageContent != null) {  // [IF valid SMS]
        //Retrieve the SMS message info
        Object[] pdus = (Object[]) SMSmessageContent.get("pdus");
        receivedSMS = new SmsMessage[pdus.length];
        for (int i=0; i<receivedSMS.length; i++) {  // [FOR get SMS content]
            receivedSMS[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            incoming_SMSphone_number = receivedSMS[i].getOriginatingAddress().toString().trim();
            SMSmsgText = receivedSMS[i].getMessageBody().toString();
            returnStr += curTimeString +"\n";

Log.d("EagleEye", String.format("SMSReciever: SMS=\"%s\"", SMSmsgText))  ;  ///DEBUG
        }  // [ENDFOR get SMS content]

            ///////////////////////////
            // prepare values for insertion into the SQLite DB
                ContentValues GPSTrackValues = new ContentValues();
                GPSTrackValues.put(GPSTrackerTable.COLUMN_PHONE_NUMBER, incoming_SMSphone_number);
                GPSTrackValues.put(GPSTrackerTable.COLUMN_TIME_STAMP, timeStamp);

 //// Prepare access to content provider
                Uri GPSuri = GPSTrackerContentProvider.CONTENT_URI_GPS_Tracks; //specify the content provider location
                ContentResolver GPSTrackCR = context.getContentResolver();          

                // Insert new entry into DB
                Uri insertURI = GPSTrackCR.insert(GPSuri, GPSTrackValues);      
Log.d("EagleEye", "DB insert results="+insertURI)  ;  ////////DEBUG

    }  // [ENDIF Valid SMS] 
}  // [END onReceive]
   }  // [END SMSReceiver] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:45:02.127

代码在我看来是正确的。您可以尝试通过将优先级提高 max ..

```
 <intent-filter android:priority="2147483647"> 
```

在某些情况下，当其他接收者在您之前收到短信并中止它们时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:43:30.040

您的优先级可能不够好，请尝试将其设置为 2147483647。

```
 <receiver android:name=".SMSReceiver_Test" >
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

之后，尝试在调试模式下启动它，并在 onReceive 方法中设置断点，或者创建一个`Log.i("BroadcastSMSReceiver", "Received something in SMSRECEIVERTEST")`:)

编辑，将优先级设置为高数字而不是 1，只需读取高数字等于更高的优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T17:02:15.313

基于android开发者文档必须是-1000>priority<1000，因此intent-filter的最高优先级是999

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:48:43.470

移除`android:priority`属性

# c - # 和 ## 展开顺序

> ID：14395927
> 
> 赞同：7
> 
> 时间：2013-01-18T09:31:59.080
> 
> 标签：c, macros, c-preprocessor

C 标准给出了以下示例：

```
#define hash_hash # ## #
#define mkstr(a) # a
#define in_between(a) mkstr(a)
#define join(c, d) in_between(c hash_hash d)
char p[] = join(x, y); // equivalent to char p[] = "x ## y"; 
```

但它也说“未指定 # 和 ## 运算符的评估顺序。”

为什么`hash_hash`保证的扩展被解释为应用于#的##运算符，而不是应用于##的#运算符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:50:15.693

因为 '#' 仅在出现在类似函数的宏中并且后跟参数名称时才充当运算符...但是 hash_hash 不是类似函数的宏并且那些 '#' 后面没有参数名称.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:46:47.307

引用 C99：

> 标点符号是具有独立句法和语义意义的符号。**根据上下文**，它可以指定要执行的操作（这反过来可能会产生一个值或函数指示符，产生副作用或它们的某种组合）在这种情况下，它被称为运算符（其他形式的运算符也在某些情况下存在）。操作数是操作员作用的实体。

`#`并且`##`是标点符号。

除了 ：

> 6.10.3.1 参数替换
> 
> 在确定了调用类函数宏的参数后，将进行参数替换。替换列表中的参数，除非前面有 # 或 ## 预处理标记或后跟 ## 预处理标记（见下文），在其中包含的所有宏都已展开后，将替换为相应的参数。在被替换之前，每个参数的预处理标记都被完全宏替换，就好像它们形成了预处理文件的其余部分一样；没有其他可用的预处理令牌。

# vba - 在文档末尾添加形状

> ID：14395929
> 
> 赞同：1
> 
> 时间：2013-01-18T09:32:08.480
> 
> 标签：vba, ms-word

我正在尝试添加一个特别是文本框的形状。

我需要在通过 vba 添加的所有内容之后添加它。我似乎不知道该怎么做，因为添加形状需要精确测量 Left 和 Top 参数。

```
Dim shpActual 
Dim pos, PtsToInches 
set shpActual = Selection.Shapes.AddTextbox(msoTextOrientationHorizontal, 92, PtsToInches, 437.4, 69) 
pos = Selection.Range.Informatio(wdVerticalPositionRelativeToPage) 
PtsToInches = pos / 72 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:55:26.600

`.RelativeVerticalPosition`插入形状后，您可以使用来定位形状。看这个例子

```
Sub Sample()
    Dim objShape As Shape

    Set objShape = ActiveDocument.Shapes.AddTextbox _
    (Orientation:=msoTextOrientationHorizontal, _
    Left:=10, Top:=10, Width:=80, Height:=80)

    With objShape
        .RelativeHorizontalPosition = wdRelativeHorizontalPositionColumn
        .RelativeVerticalPosition = wdRelativeVerticalPositionBottomMarginArea
        .Left = wdShapeCenter
        .Top = wdShapeTop
    End With
End Sub 
```

**跟进**

另一种方法是找到光标位置，然后在该位置插入形状。例如，这将在光标所在的位置插入一个形状。因此，在您原来的 VBA 代码中，您可以使用`Selection.TypeParagraph`移动到下一行，然后调用下面的代码。

```
Sub Sample()
    Dim objShape As Shape
    Dim pos, PtsToInches

    Set objShape = ActiveDocument.Shapes.AddTextbox _
    (Orientation:=msoTextOrientationHorizontal, _
    Left:=10, Top:=10, Width:=80, Height:=80)

    pos = Selection.Information(wdVerticalPositionRelativeToPage)

    PtsToInches = pos / 72

    With objShape
        .RelativeHorizontalPosition = wdRelativeHorizontalPositionColumn
        .Left = wdShapeCenter
        .Top = PtsToInches
    End With
End Sub 
```

# c# - GUI 测试和访问 .NET 对象的本机属性/字段

> ID：14395932
> 
> 赞同：0
> 
> 时间：2013-01-18T09:32:16.967
> 
> 标签：c#, coded-ui-tests, gui-testing, testcomplete, ranorex

我的团队目前使用 TestComplete 进行自动化 UI 测试（.Net 3.5 WinForms 应用程序）。我们正在考虑切换工具 - 一个主要原因是我们想使用 C# 编写 UI 测试。（我们的非 UI 测试 - 单元、集成、系统 - 都是 C#，我们的团队在用 C# 编写和组织代码方面经验丰富，我们喜欢测试代码的编译时检查等好处）

然而，TestComplete 的一个非常重要的特性是能够访问 AUT 中 .Net 对象的本机属性。我们的 UI 有一些尴尬的地方，我们需要读取底层数据并进行一些算术运算以确定如何执行下一个操作。我们可以使用 TestComplete 的对象浏览器附加到 GUI 应用程序并开始探索控制层次结构，并探索 .Net 属性/字段。并在我们的自动化测试中访问相同的内容：http: [//support.smartbear.com/viewarticle/30816/](http://support.smartbear.com/viewarticle/30816/)

我快速浏览了 Ranorex（勾选了 C# 框），从这个意义上说，它似乎没有 TestComplete 那样强大。一旦属性/字段类型不可序列化，它似乎就会卡住并返回 null： [http ://www.ranorex.com/blog/transfering-data-to-and-from-a-net-control](http://www.ranorex.com/blog/transfering-data-to-and-from-a-net-control)

将对象复制到进程边界上似乎是合理的，该对象应该是可序列化的，但是 TestComplete 在做什么呢？反射有什么讨厌的东西？

我的问题是，是否有任何测试框架可以让这个属性浏览像 TestComplete 一样简单，同时允许我们用 C# 编写测试？（并且希望比 TestComplete 更不容易崩溃）

Ranorex 链接似乎表明我们可以编写自己的（测试）代码来将对象映射到可以传输的东西，但这是额外的努力。此外，TestComplete 的对象浏览器对于测试人员手动探索应用程序的模糊深度非常有用，而 Ranorex 的 Spy 工具不允许您浏览到不可序列化的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:25:29.190

您是否尝试过 InvokeRemotely() 方法？它不应该有任何限制。

# c# - 如何在不创建不同模板的情况下为网格视图项目提供不同的图像？

> ID：14395937
> 
> 赞同：0
> 
> 时间：2013-01-18T09:32:45.683
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我通过单击按钮将项目添加到网格视图中，并且我希望不同的项目具有不同的图像。有 6 个项目，我不想创建 6 个不同的模板。有什么办法可以用一个模板做到这一点？下面是我的数据模板的代码片段：

```
<StackPanel>

                <!-- Shadow -->
                <Image Source="{Binding Time, Converter={StaticResource ThemeImageConverterClockShadow}}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                    Canvas.Top="25"/>

                <!-- Face -->
                <Image Source="{Binding Time, Converter={StaticResource FaceBackground}}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                    Canvas.Top="10" />
<StackPanel/> 
```

我只想更改每个项目的阴影图像。我尝试绑定一个属性并根据否返回不同的图像。存在的网格视图项。但是，每当将新项目添加到网格视图时，所有网格视图项目的图像都会更改

更新：Gridview 如果有帮助

```
<GridView              

         x:Name="ThemeGridView"                    
                ItemsSource="{Binding Clocks}" 
                ItemTemplate="{StaticResource WorldClockTemplate}"
                SelectionChanged="Clock_SelectionChanged"              
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                HorizontalAlignment="Center"
                VerticalAlignment="Center" ItemContainerStyle="{StaticResource GridViewItemStyle1}">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid />
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>

        </GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:18:50.260

我想我知道你的代码发生了什么。我猜您正在使用`GridView`转换器中的项目计数`ThemeImageConverterClockShadow`来选择合适的图像。每当将新项目添加到`GridView`所有绑定时，很可能会重新评估，这解释了为什么您会为所有行获得相同的图像。相反，您应该做的是在数据项上有一个属性，该属性指示要使用哪个阴影图像，并且应该在将新项添加到`ItemsSource`.

一种选择是：

```
<StackPanel>
    <!-- Shadow -->
    <Image Source="{Binding ShadowImage}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                Canvas.Top="25"/>

    <!-- Face -->
    <Image Source="{Binding Time, Converter={StaticResource FaceBackground}}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                Canvas.Top="10" />
<StackPanel/> 
```

`ImageSource ShadowImage`您在以下数据项上有一个属性`ItemsSource`：

```
public class MyDataItem 
{
    ....
    public ... Time { get { ... } set { ... } }
    public ImageSource ShadowImage { get { ... } set { ... } }
} 
```

然后，当您在代码中创建数据项时设置图像，该代码将一行添加到`GridView`. 或者，您可以添加一些`ShadowType`属性，然后仍然使用转换器但绑定到整个数据项，然后同时使用`Time`and`ShadowType`来选择图像：

```
<StackPanel>
    <!-- Shadow -->
    <Image Source="{Binding Converter={StaticResource ThemeImageConverterClockShadow}}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                Canvas.Top="25"/>

    <!-- Face -->
    <Image Source="{Binding Time, Converter={StaticResource FaceBackground}}" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top" Canvas.Left="10"
                Canvas.Top="10" />
<StackPanel/> 
```

使用转换器，如下所示：

```
public class ThemeImageConverterClockShadow : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var dataItem = value as MyDataItem;
        if (dataItem != null)
        {
           // Use dataItem.Time and dataItem.ShadowType to select an image
        }
    }
} 
```

# mysql - 我使用联接和联合的 SQL 查询有什么问题？

> ID：14395938
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:32:46.707
> 
> 标签：mysql, sql, union

我的 sql 查询有什么问题？我正在尝试使用 a`Join`并同时使用 a`UNION`从另一个表中获取所有表，同时根据关系将其他表连接在一起..

但是我收到以下错误：

`"The used SELECT statements have a different number of columns"`

我的查询：

```
SELECT a.ESN, a.UnixTime, a.Payload, a.Timestamp
                ,b.AlarmingStatus
                ,b.STxModel
                ,c.GroupID
                FROM STxMessage a
                JOIN STx b ON b.ESN = a.ESN
                JOIN GroupInfo c ON b.GroupID = c.GroupID
                WHERE b.STxModel = 190
                AND a.AlarmsChecked="y"
                AND c.AlertsMasterSwitch="on"
               UNION ALL 
      SELECT d.ESN , d.UnixTime,  d.Payload,  d.Timestamp FROM STxMessageArchive d 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:34:12.740

错误消息说明了一切。

使用时`UNION`，组合语句返回的列`SELECT`必须相同，例如。

```
SELECT col1, col2, col3 FROM table1
UNION
SELECT col1, col2, col3 FROM table2 
```

如果列不匹配，您仍然可以组合它，前提是您必须为列提供虚拟数据，例如

```
SELECT col1, col2, col3 FROM table1
UNION
SELECT col1, col2, '' AS col3 FROM table2 
```

所以在你的查询中，它应该是这样的

```
SELECT  a.ESN, a.UnixTime, a.Payload, a.Timestamp ,
        b.AlarmingStatus, b.STxModel, c.GroupID
FROM    STxMessage a
        INNER JOIN STx b 
            ON b.ESN = a.ESN
        INNER JOIN GroupInfo c 
            ON b.GroupID = c.GroupID
WHERE   b.STxModel = 190 AND 
        a.AlarmsChecked="y" AND 
        c.AlertsMasterSwitch="on"
UNION ALL 
SELECT  d.ESN, d.UnixTime, d.Payload, d.Timestamp,
        NULL AS AlarmingStatus, NULL AS STxModel, NULL AS GroupID
FROM    STxMessageArchive d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:33:50.317

您好，这是您的第一个查询中的额外列

```
 ,b.AlarmingStatus
 ,b.STxModel
 ,c.GroupID 
```

您需要在第二个查询中执行相同的列，`union`或者您需要删除此列才能执行`union`操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:34:01.423

正如错误所说，第一部分有 7 列，而第二部分只有 4 列。联合需要两边都有相同的列。要么删除

```
b.AlarmingStatus ,b.STxModel ,c.GroupID 
```

从第一部分开始，或在第二部分添加（甚至是虚假的）列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:35:10.690

您的第一个查询选择了 7 列，而第二个查询只选择了 4 个。您需要确保第二个查询选择的列数与第一个查询相同才能`Union All`正常工作。

```
SELECT a.ESN, a.UnixTime, a.Payload, a.Timestamp
                ,b.AlarmingStatus
                ,b.STxModel
                ,c.GroupID
                FROM STxMessage a
                JOIN STx b ON b.ESN = a.ESN
                JOIN GroupInfo c ON b.GroupID = c.GroupID
                WHERE b.STxModel = 190
                AND a.AlarmsChecked="y"
                AND c.AlertsMasterSwitch="on"
               UNION ALL 
      SELECT d.ESN , d.UnixTime,  d.Payload,  d.Timestamp, 'null' as AlarmingStatus,
      'null' as STxModel, 'null' as GroupID FROM STxMessageArchive d 
```

# python - ValueError: 在这种情况下无效的 \x 转义

> ID：14395939
> 
> 赞同：0
> 
> 时间：2013-01-18T09:32:49.770
> 
> 标签：python

> **可能重复：**
> [为什么 '\x' 在 Python 中无效？](https://stackoverflow.com/questions/2704654/why-is-x-invalid-in-python)

```
realId = 'Test'
id = ""
for x in realId:
 id += '\x'+str(ord(x))
print id 
```

老实说，我对 python 和 askii 转换还很陌生，所以这应该是一个快速的答案。创建此字符串时出现错误，有人愿意为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:50:37.203

这是你想要的？

```
>>> realId = 'Test'
>>> id = ""
>>> for x in realId:
...     id += r'\x'+str(ord(x))
... 
>>> print id
\x84\x101\x115\x116 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:49:24.340

您尝试做的事情是不可能的，因为`\x__`它是字符串语法的一部分，并且不能动态完成。但是，您可以使用`chr`来获取等效字符：

```
>>> chr(0x01)
'\x01'
>>> chr(0x41)
'A' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:50:35.690

你在找这个吗？

```
realId = 'Test'
id = ""
for x in realId:
   id += r'\x%02x' % ord(x)
print id  # \x54\x65\x73\x74 
```

# android - Android：快速网络请求

> ID：14395940
> 
> 赞同：2
> 
> 时间：2013-01-18T09:33:10.317
> 
> 标签：android, httpurlconnection, http-get

对于我的应用程序，我需要从本地网络上的服务器上托管的网页获取最新数据。

所以我用 a 请求最新的页面，`HTTP GET`当收到数据时，我发送另一个请求。

在我目前的实现中，每个请求大约需要 100 - 120 毫秒。是否有可能使这更快，因为它与请求的 url 相同。

例如，保持对页面的连接打开并 grep 最新数据而不建立新连接？

这个页面大约是 900-1100 字节。

HTTP 获取代码：

```
public static String makeHttpGetRequest(String stringUrl) {

    try {
        URL url = new URL(stringUrl);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setReadTimeout(300);
        con.setConnectTimeout(300);
        con.setDoOutput(false);
        con.setDoInput(true);
        con.setChunkedStreamingMode(0);
        con.setRequestMethod("GET");

        return readStream(con.getInputStream());
    } catch (IOException e) {
        Log.e(TAG, "IOException when setting up connection: " + e.getMessage());
    }
    return null;
} 
```

读取输入流

```
private static String readStream(InputStream in) {
    BufferedReader reader = null;
    StringBuilder total = new StringBuilder();
    try {
        String line = "";
        reader = new BufferedReader(new InputStreamReader(in));
        while ((line = reader.readLine()) != null) {
            total.append(line);
        }
    } catch (IOException e) {
        Log.e(TAG, "IOException when reading InputStream: " + e.getMessage());
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return total.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:56:38.963

据我所知，没有您要求的实现。我一直在处理 http 请求，你能做的最好的事情就是你的代码。还有一件事需要注意......您的连接可能很慢，并且取决于连接时间可能会更多，或者在某些情况下我一直在处理很多连接的超时时间不够大，但那是服务器问题。

在我看来，你应该使用你现在拥有的东西。

# c++ - 显示 unsigned char* 的第一个字符

> ID：14395941
> 
> 赞同：1
> 
> 时间：2013-01-18T09:33:10.913
> 
> 标签：c++, printf, unsigned-char

我有以下代码（我去掉了无用的部分）：

```
unsigned char* decrypted= (unsigned char *) malloc(500);
bufSize = operations.RSADecrypt(newEncrypted, bufSize, key, decrypted);
printf("Test: %s", decrypted); 
```

而且我只想显示的`bufSize`第一个字符，`decrypted`因为实际上它显示了很多无意义的字符！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T09:36:41.900

您可以使用`"%.*s"`格式说明符：

```
printf("Test: %.*s", bufSize, decrypted); 
```

它指示`printf()`从 中写入第一个`bufSize`字符`decrypted`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T09:35:35.800

您可以使用格式说明符限制长度：

```
printf ("Test: %-20.20s", decrypted); 
```

对于使用变量的版本`bufSize`：

```
printf ("Test: %-*.*s", bufSize, bufSize, decrypted); 
```

请注意，这会强制将长度*精确*到那么多字符，如果需要，在右侧用空格填充。如果您希望输出中较短的字符串更短（如果字符串如指示的那样总是比您想要的输出长，则在您的情况下不相关），您可以使用：

```
printf ("Test: %.*s", bufSize, decrypted); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:35:22.000

如果您被“允许”修改`decrypted`字符串。您可以简单地为其添加一个终止符：

```
decrypted[bufSize] = 0; 
```

所以`printf()`只会打印缓冲区内容。

如果不允许将自定义字符添加到`decrypted`缓冲区，则需要将内容复制到临时缓冲区并在您的`printf()`:

```
unsigned char* tmp = (unsigned char *) malloc(bufSize + 1);
strncpy(tmp, decrypted, bufSize);
tmp[bufSize] = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T09:41:36.810

我不喜欢你说的指针包含废话。不是废话，是残存的记忆。您很有可能期望并希望将此区域设置为零。尝试以下操作，其中`calloc`将`malloc`位设置为零。

```
unsigned char* decrypted= (unsigned char *) calloc(500,sizeof(char));
bufSize = operations.RSADecrypt(newEncrypted, bufSize, key, decrypted);
printf("Test: %s", decrypted); 
```

# php - 如何在 CakePHP 中编写指向特定控制器和动作的 HREF 链接？

> ID：14395942
> 
> 赞同：0
> 
> 时间：2013-01-18T09:33:21.523
> 
> 标签：php, cakephp

我有一个小应用程序。我已经在文件中编写了一些代码，`index.ctp`并且该文件运行良好。现在我添加了另一个调用`add`到我的控制器文件的函数，并`add.ctp`在`Views`文件夹中创建了一个单独的文件。

我的疑问是如果单击链接，如何导航到 add.ctp 文件。我想在我的主文件中创建一个菜单并编写一个链接，以便当我单击该链接时，页面必须导航到 add() 函数。

我的问题是：

1.  如何在蛋糕PHP中编写href？
2.  我提供什么链接？控制器还是视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:39:46.603

该[手册](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html)将是您开始 CakePHP 之旅的好地方。然后您会很快注意到从您的视图链接到控制器操作非常容易：

```
echo $this->Html->link('Link text', array(
    'controller' => 'controller_name',
    'action' => 'add'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T02:45:45.427

您可以像这样在视图中创建超链接：

```
echo $this->link('text',
    array('controller'=>'controllerName','action'=>'actionName')); 
```

您可以仅从 controllerName 创建 URL，它的作用是：

```
echo $this->Html->url(
    array('controller' => 'controllerName','action' =>'actionName'),true);?> 
```

# c# - ASP.Net 卸载页面处理

> ID：14395943
> 
> 赞同：0
> 
> 时间：2013-01-18T09:33:21.007
> 
> 标签：c#, .net, asp.net-4.0

我有一个由第 3 方调用的应用程序的当前问题。

第 3 方将数据（包含在查询字符串中）发送到我们网站中的 URL，他们必须在 5 秒内收到来自页面的 OK 响应，以验证是否收到了呼叫。

页面本身在 Page_Load 函数中对第 3 方发送的数据进行了大量处理。这可能需要超过 5 秒，因此页面在处理完成之前不会呈现，这反过来又会导致第 3 方继续多次将数据发送回给我们，因为系统假设我们没有收到它。

我想知道的是卸载数据处理的最佳方法是什么，以便我几乎可以在第 3 方调用 URL 时立即呈现页面？

请注意，页面上没有控件，它纯粹是一个带有代码的空白页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:45:44.617

我是否正确假设第 3 方只是调用页面发送数据，即他们不关心结果？

想到了几种方法，一种简单的方法是在工作进入线程时将其分派，并立即返回“OK”，让线程继续工作。第二种方法是将传入的查询字符串数据写入文件或数据库表，并让外部进程定期获取并处理它们的批次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:37:56.977

在页面加载后使用 JavaScript 检索数据。

# mysql - mysql错误1193（HY00）：未知系统变量'loopCnt'

> ID：14395945
> 
> 赞同：2
> 
> 时间：2013-01-18T09:33:38.603
> 
> 标签：mysql, sql, triggers

继承人@Shaharsh Shah 的代码：

```
DELIMITER $$

DROP TRIGGER /*!50032 IF EXISTS */ trig_auto_spid$$

CREATE
/*!50017 DEFINER = 'root'@'localhost' */
TRIGGER `trig_auto_spid` AFTER INSERT ON `tapes` 
FOR EACH ROW BEGIN
    SELECT REPLACE(TSpecID, 'TS', '') INTO @counter 
    FROM Tape_Specific_ID 
    ORDER BY TSpecID DESC LIMIT 1;

    SET loopCnt = @counter + new.qty; 
    WHILE (@counter <= loopCnt) DO 
        INSERT INTO Tape_Specific_ID(TapesID, TSpecID) 
        VALUES (new.TapesID, CONCAT('TS', @counter)); 
        SET @counter:=@counter + 1;
    END WHILE; 
END;
$$

DELIMITER ; 
```

创建此触发器时发生错误 errorr 1193 (HY00):Uknown System variable 'loopCnt'，为什么？任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:37:00.523

使它成为`user variable`

```
SET @loopCnt := @counter + new.qty; 
WHILE (@counter <= @loopCnt) DO 
```

**更新 1**

```
SET @counter := 10;
SET @loopCnt := @counter + new.qty; 
WHILE (@counter <= @loopCnt) DO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:36:42.497

尝试

```
SET @loopCnt = @counter + new.qty; 
WHILE (@counter <= @loopCnt) DO 
```

用户定义的变量需要`@`在前面加上a，否则它认为它是来自系统的变量，没有定义。

# java - 带有客户端 Axis2 存根的信任库的私有密钥库

> ID：14395947
> 
> 赞同：2
> 
> 时间：2013-01-18T09:33:38.770
> 
> 标签：java, axis2

我需要调用使用客户端证书的 Web 服务。该程序将由不同的客户使用，每个客户都有自己的证书。客户端证书用于身份验证，因此客户端只能看到自己的数据。因此，对该 Web 服务的每次调用都必须使用其特定的密钥库。

Axis2 用于生成客户端代码。我发现这段代码可以将 SocketFactory 设置为存根的特定实例。

```
int x = 9443;
Protocol authProtocol;
authProtocol = 
      new Protocol("https",
                   setPrivateKey(keyStoreFileName,keyStoreType, keyStorePassword),
                   x
                  );
stub._getServiceClient().getOptions().setProperty(HTTPConstants.CUSTOM_PROTOCOL_HANDLER, authProtocol); 
```

然后 SocketFactory 将是

```
private static SSLSocketFactory setPrivateKey
  (String keyStoreFileName,
   String keyStoreType,
   String keyStorePassword
  ) 
  throws FileNotFoundException, 
         KeyStoreException, 
         IOException, 
         NoSuchAlgorithmException, 
         CertificateException, 
         UnrecoverableKeyException, 
         KeyManagementException
  {
    // Load the key store: change store type if needed
    KeyStore ks = KeyStore.getInstance(keyStoreType);
    FileInputStream fis = new FileInputStream(keyStoreFileName);
    try {
        ks.load(fis, keyStorePassword.toCharArray());
    } finally {
        if (fis != null) { fis.close(); }
    }
    // Get the default Key Manager
    KeyManagerFactory kmf = KeyManagerFactory.getInstance(
       KeyManagerFactory.getDefaultAlgorithm());   
    kmf.init(ks, keyStorePassword.toCharArray());
     X509KeyManager origKm = (X509KeyManager)kmf.getKeyManagers()[0];
    SSLContext sslContext = SSLContext.getInstance("TLS");
    sslContext.init(new KeyManager[] {origKm }, null, null);

    return sslContext.getSocketFactory();
} 
```

使用以下进口

```
import com.sun.net.ssl.KeyManager;
import com.sun.net.ssl.SSLContext;
import com.sun.net.ssl.X509KeyManager;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import javax.net.SocketFactory;
import javax.net.ssl.KeyManagerFactory;

import javax.net.ssl.SSLSocketFactory;

import org.apache.axis2.transport.http.HTTPConstants;
import org.apache.commons.httpclient.protocol.Protocol;
import org.apache.commons.httpclient.protocol.ProtocolSocketFactory;
import org.apache.xmlbeans.XmlException; 
```

我收到 X5​​09KeyManager 和 SSLContext 已弃用的消息。甚至此[链接](http://svn.apache.org/viewvc/httpcomponents/oac.hc3x/trunk/src/contrib/org/apache/commons/httpclient/contrib/ssl/AuthSSLProtocolSocketFactory.java?view=markup)中的代码 （我通过有关该主题的官方 AXIS2 文档找到）也使用了此已弃用的代码。其次，此代码使用 SSLSocketFactory，而协议需要一个 ProtocolSocketFactory。

X509KeyManager 和 SSLContext 的替代品是什么？以及如何从密钥库到 ProtocolSocketFactory？或者，还有更好的方法。

使用 AXIS2 1.6.2 Java 5 工具 jdeveloper 10.1.3

编辑 22-01-2013 被调用的 web 服务属于不同的组织，我无法控制 web 服务的服务器端。

“不同客户使用”是我们软件的不同用户。位于 1 个中心点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:52:49.327

我假设“由不同的客户使用”意味着不同的部署。在这种情况下，真的有必要以编程方式选择正确的密钥库吗？是否可以使用多个不同的密钥库（每个用于一个客户端）并让应用程序服务器/servlet 容器处理客户端证书？例如对于 Apache Tomcat，这可以`CATALINA_OPTS="$CATALINA_OPTS -Djavax.net.ssl.keystore=<the keystore filename>"`在启动服务器之前实现设置。然后，您可以像往常一样为简单的 http Web 服务创建客户端 WS，而无需授权。Tomcat 使用证书以完全透明的方式处理与客户端身份验证的 SSL 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T11:20:12.363

博客[http://shivendra-tripathi.blogspot.com/2010/11/enabling-ssl-for-axis2-service-and.html](http://shivendra-tripathi.blogspot.com/2010/11/enabling-ssl-for-axis2-service-and.html)在标题方法 2 下给出了您问题的答案：

“Apache commons 提供了允许我们自定义负责创建安全套接字的 SSL 套接字工厂的工具。自定义是指在 SSL 握手中使用用户信任库/密钥库的能力。为了实现它，我们需要扩展 SecureProtocolSocketFactory 接口。在我们的自定义套接字工厂实现中，用户将其 Keystore/Truststore 与默认密钥库进行对比。Apache commons 为此提供了一个名为 AuthSSLProtocolSocketFactory 的参考实现类。

此类将 Truststore/Keystore 作为构造函数的参数，稍后将在启动 SSLContext 时引用。SSLContext 用于创建 SSL 套接字工厂。在您的axis2客户端代码中，您需要添加以下内容： Protocol authhttps = new Protocol ("https", new AuthSSLProtocolSocketFactory (new url("keystore URL"), "pwd", newURL("truststore URL"), "pwd"), 443);”</p>

在以 stub._getServiceClient().getOptions().setProperty(HTTPConsta...

# php - YII 中使用的 PHP 注释

> ID：14395950
> 
> 赞同：3
> 
> 时间：2013-01-18T09:33:53.203
> 
> 标签：php, yii

通过 YII 为 Model 类自动生成的代码，我了解到表格列是通过 Annotations (@property) 注入到 Model 类中的

```
<?php

/**
 * This is the model class for table "tbl_project".
 *
 * The followings are the available columns in table 'tbl_project':
 * @property integer $id
 * @property string $name
 */
class Project extends CActiveRecord
{ 
```

这里属性 $id 和 $name 成为 Project 类的一部分，可以像这样访问：

```
$proj = new Project();
$proj->id = 1; 
```

我试图在 PHP 中查找注释，但什么也没找到，因为所有链接都指向[PHPDoc](http://www.phpdoc.org/)。我对它的依赖注入部分更感兴趣。有人可以解释这个概念并指出可用注释的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:45:12.663

Yii 不使用注释。
它使用从数据库中提取的表模式。
如果您删除注释，一切都会起作用。

这对你来说会很有趣[http://www.yiiframework.com/doc/api/1.1/CDbTableSchema](http://www.yiiframework.com/doc/api/1.1/CDbTableSchema)

这里有一些说明如何加速您的应用程序。一种方法是启用模式缓存。[http://www.yiiframework.com/doc/blog/1.1/en/final.deployment](http://www.yiiframework.com/doc/blog/1.1/en/final.deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:46:17.673

中的块注释仅用于 PHPDoc 或您自己的感觉。

尽管我的 IDE (PhpStorm) 使用 phpdoc 块注释及其属性进行代码检查和代码提示。

正如评论中所说，Yii 不会出于依赖目的解析块评论。

# c# - 如何让 DirectoryModuleCatalog 工作？

> ID：14395958
> 
> 赞同：3
> 
> 时间：2013-01-18T09:34:07.807
> 
> 标签：c#, .net, prism, mef, bootstrapper

我将 Prism 4 和 MEF 用于 WPF 项目。我有一些需要从目录加载的 DLL。这些 DLL通过*IGame实现**IModule*并且格式正确（或者至少我认为是这样）：

 *```
[Module(ModuleName = "SnakeModule")]
class SnakeModule : IGame
{
    public void Initialize()
    {
        Console.WriteLine("test");
    }

    public void StartGame()
    {
        throw new NotImplementedException();
    }

} 
```

目前，主项目正在编译，但模块未初始化。我很难理解如何设置我的引导程序，并且文档没有太大帮助，因为它没有完整的*DirectoryModuleCatalog*示例。模块化快速入门也没有编译。这是我的引导程序：

```
class BootStrap : MefBootstrapper
    {

        protected override DependencyObject CreateShell()
        {
            return ServiceLocator.Current.GetInstance<Shell>();
        }

        protected override void InitializeShell()
        {
            Application.Current.MainWindow = (Window)this.Shell;
            Application.Current.MainWindow.Show();
        }

        protected override void ConfigureAggregateCatalog()
        {
            this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(BootStrap).Assembly));  
        }

        protected override IModuleCatalog CreateModuleCatalog()
        {

            DirectoryModuleCatalog catalog = new DirectoryModuleCatalog() { ModulePath = @"..\..\..\GameTestLib\bin\Debug" };
            return catalog;
        }

        protected override void ConfigureContainer()
        {
            base.ConfigureContainer();
        }

    } 
```

DLL 的路径是正确的。总而言之，我的问题是：我应该如何设置我的引导程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T02:50:37.910

首先，由于您使用的是 Prism，我建议您使用*ModuleExport*，如下所示：

```
[ModuleExport("SnakeModule", typeof(IGame))] 
```

但是您的问题实际上来自您没有将您的课程设置为公共课程这一事实，因此阻止了您的模块的发现。因此，您需要将代码更改为：

```
[ModuleExport("SnakeModule", typeof(IGame))]
public class SnakeModule : IGame
{
    public void Initialize()
    {
        Console.WriteLine("test");
    }

    public void StartGame()
    {
        throw new NotImplementedException();
    }

} 
```

它应该没问题！*

# backbone.js - 具有服务器数据的骨干集合的人口

> ID：14395964
> 
> 赞同：0
> 
> 时间：2013-01-18T09:34:16.637
> 
> 标签：backbone.js

我有一个骨干收藏。我取。服务器返回一个 JSON。如何使用新数据填充集合？这是我的代码：

```
 var Todos = Backbone.Collection.extend({

       url: "server/todos-service.php", // this does what it is supposed to do so no worries!

       model: Todo,   

       initialize: function(attributes, options) {    
           // IN HERE WHAT DO I HAVE TO DO?
           // WHAT EVENT SHALL I BIND TO TO REACT THE DATA DELIVERY?
           // AND WHAT SHALL I DO NEXT TO POPULATE THE DAMN THINGS

           }
        });

    // CLIENT CODE
    new Todos().fetch(); 
```

谁能告诉我这应该怎么做？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:11:39.070

这`fetch`将启动对您的服务器的 ajax 调用。返回数据后，它会自动将数据放入您的集合中，并且该集合将触发`reset`类似“我已完成获取数据，兄弟，您现在可以使用它”的信息。

您通常会从视图内部调用 fetch()，并让视图监听`reset`事件。当重置事件被触发时，视图呈现集合。

```
var Todo = Backbone.Model.extend({
    // my model
});

var TodoList = Backbone.Collection.extend({
     url: myurl
     model: Todo   
    // my collection (usually nothing in the initialize function) 
});

var AppView = Backbone.View.extend({
  initialize: function() {
    // instantiate the collection
    this.collection = new TodoList();

    //listen to the reset event on the collection. When the reset event trigger, call the render function.
    this.collection.on('reset', this.render, this);

    // get the data from the backend
    this.collection.fetch();
  },
  render: function() {
     // render the collection like a boss
  }
});

//instantiate the view 
var App = new AppView; 
```

同样作为一种资源，我发现本教程对于理解骨干网的基础知识非常有帮助[http://net.tutsplus.com/sessions/build-a-contacts-manager-using-backbone-js/](http://net.tutsplus.com/sessions/build-a-contacts-manager-using-backbone-js/)

# c++ - 在类模板中正确初始化静态 constexpr 数组？

> ID：14395967
> 
> 赞同：18
> 
> 时间：2013-01-18T09:34:22.257
> 
> 标签：c++, templates, c++11, static-members, constexpr

由于标准的措辞，C++ 中的静态类成员给我带来了一些困惑：

> *9.4.2 静态数据成员* **[class.static.data]**
> 
> 在其类定义中声明静态数据成员不是定义...

然而，需要在声明时（例如，在类定义中）初始化*constexpr*（AFAIK，无法从标准中找到引用）。

由于对 constexpr 的限制，我实际上已经忘记了在类之外定义静态成员的必要性，直到我尝试访问静态 constexpr 数组。[这个相关问题](https://stackoverflow.com/questions/8016780/undefined-reference-to-static-constexpr-char)提供了定义数组成员的正确方法，但我对类模板中这个定义的含义感兴趣。

这就是我最终的结果：

```
template<typename T>
class MyClass
{
private:
  static constexpr std::size_t _lut[256] = { /* ... */ };
  T _data;

public:
  static constexpr std::size_t GetValue(std::size_t n) noexcept
  {
    return _lut[n & 255];
  }

  // ...
};

template<typename T>
constexpr std::size_t MyClass<T>::_lut[256]; 
```

**这是正确的语法吗？**特别是在定义中使用模板感觉很尴尬，但 GCC 似乎正在适当地链接一切。

作为后续问题，是否应该类似地定义非数组静态 constexpr 成员（在类之外使用模板定义）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-14T19:26:59.617

如果它可以帮助任何人，以下使用 constexpr 的 GCC 4.7 对我有用：

```
template<class T> class X {
  constexpr static int s = 0;
};
template<class T> constexpr int X<T>::s; // link error if this line is omitted 
```

我没有声称这是否“正确”。我会把它留给那些更有资格的人。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-18T09:47:40.370

我想你想要 9.4.2p3：

> 如果非易失性`const static`数据成员是整数或枚举类型，则其在类定义中的声明可以指定一个*大括号或等式初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式（5.19）。文字类型的静态数据成员可以在类定义中用说明符声明；如果是这样，它的声明应指定一个*大括号或等式初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式。[...]如果成员在程序中被 odr-used (3.2) 并且命名空间范围定义不应包含*`constexpr`****初始化器*。****

 ***模板*静态数据成员的定义是*模板声明*(14p1)。14.5.1.3p1 中给出的例子是：

```
template<class T> class X {
  static T s;
};
template<class T> T X<T>::s = 0; 
```

但是，如上所述，其类内声明指定*初始化程序*`constexpr static`的or成员不应在其命名空间范围定义中具有*初始化程序*，因此语法变为：`const static`

 **```
template<class T> class X {
  const static T s = 0;
};
template<class T> T X<T>::s; 
```

与非数组（即整数或枚举）静态 constexpr 数据成员的区别在于它在左值到右值转换中的使用不是 odr-use；如果获取它的地址或形成对它的 const 引用，您只需要定义它。****

# ruby-on-rails - 在 Rails3.2.9 中关联期间向现有表添加引用列

> ID：14395978
> 
> 赞同：2
> 
> 时间：2013-01-18T09:35:04.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我的 rails 应用程序中有两个模型。一个是我通过 Devise 生成的用户，另一个是链接。现在最初我的应用程序中只有 Link 模型。所以我的模型 Link 中有两列，即**"id"**和**"link"**。现在我的要求已经改变，我需要实现一个用户模型。我的应用程序中的用户有一个或多个链接。所以将该行添加`has_many :links`到我的**“user.rb”**和`belongs_to :users`我的**“link.rb”**文件中。

我生成了一个迁移，例如：

```
rails generate migration add_user_id_to_link user:references 
```

也就是说，我正在生成一个迁移文件来修改我现有的表**“链接”**并将引用列**“user_id”**添加到表中。

但是运行时会报错`rake db:migrate`。然后我运行命令：

```
rails genearate migration add_user_id_to_links user_id:integer 
```

但它给出了一个找不到命令的错误。现在的问题是我如何实现这一目标？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:15:33.130

我很确定引用助手仅适用于`create_table`. 这就是为什么第一个命令不起作用的原因。

第二个命令应该可以工作。该错误可能指向您在`generate`.

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T13:56:05.340

`rails g migration add_user_id_to_links user_id:integer:index`如果您想将每个用户分配给他们发布的链接，您可以这样做。

# android - 未找到 Sqlite 表

> ID：14395980
> 
> 赞同：0
> 
> 时间：2013-01-18T09:35:07.950
> 
> 标签：android, sqlite

我想从 sqlite 数据库中选择记录并简单地显示在我的应用程序上。但是当我运行我的程序时，我得到了调试错误： -`[2013-01-18 14:39:28 - ddms] Can't bind to local 8649 for debugger and table not found error.`我在这里发布我的代码，请有人检查并告诉我解决方案。

数据库主类：

```
 public class DatabaseMain extends SQLiteOpenHelper{

    private static String DB_PATH = "/data/data/com.ocs.employeedetails/databases/";

    private static String DB_NAME = "EMPLOYEE_DB.sqlite";
    private static int VERSION = 1;
    private final Context mycontext;
    private SQLiteDatabase sqliteDb;

    public DatabaseMain(Context context) {
        super(context,DB_NAME,null,VERSION);
        this.mycontext = context;

    }

    public void createDataBase() throws IOException{

        boolean databaseExist = checkDataBase();
         if(databaseExist){

        }else{

            this.getReadableDatabase();
            //this.getWritableDatabase(); 
            try{
            copyDataBase();
            }catch(IOException e){
                throw new Error("Error copying database");

            }
        }
    } 

    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, 
        SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){
             e.printStackTrace();
        }
        if(checkDB != null){
            checkDB.close();
          }

        return checkDB != null ? true : false;

    }

    private void copyDataBase() throws IOException{ 

        InputStream myInput = mycontext.getAssets().open(DB_NAME); 
        String outFileName = DB_PATH +DB_NAME; 
        OutputStream myOutput = new FileOutputStream(outFileName); 
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close(); 
    }

    public void openDataBase() throws SQLException{      
        String myPath = DB_PATH + DB_NAME;
        sqliteDb = SQLiteDatabase.openDatabase(myPath, null,   SQLiteDatabase.OPEN_READWRITE);  
    }
    public Cursor queryExec(){
        openDataBase();
        String qry = "Select * from employee_tab";
        Cursor cur = null;
        cur = sqliteDb.rawQuery(qry,null);
        close();
        return cur;

    }
    @Override
    public synchronized void close() {

            if(sqliteDb != null)
                sqliteDb.close();

            super.close();

    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            createDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}

    } 
```

我使用 DatabaseMain 类的活动类：

```
 @Override
    public void onClick(View v) {
        if(v.getId() == R.id.buttonOk){
            Toast.makeText(getBaseContext(), "Hi ",Toast.LENGTH_SHORT).show();
        try {
                       dm.createDataBase();
        } catch (IOException e) {
             e.printStackTrace();
        }
        dm.openDataBase();
        Cursor cr = dm.queryExec();
        if(cr.moveToFirst())
        {

            while(cr.isFirst())
            {
                id[0] = cr.getInt(0);
                name.setText(cr.getString(1)); 
                ph.setText(cr.getInt(2));
                doj.setText(cr.getString(2));
            }
        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:58:48.463

您可以尝试更改调试器的端口：

```
Under Window -> Preferences -> Android -> DDMS:

    Set Base local debugger port to "8601"
    Check the box that says "Use ADBHOST" and the value should be "127.0.0.1" 
```

# php - 必应 api 搜索

> ID：14395982
> 
> 赞同：-2
> 
> 时间：2013-01-18T09:35:11.250
> 
> 标签：php, curl, bing-api

我正在尝试使用 bing api 密钥搜索一些图像。我写了这段代码，但它不起作用，并且它不会返回一些错误。我认为这是一个 api 错误......你能帮帮我吗？

```
$accountKey = 's+s/s=';
$rootUri = 'https://api.datamarket.azure.com/Bing/Search';

// Get the query. Default to 'sushi'.
$query = ($_GET['q']) ? $_GET['q'] : 'sushi';

// Get the service operation. Default to Web.
$serviceOp = ($_GET['sop']) ? $_GET['sop'] : 'Web';

// Get the market. Default to en-us.
$market = ($_GET['market']) ? $_GET['market'] : 'en-us';

$ServiceRootURL =  'https://api.datamarket.azure.com/Bing/SearchWeb/';  
$WebSearchURL = $ServiceRootURL . 'Web?$format=json&Query=';

$request = $WebSearchURL . urlencode( '\'' . $query. '\'');
echo $request;
//$requestUri = "$rootUri/$serviceOp?\$format=json&Query=$query&Market=$market";

$process = curl_init($request);
curl_setopt($process, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($process, CURLOPT_USERPWD,  $accountKey . ":" . $accountKey);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
$response = curl_exec($process);
$jsonobj = json_decode($response);
echo "<br>Ris = ".$jsonobj; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:46:49.843

我只是跳到[文档中](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!112&app=Word&authkey=!ANNnJQREB0kDC04)，您可以使用`file_get_contents`而不是 cURL。

```
<?php
$accountKey = 'xxxxx';

$auth = base64_encode("$accountKey:$accountKey");

$data = array(
  'http'            => array(
  'request_fulluri' => true,
  'ignore_errors'   => true,
  'header'          => "Authorization: Basic $auth")
);

$context   = stream_context_create($data);
$query     = isset($_GET['q']) ? $_GET['q'] : 'sushi';
$serviceOp = isset($_GET['sop']) ? $_GET['sop'] : 'Web';
$market    = isset($_GET['market']) ? $_GET['market'] : 'en-us';

$ServiceRootURL = 'https://api.datamarket.azure.com/Bing/Search/';  
$WebSearchURL   = $ServiceRootURL . 'Web?$format=json&Query=';

$request = $WebSearchURL . urlencode( '\'' . $query. '\'');

// Get the response from Bing.
$response = file_get_contents($request, 0, $context);
var_dump($response); 
```

# java - 如何覆盖 Java SWT FileDialog 类的打开按钮

> ID：14395983
> 
> 赞同：8
> 
> 时间：2013-01-18T09:35:15.093
> 
> 标签：java, swt

我希望在按下按钮时弹出文件选择对话框。为此，我正在使用 org.eclipse.swt.widgets.FileDialog 类并打开对话框。默认情况下有两个按钮“打开”（我们选择文件后按下的按钮）和“取消”按钮。

我希望按钮上的名称从“打开”更改为“导入”。

是否可以在 FileDialog 上覆盖此按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:03:50.660

SWT 使用操作系统资源。您看到的文件对话框是用于打开文件的典型 OS 对话框。如果不实现自己的对话框，则无法更改按钮的文本。

唯一的替代方法`Open`是`Save`使用样式位：

```
SWT.SAVE 
```

代替

```
SWT.OPEN 
```

# java - Maven 和 FEST-Swing 测试

> ID：14395985
> 
> 赞同：0
> 
> 时间：2013-01-18T09:35:19.037
> 
> 标签：java, unit-testing, maven, xvfb, fest

我有一些 FEST-Swing 测试，我想在 linux 下使用 Maven 运行它。我尝试像这样使用 xvfb：

```
xvfb-run mvn -Dtest=e2e.MateriePrimeE2eTest test 
```

但我有这个错误：

```
Running e2e.MateriePrimeE2eTest
Jan 18, 2013 10:26:58 AM org.fest.swing.monitor.WindowStatus <init>
WARNING: Error ocurred when creating a new Robot
java.awt.AWTException: headless environment
at java.awt.Robot.<init>(Robot.java:75)
at org.fest.swing.util.RobotFactory.newRobotInPrimaryScreen(RobotFactory.java:35)
[...] 
```

没有xvfb也是一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:02:48.023

“无头”意味着此代码需要访问图形环境，而它没有。看看[这个问题](https://stackoverflow.com/questions/6086754/can-i-use-java-awt-robot-from-within-a-daemon)可能对你有帮助。

# jquery - jQuery 和 jQueryUI 新版本问题

> ID：14395986
> 
> 赞同：0
> 
> 时间：2013-01-18T09:35:21.840
> 
> 标签：jquery, jquery-ui

我正在使用最新的 jQuery UI 版本 - 1.9.2 和 jQuery 1.8.3 版本。前几天，jQuery 1.9.0 版本出来了，我决定尝试一下，但出现以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: <li role="presentation" 

class="ui-selectmenu-group ui-selectmenu-group-0"><span class="ui-selectmenu-group-label">

</span><ul></ul></li> 
```

在

> jquery-1.9.0.min.js:2

文件。

有谁知道如何解决这个问题或导致问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:28:12.610

该错误是由选择菜单插件的“jQuery 1.9.0 and jQuery UI 1.10.0 Compatibility”引起的。

在“jQuery UI”的下一个版本中，该插件将与最新的“jQuery”和“jQuery UI”版本完全兼容。

在这里您可以找到有关选择菜单插件兼容性的更多详细信息： [https ://github.com/fnagel/jquery-ui/issues/286](https://github.com/fnagel/jquery-ui/issues/286)

# android - Android培训：简单拍照

> ID：14395988
> 
> 赞同：0
> 
> 时间：2013-01-18T09:35:27.197
> 
> 标签：android, android-camera, android-camera-intent

也许这是一个兼容性问题，或者我遗漏了一些东西，但是[“简单地拍照”教程](http://developer.android.com/training/camera/photobasics.html)`PhotoIntentActivity`中的示例代码对我不起作用。当我拍一张大照片时，该函数从未真正设置图像，因为私有成员总是被设置为何时被调用。`handleBigCameraPhoto()``mCurrentPhotoPath``null``onActivityResult()`

这只是我的 Regza 平板电脑的问题吗？解决此问题的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:49:39.920

我对我的应用程序使用相同的教程时遇到了同样的问题，并发现了获得空值的可能原因：一旦启动相机应用程序，由于内存不足，您的活动可能被系统杀死，所以当您的活动恢复时你所有的成员变量都没有初始化。

修复它的适当方法是恢复到执行**以下方法的先前状态：**

1.- onSaveInstanceState(Bundle outState)

2.- onRestoreInstanceState(Bundle savedInstanceState)

# login - 错误还是功能？跨 AD 域访问

> ID：14395990
> 
> 赞同：0
> 
> 时间：2013-01-18T09:35:33.217
> 
> 标签：login, dns, active-directory, directory

我设置了 2 个 AD 域，两者之间**完全不信任。**

1.  测试网
2.  产品网

我在每个域上设置了 2 台机器 ( `MTest`& `MProd`)，每个域上有 2 个用户，并且使用相同的 User Id `MyUser`。`MProd`包含一个可以访问的文件夹 ( `MyFolder`) 。`Prod\MyUser`

我已登录`Mtest`（当然是使用`Test\MyUser`）并尝试访问`\\MProd\MyFolder`. 文件夹被打开了！

这不应该因为两个域没有信任而失败吗？或者至少要求提供凭据？这些都没有发生。

# ruby - gem安装时如何执行脚本？

> ID：14395992
> 
> 赞同：1
> 
> 时间：2013-01-18T09:35:35.970
> 
> 标签：ruby, rubygems

我正在编写一个 gem，在安装 gem 的同时，我还希望执行一个驻留在 gem 中的脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:20:09.393

安装 gem 后，您不应该能够运行任意脚本，但是您可以使用 hack 来解决此问题。RubyGems 允许您使用 extconf.rb 为您的 gem 构建扩展，并且您可以欺骗它以这种方式运行您的脚本。这里有一个指南：http: [//blog.costan.us/2008/11/post-install-post-update-scripts-for.html](http://blog.costan.us/2008/11/post-install-post-update-scripts-for.html)。

有关为什么运行脚本作为 gem 安装的一部分不包含在 RubyGems 中并且不鼓励的讨论，请遵循此处的拉取请求评论：[https](https://github.com/rubygems/rubygems/pull/213) ://github.com/rubygems/rubygems/pull/213 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:13:29.790

RubyGems 本身不会让您这样做，可能是出于安全原因。[您最多可以做的是向用户打印一条消息](http://guides.rubygems.org/specification-reference/#post_install_message)：

```
Gem::Specification.new 'your_gem' do |specification|
  # ...

  specification.post_install_message = 'Thanks for installing!'
end 
```

您*可以*做的是在您的 gem 中包含一个设置脚本并请求用户运行它。使用安装后消息让他知道他必须运行脚本。

# python - 在 if 语句中检查 0 的 Pythonic 方式？

> ID：14395994
> 
> 赞同：3
> 
> 时间：2013-01-18T09:35:46.587
> 
> 标签：python, if-statement

在编写素数测试器时，我遇到了一个有趣的想法。当您想要做某事时，如果操作的结果是`0`，那么处理它的更好（'pythonic'）方法是什么？

```
# option A - comparison
if a % b == 0:
    print('a is divisible by b')

# option B - is operator
if a % b is 0:
    print('a is divisible by b')

# option C - boolean not
if not a % b:
    print('a is divisible by b') 
```

[PEP 8](http://www.python.org/dev/peps/pep-0008/)说`None`应该与`is`操作员进行比较。它还说检查空序列应该使用`not`, 而不是将布尔值与`==`or进行比较`is`。但是，它没有提到任何关于检查`0`结果的内容。

那么我应该使用哪个选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T09:38:26.220

测试`0`是（imo）最好通过测试来完成`0`。`0`这也表明除了和之外可能还有其他值`1`。

如果被调用的函数真的只`0`在成功和`1`失败时返回`Yes/No`, `Success/Failure`,`True/False`等，那么我认为该函数是问题所在，应该（如果适用）修复为 return `True`and `False`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:47:07.203

0 不能保证是一个单例，所以不要`is`用来测试它：目前 C Python 重用小整数，所以如果你还在 Python 2.x 上，可能只有一个`int`值为 0 加 a ，`long`以及任何数量的浮点零，更不用说所有比较等于 0 的 False。Python 的一些早期版本在获得单独的 bool 类型之前使用不同的 int 零作为比较结果。

使用任何一个`==`（这将是我的偏好）或只使用`not`，无论您喜欢哪个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:43:05.303

只是个人：我更喜欢这种`not a % b`方式，因为它似乎具有很高的可读性。但是现在，为了降低代码中的混淆程度，我将使用`== 0`，因为它以更准确的方式准确地表达了您期望测试的内容。这是“关心调试”的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:56:01.620

A 和 C 都是有效的并且非常 Pythonic。

B 不是，因为

1.  `0`语义上不是单例（它在 cPython 中，但这是一个实现细节）。
2.  它不适用于 float`a`或`b`.
3.  实际上，这可能不适用于 Python 的其他一些实现。

# asp.net - BC30057：许多争论

> ID：14395997
> 
> 赞同：3
> 
> 时间：2013-01-18T09:36:02.537
> 
> 标签：asp.net, vb.net

问题突然出现，我不知道为什么会出现问题以及如何解决。

**编译错误**

**说明：**在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

**编译器错误消息：** BC30057：'Public Sub New(ItemNo As String，POLineMatch As String，ItemNumberPartCode As String，QuantityInvoiced As String，UnitPriceInvoiced As String，ExtendedPrice As String，ItemTax As String，Notes As String)'的参数太多。

**这是代码：**

```
Partial Class Plugins_NonPO_GLCoding
  Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        If Me.InvoiceItemsDV.Table.Rows.Count > 0 Then
            For i As Integer = 0 To Me.InvoiceItemsDV.Table.Rows.Count - 1
                Dim ItemNo As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ItemNo"))
                Dim POLineMatch As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("POLineMatch"))
                Dim ItemNumberPartCode As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ItemNumberPartCode"))
                Dim QuantityInvoiced As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("QuantityInvoiced"))
                Dim UnitPriceInvoiced As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("UnitPriceInvoiced"))
                Dim ExtendedPrice As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ExtendedPrice"))
                Dim GLAccount As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("GLAccount"))
                Dim ItemTax As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ItemTax"))
                Dim Notes As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("Notes"))
                Dim ItemTaxCode As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ItemTaxCode"))
                Dim Department As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("Department"))
                Dim ShipToCode As String = Me.NullCheck(Me.InvoiceItemsDV.Table.Rows(i)("ShipToCode"))
                Me.InvoiceItems.Add(New InvoiceItems(ItemNo, POLineMatch, ItemNumberPartCode, QuantityInvoiced, UnitPriceInvoiced, ExtendedPrice, GLAccount, ItemTax, Notes, ItemTaxCode, Department, ShipToCode))
            Next
        End If
End Sub
End Class

Public Class InvoiceItems
    Private _ItemNo As String
    Private _POLineMatch As String
    Private _ItemNumberPartCode As String
    Private _QuantityInvoiced As String
    Private _UnitPriceInvoiced As String
    Private _ExtendedPrice As String
    Private _GLAccount As String
    Private _ItemTax As String
    Private _Notes As String
    Private _ItemTaxCode As String
    Private _Department As String
    Private _ShipToCode As String
    Public Sub New(ByVal ItemNo As String, ByVal POLineMatch As String, ByVal ItemNumberPartCode As String, ByVal QuantityInvoiced As String, ByVal UnitPriceInvoiced As String, ByVal ExtendedPrice As String, ByVal GLAccount As String, ByVal ItemTax As String, ByVal Notes As String, ByVal ItemTaxCode As String, ByVal Department As String, ByVal ShipToCode As String)
        Me._ItemNo = ItemNo
        Me._POLineMatch = POLineMatch
        Me._ItemNumberPartCode = ItemNumberPartCode
        Me._QuantityInvoiced = QuantityInvoiced
        Me._UnitPriceInvoiced = UnitPriceInvoiced
        Me._ExtendedPrice = ExtendedPrice
        Me._GLAccount = GLAccount
        Me._ItemTax = ItemTax
        Me._Notes = Notes
        Me._ItemTaxCode = ItemTaxCode
        Me._Department = Department
        Me._ShipToCode = ShipToCode
    End Sub
    Public Property ItemNo() As String
        Get
            Return Me._ItemNo
        End Get
        Set(ByVal value As String)
            Me._ItemNo = value
        End Set
    End Property
' There are too many get sets so i deleted them out and left one for example
End Class 
```

一切正常，甚至在我的重复机器上一切正常，它应该如何工作，弹出这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:54:13.333

看来您的构造函数不一样：

```
From error: Public Sub New(ItemNo As String, POLineMatch As String, ItemNumberPartCode As String, QuantityInvoiced As String, UnitPriceInvoiced As String, ExtendedPrice As String, ItemTax As String, Notes As String)
From code:  Public Sub New(ByVal ItemNo As String, ByVal POLineMatch As String, ByVal ItemNumberPartCode As String, ByVal QuantityInvoiced As String, ByVal UnitPriceInvoiced As String, ByVal ExtendedPrice As String, ByVal GLAccount As String, ByVal ItemTax As String, ByVal Notes As String
                           , **ByVal ItemTaxCode As String, ByVal Department As String, ByVal ShipToCode As String**) 
```

我猜你必须在重新编译之前清理你的解决方案。如果它不起作用，请找到您在机器上编译的所有 dll 并将它们从您的机器中删除。可能存在未正确清理的 dll。或者您显示的代码可能不是您的错误的原因。