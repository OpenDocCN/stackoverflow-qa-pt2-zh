# StackOverflow 问答 13880000-13880999

# maven - 如何使参数依赖maven构建？

> ID：13880002
> 
> 赞同：0
> 
> 时间：2012-12-14T13:54:19.343
> 
> 标签：maven, maven-3

如何使 Maven 构建依赖于参数？在为集群环境构建项目时，我想对配置文件进行一些更改。因此，如果通常的构建类似于***mvn clean package***那么在构建集群时我想像***mvn clean package cluster***一样运行 smth并在这种情况下进行配置更改。顺便说一句，我的主要 pom.xml 只包含几个包含的模块，我需要将这个参数传递给这些模块，所以也要考虑这一点。

# android - 广播接收器内部活动

> ID：13880004
> 
> 赞同：2
> 
> 时间：2012-12-14T13:54:25.737
> 
> 标签：android, service

大家好，我如何在从服务接收意图以及一些 int 和 string 类型参数的活动中实现广播接收器？

**更新：**

我在活动下有这个：

```
 private BroadcastReceiver ReceivefrmSERVICE = new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {

        Toast.makeText(context, "IN DA BroadCASTER",
                Toast.LENGTH_LONG).show();

    }

   }; 
```

我将此在服务中的功能下进行，该功能在检查检查按钮时从另一个活动中调用事件：

```
 public void switchSpeaker(int hr, int min){

       Toast.makeText(Server.this, hr +" , " +min, Toast.LENGTH_LONG).show();

       Intent intent = new Intent(this, andRHOME.class);
       //intent.putExtra("sendMessage","1");
        startActivity(intent);
        /*PendingIntent pi = PendingIntent.getService(Server.this, 0, myIntent, 0);
        AlarmManager almmgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        Calendar cldr = Calendar.getInstance();
        int min1 = cldr.get(Calendar.MINUTE);
        cldr.setTimeInMillis(System.currentTimeMillis());
        cldr.add(Calendar.SECOND, 30);
        almmgr.set(AlarmManager.RTC_WAKEUP, cldr.getTimeInMillis(), pi);*/
    } 
```

但是它崩溃了？，该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T14:05:58.000

```
BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {         
       // DO YOUR STUFF
    }
}

IntentFilter filter = new IntentFilter(); 
```

在 onResume 中：（所以你只在前台收到）

```
filter.addAction(/* the action you want to receive */);
registerReceiver(receiver, filter); 
```

在 onPause 中：（try catch 是为了修复 unregister 中的错误，以防它被调用两次）

```
try {
    unregisterReceiver(receiver);
} catch (IllegalArgumentException e) {
    if (e.getMessage().contains("Receiver not registered")) {
        // Ignore this exception. This is exactly what is desired
        Log.w(TAG,"Tried to unregister the reciver when it's not registered");
    } else {
        // unexpected, re-throw
        throw e;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:04:00.533

```
 public class myActivity extends Activity {

    private BroadcastReceiver receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Message", Toast.LENGTH_SHORT);

        }
    };
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
}

} 
```

# java - JPQL JPA 访问谷歌数据存储

> ID：13880005
> 
> 赞同：2
> 
> 时间：2012-12-14T13:54:28.200
> 
> 标签：java, google-cloud-datastore, jpql

我的实体类：

```
 public class ACCOUNT implements Serializable{

private static final long serialVersionUID = 1L;

@Id
@Column(name = "USERNAME")
private String Username;

@Column(name = "PASSWORD")
private String Password;

public ACCOUNT(String user,String pass)
{
    this.Username=user;
    this.Password=pass;
}

// geter and setter 
```

我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

<persistence-unit name="transactions-optional">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>com.materialshop.server.Datastore.ACCOUNT</class>
    <exclude-unlisted-classes/>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.nontx.atomic" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
</persistence-unit>
</persistence> 
```

现在持久化帐户，它是成功的

```
ACCOUNT ac=new ACCOUNT("admin","123");
em.persist(ac); 
```

我检查了

```
 http://localhost:8888/_ah/admin 
```

是的，有 1 个记录管理员和 123 个 ACOUNT 实体

但是当我使用 JPQL 获取所有实体时，它返回 null

```
Query q=new Query("SELECT ac FROM ACCOUNT ac");
List<ACCOUNT> list=q.getResultList(); 
```

即使

```
 em.find(ACCOUNT.class,"admin"); 
```

也返回 null

我错过了什么 ？请帮助我，非常感谢您的帮助

# c# - dataadapter 填充缺少的参数

> ID：13880007
> 
> 赞同：1
> 
> 时间：2012-12-14T13:54:32.697
> 
> 标签：c#, asp.net

当我尝试执行此代码时收到以下错误。但我将它添加到我的命令中。有人可以指出忽略的步骤吗？谢谢。

过程或函数“usps_getContactDetails”需要参数“@aspContactID”，但未提供该参数。

SqlConnection conn = new SqlConnection(GetConnString()); SqlCommand cmd = new SqlCommand("usps_getContactDetails", conn);

```
 SqlParameter parmContactID = new SqlParameter("@aspContactID", Convert.DBNull);
        cmd.Parameters.Add(parmContactID);
        parmContactID.Direction = ParameterDirection.Input;

        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;

        conn.Open();
        DataSet cusDS = new DataSet();
        da.Fill(cusDS, "Contacts"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:27:10.277

在执行 a`SqlCommand`并调用存储过程时，您需要将您的隐式设置`SqlCommand`为 a `StoredProcedure`。

```
using(SqlConnection con = new SqlConnection(""))
{
  //Set up your command
  SqlCommand cmd = new SqlCommand("[Procedure]", con);
  cmd.CommandType = CommandType.StoredProcedure;
  //Add your parameters
  cmd.Parameters.AddWithValue("@aspContactID", "");
  //Declare your data adapter
  SqlDataAdapter sda = new SqlDataAdapter(cmd);
  DataSet ds = new DataSet();
  sda.Fill(ds, "Contacts");
} 
```

按照上面的格式，你应该没问题。您的程序无法正常工作有两个原因之一，您错过了在这种情况下使您的代码工作的代码行，`cmd.CommandType = CommandType.StoredProcedure;`或者因为您的参数是`DBNull`程序表示它没有对该参数的任何识别。如果您在存储过程中有一个可以为空或为空的参数，请执行以下操作：

```
Create Procedure [dbo].[Example]

@Test as Varchar(100) = ''

As 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:21:45.877

```
 protected void Page_Load(object sender, EventArgs e)
    {

    }
    private void OpenCon()
    {
        con = new SqlConnection(ConfigurationManager.ConnectionStrings["DbPrepConnectionString"].ConnectionString.ToString());
        try
        {
            con.Open();
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }
    }

    private void SubmitData()
    {
        OpenCon();
        string sp = "sp_InsertRecord";
        cmd = new SqlCommand(sp, con);

        cmd.CommandType = CommandType.StoredProcedure;
        //add parameters...
        cmd.Parameters.Add(new SqlParameter("@Name", SqlDbType.VarChar, 50));
        cmd.Parameters.Add(new SqlParameter("@UserId", SqlDbType.Int));
        cmd.Parameters.Add (new SqlParameter ("@ProductName",SqlDbType .VarChar,50));
        cmd.Parameters.Add(new SqlParameter("@Price", SqlDbType.Money));

        //set paarameters....
        cmd.Parameters["@Name"].Value = txtName.Text.ToString();
        cmd.Parameters["@UserId"].Value = txtUserId.Text.ToString();
        cmd.Parameters["@ProductName"].Value = txtProductName.Text.ToString();
        cmd.Parameters["@Price"].Value = txtPrice.Text.ToString();
        cmd.ExecuteNonQuery();
        lblMessage.Text = "data inserted successfully";
    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        SubmitData();
    }

    private void FindData()
    {
        OpenCon();
        string s = "sp_FindRecord";
        cmd = new SqlCommand(s, con);
        cmd.Parameters.Add(new SqlParameter("@Id", SqlDbType.Int));
        cmd.Parameters["@Id"].Value = txtName.Text.ToString();
        cmd.CommandType = CommandType.StoredProcedure;
        ad = new SqlDataAdapter(cmd);
        ds = new DataSet();
        ad.Fill(ds);
        dt = ds.Tables[0];
        currow = 0;

        FillControls();

    }

    private void FillControls()
    {
        txtOrderId.Text = dt.Rows[currow].ItemArray[0].ToString();
        txtUserId.Text = dt.Rows[currow].ItemArray[1].ToString();
        txtProductName.Text = dt.Rows[currow].ItemArray[2].ToString();
        txtPrice.Text = dt.Rows[currow].ItemArray[3].ToString();
    }

    protected void btnFind_Click(object sender, EventArgs e)
    {
        FindData();
    }

} 
```

}'

# php - 使用 for 和 while 检查 PHP

> ID：13880009
> 
> 赞同：0
> 
> 时间：2012-12-14T13:54:35.230
> 
> 标签：php, for-loop, while-loop

我有以下似乎不起作用的代码。据我所知，预定义数组的大小都相同——我的表“主页”中有 32 行，其中“用户名”、“图像”和“网站”是三个字段。出于测试目的，用户名是 1 到 32。图像和网站字段是空白的 - 目前（这将改变）。

我的代码是：

```
 $sorthpge = mysql_query ("SELECT * FROM homepage ORDER BY no DESC LIMIT 32");

$links = array();
$images = array();
$usern = array();

$array_Length_1 = count($usern);

    for ($i=0; $i<$array_Length_1; $i++)
    {
    while ($row_1 = mysql_fetch_assoc ($sorthpge)) {
        $images[$i] = $row_1['image'];
        $links[$i] = $row_1['website'];
        $usern[$i] = $row_1['username'];
        if($images[$i] == ""){
        $images[$i] = "uploads/default.png";
        $links[$i] = "register.php?no=";
        }
        else
        {
        if($images[$i] == "auction"){
        $images [$i] = "uploads/auction.png";
        $links[$i] = "auction.php?no=";
        }
        }
    }
    } 
```

你大概能说出我想要做什么。如前所述，所有“图像”行都是空白的，所以我应该得到“$images[i] =”uploads/default.png”，直到 32 为止。但我的 html 中没有显示任何内容。

只是想知道是否有人可以指出我的代码中的错误。或者，如果我的设置假设有问题。我对php很陌生。提前非常感谢。PS 当我可以使这些基础知识正常工作时，我将翻译为 mysqli。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:59:55.423

如果这是所有代码，这就是问题所在：

```
$usern = array();
$array_Length_1 = count($usern);
for ($i=0; $i<$array_Length_1; $i++)
{ 
```

数组是空的，所以长度是`0`你的代码永远不会运行。

无论如何，该循环的目的是什么`for`？看来您可以将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:00:26.297

在您的示例代码中，您具有以下内容：

```
$usern = array();
$array_Length_1 = count($usern);
for ($i=0; $i<$array_Length_1; $i++) { 
```

既然`$usern`是空的，`$array_Length_1`就是`0`- 你的循环永远不会执行。

我不确定你这样做背后的逻辑是什么，所以我不知道建议修复它的正确方法，但是，如果你要`for`完全删除循环并存储一个单独的增量器，`$i`代码应该工作正常。

例如，尝试将您的代码更新为以下内容：

```
$sorthpge = mysql_query ("SELECT * FROM homepage ORDER BY no DESC LIMIT 32");

$links = array();
$images = array();
$usern = array();
$i = 0;
while ($row_1 = mysql_fetch_assoc ($sorthpge)) {
    $images[$i] = $row_1['image'];
    $links[$i] = $row_1['website'];
    $usern[$i] = $row_1['username'];
    if($images[$i] == ""){
        $images[$i] = "uploads/default.png";
        $links[$i] = "register.php?no=";
    } else if($images[$i] == "auction"){
        $images [$i] = "uploads/auction.png";
        $links[$i] = "auction.php?no=";
    }
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:01:08.177

你上面的代码在我认为的几个地方失败了。这`$array_Length_1 = count($usern);`没有帮助。for 循环超出了 $array_length 的计数，它总是为空的，因为它还没有被填充......

试试这个：

```
<?php
    // connection strings here or db include
    $sorthpge = mysql_query ("SELECT * FROM homepage ORDER BY no DESC");

    $links = array();
    $images = array();
    $usern = array();

    $array_Length_1 = count($usern);

    $i = 0;

    while ($row_1 = mysql_fetch_assoc($sorthpge)){
        $images[$i] = $row_1['image'];
        $links[$i] = $row_1['website'];
        $usern[$i] = $row_1['username'];

        if($row_1['image'] == ""){
            $images[$i] = "uploads/default.png";
            $links[$i] = "register.php?no=";
        }
        elseif($row_1['image'] == "auction"){
            $images [$i] = "uploads/auction.png";
            $links[$i] = "auction.php?no=";
        }

        $i++;

    }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:01:55.547

```
$array_Length_1 = count($usern); 
```

你有问题吗！数组为空，因为您刚刚声明了它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T14:03:24.347

一个问题是 $array_Length_1 = count($usern); 您的数组 $usern 为空。而您的 for 循环最大值为空。意味着 $i 递增到 0。
`$usern = array();`
`$array_Length_1 = count($usern);`
`for ($i=0; $i<$array_Length_1; $i++)`

并确保您的文件保存为 php 文件，因为您提到您的 html 文件没有显示任何内容。

# performance - 淘汰赛性能 - 过滤可观察数组

> ID：13880015
> 
> 赞同：1
> 
> 时间：2012-12-14T13:54:39.700
> 
> 标签：performance, knockout.js

我是 Knockout 的新手，我正在尝试在显示系统用户和每个用户拥有的角色的页面上使用它。

数据在`observableArray`用户中。用户对象有一个角色属性，它是另一个`observableArray`. 第二个数组包含每个角色的对象，具有 ID 和布尔“授予”属性。

我希望能够以特定角色展示所有用户，因此每个角色都有一个复选框 - 当检查其中一个角色时，列表应显示具有该角色的用户。

我遇到的问题是按角色过滤 1,000 个左右的用户需要几秒钟的时间。按名称中的文本过滤非常快（几毫秒），但按角色过滤则不然。我已经放入了一些计时代码，问题是我用来检查用户是否具有选定角色的方法，所以我只是想知道是否有更好的方法，也许使用一些 Knockout魔法。

下面是我用来进行过滤的视图模型上的 ko.computed。结果表绑定到这个函数。

```
self.filteredUsers = ko.computed(function () {

    var textFilter = self.filter();          // this is an observable bound to a text field
    var checkedRoles = self.selectedRoles(); // this is a computed, which returns an array of checked roles

    return ko.utils.arrayFilter(self.users(), function (user) {

        var match = true;

        if (user.displayName.toLowerCase().indexOf(textFilter.toLowerCase()) == -1) {
            match = false;
        }

        // for each ticked role, check the user has the role
        for (var i = 0; i < checkedRoles.length; i++) {
            var roleMatch = false;
            for (var j = 0; j < user.roles().length; j++) {
                if (user.roles()[j].roleId === checkedRoles[i].roleId && user.roles()[j].granted()) {
                    roleMatch = true;
                    break;
                }
            }
            if (!roleMatch) {
                match = false;
            }
        }

        return match;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:30:12.023

我认为一个好的优化是`grantedRoles`在你的用户对象上创建一个计算。此计算将返回一个您可以用作索引的对象，将包含由角色的唯一标识符作为键的属性，并且仅包含被授予的角色。

然后在 中`filteredUsers`，您将`grantedRoles`针对每个选中的角色检查对象，而不是循环遍历`user.roles()`每个选中的角色。

# html - 样式第一个孩子（如果它是第一个元素）

> ID：13880016
> 
> 赞同：2
> 
> 时间：2012-12-14T13:54:39.980
> 
> 标签：html, css, css-selectors

我想为第一个 h2 子级添加填充，前提是它是父级中的“第一个元素”。

```
<div id="test">
    <h2>Try 1</h2>
    Test Test Test
    <h2>Try 2</h2>
</div> 
```

这里只有带有文本“Try 1”的 h2 必须得到我的自定义填充。

```
<div id="test">
    Test Test Test
    <h2>Try 1</h2>
    <h2>Try 2</h2>
</div> 
```

这里没有（之前有文字）。

试过[这个](http://jsfiddle.net/SPnwX/1/)：

```
h2
{
    padding-top:0;
}

#test h2:first-child
{
    padding-top:40px;
}​ 
```

但这还不够！我可以用 CSS2 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:56:04.087

只有当它是第一个子节点时？不，不幸的是，不是 CSS 选择器，因为非元素节点对 CSS 选择器是不可见的（属性选择器和`:empty`除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:07:31.007

[http://jsfiddle.net/CUwRc/](http://jsfiddle.net/CUwRc/)查看示例

示例CSS：

```
 div h2:nth-of-type(1) {
   background:red;
  }​ 
```

恐怕只有 IE9+ 支持，其他浏览器都可以！

# ruby-on-rails - 引导下haml下的text_area宽度

> ID：13880019
> 
> 赞同：0
> 
> 时间：2012-12-14T13:54:55.080
> 
> 标签：ruby-on-rails, twitter-bootstrap, haml

我有一个 Rails 应用程序，并且正在使用 haml 和 bootstrap。在我的表单中，我有两个用于输入文本的字段，并且只显示一个，具体取决于我在控制器中设置的变量。如果有一个文本区域，我想调整它的大小，并且**:rows**属性有效，但列无效。

我也尝试使用**%div :class => 'span6'**来扩大 text_area，但它似乎不起作用。

```
= form_for [@lesson_layout, @layout_field] do |f|
  .field
    = f.label :field_name
    = f.text_field :field_name
  - case @layout_type
  - when "Text Field"
    .field
      = f.label :field_value
      = f.text_field :field_value
    - when "Text Area"
      .field
        = f.label :field_value_long
        = f.text_area :field_value_long, :rows => 5, :placeholder => 'Enter text.'

.actions
  = f.submit 
```

**编辑**

尝试了以下代码，它并没有改变盒子的大小。

```
.field
  = f.label :field_value_long
  = f.text_area :field_value_long, :rows => 5, :placeholder => 'Enter text using markdown.', :html => { :style => "width:300em" } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T14:44:41.020

像这样的东西应该工作：
`= f.text_area :field_value_long, :rows => 5, :class => "span6", :placeholder => 'Enter text.'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:40:58.680

```
f.text_area( 
  :field_value_long, 
  :rows => 5, 
  :placeholder => 'Enter text.', 
  :html => { :style => "width:20em !important" }
) 
```

或者

```
f.text_area( 
  :field_value_long, 
  :rows => 5, 
  :placeholder => 'Enter text.', 
  :html => { :class => "my_wide_class" }
) 
```

# python - 尝试用 Python 编写 Eratosthenes Sieve。这是正确的，我怎样才能让它更快？

> ID：13880021
> 
> 赞同：2
> 
> 时间：2012-12-14T13:55:00.840
> 
> 标签：python, python-2.7, sieve-of-eratosthenes

> **可能重复：**
> [在python中列出N以下所有素数的最快方法](https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python)

很久没做编程了，做这个纯粹是为了好玩，对高级Python也不是很了解，但是……我写了这个，想知道是不是真的是Eratosthenes Sieve程序，如果是，我怎样才能让它更快。我真的不希望有人发布一个解决方案，但更多告诉我如何调整我的。

```
def eratSieve(n):
    all = []
    for a in range(2, n+1):
        all.append(a)               
    for b in all:                       
        for i in range(2,int(round(len(all)/b))):
            while i*b in all:
                all.remove(i*b)
                i+=1
    return all 
```

谢谢你的帮助。

顺便说一句 - 它在 Python 2.7 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:14:03.000

它不能正常工作。

主要问题是你循环所有的值`all`和`while`你从`all`.

这种方式`all`不考虑某些值，因此该函数不会删除所有非质数

尝试对 n=100 执行它，你得到的结果是

`2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 49, 51, 53, 55, 57, 59, 61, 63, 65, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85, 87, 89, 91, 93, 95, 97, 99`

虽然它应该是

`2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97` （来自[http://en.wikipedia.org/wiki/Prime_number](http://en.wikipedia.org/wiki/Prime_number)）

此外，第二个的范围`for`是错误的，因为您考虑的是列表的长度，而不是当前值，`b`因此您仅在前 50 个值中检查 2 的倍数，在前 17 个中检查 3 的倍数，5 在前 9 个，以此类推。从`b = 13`你永远不会进入内在`for`，因为`int(round(len(all)/b)) = 1`你有类似的东西`for i in range(2,1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:58:28.270

您的方法产生不正确的结果。错误在于`for i`循环。在这里，经过调整并经过测试：

```
known_primes = [
2,3,5,7,11,13,17,19,23,29,
31,37,41,43,47,53,59,61,67,71,
73,79,83,89,97,101,103,107,109,113,
127,131,137,139,149,151,157,163,167,173,
179,181,191,193,197,199,211,223,227,229,
233,239,241,251,257,263,269,271,277,281,
283,293,307,311,313,317,331,337,347,349,
353,359,367,373,379,383,389,397,401,409,
419,421,431,433,439,443,449,457,461,463,
467,479,487,491,499,503,509,521,523,541,
547,557,563,569,571,577,587,593,599,601,
607,613,617,619,631,641,643,647,653,659,
661,673,677,683,691,701,709,719,727,733,
739,743,751,757,761,769,773,787,797,809,
811,821,823,827,829,839,853,857,859,863,
877,881,883,887,907,911,919,929,937,941,
947,953,967,971,977,983,991,997,1009,1013,
1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,
1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,
1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,
1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,
1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,
1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,
1453,1459,1471,1481,1483,1487,1489,1493,1499]
def eratSieve(n):
    all = []
    for a in range(2, n+1):
        all.append(a)               
    for b in all:                       
        for i in all[all.index(b):]:
            while i*b in all:
                all.remove(i*b)
                i+=1
    return all

for N in range(1500):
    for n in eratSieve(N):
        if n not in known_primes:
            print N,n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:52:04.190

我同意 Gianluca 的观点，我有一个可能的解决方案：将主数组 ( `all`) 保留为布尔值并标记非素数，但不要删除它们。它也可能更快，因为您不会更改列表大小。

小事：`all = range(2, n+1)`如果你想把它保留为整数，你可以在开头写。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T14:10:10.787

```
def primes(N):
    primes = [x for x in (2, 3, 5, 7, 11, 13) if x < N]
    if N < 17: return primes
    candidators = [x for x in xrange((N - 2) | 1, 15, -2)
                    if x % 3 and x % 5 and x % 7 and x % 11 and x % 13]
    top = int(N ** 0.5)
    while (top + 1) * (top + 1) <= N: top += 1
    while True:
        p = candidators.pop()
        primes.append(p)
        if p > top: break
        candidators = filter(p.__rmod__, candidators)
    candidators.reverse()
    primes.extend(candidators)
    return primes 
```

我认为这段代码会运行得更快......

# jsf - 如何在 JSF 组件中监控异步/后台线程状态并获取通知

> ID：13880022
> 
> 赞同：2
> 
> 时间：2012-12-14T13:55:02.273
> 
> 标签：jsf, asynchronous, notifications, refresh, monitor

我在 Web 应用程序中创建了几个线程，并且在 JSF 页面中有一个数据表组件。

我想自动更新表格以显示线程的当前状态。在这种情况下我可以使用任何预构建组件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T14:07:56.790

> *我在 Web 应用程序中创建了几个线程*

我全心全意地希望您[以正确的方式做到这一点](https://stackoverflow.com/questions/6149919/is-it-safe-to-start-a-new-thread-in-a-jsf-managed-bean)，因此它不会以史诗般的灾难告终。

* * *

> *我想自动更新表格以显示线程的当前状态。在这种情况下我可以使用任何预构建组件吗？*

您基本上是在寻找一种称为“轮询”或“推送”的技术。轮询的基本概念是使用 JavaScript`setInterval()`或`setTimeout()`每隔一段时间向服务器发出 (ajax) HTTP 请求，并让它相应地处理结果。推送的基本概念是打开一个持久的 HTTP 连接并让服务器通过它发送小消息，这可以在 Java EE 7[`WebSocket`中的 JavaScript](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications)和[JSR356 API 中](https://docs.oracle.com/javaee/7/tutorial/websocket.htm)完成。

标准的 JSF 实现不提供任何现成的轮询或开箱即用的组件。对于即将到来的 JSF 2.3，一个新`<f:websocket>`标签目前正在进行中（另请参阅[issue 1396](https://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-1396)）。

您最好的选择是带有隐藏命令链接/按钮的隐藏表单，`<f:ajax>`然后通过`setInterval()`. [然而，像PrimeFaces](http://primefaces.org)这样的组件库提供了开箱即用的组件，另请参阅[`<p:poll>`展示](http://www.primefaces.org/showcase/ui/ajax/poll.xhtml)和[`<p:push>`展示](http://www.primefaces.org/showcase/push/counter.xhtml)以获取一些具体示例。JSF 实用程序库[OmniFaces](http://omnifaces.org)在其[`<o:commandScript>`展示](http://showcase.omnifaces.org/components/commandScript)中展示了一个投票示例并[`<o:socket>`展示](http://showcase.omnifaces.org/push/socket)了几个推送示例（新标准 JSF`<f:websocket>`将主要基于`<o:socket>`.

### 也可以看看：

*   [如何以 1 秒的间隔对组件进行 ajax 更新？](https://stackoverflow.com/questions/30959828/how-do-i-ajax-update-a-component-at-an-interval-of-1-second/)
*   [使用 JSF/Java EE 从数据库实时更新](https://stackoverflow.com/questions/25947790/real-time-updates-from-database-using-jsf-java-ee)
*   [服务器如何将异步更改推送到由 JSF 创建的 HTML 页面？](https://stackoverflow.com/questions/3787514/how-can-server-push-asynchronous-changes-to-a-html-page-created-by-jsf/)

# c# - 如何在 Windows 8 商店应用程序中下载和提取 .tar.gz 文件

> ID：13880023
> 
> 赞同：0
> 
> 时间：2012-12-14T13:55:08.687
> 
> 标签：c#, windows-8

我有来自服务器的 .tar.gz (.tgz) 文件。如何在 Windows 8 商店应用程序中下载和提取此文件，然后需要将此提取的文件存储在存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T12:17:38.570

我知道回复为时已晚，但添加了我的答案，以便它可以帮助其他用户寻找一些好的 zip/tar 提取器。

可以使用[Sharpcompress](https://sharpcompress.codeplex.com/)解压 zip/tar 包。

NoxHarmonium 是真的，您需要在本地存储中下载，然后使用上述库进行提取。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T13:59:34.637

您可以使用[WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile.aspx)下载文件并将其放入[本地存储中。您可以使用](https://stackoverflow.com/questions/13144479/how-do-you-access-a-metro-apps-local-storage-in-a-desktop-application-in-window)[.NET Zip 库](http://www.icsharpcode.net/opensource/sharpziplib/) 提取 tar/gzip 编码的文件。

# php - 检查客户是否在线 magento

> ID：13880026
> 
> 赞同：2
> 
> 时间：2012-12-14T13:55:22.797
> 
> 标签：php, magento

首先，如果我的问题似乎有点离题，请原谅我，但如果有人能指出正确的方向或可以通过编程方式让所有当前登录的客户在线的示例或代码，我将不胜感激。

我已经发现你可以使用

```
Mage::getSingleton( 'customer/session' )->isLoggedIn() 
```

查明当前用户是否已登录，但我要问的是从他的 id 检查其他特定用户，以了解他/她是否已登录。

我已经在magento论坛上发布了一个类似的问题，以防你发现但至少在这篇文章发布之前还没有回复。通过此链接[http://www.magentocommerce.com/boards/viewthread/300354/](http://www.magentocommerce.com/boards/viewthread/300354/)

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:13:09.430

如果我对您的理解正确，您想知道当前登录的每个客户，这段代码（来自`Mage_Adminhtml_Block_Customer_Online_Grid`）应该这样做：

```
 $collection = Mage::getModel('log/visitor_online')
        ->prepare()
        ->getCollection();
    /* @var $collection Mage_Log_Model_Mysql4_Visitor_Online_Collection */
    $collection->addFieldToFilter('customer_id', array('notnull' => true))->addCustomerData(); 
```

如果要检查特定用户，请替换`array('notnull' => true)`为此客户的 id 并检查`count()`集合的 id 是否为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:45:47.690

参考[https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Customer/Model/Session.php#L140](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Customer/Model/Session.php#L140)：

```
Mage::getSingleton( 'customer/session' )->getCustomerId(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T18:49:05.210

老问题...无论如何，我认为检查单个用户是否在线的最佳方法是从`app/core/Mage/Adminhtml/Block/Customer/Edit/Tab/View.php`. 以下行取自该文件的不同部分。基本上，我们利用`Mage_Log_Model_Customer`和`Mage_Log_Model_Visitor`模型检查注销和上次访问时间。

```
$id = "<CUSTOMER_ID>";
// Here make your tests about the ID, if the user exists, etc...
$customerLog = Mage::getModel('log/customer')->loadByCustomer($id);
return !($customerLog->getLogoutAt() ||
    strtotime(now())-strtotime($customerLog->getLastVisitAt())>Mage_Log_Model_Visitor::getOnlineMinutesInterval()*60); 
```

# android - 不仅仅是应用程序中的数据库

> ID：13880028
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:55:31.993
> 
> 标签：android, sqlite

如何在一个应用程序中创建多个数据库？

这怎么可能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:02:54.803

只需创建 2 个数据库文件和 2 个[数据库打开助手](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)，每个打开一个不同的数据库文件。您不受 Android 中 DB 数量的限制。

# perl - Perl：如何将毫秒转换为时间戳或日期

> ID：13880035
> 
> 赞同：-2
> 
> 时间：2012-12-14T13:55:57.767
> 
> 标签：perl, date

我需要将时间以毫秒为单位转换为格式的日期：YYYY-mm-dd hh:mm:ss 请帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T13:59:13.223

“毫秒”不表示时间，它们表示持续时间。听起来你有一个 unix 纪元时间戳乘以 1000 加上毫秒。

```
use POSIX qw( strftime );
my $formatted = strftime("%Y-%m-%d %H:%M:%S", localtime($ts/1000)); 
```

或者`gmtime`

# javascript - Javascript 中的事件处理程序、闭包和垃圾回收

> ID：13880040
> 
> 赞同：23
> 
> 时间：2012-12-14T13:56:17.010
> 
> 标签：javascript, jquery, events, garbage-collection

我的应用程序还没有遇到内存泄漏，但我担心将来可能出现问题。我想知道是否做这样的事情：

```
SomeClass.prototype.someMethod= function() {
    var that= this
    this.$div2.click(function() {
        that.someMethod2();
    });
} 
```

假设 this.$div2 被附加到另一个 div this.$div1。如果我打电话

```
this.$div1.remove(); 
```

后来失去了我的 SomeClass 实例的引用 SomeClass 实例是否被垃圾收集了？那么 HTML 元素 this.$div2 呢？this.$div2 不会在 DOM 内，因为它附加到 this.$div1。

我问这个是因为 this.$div2 中的事件处理程序可能会保留对 HTML 元素 this.$div2 的引用，并且由于变量“that”，还会通过闭包保留对 SomeClass 实例的引用。

那么我应该关心正确删除所有事件和这样的 HTML 元素吗？或者只是删除“根”元素（this.$div1）就可以解决问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T20:35:11.643

> `this.$div2`附加到`this.$div1`. 如果我调用`this.$div1.remove();`并稍后丢失我的实例的引用，`SomeClass`该`SomeClass`实例是否会被垃圾收集？

是的，当所有对它的引用都丢失时——也包括那些通过事件处理程序的引用——实例可以被垃圾收集。

> 那么 HTML 元素`this.$div2`呢？`this.$div2`不会在 DOM 中，因为它附加到`this.$div1`.

它当前是否附加到 DOM 无关紧要。如果一些不可回收的对象引用`$div1`，它也可以访问其子节点`$div2`和那个事件处理程序，因此从处理程序引用的实例将不可回收。

> 我问这个是因为事件处理程序`this.$div2`可能保留对 HTML 元素的引用，并且由于变量“that”而通过闭包`this.$div2`保留对实例的引用。`SomeClass`

这是一个循环引用，*应该*由引擎很好地处理（当圆圈内的任何对象都没有从外部引用时，它可以被收集）。但是，（旧的？）Internet Explorer 在圆中涉及 DOM 对象时无法做到这一点。

出于这个原因，[`.remove`jQuery 方法](http://api.jquery.com/remove/)( [code](https://github.com/jquery/jquery/blob/1.9.1/src/manipulation.js#L161) ) 在内部调用了[(internal)`cleanData`方法](https://github.com/jquery/jquery/blob/1.9.1/src/manipulation.js#L744)，该方法分离了所有事件侦听器。

> 那么我应该关心正确删除所有事件和这样的 HTML 元素吗？或者只是删除“根”元素（this.$div1）就可以解决问题？

是的，调用`remove`jQuery 包装器会自动删除所有事件（从所有子元素中）和 DOM 节点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T20:52:09.347

> 我应该关心正确删除所有事件和这样的 HTML 元素吗？

最简洁的答案是不！至少在 99% 的情况下，这无关紧要，因为与网页使用的总内存相比，一个 DOM 元素使用的内存微不足道。

然而，释放不需要的对象所使用的内存总是一个好习惯，但你不能说 GC 肯定会释放元素使用的内存，因为垃圾收集完全取决于浏览器！理论上 GC 应该只在没有对 DOM 元素的引用时启动，至少[Chrome 是这样工作](https://developers.google.com/v8/design#garb_coll)的，但是在 JavaScript 这样的语言中，你没有明确告诉运行时你已经完成了对象，事情得到了JavaScript 中的混乱如此之快：一个函数可能会将对象传递给更多函数，该对象可能会作为另一个对象中的成员被保存，一个对象可能会通过闭包等方式被引用，所以这完全取决于浏览器如何以及收集什么！

在您的情况下，删除`div1`会释放 html 文档，并且该元素不会在视图中呈现，实际上 jQuery 的`remove`方法负责删除附加到元素的所有事件、扩展属性和子元素以及元素本身，但是您保留一个引用`div1`并`div2`在另一个对象中生成两个 DOM 元素 孤儿元素！删除 `SomeClass`实例变量会释放对 DOM 元素的所有引用，使它们成为垃圾收集的候选对象，但这里有一个棘手的`that`变量会导致 DOM 元素`SomeClass`通过 clusure 对实例进行引用！`Circular Reference`此问题在 IE中称为：

> 相互存储引用的 JavaScript 对象和 DOM 元素导致 Internet Explorer 的垃圾收集器不回收内存，从而导致内存泄漏

![在此处输入图像描述](../Images/6ac6dc369975e01e08300a8c0af9bcf1.png)

[你可以在这里读更多关于它的内容](http://msdn.microsoft.com/en-us/library/Bb250448)

这种特殊的泄漏主要是 IE<8 的历史意义，但打破循环链接的一个很好的例子是避免使用变量`that`，而是使用[代理](http://api.jquery.com/jQuery.proxy/)或[委托](http://api.jquery.com/delegate/)将事件处理程序的上下文更改为某些特定的上下文。

[ECMA 第 5 种绑定方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)在涉及 DOM 事件处理程序时退出有用的更改上下文，这是一个基于您的代码的简单处理程序，不使用变量闭包：

```
this.$div2.click((function() {
        this.someMethod2();
    }).bind(this)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:49:07.803

如果您将动态创建元素，则为它们分配事件。我认为您的代码不是这样做的好方法。你应该遵循这种方式：

对于固定元素，如果需要事件，请使用这两个函数；第一个在构造函数中调用，第二个在析构函数中调用。

```
on_Events: function() {
   $('your_form').on('event_name', {element_Selector}, callback_function)
},
off_Events: function() {
   $('your_form').off('event_name', {element_Selector}, callback_function)
} 
```

对于动态对象。在创建元素时添加事件并在销毁元素之前删除这些事件。

# mongodb - 通过 elemMatch 在 MongoDB 中排序

> ID：13880044
> 
> 赞同：0
> 
> 时间：2012-12-14T13:56:23.490
> 
> 标签：mongodb

有没有一种基于 MongoDB 的排序方法`$elemMatch`？例如，我有如下文件：

```
{
    'user': ObjectId('fsdfsdf'),
    ...
    'array_of_things': [
        {
            'attribute_1': ObjectId('sdfsdfsd'),
            'attribute_2': ObjectId('sdfsfsdf'),
            'value': 30000
        },
        {
            'attribute_1': ObjectId('dfdfgfdg'),
            'attribute_2': ObjectId('gdfgdfgd'),
            'value': 100
        },
        {
            'attribute_1': ObjectId('mbnmbbmb'),
            'attribute_2': ObjectId('mbnmbnmb'),
            'value': 2000
        },
        ...
    ]
} 
```

我需要能够根据`array_of_things`字段内的匹配元素来查询这些数据（这很简单`$elemMatch`）。出现问题是因为我还需要能够按与某个属性匹配的值（升序或降序）进行排序。例如，查询可能是：

```
{
    'user': ObjectId('fsdfsdf'),
    'array_of_things': {
        $elemMatch: {
            'attribute_1': ObjectId('dfdfgfdg'),
            'value': {
                $gt: 1
            }
        }
    }
} 
```

仅排序`value`（例如`sort({ 'array_of_things.value': -1 })`，可以预见的是，仅对任何数组元素中的所有值进行排序，而不是`attribute_1`首先匹配。

有没有办法做到这一点？

抱歉，如果这是一个已经提出的问题，但我似乎无法找到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:40:07.370

目前，标准查询语言无法做到这一点。您可以使用聚合框架以（可能）一些性能损失来实现它。

# generics - 用于内联编辑的单独工具栏 CKEditor 4

> ID：13880048
> 
> 赞同：1
> 
> 时间：2012-12-14T13:56:30.117
> 
> 标签：generics, ckeditor, toolbar, shared, spaces

我有多个**CKEditor 4**实例运行内联编辑 ( `contenteditable="true"`)。默认情况下，每次我编辑时都会打开实例旁边的工具栏。

预期的功能是**在特定位置有一个通用工具栏**而不使用 css 定位，因此控制正在编辑的活动实例。（理想情况下，通过设置工具栏的目标父级）

我已阅读有关**共享空间**的信息，但我发现它们仅适用于*CKEditor 3*，如此处所述[CKEditor 将工具栏与编辑器分开](https://stackoverflow.com/questions/4567164/ckeditor-separate-the-toolbar-from-the-editor)

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:09:27.383

此功能在 CKEditor v4 中尚不可用。我们计划在 4.1 中实现它 - 这是票[http://dev.ckeditor.com/ticket/9387](http://dev.ckeditor.com/ticket/9387)。

# android - android使用MultipartEntity上传图片

> ID：13880051
> 
> 赞同：1
> 
> 时间：2012-12-14T13:56:41.240
> 
> 标签：android, upload, http-post, multipartentity

我正在尝试使用以下代码上传图片：

```
 HttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost(
                    "http://konsole-data.de/uploadtest/upload.php");

            MultipartEntity multiPart = new MultipartEntity();
            multiPart.addPart("picture", new FileBody(new File(path)));

            httpPost.setEntity(multiPart);
            try {
                HttpResponse res = httpClient.execute(httpPost);

                            Toast.makeText(getApplicationContext(),res.toString(),
                        Toast.LENGTH_LONG).show();
            } catch (ClientProtocolException e) {

                e.printStackTrace();
            } catch (IOException e) {

                e.printStackTrace();
            } 
```

path 是一个字符串，用于标识图像，如 /mnt/sdcard/DCIM/12712.jpg 连接有效，但没有图像上传到服务器，您可以在此处查看调试文件：http: [//konsole-data.de/uploadtest /data/20121214-144802-.dbg](http://konsole-data.de/uploadtest/data/20121214-144802-.dbg)
做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:04:34.223

您可能应该指定`HttpMultipartMode`文件的 , 和 MIME 类型（但我认为这不是必需的）：

```
MultipartEntity multipart = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

FileBody bin = new FileBody(new File(path), "image/jpeg");
multipart.addPart("picture", bin); 
```

**编辑：**

您还应该检查您是否使用了正确的路径。而不是将对象创建`File`为匿名内部类：

```
File file = new File(path);
if(file.exists()){
    FileBody bin = new FileBody(file, "image/jpeg");
    multipart.addPart("picture", bin);
} else {
    Log.w(YourClass.class.getSimpleName(), "File " + path + " doesn't exist!");
} 
```

# php - PHP - 从数组中输出特定的行

> ID：13880061
> 
> 赞同：0
> 
> 时间：2012-12-14T13:57:06.183
> 
> 标签：php, chargify

我正在使用表单来收款并使用 print_r，我可以在输出中看到以下内容...

```
[customer] => ChargifyCustomer Object
    (
        [email] => test@aol.com
        [first_name] => John
        [last_name] => Doe
        [organization] => 
        [reference] => 
        [id] => 2588487
        [created_at] => 2012-12-14T08:50:45-05:00
        [updated_at] => 2012-12-14T08:50:45-05:00
    ) 
```

生成此输出的 PHP 如下所示...

```
try {
    $new_subscription = $subscription->create();
    if ($new_subscription != '') {
        // session_unset();
        echo '<pre>';
        print_r($new_subscription);
        echo '</pre>';
        foreach ($new_subscription as $item) {
            echo 'First Name' . $item->customer->first_name . '.';
        }
    }
} 
```

虽然每次我加载页面时，第一个名字都没有被回显。相反，它只是说“名字”。几次。

请帮助确定我的错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:04:22.507

您需要检查密钥：

```
foreach($new_subscription as $key => $item) {
    if($key == 'first_name') {
        echo "First Name: " . $item . '.';
    }
} 
```

但我不知道为什么你会做一个 foreach 因为 $new_subscription 不是一个对象数组。实际上你应该说：

```
echo "First Name: " . $new_subscription->first_name. '.'; 
```

# java - 扩展 AbstractEntity 带代码模型

> ID：13880062
> 
> 赞同：4
> 
> 时间：2012-12-14T13:57:08.690
> 
> 标签：java, sun-codemodel

有谁知道如何用 CodeModel 生成这个？

```
...
public class MyClass extends AbstractEntity<MyClass> { 
... 
```

我已经有类似的东西了..几乎在那里..

```
JCodeModel jCodeModel = new JCodeModel();
...
JDefinedClass jClass = jPackage._class("MyClass");
jClass._extends(AbstractEntity.class); 
```

我怎么做这个

```
extends AbstractEntity 
```

进入

```
extends AbstractEntity<MyClass> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:27:49.210

我知道了..

```
JClass jClassExtends = jCodeModel.ref(AbstractEntity.class).narrow(jClass);
jClass._extends(jClassExtends); 
```

结果是：

```
public class MyClass extends AbstractEntity<MyClass> 
```

# java - 编译警告是否指向糟糕的设计？

> ID：13880071
> 
> 赞同：0
> 
> 时间：2012-12-14T13:58:06.533
> 
> 标签：java, strategy-pattern

> **可能重复：**
> [如何抑制特定函数的 Java 编译器警告](https://stackoverflow.com/questions/593996/how-to-suppress-java-compiler-warnings-for-specific-functions)

我想使用地图来实现策略模式。但是，我找不到一种可以很好地与泛型配合使用的方法。是否可以在不更改功能的情况下从以下代码中删除编译警告？

```
import java.util.HashMap;
import java.util.Map;

interface Event
{
}

interface EventProcessor<T extends Event>
{
    public void handleEvent(T event);
}

class EventA implements Event
{
}

class EventB implements Event
{
}

class ProcessorA implements EventProcessor<EventA>
{
    @Override
    public void handleEvent(final EventA event)
    {
        System.out.println("Handling event type A");
    }
}

class ProcessorB implements EventProcessor<EventB>
{
    @Override
    public void handleEvent(final EventB event)
    {
        System.out.println("Handling event type B");
    }
}

class GenericEventProcessor
{
    Map<Class<? extends Event>, EventProcessor> map = new HashMap<Class<? extends Event>, EventProcessor>();

    public GenericEventProcessor()
    {
        map.put(EventA.class, new ProcessorA());
        map.put(EventB.class, new ProcessorB());
    }

    public void processEvent(Event event)
    {
        EventProcessor eventProcessor = map.get(event.getClass());

        //Java Warning: GenericEventProcessorTest.java uses unchecked or unsafe operations.
        eventProcessor.handleEvent(event);
    }
}

public class GenericEventProcessorTest
{
    public static void main(String[] args)
    {
        EventA eventA = new EventA();
        EventB eventB = new EventB();

        GenericEventProcessor eventProcessor = new GenericEventProcessor();
        eventProcessor.processEvent(eventA);
        eventProcessor.processEvent(eventB);
    }
} 
```

**编辑：**我应该说，不使用 SuppressWarnings！这通常告诉我我的设计有问题，我想知道这里是否是这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:02:08.060

目前在我看来，地图正在取代多态性，实际上对应于类型检查：

```
if (event instanceof EventA) {
}
else if (event instanceof EventB) {
}
// etc... 
```

既然您使用事件的类型来确定相应的事件处理器，然后用事件调用它，为什么不使用访问者或双重调度模式：

```
event.getEventProcessor().processEvent(event); 
```

这样每个事件都可以通过多态性了解与它对应的事件处理器。以上显然可以简单地折叠为：

```
event.process(); 
```

因此，它的复杂性要小得多，而且您不必为每种新事件类型填充地图。我注意到您正在实施策略模式，但这目前看起来很大程度上是静态的并且与每种类型相关。我希望策略模式可以在类型以外的东西上替换不同的实现*（*例如，一些配置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:00:19.073

是的，添加

```
@SuppressWarnings("unchecked") 
```

到方法。

问题是编译器无法确定操作是否安全。

# django - 在 models.py 或 manager.py 中添加一个函数

> ID：13880072
> 
> 赞同：0
> 
> 时间：2012-12-14T13:58:09.820
> 
> 标签：django

我想向新注册用户发送激活链接。我应该在我的models.py 或managers.py 中编写我的函数吗？

即使在阅读了文档之后，我也总是很困惑知道函数放在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:34:31.483

它们、模型和管理器都与应用程序数据无关。发送电子邮件与您的应用程序的逻辑相关：操作、决策、答案……因此您应该在[视图](https://docs.djangoproject.com/en/dev/topics/http/views/)中执行此操作。

如果您需要节省时间，您可以按照@karthikr 向您建议的方式使用 Django 注册，这个应用程序是实现此目标的一个很好的包装器。

我假设您需要在用户注册的那一刻发送链接，但如果您想在其他时候执行此操作，您可以使用计划任务：django cron、外部 python 进程或...；这取决于你：你的网站，你的应用程序的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:09:07.963

[该博客](http://mirobetm.blogspot.com/2007/04/django-model-managers-do-not-repeat.html)可以帮助您更好地了解管理器的使用。

我会将激活链接放在管理器中，因为管理它周围的各种活动会更容易——重新发送激活链接、验证等。它也可以用模型来完成，但是管理器使它更加模块化。

[Django Registration](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cdef30dc0a91ed1968be17bb1e60da4/registration?at=default)被广泛用于注册——你也可以看到它是如何在那里实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T11:12:48.567

是的，您可以在 models.py 中编写自定义函数，但不确定 manage.py 。

我在 models.py 中使用了信号方法来提供邮件服务。

# visual-c++ - 如何从 CRect 中的数据创建 CBitmap 对象？

> ID：13880074
> 
> 赞同：1
> 
> 时间：2012-12-14T13:58:16.763
> 
> 标签：visual-c++, mfc, gdi+, gdi

无论如何如何在 CRect 中获取数据？

有API吗？

如果我可以获得相应的 DC，那么我可以执行以下操作：

```
memDC.CreateCompatibleDC(pRectDC);
memDC.SelectObject(pBm);
memDC.BitBlt(rect.left, rect.top, rect.Width(), rect.Height(), pRectDC, rect.left, rect.top, SRCCOPY); 
```

但是，我不知道如何获得 DC。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:52:39.183

CRect 没有 DC - 它是矩形的抽象表示。在您正在使用的窗口上使用 GetDC() 来获取 DC。

CRect 中还没有任何数据 - 它只是一对 4 long 存储角的 X 和 Y 坐标。只有当您使用 CDC 的 DrawRect() 时，CRect 中的数据才会用于在 DC 的位图上设置一些值。

# iphone - 限制 UITableView 的单元格中的字符长度

> ID：13880075
> 
> 赞同：1
> 
> 时间：2012-12-14T13:58:21.783
> 
> 标签：iphone, objective-c

我必须限制 UITableView 的单元格文本的字符数量或长度。因为每个单元格显示一个很长很长的长文本，我必须将这些文本限制为例如 140 个字符。因为它会导致缓慢的滚动和内存问题等等......

我正在从 SQL DB 加载单元格文本：

```
 appClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    readerClass = (Reader *)[appClass.wordList objectAtIndex:indexPath.row];

    cell.textLabel.text=readerClass.Name; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:03:11.800

利用：

```
cell.textLabel.text = (readerClass.Name.length > 140 ? [readerClass.Name substringToIndex:140] : readerClass.Name); 
```

这将在`readerClass.Name`少于 140 个字符时设置完整，如果它较长则设置前 140 个字符。

另外，我假设您在 UITableViewCell 中有一个 UILabel，它会`...`在文本被截断时自动附加（省略号）。如果没有，您可以自己添加省略号：

```
cell.textLabel.text = (readerClass.Name.length > 140 ? [[readerClass.Name substringToIndex:137] stringByAppendingString:@"..."] : readerClass.Name); 
```

* * *

只是添加到这个问题，因为您只询问了第一行：

```
// get first line break range
NSRange rangeOfFirstLineBreak = [cell.textLabel.text rangeOfCharacterFromSet:[NSCharacterSet newlineCharacterSet]];
// check if first line break range was found
if (rangeOfFirstLineBreak.location == NSNotFound) {
    // if it was, extract the first line only and update the cell text
    cell.textLabel.text = [cell.textLabel.text substringToIndex:rangeOfFirstLineBreak.location];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:04:00.157

这应该有效。它还添加了“...”

```
NSString *name = readerClass.Name;

if( name.length > 140 ){
    name = [place substringToIndex:140];
    name = [NSString stringWithFormat:@"%@...", name];
}

cell.textLabel.text= name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:02:54.897

像这样的东西：

```
NSRange stringRange = {0, MIN([readerClass.Name length], 140)};
cell.textLabel.text = [readerClass.Name substringWithRange:stringRange]; 
```

# python - LPTHW 前。45、如何从另一个模块中的类返回函数？

> ID：13880076
> 
> 赞同：0
> 
> 时间：2012-12-14T13:58:32.000
> 
> 标签：python, class, module

试图在 Zed Shaw 的 LPTHW 中为 ex 45 制作我自己的 RPG 角色生成器。部分任务是为程序的每个“房间”创建一个新课程，例如`WelcomeScreen`或`ChooseMutations`。

这是主程序。

```
import rooms

class Program(object):

    def __init__(self, start):
        self.start = start

    def run(self):
        next_room_name = self.start

        while True:
            room = getattr(self, next_room_name)
            next_room_name = room()

x = rooms.WelcomeRoom()

Program(x.hello_user()) 
```

这是`rooms`它试图从中提取内容的文件。

```
class WelcomeRoom(object):

    def __init__(self):
        pass

    def hello_user(self):
        print '*' * 79
        print '\n'
        print '\t\tWelcome to the'
        print '\t\tMetamorphosis Alpha Character & Random Encounter Generator'
        print '\t\tProgrammed poorly by Raymond Weiss'
        print '\n'
        print '*' * 79
        raw_input('Please press enter to continue')
        return 'get_name'

    def get_name(self):

        name = raw_input('Hello, whats your name?', 
                 '\n',
                 ':> ') 
```

但是当我在 python 中运行主程序时，它只是注销而不是`get_name()`从`rooms`. 输出发布在下面。

```
Raymond-Weisss-MacBook-Pro:macgre Raylug$ python macgre.py
*******************************************************************************

        Welcome to the
        Metamorphosis Alpha Character & Random Encounter Generator
        Programmed poorly by Raymond Weiss

*******************************************************************************
Please press enter to continue
Raymond-Weisss-MacBook-Pro:macgre Raylug$ 
```

如果我的问题标题不是我想要问的，我提前道歉，作为一个新手，有时很难不知道到底要问什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:05:05.223

您返回的是字符串，而不是函数（或函数结果）。你可能想要这样的东西：

```
def hello_user(self):
    return self.get_name 
```

或者

```
def hello_user(self):
    return self.get_name() 
```

根据您的程序，我认为您可能想要第二个。区别在于第一个返回`get_name` **函数**，而第二个返回函数的**结果**。`get_name`

# php - 在 Mysql 查询末尾添加项目 ID

> ID：13880077
> 
> 赞同：1
> 
> 时间：2012-12-14T13:58:33.553
> 
> 标签：php, mysql, sql

我有一个复杂的 MYSQL 查询，我从多个数据源运行，可以根据请求进行排序（所以记录 id 没有多大帮助）。

我想在每次运行查询时在数据完成时添加一个唯一 ID 列，以便我可以启用数据的分页功能。

如果我在数据库级别执行此操作，我可以使用`id INTEGER AUTO_INCREMENT`，但这是关于每次运行查询时动态添加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:00:00.677

你可以这样做：

```
SELECT
  *, (@rownum := @rownum + 1) rank
FROM YourcomplexQuery, (SELECT @rownum := 0) t; 
```

但是，您可以使用 MySQL 内置函数`LIMIT`：

```
SELECT --
FROM Yourtable
ORDER BY SomeField
LIMIt 0, n; 
```

# c# - 对象的值是什么，什么时候可以为空？

> ID：13880083
> 
> 赞同：1
> 
> 时间：2012-12-14T13:58:57.307
> 
> 标签：c#, arrays, object, instance

我开始了解对象的数组，但遇到了一些困难。我找到了一个类`Person`和类的简单代码， `PersonArray`PersonArray 类中的一个方法是这样的（m_Arr 是一个 Person 数组）：

```
public void Add(Person p)
        {
            if (p == null)
                Console.WriteLine("Error, param can't be null");
            if (m_Arr.Length <= m_Counter)
            {
                Array.Resize(ref m_Arr, m_Arr.Length + 10);
            }
            m_Arr[m_Counter++] = p;
        } 
```

我的问题是 p 什么时候可以`null`？我的意思是对象可以具有哪些值，因此它不会为空？另外，我还有另一个问题 - m_Counter 变量（它是一个计数器）未初始化，但它的工作没有任何问题。为什么没问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:03:43.730

每个变量在声明时都会使用默认值进行初始化（C# 规范中的第 5.2 节），因为 m_counter 是一个 int，所以其默认值为 0（第 4.1.2 节）。
编译器不会抱怨，因为 m_counter 被认为是在创建新实例后立即分配的（第 5.3.1 节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:05:17.320

如果你写， p 可能为空：

```
Person p = null; 
```

m_Counter 似乎是类范围内的一个变量，因此可以在代码的另一部分对其进行初始化，例如：

```
class SomeClass
{
    static int m_Counter = 0;
    static Person[] m_Arr = new Person[] { };

    public void Add(Person p)
    {
        if (p == null)
            Console.WriteLine("Error, param can't be null");
        if (m_Arr.Length <= m_Counter)
        {
            Array.Resize(ref m_Arr, m_Arr.Length + 10);
        }
        m_Arr[m_Counter++] = p;
    }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:01:58.640

如果一个对象没有被实例化，那么它将是 NULL。当实例化时，它将是一个人的实例 so `p = new Person()`。您也可以将其设置回 NULL 像`p = null;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T14:02:14.673

m_Counter 是一个本机类型，将具有它的默认值。对于整数，它将为零

p 可以为 null 到不为 null 你应该像这样初始化它

```
Person p = new Person(); 
```

在调用 Add 方法之前

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T14:00:41.720

要使 p 不为 null，它必须已实例化，例如

`var p = new Person();`

您不能为它设置任何值以`p`使其不是，必须`null`先对其进行实例化，然后才能对其设置值。

至于`m_counter`，我猜是整数数据类型，所以默认为 0。

# django - __unicode__ 与 FK 信息一起返回

> ID：13880091
> 
> 赞同：0
> 
> 时间：2012-12-14T13:59:35.800
> 
> 标签：django, django-models

我懂了：

```
class CoworkersContractedPlans(models.Model):
    start_date = models.DateField(blank=True, null=True)
    end_date = models.DateField(blank=True, null=True)
    coworker = models.ManyToManyField(Coworkers)
    service = models.ManyToManyField(Services)
    status = models.ForeignKey(Status)

    class Meta:

        verbose_name = 'Contracted Plans'
        verbose_name_plural = 'Contracted Plans'

    def __unicode__(self):
        return self.coworker.first_name 
```

这里我要返回同事的名字，什么是外键。在我的管理员上，它显示为“（无）”，但它已实现。

```
def __unicode__(self):
    return self.coworker.first_name 
```

有人能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:02:01.337

哪个同事的名字？你的关系是`ManyToMany`，所以你有很多同事的链接。

您可以尝试`return self.coworker.all()[0].first_name`获取第一个同事的姓名。

# game-engine - 在 UDK 中启动 3DMAX 动画

> ID：13880097
> 
> 赞同：0
> 
> 时间：2012-12-14T13:59:58.523
> 
> 标签：game-engine, 3dsmax

我用骨头在 3dmax 中制作了一个形状，然后给它一个动画。我将其导出并导入到 UDK。我希望当我在 UDK 中拍摄到那个形状时，我的动画开始起作用。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:37:27.800

我现在没有UDK，所以不能查。但我记得，你在 UDK 中有触发器。您可以使用它来检测与武器子弹（TakeDamage）的碰撞并启动动画。有一个链接如何做到这一点：

[UDK 论坛](http://forums.epicgames.com/threads/873138-Kismet-Trigger-Using-Weapons)

如果您不太清楚，请尝试在此论坛上找到更多内容。

# java - Struts2 s：复选框标签未显示

> ID：13880103
> 
> 赞同：1
> 
> 时间：2012-12-14T14:00:10.510
> 
> 标签：java, jsp, struts2, weblogic

在最奇怪的情况下，我的复选框标签不会出现在我的 Struts2 JSP 中。我有一系列复选框，都遵循相同的格式，但没有出现任何标签。这是一个示例声明：

```
<s:checkbox name="chronCheck1" label="New Sales"/> 
```

这是最基本的任务之一，但显然缺少一些东西。我正在通过 Weblogic 10 运行 Struts2 版本 2.2.1。不太确定还需要什么来帮助排除故障。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:05:44.920

您可能`simple`正在您的 JSP 中使用主题。使用`simple`主题，您必须自己为输入创建标签。

关于`simple`文档中的主题：

> 例如，textfield 标记在没有标签、验证、错误报告或任何其他格式或功能的情况下呈现 HTML 标记。

请参阅[http://struts.apache.org/2.x/docs/themes-and-templates.html](http://struts.apache.org/2.x/docs/themes-and-templates.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T13:51:22.117

s:checkbox从官方文档看不是很清楚，但是在我的实验中，如果不指定主题，默认主题是不支持label的。当我将主题更改为 *xhtml*或*css_xhtml*时，它成功显示了标签。然而，这些主题还添加了额外的标记和 css 类，因此您可能需要额外的 css 样式和指定**标签位置**（顶部、左侧、右侧或底部）来实现您想要的外观和感觉。另一种选择是创建自己的主题并应用它。请参阅此文档：

[https://struts.apache.org/docs/struts-2-themes.html](https://struts.apache.org/docs/struts-2-themes.html)

# sql - 我该怎么做这个选择查询

> ID：13880108
> 
> 赞同：1
> 
> 时间：2012-12-14T14:00:22.330
> 
> 标签：sql

我在我的 SQL Server 中有一个名为 FavoriteUsers 的表，其中包含用户列表和一个名为 Users 的表，其中包含所有用户。

在我的`ASPX`页面中，我的`TextBox`用户可以将用户 ID 放入我的`GridView`.

**这个怎么运作**

默认情况下，我用我的 FavoriteUsers 表的所有数据填充我的 GridView，如果我的系统的用户在`textbox`字段中放置一些用户代码并单击我的按钮来查找这些用户，我将使用 FavoriteUsers 和他放在`TextBox`来自表的字段上的用户`Users`。

我该怎么做这个`SELECT`查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:05:07.267

```
select * from FavoriteUsers
UNION
select * from Users 
Where userid = 'TextBox.text' 
```

当然你不能在那里使用 TextBox.text 。但是你只需要查询，所以你明白了。

**注意**：UNION 将忽略来自用户的任何记录，这些记录已经存在于 FavoriteUsers 中。所以你不会有重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:04:42.093

获取所有喜欢的用户以及用户名与输入到文本框中的用户名匹配的用户：

```
SELECT Users.*
FROM Users
  LEFT JOIN FavoriteUsers ON Users.UserID = FavoriteUsers.UserID
WHERE (FavoriteUsers.UserID IS NOT NULL) OR (Users.Username = @Username) 
```

# javascript - 使主体 100% 浏览器窗口的高度

> ID：13880113
> 
> 赞同：3
> 
> 时间：2012-12-14T14:00:33.560
> 
> 标签：javascript, html, css

我有这个结构：

```
<body>

    <div id="header">..</div>

    <div id="content">..</div>

    <div id="footer">..</div>

</body> 
```

这个CSS：

身体{颜色：白色；字体系列：“播放”，无衬线；最大宽度：2560px；边距：0 自动；最小宽度：960px；高度：100%；填充：0；}

```
#header {
    position: relative;
    overflow: hidden;
    margin: 0 auto;
    min-width: 960px;
    height: 95px;
    background-image: url("../images/header-bg.png");
}

#content {
    margin: 0 auto;
    position: relative;
    max-width: 1600px;
    height:100%;
    overflow:hidden;
}

#footer {
  background-color: #009EDB;
  background-image: url("../images/footer-bg.png");
  bottom: 0;
  height: 30px;
  margin: 0;
  position: relative;
  width: 100%;

}​ 
```

但不是`body`浏览器窗口的 100% 高度。我的问题是什么？谢谢。

[jsFiddle](http://jsfiddle.net/Rochefort/xkTpV/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T14:02:46.440

添加：

```
html {
    height: 100%;
} 
```

到你的 CSS。

在这里查看更新 - [http://jsfiddle.net/xkTpV/4/](http://jsfiddle.net/xkTpV/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:15:52.530

为了使它工作。您必须让父母`<html>`和孩子`<body>`都拥有 100% 的高度。

```
html, body {
    height:100%; /*both html and body*/
}
body {
    margin: 0; /*reset default margin*/
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-21T19:56:27.020

尝试高度：100vh；

```
body { color: white; font-family: 'Play', sans-serif; max-width: 2560px; margin: 0; min-width: 960px; height:100vh; padding:0; } 
```

# java - 如何克服 JpCap 问题？

> ID：13880118
> 
> 赞同：2
> 
> 时间：2012-12-14T14:00:45.163
> 
> 标签：java, exception, error-handling, jpcap

我有一个使用 jpcap 捕获网络 IP 地址的程序。但我收到这个错误

// 线程“main”中的异常 java.lang.UnsatisfiedLinkError: jpcap.JpcapCaptor.getDeviceList()[Ljpcap/NetworkInterface; 在 jpcap.JpcapCaptor.getDeviceList(Native Method) 在 example.Main.main(Main.java:25)//

我的程序

```
 package example;

        /**
         *
      * @author Administrator
      */
      import java.net.Inet4Address;
    import java.net.InetAddress;
   import java.util.Arrays;
  import java.io.IOException;
  import java.io.*;
  import java.util.Scanner;
 import jpcap.*;
 import jpcap.packet.*;

 public class Main{
public static void main(String[] args) throws IOException{

  //Obtain the list of network interfaces
 NetworkInterface[] devices = JpcapCaptor.getDeviceList();

//for each network interface
 for (int i = 0; i < devices.length; i++) {/ /print out its name and description
System.out.println(i+": "+devices[i].name + "(" + devices[i].description+")");

 //print out its datalink name and description
System.out.println(" datalink: "+devices[i].datalink_name + "(" +   devices[i].datalink_description+")");

 //print out its MAC address
   System.out.print(" MAC address:");
   for (byte b : devices[i].mac_address)
  System.out.print(Integer.toHexString(b&0xff) + ":");
   System.out.println();

  //print out its IP address, subnet mask and broadcast address
    for (NetworkInterfaceAddress a : devices[i].addresses)
   System.out.println(" address:"+a.address + " " + a.subnet + " "+ a.broadcast);
   }

   //NetworkInterface[] devices = JpcapCaptor.getDeviceList();
   int index =1; // set index of the interface that you want to open.

    //Open an interface with openDevice(NetworkInterface intrface, int snaplen,           boolean promics, int to_ms)
    final JpcapCaptor captor=JpcapCaptor.openDevice(devices[index], 65535, false, 20);

  //JpcapCaptor captor=JpcapCaptor.openDevice(device[1], 65535, false, 20);

  //call processPacket() to let Jpcap call PacketPrinter.receivePacket() for every packet capture.
   //captor.processPacket(10,new PacketPrinter());
  //System.out.println(packet);
//captor.close();

      }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:54:07.483

首先，您需要使用 Java 32 位版本。安装它，然后将 jpcap dll 复制到 bin 文件夹中。并将 jpcap jar 复制到 lib/ext 文件夹中。

如果使用 Eclipse，请确保将已安装 JRE 的设置定义为指向 32 位版本，并且您的 java 项目使用默认工作区。然后它应该自动拾取所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:28:41.600

正如javadoc所说

> 如果 Java 虚拟机找不到声明为本地的方法的适当本地语言定义，则抛出此异常。

我猜它找不到它的本机库。您是否有 PATH 环境变量指定的其中一个可用的 jpcap.dll 文件？

# php - 这种类型的mysql搜索有效吗，要不要改？对多个表/不同字段使用 UNION

> ID：13880123
> 
> 赞同：0
> 
> 时间：2012-12-14T14:01:09.153
> 
> 标签：php, mysql

我正在开发一个网站搜索。我有多个列和不同的字段，如下所示：

1.  **tmp_auction_auto**

    id 订单 类别 制造商 型号 价格 price_type 位置 年份 run_type 门 安全气囊 齿轮发动机 马力气缸 驱动类型 燃油颜色 abs 电子窗口 climatcontrol 磁盘 舱口板 电脑警报 右转向 turbo parkcontrol 调节器 皮革沙龙 导航 中控锁 椅子暖水力学 无价格 租金交换 海关 清关状态 其他联系方式

2.  **tmp_auction_estate** id 订单类型 交易价格 price_type price_sqm noprice 城市地址 面积 高度 维修条件 项目目的地 土地 阳台 mansard 会议楼梯_总楼梯 房间 卧室 阳台 sanitary_arr 凉廊 壁炉 空调 车库 停车场 土地_目的地建筑物 distance_central_street distance_tbilisi 储藏室 按摩浴缸 浴室 淋浴 桑拿 家具 技术 电话 互联网 发电机 游泳池 商务中心 吃 网络库存衣柜电梯燃气热水加热对讲有线电视报警系统入口安全窗口守卫安全双工三重卫星厨房陈列柜土地_铁路土地_电力土地_燃气土地_水土地_排水状况其他联系方式

3.  **tmp_auction_other** id 订单标题 price price_type noprice info 联系方式

4.  **tmp_branch** id lang 标题内容 xy
5.  **tmp_comments** id reply_id 路径 用户名 电子邮件标题 内容 喜欢 不喜欢 时间 管理员
6.  **tmp_news** id lang 标题 内容 日期

7.  **tmp_pages** id lang 标题 内容日期

8.  **tmp_presentation** id lang 标题顺序

我想知道如何进行搜索，最后我做了以下代码：

```
$key = 'a';

$sql = "
SELECT `id`,CONCAT('pages') as `table`,`title` as `title`,`content` as `content` FROM `tmp_pages` WHERE `title` LIKE '%".$key."%' OR `content` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('branches') as `table`,`title` as `title`,`content` as `content` FROM `tmp_branch` WHERE `title` LIKE '%".$key."%' OR `content` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('auction_auto') as `table`,`manufacturer` as `title`,CONCAT(`manufacturer`,' ',`model`,' / ',`price`,' ',`price_type`) as `content` FROM `tmp_auction_auto` WHERE `manufacturer` LIKE '%".$key."%' OR `model` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('auction_estate') as `table`,CONCAT(`city`,' ',`type`) as `title`,CONCAT(`city`,' ',`address`,' / ',`price`,' ',`price_type`) as `content` FROM `tmp_auction_estate` WHERE `other` LIKE '%".$key."%' OR `city` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('auction_other') as `table`,`title` as `title`,CONCAT(`title`,' ',' / ',`price`,' ',`price_type`) as `content` FROM `tmp_auction_other` WHERE `info` LIKE '%".$key."%' OR `title` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('presentation') as `table`,`title` as `title`,`title` as `contact` FROM `tmp_presentation` WHERE `title` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('news') as `table`,`title` as `title`,`content` as `content` FROM `tmp_news` WHERE `title` LIKE '%".$key."%' OR `content` LIKE '%".$key."%'
UNION
SELECT `id`,CONCAT('comments') as `comments`,`title` as `title`,`content` as `content` FROM `tmp_comments` WHERE `title` LIKE '%".$key."%' OR `content` LIKE '%".$key."%'
"; 
```

作为这里的一个缺点，我看到脚本搜索数据的方式存在一个现有的顺序，我的意思是如果有人搜索`new office`现有的`tmp.pages`将首先出现，而不是`tmp.news`哪个更可能是相关的。

我有一个问题，这种方法可以吗？由于某种原因我不喜欢它，也许是因为我知道有更好的选择，但我仍然需要你的意见，我应该这样吗？也许有人会告诉我更好的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:35:12.597

如果我是你，我可能会建议用户选择他们想要查看的区域的复选框。我也会给表格一定的重要性等级。假设您有一组重要的表格，如果找到任何结果，则应首先显示这些表格。例如auction_auto、auction_estate、auction_other。然后是其余的（或如你所愿）。

因此，如果有人想寻找新办公室，他们会检查分支机构、房地产、其他（示例），并且由于auction_estate 的排名更高，因此这些结果将是第一位的。

对于未检查的表，您可以运行单独的查询，显示“我们在新闻中找到 (xxx) 结果”等等。

我为什么要这样做？

就我个人而言，我喜欢有可能选择我想要执行搜索的网站部分。如果某人太懒惰，他们不会勾选方框 - 搜索将像您现在一样是全球性的。我只是认为引入这样的功能可能是有益的。

谁不喜欢一些权力？即使它只是页面上的搜索引擎！

# javascript - 覆盖现有的 onkeydown 函数

> ID：13880126
> 
> 赞同：6
> 
> 时间：2012-12-14T14:01:21.143
> 
> 标签：javascript, google-chrome-extension, overriding, onkeydown

我的扩展程序会检查在加载的任何网站上输入的每个输入。

我所做的是我考虑每一个 onkeydown 并在它有一些价值时对其进行操作。

我的后台 js 文件包含以下内容：

```
document.onkeydown = returnKey; 

function returnKey(evt) {   
    var evt  = (evt) ? evt : ((event) ? event : null);
    var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);  
    if ( node.value == 'fi' ) { evt.srcElement.value = "??"; }  
} 
```

我的问题是当我的网站在其 innerHTML 网页中已经包含 onkeydown 函数时。

例如：

取自facebook主页：

```
<textarea class="uiTextareaAutogrow input" onkeydown="Bootloader.loadComponents([&quot;control-textarea&quot;], function() { TextAreaControl.getInstance(this) }.bind(this)); 
```

在切换`node.value == 'fi'`？？没有执行，因为他们的`onkeydown="Bootloader`...在我的 . 之前运行`document.onkeydown`。

如何在执行 onkeydown 之前使我的函数运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T14:37:06.140

而不是`document.onkeydown = returnKey;`，使用

```
document.addEventListener('keydown', returnKey, true); 
```

这一行最重要的部分是第三个参数。当该参数的值为 时，在捕获阶段触发事件监听器，使用或`true`无法阻止。`event.preventDefault();``event.stopPropagation();`

# asp.net - ASP.NET 中的缓存控制标头不输出 max-age

> ID：13880128
> 
> 赞同：4
> 
> 时间：2012-12-14T14:01:40.603
> 
> 标签：asp.net, .net, asp.net-mvc, http-headers, cache-control

我有这个代码：

```
 context.HttpContext.Response.Cache.SetCacheability(HttpCacheability.Public);
 context.HttpContext.Response.Cache.SetMaxAge(TimeSpan.FromHours(24)); 
```

回应是这样的：

```
Status Code: 200
Date: Fri, 14 Dec 2012 13:56:41 GMT
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Content-Length: 38436
X-AspNetMvc-Version: 4.0
Server: Microsoft-IIS/8.0
Content-Type: application/rss+xml; charset=utf-8
Cache-Control: public
X-SourceFiles: =?UTF-8?B?QzpcUHJvamVjdHNcVGVzdFxtYW5nb21pbnQucHVibGljXHNyY1xNYW5nb21pbnQuUHVibGljLldlYlxibG9nXHJzcw==?= 
```

为什么 Cache-Control 上没有定义 max-age？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T20:08:31.487

我遇到了同样的问题，这让我发疯了。解决方案是先添加这一行：

```
context.HttpContext.Response.Cache.SetSlidingExpiration(true); 
```

# php - 在挂钩 wordpress 中确定主页

> ID：13880129
> 
> 赞同：0
> 
> 时间：2012-12-14T14:01:42.183
> 
> 标签：php, wordpress, hook

如果页面是主页，如何在 wordpress 挂钩中确定？

例如在我的 _functions.php

```
function hook_premiumpress_page_before(){
 if (homepage){
   echo "<h1>This is Home Page</h1>";
 }
} 
```

我不知道它的语法代码。

任何帮助将不胜感激，在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:07:01.353

```
// static page home
if(is_front_page()) {
  echo "<h1>This is Home Page</h1>";
}

// blogroll home page
if(is_home()) {
  echo "<h1>This is Home Page</h1>";
} 
```

[http://codex.wordpress.org/is_front_page](http://codex.wordpress.org/is_front_page)
[http://codex.wordpress.org/is_home](http://codex.wordpress.org/is_home)

你也可以制作一个`front-page.php`或`home.php`
[模板逻辑](http://codex.wordpress.org/Template_Hierarchy#Visual_Overview)

# objective-c - Flurry 插页式广告不全屏

> ID：13880135
> 
> 赞同：0
> 
> 时间：2012-12-14T14:01:59.360
> 
> 标签：objective-c, ios, flurry

我正在尝试推出 Flurry 插页式广告，但广告总是显示一半的屏幕尺寸，其余部分被剪掉..我包括以下来源和屏幕截图：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:YES];
    searching = NO;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];
    internetReachable = [Reachability reachabilityForInternetConnection];
    [internetReachable startNotifier];
    [FlurryAds setAdDelegate:self];
    // We will show banner and interstitial integrations here.
        if ([PCFInAppPurchases boughtRemoveAds] == NO)  {
        if (![FlurryAds adReadyForSpace:@"Full Ad"]) [FlurryAds fetchAdForSpace:@"Full Ad" frame:self.view.frame size:FULLSCREEN];
        self.tableView.sectionHeaderHeight = 50;
        [self.tableView reloadData];
    }else{
        self.tableView.sectionHeaderHeight = 10;
        [self.tableView reloadData];

    }

-(void)someMethod {
//when I display it in some method
    if ([PCFInAppPurchases boughtRemoveAds] == NO) {
        if ([FlurryAds adReadyForSpace:@"Full Ad"]) {
        [self.navigationController.navigationBar setHidden:YES];
        [self.view setHidden:YES];
        [FlurryAds displayAdForSpace:@"Full Ad" onView:self.view];
    }
} 
```

![图1](../Images/6b90cca2342d5425868c0c462bd29530.png)

![IMG2](../Images/e627d94ae00cefcd6f0825f6c7df2e22.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:45:58.463

您能否提供有关 Flurry SDK 版本、设备名称和操作系统的更多详细信息，并将其发送至 support@flurry.com？（全面披露：我在 Flurry 的支持团队工作）

# objective-c - 在 Core Data 中复制 SQL 子查询

> ID：13880137
> 
> 赞同：0
> 
> 时间：2012-12-14T14:02:04.123
> 
> 标签：objective-c, core-data

我已经设法将自己与 Core Data 谓词联系在一起——可能是因为我试图在脑海中将 SQL 转换为 Core Data 概念......

我有两个`NSManagedObject`类以一对多的关系连接：

```
Customer <---->> Agreements

Customer  has-many  Agreements

Agreement has-one Customer 
```

该类`Agreement`有一个名为 的布尔属性`paymentRequired`。

我想要做的是检索所有具有`Customers`属性设置为.`Agreement``paymentRequired``true`

在 SQL 术语中，我认为这可以通过子查询来完成：

`select CUSTOMER.NAME from CUSTOMER where CUSTOMER.ID in (select distinct AGREEMENT.CUSTOMER from AGREEMENT where AGREEMENT.PAYMENTREQUIRED = 1)`

我`Agreements`从核心数据中检索带有标志集的 没有问题，但我正在努力获得不同的`Customers`.

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:07:53.483

```
[NSPredicate predicateWithFormat:@"ANY agreements.paymentRequired == 1"]; 
```

您可以在简短的[Predicate Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/predicates.html)中找到文档。在第一页（简介）上，您的问题有一个解决方案。我建议阅读它，以便最终设法从 SQL 习语中解脱出来。

# javascript - 在 x 和 y 之间而不是在 a 和 b 之间生成随机数的最佳方法

> ID：13880148
> 
> 赞同：3
> 
> 时间：2012-12-14T14:02:47.010
> 
> 标签：javascript, random, range

我有一个 1000x600 像素的画布。我想在画布外生成精灵（但分布均匀）。检索 (-500, -500) 和 (1500, 1100) 之间但不在 (0, 0) 和 (1000, 600) 之间的随机值的最佳方法是什么？我知道可以使用 while 循环来生成数字，直到它们在范围内，但这似乎是多余的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:07:33.057

如果你想生成一个介于 -500 和 1500 之间的数字，不包括 0 到 1000，你可以只生成一个介于 0 和 1000 之间的数字（0 - -500 + 1500 - 1000）。

如果数字小于 500，则减去 500；如果数字大于或等于 500，则加 500。

或者，更一般地说：

```
function randomInt(outerMin, outerMax, innerMin, innerMax)
{
    var usableRange = innerMin - outerMin + outerMax - innerMax,
    threshold = innerMin - outerMin,
    num = Math.floor(Math.random() * (usableRange + 1));

    if (num < threshold) {
        return num - threshold;
    } else {
        return num - threshold + innerMax;
    }
}

randomInt(-500, 1500, 0, 1000); 
```

对于二维点，您必须更有创意。首先，您生成两个位于禁止区域内的点，然后将这些值传播到好的区域：

```
function randomVector(outer, inner)
{
    var innerWidth = inner.right - inner.left,
    innerHeight = inner.bottom - inner.top,
    x = Math.floor(Math.random() * (innerWidth + 1)),
    y = Math.floor(Math.random() * (innerHeight + 1)),
    midx = Math.floor(innerWidth / 2),
    midy = Math.floor(innerHeight / 2);

    if (x < midx) { // left side of forbidden area, spread left
        x = x / midx * (inner.left - outer.left) - inner.left;
    } else { // right side of forbidden area, spread right
        x = (x - midx) / midx * (outer.right - inner.right) + inner.right;
    }

    if (y < midy) { // top side of forbidden area, spread top
        y = y / midy * (inner.top - outer.top) - inner.top;
    } else { // bottom side of forbidden area, spread bottom
        y = (y - midy) / midy * (outer.bottom - inner.bottom) + inner.bottom;
    }

    // at this point I'm not sure how to round them
    // but it probably should have happened one step above :)
    return {
        x: Math.floor(x),
        y: Math.floor(y)
    }
}

randomVector({
    left: -500,
    top: -500,
    right: 1500,
    bottom: 1100
 }, {
    left: 0,
    top: 0,
    right: 1000,
    bottom: 600
 }); 
```

**重要的**

这是有效的，因为您的“禁止”区域之外的区域在它们各自的维度上是相等的，即`padding-top == padding-bottom && padding-left == padding-right`.

如果这将不同，则分布不再均匀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:09:27.257

生成一个介于 0 到 1000 之间的随机数，如果超过 500，则添加 500（或分别为 600），如果不否定它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T14:16:17.950

您可以计算一组允许的矩形，而不是一组禁止的矩形。要在任何允许的矩形内获得随机位置，您首先选择一个随机矩形，然后在该选定矩形内选择一个随机位置。

当矩形的大小不相等时，您需要按面积加权，否则较小的矩形将比较大的矩形具有更高的密度（200x100 矩形需要是 10x20 矩形的 100 倍）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:07:28.587

只需生成 (0,0) 和 (1,1) 之间的那些数字，然后使用一些线性函数进行映射。

否则，将您希望随机坐标落入矩形的区域划分为矩形。假设您获得了 N 个这样的矩形。这些矩形中的每一个都可以通过将 (0,0) 和 (1,1) 之间的随机生成器的输出映射到该矩形来填充（这是一个线性映射）。

# ruby-on-rails - twitter-bootstrap dropdown-toggle 在显示上打开并且不切换

> ID：13880149
> 
> 赞同：0
> 
> 时间：2012-12-14T14:02:49.013
> 
> 标签：ruby-on-rails

我插入了一个测试切换按钮（从演示粘贴）

```
#menu1.dropdown
%a.dropdown-toggle{:'data-toggle' => "dropdown", :href => "#menu1"}
    Options
    %b.caret
%ul.dropdown-menu
    %li
        = link_to "Action", "#"
    %li
        = link_to "Another action", "#"
    %li
        = link_to "Something else here", "#"
    %li.divider
    %li
        = link_to "Separated link", "#" 
```

显示按钮，但所有选项都可见，根本没有切换

button-toggle.js 插件存在（签入资产），我已经添加到我的应用程序 js 文件中

```
$(document).ready ->
    $('.dropdown-toggle').dropdown() 
```

这很奇怪，因为在我的页面顶部，在导航栏中，我已经有一个下拉按钮来选择网站语言......而且这个工作正常......（同时显示语言和标志）

```
.btn-group{:style => "margin-top: 4px; float:right;"}
%a.btn{:'data-toggle' => "dropdown", :href => "#", :id => "babLocaleSelect"}
    %span.babFlag{:class => "babFlag-#{I18n.locale}"}= I18n.locale.to_s
    = I18n.t(I18n.locale)

%a.btn.dropdown-toggle{:'data-toggle' => "dropdown", :href => "#"}
    %span.caret

%ul.dropdown-menu.bablevel-content
    - other_backoffice_languages.each do |language|
        %li.babLocale
            %a{:href => backoffice_language_path(:locale => language), :id => "#{language}_language_link"  }
                %span.babFlag{:class => "babFlag-#{language}"}= I18n.t(language)
                = I18n.t(language.to_sym) 
```

我也尝试调试，插入

```
 $(".dropdown-menu").click (event) ->
     alert 'dd clicked' 
```

这是由两个菜单触发的，所以它已安装，但第二个是打开的，从不切换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:06:26.600

与 Twitter-bootstrap 无关。

我试图在我的模板的其他地方移动切换按钮，首先在我的顶部导航栏中，因为第一个正在运行，这个测试运行良好......我将它放在模板的另一部分，结果相同：它跑...

所以我查看了用于这个按钮的类：.pagination，它也是 Kaminari 分页器使用的类......我摆脱了这个类......它运行了！

# database - MVCC模型中的数据库事务隔离

> ID：13880152
> 
> 赞同：1
> 
> 时间：2012-12-14T14:02:58.720
> 
> 标签：database, transactions, transaction-isolation

我在[这里](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)阅读了有关 MVCC 模型中的事务隔离的信息，并且出现了 2 个问题。

*   MVCC 是否使用锁？据我了解——不，如果是这样——
*   [这个表](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Isolation_Levels_vs_Locks)是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:33:17.483

该表的作者将隔离级别的保证与用于实现它们的机制混淆了。不需要使用锁来实现隔离。

像 MVCC 这样的乐观模型可以在没有锁的情况下提供相同的保证。他们甚至可以通过在提交时验证读取和写入集来提供可串行化（这在任何 RDBMS AFAIK 中都没有实现，但 SQL Server Hekaton 将使用这种技术）。

# android - 联系人名字和姓氏以及 android 中的电子邮件 ID 详细信息

> ID：13880153
> 
> 赞同：0
> 
> 时间：2012-12-14T14:02:59.463
> 
> 标签：android

我正在使用以下代码从 android 检索联系人的名字和姓氏列表，但是我也想同时检索电子邮件：

```
Cursor1 = getContentResolver().query(
           public List<String> getFullContactName()
           {
                List<String> name = new ArrayList<String>();
                String[] projection = new String[] {Data.DATA2, Data.DATA3};
                String where = Data.MIMETYPE + "='" + StructuredName.CONTENT_ITEM_TYPE + "'";
                Uri uri = Data.CONTENT_URI;

                ContentResolver contentResolver = getApplicationContext().getContentResolver();
                Cursor cursor = contentResolver.query(uri,projection,where,null,null);
                String firstName, lastName;
                while (cursor.moveToNext())
                {
                    firstName = cursor.getString(cursor.getColumnIndex(Data.DATA2));
                    lastName = cursor.getString(cursor.getColumnIndex(Data.DATA3));
                    name.add(firstName + " " + lastName);     
                    Toast.makeText(getApplicationContext(), "First name"+firstName, Toast.LENGTH_LONG).show();
                    Toast.makeText(getApplicationContext(), "Second name"+lastName, Toast.LENGTH_LONG).show();
                }

                cursor.close();
                cursor = null;
               return name;
            }
Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 
   while (emails.moveToNext()) { 
      // This would allow you get several email addresses 
      String emailAddress = emails.getString( 
      emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); 
   } 
   emails.close();
}
cursor.close(); 
```

我需要知道如何使用单个光标一起读取名字、姓氏电子邮件、电话号码，因为我需要在列表中获取详细信息，然后在列表视图中显示它们。我还没有参考资料，我可以使用单个光标获取详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:13:05.073

消除

```
cursor.close();
cursor = null; 
```

并确保`contactId`您传递给 的`Cursor emails`与您从中检索的相同`Cursor cursor`似乎您没有在您的 `String[] projection`

对于第一个投影，您可以如下：

```
String[] projection = new String[] {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME}; 
```

此投影将检索联系人 ID 和联系人姓名，然后获取联系人 ID 和姓名

```
String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
 String Name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)); 
```

那么第二个投影可能是这样的：

```
String[] projection2= new String[]{
                                 Email.ADDRESS,                 
                                 Email.TYPE 
```

然后定义第二个光标以在第一个光标内获取电子邮件，例如

```
Cursor cur2 = cr.query(emailURI,projection2,Email.CONTACT_ID + "=" +id,null,null); 
```

其中 id 是您从第一个光标获得的 id。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:02:49.400

使用以下代码获取联系方式。

```
public void getContacts(ContentResolver cr) {

    ArrayList<HashMap<String, String>> mContacts = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> mTempObj = new HashMap<String, String>();

    cur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
            null, null, null, null);
    cur.moveToFirst();
    if (cur.getCount() > 0) {
        for (int i = 0; i < cur.getCount(); i++) {
            mTempObj.add("Email", cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)));

            cur.moveToNext();
        }
    }

    cur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            null, null, null, null);
    cur.moveToFirst();
    if (cur.getCount() > 0) {
        for (int i = 0; i < cur.getCount(); i++) {
            mTempObj.add("Number", cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA)));

            cur.moveToNext();
        }
    }

    cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null,
            null);
    cur.moveToFirst();
    if (cur.getCount() > 0) {
        for (int i = 0; i < cur.getCount(); i++) {
            mTempObj.add("Name", cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));

            cur.moveToNext();
        }
    }

    cur = cr.query(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_URI,
            null, null, null, null);
    cur.moveToFirst();
    if (cur.getCount() > 0) {
        for (int i = 0; i < cur.getCount(); i++) {
            mTempObj.add("Address", cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET)));
            mTempObj.add("City", cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY)));
            mTempObj.add("State", cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION)));

            cur.moveToNext();
        }
    }
    mContacts.add(mTempObj);
} 
```

它会解决你的问题。

# php - MySQL从多个相同的表中选择并使用php随机显示结果

> ID：13880154
> 
> 赞同：0
> 
> 时间：2012-12-14T14:03:01.293
> 
> 标签：php, mysql

您好，我想在我的数据库中查询多个相同的表，这些表具有不同的前缀，然后随机显示结果，但不知何故我需要跟踪项目的来源，但我不知道如何

我这样做是因为我无权访问 information_schema

```
$query = "SHOW TABLES FROM mydb WHERE RIGHT( tables_in_mydb, 5 ) = 'table'";
$res = mysql_query($query);
$num = mysql_num_rows($res);

while($row = mysql_fetch_row($res)) {

$numbers = explode('_', $row[0]);

  if($num > 0) {
    $q = "SELECT `this`, `that`, `something` FROM ".$numbers[0]."_idetinticaltables"; // :)
    $r = mysql_query($q);
    while($c = mysql_fetch_array($r)) {
       /*display the results randomly with an identifier where the come from*/
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:31:14.877

以下可能有效：

1.  获取您感兴趣的表格列表。您已经这样做了。
2.  创建[`UNION`多个`SELECT`语句](http://dev.mysql.com/doc/refman/5.5/en/union.html)。对于从中选择的表，每个`SELECT`语句都不同，并且您将列集添加到表的名称（以便您以后可以识别它）：

    ```
    (SELECT *, TABLENAME = 'first_name_of_table' FROM first_name_of_table ...)
    UNION
    (SELECT *, TABLENAME = 'second_name_of_table' FROM second_name_of_table ...)
    UNION
    ...
    ORDER BY RAND() LIMIT 10; 
    ```

3.  因为它是一个`UNION`你可以随机化整个订单。请参阅[如何优化 MySQL 的 ORDER BY RAND() 函数？](https://stackoverflow.com/q/1244555/367456)因为做好事不是那么简单，所以上面的例子*只是*在其中放置了一个`ORDER BY`and`LIMIT`子句。如果您的表中有许多条目，它将杀死您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:50:36.030

```
$aa=array()   
while($c = mysql_fetch_array($r)) 
{
   /*display the results randomly with an identifier where the come from*/
   $aa[]=$c;
}
echo $aa; // print "Array" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:18:30.697

您可以使用 ORDER BY RAND() 对其进行随机排序

# javascript - JavaScript - 灵活的参数

> ID：13880155
> 
> 赞同：1
> 
> 时间：2012-12-14T14:03:05.037
> 
> 标签：javascript, object, error-handling, arguments

我正在尝试在 JavaScript 中创建一个小结构，我将在画布的库中使用它。我希望创建此结构时传递的参数是像我们在编译语言中那样的多个参数，或者是具有与这些参数对应的属性的对象：

```
BoundingBox = function( x, y, w, h ) {

    if( 'object' === typeof x ) {

        if( ! 'x' in x ) throw new Error('Property "x" missing');
        if( ! 'y' in x ) throw new Error('Property "y" missing');
        if( ! 'w' in x ) throw new Error('Property "w" missing');
        if( ! 'h' in x ) throw new Error('Property "h" missing');

        this.x = x.x;
        this.y = x.y;
        this.w = x.w;
        this.h = x.h;

    } else {

        if( null == x ) throw new Error('Parameter 1 is missing');
        if( null == y ) throw new Error('Parameter 2 is missing');
        if( null == w ) throw new Error('Parameter 3 is missing');
        if( null == h ) throw new Error('Parameter 4 is missing');

        this.x = x;
        this.y = y;
        this.w = w;
        this.h = h;
    }
}; 
```

接着 ：

```
var bb1 = new BoundingBox(0, 0, 200, 100);

var bb2 = new BoundingBox({
    x: 0,
    y: 0,
    w: 200,
    h: 100
});

var bb3 = new BoundingBox(bb2); 
```

这是一种干净的方法吗？在我们使用对象的情况下，使用“x”作为对象似乎很奇怪。

我还有第二个问题：所有这些错误检查内容值得付出努力吗？它使代码的大小加倍，使其读取和写入的时间更长，并且由于属性是公共的，因此不能完全防止出现 null 或 undefined 值。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:21:32.383

我不认为这很糟糕，但是在 JavaScript 中，重载是通过每个函数可用的参数 var 更通用地完成的。

```
function BoundingBox(){

//do named functions with constructors. It sets the constructor.name
//property in instances, which can be handy sometimes

    if(typeof arguments[0] === 'object'){
        var coordsObj = arguments[0];
    }
    else {
        coordsObj = {} //no need for var dec even when upper if doesn't evaluate
        coordsObj.x = arguments[0];
        coordsObj.y = argumetns[1];
        //...etc.
    }
    //laziest way to make those publicly available.
    this.constructor.prototype = coordsObj;
} 
```

至于测试你的参数，我会说放松。要么将其包装在报告参数存在问题的 try/catch 中，要么学习信任不依赖外部资源的函数中的数据。当您学会了解通过应用程序的数据流并且您充分了解所有动态转换规则以了解出现问题时会发生什么时，整个动态类型的事情就不那么可怕了，如果发生这种情况并不常见你的尽职尽责，你甚至应该在严格类型的范式中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:21:22.210

我对`overload`函数的想法如下：您可以创建一个`overload`接受函数的函数，以及一个带有其签名的新函数（作为值数组`typeof`）。然后，返回的函数检查当前调用是否与此签名匹配，并在这种情况下调用新函数。否则它会调用旧函数。

这样，您可以通过多次修补来重载函数。不同函数的定义和实际的重载逻辑可以这样分离。请参阅[http://jsfiddle.net/m2cRK/](http://jsfiddle.net/m2cRK/)。

```
​var overload = function(oldFunc, types, newFunc) {
    return function() {
        var suffice = Array.prototype.every.call(arguments, function(v, i) {
            return typeof v === types[i];
        });
        return (suffice ? newFunc : oldFunc).apply(this, arguments);
    };
}; 
```

用法（这是一个不需要重新分配的函数：http: [//jsfiddle.net/m2cRK/1/](http://jsfiddle.net/m2cRK/1/)）：

```
// The end of the chain, e.g. a function that throws a "no overload" error
var foo = overloadStart();

// Function 1
foo = overload(foo, ["number", "number"], function(a, b) {
    return a + b;
});

// Function 2
foo = overload(foo, ["object"], function(obj) {
    return obj.a + obj.b;
});

foo(1, 2);            // 3
foo({ a: 1, b: 2 });  // 3
foo("bar");           // error 
```

# javascript - Jquery ajax 结果在 IE 中无法正确显示

> ID：13880156
> 
> 赞同：0
> 
> 时间：2012-12-14T14:03:07.550
> 
> 标签：javascript, jquery, html, css, ajax

我有一个我正在开发的网站，当 js 可用时，它使用 ajax 加载页面段 - 这曾经在所有浏览器中都有效，唯一的问题是浏览器历史记录仅在 HTML5 浏览器中更新。

我最近在该网站上做了很多工作，最近决定尝试为 html4 浏览器整理历史记录，这样做我在 IE 中检查了该网站，发现数据来自的方式出现了问题正在显示一些 ajax 调用（仅影响 IE - 不影响 FF）。

URL 的结构如下：

> 站点名称.dev/main_category/sub_category

如果我只是输入`sitename.dev/main_category`一切正常，但是如果我单击其中一个子类别的链接，`sitename.dev/main_category/sub_category`结果已加载但未在 IE 中正确显示。如果我在浏览器中输入地址进行硬重新加载，一切正常

**工作（通过硬重新加载）：** ![工作（通过硬重新加载）：](../Images/4c280631cbf98f22ba54da33d62ed761.png)

**不通过ajax工作：**

![不通过ajax工作：](../Images/312910f17bd5fb76bed83aa6b5294ad7.png)

因为它是 ajax 加载的内容，所以我无法检查 dom，但我的函数似乎正在正确触发，并且 ajax 调用正在返回正确的结果。

这是我的ajax调用的代码

```
function leftsort_click(event) { //main sort click (left menu)
    var page = window.name, page_index,
    api = $('#right_pane').jScrollPane({
    showArrows: true,
    maintainPosition: false
    }).data('jsp');

    if (!$(this).hasClass('sort_cat')) {

    $('ul.sort_ul li, ul.cat_items li').removeClass('active');
    $(this).addClass('active');
    var sid = $(this).attr('id');
    var title = $(this).html();
    var loadUrlx= page;
    if ((sid != '') && (sid != 'undefined')) {
        loadUrlx += '/'+sid;
    }
    if($('.rpp_btn.active').length>=1){
        var res_per_page = $.trim($('.rpp_btn.active').html());
        page_index = $.trim($('.res_page_select.active a').html());
        if (($('.rpp_btn.active').hasClass('just_clicked'))||(!$('.res_page_select').hasClass('just_clicked'))) {
        page_index = '1';
        }
        if ((page_index != 1) || (res_per_page != 25)) {
        loadUrlx += '/' + page_index + '/' + res_per_page;
        }
        $('.rpp_btn, .res_page_select').removeClass('just_clicked');
    }

    loadUrlx = b_url + loadUrlx;
    if (History.enabled) {
        History.pushState(null, null, loadUrlx);

    }

    $.ajaxSetup({
        cache: false
    });

    $("#result_area").load(loadUrlx, function() {
        $("#result_table").trigger("update");
        api.reinitialise();
        tsizer();
    });
    }
} 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:50:32.333

解决了这个问题，我正在将一个 div 注入一个 tbody - 我对此并不满意。

# javascript - d3.js 碰撞检测与四叉树

> ID：13880161
> 
> 赞同：4
> 
> 时间：2012-12-14T14:03:22.657
> 
> 标签：javascript, d3.js, collision-detection, force-layout, quadtree

我正在尝试使用 d3.js 绘制一个图，以实现节点之间的冲突。我尝试了以下 codigo.Pero 不起作用。

如果我删除碰撞检测绘制但重叠节点......

```
<html>
  <head>
    <title>Demo</title>
    <script type="text/javascript" src="../d3.v2.js"></script>
    <script type="text/javascript" src="jquery-1.8.1.js"></script>
    <style type="text/css"> 
</style>  
  </head>
  <body>
    <script type="text/javascript">
      window.onload = function() {
        print();
      }

      function print(){
        var w = 960;
        var h = 500;
        var r = 20;
        var fill = d3.scale.category20();
        var force = d3.layout.force()
          .gravity(.01)
          .charge(-120)
          .linkDistance(30)
          .size([w, h]);
        var svg = d3.select("body")
          .append("svg")
          .attr("width", w)
          .attr("height", h);

        function() {
          d3.json("datos.json",
            function(json) {
              var nodes = svg.selectAll("circle")
                .data(json.nodes)
               .enter()
                .append("circle")
                .attr("r", r - .75)
                .style("fill", function(d) {return "#FF7F0E"})
                .style("stroke", function(d) { return "green"; })
                .style("stroke-width", function(d) { return "13px"; })
                .call(force.drag);
              force.nodes(json.nodes)
                .on("tick", tick)
                .start();
              var text = svg.append("g").selectAll("g")
                .data(force.nodes())
               .enter()
                .append("g") 
                .style("font-size", function(d) { return   "12px"; })
                .style("fill", function(d) { return   "red"; })
                .style("font-weight", function(d) { return   "bold"; });
              text.append("text")
                .attr("text-anchor", "middle")
                .attr("y", ".31em")
                .text(function(d) { return d.name; });

              function tick(e) {
                nodes.each(collide(.5))
                  .attr("cx", function(d) { return d.x; })
                  .attr("cy", function(d) { return d.y; });

            text.attr("transform", function(d) {
                    return "translate(" + d.x + "," + d.y + ")";});
              }

              function collide(alpha) {

                var quadtree = d3.geom.quadtree(nodes);

                return function(d) {
                  var ratio = r,
                    nx1 = d.x - ratio,
                    nx2 = d.x + ratio,
                    ny1 = d.y - ratio,
                    ny2 = d.y + ratio;
                  quadtree.visit(function(quad, x1, y1, x2, y2) {

                  if (quad.point && (quad.point !== d)) {

                    var x = d.x - quad.point.x,
                      y = d.y - quad.point.y,
                      l = Math.sqrt(x * x + y * y),
                      r = d.radius + quad.point.radius +
                               (d.color !== quad.point.color) * padding;
                    if (l < r) {
                      l = (l - r) / l * alpha;
                      d.x -= x *= l;
                      d.y -= y *= l;
                      quad.point.x += x;
                      quad.point.y += y;
                    }
                  }

                  return x1 > nx2
                        || x2 < nx1
                        || y1 > ny2
                        || y2 < ny1;
                  });
                };
              } 
            });
          })();
        }

        </script>
      </body>
    </html> 
```

如果我删除碰撞检测工作但重叠节点。我需要帮助 ：（

# c# - 正则表达式拆分异常

> ID：13880163
> 
> 赞同：3
> 
> 时间：2012-12-14T14:03:29.327
> 
> 标签：c#, .net, regex

[这是对这个 SO question](https://stackoverflow.com/questions/13419803/regex-net-split)的扩展。与原始问题相比，此问题考虑了两个不同的封闭字符。

我想用任意数字的（空白）空格分割，但忽略<>和“”之间的所有内容。所以这个字符串：

```
string Line = "1  2  <1  2> \"hello world\"   3"; 
```

应该导致：

1, 2, <1 2>, “你好世界”, 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:24:52.840

而不是`Split`，我将使用`Matches`

```
string Line = "1  2  <1  2> \"hello world\"   3";
var parts = Regex.Matches(Line, @"[<\""]{1}[\w \d]+?[>\""]{1}|[\w\d]+")
                 .Cast<Match>()
                 .Select(m=>m.Value)
                 .ToArray(); 
```

PS：这也将匹配`"abc def>`. 但我忽略了它以使正则表达式更短

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:49:47.020

到目前为止，这是我想出的：

```
public static string[] GetSplitStrings(string input)
{
    IList<string> splitStrings = new List<string>();
    var counter = 0;

    var sb = new StringBuilder();
    var inLessGreater = false; // sometimes <> can contain "
    foreach (var character in input)
    {
    if (character.Equals('<'))
    {
        inLessGreater = true;
        counter++;
    }

    if (character.Equals('>'))
    {
        inLessGreater = false;
        counter++;
    }

    if (character.Equals('"') && !inLessGreater)
    {
        counter++;
    }

    if ((character.Equals(' ') && counter == 0) || (counter == 2))
    {
        if (sb.ToString().Equals("") == false)
        {
        if (character.Equals('"') || character.Equals('>'))
        {
            sb.Append(character);
        }
        splitStrings.Add(sb.ToString());
        }
        sb.Clear();
        counter = 0;
    }
    else
    {
        sb.Append(character);
    }
    }

    return splitStrings.ToArray();
} 
```

更喜欢简洁的正则表达式解决方案。

# asp.net - 是否可以使用 VB 母版页来覆盖用 C# 编写的完全独立的目录？

> ID：13880167
> 
> 赞同：1
> 
> 时间：2012-12-14T03:17:09.047
> 
> 标签：asp.net, c#

我有一个用 vb.net 编写的公司网站。有 5 个母版页。

我最近开始使用一个论坛应用程序，也是 asp.net 4.0，但这个是用 C# 编写的。我的论坛目录是 domain.com/knowledgebase/。

有没有可能的方法来获取我的 vb.net 母版页之一并以某种方式集成到 /knowledgebase/ 目录中？这是目前的情况

这是我网站每个页面顶部的内容：

```
<%@ Page Title="USS Vision Inc." Language="VB" MasterPageFile="~/homepage.master" 
AutoEventWireup="false" CodeFile="default.aspx.vb" Inherits="_default" 
culture="auto" meta:resourcekey="PageResource1" uiculture="auto" Debug="true" %> 
```

这是我的 /knowledgebase/ 目录中的内容：

```
<%@ Page Language="C#" AutoEventWireup="true" ValidateRequest="false" 
Inherits="YAF.ForumPageBase" culture="auto" uiculture="auto" %>
<%@ Register TagPrefix="YAF" Assembly="YAF" Namespace="YAF" %>
<script runat="server"> 
```

例如，是否可以使用 /knowledgebase/ 目录中的 homepage.master？如果是这样，我将如何做到这一点？感谢任何人都可以提供的任何指导！

# sql - 追踪 GitHub 上前 100 个存储库的增长情况？

> ID：13880174
> 
> 赞同：3
> 
> 时间：2012-12-14T14:04:12.800
> 
> 标签：sql, join, github, google-bigquery, github-archive

我正在尝试追踪 GitHub 上前 100 个存储库的增长情况。我有以下查询：

```
SELECT MAX(repository_forks) as forks, repository_url 
FROM [publicdata:samples.github_timeline] 
WHERE (created_at CONTAINS "2012-04-01") 
GROUP BY repository_url 
ORDER BY forks DESC LIMIT 100 
```

这给了我 2012 年 4 月 1 日分叉最大的 100 个存储库。然后我想跟踪每个存储库每个月的分叉数量如何增长。

因此，我构造了以下查询：

```
SELECT repository_name, created_at as month,
SUM(repository_forks) as forks
FROM [githubarchive:github.timeline]
WHERE (repository_name = "rubinius")
GROUP BY repository_name, month
ORDER BY month DESC; 
```

这种给了我我想要的东西，但不完全是。相反，我需要查询：

*   为每个月（每个 repo）的分叉总数提供一个数字
*   搜索第一个查询中标识的 100 个存储库

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:24:47.093

中的数据`[publicdata:samples.github_timeline]`看起来像是每个存储库在不同时间戳的快照。如果是这种情况，要计算每月每个 repo 的分叉数变化，我认为你不应该这样做`SUM(repository_forks)`。相反，您希望获取每个月的第一个快照和最后一个快照，并进行`minus`计算以获取`delta`.

结果来自以下查询：

```
select repository_name, created_at, repository_forks  
from [publicdata:samples.github_timeline]
where repository_name='Bukkit'
order by created_at; 
```

![在此处输入图像描述](../Images/6af12030c3f29d5939642a2e93d51f24.png)

但是，我不明白为什么在`2012-03-11 08:30:21`，repository_forks 的数量`Bukkit`为零。可能是数据错误？如果是数据错误，我会将它们视为异常值。对其设置一些阈值可能能够消除这些异常值。注意我设置的阈值：`where repository_forks > 10`为了跳过坏数据。

```
SELECT top100.repository_name, 
  substr(created_at, 0, 7) month, 
  max(repository_forks)-min(repository_forks) monthly_increase, 
  min(repository_forks) monthly_begin_at, 
  max(repository_forks) monthly_end_with 
FROM [githubarchive:github.timeline] timeline
JOIN
(SELECT repository_name , MAX(repository_forks) as forks 
FROM [githubarchive:github.timeline] 
WHERE (created_at CONTAINS "2012-04-01") 
GROUP BY repository_name 
ORDER BY forks DESC LIMIT 100) top100
on timeline.repository_name = top100.repository_name
where repository_forks > 10
GROUP BY top100.repository_name, month
ORDER BY top100.repository_name, month; 
```

结果如下：

![在此处输入图像描述](../Images/4dd6e08bda3c306fb1343325acc7cfd4.png)

如果我错了并且 repository_forks 的数量已经发生了变化，那么您可以继续按照您所做的那样对 repository_forks 进行求和。然后它实际上更容易：

```
SELECT repository_name, substr(created_at,0,7) as month, SUM(repository_forks) as forks
FROM [publicdata:samples.github_timeline] timeline
JOIN
(SELECT repository_url , MAX(repository_forks) as forks 
FROM [publicdata:samples.github_timeline] 
WHERE (created_at CONTAINS "2012-04-01") 
GROUP BY repository_url 
ORDER BY forks DESC LIMIT 100) top100
on timeline.repository_url = top100.repository_url
GROUP BY repository_name, month
ORDER BY repository_name, month DESC; 
```

![在此处输入图像描述](../Images/1ae8d1f95adc1f592fa05f2fe9914515.png)

## 更新：

是的。我将数据集更改为指向`githubarchive:github.timeline`，然后我有数据，直到 2012 年 12 月。相应`sql`和结果已更新。但是数据质量不好，还是看到很多`outlier`数据点。

# android - Android 4.1通知的展开视图高度是否需要为1U/64dp（普通视图）的倍数？

> ID：13880175
> 
> 赞同：3
> 
> 时间：2012-12-14T14:04:14.050
> 
> 标签：android, notifications, android-4.2-jelly-bean

我正在尝试根据[Android 4.1 设计指南](http://developer.android.com/design/patterns/notifications.html)设计自定义“BigView”或“扩展视图” 。据我了解，小型/普通通知的高度为 64dp，请记住这一点，我想知道是否有任何准则指出扩展视图需要是 64dp/1U 的倍数，或者可以使用任何高度通知（最多 4U）？

![在此处输入图像描述](../Images/8260fa02876eee6d03eeaf8e6fdea0ae.png)

我问这个问题是因为扩展通知的大小是基本通知的 2,3 或 4 倍，而不仅仅是一些随机值（可能因应用程序而异）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T02:22:44.543

没有。可以是 64 到 256dp 之间的任何尺寸。例如，BigTextStyle 将其内容 TextView 包装起来，因此其高度会根据您在其中填充的文本量而有所不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T14:11:01.390

根据[Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，Big 通知内容的最大高度为 256dp。

> 可用于自定义通知布局的高度取决于通知视图。普通视图布局限制为 64 dp，扩展视图布局限制为 256 dp。

# php - 使用 mysql_fetch_array 时防止多重回显

> ID：13880180
> 
> 赞同：0
> 
> 时间：2012-12-14T14:04:32.687
> 
> 标签：php, mysql

我想在`total price`使用时使用 MySQL 表进行计算`mysql_fetch_array`。但是当我 echo 时`total`，我会逐步得到计算出的总价：

```
5000
10000
16000 
```

相反，我只想得到最终结果。

这是我的PHP代码：

```
$year=$_PoST['year'];
$mounth=$_POST['mounth'];

$con=mysql_connect('localhost','root','');
$select=mysql_select_db('payment');
$sql='select * from payments p 
where year(p.date) = '.$year.' and monthname(p.date) = "'.$mounth.'"';
$query=mysql_query($sql);
while($row=mysql_fetch_array($query)){
$price=$row['full_amount_must_pay'] ;

$total=$price+$total;
echo $total;

}

} 
```

如何在没有额外两行的情况下从数据库中计算总价？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:07:36.117

首先...如果您只需要 Sum ，请像这样：

```
$sql='select SUM(full_amount_must_pay) from payments p where year(p.date) = '.$year.' and monthname(p.date) = "'.$mounth.'"';
$query=mysql_query($sql);
if($row=mysql_fetch_array($query)){
    echo $row[0];
} 
```

否则在你的时间之外打印你的总数......就像这样

```
while($row=mysql_fetch_array($query)){
    $price=$row['full_amount_must_pay'] ;
    $total=$price+$total;
}
echo $total; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:07:08.977

只用一笔？

```
select sum(full_amount_must_pay) from payments p
where year... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:07:02.350

采用

```
$year=$_PoST['year'];
$mounth=$_POST['mounth'];

    $con=mysql_connect('localhost','root','');
    $select=mysql_select_db('payment');
    $sql='select * from payments p 
    where year(p.date) = '.$year.' and monthname(p.date) = "'.$mounth.'"';
    $query=mysql_query($sql);
    while($row=mysql_fetch_array($query)){
    $price=$row['full_amount_must_pay'] ;

    $total=$price+$total;

    }
    echo $total; 
```

# c# - 使用 SSH 将 Unix/Solaris 与 .NET 连接

> ID：13880185
> 
> 赞同：2
> 
> 时间：2012-12-14T14:04:49.163
> 
> 标签：c#, visual-studio-2010, unix, ssh

对于我的项目，我需要从本地机器连接远程 Unix 服务器。我想使用 Visual Studio 连接机器，就像我们可以使用 SSHXCute JAR 连接 Java 一样，并且能够执行 Unix 命令、上传文件等。请建议一种在 dot net c# 中完成任务的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:08:53.853

[.NET 的安全外壳 (SSH) 库](http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)

# prolog - AMZI Prolog 中的“写”语法是什么？

> ID：13880187
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:05:01.337
> 
> 标签：prolog

我想知道是否有类似“write”（如果在 Turbo Prolog 中）或“printf”（如果在 C 中）语法但在 AMZI Prolog 中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:49:59.803

你的意思是使用`write/1`谓词吗？

```
write('Hello world'), nl. 
```

？？？

# silverlight - 动态控制加载时，TextWrapping 将不起作用

> ID：13880192
> 
> 赞同：0
> 
> 时间：2012-12-14T14:05:11.330
> 
> 标签：silverlight, textblock, word-wrap

我正在开发一个 silverlight 5 应用程序。

我们正在使用 gridspliter 控件来使 2 个主面板变得灵活。如果我们尝试在 xaml 的第一个面板中使用 textblock 并在旁边设置 gridspliter ，它工作正常。

但是，虽然通过 textblock 的 TextWrapping 后面的代码添加相同的文本块并不能正常工作。

我们从后面的代码中添加了相同的内容，因为我们需要添加一张图片，并且所有数据都是动态的：

找到下面的代码：

```
<StackPanel x:Name="stkRelatedEntity" Grid.Column="0" Grid.Row="1">

HyperlinkButton hyltest = new HyperlinkButton();
StackPanel stk = new StackPanel();
stk.Orientation = Orientation.Horizontal;
Image RImage = new Image();
if (relatedEntity.Image != null)
{
    RImage.Source = Common.GetBitMap((byte[])relatedEntity.Image);
    RImage.Height = 16;
    RImage.Width = 16;
}

TextBlock RText = new TextBlock();
RText.Text = relatedEntity.DisplayNameN;
RText.TextWrapping = TextWrapping.Wrap;                        
RText.MaxWidth = 250;
RText.MinWidth = 10;

stk.Children.Add(RImage);
stk.Children.Add(RText);
hyltest.Content = stk;
stkRelatedEntity.Children.Add(hykInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:13:42.590

这是由代码生成的原因吗？将 ContentControl 与 ItemsSource 一起使用（显示文本/图像/链接的类的 ObservableCollection），然后将 ItemTemplate 用于项目布局并将 ItemPanel 作为 StackPanel 是否可以替代。

它可能不是您想要的，但我在 XAML 中想象这样的事情：

```
<ItemsControl ItemsSource="{Binding Path=MyItems}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Grid>
                <HyperlinkButton Content="{Binding Path=LinkToShow}" />
                <TextBlock Text="{Binding Path=TextToShow}" TextWrapping="Wrap" />
                <Image Source="{Binding Path=ImageToShow}" />
            </Grid>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我想象我有一个 ObservableCollection 的模型/代码，其中“SomeClass”是任何包含要显示的链接、图像和文本的东西。此集合绑定到 ItemsControl 中的 ItemsSource。

不确定这是否可以在项目中重复使用，但我认为它是一种更简洁的数据显示方法。

# javascript - 将图像 Attr alt 更改为 示例标题

> ID：13880196
> 
> 赞同：1
> 
> 时间：2012-12-14T14:05:18.630
> 
> 标签：javascript, jquery, playlist, alt

**我有一个 JS _buildPlaylist 文件，例如：**

```
//创建拇指
                thumb=$(new Image()).addClass('thumb_img').appendTo(div).attr('alt', _item.title?_item.title:'').css({
                   光标：'指针'，
                   不透明度：0
                }).load(函数() {
                    $(this).stop().animate({ 'opacity':1}, {duration: 500, easing: 'easeOutSine'});//fade in thumb
                }).错误（函数（e）{

                }).attr('src', _item.thumbnail);

```

带有“alt title name”的清晰图像缩略图行

**这是结果：**

```
 <img class="thumb_img" alt="Sample title builded here" style="cursor: pointer; opacity: 1;" src="http://mywebsite.com/image.jpg"> 
```

* * *

如您所见，这会创建一个带有 alt 文本属性的图像

现在，我想改建一个<LI> List names

*   此处构建的示例标题（*这是 ALT 标题名称*）

**那么，如何将图像缩略图更改为文本，或仅显示 alt 标题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:08:21.320

`img`如果您不想显示图像，则不需要使用标签。只需将其作为 a`label`或 a 即可`link`。那会做的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T14:08:32.707

`new Image()`与其构建 a ，不如构建一个`<a>`包裹在 a 中的`<li>`：

```
var thumb = $("<a>", { 
    'class': 'thumb_item', 
    'text' : (_item.title ? _item.title : "No title"),
    'href' : _item.thumbnail
}).wrap("<li>").parent().appendTo(div);​ 
```

当然我们会取消`.load`和`.error`处理程序，因为这些事件不会发生在列表项上。

小提琴：http: [//jsfiddle.net/tudwA/](http://jsfiddle.net/tudwA/)

# c++ - 如何将`char *`深度复制到std :: stringstream？

> ID：13880197
> 
> 赞同：2
> 
> 时间：2012-12-14T14:05:19.740
> 
> 标签：c++, std

拥有`char *`及其`int length`如何将其深度复制到`stringstream`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:09:13.470

使用[`std::stringstream::write(s, length);`](http://en.cppreference.com/w/cpp/io/basic_ostream/write).

请注意，如果可以使用`char*`is null 终止并且不需要提供：`operator<<()``length`

```
std::stringstream s;
const char* buf = "hello";
s << buf; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:09:08.903

不应该写完全满足您的要求吗？

[http://www.cplusplus.com/reference/ostream/ostream/write/](http://www.cplusplus.com/reference/ostream/ostream/write/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:09:55.623

你应该阅读[文档](http://www.cplusplus.com/reference/sstream/stringstream/)和[这个](http://www.cplusplus.com/reference/ostream/ostream/write/)

# php - 高级 mysql 查询，一次从多个表和行中获取。加入？

> ID：13880198
> 
> 赞同：0
> 
> 时间：2012-12-14T14:05:21.157
> 
> 标签：php, mysql, sql

我目前正在做一个项目，我将信息存储在几个相互连接的表中。我相信表格和列的格式是合乎逻辑的，是最好的选择。但问题是我没有足够的知识来构建足够高级的查询来获取我需要的所有信息。

主表是 ab_ads，其中存储了广告。这些广告可以分配多种格式（即 250x360、980x120 等），您还可以选择它们应该展示的区域（即斯科讷、斯德哥尔摩、卡尔马、达拉纳、耶姆特兰等）。

这就是我存储数据的方式。我没有显示所有表格，但我希望这已经足够了。

**广告栏（ab_ads）：（**有更多栏但不相关）

```
ID    orgnum         company_name   title           content         link
1     556664-7524    Company Inc    Lorem ipsum     Lorem ipsum     URL 
```

**广告状态 (ab_ads_states)：**

```
ID    adID    stateID
1     1       2             // Skåne
2     1       5             // Kalmar
3     1       8             // Stockholm
4     1       10            // Värmland
5     2       2             // Skåne
6     2       5             // Kalmar
7     3       8             // Stockholm
8     4       10            // Värmland 
```

**广告格式 (ab_ads_formats)**

```
ID    adID    formatID
1     1       1             // 250x360
2     1       2             // 980x120
3     2       1             // 250x360
4     3       2             // 980x120 
```

**格式表 (ab_formats)**

```
ID    name        width    height
1     Format 1    250      360
2     Format 2    980      120 
```

所以，我有两个 Flash 横幅都应该调用一个 PHP 脚本，而 PHP 脚本又应该返回一个 XML 文件和所有结果。

我知道如何从不同的表中选择数据，但我从来没有从另一个表中选择多行并将它们合并为一个，我想这是我需要在这里做的。我非常感谢我能得到的任何帮助。

Flash 横幅将向 PHP 文件发送两个参数，`stateID`以及`formatID`. 这意味着我必须`SELECT ad WHERE state = param AND format = format`。但是由于我为广告状态存储了多个条目，所以我不知道该怎么做。

**编辑：** 我还想在查询中获取格式名称并以以下格式获取它们：“格式 1，格式 2”在名为“格式”的列中。我想这需要某种加入？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:11:52.187

我认为这会起作用：

```
select ab.name as formats, aa.* from ab_ads as aa
inner join ab_ads_states as aas on aa.id = aas.adid and aas.stateId = stateIdParam
inner join ab_ads_formats as aaf on aa.id = aaf.adid and aaf.formatId = formatIdParam
inner join ab_formats as ab on aaf.formatid = ab.id 
```

编辑：我对 mySql 不是很好，也没有什么可以测试的，但我认为[group_concat](http://dev.mysql.com/doc/refman/4.1/en/group-by-functions.html#function_group-concat)可能是你要找的。如果是这样，它可能看起来像这样：

```
select group_concat(ab.name separator ", ") as formats from ab_ads aa
inner join ab_ads_states as aas on aa.id = aas.adid and aas.stateId = 2
inner join ab_ads_formats as aaf on aa.id = aaf.adid and aaf.formatId in(1,2)
inner join ab_formats as ab on aaf.formatid = ab.id
group by ab.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:24:59.433

请尝试以下 SQL：

```
SELECT count(aaf.ID) AS TotalFormat,
   group_concat(ab.name) AS formats
FROM ab_ads aa
INNER JOIN ab_ads_states AS aas ON aa.ID = aas.adID
AND aas.stateID = 2
INNER JOIN ab_ads_formats AS aaf ON aa.id = aaf.adID
AND aaf.formatID in(1,2)
INNER JOIN ab_formats AS ab ON aaf.formatID = ab.ID
GROUP BY aaf.adID HAVING TotalFormat >=2 
```

# SQL 演示：http://sqlfiddle.com/#!2/9f0ab/10

# java - 检查 Java 定时器是否被取消

> ID：13880202
> 
> 赞同：14
> 
> 时间：2012-12-14T14:05:41.160
> 
> 标签：java, timer, cancellation

为什么没有[java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)对象`isCancelled`的方法？

如果 Timer 没有被取消，我想安排一个任务，如果它被取消，我想直接运行它（在同一个线程上）。

`IllegalStateException`如果 Timer 已经被取消，是否是唯一的选择来捕捉可能发生的情况？（抓到 感觉不对`IllegalStateException`）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T14:09:46.453

你有多确定要使用`Timer`？改用[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)它，它有`isShutdown`很多其他的好处。从 Java 5 开始的一般建议是将`Timer`s替换为`ExecutorService`s。

有一个`ScheduledExecutorService`专门用于计划执行器服务的接口。使用其中一种`Executors.new...`方法进行实例化。

# c++ - 'override' 关键字只是检查覆盖的虚拟方法吗？

> ID：13880205
> 
> 赞同：253
> 
> 时间：2012-12-14T14:05:54.267
> 
> 标签：c++, c++11, overriding, virtual-functions, c++-faq

据我了解，`override`在 C++11 中引入关键字无非是检查以确保正在实现的函数是基类中函数的`override`ing 。`virtual`

是这样吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-12-14T14:13:28.807

确实是这样的想法。关键是您要明确说明您的意思，以便可以诊断出其他无声的错误：

```
struct Base
{
    virtual int foo() const;
};

struct Derived : Base
{
    virtual int foo()   // whoops!
    {
       // ...
    }
}; 
```

上面的代码可以编译，但不是您的意思（注意缺少的`const`）。如果您改为使用`virtual int foo() override`，那么您将收到编译器错误，表明您的函数实际上并未覆盖任何内容。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-14T14:09:08.637

维基百科引用：

> 覆盖特殊标识符意味着编译器将检查基类以查看是否存在具有此确切签名的虚函数。如果没有，编译器会出错。

[http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)

编辑（试图改进一点答案）：

将方法声明为“覆盖”意味着该方法*旨在*重写基类上的（虚拟）方法。重写方法必须与它打算重写的方法具有相同的签名（至少对于输入参数）。

为什么这是必要的？好吧，防止了以下两种常见的错误情况：

1.  一个人在新方法中打错了一个类型。编译器不知道它打算编写以前的方法，只是将其作为新方法添加到类中。问题是旧方法仍然存在，新方法只是作为重载添加。在这种情况下，对旧方法的所有调用都将像以前一样运行，而不会改变行为（这本来就是重写的目的）。

2.  忘记将超类中的方法声明为“虚拟”，但仍试图在子类中重写它。虽然这显然会被接受，但行为不会完全符合预期：该方法不是虚拟的，因此通过指向超类的指针访问将结束调用旧的（超类'）方法而不是新的（子类'）方法。

添加“覆盖”清楚地消除了这一点：通过这个，一个人告诉编译器期待三件事：

1.  超类中有同名方法
2.  超类中的这个方法被声明为“虚拟”（这意味着，打算被重写）
3.  超类中的方法与子类中的方法（重写方法）具有相同的（输入*）签名

如果其中任何一个为假，则发出错误信号。

^(* 注意：输出参数有时是不同的，但相关的类型。如果有兴趣，请阅读协变和逆变转换。)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-03-26T22:50:36.170

当有人更新基类虚拟方法签名（例如添加可选参数）但忘记更新派生类方法签名时，发现“**覆盖”很有用。**在这种情况下，基类和派生类之间的方法不再是多态关系。如果没有覆盖声明，很难找出这种错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-14T14:08:46.450

是的，就是这样。这是一项检查，以确保不会尝试覆盖并通过拙劣的签名将其搞砸。这是一个 Wiki 页面，详细解释了这一点，并有一个简短的说明性示例：

[http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-05T13:42:33.283

**C++17 标准草案**

[在浏览了C++17 N4659 标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf)的所有`override`命中后，我能找到的唯一参考标识符是：`override`

> 5 如果一个虚函数被 virt-specifier override 标记并且没有覆盖一个基类的成员函数，那么这个程序是非良构的。[ 例子：
> 
> ```
> struct B {
>   virtual void f(int);
> };
> 
> struct D : B {
>   virtual void f(long) override; // error: wrong signature overriding B::f
>   virtual void f(int) override;  // OK
> } 
> ```
> 
> —结束示例]

所以我认为可能炸毁错误的程序实际上是唯一的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-18T14:36:32.220

澄清关于虚拟的一切（因为我一直在反复遇到这个问题！）。

*   `virtual`是为了**基类**告诉派生类一个函数可以被覆盖
    *   没有**必要`virtual`在派生类**中使用。如果一个函数具有相同的名称/参数类型 list/cv-qual/ref-qual，它将自动正确使用。
    *   （实际上，`virtual`在派生类中使用会产生细微的错误，见下文）
*   `override`是**派生类**捕获错误和文档代码 的**可选说明符**： ***   告诉编译器：“确保有一个我正在重写的 EXACT 虚函数”
        *   避免错误地创建一个不同的函数签名，这会导致一个微妙的错误（即两个*稍微*不同的函数，它们是相同的）
        *   告诉编码人员这是覆盖虚函数** 

 **所以给出：

```
class base
{
public:
    virtual int foo(float x);
}; 
```

这里将如何处理一些不同的覆盖：

```
// AUTOMATIC virtual function (matches original, no keywords specified)
int foo(float x) { ; } 

// Re-specifying "virtual" uselessly (+ see pitfalls below)
virtual int foo(float x) { ; } 

// Potential issues: it is unknown if the author intended this to be a 
//    virtual function or not. Also, if the author DID intend a match but 
//    made a mistake (e.g. use "int" for the parameter), this will create
//    a subtle bug where the wrong function is called with no warning anywhere:

int foo(int x) { ; }         // SUBTLE, SILENT BUG! int instead of float param
virtual int foo(int x) { ; } // SUBTLE, SILENT BUG! int instead of float param

// Better approach: use the 'override' identifier to 
//    make sure the signature matches the original virtual function,
//    and documents programmer intent.

int foo(float x) override { ; }        // Compiler checks OK + tells coder this is virtual
int foo(int x)  override { ; }         // COMPILE ERROR, caught subtle bug
virtual int foo(int x)  override { ; } // COMPILE ERROR, caught subtle bug
                                       // (and redundant use of "virtual") 
```

最后（！），`final`可以使用说明符代替，`override`原因相同，但如果您**不希望在派生类中进一步覆盖**。**

# linux - 如何在 X-Linux 上安装 GCC

> ID：13880206
> 
> 赞同：2
> 
> 时间：2012-12-14T14:05:55.443
> 
> 标签：linux, embedded-linux

我有点茫然，问题是我需要在 X-Linux 上安装 GCC。基本上发生的事情是我被告知尝试在 X-Linux 上获取葡萄酒……所以我通过运行配置传输文件，我被告知我需要 GCC，所以我下载 GCC 却发现我不需要有一个'make'命令......所以我下载了make命令的tar，结果make需要一个C编译器才能运行！

我在这里陷入了一种先有鸡还是先有蛋的循环……帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:48:04.837

一个 GNU Make 源代码压缩包包含一个`build.sh`脚本来解决这种先有鸡还是先有蛋的情况。从自述文件：

> 如果您需要构建 GNU Make 并且没有其他 make 程序可以使用，您可以使用 shell 脚本 build.sh 代替。为此，首先按照安装中的说明运行配置。然后，不要键入 make 来构建程序，而是键入 sh build.sh。这应该编译当前目录中的程序。然后，您将拥有一个可用于 ./make install 或其他任何内容的 Make 程序。

# java - 两次使用 UIBinder

> ID：13880210
> 
> 赞同：0
> 
> 时间：2012-12-14T14:06:16.793
> 
> 标签：java, gwt

所以我有一个超类 Block，它扩展了 Composite 并使用 UIBinder 来制作布局

```
class Block extends Composite 
```

我想为那个创建两个子类，每个子类都有一组不同的图标需要添加。例如 InactiveBlock 和 ActiveBlock。

我的问题是我希望通过 UIBinder 来制作两个块（图标和一些按钮、标签）的布局，然后将该 UIBinder（及其事件）添加到主块中。

显然我不能做类似的事情

```
class ActiveBlock extends Block, Composite
    add(initWidget(UIBinder.create(this))); 
```

我怎么能做到这一点？

（ps如果我的问题不够清楚，请告诉我，以便我详细说明）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:01:29.680

我会把它变成一个单一的类，它的构造函数方法具有布尔值作为输入参数（活动/非活动）。

因此，您可以在类中定义所有常用字段和方法，如事件处理程序、图像等。然后使用构造函数方法将元素和处理程序添加到基本小部件。将向所有实例添加一些东西，这取决于它是否处于活动状态。

在这种情况下，您不会得到重复的代码，仍然会受益于使用 uibinder，并且最终您的代码将足够简单以供阅读。

# actionscript-3 - Menubar 对象可以提示它的菜单项吗？

> ID：13880215
> 
> 赞同：0
> 
> 时间：2012-12-14T14:06:31.927
> 
> 标签：actionscript-3, apache-flex, flex4.5

*   有没有办法在**mx:Menubar**对象的菜单项上显示提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:31:51.960

如果您所说的“提示”是指当您将鼠标悬停在某个项目上时出现的工具提示文本，您可能会发现[此页面](http://www.jusfortechies.com/flex/display-tooltip-in-menubar.php)很有用。

# java - How do I use a ChannelBufferOutputStream to check compression size

> ID：13880218
> 
> 赞同：2
> 
> 时间：2012-12-14T14:06:34.407
> 
> 标签：java, netty, apache-commons, java-io, apache-commons-io

In a java program I am compressing an InputStream like this:

```
ChannelBufferOutputStream outputStream = new ChannelBufferOutputStream(ChannelBuffers.dynamicBuffer(BUFFER_SIZE));
GZIPOutputStream compressedOutputStream = new GZIPOutputStream(outputStream);
try {
   IOUtils.copy(inputStream, compressedOutputStream);
} finally {
   // this should print the byte size after compression
   System.out.println(outputStream.writtenBytes());         
} 
```

I am testing this code with a json file that is ~31.000 byte uncompressed and ~7.000 byte compressed on disk. Sending a InputStream that is wrapping the uncompressed json file to the code above, outputStream.writtenBytes() returns 10 which would indicate that it compressed down to only 10 byte. That seems wrong, so I wonder where the problem is. ChannelBufferOutputStream javadoc says: Returns the number of written bytes by this stream so far. So it should be working.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:55:53.533

1.  Try calling `GZIPOutputStream.finish()` or `flush()` methods before counting bytes
2.  If that does not work, you can create a proxy stream, whose mission - to count the number of bytes that have passed through it

# c# - 将坐标从txt读取到数组中（c#）

> ID：13880220
> 
> 赞同：2
> 
> 时间：2012-12-14T14:06:38.540
> 
> 标签：c#, arrays, coordinates, readline

我的目标是读取包含坐标数（在第一行中提到）和 XY 值（双）的 txt 文件。例如：

> 2
> 
> 4.454 3.24
> 
> 1.23 4

到目前为止，我需要将这些坐标放入数组中（没有第一行），但我成功地阅读了文本，但不知道如何放入数组中。我的数组是一个 Point (double x,double y) C'tor 但我想学习如何放入普通数组。另一个问题是如何控制我要阅读的那一行？

代码到此为止

```
 using (StreamReader sr = File.OpenText(fileName)) 
        {
            int i = 0;
            string inputLine;
            int len = int.Parse(inputLine = sr.ReadLine());
            string[] readText = File.ReadAllLines(fileName);
            foreach (string line in File.ReadAllLines(fileName))
            {
                string[] parts = line.Split(' ');
                foreach (string part in parts)
                {
                    Console.WriteLine("{0}:{1}",i, part);    
                }
                i++;
            }
        } 
```

谢谢大家！ps我的第一个问题，希望不要违反论坛的规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:13:59.573

像这样的东西？

```
var points = File.ReadLines("c:\filepath")
    .Skip(1) //Ignore the 1st line
    .Select(line => line.Split(' ')) //Chop the string into x & y
    .Select(split => new Point(double.Parse(split[0]), double.Parse(split[1])); //create a point from the array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:09:36.340

```
var coordinates = File.ReadLines(fileName).Skip(1)
                    .Select(line => line.Split())
                    .Select(x=>new PointF(float.Parse(x[0]),float.Parse(x[1])))
                    .ToList(); 
```

# android - Android背景位图裁剪

> ID：13880221
> 
> 赞同：1
> 
> 时间：2012-12-14T14:06:42.720
> 
> 标签：android, background, png

我的 Android 应用程序中有一个背景 png。我想支持很多显示器，但我有一个障碍——很多显示器有很多分辨率和很多比率。我想确保我的背景正确显示并使其更加优雅，而不仅仅是在 Photoshop 中创建 10 多个裁剪的 png 文件。

我的想法是——在项目中导入一张相当大的图片。该应用程序将找出屏幕尺寸并简单地说出起点（x，y）和终点，这将“裁剪”图片并显示它而不会产生任何变形。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:44:12.837

我认为[bitmap.createBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean%29)是您关注的方法。该方法只是让您剪切位图的定义部分。

# css - 更改位置时，CSS 过渡在 Firefox 中不起作用

> ID：13880223
> 
> 赞同：13
> 
> 时间：2012-12-14T14:06:43.837
> 
> 标签：css, firefox, transitions

我发现了烦人的错误。当父元素的位置发生变化时（在示例中它从固定到绝对），我尝试为子元素的 CSS 属性设置动画。这在 Webkit 浏览器中没有问题，但在 Firefox (v. 17.0.1) 中没有动画过渡。

jsFiddle 示例：http: [//jsfiddle.net/chodorowicz/bc2YC/5/](http://jsfiddle.net/chodorowicz/bc2YC/5/)

有什么解决方案可以让它在 FF 中工作吗？

**编辑** 它已在 Firefox 34 [https://bugzilla.mozilla.org/show_bug.cgi?id=625289中修复](https://bugzilla.mozilla.org/show_bug.cgi?id=625289)

CSS

```
#container {
    position:fixed; left:100px; top:100px;
}
#container.some_state_position {
    position:absolute;
}
.box {
    width:100px; height:100px;
    background:blue;
}

.some_state .box {
    background:red; width:50px; height:50px;
}

img, .box  {
    -webkit-transition:all 1.5s ease;
    -moz-transition:all 1.5s ease;
    -ms-transition:all 1.5s ease;
    transition:all 1.5s ease;
}
img {width:100%;}
.some_state .other_container img {
    width:50%;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T18:29:05.450

It seems you have found a good bug. Although this isn't my favorite fix, it does the job. Change your button2 to do this on click.

```
$("#button2").on({
    click: function() {
        $("#container").toggleClass("some_state");

        setTimeout(function() {
            $("#container").toggleClass("some_state_position");
        }, 50);
    }
}); 
```

It appears for firefox the toggleClass() fires immediately for both classes, causing some issues with the transition effects. Putting the timeout gives jQuery the enough time for it to process what it needs to, in order to do the transitions similar to those in Chrome, etc. I put the timeout to 50ms, this appears to give it enough time for jQuery to process what it needs to do. Going lower than that I saw sometimes, it fail and do what you are currently experiencing.

# javascript - 列表组件：如何检测选择了哪个项目？

> ID：13880225
> 
> 赞同：0
> 
> 时间：2012-12-14T14:06:49.710
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我可以访问控制器中的列表（作为项目容器），但我不知道如何访问列表项属性。

如何创建正确的[ComponentQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)规则？我尝试了“列表 > 项目”，但它不起作用。

每个项目都有它的标题，但我在 selectSection 中得到“未定义”作为输出。

```
Ext.define( 'UGP.controller.BeginList',
            {               
                extend: 'Ext.app.Controller',
                config:
                {
                    views: [ 'BeginList' ],
                    control:
                    {
                        'list':
                        {
                            select: 'selectSection'
                        }
                    }
                },

                selectSection: function()
                {
                    Ext.Msg.alert( 'title=' + this.title );
                }
            }
); 
```

带有列表组件的 BeginList.js：

```
Ext.define( 'UGP.view.BeginList',
            {
                extend: 'Ext.List',

                config:
                {
                    fullscreen: true,
                    itemTpl: '{title}',
                    data: 
                    [
                        { title: 'Chapter 1', id: 0, action: "selectSection" },
                        { title: 'Chapter 2', id: 1, action: "selectSection" },
                        { title: 'Chapter 3', id: 2, action: "selectSection" },
                        { title: 'Chapter 4', id: 3, action: "selectSection" }
                    ]
                }
            }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:26:58.967

您可以在[`select`](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-event-select)事件文档中看到它传递参数。因此，您可以将`selectSection`函数的签名更改为：

```
selectSection: function (list, record) {
  Ext.Msg.alert( 'title=' + record.get( 'title' ) );
} 
```

您还可以查看[`itemTap`](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-event-itemtap)通常用于检测列表项上的点击事件的事件。

希望这可以帮助

# database - 将多个Access数据库合并为一个大数据库

> ID：13880230
> 
> 赞同：1
> 
> 时间：2012-12-14T14:07:04.000
> 
> 标签：database, ms-access, merge, database-performance

我有多个 ~50MB Access 2000-2003 数据库（MDB 文件），它们只包含带有数据的表。*数据库*位于我企业的服务器上，响应时间约为 1-2 秒（在文件资源管理器中浏览时手动打开 50 个 MDB 文件大约需要 10 秒）。我有其他只包含表单的数据库。大多数*表单数据库*（仍然是 MDB 文件）实际上是在使用批处理文件执行之前从服务器复制到客户端（经过一些测试，执行看起来更顺畅）。大多数*表单数据库*使用表链接从*数据数据库*中获取数据。

现在，我的问题是：将我的 ~50MB 数据库中的所有数据库合并成一个大数据库（比如说 500MB）*有什么优点/缺点吗？*会不会慢一些？如果我不必连接到所有这些不同的数据库并且我认为 500MB 不是很多，那么它实际上会有助于清理我的代码，但我不会假装真的习惯了 Access，那就是为什么我要问。如果 Access 需要读取整个 MDB 文件以从特定表中获取数据，那么它会更慢。Microsoft 不会真的那么令人惊讶，但到目前为止，我对 MS Access 数据库的性能感到满意。

永远不会有超过 50 人同时连接到数据库（很可能，这个数字实际上不会超过 10 人，但我宁愿在这里稍微保守一点，以防万一）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:14:58.870

你在这里如履薄冰。
Access 将处理您的方案，但并不真正意味着允许如此多的并发连接。
将所有内容合并到一个大型数据库 (500mb) 中并不是明智之举。
您是否尝试过从网络位置打开它？

据我建议，我将使用后端 SqlServer Express 将所有表合并到一个真实的客户端-服务器数据库中。
客户端 mdb 前端所需的更改不应非常普遍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:44:52.153

db 引擎不会读取整个 MDB 文件以从特定表中获取信息。它必须从系统表（名称以 MSys 开头的隐藏表）中读取信息，以确定您需要的数据存储在哪里。此外，如果您使用查询从表中检索信息，并且 db 引擎可以使用索引来确定哪些行满足查询的`WHERE`子句，它可能只从表中读取这些行。

但是，您的网络性能存在问题。当这些导致连接断开时，您就有损坏 MDB 的风险。这就是为什么 Access 不太适合在广域网或无线连接中使用的原因。即使在有线 LAN 上，当网络不稳定时，您也可能会遇到此类问题。

因此，虽然减少通过网络提取的数据量是一件好事，但它并不是在不稳定的网络上访问 Access 的最佳方法。相反，您应该将数据迁移到客户端-服务器数据库，以便在连接断开的情况下保持安全。

# html - 多格表

> ID：13880233
> 
> 赞同：3
> 
> 时间：2012-12-14T14:07:12.403
> 
> 标签：html

任何人都可以指导我创建这样的表格。这必须动态绘制。

第一个单元格有java中的Map的键，它有一个数据列表。

我们可以在 td 中使用 tr 来获取三行吗？

![在此处输入图像描述](../Images/532802bde58b5609e3054a604b129ad7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:12:51.007

请看下面的代码：

```
<table>
    <tr>
        <td rowspan="3">&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td rowspan="3">&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:08:16.217

您应该在and元素上使用`colspan`and`rowspan`属性。`td``th`

看看这个[小提琴](http://jsfiddle.net/rdiaz/Y2uJu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:47:57.113

您可以通过嵌入两个表格和 CSS 来获得所需表格的另一种方法

CSS

```
.t1{
 border:2px solid gray;
    border-right: none;
width:100%;
height:400px; 
padding:0;    
}
.t2{
    width:100%;
    height:100%;

}
.t2 td{
    width:33%;
    color:red;
     border-right:1px solid black;
     border-bottom:1px solid black;
}
.t2 .last td{
     border-bottom:none;
}
.c1{
    width: 25%;
    border-right: 2px solid gray;
    border-bottom: 2px solid gray;
    height:50%;
}
.c2{
    width:75%;
    border-left: 2px solid gray;
    border-bottom: 2px solid gray;
    height:50%;
}
​ 
```

HTML

```
<table class="t1">
<tr>
    <td class="c1">&nbsp;2</td>
    <td class="c2">
     <table class="t2">
         <tr>
             <td>&nbsp;1</td>
             <td>&nbsp;2</td>
             <td>&nbsp;3</td>         
         </tr>
         <tr>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>         
         </tr>
         <tr class="last">
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>         
         </tr>
      </table>
    </td>
</tr>
<tr>
<td class="c1">&nbsp;3</td>
    <td class="c2">
    <table class="t2">
         <tr>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>         
         </tr>
         <tr>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>         
         </tr>
         <tr class="last">
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>         
         </tr>
      </table>
    </td>
</tr>
</table>​ 
```

以下是[jsfiddle](/questions/tagged/jsfiddle "显示标记为“jsfiddle”的问题")演示：http: [//jsfiddle.net/saidbakr/5ByVd/1/](http://jsfiddle.net/saidbakr/5ByVd/1/)

# alsa - ALSA 意外缓冲区不足。有人可以解释吗？

> ID：13880235
> 
> 赞同：1
> 
> 时间：2012-12-14T14:07:18.370
> 
> 标签：alsa

我有一个使用 ALSA 播放音频样本的音频应用程序。“hw:0”设备已设置为： 样本：48kHz，16 位 LE 缓冲区大小：1920 帧 (=20 ms) 周期大小：960 帧 (=10 ms) 这是伪代码：

```
snd_pcm_sframes_t delayp = 0;
snd_pcm_sframes_t availp = 0;

while(true)
{
    snd_pcm_delay(m_pHandle, &delayp);
    availp = snd_pcm_avail(m_pHandle);
    print "Delay" + delay + "Available" + availp
    err = snd_pcm_writei(m_pHandle, data, periodSize);
    availp = snd_pcm_avail_update(m_pHandle);
    print "Wrote " + err + "samples - samples available" + avail;
} 
```

日志如下所示：

```
Periodsize 960 frames for a periodtime of 20 ms
Buffersize 1920 frames for a buffertime of 40 ms

Delay: 0 frames/ 0 ms; available 1920 frames/ 40
Wrote 960 frames; available after write: 960 frames/ 20 ms

xrunRecovery: Underrun!!! (at least 0.669 ms/ 32.112 frames long

Delay: 0 frames/ 0 ms; available 1920 frames/ 40
Wrote 960 frames; available after write: 960 frames/ 20 ms
Delay: 955 frames/ 19.8958 ms; available 965 frames/ 20.1042
Wrote 960 frames; available after write: 9 frames/ 0.1875 ms
Delay: 906 frames/ 18.875 ms; available 1014 frames/ 21.125
...
Delay: 952 frames/ 19.8333 ms; available 968 frames/ 20.1667
Wrote 960 frames; available after write: 18 frames/ 0.375 ms

xrunRecovery: Underrun!!! (at least 234.825 ms/ 11271.6 frames long

Delay: 0 frames/ 0 ms; available 1920 frames/ 40

Wrote 960 frames; available after write: 960 frames/ 20 ms

xrunRecovery: Underrun!!! (at least 0.869 ms/ 41.712 frames long

Delay: 0 frames/ 0 ms; available 1920 frames/ 40 
```

发生了两件奇怪的事情： 1\. 虽然我写的所有内容都是 960 帧，但 snd_pcm_avail_update 并不总是反映这一点 2\. 出乎意料，突然发生了 xrun。例如，在只有 18 帧可用的情况下，下一行在尝试将新周期写入缓冲区时给出 xrun。

有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:53:50.343

当您写入 960 帧时，可用帧数减少 960。同时，正在播放的任何样本都会增加可用帧数。

当缓冲区变空时，您会遇到欠载。根据您的日志，您的程序没有运行大约 234 毫秒。

# perl - 从海量模拟数据中计算速度

> ID：13880251
> 
> 赞同：0
> 
> 时间：2012-12-14T14:08:17.410
> 
> 标签：perl

我有水分子速度的模拟数据。数据格式如下。为了清楚起见，我想描述数据的格式，它很容易导致我想要计算的内容。

一个水分子由三个原子组成：氧（O）和两个氢（H）。在这里，我将它们命名为 O、H1 和 H2。

下面的数据以 line`title 0`和 number开头`4335`，表示它包含 4335 个原子（4335/3 = 1445 个水分子）。

从第三行 ( `0.0923365 0.0341984 -0.1248516`) 开始的前三个数字表示氧 (O) 原子在三个笛卡尔方向 Ox、Oy、Oz 上的速度。接下来的三个数字，在同一行中代表氢 (H1) ==> H1x、H1y、H1z 的速度。最后，第四行中的前三个数字代表氢 (H2) ==> H2x,H2y,H2z 的速度。最后，同一第四行中的以下三个数字代表氧原子的速度。

这些序列对 2170 行中的所有 4335 个原子进行，包括数据文件中的前两行，并在下一节从 开始重复`title 1`。

```
title 0
4335  2.0001000e+04
 0.0923365   0.0341984  -0.1248516  -0.8946258   1.6688854   0.8259304
 0.2890579   0.8051153  -1.5612963   0.0625492  -0.1361579   0.2869132
 0.2343408  -0.0665305   1.0745378  -0.8375892   0.6953992   0.5149021
-0.1628550   0.0131844   0.0688080   0.2429340   0.2168210  -0.0289806
-0.3677613   0.2054004  -0.1511643  -0.3487551  -0.1454157   0.0801884
-0.9039297  -0.0682939  -0.2337404  -0.5605327  -0.0369157   0.2243892
-0.3100274  -0.2673132  -0.2093299   0.1975043  -0.4572202  -0.8410826
-0.6995287  -0.4123909   0.0649209  -0.1910519   0.2289656   0.2443295
-0.0279093   0.5790939  -0.0104249  -1.1961776  -0.5387340   0.1445187
-0.3188485   0.3789352  -0.0112114   0.7831523   0.6043882  -0.7131590
-0.7214440  -0.5358508  -0.3035673  -0.1549275  -0.1402387  -0.0101964
-0.2027608   1.5107149   0.2963312  -1.5104872  -0.1554981  -1.3323215
 0.1097982  -0.1553742   0.3803437   0.0816858   0.0265007   0.4215823
 0.1157368   0.2100116   0.4712551   0.1799426  -0.1260255  -0.2131755
 0.1811777  -0.9442581  -0.6036636   0.9681703  -0.1523646  -0.3502441
 0.0976771   0.0019619  -0.1832204  -0.0055989   0.2701100  -0.4416720
 0.8496723   0.4070951  -0.0819204   0.1156806  -0.1619873  -0.0016126
-0.4051959   0.4263505  -0.9460036   0.4412067   0.1002270   0.5864405
-0.3831136   0.3240860  -0.0005143  -0.5667163   0.2618876   0.0103317
-0.6442209   0.3965833  -0.0778050  -0.2404238  -0.1339887  -0.1662417
 0.3421198   0.7480828  -1.8316993  -0.4454920  -0.0499657  -0.1951254
-0.2895359  -0.1934811  -0.2674928   0.1255802   1.3522828  -0.2829485
-0.4129106  -0.6842645  -1.0147657  -0.1278501  -0.0597648  -0.1478294
-0.2519974   0.0665314  -0.0690079  -0.0480210  -0.1179547  -0.2091919
-0.1942484   0.2583650  -0.0734658  -0.1216313   0.5158040  -0.0676843
-0.3063602   0.8148463  -0.1959571  -0.1009838  -0.3394633  -0.0866587
 .
 .     (goes on until line 2170)
 .
 0.1028815  -0.0844088  -0.2156557  -0.1698745  -0.2018967  -0.3863209
 0.1793070  -0.1005802   0.1800752  -0.1404713   0.2216020   0.2236271
 0.5192825  -0.7398186   0.0418758   0.0347715  -0.3457840  -0.1300237
-0.3089482   1.1125441  -0.4020403   0.2739744  -0.9062766   0.0012294
 0.1498538   0.0883857  -0.0094638   0.0963565  -1.1027019   0.0115313
-0.0432824   0.3330713   0.0304943
title 1
4335  2.0002000e+04
-0.2082078   0.1774843  -0.1023302  -0.1100437   0.5973607   1.0627041
-0.2216015   0.0448885  -0.8415924   0.1691296   0.6008261  -0.0373434
 0.9387534  -0.3642305   0.6756270  -0.6000357   0.6632088   1.0567899
-0.3234407  -0.1781680  -0.1936070  -0.4799916  -0.1522612  -0.2347461
 0.1045985   0.1999704  -0.1482928  -0.0439331   0.0413923   0.1605458
 0.3403952  -0.2012104   0.4851457  -0.9665228   0.2202362   0.0046218
 .
 .   (goes on until line 2170)
 . 
```

我想计算的是每个分子的合成速度，我想用 Perl 来做这个。算法是这样进行的。

首先将氧气 (O) 和氢气 (H1 & H2) 的速度分别存储在 Ox,Oy,Oz, H1x,H1y,H1z 和 H2x,H2y,H2z 中。

接下来我们定义：

```
 velocity_x = Ox + Hx + Hx
    velocity_y = Oy + Hy + Hy
    velocity_z = Oz + Hz + Hz 
```

最后计算

```
 resultant_velocity = sqrt(velocity_x**2 + velocity_y**2  + velocity_z**2) 
```

并将“resultant_velocity”存储到新文件中（文件应该是 title_0.dat）。并且程序将计算文件中从`title 1`直到开始的速度`title 200`。

我是 Perl 的新手，但我想在 Perl 中做这个操作，因为我发现它非常有趣。我可以在 Perl 中编写简单的“读写”操作，但不知道如何拆分并将值分配给变量并执行计算，尽管计算是高中标准。

```
#!/usr/bin/perl -w

$data_file="malto.dat";
open(DAT, $data_file) || die("Could not open file!");
@raw_data=<DAT>;
close(DAT);

while(<@raw_data>){
@columns=split /\s+/,$_; 
if($columns[0]=~ m/ATOM/){ 
print "$columns[5], $columns[6], $columns[7]\n";
    }
} 
```

我想从专家那里得到一些指导，这样我可以在编写代码的同时加深对 Perl 的理解。

感谢任何帮助。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:57:09.880

这是我的建议：**将工作分解为小组件，并为工作的每个有意义的部分编写一个方法**。以机智：

```
use strict;
use warnings;

main(@ARGV); # Pass data file name on command line. Don't hard-code it.

sub main {
    my $data_f = shift;
    open(my $data_h, '<', $data_f) or die "$!: $data_f";
    while (my $section = get_section($data_h)){
        # Also write methods that can be called here to make 
        # desired computations, print output, etc.
    }
}

sub get_section {
    # Takes a file handle.
    # Returns a hash reference containing all of the data
    # for an entire section of the file.
    my $h = shift;
    return if eof($h);
    chomp (my $title = <$h>);
    my ($n_atoms) = <$h> =~ /^(\d+)/;
    return {
        'title'     => $title,
        'n_atoms'   => $n_atoms,
        'molecules' => get_molecules($h, $n_atoms / 3),
    };
}

sub get_molecules {
    my @molecules;
    return \@molecules;
} 
```

我没有写`get_molecules()`方法。它需要一个文件句柄和一个整数（N 个分子）。它可以返回对数组数组或哈希数组的引用，每个内部数组/哈希都保存单个分子的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:12:51.783

也许以下内容会对您有所帮助：

```
use strict;
use warnings;
use Math::Complex;

my $dataFile = 'malto.dat';

{
    local $/ = 'title ';
    open my $fh, '<', $dataFile or die $!;

    while (<$fh>) {
        chomp;

        my @data = split or next;

        my $titleNum     = 'Title ' . shift @data;
        my $atom         = shift(@data) . ' ' . shift @data;
        my $resultantVel = calcResultantVel( \@data );

        print $titleNum, "\n";
        print $atom,     "\n";
        print 'ResultantVel: ' . $resultantVel, "\n\n";
    }

    close $fh;
}

sub calcResultantVel {
    my ($dataRef) = @_;

    my ($velocity_x, $velocity_y, $velocity_z);

    while ( my @nums = splice( @$dataRef, 0, 9 ) ) {
        $velocity_x += $nums[0] + $nums[3] + $nums[6];
        $velocity_y += $nums[1] + $nums[4] + $nums[7];
        $velocity_z += $nums[2] + $nums[5] + $nums[8];
    }

    return sqrt( $velocity_x**2 + $velocity_y**2 + $velocity_z**2 );
} 
```

单词和空格`title`用作记录分隔符，因此每次读取都会接收一块由 . 分隔的数据`title`。`chomp`删除记录分隔符，然后记录在`split`空白处。

第零个元素是标题号，这是`shift`ed off `@data`。的第一个和第二个元素`@data`是原子数，它们也被`shift`删除了。剩余的数组元素是笛卡尔方向，并且对该数组的引用被发送到子例程`calcResultantVel`。

该子例程一次采用九个元素的块：三个用于 O 原子，三个用于第一个 H 原子，三个用于第二个 H 原子，并且根据您提供的定义保留运行总和。最后，返回结果速度。

这是一些示例输出：

```
Title 0
4335 2.0001000e+04
ResultantVel: 13.2945751170603

Title 1
4335 2.0001000e+04
ResultantVel: 12.7696611061461 
```

您可以直观地验证它是否正常工作。由于您“……可以在 Perl 中编写简单的‘读写’操作……”，下一步就是让它将所需的结果写入文件。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:45:06.950

感谢您的帮助和指导。我已尝试修改您的代码，如下所示。它至少可以满足我的需要。

```
#!/usr/bin/perl
###############

#use strict;
#use warnings;
use Math::Complex;

open    OUTPUT, '>', "velocityOnly.dat" or die "Can't create filehandle: $!";

my $dataFile = 'velF1F2.vel';

{
local $/ = 'title ';
open my $FH, '<', $dataFile or die $!;

while (<$FH>) {
    chomp;

    my @data = split or next;

    my $titleNum     = 'Title ' . shift(@data);
    my $atom         = shift(@data) . ' ' . shift(@data);
    #my $resultantVel = calcResultantVel( \@data );

    #print OUTPUT "$titleNum", "\n";
print "$titleNum", "\n";

for my $i (1..1445)
{
    $j=(9*($i-1));  

   $velocity_x = $data[($j+0)] + $data[($j+3)] + $data[($j+6)];
   $velocity_y = $data[($j+1)] + $data[($j+4)] + $data[($j+7)];
   $velocity_z = $data[($j+2)] + $data[($j+5)] + $data[($j+8)];

   $velo = sprintf '%.3f',sqrt( $velocity_x**2 + $velocity_y**2 + $velocity_z**2 );
        chomp $velo;
        print   "$velo","\n";
        print   OUTPUT  "$velo\n";

    }

    #print 'ResultantVel: ' . $resultantVel, "\n\n";
    }

   close $FH;
   } 
```

但我想通过添加一些其他功能来进行一些复杂的计算来进一步扩展。编码

在此之前，我需要一些关于将以下代码变成子程序的指南。我在这里有点迷路了。您的代码实际上添加了所有 X、Y 和 Z，最后找到了速度。但我想要的不是那个。每个 9 个值随后代表包含三个原子的水分子的坐标。

（数字 1445 是分子数。每个分子包含三个原子，每个原子有三个坐标。所以对于一个水分子有 9 个笛卡尔坐标。）

这里的 i 代表水分子的数量

```
for my $i (1..1445)
{
    $j=(9*($i-1));  

   $velocity_x = $data[($j+0)] + $data[($j+3)] + $data[($j+6)];
   $velocity_y = $data[($j+1)] + $data[($j+4)] + $data[($j+7)];
   $velocity_z = $data[($j+2)] + $data[($j+5)] + $data[($j+8)];

   $velo = sprintf '%.3f',sqrt( $velocity_x**2 + $velocity_y**2 + $velocity_z**2 );
        chomp $velo;
        print   "$velo","\n";
        print   OUTPUT  "$velo\n";

    } 
```

# java - JSF 2：访问组件值绑定到的对象

> ID：13880252
> 
> 赞同：0
> 
> 时间：2012-12-14T14:08:19.120
> 
> 标签：java, jsf, jsf-2

我有一个简单的场景，这个例子来自 PrimeFaces，但我想它适用于我将以类似方式使用的每个标签：

```
<p:autoComplete value="#{address.country}" id="#{layoutId}_country" 
    completeMethod="#{addressBean.completeCountry}" var="country"
    itemLabel="#{country.name}" itemValue="#{country}"
    converter="#{countryConverter}">
</p:autoComplete> 
```

在 bean 的方法中（例如 addressBean.completeCounty），我可以访问 AutoComplete 对象。我想得到的是它的值（#{address.country}）的引用，而不是值本身。

那是什么地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:24:42.060

> *我想得到的是它的值（#{address.country}）的引用，而不是值本身。*

`#{address.country}`这个问题有点含糊（可能是语言障碍），但如果我理解正确，你会出于某种原因想要作为表达式字符串。你可以得到它[`UIComponent#getValueExpression()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getValueExpression%28java.lang.String%29)然后[`ValueExpression#getExpressionString()`](http://docs.oracle.com/javaee/6/api/javax/el/Expression.html#getExpressionString%28%29)。

```
public List<Country> completeCountry(String query) {
    UIComponent component = UIComponent.getCurrentComponent(FacesContext.getCurrentInstance());
    String valueEL = component.getValueExpression("value").getExpressionString();
    // ...
} 
```

# java - Mockito 以便与任何匹配器进行验证

> ID：13880254
> 
> 赞同：1
> 
> 时间：2012-12-14T14:08:21.177
> 
> 标签：java, unit-testing, junit, mockito

我在测试 servlet 过滤器时遇到了一些问题。此 servlet 过滤器的目的是在 filterChain 执行后在响应中填充一些 http 标头。所以我要测试的是，在调用 mockFilterChain.doFilter 之前，我的 mockHttpServletResponse 上的 setHeader 调用不会发生。

我正在使用 mockito:mockito-core:1.8.5

所以，这是一个示例代码片段

```
@Test
public void filterHeaderInjectionHappensLast() throws Exception {
    javax.servlet.Filter myFilter = new HeaderInjectionFilter();

    mockRequest = mock(javax.servlet.http.HttpServletRequest.class);
    mockResponse = mock(javax.servlet.http.HttpServletResponse.class);
    mockFilterChain = mock(javax.servlet.FilterChain.class);

    myFilter.doFilter(mockRequest, mockResponse, mockFilterChain);

    InOrder inOrder = inOrder(mockFilterChain, mockResponse);
    inOrder.verify(mockFilterChain).doFilter(mockRequest,mockResponse);
    inOrder.verify(mockResponse).setHeader(any(String.class),any(String.class));    
} 
```

该测试将无法验证 setHeader 传递任何字符串参数。如果我更改该 setHeader 验证调用以接受代码中使用的特定参数，则测试将成功通过。当您像这样验证订单时，您可以不使用通配符匹配器吗？

HeaderInjectionFilter 看起来像这样

```
public class HeaderInjectionFilter implements Filter {
    @Override
    public void destroy() {}

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
        filterChain.doFilter(request, response); //Always doFilter before we add header to response

        HttpServletResponse httpServletResponse = (HttpServletResponse) response;
        httpServletResponse.setHeader(CACHE_CONTROL, "no-cache");
        httpServletResponse.setHeader(PRAGMA, "no-cache");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:25:35.090

此测试使用 any(String.class) 失败，因为在提供的过滤器实现中，随后两次调用 response.setHeader。inOrder.verify 验证交互是否按顺序发生一次。所以从技术上讲，测试可以更改为

```
@Test
public void filterHeaderInjectionHappensLast() throws Exception {
    javax.servlet.Filter myFilter = new HeaderInjectionFilter();

    mockRequest = mock(javax.servlet.http.HttpServletRequest.class);
    mockResponse = mock(javax.servlet.http.HttpServletResponse.class);
    mockFilterChain = mock(javax.servlet.FilterChain.class);

    myFilter.doFilter(mockRequest, mockResponse, mockFilterChain);

    InOrder inOrder = inOrder(mockFilterChain, mockResponse);
    inOrder.verify(mockFilterChain).doFilter(mockRequest,mockResponse);
    inOrder.verify(mockResponse, times(2)).setHeader(any(String.class),any(String.class));    
} 
```

或者，测试应该明确地测试设置的特定标头，这是我要走的路径，因为它对于阅读测试的人来说不那么晦涩难懂。

# c# - 如何设置 ajax.beginform 同步

> ID：13880259
> 
> 赞同：0
> 
> 时间：2012-12-14T14:08:33.287
> 
> 标签：c#, asp.net-mvc-3

**目标**

我想知道是否有办法设置 Ajax.beginform 同步？或者如果我必须使用另一种类型的表格。

**编码：**

```
 @using (Ajax.BeginForm("InputMaterial", "Grid", new AjaxOptions() { UpdateTargetId ="divCurrentZone" ,
                                                                 InsertionMode = InsertionMode.Replace, 
                                                                 HttpMethod = "POST" })) {
    <div id="divCurrentZone">
        @Html.Partial("_CurrentZone", Model)
    </div> 
} 
```

# javascript - Jquery Ajax Html 响应

> ID：13880264
> 
> 赞同：1
> 
> 时间：2012-12-14T14:08:57.697
> 
> 标签：javascript, ruby-on-rails, jquery

嗨，我们有 Rails 应用程序，

我们实现了 JQuery Ajax。Url 被执行并以 html 形式生成数据对象。

```
jQuery.ajax({
    type: 'GET',
    url: u,
    data: {
        id: id,
        LANG: "ENG"
    },
    dataType: 'html',
    success: function (data, textStatus) {
    },
    error: function (xhr, err, e) {
        alert("Error: " + err);
    }
}); 
```

我们的 HTML 响应是：

```
<html>
  <span id='rate'>  
    <img src="www.text.comt/star.gif" width=10, height=10 >
  </span>
</html> 
```

实际上有 5 个图像标签将来自跨度部分。我们想要获取所有 5 个图像标签并在我们的应用程序中显示这些图像。

我们如何使用“数据”对象来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:19:28.063

如果您**真的**要从服务器发回`HTML`数据，则可以通过以下方式：

```
success: function (data, textStatus){  
  // jQuery('<selector_where_you_want_to_append').append($(data).find('img')); 
  jQuery('body').append($(data).find('img')); 
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:25:59.780

`$.load`如果您只是加载 html，则可以在 jquery 中使用函数。我对如何在 ruby​​ 上完成操作并不十分熟悉，但您也可以从服务器返回一个 json 字符串并对其进行迭代以使用 JavaScript 生成 html。这是您可以使用的方法`$.load`

```
$('.container').load(url, {id: id,LANG: "ENG"}); 
```

# mysql - MySQL：LAST_INSERT_ID() 返回 0

> ID：13880267
> 
> 赞同：28
> 
> 时间：2012-12-14T14:09:01.297
> 
> 标签：mysql, sql, database

我有这个测试表：

```
CREATE TABLE IF NOT EXISTS `test` (
    `id` INT(10) AUTO_INCREMENT,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4; 
```

使用这三个中的任何一个插入

```
INSERT INTO `test` (`id`) VALUES (NULL);
INSERT INTO `test` (`id`) VALUES (0);
INSERT INTO `test` () VALUES (); 
```

并发行

```
SELECT LAST_INSERT_ID(); 
```

但查询总是导致`0`.

PHP`mysql_insert_id`也`PDO::lastInsertId()`没有产生任何结果。

我一直在玩弄这一天，无法让它发挥作用。想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-14T16:43:06.603

问题似乎出在 MySQL 的 phpmyadmin 配置文件`PersistentConnections`中，每次发出查询时都会`FALSE`产生一个新的配置文件 - 因此呈现无效。`CONNECTION_ID``SELECT LAST_INSERT_ID()`

后续主题中的更多信息[每个查询都会创建一个新的 CONNECTION_ID()](https://stackoverflow.com/questions/13882333/every-query-creates-a-new-connection-id)

也感谢[dnagirl](https://stackoverflow.com/users/128245/dnagirl)的帮助

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-08T19:29:06.113

对于这个问题，我只花了 50 美分，我只是注意到如果你的表没有设置索引，你不会得到`LAST_INSERT_ID`更大的收益。`0``AUTO_INCREMENT`

我在这上面浪费了大约半个小时。结果我一直得到一个`LAST_INSERT_ID()`of `0`，这对于这张桌子来说实际上是可以的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-14T14:13:01.280

你必须结合

```
INSERT INTO test (title) VALUES ('test');SELECT LAST_INSERT_ID(); 
```

然后你会得到最后一个插入id

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-25T21:28:24.093

我遇到过同样的问题。`mysql_insert_id()`或`LAST_INSERT_ID()`在带有**INSERT 查询**的 PHP 函数内请求时返回 0 。

**我通过从在INSERT 查询**`mysql_insert_id()`的函数之后调用的单独 PHP 函数请求值来对问题进行排序。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T12:44:56.660

我有同样的问题，但我通过创建交易解决了这个问题。

```
$db->begin();
$sql = "INSERT INTO 'test' VALUES('test')";

if ($db->query($sql))
{
    $id = $db->last_insert_id('test');
    $db->commit();
    return $id;
}
else{
    $db->rollback();
    return -1;
} 
```

我试过

```
return $db->last_insert_id('test'); 
```

在“提交”之后，但总是返回“0”

希望能帮到你

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-14T14:39:41.160

它工作得很好……试试看……

```
 $result = mysql_query("INSERT INTO `test` (`title`) VALUES ('test')");
    if ($result) {
        $id = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM tablename WHERE id = $id") or die(mysql_error());
        // return user details
        if (mysql_num_rows($result) > 0) {
            return mysql_fetch_array($result);
        } else {
            return false;
        }
    } else {
        return false;
    } 
```**

# c# - 如何在 SelectMany 中不按名称指定元素的情况下返回 LINQ to XML XElements 列表

> ID：13880268
> 
> 赞同：0
> 
> 时间：2012-12-14T14:09:01.273
> 
> 标签：c#, linq-to-xml

给定一个 XML 文件，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
   <Policy id="832cbfc6-a451-4d77-a995-4ceb9d3bbe01" username ="DCassidy">     
      <Title>Test 1</Title>    
  </Policy>
  <Policy id="832cbfc6-a451-4d77-a995-4ceb9d3bbe02" userName ="DCassidy">
    <Title>Test 2</Title>
 </Policy>........and so on 
```

是否可以使用 LINQ to XML 返回所有“策略”元素及其包含的元素，而无需指定每个元素，例如：

```
var subset = doc.Elements("Policy").SelectMany(x => new[] { x.Element("Title").Value }); 
```

**我需要能够动态地将元素添加到文件中，过滤并返回一个子集。**

优选地，返回 XElemets 的集合，以便稍后我可以调用：

```
subset.CreateReader() on. 
```

编辑

**要更清楚。我将希望根据用户名属性返回所有策略对象及其后代。我想要获取该子集并在其上使用 CreateReader()**。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:14:13.717

使用[`Elements()`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.elements.aspx)不指定元素名称的方法来获取所有直接后代：

`XDocument.Root.Elements()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:14:26.957

您可以使用`Elements`不指定名称的重载来获取所有子元素。

```
var xml = @"
<Root>
   <Policy id='832cbfc6-a451-4d77-a995-4ceb9d3bbe01' username ='DCassidy'>     
      <Title>Test 1</Title>    
  </Policy>
  <Policy id='832cbfc6-a451-4d77-a995-4ceb9d3bbe02' userName ='DCassidy'>
    <Title>Test 2</Title>
 </Policy>
</Root>
";
var xElement = XElement.Parse(xml);
var subset = xElement.Elements("Policy").SelectMany(e => e.Elements()); 
```

`subset`是一个，其`IEnumerable<XElement>`内容是：

```
<Title>Test 1</Title> 
<Title>Test 2</Title> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:14:27.293

你的意思不是*很*清楚，但也许：

```
var subset = doc.Elements("Policy").Descendants(); 
```

或者

```
var subset = doc.Elements("Policy").DescendantsAndSelf(); 
```

这将获得*所有*后代，而不仅仅是直接后代。如果您可以更清楚地了解您要实现的目标，那将有所帮助。

# javascript - 如何检查元素 (h2) 是否真的是 div 中的第一个元素？

> ID：13880269
> 
> 赞同：4
> 
> 时间：2012-12-14T14:09:02.050
> 
> 标签：javascript, jquery

我想“管理” div 中的第一个 h2 元素，前提是它真的是“第一个元素”

```
<div id="test">
    <h2>Try 1</h2>
    Test Test Test
    <h2>Try 2</h2>
</div> 
```

这里只有带有文本“Try 1”的 h2 必须被管理

```
<div id="test">
    Test Test Test
    <h2>Try 1</h2>
    <h2>Try 2</h2>
</div> 
```

这里没有（之前有文字）。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:12:00.303

不需要jquery，只需：

```
document.getElementById('test').firstChild.nodeName // gives the name of the node 
```

这将为您提供第一个节点的名称，即使它不是标签而只是纯文本节点！

`document.querySelector()`如果您想更灵活地使用选择器并且知道大多数客户端浏览器都支持它，您当然可以选择使用它。

需要明确的是：如果您添加换行符，这也将被视为文本节点，因此标题需要从同一行开始，否则您将得到`#text`两个示例的结果！

这将失败：

```
<div id="test">
    <h2>Try 1</h2>
    Test Test Test
    <h2>Try 2</h2>
</div> 
```

这将起作用：

```
<div id="test"><h2>Try 1</h2>
    Test Test Test
    <h2>Try 2</h2>
</div> 
```

[给你一个小演示](http://jsfiddle.net/m8VUE/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:18:48.047

我们在这里面临的挑战是 javascript 也将空格识别为文本节点。因此，从 javascript 的角度来看，这个 HTML：

```
<div id="test">
    <h2>Try 1</h2>    
    Test Test Test    
    <h2>Try 2</h2>
</div> 
```

与此 HTML 不同：

```
<div id="test"><h2>Try 1</h2>    
    Test Test Test    
    <h2>Try 2</h2>
</div> 
```

在第一种情况下， 中的第一个节点`div`是 textNode ( `nodeType == 3`) 在第二个 HTML 示例中， 中的第一个节点`div`是`h2`节点。

我为此想出了一个解决方案，这是一个方便的函数，它遍历结合了 jQuery 和本机 javascript 的所有元素。

# 解决方案

```
var objNodes = $(".wrapper").contents().get();

  function loopNodes(objNodes, i) {
    i = (typeof i === "undefined") ? 0 : i;

    if (objNodes[i].nodeType !== 3) {
      return {"isHeader":true, "first":$(objNodes[i])};

    } else {
      var strText = objNodes[i].innerText || objNodes[i].textContent;
      if ($.trim(strText).length === 0) {
        return loopNodes(objNodes, i+1);

      } else {
        return {"isHeader":false, "first":null};

      }
    }
  } 
```

# 用法

```
var objResults = loopNodes(objNodes);
if (objResults.isHeader) {
    console.log("Coolness");
    objResults.first.text("AWESOME FIRST HEADER!"); 
} else {
    console.log("Less Coolness");
} 
```

在行动：http: [//jsbin.com/welcome/61883/edit](http://jsbin.com/welcome/61883/edit)

编辑：添加了获取 innerText/textContent 的跨浏览器方式。有关此事的完整参考资料，请参阅[Quirksmode](http://www.quirksmode.org/dom/w3c_html.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T14:40:26.580

我想我找到了一个[解决方案](http://jsfiddle.net/Gg6Z3/6/)，有点好笑：

```
if($.trim($('#test').html()).substr(0,4).toLowerCase() == "<h2>")
{
    $('#test h2:first').css('background-color', 'red');
} 
```

你有什么想法？:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T14:44:49.253

您可以使用[`.contents`](http://api.jquery.com/contents/)有条件地忽略仅是空白文本的前导节点。然后查看第一个节点是否为`<h2>`（[Fiddle](http://jsfiddle.net/uQmpF/1)）：

```
function isFirstChildH2(selector) {
    // get th efirst node, which may be a text node
    var firstNode = $(selector).contents().first();

    // if the first node is all whitespace text, ignore it and go to the next
    if(firstNode[0].nodeType == 3 && firstNode.text().match(/\S/g) == null) {
        firstNode = firstNode.next();
    }

    if(firstNode.is("h2")) {
        // it's an h2; do your magic!
        alert("h2 is the first thing on " + selector)
     } else {
        // first node is either non-whitespace text or an non-h2 element
        // don't do your magic
        alert("h2 is NOT the first thing on " + selector)
     }
}

isFirstElementH2("#test"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-14T14:54:25.587

这是您将如何过滤以仅获取第一个节点的标题，忽略所有空白文本节点：-

```
$("#test").children("h2").first().filter(function() {

    var childNodes = this.parentNode.childNodes;
    var i = 0;
    var textNode = 3;

    // No children
    if(!childNodes.length) {
        return false;
    }

    // Skip blank text node
    if(childNodes[i].nodeType === textNode && childNodes[i].textContent.trim().length === 0) {
        i ++;
    }

    // Check we have a match
    return childNodes[i] === this;

}); 
```

这是在行动[http://jsfiddle.net/nmeXw/](http://jsfiddle.net/nmeXw/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-14T14:26:39.093

好的，让我们将一些 jQuery 与纯 DOM 代码混合（因为 jQuery 无法处理[文本节点](https://developer.mozilla.org/en/DOM/Text)）：

```
var $el = $("#test > h2:first-child");
if (!$el.length) return false;
var el = $el.get(0),
    reg = /\S/; // no whitespace
for (var prev = el; prev = prev.previousSibling; )
    if (prev.nodeType == 3 && reg.test(prev.data))
        return false;
return el; 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/VssVL/1/)

# javascript - 如果 div 为空白，我们如何隐藏它？

> ID：13880270
> 
> 赞同：0
> 
> 时间：2012-12-14T14:09:02.690
> 
> 标签：javascript, jquery, html, css

**示例：** [http ://partnerswealth.advisorproducts.com/home](http://partnerswealth.advisorproducts.com/home)
[http://mah.advisorproducts.com/home](http://mah.advisorproducts.com/home)

**要求：**

我想在左右 div 或 Box 为空时隐藏它。

**下面是我正在使用的 HTML 代码：**

```
<div class="Box secondaryBackground">
<div class="innerBox containerBackground">
<h2> </h2>
<div class="innerBoxContent">
<div class="eNews"> </div>
</div>
</div>
</div> 
```

**下面是我正在使用的 js** - 并尝试仅在其**innerBoxContent**子 div 为空的 Box 类 div 中添加**DispNone类。**

 ****因此，如果像 eNews 这样的innerBoxContent**类 div 子级为空，我只想在 Box 类 div 中添加类。

```
$(document).ready(function () {
    str = $('.innerBoxContent > div').text();
    if ($.trim(str) === "") {
        $('.innerBox').parent().addClass('DispNone');
    }
    else {
        $('.innerBox').parent().removeClass('DispNone');
    }
}); 
```

我们可以修改这段代码吗？

现在它向所有 innerBox div 添加类，但我只想要那些最后一个子元素为空的 div，比如 .eNews 不是所有的。谢谢苏希尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:24:06.427

你应该能够像这样浏览你的元素：

```
$('.innerBoxContent').each(function() {
    var noContent = 0;
    var count = $(this).children().length;
    $(this).children().each(function() {
        if ($(this).html == '') {
            ++noContent;
        }
    });
    if (noContent === count) {
        $(this).hide();
    }
}); 
```

上面考虑到每个 innerBoxContent 可以有几个孩子，有些可能是空的，有些可能不是。

它未经测试，如果有更聪明的方法，我不会感到惊讶:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:43:39.040

为什么要使用 JS？如果浏览器是 IE8 或者您使用功能检测（如[Modernizer](http://modernizr.com/)推荐的）并发现 :empty 选择器未定义或不可用，则使用它来回退。

CSS 有一个可以使用的[:empty 伪类。](http://reference.sitepoint.com/css/pseudoclass-empty)

> 这个伪类匹配没有子元素的元素。元素节点和非空文本节点被认为是子节点；空文本节点、注释和处理指令不算作子节点。如果文本节点的数据长度为零，则认为它是空的；因此，例如，具有单个空格的文本节点不是空的。

所以，如果你有类似的东西：

```
.innerBoxContent:empty {
display: none;
} 
```

你有

```
<div class="innerBoxContent"></div> 
```

它会起作用的。但是，如果您有：

```
<div class="innerBoxContent">
  <div class="eNews">
  </div>
</div> 
```

选择器不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:13:37.850

你不能只计算 innerBoxContent 孩子吗？

```
if ($('.innerBoxContent > div').length) {
    $('.innerBox').parent().removeClass('DispNone');
} else {
    $('.innerBox').parent().addClass('DispNone');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:16:34.223

```
$(".eNews").each(function(index, element){
    if($(element).html() == ""){
        $(element).parent().hide();
    }
)}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T14:18:15.573

我会说类似

```
$('.innerBoxContent > div').each(function() {
                                      if( this.html() == "" ) {
                                         this.parent().hide();
                                      }
                            }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T14:18:23.373

您应该使用[toggle()](http://api.jquery.com/toggle)函数。

```
 $(document).ready(function () {
        str = $('.innerBoxContent > div').text();
        if ($.trim(str) === "") {
            $('.innerBox').parent().toggle();
        }

    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T14:27:29.500

如果`innerBoxContent`存在 中的内容，然后某些操作从该部分中删除了内容，那么您应该在该事件上进行显示/隐藏，而不是尝试触发在所有事件上运行的事件。

如果内容只是从服务器加载，那么你应该只在它上面应用一个类，而不是依赖 JavaScript 来为你做你的初始演示样式。

许多结果对 JavaScript 有帮助，但如何添加和删除内容是需要放置脚本的地方。

或者将显示/隐藏链接到任何更改内容的事件，您可以设置一个事件发射器，然后通过事件系统连接代码。**

# php - MySQL：选择“project_id”等于具有特定“user_id”的任何“project”的行

> ID：13880271
> 
> 赞同：1
> 
> 时间：2012-12-14T14:09:05.437
> 
> 标签：php, mysql, sql, select

这不会太难，但我不知道我在寻找什么术语。我相信你们可以帮助我。:)

我有一个表`tasks`，其中的行有一列`project_id`。每个`project_id`引用表`id`中的一行`projects`。每个都`project`属于某个特定的`user`，这就是它有一个列的原因`user_id`。

我现在想`tasks`从这个表中选择所有`project_id`等于`project`某个`user`.

## 或者更简单地说：

每个 TASK 都属于属于 USER 的 PROJECT。

我想创建一个 SELECT 语句来接收属于特定用户的所有任务。每个 TASK 和 USER 之间的唯一链接是通过 PROJECT。

我该如何做到这一点？

非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:11:23.367

`JOIN`表格：

```
SELECT
  t.*
FROM tasks t
INNER JOIN projects p ON t.project_id = p.project_id
INNER JOIN users    u ON p.user_id    = u.user_id
WHERE u.user_id = @AcertianUserId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:11:25.433

```
SELECT
  tasks.*
FROM
  users
INNER JOIN
  projects ON users.id = projects.user_id
INNER JOIN
  tasks ON projects.id = tasks.project_id
WHERE
  users.id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:11:12.577

尝试 ：

```
SELECT t.*
  FROM user u, projet p, task t
 WHERE u.id = p.user_id
   AND p.id = t.project_id
   AND u.id = your_id 
```

或（相同的结果）：

```
SELECT t.*
      FROM user u
     INNER JOIN projet p ON u.id = p.user_id
     INNER JOIN task t ON p.id = t.project_id
     WHERE u.id = your_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:15:03.867

[SQL小提琴](http://www.sqlfiddle.com/#!2/8ac21/2/0)

```
select t.*
from tasks t
join projects p on p.id = t.project_id
join users u on u.id = p.user_id
where u.id = 17 
```

# php - 使用 PDO 调用同名存储过程

> ID：13880272
> 
> 赞同：0
> 
> 时间：2012-12-14T14:09:05.920
> 
> 标签：php, pdo, procedure

我的数据库 Postgres 中有两个存储过程，它们的名称相同，但参数不同。

**过程 1(::string, ::integer, ::string, ::integer)**

**过程 1（:: 字符串，:: 整数，:: 整数）**

在 PDO 中正确地执行 bindParam，即将到来 STR、INT、INT 但 prepere 始终执行 procedure1。

我如何让他理解我所说的程序2？

一些信息以获得更多帮助？我清楚吗？谢谢

编辑 ===

...

```
$bounds = null; // forced for debug

if(!is_null($bounds)){
  $query = "SELECT procedure1(:name, :domain, :geo, :userid)";
  $stmt = $db->prepare($query);
  $stmt->bindParam('name', $name, PDO::PARAM_STR);
  $stmt->bindParam('domain', $idDomain, PDO::PARAM_INT);
  $stmt->bindParam('geo', $geoString, PDO::PARAM_STR);
  $stmt->bindParam('userid', $userId, PDO::PARAM_INT);   
}else{
  $query = "SELECT procedure1(:name, :domain, :userid)";
  $stmt = $db->prepare($query);
  $stmt->bindParam('name', $name, PDO::PARAM_STR);
  $stmt->bindParam('domain', $idDomain, PDO::PARAM_INT);
  $stmt->bindParam('userid', $userId, PDO::PARAM_INT); 
}
$result = $stmt->execute(); 
```

...

它给出的错误是他正在运行一个需要四个参数的过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:33:36.347

尝试更改`$query`语句以明确告诉 PDO 类型，并避免额外的代码切换到`bindValue`（PDO 使用 PARAM 标志来格式化 SQL，而不是强制转换数据类型）：

```
$bounds = null; // forced for debug

if(!is_null($bounds)){
  $query = "SELECT procedure1(:name::VARCHAR, :domain::INTEGER, :geo::VARCHAR, :userid::INTEGER)";
  $stmt = $db->prepare($query);
  $stmt->bindValue('name', $name);
  $stmt->bindValue('domain', $idDomain);
  $stmt->bindValue('geo', $geoString);
  $stmt->bindValue('userid', $userId);
}else{
  $query = "SELECT procedure1(:name::VARCHAR, :domain::INTEGER, :userid::INTEGER)";
  $stmt = $db->prepare($query);
  $stmt->bindValue('name', $name);
  $stmt->bindValue('domain', $idDomain);
  $stmt->bindValue('userid', $userId); 
}
$result = $stmt->execute(); 
```

# android - 以编程方式生成的文本视图的全息效果？

> ID：13880280
> 
> 赞同：1
> 
> 时间：2012-12-14T14:09:25.363
> 
> 标签：android, textview, android-holo-everywhere

我正在以编程方式在**LinearLayout上生成****TextView**，我想在触摸 LinearLayout 时 显示以编程方式生成的具有**Holo 效果的 TextView**

 ****```
for (int i = 1; i <= 10; i++)  {
  LinearLayout linLayout= (LinearLayout) findViewById(R.id.sideIndex);
  TextView tv = new TextView(this);
  tv.setTextColor(getResources().getColor(R.color.white));
// tmpTV.setTypeface(font);
  tv.setText(tmpLetter);
  tv.setGravity(Gravity.CENTER);
  tv.setTextSize(11); 
  tv.setTextColor(getResources().getColor(R.color.holo_green_light));

 LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
 LayoutParams.WRAP_CONTENT,2);

 tv.setLayoutParams(params);

 linLayout.addView(tv);
} 
```

我可以用这个查看 Holo TextViews

> tv.setTextColor(getResources().getColor(R.color.holo_green_light));

但是我想在LinearLayout上ontouch后查看TextView上的全息效果。

下面的代码对于以编程方式生成的 TextView 的单个实例工作正常，但是在用户触摸 LinearLayout 后，我​​需要在 Holo 中显示多个文本视图！

```
 linLayout.setOnTouchListener(new OnTouchListener()
    {
        public boolean onTouch(View v, MotionEvent event)
        {
           tv.setTextColor(getResources().getColor(R.color.holo_blue_bright));
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:42:11.640

我想您应该设置全息背景选择器，以便您的文本视图响应选择/按下/聚焦状态。不知道选择器在全息主题中的确切位置或它的命名方式，但应该就是这样。****

# c# - 依赖注入与事件以及通过事件解决循环依赖关系

> ID：13880288
> 
> 赞同：5
> 
> 时间：2012-12-14T14:09:51.360
> 
> 标签：c#, oop, events, dependency-injection

我一直在努力重构应用程序，以通过依赖注入和所有好东西使其更易于管理。这样做时，我不止一次遇到循环依赖。

所以这里是一个循环依赖的典型例子：

```
interface IA
{
    int Data { get; }
}
interface IBefore
{
    void DoStuffBefore();
}
class A: IA
{
    public int Data { get; private set; }
    IBefore before;
    public A(IBefore before)
    {
        this.before = before;
    }
    public void Increment()
    {
        before.DoStuffBefore();
        Data++;
    }
}
class B: IBefore
{
    IA a;
    public B(IA a)
    {
        this.a = a;
    }
    public void WriteADataToConsole()
    {
        Console.Write(a.Data);
    }
    public void DoStuffBefore() //From IBefore
    {
        WriteADataToConsole();
    }
} 
```

我不能创建任何一个类，因为它们需要彼此。现在，在这种情况下要做的标准（？）事情是将 A 的数据与 A 分开：

```
public interface IA
{
    int Data { get; set; }
}
public interface IBefore
{
    void DoStuffBefore();
}
class AData : IA
{
    public int Data { get; set; }
}
class A
{
    public IA Data { get; private set; }
    IBefore before;
    public A(IA data, IBefore before)
    {
        this.Data = data;
        this.before = before;
    }
    public void Increment()
    {
        before.DoStuffBefore();
        Data.Data++;
    }
}
class B : IBefore
{
    IA a;
    public B(IA a)
    {
        this.a = a;
    }
    public void WriteADataToConsole()
    {
        Console.Write(a.Data);
    }
    public void DoStuffBefore() //From IBefore
    {
        WriteADataToConsole();
    }
} 
```

以上解决了循环依赖，因为我现在可以先创建 AData，然后将其注入 B 并将 B 注入 A。但我也可以将事件 i IA 放入 B 可以听的：

```
public interface IA
{
    int Data { get; }
    event Action BeforeEvent;
}

class A: IA
{
    public int Data { get; private set; }
    public event Action BeforeEvent;
    public void Increment()
    {
        BeforeEvent();
        Data++;
    }
}

class B
{
    IA a;
    public B(IA a)
    {
        this.a = a;
        a.BeforeEvent += new Action(WriteADataToConsole);
    }
    void WriteADataToConsole() //Event listener
    {
        Console.Write(a.Data);
    }
} 
```

这是我偶然发现的，因为我试图将事件方法转换为依赖注入，并意识到这样做我得到了一个循环依赖。

困扰我大脑的一些问题是：

*   两种解决方案都解决了循环依赖（对吗？），据我所知，它们可以将 A 扩展到同等程度，但哪个被认为是最好的设计？
*   什么时候使用事件以及什么时候使用 DI 来解决循环依赖以及一般情况下的一些指导方针是什么？
*   显然，如果 A 需要 B 的返回值，则事件并不好。这是否意味着当返回 void 时总是首选事件？
*   每种解决方案的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:44:31.120

好问题！在 95% 的情况下，您*必须*将这两个实体合并在一起或以其他方式打破依赖关系，但是……如果您不能出于某种原因将它们合并到一个实体中怎么办（使用 UI 有时可能会如此棘手）？Mark Seemann有一本关于[“.NET 中的依赖注入”](http://www.manning.com/seemann/)的书，其中描述了两种打破循环依赖的方法：

*   *事件*- 根据 DI 书籍的首选方式，您已经这样做了。**对我来说看起来不错**
*   *属性注入*——与*构造函数注入*相反，*属性注入*意味着注入的资源是**可选**的。

在具有属性的第二个实现中，有一个构造函数：`public A(IA data, IBefore before)` . `IA data`就依赖注入而言，两者`IBefore before`都是*必需*的——这里是破解 cicle 的最佳点！这是一个可选的实现`IBefore`：

```
class A
{
    public IA Data { get; private set; }
    public IBefore Before { get; set; }

    public A(IA data)
    {
        this.Data = data;
    }
    public void Increment()
    {
        // here should be design decision: if Before is optional…
        if(Before == null)
        {
            Before.DoStuffBefore();
        }    

        // …or required
        if(Before == null)
        {
            throw new Exception("'Before' is required");
        }

        Data.Data++;
    }
} 
```

由您决定，如果是可选的则跳过`Before.DoStuffBefore()`调用`Before`，或者如果需要则引发异常

根据你的问题：

*   *哪个被认为是最好的设计？有什么指导方针？利弊*——恕我直言，两者都可以。事件更笼统。属性更容易实现和处理
*   *返回 void 时，事件总是首选？*- 我同意

# jquery - 使用 JQuery 移动

> ID：13880290
> 
> 赞同：3
> 
> 时间：2012-12-14T14:09:56.760
> 
> 标签：jquery, html-table

我的页面上有一个表格，如下所示：

```
 <table border="1">
    <tr>
        <td>first</td>
        <td><a href="#">first click</a></td>
     </tr>
     <tr>
         <td>second</td>
         <td><a href="#">second click</a></td>
     </tr>
     <tr>
         <td>third</td>
         <td><a href="#">third click</a></td>
     </tr>
     <tr id="change">
         <td colspan="2">
            <button>change</button>
          </td>
     </tr>
  </table> 
```

当我单击链接时，我希望在单击的链接下移动“#change”。例如; 当我点击“第一次点击”时，表格会发生这样的变化..

```
 <table border="1">
    <tr>
        <td>first</td>
        <td><a href="#">first click</a></td>
     </tr>
     <tr id="change">
         <td colspan="2">
            <button>change</button>
          </td>
     </tr>
     <tr>
         <td>second</td>
         <td><a href="#">second click</a></td>
     </tr>
     <tr>
         <td>third</td>
         <td><a href="#">third click</a></td>
     </tr>
  </table> 
```

我怎样才能用 JQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:17:14.627

试试这个：

```
$('table tr td a').click(function () {
    $(this).closest('tr').after($('#change'));
});​ 
```

[小提琴](http://jsfiddle.net/NQ4tQ/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:19:58.223

```
jQuery('td a').click(function(){
    $(this).parents("tr").after($('#change'));
}); 
```

[http://jsfiddle.net/6AMnV/](http://jsfiddle.net/6AMnV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:24:09.393

使用*事件委托*，因此只添加事件监听器而不是几个：

```
// Using Event Delegation only adds one event listener
​$("table").on("click", "a", function (event) {
    // Prevent any navigation or jumping to the top of the page
    event.preventDefault();
    // Find the closest <tr>, insert #change after it.
    $(this).closest("tr").after($("#change"));
});​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:12:31.143

试试这个（未经测试）

```
jQuery('td a').each(function(){
    var j = jQuery(this);
    jTr = j.closest('table').find('#change');
    j.closest('tr').after(jTr);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T14:23:13.270

```
$("a").click( function(){
  var $change = $('#change');
  $('#change').remove();  
  $(this).closest('tr').after($change);
});​ 
```

# java - 秒表列表视图动态更新-android

> ID：13880291
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:09:56.747
> 
> 标签：java, android

我目前有一个列表视图，其中每个项目代表当前经过的时间。我想做的是每次用户单击 Lap 按钮时，都会将当前秒表时间添加到列表中。当我运行它并按下 lap 时没有任何反应。我是这样设置的：

```
public class MainActivity extends Activity {
    ArrayList<String> list =new ArrayList<String>();
    ArrayAdapter<String> adapter;
    ListView myList = (ListView)findViewById(R.id.list);

    public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);
           adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);
           myList.setAdapter(adapter);
           final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
           final ImageButton buttonLap = (ImageButton)findViewById(R.id.lap);

           buttonLap.setOnClickListener(new Button.OnClickListener(){
           @Override
           public void onClick(View v) {
               String s = "" + (SystemClock.elapsedRealtime() - myChronometer.getBase());
               list.add(s);
               adapter.notifyDataSetChanged();

           }});
     }
} 
```

这是日志：

```
12-14 09:46:13.557: E/AndroidRuntime(954): FATAL EXCEPTION: main
12-14 09:46:13.557: E/AndroidRuntime(954): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.MainActivity}: java.lang.NullPointerException
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.os.Looper.loop(Looper.java:137)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-14 09:46:13.557: E/AndroidRuntime(954):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 09:46:13.557: E/AndroidRuntime(954):  at java.lang.reflect.Method.invoke(Method.java:511)
12-14 09:46:13.557: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-14 09:46:13.557: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-14 09:46:13.557: E/AndroidRuntime(954):  at dalvik.system.NativeStart.main(Native Method)
12-14 09:46:13.557: E/AndroidRuntime(954): Caused by: java.lang.NullPointerException
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.Activity.findViewById(Activity.java:1825)
12-14 09:46:13.557: E/AndroidRuntime(954):  at com.example.myfirstapp.MainActivity.<init>(MainActivity.java:22)
12-14 09:46:13.557: E/AndroidRuntime(954):  at java.lang.Class.newInstanceImpl(Native Method)
12-14 09:46:13.557: E/AndroidRuntime(954):  at java.lang.Class.newInstance(Class.java:1319)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
12-14 09:46:13.557: E/AndroidRuntime(954):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
12-14 09:46:13.557: E/AndroidRuntime(954):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:51:33.317

这条线

```
ListView myList = (ListView)findViewById(R.id.list); 
```

必须紧随**其后**

```
setContentView(R.layout.activity_main); 
```

**里面** `OnCreate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:52:53.043

你的问题是这样的：

```
 ListView myList = (ListView)findViewById(R.id.list); 
```

你在设置内容视图之前调用它，所以你得到一个 null 然后你试图使用它。使用后，您需要将其移至您的`onCreate`方法中`setContentView`。

# javascript - 如果所有元素仍然具有自定义属性，则循环遍历所有元素（动态驱动的内容）

> ID：13880292
> 
> 赞同：0
> 
> 时间：2012-12-14T14:09:57.277
> 
> 标签：javascript, jquery, ajax, dynamic, yui

在这篇文章[链接](https://stackoverflow.com/questions/13691630/loop-through-all-elements-dynamically-driven-content-if-they-all-still-have-sp)上，我也问了这个问题。

我有以下标记：

```
 <ul id="tracks"> 
 <li pl_id="14" class="item" id="5" >1</li> 
 <li class="item" id="1" >2</li>
 <li pl_id="14" class="item" id="3" >3</li>
 </ul> 
```

如果所有的 li 都有 pl_id attr 然后显示一个按钮。在上述情况下，按钮应该被隐藏......

作为答案，我得到以下信息：

```
$("#buttonID").toggle($("ul > li").filter(function() {
return !this.hasAttribute("pl_id");
}).length === 0); 
```

带演示：[演示](http://jsfiddle.net/HBbk3/)

但是 - 这不适用于~~实时 ajax~~动态驱动的内容（以及使用 yui3 拖放 li。可以随时添加和删除 li 那么，我怎样才能使它成为“实时”事件？我想添加对此，我想将其扩展为具有相同的值，因此：所有具有 pl_id=1 的都可以，其中一个 havinf pl_id=2 是：隐藏按钮。

**这是我的新演示：** [链接](http://jsfiddle.net/double0seven/HBbk3/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:12:39.860

当您说 ajax 内容时，您是否确保您的代码在 ajax 调用的 onSucess() 上运行？确保发生这种情况并且您的代码会很好。

您提供的示例中没有 ajax 请求。所以我认为这是问题所在

# c# - 正则表达式 c# 问题

> ID：13880298
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:10:16.667
> 
> 标签：c#, regex

我有一个html代码。我用这样的正则表达式解析它

```
MatchCollection matches = Regex.Matches(go, @"photoWrapper""><div><a href=""(?<id>[^""]+?)\?"); 
```

我收到：

```
matches[0].Groups["id"].Value = "/group/47502002094086";
matches[1].Groups["id"].Value = "/dk";
matches[2].Groups["id"].Value = "/prostooglavnom"; 
```

如何编辑我的正则表达式或添加 smth，仅接收匹配项

```
matches[0].Groups["id"].Value = "47502002094086";
matches[1].Groups["id"].Value = "prostooglavnom"; 
```

任何帮助？=\ 完整的 html 代码： http: [//pastebin.com/xEJNiD4G](http://pastebin.com/xEJNiD4G)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T14:13:51.827

您刚刚发现了为什么[Regex 是解析 HTML 的糟糕选择](https://stackoverflow.com/a/1732454/1583)。

我建议您使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex) 来解析和查询您的 HTML。

源代码下载带有许多示例项目。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建了一个读/写 DOM 并支持普通的 XPATH 或 XSLT（你实际上不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

# android - 以编程方式自定义 ScrollBar

> ID：13880302
> 
> 赞同：13
> 
> 时间：2012-12-14T14:10:34.407
> 
> 标签：android, scrollbar

我的要求是，只要视图的总高度大于列表的允许高度，就显示带有滚动条的垂直视图列表。

此外，我需要以编程方式自定义滚动条外观（背景和拇指）。（在运行时，我的活动将接收所有数据来进行渲染：用作滚动条背景的位图、滚动条宽度和用作滚动条拇指的位图。）

A[`ListView`](http://developer.android.com/guide/topics/ui/layout/listview.html)似乎是一个很好的候选者，除了我找不到以编程方式自定义滚动条的方法。[我在 listView 中](https://stackoverflow.com/questions/6880720/scrollbar-in-a-listview-customizing-it)阅读了这个问题滚动条...自定义它。但是，它使用了一个主题，并且 AFAIK 不可能以编程方式创建一个新主题。

所以我的问题：

1.  **有没有办法以编程**方式自定义滚动条的外观（在 ListView 中）？

2.  [只有当第一个答案是“绝对不可能”时]您是否看到任何其他方法来满足这些要求（以及一些这样做的工作示例）

谢谢。

**编辑（23/12）**

我找到了这个隐藏的类`android.widget.ScrollBarDrawable`。可能是构建解决方案的一个很好的起点（现在没有时间研究它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T13:16:28.720

> 有没有办法以编程方式自定义滚动条的外观（在 ListView 中）？

从字面上看，它看起来不像，只是因为没有设置器来操作它。

可以想象，您可以创建自己的`BenView`子类`View`来替换隐藏`ScrollBarDrawable`的`BenScrollBarDrawable`处理动态变化的子类。但是，您需要创建`BenViewGroup`、`BenAbsListView`和`BenListView`，克隆它们的无 Ben 对应物的源代码，以使它们链接起来`BenView`以继承此行为。而且，由于任何 Android 版本中`ViewGroup`、`AbsListView`或`ListView`中的一个必然会发生变化，因此您实际上将需要这些类的 N 个副本，并在运行时根据 API 级别选择正确的副本。然后，您的应用程序可能仍然在制造商进入并修改 、 或 的某些设备上表现异常`ViewGroup`，`AbsListView`并且`ListView`您将不会使用他们的代码。

我怀疑这是值得的，特别是因为滚动条默认情况下是不可见的，除非在滚动时。

> 您是否看到任何其他方式来实现这些要求（以及一些这样做的工作示例）

处理你自己的触摸事件来做你自己的滚动和你自己的滚动条的事情。这是否比上述解决方案工作量少还有待商榷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-22T11:31:21.173

我刚刚遇到了 RecyclerView 的同样问题并像这样解决了它

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.PorterDuff;
import android.graphics.drawable.Drawable;
import android.support.annotation.ColorInt;
import android.support.v7.widget.RecyclerView;
import android.util.AttributeSet;

/**
 * Created on 22.3.2016.
 *
 * @author Bojan Kseneman
 * @description A recycler view that will draw the scroll bar with a different color
 */
public class CustomScrollBarRecyclerView extends RecyclerView {

    private int scrollBarColor = Color.RED;

    public CustomScrollBarRecyclerView(Context context) {
        super(context);
    }

    public CustomScrollBarRecyclerView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomScrollBarRecyclerView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setScrollBarColor(@ColorInt int scrollBarColor) {
        this.scrollBarColor = scrollBarColor;
    }

    /**
     * Called by Android {@link android.view.View#onDrawScrollBars(Canvas)}
     **/
    protected void onDrawHorizontalScrollBar(Canvas canvas, Drawable scrollBar, int l, int t, int r, int b) {
        scrollBar.setColorFilter(scrollBarColor, PorterDuff.Mode.SRC_ATOP);
        scrollBar.setBounds(l, t, r, b);
        scrollBar.draw(canvas);
    }

    /**
     * Called by Android {@link android.view.View#onDrawScrollBars(Canvas)}
     **/
    protected void onDrawVerticalScrollBar(Canvas canvas, Drawable scrollBar, int l, int t, int r, int b) {
        scrollBar.setColorFilter(scrollBarColor, PorterDuff.Mode.SRC_ATOP);
        scrollBar.setBounds(l, t, r, b);
        scrollBar.draw(canvas);
    }
} 
```

这些方法是在 View 类中定义的，因此同样的原则应该适用于其他视图，如 ScrollView 和 ListView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:13:21.000

只需根据您的需要更改`android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb"` 并创建一个drawable。

像

```
<ListView android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb" /> 
```

在可绘制对象中：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" > 
    <gradient android:angle="0" android:endColor="#6699FF" android:startColor="#3333FF" />
    <corners android:radius="1dp" /> 
    <size android:width="1dp" /> 
</shape> 
```

我想这就是你想要的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T15:46:56.693

如果您只需要支持 API 24 或更高版本，则可以使用自定义 drawable 来完成此任务。您需要决定如何允许可绘制对象与活动进行通信。这是一种可能的解决方案。

res/drawable/my_custom_scrollbar_thumb.xml

> <com.example.RegisteredMutableDrawable android:id="@+id/scroll_thumb" />

res/drawable/my_custom_scrollbar_track.xml

> <com.example.RegisteredMutableDrawable android:id="@+id/scroll_track" />

在你的布局文件中的某个地方

> <ListView android:scrollbarTrackVertical="@drawable/my_custom_scrollbar_track" android:scrollbarThumbVertical="@drawable/my_custom_scrollbar_thumb"

可绘制的实现

```
public class RegisteredMutableDrawable extends DrawableWrapper
{
    public static interface Registrar
    {
        public void register(int _id, RegisteredMutableDrawable _drawable);
    }

    public static Registrar registrar;

    private static int[] ATTRS = new int[] { android.R.attr.id };

    public RegisteredMutableDrawable()
    {
        super(null);
    }

    public void inflate(Resources _res, XmlPullParser _parser, AttributeSet _as, Theme _theme)
        throws XmlPullParserException, IOException
    {
        super.inflate(_res, _parser, _as, _theme);
        final Registrar r = registrar;
        if (r != null)
        {
            final TypedArray ta = _res.obtainAttributes(_as, ATTRS);
            final int id = ta.getResourceId(0, 0);
            ta.recycle();
            r.register(id, this);
        }
    }
} 
```

在你的活动中

```
public class MyActivity extends Activity implements RegisteredMutableDrawable.Registrar
{
    @Override public void onCreate(Bundle _icicle)
    {
        super.onCreate(_icicle);
        RegisteredMutableDrawable.registrar = this;
        setContentView(R.layout.whatever);
        RegisteredMutableDrawable.registrar = null; // don't leak our activity!
    }

    @Override public void register(int _id, RegisteredMutableDrawable _drawable)
    {
        switch(_id)
        {
            case R.id.scroll_thumb:
                _drawable.setDrawable(myThumbDrawable);
                break;
            case R.id.scroll_track:
                _drawable.setDrawable(myTrackDrawable);
                break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-28T06:58:44.020

您可以使用 jquery 插件（jquery.nicescroll.js）来实现这一点。更多详情请访问 [http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)

# svn - 如何将文本文件从颠覆恢复到我的本地文件夹

> ID：13880305
> 
> 赞同：1
> 
> 时间：2012-12-14T14:10:45.123
> 
> 标签：svn, tortoisesvn

我是颠覆的新手用户。在“主干”文件夹中，我有一个带有红色 X 的文件夹。我从颠覆文档中了解到，下次选择 COMMIT 时，该文件夹中带有 RED X 旁边的文本文件“READ ME”将被删除。我显然没有做过 COMMIT。我想问我如何才能从 subversion 存储库中再次下载这个文件？有没有办法做到这一点？我假设是，但是当我在 Windows 资源管理器中右键单击显示所有 Tortoisesvn 选项的文件时找不到它。

任何帮助/方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:14:56.523

您需要右键单击该文件并转到 tortoisesvn 然后转到还原。您也可以在列出文件的提交窗口中执行此操作。

# c++ - Qt 用于非 UI 应用程序？

> ID：13880306
> 
> 赞同：4
> 
> 时间：2012-12-14T14:10:50.667
> 
> 标签：c++, qt, cross-platform

我希望将 Qt 用于非 UI 应用程序。它有可能在设备上运行，但会在桌面上启动。UI 部分（我知道，我说的是非 UI）将是一个带有 HTML(5)/AJAX 的 Web 服务器。

我真的只会将 Qt 用于基本的跨平台内容，例如线程、同步、序列化、资源（字符串，可能是图像）、国际化等。

对于这样的事情，Qt 或 Boost 并自己创建跨平台层，哪个会更好？

Qt对我需要的东西感觉有点沉重，但我想听听其他人有什么经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:15:59.570

是的，使用 QtCore（和其他非 GUI 模块）应该可以满足您的需要。在 Boost 和 QtCore 之间进行选择：两者都做得很好，有时它们会交错。但不总是。

Qt(Core) 主要提供功能。Boost主要提供实现功能的工具。例如，您在 Boost 中拥有模板和函子，而不是在 Qt 中。OTOH，如果您需要消息泵等，您只能在 Qt 中找到它们。

这实际上取决于您要达到的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:18:05.207

是的，在我看来这完全没问题。例如，与 Java 相比，我不会说 Qt 很重，Java 非常广泛地用于此类任务。Qt 非常强大、干净、简单和快速。我经常使用它，我不知道它有什么主要缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:26:20.247

你的提议是完全合理的。您想跨平台使用许多功能（您提到的线程等）。本质上，您有很多选择，如下所示：

选项 1（不好）：编写自己的跨平台包装器。您将重新发明轮子，并且您可能无法像 Qt 那样处理尽可能多的跨平台案例和功能。此选项还意味着继承您的代码的任何人都必须处理您的自定义库，而不是一个支持良好且文档齐全且易于访问的库。

选项 2（不推荐）：为您想要的每个功能使用单独的跨平台解决方案，例如线程、网络等。这意味着您（和您的继任者）将来必须保持与大量库的兼容性。

选项 3（推荐）：使用单个、文档齐全、易于访问的库来满足您的所有需求。Qt 符合要求。

# ruby-on-rails - will_paginate 不适用于使用 find 检索的记录

> ID：13880307
> 
> 赞同：0
> 
> 时间：2012-12-14T14:10:52.690
> 
> 标签：ruby-on-rails, will-paginate

我在控制台中输入这个：

```
user.bookmarks.page(1) 

-> ok

Bookmark.find([21, 23]).page(1)

-> undefined method `page' for #<Array:0x5b2b3a0> 
```

还尝试使用 paginate 方法：`Bookmark.find([21, 23]).paginate(page: "1")`，结果相同。

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:18:14.573

也许是这样：

```
Bookmark.paginate(:conditions => {:id => [21,23]}, :page => 1) 
```

或更简单：

```
Bookmark.where(:id => [21,31]).page(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:32:47.533

如果您使用的是 rails 3 或更高版本，需要在 config/application.rb 中显式加载 will_paginate/array 以对数组进行分页（使用 Bookmark.find 或 Bookmark.all）

# java - 如何从 jsf 的数据库表中填充 h:selectOneMenu ？

> ID：13880314
> 
> 赞同：2
> 
> 时间：2012-12-14T14:11:18.967
> 
> 标签：java, jsf, selectonemenu

我有一个类别表

```
 categoryId
 catName
 description
 image 
```

我想`<h:selectOneMenu>`用`itemLabel` `categoryName`和它的值填充`categoryId`。

应该用我该`ManagedBean`怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:24:50.620

您可以为此使用 SelectItem 列表。您将需要一种在托管 bean 中生成如下选择项列表的方法，

```
public List<SelectItem> getAllCatagories(){

   List<SelectItem> items = new ArrayList<SelectItem>();
   List<Category> categoryList = dao.getAllCategory();
    for(Category category: categotyList){
       items.add(new SelectItem(category.getCategoryId(), category.getName()));
   }
   return items;
} 
```

并像这样使用它

```
<h:selectOneMenu value="#{controllerBean.selectedCategory}" >
            <f:selectItems value="#{controllerBean.allCategories}"/>
</h:selectOneMenu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:23:32.383

您必须使用`f:selectItems`标签：

```
<h:selectOneMenu value="#{yourBean.itemValue}">                     
    <f:selectItems value="#{yourBean.yourItems}" />
</h:selectOneMenu> 
```

然后，`YourBean`需要有一个`Map`字段，存储从数据库中获取的值，其中地图的键（我建议是字符串）是标签，值是关联的对象。

```
Map<String,YourObject> yourItems = new HashMap<String,YourObject>();

public Map<String,YourObject> getYourItems() {
    return yourItems;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T13:36:40.407

尝试这样的事情

xhtml

```
 <h:form>
        <h:panelGrid>
            <h:selectOneMenu value="#{myMB.id}">
                <f:selectItem itemLabel="Please select one" itemValue="#{null}" />
                <f:selectItems value="#{myMB.items}" />
            </h:selectOneMenu>
        </h:panelGrid>
        <h:commandButton action="#{myMB.go}" value="Go"/>
    </h:form> 
```

mb

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.model.SelectItem;

@ManagedBean
@ViewScoped
public class MyMB implements Serializable{

    private static final long serialVersionUID = 1L;
    private List<SelectItem> items = new ArrayList <SelectItem> ();
    private Long id;

    @PostConstruct
    public void init(){
        SelectItem si = new SelectItem();
        si.setLabel("My Label");
        si.setValue(666L);

        items.add(si);
    }

    public List<SelectItem> getItems() {
        return items;
    }

    public void setItems(List<SelectItem> items) {
        this.items = items;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public void go(){
        System.out.println(id);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T16:07:07.750

您可以使用循环从列表中获取数据，如下所示：

```
<h:outputText value="Role :" />
<p:selectOneMenu value="#{myBean.id_Role}">
    <c:forEach var="role" items="#{myBean.rolesList}">
        <f:selectItem itemLabel="${role.name_Role}" itemValue="${role.id_Role}" />
    </c:forEach>
</p:selectOneMenu> 
```

在你的 bean 中：

```
private List<Role> rolesList;
//And then fill the list from database 
```

就我而言，我使用休眠从数据库中获取数据，它对我有用。

我希望它有帮助！

# ios - iPad 2 hd，我会有内存问题吗？

> ID：13880317
> 
> 赞同：0
> 
> 时间：2012-12-14T14:11:27.563
> 
> 标签：ios, ipad, memory

我有一个适用于第一代 iPad 的应用程序。这是一款使用 cocos2d 框架制作的游戏。

第一台 iPad 确实有 256mb 内存，并且使用工具（内存监控工具）我能够确定该应用程序在设备上的内存约为 90-110mb Memory Free”一开始就显示它是~128mb free，然后在玩了几个级别后免费达到~3-4mb，并且永远不会变得更高）

因此，虽然它确实有足够的内存，但它会缓存资产，当内存用完时，缓存的资产会被释放。

我所做的是将高分辨率图形添加到它。几乎所有的资产都加载为 4 位资产，所以假设我有一个 100x100 像素的资产，它将消耗 100x100x4 = 40000 字节内存；相同的高清图像将是 200x200 像素，将消耗 200x200x4 = 16000 字节内存；这是4倍大！

所以问题是 - 它可以在具有 512mb 内存的 iPad 2 高清屏幕上正常工作吗？

看看我是否将 ~110mb*4 相乘，它将是 ~440mb，这意味着它将是 512 - ~440 = ~72mb 留给系统。所以我不知道这对系统来说是否足够，它不会关闭应用程序。我不确定，但我认为第一代 iPad 可能会为应用程序提供大约 120-130mb 内存，然后将其关闭。所以这让我觉得这在 iPad2 上是行不通的。我可能是正确的吗？

ps：我已经在 3d gen iPad 上测试了这个应用程序，它有 1gb ram，它运行得很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:33:16.203

iPad 2 的屏幕分辨率与最初的 iPad 相同，因此它不会使用您添加到应用程序中的新视网膜图稿。这意味着如果它已经在运行原始 iPad，它应该在 iPad 2 上运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:36:01.147

iPad 2 没有 Retina 屏幕，因此 iPad 2 的物理分辨率与 iPad 1 相同。仅在支持它的设备上进行 Retina 风格的图像，这样您就可以在可以运行的设备上保持低内存'不处理视网膜分辨率。

# c# - 如何在网络上的所有机器上安装 .NET Windows Forms 应用程序？

> ID：13880320
> 
> 赞同：1
> 
> 时间：2012-12-14T14:11:51.453
> 
> 标签：c#, winforms, installation, windows-installer, setup-deployment

我在 .NET 4.0 中创建了一个[Windows 窗体应用程序。](http://en.wikipedia.org/wiki/Windows_Forms)现在有大约 20 台客户端机器，每次构建更改时都必须重新安装应用程序。

有没有办法一次将应用程序推送到客户端网络中的所有机器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:21:16.037

[ClickOnce](https://msdn.microsoft.com/en-us/library/t71a733d(v=vs.140).aspx)是您的朋友。

简而言之，ClickOnce 允许您将应用程序发布到服务器，用户可以浏览到相关的安装网站并安装您的软件。

如果您的 ClickOnce 设置设置正确，则每次用户启动应用程序时，应用程序都会检查服务器上的更新，如果存在则下载并更新应用程序。

值得注意的是，每次更新都会重新安装整个应用程序。这可以为您省去很多麻烦，但如果您的应用程序很大，如果您经常更新系统，这对您的用户来说可能是一场噩梦。点击上面提供的链接以获取有关此部署机制的所有 Microsoft 信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:16:19.973

您可以让您的系统管理员创建一个组策略来执行此操作。

# ssas - 如何强制用户只按一定的维度组合浏览数据

> ID：13880323
> 
> 赞同：1
> 
> 时间：2012-12-14T14:11:59.570
> 
> 标签：ssas

我有一个名为“sales”的事实表 - 以及名为“Year”、“Type”的两个维度

我想禁止用户仅按“年份”维度浏览数据，因为按“年份”汇总的销售额没有意义。

请告诉我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:16:40.687

我想一种简单的方法是将两个维度合并为一个并实现层次结构

----- 类型 -------- 年份

将 sales 连接到上述层次结构，并将**AttributHierarchyEnabled = False设置为****type**和**Year**的每个字段

# windows - 某些 Windows 服务的网络活动

> ID：13880324
> 
> 赞同：0
> 
> 时间：2012-12-14T14:12:04.573
> 
> 标签：windows, service, network-monitoring, network-analysis

您建议使用什么工具来记录某些 Windows 服务的网络活动（流量）？它是用 C# 编写的 Windows 服务。服务在给定的时间间隔内连接到 Mysql 服务器。我想记录一段时间（24 小时）并分析它的行为方式。

Windows 资源监视器可以完成这项工作，但我需要将其记录到文件中。带有发送和接收值的日期时间戳就足够了。你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:16:47.180

Wireshark 可以将网络流量记录到文件中，但它不会绑定到特定的 Windows 服务。尽管您可以进行过滤，以便它仅记录特定对话中涉及的流量。因此，您可以过滤服务器和 MySql 服务器之间的流量以及发生对话的特定端口。

Wireshark 适用于 Windows、Linux 和 macOS。它在所有意义上都是免费的。

你可以在这里获得 Wireshark：[http ://wireshark.org/](http://wireshark.org/)

# php - 在页面墙上获取其他人的帖子（Facebook API）

> ID：13880326
> 
> 赞同：4
> 
> 时间：2012-12-14T14:12:10.550
> 
> 标签：php, javascript, facebook, facebook-graph-api

我已经搜索了周围，但找不到答案，所以我在这里尝试。

是否可以通过页面墙上获取其他人的帖子（参见图片示例：[http](http://d.pr/i/fklT) ://d.pr/i/fklT ）。Facebook的API？

我已经尝试过使用 /PAGE_ID/posts，但这只会给我由页面创建的更新，而不是由喜欢该页面的人创建的更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:34:14.980

正如 Martin 所说，使用 FQL 的 Graph API 是可能的。我尝试了马丁的解决方案，但需要稍微改变一下。

定义`filter_key = 'others'`没有帮助。相反，您可以将其替换为`actor_id != YOUR_PAGE_ID`，因此，最后，您可以拥有：

```
https://graph.facebook.com/fql?q=SELECT post_id, created_time , app_data, type, actor_id, target_id, message FROM stream WHERE  source_id = YOUR_PAGE_ID AND actor_id != YOUR_PAGE_ID&access_token=YOUR_ACCESS_TOKEN 
```

如果您需要更多变量，只需将它们放在 SELECT 之后，您可以在此处查看它们：[https ://developers.facebook.com/docs/reference/fql/stream](https://developers.facebook.com/docs/reference/fql/stream)

在 iOS 上，您**不需要将访问令牌放入查询中。**要检查如何使用最新的 iOS SDK 执行此操作，请在此处查看我的答案：[https ://stackoverflow.com/a/14357179/675486](https://stackoverflow.com/a/14357179/675486)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:39:22.590

这可以通过使用 FQL 而不是普通的图形对象来实现：

```
https://graph.facebook.com/fql?q=SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key = 'others' AND source_id = YOUR_PAGE_ID&access_token=YOUR_ACCESS_TOKEN 
```

有关 FQL 的更多信息：[https ://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-21T16:06:41.257

使用graph api，您可以获取查询字段“feed”而不是“posts”的所有帖子（包括其他人的帖子），例如/PAGE_ID/feed。我从另一个答案中得到了这个：

[https://stackoverflow.com/a/14401026/1449045](https://stackoverflow.com/a/14401026/1449045)

# android - ANDROID 通过意图在我自己的应用程序之间共享信息

> ID：13880340
> 
> 赞同：0
> 
> 时间：2012-12-14T14:13:15.447
> 
> 标签：android, android-intent, bluetooth

我想通过蓝牙意图在我自己在两部不同手机上运行的应用程序之间共享信息。

假设我有一些数据`phone a`，然后我将点击*同步*，它将启动同一个应用程序`phone b`（如果它尚未打开），并带有包含该“数据”的包。

我的应用程序相应地`phone b`起作用。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:14:17.003

根据我的理解，这是不可能的。改用 BluetoothSocket 和 BluetoothServerSocket

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:23:13.070

我不确定这是否是你要找的。

```
Intent i = new Intent(Intent.ACTION_SEND); i.setType("image/jpeg"); 
i.putExtra(Intent.EXTRA_STREAM, Uri.parse(fileLocation)); 
startActivity(Intent.createChooser(i, "Send Image")); 
```

此意图显示文件发送的所有可用选项，例如电子邮件和蓝牙。选择蓝牙，设备启动蓝牙发现。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:09:04.750

我最近看到了这个关于 NFC 的有趣视频，我知道你在谈论蓝牙。但观看此视频[http://www.youtube.com/watch?feature=player_detailpage&v=49L7z3rxz4Q#t=768s](http://www.youtube.com/watch?feature=player_detailpage&v=49L7z3rxz4Q#t=768s)
*添加时间戳，开始于：12:48*。

他们所做的是通过 nfc 启动应用程序，但可能他们通过蓝牙发送数据。它真的很人性化。这样，您无需按下按钮同步，只需将彼此的手机撞在一起！

我希望这可能对您有所帮助，
丹尼尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:23:56.340

我认为您必须使用 BluetoothServerSocket 来接受传入的连接。连接后与服务器交换数据。要开始查看此文档。

[启动](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

您可以在 SDK 中找到源代码。从 Android SDK 管理器下载示例。从所需的 SDK 版本中选择“Samples for SDK”。

去

```
<location of android-sdk>/samples/<version>/ 
```

打开“蓝牙聊天”应用程序。它几乎拥有您需要的一切。

谢谢！

对了，别忘了接受答案！

# eclipse - eclipse导入包

> ID：13880348
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:13:39.563
> 
> 标签：eclipse

有没有办法组织导入（例如，org 和 com 一起），而不删除未使用的导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:22:46.660

转到`Preferences -> Java -> Code Style -> Clean Up`，编辑配置文件并选择`Unnecessary Code`选项卡。

取消选中`Remove Unused Imports`

# asp.net-mvc - 从 Visual Studio 2012 中的 MVC 4 中的 SimpleMembership 开始

> ID：13880353
> 
> 赞同：1
> 
> 时间：2012-12-14T14:13:55.730
> 
> 标签：asp.net-mvc, asp.net-mvc-4, security

我正在 MVC 4 中创建需要自定义登录、身份验证和基于角色的系统的 Web 应用程序。我的意图是使用 SimpleMembership 和 SimpleRole，但在我的应用程序中很难开始并掌握它的基本含义。

我已经有了数据库，例如 DB1.mdf，并使用 userId 和 UserName 创建了用户表。我相信我需要用现有数据库初始化 simplemembership ？？？而且我不希望系统在找不到时自行创建数据库，就像在 Visual Studio 2012 创建的默认 Internet 模板中所做的那样。

非常感谢先进...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T18:39:30.470

SimpleMembership[不是为广泛定制或集成到现有数据库而开发的](https://stackoverflow.com/questions/12360126/simplemembership-with-custom-database-schema-in-asp-net-mvc-4)。要使用现有数据库，您需要创建自己的成员资格提供程序，就像在 ASP.NET 中一样。您可以在此处找到有关[创建您自己的会员提供商的](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)指导。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T18:25:42.307

你需要`WebSecurity.InitializeDatabaseFile`告诉 MVC.NET 你已经有一个数据库和一个用户表。然后，确保提供程序在初始化时使用它。因此，创建一个`ActionFilterAttribute`可确保初始化 Simple Membership 提供程序的方法，例如：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
  public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
  {
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
      // Ensure ASP.NET Simple Membership is initialized only once per app start
      LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
      public SimpleMembershipInitializer()
      {     
        try
        {
          if (!WebSecurity.Initialized)
          {
            WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "UserId", "UserName", autoCreateTables: true);
          }
        }
        catch (Exception ex)
        {
          throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
        }
      }
    }
  } 
```

然后你需要注册过滤器：

```
public class FilterConfig
  {
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
      filters.Add(new HandleErrorAttribute());
      filters.Add(new InitializeSimpleMembershipAttribute());
    }
  } 
```

**编辑**：感谢建设性的批评，我已经删除了用属性装饰控制器的代码，因为在全局范围内添加它已经解决了这个问题。**如果您决定不全局使用它，**您将需要用它来装饰其他控制器，因为正如在[这个问题](https://stackoverflow.com/questions/12257232/role-based-authentication-in-the-new-mvc-4-internet-template-using-simplemembers)中所解释的那样，您会注意到用户可能会使用 cookie 进行身份验证并重定向到其他控制器，而无需先通过您的 AccountController。

此外，Jon Galloway[在这篇文章中](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)展示了如何使用以下方法指向现有数据库：

```
WebSecurity.InitializeDatabaseFile("SecurityDemo.sdf", "Users", "UserID", "Username", true); 
```

# java - 标签未显示在鼠标事件 JavaFx 上

> ID：13880356
> 
> 赞同：4
> 
> 时间：2012-12-14T14:14:09.863
> 
> 标签：java, mouseevent, javafx, pie-chart

我有一个饼图，我在其中使用本指南添加了鼠标侦听器：

[Oracle 饼图指南](http://docs.oracle.com/javafx/2/charts/pie-chart.htm)

但是，当我运行我的程序并单击图表时，它什么也没做。

我试过 System.out.println(caption.getText()); 并且标签的文本是正确的，但是标签没有显示出来。

我的代码如下：

```
public void start(Stage stage) {
        Scene scene = new Scene(new Group());
        stage.setTitle("Imported Fruits");
        stage.setWidth(500);
        stage.setHeight(500);

        ObservableList<PieChart.Data> pieChartData =
                FXCollections.observableArrayList(
                new PieChart.Data("Grapefruit", 13),
                new PieChart.Data("Oranges", 25),
                new PieChart.Data("Plums", 10),
                new PieChart.Data("Pears", 22),
                new PieChart.Data("Apples", 30));
        final PieChart chart = new PieChart(pieChartData);
        chart.setTitle("Imported Fruits");

        ((Group) scene.getRoot()).getChildren().add(chart);

        final Label caption = new Label("");
        caption.setTextFill(Color.DARKORANGE);
        caption.setStyle("-fx-font: 24 arial;");

        for (final PieChart.Data data : chart.getData()) {
            data.getNode().addEventHandler(MouseEvent.MOUSE_PRESSED,
                new EventHandler<MouseEvent>() {
                    @Override public void handle(MouseEvent e) {
                        caption.setTranslateX(e.getSceneX());
                        caption.setTranslateY(e.getSceneY());
                        caption.setText(String.valueOf(data.getPieValue()) + "%");
                        caption.setVisible(true);
                     }
                });
        }

        stage.setScene(scene);
        stage.show();
    }

} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:25:00.307

您忘记将标签“标题”添加到根节点中的子列表中:-)

```
public void start(Stage stage) {
        Scene scene = new Scene(new Group());
        stage.setTitle("Imported Fruits");
        stage.setWidth(500);
        stage.setHeight(500);

        ObservableList<PieChart.Data> pieChartData =
                FXCollections.observableArrayList(
                new PieChart.Data("Grapefruit", 13),
                new PieChart.Data("Oranges", 25),
                new PieChart.Data("Plums", 10),
                new PieChart.Data("Pears", 22),
                new PieChart.Data("Apples", 30));
        final PieChart chart = new PieChart(pieChartData);
        chart.setTitle("Imported Fruits");
        final ObservableList<Node> children = ((Group) scene.getRoot()).getChildren();

        children.add(chart);

        final Label caption = new Label("");
        caption.setTextFill(Color.DARKORANGE);
        caption.setStyle("-fx-font: 24 arial;");
        children.add(caption);

        for (final PieChart.Data data : chart.getData()) {
            data.getNode().addEventHandler(MouseEvent.MOUSE_PRESSED,
                new EventHandler<MouseEvent>() {
                    @Override public void handle(MouseEvent e) {
                        caption.setTranslateX(e.getSceneX());
                        caption.setTranslateY(e.getSceneY());
                        caption.setText(String.valueOf(data.getPieValue()) + "%");
                        caption.setVisible(true);
                     }
                });
        }

        stage.setScene(scene);
        stage.show();
    } 
```

我已经进行了上述更改，并且可以验证它是否有效（如下图所示）

![在此处输入图像描述](../Images/0ff50dcaff35fe0a214d519d2196b6d9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T04:40:22.190

没必要，你只需要添加标题，在这里：更改这一行:((Group) scene.getRoot()).getChildren().addAll(chart); to :((Group) scene.getRoot()).getChildren().addAll(chart,caption);

# jquery - jQuery 可排序禁用第一个占位符

> ID：13880372
> 
> 赞同：4
> 
> 时间：2012-12-14T14:14:47.587
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

有没有办法可以禁用可排序无序列表中的第一个占位符？

我仍然希望能够对第一个项目进行排序（即所有项目都应该是可拖动的），但我不希望第一个项目之后的任何项目都能够放在第一个项目之上。

我有这种工作，但不是禁用第一个占位符，而是在删除项目时取消排序：

```
$(".sortable").sortable({
    beforeStop: function(event, ui) {
        if(ui.placeholder.index() <= 1) {
            $(this).sortable('cancel');
        } else {
            //sort item
        }
    }
}); 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T16:27:09.403

我找到了解决这个问题的方法。你的代码离我的解决方案不远。

这个想法是使用`change`选项来根据其位置显示/隐藏占位符，如果位置是第一个则取消删除。

代码（[此处为 jsFiddle](http://jsfiddle.net/s9NVZ/)）：

```
var cancelRequired = false;
$("#sortable1").sortable({
    placeholder: "sortable-placeholder",
    change: function(event, ui) {
        if (ui.placeholder.index() < 1) {
            $(ui.placeholder).css('display', 'none');
        } else {
            $(ui.placeholder).css('display', '');
        }
    },
    beforeStop: function(event, ui) {
        cancelRequired = (ui.placeholder.index() <= 1);
    },
    stop: function() {
        if (cancelRequired) {
            $(this).sortable('cancel');
        }
    }
}); 
```

由于尝试在内部直接调用取消时出现错误，因此使用`beforeStop`并完成了黑客攻击。[更多信息在这里](http://forum.jquery.com/topic/problem-with-sortable-4-10-2010)发送我到[这个链接](http://bugs.jqueryui.com/ticket/6054)。`stop``beforeStop`

此代码已使用 jQuery 1.8.2 和 jQuery-ui 1.9.2 进行测试

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-26T20:40:34.280

这是一种更简单的方法，通过这种方式，revert 功能也可以工作。为此，您应该为您的第一个项目添加一个类。

HTML：

```
<ul id="sortable">
    <li class="no_sort sortable_first">First item</li>
    <li>Second Item</li>
    <li>Third Item</li>
</ul> 
```

脚本：

```
$('#sortable').sortable({
    placeholder: 'sortable_placeholder',
    cancel: '.no_sort',
    opacity: 0.5,
    revert: 100,
    change: function(event, ui) {
        if (ui.placeholder.index() < 1) {
            $('.sortable_first').after(ui.placeholder);
        }
    }
}); 
```

[小提琴](http://jsfiddle.net/J8uj4/)

# codeigniter - 如何在codeigniter中加入列

> ID：13880375
> 
> 赞同：0
> 
> 时间：2012-12-14T14:14:52.477
> 
> 标签：codeigniter

登录（id，姓名，角色，user_id）老师（teacher_id）

我需要检查角色是 2。

```
$this->db->select('*');     
$this->db->from('teacher');     
$this->db->where('teacher_branch_id',$this->session->userdata('branch_id'));
$this->db->join('login','teacher.teacher_id = login.login_user_id');

$query = $this->db->get(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:10:11.520

只需添加这样的 where 条件：`$this->db->where('login.role', 2);`

```
$this->db->select('*');     
$this->db->from('teacher');     
$this->db->join('login', 'teacher.teacher_id = login.login_user_id');
$this->db->where('teacher_branch_id', $this->session->userdata('branch_id'));
$this->db->where('login.role', 2);

$query = $this->db->get(); 
```

# android - 由于软键盘，无法停止 DatePicker 移动？

> ID：13880379
> 
> 赞同：2
> 
> 时间：2012-12-14T14:14:57.943
> 
> 标签：android, keyboard, resize, datepicker, soft-keyboard

我有一个 DatePicker，进入我的活动后，软键盘就会出现。当它打开时，它会向上移动所有东西，这会导致按钮和日历重叠。我环顾四周并尝试了一些事情，例如将日期选择器对齐到底部并将以下内容添加到 AndroidManifest.xml

```
android:windowSoftInputMode="stateVisible|adjustResize" 
```

但它似乎不起作用。这真的让我很紧张，我很感激帮助。

活动的当前 xml：

```
 <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:hint="@string/title" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText2"
        android:ems="10"
        android:hint="@string/editme"
        android:inputType="textMultiLine"
        android:orientation="horizontal" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:onClick="saveHW"
        android:text="@string/save" />

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:orientation="vertical" 
        android:windowSoftInputMode="stateAlwaysHidden|adjustResize"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T22:27:09.110

尝试`android:descendantFocusability="blocksDescendants"`在 xml 文件中设置选择器。

# c# - 如何从 Facebook OAuth 登录将用户的电子邮件返回到我的 asp.net Web 表单应用程序？

> ID：13880380
> 
> 赞同：2
> 
> 时间：2012-12-14T14:14:57.943
> 
> 标签：c#, facebook, oauth, asp.net-membership, webforms

我有一个 Web 表单应用程序 (VS2012)，它使用模板 OpenAuth 代码允许用户通过 Facebook 登录。提供电子邮件地址是我网站的 ASP.Net 会员注册的要求，因此我需要找出一种在返回的 authResult 对象中获取用户电子邮件地址的方法。

我*以为*我已将 Facebook 应用程序配置为提供电子邮件（我在权限设置页面的“用户和朋友权限”字段中添加了“电子邮件”），但是当我使用 Facebook 登录我的网站时，它并不表示电子邮件地址是必需的，生成的 authResult 仅包含基本用户信息（姓名、性别等）

似乎要获取 authResult 中返回的电子邮件地址，我需要在对 Facebook 的调用中以某种方式指定它，但 OpenAuth.RequestAuthentication() 方法似乎不支持这一点。

如何使用 VS2012 模板代码从登录请求中获取用户的电子邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:47:16.923

尝试将范围添加到您的登录 url，例如：

[https://www.facebook.com/dialog/oauth?client_id=ID&redirect_uri=URI&scope=email](https://www.facebook.com/dialog/oauth?client_id=ID&redirect_uri=URI&scope=email)

见**范围=电子邮件**

# c# - 检查多个文本框中空值的逻辑

> ID：13880385
> 
> 赞同：0
> 
> 时间：2012-12-14T14:15:24.700
> 
> 标签：c#, null, whitespace

大家好，可能是一个简单的。使用 C# .Net 4.0 和 Visual Studio 2012 Ultimate。

得到以下代码：

```
string part = "";
part = txtIOpart.Text;
txtBatchCV.Text = txtBatchIO.Text;
txtPartCV.Text = part;
txtExternalCV.Text = Sqlrunclass.SplitSpec_External(part, pg);
txtInternalCV.Text = Sqlrunclass.SplitSpec_Internal();
txtABSCV.Text = Sqlrunclass.SplitSpec_cvABS();
txtOilCV.Text = Sqlrunclass.SplitSpec_OilSeal();

txtBarCV.Text = "*" + Sqlrunclass.SplitInfo_ASno(part, pg) + "*";
txtBarNumCV.Text = txtBarCV.Text;
txtLocnCV.Text = Sqlrunclass.SplitInfo_Location();
txtFitsCV.Text = Sqlrunclass.SplitInfo_Desc();
txtHeightCV.Text = Sqlrunclass.SplitSpec_Height();
txtDiameterCV.Text = Sqlrunclass.SplitSpec_Diameter();
txtCirclitCV.Text = Sqlrunclass.SplitSpec_Circlit();

picTypeCV.Image = ftpclass.Download("CVspecType" + Sqlrunclass.SplitSpec_TypeCV() + ".jpg", "ftp.shaftec.com/Images/TypeJpg", "0095845|shafteccom0", "4ccc7365d4");

if (txtBatchCV.Text == null || txtBatchCV.Text == "")
{
    txtBatchCV.Text = "ALL";
} 
```

正如您在底部看到的那样，我正在检查批次，但我需要检查由一堆方法设置的所有数据。如果它看到一个空或空白的 txt，每个都会有不同的 txt 输出。有没有办法缩短这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:19:18.250

试试，`txtBatchCV.Text`例如

```
//Just for null
txtBatchCV.Text = (txtBatchCV.Text ?? "ALL").ToString(); 

//for both null and empty string
txtBatchCV.Text = string.IsNullOrEmpty(txtBatchCV.Text) ? "ALL": txtBatchCV.Text; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:21:18.483

您可以遍历所有文本框

```
foreach (var txt in form.Controls.OfType<TextBox>())
{
    switch(txt.Id){
        case "txtBatchCV":
        // Do whatever you want for txtBatchCV e.g. check string.IsNullOrEmpy(txt.Text)
        break;
    }
} 
```

我从这里借了上面的内容：

[如何遍历所有文本框并使它们从动作字典中运行相应的动作？](https://stackoverflow.com/questions/12219437/how-do-i-loop-through-all-textboxes-and-make-them-run-corresponding-actions-from)

作为对我从蒂姆那里得到的评论的回应，我添加了更多代码来解释你可以做什么。我的代码示例从来都不是完整的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:19:28.063

对于您可以使用的初学者`string.IsNullOrEmpty(txtBatchCV.Text)`，这是一种方便的方法，基本上可以完成您在 if 检查中所做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T14:20:39.760

我会尝试这样的事情：

```
void SetDefaultIfNull(TextBox txt, string defaultVal)
{
    if (string.IsNullOrWhitespace(txt.Text))
        txt.Text = defaultVal;
} 
```

然后将每个文本框和默认值传递给方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T14:20:42.787

您至少可以使用以下方法之一：

`string.IsNullOrEmpty(txtBatchCV.Text)`

或者

`string.IsNullOrWhitespace(txtBatchCV.Text)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-14T14:26:24.527

`TextBox.Text`永远不会`null`，它会返回`""`。如果您的方法返回`null`，您可以使用[`null-coalescing operator`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

```
string nullRepl = "ALL";
txtExternalCV.Text = Sqlrunclass.SplitSpec_External(part, pg) ?? nullRepl;
txtInternalCV.Text = Sqlrunclass.SplitSpec_Internal() ?? nullRepl;
txtABSCV.Text = Sqlrunclass.SplitSpec_cvABS() ?? nullRepl;
txtOilCV.Text = Sqlrunclass.SplitSpec_OilSeal() ?? nullRepl;
txtLocnCV.Text = Sqlrunclass.SplitInfo_Location() ?? nullRepl;
txtFitsCV.Text = Sqlrunclass.SplitInfo_Desc() ?? nullRepl;
txtHeightCV.Text = Sqlrunclass.SplitSpec_Height() ?? nullRepl;
txtDiameterCV.Text = Sqlrunclass.SplitSpec_Diameter() ?? nullRepl;
txtCirclitCV.Text = Sqlrunclass.SplitSpec_Circlit() ?? nullRepl; 
```

# c# - 如何设置一个单词的背景颜色？

> ID：13880386
> 
> 赞同：0
> 
> 时间：2012-12-14T14:15:26.327
> 
> 标签：c#, forms, background-color, picturebox

我在表单中有一个图片框。在那个图片框的中间，我放置了一张所选照片的​​名称。现在，我想为所选名称的背景着色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T14:26:26.550

我不确定您的意思，但 PictureBox 的内容是图像。如果您只想显示文本，请使用标签。如果您希望它具有特定的背景颜色，请将其 BackColor 属性设置为您想要的颜色。

例子：

```
private void Form1_Load(object sender, EventArgs e)
{
    var label = new Label {BackColor = Color.White};
    Controls.Add(label);
} 
```

编辑：

我允许自己重复使用上面 Sampath 的部分示例，以使其适应用户的评论。

```
void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    using (var font = new Font("Arial", 14))
    {
        const string pictureName = "Picture.jpg";
        var textPosition = new Point(10, 10);
        //Drawing logic begins here.
        var size = e.Graphics.MeasureString(pictureName, font);
        var rect = new RectangleF(textPosition.X, textPosition.Y, size.Width, size.Height);
        //Filling a rectangle before drawing the string.
        e.Graphics.FillRectangle(Brushes.Red, rect);
        e.Graphics.DrawString(pictureName, font, Brushes.Green, textPosition);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:26:09.173

您可以尝试以下示例。

只需在表单中添加一个**图片框，并****为 Paint 事件添加一个事件处理程序：**

您想在 PictureBox中使用**Paint 事件。**您从**e.Graphics获取****图形参考**，然后使用示例中的**DrawString()**。

 ****```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    using (Font myFont = new Font("Arial", 14))
    {
        e.Graphics.DrawString("Hello .NET Guide!", myFont, Brushes.Green, new Point(2, 2));
    }
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:19:37.443

您的问题可能与更改控件的背景颜色属性一样简单，您可以在属性窗口中更改该属性。****

# sql - SQL Server OpenQuery 因存储过程而失败

> ID：13880389
> 
> 赞同：0
> 
> 时间：2012-12-14T14:15:42.413
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个带有两个参数的存储过程。我正在尝试`OpenQuery`在 SQL Server 中使用来加入我的存储过程的结果集`dbo.TwoDrugs`。SQL Server 只是一台本地机器，没有其他人可以访问。我正在尝试做

```
select * 
from OpenQuery (AHCTW208D02,'exec [i 3 sci study].dbo.TwoDrugs ''X'',''Y''') 
```

我得到了错误

> *消息 7357，第 16 层，状态 2，第 1 行*
> 
> *无法处理对象“exec [i 3 sci study].dbo.TwoDrugs 'X','Y'”。链接服务器“AHCTW208D02”的 OLE DB 提供程序“SQLNCLI10”指示该对象没有列或当前用户对该对象没有权限。*

我想不出我没有权限的原因（因为我创建了存储过程），并且我配置了服务器以进行数据访问。

当我运行存储过程时，它实际上确实返回了一个结果集。关于这可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:37:12.720

**OPENQUERY 不能用于**在链接服务器上执行扩展存储过程。但是，可以通过使用四部分名称在链接服务器上执行扩展存储过程。例如：

```
exec AHCTW208D02.[i 3 sci study].dbo.TwoDrugs 'X','Y'; 
```

请阅读 Remaks

参考：http: [//msdn.microsoft.com/en-us/library/ms188427.aspx](http://msdn.microsoft.com/en-us/library/ms188427.aspx)

# c++ - 为多字段类重载 operator<

> ID：13880393
> 
> 赞同：1
> 
> 时间：2012-12-14T14:15:57.547
> 
> 标签：c++, stl, map, operator-overloading

我正在尝试插入地图，其中键是一个类。我在我的类中重载了 operator< 函数，如下所示：

```
struct MyType
{
    int a, b, c;
    bool operator<(const MyType& Rhs) const
    {
       return (a<Rhs.a) || (b<Rhs.b) || (c<Rhs.c);
    }
} 
```

但是对于某些（唯一）键，映射中的值会被覆盖。

多值键的首选 operator< 方法是什么？

我已经看到为使用元组[的结构定义 operator<](https://stackoverflow.com/questions/3882467/defining-operator-for-a-struct)，但如果可以的话，我宁愿把它写下来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T14:17:19.497

改为这样做：

```
return std::tie(a, b, c) < std::tie(Rhs.a, Rhs.b, Rhs.c); 
```

你需要`#include <tuple>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:27:13.650

这个表达

```
(a<Rhs.a) || (b<Rhs.b) || (c<Rhs.c) 
```

不会创建严格的弱排序：假设`a > Rhs.a`, 但是`b < Rhs.b`. 您的表达式返回`true`，但它应该是`false`:`b`仅当 s 相同时才应用于解决关系`a`，然后仅当s 和s 相同`c`时才应使用s 。`a``b`

这导致以下“楼梯”表达式：

```
(a<Rhs.a) ||
(a==Rhs.a && b<Rhs.b) ||
(a==Rhs.a && b==Rhs.b && c<Rhs.c) 
```

这是编写[Kerrek SB 的回答中建议的表达式](https://stackoverflow.com/a/13880410/335858)的漫长方式，我建议您使用它，因为它的可读性要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:28:28.373

问题是，如果您实例化两个`MyType`，例如说，`M1 = {1, 1, 2}`并且`M2 = {1, 2, 1}`您遇到不幸的情况，`M1 < M2` **并且** `M2 < M1`！

为了解决这个问题，您需要分配`a` `b`一些`c`意义/顺序：

```
struct MyType
{
    int a, b, c;
    bool operator<(const MyType& Rhs) const
    {
       if (a < Rhs.a) return true;
       if (a > Rhs.a) return false;
       if (b < Rhs.b) return true;
       if (b > Rhs.b) return false;
       return c < Rhs.c;
    }
} 
```

（这是在 dasblinkenlight 的答案中编写表达式的一种不太理想的方法，但可能更容易理解）。

但是，一旦您了解了为什么需要这样做，您应该切换到 a `tuple`，这确实是样板代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:08:59.680

如果您需要具有该类型键的映射并且不需要比较器，您可能需要使用 boost::unordered_map 并使用 boost::hash_combine 为您的类型定义哈希

# android - 无法在 Intent 中传递自定义对象：方法 Put Extra 对于 Intent 类型不明确

> ID：13880396
> 
> 赞同：42
> 
> 时间：2012-12-14T14:16:13.873
> 
> 标签：android, android-intent, parcelable, serializable

如果我尝试写

```
Car myCarObject=getCar();
Intent details = new Intent(Start.this, DetailsCar.class);
                details.putExtra("Car", myCarObject);
                startActivity(details); 
```

Eclipse在行中向我显示编译错误**“The Method Put Extra is Ambiguous for the type Intent”**

```
 details.putExtra("Car", myCarObject); 
```

如果我使用代码

```
Car myCarObject=getCar();
ArrayList<Car> parcelableExtra = new ArrayList<Car>();
                parcelableExtra.add(myCarObject);

Intent details = new Intent(Start.this, DetailsCar.class);
                details.putExtra("Car", parcelableExtra);
                startActivity(dettagli); 
```

我尝试在目标 Intent 中使用此代码加载额外内容

```
ArrayList<Car> parcelableExtra = new ArrayList<Car>();
        parcelableExtra = (ArrayList<Car>) getIntent().getExtras().getParcelable("Car");
        Car c=parcelableExtra.get(0); 
```

我收到此警告

```
12-14 05:30:07.669: W/Bundle(19823): Key Car expected Parcelable but value was a java.util.ArrayList.  The default value <null> was returned.
12-14 05:30:07.679: W/Bundle(19823): Attempt to cast generated internal exception:
12-14 05:30:07.679: W/Bundle(19823): java.lang.ClassCastException: java.util.ArrayList
12-14 05:30:07.679: W/Bundle(19823):    at android.os.Bundle.getParcelable(Bundle.java:1106)
12-14 05:30:07.679: W/Bundle(19823):    at my.app.com.DetailsCar.onCreate(DetailsCar.java:43)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
12-14 05:30:07.679: W/Bundle(19823):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 05:30:07.679: W/Bundle(19823):    at android.os.Looper.loop(Looper.java:130)
12-14 05:30:07.679: W/Bundle(19823):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-14 05:30:07.679: W/Bundle(19823):    at java.lang.reflect.Method.invokeNative(Native Method)
12-14 05:30:07.679: W/Bundle(19823):    at java.lang.reflect.Method.invoke(Method.java:507)
12-14 05:30:07.679: W/Bundle(19823):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-14 05:30:07.679: W/Bundle(19823):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-14 05:30:07.679: W/Bundle(19823):    at dalvik.system.NativeStart.main(Native Method)
12-14 05:30:07.679: W/dalvikvm(19823): threadid=1: thread exiting with uncaught exception (group=0x40018578) 
```

并且应用程序因空点异常而崩溃

我的汽车对象是 Parcelable

所以....怎么了？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-14T14:42:17.760

**第一个错误：'The Method Put Extra is Ambiguous for the type Intent'。**

该类`Car`既是`Serializable`and `Parcelable`，编译器不知道是使用`putExtra(Serializable s)`还是`putExtra(Parcelable p)`处理您的请求。因此，您必须`Car`在使用`Intent.putExtra()`.

```
Intent.putExtra("car", (Parcelable)myCarObject);
Intent.putExtra("car", (Serializable)myCarObject); 
```

**第二个错误：java.lang.ClassCastException: java.util.ArrayList**

您将`Car`对象放入 a`ArrayList`并用于`putExtra`发送到下一个活动。An `ArrayList`is not `Parcelable`but only `Serializable`。`putExtra(ArrayList)`作品为，`putExtra(Serializable)`但您阅读它`getParcelable()`。`ArrayList`不能强制转换为`Parcelable`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-08-01T11:49:31.937

我用这个

**在发件人活动中**

```
Intent intent = new Intent(activity, MyActivity.class);

Bundle bundle = new Bundle();
bundle.putSerializable("my object", myObject);

intent.putExtras(bundle);

startActivity(intent); 
```

**在接收器中：**

```
myObject = (MyObject) getIntent().getExtras().getSerializable("my object"); 
```

对我来说效果很好，试试吧。但是对象必须是可序列化的:)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-14T14:26:34.793

这就是我传递可序列化对象的方式，我相信它应该以相同的方式用于可打包。经过：

```
Intent intent=new Intent(OverviewActivity.this,CarDetailTabActivity.class);         
            intent.putExtra("CAR",myCarObject);
            startActivity(intent); 
```

收到：

```
Car carObject=(Car)getIntent().getSerializableExtra("CAR"); 
```

车：

```
import java.io.Serializable;

public class Car implements Serializable {

private static final long serialVersionUID = 1L;
...... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-05T10:28:08.623

**解决方案**`Serializable`：由您的类实现接口，例如`implements Serializable`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T14:26:49.607

`getIntent().getExtras()``Bundle`从您的意图中返回额外的，而不是您的数据。要获取您的列表，请使用`getIntent().getParcelableArrayListExtra("Car")`

# full-text-search - 我可以使用全文搜索在 RavenDB 中查询和检索集合属性的成员吗？

> ID：13880403
> 
> 赞同：1
> 
> 时间：2012-12-14T14:16:41.080
> 
> 标签：full-text-search, nested, ravendb

我使用的术语“子文档”与存储在集合属性中的对象松散相关。鉴于这两个类：

```
public class Foo
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<Bar> Bars { get; set; }
}

public class Bar
{
    public string Name { get; set; }
    public string Description { get; set; }
    public string SomeString { get; set; }
    public int SomeInt { get; set; }
} 
```

我想查询名称或描述属性中包含“玫瑰”一词的酒吧。请注意，Bars 存储在 Foo 中。

这是一个双重问题：

1.  可以对 Foo 类型的集合使用查询以返回 Bars（“子文档”）吗？我想收集名称中有“玫瑰”的酒吧，应该跳过其他酒吧。我不希望返回 Foos（聚合根）。
2.  如果是这样，如何通过全文搜索来做到这一点？

关于#1，我知道在 MongoDB 中这样的事情是不可能的，我要么必须单独存储 Foo 和 Bar，要么查询 Foos，其中任何 Bars 的名称中有“玫瑰”，然后在客户端上做一些事情. 但是 RavenDB 有 Live Projections / TransformResults，所以我认为这可能是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:01:14.233

您可以使用索引将每个 Bar 的副本存储在字段存储中，所以是的 - 它可以完成。但是您应该确保您了解这样做的影响。

通常，当您从 raven 查询时，索引仅用于确定哪些文档被发回。文档本身不是来自索引，而是来自文档存储。文档存储有 ACID 保证——这意味着无论索引的状态如何，您都将始终获得文档的最新副本。如果您从索引条目或索引字段存储中进行投影，那么您返回的值与索引本身一样陈旧。

假设您不断更新条形图，并且在索引赶上您上次更新之前进行搜索。您可以取回包含旧数据的 Bar。因此，您需要在结果中权衡数据的潜在陈旧性，可能使用其中一种`WaitForNonStaleResultsAsOf...`自定义项 - 如果您有大量写入操作，这将减慢搜索结果的返回速度。

```
public class Foos_BarsByName
    : AbstractIndexCreationTask<Foo, Foos_BarsByName.Result>
{
    public class Result
    {
        public string Name { get; set; }
        public Bar Bar { get; set; }
    }

    public Foos_BarsByName()
    {
        Map = foos => from foo in foos
                      from bar in foo.Bars
                      select new
                      {
                          bar.Name,
                          Bar = bar
                      };

        Index(x => x.Name, FieldIndexing.Analyzed);
        Index(x => x.Bar, FieldIndexing.No);
        Store(x => x.Bar, FieldStorage.Yes);
    }
}

var results = session.Query<Foos_BarsByName.Result, Foos_BarsByName>()
                     .Customize(x => x.WaitForNonStaleResultsAsOfNow())
                     .Search(x => x.Name, "roses")
                     .Select(x => x.Bar); 
```

另一种处理方法可能是让所有 Foos 都回来，然后在客户端拉出您感兴趣的 Bars。至少，一切都来自文档存储：

```
public class Foos_BarsByName
    : AbstractIndexCreationTask<Foo, Foos_BarsByName.Result>
{
    public class Result
    {
        public string Name { get; set; }
    }

    public Foos_BarsByName()
    {
        Map = foos => from foo in foos
                      from bar in foo.Bars
                      select new
                      {
                          bar.Name
                      };

        Index(x => x.Name, FieldIndexing.Analyzed);
    }
}

var results = session.Query<Foos_BarsByName.Result, Foos_BarsByName>()
                     .Search(x => x.Name, "roses")
                     .As<Foo>()
                     .AsEnumerable()
                     .SelectMany(x => x.Bars)
                     .Where(x => x.Name.IndexOf("roses",
                                     StringComparison.CurrentCultureIgnoreCase)
                                     != -1) 
```

`.AsEnumerable()`将强制执行 linq-to-raven 查询，使后面的一切都发生在客户端的 linq-to-objects 中。

当然，如果您正在执行比使用 c# 字符串函数表达的更高级的搜索，那么您将无法采用第二种方法。

# sql - 使用 GROUP BY 的 SQL MERGE

> ID：13880404
> 
> 赞同：7
> 
> 时间：2012-12-14T14:16:43.270
> 
> 标签：sql, sql-server, sql-server-2008

我必须做一个`MERGE`语句，但在我需要准备查询之前，这个查询有`group by`一些字符串列和值，因为我正在做一个分组，我不能包含主键。`MERGE`如果我不能提供主键，我该怎么办？

这是查询

```
SELECT Account,
       BillDate, 
       Name,
       SUM(ChargeAmount) AS ChargeAmount, 
       SUM(ChargeTaxes) AS ChargeTaxes,       
  FROM MyTempTable
 GROUP BY Account, BillDate, Name 
```

现在我需要`MERGE`从那个查询开始进入我的表，但我没有 pk。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T14:38:37.227

您可以将`GROUP BY`子句与[**`MERGE`**](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.100%29.aspx). 正如文件规定的那样：

```
[ WITH <common_table_expression> [,...n] ]
MERGE 
    [ TOP ( expression ) [ PERCENT ] ] 
    [ INTO ] <target_table> [ WITH ( <merge_hint> ) ] [ [ AS ] table_alias ]
    USING <table_source> 
    ON <merge_search_condition>
    [ WHEN MATCHED [ AND <clause_search_condition> ]
        THEN <merge_matched> ] [...n ]
    [ WHEN NOT MATCHED [ BY TARGET ] [ AND <clause_search_condition> ]
        THEN <merge_not_matched> ]
    [ WHEN NOT MATCHED BY SOURCE [ AND <clause_search_condition> ]
        THEN <merge_matched> ] [...n ]
    [ <output_clause> ]
    [ OPTION ( <query_hint> [ ,...n ] ) ]    
; 
```

`table_source`可以在哪里：

```
<table_source> ::= 
{
    table_or_view_name [ [ AS ] table_alias ] [ <tablesample_clause> ] 
        [ WITH ( table_hint [ [ , ]...n ] ) ] 
  | rowset_function [ [ AS ] table_alias ] 
        [ ( bulk_column_alias [ ,...n ] ) ] 
  | user_defined_function [ [ AS ] table_alias ]
  | OPENXML <openxml_clause> 
  | derived_table [ AS ] table_alias [ ( column_alias [ ,...n ] ) ] 
  | <joined_table> 
  | <pivoted_table> 
  | <unpivoted_table> 
} 
```

因此，您可以`GROUP BY`按照您在问题中所做的方式放置该子句，如下所示：

```
MERGE INTO table2 AS TGT
USING
(
  SELECT Account,
       BillDate, 
       Name,
       SUM(ChargeAmount) AS ChargeAmount, 
       SUM(ChargeTaxes) AS ChargeTaxes
  FROM table1
 GROUP BY Account, BillDate, Name
) AS SRC
  ON  SRC.Account = TGT.Account AND
      SRC.Name = TGT.Name
WHEN NOT MATCHED THEN
  INSERT (Account, BillDate, Name, ChargeAmount, ChargeTaxes)
  VALUES (SRC.Account, SRC.BillDate, 
          SRC.Name, SRC.ChargeAmount, SRC.ChargeTaxes); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/20bcf/1)

# android - 如何隐藏状态栏？

> ID：13880407
> 
> 赞同：1
> 
> 时间：2012-12-14T14:17:09.707
> 
> 标签：android

我正在尝试隐藏状态栏。我尝试了以下事情。

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

在`Manifest.XML`我已经添加了上面的代码。

在`onCreate()`我添加了以下内容：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
// hide statusbar of Android
// could also be done later
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

但我仍然无法隐藏状态栏。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:39:44.940

您采用的方法适用于 2.3.X

但是，如果您谈论的是 4.0 平板电脑，这就是代码

```
LinearLayout layout = (LinearLayout)findViewById(R.id.layout);    
layout.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

如果您谈论的是平板电脑，则无法摆脱系统栏，但我建议您看一下这个问题：

[隐藏 Android Ice Cream Sandwich 上的状态栏](https://stackoverflow.com/questions/9729464/hide-status-bar-on-android-ice-cream-sandwich)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:42:10.460

只需确保您在 setContentView() 行之前编写上述代码行？

# java - 如何在 gwt ui-binder 中添加画布？

> ID：13880411
> 
> 赞同：0
> 
> 时间：2012-12-14T14:17:18.193
> 
> 标签：java, gwt, uibinder, java-canvas

我有一个基本的 ui-binder 布局文件，并且想将画布放入主要内容区域。

但是使用以下会产生错误：

```
No class matching "canvas" in urn:import:com.google.gwt.canvas.client: <c:canvas ui:field='canvas'> 
```

我的消息来源有什么问题？

.ui.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:c='urn:import:com.google.gwt.canvas.client'>
    <g:DockLayoutPanel>
    <!-- other stuff... ->

        <g:center>
            <c:canvas ui:field="canvas" />
        </g:center>
    </g:DockLayoutPanel>
</ui:UiBinder> 
```

.java：

```
@UiField//(provided = true)
Canvas canvas;

@Override
public void onModuleLoad() { 
    canvas = Canvas.createIfSupported();
    canvas.setWidth("400px");
    canvas.setHeight("400px"); 
    canvas.setCoordinateSpaceWidth(400);
    canvas.setCoordinateSpaceHeight(400);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:31:23.523

OMG uibuilder 中的 canvas 元素必须以大写字母开头...

```
<c:Canvas... 
```

# c++ - “保存”的设计模式

> ID：13880412
> 
> 赞同：2
> 
> 时间：2012-12-14T14:17:19.590
> 
> 标签：c++, xml, qt, design-patterns, save

我目前正在研究一种“保存”机制，它允许用户将他正在处理的项目保存在硬盘上。输出将是一个包含各种数据的 XML 文件。
现在我们的项目结构即将改变，我们需要编写一个新的 xml 文件（创建一个新的保存方法）。
所以现在挑战来了：保存时我希望用户能够选择他将创建的文件格式（版本1（旧）或版本2（新））。
有谁现在如何实现这一目标？周围有合适的设计模式吗？
备注： - 我们保存的数据可以看作是不相关的块，所以实际上很容易将旧块换成新块。- 事情的全部目标是，在加载旧项目时应该再次可读。（我假设这可以通过标签来完成，并且在加载时只对标签做出反应？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:30:15.060

这听起来像是[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式的一个很好的应用。

您将创建一个`FileFormat`具有两个虚函数`projectToXml`和的抽象基类（策略接口） `xmlToProject`，它们应该将您的内部项目表示转换为 XML，反之亦然。

然后你创建两个实现子类`FileFormatNew`和`FileFormatLegacy`（这些是具体的策略）。

然后，您的保存函数将另外需要一个 FileFormat 实例，并调用该对象的相应方法来进行数据转换。您的加载函数可以通过检查 XML 树来选择要使用的策略，以获取告诉它它是哪个版本的内容。

当您需要支持另一种文件格式时，您只需创建一个新类，它是 FileFormat 的子类。

**补充后在评论交流**

当您将拥有许多差异很小的版本并且您仍想使用策略模式时，您可以使 FileFormat 成为多种策略的组合：CircleStragegy、RectangleStrategy、LineStrategy 等。在这种情况下，我不会对不同版本的 FileFormat 使用不同的类。我将为每个版本创建一个静态工厂函数，该函数返回一个 FileFormat 以及该版本中使用的 Strategy 对象。

```
FileFormat FileFormat::createVersion1_0() {
    return new FileFormat(
        new LineStrategyOld(),
        new CircleStrategyOld(),
        new RectangleStragegyOld()
    );
}

FileFormat FileFormat::createVersion1_1() {
    // the 1.1 version introduced the new way to save lines
    return new FileFormat(            
        new LineStrategyNew(),
        new CircleStrategyOld(),
        new RectangleStragegyOld()
    );
}

FileFormat FileFormat::createVersion1_2() {
    // 1.2 uses the new format to save circles
    return new FileFormat(            
        new LineStrategyNew(),
        new CircleStrategyNew(),
        new RectangleStragegyOld()
    );
}

FileFormat FileFormat::createVersion1_3() {
    // 1.3 uses a new format to save rectangles, but we realized that
    // the new way to save lines wasn't that good after all, so we
    // returned to the old way.
    return new FileFormat(            
        new LineStrategyOld(),
        new CircleStrategyNew(),
        new RectangleStragegyNew()
    );
} 
```

**注意：**在实际代码中，您当然会为策略类名称使用比“旧”和“新”更多的描述性后缀。

# jquery - jQuery条件链

> ID：13880414
> 
> 赞同：6
> 
> 时间：2012-12-14T14:17:22.800
> 
> 标签：jquery

假设我有以下 jQuery 代码。它工作得很好，但是我需要包含`.after($('<div />'))`唯一的 if`var insertAfter`等于 true。有没有一种优雅的jQuery方式来做到这一点？

```
$('#whatEver')
    .parent()
    .show()
    .width(123)
    .addClass('bebo')
    .before($('<div />'))
    .after($('<div />'))
    .parent()
    .addClass('bla'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T14:20:41.973

试试这个使用三元运算符：

```
.after(insertAfter ? $('<div />') : '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:28:59.057

您可以像这样扩展 jQuery 库：

```
$(function () {
    $.fn.afterif = function (param, condition) {
        if (condition) {
            $(this).after(param);
        }
        return this;
    }
}(jQuery)); 
```

并像这样使用它：

```
var insertAfter = true;
$('#whatEver').afterif($('<div />'), insertAfter); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-01T17:46:35.483

几个 jQuery 方法允许传递一个函数`func`。通常没有明确记录，但从返回`undefined`就像`func`一个无操作，即使在像`.attr('src', func)`.

（在这个 setter 示例中，`func`应该返回您想要`'src'`设置的任何内容。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:26:06.757

有很多例子，这里是关于如何检查变量是否定义的堆栈溢出。：

*   [变量是否未定义](https://stackoverflow.com/questions/1485840/whether-a-variable-is-undefined)
*   [查看变量是否存在](https://stackoverflow.com/questions/2304066/find-out-if-a-variable-exists)
*   [如何确定变量是“未定义”还是“空”？](https://stackoverflow.com/questions/2647867/how-to-determine-if-variable-is-undefined-or-null)
*   [JavaScript 检查变量是否存在（已定义/初始化）](https://stackoverflow.com/questions/5113374/javascript-check-if-variable-exists-which-method-is-better)

然后你可以使用 break 并继续控制流量。

[http://www.w3schools.com/js/js_break.asp](http://www.w3schools.com/js/js_break.asp)

# xampp - Xdebug 和 Netbeans 没有相互通信

> ID：13880415
> 
> 赞同：1
> 
> 时间：2012-12-14T14:17:22.613
> 
> 标签：xampp, netbeans-7, xdebug

我花了几天时间在网上冲浪以找到我的问题的答案。我已尽我所能，但迄今为止未能成功解决这个问题。Netbeans 不断提供**Waiting for Connection (netbeans-xdebug)**。

我正在使用以下软件：

*   XAMPP 版本 1.8.1。
*   Windows 7的
*   Netbeans IDE 7.2.1
*   Xdebug 2.2.1

我通过 xdebug.org 站点 (http://xdebug.org/wizard.php) 的向导安装了最新版本。Xdebug 正在根据 phpinfo() 工作。我的浏览器（Firefox 17.0.1）中的 HMTL 输出显示了 xdebug 代码。但是，这不会传回给 netbeans。通过命令提示符（运行 -> cmd.exe）使用 Netstat 显示端口 9000 上有 TCP 连接。但是，在 Netbeans 中没有报告任何内容。

我尝试了几种不同的选择，例如：

*   安装一个类似的 IDE，Eclipse PDT。Eclipse 显示 Xdebug 正在
    工作。但是，由于 Eclipse 缺少我需要的功能，我
    想使用 Netbeans。
*   在 Ubuntu 12.04 LTS 上安装 Netbeans。
    还是同样的问题。Netbeans 不工作（等待
    连接）。浏览器中的输出也显示 Xdebug 正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:15:07.797

每当我在新的 Linux 机器上安装：“php xdebug”和 netbeans
时，我都会运行这些简单的步骤，并且我总是设法在 netbeans 上纠正 xdebug 的集成。
所以以你提供的数据，我只能帮你解决，你问题的一半。
**允许您在 Linux 机器上连接**：

*使用 pecl 安装：*

> # apt-get install php5-dev php-pear
> # pecl install xdebug

*或直接安装：*

> # apt-get 安装 php5-xdebug

找到图书馆：

> # find / -name 'xdebug.so'
> /usr/lib/php5/20090626+lfs/xdebug.so

编辑 phi.ini 文件：

> ...
> 
> zend_extension=/usr/lib/php5/20090626+lfs/xdebug.so
> xdebug.remote_enable=1
> xdebug.remote_handler=dbgp
> xdebug.remote_mode=req
> xdebug.remote_host=127.0.0.1
> xdebug.remote_port=9000
> 
> ...

*在您的情况下重新启动网络服务器：Apache*

> $ /etc/init.d/apache2 重启

* * *

*根据您发布的内容：*

> 在 Ubuntu 12.04 LTS 上安装 Netbeans。

*我对发行版“.deb”使用了安装方法“apt-get”。如果您使用的是发行版，“.rpm”可以用“yum”做同样的事情*

*其中许多命令肯定在 xampp 中得到了简化。
但是，如果您从控制台运行此命令，则不会影响最终结果。*

* * *

关于 Windows 机器和 Linux 机器的另一个重要说明，
**您应该检查您的防火墙规则是否允许建立从 netbeans 到 xdebug 的连接。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T05:30:56.787

我知道这很旧，但对于使用 Ubuntu 的人来说，这可能会有所帮助。

```
OS Version = Ubuntu 14.04.3 LTS; Codename: trusty
PHP Version = PHP 5.5.9-1ubuntu4.11 (cli) (built: Jul  2 2015 15:17:32) 
Apache Version = Server version: Apache/2.4.7 (Ubuntu) 
```

程序

> 1.  为 php5 安装 xdebug

```
sudo apt-get install php5-xdebug 
```

> 2.  打开 php.ini 并在下面添加以下行（通常是 sudo vim /etc/php5/apache2/php.ini）

```
xdebug.remote_enable=On;
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000;
xdebug.remote_handler="dbgp"; 
```

> 3.  重新启动 apache，一切顺利

```
sudo service apache2 restart 
```

*注意 1：我没有尝试在没有用于 xdebug 的 firefox 插件的情况下执行此操作，因此如果在执行上述过程后仍​​然无效，请下载 firefox [Easy Xdebug的插件](https://addons.mozilla.org/en-US/firefox/addon/easy-xdebug/)*

*注2：我没有接触Netbeans的PHP配置*

*注3：我没有接触xdebug.ini*

# android - 移动几个单位后的触摸事件

> ID：13880417
> 
> 赞同：1
> 
> 时间：2012-12-14T14:17:26.840
> 
> 标签：android, motionevent

我正在尝试制作一个触摸事件，直到手指从初始位置移动几个单位后才会激活。

到目前为止，我已经像这样设置了我的 onTouch 方法：

```
private XYEvents xyEvent =  new XYEvents();

public boolean motionTracker(MotionEvent event, int n)
{
    int note = n;   

    switch(event.getAction())
    {
    case MotionEvent.ACTION_DOWN:
            xyEvent.setInitial(event);
            playNote(note);

        break; 

    case MotionEvent.ACTION_MOVE:
        byte data1;
        byte data2;

//I figured I should input a condition to check if the finger has moved a few units before it should start doing stuff like so:

            if (xyEvent.getXThreshold(event))
            {
                int xMod = xyEvent.eventActions(event)[0];

                data1 = (byte) (xMod & 0x7f);
                data2 = (byte) ((xMod & 0x7f00) >> 8);
                xModulation((int)data1, (int)data2); 
            }

        break;
     } 
```

这种方法是我遇到的问题：

```
private float initialX, initialY;
private int xValue; 

boolean getXThreshold(MotionEvent event)
{
    float deltaX = event.getX();
    float threshold = 10;

    float condition = (deltaX - initialX);

    if(condition <= threshold || condition >= -threshold )
        return false;
    else 
        return true;
} 
```

getXThreshold 方法似乎在另一个看起来像这样的方法中做了它应该做的事情：

```
public int[] eventActions(MotionEvent event)
{   
    int value = xValue;

    int xNull = 8192;

    if(!getXThreshold(event))
        xValue = xNull;

    if(getXThreshold(event))
        xValue = xHandleMove(event, true);

    return value;

} 
```

有什么建议么？

/米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:26:52.850

似乎这个论点：

```
if(condition <= threshold || condition >= -threshold )
    return false;
else 
    return true; 
```

需要翻转，否则由于某种原因它总是返回false。

现在它看起来像这样并且效果很好。

```
boolean getXThreshold(MotionEvent event)
{
    float deltaX = event.getX();
    float threshold = 10;

    float condition = (deltaX - initialX);

    return condition >= threshold || condition <= -threshold;
} 
```

有一个伟大的一周！/米

# java - 使用java后端打包部署单页应用

> ID：13880421
> 
> 赞同：4
> 
> 时间：2012-12-14T14:17:47.433
> 
> 标签：java, javascript, build-process, singlepage

我正在做一个具有 jee6 后端（仅基于 json 的 api）和大量客户端代码的应用程序。它看起来像单页应用程序（现在这个很酷的流行语）。

我不确定如何构建我的代码库。有几种方法我考虑

*   后端和前端有单独的项目——这意味着后端部分是纯 java 的，带有 maven 和所有这些东西，并且有单独的前端和所有特定于 js 的构建工具等。
*   将所有东西都放在一个项目中，这样我就可以在服务器上部署一个存档（战争），其中包含所有前端的东西。我真的不喜欢这种方法...

如果我使用第一个部署，该怎么办？我必须从这个前端部分构建另一个“战争”档案并将其放到服务器上吗？

我找不到人们使用的任何做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:25:53.507

我会将您的 Javascript 和 CSS 包留在 WAR 中，并使用**[Wro4J](http://code.google.com/p/wro4j/)**之类的东西（我有自己的资产管道代码，我可以在某个时候分享）。

**原因**如下：

1.  为了简化开发，您希望在运行 servlet 容器时编辑 Javascript/CSS 时刷新它们。Maven、Eclipse（和/或 JRebel）资源刷新器不适用于奇怪的包管理。
2.  真的没有像 WAR/JAR 那样只用于 Javascript/CSS 的缩小（[Require.js](http://requirejs.org/)和[JAM](http://jamjs.org/)更多地用于依赖加载）。

在单独的项目/jar 中使用单独的 Java 代码的原因是避免耦合、提高重用性和增加内聚性。你试图做的分离主要是为了凝聚力。在很大程度上，您不需要将 Javascript 与您的 Web 应用程序分开，因为它可能已经与 Java 非常分开并且是完全不同的语言/运行时。

但是，如果您说想要 CDN 您的 JS/CSS 以及为什么分离代码可能更容易进行试验，我可以理解。

**这里有两个选项：**

1.  [**Git 的子模块**](http://git-scm.com/book/en/Git-Tools-Submodules)并将 Javascript 和 CSS 作为单独的项目，它们是您的 WAR 项目的子模块。
2.  有两个 WAR 项目。一个带有您的后端 Java 代码，另一个带有您的前端代码。您将需要一个支持多个 WARS 的容器，并且您将担心管理可怕的 servlet 容器上下文路径。

实际上，我在之前工作的一家公司中已经完成了第 2 项（笑那个）。它工作得很好。但是现在我更喜欢#1，因为它的快速和轻松（笑那个）。

# sql-server - 通过将重复的行组转换为列来导入文本文件

> ID：13880422
> 
> 赞同：0
> 
> 时间：2012-12-14T14:17:46.467
> 
> 标签：sql-server, sql-server-2012-express

我的数据文件看起来像

```
1234567 7654321

TEXT ABOUT STUFF
ON MULTIPLE LINES
NOT SURE HOW MANY

1234567 7654321

TEXT ABOUT STUFF
ON MULTIPLE LINES
NOT SURE HOW MANY 
```

唯一可以确定的是，新记录以 2 组 7 个字符长的数字开头。这些数字也在一个新行上，并显示为我上面的示例数据。

我在 Windows 8 上使用 SQL Server Express。

最终，我需要一列中的第一组数字，另一列中的第二组以及第三列中的其余文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:20:02.980

这是[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)的领域。SQL Server 这样做是为了使用[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)。

# c# - 如何将方法限制为 n 个并发调用

> ID：13880423
> 
> 赞同：1
> 
> 时间：2012-12-14T14:17:50.683
> 
> 标签：c#, multithreading, .net-4.0, concurrency

我有一个集成服务，它运行计算繁重的数据绑定过程。我想确保同时运行的这些进程不会超过 n = 5（但 n 将是可配置的，可在运行时更改）。这个想法是将服务器上的负载限制在安全水平。该方法处理的数据量受到批处理的限制，因此我不必担心一个进程代表比另一个更大的负载。

处理方法由另一个进程调用，其中运行工资单的请求保存在队列中，我可以在此时插入一些逻辑来确定是现在处理此请求，还是将其留在队列中。

所以我想要一个与处理方法在同一服务上的单独方法，它可以告诉我服务器是否可以接受对处理方法的另一个调用。它会问，“有多少工资单正在运行？这是否小于 n？” 实现这一目标的巧妙方法是什么？

- - - - - -编辑 - - - - - -

我想我需要说清楚，决定是否将请求从队列中取出的过程与通过 WCF 边界处理工资单数据的服务分开。停止工资单处理过程中的线程不会阻止更多请求进入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:53:36.197

您可以使用 a`Semaphore`来执行此操作。

```
public class Foo
{
    private Semaphore semaphore;
    public Foo(int numConcurrentCalls)
    {
        semaphore = new Semaphore(numConcurrentCalls, numConcurrentCalls);
    }

    public bool isReady()
    {
        return semaphore.WaitOne(0);
    }

    public void Bar()
    {
        try
        {
            semaphore.WaitOne();//it will only get past this line if there are less than 
            //"numConcurrentCalls" threads in this method currently.
            //do stuff
        }
        finally
        {
            semaphore.Release();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:25:07.613

查看[对象池](http://en.wikipedia.org/wiki/Object_pool_pattern)模式。这就是你所描述的。虽然模式没有严格要求，但您可以公开当前池中的对象数量、最大（配置的）数量、高水位线等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:48:17.590

```
void ThreadTest()
{
    ConcurrentQueue<int> q = new ConcurrentQueue<int>();
    int MaxCount = 5;
    Random r = new Random();

    for (int i = 0; i <= 10000; i++)
    {
        q.Enqueue(r.Next(100000, 200000));
    }

    ThreadStart proc = null;
    proc = () =>
    {
        int read = 0;
        if (q.TryDequeue(out read))
        {
            Console.WriteLine(String.Format("[{1:HH:mm:ss}.{1:fff}] starting: {0}... @Thread {2}", read, DateTime.Now, Thread.CurrentThread.ManagedThreadId));
            Thread.Sleep(r.Next(100, 1000));
            Console.WriteLine(String.Format("[{1:HH:mm:ss}.{1:fff}] {0} ended! @Thread {2}", read, DateTime.Now, Thread.CurrentThread.ManagedThreadId));
            proc();
        }
    };

    for (int i = 0; i <= MaxCount; i++)
    {
        new Thread(proc).Start();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:24:00.203

我认为您可能需要一个[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)，其中集合中的每个项目代表一个并发调用。

另请参阅[IProducerConsumerCollection](http://msdn.microsoft.com/en-us/library/dd287147.aspx)。

如果您只是使用线程，我建议您查看限制线程并发性的方法（例如[TaskScheduler.MaximumConcurrencyLevel](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.maximumconcurrencylevel.aspx)属性和[此示例](http://msdn.microsoft.com/en-us/library/ee789351.aspx)。）。

另请参阅[ParallelEnumerable.WithDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/dd383719.aspx)

# windows - 将动态环境变量 (%cd%) 设置为 Windows 中文件或快捷方式的图标路径

> ID：13880425
> 
> 赞同：0
> 
> 时间：2012-12-14T14:18:02.680
> 
> 标签：windows, powershell, icons, relative-path, shortcut

如何将文件的图标路径或快捷方式设置为包含动态环境变量的路径，尤其是当前目录 %cd%。

问题是为文件设置自定义（非系统）图标，并且该图标仍然在其他计算机上使用。文件和图标都将以 .zip 格式提供。当 .zip 在其他计算机上解压缩时，该文件应显示自定义图标。

我被卡住了，因为 Windows 需要一个绝对路径，并且当 .zip 在另一台计算机（具有不同的绝对位置）上解压缩时，此路径会发生变化。

我已经尝试过，但没有成功，通过 GUI 属性窗口或 PowerShell 脚本，如

```
$wshshell = New-Object -ComObject WScript.Shell
$lnk = $wshshell.CreateShortcut("c:\TheFolder\ASubFolder\nameOfMyShortcut.lnk")
$lnk.TargetPath = "%windir%\system32\cmd.exe /c start \"\" \"Includes\myApplication.exe\""

$lnk.IconLocation = "%cd%\Includes\myApplication.ico"
#$lnk.IconLocation = ".\Includes\myApplication.ico"

$lnk.Save() 
```

您可以使用一个技巧来使 TargetPath 对包文件夹的绝对位置不敏感。

问题是关于如何设置 IconLocation 路径变量相对，这两种方法都不起作用：

```
$lnk.IconLocation = ".\Includes\myApplication.ico" 
```

或者

```
$lnk.IconLocation = "%cd%\Includes\myApplication.ico" 
```

据我了解，环境变量 %cd% 是动态的，Windows 不喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:42:18.480

解决问题的方法如下：使用 C#（或静态二进制文件）创建启动器，不需要在包的根文件夹中提供 dll。启动器启动位于资源文件夹中的动态二进制 .exe。

# c# - 监视 Windows 进程是否有过多的内存使用

> ID：13880428
> 
> 赞同：-3
> 
> 时间：2012-12-14T14:18:08.650
> 
> 标签：c#, .net, windows, process

我试图做的是持续监控所有 Windows 进程的内存和 CPU 使用情况，如果某个进程超过限制，我应该能够终止它（前提是这个应用程序以管理员权限运行）我有以下代码

```
private PerformanceCounter theMemCounter = new PerformanceCounter(
    "Hyper-v Dynamic Memory VM",
    "Physical Memory",
    Process.GetCurrentProcess().ProcessName); 
```

但这是针对单个过程的，我应该知道该过程的名称，请您指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:27:59.587

`Process.GetCurrentProcess`仅指您的程序。尝试`Process.GetProcesses()`检索当前在机器上运行的所有进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:32:27.807

这里有一些快速代码可以了解每个进程存在多少私有内存：

```
 foreach (var process in Process.GetProcesses().OrderByDescending(process => process.PrivateMemorySize64))
        {
            Console.WriteLine(process.ProcessName + ": " + process.PrivateMemorySize64 + " bytes");
        } 
```

不过，请听[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)的话，他是对的。不分青红皂白地杀死进程并不是一个好主意。如果您担心某些东西会占用大量内存，请查看制造商是否有办法限制它（如 SQL Server），或者如果是您自己的代码，请修复它。

# xamarin.ios - 无法在monodevelop中打开MvvmCross sln

> ID：13880429
> 
> 赞同：1
> 
> 时间：2012-12-14T14:18:11.443
> 
> 标签：xamarin.ios, monodevelop, mvvmcross

我正在尝试使用 mvmmx 构建一个 x 平台移动应用程序。我从 md 开始，而不是 vs，因为我的主要目标是 iOS。我遇到了几个问题：

*   我不能在 md 中找到任何 MvvmX sln 文件。md 将它们作为二进制文件打开。
*   如果我在我的解决方案中包含一些项目，我就会遇到构建问题。

版本：

*   MD 3.0.5
*   MvvmX：vNext，今天的新克隆

这是一个已知问题，还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:34:32.553

您需要最新版本的 MonoDevelop - 来自 alpha 流。

或者将sln文件第一行的v12改为v11。

这个错误自 5 月以来一直存在 - [https://bugzilla.xamarin.com/show_bug.cgi?id=4919](https://bugzilla.xamarin.com/show_bug.cgi?id=4919) - 但它几乎在 GA 版本中......

# c++ - const correctness and shared_ptr, a matter of design?

> ID：13880436
> 
> 赞同：5
> 
> 时间：2012-12-14T14:18:32.257
> 
> 标签：c++, boost, shared-ptr, const-correctness

I recently started trying to enforce const correctness in my code. In a function definition, I feed a constant pointer to a constant object of the class `LorentzM`:

```
void AnalysisObject::SetOwnedPointer(const int maptotree_In, const LorentzM* const momentum_In){ 
owned_pp4_original.reset(momentum_In); 
maptotree=maptotree_In;
} 
```

where `owned_pp4_original` is

```
shared_ptr<LorentzM> owned_pp4_original; 
```

I do this, because this function, SetOwnedPointer, should never change the `LorentzM* momentum_In` nor should it change the object that it points to, so constant pointer to constant object it is.

However, a shared_ptr is created to the object where momentum_In points to, and I **do** want to use this shared_ptr to change the object later on:

```
void ChangeLorentzM(const double px, const double py, const double pz, const double E){
owned_pp4_original->SetPxPyPzE(px,py,pz,E); //THIS CHANGES THE OBJECT
} 
```

So, on one hand, to be able to do:

```
owned_pp4_original.reset(momentum_In); 
```

`owned_pp4_original` should be a `shared_ptr<const LorentzM>`

but then, I wouldn't be able to change the object through it.

What's wrong in this picture?

thanks a lot.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T14:28:07.403

> I do this, because this function, SetOwnedPointer, should never change the LorentzM* momentum_In nor should it change the object that it points to, so constant pointer to constant object it is.

That's not reason enough. The function may not change the object directly, but it is granting another object (the `shared_ptr`) rights to modify the object. It can't grant rights that it doesn't have itself. So change it to a pointer to a non-const object.

It's the same thing, for example, if you have a class that has a non-const reference member. You need to pass a non-const object to its constructor, even if the constructor does not itself modify the object. The constructor needs to grant the object's reference member rights to modify the object, and it can't do that if it does not itself have those rights.

# python - 带前导双下划线的实例/类属性的意义和使用（特殊行为）

> ID：13880439
> 
> 赞同：2
> 
> 时间：2012-12-14T14:18:40.293
> 
> 标签：python, attributes, naming, instance-variables, class-variables

> **可能重复：**
> [Python 中的私有名称修改有什么好处？](https://stackoverflow.com/questions/1162234/what-is-the-benefit-of-private-name-mangling-in-python)

当我在玩python时，我发现如果`class`或`instance`变量名以2个下划线开头，它们将被重命名为以'_'开头。

例如

```
class Test(object):
    __attribute = "dunderscored"
    def __init__(self, value=0):
        self.__instance_attribute = value

test_instance = Test() 
```

然后两个变量都将重命名为

`test_instance._Test__attribute`和`test_instance._Test__instance_attribute`

为什么会有这样的行为/特征？有什么需要，或者有任何特殊用途吗？

我可以想到一个用例，当不同的类具有一些具有通用名称的属性时，例如。value、id、member 是共同的，但对于某些函数/方法，我们只期望/假设这些类中的一个。在这种情况下，有可能没有进行类型检查，并且当另一个类实例传递给它时（可能是错误的）可能会导致错误和/或不良行为。

但除了这个用例之外，我看不到这种特殊行为的任何好处。这种行为看起来像是一个功能，非常基本的功能，我觉得我在这里遗漏了一些东西。如果它是一个功能，它有什么用？任何典型的用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:20:45.863

使用双下划线前缀称为名称修饰：（来自[Python 文档](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)）：

> 表单的任何标识符`__spam`（至少两个前导下划线，最多一个尾随下划线）在文本上替换为`_classname__spam`，其中 classname 是当前类名，前导下划线被剥离。这种修饰是在不考虑标识符的语法位置的情况下完成的，因此它可以用于定义类私有实例和类变量、方法、存储在全局变量中的变量，甚至是存储在实例中的变量。在其他类的实例上对此类是私有的。

请注意，单个下划线前缀用于指示变量/函数/类应该是私有的（尽管这不是*严格*强制执行的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:24:04.043

此功能有助于避免子类化时名称与属性发生冲突。

考虑以下：

```
class MyClass1(object):
    def __init__(self):
         self.__attribute = 3

    def doSomething(self):
         print(self.__attribute)

class MyClass2(MyClass1):
    def __init__(self):
         MyClass1.__init__(self)
         self.__attribute = 4

    def doSomething2(self):
         print(self.__attribute) 
```

现在，如果您创建一个实例：

```
x = MyClass2()
x.doSomething() #prints 3
x.doSomething2() #prints 4 
```

This essentially can be used to separate some of the behavior of the parent class (`MyClass`) from the behavior of the child class (`MyClass2`)

# iphone - 如何在 AVAudioPlayer 中静音？

> ID：13880443
> 
> 赞同：5
> 
> 时间：2012-12-14T14:18:46.837
> 
> 标签：iphone, ios, avaudioplayer

我已经创建了`AVAudioPlayer`，现在我想在用户单击按钮时将其静音。

这是我尝试过的：

```
player.volume = 1.0  //when first time i initiate my player

- (IBAction)speakerOnOff:(id)sender {
    if (player.volume == 1.0) {

        [player setVolume: 0.0];

        NSLog(@"1volume is:%f",player.volume);
    }else if (player.volume == 0.0) {

        [player setVolume: 1.0];

        NSLog(@"2volume is:%f",player.volume);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T14:24:05.087

`if (player.volume = 1.0)`并且`if (player.volume = 0.0)`至少在两个层面上是错误的。首先，C 不是 Pascal -`=`运算符是一个赋值，可能你的意思是`if (player.volume == 1.0)`。

第二，即使这样也没有什么好处——比较浮点数[并不会像你认为的那样做](http://www.validlab.com/goldberg/paper.pdf)。您最好设置一个布尔标志来指示播放器的状态（并省略该`else if`部分，因为它是多余的）：

```
- (IBAction)speakerOnOff:(id)sender
{
    static BOOL muted = NO;
    if (muted) {
        [player setVolume:1.0];
    } else {
        [player setVolume:0.0];
    }
    muted = !muted;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T20:19:31.720

迅捷2+解决方案

```
 let musicPlayer:AVAudioPlayer = AVAudioPlayer()
    var IsMuted:Bool = false

    if IsMuted == false {
      IsMuted = true
      musicPlayer.volume = 0
    } else {
      IsMuted = false
      musicPlayer.volume = 1
    } 
```

-> 不要`setCategory`忘记`AVAudioSessionCategoryAmbient`

```
do {
      try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient)
      try AVAudioSession.sharedInstance().setActive(true)
    } catch _ {
      return print("couldn't set session")
    } 
```

# java - 保护私有内部 web api 免受公共访问的机制

> ID：13880444
> 
> 赞同：0
> 
> 时间：2012-12-14T14:18:52.867
> 
> 标签：java, web-services, security, api, web-applications

我有一个由静态 HTML 页面和 JS 组成的 java 应用程序。在应用程序中，我有类似 REST 的 API，由 JS 从静态 HTML 调用。应用程序前面是前端代理服务器，比如 Nginx 或 Apache。前端服务器位于服务器 S1 上，servlet 容器位于服务器 S2 上。

我有一个页面[http://example.com/mycontext/page.html](http://example.com/mycontext/page.html)，其中包括调用位于[http://example.com/mycontext/api/someresource](http://example.com/mycontext/api/someresource) 的 REST API 的 JS 文件 前端传递所有与[http 匹配的请求： //example.com/mycontext/](http://example.com/mycontext/)到我的应用程序。

我想在我的应用程序中引入另一个 web api 仅供内部使用，即这个新的 api 应该只由我的 Intranet 中的其他应用程序调用和可见（例如来自服务器 S3），而不是来自 Internet。

我希望这个 api 是基于 HTTP、WS 或 REST 的，并由部署我的应用程序的同一个 servlet 容器（比如 Tomcat）管理。

我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:26:08.177

> 我的前端将所有匹配的请求传递`http://example.com/mycontext/*`给我的应用程序

在这种情况下，最简单的答案是更改前端*不*通过`http://example.com/mycontext/private/*`，然后让其他服务器直接在`http://server.internal.ip:8080/mycontext/private`.

# css - CSS3 动画暂停/取消暂停在 webkit 中的跳跃和跳跃

> ID：13880445
> 
> 赞同：4
> 
> 时间：2012-12-14T14:18:58.763
> 
> 标签：css, webkit, css-animations

我已经实现了动画暂停，如下所述： [如何使用 JavaScript 暂停和恢复 CSS3 动画？](https://stackoverflow.com/questions/5804444/how-to-pause-and-resume-css3-animation-using-javascript)

这是我用于旋转元素的 CSS：

```
.is-rotating{
    -webkit-animation: circle 55s linear infinite;
    -moz-animation: circle 55s linear infinite;
    -ms-animation: circle 55s linear infinite;
    animation: circle 55s linear infinite;
} 
```

我将一个`is-paused`类切换到有问题的元素`onmouseover`：

```
.is-paused{
    -webkit-animation-play-state:paused;
    -moz-animation-play-state:paused;
    -o-animation-play-state:paused; 
    animation-play-state:paused;
} 
```

当我用 JS (onmouseout) 删除这个类时，旋转动画会重置到“原点”。有时会，有时不会。这发生在 webkit（OSX 上的 Chrome 和 Safari）中，在 FF 中运行良好。

我知道这`animation-play-state`是一个实验性功能，但[MDN 说它应该可以在 webkit 中正常工作](https://developer.mozilla.org/en-US/docs/CSS/animation-play-state)。有没有人对如何实现 webkit 浏览器有任何想法？

**更新：**这是 CSS 的其余部分：

```
@-webkit-keyframes circle {
    from { -webkit-transform:rotate(0deg); }
    to { -webkit-transform:rotate(360deg); }
}
@-webkit-keyframes inner-circle {
    from { -webkit-transform:rotate(0deg); }
    to { -webkit-transform:rotate(-360deg); }
}

@-moz-keyframes circle {
    from { -moz-transform:rotate(0deg); }
    to { -moz-transform:rotate(360deg); }
}
@-moz-keyframes inner-circle {
    from { -moz-transform:rotate(0deg); }
    to { -moz-transform:rotate(-360deg); }
}

@-ms-keyframes circle {
    from { -ms-transform:rotate(0deg); }
    to { -ms-transform:rotate(360deg); }
}
@-ms-keyframes inner-circle {
    from { -ms-transform:rotate(0deg); }
    to { -ms-transform:rotate(-360deg); }
}

@keyframes circle {
    from { transform:rotate(0deg); }
    to { transform:rotate(360deg); }
}
@keyframes inner-circle {
    from { transform:rotate(0deg); }
    to { transform:rotate(-360deg); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:17:42.327

你试过`animation-fill-mode: forwards`吗？这指定在动画结束时，它应该保持其最终样式，而不是恢复到其动画前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:11:56.880

我在 Webkit 浏览器中也遇到过类似的 CSS 动画问题。在我的情况下，问题是我正在使用 css`transform`属性，如下所示：

```
@keyframes float {
  0% { transform: translateY(0px); }

  50% { transform: translateY(20px); }

  100% { transform: translateY(0px); }
} 
```

`animation-play-state`这会在使用该属性暂停/播放动画时导致故障/跳跃。替换`transform`为`top`修复了 webkit 浏览器中的此跳跃问题。

```
@keyframes float {
  0% { top: 0px; }

  50% { top: 20px; }

  100% { top: 0px; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T18:50:16.410

我使用 CSS 在两个方向上基于 :hover 为 3D 轮播产品目录制作动画时有同样的跳跃感。

在摆弄了诸如动画填充模式之类的明显想法之后，幸运的是，最终解决的方法是将两个过渡语法与一小段持续时间混合在一起，并将变换本身作为属性。在转换过程中追逐转换的状态，它的更新到被转换的元素保持不变，并且效果似乎符合规范，所以它应该是一个有效的解决方案

```
transition-duration: 0.2s;transition-property:transform; 
```

# javascript - 如何防止使用.htaccess 加载跨域javascript？

> ID：13880451
> 
> 赞同：0
> 
> 时间：2012-12-14T14:19:17.093
> 
> 标签：javascript, .htaccess, cross-domain

开发我的网站的公司刚刚在 Zend Guard 加密的 index.php 文件中添加了这个 javascript 代码（我用“查看源代码”看到它）：

```
(function ()
{
    var smrs = document.createElement("script");
    smrs.type = "text/javascript";
    smrs.async = true;
    smrs.src = document.location.protocol + "//www.domain.com/file.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(smrs, s);
})(); 
```

它在页面底部注入了一个非常激进的 javascript 代码，该代码将一个图像链接添加到他们的网站（每 10 秒一个 SetInterval）。

问题 ？目前被指控犯有重大欺诈行为的当地竞争对手拥有相同的 CMS 和相同的图像链接。

与那个竞争对手有联系对我来说是有偏见的。我想知道是否有办法阻止使用 .htaccess 加载“www.domain.com/file.js”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:28:26.317

你不能（使用 htaccess）。此 javascript 创建一个脚本标记来加载外部 javascript。呼叫永远不会通过服务器。所以 apache (htaccess) 不能阻止它。

最简单的方法是在源代码中搜索并删除脚本（如果您有权访问）。

**更新：**

我看到脚本是加密的......如果你可以在一开始就插入一个脚本（在代码执行之前你可以在 insertBefore 方法上创建一个钩子。这是一个[工作小提琴](http://jsfiddle.net/Vandeplas/GE6dC/)

```
var ALLOWED_DOMAINS = ['www.klaartjedevoecht.be', 'jsfiddle.net'];
function creatHook(){
    function getDomain(url) {
       return url.match(/:\/\/(.[^/]+)/)[1];
    }
    var insertBefore = Element.prototype.insertBefore;
    Element.prototype.insertBefore = function(new_node,existing_node){
        if(new_node.tagName.toLowerCase() === 'script' && ALLOWED_DOMAINS.indexOf(getDomain(new_node.src)) > -1){
            insertBefore.call(this, new_node, existing_node);
        }
    }
}
creatHook();

//TESTING CODE:

var smrs = document.createElement("script");
    smrs.type = "text/javascript";
    smrs.async = true;
    smrs.src = document.location.protocol + "//www.klaartjedevoecht.be/test.js";

//var smrs = document.createElement("img");
//    smrs.src= "http://img52.imageshack.us/img52/7653/beaverl.gif";

var s = document.getElementsByTagName("div")[0];
    s.parentNode.insertBefore(smrs, s); 
```

我同意这有点骇人听闻，但至少它比计时器解决方案更干净。如果您无法将其删除，则没有干净的解决方案。

# facebook-graph-api - 通过 Facebook Graph API 获得的点赞数错误

> ID：13880458
> 
> 赞同：1
> 
> 时间：2012-12-14T14:19:42.023
> 
> 标签：facebook-graph-api, facebook-like

有几种方法可以在图形 api 中获取页面喜欢的数量，最简单的方法是通过此 url 获取 JSON 响应，例如：

```
http://graph.facebook.com/?id=http://cnn.com/ 
```

但是，该方法返回错误的喜欢数：

```
{
   "id": "http://cnn.com/",
   "shares": 138855,
   "comments": 39
} 
```

CNN 页面有 facebook 小部件，显示实际点赞数（140 万）：http: [//i.imgur.com/IQlaq.png](http://i.imgur.com/IQlaq.png)

有没有一种方法可以从 API 中获取与页面上的 facebook 一样的喜欢数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:00:34.437

您对这些数字所谈论内容的看法是错误的：

[140 万这个数字对应于喜欢CNN International](https://www.facebook.com/cnninternational?fref=ts)**页面** 的人数。

该查询`http://graph.facebook.com/?id=http://cnn.com/`查找[cnn.com](https://developers.facebook.com/tools/debug/og/object?q=cnn.com)上的 Open Graph 对象被共享的次数。

> 有没有一种方法可以从 API 中获取与页面上的 facebook 一样的喜欢数？

总是有滞后的可能。如果你想要绝对实时，你应该[在 edge.create 上实现一个 javascript 事件监听器](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)并自己跟踪它。就个人而言，我不需要实时的东西，所以我更喜欢将 FQL 与[link_stat](https://developers.facebook.com/docs/reference/fql/link_stat)表一起使用。

# mysql - 想要 max(date) 的行

> ID：13880460
> 
> 赞同：1
> 
> 时间：2012-12-14T14:19:49.950
> 
> 标签：mysql

这适用于MYSQL：

```
SELECT hi_Historie_id, 
  hi_Klus_id, 
  hi_Datum_gedaan, 
  hi_Prijs, 
  hi_Voldaan, 
  hi_Datum_voldaan, 
  hi_Voldaan_via, 
  max(hi_next_date), 
  hi_Opmerking
FROM Historie 
GROUP BY hi_Klus_id 
```

这给出了正确的结果：**所有`hi_Klus_id`具有最新日期**的行。

但是，我将与另一个表进行连接：

```
LEFT OUTER JOIN Glazenwassen ON Historie.hi_Klus_id = Glazenwassen.gw_Klus_id 
WHERE Historie.hi_next_date <= CURDATE() 
```

这给出了错误`#1064`。

谁能解释我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:27:35.483

我的建议是创建一个子查询来返回`MAX(hi_next_date)`，然后将该结果加入到`Historie`和`Glazenwassen`表中：

```
select h.hi_Historie_id, 
  h.hi_Klus_id, 
  h.hi_Datum_gedaan, 
  h.hi_Prijs, 
  h.hi_Voldaan, 
  h.hi_Datum_voldaan, 
  h.hi_Voldaan_via, 
  h.hi_next_date, 
  h.hi_Opmerking
from Historie h
inner join
(
  select max(hi_next_date) hi_next_date, hi_Klus_id
  from Historie
  group by hi_Klus_id
) h2
  on h.hi_Klus_id = h2.hi_Klus_id
  and h.hi_next_date = h2.hi_next_date
left join Glazenwassen g
  on h.hi_Klus_id = g.gw_Klus_id
where h.hi_next_date <= CURDATE() 
```

当您将子查询连接到`Historie`表时，您需要同时连接`hi_next_date`和`hi_Klus_id`。

# delphi - 移动面板的动画/重绘闪烁严重 - 建议？

> ID：13880462
> 
> 赞同：1
> 
> 时间：2012-12-14T14:19:55.753
> 
> 标签：delphi, delphi-xe2, tms, animatewindow

当我对应用程序中的某些组件进行“动画处理”时，希望你们中的一些人能够指出我处理闪烁/撕裂/重绘问题的正确方向。

我必须先说“动画”在不处于全屏模式时似乎可以正常工作（没有闪烁等） - 即 1024*768，borderstyle=bsSingle。当应用程序接管完整的监视器并且边框样式变为 bsNone 时，此问题变得更加明显。

有2个“动画”：

1 - 使用 Winapi AnimateWindow 方法从左到右滚动面板

2 - TmsAdvPolyPager 逐步浏览其每一项并随后显示其“页面”

滚动面板时，“退出”的面板会留下“轨迹”，动画似乎在颤抖，不再流畅。

单步执行 TmsAdvPolyPager 项时，下一项有时不会突出显示，并且它显示的页面通常具有上一个面板的“残差”。

两个动画都由计时器触发 - AnimateWindow 在它自己的线程中，而 PolyPager 步进不是。

所以，基本上 - 关于如何平滑这些动画并强制正确重绘 TmsAdvPolyPager 组件的任何想法？第一次尝试这种东西，所以不完全确定要研究什么。

一如既往，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:10:59.980

TPaintBox 是您需要的，可能在 TScroller 上。

转储面板并在 TPaintbox 画布上绘制矩形。

您显然已经编写了 99% 的代码，因此移动到定义的矩形应该不是问题 :)

# javascript - 为什么音频不能在 Safari 中播放并给我一个错误''undefined' is not a constructor (evalating 'new Audio()')'

> ID：13880463
> 
> 赞同：1
> 
> 时间：2012-12-14T14:19:55.577
> 
> 标签：javascript, audio

请在下面找到适用于 IE、Firefox 和 Chome 的代码。为什么它在 Safari 中不起作用？它给了我一个错误**“未定义”不是构造函数（评估“新音频（）”）**

```
var playSound = function (){
    var audio = new Audio(),
        audioFileName = 'click',
        canPlayOgg = !!audio.canPlayType && audio.canPlayType('audio/ogg; codecs="vorbis"') != "",
        ext = (canPlayOgg)?'.ogg':'.mp3';

    audio.setAttribute("src",audioFileName + ext);
    audio.play();
}
<input type="button" onclick="playSound();"/> 
```

非常感谢任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:24:44.977

您是否有可能在 var/constructor 行的末尾忘记了一个分号并导致了它？例如，尝试

```
var audio = new Audio(),
    audioFileName = 'click',
    canPlayOgg = !!audio.canPlayType && audio.canPlayType('audio/ogg; codecs="vorbis"') != "",
    ext = (canPlayOgg)?'.ogg':'.mp3'; 
```

# red5 - 一段时间后，RTMPT 连接与 Red5 关闭

> ID：13880468
> 
> 赞同：2
> 
> 时间：2012-12-14T14:20:04.390
> 
> 标签：red5

我在 Windows XP sp3 上为 Java 6 使用 Red5 版本 1.0.0（最终版本）。我正在使用从[https://code.google.com/p/red5/下载的安装程序版本](https://code.google.com/p/red5/). 我有一个项目，其中我正在用户之间进行实时网络摄像头聊天。我正在为此使用RTMPT（HTTP over RTMP）协议。所以我在Apache Web服务器后面设置了我的Red5服务器。问题是一切都顺利进行了45-50秒，然后RTMPT连接突然关闭了。我是没有使用专用的 rtmpt 服务器，即我没有取消注释 conf 文件中的 rtmpt bean。而是在我的应用程序的 web.xml 中添加了 servlet 映射条目（用于空闲、fcs、打开等）。RTMPT 正在侦听 5080 端口。我也用以前版本的 Red5 对此进行了测试，但问题是一样的。RTMPT 连接在一段时间后（一分钟内）关闭。我查看了日志，但没有发现任何关于此的内容。由于不活动期，也没有关闭连接。跟 Apache 有关系吗？我不确定服务器是否正在关闭连接（尽管我找不到任何关于关闭连接的日志）或客户端关闭它。也用 0.9.0 和 0.9.1 尝试过，但无济于事。我听说有问题在 Mac 上使用带有 Red5 的 RTMPT 但我在 Windows 上。任何指向这个问题的指针？任何帮助表示赞赏。此外，这里是我在 Apache Web 服务器上获得的错误日志 -

[错误] (OS 10048) 每个套接字地址（协议/网络地址/端口）通常只允许使用一次。：代理：HTTP：尝试连接到 red5serverip:5080 (*) 失败。

相同的日志重复四次。

这里还有一些来自 Apache 的访问日志——

"POST /send/IDTK7NOG2PXGB/803 HTTP/1.1" 200 1
"POST /send/IDTK7NOG2PXGB/804 HTTP/1.1" 503 323
"POST /send/YXF4WTFMN8TCM/1391 HTTP/1.1" 200 8285
"POST /send/YXF4WTFMN8TCM/1392 HTTP/1.1" 200 1
"POST /send/YXF4WTFMN8TCM/1393 HTTP/1.1" 200 54
"POST /send/YXF4WTFMN8TCM/1394 HTTP/1.1" 200 1
"POST /send/YXF4WTFMN8TCM/1395 HTTP/1.1" 503 323
"POST /close/IDTK7NOG2PXGB/805 HTTP/1.1" 503 323
"POST /close/YXF4WTFMN8TCM/1396 HTTP/1.1" 503 323

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:56:28.943

可能你的 tcp 端口用完了。默认情况下，一个 tcp 连接会在 TIME_WAIT 状态下保持 4 分钟，即使它已经关闭。当您的 RTMPT 流每秒使用 5 个连接时，您的系统将需要为每个连接的用户提供至少 5*60*4=1200 个端口。

防火墙通常会限制可用端口的数量。您还可以减少 tcp 套接字的保持活动时间。如果您使用 apache 错误消息四处搜索，您将找到足够的信息来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T18:05:15.723

503 表示服务没有响应；如果您通过 apache 转发到 red5，那么这意味着那里有问题。我建议不要使用独立的 rtmpt bean；而是仅使用 servlet 并从混合中删除 apache 来调试问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:47:18.447

您的 red5 服务器可能已崩溃。当您的 RAM 使用结束时，就会发生这种情况。在这种情况下，您需要再次手动启动 red5。如果这解决了您的问题，您需要升级 RAM。多次遇到此问题后，我使用了大约 8GB 的​​ RAM。因为red5是用JAVA写的，内存不足。FFMPEG 非常适合在低内存中使用。但我不知道如何使用 ffmpeg 提供聊天。

# c# - 从 C# Visual Studio 2010 调用 SSIS 包。出现错误 0xC0011008

> ID：13880473
> 
> 赞同：0
> 
> 时间：2012-12-14T14:20:15.983
> 
> 标签：c#, sql-server, visual-studio-2010

试图自动化目前是两个步骤的过程。首先，我们有一个 (VS 2010) C# 应用程序，它从供应商处下载价格目录，处理数据并创建一个 .txt 文件。其次，我们有一个 SSIS 项目 (VS 2008)，它清空 (SQL Server 2005) 数据库中的表并从 .txt 文件中重新填充它。

我试图通过从应用程序调用 SSIS 项目来组合这些步骤。如果有更好的方法将按摩后的数据输入数据库，我愿意接受建议。

我使用的方法在这里：

```
private static void UpdateVendorTable()
{
    string pkgLocation;
    Package pkg;
    Application app;
    DTSExecResult pkgResults;

    pkgLocation = appConfig.Default.DataSSIS; // C:\Projects\Vendor\vendor.dtsx
    app = new Application();
    pkg = app.LoadPackage(pkgLocation, null);
    pkgResults = pkg.Execute();
} 
```

但是，当“pkgLocation = appConfig.Default.DataSSIS;”时，我得到如下所示的错误 到达线。

由于错误 0xC0011008“从 XML 加载时出错。无法为此问题指定更多详细的错误信息，因为没有传递任何事件对象来存储详细的错误信息。”导致包无法加载。当 CPackage::LoadFromXML 失败时会发生这种情况。此异常有一个 InnerException：System.Runtime.InteropServices.COMException (0xC0011008)：由于错误 0xC0011008“从 XML 加载时出错。由于没有传递事件对象，因此无法为此问题指定更多详细的错误信息。可以存储详细的错误信息。”。当 CPackage::LoadFromXML 失败时会发生这种情况。

在 Microsoft.SqlServer.Dts.Runtime.Wrapper.ApplicationClass.LoadPackage（字符串文件名，布尔 loadNeutral，IDTSEvents90 pEvents）在 Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage（字符串文件名，IDTSEvents 事件，布尔 loadNeutral）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:23:31.903

我最终确定的答案是“使用 SqlBulkCopy 而不是 SSIS”。我已经创建了包含所有数据的对象，因此只批量复制到数据库而不是写入 SSIS 将用来更新数据库的文本文件是有意义的。

我发现这篇很棒的文章[http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)完成了所有步骤，它工作得很好。

# asp.net-mvc - 自定义角色提供程序已初始化但未使用？

> ID：13880478
> 
> 赞同：0
> 
> 时间：2012-12-14T14:20:41.560
> 
> 标签：asp.net-mvc, asp.net-web-api, roleprovider

我正在尝试使用简单的自定义角色提供程序并使用此处的代码：[http ://code.google.com/p/sfckopanka/source/browse/trunk/App_Code/OdbcRoleProvider.cs?r=45](http://code.google.com/p/sfckopanka/source/browse/trunk/App_Code/OdbcRoleProvider.cs?r=45)

这是使用这个实现的：http: [//msdn.microsoft.com/en-us/library/tksy7hd7 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tksy7hd7(v=vs.100).aspx)

这只是来自 Microsoft 的简单样板代码。

当我调试我的应用程序时，我可以看到我的角色提供程序已初始化但是当我尝试检查角色时没有调用任何方法。

```
[Authorize(Roles="Customer")] 
```

或者

```
User.IsInRole("Customer") 
```

我在我的角色提供者的几个地方设置了断点，但它们从未被击中。

仅供参考，我使用的是 WebAPI，我没有使用成员资格提供程序，而是通过消息处理程序使用基本身份验证。

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

基本身份验证运行良好，但我不确定这是否是阻止我的角色提供者被调用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:06:04.063

回答这个以防它可以帮助别人。在上面链接的 Basi Auth 代码中，有一个 PrincipalProvider 类。在这个类中，您创建一个 GenericPrincipal，它还接受用户所在的角色，所以我只需要添加一行代码来让我的角色提供给 GenericPrincipal

```
 public IPrincipal CreatePrincipal(string username, string password)
            {

                if (!MyRepo.Authentication.ValidateUser(username, password))
                {
                    return null;
                }

                var identity = new GenericIdentity(username);

              //Code to get my roles from my role provider to use when setting principal
                string[] roles =Roles.Provider.GetRolesForUser(username);

                IPrincipal principal = new GenericPrincipal(identity,roles);

                ShopZioRepo.ClearUserCache(ShopZioGlobal.MyCookies.UserID);
                var user = ShopZioRepo.GetUserByEmail(username);
                ShopZioGlobal.MyCookies.UserID = user.SalesRepID;
                ShopZioGlobal.MyCookies.Username = username;

                return principal;
            } 
```

希望这可以帮助某人。

# asp.net-mvc - EF Code First 在我的数据库中创建无用的列。为什么？

> ID：13880481
> 
> 赞同：1
> 
> 时间：2012-12-14T14:20:48.340
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我有这样的事情：

```
public class Account
    {
        [Key]
        public Guid AccountId { get; set; }
    }

    public class TransactionHistory
    {
        [Key]
        public int Id { get; set; }
        public Account Sender { get; set; }
        public Account Receiver { get; set; }
    } 
```

我的模型构建器如下所示：

```
modelBuilder.Entity<TransactionHistory>()
                .HasRequired(history => history.Sender)
                .WithMany()
                .Map(s => s.MapKey("Sender"))
                .WillCascadeOnDelete(false);

            modelBuilder.Entity<TransactionHistory>()
                .HasRequired(history => history.Receiver)
                .WithMany()
                .Map(s => s.MapKey("Receiver"))
                .WillCascadeOnDelete(false); 
```

在我的数据库中，我的 TransactionHistory 表有三列：发送者、接收者和 Account_AccountId。虽然前两列没问题，但我不想要第三列，而且我不知道为什么 CodeFirst 创建它...你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:47:20.947

`ICollection<TransactionHistory>`像in这样的集合`Account`将导致与它自己的外键 in 的第三个关系`Account`。这就是您看到的附加键。如果您不想要第三个关系，则必须决定`Account`要将集合与哪个导航属性相关联。任何一个...

```
modelBuilder.Entity<TransactionHistory>()
            .HasRequired(history => history.Sender)
            .WithMany(account => account.TransactionHistories)
            .Map(s => s.MapKey("Sender"))
            .WillCascadeOnDelete(false); 
```

...或者...

```
modelBuilder.Entity<TransactionHistory>()
            .HasRequired(history => history.Receiver)
            .WithMany(account => account.TransactionHistories)
            .Map(s => s.MapKey("Receiver"))
            .WillCascadeOnDelete(false); 
```

但不是两者兼而有之。或者删除集合属性，第三个 FK 将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:23:08.077

我认为这样做会解决它。

```
[Column("ID")]
[Key]
public int Id { get; set; } 
```

另外我会考虑将您的映射更改为`s.MapKey("SenderAccountID")`and `s.MapKey("ReceiverAccountID")`。让在您的数据库中工作的人的生活更轻松。

# php - 如何禁用 SSL/TLS 压缩

> ID：13880482
> 
> 赞同：1
> 
> 时间：2012-12-14T14:20:50.700
> 
> 标签：php, apache, ssl

对于“SSL/TLS 犯罪攻击”问题，我需要在我的 apache 服务器中禁用 SSL/TLS 压缩选项。说出你的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T14:27:21.200

试试[`SSLCompression off`](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#sslcompression) 你的 Apache Httpd 配置。这可能是默认值，具体取决于您使用的版本。

# java - 我可以从 IntelliJ 12 的搜索结果中运行所有测试吗？

> ID：13880483
> 
> 赞同：3
> 
> 时间：2012-12-14T14:21:10.077
> 
> 标签：java, intellij-idea

我刚刚更改了一个文件。我搜索了它的用法并发现了一些使用该文件的测试。我什至可以在搜索结果中按测试/产品资源对它们进行分组。现在我只想执行那些测试——我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:00:48.193

看起来现在还不可能。我[为此创建了一个新功能请求](http://youtrack.jetbrains.com/issue/IDEA-97600)，请投票、加注星标或评论该请求以接收自动通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:21:50.640

事实上，IntelliJ 已经可以做我想做的事了。这是搜索结果视图中的一个错误，将在下一个版本中修复。从那时起，Ctrl-Shift-F10 将与所有其他视图一样工作。

感谢 CrazyCoder 在 Jetbrains 上提出了导致解决方案的问题。

# rest - 我应该如何通过 AWS 将 Backbone 与 REST 结合使用？

> ID：13880487
> 
> 赞同：0
> 
> 时间：2012-12-14T14:21:20.510
> 
> 标签：rest, backbone.js, amazon-web-services

我想开始在真实环境（不是本地主机）中练习基于 JS 服务器的东西，而 AWS 似乎是最经济的方法。我想首先将 Backbone 与 REST 结合使用。

如果我这样做，REST 是否在 AWS 上准备好开箱即用，而只是将我的 Backbone 代码扔到服务器上？还是在 AWS 上配置 REST API 的问题？

提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:29:10.390

正如评论所指出的，Web 应用程序分为两部分，客户端和服务器，而 Backbone 是一个专门的客户端库......

……嗯，差不多。有一个名为 Node.js 的服务器端 Javascript Web 框架，如果你真的需要，可以在上面使用 Backbone。或者，您可以运行更传统的服务器端语言/框架，如 Ruby/Rails、Python/Django 等。如果您使用 AWS 的 EC2 服务，您基本上可以使用自己的计算机来做您想做的事情，并且您可以使用 Node， Django，或其他任何东西来编写您的客户端代码可以使用的 REST-ful Web 服务。

# ios - 触摸对象 GLKIT 或 OpenGL 有什么功能？

> ID：13880489
> 
> 赞同：1
> 
> 时间：2012-12-14T14:21:39.157
> 
> 标签：ios, opengl-es, glkit

我正在寻找一个描述来触摸我的 OpenGL 对象或在我触摸它时获取一个事件。GLKit 或 OpenGL ES 有一些功能可以使用吗？或者我必须计算我的对象的位置，并且必须将它与我的 Touch 的坐标进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:55:07.940

没有内置的，但这里是 gluProject 函数的移植版本，它会将对象中的一个点放在屏幕坐标中，因此您可以查看您的触摸是否在该点附近：

```
GLKVector3 gluProject(GLKVector3 position, 
                  GLKMatrix4 projMatrix,
                  GLKMatrix4 modelMatrix,
                  CGRect viewport
                  )
{
GLKVector4 in;
GLKVector4 out;

in = GLKVector4Make(position.x, position.y, position.z, 1.0);

out = GLKMatrix4MultiplyVector4(modelMatrix, in);
in = GLKMatrix4MultiplyVector4(projMatrix, out);

if (in.w == 0.0) NSLog(@"W = 0 in project function\n");
in.x /= in.w;
in.y /= in.w;
in.z /= in.w;
/* Map x, y and z to range 0-1 */
in.x = in.x * 0.5 + 0.5;
in.y = in.y * 0.5 + 0.5;
in.z = in.z * 0.5 + 0.5;

/* Map x,y to viewport */
in.x = in.x * (viewport.size.width) + viewport.origin.x;
in.y = in.y * (viewport.size.height) + viewport.origin.y;

return GLKVector3Make(in.x, in.y, in.z);

}

- (GLKVector2) getScreenCoordOfPoint {

GLKVector3 out = gluProject(self.point, modelMatrix, projMatrix, view.frame);

GLKVector2 point = GLKVector2Make(out.x, view.frame.size.height - out.y);

return point;
} 
```

# php - 使用 API 获取 facebook 用户名

> ID：13880490
> 
> 赞同：0
> 
> 时间：2012-12-14T14:21:43.363
> 
> 标签：php, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 API 获取 facebook 用户名

这是我的代码：

```
$facebook = new Facebook(array(
  'appId'  => $this->app_id,
  'secret' => $this->app_secret,
  'cookie' => true,
));

$session = $facebook->getUser();

$me = null;
if ($session) {
    try {
        $uid = $facebook->getUser();
        echo $uid;
        exit();
        $me = $facebook->api('/me');
        echo $me;
        exit();
    } catch (FacebookApiException $e) {
        error_log($e);
    }
    $personLastName= $me['last_name'];

    var_dump($personLastName);
    exit(); 
```

它崩溃的行：

```
$me = $facebook->api('/me'); 
```

没有显示错误，只是白页，apache 中没有日志错误

欢迎提供一些帮助！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:28:41.333

您尝试打印第一个元素，然后您已经终止了语句，`exit;`然后其余代码将不会被执行。试试这个

```
$me = null;
if ($session) {
    try {
        $uid = $facebook->getUser();
        echo $uid;

        $me = $facebook->api('/me');
        echo $me;

    } catch (FacebookApiException $e) {
        error_log($e);
    }
    $personLastName= $me['last_name'];

    var_dump($personLastName);
    exit();
} 
```

# c# - 如何从我的 WebForm 禁用/启用 UserControl 内的 TextBox

> ID：13880493
> 
> 赞同：0
> 
> 时间：2012-12-14T14:22:00.903
> 
> 标签：c#, asp.net, web-applications

我创建了一个名为“DadosFuncionario”的用户控件。现在，我在我的 WebForm 中使用它。有时，我需要启用或禁用我的 UserControl 的控件。这取决于我是在查看还是编辑我的记录。

我尝试以两种方式做到这一点，但没有一种方法有效。

这些是我尝试过的：

```
1º

In my web form:

public partial class MyWebForm : System.Web.UI.Page
{

    private void EnableFields()
    {
         MyUserControl.EnableFields();
    }

    private void DisableFields()
    {
         MyUserControl.DisableFields();
    }

}

public partial class MyUserControl : System.Web.UI.UserControl
{
     public void EnableFields()
     {
         txtName.Enabled = true;
     }

     public void DisableFields()
     {
         txtName.Enabled = false;
     }
}

2º
/***************************************/

In my Web Form

public partial class MyWebForm : System.Web.UI.Page
{

    private void EnableFields()
    {
         ((TextBox)MyUserControl.FindControl("txtName")).Enabled = true;
    }

    private void DisableFields()
    {
         ((TextBox)MyUserControl.FindControl("txtName")).Enabled = false;
    } 
```

}

我认为也许我的 UpdatePanel 正在干扰，但我添加了一个引用我的 UserControle 的触发器并且发生了任何事情。

关于如何解决这个问题的任何想法？

此致。

# ruby-on-rails - Rails 如何将对象创建附加到 user_id 的用户会话

> ID：13880495
> 
> 赞同：0
> 
> 时间：2012-12-14T14:22:11.513
> 
> 标签：ruby-on-rails, session, ruby-on-rails-3.2

我是新来的铁路。我正在开发一个简单的应用程序，用于创建和与朋友分享收藏。我有用户，他们有物品。这些项目属于类别，而类别又具有子类别。用户可以对项目发表评论

用户拥有_many 个项目，项目属于_to 用户

Category has_many items, Items 属于 category

类别 has_many subcategories, Subcategories belongs_to category

item has_many comments，评论属于 item。

我已经设法创建了一个单独的用于创建评论的选项，其中包含选择类别和子类别的选项。这会自动更新 items 表中的 category_id 和 subcategory_id：

意见/项目/new.html.erb

```
div class="field">
  <%= f.label :item_name %><br />
  <%= f.text_field :name %>
 </div>

 <div class="field">
    <%= f.label :category %><br />
    <%= f.collection_select :category_id, @categories, :id, :category_type, prompt: true %>
 </div>

  <div class="field">
    <%= f.label :subcategory %><br />
    <%= f.collection_select :subcategory_id, @subcategories, :id, :sub_type, prompt: true %>
 </div>

 <div class="field">
  <%= f.label :description %><br />
  <%= f.text_area :description, rows: 7%>
 </div>

 <div class="actions"> 
    <%= f.submit %>
 </div>
<% end %> 
```

控制器/items_contoller.rb

类 ItemsController < ApplicationController

```
 def index
    @items = Item.all

  end

  def new
    @item = Item.new
    @categories = Category.all
    @subcategories = Subcategory.all 

  end

  def edit
    @item = Item.find(params[:id])
    @categories = Category.find.all
    @subcategories = Subcategory.all 

  end

  def show
    @item = Item.find(params[:id])

     render 'show'
    end

  def create
    @item = Item.new(params[:item])

    if @item.save
      flash[:success] = "Added new item #{@item}"
      redirect_to @item
    else
      render 'new'
    end
  end

  def update
    @item = Item.find(params[:id])

    if @item.update_attributes(params[:item])
     flash[:success] = "Successfully updated item!"
    redirect_to @item 
    else
     render 'edit'
    end  
  end

  def destroy
    @item = Item.find(params[:id])
    @item.destroy
    flash[:success] = "Successfully deleted category!"
    redirect_to categories_url, notice: "deleted"
  end

end 
```

但是我在创建或编辑时将特定项目关联到用户时遇到问题。我已经为用户提供了一个工作会话管理。用户可以登录和注销。我还希望能够使用当前会话中用户的相应 user_id 更新项目表中的 user_id 列，但我不知道如何去做。如果有帮助，以下是我处理会话管理的方式

session_controller.rb

类 SessionsController < ApplicationController

```
 def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
     render 'new', notice:"Invalid email/password combination" 
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

session_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end 

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end
end 
```

非常感谢您的预期回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:28:47.123

```
class ItemsController < ApplicationController
  def create
    @item = Item.new(params[:item])
    @item.user_id = current_user.id

    # ...
  end
end 
```

不确定它是否是您要查找的内容。

# jquery - 使用 jquery 更改类

> ID：13880496
> 
> 赞同：0
> 
> 时间：2012-12-14T14:22:16.610
> 
> 标签：jquery, asp.net, class, attributes

我有一个名为“rgExpandCol”的类的 td，并且想要更改其中的输入类。下面是我的html：

```
<tr>
    <td class="rgExpandCol">
    <input class="rgExpand" ...
    </td>
<tr> 
```

我已经尝试过这个 jquery 但我得到 $find 为空：

```
$(this).closest('td').attr('rgExpand', 'rgCollapse'); 
```

编辑 ：：：

基本上正在使用`radgrid`和扩展隐藏的行

`$(this).closest('tr').next('tr').css('display', '');`

并且 $(this) 在我的网格点击事件中

```
$("#<%=gv.ClientID%> tr:has(td)").click(function (e) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:25:53.093

首先，您需要选择输入，这可以通过一个选择器来完成：

```
var my_input = $(this).find('input.rgExpand'); 
```

然后您可以删除其当前类并添加新类：

```
my_input
    .removeClass('rgExpand')
    .addClass('rgCollapse'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:23:56.847

```
$(this).closest('td').find("input").removeClass("old").addClass("new") 
```

将为 TD 内的输入应用 CSS :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:25:46.493

```
$('tr td.rgExpandCol input.rgExpand').removeClass('oldClass').addClass('newClass'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:24:52.463

尝试这个：

```
$('.rgExpandCol > input').removeClass("< existing class >").addClass("< new class >"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T14:24:59.593

所以你想定位 td 并改变它里面的输入类？

我会这样做：

`$('.rgExpandCol > input').removeClass('classtoremove').addClass('newclasstoadd');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T14:23:15.303

使用 removeClass() 和 addClass() 进行更改。

```
$("#<%=gv.ClientID%> tr:has(td)").click(function (e) {
    e.preventDefault();
    $(this).find('input').addClass('rgExpand').removeClass('rgCollapse');
}); 
```

假设选择器中使用的 id 标识了表。

# three.js - 向几何图形添加细分

> ID：13880497
> 
> 赞同：4
> 
> 时间：2012-12-14T14:22:25.580
> 
> 标签：three.js

我正在尝试向这样的球体添加细分：

[http://stemkoski.github.com/Three.js/Subdivision-Cube.html](http://stemkoski.github.com/Three.js/Subdivision-Cube.html)

这是我的代码：http: [//jsfiddle.net/mdrorum/HvFLw/](http://jsfiddle.net/mdrorum/HvFLw/)

```
 <script src="http://mrdoob.github.com/three.js/build/three.js"></script>

            <script type="text/javascript">

            var camera, scene, renderer;
            var geometry, material, mesh;
            var smooth, subdiv, modifier;

            init();
            animate();

            function init() {

                camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.z = 1000;

                scene = new THREE.Scene();

                renderer = new THREE.CanvasRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );

                document.body.appendChild( renderer.domElement );

                geometry = new THREE.SphereGeometry( 200 );
                material = new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true } );

                mesh = new THREE.Mesh( geometry, material );
                scene.add( mesh );

                var smooth = mesh.clone();
                var subdiv = 3;
                var modifier = new THREE.SubdivisionModifier( subdiv );
                //modifier.modify( smooth );

            }

            function animate() {

                requestAnimationFrame( animate );

                mesh.rotation.x += 0.01;
                mesh.rotation.y += 0.02;

                renderer.render( scene, camera );

            }

        </script> 
```

这工作正常，但取消注释：`//modifier.modify( smooth );`

什么都没发生。:(

如何添加细分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-01T10:05:44.537

[在这里](http://www.kadrmasconcepts.com/blog/2011/11/06/subdivision-surfaces-with-three-js/)你可以找到一个很好的教程和一个工作[演示](http://client.kadrmasconcepts.com/blog_examples/html5-webgl-subdivision/)。引用作者的话：

```
// First we want to clone our original geometry.
// Just in case we want to get the low poly version back.
var smooth = THREE.GeometryUtils.clone( geometry );

// Next, we need to merge vertices to clean up any unwanted vertex. 
smooth.mergeVertices();

// Create a new instance of the modifier and pass the number of divisions.
var divisions = 3;
var modifier = new THREE.SubdivisionModifier(divisions);

// Apply the modifier to our cloned geometry.
modifier.modify( smooth );

// Finally, add our new detailed geometry to a mesh object and add it to our scene.
var mesh = new THREE.Mesh( smooth, new THREE.MeshPhongMaterial( { color: 0x222222 } ) );
scene.add( mesh ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:56:06.313

您正在尝试修改`mesh`. 您需要修改一个`geometry`.

```
modifier.modify( geometry ); 
```

# java - 比较下载文件的文件大小与 ftp 服务器上的远程文件

> ID：13880498
> 
> 赞同：1
> 
> 时间：2012-12-14T14:22:32.637
> 
> 标签：java, unix, ftp, sftp, ftp-client

我正在使用 FTPClient 从远程 FTP 服务器下载文件。

下载后，我想比较本地文件和远程文件的大小是否相同。

下载文件后，下载文件的大小与远程服务器中的不同。

下面是代码片段

```
FileOutputStream output = new FileOutputStream(localFile.getAbsolutePath());
        if( getFTPFileType()!=null ){
                            // set as binary  
            ftpClient.setFileType(getFTPFileType(), getFTPFileType());
            ftpClient.setFileTransferMode(getFTPFileType());
        }
        if( getLog().isDebugEnabled()){
            getLog().debug("FTP File Type "+getFTPFileType());
        }
        boolean success = ftpClient.retrieveFile(remoteFile.getName(), output); 
```

如果我在windows环境下下载，它工作正常。但是如果我在 AIX 服务器上下载，文件大小会有所不同。我比较了下载的文件，内容是一样的。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:00:48.083

如果字节数大小的差异 ~= 文件中的行数，这是由于删除了 windows 回车控制字符：`\r`或者`^M`它们出现在 vi 中。

在校验和失败的意义上，内容是不一样的。

编辑：

inside ftp: dir filename 将返回类似这样的内容

```
-rw-rw-rw-   1 user     group        1224 Mar  4 20:22 twrite.c 
```

我不知道如何让您的 java 类发送该命令。检查您的文档。当您可以开始`dir`工作时，您可以标记您返回的字符串，第五个字段是远程端的字节数。

在将 fileA 从远程下载到本地后，使用 unix shell 的示例（java 将允许您运行 UNIX 脚本）：

```
local_size=$(ls -l fileA | awk '{print $5}')
/usr/bin/ftp -n  <<EOF > ftp.log
open remote_nodename
user username password
cd /directory/to/files
dir fileA
bye
END
remote_size=$(grep 'fileA' ftp.log | awk '{print $5}')
[ $remote_size -eq $local_size ] && echo 'OK' || echo 'NOTOK' 
```

如果你可以用 java 类模拟这个没问题，否则你需要使用类似这样的东西，它显示了运行时 exec() 的使用：

```
http://www.java-samples.com/showtutorial.php?tutorialid=8 
```

同样，要明确 ftp 不在远程端运行 shell 脚本。ssh 可以。

# wso2 - WSO2 AS + Developer Studio + maven 项目

> ID：13880499
> 
> 赞同：1
> 
> 时间：2012-12-14T14:22:41.230
> 
> 标签：wso2, maven-3, wso2carbon, wso2developerstudio

我正在研究如何使用 WSO2 Developer Studio (2.1.0) 开发 JAX-RS 服务并将其部署到 WSO2 AS 5.0.1 服务器。

当我创建一个包含 JAX-RS 服务项目的新 CAR 项目时，我可以直接从 Eclipse 启动并在正在运行的 WSO2 AS 5.0.1 服务上部署 CAR。

但是，当我安装 m2eclipse 插件并在项目中包含 maven 依赖项时，这些依赖项不在已部署的 WAR 模块的类路径中。

在 JAX-RS 项目中处理 Maven 依赖项的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:59:21.137

现在，您在 pom.xml 中声明的 maven 依赖项并未添加到 Developer Studio 项目的类路径中，反之亦然。我们将在未来的 Developer Studio 版本中解决此问题。

作为目前的解决方法，您需要手动将依赖项添加到项目类路径中。

# wicket - 如何在 wicket 1.5 中实现后退按钮

> ID：13880509
> 
> 赞同：0
> 
> 时间：2012-12-14T14:23:26.457
> 
> 标签：wicket

我发现了很多如何在 wicket 中创建后退按钮的示例，但它在 wicket 1.4 及更低版本中使用`getPageMap`。此功能不在 wicket 1.5 中。我知道有一些 js 功能作为`window.history.back()`or `history.go(-1`) 但我想实现一些明确的解决方案。任何想法 ？

我的想法是将 webPage 作为 Stack 存储在我自己的 webSession 中。这个好吗 ？

```
public class TournamentSession extends WebSession {

protected final Logger logger = LoggerFactory.getLogger(getClass());

private static final long serialVersionUID = 1L;
private Stack<BasePage> previosPage = new Stack<BasePage>();

public TournamentSession(Request request) {
    super(request);
}

public void addPreviosPage(BasePage basePage) {
    logger.info(basePage.getClass().toString());
    previosPage.push(basePage);
}

public BasePage getPreviousPage() {
    BasePage basePage = previosPage.pop();
    logger.info(basePage.getClass().toString());

    return basePage;
}
} 
```

当页面被渲染时，将实际页面存储到这个堆栈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T13:06:33.913

利用`session.getPageManager().getPage(id)`

# java - 在 GCMIntentService 中实例化 TextToSpeech

> ID：13880510
> 
> 赞同：1
> 
> 时间：2012-12-14T14:23:30.933
> 
> 标签：java, android, text-to-speech, google-cloud-messaging

所以我有点问题。我试图让我的应用程序根据它通过 GCM 接收到的消息来做事。在这种情况下，它应该使用 TextToSpeech 类来发出声音。它有点工作，但不是我第一次发送消息。我意识到这可能是因为 TextToSpeech 尚未实例化，但我不确定如何去做？我尝试了 onInit()，但这根本不起作用。

另外，在我的示例中，关闭 TTS 的最佳方法是什么？

免责声明：我来自 PHP 背景，对 Java 知之甚少。我尝试边做边学，所以如果这是一个愚蠢的问题，请原谅我。提前致谢！

```
public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "GCMIntentService";
public static TextToSpeech mtts;

public GCMIntentService() {
    super(SENDER_ID);
}

@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("message");
    mtts = new TextToSpeech(context, null);

    if (message.startsWith("makeSound")) {
        mtts = new TextToSpeech(context, null);
        mtts.setLanguage(Locale.US);
        mtts.speak(message, TextToSpeech.QUEUE_FLUSH, null);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:10:52.193

第一次不行，因为TextToSpeech的初始化是异步的。您不能简单地实例化它并照常使用它。如果您想立即使用 TextToSpeech，您应该提供一个在初始化 TextToSpeech 后调用的回调。

```
 mTextToSpeech = new TextToSpeech( this, new TextToSpeech.OnInitListener()
    {
        @Override
        public void onInit( int status )
        {
            // Check for status might not be initialized due to errors
            // Configure language/speed
        }
    } ); 
```

它在其余时间确实有效，因为 mtts 是静态的。这意味着它是一个类变量，在创建服务的新实例时不会被销毁/初始化。在您第二次使用此服务时，此变量已在第一次服务执行中初始化。

# ruby-on-rails-3 - 在 rails 上使用 disqus 登录

> ID：13880515
> 
> 赞同：0
> 
> 时间：2012-12-14T14:23:53.323
> 
> 标签：ruby-on-rails-3, logging, disqus

我为我的应用程序使用 rails 并希望将其与 disqus 集成，其想法是当用户登录应用程序时也在 disqus 中这样做，我不知道如何执行此操作并且不理解文档，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:30:34.907

这是不可能实现的。考虑这种情况（可能还有很多其他情况）：我已经登录到 Disqus，所以你想自动让我登录到你的应用程序中。但是你不会从 Disqus 知道我的用户名、电子邮件等。我什至不确定您能否在您的应用中检测到我已登录 Disqus。

# hibernate - 如何使用 Hibernate 验证 Struts2 中的标签？

> ID：13880518
> 
> 赞同：0
> 
> 时间：2012-12-14T14:23:57.203
> 
> 标签：hibernate, struts2

我有一个输入表单：

```
<s:form action="myaction" method="POST" enctype="multipart/form-data" >
   ...     
   <s:file label="Picture" name="img" /> 
   ...
   <s:submit value="Send" />
</s:form> 
```

如果用户不插入图像（这是必填字段），我如何返回错误？我正在使用 Hibernate 验证（@NotEmpty、@NotNull、ecc..），但我不知道是否可以验证文件输入字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:54:03.823

`null`您可以使用 Struts2`required`验证器[http://struts.apache.org/2.x/docs/required-validator.html](http://struts.apache.org/2.x/docs/required-validator.html)验证 File 对象。

另外`@NotNull`接受任何类型，不仅是字符串[http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html)。

# javascript - 展开菜单，显示子菜单

> ID：13880519
> 
> 赞同：1
> 
> 时间：2012-12-14T14:24:00.263
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试创建一个“可扩展”菜单。因此，如果用户单击选项 A，则应显示两个子选项。我正在尝试做这样[的](http://jsfiddle.net/68RXP/211/)事情，但在菜单中......

到目前为止，这是我的代码...

```
<li>
 <a href="?op=1" data-toggle="collapse" data-target=".nav-collapse88"><i class="icon-picture icon-white"></i> Galleries</a>
                        <div class="nav-collapse88">
                            <ul>
                                  <li>
                                    <a href=""><i class="icon-play"></i> Add</a>
                                  </li>
                                  <li>
                                    <a href=""><i class="icon-play"></i> Delete</a>
                                  </li>
                             </ul>
                        </div>
                      </li> 
```

因此，当我单击画廊时，应该会出现“添加”和“删除”选项。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:33:00.753

我会像这样嵌套ul：

```
<ul>
   <li>
      <a class="expand">Link used to expand</a>
      <ul>
        <li>Sub Menu Item</li>
        <li>Sub Menu Item</li>
        <li>Sub Menu Item</li>
      </ul>
  </li>
</ul> 
```

我会使用这个jquery：

```
$(document).on('click', 'a.expand', function(e) {
  e.preventDefault();
  $(this).siblings('ul').slideToggle();
}); 
```

您需要将子菜单 CSS 设置为不显示。

这些方面的东西应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:52:56.173

这有效：

```
<ul>
  <li class="dropdown">
    <a href="?op=1">Support</a>
    <ul class="dropdown-menu" role="menu">
      <li><a href=""><i class="icon-play"></i> Add</a></li>
      <li><a href=""><i class="icon-play"></i> Delete</a></li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:31:41.833

我相信您希望班级下拉而不是崩溃。这就是引导文档为菜单推荐它的方式。

把class`dropdown`改成 ，去掉里面的div，把class`dropdown-menu`加上inner ul。

```
<li class="dropdown">
<a href="?op=1" data-toggle="dropdown"><i class="icon-picture icon-white"></i>>Galleries</a>
                        <ul class="dropdown-menu">
                              <li>
                                <a href=""><i class="icon-play"></i> Add</a>
                              </li>
                              <li>
                                <a href=""><i class="icon-play"></i> Delete</a>
                              </li>
                         </ul>
                  </li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:33:32.337

tyy 这个[http://jsfiddle.net/68RXP/213/](http://jsfiddle.net/68RXP/213/)

```
$(function(){
        $(".nav-collapse88").hide();
        $("a").click(function(e){
            e.preventDefault();
            $(".nav-collapse88", $(this).parent()).slideToggle();        
        });
    })​
<li>
 <a href="?op=1">
     <i class="icon-picture icon-white"></i> Galleries</a>
                        <div class="nav-collapse88">
                            <ul>
                                  <li>
                                    <a href=""><i class="icon-play"></i> Add</a>
                                  </li>
                                  <li>
                                    <a href=""><i class="icon-play"></i> Delete</a>
                                  </li>
                             </ul>
                        </div>
                      </li>​ 
```

# javascript - 数据绑定到Angular中数组的特定项

> ID：13880521
> 
> 赞同：13
> 
> 时间：2012-12-14T14:24:00.853
> 
> 标签：javascript, arrays, angularjs

给定一个包含 JavaScript 对象数组的数据结构，如何使用 Angular 将该数组中的某个条目绑定到输入字段？

数据结构如下所示：

```
$scope.data = {
    name: 'Foo Bar',
    fields: [
        {field: "F1", value: "1F"},
        {field: "F2", value: "2F"},
        {field: "F3", value: "3F"}
    ]
}; 
```

该`fields`数组包含给定结构的几个实例，每个条目都有一个`field`属性和一个`value`属性。

如何使用 ? 将`input`控件绑定到`value`数组条目的字段属性`field` `F1`？

```
<input ng-model="???"/> 
```

我知道我可以使用 绑定所有字段`ng-repeat`，但这不是我想要的。上面的数据只是更大的字段列表中的一个示例，我只想将预定义的字段子集绑定到屏幕上的控件。该子集不基于数组条目中的属性，而是在页面设计时已知。

因此，对于上面的示例，我会尝试将 F1 绑定到页面上的一个输入，并将 F2 绑定到另一个输入。F3 不会绑定到控件。

我已经看到了在 中使用函数的示例`ng-model`，但它似乎不适用于 Angular 1.1.0。

是否有另一种巧妙的方法将输入字段绑定到特定的数组条目？

`ng-model`这是一个有示例的小提琴，但由于它试图在属性中使用函数而不起作用：http: [//jsfiddle.net/nwinkler/cbnAU/4/](http://jsfiddle.net/nwinkler/cbnAU/4/)

**更新**

根据下面的建议，它应该是这样的：http: [//jsfiddle.net/nwinkler/cbnAU/7/](http://jsfiddle.net/nwinkler/cbnAU/7/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T14:58:32.487

我个人会重新组织数组，使数组条目的*字段*属性成为对象的标识符。嗯，这句话听起来可能很奇怪。我的意思是：

```
$scope.data = {
    name: 'F1',
    fields: {
        F1: {
           value: "1F"
        },
        F2: {
           value: "2F"
        }
    }
}; 
```

如果您想动态绑定值，这是实现它的一种简单快捷的方法。这是您的小提琴修改后的单词。[http://jsfiddle.net/RZFm6/](http://jsfiddle.net/RZFm6/)

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-01T05:50:40.727

您可以使用对象数组，而不是字符串数组。

HTML：

```
<div ng-repeat="field in data.fields">
    <input ng-model="field.val"/>
</div> 
```

JS：

```
$scope.data = {
    name: 'F1',
    fields: [
        { val: "v1" },
        { val: "v2" }
    ]
}; 
```

我在这里更新了@Flek 的小提琴：http: [//jsfiddle.net/RZFm6/6/](http://jsfiddle.net/RZFm6/6/)

编辑：抱歉刚刚正确阅读了您的问题，您仍然可以使用以下数组：

```
<label>Bound to F1:</label>
<input ng-model="data.fields[0].value"/> 
```

虽然也许停下来想一想。是否会有可变数量的字段？还是您正在制作预定数量的字段？前者使用数组，后者使用对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T15:01:48.023

一种方法是简单地将必要的引用添加到范围，如下所示：

```
$scope.fieldF1 = fieldValue('F1');
$scope.fieldF2 = fieldValue('F2'); 
```

然后使用这些参考：

```
<input ng-model="fieldF1.value"/>
<input ng-model="fieldF2.value"/> 
```

小提琴：http: [//jsfiddle.net/cbnAU/5/](http://jsfiddle.net/cbnAU/5/)

注意：我假设它`$scope.data`是静态的，但如果它碰巧是动态的，你可以随时观察它的变化并重新计算引用......

# java - 用 eclipse 运行 appengine

> ID：13880528
> 
> 赞同：0
> 
> 时间：2012-12-14T14:24:31.980
> 
> 标签：java, eclipse, google-app-engine, installation

我正在尝试使用带有 Eclipse 的应用程序引擎运行示例程序。我根据本网站中的说明安装谷歌插件： [https ://developers.google.com/appengine/docs/java/gettingstarted/installing](https://developers.google.com/appengine/docs/java/gettingstarted/installing)

按照教程。但由于某种原因，我的应用程序不会运行。我收到以下错误：

```
 14/12/2012 14:13:41 com.google.apphosting.utils.jetty.JettyLogger info
     INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
     14/12/2012 14:13:41 com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
     INFO: Successfully processed C:\Users\rona\workspace\Guestbook\war\WEB-INF/appengine-web.xml
     14/12/2012 14:13:41 com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
     SEVERE: Received exception processing C:\Users\rona\workspace\Guestbook\war\WEB-INF/appengine-web.xml
     com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
     See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
     You probably want to enable concurrent requests.
     at com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
     at com.google.apphosting.utils.config.EarHelper.readWebModule(EarHelper.java:130)
     at com.google.appengine.tools.development.AbstractContainerService.loadAppEngineWebXml(AbstractContainerService.java:334)
     at com.google.appengine.tools.development.JettyContainerService.initContext(JettyContainerService.java:160)
     at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:227)
     at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
     at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
     at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
     at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
     at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
     com.google.apphosting.utils.config.AppEngineConfigException: Invalid appengine-web.xml(C:\Users\rona\workspace\Guestbook\war\WEB-INF/appengine-web.xml) - appengine-web.xml does not contain a <threadsafe> element.
     See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
     You probably want to enable concurrent requests.
     at com.google.apphosting.utils.config.EarHelper.readWebModule(EarHelper.java:132)
     at com.google.appengine.tools.development.AbstractContainerService.loadAppEngineWebXml(AbstractContainerService.java:334)
     at com.google.appengine.tools.development.JettyContainerService.initContext(JettyContainerService.java:160)
     at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:227)
     at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
     at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
     at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
     at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
     at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 
```

该应用程序的代码是从谷歌开发人员复制的完全相同。我知道该程序在另一台计算机上运行。我安装中的某些东西不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:03:01.920

您必须在 appengine-web.xml 中包含以下块：

```
<threadsafe>true</threadsafe> 
```

无论您的应用程序是否以线程安全的方式设计，都必须明确设置期望。

# python - 使用 Python 的 Igraph 绘制边缘标签或类似标签

> ID：13880539
> 
> 赞同：2
> 
> 时间：2012-12-14T14:24:59.720
> 
> 标签：python, label, igraph, edges

我只想将标签绘制到图形的顶点而不是边缘。

非常简单的案例：用于无向图的 Kamada Kawai 布局。

我幻想着这样的事情：

```
visual_style["edge_label"] = g.es["weightthing"] 
```

为了证明我的问题是正确的，因为我研究了很多，但只发现了这个：

> 边缘标签。它们将被转换为字符。指定 NA 以省略边缘标签。
> 
> 默认情况下省略边缘标签。

从[这里](http://igraph.sourceforge.net/doc/R/plot.common.html%20#I%20see%20it%27s%20for%20R%20but%20probably%20the%20same%20case%20for%20Python)

我无法理解上面的报价。对不起。

*   是否可以将标签绘制到边缘？
*   大约。如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:58:01.823

不幸的是，igraph 的 Python 界面还不支持边缘标签。（顺便说一句，您正在阅读 R 接口的文档）。

**更新**：igraph 的开发版本（即 0.7 版）现在支持边缘标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T11:21:58.503

您可以改用[NetworkX](http://networkx.github.io/)。（编辑）您可能喜欢使用此功能：

```
networkx.draw_networkx_edge_labels() 
```

文档字符串显示了参数的使用`edge_labels`：

```
edge_labels : dictionary
       Edge labels in a dictionary keyed by edge two-tuple of text
       labels (default=None). Only labels for the keys in the dictionary
       are drawn. 
```

# asp.net-mvc - mvc4 十进制多于 2 位小数

> ID：13880541
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:01.357
> 
> 标签：asp.net-mvc, asp.net-mvc-4, decimal

如何配置 MVC4 以使用完整的游行格式化我的模型中的所有小数？我不想将 DataAnnotations 添加到模型中的所有属性中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:28:28.313

您可以通过为十进制创建 DisplayTemplate 来做到这一点。

```
@model decimal

@Model.ToString("0.0000") // Or whatever format you're after... 
```

# java - 这是编译器故障吗？

> ID：13880542
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:06.283
> 
> 标签：java, methods, annotations

如何编写一个方法来接受注解类型，但实际上没有方法可以使用注解类型来传递它？

```
@Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Inherited
public @interface Sharpenable {}

@Sharpenable
public class Pencil {}

public void sharpen(Sharpenable sharpenable){
       System.out.println("sharpening a " + sharpenable.getClass().getSimpleName());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:29:45.453

您可以拥有注释的实例。对于您的示例，它将是

```
 Sharpenable s = Pencil.class.getAnnotation(Sharpenable.class); 
```

但是，Annotations 是反射代码中使用的实体。对于您的示例，像这样创建它并没有什么意义。`Sharpenable`应该是由可以锐化的不同其他类实现的接口。如果你想保持注释它们的风格，你的代码可能看起来像这样：

```
 public void sharpen(Object sharpenable){
     if (sharpenable.getClass.getAnnotation(Sharpenable.class) != null)
         System.out.println("sharpening a " + sharpenable.getClass().getSimpleName());
     else
         throw new IllegalArgumentException("Not a sharpenable.");
 } 
```

# java - 使用 AbstractTableModel 从 JTable 中删除行

> ID：13880545
> 
> 赞同：3
> 
> 时间：2012-12-14T14:25:15.167
> 
> 标签：java, swing, user-interface, jtable, abstracttablemodel

我想使用按钮删除选定`JTable`的`AbstractTableModel`行。

下面的代码适用于 DefaultTableModel：

```
...
MyTableModel mtb;
...
private String[]....
private Object[][]...
...
JTable table = new JTable(mtb)
JButton delete;
...
 public void actionPerformed(ActionEvent e) {

        if(e.getSource().equals(delete))
         {
                 if(table.getSelectedRow()<0)
                 {
                  JOptionPane.showMessageDialog(this,"Select row");

                 }
                 else
                 {
                     mtb.removeRow(table.getSelectedRow()); 

                 }
         }
     } 
```

但它不适用于`AbstractTablemodel`.

我的代码有点乱，所以这里是来自 oracle 页面的[java 示例](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDemoProject/src/components/TableDemo.java)，可以使用：

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T14:32:05.870

对于`AbstractTableModel`，您必须根据模型的内部数据结构来实现自己`removeRow()`的，但您可以研究的来源`DefaultTableModel`作为触发哪些事件的指南。例如，

```
public void removeRow(int row) {
    // remove a row from your internal data structure
    fireTableRowsDeleted(row, row);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T16:08:25.193

`DefaultTableModel``fireXX`只要表模型发生变化，它本身就会调用方法。但是如果我们使用`AbstractTableModel`then 我们必须显式调用`fireXX`方法。因此，当表格发生变化时，只需调用相关`fireXX`方法即可。

为了，

**向表中插入**新行使用[fireTableRowsInserted](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html#fireTableRowsInserted%28int,%20int%29)

**删除**（在您的情况下）使用 [fireTableRowsDeleted](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html#fireTableRowsDeleted%28int,%20int%29)

**更新**使用[fireTableRowsUpdated](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html#fireTableRowsUpdated%28int,%20int%29)

**注意：** `DefaultTableModel`实现了所有方法中的大部分。因此，除非有真正的需要，`AbstractTableModel`否则请坚持使用`DefaultTableModel`.

# mercurial - 添加存储库时从自动结帐中停止 TeamCity

> ID：13880546
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:18.283
> 
> 标签：mercurial, teamcity, vcs-checkout

我正在尝试配置 TeamCity 以用于我们的持续集成。

我们的项目有大约 35 个 mercurial 回购，分布在 4 个城市。总而言之，repos 中的代码大小约为 30GB。

我们的问题是，如果我们从构建配置的 VCS 根目录中添加/删除存储库，该配置会自动对所有存储库进行完全干净的重新签出。这为我们的构建周期增加了 3 个小时。

有没有办法关掉这个？

我们有 TeamCity 版本 7.0 和 7.1

更新：

其中一种构建配置的其他详细信息：

```
Name: BE - Full Build
Description: none
Build number format: %AssemblyBuildNumber%, next build number: #%AssemblyBuildNumber%
Artifact paths:
none specifed
Build options:
hanging builds detection: ON
status widget: OFF
maximum number of simultaneously running builds: unlimited
Version Control Settings edit »
VCS checkout mode: Automatically on server
Checkout directory: default
Clean all files before build: OFF
VCS labeling: disabled
Attached VCS roots: 
< All the repos with no rules and no labels >
Show changes from snapshot dependencies: OFF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:56:29.783

也许代理端结帐+本地镜像可以帮助您。在这里查看内部属性部分：http: [//confluence.jetbrains.net/display/TCD7/Mercurial](http://confluence.jetbrains.net/display/TCD7/Mercurial)

# c# - 远程服务器计划任务

> ID：13880547
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:19.627
> 
> 标签：c#, windows-services, scheduled-tasks, remote-server

我正在寻找一个简单的“数据推送”服务，它从 SQL Server 数据库中提取数据，并每十分钟将一个 CSV 文件存入远程 FTP 站点。该服务将在远程服务器上运行，通过 TeamViewer 进行管理。

我想有几种方法可以做到这一点，但想就哪种方法最好和最可靠的方法提出一些建议。对于有此类工作经验的人来说，一些优点和缺点也会非常有帮助。

可能的解决方案：

*   Windows 服务使用 Thread.Sleep(..) 每十分钟运行一次任务
*   作为 Windows 调度程序任务运行的简单 EXE 控制台项目
*   使用 Timer 类的 Windows 服务
*   还有其他方法吗？

该程序将用 C# 编写，但我在项目类型、设计等方面非常灵活。

该服务的主要要求是可靠，我还希望构建一个警报系统来通知失败。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:42:41.020

我更喜欢这种应用程序的计划任务，因为在以后对计划进行更改要容易得多。

这里有一个类似的问题：[Windows Service or Task Scheduler for maintenance tasks？](https://stackoverflow.com/questions/481760/windows-service-or-task-scheduler-for-maintenance-tasks)

# mysql - 每个用户的“二进制标志”应该放在主用户表中还是放在它自己的“二进制标志”表中？

> ID：13880548
> 
> 赞同：2
> 
> 时间：2012-12-14T14:25:24.917
> 
> 标签：mysql, database-design, database-schema

在我的一个站点上，我有一个主用户表，其中包含每个用户的唯一用户 ID、电子邮件地址、密码等。

我需要开始跟踪很多与每个用户相关的二进制标志，例如他们是否确认了他们的电子邮件，他们是否发布了消息，他们是否升级了他们的帐户，他们是否做过 X，他们是否做过Y等。

这些标志中的每一个都是简单的“0”（假）或“1”（真），并且基于这些标志，我的网站向用户显示或执行不同的操作。

我的问题是，将这些二进制标志添加到主用户表或为二进制标志或其他东西创建一个单独的表是否更有意义？

请尝试解释您的推理（以及您的方法的优点），以便我了解您的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:11:13.360

所有这些标志都需要存储还是可以*计算*？例如，如果用户没有发布任何消息，则可以通过查询 MESSAGE 表轻松确定。

物理存储“可计算”标志是多余的，并且可能导致数据不一致。例如，如果用户添加了一条消息但您的应用程序中的错误阻止了标志更新怎么办？出于性能原因，这种“非规范化”可能是合理的，但只有在您**测量**了实际数据量和代表性工作负载的性能后才能做出此决定。

OTOH，一些标志可能是“真实的”（例如用户是否已确认电子邮件）。如果这些标志是相对静态的（即您在设计数据模型时预先知道它们），则将它们作为简单的布尔（或等效）字段直接存储在 USER 表本身中。

仅当您需要具有相当大的运行时灵活性时，才考虑使用与 USER 表处于 N:1 关系的单独 FLAG 表。这是一种[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:39:00.773

将它们保持在一起和分离它们具有优势：如果将标志放在`Users`表中，通过对用户 ID 的简单查询，您可以获得有关该用户的所有信息，而不是使用连接来检索它们。

另一方面，将它们放在单独的表上会使它们与表上的数据“逻辑上”分开`Users`，这可能是完全不相关的（即使它们都谈论用户），因此具有更清晰的数据库结构。

另一件需要考虑的事情是您必须多久更改和检索此类数据：例如，如果您只在登录时需要它们，那么您可能希望将它们保存在同一张表上并一次获取所有登录数据；相反，如果您必须反复更改它们，那么您的选择应该在另一张桌子上进行。

也就是说，无论如何我都会选择两个表的解决方案，但这正是我喜欢在 DB 模式中看到它们的方式。

# android - 共享首选项中字段的默认值是什么？

> ID：13880549
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:27.190
> 
> 标签：android, android-emulator, sharedpreferences, default-value, notnull

今天我在Android中遇到了一个非常奇怪的问题。我正在使用 2 个具有共享偏好的字段。一是deviceId，二是Hashkey。现在首先我使用代码仅将 deviceId 存储在 sharedprefs 中

```
new SharedPref(Home.this);
    TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String deviceId = telephonyManager.getDeviceId();

    MyApplicationGlobal.DEVICE_ID = deviceId;
    Log.v("deviceId in getAndStoreDeviceId()", "deviceId: " + deviceId);
    SharedPref.writeString(SharedPref.DEVICE_ID, deviceId); 
```

然后我从共享首选项中读取 hashKey 并将其分配给我的全局应用程序类中的一个变量

```
if (MyApplicationGlobal.HASHKEY == null) {
        Log.v("in setHashKey before", "MyApplicationGlobal.HASHKEY: " + MyApplicationGlobal.HASHKEY);
        MyApplicationGlobal.HASHKEY = SharedPref.readString(SharedPref.KEY_HASH, null);
        Log.v("in setHashKey after", "MyApplicationGlobal.HASHKEY: " + MyApplicationGlobal.HASHKEY);
    } 
```

但问题是当我第一次运行此代码时，共享首选项中 hasKey 的值与 deviceID（在模拟器上运行）的值相同，即

```
000000000000000 
```

所以我首先卸载了应用程序然后删除并重新创建了一个新的模拟器，但是每次共享首选项中的hashkey的值都是一样的，都是000000000000000。那怎么可能，因为我想，我没有写值在共享首选项中，因此它应该为 null 或其他内容，但绝对不是 000000000000000

Log cat 上的输出是

```
12-14 19:55:21.733: V/deviceId in getAndStoreDeviceId()(969): deviceId: 000000000000000
12-14 19:55:21.753: V/in setHashKey before(969): MyApplicationGlobal.HASHKEY: null
12-14 19:55:21.753: V/in setHashKey after(969): MyApplicationGlobal.HASHKEY:     000000000000000
12-14 19:55:21.765: V/in UserFunctions() MyApplicationGlobal.Hask_KEY(969):    MyApplicationGlobal.HASH_KEY: 000000000000000
12-14 19:55:21.813: V/in getListOfEventCountries() MyApplicationGlobal.HASH_KEY(969): MyApplicationGlobal.HASH_KEY: 000000000000000 
```

我的 SharedPref 类的代码是

```
package com.library.shared_preference;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class SharedPref {
public static final String PREF_NAME = "SHARED_PREFERENCES_FOR_TRACKINT";
public static final String SEARCHED_IMG_URL = "SEARCHED_IMG_URL";
public static final String SEARCHED_IMG_NAME = "SEARCHED_IMG_NAME";
public static final String SEARCHED_IMG_ACTUAL_PRICE = "SEARCHED_IMG_ACTUAL_PRICE";
public static final String UID_RES = "u_id";
public static final String USER_EMAIL = "user_name";
public static final String USER_PWD = "user_pwd";

public static final String FB_UID_RES = "u_id";
public static final String FB_USER_EMAIL = "user_name";
public static final String FB_USER_PWD = "user_pwd";
public static final String DEVICE_ID = "";
public static final String KEY_HASH = "";

static Context _context;

// constructor
public SharedPref(Context c) {
    _context = c;
}

// for boolean value
public static void writeBoolean(String key, boolean value) {
    getEditor().putBoolean(key, value).commit();
}

public static boolean readBoolean(String key, boolean defValue) {
    return getPreferences().getBoolean(key, defValue);
}

// for integer value
public static void writeInteger(String key, int value) {
    getEditor().putInt(key, value).commit();

}

public static int readInteger(String key, int defValue) {
    return getPreferences().getInt(key, defValue);
}

// for String value
public static void writeString(String key, String value) {
    getEditor().putString(key, value).commit();

}

public static String readString(String key, String defValue) {
    return getPreferences().getString(key, defValue);
}

// for float value
public static void writeFloat(String key, float value) {
    getEditor().putFloat(key, value).commit();
}

public static float readFloat(String key, float defValue) {
    return getPreferences().getFloat(key, defValue);
}

// for long value
public static void writeLong(String key, long value) {
    getEditor().putLong(key, value).commit();
}

public static long readLong(String key, long defValue) {
    return getPreferences().getLong(key, defValue);
}

@SuppressWarnings("static-access")
public static SharedPreferences getPreferences() {
    return _context.getSharedPreferences(PREF_NAME, _context.MODE_PRIVATE);
}

public static Editor getEditor() {
    return getPreferences().edit();
}
} 
```

那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:01:20.933

在您的 SharedPref 类中，您将常量 DEVICE_ID 和 KEY_HASH 定义为都等于“”。所以我猜他们在您的共享首选项中引用了相同的字段。虽然它看起来比一个空字段的存在更奇怪。

# c++ - std::string 的转义表示

> ID：13880555
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:55.603
> 
> 标签：c++

我正在执行以下代码，已阅读此内容：

[转义 C++ 字符串](https://stackoverflow.com/questions/2417588/escaping-a-c-string)

```
#include <iostream>
#include <boost/format.hpp>
#include <boost/algorithm/string.hpp>

struct CharacterEscaper
{
    template<typename FindResultT>
    std::string operator()(const FindResultT& Match) const
    {
        std::string s;
        for (typename FindResultT::const_iterator i = Match.begin();i != Match.end();i++) 
        {
            s += str(boost::format("\\x%02x") % static_cast<int>(*i));
        }
        return s;
    }
};

int main (int argc, char **argv)
{
    std::string s("start\x0aend");
    boost::find_format_all(s, boost::token_finder(!boost::is_print()), CharacterEscaper());
    std::cout << s << std::endl;
    return 0;
} 
```

我得到的输出是这样的：

```
start\xffffffaend 
```

我期待以下内容：

```
start\x0aend 
```

读过这个：

[http://en.cppreference.com/w/cpp/language/escape](http://en.cppreference.com/w/cpp/language/escape)

什么是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:06:13.670

这里有两个问题：

*   `int`转义符在格式化之前将字符值转换为。这意味着，如果`char`是有符号的，上面`0x7f`的值将被符号扩展，`f`在输出中给出额外的 s。您可以通过先转换为`unsigned char`，然后再转换为`unsigned`或来解决此问题`int`。（我对 Boost 格式化程序知之甚少，不知道是否需要进行第二次转换。）
*   十六进制转义序列将包含尽可能多的十六进制数字，因此在这种情况下它将是`\x0ae`. 解决此问题的一种方法是将字符串文字分成两部分，它们将在编译期间重新组合：`"start\x0a" "end"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:31:57.743

我想我有答案。我应该这样写：`"start\x0a" "end"`

# android - Droid：水平滚动视图中的大小按钮

> ID：13880556
> 
> 赞同：0
> 
> 时间：2012-12-14T14:25:59.747
> 
> 标签：android, scrollview

我有一个表格布局，其中有 3 个按比例缩放以填充屏幕底部的按钮。我想用滚动视图替换这些按钮以适应更多按钮。我添加了一个滚动视图并添加了按钮，但它们的宽度减少到宽度的 1/4，四个按钮宽。滚动视图工作正常，但我无法缩放它或按钮，并且在较大的显示器上，按钮在它们曾经缩放的地方仍然很小。

这是我的行代码：

```
 <TableRow
        android:id="@+id/TableRow5"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <HorizontalScrollView
            android:id="@+id/horizontalScrollView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_span="3"
            android:layout_weight="1"
            >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:gravity="center"
                android:orientation="horizontal"
                android:weightSum="6" >

                <Button
                    android:id="@+id/button_low"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="5dp"
                    android:layout_weight="1"
                    android:background="@drawable/sgbutton"
                    android:onClick="preLaunch"
                    android:padding="5dp"
                    android:tag="1"
                    android:text="@string/button_label_low"
                    android:textSize="16dp"
                    android:textStyle="normal" />

                <Button
                    android:id="@+id/button_high"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="5dp"
                    android:layout_weight="1"
                    android:background="@drawable/sgbutton"
                    android:onClick="preLaunch"
                    android:padding="5dp"
                    android:tag="2"
                    android:text="@string/button_label_high"
                    android:textSize="16dp"
                    android:textStyle="normal" />

                <Button
                    android:id="@+id/button_practice"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="5dp"
                    android:layout_weight="1"
                    android:background="@drawable/sgbutton"
                    android:onClick="preLaunch"
                    android:padding="5dp"
                    android:tag="3"
                    android:text="practice"
                    android:textSize="16dp"
                    android:textStyle="normal" />

            <Button
                android:id="@+id/Button012"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:background="@drawable/sgbutton"
                android:padding="5dp"
                android:tag="1"
                android:text="@string/button_label_low"
                android:textSize="16dp"
                android:textStyle="normal" />

            <Button
                android:id="@+id/Button011"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:background="@drawable/sgbutton"
                android:padding="5dp"
                android:tag="2"
                android:text="@string/button_label_high"
                android:textSize="16dp"
                android:textStyle="normal" />

            <Button
                android:id="@+id/Button013"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_margin="5dp"
                android:layout_weight="1"
                android:background="@drawable/sgbutton"
                android:padding="5dp"
                android:tag="3"
                android:text="practice"
                android:textSize="16dp"
                android:textStyle="normal" />
            </LinearLayout>
        </HorizontalScrollView>
    </TableRow> 
```

如何让按钮缩放到显示宽度的 1/3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:08:41.807

这有点难以解释。

在测量子视图时，LinearLayout 将首先尝试根据子视图想要的大小将其空间划分给其子视图，然后根据其权重划分其余空间。

在划分空间之前，父 LinearLayout 应该知道它的宽度。但是在Horizo​​ntalScrollView 中，LinearLayout 不知道它应该有多大，它必须首先测量它的children view 以获得总和大小。在这种情况下，重量无法工作，因为没有剩余空间。LinearLayout 的宽度等于 Button 的宽度之和。

我认为您必须在代码中设置宽度。将每个按钮的宽度设置为 screenWidth / 3。

# css - div前面的按钮

> ID：13880567
> 
> 赞同：3
> 
> 时间：2012-12-14T14:26:23.700
> 
> 标签：css, position, overlay

我不是 CSS 专家。我试图将 an 放在 an`<input type="button">`的中心，但`<img>`我在这样做时遇到了一些麻烦。[这是一个小提琴](http://jsfiddle.net/a6tA7/)，这是我的 HTML：

```
<div id="avatar">
    <img src="http://www.averageadjustersusca.org/aaa/images/profileholder.gif" alt="My avatar" />
    <input id="btnAvatar" class="button" type="button" name="Button" value="Change">
    <p>Text</p>
</div> 
```

我希望输入显示在图像上，而且文本需要在右侧。我尝试使用：

```
img { width: 300px; height: 300px; float: left; }
input { position: absolute; margin:140px 0px 0px 130px;} 
```

但它只适用于 chrome / safari，在其他浏览器上，按钮放在图像之后而不是在它前面。

做这个的最好方式是什么？

[Obs.：按钮所在的空间，需要为空，否则文本会向上移动。]

* * *

这是它在 chrome 上的显示方式：

![在此处输入图像描述](../Images/85ddf453c97c857b961785bb18aeb748.png)

这是它在firefox上的显示方式：

![在此处输入图像描述](../Images/2386752e903fa4287a6b27e6c5c615d5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:33:59.043

您需要在绝对位置上指定 x 和 y 位置。将用于输入的 css 更改为：

```
input { position: absolute; top:0; left:0; margin:140px 0px 0px 130px;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T16:08:54.573

有一种简单而干净的方法可以执行此代码。诀窍是使用 DIV 标签来包含和定位所有内容。

1.  使用主 DIV 包含所有内容并为其赋予 position:relative 属性。
2.  将 img 和 input 标签放在单个 DIV 中，并为该 DIV 分配 float:left 属性。
3.  使用 CSS 选择 P 标签并将其浮动到左侧。这会将文本放置在包含 img 和输入的 DIV 旁边。
4.  现在为输入标签分配 position:absolute 属性，同时使用属性 TOP & LEFT 将其定位到位。

这是一个例子：

```
<div id="avatar-container">
     <div id="avatar-image-btn">
          <img src="http://www.averageadjustersusca.org/aaa/images/profileholder.gif" alt="My avatar"  />
          <input id="btnAvatar" class="button" type="button" name="Button" value="Change">
     </div>
     <p>Text</p>
</div>

<style> 
    #avatar-container { position: relative; }
    #avatar-container p { float: left; }
    #avatar-image-btn { float: left; }
    #avatar-image-btn img { }
    #avatar-image-btn input { position: absolute; top: 135px; left: 120px; cursor: pointer; }
</style> 
```

看，干净，简单，每次都可以使用，并且与多浏览器兼容。

* 不小心使用时，margin 属性可能会造成混乱。最佳做法是将其用于在 div 中堆叠标签，而不是用于具有大间隙边距的定位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T14:29:29.007

使用 z-index

```
input { position: absolute; margin:140px 0px 0px 130px; z-index:2} 
```

这是将您的按钮向上推一层

在正确理解问题后，这里是一个解决方案

```
img { width: 300px; height: 300px; float: left; border:1px solid black; position:absolute}
input { position: absolute; margin:140px 0px 0px 130px;} 
```

正如评论中提到的，问题出在定位上

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T14:32:49.027

您可以添加`position:relative`#avatar 并提供#btnAvatar`top:0; left:0;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T14:46:55.497

这应该这样做：http: [//jsfiddle.net/a6tA7/9/](http://jsfiddle.net/a6tA7/9/)

我建议您使用`top:`and`left:`来定位输入元素，而不是`margin:`

# c - 远程上传 exe 代码和嵌入式目标的动态链接功能

> ID：13880571
> 
> 赞同：3
> 
> 时间：2012-12-14T14:26:30.433
> 
> 标签：c, embedded, patch, remote-access, dynamic-linking

我正在为嵌入式 DSP 目标（不受任何操作系统支持）开发应用程序，并且使用 C 进行开发。我有一个具有初始化和无限循环的简单应用程序，如下所示：

```
 #include <>
 main (){

 initialize ;

 while (1){

   poll_timer_for_scheduling (); // use for timing 
   remote_link_to_receive_data();  // used to receive data 
   remote_link_to_transmit_data(); // used to transmit data

   switch (sel) {
    case '1':
           function1();
    case '2':
           dummy_function(); // to be replaced by function2() later
    }

   }

 } // end of main

//-------------------------
 function1()
 {

 // some code

 }

//--------------------------
dummy_function()
{

 // NO code; just an empty function to be replaced later by function2()
} 
```

现在，我将可执行文件编译并转储到运行完美的 DSP 目标中。dummy_function() 是我想稍后用 function2() 远程替换的函数，因为系统可能无法访问。这类似于应用程序的在线修补，但应用程序必须在目标中运行才能执行自我修补。

所以我的要求是在运行阶段后期更新可执行文件，使其具有额外的功能（以满足不可预见的条件）。如何编译 ac 函数 function2() 并将可执行文件上传到 dummy_function()？

我正在寻找应用程序中动态链接功能的简化版本。是否有一些简单的机制来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:57:16.490

您可以使用指向函数的指针稍后以安全和原子的方式切换实现。所以最初这些指针可以都指向同一个无操作虚拟函数。在更新期间，您必须将新函数的代码加载到内存中，然后将指针切换到指向新加载代码中函数的位置。

我想棘手的部分可能不是函数的修补，而是编译该函数以便以后可以加载它。在大多数桌面平台上，动态加载代码意味着执行重定位和类似的事情。不确定您的 DSP 在这方面是如何工作的。但是简单地重新编译整个项目并从中提取更改可能是不可行的。

# c# - 时间：2019-04-01 标签：c#coding convention public/private contexts

> ID：13880576
> 
> 赞同：0
> 
> 时间：2012-12-14T14:26:43.257
> 
> 标签：c#, winforms, conventions

我正在学习 C#，我正在创建一个简单的 WinForms 应用程序，它的作用是启动一个简单的 OpenVPN 客户端：

```
 void button_Connect_Click(object sender, EventArgs e)
    {
        var proc = new Process();
        proc.StartInfo.FileName = "CMD.exe";
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.WorkingDirectory = @"C:\Program Files (x86)\OpenVPN\bin";
        proc.StartInfo.Arguments = "/c openvpn.exe --config config.ovpn --auto-proxy";

        // set up output redirection
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.RedirectStandardError = true;
        // Input
        proc.StartInfo.RedirectStandardInput = true;

        // Other
        proc.EnableRaisingEvents = true;
        proc.StartInfo.CreateNoWindow = false;
        // see below for output handler
        proc.ErrorDataReceived += proc_DataReceived;
        proc.OutputDataReceived += proc_DataReceived;

        proc.Start();

        StreamWriter myStreamWriter = proc.StandardInput;
        proc.BeginErrorReadLine();
        proc.BeginOutputReadLine();

        proc.WaitForExit();
    }

    void proc_DataReceived(object sender, DataReceivedEventArgs e)
    {
        // output will be in string e.Data
        if (e.Data != null)
        {
            string Data = e.Data.ToString();
            if (Data.Contains("Enter Auth Username"))
            {
                myStreamWriter("myusername");
            }
            //MessageBox.Show(Data);
        }
    } 
```

它现在所做的是将 CMD 的所有输出发送到我的程序，该程序根据输出运行命令。

我当前的问题是，我需要写入流。我使用`myStreamWriter`in `proc_DataReceived`，但是它不在同一个上下文中，所以它不起作用。

我收到以下错误：`The name 'myStreamWriter' does not exist in the current context`，这在该范围内显然不存在。

我该如何进行这项工作？获取/设置属性？就像我说的那样，我对 C# 很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:47:49.440

在您的表单中，添加此字段：

```
public class Form1Whatevver: Form {
    private StreamWriter myStreamWriter;
} 
```

然后在您的代码中：

```
proc.Start();

this.myStreamWriter = proc.StandardInput;

proc.BeginErrorReadLine();
proc.BeginOutputReadLine(); 
```

现在，myStreamWriter 将可用于`proc_DataReceived()`

```
void proc_DataReceived(object sender, DataReceivedEventArgs e)
    {
        // output will be in string e.Data
        if (e.Data != null)
        {
            string Data = e.Data.ToString();
            if (Data.Contains("Enter Auth Username"))
            {
                if (myStreamWriter != null) // Just in case
                {
                    myStreamWriter("myusername");
                }
            }
            //MessageBox.Show(Data);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:43:33.977

您正在谈论的概念是[范围](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29.aspx)而不是上下文。

* * *

您可以通过多种方式更改您的代码，以便您可以`myStreamWriter`从`proc_DataReceived`.

可以说最简单的方法是将您希望实现的对象作为参数传递给函数。从未来多线程的角度来看，这通常是一种很好的方法，也是一种功能风格的驱动力。

```
 void proc_DataReceived(
        object sender, 
        DataReceivedEventArgs e,
        StreamWriter writer)
    {
        ...
        writer("myusername");
        ...
    } 
```

然而`proc_DataReceived`，显然是一个事件处理程序，您可能不想更改函数的签名。

* * *

如果您`myStreamWriter`在类级别声明为私有成员变量，您将能够从类中的任何位置访问。这`this`是可选的但很好的形式。

```
class YourForm : Form
{
    private StreamWriter myStreamWriter;

    void button_Connect_Click(...
    {
        ...
        this.myStreamWriter = proc.StandardInput;
        ...
    }

    void proc_DataRecieved(...
    {
        ...
        this.myStreamWriter("myusername");
        ...

    }
} 
```

* * *

`StreamWriter`除非您想从类/表单外部访问，否则不需要属性实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:55:22.537

简单的快速修复是定义`myStreamWriter`为类中的一个字段（即在您的方法范围之外），然后从其中一个范围内实例化它：

```
private StreamWriter _myStreamWriter;

void button_Connect_Click(object sender, EventArgs e)
{
    // Do some stuff

    _myStreamWriter = proc.StandardInput;

    // Do some stuff
} 
```

完成后，您应该可以在课堂上的任何地方使用它。

# sql-server - 我应该为 SQL Server 使用哪个 ODBC 驱动程序？

> ID：13880580
> 
> 赞同：1
> 
> 时间：2012-12-14T14:26:56.087
> 
> 标签：sql-server, odbc, connection-string

ODBC 连接字符串上有一个称为 Driver 的参数。我的旧应用程序一直在使用`{SQL Driver}`，我知道还有`{SQL Native Client}`其他应用程序。

我的问题是：

*   这些类型的驱动程序有什么区别？
*   我什么时候应该使用一种或另一种？
*   我没有在我的连接上定义提供者。我是不是该？
*   配置连接字符串的最佳方式是什么？

我正在使用 SQL Server 2005 标准版

# forms - FOSUser：覆盖注册视图以避免 csrf 和验证不适当的错误消息

> ID：13880584
> 
> 赞同：0
> 
> 时间：2012-12-14T14:27:04.553
> 
> 标签：forms, symfony, overriding, fosuserbundle

我正在尝试覆盖我的 html 树枝视图，希望它能解决验证消息的问题。

html 树枝文件：

```
 {% extends "FOSUserBundle::layout.html.twig" %}

    {% block fos_user_content %}

   <form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }}      method="POST" class="fos_user_registration_register">

 <div>
     <label for="fos_user_registration_form_username" class="required">Nom d&#039;utilisateur :</label>
     <input type="text" id="fos_user_registration_form_username" name="fos_user_registration_form[username]" required="required" maxlength="255" pattern=".{2,}" />
 </div>

<div>
    <label for="fos_user_registration_form_email" class="required">Adresse e-mail :</label>
    <input type="email" id="fos_user_registration_form_email" name="fos_user_registration_form[email]" required="required" /></div>
<div>
    <label for="fos_user_registration_form_plainPassword_first" class="required">Mot de passe :</label>
    <input type="password" id="fos_user_registration_form_plainPassword_first" name="fos_user_registration_form[plainPassword][first]" required="required" /></div>

<div>
    <label for="fos_user_registration_form_plainPassword_second" class="required">Vérification :</label>
    <input type="password" id="fos_user_registration_form_plainPassword_second" name="fos_user_registration_form[plainPassword][second]" required="required" /></div>

<div>
    <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}"    />
</div>
  </form>
 {% endblock fos_user_content %} 
```

表单显示正确但未提交。

根据 FOSUser 捆绑实体，输入名称是否正确？缺少什么，出了什么问题？如何显示错误？如何处理 CSRF 隐藏域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:08:24.280

我这样解决了我的问题：

```
 <form action="/projet_etienne_auth/web/app_dev.php/register/"  method="POST"     class="fos_user_registration_register">
      {{ form_errors(form) }}
      {{ form_widget(form._token) }}

<div>
    <label for="fos_user_registration_form_username" class="required">Nom d&#039;utilisateur :</label>

    <input type="text" id="fos_user_registration_form_username" name="fos_user_registration_form[username]" required="required" maxlength="255" pattern=".{2,}" />
</div>

    <div>
        <label for="fos_user_registration_form_email" class="required">Adresse e-mail :</label>

        <input type="email" id="fos_user_registration_form_email" name="fos_user_registration_form[email]" required="required" /></div>

    <div>
        <label for="fos_user_registration_form_plainPassword_first" class="required">Mot de passe :</label>

        <input type="password" id="fos_user_registration_form_plainPassword_first" name="fos_user_registration_form[plainPassword][first]" required="required" />
    </div>
    <div><label for="fos_user_registration_form_plainPassword_second" class="required">Vérification :</label>
        <input type="password" id="fos_user_registration_form_plainPassword_second" name="fos_user_registration_form[plainPassword][second]" required="required" />
    </div>

<div>
    <input type="submit" value="Enregistrer" />
</div> 
```

{{ form_widget(form) }} 或 {{ form_rest(form) }} 正在生成不适当的验证消息或 csrf_error。

希望它可以帮助某人...

# javascript - 在另一个 powerTip 中有一个 jQuery powerTip？

> ID：13880587
> 
> 赞同：6
> 
> 时间：2012-12-14T14:27:09.707
> 
> 标签：javascript, jquery, html, css

## 构架

*   [jQuery 1.8.3](http://jquery.com/)
*   [jQuery PowerTip 1.1.0](http://stevenbenner.github.com/jquery-powertip/)

## 客观的

我想拥有`powerTip`另一个人的内心`powerTip`。

## 当前结果

第一个提示 ( `tip1`) 显示正常，但第二个 ( `tip2`) 根本不显示。工作的CSS `tip2`，底部边框显示和所有，但是当你滚动它`powerTip`时不会显示。

## HTML

```
<p>
    Blah blah blah blah blah
    <span data-powertiptarget="tip1">Blah</span>
    and more blah blah blah.
</p>

<div id="tip1" class="tooltip-div">
    <p>
        Email: <a href="mailto:me@somebody.com">me@somebody.com</a><br/>
        <span data-powertiptarget="tip2">Nomenclature</span>: Blah
    </p>
</div>

<div id="tip2" class="tooltip-div">
    Nomenclature: blah blah blah blah.
</div> 
```

## CSS

```
.tooltip {
    border-bottom: 1px dashed #333333;
}

.tooltip-div {
    display: none;
}

#powerTip {
    text-align: left;
}

#powerTip a {
    color: #FFFFFF;
}

#powerTip a:visited {
    color: #F0F0F0;
}

#powerTip .tooltip {
    border-bottom: 1px dashed #FFFFFF;
} 
```

## JavaScript

```
$('span[data-powertiptarget]').addClass('tooltip');
$('span[data-powertiptarget]').each( function() {
    $(this).powerTip( {
        placement: 'ne',
        mouseOnToPopup: true,
        smartPlacement: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T23:59:52.627

您的工具提示没有显示的原因是因为每个工具提示的内容似乎被复制到一个单独的 div 中，并且附加到它的事件在此过程中丢失了。您可以很好地看到这一点，例如，如果您通过 chrome 开发人员工具检查显示的工具提示。

因此，您需要做的是在工具提示打开后在 div#powerTip 中创建 powerTip2 实例。此外，每个打开的工具提示都需要唯一的 ID。

[JsFiddle 上的示例](http://jsfiddle.net/2Xjb8/)

代码：

```
$('span[data-powertiptarget]').addClass('tooltip');
createPowerTips($('span[data-powertiptarget]'),'powerTip');

function createPowerTips($elems, popupId) {
    $elems.each( function() {
        $(this).powerTip( {
            popupId: popupId,
            placement: 'ne',
            mouseOnToPopup: true,
            smartPlacement: true
        }).on({
            powerTipOpen: function() {
                createPowerTips(
                    $('#powerTip').find('span[data-powertiptarget]'),
                    'powerTip2'
                );
            }
        });
    });
} 
```

正如您在示例中看到的，嵌套的工具提示没有附加任何 CSS。所以你必须为#powerTip2复制所有#powerTip CSS

显然，该插件并不是为这样的用例而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:59:58.877

为什么不使用 qTip 代替？

一个类似的例子：[Tooltip on tooltip](http://craigsworks.com/projects/qtip/demos/effects/multitooltip)

另外，请注意存在[qTip v2](http://craigsworks.com/projects/qtip2/)。

# java - 缓存事件侦听器 - 检索元素

> ID：13880593
> 
> 赞同：0
> 
> 时间：2012-12-14T14:27:24.853
> 
> 标签：java, hibernate, ehcache

我已经使用 EhCache 实现了 Hibernate 2nd Level 并使用指令注册了缓存事件侦听器

这里：[http ://ehcache.org/documentation/apis/cache-event-listeners](http://ehcache.org/documentation/apis/cache-event-listeners)

CacheEventListenerFactory 和 CacheEventListener 有效，但我可以知道如何从元素中检索我的实体吗？

我试过

```
public void notifyElementPut(final Ehcache cache, final Element element) throws CacheException{
     ABEEntity entity =  (ABCEntity)element.getObjectValue(); // throws ClassCastException

} 
```

它不断抛出类转换异常。我可以知道 ObjectValue 包装了吗？我相信是一个数组，但我找不到任何关于它的信息。

有人可以提供答案和文档吗？

文档比答案更重要？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:53:59.943

不幸的是，您将无法通过这样做来访问您的实体对象，因为 Hibernate 2nd lvl 缓存不存储实体，而是存储称为脱水状态的东西。

有关更多详细信息，请参阅[在 hibernate 的二级缓存中缓存哪些类](https://stackoverflow.com/questions/3715301/which-classes-are-cached-in-second-level-cache-in-hibernate)。

# android - 如何在特定范围内提取sqlite DB中的数据

> ID：13880597
> 
> 赞同：0
> 
> 时间：2012-12-14T14:27:34.697
> 
> 标签：android, database, android-sqlite, android-query

我正在编写一个android应用程序，我必须在其中获得一系列值，如下所示，

我有一个数据库，其中的内容类似于以下 5 列，

```
_ID | _NAME | _AGE | _HEIGHT | _WEIGHT |

1   | aabv  | 10   | 5.0     | 30

1   | babs  | 10   | 5.1     | 28

1   | cabg  | 10   | 5.2     | 29

1   | dabs  | 10   | 5.3     | 32

1   | eaba  | 10   | 5.0     | 31

1   | gabe  | 10   | 5.0     | 31

1   | iabr  | 10   | 5.0     | 31

1   | xabt  | 10   | 5.0     | 31

1   | zabu  | 10   | 5.0     | 31 
```

现在我想提取'd'到's'的行=>输出应该=> dabs，eaba，gabe，iabr

我可以这样做吗？如果是这样，什么是 sql 查询。

我尝试了以下 - “请求介于 D 和 S 之间的名称”

```
mCursor = mDb.query(DATABASE_NAME, new String[] { _ID, _NAME, _AGE, _HEIGHT, _WEIGHT }, 
                _NAME + " BETWEEN " + "D" + " AND " + "S", 
                null,
                null, 
                null, 
                _NAME + " ASC"); 
```

它给出一个错误，说语句中有错误=>

```
_NAME + " BETWEEN " + "A" + " AND " + "S" 
```

请帮忙。

[1/11] 问：在上表中，如果我想从列中提取多个数据，我想提取 where _HEIGHT = (5.1,5.2,5.3) 我应该如何添加查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:33:54.287

由于它们是文本而不是数字，因此您需要将它们封装在查询字符串中的引号中。

```
_NAME + " BETWEEN " + "'A'" + " AND " + "'S'" 
```

# java - 如何在 TextView 中使用 ClickableSpans 并且仍然能够水平滚动？

> ID：13880598
> 
> 赞同：4
> 
> 时间：2012-12-14T14:27:39.683
> 
> 标签：java, android, textview

我有一些代码使用带有链接移动方法的文本视图，以便可以单击单个单词。

但是，我真正需要的是滚动运动方法。当我这样做时，单个跨越的段不再是可点击的。

不幸的是，这意味着它使用垂直滚动，即使`android:scrollHorizontally="true"`指定了水平滚动 ( )。

我试图弄清楚如何保留在单个跨词上捕获 onClick 的能力，并且仍然允许它垂直滚动。

有人可以提供有关如何两全其美的建议吗？

```
 String page = getPage();
    textView.setMovementMethod(LinkMovementMethod.getInstance());
    textView.setText(page, BufferType.SPANNABLE);

    Spannable ssPage = (Spannable) textView.getText();
    Integer[] indices = getSpaceIndices(textView.getText().toString(), ' ');

    int start = 0;
    int end = 0;
      // to cater last/only word loop will run equal to the length of indices.length
    for (int i = 0; i <= indices.length; i++) {
        ClickableSpan clickSpan = new ClickableSpan() {
            @Override
            public void onClick(View widget) {
                TextView tv = (TextView) widget;
                String s = tv
                        .getText()
                        .subSequence(tv.getSelectionStart(),
                                tv.getSelectionEnd()).toString();
                Log.d("called", s);
                Speak (s);

                //textView.scrollBy(tv.getWidth(), tv.getHeight());
            }

            public void updateDrawState(TextPaint ds) {
                 super.updateDrawState(ds);
                 ds.setUnderlineText(false);
            }
        };
       // to cater last/only word
        end = (i < indices.length ? indices[i] : ssPage.length());
        ssPage.setSpan(clickSpan, start, end,
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        start = end + 1;
    } 
```

布局：

```
 <TextView
    android:id="@+id/textView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:alpha="245"
    android:ellipsize="end"
    android:gravity="top"
    android:paddingBottom="15dip"
    android:scrollHorizontally="true"

    android:scrollbars="horizontal"
    android:text="@string/hello_world"
    android:textColorLink="@android:color/black"
    android:textSize="20dip"
    tools:context=".ReadActivity" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-25T03:01:20.040

[LinkMovementMethod](http://developer.android.com/reference/android/text/method/LinkMovementMethod.html "链接运动方法")已经“遍历文本缓冲区中的链接并在必要时滚动”。所以如果你想要可点击的链接和可滚动的视图，你可以使用它。

然后你必须像这样调整 textview 的布局：

```
 android:maxLines="3"
    android:scrollbars="vertical" 
```

通过设置`maxLines`，它后面的多余行将超过高度，从而产生一个可滚动的文本视图。

# objective-c - 尝试对数组使用 Segue 时出错 - 目标 C

> ID：13880600
> 
> 赞同：0
> 
> 时间：2012-12-14T14:27:51.620
> 
> 标签：objective-c, arrays

我是 Objective 和 iPad 应用程序的新手。我试图显示一个我已经在单独的类/视图控制器中使用的数组。我试图访问的数组在“MainMenuScreen.m”中，我想在另一个名为“ScoresScreen.m”的类中使用该数组。我所有的代码都在工作，我只需要从另一个类中获取数组并插入我的代码。我尝试使用 Segue，但我在我的代码中遇到了这个错误，并且我卡住了。先感谢您

* * *

。H

```
#import <UIKit/UIKit.h>

@interface ScoresScreen : UIViewController<UITableViewDataSource, UITableViewDelegate>{
     NSMutableArray *scoresArray;
}
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) NSMutableArray *scoresArray; //Added this line

@end 
```

.m

```
#import "ScoresScreen.h"
#import "MainMenuScreen.h"

@interface ScoresScreen ()

@end

@implementation ScoresScreen
@synthesize scoresArray; //Added this line
NSMutableArray *TestScoresArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
   ...
....
.... 
```

.m

```
#import "MainMenuScreen.h"
#import "PlayGame.h"
#import "ImageTest.h"
#import "ScoresScreen.h"
@interface MainMenuScreen ()

@end

@implementation MainMenuScreen

//---------------------------------------------------------------------------------

//------------------------------------Variables------------------------------------

PlayGame *playGame;//PlayGameObject

NSMutableArray *gameDataArray;//Game Data Array (A array storying multable ImageTest Objects)

NSMutableArray *scoresArray;//<-------This need to go to view scores

//---------------------------------------------------------------------------------

//----------------------------------Constructors-----------------------------------

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    scoresArray = [[NSMutableArray alloc] init];

    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Bob",[NSNumber numberWithInt:134],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Roger",[NSNumber numberWithInt:12],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Ben",[NSNumber numberWithInt:34],nil]];//testData

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

//---------------------------------------------------------------------------------

//----------------------------------Add New Score----------------------------------
//a setter Method so Play Game can add the user name and score to the scoresArray
-(void)AddNewScore :(NSString *)userName :(int)score
{
    //adds user name and score to the array
    if (scoresArray != nil)
    {
        /*NSMutableArray *nameAndScore = [[NSMutableArray alloc] init];
        [nameAndScore addObject:userName];
        [nameAndScore addObject: [NSNumber numberWithInt:score]];//int needs to be converted before storing in an array
        [scoresArray addObject:nameAndScore];*/

        [scoresArray addObject: [NSMutableArray arrayWithObjects:userName,[NSNumber numberWithInt:score],nil]];

        for(NSMutableArray *m in scoresArray)
        {
            NSLog(@"%@%@", m[0],m[1]);//prints out the array in logs to make sure it is working
        }
    }
}

    //added this method
            - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
            {
               ScoresScreen *controller = [segue destinationViewController];
               controller.array = yourArray; //use of undeclared identifier 'yourarray'
//and this error "property 'array' not found on object of type 'ScoresScreen*'"
            }
    //This is where I get the error ^. 
```

...请有人可以帮助我吗？谢谢

```
--------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:32:32.813

在 MainMenuScreen.m 文件中使用它

```
#import "MainMenuScreen.h"
#import "PlayGame.h"
#import "ImageTest.h"
#import "ScoreScreen.h" 
```

# telerik - 使用 javascript 显示/隐藏 RadToolBar 控件

> ID：13880606
> 
> 赞同：0
> 
> 时间：2012-12-14T14:28:12.577
> 
> 标签：telerik

如何使用客户端 javascript 显示/隐藏 RadToolBar 控件？

我试过了：

```
var toolBar = $find("<%=RadToolBar2.ClientID%>");
toolBar.set_visible(false); 
```

和

```
var toolBar = $find("<%=RadToolBar2.ClientID%>");
toolBar.hide; 
```

不工作！

的HTML：

```
<telerik:RadToolBar ID="RadToolBar1" runat="server" Width="100%" OnClientButtonClicked="ToolBarClickHandler">
     <Items>
          <telerik:RadToolBarButton runat="server" ImageUrl="~/Images/Toolbar/Search.png" Text="Search" AllowSelfUnCheck="True" CheckOnClick="True">
          </telerik:RadToolBarButton>
     </Items>
</telerik:RadToolBar>

<telerik:RadToolBar ID="RadToolBar2" runat="server" Width="100%" Visible="False">
     <Items>
          ... some buttons
     </Items>
</telerik:RadToolBar> 
```

谢谢！

# c# - C# 像 PHP 一样获取代理 IP

> ID：13880610
> 
> 赞同：0
> 
> 时间：2012-12-14T14:28:17.377
> 
> 标签：c#, php, ip

有一个用 C# 构建的游戏模拟器。

当用户登录时，它会记录他们的 IP 地址以用于禁止等...

我们在反向代理后面，所以进入模拟器的所有连接当然都是代理的 IP。

但是在我们的 PHP 注册页面上，我们使用了这个代码......

```
function getRealIpAddr() {
    if (!empty($_SERVER['HTTP_CLIENT_IP']))
    //check ip from share internet
    {
        $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
    //to check ip is pass from proxy
    {
        $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
        $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

并且它设法通过我们的反向代理返回客户端的正确 IP。

这就是我目前在 C# 中获取客户端 IP 的方式......

```
public string RemoteAddress
{
    get
    {
        return ((mSocket != null && mSocket.Connected ?
            mSocket.RemoteEndPoint.ToString().Split(':')[0] : string.Empty));
    }
} 
```

给你一些上下文，`mSocket`是客户端连接的 Socket

有没有 C# 的函数可以做同样的事情？我看到的所有答案都将我指向 ASP，但我不需要那个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:46:24.357

我决定当用户使用 PHP 登录它时，它现在将设置他们的 IP，而不是模拟器在他们连接到它时执行它！

干杯理查德:)

# php - 让用户选择一位朋友并在 Facebook 应用程序中提取该朋友的个人资料照片

> ID：13880612
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:28:25.170
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有一个应用程序，我要求用户从他的朋友列表中选择一个朋友，然后我想用 php 获取朋友的个人资料照片。

我已经设置了所有必要的权限。我需要详细说明如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:58:45.453

1.  **使用Graph API**获取用户的朋友：`https://graph.facebook.com/USER_ID/friends`并显示他们。
2.  让用户做出选择并保留他选择的朋友的ID。
3.  以所需大小显示他的个人资料图片：`https://graph.facebook.com/FRIEND_ID?fields=picture.height(720)`

**小技巧：**您将通过选择超过 960 像素作为高度来获得最大尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:23:48.090

1.  对于朋友选择器，您可以使用任何可用的“多朋友选择器”插件。我在我的一个应用程序中使用[了 mikebrevoort 的](http://archives-mike.brevoort.com/2010/08/10/introducing-the-jquery-facebook-multi-friend-selector-plugin/index.html)插件。

2.  这将返回所选朋友的 ID。

3.  使用以下方法获取个人资料图片：

    ```
    https://graph.facebook.com/SELECTED_ID/picture?type=TYPE
    (TYPE: small/normal/large/square) 
    ```

# c# - WPF：Datagrid - 动态应用 DataGridTemplateColumn.CellTemplate

> ID：13880616
> 
> 赞同：4
> 
> 时间：2012-12-14T14:28:28.687
> 
> 标签：c#, wpf

我对 WPF（来自 Winforms）很陌生。我正在使用 .Net 4.5 和 WPF 中框架附带的默认 DataGrid。这些列是动态创建的，因为我在编译时不知道。现在，根据数据，一些列将是只读的，而一些列将是 ComboBox 类型。

*   如何在[动态创建列时动态应用此逻辑](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.celltemplate%28v=vs.95%29.aspx)，如下所示。这是我到目前为止写的代码。每当数据发生变化时，都会根据数据动态生成列。
*   另外，如何根据数据动态生成“不同类型”的列（组合框、文本框等）。WPF 中的*MVVM-ish 方式*有点限制我，因为我对模板知之甚少。我相信一旦我通过它应该很容易。

注意：目前所有这些都运行良好。我有一个只读的数据绑定网格。但是，不支持选择性可编辑列和选择性 ComboBox 列。

```
public class DatagridExtension {

    public static readonly DependencyProperty RefDataSourceProperty =
        DependencyProperty.RegisterAttached(
            "RefDataSource",
            typeof(RefDataRecord),
            typeof(DatagridExtension),
            new PropertyMetadata( default(RefDataRecord), OnRefDataSourceChanged)
        );

    private static void OnRefDataSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var grid = d as DataGrid;
        var dataSource = e.NewValue as RefDataRecord;

        grid.ItemsSource = dataSource;
        grid.Columns.Clear();
        int count = 0;
        foreach (var col in dataSource.Columns)
        {
            grid.Columns.Add(
                new DataGridTextColumn
                    {
                        Header = col.Name,
                        Binding = new Binding(string.Format("[{0}]", count))
                    }
                );
            count++;
        }
    }

    public static RefDataRecord GetRefDataSource(DependencyObject dependencyObject)
    {
        return (RefDataRecord) dependencyObject.GetValue(RefDataSourceProperty);
    }

    public static void SetRefDataSource(DependencyObject dependencyObject, RefDataRecord value)
    {
        dependencyObject.SetValue(RefDataSourceProperty, value);
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.celltemplate(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.celltemplate(v=vs.95).aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:05:56.573

如果数据源属性类型派生自[Enum](http://msdn.microsoft.com/en-us/library/system.enum.aspx) ，则WPF DataGrid 默认创建[DataGridComboBoxColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcomboboxcolumn.aspx) ，如果属性没有公共 setter 或属性具有[ReadOnlyAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.readonlyattribute.aspx)且[ReadOnlyAttribute.IsReadOnly](http://msdn.microsoft.com/en-us/library/system.componentmodel.readonlyattribute.isreadonly.aspx) = true ，则默认设置[DataGridColumn.IsReadyOnly 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.isreadonly.aspx)

如果您的数据源属性不满足上述默认条件，我现在将展示如何自定义 DataGrid 列生成。

首先，我将介绍两个属性，用于指定属性是只读的（EditableAttribute），并且该属性应该被可视化为带有预定义下拉项的 ComboBox（NameValueAttribute）。

这是**EditableAttribute.cs**：

```
using System;

namespace WpfApplication
{
    [AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
    public sealed class EditableAttribute : Attribute
    {
        public bool AllowEdit { get; set; }
    }
} 
```

这是**NameValueAttribute.cs**：

```
using System;

namespace WpfApplication
{
    [AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
    public sealed class NameValueAttribute : Attribute
    {
        public string Name { get; set; }
        public object Value { get; set; }
    }
} 
```

接下来，我们需要一些用于演示的示例类。

所以这里是**Person.cs**类，它将代表 DataGrid 中的单个项目（行）：

```
using System.ComponentModel;

namespace WpfApplication
{
    public class Person : ObservableObject
    {
        private string name;
        private string surname;
        private char gender;

        public string Name
        {
            get { return this.name; }
            set { this.SetValue(ref this.name, value, "Name"); }
        }

        [Editable(AllowEdit = false)]
        public string Surname
        {
            get { return this.surname; }
            set { this.SetValue(ref this.surname, value, "Surname"); }
        }

        [NameValue(Name = "Male", Value = 'M')]
        [NameValue(Name = "Female", Value = 'F')]
        public char Gender
        {
            get { return this.gender; }
            set { this.SetValue(ref this.gender, value, "Gender"); }
        }
    }
} 
```

请注意 Surname 属性如何应用 EditableAttribute 和 Gender 属性如何应用 NameValueAttributes。

这里是代表 DataGrid 数据源的**People.cs**类：

```
using System.Collections.ObjectModel;

namespace WpfApplication
{
    public class People : ObservableCollection<Person>
    {
        public People()
        {
            for (int i = 0; i < 100; ++i)
                this.Items.Add(new Person()
                {
                    Name = "Name " + i,
                    Surname = "Surname " + i,
                    Gender = i % 2 == 0 ? 'M' : 'F'
                });
        }
    }
} 
```

Person 的基类是**ObservableObject.cs**，它对所有数据绑定应用程序都是通用的：

```
using System.Collections.Generic;
using System.ComponentModel;

namespace WpfApplication
{
    public abstract class ObservableObject : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            var handler = this.PropertyChanged;
            if (handler != null)
                handler(this, e);
        }

        protected void SetValue<T>(ref T field, T value, string propertyName)
        {
            if (!EqualityComparer<T>.Default.Equals(field, value))
            {
                field = value;
                this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

现在，这是托管 DataGrid 控件的**MainWindow.xaml的 XAML：**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication">
    <Window.Resources>
        <local:People x:Key="itemsSource"/>
    </Window.Resources>
    <DataGrid ItemsSource="{StaticResource itemsSource}" AutoGeneratingColumn="OnAutoGeneratingColumn"/>
</Window> 
```

关键部分是[DataGrid.AutoGeneratingColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)事件处理程序`OnAutoGeneratingColumn`。此事件在 DataGrid 生成 DataGridColumn 后触发，并为每个自动生成的列触发一次。它用于自定义自动生成的列或指定不同的列，具体取决于[提供的数据源属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridautogeneratingcolumneventargs.propertydescriptor.aspx)。

这是**MainWindow.xaml.cs**代码隐藏，其中`OnAutoGeneratingColumn`事件处理程序正是这样做的。如果数据源属性具有允许编辑的 EditableAttribute = false，它通过将生成的列设置为只读来自定义生成的列，如果数据源属性具有 NameValueAttributes，它会使用 DataGridComboBoxColumn 覆盖自动生成的列：

```
using System;
using System.ComponentModel;
using System.Linq;
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            var propertyDescriptor = (PropertyDescriptor)e.PropertyDescriptor;
            var dataBoundColumn = (DataGridBoundColumn)e.Column;

            var comboBoxColumn = GenerateComboBoxColumn(propertyDescriptor, dataBoundColumn);
            if (comboBoxColumn != null)
                e.Column = comboBoxColumn;

            if (IsReadOnlyProperty(propertyDescriptor))
                e.Column.IsReadOnly = true;
        }

        private static DataGridComboBoxColumn GenerateComboBoxColumn(PropertyDescriptor propertyDescriptor, DataGridBoundColumn dataBoundColumn)
        {
            var nameValueAttributes = Attribute.GetCustomAttributes(propertyDescriptor.ComponentType.GetProperty(propertyDescriptor.Name)).OfType<NameValueAttribute>().ToArray();

            if (nameValueAttributes.Length > 0)
                return new DataGridComboBoxColumn()
                {
                    ItemsSource = nameValueAttributes,
                    DisplayMemberPath = "Name",
                    SelectedValuePath = "Value",
                    SelectedValueBinding = dataBoundColumn.Binding
                };
            else
                return null;
        }

        private static bool IsReadOnlyProperty(PropertyDescriptor propertyDescriptor)
        {
            var editableAttribute = propertyDescriptor.Attributes.OfType<EditableAttribute>().FirstOrDefault();
            return editableAttribute != null ? !editableAttribute.AllowEdit : false;
        }
    }
} 
```

* * *

**动态案例更新：**

WPF 支持在数据项上实现[ICustomTypeDescriptor和在集合上实现](http://msdn.microsoft.com/en-us/library/system.componentmodel.icustomtypedescriptor.aspx)[ITypedList](http://msdn.microsoft.com/en-us/library/system.componentmodel.itypedlist.aspx)的动态反射。此外，.NET 4.5 支持[ICustomTypeProvider](http://msdn.microsoft.com/en-us/library/system.reflection.icustomtypeprovider.aspx)，但由于我没有安装 .NET 4.5，所以我没有对其进行测试。

**NameValueAttribute.cs**和以前一样。

这是一个工作示例中 ICustomTypeDescriptor 和 ITypedList 的非常简单的实现：

**数据属性.cs**

```
using System;
using System.ComponentModel;

namespace WpfApplication
{
    public class DataProperty : PropertyDescriptor
    {
        private readonly Type propertyType;
        private readonly bool isReadOnly;
        private readonly Attribute[] attributes;

        public DataProperty(string propertyName, Type propertyType, bool isReadOnly, params Attribute[] attributes)
            : base(propertyName, null)
        {
            this.propertyType = propertyType;
            this.isReadOnly = isReadOnly;
            this.attributes = attributes;
        }

        protected override Attribute[] AttributeArray
        {
            get { return this.attributes; }
            set { throw new NotImplementedException(); }
        }

        public override Type ComponentType
        {
            get { return typeof(DataRecord); }
        }

        public override Type PropertyType
        {
            get { return this.propertyType; }
        }

        public override bool IsReadOnly
        {
            get { return this.isReadOnly; }
        }

        public override object GetValue(object component)
        {
            return ((DataRecord)component)[this.Name];
        }

        public override void SetValue(object component, object value)
        {
            if (!this.isReadOnly)
                ((DataRecord)component)[this.Name] = value;
        }

        #region Not implemented PropertyDescriptor Members

        public override bool CanResetValue(object component)
        {
            throw new NotImplementedException();
        }

        public override void ResetValue(object component)
        {
            throw new NotImplementedException();
        }

        public override bool ShouldSerializeValue(object component)
        {
            throw new NotImplementedException();
        }

        #endregion
    }
} 
```

**数据记录.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;

namespace WpfApplication
{
    public class DataRecord : INotifyPropertyChanged, ICustomTypeDescriptor
    {
        public event PropertyChangedEventHandler PropertyChanged;

        internal ITypedList container;

        private readonly IDictionary<string, object> values = new SortedList<string, object>();

        public object this[string propertyName]
        {
            get
            {
                object value;
                this.values.TryGetValue(propertyName, out value);
                return value;
            }
            set
            {
                if (!object.Equals(this[propertyName], value))
                {
                    this.values[propertyName] = value;
                    this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
                }
            }
        }

        protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            var handler = this.PropertyChanged;
            if (handler != null)
                handler(this, e);
        }

        PropertyDescriptorCollection ICustomTypeDescriptor.GetProperties()
        {
            return this.container.GetItemProperties(null);
        }

        #region Not implemented ICustomTypeDescriptor Members

        AttributeCollection ICustomTypeDescriptor.GetAttributes()
        {
            throw new NotImplementedException();
        }

        string ICustomTypeDescriptor.GetClassName()
        {
            throw new NotImplementedException();
        }

        string ICustomTypeDescriptor.GetComponentName()
        {
            throw new NotImplementedException();
        }

        TypeConverter ICustomTypeDescriptor.GetConverter()
        {
            throw new NotImplementedException();
        }

        EventDescriptor ICustomTypeDescriptor.GetDefaultEvent()
        {
            throw new NotImplementedException();
        }

        PropertyDescriptor ICustomTypeDescriptor.GetDefaultProperty()
        {
            throw new NotImplementedException();
        }

        object ICustomTypeDescriptor.GetEditor(Type editorBaseType)
        {
            throw new NotImplementedException();
        }

        EventDescriptorCollection ICustomTypeDescriptor.GetEvents(Attribute[] attributes)
        {
            throw new NotImplementedException();
        }

        EventDescriptorCollection ICustomTypeDescriptor.GetEvents()
        {
            throw new NotImplementedException();
        }

        PropertyDescriptorCollection ICustomTypeDescriptor.GetProperties(Attribute[] attributes)
        {
            throw new NotImplementedException();
        }

        object ICustomTypeDescriptor.GetPropertyOwner(PropertyDescriptor pd)
        {
            throw new NotImplementedException();
        }

        #endregion
    }
} 
```

**数据记录集合.cs：**

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace WpfApplication
{
    public class DataRecordCollection<T> : ObservableCollection<T>, ITypedList where T : DataRecord
    {
        private readonly PropertyDescriptorCollection properties;

        public DataRecordCollection(params DataProperty[] properties)
        {
            this.properties = new PropertyDescriptorCollection(properties);
        }

        protected override void InsertItem(int index, T item)
        {
            item.container = this;
            base.InsertItem(index, item);
        }

        PropertyDescriptorCollection ITypedList.GetItemProperties(PropertyDescriptor[] listAccessors)
        {
            return this.properties;
        }

        string ITypedList.GetListName(PropertyDescriptor[] listAccessors)
        {
            throw new NotImplementedException();
        }
    }
} 
```

**MainWindow.xaml：**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication">
    <DataGrid x:Name="dataGrid" AutoGeneratingColumn="OnAutoGeneratingColumn"/>
</Window> 
```

**MainWindow.xaml.cs：**

```
using System.ComponentModel;
using System.Linq;
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var records = new DataRecordCollection<DataRecord>(
                new DataProperty("Name", typeof(string), false),
                new DataProperty("Surname", typeof(string), true),
                new DataProperty("Gender", typeof(char), false, new NameValueAttribute() { Name = "Male", Value = 'M' }, new NameValueAttribute() { Name = "Female", Value = 'F' }));

            for (int i = 0; i < 100; ++i)
            {
                var record = new DataRecord();
                record["Name"] = "Name " + i;
                record["Surname"] = "Surname " + i;
                record["Gender"] = i % 2 == 0 ? 'M' : 'F';
                records.Add(record);
            }

            this.dataGrid.ItemsSource = records;
        }

        private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            e.Column.Header = ((PropertyDescriptor)e.PropertyDescriptor).DisplayName;

            var propertyDescriptor = (PropertyDescriptor)e.PropertyDescriptor;
            var dataBoundColumn = (DataGridBoundColumn)e.Column;

            var comboBoxColumn = GenerateComboBoxColumn(propertyDescriptor, dataBoundColumn);
            if (comboBoxColumn != null)
                e.Column = comboBoxColumn;
        }

        private static DataGridComboBoxColumn GenerateComboBoxColumn(PropertyDescriptor propertyDescriptor, DataGridBoundColumn dataBoundColumn)
        {
            var nameValueAttributes = propertyDescriptor.Attributes.OfType<NameValueAttribute>().ToArray();

            if (nameValueAttributes.Length > 0)
                return new DataGridComboBoxColumn()
                {
                    ItemsSource = nameValueAttributes,
                    DisplayMemberPath = "Name",
                    SelectedValuePath = "Value",
                    SelectedValueBinding = dataBoundColumn.Binding
                };
            else
                return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:01:45.543

首先，WPF 对 WinForms 的主要优势之一是能够使用模板声明用户界面。并且**您应该尽可能避免在代码中声明 UI 组件**。

据我了解，您希望根据对象类型/数据显示不同对象的集合。实现这种逻辑的最好方法——实现你自己的[TemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.selecttemplate.aspx)

我建议你阅读下一篇文章：

1.  [http://www.wpftutorial.net/DataGrid.html](http://www.wpftutorial.net/DataGrid.html)
2.  [http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

PS 供参考。在代码中声明 DataTemplate 的示例：

```
//create the data template
DataTemplate cardLayout = new DataTemplate();
cardLayout.DataType = typeof(CreditCardPayment);

//set up the stack panel
FrameworkElementFactory spFactory = new FrameworkElementFactory(typeof(StackPanel));
spFactory.Name = "myComboFactory";
spFactory.SetValue(StackPanel.OrientationProperty, Orientation.Horizontal);

//set up the card holder textblock
FrameworkElementFactory cardHolder = new FrameworkElementFactory(typeof(TextBlock));
cardHolder.SetBinding(TextBlock.TextProperty, new Binding("BillToName"));
cardHolder.SetValue(TextBlock.ToolTipProperty, "Card Holder Name");
spFactory.AppendChild(cardHolder);

//set up the card number textblock
FrameworkElementFactory cardNumber = new FrameworkElementFactory(typeof(TextBlock));
cardNumber.SetBinding(TextBlock.TextProperty, new Binding("SafeNumber"));
cardNumber.SetValue(TextBlock.ToolTipProperty, "Credit Card Number");
spFactory.AppendChild(cardNumber);

//set up the notes textblock
FrameworkElementFactory notes = new FrameworkElementFactory(typeof(TextBlock));
notes.SetBinding(TextBlock.TextProperty, new Binding("Notes"));
notes.SetValue(TextBlock.ToolTipProperty, "Notes");
spFactory.AppendChild(notes);

//set the visual tree of the data template
cardLayout.VisualTree = spFactory;

//set the item template to be our shiny new data template
drpCreditCardNumberWpf.ItemTemplate = cardLayout; 
```

但正如我上面所说，你应该避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:56:26.150

这是正确的答案 - [http://www.paulstovell.com/dynamic-datagrid](http://www.paulstovell.com/dynamic-datagrid)（动态查看模板创建逻辑。它很聪明）。

而且，MMVM 将像这样实现 - [http://www.codeproject.com/Articles/36462/Binding-a-ListView-to-a-Data-Matrix](http://www.codeproject.com/Articles/36462/Binding-a-ListView-to-a-Data-Matrix)（几乎是我在问题中发布的内容）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T01:27:37.353

我离开 Internet 几天了，但我认为我找到了更好的方法，即简化的 PropertyDescriptor 架构，不需要实现 ICustomTypeDescriptor。这是整个代码：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace WpfApplication
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var records = new RecordCollection(new Property("Name"), new Property("Surname"));

            for (int i = 0; i < 1000; ++i)
                records.Add(new Record()
                {
                    { "Name", "John " + i },
                    { "Surname", "Doe " + i }
                });

            this.dataGrid.ItemsSource = records;
        }

        private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            var property = e.PropertyDescriptor as Property;
            if (property != null)
            {
                var binding = new Binding() { Path = new PropertyPath(property), Mode = property.IsReadOnly ? BindingMode.OneWay : BindingMode.TwoWay };
                var dataGridBoundColumn = e.Column as DataGridBoundColumn;
                if (dataGridBoundColumn != null)
                    dataGridBoundColumn.Binding = binding;
                else
                {
                    var dataGridComboBoxColumn = e.Column as DataGridComboBoxColumn;
                    if (dataGridComboBoxColumn != null)
                        dataGridComboBoxColumn.SelectedItemBinding = binding;
                }
            }
        }
    }

    public sealed class Record : INotifyPropertyChanged, IEnumerable
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private readonly IDictionary<string, object> values = new SortedList<string, object>(StringComparer.Ordinal);

        private void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            var handler = this.PropertyChanged;
            if (handler != null)
                handler(this, e);
        }

        public object GetValue(string name)
        {
            object value;
            return this.values.TryGetValue(name, out value) ? value : null;
        }

        public void SetValue(string name, object value)
        {
            if (!object.Equals(this.GetValue(name), value))
            {
                this.values[name] = value;
                this.OnPropertyChanged(new PropertyChangedEventArgs(name));
            }
        }

        public void Add(string name, object value)
        {
            this.values[name] = value;
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return this.values.GetEnumerator();
        }
    }

    public sealed class Property : PropertyDescriptor
    {
        private readonly Type propertyType;
        private readonly bool isReadOnly;

        public Property(string name)
            : this(name, typeof(string))
        {
        }

        public Property(string name, Type propertyType)
            : this(name, propertyType, false)
        {
        }

        public Property(string name, Type propertyType, bool isReadOnly, params Attribute[] attributes)
            : base(name, attributes)
        {
            this.propertyType = propertyType;
            this.isReadOnly = isReadOnly;
        }

        public override Type ComponentType
        {
            get { return typeof(Record); }
        }

        public override Type PropertyType
        {
            get { return this.propertyType; }
        }

        public override bool IsReadOnly
        {
            get { return this.isReadOnly; }
        }

        public override object GetValue(object component)
        {
            var record = component as Record;
            return record != null ? record.GetValue(this.Name) : null;
        }

        public override void SetValue(object component, object value)
        {
            var record = component as Record;
            if (record != null)
                record.SetValue(this.Name, value);
        }

        public override bool CanResetValue(object component)
        {
            throw new NotSupportedException();
        }

        public override void ResetValue(object component)
        {
            throw new NotSupportedException();
        }

        public override bool ShouldSerializeValue(object component)
        {
            throw new NotSupportedException();
        }
    }

    public sealed class RecordCollection : ObservableCollection<Record>, ITypedList
    {
        private readonly PropertyDescriptorCollection properties;

        public RecordCollection(params Property[] properties)
        {
            this.properties = new PropertyDescriptorCollection(properties);
        }

        PropertyDescriptorCollection ITypedList.GetItemProperties(PropertyDescriptor[] listAccessors)
        {
            return this.properties;
        }

        string ITypedList.GetListName(PropertyDescriptor[] listAccessors)
        {
            return string.Empty;
        }
    }
}

<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication">
    <DataGrid x:Name="dataGrid" AutoGeneratingColumn="OnAutoGeneratingColumn"/>
</Window> 
```

此代码中的关键是**使用包含 Property 实例而不是 string 的 BindingPath 创建一个 Binding**。这可以简化 PropertyDescriptor 体系结构，因为不再需要 ICustomTypeDescriptor。

您如何看待这个解决方案？

# c# - C#如果lastbutton标签等于当前点击的按钮，禁用两者

> ID：13880618
> 
> 赞同：0
> 
> 时间：2012-12-14T14:28:32.963
> 
> 标签：c#, button

我正在创建一个匹配游戏。我要完成的是检查先前单击的按钮的标记是否与“当前”单击的按钮的标记匹配。如果这些标签匹配，它将禁用这两个按钮，因为它们不再是游戏中的选项。我的部分困惑是在哪里集成这部分代码而不搞砸我的大部分工作。

```
Random myRandom = new Random();
    var buttons = new List<Button> { button1, button2, button3, button4, button5, button6, button7, button8, button9, button10, button11, button12 };
    var carString = new List<string> { "Camaro", "Mini Cooper", "Porsche 944", "Ford Focus", "Chevy Blazer", "Model T", "Camaro", "Mini Cooper", "Porsche 944", "Ford Focus", "Chevy Blazer", "Model T" };
    while (matchingButtonIndex < numOfButtons)
        {
            int index = myRandom.Next(carString.Count);
            var name = carString[index];
            if (name != null)
        {
        buttons[matchingButtonIndex].Tag = name;
        carString[index] = null;
        matchingButtonIndex = matchingButtonIndex + 1;
     }
   }
 }
    void SwitchTagWithText()
    {
        string text = lastButton.Text;
        lastButton.Text = lastButton.Tag.ToString();
        lastButton.Tag = text;
    }
    private void button1_Click(object sender, EventArgs e)
    {
        if (lastButton != null)
        {
            SwitchTagWithText();
        }

        lastButton = sender as Button;
        SwitchTagWithText();

        buttoncount++;
        label2.Text = buttoncount.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:55:51.977

就像是：

```
private void button1_Click(object sender, EventArgs e)
    {
        if (lastButton != null)
        {
            SwitchTagWithText();
            var thisButton = sender as Button;
            if(thisButton.Text != lastButton.Text 
                 && thisButton.Tag.ToString() == lastButton.Tag.ToString())
            {
                //two different buttons with the same tag were clicked in succession
                thisButton.Enabled = false;
                lastButton.Enabled = false;
                lastButton = null;
                return;
            }
            lastButton = thisButton;
        }
        else
        {
           lastButton = sender as Button;
        }

        SwitchTagWithText();

        buttoncount++;
        label2.Text = buttoncount.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:35:31.363

我建议您创建一个新类来处理这个问题，例如

```
public class ButtonManager {
    private Button lastButton;

    public void SwitchTagWithText(Button button){
        string text = lastButton.Text;
        lastButton.Text = lastButton.Tag.ToString();
        lastButton.Tag = text;

        // Or whatever the logic is you need.
    }

    public void ButtonClicked(Button button){
        this.SwitchTagWithText(button);
        // Or whatever the logic is you need.
    }
} 
```

好的，上面是不完整的，但希望主要思想能够通过 - 你有一个单独的类来处理标签值的读取/设置并确定是否应该禁用按钮。

所以在你的加载中，创建一个`ButtonManager`可以在整个表单代码中使用的新实例，所以让它成为一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:35:34.433

您有一个按钮计数变量，每次单击都会增加该变量。所以你可以使用它：

```
private void button1_Click(object sender, EventArgs e)
{
    thisButton = sender as Button;

    buttoncount++;

    SwitchTagWithText(thisButton);

    if (buttoncount == 1)
    {
        lastButton = thisButton;
    }
    else if (buttoncount == 2)
    {
        if (lastButton.Tag == thisButton.tag)
        {
            // Disable both buttons.
        }
        else
        {
            // Switch buttons back
        }

        buttoncount = 0;
    }
} 
```

# java - Android 上的 Facebook 集成 fbconnect 断开链接

> ID：13880622
> 
> 赞同：11
> 
> 时间：2012-12-14T14:28:39.863
> 
> 标签：java, android, authentication, fbconnect

我正在尝试将 Facebook 集成到我的 Android 应用程序中，它会关闭并正常登录 Facebook，但是当它尝试将访问令牌传递回应用程序时，它只会返回：

> 位于 fbconnect://success#access_token= ***[ACCESS TOKEN]***的网页 可能暂时关闭，或者它可能已永久移动到新网址。

显然，`[ACCESS TOKEN]`一长串字符在哪里。

我得到了正确的 App ID 并将密钥哈希添加到 facebook。但是我可能错过了什么过程？

代码：

```
public class FacebookActivity extends Activity {

private static final String APP_ID = "[MY APP ID]";
private static final String[] PERMISSIONS = new String[] {"publish_stream"};

private static final String TOKEN = "access_token";
    private static final String EXPIRES = "expires_in";
    private static final String KEY = "facebook-credentials";

private Facebook facebook;
private String messageToPost;

public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    facebook = new Facebook();
    restoreCredentials(facebook);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_facebook);

    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null){
        facebookMessage = "Test wall post";
    }
    messageToPost = facebookMessage;

            if (! facebook.isSessionValid()) {
        loginAndPostToWall();
    }
    else {
        postToWall(messageToPost);
    }
}

public void loginAndPostToWall(){
     facebook.authorize(this, APP_ID, PERMISSIONS, new LoginDialogListener());
}

public void postToWall(String message){
    Bundle parameters = new Bundle();
            parameters.putString("message", message);
            parameters.putString("description", "topic share");
            try {
                facebook.request("me");
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") ||
                response.equals("false")) {
            showToast("Blank response.");
        }
        else {
            showToast("Message posted to your facebook wall!");
        }
        finish();
    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
}

class LoginDialogListener implements DialogListener {
    @Override
    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        if (messageToPost != null){
        postToWall(messageToPost);
    }
    }
    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
        finish();
    }
}

private void showToast(String message){
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
}

} 
```

Android 开发新手，所以我确信这很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T14:26:29.920

我更新了设备上的本机 facebook 应用程序，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T15:30:22.493

似乎本机 Facebook 应用程序必须是版本 2 或更高版本。我在 1.9.6 版本中看到了同样的问题，升级 Facebook 应用程序解决了这个问题。

# cakephp - Cakephp Set::combine 保留数字键

> ID：13880625
> 
> 赞同：0
> 
> 时间：2012-12-14T14:28:43.450
> 
> 标签：cakephp, set

我想从 cakePhp 中的 Set::combine 中获取一个数字数组。

```
Set::combine($results, '{n}', '{n}.Tag.name') 
```

但这并不像我预期的那样工作，因为 '{n}' 是数组而不是索引，就像我想的那样。这也不起作用

```
Set::combine($results, '', '{n}.Tag.name') 
//OR
Set::combine($results, '{n}.Tag.name') 
```

在文档[http://book.cakephp.org/2.0/en/core-utility-libraries/set.html](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)我没有找到任何对我有帮助的东西。

是否可以使用 Set::combine 以相同的数字顺序获取数组，就像将其传递给保留数字键的函数一样，还是我必须以另一种方式转换键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:45:54.663

我找到了有效的函数 Set::classicExtract！

```
 Set::classicExtract($results, '{n}.Tag.name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:15:04.617

![结合](../Images/980ba24fb2d49416710b9206b094ab04.png)

您正在使用一种方法`combine`，但只指定一件事......

如果您只想使用名称`Set::extract($results, '{n}.Tag.name')`或 2.x`Hash::extract($results, '{n}.Tag.name')`

这会给`array(0 => name, 1 => name)`. 订单永远不会受到影响。

# linq - 我正在尝试使用 linq 根据列的值创建一个动态对象

> ID：13880630
> 
> 赞同：1
> 
> 时间：2012-12-14T14:28:59.027
> 
> 标签：linq

基于列的值，我试图创建一个具有特定属性值的对象。如何修改以下查询来做到这一点？
//object alertCode 具有“code”和“description”属性，代码将根据查询返回的 alert_type 值设置。

```
var medicalcodes = new string[]{"M", "D", "5"};
var specialedcodes = new string []{"C", "I"};
var personalcommentscodes = new string []{"A"};
var academiccodes = new string[]{"R", "E", "S"};

List<alertCode alertCollections = (from a in alertinfo
                                   select new alertCode{
                                      where medicalcodes.Contains(a.alert_type)
                                       code = 'M',
                                       where specialcodes.Contains(a.alert_type)
                                        code = 'S',
                                       where personalcommentscodes.Contains(a.alert_type)
                                        code = 'P',
                                        where academiccodes.Contains(a.alert_type)
                                         code = 'A',
                                         desc = a.description
                                     } ).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:38:30.347

我已将代码计算移至单独的方法

```
var query = alertinfo.Select(a => new alertCode()
                      {
                         code = GetCodeFor(a.alert_type),
                         desc = a.description
                      }).ToList(); 
```

代码计算：

```
private char GetCodeFor(string alertType)
{
     if (medicalcodes.Contains(alertType)
         return 'M';
     if (specialcodes.Contains(alertType)
         return 'S';
     if (personalcommentscodes.Contains(alertType)
         return 'P';
     if (academiccodes.Contains(alertType))
         return 'A';

     // return default value
} 
```

# c++ - 将元素插入 std::map 无需额外复制

> ID：13880631
> 
> 赞同：6
> 
> 时间：2012-12-14T14:29:01.247
> 
> 标签：c++, optimization, stdmap, c++-standard-library

考虑这个程序：

```
#include <map>
#include <string>
#define log magic_log_function // Please don't mind this.

//
// ADVENTURES OF PROGO THE C++ PROGRAM
//

class element;
typedef std::map<int, element> map_t;

class element {
public:
    element(const std::string&);
    element(const element&);
    ~element();
    std::string name;
};
element::element(const std::string& arg)
    : name(arg)
{
    log("element ", arg, " constucted, ", this);
}
element::element(const element& other)
    : name(other.name)
{
    name += "-copy";
    log("element ", name, " copied, ", this);
}
element::~element()
{
    log("element ", name, " destructed, ", this);
}
int main(int argc, char **argv)
{
    map_t map1; element b1("b1");
    log(" > Done construction.");
    log(" > Making map 1.");
    map1.insert(std::pair<int, element>(1, b1));
    log(" > Done making map 1.");
    log(" > Before returning from main()");
} 
```

它在堆栈上创建一些对象并将`insert`它们放入`std::map`容器中，在此过程中创建**两个**额外的临时副本：

```
element b1 constucted, 0x7fff228c6c60
 > Done construction.
 > Making map 1.
element b1-copy copied, 0x7fff228c6ca8
element b1-copy-copy copied, 0x7fff228c6c98
element b1-copy-copy-copy copied, 0x232d0c8
element b1-copy-copy destructed, 0x7fff228c6c98
element b1-copy destructed, 0x7fff228c6ca8
 > Done making map 1.
 > Before returning from main()
element b1 destructed, 0x7fff228c6c60
element b1-copy-copy-copy destructed, 0x232d0c8 
```

`std::pair`我们可以通过将签名更改为 来摆脱一个额外的复制构造函数调用`std::pair<int, element&>`，但是，第二个临时对象仍然被创建并立即被销毁：

```
element b1 constucted, 0x7fff0fe75390
 > Done construction.
 > Making map 1.
element b1-copy copied, 0x7fff0fe753c8
element b1-copy-copy copied, 0x1bc4098
element b1-copy destructed, 0x7fff0fe753c8
 > Done making map 1.
 > Before returning from main()
element b1 destructed, 0x7fff0fe75390
element b1-copy-copy destructed, 0x1bc4098 
```

有没有办法`std::map`通过引用在堆栈上获取一个对象并制作它的单个内部副本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T17:29:52.757

这是激发`C++11`'s`move`功能的众多用例之一，由许多新功能支持，尤其是右值引用，以及各种新的标准库接口，包括`std::map::emplace`、`std::vector::emplace_back`等。

如果由于某种原因您还不能使用`C++11`，您至少可以安慰自己，认为问题已被识别，解决方案已标准化和实施，而且我们中的许多人正在使用它，我们中的一些人[1] 在生产代码中。所以，就像老笑话所说的那样，*[存在一个解决方案](http://news.ycombinator.com/item?id=1878735)*，你什么时候接受它是你的决定。

请注意，如果您的对象实现移动构造函数，则不必使用`emplace`成员函数，它们甚至可以默认使用。如果具有显式复制构造函数，则不会发生这种情况，因此您上面的测试可能会产生观察者效果（实际上，在 POD 的情况下，它也可能会抑制编译器优化，因此即使使用 C++03，您也可能不会遇到问题认为你这样做）。

有多种可用的技巧可以避免只对“次要”源代码更改进行复制，但恕我直言，最好的方法是开始转向 C++11。无论您做什么，都要尝试以一种使不可避免的迁移不那么痛苦的方式来做。

* * *

[注1]：免责声明：我不再编写生产代码，或多或少退休，所以我不属于那句话中的“我们中的一些人”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T20:22:23.223

我去过的标准做法（使用较旧的 C++ 版本）是使用共享指针映射。

仍然会创建共享指针的副本，但这通常比复制大对象要简单得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T14:33:06.760

您可以使用[emplace()](http://en.cppreference.com/w/cpp/container/map/emplace)：

> 元素是就地构造的，即不执行复制或移动操作。元素类型（value_type，即 std::pair）的构造函数使用与提供给函数的参数完全相同的参数调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:59:39.587

好吧，如果你没有`emplace`，你可以在堆上构造元素并将指针传递给映射：

```
typedef std::map<int, element*> map_t;
...
printf(" > Making pair 1.\n");
std::pair<int, element*> pair(1, new element ("b1")) ;
printf(" > Making map 1.\n");
map1.insert(pair); 
```

但是，如果您在地图离开范围时不小心，您就会受到内存泄漏的影响......

# coffeescript - 更多咖啡脚本数组赋值

> ID：13880632
> 
> 赞同：0
> 
> 时间：2012-12-14T14:29:05.447
> 
> 标签：coffeescript

我有以下数组分配：

```
advances = if advance == 0 then [advance] else [advance, (0 - advance)] 
```

我想知道是否有更多的咖啡脚本方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:32:45.923

关于什么：

```
advances = [advance]
advances.push (0 - advance) if advance != 0 
```

我认为这更具可读性。但我想这是一个品味问题。它还使用了咖啡脚本很好的 if-at-the-end 功能，我使一些语句（例如“条件数组增长”）更具可读性（至少对我而言）。

PS：我也改变了`== 0`to`!= 0`来避免`unless`声明。它只是在阅读代码时让我感到困惑。

PPS：不要为了它而把所有东西都放在一行上（即使咖啡脚本擅长这一点）。始终考虑最易读（且性能良好）的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:01:49.603

您可能正在考虑列表推导，但我无法想象如何在这里使用它们。我相信使用 underscore.js（或其他一些提供收集实用程序的库）可以获得更好的结果：

```
advances = _.uniq([advance, (0 - advance)]) 
```

[http://underscorejs.org/#uniq](http://underscorejs.org/#uniq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:00:43.850

我认为您自己的建议非常好。它简单、清晰、纯功能。

如果您认为最小化标点符号是咖啡脚本方式的一部分，那么您可以去掉括号

```
advances = if advance == 0 then [advance] else [advance, 0 - advance] 
```

# java - 如何获取在 JavaFX2 中按下的 Enter 键？

> ID：13880638
> 
> 赞同：32
> 
> 时间：2012-12-14T14:29:40.230
> 
> 标签：java, user-interface, javafx-2, javafx

我有一个 TextField 可以输入搜索词，还有一个“Go”按钮。但是在 JavaFX2 中，我将如何让它在 TextField 中按下 Enter 键来执行操作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-14T15:39:02.010

我假设您希望仅当用户在`TextField`获得焦点时按 Enter 键时才会发生这种情况。你会想要使用`KeyEvent`out of `javafx.scene.input`package并做这样的事情：

```
field.setOnKeyPressed(new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent ke) {
        if (ke.getCode().equals(KeyCode.ENTER)) {
            doSomething();
        }
    }
}); 
```

* * *

使用 lambda：

```
field.setOnKeyPressed( event -> {
  if( event.getCode() == KeyCode.ENTER ) {
    doSomething();
  }
} ); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-14T15:44:53.697

您可以使用 TextField 的 onAction 属性并将其绑定到控制器中的方法。

```
@FXML
public void onEnter(ActionEvent ae){
   System.out.println("test") ;
} 
```

在您的 FXML 文件中：

```
<TextField fx:id="textfield" layoutX="29.0" layoutY="298.0" onAction="#onEnter" prefWidth="121.0" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-22T17:34:11.387

您可以尝试以下方法：

```
@FXML
public void buttonPressed(KeyEvent e)
{
    if(e.getCode().toString().equals("ENTER"))
    {
        //do something
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-27T09:13:52.940

只需使用**“lambda 表达式”：**

```
TextField textField = new TextField();
textField.setOnAction(e -> {
    // add your code to be run here
    System.out.println("textFile");
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-20T19:45:10.170

这有效：

```
@FXML public TextField txt;

@FXML
public void textAction(KeyEvent e){

    if(e.getCode().equals(KeyCode.ENTER))
        System.out.println(txt.getText());
} 
```

如果由于某种原因 .getCode() 不起作用，请确保导入库：

```
import javafx.scene.input.KeyEvent; 
```

不是

```
import java.awt.event.KeyEvent; 
```

我被赶上了这件事，这很烦人。我只是把这个传递给所有在同一条船上的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-29T18:57:20.380

在某些键盘上，您必须对 '\n' 和 '\r' 字符进行额外测试。

```
if(event.getCode().equals(KeyCode.ENTER) || event.getCharacter().getBytes()[0] == '\n' || event.getCharacter().getBytes()[0] == '\r') {
        // your action
    } 
```

# java - Pattern.compile() 使用字符串

> ID：13880642
> 
> 赞同：0
> 
> 时间：2012-12-14T14:30:10.213
> 
> 标签：java, regex

考虑这段代码：

```
String path = "c:\\temp";
Pattern myPattern = Pattern.compile(".*filename.XLS.*.\\d{8}_\\d{6}"); 
```

如何替换 myPattern 中的第一个“.*”，以便该路径包含在 Regex 中？类似的东西

```
Pattern myPattern = Pattern.compile(path + "filename.XLS.*.\\d{8}_\\d{6}"); 
```

这显然不起作用.. :)

干杯，蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:33:20.750

您必须两次转义反斜杠：

```
String path = "c:\\\\temp";
Pattern myPattern = Pattern.compile(path + "filename.XLS.*.\\d{8}_\\d{6}"); 
```

一次用于java，然后再次用于正则表达式。

# tomcat - 如何在 Resteasy 服务的响应中指定自定义 HTTP 错误

> ID：13880645
> 
> 赞同：1
> 
> 时间：2012-12-14T14:30:19.230
> 
> 标签：tomcat, servlets, jax-rs

在我的 resteasy 服务中，我想根据客户的请求返回媒体文件，如下所示：

从服务器端（tomcat 6）：

```
@GET
@Path("/getXML/{skinId}/{key}")
@Produces("text/xml")
public Response getXMLResource(@PathParam("key") String key, @PathParam("skinId") String skinId) {
  // Reading a file from disk...
  return Response.ok(file, type).build();
} 
```

从客户方面：

```
final URL uri = new URL("http://localhost:8080/service/getXML");
final InputStream stream = uri.openStream(); 
```

问题：

我想返回自定义 HTTP 错误（资源不存在；服务器正忙，稍后再试）。

```
@GET
@Path("/getError")
@Produces("text/xml")
public Response getError() {
  return Response.serverError().status(333).build();
} 
```

但是当我尝试访问错误方法时，我得到 500（！）（无论如何）内部服务器错误。

你们能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:53:32.547

我已经应付了这个。问题在于使用

```
.serverError() 
```

这自动意味着 500 错误代码作为服务器内部。

我们可以设置响应的状态来返回正确的状态：

```
@GET
@Path("/getError")
public Response getError() {
  return Response.status(412).build();
} 
```

# python - 如何从window xp / 7中的批处理文件调用/运行多个python脚本

> ID：13880650
> 
> 赞同：11
> 
> 时间：2012-12-14T14:30:46.553
> 
> 标签：python, batch-file, scheduled-tasks

我正在尝试使用批处理文件安排运行多个 python。

例如，我想安排我的 python 文件每天运行它们

```
D:\py\s1.py
D:\py\s2.py 
```

现在如何将这两个文件组合成一个 .bat，以便我可以同时使用`python.exe`( `C:\python27\python.exe`) 安排运行这两个文件。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T14:39:10.353

**方法一**：bat文件。

如果 PATH 环境变量中有 python：

```
start python D:\py\s1.py
start python D:\py\s2.py 
```

其他文字路径

```
start C:\python27\python.exe D:\py\s1.py
start C:\python27\python.exe D:\py\s2.py 
```

请注意，这不会等待任一执行的返回。请注意，如果路径字符串包含空格或特殊字符，请不要忘记在路径字符串周围添加引号。

有关`start /?`更多帮助和选项，请参阅。

**方法2**：两个不同的计划任务

创建两个同时启动的单独计划任务，每个任务都调用 python 来运行其中一个脚本。

# asp.net - 如何使用 ASP.net 在客户端中设置本地驱动器的下载路径

> ID：13880653
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:31:00.107
> 
> 标签：asp.net, download, hard-drive

我正在尝试在我的 asp.net 网站中设置一个链接，以便文件直接下载到客户端上的特定本地磁盘。

例如：`E:\output\report.pdf`

任何人都可以帮我编码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:38:35.720

我认为您的概念存在缺陷-网站永远不应该了解您硬盘的内容。

因此，设置特定的下载路径不仅不可能（至少我知道），而且在概念上也是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:54:55.367

浏览器故意与本地文件系统隔离，以防止脚本攻击。您无法获取此信息。

**您可以在 asp.net**中探索Request.Browser，然后您就知道您有哪些关于客户端的信息。一些例子在这里

```
 Request.Browser.BackgroundSounds
    Request.Browser.Browser
    Request.Browser.Version
    Request.Browser.Platform 
```

# iphone - KVC 使用 valueForKeyPath 发布 objs？

> ID：13880654
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:31:21.493
> 
> 标签：iphone, objective-c, ios, key-value-coding, kvc

我有很多名为`_Obj_1`,`_Obj_2`等的对象...
我想全部释放。

我正在使用 KVC。特别是要释放所有，我使用：

```
MyClass *obj = nil;
for ( int i=1 ; i<=14; i++ ) {
  obj = [self valueForKeyPath:[NSString stringWithFormat:@"_Obj_%d", i]];
  [obj release];
} 
```

铿锵分析仪告诉我`[obj release];`

> 调用者此时不拥有的对象的引用计数不正确递减？

我该如何解决？

这不是 ARC 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:34:27.173

这可以很容易地修复

**如果您不拥有该对象（您没有调用保留），请不要释放它！**

与其使用大量同名变量，不如使用数组来保存对象。那么释放将只是一个数组的释放。

# ios - 将html附加到div在cordova iOS上不起作用

> ID：13880656
> 
> 赞同：0
> 
> 时间：2012-12-14T14:31:26.543
> 
> 标签：ios, apache, cordova

我正在使用带有 Xcode 4.5.2 的科尔多瓦 2.2.0。在我的一个页面上，我有一个选择组件，一旦选择了特定选项，我想在 div 中显示一个表格。我的 html 看起来像这样：`<div class="hero-unit" id="#facprog"></div>`

javascript/jquery 看起来像这样：

```
<pre><code>
$(function() { 
 $('#selFaculty').change(function() {
  var facultyName = $('#selFaculty').val();
  var progDetails = app.fillFacultyProgramme(facultyName);
  alert(progDetails);
  $('#facprog').append(progDetails);
 });
});
</code></pre> 
```

请注意，这`#selFaculty`是选择对象的 id。但是，当 select 选项更改时，javascript 中的所有内容都会执行，除了 append。div中没有​​任何显示。在iOS的cordova 2.2.0下，有没有不同的方法可以将html元素添加到jquery中的div？在此先感谢，何塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:55:28.110

使用 jquery，您可以刷新 div。

这是一个很好的例子：

```
<script> 
    var auto_refresh = setInterval(
    function()
    {
         $('#loaddiv').fadeOut('slow').load('reload.php').fadeIn("slow");
     }, 20000);
 </script> 
```

现在您需要将 div 放在页面的正文部分

```
<div id="loaddiv"> 
</div> 
```

来自[http://designgala.com/how-to-refresh-div-using-jquery/](http://designgala.com/how-to-refresh-div-using-jquery/)

这里还有另一个例子：

[用jquery刷新div](https://stackoverflow.com/questions/10427573/refresh-div-with-jquery)

第一个示例在您需要加载脚本并刷新时很有用，而第二个示例在您需要进行更改时很有用，例如附加 html 然后刷新，就像您的情况一样。

# php - 通过不可靠的网络连接在 MySQL 和 SQL Server 之间同步数据

> ID：13880659
> 
> 赞同：3
> 
> 时间：2012-12-14T14:31:38.427
> 
> 标签：php, mysql, sql-server

这个问题与在两个不同的服务器上同步两个数据库时实现冗余有关。首先，我将解释设置，以便您了解问题的背景。

我有两台不同的服务器，在 2 个不同的位置运行具有不同数据库类型的不同操作系统。

```
Server 1 (local server):
Windows 2003 Small Business Server OS
MSSQL DB Server
Server-Side Language - C# ASP.NET

Server 2 (website server):
Linux CentOS 6
MySQL DB
Server-Side Language - PHP 
```

服务器 1 运行软件的内部管理端，服务器 2 是外部网站接口（服务器 2 有一些管理方面 2）。不幸的是，我们经常看到我们办公室的宽带中断，这意味着两台服务器之间的通信可能并不总是可能的（我们有 3G 宽带冗余，但动态 DNS 需要时间来使用我们的新 IP 地址更新 DNS 记录）我们失去了主要的宽带）。这就是导致每台服务器都需要拥有自己的数据库的原因——因为我们不能让这两方中的一方完全脱机。

因此，我已将它构建到两台服务器中，以便它们都有自己的本地数据库，但也将任何更改应用于其他服务器。如果无法连接到其他服务器，它将查询保存到本地数据库，以便在其他服务器再次可用时可以应用查询。这留下了两个问题：

1.  关于在这样的数据库之间同步的一般要点 - 我怎样才能最好地避免在服务器重新连接时应用冲突的查询？有关我的意思的描述，请参见下面的示例 1。这个问题被最小化了，因为连接应该只丢失几分钟 - 直到 DNS 记录被更新。

2.  应用积压查询时，我希望脚本自动应用查询（而不是手动启动脚本来解决积压查询）。但是，我不确定如果用户在后台应用积压查询时离开页面会产生什么影响。

示例 1：

如果网站端（服务器 2）的用户更改了他们的电子邮件地址或电话号码等，而管理端（服务器 1）的用户更改了该用户的详细信息，那么这两个查询将具有冲突的信息。当服务器重新连接时，这两个查询将应用于另一台服务器 - 条目仍将不同步。

PS对不起，问题太长了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:36:22.990

不要重新发明数据库复制。请改用您的数据库软件提供的那个。

但是，这意味着您应该在两端切换到相同的 RDBMS。MySQL 复制在 WAN 连接上相当可靠，并且可以在平台和版本之间可靠地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:03:45.730

我同意 gertvdijk 的观点，最好的解决方案是在两台服务器上使用相同的 RDBMS（尽管我会使用 MySQL 而不是 MSSQL，因为它可以在两个主机操作系统上运行良好），然后使用该 RDBMS 的复制软件。

但是，如果您不愿意或无法这样做，我能想到的下一个最佳选择是在两台服务器上创建一个“事务日志”。最简单的是捕获UTC日期/时间和要执行的SQL命令：

```
2012-12-14 13:42:13 UPDATE users SET email = 'me2@mydomain.com' WHERE id = 13542
2012-12-14 13:43:55 UPDATE ....
... 
```

显然，您会想要使用参数化查询而不是我所展示的内容 - 我更容易解释我的想法，而不会陷入实现细节的困境。

因此，每台服务器都在记录其交易记录，突然间你失去了办公室连接。几分钟后，当它出现时，两个服务器交换它们的事务日志并将它们与自己的事务日志合并，按 UTC 日期/时间戳对所有记录进行排序。现在，您可以执行在两台服务器上发生的所有查询，而不必担心它们不同步，即使在服务器之间的连接丢失时对完全相同的列进行了更改。如果您担心在完全相同的时间更改完全相同的列，您可以将微时间放在日期/时间戳中。

# javascript - 通过 GridView 的客户端 API 访问行数据

> ID：13880664
> 
> 赞同：1
> 
> 时间：2012-12-14T14:31:53.440
> 
> 标签：javascript, asp.net, asp.net-mvc, devexpress, aspxgridview

我的 Asp.NET MVC 4 应用程序中有一个 DevExpress GridView，我想通过 JavaScript 访问客户端的行数据。目前我正在做以下事情：

指定应该将哪些值传递给 js 函数 ChangeDetailsTab：

```
function OnGridFocusedRowChanged(s, e) {
        s.GetRowValues(s.GetFocusedRowIndex(),
            'MOL_REGID;BATCH_NAME;MOL_NAME;MOL_ENTERED_BY;', ChangeDetailsTab);
} 
```

访问 ChangeDetailsTab 接收到的数组中的值：

```
function ChangeDetailsTab(rowData) {

    var molRegId= rowData[0];
    var batchName= rowData[1];
    var molName= rowData[2];
    var molEnteredBy= rowData[3];
} 
```

这种方法使得访问大量值或稍后添加/删除值变得非常糟糕，因为必须在一个大字符串中指定列名（参见示例 1 第 3 行）。

有没有人更好地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:01:16.873

这是最好的方法，当然是任何方法，你可以在 C# 代码中调用，在 CustomCallback 中你可以运行它，在客户端的 javascript 中你可以执行，这样
`ASPxGridView1.PerformCallback()`（ASPxGridView1 有一个名为的事件`CustomCallback`）你没有重新加载页面可以在 C# 代码中获取 C# 代码的值：

```
ASPxGridView1.GetRowValues(ASPxGridView1.FocusedRowIndex,"column1","column2",....) 
```

当然你记得应该从客户端的java脚本调用这个事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:08:45.413

客户端**GetRowValues**专门为此目的而设计。

我相信这是最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T05:29:15.103

**哪种方法更快？**我正在加载多个值，但由于某种原因它似乎很慢。

我正在做类似于你所拥有的设置，但我有大约 25 - 30 个值正在加载。

```
function insuranceselectionchange() {
   insuranceselection.GetRowValues(insuranceselection.GetFocusedRowIndex(), 'CarrierName;CarrierAddress;CarrierAddress2')
}

function SetInsuranceValues(values) {
   CarrierName.SetText(values[0]);
   CarrierAddress.SetText(values[1]);
   CarrierAddress2.SetText(values[2]);
} 
```

# java - 在时间间隔内从日期减去一天

> ID：13880667
> 
> 赞同：2
> 
> 时间：2012-12-14T14:32:01.467
> 
> 标签：java, android, date

我尝试在 0:00 am - 12:00 am 内的时间减去一天。

例如：`2012-12-14 06:35 am`=>`2012-12-13`

我已经完成了一个功能，它的工作。但我的问题是在这种情况下还有其他更好的代码吗？简单得多，易于理解。

```
public String getBatchDate() {

    SimpleDateFormat timeFormatter = new SimpleDateFormat("H");
    int currentTime = Integer.parseInt(timeFormatter.format(new Date()));
    SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyyMMdd");
    String Date = dateFormatter.format(new Date());

    if ( 0 <= currentTime && currentTime <= 12){
        try {
            Calendar shiftDay = Calendar.getInstance();
            shiftDay.setTime(dateFormatter.parse(Date));
            shiftDay.add(Calendar.DATE, -1); 
            Date = dateFormatter.format(shiftDay.getTime());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.d("BatchDate:", Date);
    }

    return Date;

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T14:42:38.367

```
Calendar shiftDay = Calendar.getInstance();
shiftDay.setTime(new Date())
if(shiftDay.get(Calendar.HOUR_OF_DAY) <= 12){
    shiftDay.add(Calendar.DATE, -1);
}
//your date format 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:40:07.297

使用 Calendar 类检查和修改 Date。

```
Calendar cal = new GregorianCalendar(); // initializes calendar with current time
cal.setTime(date); // initializes the calender with the specified Date 
```

用于`cal.get(Calendar.HOUR_OF_DAY)`找出一天中的小时。

用于`cal.add(Calendar.DATE, -1)`设置前一天的日期。

用于`cal.getTime()`获取存储在日历中的时间的新 Date 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:45:08.130

与几乎所有有关日期/时间的问题一样，请尝试[Joda Time](http://joda-time.sourceforge.net/)

```
public String getBatchDate() {
    DateTime current = DateTime.now();
    if (current.getHourOfDay() <= 12)
           current = current.minusDays(1); 
    String date = current.toString(ISODateTimeFormat.date());
    Log.d("BatchDate:" + date);
    return date;
} 
```

# ios - iOS：需要关于使用钥匙串、NSUserDefaults/iCloud 进行自动登录和帐户创建的建议

> ID：13880669
> 
> 赞同：2
> 
> 时间：2012-12-14T14:32:06.133
> 
> 标签：ios, passwords, keychain, account

我试图消除用户必须手动创建用户名/密码才能登录 Web 服务的负担，因此我在应用程序初始启动时自动创建用户名和密码。

所以我使用[SSKeychain](https://github.com/soffes/sskeychain)将密码存储在钥匙串中

```
[SSKeychain setPassword: myPassword forService: @"com.xxx.xxx" account: username]; 
```

并使用以下命令生成 UUID（用于用户名和密码）：

```
+(NSString *) GetUUID {
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return [(NSString *)string autorelease];
} 
```

我希望单个用户可以在其所有设备上访问这些凭据，因此我正在考虑使用 NSUserDefaults 和 iCloud 来存储用户名，以便当用户在新设备上安装应用程序的新副本时，他们的用户名可以从 iCloud 中检索，他们可以使用钥匙串访问他们的凭据，这将授予对 Web 服务的访问权限。

理想情况下，我想要以下功能

*   首次登录时，应用程序会自动生成用户名/密码
*   用户无需输入凭据，只需通过应用程序的自动帐户创建部分即可。
*   在任何设备上安装/重新安装应用程序后，他们将可以使用存储在 NSUserDefaults/iCloud 上的“用户名”访问钥匙串中的凭据

**所以我的问题是：**

*   将用户名存储在 NSUserDefaults 上会允许其他用户更改手机上的 NSUserDefaults plist 以访问其他人的帐户吗？（据我了解是肯定的）
*   是否有另一种方法来存储用户名，以便其他用户无法更改 plist 并自动登录到其他人的帐户？
*   我对钥匙串的概念有点困惑，所以根据我的理解，钥匙串是在整个应用程序中共享的（就像一个为全球所有用户提供加密数据的中央数据库（？）），所以从技术上讲，如果另一个用户可以访问到您的凭据（即，他们知道您的用户名并将 NSUserDefault 上的用户名替换为您的用户名），他们可以使用它来访问您的数据。这个对吗？（我认为钥匙串类似于 Mac，它是每个用户唯一的安全存储）。

我通常很好地理解概念，但钥匙串让我有点困惑。我已经阅读了 Apple 的钥匙串概念解释，但我无法理解它是所有用户访问的加密数据的中央存储库还是每个用户都有自己的钥匙串存储并且没有人可以访问其他人的钥匙串存储的概念，即使他们有他们的用户名/密码。

# html - CSS 在选择时更改按钮颜色

> ID：13880670
> 
> 赞同：0
> 
> 时间：2012-12-14T14:32:11.670
> 
> 标签：html, css

我是网页新手，我正在创建一个简单的网站，其中有一些页面选择器按钮。

该网站使用母版页和asp。

我希望选择的按钮在单击以识别当前选择的页面时改变颜色。该按钮应该基本上从粉红色变为灰色并保持这种状态，直到单击另一个按钮。

我已经尝试了所有常用的选项，但似乎没有任何效果，我知道这是我的无知！

**HTML 片段**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="MailTest.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title></title>
<link href='http://fonts.googleapis.com/css?family=Ropa+Sans' rel='stylesheet' type='text/css'/>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<form id="Form1" runat="server">   
    <div id="wrap">
        <div id="header">
                <img src="images/logo.gif" alt="Whamm Logo" />
        </div>
        <div id="wrap2">
            <div id="menu">
                <ul>
                    <li><a href="Default.aspx" onclick="this.classname='cClick'" class="button cColour">HOME</a></li>
                    <li><a href="About.aspx" onclick="this.classname='cClick'" class="button cColour">ABOUT US</a></li>
                    <li><a href="Services.aspx" onclick="this.classname='cClick'" class="button cColour">OUR SERVICES</a></li>
                    <li><a href="Quotes.aspx" onclick="this.classname='cClick'" class="button cColour">REQUEST A QUOTE</a></li>
                    <li><a href="Contact.aspx" onclick="this.classname='cClick'" class="button cColour">CONTACT US</a></li>
                    <li><a href="http://www.mailbigfile.com/whamm" target="_blank" class="button cColour">UPLOAD A FILE</a></li>
                </ul>
            </div>
            <div id="main">
                <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
                <!-- #BeginEditable "content" -->
                <!-- #EndEditable -->
            </div>
        </div>
            <div id="footer">
            <a href="mailto: mail@wham.co.uk" target="_blank">mail@whamm.co.uk 01509 646553</a>
        </div>
    </div>
</form>
</body>

</html> 
```

**CSS 片段**

```
html, body {
    margin: 0,0,0,0;
    font-family: 'Ropa Sans', sans-serif;
}
 #wrap {
    margin: 0 auto;
    margin-top:10px; 
    width: 800px;
}
 #header 
 {
  width:800px;
  height:145px;
 }
     img 
     {
     max-height:100%;
     -ms-interpolation-mode: bicubic;
     float:right;
     }
 #wrap2 
 {
 clear:both;
 margin:0;
 width:780px;
 }
 #menu
 {
  margin: 0;
    float:left;
    width:200px;
}
 #main {
margin: 0;
    float:right;
    width:580px;
}

ul
   {
    list-style-type:none;
    margin: 0; padding: 0;
    margin-left:5px;
    text-indent:6px;
   } 
h2 
   {
border:o; margin:0;
font-size:20px;
    color:#e5007e;
   }
/* button 
---------------------------------------------- */
.button
{
    display:block;
    width: 130px;
    height:16px;
    line-height:16px;
    margin-bottom:3px;
    margin-left:0;
    outline:none;
    cursor:pointer;
    text-align:left;
    border: solid 1px #da7c0c;
    font-size: 10px;
    text-decoration:none;

    -webkit-border-radius: .4em; 
    -moz-border-radius: .4em;
    border-radius: .4em;

}
#footer 
{
clear:both;
margin: 0;
}
 #footer a {
    float:right;
    text-decoration:none;
    font-size:13px;
    color:#e5007e;
}
.button:hover {
    text-decoration: none;
    position: relative;
    left: 2px;
}
.button:active {
    text-decoration: none;
    background-color:#9c9b9b;
}
.button.selected {
    text-decoration: none;
    background-color:#9c9b9b;    
}

/* colour */
.cColour {
    color:white;
    background-color:#e5007e;
}
.cColour:hover {
    color:white;
    background-color:green;
}
.cColour:active {
    color:white;
    background-color:#9c9b9b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:05:43.537

我可以给你一个快速简单的方法。在每一页上放这个脚本：

*如果你想要纯 Javascript：*

```
<script>
     document.getElementById("buttonID").className += " hover";
</script> 
```

*如果你想要 JQuery：*

```
<script>
     $(document).ready(function(){
       $('#buttonID').addClass('hover');
     });
</script> 
```

`hover`是选择按钮时要应用的类。请记住更改按钮ID。

加载页面后，它将`hover`在相应按钮上应用该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:02:27.807

我对 ASP 一无所知，但这个概念在任何语言中都应该是相同的。工作流程类似于：

1.  找出当前的 URL
2.  将当前 URL 与菜单项的 URL 进行比较
3.  如果它们相同，请给这个菜单项一个特殊的类，比如“活动”或“选择”*你*
    *的 CSS 应该有一个规则`.active``.selected`*

这是一个有正确想法的帖子：
[http ://www.webdeveloper.com/forum/showthread.php?96221-Highlight-Menu-item-of-Current-Page-using-ASP](http://www.webdeveloper.com/forum/showthread.php?96221-Highlight-Menu-item-of-Current-Page-using-ASP)

取自这篇文章：

```
function writeMenu()

    dim i,linkclass,pagename,myMenuItems()

    redim myMenuItems(4)

    myMenuItems(0) = Array("First Page","first.asp")
    myMenuItems(1) = Array("Second Page","second.asp")
    myMenuItems(2) = Array("Third Page","third.asp")
    myMenuItems(3) = Array("Fourth Page","fourth.asp")
    myMenuItems(4) = Array("Fifth Page","fifth.asp")

    pagename = getPageName()

    for i = 0 to ubound(myMenuItems)

        if ucase(myMenuItems(i)(1)) = pagename then
            linkclass = " class=""selected"""
        else
            linkclass = " class=""notselected"""
        end if      

        response.write "<a" & linkclass & " href=""" & myMenuItems(i)(1) & """>" & myMenuItems(i)(0) & "</a><br>"

    next

end function

function getPageName()

    dim scriptArr

    scriptArr = split(request.servervariables("script_name"),"/")

    getPageName = ucase(scriptArr(ubound(scriptArr)))

end function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:52:51.010

我不太了解，但如果你使用模板，那么我会使用这个原则：

1.  使用您想要的样式在您的 css 中创建一个选定的类。
2.  在每个页面上，将 page_id 的变量设置为页面的任何内容，例如：page_id="home" 3 在每个标签上的导航模板中，使用 if 语句，例如：if(page_id="home") print "class=selected"

沿着这些路线的东西应该这样做，我不知道 asp 但逻辑就在那里。

# shell - ImageMagik 不会在 shell 中转换

> ID：13880680
> 
> 赞同：0
> 
> 时间：2012-12-14T14:32:33.140
> 
> 标签：shell, unix, imagemagick

我正在尝试对图片应用效果，但我的 shell 命令返回一个错误，但我没有看到它。有人看看有什么问题吗？

我的命令：

```
convert ( /var/www/folder/img.jpg -modulate 120,50,100 ) ( -size 980x650 -fill rgba(255,153,0,0.5) -draw "rectangle 0,0 980,650" ) -compose multiply /var/www/folder/f3-img.jpg ; 
```

错误

```
:syntax error near unexpected token `/var/www/folder/img.jpg' 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:41:16.407

方括号 () 是 Bash 命令行中的特殊命令。当它们围绕一个命令时，它们会生成一个新的外壳，或者（感谢@pabouk）它们发出一个函数定义的信号。也不适合您。

底线是括号 () 对于 bash shell 具有特殊含义，因此您需要对括号进行转义，在它们前面加上反斜杠，这样 bash 就不会尝试解释它们：

\（ 和 \）

# svg - 添加到 Raphael 组触发事件的 SVG 形状就像是分开的一样

> ID：13880682
> 
> 赞同：3
> 
> 时间：2012-12-14T14:32:44.607
> 
> 标签：svg, mouseevent, raphael

**想象一下：**

*   2 个同心圆，较小的圆位于较大的圆上，以便两者都可见
*   两者都添加到 Raphael 组（集）
*   该组具有 mouseout 和 mouseover 事件处理程序

**问题：**
当光标从一个圆圈移动到另一个圆圈时，两个事件处理程序都会触发，就好像它们分别添加到每个圆圈一样。

我想要的是为整个组处理事件，就好像它是一个单一的形状一样。
我怎样才能做到这一点？

这是html代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.0.0/raphael-min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div id="target"></div>
</body>
</html> 
```

Javascript：

```
var W=200;
var H=200;
var paper=new Raphael(document.getElementById('target'),W,H);
var c1=paper.circle(W/2,H/2,70).attr({fill:'orange','stroke-width':4,stroke:'red',opacity:0.7});
var c2=paper.circle(W/2,H/2,50).attr({fill:'green','stroke-width':4,stroke:'yellow',opacity:0.7});
var group=paper.set();
group.push(c1,c2);

var count=0;

group.mouseover(function()
{
  console.log('IN',++count);
});
group.mouseout(function()
{
  console.log('OUT',++count);
}); 
```

和CSS代码：

```
#target{width:200px;} 
```

运行上面的代码并在此处查看结果：http: [//jsbin.com/ivules/7](http://jsbin.com/ivules/7)。

控制台显示 IN 和 OUT 日志。
只需在两个圆圈的边界之间移动鼠标即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:35:30.247

对于您的 mouseout() 函数，请尝试：

```
group.mouseout(function()
{
  this.mouseout(function(){
    console.log('OUT',++count);
  });
}); 
```

当您将鼠标悬停在外圈上时，您将获得“IN”。当您将鼠标悬停在内圈上时，您将再次获得“IN”。当你完全离开这个圈子时，你最终会得到“OUT”。

如果“IN”太多，请尝试创建一个不可见的圆圈，将其放在当前 2 个圆圈的顶部，然后只将鼠标悬停事件添加到该圆圈。例如，尝试： `c3=paper.circle(W/2,H/2,70).attr({fill:'orange','stroke-width':4,stroke:'red',opacity:0});`

```
c3.mouseover(function()
{

    console.log('IN',++count);

});

c3.mouseout(function()
{

    console.log('OUT',++count);

}); 
```

# asp.net-mvc - 来自asp.net mvc应用程序的jquery ajax调用

> ID：13880683
> 
> 赞同：1
> 
> 时间：2012-12-14T14:32:44.730
> 
> 标签：asp.net-mvc, jquery

我正在尝试从 jQuery 调用一个动作。动作应该返回真或假，根据返回值我会做一些事情。

我有以下代码。

```
 $("#payment").click(function (e) {
       if($("#deliverytime").attr("disabled")){
            //something here...   
        }
        else
        {
            var postcode=$('#Postcode').val();
            var restId='<%:ViewBag.RestaurantId %>';
            var URL = "/Restaurant/DoesRestaurantDeliver?restid="+restId+"&&postcode="+postcode;

            $.ajax({
                 type: "GET",
                 url: URL
             }).done(function(msg) {
                        if(msg==true){
                             $('#commonMessage').html(msg);
                             $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
                             return false;
                        }
                        else{
                            $('#commonMessage').html(msg);
                             $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
                             return false;
                        }
            }); 

        }
    }); 
```

代码不起作用。它说`'msg' is not defined`。这不是我应该使用 jQuery-ajax 的方式吗？我究竟做错了什么？

## 编辑：

控制器动作

```
public JsonResult DoesRestaurantDeliver(Int32 restid, string postcode)
    {

        if (rest.getDeliveryPriceForPostcode(restid, postcode) == null)
        {
            return Json(Boolean.FalseString, JsonRequestBehavior.AllowGet);
        }
        else
            return Json(Boolean.TrueString, JsonRequestBehavior.AllowGet);
    } 
```

## 修改功能

```
var postcode = $('#DeliveryInfo_Postcode').val();
            var restId = '<%:ViewBag.RestaurantId %>';
            var URL = "/Restaurant/DoesRestaurantDeliver?restid=" + restId + "&&postcode=" + postcode;
            $.ajax({
                url: URL,
                dataType: "json",
                type: "GET",
                data: "{}",
                success: function (data) {
                    if (!data.hasError) {
                        $('#commonMessage').html(data);

                        return false;
                    }
                }
            }); 
```

## 编辑-2

```
<script>
$(document).ready(function () {
    $("#checkout").click(function (e) {
        getDeliveryInfo();
    });
});
function getDeliveryInfo() {
    var URL ="/Restaurant/DoesRestaurantDeliver/6/2259"
    $.get(URL, function (data) {
        alert(data.isValid);
    });
}
</script>
<%using (Html.BeginForm())
 { %>
<input type="submit" name="submit" id="checkout"/>
<%} %> 
```

上面的代码不起作用。但是，如果我将“结帐”按钮放在下面的表格之外，它就可以工作。

```
<%using (Html.BeginForm())
 { %>

<%} %>
<input type="submit" name="submit" id="checkout"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:38:30.243

您可以配置您的**ajax 调用，如下所示**。

我觉得你的 ajax 调用在`.done(function(msg) {}`区域上有问题。

尝试 `success: function (data) {}`如下设置。

```
<script type="text/javascript">

    $(function () {

        var companyName = $("#companyname");

        $.ajax({
            url: "/Company/GetName",
            dataType: "json",
            type: "GET",
            data: "{}",
            success: function (data) {
                if (!data.hasError) {
                    companyName.html(data.companyName);
                }
            }
        });
    });

</script> 
```

**编辑**

**操作方法**应如下所示（这是一个示例。根据您的情况进行调整）

```
 [HttpGet]
 public JsonResult GetName(string term)
        {
            var result = Repository.GetName(term);
            return Json(result, JsonRequestBehavior.AllowGet);
        } 
```

**编辑 2**

我会使用**匿名对象（isValid）**（记住**JSON 是一个键/值对**）：

**动作方法**

```
 [HttpGet]
   public JsonResult DoesRestaurantDeliver(Int32 restid, string postcode)
    {
       if (rest.getDeliveryPriceForPostcode(restid, postcode) == null)
        {
            return Json(new { isValid = false},JsonRequestBehavior.AllowGet);
        }
        else
            return Json(new { isValid = true },JsonRequestBehavior.AllowGet);
    } 
```

**然后在ajax方法里面：**

```
success: function(data) {
    if (data.isValid) {
        ...
    }
} 
```

**编辑 3**

只需如下**更改您的按钮类型**。（因为您没有从表单发送任何值）

```
<input type="button" name="submit" id="checkout"/> 
```

# python - 安装 pyqt IDE

> ID：13880685
> 
> 赞同：1
> 
> 时间：2012-12-14T14:32:55.143
> 
> 标签：python, ide, qt4, pyqt

我安装了 python 2.7 和 pyqt4 并下载了 eric4 IDE，但无法安装它，因为它说我缺少 pyqt4.qtcore。我该如何解决？我使用 Windows 7

这是我尝试安装 eric4 时的控制台输出：

> C:\Users\username\Desktop\eric4-4.5.7>python install.py
> 
> 检查依赖项
> 
> Python版本：2.6.5
> 
> 抱歉，请安装 PyQt4。
> 
> 错误：没有名为 PyQt4.QtCore 的模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:42:33.167

确保您正确安装了 PyQt4 和 python 2.7。如果 python 2.7 是最新安装的，它应该是默认的。否则使用显式文件路径，例如

```
D:\python27\python.exe 
```

并在 shell 中运行它时检查它是否显示“python 2.7”。

请注意，PyQt4 在其下载的安装程序或存档文件名中有 python 版本。（您实际上是如何安装它的？）

如果 PyQt4 安装正确，那么这应该可以工作，所以请先尝试：

```
>>> from PyQt4 import QtCore 
```

之后一切正常，运行安装脚本，并按照我上面显示的方式*使用正确的 python 版本* 。

# date - gnuplot X 和 Y 值在单独的行中

> ID：13880687
> 
> 赞同：1
> 
> 时间：2012-12-14T14:33:02.030
> 
> 标签：date, gnuplot

我正在尝试这样`gnuplot`的数据集

```
Di 4\. Dez 19:10:09 CET 2012
Garbage
 description: 10.5  description2: 22.3
Mi 5\. Dez 01:51:15 CET 2012
Garbage
 description: 10.5  description2: 22.4 
```

那些 3 行块重复几次。我想使用第 1、4、7 行等的时间为第 3、6、9 行等（作为 Y 值）每隔一列的实际数据提供日期（作为 X 值）。最后，情节应由以下几行组成（以 [X,Y] 格式）[1,3],[1,6],[1,9],[4,3],[4,6 ]，[4,9] 等。从我[在这里](https://stackoverflow.com/questions/10881747/how-to-plot-specific-rows-in-gnuplot)读到的内容，可以使用[每一个](https://www.physics.iitm.ac.in/~sanoop/linux_files/gnuplot-every.html)，但我不知道如何使用。

编辑：感谢 user1901493 的提示，我解决了下面的 timefmt 问题。忽略下面的问题（没有删除它以供参考）。

一个只有第一行`set timefmt "%d %b %H:%M:%S"`和的测试`using 2:6`也不起作用，抱怨月份缩写不好。不过，这[应该可行](http://gnuplot.sourceforge.net/docs_4.2/node274.html)。不过，这可能是问题的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:14:15.267

糟糕的月份缩写可能来自 gnuplot 不理解德语 Dez 的事实。缩写，所以用 dec 代替 Dez 再试一次。

其次，我认为 gnuplot 仅使用列中的数据，因此使用您的格式的文件：

```
x1
...
y1 z1
x2
...
y2 z2 
```

可能根本不起作用。我建议你用 grep 之类的东西重新排列你的数据文件，使你的数据文件看起来像这样：

```
x1 y1 z1
x2 y2 z2 
```

# java - Java 堆空间异常

> ID：13880693
> 
> 赞同：-7
> 
> 时间：2012-12-14T14:33:14.123
> 
> 标签：java, netbeans

```
 Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
at masterCustomer.initComponents(masterCustomer.java:32)
at masterCustomer.<init>(masterCustomer.java:11)
at MainFrame.<init>(MainFrame.java:19)
at loginForm.<init>(loginForm.java:17)
at MainFrame.<init>(MainFrame.java:20)
at loginForm.<init>(loginForm.java:17)
at MainFrame.<init>(MainFrame.java:20)
at loginForm.<init>(loginForm.java:17)
at MainFrame.<init>(MainFrame.java:20)
at loginForm.<init>(loginForm.java:17) 
```

有谁知道如何解决这个问题？这个问题发生在我从netbeans生成setter和getter之后......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:37:18.437

问题是`loginForm`需要引用`MainFrame`, 反之亦然。你会在这 2 行得到一个无限循环：

```
 loginForm.java:17
 MainFrame.java:20 
```

# javascript - 滑块在切换时自动将页面拉回顶部

> ID：13880698
> 
> 赞同：0
> 
> 时间：2012-12-14T14:33:37.257
> 
> 标签：javascript, jquery, scroll, slider, rotator

我们在我们的 Drupal 6 站点上使用了最近 CSS 修改的带有 jQ​​uery 的特色内容旋转器 (http://demo.webdeveloperplus.com/featured-content-slider/)。

如果用户向下滚动以阅读页面底部的内容，一旦滑块自动切换到下一个内容片段，每次切换时页面都会立即跳回滑块容器的一半。

唯一不会发生这种情况的情况是查看者是登录管理员（假设是因为运行了额外的后端脚本）。

知道什么可能导致这种情况或如何阻止它吗？

提前非常感谢！

```
<script type="text/javascript">
$(document).ready(function(){
    $("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);
});
</script>
<div id="featured">
<ul class="ui-tabs-nav">
    <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-1">
        <a href="#fragment-1"><img alt="" src="image-tn-1.jpg" /><span>Title 1</span></a></li>
    <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-2">
        <a href="#fragment-2"><img alt="" src="image-tn-2.jpg" /><span>Title 2</span></a></li>
    <li class="ui-tabs-nav-item" id="nav-fragment-3">
        <a href="#fragment-3"><img alt="" src="image-tn-3.jpg" /><span>Title 3</span></a></li>
    <li class="ui-tabs-nav-item" id="nav-fragment-4">
        <a href="#fragment-4"><img alt="" src="image-tn-4.jpg" /><span>Title 4</span></a></li>
</ul>
<!-- First Content -->
<div class="ui-tabs-panel ui-tabs-hide" id="fragment-1" style="">
    <a href="/" onClick="_gaq.push(['_trackEvent', 'Rotator', 'Image', 'Content-1']);"><img src="image-1.jpg" /></a>
</div>
<!-- Second Content -->
<div class="ui-tabs-panel ui-tabs-hide" id="fragment-2" style="">
    <a href="/" onClick="_gaq.push(['_trackEvent', 'Rotator', 'Image', 'Content-2']);"><img src="image-2.jpg" /></a>
</div>
<!-- Third Content -->
<div class="ui-tabs-panel ui-tabs-hide" id="fragment-3" style="">
    <a href="/" onClick="_gaq.push(['_trackEvent', 'Rotator', 'Image', 'Content-3']);"><img src="image-3.jpg" /></a>
</div>
<!-- Fourth Content -->
<div class="ui-tabs-panel ui-tabs-hide" id="fragment-4" style="">
    <a href="/" onClick="_gaq.push(['_trackEvent', 'Rotator', 'Image', 'Content-4']);"><img src="image-4.jpg" /></a>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:45:25.960

固定的！只需要为旋转器空间设置一个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:11:17.783

谢谢你的回答 Erin H. 它的工作奇迹:) 对于像我这样的新人很难弄清楚它应该是这样的。我在旋转器空间的末端添加了高度，它起作用了。

```
#rotator {
    background:#FFF;
    color:#000; 
    position:relative;
    padding-bottom:2.6em;
    margin:0; 
    font-size:16px;
--> height:275px;
} 
```

# javascript - 使用 zclip 单击两次按钮后，复制剪贴板正在工作

> ID：13880706
> 
> 赞同：2
> 
> 时间：2012-12-14T14:34:14.317
> 
> 标签：javascript, jquery, zeroclipboard, zclip

不知道为什么我的下面不能单击一次，它需要两次单击才能被复制。

```
<html>
<body>
<script type="text/javascript" src="JQuery.js"></script>
<script type="text/javascript" src="zClip.js"></script>

<textarea id="fe_text" cols="50" rows="5"></textarea>

<input type="button" id="copyTxt" name="copyTxt" value="Copy Div to Clipboard" />

    <script language="JavaScript">
    $(document).ready(function()
    {       
        $('#copyTxt').click(function()
            {
               //alert($('#fe_text').val());
               $(this).zclip(
               {
                   path: 'ZeroClipboard.swf',
                   copy: $('#fe_text').val(),
                   afterCopy: function()
                   {
                       console.log($('#fe_text').val() + " was copied to clipboard");
                   }
               });
            });
    });

    </script>
</body>
</html> 
```

请高手指点，可能是什么原因

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:41:56.160

您的代码将 zclip 设置为在点击一次后开始观察点击。

```
$(document).ready(function()
{       
    //$('#copyTxt').click(function()
    //    {
           //alert($('#fe_text').val());
           $('#copyTxt').zclip(
           {
               path: 'ZeroClipboard.swf',
               copy: function(){ return $('#fe_text').val(); },
               afterCopy: function()
               {
                   console.log($('#fe_text').val() + " was copied to clipboard");
               }
           });
    //    });
}); 
```

如果您查看[他们的文档](http://www.steamdev.com/zclip/#usage)，它会显示 zclip 插件在内部被直接调用`$(document).ready`。

# python - 如何在两个端口或线程中运行 Flask

> ID：13880707
> 
> 赞同：3
> 
> 时间：2012-12-14T14:34:15.953
> 
> 标签：python, flask

我想运行一个监听两个不同端口的 Flask 实例，我的意思是，一些操作在端口 8080 和其他在 8090。有没有办法做到这一点？O 也许在线程中运行两个 Flask 应用程序实例？

添加上下文：基本上，我需要模拟生产环境，其中核心功能位于端口 8080 上，但由于某些安全限制，我需要为某些特定客户端的某些操作 (8090) 使用代理

例如，我的意思是在 8080 上

*   /存储库/{id}

几乎所有客户端都使用此操作，但是，某些特定客户端需要使用代理。例如在 8090 上

*   /reposproxy?method="get"&resource="repository"&query="id="xxxx"

基本上，拨打8080。

此外，我尝试为 app.run() 分叉或创建一个线程，但我无法成功运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:32:27.430

我使用多处理 python 功能使用 Fork(process) 方法解决了问题。我定义了应用 Flask 然后运行来处理

```
def info(title):
    print(title)
    print('module name:', __name__)
    if hasattr(os, 'getppid'):  # only available on Unix
        print('parent process:', os.getppid())
    print('process id:', os.getpid())

def startServer(inDebug, port):
    print "Starting Main Mock Server"
    app.run(debug=inDebug, port=port)

def startProxyServer(inDebug, port):
    print "Starting JSONP Mock Server Proxy"
    appJsonp.run(debug=inDebug, port=jsonpPort)

if __name__ == '__main__':
    info('Main Line Starting')
    p = mp.Process(target=startServer, args=(False, port))
    p.deamon = True
    p.start()
    p1 = mp.Process(target=startProxyServer, args=(False, port))
    p1.deamon = True
    p1.start()
    p.join()
    p1.join() 
```

# c# - Scrollview 和 Mozilla PDF.js 的滚动错误

> ID：13880713
> 
> 赞同：0
> 
> 时间：2012-12-14T14:34:50.557
> 
> 标签：c#, css, html, razor, kendo-ui

我正在开发一个移动应用程序，其中包含使用 PDF.js (Mozilla) 呈现的 PDF 文档中的滚动视图。

问题是滚动视图不允许我们向下滚动，我们只能看到 pdf 文件的一部分。

这是一个显示问题的示例项目：[http ://www.mediafire.com/?9md21u9zy56dwkd](http://www.mediafire.com/?9md21u9zy56dwkd)

任何的想法 ？提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:23:43.097

Kendo ui 需要页面的 div 来设置其宽度和高度。PDF.js 没有设置宽度和高度，我也没有找到如何获取 PDF 的宽度和高度。

因此，从现在开始，它似乎不兼容。

# database - 在 Access 中使用 DLookUp 函数的问题

> ID：13880722
> 
> 赞同：2
> 
> 时间：2012-12-14T14:35:39.017
> 
> 标签：database, vba, ms-access

好的，所以我的主表单上有一个文本框，我希望它显示从下拉列表中选择的产品数量。

现在有一个复杂的情况，每个产品有 3 个库存位置，但这被简化了，因为我在一个产品的同一记录上存储了 3 个不同的级别，具有不同的列名。

所以我需要做的是搜索正确列的名称以找到正确的库存位置（再次从下拉列表中）。

我的库存级别列标题存储在变量“分支”中，该变量是一个字符串。

这是我的代码。

```
Me.txtSourceDescQty.Value = DLookup(Branch, "[products/stock]", "[Product Code] = " & Me.cmbSource.Value) 
```

![错误信息](../Images/f8747e9e12ebeedbf190ca7c04d3cbe1.png)

这是我得到的错误。“库存水平”是库存位置之一的列标题，存储在代码行中的变量“分支”下。

`cmbSource`是选择产品代码的组合框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:44:23.913

我认为`Me.cmbSource.Value`需要出现在引号中：

```
Me.txtSourceDescQty.Value = DLookup(Branch, "[products/stock]", "[Product Code] = '" & Me.cmbSource.Value & "'") 
```

# python - 带有 RUSAGE_CHILDREN 的 Python getrusage 行为异常？

> ID：13880724
> 
> 赞同：0
> 
> 时间：2012-12-14T14:35:40.693
> 
> 标签：python, getrusage

最近我计划开发一个在线裁判系统（如[spoj](http://spoj.com)）。我已经用python编写了一个判断脚本。它每收到一个提交的代码就分叉，然后编译代码并用于`subprocess.Popen`启动程序。但是当我使用 获取程序的内存使用情况时`resource.getrusage(resource.RUSAGE_CHILDREN)`，它会返回分叉的 python 进程而不是子进程的内存。

下面是我的一些代码：

```
try:
    programThread = subprocess.Popen(command, stdin = subprocess.PIPE, stdout = subprocess.PIPE, stderr = subprocess.PIPE, preexec_fn = self.limit, bufsize = -1)
except OSError:
    self.status.value = -2
    return -2
self.JudgeID.value = programThread.pid
programOutput = programThread.communicate(_in)
self.status.value = 0
Res = resource.getrusage(resource.RUSAGE_CHILDREN)
self.cpuusage.value = Res.ru_utime + Res.ru_stime
self.memoryusage.value = Res.ru_maxrss * resource.getpagesize() 
```

`cpuusage`并且`memoryusage`是由 创造的共享内存`multiprocessing.Value`，其值为`memoryusage`12M。但是通过`top`，我发现，分叉的python进程的内存使用量是12M，而子进程是900K。我的代码有什么问题吗？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:46:08.117

这是`maxrss`因为它是孩子的​​ RSS 使用量的最大值。问题是它`subprocess`使用标准的方式来创建子进程：它首先分叉，创建一个新的进程 id ( `childpid`)，然后`execv`是预期的子进程的可执行文件（这不会改变`childpid`）。然后`resource`返回 this 生命周期中 RSS 的最大值`childpid`。如果这个孩子同时运行一个 12MB 的 Python 分叉副本和另一个 900K 的程序，那么结果是 12MB。

我真的不知道如何解决这个问题......

# android - 动画视图滑出另一个视图，将下面的视图推开

> ID：13880727
> 
> 赞同：25
> 
> 时间：2012-12-14T14:35:44.157
> 
> 标签：android, android-animation

我有一个按钮列表。当我按下按钮时，视图应该以向下的方式滑出按钮，如下所示：

开始：
![在此处输入图像描述](../Images/56dcd220550533fb7576d1bfd6748049.png)

半：
![在此处输入图像描述](../Images/11ba22b676f8ac9ab2b35b924064ccc3.png)

结尾：
![在此处输入图像描述](../Images/e272b4dd7937832cba3cd0c62e2df448.png)

我该怎么办？应该滑出的 View 比按钮大，所以首先将 View 隐藏在按钮后面，然后向下滑动会使 View 在按钮上方可见。那不应该发生。

关于如何解决这个问题的任何想法或例子？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-21T05:01:34.247

我相信最简单的方法是扩展`Animation`类并覆盖`applyTransformation()`以更改视图的高度，如下所示：

```
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.Animation;
import android.view.animation.Transformation;
import android.widget.LinearLayout;

public class MyCustomAnimation extends Animation {

    public final static int COLLAPSE = 1;
    public final static int EXPAND = 0;

    private View mView;
    private int mEndHeight;
    private int mType;
    private LinearLayout.LayoutParams mLayoutParams;

    public MyCustomAnimation(View view, int duration, int type) {

        setDuration(duration);
        mView = view;
        mEndHeight = mView.getHeight();
        mLayoutParams = ((LinearLayout.LayoutParams) view.getLayoutParams());
        mType = type;
        if(mType == EXPAND) {
            mLayoutParams.height = 0;
        } else {
            mLayoutParams.height = LayoutParams.WRAP_CONTENT;
        }
        view.setVisibility(View.VISIBLE);
    }

    public int getHeight(){
        return mView.getHeight();
    }

    public void setHeight(int height){
        mEndHeight = height;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {

        super.applyTransformation(interpolatedTime, t);
        if (interpolatedTime < 1.0f) {
            if(mType == EXPAND) {
                mLayoutParams.height =  (int)(mEndHeight * interpolatedTime);
            } else {
                mLayoutParams.height = (int) (mEndHeight * (1 - interpolatedTime));
            }
            mView.requestLayout();
        } else {
            if(mType == EXPAND) {
                mLayoutParams.height = LayoutParams.WRAP_CONTENT;
                mView.requestLayout();
            }else{
                mView.setVisibility(View.GONE);
            }
        }
    }
} 
```

要使用它，请将您的设置`onclick()`如下：

```
int height;

@Override
public void onClick(View v) {
    if(view2.getVisibility() == View.VISIBLE){
        MyCustomAnimation a = new MyCustomAnimation(view2, 1000, MyCustomAnimation.COLLAPSE);
        height = a.getHeight();
        view2.startAnimation(a);
    }else{
        MyCustomAnimation a = new MyCustomAnimation(view2, 1000, MyCustomAnimation.EXPAND);
        a.setHeight(height);
        view2.startAnimation(a);
    }
} 
```

问候。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:54:07.633

使用类似的东西：

```
 Animation a = new ScaleAnimation(1, 1, 0, 1, Animation.RELATIVE_TO_SELF, (float) 0.5,    Animation.RELATIVE_TO_SELF, (float) 0);
 a.setFillAfter(true);
 view.setAnimation(a);
 a.setDuration(1000);
 view.startAnimation(a); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T14:10:04.397

这是手工动画的简单示例，可提供您想要的。它适用于测试应用程序，但我不确定是否有错误：

```
public class MainActivity extends Activity implements OnClickListener {
private Timer timer;
private TimerTask animationTask;
private View view1;
private View view2;
boolean animating;
boolean increasing = true;
int initHeight = -1;
private LayoutParams params;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    timer = new Timer();

    view1 = findViewById(R.id.view1);// clickable view
    view1.setOnClickListener(this); 

    view2 = findViewById(R.id.view2);// animated view
    params = view2.getLayoutParams();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    timer.cancel();
}

@Override
public void onClick(View v) {
    Toast.makeText(this, "start animating...", Toast.LENGTH_SHORT).show();

    animationTask = new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    if (animationFinished()) {
                        animating = false;
                        cancel();//canceling animating task
                        return;
                    }
                    params.height += increasing ? 1 : -1;
                    view2.setLayoutParams(params);
                }
            });
        }

        private boolean animationFinished() {
            int viewHeight = view2.getHeight();
            if (increasing && viewHeight >= initHeight) {
                return true;
            }
            if (!increasing && viewHeight <= 0) {
                return true;
            }
            return false;
        }
    };

    //if we already animating - we just change direction of animation
    increasing = !increasing;
    if (!animating) {
        animating = true;
        int height = view2.getHeight();

        params.height = height;
        view2.setLayoutParams(params);//change param "height" from "wrap_conent" to real height

        if (initHeight < 0) {//height of view - we setup it only once
            initHeight = height;
        }
        timer.schedule(animationTask, 0, 10);//changing repeat time here will fasten or slow down animation
    }
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T13:11:07.473

也许您可以将高度设置为0并逐渐增加高度。但是你会遇到一个问题，你必须确保你的文本在视图的底部对齐。并且还要知道视图的最大高度应该是多少。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T14:52:12.177

使用滑动列表适配器比弄乱动画容易得多

[https://github.com/tjerkw/Android-SlideExpandableListView](https://github.com/tjerkw/Android-SlideExpandableListView)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-25T09:55:17.253

只需传递`android:animateLayoutChanges`给包含所有视图的 LinearLayout，您将获得所需的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T14:43:17.387

我会那样做。首先是整个可折叠面板组件的布局：（伪xml）

```
RelativeLayout (id=panel, clip)
    LinearLayout (id=content, alignParentBottom=true)
    LinearLayout (id=handle, above=content) 
```

这应该确保内容始终位于句柄下方。

然后当你需要折叠时：

*   动画内容的上边距从 0 到 -content.height
*   将面板的高度从 current 设置为 current-content.height

# c++ - 纯虚最终函数：在 C++11 中合法

> ID：13880728
> 
> 赞同：24
> 
> 时间：2012-12-14T14:35:47.623
> 
> 标签：c++, c++11, final, pure-virtual

```
class Foo
{
public: 
    virtual int foo() final = 0;
}; 
```

编译良好。

不`Foo`只是浪费空间，而且正在制造事故吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T15:08:48.737

正如你所说，这**几乎完全是浪费空间。**至少有一个公认的人为的用法。顺便说一句，它编译的事实并不奇怪。只要代码是合法的，编译就不需要“有意义”。

假设您想`Foo`用作策略。这意味着它将用作模板参数，但不需要实例化。实际上，您真的*不希望*任何人实例化该类（尽管我承认我不知道为什么，这会造成什么伤害）。

这正是您在这里所拥有的。一个类，其类型您可以使用，但您不能实例化它（尽管将构造函数设为私有可能会更直接）。

作为额外的奖励，您可以`enum`在类范围内添加 s 或静态函数。这些可以在没有实际实例化的情况下使用，并且它们将位于该类的命名空间中。所以，你有一个主要只能用作类型的类，但你仍然有“一些功能”以静态函数的形式与它捆绑在一起。

大多数时候，人们可能只是将这些东西包装到命名空间中，但谁知道，在某些情况下，这可能是理想的方式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T14:47:33.373

> Foo 不只是浪费空间吗

它的确是; 你不能实例化它，因为它是抽象的，你不能重写这个函数来创建一个非抽象的派生类。

如果您出于某种原因想要这样做，它可以用作防止类被实例化的一种方式；但即便如此，删除默认构造函数可能更有意义。

> 和正在发生的事故？

并不真地。既然你不能对这个类做任何事情，你就不能对它做任何错事。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T14:55:39.177

如果我正确阅读了 9.2 中的语法，这实际上是合法的，尽管我可能在注释中遗漏了一些禁止它的内容。

> 成员声明符：声明符 virt-specifier-seq(opt) 纯说明符(opt)

然后它表明`virt-specifier-seq`可以是`final`并且`pure-specifier`是`= 0`

我看不出这有什么用处，尽管可能有一些角落案例可以利用它。

# java - Apache POI 依赖项？

> ID：13880731
> 
> 赞同：2
> 
> 时间：2012-12-14T14:36:19.183
> 
> 标签：java, apache-poi

我找不到我的项目有什么问题。我正在尝试为我正在制作的 word 文档创建一个标题，但是当我尝试这些代码行时：

```
 XWPFHeader header = document.getHeaderFooterPolicy().getFirstPageHeader();
    XWPFRun headRun = header.getParagraphArray(1).createRun();
    headRun.setText("SOME TEXT"); 
```

我收到以下错误：

```
Error(55,20): XmlString not found  in interface org.openxmlformats.schemas.wordprocessingml.x2006.main.STHdrFtr in class org.apache.poi.xwpf.model.XWPFHeaderFooterPolicy in class ****.***.*****.MyDocument
Error(55,20): StringEnumAbstractBase not found  in class org.openxmlformats.schemas.wordprocessingml.x2006.main.STHdrFtr.Enum in class org.apache.poi.xwpf.model.XWPFHeaderFooterPolicy in class ****.***.*****.MyDocument 
```

我试图搜索错误消息，但我什么也没找到，有人可以帮我吗？如果有人能告诉我解决这些问题的有效方法，我将特别感激，谷歌搜索错误消息一直对我有用，但这次不行。我不知道如何通过其中的类找到一个罐子（因为它似乎是缺少的）。

谢谢。

PS。这是我第一次尝试创建文档，所以代码可能完全错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:55:22.950

查看[Apache POI 组件](http://poi.apache.org/overview.html#components)和此[常见问题解答](http://poi.apache.org/faq.html#faq-N10025)。你肯定错过了一些东西。

# php - jquery.ui.selectmenu 重定向到索引页面而不是提交表单

> ID：13880738
> 
> 赞同：0
> 
> 时间：2012-12-14T14:37:01.890
> 
> 标签：php, jquery, html, jquery-ui, opera

我在我的网站上使用`jquery.ui.selectmenu.js`插件进行自定义选择。
我的选择绑定了 onchenge 事件`$(this).closest('form').submit();`
问题是在**Opera**中它不提交表单 - 它重定向到索引页面并添加`#nogo`到 url。
我在插件中找到了原因。
那里有这样的代码：

```
 this.newelement = $( '<a />', {
        'class': this.widgetBaseClass + ' ui-widget ui-state-default ui-corner-all',
        'id' : this.ids[ 1 ],
        'role': 'button',
        'href': '#nogo',
        'tabindex': this.element.attr( 'disabled' ) ? 1 : 0,
        'aria-haspopup': true,
        'aria-owns': this.ids[ 2 ]
    }); 
```

问题是 - 我应该`#nogo`用什么来修复它？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:13:10.977

答案是`javascript:void(0);`

# c++ - 如何在 C++ Web 服务中缓存 MySQL 表

> ID：13880740
> 
> 赞同：0
> 
> 时间：2012-12-14T14:37:08.290
> 
> 标签：c++, mysql

我有一个大用户表，我在 C++ Web 服务（BitTorrent 跟踪器）中缓存。每 5 分钟重新获取整个表。这有一些缺点，例如数据最多 5 分钟旧和重新获取大量未更改的数据。有没有一种简单的方法来获取自上次以来的更改？理想情况下，我不必更改更新数据的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:02:04.383

我想到了两种直接的可能性：

1.  MySQL 查询缓存
2.  Memcached（或类似）缓存层

我会先尝试查询缓存，因为它可能更容易设置。做一些基本的测试/基准测试，看看它是否符合您的需求。Memcached 可能与您现有的缓存非常相似，但正如您所提到的，您将找到一种更好的方法来使过时的缓存条目无效（查询缓存为您做的事情）。

# windows - 从批处理检查 Visual Studio Shell 安装

> ID：13880742
> 
> 赞同：3
> 
> 时间：2012-12-14T14:37:23.317
> 
> 标签：windows, visual-studio, batch-file, visual-studio-shell

我们如何通过批处理脚本检查是否安装了 Visual Studio Shell 以及安装了哪个版本？

我知道我们可以检查文件/文件夹的存在，比如

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE 
```

但我正在寻找更优雅和通用的解决方案。

有什么帮助吗？

***更新接受的答案：***

您的回答很优雅，可以完成任务。由于我专门检查某些版本，因此我正在使用（在检查您提供的链接之后）：

```
@echo off
reg query "HKEY_CLASSES_ROOT\VisualStudio.DTE.10.0" >> nul 2>&1
if %ERRORLEVEL% NEQ 0 ( echo VS 2010 not installed ) else ( echo VS 2010 installed. )
reg query "HKEY_CLASSES_ROOT\VisualStudio.DTE.11.0" >> nul 2>&1
if %ERRORLEVEL% NEQ 0 ( echo VS 2012 not installed ) else ( echo VS 2012 installed. ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:14:53.317

```
@echo off
for /d %%a in ("%programfiles%\Microsoft Visual Studio*") do (
for /f "tokens=3 delims=\" %%x in ("%%a") do echo %%x
)
pause >nul 
```

如果您需要更多详细信息，可以查询[大量 reg 键](http://www.mztools.com/articles/2008/MZ2008003.aspx)以获取更多信息，但从键和值中提取所需数据会更加困难。

***注意：***如果您在 x64 上运行，则可能需要`%systemdrive%\Program Files (x86)`根据 VS 的安装位置添加检查。

# android - 过滤操作后如何在 CursorAdapter 上执行 ListView setSelection(0)？

> ID：13880743
> 
> 赞同：0
> 
> 时间：2012-12-14T14:37:33.000
> 
> 标签：android, android-cursoradapter

1）创建一个 CursorAdapter 或 SimpleCursorAdapter 来呈现一个列表。

2）现在向下滚动列表一点，这样您就不会处于位置 0。

3) 现在执行您创建的 CursorAdapter 过滤器。

结果：

过滤器会正确更新数据，并且列表视图会使用新数据进行更新。

最大的问题是列表位置/选择保持在您之前的位置（如果新结果中有足够的行）。

我想在我的过滤器中执行 setSelection(0) 以始终将位置设置为 0，但不知道该怎么做。有什么明显的建议吗？

```
dataAdapter.setFilterQueryProvider(new FilterQueryProvider() {
   public Cursor runQuery(CharSequence constraint) {

    listView.setSelection(0);
    return newCursor;
}); 
```

上述方法不起作用，因为 setSelection() 是在数据更新、光标交换之前进行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:50:59.603

您是否尝试过`ListView.setItemChecked(int position, boolean checked)`或`listView.smoothScrollToPosition(position)`（如果您的 API >= 8）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:14:28.137

找到了答案。没有办法通过过滤器更新 setSelection() 但覆盖 CursorAdapter 的 changeCursor 方法就可以了！

```
@Override
    public void changeCursor(Cursor cursor) {
        super.changeCursor(cursor);

        listView.setSelection(0);
    } 
```

# java - RSA 解密 - BadPaddingException：数据必须从零开始

> ID：13880744
> 
> 赞同：1
> 
> 时间：2012-12-14T14:37:36.480
> 
> 标签：java, encryption, rsa, private-key

我正在写 RSA 加密/解密。这是代码。但是当我使用私钥解密时，我得到了异常

```
public class RSACrypto {

    private static SecureRandom sr = new SecureRandom();

    /**
     * @param rsabits
     * @return keyPair
     * @throws NoSuchAlgorithmException
     */
    public static KeyPair newKeyPair(int rsabits) throws NoSuchAlgorithmException {
        KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
        generator.initialize(rsabits, sr);
        return generator.generateKeyPair();
    }

    /**
     * @param key
     * @return key
     */
    public static byte[] pubKeyToBytes(PublicKey key) {
        return key.getEncoded(); // X509 for a public key
    }

    /**
     * @param key
     * @return key
     */
    public static byte[] privKeyToBytes(PrivateKey key) {
        return key.getEncoded(); // PKCS8 for a private key
    }

    /**
     * @param bytes
     * @return key
     * @throws InvalidKeySpecException
     * @throws NoSuchAlgorithmException
     */
    public static PublicKey bytesToPubKey(byte[] bytes) throws InvalidKeySpecException, NoSuchAlgorithmException {
        return KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(bytes));
    }

    /**
     * @param bytes
     * @return key
     * @throws InvalidKeySpecException
     * @throws NoSuchAlgorithmException
     */
    public static PrivateKey bytesToPrivKey(byte[] bytes) throws InvalidKeySpecException, NoSuchAlgorithmException {
        return KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(bytes));
    }

    /**
     * @param input
     * @param key
     * @return encryptedText
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws InvalidKeyException
     * @throws NoSuchAlgorithmException
     * @throws NoSuchPaddingException
     */
    public static byte[] encryptWithPubKey(byte[] input, PublicKey key) throws IllegalBlockSizeException, BadPaddingException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        return cipher.doFinal(input);
    }

    /**
     * @param input
     * @param key
     * @return decryptedText
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws InvalidKeyException
     * @throws NoSuchAlgorithmException
     * @throws NoSuchPaddingException
     */
    public static byte[] decryptWithPrivKey(byte[] input, PrivateKey key) throws IllegalBlockSizeException, BadPaddingException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.DECRYPT_MODE, key);
        return cipher.doFinal(input);
    }

    /**
     * @param plainText
     * @return encryptedText
     * @throws InvalidKeyException
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws NoSuchAlgorithmException
     * @throws NoSuchPaddingException
     * @throws UnsupportedEncodingException
     */
    public static String encrypt(String plainText) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException,
            UnsupportedEncodingException {
        KeyPair kp = newKeyPair(1 << 11); // 2048 bit RSA; might take a second to generate keys
        PublicKey pubKey = kp.getPublic();
        PrivateKey priKey = kp.getPrivate();
        System.out.println("Private Key: " + new BASE64Encoder().encode(privKeyToBytes(priKey)));
        byte[] cipherText = encryptWithPubKey(plainText.getBytes("UTF-8"), pubKey);
        return new BASE64Encoder().encode(cipherText);
    }

    /**
     * @param encrypted
     * @param privateKey
     * @return decryptedText
     * @throws NoSuchAlgorithmException
     * @throws InvalidKeySpecException
     * @throws IOException
     * @throws InvalidKeyException
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws NoSuchPaddingException
     */
    public static String decrypt(String encrypted, String privateKey) throws NoSuchAlgorithmException, InvalidKeySpecException, IOException, InvalidKeyException, IllegalBlockSizeException,
            BadPaddingException, NoSuchPaddingException {
        PrivateKey privateKeyValue = bytesToPrivKey(new BASE64Decoder().decodeBuffer(privateKey));
        return new String(decryptWithPrivKey(new BASE64Decoder().decodeBuffer(encrypted), privateKeyValue), "UTF-8");
    }
} 
```

使用生成的 privateKey 和加密文本**解密**时出现错误。我浏览了很多帖子，但无法弄清楚这里出了什么问题。

```
javax.crypto.BadPaddingException: Data must start with zero
        at sun.security.rsa.RSAPadding.unpadV15(Unknown Source)
        at sun.security.rsa.RSAPadding.unpad(Unknown Source)
        at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
        at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
        at javax.crypto.Cipher.doFinal(DashoA13*..) 
```

有什么想法，请帮忙。

**更新**

我从不同的班级打电话

```
String encryptedText = RSACrypto.encrypt("PLAIN TEXT"));

String privateKey = ""; //During encryption, it will print privatekey value, assigning the same here
String plaintext = RSACrypto.decrypt(encryptedText , privateKey); 
```

经过一点工作，我尝试了不编码和解码Base64。它工作正常。

我在这里搞砸了 base64 什么？没有任何线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:26:07.913

您的复制/粘贴一定是错误的。我编辑了您的代码以生成不需要复制粘贴的（丑陋的）SSCCE。改变的方法是：

```
public static StringPair encrypt(String plainText) 
    throws GeneralSecurityException, UnsupportedEncodingException {

  // Note: this is a very confusing way to say 2048
  KeyPair kp = newKeyPair(1 << 11); 

  PublicKey pubKey = kp.getPublic();
  PrivateKey priKey = kp.getPrivate();
  byte[] cipherText = encryptWithPubKey(plainText.getBytes("UTF-8"), pubKey);

  // Here I return both items, to remove copy/paste problems
  StringPair result = new StringPair();
  result.encryptedText = new BASE64Encoder().encode(cipherText);
  result.key = new BASE64Encoder().encode(privKeyToBytes(priKey));
  return result;
}

private static class StringPair {
  public String encryptedText;
  public String key;
}

public static void main(String[] args) throws Exception {
  StringPair result = RSACrypto.encrypt("PLAIN TEXT");    
  System.out.println(RSACrypto.decrypt(result.encryptedText, result.key));       
} 
```

这打印`PLAIN TEXT`。

# youtube - 嵌入 youtube 视频 - 宽高比

> ID：13880745
> 
> 赞同：10
> 
> 时间：2012-12-14T14:37:39.463
> 
> 标签：youtube, embed

我希望在我的网页中嵌入一些 youtube 视频，通过查看 youtube 上的视频，它们似乎都以 16:9 或 640px:340px 的宽高比显示。

问题是我只有 600px 的最大空间可以放入它们，我是否可以计算出适当的高度，即 640/16*9 = 333px 并在其中显示它们，这样可以处理所有事情，或者是否有任何其他尺寸分配给底部的进度条。

例如，如果你看这个视频，你可以看到整个进度条。

[http://www.youtube.com/user/southerncomfort?v=ygeWsoYYMuQ](http://www.youtube.com/user/southerncomfort?v=ygeWsoYYMuQ)

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-23T13:45:00.557

您可以使用任何 youtube 嵌入代码生成器轻松实现您的目标。

1.  转到[高级 Youtube 嵌入代码生成器。](https://codegena.com/generator/Youtube-Embed-Code-Generator/)
2.  输入视频 ID 并在相应列中输入高度或宽度，然后点击生成按钮（空白字段将自动以 16:9 的比例计算）
3.  复制代码并使用它。

![在此处输入图像描述](../Images/5caf2096ae7b601c4cd92fe4d16f6088.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:46:26.853

您可以选择 16:9 或 4:3，后者为 480 像素 X 385 像素（控件的高度为 +25 像素）。

或者，如果你想要 16:9，你可以选择 560x315 的尺寸。

查看样式指南：[https ://web.archive.org/web/20130415231312/http://support.google.com/youtube/bin/answer.py?hl=en&answer=178264](https://web.archive.org/web/20130415231312/http://support.google.com/youtube/bin/answer.py?hl=en&answer=178264)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-28T20:02:49.010

对于仍然在这方面的任何人，

[https://www.w3schools.com/howto/howto_css_aspect_ratio.asp](https://www.w3schools.com/howto/howto_css_aspect_ratio.asp)。

确保使用登记的所有 CSS 属性和样式，否则它不会在响应式网站和应用程序上正确呈现。

# jquery - 着陆时图像淡出

> ID：13880747
> 
> 赞同：0
> 
> 时间：2012-12-14T14:37:44.423
> 
> 标签：jquery, html, css

我希望在用户访问网站时出现全屏图像，然后在延迟后淡出并显示网站。我知道这可能可以通过 jQuery 来完成。有谁知道这方面的好资源或代码片段？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:42:58.220

假设您的图像在 div TheIntro 中，并且站点包含在名为 TheMainDiv 的 div 中，那么您可以为此使用 jquery：

```
$(document).ready(function () {

    $('#TheIntro').animate({opacity: 0.01}, 500, function () {

        $(this).hide();
        $('#TheMainDiv').fadeIn(500);             

    });   
}); 
```

我认为您不需要插件来实现这种效果。第一个值 500 是介绍图像淡出所需的时间，第二个值是网站淡入所需的时间。

# zurb-foundation - Webstorm - 如何将 Zurb Foundation 添加为新项目类型？

> ID：13880750
> 
> 赞同：1
> 
> 时间：2012-12-14T14:37:51.440
> 
> 标签：zurb-foundation, webstorm

我在 WebStorm 的文档中读到，当您在 Webstorm 中创建新项目时，您可以从下拉列表中选择使用各种项目类型，包括 Twitter Bootstrap 和 Foundation。但是我的下拉列表中没有 Foundation 作为选项。

如何在 New Project... 对话框中将 Foundation 添加为下拉项目类型？

顺便说一句，我正在使用 WebStorm v4.0.2

谢谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:24:20.007

您应该[更新到较新的 WebStorm 版本](http://www.jetbrains.com/webstorm/download/index.html)，此功能是在 4.0.2 发布后添加的。

# android - 通过构造函数显式创建服务是否合适？

> ID：13880751
> 
> 赞同：3
> 
> 时间：2012-12-14T14:37:55.533
> 
> 标签：android

我知道不应该直接实例化所有应用程序组件，我应该使用`startService`or`bindService`与`Service`. 但在 Google 示例中展示了如何实现应用内计费版本 2，我可以看到它`Service`是直接在 Dungeons.java 中的第 259 行创建的：

```
mBillingService = new BillingService();
mBillingService.setContext(this); 
```

`BillingService`类扩展`android.app.Service`并在清单中注册为服务。

但是`BillingService`对象只是创建而不是绑定。所以我想知道这是官方样本中的错误还是真的适合本地服务的方式？

# c++ - 初始化列表和移动构造函数

> ID：13880754
> 
> 赞同：1
> 
> 时间：2012-12-14T14:38:10.487
> 
> 标签：c++, c++11, move, initializer-list

> **可能重复：**
> [initializer_list 和移动语义](https://stackoverflow.com/questions/8193102/initializer-list-and-move-semantics)

在以下示例中，即使发送了临时对象，最终也会执行复制：

```
// test.cpp

#include <iostream>
#include <vector>
#include <utility>
#include <initializer_list>

using namespace std;

class mystr : public string
{
public:
    mystr() = default;
    mystr(const char* c) : string(c) { }

    mystr(mystr& m) : string(m) { cout << "& " << c_str() << endl; }
    mystr(mystr const & m) : string(m) { cout << "const & " << c_str() << endl; }
    mystr(mystr&& m) : string(move(m)) { cout << "&& " << c_str() << endl; }
};

class myvector
{
public:
    myvector(initializer_list<mystr> i)
    {
        cout << "Inside constructor" << endl;

        v = vector<mystr>(i);
    }

private:
    vector<mystr> v;
};

int main()
{
    mystr a("hello");

    myvector v{ a, mystr("bye"), a, mystr("sorry") };
} 
```

输出：

```
$ g++ --version | grep "g++"
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
$ g++ -std=c++11 test.cpp
$ ./a.out
& hello
& hello
Inside constructor
const & hello
const & bye
const & hello
const & sorry 
```

“命名”对象被复制，临时对象被省略，但是，一旦构造了初始化器列表，所有元素都会在其他时间被复制：初始化器列表已经删除了对象原始性质的信息。有了`-fno-elide-constructors`这个过程就更好理解了：

```
$ g++ -std=c++11 -fno-elide-constructors test.cpp
$ ./a.out
& hello
&& hello
&& bye
&& bye
& hello
&& hello
&& sorry
&& sorry
Inside constructor
const & hello
const & bye
const & hello
const & sorry 
```

临时对象被移动两次，持久对象在到达构造函数之前被复制和移动，这意味着在创建初始化列表的过程中。一旦进入构造函数，列表中的所有对象从构造函数的角度来看都是持久的，因此它们都被复制了。

是否可以避免这种行为（转发）？

我认为，容器应该始终将对象（而不是复制）从初始化器列表移动到它自己的容器中，因为在构建初始化器列表时对象已经被复制了一次。为什么要连续复制两次？

# iphone - 我无法在 iOS 5.1 中导入用于 Facebook 集成的标头

> ID：13880758
> 
> 赞同：-2
> 
> 时间：2012-12-14T14:38:29.917
> 
> 标签：iphone, objective-c, ios5, ios6, facebook-ios-sdk

我在 ios 5.1 中进行 facebook 集成，如果我想在 ios 5.1 构建阶段不添加 social.framework，我添加 FacebookSDK.framework 如下。任何人都可以解决这个问题 ![在此处输入图像描述](../Images/4f12c8ad5f5c2b7255e997a67cc9806f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:28:30.630

尝试这个

```
#import <Social/Social.h> 
```

没有空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:37:33.783

社会的。framework 是一个框架，所以你必须在 < > this 中引入。不在“dubbel cote”中。尝试在 <> 中使用 this 或者如果没有则显示什么是错误消息。？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:49:08.467

您可以从添加框架的位置将 Social.framework 设为“可选”。这将适用于 iOS6 及更高版本

# debugging - OpenGL 着色器调试。NVIDIA Parallel nSight？

> ID：13880759
> 
> 赞同：1
> 
> 时间：2012-12-14T14:38:30.507
> 
> 标签：debugging, opengl, shader

有人可以给我一个关于使用 NVIDIA 的并行 nsight（在 Visual Studio 中）调试 OpenGL 3.3/4.2 + 着色器的实用程序的破败吗？这可能吗？这是可取的吗？

如果可能，什么配置使它成为可能？我需要在一台机器，两台机器中使用两张卡吗？

ATI 有类似的功能吗？

我发现调试我的 OpenGL 着色器简直是地狱，我尝试了其他 OpenGL 调试器，但它们似乎无法正常工作或根本无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:42:50.473

Nsight Visual Studio 3.0 版（2013 年初推出）将支持 OpenGL 着色器调试。OpenGL 支持在 SIGGRAPH 2012 上[宣布](http://nvidia.fullviewmedia.com/siggraph2012/ondemand/SS102.html)。初始版本将支持 OpenGL 4.2 核心。后续版本将添加额外的扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:13:18.163

如果 NSight 真的很快就会出现在 OpenGL 上，那可能并不重要，但是……

我使用 gDEBUgger。它曾经是，现在仍然是 OpenGL 调试的好工具；只需要一张卡，适用于 ATI 和 NVidia 卡，而且是免费的。

然而，自从 AMD 买下它后，他们已经设法让它完全没用了，所以遗憾的是，GREmedy 版本是最后一个可用的版本。

# jquery - 将模型对象从部分 UI 对话框传回控制器

> ID：13880760
> 
> 赞同：1
> 
> 时间：2012-12-14T14:38:31.193
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-partialview

我有一个编辑详细信息表单，它在 jquery ui 对话框中显示为部分内容。我想将修改提交回数据库，但我在使用 MVC3 编辑表单上使用的标准提交按钮时遇到了麻烦。我想提交更改，但仍保留在对话框中。

我在调用一些 jquery 的页面上放置了按钮（如下）。我需要知道的是如何序列化我的模型（称为 Models.User）并将其传递回控制器。

如您所见，我拥有大部分 jquery - 我需要做的就是序列化和数据并发送它。我猜我需要使用 Json，但我不是 100% 知道如何引入它。

任何帮助表示赞赏..

```
<script type="text/javascript">
    $(document).ready(function(e) {
        $(function() {
            $("#quickButton1").live("click", function (e) {
                e.preventDefault();
                $.ajax({
                    url: "/Users/QuickEditSave/",
                    data: ({}),                  
                    success: function (data) {
                        uiDialog.close();
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(xhr.responseText);
                    }
                });
            });
        });
    });    
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:09:55.903

您必须将表单输入元素序列化为 JSON 对象，然后通过`$.Ajax`.

使用这个插件来序列化你的表单数据（这部分来自一个 SO [question](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)）：

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$(function() {
    $('form').submit(function() {
        $('#result').text(JSON.stringify($('form').serializeObject()));
        return false;
    });
});​ 
```

然后发送：

```
 $.ajax({
         url: "/Users/QuickEditSave/",
         data: JSON.stringify($('form').serializeObject()),                  
         success: function (data) {
          uiDialog.close();
         },
         error: function(xhr, ajaxOptions, thrownError) {
            alert(xhr.responseText);
         }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:52:47.110

解决：

```
var formData = $("form").serialize();

data: formData,
type: "POST", 
```

然后在我的控制器期望和对象中：

```
public string QuickEditSave(newUser newuser) 
```

# javascript - 将数组元素与javascript中的特定字符串进行比较

> ID：13880761
> 
> 赞同：2
> 
> 时间：2012-12-14T14:38:34.480
> 
> 标签：javascript, compare

我有一个字符数组，例如：

```
var invalid_chars = ['<', '>', '$', '@', '&', '+', '(', ')', '[', ']', '{', '}',' ','`']; 
```

并有一个像这样的字符串：

```
var id_val = $("#id_number").val(); //text field contains "mu 1$2@345" 
```

所以我想**限制**在字段中输入的**invalid_chars 。**

为此，我有以下代码：

```
var id_val = $("#id_number").val();
var invalid_chars = ['<', '>', '$', '@', '&', '+', '(', ')', '[', ']', '{', '}',' ','`'];
if (in_array(invalid_chars,id_val)) {
  console.info("HI");
} 
```

但它向我显示错误。“ReferenceError：in_array 未定义”

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:42:04.333

`in_array()`是一种 PHP 方法。在 JavaScript 中使用[`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:42:52.510

您需要编写`in_array`函数，简单示例：

```
function in_array( arr, val ) {
    for( var i = 0; i < arr.length; i++) {
        if( arr[ i ] == val ) {
            return true;
        }
    }
} 
```

或使用正则表达式：

```
if( id_val.search( /[^0-9]/g ) == -1 ) 
```

或使用正则表达式，您可以去除所有非数字字符：

```
var id_val = $("#id_number").val(); //text field contains "mu 1$2@345"
id_val = id_val.replace( /[^0-9]/g, '' );
console.log( id_val ); //text now field contains "12345" 
```

或者，如果您也想允许拉丁字符：

`[^0-9A-Za-z]`

^ 这也不包括空格字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T14:44:30.110

看起来您已经在使用 jQuery，它有一个[$.inArray()](http://api.jquery.com/jQuery.inArray/)实用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T14:48:09.040

在我看来，你应该把你的字符列表变成一个正则表达式：

```
var badchars = /[<>$@&+()[\]{},` ]/;
if (badchars.test(id_val)) {
  // contains invalid characters
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:16:21.650

您可以`indexOf`在数组上使用，但旧版本的 MSIE 的 jScript 引擎本身不支持此方法。因此，要么`Array.prototype`为这些浏览器增加 （显然，并非没有风险），要么只是使用您要测试的一串字符：

```
var nonoChars = '<>$@&+()[]{},`';
for(var i = 0; i< id_val.length; i++)
{
    if (nonoChars.indexOf(id_val.charAt(i)) > -1)
    {
        alert('Char #' + (i + 1) + ' is not allowed!');
        return false;
    }
}
//input ok 
```

但是，在这种情况下，正则表达式更有意义：

```
if (id_val.match(/[<>$@&+()\[\]{},`]/))
{
    alert('Invalid input');
    return false;
}
//input ok 
```

# html - 如何设置 br 标签的样式以在顶部和/或底部留出更多空间？

> ID：13880764
> 
> 赞同：1
> 
> 时间：2012-12-14T14:38:38.653
> 
> 标签：html, css

这个问题旨在更多地了解`<br>`标签：

有一个 HTML 页面使用以下样式将单词分成段落：

```
<div>
    <br>200 words follows...
    <br>another 300 words...
    <br>
    <br>and 250 words...
</div> 
```

我通常不会以这种方式设置内容样式，但会`<p> ... </p>`为每个段落使用标签。但是假设我们不重新构建文档，而只是使用 CSS 来设置`<br>`标签的样式，以便每个段落的顶部可以有更多的空白空间（而不是默认没有），如果**只是为了理解`<br>`更多**，那怎么办？（虽然`<br>`它是一个特殊的换行元素，但它应该像其他元素一样具有样式。）

请注意，`line-height`在这种情况下不起作用，并且在 Chrome 中，它的工作方式与 Mac 上的 Firefox 不同......可以在[http://jsfiddle.net/ff5SX/2/尝试](http://jsfiddle.net/ff5SX/2/)

在 Chrome 上，只有 2 个连续`<br>`会提供更多空间，而在 Firefox 上，这种行为很奇怪，更难解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T14:44:49.080

本文总结了 br 标签的样式可能性（或者更确切地说是不可能的）

[你可以用css定位<br />吗？](https://stackoverflow.com/questions/899252/can-you-target-br-with-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T14:13:19.140

**请使用以下指定大小的垂直间隙**

**CSS**

div.verticalgap{clear:both;overflow:hidden;height:0px;}

**HTML（对于 10 像素的垂直间隙）**

<div class="verticalgap" style="height:10px"></div>

# python - Scrapy不下载图像并出现管道错误

> ID：13880765
> 
> 赞同：2
> 
> 时间：2012-12-14T14:38:38.760
> 
> 标签：python, scrapy

我有这个代码

```
class MyImagesPipeline(ImagesPipeline):
    def get_media_requests(self, item, info):
            for image_url in item['image_urls']:
                yield Request(image_url) 
```

这是从 BaseSpider 子类化的蜘蛛。这个基地蜘蛛让我做噩梦

```
def parse(self, response):

    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//strong[@class="genmed"]')
    items = []

    for site in sites[:5]:

        item = PanduItem()
        item['username'] = site.select('dl/dd/h2/a').select("string()").extract()
        item['number_posts'] = site.select('dl/dd/h2/em').select("string()").extract()
        item['profile_link'] = site.select('a/@href').extract()

        request =  Request("http://www.example/profile.php?mode=viewprofile&u=5",
        callback = self.parseUserProfile)
        request.meta['item'] = item
        return request 
```

* * *

```
 def parseUserProfile(self, response):

        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//div[@id="current')
        myurl = sites[0].select('img/@src').extract()

        item = response.meta['item']

        image_absolute_url = urljoin(response.url, myurl[0].strip())
        item['image_urls'] = [image_absolute_url]

        return item 
```

* * *

这是我得到的错误。我找不到。看起来像是它的获取项目，但我不确定

```
ERROR

File "/app_crawler/crawler/pipelines.py", line 9, in get_media_requests
            for image_url in item['image_urls']:
        exceptions.TypeError: 'NoneType' object has no attribute '__getitem__' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T13:03:49.233

您的 pipelines.py 中缺少一个方法 所述文件包含 3 个方法：

*   处理项目
*   获取媒体请求
*   item_completed

item_completed 方法是处理将图像保存到指定路径的方法。此路径在 settings.py 中设置如下：

```
ITEM_PIPELINES = ['scrapy.contrib.pipeline.images.ImagesPipeline']
IMAGES_STORE = '/your/path/here' 
```

如上所示，settings.py 中还包含启用图像管道的行。

我试图用我理解的最好的方式来解释它。如需进一步参考，请查看官方 scrapy[文档](http://doc.scrapy.org/en/latest/topics/images.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:56:11.217

并将 IMAGES_STORE 设置设置为将用于存储下载图像的有效目录。否则管道将保持禁用状态，即使您将其包含在 ITEM_PIPELINES 设置中也是如此。

例如：

```
IMAGES_STORE = '/path/to/valid/dir' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:30:38.027

嗯。`item`您绝不会追加`items`（尽管文档中的示例代码也没有追加，所以我可能会叫错树）。

尝试`parse(self, response)`像这样添加它，看看这是否能解决问题：

```
for site in sites:
    item = PanduItem()
    item['username'] = site.select('dl/dd/h2/a').select("string()").extract()
    item['number_posts'] = site.select('dl/dd/h2/em').select("string()").extract()
    item['profile_link'] = site.select('a/@href').extract()

    items.append(item) 
```

# multithreading - 线程池执行顺序和将 Future 传递给另一个线程

> ID：13880768
> 
> 赞同：0
> 
> 时间：2012-12-14T14:38:55.203
> 
> 标签：multithreading, service, execution, pool

我想创建一个有两个线程的线程池。我想确保第一个线程首先执行，在第一个线程完成后，第二个线程开始。除此之外，我需要将 Future 结果从第一个线程传递到第二个线程。

知道怎么做吗？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:19:39.460

这种情况不适合使用线程。因此，避免使用线程。

# sql - 在 Excel 中连接到 Access 查询有哪些限制

> ID：13880770
> 
> 赞同：1
> 
> 时间：2012-12-14T14:38:57.280
> 
> 标签：sql, excel, ms-access, ms-access-2007, union-all

我有一个 Access 2007 数据库，它有许多表，有些相当大（100,000 多条记录）；我创建了一个`union query`将一些相同类型的数据从多个表中提取到一个大型查询中，以进行数据透视表操作和报告。例如：

```
SELECT Language
FROM Table1
UNION ALL SELECT Language
FROM Table2
UNION ALL SELECT Language
FROM Table3; 
```

这行得通。但是，我很快发现`union query`从 Excel 2007 连接到数据源时不会显示 a。因此，我创建了第二个查询来引用`union query`. 像这样：

```
SELECT *
FROM [The Above Union Query]; 
```

此查询有效，并且最初可从 Excel 访问。时间过去了，我添加了更多数据。突然，当我从 Excel 连接到我的 Access 数据库时，我引用联合的查询消失了。MS Access 没有显示任何问题的迹象（数据显示在 Access 中），并且我的其他非联合查询显示在 Excel 2007 中……但不是引用联合的查询。

### 会发生什么？为什么消失了？

我注意到如果我将其中的一些引用表切换`union query`到一个较小的表（行数较少），查询会再次出现在 Excel 中。至少，我认为这就是区别所在。我真的无法解释为什么有些`union queries`不会出现而有些会出现。

我很难过，需要一些指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:00:32.317

如果您对 Union Query 而不是 Select Query 进行 Make Table Query 会怎样。然后只是让 Excel 引用了新表？这至少会告诉您是否超出 Excel 中的行限制，但这似乎不太可能，因为所有报告都表明它们在 Excel 2007 中比 Excel 2003 显着增加了行限制。您甚至可以在 Excel 中编写一个宏来告诉 Access在获取数据之前运行 Make Table。

# weblogic - Weblogic 服务器：获取所有设置

> ID：13880774
> 
> 赞同：0
> 
> 时间：2012-12-14T14:39:06.577
> 
> 标签：weblogic, settings, command-line-interface

我正在寻找一个命令行脚本，它可以让我概述 Weblogic 服务器中设置的所有设置。对于 Glassfish，以下命令作为admin get '*'存在。

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:06:13.470

有一个名为[WLST](http://docs.oracle.com/cd/E15051_01/wls/docs103/config_scripting/using_WLST.html)的 WebLogic 脚本框架可以帮助您完成此任务。

# javascript - 数据绑定到 Windows 8 ListView

> ID：13880775
> 
> 赞同：1
> 
> 时间：2012-12-14T14:39:07.840
> 
> 标签：javascript, html, windows, data-binding, microsoft-metro

我在使用 Javascript 将数据绑定到 Windows 8 应用程序中的 ListView 时遇到大量问题。

在 default.js 上的“激活”事件中，我编写了一些代码来从 Web 服务获取一些数据并将其推送到数组中。该位工作正常，阵列已填充。

我遇到的问题是应用程序无法识别数据。我在名为inspections.html 的页面中有这段代码：

```
data-win-options="{itemTemplate: select('#imageTextListCollectionTemplate'),
                                itemDataSource: dataList.dataSource,
                                layout: {type: WinJS.UI.ListLayout}} 
```

然后在“激活”事件中我声明：

```
var dataList = new Array(); 
```

并将来自 Web 服务的数据推送到该数组中。但是在运行时我收到一个错误，上面写着“无法在未定义的数据列表上找到数据源”。

我已经在 MS 网站上完成了一些示例，其中一个示例创建了一个虚拟数据集并从命名空间中引用它。我有点认为我在这里也缺少一个命名空间，但我不知道 default.js 的命名空间是什么。或者也许我错了，这是完全不同的东西。

请帮助 - 这是非常基本的（并且应该很容易），但我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:17:10.620

你想用 HTML 或 javascript 创建数据列表吗？

您似乎想从 JavaScript 创建它。假设您已经将数据从您的网络服务推送到数组中，您只需要调用：

`var dataList = new WinJS.Binding.List(array);`

现在访问`dataList.dataSource`是完全有效的。

此外，要创建数据列表，您并不总是需要一个数组。您可能会从一个空列表开始，然后继续将数据直接从 Web 服务插入到数据列表中，例如：

```
var dataList = new WinJS.Binding.List([]);
dataList.push(value1);
dataList.push(value2); 
```

...

希望能帮助到你。如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T11:36:42.923

如果您在 HTML 端分配数据源时遇到麻烦

喜欢js端喜欢

```
 var list = new WinJS.Binding.List(array here);
 listView.itemDataSource = list.dataSource; 
```

通过使用它，您可以轻松浏览绑定到 ListView 的数据。

# .htaccess - .htacces mod_rewrite 可选参数

> ID：13880777
> 
> 赞同：1
> 
> 时间：2012-12-14T14:39:10.073
> 
> 标签：.htaccess, mod-rewrite

为了获得漂亮的 URL，我编辑了我的 .htacces 文件

```
domain.com/category/content 
```

应该重定向到

```
domain.com/index.php?category=cat&content=cont 
```

这适用于这条线

```
RewriteRule ^([^/]*)/([^/]*)$ /index.php?category=$1&content=$2 [L] 
```

但

```
domain.com/category 
```

应该重定向到

```
domain.com/index.php?category=cat 
```

显示整个类别的内容

我确信这很容易解决，但对我来说很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:12:30.603

使用 2 条规则：

```
RewriteRule ^([^/]+)/([^/]+)$ /index.php?category=$1&content=$2 [L]
RewriteCond %{REQUEST_URI} !/index.php
RewriteRule ^([^/]+)/?$ /index.php?category=$1 [L] 
```

# android - 如何在 Android 的 GridView 中处理多个侦听器

> ID：13880780
> 
> 赞同：0
> 
> 时间：2012-12-14T14:39:34.127
> 
> 标签：android, onclicklistener, android-gridview

在我的应用程序中，有一个`GridView`内容列表。每个项目都有一个布局。gridview 中的单个项目包含一个图像和 2 `textviews`。

我有一个要求，当我单击图像时，应将图像替换为另一个图像，并且当我单击任何其他位置时，它应打开一个弹出窗口。我可以使用 . 收听第二个事件`OnItemClickListener`。它打开弹出窗口。我该如何处理第一个案例？我的意思是如何收听`OnClick`图像事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:44:34.773

在您的视图适配器中，当您设置图像资源时，还要为 ImageView 设置一个 onClickListener。

在我的例子中， holder 是一个临时静态类，它包含 2 个 TextView 和一个 ImageView。：

```
holder.mThumbnailImageView = (ImageView) convertView.findViewById(R.list.thumb);
holder.mThumbnailImageView.setImageResource(thisOrder.getIconValue());
holder.mThumbnailImageView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        Toast.makeText(parent.getContext(), "image clicked: " + view.getId(), Toast.LENGTH_SHORT).show();
    }
}); 
```

# java - 如何枚举计算机所在子网的所有IP

> ID：13880781
> 
> 赞同：2
> 
> 时间：2012-12-14T14:39:38.217
> 
> 标签：java, network-programming

我是 Java 新手，正在使用 Java 做一个项目。

我有一个 IP（例如：）`192.168.0.10`和一个子网掩码（比如说，`255.255.255.0`）。我需要这个子网中所有 IP 地址的列表。我能想到的最好的是天真的解决方案（我必须处理比特和所有）。有谁知道这样做的更好/e.legant 方式。

如果我们考虑这个例子，我们将有 ip 列表`192.168.0.1\. 192.168.0.2, 192.168.0.3, ..... , 192.168.0.254`

任何帮助表示赞赏。

[编辑]我想到的幼稚方法：

通过考虑您拥有的 IP 地址和子网来构造一个整数。在我们的例子中，这将是二进制表示`11000000.10101000.00000000.00000000`（添加点以提高可读性）。将此数字加 1，直到左起 24 位切换。它切换的第一个图块我们已经生成了所有可能在该子网中 ip 的数字。现在的任务是从 32 位数字生成 ip，这可以通过编写一次提取 8 位的函数来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:04:37.167

有[Apache Commons SubnetUtils](http://commons.apache.org/net/api-3.2/org/apache/commons/net/util/SubnetUtils.html)

```
SubnetUtils utils = new SubnetUtils("192.168.0.10", "255.255.255.0");
String[] addresses = utils.getInfo().getAllAddresses(); 
```

`getHighAddress`并且`getLowAddress`可能对您非常有用。在文档中查看更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:09:55.577

这个怎么样？

**更新：**小调整以防止枚举两个特殊用途的 IP（网络 IP 和广播 IP）。我认为这是最简单的解决方案，没有额外的依赖。

**最后更新：**我对 Java 在舍入符号除法中的规则进行了更正。

```
public class ListIPs
{
    static int IPNum(int a, int b, int c, int d)
    {
        int ip = ((a * 256 | b) * 256 | c) * 256 | d;
        return ip;
    }

    static void ListIPs(int ip, int mask)
    {
        int index;
        int count = 1;
        int temp = mask;
        long a, b, c, d;

        while ((temp & 1) == 0)
        {
            count *= 2;
            temp >>= 1;
        }

        for (index = 1; index < count -1; index++)
        {
            long newIP = ((ip & mask) | index) & 0xFFFFFFFFL;

            d = newIP & 0xFF;
            c = (newIP / 256) & 0xFF;
            b = (newIP / 65536) & 0xFF;
            a = (newIP / 16777216) & 0xFF;

            System.out.println("" + a + "." + b + "." + c + "." + d);
        }
    }

    public static void main(String[] args)
    {
        ListIPs(IPNum(192, 168, 0, 10), IPNum(255, 255, 255, 0));
    }
} 
```

# javascript - 画布在周围移动

> ID：13880785
> 
> 赞同：4
> 
> 时间：2012-12-14T14:39:45.110
> 
> 标签：javascript, html, canvas

任何人都可以发布一个使用 HTML5 画布通过鼠标移动圆圈的简单解决方案吗？我已经阅读了各种框架（画架、织物、纸张等）——虽然它们都很酷，但我只需要一个小圆圈来跟随鼠标指针，这不值 100K+ 的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T14:58:46.107

**[现场演示](http://jsfiddle.net/loktar/fAaRx/)**

我可能不应该在你没有尝试任何东西的情况下就放弃它。无论如何，你去希望它有所帮助。

```
var canvas=document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = canvas.height = 500;

var targetX = 0,
    targetY = 0,
    x = 10,
    y = 10,
    velX = 0,
    velY = 0,
    speed = 2;

function update(){
    var tx = targetX - x,
        ty = targetY - y,
        dist = Math.sqrt(tx*tx+ty*ty),
        rad = Math.atan2(ty,tx),
        angle = rad/Math.PI * 180;

        velX = (tx/dist)*speed,
        velY = (ty/dist)*speed;

        x += velX
        y += velY

        ctx.clearRect(0,0,500,500);
        ctx.beginPath();
        ctx.arc(x,y,5,0,Math.PI*2);
        ctx.fill();

    setTimeout(update,10);
}

update();

canvas.addEventListener("mousemove", function(e){
    targetX = e.pageX;
    targetY = e.pageY;
}); 
```

​</p>

# python - 执行中的Python sqlite3字符串变量

> ID：13880786
> 
> 赞同：23
> 
> 时间：2012-12-14T14:39:49.710
> 
> 标签：python, sqlite

我尝试在 Python 中执行这个 sqlite3 查询。我将代码减少到最少，sqlite.connect 等工作。

```
column = 'Pron_1_Pers_Sg'
goal = 'gender' 
constrain = 'Mann'

with con:
    cur = con.cursor()

    cur.execute("SELECT ? FROM Data where ?=?", (column, goal, constrain))
    con.commit()

    rows = cur.fetchall()

    for element in rows:
        values.append(element) 
```

这将返回一个空列表。如果我对字符串进行硬编码，它会起作用并返回值。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-14T15:01:36.980

参数标记只能用于表达式，即值。您不能将它们用于表名和列名等标识符。

用这个：

```
cur.execute("SELECT "+column+" FROM Data where "+goal+"=?", (constrain,)) 
```

或这个：

```
cur.execute("SELECT %s FROM Data where %s=?" % (column, goal), (constrain,)) 
```

（并且在您真正完成访问数据之前不要提交。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T13:02:35.807

试试这个：`c.execute("SELECT {idf} FROM Data WHERE {goal}".\ format(idf=column, goal=constrain))`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T14:46:45.790

我今天遇到了类似的问题。我不确定，如果这可以解决您的问题：

```
cur.execute("SELECT ? FROM Data where ?=?", (column, goal, constrain,)) 
```

重要的是最后**，**

试一试，这是我的代码的问题 - 所以它也许对你也有帮助。抱歉，我无法真正解释原因，因为我只是在学习自己并且已经进入 python/sqlite 了几个星期。

# c# - 在 C# 中删除列表框项并更新数据库

> ID：13880787
> 
> 赞同：0
> 
> 时间：2012-12-14T14:39:51.880
> 
> 标签：c#, listbox, windows-forms-designer

这可能是经典的菜鸟问题，但我对 C#（Windows 窗体应用程序）真的很陌生，我将不胜感激。所以，我正在寻找一种方法来做到这一点：我有一个列表框，其中包含代表数据库表条目的项目。我想通过删除列表框项来删除数据库表中的一行。有什么方法可以为列表框项（例如主键）分配值，以便在删除列表框项时可以使用它来更新 db 表？

谢谢你的时间！

编辑：它的 Db4o 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:05:10.487

如果您想手动执行此操作：

```
public class MyDBRecord
{
    public int ID { get; set; } 
    public string Text { get; set; }
    public MyDBRecord(int _id, string _text)
    {
        ID = _id;
        Text = _text;
    }
}
private void button1_Click(object sender, EventArgs e)
{
    listBox1.DisplayMember = "Text";
    listBox1.ValueMember = "ID";

    listBox1.Items.Add(new MyDBRecord(1, "abc"));
    listBox1.Items.Add(new MyDBRecord(2, "def"));
    listBox1.Items.Add(new MyDBRecord(3, "hij"));
}

private void button2_Click(object sender, EventArgs e)
{
    MyDBRecord Selected;

    Selected = listBox1.SelectedItem as MyDBRecord;

    if (Selected != null)
        MessageBox.Show(Selected.ID.ToString());     
} 
```

# sql-server - bcp 实用程序不加载表但没有给出错误

> ID：13880791
> 
> 赞同：1
> 
> 时间：2012-12-14T14:40:07.807
> 
> 标签：sql-server, unixodbc

我正在尝试使用包提供`MSSQL-2008`的实用程序将文件中的一些数据导入数据库表。数据库在 Windows 机器上，我正在 Linux 机器上运行 bcp 命令。`bcp``unixODBC-2.3.0`

我遇到的问题是我在运行命令后没有得到任何响应，也没有在目标表中导入数据。我不知道出了什么问题，这是我正在使用的命令：

```
bcp target.dbo.CS_MASTER in data.dat -c -S XX.XX.XX.XX -e ERRORS.log -t "^$" -r "\r" -E  -U sa -P abc@123 
```

`XX.XX.XX.XX`我的机器IP在哪里。指定的日志文件中没有输出，也没有错误。

当我从 Windows cmd 提示符下使用相同的 bcp 命令时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T05:45:10.150

此问题已修复。我的机器上安装了两个版本的 unixODBC 驱动程序导致了这个问题。

# c# - 以编程方式运行任何应用程序管理模式c#

> ID：13880795
> 
> 赞同：-4
> 
> 时间：2012-12-14T14:40:34.423
> 
> 标签：c#, uac, privileges, administrator

我需要以管理员权限运行我的 .exe。我搜索了谷歌并找到了我需要放入 app.config 文件中的一段 xml。这是`xml`：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="My Application" type="win32"/>
<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
<security>
  <requestedPrivileges>
    <requestedExecutionLevel level="requireAdministrator"/>
  </requestedPrivileges>
</security> 
```

这足以运行任何`exe`具有`admin`特权的人吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:47:58.983

是的，但是 requestedExecutionLevel 元素部分只是前半部分。如果 UAC 已关闭，您必须执行权限检查并在用户不是管理员时显示错误对话框。[您可以使用WindowsPrincipal.IsInRole 方法](http://msdn.microsoft.com/en-us/library/46ks97y7.aspx)获得权限

要创建 Run as ... 对话框，请查看： http: [//www.codeproject.com/Articles/7168/RunAs-Class](http://www.codeproject.com/Articles/7168/RunAs-Class)

# c# - 尝试使用 MVVMCross 和 SQLite 插件调试 PCL 代码

> ID：13880804
> 
> 赞同：2
> 
> 时间：2012-12-14T14:41:19.977
> 
> 标签：c#, android, plugins, portable-class-library, mvvmcross

我使用 MVVM Cross 和 SQLite 插件（在 VS2012 下）创建了一个 PCL

在我的 Droid 代码中，我像这样初始化服务：

```
 Cirrious.MvvmCross.Plugins.Sqlite.PluginLoader.Instance.EnsureLoaded(); 
```

在我的 PCL 代码中：

```
 var factory = this.GetService<ISQLiteConnectionFactory>();
        var conn = factory.Create("shopbazar"); 
```

但是在调用 PLC 代码时收到以下错误：

```
 Could not load type 'SQLite.SQLiteConnection' from assembly 'Cirrious.MvvmCross.Plugins.Sqlite.Droid… 
```

任何的想法？

我在我的 Android 程序集中设置了“Internet”和“写入外部存储”的权限。

顺便说一句，我无法进入这段代码，因为调试没有进入PCL。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:47:50.007

对于 VS2012 中的调试，恐怕有时您只需要下拉到 VS2010。

我只能建议您将您的声音添加到此[https://bugzilla.xamarin.com/show_bug.cgi?id=8209并在](https://bugzilla.xamarin.com/show_bug.cgi?id=8209)[http://forums.xamarin.com/discussion/286](http://forums.xamarin.com/discussion/286/pcl-debugging-in-vs2012)的 Xamarin 论坛上询问它[/pcl-debugging-in-vs2012](http://forums.xamarin.com/discussion/286/pcl-debugging-in-vs2012)

我已经问过了-但到目前为止被忽略了:(

* * *

为了让 SQLite 工作，请查看示例 - [https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20SimpleDialogBinding/SimpleDroidSql](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20SimpleDialogBinding/SimpleDroidSql) - 这对你有用吗？如果是，那么我们需要发现差异……如果不是，那么我们需要弄清楚在您的 Droid 版本中要做什么 - 差异万岁！

* * *

有关 VS 中 mono* 和 PCL 设置和工具的当前状态的更多一般信息，请参阅：

[http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)

# javascript - 当鼠标位于具有不同滚动条的部分时禁用特定滚动条

> ID：13880810
> 
> 赞同：2
> 
> 时间：2012-12-14T14:41:53.890
> 
> 标签：javascript, jquery, html, css, scroll

我有一个网站，其中有一个 div，中间有一个搜索结果，通常有一个滚动条，然后当窗口调整大小或分辨率太小时，整个主体也有一个滚动条。

（对不起，我无法提供链接，因为我处于开发的早期阶段）。

当您使用鼠标滚轮时，搜索结果将滚动正常，但是当您到达结果底部并继续滚动时，它将开始滚动整个文档。

我想通过在鼠标悬停在搜索结果 div 上时禁用外部滚动条来避免这种情况。有没有办法做到这一点？你如何定位特定的滚动条？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:47:19.100

```
$("#search_box").hover( 
    function(){
            $("body").css("overflow-y","hidden");
    },
    function(){
            $("body").css("overflow-y","scroll");
    }
); 
```

[`$.hover`](http://api.jquery.com/hover/)

# xml - 如何让前兄弟在 xslt 中工作

> ID：13880812
> 
> 赞同：1
> 
> 时间：2012-12-14T14:41:55.577
> 
> 标签：xml, xslt

鉴于此 XML：

```
<Table>
  <ID>3589</ID>
  <Type>Change Request</Type>
  <Version>1</Version>
  <Summary>...</Summary>
</Table>
<Table>
  <ID>3596</ID>
  <Version>1</Version>
  <Type>Change Request</Type>
  <Summary>...</Summary>
</Table>
<Table>
  <ID>4818</ID>
  <Type>Bug</Type>
  <Version>1</Version>
  <Summary>...</Summary>
</Table>
<Table>
  <ID>4819</ID>
  <Type>Bug</Type>
  <Version>1</Version>
  <Summary>...</Summary>
</Table>
<Table>
  <ID>4820</ID>
  <Type>Bug</Type>
  <Version>2</Version>
  <Summary>...</Summary>
</Table> 
```

我使用这个 XSLT：

```
...
<xsl:for-each select="//Table[Version=$vn]">
  <xsl:sort select="Type" />
   <xsl:variable name="currentType" select="Type" />
   <xsl:if test="not($currentType=preceding-sibling::Table/Type)">
      <h2><xsl:value-of select="Type" /></h2>
   </xsl:if>
   <p><b><xsl:value-of select="ID" /></b>:<xsl:value-of select="Summary" /></p>
</xsl:for-each>
... 
```

我需要使用什么测试来仅在类型更改时显示类型？我只希望第一次出现。现在 before-sibling::Table/Type 总是指第一个“行”

转换是在 C# 中完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:52:34.893

这个怎么样：

```
<xsl:if test="not(preceding-sibling::Table[Version=$vn][Type=$currentType])"> 
```

# maven - maven-bundle 插件和 pax-exam：MANIFEST.MF 不存在

> ID：13880813
> 
> 赞同：1
> 
> 时间：2012-12-14T14:42:02.993
> 
> 标签：maven, osgi, apache-felix, maven-bundle-plugin, pax-exam

以下情况：我正在使用 maven 和 maven-bundle-plugin 开发一个 OSGi 应用程序。我想运行单元测试并发现 Pax-Exam，我发现它退出了合适的。

这是我的父母 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>de.hswt.oms</groupId>
<artifactId>workspace-parent</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<repositories>
    <repository>
        <id>com.springsource.repository.bundles.release</id>
        <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/release</url>
    </repository>

    <repository>
        <id>com.springsource.repository.bundles.external</id>
        <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/external</url>
    </repository>
</repositories>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                    <manifestEntries>
                        <Built-By>Tobias Placht</Built-By>
                        <Bundle-ActivationPolicy>lazy</Bundle-ActivationPolicy>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.3.7</version>
            <configuration>
                <instructions>
                    <Export-Package>{local-packages};version="${project.version}"</Export-Package>
                    <Import-Package>*</Import-Package>
                    <Private-Package>{local-packages}</Private-Package>
                    <Service-Component>*</Service-Component>
                </instructions>
            </configuration>
            <executions>
                <execution>
                    <id>bundle-manifest</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>manifest</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <dependencies>
                <dependency>
                    <groupId>org.apache.maven.surefire</groupId>
                    <artifactId>surefire-junit47</artifactId>
                    <version>2.12.4</version>
                </dependency>
            </dependencies>
        </plugin>
        <plugin>
            <groupId>org.ops4j</groupId>
            <artifactId>maven-pax-plugin</artifactId>
            <version>1.5</version>
            <configuration>
                <provision>
                    <param>--profiles=ds</param>
                    <param>--platform=equinox</param>
                    <param>mvn:de.hswt.oms/workspace-datastructure-core/0.0.1-SNAPSHOT@2</param>
                    <param>mvn:de.hswt.oms/workspace-command-core/0.0.1-SNAPSHOT@2</param>
                    <param>mvn:de.hswt.oms/workspace-facade/0.0.1-SNAPSHOT@6</param>
                </provision>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.osgi.core</artifactId>
        <version>1.4.0</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>1.0.7</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.7</version>
    </dependency>
    <dependency>
        <groupId>org.junit</groupId>
        <artifactId>com.springsource.org.junit</artifactId>
        <version>4.11.0</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<modules>
    <module>workspace-datastructure-core</module>
    <module>workspace-command-core</module>
    <module>workspace-log-config</module>
    <module>workspace-wsr-create</module>
    <module>workspace-datastructure-local</module>
    <module>workspace-localfile-create</module>
    <module>workspace-localfolder-create</module>
    <module>workspace-facade</module>
    <module>workspace-osgiframework-tests</module>
</modules> 
```

我创建了包含一个简单测试用例的模块 workspace-osgiframework-tests：

```
import static org.ops4j.pax.exam.CoreOptions.*;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.ops4j.pax.exam.Option;
import org.ops4j.pax.exam.junit.Configuration;
import org.ops4j.pax.exam.junit.ExamReactorStrategy;
import org.ops4j.pax.exam.junit.JUnit4TestRunner;
import org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactorFactory;

import org.osgi.framework.Bundle;
import org.osgi.framework.BundleContext;
import javax.inject.Inject;

@RunWith(JUnit4TestRunner.class)
@ExamReactorStrategy(AllConfinedStagedReactorFactory.class)
public class SampleTest {

@Inject
BundleContext bu = null;

@Configuration
public Option[] config() {

    return options(junitBundles());
}

@Test
public void getHelloService() {
    for (Bundle b : bu.getBundles()) {
        System.out.println("Bundle " + b.getBundleId() + " : "
                + b.getSymbolicName());
    }
} 
```

}

和对应的 pom.xml

```
<project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
<artifactId>workspace-osgiframework-tests</artifactId>

<properties>
    <exam.version>2.5.0</exam.version>
    <url.version>1.4.0</url.version>
</properties>

<parent>
    <groupId>de.hswt.oms</groupId>
    <artifactId>workspace-parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>..</relativePath>
</parent>
<build>
    <plugins>
        <!-- skip plugin execution explicitly -->
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <skip>true</skip>
            </configuration>
            <executions>
                <execution>
                    <id>bundle-manifest</id>
                    <phase>none</phase>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-container-forked</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-junit4</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.exam</groupId>
        <artifactId>pax-exam-link-mvn</artifactId>
        <version>${exam.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.ops4j.pax.url</groupId>
        <artifactId>pax-url-aether</artifactId>
        <version>${url.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.felix</groupId>
        <artifactId>org.apache.felix.framework</artifactId>
        <version>4.0.2</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

我运行 mvn test，一切正常，但如果我运行 mvn install，我会收到以下错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.546s
[INFO] Finished at: Fri Dec 14 15:37:50 CET 2012
[INFO] Final Memory: 27M/233M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:2.4:jar         (default-jar) on project workspace-osgiframework-tests: Error assembling JAR: Manifest file: /home/knacht/development/repositorys/git/oms/workspace-parent/workspace-osgiframework-tests/target/classes/META-INF/MANIFEST.MF does not exist. -> [Help 1] 
```

知道如何摆脱它吗？

这也是我的第一个 maven 项目，所以如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:27:46.773

当您不熟悉 Maven 和 Pax Exam 时，我建议您尽可能坚持默认设置。

并行使用 maven-jar-plugin 和 maven-bundle-plugin 可能会导致您看到的冲突。将您的捆绑项目的 Maven 打包更改为“捆绑”并让 maven-bundle-plugin 生成清单。通常根本不需要直接使用 maven-jar-plugin。

Pax Exam 2.x 不再支持 maven-pax-plugin。你应该在你的方法中使用`bundle()`选项。`@Configuration`

有关最新示例，请查看 Pax Exam 自己的集成测试，网址为[https://github.com/ops4j/org.ops4j.pax.exam2/tree/master/itest/src/it/regression-multi](https://github.com/ops4j/org.ops4j.pax.exam2/tree/master/itest/src/it/regression-multi)。

# c# - 如何实现一个内有比例的表格？

> ID：13880815
> 
> 赞同：0
> 
> 时间：2012-12-14T14:42:06.423
> 
> 标签：c#, forms, validation, checkbox, tabular

我想要一个带有表格的表格。第一行将描述一个比例。在表格中的每个单元格中，都会有一个复选框按钮，我可以选择。（只能选择一个（验证））

```
 **1**             **2**           **3**
a)______________checkBoxbttn_____________________   checkBoxbttn____________________              V

b)     ____________  checkBoxbttn___________________________        V        ___________________      checkBoxbttn 
```

在每一行中只标记一个复选框（验证）后，我需要将每一行的选择保存在一个参数中，以备将来使用。对于上面的例子： int a = 3; 诠释 b = 2;

我该如何实施？验证看起来如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:17:27.967

我建议您使用`TableLayoutPanel`一列和任意数量的行。在每个单元格中，放置一个`Panel`. 在每个面板中，放置三个`RadioButton`控件，以确保只选择其中一个。

要知道选择了哪个 RadioButton，您可以遍历每个 Panel 的控件并返回第一个选中的控件。

例子：

```
private void button1_Click(object sender, EventArgs e)
    {
        foreach (var row in tableLayoutPanel1.Controls)
        {
            var panel = row as Panel;
            if (panel == null) continue;
            var checkedButton = 
                panel.Controls.OfType<RadioButton>()
                    .FirstOrDefault(r => r.Checked);
            if (checkedButton == null) continue;
            //Process your radiobutton here.
        }
    } 
```

要将特定值分配给 RadioButton，我将创建一个派生自它的类，并使用一个表示您的值的属性。

例子：

```
class ScaleRadioButton : RadioButton
{
    public int MyScale { get; set; }
} 
```

# python - 是否可以列出给定 Flask 应用程序中的所有可用信号？

> ID：13880818
> 
> 赞同：2
> 
> 时间：2012-12-14T14:42:15.600
> 
> 标签：python, signals, flask

是否可以获得给定 Flask 应用程序（添加了任何其他软件包）可能发送的所有信号的列表？（即，因此可以订阅？）

还是 Flask 应用程序 / Flask 框架在发送信号之前不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:46:57.947

假设所有包在导入时都会创建它们的信号（并假设您已经导入了所有您关心的包），您应该能够通过迭代它来内省通过 blinker.signal 创建的所有命名信号。 `blinker.signal`是 的子类[`weakref.WeakValueDictionary`](http://docs.python.org/2/library/weakref.html#weakref.WeakValueDictionary)，因此您可以简单地调用`keys`它来获取信号的所有名称：

```
from blinker import signal
# import everything else here

print sorted(signal.keys()) 
```

请参阅：[`blinker.base`](https://bitbucket.org/jek/blinker/src/f8045f98383c55c45bb7b5f9f8d2b21550df1645/blinker/base.py?at=default)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T13:04:04.937

先前接受的答案（由 Sean Vieira）不适用于 Python 3 上最新版本的 Blinker (1.4)。

要获得所有可用的信号（在 1.4 和 1.3 上经过验证），您应该

```
from blinker import signal

all_signals = signal.__self__.keys() 
```

# .net - 静默自更新 - WPF 应用程序

> ID：13880821
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:42:33.973
> 
> 标签：.net, installation, clickonce, auto-update

早上好，

我们目前正在寻找一种使 WFP 应用程序可自我更新的方法。我们的应用程序将在许多 PC 上运行（我们拥有但它们不在我们的网络中，它们可能位于购物中心、办公室等），但我们希望我们的应用程序能够自我更新（使用没有用户交互，没有人会在那里点击“安装”按钮）。

我知道它可以完成，可能需要单击一次，也可能是本地 Windows 服务检查是否有来自网站的新版本，但我很想听听有关此的建议和评论。

祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:56:02.450

谢谢回复。是的，经过大量阅读后，我发现最好的办法是推出我们自己的自我更新机制，如下所示：

**a）**应用程序自行检查更新，当发现更新时，它会启动更新过程（然后应用程序终止）。

**b)**更新过程下载更新并启动新版本。

我看到这里有很多事情需要考虑：安全性（似乎推荐的文件下载机制应该是 HTTP）。回滚（如果有任何失败，请返回到以前的版本！）。粒度（我应该对每个文件或整个应用程序进行更新吗？）...等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:27:08.450

好吧，我没有使用 Clickonce，但使用了诸如 Advance Installer、Installshield 之类的商业工具，它们做得很好。如果您想实现自己的自动更新，我的建议是： 1) 可以在应用程序本身中完成检查，而不是 Windows 服务（这将是一个矫枉过正的 imo）。这可以是 1) 在应用程序启动时 2) 通过菜单选项 3) 基于周期性频率（例如，每 15 天）。

2) 应用程序检查更新可用后可以下载它，删除当前安装并安装新版本

# c++ - 如何使用纯 c++ 或 winapi 计算给定目录中的项目数？

> ID：13880824
> 
> 赞同：1
> 
> 时间：2012-12-14T14:42:39.263
> 
> 标签：c++, winapi, directory

我的意思是非递归计数，不考虑内部项目（文件或目录或其他）的性质。我必须循环整个目录来计算项目还是这个数字存储在文件系统中的某个地方并且我可以立即访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:17:44.553

循环在技术上是必要的。幸运的是 Visual Studio 已经有了[`<filesystem>`header](http://msdn.microsoft.com/en-us/library/hh874694)，这意味着计算很简单`distance(basic_directory_iterator(path), basic_directory_iterator())`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:28:34.857

在 Windows 上，使用 Windows API，如果不实际枚举所有文件（在目录中），就没有办法做到这一点。为此，您使用[`FindFirstFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)“系列”功能。

最后，[看起来](http://blogs.msdn.com/b/oldnewthing/archive/2009/02/17/9426787.aspx)NTFS（忽略 FAT32 和最新的 ReFS）无论如何都不会跟踪该信息。

# objective-c - -stringByAppendingString：不工作

> ID：13880828
> 
> 赞同：11
> 
> 时间：2012-12-14T14:42:51.003
> 
> 标签：objective-c, nsstring

我需要连接两个 NSStrings ，我写了下面的代码：

```
NSString *reverseResult = [[NSString alloc] initWithFormat:@""];
NSString *zero = [[NSString alloc] initWithFormat:@"0"];
NSString *one = [[NSString alloc] initWithFormat:@"1"];
int modRes;
while (num != 0) {
    modRes = num;
    modRes = num % 2;
    if (modRes == 0)
        [reverseResult stringByAppendingString:zero];
    else
        [reverseResult stringByAppendingString:one];
    num = num / 2;
} 
```

当我调试代码时，我看到“stringByAppendingString”没有做我需要的事情（reverseResult 保持@“”，即使它到达那一行）。

代码有问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T14:45:44.760

stringByAppendingString 返回一个新字符串，它不会修改现有字符串。您必须将结果存储在变量中。

# python - 删除 Django 模板中字符串的最后 3 个字母 [:-3]

> ID：13880831
> 
> 赞同：9
> 
> 时间：2012-12-14T14:43:00.800
> 
> 标签：python, django, django-templates

我正在执行以下操作：

```
{% for wrapping in wrappings %}  //array of strings
<input type="radio" value="{{ wrapping[:-3] }}" etc 
```

我想输出包装中的所有字符串减去最后 3 个字母，但我收到一个：

`TemplateSyntaxError: Could not parse the remainder: '[:-3]' from 'wrapping[:-3]`.

知道有什么问题/如何做到这一点吗？谢谢，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T14:47:42.280

您可以只使用切片过滤器：

```
{{ wrapping|slice:":-3" }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:46:53.873

你想要那个[`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#slice)过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:53:14.540

`{{ variable|slice:":-3" }}`会做的。

# javascript - HighChart 标记突出显示/工具提示问题，突出显示标记不移动

> ID：13880840
> 
> 赞同：1
> 
> 时间：2012-12-14T14:43:45.933
> 
> 标签：javascript, jquery, highcharts, jsfiddle

当我将鼠标移到图表上时，我希望标记移动并且工具提示会出现并突出显示每个点。但是，它只是停留在开始。如果我在起点左右移动鼠标，它会突出显示第一个点和最后一个点？

任何想法如何解决这个问题，以便在每个点上正确突出显示？

```
 $(function() {
    var chart;
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: "renderChart",
                    type: 'line'
                },
                xAxis: {
                    type: 'datetime'
                },
                series: [{
                    data: [[1317772800000, 1087.5], [1317686400000, 1087.5], [1317600000000, 1087.5], [1317340800000, 1087.5], [1317254400000, 1087.5], [1317168000000, 1087.5], [1317081600000, 1087.5], [1316995200000, 1100], [1316736000000, 1100], [1316649600000, 1100], [1316563200000, 1100], [1316476800000, 1100], [1316390400000, 1100], [1316131200000, 1100], [1316044800000, 1100], [1315958400000, 1100], [1315872000000, 1100], [1315785600000, 1100], [1315526400000, 1125], [1315440000000, 1125]]
                }]
            });
}); 
```

[http://jsfiddle.net/WAH8G/](http://jsfiddle.net/WAH8G/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:10:46.627

请按时间升序对基于时间的数据进行排序。那应该解决它。

# actionscript-3 - 用 for 循环制作动画？

> ID：13880842
> 
> 赞同：0
> 
> 时间：2012-12-14T14:43:52.627
> 
> 标签：actionscript-3, for-loop

我正在使用 for 循环将多个对象添加到舞台，从那里我想为它们设置动画，但是当我尝试只移动一个球时。

这是我的代码。

*（球是从外部类中拉出来的）*

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite
    {

        private var ball:Ball;
        private var ax:Number = 4;

        public function Main()
        {
            init();
        }
        private function init():void
        {
            for(var i:Number = 0; i < 10; i++)
            {
                ball = new Ball();
                ball.x = Math.random() * stage.stageWidth;
                ball.y = Math.random() * stage.stageHeight;
                addChild(ball);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame1);
        }
        private function onEnterFrame1(event:Event):void
        {
            ball.x += ax;
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:13:08.947

您应该将所有对象推入数组并更改每个球的 x 属性。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite
    {
        private var ball:Ball;
        private var ax:Number = 4;

        private var balls:Array;

        public function Main()
        {
            init();
        }

        private function init():void
        {
            balls = new Array();
            for(var i:Number = 0; i < 10; i++)
            {
                ball = new Ball();
                ball.x = Math.random() * stage.stageWidth;
                ball.y = Math.random() * stage.stageHeight;
                addChild(ball);

                balls.push(ball);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame1);
        }
        private function onEnterFrame1(event:Event):void
        {
            for(var i:int = 0; i < balls.length; i++)
            {
                balls[i].x += ax;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:19:52.443

**创建 10 个球**

1.  去除`private var ball:Ball;`
2.  `var ball:Ball;`在 init 方法中添加 a ，就在*for*之前。

如果您不这样做，那么属于您的 Main 类的*ball对象只会在您的循环中更新 10 次，但您仍然只能得到一个对象。*

**动画 10 个球**

您必须将您的球保存在一个容器中，该容器必须属于您的 Main，因为您要从您班级的几个功能中访问它。

```
package
{
    import flash.display.MovieClip;
    import flash.events.Event;

    public class Main extends MovieClip
    {
        private var ballsContainer:MovieClip;
        private var ax:Number;

        public function Main()
        {
            init();
        }

        private function init():void
        {
            ax = 4;

            ballsContainer = new MovieClip();
            addChild(ballsContainer);

            var ball:Ball;
            for (var i:Number = 0; i < 10; i++)
            {
                ball = new Ball();
                ball.x = Math.random() * stage.stageWidth;
                ball.y = Math.random() * stage.stageHeight;
                ballsContainer.addChild(ball);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame1);
        }

        private function onEnterFrame1(event:Event):void
        {          
            for (var i:Number = 0; i < ballsContainer.numChildren; i++)
            {
                Ball(ballsContainer.getChildAt(i)).x += ax;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:31:42.140

你可以让球处理它自己的运动。

```
package
{
  import flash.display.MovieClip;
  import flash.events.Event;
  import flash.utils.getTimer;
  public class Ball extends MovieClip {
    private var currentTime = getTimer();
    public function Ball(){
       addEventListener(Event.ENTER_FRAME, onEnterFrame);
    }
    private function onEnterFrame1(event:Event):void {
      diff = currentTime - prevTime;
      x += diff *  ax 
      prevTime = currentTime;//update for next go around
    }
  }
} 
```

那么，为什么要使用计时器而不是帧来制作动画呢？好吧，您不必这样做，但您不能总是确定两帧之间的时间。在这种情况下，您的速度始终保持不变，即使您的帧速率不是这样。

# javascript - jQuery on click css3 旋转

> ID：13880848
> 
> 赞同：0
> 
> 时间：2012-12-14T14:44:26.333
> 
> 标签：javascript, jquery

我需要让图像旋转，其变换原点为 50% 50%。以下是正确的吗？它似乎对我不起作用。

```
 function slideUp_Menu(){
                    $('.main_nav').slideUp('slow', function(){
                        $("#arrow_up").css({ "-webkit-transform": "rotate(180deg)" });
                        $("#arrow_up").css( "-webkit-transform-origin", "50% 50%");
                    });// $('.tab_wrapper').animate({ marginTop: '193px' }, 500, 'linear');
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:00:48.413

我会在 CSS 中将转换添加到您的课程中，例如：

```
transition: transform 1s ease; 
```

然后创建另一个类并在那里设置转换，例如：

```
transform: rotate(10deg); 
```

然后我会使用 jquery 添加/删除类，例如：

```
$(document).on('click', 'selector', function() {
 $(this).addClass('class with transform');
}); 
```

请记住在您的 css 选择器中包含所有浏览器前缀。

Js小提琴：http: [//jsfiddle.net/FhXj6/](http://jsfiddle.net/FhXj6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:55:36.453

您可能可以使用 jQuery 来实现，但我建议您使用 Greensock 来制作动画：

```
https://www.greensock.com/gsap-js/ 
```

性能要好得多，旋转之类的东西轻而易举。在选择器的末尾使用 .get(0) ，jQuery 是一个很好的合作伙伴 :)

```
TweenMax.to($("#arrow_up").get(0), {css:{rotation:180}}); 
```

如果你想变换原点看这里：

```
https://www.greensock.com/get-started-js/
"transformOrigin – Sets the origin around which all transforms occur. By default, it is in the center of the element ("50% 50%")." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:48:29.557

没有人不正确，它适用于支持 webkit 的浏览器！

```
 function slideUp_Menu(){
                $('.main_nav').slideUp('slow', function(){
                    $("#arrow_up").css({ "-moz-transform": "rotate(180deg)" });
                    $("#arrow_up").css( "-moz-transform-origin", "50% 50%");
                    $("#arrow_up").css({ "-webkit-transform": "rotate(180deg)" });
                    $("#arrow_up").css( "-webkit-transform-origin", "50% 50%");
                    $("#arrow_up").css({ "transform": "rotate(180deg)" });
                    $("#arrow_up").css( "transform-origin", "50% 50%");
                });// $('.tab_wrapper').animate({ marginTop: '193px' }, 500, 'linear');
    } 
```

# sql - pl sql中的日期差异条件

> ID：13880852
> 
> 赞同：1
> 
> 时间：2012-12-14T14:44:34.927
> 
> 标签：sql, oracle, date, select, plsql

我在 PL-SQL 中有一个查询。我想选择与当前日期差大于一天和其他一些条件的记录...

```
select round(sysdate - u.RecordDate) as deleteme,
       round(sysdate - u.Payment_date) as payment,
       nvl(isverified, 0) as Verified

  from user_cards u

 where ((round(sysdate - u.RecordDate) > 0) || (round(sysdate - u.Payment_date) > 0))
   and nvl(isverified, 0) = 0
 order by id desc 
```

**但是这里有个问题** `where ((round(sysdate - u.RecordDate) > 0) || (round(sysdate - u.Payment_date) > 0))`

任何想法我如何获得日期差异超过一天的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:49:54.120

要获取日期差异超过一天的记录，减去日期并测试大于 1 就足够了：

```
sysdate - u.RecordDate > 1 
```

对于您的代码：

```
sysdate - u.RecordDate > 1 OR sysdate - u.Payment_date > 1 
```

更多信息：[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i48042](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i48042)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:35:08.957

我真的很不喜欢这种“日期X和今天的差超过Y天”的说法，……人们真的会这样说话吗？您通常不会说日期 X 早于 Y 天前吗？

无论如何，为了可以使用索引，我会选择：

```
u.RecordDate < sysdate-1 OR u.Payment_date < sysdate-1 
```

如果这是一项常规工作，那么它可以由一个基于函数的单列索引来支持，该索引有助于以下谓词：

```
Least(u.RecordDate,u.Payment_date) < sysdate-1 
```

# javascript - 为什么 navigator.productSub 在 Chrome 和 Safari 上总是等于“20030107”？

> ID：13880858
> 
> 赞同：3
> 
> 时间：2012-12-14T14:45:06.897
> 
> 标签：javascript, google-chrome, dom, browser, safari

根据[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.productSub)，古老的`navigator.productSub`属性返回“浏览器的内部版本号”。这可能在九十年代有效，但现在已经毫无用处了。

但是，我对某些浏览器返回的数字感兴趣。Chrome 和 Safari 总是返回值`20030107`，Firefox 似乎返回`20100101`。这两个数字有什么关系？是否`20030107`代表 2003 年 7 月 1 日？然后发生了什么如此有趣？

这里希望有人可以挖掘一点网络历史。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:27:06.420

2003 年 1 月 7 日[2] 在公司的 OS X 操作系统上首次作为公开测试版发布...

[https://en.wikipedia.org/wiki/Safari_(web_browser)](https://en.wikipedia.org/wiki/Safari_(web_browser))

Chrome 基于 WebKit

WebKit 的 HTML 和 JavaScript 代码最初是作为来自 KDE [3] 的 KHTML 和 KJS 库的一个分支，现在已经由来自 KDE、Apple Inc.、诺基亚、谷歌、Bitstream、RIM、Igalia 等的个人进一步开发。 [4] 该项目支持 OS X、Windows、GNU/Linux 和其他一些类 Unix 操作系统。 [5]

[https://en.wikipedia.org/wiki/WebKit](https://en.wikipedia.org/wiki/WebKit)

# javascript - 在包含 JApplet 的网页中使用键盘事件

> ID：13880861
> 
> 赞同：0
> 
> 时间：2012-12-14T14:45:19.333
> 
> 标签：javascript, jquery, keyboard-shortcuts, keyboard-events

我在收听包含 JApplet 的网页中的键盘事件时遇到问题。

网页的一半区域被 JApplet 占据。另一半是 HTML。

我这样定义我的 javascript 事件处理程序：

```
function keyPressedTest(){
    alert("key pressed!!!");
}

function initListener(){
   document.onkeypress = keyPressedTest;
} 
```

当我单击页面的 HTML 部分时，Javascript 键盘侦听器工作正常。问题是，当我单击 Applet 时，没有在按键时调用 javascript 侦听器。

我也尝试过使用 jQuery，但同样的问题。

任何人都知道为什么当我单击 JApplet 并按下一个键时没有调用 javascript 侦听器？有没有办法为 HTML 和 JApplet 配置 javascript 侦听器？或者拦截更高级别的按键事件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:28:22.513

好的，感谢 Cerbrus，我发现键盘事件不会在 Applet 和 HTML 代码之间传播，就像他说它们是不同的技术一样。我想这也是安全问题，因此其他对象不会充当键盘记录器并窃取您的密码。

我最终做的是从 Java Applet 中获取键盘事件并将它们转发到 Javascript 代码。

# matlab - 在不打开图形的情况下保存 Matlab 文本

> ID：13880864
> 
> 赞同：1
> 
> 时间：2012-12-14T14:45:21.720
> 
> 标签：matlab, matlab-figure

我正在尝试在 matlab 中使用文本函数，并将其用作图像，如下所示：

```
text('HorizontalAlignment'  , 'center'  ,...
     'position'             , [.5 .5]   ,...
     'string'               , 'HELLO'   ,...
     'FontName'             , 'Arial'   ,...
     'FontSize'             , 300       ,...
     'BackgroundColor'      , 'w');
axis off;
g=getframe(gca);
image=g.cdata;
close; 
```

每次打开和关闭数字真的很困扰我。我用谷歌搜索，我发现[保存 Matlab 图没有绘制它？](https://stackoverflow.com/questions/5818469/save-matlab-figure-without-plotting-it)但它并没有解决问题。我也试过`set(gca,'Visible','off');`，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:26:00.710

你应该试试[这个](http://www.mathworks.com/matlabcentral/fileexchange/10889-savefig)Matlab 文件交换功能。它以您想要的任何格式保存图形，您不需要显示它。无论如何，如果您的程序定期显示数字并且您想在运行时显示并关闭它们，请尝试以下不同的命令：

```
[commandwindow][2] % Directs the user to command window

close all %closes all figures opened

pause %pauses the run until user presses any key in command window

[movegui][3] %can make a figure be shown where the user sets it (not always in the centre of the screen!) 
```

使用它们中的四个，您可以通过在程序运行时自动打开和关闭图形来进行有趣的运行，并且用户已经理解或检查了图形。将此与图像保存功能相结合，您可以构建一个非常好的程序！

我确信还有更多有用的命令，但我自己还没有使用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T20:16:44.203

你为什么使用`getframe`而不只是[`print`](https://www.mathworks.com/help/matlab/ref/print.html?s_tid=doc_ta)？

这段代码似乎完全符合您的要求：

```
fig = figure('Visible', 'off'); % as you know - make the fig invisible
t = text('HorizontalAlignment'  , 'center'  ,...
     'position'             , [.5 .5]   ,...
     'string'               , 'HELLO'   ,...
     'FontName'             , 'Arial'   ,...
     'FontSize'             , 300       ,...
     'BackgroundColor'      , 'w');
axis off;
print(fig,'hello.png','-dpng') % you can chage the settings here to what you need
close(fig) 
```

# mysql - 面向初学者的 mySQL 提示

> ID：13880865
> 
> 赞同：0
> 
> 时间：2012-12-14T14:45:30.753
> 
> 标签：mysql

```
PERSON
DriverID (primary)
DriverName
Address

CAR
RegNO (primary) 
Model 
Year

ACCIDENT
ReportNumber (primary)
AccidentDate
Location

OWNS
DriverID (primary key)  foreign key with PERSON(DriverID)
RegNo (primary Key) foreign key with CAR(RegNo)

PARTICIPATION
DriverID (primary key) foreign key with PERSON (DriverID)
RegNo (primary Key) foreign key with CAR(RegNo)
ReportNumber (primary key) foregin with ACCIDENT(primary)
Damage Amount 
```

查询是 -> 查找涉及属于特定型号的汽车的事故数量

溶胶是

```
SELECT COUNT (a.ReportNumber)
FROM ACCIDENT a
WHERE
a.ReportNumber in ( SELECT pa.ReportNumber FROM PARTICIPATED pa, CAR c
WHERE pa.RegNo = c.RegNo AND c.Model = 'honda'); 
```

我的问题是如何理解涉及 C++ 中嵌套查询的复杂查询你可以使用断点进行调试，但如何在 mySQL 中调试我使用 SQLyog，我知道包括 GROUP 在内的所有基本查询，但是当嵌套查询出现时我无法理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:03:52.527

自行运行此查询：

```
SELECT pa.ReportNumber FROM PARTICIPATED pa, CAR c
WHERE pa.RegNo = c.RegNo AND c.Model = 'honda' 
```

看看`reportnumbers`并把它们放在你的脑海里。

现在运行这个查询：

```
SELECT a.ReportNumber FROM ACCIDENT a 
```

因此，第一个查询会为您提供所有报告编号，`participated`其中包含`'honda'` `car`. 第二个查询让你每次`reportnumber`都在`accident`.

将它们放在一起，您就可以`reportnumber`从带有.`accident``participated``'honda'`

我希望这能回答你的问题，我不是很清楚你在问什么。

# mysql - 无索引更高效的 JOIN

> ID：13880868
> 
> 赞同：0
> 
> 时间：2012-12-14T14:45:37.927
> 
> 标签：mysql, database, join

有时我需要通过类似的方式加入两张大桌子

```
SELECT t1.x + t2.x FROM t1 JOIN t2 USING (some_unimportant_column) 
```

这需要很长时间，因为两个表都很大并且没有索引`some_unimportant_column`。我不想保留索引，因为它在更新期间会占用磁盘空间和时间；此外，有时我需要一个 join `USING (another_unimportant_column)`。

虽然这种 JOIN 的频率不足以证明索引的合理性，但等待一个小时以进行极其低效的计算并不罕见。效果很好的是

*   在一个表的列上创建索引
*   执行 JOIN
*   删除索引

但是手动执行此操作很乏味，并且由于 DDL 命令而导致的提交令人讨厌。

我想知道为什么数据库不能自己解决这个问题？我正在使用 mysql 并且还想知道其他数据库引擎是否对此更聪明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:17:01.300

您可以使用存储过程来做到这一点。

存储过程将创建索引，运行 sql，然后删除索引。

# python - 如何使用 MPI 在 Python 中的进程之间共享数据？

> ID：13880870
> 
> 赞同：3
> 
> 时间：2012-12-14T14:45:40.677
> 
> 标签：python, mpi

我正在尝试并行化我编写的脚本。每个进程都需要进行计算并将数据存储到数组的特定部分（列表列表）。每个进程都在计算和存储它的数据，但我不知道如何将数据从非根进程获取到根进程，以便它可以将数据打印到文件中。我为我的脚本创建了一个最小的工作示例——这个示例仅为简单起见而设计为在 2 个内核上运行：

```
from mpi4py import MPI 
import pdb 
import os

comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()

# Declare the array that will store all the temp results
temps = [[0 for x in xrange(5)] for x in xrange(4)]

# Loop over all directories
if rank==0:
   counter = 0 
   for i in range(2):
      for j in range(5):
         temps[i][j] = counter
     counter = counter + 1 

else:
   counter = 20
   for i in range(2,4):
      for j in range(5):
         temps[i][j] = counter
         counter = counter + 1 

temps = comm.bcast(temps,root=0)

if rank==0:

   print temps 
```

我使用以下命令执行脚本：

```
mpiexec -n 2 python mne.py 
```

案例结束后，输出为：

```
[0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0]] 
```

所以你可以看到数据共享没有按我的意愿工作。有人可以告诉我将数据返回根进程的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:48:28.093

代码工作正常，只是没有做你想做的事。

这条线

```
temps = comm.bcast(temps,root=0) 
```

将处理器 0 的变量广播`temps`到所有处理器（包括等级 0），这当然给出了上面的结果。您想使用`gather`（或者`allgather`，如果您希望所有处理器都有答案）。那看起来更像这样：

```
from mpi4py import MPI
import pdb
import os

comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()

assert size == 2

# Declare the array that will store all the temp results
temps = [[0 for x in xrange(5)] for x in xrange(4)]

# declare the array that holds the local results
locals =[[0 for x in xrange(5)] for x in xrange(2)]

# Loop over all directories
if rank==0:
   counter = 0
   for i in range(2):
      for j in range(5):
         locals[i][j] = counter
         counter = counter + 1

else:
   counter = 20
   for i in range(2):
      for j in range(5):
         locals[i][j] = counter
         counter = counter + 1

temps = comm.gather(locals,temps,root=0)

if rank==0:
   print temps 
```

如果您真的想就地进行收集，并且您知道（比如说）所有真实数据都将大于您初始化数据所用的零，您可以使用归约操作，但这更容易使用 numpy 数组：

```
from mpi4py import MPI
import numpy

comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()

assert size == 2

# Declare the array that will store all the temp results
temps = numpy.zeros((4,5))

# Loop over all directories
if rank==0:
   counter = 0
   for i in range(2):
      for j in range(5):
         temps[i,j] = counter
         counter = counter + 1

else:
   counter = 20
   for i in range(2,4):
      for j in range(5):
         temps[i,j] = counter
         counter = counter + 1

comm.Allreduce(MPI.IN_PLACE,temps,op=MPI.MAX)

if rank==0:
   print temps 
```

# java - Java 7 无法从对象中检索信息

> ID：13880871
> 
> 赞同：0
> 
> 时间：2012-12-14T14:45:41.357
> 
> 标签：java

这是我的第一篇文章，如果做得不对，请见谅。该程序适用于我的 AP 计算机科学课程（我不想要代码示例，只是解释为什么会发生这种情况）。每当我尝试从对象中获取变量时，都会收到一条错误消息，指出该变量不存在（NetBeans IDE）。提前致谢！

这是代码：

```
public class AnnualFuelTester 
{   
    public static void main(String [] args)
    {
        AnnualFuelUse Fill1 = new AnnualFuelUse(1, 1,  45023, 45231, 10.00, 2.95);
        AnnualFuelUse Fill2 = new AnnualFuelUse(2, 4,  45231, 45480, 11.70, 2.99);
        AnnualFuelUse Fill3 = new AnnualFuelUse(3, 8,  45480, 45659,  9.30, 3.03);
        AnnualFuelUse [] FillArray = {Fill1, Fill2, Fill3};

        System.out.println("Fillup    Days    Start Miles    Distance    Gallons        Consumed    MpG    Fuel Price    Cost");
        **int temp = Fill1.distance;**
        System.out.printf ("%4.1f     %4.1f   %4.1f          %4.1f       %4.1f                   %4.1f  %4.1f         %4.1f", );
    }
} 
```

（编辑：）年度燃料使用：

```
public class AnnualFuelUse 
{
    private int dist = 0;
    private double MpG = 0;
    private double CoT = 0;
    private double totals = 0;
    private double projection = 0;
    private double min = 0;
    private double max = 0;

    Annual_Fuel_Use(int fillTemp, int daysTemp, int startTemp, int stopTemp, double gallTemp, double priceTemp){
        int fillNumber = fillTemp;                                       
        int daysSinceLastFill = daysTemp;                                       
        int startMiles = starttemp;                                     
        int stopMiles = stoptemp;                                       
        int distance = Annual_FuelUse.travelDistance(startMiles, stopMiles);
        double fuelConsumed = galltemp;
        double mPG = AnnualFuelUse.milesPerGal(dist, fuelConsumed);
        double pricePerGallon = pricetemp;
        double tripCost = AnnualFuelUse.costOfTrip(pricePerGallon, fuelConsumed);
    }

    public double getMilesPerGal(){
        return MpG;        
    }

    public int getTravelDistance(){
        return dist;        
    }

    public double getCostOfTrip(){
        return CoT;        
    }

    public double getTotals(){
        return totals;
    }

    public double getProjection(){
        return projection;
    }

    public int travelDistance(int distance1, int distance2){   
        dist = distance2 - distance1;
        return dist;
    }

    public double milesPerGal(int travelDistance, double fuelConsumed){        
        MpG = travelDistance / fuelConsumed;
        return MpG;
    }

    public double costOfTrip(double pricePerGal, double fuelConsumed){        
    CoT = pricePerGal * fuelConsumed;
        return CoT;
    }

    public double totals(double dat1, double dat2, double dat3){
        totals = dat1 + dat2 + dat3;
        return totals;
    }

    public double projection(int days,double projected){
        projection = (projected / days) * 365;
        return projection;
    }

    public double dataMin(int dat1, int dat2, int dat3){
        if (dat1 <= dat2){
            min = dat1;
        }
        if (min <= dat3){
            return min;
        } else {
            return dat3;
        }
    }

    public double dataMax(int dat1, int dat2, int dat3){
        if (dat1 >= dat2){
            max = dat1;
        }
        if (max >= dat3){
            return max;
        } else {
            return dat3;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:49:05.170

我刚刚注意到您错误地使用了`static`字段。您应该避免在构造函数中设置静态字段，因为这会导致混乱的噩梦。

我建议你

*   使您的所有字段都非静态，以及使用它们的任何方法都是非静态的。如果您不这样做，您的所有对象实际上都在使用相同的字段，而不是它们自己的字段。
*   让你的吸气剂匹配你的字段名称。尽量保持一致性，否则也会导致混乱。例如，如果您也`travelDistance`使字段名称相同。如果你想清楚说明 getter 方法`getTravelDistance`
*   不要设置很多变量然后丢弃。只保留有用的代码，这也会令人困惑。
*   不要在类名中使用下划线。

一般来说，您需要保持一致性，例如，您的 min/max 方法一半是使用数学实现的，一半是您自己的代码。

我建议您在继续之前修复所有代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:20:49.557

首先，我看不到和`distance`变量，但我确实看到`dist`了，这也是私有的。

为您的字段创建吸气剂

```
 public int getDist(){
   return dist;
 } 
```

然后在你的`Annual_Fuel_Tester`课堂上使用 then

```
int temp = FILL_1.getDist(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:57:31.407

您的 Java (bean) 类的设计存在一些基本缺陷，正如您所见，这会导致使用它时出现问题。

*   最直接的问题是范围/可见性之一。您的类变量被声明为私有的，这意味着它们在类本身之外是不可见的。为了以您现在的方式使用它们（在 main 方法中），您需要将它们设为公共或包私有。但是不要！见下点。

*   您将类变量设为私有是正确的，这是由于[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)的原则。一个对象应该尽可能多地隐藏它的内部实现，同时提供一个一致的接口来与之交互。您缺少的是调用者可以用来操作对象的内部状态的 getter/setter。把它们加进去！

*   您的类变量就是这样 - 类变量！这是因为您已将它们设为静态。这意味着您班级的所有实例都将共享相同的值 - 我很确定这不是您想要的。通过删除这些字段上的 static 关键字来解决此问题。还要从所有类方法中删除 static 关键字。

*   最后，您没有使用好的[Java Naming Conventions](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。这样做可以使您的代码对您自己和其他人都更具可读性。相信我，如果您遵循这些约定，您将能够比不遵守这些约定更快地识别、诊断和修复错误。

您的 Java (bean) 类应如下所示：

```
public class AnnualFuelUse {
    private int dist = 0;
    private double MpG = 0;
    private double CoT = 0;
    private double totals = 0;
    private double projection = 0;

    // Constructors

    // Non-static getters/setters

    // Other methods
} 
```

你的调用类应该是这样的：

```
public class AnnualFuelTester {   
    public static void main(String [] args) {
        AnnualFuelUse fill1 = new AnnualFuelUse(1, 1,  45023, 45231, 10.00, 2.95);
        int temp = fill1.getDistance();
    }
} 
```

这应该让您朝着正确的方向开始。

# html - 超链接上的 data-indexable 和 data-name 属性的目的是什么？

> ID：13880876
> 
> 赞同：2
> 
> 时间：2012-12-14T14:45:52.497
> 
> 标签：html, hyperlink

我在一个网站上遇到了这个 URL：

```
<a href="#" title="Blue" data-indexable="1" data-name="color-blue" class="linkfilter color">Blue</a> 
```

属性 data-indexable 和 data-name 有什么用途？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:48:08.750

`data-*`特定属性背后没有标准化的含义；而是根据您的*个人*需求创建它们。在这种情况下，该名称暗示将帮助索引此元素以及其他元素，或帮助识别其当前位置。另一个，可能存在以提供有关元素及其价值的附加信息 - 真的没有说。

正如[规范](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)所说：

> 自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:48:18.617

您可以在 html 元素上创建自己的有效属性，只要在它们前面加上 data-。它在构建 ajax/富 Internet 应用程序时很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:48:33.350

HTML 中的`data`属性是自定义属性。它们在 HTML 规范方面没有任何意义。例如，它们只是允许作者存储要在脚本中使用的数据。

# node.js - 示例 app.js 无法启动，导致 GAVE UP 应用程序无法在 Cloud Foundry 上启动

> ID：13880883
> 
> 赞同：0
> 
> 时间：2012-12-14T14:46:27.790
> 
> 标签：node.js, cloud-foundry

这就是我所做的，直接来自[http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html](http://docs.cloudfoundry.com/frameworks/nodejs/nodejs.html)，为过时的文档留出余地：

```
$ vmc push vknodesample01
Instances> app.js

1: node
2: other
Framework> 1   

1: node
2: node06
3: node08
4: other
Runtime> 1

1: 64M
2: 128M
3: 256M
4: 512M
5: 1G
6: 2G
Memory Limit> 1  

Creating vknodesample01... OK

1: vknodesample01.cloudfoundry.com
2: none
URL> vknodesample01.cloudfoundry.com

Updating vknodesample01... OK

Create services for application?> n

Save configuration?> y

Saving to manifest.yml... OK
Uploading vknodesample01... OK
Using manifest file manifest.yml

Starting vknodesample01... OK
Checking vknodesample01... GAVE UP
Application failed to start.

$ cat app.js
$ cat app.js
var http = require('http');
http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://example.com:1337/'); 
```

example.com 实际上是一二十七点 0 点 0 点 1

我没有包含 package.json 文件，因为文档说你不需要它，除非你有 server.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:46:17.617

我会取出环回地址，所以它看起来像这样......

```
var http = require('http');
http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337); 
```

当您部署时，我还会选择“node08”而不是“节点”框架选项。

# php - 如何从包含 unix 时间戳中日期字段的表中获取记录？

> ID：13880895
> 
> 赞同：0
> 
> 时间：2012-12-14T14:47:01.737
> 
> 标签：php, mysql, codeigniter

我使用 PHP 中的 time() 函数存储我的日期。我的程序中有一个搜索部分。日期字段由 jquery datepicker 完成。这是我的日期格式，例如：14/12/2012。

问题是表中的字段是时间戳。如何使用 MySQL 查询从此日期字符串中选择实际日期？

我正在使用 codeigniter 作为框架。有什么功能可以做到这一点吗？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:51:18.480

PHP 中的 time() 只返回一个 unix 时间戳 - 自 1970 年 1 月 1 日以来的秒数。MySQL 时间戳、日期和日期时间字段与该值不直接兼容，但您可以轻松地在两者之间进行转换：

```
SELECT UNIX_TIMESTAMP(yourtimestampfield) AS php_compatible_time_value, ... 
```

注意 MySQL 的日期字符串格式是`yyyy-mm-dd`. 除非您转换为 MySQL 的预期格式，否则您不能使用您`dd/mm/yyyy`的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:51:28.557

```
$date = '14/12/2012';
$d = explode('/',$date);
$timestamp = mktime(0, 0, 0, $d[1], $d[0], $d[2]); 
```

然后在查询中使用 $timestamp

当然，对于英国/美国等不同格式的日期，您将需要不同的方法。 mm/dd/yyyy 或 dd/mm/yyyy

# javascript - 将 Ajax 请求限制为 Foursquare 建议完成

> ID：13880897
> 
> 赞同：2
> 
> 时间：2012-12-14T14:47:26.883
> 
> 标签：javascript, ajax, jquery, twitter-bootstrap, foursquare

我通过 javascript 使用 Twitter bootstrap 的 typeahead 来使用以下代码片段为foursquare场地提供 typeahead ：

```
 function addLocationTypeaheadHandler() {
    $('input#location').keyup(function() {callFoursquareForTypeahead()});
}

function callFoursquareForTypeahead() {
    var inputQuery = $('input#location').val();
    if (inputQuery.length == 3) {
        $('input#location').typeahead({
                source: function(query, process) {
                    var urlString = "https://api.foursquare.com/v2/venues/suggestcompletion?ll=" + $('#latitude-field').val() + "," + $('#longitude-field').val() +
                       "&radius=1000&client_id=" + clientid + "&client_secret=" + clientsec;
                    return $.get(urlString, {query: $('input#location').val()},
                        function(json) {
                            venueNames = [];
                            $.each(json.response.minivenues, function(index,value) {
                                venueNames.push(value.name);
                            });
                            return process(venueNames);
                        }
                    );
                }
        });
    }
} 
```

它目前可以工作，但在我的网络请求中，每次我更改查询时，我都会看到一个新的 XHR 请求到foursquare。我尝试使用带有 inputQuery 长度条件的（不太优雅的）keyup 事件来最小化它们，但它仍然被调用。

我想知道是否有办法最小化这些请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T19:08:58.660

也许迟到了，但看起来[新版本的 Typeahead](https://github.com/twitter/typeahead.js)会在这里帮助你。

[新版本在其远程数据源](https://github.com/twitter/typeahead.js#remote)的概念中内置了一个 rateLimitWait，它允许您限制 typeahead 尝试进行的每次调用之间的毫秒数。

它看起来也不需要将它绑定到 keyup，因为[示例说它](http://twitter.github.io/typeahead.js/examples/)可以自己监听输入字段中的变化。这将帮助您避免可能最终绕过您的速率限制的双重绑定。

# php - jQuery 函数不适用于已用 Ajax 加载的数据

> ID：13880900
> 
> 赞同：1
> 
> 时间：2012-12-14T14:47:41.487
> 
> 标签：php, javascript, jquery

当用户单击链接时，它会运行`$.post`以检索一些数据并显示它。其中一个链接会拉出一个会话表，每个会话旁边都有一个按钮。这是其中一个按钮的代码：

```
<button class="view_session btn btn-info" id="3f87d50493698d06b9b48abe36cd8fc8">Details</button> 
```

这是我的 jQuery 函数：

```
$('.view_session').click(function(){
    $('#blanket').show();
    $('#load').show();
    $.post("admin/session.php", { id: $(this).attr('id') }, function(data){
        $('#sort').html(data);
        $('#first').hide();
        $('#load').hide();
        $('#blanket').hide();
    }); 
}); 
```

但什么也没有发生。我进行了`Console.log`测试，没有任何触发。有什么我必须做的，因为按钮是在页面最初加载后创建的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:50:57.090

如果您正在动态添加按钮，`.click`除非它已经存在，否则不会绑定到它。您要么需要在按钮添加到 DOM*后进行绑定，要么使用委托，如下所示：*

```
$(document).on('click', '.view_session', function () { 
```

（一个比更好的选择器更具体的选择器`document`）。

除此之外，作为函数的第三个参数`$.post`仅在成功时出现。您也可以使用延迟接口方法来检查失败和完成：

```
$.post(...).then(success).fail(failure).done(complete); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:05:56.387

> 有什么我必须做的，因为按钮是在页面最初加载后创建的？

是的。

这样做的原因是处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于绑定发生的点。

解决方案是您要么必须手动将事件重新绑定到已添加的元素，要么使用委托绑定事件。

对于 jQuery 1.7 或更高版本`on()`与委托一起使用：

```
$("#YourclosestStaticElement").on("click", ".view_session", function () {
   //... same code as before
} 
```

对于 jQuery 1.4.3 到/包括 1.6 使用`delegate()`：

```
$("#YourclosestStaticElement").delegate(".view_session", "click", function () {
   //... same code as before
} 
```

对于 jQuery 1.3 到/包括 1.4.3`live()`将是唯一的方法，除了手动重新绑定：

```
$(".view_session").live("click", function () {
   //... same code as before
} 
```

此外，被弃用的原因有很多`live()`，例如它总是在触发事件之前冒泡到文档中，`stopPropogation()`例如，含义可能会成为一个问题。

完整的原因列表也在`live()`文档中。

从[**文档**](http://api.jquery.com/live/)中引用：

> *   $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> *   $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> *   $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

# java - Java DataOutputStream 在断开连接时不会抛出 IOException

> ID：13880901
> 
> 赞同：0
> 
> 时间：2012-12-14T14:47:44.137
> 
> 标签：java, ioexception, dataoutputstream

`DataOutputStream`当我拔掉电缆时不会抛出`IOException`错误，我的代码有什么问题？

这是我的代码：

```
private void sendMessage(String message) {
    try {
        mDataOutputStream.writeUTF(message);
        mDataOutputStream.flush();
    } catch(IOException ex) {
        close();
    }
} 
```

一旦我重新插入电缆，数据仍会发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:51:54.017

TCP 连接旨在优雅地处理短期故障，并尽可能透明地处理。这意味着当连接丢失短时间（例如少于 3 分钟）时，连接应该透明地重新建立。即使连接超时，您也不会异步知道，可能是下一次读取或写入失败。

# javascript - 从 span 的 innerHTML 获取`selectionStart`

> ID：13880913
> 
> 赞同：7
> 
> 时间：2012-12-14T14:48:16.010
> 
> 标签：javascript, innerhtml

我有一个你自己的文本编辑器，可以让你更改`textarea`元素的一部分。我想调整它以使用跨度元素。我对跨度没有特别的依恋。目标只是让某人编辑 html 而不是 textarea。我在 IE 中运行良好，但在使用 Mozilla 时遇到了一些问题。

因为我使用的是跨度而不是表单输入，所以我使用`innerHTML`的是值而不是值。但是，`selectionStart`与. `selectionEnd`_`innerHTML``value`

这是`textarea`工作正常的代码....

html

```
<textarea id="textarea>Some text goes here</textarea><a href="javascript:void() onclick="editText">edit</a> 
```

JS

```
function editText() {
    var len = displaytext.value.length; 
    var start = displaytext.selectionStart; 
    var end = displaytext.selectionEnd; 
    var sel = displaytext.value.substring(start, end); returns selection ok
    alert(sel);
} 
```

但是，以下改编并不限制选择开始和结束。

html

```
<span id="textarea>Some text goes here</span><a href="javascript:void() onclick="editText">edit</a> 
```

JS

```
function editText() {
    var len = displaytext.innerHTML.length; //works ok
    var start = displaytext.selectionStart; //does not seem to work
    var end = displaytext.selectionEnd; //does not seem to work
    var sel = displaytext.innerHTML.substring(start, end); //returns whole innerHTML not selection
    alert(sel);
} 
```

有问题`selecionStart`吗`innerHTML`？解决方法？语法错误？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:27:47.923

首先，不要`innerHTML`用于这种事情。`textContent`是去这里的路。

我在这里假设一个符合标准的浏览器或 IE9+。

首先要做的是获取文档选择。你可以这样做

```
var sel = getSelection(); 
```

现在，选择可以是空的，也可以在元素之外，所以检查：

```
var rng, startSel, endSel, sel;
if (!sel.rangeCount
        || displaytext.compareDocumentPosition((rng = sel.getRangeAt(0)).startContainer) === Node.DOCUMENT_POSITION_PRECEDING
        || displaytext.compareDocumentPosition(rng.endContainer) === Node.DOCUMENT_POSITION_FOLLOWING)
    sel = "";
else {
    ... 
```

此时，`rng`包含一个`Range`对象，具有属性`startOffset`和`endOffset`。该值是整数，分别表示和`textContent`属性的位置。`startContainer``endContainer`

您有一个相当简单的案例，它是一个`<span>`具有单个文本节点的元素。在这种情况下，`rng.startContainer`and`rng.endContainer`将始终是`displaytext`，或者某个前面或后面的元素，但不是 的后代`displaytext`。

```
 ...
else {
    startSel = displaytext.compareDocumentPosition(rng.startContainer) === Node.DOCUMENT_POSITION_FOLLOWING ? 0 : rng.startOffset;
    endSel = displaytext.compareDocumentPosition(rng.endContainer) === Node.DOCUMENT_POSITION_PRECEDING ? displaytext.textContent.length : rng.endOffset;
    sel = displaytext.textContent.substring(startSel, endSel);
} 
```

如果结构更复杂`displaytext`，有子元素等等，事情就会变得有点棘手。您必须在 的后代树中找到起始节点的文本偏移量，`displaytext`最好的方法是使用`TreeWalker`遍历文本节点的对象：

```
var tw = document.createTreeWalker(displaytext, NodeFilter.SHOW_TEXT, null, null); 
```

# java - 由于主键，数据库上的插入速度很慢

> ID：13880918
> 
> 赞同：3
> 
> 时间：2012-12-14T14:48:24.950
> 
> 标签：java, mysql, performance

得到一个 MySQL 数据库，其中包含一个基于邮政编码和门牌号的值的表。因此，主键被选择为邮政编码和门牌号码，因为这些是要搜索的字段。该数据库包含大约 1000 万条记录。

一个特定的邮政编码包含约 100000 个不同的门牌号码，并且插入速度极慢（每 10000 条记录需要 1 小时）。

编程语言是 Java，我在一批 10000 中使用准备好的语句，自动提交为 false。

表的结构如下：

```
+-----------------+-------------+------+-----+---- -----+--------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------------+-------------+------+-----+---- -----+--------+
| 邮政编码 | varchar(6) | 否 | 优先级 | 空 | |
| 房子_no | 整数(11) | 否 | 优先级 | 空 | |
| 沙码 | varchar(45) | 否 | | 空 | |
| 仓库 | varchar(3) | 否 | | 空 | |
| 网络点 | varchar(6) | 否 | | 空 | |
| 地区 | varchar(3) | 否 | | 空 | |
| 序列 | 整数(11) | 否 | | 空 | |
| cluster_id | varchar(1) | 否 | | 空 | |
| strand_id | 整数(11) | 否 | | 空 | |
| strand_props_id | 整数(11) | 否 | | 空 | |
| 版本号 | 整数(11) | 否 | 优先级 | 空 | |
+-----------------+-------------+------+-----+---- -----+--------+

```

有谁知道这个问题的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:57:41.477

当您需要插入大量行时，首先删除键，然后插入所有数据，然后重新创建键可能会更快。这样数据库就不需要花费大量时间来更新这些键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:54:13.310

如果您不尝试从 GUI 加载数据，我会推荐 sql loader，它可以在相当快的时间内加载所有数据。

[https://metacpan.org/pod/SQL::Loader::MySQL](https://metacpan.org/pod/SQL::Loader::MySQL)

[http://www.roseindia.net/sql/mysql-example/loader-tutorial.shtml](http://www.roseindia.net/sql/mysql-example/loader-tutorial.shtml)

# vba - 在后台运行宏

> ID：13880920
> 
> 赞同：3
> 
> 时间：2012-12-14T14:48:31.517
> 
> 标签：vba, excel

我在使用 VBA 宏时遇到了一些问题。

1.  `FILE1.xls`打开具有宏的 Excel 文件 ( 这一步没有问题。

2.  当我打开不可见的文件时，我试图打开一个`FILE2.xls`没有宏的新 Excel 文件 ( )（例如我通过邮件收到的文件）。我认为这是来自我的宏的问题。

所以我想在后台运行这个宏并能够打开 6 个不同的 Excel 文件（例如）。

我一直在寻找解决这个问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:02:13.083

您可以在其属性窗口中将 UserForms`ShowModal`属性设置为`False`以防止其阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T19:50:06.287

我使用以下功能在后台打开了几个工作簿。

示例调用：

```
Set newWorkbook = GetWorkbook(scoreCardLink) 
```

功能：

```
Public Function GetWorkbook(fullFileName As String) As Workbook
Application.ScreenUpdating = False
Dim result As Workbook
Dim sFileName As String
On Error Resume Next

strFilePath = fullFileName
vParts = Split(strFilePath, "/")
sFileName = vParts(UBound(vParts))

Set result = Workbooks(sFileName)
If (result Is Nothing) Then
    Application.enableEvents = False
    Set result = Workbooks.Open(fullFileName, ReadOnly = True, IgnoreReadOnlyRecommend = False)
End If
Set GetWorkbook = result
End Function 
```

# visual-studio-2010 - 打不开项目解决方案

> ID：13880929
> 
> 赞同：0
> 
> 时间：2012-12-14T14:49:09.583
> 
> 标签：visual-studio-2010, c#-4.0

我换了电脑。将我的项目文件夹备份到服务器，更换计算机，安装 VS，将项目文件夹移回 C: 驱动器。现在，我无法打开我的项目。他们说他们被“卸载”了。所有的数据都在那里。如何打开这些项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T18:29:42.100

当我下载通过电子邮件发送的项目时，我遇到了类似的问题。下载的文件被 Windows 7 操作系统“阻止”。我必须对`right click->properties->unblock`每个文件。发布此消息，项目已成功加载。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T18:48:16.313

您应该删除 *.suo 文件。

# c# - Linq动态在哪里算？

> ID：13880931
> 
> 赞同：1
> 
> 时间：2012-12-14T14:49:17.040
> 
> 标签：c#, linq, where, dynamic-linq

是否可以在 where 中使用列表。我想要这样的想法：

```
public class Customer
{
    string FirtsName;
    string LastName;
    int Number;
    .....
} 
```

我想使用复选框过滤客户。如果我选择 FirstName 和 Number 然后将生成 where 子句

```
.where(x=> x.FirstName == "SomeFirstName" && x.Number == someNumber) 
```

如果我只选择数字，那么将生成 where 子句

```
.where(x.Number == someNumber) 
```

如果我选择 FirstName、LastName 和 Number 则将生成 where 子句

```
.where(x=> x.FirstName == "SomeFirstName" && x.Number == someNumber && x.LastName == "LastName") 
```

我的意思不仅是动态列名，我还想生成 where 子句计数。列名和值来自列表：

我希望，我可以解释。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:59:53.333

使用不止一个步骤来生成查询：

```
var query = originalList.AsQueryable();

if(/*Filtering on First Name*/)
{
  query = query.where(x => x.FirstName == FirstNameSearchString);
}

if(/*Filtering on Last Name */)
{
  query = query.where(x => x.LastName == LastNameSearchString);
}

if(/*Filtering on Number*/)
{
  query = query.where(x => x.Number== NumberSearchString);
}

//..And so on

//Do stuff with query 
```

如果您不想执行多个 if 语句，我可以想到另外两种方法：

*   手动构建自己的表达式树：

[表达式树（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/bb397951.aspx) [如何：使用表达式树构建动态查询（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/vstudio/bb882637.aspx)

另一种方法是创建一个复杂的 where 子句，该子句使用 AND 和 OR 仅在选择此列搜索选项时进行过滤：

.where(x => (IsFirstNameFilter == true && x.FirstName = FirstNameData) || (IsLastNameFilter == true && x.LastName = LastNameData) || ...);

有了这个，你要小心执行时间，连接 SQL Profiler 看看发生了什么。

我仍然推荐第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:55:12.183

你可以试试[动态 LINQ 。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)有了这个，您可以编写如下内容：

```
var db = new NorthwindDataContext;
var query = db.Products.Where("CategoryID=2 And UnitPrice>3").OrderBy("SupplierId"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T20:19:39.217

我认为上面的（第一个建议）答案很好 - 我在我当前的架构中有效地做同样的事情，但它包含更多，基本上分为两部分：

1.  我有一个过滤器类（特定于任何相关实体......在你的情况下，可能被称为“CustomerFilter”）这个类有一个看起来像这样的方法（只是一个例子）

    ```
    public class CustomerFilters
    {
        public IEnumerable<Expression<Func<Customer, bool>>> Filters()
        {
            if (/*check if should filter on FirstName here*/)
            {
                yield return cust => cust.FirstName == FirstNameSearchString;
            }
            if (/*check if should filter on Surname here*/)
            {
                yield return cust => cust.Surname == SurnameSearchString;
            }
        }
    } 
    ```

2.  我有一个扩展方法（作为助手，不一定必须是扩展方法），它基本上循环遍历所有过滤器并从中构建位置。代码看起来像这样（或多或少）：

    ```
    public static IQueryable<T> Filter<T>(this IQueryable<T> collection, IEnumerable<Expression<Func<T, bool>>> filters)
    {
        var results = collection;
        foreach (var f in filters)
        {
            results = results.Where(f);
        }
        return results;
    } 
    ```

然后，它的用法可能如下所示：

```
var query = db.Customers.Filter(myCustomerFilterClass.Filters()); 
```

所以就像我说的那样，它与前面的答案相同（为了简洁起见，我在这里简化了很多代码），但我发现以这种方式将它包装起来并抽象出来非常有用有很多过滤器，在很多实体上的应用程序，并且要应用的特定过滤器是用户驱动的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T21:24:56.703

我会避免使用字符串，因为你会失去类型安全。相反，我会使用表达式树来为您的 where 子句构建表达式。

```
 //The variable name for the parameter expression must match in all others
        var parameter = Expression.Parameter(typeof(Customer),"c");

        Expression<Func<Customer,bool>> firstNameCheck = c => c.FirstName == FirstNameSearchString;            
        Expression<Func<Customer,bool>> lastNameCheck = c => c.LastName == LastNameSearchString;
        Expression<Func<Customer,bool>> numberCheck = c => c.Number.ToString() == NumberSearchString;

        //Default to a true expression
        Expression ongoingExpression = Expression.Constant(true);

        if (//Filter on first name)
        {
            ongoingExpression = Expression.AndAlso(ongoingExpression, Expression.Invoke(firstNameCheck, parameter));
        }

        if (//Filter on last name)
        {
            ongoingExpression = Expression.AndAlso(ongoingExpression, Expression.Invoke(lastNameCheck, parameter));
        }

        if (//Filter on number)
        {
            ongoingExpression = Expression.AndAlso(ongoingExpression, Expression.Invoke(numberCheck, parameter));
        }

        var lambda = Expression.Lambda<Func<Customer, bool>>(ongoingExpression, parameter);            

        query = query.Where(lambda.Compile()); 
```

# ajax - 在 IE 7 中单击按钮失败时的 JSF 2.0 AJAX 调用

> ID：13880932
> 
> 赞同：0
> 
> 时间：2012-12-14T14:49:29.167
> 
> 标签：ajax, jsf-2, listener

我有一个按钮，点击它就会对 @ViewScoped bean 进行 AJAX 调用。这在 Firefox 中可以正常工作，但在 IE 上不行。然而，相同的功能在 IE 和 Firefox 的其他页面中都有效。所以我对这里有什么问题一无所知。

这是代码

```
 <h:commandButton id="Search"  value="Search" >
 <f:ajax  execute="Search" render="table"  listener="#{Bean.dosearch}" ></f:ajax> 
 </h:commandButton> 
```

单击“搜索”按钮时，没有任何反应。侦听器操作方法本身没有被调用。操作方法将 AjaxBehaviour 事件作为参数并返回 void。我也无法在 IE 中调试，浏览器中也没有显示错误。任何帮助，将不胜感激 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:54:27.750

你可以显示整个页面吗？问题可能不在命令按钮中，而是由其他原因引起的。我发现 BalusC 的以下帖子很有帮助。您的问题可能是由那里提到的第 6 点引起的。如果这对您没有帮助，也许您可​​以在此处发布整个页面以及支持 bean，以便我们可以尝试重现问题。

未调用方法的原因：未调用 [commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

# asp.net-mvc-3 - ASP.NET MVC 3 x86 项目无法在 TFS 构建服务器 2012 上编译

> ID：13880934
> 
> 赞同：2
> 
> 时间：2012-12-14T14:49:32.663
> 
> 标签：asp.net-mvc-3, x86, tfsbuild

我尝试在 TFS Build server 2012 上为 x86 ASP.NET MVC 3 项目设置构建定义。该项目在本地计算机上完美编译，没有警告（没有警告 x86 / MSIL 不匹配）。

当我设置构建定义并运行构建时，我收到此错误：

> ASPNETCOMPILER：无法加载文件或程序集“ASSEMBLY_NAME”或其依赖项之一。试图加载格式不正确的程序。

我尝试在解决方案级别进行 x86 平台配置，以便能够将构建定义中的“构建配置”设置设置为`x86|Release`不成功。

我在 web.config 的编译部分中没有看到任何可以让我指定平台的选项。

是否可以设置一个构建定义，让我在 TFS Build server 2012 上构建 x86 ASP.NET MVC3 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T00:53:54.237

听起来您在构建服务器上没有所需的组件。

虽然谨慎的做法是让您可以通过 NuGet 引用或检查到已知位置的版本控制中的所有部分，但构建服务器上总是需要超出此范围的内容。

**测试：您可以登录到构建服务器，在 Visual Studio 中打开您的解决方案并在那里成功构建它吗？**

如果不是，我建议您使用[Web 平台安装程序](http://www.microsoft.com/web/downloads/platform.aspx)并选择 MVC 3 以及您可能需要的任何其他组件。本质上，您的构建服务器应该像您的开发工作站一样设置。是的，虽然不需要包含 Visual Studio 会很棒。如果您在 MSDN 的范围内操作，除了您的开发人员工作站之外，在此处安装它不需要额外的许可，这很有帮助。事实上，它更进一步，并指出如果您拥有 Ultimate 的一个许可证，您可以安装它，并且每个人都可以将构建发送到构建服务器，无论他们获得许可的 MSDN 版本是什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:02:43.320

解决方案是在项目中删除视图编译，因为构建服务器目前似乎不支持它：

```
 <MvcBuildViews>false</MvcBuildViews> 
```

You can give a different value for this setting per configuration, if you want to keep building them locally in debug for example.

# java - MalformedByteSequenceException：1 字节 UTF-8 序列的字节 1 无效。使用希伯来字符时

> ID：13880937
> 
> 赞同：6
> 
> 时间：2012-12-14T14:49:43.500
> 
> 标签：java, xml, encoding, character-encoding

我正在尝试解析包含希伯来字符的 XML 文件。我知道该文件是正确的，因为如果我输出没有希伯来字符的文件（来自不同的软件），它解析得很好。

我尝试了很多东西，但我总是得到这个错误

```
MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence. 
```

我最近的尝试是使用打开它`FileInputStream`并指定编码

```
DocumentBuilder db = dbf.newDocumentBuilder();
document = db.parse(new FileInputStream(new File(xmlFileName)), "Cp1252"); 
```

（`Cp1252`是在不同的应用程序中为我工作的编码）但我得到了相同的结果。

也尝试使用`ByteArray`，没有任何效果。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:28:25.133

如果您知道文件的正确编码并且它不是“utf-8”，那么您可以将其添加到 xml 标头中：

```
<?xml version="1.0" encoding="[correct encoding here]" ?> 
```

或将其解析为阅读器：

```
db.parse(new InputStreamReader(new FileInputStream(new File(xmlFileName)), "[correct encoding here]")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T06:11:04.160

解决方案很简单，获取 UTF-8 格式的内容，并覆盖 SAX 输入源。

```
File file = new File("c:\\file-utf.xml");
InputStream inputStream= new FileInputStream(file);
Reader reader = new InputStreamReader(inputStream,"UTF-8");

InputSource is = new InputSource(reader);
// is.setEncoding("UTF-8"); -> This line causes error! Content is not allowed in prolog

saxParser.parse(is, handler); 
```

你可以在这里阅读完整的例子——http: [//www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/)

# axapta - ax 2012 中自定义表格的编号规则

> ID：13880939
> 
> 赞同：1
> 
> 时间：2012-12-14T14:49:49.477
> 
> 标签：axapta, dynamics-ax-2012, number-sequence

我有一个自定义实用程序，它在 AX 2012 AOT 中使用自定义表格，我想为我的表格设置一个身份字段，有人告诉我我可以为此使用数字序列，并且可以将数字序列映射到我的表格以便它可以得到插入行时的一个新的唯一 ID，当我尝试生成数字序列时，它会询问我区域和模块信息，因为我想要这个用于我的自定义表和实用程序，它使用 .net 业务连接器在动态 ax 2012 之外工作，我无法弄清楚输入向导的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:18:48.873

您可能已经看到使用 NumberSeqModule 枚举并向其添加自定义模块枚举值的方法。然后，您通常会创建一个扩展 NumberSeqApplicationModule 类的类，然后使用数字序列引用加载链接到数据类型的数字序列。

尽管这是“最佳实践方式”，但对于您现在想要做的事情来说，这有点矫枉过正。所以这是你可以做的：

您可以只覆盖您正在使用的表的插入方法。您可以在 NumberSeq 类上使用 newGetNumFromCode 构造函数。

```
public static NumberSeq newGetNumFromCode(
    NumberSequenceCode  _numberSequenceCode,
    NumberSeqScope      _scope = NumberSeqScopeFactory::createDefaultScope(),
    boolean             _makeDecisionLater           = false,
    boolean             _dontThrowOnMissingRefSetUp  = false,
    SysLastValue        _nextNumSeq = null,
    boolean             _fillNextNumSeq = false)
{
    return NumberSeq::newGetNumFromId(
            NumberSequenceTable::findByNaturalKey(_numberSequenceCode, _scope.getId()).RecId,
            _makeDecisionLater,
            _dontThrowOnMissingRefSetUp,
            _nextNumSeq,
            _fillNextNumSeq);
} 
```

所以现在要使用它，您只需在 Dynamics Ax（组织管理 | 编号规则 | 编号规则）中创建一个新的数字序列并记住数字序列代码。

然后在您的表的插入方法上，您可以执行以下操作：（示例取自联系人表）

```
if (!this.ContactPersonId)
{
    this.ContactPersonId = NumberSeq::newGetNum(CompanyInfo::numRefContactPersonId()).num();
} 
```

这应该确保在插入记录时，您还将填写 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T11:29:59.557

这就是你以正常方式编号的方式

```
custTable.xyz = NumberSeq::newGetNum(CompanyInfo::numrefContactId()).num(); 
```

# c# - 最初禁用的按钮在被 Javascript 启用后不会回发

> ID：13880944
> 
> 赞同：2
> 
> 时间：2012-12-14T14:50:12.580
> 
> 标签：c#, javascript, asp.net, button, postback

我有一个默认禁用的按钮，但通过 JavaScript 启用（或未禁用？），但当我单击它时它实际上并没有做任何事情（即发布）。相关代码：

```
<asp:Button runat="server" ID="btnLoad" Text="Load" 
    OnClick="btnLoad_Click" Enabled="False"/> 
```

通过以下方式启用：

```
var btnLoad = $get("<%= btnLoad.ClientID %>");
btnLoad.disabled = false; 
```

我连接了另一个按钮来回发并启用服务器上的原始按钮（btnLoad），这似乎起到了作用。因此，似乎是在客户端上启用了按钮，但在服务器上却没有。我想除了强制回帖以启用按钮之外，我无能为力吗？我不知道为什么我现在仍然发布这个问题，但无论如何我都会:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:08:12.963

这是因为服务器认为“哦，那个按钮被禁用了，我会忽略那个消息”。

最好的方法是在服务器端启用它，然后在页面上使用 JavaScript 禁用它（在页面`<script>`顶部放置一个标签） - 然后像现在一样重新启用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:52:17.670

仅`disabled`存在该属性意味着它已被禁用。试试这个：

```
btnLoad.removeAttribute("disabled"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:11:32.380

禁用该控件的视图状态并查看它是否有效。视图状态“记住”按钮被禁用并且可能不会触发 on_click 事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:13:24.873

我假设您在向服务器注册事件之前禁用该按钮，因此启用它时它不起作用的原因。

如果您在后面的代码中禁用它，则`Pre_Render`改为在事件上执行它。如果您是通过 javascript 执行此操作，请在`$(document).ready()`.

如果您无法覆盖按钮的 onClick 并使用 JS 强制回发：

```
$('#<%= btnLoad.ClientID %>').onClick(function() {
    __doPostBack("<%= btnLoad.ClientID %>", "");
}); 
```

# java - 使用xpath从xml中提取所有标签

> ID：13880951
> 
> 赞同：1
> 
> 时间：2012-12-14T14:50:29.340
> 
> 标签：java, xpath

我需要从属性 name=body 的标签字段中提取所有值。我使用了这个 xpath，但它只返回第一个值

```
//example/test/field[@name='body']/text()

Example XML
        <example>
          <test>
            <field name="body">Example text</field>
            <field name="body">Example text1</field>
          </test>
        <example> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:17:56.043

**对于提供的 XML 文档（所有想要的元素都是同级元素，并且没有其他同级元素，此 XPath 表达式产生想要的结果：**

```
string(normalize-space(/*/test[not(*[not(@name='body')])])) 
```

# objective-c - NSCoding，保存图像路径而不是实际图像

> ID：13880954
> 
> 赞同：0
> 
> 时间：2012-12-14T14:50:33.107
> 
> 标签：objective-c, ios

```
@property (strong) UIImage *thumbImage; 
```

..

```
albumData *album1 = [[albumData alloc]initWithTitle:@"Eminem" style:@"123" thumbImage:[UIImage imageNamed:@"1.jpeg"]]; 
```

..

```
- (void)encodeWithCoder:(NSCoder *)coder {
    NSData *image = UIImagePNGRepresentation(_thumbImage);
    [coder encodeObject:(image) forKey:@"thumbImageData"];

}

- (id)initWithCoder:(NSCoder *)coder {
    NSData *imgData = [coder decodeObjectForKey:@"thumbImageData"];
    _thumbImage = [UIImage imageWithData:imgData ];
    return self;
} 
```

现在我正在使用上面的代码将数据保存在 plist 文件中。我应该如何更改代码以仅保存图像路径\名称而不是保存实际图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:29:07.580

你应该使用

```
@property (copy) NSString *thumbImage; 
```

并仅保存图像名称而不是

```
@property (strong) UIImage *thumbImage; 
```

然后编码/编码为字符串。当您需要图像时，只需编写

```
[UIImage imageNamed:album1.thumbImage]; 
```

另一种解决方案是继承UIImage类，添加图片路径属性，重写UIImage的初始化方法以支持保存路径，重写coder/encoder方法

**编辑：**

这是一些示例代码：

UIImageWithPath.h

```
 #import <UIKit/UIKit.h>

@interface UIImageWithPath : UIImage{
    NSString* filepath;
}

@property(nonatomic, readonly) NSString* filepath;

-(id)initWithImageFilePath:(NSString*) path;
@end 
```

UIImageWithPath.m

```
#import "UIImageWithPath.h"

@implementation UIImageWithPath
@synthesize filepath;

-(id)initWithImageFilePath:(NSString*) path{
    self = [super initWithContentsOfFile:path];
    if(self){
        [filepath release];
        filepath = [path copy];
    }

    return self;
}

-(void)dealloc{
    [filepath release];
    [super dealloc];
}
@end 
```

示例使用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    img = [[UIImageWithPath alloc] initWithImageFilePath:[[NSBundle mainBundle] pathForResource:@"pause" ofType:@"png"]];
    iv.image = img;
}

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    NSLog(@"image file path %@", img.filepath);
} 
```

所以现在你的代码/编码方法应该是这样的：

```
-(void)encodeWithCoder:(NSCoder *)coder {
    NSString *path = _thumbImage.filepath;
    [coder encodeObject:(path) forKey:@"thumbImageData"];

}

- (id)initWithCoder:(NSCoder *)coder {
    NSString *path = [coder decodeObjectForKey:@"thumbImageData"];
    _thumbImage = [[UIImageWithPath alloc] initWithImageFilePath:path];
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:19:23.653

如果您有文件名，则可以使用[-[NSBundle pathForResource:ofType:]](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/pathForResource%3aofType%3a)获取其路径，例如

```
[[NSBundle mainBundle] pathForResource:@"1" ofType:@"jpeg"]; 
```

正如 rmaddy 所说，您无法从 UIImage 中获取它，因此您可能必须在创建图像时获取它并坚持使用它。

# validation - 如何使用发件人策略框架验证电子邮件地址是否真实且正在使用

> ID：13880956
> 
> 赞同：1
> 
> 时间：2012-12-14T14:50:37.387
> 
> 标签：validation, email, smtp, spf

从我一直在阅读的内容来看，SPF 可用于通过发送命令（而不是实际的电子邮件）来验证电子邮件地址，例如 HELO。我已经设法掌握了该政策的基本知识，但我无法理解如何解决以下问题：

我在 CRM 系统中为联系人附加了许多电子邮件地址，我想了解这些电子邮件地址是否有效且仍在使用中。

目前我们正在使用一个 REST Web 服务（[http://emailinspector.co.uk/](http://emailinspector.co.uk/)），它返回“Ok”（如果它没问题...... duh）、“Bad”（如果它无效或未在使用中）或“未知”。对于未知，您还可以得到一些关于它为何返回的注释，即告诉您邮箱是否已满或它是否是众所周知的 DEA。

我希望能够编写一个可以复制此功能的脚本，并且根据我的研究结果，它应该使用发件人策略框架来执行此操作吗？问题是我不知道如何为“未知”电子邮件地址返回如此精确的信息。

想法和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:00:58.670

实际上 SPF 只是一个文本记录，带有一些“提示”让您知道 IP 地址或邮件服务器是否“允许/授权”为该域发送电子邮件。它不会告诉您有关该域中单个电子邮件地址的任何信息。

例如

```
 [doon@qix:~] host -t txt labratsoftware.com
       labratsoftware.com descriptive text "v=spf1 a -all" 
```

我的一个域的 SPF 记录表明，只有该域的 a 记录被授权为 labratsoftware.com 发送电子邮件，如果它不是来自该 IP，那么它应该被拒绝（-all）。

因此，您可以使用 SPF 做的最好的事情就是告诉您收到的电子邮件来自授权主机，然后使用该信息来帮助决定您是否要拒绝它。

测试您拥有的电子邮件地址有效性的最佳方法是通过电子邮件发送它，然后查看它是否被退回。您可以使用 VERP (http://en.wikipedia.org/wiki/Variable_envelope_return_path) 等选项来自动处理退回邮件。您还可以尝试连接到为域列出的 MX 记录，并尝试以这种方式传递消息。一些邮件服务器支持验证（但大多数管理员禁用此功能以防止信息泄露）。您可以使用 RCPT TO 来查看服务器是否接受它，但即使接受，您也无法知道它是否真的会进入他们的收件箱。我的猜测是这就是您当前使用的 API 正在做的事情。未知只是那些要么不回答，灰名单等。

# iphone - CGContext：如果我更改了笔触颜色，则更改整个视图颜色

> ID：13880961
> 
> 赞同：0
> 
> 时间：2012-12-14T14:50:58.103
> 
> 标签：iphone, objective-c, ios6

我正在使用不同的按钮来更改使用 CGContext 绘制 UIBezierPath 曲线的笔触颜色，但是在更改颜色时，之前绘制的线条也会根据最后的笔触颜色改变颜色。但我不希望之前绘制的线条改变颜色。任何帮助表示赞赏。我使用了以下代码：

```
(void)drawRect:(CGRect)rect{

if(colorwith==1){
    CGContextRef bluecontext = UIGraphicsGetCurrentContext();
    CGContextBeginPath(bluecontext); // clears any previous path
    CGContextSetRGBFillColor(bluecontext, 0.2, 0.3, 0.5, .06);

    CGContextSetStrokeColorWithColor(bluecontext, [UIColor blueColor].CGColor);
    CGContextStrokePath(bluecontext); // draw blue line

for(UIBezierPath *_tempPath in _arrayForOperationPath)
{
  [_tempPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];      
}
    //[[UIColor blackColor]setStroke];
}
else if (colorwith==2){

    CGContextRef bluecontextt = UIGraphicsGetCurrentContext();
    CGContextBeginPath(bluecontextt); // clears any previous path
    CGContextSetRGBFillColor(bluecontextt, 0.2, 0.8, 0.7, .01);

    CGContextSetStrokeColorWithColor(bluecontextt, [UIColor redColor].CGColor);
    CGContextStrokePath(bluecontextt); 
          // [[UIColor redColor]setStroke];

for(UIBezierPath *_tempPath in _arrayForOperationPath)
{
  [_tempPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];      
}
    //[[UIColor blackColor]setStroke];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:21:02.320

`CGContextRef bluecontext = UIGraphicsGetCurrentContext();`添加后`CGContextSaveGState(bluecontext);`并`CGContextRestoreGState(bluecontext);`绘制贝塞尔路径后。

你的问题是每次上下文更新时都会调用 drawRect ......所以每次你画一些东西时。您在此处设置线条颜色，但之前绘制的路径不记得 RGB ..只是 alpha （如果我没记错的话）。

使用`CGContextSaveGState`和`CGContextRestoreGState`保存之前的上下文，绘制，然后将上下文恢复原样加上您完成的绘图。

# python - 透明小部件背景

> ID：13880964
> 
> 赞同：2
> 
> 时间：2012-12-14T14:51:01.943
> 
> 标签：python, background, pygtk

我是 pygtk 的新手。[我正在寻找一种方法来创建使用父背景作为自己的背景的自定义小部件，例如https://fbcdn-sphotos-ea.akamaihd.net/hphotos-ak-prn1/31617_421363141269410_1875576](https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-prn1/31617_421363141269410_1875576801_n.jpg) ​​801_n.jpg

如何获取父位图并将其用作自己的位图？

```
class RoundRectPanel(gtk.DrawingArea, PanelBase):
    """
    Panel That represents
    """
    def __init__(self):
        super(ProximityPanel, self).__init__()

    def initialize(self):
        super(RoundRectPanel, self).initialize()

        self.set_size_request(340, 300)
        self.connect('expose-event', self.expose)

    def terminate(self):
        pass

    def rounded_rectangle(self, cr, x, y, w, h, r=20):
        #   A****BQ
        #  H      C
        #  *      *
        #  G      D
        #   F****E

        cr.move_to(x+r,y)                      # Move to A
        cr.line_to(x+w-r,y)                    # Straight line to B
        cr.curve_to(x+w,y,x+w,y,x+w,y+r)       # Curve to C, Control points are both at Q
        cr.line_to(x+w,y+h-r)                  # Move to D
        cr.curve_to(x+w,y+h,x+w,y+h,x+w-r,y+h) # Curve to E
        cr.line_to(x+r,y+h)                    # Line to F
        cr.curve_to(x,y+h,x,y+h,x,y+h-r)       # Curve to G
        cr.line_to(x,y+r)                      # Line to H
        cr.curve_to(x,y,x,y,x+r,y)             # Curve to A

    def expose(self, canvas, event):
        # Create cairo context
        cr = canvas.window.cairo_create()

        # TODO: 1\. GET PARENT background
        # 2\. set it as canvas background

        # 3\. draw on it
        self.rounded_rectangle(cr, 0, 0, 340, 300)
        cr.stroke_preserve()
        cr.set_source_rgba(1.0, 1.0, 1.0, 0.5)
        cr.fill() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:45:00.340

目前找到了解决方法，这需要自定义小部件与他的父窗口（绘制背景图像的位置）进行通信。CustomWidget 需要关于背景图像的父信息（窗口上的文件名和图像位置）

```
class CustomWidget(gtk.DrawingArea):
def __init__(self, parent):
    super(CustomWidget, self).__init__()
    self.set_size_request(340, 300)
    self._parent = parent

    self.connect('expose-event', self._expose_event)

def _expose_event(self, widget, event):
    cr = widget.window.cairo_create()

    self.draw_context(cr, widget)

def draw_context(self, cr, widget):
    ctx = cr
    x, y, width, height = widget.allocation

    # parent window should have file name that is used as a background
    pixbuf = gtk.gdk.pixbuf_new_from_file(self._parent.file)
    ctx.save()
    # copy particular image region where your custom widget is located
    ctx.set_source_pixbuf(pixbuf, (-x) + self._parent.image.allocation.x, (-y) + self._parent.image.allocation.y)

    # draw background for custom widget
    ctx.paint()
    ctx.restore()

    # now draw what ever you want
    self.rounded_rectangle(cr, 0, 0, width, height)
    cr.set_line_width(1.0)
    cr.set_source_color(gtk.gdk.color_parse('grey'))
    cr.stroke_preserve()

    gradient = cairo.LinearGradient(width/2, 0, width/2, height)
    gradient.add_color_stop_rgba(0.00, 1, 1, 1, 0.9)
    gradient.add_color_stop_rgba(1.00, 0.4, 0.4, 0.4, 0.5)
    cr.set_source(gradient)
    cr.fill() 
```

# .net-4.0 - 如何使用带有 C++/CLI 的 app.config 文件在 VS 2012 中配置程序集绑定？

> ID：13880969
> 
> 赞同：7
> 
> 时间：2012-12-14T14:51:25.377
> 
> 标签：.net-4.0, visual-studio-2012, c++-cli

我目前在一个项目中使用 Microsoft BCL Async 库（[此处](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx?PageIndex=3&CommentPosted=true&wa=wsignin1.0)），其中包含大量相互依赖的程序集，全部针对 .NET 4 Full Profile 编译，我不得不在每个项目中使用程序集绑定重定向来编译它（根据问题2[在这里](http://blogs.msdn.com/b/bclteam/p/asynctargetingpackkb.aspx)）。

我现在遇到的问题是我从 C++/CLR DLL 项目中使用这些库之一，它实际上不需要使用异步，但我有以下编译错误：

2>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): 警告 MSB3268: 无法解析主要引用“ImInterface.dll”，因为它间接依赖于框架程序集“System.Runtime, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”在当前目标框架中无法解决。“.NETFramework，版本=v4.0”。要解决此问题，请删除引用“ImInterface.dll”或将您的应用程序重新定位到包含“System.Runtime, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的框架版本。

我添加了我在所有 C# 项目中使用的相同 app.config 文件，但它似乎在 C++ 项目中没有任何影响。我是否必须将其放在特定目录中或执行任何其他步骤才能识别 app.config 文件？

我的 app.config 文件的内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.11.0" newVersion="2.5.11.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Tasks" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.11.0" newVersion="2.5.11.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

任何建议表示赞赏！

问候， 安东尼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T16:22:36.290

我有同样的问题，事实证明，有**`<SpecificVersion>True</SpecificVersion>`**帮助。

**在继续阅读之前，请注意问题似乎*只*在使用“Visual Studio 2012 - Windows XP (v110_xp)”平台工具集构建 C++/CLI 项目时发生！**也就是说，如果您不需要创建与 WinXP 兼容的 DLL，请改用“Visual Studio 2012 (v110)”，就可以了。

**让我详细说明我的场景：**

我有一个针对 WinXP (v110_xp)的 C++/CLI 控制台应用程序项目**(ConsoleAppCLI )。**ConsoleAppCLI 引用了一个通过 NuGet 安装了 Microsoft.Bcl.Async的库**(AsyncLib) ：**

```
[ConsoleAppCLI.vcxproj]   (C++/CLI, .NET 4.0 v110_xp)
          |
          |
   [AsyncLib.csproj]      (C#, .NET 4.0)
          |
          |
 [Microsoft.Bcl.Async]    (via NuGet) 
```

**我遇到了完全相同的问题，app.config 也没有帮助，但有帮助的是以下内容：**

1.  卸载 ConsoleAppCli.vcxproj
2.  直接编辑vcxproj文件
3.  找到对安装了 Async nuget 包的库的引用（在我的情况下，是`<ProjectReference>`AsyncLib.csproj）
4.  **在`<ProjectReference>`和之间`</ProjectReference>`，添加以下内容：`<SpecificVersion>True</SpecificVersion>`**

但是请注意，ConsoleAppCLI 是我在依赖关系树中的顶级项目。如果你有依赖于产生 MSB3268 的 C++/CLI 程序集的程序集，你同样必须添加到引用中（例如，如果我有一个额外的 C# 库，它具有 ConsoleAppCli 作为依赖项，我也`<SpecificVersion>True</SpecificVersion>`必须引用 ConsoleAppCli `<SpecificVersion>True</SpecificVersion>`）。

顺便说一句，这个解决方案来自[这里](http://sanderstechnology.com/2011/warning-msb3268-you-are-about-to-experience-pain/10646/#.UXAcTMqcFDc)。

# objective-c - 祖父VC和rootVC之间的通信

> ID：13880972
> 
> 赞同：0
> 
> 时间：2012-12-14T14:51:41.863
> 
> 标签：objective-c

我的项目是这样的：**rootVC** (map) -> **childVC** (sidebar) -> **grandchildVC** (tableview)

我想从**grandchildVC** -> **rootVC**发送数据，但是使用委托它不起作用。

如果我通过这样的委托传输数据：**grandchildVC** -> **childVC** -> **rootVC**它可以工作......

但这不可能是解决方案，它似乎真的很脏......

所以..
1）有人可以帮助我理解为什么我不能直接沟通吗？
2) 有没有更好的解决方案将数据从**grandchildVC**发送到**rootVC**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:13:59.700

您不会告诉使用您要发送的消息，但通知 (NSNotification) 可能是您正在寻找的解决方案。孙子可以发布通知，而不用关心谁在听，甚至有多少。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T14:57:54.977

确保 rootVC 是孩子的委托并实现委托协议。

# .htaccess - htaccess 将分页的第一页重写为原始 url

> ID：13880975
> 
> 赞同：0
> 
> 时间：2012-12-14T14:51:52.817
> 
> 标签：.htaccess, pagination, rewrite

我想使用 htaccess 重写或重定向所有具有字符串 Page-1- 的 url 并使它们转到原始 url。例如

原始网址：[http ://www.website.com/blahblah](http://www.website.com/blahblah)

假设上面的 url 是一个包含许多页面的类别，并且用户已经转到第 2 页并通过该页面他/她想返回到第 1 页。现在，在分页列表中点击第 1 页，它将带他/她至

[http://www.website.com/blahblah/Page-1-](http://www.website.com/blahblah/Page-1-)（每页的结果数）

我想让所有带有 Page-1 的网址都转到原始网址

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:14:07.517

尝试：

```
RewriteEngine On
RewriteRule ^(.*)/Page-1- /$1 [L,R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T16:28:56.750

试试 QSA

```
RewriteEngine On
RewriteRule ^(.*)/Page-1- /$1 [L,QSA,R=301] 
```

# jasper-reports - Jasper 在新页面上报告子报告

> ID：13880978
> 
> 赞同：5
> 
> 时间：2012-12-14T14:52:01.677
> 
> 标签：jasper-reports

我有一个包含 6 个子报告的碧玉报告。这些子报表中的每一个都有自己的标题部分。现在我需要每个报告从新页面开始。我尝试添加分页符，但它对我不起作用。

在研究这个问题时，我发现了一个设置`isTitleNewPage`为`true`http://www.dzone.com/snippets/jasperreports-subreport-new 的技巧[。](http://www.dzone.com/snippets/jasperreports-subreport-new)因此，我将属性添加`isTitleNewPage="true"`到所有子报表中，但现在子报表的标题仍保留在前一页上，并且该子报表的详细信息和摘要显示在新页面上。

我怎么解决这个问题？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-12T13:01:34.853

最简单的解决方案是在子报表标签中设置`runToBottom`标志`true`。

```
<subreport runToBottom="true"> 
```

这会强制子报表填满整个页面，因此下一个子报表将从新页面开始。

Flag`isTitleNewPage`不会起作用，因为就像您注意到的那样，它会将子报表的标题栏与子报告的其余内容分开（除非您使用的是空白标题栏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T07:25:38.680

我有同样的问题，标题仍然在前一页。

但我有一个解决方案：

*   将标题中的内容放在“页眉”带中
*   设置 isTitleNewPage="true"
*   将一个整数变量添加到初始值为 0 的子报表
*   墨水类型“页面”
*   表达式 $V{vari} + 1
*   当页眉的表达式为 $V{vari} == 0 时打印

现在你在新页面上有你的标题内容，但只有一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T16:39:28.957

我对这个问题的解决方案是将每个子报表添加到单独的“详细信息波段”中，然后将波段高度设置为最大可能值（右键单击“详细信息 X 波段”=>“最大化波段高度”）。带之间可以打印一些空白页，但这对我来说不是一个大问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T12:20:21.820

在初始标签中：

```
<jasperReport 
```

放：

```
isTitleNewPage="true" 
```

[![isTitleNewPage](../Images/3729877dbb791d58368d21279663e44e.png)](https://i.stack.imgur.com/7Xheh.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-03T08:34:08.703

**为每个子报表**添加一个详细信息带，然后转到子报表属性并**在新页面上的标题上**打勾。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-07-24T14:33:30.770

我通过在每个子报表的开头放置一个分页符来解决它，就在标题标签之前，并在每个分页符的“Print When Expression”属性上设置“new Boolean (true)”。

# c# - 呼叫事件跳过消息框

> ID：13880980
> 
> 赞同：1
> 
> 时间：2012-12-14T14:52:07.827
> 
> 标签：c#, winforms, events, messagebox

这是一个奇怪的行为案例。
我正在调用一个`TreeView_Drag_Drop`事件（我不认为事件的类型是相关的，但无论如何）。在我的活动中，我`MessageBox`连续调用 3 个。像这样 ：

```
MessageBox.Show("A");
MessageBox.Show("B");
MessageBox.Show("C"); 
```

输出将是`B`和`C`。如果我在上面设置断点，`MessageBox.Show("A");`它将停在那里但不会弹出`MessageBox`.
如果我为此替换我的代码：

```
Console.WriteLine("A");
MessageBox.Show("B");
MessageBox.Show("C"); 
```

输出将是这个`A (in the console)`, `B`, `C`。

我最后一次尝试是做一个假人`MessageBox`，看看编译器是否只排除了他看到的第一个框。所以我为此替换了我的代码：

```
MessageBox.Show("Kill this box");
MessageBox.Show("A");
MessageBox.Show("B");
MessageBox.Show("C"); 
```

输出为`A`, `B`, `C`。

是否有一个简单的解释，没有任何进一步的代码？（无论如何，这是事件中唯一的代码）因为我无法解释这种行为。

* * *

**用另一个测试更新**

我试着把它们放在一个`foreach loop`.

```
foreach ( // logic )
{
  MessageBox.Show("A");
  MessageBox.Show("B");
  MessageBox.Show("C");
} 
```

对于我的第一次迭代，输出将是`B`, `C`。
但对于所有其他迭代，输出将为`A`, `B`, `C`。就像它已经排除了一个`MessageBox`，所以可以通过。

* * *

**代码更新**

此代码在原型上完美运行。但是我的程序中没有完全相同的代码。
请注意，对于多语言支持和内容，表单是通过反射调用的。（不要认为这是相关的，但无论如何）。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        treeView1.Nodes.Add("Test");
        this.treeView1.ItemDrag += new ItemDragEventHandler(this.treeView_ItemDrag);
        this.treeView2.ItemDrag += new ItemDragEventHandler(this.treeView_ItemDrag);
        this.treeView1.DragEnter += new DragEventHandler(this.treeView_DragEnter);
        this.treeView2.DragEnter += new DragEventHandler(this.treeView_DragEnter);
        this.treeView1.DragDrop += new DragEventHandler(this.treeView_DragDrop);
        this.treeView2.DragDrop += new DragEventHandler(this.treeView_DragDrop);
    }

    private void treeView_DragEnter(object sender,
        System.Windows.Forms.DragEventArgs e)
    {
        e.Effect = DragDropEffects.Move;
    }

    private void treeView_ItemDrag(object sender,
        System.Windows.Forms.ItemDragEventArgs e)
    {
        DoDragDrop(e.Item, DragDropEffects.Move);
    }

    private void treeView_DragDrop(object sender, System.Windows.Forms.DragEventArgs e)
    {

        MessageBox.Show("A");
        MessageBox.Show("B");
        MessageBox.Show("C");

    } 
```

我知道它有效。问题是它不在我的程序中，而且代码完全相同。我正在寻找任何可能的原因，为什么它在我的解决方案中表现不同，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:37:48.123

`DragAndDrop event`

在它们中引发的任何异常都会被吞下而无需任何诊断。这背后的可能原理是它们很可能会失败，因为它们处理的是另一个程序生成的数据。并且不应该允许产生这样的不良数据的错误程序使您的程序崩溃。

如果您需要调试代码，然后使用 Debug + Exceptions，请勾选 CLR 异常的 Thrown 复选框。抛出异常时，调试器现在将停止。

如果您希望用户知道任何异常，那么您需要使用 try/catch 在异常被吞下之前捕获它。另一个程序中的任何错误都成为您解释的小风险。

我在一个类似的问题上找到了这个。最后..这种行为很难调试。

# tfs - 没有分支的 TFS

> ID：13880982
> 
> 赞同：2
> 
> 时间：2012-12-14T14:52:14.097
> 
> 标签：tfs

有人在我们的 TFS 环境中设置了一个团队项目，它没有分支，只有解决方案、代码文件和文件夹。

团队项目--> --文件夹 A --文件夹 B --project.sln

我想在该团队项目下创建一个分支并将这些文件夹和文件移动到该分支中，但我不知道如何执行此操作。有没有人遇到过这个？我该如何做我想做的事？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:45:21.893

我会在顶层创建一个新文件夹，这样你就有了

```
$/TeamProject/Main 
```

现在对您当前的顶级内容执行“移动”`Main`并检查它。

一旦你有了它，你可以右键单击`Main`并选择“转换为分支”选项。这将使它成为 TFS 中的一个分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:04:20.903

团队资源管理器 -> 源代码管理 -> 分支和合并（右键菜单）-> 分支

# mysql - 将一个数据库字段的值合并到另一个数据库字段

> ID：13880985
> 
> 赞同：2
> 
> 时间：2012-12-14T14:52:22.397
> 
> 标签：mysql, sql, wordpress, phpmyadmin

我使用 cart66，它保存了 option_1 中的产品变体 但是，我们 在**option_2中输入了所有产品变****体**

[图片](http://i.imgur.com/Cp1SR.png)

是否有一个命令可以将 option_2 的所有值复制到 option_1 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:55:04.270

```
UPDATE yourtable SET option_1 = option_2 
```

# javascript - 网页上的视频在一段时间后使用 Javascript/html 自动播放

> ID：13880986
> 
> 赞同：1
> 
> 时间：2012-12-14T14:52:26.607
> 
> 标签：javascript, html, html5-video

我的网站上有一个视频标签，但是当网站打开时它会自动开始播放这确实是我想要的，但我实际上希望它在大约 5 秒后开始播放

有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:59:32.150

你不能用纯 HTML 做到这一点，但使用 JAVA 脚本你可以使用计时事件，使用 JavaScript，可以在指定的时间间隔执行一些代码。这称为定时事件。

在 JavaScript 中对事件进行计时非常容易。使用的两个关键方法是： `setInterval()`- 以指定的时间间隔一遍又一遍地 `setTimeout()`执行一个函数 - 在等待指定的毫秒数后执行一次函数

请注意，setInterval() 和 setTimeout() 都是 HTML DOM Window 对象的方法。

setInterval() 方法将等待指定的毫秒数，然后执行指定的函数，并在每个给定的时间间隔内继续执行该函数。

```
window.setInterval("javascript function",milliseconds); 
```

该`window.setInterval()`方法可以在没有窗口前缀的情况下编写。set 的第一个参数`Interval()`应该是一个函数。第二个参数表示每次执行之间的时间间隔长度。

这是每 3 秒发出一次警报的示例

```
setInterval(function(){alert("Hello")},3000); 
```

希望这有帮助。

# android - 如何将 xml 文档作为输入传递给 android xml pullparser

> ID：13880987
> 
> 赞同：2
> 
> 时间：2012-12-14T14:52:26.267
> 
> 标签：android, xmlpullparser

在我的应用程序中，用户可以下载存储在内部存储器中的 XML 文件。有没有办法将这个文件传递给 XMLPullParser 的绝对路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:49:39.970

由于文件保存在内部，因此您不需要绝对路径，您只需要文件名：

```
final String xmlFile="fileName";
 FileInputStream fis = null;
            InputStreamReader isr = null;
            char[] inputBuffer = null;
            String data = null;
            ArrayList<String> items = new ArrayList<String>();
            try {
                fis = getApplicationContext().openFileInput(xmlFile);
                isr = new InputStreamReader(fis);
                inputBuffer = new char[fis.available()];
                isr.read(inputBuffer);
                data = new String(inputBuffer);
                isr.close();
                fis.close();
                } catch (FileNotFoundException e3) {
                // TODO Auto-generated catch block
                    e3.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            XmlPullParserFactory factory = null;
            try {
                factory = XmlPullParserFactory.newInstance();
                } catch (XmlPullParserException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
                }
            factory.setNamespaceAware(true);
            XmlPullParser xpp = null;
            try {
                xpp = factory.newPullParser();
                } catch (XmlPullParserException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
                }
            try{
                xpp.setInput( new StringReader (data) );
                } catch (XmlPullParserException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                }
             int eventType = 0;
             try{
                 eventType = xpp.getEventType();
                } catch (XmlPullParserException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                }
             while (eventType != XmlPullParser.END_DOCUMENT){
                 if(eventType == XmlPullParser.START_DOCUMENT) {
                     System.out.println("Start document");
                 }else if(eventType == XmlPullParser.START_TAG) {
                     System.out.println("Start tag "+xpp.getName());
                 }else if(eventType == XmlPullParser.END_TAG) {
                     System.out.println("End tag "+xpp.getName());
                 }else if(eventType == XmlPullParser.TEXT) {
                     items.add(xpp.getText());
                 }
                 try{
                     eventType = xpp.next();
                }catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                }
             }
            String item1=contact.get(0);
        String item2=contact.get(1);
        String item3 = contact.get(2);
        String item4=contact.get(3); 
```

# iphone - YouTube 视频提要缩略图（没有黑条）？

> ID：13880989
> 
> 赞同：3
> 
> 时间：2012-12-14T14:52:38.317
> 
> 标签：iphone, objective-c, youtube-api, thumbnails

我已经设法使用 YouTube API 来获取我的视频列表的缩略图，但是它们在我得到的 UIImage 的顶部和底部都有黑条。如何在没有这些条的情况下获取缩略图，甚至更好地获取更高质量的缩略图？

这是我目前使用的代码：

```
GDataEntryBase *entry = [[feed entries] objectAtIndex:i];
        NSArray *thumbnails = [[(GDataEntryYouTubeVideo *)entry mediaGroup] mediaThumbnails];
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[thumbnails objectAtIndex:0] URLString]]];
        UIImage *thumbnail = [UIImage imageWithData:data]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:01:51.353

还值得注意的是，出于历史目的，所有缩略图目前都采用 4:3 的纵横比。如果底层视频是 16:9 并且您计划使用 16:9 播放器，那么放置缩略图以便隐藏顶部和底部的黑条是有意义的。这与您使用的是较低分辨率的缩略图还是高分辨率的缩略图无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:19:33.317

好吧，这个答案给了我提示，所以我继续猜测。

[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

事实证明，如果我只是将索引从 0 更改为数据对象的 1，我将获得更高质量的缩略图。魔术，简单。

# jquery - JQuery从一个值的1个单元格中的多种颜色

> ID：13880997
> 
> 赞同：0
> 
> 时间：2012-12-14T14:52:58.410
> 
> 标签：jquery, gridview, pivot-table

我有一个 ASP.NET 数据透视表，在该表的单元格中有各种值 1、2、3 或 4。无论选择哪个值，都会将单元格变为四种颜色之一。

```
$(function () {

        var colors = { 1: 'green', 2: 'orange', 3: 'red', 4: 'blue' };
        $("td").css('background-color', function (index, value) {
            var txt = $(this).text();
            if (colors.hasOwnProperty(txt)) {
                $(this).html('&nbsp;') 
                return colors[txt];
            }
            return value;
        });

    }); 
```

在基本理论中，这段代码可以正常工作，但是，我想做的是，不是整个表格单元格变成某种颜色，而是我希望表格单元格的一部分根据我的单个值变成某种颜色数据库！

目前，如果一个单元格中有 3 条记录（比如说 3、2、4），那么数字不是单独的，单元格输出分为 3 部分，红色、橙色和蓝色，它们加起来（9）并且没有颜色完全增加了价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:58:01.020

这是 HTML 架构的问题。您可以通过对每个数字使用 a 来划分单元格`span`，并将颜色应用于跨度而不是整个`TD`

检查这个[小提琴](http://jsfiddle.net/bTFvm/1/)

HTML：

```
<td>
    <span>3</span>
    <span>2</span>
    <span>4</span>
  </td>​ 
```

CSS：

```
span {
display:block;
    float:left;
}​ 
```

JS：

```
 var colors = ['green','orange','red','blue'];
$("span").each(function(){
             col = parseInt($(this).text());
                $(this).css('background-color', colors[col-1]);

}); 
```

# c# - 使用来自文本框的过滤器表达式运行 SQL 查询

> ID：13880998
> 
> 赞同：0
> 
> 时间：2012-12-14T14:53:09.253
> 
> 标签：c#, asp.net, sql

我目前正在使用来自文本框的过滤器的 ASP.NET 网格视图中运行查询。我当前的代码如下所示：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server"
    ConnectionString="<%$ ConnectionStrings:ERPW2MIGConnectionString %>" 
    SelectCommand="SELECT TOP 1000000 * FROM DWH.AIXW2S_T6946_TRANS_IMS"
      FilterExpression= "C6946_TRANS_NUM LIKE '{0}' AND (C6946_PART_KEY LIKE '{1}' OR ALIGNED_PART_NUMBER LIKE '{1}' OR C1001_ENG_PART_NUMBER LIKE '{1}')  AND C6946_TRANS_DATE >= #{2}# AND C6946_TRANS_DATE <= #{3}#">

<FilterParameters> 
            <asp:ControlParameter ControlID="TextBox2" Name="TRANS_NUM" PropertyName="text" Type="String" DefaultValue="" ConvertEmptyStringToNull="false"/> 
            <asp:ControlParameter ControlID="TextBox3" Name="PART_KEY" PropertyName="text"  Type="string"  DefaultValue="" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="TextBox4" Name="TRANS_DATE" PropertyName="text"  Type="DateTime"  DefaultValue="" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="TextBox5" Name="TRANS_DATE2" PropertyName="text"  Type="DateTime"  DefaultValue="" ConvertEmptyStringToNull="false"/>
        </FilterParameters> 
</asp:SqlDataSource> 
```

我想要帮助的是：有没有办法在选择命令中直接作为 WHERE 语句运行我的过滤器？我的查询需要永远运行，而且我不知道过滤器表达式生效的确切方式（即查询运行，然后过滤，还是从一开始就与过滤器一起运行？）。另外，有人可以提出任何优化查询的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:45:44.590

而不是`FilterParameters`使用`SelectParameters`. 下面是一个例子

```
SelectCommand="SELECT TOP 1000000 * FROM DWH.AIXW2S_T6946_TRANS_IMS 
               WHERE C6946_TRANS_NUM = @TRANS_NUM AND ...." 
<selectparameters>
   <asp:ControlParameter ControlID="TextBox2" 
        Name="TRANS_NUM" PropertyName="text" Type="String" DefaultValue="" 
        ConvertEmptyStringToNull="false"/> 
   ...
</selectparameters> 
```