# StackOverflow 问答 13289000-13289999

# java - 修改 AD 用户“下次登录时更改密码”的 Java 示例

> ID：13289004
> 
> 赞同：0
> 
> 时间：2012-11-08T12:18:45.983
> 
> 标签：java, active-directory

你们中的任何人都可以让我知道如何添加/编辑活动目录用户以使用 Java 代码启用“下次登录时更改密码”选项。

我正在使用 DirContext 和 ModificationItems 类将用户添加到 AD。

谢谢

拉梅什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T05:21:34.397

这是我发现通过启用下次登录时更改密码来通过 java 代码创建用户的方式

通过将值 0 设置为“pwdLastSet”属性，我们将能够实现这一点

# ms-access - 我想了解 Microsoft Access 向导生成的查询

> ID：13289006
> 
> 赞同：5
> 
> 时间：2012-11-08T12:18:54.657
> 
> 标签：ms-access, duplicate-data

假设我有一个名为 tbl_med 的表，它有六个字段：[nom_lab]、[nom_desc]、[nom_apres]、[date_vig]、[cod_med]、[vr_pmc]。

我想要一个 MS Access SQL 查询，它将：

1.  查找与以下四个字段相关的重复记录：[nom_lab]、[nom_desc]、[nom_apres]、[date_vig]。
2.  显示*所有六个*字段（不仅仅是用于检查重复项的字段）。

我使用了 MS Access“查找重复查询向导”，它给了我以下 SQL：

```
SELECT tbl_med.[nom_lab], tbl_med.[nom_desc], tbl_med.[nom_apres], tbl_med.[date_vig], tbl_med.[cod_med], tbl_med.[vr_pmc]
FROM tbl_med
WHERE tbl_med.[nom_lab] 
IN 
(
    SELECT [nom_lab] 
    FROM [tbl_med] As Tmp 
    GROUP BY [nom_lab], [nom_desc], [nom_apres],[date_vig] 
    HAVING Count(*)>1 
```

* * *

```
 And [nom_desc] = [tbl_med].[nom_desc] 
    And [nom_apres] = [tbl_med].[nom_apres]
    And [date_vig] = [tbl_med].[date_vig] 
```

* * *

```
)
ORDER BY tbl_med.[nom_lab], tbl_med.[nom_desc], tbl_med.[nom_apres], tbl_med.[date_vig]; 
```

谁能解释为什么`And`上面水平规则线之间的三个条件是必要的？

有没有人有更直观的查询更容易理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:37:11.740

本质上，存在三个`And`子句是因为您告诉查询向导您不仅要检查`[nom_lab]`字段上的重复项，还要检查`[nom_desc]`、`[nom_apres]`和`[date_vig]`字段上的重复项（正如您在问题开头所说的那样）。

子查询的`SELECT [nom_lab] FROM [tbl_med] As Tmp ... HAVING Count(*)>1`一部分告诉它查找具有重复`[nom_lab]`值的记录。然后，这些`And`子句通过实际上说“除了具有重复`[nom_lab]`值之外，我只想查看在所有其他三个字段（ 、 和 ）中也有重复的记录`[nom_desc]`”`[nom_apres]`来`[date_vig]`满足您请求的其余重复标准。

所以要回答你的第二个问题，我真的看不出你怎么能强迫它更直观。SQL 有时只是一种难以理解的语言，并且像任何语言（无论是编程语言还是口语）一样，在您轻松阅读它之前需要时间来学习它的模式和细微差别。

# mod-rewrite - 根据路径和查询字符串比较和重写 URL 与 mod_rewrite

> ID：13289007
> 
> 赞同：0
> 
> 时间：2012-11-08T12:18:53.970
> 
> 标签：mod-rewrite

我在一个方案中有 URL

```
/([0-9]*)/some/path/script.jsf?someId=([0-9]*) 
```

如果 $1 与 $2 不匹配，我想将用户重定向到 $2。例如，如果用户请求

```
/1/some/path/script.jsf?someId=1 
```

一切都很好，用户不应该被重定向，但如果用户请求

```
/1/some/path/script.jsf?someId=2 
```

用户应该被重定向到

```
/2/some/path/script.jsf?someId=2 
```

我试过这个规则：

```
RewriteCond %{REQUEST_URI} ^/([0-9]*)/
RewriteCond %{QUERY_STRING} someId=([0-9]*)
RewriteCond %1 !%2
RewriteRule (.*) /%2/some/path/script.jsf?someId=%2 [R] 
```

但 %2 似乎总是空的。所以我尝试了这个规则：

```
RewriteCond %{REQUEST_URI} ^/([0-9]*)/some/path/script.jsf?someId=([0-9]*)
RewriteCond %1 !%2
RewriteRule (.*) /%2/)/some/path/script.jsf?someId=%2 [R] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:54:37.217

`%n`仅访问来自的反向引用

> 当前条件集中的最后一个匹配`RewriteCond`项。

这就是为什么您`%2`在第一组规则中总是显得空虚。

您的第二次尝试为 解决了这个问题`RewriteCond %1 !%2`，但您不能`%2`在您的中引用`RewriteRule`，因为它再次引用*最后匹配`RewriteCond`*的。

如果您正在运行 Apache 2，则有一种非常简单的方法可以使用否定的前瞻断言来执行此操作：

```
RewriteRule ^/([0-9]*)/some/path/script.jsf?someId=(?!$1(?:$|[^0-9]))([0-9]*) /$2/some/path/script.jsf?someId=$2 [R] 
```

重要的部分是

```
(?!$1(?:$|[^0-9])) 
```

它断言下一个字符序列不能完全是`$1`. （该`$|[^0-9]`位确保考虑尾随数字。）

# r - 检查字符串是否是有效的颜色表示

> ID：13289009
> 
> 赞同：38
> 
> 时间：2012-11-08T12:19:26.927
> 
> 标签：r

简短的问题，如果我有一个字符串，我如何测试该字符串是否是有效的颜色表示`R`？

我尝试了两件事，首先使用该函数`col2rgb()`来测试它是否是一种颜色：

```
isColor <- function(x)
{
  res <- try(col2rgb(x),silent=TRUE)
  return(!"try-error"%in%class(res))
}

> isColor("white")
[1] TRUE
> isColor("#000000")
[1] TRUE
> isColor("foo")
[1] FALSE 
```

有效，但看起来不是很漂亮，也没有矢量化。第二件事是检查字符串是否在`colors()`向量中或`#`后跟长度为 4 到 6 的十六进制数：

```
isColor2 <- function(x)
{
  return(x%in%colors() | grepl("^#(\\d|[a-f]){6,8}$",x,ignore.case=TRUE))
}

> isColor2("white")
[1] TRUE
> isColor2("#000000")
[1] TRUE
> isColor2("foo")
[1] FALSE 
```

虽然我不确定它有多稳定，但它有效。但似乎应该有一个内置函数来进行这个检查？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-08T14:21:59.880

您的第一个想法（`col2rgb()`用于测试颜色名称对您的有效性）对我来说似乎很好，只需要矢量化。至于它看起来是否漂亮......很多/大多数R函数在“引擎盖下”并不是特别漂亮，这是首先创建一个函数的主要原因！对用户隐藏所有那些丑陋的内部结构。

一旦你在`areColors()`下面定义，使用它就很容易了：

```
areColors <- function(x) {
     sapply(x, function(X) {
         tryCatch(is.matrix(col2rgb(X)), 
                  error = function(e) FALSE)
         })
     }

areColors(c(NA, "black", "blackk", "1", "#00", "#000000"))
#   <NA>   black  blackk       1     #00 #000000 
#   TRUE    TRUE   FALSE    TRUE   FALSE    TRUE 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T13:14:07.347

## 更新，鉴于编辑

`?par`详细描述了在 R 中可以指定颜色的方式。任何有效颜色的解决方案都必须考虑：

1.  列出的*命名颜色*`colors()`
2.  作为一个字符的十六进制表示形式，`"#RRGGBBAA`指定红色、绿色、蓝色和 alpha 通道。Alpha 通道用于透明度，并非所有设备都支持，因此虽然使用 8 个十六进制值以这种方式指定颜色是有效的，但它在特定设备上可能无效。
3.  `NA`是有效的“颜色”。它表示*透明*，但就 R 而言，它是一种有效的颜色表示。
4.  同样`"transparent"`也是有效的，但不是 in `colors()`，所以也需要处理
5.  `1`是一个有效的颜色表示，因为它是一个小调色板中的颜色*索引，由*`palette()`

    ```
    > palette()
    [1] "black"   "red"     "green3"  "blue"    "cyan"    "magenta" "yellow" 
    [8] "gray" 
    ```

    因此，您需要应对`1:8`. 为什么这很重要，很好地`?par`告诉我们将这些颜色的索引表示为字符也是有效的，因此您需要将其捕获`"1"`为有效的颜色表示。但是（正如@hadley 在评论中指出的那样）这**仅**适用于默认调色板。用户可能会使用另一个调色板，在这种情况下，您必须考虑对您的 R 版本允许的最大长度的向量元素的字符索引。

一旦你处理了所有这些，你应该好好去;-)

据我所知，没有用户可见的功能可以做到这一点。所有这些都隐藏在执行绘图的 C 代码中；很快你就会在`.Internal(....)`陆地上出现龙！

* * *

## 原来的

[迂腐`#000000` *不是*R中的颜色*名称*。]

R 知道的唯一颜色*名称*是由`colors()`. 是的，`#000000`是 R 理解的颜色表示之一，但您特别询问名称，最终列表或解决方案`x %in% colors()`与您在第二个示例中的一样。

这几乎是稳定的。当您使用类似的颜色时`col = "goldenrod"`，R 在内部将其与您正在绘制的任何设备的颜色的“正确”表示相匹配。`color()`返回 R 可以查找的颜色名称列表。如果它不在，`colors()`那么它不是颜色名称。

# php - ToroPHP 路由 - 404 动作

> ID：13289010
> 
> 赞同：1
> 
> 时间：2012-11-08T12:19:34.187
> 
> 标签：php, http-status-code-404, routes

我正在使用 ToroPHP 进行路由。

*   **文档：** [https ://github.com/anandkunal/ToroPHP/blob/master/README.md](https://github.com/anandkunal/ToroPHP/blob/master/README.md)
*   **来源：** [https ://github.com/anandkunal/ToroPHP/blob/master/src/Toro.php](https://github.com/anandkunal/ToroPHP/blob/master/src/Toro.php)

**我的代码：**

```
Toro::serve(array(
    "/" => "home",
));

Toro::serve(array(
    "/website/:string" => "website",
));

// Fired for 404 errors
ToroHook::add("404",  function() { echo '404 error'; }); 
```

**更多代码**

Toro:serve 参加这个课程，工作正常，对于`home`和`website`。

```
class home {
    function get() {
        echo 'My home';
    }
}

class website {
    function get($slug) {
        echo $slug;
    }
} 
```

**访问**

这就是我的 htaccess 文件的样子。只需稍微重写即可在 localhost 上工作。

**看最后一排...**

```
RewriteEngine On
RewriteBase /my_localhost_dir/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php)
RewriteRule ^(.+)$ index.php/$1 [L] 
```

**问题**

如果我转到我设置的页面`Toro::serve`，它工作得很好。

***如果我转到一个未定义的 URL，它会给我一个白屏。***

我希望它会通过我添加的钩子给我“404错误”。我做错了什么？

**示例：**如果我转到 /nocontent/，它会给我一个白屏，并响应 200 ok。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:30:07.130

我相信钩子定义必须是*第一位*的，即

```
<?php

ToroHook::add("404",  function() {
    header('HTTP/1.1 404 Not Found');
    echo '404 error';
    exit;
});

Toro::serve(array(
    "/" => "home",
    "/website/:string" => "website",
)); 
```

此外，请确保您有一个**.htaccess**文件，按照文档将所有请求重写到**index.php 。**我应该知道，作为项目的贡献者；）

此外，应该只有*一次*调用`Toro::serve()`; 根据上面的示例，您只需将一个数组传递给它，其中 URL 模式作为键，调用的路由作为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:25:59.050

确保将所有请求重定向到 index.php。这是通过使用 mod_rewrite 完成的。将以下内容放在您的 .htaccess 文件夹中：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

其次，你用`Toro::serve`错了方法。您不应多次调用服务。相反，将多个路由传递给第一个调用：

```
Toro::serve(array(
    "/" => "home",
    "/website/:string" => "website",
)); 
```

最后，*在调用 serve 之前添加 404-hook*。否则，将找不到：

```
ToroHook::add("404",  function() {
    echo "404 - Not Found";
}); 
```

# prestashop - 字节顺序标记 (BOM) 和 PHP 文件

> ID：13289011
> 
> 赞同：1
> 
> 时间：2012-11-08T12:19:37.307
> 
> 标签：prestashop, byte-order-mark

我正在为我的网站使用 PrestaShop (1.5.2)。前段时间，整个网站出现了一个错误，第 1 行第 1 列：prolog 中不允许字符“”（根据 W3C 验证器）。这会导致 IE 中的渲染完全混乱，需要尽快修复。

根据这个提供问题解决方案的[线程，除了一件事。](https://stackoverflow.com/questions/5406172/utf-8-without-bom-in-visual-studio-2010 "这个线程")我应该使用“UTF-8 without signature”设置重新保存哪个文件？我尝试了.htaccess、php.ini、index.php，但没有任何运气。它是特定于文件的，还是数据库中的某些文本？

我上传了一个测试 .html 文件和一个测试 .php 文件，它没有任何问题。什么是共同因素？如果和数据库有关，怎么会影响整个页面的输出呢？

任何帮助是极大的赞赏

# php - PHP 中的回执（pop3 和 imap）

> ID：13289013
> 
> 赞同：2
> 
> 时间：2012-11-08T12:19:44.227
> 
> 标签：php, email

我正在编写小模块来管理电子邮件。我系统中的一项重要功能将有可能退回收据（或确认收据）。

我对此有疑问，因为我不知道应该使用哪个标头来获得回执（现在在 POP3 和 IMAP 中，我设置了**X-Confirm-Reading-To:**）。另外我不知道如何更改我在 IMAP 中返回的收据的标题或签名消息（针对系统每次都会询问返回回执的情况 - 我想更改我发送消息的标题或我不想发送. 在 POP3 中这很容易，因为我只是更改数据库中的信息）。

# mysql - mysql select结合更多条件

> ID：13289015
> 
> 赞同：0
> 
> 时间：2012-11-08T12:19:52.517
> 
> 标签：mysql, select, where

我有 2 个表，其值如下：

```
**tbl_users**
user_ID      name     
1          somename1   
2          somename2   
3          somename3   

**tbl_interviews**
int_ID     user_ID      answer          date      
 1            1         sometextaba   2012-11-04 
 2            2         sometextxcec  2012-10-05
 3            1         sometextabs   2011-06-04
 4            3         sometextxcfc  2012-11-04
 5            3         sometextxcdn  2012-11-04 
```

现在.. 我应该算上今年和前几年接受采访的人。不幸的是，我什至无法选择它们..我正在尝试这样的事情..但它不起作用（不抛出语法错误但给出空结果）：

```
SELECT * FROM interviews WHERE ('YEAR(date) = 2012' AND 'YEAR(date) < 2012') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:21:43.307

你不能*同时满足这两个*条件。你的意思是*任何一种*情况

```
SELECT * FROM interviews WHERE ('YEAR(date) = 2012' OR 'YEAR(date) < 2012'); 
```

更好的是，使它成为 SARGable

```
SELECT * FROM interviews WHERE date < '2013-01-01');

SELECT * FROM interviews WHERE date < CONCAT('''', YEAR(CURDATE()), '-01-01'''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:24:03.727

尝试这个

```
select * from tbl_interviews where year(date)<='2012' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:24:55.423

您的查询应该是：

```
SELECT     COUNT(DISTINCT user_id) 
FROM       tbl_interviews 
```

解释：你的问题是：“我应该计算今年和前几年接受采访的人。”

首先，这部分：“今年和前几年”是指今年采访的人，以及今年之前的每一年。由于您不能在未来进行任何采访，这实际上意味着无论年份如何，都进行所有采访。

如果这不是你的意思，那么请改写你的问题。（我有一个想法，见下文）

至于“我应该计算人数”，我认为这意味着您要计算接受采访的每个人，无论他们进行了多少次采访。这是通过简单地计算唯一的 user_id 来完成的，这是用 COUNT(DISTINCT(user_id)) 完成的

现在，关于您的“今年和前几年”，也许您的意思是：

“我想看看我们今年采访的用户数量，以及今年之前我们采访的用户数量”，那么查询将是：

```
SELECT     (
           SELECT COUNT(DISTINCT user_id)
           FROM   tbl_interviews
           WHERE  date >= CONCAT(YEAR(current_date()), '-01-01')
           ) thisyear
,          (
           SELECT COUNT(DISTINCT user_id)
           FROM   tbl_interviews
           WHERE  date < CONCAT(YEAR(current_date()), '-01-01')
           ) previousyears 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:22:16.473

尝试类似的东西

```
SELECT * FROM interviews WHERE YEAR(date) <= YEAR(GETDATE()) 
```

GETDATE() 基本上为您提供当前日期。

现在，如果您要计算有多少人接受了采访，那将是这样的

```
SELECT COUNT(DISTINCT(id)) FROM interviews WHERE YEAR(date) <= YEAR(GETDATE()) 
```

# objective-c - 从 NSDictionary 生成 JSON 字符串会引发异常

> ID：13289016
> 
> 赞同：1
> 
> 时间：2012-11-08T12:19:52.727
> 
> 标签：objective-c, json, macos

我正在尝试以这种方式制作一个 json 字符串：

```
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:JSONDictionary options:NSJSONWritingPrettyPrinted error:&error];
NSString* json = nil;
if (! jsonData) {
    NSLog(@"Got an error: %@", error);
} else {
    json = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
} 
```

其中 JSONDictionary 初始化为：

```
NSDictionary *JSONDictionary = [NSDictionary dictionaryWithObjectsAndKeys: dateString, @"start",  [self.currentlyConnectedPeripheral UUID], @"device_id", [self.currentlyConnectedPeripheral name], @"device_name", rrs, @"rates", @"123", @"id", nil]; 
```

但我的应用程序引发了一个异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Invalid type in JSON write (__NSCFType)' *** 
```

我的问题是什么，我怎样才能让它发挥作用？

# sql - Rails 3.2：订购 has_many ：通过选择，当通过模型具有 default_scope 时

> ID：13289019
> 
> 赞同：4
> 
> 时间：2012-11-08T12:20:08.070
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我有一个简单的时间跟踪应用程序，其中包含项目、任务和条目。

设置很简单：

```
class Project < ActiveRecord::base
  has_many :tasks
  has_many :entries, :through => :tasks
end

class Task < ActiveRecord::base
  belongs_to :project
  has_many :entries

  default_scope order("name asc") # this causes problems
end 
```

（`Entry`完全是直截了当的，所以我把它省略了）

但是，在尝试对从项目中选择的条目进行自定义排序时，我遇到了麻烦。具体来说，我正在尝试选择最新的条目，如下所示：

```
latest_entry = project.entries.order("created_at desc").first 
```

但是由于存在`:through => :tasks`和`default_scope`，`Task`Rails 执行的实际查询变为：

```
SELECT `entries`.* FROM `entries`
INNER JOIN `tasks` ON `entries`.`task_id` = `tasks`.`id`
WHERE `tasks`.`project_id` = 23
ORDER BY name asc, entries.date desc LIMIT 1 -- wrong order! 
```

请注意`ORDER BY clause`- 它包括`default_scope`from `Task`，只有在那之后它才包括我指定的顺序。

所以基本上，我*没有*得到项目中所有条目的最新条目，而只有第一个任务中的最新条目。

有什么办法吗？似乎应该有一种方法可以忽略/否定`default_scope`-model `through`（不完全删除`default_scope`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:31:33.280

[重新排序](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-reorder)怎么样：

```
latest_entry = project.entries.reorder("created_at desc").first 
```

# java - 如何正确使用 java.util.Locale 检查澳大利亚语言环境

> ID：13289024
> 
> 赞同：6
> 
> 时间：2012-11-08T12:20:35.417
> 
> 标签：java, locale

**问题：**如何正确使用 java.util.locale 来检查用户的语言环境？

**摘要：**我拥有的遗留代码在 Locale 中使用预定义的静态来检查用户是否，例如，在法国......

```
if(Locale.FRANCE.equals(locale) || Locale.FRENCH.equals(locale)) {
    // do stuff
} 
```

我想添加一些代码来检查用户是否在澳大利亚。但是，Locale 只有一组有限的预定义静态变量，而 AUSTRALIA 不是其中之一。我似乎能够做到以下几点......

```
if(new Locale("AU").equals(locale)) {
    // do stuff
} 
```

但是，这与现有代码不一致。正确的做法是什么？如果我给出的第一个例子是正确的，为什么预定义的静态列表如此有限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T12:26:35.510

不`new Locale( "AU" )`，将是语言“AU”（无论是什么）。您需要两个参数构造函数！

这些`Locale.equals()`方法比较`language`,`country`和`variant`。您可能应该像这样检查：

```
if ( "AU".equals( locale.getCountry() ) ) { /* do stuff */ } 
```

至于为什么预定义的列表`Locale`如此有限：通过。我们可能应该感到荣幸的是，根本没有任何东西`en_US`:-)

干杯，

# emacs - 向 elisp 中的文件添加执行属性

> ID：13289026
> 
> 赞同：3
> 
> 时间：2012-11-08T12:20:38.273
> 
> 标签：emacs, lisp, elisp

我知道函数 set-file-modes 但它不支持“u+x”之类的东西。

elisp 中是否有支持“u+x”之类的功能？

**更新完整解决方案：**

```
(set-file-modes fname (file-modes-symbolic-to-number "u+x" (file-modes fname))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:44:15.153

您可能想查看`file-modes-symbolic-to-number`将“u+x”转换为数字。

# email - 邮件功能不工作

> ID：13289031
> 
> 赞同：0
> 
> 时间：2012-11-08T12:20:58.270
> 
> 标签：email, joomla

从明天开始，我将面临一个巨大的问题，但我还没有弄清楚。一个月前，我在一个 joomla 网站上做了一些编程工作。一切正常，但一周后，该网站的电子邮件功能已停止工作。我在测试文件中检查了以下功能，但我没有收到电子邮件。

```
$mailer = JFactory::getMailer();

$mailer->addRecipient("test@example.com");
$mailer->setSubject("test subject");

$mailer->setBody("email body");

$mailer->Send(); 
```

我只是被这个问题困住了。我已经通过电子邮件将这个问题发送给godaddy。他们说我们的服务器不会影响电子邮件发送过程。我会非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:47:02.580

方法一

```
$send_status = JUtility::sendMail($from, $fromname, $recipient, $subject, $bodyStr, true,'', null, null, $replyto, $replytoname); 
```

方法二

```
 $mail =& JFactory::getMailer();
    $mail->setSender(array($from, $fromname));
    $mail->setSubject($subject);
    $mail->setBody($bodyStr);
    $mail->IsHTML(true);
    $mail->addRecipient($recipient);
    $mail->Send(); 
```

不要忘记用您的值替换变量。另外在后端设置电子邮件设置-全局配置选项卡->服务器

# java - 如何浏览 Java POI 表？

> ID：13289033
> 
> 赞同：0
> 
> 时间：2012-11-08T12:21:12.793
> 
> 标签：java, apache-poi

我有一个访问 Java POI 工作表中的单元格的示例：

```
CellReference cr = new CellReference("A1");
row = mySheet.getRow(cr.getRow());
cell = row.getCell(cr.getCol()); 
```

但是现在如果我需要一行中的下一个单元格或另一行中的另一个单元格，是否有一种简单的方法可以浏览工作表？是否有某种类型的增量函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:53:12.213

在[HSSFRow](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRow.html#cellIterator%28%29)的 Javadoc 中有一个 iterator() 函数，但它适用*于物理定义的单元格*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:24:20.477

应该有某种迭代器。在旧版本的 POI 中是这样的： Iterator rowIterator = sheet.rowIterator(); while (rowIterator.hasNext()) { Row R = rowIterator.next(); 单元格 = R.getCell(1); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:26:01.967

cr.getRow() 和 cr.getCol() 是 int 因此它们可以递增以返回必要的单元格

# actionscript-3 - 缩放DisplayObject和宽度的关系

> ID：13289034
> 
> 赞同：0
> 
> 时间：2012-11-08T12:21:16.017
> 
> 标签：actionscript-3, flash, apache-flex, flex4, flex3

如果容器被缩放，事件本身和它的子元素都不会改变宽度值，那么它们如何改变它们的宽度呢？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            private function scaleOutContainer():void {
                outerContainer.scaleX = slider.value;
                trace("outerContainer.width: " + outerContainer.width);
                trace("outerContainer.scaleX: " + outerContainer.scaleX);
                trace("image width: " + fotoImig.width);
                trace("image scaleX: " + fotoImig.scaleX);
                var containerBound:Rectangle = outerContainer.getBounds(this);
                trace(containerBound);
                trace("=====================");
            }
        ]]>
    </fx:Script>
        <s:Group id="outerContainer" left="50" top="80" width="500">
            <s:layout>
                <s:VerticalLayout/>
            </s:layout>
            <s:BitmapImage id="fotoImig" source="@Embed('assets/foto.jpg')"/>
            <s:Label id="info" text="Test Scale"/>
        </s:Group>
        <s:HGroup left="50" top="50">
            <s:Label text="scale outContainer"/><s:HSlider id="slider" snapInterval="0.1" value="1" change="scaleOutContainer()"/>
        </s:HGroup>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T22:23:52.393

每个 DisplayObject 仅具有**变换矩阵**（在 object.transform.matrix 中可用）。诸如 x、y、scaleX、scaleY、rotation、width、height 之类的值只是 setter / getter 函数，适用于矩阵。

例如 scaleX getter`Math.sqrt(m[0]*m[0] + m[1]*m[1] + m[2]*m[2]);`对应于具有由变换矩阵的第一行定义的大小的框的对角线。

**宽度**吸气剂是`o.getBounds(o.parent).width`

**高度**吸气剂是`o.getBounds(o.parent).height`

但我仍然不明白，宽度和高度设置器是如何工作的。例如

```
var rect = new Sprite();
rect.graphics.drawRect(0,0,100,100);
rect.rotation = 20;
trace(rect.width);  // 128.15
rect.width = 80;
trace(rect.width);  // 92.85
rect.width = 80;
trace(rect.width);  // 89.4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:15:42.330

`scaleX`并且`scaleY`不以任何方式影响对象的实际大小。比例属性只是修改它们*在屏幕上*的显示方式。对于应用程序来说，那个 50x50 的盒子仍然是 50x50，即使它在屏幕上看起来是 200x200 的`scaleX = scaleY = 4`.

以这种方式进行缩放，这样原始大小就不会丢失。通过这种方式，您可以自由地重复缩放对象，并且始终相对于原始大小。

我不确定比例属性实际上是如何工作的。如果您实际上挖掘了 a 的某些属性，`DisplayObject`则有多个宽度值（width、measuredWidth、explicitWidth 和 percentWidth in `UIComponent`）。我的猜测（不幸的是，纯粹是猜测）是其中一个值发生了变化，而宽度/高度值保持不变。

如果您需要缩放对象的宽度/高度值，您可以将宽度/高度值乘以它们各自的缩放属性。

# c# - 微软推送通知服务和 Windows Phone 7/8

> ID：13289045
> 
> 赞同：3
> 
> 时间：2012-11-08T12:22:09.603
> 
> 标签：c#, windows-phone-7, push-notification, windows-phone-8, mpns

我对 Windows Phone 的 MPNS（Microsoft 推送通知服务）有几个问题。

众所周知，windows phone 中的推送通知分为三种类型

1.  吐司通知
2.  壳牌通知
3.  原始数据通知

4.  我们可以同时显示 Toast 和 Tile。意味着当通过 MPNS 接收 toast 时，它也会更新我的应用程序磁贴的磁贴计数。

5.  假设我的应用程序未启动且未处于运行状态或后台。如果收到一些 toast 或 tile 通知。并且服务器在此推送中发送一些有效负载。我们能否在推送后启动应用程序时获得它，并且我们可以在我们的应用程序中获取此有效负载。

6.  什么是 TTL（生存时间）推送时间，或者我们可以在我们的有效负载中设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:31:07.437

> 我们可以同时显示 Toast 和 Tile。意味着当通过 MPNS 接收 toast 时，它也会更新我的应用程序磁贴的磁贴计数。

你必须为此做两次不同的推动。这是不同的有效载荷。

> 假设我的应用程序未启动且未处于运行状态或后台。如果收到一些 toast 或 tile 通知。并且服务器在此推送中发送一些有效负载。我们能否在推送后启动应用程序时获得它，并且我们可以在我们的应用程序中获取此有效负载。

您的意思是在收到通知时将一些数据保存到例如隔离存储中？这是不可能的。 [是否可以在 Windows Phone 7 中处理推送通知数据](https://stackoverflow.com/questions/4311662/is-it-possible-to-process-the-push-notification-data-in-windows-phone-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:25:54.257

对于原始和 VoIP Toast，后台代理可以处理传入的推送，然后您可以将数据写入隔离存储。对于单个推送有效负载，原始/VoIP toast 还可以更新磁贴，并同时显示消息 toast。

Tile 和 Message Toasts 根据定义没有代理，因此没有处理传入数据的代码。

> 什么是 TTL（生存时间）推送时间，或者我们可以在我们的有效负载中设置它。

在操作系统终止代理进程之前，您有**30 秒的时间。**

# c# - 试图从父级挂钩由子进程创建的对话框

> ID：13289046
> 
> 赞同：1
> 
> 时间：2012-11-08T12:22:10.883
> 
> 标签：c#, .net

我编写了一个小型实用程序，它使用 MSRA.exe 创建远程帮助邀请文件，并立即开始侦听帮助台环境的帮助请求。该应用程序运行良好，线程 MSRA.exe 对用户完全不可见，但我遇到的一个问题是，如果用户通过终止进程或其他东西来不正确地终止连接，那么下次运行我的应用程序和 MSRA 时。 exe 被调用它发送一个对话框，说用户没有正确关闭最后一个连接并且桌面设置没有恢复，他们是否希望现在恢复桌面设置？好吧，因为我隐藏了 MSRA，所以对话框也被隐藏了，并且在等待响应时暂停了 MSRA 程序，有没有办法检查这个对话框并强制回答？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Threading;
using System.Management;
using System.Runtime.InteropServices;
using System.Diagnostics;

namespace WindowsFormsApplication2
{

    public partial class Form1 : Form
    {
        System.Diagnostics.Process p = new System.Diagnostics.Process();
        public Form1()
        {
            InitializeComponent();
        }

        public void EndSession()
        {
            if (button1.Text != "Launch Connection")
            {
                button1.Text = "Closing Connection...";
                this.Refresh();
                if (p.HasExited == false)
                {
                    KillProcessAndChildren(p.Id);
                }
                if (File.Exists(System.IO.Path.GetTempPath() + "Invitation.msrcincident") == true)
                {
                    File.Delete(System.IO.Path.GetTempPath() + "Invitation.msrcincident");
                }
            }
            Application.Exit();
        }

        private void KillProcessAndChildren(int pid)
        {
            using (var searcher = new ManagementObjectSearcher("Select * From Win32_Process Where ParentProcessID=" + pid))
            using (ManagementObjectCollection moc = searcher.Get())
            {
                foreach (ManagementObject mo in moc)
                {
                    KillProcessAndChildren(Convert.ToInt32(mo["ProcessID"]));
                }
                try
                {
                    Process proc = Process.GetProcessById(pid);
                    proc.CloseMainWindow();
                    if (!proc.WaitForExit((int)TimeSpan.FromSeconds(3).TotalMilliseconds))
                    {
                        proc.Kill();
                    }
                }
                catch (ArgumentException)
                { /* process already exited */ }
            }
        }

        public void button1_Click(object sender, EventArgs e)
        {
            if (button1.Text == "Launch Connection")
            {
                button1.Text = "Opening Connection...";
                this.Refresh();
                if (File.Exists(System.IO.Path.GetTempPath() + "Invitation.msrcincident") == true)
                {
                    File.Delete(System.IO.Path.GetTempPath() + "Invitation.msrcincident");
                }

                string fileurl = System.IO.Path.GetTempPath() + "Invitation.msrcincident";
                p.StartInfo.UseShellExecute = true;
                p.StartInfo.RedirectStandardOutput = false;
                p.StartInfo.CreateNoWindow = true;
                p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                p.StartInfo.FileName = "Msra.exe";
                p.StartInfo.Arguments = "/saveasfile " + fileurl + " MyPass";
                Console.WriteLine(p.StartInfo.Arguments);
                p.Start();

                while (File.Exists(System.IO.Path.GetTempPath() + "Invitation.msrcincident") == false)
                {
                    Thread.Sleep(1000);
                }
                FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create("ftp://ftp.MyFTP.net/" + System.Environment.UserName + "." + Dns.GetHostName() + ".msrcincident");
                request.Method = WebRequestMethods.Ftp.UploadFile;
                request.Credentials = new NetworkCredential("MyUser", "MyPass");
                request.UsePassive = true;
                request.UseBinary = true;
                request.KeepAlive = false;
                Stream ftpstream = request.GetRequestStream();

                FileStream stream = File.OpenRead(fileurl);
                int length = 1024;
                byte[] buffer = new byte[length];
                int bytesRead = 0;
                do
                {
                    bytesRead = stream.Read(buffer, 0, length);
                    ftpstream.Write(buffer, 0, bytesRead);
                } while (bytesRead != 0);

                stream.Close();
                ftpstream.Close();
                button1.Text = "Connection Open";
            }
            else
            {
                EndSession();
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            EndSession();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            textBox1.Text = System.Environment.UserName;
            textBox2.Text = Dns.GetHostName();

            Process[] processes = Process.GetProcessesByName("msra");

            foreach (Process process in processes)
            {
                process.Kill();
            }

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            EndSession();
        }
    }
} 
```

# php - 从ajax打开jquery弹出窗口

> ID：13289049
> 
> 赞同：-1
> 
> 时间：2012-11-08T12:22:26.450
> 
> 标签：php, javascript, jquery, firefox

我使用在我的页面上完美运行的 jquery 弹出插件。

但是，如果我从 ajax 调用此页面，则 Jquery 弹出窗口不起作用。

有什么建议吗？

非常感谢！！

```
$(document).ready(

function(){
//open popup
$(".pop").click(function(){

var url = $(this).attr('name');

 $("#"+url).fadeIn(1000);
 positionPopup(this);
});

//close popup
$(".close").click(function(){

  var url = $(this).attr('name');

$("#"+url).fadeOut(500);
});
}); 
```

也许 document.ready 没有从 ajax 调用？我应该如何调用该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:47:35.010

您应该使用`on`方法而不是仅使用`click`. 您的代码将是：

```
$(document).ready(

function(){
//open popup
$(document).on("click", ".pop", function(){

var url = $(this).attr('name');

 $("#"+url).fadeIn(1000);
 positionPopup(this);
});

//close popup
$(document).on("click", ".close", function(){

  var url = $(this).attr('name');

$("#"+url).fadeOut(500);
});
}); 
```

这里的问题是关于事件冒泡。当您使用 ajax 动态创建 html 元素时，事件不会附加到它们。该`on`方法解决了问题。

# android - 为什么我的if语句只运行android中的else部分

> ID：13289064
> 
> 赞同：1
> 
> 时间：2012-11-08T12:23:08.357
> 
> 标签：android, if-statement

我正在尝试通过连接到 php 服务器并匹配存储在服务器中的数据库中的用户名密码来为我的 android 应用程序进行登录活动。如果用户是捐赠者，我检索语句 1，如果用户是医院，我检索语句 0。但是在下面的代码中，即使结果是 o，if 语句也总是跟在 else 部分之后。

这是我的登录课程

```
 login_hos.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String   mUsername = username.getText().toString();
            String  mPassword = password.getText().toString();

            tryLogin(mUsername, mPassword);
            try {
                if (!response.equals("Login Error !")&&(!response.equals("Connection Error !"))){
                    String arr[]=response.split(",");
                    String type=arr[1];
                    type.trim();
          // String usr="donor";

        if (type.equals("0")) {
                            Log.v("type", type);
                            Intent intent = new Intent(
                                    getApplicationContext(),
                                    HospitalHome.class);
                            intent.putExtra("user_name", arr[0]);
                            startActivity(intent);
                        }
                        else{
                            Log.v("type", type);
                            Intent intent = new Intent(getApplicationContext(),
                                    DonorHome.class);
                            intent.putExtra("user_name", arr[0]);
                            startActivity(intent);
                        }

                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:35:22.467

尝试在 if 语句之前记录您的类型。实际查看类型是什么。

如：

```
 Log.i("Type", type);
 if (type.equals("0")) {
                        Log.v("type", type);
                        Intent intent = new Intent(
                                getApplicationContext(),
                                HospitalHome.class);
                        intent.putExtra("user_name", arr[0]);
                        startActivity(intent);
                    } 
```

此外，在记录时，创建一个`final String TAG = "myActivity"`; 作为类属性，然后以这种方式添加该标签：`Log.i(TAG, "thingIwanttolog");`

# java - org.aspectj.lang.NoAspectBoundException - 方法 ()V 未找到

> ID：13289065
> 
> 赞同：2
> 
> 时间：2012-11-08T12:23:17.873
> 
> 标签：java, spring, maven, aspectj

[我遇到了与Spring forum 中 vanhre](http://forum.springsource.org/showthread.php?74717-AspectJ-AJDT-and-Spring-AOP-exception-initializing)相同的问题，但就我而言，我无法更改构造函数。

我正在使用 Spring java 配置，所以它在码头启动期间初始化正常，但是在运行时，当我用我的方面执行功能时，它失败了，论坛中出现了完全相同的异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T12:23:17.873

后来我发现，`aspectjrt`我的 pom.xml 需要依赖。

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.12</version>
</dependency> 
```

**编辑：**缺少依赖是一个错误，但真正的问题是 Eclipse + 方面的组合。当我使用 Eclipse 构建我的方面类时，发生了这个错误。此外，当我编译类方面的建议时，方面没有被调用。

**解决方案：**您必须使用 maven 来构建您的应用程序（如果有人找到 Eclipse 的解决方案，我会很高兴，因为我相信我会忘记这一点）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T09:59:48.123

下载 [http://central.maven.org/maven2/org/aspectj/aspectjrt/1.6.9/aspectjrt-1.6.9.jar](http://central.maven.org/maven2/org/aspectj/aspectjrt/1.6.9/aspectjrt-1.6.9.jar) 并添加到您的项目中

# linux - Bash 脚本编写 2 个文件，每个输入行具有不同的输出元素

> ID：13289066
> 
> 赞同：1
> 
> 时间：2012-11-08T12:23:17.363
> 
> 标签：linux, bash, sed

我想使用 bash 脚本将 1 个输入文件处理为 2 个输出文件，每个文件包含与输入文件相同的行数，但输入行的不同部分。特别是其中一个输出文件必须包含输入行选择的 md5hash，（每行计算的哈希，而不是每个文件！）：

所以

**Input_file.txt: ** 3 个字段，以空格分隔**

```
12347654 abcdfg 1verylongalpha1234numeric1

34543673 nvjfur 2verylongalpha1234numeric2

75868643 vbdhde 3verylongalpha1234numeric3 
```

**输出文件_1.txt 必须如下所示：（**左字段是 MD5sum，右字段是来自输入文件的字段 3，它也包含在 MD5hash 中）：

```
12df5j754G75f738fjk3483df3fdf9 1verylongalpha1234numeric1

3jf75j47fh4G84ka9J884hs355jhd8 2verylongalpha1234numeric2

4hf7dn46chG4875ldgkk348fk345d9 3verylongalpha1234numeric3 
```

**输出 file_2.txt 必须如下所示：（**输入文件中的 field1 和 field2 + MD5HASH）

```
12347654 abcdfg 12df5j754G75f738fjk3483df3fdf9

34543673 nvjfur 3jf75j47fh4G84ka9J884hs355jhd8

75868643 vbdhde 4hf7dn46chG4875ldgkk348fk345d9 
```

我已经有一个脚本可以完成这项工作，但它的性能非常糟糕：（下面的脚本可能不起作用，这是我的想法，我写这个的地方没有 linux，抱歉）

```
#!/bin/bash

While read line

do   MD5_HASH=${sed -nr 's/^[[:digit:]]*\s[[:alpha:]]*\s([[:alnum:]]*)/\1/p' <<<$line     | md5sum} 
read $line DATA_PART1 DATA_PART2 DATA_PART3

echo "$MD5_HASH $DATA_PART3" >> file_1.txt    ##append file_2.txt in loop THIS IS WHERE IT GETS HORRIBLY SLOW!

echo "$DATA_PART1 $DATA_PART2 $MD5_HASH" 
done < input_file.txt > file_2.txt

exit 0 
```

我认为“使用附加结构将标准输出重定向到文件”'>>' 是造成性能缓慢的原因，但我想不出另一种方法。它在循环中，因为我必须计算每行的 md5hash。

（哦，sed 命令是必要的，因为实际上进入 MD5SUM 的部分只能用正则表达式和相当复杂的模式捕获）

所以有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:46:47.613

您的 bash 脚本可以稍微整理一下。请注意，该`read`命令可以将 3 个字段读入单独的变量中：

```
#!/bin/bash
rm -f file_1.txt file_2.txt    
While read f1 f2 f3; do
    hash=$(md5sum <<< $f3)
    printf "%s %s\n" "$hash" "$f3" >> file_1.txt
    printf "%s %s %s\n" "$f1" "$f2" "$hash" >> file_2.txt
done < input_file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:37:23.253

这是我将使用功能齐全的语言（例如 Python）的一种情况。

尽管您可能会找到一种仅使用标准 gnu 工具来完成此操作的方法，但您很可能最终会得到一个解决方案：

*   非常复杂，难以阅读和维护
*   效率低下，因为这些工具没有提供直接的方法来做到这一点。

## 1.在Python中创建第一个文件

```
from hashlib import md5
with open('input.txt', 'r') as infile:
    for l in infile:
        if not l.strip(): continue
        parts = l.strip().split()
        print md5(parts[2]).hexdigest(), parts[2] 
```

## 2.在Python中创建第二个文件

```
from hashlib import md5
with open('input.txt', 'r') as infile:
    for l in infile:
        if not l.strip(): continue
        parts = l.strip().split()
        print parts[0], parts[1], md5(parts[2]).hexdigest() 
```

我不确定您在哪些字段上计算了校验和；但是，当然，您可以根据您想要的任何字段进行计算；您还可以在行上执行更复杂的基于正则表达式的匹配；您可以通过一次输出两个文件来加快速度，从而避免计算 md5 两次。

## 3.一次创建两个文件

```
from hashlib import md5
with open('infile.txt','r')  as infile, open('out1.txt','w') as out1, open('out2.txt','w') as out2:
    for l in infile:
        if not l.strip(): continue
        parts = l.strip().split()
        _checksum = md5(parts[2]).hexdigest()
        out1.write("%s\n" % " ".join([ _checksum, parts[2] ]))
        out2.write("%s\n" % " ".join([ parts[0], parts[1], _checksum ])) 
```

## 4\. 与 #1 相同，但从标准输入读取

```
import sys
from hashlib import md5
for l in sys.stdin:
    if not l.strip(): continue
    parts = l.strip().split()
    print md5(parts[2]).hexdigest(), parts[2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:51:15.967

无法确定您要为哪个字符串计算 md5，这个单行程序在整行上执行，并在“file1”和“file2”中输出处理后的“input_file”：

```
awk '{ "md5 -q -s \""$0"\"" | getline md5; 
     print md5" "$3 > "file1"; 
     print $1" "$2" "md5 > "file2" }' input_file 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:45:37.113

您可以从 bash 同时写入两个文件，如下所示：

```
; function to remove extraneous filename output from md5sum.  omit on 
; OS X, which has 'md5' command that already works this way.
md5() { set -- $(md5sum "$@"); echo "$1"; }

exec 3>file_1.txt 4>file_2.txt
while read left middle right; do
  md5="$(echo -n "$right" | md5)"
  echo >&3 "$md5 $right"
  echo >&4 "$left $middle $md5"
done <input_file.txt
exec 3>&- 4>&- 
```

假设您的示例使用简单的空格分隔字段；你当然仍然需要做任何`sed`魔法来获得 MD5 总和的实际目标。

但是，它不会很有效。`sed`为了获得更好的性能，您应该使用 Perl 或 Python 之类的东西，它们可以在一个进程中完成您正在使用的字段提取和 MD5 计算，这在循环输入行时也比 shell 快得多。Perl 示例：

```
perl -MDigest::MD5=md5_hex -lane '
  BEGIN { open $f1, ">file_1.txt"; open $f2, ">file_2.txt" }
  $md5 = md5_hex $F[2];
  print $f1 "$md5 $F[2]";
  print $f2 "$F[0] $F[1] $md5";
' input_file.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T13:44:35.247

您可以通过管道和并行来提高效率。

根据您的伪代码，您需要最后一个元素的 md5 总和：

```
paste -d ' '     \
  input_file.txt \
  <(cut -d' ' -f3 input_file.txt | parallel echo '{}' \| md5sum | cut -d' ' -f1) |
  awk '{ print $4, $3 > "file_1.txt"; print $1, $2, $4 > "file_2.txt" }' 
```

### 解释

md5 总和在进程替换中并行计算，此处的输出被“粘贴”到原始文件中。最后 awk 负责将输出放入正确的文件中。

### 编辑

我同意*redShadow*的观点，即这在 shell 中永远不会非常有效，因为您需要进行很多子 shell。这是 perl 中的一个替代方案：

*分裂.pl*

```
use Digest::MD5 qw(md5_hex);
use v5.10;

open O1, ">file_1.txt" or die $!; open O2, ">file_2.txt" or die $!;

$, = " ";

while(<>) { chomp; 
  @F = split / +/;
  $md5 = md5_hex $F[2];
  say O1 $md5, $F[2];
  say O2 @F[0,1], $md5;
}
close O1; close O2; 
```

像这样运行：

```
<input_file.txt perl split.pl 
```

两种情况下的输出：

*文件_1.txt*

```
765ac5d0002aed1141a6a4e7b90e4ac9 1verylongalpha1234numeric1
b31901def07d436aed2c8028b2efa4ec 2verylongalpha1234numeric2
0722a6e50f6f8726f9754e7f71f9ad2c 3verylongalpha1234numeric3 
```

*文件_2.txt*

```
12347654 abcdfg 765ac5d0002aed1141a6a4e7b90e4ac9
34543673 nvjfur b31901def07d436aed2c8028b2efa4ec
75868643 vbdhde 0722a6e50f6f8726f9754e7f71f9ad2c 
```

# maven - 如何在grails中使用maven配置文件和配置文件？

> ID：13289069
> 
> 赞同：0
> 
> 时间：2012-11-08T12:23:23.150
> 
> 标签：maven, grails, maven-profiles

我有 grails 应用程序，它是一个更大的 Maven 项目的子项目。我想将一些属性传递给 grails。这些属性在 Maven 配置文件中定义。我怎样才能做到这一点？如何在 grails 应用程序中访问这些属性？如果我想用 grails run-app 运行这个应用程序，如何使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:49:31.333

我假设您使用的是 Maven Grails 插件。

这是工作 pom.xml 的净化摘录，我成功地将系统属性传递给 Grails：

```
 <plugin>
        <groupId>org.grails</groupId>
        <artifactId>grails-maven-plugin</artifactId>
        <version>${grails.version}</version>
        <extensions>true</extensions>
        <configuration>
          <properties>
            <java.io.tmpdir>${project.build.directory}</java.io.tmpdir>
          </properties>
        </configuration>
      </plugin> 
```

# mysql - mysql join：什么更快？

> ID：13289072
> 
> 赞同：0
> 
> 时间：2012-11-08T12:23:39.993
> 
> 标签：mysql, performance, join

我的桌子：big_table

```
+-----------------+--------------+------+-----+--- ------+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------------+--------------+------+-----+--- ------+----------------+
| 编号 | 中型(7) | 否 | 优先级 | 空 | 自动增量 |
| 标题 | varchar(255) | 否 | | 空 | |
| 类别 ID | 小整数(2) | 否 | | 空 | |
| sub_category_id | 小整数(2) | 否 | | 空 | |
| 宽度 | 小整数(5) | 否 | | 空 | |
| 身高 | 小整数(5) | 否 | | 空 | |
| ratio_width | 小整数(5) | 否 | | 空 | |
| ratio_height | 小整数(5) | 否 | | 空 | |
| 尺寸 | 整数(8) | 否 | | 空 | |
| 哑剧 | 小整数(2) | 否 | | 空 | |
| 意见 | 中型(7) | 否 | 穆尔 | 空 | |
| 时间 | 整数(10) | 否 | | 空 | |
| 文件 | varchar(255) | 否 | | 空 | |
+-----------------+--------------+------+-----+--- ------+----------------+

```

小桌子

```
+--------+-------------+------+-----+---------+-- -----+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+--------+-------------+------+-----+---------+-- -----+
| 编号 | 中型(7) | 否 | 优先级 | 空 | |
| 宽度 | 小整数(5) | 否 | 穆尔 | 空 | |
| 身高 | 小整数(5) | 否 | 穆尔 | 空 | |
+--------+-------------+------+-----+---------+-- -----+

```

那么什么更快（示例）：

```
 SELECT * FROM `big_table` WHERE `width` =1920 AND `height`=1080; 
```

或使用加入

```
 select big_table.*
 from small_table
 left join small_table small_table2
 ON (small_table.id=small_table2.id
     and `small_table`.`height` = '1080')
 left join big_table
 ON (big_table.id=small_table.id)
 where small_table.width = '1920'; 
```

或加入同一张桌子？

```
select big_table.*
from big_table as big_table1
left join big_table big_table2
ON (big_table1.id=big_table2.id and  `big_table1`.`height` = '1080')
left join big_table 
ON (big_table.id=big_table1.id)
where big_table1.width = '1920'; 
```

还是有一些更好的解决方案，更好的选择？（在两个表上我都可以使用索引（宽度和高度），但只有 ID 是唯一的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:28:35.403

没有加入比加入更快。如果您有一个适当的索引（即`width`和组合的单个索引`height`），那么简单的选择`big_table`会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:31:29.347

查询执行时间，并不是唯一需要考虑的参数。
如果任何其他表必须加入`big_table`，它会破坏这些连接的性能。

为了可扩展性，我会挑衅地拆分表，将数据分开将确保您不会在这里出现瓶颈。

确保将*最少使用的数据*放在一个表中，将最常用的数据放在另一个表中。如果你有一个巨大的`text`，把它放在最少使用的表中，也会很好。

# c# - 如何移动列表中的数据

> ID：13289082
> 
> 赞同：1
> 
> 时间：2012-11-08T12:24:14.520
> 
> 标签：c#, algorithm, linq, list, arraylist

我有以下情况，我想获得一个没有大量循环和切片的通用解决方案。

首先 ：

我初始化`N`它通过它计算列表大小（初始大小）：

通过这个方程`N(N-1)/2`..

假设我设置`N = 5`了初始大小为`10`.

之后，我用一些方法用一个和零填充列表。

像这样 ：

> 0 1 0 1 1 1 0 1 0 1

该列表根据 N 分段，其中分段为 (N-1)。

所以

*   第一段是：`0 1 0 1`
*   第二段是：`1 1 0`
*   第三部分是：`1 0`
*   第四段是：`1`

> [0 1 0 1] [1 1 0] [1 0] [1]

我想做的是，如果我再次输入任何数字作为输入 N：

通过适当的移位保持以前的数据

根据新尺寸。例如，如果 N=6，则尺寸为 15

所以我将有 5 个段而不是 4 个

我想要这样：

> [0 1 0 1 **0** ] [1 1 0 **0** ] [1 0 **0** ] [1 **0** ] [ **0** ]

反之亦然，如果我首先输入 N = 7 并填写它。然后我输入 N = 4

我想做正确的转变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:33:56.473

有什么理由必须将这些放在一个列表中？似乎您所拥有的是此处的 n 个列表的列表，因此创建一个大小为 N 的列表，其中包含大小为 1 到 N 的列表。这样，当您增加 N 时，您只需在每个列表中添加适当数量的 0 并创建只有 0 英寸的新列表。如果您减少 N，我不确定规则是什么，但我怀疑相比之下您只会删除短列表的适当数量，然后从其他列表中删除最后但许多元素。

就拥有一个数组列表而言，它不起作用，但它是存储您描述的数据的更好方法，我会说。无论如何，您总是可以很容易地从我描述的模型中获得扁平化列表......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:35:04.807

也许您应该开始考虑二维并使用 a`List<Segment>`而 a`Segment`是 a `List<bool>`。通过使用它，您应该能够轻松地添加/删除段或以您喜欢的方式更改所有段。但这会以某种方式导致*严重的循环*，但我认为如果没有任何级别的循环，你就无法解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T12:28:18.850

这似乎`LinkedList`是最适合您的集合类。它使您能够在列表中的任何位置以恒定的时间插入和删除元素。

下面给出了将 N 加一和减一的算法。两个操作都是 O(N)。

```
// the whole list of integers
var data = new LinkedList<int>();

// stores the final node of each segment
var segmentEnds = new LinkedList<LinkedListNode<int>>();

/* INCREASING */
// increase all existing segments by one
var node = segmentEnds.First;
while (node != null)
{
    node.Value = data.AddAfter(node.Value, 0);
    node = node.Next;
}

// add the last segment of size 1
segmentEnds.AddLast(data.AddLast(0));

/* DECREASING */
if (data.Count > 0)
{
    // remove the last element from each segment
    node = segmentEnds.First;
    while (node != null)
    {
        var temp = node.Value.Previous;
        data.Remove(node.Value);
        node.Value = temp;
        node = node.Next;
    }

    // remove the last (now empty) segment
    segmentEnds.RemoveLast();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T12:32:52.497

```
int N = 5;
var array = Enumerable.Range(1, N - 1).Select(i => Fill(i))
                      .SelectMany(x => x)
                      .ToArray();

int[] Fill(int len)
{
    int[] arr = new int[len];
    for (int i = 0; i < len; i++) arr[i] = 1; //Fill
    return arr;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T12:46:05.393

本质上，您正在对具有一维列表的 2D 数据结构进行建模。尽管它有些不正统，但通常这样做是为了节省内存。

最简单的解决方案是在扩展或收缩列表时制作副本。当您需要缩短或扩展您的列表时，创建一个目标大小的新列表，然后使用两个嵌套循环进行复制，就好像原始列表是一个 2D 数据结构一样。`row`制作一个接受 a 、 a`column`和 an的映射函数，`N`并将索引返回到与该`{row, column}`对对应的普通列表中可能非常有用：

```
private static int MakeIndex(int r, int c, int N) {
    return (N*(N+1)-(N-r)*(N+1-r))/2+c;
} 
```

现在，您可以将 size 列表中的一对索引转换`{r, c}`为 size 列表中`N1`同一对的索引`N2`。

您可以通过就地扩展和收缩来改进此解决方案。关键问题是你走的方向：收缩时，从前到后；展开时，从后向前。

# android - 如何通过命令行查找设备的安卓操作系统版本？

> ID：13289086
> 
> 赞同：3
> 
> 时间：2012-11-08T12:24:24.423
> 
> 标签：android, android-emulator

我有这样的要求，如果连接到系统的设备的 android sdk 版本高于 2.1，那么它应该采用 sdcard 路径`/sdcard`，如果设备的版本高于 4.1，那么它应该采用 sdcard 路径`/mnt/sdcard`。

那么如何通过命令行找出连接到系统的设备版本是2.x版本的设备还是4.x版本的设备呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-27T06:48:25.190

这将为您提供 Android 设备所需的所有信息。

```
adb shell cat /system/build.prop 
```

您需要在设备设置中启用 USB 调试。（可选）如果权限被拒绝消息弹出，您可以使用以下

```
adb root 
```

编辑：

如果您有 AOSP 源代码，您可以查看**build/core/version_defaults.mk**文件并搜索**PLATFORM_VERSION**标签以获得确切的 Android 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T08:33:29.300

我不确定您到底想要什么，但可以将其过滤为两种可能性。

1）您想通过运行模拟器的机器上的命令行确定它正在运行的android版本。如果是这种情况，您要使用以下命令：

```
adb shell grep ro.build.version.sdk= system/build.prop 
```

这将返回一个数字，您可以使用它来确定 android 版本。请注意，如果您连接了多个仿真器/设备以将其指向特定设备，则可能需要添加 -s 标志。

2）在一个 android 应用程序中，您想要获取 android 版本以确定 sdcard 文件的位置。如果这是您正在寻找的内容，那么您问错了问题，您想知道的是我如何确定 sdcard 在设备上的位置。在这种情况下，答案是：

```
Environment.getExternalStorageDirectory(); 
```

或可在[http://developer.android.com/reference/android/os/Environment.html找到的类似方法之一](http://developer.android.com/reference/android/os/Environment.html)

# php - PHP - 为这个数组结构构建表的最有效方法

> ID：13289092
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:09.027
> 
> 标签：php, arrays

我刚刚问了一个关于关联数组和使用 foreach 检索数据的问题，但我正在努力想一种方法来从这个数据结构中构建我想要的表。

`$dailytotals`我有一个表格数组

```
Array
(
    [204] => Array
    (
        [1] => Array
           (
               [leads] => 9
           )

        [2] => Array
            (
                [leads] => 15
            )

    )

    [200] => Array
    (
        [1] => Array
            (
                [leads] => 7
            )

        [2] => Array
            (
                [leads] => 16
            )

        [3] => Array
            (
                [leads] => 5
            )
) 
```

所以我可以在主数组中有任意数量的子数组，其中包含任意数量的子数组。

到目前为止，我已经完成了构建表头的宏伟任务：

```
<table>
    <tr>
        <th>Clinic</th>

        <?php
         // get unique columns - not all clinics will have leads for all columns
        $columns = array();
        foreach ($dailytotals as $key => $arr) {
            $columns = array_unique(array_merge($columns, array_keys($arr)));
        }

        foreach ($columns as $index => $campaignid) {
           echo '<th>' . $campaignid . '</th>';
        }
       ?>
    </tr> 
```

但是我现在完全卡住了如何构建表体。

我要构建的结构是：

```
Clinic  |  1  |  2  |  3  |
___________________________
204     |  9  |  15 |  0  |
200     |  7  |  16 |  5  | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:35:45.977

你需要一些嵌套循环。试试这个：

```
<table>
    <tr>
        <th>Clinic</th>

        <?php
         // get unique columns - not all clinics will have leads for all columns
        $columns = array();
        foreach ($dailytotals as $key => $arr) {
            $columns = array_unique(array_merge($columns, array_keys($arr)));
        }

        foreach ($columns as $index => $campaignid) {
           echo '<th>' . $campaignid . '</th>';
        }
       ?>
    </tr>
    <?php
        foreach($dailytotals as $clinic => $data)
        {
            echo '<tr>';
            echo '<td>'.$clinic.'</td>';
            foreach($columns as $column)
            {
                echo '<td>';
                echo isset($data[$column]) ? $data[$column]['leads'] : 0;
                echo '</td>';
            }
            echo '</tr>';
        }

    ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:37:08.303

此代码未经测试，但只需稍作修改即可尝试（如果需要）

```
 <table>
  <tr>
    <th>Clinic</th>
  <?php
     // get unique columns - not all clinics will have leads for all columns
    $columns = array();
    $max=0;
    foreach ($dailytotals as $key => $arr) {
        $columns = array_unique(array_merge($columns, array_keys($arr)));
    }

    foreach ($columns as $index => $campaignid) {
       echo '<th>' . $campaignid . '</th>';
       $max=$campaignid;
    }
    ?>
  </tr>

   <?php
    $columns = array();
    foreach ($dailytotals as $key => $arr) {
        for($i=0;$i< $max;$++)
         {
            echo "<tr>";
            if(is_set($arr[i])
             {
                echo "<td>".$arr[i]."</td>";
             }
            else
             {
                echo "<td>0</td>";
             }
            echo "</tr>";
         }
    }
    ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:53:11.763

试试这个

```
foreach ($dailytotals as $key => $arr) {
  echo '<tr>';
  foreach ($columns as $campaignid) {
    $val = isset($arr[$campaignid]) ? $arr[$campaignid]['leads'] : 0;
    echo '<td>' . $val . '</td>';
  }
  echo '</tr>';
} 
```

# jquery - 无法重新初始化 jScrollPane（使用 Ajax）

> ID：13289093
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:16.953
> 
> 标签：jquery, ajax, jscrollpane

我在我的页面中使用以下代码，以便重新初始化 jScrollPane，用于通过 ajax 刷新其内容的 div：

```
<script>
    var $j = jQuery.noConflict();
    $j(document).ready(function() {

        $j('#map_data').jScrollPane({
               showArrows: true,
               autoReinitialise: false
        });

        $j('.country .point').click(function () {
            var point_id = $j(this).attr('id');
            theCall(point_id);
        });

    });

    function theCall(pointid) { 
        $j.ajax({
            type: 'POST',
            url: 'my_ajax_receiver.php',
            data: {point_id: pointid}, 
            dataType: 'html',     

            success: function(a) {
                            $j("#map_data").html(a);

                            var api = $j("#map_data").jScrollPane().data('jsp');
                            api.getContentPane().html(a);
                            api.reinitialise(); 
            }

        });
    }
</script> 
```

我搜索并测试了有关此问题的许多其他解决方案，但到目前为止没有任何效果。我看不出这段代码有什么问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:56:17.600

不知何故它现在正在工作，这是正确的代码，它可能对其他人有帮助

```
<script>
    var $j = jQuery.noConflict();
    $j(document).ready(function() {

        $j('.country .point').click(function () {
            var point_id = $j(this).attr('id');
            theCall(point_id);
        });

    });

    function theCall(pointid) { 
        $j.ajax({
            type: 'POST',
            url: 'my_ajax_receiver.php',
            data: {point_id: pointid}, 
            dataType: 'html',     

            success: function(a) {
                            $j("#map_data").html(a);

                            var api = $j('#map_data').jScrollPane({}).data('jsp');
                            api.reinitialise(); 
            }

        });
    }
</script> 
```

# java - 如何在 Eclipse 中制作可执行的 JAR 应用程序？

> ID：13289095
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:22.920
> 
> 标签：java

我已经制作了一些 Java 应用程序，并且我想制作可执行的 JAR 文件。我尝试使用“导出”->“可运行的 JAR 文件”，它可以工作，但是我的应用程序包含带有图像的文件夹，并且应用程序在没有任何图像的情况下执行！但是，如果我尝试使用“导出”->“JAR 文件”，我会制作 JAR 文件，但我无法执行它 - 按文件单击却什么也得不到！我选择主类，任何资源，但我的 JAR 文件不执行。请告诉我，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:31:22.367

这完全取决于图像在 Java 代码中的加载/使用方式*。*最适合我的是在你的项目中有一个文件夹（包），称为适当的东西（例如“res”或“resources”）并将所有不是java代码的东西放在那里。然后，您可以使用指向这些资源的 URL 加载您的资源。请参见下面的示例：

```
URL css_url = getClass().getResource("/resource/style.css"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:33:47.937

在项目的 src 文件夹中添加 img 文件夹。刷新项目。再次导出到可执行 Jar 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:03:03.850

您的 JAR 工作正常，问题出在图像的位置。您可以创建一个新文件夹，例如：`images`在您的项目内部并将您的图标放在那里。您将使用这种方式在菜单上设置图标：

```
nameOfComponent.setIcon(new ImageIcon("images/NameOfIcon.PNG")); 
```

但是这种方法的问题是您必须将您的图像文件夹与您的 JAR 文件一起“携带”：

![在此处输入图像描述](../Images/9f863a621803deea6677222c64bc4261.png)

这就是为什么你应该考虑这种[方法](https://stackoverflow.com/questions/13258375/how-to-set-an-icon-to-a-jframe-when-using-createandshowgui-method/13259593#13259593)

您将在 Project Explorer 中得到类似的信息：

![在此处输入图像描述](../Images/77e87886f2a28ae8b46e096ab15c7048.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:30:32.890

为了让应用程序知道额外内容在哪里（媒体、类等），它需要一个清单。清单应该与您的 Eclipse 设置一起生成，如果是，您需要编辑它并输入一些路径。

如果你没有一个，你可以简单地创建一个。

您需要了解的有关清单以及如何操作的所有信息都可以在这里找到：

[http://docs.oracle.com/javase/tutorial/deployment/jar/index.html](http://docs.oracle.com/javase/tutorial/deployment/jar/index.html)

# c# - DatagridView 单元格内容单击事件？

> ID：13289096
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:24.923
> 
> 标签：c#, winforms

当我单击行有时工作有时不起作用时，我正在使用 Datagrid-cellcontentclick 事件。

有没有人有类似的问题。当我单击行时，我具有获取客户 ID 的功能，它会显示行的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:27:37.400

如果您单击单元格内的内容`CellClick`，请改为使用on 激活。`CellContentClick`

在此基础上，Cell click 激活的不仅仅是鼠标。

`CellMouseClick`只会注册鼠标点击

**请记住，如果问题有帮助，为什么不继续标记它**

# mysql - MySQL RIGHT JOIN 停止使用此 AND 语句

> ID：13289099
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:39.643
> 
> 标签：mysql

当我有这个时：

```
SELECT * FROM orders_chosenoptions
RIGHT JOIN orders ON (orders.ID = orders_chosenoptions.order_id)
WHERE orders.deal_id = 982
AND orders.status = 'new' 
```

它给了我 41 行。现在这些行的 orders_chosenoptions.product_id 要么是 110 要么是 111

```
SELECT * FROM orders_chosenoptions
RIGHT JOIN orders ON (orders.ID = orders_chosenoptions.order_id)
WHERE orders.deal_id = 982
AND orders.status = 'new'
AND (orders_chosenoptions.product_id = 110 OR orders_chosenoptions.product_id = 111) 
```

给我35行？！就像它以某种方式停止了正确的加入？

除了 110 或 110 之外，没有其他行的产品 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:29:18.113

尝试这个

```
SELECT * FROM orders_chosenoptions
RIGHT JOIN orders
  ON orders.ID = orders_chosenoptions.order_id
  and orders.deal_id = 982
  AND orders.status = 'new' 
where orders_chosenoptions.product_id = 110
   OR orders_chosenoptions.product_id = 111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:29:04.263

尝试这个：：

```
SELECT * FROM orders_chosenoptions
RIGHT JOIN orders ON (orders.ID = orders_chosenoptions.order_id)
WHERE orders.deal_id = 982
AND orders.status = 'new' AND
orders_chosenoptions.product_id in (110, 111) 
```

# ruby - 如何在 Heroku 日志中查看请求的 IP 地址？

> ID：13289104
> 
> 赞同：2
> 
> 时间：2012-11-08T12:25:51.320
> 
> 标签：ruby, logging, heroku

有没有办法在 Heroku 日志中查看 http 请求的 IP 地址？我使用了命令行界面 'heroku log --app {app name} 但找不到查看 IP 地址的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-23T18:44:01.493

截至 2014 年，Heroku 路由器日志行如下所示：

```
2014-07-23T18:41:15.364378+00:00 heroku[router]: at=info method=GET path="/help" host=thesquarefoot.com request_id=d0b9623e-e6b4-4723-8bac-b884da01d7e3 fwd="98.14.243.118" dyno=web.3 connect=1ms service=16ms status=301 bytes=360 
```

该`fwd`值是请求的 IP 地址。

要查看您的日志，请运行`heroku logs --tail --app yourappname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:33:45.363

做

```
heroku logs --tail -a app_name 
```

并寻找诸如

```
2012-11-08T12:32:07+00:00 app[web.1]: Started GET "/" for x.x.x.x at 2012-11-08 12:32:07 +0000 
```

# java - JODATIME withZone 显示不正确的偏移量

> ID：13289105
> 
> 赞同：0
> 
> 时间：2012-11-08T12:25:56.930
> 
> 标签：java, coldfusion, jodatime

我在 Coldfusion 中使用 Java 对象，所以我的代码有点偏离。

我有一个看起来像这样的函数：

```
function getJODAOffset(sTimezone){
    local.oDateTimeZone = createObject('java','org.joda.time.DateTimeZone');
    local.oInstant = createObject('Java','org.joda.time.Instant');

    local.oFormatter = createObject("Java",'org.joda.time.format.DateTimeFormat');
    local.oFormatter = local.oFormatter.forPattern('ZZ');

    local.tTime = local.oDateTimeZone.forID(arguments.sTimezone).getStandardOffset(local.oInstant); //sTimezone = 'Europe/London';

    return local.oFormatter.withZone(local.oDateTimeZone.forID(arguments.sTimezone)).print(local.tTime);

} 
```

当我期望“ **+00:00 ”时，这给了我“** **+01:00** ”的输出，我不知道为什么。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:23:38.010

好吧，我想我现在明白了。

首先，我完全不确定您的代码是如何工作的*——*据我所知，没有任何`getStandardOffset(Instant)`方法——只有`getStandardOffset(long)`. 我们可以通过调用来解决这个问题`getMillis()`，但我不知道 Coldfusion 在做什么。

无论如何，我可以在这里重现问题：

```
import org.joda.time.*;
import org.joda.time.format.*;

public class Test {
    public static void main(String[] args) {
        DateTimeZone zone = DateTimeZone.forID("Europe/London");
        Instant now = new Instant();
        long offset = zone.getStandardOffset(now.getMillis());
        System.out.println("Offset = " + offset);
        DateTimeFormatter format = DateTimeFormat.forPattern("ZZ")
                                                 .withZone(zone);
        System.out.println(format.print(offset));
    }
} 
```

输出：

```
Offset = 0
+01:00 
```

问题是您将*偏移量*传递给`DateTimeFormatter.print`，它期望“自纪元以来的毫秒”值 -*瞬间*。所以它把它当作等同于：

```
format.print(new Instant(0)) 
```

现在`new Instant(0)`代表 1970 年 1 月 1 日 UTC 的午夜 - 但[欧洲/伦敦时区当时确实是 +01:00](http://en.wikipedia.org/wiki/Time_in_the_United_Kingdom#Experimentations_with_Central_European_Time) ......这就是你看到的偏移量。所以这不是 Joda Time 中的错误 - 这是你如何使用它的错误。

一种选择是创建一个`DateTimeZone`固定*在*您找到的偏移量的，并使用该区域格式化*任何*瞬间：

```
DateTimeZone fixedZone = DateTimeZone.forOffsetMillis(offset);
DateTimeFormatter format = DateTimeFormat.forPattern("ZZ")
                                         .withZone(fixedZone);
System.out.println(format.print(0L)); // Value won't affect offset 
```**

# postgresql - regclass 在 Postgresql 中是什么意思

> ID：13289107
> 
> 赞同：52
> 
> 时间：2012-11-08T12:26:00.290
> 
> 标签：postgresql, create-table

我在 CREATE TABLE 语句中有以下行：

```
field1_id bigint DEFAULT nextval('table1_field1_id_seq'::regclass) NOT NULL, 
```

上面的regclass是什么意思？添加是绝对要求`::regclass`吗？

**注意：**我看过 Postgresql 文档[链接](http://www.postgresql.org/docs/current/static/datatype-oid.html)，其中讲述了`regclass`，但无法理解。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-08T13:38:07.213

`regclass`不，在调用`nextval`接受参数的函数时不需要强制转换，因为从to`regclass`有一个隐式强制转换。在某些其他情况下，可能需要显式转换为。`text``regclass``regclass`

**解释：**

`::regclass`是一个演员表，如`::integer`.

`regclass`是一种“魔术”数据类型；它实际上是`oid`或“对象标识符”的别名。请参阅文档中的[对象标识符类型](http://www.postgresql.org/docs/current/static/datatype-oid.html)。Casting to`regclass`是说“这是一个关系的名称，请将其转换为该关系的 oid”的一种快捷方式。转换为`regclass`知道`search_path`，与直接查询`pg_class`关系不同`oid`，因此转换为 regclass 并不完全等同于 subquerying `pg_class`。

表是关系。序列和视图也是如此。因此，您也可以通过转换为 regclass 来获得视图或序列的 oid。

`text`为to定义了隐式转换`regclass`，因此如果您省略显式转换并且您正在调用接受转换`regclass`的函数，则会自动完成。所以你*不需要*它，例如，`nextval`调用。

还有其他地方可以。例如，您不能`text`直接与`oid`;进行比较 所以你可以这样做：

```
regress=> select * from pg_class where oid = 'table1'::regclass; 
```

但不是这个：

```
regress=> select * from pg_class where oid = 'table1';
ERROR:  invalid input syntax for type oid: "table1"
LINE 1: select * from pg_class where oid = 'table1'; 
```

* * *

只是为了好玩，我尝试编写一个查询来执行转换为的等效操作`regclass`。不要使用它，它主要是为了好玩，并试图演示实际发生的事情。除非你真的对 Pg 的工作原理感兴趣，否则你可以停止阅读这里。

据我了解，`'sequence_name'::regclass::oid`大致相当于以下查询：

```
WITH sp(sp_ord, sp_schema) AS (
  SELECT 
    generate_series(1, array_length(current_schemas('t'),1)),
    unnest(current_schemas('t'))
)
SELECT c.oid
FROM pg_class c INNER JOIN pg_namespace n ON (c.relnamespace = n.oid)
INNER JOIN sp ON (n.nspname = sp.sp_schema)
WHERE c.relname = 'sequence_name'
ORDER BY sp.sp_ord
LIMIT 1; 
```

除了它更短而且更快。等的定义见[系统信息函数。](http://www.postgresql.org/docs/current/static/functions-info.html)`current_schemas(...)`

换句话说：

*   获取一个 ab 数组，列出我们可以访问的所有模式，并将每个条目与一个序数配对，以表示其在数组中的位置
*   搜索`pg_class`具有匹配名称的关系并将每个关系与其命名空间（模式）相关联
*   按模式出现的顺序对剩余关系列表进行排序`search_path`
*   并选择第一场比赛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:37:33.627

根据我对文档的理解，oid 按类型细分。`regclass`是表示关系的数据库对象（因此它们属于元数据表 pg_class）。

它表达了序列和`DEFAULT`表达式之间的依赖关系（例如，如果在 INSERT 查询中没有提供显式值，则表示生成默认值的过程），因此如果`DROP SEQUENCE ...`在序列上发出 a ，则查询不会通过，除非它是级联的（通过写`DROP SEQUENCE table1_field1_id_seq CASCADE`）。

# jquery - Firefox中的jQuery fadeIn fadeOut图像差异1px

> ID：13289109
> 
> 赞同：2
> 
> 时间：2012-11-08T12:26:14.947
> 
> 标签：jquery, image, firefox, fadein, fadeout

我最近一直在使用 jQuery 实现图像滑块。

所以我在 Firefox 中遇到了一个问题，其中 FadeIn/FadeOut 过渡会将我的图像的宽度或高度缩短 1 px。但仅在效果进行时。

进度完成后，图像再次具有完整尺寸

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T12:26:14.947

找到了。

将此样式添加到您的图像中，它将在 FF 上解决。

```
box-shadow: #000 0em 0em 0em; 
```

出于某种我不知道的原因，这是解决方法。Firefox 中的错误。

# java - 如何从按钮关闭jdialog？

> ID：13289116
> 
> 赞同：3
> 
> 时间：2012-11-08T12:26:30.180
> 
> 标签：java, swing, modal-dialog, jdialog

我有一个 Jframe（美因茨），

它有一个按钮（showDialog），

当用户单击按钮时，

jdialog (Dialogz) 将显示，

那个jdialog有一个按钮

*   如何从该按钮（在jdialog内）关闭jdialog？
*   创建实例后，我可以更改对话框的模式吗？

我需要阻止该 jdialog 的所有者

这是我尝试...

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;

    public class Mainz extends JFrame implements ActionListener{
        JButton showDialog = new JButton("show dialog");

        public Mainz() {
            setLayout(new FlowLayout());
            showDialog.addActionListener(this);
            add(showDialog);
            setVisible(true);   
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            new Dialogz(this, true);
        }

        public static void main(String[]args){
            new Mainz();
    }
    }
    class Dialogz extends JDialog{
        JButton close = new JButton("close");

        public Dialogz(JFrame owner,boolean modal) {
            super(owner, modal);
            System.out.println(this.getModalityType());
            add(close);
            setLocationRelativeTo(owner);
            setVisible(true);

            close.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent ae){
                    closez();
                }
            });
        } 

        void closez(){
            setModal(false);
            this.dispose();
            System.out.println("Method Done");

        }
    } 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:36:14.550

> 创建实例后，我可以更改对话框的模式吗？

是的，您可以更改`setModal`或`ModalityTypes`在运行时进行更改，但是对于这种形式的代码并没有任何意义

> 如何从该按钮（在jdialog内）关闭jdialog？

在这种情况下，您是否打电话`setVisible`或`dispose()`

* * *

*   只创造`JDialog`一次，

*   将其创建为局部变量

*   change `myDialog.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);`，然后`button`在`toolbar`(with ) 中也`X`隐藏`JDialog`

*   那么你可以`actionPerformed`只调用 from `myDialog.setVisible(true)`，`ModalityType` 如果需要，也可以调用 setVisible `invokeLater()`，而不是创建一个新实例 ( `new Dialogz(this, true);`)

*   `JButton`放置在`JDialog`只会被调用`myDialog.setVisible(false)`

*   [与您的逻辑相对应的示例](https://stackoverflow.com/a/8979275/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:17:40.187

某人告诉我..

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;

    public class Mainz extends JFrame implements ActionListener{
        JButton showDialog = new JButton("show dialog");

        public Mainz() {
            setLayout(new FlowLayout());
            showDialog.addActionListener(this);
            add(showDialog);
            setVisible(true);   
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            new Dialogz(this, false);
            setEnabled(false);
        }

        public static void main(String[]args){
            new Mainz();
    }
    }
    class Dialogz extends JDialog{
        JButton close = new JButton("close");

        public Dialogz(JFrame owner,boolean modal) {
            super(owner, modal);

            add(close);
            setLocationRelativeTo(owner);
            setVisible(true);

            close.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent ae){
                    closez();
                }
            });
        } 

        void closez(){
            System.out.println("before ="+getModalityType());
            setModal(true);
            System.out.println("after ="+getModalityType());
            getOwner().setEnabled(true);
            Dialogz.this.dispose();
        }
    } 
```

# c# - asp.net - 指定的强制转换无效 Linq

> ID：13289121
> 
> 赞同：0
> 
> 时间：2012-11-08T12:26:50.360
> 
> 标签：c#, asp.net, linq

当我尝试以下代码时出现此错误

```
IEnumerable<DataRow> projjType = from projT in dtProjList.AsEnumerable()
                                 where projT.Field<int?>("ProjectId") == projId && 
                                 projT.Field<int?>("FilterId") == 1 
                                 select projT; 
```

并且错误的堆栈跟踪是

```
at System.Data.DataRowExtensions.UnboxT`1.NullableField[TElem](Object value)
   at System.Data.DataRowExtensions.Field[T](DataRow row, String columnName)
   at Folder.Projects.<>c__DisplayClass28.<repProjectList_ItemDataBound>b__1e(DataRow projT) in D:\Folder\Project.aspx.cs:line 1061
   at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
   at System.Linq.SystemCore_EnumerableDebugView`1.get_Items() 
```

其中dtProjList是DataTable，表结构如下，

```
ProjectId (int)
ProjectName (string)
ProjectThumb (string)
FilterTypeId (int)
FilterId (int)
FilterType (string) 
```

都不是空值。任何人都可以帮助我。

提前致谢。

**更新**::This is onlyrecord in my table,是因为单条记录的错误吗？？

```
ProjectId   ProjectName ProjectThumb    FilterTypeId    FilterId    FilterType
   1    Datamaster  small_14.jpg         1             1               Final 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:31:24.770

如果所有字段都不为空，则将字段强制转换为`int`而不是可为空的`int?`

```
var projjType = from projT in dtProjList.AsEnumerable()
                where projT.Field<int>("ProjectId") == projId && 
                      projT.Field<int>("FilterId") == 1 
                select projT; 
```

# ios - 带有滑动菜单的 iOS 多导航控制器

> ID：13289122
> 
> 赞同：1
> 
> 时间：2012-11-08T12:26:52.893
> 
> 标签：ios, xcode4, uistoryboardsegue, uiswipegesturerecognizer

我实现了一个类似 Facebook 的滑动菜单，但导航有问题。

我有 3 个视图控制器

*   MainViewController，其中包含另外两个
*   HomeViewController，这是我的应用程序的“主页”
*   SwipeMenuViewController，其中包含用于进一步导航的按钮

现在我想执行从 HomeViewController 到第二页的 segue。我在 HomeViewController 上放置了一个按钮，然后 cmd + 将其拖到第二页，Action segue: Push。

当我运行应用程序时，我收到下一条错误消息：

```
Terminating app due to uncaught exception 'NSGenericException', reason:
'Push segues can only be used when the source controller is managed by
an instance of UINavigationController.' 
```

所以基本上我想创建与 facebook 使用的完全相同的导航，主页上的菜单按钮和左上角的后退按钮。

任何想法将不胜感激！

![故事板](../Images/43692d4936793ff285940f8e1b8c930b.png)

![Facebook喜欢滑动菜单](../Images/b742a01635678dec8c2eddf6d09c37fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:25:49.113

您可能需要考虑容器视图控制器。与其让菜单离开当前视图控制器并转到另一个视图控制器，不如让菜单在原始视图控制器的预定义视图中作为子视图控制器出现。

这有一些好处，例如：

1.  菜单出现/消失的自定义动画
2.  部分屏幕菜单使一些原始屏幕可见（让用户感觉它是一个菜单并且他们仍然在同一个地方）

当用户触发菜单（滑动/点击/等）时，您会将菜单“子”视图控制器添加到（屏幕外）视图，然后将视图动画到可见位置（这可能就像更改 frame.origin 一样简单。 X）。当被解雇时，只需扭转这个过程。

# c++ - Xcode：使用 3rd 方框架链接和编译

> ID：13289123
> 
> 赞同：3
> 
> 时间：2012-11-08T12:26:53.157
> 
> 标签：c++, ios, xcode, linker, amazon-web-services

## 简而言之

为了使用 Amazon AWS SDK 编译和链接我的 C++ iOS 代码，我必须修改 AWS 框架目录的结构。我试图理解我做错了什么。

## 详细地

我有一个适用于 iOS 的 Xcode C++ 项目，需要与亚马逊的 AWS 开发工具包集成。我下载了最新版本的 SDK。SDK 作为框架分发。根据 Amazon 的文章[Getting Started with the AWS SDK for iOS](http://docs.amazonwebservices.com/mobile/sdkforios/gsg/Welcome.html "适用于 iOS 的 AWS 开发工具包入门")，我所要做的就是：

> 按住 Control 键单击 Frameworks Group，然后单击将文件添加到 <项目名称>

根据其他 Internet 资源和我的个人知识，我知道将框架添加到项目的“使用库构建二进制文件”构建阶段也应该有效。

这两种方法都不起作用。编译器找不到头文件，链接器也找不到二进制文件。而且，当框架出现在项目导航器中时，展开节点什么都没有显示，而其他框架通常包含它们的资源和包含文件。

环顾四周，我注意到框架的目录结构是：

```
AWSiOSSDK.framework/
   Versions/
      A/
         Headers/
         Resources/ 
         AWSiOSSDK 
```

据我了解，这并不完全符合[Apple 的要求](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html "苹果要求")。因此，在绝望的尝试中，我删除了该`Versions/A`部分；即，将框架的所有内容直接放在`AWSiOSSDK.framework`目录下。

令人惊讶的是，它解决了所有问题 - 找到了标头，链接了二进制文件，一切正常。现在我想知道为什么。我假设由亚马逊这样受人尊敬的公司分发的框架应该具有正确的形式。那为什么没用呢？为什么我修改后的结构有效？有不同结构的框架吗？如何告诉编译器和链接器接受原始形式？还是亚马逊分发损坏的捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:48:34.120

您是否将解压后的适用于 iOS 的 AWS 开发工具包存储在 Windows 机器或基于 Windows 的文件服务器上？如果您在 Mac 上解压缩 SDK，您应该会获得额外的符号链接，但您似乎没有任何符号链接。使用非基于 Mac 的文件系统可能会删除这些符号链接。

您应该从 AWS 下载最新版本的 SDK，在 Mac 上解压并查看是否有额外的符号链接。如果您有任何问题，请告诉我。

# java - 如何读取 XML 中的特定标签

> ID：13289124
> 
> 赞同：0
> 
> 时间：2012-11-08T12:27:02.597
> 
> 标签：java, xml, google-app-engine, struts2

任何人都可以帮助我阅读作为 Web 服务调用响应而得到的 XML。

我收到这样的回复::

```
 <?xml version="1.0" encoding="utf-8"?>
<int xmlns="http://tempuri.org/">-1</int> 
```

当我得到 -1 作为响应时，我想执行操作。我如何阅读它。我在 GAE 中使用 struts。我得到了这个

```
System.out.println("Fetch Content::"+new String(fetchresp.getContent())); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:34:20.793

我认为您最好的方法是 JAX-B，可以在这里阅读有关它的介绍：[http ://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:31:37.443

Stax (Streaming API for XML) 是一种用于读取和写入 XML 文档的 API。

您可以在本教程中阅读更多内容：

[http://www.vogella.com/articles/JavaXML/article.html](http://www.vogella.com/articles/JavaXML/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:04:08.303

有不同的 xml 解析器用于不同的目的：

*   如果这是您获得的唯一值，这意味着`unstructured data`您可以使用任何您想要的东西，例如 DOM 解析器 ( [DOM Parser Example](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/) )，或 SAX 解析器 ( [Example](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/) ) 或 Stax( [Exmple](http://www.vogella.com/articles/JavaXML/article.html) )

*   如果您越来越`structured data`喜欢一个对象，例如`Employee`，`Student`您应该使用`JAXB`（[示例](http://www.vogella.com/articles/JAXB/article.html)），可能会提供一个 xsd 来定义您正在传输的对象。

# c# - 在C#中将gridview导出到excel

> ID：13289135
> 
> 赞同：0
> 
> 时间：2012-11-08T12:27:47.510
> 
> 标签：c#, excel, gridview, export

我必须将gridview导出到excel。我在按钮单击事件函数中使用以下代码：

```
Response.Clear();

Response.Buffer = true;

Response.AddHeader("Content-Disposition","attachment;filename=sample.xls");

Response.Charset = "";

Response.ContentType = "app`enter code here`lication/vnd.xls";

StringWriter stringWriter = new StringWriter();

HtmlTextWriter htw = new HtmlTextWriter(stringWriter);

grdVw.RenderControl(htw);

Response.Write(stringWriter.ToString());

Response.End(); 
```

当我运行它时，一个对话框正在打开，显示下载一个空的 XML 文件。当我尝试调试它时，我发现网格有数据，但它的 stringWriter 没有被填充。我试图将内容类型更改为“application/ms-excel”等，但没有结果。代码中的错误是什么？ fot stringWriter 没有被填充的原因可能是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:36:54.053

我假设这`grdVw.RenderControl(htw);`会引发一个异常，即 GridView 未以服务器形式呈现。

尝试在调试器中执行它，我很确定您会看到该异常。

[您可以通过覆盖VerifyRenderingInServerForm](http://msdn.microsoft.com/en-us/library/system.web.ui.page.verifyrenderinginserverform.aspx)来避免此异常

```
public override void VerifyRenderingInServerForm(Control control)
{
    // Confirms that an HtmlForm control is rendered for the specified ASP.NET 
    // server control at run time.  
} 
```

见[这里](http://forums.asp.net/t/1016960.aspx/1?Problem%20with%20GridView%20s%20RenderControl)和[这里](http://aspalliance.com/771_CodeSnip_Exporting_GridView_to_Excel)。

# java - 我可以将当 前的 JAXB 模型转换为其他 JAXB 模型吗？

> ID：13289136
> 
> 赞同：1
> 
> 时间：2012-11-08T12:27:58.600
> 
> 标签：java, xml, xsd, jaxb, xjc

我有两个 XML 文件`file1.xml`和`file2.xml`. 我也有每个这些文件的模式，`file1.xsd`并且`file2.xsd`恭敬地。

我使用`xjc`基于`file1.xsd`（称为模型（1））创建java类，并基于`file2.xsd`（称为模型（2））创建类。

我使用 model(1) 将 file1.xml 与`JAXB`库解组。我想将此数据从模型（1）转换为模型（2），然后将转换后的数据编组为`file2.xml`

是否可以将数据从模型（1）转换为模型（2）？我可以合并`ObjectFactories`吗？我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:10:42.953

鉴于您的用例，没有办法自动将从一个 XML 模式生成的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)模型转换为从另一个 XML 模式生成的另一个 JAXB 模型。有几个选项：

**选项 #1 - 对象到对象的转换**

您可以以编程方式在对象模型之间移动数据。还有一些映射库可以使这个过程更容易（[http://dozer.sourceforge.net/](http://dozer.sourceforge.net/)）。

**选项 #2 - XSLT**

XSLT 是基于一组规则将一个 XML 文档转换为另一个 XML 文档的标准。通过使用，`JAXBSource`您`JAXBResult`甚至可以在 Java 模型上使用 XSLT。

```
TransformerFactory tf = TransformerFactory.newInstance();
StreamSource xslt = new StreamSource(new FileInputStream("my-xslt.xml"));
Transformer t = tf.newTransformer(xslt);

JAXBContext jc = JAXBContext.newInstance(MyClass.class);
JAXBSource source = new JAXBSource(jaxbContext1, foo);
JAXBResult result = new JAXBResult(jaxbContext2);
t.transform(source, result);
Bar bar = (Bar) result.getResult(); 
```

**选项 #3 - EclipseLink JAXB (MOXy) 的外部映射文件**

我是 MOXy 负责人，我们提供了一个外部映射文件，允许您将对象模型映射到多个 XML 表示。有关示例，请参见下面的链接：

*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:27:49.513

我不确定我是否理解这个问题 - 我认为您需要在 Model2 类上添加一个构造函数，该构造函数接受 Model1 类作为参数。

例如，假设这是您的 Model1 类：

```
class Model1{
    String firstname;
    String surname;

}

class Model2{
    String fullName
    public Model2(Model1 m){
        this.fullname=m.firstname+" "+m.surname;
    }
} 
```

即在该构造函数中，将属性的值从 m 复制到 Model2 实例

之后，您可以在 Model1 和 Model2 之间进行转换：

```
Model1 m1=unmarshall("file1.xml");
Model2 m2=new Model2(m1);
m2.marshall("file2.xml"); 
```

如果您只是为了在 xml 格式之间进行转换而进行所有这些工作，我建议您改用[XSLT](http://www.w3schools.com/xsl/)。

# sql-server - ReportServerTempDB 的日志文件意外增长

> ID：13289138
> 
> 赞同：1
> 
> 时间：2012-11-08T12:28:11.353
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2

ReportServerTempDB 数据库（随 Reporting Services 一起安装的数据库）的事务日志文件已增长到超过 100GB。我不确定为什么。

以下是文件大小：

*   D:\SQLDatabases\ReportServer.mdf - 0.7GB
*   G:\SQLDatabases\ReportServer.ldf - 1.8GB
*   E:\SQLDatabases\ReportServerTempDB.mdf - 5GB
*   G:\SQLDatabases\ReportServerTempDB.ldf - **107.6GB**

所有这些数据库的恢复模式都是**简单**的。我们使用的是 SQL Server 2008 R2 标准版。

编辑：报告服务数据库独有的东西：这些数据库的排序规则是 Latin1_General_CI_AS_KS_WS。但对于所有其他数据库，它是 Latin1_General_CI_AS。

我不想只是缩小日志文件并继续，因为它们可能会再次增长。我不明白为什么它们应该这么大。

1.  有谁知道是什么可能导致 ReportServerTempDB 数据库的日志文件（和数据文件）增长如此之多
2.  我应该怎么做？
3.  这是否表明我们的报表服务器有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:30:13.277

你确定你的临时数据库也打开`recovery model - simple`了吗？

至少您可以缩小数据库，以便使用 恢复磁盘空间`SHRINK DBCC`，请查看此链接了解更多详细信息：http: [//msdn.microsoft.com/en-us//library/ms190488.aspx](http://msdn.microsoft.com/en-us//library/ms190488.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T14:13:59.887

我们已重命名 SSRS，但清理/归档过程仍在尝试清理旧的数据库名称。当我们改变它时，问题就停止了。

# iphone - 如何使用 NSRegularExpression 从字符串中提取电子邮件地址

> ID：13289139
> 
> 赞同：1
> 
> 时间：2012-11-08T12:28:12.160
> 
> 标签：iphone, ios, regex

我正在制作一个 iphone 应用程序。我有一个场景，我有一个巨大的字符串，它有很多数据，我想从字符串中只提取电子邮件地址。

例如，如果字符串像

> asdjasjkdh asdhajksdh jkashd sample@email.com asdha jksdh asjdhjak sdkajs test@gmail.com

我应该提取“sample@email.com”和“test@gmail.com”

而且我还想从字符串中仅提取日期

例如，如果字符串像

> asdjasjkdh 01/01/2012 asdhajksdh jkas 12/11/2012 hd sample@email.com asdha jksdh asjdhjak sdkajs test@gmail.com

我应该提取“01/01/2012”和“12/11/2012”

一个小代码片段，将非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T03:42:10.057

这将做你想要的：

```
// regex string for emails (feel free to use a different one if you prefer)
NSString *regexString = @"([A-Za-z0-9_\\-\\.\\+])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]+)";

// experimental search string containing emails
NSString *searchString = @"asdjasjkdh 01/01/2012 asdhajksdh jkas 12/11/2012 hd sample@email.com asdha jksdh asjdhjak sdkajs test@gmail.com";

// track regex error
NSError *error = NULL;

// create regular expression
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexString options:0 error:&error];

// make sure there is no error
if (!error) {

    // get all matches for regex
    NSArray *matches = [regex matchesInString:searchString options:0 range:NSMakeRange(0, searchString.length)];

    // loop through regex matches
    for (NSTextCheckingResult *match in matches) {

        // get the current text
        NSString *matchText = [searchString substringWithRange:match.range];

        NSLog(@"Extracted: %@", matchText);

    }

} 
```

使用上面的示例字符串：

> asdjasjkdh 01/01/2012 asdhajksdh jkas 12/11/2012 hd sample@email.com asdha jksdh asjdhjak sdkajs test@gmail.com

输出是：

```
Extracted: sample@email.com
Extracted: test@gmail.com 
```

要使用代码，只需设置`searchString`为您要搜索的字符串。代替 NSLog() 方法，您可能想要对提取的字符串做一些事情`matchText`。随意使用不同的正则表达式字符串来提取电子邮件，只需替换`regexString`代码中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:17:18.670

```
NSArray *chunks = [mylongstring componentsSeparatedByString: @" "];

for(int i=0;i<[chunks count];i++){
    NSRange aRange = [chunks[i] rangeOfString:@"@"];
    if (aRange.location !=NSNotFound) NSLog(@"email %@",chunks[i] );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:47:07.863

您可以使用此正则表达式来匹配电子邮件

```
 [^\s]*@[^\s]* 
```

这个正则表达式匹配日期

```
 \d+/\d+/\d+ 
```

# java - 如何使用适用于 OS X 2012-006 的 Java 在 OS X 中取回 Java 首选项？

> ID：13289147
> 
> 赞同：5
> 
> 时间：2012-11-08T12:28:31.503
> 
> 标签：java, applet, osx-mountain-lion, java-web-start, java-6

在安装[Java for OS X 2012-006](http://support.apple.com/kb/DL1572)更新后，用于配置小程序的 Java Preferences 应用程序，对我来说更重要的是，Java Web Start 应用程序已经消失。关于此更新的[技术说明](http://support.apple.com/kb/HT5493)说：

> 此更新还删除了配置小程序设置不再需要的 Java 首选项应用程序。

如果不再需要它，是什么取代了它，或者我如何恢复相同的功能？我曾经能够做的一件事是配置 Java 控制台何时/如何出现。现在它永远不会出现，而且我显然无能为力！

我已经按照[本技术说明](http://support.apple.com/kb/HT5559)中的步骤重新启用 Java 插件和 Web Start 功能，即使我从未安装过 Java 7 JRE。

我正在运行 OS X Mountain Lion 10.8.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:30:09.693

在我安装`jdk-7u10-macosx-x64.dmg`后`Mac OS X Moutain Lion`。它是 JDK 7 update 10 开发者预览版。

我有这个：

![系统偏好](../Images/f12197055f3f094e842e028bc6bb1c6a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:54:03.900

只需阅读[这篇 CNET 文章](http://reviews.cnet.com/8301-13727_7-57533880-263/java-preferences-missing-after-latest-os-x-java-update/)，该文章似乎表明 Apple 现在希望您从 Oracle 安装 Java 7 JRE 以获得小程序和 JWS 支持。Oracle Java 7 JRE 有自己的首选项应用程序。

另一种选择是从 Time Machine 备份中恢复 Apple Java Preferences 应用程序（如果可用）。

因此，总而言之，答案是以下之一：

*   从 Oracle 安装 Java 7 JRE。
*   从备份中获取旧的 Apple 偏好设置应用程序的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:39:01.977

Java 配置面板现在带有 System Preferences。

# objective-c - iOS didSelectRow 没有在选择一行时调用？

> ID：13289149
> 
> 赞同：1
> 
> 时间：2012-11-08T12:28:38.973
> 
> 标签：objective-c, ios, uipickerview

我知道它非常基本的问题，但我正面临着一个奇怪的行为`UIPickerView`。这是我的扫描仪 - 我`UIPickerView`在我的应用程序中使用。我的问题是，当我单击行`didSelectRow`方法时不会调用，但是当我滚动选择器行时，它会起作用。 **更具体地说**，假设当前选择了选择器上的第一行，如果我单击第 4 行，则`didSelectRow`不会触发该方法。我错过了什么？

更新：如果我从方法中评论此代码，`viewDidLoad`那么一切正常-

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    [self.view addGestureRecognizer:tap]; 
```

和

```
-(void)dismissKeyboard {
    [numberTextField resignFirstResponder];
    [nameTextField resignFirstResponder];
    [cityTextField resignFirstResponder];
    [addressTextField resignFirstResponder];
    [zipTextField resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:49:36.707

我假设您正在尝试使用轻按手势识别器来关闭键盘，如果他们单击视图中的任何位置。这导致的问题是现在您的 UIPicker 没有将触摸事件传递给它。对于可能的解决方案，我有两个想法。

1）在方法内部：

> *   (CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(UIView *)view

测试位置和/或视图以确定选择器是否被触摸，然后转发事件。

2）不要将点击识别器添加到整个视图，而是将不可见的子视图添加到可能的点击区域以关闭不会与选择器重叠的键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:49:37.440

您是否尝试将手势识别器添加到 self.view 的其他部分而不是pickerview？

# ruby-on-rails - 在 js.erb 中，如何使用在 rails 控制器中定义的数组？

> ID：13289150
> 
> 赞同：1
> 
> 时间：2012-11-08T12:28:40.090
> 
> 标签：ruby-on-rails, arrays, controller, each

我的代码如下：

**控制器：**

```
@snf1_ie_cases = Snf1Testcase.find(:all,:conditions=>["result_style = ?", 0])

respond_to do|format|
  format.js 
end 
```

**XX.js.erb：**

```
<% for snf1_ie_case in @snf1_ie_cases %>
<% end %> 
```

那么错误是：

> 未定义的方法“每个”

如何将控制器的数组发送到 XX.js.erb？

# android - onDestroy，杀死一个正在运行的线程

> ID：13289152
> 
> 赞同：2
> 
> 时间：2012-11-08T12:28:51.577
> 
> 标签：android

我的课堂上有一个这样的方法，它可以扩展`Activity`

```
@Override
public void onDestroy() {
    Log.i("onDestory: ", "Inside OnDestory!");
    bluetoothCommunicator.destroyedApp();
    super.onDestroy(); 
} 
```

该方法`destroyedApp()`如下所示：

```
public void destroyedApp() {
        if(server != null)
            server.destroy();   
} 
```

`server`扩展的类的实例在哪里`Thread`

这是场景：

我第一次打开应用程序，在我的`onCreate`方法中，我创建了一个蓝牙类的新实例，它设置了`BluetoothServerSocket`，这工作正常，我可以将文件传输到我的手机。

当我在后台有我的应用程序时，这也有效，因为线程仍然存在。

**但**

当我杀死应用程序时，根据`Activity Life Cycle`

![活动生命周期在这里](../Images/a15bcff4efc6c37ef9b00e469ab9b353.png)

该`onDestroy()`方法应由 Android 框架调用。当我再次启动应用程序时，`onCreate`应该调用该方法，但似乎`BluetoothServerSocket`没有创建 的实例。我没有`LogCat`信息，因为发送蓝牙文件的设备只说：

```
Error Log:
Write Error: 
Transport endpoint is not connected
__obex_connect:
error=-2
Unable to connect to the server
Error 
```

这告诉我`BluetoothServerSocket`不是“活着”

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:50:49.817

通常不保证会调用 onDestroy() 方法。根据文档：

> 注意：不要指望这个方法被称为保存数据的地方！例如，如果一个活动正在内容提供者中编辑数据，那么这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，而不是在这里。此方法通常用于释放资源，例如与活动相关联的线程，以便被破坏的活动不会在其应用程序的其余部分仍在运行时留下这些东西。在某些情况下，系统会简单地终止 Activity 的宿主进程，而不会在其中调用此方法（或任何其他方法），因此不应使用它来执行打算在进程消失后保留的事情。
> 
> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

所以我会首先测试它是否被可靠地调用。

此外，您正在调用`super.onStop()`您的`onDestroy()`. 它应该是`super.onDestroy()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:03:52.740

由于我无法发表评论，因此我在这里发布。正如 Egor 评论的那样，我认为您不能从 onDestroy() 中调用 onStop()，Android 本身会根据内存在 onPause() 之后调用 onStop()。现在，请注意线程的 stop()、suspend() 和 destroy() 方法已被弃用，终止线程的唯一安全方法是让线程退出其 run()。现在，当您调用 server.destroy() 时，它可能仍会在内存中保留一些链接，因此垃圾收集器将无法对您的活动进行垃圾收集。因此，我相信这可能是您的 onDestroy 未被调用的可能原因。点我，如果我穿着。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:54:36.610

你是如何杀死你的应用程序的？我在课堂上为您的问题寻找解决方案，`Application`我发现了有关该`onTerminate()`方法的以下信息：

> 此方法用于模拟过程环境。它永远不会在生产 Android 设备上调用，在这些设备上，只需杀死进程即可删除它们；**这样做时不会执行****任何用户代码**（包括此回调）。

 **我记得我在我的一个应用程序中遇到了类似的问题，其中一些组件的`onDestroy()`方法没有被调用，因为我使用了任务管理器中的“清除内存”按钮（三星 Galaxy 2）**

# iphone - 从 App Delegate 中的 Storyboard 获取初始视图控制器

> ID：13289158
> 
> 赞同：6
> 
> 时间：2012-11-08T12:29:16.357
> 
> 标签：iphone, objective-c, ios, cocoa, uistoryboard

我正在尝试访问我的故事板的初始视图控制器。它是一个导航控制器，通过序列连接到第二个视图控制器。所以在我的应用程序完成启动后，我想直接显示通过 segue 连接的 viewController。我用这样的代码试了一下，但它不起作用......

```
UINavigationController *navController = (UINavigationController*)self.window.rootViewController;
[navController.topViewController performSegueWithIdentifier:@"showLoginScreen" sender:self]; 
```

我究竟做错了什么？

***4年后***：

如果我 4 年后再次查看我的问题，老实说，我不知道我真正的问题是什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-08T12:49:23.213

确保您已勾选标记

> *是初始的 ViewController*

`UINavigationController`故事板中的选项

```
UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UINavigationController * myStoryBoardInitialViewController = [storyboard instantiateInitialViewController]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T12:43:55.887

Sebastian，我不确定你为什么要手动启动初始视图控制器——如果你在“新建项目”向导的第二个屏幕上勾选“使用故事板”，我所有的项目（都使用故事板）会自动执行此操作。

也许您需要将故事板场景标记为初始？这可以通过勾选“是初始视图控制器”在场景的属性检查器中完成 - 显然命名。

然后 - 如果您确实有一个不寻常的设置需要您手动访问场景，您可以使用以下内容：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName: "StoryboardName"
                                             bundle: [NSBundle mainBundle]];
UIViewController *vc = [sb instantiateInitialViewController]; 
```

（注意 - 这里没有代码完成，所以再次检查拼写。）

或者，也许我把你的问题完全弄错了..？快乐黑客！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:51:39.070

在我的应用程序中，我有 tabBar

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

TabBarController *tabBar = [storyBoard instantiateViewControllerWithIdentifier:@"TabBarController"];

_window.rootViewController = tabBar; 
```

# linq-to-sql - 使用 Linq To Sql 的 Upshot 助手扩展

> ID：13289162
> 
> 赞同：2
> 
> 时间：2012-11-08T12:29:26.820
> 
> 标签：linq-to-sql, upshot, asp.net-spa

这是我关于 SO 的第一个问题，所以请容忍任何错误/违规行为。

[我想为我的新项目实施 SPA，因此在搜索了一些谷歌博客](http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/)后，我找到了 Steve Sandersion 。

看了github上托管的代码，发现必须使用EF才能使用**Upshot**，但是我的DAL已经用Linq to Sql写好了，迁移到EF会很累。

所以我的问题如下

> 1.  有没有人成功使用过 L2S 的结果？如果是的话，一些例子会有所帮助。
> 2.  有没有其他方法可以在没有结果的情况下实现 SPA，以便我可以在 L2S 中重用我的 DAL？

**已编辑**

我今天才发现这个问题毫无用处，因为使用 upshot 是不可行的。微软已经停止了 Upshot 的工作。**有人请关闭这个问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:58:14.897

据我所知，这应该是可能的。使用 upshot 时，您不需要使用实体框架，您可以自己进行接线。

在我的[ria 4 html 演示](http://ria4htmldemo.codeplex.com/)中，我使用 ria 服务将数据从服务器获取到结果客户端。这样，它不依赖于您拥有的 DAL。Ria 服务按约定工作，这意味着插入、更新和删除方法存在于每个域上下文中，您可以根据需要实现它们。有关更多信息，您可以阅读有关设置所有内容的[博文。](http://www.kristofdegrave.be/2012/04/upshotjs-knockoutjs-html5-client-for.html)这适用于[CRUD](http://www.kristofdegrave.be/2012/04/crud-operations-with-wcf-ria-services.html)操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T06:14:31.267

我不认为这是可能的。Microsoft 已确保使用 Linq-to-sql 的人无法生存。最好将 jquery 和 web api 之类的东西与一些 js mvvm 库一起使用。

# jquery - jQuery .each() 未对 html 进行一些更改

> ID：13289164
> 
> 赞同：0
> 
> 时间：2012-11-08T12:29:37.433
> 
> 标签：jquery, html

在窗口加载时，我正在尝试检查我的图像是否已保存，如果已保存，请更改 HTML 以禁用保存它的链接。这种代码类型可以在没有`.each()`with 的情况下工作，但只会找到第一个标签并根据它更改所有其他类似的标签。当然，我想分别做每个标签。通过查看 firebug 中的 post 事务，每个 ajax 调用都正确处理并发送了正确的`href`值，但 html 更新似乎没有采取。if 语句没有失败，因为警报消息在它应该出现的时候出现。知道为什么`$(this)`可以检索项目值但在设置 html 更改时不起作用？

```
window.onload =  function() {
    $(".img a").each(function() {
        var item=$(this).attr( 'href' );
        var action="check";
        jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result=="saved") {
                $(this).html("<div style='line-height:4em '>Saved</div>");
                $(this).attr("href","saved");
                alert(result);
            }

        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:34:15.863

问题是`this`回调内部没有引用你认为的元素。

您需要在 ajax 之前创建对该元素的引用并使用它。

```
window.onload =  function() {
    $(".img a").each(function() {
        var self   = $(this),
            item   = this.href,
            action = "check";
        jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result=="saved") {
                self.html("<div style='line-height:4em '>Saved</div>");
                self.attr("href","saved");
                alert(result);
            }

        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
} 
```

* * *

此外，运行这么多 ajax 调用来检查类似的事情似乎有点过头了。
重构代码以进行单个 ajax 调用可能是一个更好的主意，但将文件列表传递给它以检查然后处理将引用所有这些图像的响应（*一个接一个*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:34:23.073

javascript 闭包中有一些规则。有时在不同的闭包`this`中是不同的参考。

尝试

```
var that = $(this); 
```

并`that`在您需要的任何地方使用项目参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:34:23.633

成功方法的调用者不是`<a>`元素。

```
window.onload =  function() {
$(".img a").each(function() {
    var $this = $(this);
    var item=$(this).attr( 'href' );
    var action="check";
    jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
        var result=data.result;
        if (result=="saved") {
            $this.html("<div style='line-height:4em '>Saved</div>");
            $this.attr("href","saved");
            alert(result);
        }

    }, "json")
    .error(function() {         
        alert("error: unable to contact web service"); 
    });
});
} 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T12:35:57.377

尝试改变：

```
var item=$(this).attr( 'href' ); 
```

至：

```
var $item = $(this);
var item=$item.attr( 'href' ); 
```

然后改变：

```
$(this).html("<div style='line-height:4em '>Saved</div>");
$(this).attr("href","saved"); 
```

至：

```
$item.html("<div style='line-height:4em '>Saved</div>");
$item.attr("href","saved"); 
```

# fitnesse - 在 FitNesse 变量声明中转义大括号

> ID：13289165
> 
> 赞同：2
> 
> 时间：2012-11-08T12:29:43.500
> 
> 标签：fitnesse

我想在 FitNesse 变量中存储以下字符串：

> !*< 评论
> {{{

和

> }}}
> *！

不幸的是，它们包含花括号“{}”这一事实对于 FitNesse 中的变量声明是有问题的，因为我必须像这样声明它们：

> !define IGNORE_START {!*< 评论
> {{{}
> 
> !define IGNORE_END {}}}
> *!}

结果显然不是我所希望的。通常，我希望能够转义要包含在变量内容中的花括号。但是，搜索 Google 和 StackOverflow，我还没有找到正确的方法来执行此操作。一些涉及反斜杠的反复试验也没有让我找到解决方案。

如果这是可能的，有人可以告诉我怎么做吗？如果不可能，我也想知道，这样我就可以接受并继续前进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:33:29.950

将转义序列放在中间，`!- -!` 例如

```
!define IGNORE_START {
!-!*< comment-!
!-{{{-! 
}

!define IGNORE_END {
!-}}}-!
!-*!-!
}

${IGNORE_START}
${IGNORE_END} 
```

# php - 无法将内容插入数据库，需要帮助转义 PHP 代码

> ID：13289166
> 
> 赞同：-2
> 
> 时间：2012-11-08T12:29:43.643
> 
> 标签：php, html, sql, database, escaping

> **可能重复：**
> [php中单引号和双引号字符串的区别](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

嘿，我无法将页面内容插入我的数据库。

我正在尝试存储：

```
<p class=\"heading_large\"><?php echo $Topic2C2A[data]; ?></p> 
```

使用此代码：

```
$sql="UPDATE event SET 
  data='<p class=\"heading_large\"><?php echo $Topic2C2A[data]; ?></p>' 
  WHERE id='2'"; 
```

但是当我查看表格时，我看到的是：

```
<p class="heading_large"><?php echo ; ?></p> 
```

我显然已经用斜杠转义了 HTML，我需要对 PHP 做类似的事情`$Topic2C2A[data]`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:34:43.257

您的问题与 PHP 正在处理 " （双）引号内的变量这一事实有关。

您可以将引号更改为 '（单个）或另一个选项是更改`$Topic2C2A[data]`为`\$Topic2C2A[data]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:36:32.193

我建议你把你的 $sql 写成：

```
$sql="UPDATE event SET data='<p class=\"heading_large\">".$Topic2C2A[data]."</p>' WHERE id='2'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:49:48.510

你试过mysqli_real_escape_string（）吗？它应该返回一个完全转义的字符串！

# c# - 如何有条件地阻止对 Orchard CMS 中 ContentPart 字段的验证？

> ID：13289169
> 
> 赞同：2
> 
> 时间：2012-11-08T12:29:57.357
> 
> 标签：c#, asp.net-mvc, orchardcms

在`ContentPart`一些由`[Required]`属性定义的字段中。但在某些情况下，我不想验证它们。

例如，在`ContentPart`我有一个名为 的布尔字段`DoNotValidate`，当它的值被分配时，`True`我想阻止对字段的需求验证并且不出现任何需求错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:05:54.483

如果您有必填字段，您可以使用其他工具检查字段，例如：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            if (Name == "Adam")
            {
                yield return
                    new ValidationResult("Nie podales imienia", new[] { "Name" });
            }
        } 
```

特性：

```
public string Name {get; set;} 
```

在 HTML（MVC3）中：

```
@Html.ValidationMessageFor(m => m.Name)
@Html.TextBoxFor(m => m.Name) 
```

如果你使用方法 GET 你可以使用这个：

```
[HttpGet]
[CustomAuthorize]
[GroupRequired]
[RoleRequired(RoleEnum.Edit)] 
```

如果这不是您想要的，请更清楚地说明您的问题

# c# - MarshalAs(UnmanagedType.LPStr) - 这如何将 utf-8 字符串转换为 char*

> ID：13289171
> 
> 赞同：14
> 
> 时间：2012-11-08T12:30:03.110
> 
> 标签：c#, c++, marshalling

问题标题基本上是我想问的：

`[MarshalAs(UnmanagedType.LPStr)]`- 这如何将 utf-8 字符串转换为 char* ？

当我尝试在 c# 和 c++ dll 之间进行通信时，我使用上述行；更具体地说，在：

```
somefunction(char *string) [c++ dll]

somefunction([MarshalAs(UnmanagedType.LPStr) string text) [c#] 
```

当我通过 c# 将我的 utf-8 文本 (scintilla.Text) 发送到我的 c++ dll 中时，我在 VS 10 调试器中显示：

1.  c# 字符串已成功转换为`char*`

2.  结果`char*`正确反映了监视窗口中相应的 utf-8 字符（包括韩语位）。

这是一个屏幕截图（包含更多详细信息）：

[![ss](../Images/5c024337aa689a9371a3f81b546a2aba.png)](https://i.stack.imgur.com/uVpEv.png)

如您所见，`initialScriptText[0]`返回单个`byte(char)`: 'B' 并且其内容 `char* initialScriptText`在 VS 监视窗口中正确显示（包括韩语）。

通过`char`指针，似乎英语被保存为一个`byte`per `char`，而韩语似乎被保存为两个字节 per `char`。（截图中的韩语单词是3个字母，因此保存为6个字节）

这似乎表明每个“字母”并未保存在相同大小的容器中，而是因语言而异。（可能提示类型？）

我试图在纯 c++ 中实现相同的结果：读取 utf-8 文件并将结果保存为`char*`.

这是我尝试读取 utf-8 文件并转换为`char*`c++ 的示例：

[![在此处输入图像描述](../Images/5a44a1740a98af1f801dc6465a4615dc.png)](https://i.stack.imgur.com/1KBpA.png)

意见：

1.  `wchar_t*`从 转换为时视觉损失`char*`
2.  由于结果，s8 正确显示字符串，我知道我已`wchar_t*`成功将 utf-8 文件内容转换为`char*`
3.  因为“结果”保留了我直接从文件中获取的字节，但是我得到的结果与通过 c# 得到的结果不同（我使用了同一个文件），我得出的结论是 c# 元帅已经放文件内容通过其他一些程序进一步将文本更改为`char*`.

（屏幕截图还显示了我在使用 wcstombs 时的严重失败）

注意：我使用的是来自 ( [http://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/) )的 utf8 标头

请纠正我的代码/观察中的任何错误。

我希望能够模仿我通过 c# marshal 得到的结果，并且在经历了所有这些之后我意识到我完全被卡住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T13:45:47.213

> [MarshalAs(UnmanagedType.LPStr)] - 这如何将 utf-8 字符串转换为 char* ？

它没有。托管代码中没有“utf-8 字符串”之类的东西，字符串始终以 utf-16 编码。与 LPStr 之间的编组是使用默认系统代码页完成的。除非您使用代码页 949，否则您在调试器中看到韩文字形非常显着。

如果与 utf-8 互操作是硬性要求，那么您需要在 pinvoke 声明中使用 byte[]。并使用 System.Text.Encoding.UTF8 自己来回转换。使用其 GetString() 方法将 byte[] 转换为字符串，使用其 GetBytes() 方法将字符串转换为 byte[]。如果可能，通过在本机代码中使用 wchar_t[] 来避免所有这些。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-21T03:34:23.373

虽然其他答案是正确的，但 .NET 4.7 已经有了重大发展。现在有一个选项可以完全满足 UTF-8 的需要：`UnmanagedType.LPUTF8Str`. 我试过了，它就像瑞士天文钟一样工作，完全按照它的声音做。

事实上，我什`MarshalAs(UnmanagedType.LPUTF8Str)`至在一个参数和`MarshalAs(UnmanagedType.LPStr)`另一个参数中都使用了。也有效。这是我的方法（接受字符串参数并通过参数返回字符串）：

`[DllImport("mylib.dll", ExactSpelling = true, CallingConvention = CallingConvention.StdCall)] public static extern void ProcessContent([MarshalAs(UnmanagedType.LPUTF8Str)]string content, [MarshalAs(UnmanagedType.LPUTF8Str), Out]StringBuilder outputBuffer,[MarshalAs(UnmanagedType.LPStr)]string settings);`

谢谢，微软！另一个麻烦消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-29T04:10:27.923

如果您需要编组 UTF-8 `string`，请手动执行。

`IntPtr`用而不是字符串定义函数：

```
somefunction(IntPtr text) 
```

然后将文本转换为以零结尾的 UTF8 字节数组并将它们写入`IntPtr`：

```
byte[] retArray = Encoding.UTF8.GetBytes(text);
byte[] retArrayZ = new byte[retArray.Length + 1];
Array.Copy(retArray, retArrayZ, retArray.Length);
IntPtr retPtr = AllocHGlobal(retArrayZ.Length);
Marshal.Copy(retArrayZ, 0, retPtr, retArrayZ.Length);
somefunction(retPtr); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-18T15:45:24.740

如果使用早于 4.7 的 .NET Framework，则可以使用[ICustomMarshaler 。](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.icustommarshaler)

```
 class UTF8StringCodec : ICustomMarshaler
        {
            public static ICustomMarshaler GetInstance(string cookie) => new UTF8StringCodec();

            public void CleanUpManagedData(object ManagedObj)
            {
                // nop
            }

            public void CleanUpNativeData(IntPtr pNativeData)
            {
                Marshal.FreeCoTaskMem(pNativeData);
            }

            public int GetNativeDataSize()
            {
                throw new NotImplementedException();
            }

            public IntPtr MarshalManagedToNative(object ManagedObj)
            {
                var text = $"{ManagedObj}";
                var bytes = Encoding.UTF8.GetBytes(text);
                var ptr = Marshal.AllocCoTaskMem(bytes.Length + 1);
                Marshal.Copy(bytes, 0, ptr, bytes.Length);
                Marshal.WriteByte(ptr, bytes.Length, 0);
                return ptr;
            }

            public object MarshalNativeToManaged(IntPtr pNativeData)
            {
                if (pNativeData == IntPtr.Zero)
                {
                    return null;
                }

                var bytes = new MemoryStream();
                var ofs = 0;
                while (true)
                {
                    var byt = Marshal.ReadByte(pNativeData, ofs);
                    if (byt == 0)
                    {
                        break;
                    }
                    bytes.WriteByte(byt);
                    ofs++;
                }

                return Encoding.UTF8.GetString(bytes.ToArray());
            }
        } 
```

P/Invoke 声明：

```
 [DllImport("native.dll", CallingConvention = CallingConvention.Cdecl)]
        private extern static int NativeFunc(
            [MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef = typeof(UTF8StringCodec))] string path
        ); 
```

回调内部的用法：

```
 [StructLayout(LayoutKind.Sequential)]
        struct Options
        {
            [MarshalAs(UnmanagedType.FunctionPtr)]
            public CallbackFunc callback;
        }

        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
        public delegate int CallbackFunc(
            [MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef = typeof(UTF8StringCodec))] string path
        ); 
```

# c# - 连接版本的.net mysql 问题？

> ID：13289176
> 
> 赞同：1
> 
> 时间：2012-11-08T12:30:22.347
> 
> 标签：c#, mysql

我在我的系统中安装了 mysql-connect 6.64，我的 sql 版本是 5.50，然后我们成功访问了 mysql。但是无法连接 mysql 版本 5.24。为什么这是 mysql 版本的问题？

请告诉我为什么我在从.net 连接 mysql 时得到

```
unable to connect any hosts"Unable to connect to any of the specified MySQL hosts 
```

# ios - 多个 UIWebViews JavaScript 性能？

> ID：13289177
> 
> 赞同：1
> 
> 时间：2012-11-08T12:30:23.243
> 
> 标签：ios, uiwebview, webkit

我有两个 UIWebViews。

其中 1 个运行 JavaScript 代码。

同时我尝试滚动第二个，并且滚动中有一些故障（有时它甚至卡住了 1 秒！）。

这个问题有解决方案吗？为什么会这样？

谢谢！

# string - 从 HttpURLConnection 创建 InputStream 的副本，以便可以使用两次

> ID：13289178
> 
> 赞同：7
> 
> 时间：2012-11-08T12:30:27.090
> 
> 标签：string, inputstream, httpurlconnection

我用了这个问题

[如何在 Java 中将 InputStream 转换为字符串？](https://stackoverflow.com/questions/1763789/how-do-i-convert-an-inputstream-to-a-string-in-java)

使用以下代码将 InputStream 转换为字符串：

```
public static String convertStreamToString(java.io.InputStream is) {
    java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A");
    return s.hasNext() ? s.next() : "";
} 
```

我的输入流来自 HttpURLConnection InputStream，当我转换为字符串时，输入流发生了变化，我无法再使用它。这是我得到的错误：

```
Premature end of file.' SOAP 
```

当我将输入流转换为具有正确信息的字符串时，我能做些什么来保留输入流？

具体来说，这是更改的信息：

```
inCache = true (before false)
keepAliveConnections = 4 (before 5)
keepingAlive = false (before true)
poster = null (before it was PosterOutputStream object with values) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T09:01:47.683

如果您将输入流传递到扫描仪或以任何其他方式读取其数据。您实际上正在使用它的数据，并且该流中将不再有可用数据。

您可能需要创建一个具有相同数据的新输入流并使用它来代替原始输入流。例如：

```
ByteArrayOutputStream into = new ByteArrayOutputStream();
byte[] buf = new byte[4096];

// inputStream is your original stream. 
for (int n; 0 < (n = inputStream.read(buf));) {
    into.write(buf, 0, n);
}
into.close();

byte[] data = into.toByteArray();

//This is your data in string format.
String stringData = new String(data, "UTF-8"); // Or whatever encoding  

//This is the new stream that you can pass it to other code and use its data.    
ByteArrayInputStream newStream = new ByteArrayInputStream(data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:34:32.793

扫描仪一直读取到流的末尾并关闭它。所以它不会进一步可用。`PushbackInputStream`用作输入流的包装器并使用该方法`unread()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:06:20.317

尝试使用 Apache 实用程序。在我的预设项目中，我做了同样的事情

> > InputStream xml = connection.getInputStream();
> > 
> > 字符串响应数据 = IOUtils.toString(xml);

您可以从 Apache [import org.apache.commons.io.IOUtils] 获取 IOUtils

# database - Oracle 电子商务套件 - UI 标签到数据库字段映射？

> ID：13289180
> 
> 赞同：2
> 
> 时间：2012-11-08T12:30:34.713
> 
> 标签：database, oracle, rdbms, oracle-apps

我正在寻找某种 UI 标签：数据库字段映射，它告诉我哪个 UI 字段对应于后端的哪个数据库列。

我很确定 Oracle e 商务套件中一定存在类似的东西......但到目前为止我的搜索没有任何结果。

我将不胜感激这方面的任何帮助或指示。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:24:51.063

映射并不总是 100% 明确定义，并且可能更多是艺术而不是科学。

在基于表单的电子商务套件中，将光标放在相关字段中，然后导航到帮助 > 诊断 > 检查。我将此信息与 Oracle 支持 (http://etrm.oracle.com/pls/etrm/etrm_search.search) 的电子技术资源手册结合起来。

# ios - Jquery Mobile & iOS 键盘问题

> ID：13289181
> 
> 赞同：0
> 
> 时间：2012-11-08T12:30:34.843
> 
> 标签：ios, cordova, jquery-mobile

因此，我们正在使用 Phonegap 和 Jquery Mobile 构建一个应用程序，但我们在其中一个 JQM 页面上遇到了问题。当您使用 ios 键盘的“下一步”按钮在字段之间导航时，就会出现问题。当您来到最后一个输入文本字段并按下“完成”按钮时，一些页面元素出现在“标题”栏后面，而不是在按下“完成”按钮后所有页面元素都显示在视图中。

在 Android 版本上，页面的全部元素都在视图中，但页脚栏现在消失了，只有当我点击正文时才会出现页脚。

知道这里可能会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:02:53.233

经过一整天的摸索，我解决了这个问题。对产生问题的 jquery.mobile.css 全局配置文件进行了微小更改。对以下设置进行了细微更改...

.ui-mobile [data-role=page], .ui-mobile [data-role=dialog], .ui-page { top: 0; 左：0；宽度：100%；最小高度：100%；位置：绝对；显示：无；边框：0；}

实际所做的更改是在 min-height: 100% 旁边插入了“！重要”，这导致了问题。我只是删除了“！重要”并且它起作用了。

# php - 谷歌分析：根据特定 cookie 的存在报告用户

> ID：13289184
> 
> 赞同：0
> 
> 时间：2012-11-08T12:30:45.430
> 
> 标签：php, google-analytics

是否可以根据特定 cookie 的存在来报告用户？

特别是针对拥有特定 cookie 的访问者的电子商务销售报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:33:58.907

我没想到这是可能的，因为在记录时该信息也需要传递给 GA。

您需要使用该 cookie 来附加某些内容，例如将广告系列源附加到单击的下一个 URL 以便记录该 URL。

事件跟踪也可能是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:16:56.167

您可以使用用户定义的变量来过滤来自网络配置文件的访问

为此设置一个用户定义的值 _gaq.push(['_setVar', 'SOME_VALUE']);

这将在用户浏览器上设置一个带有 SOME_VALUE 的 cookie

接下来在分析配置文件中创建一个过滤器，以包含或排除具有此 cookie 值的访问者。

转到过滤器 > 新过滤器 > 选择自定义过滤器 > 检查排除或包含过滤器字段用户定义的过滤器模式 SOME_VALUE

区分大小写无点击保存。

现在，配置文件中的所有数据（包括电子商务数据）都将根据此 cookie 进行过滤。

如果您不想在配置文件级别进行过滤，您还可以使用访问者级别的自定义变量，然后创建高级细分以一次查看变量的某个值。

希望这可以帮助。

# php - PHP中的字符串是字符数组吗？

> ID：13289203
> 
> 赞同：1
> 
> 时间：2012-11-08T12:31:43.620
> 
> 标签：php, c, arrays, string

像在 C 中一样，我可以将字符串用作数组吗？

例如：

```
$a = "abcd";
for ($b = 0; $b <= 3; $b++) {
  echo $a[$b];
} 
```

PHP 中的字符串是数组还是基于 C 中的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:40:05.047

实际上是的，但是您必须使用另一种语法：

```
$a = "abcd";
for ($b = 0; $b <= 3; $b++) {
  echo $a{$b};
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:41:29.967

您可以通过检查字符串长度来遍历整个字符串，并使用**substr()**函数获取每个字母：

```
$a = "abcd";
for($b = 0; $b <= strlen($a); $b++){
    echo substr($a, $b, 1).'<br>';
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:36:27.487

```
<?php 
  $str = "Lorem ipsum";
  if (is_array($str)) {
    echo "$str is array";
  }
  else {
    echo "$str is not array";
  }
?> 
```

结果：

Lorem ipsum 不是数组

所以....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T12:37:11.247

您应该使用`str_split($string)`为了将字符串转换为数组

例如：

```
var_dump(str_split("abc")); 
```

将转化为

```
array(3) {
  [0]=> string(1) "a"
  [1]=> string(1) "b"
  [2]=> string(1) "c"
} 
```

# tcl - 你能在一个过程中得到“过程名称”吗？

> ID：13289204
> 
> 赞同：4
> 
> 时间：2012-11-08T12:31:50.287
> 
> 标签：tcl

在 proc 中，您可以获得 proc 名称（无需硬编码）吗？例如

```
proc my_proc { some_arg } {
    puts "entering proc [some way of getting proc name]"
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T13:34:25.510

当然可以！

使用`info level`命令：

```
proc my_proc { some_arg } {
    puts "entering proc [lindex [info level 0] 0]"
} 
```

你得到你想要的

```
entering proc my_proc 
```

另一种方法是使用`info frame`，它提供了一个包含其他信息的字典，并读取`proc`密钥：

```
proc my_proc { some_arg } {
    puts "entering proc [dict get [info frame 0] proc]"
} 
```

这一次，您将获得完全限定的 proc 名称：

```
entering proc ::my_proc 
```

# php - 如何告诉 PHPStorm 调试器，我的项目有文档根目录而不是项目根目录

> ID：13289205
> 
> 赞同：6
> 
> 时间：2012-11-08T12:31:58.080
> 
> 标签：php, debugging, xdebug, phpstorm

我正在尝试使用 xdebug 设置 PHPStorm。Everyting 启动正常，但是断点不起作用并且上面有“x”符号。

![在此处输入图像描述](../Images/8030b488cc4df4960715b5e8988fc1ae.png)

我正在使用带有 PHP 5.4 的[openserver](http://open-server.ru/)并直接在本地 Web 服务器上编辑文件，因此不需要文件映射。

我认为，我的问题是 Web 服务器根位于项目根目录下方（出于安全原因），而 PHPStorm 没有。

项目根目录：**C:\OpenServer\domains\mysite**

Web 服务器根目录（在 nginx 中配置）：**C:\OpenServer\domains\mysite\httpdocs**

我如何告诉 PHPStorm，webserver 运行的 index.php 实际上是**C:\OpenServer\domains\mysite\httpdocs\index.php**，而不是**C:\OpenServer\domains\mysite\index.php**？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-11T07:51:09.620

您必须使用路径映射。您可以在调试服务器配置中找到它 ![调试服务器配置窗口](../Images/011ccee01f61f6b3f7ef77fc1c1633a3.png)

查看官方文档和视频：

*   [帮助页面](http://www.jetbrains.com/phpstorm/webhelp/debugging-php-applications.html)
*   [PHP 调试网络研讨会录制](http://www.youtube.com/watch?v=LUTolQw8K9A)
*   [即时调试](http://blog.jetbrains.com/phpstorm/2013/12/just-in-time-debugging-and-php-exception-breakpoints-with-phpstorm-and-xdebug/)
*   [智能步入](http://blog.jetbrains.com/phpstorm/2013/07/debugging-with-smart-step-into/)
*   [同步调试会话](http://blog.jetbrains.com/phpstorm/2013/04/simultaneous-debugging-sessions-in-phpstorm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-29T14:57:37.520

就我而言，我尝试了以下步骤：

*   第 1 步：在 xdebug 部分取消选中这两个选项 [![在此处输入图像描述](../Images/fee4cd0aaa3daf629a92d73b2fd971d5.png)](https://i.stack.imgur.com/8yRKY.png)
    *   第2步：复制并粘贴您的项目目录`/xampp/htdocs/{your-project}` [![在此处输入图像描述](../Images/64891516771eec2b5bc1a8b659b7d002.png)](https://i.stack.imgur.com/4fLRN.png)

# forms - CodeIgniter 表单验证顺序

> ID：13289208
> 
> 赞同：1
> 
> 时间：2012-11-08T12:32:18.363
> 
> 标签：forms, validation, codeigniter

我有一个带有验证的登录表单，除了一个用例之外，它都可以工作。

如果用户输入有效的电子邮件地址且没有密码，我只希望出现“需要密码”消息，但现在会出现“需要密码”消息和“不正确的电子邮件/密码”消息。

我理解为什么但不知道如何更改此代码，以便回调仅在其他验证已通过时运行。

```
public function login_validation() {
    $this->load->library('form_validation');
    $this->form_validation->set_rules('email', 'Email', 'required|valid_email|trim|xss_clean|callback_validate_credentials');
    $this->form_validation->set_rules('password', 'Password', 'required|md5');
    $this->form_validation->set_error_delimiters('<div class="alert alert-error">', '</div><br />');

    if ($this->form_validation->run()) {
        $data = array(
            'email' => $this->input->post('email'),
            'staff_logged_in' => 1
        );
        $this->session->set_userdata($data);
        redirect('clock/clock');
    } else {
        $this->load->view('login/login');
    }
}

public function validate_credentials() {
    $this->load->model('staff_model');

    if ($this->staff_model->can_log_in()) {
        return true;
    } else {
        $this->form_validation->set_message('validate_credentials', 'Incorrect Email/Password');
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:08:55.190

不要使用表单验证本身来验证凭据。无论如何，这实际上只是为了验证我对它的理解的输入。您必须将输入单独传递给函数，因为它没有将它们与 form_validation 库一起使用。下面是这样的。

```
public function login_validation() {
$this->load->library('form_validation');
$this->form_validation->set_rules('email', 'Email', 'required|valid_email|trim|xss_clean');
$this->form_validation->set_rules('password', 'Password', 'required|md5');
$this->form_validation->set_error_delimiters('<div class="alert alert-error">', '</div><br />');

if ($this->form_validation->run()) {
    $this->validate_credentials($this->input->post($email),$this->input->post($password));
    $data = array(
        'email' => $this->input->post('email'),
        'staff_logged_in' => 1
    );
    $this->session->set_userdata($data);
    redirect('clock/clock');
} else {
    $this->load->view('login/login');
} 
```

}

# javascript - 如何限制 jQuery 自动完成器中显示的选项数量？

> ID：13289210
> 
> 赞同：0
> 
> 时间：2012-11-08T12:32:19.580
> 
> 标签：javascript, jquery

我正在使用带有大约 200 项列表的 Jquery 自动完成器。当我在框中输入一个字符时，它会立即建议所有 100-150 个选项。

该列表是如此之长，它远远超出了页面底部边框，并且还提供了可怕的性能。

如何将显示的选项数量限制为 5 或 6 之类的合理数字？

[这里](http://api.jqueryui.com/autocomplete/)给出的官方文档没有帮助。

限制列表长度的方法是什么？是否有另一个提供良好性能的自动完成库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:35:07.970

利用：

```
$(".classThatNeedsTheAutoComplete").autocomplete({
    source: function(request, response) {
        var results = $.ui.autocomplete.filter(myarray, request.term);

        response(results.slice(0, 10));
    }
}); 
```

这可以*[在 jQuery UI Autocomplete 的限制结果中](https://stackoverflow.com/questions/7617373/limit-results-in-jquery-ui-autocomplete)*找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:36:56.733

[http://api.jqueryui.com/autocomplete/#option-minLength](http://api.jqueryui.com/autocomplete/#option-minLength)

如果您使用 minLength 选项，例如 3，则用户必须在过滤器开始之前键入三个字符。

这将导致比示例 1 更少的结果。您也可以使用`slice`.

# excel - Excel 宏循环通过列分配单元格名称框

> ID：13289211
> 
> 赞同：2
> 
> 时间：2012-11-08T12:32:25.117
> 
> 标签：excel, loops, vba

我想用相邻单元格的值填充单元格的名称框。这个宏有效。

```
Sub NameBox()
   ' populates name box w/ value from adjacent cell
   ActiveCell.Name = ActiveCell.Offset(0, -1).Value
   ' steps down to next cell
   ActiveCell.Offset(1, 0).Select
End Sub 
```

我分配了一个击键并遍历列中的每个单元格，这很容易，但我认为可以通过循环来改进它。

我试过这个。

```
Sub NameBoxLoop()
   Dim cel As Range
   For Each cel In Range("C:C").Cells
      If cel.Value <> "" Then
         cel.Name = cel.Offset(0, -1).Value
      End If
   Next cel
End Sub 
```

但我收到以下调试错误

> cel.Name = 应用程序定义或对象定义的错误

循环逻辑看起来正确，如果我将变量 cel.Name 替换为 cel.Value 循环将完成。

搜索没有提供 cel.Name 错误的答案。感谢您提供解决此错误的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:15:09.700

你的公式有效。但也许你的环境不是最优的，因为你没有纠错 - 并且名称有限制。

所以我猜你在 B 列中没有值，或者 B 列中的值已经被用作其他单元格的名称。

在这两种情况下，您的循环都会中断。

无论如何尝试这个循环，但考虑错误证明你的代码：

```
Sub NameBoxLoop()
   On Error Resume Next
   Dim cel As Range
   For Each cel In Range("C:C").Cells
      If cel.Value <> "" Then
         cel.Name = cel.Offset(0, -1).Value
      End If
   Next cel
end sub 
```

*编辑：*

作为建议，您可能需要考虑使用该`Names`列表。

这是 excel-help 中的一个示例：

```
ActiveWorkbook.Names.Add Name:="test", RefersTo:="=sheet1!$a$1:$c$20" 
```

这里有一些对象成员：

*   添加
*   物品
*   数数

# javascript - 在索引视图中找到 Javascript 函数，但在其他视图中没有

> ID：13289212
> 
> 赞同：0
> 
> 时间：2012-11-08T12:32:25.900
> 
> 标签：javascript, controller, asp.net-mvc-4

我正在使用 ASP.NET MVC 4 开发 Web 应用程序。我有一个包含方法 initializeLocation() 的外部 javascript 文件。如果我在 Home 控制器的 Index 视图中引用该文件，它可以正常工作。但是当我尝试在另一个视图中引用 JS 文件，并在主体 onLoad 中调用该方法时，会出现以下错误：

```
Uncaught ReferenceError: initializeLocation is not defined 
```

这是我的观点的代码：

```
@{
    ViewBag.Title = "Online Users";
}

<html>
    <head>
        <title>Online Users</title>

    </head>

    <body onload="initializeLocation()">

        <h2>Online Users</h2>
        <div id="wrapper">
        <div id="upperPanel">
            <div>
                <ul id="onlineUsers" itemid="@HttpContext.Current.User.Identity.Name">

                </ul>
            </div>
            <div id="friends">

            </div>
        </div>
        <div id="bottomPanel">
            <input id="submitLocation" type="submit" value="Share Location" style="margin-left: 10px;" /><br />  
        </div>
    </div>​​​​​​​​​​​​​

        <label id="locLabel"></label>
        <div id="map" style="width: 100%; height: 600px"></div>
        <script>
            var Pusher_APP_KEY = 'b5ee1a1486b7f0cec06f';
        </script>
        <script src="http://js.pusher.com/1.12/pusher.min.js"></script>
        <script src="~/Scripts/jquery-1.8.2.js" type="text/javascript"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBsjVTOfgW39medqXn6cmOTfVyyxIX3Nl8&sensor=true"> </script>
        <script type="text/javascript">
            //postURL is used in locationFinder.js to set the URL of POST requests
            //It is declared here to be able to use a separate java file instead of embedding it
            var postURL = '@Url.Action("Index", "Home")';
        </script>
        <script type="text/javascript" src="~/Scripts/locationFinder.js"> 
        </script>
    </body>
</html> 
```

这是我的控制器代码：

```
namespace LBSPrototype1.Controllers
{
    public class HomeController : Controller
    {
        private static readonly PusherProvider Provider = new PusherProvider
         (
             ConfigurationManager.AppSettings["pusher_app_id"],
             ConfigurationManager.AppSettings["pusher_key"],
             ConfigurationManager.AppSettings["pusher_secret"]
         );

        public ActionResult Index(string latitude, string longitude, string username)
        {
            return View();
        }

        public ActionResult About()
        {
            ViewBag.Message = "Your app description page.";

            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }

        //
        // GET: /Home/OnlineUsers
        [AllowAnonymous]
        public ActionResult OnlineUsers()
        {
            return View();
        }

        //
        // POST: /Home/OnlineUsers
        [AllowAnonymous]
        [HttpPost]
        public ActionResult OnlineUsers(string latitude, string longitude, string username)
        {
            var now = DateTime.UtcNow;
            var request = new ObjectPusherRequest(
                "chat_channel",
                "message_received",
                new
                {
                    lat = latitude,
                    lon = longitude,
                    user = username,
                    timestamp = now.ToShortDateString() + " " + now.ToShortTimeString()
                });
            Provider.Trigger(request);
            return View();
        }

    }
} 
```

我是 MVC 的新手，并且仍然习惯于控制器等概念，但不明白为什么完全相同的代码应该在一个视图中而不是另一个视图中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:41:08.337

代替

```
<script src="~/Scripts/jquery-1.8.2.js" type="text/javascript"></script>

<script type="text/javascript" src="~/Scripts/locationFinder.js"></script> 
```

采用

```
<script src="@Url.Content("~/Scripts/jquery-1.8.2.js")" type="text/javascript"></script>

<script type="text/javascript" src="@Url.Content("~/Scripts/locationFinder.js")" ></script> 
```

问题是在页面上呈现的 url。用于`@Url.Content`呈现带有其 rool 路径引用的 url。它会在路由时呈现正确的 url。

# sql - sql中的连续日期和约会

> ID：13289214
> 
> 赞同：0
> 
> 时间：2012-11-08T12:32:37.070
> 
> 标签：sql, sql-server-2008

我有一个包含工程师、appt_date 和 appt_slot 的 sql 表。

```
engineer_id, visit_date, visit_slot

1,           20/10/12,   All Day
1,           21/10/12,   AM
2,           20/10/12,   All Day
2,           21/10/12,   All Day
2,           22/10/12,   All Day
3,           20/10/12,   PM
3,           21/10/12,   All Day
3,           22/10/12,   PM 
```

我想展示的是

```
Engineer_id, start_visit,      end_visit

1,           20/10/12 All Day, 21/10/12 AM
2,           20/10/12 All Day, 22/10/12 All Day
3,           20/10/12 PM,      21/10/12 All Day
3,           22/10/12 PM,      22/10/12 PM 
```

我正在努力使用 sql 来显示预订中的中断，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:52:56.670

您要做的是在数据中查找序列。通常，这是几天的序列。你的情况更难，因为你有这些插槽，大概是半天。

该解决方案通过将时隙转换为时间来工作。我随意使用早上 6:00 和晚上 6 点。我使用 a 来执行此操作`cross join`，因为新行是为“全天”约会创建的。

使用此数据结构，您可以使用 SQL 技巧来识别属于一起的插槽。这个想法是按日期时间枚举每个工程师的插槽。然后从 datetime 中减去半天 tiems 的枚举值。当值有序时，这是一个常数。有间隙时会出现一个新值。

最后，按engineer_id和group id分组，得到你想要的数据。

以下查询显示了这一点。它将最终结果保留为日期时间，而不是将它们转换回插槽。

```
with t as (
    select 1 as engineer_id, cast('2012-10-20' as date) as visit_date, 'All Day' as visit_slot union all
    select 1 as engineer_id, cast('2012-10-21' as date) as visit_date, 'AM' as visit_slot union all
    select 2 as engineer_id, cast('2012-10-20' as date) as visit_date, 'All Day' as visit_slot union all
    select 2 as engineer_id, cast('2012-10-21' as date) as visit_date, 'All Day' as visit_slot union all
    select 2 as engineer_id, cast('2012-10-22' as date) as visit_date, 'All Day' as visit_slot union all
    select 3 as engineer_id, cast('2012-10-20' as date) as visit_date, 'PM' as visit_slot union all
    select 3 as engineer_id, cast('2012-10-21' as date) as visit_date, 'All Day' as visit_slot union all
    select 3 as engineer_id, cast('2012-10-22' as date) as visit_date, 'PM' as visit_slot
   ),
   tslots as (
    select t2.*
    from (select t.engineer_id,
                 (CAST(visit_date as datetime) +
                      (case when t.visit_slot in ('All Day', const.slot) then const.hr/24.0 end)
                 ) as visit_datetime
          from t cross join
               (select 'AM' as slot, 6 as hr union all select 'PM', 18) const
         ) t2
    where visit_datetime is not null
    group by engineer_id, visit_datetime
   )
select engineer_id, MIN(visit_datetime) as min_datetime, MAX(visit_datetime) as max_datetime
from (select ts.*,
             ROW_NUMBER() over (partition by engineer_id order by visit_datetime) as seqnum,
             visit_datetime - 0.5*(ROW_NUMBER() over (partition by engineer_id order by visit_datetime)) as groupid
      from tslots ts
     ) ts1
group by engineer_id, groupid
order by 1, 2 
```

# machine-learning - 偏斜特征的最合适的归一化/转换方法？

> ID：13289215
> 
> 赞同：5
> 
> 时间：2012-11-08T12:32:44.493
> 
> 标签：machine-learning, neural-network, normalization, biological-neural-network

我正在尝试预处理生物数据以训练神经网络，尽管对各种标准化方法进行了广泛的搜索和重复介绍，但对于何时应该使用哪种方法我一无所知。特别是我有一些输入变量是正偏态的，并且一直在尝试确定是否存在最合适的归一化方法。

我还担心这些输入的性质是否会影响网络的性能，因此我尝试了数据转换（特别是对数转换）。然而，一些输入有许多零，但也可能是小的十进制值，并且似乎受到 log(x + 1) （或从 1 到 0.0000001 的任何数字）的高度影响，结果分布未能接近正常（要么仍然偏斜或变成双峰，在最小值处有一个尖峰）。

这与神经网络有关吗？IE。我应该使用特定的特征转换/归一化方法来解释倾斜的数据，还是应该忽略它并选择一种归一化方法并继续推进？

任何关于此事的建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:44:01.703

由于输入向量中的特征具有不同的性质，因此您应该对每个特征使用不同的归一化算法。网络应该由每个输入的统一数据提供，以获得更好的性能。

正如您所写的一些数据是倾斜的，我想您可以运行一些算法来“规范化”它。如果应用对数不起作用，也许可以尝试[其他函数](http://www.medcalc.org/manual/transforming_data_to_normality.php)和方法，例如[秩变换。](http://comp9.psych.cornell.edu/Darlington/transfrm.htm)

如果*小十进制值*确实完全出现在特定功能中，那么只需以特定方式对其进行规范化，以便它们转换为您的工作范围：我想是 [0, 1] 或 [-1, +1]。

如果某些输入有很多零，请考虑将它们从主神经网络中删除，并创建额外的神经网络，该网络将对具有非零特征的向量进行操作。或者，您可以尝试运行主成分分析（例如，通过具有结构 NMN，M < N 的自联想记忆网络）来减少输入空间维度，从而消除零分量（它们实际上会以某种方式在新的组合输入中被考虑在内） ）。顺便说一句，新的 M 输入将自动归一化。然后，您可以将新向量传递给您的实际工作神经网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:41:40.453

这是个有趣的问题。归一化旨在将特征值保持在一个范围内，以促进优化过程。

我建议如下：

1-检查是否需要规范化数据。例如，如果变量或特征的均值在相同的值范围内，则您可能会在没有归一化的情况下进行。MSVMpack 对其 SVM 实现使用了一些规范化检查条件。但是，如果您需要这样做，仍然建议您在没有标准化的数据上运行模型。

2-如果您知道某个特征的实际最大值或最小值，请使用它们来规范化该特征。我认为这种规范化会保持价值观的偏差。

3- 如果适用，请尝试使用其他功能进行十进制值标准化。

最后，仍然建议您应用不同的归一化技术并比较 MSE 与可能损害数据偏斜度的各种技术（包括 z 分数）。

我希望我已经回答了您的问题并给予了一些支持。

# audio - 媒体基金会 IMFMediaSource::CreatePresentationDescriptor 调用永无止境

> ID：13289216
> 
> 赞同：0
> 
> 时间：2012-11-08T12:32:44.993
> 
> 标签：audio, com, directx, ms-media-foundation

我正在尝试使用 Media Foundation 播放 mp3 文件，但在`PresentationDesctiptor`使用`CreatePresentationDescriptor`方法时遇到问题

我在做什么：

*   使用启动 MF`MFStartup`
*   使用创建会话`MFCreateMediaSession`
*   使用创建 SourceResolver`MFCreateSourceResolver`
*   `CreateObjectFromURL`使用SourceResolver创建 MediaSource
*   使用创建拓扑`MFCreateTopology`
*   尝试使用`CreatePresentationDescriptor`MediaSource创建 PresentationDescriptor

当我调用`CreatePresentationDescriptor`没有错误/异常发生时，它只是站在那里，什么也不做。当我暂停 Visual Strudio 时，它表明程序仍在等待方法完成。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:11:52.443

我没有提到我为此使用 C#（不认为这是相关的）

问题是在 C# 中导入 com 接口时，您需要导入接口的所有方法，而不仅仅是那些被调用的方法。某些方法可以调用未导入的方法并导致未报告给 Visual Strudio 调试器的访问冲突，因此似乎方法从未完成调用。

# java - 带有参数的 Spring Bean 和 @Autowired 构造函数

> ID：13289221
> 
> 赞同：3
> 
> 时间：2012-11-08T12:33:01.513
> 
> 标签：java, spring, javabeans, autowired

我想了解是否可以使用以及如何使用 @Autowired 构造函数和参数来做一个 Bean。

```
@Component
public class Routes
{
    private Foo req;

    @Autowired
    public Routes(Foo req)
    {
        this.req = req;
    }
    public String getUrl(String destin)
    {
        return req.getContextPath() + destin;
    }
}

@Component
public class HomeController
{
    @Autowired
    private Routes routes;

    public HomeController(Foo req)
    {
        String foo = routes.getUrl("something");
    }
} 
```

REAL CODE ------EDITING--------------- 异常发生就行了： String foo = rt.getUrl("caca");

```
public class AppRun extends HttpServlet {

    private static final long serialVersionUID = -3308874705513248491L;

    private ApplicationContext context;

    @Override
    public void service(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException
    {
        context = WebApplicationContextUtils.getWebApplicationContext(getServletContext());

        FooTest ft = new FooTest();

        HomeControllerTest hc = (HomeControllerTest) context.getBean("homeControllerTest", new Object[]{ft});
    }
}

@Component
@Scope("prototype")
public class FooTest {

    public String mensagem()
    {
        System.out.println("funcionou");
        return "ok";
    }

}

@Component
@Scope("prototype")
public class RoutesTest {

    private FooTest req;

    @Autowired
    public RoutesTest(FooTest req)
    {
        this.req = req;
    }

    public String getUrl(String destin)
    {
        return req.mensagem().concat(destin);
    }

}

@Component
@Scope("prototype")
public class HomeControllerTest {

    @Autowired
    private RoutesTest rt;

    public HomeControllerTest(FooTest req)
    {
        String foo = rt.getUrl("caca");

        System.out.println(foo);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:44:16.460

问题是您正在访问构造函数中尚未赋值的属性：Spring 必须先创建对象，然后才能设置 @Autowired 属性 rt。要么将参数添加`RoutesTest rt`到构造函数，要么将构造函数逻辑移动到`afterPropertiesSet`方法中。

以下是如何使用构造函数更改失败的类：

```
@Component
@Scope("prototype")
public class HomeControllerTest {

    private RoutesTest rt;

    @Autowired
    public HomeControllerTest(FooTest req, RoutesTest rt)
    {
        this.rt = rt;
        String foo = rt.getUrl("caca");

        System.out.println(foo);
    }

} 
```

# jquery - 如何将 Html.Action 附加到 jquery

> ID：13289222
> 
> 赞同：2
> 
> 时间：2012-11-08T12:33:03.893
> 
> 标签：jquery, asp.net-mvc

我可以加吗

```
$("#report").html('Html.Action("ReportPage", new { id = Model.GoalId })') 
```

这里报告是我要放置操作结果的 div 的 id ReportPage id 是传递给 ReportPage actionresult 的参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T12:37:43.163

您需要使用服务器标签来实现这一点。所以：

```
$("#report").html('@Html.Action("ReportPage", new { id = Model.GoalId })') 
```

或者

```
$("#report").html('<%= Html.Action("ReportPage", new { id = Model.GoalId }) %>') 
```

如果这就是您所说***的操作 ReportPage 的结果***。

但是，如果***操作 ReportPage***的结果是指 MVC 操作返回的实际结果（即：视图、json ..），则必须使用类似这样的东西

```
$.get('@Html.Action("ReportPage", new { id = Model.GoalId })', function(data) {
  $("#report").html(data);
}); 
```

希望这可以帮助

PS：有关 jQuery.get() 的更多详细信息，请参阅[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:49:17.797

这样，您的操作 html 将在主页加载后由 ajax 加载。

css

```
.support {display: hidden;} 
```

html

```
<div class="support">
    <div class="report-page">
        <a href="Url.Action("ReportPage", new { id = Model.GoalId })" />
    </div>
</div> 
```

js

```
var url = $('.support .report-page a').prop('href');
$.get(url, null, function(html){
    $('#report').html(html);
}, html); 
```

* * *

或者，如果你只想要一个 http 请求，你可以这样做：

css

```
.support {display: hidden;} 
```

html

```
<div class="support">
    <div class="report-page">
        @Html.Action("ReportPage", new { id = Model.GoalId })
    </div>
</div> 
```

js

```
var html = $('.support .report-page').html();
$('#report').html(html); 
```

# android - 将 android 应用程序移动到另一个帐户

> ID：13289227
> 
> 赞同：1
> 
> 时间：2012-11-08T12:33:27.020
> 
> 标签：android, billing

我计划将我的应用程序转移到另一个帐户。

**问题1：**我可以在不关闭旧帐户的情况下这样做吗？

**问题 2：**我的应用程序有应用内支付，所以根据这个[规范](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139626)。这篇文章指出

> 应用内计费：当您的应用程序被转移时，计费服务将开始使用您的新密钥对签署所有计费响应。您的应用程序的旧版本将立即无法验证计费响应。为此，您需要提前推出一个版本的应用程序，该版本尝试使用您的旧密钥对和新密钥对来验证请求。

什么是验证计费响应？这是他们在演示应用程序 Security.java 类中拥有的东西吗？

```
StringBuilder stringBuilder = new StringBuilder();
stringBuilder.append("....");
String base64EncodedPublicKey = stringBuilder.toString();
PublicKey key = Security.generatePublicKey(base64EncodedPublicKey);
verified = Security.verify(key, signedData, signature); 
```

如果是，那么它们是什么意思

> 尝试验证请求

有哪些要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:50:12.430

**A1**。是的。无需关闭旧帐户

**A2**。无需更改任何内容。由于 2011 年 11 月的密钥与应用程序而非帐户相关联，因此您可以随意迁移应用程序多次。

为自己试过：一切顺利。

# wpf - 将不同的数据拉入 ListBox

> ID：13289232
> 
> 赞同：0
> 
> 时间：2012-11-08T12:33:36.710
> 
> 标签：wpf

我应该怎么做？我尝试了以下方法：

在 Xaml 中：

```
 <DataTemplate x:Key="LogDataTemplate" DataType="data:Type1">
             <TextBlock Text="Type1" />                
        </DataTemplate>

        <DataTemplate x:Key="LogDataTemplate" DataType="data:Type2">
            <TextBlock Text="Type2" />
        </DataTemplate>
    </ResourceDictionary>
</UserControl.Resources>

     <ListBox ItemsSource="{Binding source}"
              ItemTemplate="{StaticResource LogDataTemplate}" />    
 </UserControl> 
```

在视图模型中（设置为 UserControl 的 DataContext）：

```
member x.source = new ObservableCollection<Object>() 
```

但是有一个关于 DataTemplate 重复的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:37:58.480

删除`x:Key`参数。隐式 DataTemplates 是您想要的。

**编辑：**这是一个非常小的工作示例：

**主窗口.xaml.cs**

```
using System.Collections.ObjectModel;
using System.Windows;

namespace StackOverflow
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            Rectangles = new ObservableCollection<object>() { new RedRectangle(), new BlueRectangle() };
        }
        public ObservableCollection<object> Rectangles { get; set; }
    }
    public class RedRectangle { }
    public class BlueRectangle { }
} 
```

**主窗口.xaml**

```
<Window x:Class="StackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StackOverflow"
        Width="500" Height="300">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:RedRectangle}">
            <Rectangle Width="16" Height="16" Fill="Red" />
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:BlueRectangle}">
            <Rectangle Width="16" Height="16" Fill="Blue" />
        </DataTemplate>
    </Window.Resources>
    <ListBox ItemsSource="{Binding Rectangles}" />
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:47:49.797

嗯，有像@Sisyphe 提到的隐式数据模板。

但是您真正的问题是，您将两个模板命名为相同的东西。`x:Key`是一个字典键，它需要在其范围内是唯一的。这就是错误所在。

话虽如此，在@Sisyphe 提到的这种情况下，您最好使用隐式数据模板。

# facebook - reauthenticate 功能改变了它的行为？

> ID：13289240
> 
> 赞同：12
> 
> 时间：2012-11-08T12:34:00.090
> 
> 标签：facebook, authentication, facebook-oauth

在我的应用程序中，为了能够切换到另一个用户，我对“https://www.facebook.com/dialog/oauth”URL 使用了**“auth_type=reauthenticate”**参数。这工作了很长时间。我能够使用上次登录以外的其他 FB 用户登录。（例如共享PC） 今天我发现再也无法更改用户了。只能重新输入密码。此外，没有“取消”按钮（使用“显示=弹出”）。

我在developers.facebook.com 上找不到相关内容

有人知道吗？它是暂时的错误还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T12:48:53.580

来自： [https ://developers.facebook.com/docs/facebook-login/reauthentication/](https://developers.facebook.com/docs/facebook-login/reauthentication/)

请注意，**应用程序应构建自己的机制，以允许**使用注销功能在不同的 Facebook 用户帐户之间进行切换，并且不应为此依赖重新身份验证。

# c# - 从 Excel 导出到 DataGridView，缺少字符串

> ID：13289251
> 
> 赞同：0
> 
> 时间：2012-11-08T12:34:42.907
> 
> 标签：c#, excel, datagridview, datatable

我从 Excel 导出到 dataTable 时遇到问题。当单元格中有太多文本时，它会导出到 dataGridView 但缺少一些文本。我认为是因为我的 DataTable 仅限于某些字符。有人可以帮我吗？

Excel单元格中的示例我有：

```
15 ha
14 ee
13 oo
...
2  dd
1  qq
0  rr 
```

当我导出到 dataGridView 时，我只有

```
15 ha
14 ee
13 oo
...
till 5 vv
and the rest can not be seen 
```

我使用的代码：

```
 System.Data.OleDb.OleDbConnection conn = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + userSelectedFilePath2 + "; Extended Properties = \"Excel 8.0;HDR=Yes;IMEX=1\";");

            conn.Open();

            string query = String.Format("select * from [{0}$]", "ABC");
            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, conn);
            DataSet dataSet = new DataSet();
            dataAdapter.Fill(dataSet);
            dataGridView1.DataSource = dataSet.Tables[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:56:35.577

您的问题是该字符串很可能位于 Excel 工作表的 A1 单元格中，因此它被映射为`DataGridView`控件的标题字符串。将其放入 A2 单元格中，您将获得完整的文本。

# api - 计算在 Twitter 中分享 URL 的次数

> ID：13289252
> 
> 赞同：1
> 
> 时间：2012-11-08T12:35:01.137
> 
> 标签：api, url, twitter

是否可以计算某个 URL 在一段时间内被推了多少次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:52:36.430

您可以使用[Twitter 搜索 API](https://dev.twitter.com/docs/using-search)并搜索 URL，然后检查 Tweet 对象以查找日期范围内的对象。使用[GET 搜索/推文](https://dev.twitter.com/docs/api/1.1/get/search/tweets)调用。这仅限于其索引中的过去 6-7 天。

您还可以编写一个应用程序来观察一段时间内 URL 的 Twitter 流，然后计算出现次数。这可以通过调用[Twitter 流 API](https://stream.twitter.com/1.1/statuses/filter.json)来完成`POST statuses/filter`。指定您正在观看的字符串，匹配的结果将流式传输。

例如，在 Ruby 中，您可以使用[Twitter Gem](https://github.com/sferik/twitter)来执行此操作。最好搜索已知的 URL 缩短版本以及完整的 URL。您可以通过预先向几个已知的 URL 缩短器注册 URL 来控制这一点，这样您就知道要注意什么。

# matlab - 关于函数 strfind 的 Matlab cellfun

> ID：13289258
> 
> 赞同：3
> 
> 时间：2012-11-08T12:35:10.860
> 
> 标签：matlab, matrix, cell

我想在`cellfun`函数上使用`strfind`函数来查找另一个字符串元胞数组中的字符串元胞数组中每个字符串的索引，以将它们排除在外。

```
strings = {'aaa','bbb','ccc','ddd','eee','fff','ggg','hhh','iii','jjj'};
excludedStrings = {'b','g','h'};
idx = cellfun('strfind',strings,excludedStrings);
idx = cell2mat = idx;
idx = reshap(idx,numel(idx),1);
idx = unique(idx);
strings(cell2mat(idx)) = []; 
```

呼叫线路有错误，`cellfun`我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:55:09.687

这是一个可爱的单行：

```
strings = regexprep(strings, excludedStrings, ''); 
```

分解：

*   所有要搜索的单词/字符都传递给`regexprep`
*   此函数用空字符串 ( )替换上面给出的集合中出现的*任何单词/字符。*`''`

它将自动对 cell-array 中的所有元素重复此操作`string`。

如果您还希望从单元格中删除任何空字符串`string`，请在上述命令之后执行此操作：

```
strings = strings(~cellfun('isempty', strings)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:28:47.093

我想你在这之后：

```
idx = cellfun(@(str) any(cellfun(@(pat) any(strfind(str,pat)),excludedStrings)),strings)

idx =
    0     1     0     0     0     0     1     1     0     0 
```

之后您当然可以申请：

```
strings(idx) = []; 
```

因为您有两个要交叉检查的单元格数组（其中一个是数组），所以您需要嵌套两个`cellfun`s。

# php - 使用带有 ascii 字符模式和 utf-8 多字节主题的 preg_ 函数是否安全？

> ID：13289259
> 
> 赞同：1
> 
> 时间：2012-11-08T12:35:13.353
> 
> 标签：php, preg-replace

我知道如果我使用多字节（UTF-8）字符作为模式，我必须使用`mb_`函数或必须使用函数`u`模式的选项`preg_`。

但是，当我仅将多字节（UTF-8）字符用于`preg_`函数主题并仅将 ascii 字符用于模式时，`preg_`函数（无`u`选项）是否正常工作？

我知道在这种情况下我必须使用`mb_`函数或`u`向模式添加选项：

```
$str = preg_replace("/$utf8_multibyte_pattern/", '', $str); 
```

我想知道此代码（`u`未使用选项）是否安全：

```
$ascii_pattern = "[a-zA-Z0-9'$#\\\"%&()\-~|~=!@`{}[]:;+*/.,_<>?_\n\t\r]";
$multibyte_str = preg_replace("/$ascii_pattern/", '', $utf8_multibyte_str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:48:11.990

也许我自己找到了答案。

**但是对字符代码很了解的人，请对此答案发表评论或发布另一个答案。**

根据维基百科，UTF-8 字符代码不包含 ascii 代码。

[http://en.wikipedia.org/wiki/UTF-8#Advantages](http://en.wikipedia.org/wiki/UTF-8#Advantages)

> ASCII 字符本身被表示为不会出现在其他任何地方的单个字节，这使得 UTF-8 可以与大多数现有 API 一起使用，这些 API 采用字节字符串但只特殊处理少量 ASCII 代码。这消除了为每个 API 编写新的 Unicode 版本的需要，并且比任何其他 Unicode 编码更容易将现有系统转换为 UTF-8。

我认为这意味着没有 u 选项的带有 ascii 模式的 preg 函数对于多字节（UTF8）主题是安全的。

而这段代码（没有 u 选项）

```
$multibyte_str = preg_replace("/$ascii_pattern/", '', $utf8_multibyte_str); 
```

和这段代码（带 u 选项）

```
$multibyte_str = preg_replace("/$ascii_pattern/u", '', $utf8_multibyte_str); 
```

是相同的。两者都能正常工作。

我对么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:58:08.667

据我所知，只要您`/u`像这样使用 unicode 属性 ()，它就是安全的：

```
$ascii_pattern = "[a-zA-Z0-9'$#\\\"%&()\-~|~=!@`{}[]:;+*/.,_<>?_\n\t\r]";
$multibyte_str = preg_replace("/$ascii_pattern/u", '', $utf8_multibyte_str); 
```

要查看有关 unicode 字符的更多信息，请参见[此处](http://php.net/manual/en/regexp.reference.unicode.php)

# antlr - ANTLR：空状态不起作用

> ID：13289263
> 
> 赞同：3
> 
> 时间：2012-11-08T12:35:22.570
> 
> 标签：antlr

我希望能够解析*int []*或*int*标记。

考虑以下语法：

```
TYPE    :   'int' AFTERINT;
AFTERINT:   '[' ']'; 
```

当然可以，但仅适用于*int []*。为了使它也适用于*int*，我更改`AFTERINT`为这个（添加了一个空条件'：

```
AFTERINT:   '[' ']' |
              |; 
```

但是现在我收到了这个警告和错误：

> [13:34:08] 警告（200）：MiniJava.g:5:9：决策可以使用多种选择匹配输入，例如“”：2、3
> 
> 因此，对于该输入 [13:34:08] 错误（201）：MiniJava.g:5:9：以下备选方案永远无法匹配：3

为什么空条件不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:23:35.197

词法分析器无法处理匹配空字符串的标记。如果您仔细考虑一下，这并不奇怪：毕竟，您的输入中有无数个空字符串。词法分析器总是会产生一个空字符串作为有效标记，从而导致无限循环。

类型的识别不属于词法分析器，而属于解析器：

```
type
 : (INT | DOUBLE | BOOLEAN | ID) (OBR CBR)?
 ;

OBR     : '[';
CBR     : ']';
INT     : 'int';
DOUBLE  : 'double';
BOOLEAN : 'boolean';
ID      : ('a'..'z' | 'A'..'Z')+; 
```

每当您开始组合不同*类型*的字符来创建（单个）标记时，通常最好为此创建一个解析器规则。将词法分析器规则（令牌）视为语言的最小构建块。从这些构建块中，您可以*编写*解析器规则。

# jquery - jquery - 如何将查找对象分配回相同的每个函数？

> ID：13289264
> 
> 赞同：0
> 
> 时间：2012-11-08T12:35:22.010
> 
> 标签：jquery, object

我完全不知道怎么问这个问题。如果有人不明白这一点，我很抱歉。事情是，我有对象，我正在循环使用`each function`，当我得到子对象（内部对象）时，我想分配回相同`each function`的对象，有什么好主意？

看看我的问题：

我的对象：

```
var xploreMaps = {
    radious:55,
    stroke:5,strokeColor:'#fff',
    opacity:0.8,fontSize:13,line:10,
    cGtext:{
        length:5,
        lineColor:'#579549',
        prop:{
            0:{link:'catalogs .html',color:'#7a5967',text:'Catalogs',
            subLink:{0:{link:'SEO_SMM.html',color:'#4e4b69',text:'SEO/SMM',align:'top'},1:{link:'site_analytics.html',color:'#545454',text:'Site analytics',align:'btm'}}},
            1:{link:'socialmedia.html',color:'#1e9ead',text:'Innovation'},
            2:{link:'loyalty .html',color:'#8fad34',text:'Ideation'},
            3:{link:'promotions .html',color:'#563b64',text:'Promotions'},
            4:{link:'implementations.html',color:'#2c6566',text:'Implementations',
            subLink:{0:{link:'integrating.html',color:'#4c4a66',text:'Integrating',align:'top'},1:{link:'payment.html',color:'#948048',text:'Payment',align:'btm'}}}
            }
    }
}

var object = xploreMaps[id].prop || 'i need subLink'; 
```

我的功能：

```
 $.each(object, function (n,d) {

                var Color = this.color,link = this.link,text=this.text,**subLink** = this.subLink || '';

   // if the sublink there, i need to put back to each, and do the same stuff, what i do for it's parent object.

                var myTimeout = setTimeout(function(){
                    redSubCircles.push(paper.path("M"+x +" "+y)
                    .attr({stroke:brdColor})
                    .animate({path:"M"+(x-((stroke/2)+(n*((radious*2)+stroke+line)))) +" "+y+'l'+(-line)+' 0'},1000,
                        function(){
                            var c =    paper.circle((x-(radious+stroke+line) - n*((radious*2)+stroke+line)),y,radious)
                            .attr({
                                stroke:strokeCl,
                                'stroke-width':stroke,
                                opacity:opacity,
                                fill:Color,
                                href:link
                            });

                            var p =    paper.text((x-(radious+stroke+line) - n*((radious*2)+stroke+line)),y,text)
                            .attr({fill:strokeCl,'font-size':fSize,href:link})

                            redSubCircles.push(c,p)//push to set;-

                        }));
                },1000*n)
            } ) 
```

如果我错了，我很抱歉。请告诉我正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:54:58.843

也许一个while循环和一个临时数组会帮助你。

将您的初始项目添加到临时数组中 当临时数组中有项目时调用该函数

每次遇到子链接时，将其推送到您正在迭代的临时数组中。临时数组变大，并继续运行。

每次你完成一个项目，删除它。临时数组变小，最终达到零 - 完成你的循环。

您将需要 while、push 和 splice 从阵列中删除项目。

这是一个独立的例子，[这里有一个演示](http://jsfiddle.net/am_d/EGD6h/)

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<h1>looper</h1>
    <script type="text/javascript">
    function ObjectMaker(identifier) {
        var that = {
          subObj:null,
          name: identifier,
          getName: function() {
            return "I am "+this.name;
          },
          setSubObj: function(sub) {
            this.subObj = sub ;
          }       
        }
        return that;
    }
    var twoAndAHalf = ObjectMaker("two and  a half");
    var two = ObjectMaker("two");
    two.setSubObj(twoAndAHalf);
    var items = [ObjectMaker("one"),two,ObjectMaker("three")];
    while(items.length>0) {
        if (items[0].subObj != null) {
            items.push(items[0].subObj);
        }
        alert(items[0].getName());
        items.splice(0,1);
    }
    </script>
</body>
</html> 
```

# c# - 稍微复杂的匹配条件

> ID：13289265
> 
> 赞同：1
> 
> 时间：2012-11-08T12:35:25.550
> 
> 标签：c#, linq, logical-operators

下面的代码代表了我正在尝试编写的内容。要求是税收概况应与正确的货币匹配。我在下面的代码中编写了 if 条件。但是，有 100 多个税务档案可通过数据库读取。**我应该为所有 100 个条件编写 if 条件还是有更好的编码方式？**

```
using System;

namespace MatchCondition
{
    class MatchCondition
    {
        private const int TaxAmerica1 = 100;
        private const int TaxAmerica2 = 200;
        private const int TaxIndia1 = 300;
        private const int TaxIndia2 = 400;

        private const int Rupee =100;
        private const int Dollar =200;

        static void Main(string[] args)
        {
            try
            {

                int currencyId = int.Parse(args[0]);
                int taxProfileId = int.Parse(args[1]);
                if (currencyId == Rupee && (taxProfileId == TaxIndia1 || taxProfileId == TaxIndia2))
                {
                    Console.WriteLine("All is well!");
                }
                else if(currencyId == Dollar && (taxProfileId == TaxAmerica1 || taxProfileId == TaxAmerica2))
                {
                    Console.WriteLine("All is well!");
                }
                else if (taxProfileId == 0)
                {
                    Console.WriteLine("All is well!");
                }
                else
                {
                    Console.WriteLine("Mismatch Detected!");
                }

            }
            catch (Exception exception)
            {
                Console.WriteLine(exception.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:45:46.813

您可以将所有有效组合放入哈希表中，即`IDictionary`从那里开始。

例如：

```
var validCombinations = new Dictionary<int, List<int>>();
validCombinations.Add(Rupee, new List<int> { TaxIndia1, TaxIndia2 });
validCombinations.Add(Dollar, new List<int> { TaxAmerica1, TaxAmerica2 });

int currencyId = int.Parse(args[0]);
int taxProfileId = int.Parse(args[1]);

List<int> validTaxes;

if (taxProfileId == 0 ||
    (validCombinations.TryGetValue(currencyId, out validTaxes) &&
     validTaxes.Contains(taxProfileId)))
{
    Console.WriteLine("All is well!");
}
else
{
    Console.WriteLine("Mismatch Detected!");
} 
```

您还可以使用从数据库表中读取的组合填充字典，因此您不必对它们进行硬编码。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:24:24.647

您可以使用列表的映射字典作为替代

你可以像这样重组你的代码：

因此，您只需为每组有效的货币/税收配置文件添加到 validCurrencies 字典。请注意，这只是为您提供编写 100 个条件的替代方法，您需要自己测试并使代码健壮。

```
using System;
using System.Collections.Generic;

namespace MatchCondition
{
    class MatchCondition
    {
        private enum TaxProfileEnum
        {
            Default = 0,
            America1 = 100,
            America2 = 200,
            India1 = 300,
            India2 = 400,
        }

        private enum CurrencyEnum
        {
            Rupee = 100,
            Dollar = 200,
        }

        static void Main(string[] args)
        {
            try
            {
                Dictionary<CurrencyEnum, List<TaxProfileEnum>> validCurrencies = new Dictionary<CurrencyEnum, List<TaxProfileEnum>>()
                {
                    { CurrencyEnum.Rupee, new List<TaxProfileEnum>()  { TaxProfileEnum.India1, TaxProfileEnum.India2 } },
                    { CurrencyEnum.Dollar, new List<TaxProfileEnum>() { TaxProfileEnum.America1, TaxProfileEnum.America2 } },
                };

                CurrencyEnum currency = (CurrencyEnum)int.Parse(args[0]);
                TaxProfileEnum taxProfile = (TaxProfileEnum)int.Parse(args[1]);

                if (taxProfile == TaxProfileEnum.Default)
                {
                    Console.WriteLine("All is well!");
                    return;
                }

                List<TaxProfileEnum> validTaxes;
                if (validCurrencies.TryGetValue(currency, out validTaxes) && validTaxes.Contains(taxProfile))
                {
                    Console.WriteLine("All is well!");
                    return;
                }

                Console.WriteLine("Mismatch Detected!");
            }
            catch (Exception exception)
            {
                Console.WriteLine(exception.Message);
            }
        }
    }
} 
```

# java - 导入的 jar 文件创建空包

> ID：13289267
> 
> 赞同：3
> 
> 时间：2012-11-08T12:35:36.703
> 
> 标签：java, eclipse, jar, ibm-mq

我正在将一个 Jar 文件“com.ibm.mq.jar”导入我的工作区（Eclipse IDE）。导入时，出现一个屏幕，我可以在其中看到 Jar 文件中的所有类。

将其导入工作空间后，我能够导入包并且以下语句没有给出任何错误。

```
 import com.ibm.mq.*; 
```

但是，在代码中，我无法使用包中的任何类。就像，“MQC”是包中的一个类，但在代码中它没有反映（如果我尝试使用它，会出现“MQC 无法解析为类型”错误）。

这个 jar 文件实际上包含 Websphere MQ API 类。

任何人都可以建议，我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:30:23.833

如果您使用的是 MQ 7，请在[此处](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.javadoc.doc/WMQJMSClasses/index.html)查看其文档。有一些关于弃用的事情，`com.ibm.mq.mqc`并且根据您使用的版本，该类被替换为`com.ibm.mq.constants.MQConstants`. 像这种情况，还有其他情况。

事实上`com.ibm.mq`只包含异常`MQException`，所以你不会在那里找到任何类。作为第一步，我建议您检查您正在使用的版本并深入研究文档。

# ruby-on-rails - Ruby 中的 UDP HTTP 标头解析

> ID：13289268
> 
> 赞同：1
> 
> 时间：2012-11-08T12:35:44.213
> 
> 标签：ruby-on-rails, ruby, parsing, http-headers

我从一个 UDP 套接字得到以下响应：

```
HTTP/1.1 200 OK
CACHE-CONTROL: max-age=1800
DATE: Thu, 08 Nov 2012 12:32:33 GMT
EXT:
LOCATION: http://192.168.0.100:49153/nmrDescription.xml
SERVER: Windows2000/0.0 UPnP/1.0 PhilipsIntelSDK/1.4 DLNADOC/1.50
X-User-Agent: redsonic
ST: upnp:rootdevice
USN: uuid:F00DBABE-SA5E-BABA-DADA188ED55ED539::upnp:rootdevice 
```

是否有一个库或简单的方法来解析所有这些？

我想得到类似以下的东西：

```
{
  :cache_control => "max-age=1800"
  :date => "Thu, 08 Nov 2012 12:32:33 GMT"
  :ext => nil
  :location => "http://192.168.0.100:49153/nmrDescription.xml"
  # Etc.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:27:55.643

```
response.split($/).drop(1).inject({}) do |h, l|
  k, v = l.split(": ", 2)
  h[k.downcase.gsub("-", "_").to_sym] = (v unless v.empty?)
  h
end

# => {
#  :cache_control=>"max-age=1800",
#  :date=>"Thu, 08 Nov 2012 12:32:33 GMT",
#  :ext=>nil,
#  :location=>"http://192.168.0.100:49153/nmrDescription.xml",
#  :server=>"Windows2000/0.0 UPnP/1.0 PhilipsIntelSDK/1.4 DLNADOC/1.50",
#  :x_user_agent=>"redsonic",
#  :st=>"upnp:rootdevice",
#  :usn=>"uuid:F00DBABE-SA5E-BABA-DADA188ED55ED539::upnp:rootdevice"
#} 
```

# mysql - 如何将 cakephp mysql 结果转换为简单数组

> ID：13289271
> 
> 赞同：0
> 
> 时间：2012-11-08T12:35:51.297
> 
> 标签：mysql, cakephp-2.0

```
App::import('model','User');
        $user_model = new User();
        $xxx = $user_model->find("all", array("fields"=>array("User.yyy")));
        $zzz = $user_model->find("count", array("fields" => "User.yyy"));
        $arr = array();
        for($i=0; $i<=$zzz; $i++){
                $rs = $xxx["i"]["User"]["yyy"];
                array_push($arr , $rs);
        }
        print_r($arr); 
```

我正在使用上面的 cakephp 代码来获取 $xxx 作为 mysql 结果集。

我需要将mysql表中与“yyy”字段对应的所有值存储到一个数组中。

我尝试打印结果集并得到如下输出：-

```
print_r($zzz)= 1646 // prints the total number of results
print_r($xxx[0]["User"]["yyy"]) = abcde   //the first element of the result set 
```

在我运行上面的代码之后，它只打印一个空数组。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:59:56.047

问题在这里：

```
$xxx["i"]["User"]["yyy"] 
```

它应该是：

```
$xxx[$i]["User"]["yyy"] 
```

假设代码位于控制器中，我会这样写：

```
$this->loadModel('User');
$arr = $this->User->find("list", array("fields"=>array("User.yyy"))); 
```

find("list") 应该返回一个由 id 索引的数组

如果要删除 ID，可以执行以下操作：

```
$arr = array_values($arr) 
```

# hibernate - Gwt Requestfactory bean更新问题

> ID：13289277
> 
> 赞同：0
> 
> 时间：2012-11-08T12:36:04.617
> 
> 标签：hibernate, gwt, requestfactory

我有一个很有趣的问题。我在服务器上设置了一些值，将 bean 发送到客户端，然后它在**没有这些值**的情况下返回服务器。

这是我所做的：
1\. 客户端通过 EntityRequest.getEntity(params) 从数据库请求一些 bean
2\. 我通过 Hibernate 从数据库中获取一个 bean
3\. 我设置了一些临时属性（我需要它们在客户端并且不想要它们存储在 DB 中）
4\. 通过 EntityRequest 的方法将 bean 发送到客户端。
5\. 客户端更改了一些其他值并且调用仍然存在。
6\. 服务器接收回他的 bean 并且
- 已从客户端正确设置属性
-**从服务器设置的属性（第 3 步）是 ERASED / IGNORED**。

看起来 RF 机制会向我发送仅来自客户端的更改的新数据库加载版本。我做了一些研究，看起来一定有一些 bean 版本问题。bean 有版本集（见下文），它被 Hibernate 使用，我猜 RF 也使用它。

我应该怎么做才能让我的价值回馈给客户并得到回报？我尝试了一些“entity.version++;” 在第 3 步，但它不起作用。

```
@Entity
public class Person {

    @Id
    @GeneratedValue
    private Long id;

    @Version
    private Integer version;

    @Field
    private String name;

    @Transient
    private Long participationId;

    ...

    public Long getId() {
        return id;
    }

    public Integer getVersion() {
        return version;
    }

    ...
}

public static Person findPerson(Long id) {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    try {

        Object p = session.get(Person.class, id);
        session.getTransaction().commit();

        return p != null ? (Person) p : null;

    } catch (RuntimeException e){
        logger.error("Person.findPerson", e);
        session.getTransaction().rollback();
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:14:12.280

在 Thomas Broyer 的帮助下，我更了解了 RequestFactory 机制，这使我找到了解决方案。RequestFactory 在从客户端返回对象时不会将域对象从缓存中取出，而是获取新的对象并对其进行比较。提取是使用定位器或域对象的 find(id) 函数完成的。在我的情况下是find（id）。

我知道，解决方案是一个丑陋的黑客，但它有效。这是我的实体

```
public class Person {
...
@Transient
private Long participationId;

@Transient
private Long participationStoreId;
...
} 
```

在我将它发送到 RF 之前，我加载了participationId。在客户端，为了保留它，在发回之前我会这样做：

```
person.setParticipationStoreId(person.getParticipationId()); 
```

在你向我扔鸡蛋之前，我再说一遍：我知道这是一个丑陋的黑客。但在某些情况下，我需要对客户端和返回的实体有一些价值，我不希望它在数据库中。这是唯一可行的方法。

# jquery-ui - 手机相册

> ID：13289279
> 
> 赞同：0
> 
> 时间：2012-11-08T12:36:17.950
> 
> 标签：jquery-ui, jquery, jquery-mobile

我必须为我的移动应用程序制作相册。我正在使用 ajax 调用从本地数据库中获取相册的图像。我已经使用了许多“jquery mobile”插件。但是任何一个都不起作用。所以任何人都有很好的例子和解决方案，请建议我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:43:09.280

在移动相册中使用 Ajax 的真正优势是什么？

无论如何，我发现了一些照片画廊（一两个不是基于 jquery-mobile）：

[http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/](http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/)

[http://neteye.github.com/touch-gallery.html](http://neteye.github.com/touch-gallery.html)

[http://www.photoswipe.com/](http://www.photoswipe.com/)

[http://www.digicrafts.c​​om.hk/components/JSMobilePhotoAlbum](http://www.digicrafts.com.hk/components/JSMobilePhotoAlbum)

或者，您可以： 1\. 将相册创建为列表项。2\. 在相册视图中显示照片的缩略图 3\. 单击缩略图 = 使用后退按钮全屏显示照片。

祝你好运 ：）

# jquery - 在不覆盖自身的情况下转换个人价值

> ID：13289284
> 
> 赞同：1
> 
> 时间：2012-11-08T12:36:35.537
> 
> 标签：jquery, css, transform

我想为不会覆盖自身的单个转换值创建 css 钩子，因此：

```
$(selector).css('rotateY',-20);
$(selector).css('rotateX',80); 
```

会变成这样（应用正确的前缀）：

```
-webkit-transform: rotateY(-20deg) rotateY(80deg); 
```

我找到了转换 csshooks，但它们并没有完全满足我的要求： [https](https://github.com/louisremi/jquery.transform.js) ://github.com/louisremi/jquery.transform.js 虽然这些 css 钩子似乎做了很好的跨浏览器工作（甚至 IE），但它们不允许单独的转换而不必编写整个转换（使用旧值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T12:06:23.257

你走在正确的轨道上......使用[`cssHooks`](https://api.jquery.com/jQuery.cssHooks/)是扩展/覆盖jQuery应该如何处理获取和设置css属性的常用方法。

这是一个非常非常……简单的例子，说明如何做到这一点：

```
function createTransformHook(transformFunction, unitless) {
  var transformProperty = 'transform', transformList

  $.cssHooks[transformFunction] = {
    get: function(elem) {
      return ($.data(elem, transformProperty) || {})[transformFunction]
    },
    set: function(elem, value) {
      transformList = $.data(elem, transformProperty) || {}
      transformList[transformFunction] = value
      $.data(elem, transformProperty, transformList)
      $.style(elem, transformProperty, $.map(transformList, function(value, key) {
        return key + '(' + value + ')'
      }).join(' '))
    }
  }

  $.fx.step[transformFunction] = function(fx) {
    $.cssHooks[transformFunction].set(fx.elem, fx.now + fx.unit)
  }

  if (unitless) {
    $.cssNumber[transformFunction] = true
  }
} 
```

此函数接受[`transform-function`](https://api.jquery.com/jQuery.cssHooks/)和 可选的第二个参数，将其声明为无单位属性（不要自动添加`'px'`）。它还将属性添加到全局`jQuery.fx.step`对象，从而可以使用 jQuery 的默认动画函数对值进行动画处理。

您可以按如下方式使用它：

```
createTransformHook('translateX')
createTransformHook('translateY')
createTransformHook('rotateX', true)
createTransformHook('rotateY', true)
createTransformHook('rotate', true)
createTransformHook('scaleX', true)
createTransformHook('scaleY', true)
createTransformHook('scale', true)
// etc... 
```

...然后像任何其他 css 属性一样编写您的转换：

```
$(selector).css({
  translateX: '-50%',
  translateY: '-50%',
  rotate: '45deg'
}) 
```

# [https://fiddle.jshell.net/88w1b2qq/](https://fiddle.jshell.net/88w1b2qq/)

*如前所述，它真的很简单和幼稚，只是一个例子......*

* * *

### `$.cssHooks[transformFunction]`

> 直接挂钩到 jQuery 以覆盖特定 CSS 属性的检索或设置方式、规范 CSS 属性命名或创建自定义属性。

### `$.fx.step[transformFunction]`

> css hook 也可以通过向 jQuery.fx.step 对象添加属性来挂钩到 jQuery 的动画机制

### `$.cssNumber[transformFunction]`

> 一个对象，包含可以在没有单元的情况下使用的所有 CSS 属性。.css() 方法使用此对象来查看它是否可以将 px 附加到无单位值

## 潜得更深

*   [http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)（从这里开始！）
*   [https://github.com/brandonaaron/jquery-cssHooks](https://github.com/brandonaaron/jquery-cssHooks)
*   [https://github.com/zachstronaut/jquery-animate-css-rotate-scale/](https://github.com/zachstronaut/jquery-animate-css-rotate-scale/)
*   [https://github.com/metafizzy/isotope/blob/a2a238968347199842dd7e2d552741d5a63c90b9/jquery.isotope.js](https://github.com/metafizzy/isotope/blob/a2a238968347199842dd7e2d552741d5a63c90b9/jquery.isotope.js)
*   [http://awardwinningfjords.com/2011/05/06/trigger-css3-animations-with-jquery.html](http://awardwinningfjords.com/2011/05/06/trigger-css3-animations-with-jquery.html)
*   [http://blog.bigbinary.com/2010/01/25/how-animate-really-works-in-jquery-simple-animation-case-discussed.html](http://blog.bigbinary.com/2010/01/25/how-animate-really-works-in-jquery-simple-animation-case-discussed.html)

# ios - 我们可以在不启动我们的应用程序的情况下从推送通知中以某种方式打开应用程序商店或 safari 吗？

> ID：13289287
> 
> 赞同：1
> 
> 时间：2012-11-08T12:36:53.773
> 
> 标签：ios, push-notification

我几乎可以肯定我们不能，但我找不到女巫会直接说出来的文档——“不，我们不能”我知道 push 可以打开我们的应用程序，我们可以处理来自 push ductionary 的信息。但我需要确保我们不能在不启动我们的应用程序的情况下通过推送打开 App Store 或 Safari（通过链接）。对不起，愚蠢的问题。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:22:11.843

不，你不能。来自您的应用程序的推送消息将打开您的应用程序或不执行任何操作。在您的应用程序打开后，您当然可以打开任何其他应用程序。

# algorithm - 遍历具有多个未知权重边的图的最快方法

> ID：13289288
> 
> 赞同：3
> 
> 时间：2012-11-08T12:36:55.293
> 
> 标签：algorithm, graph, shortest-path, graph-traversal

给定一个无向正加权图**G ，** **G**的一些边具​​有未知权重。例如，

![在此处输入图像描述](../Images/56cd3e8a27bdd03f179b265fe2b1323d.png)

其中**边缘（B，C）**的权重未知。

**从A**穿越到**B**花费你**7**。我们可以通过从**B**遍历到**C来推导出未知的权重****e = weight(B,C)** ，反之亦然，并花费你**e**，最终成为一个已知的权重。从**A**走到**C**通过**B**总共花费你**e+7**。

 ******我的问题是，**当给定一个起点时，我们能以多快的速度获得所有未知的重量？**也就是说，以尽可能小的成本从起点（例如**A ）遍历所有未知的权重边。**

未知权重的个数为**1**的情况很简单。您可以先找出从起点到所需边的顶点的最短路径，然后遍历未知权重边。但是，当未知权重边的数量大于 1 时，我不知道如何解决。

谁能弄清楚如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:50:48.680

无法提供完整的解决方案，但它看起来与旅行商问题有关，其中未知边是要访问的节点。

但是我认为您无法先验地找到最佳解决方案。考虑这个例子

```
a-b = 1
b-c = ?
b-d = ?
a-d = 10 
```

如果`b-c`权重较低（例如 1），则从开始的最短路径`a`是`a-b-c-b-d`遍历`b-c`两次。如果`b-c`权重较高（例如 100），则最短路径变为`a-d-b-c`，宁愿使用更便宜的连接`a-d`而不是遍历`b-c`两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:40:48.100

您可以创建第二个图 1 `G'`，这将是相同的 - 但没有“未知边” ¹。然后，您可以使用 all to all 最短路径算法，并使用算法中的数据来填补空白。

[Floyd Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)提供了一条全对全的最短路径。`O(n³)`

* * *

(1) 形式上：`G'=(V,E',w')`其中：
`E' = { e | e is in E and w(e) != ? }`
`w'(e) = w(e) if w(e) != ?`******

# python - Python: subprocess.communicate(): ValueError with print() function but not "print" builtin

> ID：13289291
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:06.373
> 
> 标签：python, printing, subprocess, popen

我正在尝试使用 subprocess 模块从 Python 运行 C 程序，将其输出捕获到变量中。代码如下所示：

```
process = Popen(["myprog", str(length), filename], stdout=PIPE, stderr=PIPE)
#wait for the process
result = process.communicate()
end=time()
print result 
```

上面的代码有效 -`result`显示为`myprog`'s stdout 输出和 stderr 输出（作为字符串）的 2 元组。

...*但是*，如果我更改`print result`为`print(result)`...

```
Traceback (most recent call last):
  File "tests.py", line 26, in <module>
    print(result)
ValueError: I/O operation on closed file 
```

我完全被难住了，我什至不知道从哪里开始尝试解释这个！当然，我的程序无论如何都可以工作，但我真的很想知道为什么会这样，希望这将是一个有趣的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:45:02.783

这*不是*Python 问题。你有问题`myprog`，而不是 Python。

`print something`在 Python 2 中，和之间的区别`print(something)`是无效的。完全*没有*区别，因为 Python 编译器将括号视为无操作，并且生成的字节码完全相同：

```
>>> import dis
>>> def foo(): print 'bar'
... 
>>> dis.dis(foo)
  1           0 LOAD_CONST               1 ('bar')
              3 PRINT_ITEM          
              4 PRINT_NEWLINE       
              5 LOAD_CONST               0 (None)
              8 RETURN_VALUE        
>>> def foo(): print('bar')
... 
>>> dis.dis(foo)
  1           0 LOAD_CONST               1 ('bar')
              3 PRINT_ITEM          
              4 PRINT_NEWLINE       
              5 LOAD_CONST               0 (None)
              8 RETURN_VALUE 
```

# php - XML / PHP - 如果搜索响应为空

> ID：13289293
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:10.320
> 
> 标签：php, xml

我有一个功能，当您搜索邮政编码或机场时，它会在文本框中显示一组结果，如下所示（它应该如何工作）：

![在此处输入图像描述](../Images/e858cb110106c2a0cddd3fc991d4cb61.png)

这工作正常，直到我在地址搜索中放置一些“随机”的东西，并且由于某种原因，即使搜索列表中没有结果，它仍然会填充下拉菜单（见下文）：

![在此处输入图像描述](../Images/d11b22677dadb7d6f19355943802d24f.png)

从上面的搜索中，在萤火虫控制台中，我得到以下响应：

`No results found, please try a different post code.)`

以及以下 XML 响应：

`XML Parsing Error: syntax error Location: moz-nullprincipal:{90e67c6c-c3a7-497c-a4df-6045472afde6} Line Number 1, Column 1:`

`No results found, please try a different post code.`

下面是代码：

```
public static function getAddressByPostcode($postcode) {

    $addressArray = array();

    $uri = 'http://[ipaddress]:[port]/?pc='.$postcode; // Send to Computer

    $response = CurlController::request($uri);

    if ($response != false) {

        // Clean html
        $response = strip_tags($response);

        $deserializedAddressArray = unserialize($response); 

        // Get result set count
        self::set_resultcount(count($deserializedAddressArray));

        if (self::get_resultcount() > 0) {

            foreach ($deserializedAddressArray as $address) {

                if(!isset($address['company']) || $address['company'] == '') {
                    $address['company'] = '';
                    $addr_cat = 1;
                } else {
                    $addr_cat = 2;
                }

                if(!isset($address['no'])) $address['no'] = '';
                if(!isset($address['street'])) $address['street'] = '';
                if(!isset($address['locality'])) $address['locality'] = '';
                if(!isset($address['town'])) $address['town'] = '';
                if(!isset($address['postcode'])) $address['postcode'] = '';

                if(!isset($address['Longitude'])) {
                    $address['Longitude'] = '';
                } else {
                    $address['Longitude'] = ($address['Longitude'] / 1000) / 3600;
                }

                if(!isset($address['Latitude'])) {
                    $address['Latitude'] = '';
                } else {
                    $address['Latitude'] = ($address['Latitude'] / 1000) / 3600;
                }

                $addressObject = new Address($addr_cat,$address['company'],$address['no'],$address['street'],
                                             $address['locality'],$address['town'],$address['postcode'],
                                             $address['Latitude'],$address['Longitude']);

                ## Swapped lat and long around as field spec on response is wrong

                ## TODO - Add validation for address object

                // Add address into addresses array
                array_push($addressArray,$addressObject);

            }

            self::getAddressesAsXML($addressArray);

        } else {

            self::$text_response .= "No results found, please try a different post code. \r\n";
            echo self::$text_response;

        }

    } else {

        self::$text_response .= "Address server is taking too long to respond, please try again later. \r\n";
        echo self::$text_response;

    }

} 
```

如果有人可以帮助我，将不胜感激。我似乎无法弄清楚为什么它填充一个空数组而不显示错误警报消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:51:45.337

您检查是否有任何结果： if (self::get_resultcount() > 0) { } 当您关闭该 IF 语句时，您有 self::getAddressesAsXML($addressArray);

当你没有结果时，我认为 xml array thingy 不起作用，也许你应该将它添加到 IF 语句中。

我不确定这是否可行！值得一试

# javascript - 未终止的字符串常量 Jquery

> ID：13289295
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:19.337
> 
> 标签：javascript, jquery, ajax, internet-explorer

我知道“未终止的字符串常量”是什么意思。我也已经解决了所有相关问题，但在我的情况下找不到任何解决方案。

我在我的网页上广泛使用 jQuery 1.7。我也有很多 javascript 函数。我已经在许多不同的环境中安装了我的文件，但从未收到此错误。在 IE 开发人员工具中调试我的 javascript 函数后，我看到代码在我的任何 javsacript 函数中都没有中断。但是当一切都结束时，会调用 jQuery1.7.js 并在执行所有内部函数调用后出现此错误。

我也尝试并监视了 jquery 变量，但无法指出代码可能因此类错误而中断的任何特定位置。有谁知道我应该在哪里检查我的代码？我认为当我进行ajax调用时，错误出现在最后，调用完成后和成功函数完成后。但是，我不知道为什么。

我不知道有什么更好的词来表达我的问题，如果您需要更多信息，请告诉我。

谢谢c

# java - Swing：JList 选择卡在列表项上

> ID：13289296
> 
> 赞同：1
> 
> 时间：2012-11-08T12:37:20.040
> 
> 标签：java, swing, user-interface, jlist, listselectionlistener

我在 JList 类中发现了这种间歇性行为。如果您按照它们显示的顺序（即从上到下）选择列表中的项目，则没有问题。但是，如果您要选择的项目不位于您先前选择的项目的正下方，则光标会跳到它希望您选择的项目，即它会卡在列表中的项目上。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:45:02.543

*   请参阅 Oracle 教程 [如何编写列表选择侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)

*   有

    a) 单选模式

    b) 单区间选择模式

    c) 多区间选择模式

*   其余在教程[如何使用列表中进行了描述](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

*   可能你搜索`multiple interval selection mode`

# javascript - 将文本文件中的 x 和 y 坐标作为某些点位置的像素动态加载到 html 页面中

> ID：13289297
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:21.400
> 
> 标签：javascript, python, html, database, maps

我需要获取一个区域地图的网页。我试图通过将该区域的地图图像加载到网页上来做到这一点，就像您在我附加的 png 文件中看到的那样定位点，并按照我的喜好做更多的事情。

假设该区域基本上有 6 个站点，如下面的文本文件所示，

```
#
# some sensor network
#
SN.field_x = 5000 
SN.field_y = 2000
SN.numNodes = 6
# Name: station1 type: antenna1
SN.node[0].xCoor = 1000
SN.node[0].yCoor = 800 
# Name: station2 type: antenna1
SN.node[1].xCoor = 2000 
SN.node[1].yCoor = 808 
# Name: station3 type: antenna2
SN.node[2].xCoor = 1800
SN.node[2].yCoor = 743 
# Name: station4 type: antenna2
SN.node[3].xCoor = 2061
SN.node[3].yCoor = 747 
# Name: station5 type: antenna3
SN.node[4].xCoor = 2325
SN.node[4].yCoor = 753
# Name: station6 type: antenna3
SN.node[5].xCoor = 1689
SN.node[5].yCoor = 681 
```

我需要根据该文本文件中的坐标数据在地图上以正确的位置显示这些站点。我必须根据这些 x 和 y 坐标定位地图上的每个点（这是一个图像）。我试图通过将 x & y 坐标作为像素硬编码到 css 脚本中来做到这一点，这为我提供了附加图片中的页面。但我需要动态加载它，因为这些站点将来可能会重新定位。有人告诉我，我可以使用 python，但我不知道它是如何工作的。我需要你的帮助来解决这个问题。谢谢。

![车站地图](../Images/13f1cbe4941a7f5e13bb16ba42db29b7.png)

**我的 HTML & CSS 现在添加在下面**

左侧和顶部像素值基于文本文件中的 x 和 y 坐标

```
<head>
<title>MAP</title>
<style type="text/css">
#menu{width:2997px;height:1471px;background-image:url(Map.png)}
#menu a{position:absolute;height:10px;width:10px;}
a#a1{left:974.1px;top:409.3px;border:solid 2px #0099cc} 
a#a2{left:1096.3px;top:404.1px;border:solid 2px #0099cc}
a#a3{left:901.7px;top:371.9px;border:solid 2px #0099cc} 
a#a4{left:1030.7px;top:373.9px;border:solid 2px #0099cc}
a#a5{left:1162.8px;top:376.3px;border:solid 2px #0099cc} 
a#a6{left:844.8px;top:340.7px;border:solid 2px #0099cc}

#menu a i{ visibility:hidden;}
</style></head>
<body>
<div id="menu">
<a id="a1"href="#"><i>Link 1</i></a>
<a id="a2"href="#"><i>Link 2</i></a>
<a id="a3"href="#"><i>Link 3</i></a>
<a id="a4"href="#"><i>Link 4</i></a>
<a id="a5"href="#"><i>Link 5</i></a>
<a id="a6"href="#"><i>Link 6</i></a>
</div></body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:16:39.247

您可以使用 CSS3 和 Canvas 在 Javascript 中执行此操作。另一种方法是，您实际上可以通过 CGI 脚本或类似的东西，例如小型 django 应用程序，用 python 制作一个新图像。这将为您生成您的图像，因此它的名称类似于：

```
<img src="http://some-domain.com/cgi/get_coorinates_on_image.py?file=the_test.txt"> 
```

它会返回一个格式正确的图像，或者您可以按照建议返回 CSS 文件，或者使用 javascript 对 cgi 或 django 实例进行 ajax 调用以获取位置的 json，然后您可以使用 javascript 在图像上定位位置.

编辑：

PIL，它已经过时但易于使用，非常适合您的情况。

[http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

Django，运行良好，带有基本的内置 HTTP 服务器和大量教程。

[https://www.djangoproject.com/](https://www.djangoproject.com/)

CSS3 和画布

[http://www.w3schools.com/tags/ref_canvas.asp](http://www.w3schools.com/tags/ref_canvas.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:25:28.450

现在我想出了一些东西..请看看它是否有用：（python脚本）

```
from collections import defaultdict # a mapping for station number to points

class Point(object):
    # der punkt mit xCoor yCoor
    pass

class SN:
    # the SN object in text file
    node = defaultdict(Point)

# read the text file
textFileContent = open('IDoNotKnowYourTextFileName.txt').read()

# in the next line you need to trust the other person - it executes the textfile 
# but only knowing SN
exec textFileContent in {'SN': SN}

# in the following lines you can output the html file you need:
print '''<head>
<title>MAP</title>
<style type="text/css">
#menu{width:2997px;height:1471px;background-image:url(Map.png)}
#menu a{position:absolute;height:10px;width:10px;}'''

for stationNumber, stationPoint in SN.node.items():
    x = stationPoint.xCoor
    y = stationPoint.yCoor
    # sorry, but I could not get how you derive the x,y-positions from yout html
    print 'a#a' + str(stationNumber) + '{left:' + str(x) + 'px;top:' + str(y) + 'px;border:solid 2px #0099cc}'

print '''
#menu a i{ visibility:hidden;}
</style></head>
<body>
<div id="menu">''' 
```

# matlab - Matlab中双数组的循环构造

> ID：13289299
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:25.040
> 
> 标签：matlab, loops

我有一个关于如何构建循环的问题。我有一个双数组，我想编写这个过程。

这是我要应用该过程的数组，长度为 4x4（我只做第一个，但原来是 4x4x3）。

```
b1= (:,:,1); 
```

我想申请这个过程的每一个价值：

1.- 每次创建一个向量，包含数组每个值的信息。

```
ma= 0;
 for p=(136:136)
 ma(p)=b1(1,1,1);
 end
 for p=(312:2151)
     ma(p)=0
 end
 ma= ma'; 
```

然后，我必须处理以下过程的最后一个结果（我之前已经定义了变量）。spout1_a= spb1y.ma; spout1_b=spout1_a./spsum_pesos1; spout1_c=总和（spout1_b）；

问题是我知道如何为一个值（第一个值）做到这一点，但不是全部。我该怎么做？

问候和非常感谢你，

艾玛

**编辑**

```
b1= Refl(:,:,1);

load sp1.txt;

spb1y= sp1(:,1);
spsum_pesos1= sum(spb1y);
output = cell(length(banda1), 5); % this works well

 for i = 1:numel(b1)
    ma = zeros(2151,1);
    ma(136) = output(i);
    spout1_a= spb1y.*ma;
    spout1_b= spout1_a./spsum_pesos1;
    spout1_c= sum(spout1_b); % I want to save that result on every value of the matrix
end 
```

我写这最后一部分好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:47:39.577

以下是在 MATLAB 中进行编码的一些提示：

1.  **Preallocate**：在循环之前分配内存，以便变量不会在循环内的维度上增长。这会导致 MATLAB 在每次迭代中动态分配内存，这通常会显着减慢执行时间。
2.  **Vecotrize**：尝试仅在必须的地方使用循环。在许多情况下，您可以改用矢量化操作，这要快得多。

话虽如此，你可以试试这个：

```
% # Iterate over each value in 'b1'
for i = 1:numel(b1)

    % # Create a vector 'ma'
    ma = zeros(2151, 1);
    ma(136) = b1(i);

    % # Do some more calculations with 'ma' ...
    spout1_a = ma;
    spout1_b= spout1_a ./ spsum_pesos1;
    spout1_c= sum(spout1_b);
end 
```

我不确定你想要实现什么，但这段代码完全符合问题的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:44:19.563

简单的解决方案是将索引 q 添加到每个变量，然后从 q=1:3 循环

```
b(q)= Matrix(:,:,q)
ma(p,q) 
```

等等

# sql - PostgreSQL - 作为表名的动态值

> ID：13289304
> 
> 赞同：29
> 
> 时间：2012-11-08T12:37:53.430
> 
> 标签：sql, postgresql, postgresql-9.1, dynamic-sql

> **可能重复：**
> [Postgres 动态查询函数](https://stackoverflow.com/questions/10639963/postgres-dynamic-query-function)

我希望将下面查询中返回的字符串用作其他查询的表名。

```
SELECT 'backup_' || TO_CHAR(CURRENT_DATE,'yyyy-mm-dd') 
```

如您所见，它返回一个字符串。我希望将其用作另一个查询的输入，例如

```
CREATE TABLE (SELECT 'backup_' || TO_CHAR(CURRENT_DATE,'yyyy-mm-dd')) 
AS * SELECT FROM backup 
```

可以做到吗？任何线索如何？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-08T13:33:53.650

您将需要通过块或 PL/PgSQL 函数 ( )使用[PL/PgSQL`EXECUTE`语句。](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html)PostgreSQL 使用的普通 SQL 方言不支持动态 SQL，仅在过程 PL/PgSQL 变体中支持。`DO``CREATE OR REPLACE FUNCTION ... LANGUAGE plpgsql`

```
DO
$$
BEGIN
EXECUTE format('CREATE TABLE %I AS SELECT * FROM backup', 'backup_' || to_char(CURRENT_DATE,'yyyy-mm-dd'));
END;
$$ LANGUAGE plpgsql; 
```

[`format(...)`function](http://www.postgresql.org/docs/current/static/functions-string.html)和format-specifiers 分别进行正确的标识符`%I`和`%L`文字引用。

对于文字，我建议使用`EXECUTE ... USING`而不是`format(...)`with `%L`，但对于像表/列名称这样的标识符，格式`%I`模式是冗长`quote_ident`调用的一个很好的简洁替代方案。

# android - Android 自定义网上银行支付

> ID：13289305
> 
> 赞同：0
> 
> 时间：2012-11-08T12:37:55.250
> 
> 标签：android

我正在开发一个 android 应用程序，以通过信用卡付款，以及通过银行账户（如 paypal）进行在线支付。

但我有一个问题，我不需要使用 paypal 或其他第三方 api 来进行在线支付。或者我可以自定义 paypal api 以在我的应用程序中隐藏它的屏幕。

如果可能，请任何人回复我。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:42:30.770

你不能隐藏贝宝屏幕。如果您想通过卡付款，请使用贝宝 MECL 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:43:45.040

你不能隐藏它的屏幕。用户通常不会向某些未知的支付系统付款，最好使用像 Paypal 这样的公认服务。当人们为东西付款时，他们会希望受信任的服务来处理他们的交易。

[您可以使用谷歌提供的应用内结算](http://developer.android.com/guide/google/play/billing/index.html)，而不是 Paypal 。这是所有开发人员使用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:47:26.457

如果用户不认识支付网关，他们会有点怀疑支付。拥有一个值得信赖的支付网关总是更好。您可以随时使用 Google 商家帐户进行[应用内结算](http://developer.android.com/guide/google/play/billing/index.html)。

# iphone - FBFriendPickerViewController - 使用之前选中的好友进行初始化

> ID：13289308
> 
> 赞同：3
> 
> 时间：2012-11-08T12:38:12.443
> 
> 标签：iphone, ios, xcode

我是朋友选择器的新手。我正在尝试将选定的朋友保存到数据库，并在重新加载朋友选择器时将这些朋友显示为选定的。到目前为止似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:03:19.637

“FBFriendPickerViewController”类的对象有一个名为“selection”的数组，其中包含选择的列表用户。尝试使用它在 NSUserDefaults 中存储选定的 FB id 并在下次获取。可能像下面这样。

```
NSMutableArray *arryOfFBIds = [[NSMutableArray alloc] init];
for (id<FBGraphUser> user in self.friendPickerController.selection) 
    [arryOfFBIds addObject:user.id];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject: arryOfFBIds forKey: @"SelectedFBIds"];
[defaults synchronize];

[arryOfFBIds release]; 
```

# html - 如何使用 Modernizr 让边界半径在 IE8 中工作？

> ID：13289309
> 
> 赞同：2
> 
> 时间：2012-11-08T12:38:16.107
> 
> 标签：html, css, modernizr

我知道有很多关于在 IE8 中获得圆角的文章。我的问题是，如何使用 Modernizr 来支持 CSS3/HTML5 功能？

例如在 IE8 中显示圆角，我使用 CSS-3 属性

```
-webkit-border-radius: 20px;
-moz-border-radius: 20px;
border-radius: 20px; 
```

我在我的页面中包含了 Modernizr，但在 IE8 中仍然无法看到圆角。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T12:45:39.707

Modernizr 不启用功能，它只是测试它们是否可用。对于 CSS，它还可以消除使用供应商特定属性的需要，例如`-moz-*`并`-webkit-*`允许您简单地使用标准属性：

```
.myElement {
    -webkit-border-radius: 20px; /* No need for this */
    -moz-border-radius: 20px;    /* No need for this */
    border-radius: 20px;
} 
```

对于 IE8 中的圆角，我不会打扰 Modernizr 功能检测，只需使用[CSS PIE](http://css3pie.com/)来启用它们。

```
.myElement {
    border-radius: 8px;
    behavior: url(/PIE.htc); /* only IE will use this */
} 
```

请务必阅读有关如何使其工作[的文档。](http://css3pie.com/documentation/)

附带说明一下，标准`border-radius`已经被 mozilla 和 webkit 浏览器支持了很长一段时间，您可能想检查一下您是否真的针对需要这些前缀的任何浏览器：http: [//caniuse.com/#search=边界半径](http://caniuse.com/#search=border-radius)（单击“显示所有版本”）

# c++ - 带有 C++11 lambda 的 C 函数指针

> ID：13289311
> 
> 赞同：6
> 
> 时间：2012-11-08T12:39:01.833
> 
> 标签：c++, c++11, gsl

所以我正在尝试编写一个与 c++11 lambdas 一起使用的集成函数。代码看起来像这样：

```
double Integrate(std::function<double(double,void*)> func, double a,double b,std::vector<double> & params)
{
  gsl_integration_workspace * w = gsl_integration_workspace_alloc (1000);
  gsl_function F;
  F.function =func;
  F.params = (void*)&params;
  double error,result;
  gsl_integration_qag (&F, a, b, 0, 1e-7, 1000,GSL_INTEG_GAUSS61,w, &result, &error);
  gsl_integration_workspace_free (w);
  return result;
}

void Another_function()
{
 //...
Integrate([](double a,void* param)
   {
   return ((vector<double> *)params)->at(0)*a+((vector<double> *)params)->at(1);
   }
   ,0,3,{2,3});
} 
```

试图编译这个，编译器说：

```
error: cannot convert ‘std::function<double(double, void*)>’ to ‘double (*)(double, void*)’ in assignment 
```

关于线

```
F.function =func; 
```

但如果我写：

```
F.function =[](double a,void* param)
   {
   return ((std::vector<double> *)param)->at(0)*a+((std::vector<double> *)param)->at(1);
   }; 
```

它编译并且工作正常。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:02:49.980

使用 void* 是典型的 C 回调接口将一些“状态”传递给函数。但是， std::function 不需要这个，因为 std::function 支持“有状态函数”。所以，你*可以*这样做：

```
double Integrate(
          std::function<double(double)> func,
          double a, double b)
{
    typedef std::function<double(double)> fun_type;
    :::
    F.function = [](double x, void* p){
        return (*static_cast<fun_type*>(p))(x);
    };
    F.params = &func;
    :::
} 
```

并将对参数向量的引用存储为函子的一部分，该函子将封装在 std::function 对象中，或者执行以下操作：

```
void Another_function()
{
    double m = 2;
    double b = 3;
    auto func = [&](double x){return m*x+b};
    auto r1 = Integrate(func,0,3);
    :::
} 
```

然而，这个解决方案将使用相当多的间接。GSL 会调用你的 lambda。您的 lambda 将调用 std::function<>::operator() ，而后者又会调用某种用于类型擦除的虚函数，而该虚函数又会调用实际的计算。

所以，如果你关心性能，你可以去掉那里的几个层，特别是 std::function。这是另一种使用函数模板的方法：

```
template<class Func>
double Integrate(
          Func func,
          double a, double b)
{
    :::
    F.function = [](double x, void* p)->double{
        return (*static_cast<Func*>(p))(x);
    };
    F.params = &func;
    :::
} 
```

我想我更喜欢这个而不是 std::function 解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T23:14:32.987

如果您需要将 lambda 函数与捕获集成（在这种情况下，没有转换为原始指针），并且如果您不希望有与 std::function 相关的性能损失（正如 sellibitze 所指出的那样 - 请参阅[std ::function vs template](https://stackoverflow.com/questions/14677997/stdfunction-vs-template/15015502#15015502)），您可以使用以下包装器

```
 template< typename F >  class gsl_function_pp : public gsl_function {
 public:
 gsl_function_pp(const F& func) : _func(func) {
   function = &gsl_function_pp::invoke;
   params=this;
 }
 private:
 const F& _func;
 static double invoke(double x, void *params) {
 return static_cast<gsl_function_pp*>(params)->_func(x);
 }
 }; 
```

这是一个测试代码，展示了如何使用它

```
 double a = 1;
 auto ptr = [=](double x)->double{return a*x;};
 gsl_function_pp<decltype(ptr)> Fp(ptr);
 gsl_function *F = static_cast<gsl_function*>(&Fp); 
```

如果你真的想使用 std::function，那么你可以使用这个版本的包装器

```
class gsl_function_pp : public gsl_function
{
   public:
   gsl_function_pp(std::function<double(double)> const& func) : _func(func){
   function=&gsl_function_pp::invoke;
   params=this;
   }     
   private:
   std::function<double(double)> _func;
   static double invoke(double x, void *params) {
   return static_cast<gsl_function_pp*>(params)->_func(x);
   }
}; 
```

这种情况下的测试代码就更简单了

```
double a = 1;
gsl_function_pp Fp([=](double x)->double{return a*x;}); 
gsl_function *F = static_cast<gsl_function*>(&Fp); 
```

这些包装器的好处是它们也可以用于集成类成员函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T13:24:19.890

最好将`void *`转换封装在包装函数中：

```
double Integrate(std::function<double(double)> func, double a, double b)
{
  gsl_integration_workspace * w = gsl_integration_workspace_alloc (1000);
  gsl_function F;
  F.function = [](double a, void *param) {
    return (*static_cast<std::function<double(double)> *>(param))(a); };
  F.params = (void*)&func;
  double error,result;
  gsl_integration_qag (&F, a, b, 0, 1e-7, 1000,GSL_INTEG_GAUSS61,w, &result, &error);
  gsl_integration_workspace_free (w);
  return result;
}

void Another_function()
{
  //...
  std::vector<double> params = {2, 3};
  Integrate([params](double a) { return (params[0]*a+params[1]; }, 0, 3);
} 
```

这里有一定数量的过度间接（通过`std::function`），但 CPU 的分支预测器将能够很好地执行，因为间接将始终指向相同的 lambda。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T13:04:18.933

A`std::function<>`不能转换为函数指针。`std::function<>`是可以保持状态的函数对象，而常规函数是无状态的（有点，你可能有`static`变量，但那是另一回事）。

另一方面，*无状态*lambda*可以*转换为函数指针，因此您可能会更改函数的签名以直接获取函数指针，并且 lambda 将被转换：

```
double Integrate(double(*func)(double,void*), double a, double b, 
                 std::vector<double> & params) // !!!

std::vector<double> p{2,3};
Integrate([](double a,void* param)
   {
      std::vector<double> *p = static_cast<std::vector<double>*>param;
      return p->at(0)*a+p->at(1);
   }
   ,0,3,p); 
```

请注意，将*右值*绑定到非常量引用是非法的，因此您不能合法地将`{2,3}`其作为最后一个参数传递给`Integrate`（即使 Visual Studio 允许），您需要创建一个命名变量。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-08T13:00:18.830

看起来 gsl 库需要一个函数指针。未捕获的 lambda 可以转换为函数指针。任何 lambda 都可以转换为`std::function`. 但是 a`std::function`不能转换为函数指针。

你可以试试：

```
struct functor_and_params {
  std::function<double(double, void*)> f;
  void* params;
  static double invoke(double x, void* ptr) {
      functor_and_params& f_and_p = *reinterpret_cast<functor_and_params*>(ptr);
      return f_and_p.f(x, f_and_p.params);
  }
};

double Integrate(std::function<double(double,void*)> func,
                 double a,double b,std::vector<double> & params) {
    functor_and_params f_and_p{ func, &params };
    gsl_function F;
    F.function = &functor_and_params::invoke;
    F.params = &f_and_p;
    //...
 } 
```

# cmake - CMake 检查是否调用了主项目

> ID：13289314
> 
> 赞同：5
> 
> 时间：2012-11-08T12:39:25.153
> 
> 标签：cmake

我有这种项目目录设计：

```
Main:
    CMakeLists.txt
    subproject1:
         CMakeLists.txt   
    subproject2
         CMakeLists.txt 
```

如果 subproject1 cmake 被主项目调用，或者作为独立项目调用，我如何检查 subproject1/CMakeLists.txt 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T13:41:01.310

干得好：

```
if( CMAKE_SOURCE_DIR STREQUAL CMAKE_CURRENT_SOURCE_DIR )
# We are building as stand-alone project
project(subproject1)
...
else()
# We are building as part of Main project
endif() 
```

# c - sprintf 使用 %.s

> ID：13289315
> 
> 赞同：4
> 
> 时间：2012-11-08T12:39:50.617
> 
> 标签：c, printf

像这样使用 sprintf

```
sprintf("%.40s",str); 
```

我想给出一个类似 strlen(str) 的值来代替 40。我该怎么做？我尝试用 strlen(str) 替换 40，不起作用。给出一个像

```
#define len strlen(str) 
```

并且使用 %.len 也不起作用，因为 %.len 在“”中使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T12:41:16.823

使用`*`字符。

```
sprintf(/* ... */, "%.*s", (int) strlen(str), str); 
```

如果你用C99，`snprintf`也可以适合。

> **man printf (3)**
> 宽度不在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T14:31:30.160

正如 GajananH 指出的那样，这是一个毫无意义的努力：

为了`strlen`工作，`str`必须以 NULL 终止。

如果`str`是 NULL 终止，则：

```
sprintf(str2, "%.*s", strlen(str), str); 
```

只是过于复杂：

```
sprintf(str2, "%s", str); 
```

这本身就是一个过于复杂的问题：

```
strcpy(str2, str); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T13:01:53.327

我真的不明白使用`strlen()`. 如果`strlen()`对您有用，则意味着您的字符串以 NULL 结尾，并且如果字符串以 NULL 结尾，则没有真正使用为`%s`（除非您尝试使用小于字符串长度的数字。

如果您的字符串不是以 NULL 结尾的，那么`strlen()`将返回错误的值，并且使用该值`%s`将无济于事。

相反，我建议您使用[**strnlen**](http://linux.die.net/man/3/strnlen) () 并限制字符串长度，并将返回值用于`%s`.

# java - 从 java 中使用 groovy.util.AntBuilder

> ID：13289316
> 
> 赞同：1
> 
> 时间：2012-11-08T12:39:55.687
> 
> 标签：java, ant, groovy

在 groovy 中，groovy.util.AntBuilder 可用于例如。将文件解压缩到文件夹中：

```
 AntBuilder ant = new AntBuilder();
  ant.unzip(src: file.getPath(), dest: outputFolder.getPath()); 
```

现在我想做同样的事情，但来自 java。不能直接调用解压缩。我假设这就是 invokeMethod 的用途：

```
 AntBuilder ant = new AntBuilder();
  String[] args = new String[4];
  args[0] = "src";
  args[1] = file.getPath();
  args[2] = "dest";
  args[3] = outputFolder.getPath();
  ant.invokeMethod("unzip", args); 
```

以上给出：

```
 No signature of method: groovy.util.AntBuilder.unzip() is applicable for argument types: (java.lang.String, java.lang.String, java.lang.String, java.lang.String) values: 
```

有任何想法吗？

我曾尝试在 google 文档/示例中使用 java 中的 AntBuilder，但我只找到了从 groovy 中使用它的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:45:48.983

对，拿起电脑试一试：

给定这个 Java 类：

```
import groovy.util.AntBuilder ;
import java.io.File ;
import java.util.HashMap ;

public class Test {
  public static void main( String[] args ) throws Exception {
    if( args.length != 2 ) {
      System.err.println( "Need 2 args.  Input zip file and output folder" ) ;
      System.exit( 1 ) ;
    }
    final File file = new File( args[ 0 ] ) ;
    final File outputFolder = new File( args[ 1 ] ) ;
    AntBuilder ant = new AntBuilder() ;
    ant.invokeMethod( "unzip", new HashMap() {{
      put( "src", file.getPath() ) ;
      put( "dest", outputFolder.getPath() ) ;
    }} ) ;
  }
} 
```

然后你可以编译它：

```
javac -cp $GROOVY_HOME/embeddable/groovy-all-2.0.5.jar Test.java 
```

然后运行：

```
java -cp $GROOVY_HOME/lib/*:. Test /path/to/zip /destination/folder 
```

它应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T08:02:58.203

```
import groovy.lang.Closure;
import groovy.util.AntBuilder; 
```

...

```
final AntBuilder ant = new AntBuilder();
ant.invokeMethod("echo", "copy & sync gestartet...");

ant.invokeMethod("sync", new Object[] { new HashMap<String, String>() {
  {
    this.put("todir", "./myordner2");
    this.put("verbose", "yes");
  }
}, new Closure<Object>(null) {
  @Override
  public Object call(Object... args) {
    ant.invokeMethod("fileset", new Object[] {
        new HashMap<String, String>() {
          {
            this.put("dir", "c:/myordner1/test");
          }
        }});
    return null;
  }
} }); 
```

我找到了这个解决方案。;-)

# c# - C# Linq to XML 添加、更新、删除

> ID：13289320
> 
> 赞同：3
> 
> 时间：2012-11-08T12:40:55.257
> 
> 标签：c#, xml, linq

我有这个代码

```
 XElement newClient= new XElement("Client",
            new XElement("Name", cmbClient.Text),
            new XElement("Service",
                new XElement("ServName", cmbService.Text)));
        xmlDoc.Add(newClient);
        xmlDoc.Save("Settings.xml"); 
```

这创造了这个

```
<?xml version="1.0" encoding="utf-8"?>
<Clients>
  <Client>
    <Name>Client Name</Name>
    <Services>
      <ServName>Service Name</ServName>
    </Services>
  </Client>
</Clients> 
```

如果我再次按下 Button1，那么它将创建另一个客户端部分，没关系，但我想要的是：

1.  如果**不**存在，则创建一个新的客户端部分。
2.  如果 Client 存在，则**向其添加**ServName，而不是替换已有的。
3.  如果客户端上已经存在服务，则什么也不做，因为已经存在。

有什么线索吗？我从 linq to xml 开始......谢谢你的建议！

编辑：由 Dmitry Dovgopoly 和 Leon Newswanger 提供的 mixin 答案提供的解决方案，谢谢两位！:D

```
XDocument xDoc = XDocument.Load("Settings.xml");
var Clients =
    from client in xDoc.Root.Elements("Client")
    where client.Element("Name").Value == cmbClient.Text
    select client;
if (Clients.Count() > 0)
{
    var Client =
        (from client in xDoc.Root.Elements("Client")
        where client.Element("Name").Value == cmbClient.Text
        select client).Single();
            if (Client.Element("Services").Elements().Count(el => el.Value == cmbService.Text) == 0)
            {
                Client.Element("Services").Add(new XElement("ServName", cmbService.Text));
            }
}
else
{
    XElement newClient = new XElement("Client",
        new XElement("Name", cmbClient.Text),
        new XElement("Services",
            new XElement("ServName", cmbService.Text)));
    xDoc.Root.Add(newClient);
}
xDoc.Save("Settings.xml"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:37:11.137

您可以使用`XElement.Element(name)`方法获取特定元素或`XElement.Elements()`枚举所有元素。

```
if (xmlDoc.Elements("Client").Count() == 0)
{
    //Client section does not exist. We add new section.
    XElement newClient = new XElement("Client",
        new XElement("Name", mbClient.Text),
        new XElement("Service",
    new XElement("ServName", cmbService.Text)));
    xmlDoc.Add(newClient);
}
else //Client section exists.
{
    //obtain <service> section
    XElement service = xmlDoc.Element("Client").Element("Service");

    if (service.Elements().Count(el => el.Value == cmbService.Text) == 0)
    { 
        //there is no service with name cmbService.Text. We add one.
        service.Add(new XElement("ServName", cmbService.Text));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:18:54.843

你可以试试：

```
bool checkClientElement = xmlDoc.Descendants("Client").Any();

if (!checkClientElement)
{
    XElement newClient= new XElement("Client",
         new XElement("Name", mbClient.Text),
         new XElement("Service",
         new XElement("ServName", cmbService.Text)));
    xmlDoc.Add(newClient);
    xmlDoc.Save("Settings.xml");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:54:55.933

根本没有经过测试，但应该可以工作。

```
 System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
            xmlDoc.Load("Settings.xml");
            if (xmlDoc.SelectNodes("/Clients/Client").Count <= 0)
            {
                XElement newClient = new XElement("Client",
           new XElement("Name", cmbClient.Text),
           new XElement("Service",
               new XElement("ServName", cmbService.Text)));
                xmlDoc.Add(newClient);
                xmlDoc.Save("Settings.xml");
            }
            else
            {
                //find Service tag and add a new child element here
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T17:55:42.877

这是经过测试和工作的：

```
 XDocument xDoc = XDocument.Load("Settings.xml");
    var Clients =
        from client in xDoc.Root.Elements("Client")
        where client.Element("Name").Value == cmbClient.Text
        select client;
    if (Clients.Count() > 0)
    {
        var Client =
            (from client in xDoc.Root.Elements("Client")
            where client.Element("Name").Value == cmbClient.Text
            select client).Single();
        if (Client.Elements("Services").Count() == 0)
        {
            Client.Add(
                new XElement("Services",
                    new XElement("Service", cmbService.Text)));
        }
    }
    else
    {
        XElement newClient = new XElement("Client",
            new XElement("Name", cmbClient.Text),
            new XElement("Services",
                new XElement("ServName", cmbService.Text)));
        xDoc.Root.Add(newClient);
    }
    xDoc.Save("Settings.xml"); 
```

注意：如果 cmbService 为空，它仍将创建服务，但作为一个空标签。如果您打算使用它来读取和写入可能存在空值的情况，则必须在某个时候检查它们。

# php - 会员网站建立，我如何扩展用户权限级别？

> ID：13289328
> 
> 赞同：1
> 
> 时间：2012-11-08T12:41:34.080
> 
> 标签：php, logic, membership

嗨，我最近建立了一个会员网站。我可以从管理员 Ex 更改用户权限。用户类型 (1) 在帐户到期前每周最多可以联系 (x) 人……然后他们将被扔到付款页面。

现在我可以操纵各种权限级别......我没有意识到的一件事就是这个。如果一个成员注册了怎么办：

中间包......用户每天可以联系（5）人。

现在，如果下个月我说我想让中间包每天有（2）人呢？

我很确定新的变化会反映旧成员？所以他们支付 19.99 美元每天联系 5 个人，但现在我改为每天联系 2 个人？我想我没有想到，解决这个问题的正确方法是什么？

此外，它如何与会员网站的定价一起工作？我不相信如果我操纵定价，它将进入并通过我的支付网关实际更改旧会员的定价，但是否需要将其放入 TOS 中，即他们必须支付他们最初同意的价格，而不管以后是否减少？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:44:36.567

解决方案是：

1.  使用当前活动的参数，在单独的数据库表中当场记录所有付款，或者
2.  每次更改任何参数时创建一个新组（产品线、支付包、您命名）

如果您还没有这样做，您应该使用某种形式的 RBAC 或 ACL，解决方案 2) 可以更好地扩展。

Zend 框架（可能还有任何其他主要框架）具有某种用于授权控制的类、RBAC 或 ACL（或某种）。

# mysql - 从相关表中插入具有给定值和值的多行

> ID：13289331
> 
> 赞同：0
> 
> 时间：2012-11-08T12:42:34.513
> 
> 标签：mysql, sql

我有一个像这样的大型插入查询：

```
INSERT INTO video_tags
  (vid_id, tag_id)
VALUES
  (1,7),
  (2,46),
  (2,52) Etc. Etc. 
```

但是我没有要插入的 tag_ids，只有标签字符串。因此，我需要在插入它们时查找标签 ID。标签存储在具有两列的查找表中：

```
+-----+---------+
| id  | int     |
| tag | varchar |
+-----+---------+ 
```

我想做这样的事情：

```
INSERT INTO video_tags
  (vid_id, tag_id)
VALUES
  (1, SELECT id FROM tags WHERE tag = 'banana'),
  (2, SELECT id FROM tags WHERE tag = 'tree')
  (2, SELECT id FROM tags WHERE tag = 'chimps') 
```

...但这不起作用，而且看起来既麻烦又低效。

我也看到这样做了：

```
INSERT INTO video_tags
  (vid_id, tag_id)
VALUES
  SELECT '1', id FROM tags WHERE tag = 'banana') 
```

...但我不能让它与多个选择一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:23:17.613

您的查询可能是这样的：

```
CREATE TABLE rawdata
    (`vid_id` int, `tag_name` varchar(10))
;

INSERT INTO rawdata
    (`vid_id`, `tag_name`)
VALUES
    (1, 'banana'),
    (2, 'tree'),
    (2, 'chimps')
;

INSERT INTO video_tags
SELECT rawdata.vid_id, tag.id FROM
rawdata
LEFT JOIN tag ON tag.tag = rawdata.tag_name
;

DROP TABLE rawdata 
```

[http://sqlfiddle.com/#!2/89171/2](http://sqlfiddle.com/#!2/89171/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:44:12.043

尝试这个 ：：

```
INSERT INTO video_tags
  (vid_id, tag_id)
VALUES
  (1, (SELECT id FROM tags WHERE tag = 'banana')),
  (2, (SELECT id FROM tags WHERE tag = 'tree')),
  (2, SELECT id FROM tags WHERE tag = 'chimps')); 
```

# javascript - 知道设备是 iphone 或 ipad 或 ipod + phonegap

> ID：13289332
> 
> 赞同：2
> 
> 时间：2012-11-08T12:42:38.910
> 
> 标签：javascript, ios, cordova

我正在用cordova在IOS中制作一个应用程序。在cordova index.html中，我可以知道设备是iphone、ipad、ipod吗，就像我们使用navigator.userAgent来知道浏览器是android还是IOS一样。

我有一个 ipod，并且以下两个条件都实现了。

```
if(navigator.userAgent.toLowerCase().match(/iphone/))
if(navigator.userAgent.toLowerCase().match(/ipod/)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:49:34.937

尝试检查

```
navigator.platform 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:13:45.443

既然 iPod 也说它是 iPhone，你可以先像这样检查 iPod 用户代理：

```
if(navigator.userAgent.toLowerCase().match(/ipod/)) //I'm an iPod
else if(navigator.userAgent.toLowerCase().match(/ipad/)) //I'm an iPad
else if(navigator.userAgent.toLowerCase().match(/iphone/)) //I'm an iPhone 
```

那样有用吗？

# python - 在 appengine 上搜索搜索者

> ID：13289334
> 
> 赞同：0
> 
> 时间：2012-11-08T12:42:41.923
> 
> 标签：python, google-app-engine, search, app-engine-ndb

我的搜索问题如下。

我的网站有工作机会，我们的用户（搜索者）有兴趣在有新工作机会时收到通知。用户为他们的求职设置了一些关键字，这些关键字的变化非常不频繁。经常有新的工作机会（每天大约有 100 个新工作机会）。并且用户数量可能会很高（希望如此），大约为 10K-100K 用户，尽管现在要适度得多。

最初，我通过定期对每个用户进行搜索并过滤新的报价来解决这个问题。我发现这非常低效，但只要用户数量很少，它就可以工作。但是，我应该开始考虑另一种方法来为大量用户执行此操作。

所以，我想做的，但我不知道它是否可能，甚至**这种类型的搜索是如何被调用**的，如下。虽然用户数量应该会增长很多，但每天的新优惠数量不会。因此，当新的工作机会到来时，**我希望能够搜索其查询与此工作机会匹配的用户**，显然无需运行每个用户的查询。

我正在考虑诸如索引我的用户查询和搜索之类的东西，但我不知道如何以一种我可以用来提供搜索的方式分解工作机会。

我在 appengine-python 上执行此操作，因此我拥有的选项在某种程度上受到平台的限制。

提前感谢您的洞察力！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:22:34.703

这被称为前瞻性搜索（与更常见的回顾性搜索相反），Google App Engine 有[一个 API 正好用于此](https://developers.google.com/appengine/docs/python/prospectivesearch/)目的。

# python - 用其他数组切片 numpy 数组

> ID：13289336
> 
> 赞同：3
> 
> 时间：2012-11-08T12:43:01.983
> 
> 标签：python, numpy

`y`我正在尝试提取由 中包含的一组索引指定的numpy 数组的子集`x`，同时仍保留一些`y`空闲索引。举一个具体的例子。让`y`有形`(10,10,10,3)`而`x`有形`(7,7,3)`。的最后一个维度`x`对应于 的前三个维度的索引信息`y`。也就是说，我想要一个高效的切片操作，其结果与此相同：

```
for i in x.shape[0]:
    for j in x.shape[1]:
        z[i,j,:] = y[x[i,j,0],x[i,j,1],x[i,j,2],:] 
```

理想情况下，无论 的维数如何，答案都会起作用`x`。

一般来说，`y`将是`N+1`-维的，具有形状`(...,N)`，而`x`将是-`Q+1`维的，具有形状`(...,N)`，结果将具有与 相同的形状`x`。

这样做的动机是从向量场中提取向量子集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:02:33.663

这应该工作得相当好：

```
y[x[..., 0], x[..., 1], x[..., 2]] 
```

一般来说：

```
y[tuple(np.rollaxis(x, -1))] 
```

# php - 使用 JSON 和多维数组 (JS)

> ID：13289339
> 
> 赞同：1
> 
> 时间：2012-11-08T12:43:22.943
> 
> 标签：php, jquery, json, multidimensional-array

我遇到了以下问题：我编写了一个搜索函数，它的结果被保存到一个数组中。[当我使用jquery 表单插件](http://www.malsup.com/jquery/form/)处理该函数的响应时，我创建了一个附加数组，其中填充了搜索创建的所有数组。然后，我想将该多数组解析为我的 jQuery 脚本作为 JSON 对象。到目前为止一切都很好，但是我如何使脚本可以访问多数组？（如 multiarray.array1.property）

到目前为止，这是我的代码：

*   [HTML/JS]

> ```
> <!DOCTYPE html>
> <html> 
> <body>
> <div class="edit">
> <h2>Editieren</h2>
> <form id="suchen" method="post"><input type="text" id="search" name="id">
> <input type="submit" value="Senden"></form>  
> </div>
> </html> 
> ```

​</p>

```
 $('#suchen').ajaxForm({

    url: "./php/search.php",
    dataType: 'json',
    success: function(data){

        alert(data[0]) ;

    },
        clearForm: true
}) ;​ 
```

*   [PHP](http://codepad.org/3hzO85X1)

先感谢您

编辑：

JSON 示例：

```
{
    "id": "33",
    "firma": "sls",
    "strasse": "Industriegebiet Siebend",
    "plz": "66663",
    "ort": "Merzig",
    "vorname": "",
    "nachname": "Ruf",
        "email": "ronny.ruf@web.de ",
    "bemerkung": "",
    "partner": "",
    "kinder": "1",
    "nation": "D",
    "betreuer": "Adam",
    "anrede": "Herr"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:53:20.290

在你的 PHP

```
 while($row = mysql_fetch_array($result)){

                    $article = array (

                        "id"=>$row['id'],
                        "firma"=>$row['firma'],
                        "strasse"=>$row['strasse'],
                        "plz"=>$row['plz'],
                        "ort"=>$row['ort'],
                        "vorname"=>$row['vorname'],
                        "nachname"=>$row['nachname'],
                        "email"=>$row['email'],
                        "bemerkung"=>$row['bemerkung'],
                        "partner"=>$row['partner'],
                        "kinder"=>$row['kinder'],
                        "nation"=>$row['nation'],
                        "betreuer"=>$row['betreuer'],
                        "anrede"=>$row['anrede'],

                     ) ;
                    $hits[] = $article;
        }

                    echo json_encode($hits) ; 
```

在你的 jquery...

```
$('#suchen').ajaxForm({

    url: "./php/search.php",
    dataType: 'json',
    success: function(data){
       $.each(data, function(i, val){
           console.log(val); /*alert don't work on arrays*/
           alert(val.firma); /*you can alert some array key for example*/
       });    
    },
        clearForm: true
}) ;​ 
```

我用 console.log 替换 alert 因为 val 将是数组...访问它的任何键只需写 val.keyname..

作为 ..`alert(val.strasse);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:47:10.480

`parseJSON`帮助你

```
var data = jQuery.parseJSON('{"name":"John"}');
alert( data.name ); 
```

# ruby-on-rails - Rails Active Record Query - 查找满足条件的随机记录

> ID：13289352
> 
> 赞同：0
> 
> 时间：2012-11-08T12:44:55.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, random

我有一个模型，我想从中提取符合特定标准的随机记录。例如：给我一个来自 table Thing 的随机记录，其中 column_name = true。

要从模型中获取随机记录，我可以执行以下操作：

```
Thing.offset(rand(Thing.count)).first 
```

我想将它与查询结合起来：

```
Thing.where("column_name = ?", true).all 
```

这不起作用：

```
counter = Thing.where("column_name = ?", true).count
Thing.where("column_name = ?", true).offset(rand(counter)).first 
```

任何关于如何编写此查询的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:22:40.547

这应该为你做：

```
 counter = Thing.where("column_name = ?", true).count
  Thing.where("column_name = ?", true).limit("#{rand(counter)}, 1").first 
```

返回从表外某处读取的一行。

# android - 从 Activity 下载文件时出错

> ID：13289358
> 
> 赞同：0
> 
> 时间：2012-11-08T12:45:15.910
> 
> 标签：android, service, android-activity, download, android-service

如果我尝试从网站下载图像（使用 http 连接），如果在我的 android 服务中执行下载，我没有问题，而如果我尝试从 Activity 下载文件的相同方法，则会发生此错误：

```
11-08 13:27:36.800: W/System.err(8010): android.os.NetworkOnMainThreadException
11-08 13:27:36.800: W/System.err(8010):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
11-08 13:27:36.800: W/System.err(8010):     at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
11-08 13:27:36.800: W/System.err(8010):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
11-08 13:27:36.800: W/System.err(8010):     at java.net.InetAddress.getAllByName(InetAddress.java:249)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:304)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:292)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:274)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1038)
11-08 13:27:36.800: W/System.err(8010):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHeaderField(HttpURLConnectionImpl.java:481)
11-08 13:27:36.800: W/System.err(8010):     at java.net.URLConnection.getHeaderFieldInt(URLConnection.java:572)
11-08 13:27:36.800: W/System.err(8010):     at java.net.URLConnection.getContentLength(URLConnection.java:335) 
```

我以这种方式解决了从Activity调用我的下载方法的问题：

```
 new Thread(new Runnable() {
        public void run() {
             downloadFile(imagePath);
                }
              }).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:47:16.973

切克这

**NetworkOnMainThreadException**：当应用程序尝试在其主线程上执行网络操作时引发的异常。

您应该在 asynctask 上调用 sendfeedback 方法，然后只有上面的代码才能工作。由于网络服务器需要大量时间来响应主线程变得无响应。为避免它，您应该在另一个线程上调用它。因此 asynctask 更好。

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:48:43.617

尝试此代码从网络下载图像。

```
String myfeed="your url";

                URL url;
                try {
                    url = new URL(myfeed);
                    InputStream content = (InputStream)url.getContent();
                    d = Drawable.createFromStream(content , "src");

                    Bitmap bitmap = ((BitmapDrawable)d).getBitmap();

                    String path = Images.Media.insertImage(getContentResolver(),bitmap,mImageName, null);
        }catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

在你的活动中添加这个

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy); 
```

# android - Android Lambdaj 错误

> ID：13289362
> 
> 赞同：0
> 
> 时间：2012-11-08T12:45:42.267
> 
> 标签：android

我正在尝试使用 Lambdaj Api 以及其他两个 api 的 hamcrest-all.jar、cglib jar 来过滤基于特定条件的列表项......但它显示了一个下面的错误，比如找不到类异常。但是我在我的应用程序的 libs 文件夹的构建路径中添加了这些库。你们能建议我解决这个问题吗？

```
11-08 18:07:25.791: E/AndroidRuntime(664): FATAL EXCEPTION: main
11-08 18:07:25.791: E/AndroidRuntime(664): java.lang.NoClassDefFoundError: ch.lambdaj.function.argument.ProxyArgument
11-08 18:07:25.791: E/AndroidRuntime(664):  at ch.lambdaj.function.argument.ArgumentsFactory.createPlaceholder(ArgumentsFactory.java:68)
11-08 18:07:25.791: E/AndroidRuntime(664):  at ch.lambdaj.function.argument.ArgumentsFactory.registerNewArgument(ArgumentsFactory.java:58)
11-08 18:07:25.791: E/AndroidRuntime(664):  at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:50)
11-08 18:07:25.791: E/AndroidRuntime(664):  at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:39)
11-08 18:07:25.791: E/AndroidRuntime(664):  at ch.lambdaj.Lambda.on(Lambda.java:63)
11-08 18:07:25.791: E/AndroidRuntime(664):  at com.example.android_project_lambdabj.MainActivity.onCreate(MainActivity.java:48)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.os.Looper.loop(Looper.java:123)
11-08 18:07:25.791: E/AndroidRuntime(664):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-08 18:07:25.791: E/AndroidRuntime(664):  at java.lang.reflect.Method.invokeNative(Native Method)
11-08 18:07:25.791: E/AndroidRuntime(664):  at java.lang.reflect.Method.invoke(Method.java:521)
11-08 18:07:25.791: E/AndroidRuntime(664):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-08 18:07:25.791: E/AndroidRuntime(664):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-08 18:07:25.791: E/AndroidRuntime(664):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T06:00:43.380

您可以将[lambda 与依赖](https://lambdaj.googlecode.com/files/lambdaj-2.4-with-dependencies.jar)项一起使用，而不是 lambda jar。
但是，您可能会遇到初始化程序异常，并且通过引用[此线程](https://stackoverflow.com/a/16528057/2139145)，它不适用于 Android

# java - 如何将 int 数组作为单个 3 位输入读取？

> ID：13289365
> 
> 赞同：2
> 
> 时间：2012-11-08T12:45:46.907
> 
> 标签：java, arrays, swing

我是一名高中 Java 程序员（对 c++ 有半经验），我的任务是读取 3 位数字并将其输出为单词。如果我可以单独输入每个数字，这个程序将是一件轻而易举的事，但我必须一次输入所有 3 个数字，并通过内置的微风摆动窗口输入。我可以将输入作为 int 数组输入吗？我必须将它作为一个字符串接收，然后按位置解析它到数组中的位置，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:49:35.097

您只能接受该数字作为 int

然后

使用我们提取数字时使用的方法

暗示

> number % 10 是最后一位
> 数字/10 从数字中删除最后一位数字

例如：

> 456%10 = 6
> 456/10 = 45
> 
> 那么 45%10 = 5
> 45/10 = 4
> 
> 那么 4%10 = 4
> 4/10 = 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:48:21.333

是的，从输入中读取一行作为字符串，然后使用`input.split("\\s+")`. 这将在任何空白字符处拆分并返回一个`String[]`. 然后你需要用 . 解析每个数组元素`Integer.parseInt`。

另一方面，如果你真的需要三个`int`不被空格分隔的个位数，那么你可以跳过这`split`一步，直接使用`int digit = input.charAt(i) - '0'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:02:09.920

1.  `JTextField`从使用中获取输入`textfield.getText()`
2.  检查字符串是否仅包含 3 个字符并且是整数。
3.  将字符串类型转换为整数并将其分解为`hundred`,`ten`并`ones`放置。
4.  使用`switch-case`和`if-else`打印特定的单词。

例如，

```
int hundred = Integer.parseInt(textField.getText().substring(0,1));
int ten = Integer.parseInt(textField.getText().substring(1,2));
int ones = Integer.parseInt(textField.getText().substring(2,3));
switch(hundred){
    case 1: System.out.print("One hundred ");
    break;
    case 2: System.out.print("Two hundred ");
    break;
    //similarly for rest of the numbers
} 
```

其余的逻辑将自己实现为家庭作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:02:18.843

明确实施：

```
int array[] = new int[3];
String s = //the 3 digit number
for(int i = 0; i < s.length(); i++)
    array[i] = s.charAt(i) - '0'; 
```

但我什至会跳过中间整数数组而只使用字符。一个原因可能是数字与它们的英文表示不完全对应（如“十一”、“十二”）。带有字符的 switch 语句仍然很简单。

# python - 将源安装的熊猫链接到自制的python

> ID：13289368
> 
> 赞同：1
> 
> 时间：2012-11-08T12:46:13.650
> 
> 标签：python, pandas

我正在尝试安装 python 包`pandas`。

我所有现有的 python 设备都是使用 home-brew / easy_install / pip 安装的，但是 pip 和 easy_install 都失败了`pandas`——声称我没有 numpy > 1.6（尽管在 python 中`numpy.__version__`返回 1.6.2）。

尽管有`pip install numpy --upgrade`报道说我是最新的。

为了解决这个问题，我 git 克隆了源代码，然后`python setup.py install`在我的`/Library/Python/...`目录中运行。它似乎构建得很好，但是当我导入熊猫时，我得到一个错误，我不知道该怎么做。

谁能帮我将编译的库链接到我现有的安装？

错误如下：

```
dlopen(/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so, 2): Symbol not found: _floatify
  Referenced from: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so
Expected in: flat namespace
in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/__init__.py", line 10, in <module>
import pandas.lib as lib
ImportError: dlopen(/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so, 2): Symbol not found: _floatify
Referenced from: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so
Expected in: flat namespace
in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.9.1.dev_5a152bd-py2.7-macosx-10.7-x86_64.egg/pandas/lib.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:57:20.530

修复了`pip install pandas`我的 MBP 上的根本问题（失败），然后在另一个机器上对其进行了测试——问题似乎是 mac 安装附带的旧版本 numpy 与随后使用`pip`. Pandas 看到了旧的 numpy，但失败了。

要解决此问题，请 cd 到默认包的位置。你的可能和我的一样：

```
$ cd /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/ 
$ sudo rm -r numpy

$ sudo pip install pandas 
```

有了这个，`sudo pip install pandas`在两个盒子上都为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:20:05.130

这在 GitHub 上进行了讨论和解决：[https](https://github.com/pydata/pandas/issues/2188) ://github.com/pydata/pandas/issues/2188 。该问题必须归因于 Clang 的 C99 行为 wrt 内联 C 函数。

# objective-c - 目标 c 中的图像转换示例

> ID：13289370
> 
> 赞同：0
> 
> 时间：2012-11-08T12:46:43.473
> 
> 标签：objective-c, uiimageview, transition

我有一个 Objective C 项目，当用户第一次登录时，需要进行一些处理，可能需要大约 30 秒。在此期间，我正在显示一个进度条，并且我还想显示我从用户的在线个人资料（使用 SDWebImage）中获取的不同照片和文本（与每张照片相关）。

**我正在尝试找到图像之间过渡效果的示例**。我每 1 秒进行一次转换，我遇到的问题是图像刚刚出现（没有任何淡入效果或任何其他效果），并且有时图像尚未下载，因此存在某种丑陋的占位符。

任何建议或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:53:43.010

As you’ve figured by experiment, `UIImageView`’s `image` property isn’t animatable.

`CALayer`’s `contents` property, however, is.

If all you want is a simple fade transition, you need not do more than assigning the CGImageRef that underlies your UIImage to the layer’s `contents` and you get a nice fade.

If you need more power, you might want to add a `CATransition`as the animation for the `nil` key of your layer. Now, that will fire the next time you set the contents, unleashing the power of CoreImage filters at low implementation cost.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:59:10.233

您可能需要使用两个 CIImage，以便您可以在两个 CIImage 之间应用转换过滤器 (CIFilter)。本文有一个使用这种方法的示例代码[。](http://flylib.com/books/en/3.310.1.55/1/)

# magento - 在 Magento 1.7 中添加新产品时设置默认产品值

> ID：13289371
> 
> 赞同：5
> 
> 时间：2012-11-08T12:46:45.547
> 
> 标签：magento, magento-1.7

我为该事件创建了一个 Observer.php`catalog_product_new_action`

```
<?php
class Starmall_Productobserver_Model_Observer
{

    public function initProduct(Varien_Event_Observer $observer)
    {
        $product = $observer->getEvent()->getProduct();
            $product->setWeight(1);
            $product->setStatus(1);
            $product->setTaxClassId(1);
            $product->setPrice(1);

            $product->setStockData(array(
                    'is_in_stock' => 1,
                    'qty' => 99999
            ));
    }

} 
```

当我添加新产品时，重量、状态、税级和价格都正确设置为我的默认值。未设置库存数量和库存可用性。

如何在观察者中设置这些股票值？

**注意：我在单击`Add Product`按钮后立即在现有的“管理产品”屏幕中使用。**

**以下解决方案有效。库存数据设置正确（参见 RS 答案）：**

```
 public function initProduct(Varien_Event_Observer $observer)
        {
            $product = $observer->getEvent()->getProduct();
            $product->setWeight(1);
            $product->setStatus(1);
            $product->setTaxClassId(1);
            $product->setPrice(1);
            $product->setWebsiteIDs(array(1));

            $stockItem = Mage::getModel('cataloginventory/stock_item');
            $stockItem->assignProduct($product);
            $stockItem->setData('is_in_stock', 1);
            $stockItem->setData('qty', 1);

            $product->setStockItem($stockItem);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:22:25.537

```
....

//$product->save();

$stockItem = Mage::getModel('cataloginventory/stock_item');
$stockItem->assignProduct($product);
$stockItem->setData('is_in_stock', 1);
$stockItem->setData('stock_id', 1);
$stockItem->setData('store_id', 1);
$stockItem->setData('manage_stock', 0);
$stockItem->setData('use_config_manage_stock', 0);
$stockItem->setData('min_sale_qty', 0);
$stockItem->setData('use_config_min_sale_qty', 0);
$stockItem->setData('max_sale_qty', 1000);
$stockItem->setData('use_config_max_sale_qty', 0);

//$stockItem->save(); 
```

[在http://blog.magentoconnect.us/creating-magento-products-on-the-fly/](http://blog.magentoconnect.us/creating-magento-products-on-the-fly/)阅读更多内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:39:00.313

看起来您需要使用在产品对象上设置为属性的实际库存项目对象。

有关库存项目属性的参考，请参见[`Mage_CatalogInventory_Model_Observer::copyInventoryData()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/CatalogInventory/Model/Observer.php#L164)。

# javascript - 文本更改时由另一个文本框（子页面）更改文本框文本（父页面）

> ID：13289372
> 
> 赞同：0
> 
> 时间：2012-11-08T12:46:51.950
> 
> 标签：javascript, asp.net

我有两个名为 default1.aspx 和 default2.aspx 的 .aspx 页面。default1.aspx 有一个名为 textbox1 的文本框，而 default2.aspx 有一个名为 textbox2 的文本框。default1.aspx 使用 window.showmodaldialog() 打开 default2.aspx。问题是当我更改 textbox2 的文本时，textbox1 的文本也被更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:55:53.120

给定一个javascript函数：

```
function clearOther(which){
 document.getElementById(which).value='';
} 
```

当您专注于一个文本框并传递另一个文本框的 id 时，可以调用它：

```
<input type="text" id="box1" onfocus="clearOther('box2')" />
<input type="text" id="box2" onfocus="clearOther('box1')"  /> 
```

工作示例-> [http://jsfiddle.net/CwWKn/](http://jsfiddle.net/CwWKn/)

或检查 [这个](https://stackoverflow.com/questions/3883673/change-textbox-text-in-javascript?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:56:31.610

```
//Page A
<input type='text' id='tb'>
var returnedValue = showModalDialog('page2.aspx', window);

//Page B
<input type='text' onkeypress='update(this);'>

function update(Sender) {
    var input = window.dialogArguments.document.getElementById("tb");
    input.value = Sender.value
} 
```

另一种选择是在模式对话框中设置 window.returnValue 并在对话框关闭后使用返回值更新文本框。

# android - 如何使用 Subversive 客户端将代码从 SVN 导入 eclispe 而不会出错？

> ID：13289386
> 
> 赞同：1
> 
> 时间：2012-11-08T12:47:48.063
> 
> 标签：android, eclipse, svn, eclipse-plugin, subversive

每当我尝试直接从 SVN 将代码导入 Eclipse 时，该项目都不会被检测为 android 项目。这就是我所做的..在 eclispe > Import Android project >From SVN > Checkout as a project with the name specified > ...

现在导入的代码在包资源管理器中显示为项目，而不是 android 项目。所以右键菜单中没有run as android project。

所以我再次将签出的代码导入到 eclispe 中，它在代码中显示了很多原始代码中不存在的错误。有时它会显示“无法解析标记”并在导入代码时显示一些 3 或 4 个标记 ID。当我使用任何其他客户端导入从 svn 签出的任何代码时，也会发生同样的情况。请解决问题。这只发生在 Ubuntu 上而不是 mac 上。操作系统：Ubuntu 12.04 Eclipse：Juno Java：JDk7u7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:00:07.183

问题出在 Java 编译器的版本上。该项目是在 Java 编译器版本 1.6 中完成的，并且导入的代码的属性设置为 Java 1.5。我在项目属性中将 Java 版本从 1.5 更改为 1.6 并解决了。

# java - @ManyToMany 连接表失败

> ID：13289388
> 
> 赞同：1
> 
> 时间：2012-11-08T12:48:01.777
> 
> 标签：java, hibernate, jpa

我遇到了一个我还不能解决的问题。

环境：

*   MySQL 5
*   操作系统
*   休眠 4.1
*   春天 3.1
*   春季数据 JPA

我在多对多关系中有两个实体。为此，我使用带有外键的联接表。这是我的实体（为简洁而修改）：

```
@Entity
public class Employee  {
  @Id
  @GeneratedValue( strategy = GenerationType.AUTO )
  private Long employeeId;

@ManyToMany( cascade = CascadeType.ALL, fetch = FetchType.EAGER, targetEntity = Office.class )
@JoinTable( name = "EmployeeOfficeJoin", joinColumns = { @JoinColumn( name = "EmployeeId", nullable = false, updatable = false ) }, inverseJoinColumns = { @JoinColumn( name = "OfficeId", nullable = false, updatable = false ) } )
private List<Office> offices = new ArrayList<Office>();
} 
```

和

```
@Entity
public class Office {

@Id
@GeneratedValue( strategy = GenerationType.AUTO )
private Long officeId;

@ManyToMany( mappedBy = "offices", targetEntity = Employee.class, fetch = FetchType.EAGER )
private List<Employee> employees = new ArrayList<Employee>(); 
```

我的联接表是：

```
 CREATE  TABLE IF NOT EXISTS `dental`.`EmployeeOfficeJoin` ( 
   `EmployeeId` BIGINT(11) ,
   `OfficeId` BIGINT(11),
   PRIMARY KEY ( `employeeId`, `officeId` ),
   FOREIGN KEY ( `employeeId` ) REFERENCES `Employee` (`EmployeeId` ),
   FOREIGN KEY ( `officeId` ) REFERENCES `Office` ( `Officeid` ) )
ENGINE = InnoDB 
```

我正在使用这个命名：

```
hibernate.ejb.naming_strategy=org.hibernate.cfg.DefaultNamingStrategy 
```

当我尝试使用它时：

```
Employee emp = new Employee();
...
emp.getOffices().add(newOffice);
employeeRepository.save(emp); 
```

失败前的最后一个插入语句是：

```
Hibernate: 
    insert 
    into
        EmployeeOfficeJoin
        (EmployeeId, OfficeId) 
    values
        (?, ?)
TRACE - BasicBinder                - binding parameter [1] as [BIGINT] - 1
TRACE - BasicBinder                - binding parameter [2] as [BIGINT] - 1
DEBUG - SqlExceptionHelper         - Cannot add or update a child row: a foreign key constraint fails (`dental`.`employeeofficejoin`, CONSTRAINT `employeeofficejoin_ibfk_1` FOREIGN KEY (`EmployeeId`) REFERENCES `Employee` (`EmployeeId`)) [n/a] 
```

看来情况已经全部改变了，我看到[有人](http://developmentality.wordpress.com/2011/05/23/hibernate-mysql-mac-foreign-key-nightmares-a-painless-solution-to-a-painful-problem/)认为这可能是 OS X 上的 MySQL 问题。但是当我使用

```
hibernate.ejb.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy 
```

这并不能解决我的问题。

那么有人知道这是命名策略问题还是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:24:26.747

虽然我预计会出现不同的错误，但 JoinColumn 中定义的字段似乎与您在关系表中指定的字段不匹配。尝试修复注释中的连接列以引用“Employee_id”和“Office_id”而不是“EmployeeId”和“OfficeId”。

# c++ - MFC & Kinect: draw a line on Kinect's image

> ID：13289389
> 
> 赞同：2
> 
> 时间：2012-11-08T12:48:04.257
> 
> 标签：c++, image, kinect, direct2d

I am currently working with Kinect, and I want to draw the bones of a skeleton on the VGA image of the kinect. First, I get the picture from the kinect:

```
HRESULT hr = globalNui->NuiImageStreamGetNextFrame( videoStreamHandle, 0, &frame);
INuiFrameTexture * texture = frame.pFrameTexture;
NUI_LOCKED_RECT lockedRect;
texture->LockRect( 0, &lockedRect, NULL, 0); 
```

Here we have it in a [NUI_LOCKED_RECT](http://msdn.microsoft.com/en-us/library/nuiimagecamera.nui_locked_rect.aspx), so we can do anything with it. The most common way is to just convert it to a bitmap and put it on the screen, but I want to make some modifications to the image. I use Direct2D to bring it on the screen, so I need an image format that can be converted to ID2D1Bitmap, and I must be able to draw lines and points on it. What kind of image do I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:14:54.523

The locked buffer will contain a simple array of size `width * height * 4` bytes. Each pixel is a 4 byte XRGB (see docs here: [http://msdn.microsoft.com/en-us/library/jj131027.aspx](http://msdn.microsoft.com/en-us/library/jj131027.aspx)). The image will be stored in row-order, so a pixel at position `x,y` will have the array index `((width * y) + x) * 4)`.

This is a standard image buffer format which you can freely use with pretty much any other image manipulation library such as Microsoft's own WIC, or IPL or OpenCV or whatever. You should have no problem iterating across the buffer and setting the RGB values directly, which for simple graphical work should be more than sufficient.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:00:23.237

So I figuered that there are just no image formats doing what I want. No problem, because I found out about all the possibilities of Direct2D. Now I am not actually changing the image, but to the user it looks the same.

# django - 子集的随机顺序或结果在 Django 中的 QuerySet

> ID：13289390
> 
> 赞同：0
> 
> 时间：2012-11-08T12:48:16.197
> 
> 标签：django, django-queryset

我有这样的查询：

`Listing.objects.all().order_by('-premium', 'title')`

它按预期工作，首先返回所有高级课程，然后返回按标题排序的所有内容。

现在我只需要随机化`premium`结果的顺序。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:56:13.647

您可以再次使用`order_by`to sort on `title`without`premium`

```
qs=Listing.objects.filter().order_by('-premium', 'title')
qs2 = qs.order_by('title') # will be sorted on 'title' not 'premium' 
```

或捷径

```
Listing.objects.filter().order_by('-premium', 'title').order_by('title') 
```

注意：我使用`filter()`而不是`all()`作为初始设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:38:44.120

好的，我认为单个查询中没有解决方案。
所以我用两个查询解决了这个问题：

```
premium_results = Listing.objects.filter(premium=True).order_by('?')
normal_results = Listing.objects.filter(premium=False).order_by('title')

results = list(premium_results) + list(normal_results) 
```

注意：我需要一个列表作为输出，否则您可以使用 Django 的`Q`对象组合查询结果。

# c - c中的循环移位

> ID：13289397
> 
> 赞同：30
> 
> 时间：2012-11-08T12:48:53.820
> 
> 标签：c

以下代码如何工作以及变量的含义是什么：

```
y = (x << shift) | (x >> (sizeof(x)*CHAR_BIT - shift)); 
```

我在一篇循环班次文章中找到，但没有解释它是如何工作的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-08T12:56:48.637

这是一种进行循环移位的方法。假设`x`是 8 位。

```
+----+----+----+----+----+----+----+----+
| x1 x2 x3 x4 x5 x6 x7 x8 |
+----+----+----+----+----+----+----+----+

```

然后，将其左移 3 得到：

```
+----+----+----+----+----+----+----+----+
| x4 x5 x6 x7 x8 0 0 0 |
+----+----+----+----+----+----+----+----+

```

现在，与in bits`CHAR_BIT*sizeof(x)`的宽度相同，为8。所以向右移动 by给我们：`x``x``8 - 3`

```
+----+----+----+----+----+----+----+----+
| 0 0 0 0 0 x1 x2 x3 |
+----+----+----+----+----+----+----+----+

```

并采取 OR 你得到：

```
+----+----+----+----+----+----+----+----+
| x4 x5 x6 x7 x8 x1 x2 x3 |
+----+----+----+----+----+----+----+----+

```

这在技术上是不可移植的，因为移动等于类型宽度的量是不可移植的——所以如果 shift 是 8，那么左移是错误的，如果 shift 是 0，那么右移是错的。但是，这实际上适用于按类型宽度移动时的所有三种常见行为。（实际上，移位量会减少一些模 - 类型的位宽或更大的数字。）

它被称为循环移位或“旋转”，因为在左侧移出的位在右侧移回。

复杂的编译器实际上会将代码编译为硬件旋转指令。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-08T12:52:48.123

`CHAR_BIT`是每字节的位数，应始终为 8。

`shift`是您想要以循环方式向左移动的位数，因此向左移出的位会在右侧返回。

```
 1110 0000 << 2 results in:
     1000 0011 
```

示例代码：

```
 y = (x << 2) | (x >> (8 - 2)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T12:54:59.967

```
(x << shift) 
```

将其向左“移位”位数，返回移出的位

```
(x >> (sizeof(x)*CHAR_BIT - shift)); 
```

为容纳这些位腾出空间

`CHAR_BIT`是 char 中的位数，所以大多数是 8。在 C 中，您不是一次处理一位，而是至少处理 char 位数。这就是你得到的粒度。

一般来说，

> 对于一个字符，当你进行位旋转时，你会在一个 8 位字段（1 个字节）上进行
> 
> 对于 int，当您进行旋转时，您将在 32 位字段（4 字节）上进行

* * *

**8位示例：**

```
x = 11010101
shift = 2

x << (shift) = 01010100 //shifted left by 2 bits

= x >> ((1 * CHAR_BIT) - shift)
= x >> (6) 
= 00000011 //shifted right by 6bits 
```

`OR`这些按位给予

```
01010100 //x << 2
00000011 //x >> 6
________
01010111 
```

即循环移位 2 位的值

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T14:27:09.440

这仅适用于无符号类型。在有符号负数的情况下，最左边的位将被右移运算符（“>>”）的最高有效位（带 1-s）的值替换

我会这样写：

```
y = (x << shift) | ( (x >> (sizeof(x)*CHAR_BIT - shift)) & (0x7F >> (sizeof(x)*CHAR_BIT - shift) ); 
```

在“|”之前 运算符我们确实确认前 n 位（ n = sizeof(x)*CHAR_BIT - shift）被归零。我们还假设 x 很短（2 字节长）。所以，它也依赖于类型。

# jquery - 滑块未与 $(window).load 一起运行

> ID：13289399
> 
> 赞同：0
> 
> 时间：2012-11-08T12:49:10.180
> 
> 标签：jquery

[好的，上一个问题的新角度，我在这里](https://stackoverflow.com/questions/13287735/jquery-slider-throwing-error-could-not-convert-javascript-argument-arg-0-ns)没有正确解释：

我们的开发网站的滑块在这里完美运行：

[http://allblacks.01dev.co.nz/index.cfm?layout=dnaHome](http://allblacks.01dev.co.nz/index.cfm?layout=dnaHome)

但是，我们刚刚启动了该站点，但它在这里不起作用：

[http://www.allblacks.com/index.cfm?layout=dnaHome](https://stackoverflow.com/questions/13287735/jquery-slider-throwing-error-could-not-convert-javascript-argument-arg-0-ns)

我已将问题隔离到以下代码段。警报会在 01dev 站点上触发，但不会在实时站点上触发。

```
$(window).load(function () {
            $('.wraplines a, .wraplines .wrapspan').wraplines().addClass('wrapped clearfix');
            alert('here');

            $('.carousel').each(function () {
                $(this).Waterfall({
                    autoStart: $(this).data('autostart'),
                    startAt: $(this).data('startat'),
                    infiniteScroll: $(this).data('infinitescroll'),
                    hasPager: $(this).data('haspager')
                });
            });
        }); 
```

有人可以帮我理解这一点吗？

编辑：之前已经有一个 $(document).ready... ，如下所示：

```
(function ($) {
    "use strict";

    $(document).ready(function () {
        var html = $('html'),
            body = $('body'),
            header = $('.header'),
            searchTrigger = $('.search'),
            searchPane = $('.search-pane');

        html.removeClass('no-js');

        $(window).load(function () {
            $('.wraplines a, .wraplines .wrapspan').wraplines().addClass('wrapped clearfix');
            alert('here');

            $('.carousel').each(function () {

                $(this).Waterfall({
                    autoStart: $(this).data('autostart'),
                    startAt: $(this).data('startat'),
                    infiniteScroll: $(this).data('infinitescroll'),
                    hasPager: $(this).data('haspager')
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:17:53.733

你在`$(window).load()`里面分配`$(document).ready()`——它不应该在里面，因为那时已经太晚了。

试试这个...

```
(function ($) {
    "use strict";

    $(document).ready(function () {
        var html = $('html'),
            body = $('body'),
            header = $('.header'),
            searchTrigger = $('.search'),
            searchPane = $('.search-pane');

        html.removeClass('no-js');

        $('.wraplines a, .wraplines .wrapspan').wraplines().addClass('wrapped clearfix');
        alert('here');

        $('.carousel').each(function () {

            $(this).Waterfall({
                autoStart: $(this).data('autostart'),
                startAt: $(this).data('startat'),
                infiniteScroll: $(this).data('infinitescroll'),
                hasPager: $(this).data('haspager')
            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:53:45.257

我建议使用，它从来没有让我失望

```
 $(document).ready(function(){ 
        $('.wraplines a, .wraplines .wrapspan').wraplines().addClass('wrapped clearfix');
        alert('here');

        $('.carousel').each(function () {
            $(this).Waterfall({
                autoStart: $(this).data('autostart'),
                startAt: $(this).data('startat'),
                infiniteScroll: $(this).data('infinitescroll'),
                hasPager: $(this).data('haspager')
            });
        });
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:08:09.383

我们确定问题与未正确调用厚盒 javascript 或某种类型的冲突有关。我们将thickbox js 调用移至js 调用列表的顶部（在jQuery.js 调用之前），这似乎解决了问题。

# sockets - epoll 连接失败

> ID：13289400
> 
> 赞同：0
> 
> 时间：2012-11-08T12:49:13.020
> 
> 标签：sockets, network-programming, epoll

我使用 EPOLL 创建了一个网络库。当我连接到无法 ping 的地址时，我的网络库检测连接在请求打开连接 70 秒后失败。我为套接字设置了超时，但它无法解决这个问题。有人看到同样的问题吗？

# xml - Java JaxB - 对象到 XML 字符串到对象

> ID：13289404
> 
> 赞同：16
> 
> 时间：2012-11-08T12:49:33.867
> 
> 标签：xml, jaxb

我在 Netbeans 7.1.2 中使用 JaxB 时遇到问题。

我已经使用 JaxB（新 JaxB 绑定）从模式中自动生成了我的类。我正在创建将使用 Marshaller 序列化为 XML 字符串的对象，然后从 XML 字符串返回到新的对象实例。但是，我得到以下异常：

```
javax.xml.bind.UnmarshalException: unexpected element (uri:"http://www.somewhere.com/some/path", local:"MyQueryComplexTypeQuery"). Expected elements are (none) 
```

编组/序列化为 XML 字符串工作正常。正是当它被解组/反序列化时才导致问题。

我正在使用以下代码构建对象并将其编组为 XML 字符串：

```
// build the object
ObjectFactory of = new ObjectFactory();

MyQueryComplexType oaaqc = of.createMyQueryComplexType();
oaaqc.setField1("edit");
oaaqc.setField2("net");
oaaqc.setField3("24");

JAXBElement<MyQueryComplexType> createMyQueryComplexType = of.createMyQueryComplexTypeQuery(oaaqc);

// serialise to xml
StringWriter writer = new StringWriter();
JAXBContext context = JAXBContext.newInstance(MyQueryComplexType.class);            
Marshaller m = context.createMarshaller();
m.marshal(createMyQueryComplexType, writer);

// output string to console
String theXML = writer.toString();
System.out.println(theXML); 
```

这会在控制台中生成以下 XML（格式化）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<MyQueryComplexTypeQuery xmlns="http://www.somewhere.com/some/path">
    <Field1>edit</Field1>
    <Field2>net</Field2>
    <Field3>24</Field3>
</MyQueryComplexTypeQuery> 
```

现在我使用以下代码将字符串反序列化/解组为新实例 MyQueryComplexType：

```
Unmarshaller u = context.createUnmarshaller();
MyQueryComplexTypeQuery o = (MyQueryComplexType) u.unmarshal(new StringReader(theXML)); 
```

在自动生成的 package-info.java 中有以下内容：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://www.somewhere.com/some/path", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package MyProject.SomeNamespace.MyQuery; 
```

我认为 object -> string -> object 的简单过程会起作用。这是我第一次使用 JaxB（所以要温柔）。我看过其他提到命名空间的帖子，对我来说一切都很好。我已经从模式中自动生成了类，构造了对象，编组为 xml 字符串。我认为简单地反转 unmarshal 的过程是相似的。

实际的异常是在线抛出的：

```
MyQueryComplexTypeQuery o = (MyQueryComplexType) u.unmarshal(new StringReader(theXML)); 
```

我以为我正在做从字符串到对象的解组会很简单。我不知道我是做错了什么还是错过了什么。我希望你们能给我一些启示或睁开我的眼睛。

我已经减少了代码以简化我的应用程序中导致错误的内容。命名空间已更改以保护网络上事物的身份。

有什么想法吗？

谢谢

安德斯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T13:58:07.243

**创建`JAXBContext`**

对于从 XML 模式生成的 JAXB 模型，您可以`JAXBContext`在包名称而不是特定类上创建：

```
JAXBContext context = JAXBContext.newInstance("your.package.name"); 
```

不是：

```
JAXBContext context = JAXBContext.newInstance(MyQueryComplexType.class); 
```

这将确保正确处理`ObjectFactory`包含`@XmlElementDecl`注释的类，这是您的用例中缺少的。

**解组操作**

请注意，在您的编组操作期间，您需要将您的实例包装`MyQueryComplexType`在`JAXBElement`? 这是因为`MyQueryComplexType`没有使用注释，`@XmlRootElement`并且根元素信息需要来自`JAXBElement`. 这意味着当您执行 unmarshal 操作时，您也会得到`JAXBElement`回报。

```
JAXBElement<MyQueryComplexTypeQuery> o = (JAXBElement<MyQueryComplexType>) u.unmarshal(new StringReader(theXML)); 
```

不是：

```
MyQueryComplexTypeQuery o = (MyQueryComplexType) u.unmarshal(new StringReader(theXML)); 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# python - 在python中附加列表列表

> ID：13289409
> 
> 赞同：0
> 
> 时间：2012-11-08T12:49:56.170
> 
> 标签：python, list, append

我有一个列表列表。我想将数组的元素添加到子列表之一，但我添加的元素取决于数组的长度。

```
import numpy as np
import numpy.linalg
from numpy import matrix
from scipy.linalg import inv,det,eig
import random
import matplotlib.pyplot as plt
import pylab
from numpy import vstack
from scipy.optimize import curve_fit
from array import array
import copy

def getstabmat(orign, small, specsize, alln):
    #FIRST MAKE THE MATRIX
    matfound=0
    while (matfound==0):
        n=orign
        A=np.empty((n,n))
        I=np.ones((n))
        for i in range(0,n):
            for j in range(i+1,n):
                A[j,i]=random.random()
        for i in range(0,n):
            for j in range(i+1,n):
                    A[i,j] = A[j,i]
        for i in range(n):
            A[i,i]=1
        #NOW REMOVE NEGATIVE ELEMENTS AND KEEP SOLVING
        allpos=0
        while (allpos !=1): #loop for dealing just with getting it positive
            x = numpy.linalg.solve(A,I)
            if any(tl<small for tl in x): #if any of the solutions in x are negative or small
                p=np.where(x==min(x)) # find the most negative solution, p is the position
                x=np.delete(x, p, 0)
                A=np.delete(A, p, 0)
                A=np.delete(A, p, 1)
                I=np.delete(I, p, 0)
                n=n-1
            else:
                allpos=1
        #now test for stability, only do it once and remove one element before returning to check positiveness.
        J=np.empty((n,n)) # make empty jacobian
        for i in range (0,n):
            for j in range (0,n):
                if (i==j): # if we are looking at the diagonal of the matrix, there is a special formula for species dealing with itself
                    tsum = 0
                    for k in range (0,n): #for the summation part
                        tsum = tsum + A[i][k]*x[k] # x is vector of fixed points obtained before
                    J[i][j] = 1 - A[i][j]*x[i] - tsum
                else:
                    J[i][j] = -A[i][j]*x[i]
                    #now jacobian at fixed point has been constructed
        Jeig, Jvec =  eig(J) # get the eigenvalues and eigenvectors
        #run through eigenvalues and find out if any of them are positive
        if any(tl>0 for tl in Jeig.real): #if any eigenvalues are positive
            matfound=0
        else:
            if ((alln==0 and len(A)==specsize) or alln==1): # if the matrix found has five species
                matfound=1
            else:
                matfound=0
    return A, x

def main():

    mats=3 #number of matrices to find
    orign=15
    alln=1 #if alln=1, that means that all sizes of stable matrix should be returned
    n=5 # the number of different species wanted in each matrix
    small=0.0001 #the fractional size that a species is when it is considered to be extinct
    a=0
    sortedspec=[[]]*10
    specad=[]
    while (a<mats): #while all the mats have not been found
        print a
        A, specfp = getstabmat(orign, small, n, alln) #15 is the original size of matrix to pass to fnc.n is the size that will be returned
        a=a+1
        print specfp
        print len(specfp)
        for i in range (0,len(specfp)):
            (sortedspec[len(specfp)]).append(specfp[i])
    print sortedspec

if __name__ == '__main__':
  main() 
```

因此，如果：

```
specfp = [ 0.78076862  0.79608003  0.50719552] 
```

然后我希望将每个元素添加到列表 sortedspec[3] 中。但是，我最终将数组的每个元素都添加到每个列表元素中。为什么会这样，我可以修复它吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:03:50.493

```
sortedspec=[[]]*10 
```

这将使您的列表包含对相同（单个）子列表的 10 个引用，因此更新其中一个也将反映在其他子列表中：

```
>>> sortedspec[0].append(1)
>>> sortedspec
[[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]] 
```

您需要做的是创建 10 个不同的列表，例如使用列表推导：

```
sortedspec=[[] for i in range(10)] 
```

# android - Ajax 帖子不起作用 - Jquery Phonegap Android

> ID：13289410
> 
> 赞同：11
> 
> 时间：2012-11-08T12:49:57.720
> 
> 标签：android, jquery, ajax, cordova

大家好，提前谢谢。我正在使用 Phonegap 2.1.0。在白名单中，一切都被接受..

```
**<access uri="*" subdomains="true" />
<access origin=".*" subdomains="true"/>** 
```

我正在使用这个函数从我的大学网络服务器调用一个远程 php 文件：

```
var postData = $(this).serialize();             
                $.ajax({
                    type: 'POST',
                    url: 'http://--/smartphone/login.php',
                    dataType : 'json',
                    data: postData,         
                    success: function(data){
                        alert("good");
                    },
                    error: function(){
                        alert('problem!');
                    }
                }); 
```

php 文件只是出于调试原因，如下所示：

```
 <?php
header('Content-Type: application/json');
$sample = array(
    'name'=>'My Name',
    'email'=>'my_email@example.com'
);
echo json_encode($sample);
?> 
```

但是ajax请求没有发生..在eclipse中我点击提交时不断收到这个错误：

```
JSCallback Error: Request failed with status 0 at file:///android_asset/www/js/cordova-2.1.0.js:3743 
```

更重要的是，我忘了补充，我可以将 url 作为来自模拟器的链接打开。它工作正常。

* ***html代码：* ***

```
<!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="utf-8">
   <link rel="stylesheet" type="text/css" href="css/index.css" />
   <script type="text/javascript" charset="utf-8" src="js/cordova-2.1.0.js"></script>
   <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
   <script type="text/javascript" src="js/index.js"></script>
   <title>Smart Greenhouse</title>
 </head>
 <body>
  <div id="container">
      <img src="css/images/smart_green_house.png" class="logo" alt="l1ogo" />
      <form id="login_form" class="first_display" >
          <label class="title"> E-mail:</label>
          <input id="1" type="email" class="input" size="45" name="email" />
          <label class="title"> password:</label>
          <input id="2" type="password" class="input" size="45" name="password" />
          <input id="3" class="submit_type" type="submit" value="login" />
      </form>
  </div>
 </body>
 </html> 
```

我已经搜索了我认为几乎整个网络......2天搜索......一切都已经过测试......非常感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:51:38.923

**第 1 步**：您需要在 php 文件中包含两个标头

```
header('Content-Type: application/json');
header("Access-Control-Allow-Origin: *"); 
```

**第 2 步**：并在您的索引页面中包含 cdn jquery 库。

**第 3 步**：使用脚本成功发布表单

```
<script type="text/javascript">
    $(document).ready(function() {
        $('form').submit(function(e) {
            var postData = $(this).serialize();
            $.ajax({
                type : 'POST',
                url : 'http://www.yoururl/test.php',
                dataType : 'json',
                data : postData,
                success : function(data) {
                    alert(data);
                },
                error : function() {
                    alert('error!');
                }
            });

            return false;
        });
    });
</script> 
```

我已经在 phonegap 中对其进行了测试，并且工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T10:01:36.390

最后，经过 4-5 天的搜索..对我来说有些东西..我只是`return false`在 ajax 回调之后添加。我将代码更改如下：

```
$('form').submit(function(e){       
    if (password_ok==1 && email_ok==1)
            {
                var postData = $(this).serialize();
                $.ajax({
                    type: 'POST',
                    url: 'http://mysite.xx.x/smartphone/login.php',
                    dataType : 'json',
                    data: postData,         
                    success: function(data){
                        alert(data);
                    },
                    error: function(){
                        alert('error!');
                    }
                });
            }
        else
            {
            e.preventDefault();
            if (email_ok==2)
                {
                $("#1").css("border-color","red");
                $("#1").css("background-color","#FFD8CE");
                }
            if (password_ok==2)
                {
                $("#2").css("border-color","red");
                $("#2").css("background-color","#FFD8CE");
                }
            }
    return false;       
    }); 
```

现在唯一的问题是成功时它不会重置页面..而是一次一步...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T03:42:19.833

我认为原因是由“表单提交”引起的。你把你的ajax代码放在哪里了？在 index.js 中？

您得到的异常意味着“0 == 页面正在卸载”。

在您的情况下，我猜您将 ajax 代码放在 index.js 中，它与表单位于同一页面中。当您提交表单时，浏览器开始卸载当前页面并加载包含表单提交结果的页面。因此，您的 ajax 代码会出现“页面正在卸载”异常。

尽量不要使用表单提交。

# java - 如何正确配置我的 GWT Activity 和 ActivityMapper？

> ID：13289414
> 
> 赞同：0
> 
> 时间：2012-11-08T12:50:44.613
> 
> 标签：java, gwt, gwt-platform, gwt-activities

我有以下课程：

```
// The "backing bean" for DashboardDisplay.ui.xml (which is omitted for brevity).
public class DashboardDisplay extends Composite implements AcceptsOneWidget {
    private EventBus eventBus;
    private PlaceController placeController;
    private IsWidget content = null;

    public DashboardDisplay(EventBus eventBus, PlaceController placeController) {
        super();

        setEventBus(eventBus);
        setPlaceController(placeController);
    }

    // Getters and setters for all properties
    // ...

    @Override
    public void setWidget(IsWidget widget) {
        setContent(widget);
    }
}

public class DashboardActivity extends AbstractActivity {
    private AcceptsOneWidget container;
    private ActivityManager manager;
    private DashboardDisplay display;

    public DashboardActivity(AcceptsOneWidget container, ActivityManager manager,
        DashboardDisplay display) {
        super();

        setContainer(container);
        setManager(manager);
        setDisplay(display);

        // I *believe* this ensures that the 'panel' passed in to the
        // start method is always our 'container'. Yes?
        manager.setDisplay(container);
    }

    // Getters and setters for all properties
    // ...

    @Override
    public void start(AcceptsOneWidget panel, EventBus eventBus) {
        display.setEventBus(eventBus);
        panel.setWidget(display);
    }
}

public class DashboardActivityMapper implements ActivityMapper {
    private DashboardActivity activity = null;

    // Getters and setter for activity.

    @Override
    public Activity getActivity(Place place) {
        // Leaving arguments null because I'm confused about the object graph
        // (read below).
        return new DashboardActivity(null, null, null);
    }
} 
```

所以我*开始*对活动框架有一些表面上的理解，但对它仍然很陌生，以至于当我尝试远离*Hello、GWT*示例时，我几乎立刻就遇到了 API 的障碍。

在我的应用程序的主 GWT 模块中`MyWebAppModule`，我正在尝试实例化和配置这 3 个对象。但是因为我仍然不确定如何使用他们的 API，所以我遇到了实现问题：

```
public class MyWebAppModule implements EntryPoint {
    @Override
    public void onModuleLoad() {
        // I'll worry about DI and getting GIN to work after
        // I figure this basic stuff out.
        EventBus eventBus = new SimpleEventBus();
        PlaceController placeController = new PlaceController(eventBus);
        MyWebAppPlaceHistoryMapper placeMapper = new MyWebAppPlaceHistoryMapper();
        HomePlace homePlace = new HomePlace();

        // WHERE THE PROBLEM STARTS
        DashboardActivityMapper activityMapper = new DashboardActivityMapper();
        ActivityManager manager = new ActivityManager(activityMapper, eventBus);

        // Really not sure how to inject/configure this properly.
        DashboardActivity dashboardActivity = new DashboardActivity(null, null, null);
        // WHERE THE PROBLEM ENDS

        PlaceHistoryHandler historian = new PlaceHistoryHandler(placeMapper);
        historian.register(placeController, eventBus, homePlace);
        historian.handleCurrentHistory();
    }
} 
```

1.  显然，我没有正确实现`DashboardActivityMapper`，`DashboardActivity`所以当我尝试在`MyWebAppModule#onModuleLoad`. 有人可以帮我正确实施吗？一旦我得到一个工作示例，我确信我将能够连接活动框架中的其余“点”。
2.  除非我遗漏了什么，否则`ActivityManager manager`上述内容似乎没有添加到任何其他类中。这个对吗？GWT 会确保它在内存中保持活动状态，以便它始终在监听`eventBus`I pass it for `PlaceChangeEvent`s 吗？还是我需要将它添加/注册到任何东西？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:06:16.160

1.  您`DashboardActivityMapper`负责在到达`DashboardActivity`给定位置（例如`HomePlace`）时创建和返回 a 。这是您缺少的信息吗？
    请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#ActivityMapper](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#ActivityMapper)

2.  只要`EventBus`有一个句柄`ActivityManager`（所以它可以向它发送事件）。但是，在使用非空值调用时在其方法中`ActivityManager`注册自身（并在将 a传递给时取消注册自身），并且您不调用（顺便说一下，甚至不会显示活动)`EventBus``setDisplay``null``setDisplay``setDisplay`

# eclipse - 避免在struts2中执行两次动作

> ID：13289421
> 
> 赞同：2
> 
> 时间：2012-11-08T12:51:18.590
> 
> 标签：eclipse, jsp, struts2

我正在为我的应用程序使用带有磁贴的 Struts 2。

在应用程序中，我使用一个动作类说**“A”**，它具有不同的动作方法，如*添加*、*编辑*、*保存*、*保存成功*等。

在一个页面中，当我单击一个复选框时，我使用 window.open 方法通过调用操作类 A 的操作方法“edit()”打开一个弹出窗口，该操作方法执行一些数据库操作并将结果返回给弹出窗口。
执行一些修改后，我将表单提交给操作类 A 中名为“save()”的操作方法，并将结果页面返回到相同的弹出窗口。
问题是当我关闭弹出窗口时，该操作再次执行并在控制台和异常中显示空值。
我认为这可能是由于浏览器造成的，所以我在弹出窗口中的点击事件上尝试了**event.returnValue=false**，但我仍然面临这个问题。
我开始了解struts2中的令牌拦截器。但是当我在页面中使用标签时，它会显示 404 错误。
我将感谢那些提供一些与在 struts2 中使用令牌拦截器和瓷砖相关的示例..
Struts.xml

```
<action name="*Com" method="{1}" class="com.act.A">
    <result name="add" type="tiles">add</result>
    <result name="edit" type="tiles">edit</result>
    <result name="save" type="tiles">save</result>
    <result name="savesuccess" type="tiles">savesuccess</result> 
```

父页面弹窗打开代码：

```
editwindow=window.open("editCom?id="+id+"&name="+name+"..and son on","edit","width=605px,height=270px,channelmode=no,left=250px,location=no,menubar=no,status=no,titlebar=no,toolbar=no,top=250px,scrollbars=yes,resizable=no"); 
```

Popwindow编辑窗口表单提交代码

```
<form name="editpage" action="saveCom" method="post">
   .......... 
```

单击提交按钮后，它会在同一个弹出窗口中打开一个新页面，如下所示

```
<html>
<script type="text/javascript">
function check1(){
window.opener.location="savesuccessCom";
}
</script>

<body onunload="check1">
<form name="editsave" method="post" action="" >
.....
<p>Changes Saved Successfully</p>
<input type="button" name="Saved" id="Save" value="Save" onclick="self.close();event.returnValue=false;"/>
</form>
</body>
</html> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:34:56.703

在第二页中，您给出的操作是 action=""。

我认为由于该操作 =“”，页面会刷新。

我相信您没有将任何值从该页面传递到下一页，因为您正在使用按钮中的 self.close() 关闭页面。

因此，删除该表单标签并重试。这将解决问题:-)

# c# - 使用 linq 从 select new 中返回多行

> ID：13289422
> 
> 赞同：2
> 
> 时间：2012-11-08T12:51:18.993
> 
> 标签：c#, .net, linq, linq-to-objects

我们需要将数据从表中的行转置到输出表，以便为输入表中的每一行返回多行。在输出的每一行中提取数据的逻辑取决于输入行的给定列中是否存在值。

例如

输入表

A、B、C、D、E、F

输出表

A, B, C, [如果 D 中存在值，则对 D 中的值进行一些操作]

A, B, C, [如果 E 中存在值，则对 E 中的值进行一些操作]

A, B, C, [如果 F 中存在值，则对 F 中的值进行一些操作]

为此，我打算这样做：

```
private IEnumerable<OutputRow> BuildOutputTable(DataTable inputTable)
{
    var outputRows = from inputRow in inputTable.AsEnumerable()
                     select new outputRow(inputRow, *delegateToProcessor*);
    return gbbOutputRows;
} 
```

但这需要我对每个附加值列进行迭代。我可以避免这种情况并只传递一个委托，以便“选择新输出行”返回多行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:58:26.763

创建一个这样的函数：

```
public IEnumerable<OutputRow> GetOutputRows(InputRow input)
{
    if ( ** some condition on input.D ** )
        yield return new OutputRow(inputRow, *delegateToProcessor*);
    if ( ** some condition on input.E ** )
        yield return new OutputRow(inputRow, *delegateToProcessor*);
    if ( ** some condition on input.F ** )
        yield return new OutputRow(inputRow, *delegateToProcessor*);
} 
```

你的查询是这样的：

```
var outputRows = from inputRow in inputTable.AsEnumerable()
                 from row2 in GetOutputRows(inputRow)
                 select row2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:01:47.807

我会做：

```
var DRows = from inputRow in inputTable.AsEnumerable()
                 where inputRow.D == 'some value'
                 select new outputRow(inputRow, *delegateToProcessor*)

var ERows = from inputRow in inputTable.AsEnumerable()
                 where inputRow.E == 'some value'
                 select new outputRow(inputRow, *delegateToProcessor*)

var FRows = from inputRow in inputTable.AsEnumerable()
                 where inputRow.F == 'some value'
                 select new outputRow(inputRow, *delegateToProcessor*)

return DRows.Union(ERows).Union(FRows); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:32:46.167

那这个呢：

```
private IEnumerable<OutputRow> BuildOutputTable(DataTable inputTable)
{
    var tmp = from inputRow in inputTable.AsEnumerable()
              select new { x = getProcessedRows(inputRow)};
    var outputRows = tmp.SelectMany(x=>x.x);
    return outputRows;
}

private IEnumerable<OutputRow> getProcessedRows(YourInputRowType inputRow)
{
    List<OutputRow> ret = new List<OutputRow>()
    /* some logic here to generate the output rows for this input row */
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:04:35.253

linq的select语句一次只能选择1个对象。但是，您可以选择一个组，然后进行联合。
结果看起来像这样：

```
 public static void test()
        {
            var data = new List<String>{"a","b","c","d"};
            var outputRows = from inputRow in data
                             select Expand(inputRow);
            var result = new List<String>();
            outputRows.ToList().ForEach(r=>result = r.Union(result).ToList());
        }

        private static List<String> Expand(string data)
        {
            var subdata = new List<String>();
            subdata.Add(data + "1");
            subdata.Add(data + "2");
            return subdata;
        } 
```

# mysql - wordpress mysql_num_rows 查询

> ID：13289425
> 
> 赞同：0
> 
> 时间：2012-11-08T12:51:27.857
> 
> 标签：mysql, wordpress

我在 wordpress 安装上运行以下查询，以计算数据库中某个 post_type 中有多少帖子具有相同的标题。

当我回显 $title 这将显示正确的信息，并拉入所有具有相同标题的帖子。

但是在下面的查询中，尽管有帖子存在，但输出显示为“0 Rows”。

下面的查询中的一切似乎都正常，还是我遗漏了什么？

```
<?php

$title = get_the_title();
$result = mysql_query("SELECT * FROM wp_posts WHERE post_title='$title'");
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";

?> 
```

干杯，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:53:17.153

你为什么不尝试查询：

```
$query = "SELECT * FROM wp_posts WHERE post_title='".$title."'"; 
```

我还建议您使用 PHP PDO 而不是 mysql_ 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:50:03.937

我发现 get_the_title(); 实际上并没有工作，而是我不得不使用以下方法获取帖子 ID，然后从帖子 ID 中获取标题：

```
$queried_post = get_post($post_id);
$title = $queried_post->post_title; 
```

结果是：

```
<?php

$queried_post = get_post($post_id);
$title = $queried_post->post_title;
$result = mysql_query("SELECT * FROM wp_posts WHERE post_type='bookings' AND post_title='".$title."'");
$rows = mysql_num_rows($result);

?> 
```

感谢所有的帮助家伙！

# iphone - 如何在不拉伸特定尺寸的情况下显示图像

> ID：13289433
> 
> 赞同：0
> 
> 时间：2012-11-08T12:51:55.780
> 
> 标签：iphone

我正在开发一个应用程序。在那我想显示图像。可用空间为`1000X500`. 现在我必须检查图像的宽度和高度是否超过该尺寸。我做了那个，如果尺寸大于`1000X500`然后我将该图像尺寸设置为该尺寸。

我的问题是如果该图像尺寸小于`1000X500`然后我想增加该图像的尺寸。如果我增加尺寸然后图像将被拉伸。所以我想增加尺寸并找出该图像的确切尺寸。

并将该图像设置为该确切尺寸。而且我还必须保持纵横比。

# hadoop - 多个表的多次插入覆盖查询在所有临时表中存储相同的结果

> ID：13289436
> 
> 赞同：3
> 
> 时间：2012-11-08T12:52:13.470
> 
> 标签：hadoop, hive

我正在对多个表进行多个 INSERT OVERWRITE 查询，以便仅扫描数据集 1 次，最终我得到所有这些表的内容相同！返回结果的 GROUP BY 查询似乎覆盖了所有临时表。

这是行为不端的查询：

```
FROM nikon
INSERT OVERWRITE TABLE e1
SELECT qs_cs_s_aid AS Emplacements, COUNT(*) AS Impressions
WHERE qs_cs_s_cat='PRINT' GROUP BY qs_cs_s_aid
INSERT OVERWRITE TABLE e2
SELECT qs_cs_s_aid AS Emplacements, COUNT(*) AS Vues
WHERE qs_cs_s_cat='VIEW' GROUP BY qs_cs_s_aid
; 
```

它只启动一项 MR 作业，结果如下。为什么表“e1”包含表“e2”的结果？！表 'e1' 应该是空的（请参阅下面的个别 SELECT）

```
hive> SELECT * from e1;
OK
NULL    2
1627575 25
1627576 70
1690950 22
1690952 42
1696705 199
1696706 66
1696730 229
1696759 85
1696893 218
Time taken: 0.229 seconds

hive> SELECT * from e2;
OK
NULL    2
1627575 25
1627576 70
1690950 22
1690952 42
1696705 199
1696706 66
1696730 229
1696759 85
1696893 218
Time taken: 0.11 seconds 
```

这是单个查询的结果（只有第二个查询返回结果集）：

```
hive> SELECT qs_cs_s_aid AS Emplacements, COUNT(*) AS Impressions FROM nikon
WHERE qs_cs_s_cat='PRINT' GROUP BY qs_cs_s_aid;
(...)
OK
      <- There are no results, this is normal
Time taken: 41.471 seconds

hive> SELECT qs_cs_s_aid AS Emplacements, COUNT(*) AS Vues FROM nikon
WHERE qs_cs_s_cat='VIEW' GROUP BY qs_cs_s_aid;
(...)
OK
NULL  2
1627575 25
1627576 70
1690950 22
1690952 42
1696705 199
1696706 66
1696730 229
1696759 85
1696893 218
Time taken: 39.607 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:51:32.873

我创建的 HIVE-3699 的 jira 问题已得到修复。补丁在那里可用，应该与 hive-0.11 合并。Cloudera 4.2-rc 包含补丁

# maven - 包含基于继承的类的 Java 文档

> ID：13289437
> 
> 赞同：1
> 
> 时间：2012-11-08T12:52:15.297
> 
> 标签：maven, javadoc, maven-javadoc-plugin, doclet

请注意，我已经编写了“Java 文档”，因为我不一定期望 javadoc 实用程序能够实现我所追求的（更不用说我正在使用的 maven-javadoc-plugin）。

我需要生成一个文档站点，其中仅包含扩展/实现特定接口的类，不幸的是，这些类似乎没有安排在逻辑包结构中，允许我通过过滤包路径来做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:03:32.817

您可以创建自己的自定义 Doclet，扩展[标准 doclet](http://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/standard-doclet.html)，但只生成您需要的类。[请参阅有关使用带有 maven javadoc 插件的备用 doclet](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/alternate-doclet.html)的文档。

# app-store - iTunes Connect - 应用名称已被使用

> ID：13289439
> 
> 赞同：0
> 
> 时间：2012-11-08T12:52:18.443
> 
> 标签：app-store, itunes, app-store-connect

在 iTunes Connect 中，我想创建一个名为“Travelogue”的应用程序，但它说该应用程序名称已被使用。

在 iTunes 和应用商店进行广泛搜索后，我没有看到名称为“Travelogue”的结果

我之前也没有创建过名为“Travelogue”的应用程序；所以，它不能被锁定。

这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:37:31.230

也许另一个开发人员使用该名称创建了该应用程序，但尚未获得批准，这就是它没有出现在应用程序商店中的原因。它可能仍处于初始开发阶段。在 iTunes/app store 上搜索只会显示已发布的应用程序。

# angularjs - 使用 ng-switch 作为标签会破坏 css

> ID：13289443
> 
> 赞同：2
> 
> 时间：2012-11-08T12:52:41.033
> 
> 标签：angularjs

我有以下内容：

```
<li ng-repeat="breadcrumb in breadcrumbsService.getAll()">
  <ng-switch on="$last">
    <a ng-switch-when="true" href="#">{{breadcrumb.name}}</a>
    <a ng-switch-default href="#{{breadcrumb.path}}">{{breadcrumb.name}}</a>
  </ng-switch>
</li> 
```

但这打破了我的 css（引导程序），因为它有时使用直接后代选择器（示例）：

```
ul > li > a {
 ....
} 
```

css 必须重构为 ul li a { //... }

有解决方法吗？如果可能的话，我想告诉 angular 不要为指令生成标签。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T12:52:41.033

您可以将 ng-switch 用作属性而不是元素。请参阅此演示：[http](http://plnkr.co/edit/nKiCn8?p=preview) ://plnkr.co/edit/nKiCn8?p=preview 。

```
<li ng-repeat="breadcrumb in breadcrumbs" ng-switch="breadcrumb.path">
    <a ng-switch-when="/c" href="#">{{breadcrumb.name}}</a>
    <a ng-switch-default href="#{{breadcrumb.path}}">{{breadcrumb.name}} - default</a>
</li> 
```

# sql-server - 带有附件的数据库电子邮件（excel 文件/pdf 文件）？

> ID：13289446
> 
> 赞同：4
> 
> 时间：2012-11-08T12:52:50.807
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我必须将邮件从数据库发送到带有附件的邮件 ID。

```
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'Adventure Works Administrator',
    @recipients = 'danw@Adventure-Works.com',
    @query = 'SELECT COUNT(*) FROM AdventureWorks2012.Production.WorkOrder
                  WHERE DueDate > ''2004-04-30''
                  AND  DATEDIFF(dd, ''2004-04-30'', DueDate) < 2' ,
    @subject = 'Work Order Count',
    @attach_query_result_as_file = 1 ; 
```

从这段代码中，我得到了 txt 文件中的结果。但**我想在 pdf 文件或 excel 文件中获取查询结果**

任何已知的方法请与我分享。

提前谢谢！！！:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-24T15:00:48.590

这会将您的查询结果附加为 csv，如果您更喜欢该格式，只需将其更改为 filename.xls。我认为 csv 效果更好，使用 excel 您可能会收到一条警告，指出该文件的格式与扩展名指定的格式不同。

我还使用 CHAR(9) 或 TAB 作为查询结果分隔符，您可以将其更改为适合您的任何内容。

我还在您的查询中添加了 SET NOCOUNT ON，如果您没有，您将在您的 excel 文件末尾得到（1000 行受影响）（无论您的查询返回多少行）。

```
DECLARE
    @tab char(1) = CHAR(9)

EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'Adventure Works Administrator',
    @recipients = 'danw@Adventure-Works.com',
    @query = 'SET NOCOUNT ON 
              SELECT COUNT(*) FROM AdventureWorks2012.Production.WorkOrder
              WHERE DueDate > ''2004-04-30''
              AND  DATEDIFF(dd, ''2004-04-30'', DueDate) < 2' ,
    @subject = 'Work Order Count',
    @attach_query_result_as_file = 1,
    @query_attachment_filename='filename.csv',
    @query_result_separator=@tab,
    @query_result_no_padding=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T10:34:04.810

一种方法是使用扩展存储过程 xp_sendmail。它确实需要您配置 MAPI 配置文件和 SQL Mail。然后可以这样使用：

```
xp_sendmail
@recipients = 'email@domain.com',
@subject = 'Query Results',
@query = 'SELECT fname, lname FROM Employees WHERE empid = 9' 
```

在上面的示例中，查询的结果将包含在电子邮件中。在 SQL Server 联机丛书中阅读有关 xp_sendmail 附加参数的更多信息。它们控制查询的执行方式（数据库上下文、数据库用户）以及查询的显示方式（标题、格式、将查询结果附加到文件中）。

以下是有关配置 SQL 邮件的更多信息：http: [//support.microsoft.com/kb/q263556/](http://support.microsoft.com/kb/q263556/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:47:21.960

是否有任何理由必须由 SQL 服务器创建附件？

我不认为这可以做到，因为查询结果是文本并且 sql 引擎不知道 PDF 或 excel。您可以使用 XML PATH 属性将结果编写为 HTML 脚本（本页底部的示例：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)）。

我想您可以使用类似的方法来构建 xml 字符串，然后在 @query_attachment_filename 变量中使用 .xlsx 扩展名。Excel 2007+ 本质上是一个 openxml 文件，但我不确定这将是多么容易/可行。

# java - 在 Java 中带有永久提示的 EditText

> ID：13289447
> 
> 赞同：1
> 
> 时间：2012-11-08T12:52:50.540
> 
> 标签：java, android, android-edittext

我有`EditText`一些信息。当没有信息时，我使用`setHint()`.

```
final EditText info = new EditText(activity);
if (data.getinfo() != null && !data.getAddress().trim().equals("")) {
    info.setText(data.getinfo());
} else {
    info.setHint(R.string.info);
} 
```

即使`EditText`有信息，我也想显示该标题，该信息应位于标题下方。

我尝试使用`setText()`. 但这也没有用。

```
if (condition) {
    info.setText(R.string.info);
    info.setText(data.getinfo());
} else {
    info.setHint(R.string.info);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T13:01:39.313

在 a中，`RelativeLayout`使用 a`TextView`作为`View`. `EditText`使用合适的颜色、字体大小来达到你想要的效果。

这是一个提示

```
<RelativeLayout …&gt;
    <EditText android:id="@+id/name" 
        android:layoutWidth="match_parent"
        android:layoutHeight="wrap_content" >

    <TextView android:id="@+id/name_hint" 
        android:layoutWidth="wrap_content"
        android:layoutHeight="wrap_content"
        android:gravity="left|center_vertical"
        android:layout_alignLeft="@id/name"
        android:layout_alignRight="@id/name"
        android:layout_alignTop="@id/name"
        android:layout_alignBottom="@id/name"
        android:layout_alignBottom="@id/name" >
</RelativeLayout> 
```

这只是一个起点，你可以调整你的高度`EditText`，定位你的`TextView`，改变它`gravity`的等等，来达到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:57:16.507

您可以通过在 UI 布局中添加的 xml 标记直接执行此操作。

# ios - 为什么使用 UIGraphicsPushContext/UIGraphicsPopContext

> ID：13289455
> 
> 赞同：2
> 
> 时间：2012-11-08T12:53:25.667
> 
> 标签：ios

我注意到 MBProgressHUD 中的以下代码（[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)）

```
- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();
    UIGraphicsPushContext(context);
    //do something
    UIGraphicsPopContext();
} 
```

我想知道“推送的上下文”也是当前的上下文，为什么作者在绘制之前要推送上下文。

评论说：

> 使用 UIGraphicsPushContext() 和 UIGraphicsPopContext() 来保存调用者图形上下文 wrt 这个 drawRect: 可能设置的项目 ( [https://github.com/jdg/MBProgressHUD/commit/06d5bf88b9afffa7142e543606917033f157ba5e](https://github.com/jdg/MBProgressHUD/commit/06d5bf88b9afffa7142e543606917033f157ba5e) )

什么意思？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:00:20.317

这是一件值得怀疑的事情，因为据我所知，这完全没有意义。以下是会发生什么的逐个播放：

1.  视图被标记为脏，需要重绘
2.  将创建一个图形上下文并在内部推送以供视图绘制。
3.  作者通过以下方式接收到指向该上下文的指针`UIGraphicsGetCurrentContext()`
4.  作者再次推送相同的上下文。
5.  作者画了一些
6.  作者将上下文从堆栈中弹出（仍然保留相同的上下文）
7.  在内部，上下文堆栈再次弹出。

作者可能认为他们需要避免破坏当前的图形上下文，但这不是一个有效的问题，因为每次都会创建一个独占上下文`drawRect`

据我所知， push 和 pop 函数的原因是封装了专门的上下文，例如为`drawRect`. 您可以在内部创建它，将其推送到堆栈上，外部类可以通过它接收它，`UIGraphicsGetCurrentContext()`而无需了解其实现细节。完成后弹出它。

保存和恢复 G 状态更类似于 OpenGL 用于恢复到先前矩阵的用途。

# codeigniter - 访问日志中的 ip 地址 0.0.0.0

> ID：13289469
> 
> 赞同：3
> 
> 时间：2012-11-08T12:54:45.613
> 
> 标签：codeigniter, expressionengine

在我将 EE 升级到 2.5.3 后，我们维护的站点的一位管理员无法登录 CP

我在访问日志中看到的是，在此之前，她总是（成功）从 ip 地址 0.0.0.0 登录。我猜她现在仍然试图从这个 ip 登录，但是 EE 阻止了这个。

有什么我可以做的，还是她当地情况造成的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:41:23.363

如果你去 Admin ➔ Security & Privacy ➔ Security & Sessions 你是否启用了“需要 IP 地址”？如果是这样，禁用它应该可以解决问题。

也就是说，与其禁用安全功能，不如调查一下为什么没有检测到她的 IP 地址。根本问题可能是本地问题，而不是 EE 问题。

# java - 更改服务器/应用程序的配置后，我们是否需要重新启动 Glassfish 服务器/应用程序

> ID：13289473
> 
> 赞同：0
> 
> 时间：2012-11-08T12:54:49.293
> 
> 标签：java, jakarta-ee, glassfish

目前在 glassfish 3.1 上并在 GUI 模式下工作

我想知道添加新领域/用户/组时是否需要重新启动 glassfish 服务器

和

修改web.xml/SUN-WEB.xml后是否需要重启应用

谢谢。

# android - WifiManager 做奇怪的事情 (Android)

> ID：13289483
> 
> 赞同：0
> 
> 时间：2012-11-08T12:55:33.590
> 
> 标签：android, wifimanager, wifi

伙计们，我需要帮助。我已经研究这个问题好几天了，非常绝望。

我开发了一个 Android 应用程序，它会查找以某些前缀开头的无线网络（例如 MyWifi_）。如果它找到具有此前缀的网络，它会尝试建立连接。

问题在于，在某些设备中，它可以连接，但在其他设备中，它找到了网络但从不连接。接入点始终具有以下配置：

```
netConfig = new WifiConfiguration();
netConfig.SSID = "my_prefix" + USER_NICK;
netConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
netConfig.status = WifiConfiguration.Status.ENABLED;
netConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
netConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
```

和我的连接代码：

```
WifiConfiguration wc = new WifiConfiguration();
wc.SSID = "\"" + network.SSID + "\"";  //'network' is the found network
wc.BSSID = network.BSSID;
wc.priority=1;
wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
wc.status = WifiConfiguration.Status.ENABLED;
int netId = wifi.addNetwork(wc);  <---this is working fine... it adds the network
wifi.enableNetwork(netId, true); 
```

我的 WifiConfiguration 有问题吗？我尝试更改几件事（WEP、WPA、OPEN、仅通过 BSSID 连接），但似乎没有任何东西可以解决我的问题。您是否有任何一直为您工作的 WifiConfiguration（作为接入点和客户端）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:20:53.753

也许是因为优先级（它只是 1）。wpa_supplicant 可能决定不连接到优先级最低的网络。尝试删除此行。然而，这只是一个理论。

# java - 在java中读取html文件

> ID：13289484
> 
> 赞同：0
> 
> 时间：2012-11-08T12:55:38.350
> 
> 标签：java, bufferedreader, file-read

在 java 中，我必须阅读多个文件来搜索一些文本。文件包含大量 html 数据，因此在以下代码的帮助下很难读取 html 文件的内容。是使用 java 获取文件内容的任何直接方法。我正在使用以下代码，但它使我的应用程序变慢建议我使用它的最佳替代方案

```
try{
   FileReader fr=new FileReader("path of the html file");
   BufferedReader br= new BufferedReader(fr);
    String content="";
   while((s=br.readLine())!=null)
    {

     content=content+s;

    } 

     System.out.println("content is"+content);
   }
  catch(Exception ex)
   {

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:02:25.957

在循环中完成字符串连接总是很慢

您需要将其更改为使用 StringbBuilder 并为该 StringBuilder 提供一个不错的起始大小。

```
FileReader fr=new FileReader("path of the html file");
BufferedReader br= new BufferedReader(fr);
StringBuilder content=new StringBuilder(1024);
while((s=br.readLine())!=null)
    {
    content.append(s);
    } 
```

# php - 使用自定义标签在 php 中显示图像或视频

> ID：13289486
> 
> 赞同：1
> 
> 时间：2012-11-08T12:55:51.793
> 
> 标签：php, javascript, html, forms, tags

我在我的简单内容管理系统中添加了这样的表单按钮。我写文章等。所以我也想添加图片和视频。我想通过自定义标签添加它们

```
 function formatText (el,tagstart,tagend) { 

    if (el.setSelectionRange) {
    el.value = el.value.substring(0,el.selectionStart) + tagstart + el.value.substring(el.selectionStart,el.selectionEnd) + tagend + el.value.substring(el.selectionEnd,el.value.length)
    }
    else {
    var selectedText = document.selection.createRange().text;

    if (selectedText != "") { 
        var newText = tagstart + selectedText + tagend; 
        document.selection.createRange().text = newText; 
    } 

    }

} 

<form name="my_form"> 
<textarea name="my_textarea" id="mytext"></textarea><br /> 
<input type="button" value="IMAGE" onclick="formatText (document.getElementById('mytext'),'[IMAGE]','[/IMAGE]');" /> 
```

这是将 [IMAGE] [/IMAGE] 标签添加到我的文本区域，我想在提交表单后显示此标签之间的图像链接。同样，我想添加 [VIDEO] [/VIDEO] 标签，如果我在这些标签之间编写 youtube 链接，则在显示页面时显示视频。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:05:49.890

**编辑： OP 最终澄清需要 PHP 代码答案（请参阅我的其他答案）。将其留在这里以防其他人需要 JS 解决方案。**

很难测试这段代码（jsfiddle 不适合我），但我认为这应该有效：

对于 youtube 视频：

```
var el = document.getElementById('<your element id>');
while(true){
    var match = '/\[VIDEO\](https?:\/\/)?(www.)?youtube.com(\/watch\?v=|\/?\?)?(\w*)\[\/VIDEO\]/im.exec(el.innerHTML);
    if(match==null)break;
    el.innerHTML=el.innerHTML.replace(match[0],'<iframe width="420" height="315" src="http://www.youtube.com/embed/'+match[1]+'" frameborder="0" allowfullscreen></iframe>');
}​ 
```

您想为图像做类似的事情。请注意，如果您对元素中的任何元素有任何引用，它们将被破坏。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:50:47.430

这段代码应该可以工作。有关更多解释，请参阅评论。

```
//The data for this variable would be read from a database, user input, etc.
$content = "Non augue, ultrices[VIDEO]www.youtube.com/?vvddee[/VIDEO] ut elementum natoque tempor placerat. Egestas, penatibus urna, dis risus habitasse. Rhoncus augue urna porta, enim cum risus eu tortor in, p[IMAGE]images/abcde.png[/IMAGE]lacerat rhoncus mus tortor? Nec, magnis, enim elementum non urna eros augue, ridiculus porta dapibus? Parturient, dictumst nunc vel turpis! Eu eros vel tempor cum in.";

//Replace custom video tag with youtube embed
preg_match_all('/\[VIDEO\](https?:\/\/)?(www.)?youtube.com(\/watch\?v=|\/?\?)?(\w*)\[\/VIDEO\]/im', $content, $matches, PREG_SET_ORDER);
foreach($matches as $match){
    $content = str_replace($match[0],'<iframe width="420" height="315" src="http://www.youtube.com/embed/'.$match[4].'" frameborder="0" allowfullscreen></iframe>',$content);
}

//Replace custom image tag with html image tag
preg_match_all('/\[IMAGE\](.*)\[\/IMAGE\]/im', $content, $matches, PREG_SET_ORDER);
foreach($matches as $match){
    $content = str_replace($match[0],'<img src="'.$match[1].'"></image>',$content);
}
echo $content; 
```

希望这可以帮助。

# php - 用 PHP 归档的 BLOB URL

> ID：13289488
> 
> 赞同：3
> 
> 时间：2012-11-08T12:56:02.553
> 
> 标签：php, javascript, blob, fileapi

我正在尝试创建一个文件预览系统。

当用户单击上传按钮并选择文件时，我使用 HTML5 FILE API 获取所有文件信息并为文件创建缩略图。

用户可以取消部分文件的上传，也可以添加更多文件。

我现在拥有的是这样的：

```
<p><input id="blob" name="blob" type="file" size="75" multiple /></p>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input id="blobtype" name="blobtype" type="text" size="20" />
<input id="bloburl" name="bloburl" type="text" size="50" />
<input id="salvar" name="salvar" type="submit" value="salvar" />
</form>
<p id="result"></p> 
```

还有我的 javascript：

```
function cbu(file)
{
if (window.URL){ return window.URL.createObjectURL(file);}
else if (window.webkitURL){ return window.webkitURL.createObjectURL(file);}
else if (window.createObjectURL){ return window.createObjectURL(file);}
else if (window.createBlobURL){ return window.createBlobURL(file); }
}

document.getElementById("blob").onchange = function(event)
{
var result = document.getElementById("result");
var i = 0, j = event.target.files.length;
for (i = 0; i < j; i++)
{
    var url = cbu(event.target.files[i]);
    var img = document.createElement("img");
    img.onload = function(){ }
    result.appendChild(img);
    img.src = url;
    document.getElementById("blobtype").value = event.target.files[i].type;
    document.getElementById("bloburl").value = url;
    }
}; 
```

它会生成这样的缩略图：

```
<img src="blob:b9a8e310-05b3-48ba-ba24-9ca7cf287f71"> 
```

当用户提交表单时，此值`blob:b9a8e310-05b3-48ba-ba24-9ca7cf287f71`将发送到 PHP 文件。

所以我的问题是，如何将此 blob url 转换为文件，以便将其保存在我的应用程序中？

有更好的方法吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:47:18.093

好吧，我一直在寻找解决方案，我找到了这个：Canvas。

Canvas 元素具有 toDataUrl() 方法，该方法返回其包含的图像的数据 URL。

所以我一直在做同样的事情，但是当我提交表单时，我使用以下函数：

```
function putImage(){
    var url = document.getElementById("img1").src; // 'img1' is the thumbnail - I had to put an id on it
    var canvas = document.getElementById("MyCanvas");
    if (canvas.getContext) {
        var ctx = canvas.getContext("2d");

        var img = new Image();
        img.src = url;
        img.onload = function () {
            // Desenha a imagem no canvas...
            ctx.drawImage(img,0,0);

            // Grava o Data URL na imagem...
            var myImage = canvas.toDataURL("image/png");
            document.getElementById("dataurl").value = myImage;
        }
    }
}; 
```

我在画布的页面上再创建一个元素：

```
<canvas id="MyCanvas">This browser or document mode doesn't support canvas</canvas> 
```

以及表单上用于保存数据 URL 的另一个元素：

```
<input id="dataurl" name="dataurl" type="text" size="50" /> 
```

好吧，现在我可以在 PHP 中获取所有内容并执行以下操作：

```
if($_POST)
{
    //echo '<pre>'; print_r($_POST); echo '</pre>';

    $blob = $_POST['bloburl'];
    $type = $_POST['blobtype'];
    $data = $_POST['dataurl'];

    $contents_split = explode(',', $data);
    $encoded = $contents_split[count($contents_split)-1];
    $decoded = "";
    for ($i=0; $i < ceil(strlen($encoded)/256); $i++) {
        $decoded = $decoded . base64_decode(substr($encoded,$i*256,256)); 
    }

    $fp = fopen('imagembaixada.jpg', 'w');
        fwrite($fp, $decoded);
        fclose($fp);
    }
} 
```

现在我的图像已保存。

它有效，但看起来效率很低。

如果有人知道在上传之前为图像创建预览的更好方法，请告诉我！

# iphone - 如何在将字典的所有键和值转换为数组时保持排序顺序

> ID：13289491
> 
> 赞同：0
> 
> 时间：2012-11-08T12:56:15.970
> 
> 标签：iphone, nsdictionary

我的字典响应如下

```
 responceDict=  {
 "2012-11-01" = 46700;
 "2012-11-02" = 27400;
 "2012-11-03" = 19400;
 "2012-11-04" = 15100;
} 
```

我想在两个数组中获取两个值，例如

```
 arrayDate=[2012-11-01,2012-11-02,2012-11-03,2012-11-04]
 arrayVal=[46700,27400,19400,15100]; 
```

我用过

```
 arrayDate = [[NSMutableArray alloc] init];
 arrayVal = [[NSMutableArray alloc] init];

    for (id obj in responceDict.allKeys ) {
       // NSLog(@"%@  %@",obj,[responceArr valueForKey:obj]);
        [arrWaterReport addObject:obj];
        [arrDischarge addObject:[responceArr valueForKey:obj]];
    } 
```

但在这我不能按其排序顺序维护日期顺序。

那么有人会建议我如何维护它的排序顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:23:27.710

`NSDictionary`未排序。它是一个哈希表，而不是一个有序列表。将商品移至`NS[Mutable]Array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:55:32.093

我有解决方案

```
 for (id obj in [[responceDict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)])
    {
        [arrayDate addObject:obj];
        [arrValue addObject:[responceDict valueForKey:obj]];
    } 
```

谢谢

# servicestack - servicestack.text 公共静态类 JsonReader.GetParseFn？

> ID：13289499
> 
> 赞同：1
> 
> 时间：2012-11-08T12:56:48.460
> 
> 标签：servicestack

JsvReader 类是公共的，因此可以在 Servicestack StringMapTypeDeserializer 类中使用。

内部 JsonReader 类是否有机会也可以出于类似原因公开？

[https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/Json/JsonReader.Generic.cs](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/Json/JsonReader.Generic.cs)

# cocos2d-iphone - 使用粒子的降雪效果

> ID：13289500
> 
> 赞同：0
> 
> 时间：2012-11-08T12:56:47.373
> 
> 标签：cocos2d-iphone

我正在尝试使用 cocos2d 创建应用程序。我已经使用粒子系统创建了降雪效果，但我无法将雪花固定在物体上。简而言之，降雪应该落在一个人身上，一些雪花应该留在头上。此外，当您摇动 iPad 时，雪花应该会落下。请让我知道如何实现上述目标？我需要处理这个紧急的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:39:40.453

如果我是你，我不会以编程方式进行，而是为一个人设置三个不同的精灵集：

*   为人设置的正常精灵。
*   雪碧为他身上有雪的人设置。
*   雪碧设置为雪少且身体周围有雪的人（用于在 iPad 上摇晃）

然后根据情况使用它们。

# iphone - 如何更改目标 C 中的 DatePicker 样式

> ID：13289502
> 
> 赞同：0
> 
> 时间：2012-11-08T12:56:54.270
> 
> 标签：iphone, objective-c, xcode, datepicker, uidatepicker

我在 IUViewController 中实现了 DatePicker，并将“datepicker locale”更改为 France - French，但它仍然是用英文编写的。我对仅时间的日期选择器做了同样的事情，我仍然得到上午和下午。我必须直接在 .m 文件中更改它吗？像这样： DatePicker.locale = french; // 我刚刚发明了这个，它可能不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:20:05.237

1)**检查**，如果实际设置了正确的语言环境：

将以下代码添加到您的 viewController 以检查加载 nib 文件后的实际语言环境（我假设您确实为您的 DatePicker named 设置了一个 IBOutlet `datePicker`）：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  NSLog(@"%@", self.datePicker);
  NSLog(@"%@", self.datePicker.locale.localeIdentifier);
} 
```

这应该记录`fr_FR`您的情况。

2）**在真机上测试！**这一点，如果模拟器可能是错误的。

3）在手机上使用**各种语言/地区设置进行测试。**

# python - 需要从文本文件创建列表

> ID：13289506
> 
> 赞同：4
> 
> 时间：2012-11-08T12:57:07.593
> 
> 标签：python, list, list-comprehension

我需要在包含 1,000 个条目的文本文件中返回一个对列表（datetime.date(x,y,z)，它出现的次数）。该函数`def eventfreq(year, month):`将前面提到的 datetime.date 的年份和月份作为参数。到目前为止，我已经定义了年和月

```
def eventfreq(year, month):
    F=fieldict('DOT1000.txt')
    for line in F:
        year=F[1].year
        month=F[1].month 
```

fieldict 是一个函数，它为文件中的每个条目返回一个 (Manufacturer, datetime.date(), year, crash, injury) 元组。我只需要它从每个条目中提取日期时间。我对python很陌生，我整夜都在研究其中的几个函数。

编辑：示例数据：

503 958504 GENERAL MOTORS CORP. CHEVROLET LUMINA 1990 19920606 N 0 0 行车制动器，液压：基础组件：盘：卡钳 DRACUT MA 2G1WN14T9L9 19950110 19950110 卡钳冻结问题。TT EVOQ

这是 1,000 中的 1 个条目。我需要有关如何构建我的对列表的建议 [(datetime.date(), #of 在文件中出现)]。年和月是函数的参数

编辑：测试用例：

```
>>> evlist = eventfreq(1995,1)
>>> len(evlist)
17
>>> evlist[0]
(datetime.date(1995, 1, 1), 5)
>>> evlist[14]
(datetime.date(1995, 1, 15), 1) 
```

编辑：另一个示例条目：

1332 477660 HONDA (AMERICAN HONDA MOTOR CO.) ACURA INTEGRA 1994 **19940601** N 0 0 能见度：挡风玻璃 TUSTIN CA JH4DC4359RS 19950112 19941112 1 窗口问题。*AK VOQ

粗体字是日期。我已经拥有 datetime.date 格式（导入的 datetime 模块），并且在每个条目中都位于相同的位置。需要一个包含对的列表 (datetime.date(year,month,day) , #在文件中出现相同**年份**和**月份的次数)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:58:36.303

假设您知道如何将文件中的整数日期提取到列表中：

```
import datetime
dates = [19940903, 19940907, 19940801, 19950701, 19950702]
formated_dates = [datetime.datetime.strptime(str(i), '%Y%m%d') for i in dates]
year_month_pairs = [(i.year, i.month) for i in formated_dates]
unique = set(year_month_pairs)
counts = [(i, year_month_pairs.count(i)) for i in unique] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:00:38.853

假设`fielddict()`返回一个元组列表，如下所示：

```
[('m1', datetime.date(1995, 1, 1), 'y1', 'c1', 'i1'),
('m2', datetime.date(1995, 1, 15), 'y2', 'c2', 'i2'),
('m3', datetime.date(1995, 1, 1), 'y3', 'c3', 'i3')] 
```

您的功能`eventfreq()`可能是：

```
def eventfreq(year, month):
    F=fieldict('DOT1000.txt')
    #Get a list of datetimes matching year and month
    lst = [i[1] for i in F if((i[1].year == year) & (i[1].month == month))]
    #return a list of tuples (datetime, count)
    return [(i, lst.count(i)) for i in set(lst)] 
```

现在您的测试用例应该可以按照您的预期工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T13:53:13.453

好的，我尝试从行匹配格式的第一个单词中获取日期`%Y%m%d`（有关更多详细信息，请参见此[链接](http://docs.python.org/2/library/datetime.html?highlight=datetime.date#strftime-strptime-behavior)），它给出了以下内容：

```
>>> dict_dates = {}
>>> from datetime import datetime
>>> for line in open(r'D:\DATA\FP12210\My Documents\Temp\Python\Dates.txt'):
    for word in line.split():
        try:
            # Try to convert
            date = datetime.strptime(word, '%Y%m%d')
            # Conversion succeeded
            dict_dates[date] = dict_dates.get(date, 0) + 1
            break
        except:
            pass

>>> dict_dates
{datetime.datetime(1994, 6, 1, 0, 0): 1, datetime.datetime(1992, 6, 6, 0, 0): 1}
>>> 
```

我用您提供的 2 行创建了一个文件。

# php - 如何使用索引提高查询性能？

> ID：13289509
> 
> 赞同：2
> 
> 时间：2012-11-08T12:57:16.157
> 
> 标签：php, mysql, performance, indexing

```
SELECT t1 . * FROM table1 t1, table1 t2
   WHERE t1.history_id < t2.history_id
     AND (t1.license_id = t2.license_id
        OR (t1.license_id IS NULL AND t2.license_id IS NULL))
     AND t1.op_id = t2.op_id
     AND (t1.service_date = t2.service_date
         OR (t1.service_date IS NULL AND t2.service_date IS NULL))
     AND t1.customer_id = t2.customer_id
     AND t1.serial_id = t2.serial_id. 
```

查询的目的是根据上述查询条件去除重复的行。查询将表“table1”连接到自身。我们创建了带有组索引的索引

1.  license_id
2.  服务日期
3.  客户ID
4.  history_id（主键）
5.  op_id。

它可以正确执行，但添加`OR (t1.service_date IS NULL AND t2.service_date IS NULL)`会使查询执行速度非常慢。该表有 2 个以上的数据缺失。

我们使用了 MySQL`EXPLAIN`命令，这是输出

![在此处输入图像描述](../Images/8b62e774068dcb8abf05fcf347727c2f.png)

如何提高查询执行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:27:17.717

问题是'IS NULL'。请阅读此内容以获取更多信息：[何时使用 IS NULL](https://stackoverflow.com/questions/471367/when-to-use-null-in-mysql-tables/471671#471671)

一种解决方案是从表中删除 NULL 值（例如将其更改为“0”，因为它不是有效的 MYSQL 自动增量值），然后将“IS NULL”更改为“= 0”

# objective-c - 打开应用程序窗口

> ID：13289513
> 
> 赞同：1
> 
> 时间：2012-11-08T12:59:58.380
> 
> 标签：objective-c, xcode, macos, cocoa, applescript

我浏览了 NSWorkspace 文档并得到了这个：

```
(NSRunningApplication *)currentApplication 
```

但是有没有办法找出当前从该应用程序打开了多少（或如果有）窗口？

我知道有一些苹果脚本可以得到它，但沙箱不允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:11:34.277

您需要查看 CoreGraphics 调用`CGWindowListCopyWindowInfo`。

你这样称呼它

```
 CFArrayRef windowList = CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements, kCGNullWindowID); 
```

然后遍历窗口信息数组并用它做你想做的事。

我不确定它是如何受到沙盒影响的。

# ruby-on-rails - 在 Rails 中，如何组织标签以外的表单元素的本地化数据？

> ID：13289515
> 
> 赞同：5
> 
> 时间：2012-11-08T13:00:33.497
> 
> 标签：ruby-on-rails, internationalization

我正在创建我的第一个 Rails 应用程序，它将获得国际化支持。

我已经阅读了[i18n 指南](http://guides.rubyonrails.org/i18n.html)，它是一个很好的来源。它甚至[建议](http://guides.rubyonrails.org/i18n.html#organization-of-locale-files)本地化文件的文件组织，这是一个很好的起点：

```
|-defaults
|---es.rb
|---en.rb
|-models
|---book
|-----es.rb
|-----en.rb
|-views
|---defaults
|-----es.rb
|-----en.rb
|---books
|-----es.rb
|-----en.rb
|---users
|-----es.rb
|-----en.rb
|---navigation
|-----es.rb
|-----en.rb 
```

但是，我不确定保存一些通常在表格中找到的额外（国际化）信息的最佳位置是什么，例如：

*   输入占位符
*   帮助文本（在输入旁边，有更详细的信息）

问题是：此信息与视图有关（与模型无关）。但是，它经常在每个模型、每个属性的基础上进行描述——这使我倾向于将它们放在模型文件中的 activerecord 属性下。

我的问题：放置这些本地化数据的最佳位置是什么？就文件组织（哪个文件夹）和文件内部的组织而言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:43:10.393

我认为这个问题没有“正确”的答案。

我个人倾向于不同意指南建议的组织。i18n 本质上完全属于视图层的领域。将“views”文件夹放在那里有点令人困惑，并且可能导致不止一个开发人员遇到您现在遇到的确切问题。

我建议丢弃这些`views/book`文件并将与模型有关的所有内容保存在同一个文件中。所有翻译都是针对“视图”的，将与单个模型有关的所有翻译保存在一个地方可能更干净且不易出错。

```
# locale/models/model.en (or es, etc)

# all the activerecord translations
activerecord:
  models:
    # ...
  attributes:
    # ...
  errors:
    # ...
# then your form translations.
helpers:
  label:
    # Here you might add overrides for activerecord attribute lookups, but
    # do so with care (see note below).

  # then below are your custom view fields
  placeholders:
    model:
      attribute: 'translation'
  details:
    model:
      attribute: 'translation' 
```

* * *

关于`helpers.label`vs的注释`activerecord.attributes`：

Rails 本身[目前](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/tags/label.rb#L48)在两个地方寻找标签翻译。第一的：

```
helpers:
  label:
    model:
      attribute: 'translation' 
```

回退到 activerecord 翻译：

```
activerecord:
  attributes:
    model:
      attribute: 'translation' 
```

这有点像一个陷阱，因为这意味着表单标签和活动记录错误（以及其他翻译）会有所不同。这很好，例如，如果您希望表单标签更像是一个提示（例如，属性“body”的“Enter the body”），但如果您`helper.label`没有明显提到activerecord 翻译，例如（属性“body”的“Enter the message”）。所以要小心覆盖。

# django - django：在视图开始工作之前获取基本变量

> ID：13289520
> 
> 赞同：0
> 
> 时间：2012-11-08T13:01:50.140
> 
> 标签：django, view, decorator

我有一个这样的问题，我用谷歌搜索了很多，阅读了`decorators`and `middleware`，但我没有明白如何更好地解决我的问题。

我有基本模板`base.html`和模板`template1.html`，`template2.html`它们是`base.html`.

`base.html`有一些通用块，在 和 中是必需`template1.html`的`template2.html`。这个块是动态数据，所以我必须在每个视图中获取这个块的数据，然后渲染模板。

例如我有 2 `views`：

```
@render_to("template1.html")
def fun_1(request):
data = getGeneralData()
#...getting other data
return {
        "data" : data,
        "other" : other_data,
}

@render_to("template2.html")
def fun_2(request):
data = getGeneralData()
#...getting other data
return {
        "data" : data,
        "other2" : other_data2,
} 
```

所以一般来说，我需要这个`getGeneralData`在我的所有视图中都需要这个，我是否可以在我的每个视图`views`中调用`getGeneralData()`函数，或者我可以制作任何函数，`general_data`在任何视图获取自己的数据之前获取并将其渲染到模板？

您能否提供一个代码示例或给我一个很好的链接如何做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:13:38.873

将建议您编写自己的[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)并从那里返回所需的上下文数据。

例子 ：

custom_context_processor.py

```
def ctx_getGeneralData(request):
    ctx = {}
    ctx['data'] = getGeneralData()
    return ctx 
```

在设置文件中，更新`TEMPLATE_CONTEXT_PROCESSORS`为`'custom_context_processor.ctx_getGeneralData'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:28:17.953

您是否考虑过使用 Django 的基于类的视图？它们最初有点难以使用，但它们使这样的事情变得非常简单。以下是我如何使用基于类的视图重写基于函数的视图：

```
# TemplateView is a generic class based view that simply
# renders a template.
from django.views.generic import TemplateView

# Let's start by defining a mixin that we can mix into any view that
# needs the result of getGeneralData() in its template context.

class GeneralContextDataMixin(object):
    """
    Adds the result of calling getGeneralData() to the context of whichever
    view it is mixed into.
    """

    get_context_data(self, *args, **kwargs):
        """
        Django calls get_context_data() on all CBVs that render templates.
        It returns a dictionary containing the data you want to add to
        your template context.
        """
        context = super(GeneralContextDataMixin, self).get_context_data(*args, **kwargs)
        context['data'] = getGeneralData()
        return context

# Now we can inherit from this mixin wherever we need the results of
# getGeneralData(). Note the order of inheritance; it's important.

class View1(GeneralContextDataMixin, TemplateView):
    template_name = 'template1.html'

class View2(GeneralContextDataMixin, TemplateView):
    template_name = 'template2.html' 
```

当然，您也可以像 Rohan 所说的那样编写自己的上下文处理器。*事实上，如果您想将此数据添加到所有*视图中，我建议您这样做。

无论您最终做什么，我都会敦促您研究基于类的视图。它们使许多重复性任务变得非常容易。

进一步阅读：

*   [https://docs.djangoproject.com/en/dev/topics/class-based-views/](https://docs.djangoproject.com/en/dev/topics/class-based-views/)
*   [https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/)

# ruby-on-rails - 如何定制设计以使验证仅在指定条件下进行？

> ID：13289522
> 
> 赞同：1
> 
> 时间：2012-11-08T13:01:57.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经设计了身份验证，但我没有使用可验证的，我发送了请求，然后我发送了一个类型。例如

```
http://localhost:3000/signup/new?type=twitter 
```

在上面显示的我使用`type=twitter`过的情况下，如果是 twitter，我不想验证电子邮件，即不需要，`validates_presence_of :email`但如果我发送 type=email，那么我想检查邮件是否存在以及邮件是否尚未接收并检查指定的邮件是否有效？我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:07:01.620

您可以将以下内容添加到您的控制器：

```
if params[:type] == 'twitter'
  user.save(:validate => false) 
```

但是，我不建议您这样做，因为这样您的数据库中就会有无效数据。如果您在使用 Twitter 登录时实际要求用户输入他的电子邮件，那将是最好的。[Ryan Bates 在关于omniauth 的这一集中](http://railscasts.com/episodes/236-omniauth-part-2)解决了整个挑战。

编辑：我调查了一下，如果你检查设计的源代码，你会注意到他们现在有这个名为[email_required 的方法？](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L57).

因此，您所要做的就是覆盖该方法。你的用户模型看起来如何？您如何允许用户使用 Twitter 登录？如果您编辑您的问题并向我们展示，我们可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:15:33.817

我认为@Ashitaka 有一个很好的观点，他说无论如何你都应该询问用户的电子邮件。

但是，对于您要实现的目标，我将创建自己的验证器类。[您可以在此 rails guide 中](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)了解如何实现这一点。

# algorithm - 瓷砖移动范围生成图案？

> ID：13289526
> 
> 赞同：1
> 
> 时间：2012-11-08T13:02:06.507
> 
> 标签：algorithm, design-patterns, tile

我正在做一个基于瓷砖的游戏。我尝试创建一个返回数组的方法，我的角色可以根据 x,y 坐标和移动限制移动该数组。

例如，如果我输入 currentPosition:(3,3) moveLimit:1

那么它应该还给我 ((3,2),(3,2),(3,4),(4,3))

如果我输入 currentPosition:(3,3) moveLimit:2

那么它应该返回 ((3,1),(2,2),(3,2),(4,2),(1,3),(2,3),(4,3),(5, 3),(2,4),(3,4),(4,4),(3,5))

我计划通过在 x 和 y 上使所有可能的 -1 和 +1 来使用递归方法。但它的效率很低，因为可能会出现很多重复的情况，例如 +1 然后 -1 与 -1 然后 +1 相比。

任何人都知道这是否有任何好的模式？

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:51:29.357

让我们首先正式定义问题以及您要查找的内容：

表示`k`为距离和`(x,y)`原点（源）。

```
f((x,y),k) = { (a,b) | abs(x-a) + abs(y-b) <= k } 
```

这意味着，具有所有点 (a,b) 的集合使得：（`abs(x-a) + abs(y-b) <= k`这是距离限制）

现在，要获取您可以执行的所有相关元素：

```
moves((x,y),k):
  for i=0 to k+1: //number of steps in the x axis, some number between 0 to k inclusive
     //number of steps in the y axis, some number between 0 to k-i inclusive:
     for j=0 to k-i+1: 
        if (x-i,y-j) is in range: output (x-i,y-j)
        if (x+i,y-j) is in range: output (x+i,y-j)
        if (x-i,y+j) is in range: output (x-i,y+j)
        if (x+i,y+j) is in range: output (x+i,y+j) 
```

笔记：

1.  这保证了条件，因为您检查了两个轴上所有可能的步骤，但限制为`abs(a-x) + abs(b-x) <= k`
2.  在这里“在范围内”是一个健全性检查，确保你没有超出范围（例如，假设你只需要得到一个正值，得到一个 -1 的 x 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:34:35.400

尝试从元素（上、左、下、右）计算长度“moveLimit”的所有组合。

例如

```
UUU
UUL
UUD
UUR

ULL
ULD
ULR

UDD
UDR

URR

LLL
... 
```

这应该已经大大减少了计算的数量。您仍然可能会得到导致相同位置的不同移动组合。

# c# - JSON调用C#类方法

> ID：13289531
> 
> 赞同：0
> 
> 时间：2012-11-08T13:02:27.173
> 
> 标签：c#, javascript, asp.net-mvc, json, razor

试图从 JSON 调用 C# 类。

JSON 代码在我的 master.cshtml 文件中，如下所示：

```
var tips = $(".validateTips");

function updateTips(t) {
   tips
   .text(t)
   setTimeout(function () {
      tips.removeClass("ui-state-highlight", 1500);
   }, 500);
}

$.ajax({
   type: "POST",
   url: "/App_Code/LoginClass.cs/test",
   data: {},
   contentType: "application/json; charset=utf-8",
   datatype: "JSON",
   success: function (msg) {
      updateTips(msg.d);
   }
}); 
```

C# 代码位于 LoginClass.cs 文件中，如下所示：

```
public class LoginClass
{
    public static string test()
    {
         return "hello";
    }
}

my solution folders looks like this:
+----App_Code
|    |
|    +---LoginClass.cs
|
+----Views
|    |
|    +---Shared
|        |
|        +---Master.cshtml
|
+----default.cshtml (Where the master layout page is connected to) 
```

更新提示没有

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:13:22.923

当您对 MVC 应用程序进行 AJAX 调用时，您仍然需要通过控制器。

在**Controller**文件夹中创建一个名为 AccountController 的控制器类（Ctrl+M、Ctrl+C）并添加以下方法：

```
public class AccountController : Controller
{
  [HttpPost]
  public ActionResult Test()
  {
    return Json("hello");
  }
} 
```

Javascript 调用：

```
$.ajax({
   type: "POST",
   url: "/Login/test",
   data: {},
   contentType: "application/json; charset=utf-8",
   datatype: "JSON",
   success: function (msg) {
      updateTips(msg.d);
   }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:26:28.190

恐怕你不能在 ASP.NET MVC 中调用那样的代码。你需要通过`Controller`第一个。

首先创建一个控制器，通常在项目根目录的*Controllers文件夹中：*

```
public class LoginController : Controller // Inherit from Controller base class.
{
    // An action on the controller that you can call.
    [HttpPost] // Use HttpPost to limit only to POST requests.
    public ActionResult Test()
    {
        // Use your class here to get values.
        string value = LoginClass.test();

        // Return a JSON result that converts your object to JSON for you.
        return Json(value);
    }
} 
```

然后像这样调用动作（根据`{Controller}/{Action}`global.asax 中默认路由模式的一部分）：

```
$.ajax({
   type: "POST",
   url: "/Login/Test", // Notice the new path. ("Controller" is always subtracted from a controller name: "LoginController" > "Login".)
   data: {},
   contentType: "application/json; charset=utf-8",
   datatype: "JSON",
   success: function (msg) {
      updateTips(msg.d);
   }
}); 
```

如果你想在没有 POST 的情况下使用 JSON：

```
public ActionResult Test()
{
    string value = LoginClass.test();
    return Json(value, JsonRequestBehavior.AllowGet);
} 
```

# guile - guile 中是否有类似 Tcl_LinkVar 的函数可以将 C 变量直接链接到 guile 变量？

> ID：13289533
> 
> 赞同：0
> 
> 时间：2012-11-08T13:02:33.537
> 
> 标签：guile

`Tcl_LinkVar`可以将 C 变量直接链接到 Tcl 变量。当 C 中的变量发生变化时，Tcl 变量也会相应地发生变化。非常方便。

例子：

```
Tcl_LinkVar(interp, "player_x", (char *) &player.world_x, TCL_LINK_DOUBLE); 
```

我想知道Guile是否支持类似的功能？或者当变量发生变化时，我每次都必须将值传递给方案中的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:39:30.873

你不能通过 ffi 获得 c 变量的指针吗？类似于你对函数的处理方式。

也许 ffi 不支持这一点，但我知道您可以使用 libtool 的 dlsym 函数（也用于获取函数指针）之类的名称访问变量指针。我假设 guile 的 ffi 在下面使用了类似的东西。

# rdf - 如何使一个类的实例成为耶拿中另一个类的实例？

> ID：13289537
> 
> 赞同：1
> 
> 时间：2012-11-08T13:02:46.890
> 
> 标签：rdf, jena, owl

我正在对本体进行自动实例化。让他说`Person`他的子类`FEMALE`和`MALE`。

![在此处输入图像描述](../Images/51a9c01b4e0e95861758e3249240254f.png)

在实例化期间，我可以创建类的实例`FEMALE`和`MALE`.

例如

```
OntModel model = // Jena model
String   NS    = // the name space

person0 = model.createIndividual(NS + "Allison", "FEMALE"); 
```

`Allisson`我怎么能添加in`person0`也是该类的个人的事实`PERSON`。

我知道推理器（例如 Pellet）可以在这里提供帮助。但就我而言，有大量的个体需要实例化，所以推理步骤对我来说太长了（大约 10 多个小时）

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:38:19.890

很简单：

```
OntClass person = model.createClass( NS + "Person" );
person0.addRDFType( person ); 
```

# android - 如何使用谷歌 api 为英特尔 x86 原子图像创建 avd？

> ID：13289540
> 
> 赞同：3
> 
> 时间：2012-11-08T13:02:58.217
> 
> 标签：android, android-emulator

我正在使用 android-API 15 开发应用程序，我使用的 android 映像是 Intel 的 x86 atom。

我可以使用标准 API-15 为 android 模拟器创建 AVD 图像，但不能使用 Google API，因为 avd 管理器不显示 x86 atom 图像的任何选项。它仅适用于 arm，但图像的 Arm 风格在我的英特尔机器上运行非常慢，

任何想法如何使用 Google API -15 设置 x86 原子图像？而不是普通的 APi-15

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:16:57.163

我想到了，

需要按照这些步骤，

*   在模拟器中运行基于 arm 的 android 映像，
*   从 /system/framework 和 /system/etc/permissions/ 中提取 2 个谷歌地图文件
*   关闭模拟器，
*   使用 x86 映像启动模拟器（API-10 或 15，无论您从哪个版本中提取）
*   将我们之前提取的两个文件推送到同一个地方，
*   push mkfs.yaffs2.x86 这个可以从[http://code.google.com/p/android-group--korea/downloads/detail?name=mkfs.yaffs2.x86](http://code.google.com/p/android-group-)下载
*   亚行推 mkfs.yaffs2.x86 /数据
*   亚行外壳
*   光盘/数据
*   chmod 777 mkfs.yaffs2.x86
*   ./mkfs.yaffs2.x86 /system system.img
*   出口
*   关闭模拟器
*   用现有的 system.img 替换新的 system.img
*   使用 x86 图像运行模拟器，它现在应该支持 google apis

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T08:40:12.023

艾哈迈德给出的答案在技术上是正确的，但我对我所做的事情有了更好的了解，这里：[http ://codebutler.com/2012/10/10/configuring-a-usable-android-emulator/](http://codebutler.com/2012/10/10/configuring-a-usable-android-emulator/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-19T21:39:30.997

现在可以使用 SDK 管理器直接下载图像。它适用于 API >= 19

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T13:36:18.623

@Ahmed 的回复很好，但是有一种方法可以用更少的步骤来做到这一点，并且不使用 mkyaffs2 和拉动图像（这需要永远）。我见过的所有方法，比如这个方法，都依赖于从来宾 Android 系统中创建这个系统映像，这非常慢，而且难以自动化。我的方法欺骗 QEMU 将 /system 的更改保存到磁盘映像中，而不是丢弃它们。

你可以在这里看到完整的方法：http: [//confcompass-tech.blogspot.nl/2013/07/google-apis-in-x86-android-emulator.html](http://confcompass-tech.blogspot.nl/2013/07/google-apis-in-x86-android-emulator.html)

# ruby-on-rails-2 - 如何使用 ruby 1.9.2 运行 rails 2.2.2 应用程序

> ID：13289541
> 
> 赞同：3
> 
> 时间：2012-11-08T13:03:00.917
> 
> 标签：ruby-on-rails-2, ruby-1.9.2

我在使用 Ruby 1.8.6 (MRI) 的 Rails 2.2.2 版本中有一个现有的 rails 应用程序。

谁能告诉我，如何使用 Ruby 1.9.2 运行应用程序。因为，我必须在 Ruby 1.9.2 (MRI) 版本上运行应用程序。

提前致谢。

拉特纳卡尔 M.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T05:54:19.190

首先，很抱歉您仍然停留在 1.8.6 上，但必须进行过渡。我目前正在自己​​进行类似的 1.8.7 到 1.9.x 的转换，所以让我分享一些我一直在收集的信息：

这里的主要问题是很多东西都发生了变化。我不确定您的代码库有多大，但这是事实。

1.  对语法和一般结构进行了很多更改。我发现[这篇文章](https://stackoverflow.com/questions/21574/what-is-the-difference-between-ruby-1-8-and-ruby-1-9)非常有帮助。
2.  你的宝石可能会爆炸。这意味着您必须弄清楚您的依赖关系并查看不再支持/不再支持的内容。
3.  你需要进行过渡。

老实说#3是关键。截至 2013 年 7 月，Rails 1.8.x 还没有得到支持，因此安全补丁不会出现，您错过了多年前的优化。如果您有任何问题，请继续询问。

*如果我找到更多有用的信息，我很可能会更新这个*

# mysql - 哪个查询是正确的方法？

> ID：13289546
> 
> 赞同：1
> 
> 时间：2012-11-08T13:03:13.460
> 
> 标签：mysql, sql, tsql, join

有人可以告诉我哪种方法更好，它们都产生相同的结果，但哪种方法更“正确”？

我个人觉得第一个查询更容易阅读，但我似乎在别处读到应该始终使用别名。

谢谢

```
SELECT Patient.PatientSurname, Doctor.DoctorSurname
FROM Patient
JOIN Operation
ON Operation.PatientCode=Patient.PatientCode
JOIN Doctor
ON Doctor.DoctorCode=Operation.DoctorCode
WHERE Operation.OperationType='Broken Arm'
GROUP BY Patient.PatientSurname
HAVING count(Patient.PatientSurname) > 0

SELECT PatientSurname, DoctorSurname
FROM Patient as p, Operation as o, Doctor as d
WHERE o.PatientCode=p.PatientCode
AND  d.DoctorCode=o.DoctorCode
AND o.OperationType='Broken Arm'
GROUP BY p.PatientSurname
HAVING count(p.PatientSurname) > 0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T13:19:18.557

这两个查询的区别在于`JOIN`语法：

*   第一个使用 ANSI-92`JOIN`语法。
*   第二个使用旧的 ANSI-89`JOIN`语法。

> 哪个更好？

MySQL 和 SQL Server 以及其他 RDBMS 也支持这两种语法，您不应该期望两者之间有任何性能差异。他们是一样的。

但是，**建议**使用第一个。它在许多方面更安全。例如，如果你想做一个`INNER JOIN`, 使用第二种语法：

```
SELECT *
FROM Table1 t1, Table2 t2
WHERE t1.id = t2.id2; 
```

如果您忘记了`WHERE t1.id = t2.id`，则查询不会失败。但它会产生一个交叉连接，并且很难找出那个错误。但是使用第一种语法：

```
SELECT *
FROM Table1 t1 INNER JOIN Table2 t2 ON t1.id = t2.id2; 
```

如果你忘记了`ON`条件，你会得到一个语法错误。即使您打算这样做`CROSS JOIN`，其他人也会更容易理解：

```
SELECT *
FROM Table1 t1 CROSS JOIN Table2 t2 
```

比其他语法。

[**@Gareth**](https://stackoverflow.com/questions/13289546/which-query-is-the-correct-way/13289653#comment18119996_13289653)指出的另一个好处（请参阅下面的评论）：

> 另一个巨大的好处是可以轻松地在 INNER 和 OUTER 连接之间切换，而无需在 WHERE 子句中处理 NULL。

有关更多信息，请参阅以下内容：

*   [**要改掉的坏习惯：使用老式的 JOIN。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)

*   [**要改掉的坏习惯：使用表别名，如 (a, b, c) 或 (t1, t2, t3)。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-table-aliases-like-a-b-c-or-t1-t2-t3)

*   [**SQL JOIN：USING、ON 或 WHERE 之间有区别吗？**](https://stackoverflow.com/questions/5654278/sql-join-is-there-a-difference-between-using-on-or-where/5654338#5654338).

# jquery - 在页面jquery的任意位置单击时隐藏动态创建的菜单

> ID：13289547
> 
> 赞同：0
> 
> 时间：2012-11-08T13:03:17.687
> 
> 标签：jquery, events, dynamic, hide, event-propagation

我在页面上有一些动态创建的菜单，每当用户单击页面上的任何位置时都需要隐藏这些菜单。如果用户单击菜单或尝试打开另一个菜单，这需要工作。

我还希望事件处理程序在完成隐藏后解除绑定。我已经找到了一个解决方案，`document.on()`但`one()`我真的很想将`document`处理程序限制在 DOM 下方。问题是它破坏了我的代码。

任何有关优雅解决方案的帮助表示赞赏。

我想这样做的主要原因是能够防止`event propagation`以下情况：

[**传播失败DEMO**](http://jsfiddle.net/QsggA/8/)

[**传播成功，`one()`clickhandler 失败 DEMO**](http://jsfiddle.net/QsggA/9/)

**Javascript**

```
// I want to change "document" to ".menus" here
$(document).on("click", ".displayMenu", function(e)
{
    var $menu =  $(this).siblings(".menu");
    $(document).one("click", function(e2) 
       {
           if (e.target!=e2.target)
               $menu.hide(); 
       });
    $menu.toggle();
});​ 
```

**HTML**

```
<div class="menus">
    <div>
        <div class="displayMenu">Show menu 1</div>
        <div class="menu">menu 1</div>
    </div>
    <div>
        <div class="displayMenu">Show menu 2</div>
        <div class="menu">menu 2</div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:37:55.843

感谢@TapanC，我意识到我犯了一个明显的错误`stopPropagation()`，当然它应该阻止`document.one()`事件触发。我不明白为什么即使没有`document.one()` *仍然*无法运行，`stopPropagation()`但这是一个可行的解决方案。

虽然并不完全优雅（我不喜欢全局`hide()`命令），所以任何更好的建议表示赞赏！:)

**[工作（不漂亮）解决方案演示](http://jsfiddle.net/QsggA/10/)**

```
$(".menus").on("click", ".displayMenu", function(e)
{
    // Hide all
    $(".menu").hide();
    // Get current menu
    var $menu =  $(this).siblings(".menu").show();
    $(document).one("click", function(e2) 
       {
           if (e.target!=e2.target)
               $menu.hide(); 
       });
    // Prevent propagation
    e.stopPropagation();
}); 
```

# c++ - 将 std::bind 与 __stdcall 函数一起使用

> ID：13289548
> 
> 赞同：4
> 
> 时间：2012-11-08T13:03:19.507
> 
> 标签：c++, c++11, stdcall, stdbind

如何在 __stdcall 函数上使用 std::bind （而不是 boost::bind），或者在当前实现中甚至可能？当我尝试编译以下示例时：

```
std::function<LRESULT __stdcall(int, WPARAM, LPARAM)> func;
func = std::bind(&EventListener::myhook, this, std::placeholders::_1, 
                 std::placeholders::_2, std::placeholders::_3); 
```

或相同但将 func 声明为：

```
std::function<LRESULT(int, WPARAM, LPARAM> func; 
```

给我奇怪的构建输出（我包括在下面）。有一种非常恶心的方法可以让它编译：

```
decltype(std::bind(&EventListener::myhook, nullptr, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3))* HookCallbackPointer;
    HookCallbackPointer proc;

proc = reinterpret_cast<HookCallbackPointer>
    (&std::bind(&EventListener::myhook, this,
                std::placeholders::_1,
                std::placeholders::_2,
                std::placeholders::_3)); 
```

但它不会让我调用这样的函数 (*proc)(0,0,0);。这是可悲的。这一切的发生只是因为 func - myhook - 声明为 __stdcall。当然，我可以编写一个肮脏的汇编技巧，它将在 func 的末尾推送 4 个 dwords，这将“使”它成为 __stdcall，但我不太确定这一点，而且这是更病态的方式。

```
1>D:\bin\Visual Studio\VC\include\xrefwrap(431): error C2440: 'return' : cannot convert from 'std::_Do_call_ret<_Forced,_Ret,_Funx,_Btuple,_Ftuple>::type' to 'LRESULT'
1>          with
1>          [
1>              _Forced=false,
1>              _Ret=void,
1>              _Funx=__w64 long (__stdcall EventListener::* )(int,WPARAM,LPARAM),
1>              _Btuple=std::tuple<EventListener *,std::_Ph<1>,std::_Ph<2>,std::_Ph<3>>,
1>              _Ftuple=std::tuple<int &,WPARAM &,LPARAM &,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          Expressions of type void cannot be converted to other types
1>          D:\bin\Visual Studio\VC\include\functional(239) : see reference to function template instantiation '_Ret std::_Callable_obj<_Ty>::_ApplyX<_Rx,int,__w64 unsigned int,__w64 long>(_V0_t &&,_V1_t &&,_V2_t &&)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Rx=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(239) : see reference to function template instantiation '_Ret std::_Callable_obj<_Ty>::_ApplyX<_Rx,int,__w64 unsigned int,__w64 long>(_V0_t &&,_V1_t &&,_V2_t &&)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Rx=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(239) : while compiling class template member function 'LRESULT std::_Func_impl<_Callable,_Alloc,_Rx,_V0_t,_V1_t,_V2_t>::_Do_call(_V0_t &&,_V1_t &&,_V2_t &&)'
1>          with
1>          [
1>              _Callable=_MyWrapper,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>,
1>              _Rx=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(516) : see reference to class template instantiation 'std::_Func_impl<_Callable,_Alloc,_Rx,_V0_t,_V1_t,_V2_t>' being compiled
1>          with
1>          [
1>              _Callable=_MyWrapper,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>,
1>              _Rx=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(516) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Do_alloc<_Myimpl,_Ty,_Alloc>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(516) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Do_alloc<_Myimpl,_Ty,_Alloc>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(516) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Reset_alloc<_Ty,std::allocator<std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>>>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(516) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Reset_alloc<_Ty,std::allocator<std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>>>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Alloc=std::allocator<std::_Func_class<LRESULT,int,WPARAM,LPARAM>>
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(692) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Reset<_Ty>(_Fty &&)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          D:\bin\Visual Studio\VC\include\functional(692) : see reference to function template instantiation 'void std::_Func_class<_Ret,_V0_t,_V1_t,_V2_t>::_Reset<_Ty>(_Fty &&)' being compiled
1>          with
1>          [
1>              _Ret=LRESULT,
1>              _V0_t=int,
1>              _V1_t=WPARAM,
1>              _V2_t=LPARAM,
1>              _Ty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>,
1>              _Fty=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          main.cpp(27) : see reference to function template instantiation 'std::function<_Fty> &std::function<_Fty>::operator =<std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Fty=LRESULT (int,WPARAM,LPARAM),
1>              _Forced=false,
1>              _Ret=void,
1>              _Fun=LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),
1>              _V0_t=EventListener *const ,
1>              _V1_t=std::_Ph<1> &,
1>              _V2_t=std::_Ph<2> &,
1>              _V3_t=std::_Ph<3> &,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fx=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          main.cpp(27) : see reference to function template instantiation 'std::function<_Fty> &std::function<_Fty>::operator =<std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Fty=LRESULT (int,WPARAM,LPARAM),
1>              _Forced=false,
1>              _Ret=void,
1>              _Fun=LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),
1>              _V0_t=EventListener *const ,
1>              _V1_t=std::_Ph<1> &,
1>              _V2_t=std::_Ph<2> &,
1>              _V3_t=std::_Ph<3> &,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil,
1>              _Fx=std::_Bind<false,void,LRESULT (__stdcall EventListener::* )(int,WPARAM,LPARAM),EventListener *const ,std::_Ph<1> &,std::_Ph<2> &,std::_Ph<3> &,std::_Nil,std::_Nil,std::_Nil>
1>          ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:04:25.983

在当前的 VS 2012 中，它不可能并且无论如何都不适用于解决此问题。这个想法是绑定成员函数并将其用作 Hook-procedure。这是不可能的，正如 David Rodriguez 和 R. Martinho Fernandes（在聊天 - Lounge-C++ 中）提到的那样，因为 std::bind 产生对象，而不是函数，因此它的结果不能作为参数传递给 SetWindowsHookEx。

# iphone - 如何通过 vuforia 跟踪 3-D 对象？

> ID：13289549
> 
> 赞同：0
> 
> 时间：2012-11-08T13:03:24.920
> 
> 标签：iphone, ios, xcode, augmented-reality

我一直在尝试通过在我的增强现实应用程序中使用**Vuforia SDK**来检测 3D 对象。我创建了长方体跟踪器，并在创建标记时为所有面孔提供了图像。但是在检测时，它只能在经过大量尝试后才能检测到正面。任何方式的帮助都会非常有用。

我的 XML 结构：

```
<?xml version="1.0" encoding="UTF-8"?>
<QCARConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="qcar_config.xsd">
    <Tracking>
        <ImageTarget size="320 220" name="Phone.Top"/>
        <ImageTarget size="320 220" name="Phone.Bottom"/>
        <ImageTarget size="320 220" name="Phone.Back"/>
        <ImageTarget size="320 220" name="Phone.Front"/>
        <ImageTarget size="220 220" name="Phone.Right"/>
        <ImageTarget size="220 220" name="Phone.Left"/>
        <MultiTarget name="Phone">
            <Part name="Phone.Front" translation="0 0 110" rotation="AD: 1 0 0 0"/>
            <Part name="Phone.Back" translation="0 0 -110" rotation="AD: 0 1 0 180"/>
            <Part name="Phone.Left" translation="-160 0 0" rotation="AD: 0 1 0 -90"/>
            <Part name="Phone.Right" translation="160 0 0" rotation="AD: 0 1 0 90"/>
            <Part name="Phone.Top" translation="0 110 0" rotation="AD: 1 0 0 -90"/>
            <Part name="Phone.Bottom" translation="0 -110 0" rotation="AD: 1 0 0 90"/>
        </MultiTarget>
    </Tracking>
</QCARConfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:56:17.850

您可以尝试同时支持 3D 对象跟踪和 SLAM 的 metaio SDK。有关更多信息，请查看 www.metaio.com/products/SDK

干杯，丹尼尔

# android - Android“翻身”运动/手势检测，如三星 Galaxy S3

> ID：13289552
> 
> 赞同：1
> 
> 时间：2012-11-08T13:03:38.490
> 
> 标签：android

我想在我的 Android 应用程序中实现某个动作，当用户“翻转”他的手机时触发该动作。

与我在三星 Galaxy S3 上静音来电的操作完全相同。请注意，这里的任何地方都没有涉及触摸。这里的一切都是关于运动的。

除了加速度计，我还需要听哪些传感器？任何人都可以帮助我实现这个特定的动作/手势识别的代码。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:45:41.003

您需要的是 Display.getRotation()。请参阅[Android 官方文档链接](http://developer.android.com/reference/android/view/Display.html)。

# java - SQL Jpa，从分组中选择最后一行

> ID：13289553
> 
> 赞同：2
> 
> 时间：2012-11-08T13:03:39.057
> 
> 标签：java, jpa, jpql

我需要在我的表格位置返回每个设备的最后一行

我的表名是：位置

```
+------------+----------+--------------+--------------+----------+  
| locationId | deviceId | dataRegistro | horaRegistro | location |  
+------------+----------+--------------+--------------+----------+  
|         50 |        1 |   2012-11-07 |     15:35:00 |      A12 |  
+------------+----------+--------------+--------------+----------+  
|         51 |        1 |   2012-11-07 |     15:37:40 |       B2 |  
+------------+----------+--------------+--------------+----------+  
|         52 |        2 |   2012-11-07 |     15:35:12 |       B8 |  
+------------+----------+--------------+--------------+----------+  
|         53 |        2 |   2012-11-07 |     15:35:40 |      50C |  
+------------+----------+--------------+--------------+----------+  
|         54 |        2 |   2012-11-07 |     15:40:00 |      94A |  
+------------+----------+--------------+--------------+----------+ 
```

从我做的一个设备中选择最后一行

`select L from Location L where deviceId = :deviceId order by "dataRegistro" DESC, "horaRegistro" DESC limit 1`

现在如何选择每台设备的所有最新位置？:( 我使用 Java JPA。

谢谢，

埃万德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:44:22.803

如果 ID 是有序的，因此稍后记录的记录对应于较晚的日期，您可以使用此查询（我不会费心将字符串转换为日期，这会使其慢于可接受的速度。）：

```
select L from Location L where deviceId = :deviceId order by L.locationId DESC 
```

并限制要在 Java 代码中返回的行数：

```
//EntityManager em; defined earlier
Query q = em.createQuery("select L from Location L where deviceId = :deviceId order by L.locationId DESC ");
q.setParameter("deviceId", "theDeviceIdIWantToQuery");
q.setMaxResults(1);
List<Location> results=query.getResultList(); 
```

如果给定的 deviceId 没有行，这将是一个空列表，或者一个包含 1 个位置项的列表 - 最后一个。

如果要一次性选择所有设备的最新位置，可以使用 IN 子句和子查询：

```
select L2 FROM Location L2 WHERE L2.locationId IN
    (select L.locationId from Location L 
    where L.deviceId = :deviceId 
    order by L.locationId DESC 
    group by L.deviceId) 
```

遗憾的是，[JPQL 不允许在 FROM 子句中使用子查询](https://stackoverflow.com/questions/9906710/how-can-i-inner-join-a-subquery-in-jpql)，所以虽然这是我的选择，但只能通过使用本机查询功能来实现，这使用起来更不方便。

**顺便说一句**，在我看来，像你这样存储时间戳是一种不好的做法。它不能正确索引，在查询和排序时会遇到麻烦，简直就是一场噩梦。我会认真重新考虑您架构的这一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:32:57.040

是的，我使用 JPA，这个例子只是为了演示我需要什么

**我选择一台设备的**JPA查询是****

 **```
Query q = em.createQuery("select TL from TRKLocation TL where   
TL.device.deviceId = :deviceId and TL.msgError = '' order by 
TL.dataRegistro DESC, TL.horaRegistro DESC");
        q.setParameter("deviceId", deviceId);           
        q.setMaxResults(1);

list = q.getResultList(); 
```

现在，我需要查询以从所有设备中选择最后一个位置:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:21:38.497

像这样的东西怎么样：

```
SELECT locationId
  FROM location
 WHERE dateregistro + horaregistro = (SELECT MAX(datergistro + horaregistro)
                                        FROM location
                                       WHERE deviceid = :deviceid)
   AND deviceid = :deviceid 
```

我不确定日期计算的正确性，但也许您可以创建一个新列，将日期和时间组合在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:25:14.900

如果 dateregistro 和 horaregistro 是字符串，您可以尝试以下查询：

```
select * from location l1
where dateregistro + horaregistro = (select max(dateregistro + horaregistro) from
location l2 where l2.deviceid = l1.deviceid) 
```

更好的是，如果该`locationid`字段是唯一且已排序的键，则可以对其应用 where 条件：

```
select * from location l1
where locationid = (select max(locationid) from
location l2 where l2.deviceid = l1.deviceid) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T14:06:47.857

我不明白你为什么不存储一个简单的时间戳，而不是为日期和时间设置两列。这使得运行您想要的选择变得更加困难。这是一个示例，如果时间戳可用，它应该如何工作（从查看 JPQL Spec 第 4.6.16 节这应该可以工作）

```
Select loc From Location loc where loc.ts_registered = 
(Select MAX(subloc.ts_registered) From Location subloc where subloc.deviceId = loc.deviceId) 
```

我没有测试它，但我认为这应该有效。但请注意，此查询将在中型到大型数据集上运行得非常缓慢。您绝对应该为列 deviceId 添加索引。

此外，我建议您重新考虑您的数据模型，因为此查询需要构建笛卡尔积（随着数据的增长，这将很快变慢）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T13:15:29.953

尝试这个

```
select top (1) location from location where deviceid=:deviceid 
 order by dateregistro,horaregistro desc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-02T15:07:17.593

```
Query q= em.createQuery("Select D from DeviceInfo D WHERE D.devLastPing IN (SELECT MAX(DD.devLastPing) FROM DeviceInfo DD WHERE DD.devLastPing >= :startDate AND DD.devLastPing <= :endDate)");

        q.setParameter("startDate", startDate)
                .setParameter("endDate", endDate);
        List<DeviceInfo> list = (List<DeviceInfo>)q.getResultList(); 
```

你可以使用类似的东西。对不起，在我的情况下，我将它用于设备目的。抱歉，我知道为时已晚，但它可以帮助某人，如果有人之前回复过，再次抱歉。谢谢**

# php - PHP：将项目分组为一个循环

> ID：13289555
> 
> 赞同：0
> 
> 时间：2012-11-08T13:03:48.153
> 
> 标签：php, loops

以下循环将项目分为两组：第一组 5 个项目，每组 6 个项目。我正在尝试修改它以将 li 中的前 3 个项目分组，然后将 li 中的每 5 个项目分组。

```
for ($i = 1; $i < 20; $i++) {
    echo ($i === 1 || $i % 6 === 0) ? "<li>" : null,
        "<div>item {$i}</div>",
        ($i % 6 === 5) ? "</li>" : null;
}
if ($i % 6 !== 0) echo "</li>"; 
```

我正在尝试修改为以下，但分组无法正常工作（例如，错误数量的项目进入 li，某些项目没有进入 li 等）

```
for ($i = 1; $i < 20; $i++) {
    echo ($i === 1 || $i % 5 === 0) ? "<li>" : null,
        "<div>item {$i}</div>",
        ($i % 5 === 3) ? "</li>" : null;
}
if ($i % 5 !== 0) echo "</li>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:25:57.207

试试这个（**编辑**）：

```
echo "<li>";
for($i = 1; $i < 20; $i++) {
    $mod = $i % 5;
    echo $mod == 4 ? "<li>" : null,
        "<div>item {$i}</div>",
        $mod == 3 ? "</li>" : null;
}
if($i % 5 != 3) echo "</li>"; 
```

[稍作改动的代码示例](http://ideone.com/5N9xxL)

解释：

如果您想将项目分组为 5 个一组，则按 5 取模。前三个项目是一种特殊情况，但由于 3 小于 5，我们可以将前三个数字合并到我们的主循环中。

您的代码的问题在于添加`<li>`s. 由于我们从`$i`1 而不是 0 开始，我们应该使用`$i % 5 == 4`而不是`$i % 5 == 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:40:43.527

如果我了解您想要的输出，您想要类似的东西（`<div>`为了简洁而忽略标签）：

```
<li>item #1</li>
<li>item #2</li>
<li>item #3</li>
<li>
    item #4
    item #5
    item #6
    item #7
    item #8
</li>
... repeat 
```

如果这是正确的，并且每个“规则”（*规则*是“前三个”和“后五个”）中的项目数可能会改变（就像他们刚刚所做的那样），我会建议创建变量来表示它们 - 这样，在将来，您只需要更改变量，而不必担心进行实际的代码更改。

我推荐的第一种方法是（半）完全重写。`if`此方法以我认为更具可读性/可管理性的方式使用了一堆 -语句：

```
$firstGroupLength = 3;
$repeatedGroupLength = 5;

for ($i = 1; $i < 20; $i++) {
    if ($i <= $firstGroupLength) {
        echo '<li><div>item ' . $i . '</div></li>';
    } else {
        if ((($i - $firstGroupLength) % $repeatedGroupLength) == 1) {
            echo '<li>';
        }
        echo '<div>item ' . $i . '</div>';
        if ((($i - $firstGroupLength) % $repeatedGroupLength) == 0) {
            echo '</li>';
        }
    }
}
if ((($i - $firstGroupLength) % $repeatedGroupLength) != 1) {
    echo '</li>';
} 
```

这种方法可以完成工作，但从长远来看也是一个很大的问题。但是，如果在未来的任何时候您希望第一个组与重复组看起来*不同*，比如说可能具有不同的 CSS 类或其他一些随机特性 - 这种方法为您提供了桌面！

如果您希望坚持使用三元运算符方法，则以下方法也应该可以工作：

```
$firstGroupLength = 3;
$repeatedGroupLength = 5;

echo '<li>';
for($i = 1; $i < 20; $i++) {

    echo ((($i % $repeatedGroupLength) == ($repeatedGroupLength - 1)) ? '<li>' : '')
        . '<div>item ' . $i . '</div>'
        . ((($i % $repeatedGroupLength) == $firstGroupLength) ? '</li>' : '');
}
if (($i % $repeatedGroupLength) != $firstGroupLength) echo '</li>'; 
```

在这两种方法中，您都会找到一个`$firstGroupLength`变量。这被设置为自己重复的第一个“组”项目（例如`<li>item #</li>`）。第二个变量`$repeatedGroupLength`将设置在重复的“项目组”块中显示的元素数量（例如`<li>item # item # item #</li>`）。

# c# - 使用 c# 在 windows 商店应用程序中的动画

> ID：13289558
> 
> 赞同：1
> 
> 时间：2012-11-08T13:04:06.443
> 
> 标签：c#, windows-store-apps

我在网格中有一个用户控件，我想用动画重新定位 400 像素。我可以使用以下代码在没有动画的情况下重新定位它。

`ucChat.Margin = new Thickness(0, -400, 0, 0);`

我尝试使用以下代码对其进行动画处理，但出现异常

```
DoubleAnimation da = new DoubleAnimation();
da.Duration = new Duration(TimeSpan.FromMilliseconds(1500));
da.From = 0;
da.To = -400;

Storyboard st = new Storyboard();
Storyboard.SetTarget(da, ucChat);
Storyboard.SetTargetProperty(da, "ucChat.Margin.Top");
st.Children.Add(da);

st.Begin(); 
```

Regenwormen.exe 中出现“System.Exception”类型的异常，但未在用户代码 WinRT 信息中处理：无法解析指定对象上的 TargetProperty ucChat.Margin.Top。

有谁知道我该如何解决这个问题或我需要使用什么动画？（Windows 商店应用程序中不存在厚度动画）

# css - 一次压缩多个css和js文件

> ID：13289562
> 
> 赞同：0
> 
> 时间：2012-11-08T13:04:19.930
> 
> 标签：css, compression

我想一次压缩我的css和js文件。因为每天我都要修改文件和部署它们。有没有什么工具可以一次压缩这些文件？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:19:27.653

如果您对 java 和命令行有所了解，您可以使用**YUI 压缩器，这是一个很棒的工具。**

> YUI 压缩器是用 Java 编写的（需要 Java >= 1.4）并依赖 Rhino 来标记源 JavaScript 文件。它首先分析源 JavaScript 文件以了解其结构。然后它打印出令牌流，尽可能多地省略空白字符，并在适当的替换处用 1（或 2 或 3）字母符号替换所有本地符号（面对诸如 eval 之类的邪恶功能或者，YUI Compressor 采取防御方法，不混淆任何包含 evil 语句的作用域） CSS 压缩算法使用一组经过微调的正则表达式来压缩源 CSS 文件。YUI Compressor 是开源的，所以不要犹豫查看代码以了解它的工作原理。

[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:20:56.760

您可能需要两种工具：一种用于 CSS，另一种用于 Javascript。一个简单的 shell 脚本可以将两者链接成一个明显的单个命令。

Compass 是一个很棒的 CSS Minify 工具（除其他外）

[http://compass-style.org/](http://compass-style.org/)

Javascript 有几个选项：

[http://www.crockford.com/javascript/jsmin.html](http://www.crockford.com/javascript/jsmin.html)

[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

我使用一个简单的 shell 脚本将其中一些工具串在一起，然后通过一个命令将它们上传到网络。这都是 Unix/Linux/Mac 变体的命令行解决方案，如果您需要 GUI 或 Windows 解决方案，我不会有太大帮助。

干杯!

编辑：

经过进一步审查，YUI 压缩器可能是一体化解决方案的理想选择。请参阅 Anmol Saraf 的回答。

# php - 音频播放器：从数据库表中加载随机歌曲而不重复

> ID：13289563
> 
> 赞同：0
> 
> 时间：2012-11-08T13:04:26.733
> 
> 标签：php, mysql, database, audio, html5-audio

我的音频播放器 ( [http://www.vegapohl.com/audio](http://www.vegapohl.com/audio) ) 有问题。我试图让播放器播放 mysql 数据库中的随机曲目，但我不希望它播放以前的歌曲。只有在听完或跳过所有歌曲后，它才应该“重置”并再次播放所有曲目。

这是我的PHP：

```
<?php
mysql_connect("localhost", "db57276_11", "*****")or die("cannot connect"); 
mysql_select_db(db57276_11)or die("cannot select DB");

$sql = "SELECT * FROM audio ORDER BY RAND()";
$result = mysql_query($sql);
if (false === $result) {
    echo mysql_error();
}
$row = mysql_fetch_row($result);
$url = $row[0];
$title = $row[1];
$artist = $row[2];
$albumart = $row[3];
?> 
```

我在 stackoverflow 上找到了一些类似问题的答案，但没有一个对我有用。为了让您更好地了解一般功能，这里是正文标记：

```
<body>
<script type="text/javascript">
function playPause(soundId,getImg) {
setTimeout(swapImg,30000,getImg);
soundId.volume=.5;
 if (soundId.paused){
     soundId.play();       
 getImg.src='pause.png';

}
   else {
       soundId.pause();
        getImg.src='play.png';
   }

}

function swapImg(getImg){
getImg.src='play.png';
}
</script>
<div class="wrapper">
<div class="wrapmiddle">
    <div class="middle">

        <div class="track">
            <h1><?php echo $title; ?></h1>
            <h2><?php echo $artist; ?></h2>
            <div id="buttons">
<a href="javascript:window.location.reload()" class="next">Skip</a>
<a href="#"class="like">Share</a><a href="#" class="view">Visit Site</a>
</div>
</div>
</div>
</div>

<div class="left">
<div>
    <audio id="track1" onended = "window.location.reload()">
    <source src="<?php echo $url; ?>" type="audio/mp3"></source>
    Your browser does not support this content.</audio>
    <a href="#" onClick="playPause(track1,playImg1);">
<img alt="" class="playImg"    src="play.png" style="cursor: pointer;" name="playImg1" />   
</a><br />
</div>
</div>
  <div class="right">
  <div class="overlay"><img src="icon.png" width="35" height="34" /> </div>
</div>
</div>
</body> 
```

也许有人知道播放下一首曲目的更好方法（而不是刷新页面/iframe）。如果它可以按顺序播放表中的每个曲目，然后再次从顶部开始，那也可以。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:34:52.087

向您的 SQL 表添加一个额外的 smallint 字段，例如`status`. 在该商店中，1 或 0（或您设计的其他内容）表示未播放/未跳过，或播放/跳过。在您的 SQL 查询中，沿以下行添加一个 where 子句`SELECT songname,artist,filelocation,status FROM audio WHERE status=0 ORDER BY rand()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:15:34.737

在第一次请求时获取一个随机播放列表，并在整个访问过程中使用它。

如果您希望此类播放列表在页面重新加载之间持续存在，请将其存储在您的`$_SESSION`.

# hibernate - 休眠 sessionManager 与 Tapestry

> ID：13289566
> 
> 赞同：4
> 
> 时间：2012-11-08T13:04:41.383
> 
> 标签：hibernate, tapestry

我需要一些帮助。我在尝试使用 Tapestry 5.3.6、hibernate 4.1.7.Final 和 Mysql 5.1.21 将一些表单数据存储到我的数据库时遇到此错误实际上数据存储在数据库中，但单击后我仍然有错误提交按钮。

## 错误

> [错误] ioc.Registry 调用方法公共静态 org.apache.tapestry5.hibernate.HibernateSessionManager org.apache.tapestry5.hibernate.HibernateCoreModule.buildHibernateSessionManager(org.apache.tapestry5.hibernate.HibernateSessionSource,org.apache.tapestry5.ioc. services.PerthreadManager): org.hibernate.SessionFactory.openSession()Lorg/hibernate/classic/Session；[错误] ioc.Registry 操作跟踪：[错误] ioc.Registry [1] 在地址/创建上触发事件“操作”：beaneditform.form [错误] ioc.Registry [2] 在地址/创建上触发事件“成功”： beaneditform.form [ERROR] ioc.Registry [3] 通过 org.apache.tapestry5.hibernate.HibernateCoreModule.buildHibernateSessionManager(HibernateSessionSource, PerthreadManager) 实例化服务 HibernateSessionManager 实现（在 HibernateCoreModule.java：

## pom.xml

我已将以下依赖项添加到我的 pom.xml

```
<dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.7.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>4.1.7.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.7.Final</version>
    </dependency> 
```

我很乐意提供任何帮助。谢谢

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:33:22.750

我不认为 Tapestry-hibernate 5.3.X 与 Hibernate 4.X 兼容。

尝试使用最新版本的 3.X

# logging - 用于解析从 Enterprise Library Logging Application Block 生成的日志文件的工具

> ID：13289569
> 
> 赞同：1
> 
> 时间：2012-11-08T13:12:51.457
> 
> 标签：logging, enterprise-library, logfiles

我有一堆从企业库日志记录应用程序块生成的日志文件。这些文件包含所有类别的日志。是否有任何工具或任何方法可以解析这些文件并以表格形式显示或支持查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:35:24.527

[Microsoft 的 LogParser](http://www.microsoft.com/en-us/download/details.aspx?id=24659 "日志解析器 2.2")应该可以解决问题。

但是，Enterprise Library Logging 应用程序块提供了相当大的灵活性。有问题的日志是磁盘文件吗？您是否使用默认的“文本格式化程序”？企业库的版本可能是相关的（从 v2.1 开始就没有使用过）。

我自己，我只是使用 GNU UnxUtils grep （等等）来获得我需要的东西。

PS [Jeff Atwood 的 Coding Horror](http://www.codinghorror.com/blog/2005/08/microsoft-logparser.html "杰夫阿特伍德的编码恐怖")有一篇很好的 LogParser 文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:38:40.210

您还可以查看使用[EntLibContrib 项目](http://entlibcontrib.codeplex.com)中的[LogParser](http://entlibcontrib.codeplex.com/wikipage?title=LogParser41)。它使用企业库模板来解析文件。

# vim - 清除vim中的命令行？

> ID：13289570
> 
> 赞同：1
> 
> 时间：2012-11-08T13:13:20.700
> 
> 标签：vim

我想自动化 php 应用程序的过程。所以我正在使用这个插件，在启动调试过程（F5）后，它会在命令行中显示这条消息：

> 等待端口 9000 上的新连接 5 秒...

因此，在抛出该消息之后，我想立即调用我主文件夹中的 bash 脚本。所以我创建了一个这样的关键投标：

```
map gm <F5> :!sh ~/refresh_browser.sh<enter> 
```

我的问题：由于消息`waiting ...` 无法在命令行中编写命令。

那么，有没有办法`waiting..`在执行bash脚本之前清除命令行来删除消息呢？如果没有，你有什么建议？

**编辑**：在 Ingo Karkat 的回答之后，我终于创建了一个这样的键绑定：

```
map gm :! ~/my_script.sh &<enter><F5> 
```

这个脚本：

```
#!/bin/sh
xdotool windowfocus `xdotool search --name "Mozilla Firefox" | head -1`
sleep 2
xdotool key F5
xdotool windowactivate `xdotool search --name "GVIM" | head -1`
xdotool key F4 #to go to the breakpoint 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:31:18.167

该`waiting...`消息以及您无法发出其他命令的事实意味着 Vim 仍然被阻止；可能，该插件正在执行外部命令或正在轮询某事。由于 Vim 本质上是单线程的，因此您无能为力。（嗯，除了从 Vimscript 迁移到允许并行处理的 Perl、Python、Ruby 等。）

另一方面，您打算启动的 Bash 脚本能够在后台启动其他进程（`&`附加），因此我建议您颠倒您的预期调用顺序并在插件*之前调用脚本。*

# sql - 检查至少存在一条记录

> ID：13289571
> 
> 赞同：1
> 
> 时间：2012-11-08T13:13:21.877
> 
> 标签：sql, database, postgresql

两张表：

```
== customers ==
cust_id

== attachments ==
att_id
cust_id 
```

1 位客户 -> 许多附件

我会检索所有客户，并添加布尔虚拟字段“has_attach”来选择，了解客户是否有附件。

没有 GROUP BY，如果这是可能的 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:29:06.080

`many`根据实际含义的多少，该`COUNT(*)`选项可能会带来不必要的负担。

在这种情况下，以下内容*有时会*产生好处。

```
SELECT
  *,
  CASE WHEN EXISTS (SELECT *
                      FROM attachments
                     WHERE cust_id = customers.cust_id)
       THEN 1
       ELSE 0 END  AS has_attach
FROM
  customers 
```

这是因为`EXISTS`实际上并没有读取所有记录。它只是检查是否存在*任何*记录。

事实上，当使用索引时，它甚至不会从表中读取任何记录。它只是检查索引是否指向任何匹配的记录并停在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:18:49.163

```
SELECT 
    customers .cust_id,
    IFNULL(count , 0) as Total
FROM customers 
LEFT JOIN 
    (
        SELECT att_id , count(*) as count
        FROM attachments group by cust_id
    ) AS att on att.cust_id = customers.cust_id 
```

这是 MySQL 中的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:20:48.323

尝试这个

```
update customers set field='has attach' 
where cust_id in (select c.cust_id cusotmer c
inner join attachment a on c.cust_id=a.cust_id 
having count(a.id)>1 
```

# php - 如何匹配以开头的内容和确切的其他内容？

> ID：13289573
> 
> 赞同：1
> 
> 时间：2012-11-08T13:13:36.347
> 
> 标签：php, regex, preg-match

我正在尝试匹配以下 URI：

```
/
/login?id=random (random is any number or characters)
/logout 
```

但不是

```
/anything-else (refers to all other pages) 
```

换句话说，我需要既能匹配`/^(\/|\/logout)$/i`但又`/^\/login/i`不能匹配其他任何东西的东西。这可以用一个正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:19:11.453

正**则表达式**：

```
^/(logout|login\?id=\d+)?$ 
```

**[在这里](http://www.regexplanet.com/advanced/java/index.html)**测试了正则表达式。

![经过测试](../Images/1ee05c2ec644a9f248c800cb4b72eddb.png)

# c# - 如何使用 linq-to-sql 从数据库中访问记录？

> ID：13289575
> 
> 赞同：1
> 
> 时间：2012-11-08T13:13:40.427
> 
> 标签：c#, linq, linq-to-sql

我正在努力`Linq to sql`。我创建了一个函数来搜索数据库中的记录。我的职能是：

```
 public IEnumerable<Record> SearchRecord()
    {
      var records = db.Records.Where(r => r.Name == Name && r.Date == Date 
                                                && r.Country == Country);
        return records;
    } 
```

我正在尝试处理其中任何一个属性`Name, Date and Country`为空的情况。在这种情况下，我只想删除该过滤器并仅基于非空属性获取记录。我不想添加 if - else 条件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:27:53.677

由于 LINQ 使用 Fluent 接口，您可以执行以下操作：

```
public IEnumerable<Record> SearchRecord()
{
    var records = db.Records;
    if (Name != null)
    {
        records = records.Where(r => r.Name == Name);
    }
    if (Date != null)
    {
        records = records.Where(r => r.Date == Date);
    }
    if (Country != null)
    {
        records = records.Where(r => r.Country == Country);
    }
    return records;
} 
```

我很确定这会导致发送到数据库的 SQL 查询不太理想，但这只是为了说明在这件事上 fluent api 的用法。

你也可以用 作弊`??`，比如：

```
public IEnumerable<Record> SearchRecord()
{
    var records = db.Records.Where(r => r.Name == (Name ?? r.Name)
                                        && r.Date == (Date ?? r.Date)
                                        && r.Country == (Country ?? r.Country));
    return records;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:17:21.010

这应该对你有用，基本上你会说`if the parameter value is null OR the parameter value equals the row value then return me that row.`

```
public IEnumerable<Record> SearchRecord()
{
    var records = db.Records.Where(r => (Name == null || r.Name == Name)
                                        && (Date == null || r.Date == Date)
                                        && (Country == null || r.Country == Country));
    return records;
} 
```

# selenium - Selenium RC 自动化“找不到元素错误”

> ID：13289577
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:13:51.383
> 
> 标签：selenium, selenium-rc, xpath

Selenium RC 自动化`"Element Not found error"`

我目前正在自动化我的项目。但是，在播放脚本时，我得到一个按钮的 element not found 错误。我从萤火虫复制了按钮的 XPATH

XPATH 如下来自 firebug：

```
/html/body/div[3]/div[2]/div/div/div/div/div/form/table/tbody/tr[23]/td[2]/input 
```

所以我在代码中写道：

```
Selenium.click("xpath=/html/body/div[3]/div[2]/div/div/div/div/div/form/table/tbody/tr[23]/td[2]/input"); 
```

我仍然收到与未找到元素相同的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:24:28.540

尝试使用 css 路径并检查。不过，如果这不起作用，请尝试使用 selenium 命令

selenium.isElementPresent("id or xpath or css of your continue button");

并检查该元素是否存在于网页中。

还要确保继续按钮不存在于任何其他框架内。

# computer-vision - 从稀疏光流 (KLT) 确定特征是否是移动对象的一部分

> ID：13289578
> 
> 赞同：1
> 
> 时间：2012-11-08T13:13:52.667
> 
> 标签：computer-vision, motion, opticalflow

我已经使用 KLT 从一系列图像中提取了光流。摄像机位于捕捉交通场景的移动车辆上。现在，我可以得到没有错配点的匹配结果。

我只是使用 OpenCV 函数 (C++) 来提取特征和跟踪。不过，我对编程没有任何问题。

cvGoodFeaturesToTrack(), cvFindCornerSubPix(), cvCalcOpticalFlowPyrLK()

谁能建议我应该研究什么主题/论文来区分我所拥有的匹配点是否是移动物体的一部分？我不想恢复相机运动。仅检查该点是否来自移动物体。

我没有测距仪或其他传感器之类的外部资源，但我知道汽车的速度（安装了摄像头）以及摄像头在车辆上上下倾斜时固定在车辆上的角度。（虽然我不知道偏航率）

检查光流的方向和距离是不够的。例如，在对面站点上移动的车辆的光流通常类似于静止特征，或者车辆以与相机相同的速度移动。

我应该研究哪个主题来处理这个问题？如果我必须在 FOE 或卡尔曼滤波器之间进行选择，或者其他？我想知道 RANSAC 是否会有所帮助。（我读过几篇学术论文，但似乎运气不好。我浏览了卡尔曼滤波器，但不确定这有什么帮助。我还发现关于 FOE 的资源非常有限，尤其是在教科书中）

我感谢每一个答案。非常感谢（真诚）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:40:33.927

不确定这是否认为不适合回答我自己的问题。但是，由于没有人回答这个问题，而且我做了一些研究工作，虽然不是一个成功的故事，我想我最好分享一些。它可能对那些有同样问题的人有所帮助。

我有一系列捕捉城市交通场景的图像。每 0.5 秒使用智能手机在移动的汽车上捕获图像。

出于测试目的，我只使用几对图像而不是整个序列进行测试。我使用 KLT 获得了许多匹配点，并执行了两步异常值去除。匹配的结果很好，没有或很少数量的不匹配。

为了拒绝移动物体上的点，我遵循了以下论文中介绍的工作：

Jung, B. 和 Sukhatme, GS, 2004。“在室外环境中使用移动机器人上的单个摄像头检测移动物体”（期刊中的修订版标题为“移动机器人的实时运动跟踪” ")

总而言之，在他们的部分工作中，他们通过计算图像对之间的转换模型来拒绝异常值（移动对象）。这项工作使用了双线性模型。过程是他们计算转换模型参数 T 并拒绝匹配 if |x2 - T(x1)| < 阈值。这里，x2 和 x1 表示图像上在时间 t2 和 t1 的一对对应点。

我尝试过 T 作为仿射模型、双线性模型和伪透视模型。我的实验结果表明，如果移动物体的数量不小，这个过程总是会失败，因为它们依赖于匹配的点。就我而言，这些图像是在具有大量移动物体的城市交通场景中捕获的。因此，我不能通过这种技术丢弃异常值。所以，我相信 RANSAC 也无济于事。这就是为什么很多论文假设少量移动物体的原因。在这三个模型中，我发现仿射显示的结果最差，但不能说其他两个模型中哪个更好。

我希望这可能会有所帮助。

# android - 安卓服务类

> ID：13289580
> 
> 赞同：1
> 
> 时间：2012-11-08T13:14:04.117
> 
> 标签：android, service

android Service 类是什么让它假设“在后台运行”，因为它到处都有记录？哪个线程继续在后台运行？在 onStartCommand() 中启动的所有线程呢？只要他们有代码可以运行，他们就会活着，还是会在调用 stopSelf() 或备用代码时死亡？

请赐教...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:23:37.260

Android 服务在它们启动的 Activity 的主线程上运行。

然后从该服务启动的任何其他线程都将独立运行并且需要停止。这可以很容易地完成

```
if (running) 
```

通过服务是启动还是停止来设置块。

# android - 使用意图过滤器从 URL 打开 Android 应用程序不起作用

> ID：13289586
> 
> 赞同：36
> 
> 时间：2012-11-08T13:14:20.870
> 
> 标签：android, http, intentfilter

我有一个人们用来替代网站的 Android 应用程序。因此，当用户遇到网站的 URL 时，我想让他们选择在我的应用程序中而不是在浏览器中“打开 URL”。换句话说，我希望出现弹出窗口，让他们在我的应用程序和浏览器（可能还有其他应用程序）之间进行选择。

我从各种来源了解到，我需要使用“数据”过滤器将意图过滤器添加到我的应用程序中的活动，该过滤器过滤正确形式的 URL。

有问题的网站是[http://members.iracing.com](http://members.iracing.com)，因此我添加了以下意图过滤器：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" />
            <data android:host="members.iracing.com" />
        </intent-filter>
    </activity> 
```

我尝试了这些数据过滤器的各种形式，例如使用具有两个属性的单个“数据”节点：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" android:host="members.iracing.com"/>
        </intent-filter> 
```

它根本行不通。我不知道还能告诉你什么。我在我的网站上托管了一个简单的 HTML 页面，其中包含指向该网站上各个页面的几个链接（均以“http://members.iracing.com/...”开头），当我单击其中任何一个时，它们就会打开在浏览器中，无需询问我要使用哪个应用程序。我在模拟器上以及在我的物理设备上安装应用程序后都尝试了它，但没有任何效果。我在一个完全空白的新 Android 项目中尝试了这个，只是想看看这是否可行，没有。

然后我意识到该网站需要身份验证，如果您没有登录，它会重定向到[https://members.iracing.com/membersite/login.jsp](https://members.iracing.com/membersite/login.jsp)的登录页面，因此我尝试用“https”替换该方案。我什至尝试将主机更改为“www.members.iracing.com”，最后我什至尝试了所有这些东西的组合（不确定这是否可行，但是嘿，我现在很绝望.. ...)

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:host="members.iracing.com" />
            <data android:host="www.members.iracing.com" />
        </intent-filter> 
```

还是不行。我不确定重定向是否相关，浏览器显然首先会转到非重定向站点，然后重定向到登录页面，但我无法选择在我的应用程序中打开它。此外，如果我先在浏览器中手动登录，则没有重定向，它仍然不起作用。

我在这里遗漏了一些明显的东西吗？我把头发拉出来为什么这不起作用，除了尝试我能想到的所有可能的组合之外，我无法调试它（我做了......）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-08-20T23:14:10.190

我想我会在这里发布这个，因为我花了一些时间研究为什么我的意图过滤器不起作用。事实证明它一直在工作，但匹配是准确的。因此，如果您为[http://myexample.com](http://myexample.com)注册您的意图并单击[http://myexample.com/blah](http://myexample.com/blah)，它将无法正常工作。

添加以下内容解决了该问题：

```
<data android:pathPattern="/.*" /> 
```

所以意图过滤器看起来像：

```
<intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:host="example.com" />
            <data android:scheme="https" />
            <data android:pathPattern="/.*" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-08T13:31:52.830

在你的使用这三个`<intent filter>`

```
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" /> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-13T20:35:38.880

@nurieta，您的回答对我有用，谢谢！

一个忠告，因为我正在处理潜在的查询字符串，我通过 .java 中的一些代码来处理它，以确定是只打开应用程序还是将您发送到应用程序中的特定位置。我的应用程序只是一个运行 JQuery 移动应用程序的 WebView。

```
 if(getIntent().getData()!=null){//check if intent is not null
        Uri data = getIntent().getData();//set a variable for the Intent
        String scheme = data.getScheme();//get the scheme (http,https)
        String fullPath = data.getEncodedSchemeSpecificPart();//get the full path -scheme - fragments

        combine = scheme+"://"+fullPath; //combine to get a full URI
    }

    String url = null;//declare variable to hold final URL
    if(combine!=null){//if combine variable is not empty then navigate to that full path
        url = combine;
    }
    else{//else open main page
        url = "http://www.example.com";
    }
    webView.load(url); 
```

# javascript - UIWebView - 加载带有链接资源的本地 .html 文件

> ID：13289589
> 
> 赞同：4
> 
> 时间：2012-11-08T13:14:45.867
> 
> 标签：javascript, html, ios, uiwebview, document

我不知道我已经阅读了多少个论坛，但我真的不知道为什么它不起作用！

我有一个 iPhone 应用程序，我想向我的用户展示一本 Epub 书。

用户可以在线阅读，也可以下载到Application Documents目录下阅读。

我建立了与在线版本相同的文件夹结构并将其保存到文件夹“frontend”中。

我也可以阅读这个维护的 .HTML 文件，但是链接的 JS/CSS 和 HTML 文件不起作用。

所以我有一些截图。我不知道，为什么 javascript 无法访问 .html 文档。

[离线版本 - 保存到文件系统“文档文件夹”中](https://www.dropbox.com/s/bih4m22br0lcbpw/Bildschirmfoto%202012-11-08%20um%2012.14.37.png)

[在线版本 - 直接来自服务器 - 没关系！](https://www.dropbox.com/s/3tvrn0gnsgpqt4g/Bildschirmfoto%202012-11-08%20um%2012.16.49.png)

我希望你能给我一些提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:13:08.073

Simply write the code

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"offlineEpub" ofType:@"html"];
NSString *content = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
UIWebView *webView = [[UIWebView alloc] init];
[webView loadHTMLString:content baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
[self.view addSubview:webView]; 
```

The main thing is provide base url as your mainBundle or documents directory.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-22T19:46:33.380

经过大量摆弄并阅读了很多答案，这是我的简单综合解决方案：

**1) 确保所有捆绑资源都是唯一的——目录被展平**

这非常令人沮丧，但是如果您有目录“About/index.html”和“Home/index.html”，最后一个要复制到包中的“index.html”将覆盖前一个。

**2) JavaScript 文件将处于错误的构建阶段**

在 Xcode 中单击您的项目，然后单击您的应用程序目标，然后单击 Build Phases。请注意 JavaScript 文件将错误地位于 Compiled Sources 中：将 JS 文件移动到 Copy Bundle Resources 中。

**3) 使用 UIWebView 的 loadRequest：**

不要从字符串加载。请改用 NSURL。

```
NSBundle *mainBundle = [NSBundle mainBundle];
NSURL *url = [mainBundle URLForResource:@"some_page" withExtension:@"html"];
NSURLRequest *urlReq = [NSURLRequest requestWithURL:url];

// Assuming you create an IBOutlet defined like:
// @property (strong, nonatomic) IBOutlet UIWebView *wv;
[self.wv loadRequest:urlReq]; 
```

# sql - SSRS 参数传递问题

> ID：13289590
> 
> 赞同：1
> 
> 时间：2012-11-08T13:14:48.670
> 
> 标签：sql, reporting-services, rdl

我们在用户登录并根据他们的商店进行身份验证的应用程序中使用 SSRS。当他们生成报告时，我们将他们的商店名称传递给 SSRS 以为其商店生成报告。第一次生成报告时一切正常。但是当用户选择不同的日期范围时，他们会得到系统中所有商店的报告。我们使用 MDX 为 .rdl 中的商店名称提供默认和可用参数，如下所示：

```
SELECT
   NON EMPTY { [Measures].[MTDActiveMembers],
   [Measures].[YTDActiveMembers],
   [Measures].[MTDMembers],
   [Measures].[YTDMembers],
   [Measures].[Members],
   [Measures].[Members - Active] } 
   ON COLUMNS,
   NON EMPTY { ([Store].[Store].[Store].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION,
   MEMBER_UNIQUE_NAME 
   ON ROWS 
FROM
   (
      SELECT
( STRTOSET(@StoreStore, CONSTRAINED) ) 
         ON COLUMNS 
      FROM
         (
            SELECT
( STRTOMEMBER(@FromCalendarDateHierarchy, CONSTRAINED) : STRTOMEMBER(@ToCalendarDateHierarchy, CONSTRAINED) ) 
               ON COLUMNS 
            FROM
               [Members]
         )
   )
   CELL PROPERTIES VALUE,
   BACK_COLOR,
   FORE_COLOR,
   FORMATTED_VALUE,
   FORMAT_STRING,
   FONT_NAME,
   FONT_SIZE,
   FONT_FLAGS 
```

逐步浏览该应用程序发现，当用户选择不同的日期范围时，所有参数都保持不变，正确的商店名称被保留，但当用户点击“查看报告”参数时商店名称更改为 ALL。:w00t: 有什么问题吗？就应用程序而言，“查看报告”是一个黑匣子，所以不知道用 rdl 改变什么 :( 提前感谢您的输入。

**编辑**
对不起，我上面提供的查询是实际的报告查询。参数查询是这样的：

```
WITH MEMBER [Measures].[ParameterCaption] AS [Store].[Store].CURRENTMEMBER.MEMBER_CAPTION MEMBER [Measures].[ParameterValue] AS [Store].[Store].CURRENTMEMBER.UNIQUENAME MEMBER [Measures].[ParameterLevel] AS [Store].[Store].CURRENTMEMBER.LEVEL.ORDINAL 
SELECT
   {[Measures].[ParameterCaption],
   [Measures].[ParameterValue],
   [Measures].[ParameterLevel]} 
   ON COLUMNS,
   [Store].[Store].ALLMEMBERS 
   ON ROWS 
FROM
   (
      SELECT
( STRTOMEMBER(@FromCalendarDateHierarchy, CONSTRAINED) : STRTOMEMBER(@ToCalendarDateHierarchy, CONSTRAINED) ) 
         ON COLUMNS 
      FROM
         [Members]
   ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:54:28.187

嗨，您不需要真正返回所有成员，而是需要更改以下行：

```
 NON EMPTY { ([Store].[Store].[Store].ALLMEMBERS ) } 
```

至：

```
 NON EMPTY { [Store].[Store].[Store] } 
```

它只会返回给你那些有价值的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:54:54.680

问题应该是当 Date 被修改时，所有低于 this 的参数都被更新，你必须检查 `Store parameter`是否**低于**：`Date parameter`![在此处输入图像描述](../Images/54b5e8da9a8191bd581b39b60284c830.png)

**使用向上**箭头移动`Store`参数上方`Date` **![在此处输入图像描述](../Images/86b93efcc0a5a69573c0d58ef92f868b.png)**

 **我希望这有帮助**

# database - 在 CakePHP 中通过 SSH 连接到远程数据库

> ID：13289592
> 
> 赞同：1
> 
> 时间：2012-11-08T13:15:09.467
> 
> 标签：database, cakephp, ssh

我需要在 Windows 下使用 CakePHP 从我的本地项目连接到托管在 AWS 中的远程数据库，似乎找不到这方面的帮助，有人知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:06:47.217

您可以创建 SSH 隧道。请看[这篇文章](https://support.cloud.engineyard.com/entries/21009887-access-your-database-remotely-through-an-ssh-tunnel)。

# junit - assertSame() 怪异？

> ID：13289594
> 
> 赞同：1
> 
> 时间：2012-11-08T13:15:15.893
> 
> 标签：junit, assertions

有人可以解释一下吗？

```
 String str1 = "123";
    String str2 = "123";
    assertSame(str1,str2); // works

    assertSame("1", new String("1")); // fails 
```

为什么第一个断言有效，而第二个无效？对我来说没有意义。我没有进行字符串比较——这应该由 assertEquals() 完成——而只是一个对象比较。在我看来，第一个 assertSame(str1,str2) 也应该失败，因为它没有引用同一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:01:35.170

编译器将两个对文字“123”的引用提取到字节码常量池中的同一条目中，因此它们被视为相同。

然而，"123" 和 new String("123") 是不同的对象，尽管它们包含相同的字符，所以 assertSame() 失败。assertEquals() 在这两种情况下都会成功。

# php - 在 PHP 中启动一个 Windows 进程并获取它的 PID？

> ID：13289595
> 
> 赞同：5
> 
> 时间：2012-11-08T13:15:19.013
> 
> 标签：php, windows

我似乎无法让这个工作。

所以我正在尝试为我的游戏编写一个脚本，该脚本连接到服务器，传递一些游戏名称/类型/玩家/等参数。然后服务器脚本根据需要设置游戏服务器的新实例，运行服务器的新实例，找到它正在运行的端口，并将所有这些信息发送回游戏。

我已经完成了脚本需要执行服务器游戏 exe 的部分，并获取它的 PID（所以我可以获取它正在使用的端口等）。

服务器脚本是一个PHP脚本，用于执行服务器的新实例。（PHP 似乎是一个不错的选择，并且在我的知识中相对而言）。

* * *

脚本必须能够完成执行，同时保持游戏服务器在后台运行。

能够同时运行多个游戏服务器是必要的。

* * *

我试过使用`proc_open`，但它给出了错误的进程 PID，这使得它无用。（虽然，它确实执行了程序）

```
<?php

    $startDir = "C:/Torque/My Projects/Grim/game";
    $runExe = "$startDir/Grimwood.exe";
    $envars = " -dedicated -mission \"core/levels/Empty Terrain.mis\"";

    $runPath = $runExe . $envars;

    chdir($startDir);

    $descriptorspec = array(
        0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
        1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
    );

    $prog = proc_open($runPath, $descriptorspec, $pipes, $startDir, NULL);

    sleep(4);

    if (is_resource($prog)) 
    {
        $stats = proc_get_status($prog);
        $pid = $stats['pid'];

        $task = shell_exec("tasklist /fi \"PID eq $pid\"");

        echo("\nProcess: \n$task"); // echos cmd.exe, not process ran
    }

?> 
```

它打印的 PID 属于它执行它的控制台窗口，而不是它实际执行的程序。

* * *

接下来我尝试使用 MS 脚本主机`WScript.Shell`及其`exec`/`run`方法。

```
<?php

    $startDir = "C:/Torque/My Projects/Grim/game";
    $runExe = "$startDir/Grimwood.exe";
    $envars = " -dedicated -mission \"core/levels/Empty Terrain.mis\"";

    $runPath = $runExe . $envars;

    chdir($startDir);    

    try
    {
        $WshShell = new COM("WScript.Shell");

        // gets right process ID
        // but process doesn't start properly with params
        $oExec = $WshShell->exec($runPath);
        echo("PID: " . $oExec->ProcessId);

        sleep(4);

        // executes properly
        // but doesn't return PID
        $oExec = $WshShell->run($runPath);
        echo("PID: " . $oExec->ProcessId);

    }
    catch (Exception $e)
    {
        // never gets hit
        echo("Failed to execute");
    }

?> 
```

运行 exec 命令，它给出了正确的 PID，但程序没有正确启动（只是显示一个空白的终端窗口，什么都不做）。

运行 run 命令，它会正确启动程序（在终端窗口中显示它应该显示的所有文本），但是，该命令不会返回 PID。

* * *

任何有关此事的帮助将不胜感激。我不确定我在执行`WScript.Shell->exec`命令时做错了什么，因此无法正确执行，因此我们将不胜感激。

如果可能的话，我想使用该`proc_open`方法，因为如果我们想将任何服务器内容移至 *nix，它会更跨平台。

感谢您的时间，我希望一些聪明的头脑可以为我指明正确的方向。

* * *

PHP版本：5.4.3

开发机器：带有 SP1 的 Windows 7 Ultimate

服务器机器：Windows Server 2008 R2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T04:07:45.247

我设法得到它。我使用 proc_open 执行，它返回运行的游戏服务器的 PPID（cmd.exe 可执行文件）。

由于`start /b`执行程序后退出的就是cmd.exe，所以唯一应该有这个PPID的就是游戏服务器，所以剩下的找到PID就比较容易了。

当一次创建多个实例并且多个实例已经在运行时，这也适用。

这是使用 proc_open 获取 PID 的最终脚本，如果其他人想知道这个线程并且可能碰巧需要它：

```
<?php

    $startDir = "C:/Torque/My Projects/Grim/game";
    $runExe   = "$startDir/Grimwood.exe";
    $envars   = " -dedicated -mission \"core/levels/Empty Terrain.mis\"";

    $runPath = $runExe . $envars;

    chdir($startDir);

    $descriptorspec = array (
        0 => array("pipe", "r"),
        1 => array("pipe", "w"),
    );

    if ( is_resource( $prog = proc_open("start /b " . $runPath, $descriptorspec, $pipes, $startDir, NULL) ) )
    {
        $ppid = proc_get_status($prog)['pid'];
    }
    else
    {
        echo("Failed to execute!");
        exit();
    }

    $output = array_filter(explode(" ", shell_exec("wmic process get parentprocessid,processid | find \"$ppid\"")));
    array_pop($output);
    $pid = end($output);

    echo("\nProcess ID: $pid ; Parent's Process ID: $ppid\n");

    // returns right process
    $task = shell_exec("tasklist /fi \"PID eq $pid\"");
    echo("\n\nProcess: \n$task\n\n");

    // returns no process found
    $task = shell_exec("tasklist /fi \"PID eq $ppid\"");
    echo("\n\nParent Process: \n$task\n\n");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:02:29.197

我相信你可以通过这种方式得到你想要的结果，因为你是为 Windows 操作系统开发的。

首先让您的 .exe 作为服务运行。（我相信这是语法）

```
sc create SERVICENAME binpath=PATH_TO_EXE 
```

那么我相信你可以：

```
win32_start_service('SERVICENAME');

sleep(4);

$serviceStatus = win32_query_Service_status('SERVICENAME');
var_dump($serviceStatus);

// or
echo $serviceStatus[ProcessId]; 
```

PS - 请考虑到我没有对此进行测试。但我相信这会奏效。试试看。

同时访问此链接[http://www.php.net/manual/en/book.win32service.php](http://www.php.net/manual/en/book.win32service.php)以获取有关 Windows 服务的更多信息。

# linux - 从基于 Web 的客户端更改 ldap 用户密码

> ID：13289596
> 
> 赞同：2
> 
> 时间：2012-11-08T13:15:22.833
> 
> 标签：linux, active-directory, fedora, openldap

我可以通过使用 fedora-idm-console 将 ldap 服务器与每个用户的管理员用户连接来更改密码。但是每个用户都需要通过使用 web 服务器客户端（如 phpldapadmin）远程连接服务器来更改密码。但是当用户连接到服务器来更改密码时，他只能看到他的详细信息。

你能帮我么 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T14:41:45.040

默认情况下，ldap 用户在数据库中没有任何权限，甚至无法读取和验证它。如果您希望每个用户都能够更改他们的密码，您必须在 slapd.conf（或 slapd.d）中允许这样做。这是我的配置，允许更改自己的密码和一些个人属性：

```
access to attrs=userPassword
 by dn="uid=root,dc=domain,dc=tld" write
 by group/groupOfNames/member.exact="cn=ldapadmins,dc=domain,dc=tld" write
 by self write
 by anonymous auth
 by * none

access to attrs=
  mail,
  sn,
  givenName,
  telephoneNumber,
  mobile,
  facsimileTelephoneNumber,
  street,
  postalAddress,
  postOfficeBox,
  postalCode,
  roomNumber,
  shadowLastChange,
  ldapPublicKey,
  sshPublicKey,
  sambaLMPassword,
  sambaNTPassword,
  sambaPwdLastSet 
 by dn.base="uid=root,dc=domain,dc=tld" write
 by group/groupOfNames/member.exact="cn=ldapadmins,dc=domain,dc=tld" write
 by self write
 by * read

access to *
 by dn="uid=root,dc=domain,dc=tld" write
 by group/groupOfNames/member.exact="cn=ldapadmins,dc=domain,dc=tld" write
 by * read 
```

# asp.net - 如何在asp.net的gridview中检索文本框值

> ID：13289602
> 
> 赞同：2
> 
> 时间：2012-11-08T13:15:44.130
> 
> 标签：asp.net, gridview, textbox, objectdatasource

这似乎是一个常见问题，但不知何故，我找到的答案似乎都无法解决我的问题 - 所以想知道我可能会错过什么（我是 asp.net 的新手，所以请原谅任何明显的错误）。

我有一个绑定到显示纸质杂志及其订阅价格的 ObjectDataSource 的 GridView。如果用户希望订阅任何杂志，我想在网格中的每一行添加一个文本框和一个按钮，以允许用户输入日期并单击按钮进行订阅。GridView 中不存在此文本框的字段。

理想情况下，我想向 UpdateParameters 添加一个参数，以将文本框中的值发送到 Update 方法。但我这样做一直没有成功。

我在使用 FindControl 时发现的一些建议也不起作用。（我看到在 Firefox 中使用 Inspect Element 生成的控件 ID 具有 Ctrl0、Ctrl1、Ctrl2 前缀。

附件是示例 ASPX 页面和后面的代码。非常感谢我在这里缺少的任何见解。

提前谢谢了。

这是 ASPX 文件和背后的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestGridView.aspx.cs" Inherits="WebApplication1.TestGridView" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server" DatasourceID="ObjectDataSource2" DataKeyNames ="MagazineID" OnRowUpdating="GridView1_RowUpdating">
        <Columns>
            <asp:BoundField DataField="MagazineID" HeaderText ="Magazine ID" ReadOnly="true" SortExpression="PricingID">
                <ControlStyle Width="100%" />
            </asp:BoundField>
            <asp:BoundField DataField="MagazineName" HeaderText ="Magazine Name" ReadOnly="true" />
            <asp:BoundField DataField="MagazinePrice" HeaderText ="Magazine price" ReadOnly="true" />
            <asp:TemplateField HeaderText ="SubscriptionStartDate">
                <ItemTemplate>
                    <asp:TextBox ID ="txtSubscriptionStartDateStr" runat="server" Width ="100px"/>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:ButtonField ButtonType="Button" CommandName="Update" Text="Subscribe" />
        </Columns>
    </asp:GridView>

    <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" UpdateMethod ="AddNewSubscription" SelectMethod="GetAllMagazines" TypeName="WebApplication1.TestGridView">
        <UpdateParameters>
            <asp:ControlParameter ControlID="txtSubscriptionStartDateStr" DefaultValue="" Name="userName" PropertyName="Text" Type="string" />
        </UpdateParameters>
    </asp:ObjectDataSource>

    </div>
    </form>
</body>
</html> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class TestGridView : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public DataTable GetAllMagazines()
        {
            DataTable dt = new DataTable();

            object[] parms1 = new object[] {11, "Magazine1", 5.99};
            object[] parms2 = new object[] {12, "Magazine2", 3.99 };

            dt.Columns.Add("MagazineID");
            dt.Columns.Add("MagazineName");
            dt.Columns.Add("MagazinePrice");

            dt.Rows.Add(parms1);
            dt.Rows.Add(parms2);

            return dt;
        }

        protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            GridView gv = (GridView)sender;
            GridViewRow gvRow = gv.Rows[e.RowIndex];
            TextBox tb = (TextBox) gv.FindControl("txtSubscriptionStartDateStr");
            if (tb == null)
                throw new ApplicationException("Could not find TextBox");

            string subscriptionStartDateStr = tb.Text;
            // more code to parse and use the subscription date
        }

        public void AddNewSubscription(int magazineID, string subscriptionStartDateStr)
        {
            // insert database row here.

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:32:41.487

您几乎拥有它，您在错误的对象上调用 FindControl。

在您的 GridView1_RowUpdating 方法更改中：

```
TextBox tb = (TextBox) gv.FindControl("txtSubscriptionStartDateStr"); 
```

到

```
TextBox tb = (TextBox) gvRow.FindControl("txtSubscriptionStartDateStr"); 
```

所以你的功能是这样的：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
  GridView gv = (GridView)sender;
  GridViewRow gvRow = gv.Rows[e.RowIndex];
  TextBox tb = (TextBox) gvRow.FindControl("txtSubscriptionStartDateStr");
  if (tb == null)
     throw new ApplicationException("Could not find TextBox");

  string subscriptionStartDateStr = tb.Text;
  // more code to parse and use the subscription date
} 
```

# ruby - Ruby：测试多维哈希

> ID：13289603
> 
> 赞同：0
> 
> 时间：2012-11-08T13:15:48.200
> 
> 标签：ruby, hash, multidimensional-array

**背景**

我有一个多维散列，我想对其进行检查以确保查找找到匹配项，但它的工作方式似乎与单维散列不同。我的代码适用于找到匹配项的情况，但不适用于不匹配项。我读过一些帖子，其中在某些情况下哈希会自动为不匹配生成一个键，我认为这会导致 NIL，因为我没有专门设置一个值。我收到的不匹配案例的错误消息是：

```
can't convert Hash into String (TypeError) 
```

**链接到我的项目以获取上下文：[https ://github.com/elvisimprsntr/siriproxy-redeye](https://github.com/elvisimprsntr/siriproxy-redeye)**

**代码摘录和源超链接：**

**[redeyeconfig.rb](https://github.com/elvisimprsntr/siriproxy-redeye/blob/master/lib/redeyeconfig.rb)**

```
# Channel number and command syntax to actual RedEye device commandIds
# Note: Must all be lower case. Use multiple entries for variability in Siri response.
@cmdId = Hash.new(&(p=lambda{|h,k| h[k] = Hash.new(&p)}))
@cmdId["all"]["cable box"]["0"]         = "/commands/send?commandId=3"
@cmdId["all"]["cable box"]["zero"]      = "/commands/send?commandId=3"
@cmdId["all"]["cable box"]["1"]         = "/commands/send?commandId=4" 
```

**[siriproxy-redeye.rb](https://github.com/elvisimprsntr/siriproxy-redeye/blob/master/lib/siriproxy-redeye.rb)**

```
 def send_command(command)
    commandid = @cmdId[@reRoom][@reDevice][command.downcase.strip]
    unless commandid.nil?
        say "OK. Sending command #{command}."
# FIXIT: Does not properly handle no match.  Results in "can't convert Hash into String (TypeError)"
#   This may be due to the fact that dynamically created multidimensional hash will create new keys if a match is not found which will pass the NIL check.
        Rest.get(@reIp[@reSel] + @roomId[@reRoom] + @deviceId[@reRoom][@reDevice] + commandid)
    else
        say "Sorry, I am not programmed for command #{command}."
    end
    request_completed   
  end 
```

**问题**

如何以不同方式定义/初始化我的哈希和/或测试不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:35:54.073

如果查找失败，您不会得到`nil`或`String`返回 - 相反，您会得到一个空的`Hash`.

检查`commandid.is_a?(Hash)`并`commandid.empty?`了解查找是否失败。

# javascript - 检测移动带宽/连接类型

> ID：13289604
> 
> 赞同：0
> 
> 时间：2012-11-08T13:15:53.100
> 
> 标签：javascript, mobile, video, streaming, bandwidth

我正在开发一个针对所有设备的网站，从最强大的桌面一直到糟糕的功能手机。该网站将重点提供视频内容。如果用户没有足够的连接或技术来接受视频流播放，我希望该站点能够优雅地失败，就用静态图像替换视频而言。

有没有办法检测从客户端到服务器的连接带宽？我的视频流服务提供多比特率流，我知道我可以使用用户代理和 Modernizr 等工具检测设备类型和功能。我认为如果文件大小以前已知，则可以通过测量客户端下载一系列文件所需的时间来测量带宽。

任何人都可以提出最有效的方法来提供我想要实现的目标吗？我可以从标题中得到什么吗？有我可以使用的框架或 API 吗？是否有无需轮询服务器的替代方法。后端是基于 Java 构建的，我愿意使用任何客户端技术。

为一个开放式问题道歉，但我不知道实现这一目标的最佳方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:26:07.247

你是在自问自答。最好的方法（如果我错了，请纠正我）是测试设备获取特定大小的文件的速度。

# excel - 给定范围匹配复杂条件的任何单元格的总和

> ID：13289605
> 
> 赞同：0
> 
> 时间：2012-11-08T13:15:53.847
> 
> 标签：excel, sum, range, conditional-statements

我得到了一组包含优惠券级别的航空公司税数据的数据，我不得不从 YQ 中分离出可联营税，并将其转换为欧元和美元。在按照要求完成大约 1100 行 VBA 之后，我必须计算总和，然后我就完成了。

基本上，税收数据与您在屏幕截图@http://i.imgur.com/qnOWg.jpg 中看到的相似，[但](http://i.imgur.com/qnOWg.jpg)规模要大得多。我需要从数据中取出每个可能的税码并计算总和，这就是我遇到的问题。如果数据按列排序，按税码按税码排序，这不是什么大问题，但因为它根本不需要，并且当优惠券没有时会创建更多列一定的税：

```
YQ BE IT HB EX MJ VT
YQ BE DE RA 
```

会成为：

```
YQ BE IT HB EX MJ VT
YQ BE                DE RA 
```

第一个更紧凑的视图是首选。

无论如何，如何根据货币计算每种税种的总和？据我了解，这是基于两个条件的总和：对于范围内的任何单元格：

使范围 A2:L12 中**的任何单元格的总和**符合条件：“A_CELL.OFFSET(0,-1) = [tax code] AND THAT_SAME_CELL.OFFSET(0,1) = [currency]”

有人可以帮我完成这件事吗？

先感谢您。干杯!

更新：用于获得所需结果的 VBA 函数：

```
Function SumOf(taxStr As String, curStr As String, wrkRange As Range) As Double
Dim taxSum As Double
Dim rngCell As Range

On Error GoTo SumOfError

taxSum = 0

'Set wrkRange = rangStr

For Each rngCell In wrkRange

            If rngCell.Column > 1 And rngCell.Offset.Column < wrkRange.Columns.Count - 1 Then

        If (rngCell.Offset(0, -1).Value = taxStr) And (rngCell.Offset(0, 1).Value = curStr) Then
            taxSum = taxSum + Val(rngCell.Value)
        End If
    End If

Next rngCell

SumOf = taxSum

Exit Function 
```

SumOfError: SumOf = 0 结束函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:19:11.947

好的，您的 VBA 可以解决问题。

但是，使用 VBA 始终是一大难题。所以这是我使用公式的解决方案：

```
=SUMIFS(B$2:B$12,A$2:A$12,$A15,C$2:C$12,B$14) 
```

这是用于示例屏幕截图的单元格 B15。你可以把它贴下来。

如果要将其粘贴到右侧，则需要对其进行一些调整。

# automated-tests - 如何在具有不同环境（因此不同的 URL）的同一测试中使用 behat 两个站点进行测试

> ID：13289607
> 
> 赞同：7
> 
> 时间：2012-11-08T13:16:12.050
> 
> 标签：automated-tests, qa, web-testing, behat, mink

我正在使用 Behat 和 Mink 来测试几个站点。其中两个使用单点登录，所以我的一个测试包括登录一个站点，转到第二个站点并检查我是否已登录。

这是通过以下行为代码完成的：

```
Feature: SSO
  In order to login in all related sites
  As a anonymous user
  I want to login in just one site

Scenario: Login with normal user
  Given I am on "/user/login"
  When I fill in "name" with "username"
    And I fill in "pass" with "password"
    And I press "login"
  Then I should see "My account"
    And I go to "http://server.developer1.workstations/"
  Then I should see "Close session" 
```

这行得通，但问题是这一行：

```
 And I go to "http://server.developer1.workstations/" 
```

我们有不同的环境（本地开发者、开发者、暂存）和不同的 URL，所以我无法编写适用于每台机器的测试。第一台服务器没问题，因为我可以为每台机器设置不同的 base_url 设置，但是我找不到将第二台服务器设置为常规设置的方法，而不是重写每个功能文件来更改第二台服务器的 URL。

有什么方法可以声明变量、常量或可以存储在每台机器不同的文件中的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:15:09.847

要解决这个问题，可以：

*   在机器相关文件或环境变量中定义主从 URL。例如，behat.yml 可以为每台机器定制，带有一些额外的参数：

> ```
> default:
>   context:
>     parameters:
>        master_url: 'http://master_site.workstation1'
>        slave1_url: 'http://.slave1.master_site.workstation1'
>        slave2_url: 'http://.slave2.master_site.workstation1'
>   extensions:
>     Behat\MinkExtension\Extension:
>       slave1_url: 'http://.slave1.master_site.workstation1'
>       goutte: ~
>       selenium2: ~ 
> ```

然后，将定义的参数包含到您自己的 FeatureContext 类中：

```
class FeatureContext extends MinkContext
{
    /**
     * Initializes context.
     * Every scenario gets it's own context object.
     *
     * @param array $parameters context parameters (set them up through behat.yml)
     */
    public function __construct(array $parameters)
    {
        $this->site_urls = array(
          'master' => $parameters['master_url'],
          'slave1' => $parameters['slave_url1'],
          'slave2' => $parameters['slave_url2'],
        );

    } 
```

最后，定义自己的步骤：

```
/**
 * @Then /^I should be logged in master$/
 */
public function iShouldBeLoggedInMaster()
{
  $this->visit($this->site_urls['master']);
  $this->assertPageContainsText('Close session');      
} 
```

使用 base_url 对从站站点进行此步骤检查的场景可能是：

```
Scenario: Login as normal user
  Given I am on "/user/login"  
  When I fill in "name" with "username"
    And I fill in "pass" with "password"
    And I press "Login"
  Then I should see "My account"
  And I should be logged in master 
```

然后，包括一个新步骤来检查用户是否已登录 master。

# .htaccess - 用 htaccess 重写规则，重定向 301

> ID：13289609
> 
> 赞同：1
> 
> 时间：2012-11-08T13:16:13.660
> 
> 标签：.htaccess, mod-rewrite

我正在尝试执行此规则：

```
RewriteRule ^featured$ home.php?featurez=1 [L,NC,PT,R=301] 
```

但我得到的是：

```
http://apps.com/var/www/vhosts/apps.com/httpdocs/iphone/home.php?featurez=1 
```

我试图用 PT 标签来克服它......但没有任何影响它:(..问题是什么，我该如何解决它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:31:32.753

你可以试试这个：

```
RewriteEngine on
RewriteRule ^featured$ home.php?featurez=1 [QSA,L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:34:24.467

当您在规则的目标中去掉前导斜杠时，当 apache 需要猜测路径是 URI 路径还是文件路径时，它会猜测错误。您可以通过添加前导斜杠（或使目标成为绝对 URI）或添加重写基数来帮助 apache：

```
RewriteBase /iphone/
RewriteRule ^featured$ home.php?featurez=1 [L,NC,PT,R=301] 
```

（或您的请求的任何基本 URI）

或者将目标更改为绝对 URI：

```
RewriteRule ^featured$ /iphone/home.php?featurez=1 [L,NC,PT,R=301] 
```

这是假设您的 htaccess 文件位于文档根目录内的“iphone”目录中，并且要访问您转到的重定向`http://your.domain/iphone/featured`。否则，只需摆脱所有的`iphone/`东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:29:53.427

```
RewriteRule ^featured$ http://%{HTTP_HOST}/home.php?featurez=1 [L,NC,PT,R=301] 
```

# mysql - 如何在 localhost 中一次备份 100 个 mysql 数据库？

> ID：13289611
> 
> 赞同：4
> 
> 时间：2012-11-08T13:16:19.623
> 
> 标签：mysql, xampp, localhost

我的本地主机中有 100 个数据库。我想一次备份所有这些。我想要一个快速的方法来做到这一点。反正有没有一次备份所有数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:20:34.033

[您可以使用mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)一次转储多个数据库。

使用以下命令，您可以一次转储多个数据库。

```
mysqldump --databases db1 db2 db3 > db_backup.sql 
```

或者，如果您想转储所有数据库：

```
mysqldump -u root -p --all-databases > db_backup.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:30:43.033

检查此网址[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_all-databases](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_all-databases)。这应该有帮助

**如何使用？**

```
shell> mysqldump [options] --all-databases 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-09T04:16:12.470

它就像备份一个数据库一样简单。只需执行以下操作

1.  转到[http://localhost/phpmyadmin](http://localhost/phpmyadmin)
2.  导航到导出选项卡
3.  在导出方法中，选择“*自定义 - 显示所有可能的选项*”，然后选择要导出的数据库（如果不是全部）。
4.  在下方滚动并在**对象创建选项**中确保选择

    *   添加 CREATE DATABASE / USE 语句
    *   添加 DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT / TRIGGER 语句
5.  单击开始并让所有表格保存在默认下载文件夹中或手动选择它。

6.  默认文件名是*127_0_0_1.sql*确保使用文本编辑器打开此文件并验证 sql 命令是否正确，至少对于第一个数据库和第一个表。现在应该备份它。如果这样做有任何问题，请在下面留言询问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:21:20.627

`mysqldump`与`--all-databases`选项一起使用。见 [http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_all-databases](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_all-databases)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T13:22:02.927

您可以使用*mysqldump*创建 mysql 数据库的备份。

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T13:22:52.327

尝试这个：

```
mysqldump -uusername -ppassword --all-databases > all_dbs.sql 
```

希望这可以帮助！

# spring - 将 spring-data 集成到现有的 spring 项目中

> ID：13289613
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:16:29.610
> 
> 标签：spring, hibernate, spring-data

我正在尝试将弹簧数据集成到我的项目中。在尝试这样做时，由于版本冲突，我需要升级我的许多 Maven 工件。（例如，由于 slf4j 冲突，我需要将 spring 从 3.0.3 升级到 3.1.3）。我需要将 Hibernate 从 3.5 升级到 4

现在，当我尝试将我的项目部署到 tomcat 中时，出现以下异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in ServletContext resource [/WEB-INF/marketplace-persist-config.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/marketplace-persist-config.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Configuration.addAnnotatedClass(Ljava/lang/Class;)Lorg/hibernate/cfg/Configuration;
       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
       at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
       at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
       at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
       at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
       at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:734)
       at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:457)
       at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
       at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
       at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
       at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
       at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
       at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
       at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
       at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
       at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:905)
       at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:525)
       at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1359)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
       at java.lang.reflect.Method.invoke(Unknown Source)
       at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
       at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source)
       at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)
       at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
       at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:670)
       at org.apache.catalina.manager.ManagerServlet.doPut(ManagerServlet.java:435)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:640)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
       at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
       at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
       at java.lang.Thread.run(Unknown Source) 
```

我发现 Springs JPA 实体管理器没有附带 HibernateExceptionTranslater 的实现，需要手动添加。

我添加了它，但我仍然得到上述异常

这是 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.comp</groupId>
    <artifactId>service</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>service</name>
    <packaging>jar</packaging>
    <description>service</description>
    <url>http://www.media.com</url>
    <properties>
        <org.springframework.version>3.1.3.RELEASE</org.springframework.version>
        <spring.security.version>3.1.3.RELEASE</spring.security.version>
        <java.version>1.6</java.version>
        <servlet-api.version>2.5.0</servlet-api.version>
        <querydsl.version>2.8.2</querydsl.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>

        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.2</version>
        </dependency>

        <dependency>
            <groupId>net.sf.jxls</groupId>
            <artifactId>jxls-core</artifactId>
            <version>0.9.9</version>
            <scope>compile</scope>
        </dependency>

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${spring.security.version}</version>
        </dependency>       

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.6</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.1_3</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
<!--        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency> -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-commons-annotations</artifactId>
            <version>3.3.0.ga</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-scratchpad</artifactId>
            <version>3.7-beta3</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>com.springsource.javax.transaction</artifactId>
            <version>1.1.0</version>
        </dependency>

        <!-- spring dependencies -->
        <!--
            Core utilities used by other modules.
            Define this if you use Spring Utility APIs (org.springframework.core.*/org.springframework.util.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.core</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Expression Language (depends on core)
            Define this if you use Spring Expression APIs (org.springframework.expression.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.expression</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Bean Factory and JavaBeans utilities (depends on core)
            Define this if you use Spring Bean APIs (org.springframework.beans.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.beans</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

<!--        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency> -->

        <!--
            Aspect Oriented Programming (AOP) Framework (depends on core, beans)
            Define this if you use Spring AOP APIs (org.springframework.aop.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.aop</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Application Context (depends on core, expression, aop, beans)
            This is the central artifact for Spring's Dependency Injection Container and is generally always defined
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.context</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Various Application Context utilities, including EhCache, JavaMail, Quartz, and Freemarker integration
            Define this if you need any of these integrations
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.context.support</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Transaction Management Abstraction (depends on core, beans, aop, context)
            Define this if you use Spring Transactions or DAO Exception Hierarchy
            (org.springframework.transaction.*/org.springframework.dao.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.transaction</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            JDBC Data Access Library (depends on core, beans, context, transaction)
            Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.jdbc</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, and iBatis.
            (depends on core, beans, context, transaction)
            Define this if you need ORM (org.springframework.orm.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.orm</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Object-to-XML Mapping (OXM) abstraction and integration with JAXB, JiBX, Castor, XStream, and XML Beans.
            (depends on core, beans, context)
            Define this if you need OXM (org.springframework.oxm.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.oxm</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Web app development utilities common across Servlet/Portlet environments (depends on core, beans, context)
            Define this if you use Spring MVC, or wish to use Struts, JSF, or another web framework with Spring (org.springframework.web.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.web</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Spring MVC for Servlet Environments (depends on core, beans, context, web)
            Define this if you use Spring MVC with a Servlet Container such as Apache Tomcat (org.springframework.web.servlet.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.web.servlet</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Spring MVC for Portlet Environments (depends on core, beans, context, web)
            Define this if you use Spring MVC with a Portlet Container (org.springframework.web.portlet.*)
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.web.portlet</artifactId>
          <version>${org.springframework.version}</version>
        </dependency>

        <!--
            Support for testing Spring applications with tools such as JUnit and TestNG
            This artifact is generally always defined with a 'test' scope for the integration testing framework and unit testing stubs
        -->
        <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>org.springframework.test</artifactId>
          <version>${org.springframework.version}</version>
          <scope>test</scope>
        </dependency>

        <!-- Spring Data -->
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.1.0.RELEASE</version>
        </dependency> 

        <!-- Query DSL -->
        <dependency>
            <groupId>com.mysema.querydsl</groupId>
            <artifactId>querydsl-core</artifactId>
            <version>${querydsl.version}</version>
        </dependency>

        <dependency>
            <groupId>com.mysema.querydsl</groupId>
            <artifactId>querydsl-apt</artifactId>
            <version>${querydsl.version}</version>
        </dependency>

        <dependency>
            <groupId>com.mysema.querydsl</groupId>
            <artifactId>querydsl-jpa</artifactId>
            <version>${querydsl.version}</version>
        </dependency>

        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-utils</artifactId>
            <version>3.0.4</version>
        </dependency>  

        <dependency>
            <groupId>velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.5</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4</version>
        </dependency>

    </dependencies>
    <repositories>

        <repository>
            <id>springsource-repo</id>
            <name>SpringSource Repository</name>
            <url>http://repo.springsource.org/release</url>
        </repository>

        <repository>
            <id>com.springsource.repository.bundles.release</id>
            <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
            <url>http://repository.springsource.com/maven/bundles/release</url>
        </repository>
        <repository>
            <id>com.springsource.repository.bundles.external</id>
            <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
            <url>http://repository.springsource.com/maven/bundles/external</url>
        </repository>
        <repository>
            <id>com.springsource.repository.bundles.milestone</id>
            <name>SpringSource Enterprise Bundle Repository - External Bundle Milestones</name>
            <url>http://maven.springframework.org/milestone</url>
        </repository>
        <repository>
            <id>com.springsource.repository.bundles.milestone.alt</id>
            <name>SpringSource Enterprise Bundle Repository - External Bundle Milestones II</name>
            <url>http://repository.springsource.com/maven/bundles/milestone</url>
        </repository>
        <repository>
            <id>spring-snapshot</id>
            <name>Spring Maven SNAPSHOT Repository</name>
            <url>http://repo.springsource.org/libs-snapshot</url>
        </repository>

    </repositories>
    <build>
        <finalName>${project.artifactId}</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <server>local</server>
                </configuration>
            </plugin>
            <plugin>
              <groupId>com.mysema.maven</groupId>
              <artifactId>apt-maven-plugin</artifactId>
              <version>1.0.6</version>
              <executions>
                <execution>
                  <goals>
                    <goal>process</goal>
                  </goals>
                  <configuration>
                    <outputDirectory>target/generated-sources/java</outputDirectory>
                    <!-- States that the APT code generator should look for JPA annotations --> 
                    <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
                  </configuration>
                </execution>
              </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:26:33.323

请升级以下依赖项，

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>3.3.0.ga</version>
</dependency> 
```

# ios - 界面生成器 IBOutlet - 没有 @synthesize

> ID：13289614
> 
> 赞同：0
> 
> 时间：2012-11-08T13:16:31.397
> 
> 标签：ios, xcode4, iboutlet

我正在使用 XCode 4.4.1 来学习 iPhone 开发。

我通过从 UIObject 的弹出菜单中的“引用插座”部分拖动，在我的 ABCViewController.h 标头中创建插座属性。这会增加如下几行：

```
@property (strong, nonatomic) IBOutlet UITextField *nameField; 
```

到头文件。

现在，当我查看相应的 ABCViewController.m 文件时，我希望看到

```
@synthesize nameField; 
```

在某处自动生成。但事实并非如此——我必须手动添加每个 @synthesize 语句。

这只是一个小问题，但我想知道出了什么问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:21:47.337

在 Xcode 4.4（特别是 LLVM 4.0 编译器）中，如果没有 @synthesize 指令，则默认情况下会进行属性合成。它相当于：

```
@synthesize nameField = _nameField; 
```

# forms - 如何两次提交相同的表格？

> ID：13289616
> 
> 赞同：0
> 
> 时间：2012-11-08T13:16:31.337
> 
> 标签：forms, jsf, primefaces, submit

我不得不说，我不确定这是一个问题，但我认为是的。我有一个从哪里是两个提交按钮。第一个我通过序列号获取产品信息，两个我再次提交整个表格。

搜索按钮和代码：

**按钮 1**

```
<p:column><h:outputLabel value="#{bundle.newRma_label_sarjanumero}" for="sarjanro" /></p:column>
                <p:column><p:inputText id="sarjanro" value="#{MainController.selected.sarjanro}" style="width: 200px;" /></p:column>
                <p:column><p:commandButton icon="ui-icon-search"
                                           action="#{MainController.haeTiedotSarjanrolla}" style="width: 100px;" update=":messagePanel"/></p:column>

 //Fetching product info with serial number
public String haeTiedotSarjanrolla() {
    log.info("sarjanro=" + current.getSarjanro());
    Sarjanumerot s = null;

    s = helper.getSerialInfo(current.getSarjanro());
    if (s != null) {
        current.setAn8(s.getAn8());
        current.setDsc1(s.getDsc1());
        current.setDsc2(s.getDsc2());
        current.setSarjanro(s.getId().getLotn());
        current.setTuotenro(s.getId().getLitm());
    }

    // Back to same page!
    return "newRma";
} 
```

**另一个按钮（保存）**

```
<p:column><p:commandButton action="#{MainController.talletaUusiRma}" value="#{bundle.newRma_tallenna}" immediate="true" style="width: 220px;"/></p:column> 
```

保存（按钮 2）正在工作，但请求为空，没有任何数据。我试图这样检查它，它总是为NULL：

第一次提交后未填充的另一个字段：

```
<p:row>
            <p:column></p:column>
            <p:column><p:outputLabel value="#{bundle.newRma_shortdesc}" for="shortdesc"/></p:column>
            <p:column><p:inputTextarea rows="4" cols="30" id="shortdesc" value="#{MainController.selected.shortdesc}" style="width: 200px;"/></p:column>

        </p:row>

Map<String, String> parameterMap = (Map<String, String>) FacesContext.getCurrentInstance()
                     .getExternalContext().getRequestParameterMap();
    String temp = parameterMap.get("shortdesc"); 
```

temp 始终为 NULL！

有没有用 primefaces、ajax、js 或其他东西处理这个问题的最佳实践？

谢谢！萨米人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:26:13.337

这仅在 bean 是`@ViewScoped`并且您从操作方法返回`null`或返回时才有效。`void`

如果返回非`null`or `void`，如下

```
// Back to same page!
return "newRma"; 
```

然后将创建一个全新的视图范围 bean 实例，从而丢弃最初的实例。

此外，我不确定您为什么`immediate="true"`在第二个按钮上使用，这没有任何意义，但是您是否知道这样非`immediate`输入的数据根本不会被处理，因此您应该使用以前的不`immediate`提交？

顺便说一句，您收集提交数据的方式也没有任何意义。您不需要遍历请求参数映射（顺便说一下，您使用了无效的参数名称）。只需直接访问绑定到输入值的 bean 属性。

# oracle-adf - 基于 3 个实体的 ADF BC 复合 ViewObject - 插入

> ID：13289617
> 
> 赞同：0
> 
> 时间：2012-11-08T13:16:32.830
> 
> 标签：oracle-adf

是否可以插入基于 3 个实体的 ViewObject？或者只是查看和更新​​？

我创建了基于 3 个实体的 ViewObject。所有实体都有外键和它们之间的关联。选择和更新此复合实体可以正常工作。但插入没有。ADF 版本 11.1.2.3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:02:48.760

当您创建 VO 时，您是否将添加的第二个和第三个 EO 标记为可更新？请注意，如果 realtionship 是一对多，您可能需要编写在插入情况下要做什么的代码。更多信息在这里： [http](http://docs.oracle.com/cd/E35521_01/web.111230/e16182/bcadvvo.htm#CEGCAJCI) ://docs.oracle.com/cd/E35521_01/web.111230/e16182/bcadvvo.htm#CEGCAJCI 42.9 创建具有多个可更新实体的视图对象

# visual-studio - 是否可以从 Visual Studio 2012 降级到 Visual Studio 2010？

> ID：13289622
> 
> 赞同：0
> 
> 时间：2012-11-08T13:16:55.683
> 
> 标签：visual-studio

我在[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)中有一个很棒的解决方案，其中有一个使用 WebAPI 的 Web 项目和一个支持使用[实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)(EF) 代码优先的数据的 Web 服务项目。我刚刚被告知我需要了解如何使用 Visual Studio 2010。

在 Visual Studio 2010 中我可以做些什么来处理这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:48:49.943

正如[Henrick](https://stackoverflow.com/a/13289670/67392)回答的那样：您不会升级/降级 VS 安装，而是并排安装版本。

您注意到两种可能存在问题的技术：

1.  EF Code First：从 .NET 4.0 和 VS2010 支持的 4.1（或者是 4.2？）开始支持。提供您未使用`enum`或地理/空间数据类型（需要 .NET 4.5）这应该可以工作，但您需要确保更新到 .NET 4 的 EF5 NuGet 包。

2.  WebAPI：这是 VS2012 附带的 MVC4 中的新功能，但对于 .NET 4/VS2010 是单独安装的。

最后。*虽然某些项目类型在 VS2012 和 VS2010 SP1*之间往返（您需要服务包），但并非所有项目类型都如此。详细信息在[MSDN](http://msdn.microsoft.com/en-gb/library/hh266747.aspx)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:20:32.850

可以单独安装Visual Studio 2010，打开项目看看。安装 Visual Studio 2005、2008、2010 或 2012 版本没有危险。

# javascript - 动画 div 水平到垂直

> ID：13289623
> 
> 赞同：0
> 
> 时间：2012-11-08T13:17:01.787
> 
> 标签：javascript, jquery, css

好吧，这就是现在的交易，我有一个固定高度为 182 x 182 像素的 div，它们向左浮动，因此它们水平对齐。我需要做的是，一旦单击了这些 div 之一，我需要所有这些 div 尽可能从水平动画到垂直动画。如果您能指出我的简单插件或编写代码，那就太棒了，谢谢！

例子：

```
|-------| |-------| |-------| 
|   1   | |   2   | |   3   | <-- Box 1 is clicked, boxes 2 and 3 need to 
|_______| |_______| |_______|     be animated vertically don't necessarily  
              |                   have to move in straight lines they can
|-------|     V         |         float over or on top of eachother as long as
|   2   |   <--         |         they animate from horizontal to vertical.
|_______|               |
                        |
|-------|               V
|   3   |      <----
|_______| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:11:31.593

我总是喜欢写这样的脚本。JSFiddle 目前有很多问题，所以用 codepen 代替：

[http://codepen.io/anon/pen/yIhDK](http://codepen.io/anon/pen/yIhDK)

以及未来保存的代码

HTML：

```
<div id="boxcontainer">
  <div class="box box1"></div>
  <div class="box box2"></div> 
  <div class="box box3"></div>
</div> 
```

CSS：

```
#boxcontainer {
  position: relative;
}
.box {
  width: 182px;
  height: 182px;
  border: 5px solid black;
  margin: 5px;
  float: left;
  position: relative;
} 
```

JS：

```
$(function(){
  $(".box1").click(function(){
    $(".box").each(function(){
      var width = $(this).outerWidth(true),
          height = $(this).outerHeight(true),
          nrTop = Math.floor($(this).position().top / height),
            nrLeft = Math.floor($(this).position().left / width),
          top = (nrLeft-nrTop)*height,
          left = (nrTop-nrLeft)*width;
      console.log(width, height, nrTop, nrLeft, top, left);
      $(this).animate({
        "top": "+="+top+"px",
        "left": "+="+left+"px"
      }, "slow");
    });
  });
}); 
```

它背后的想法是，它为某个盒子计算它是左边的盒子n，并将其放在顶部的位置n。（反之亦然）

# html - 如何在不使用表格的情况下垂直划分网页？

> ID：13289632
> 
> 赞同：6
> 
> 时间：2012-11-08T13:17:50.473
> 
> 标签：html, tabular

我在某处读到（事实上是在 Stack Overflow 上！）使用表格在 html 中布局页面是个坏主意。

我有一个 HTML 页面需要在中间“划分”，一些内容在左边，一些内容在右边。起初我会考虑使用每个宽度为 50% 的嵌套表。我可以使用*div*做同样的事情吗？还是其他一些 html 结构？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T13:24:36.260

```
<div style="float:left; width:50%;">
Left  <!-- Set Div As your requirement -->
</div>
<div style="float:left; width:50%;">
Right  <!-- Set Div As your requirement -->
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:26:21.473

这应该（非常基本）实现您想要的。

```
body,html{height:100%}
div.mainLayout{float:left;width:50%}
div.clearFlt{clear:both}

<html>
<head>

</head>
<body>
    <div class="mainLayout">LeftContent
        <div class="clearFlt"></div>
    </div>
    <div class="mainLayout">LeftContent
        <div class="clearFlt"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:27:49.437

基本布局的一种常见方法是将您的区域包装到 div 容器中。这些容器使用 CSS 定位和调整大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:32:14.983

如果您要检查 stackoverflow 页面（如果使用 firefox，请右键单击右侧边栏上的任何元素，然后选择“检查元素”），您会看到边栏是一个带有 float 属性的 div 元素。页面底部的 Inspector 堆栈上没有表格！

# wordpress - 如何知道特定 wordpress 插件的用户数量

> ID：13289640
> 
> 赞同：1
> 
> 时间：2012-11-08T13:18:27.253
> 
> 标签：wordpress

通过检查 WordPress 统计数据，我们可以知道一个 WordPress 插件被下载了多少次。但这不是该插件的用户数量，对吧。当新版本发布时，同一用户将下载该插件。

那么我们是否有任何工具或统计数据来获取 WordPress 插件的唯一用户总数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:14:35.153

我能想到的唯一方法可以跟踪这样的事情是通过将带有一些统计信息的插件 phone-home 安装到您自己的服务器上。

只需确保用户可以选择退出跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:48:59.840

[我对此事进行了研究](https://wordpress.stackexchange.com/q/60191/12615)。答案是否定的。

> [在这篇 2010 年](http://make.wordpress.org/core/2010/10/22/new-and-improved-this-morning-we-have-a/) 关于每个插件页面中的统计图表的文章中引用了 Otto 评论。
> 
> > *[...] 下载计数也包括直接下载*
> > *该版本号图表上的任何地方都没有“原始计数”。原始计数不是将提供的数据。*

对于您自己的插件，您可以使用 @PeterVanDerDoes 指出的跟踪。

奇怪的是，我在研究中用作示例的插件，Yoast 的 WordPress SEO，与进行这种跟踪的插件相同。这是[一个很好的讨论](https://wordpress.stackexchange.com/q/72656/12615)。

[我将复制插件开发官方指南](http://wordpress.org/extend/plugins/about/guidelines/)的相关部分：

> `7.`未经用户知情同意，不得“打电话回家”。这个看似简单的规则实际上涵盖了几个不同的方面：
> 
> *   不得未经授权收集用户数据。例如，未经用户许可，不允许将管理员的电子邮件地址发送回您自己的服务器；但是询问用户一个电子邮件地址并收集他们是否选择提交它是可以的。在这方面采取的所有行动都必须是用户的行为，而不是插件自动完成的。
>     
>     
> *   显示的所有图像和脚本都应该是插件的一部分。这些应该在本地加载。如果插件确实需要从外部站点（例如阻止列表）加载数据，则应在插件的管理屏幕或描述中明确说明。关键是用户必须被告知什么信息被发送到哪里。
>     
>     
> *   一般来说，像横幅或文本链接广告这样的东西不应该出现在插件的任何地方，包括在它的设置屏幕上。无论如何，设置屏幕上的广告通常是无效的，因为理想情况下用户很少访问这些屏幕，并且广告质量低，因为广告系统无法看到页面内容来确定好的广告。所以他们最好完全离开。将链接放回您自己的网站或您选择的社交网络是可以的。如果插件确实包含来自第三方服务的广告，则它必须默认为完全禁用，以防止在未经用户同意的情况下从用户那里收集跟踪信息。这是通常称为“选择加入”的方法。
>     
>     
> *   请注意，如果您确实包含了我们认为是“广告垃圾邮件”的内容，或者试图欺骗他人的广告系统，那么我们不仅会删除您的插件，还会将您的代码报告给广告系统的滥用机制。我们不会对垃圾邮件做出友好的反应。不要尝试。

# objective-c - Objective-C Category

> ID：13289646
> 
> 赞同：0
> 
> 时间：2012-11-08T13:18:48.707
> 
> 标签：objective-c, ios, polymorphism, objective-c-category

> **Possible Duplicate:**
> [What happens if two ObjC categories override the same method?](https://stackoverflow.com/questions/3221972/what-happens-if-two-objc-categories-override-the-same-method)

I have two Categories on NSString class as follows:

//first category

```
#import "NSString+MyCategory1.h"

@implementation NSString (MyCategory1)

-(void)myMethod{
    NSLog(@"this is my method from category 1");
}

@end 
```

//second category

```
#import "NSString+MyCategory2.h"

@implementation NSString (MyCategory2)

-(void)myMethod{
    NSLog(@"this is my method from category 2");
}

@end 
```

But the following main method is always calling `myMethod` from `MyCategory1` even after import of the same has been commented out.

```
#import <Foundation/Foundation.h>
//#import "NSString+MyCategory1.h"
#import "NSString+MyCategory2.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        [[[NSString alloc]init] myMethod];

    }
    return 0;
} 
```

Please anyone explain this behavior and how this behavior is useful in practice.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:24:03.213

I think what this shows is that you should not have methods in categories that clash.

My (semi informed) guess is that which method gets called us down to how the app was compiled, so it's not something you can influence at runtime. And it's not really useful in practice, it's just... what happens.

As for *why* this happens, the header file doesn't say what to do when the method is called, only that an implementation for it exists. In your case, it does exist. It just happens not to be the one you want.

# android - 使用 Android Beam（或 S-Beam）发送大文件

> ID：13289647
> 
> 赞同：2
> 
> 时间：2012-11-08T13:18:49.180
> 
> 标签：android, nfc, android-beam

我的任务是添加对应用程序的支持，以通过 Android 上的“NFC”将大型数据文件（数十兆字节）从设备传输到设备。

我知道 Android 上的真正 NFC 速度非常慢，但我知道 ICS 支持将批量数据传输到蓝牙；三星拥有通过 Wifi Direct (S-Beam) 执行相同操作的专有机制。这就是我想要采取的方法。

不幸的是，我找不到有关如何实际执行此操作的任何信息。

我查看了 Android Beam 文档，并没有提到支持大批量数据的特殊机制；所以我采用了标准的 AndroidBeamDemo 应用程序，并简单地在数据包大小中添加了一个大字节数组，希望它都能正常工作。似乎没有 --- 发送一条 10kB 的消息大约需要五秒钟，而尝试发送一条 1MB 的消息根本没有做任何事情（尽管它告诉我消息已成功发送）。

对于三星的 S-Beam，我根本找不到任何文档。

有没有人做过这项工作，如果有，他们能给我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:20:40.430

对于 Android Beam，您需要为使用数据的文件提供 URI [`setBeamPushUris()`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setBeamPushUris%28android.net.Uri%5b%5d,%20android.app.Activity%29)（或者`setBeamPushUrisCallback()`如果数据不固定）。

对于 S-Beam，我不知道有任何 API 可以使用。AFAICT，S-Beam 仅适用于图片、视频和音乐的内置应用程序。

# jruby - 捆绑器：不可执行：rake

> ID：13289652
> 
> 赞同：0
> 
> 时间：2012-11-08T13:19:17.583
> 
> 标签：jruby, bundler, torquebox

我正在一个 ubuntu vagrant box 中设置 JRuby 1.7 以使用 Torquebox。我正在使用[torquebox-remote-deployer](https://github.com/jkutner/torquebox-remote-deployer) gem 将存档文件和应用程序内容部署到虚拟机。现在，当 gem 尝试执行时`bundle exec rake db:migrate`，我收到以下错误：

```
bundler: not executable: rake 
```

现在，当我检查 vendor/bundle/jruby/1.9/bin 目录时，rake 和所有其他需要的可执行文件都在那里。我还尝试通过本地 jruby 安装运行 bundle 命令以确保正确调用它，但我得到相同的结果

```
/opt/jruby/bin/jruby -S bundle exec rake db:migrate 
```

有什么建议么？如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:22:52.643

那么，那里的 rake 文件实际上是否被标记为可执行文件？

不知道一开始你会如何在这种情况下结束，但错误消息似乎是说“rake”本身就在那里，但没有标记为可执行文件 (+x)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T12:49:35.997

如果同样的问题是针对 rails 脚本文件的解决方案将是：

只需将文件权限更新为可执行文件。它对我有用。

```
 chmod 777 -R script/filename.rb 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:01:42.640

这是由于 jar 的“错误”。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6194856](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6194856)

我最终创建了一个单独的 ruby​​ 脚本来修复我使用 torquebox:remote:exec["bundle exec jruby path/to/script"] 调用的权限。

# android - 自定义膨胀警报对话框布局android中的自定义高度和宽度

> ID：13289661
> 
> 赞同：0
> 
> 时间：2012-11-08T13:19:54.587
> 
> 标签：android, layout, height, width, inflate

我正在尝试在警报对话框中扩展自定义布局。我明白了，但是宽度扩展到了fill_parent。我已经尝试在 xml 文件中放置 wrap_content 或自定义大小（例如 200dp），它曾经是 fill_parent。

我想放我自己的高度和宽度，比如（200dp，150dp），我该​​怎么放这个？

我已经阅读并尝试了这个网络上的一些解决方案，但我无法解决我的问题，有人可以帮助我吗？提前感谢它。

我在这里给出我的java代码

```
`>View ff = getLayoutInflater().inflate(R.layout.customlayout, null);
        >>Button menu = (Button)ff.findViewById(R.id.menu);
        >>
menu.setOnClickListener(new View.OnClickListener() {                                    
            >>
public void onClick(View v) {

>// TODO Auto-generated method stub 

>>gotomenu();
            }
            }); 
        >
AlertDialog dialog = new AlertDialog.Builder(this)

>.setView(ff)

> .create();        

> dialog.show();` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:32:25.057

如果您想以自己的方式制作高度和宽度，而不是让自定义类扩展对话框，如下所示

```
public class AlertCustomDialog extends Dialog {

public AlertCustomDialog(final Context context,  Event e) {
          requestWindowFeature(Window.FEATURE_NO_TITLE);
          setContentView(/*your layout*/);
          setCancelable(true);
 }

} 
```

并打电话

```
 new  AlertCustomDialog(context, e).show(); 
```

当你需要时

否则您可以定义 Activity 并将代码放入清单中，如下所示：

```
 <activity android:name="/*your activity name*/"
   android:theme="@android:style/Theme.Dialog"
        android:configChanges="orientation|keyboardHidden" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T14:08:22.603

您可以创建 LinearLayout 并添加 Space 或仅 View 来调整您需要的高度

# iphone - Xcode 4.5.2 和 OS X 10.8.2 中的 iPhone Simulator 6.0 已停止工作，我可以重新安装吗？

> ID：13289665
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:20:13.900
> 
> 标签：iphone, xcode, simulator

我从这个论坛阅读了很多帖子，但从未问过任何问题。我遇到了这个问题，我需要一些帮助。我在我的 OS X 10.8.2 上使用 Xcode 4.5.2。直到今天一切正常，但今天我的 iPhone 6.0 模拟器已经停止工作。我有一个简单的 iPhone 应用程序，当我现在尝试在我的模拟器中运行它时，我得到一个错误并且它崩溃了。事实上，模拟器根本没有启动，我只是收到这条错误消息，它会发送给 Apple。我将在下面发布错误消息。我更像是一个对 Mac 很陌生的 Windows 人，想知道是否有办法重新安装模拟器或任何其他建议将不胜感激。谢谢！以下是暗恋报告：

```
Process:         iPhone Simulator [9681]
Path:            /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator
Identifier:      com.apple.iphonesimulator
Version:         6.0 (358.4)
Build Info:      Indigo-358004000000000~83
Code Type:       X86-64 (Native)
Parent Process:  launchd [237]
User ID:         501

Date/Time:       2012-11-09 00:01:31.039 +1100
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Interval Since Last Report:          5921 sec
Crashes Since Last Report:           40577
Per-App Interval Since Last Report:  18 sec
Per-App Crashes Since Last Report:   9
Anonymous UUID:                      XXXXXXXXXXXXXXXXXXXXXXXXXX

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000210

VM Regions Near 0x210:
--> 
    __TEXT                 000000010ab1b000-000000010ab46000 [  172K] r-x/rwx SM=COW  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:27:25.830

最好的办法是完全重新安装 Xcode 以确保安全。它可能是模拟器，甚至是由 xcode 运行的进程来启动它。

还可以通过运行 Apple 硬件测试来检查您的 RAM 是否正常。这有时可能与此问题有关

您的项目根本不会受到影响，因此无需担心。

也尝试使用[This](http://www.codza.com/how-to-debug-exc_bad_access-on-iphone)让自己开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:40:49.520

好的，问题解决了，原来我的硬盘上有一些坏块，所以我不得不用 CCC（克隆器）将我的硬盘克隆到另一个硬盘上，一切正常且顺利。我使用 TechTool 应用程序检查我的系统，但即使是这个应用程序在检查过程中也崩溃了，这让我认为这是我的硬盘。问题解决了。

# javascript - Javascript - 距离（以像素为单位） - 决定

> ID：13289674
> 
> 赞同：0
> 
> 时间：2012-11-08T13:20:49.790
> 
> 标签：javascript, animation, distance, design-decisions

我有一个简单的 javascript 动画，其中两个牛仔（iamges）根据随机间隔数相互“比赛”。

我不知道该怎么做是让脚本决定谁是赢家，这意味着如果牛仔首先达到预定义的距离，脚本就会知道并显示谁赢了的警报。

这是显示示例的屏幕截图：

![在此处输入图像描述](../Images/a4f5319da17092b28300ade79ce4392a.png)

这是我到目前为止的代码：http: [//pastebin.com/Cmt4N8c9](http://pastebin.com/Cmt4N8c9)

能给我一些方向吗？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:37:02.270

在您的`move()`功能中，您应该执行类似的操作

```
if (x >= dest_x) {
    alert('player 1 won');
} else if (x2 >= dest_x2) {
    alert('player 2 won');
} else {
    ... continue the loop ... 
} 
```

你很可能会把它抛在脑后

```
document.getElementById("cowboy").style.top  = y+'px';
document.getElementById("cowboy").style.left = x+'px';

document.getElementById("cowboytwo").style.top  = y2+'px';
document.getElementById("cowboytwo").style.left = x2+'px'; 
```

顺便说一下，您可能还想检查重复变量的代码。

例如，AFAIK dest_x 和 dest_x2 都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:41:35.697

简单的移动

```
/* Y is not relevant since you only move it on X axis */

var position1 = 100;
var position2 = 100;

var dest      =  800; //Or any given value

function move() {
    var step1 = Math.floor(1 + (10 * Math.random() ) );
    var step2 = Math.floor(1 + (10 * Math.random() ) );

    position1 += step1;
    position2 += step2;

    document.getElementById("cowboy").style.left     = position1+'px';
    document.getElementById("cowboytwo").style.left = position2+'px';

    if(position1 < dest && position2 < dest) {
        window.setTimeout('move()',100);
    } else {
        //We have the winner
        if(position1 > dest) alert("Winner is Cowboy1");
        if(position2 > dest) alert("Winner is Cowboy2");

        //Its also possible that both of them pass target value at the same step
    }
} 
```

# qt - 在 QML 中的 Gridview 上方显示文本

> ID：13289675
> 
> 赞同：3
> 
> 时间：2012-11-08T13:20:52.270
> 
> 标签：qt, qml

如何在 gridview 上方显示文本？我尝试了以下代码，但在滚动时，gridview 元素出现在文本上方并将其隐藏。即使我指定了 gridview 的宽度和高度，gridview 元素也会在滚动时越过边界。任何帮助表示赞赏。谢谢 。

```
Rectangle {
width: 300; height: 400
color: "gray"

ListModel {
    id: appModel
    ListElement { name: "Music"; icon: "pics/AudioPlayer_48.png" }
    ListElement { name: "Movies"; icon: "pics/VideoPlayer_48.png" }
    ListElement { name: "Camera"; icon: "pics/Camera_48.png" }
    ListElement { name: "Calendar"; icon: "pics/DateBook_48.png" }
    ListElement { name: "Messaging"; icon: "pics/EMail_48.png" }
    ListElement { name: "Todo List"; icon: "pics/TodoList_48.png" }
    ListElement { name: "Contacts"; icon: "pics/AddressBook_48.png" }
}

Component {
    id: appDelegate

    Item {
        width: 100; height: 100

        Image {
            id: myIcon
            y: 20; anchors.horizontalCenter: parent.horizontalCenter
            source: icon
        }
        Text {
            anchors { top: myIcon.bottom; horizontalCenter: parent.horizontalCenter }
            text: name
        }
    }
}

Component {
    id: appHighlight
    Rectangle { width: 80; height: 80; color: "lightsteelblue" }
}
Text
{
    id:txt
    width: parent.width
    height: 100
    text: "8791561651"
}
GridView {
    anchors.top:txt.bottom
    height: 200
    width: parent.width
    cellWidth: 100; cellHeight: 100
    highlight: appHighlight
    focus: true
    model: appModel
    delegate: appDelegate
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:58:09.723

您可以尝试多种方法，具体取决于您想要实现的目标：

1.  将Gridview 的**clip属性设置为 true。**这将防止视图位于其他元素之上。
2.  将 Text 元素放在 GridView 元素之后。这将确保文本位于 Gridview 的顶部。如果您不设置剪辑，则 gridview 项目将位于文本项目下方。

# ruby-on-rails - 将 geoNear 与 Rails / Mongoid 一起使用

> ID：13289679
> 
> 赞同：1
> 
> 时间：2012-11-08T13:21:13.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, geospatial

我在使用 MongoDB/Rails 查询地理空间索引时遇到问题。我正在使用这个宝石 - [https://github.com/kristianmandrup/mongoid_geospatial](https://github.com/kristianmandrup/mongoid_geospatial)

这是我相当基本的模型：

```
class Company
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Geospatial

  field :name, type: String

  field :location, type: Array, spatial: true

  spatial_index :location

  validates :location, location: true
end 
```

然后，在我的控制器中，我有这个

```
 #@vendors = Vendor.where(:location.near => {:point => [-2.1294761000000335,57.0507625], :max => 5}) 
```

但是，这并没有返回预期的结果（即，它从各地返回东西，而不仅仅是在那个特定的经度/纬度附近）

另外，我将如何进行geoNear？
这样我就可以取回每个结果与中心点的距离？

**注意** 写完这个问题后，我看到gem已经更新了，但我不确定是否有更好的选择..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T01:24:46.830

您不需要`mongoid_geospatial`gem 进行`geoNear`查询：`mongoid`已经支持它（至少在版本 3 中）。

将您的模型更改为：

```
class Company
  include Mongoid::Document
  include Mongoid::Timestamps

  field :name, type: String

  field :location, type: Array

  index({location: "2d"})

  validates :location, location: true
end 
```

并将您的查询运行为：

```
@vendors = Vendor.geo_near([-2.1294761000000335,57.0507625]).max_distance(5) 
```

# php - Magento - 信用卡付款不发送订单电子邮件

> ID：13289680
> 
> 赞同：1
> 
> 时间：2012-11-08T13:21:13.750
> 
> 标签：php, magento

我安装了一个带有信用卡订单模块 (Atos) 的 Magento。所有订单确认电子邮件都在发送，除了信用卡号码的订单。

我是 Magento 的新手，只知道有关邮件和 Magento 的交易电子邮件模板。我应该在哪里解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:00:14.687

您应该弄清楚哪一位控制者负责处理 CC 付款。然后找出正确的付款方式，如果有以下方法调用：

```
if (!$order->getEmailSent()) {
                    $order->sendNewOrderEmail();
                } 
```

# windows - 从远程位置复制文件的命令行

> ID：13289687
> 
> 赞同：2
> 
> 时间：2012-11-08T13:21:37.150
> 
> 标签：windows, batch-file

我想编写一个脚本，将一些文件从局域网计算机复制到我的电脑。我不知道这个命令的语法是什么。

有人可以帮我解决这个问题吗？

还有一件事，就我而言，两台机器都使用 Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:25:15.120

1.  `net.exe use`将远程共享映射到临时驱动器号
2.  `copy`或者`robocopy`或者`xcopy`或者 复制文件
3.  `net.exe use`删除使用的映射并释放字母

请注意，Windows (95/98/ME) 和 WindowsNT (NT3 / NT$ / 2000 / XP / Vista / 7) 是完全不同的操作系统，并且具有不同的 DOS 命令和选项，尤其是在复制方面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:23:29.257

```
xcopy /z \\myServer\myFolder c:\ 
```

> /Z 以可重新启动模式复制网络文件。

其中 \myServer\myFolder 是 unc 路径，或者如果您有网络驱动器（例如`o:`），请使用：

```
xcopy /z o: c:\ 
```

# php - PHP Simple HTML DOM - 仅顶级元素

> ID：13289691
> 
> 赞同：0
> 
> 时间：2012-11-08T13:21:49.223
> 
> 标签：php, dom, xpath, domdocument

我在这里搜索了一些其他线程，但没有找到完美的解决方案

如果我有以下布局

```
 <html>
<div>   <---- This one
      <div> text </div>
      <div> text </div>
</div> 
<p> text </p>
 <div>  <---- This one
      <div> text </div>
      <div> text </div>
</div>  
<p> text </p>
</html> 
```

我将如何只获得顶层的 div。（注意：里面的两个 div 只是一个例子，可能只有一个，也可能是 5 个或 6 个。

注意：与此相关的其余代码使用的是 Simple html dom，我需要它来处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:29:25.877

一种可能性是使用[XPath](http://php.net/manual/en/class.domxpath.php)。它将如下所示：

```
<?php
$doc = new DOMDocument();
// one of the few cases where you may use error suppression
@$doc->loadHTML($yourHtml);

$xPath = new XPath($doc);
$nodes = $xPath->query('//html/div'); 
```

*免责声明：我没有测试过这个，但它至少应该让你接近*

# c# - 从 LINQ 集合中删除项目

> ID：13289692
> 
> 赞同：4
> 
> 时间：2012-11-08T13:21:50.713
> 
> 标签：c#, asp.net, .net, visual-studio-2010, linq

我想我的问题是正确的:)

我正在使用 LINQ 查询数据库以检索一些数据。请在下面找到代码。

```
var leadtasktype = _context.LeadTypeTaskTypes.Where(l => l.LeadTypeId == item.Value);

foreach(LeadTypeTaskType l in leadtasktype){
    if (l.TaskTypeId == 21)
    {
        //I need to remove an item which has the tasktype id 21
    }
} 
```

正如我在评论中提到的，我需要根据我的`if`情况从leadtasktype 中删除项目。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:23:59.737

这看起来很像另一个过滤条件：

```
var leadtasktype = _context.LeadTypeTaskTypes
    .Where(l => l.LeadTypeId == item.Value)
    .Where(l => l.TaskTypeId != 21); // Exclude ID = 21. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:24:42.090

只需将它们排除在您的设置之外：

```
var leadtasktype = _context.LeadTypeTaskTypes
    .Where(l => 
        l.leadTypeId != 21 && 
        l.LeadTypeId == item.Value
    ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T13:24:47.160

```
var leadtasktype = _context.LeadTypeTaskTypes.Where(l => l.LeadTypeId == item.Value && l.LeadTypeId != 21); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T13:25:39.400

```
var leadtasktype = _context.LeadTypeTaskTypes
    .Where(l => l.LeadTypeId == item.Value 
                && l.TaskTypeId != 21); // Exclude ID = 21. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T13:34:04.387

这是你想要的吗？

```
var leadtasktype = _context.LeadTypeTaskTypes.RemoveAll
   (l => l.LeadTypeId == item.Value && l.LeadTypeId == 21); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T13:23:22.887

```
var leadtasktype = _context.LeadTypeTaskTypes.Where(l => l.LeadTypeId == item.Value);

var newData = leadtasktype;

                foreach(LeadTypeTaskType l in leadtasktype){
                    if (l.TaskTypeId == 21)
                    {
                        newData.Remove(l);
                    }
                } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-08T13:25:00.050

```
var leadtasktype = _context.LeadTypeTaskTypes.Where(l => l.LeadTypeId == item.Value);

for (var i = 0; i < leadtasktype.Count; i++)
{
  if (leadtasktype[i].TaskTypeId == 21)
  {
    leadtasktype.RemoveAt(i);
  }
} 
```

# google-app-engine - 谷歌应用引擎本地服务器不在 chrome/firefox 上运行

> ID：13289696
> 
> 赞同：0
> 
> 时间：2012-11-08T13:22:13.030
> 
> 标签：google-app-engine, google-chrome

当我在 google app engine 中创建应用程序并在 safari 中打开应用程序（http:localhost:8080）时，它工作正常。但是当我在 chrome 或 fire fox 中打开时，它不会运行（http:localhost:8080）并给出以下页面。

```
<HTML><HEAD><TITLE>Error Message</TITLE>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<STYLE id=L_10061_1>A {
    FONT-WEIGHT: bold; FONT-SIZE: 10pt; COLOR: #005a80; FONT-FAMILY: tahoma
}
A:hover {
    FONT-WEIGHT: bold; FONT-SIZE: 10pt; COLOR: #0d3372; FONT-FAMILY: tahoma
}
TD {
    FONT-SIZE: 8pt; FONT-FAMILY: tahoma
}
TD.titleBorder {
    BORDER-RIGHT: #955319 1px solid; BORDER-TOP: #955319 1px solid; PADDING-LEFT: 8px; FONT-WEIGHT: bold; FONT-SIZE: 12pt; VERTICAL-ALIGN: middle; BORDER-LEFT: #955319 0px solid; COLOR: #955319; BORDER-BOTTOM: #955319 1px solid; FONT-FAMILY: tahoma; HEIGHT: 35px; BACKGROUND-COLOR: #d2b87a; TEXT-ALIGN: left
}
TD.titleBorderx {
    BORDER-RIGHT: #955319 0px solid; BORDER-TOP: #955319 1px solid; PADDING-LEFT: 8px; FONT-WEIGHT: bold; FONT-SIZE: 12pt; VERTICAL-ALIGN: middle; BORDER-LEFT: #955319 1px solid; COLOR: #978c79; BORDER-BOTTOM: #955319 1px solid; FONT-FAMILY: tahoma; HEIGHT: 35px; BACKGROUND-COLOR: #d2b87a; TEXT-ALIGN: left
}
.TitleDescription {
    FONT-WEIGHT: bold; FONT-SIZE: 12pt; COLOR: black; FONT-FAMILY: tahoma
}
SPAN.explain {
    FONT-WEIGHT: normal; FONT-SIZE: 10pt; COLOR: #934225
}
SPAN.TryThings {
    FONT-WEIGHT: normal; FONT-SIZE: 10pt; COLOR: #934225
}
.TryList {
    MARGIN-TOP: 5px; FONT-WEIGHT: normal; FONT-SIZE: 8pt; COLOR: black; FONT-FAMILY: tahoma
}
.X {
    BORDER-RIGHT: #955319 1px solid; BORDER-TOP: #955319 1px solid; FONT-WEIGHT: normal; FONT-SIZE: 12pt; BORDER-LEFT: #955319 1px solid; COLOR: #7b3807; BORDER-BOTTOM: #955319 1px solid; FONT-FAMILY: verdana; BACKGROUND-COLOR: #d1c2b4
}
.adminList {
    MARGIN-TOP: 2px
}
</STYLE>
<META content="MSHTML 6.00.2800.1170" name=GENERATOR></HEAD>
<BODY bgColor=#f3f3ed>
<TABLE cellSpacing=0 cellPadding=0 width="100%">
  <TBODY>
  <TR>
    <TD class=titleBorderx width=30>
      <TABLE height=25 cellSpacing=2 cellPadding=0 width=25 bgColor=black>
        <TBODY>
        <TR>
          <TD id=L_10061_x class=x valign=middle align=center>X</TD>
        </TR>
        </TBODY>
      </TABLE>
    </TD>
    <TD class=titleBorder id=L_10061_2>Network Access Message:<SPAN class=TitleDescription> The page cannot be displayed</SPAN> </TD>
  </TR>
  </TBODY>
</TABLE>

<TABLE id=spacer>
  <TBODY>
  <TR>
    <TD height=10></TD></TR></TBODY></TABLE>
<TABLE width=400>
  <TBODY>
  <TR>
    <TD noWrap width=25></TD>
    <TD width=400><SPAN class=explain><ID id=L_10061_3><B>Explanation:</B></ID></SPAN><ID id=L_10061_4> The Web server refused the connection. </ID><BR><BR>
    <B><SPAN class=tryThings><ID id=L_10061_5><B>Try the following:</B></ID></SPAN></B> 
      <UL class=TryList>
        <LI id=L_10061_6><B>Refresh page:</B> Search for the page again by clicking the Refresh button. The timeout could have occurred due to Internet congestion.
<LI id=L_10061_7><B>Check spelling:</B> Check that the Web page address is spelled correctly. The address may have been mistyped.
<LI id=L_10061_8><B>Access from a link:</B> If there is a link to the page you are looking for, try accessing the page from that link.
<LI id=L_10061_9><B>Contact website:</B> You may want to contact the website administrator to make sure the Web page still exists. You can do this by using the e-mail address or phone number listed on the website home page.

      </UL>
<ID id=L_10061_10>If you are still not able to view the requested page, try contacting your administrator or Helpdesk.</ID> <BR><BR>
    </TD>
  </TR>
  </TBODY>
</TABLE>

<TABLE id=spacer><TBODY><TR><TD height=15></TD></TR></TBODY></TABLE>

<TABLE width=400>
  <TBODY>
  <TR>
    <TD noWrap width=25></TD>
    <TD width=400 id=L_10061_11><B>Technical Information (for support personnel)</B> 
      <UL class=adminList>
        <LI id=L_10061_12>Error Code 10061: Connection refused
<LI id=L_10061_13>Background: The server you are attempting to access has refused the connection with the gateway. This usually results from trying to connect to a service that is inactive on the server.
<LI id=L_10061_14>Date: 11/8/2012 1:19:34 PM [GMT]
<LI id=L_10061_15>Server: NBS-TMGPTCL.Cdocs.local
<LI id=L_10061_16>Source: Remote server

      </UL>
    </TD>
  </TR>
  </TBODY>
</TABLE>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:16:23.867

它说您正在尝试连接到：

```
NBS-TMGPTCL.Cdocs.local 
```

并不是

```
http:localhost:8080 
```

在任何情况下，使用

```
http//:localhost:8080 
```

# android - Android oAuth 在 Android 2.2 上运行。但不适用于 Android 4.0。

> ID：13289697
> 
> 赞同：2
> 
> 时间：2012-11-08T13:22:17.230
> 
> 标签：android, oauth

我正在使用 oAuth 来执行一些身份验证。

我尝试为此使用给定的 API，但我完全不明白发生了什么。

在使用 Android 2.2 的 Android 设备上。我在 webview 中输入用户名和密码，接收令牌，然后执行登录。

相同的代码，Android 4.0 上的相同调用返回“null”，我无法登录服务。

我记录了我需要的所有详细信息，并且应该获取令牌的方法返回 null。不知道在哪里记录，记录什么，检查什么。

```
11-08 14:16:19.576: W/Globals.Hyves.CONSUMER_KEY(946): 
11-08 14:16:19.576: W/Globals.Hyves.CONSUMER_SECRET(946): 
11-08 14:16:19.576: W/Globals.Hyves.REQTOKEN_LINK(946): http://data.hyves-api.nl/?strict_oauth_spec_response=true&methods=users.get,friends.get,wwws.create&ha_method=auth.requesttoken&ha_version=2.1
11-08 14:16:19.576: W/Globals.Hyves.REQACCESSTOKEN_LINK(946): http://data.hyves-api.nl/?strict_oauth_spec_response=true&ha_method=auth.accesstoken&ha_version=2.1
11-08 14:16:19.576: W/Globals.Hyves.AUTHORIZATION_LINK(946): http://www.hyves.nl/api/authorize/
11-08 14:16:19.681: W/Consumer(946): oauth.signpost.commonshttp.CommonsHttpOAuthConsumer@416263a0
11-08 14:16:19.710: W/Provider(946): oauth.signpost.commonshttp.CommonsHttpOAuthProvider@41624ad0
11-08 14:16:19.710: W/Globals.Hyves.REDIRECT_URI(946): connect://success
11-08 14:16:20.186: W/System.err(946): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: null
11-08 14:16:20.206: W/System.err(946):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214) 
```

有谁知道某些默认页面编码之间是否存在差异，或者是否存在显着差异并且可能导致这在一个 android 上有效而在另一个 android 上无效。

这是我调用的行：

```
String authUrl = SignpostHandler.retrieveRequestTokenWithSignpost(provider, consumer, Globals.Hyves.REDIRECT_URI); 
```

正如您在日志中看到的那样，我确实有提供者和消费者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:31:52.107

我认为您在没有 AsyncTask 的情况下执行 http get/post 请求。

我认为，这是 StrictMode 问题。[这里有关 StrictMode 的信息](http://developer.android.com/reference/android/os/StrictMode.html)

在 AsyncTask 中试试这个。[这里有关 AsyncTask 的信息](http://www.vogella.com/articles/AndroidPerformance/article.html)

# facebook - 使用facebook c# sdk在用户的时间轴相册上上传图片

> ID：13289702
> 
> 赞同：0
> 
> 时间：2012-11-08T13:22:41.467
> 
> 标签：facebook, facebook-c#-sdk

我想将图片上传到用户或页面的时间线。我可以将图片上传到用户墙，但它已经用我的应用程序名称创建了新相册。但我想将图片上传到用户的时间线相册。

我已使用以下代码上传图片

```
 var result = client.Post("/"+ id +"/photos", postparameters); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:05:36.567

您可以动态获取专辑 ID：

> 动态相册 = app.Get("我/相册");
> 
> 字符串专辑 ID="";
> 
> foreach（albums.data 中的动态专辑信息）
> 
> {
> 
> ```
>  if(albumInfo.name == "Timeline Photos"){AlbumId=albumInfo.id; break;} 
> ```
> 
> }

并且您可以使用 AlbumId 在相册中发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:34:51.733

我解决了它。我只是过滤了我想发布图片的专辑的 ID，如果上面的代码为“id”，则将其传递到位。

```
 var result = client.Post("/"+ album_id +"/photos", postparameters); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T14:24:36.203

**msm2020**解决方案可以解决问题，但不要忘记添加相册权限：[user_photos](https://developers.facebook.com/docs/graph-api/reference/v2.1/album/)

# jquery - jQuery 动态文件 flashvar

> ID：13289703
> 
> 赞同：0
> 
> 时间：2012-11-08T13:22:45.357
> 
> 标签：jquery, flashvars

使用以下代码

```
var $altContent = $elem.children('img').attr('alt');

$('.fp_preview').prepend("<div id='video-flv'>  <object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab' width='720' height='480' id='flv'> <param name='movie' value='WNFlvPlayer.swf' /> <param name='allowfullscreen' value='true' /> <param name='flashvars' value='file='"+
$altContent+
"&autostart=true' /> <embed src='WNFlvPlayer.swf' flashvars='file='"+$altContent+"&autostart=true' allowfullscreen='true' width='720' height='480' name='flv' type='application/x-shockwave-flash' pluginspage='http://www.adobe.com/go/getflashplayer' /> </object> </div>").fadeIn(2000); 
```

我得到：

```
<param 04.flv&autostart="true'" animations="" arch="" renders="" 
value="file=" name="flashvars"> 
```

我认为是关于**嵌套引号**的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:35:30.823

试试这个

```
var $altContent = $elem.children('img').attr('alt');
alert($altContent);
$('.fp_preview').prepend(
'<div id="video-flv">'+
'  <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="720" height="480" id="flv">'+
'    <param name="movie" value="WNFlvPlayer.swf" />'+
'    <param name="allowfullscreen" value="true" />'+
'    <param name="flashvars" value="file='+$altContent+'&autostart=true" />'+
'    <embed src="WNFlvPlayer.swf" flashvars="file='+$altContent+'&autostart=true" allowfullscreen="true" width="720" height="480" name="flv" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" />'+
'  </object>'+
'</div>'    
).fadeIn(2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:39:47.023

它适用于 >

将 value='file='"+ 更改为 value='file="+ –

```
<param name='flashvars' value='file="+$altContent+"&autostart=true' /> 
```

谢谢！！

# angularjs - 如何使用带有角度 ui jquery passthrough 的指令中的步骤来获取表单向导？

> ID：13289704
> 
> 赞同：3
> 
> 时间：2012-11-08T13:22:44.747
> 
> 标签：angularjs, jquery-form-wizard, angular-ui

我已经使用表单向导尝试了 Angular 中的 jquery passthrough，效果很好。但是，现在我遇到了一个问题。当 formwizard 中的步骤在指令内时，jquery passthrough 似乎不起作用（所有步骤都显示，而不是只显示第一个步骤）：

```
<form ui-jq="formwizard" ui-options="{formPluginEnabled: false, validationEnabled: false, focusFirstInput : false,  disableUIStyles : true}" ng-submit="create(currentActivity, selectedCategories)" class="main">
                    <!--STEP 1 -->             
                    <div activity-wizard-step title="Class Activity Info" description="Add all info about the activity" src="resources/angular/templates/activity_wizard/activity_info.html" step-number="1"></div>

                    <!-- STEP 2 -->
                    <div activity-wizard-step title="Add Class(es)" description="dd Instructor-Led-Training (ILT) Classes below. It can be a classroom ILT or a Webinar ILT and contain 1 or more sessions." src="resources/angular/templates/activity_wizard/add_class.html" step-number="2"></div>

</form> 
```

这是我的 activityWizardStep 指令的样子：

```
directivesModule.directive('activityWizardStep', function () {
    return {
        replace: true,
        restrict: 'AE',
        scope: {
            title: '@',
            description: '@',
            src: '@',
            stepNumber: '@'
        },
        templateUrl: 'resources/angular/templates/activity_wizard/wizard_step.html'
    }
}); 
```

和wizard_step.html：

```
<fieldset class="step" id="step{{stepNumber}}">
    Some html
</fieldset> 
```

就像我之前说的，所有的步骤都会一直显示。我认为这是某种时间问题，例如当 jquery passthrough 尝试初始化 formwizard 时，指令或包含不在 dom 中。这是正在发生的事情吗？如果是这样，我应该使用 $timeout somehwere 吗？如果是这样，我会把它放在哪里。也许有更好的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T12:44:55.483

答案是，不要将表单向导与 angularJS 一起使用 :)。在查看了这个进一步的 ng-switch 之后，它不仅可以完成这项工作，而且还简化了很多事情。

```
<form ng-switch="navStep" class="main">
    <!--STEP 1 -->             
    <div ng-switch-when="activity_info" activity-wizard-step title="Class Activity Info" description="Add all info about the activity" src="resources/angular/templates/activity_wizard/activity_info.html" step-number="1"></div>

    <!-- STEP 2 -->
    <div ng-switch-when="add_class" activity-wizard-step title="Add Class(es)" description="dd Instructor-Led-Training (ILT) Classes below. It can be a classroom ILT or a Webinar ILT and contain 1 or more sessions." src="resources/angular/templates/activity_wizard/add_class.html" step-number="2"></div>

</form> 
```

然后在单击下一步和返回按钮时设置 navStep。

基本上，角度的真棒使得表单向导变得不必要。

# ruby-on-rails - 不兼容的字符编码：Windows-1252 和 UTF-8

> ID：13289708
> 
> 赞同：1
> 
> 时间：2012-11-08T13:22:57.413
> 
> 标签：ruby-on-rails, ruby, utf-8, windows-1252

这有点奇怪，当我运行 localhost:3000 时，它会提示我下面列出的错误

```
Encoding::CompatibilityError in Home#index

incompatible character encodings: Windows-1252 and UTF-8

17: <%= render 'layouts/header'%>
18:
19: <%= yield %>
20: <%= render 'layouts/footer' %>
21: </body>
22: </html> 
```

但如果我执行 localhost:3000/en/#actionName，它会呈现其他页面。

由于 localhost:3000 呈现 index.html.erb，仅出于测试目的，我删除了 index.html.erb 的内容；它呈现了布局。那么，index.html.erb 页面的内容有什么问题呢？对我来说一切都很好，我也从服务器（工作版本）下载了 index.html.erb 的内容，它仍然给我同样的错误。需要一些指导，我可能会出错。我尝试了此链接[Ruby on Rails 3 中提到的解决方案，不兼容的字符编码：UTF-8 和 ASCII-8BIT 与 i18n](https://stackoverflow.com/questions/4188677/ruby-on-rails-3-incompatible-character-encodings-utf-8-and-ascii-8bit-with-i18)但完全没有运气。

提前致谢。

```
 =====================  **UPDATE** ====================== 
```

为什么这样做它已在下面列出：但是另一个问题出现了，为什么添加这些源代码只会为 index.html.erb 生成此类错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:39:53.637

我已经解决了这个问题，问题是我在 (app/view/layouts/) _footer.html.erb 中添加了以下源代码

```
<p style="float:left;text-align:none;padding:0px;font-size:8px;font-stretch:6px; ">
    <select name="language" onchange="location=this.options[this.selectedIndex].value;"   autocomplete="off">
        <option value=""></option>
        <option value="/en/faq">english</option>
        <option value="/es/faq">español</option>
        <option value="/de/faq">germany</option>
        <option value="/fr/faq">french</option>
        <option value="/it/faq">italy</option>
    </select>
</p> 
```

# javascript - 单击时保存图像的 HTML5 URL 会显示以前创建的图像

> ID：13289710
> 
> 赞同：0
> 
> 时间：2012-11-08T13:23:14.527
> 
> 标签：javascript, html

我有一个 HTML5 应用程序，它将画布图像保存到服务器，然后提供指向该图像的链接，该图像在新窗口中打开。

这在我第一次保存时效果很好，但是如果我创建并保存一个新图像，然后单击链接，它会显示之前创建的旧图像。

单击*刷新*将强制它显示新的，但我想知道是否有办法确保它显示正确的图像，这样我就不必刷新页面？

下面是我用来保存图像的内容。

```
<script>
function saveImageAs (imgOrURL) {
if (typeof imgOrURL == 'object')
  imgOrURL = imgOrURL.src;
window.win = open (imgOrURL);
setTimeout('win.document.execCommand("SaveAs")', 500);
}
</script>

<script type="text/javascript">

//****************************************************************
// Save canvas content into image file.                         //
//****************************************************************
function saveViaAJAX()
{
document.getElementById('saveimage').style.visibility="hidden";
document.getElementById("debugFilenameConsole").innerHTML="Please wait while your image is been generated";

var testCanvas = document.getElementById('canvas');
var canvasData = testCanvas.toDataURL("image/jpg");
var postData = "canvasData="+canvasData;
var debugConsole= document.getElementById("debugConsole");
debugConsole.value=canvasData;

//alert("canvasData ="+canvasData );
var ajax = new XMLHttpRequest();
ajax.open("POST",'savecanvas.php',true);
ajax.setRequestHeader('Content-Type', 'canvas/upload');
//ajax.setRequestHeader('Content-TypeLength', postData.length);

ajax.onreadystatechange=function()
{
    if (ajax.readyState == 4)
    {
        //alert(ajax.responseText);
        // Write out the filename.
            document.getElementById("debugFilenameConsole").innerHTML="Saved as <a target='_blank' href='myimage.php'> MyImage.jpg"+ajax.responseText+"</a><br>Reload this page to start a new image or click on the link above to open the file.";
    }
}
ajax.send(postData);
    }
    </script> 
```

和 PHP

```
 <?php
    if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
    {
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];
    // Remove the headers (data:,) part. 
    // A real application should use them according to needs such as to check image type
    $filteredData=substr($imageData, strpos($imageData, ",")+1);
    // Need to decode before saving since the data we received is already base64 encoded
    $unencodedData=base64_decode($filteredData);
    //echo "unencodedData".$unencodedData;
    // Save file.  This example uses a hard coded filename for testing,
    // but a real application can specify filename in POST variable
    $fp = fopen( 'MyImage.jpg', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
    }
    header("Content-Type: image/jpg");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("content-disposition: attachment; filename=MyImage.jpg");
    imagejpeg($img, null, 100);
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:26:45.570

因为您为图像提供了相同的名称和路径，所以浏览器会为您缓存它。

使用独特的路径来避免这种情况！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:32:22.563

你可以试试

```
var random=new Date();
var random2=getTime();
var rand=random+random2;

imgOrURL = imgOrURL.src+'?rnd='+rand 
```

或者对于 PHP

```
$rand=rand();
MyImage.php?rand=<?=$rand?> 
```

或者

```
$image='MyImage.php?rand='.$rand.''; 
```

以备日后使用，免头痛。首先添加日期和时间，因为使用`md5`、`sha1()`或`rand()`JavaScript 唯一键可能是一场噩梦，例如：

```
/// This is much cleaner

/11.1.2012/11.05/eachier93.jpg
/11.1.2012/11.05/4358390485/93.jpg
/11.1.2012/11.10/3249203489834/234234.jpg

/// then this

/files/342748234234234/234982348394/333535.jpg
/files/4535345345/234234234234/3332.jpg
/files/23423434324/023840348234/2343.jpg 
```

# powershell - 是时候写读文件了？

> ID：13289716
> 
> 赞同：0
> 
> 时间：2012-11-08T13:23:28.753
> 
> 标签：powershell, powershell-2.0

这是一个奇怪的......无论如何使用powershell来查看写入文件需要多长时间？

所以，如果我创建一个文件 - powershell 可以告诉我创建该文件需要多长时间（即 25 毫秒或任何数字）。另外，如果我删除一个文件，它还能告诉我时间吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:29:34.113

[Measure-Command](http://technet.microsoft.com/en-us/library/ee176899.aspx)可以为您做到这一点。

例如

Measure-Command { new-item -Path test.txt -ItemType File -Force }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:28:56.547

你的意思是这样的？

```
$before = Get-Date
# do stuff
$after = Get-Date
echo ($after - $before).TotalMilliseconds 
```

# windows - 在 Unity 3d 中运行控制台命令以使用 ImageMagick 进行转换

> ID：13289718
> 
> 赞同：0
> 
> 时间：2012-11-08T13:23:36.163
> 
> 标签：windows, shell, imagemagick, cmd

伙计们！

因此，正如标题所示，我正在尝试将 PDF 转换为 .png。我正在使用软件包 ImageMagick。我想使用这个包从 Unity 3d 项目中即时将 pdf 转换为 png - 以便应用程序可以在需要时在游戏中将 PDF 显示为 .png 纹理，但仍将它们保留为较小的 PDF文件大小。我不太确定我做错了什么，在这里 - 但是当我在 Unity 中运行它时，我得到的只是一个打开的 cmd 提示符，其中没有我的命令。这里有什么明显的我遗漏的东西吗？这是代码：

```
using UnityEngine;
using System.Collections;
using System.IO;
using System.Reflection;
using System.Security.Policy;

public class CommandLineTest : MonoBehaviour {

    // Use this for initialization
    void Start () {
        string convertedDirName = "ConvertedPDFs";
        string currDir = System.Environment.CurrentDirectory;
        System.IO.Directory.CreateDirectory(currDir + @"\" + convertedDirName);

        string strCmdText;
    strCmdText= @"/c " + currDir + @"\ImageMagick\convert.exe " + currDir + @"\PDFs\Appointment.pdf " + currDir + @"\" + convertedDirName + @"\" + "Appointment.png";
        System.Diagnostics.Process.Start("CMD.exe",strCmdText);
        //ImageMagick
        print(strCmdText);
    }

} 
```

当最后的 print 语句运行时，它会打印以下字符串： c/ convert /c F:\Documents and Settings\Administrator\Desktop\ImageMagickTest\ImageMagick\convert.exe F:\Documents and Settings\Administrator\Desktop\ImageMagickTest \PDFs\Appointment.pdf F:\Documents and Settings\Administrator\Desktop\ImageMagickTest\ConvertedPDFs\Appointment.png

对你来说，有什么明显的错误吗？我应该提到 ImageMagick 的转换应用程序实际上并没有“安装”在我的系统上——我只是使用“便携式”版本并将它扔到我的项目文件夹中。所以我希望“转换”命令行仍然有效。这是否意味着我无法使用 dos 提示符访问它？如果我不能，那么如果我知道它将在我的项目文件夹中，我如何将图像传递给 imagemagick 中的“转换”程序？

编辑：有些人建议我访问 convert.exe 而不是 cmd.exe，并尝试以这种方式将图像路径提供给它。所以这是我尝试的第二种方式：

```
strCmdText= currDir + @"\PDFs\Appointment.pdf" + " " + currDir + @"\" + convertedDirName + @"\" + "Appointment.png";
        System.Diagnostics.Process.Start(currDir + @"\ImageMagick\convert.exe",strCmdText); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:31:43.670

尝试使用其他一些命令（如`dir`）来确定您在文件系统中的位置以及出了什么问题。

还要记住，如果您使用的是可移植版本并且它不在您的路径中，您将不得不从与它所在的目录相同的目录中执行它。

# login - 有没有办法检测何时显示 Facebook 权限对话框？

> ID：13289720
> 
> 赞同：0
> 
> 时间：2012-11-08T13:23:43.307
> 
> 标签：login, facebook-javascript-sdk, facebook-login

我正在使用 FB Javascript SDK，并通过调用`FB.login`. 理想情况下，我希望能够在向用户显示应用程序批准/权限对话框时记录一些跟踪数据，以便我可以看到在这个阶段有多少用户被炸毁。不幸的是，我似乎无法找到实现这一目标的可靠方法。

如果用户已经登录到FB，我可以通过在调用之前检查登录状态来推断它是否会显示`FB.login`。如果用户是`not_authorized`，那么我知道将显示权限对话框。但是如果用户没有登录，我的信息就比较有限了。我可以假设如果用户完成该过程，则会向用户*显示*对话框`not_authorized`，但如果他们最终成为，`connected`那么我无法区分已经连接的用户和刚刚批准的用户。

我希望该`auth.prompt`事件可能会有所帮助，但似乎并没有因为从`FB.login`. 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:38:12.837

> 理想情况下，我希望能够在向用户显示应用程序批准/权限对话框时记录一些跟踪数据，以便我可以看到在这个阶段有多少用户被炸毁。

查看您的应用洞察力，您会在其中看到 Auth Dialog Conversions。

无需为此进行自己的跟踪。

# css - 即字体渲染问题

> ID：13289721
> 
> 赞同：0
> 
> 时间：2012-11-08T13:23:45.107
> 
> 标签：css, cross-browser, font-face

我在一个网站上运行@font-face，它在所有浏览器firefox、chrome、safari等上都可以正常工作，但是在ie（所有版本的外观）上它都不够用。

我附上了下面发生的事情的示例图像，它在左边的Firefox中（这是在所有其他浏览器中的样子）和右边的IE

![在此处输入图像描述](../Images/4a73a6955319ee79fc75e2fe0fd4668e.png) ![在此处输入图像描述](../Images/9e5a24754df91b354949f2ac52915c31.png)

这是我用于字体的 css

```
@font-face {
font-family: 'rll';
src: url('../type/rll.eot?') format('eot');
src: url('../type/rll.eot?#iefix') format('embedded-opentype'),
 url('../type/rll.woff') format('woff'),
 url('../type/rll.ttf') format('truetype'),
 url('../type/rll.svg') format('svg');
} 
```

我犯了一个明显的错误吗？所以我知道是哪一个导致了问题，你能告诉我ie使用的是哪个字体文件吗？

# html - 可滚动 div 内的 div 不会扩展到内容宽度

> ID：13289722
> 
> 赞同：2
> 
> 时间：2012-11-08T13:23:50.563
> 
> 标签：html, css

这个问题非常简单但具有挑战性......我有一个位于可滚动 div 内的 div。两者都有一个透明的背景图像。内部 div 的内容比容器的宽度更宽，因此使其滚动没有问题，但内部 div 的宽度并没有变大，所以我们松开了背景......

[这是以下代码的小提琴](http://jsfiddle.net/xdKrF/7/)。

HTML

```
<div id="container">
<div id="content">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div>
</div>​ 
```

CSS

```
#container{
    width:500px;
    overflow-x:scroll;
    background:blue;
    padding-left:200px;
}
#content{
    white-space:nowrap;
    padding:30px;
    background:green;
}
#content div{
    display:inline-block;
    height:100px;
    width:100px;
    margin-right:15px;
    background:red;
}​ 
```

我尝试了许多解决方法来不依赖于内部 div 的宽度，但我还没有找到更好的方法来做我需要的事情。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:09:50.907

添加

```
display:inline-block; 
```

它修复它..

演示在[http://jsfiddle.net/xdKrF/11/](http://jsfiddle.net/xdKrF/11/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T14:50:59.600

尝试使用`background-size:cover`属性

# java - JavaFX 带有进度指示器的奇怪行为

> ID：13289727
> 
> 赞同：0
> 
> 时间：2012-11-08T13:24:09.920
> 
> 标签：java, javafx-2, javafx

我正在做一个登录屏幕，我想在执行用户身份验证过程时显示一个进度指示器。我正在做这样的事情。

```
// Handler for Button[fx:id="login"] onAction
public void handleLogin(ActionEvent event) {
    // Show loading indicator
    showLoadingImg();

    // User authentication
    String userName = user.getText();
    String password = psw.getText();

    OrdLogin ord = new OrdLogin();
    ord.setUserName(userName);
    ord.setPassword(password);
    ord.run();

    Authentication auth = orden.getInfoAutenticacion();
    if(auth == null){
        // Remove the loading indicator
        contProgress.getChildren().remove(1);

        // Show an error message
        msgError.setText("Incorrect password/user");
        msgError.setPrefHeight(Region.USE_COMPUTED_SIZE);
    } else {
        // login successful!
                    ...
    }
}

private void showLoadingImg() {     
    // Show loading indicator
    ProgressIndicator progress = new ProgressIndicator();
    contProgress.getChildren().add(progress);
} 
```

如果我在我的初始化方法中运行 showLoadingImg()，指示器会正确显示，但是当我在 handleLogin 中执行 showLoadingImg() 时，指示器不会显示。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:56:52.400

如果 auth 为 null，则进度指示器将从 contProgress 容器中删除。您是否通过软件进行了调试以查看是否发生这种情况？

# c++ - Visual Studio 2010 中的预构建事件失败取消构建

> ID：13289729
> 
> 赞同：0
> 
> 时间：2012-11-08T13:24:20.873
> 
> 标签：c++, visual-studio-2010, python-3.x

我有一个运行并生成版本文件的 python 脚本。我将以下内容用作我的项目的预构建事件：

```
call python version.py 
```

鉴于我安装了 python 并且可以找到该文件，这很好用。但是，对于不这样做的用户，它会引发错误并取消构建。

如果找不到 python 命令或找不到 python 文件，有没有办法让 Visual Studio 默默地忽略构建事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:30:37.137

一种选择是将对 python 的调用包装在 .bat 文件中，如果找不到 python，该文件将以 0 退出，并用调用此 .bat 文件替换预构建步骤。

这种测试的一个例子可能是：

```
python --version >nul
if errorlevel 1 exit 0 
```

# windows - Windows 8 商店

> ID：13289734
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:24:26.740
> 
> 标签：windows, windows-phone-7, windows-8, windows-runtime

我只是有一个一般性的问题，我无法找到答案。如果您在 Windows 8 商店购买应用程序（例如使用 Surface），您是否必须在 Windows 8 Phone 商店购买相同的应用程序？

此外，如果您在 Windows Phone 7 中购买商品，您是否会在 Windows 8 商店（例如，使用 Surface）或 Windows Phone 8 商店中获得相同的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:59:00.623

不幸的是，应用程序在 Windows Phone 和 Windows 8 之间是分开的。但是，在 Windows Phone 7 上购买东西会给你在 Windows Phone 8 上的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:53:53.157

是的，Windows 8 应用商店和 Windows Phone 应用商店是分开的。只有一个 Windows Phone Store - 它只是根据手机目标的版本过滤应用程序。如果您购买 WP7 应用程序，它将在 WP8 手机上提供给您。

# c# - 我可以在 DataView RowFilter 命令中间实现通配符 % 吗？

> ID：13289735
> 
> 赞同：1
> 
> 时间：2012-11-08T13:24:27.500
> 
> 标签：c#, .net, dataview

我有这个行过滤器文本：`"[Name 1] = '" + forename + "%" + surname + "'"`它失败了，但是如果我把它放在`%`开头或结尾就可以了。有什么方法可以达到相同的结果（即名称中间的“任何”字符串）？

完整的声明是：

```
dv = new DataView(MyDataTable, 
"[Name 1] = '" + forename + "%" + surname + "'", 
"", DataViewRowState.CurrentRows); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T13:28:56.890

只是一个免费的想法，请尝试：

```
dv = new DataView(MyDataTable, 
"[Name 1] = '" + forename + "%' AND [Name 1] = '%" + surname + "'", 
"", DataViewRowState.CurrentRows); 
```

编辑：一些[文件](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.100%29.aspx)：

“在模式的开头和结尾，或在模式的结尾，或在模式的开头允许使用通配符。[...] 字符串中间不允许使用通配符。例如， 'te*xt' 是不允许的。”

我的猜测是出于性能原因（？）

# android - android：如何在 ExpandableList ChildView 中放置带有 ActionBar 的视图

> ID：13289740
> 
> 赞同：1
> 
> 时间：2012-11-08T13:24:35.940
> 
> 标签：android, android-widget

我知道 ActionBar 只能在 Activity 中工作，就像它不是 View 一样（耻辱）。我的问题是：我想要一个带有 ActionBar 的视图作为 ExpandableList 的 ChildView 弹出。我想 TabbedView 会做，但可能会出现同样的障碍，最终结果是如何将 Activity 作为 ExpandableListchild 视图膨胀并采摘 Tab 小部件？有办法吗？我可以在没有 TabActivity 的情况下创建一个选项卡式视图吗？碎片有什么用？夏洛克可能知道？

# c# - ZXing.Net 将字符串编码为 CF 中的二维码

> ID：13289742
> 
> 赞同：11
> 
> 时间：2012-11-08T13:24:39.507
> 
> 标签：c#, compact-framework, zxing

[如何使用ZXing.Net](http://zxingnet.codeplex.com)将我的字符串编码为二维码？

我已经可以解码，但在编码方面有问题。它有一个错误说：*没有编码器可用于格式 AZTEC*。

这是我的代码：

```
IBarcodeWriter writer = new BarcodeWriter();
Bitmap barcodeBitmap;
var result = writer.Encode("Hello").ToBitmap();
barcodeBitmap = new Bitmap(result);
pictureBox1.Image = barcodeBitmap; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-08T19:52:53.480

您没有完全初始化 BarcodeWriter。您必须设置条形码格式。

试试下面的代码片段：

```
IBarcodeWriter writer = new BarcodeWriter { Format = BarcodeFormat.QR_CODE };
var result = writer.Write("Hello");
var barcodeBitmap = new Bitmap(result);
pictureBox1.Image = barcodeBitmap; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T14:54:16.207

@dizzytri99er

似乎我已经成功地用 ZXing.net 编码了一条消息，因此我认为它确实支持 Aztec 编码

这是我使用的代码；

```
 static void Main(string[] args)
    {
        IBarcodeWriter writer = new BarcodeWriter
            {
                Format = BarcodeFormat.AZTEC
            };
        Bitmap aztecBitmap;
        var result = writer.Write("I love you ;)");
        aztecBitmap = new Bitmap(result);

        using (var stream = new FileStream("test.bmp", FileMode.OpenOrCreate, FileAccess.ReadWrite))
        {
            var aztecAsBytes = ImageToByte(aztecBitmap);
            stream.Write(aztecAsBytes, 0, aztecAsBytes.Length);
        }
    }

    public static byte[] ImageToByte(Image img)
    {
        ImageConverter converter = new ImageConverter();
        return (byte[])converter.ConvertTo(img, typeof(byte[]));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:32:06.877

可能是您正在扫描的代码的大小吗？

看看[这里](http://code.google.com/p/zxing/issues/detail?id=1260)

生成和编码 QR 码的最佳方法是......

[二维码编码器](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)和[Zbar](http://zbar.sourceforge.net/iphone/)

# android - PackageManager.getInstallerPackageName() 可以告诉我我的应用是从亚马逊应用商店安装的吗？

> ID：13289748
> 
> 赞同：21
> 
> 时间：2012-11-08T13:24:57.707
> 
> 标签：android, amazon, google-play, android-package-managers, amazon-appstore

我计划在亚马逊应用商店和 Google Play 上发布我的应用程序，并且我的应用程序中有一些东西需要根据应用程序是否从亚马逊应用程序商店安装而略有不同。如果我正确理解了该`PackageManager.getInstallerPackageName(String packageName)`方法，它会告诉我安装我的应用程序的应用程序的名称。正确的？*如果是这样，如果我的应用程序是*从亚马逊应用商店安装的，有谁知道这种方法返回的值是多少？如果没有，是否有人知道我可以使用其他方法来确定我的应用程序是否是从亚马逊应用商店安装的？

> **注意：**我知道有关 Stack Overflow 的其他问题已经得到回答，这些问题暗示使用 `PackageManager.getInstallerPackageName(String packageName)`来确定安装我的应用程序的应用程序的名称。但是，在搜索 Stack Overflow 和其他地方时，我无法确定如果应用程序是从亚马逊应用商店安装的，则返回 的*值是多少。*`PackageManager.getInstallerPackageName(String packageName)`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-05-22T21:37:07.673

由于三星没有实现 PackageManager.getInstallerPackageName()，它仍然返回 null。所以使用 PackageManager.getInstalledPackages() 来获取所有的包并搜索 samsungapp 包名“com.sec.android.app.samsungapps”。

# 商店：

```
null - developer
com.android.vending - google play
com.amazon.venezia - amazon app
com.sec.android.app.samsungapps - samsung app store 
```

# 代码：

```
// lets start with google play store link
String link = "https://play.google.com/store/apps/details?id=com.hellothupten.capital2countryquiz";

//find out the installer for your app package name.
String installer = getPackageManager().getInstallerPackageName(
        "com.hellothupten.capital2countryquiz");

if (installer == null) {
    List<PackageInfo> installedPackages = getPackageManager()
            .getInstalledPackages(PackageManager.GET_ACTIVITIES);
    for (PackageInfo p : installedPackages) {
        if (p.packageName.contains("samsungapps")) {
            // change to samsung app store link
            link = "http://apps.samsung.com/mars/topApps/topAppsDetail.as?productId=000000840239";
            break;
        }
    }
} else if (installer.contains("amazon")) {
    // change to amazon app store link
    link = "amzn://apps/android?p=com.hellothupten.capital2countryquiz";
} else if (installer.contains("samsung")) {
    // change to samsung app store link. This does not
    // exist..but who knows samsung may implement
    // getInstallerPackageName in future, I assume it will
    // contain a word samsung in its package name.
    link = "http://apps.samsung.com/mars/topApps/topAppsDetail.as?productId=000000840239";

} 
```

使用链接变量作为商店链接。

**更新：**

```
samsungapps://ProductDetail/com.sec.chaton 
```

三星：http: [//developer.samsung.com/android/technical-docs/Samsung-Apps-Deeplink-Guide](http://developer.samsung.com/android/technical-docs/Samsung-Apps-Deeplink-Guide)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-31T17:39:57.703

好消息！[显然](https://forums.developer.amazon.com/forums/thread.jspa?messageID=3679)，亚马逊商店的最新版本终于[`PackageManager.getInstallerPackageName()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)与`"com.amazon.venezia"`Google Play 的`"com.android.vending"`.

较旧的应用程序仍会返回`null`，我还没有真正验证 API 或安装新商店然后升级旧应用程序是否会设置安装程序。但是安装一个新的应用程序并检查`/data/system/packages.xml`是否`installer`正确设置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T16:41:43.047

调用`PackageManager.getInstallerPackageName(myPackageName)`，其中`myPackageName`包的名称（您希望为其确定安装程序的应用程序）提供以下值：

*   `null`如果应用是从亚马逊应用商店安装的
*   `null`如果应用程序*直接*安装在任何应用程序商店之外。
*   `com.android.vending`如果应用是从 Google Play 安装的。

（感谢@CommonsWare 的指点。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-22T07:34:28.703

您正在尝试确定您自己的应用程序是否已从亚马逊商店安装，因此以下内容与这种情况有关。但是自从你提出这个问题后情况发生了变化，所以这个答案在发布时适用于 2016 年，而不是 2012 年。

如上所述，由大约 2013 年年中之前发布的 Amazon 安装程序版本安装的应用程序在向 getInstallerPackageName() 传递已安装应用程序的包名称时从 getInstallerPackageName() 返回 null。但在那之后，他们开始为这样的电话返回“com.amazon.venezia”。最近，Amazon Underground 应用程序可能会分配第二个安装程序包名称 com.amazon.mshop.android。

因此，如果您认为您可能会在野外遇到那些较旧版本的安装程序，这并不是一个完全可靠的指标，因为只是侧载的应用程序（从本地存储中保存的 APK 安装）通常也会从 getInstallerPackageName( ) 当为其包调用该方法时，因此与那些较旧的亚马逊商店应用程序之一安装的应用程序无法区分。

如果尽管存在此问题，您仍想使用此方法，但又希望避免对具有将安装程序标记为空的较旧安装程序版本的设备产生误报，您可以尝试以下操作：

*   测试 getInstallerPackageName() 以查看它是否为非空。

*   如果不为空，则只测试它是否以com.amazon开头，如果是则认为是从亚马逊安装的，如果不是则认为不是从亚马逊安装的。

*   但如果为 null，则通过迭代设备上的每个包进行额外测试，将遇到的每个包名称提供给 getInstallerPackageName()，查看是否有一个以“com.amazon”开头的包。

    *   如果没有具有该值的值，那么您的 null 值是不明确的，并且您应该认为您没有任何关于您的应用程序是否从亚马逊商店安装（而不是侧面加载）的信息。

    *   但是，如果甚至有一个应用程序具有该安装程序包值，那么您可以假设您的应用程序*不是*从亚马逊商店安装的，因为可以肯定的是，该设备正在运行标记已安装应用程序的亚马逊商店版本安装程序包名称以“com.amazon”开头，因为*实际上*至少有一个应用程序不是您的应用程序以这种方式标记 - 这*极*不可能以任何其他方式发生。这意味着*您的*应用程序的 null 值*不是*由亚马逊安装程序创建的，而是由其他一些安装程序创建的 - 很可能这意味着您的应用程序是从 APK 的本地副本侧加载的。

# cron - 不同时区的 Cron 作业

> ID：13289751
> 
> 赞同：17
> 
> 时间：2012-11-08T13:25:13.840
> 
> 标签：cron, controlpanel

有没有办法为特定时区设置 cronjob？

我的共享主机在美国（弗吉尼亚），我在英国。如果我将 cron 作业设置为每个星期五的 1600 小时执行，那么它将在弗吉尼亚的 1600 时执行。

我想知道我是否可以设置我的 cronjob 以使其了解选择哪个时区。我不太担心夏令时的差异。

我已经询问了我的共享主机提供商，他们说我应该能够在一些 cron ini 文件中设置时区，但我找不到任何文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T13:44:09.430

我认为你应该检查

```
/etc/default/cron 
```

或者只是输入

```
Crontab cronfile 
```

你应该找到

```
TZ=UTC 
```

这应该改变（例如 America/New_York）。第二种方式是在 cron 示例中设置的

```
5 2 3 * * TZ="America/New_York" /do/command > /dev/null 2>&1 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-17T19:23:12.627

您可以使用`CRON_TZ`环境变量，摘自`man 5 crontab`CentOS 6 服务器：

> `CRON_TZ`指定特定于 cron 表的时区。用户在指定时区的时间输入所选表时间。进入日志的时间取自本地时区，守护程序在哪里运行。

因此，如果您将其添加到`cron`条目的顶部：

```
CRON_TZ=Europe/London 
```

你应该很好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-19T14:44:03.573

如果要为特定的 cronjob 设置不同的时区，请`crontab -e`通过 ssh 执行并添加

```
TZ=Europe/Moscow 
```

在每个 cronjob 之前。

[全文在这里](http://blog.tural.us/setting-timezone-for-cronjobs/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-25T12:43:37.973

在 Ubuntu 18.08 上

```
host@machine$crontab -e 
```

然后输入

```
TZ=Asia/Kolkata 
```

**注意：-**将 Asia/Kolkata 替换为您想要的时区

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-31T22:47:07.543

要扩展 AlexT 的答案：

```
CRON_TZ="Europe/London" 
```

是答案。

ps 如果有人在这里寻找 GoDaddy 的时区修复程序，我建议将...

```
export TZ="Europe/London" 
```

...在您的 .bashrc 中，以便您的控制台在您的时区运行。

# android - 屏幕旋转后Textview不会在asyntask中更新

> ID：13289752
> 
> 赞同：0
> 
> 时间：2012-11-08T13:25:14.153
> 
> 标签：android, rotation, android-asynctask, textview

我有一个异步任务，并且正在进行更新我将文本设置为 TextView，这工作正常，但随后我旋转屏幕，textview 重置并设置“”（这是初始值），在更新后我有一个新的 findviewbyid（ r.id.tvProgreso); 它会更新文本视图，但文本将是相同的。

这是我的 onCreate 方法：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_incio);

        if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.HONEYCOMB_MR2) {
            ActionBar actionBar = getActionBar();
            actionBar.hide();

        }
        contexto = getApplicationContext();
        datos = new ArrayList<Integer>();

        recojeDatosDeSesion(savedInstanceState);
        adaptador = new AdaptadorImagenes(contexto);

        if (getLastNonConfigurationInstance() != null) {
            adaptador = (AdaptadorImagenes) getLastNonConfigurationInstance();
        }

        // Layout
        etEmail = (EditText) findViewById(R.id.etEmail);
        etPassword = (EditText) findViewById(R.id.etPassword);
        tvProgreso = (TextView) findViewById(R.id.tvProgreso);
        listaHorizontalImagenes = (Gallery) findViewById(R.id.galeria);

        listaHorizontalImagenes.setGravity(Gravity.LEFT);
        listaHorizontalImagenes.setAdapter(adaptador);
        listaHorizontalImagenes.setSelection(0);

        btnDescargar = (Button) findViewById(R.id.btnDescargar);

        clickDescargar = new OnClickListener() {

            @Override
            public void onClick(View v) {

                if (!descargaActiva) {

                    email = etEmail.getText().toString();
                    password = etPassword.getText().toString();

                    if (validaDatos(email, password)) {

                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
                        new DescargaFotos().execute();
                        descargaActiva = true;
                        Toast.makeText(contexto, "Comienza la descarga.", Toast.LENGTH_SHORT).show();
                        tvProgreso.setText("Descargando fotos..");

                    }

                } else {
                    Toast.makeText(contexto, "Descarga en proceso", Toast.LENGTH_LONG).show();
                }
            }
        };

        if (descargaActiva)
            btnDescargar.setOnClickListener(null);
        else
            btnDescargar.setOnClickListener(clickDescargar);

    } 
```

和 asyntask 中的 progressUpdate

```
@Override
        protected void onProgressUpdate(Integer... progreso) {

            // Actualizo el progreso
            progresoImagenes = progreso[0];             
            actualizaTexto(progreso[0]);
            adaptador.addItem(progreso[0]);

        }

private void actualizaTexto(Integer progreso) {

            tvProgreso = (TextView) findViewById(R.id.tvProgreso);
            tvProgreso.setText(progreso.toString() + " de " + numeroDeFotos + " fotos.");

        } 
```

当我调试时，我看到 textviex.settext 带有正确的文本，但这不会改变..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:35:20.917

默认情况下，旋转会重新创建您的活动。它实际上创建了一个新的 Activity 对象，并将其显示在屏幕上。asynctask 仍然引用不再可见的旧 Activity，并在其中更新 TextView....

您可以自己处理旋转，因此 Activity 不会被销毁，如此处[所述](https://stackoverflow.com/questions/3329318/android-how-to-not-destroy-the-activity-when-i-rotate-the-device)，或者您可以限制您的活动仅在纵向模式下可用（将 android:screenOrientation="portrait" 添加到活动标签）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:31:53.530

尝试将以下属性设置为 TextView ：

```
<TextView 
 ... 
 android:freezesText="true" /> 
```

您可以在[此处](http://developer.android.com/reference/android/widget/TextView.html#attr_android:freezesText)找到有关它的文档。也尝试阅读[这篇](https://stackoverflow.com/questions/5179686/restoring-state-of-textview-after-screen-rotation)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T11:37:15.500

我刚刚将 TexView 字段声明为**static**。这也很有意义。当它重新创建活动时，旧变量被新变量替换。在屏幕旋转的早些时候，它失去了对 textview 的引用，但由于静态表示法，只保留了一个实例并强制它使用新的实例。

在我的例子中，我在对话框片段中有一个侦听器模式，而不是 AsycTask，它返回一个更新的项目，我在容器活动中使用它来更新视图。

这样您就可以使用内置旋转处理程序，而无需将视图阻止为纵向视图。

# oracle - JBoss 数据源每 5 秒不断绑定和解除绑定

> ID：13289762
> 
> 赞同：1
> 
> 时间：2012-11-08T13:25:48.640
> 
> 标签：oracle, binding, jboss, datasource

从我的 jboss EAP 5.1 日志中，我可以看到数据源不断绑定，然后每 5 秒左右解除绑定......有人知道为什么吗？我已经为数据源和日志附加了我的 oracle-ds.xml 片段。

```
<local-tx-datasource>
<jndi-name>datasource</jndi-name>
<connection-url>jdbc:oracle:thin:@myDB:1521:SID</connection-url>
<driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
<user-name>username</user-name>
<password>userpass</password>
<exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
<min-pool-size>5</min-pool-size>
<max-pool-size>100</max-pool-size>
<set-tx-query-timeout/>
<query-timeout>300</query-timeout>
<idle-timeout-minutes>15</idle-timeout-minutes>
<metadata>
    <type-mapping>Oracle10g</type-mapping>
</metadata> 
```

2012-11-08 08:15:46,487 信息 [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 到 JNDI 名称 'java:datasource' 2012- 11-08 08:15:51,657 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 未绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 来自 JNDI 名称'java:datasource' 2012-11- 08 08:15:51,826 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 到 JNDI 名称 'java:datasource' 2012-11-08 08 :15:56,996 信息 [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 未绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 来自 JNDI 名称'java:datasource' 2012-11-08 08:15:57,174 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 到 JNDI 名称 'java:datasource' 2012-11-08 08:16:02,424 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner ) 来自 JNDI 名称 'java:datasource' 的未绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 2012-11-08 08:16:02,591 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource'到 JNDI 名称 'java:datasource' 2012-11-08 08:16:07,758 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 来自 JNDI名称'java:datasource' 2012-11-08 08:16:08,056 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 到 JNDI 名称' java:datasource' 2012-11-08 08:16:13,226 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 来自 JNDI 名称'java:数据源' 2012-11-08 08:16:13,394 信息 [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' 到 JNDI 名称 'java:datasource' 2012-11-08 08:16:18,668 INFO [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) 来自 JNDI 名称 'java:datasource' 的未绑定 ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource'

谢谢，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:39:13.840

看起来您的热部署扫描程序很“疯狂”。默认情况下，JBoss 定义热部署以每 5000 毫秒（5 秒）扫描一次更改或新部署。但是它不应该重新部署一个文件，如果它没有从上次扫描中改变，所以这种行为很奇怪，（除非有某种进程不断更改数据源文件，你能检查一下最后一次修改日期吗？文件？）

您也可以尝试[禁用 hotdeployment 扫描器](https://community.jboss.org/wiki/JBoss51DisableEnableHotDeployHDScanner)，或者增加它的 scanPeriod。扫描器在文件 deploy/hdscanner-jboss-beans.xml 中设置。所以更改 scanPeriod 属性（以毫秒为单位），或者只是从部署目录中删除此文件（注意进行备份）。请注意，如果您删除该文件，您将禁用所有文件的热部署，因此要部署新应用程序，您必须重新启动服务器或使用 bin/twiddle.sh 脚本。

另一方面，虽然这可能不是问题的原因，但数据源看起来不完整：记得关闭 xml 标签，并且 ds 文件的根标签是“数据源”：

```
<datasource>
  <local-tx-datasource>
   ...
  </local-tx-datasource>
</datasource> 
```

我希望它会有所帮助。

# windows-phone-7 - 如何将视频从应用添加到收藏？

> ID：13289763
> 
> 赞同：0
> 
> 时间：2012-11-08T13:25:52.840
> 
> 标签：windows-phone-7

我的应用程序从服务器下载视频并将其保存在独立存储中。我可以将此视频添加到手机收藏中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:57:25.693

不，这在 Windows Phone 7 中是不可能的。您可以使用 MediaLibrary，它可以让您访问与现有歌曲和图片相关的元数据，但仅此而已。您目前无法读取或写入手机上存储的视频。

# java - 所有使用 Internet 权限的应用程序

> ID：13289766
> 
> 赞同：0
> 
> 时间：2012-11-08T13:25:58.377
> 
> 标签：java, android, permissions

我有这段代码来获取所有使用 Internet 权限的应用程序，但是出了点问题，请帮助我 :)

```
public String[] getAppsWithNet() {

    int flag = 0;
    String[] appsNet = new String[50];
    PackageManager p = c.getPackageManager();
    final List<PackageInfo> apps = p.getInstalledPackages(PackageManager.GET_PERMISSIONS);
    for (PackageInfo pkg : apps) {
        for (String permission : pkg.requestedPermissions) {
            if (p.PERMISSION_GRANTED == p.checkPermission(Manifest.permission.INTERNET, pkg.packageName)) {
                appsNet[flag] = pkg.packageName;
                flag++;
            }
        }
    }
    return appsNet;
} 
```

预先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:38:41.707

[PackageInfo.requestedPermissions](http://developer.android.com/reference/android/content/pm/PackageInfo.html)返回一个字符串类型的数组而不是字符串，因此您需要将代码更改为：

```
List<PackageInfo> packages = getPackageManager().getInstalledPackages(0);
for(PackageInfo pack : packages)
{
   PackageInfo permissionInfo = null;  
    permissionInfo = getPackageManager().getPackageInfo(pack.packageName, PackageManager.GET_PERMISSIONS);
    if(permissionInfo != null){  
         String[] permissions = permissionInfo.requestedPermissions;
          //YOUR CODE HERE
      }
} 
```

# javascript - MAC上的文件浏览器 - 设置文件类型过滤器，plupload

> ID：13289767
> 
> 赞同：3
> 
> 时间：2012-11-08T13:25:58.437
> 
> 标签：javascript, macos, google-chrome, safari, plupload

我正在使用 plupload 将文件上传到服务器。问题出在 mac 上的 safari (6.0)

在plupload中有参数：

过滤器：[{title：“”，扩展：“”}]

如果我将以下字符串放在扩展名“aac，wma”中，当我浏览文件时，我将能够选择任何扩展名，如果我错过其中一个，则会发生验证错误。这很好。

但是，如果我将 mp3 或 m4a 添加到扩展名列表中，我将只能选择其中一种格式（aac 或 wma 将不可用，它将是灰色（禁用））。并且没有选项可以将文件浏览器过滤器更改为“所有文件”。Chrome（Windows）上发生了几乎相同的事情，但可以选择“所有文件”。在所有其他浏览器上都没有这样的问题。

野生动物园怎么办？

感谢帮助

编辑： 1\. 来自 Chrome 的屏幕截图。您可以看到文件过滤器设置为自定义文件（只能看到 mp4、wav 和 m4a）。我目前没有 safari(mac)，但同样的事情发生在那里，你只是没有这个过滤器选项：

![Chrom 文件浏览窗口](../Images/4c5bdb4b6376eefcd4e741152c694e70.png)

2.  我的代码截图，plupload扩展：

![添加了插件扩展](../Images/632557b6bbca95e201f3503382266092.png)

3.  检查元素时我在萤火虫中发现的东西：

![检查元素的萤火虫结果](../Images/f074b40a48981a831ca26957609eb64e.png)

# java - 如何将我的项目 javadoc 转换为 pdf？

> ID：13289768
> 
> 赞同：1
> 
> 时间：2012-11-08T13:26:01.887
> 
> 标签：java, pdf, javadoc

我已经使用 javadoc 记录了我的项目。现在我需要将其转换为一个 pdf。我已经在这里尝试过 pdfDoclet[和](http://aurigadoclet.sourceforge.net/)[Auriga](http://sourceforge.net/projects/pdfdoclet/) doclet 。我无法将其转换为 pdf，因为我无法理解 doclet 中的过程使用。是否有另一种将 javadoc 转换为 pdf 的方法？或者将我链接到使用 doclet 的更简单的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T19:48:13.497

doclet 本身只是您嵌入在 maven-javadoc-plugin 中的一个帮助库，然后您只需要获取正确的 doclet (jar) 并使用它。

例如，要从您的 javadoc 生成 pdf，您可以具有以下配置：

[1，在此处](http://pdfdoclet.sourceforge.net/)下载 doclet jar，然后继续在您的 pom 上添加以下插件配置（*您可以在构建部分或报告部分中进行*），如下所示：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.10.2</version>
            <reportSets>
                <reportSet>
                    <id>PDF</id>
                    <reports>
                        <report>javadoc</report>
                    </reports>
                    <configuration>
                        <name>PDF</name>
                        <description>This is my Documentation on PDF.</description>
                        <destDir>pdf</destDir>
                        <doclet>com.tarsec.javadoc.pdfdoclet.PDFDoclet</doclet>
                        <docletPath>${basedir}\..\..\tools\pdfdoclet-1.0.3-all.jar</docletPath>
                        <useStandardDocletOptions>false</useStandardDocletOptions>
                        <additionalparam>
                            -pdf javadoc.pdf
                        </additionalparam>
                    </configuration>
                </reportSet>
            </reportSets>
        </plugin> 
```

# c# - 将项目从紧凑的框架 .NET 转换为完整的框架 .Net

> ID：13289770
> 
> 赞同：3
> 
> 时间：2012-11-08T13:26:03.617
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, compact-framework

所以我有一个包含 120 个项目的大型 c# 解决方案。该解决方案不包含用户界面，并且经过编译以支持紧凑框架和完整框架。该解决方案采用 Visual Studio 2005 格式。

我想删除对 Windows CE 的支持并将其全部转换为针对完整框架并在 Visual Studio 2010 中打开它。

我想要做的是从整个解决方案中删除对紧凑框架的支持。

我应该如何进行？是否可以将项目转换为完整的框架？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-13T13:07:04.310

我创建了一个包含 WinForms 项目和 Device WinForms 项目的虚拟解决方案。然后我比较了两个。对我有用，因为我希望在某个时候移植到 Windows 10，现在他们已经让它在 ARM 设备上运行：D

1) 删除“ProjectTypeGuids”、“PlatformFamilyName”、“PlatformID”、“OSVersion”、“DeployDirSuffix”、“NativePlatformName”、“NoStdLib”、“NoConfig”元素。

2) 删除对“$(PlatformFamilyName)”的引用。

3) 删除任何“RequiredTargetFramework”元素。

4）如果存在，则包含以下内容的行：-

..导入项目="$(MSBuildBinPath)\Microsoft.CompactFramework.CSharp.targets"..

需要成为...

..导入项目="$(MSBuildToolsPath)\Microsoft.CSharp.targets"..

如果它不存在，则需要添加它。

5) 删除整个“ProjectExtensions”元素。

等中提琴..它转换...现在只要它会构建：/

编辑：

稍作调整，它就可以构建并运行良好。经过一个多小时的工作，我的 CF WinForms 仓储应用程序正在 Windows 10 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:29:35.127

用WS2010打开解决方案，点击各个项目文件->属性->应用选项卡，然后就可以选择目标框架了。应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:33:52.560

所以最后我不得不手动编辑解决方案中的每个 csproj 文件。我删除了与针对紧凑框架相关的信息，并将其替换为针对完整框架所需的信息。

这不是很有趣，但现在它可以工作了。

谢谢

# objective-c - 新的 NSNumber 字面量

> ID：13289772
> 
> 赞同：6
> 
> 时间：2012-11-08T13:26:07.230
> 
> 标签：objective-c, cocoa, xcode4.5, nsnumber

由于`NSNumber`您可以使用 Objective-C 中的新文字，例如：

```
NSNumber *n1 = @1000;  // [NSNumber numberWithInt:1000] 
```

但是似乎不能和枚举一起使用？我试过了：

```
typedef enum {

    MyEnumA = 0,
    MyEnumB,
    MyEnumC

} MyEnum;

NSNumber *n2 = @MyEnumA;  // [NSNumber numberWithInt:MyEnumA] 
```

但我得到一个编译器错误说：

> 程序中出现意外的“@”

我不明白为什么它不起作用，因为枚举是一个整数？有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T13:27:41.960

对于命名常量，您需要使用`@(MyEnumA)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:27:24.300

你需要使用：

```
NSNumber *n2 = @(MyEnumA); 
```

我知道这很奇怪，但事实就是如此。我无法想到我的头，但我认为解析器需要括号来区分不同的语法。

我倾向于做的是总是使用括号。这适用于普通数字以及枚举以及如下等式：

```
int a = 2;
int b = 5;
NSNumber *n = @(a*b); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:00:04.250

其他人已经解释了正确的语法是什么。*原因*如下：

`@blah`被称为“文字”语法。您可以使用它来制作包装文字的对象，例如 char、BOOL、int 等，这意味着：

*   `@42`是一个装箱的 int
*   `@'c'`是一个盒装字符
*   `@"foo"`是一个盒装字符*
*   `@42ull`是一个盒装的 unsigned long long
*   `@YES`是一个盒装的 BOOL

at 符号后面的所有内容都是原始值。`MyEnumValue`不是文字。这是一个象征。为了适应这一点，引入了通用装箱语法：

```
@(MyEnumValue) 
```

你可以在括号内放一堆东西；在大多数情况下，任何类型的变量或表达式都应该起作用。

# sql - xml选择查询xpath很慢

> ID：13289773
> 
> 赞同：1
> 
> 时间：2012-11-08T13:26:08.167
> 
> 标签：sql, sql-server, xml, tsql, sqlxml

我的 XML 结构：

```
<Items>
  <Item>
    <guid>FC550573-7171-997F-752D-8D65590CBFD6</guid>
    <Objects>
       <Object>
         <type>0</type>
         <guid>E10D9DA9-2C8D-8024-2F07-DF21395811BF</guid>
       </Object>
       <Object>
         <type>0</type>
         <guid>D8338400-35C7-781E-A039-C0FDDF80714A</guid>
       </Object>
    </Objects>
  </Item>
</Items> 
```

填写对象表时：

```
CREATE TABLE [dbo].[Objects](
    [item_guid] [varchar](36) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [type] [int] NOT NULL,
    [guid] [varchar](36) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
) ON [PRIMARY] 
```

使用查询：

```
INSERT INTO [dbname].[dbo].[Objects]
           ([item_guid]
           ,[type]
           ,[guid])
SELECT
 X.source.query('../../guid').value('.','VARCHAR(36)') as item_guid,
 X.source.query('type').value('.','INT') as type,
 X.source.query('guid').value('.','VARCHAR(36)') as guid
FROM(
Select xmldata from XmlFiles where fullpath=@fp
) AS T(x)
CROSS APPLY x.nodes('Items/Item/Objects/Object') As X(source) 
```

此行使查询非常慢：

```
X.source.query('../../guid').value('.','VARCHAR(36)') as item_guid 
```

这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T14:37:10.643

使用`/text()`来获取值对无类型 XML 的性能有好处。使用父轴也可能不好`../..` （正如@marc_s 建议的那样）。

这是一个带有额外交叉应用并`/text()`获取值的版本。

尝试这个：

```
select T2.N.value('(guid/text())[1]', 'uniqueidentifier') as item_guid,
       T3.N.value('(type/text())[1]', 'int') as type,
       T3.N.value('(guid/text())[1]', 'uniqueidentifier') as guid
from (SELECT xmldata FROM dbo.XmlFiles WHERE fullpath = @fp) as T1(N)
  cross apply T1.N.nodes('Items/Item') as T2(N)
  cross apply T2.N.nodes('Objects/Object') as T3(N) 
```

您必须判断哪个查询对您来说最快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-29T16:37:39.130

我只想补充一点，以防其他人遇到这种情况，添加以下选项会产生巨大的影响。

```
OPTION (OPTIMIZE FOR (@testXml = NULL)) 
```

如果您想自己测试，这里有一个我正在运行的简短测试脚本。只需查看这些之间的估计子树成本。

```
declare @testXml xml set @testXml = '<filters><filter name="test name" type="GREATERTHAN">1</filter><filter name="CLAIMID" type="GREATERTHAN">1</filter></filters>'

select x.value('@name','nvarchar(100) ') filtername, 
x.value('.','nvarchar(200)')filtervalue, 
x.value('@type','nvarchar(50) ') filtertype 
from @testXml.nodes('/filters/filter') as ref(x)
--vs...
select x.value('@name','nvarchar(100) ') filtername,  
x.value('.','nvarchar(200)')filtervalue,  
x.value('@type','nvarchar(50) ') filtertype 
from @testXml.nodes('/filters/filter') as ref(x) 
OPTION (OPTIMIZE FOR (@testXml = NULL)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:13:51.993

尝试这个，

我们将创建一个**临时表变量**来存储这个 xml 值并插入到相应的表**对象中**

```
//..Xml value to temp variable
Declare @x xml ='<Items><Item><guid>FC550573-7171-997F-752D-8D65590CBFD6</guid><Objects><Object>
                 <type>0</type><guid>E10D9DA9-2C8D-8024-2F07-DF21395811BF</guid></Object><Object>
                 <type>0</type><guid>D8338400-35C7-781E-A039-C0FDDF80714A</guid></Object></Objects>
                 </Item></Items>';

Declare @Temp_Tbl table (RowId int identity, item_guid nvarchar(36), [type] int, [guid] nvarchar(36));

Insert into @Temp_Tbl SELECT @x.value('(/Items/Item/guid)[1]', 'nvarchar(36)'),
   Cont.value('(type)[1]', 'int'),  Cont.value('(guid)[1]', 'nvarchar(36)')                                                                                     
   FROM @x.nodes('/Items/Item/Objects/Object') AS Obj(Cont);

INSERT INTO [dbo].[Objects] Select item_guid,[type],[guid] from @Temp_Tbl; 
```

# python - 如何使用 python 脚本发送键盘命令（按住、释放、同时）？

> ID：13289777
> 
> 赞同：4
> 
> 时间：2012-11-08T13:26:20.573
> 
> 标签：python, keyboard-events, sendkeys, virtual-keyboard

我想几乎发送这样的命令：

```
when keypress=="a"                   #if entered key is "a"
    send {ALT+TAB}                   # send ALT and TAB simultaneously
    sleep(2)                         #wait for 2 sec
    send {"I love my Country",0.1}   #send all strings at 0.1 sec wait
    key_down("BACKSPACE",1)          #hold down backspace key for 1 sec
    send{ALT+F4}                     #send ALT and F4 simultaneously 
```

对于所有或特定应用程序，opengl 游戏也是如此。

我试过 SendKeys.py 但没有同时输入功能，也没有 key_down 方法来发送按住键的命令。所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T13:38:37.040

我知道如何使用 ctypes 来做到这一点。例如对于 Alt-Tab（我知道这是很多样板代码）：

```
import ctypes
import time

SendInput = ctypes.windll.user32.SendInput

PUL = ctypes.POINTER(ctypes.c_ulong)
class KeyBdInput(ctypes.Structure):
    _fields_ = [("wVk", ctypes.c_ushort),
                ("wScan", ctypes.c_ushort),
                ("dwFlags", ctypes.c_ulong),
                ("time", ctypes.c_ulong),
                ("dwExtraInfo", PUL)]

class HardwareInput(ctypes.Structure):
    _fields_ = [("uMsg", ctypes.c_ulong),
                ("wParamL", ctypes.c_short),
                ("wParamH", ctypes.c_ushort)]

class MouseInput(ctypes.Structure):
    _fields_ = [("dx", ctypes.c_long),
                ("dy", ctypes.c_long),
                ("mouseData", ctypes.c_ulong),
                ("dwFlags", ctypes.c_ulong),
                ("time",ctypes.c_ulong),
                ("dwExtraInfo", PUL)]

class Input_I(ctypes.Union):
    _fields_ = [("ki", KeyBdInput),
                 ("mi", MouseInput),
                 ("hi", HardwareInput)]

class Input(ctypes.Structure):
    _fields_ = [("type", ctypes.c_ulong),
                ("ii", Input_I)]

def PressKey(hexKeyCode):

    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput( hexKeyCode, 0x48, 0, 0, ctypes.pointer(extra) )
    x = Input( ctypes.c_ulong(1), ii_ )
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))

def ReleaseKey(hexKeyCode):

    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput( hexKeyCode, 0x48, 0x0002, 0, ctypes.pointer(extra) )
    x = Input( ctypes.c_ulong(1), ii_ )
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))

def PressAltTab():

    PressKey(0x012) #Alt
    PressKey(0x09) #Tab

    time.sleep(2) #optional : if you want to see the atl-tab overlay

    ReleaseKey(0x09) #~Tab
    ReleaseKey(0x012) #~Alt

if __name__ =="__main__":

     PressAltTab() 
```

现代版本将使用 Unicode ：

KEYEVENTF_UNICODE = 0x0004 KEYEVENTF_KEYUP = 0x0002

```
def PressKey(KeyUnicode):

    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput( 0, KeyUnicode, KEYEVENTF_UNICODE, 0, ctypes.pointer(extra) )
    x = Input( ctypes.c_ulong(1), ii_ )
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))

def ReleaseKey(KeyUnicode):

    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput( 0, KeyUnicode, KEYEVENTF_UNICODE|KEYEVENTF_KEYUP, 0, ctypes.pointer(extra) )
    x = Input( ctypes.c_ulong(1), ii_ )
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))

def PressAltTab():

    PressKey(unichr(0x12)) #Alt
    PressKey(unichr(0x09)) #Tab

    time.sleep(2) #optional : if you want to see the atl-tab overlay

    ReleaseKey(unichr(0x09)) #~Tab
    ReleaseKey(unichr(0x12)) #~Alt

if __name__ =="__main__":

     PressAltTab() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-11T12:00:33.657

为楼上的回答做一些补充。

# 接下来是虚拟键码。

```
class VK:
    ms_l = mouse_left = vk_lbutton = VK_LBUTTON = 1
    ms_r = mouse_right = vk_rbutton = VK_RBUTTON = 2
    cancel = VK_CANCEL = 3
    ms_m = mouse_middle = vk_mbutton = VK_MBUTTON = 4

    vk_xbutton1 = VK_XBUTTON1 = 5
    vk_xbutton2 = VK_XBUTTON2 = 6

    backspace = 8
    tab = 9
    clear = 12
    # enter = 13
    # shift = 16
    # ctrl = 17
    # alt = 18
    pause = 19
    caps_lock = 20
    esc = 27
    spacebar = 32
    page_up = 33
    page_down = 34
    end = 35
    home = 36
    left_arrow = 37
    up_arrow = 38
    right_arrow = 39
    down_arrow = 40
    select = 41
    print = 42
    execute = 43
    print_screen = 44
    insert = 45
    delete = 46
    help = 47
    num_0 = 48      # keyboard virtual key code
    num_1 = 49
    num_2 = 50
    num_3 = 51
    num_4 = 52
    num_5 = 53
    num_6 = 54
    num_7 = 55
    num_8 = 56
    num_9 = 57
    a = 65
    b = 66
    c = 67
    d = 68
    e = 69
    f = 70
    g = 71
    h = 72
    i = 73
    j = 74
    k = 75
    l = 76
    m = 77
    n = 78
    o = 79
    p = 80
    q = 81
    r = 82
    s = 83
    t = 84
    u = 85
    v = 86
    w = 87
    x = 88
    y = 89
    z = 90
    numpad_0 = 96       # keypad virtual key code
    numpad_1 = 97
    numpad_2 = 98
    numpad_3 = 99
    numpad_4 = 100
    numpad_5 = 101
    numpad_6 = 102
    numpad_7 = 103
    numpad_8 = 104
    numpad_9 = 105
    multiply_key = 106
    add_key = 107
    separator_key = 108
    subtract_key = 109
    decimal_key = 110
    divide_key = 111
    F1 = 112
    F2 = 113
    F3 = 114
    F4 = 115
    F5 = 116
    F6 = 117
    F7 = 118
    F8 = 119
    F9 = 120
    F10 = 121
    F11 = 122
    F12 = 123
    F13 = 124
    F14 = 125
    F15 = 126
    F16 = 127
    F17 = 128
    F18 = 129
    F19 = 130
    F20 = 131
    F21 = 132
    F22 = 133
    F23 = 134
    F24 = 135
    num_lock = 144
    scroll_lock = 145
    left_shift = 160
    right_shift = 161
    left_control = 162
    right_control = 163
    left_menu = 164
    right_menu = 165
    browser_back = 166
    browser_forward = 167
    browser_refresh = 168
    browser_stop = 169
    browser_search = 170
    browser_favorites = 171
    browser_start_and_home = 172
    volume_mute = 173
    volume_Down = 174
    volume_up = 175
    next_track = 176
    previous_track = 177
    stop_media = 178
    play = 179
    pause_media = 179
    start_mail = 180
    select_media = 181
    start_application_1 = 182
    start_application_2 = 183
    attn_key = 246
    crsel_key = 247
    exsel_key = 248
    play_key = 250
    zoom_key = 251
    clear_key = 254

    symbol = {'+': 0xBB,
               ',': 0xBC,
               '-': 0xBD,
               '.': 0xBE,
               '/': 0xBF,
               '`': 0xC0,
               ';': 0xBA,
               '[': 0xDB,
               '\\': 0xDC,
               ']': 0xDD,
               "'": 0xDE,
               '\`': 0xC0}

    Constant = 8000 # signal
    Time = 0.5

    # hot key
    shift = 16
    ctrl = 17
    alt = 18

    f1 = 112
    f2 = 113
    f3 = 114
    f4 = 116
    f5 = 117

    enter = 13
    space = 32
    back = 8

    # keypad
    n0, n1, n2, n3, n4, n5, n6, n7, n8, n9 = 96, 97, 98, 99, 100, 101, 102, 103, 104, 105
    left, up, right, down = 37, 38, 39, 40

    def conv_ord(self, ch):     # convert data type, return: vitual_key_code
        # ch = 'q'
        if isinstance(ch, int):
            return ch
        if isinstance(ch, str):
            if ch.islower():
                ch = ch.upper()
            return ord(ch)

    1
vk = VK() 
```

# 所以你可以像这样使用它：

```
 from ctypes_key import PressKey, ReleaseKey
from my_time import vk
import time as tt

# press any ch
def down_up(ch, t = 0.5):
    ch = vk.conv_ord(ch)
    PressKey(ch)
    tt.sleep(t)
    ReleaseKey(ch)

def main():
    ch = 'a'        # KeyDown and KeyUp
    tt.sleep(1)
    down_up(ch)

    # select all
    tt.sleep(1)
    PressKey(vk.ctrl)
    PressKey(vk.a)
    tt.sleep(0.5)
    ReleaseKey(vk.a)
    ReleaseKey(vk.ctrl)

    return 1

if __name__ == '__main__':
    main() 
```

Github：[VirtualKey_with_Ctypes](https://github.com/bode135/VirtualKey_with_Ctypes)

# javascript - 无需转换即可将上传的 .PDF 或 .DOC 作为图片查看

> ID：13289780
> 
> 赞同：0
> 
> 时间：2012-11-08T13:26:31.373
> 
> 标签：javascript, jquery, django

最近，我正在开发一项功能，用户可以上传 .pdf 或 .doc 等文件，然后在网页上将它们作为图片查看。我想知道有没有一种方法可以做到这一点，而无需通过服务器上的第三方软件将它们实际转换为 .jpg 或 .png ？是否可以仅我们 js、jquery 和 django 实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:32:00.753

不确定 .doc 您是否需要将其转换为 PDF。您可以使用 Mozilla 创建的来显示 PDF

[pdf.js](http://mozilla.github.com/pdf.js/)

# axis2 - 为什么 Eclipse Web 服务向导没有创建 server-config.wsdd？

> ID：13289781
> 
> 赞同：1
> 
> 时间：2012-11-08T13:26:31.810
> 
> 标签：axis2, tomcat7, eclipse-wtp, java2wsdl

我正在使用 eclipse (Juno) 为 Tomcat 7 和 Axis2 开发 Web 服务。我有一个 Java bean，我想用它来创建 Web 服务。Web 服务向导似乎运行正常，但是当服务器启动时，我收到以下错误消息：

```
2012-11-08 13:31:20,059 ERROR [localhost-startStop-1] configuration.EngineConfigurationFactoryServlet (EngineConfigurationFactoryServlet.java:162) getServerEngineConfig 
    - Unable to find config file.  
    Creating new servlet engine config file: /WEB-INF/server-config.wsdd 
```

我理解这意味着缺少**server-config.wsdd 。**如何创建此文件？为什么它不是由向导自动生成的？

**更新** 我重新创建了项目并且没有出现错误消息。我想我做错了什么。正如 Andreas Veithen 在下面所建议的那样，可能正在使用 Axis1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:38:56.720

这是 Axis 1.x 生成的错误消息。如果您正在开发 Axis2 服务，那么您不应该尝试在 Axis 1.x 上部署它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-08T13:04:43.107

在生成 java beans 或 wsdl 时，在 webservices 向导中选择 start service 选项，然后 eclipse 将为`server-confid.wsdd`您创建文件。希望这可以帮助。

# android - 在不同设备上使文本大小相同

> ID：13289782
> 
> 赞同：4
> 
> 时间：2012-11-08T13:26:33.057
> 
> 标签：android, android-layout, text-size, hdpi

我想知道如何使应用程序在不同设备上看起来相同。我已经多次阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)，但我仍然无法理解如何生活。

这是一个示例布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Hello World, MyActivity"
            android:textSize="30sp"
            />
</LinearLayout> 
```

有 Galaxy S II (480x800) 和 Sensation XE (540x960)。它们都是`hdpi`，物理屏幕大小几乎相同。我希望在两种设备上看到相同的外观，但实际上 540x960 上的文本比 480x800 上的要小：（ ![在此处输入图像描述](../Images/ab9976cf186203ff8d3e8d593059b49f.png) 左边是 480x800，右边是 540x960）

我试图将文本大小指定为维度资源并创建单独的文件夹`values-w540dp`，但没有效果。

你们如何使您的应用程序在不同`hdpi`设备上看起来相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:31:47.497

```
android:textAppearance="?android:attr/textAppearanceLarge"

android:textAppearance="?android:attr/textAppearanceMedium"

android:textAppearance="?android:attr/textAppearanceSmall" 
```

这些属性可能会解决您的问题。否则您必须使用屏幕高度和宽度以某些比率（或您生成的因子，例如：textSize=factor*height）动态设置布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:50:10.720

2 个站点可能会有所帮助，因为两者都有一些与您的问题相关的问题，但是，如何纠正您所看到的问题也不是一个确切的 1-2-3：

*   [http://www.pushing-pixels.org/2011/11/08/deep-dive-into-responsive-mobile-design-part-1.html](http://www.pushing-pixels.org/2011/11/08/deep-dive-into-responsive-mobile-design-part-1.html)
*   [http://www.alistapart.com/articles/fluidgrids/](http://www.alistapart.com/articles/fluidgrids/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:34:42.790

看看[metrics](http://developer.android.com/design/style/metrics-grids.html)，如果你在 dp （与密度无关的像素）中指定你的文本大小，它应该可以工作。文本的默认大小应为 14dp 左右。(TextAppearance.small)

# cordova - Cordova/phonegap 文件系统未在“deviceready”上准备好

> ID：13289794
> 
> 赞同：1
> 
> 时间：2012-11-08T13:26:58.983
> 
> 标签：cordova

我正在使用 Cordova 2.1.0 开发一个 ios 应用程序。

即使“deviceready”事件已触发，文件系统似乎也不可用。

```
window.onload = function (){
document.addEventListener("deviceready", getSettings(), false);
}

function getSettings(){
fileSys('settings.txt', 'getContent', null);
}

function fileSys(fileName, action, data){
    alert('hello');    // fires
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    alert('hello');    // does not fire
    //rest of the script breaks
} 
```

请求文件系统后脚本中断。但是，如果我将对 fileSys() 的调用包装在 setTimeout 中，它就可以工作。例子：

```
window.onload = function (){
document.addEventListener("deviceready", getSettings(), false);
}

function getSettings(){
    setTimeout(function(){
    fileSys('settings.txt', 'getContent', null);
}, 500);
}

function fileSys(fileName, action, data){
    alert('hello');    // fires
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    alert('hello');    // fires
    //script runs fine
} 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T07:12:28.317

deviceready 的设置应该是

```
document.addEventListener("deviceready", getSettings, false); 
```

“getSettings()”表示现在运行函数并将结果传递给 addEventListener。

“getSettings”表示将函数引用传递给 addEventListener，以便在事件触发时运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T23:39:04.270

您的 fileSys 函数是否应该以“function”开头？

```
function fileSys(fileName, action, data){} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:27:18.253

我也必须将 requestFileSystem 函数放入 setTimeout(..., 0) ，但原因不同。

我在类构造函数中运行 requestFileSystem 并使“成功”函数中的回调调用的代码工作我应该让构造函数现在已经完成。

我的构造函数只包含 requestFileSystem 函数，并且在它的“成功”函数之后以某种方式没有零 setTimeout 它完成。

（仅适用于 Android - 我在 iOS 上没有注意到这种体验）

# javascript - 使用jQuery在mouseenter上触发asp.net linkbutton的点击事件

> ID：13289795
> 
> 赞同：1
> 
> 时间：2012-11-08T13:27:07.860
> 
> 标签：javascript, jquery, asp.net, triggers, linkbutton

我正在尝试使用 jQuery 在悬停时触发单击事件。

这很简单，但似乎我无法触发使用此方法刷新更新面板内容的 asp.net 链接按钮的单击。

这是代码 - 相当标准，所以不确定它会有所作为。

```
$("a.testbutton").mouseenter( function() {
    $(this).trigger('click');
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:41:11.917

以编程方式触发点击与实际点击事件不同，请尝试以下操作。

```
$("a.testbutton").mouseenter(function() {
    window.location.href = this.href
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:30:05.640

你有没有尝试过

```
$("a.testbutton").mouseenter( function() {
    $(this).click(function(alert();)) //replace alert(); with your refresh function
}); 
```

# database - 加快 sqlFetch()

> ID：13289796
> 
> 赞同：11
> 
> 时间：2012-11-08T13:27:15.943
> 
> 标签：database, r

我正在使用 Oracle 数据库，并且喜欢获取包含 3000 万条记录的表。

```
library(RODBC)
ch <- odbcConnect("test", uid="test_user", 
                  pwd="test_pwd", 
                  believeNRows=FALSE, readOnly=TRUE)
db <- sqlFetch(ch, "test_table") 
```

对于 100 万条记录，该过程需要 1074.58 秒。因此，所有 3000 万条记录都需要相当长的时间。有没有可能加快这个过程？

我将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T22:18:26.107

您可以尝试使用 system() 命令通过 R 终端对 mySQL shell 进行系统调用。在外部处理您的数据，只加载您需要的输出。

# listener - 如果主机目录是一个链接，G-WAN 找不到那个监听器

> ID：13289797
> 
> 赞同：0
> 
> 时间：2012-11-08T13:27:15.647
> 
> 标签：listener, symlink, g-wan

有没有人有同样的经历？如果主机目录是指向另一个目录的链接，则 gwan 无法打开该侦听器。

例如，如果`0.0.0.0_8080`是指向另一个目录的符号链接，`gwan`则不打开该侦听器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:23:37.693

我确定。此问题已调查并修复，感谢您的举报！

符号链接排除的原因来自排除所有属性的测试，但`directory flags`.

另一位用户报告说，在使用 的卷上定义的侦听器`XFS file system`也被忽略了。这也已修复，将在 G-WAN v3.10+ 中发布。

# jquery - 奇怪的行为 jQuery Get 和 mvc 3 部分视图

> ID：13289801
> 
> 赞同：1
> 
> 时间：2012-11-08T13:27:29.920
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-4

我有一个部分视图 _ImageUploader.cshtml

```
 @model Farmer.WebUI.Areas.Images.HelperClasses.UploaderHelper
    @using Farmer.Translations
    @using Farmer.Translations.Views.News

    @using System.Web.Optimization
    @Scripts.Render(Url.Content("~/Apps/FileUploader/fileuploader.js"))
    @Styles.Render(Url.Content("~/Apps/FileUploader/fileuploader.css"))

   <div id="file-uploader">
   </div>

<script type="text/javascript">
    var uploader = new qq.FileUploader({
        element: document.getElementById('file-uploader'),
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
        sizeLimit: 20971520,
        action: '@Url.Action("ImagesUpload", "Image", new { area = "Images"  })',
        multiple: true,
        dragText: 'Drop files here to upload',
        uploadButtonText: 'Upload a file',
        cancelButtonText: 'Cancel',
        failUploadText: 'Upload failed',
        messages: {
            typeError: "{file} has an invalid extension. Valid extension(s): {extensions}.",
            sizeError: "{file} is too large, maximum file size is {sizeLimit}.",
            minSizeError: "{file} is too small, minimum file size is {minSizeLimit}.",
            emptyError: "{file} is empty, please select files again without it.",
            noFilesError: "No files to upload.",
            onLeave: "The files are being uploaded, if you leave now the upload will be cancelled."
        },
        showMessage: function (message) {
            $.confirm({
                'title': 'Message',
                'message': message,
                'buttons': {
                    '@CommonTrl.Ok': {
                            'class': 'blue',
                            'action': function () {
                                //do nothing
                            }
                        }
                    }
            });
        },
        onComplete: function (id, fileName, data) {
            if (data.success == false && data.limitReached) {
                $.confirm({
                    'title': '@CommonTrl.Message',
                    'message': '@ImagesTrl.LimitReached ' + data.numberOfAllowed,
                    'buttons': {
                        '@CommonTrl.Ok': {
                            'class': 'blue',
                            'action': function () {
                                //do nothing
                            }
                        }
                    }
                });
            } else {
                addImage(data.idImage, data.imageType, data.showDescriptionOptions);
            }
        },
        params: {
            idSourceTable: '@Model.IdSourceTable',
            imageType: '@Model.ImageType',
            showDescriptionOptions: '@Model.ShowDescriptionOptions'
        }
    });

    function addImage(idImage, imageType, showDescriptionOptions) {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("GetImagePartial", "Image", new { area = "Images" })',
            data:
            {
                __RequestVerificationToken: $('input[name=__RequestVerificationToken]').val(),
                idImage: idImage,
                showDescriptionOptions: showDescriptionOptions
            },
            success: function (data) {
                $('#Images-' + imageType).append(data);
            }
        });
    }
</script> 
```

然后我可以查看我在哪里执行此操作

```
@Html.DropDownList("ddlImageType", Model.ImageTypeOptions, new { id = "ImageType" })
<div id="Uploader">
</div>
<script type="text/javascript">
    $(function () {
        //set default values
        $('#ImageType').val('@((int)ImageTypes.NewsGallery)');
        $('#ImageType').trigger('change');
    });
 $(function () {
        $('#ImageType').change(function () {
            $.ajax({
                type: 'GET',
                url: '@Url.Action("GetImageUploader", "Image", new { area = "Images" })',
                data:
                    {
                        idSourceTable: '@Model.IdGuid',
                        imageType: $('#ImageType').val(),
                        showDescriptionOptions: '@true'
                    },
                success: function (data) {
                    $('#Uploader').html(data);
                }
            });
        });
    });
</script> 
```

这是我的服务器代码

```
public ActionResult GetImageUploader(Guid idSourceTable, int imageType, bool showDescriptionOptions)
        {
            return PartialView("Images/_ImageUploader", new UploaderHelper(idSourceTable, imageType, showDescriptionOptions));
        } 
```

第一次加载所有内容时，一切正常。问题是当我改变我的下拉值时，服务器端的代码被调用了两次，我不知道为什么。我在 firebug 中调试，第一次是正常的 ajax 调用 ($('#ImageType').change) 但第二次调用返回并成功 ($('#Uploader').html(data);) 在那里执行是对服务器代码的另一个调用，我找不到发生这种情况的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:26:56.257

我在想这条线

`$('#ImageType').trigger('change');`

因为您在准备函数中调用它，所以每次加载页面时都必须执行它。

但老实说，我对此不是 100% 确定的

# javascript - Javascript将文本字段限制为正数和负数

> ID：13289810
> 
> 赞同：2
> 
> 时间：2012-11-08T13:27:51.610
> 
> 标签：javascript, regex

javascript中有一种方法可以允许用户在文本字段（输入类型=“文本”）中只输入数字，但可以选择在它们前面加上减号？（即只有负数和正数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:48:43.923

```
<input type='text' onkeypress='return numbersOnly(this,event,false,true);'>

function numbersOnly(Sender,evt,isFloat,isNegative) {
            if(Sender.readOnly) return false;       

            var key   = evt.which || !window.event ? evt.which : event.keyCode;
            var value = Sender.value;

            if((key == 46 || key == 44) && isFloat){                
                var selected = document.selection ? document.selection.createRange().text : "";
                if(selected.length == 0 && value.indexOf(".") == -1 && value.length > 0) Sender.value += ".";
                return false;
            }
            if(key == 45) { // minus sign '-'
                if(!isNegative) return false;
                if(value.indexOf('-')== -1) Sender.value = '-'+value; else Sender.value = value.substring(1);
                if(Sender.onchange != null) {
                    if(Sender.fireEvent){
                        Sender.fireEvent('onchange');
                    } else {
                        var e = document.createEvent('HTMLEvents');
                            e.initEvent('change', false, false);
                        Sender.dispatchEvent(e);
                    }
                }

                var begin = Sender.value.indexOf('-') > -1 ? 1 : 0;
                if(Sender.setSelectionRange){
                    Sender.setSelectionRange(begin,Sender.value.length);
                } else {
                    var range = Sender.createTextRange();
                    range.moveStart('character',begin);
                    range.select();                 
                }

                return false;
            }
            if(key > 31 && (key < 48 || key > 57)) return false;
        } 
```

相关问题：[HTML 文本输入只允许数字输入](https://stackoverflow.com/questions/469357/html-text-input-allow-only-numeric-input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:29:43.400

您可以将侦听器（即在 javascript 中）绑定到 onKeyUp 事件（或最适合您需要的事件）并检查用户尝试插入的内容。然后你可以决定是否让他插入那个字符。

注意：您还需要控制复制/粘贴事件，因为用户可以粘贴一些文本而不是编写它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:04:56.930

用这个。有用。

[https://raw.github.com/SamWM/jQuery-Plugins/master/numeric/jquery.numeric.js](https://raw.github.com/SamWM/jQuery-Plugins/master/numeric/jquery.numeric.js)

```
$(document).ready(function(){
    $(".numeric").numeric({negative :true});
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:30:17.667

尝试以下正则表达式：

```
/^-?\d+$/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-13T16:32:46.443

这是我仅针对正整数和负整数提出的最佳解决方案

```
<input type="text" onkeyup="this.value = (this.value[0] === '-') ? ('-' + this.value.replace(/[^0-9]/g, '')) : (this.value.replace(/[^0-9]/g, ''));" pattern="^-?\d+" /> 
```

你可以在这里查看[http://jsfiddle.net/4g08ofz6/](http://jsfiddle.net/4g08ofz6/)

图案

```
pattern="^-?\d+" 
```

只是在粘贴或拖入值时的额外验证层，但请记住，您仍应始终在服务器站点上进行验证

# mysql - MySQL 按用户分组时选择最高单圈时间

> ID：13289811
> 
> 赞同：1
> 
> 时间：2012-11-08T13:27:51.697
> 
> 标签：mysql

我有一个用于单圈时间的简单 MySQL 表。由以下组成

*   主键
*   跟踪 ID
*   用户编号
*   单圈时间
*   圈速状态

我基本上想选择前 10 个单圈时间，但每个用户只能选择一个。因此，如果我有 2 圈 X 赛道，我想获得最好的。

如果我跑

```
SELECT * FROM tbl_lap_times ORDER BY lap_times ASC 
```

我看到了我的单圈时间，我最好的时间在顶部。但如前所述，我只想要每个用户一圈时间。

如果我跑

```
SELECT * FROM tbl_lap_times GROUP BY users_id ORDER BY lap_times ASC 
```

然后我得到了我的第一个单圈时间，（这不是我最好的单圈时间）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:35:47.250

您是否尝试过使用该`min()`功能？

`SELECT users_id, min(lap_times) FROM tbl_lap_times GROUP BY users_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:35:52.310

您需要使用`MIN`. 像这样的东西应该可以工作（未经测试）：

```
SELECT user_id, track_id, lap_status, MIN(lap_times) AS best_time
FROM tbl_lap_times
GROUP BY user_id, track_id, lap_status
ORDER BY best_time DESC
LIMIT 10 
```

# asp.net-mvc-3 - 在 MVC3 中使用类

> ID：13289816
> 
> 赞同：0
> 
> 时间：2012-11-08T13:27:56.290
> 
> 标签：asp.net-mvc-3

大家好，我是 MVC3 的初学者。我的问题是关于使用类。我正在使用网络服务来获取参数此时我没有问题，但我的问题是我一次又一次地定义每个控制器方法中的每个连接，所以有什么捷径吗？

这是一个例子：

```
public ActionResult BeyanListe()
        {

Services_building client = new Services_built();
            Services client_service = new Services();
            client_service.ClientCredentials.UserName.UserName = "service_test";
            client_service.ClientCredentials.UserName.Password = "..";
            client_service.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
            client.ClientCredentials.UserName.UserName = "service_test";
            client.ClientCredentials.UserName.Password = "..";
            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;

return View()
} 
```

如您所见，我已经为客户凭证声明了两次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:43:59.430

1.  使控制器的 client_service 和客户端受保护或私有成员。
2.  将初始化代码移动到控制器的构造函数中。
3.  根据需要在您的操作中使用 client_service 和 client。

如果您在多个控制器中使用相同的模式，您可能需要考虑创建一个处理此功能的控制器基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:49:38.447

我假设两个服务类都是从相同的接口派生的，例如。IServices，然后：

```
private void AssignCredentials(IServices services)
{
   services.ClientCredentials.UserName.UserName = "service_test";
   services.ClientCredentials.UserName.Password = "..";
   services.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
} 
```

并在您的基本方法中调用 AssignCredentials 方法。

# vba - 基本的 VB 问题

> ID：13289820
> 
> 赞同：0
> 
> 时间：2012-11-08T13:28:10.217
> 
> 标签：vba, field, calculator, arcgis

我只是想知道我可以使用什么符号/字符来定义字符串中的任何字符......

基本上，我有许多 RR 2、RR#2、RR1、RR 1 等的记录，我想使用一个符号来定义 RR 之后的任何内容，并将其替换为“”。我知道在 SQL 中它是“%”符号，但在 VBA 中不确定。

我正在使用 ArcGIS 字段计算器中的替换功能。

我尝试搜索，但无法提出正确的问题来找到我正在寻找的答案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:25:29.827

由于不清楚您是否需要 VBA 或 VB.Net，

这是一个 VBA 答案，只需使用 ChopString 函数，使用 Test 子中显示的格式：

```
Function ChopString(str As String, after As String, Optional caseInsensitive As Boolean = True) As String
    Dim x As Long
    If caseInsensitive Then
        x = InStr(1, str, after, vbTextCompare)
    Else
        x = InStr(1, str, after, vbBinaryCompare)
    End If
    If x Then
        str = Left(str, x + Len(after) - 1)
    End If
    ChopString = str
End Function
Sub Test()
    Dim OriginalString As String
    Dim choppedString As String
    OriginalString = "1234RR this will be chopped"
    choppedString = ChopString(OriginalString, "RR")
    MsgBox choppedString
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:40:40.713

遗憾的是 .net`REPLACE()`函数不支持通配符，您可以使用[此处](http://social.msdn.microsoft.com/Forums/en-US/vblanguage/thread/30e65c77-6795-402c-9717-bd8d07a534e3/)描述的函数，但它有点冗长。

# html - 使用 HTML 链接在 Dart 中提交表单

> ID：13289821
> 
> 赞同：5
> 
> 时间：2012-11-08T13:28:12.570
> 
> 标签：html, dart

假设我有一个表格：

```
<form id = "form1" action = "process.php" method = "post">
...
</form> 
```

现在，使用链接从 JavaScript 提交它看起来像这样：

```
<a href='javascript:document.forms["form1"].submit()'>Submit</a> 
```

我如何对 Dart-lang 做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T13:33:00.657

我认为您不能`href`在`<a>`.

但是，您可以在锚点上添加一个 onClick 处理程序：

```
import 'dart:html';

main() {
  AnchorElement a = query("#a1");
  a.on.click.add((e){
    FormElement form = query("#form1");
    form.submit();

    // stop event
    e.preventDefault();
    e.stopPropagation();
  });
} 
```

你的锚看起来像：

```
<a id="a1">Submit</a> 
```

如果您需要保留手形光标（因为在使用无用处后它现在已经消失了`href`）或其他样式，只需使用 CSS：

```
a {
    cursor: pointer;
    color: #00f;
    text-decoration: underline;
}

a:hover {
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:29:58.363

Alexandre Ardhuin 为您提供了一个良好的开端，但您必须使用 a`<input type="submit" value="Submit">`来允许用户在其移动设备或键盘上使用 enter 键：

```
<form>
  <input type="submit" value="Submit">
</form> 
```

和飞镖代码：

```
main() {
  Element form = query("form");
  form.on.submit.add((e){
    // Do your stuff here...

    // Stop event
    e.preventDefault();
    e.stopPropagation();
    return false;
  });
} 
```

# jsf-1.2 - 在 JSF (1.2) 消息中嵌入链接（或其他 html）

> ID：13289822
> 
> 赞同：0
> 
> 时间：2012-11-08T13:28:15.597
> 
> 标签：jsf-1.2

根据这个问题...

[在 JSF 消息中嵌入链接（或其他 html）](https://stackoverflow.com/questions/3356546/embedding-a-link-or-other-html-in-a-jsf-message)

...以及来自 BalusC 的相关博客文章...

[http://balusc.blogspot.ch/2010/07/using-html-in-jsf-messages.html](http://balusc.blogspot.ch/2010/07/using-html-in-jsf-messages.html)

...我只需要删除FacesRenderer的导入和注释。JSF 1.2 中有一个等价物，虽然称为 Renderer，但这个类不包括注解。

无论如何，我的浏览器中出现以下错误：

> 根据 TLD，标签消息的属性转义无效

我该如何解决这个问题？因为似乎为组件添加 costum 渲染器和属性是合法的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:24:22.693

自定义属性需要[自定义 TLD](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags6.html)才能正常工作...

# java - 大量时间从 Java 访问数据库

> ID：13289824
> 
> 赞同：2
> 
> 时间：2012-11-08T13:28:18.360
> 
> 标签：java, ms-access

我是一名初级 Java 程序员，我终于自己编写了我的第一个程序，除了学校:)。

基础是：您可以在其上存储数据并随时检索它。最主要的是，我希望能够在另一台计算机上运行这个程序（作为可运行的 .jar 文件）。

因此我必须安装 JRE 和 microsoft access 2010 驱动程序（它们都是 32 位的），程序运行良好，但有一个小问题。

从数据库中存储或删除某些内容需要很长时间（字面意思是 17 秒）。这是什么原因？我可以改变它吗？

**编辑：**

这是将类 Woodd 的对象插入数据库的代码。

```
public static void ToevoegenWoord(Woord woord) {
    try (Connection conn = DriverManager.getConnection("jdbc:odbc:DatabaseSenne")) {
        PreparedStatement addWoord =
            conn.prepareStatement("INSERT INTO Woorden VALUES (?)");
        addWoord.setString(1, woord.getWoord());
        addWoord.executeUpdate();
    } catch (SQLException ex) { 
        for (Throwable t : ex) {
            System.out.println("Het woord kond niet worden toegevoegd aan de databank.");
            t.printStackTrace();
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:41:50.557

建议：使用另一个数据库，如 Derby、hsqldb。它们与 MSAccess 没有太大区别（= 可以使用基于文件的数据库），但性能更好（比 JDBC/ODBC）。甚至可以嵌入到应用程序中（无需额外安装 DB）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:06:20.853

在您的情况下，每次创建 Connection 最有可能是缓慢的操作（尤其是使用 JDBC-ODBC 桥）。要确认这一点，请尝试在从 DriverManager 获取连接的行之前和之后放置带有时间戳的打印语句。如果是这种情况，请考虑不要在每个请求上打开连接，而是打开一次并重用，最好使用某种连接池，有[很多可用的选项](https://stackoverflow.com/questions/520585/connection-pooling-options-with-jdbc-dbcp-vs-c3p0)。

如果情况并非如此，那么实际插入也可能很慢。再次使用打印语句进行简单的分析应该可以帮助您发现代码大部分时间都花在了哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:20:19.873

首先，祝贺你第一次独立进军。要回答您的问题/详细说明 maximdim 的答案，需要关注的是：

```
try (Connection conn = DriverManager.getConnection("jdbc:odbc:DatabaseSenne")) { 
```

每次你使用这个函数可能是一个主要的瓶颈（或者你的代码的另一部分可能是。）最重要的是，你会想要理解使用日志甚至标准打印语句的概念来帮助诊断你在哪里看到一个问题。像这样包装单独的代码行：

```
System.out.println("Before Connection retrieval: " + new Date().getTime());
try (Connection conn = DriverManager.getConnection("jdbc:odbc:DatabaseSenne")) {
        System.out.println("AFTER Connection retrieval: " + new Date().getTime()); 
```

...查看每个调用经过多少毫秒可以帮助您准确确定瓶颈所在。

# c - 在 C++ 中填充动态大小的数组并使用这些值

> ID：13289825
> 
> 赞同：1
> 
> 时间：2012-11-08T13:28:18.857
> 
> 标签：c, memory-management, arrays

我想动态填充一个字符数组并检查包含的值是否是有效的整数，这是我到目前为止得到的：

```
for(int i = 0; i < 50000; i++)
    {
        if(input[i] == ',')
        {
            commaIndex = i;
        }
    } 
```

commaIndex 是文件中逗号的索引，在逗号之前应该输入数值，文件是这样的：-44,5,19,-3,13,(etc)，这部分很重要：

```
char *tempNumber = new char[commaIndex]; 
```

填充 tempNumber（由于我的动态分配，它应该与数字一样大）所以我没有大小为 50000 字符数组（命名输入）的数字。

```
for(int i = 0; i < commaIndex; i++)
    {
            cout << i << "\n";
            tempNumber[i] = input[i];
    } 
```

现在我想使用它：

```
if(!isValidInteger(tempNumber))
    {
        cout << "ERROR!\n";
    } 
```

不幸的是，无论“commaIndex”的值如何，tempNumber 的大小似乎总是 4，即我得到以下输出：

（输入数据：50000,3,-4）

commaIndex：5 tempNumber 的内容：5000（缺少一个 0）

commaIndex: 1 tempNumber 的内容: 3²²² (注意 3 ^2s)

commaIndex：2 tempNumber 的内容：-4²²

有任何想法吗？

还有一件事：这是一个家庭作业，我不允许使用 C++ 的任何面向对象的元素（这包括字符串和向量，我去过那里，我知道这很*容易*。）

谢谢，

丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:31:29.227

您可能对[strtol](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)函数感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:21:16.843

您也可以考虑使用`strtok()`with `sscanf()`。请注意，这`strtol()`不允许您检查错误，因为它只是`0`在解析错误时返回（完全有效）值。另一方面，`sscanf()`返回成功读取的项目数，因此您可以轻松检查读取数字时是否有错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    int i = 0;
    char str[] = "1,2,-3,+4,a6,6";

    /* calculate result table size and alloc */
    int max = 1;
    char* tmp = str;
    while (*tmp)
        if (*tmp++ == ',')
            ++max;

    int* nums = malloc(sizeof(int) * max);

    /* tokenize string by , and extract numbers */
    char* pch = strtok(str, ",");
    while (pch != NULL) {
        if (sscanf(pch, "%d", &nums[i++]) == 0)
            printf("Not a number: %s\n", pch);
        pch = strtok(NULL, ",");
    }

    /* print read numbers */
    for (i = 0; i < max; ++i)
        printf("%d\n", nums[i]);

    free(nums);

    return 0;
} 
```

# android - 使用 androids facebook sdk 的多个会话？

> ID：13289826
> 
> 赞同：4
> 
> 时间：2012-11-08T13:28:20.870
> 
> 标签：android, facebook

对于我的应用程序，我正在使用 facbeook sdk 让用户登录到我的应用程序。

现在我想通过使用 facebook 来允许两个帐户之间的连接。问题是我需要一个新的 facebook-session-object 来强制用户登录，即使用户已登录。

在他登录 hin 后，我唯一需要该用户提供的东西：ID 和 AccessToken。

有任何想法吗？

# c# - 使用反射在某些操作系统上使用命名空间

> ID：13289829
> 
> 赞同：2
> 
> 时间：2012-11-08T13:28:31.183
> 
> 标签：c#, .net, reflection

我正在创建一个使用 CodeProject CoreAudioApi（用于处理音频的非常流行的框架）的程序，但问题是 CoreAudioApi 使用的系统调用在 Vista 之前的任何 Windows 版本中都不可用。如果我运行一个用 CoreAudioApi 编译的程序（正常使用`using`语句），该程序将在 Vista 之前的任何内容上崩溃。

我创建了这个函数来获取当前环境的版本号：

```
win_version = Environment.OSVersion.Version.Major; 
```

这将返回我需要的主要版本号。'6' 是 Vista/7，其他都不是，这就是我需要确定的。利用这一点，我需要确定是否在操作系统大于或等于“6”时包含 CoreAudioApi 命名空间。从研究来看，`using`s 需要与程序一起编译，但我也读过一些叫做反射的东西——这可能是我需要的。

一旦我得到了 CoreAudioApi 命名空间`using`（抱歉缺少术语），剩下的就很容易了。我怎样才能做到这一点？

**TL;DR** 我需要某种形式的代码来有效地做到这一点：

```
using System;
using System.Text;
//etc
if(currentWindowsVersion>=6) using CoreAudioApi; 
```

除了控制结构不能在类之外工作，并且所有命名空间都与程序一起编译，而不是单独控制。

谢谢！

* * *

**编辑：**到目前为止，我使用它来加载 CoreAudioApi 命名空间作为编译程序集：

```
if(win_version>=6){
    CoreAudioApi = Assembly.LoadFrom("CoreAudio.dll");
    CoreAudioApi.GetLoadedModules();
    CoreAudioApi.GetTypes();
    MessageBox.Show("Loaded CoreAudioApi");
} 
```

从这里开始，我需要做的是实际使用 API 中的类型和方法。我在 Windows Vista/7 上工作的代码是这样的：

```
public static MMDeviceEnumerator devEnum;
public static MMDevice defaultDevice;
//later in a mute method:
defaultDevice.AudioEndpointVolume.Mute = true/false; 
```

我什至真的不需要 devEnum AFAIK，所以真正重要的几行是最后两行（除了评论）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:54:32.047

我刚刚尝试了以下方法：

*   创建一个新的控制台应用程序项目
*   将`CoreAudioApi`项目从 CodeProject 添加到解决方案
*   `CoreAudioApi`在我的控制台应用程序中添加项目引用
*   创建以下类：

```
interface IAudio { void SetVolume(float level); }

class XpAudio : IAudio {
    public void SetVolume(float level) {
        // I do nothing, but this is where your old-style code would go
    }
}

class VistaAudio : IAudio {
    public void SetVolume(float level) {
        MMDeviceEnumerator devEnum = new MMDeviceEnumerator();
        MMDevice defaultDevice = devEnum
            .GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
        defaultDevice.AudioEndpointVolume.MasterVolumeLevel = level;
    }
}

class Program {
    static void Main(string[] args) {
        IAudio setter = Environment.OSVersion.Version.Major >= 6
            ? (IAudio)new VistaAudio()
            : (IAudio)new XpAudio();
        float val = float.Parse(Console.ReadLine());
        setter.SetVolume(val);
        Console.ReadLine();
    }
} 
```

这*在*我的服务器（~ Windows 7）和本地（Windows XP）机器上运行。在我的 XP 机器上，它会很乐意接受一个值并忽略它；在我的服务器上，它抛出一个异常，（大概是因为我没有声音输出）。如果我让我的 XP 机器运行，*当我输入一个值时*`CoreAudioApi`，我会得到一个异常，而不是之前。

 *问题是，你做了什么*不同*的事情来让你的应用程序崩溃？你`CoreAudioApi`在启动时使用代码吗？

编辑：看到你的编辑后，如果你这样做，你根本不需要搞砸`Assembly.LoadFrom`。当（且仅当）需要时，框架应该*动态加载该程序集。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-01T18:03:07.013

`COREAUDIOAPI.dll`不适用于 XP 或更早版本，因为它们无法处理`MMDEVICE`API（设备枚举）。我不知道Vista。*

# android - CKEditor 3.6.4 不适用于三星 S2、S3

> ID：13289833
> 
> 赞同：4
> 
> 时间：2012-11-08T13:28:51.120
> 
> 标签：android, ckeditor

我在一个项目中使用 ckeditor 3.6.4，我只是注意到在三星 Galaxy s2 和三星 Galaxy s3 上进行测试时，编辑器没有加载。这也发生在演示页面[http://ckeditor.com/demo](http://ckeditor.com/demo)上。当我在 S2 和 S3 上尝试此操作时，编辑器确实出现在这里，尽管它的行为有点奇怪。

只是想知道其他人是否遇到过这个问题，或者我需要做些什么才能使其在 S2 和 S3 上运行。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:51:41.443

ckeditor 团队仍在努力使 ckeditor 与 android 浏览器兼容。它在 iphone 浏览器上几乎可以正常工作。阅读以下网址；[http://ckeditor.com/support/faq/features#question9](http://ckeditor.com/support/faq/features#question9)

在您的代码中，您可以检测浏览器类型。并使用工具栏的基本按钮。它可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T10:01:39.750

有时 CKEditor 无法检测浏览器并最终从兼容浏览器列表中丢失它。

添加以下代码并再次检查它是否有效。

CKEDITOR.env.isCompatible = true;

# sql - 带有 SQL Server Compact 数据库的 Silverlight 网站

> ID：13289834
> 
> 赞同：0
> 
> 时间：2012-11-08T13:28:53.247
> 
> 标签：sql, silverlight, sql-server-ce

几个月前，我使用 SQL Server Compact Edition 中的数据库创建了一个 Silverlight 网站。

现在，我重新安装了我的电脑，当我在 Visual Studio 中打开我的项目并按 F5 时，一切正常，但如果我转到`.web`文件夹并打开`.html`页面，它不会显示我的数据，它只显示我的页面。

有人知道这是为什么吗？

# assembly - 尝试执行非指令

> ID：13289835
> 
> 赞同：5
> 
> 时间：2012-11-08T13:28:55.237
> 
> 标签：assembly, mips

这是 C 代码的 mips 汇编代码。我正在使用 Qtspim 对其进行模拟，但我收到了如上标题的错误。

```
 .text

# j=$s0 , i=$t0 

main:
        li $s0,5 # setting j to 5 
        li $t0,0 # setting i to zero

loop:
        slti $t1,$t0,8
        bne $t1,1,Exit
        add $s0,$s0,$t0
        addi $t0,$t0,1
        beq $s0,10,Exit
        j loop

Exit: 
```

我试图转换成程序集的 C 代码如下

```
 j=5;

for(t=0,i<8;i++){

    j=j+1;
    if(j==10)
        return;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-15T20:50:23.987

如果您在“尝试在地址 0x 处执行非指令...”时遇到问题，请尝试在代码末尾添加：

```
li $v0,10
syscall 
```

pc 计数器将始终将 +4 添加到 pc（因为指令以 4 的倍数存储）并且它会这样做，直到您不会说 EXIT FROM PROGRAM。

是的，终止程序的过程是程序员的错，所以你将编写一个退出系统调用来终止你的代码。

谁在 8086 上写过代码，记得有一个 .EXIT 例程，将程序的控制权返回给 DOS，所以它与 syscall 相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:37:00.883

汇编代码似乎没问题。我猜你的问题是你在 QtSpim 中启用了[*延迟分支。*](http://en.wikipedia.org/wiki/Delay_slot)这意味着无论分支采取何种操作，始终执行分支之后的指令。

简单的解决方法是禁用延迟分支，或者`NOP`在任何分支指令之后添加一个。

在您的代码中：

```
.text
main:
        li $s0,5 # setting j to 5 
        li $t0,0 # setting i to zero

loop:
        slti $t1,$t0,8
        bne $t1,1,Exit
        nop             # added a nop to prevent the addition when branch is taken
        add $s0,$s0,$t0
        addi $t0,$t0,1
        beq $s0,10,Exit
        j loop
        nop             # added a nop to prevent executing unknown data after the unconditional jump
Exit:   
        j Exit          # code added so we don't drop off executing after this point
        nop 
```

# iphone - 非常大的sqlite数据库副本

> ID：13289844
> 
> 赞同：2
> 
> 时间：2012-11-08T13:29:09.683
> 
> 标签：iphone, sqlite

我从这个问题（[SQLite Database Copy](https://stackoverflow.com/questions/12909307/sqlite-database-copy)）中看到，必须在安装时将 sqlite 数据库从捆绑包复制到工作目录，以使其不是只读的。但是如果数据库很大呢？我不希望它占用两倍的空间。有没有办法从捆绑包中删除原件？任何其他解决方法可以避免在安装后从未使用过的捆绑包中浪费这么多空间？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:42:22.977

多大才算*很大*？

而且您不能以任何方式修改捆绑包，包括删除/重命名/修改文件等。

如果要修改数据库，则必须将其从捆绑包中复制出来。

但是，Apple 已经找到了解决空间不足的问题。如果您可以重新创建数据，您应该将您的数据库复制到缓存文件夹中，而不是文档文件夹中。这样它就不会被推送到云端，如果设备空间不足，它可以被 ios 自动清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:14:26.970

另一种方法是在安装时使用 sql 语句以编程方式创建数据库，而不是在包中嵌入 sqlite 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:37:03.847

无法从应用程序包资源目录中删除文件（只读）。如果您的数据库太大而无法复制，我建议在应用程序第一次启动时下载数据库。

# delphi - 使用 Embarcadero Delphi XE3 开发的程序能否与 Embarcadero Delphi 2010 一起使用

> ID：13289846
> 
> 赞同：0
> 
> 时间：2012-11-08T13:29:19.680
> 
> 标签：delphi, delphi-2010, delphi-xe3

我们正在尝试开发一个表单，该表单将添加到使用**Embarcadero Delphi 2010**编写和创建的项目中，我们将使用**Embarcadero Delphi XE3**作为我们的开发环境，我们将编写的代码可以在**Embarcadero Delphi 2010**上运行吗？

如果不是在哪里可以下载**Embarcadero Delphi 2010**，我在 Embarcadero 官方网站上找不到。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:00:44.113

以前的版本可以在这里下载： [http ://www.embarcadero.com/xe3-earlier-versions](http://www.embarcadero.com/xe3-earlier-versions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:49:11.450

取决于....如果您不使用 rtti 和泛型并删除 qulified 命名空间，限制使用它可以工作的外部组件，但我认为不推荐。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T14:51:50.593

如果您已正确注册，则您有一个 edn 帐户：

选择下载/注册用户下载

它在里面。您应该能够返回到 Delphi 7。2010 位于页面底部。

强烈推荐 XE3 中的最新内容。过去几年的改进绝对是值得的，即使你只是逐渐学习和使用新东西，升级也会在很短的时间内收回成本。

# java - 列表 没有按预期工作

> ID：13289847
> 
> 赞同：1
> 
> 时间：2012-11-08T13:29:20.447
> 
> 标签：java, generics

将 a 分配`List<Object>`给 a`List<? super String>`工作正常。

将 a 分配`List<List<Object>>`给 a`List<List<? super String>>`不会编译。

**代码**

```
public class Main {
    public static void main(String[] args) {
        // works fine
        List<Object> listOfObject = new ArrayList<>();
        takeListSuperString(listOfObject);

        // doesn't compile
        List<List<String>> listOfListOfObject = new ArrayList<>();
        takeListOfListSuperString(listOfListOfObject);
    }

    static void takeListSuperString(List<? super String> listSuperString) {

    }

    static void takeListOfListSuperString(List<List<? super String>> listOfListSuperString) {

    }
} 
```

**问题**

为什么不`List<List<? super String>>`一样`List<? super String>`？

另外，知道我可以在哪里查找这样的东西吗？

一个相关的问题是[Generics hell: hamcrest matcher as a method parameter](https://stackoverflow.com/questions/13000767/generics-hell-hamcrest-matcher-as-a-method-parameter)。但我觉得那里的答案没有帮助。

**编辑**

在我最终得到它之前，我不得不考虑[JB Nizet 的答案](https://stackoverflow.com/questions/13289847/listlist-super-string-doesnt-work-as-expected/13290034#13290034)几个小时。所以我会在这里稍微扩展一下。也许这会帮助别人。

假设将 a 分配`List<List<CharSequence>>`给 a`List<List<? super String>>`是可能的，以下代码将编译：

```
// can only contain instances of CharSequence
List<List<CharSequence>> listOfListOfCharSequences = new ArrayList<>();

List<List<? super String>> listOfListSuperString = listOfListOfCharSequences;

// add a list of objects containing an Integer
List<Object> listOfObjects = new ArrayList<>();
listOfObjects.add(123);
listOfListSuperString.add(listOfObjects);

// Ups.. exception at runtime we are getting an Integer where we expect a CharSequence
CharSequence charSequence = listOfListOfCharSequences.get(0).get(0); 
```

因此，为了防止在运行时出现丑陋的异常，这是不允许的。

正如[halex 指出的那样，](https://stackoverflow.com/questions/13289847/listlist-super-string-doesnt-work-as-expected/13290103#13290103)这是泛型协方差，与`List<String>`不可分配给相同`List<Object>`。并且使用`List<? extends List<? super String>>`代码实际上会编译，因为`? extends String`阻止了`List.add()`调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T13:38:49.467

因为 a和 a`List<Object>`不是一回事`List<? super String>`。A`List<? super String>`包含一种特定类型的对象，您不知道，但它是 String 或 String 的超类或超接口。而 a`List<Object>`是一个可以容纳任何类型对象的列表。

假设`? super String`是`CharSequence`。您会觉得以下编译正常吗？

```
List<List<Object>> listOfListOfObjects = new ArrayList<List<Object>>();
List<Object> listOfObjects = new ArrayList<Object>(); 
listOfObjects.add(new Integer());
listOfListOfObjects.add(listOfObjects);
List<List<CharSequence>> listOfListOfCharSequences = listOfListOfObjects; // WTF? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T13:42:10.793

您必须将方法更改`takeListOfListSuperString`为

```
static void takeListOfListSuperString(List<? extends List<? super String>> ListOfListSuperString) 
```

原因是协方差。内部类型`List<? super String>`必须完全匹配，而`List<String>`. 解决方法是使用另一个通配符，告诉 Java 组合的内部类型也应该是协变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:13:12.297

上面问的好问题不一样……我们可以这样理解这个问题：

```
List<? super String> a = new ArrayList<Object>();
List<List<? super String>> b = new ArrayList<List<Object>>();

List<List<? super String>> c = new ArrayList<List<? super String>>(); 
```

在这段代码中，第 2 行没有编译.... 那么为什么不编译呢？

回答：

`List<List<? super String>>``String`表示是ie`CharSequence`或超类的列表列表`Object`

但是我们分配的对象说`ArrayList`s`List`可以接受任何任何类和每个类。

所以这两个列表都是不同的，java 在编译时显示了这个不同。

# django - 使用 django-tables2 时是否可以将模板标签应用于 a？

> ID：13289848
> 
> 赞同：6
> 
> 时间：2012-11-08T13:29:22.663
> 
> 标签：django, django-templates, django-tables2

我正在使用 django-tables2 为我创建表。我需要将模板标签应用于其中一列中的每个单元格 ()。似乎需要付出很多额外的努力来创建自定义表格布局，以便将模板标签应用于一列。有没有办法在 django-tables2 中做到这一点？

更新：

我可能没有很好地解释我在寻找什么。我不相信这会奏效。

我的代码：

```
class CombineTable(tables.Table):  
    build_no = tables.LinkColumn('run', args=[A('release'), A('id')], verbose_name="Build")  
    flavor = tables.Column(verbose_name="Flavor")  
    pass_rate_pct = tables.Column(verbose_name="Image Pass Rate") 
```

我希望 pass_rate_pct 中的每个都使用类 () 中的模板标签 {{pass_rate_color}}，其中 pass_rate_color 然后根据 pass_rate_pct 的输出输出特定的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:08:19.487

django_tables2 允许您指定用于输出表的替代自定义模板。复制`django_tables2 / templates / django_tables2 / table.html`并重命名它，例如`table_pass_rate.html`并在第 29 行输入您的标签：

```
{% pass_rate_color cell %} 
```

现在在生成表时使用：

```
{% render_table table "table_pass_rate.html" %} 
```

有关更多信息，请参阅标签的 django_tables2[代码](https://github.com/bradleyayers/django-tables2/blob/master/django_tables2/templatetags/django_tables2.py)和[模板](https://github.com/bradleyayers/django-tables2/blob/master/django_tables2/templates/django_tables2/table.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:59:13.043

尝试覆盖 Table.render_FOO 方法，其中 foo 是列名，假设您编写了一个自定义模板标签，该标签将列值作为参数。例如：

```
import django_tables2 as tables

class SimpleTable(tables.Table):
    custom_row = tables.Column()
    id = tables.Column()
    age = tables.Column()

    def render_custom_row(self, value):
        return '{% pass_rate_color %s %}' % value 
```

# jquery - 使用变量单击时旋转增量为 45 度

> ID：13289849
> 
> 赞同：0
> 
> 时间：2012-11-08T13:29:23.800
> 
> 标签：jquery, variables, rotation

我有一些按钮我试图在点击时旋转 45 度，但是因为我使用了一个变量（或者我认为这就是原因），当点击一个按钮时它会旋转 45 度，然后当另一个按钮被点击时，因为变量已经增加了 45 度，变成了 90 度。有没有办法在没有变量的情况下执行此操作或修改我的设置，这样就不会发生这种情况？

这是演示中的代码和设置：http: [//jsbin.com/atinap/16/edit](http://jsbin.com/atinap/16/edit)

```
$(".info_btn").css("-webkit-transition", "-webkit-transform 0.25s ease-in-out");

var info_btn_DEG = 0;

$(".info_btn").toggle(function() {
$(this).closest('.article_wrapper').find('.description').slideDown("250");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("200", 0.65);
}, function() {

$(this).closest('.article_wrapper').find('.description').slideUp("200");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("250", 0.3);
}); 
```

对此的任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T13:33:14.443

您需要为每个元素关联一个角度，而不是所有元素都有一个全局角度 - 使用[`.data()`](http://api.jquery.com/data/)：

```
function increaseAngle(elem) {
    var oldAngle = $(elem).data('angle');
    var newAngle = oldAngle + 45;
    $(elem)
        .css("-webkit-transform", "rotateZ(" + newAngle + "deg)")
        .data('angle', newAngle);
}

$(".info_btn")
    .css("-webkit-transition", "-webkit-transform 0.25s ease-in-out")
    .data('angle', 0);
    .toggle(function() {
        $(this).closest('.article_wrapper').find('.description').slideDown(250);
        increaseAngle(this);
        $(this).fadeTo(200, 0.65);
    }, function() {
        $(this).closest('.article_wrapper').find('.description').slideUp(200);
        increaseAngle(this);
        $(this).fadeTo(250, 0.3);
    }); 
```

# algorithm - 广播信道的最优重传算法

> ID：13289851
> 
> 赞同：8
> 
> 时间：2012-11-08T13:29:30.930
> 
> 标签：algorithm, broadcast, channel, feedback

我有许多可以通过广播媒体（在本例中为 IR）进行通信的微控制器。每个节点都希望定期向所有其他节点宣布它的存在，但由于它是一种广播媒体，因此同时传输的两个节点会产生冲突，并且两个消息都不会正确传输。

更复杂的是，当节点接收到无效消息时，可靠地确定这是由于碰撞还是由于背景噪声或弱信号似乎并不实际。此外，虽然节点可见性通常是自反的（A 看到 B 意味着 B 可以看到 A），但通常情况下并非所有节点都可以看到所有其他节点。

暂时不考虑外部干扰，似乎一种合理的方法是创建时隙，每个节点在每个时隙中以小的（理想情况下在节点之间相似）概率进行传输。如果有 n 个节点以概率 p 进行传输，则在 (1 - p) ^n次中不会传输任何消息；^(在 n * p * (1 - p) n-1)次中，只有一条消息将被传输，其余时间将发生冲突。当 n 个节点中的每一个节点传输 1/n 的时间时，成功冲突的发生率最高，这导致相当稳定的 38% 成功传输和 24% 冲突；该值仅随着节点数量的增加而略有变化。

鉴于此，我们似乎可以观察成功传输和/或冲突的速率，并调整我们自己的传输速率以尝试迫使它们接近预期值。我不确定实现这一目标的最佳反馈机制是什么，这样每个人最终都会得到相似的概率。这也没有考虑到外部干扰，这将导致我们不断降低传输速率，以避免不存在的冲突。

什么是最佳算法（上述的改进或完全不同的方法）以最大化每个节点可以在没有冲突的情况下接收的公告消息的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:18:39.407

你想要的实际上是一个无线网状网络，它本身就是一个完整的研究领域。除此之外，确认消息是一个好主意。如果数据包开销是一个问题，您可以使用公告本身搭载它们。它们允许通过观察有多少邻居应答来区分冲突和背景噪声，并通过等待（大多数）邻居确认每个传输（停止和继续）来允许基本速率限制。如果控制器非常灵活，这当然会变得更加复杂。

在整个网络上保持相同的更新速率将是非常困难的（并且可能是不可取的），因为传输质量在不同的区域和时间点可能会有很大差异。

# objective-c - 用于 iOS 登录问题的 Facebook SDK 3.1

> ID：13289860
> 
> 赞同：2
> 
> 时间：2012-11-08T13:30:01.927
> 
> 标签：objective-c, ios, facebook

我在我的 ios 应用程序中使用 Facebook sdk 3.1 在朋友墙上分享链接。我尝试在 applicationDidFinishLaunching 方法中打开一个新会话，如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

myAppDelegate = self;

AudioViewController *viewController = [[AudioViewController alloc] init];
self.navController = [[UINavigationController alloc] initWithRootViewController:viewController];
[self.navController setNavigationBarHidden:YES];
viewController = nil;

self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible];

if (![self openSessionWithAllowLoginUI:NO]) {
    // No? Display the login page.
    [self performSelector:@selector(login) withObject:nil afterDelay:0.5];
}

return YES;
}

- (void)login{
[self openSessionWithAllowLoginUI:YES];
}

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
return [FBSession openActiveSessionWithReadPermissions:nil
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                         [self sessionStateChanged:session state:state error:error];
                                     }];
}

- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState)state
                  error:(NSError *)error{

switch (state) {
    case FBSessionStateOpen: {
        DLOG(@"session open");
    }
        break;
    case FBSessionStateClosed: {

        DLOG(@"session closed");

        [FBSession.activeSession closeAndClearTokenInformation];

    }
        break;
    case FBSessionStateClosedLoginFailed: {

         DLOG(@"session Failed");

    }
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter] postNotificationName:WVSessionStateChangedNotification
                                                    object:session];

if (error) {
    DLOG(@"error = %@",error);
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Error: %@",
                                                                 [AppDelegate FBErrorCodeDescription:error.code]]
                                                        message:error.localizedDescription
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alertView show];
}
} 
```

对于某些 Facebook 帐户，它会返回错误“操作无法完成”com.facebook.sdk 错误 2。因此无法在 Facebook 上发帖。

我在这里做错了吗？任何帮助将不胜感激。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:48:48.373

我有同样的问题，我通过 NSTimer 调用 openSessionWithAllowLoginUI:TRUE 解决了这个问题。

```
if (![self openSessionWithAllowLoginUI:NO]) {
    // No? Display the login page.
    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(login) userInfo:nil repeats:NO];
} 
```

原因是，我们无法在不同的线程上获得 FB 会话，我们使用主线程或另一个（后台）线程。在您的代码中，当您检查会话可用性时，您使用主线程和登录，您通过 performSelector 函数使用不同的线程。

希望，它会帮助你。

谢谢

# apple-push-notifications - didRegisterForRemoteNotificatiornsWithDeviceToken 不会触发

> ID：13289861
> 
> 赞同：0
> 
> 时间：2012-11-08T13:30:03.910
> 
> 标签：apple-push-notifications

所以我在调试和测试时让 didRegisterForRemoteNotificatiornsWithDeviceToken 触发了几次......现在它根本不想触发......有限制吗？否则会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:38:31.527

非常奇怪的一个......我正在运行带有 iOS 6.0.1 的 iPad 3，如果我重新安装配置文件和应用程序，它一切正常。

# php - 压缩 PHP 查询

> ID：13289866
> 
> 赞同：3
> 
> 时间：2012-11-08T13:30:12.410
> 
> 标签：php

我有一段代码，我怀疑它可以以更有效的方式编写，但我对一些 PHP 查询仍然有点生疏。

有没有更好的方法来编写以下查询：

```
<?php 
if(qtrans_getLanguage()=='en'): echo 'Latest News'; endif;
if(qtrans_getLanguage()=='it'): echo 'Ultime notizie'; endif; 
if(qtrans_getLanguage()=='de'): echo 'Aktuelle Nachrichten'; endif; 
if(qtrans_getLanguage()=='zh'): echo '最新消息'; endif;
if(qtrans_getLanguage()=='es'): echo 'Últimas noticias'; endif;
if(qtrans_getLanguage()=='fr'): echo 'Dernières nouvelles'; endif; 
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T13:32:16.790

使用[查找表](http://en.wikipedia.org/wiki/Lookup_table)：

```
$table = array(
   'en' => 'Latest News',
   'it' => 'Ultime notizie',
   ....
);

echo $table[qtrans_getLanguage()]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:34:24.057

您可以使用语言映射。看起来您正在尝试模拟[`i18n`](http://en.wikipedia.org/wiki/Internationalization_and_localization)，但通常您会看到语言文件定义，例如：

```
// lang.php
$LANG = array();
include_once('lang/english.php');
include_once('lang/french.php');

// lang/english.php
$LANG['en'] = array();
$lang['en']['LATEST_NEWS'] = 'Latests News';

// lang/french.php
$LANG['fr'] = array();
$lang['fr']['LATEST_NEWS'] = 'Dernières nouvelles';

// ... etc. 
```

然后您可以在代码中使用以下内容：

```
<?= $LANG[qtrans_getLanguage()]['LATEST_NEWS']; ?> 
```

* * *

或者，你可以让它变得*非常*简单，只包含你需要的语言文件，然后将你的常量保持在最低限度：

```
// lang/en.php
$LANG['LATEST_NEWS'] = 'Latest News'; 
```

然后在你的标题中：

```
include('lang/' . qtrans_getLanguage() . '.php');

<?= $LANG['LATEST_NEWS']; ?> 
```

# php - PHPEXCEL 行布局

> ID：13289869
> 
> 赞同：0
> 
> 时间：2012-11-08T13:30:17.810
> 
> 标签：php, mysql, phpexcel

我想使用 PHPEXCEL 以以下格式写入 csv 文件。以粗体显示的班级，每个班级组后面都有一个空格。

![想要的格式](../Images/73d23009a043d7ab9fad8524ec31fc64.png)

但我一直无法找到一种方法来做到这一点。

这是我能做的。

![我有的格式](../Images/80a93a00fc1ca3eda43983e404eceef4.png)

我从 sql 生成数据并循环思考。这是我的代码

```
$sql="SELECT * FROM table ORDER BY typeclass";
$query=mysql_query($sql);

$check='';
$i=1;
while($row=mysql_fetch_assoc($query))
{       
    if($row['class']!=$check)
    {
        $objPHPExcel->getActiveSheet()->setCellValue('A'.$i,$row['Class']);
        $check=$row['class'];
    }

    $objPHPExcel->getActiveSheet()->setCellValue('B' .$i,$row['Name']);
    $objPHPExcel->getActiveSheet()->setCellValue('C' .$i,$row['score']);

    $i++;                   
} 
```

谁能帮我获得所需的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:53:57.960

如何格式化单元格粗体：

```
$styleArray = array('font' => array('bold' => true));

$objPHPExcel->getActiveSheet()->getStyle('A1')->applyFromArray($styleArray); 
```

您可以在插入类名后插入一个新行。

```
 if($row['class']!=$check)
 {
        $objPHPExcel->getActiveSheet()->setCellValue('A'.$i,$row['Class']);
        $check=$row['class'];

        // Merge the cells with the class name
        $objPHPExcel->getActiveSheet()->mergeCells('A'.$i.':B'.$i);

        $i++; // Next Row
 } 
```

然后您可以将名称和分数放入 A 和 B 列：

```
$objPHPExcel->getActiveSheet()->setCellValue('A' .$i,$row['Name']);
$objPHPExcel->getActiveSheet()->setCellValue('B' .$i,$row['score']); 
```

这应该可以解决所有问题。对于使用 PHPEXCEL 的更多问题，您可以通过电子邮件与我联系。

顺便说一句，可怜的西蒙:(

# html - 使用 CSS3 / HTML5 在网页中弹出球体

> ID：13289871
> 
> 赞同：0
> 
> 时间：2012-11-08T13:30:22.753
> 
> 标签：html, css

我正在设计一个 Web 应用程序，在其登录页面中，我想按照以下（粗略的）绘制表示中给出的顺序 1 -> 2 -> 3 -> 4 -> 5 弹出填充球体。

![在此处输入图像描述](../Images/ba69c98a21a47a031d608e94b26f1177.png)

我之前只使用过纯 HTML 和很少的 CSS。所以我对 HTML5 和 CSS3 很陌生。你们的任何帮助将不胜感激。

谢谢， EG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:49:42.247

看到这个[解决方案](http://jsfiddle.net/BwBzn/1/)

在 Firefox 和 chrome 中测试：

在你的 CSS 中使用转换延迟

```
-webkit-transition-delay: 0.5s;
-moz-transition-delay: 0.5s; 
```

有关更多信息，请参阅此[链接](http://www.w3schools.com/css3/css3_transitions.asp)：

# java - Java 使用样本创建波形

> ID：13289881
> 
> 赞同：0
> 
> 时间：2012-11-08T13:31:05.143
> 
> 标签：java, arrays, audio, bytearray, waveform

我已将声音文件加载到字节数组中。我对接下来必须做什么来获取信息以绘制波形点感到困惑。根据我在网上找到的内容，我必须创建另一个数组？有人可以向我解释这将如何工作，因为我不太了解如何收集样本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:19:43.727

样本是根据文件格式收集的。可以说，您的音频格式是 8 位单声道音频文件。

这是最简单的情况。您可以遍历您的 byte[] 并将存储的值绘制为幅度。

当您的文件是 16 位音频文件时，每个样本包含 2 个字节，因此您必须查看每个样本的两个字节。您可以通过调用以下方法来执行此操作：

```
private int getSixteenBitSample(int high, int low) {
    return (high << 8) + (low & 0x00ff);
} 
```

它将为每个样本连接 bytearray 的第一个和第二个字节。所以你的循环看起来像这样：

```
int sampleArray[] = new int[numSamples];

for(int i = 0, j=0;i < bytearray.length;)
{
    int iLow = bytearray[i];
    i++;
    int iHigh = bytearray[i];
    i++;

    sampleArray[j] = getSixteenBitSample(iHigh, iLow);
    j++;
} 
```

第三种情况可能是，您的文件是 16 位立体声音频文件。在这种情况下，每个样本都有两个字节，并且在每个字节之后通道都会改变。

例如：

```
First read sample 1 from byte 0 and byte 1\. -> First sample of channel 1
Second read sample 2 from byte 2 and byte 3 -> First sample of channel 2
Third read sample 3 from byte 4 and byte 5 -> Second sample of channel 1
Forth read sample 4 from byte 6 and byte 7 -> Second sample of channel 2 
```

有关进一步和更详细的描述，请查看[此页面](http://book.javanb.com/swing-hacks/swinghacks-chp-10-sect-7.html)

# perl - 用模具清理

> ID：13289882
> 
> 赞同：1
> 
> 时间：2012-11-08T13:31:07.197
> 
> 标签：perl

我想知道是否有任何方法可以使用 die 进行一些清理。例如，如果我创建了一些文件，但如果程序遇到需要终止的情况，我希望将它们删除。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T13:35:47.457

`END`即使程序 s.blocks 也会被执行`die`。

```
use File::Temp qw( tempfile );

# create "things"
my ($fh, $filename) = tempfile();

# die because of a problem
die ('a problem occured');

# clean up when dying
END { unlink $filename; } 
```

如果您只想`die`在正常退出时而不是在正常退出时执行某些操作，则可以使用`%SIG`- 请注意处理程序*替换*`die`了您必须自己调用的正常行为：

```
$SIG{__DIE__} = sub {
    unlink $filename;
    CORE::die @_;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T13:39:08.593

您可能正在寻找一个 END 块（请参阅[perlsub](https://metacpan.org/module/perlsub)）。但是，该主题还有许多其他变体。例如，[Guard](https://metacpan.org/module/Guard)，它将允许清理退出范围（无论是通过 return、die 还是 goto），或者只是使用 DESTROY 方法创建您自己的对象，将您的清理工作保留在该 DESTROY 方法中。

在这种特定情况下，您可能还对[File::Remove](https://metacpan.org/module/File::Remove) ::clean 感兴趣 - 尽管它针对测试文件，但它也可能解决此特定问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:32:04.673

这个主题的另一个变体是`try`/`finally`块，例如由 给出`Try::Tiny`：

```
use Try::Tiny;

my ($fh, $filename) = tempfile();
try {
    some code here...;
}
finally {
    unlink $filename;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T16:02:23.090

如果这些是临时文件，无论您是否死亡，都希望在完成后删除，请使用[File::Temp](http://p3rl.org/File%3a%3aTemp)。

# datetime - 文件帮助导入日期时间

> ID：13289883
> 
> 赞同：0
> 
> 时间：2012-11-08T13:31:07.527
> 
> 标签：datetime, csv, filehelpers

我正在尝试使用 FileHelps 导入 csv。导入时我需要日期为 mmddyyyy 格式，但默认为 ddmmyyyy。我看到你在 c# 中使用的位置

```
[FieldConverter(ConverterKind.Date, "MMddyyyy" )] 
Public Property BeginningDate as datetime 
```

但是，这在 vb.net 中不起作用，我尝试过的转换器也无济于事。希望有人能告诉我如何隐藏它。谢谢香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:05:49.470

找到了答案。

```
 <FieldConverter(ConverterKind.Date, "MMddyyyy")> _
    Public mBeginningDate As DateTime

    Public Property BeginningDate As DateTime
        Get
            Return mBeginningDate
        End Get
        Set(pValue As DateTime)
            mBeginningDate = pValue
        End Set
    End Property 
```

谢谢香农

# macos - NPAPI插件在mac10.8上开发

> ID：13289885
> 
> 赞同：1
> 
> 时间：2012-11-08T13:31:12.927
> 
> 标签：macos, plugins, npapi

我有一些问题，我用xcode在mac10.8上写了一个npapi插件，我想在插件上画图但是当我通过NPP_SetWindow(NPP instance, NPWindow* pNPWindow)得到pNPWindow->window指针时；我发现 nNPWindow－>window 是 NULL ，我必须要找到问题，但我不能，有人可以帮助我。对不起，我的英语太差了。</p>

代码是这样的，

```
 NPError NPP_New(NPMIMEType pluginType, NPP instance, uint16_t mode, int16_t argc, char*     argn[], char* argv[], NPSavedData* saved)
    {
        if(instance == NULL)
            return NPERR_INVALID_INSTANCE_ERROR;

        CPlugin *plugin = new CPlugin(instance);
        if(plugin == NULL)
            return NPERR_OUT_OF_MEMORY_ERROR;
        instance->pdata = (void *)plugin;

        NPBool supportsCG = false;
        NPError err;
        err = browser->getvalue(instance, NPNVsupportsCoreGraphicsBool,&supportsCG);

        if (err == NPERR_NO_ERROR && supportsCG)
             browser->setvalue(instance,NPPVpluginDrawingModel,(void*)NPDrawingModelCoreGraphics);

        return NPERR_NO_ERROR;
    }

    NPError NPP_SetWindow(NPP instance, NPWindow* pNPWindow)
   { 
        if(instance == NULL)
            return NPERR_INVALID_INSTANCE_ERROR;
        if(pNPWindow == NULL)
            return NPERR_GENERIC_ERROR;

        if(pNPWindow->window)
            writelog("window != NULL");

        if(pNPWindow->window == NULL)  ／／this is he problem pNPWindow->window always NULL
            writelog("window == NULL");

        return NPERR_NO_ERROR;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:14:31.700

您要在 Mac 10.8 上使用的任何东西都不支持碳事件模型，因此 window 将始终为 NULL。假设您尝试使用 CoreGraphics 绘图模型，当触发事件进行绘图时，您将获得 CGContextRef。

有关 Cocoa 事件模型的更多信息，请参阅[https://wiki.mozilla.org/NPAPI:CocoaEventModel](https://wiki.mozilla.org/NPAPI:CocoaEventModel)。您拥有的另一个选项是[CoreAnimation](https://wiki.mozilla.org/NPAPI%3aCoreAnimationDrawingModel)模型（在 firefox 和 chrome 上使用[InvalidatingCoreAnimation模型）](https://wiki.mozilla.org/NPAPI%3aInvalidatingCoreAnimation)

你可能想看看[FireBreath](http://www.firebreath.org)，它适用于 10.8 并为你抽象了这些东西的所有复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:44:08.343

NPP_SetWindow (NPP npp, NPWindow* pNPWindow)

对于许多人来说，这将是真正有趣的开始——调用这个函数来告诉插件他们在哪个窗口中。来自 Gecko SDK (npapi.h)：

```
typedef struct _NPWindow
{
  void* window;  /* Platform specific window handle */
             /* OS/2: x - Position of bottom left corner  */
             /* OS/2: y - relative to visible netscape window */
  int32 x;       /* Position of top left corner relative */
  int32 y;       /* to a netscape page.                 */
  uint32 width;  /* Maximum window size */
  uint32 height;
  NPRect clipRect; /* Clipping rectangle in port coordinates */
               /* Used by MAC only.           */
  void * ws_info; /* Platform-dependent additonal data, linux specific */
  NPWindowType type; /* Is this a window or a drawable? */
} NPWindow; 
```

每次调用都会传入一个指向该结构的指针。在 Windows 上，“void* 窗口”将取消对 HWND 的引用。在其他平台上，它同样会被取消引用为适当的类型。

请注意，再次 NPP npp 是第一个参数。除了 NPP_New 之外的所有 NPP 函数都是这种情况，其中也传入了 mimetype。由于我们创建了一个 PluginInstance 对象并将其分配给 NPP_New 中的 npp->pdata，因此我们需要创建一个小的存根函数来将我们的 NPP_New 转发到该对象上的方法，如下所示：

// 每当窗口改变时由浏览器调用，包括设置或销毁

```
NPErrorNPP_SetWindow (NPP npp, NPWindow* pNPWindow)
{
    if (npp == NULL)
         return NPERR_INVALID_INSTANCE_ERROR;
    else if (npp->pdata == NULL)
        return NPERR_GENERIC_ERROR;

    PluginInstance *inst = (PluginInstance *)npp->pdata;
    return inst->NpapiSetWindow(pNPWindow);
} 
```

在 Windows 上，当调用 SetWindow 时，我们需要保存 HWND 并对窗口进行子类化，以便我们可以获得自己的窗口事件过程。

NPError PluginInstance::NpapiSetWindow (NPWindow* pNPWindow) { NPError rv = NPERR_NO_ERROR;

```
if(pNPWindow == NULL)
    return NPERR_GENERIC_ERROR;

// window just created; in initWindow, set initialized to true
if(!this->initialized) {
    if(!this->initWindow(pNPWindow)) {
        return NPERR_MODULE_LOAD_FAILED_ERROR;
    }
}

// Window was already created; just pass on the updates
this->updateWindow(pNPWindow);

return rv;
} 
```

使用这些函数，我们会在第一次设置窗口时在一个函数中收到通知，而在每次进行更新时调用另一个函数。

# jquery - 如何在 Nokogiri 中使用 :eq 选择器

> ID：13289886
> 
> 赞同：3
> 
> 时间：2012-11-08T13:31:13.910
> 
> 标签：jquery, ruby, nokogiri

在 jQuery 中，您可以使用`:eq`选择器将匹配元素集减少为具有给定索引的元素。

Nokogiri怎么能做同样的事情呢？我找了很久，但找不到方法。

看这个例子：

```
require 'nokogiri'

html ='
<div>
<p>foo</p></div>
<span>
<p>bar</p>
<p>foobar</p></span>
'

doc = Nokogiri::HTML(html)

p doc.search('p:eq(0)')
# -> [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:19:43.127

我是这样钓鱼的：

```
require 'nokogiri'

html ='
<p>foo</p>
<p>bar</p>
<p>foobar</p>
'

doc = Nokogiri::HTML(html)

doc.search('//p[3]')
=> [#<Nokogiri::XML::Element:0x811058ac name="p" children=[#<Nokogiri::XML::Text:0x81104f74 "foobar">]>] 
```

Nokogiri 返回了一个 NodeSet，一个节点集合，其行为类似于一个数组。我可以使用搜索`at`而不是`search`仅检索节点：

```
doc.at('//p[3]').text
=> "foobar" 
```

或者它可以返回 NodeSet，您可以让 Ruby 从中提取特定元素：

```
doc.search('//p')[2].text
=> "foobar" 
```

* * *

```
p doc.search('p:eq(0)') 
```

`'p:eq(0)'`不是 CSS，也不是 XPath。这是一个添加到 JavaScript 中的 jQuery 选择器。您不能将 jQuery 或 JavaScript 与 Nokogiri 作为访问器一起使用，它必须是 CSS 或 XPath。

* * *

> 你的例子甚至没有做我想要的。[i] 运算符相当于第 n 个孩子！

根据[jQuery 的文档`:eq`](http://api.jquery.com/eq/)：

> 描述：将匹配元素集减少到指定索引处的元素。

`//p[3]`，或者使用`search('p')[2]`让 Ruby 对 NodeSet 进行切片，将返回一个特定的节点。在我的示例中，我正在检索第三个`<p>`标签的内容，它相当于 jQuery 的`:eq(2)`.

使用与之前相同的示例：

```
require 'nokogiri'

html ='
<p>foo</p>
<p>bar</p>
<p>foobar</p>
'

doc = Nokogiri::HTML(html)

doc.search('//p[0]').text
doc.search('//p[1]').text
doc.search('//p[2]').text
doc.search('//p[3]').text

doc.search('//p')[0].text
doc.search('//p')[1].text
doc.search('//p')[2].text
doc.search('//p')[3].text 
```

将其转储到 IRB 我看到：

```
irb(main):011:0* doc.search('//p[0]').text # => ""
irb(main):012:0> doc.search('//p[1]').text # => "foo"
irb(main):013:0> doc.search('//p[2]').text # => "bar"
irb(main):014:0> doc.search('//p[3]').text # => "foobar"

irb(main):015:0> doc.search('//p')[0].text # => "foo"
irb(main):016:0> doc.search('//p')[1].text # => "bar"
irb(main):017:0> doc.search('//p')[2].text # => "foobar"
irb(main):018:0> doc.search('//p')[3].text 
NoMethodError: undefined method `text' for nil:NilClass
from (irb):18 
```

Using`//p[1]`相当于将下面的 HTML 与 JavaScript 和 jQuery 一起使用，将其加载到浏览器中，然后查看显示“foo”的警报：

```
<html>
  <head>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  </head>
  <body>
    <p>foo</p>
    <p>bar</p>
    <p>foobar</p>
    <script>
$().ready(function(){
    alert($('p:eq(0)').text());
});
    </script>
  </body>
</html> 
```

因此，在 XPath 或Ruby 中`//p`使用slice相当于在 JavaScript 中。但是，由于 Nokogiri 不使用 JavaScript 或 jQuery，您必须使用 CSS 或 XPath。`[1]``[0]``:eq(0)`

* * *

jQuery 的选择器现在可用，使这样的事情成为可能：

```
require 'nokogiri'

html = '
<html>
  <body>
    <p>foo</p>
    this text
    <p>bar</p>
  </body>
</html>
'

doc = Nokogiri::HTML(html)
doc.at('p:contains("foo")').next_sibling.text.strip
=> "this text" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:06:21.260

似乎减少匹配节点集的唯一方法是使用 Ruby 和这样的数组方法：

```
doc = Nokogiri ... 
doc.search("table")[2].search("...") 
```

Nokogiri 的 XPath 和它的 CSS 选择器都不支持等同于 jQuery`:eq`运算符的功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T13:38:21.487

尝试使用 [`:nth-child(N)`](http://www.w3schools.com/cssref/sel_nth-child.asp)（第一个元素是用 N = 1 找到的）

# chef-infra - 厨师食谱 - 资源中不可用的模块方法

> ID：13289891
> 
> 赞同：6
> 
> 时间：2012-11-08T13:31:32.267
> 
> 标签：chef-infra

我通过一个模块扩展了配方类以提供一些属性，这些属性使我能够全局访问我的路径，这些路径是动态构造的。例子：

```
module Variables
  def user
    "user_name"
  end
  def user_home
    "/home/#{node['user']}"
  end
end

class Chef::Recipe
  include Variables
end 
```

问题是，在资源块中这些方法不可用。

```
bash "do_something_with_property" do
  user user
  code "somecommand #{user_home}"
end 
```

NoMethodError：Chef::Resource::Bash 的未定义方法“user_home”

奇怪的行为是，用户属性工作正常，但代码块中使用的 a 属性不起作用。

在此之后，我还通过这样做将模块包含到所有资源中：

```
class Chef::Resource
  include Variables
end 
```

现在，我的 user_home 属性在资源块中的行为与在“外部”使用时不同，这意味着：

```
directory "#{user_home}/new_dir" do
  action :create
end 
```

创建 /home/user_name/new_dir

```
bash "create_dir" do
   code "mkdir #{user_home}/new_dir"
end 
```

结果 /home//new_dir

我已经用一个小测试脚本对此进行了测试，一切正常。

```
module MyModule
def module_method
    puts "blablalba"
end
end

class A
def block_method (&block)
    block.call
end
end

class B
include MyModule

def doit
    a = A.new
    a.block_method { module_method }
end
end

B.new.doit 
```

所以对我来说，这似乎是厨师特有的问题。

谁能解释一下，为什么会这样？

是否有更好的解决方案来全局访问动态构建的路径和属性？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-26T19:20:21.713

我已经成功地将方法注入资源范围，如下所示：

`libraries/helper.rb`：

```
module MyCookbook
  module Helper
    def my_method
      "foobar"
    end
  end
end

Chef::Resource.send(:include, MyCookbook::Helper) 
```

`recipes/default.rb`：

```
file 'foo' do
  content my_method
end 
```

这里的关键是`Chef::Resource.send(:include, ...)`将您的模块直接注入到`Chef::Resource`类中，使您的模块方法可用于所有资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:40:26.597

你能把你的路径作为属性吗？

是在环境层面还是节点层面？

如果我们这样做是为了构建安装说明，我们会对食谱属性做类似的事情。在这种情况下，我们从数据包构建安装说明

```
default['splunk']['server'] = Chef::DataBagItem.load('Splunk', 'Install')["Server"]
default['splunk']['install_args'] = Chef::DataBagItem.load('Splunk', 'Install')["Arguments"]

default['splunk']['installcommands'] = "RECEIVING_INDEXER=\"#{default['splunk']['server']}\" #{default['splunk']['install_args']} /quiet" 
```

尽管如此，我确实认为资源类的扩展应该让你很好。当您说在资源内部与外部表现不同时。目录也是一种资源，因此在这种情况下，它在两个资源之间的行为不同

[http://wiki.opscode.com/display/chef/Resources#Resources-Directory](http://wiki.opscode.com/display/chef/Resources#Resources-Directory)

所以也许这是导致行为不一致的资源之一的问题？

# jpa-2.0 - JPA 标准生成器

> ID：13289894
> 
> 赞同：2
> 
> 时间：2012-11-08T13:31:37.463
> 
> 标签：jpa-2.0, jpql

目前，我正在做一些 JPA 的东西，但有一些问题，如下所述**：**

**表结构-**

**`Id(Integer) , StatusType(String) , CreationTime(TimeStamp)`**

我想提取**StatusType**，**Count(StatusType)**和**CreationTime[GROUP BY]**`(Cast in Date instead of TimeStamp)`

如果 CreationTime 在 TimeStamp 中分组，则由于时间戳的唯一性，不会进行分组

我有一个 sql 查询可以解决我的目的 -**`Select StatusType , Count(*) , Date(CreationTime) from Table Group By Date(CreationTime)`**

它通过 CreationTime 将 Timestamp 转换为 Date & group，但我希望它与**CriteriaBuilder** API 或至少在**JPQL Query**一起使用，以便它适用于所有数据库。有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:59:14.233

您可以使用以下方法将时间戳转换为具有“yyyyMMdd”格式的整数：

```
year(CreateTime) * 10000 + month(CreateTime) * 100 + day(CreateTime) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:18:37.843

是的，`timeStamp`可以转换为`Date`使用 JPQL。

我认为[这篇博文](http://solitarygeek.com/java/extracting-only-date-part-of-a-date-time-column-using-jpa-hibernate)将解决您的问题。

# php - 免费源代码 - Twitter 数据库服务器：get_tweets.php

> ID：13289895
> 
> 赞同：-2
> 
> 时间：2012-11-08T13:31:37.607
> 
> 标签：php

我有这个 PHP 代码可以从推文数据库服务器获取推文，但我不知道如何执行。

我做了以下步骤，没有任何反应。

1.  我安装了 WAMPserver。
2.  我在 Notepad++ 中保存了这个 PHP 代码
3.  我在Firefox浏览器中启动它

任何人都可以尝试代码并让我知道我错过了什么步骤吗？

编码：

[http://140dev.com/free-twitter-api-source-code-library/twitter-database-server/get-tweets-php/](http://140dev.com/free-twitter-api-source-code-library/twitter-database-server/get-tweets-php/)

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:39:46.523

我不确定您是否熟悉 WAMP，但使用它您需要确保您的 php 文件位于 Wamp 的根目录中。

（在这种情况下是 WAMP 的“www”目录）。

我是一个 mac 用户，所以我对 Wamp 的经验不是很丰富，但我希望这对你有所帮助:-)

# php - 使用 cookie 存储搜索选择是个好主意吗？

> ID：13289896
> 
> 赞同：1
> 
> 时间：2012-11-08T13:31:39.037
> 
> 标签：php

我有一个页面，用户在其中输入搜索词，然后转发到另一个页面并根据此 cookie 内容运行查询。我只是想知道这样做是否是一种好习惯？我知道我可以使用 method="post (or get)" 但我需要信息在多个页面和查询中保持一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:34:33.050

cookie 将导致数据在用户的整个会话中持续存在。

如果他们在不同的窗口中运行两次搜索，那么他们将继续覆盖彼此的数据。

使用查询字符串，并将数据复制到之前提交的链接/表单中。（确保应用适当的转义来防止 XSS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:34:55.073

如果您需要在服务器端使用同一服务器的多个页面上的数据[Sessions](http://de1.php.net/manual/en/book.session.php)。

```
// save data
session_start();
$_SESSION['query'] = $query;

// next page, use data
session_start();
// do something with $_SESSION['query'] 
```

# c# - 一个使用两个线程的简单 C# 游戏循环，这样好吗？

> ID：13289899
> 
> 赞同：1
> 
> 时间：2012-11-08T13:31:46.963
> 
> 标签：c#, multithreading, gdi+, game-loop

我正在使用 C# 中的 GDI+ 创建一个简单的游戏。

首先我需要一个游戏循环和一个渲染循环。我决定将它们分成两个单独的线程。它似乎工作，并且运行得非常快，但我在这里问的原因是因为我看到人们在他们的游戏循环中使用计时器来让它们以特定的帧速率运行。

这显然具有优势，您可以确定演员移动的速度。但我的游戏循环只是尽可能快地运行，就像 Unity3D 中的更新功能一样。现在为了确保演员总是以相同的速度移动，我所要做的就是将移动速度乘以帧增量时间（每帧之间的时间）。

我的渲染循环也尽可能快地运行。这是一个很好的游戏循环，为什么或为什么不？

```
// Constructor
public FormDisplay()
{
    // Create a thread object, passing in the GameLoop method
    var gameThread = new Thread(this.GameLoop);

    // Start the game thread
    gameThread.Start();

    // Create a thread object, passing in the GameLoop method
    var renderThread = new Thread(this.RenderLoop);

    // Start the render thread
    renderThread.Start();
}

private void GameLoop()
{
    while (true)
    {
        // TODO: Insert Game Logic
    }
}

private void RenderLoop()
{
    while (true)
    {
        // TODO: Insert Render Logic
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:53:09.857

在不了解库本身（或[.NET](http://en.wikipedia.org/wiki/.NET_Framework) GUI）如何使用线程的情况下直接管理自己的线程的想法似乎是个坏主意。

我确定您将需要线程，但我不确定您是否需要自己显式管理它。让底层库来处理这个问题，并将工作推送到主 UI 线程/从主 UI 线程推送工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:48:48.173

您应该将屏幕刷新率视为限制因素。如果你的屏幕每秒只更新 100 次，那么每秒移动你的演员 300 次是没有意义的。

同样，当显示器刷新率仅为 100 Hz 时，每秒渲染屏幕 300 次可能会显示撕裂。当缓冲区出现在​​屏幕上时更新帧缓冲区时会发生这种情况，因此演员的上半部分出现在旧位置，下半部分出现在新位置。

一篇关于减少闪烁的好文章是 Stack Overflow 问题*[Reduce flicker with GDI+ and C++](https://stackoverflow.com/questions/197948/reduce-flicker-with-gdi-and-c)*。

理想情况下，作为一般的游戏循环，您的游戏线程应该处理并构建一个列表以传递给渲染线程以进行下一次屏幕刷新（也就是说，您总是在处理下一个显示的帧）。然后两个线程都等待下一帧。这当然意味着您需要知道何时发生这种情况——我认为您无法使用 GDI+ 进行渲染。

# c++ - 使用 2D 数组进行 C++ 编码

> ID：13289906
> 
> 赞同：0
> 
> 时间：2012-11-08T13:32:09.450
> 
> 标签：c++

我正在尝试学习 C++ 并尝试为类似以下结构的简单哈希表编写代码：

```
array[0][0] array[0][1] array[0][2]
key 1        value 1      value 2

array[1][0] array[1][1] 
key 2        value 3     

array[2][0] array[2][1] array[2][2]
key 3        value 4      value 5 
```

表示动态数组的数组。现在，下面是我的代码：

```
#include<iostream>
#include<conio.h>

using namespace std;

 int ele [10] ;
 int** arrays = new int*[10] ;

class HashTable
{
   public:

    HashTable()
    {    
         for(int i = 0 ; i < 10 ; i++)
         ele[i] = - 1 ;     // element array stores the number of elements in column of each row
    }

    void put(int key, int value){
         if(ele[key] == -1){
         arrays[key] = new int[1];
         arrays[key][0] = value ;  // initialize 2nd dimention
         ele[key] = 0 ; 
         }
         else{
              int num = ele[key] ;
              int temp[num + 1] ;
              for(int i = 0 ; i < num ; i++)
              temp [i] = arrays[key][i] ;
              temp[num+1] = value ;
              arrays[key] = new int[num + 1] ;
              for(int i = 0 ; i < num+1 ; i++)       // take all the elements in an temporary array and store it back
              arrays[key][i] = temp [i] ;
              ele[key] = num + 1 ;
              }

         }

};

main()
{

HashTable object;

 object.put(0 , 100);
 object.put(1 , 200);
 object.put(3 , 300);
 object.put(3 , 3000);
 object.put(3 , 30000);
 object.put(5 , 500);
 object.put(5 , 5000);
 object.put(5 , 50000);
 object.put(5 , 50); 

for (int i = 0 ; i < 10 ; i++ ){
int j = ele[i] ;

cout << j << " K ";

if(j != -1){
for (int k = -1 ; k < j ; k++ )    // print the values of corresponding keys
cout << arrays[i][k] << "  ";
}
}

 getch();
   return 0;
} 
```

它使用 put 方法将值放入自定义 HashTable。

任何人都可以帮助我为什么上面的代码在尝试检索相应键的值时给出错误的输出值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:50:05.010

这是行不通的：

```
for (int k = -1 ; k < j ; k++ )
    cout << arrays[i][k] << "  "; 
```

您不能有带有负索引的数组。当你进入循环时，你有`k = -1`所以你尝试访问`arrays[i][-1]`，这是行不通的。

**其他建议：**

*   对象`arrays`和`ele`应该是你的类的**成员**，并在其中声明（作为私有成员）
*   On the line where you write `arrays[key] = new int[num + 1]`, you forget to call `delete` on the previous object. This will cause a **memory leak**.
*   You should print your `arrays` using a method inside your function (like the `put` method) and then just call it using `object.print()` (if you named it `print`)
*   Testing `if(j != -1)` before the loop `for (int k = -1; k < j; k++)` is redundant: if `j == -1` you will never go into the loop anyway.

# networking - 如果我设置了 OpenVPN UDP 连接，我可以使用 TCP 吗？

> ID：13289916
> 
> 赞同：1
> 
> 时间：2012-11-08T13:32:40.507
> 
> 标签：networking, tcp, udp, openvpn

如果我通过 udp（proto udp）建立了 openvpn 连接，我可以在其中使用 tcp（tcp 以某种方式转换为 udp），还是只使用 udp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:35:18.657

简而言之：是的，您可以通过通过 UDP 传输的 VPN 隧道发送 TCP。事实上，无论您选择何种传输方式，您都可以通过 OpenVPN 隧道支持任何协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:35:40.313

您可以使用任何您喜欢的协议，甚至是原始 IP。OpenVPN 模拟一个成熟的网络设备（在某种程度上——它是基于以太网还是基于 IP 层取决于配置），它的行为与任何其他网络适配器一样。因此，您当然可以在其中使用 TCP 和 UDP。

通过 OpenVPN 设备发送的包被加密并通过 OpenVPN 使用的 UDP“连接”传递到远程端，在那里它们被解密并传递到路由以将它们转发到它们的最终目的地（可能是远程本身） .

# css - CSS 和图像的根路径

> ID：13289920
> 
> 赞同：0
> 
> 时间：2012-11-08T13:32:46.243
> 
> 标签：css, cakephp-1.3

我正在尝试在 WAMPserver 上配置 CakePHP 1.3。

问题是我的 CSS 在`localhost://dreamdeal/css/generic.css`.

如何设置我的根路径`webroot/index.php`？

我将此路径设置为

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
        define('CAKE_CORE_INCLUDE_PATH', 'C:' . DS . 'wamp' . DS . 'www' . DS . 'dreamdeal' );
} 
```

但这并没有解决错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:37:17.027

请查看CakePHP[的文件夹结构文档。](http://book.cakephp.org/1.3/en/view/899/CakePHP-Folder-Structure)如果您想使用 CSS，则该文件夹需要位于 Cake`webroot/`文件夹中。它不应该在您的`localhost`根路径上。

# c# - 显示的表属性

> ID：13289921
> 
> 赞同：1
> 
> 时间：2012-11-08T13:32:47.170
> 
> 标签：c#, entity-framework

我在我的项目中使用实体框架。

```
[Table("GetInfo")]
public class InDetails : IEntityWithRelationships
{
    [Required]
    [Key]
    [Display(Name = "Primary Key", Description = "Primary Key")]
    [Editable(false)]
    [DatabaseGenerated(System.ComponentModel.DataAnnotations.DatabaseGeneratedOption.Identity)]
    public long Pkey { get; set; }

    [Required]
    [Display(Name = "Facility ID", Description = "Facility ID is located at")]
    public int FacilityID { get; set; }

    public String Photo { get; set; } 
```

您会看到有些有 [Required]/[Displayed]，但有些没有。有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:36:50.437

在 的情况下，不需要没有属性的那些`[Required]`。在这种情况下，会`[Display(Name =)]`告诉使用 UI 层应该显示的名称和描述。对于没有属性的`[Display]`属性，显示的是属性名称。

# validation - zend framework 2 一些验证器保留在 Zend\I18n\Validator 包中

> ID：13289922
> 
> 赞同：1
> 
> 时间：2012-11-08T13:32:47.790
> 
> 标签：validation, zend-framework2, i18n-gem

我观察到一些验证器（Alnum、Alpha、Float、Int 和 PostCode）被本地化为“Zend\I18n\Validator”包，而不是 zend 文档解释的“Zend\Validator”。

有人知道，因为它是如此。

我可以毫无问题地使用这些验证器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:23:03.017

是的，您可以毫无问题地使用它们。您可能必须更改您的“使用”语句，或者您可以使用它们的完整命名空间来引用它们。在我当前的项目中，我使用 AnnotationBuilder 来验证包含使用 @Annotation\Validator() 语法的浮点数的表单。它工作得很好。

我遇到的唯一问题是我需要在我的服务器上安装/启用 php-intl 扩展。

# asp.net - 在列表中获取json字节数组

> ID：13289923
> 
> 赞同：0
> 
> 时间：2012-11-08T13:32:49.570
> 
> 标签：asp.net, web-services, bytearray, arrays

反序列化时，我在 json Web 服务中得到了字节数组的空值。但是从浏览器调用时它返回字节数组。C#代码：

```
var url = re.DownloadString("XXXX/ListService.svc/lstFooddtl/1/21");

 var a = JsonConvert.DeserializeObject<FooddtlResult>(url); 
```

在 ai 中 food_photo 的值为空...当我反序列化... **c# 类：**

```
public class photo
    {
        public byte[] food_photo { get; set; }

    }
public class Food
{
    public int food_id { get; set; }
    public string food_name { get; set; }
    public photo[] food_photo { get; set; }
    public string unitcost { get; set; }
}
public class FooddtlResult
{
    public Food[] Result { get; set; }
}
{"Result":[{"food_id":"61","food_name":"Idli","food_photo":[255,216,255,224,0,....217],"unitcost":null}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:35:28.283

您的模型与 JSON 不匹配。为了正确的反序列化，将您的`Food`课程更改为

```
public class Food
{
    public int food_id { get; set; }
    public string food_name { get; set; }
    public byte[] food_photo { get; set; }
    public string unitcost { get; set; }
} 
```

并删除`photo`课程。

否则，如果要保留模型结构，那么正确的 JSON 应该是：

```
{"Result":[{"food_id":"61","food_name":"Idli","food_photo":[{"food_photo":[255,216,255,224,0,....217]},{"food_photo":[255,...]},...],"unitcost":null}]} 
```

# highcharts - Highchart datetime x轴：显示月末日期而不是一个月的第一天

> ID：13289934
> 
> 赞同：2
> 
> 时间：2012-11-08T13:33:44.007
> 
> 标签：highcharts

在我的图表中，我尝试显示一年内的月末表现（1 月 31 日、Fev 29 日、...、12 月 31 日）。X轴定义如下：

```
xAxis: {
    type: 'datetime',
        dateTimeLabelFormats: {
            month: '%b %Y'
        }
    }
} 
```

问题是刻度会自动调整为适当的单位（月）并显示该月的第一天。结果，我的第一个元素（1 月 31 日）显示在“2012 年 2 月”上方（其他元素的问题相同）。我想知道是否可以在我的 x 轴上显示月末日。任何想法？

谢谢，

[例子](http://jsfiddle.net/j8Bec/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T09:00:34.690

您可以使用刻度线应出现的位置定义自定义[`xAxis.tickPositioner`](http://api.highcharts.com/highstock#xAxis.tickPositioner)，如下所示

```
xAxis: {
    type: 'datetime',
    tickPositioner: function() {
        var ticks = [
            Date.UTC(2012, 0, 31),
            Date.UTC(2012, 2, 31),
            Date.UTC(2012, 4, 31),
            Date.UTC(2012, 6, 31),
            Date.UTC(2012, 8, 30),
            Date.UTC(2012, 10, 30)];
        //dates.info defines what to show in labels
        //apparently dateTimeLabelFormats is always ignored when specifying tickPosistioner
        ticks.info = {
            unitName: "month", //unitName: "day",
            higherRanks: {} // Omitting this would break things
        };           
        return ticks;
    }
} 
```

[自定义刻度位置 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/9B6LY/)

# java - 为什么 for/while 循环变量在循环退出后递增 1？不需要的副作用

> ID：13289937
> 
> 赞同：3
> 
> 时间：2012-11-08T13:33:49.317
> 
> 标签：java

这是代码 -

```
int i = 0;

System.out.printf( "\n%d\n\n", i );  // show variable i before loop

for( i = 0; i < 8; i++ )
{
    System.out.printf( "%d\t", i );
}

System.out.printf( "\n\n%d\n", i );   // show variable i after loop 
```

这是输出 -

> 0
> 
> 0 1 2 3 4 5 6 7
> 
> 8

当我想在 for 循环退出后使用变量 i 时，我的问题就出现了。我会假设我正在阅读 7，这是基于零的计数中的第 8 个增量，但它实际上读为 8！在循环退出时，变量 i 又增加了一个。

为了解决这个问题，我必须在循环结束时以及在任何进一步的代码中使用它之前执行类似 i-- 的操作。在我看来，这使代码更难理解。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T13:35:02.357

当`i`为 7 时，条件`i < 8`仍然满足，因此没有理由退出循环。

在循环之前声明循环变量并在之后使用它并不是很清楚。相反，请考虑使用循环语句声明循环变量。

```
int numIterations = 8;
for(int i = 0; i < numIterations; i++) {
    // ...

}
// continue doing something with numIterations, or numIterations-1 
```

如果 using`numIterations-1`真的很困扰你，你也可以改为使用`int maxCounter = 7`和使用`i <= maxCounter`作为循环不变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:35:44.473

当你说

```
for( i = 0; i < 8; i++ ) 
```

中间部分`i < 8`是**循环不变量**：只要它成立，就会有下一次迭代。因此，一旦你离开循环，那是**因为不变量不再成立**并且`i`不可能小于 8。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T13:36:46.810

如果您想要更容易阅读的内容，请执行以下操作：

```
int start = 0;
int end = 7;
System.out.printf( "\n%d\n\n", start );  

for(int i = start; i <= end; i++ )
{
    System.out.printf( "%d\t", i );
}

System.out.printf( "\n\n%d\n", end ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T13:37:40.927

循环在 时退出`i == 8`，因为循环条件说：只要 保持迭代`i < 8`。或者换一种说法：当`i >= 8`.

所以`i++`循环内的最后一个将分配`8`给`i`，退出循环。这解释了您获得的结果，并且它们符合预期。也许您错误地认为`i++`在退出循环之前没有执行最后一个。

要获得您想要的行为，请尝试这个 - 代码的意图更清楚：

```
int i = 0;
int iterations = 8;
System.out.printf( "\n%d\n\n", i );
while (i < iterations) {
    System.out.printf( "%d\t", i );
    i++;
}
System.out.printf( "\n\n%d\n", --i ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T13:39:54.587

这是正确的，否则它永远不会退出，因为`7 < 8`.

在这段代码中添加更多逻辑当然是无用的，因为您已经知道在循环结束时变量将始终相同。我认为您需要在带有条件语句的更复杂代码中使用它，因此在这种情况下您可以这样做：

```
int i = 0;

System.out.printf( "\n%d\n\n", i );  // show variable i before loop

for( i = 0; i < 8; i++ )
{
    if ( i == 3 )  // just for example
        break;
    System.out.printf( "%d\t", i );
}

System.out.printf( "\n\n%d\n", i );   // show variable i after loop 
```

这将打印：

```
0

0 1 2 3

3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T13:47:17.547

如果您知道操作顺序，这真的很简单

*   STEP_1 - 身体操作前的动作。
*   SETP_2 - 如果为真，则评估继续操作的逻辑表达式。
*   STEP_3 - 执行身体操作。
*   STEP_4 - 身体手术后的动作。

所以：

```
for(STEP_1; STEP_2; STEP_4) {
    STEP_3
} 
```

通常在第 1 步中我们初始化我们的变量，在第 4 步中我们修改它以供下一次循环评估。

```
int i = 0;

for(; i< 8; i++) {

} 
```

循环在 时中断`i == 8`，正如在循环之前声明的值保持不变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T13:38:00.210

在循环中，变量 i 递增，直到达到 8 或更多，此时条件触发离开循环。

这就是它的工作方式。

所以你有两个我能想到的选择。

循环后从变量 i 中减一。

将 if 语句放入循环中，以便当 i 等于 7 时，它会中断。

```
for (i = 0; i < 8; i++) {
  if (i == 7) break;
} 
```

另一种选择是使用 do while，如：

```
i = -1;
do {
  i++;    // increment i so that it is at the correct current value starting with zero
  // loop stuff
} while (i < 7); 
```

# javascript - 将背景颜色更改 [css] 链接到背景图像更改 [javascript]

> ID：13289938
> 
> 赞同：1
> 
> 时间：2012-11-08T13:33:51.173
> 
> 标签：javascript, css

我正在使用以下代码在页面刷新时更改背景图像

```
function changeImg(imgNumber) {
    var myImages = ["../img/background_tile.png", "../img/background_tile_blue.png", "../img/background_tile_green.png", "../img/background_tile_purple.png"]; 
    var newImgNumber =Math.floor(Math.random()*myImages.length);
    document.body.style.backgroundImage = 'url('+myImages[newImgNumber]+')';
}
window.onload=changeImg; 
```

现在我正在尝试将 CSS`background-color`更改为图像的颜色，以便在刷新页面时它不会在加载之前闪烁白色。

网站 - [http://lauramccartney.co.uk](http://lauramccartney.co.uk)

编辑-我解决了伙计们！我用这个

```
function changeImg(imgNumber) {
    var myImages = ["../img/background_tile.png", "../img/background_tile_blue.png", "../img/background_tile_green.png", "../img/background_tile_purple.png"]; 
    var myColors = ["#d1261e", "#6167e6", "#3db322", "#a12cbb"];
    var newImgNumber =Math.floor(Math.random()*myImages.length);
    document.body.style.backgroundImage = 'url('+myImages[newImgNumber]+')';
    document.body.style.backgroundColor = myColors[newImgNumber];
}
window.onload=changeImg; 
```

没有太大的区别，所以我还将css中的背景调整为无害的灰色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:40:02.507

这个怎么样 ：

不仅仅是存储`img`路径，而是将其存储为`color url('url-to-image')`，并在调用它时将其用作背景。

所以你的数组看起来像：`['color1 url(url-1)', 'color2 url(url-2)', ...]`并更改要使用的javascript`document.body.style.background = array[array-index];`

```
/*Makes background image change when refreshed*/
function changeImg(imgNumber) {
    var myImages = ["red url(../img/background_tile.png)", "blue url(../img/background_tile_blue.png)", "green url(../img/background_tile_green.png)", "orange url(../img/background_tile_purple.png)"]; 
    var newImgNumber =Math.floor(Math.random()*myImages.length);
    document.body.style.background = myImages[newImgNumber];
}
window.onload=changeImg; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:19:40.743

将样式委托给 css 类总是更好，如下所示：

主题.css：

```
.theme-1 {
    background:red url(../img/background_tile.png);
}
.theme-2 {
    background:green url(../img/background_tile_green.png);
}
.theme-3 {
    background:orange url(../img/background_tile_purple.png);
} 
```

应用主题.js：

```
/* Apply random class to body */
function setRandomTheme() {
    var styles = ["theme-1", "theme-2", "theme-3"],
        random = Math.floor(Math.random() * styles.length);
    document.body.className += ' ' + styles[random];
} 
```

如果您想立即更改背景，而不需要闪烁无样式的内容，请在结束标记`setRandomTheme`之前调用：`body`

```
<body>
    <p>La-la-la, some content</p>
    … skipped some code …
    <script type="text/javascript">setRandomTheme();</script>
</body> 
```

或者来自[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMContentLoaded)事件：

只需在 setRandomTheme 声明后将其添加到 apply-theme.js ：

```
document.addEventListener('DOMContentLoaded', function () {
    setRandomTheme(); 
}); 
```

# android - 在android中使用KSOAP连接错误的Web服务

> ID：13289942
> 
> 赞同：0
> 
> 时间：2012-11-08T13:33:55.303
> 
> 标签：android, web-services

我正在尝试使用 ksoap2 从 android 连接到 .net Web 服务，但我得到空输出为`"null°F"`;。请在下面找到日志文件并帮助我清除它。我使用来自网络服务的 KSOAP

```
package com.example.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WebService extends Activity {
       private final String NAMESPACE = "http://tempuri.org/";
       private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
       private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
       private final String METHOD_NAME = "CelsiusToFahrenheit";
    Button b;
    TextView tv;
    EditText et;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_web_service);
        et=(EditText)findViewById(R.id.editText1);
        tv=(TextView)findViewById(R.id.Result);
        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            String result=getFarenheit(et.getText().toString());
            tv.setText(result+"°F");
            }
        });
    }
    public String getFarenheit(String celsius){
        SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo celsuiusPI= new PropertyInfo();
        celsuiusPI.setName("Celsius");
        celsuiusPI.setValue(celsius);
        celsuiusPI.setType(double.class);
        request.addProperty(celsuiusPI);
        SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
        try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
            Log.i("WebService output", response.toString());
            return response.toString();

        }
        catch(Exception e){
            e.printStackTrace();
        }
        //return null;
        return null;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_web_service, menu);
        return true;
    }

} 
```

有人能说出我程序中的错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:40:20.827

空指针异常是通用的方法，您必须指定/提供更多调试信息。您的网址也可能是错误的，请尝试`?wsdl`在其末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:18:43.070

在您的 asynctask 类定义中有一个字符串输入。但是您没有将该字符串提供给您的 asynctask 类。两种方式：

1-从定义中删除字符串参数

```
public class servicecall extends AsyncTask<String,Void,String> 
```

|

到

|

```
 public class servicecall extends AsyncTask<Void,Void,String> 
```

2-给你的 asynctask 类一些字符串

```
new servicecall().execute("Some string"); 
```

# java - Servlet response.sendRedirect 编码问题

> ID：13289954
> 
> 赞同：3
> 
> 时间：2012-11-08T13:34:32.500
> 
> 标签：java, jsp, servlets, utf-8, character-encoding

所以我以一种天真的方式使用 GET 重定向我的用户：

```
response.sendRedirect("/path/index.jsp?type="+ e.getType() 
   +"&message="+ e.getMessage()); 
```

在我不得不发送消息之前，这一切正常，作为要显示给用户的实际文本。问题是消息中是否包含非 ASCII 字符。我的 .jsp 文件以 UTF-8 编码：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%> 
```

因此，“消息”中的所有非 ASCII 字符都会出现乱码。我不想将我的 JVM 默认编码设置为 UTF-8，那么我该如何解决呢？我试着用

```
response.setCharacterEncoding("UTF-8"); 
```

在重定向之前在 Servlet 上，但它不起作用。当我尝试执行时：

```
out.print(request.getCharacterEncoding()); 
```

在我的 .jsp 文件上打印“null”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T13:38:30.030

该`sendRedirect()`方法不会为您编码查询字符串。你必须自己做。

```
response.sendRedirect("/path/index.jsp?type=" + URLEncoder.encode(e.getType(), "UTF-8")
    + "&message=" + URLEncoder.encode(e.getMessage(), "UTF-8")); 
```

您可能希望将样板代码重构为采用 a`Map`左右的实用方法。

请注意，我假设服务器也配置为使用 UTF-8 解码 GET 请求 URI。您没有告诉您使用的是哪一个，但在 Tomcat 的情况下，这是向元素添加`URIEncoding="UTF-8"`属性的问题。`<Context>`

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

**与具体问题**无关**`language="java"`，已经是默认值，省略即可。使用 `contentType="text/html; charset=UTF-8"`JSP 时， 也已经是默认设置`pageEncoding="UTF-8"`，只需省略它即可。您真正需要的是`<%@ page pageEncoding="UTF-8"%>`. 请注意，这实际上与 相同`response.setCharacterEncoding("UTF-8")`，因此可以解释为什么它没有效果。唯一的`request.getCharacterEncoding()`问题是 POST 请求正文，而不是 GET 请求 URI，因此与 GET 请求无关。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:28:03.507

谢谢...当我使用**response.sendRedirect("/path/index.jsp?type=" + URLEncoder.encode(e.getType(), "UTF-8")**时，我的问题得到了解决...

当我们使用 response.sendRedirect() 时：我们应该通过 URLEncoder.encode() 函数对 URL 进行编码，然后才......它将被正确编码..

再次感谢...**

# html - JSF特立尼达tr：表css问题

> ID：13289962
> 
> 赞同：0
> 
> 时间：2012-11-08T13:35:08.633
> 
> 标签：html, css, trinidad

我正在使用 tr:table 并且我想在单元格之间添加间距，这样它们就不会彼此靠近

生成的 html 具有属性 cellSpacing = 0

`<tr:table>`标签没有这样的属性。

我该怎么做 ？

感谢，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:03:46.783

您应该创建一个具有自定义样式的[皮肤。](http://myfaces.apache.org/trinidad/devguide/skinning.html)

> Trinidad 中的皮肤是影响整个应用程序的全局样式表。您可以为整个应用程序创建一个皮肤，只要您的页面上有标签，它就会被拾取。每个组件都会自动使用皮肤描述的样式。对皮肤的任何更改都将在运行时获取，无需更改代码。皮肤基于层叠样式表 (CSS) 规范。

在您的皮肤 CSS 中，您可以使用以下内容：

```
af|table::content {
  border-collapse: collapse;
  border-spacing: 0;
} 
```

另见：

*   [在 CSS 中设置 cellpadding 和 cellspacing？](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css)
*   [用于为 Trinidad 组件蒙皮的选择器](http://myfaces.apache.org/trinidad/skin-selectors.html)

# php - 好习惯？PHP MVC 控制器 Ajax

> ID：13289967
> 
> 赞同：4
> 
> 时间：2012-11-08T13:35:19.033
> 
> 标签：php, ajax, model-view-controller, controller

这是用一个控制器处理普通和 ajax 调用的好习惯吗：

```
<?php

class SomeController extends Controller {

    function index() {

         if(!$this->input->is_ajax_request()) {
             // load model
             // create form
             // pass data to view
             // ...
         } else {
            // validate input
            // load model
            // write data to database
            // return with some json string
         }

    }

} 
```

有什么优点和缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:59:02.900

**简短的回答：**这取决于。

[XHR](https://en.wikipedia.org/wiki/XHR)（营销人员称之为“AJAX”）和普通浏览器请求之间唯一真正的区别是 XHR 期望不同形式的响应。

在受 MVC 启发的 Web 模式中，负责生成响应的部分是**视图**实例。视图应该识别它必须产生什么样的响应，并采取相应的行动。在这种情况下，控制器的作用只是改变当前视图的状态。

或者，您可以在引导阶段检测`Accept`HTTP 标头，并基于该标头初始化不同的视图实例。

> [“完全实现视图”是指一个实例，它包含 MVC 三元组中的 UI 逻辑，并且可以决定响应哪个。该响应可以是 HTML 文档，由多个模板、JSON/XML 文件或只是一个简单的 HTTP 标头组成。]

*   **优点：**适当的关注点分离，更易于维护
*   **缺点：**必须实现完整的 MVC

* * *

*.. 但大多数人不使用完整的 MVC 实现。*

如果您是这样的人，而不是 MVC 启发的模式，而是使用关于[页面控制器](http://martinfowler.com/eaaCatalog/pageController.html)模式的类似 Rails 的变体，那么您将被迫创建一个单独的控制器来处理 XHR。

在这种情况下，没有真实的视图。它被哑模板替换，而 UI 逻辑已合并到页面控制器中。在这种情况下，唯一实用的选择是创建一个单独的控制器来处理 XHR。

*   **优点：**在小型项目中更易于实施
*   **缺点：**可能的代码重复，更难维护

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:45:51.830

即使是 AJAX 请求，**您仍然需要验证输入**。不是您向您的应用程序发送输入（通过 AJAX），而是浏览器，**您无法信任**。

作为一般设计原则，**避免特殊情况**（此处：ajax 与非 ajax）。通常，您希望平等对待所有情况，因此您最终会采用[正交方法](http://en.wikipedia.org/wiki/Orthogonality#Computer_science)。

正如你所看到的

```
class SomeController extends Controller {

    function index() {

         if(!$this->input->is_ajax_request()) {

             // validate input <-- XXX here we need to validate it too

             // load model
             // create form
             // pass data to view
             // ...
         } else {
            // validate input
            // load model
            // write data to database
            // return with some json string
         }

    }

} 
```

这会导致重复代码（难以维护和保持同步）。

您的代码，正交方法：

```
class SomeController extends Controller {

    function index() {
         // load model (takes care of his own validation, the self-containment principle of OOP)
         // coordinate same business logic done by different models
         // return models/data to the view, the framework will decide whether it uses the html or the json view file
    }

} 
```

相反，模型（它可以是相同的模型类，或者像 Zend Framework 中的 Form 模型，或者像 ZF2 中的 hydrating 方法[可以](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.stdlib.hydrator.html)完成大部分工作（连同 Table Gateway、DAO（如Doctrine 2) 或模型的类似类），您可以为 HTML 和 JSON 创建两个单独的视图。

例如，在 Zend Framework 2 中，**为您透明地选择了正确的视图**，因此实际上不会有任何关于“这是 AJAX 还是不是？”的 if/else。

您应该尝试**使用现代 PHP 框架**(5.3+) 来了解如何使用[PHP 来设计您的应用程序](https://stackoverflow.com/questions/317167/object-oriented-design-for-php-application)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:42:45.707

我认为这是开发人员的选择，考虑一下：

我认为这是开发人员的选择，请考虑这一点。我见过的一个客户端移动网站的开发。他们有一个网络商店和一个模型商店：

```
/store/model/order.php
/store/controller/order.php
/store/view/order.php 
```

而不是

```
/store/model/order_mobile.php
/store/controller/order_mobile.php
/store/view/order_mobile.php 
```

管理是一场噩梦。为移动客户端分离图像、css、多个编码副本。他们现在的解决方案是将整个网站转换为响应式设计

```
/new-dev-store-responsive/model/order.php
/new-dev-store-responsive/controller/order.php
/new-dev-store-responsive/view/order.php 
```

相同的代码但更干净。而且我会在我的模板中使用 PHP 结构在某些代码上进行 AJAX 调用，而在其他代码上没有。同样，它可能难以管理。最好使用 JSON 或外部静态文件来处理 - 所以 PHP 是使用 GET、POST 等驱动的。如果他们有 JavaScript，AJAX 可以与 PHP 一起工作。PHP 代码应该保留 PHP IMO 。

```
/new-dev-store-responsive/model/order.php
/new-dev-store-responsive/controller/order.php
/new-dev-store-responsive/view/order.php

//new-dev-store-responsive-cdn.com/assets/js/order.js
//new-dev-store-responsive-cdn.com/assets/css/order.css
//new-dev-store-responsive-cdn.com/assets/imgs/order/checkout.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:48:10.523

您的方法有一些优点和缺点。

对于发布公共数据，没有问题。

对于获取公共数据，我通常更喜欢在单独的控制器中进行，很多时候我什至不进行 ajax 检查，因为我的数据是公开的，我希望它尽可能地去。

对于发布/获取私人数据，我不喜欢使用这两个方面的方法，因为拥有良好且干净（安全）的代码会更好......

无论如何..一切都取决于您的选择。一切皆有可能！并且没有正确的常数和不正确的常数..

# ruby-on-rails - Heroku cli.rb:24 未定义的方法 error_with_failure

> ID：13289972
> 
> 赞同：0
> 
> 时间：2012-11-08T13:35:33.230
> 
> 标签：ruby-on-rails, heroku

我已经成功使用 Heroku 几个月了，但很明显我在某处进行了更改，这导致了许多问题。

在执行命令“heorku version”时，几乎任何其他命令，例如“heorku db:push -t mytable”都会失败并显示错误消息：

.heroku/client/lib/heroku/cli.rb:24:in `rescue in start': undefined method`error_with_failure' for Heroku::Helpers:Module (NoMethodError) from C:/Users/Doug/.heroku/client/lib/heroku/cli.rb:10 ：在`start' from c:/Program Files (x86)/Heroku/bin/heroku:33:in`'

Taps 被加载并检测到 Heorku 数据库，但仅此而已。

添加信息：1) Windows 7 64 位 2) 路径似乎正确。3) “Heroku 版本”显示“heorku-gem/2.28.8 (imingw32) ruby​​/1.9.3” 4) 似乎有更新版本的 toolbelt (2.32.x) 可以自动检查客户端更新，但是当我安装了它，我最终得到了我当前的版本（2.28.8）

任何建议将不胜感激。道格

# mysql - 由于 BLOB 字段，MySQL 查询非常慢（不能在另一个表中移动）

> ID：13289975
> 
> 赞同：5
> 
> 时间：2012-11-08T13:35:44.930
> 
> 标签：mysql, blob

我正在开发基于 MySql 数据库的 PyQT 软件。该数据库包含一些记录的电信号，以及描述这些信号的所有信息（采样率、重新编码的日期等......）。

想一想，一个数据库包含 10 000 到 100 000 行，总大小 > 10Gb。所有这些数据都存储在专用服务器上。事实上，大部分数据是信号本身，它在一个名为analogsignal.signal的BLOB字段中（见下文）

这是数据库的架构：[http ://packages.python.org/OpenElectrophy/_images/simple_diagram1.png](http://packages.python.org/OpenElectrophy/_images/simple_diagram1.png)

我无法更改它（我可以添加列和索引，但我无法移动或删除现有列）。

在软件中，我需要列出所有的模拟信号列（id、名称、通道、t_start、sampling_rate），除了analogsignal.signal，稍后通过analogsignal.id 调用。所以我正在做以下查询

> 选择 block.id、block.datetime、segment.id、analogsignal.id、analogsignal.name、analogsignal.channel、analogsignal.sampling_rate、block.fileOrigin、block.info
> 
> FROM 段、块、模拟信号
> 
> WHERE block.id=segment.id_block
> 
> AND segment.id=analogsignal.id_segment
> 
> 由类比信号.id 订购

问题是，由于analogsignal.signal 列的存在，我的查询非常慢（如果请求不在缓存中，则> 10 分钟）。如果我正确理解发生了什么，表格会逐行读取，包括analogsignal.signal，即使analogsignal.signal 不在SELECT 字段中。

有谁知道如何在不将 BLOB 移动到其他表中的情况下优化数据库或查询（我同意这更合乎逻辑，但我不控制这一点）。

谢谢！

这是 AnalogSignal 表的 CREATE TABLE 命令（从评论中提取/格式化）

```
CREATE TABLE analogsignal 
  ( id int(11) NOT NULL AUTO_INCREMENT, 
    id_segment int(11) DEFAULT NULL,
    id_recordingpoint int(11) DEFAULT NULL, 
    name text, 
    channel int(11) DEFAULT NULL, 
    t_start float DEFAULT NULL, 
    sampling_rate float DEFAULT NULL, 
    signal_shape varchar(128) DEFAULT NULL, 
    signal_dtype varchar(128) DEFAULT NULL, 
    signal_blob longblob, Tag text, 
    PRIMARY KEY (id), 
    KEY ix_analogsignal_id_recordingpoint (id_recordingpoint),
    KEY ix_analogsignal_id_segment (id_segment) 
  ) ENGINE=MyISAM AUTO_INCREMENT=34798 DEFAULT CHARSET=latin1 ; 
```

**编辑：问题解决了，这里是关键点：**

-我必须添加一个多列索引，在模拟信号表中的所有 SELECT 字段上键入 INDEX
-“TEXT”类型的列阻止了索引的使用。我在 VARCHAR(xx) 中转换了这些 TEXT 字段。为此，我使用了这个简单的命令：

> 从 table_to_query 中选择 MAX(LENGTH(field_to_query))

在转换之前检查最小文本长度，以确保我不会丢失任何数据

> ALTER TABLE table_to_query CHANGE field_to_query field_to_query VARCHAR(24)

我第一次使用了 VARCHAR(8000)，但是在这个设置下，VARCHAR 就像一个 TEXT 字段，并且索引不起作用。VARCHAR(24) 没有这样的问题。如果我是对的，则查询中的总 TEXT 长度（包括所有字段）不得超过 1000 个字节

然后我如上所述索引了所有列，索引中没有大小参数

最后，使用更好的查询结构（感谢 DRapp），也改进了查询。我从 215s 传递到 0.016s 的查询，没有缓存......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:58:10.380

除了通过将数据放入外部物理文件并将路径\文件名存储在相应的记录中来尝试缩小“blob”列要求之外，我还可以尝试以下方法...

我将反转查询并将您的 AnalogSignal 表放在第一位，因为它是 order by 子句的基础，并将查询反向到块。此外，为了避免读取每一行数据，如果您在输出中所需的所有列上构建复合索引，它将创建一个更大的索引，但是查询将直接从键表达式中提取值，而不是从回读到实际的数据行。

在 AnalogSignal ( id, id_segment, name, channel, sampling_rate ) 上创建索引 KeyDataOnly

```
SELECT STRAIGHT_JOIN
      block.id, 
      block.datetime, 
      segment.id, 
      analogsignal.id, 
      analogsignal.name, 
      analogsignal.channel, 
      analogsignal.sampling_rate, 
      block.fileOrigin, 
      block.info
   FROM 
      analogsignal
         JOIN Segment
            on analogsignal.id_segment = segment.id
            JOIN block
               on segment.id_block = block.id
   ORDER BY 
      analogsignal.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:49:31.957

如果无法删除 BLOB 列，是否必须填写？您可以添加一列来存储信号的路径/到/文件名，然后将所有信号文件放在适当的目录中。完成后，将 BLOB 字段值设置为 null。

这可能打破了您所受限制的精神。但通常需要规避*任意限制。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:43:08.607

因此，根据评论，我确定您的问题是由 MyISAM 存储引擎及其存储数据的行为引起的。有毒物20是对的。无论如何，MySQL 必须跳过那些无效的大块。您可以更改 InnoDB 的存储引擎，这将对解决此问题有很大帮助。如果您在 SELECT ... 部分明确要求它，只会读取 blob 数据。

```
ALTER TABLE analogsignal ENGINE=InnoDB; 
```

这将需要一段时间，但对性能有很大帮助。您可以在此处阅读有关 InnoDB 文件格式的更多信息：

[http://dev.mysql.com/doc/innodb/1.1/en/innodb-row-format-antelope.html](http://dev.mysql.com/doc/innodb/1.1/en/innodb-row-format-antelope.html) http://dev.mysql.com/doc/innodb/1.1/en/innodb-row-format -dynamic.html

免责声明：如果您对表中的任何列使用全文搜索（MATCH ... AGAINST [http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)），则无法更改它到 InnoDB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:43:03.460

由于模拟信号列非常大，查询将花费很长时间，因为在执行选择查询时它必须跳过（或者如果您隐喻地看到它，则跳过它们）它们。我要做的是：而不是在数据库中有一个blob，而是通过生成二进制文件

```
$fh = fopen("analogfile.spec", 'w') or die("can't open file");
$data = $yourAnalogDataFromSomewhere;
fwrite($fh, $data);
fclose($fh); 
```

例如，文件名将由列的 ID 给出。您只需在服务器目录结构中添加文件路径，而不是 blob。

这样，您的查询将运行得非常快，因为它不必跳过 blob 列中的大块数据。

# regex - 使用正则表达式提取行

> ID：13289980
> 
> 赞同：0
> 
> 时间：2012-11-08T13:35:53.787
> 
> 标签：regex

我想从给定的文本中获取以下信息

```
Mohsan,Hasan    ADDRESS 123-456789
ABCD,EFGHIJKL   ADDRESS 123-456789
AB,XYZFGH   ADDRESS 123-456789 
```

获取名字为 3-5 个字符且姓氏为 5 个字符的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:39:43.323

使用正则表达式模式

```
^[a-zA-Z]{3,5},[a-zA-Z]{5}\s 
```

或在某些环境/编程语言中

```
^[a-zA-Z]{3,5},[a-zA-Z]{5}\\s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:58:30.107

如果你想兼容 unicode：

```
^\p{L}{3,5},\p{L}{5}\s 
```

# oracle11g - tomcat7 jdbc问题

> ID：13289981
> 
> 赞同：0
> 
> 时间：2012-11-08T13:35:59.573
> 
> 标签：oracle11g, tomcat7, spring-jdbc, jdbc-odbc

我的应用程序帖子移动到 tomcat7 时遇到问题。当我的应用程序尝试连接到“Oracle 11.2 DB”时，我看到了以下问题。

```
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-12541: TNS:no listener
)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:382)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:458)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:466) 
```

server.xml 和 context.xml 中的连接详细信息如下所示。

*   上下文.xml

ResourceLink global="jdbc/ctb" name="jdbc/ctb" type="oracle.jdbc.pool.OracleDataSource"/>

*   服务器.xml

    ```
     <Resource name="jdbc/XXXX"
            auth="Container"
            scope="Shareable"
            type="javax.sql.DataSource"
            driverClassName="oracle.jdbc.OracleDriver"
            url="jdbc:oracle:oci8:@database"
            username="username" password="pwd"
            maxActive="30" maxIdle="3"
            removeAbandoned="true" removeAbandonedTimeout="60"
            testOnBorrow="true"
            validationQuery="select 1 from dual"
            logAbandoned="true" /> 
    ```

我看到的一个观察结果如下：

tomcat7 在名为“tomcat-jdbc.jar”的“lib”文件夹中带有一个默认的 jdbc 驱动程序。但是在我的应用程序中，我们使用了很长时间的 spring-jdbc.jar。

试图删除它们中的每一个以确保类中不会有任何冲突，但这对我没有帮助。

tomcat6 与相同的“context.xml”和“server.xml”以及 spring-jdbc.jar 一起工作得很好。

您的帮助将不胜感激，因为这已成为我们 tomcat7 迁移的障碍。如果您需要更多详细信息，请告诉我。

==本基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:50:25.550

哦，Ghosh，解决了这个问题。

创建的 setenv.sh 脚本从未为其设置在上述错误中创建的“ORACLE_HOME”路径。同样，当我使用 init 脚本时，正在启动和停止 tomcat，它只加载了所需的基本 ENV 变量并由 setenv.sh 脚本设置。

现在一切正常。

# dokan - 为 Windows (.net C#) 开发虚拟驱动器

> ID：13289982
> 
> 赞同：1
> 
> 时间：2012-11-08T13:36:10.603
> 
> 标签：dokan

我的要求。

在 Windows 中开发一个 ntfs/fat 可格式化的原始虚拟驱动器 - 类似于 truecrypt。我想知道某处是否有 C# 实现。

dokan、callbackfs 等不完全适合，因为必须实现文件系统本身。filedisk、imdisk 等在内核空间中，代码看起来很复杂。

像 callbackdisk 或者 eterlogic 提供的那种是完美的，可惜它们很贵，我不想仅仅为了一个小项目而购买它们。

是否有任何其他免费提供的替代方案，如上述两个。最好是一个简单的 C# 包装器，它在我可以编码的用户空间中提供 read()/write() 回调函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-29T13:04:54.717

有一个解决方案，但您需要一个文件夹：/ 看看这里，看看它是否符合您的需求： [http](http://dotnet-snippets.de/snippet/erstellung-eines-virtuellen-laufwerks/712) ://dotnet-snippets.de/snippet/erstellung-eines-virtuellen-laufwerks/712 它是德语的，但您应该看到带有代码的 div。评论没那么重要。希望我对你有所帮助。:)

# glassfish - 如何动态列出 Glassfish 域中可用的 Web 应用程序？

> ID：13289988
> 
> 赞同：0
> 
> 时间：2012-11-08T13:36:24.930
> 
> 标签：glassfish, glassfish-3

我们有一个内部 Glassfish 3.1 服务器，我们让 Jenkins 直接部署战争工件，无需任何额外配置。

这导致了许多相当冗长的 URL 之类的

`http://xxx:5280/xxx_YYYY-52.20120824.0-SNAPSHOT/`

我想写一个小的 ROOT.war（绑定到“/”），它简单地列出了当前域中的所有 URL - 最好与`<web-app><description>....`字段一起。

这只需要与 Glassfish 一起使用。是否有一个简单的 Glassfish API 提供我需要的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:56:18.813

您可以解析 domain.xml。有关于已部署应用程序的信息，上下文根......像这样

```
<application context-root="/permit-1.0" location="${com.sun.aas.instanceRootURI}/applications/permit-1.0/" name="permit-1.0" object-type="user">
      <property name="org.glassfish.ejb.container.application_unique_id" value="88379353331728384" />
      <property name="defaultAppName" value="permit-1.0" />
      <module name="permit-1.0">
        <engine sniffer="ejb" />
        <engine sniffer="security" />
        <engine sniffer="web" />
      </module>
    </application> 
```

# assembly - 在扇区 0 上写入？

> ID：13289990
> 
> 赞同：1
> 
> 时间：2012-11-08T13:36:29.250
> 
> 标签：assembly, bootloader, hard-drive, sector

我需要在 asm 中做一个引导加载程序，并且我需要在 USB 闪存设备的扇区 0 中编写我的 asembly 代码。是否有任何程序可以让您做到这一点，而无需手动使用中断？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:45:36.370

你可以试试 RawWrite，它是一个 Windows 工具。[http://www.chrysocome.net/rawwrite](http://www.chrysocome.net/rawwrite)

如果您使用的是 Linux，您可以尝试调整此页面上的一些命令... [http://www.cyberciti.biz/faq/howto-copy-mbr/](http://www.cyberciti.biz/faq/howto-copy-mbr/)

# java - 将 maven 子模块部署到存储库以供其他项目使用（没有父级）

> ID：13289991
> 
> 赞同：2
> 
> 时间：2012-11-08T13:36:35.167
> 
> 标签：java, jakarta-ee, maven

问题是，在我们公司，我们有一个包含多个子模块的项目，但是其中一个子模块只是 API 声明的集合，并且是供其他（3rd praty）项目使用的。我想将其保留为子模块，因为它更易于维护和构建（依赖和属性继承）。该项目中的其他子模块也依赖于它。

我的问题是，是否存在执行部署阶段的良好做法或好方法，该阶段将仅将此子模块上传到不同的存储库（也可以复制），而不依赖于父 pom。

我已经尝试过：我已经检查了 deploy:deploy-file，但问题在于 SNAPSHOT 构建。我们希望能够发布 SNAPSHOTS 和发布版本，并且快照具有与发布版本不同的存储库，但部署文件目标只能有一个 url 参数。我不想为快照部署使用不同的配置文件。如果版本是 SNAPSHOT，我尝试使用 maven build-helper 及其 regex-property 来更改存储库 url，但由于插件和 regex 限制而无法这样做。

最后一个选项是我可以为此制作一个插件，但我想知道是否有更优雅的方法来解决这个问题，即“maven 方式”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:18:41.530

您可以单独部署此模块，但仅适用于 SNAPSHOT 的发布，它没有意义。模块的部署可以通过以下方式完成：

```
mvn -pl TheModuleYouWouldLikeToDeploy deploy 
```

可能您需要添加选项 -am （也制作依赖项），例如：

```
mvn -am -pl TheModuleYouWouldLikeToDeploy deploy 
```

除此之外，如果您使用的是多模块构建，那么您的方法听起来是错误的，为什么不通过 mvn deploy 部署整个构建？让通过像 Jenkins 这样的 CI 工具来完成这项工作可能会更好。

# javascript - 对象和 this 的属性

> ID：13289995
> 
> 赞同：0
> 
> 时间：2012-11-08T13:36:41.057
> 
> 标签：javascript

我想创建一个对象来存储我将在我的网络应用程序中使用的变量。

我无法使用. `clientId`_`clientSecret``uriGetToken``this`

我也可以使用 in`mApiGetToken`中的功能`token`。

你能告诉我我做错了什么以及如何解决它吗？

```
 $(document).ready(function () {

        // General Settings
        var mApiSettings = {
            clientId: 'aaa',
            clientSecret: 'bbb',
            token: mApiGetToken(),
            uriGetToken: 'https://ccc/oauth/token?grant_type=client_credentials&client_id=' + this.clientId + '&client_secret=' + this.clientSecret
        }

        console.log(mApiSettings.uriGetToken);
        // Get Autheticated, it requires getting a Token from HollyByte
        function mApiGetToken() {

            $.getJSON(mApiSettings.uriGetToken, processData);
            function processData(data) {
                mApiSettings.token = data.access_token;
            }
            //return token;
        }

        // For Testing
        console.log(mApiGetToken());

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:40:47.650

的值由调用该*函数时出现*`this`的函数确定。

 *您使用的对象字面`this`量与`this`.

在创建它的对象文字语句的中间也没有办法访问对象的属性。

您需要使用变量。

尽管您的示例中没有任何特殊字符，但您应该养成对插入 URI 的任何数据进行转义的习惯。

```
 var clientId, clientSecret, mApiSettings;
    clientId = 'aaa';
    clientSecret = 'bbb';
    mApiSettings = {
        clientId: clientId,
        clientSecret: clientSecret,
        token: mApiGetToken(),
        uriGetToken: 'https://ccc/oauth/token?grant_type=client_credentials&client_id=' + encodeURIComponent(clientId) + '&client_secret=' + encodeURIComponent(clientSecret)
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:45:08.827

这是一个常见的 Javascript 问题，因为`this`关键字的行为与 Java 或 C++ 等其他 OOP 语言不同。

问题是：

```
var o = {
    a : 2,
    b : this.a *2
}
console.log( b ); //prints NaN because the value for this.a is undefined at the time b is being initialized 
```

因为`this`在对象字面量初始化中不可访问。一种解决方法是使用对象的名称而不是`this`：

```
var o = {
    a : 2,
    b : o.a *2
}
console.log( b ); //prints 4 
```

或者您可以一次定义一个对象：

```
var o = {
    a : 2
}
o.b = o.a *2;
console.log( b ); //prints 4 
```

无论如何，如果您将代码更改`mApiSettings`为：

```
var mApiSettings = {
            clientId: 'aaa',
            clientSecret: 'bbb',
            token: mApiGetToken()
}

mApiSettings.uriGetToken = 'https://ccc/oauth/token?grant_type=client_credentials&client_id=' + mApiSettings.clientId + '&client_secret=' + mApiSettings.clientSecret; 
```

您可以在此处阅读有关 Javascript`this`关键字的更多信息：http: [//unschooled.org/2012/03/understanding-javascript-this/](http://unschooled.org/2012/03/understanding-javascript-this/)

编辑：

正如另一个答案所暗示的那样，您可能希望在将 clientSecret 和 clientId 嵌入到 URL 之前对其进行编码。如果是这种情况，您可以使用以下代码：

```
var mApiSettings = {
            clientId: 'aaa',
            clientSecret: 'bbb',
            token: mApiGetToken()
}

mApiSettings.uriGetToken = 'https://ccc/oauth/token?grant_type=client_credentials&client_id=' + encodeURIComponent( mApiSettings.clientId ) + '&client_secret=' + encodeURIComponent( mApiSettings.clientSecret ); 
```*

# iphone - 检测 iphone 中的信息或短信并将其发送到 BluetoothLE 手表

> ID：13289998
> 
> 赞同：2
> 
> 时间：2012-11-08T13:36:53.973
> 
> 标签：iphone, ios6, core-bluetooth, bluetooth-lowenergy

> **可能重复：**
> [如何从 iPhone 向蓝牙 LE 设备发送电子邮件、短信通知？](https://stackoverflow.com/questions/12197503/how-to-send-email-sms-notification-from-iphone-to-bluetooth-le-device)

我正在设计一个蓝牙手表。我想在我的 iphone4s 中检测任何传入的消息或短信，并将任何通知消息发送到我的蓝牙手表，新的短信/消息已经到达。就像在 metawatch 或其他智能手表中完成的那样。如何我实现了这个？