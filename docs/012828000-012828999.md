# StackOverflow 问答 12828000-12828999

# asp.net-mvc - # 仅在 IE 中出现在 url 中

> ID：12828000
> 
> 赞同：0
> 
> 时间：2012-10-10T20:41:44.150
> 
> 标签：asp.net-mvc, internet-explorer, jquery-mobile

我有一些看起来像这样的链接

```
@Html.ActionLink("Receiving", "Index", "Receiving") 
```

使用 IE 并单击此链接时，它会在 url 中添加一个 # 这是在链接之后出现在 url 中的内容

```
http://localhost:47547/#/Receiving 
```

视图加载正常。但问题是这个视图上的表单不起作用没有任何反应。

如果我手动输入 URL 并删除 # 一切都按预期工作，包括表单

这个＃来自哪里，我该如何阻止它？

使用任何其他浏览器时它不会出现，并且该表单在这些浏览器上工作正常。

更新：我没有提到我在这个网站上使用 jQuery mobile，我没有想到这可能会导致一些问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:23:35.820

这就是 jQuery Mobile 处理 ajax 导航的方式。[您可以在文档的Ajax、哈希和历史](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)部分阅读它。

> 默认情况下，jQuery Mobile 中的所有导航都基于 location.hash 的更改和更新。只要有可能，页面更改将使用当前“页面”和下一个“页面”之间的平滑过渡，无论它已经存在于 DOM 中，还是通过 Ajax 自动加载。
> 
> 由 jQuery Mobile 创建的哈希值被规范化为相对于加载的第一个“真实”页面的 URL 的完整路径。哈希始终作为有效 URL 维护，因此 jQuery Mobile 中的任何“页面”都可以在链接中添加书签或引用。要检索非基于哈希的 URL，只需从地址中删除 # 并刷新页面。

# debugging - 在 Windows Phone 7 上调试 IE？

> ID：12828005
> 
> 赞同：0
> 
> 时间：2012-10-10T20:42:02.750
> 
> 标签：debugging, windows-phone-7, ie-mobile

我在 Mac 上工作，我想知道在 Windows Phone 7 上调试移动 IE 有哪些选项。在设置下似乎没有任何调试选项（或者实际上还有很多其他选项）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:44:31.720

当您说“debuggin mobile IE”时，我想您的意思是在 Windows Phone 的 Internet Explorer 上调试网站？

Windows Phone 的 IE 上没有调试工具，但您可以在 PC 的 IE9 上测试您的网站，因为两者共享相同的代码库（如果您在 Mac 上工作，则需要一个 VM）。

# svg - 有没有办法减少跟随鼠标指针的指南的滞后？

> ID：12828006
> 
> 赞同：5
> 
> 时间：2012-10-10T20:42:06.647
> 
> 标签：svg, d3.js

我的 svg 上有一条垂直指南，它跟随鼠标指针，但现在更新它的位置有点慢，这在鼠标快速移动时尤其明显。有没有办法减少这种滞后？

当前代码：

```
svg.on("mousemove", function(d) {
    svg.select(".guideline")
        .attr("x1", d3.mouse(this)[0]-1)
        .attr("x2", d3.mouse(this)[0]-1);

});

svg.on("mouseover", function(d) {
    svg.append("line")
        .attr("class", "guideline")
        .attr("y1", margin[0])
        .attr("y2", height+margin[0])
        .attr("opacity", originOpacity)
        .attr("stroke", "#333")
        .attr("pointer-events", "none");

});

svg.on("mouseout", function(d) {
    svg.select(".guideline").remove();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:26:25.883

您在每次鼠标移动时都选择该行，而是将该行保留在一个变量中：

```
var line = svg.append("line")
        .attr("class", "guideline")
        .attr("y1", margin[0])
        .attr("y2", height+margin[0])
        .attr("opacity", 0)
        .attr("stroke", "#333")
        .attr("pointer-events", "none");

svg.on("mousemove", function(d) {

    line
        .attr("x1", d3.event.pageX-1)
        .attr("x2", d3.event.pageY-1);

});

svg.on("mouseover", function(d) {
  line.attr("opacity", originOpacity);
});

svg.on("mouseout", function(d) {
    line.attr("opacity", 0);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:52:14.167

我有同样的问题，但我注意到两件事：

1.  如果你看一下 High Charts，他们已经（在他们的 JS 库中）实现了一个类似的垂直指南，它并没有落后太多。所以有可能做到这一点。参见例如：[这里](http://www.highcharts.com/stock/demo/)

2.  我使用了一个容器元素，向其中添加了一个 SVG 元素，并在其中添加了一个带有坐标平移/变换的组 (g) 元素，如下所示：

HTML：

```
<div id="d3-container"></div> 
```

JS：

```
var svg = d3.select("#d3-container")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("id","d3-svg")
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .attr("id","d3-canvas"); 
```

有趣的是，当我将鼠标事件（在第一个答案中使用上面的代码）绑定到各种元素时，我得到了非常不同的性能：当我将它绑定到“d3-canvas”组时，我的引导线非常​​慢并且落后，当我将它绑定到它的父 svg 元素（“d3-svg”）时它已经更快了，如果我将它绑定到 div（“d3-container”）我得到最快的性能（虽然它仍然不是和高库存一样快）。所以我认为坐标转换为鼠标事件增加了很多开销，但不知何故 D3 或 SVG 也没有针对鼠标事件进行优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T19:02:37.463

`mousemove`您可以添加几毫秒的延迟，而不是更新 every 上的属性：

```
var lastMove, elapsed;
svg.on("mousemove", function(d) {

    elapsed = Date.now() - lastMove;
    if ( elapsed < 40 ) return;

    svg.select(".guideline")
        .attr("x1", d3.mouse(this)[0]-1)
        .attr("x2", d3.mouse(this)[0]-1);

    lastMove = Date.now();
}); 
```

这肯定会提高性能，但代价是使动作更加不稳定。玩弄您检查的毫秒数。`40`可能太长了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T23:49:38.980

有一个名为的 CSS 属性`shape-rendering`，它设置了 SVG 应该如何呈现的优先级。您可以指定`auto`、`optimizeSpeed`、`crispEdges`或`geometricPrecision`, 其中 auto 尝试在不牺牲精度的情况下适应速度和清晰度。

我发现这些设置`shape-rendering`可以`auto`提高我的十字准线的性能。KrisEdges 和 optimizeSpeed 似乎使光标间歇性地消失。我无法在小提琴中重现平滑的十字准线，但在我的解决方案中，它现在实际上非常平滑。

# java - 与 java 6 相比，XMLEncoder 在 java 7 中生成的人类可读 XML 更少

> ID：12828007
> 
> 赞同：3
> 
> 时间：2012-10-10T20:42:12.777
> 
> 标签：java, xml, java-7, java-6, xmlencoder

这是一个演示问题的简单示例：

考虑两个 bean 类 Alpha 和 Beta：

```
public class Alpha {
    private String name;
    private Beta beta;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Beta getBeta() {
        return beta;
    }

    public void setBeta(Beta beta) {
        this.beta = beta;
    }
}

public class Beta {
    private Alpha alpha;

    public Alpha getAlpha() {
        return alpha;
    }

    public void setAlpha(Alpha alpha) {
        this.alpha = alpha;
    }
} 
```

然后创建 Alpha 和 Beta 的实例，并将 Alpha 对象写入 XML：

```
Alpha alpha = new Alpha();
Beta beta = new Beta();

alpha.setBeta(beta);
alpha.setName("Rama");
beta.setAlpha(alpha);

XMLEncoder encoder = new XMLEncoder(new BufferedOutputStream(new FileOutputStream("file.xml")));
encoder.writeObject(alpha);
encoder.close(); 
```

在 java 6 中，这会产生以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<java version="1.6.0_24" class="java.beans.XMLDecoder">
 <object id="Alpha0" class="dk.kruger.Alpha">
  <void property="beta">
   <object class="dk.kruger.Beta">
    <void property="alpha">
     <object idref="Alpha0"/>
    </void>
   </object>
  </void>
  <void property="name">
   <string>Rama</string>
  </void>
 </object>
</java> 
```

但在 java 7 中，结果是：

```
<?xml version="1.0" encoding="UTF-8"?>
<java version="1.7.0_07" class="java.beans.XMLDecoder">
 <object class="dk.kruger.Alpha" id="Alpha0">
  <void property="beta">
   <object class="dk.kruger.Beta">
    <void property="alpha">
     <object idref="Alpha0">
      <void property="name">
       <string>Rama</string>
      </void>
     </object>
    </void>
   </object>
  </void>
 </object>
</java> 
```

java 7 生成的 XML 比 java 6 XML 的可读性要差得多（当然，对于更复杂的示例来说尤其如此）。在上面的示例中，java 7 编码器在“beta”的定义中定义了“alpha”的“name”属性，因为“beta”也有对“alpha”的引用。这种行为可能会导致深度嵌套和丑陋的 XML。

有没有办法让 java 7 中的 XML 编码器生成 java 6 风格的 XML？

# php - Javascript 或 Jquery：获取没有焦点的关键输入

> ID：12828010
> 
> 赞同：4
> 
> 时间：2012-10-10T20:42:33.687
> 
> 标签：php, javascript, jquery

我正在尝试检查是否按下了某个键而不关注任何类型的字段。

目标是允许用户按左右箭头来获取下一个图像。他们无需单击任何文本字段或任何内容...只需按这些键即可滚动到下一个或最后一个图像。

像：

```
function keyEvent(e) {
  if(e.keyCode == 39) {
    run some code to get next image
  }
  else if (e.keyCode == 37) {
    run some code to get last image
  }
 } 
```

似乎 jquery 总是需要一个“选择器”，就好像我需要将它绑定到一个字段或其他东西一样。

```
$('input[type=text]').on('keyup', function(e) {     
  if (e.which == 39) {

  run some code
} }); 
```

有任何想法吗？

编辑：

我的 viewimage.php 文件正文中有这个脚本...... javascript 仍然没有在页面加载时运行：

```
<script type="text/javascript">
$(document).ready(function() { 
    $(document).keydown(function (e) {
     if (e.which == 39) {
       alert("39");
    }
    });
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T20:46:12.143

```
$(document).ready(function() {
    $(document).keydown(function(e) {   
      e.preventDefault();  
      if (e.which == 13) {
          // Whatever...
      }
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T20:54:52.027

> 我正在尝试检查是否按下了某个键而不关注任何类型的字段。

如果`field`您的意思是 input/textearea/select 元素，您所要做的就是将处理程序附加到文档并在事件目标是输入元素时取消上述处理程序：

```
$(document).on('keyup', function(e) {
    if ($(e.target).is('input, textarea, select')) return;
    if (e.which == 39) {
        console.log('move foward');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/L5T7h/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T20:45:44.413

将按键（或按下或按下）绑定到正文、文档或窗口。使用其中的任何一个或全部（皮带+吊带）。

```
$('body',document,window).on('keyup', function(e) {
    if (e.which == 13) {
        e.preventDefault();
        console.log('enter');
    }
});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T20:43:38.753

将侦听器添加到文档中。

```
$(document).on("keyup", function (e) {
    console.log(e.keyCode);
});​ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T20:44:26.880

使用`$(document).on()`或`$(window).on()`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-10T20:52:06.850

~~首先，我认为按键更安全。我听说 keyup 和 keydown 在某些浏览器中会丢失。~~

我倒过来了... keydown 是最安全的。

您的问题的答案是绑定文档：

```
$(document).on('keydown', function(){
  ...
}); 
```

# algorithm - 如何增加/减少随机（类型 4）UUID？

> ID：12828014
> 
> 赞同：2
> 
> 时间：2012-10-10T20:42:48.273
> 
> 标签：algorithm, cassandra, guid, uuid

如何实现给定版本 4 UUID A 生成**有效**版本 4 UUID B 的函数 increment(uuid)，其中：

1.  乙>甲
2.  存在 NO C 其中 B > C > A

与给定版本 4 UUID A 的减量（uuid）相同，会产生**有效**的版本 4 UUID B，其中：

1.  乙<甲
2.  存在 NO C 其中 B < C < A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-19T14:35:20.413

这是一个python函数来实现你想要的：

```
def increment_uuid(uuid, increment):
    # Return a UUID value incremented by an integer

    hex_str = uuid[:8] + uuid[9:13] + uuid[14:18] + uuid[19:23] + uuid[24:]
    incremented_val = int(hex_str, 16) + increment
    assert(incremented_val >= 0 and incremented_val <= 2 ** 128)
    incremented_hex = format(incremented_val, '032x')
    incrmented_uuid = incremented_hex[:8] + '-' + incremented_hex[8:12] + '-' + incremented_hex[12:16] \
                      + '-' + incremented_hex[16:20] + '-' + incremented_hex[20:]
    return incrmented_uuid 
```

您现在可以简单地将 UUID 增加 1 以获取“序列”中的下一个：

```
import uuid
uuid_a = uuid.uuid4() # e.g. a32258b5-2781-44ec-9e00-f4b1185e9936
uuid_b = increment_uuid(str(uuid_a),1) # e.g. a32258b5-2781-44ec-9e00-f4b1185e9937 
```

当然，它只是将数据视为 128 位十六进制值，而忽略了版本号和变体位的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:05:06.393

不可能。除了为版本和变体字段保留的 6 位之外，v4 UUID 由完全随机的数据组成 - 即不存在用于定义有意义的递增/递减操作的“序列”的固有概念。

# c++ - 范围未知的 C++ int 出现计数

> ID：12828016
> 
> 赞同：2
> 
> 时间：2012-10-10T20:42:59.747
> 
> 标签：c++, opencv, int

这会很长，所以我提前道歉。但我想确保理解上下文，因为我已经阅读了很多关于这个主题的帖子。我发现没有一个可以解决基于未知数字范围计算数字的问题。

我试图确定一个集合中每个整数的总出现次数。我遇到的问题是，测试集是固定的，比如一个 10 个数字的数组，但每个数字的范围是未知的。提出的问题是，当尝试使用数组来计算总数时，数组范围在运行时不能是可变的。我使用 重试了此尝试`vector<int> ArrayName`，而我可以在运行时重新调整总计数组的大小，但使用`vector<int>`计算中的值遇到了错误。

我将介绍的代码`OpenCV`用于人脸检测。我研究并利用了各种样本中的代码来创建一个基本的检测程序，然后研究并移植了一些 Java 代码来处理人脸移动并更新到新位置时的跟踪。所有这些代码都在工作。

我想使用请求的信息的地方是，我想存储一个数组，例如`10`，检测到人脸的最后一个主题，并找到随着时间的推移检测到最多的主题，并将其视为主题。比方说，我们正在检测 10，最后十帧检测如下（-1 是未知人脸）`-1, -1, 0, 0, 0, 3, 0, -1, 0, 2`：。在计数之后，`0`出现最频繁，因此主题是`0`。Range 未知的原因是主题 ID 取决于训练的主题数量并且总是在变化。

这三个错误是（并用 //ERROR 表示）：

```
invalid use of member (did you forget the '&' ?), 
no match for call to '(std::vector<int>) (int)', 
no match for call to '(std::vector<int>) (int)&' 
```

这是代码：

```
 struct FaceStruct {
    private:
        static const int NewLife = 120; //Divide by FPS for Length in Time
        static const int TotalTrackedSubjects = 10;
        int Life;
        vector<int> Subjects;
    public:
        void Init( Rect, int );
        void addSubject( int );
        int Subject();
        Rect Location;
        bool Used;
        void Weaken();
        void Renew();
        bool Dead();
    };
    void FaceStruct::Init( Rect location, int subject = -1 ) {
        Location = location;
        Subjects.resize( TotalTrackedSubjects - 1 );
        for( int i = 0; TotalTrackedSubjects - 1; i++ ) {
            Subjects(i) = -1; //ERROR
        }
        Renew();
    }
    void FaceStruct::addSubject( int subject ) {
        for( int i = 0; TotalTrackedSubjects - 2; i++ ) {
            Subjects(i) = Subjects( i + 1 );  //ERROR
        }
        Subjects( TotalTrackedSubjects - 1 ) = subject;  //ERROR
    }
    int FaceStruct::Subject() {
        int count_range = -1;
        for( int i = 0; TotalTrackedSubjects - 1; i++ ) {
            if( Subjects(i) > count_range ) count_range = Subjects(i); //ERROR
        }
        if( count_range < 0 ) { //Subject Unknown
            return -1;
        } else if( count_range == 0 ) { //Subject is 0, Handle 0's
            int totals = 0;
            for( int i = 0; TotalTrackedSubjects - 1; i++ ) {
                if( Subjects(i) == 0 ) totals++; //ERROR
            }
            return totals;
        } else { //Use count_range
            vector<int> totals;
            int unknowns = 0;
            totals.resize( count_range );
            for( int i = 0; TotalTrackedSubjects - 1; i++ ) {
                if( Subjects(i) < 0 ) { //ERROR
                    unknowns++;
                } else {
                    totals( Subjects(i) ) = totals( Subjects(i) ) + 1; //ERROR
                }
            }
            int largest = -1;
            for( int i = 0; totals.size() - 1; i++ ) {
                if( totals(i) > largest ) largest = totals(i); //ERROR
            }
            return largest;
        }
    }
    void FaceStruct::Weaken() {
        Life--;
    }
    void FaceStruct::Renew() {
        Life = NewLife;
    }
    bool FaceStruct::Dead() {
        if( Life < 1 ) {
            return true;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:48:46.243

要访问数组中的项目，您应该使用 [] 而不是 ()

所以 `Subjects(i)`应该 `Subjects[i]` 和
`totals( Subjects(i) ) = totals( Subjects(i) ) + 1;` 应该是 `totals[ Subjects[i] ] = totals[ Subjects[i] ] + 1;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:48:57.427

听起来地图可以做得相当好......

```
#include <map>

int example_values[10] = {-1, -1, 0, 0, 0, 3, 0, -1, 0, 2};

map<int, int> counts;
for (int i = 0; i < 10; ++i) ++counts[example_values[i]];

for (map<int, int>::iterator i = counts.begin(); i != counts.end(); ++i)
    cout << i->first << ": " << i->second << endl; 
```

输出：

```
-1: 3
0: 5
2: 1
3: 1 
```

（它们可能不是那个顺序。我觉得它们会是，但我忘记了地图是如何排列它们的内容的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:04:35.333

代码有几个问题：

1) 向量的数组访问使用数组下标运算符 [] 而不是函数运算符 ()

2) 方法和成员的命名使用不一致的样式，成员和方法应该仅根据名称来区分。让一个成员和方法只有一个容易错过的's'不同是自找麻烦。

3）考虑使用映射或优先级队列而不是向量，这应该会删除很多非算法细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:10:52.430

你的循环条件看起来不对。

```
for( int i = 0; TotalTrackedSubjects - 1; i++ ) { 
```

这相当于写：

```
int i = 0;
while(9){
  ...
  i++
} 
```

for 循环结构的第二部分是退出条件。

我认为是：

```
for( int i = 0; i < TotalTrackedSubjects; i++ ) { 
```

否则你的循环将永远不会停止。

# php - 使用“魔法类”来避免 PHP 致命错误，好主意吗？

> ID：12828018
> 
> 赞同：1
> 
> 时间：2012-10-10T20:43:01.373
> 
> 标签：php, oop, design-patterns, singleton, magic-methods

在我的许多网站上，我使用了一个名为“Logger”的自制 PHP 类（基本上，它用于将信息记录到日志文件中，并按日期：年/月......自动组织这些文件）。

我通过在我的引导文件中创建一个 Logger 实例来使用它（包含在任何地方）：

```
require 'lib/Logger.class.php';
$mainLogger = new Logger('./my_log_folder'); 
```

这迫使我`$mainLogger`在需要记录某些内容的每个函数中设置全局，并在调用任何方法之前检查记录器是否已实例化：

```
function foo($bar){
    global $mainLogger;
    if( !is_null($mainLogger) ){
        // If the logger is instanciated, I can log my message
        $mainLogger->log('error', 'mysql-errors', "My error message lorem ipsum dolor sit amet", Logger::GRAN_MONTH);
    }
} 
```

为了使这个工具更容易使用和编写更少的代码，我正在考虑创建一个函数（在 Logger 类之外）来处理`$mainLogger`（接近单例设计模式的东西）的实例化和检索：

```
function getLogger(){
    global $mainLogger;
    if( !isset($mainLogger) ){
        if( class_exists('Logger') ){
            // Instanciation of the main logger
            $mainLogger = new Logger('./my_log_folder');
        } else {
            // The Logger class doesn't exists, so we'll return a magical object to "mimic" the logger attributes & methods, thus avoiding fatal errors
            return new MagicalClass();
        }
    }
    return $mainLogger;
}

class MagicalClass {
    public function __get($name){
        return;
    }
    public function __call($name, $args){
        return $this; // Allow to chain calls to this class, like jQuery : getLogger->foo()->bar()...
    }
} 
```

MagicalClass 旨在避免致命错误（致命错误：调用未定义的方法...），例如调用此方法可能引发的错误（不包括 Logger.class.php）：

```
getLogger->log('error', 'mysql-errors', "My error message lorem ipsum dolor sit amet", Logger::GRAN_MONTH); 
```

感谢**_*电话****和*****_get**，任何尝试使用 Logger 类的属性或方法都不会导致任何错误（错误日志记录是一个可选功能，如果 Logger 不存在，它不应该让应用程序崩溃）。**

 **您如何看待这种方法，这是一个坏主意吗？这会给我带来一些麻烦吗？什么样的？

谢谢

PS：如果你想看 Logger 类，你可以在我的网站上[下载](http://www.finalclap.com/download/item/61-php-log-archiving-class)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:47:44.500

您在此处描述的“问题”可以通过多种方式解决。最常见的3个是：

1.  使用`factory class`. 工厂类是对象生成工厂。工厂本身是一个静态或单例类，在一个类中全局使用。

2.  的使用`Dependency Injection`。使用这种技术，记录器类被注入到类的构造函数中。该类保留对记录器的引用以供以后使用。

3.  使用`Inversion of Control`(IoC) 容器。这是 1 和 2 的组合。容器保持的是一个创建对象的列表，当需要一个新对象时，它会被创建，并且依赖对象会自动注入到构造函数中。

例子：

**工厂类**

```
class Foo
{
  public function Bar()
  {
    $logger = ClassFactory::CreateLogger();

    $logger->log('error', 'mysql-errors', 
      "My error message lorem ipsum dolor sit amet", Logger::GRAN_MONTH);
  }
} 
```

**依赖注入**

```
class Foo
{
  private $logger;

  public function __construct($logger)
  {
    $this->logger = $logger;
  }

  public function Bar()
  {
    $this->logger->log('error', 'mysql-errors', 
      "My error message lorem ipsum dolor sit amet", Logger::GRAN_MONTH);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:43:13.770

我不相信你需要这个魔法课。

首先，这个魔法类没有实现`Logger`，所以类型提示（这是一件好事）不起作用。其次，由于您的魔术类没有实现或扩展`Logger`，任何 IDE 也不会在魔术类上显示自动完成功能。确实是坏事。

`Logger`如果之前没有加载，你只需要魔法类。这是非常基本的故障，应该很容易检测到。最简单的方法是将 包含`Logger`在现在具有魔术类的文件中。

另一方面，您如何保证您的功能`getLogger()`可用？如果`Logger`可能不可用，则功能可能相同，并且您的代码同样会失败。

代码改进：不要使用这个：

```
function getLogger(){
    global $mainLogger; 
```

您不需要全局变量，您只需要一个变量来存储您的记录器以供以后检索。改用静态变量：

```
function getLogger(){
    static $mainLogger; 
```

如果你在它那里，这个函数可以直接进入工厂类并被静态调用。然后该变量`$mainLogger`将成为该类的静态属性，可能在私有范围内。**

# forms - Drupal 以其他内容的形式添加内容

> ID：12828025
> 
> 赞同：1
> 
> 时间：2012-10-10T20:43:48.227
> 
> 标签：forms, drupal, drupal-7, entityreference

我正在使用 Drupal 7，目前面临以下问题：

我有一个数据库，其中包括*地址*和*服务*。这种关系使得每个*服务*都需要一个*地址*（只有一个）。在 Drupal 中，*地址*和*服务*都是内容类型，并且*服务*具有将其与地址相关联的字段（使用[EntityReference](http://drupal.org/project/entityreference "实体参考")模块）。

创建新*服务*时，用户可以为其选择现有*地址*，但需要事先创建*地址。*我想知道是否可以为*服务*创建一个内容创建表单，该表单也包含*地址*的所有字段。如果用户手动填写所有字段，则会创建一个新*服务*和一个新*地址。*还应该有一个选择地址的选项（从列表或建议框中）。这样做后，地址字段将自动填充来自现有*地址*的数据，并且在提交时，表单将导致创建新*服务*与先前存在的*地址*相关（就像现在一样）。我在 Django 中做了一个非常相似的事情，它非常简单，不需要非常特定于应用程序的代码。我想知道在 Drupal 中是否有同样简单的方法。

简而言之-我正在寻找一种*服务*内容创建表单，它可以在选择现有*地址*或“就地”创建新地址（即以相同的形式）之间进行选择。

我还想补充一点，我对 Drupal 比较陌生（尽管我有 php 经验），而且我很难正确命名我面临的问题。因此，这个问题的标题很可能不相关和/或这个问题已在另一个问题中得到解决（是的，我搜索了它）。如果是这种情况，请随时为我指明正确的方向。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:04:18.020

[引用对话框模块](http://drupal.org/project/references_dialog)应该正是您所需要的！它应该允许您在不离开当前编辑屏幕的情况下添加引用节点！

它不会将字段放在那里，但您不必离开屏幕即可创建引用节点。

这是你的想法吗？

# c# - 使用 C# 在文本文件中搜索模式

> ID：12828026
> 
> 赞同：0
> 
> 时间：2012-10-10T20:43:54.157
> 
> 标签：c#, regex, pattern-matching, text-files

我有多个文本文件。我需要`'UA-8798837-1'`下面代码中的值（没有 qoutes）。所以步骤将是-：

1.  打开文本文件 abc.txt 。
2.  搜索从`"_gaq.push".`
3.  如果模式匹配，我会跳过几个字符`"(['_setAccount', ".`
4.  选择键`'UA-8798837-1'`（不带引号）。
5.  将此键值保存在名为“key”的变量中。

文本文件的代码 -:

```
<script type="text/javascript">//<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8798837-1']);
<script> 
```

所以基本上我需要搜索一个模式，如果找到，我需要跳过几个字符来选择字符“'”之后的代码并复制这个值直到再次找到字符“'”。选择从字符开始`" ' "` `'UA-8798837-1'`并以字符`" ' "`值结束为 UA-8798837-1。请告诉我该怎么做。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:46:38.353

This is a pretty simple regex:

`/\[\'_setAccount\', \'(.+)\'/`

You can see what the matched groups will look like [here.](http://rubular.com/r/KFVfpd9LjP)

And in case you haven't worked with regex in C# before, [this](http://www.dotnetperls.com/regex-match) is a good place to get started. Since you want to work with multiple matches, [this link](http://www.dotnetperls.com/regex-matches) is probably even more relevant.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:17:43.363

我认为您正在寻找这个正则表达式：

```
(?<=_gaq\.push\(\['_setAccount',\s')(.*)(?=') 
```

如果情况总是如此，您可以使用该正则表达式来匹配您正在寻找的密钥。

但我不会给你在 C# 代码中获取它的代码，请让我知道你尝试了什么。谢谢。

希望能帮助到你。

# r - 格子中用于多个 y 变量的条件面板函数

> ID：12828027
> 
> 赞同：4
> 
> 时间：2012-10-10T20:43:57.053
> 
> 标签：r, lattice

我有一个数据集，其中值 ( `mean`) 可以或不能落在 and 给出的区间`lower.bound`内`upper.bound`。我想用它来绘制它`lattice`并且已经取得了一些非常好的东西，但是仍然缺少三件事，我不知道如何解决（我对 比较陌生`lattice`）。

```
df <- read.table("http://pastebin.com/raw.php?i=FQh6F12t")

require(lattice)
lattice.options(default.theme = standard.theme(color = FALSE))

head(df)
##    code topic problem mean lower.bound upper.bound consistent
## 7  A04C  coke      MP 99.5       36.45       95.95          0
## 8  A04C  coke      MT 47.5       22.78      100.00          1
## 11 A04C  girl      MP 50.0        4.75        9.75          0
## 12 A04C  girl      MT 99.5       20.00      100.00          1
## 23 A14G  coke      MP 88.5       21.25       66.75          0
## 24 A14G  coke      MT 82.5       48.36      100.00          1    

dotplot(lower.bound + mean + upper.bound ~ code | problem * topic, 
       data = df, pch = c(6, 3, 2), scales = list(x = list(draw = FALSE)),
       as.table = TRUE) 
```

这会产生： ![在此处输入图像描述](../Images/0090381e697d5aea868a7f2f6dff63c7.png)

向下箭头/三角形表示下限，向上箭头/三角形表示上限，`+`标记`mean`. 我想添加以下内容但不知道如何添加（除了显然自定义面板功能）：

1.  **`pch`基于`mean`值是否在区间内的条件。**变量`consistent`表明了这一点（0 = 在区间之外）。`pch`应该`1`用于区间内`3`的值和区间外的值。（下限和上限的 pch 应保持不变）
2.  **标记间隔。**我想在每个 x 轴刻度之间画一条更粗的`lower.bound`线。`upper.bound`
3.  **将区间外的值比例添加到面板标题**（例如，`MP; 58.6%`添加到左上角的面板）。

对于 1 和 2，我的问题显然是，当有多个 y 变量时，我不知道如何处理自定义面板函数（即，如何基于此编写条件面板函数）。但我在上面找不到任何东西。

对于 3，区间外的值的比例由以下内容给出：

```
1 - with(df, tapply(consistent, list(topic, problem), mean))
##          MP     MT
## coke 0.5862 0.1724
## girl 0.8276 0.1724 
```

如果答案还包括一个很好的 x 轴上的级别排序，那肯定是一个加号。每个面板中的顺序可以改变（即，即使在彼此上方的面板中，相同的 x 轴刻度也可以对应于不同级别的`code`）。但这并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T01:35:27.293

好吧，这不是很漂亮，但它应该可以完成真正的工作（向您展示如何使这种情节发挥作用）。

基本思想是重写公式，使其 LHS 上没有一堆名称（即`lower.bound + mean + upper.bound`）。该语法等同于指定一个`groups=`术语，最终会触发`panel.superpose()`以您想要的方式进行自定义的一种痛苦。

相反，我只是`mean`在 LHS 上包含，然后使用`subscripts`自定义面板功能内部来挑选每种情况下的匹配元素`upper.bound`和`lower.bound`。

我希望其余的都是不言自明的：

```
LABS <- LETTERS[1:4]
with(df,
     dotplot(mean ~ code | problem * topic,
             lb=lower.bound, ub=upper.bound, mpch = c(3,1)[consistent+1],
             ylim = extendrange(c(0,100)),
             panel = function(x, y, lb, ub, mpch, ..., subscripts) {
                 panel.dotplot(x, y, ..., pch=mpch[subscripts])
                 lpoints(x, lb[subscripts], pch=6)
                 lpoints(x, ub[subscripts], pch=2)
                 lsegments(x,lb[subscripts],x,ub[subscripts],col="grey60")
                 ltext(x=x[3], y=95, LABS[panel.number()], col="red",fontface=2)
             },
             scales = list(x = list(draw = FALSE)), as.table = TRUE)
     ) 
```

![在此处输入图像描述](../Images/db0e72342b3260599f7bcb9a05e3f6d6.png)

# ruby-on-rails - 未定义的方法`asset_data_uri' - Rail 3.2

> ID：12828030
> 
> 赞同：4
> 
> 时间：2012-10-10T20:44:16.333
> 
> 标签：ruby-on-rails

我有部分“person.css.erb”：

```
 #caption {
   background-image: url(<%= asset_data_uri("caption.png") %>); 
   text-align: center;
 } 
```

当部分渲染失败时：

```
undefined method `asset_data_uri' 
```

rails 资产管道指南有一个使用此方法的示例：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

类似的助手工作，例如。资产路径。我正在使用 Rails 3.2.8。指南过时了吗？方法改名了吗？我是否需要做一些特别的事情才能让这个助手包含在内？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-15T15:00:29.203

`asset_data_uri`在我的视图中使用时我遇到了同样的错误（`asset_path`工作）并且无法弄清楚为什么。这不完全是您的问题，但我可以通过将其添加到我的`application_helper.rb`：

```
# Copied from Sprockets::Context.asset_data_uri, and slightly modified.
def asset_data_uri path
  asset = Rails.application.assets.find_asset path

  throw "Could not find asset '#{path}'" if asset.nil?

  base64 = Base64.encode64(asset.to_s).gsub(/\s+/, "")
  "data:#{asset.content_type};base64,#{Rack::Utils.escape(base64)}"
end 
```

# sql - 如何对逗号分隔的列执行按位运算？

> ID：12828032
> 
> 赞同：1
> 
> 时间：2012-10-10T20:44:34.903
> 
> 标签：sql, sql-server-2008, tsql

我有一个有 2 列的表：

```
ID (INT) (PK)  NumList (VARCHAR)
1              2,4,25
2              2,12,25,33
3              3,10 
```

我如何假设向该表中添加一列并对列表中的数字应用 OR (|) 运算符？

```
ID   NewCol
1    31
2    63
3    11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:08:24.710

```
create table tbl (
    ID int,
    NumList VARCHAR(100));
insert tbl select
    1, '2,4,25' union all select
    2, '2,12,25,33' union all select
    3, '3,10';

select t.ID, t.NumList, sum(distinct power(2,v.number)) newcol
from tbl T
outer apply (values (cast('<a>'+REPLACE(NumList,',','</a><a>')+'</a>' as xml))) X(xml)
outer apply X.xml.nodes('/a') N(Num)
left join master..spt_values v on v.type='P' and v.number between 0 and 30
    and power(2,v.number) & N.Num.value('.','bigint') > 0
group by t.ID, t.NumList
order by t.ID

=== results
ID   NumList      newcol
---- ------------ -----------
1    2,4,25       31
2    2,12,25,33   63
3    3,10         11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:49:48.503

您将添加新列，并且您可能必须编写一个触发器来执行计算并在 NumList 更改时在插入或更新时填充新列。触发器必须解析 NumList 中的数字，进行计算，然后将结果放入新列中。

有关 T-SQL 中按位运算符的说明，请参阅下面的链接（尽管您似乎已经知道如何使用这些运算符，只是想知道如何填充列？）

[http://msdn.microsoft.com/en-us/library/ms176122.aspx](http://msdn.microsoft.com/en-us/library/ms176122.aspx)

# php - 如何根据这些标准对数据库记录进行排序？

> ID：12828033
> 
> 赞同：1
> 
> 时间：2012-10-10T20:44:40.530
> 
> 标签：php, mysql

我有一个名为**match**的表，其中包含这 4 个字段（都是整数）：

```
1.id
2.team1
3.team2
4.winner_team 
```

一些示例记录，您可以看到它的样子：

```
id | team1 | team2 | winner_team
--------------------------------
1  | 3     | 15    | 3
--------------------------------
2  | 20    | 8     | 8
--------------------------------
3  | 18    | 11    | 18
--------------------------------
4  | 8     | 7     | 8
--------------------------------
... 
```

现在，我需要根据团队的获胜次数对表格进行排序。例如，在示例中，您会看到winner_team 的编号。8 是 2（在我的真实表中有更多记录，因此 winner_team 可以有例如 10 次或更多次出现）。

基本上，我希望根据获胜次数（代表该团队作为获胜者团队的次数）从最好到最差的前 20 名团队。如果是 team1 或 team2 根本没有关系。

我觉得我需要使用 group_by 或类似的东西，但我不知道该怎么做。

有人可以用这种情况下的 mysql select 和 php 代码来帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:49:25.790

```
select winner_team, count(id) as wins
from your_table
group by winner_team
order by wins desc
limit 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:56:59.967

我认为这就是你需要的[http://sqlfiddle.com/#!2/4cc3b/3](http://sqlfiddle.com/#!2/4cc3b/3)

基本上，您使用 MySQL 函数 COUNT() 和 GROUP BY 来获得结果。

# java - Java Enum 找不到符号错误

> ID：12828035
> 
> 赞同：3
> 
> 时间：2012-10-10T20:44:45.497
> 
> 标签：java

我最近遇到了这个错误，我花了很长时间才弄清楚。

我想我应该把它贴在这里以防其他人也可能遇到它，尽管这种可能性可能非常低（见下文）。

我最近开始在Java中使用枚举，如下

```
public enum State {
    ON, OFF
} 
```

然后，在我的从 扩展的对象中`Thread`，有一个名为 state 的变量：

```
public class Example extends Thread {
    private State state;
    public Example() { state = State.OFF; } // initialize object at OFF state 
```

然而，这将在编译时产生错误，如下所示：

```
./Example.java:3: error: cannot find symbol
    state = State.OFF;
                 ^
  symbol:   variable OFF
  location: class State
1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:44:45.497

在为此苦苦挣扎了大约一个小时后，我发现了问题所在。

实际上有一个类名`State`是`Thread`对象的一部分。因此，当我调用 时`State.OFF`，编译器正在寻找这种状态，但找不到。

你可以通过尝试去掉`extends Thread`类声明中的部分来解决这个问题，它会运行良好。如果您将`enum`类型的名称从更改为`State`其他名称，例如。`States`，那也不错。所以你只会在从 Thread 扩展并使用 State 作为名称时遇到这个问题。

仅供参考，您可以通过执行以下操作找出 Thread 对象的所有不同状态：

```
for (State s : State.values() {
    System.out.println(s);
} 
```

你会得到类似的东西：

```
NEW
RUNNABLE
BLOCKED
WAITING
TIMED_WAITING
TERMINATED 
```

我必须说，对于像我这样的菜鸟来说，这很有趣。

# algorithm - 如何增加/减少（版本 1）TimeUUID？

> ID：12828037
> 
> 赞同：0
> 
> 时间：2012-10-10T20:44:47.133
> 
> 标签：algorithm, cassandra, guid, uuid

如何实现给定版本 1 TimeUUID A 生成**有效**版本 1 TimeUUID B 的函数 increment(uuid)，其中：

1.  乙>甲
2.  存在 NO C 其中 B > C > A

给定版本 1 TimeUUID A 的 decrement(uuid) 也会产生**有效**的版本 1 TimeUUID B，其中：

1.  乙<甲
2.  存在 NO C 其中 B < C < A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:02:59.593

版本 1 uuid 排序在[时间戳](https://www.rfc-editor.org/rfc/rfc4122#section-4.1.4)和[时钟序列](https://www.rfc-editor.org/rfc/rfc4122#section-4.1.5)字段中表示。时间戳是一个 60 位的日期戳（代表 100 纳秒的时间增量，fwiw），而时钟序列是一个 14 位的计数器，可确保在给定时钟周期内生成的 uuid 是唯一的。因此，您可以将 v1 uuid 视为具有 74 位序列号，时间戳为高位，时钟序列为低位。因此，要以原子方式将 UUID 加一，您只需要...

1.  解析出时间戳和时钟序列字段
2.  将时钟序列加一
3.  如果时钟序列 >= 2^^14，将其设置为零并将时间戳字段加一
4.  将字段写回原始 UUID。

请注意，由于包含时钟序列的两个八位字节也包含 uuid 变体，因此步骤 #1 和 #4 稍微复杂一些，因此您需要进行一些按位操作来提取/设置 14-时钟序列的位。

要减少 uuid，只需重复上述操作，除了步骤 2 和 3，如果时钟序列为零，则将其设置为 2^^14-1，并将时间戳减一。

最后，如果 60 位时间戳上溢/下溢，您必须自己决定要做什么。鉴于时间戳 0 意味着 UUID 是在莎士比亚结婚时（公元 1582 年）生成的，而时间戳 2^^60-1 意味着它是由您的（伟大的^^150）孙子在公元 5238 年生成的..我希望这不是太大的问题。

# orbeon - Orbeon - Found a valid lock file

> ID：12828040
> 
> 赞同：1
> 
> 时间：2012-10-10T20:44:53.797
> 
> 标签：orbeon

I'm having an application that access orbeon many times concurrently. I found that sometimes when I stop/start the orbeon WAR this message appears:

**The database directory seems to be locked by another instance. Found valid lock file: /"path"/orbeon.war/WEB-INF/exist-data/dbx_dir.lck**

I stop and start Orbeon and it start working again.

Do you have any idea why this could be happening?

Regards,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:31:11.217

[这是一个由eXist 数据库](http://exist-db.org/)创建的锁定文件，它与 Orbeon Forms 捆绑在一起。此锁定文件的目的是防止两个 eXist 实例访问磁盘上的相同数据文件，因为这最终会导致数据损坏。

当您关闭应用程序服务器（例如 Tomcat）时，应该删除锁定文件。但是根据您的操作方式，eXist 可能没有机会删除其锁定文件，因此在您下次启动它时会抱怨。

但是，您无需担心。如果您确定永远不会有另一个 eXist 实例访问相同的文件，您甚至可以删除该锁定文件作为用于启动 Tomcat 的脚本的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T21:04:11.467

停止现有服务为我解决了这个问题。

# javascript - How to get the formatted address from a dragged marker in Google Version Maps

> ID：12828044
> 
> 赞同：23
> 
> 时间：2012-10-10T20:45:18.707
> 
> 标签：javascript, google-maps, google-maps-api-3, geolocation, google-maps-markers

I have made a Google map that lets you input an address into a text field. It then navigates you to the address that you entered into the text field and leaves a draggable marker that when dragged shows you the Lat and Long and The Geolocated Address.

I instead of displaying the above address, would like when you drag the marker to display in the bottom corner the Address of the Marker and the not the inputted address from the text field.

I have tried a number of methods to no avail. lonlat[0].formatted_address was amongst some of the things i tried.

I got my reference from [Google](https://gmaps-samples-v3.googlecode.com/svn-history/r49/trunk/draggable-markers/draggable-markers.html)

My code is below:

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Geocoding Simple</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script src="http://maps.google.com/maps/api/js?v=3.5&amp;sensor=false"></script>

<script type="text/javascript">
var geocoder;
var map;
function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
zoom: 8,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
map.setCenter(results[0].geometry.location);

var marker = new google.maps.Marker({
    map: map,
    draggable: true,
    position: results[0].geometry.location

});
   // Javascript//
   google.maps.event.addListener(marker, 'dragend', function(evt){
   document.getElementById('current').innerHTML = '<p>Marker dropped: Current Lat: ' + evt.latLng.lat().toFixed(3) + ' Current Lng: ' + evt.latLng.lng().toFixed(3) + '</p>';
   });

   google.maps.event.addListener(marker, 'dragstart', function(evt){
   document.getElementById('current').innerHTML = '<p>Currently dragging marker...</p>';
   });

   google.maps.event.addListener(marker, 'dragend', function(evt){
   document.getElementById('info').innerHTML = '<p>Address:  ' + results[0].formatted_address + '</p>';
   });

   google.maps.event.addListener(marker, 'dragstart', function(evt){
   document.getElementById('info').innerHTML = '<p>Currently dragging marker...</p>';
   });

 map.setCenter(marker.position);
 marker.setMap(map);

  } else {
    alert("Geocode was not successful for the following reason: " + status);
    }
     });
        }
</script>

<style type="text/css">
#controls {
position: absolute;
bottom: 1em;
left: 100px;
width: 400px;
z-index: 20000;
padding: 0 0.5em 0.5em 0.5em;
}
html, body, #map_canvas {
        margin: 0;
        width: 100%;
        height: 100%;
}
</style>
</head>
<body onLoad="initialize()">
<div id="controls">
<input id="address" type="textbox" value="Sydney, NSW">

<input type="button" value="Geocode" onClick="codeAddress()">
<div id="current" style="background-color:white;">Nothing yet...</div>
<div id="info" style="background-color:white;">Address:</div>
</div>
</div>

<div id="map_canvas"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-10T22:21:29.620

您需要使用反向地理编码服务（如您链接到的示例中所示）来检索格式化的地址。

该示例中的此代码调用反向地理编码器并使用响应来显示它返回的 formatted_address：

```
function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
} 
```

这是调用它的 dragend 侦听器：

```
 google.maps.event.addListener(marker, 'dragend', function() {
    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
  }); 
```

[这是一个工作示例（将从反向地理编码器接收到的地址放在信息窗口中）](http://www.geocodezip.com/v3_GoogleEx_geocoding-reversegeocoding-simple.html)

**代码片段：**

```
var geocoder;
var map;
var marker;
var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });
}

function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      marker.formatted_address = responses[0].formatted_address;
    } else {
      marker.formatted_address = 'Cannot determine address at this location.';
    }
    infowindow.setContent(marker.formatted_address + "<br>coordinates: " + marker.getPosition().toUrlValue(6));
    infowindow.open(map, marker);
  });
}

function codeAddress() {
  var address = document.getElementById('address').value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      if (marker) {
        marker.setMap(null);
        if (infowindow) infowindow.close();
      }
      marker = new google.maps.Marker({
        map: map,
        draggable: true,
        position: results[0].geometry.location
      });
      google.maps.event.addListener(marker, 'dragend', function() {
        geocodePosition(marker.getPosition());
      });
      google.maps.event.addListener(marker, 'click', function() {
        if (marker.formatted_address) {
          infowindow.setContent(marker.formatted_address + "<br>coordinates: " + marker.getPosition().toUrlValue(6));
        } else {
          infowindow.setContent(address + "<br>coordinates: " + marker.getPosition().toUrlValue(6));
        }
        infowindow.open(map, marker);
      });
      google.maps.event.trigger(marker, 'click');
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}

google.maps.event.addDomListener(window, "load", initialize);
```

```
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#map_canvas {
  height: 100%;
}

@media print {
  html,
  body {
    height: auto;
  }
  #map_canvas {
    height: 650px;
  }
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div>
  <input id="address" type="textbox" value="Sydney, NSW">
  <input type="button" value="Geocode" onclick="codeAddress()">
</div>
<div id="map_canvas" style="height:90%;top:30px"></div>
```

# virtual-machine - How does a Hypervisor know a VM needs CPU time?

> ID：12828053
> 
> 赞同：2
> 
> 时间：2012-10-10T20:45:49.457
> 
> 标签：virtual-machine

So I know some (if not all) major Hyper-visors are capable of scheduling more CPU time for more needy guests, while throttling down the CPU time of idle ones.

How does the Hypervisor know if a guest is spending it's time idling?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:52:19.060

开始：一台普通的电脑是做什么的？当它空闲时，它会向 CPU 发送空闲指令，CPU 会自行关闭一段时间。（这是一个戏剧性的过度简化，但对于这个问题来说足够准确。）

VM 中会发生一些事情：如果另一个 VM 有待处理的指令，Hypervisor 会拦截空闲指令，否则它会使处理器本身空闲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:49:53.383

现代操作系统将 CPU 置于空闲状态，（主要）关闭 CPU 以等待下一个中断 - 这个过程被 Hypervisor 捕获，允许它暂停 VM，直到它需要被唤醒。

# objective-c - passing char to function in c (is the book wrong?)

> ID：12828054
> 
> 赞同：1
> 
> 时间：2012-10-10T20:45:49.983
> 
> 标签：objective-c, c, char

I'm reading the book `"Objective-C Programming The Big Nerd Ranch Guide"`.

* * *

They give out this code:

```
void congratulateStudent(char student, char course, int numDays)
{
printf("%s has done as much %s Programming as I could fit into %d days.\n", student, course, numDays);
} 
```

and **call** it with this:

```
congratulateStudent("Mark", "Cocoa", 5); 
```

This gives me this warning:

```
Format specifies type 'char *' but the argument has type 'char' 
```

* * *

Is the book wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:49:37.177

可能有错别字。

`Char`仅表示单引号中的一个字符，如`'a'`.

一个常量字符串在双引号中并衰减为一个`char*`或字符指针，就像这样。

```
"Hello World" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:49:19.923

是的，如果这是书上所说的，那绝对是一个错误，它应该是 char * 作为方法中的参数，就像警告所说的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T20:49:34.340

是的，这是不正确的。也许是打印错误。只需让他们指针：

```
void congratulateStudent(char* student, char* course, int numDays) 
```

从技术上讲，在 C 中将不正确的格式字符串传递给`printf`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T20:49:25.993

是的，这本书有一个错字。

您应该使用`char*`而不是`char`C 函数的两个参数

# asp.net-mvc - Why ActionLink rendering Querystring values on Dev server, but not on my local environment?

> ID：12828059
> 
> 赞同：2
> 
> 时间：2012-10-10T20:46:35.577
> 
> 标签：asp.net-mvc, razor, query-string, actionlink

I have an MVC project I've been working on in a local Dev environment.

This link is behaving oddly:

```
@Html.ActionLink("Kindergarten", "GradeKTo5", "WhoAreYou", new { grade = "K" }, null) 
```

**Local:** `http://localhost:3095/WhoAreYou/GradeKTo5/K`

**Dev:** `http://redacted.org/WhoAreYou/GradeKTo5?grade=K`

I'd like it to work as displayed in local environment. In fact, if I do provide the {controller}/{action}/{grade} formatted URL everything works fine - this is what leads me to believe I'm screwing something up in my use of ActionLink.

In a different partial view, I have the following line of code:

```
@Html.ActionLink(department.Text, ViewContext.RouteData.Values["Action"].ToString(), "WhoAreYou", new { grade, dept = department.Value }, null) 
```

What am I missing? Why would the same code render querystring values in one environment, but the appropriate route data values on another?

# ios - 使用完成处理程序使用 NSURLConnection sendAsynchronousRequest 进行身份验证

> ID：12828060
> 
> 赞同：12
> 
> 时间：2012-10-10T20:46:36.483
> 
> 标签：ios, authentication, nsurlconnection

通常，我喜欢使用完成处理程序块使用 NSURL 的 sendAsynchronousRequest 类方法“触发并忘记”，但是当需要身份验证时，这似乎不是一个选项。

当使用像这样的完成处理程序样式请求时：

```
[NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mysite.com/"]]
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

                            //Do Stuff   

                           }]; 
```

处理身份验证的正确方法是什么？我是否需要分配和初始化 NSURLConnection 并设置委托而不是使用此类方法样式？我想我了解如何使用委托函数正确进行身份验证，但我试图弄清楚是否可以将其包含在 completionHandler 块中，或者是否有更好的方法来做到这一点。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

    if ([challenge previousFailureCount] > 0) {
        NSLog(@"Authentication Failure");
        [connection cancel];
    }
    else
    {

        NSURLCredential *credential = [NSURLCredential credentialWithUser:self.username
                                                                 password:self.password
                                                              persistence:NSURLCredentialPersistenceForSession];
        [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T19:24:48.173

我认为 completionHandler 方法是针对基本请求的。也许您可以考虑使用[AFNetworking](https://github.com/gowalla/AFNetworking)，因为我将它与块方法和身份验证一起使用。

编辑....您是否尝试将身份验证标头添加到 NSURLRequest？创建一个 NSMutableURLRequest：

```
NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.example.com/"]]; 
```

并像这样添加身份验证标头：

```
NSString *basicAuthCredentials = [NSString stringWithFormat:@"%@:%@", userName, password];
NSString *authValue = [NSString stringWithFormat:@"Basic %@", AFBase64EncodedStringFromString(basicAuthCredentials)];
[urlRequest setValue:authValue forHTTPHeaderField:@"Authorization"]; 
```

AFBase64EncodedStringFromString 函数是这样的：

```
static NSString * AFBase64EncodedStringFromString(NSString *string) {
    NSData *data = [NSData dataWithBytes:[string UTF8String] length:[string lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];
    NSUInteger length = [data length];
    NSMutableData *mutableData = [NSMutableData dataWithLength:((length + 2) / 3) * 4];

    uint8_t *input = (uint8_t *)[data bytes];
    uint8_t *output = (uint8_t *)[mutableData mutableBytes];

    for (NSUInteger i = 0; i < length; i += 3) {
        NSUInteger value = 0;
        for (NSUInteger j = i; j < (i + 3); j++) {
            value <<= 8;
            if (j < length) {
                value |= (0xFF & input[j]);
            }
        }

        static uint8_t const kAFBase64EncodingTable[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

        NSUInteger idx = (i / 3) * 4;
        output[idx + 0] = kAFBase64EncodingTable[(value >> 18) & 0x3F];
        output[idx + 1] = kAFBase64EncodingTable[(value >> 12) & 0x3F];
        output[idx + 2] = (i + 1) < length ? kAFBase64EncodingTable[(value >> 6)  & 0x3F] : '=';
        output[idx + 3] = (i + 2) < length ? kAFBase64EncodingTable[(value >> 0)  & 0x3F] : '=';
    }

    return [[NSString alloc] initWithData:mutableData encoding:NSASCIIStringEncoding];
} 
```

然后调用你之前调用的函数，但使用你的新 NSURLRequest：

```
[NSURLConnection sendAsynchronousRequest:urlRequest
  queue:[NSOperationQueue mainQueue]
  completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

}]; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-13T11:28:51.060

即使问题已经解决了一段时间，我想添加一个不需要 3rd 方库的解决方案：

```
//HTTP Authentication
NSString *authStr = [NSString stringWithFormat:@"%@:%@", @"Username", @"Password"]];
NSData *authData = [authStr dataUsingEncoding:NSASCIIStringEncoding];
NSString *authValue = [authData base64Encoding];

//Set up Request:
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
[request setURL:[NSURL URLWithString:url]];
//...
// Pack in the user credentials
[request setValue:[NSString stringWithFormat:@"Basic %@",authValue] forHTTPHeaderField:@"Authorization"];

// Send the asynchronous request as usual
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *responseCode, NSData *responseData, NSError *error) {

    // Do stuff..

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T15:45:42.323

> ```
> NSURLConnection is deprecated in iOS 9, try this code which is from LazyTableImages example from here [https://developer.apple.com/library/ios/samplecode/LazyTableImages/Introduction/Intro.html][1] 
> ```

```
 @property (nonatomic, strong) NSURLSessionDataTask *sessionTask;

    //somwere in your code

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                    initWithURL:[NSURL URLWithString:self.postLink] ];

    [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
    [request setHTTPShouldHandleCookies:NO];
    [request setTimeoutInterval:60];
    [request setHTTPMethod:@"POST"];
    [request addValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"token"]
   forHTTPHeaderField:@"ACCESSTOKEN"];

    self.sessionTask = [[NSURLSession sharedSession] dataTaskWithRequest:request
                                                           completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
    //do completion staff here
    }]; 
```

# delphi - Windows 2008 and wrong BPL loading

> ID：12828068
> 
> 赞同：0
> 
> 时间：2012-10-10T20:47:01.437
> 
> 标签：delphi, windows-server-2008-r2, runtime-packages

I have an application builded with Run-time Packages. When the executable starts it auto loads the required packages (.bpl).

Recently we has installed an Windows 2008 R2 server to use as Terminal Services.

We maintain some old compiled versions of our application in different paths, like this:

```
c:\app\version_1\common.bpl
c:\app\version_1\app.exe

c:\app\version_2\common.bpl
c:\app\version_2\app.exe 
```

Common.bpl is the a run-time package what app.exe depends on.

THE PROBLEM:

I start `"c:\app\version_2\app.exe"` and it loads `"c:\app\version_2\common.bpl"`. When I start the `"c:\app\version_1\app.exe"` it loads the WRONG bpl (from version_2).

The path `"c:\app\version_2\"` isn't at the system search path.

At Windows2003 server this problem doesn't occurs.

What can I do to solve this?

Thanks!

* * *

I have downloaded the Process Explorer (microsoft sysinternals), and checked the loaded modules of each executable, all they are correct!

But I noticed another problem. After start the second version, an entry-not-found-error occurs, telling me what a initialization entry point, of an unit what only exists in one of the versions, could not be found.

Something is very strange. The ProcessExplorer is telling me that the process is loading the correct modoles, but when they are running this seems not be happening.

Seems the applications are sharing the loaded modules.

* * *

**SOLVED**

There was a MouseHook using FindVCLWindow, this was generating the AV.

Sorry about inconvenience guys, and thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:59:49.230

If the BPLs are statically linked into the EXEs, and if the `version_2` BPL is already in memory when the `version_1` EXE is run, Windows will re-use the existing BPL in memory, it will not re-load a new copy of the other BPL. This is [documented behavior](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx):

> If lpFileName does not include a path and there is more than one loaded module with the same base name and extension, the function returns a handle to the module that was loaded first.

When using static linking, there is no path information, so the OS loader has to go off of the file names by themselves.

To do what you are attempting, you need to create a .local file for each EXE to isolate them from each other so they can load their respective DLLs in parallel.

[DLL/COM Redirection on Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375142.aspx)

[Dynamic-Link Library Redirection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682600.aspx)

# jquery - Breaking out a single page jquery mobile app, but then compiling it as one page? Any ideas on how to do this?

> ID：12828071
> 
> 赞同：1
> 
> 时间：2012-10-10T20:47:11.007
> 
> 标签：jquery, jquery-mobile

I've been working with JQM a quite awhile now - and as many of you know it really shines when all of the page structures are in one page. This becomes quite a little maintenance issue if multiple people are working on the same file. So I was thinking what if there was a way similar to how I use less to run a compile of seperate .jqm files and merge them into one page structure.

Has anyone ever done this?

For those that have used less. I do something like this for my CSS files

layout.less pages.less

Then I have one app.less that essentially I run through less compiler and it spits out my nicely formatted CSS from the layout.less and page.less

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:19:44.753

我们使用[**Grunt**](http://gruntjs.com/)进行 JS 编译，浏览他们的插件，我看到一个名为**“contrib-stylus 将 LESS 文件编译为 CSS”的插件。**无论如何，如果您还没有听说过 Grunt，它似乎是一种将脚本添加到您的环境中的新方法，并且可以做很多很酷的事情。

另外，多页面 jQM 项目有什么问题？更少的初始加载，后续页面的 AJAX 加载很好，如果你把所有的 JS 放在一个地方，管理起来并不难。

# symfony - Sonataadminbundle：同一实体的多个管理部分

> ID：12828072
> 
> 赞同：23
> 
> 时间：2012-10-10T20:47:29.193
> 
> 标签：symfony, symfony-sonata, sonata-admin

我有`Page`带有 column的实体类`type=integer`。当我做：

```
 <service id="sonata.admin.pages" class="Main\ProgramBundle\Admin\PageAdmin">
      <tag name="sonata.admin" manager_type="orm" group="dashboard" label="Pages"/>
      <argument />
      <argument>Main\ProgramBundle\Entity\Page</argument>
      <argument>SonataAdminBundle:CRUD</argument>
  </service>

   <service id="sonata.admin.groups" class="Main\ProgramBundle\Admin\GroupAdmin">
      <tag name="sonata.admin" manager_type="orm" group="stories" label="Groups"/>
      <argument />
      <argument>Main\ProgramBundle\Entity\Page</argument>
      <argument>SonataAdminBundle:CRUD</argument>
  </service> 
```

简而言之，这两个部分都在同一个实体上工作，只是每个部分都有不同的查询和表单。

但是，即使我选择 PageAdmin，奏鸣曲总是执行 Admin/GroupAdmin。这该怎么做？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-12T10:31:49.360

我没有足够的声誉来为上一个答案添加评论，但它缺少以下信息：

除了在管理类中的 $baseRoutePattern 之外，您还需要定义一个唯一的 $baseRouteName 值：

```
protected $baseRouteName = 'admin_vendor_bundlename_adminclassname';

protected $baseRoutePattern = 'unique-route-pattern'; 
```

你只需要对一个班级这样做，但考虑在两个班级都这样做，以保持清楚发生了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T09:45:55.737

Sonata 会根据您的实体名称自动创建路线。因此，如果您有 2 个管理类，则存在冲突。您必须配置不同的路由模式。

将此属性添加到 Main\ProgramBundle\Admin\GroupAdmin.php：

```
protected $baseRouteName = 'page_group';
protected $baseRoutePattern = 'page-group'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T21:15:48.890

您当然找到了解决方案，但另一种方法是创建父类并使用[继承映射继承](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html)。然后，您可以拥有不同的存储库，并且奏鸣曲管理员的工作方式不会有所不同。

# spring-mvc - 使用 spring-test-mvc 测试 DELETE

> ID：12828075
> 
> 赞同：1
> 
> 时间：2012-10-10T20:47:32.293
> 
> 标签：spring-mvc, jboss, junit, tdd, spring-test-mvc

我正在使用 Spring MVC 创建 RESTful 端点。我正在使用 spring-test-mvc 在单元/集成测试级别测试它们。我现在遇到了这个团队第一次尝试使用 DELETE 实现端点。这意味着需要设置容器以允许删除（PUT 将在不久之后出现）。我的研究把我带到了这里：

[http://www.codereye.com/2010/12/configure-tomcat-to-accept-http-put.html](http://www.codereye.com/2010/12/configure-tomcat-to-accept-http-put.html)

从技术上讲，我正在使用 JBoss，但我感觉 Tomcat 的文章就可以了。无论如何，我的问题不在容器级别。

我正在尝试创建一个单元测试来验证最基本的 404。假设您尝试删除调用 /users/{id} 的用户。我的测试通过了一个无效的 id，我希望返回 404。它给出了 405。当不支持 DELETE 时，这是有道理的。按照上面链接中的说明，我应该在 web.xml 中添加一些条目。我在主要和测试中这样做了。两者仍然给了我405。

我将如何设置 spring-test-mvc 以从 web.xml 或其他位置获取这些新的 http-method 类型？除了最初不支持 DELETE 之外，我的研究还没有提出任何建议。

谢谢达斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:02:03.923

Spring-test-mvc 确实支持 DELETE（和 PUT），我已经将它与基于 DELETE 的方法一起使用，确实需要为 DELETE http 方法添加`HiddenHttpMethodFilter`过滤器才能在您的应用程序中工作，但是 spring-test-mvc 确实`web.xml`不看过滤器，它是从`DispatcherServlet`下开始工作的，这是对我有用的示例之一：

```
 mockMvc.perform(delete("/members/1").contentType(MediaType.APPLICATION_JSON))
        .andExpect(status().isOk()); 
```

我觉得您看到的错误可能与`content-type`or更相关`accept headers`，这就是我看到返回 405 的地方，您可以将日志级别更改为调试或跟踪，看看还会出现什么。

# c++ - 为什么 std::regex_iterator 会导致此数据的堆栈溢出？

> ID：12828079
> 
> 赞同：7
> 
> 时间：2012-10-10T20:47:46.687
> 
> 标签：c++, regex, c++11

我一直在使用`std::regex_iterator`解析日志文件。我的程序已经运行了好几个星期，并且已经解析了数百万条日志行，直到今天，当今天我针对一个日志文件运行它时，出现了堆栈溢出。事实证明，日志文件中只有一个日志行导致了问题。有谁知道为什么我的正则表达式会导致如此大规模的递归？这是一个显示问题的小型自包含程序（我的编译器是 VC2012）：

```
#include <string>
#include <regex>
#include <iostream>

using namespace std;

std::wstring test = L"L3  T15356 79726859 [CreateRegistryAction] Creating REGISTRY Action:\n"
                L"  Identity: 272A4FE2-A7EE-49B7-ABAF-7C57BEA0E081\n"
                L"  Description: Set Registry Value: \"SortOrder\" in Key HKEY_CURRENT_USER\\Software\\Hummingbird\\PowerDOCS\\Core\\Plugins\\Fusion\\Settings\\DetailColumns\\LONEDOCS1\\Search Unsaved\\$AUTHOR.FULL_NAME;DOCSADM.PEOPLE.SYSTEM_ID\n"
                L"  Operation: 3\n"
                L"  Hive: HKEY_CURRENT_USER\n"
                L"  Key: Software\\Hummingbird\\PowerDOCS\\Core\\Plugins\\Fusion\\Settings\\DetailColumns\\LONEDOCS1\\Search Unsaved\\$AUTHOR.FULL_NAME;DOCSADM.PEOPLE.SYSTEM_ID\n"
                L"  ValueName: SortOrder\n"
                L"  ValueType: REG_DWORD\n"
                L"  ValueData: 0\n"
                L"L4  T15356 79726859 [CEMRegistryValueAction::ClearRevertData] [ENTER]\n";

int wmain(int argc, wchar_t* argv[])
{
    static wregex rgx_log_lines(
        L"^L(\\d+)\\s+"             // Level
        L"T(\\d+)\\s+"              // TID
        L"(\\d+)\\s+"               // Timestamp
        L"\\[((?:\\w|\\:)+)\\]"     // Function name
        L"((?:"                     // Complex pattern
          L"(?!"                    // Stop matching when...
            L"^L\\d"                // New log statement at the beginning of a line
          L")"                      
          L"[^]"                    // Matching all until then
        L")*)"                      // 
        );

    try
    {
        for (std::wsregex_iterator it(test.begin(), test.end(), rgx_log_lines), end; it != end; ++it)
        {
            wcout << (*it)[1] << endl;
            wcout << (*it)[2] << endl;
            wcout << (*it)[3] << endl;
            wcout << (*it)[4] << endl;
            wcout << (*it)[5] << endl;
        }
    }
    catch (std::exception& e)
    {
        cout << e.what() << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:10:32.807

在每个字符上测试的负前瞻模式对我来说似乎是个坏主意，而你想要做的并不复杂。您想匹配 (1) 行的其余部分，然后 (2) 任意数量的以下 (3) 行以 L\d 以外的内容开头（小错误；见下文）：（另一个编辑：这些是正则表达式；如果要将它们写为字符串文字，则需要更改`\`为`\\`.)

```
 .*\n(?:(?:[^L]|L\D).*\n)*
 |   |  |
 +-1 |  +---------------3
     +---------------------2 
```

在 Ecmascript 模式下，`.`不应匹配 \n，但您始终可以`.`将该表达式中的两个 s替换为`[^\n]`

编辑添加：我意识到如果在日志条目结束之前有一个空行，这可能不起作用，但这应该涵盖这种情况；为了更加精确，我改为`.`：`[^\n]`

```
 [^\n]*\n(?:(?:(?:[^L\n]|L\D)[^\n]*)?\n)* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:48:48.153

正则表达式似乎没问题；至少其中没有任何东西会导致灾难性的回溯。

我认为优化正则表达式的可能性很小，减少了堆栈的使用：

```
static wregex rgx_log_lines(
    L"^L(\\d+)\\s+"             // Level
    L"T(\\d+)\\s+"              // TID
    L"(\\d+)\\s+"               // Timestamp
    L"\\[([\\w:]+)\\]"          // Function name
    L"((?:"                     // Complex pattern
      L"(?!"                    // Stop matching when...
        L"^L\\d"                // New log statement at the beginning of a line
      L")"                      
      L"[^]"                    // Matching all until then
    L")*)"                      // 
    ); 
```

您是否[设置了 ECMAScript 选项](http://en.cppreference.com/w/cpp/regex/syntax_option_type)？否则，我怀疑正则表达式库默认为 POSIX 正则表达式，并且那些不支持前瞻断言。

# c - 尝试将文本文件加载到数组中，出现段错误。任何想法为什么？

> ID：12828080
> 
> 赞同：0
> 
> 时间：2012-10-10T20:47:50.007
> 
> 标签：c, arrays, segmentation-fault

这个函数的任务相当简单。给定一个 char* 数组、一个指向文件的指针和一个最大字长，它会读取文件并将每个字一个接一个地复制到 char* 数组中。由于文件中每行一个单词，因此用作单词之间的分隔符是有意义`\n`的。所以考虑到这一点，代码应该很容易解释：

```
void loadDictionary(char* strDictionary[], FILE* filePointer, int nMaxLetters)
{
    int nNameCount= 0, nCursor = 0;
    char* strCurrent;
    char cCurrent;

    //allocate space for a word
    strCurrent = malloc(nMaxLetters * sizeof(char));

    while ((cCurrent = fgetc(filePointer)) != EOF) {

        if(cCurrent != '\n')
        {
            strCurrent[nCursor] = cCurrent;
            nCursor++;

        } else { //then we've reached the end of the line (word)

            //add null termination to string
            strCurrent[nCursor] = '\0'; //SEG FAULT

            //copy string to dictionary
            memcpy(strDictionary[nNameCount], strCurrent, strlen(strCurrent)+1);

            //increment count
            nNameCount++;

            //reset the cursor
            nCursor = 0;
        }
    }
} 
```

此代码在我调用的行处生成分段错误`strCurrent[nCursor] = '\0';`。我不知道为什么，因为从表面上看，这个操作似乎应该与我调用的另一个块中的操作没有什么不同`strCurrent[nCursor] = cCurrent;`。strCurrent 应该分配了足够多的空间来存储所有必要的字符。所以，我有些不知所措。帮我解决这个问题，伙计们。

注意：我想我可能会更容易使用`fgets`而不是`fgetc`完成这项任务。我很可能会转向那个；但是，由于我遇到了一个我不理解的错误，所以在我理解它之前，我不想让它不管。

编辑：

有人指出，`memcpy`操作中可能会出现错误，可能`strDictionary`是分配不当造成的。这是分配的`main`块。`strDictionary`也许我犯了一个错误：

```
int main(int argc, char* argv[])
{
    char** strDictionary;
    FILE* filePointer;
    int nResults = 0, nLines = 0, nNumLines, nMaxChars, i;

    filePointer = fopen("dictionary.txt", "r");

    //obtain the number of lines and the maximum word size of the dictionary
    countLines(filePointer, &nNumLines, &nMaxChars);

    //allocate memory for strDictionary
    strDictionary = malloc(nNumLines * nMaxChars * sizeof(char));
    printf("%d words in dictionary. Longest word is %d letters\n",
            nNumLines, nMaxChars);
    //Output here correctly prints: 1000 and 21

    //reset the file pointer (not sure if this is a necessary step, but oh well)
    filePointer = fopen("dictionary.txt", "r");

    //load dictionary into memory
    loadDictionary(strDictionary, filePointer, nMaxChars);
    for (i=0; i<10; i++)
        printf("%dth element of dictionary: %s\n", i, strDictionary[i]);

    return 0;
} 
```

编辑2：

好的，我决定使用`fgets()`而不是`fgetc()`大大简化我的功能。我也做了我认为正确的`malloc()`操作`strDictionary`。但是，我仍然遇到段错误。这是更新的代码：

```
void loadDictionary(char* strDictionary[], FILE* filePointer, int nMaxLetters)
{
    printf("Call to loadDictionary. nMaxLetters = %d\n", nMaxLetters);
    int nWordCount= 0, nCursor = 0;
    char* strCurrent;
    char cCurrent;

    strCurrent = malloc(nMaxLetters); //allocate space for a word

    while (fgets(strCurrent, nMaxLetters, filePointer) != NULL)
    {
        memcpy(strDictionary[nWordCount], strCurrent, strlen(strCurrent)+1);
        nWordCount++;
    }
}

int main(int argc, char* argv[])
{
    char** strDictionary;
    FILE* filePointer;
    int nResults = 0, nLines = 0, nNumLines, nMaxChars, i;
    filePointer = fopen("dictionary.txt", "r");

    //count the lines in the file (works fine)
    countLines(filePointer, &nNumLines, &nMaxChars);

    //allocate space for the dictionary
    strDictionary = malloc(nNumLines * sizeof(char*));
    for (i = 0; i<nLines; i++)
        strDictionary[i] = malloc(nMaxChars * sizeof(char));
    printf("%d words in dictionary. Longest word is %d letters\n",
            nNumLines, nMaxChars);

    //load dictionary into array
    filePointer = fopen("dictionary.txt", "r");
    loadDictionary(strDictionary, filePointer, nMaxChars);
    for (i=0; i<10; i++)
        printf("%dth element of dictionary: %s\n", i, strDictionary[i]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:17:11.487

这里：

```
char cCurrent;
...
while ((cCurrent = fgetc(filePointer)) != EOF) { 
```

您正在将`fgetc()`type 的值截断`int`为`char`。这可能会导致 while 条件无法正确识别`EOF`。`cCurrent`必须是`int`。

这里：

```
//allocate space for a word
strCurrent = malloc(nMaxLetters * sizeof(char)); 
```

`nMaxLetters`必须考虑一个额外的字符来表示字符串 NUL 终止符。是否入账？

顺便说一句，`sizeof(char)`始终为 1。

现在，这个参数声明：

```
char* strDictionary[] 
```

相当于：

```
char** strDictionary 
```

或者，IOW，一个指向指向 a 的指针的指针`char`。这是因为在 C 中，数组永远不会作为参数传递，只有指向它们的第一个元素的指针才是，尽管括号中的欺骗性语法暗示某些东西是数组。

这一行：

```
memcpy(strDictionary[nNameCount], strCurrent, strlen(strCurrent)+1); 
```

将把`nNameCount`'th 指针指向 a`char`并写入它指向的字符数据。

但是调用函数分配的字符串缓冲区（长度`nMaxLetters`）是否至少与文件中的行数一样多？在将这个数组传递给 char 之前，它是否会用指向这些缓冲区的指针填充一些指向 char 的指针数组`loadDictionary()`？IOW，此代码期望调用者执行以下操作：

```
#define nMaxEntries 1000

char* dictionary[nMaxEntries];
int i;
FILE* f;

...

for (i = 0; i < nMaxEntries; i++)
  dictionary[i] = malloc(nMaxLetters);

loadDictionary(dictionary, f, nMaxLetters); 
```

内存分配失败必须在上面的代码中检查。另外，我强烈建议传入`nMaxEntries`或使用它，`loadDictionary()`这样如果文件的行数多于`nMaxEntries`. `nNameCount`不应该超越`nMaxEntries`。

**更新**到更新的问题...

这里：

```
char** strDictionary;
...
strDictionary = malloc(nNumLines * nMaxChars * sizeof(char)); 
```

您没有按照上述分析`char`的`loadDictionary()`预期创建一个指针数组，而是创建了一个`char`. 因此，段错误很可能不会发生在这一行：

```
 strCurrent[nCursor] = '\0'; //SEG FAULT 
```

但是在下一个，这在调试器中可能不明显，直到您放大并查看代码的反汇编：

```
 //copy string to dictionary
 memcpy(strDictionary[nNameCount], strCurrent, strlen(strCurrent)+1); 
```

**更新2：**

我不明白你为什么现在为`nNumLines`指针分配空间：

```
strDictionary = malloc(nNumLines * sizeof(char*)); 
```

但是在这些`nNumLines`指针中，您初始化了`nLines`指针（`nLines`如果我正确阅读了您的最新代码，则永远不会变成 0 以外的任何东西）：

```
for (i = 0; i<nLines; i++)
    strDictionary[i] = malloc(nMaxChars * sizeof(char)); 
```

有什么诀窍？错字？

# date - vba中的日期变量使用sql查询

> ID：12828083
> 
> 赞同：2
> 
> 时间：2012-10-10T20:48:04.453
> 
> 标签：date, datetime, vb6

我在 VB6 中有一个查询：

```
"select plate_no from INFO where date_time between #07-10-2012 01:13:17# and #10/10/2012 11:30:25#" 
```

我的 Access 数据库表具有数据类型 Data/Time 的一般格式的列。

如何修改上面的查询以使用如下变量：

```
Public t1 As Date 
Public t2 As Date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:00:26.577

我是从记忆中做的，可能需要对其进行调整才能编译：

```
Public t1 as Date
Public t2 as Date

t1 = #10/07/2012 01:13:17# '7th of October 2012
t2 = #10/10/2012 11:30:25# '10th of October 2012

sql = "select plate_no from INFO where date_time between #" + Format(t1, "YYYY-MM-DD HH:MM:SS") + "# and #" + Format(t2, "YYYY-MM-DD HH:MM:SS") + "#" 
```

# xslt - XSLT 验证错误 javax.xml.transform.TransformerConfigurationException：

> ID：12828086
> 
> 赞同：0
> 
> 时间：2012-10-10T20:48:41.030
> 
> 标签：xslt

当我尝试验证我的 XSLT 时出现此错误

```
javax.xml.transform.TransformerConfigurationException: 
  javax.xml.transform.TransformerException: 
  javax.xml.transform.TransformerException: 
    A node test that matches either NCName:* or QName was expected. 
```

这是我的 XSLT

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="html" />
<xsl:template match="\Apps">
<html>
<head> <title>Apps List</title>
<link rel="StyleSheet" href="table_style.css" type="text/css"/>
<style type="text/css">
body {font-family: Helvetca;}
h1 { color : Grey;}
h2 {color : Blue;}</style>
</head>
<body>
<h1> Apps List: <xsl:value-of select="\@List_Type" /></h1>
<p>This is a list of all currently hot apps:</p>
<xsl:for-each select="\App">
<xsl:if test="\App\@installed == true">
<h2 style="color:Green;"><xsl:value-of select="\App\app_name" />(instaled)</h2>
</xsl:if>
<xsl:otherwise>
<h2><xsl:value-of select="\App\app_name" /></h2>
</xsl:otherwise>
<p style="font-style:bold;">App info:</p>
<table id="#gradient-style">
<tr><th>Category:</th><td><xsl:value-of select="\App\catogry" /></td></tr>
<tr><th>Verdion:</th><td><xsl:value-of select="\App\version" /></td></tr>
<tr><th>Description:</th><td><xsl:value-of select="\App\description" /></td></tr>
<tr><th>App Reviews:</th><td><xsl:for-each select="\App\reviews\review">
<span style="font-style:bold;"><xsl:value-of select="\App\reviews\review\reviewer_name" /></span>
| <xsl:value-of select="\App\reviews\review\review_date" /> 
| <xsl:value-of select="\App\reviews\review\review_Time" /><br/>
<span style="font-style:bold;">Rating:</span>
<xsl:value-of select="string(\App\reviews\review\rating" /> <br/>
<xsl:value-of select="\App\reviews\review\ontent" /><br/>
----------------------------------------------------------
</xsl:for-each>
</td></tr>
</table>
</xsl:for-each>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

这是尝试使用的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="ShdenXSLT.xsl"?> 
<Apps xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" List_Type="new releases" >
<App device_type="tablet" app_id="120">
<app_name>Meeting Manager</app_name>
<catogry>LifeStyle </catogry>
<catogry>Bussnisse </catogry>
<version>1.0</version>
<description>This app is about managing the bussnisse meeting</description>
<reviews>
<review>
<reviewer_name>Shaden</reviewer_name>
<review_date>2012-02-13</review_date>   
<review_time>11:35:02</review_time>
<content>it was a useful app</content>
<rating>4.5</rating>
</review>         
<review>
<reviewer_name>Mohamed</reviewer_name>
<review_date>2012-03-01</review_date>
<review_time>12:15:00</review_time>
<content>i really loved this app</content>
<rating>5.0</rating>
</review>
</reviews>
</App>

<App device_type="tablet" app_id="100">
<app_name>ToDoList</app_name>
<catogry>LifeStyle </catogry>
<version>3.4.2</version>
<description>a simple To Do List applecation</description>
<reviews>
<review>
<reviewer_name>Fahad</reviewer_name>
<review_date>2010-02-05</review_date>
<review_time>09:40:55</review_time>
<content>nice app</content>
<rating>4.0</rating>
</review>
</reviews>
</App>
</Apps> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:30:59.903

您使用反斜杠 ( `\`) 作为 XPath 分隔符 (ie `<xsl:value-of select="\@List_Type" />`)，这是不正确的。它应该是一个正斜杠 ( `/`)

# c++ - 此示例中是否需要重载 operator=？

> ID：12828091
> 
> 赞同：0
> 
> 时间：2012-10-10T20:49:13.630
> 
> 标签：c++

> **可能的重复：**
> [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

人们说如果你需要一个析构函数，那么你实际上需要一个重载的`operator=`

```
struct longlife{ };
class z
{
 z(){};
 ~z(){ for( auto it=hold.begin();it!=hold.end() ++it ) delete(*it); };
 vector<longlife*> hold;
}; 
```

假设所有插入的指针`hold`都是`new`堆分配的，为什么除了这个例子需要解构函数之外还有什么？

`anything else`我的意思是，

```
z& operator=( const z&ref )
{
 hold = ref.hold;
 return *this;
} 
```

将：

```
z a;
a.hold.push_back( heap_item );
z a2;
a2 = a; 
```

导致内存泄漏？有时很难理解为什么三规则是**规则**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:53:42.303

不仅需要赋值运算符，还需要实现复制构造函数。否则，编译器将提供默认实现，这将导致两个副本（在赋值/复制构造之后）包含指向相同`longlife`实例的指针。然后，两个副本的析构函数将`delete`导致这些实例导致未定义的行为。

```
z a;
a.hold.push_back( heap_item );
z a2;
a2 = a; 
```

两者都`a.hold[0]`包含`a2.hold[0]`一个指向相同的指针`heap_item`；从而在销毁过程中造成双重删除。

避免必须实现赋值运算符和复制构造函数的简单方法是使用智能指针将`longlife`实例保存在`vector`.

```
std::vector<std::unique_ptr<longlife>> hold; 
```

现在甚至不需要为你的类编写析构函数。

* * *

对于 C++03，您的选择是使用`std::tr1::shared_ptr`(or `boost::shared_ptr`) 代替`unique_ptr`或使用[`boost::ptr_vector`](http://www.boost.org/libs/ptr_container/doc/ptr_vector.html)（当然，这也是 C++11 的选项）代替`std::vector`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T20:52:08.250

因为如果没有赋值运算符和复制构造函数，您最终可能会得到多个`hold`指向同一个堆项的向量，从而在销毁时导致未定义的行为：

```
z firstZ;
if (somethingIsTrue) {
    z otherZ = firstZ;
    // play with otherZ...
    // now otherZ gets destructed, along with longlife's of the firstZ
}
// now it's time to destroy the firstZ, but its longlife's are long gone! 
```

当然，如果您使用对象向量或“智能指针”向量，而不是“普通旧”指针向量，您当然不会遇到这个问题。

有关更多信息，请参阅[*三法则。*](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T20:51:29.137

实际上这里会有双重释放，而不是内存泄漏。

STL 容器存储对象，而不是引用。在你的情况下`object`是一个指针。指针被简单地复制。您的行将`a2 = a;`在向量中复制指针。之后，每个析构函数都会释放指针。

双重释放比内存泄漏危险得多。它会导致令人讨厌的未定义行为：

```
MyStruct *p1 = new MyStruct();
delete p1;
.... do something, wait, etc.
delete p1; 
```

同时在另一个线程上：

```
MyOptherStruct *p2 = new MyOtherStruct();
.... do something, wait, etc.
p2->function(); 
```

结果可能是内存分配器将分配给用于`p2`的完全相同的值`p1`，因为它在第一次调用 后是空闲的`delete p1`。稍后第二个`delete p1`也会正常，因为分配器认为这是一个为`p2`. 问题只会出现在`p2->function();`. 查看线程 2 的代码，绝对不可能理解出错的原因和原因。这非常难以调试，尤其是在系统很大的情况下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T20:52:54.900

这将导致`a`or的析构函数`a2`（以第二个被销毁的为准）上的双重删除（和崩溃），因为默认赋值构造函数将对`hold`. 所以每个对象`a`最终`a2`都会删除完全相同的内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T21:03:43.653

从您的评论中：

> @Xeo，我了解三规则是什么，问题主要是为什么它是规则

考虑一下这里发生了什么：

```
z& operator=( const z&ref )
{
 hold = ref.hold;
 return *this;
} 
```

假设您有一个实例`z`：

```
z myz;
myz.a.hold.push_back( new long_life ); 
```

...然后您创建一个副本`myz`：

```
z my_other_z;
// ...
my_other_z = myz; 
```

您在上面提供的`operator=`实现只是复制`vector`. 如果`vector`有指针，它不会复制所指向的任何内容——它只是复制指针本身的文字副本。

因此，在返回后，您将有 2 个具有指向同一事物的指针的`operator=`实例。`z`当这些`z`s 中的第一个被破坏时，它将删除指针：

```
~z(){ for( auto it=hold.begin();it!=hold.end() ++it ) delete(*it); }; 
```

当第二个`z`被销毁时，它会再次尝试`delete`指向同一个指针。这会导致未定义的行为。

此问题的解决方案是在分配或复制维护需要分配和删除的资源的对象时进行深拷贝。这意味着提供一个赋值运算符和一个复制构造函数。

这就是为什么三规则是规则的原因。

编辑：

正如其他人所提到的，通过使用值语义和 RAII 可以更好地避免这一切。正如其他人所说，重新设计您的对象以使用零规则是一种更好的方法。

# objective-c - 使用在运行时创建的 UIButton 切换 UIImageView 的动画

> ID：12828109
> 
> 赞同：2
> 
> 时间：2012-10-10T20:49:56.787
> 
> 标签：objective-c, xcode, uiimageview, uibutton, uiviewanimation

我是 Objective C 的新手，我正在尝试使用在运行时创建的 UIButton 和 UIImageView 将 UIImageView 的动画从屏幕上的一个设置位置切换到屏幕上的另一个设置位置。当我按下 UIButton 时，我希望 UIImageView 从一个位置动画到另一个位置，并且 UIButton 的 setBackgroundImage 切换到另一个 imageNamed: 状态。

任何帮助将不胜感激！

```
// UIImageView - Roof Panel Creation
roofPanel = [[UIImageView alloc]initWithFrame:CGRectMake(300, 400, 400, 400)];
[roofPanel setImage:[UIImage imageNamed:@"roof-panel.png"]];
[self.view addSubview:roofPanel];

// UIButton - Panel Lift Button Creation
panelLiftButton = [[UIButton alloc]initWithFrame:CGRectMake(722, 300, 70, 50)];
[panelLiftButton setImage:[UIImage imageNamed:@"panel-lift-button.png"] forState:UIControlStateNormal];
[self.view addSubview:panelLiftButton]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:28:50.830

首先欢迎来到 Objective C，你会喜欢用这门伟大的语言编写代码......

您必须将 UIControlStateSelected 的图像设置为 UIButton，然后添加目标（UIButton 的 IBAction），如下面的代码所示...

确保 UIControlStateSelected 和 UIControlStateNormal 的图像必须不同。

```
 panelLiftButton = [[UIButton alloc]initWithFrame:CGRectMake(722, 300, 70, 50)];
    [panelLiftButton setImage:[UIImage imageNamed:@"panel-lift-button.png"] forState:UIControlStateNormal];
    [panelLiftButton setImage:[UIImage imageNamed:@"panel-lift-button_ON.png"] forState:UIControlStateSelected];
    [panelLiftButton addTarget:self action:@selector(toggleImage:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:panelLiftButton]; 
```

然后做一个函数，如......

```
-(IBAction)toggleImage:(id)sender
{
    UIButton * btn = (UIButton*)sender;
    btn.selected = ! btn.selected;
    if (btn.selected)
    {
        [UIView animateWithDuration:0.3 animations:^{
            [roofPanel setFrame:CGRectMake(0, 0, 400, 400)];//here you can set your desired frame.
        }];
    }
    else
    {
        [UIView animateWithDuration:0.3 animations:^{
            [roofPanel setFrame:CGRectMake(300, 400, 400, 400)];//here you can set your original frame.
        }];

    }

} 
```

享受使用 Objective C 编码的乐趣。

# c# - Windows Metro 应用程序 - 为我的 UI 设置动画？

> ID：12828111
> 
> 赞同：2
> 
> 时间：2012-10-10T20:49:59.517
> 
> 标签：c#, windows, xaml, animation, microsoft-metro

我是 Windows 8 Metro 应用程序开发的初学者。由于我目前只了解 C#，所以我用 C# 编写了所有代码。我测试了这个应用程序，它运行得很好，唯一缺少的是大多数现代应用程序都有的简单动画。

当我想让我的 StackPanel 可见时的动画从左到右逐渐消失，在 C# 和 XAML 中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:07:52.457

你应该为此使用混合。它与 VS 一起提供，并且比在 VS 中操作*要*容易得多。至少在 Blend 中生成它，然后将其复制到您想要的 VS 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:26:19.143

Blend是您可以制作动画的方式。Blend 通常带有 Visual Studio 包。因此，尝试在 Blend 中打开您的应用并制作动画。如果您在制作动画时遇到任何问题，请告诉我。

# ios - 本地到全球 Adob e AIR

> ID：12828114
> 
> 赞同：0
> 
> 时间：2012-10-10T20:50:25.367
> 
> 标签：ios, flash, apache-flex, air, adobe

构建 Adob​​e AIR 应用程序 - 似乎与 localToGlobal 有问题。我一直在关注这个来为多种屏幕尺寸设置我的应用程序：

[http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html)

但我似乎总是遇到我的 localToGlobal 的问题。**我已经使用了“缩放和居中界面**”部分中的大部分代码，并且我的应用程序正在正确调整应用程序大小。

我已经转换了所有 localToGlobal 调用并将新的比例值乘以 x 和 y，但没有得到所需的结果。它在原始 iPhone 4/4s 分辨率上仍然可以正常工作，但在 3gs 分辨率上测试我的 Line Intersections 不起作用，专门使用 localToGlobal 代码来确定。

这是调用本地点的代码：

```
var p:Point = localToGlobal(_lineStart);
p = parent.globalToLocal(p);
p.x *= GameHolderSun.scaleValue;
p.y *= GameHolderSun.scaleValue;

return p; 
```

确定交点：

```
var p:Point = determineLineIntersection(_laser.get2ndLastPoint(), _laser.getLastPoint(), _reflectors[i].lineStart, _reflectors[i].lineEnd);
if(p != null){
    _laser.addNewLinePoint(p, _reflectors[i].rotation);
} 
```

我在网上抓到的 Line Intersection 函数：

```
private function determineLineIntersection(A:Point, B:Point, E:Point, F:Point,as_seg:Boolean=true):Point 
    {   
        var ip:Point;
        var a1:Number;
        var a2:Number;
        var b1:Number;
        var b2:Number;
        var c1:Number;
        var c2:Number;

        a1= B.y-A.y;
        b1= A.x-B.x;
        c1= B.x*A.y - A.x*B.y;
        a2= F.y-E.y;
        b2= E.x-F.x;
        c2= F.x*E.y - E.x*F.y;

        var denom:Number=a1*b2 - a2*b1;
        if (denom == 0) {
            return null;
        }

        ip=new Point();
        ip.x=(b1*c2 - b2*c1)/denom;
        ip.y=(a2*c1 - a1*c2)/denom;
        ip.x *= GameHolderSun.scaleValue;
        ip.y *= GameHolderSun.scaleValue;

        if(as_seg)
        {
            if(Math.pow(ip.x - B.x, 2) + Math.pow(ip.y - B.y, 2) > Math.pow(A.x - B.x, 2) + Math.pow(A.y - B.y, 2)) return null;
            if(Math.pow(ip.x - A.x, 2) + Math.pow(ip.y - A.y, 2) > Math.pow(A.x - B.x, 2) + Math.pow(A.y - B.y, 2)) return null;
            if(Math.pow(ip.x - F.x, 2) + Math.pow(ip.y - F.y, 2) > Math.pow(E.x - F.x, 2) + Math.pow(E.y - F.y, 2)) return null;
            if(Math.pow(ip.x - E.x, 2) + Math.pow(ip.y - E.y, 2) > Math.pow(E.x - F.x, 2) + Math.pow(E.y - F.y, 2)) return null;
        }

        return ip;
    } 
```

希望有人能帮忙！！如果需要，我可以提供更多信息！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:53:08.487

我相信您的问题是 DPI，至少如果您正在设置`applicationDPI`. `Stage`值不补偿强制 DPI 更改。

要解决此问题，您有两种选择：

1) 对于`stage.mouseX/mouseY`and `stage.stageHeight/Width`，你可以只使用`FlexGlobals.topLevelApplication.systemManager`属性。我相信 SystemManager 有一个 mouseX/mouseY 属性，您可以在该`screen`属性中找到新的宽度/高度

2) 您自己负责 DPI 更改。这样做相对简单。对于使用 localToGlobal，我认为这是您必须要做的。

```
var x:Number = 200; //this number is in default DPI size
var appDPI:Number = FlexGlobals.topLevelApplication.applicationDPI;
var deviceDPI:Number = Capabilities.screenDPI; //actual DPI of device

//Adobe doesn't use the actual DPI, they use either 160, 240, or 320 
//and use ranges to determine which maps where
if ( deviceDPI < 200 ) {
    deviceDPI = 160;
}
else if ( deviceDPI >= 200 && deviceDPI < 280 ) {
    deviceDPI = 240;
}
else if ( deviceDPI >= 280 ) {
    deviceDPI = 320;
}

var newX:Number = x / ( deviceDPI / appDPI ); 
```

我**强烈**建议您创建一个 Util 类并将其放入（可能是静态的）函数中，因为您最终可能会经常使用它。X var 可以是任意数字，只要不针对 DPI 更改进行调整即可。

希望有帮助。我在一块石头上敲了敲头，试图弄清楚为什么我的 stage.stageWidth 和 stage.stageHeight 值在 7 月份不正确。

# sql - 重写 SQL 并使用 group by

> ID：12828115
> 
> 赞同：1
> 
> 时间：2012-10-10T20:50:29.790
> 
> 标签：sql, oracle

我已经为其中一项要求编写了下面的 sql 并正在获取我的结果。但是，我想知道是否有更好的方法来编写这个查询，而不是使用别名表作为 A。

```
SELECT A.*,B.OPRDEFNDESC FROM 
( select OPRID_ENTERED_BY ,COUNT(*)
  from ps_req_hdr  
  where entered_dt > '01-JUL-2012'
  GROUP BY OPRID_ENTERED_BY
  ORDER BY COUNT(*) DESC) A, PSOPRDEFN B
WHERE A.OPRID_ENTERED_BY=B.OPRID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:54:32.357

您也许可以使用简单的 INNER JOIN 来做同样的事情......

```
SELECT A.OPRID_ENTERED_BY, COUNT(*), B.OPRDEFNDESC
FROM ps_req_hdr A
JOIN PSOPRDEFN B ON A.OPRID_ENTERED_BY = B.OPRID
WHERE A.entered_dt > '01-JUL-2012'
GROUP BY A.OPRID_ENTERED_BY, B.OPRDEFNDESC
ORDER BY COUNT(*) DESC 
```

**笔记**

根据下面的评论，此查询的 COUNT(*) 结果将不包括在表 B 中没有相应匹配项的记录，并且它将为表 B 中的非唯一匹配项膨胀。这意味着：如果`B.OPRID`是不是唯一字段，或者如果`A.OPRID_ENTERED_BY`不是外键，`B.OPRID`则此答案将不会产生与原始查询相同的结果。

# objective-c - UIButton 标签不会更新

> ID：12828118
> 
> 赞同：1
> 
> 时间：2012-10-10T20:50:37.810
> 
> 标签：objective-c, ios, ios5, ios6

我有一个 UIButton，上面写着“完成”。我的 UIButton 驻留在我插入到 tableview 中的 UIView 中。但是，当用户点击按钮时，我还想更新 UIButton 的标签以显示“不完整”。按钮标签不更新！如何设置按钮的标签？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T20:54:56.317

当您希望更改按钮标题时，请使用以下命令：

```
UIButton *myButton;
//
//
//
[myButton setTitle:@"Incomplete" forState:UIControlStateNormal]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:52:19.423

您需要调用 setTitle:forState [http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setTitle:forState](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setTitle:forState)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:01:53.983

尝试这样的事情：

```
if([[[button titleLabel] text] isEqualToString:@"complete"]){
   [button setTitle:@"Incomplete" forState:UIControlStateNormal];
   // do some stuff
} 
```

# c - 我的透视数学错了吗？

> ID：12828120
> 
> 赞同：0
> 
> 时间：2012-10-10T20:50:46.070
> 
> 标签：c, opengl, matrix-multiplication

每当我尝试使用我的 glmxLoadPerspective 函数时，什么都不会显示。但是，我的 glmxLoadOrtho 函数显示正常。我的数学错了吗？下面的相关代码（不相关的位被截断）：

（APP_WIDTH = 1000，APP_HEIGHT = 1000）

用法：

```
glmxMatrix ortho;
glmxGenMatrix(&ortho, GLMX_4X4); //This simply loads the identity matrix.
glmxLoadPerspective(&ortho, 45.0f, APP_WIDTH / APP_HEIGHT, 1.0f, 10.0f); //Implementation below.

glmxMatrix modelview;
glmxGenMatrix(&modelview, GLMX_4X4); //Same as above.

const GLfloat verts[] = {
   //verts
   100.0f, 100.0f, -3.0f, 1.0f,
   200.0f, 200.0f, -3.0f, 1.0f,
   100.0f,  200.0f, -3.0f, 1.0f,
   200.0f,  100.0f, -3.0f, 1.0f,
   //colors
   1.0f, 0.3f, 0.4f, 0.5f,
   0.5f, 0.1f, 0.4f, 0.3f,
   0.0f,  1.0f, 0.5f, 0.6f,
   0.0f,  1.0f, 0.5f, 0.6f,
};

glmxMultMatrix(&ortho, &modelview); 
```

截锥体功能：

```
glmxvoid glmxLoadFrustrum(glmxMatrix* matrix, glmxfloat left, glmxfloat right, glmxfloat bottom,
    glmxfloat top, glmxfloat near, glmxfloat far){
if(matrix -> mx_type != GLMX_4X4){GLMX_ERROR = GLMX_NOT_4X4; return;}
matrix -> mx_data[0] = (2.0f * near) / (right - left);
matrix -> mx_data[1] = 0.0f;
matrix -> mx_data[2] = 0.0f;
matrix -> mx_data[3] = 0.0f;
matrix -> mx_data[4] = 0.0f;
matrix -> mx_data[5] = (2.0f * near) / (top - bottom);
matrix -> mx_data[6] = 0.0f;
matrix -> mx_data[7] = 0.0f;
matrix -> mx_data[8] = (right + left) / (right - left);
matrix -> mx_data[9] = (top + bottom) / (top - bottom);
matrix -> mx_data[10] = (-far - near) / (far - near);
matrix -> mx_data[11] = -1.0f;
matrix -> mx_data[12] = 0.0f;
matrix -> mx_data[13] = 0.0f;
matrix -> mx_data[14] = -(2.0f * near) * far / (far - near);
matrix -> mx_data[15] = 0.0f;
} 
```

透视功能：

```
glmxvoid glmxLoadPerspective(glmxMatrix* matrix, glmxfloat fovy, glmxfloat aspect, glmxfloat near,
    glmxfloat far){
glmxfloat ymax = near * tanf(fovy * GLMX_PI / 360.0f), xmax = ymax * aspect;
glmxLoadFrustrum(matrix, -xmax, xmax, -ymax, ymax, near, far);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:15:36.673

据我所知，您将 x,y 不对称偏移量（8 和 9）放在第 3 列，这意味着它们与 z 相乘。我相信 8,9 应该移到 12 和 13。

# c# - 如何通过 Web 服务控制应用程序

> ID：12828124
> 
> 赞同：-1
> 
> 时间：2012-10-10T20:50:59.407
> 
> 标签：c#, web-services

我想控制应用程序（在我的情况下是 corelDraw），我知道我应该使用它的应用程序对象并且我这样做，但现在的问题是我想在 web 服务中这样做，所以据我所知，如果我把这个在 Web 服务中控制应用程序的代码，我的代码将尝试控制在服务器上而不是在客户端上的 corel 应用程序:(

所以任何提示/建议我怎么能做到这一点，并控制客户端而不是服务器上的应用程序？！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:31:26.837

正如您已经注意到 Web 服务在服务器上运行并且只有结果被传递给客户端。好吧，您有几个选项可以通过 Web 服务控制客户端计算机……这是一种可能的情况。1\. 创建将为客户端提供命令的 Web 服务 2\. 创建将使用您的 Web 服务命令的 Windows 服务（客户端） 3\. 在 Windows 服务内部，然后以适当的方式执行这些命令

好吧，我不得不说这不是我自动化 corelDraw 的首选方式，但如果你坚持使用 web 服务作为命令提供程序，它会完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:31:44.223

您需要问自己客户端和服务器之间有什么区别。客户端可以是服务器吗？服务器可以是客户端吗？

您让安装了 CorelDraw 的客户端接受 Web 服务请求，即有效地使其成为 Web 服务服务器，然后照常进行。

尽管我会说 Web 服务并不是控制 CorelDraw 等复杂应用程序的最佳方式。我会研究对等点之间的其他一些通信方式，例如不会产生 HTTP 开销的较低级别的网络通信。

# r - ggplot2：从包含 geom_histogram 的绘图对象中读取最大条形高度

> ID：12828125
> 
> 赞同：8
> 
> 时间：2012-10-10T20:51:04.940
> 
> 标签：r, ggplot2, histogram

像[以前的这张海报](https://stackoverflow.com/questions/7611691/relative-positioning-of-geom-text-in-ggplot2)一样，我也`geom_text`用来注释 gglot2 中的图。而且我想将这些注释定位在相对坐标（侧面 H 和 W 的比例）而不是数据坐标中。对于大多数情节来说很容易，但就我而言，我正在处理直方图。我确信关于 y 比例的相关信息必须潜伏在绘图对象的某个地方（添加后`geom_histogram`），但我看不到在哪里。

我的问题：如何从包含的多面 ggplot2 对象中读取最大条形高度`geom_histogram`？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:41:21.557

尝试这个：

```
library(plyr)
library(scales)

p <- ggplot(mtcars, aes(mpg)) + geom_histogram(aes(y = ..density..)) + facet_wrap(~am)
r <- print(p)
# in data coordinate
(dc <- dlply(r$data[[1]], .(PANEL), function(x) max(x$density)))
(mx <- dlply(r$data[[1]], .(PANEL), function(x) x[which.max(x$density), ]$x))

# add annotation (see figure below)
p + geom_text(aes(x, y, label = text), 
  data = data.frame(x = unlist(mx), y = unlist(dc), text = LETTERS[1:2], am = 0:1),
  colour = "red", vjust = 0)

# scale range
(yr <- llply(r$panel$ranges, "[[", "y.range"))
# in relative coordinates
(rc <- mapply(function(d, y) rescale(d, from = y), dc, yr)) 
```

![在此处输入图像描述](../Images/d86315b186922a02f63cad64c593e4c7.png)

# progress-4gl - 框架只显示表格中的最后一条记录

> ID：12828127
> 
> 赞同：0
> 
> 时间：2012-10-10T20:51:11.187
> 
> 标签：progress-4gl

希望这将是我一段时间内的最后一个问题。我知道关于 Progress 的 UI 功能没什么好说的，但是在框架中显示似乎是一个非常奇怪的问题。

这里有一些伪代码可以帮助你理解问题：

```
DEF TEMP-TABLE tMainTable.
DEF TEMP-TABLE tPage LIKE tMainTable.
DEF VAR iCursor AS INT.

/* SOME INPUT DETECTION */
/*  Moving the cursor   */

FIND FIRST tMainTable WHERE tMainTable.UniqueId EQ iCursor.
DO i = 1 TO iMaxPageSize:
    CREATE tPage.
    BUFFER-COPY tMainTable TO tPage.
END.

/* DISPLAY */
FOR EACH tPage:
    DISPLAY tPage.iNumber tPage.Name.
END. 
```

这些是程序的基础。现在所需的输出将让显示这些的 FRAME 在最后一个条目的正下方结束。目前，使用默认的 FRAME，它会缩放到终端屏幕的底部。

虽然，当我实例化一个 FRAME 并交换所有逻辑可用选项时，我可以将它调整到我想要的大小，但不能让它在单独的行中显示条目。相反，它看起来正在做的是在同一行显示每个条目，覆盖最后一个，因为它总是显示 TEMP-TABLE 中的最后一条记录。

我尝试实例化 FRAME “WITH iMaxPageSize DOWN”，但没有任何效果。在对这个特定选项进行了更深入的阅读之后，它看起来只能用于显示一个表中的多个字段，而不是多个表的某些字段。

希望这是有道理的，我真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:16:34.420

想通了，花了我 8 个小时的累计阅读时间和试错编码。

```
FOR EACH tPage WITH 6 DOWN: 
```

是我所需要的。

它仍然困扰着我，当我实例化一个 FRAME 时，尽管在 FOR EACH 中使用它，但我只能让它显示一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:44:22.390

你需要做这样的事情 - FIND / DO 组合并没有像你想象的那样做。

```
DEF TEMP-TABLE tMainTable.
DEF TEMP-TABLE tPage LIKE tMainTable.
DEF VAR iCursor AS INT.
DEF VAR i AS INT.      
i = 0.

FOR EACH tMainTable
   WHERE tMainTable.UniqueId EQ iCursor
   NO-LOCK:

   i = i + 1.
   IF i > maxpagesize THEN
      LEAVE.

   CREATE tPage.
   BUFFER-COPY tMainTable TO tPage.

END.

  /* DISPLAY */

FOR EACH tPage:
   DISPLAY tPage.iNumber tPage.Name 
      WITH DOWN.
END. 
```

# java - 测试执行中的重复测试方法TestNg

> ID：12828128
> 
> 赞同：1
> 
> 时间：2012-10-10T20:51:15.197
> 
> 标签：java, integration-testing, testng

我想在包含不同环境参数的两个环境中执行相同的测试方法。

只是我想用不同的系统参数在测试执行中复制每个测试方法。

我可以使用 IMethodInterceptor 来实现它吗？或者使用 TestNg 中的任何扩展工具。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:59:50.570

您可以使用 TestNG [@Parameter](http://testng.org/doc/documentation-main.html#parameters) ...

Java 代码：

```
@Parameter({"parameterName"})
@Test
public void testMain(String parameterName) {} 
```

TestNG XML 套件：

```
<suite name="Blah">
  <test name="1">
    <parameter name="parameterName" value="var1" />
    ...
  </test>

  <test name="2">
    <parameter name="parameterName" value="var2" />
    ...
  </test>
</suite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:52:26.763

这在很大程度上取决于您的测试是如何设计的。
如果您的系统参数当前正在您的测试中初始化并且系统设置也在测试中，那么您在运行之前所做的任何事情都将被设置回测试中的内容。

如果您将这些值作为测试的全局值，那么您可以使用侦听器根据 testng xml 中的参数更改值。参数可以处于测试级别，您可以使用 sumtin

```
<suite>
<test name="Sysconfig1">
<param name="sysparam1" value ="x"/>
<param name="sysparam2" value ="y"/>
<packages>
....
</test>
<test name="Sysconfig2">
<param name="sysparam1" value ="a"/>
<param name="sysparam2" value ="b"/>
<packages>
....
</test> 
```

然后实施`onStart(ITestContext) of ITestListener and use sysproperty1 = context.getCurrentxmltest.gtparameter.get("sysparam1")`

环境的初始化也可以在这些监听器实现中完成。只需将您实现的侦听器添加到您的 xml 文件中`<listeners>`

希望能帮助到你..

# url - 使用 nginx 提供带有自定义 URL 的静态页面

> ID：12828132
> 
> 赞同：2
> 
> 时间：2012-10-10T20:51:34.677
> 
> 标签：url, nginx

我有一堆静态 html 页面（所有内容都固定在页面上，包括所有 html、css 和 javascript），并希望使用`nginx`.

但是，我希望用户使用以下 URL 模式访问这些静态页面：

`www.example.com/public/static/filename?para=blah`

where`public/static/filename`映射到`/home/www/example/public/static/filename.html`服务器上，但仍保留`?para=blah`用户浏览器地址栏中的部分。最后添加额外`?para=blah`位的目的是，一旦`filename.html`加载了静态页面，页面内的 javascript 将剥离`blah`并基于它执行一些逻辑。

是否可以使用一些 nginx 配置有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:01:02.610

查看[try_files](http://wiki.nginx.org/HttpCoreModule#try_files)上的文档，这可能是您需要的。

类似的东西

```
location /public/static/ {
   try_files $uri $uri/ /$uri.html?&$args;
} 
```

只是随心所欲。

**编辑**：不要忘记检查针对[nginx 陷阱的解决方案](http://wiki.nginx.org/Pitfalls)

# web - 需要对大型 Web 应用程序进行编目

> ID：12828133
> 
> 赞同：2
> 
> 时间：2012-10-10T20:51:35.787
> 
> 标签：web, snapshot, catalog

我们有一个包含 560 多个页面的 Web 应用程序。我想以某种方式对站点进行编目，以便我可以查看页面（无需在菜单中找到每个页面或输入 URL）。很高兴有关于解决此问题的最佳方法的想法。

我很乐意最终得到 560 个图像文件或 PDF，或者一个大的 PDF 或其他。我可以轻松地将包含所有 URL 的脚本组合在一起，但是我需要帮助的是如何提取这些并拍摄某种快照并将其保存到一个或多个文件中。

该站点是用Java（服务器）和javascript（客户端）编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:20:11.973

我发现了一个很棒的 Firefox 插件，它使这变得相对轻松。该插件被称为 Screenshot Pimp（讨厌这个名字，喜欢它的作用）。它会拍摄浏览器内容的快照并立即将其保存到硬盘驱动器上的文件中。

因此，我编写了一个脚本，将每个页面拉到一个 IFrame 中，并在上面显示 URL，并拍摄每个页面的快照。循环浏览 560 多个页面需要几个小时，但效果很好，现在我有了所有页面的目录。

# python - Python

> ID：12828139
> 
> 赞同：0
> 
> 时间：2012-10-10T20:52:11.123
> 
> 标签：python, read-write

所以我有一段看起来像这样的代码：

`<read-write buffer ptr 0x000000000286AB78, size 855 at 0x000000000286AB40>`

我认为它应该是一个图像文件:)

我环顾四周，发现了一些链接，`memoryview`但查看文档似乎并不是我所追求的。当然，我对编程很陌生。

我想将文件保存到一个文件夹中，以便我可以看到图片。=)

任何人都知道如何解决这个问题？

您可以使用此代码访问它，只需将 [USERNAME] 替换为您的用户名：

```
import shutil
import os

shutil.copy('C:\Users\[USERNAME]\AppData\Local\Google\Chrome\User Data\Default\Favicons','C:\Users\[USERNAME]\Desktop')
con = sqlite3.connect('C:\Users\[USERNAME]\Desktop\Favicons')
cursor = con.cursor()
icon=''
for i in  cursor.execute("SELECT * FROM favicons WHERE id<6 limit 5;"): 
    icon= i,'favicons'
print('\n')
con.close()
os.remove('C:\Users\[USERNAME]\Desktop\Favicons') 
```

- - 回答 - -

```
import StringIO
from PIL import Image
file_ = StringIO.StringIO(icon)
image = Image.open(file_)
size=(128,128)
image=image.resize(size,Image.BILINEAR)
image.save('C:\icon.JPEG', 'JPEG') 
```

感谢您的想法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:09:18.047

这不是一个答案，但希望它总比没有好。至少在更好的事情出现之前。我认为您应该看看[Python Imaging Library (PIL)](http://www.pythonware.com/products/pil/)。您应该可以使用：`Image.frombuffer(mode, size, data)` [这里](http://www.pythonware.com/library/pil/handbook/image.htm)有一些附加信息。您也可以尝试`Image.open()`，因为我想您是从 sql 数据库获取图像？

```
import StringIO

data = read_from_database()

file = StringIO.StringIO(data)

image = Image.open(file)
image.thumbnail((128, 128))

outfile = StringIO.StringIO()
image.save(outfile, "JPEG") 
```

# c# - EF 对象是线程安全的吗？

> ID：12828140
> 
> 赞同：1
> 
> 时间：2012-10-10T20:52:18.423
> 
> 标签：c#, entity-framework, thread-safety, ef-code-first

在[这个](https://stackoverflow.com/questions/6126616/is-dbcontext-thread-safe)关于 DbContext 的线程安全的问题（不是）之后，我需要知道在多个线程中处理映射的 POCO 是否安全。

假设我有两个使用 CodeFirst 映射到数据库的对象：

```
class Poco1
{
    public int Id { get; set; }
    public string SomeProp {get; set;}
    public virtual List<Poco2> children { get; set; }
}

class Poco2
{
    public int id { get; set;}
    public Poco1 parent { get; set; }
} 
```

在主线程中，我正在加载 Poco1：

```
var parentPoco = _context.Poco1s.Where(...).Single(); 
```

然后我将它传递给一个任务，在那里我创建另一个对象并稍微更改父对象

```
var childPoco = new Poco2 { parent=parentPoco }; 
parentPoco.SomeProp = "Tasked!"; 
```

然后回到主线程，我将 childPoco 添加到上下文中：

```
_context.Poco2s.Add(childPoco);
_context.SaveChanges(); 
```

我没有对辅助线程中的上下文做任何事情，但我正在操作映射到它的对象。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:06:43.523

如果它们是“纯” POCO（没有更改跟踪或延迟加载），没有对“原始”线程中使用的任何其他对象的引用，那么你很好。但是大多数人使用“不纯”的[POCO 代理](http://msdn.microsoft.com/en-us/library/dd456853.aspx)，从并发线程中使用它们是不安全的。

# javascript - 多个输入的验证功能

> ID：12828144
> 
> 赞同：0
> 
> 时间：2012-10-10T20:52:31.797
> 
> 标签：javascript, jquery, jquery-validate

我有一个带有 2 个数字输入的表单，我正在尝试使用 jQuery Validation 插件对其进行验证。我希望仅当值的总和小于或等于 10 时才允许提交表单。例如，我希望允许 3 和 6，但不允许 7 和 8。我该怎么做？

我能够想出[一些可行的方法，](http://jsfiddle.net/YMdmG/)但我认为将规则任意应用于一个输入并使用该输入上的属性来引用另一个输入是不优雅和脆弱的。我查看了[该插件的文档，](http://docs.jquery.com/Plugins/Validation)但没有看到任何定义用于多个输入的验证器的方法。谁能想到更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:40:30.070

至于 jquery 验证插件。不，更简单的方法。是的，用普通的 javascript 编写你自己的。

```
function mySubmitfuntcion()
{
var myvar1 = document.GetElementById("1").value;
var myvar2 = document.GetElementById("2").value;

if(myvar1 + myvar2 <= 10) { 
return true;
}

else {
alert("Please enter valid values");

return false;
} // end if
} // end function 
```

返回 false 会阻止 mySubmitfunction() 完成。

根据我的经验，编写自定义验证脚本效果更好，因为您拥有更多控制权。请记住将验证功能添加到按钮或表单 onsubmit 事件。

# mysql - 字符组合无法从文件恢复到 mySQL

> ID：12828146
> 
> 赞同：0
> 
> 时间：2012-10-10T20:52:39.277
> 
> 标签：mysql, cmd

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:27:49.407

`chcp 850`在`cmd`运行代码之前尝试运行命令。

这将使`1.sql`文件以正确的编码加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:14:03.353

`--default-character-set=utf8`

做到了。

```
mysql -u root -p --default-character-set=utf8 dtbs < 1.sql 
```

# jquery - Jquery Mobile 1.0a2 删除列表视图箭头

> ID：12828154
> 
> 赞同：1
> 
> 时间：2012-10-10T20:53:10.400
> 
> 标签：jquery, jquery-mobile

我试图删除默认情况下出现在列表视图中的右箭头。搜索了一段时间，`data-icon="false"`但没有成功。然后我搜索了更多，发现这篇文章[JqueryMobile - Listviews 右箭头](https://stackoverflow.com/questions/4580875/jquerymobile-listviews-right-arrow)（我可能会复制这篇文章，请原谅我）

我的问题是，我如何才能删除 1.0a2 中的箭头？显然这可以使用 DOM 手术来完成，有人可以详细说明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T14:43:09.387

对于较新的 jQuery Mobile 版本，只需设置`data-icon="false"`，另请参阅[文档](http://demos.jquerymobile.com/1.4.4/listview/)

> 要完全防止图标出现，请将 data-icon 属性设置为“false”。

![在此处输入图像描述](../Images/d21ffb930c068666c5828fe7422c71f7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:25:28.857

一种解决方法是使用以下 JS / jQuery 代码“手动”删除箭头：

```
$(function() {
    $('li').removeClass("ui-btn-icon-right"); 
}); 
```

这是一个完整的工作示例，试一试：

```
<!DOCTYPE unspecified PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile.structure-1.0a2.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />
    <script src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.js"></script>

    <script>
        $(function() {
            $('li').removeClass("ui-btn-icon-right"); 
        });
    </script>
</head>

<body>
    <div data-role="page" id="p1">
        <div data-role="content">
            <ul data-role="listview" data-theme="a" >                   
                <li><a href="#p2">Go to page 2</a></li>
                <li><a href="#p3">Go to page 3</a></li>
            </ul>
        </div>
    </div>

    <div data-role="page" id="p2">
        Hello! This is page 2!!!
    </div>

    <div data-role="page" id="p3">
        Hello! This is page 3!!!
    </div>

</body>
</html> 
```

但是，我建议获取最新版本的 jQuery Mobile（目前为 1.2），它更正了几个错误，并且以这种方式更稳定。

查看网站了解更多信息：http: [//jquerymobile.com/](http://jquerymobile.com/)

希望这可以帮助。

# javascript - 可以从另一个对象方法（javascript）实例化对象

> ID：12828155
> 
> 赞同：0
> 
> 时间：2012-10-10T20:53:18.797
> 
> 标签：javascript, object, methods

有没有办法像这样从另一个对象的方法创建一个新对象？

```
var _object = {
  _method:function(name) {
    this.name = name
  }
}

var b = new _object.method('Joe') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:54:54.213

是的，而且你做得对。唯一的问题是你拼错了`._method`。将其更改为：

```
var b = new _object._method('Joe') 
```

# core-audio - Using ExtAudioFileWrite to write at the end of a file

> ID：12828159
> 
> 赞同：1
> 
> 时间：2012-10-10T20:53:35.243
> 
> 标签：core-audio, audiounit, remoteio, extaudiofile

I'm trying to open a file and append data to it using ExtAudioFileWrite. Now, creating/initial writing(on creation)/converting works just fine, but unfortunately I can't seem to be able to open the file for writing afterwards. There is only one function that seems to open the file: `ExAudioFileOpenURL` but only for reading. So, how can I write at the end of a file if I'm not able to open the file for writing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:31:58.927

我可能错了，或者没有完全理解你的问题。但是，一旦您开始使用 ExtAudioFileWrite 写入文件，您可以通过再次调用 ExtAudioFileWrite 继续写入文件。我即将冒险在没有编译器的情况下进行编码，希望你能明白

例子：

```
....variables declaration and your logic.....

//1.Create File to write output
ExtAudioFileRef outputFile;

//+++++++ LOOP to append as many files as you want +++++++//

//2.Create file reference to files you want to merge
ExtAudioFileRef audioFileObject = 0;

//3.open the first file
ExtAudioFileOpenURL (firstFileURL, &audioFileObject);

//4.get file properties
AudioStreamBasicDescription AudioFileFormat = 0;
UInt64 numberOfPacketsToReadInCurrentFile = 0;
ExtAudioFileGetProperty(audioFileObject,
                        kExtAudioFileProperty_FileLengthFrames,
                        sizeof(numberOfPacketsToReadInCurrentFile),
                        &numberOfPacketsToReadInCurrentFile
                        );

ExtAudioFileGetProperty(audioFileObject,
                        kExtAudioFileProperty_FileDataFormat,
                        sizeof(AudioFileFormat),
                        &AudioFileFormat
                        );
//5.Set destination ASBD
ExtAudioFileSetProperty(audioFileObject,
                        kExtAudioFileProperty_ClientDataFormat,
                        sizeof (importFormat),
                        &importFormat
                        );

//6.Set/Create/Allocate Some Buffers
//use AudioFileFormat to setup your buffers accordingly

AudioBufferList theBufferList = 0 // bufferList setup (I dont remember that)

//7.Read the file into the buffer
ExtAudioFileRead(audioFileObject,&numberOfPacketsToReadInCurrentFile,theBufferList);

//8.Write the buffer to a File    
ExtAudioFileWrite(outputFile, numberOfPacketsToReadInCurrentFile, theBufferList);
free(theBufferList);

//if you want to append more files go to point 2 with the next file URL

//+++++++CLOSE LOOP+++++++++//

//once you are done.. just dispose the file and clean up everything left
ExtAudioFileDispose(outputFile); 
```

我猜这不会编译。但希望能帮助您了解这个想法。

# php - 为什么我的 php 标签被转换为 html 注释？

> ID：12828163
> 
> 赞同：10
> 
> 时间：2012-10-10T20:53:43.113
> 
> 标签：php, apache, .htaccess, configuration, lamp

朋友的灯主机好像配置错误。我尝试执行 php，但它似乎不起作用。

在 Chrome 的检查元素中：

```
<?php echo 'test'; ?> 
```

变成：

```
<!--?php echo 'test'; ?--> 
```

此外，它一直在触发文件下载，而不是作为网页打开。

我在一个`.htaccess`文件中尝试了各种代码，但似乎没有任何效果：

```
AddType x-mapp-php5 .php
AddType application/x-httpd-php .php
AddHandler x-mapp-php5 .php 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T22:38:48.413

正确配置 PHP 操作的地方是`httpd.conf`文件，它位于`conf`Apache 安装目录的子目录中。

在那里，您需要查找模块加载部分，这将是一堆以`LoadModule`. 在那里的某个地方，你应该有以下（或非常相似的东西）：

```
LoadModule php5_module "location\of\your\php\installation"
AddType application/x-httpd-php .php
PHPIniDir "location\of\your\php\configuration\file" 
```

我对 Linux 不太熟悉，但在 Windows (WAMP) 安装中，这些将类似于以下内容：

```
LoadModule php5_module "c:/program files/php/php5apache2.dll"
AddType application/x-httpd-php .php
PHPIniDir "C:/program files/php" 
```

我机器上的`httpd.conf`文件位于`C:\Program Files\Apache Group\Apache2\conf\httpd.conf`.

也可能是您的机器上根本没有安装 PHP，在这种情况下，您必须下载并安装它。布拉德已经在他的一条评论中发布了相关链接（+1，顺便说一句，布拉德），但为了将所有内容集中在一个地方：

[PHP：安装和配置 - 手册](http://php.net/manual/en/install.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T19:26:58.890

你的 Chrome 在骗你。

您的 PHP 源文件是`<?php echo 'test'; ?>`. 因为 PHP 没有被执行，所以这个文件被发送到浏览器。如果浏览器应该解释这个文本，它会偶然发现这些`<?` `?>`标记。它们有一个含义——它们是“XML 处理指令”，打开角度之后的文本定义了目标。

显然浏览器不知道名为“PHP”的目标，因此忽略此文本。

然后元素检查器尝试显示 DOM 并在原始源代码上撒谎，因为他正在处理 PARSED 源代码 - 这很好，因为您通常想知道浏览器对哪些数据进行操作，这包括浏览器如何解释了你的来源。

但是如果你犯了任何错误，浏览器会尝试修复它，并且修复包含在元素检查器中。

显然，未知 XML 处理指令的修复方法是通过将其注释掉来禁用它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-30T16:48:41.357

这只是发生在我身上。原来我忘记将文件类型从 .html 更改为 .php

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T20:56:41.327

在我看来，您的 PHP 没有正确配置或安装在您的灯配置中。您使用的是什么发行版？它可能就像运行命令重新安装 PHP 一样简单，否则您可能需要编译具有 php 支持的 apache。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-25T09:59:52.763

此答案不适用于 OP 的此问题的特定变体，但我遇到了基本相同的问题——`<? var_dump($test); ?>`被转换为`<!--? var_dump($test); ?-->`——我可以通过`short_open_tag`在[php.ini](http://php.net/manual/en/ini.core.php#ini.short-open-tag)中启用来解决。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T13:48:27.180

当我不小心尝试通过协议而不是通过已安装的站点在服务器上的浏览器中测试本地*php*文件时，我遇到了完全相同的问题。`file://`

所以答案是一个：“PHP 先生已经离开了大楼”。我们需要检查配置、文件位置或访问权限。

浏览器只是试图修复一个网页并帮助我们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-25T19:47:06.380

如果您将代码放在标准目录之外（在我的情况下是开发场景），您应该在 php5.conf（对于 ubuntu）中检查您的 /etc/apache2/mod-enabled 或 /etc/apache2/mod-available 和注释注释指示的行：

```
# To re-enable PHP in user directories comment the following lines
# (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
# prevents .htaccess files from disabling it.
<IfModule mod_userdir.c>
    <Directory /home/*/public_html>
        php_admin_value engine Off
    </Directory>
</IfModule> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T20:57:48.807

听起来您正在使用正在更改您输入的内容的编辑器。确保文件中的内容是文件中的实际内容。使用 FTP 上传 php 文件应该可以确保这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-23T21:24:15.310

我刚刚解决了同样的问题。您需要从 WAMP 中打开文件，而不是从硬盘目录中打开文件。

在您的浏览器中，输入：`localhost/...../yourfile.php`

否则，您的浏览器将全部替换`<?php ?>` 为`<!-- ?php ?-->`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-10T07:46:09.237

看来您必须明确指示 apache 将 html 文件作为 php 文件处理，我遇到了同样的问题，但将文件重命名为 .php 为我解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-12T13:14:41.727

在 Ubuntu 系统上，安装 apache php5 插件对我有用：

```
sudo apt-get install libapache2-mod-php5
sudo service apache2 restart 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-11T09:38:04.283

我有时也有同样的问题，可能你的文件的扩展名是“html”。把它改成“php”就OK了。

# assembly - 如何舍入到整数而不在汇编中分支？

> ID：12828166
> 
> 赞同：3
> 
> 时间：2012-10-10T20:53:57.983
> 
> 标签：assembly

如何在汇编中将整数四舍五入到最接近的整数？这里不允许使用分支。

例如，195 * .85 = 165.75。通常，我会将 195 乘以比例因子 (100)，然后相乘，然后再除以比例因子。这会给我 165。我如何得到 166？

如果这是一个可怕的问题，我很抱歉 - 我是组装新手！谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:08:55.083

> 例如，195 * .85 = 165.75。通常，我会将 195 乘以比例因子 (100)，然后相乘，然后再除以比例因子。这会给我 165。我如何得到 166？

传统上，您会使用两个比例因子的幂并移位而不是乘法和除法；我想现在除法和乘法的成本与许多架构上的转变相同，您可能更关心保持一定的精度。

无论如何，正如halex 所建议的那样，在除法之前你要加0.5。最终效果是，如果小数部分已经是 0.5 或更大，您将进入整数部分。如果没有，那么将没有携带。

所以：

195 * 100 = 19500
19500 * 0.85 = 16575
16575 + 50（即 0.5）= 16625
16625 / 100 = 166

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:06:29.947

假设您只获得了整数，并且只是告诉您需要使用比例因子将其中一个整数视为小数......那么您可以通过使用两倍于您需要的比例因子来做到这一点。因此，您使用 200 而不是 100。这将导致结果的最后一位为 1 或 0，具体取决于您是否要四舍五入。

所以在c风格中它看起来像这样

```
result = (195 * 85) / (100 / 2);
add = result & 1;
result = result / 2 + add; 
```

如果您不应该向上取整（即向下取整），则“添加位”将为 0。否则，如果您应该向上取整，“添加位”将为 1。

我认为这应该为您提供正确将其转换为程序集所需的伪代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T21:12:13.367

在 x86 汇编中，有 FRNDINT 指令。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-10T21:03:22.853

整数没有小数位，因此它已经是一个整数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-03-28T18:18:24.277

对于正数和负数，asm 中有 6 个字符串。

```
double round(double x) {
  return (long)(x + 0.5 + (*(long*)&x >> 63));
} 
```

# ios - 延迟加载 UIScrollView - 如何使滚动更流畅

> ID：12828169
> 
> 赞同：2
> 
> 时间：2012-10-10T20:54:22.277
> 
> 标签：ios, performance, uiscrollview, uiscrollviewdelegate

我已经在这样的滚动视图中完成了延迟加载：

```
-(void)scrollViewDidScroll:(UIScrollView *)myScrollView {

    int currentPage = (1 + myScrollView.contentOffset.x / kXItemSpacingIphone);
    for (ItemView* itemView in [self.itemRow subviews]){
        if (itemView.tag >= currentPage-2 && itemView.tag <= currentPage+2)
        {
            //keep it visible
            if (!itemView.isLoaded) {
                [itemView layoutWithData:[self.items objectAtIndex:itemView.tag-1]];
            }
        }
        else
        {
            //hide it
            if (itemView.isLoaded) {
                [itemView unloadData];
            }

        }
    }
} 
```

如果它在屏幕上的+/- 2“页面”基本上加载视图。这大大减少了我正在使用的内存量（而不是一次加载 20 多个 ItemView），这很好。但是，所有加载/卸载确实使滚动有点不稳定，尤其是在速度较慢的设备上。这是 ItemView 加载时实际发生的情况：

```
- (void)layoutWithData:(Item*)_data {
    self.data = _data;

//grab the image from the bundle
    UIImage *img;
    NSString *filePath = [[NSBundle mainBundle] pathForResource:_data.image ofType:@"jpg"];
        if(filePath.length > 0 && filePath != (id)[NSNull null]) {
            img = [UIImage imageWithContentsOfFile:filePath];
        }

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn setImage:img forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(tapDetected:) forControlEvents:UIControlEventTouchUpInside];
    btn.frame = CGRectMake(0, 0, kItemPosterWidthIphone, kItemPosterHeightIphone);
    [self addSubview:btn];

    self.isLoaded = YES;

} 
```

和 ItemView 卸载：

```
- (void)unloadData{
    for(UIView *subview in [self subviews]) {
        [subview removeFromSuperview];
    }
    self.data = nil;
    self.isLoaded = NO;
} 
```

同样，我能做些什么来使加载/卸载更快，从而使 UIScrollView 更流畅？

* * *

尝试异步：

```
- (void)layoutWithData:(Item*)_data {
    self.data = _data;
    self.isLoaded = YES;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        UIImage *img;
        NSString *filePath = [[NSBundle mainBundle] pathForResource:_data.image ofType:@"jpg"];
            if(filePath.length > 0 && filePath != (id)[NSNull null]) {
                img = [UIImage imageWithContentsOfFile:filePath];
            }

        dispatch_async(dispatch_get_main_queue(), ^{
            UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
            [btn setImage:img forState:UIControlStateNormal];
            [btn addTarget:self action:@selector(tapDetected:) forControlEvents:UIControlEventTouchUpInside];
            btn.frame = CGRectMake(0, 0, kItemPosterWidthIphone, kItemPosterHeightIphone);
            self.imageView = btn;
            [self addSubview:btn];

        });

    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:29:27.097

不久前我遇到了这个问题，我将加载图像从磁盘移动到后台线程。试试看它是否更快。

见这里：[在 iPhone 应用程序中从磁盘加载图像很慢](https://stackoverflow.com/questions/8016235/loading-images-from-disk-in-iphone-app-is-slow)

编辑：图像加载滞后也可能是由 UIImages 的延迟处理引起的

请参阅此处：[设置 UIImageView 的图像属性会导致严重滞后](https://stackoverflow.com/questions/10790183/setting-image-property-of-uiimageview-causes-major-lag)

# php - 将选定复选框的值发送到 PHP

> ID：12828172
> 
> 赞同：0
> 
> 时间：2012-10-10T20:54:38.900
> 
> 标签：php, javascript

我正在构建一个站点，管理员需要能够通过复选框选择多个数据库条目（客户端）。一旦选择了相关客户，他们可以单击一个按钮，将他们重定向到一个页面，现在可以只为选定的客户撰写电子邮件。我的复选框设置如下：

```
<input name = 'checked_residents' value='1' id = '1' type='checkbox' />
<input name = 'checked_residents' value='2' id = '2' type='checkbox' />
<input name = 'checked_residents' value='3' id = '3' type='checkbox' /> 
```

然后我有一个按钮 (id = 'mail_selected')，当单击它时，它能够构造一个包含所选复选框的所有 id 的数组。请参见下面的代码：

```
$('#mail_selected').click(function(event) {
    $(':checkbox[name="checked_residents"]:checked');
    var selectedID = [];
        $(':checkbox[name="checked_residents"]:checked').each (function () {
            var tempStr = this.id;
            selectedID.push(tempStr);
        });     
}); 
```

我的问题是我需要将 selectedID 数组发送到我的 php 文件“mailer_client.php”，但我需要立即重定向到该页面，并使用来自相应 ID 的所有电子邮件填充我的“电子邮件收件人”输入字段。

我意识到可能很难理解我到底想要做什么......我不确定自己。请询问有关该问题的任何内容是否不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:58:33.660

如果您将复选框的名称更改为数组，如下所示：

```
<input name = 'checked_residents[]' value='1' id = '1' type='checkbox' />
<input name = 'checked_residents[]' value='2' id = '2' type='checkbox' />
<input name = 'checked_residents[]' value='3' id = '3' type='checkbox' /> 
```

那么您将在 PHP 中将它们作为数组接收，`$_REQUEST['checked_residents']`并且不需要您当前的代码来自己构建数组并发送它。

然后，您可以按如下方式填写电子邮件：

```
foreach ($_REQUEST['checked_residents'] as $val) {
   $email_to .= get_email_for_id($val) . ' , ';
} 
```

# c# - HRESULT 异常：0x800401E3 (MK_E_UNAVAILABLE)

> ID：12828175
> 
> 赞同：19
> 
> 时间：2012-10-10T20:54:46.647
> 
> 标签：c#, ms-office

从以下电话

```
Marshal.GetActiveObject("Excel.Application") 
```

我得到一个

> 操作不可用（HRESULT 异常：0x800401E3 (MK_E_UNAVAILABLE)）

我相信当我的应用程序和 excel 之间的用户权限不匹配时会导致此错误。

我想知道是否有一种解决方法，无论如何打开 excel，我都可以如何访问打开的 excel 应用程序，我可以以管理员身份打开我想从中访问 excell 的程序。

另外我想知道如何知道打开了哪些权限进程？我一直在使用 ProcessExplorer 查看 UserProfile（在两个应用程序中都是相同的）和 Owner（也是相同的 BUILTIN\Administrators）

**背景** 我有一个程序通过调用 NUnit-console-x86 来运行不同的测试。正在测试的应用程序打开一个 excel 表单，这是我要从中读取数据的表单。当我以管理员身份运行程序时，或者没有出现这些错误，我也尝试添加 Process.StartInfo.Verb = "runas"; 到我启动 NUnit 的程序，但我仍然收到这些错误

尽管我不想在每台计算机上都安装 Visual Studio，但安装 Visual Studio 似乎可以解决问题。任何人都可以向我解释这些吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-19T23:20:04.707

查看[Microsoft Support Information](http://support.microsoft.com/kb/238610)，当 excel（或一般的 office）未处于活动状态或在运行对象表中运行时，似乎会生成 0x800401e3。在调用它之前，您必须打开一份 excel 副本。它要么你还没有在代码中打开 excel，要么它还没有完全注册。这可能是问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-27T06:00:14.187

这是 Visual Studio 和 Excel 之间的权限不匹配的问题。微软文档没有这么说，但肯定是这样。更严重的问题是有时会抛出异常，有时不会通过不知道管理权限的旧版本 Excel （即 2007 版）抛出异常。

发生这种情况时，您应该将权限匹配为管理员管理员或无。即使 Excel 无特权和 Visual Studio 管理员也可能无法工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T19:47:41.133

为了扩展@DylanCorriveau 所说的内容，我发现您需要采用以下方法之一来避免此问题。

**方法一**

我发现在某些情况下（Excel 2010）首先启动 excel 可以解决这个问题。您需要调整路径并等待适合您的需求和版本。

```
string pathToTheVersionOfExcel = @"C:\Program Files (x86)\Microsoft Office\Office14\EXCEL.EXE";
System.Diagnostics.Process.Start(pathToTheVersionOfExcel);
Thread.Sleep(5000); //"WaitForInputIdle" waits for way too long, generally it takes 5 seconds to start for me 
```

**方法二**

我过去采用的另一种方法是以不同的方式调用 Excel：

```
var oExcelApp = new Microsoft.Office.Interop.Excel.Application(); 
```

**方法三**

最后在我的应用程序中（对于 excel 2010 和 2016），我使用了一些解决方法：

```
[DllImport("user32.dll")]
private static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

//In your method...
string pathToTheVersionOfExcel = @"C:\Program Files (x86)\Microsoft Office\root\Office16\EXCEL.EXE";
Application oExcelApp = null;

Process process = new Process();
process.StartInfo.FileName = pathToTheVersionOfExcel;
process.Start();

Thread.Sleep(5000);

//Opening a closing notepad seems to "register" excel 2016, not needed for excel 2010 though...
Process processNotepad = new Process();
processNotepad.StartInfo.FileName = @"C:\Windows\system32\notepad.exe";
processNotepad.Start();

ShowWindow(process.MainWindowHandle, 2); //Minimize
ShowWindow(process.MainWindowHandle, 3); //Maximize

Thread.Sleep(5000);

processNotepad.CloseMainWindow();

oExcelApp = (_Application)Marshal.GetActiveObject("Excel.Application"); 
```

如果您在 RDP 会话中在 Excel 2016 中运行此代码，它可能非常挑剔，我发现您需要自定义 RDP 以忽略它的最小化状态。我发现[这篇文章很有帮助](https://support.smartbear.com/testcomplete/docs/testing-with/running/via-rdp/in-minimized-window.html)。

如果您尝试通过远程服务器上的某种自动构建/发布平台（例如 TFS/Azure DevOps）调用 excel，则需要使用[autologin](https://www.codeproject.com/Tips/891912/%2FTips%2F891912%2FTIPS-to-Running-Tests-Reliably)。我自己还没有那个[工作](https://stackoverflow.com/a/10703076/2912011)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-19T05:46:27.237

仅添加“Microsoft.Office.Interop.Excel.dll”的引用

```
try
{
    //This requires excel app (excel.exe*32) to be running means any excel sheet should be open. If excel not running then it will throw error.
    excelApp = (Excel.Application)Marshal.GetActiveObject("Excel.Application");
    excelApp.Visible = false;
}
catch
{
    //create new excel instance
    excelApp = new Excel.Application(); 
    excelApp.Visible = false;
} 
```

这对我有用。

优点：无需将 Microsoft.Office.Interop.Excel.dll 复制到您安装的文件夹中。由于安装了 MS excel，它将从 GAC 获取。

我也使用过 Office.dll，但不确定它是否真的需要。

# php - 如何更改“发表评论”按钮上的文字？

> ID：12828181
> 
> 赞同：3
> 
> 时间：2012-10-10T20:55:24.237
> 
> 标签：php, html, wordpress

我正在使用 wordpress 为一些治疗师建立一个网站，并使用帖子的评论部分与治疗师进行问答。但是我在“发表评论”按钮上找不到文本的来源。我想将其更改为“发布问题”。

主题中的 comments.php 没有任何内容，我在主 wp-comments-post.php 的任何地方都找不到它

任何帮助都会很棒！

谢谢

网址是[http://s416809079.onlinehome.us/ask-the-treatment/](http://s416809079.onlinehome.us/ask-the-therapist/)

编辑：我的困惑是我在任何地方都找不到“发表评论”。另外，如果我只是添加它，那么就会变成两个按钮，而新的按钮实际上并没有提交。这是代码。

```
<?php
/**
 * Comments Template
 *
 * @file           comments.php
 * @package        Pilot Fish
 * @filesource     wp-content/themes/pilot-fish/comments.php
 * @since          Pilot Fish 0.1
 */
if ( post_password_required() ) : ?>
<p class="nocomments"><?php _e( 'This post is password protected. Enter the password to view any comments.', 'pilotfish' ); ?></p>
<?php /* Stop the rest of comments.php from being processed */
        return;
endif; ?>

<?php if (have_comments()) : ?>
<h6 id="comments"><?php comments_number(__('No Response to', 'pilotfish'), __('One Response to', 'pilotfish'), __('% Responses to', 'pilotfish')); ?> <i><?php the_title(); ?></i></h6>

<ol class="commentlist">
    <?php wp_list_comments('avatar_size=60'); ?> 
</ol>

<?php if ( get_comment_pages_count() > 1 && get_option( 'page_comments' ) ) : ?>
<nav class="pager">
    <div class="previous"><?php previous_comments_link(__( '&#8249; previous','pilotfish' )); ?></div><!-- end of .previous -->
    <div class="next"><?php next_comments_link(__( 'next &#8250;','pilotfish', 0 )); ?></div><!-- end of .next -->
</nav><!-- end of.pager -->
<?php endif; ?>

<?php else : ?>
<?php if (comments_open()) : ?>

<?php
$fields = array(
    'author' => '<p id="comment-form-author">' . '<label for="author">' .     __('Name','pilotfish') . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) .
    '<input id="author" name="author" placeholder="'. __('name (required)', 'pilotfish').'" type="text" value="' . esc_attr($commenter['comment_author']) . '" size="30" /></p>',
    'email' => '<p id="comment-form-email"><label for="email">' . __('E-mail','pilotfish') . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) .
    '<input id="email" name="email" placeholder="'. __('email (required)', 'pilotfish').'" type="text" value="' . esc_attr($commenter['comment_author_email']) . '" size="30" /></p>',
    'url' => '<p id="comment-form-url"><label for="url">' . __('Website','pilotfish') . '</label>' .
    '<input id="url" name="url" placeholder="'. __('website', 'pilotfish').'" type="text" value="' . esc_attr($commenter['comment_author_url']) . '" size="30" /></p>',
);
$defaults = array('fields' => apply_filters('comment_form_default_fields', $fields));
comment_form($defaults);

?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T23:44:19.743

[评论表单 Codex](http://codex.wordpress.org/Function_Reference/comment_form)包含您需要了解的有关自定义评论表单值的所有信息。

```
$defaults = array(
    'fields' => apply_filters('comment_form_default_fields', $fields),
    'label_submit' => __('Post a Question')
);
comment_form($defaults); 
```

那应该做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:57:10.030

只需搜索文本`post comment`并更改它`value`的`button`标签，

```
 <input name="submit" type="submit" id="submit" value="Post a Question"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:57:43.147

更改`value`以下`input`元素的属性：

```
<input type="submit" value="Post a Question" id="submit" name="submit"> 
```

如果您在所有文件中搜索“发表评论”，您应该会找到您要查找的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T20:57:55.850

将输入的值设置为`<input value="Post a question">`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T21:02:55.190

在类下`form-submit`更改值。

以前的

```
...
<p class="form-submit">
<input id="submit" type="submit" value="Post Comment" name="submit">
... 
```

改成

```
...
<p class="form-submit">
<input id="submit" type="submit" value="Post A Question" name="submit">
... 
```

# database - 将图像从数据库动态加载到网页会暂时弄乱母版页的外观

> ID：12828185
> 
> 赞同：0
> 
> 时间：2012-10-10T20:55:42.823
> 
> 标签：database, image, master-pages, webpage

我是计算机科学专业的大四学生。我是网络开发的新手。我将 ASP.NET C# 与 MS SQL Server 一起使用。我一直在试图弄清楚如何将数据库中的图像加载到网页上。我已使用以下代码成功完成此操作。

```
<asp:Image ID="imageClient" runat="server" style="width:100px; height:100px;"/>

protected void LoadImage() 
{
    ModelDataContext mdc = new ModelDataContext();

    byte[] image = (from c in mdc.Clients select c.Logo).FirstOrDefault().ToArray();
    string base64String = Convert.ToBase64String(image, 0, image.Length);
    imageClient.ImageUrl = "data:image/jpg;base64," + base64String;
} 
```

现在我只是为 1 张图片做这件事。我最终将使用中继器在同一页面上显示多个图像。

问题在于图像的加载。它对它使用的母版页做了一些奇怪的事情。就好像它没有将 CSS 应用于母版页。但几秒钟后，它看起来应该如此。问题肯定在于图像的加载，因为在任何其他页面上都没有其他加载问题。

我尝试发布我所看到的图片，但我的声誉太低了。

问题不是特定于浏览器的，它在所有主要浏览器中都做同样的事情......如果有人可以帮助我解决这个问题，那就太好了。

/ *###########################* / 编辑：我意识到我试图查看的图像文件可能太大并且从数据库中获取它并加载图像需要很长时间。我的新方法是将图像保存到我的项目中的文件夹中，并将 imageurl 保存在数据库中以引用图像的实际位置。

这是最好的方法，请记住我在 Web 开发方面的进步还差得很远？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:45:34.980

将图像缓存到文件夹可以为您带来好处，例如减少数据库的负载。如果网页处于繁忙的环境（即许多用户）中，则可以缓存所有可以减少数据库负载的内容。

至于初始图像标签。据我记得， asp:Image 不支持 Style 标记，就像 html img 标记一样。我认为您需要在样式表（或嵌入在页面中）中定义一个 css 并使用 CssClass 标签来引用它 - 或者 - 在代码中使用 .Style("property") = "mysetting" 代替。

前：

```
imageClient.Style("Width") = "100px"
imageClient.Style("Height") = "100px" 
```

# php - PSR-0 类自动加载器，可以加载 PEAR 库吗？

> ID：12828186
> 
> 赞同：2
> 
> 时间：2012-10-10T20:55:46.270
> 
> 标签：php, pear, autoload, psr-0

所以这是我的问题，我编写了属于 PSR-0 标准的自己的类自动加载器。这很容易。现在我有我的 PHP MVC Frameowrk 并且我想使用**Twig**，但是 Twig 使用 PEAR 命名标准`_`而不是`\`.

现在 PSR-0 自动加载器是否也应该能够加载 PEAR 库？既然在那些 Autoloaders 里面`_`被转换成`\`? 如果我注册它，我的加载器将无法加载 Twig，但可能是我在某个地方犯了错误。

PSR-0 兼容的类加载器也应该能够加载 PEAR 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:54:15.783

> PSR-0 兼容的类加载器也应该能够加载 PEAR 库吗？

是的，PSR-0 可以与类和文件的 PEAR 命名约定互操作。

这不再公开记录，但众所周知。

如果您无法加载类，则说明您的自动加载器不符合 PSR-0。

[仔细检查规范](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。您还将在[`SplClassLoader`那里找到一个与 PSR-0 兼容的类链接](http://gist.github.com/221634)，您可以使用它来代替您自己的。

一个可能更好的加载器是[Symfony2 ClassLoader Component](http://symfony.com/doc/2.0/components/class_loader.html)。您可以通过 Pear 或 Composer（[Packagist 上的 symfony/class-loader](https://packagist.org/packages/symfony/class-loader)）轻松安装它。

如果您编写自己的类加载器，请注意使用[`spl_autoload_register`](http://php.net/spl_autoload_register)，请参阅

*   [php spl_autoload_register vs __autoload？](https://stackoverflow.com/questions/6894538/php-spl-autoload-register-vs-autoload)

* * *

### 奖励功能：

表现`spl_autoload_register`得像 PHP 一样，但 PSR-0 分辨率包含路径：

```
$spl_autoload_register_psr0 = function ($extensions = null) {
    $callback = function ($className, $extensions = null) {
        if (!preg_match('~^[a-z0-9\\_]{2,}$~i', $className)) {
            return;
        }
        null !== $extensions || $extensions = spl_autoload_extensions();
        $extensions = array_map('trim', explode(',', $extensions));
        $dirs = array_map('realpath', explode(PATH_SEPARATOR, get_include_path()));

        $classStub = strtr($className, array('_' => '/', '\\' => '/'));

        foreach ($dirs as $dir) {
            foreach ($extensions as $extension) {
                $file = sprintf('%s/%s%s', $dir, $classStub, $extension);
                if (!is_readable($file)) {
                    continue;
                }
                include $file;
                return;
            }
        }
    };
    return spl_autoload_register($callback);
};

var_dump(get_include_path());
var_dump(spl_autoload_extensions());
var_dump($spl_autoload_register_psr0()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:21:08.110

PSR-0 应该能够使用完全限定的命名空间和带下划线的类。您需要做的就是用目录分隔符替换下划线。一个很好的例子是：

```
function autoload($className)
{
    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strripos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require $fileName;
} 
```

希望这可以帮助！

# image - 使用 Node.js 请求库保存图像文件会导致异常

> ID：12828187
> 
> 赞同：2
> 
> 时间：2012-10-10T20:55:50.713
> 
> 标签：image, node.js, stream, request

这是来自**请求的**Github repo - [https://github.com/mikeal/request](https://github.com/mikeal/request)

*您可以将任何响应流式传输到文件流。*

```
request('http://google.com/doodle.png').pipe(fs.createWriteStream('doodle.png')) 
```

我已经像这样修改了它，其中 largeImage 是来自 3rd-party 网站的绝对 url 路径。

```
request(largeImage).pipe(fs.createWriteStream('./img/large/demo.jpg')); 
```

但我收到以下错误（不知道为什么？）。我查看了**createWriteStream** API，它似乎是正确的。如果我只包含“demo.jpg”它工作正常。但是，如果我在“demo.jpg”旁边包含路径，则会引发异常。

```
stream.js:81
      throw er; // Unhandled stream error in pipe.
            ^
Error: ENOENT, open './img/large/demo.jpg'
10 Oct 16:51:02 - [nodemon] app crashed - waiting for file changes before starting... 
```

**更新：**问题是我没有在**/img/之前包含****./public/**文件夹。

 **此更新的代码可以正常工作：

```
 request(largeImage).pipe(fs.createWriteStream('./public/img/large/demo.jpg')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:05:51.553

一切看起来都很好。我的猜测是问题与权限有关，或者可能需要先创建 ./img/large 目录。

做这样的事情来获取更多信息：

```
var ws = fs.createWriteStream('./img/large/demo.jpg');
ws.on('error', function(err) { console.log(err); });
request(largeImage).pipe(ws); 
```**

# jquery - 无法让 jQuery 鼠标悬停与 Span 一起使用

> ID：12828188
> 
> 赞同：2
> 
> 时间：2012-10-10T20:55:58.797
> 
> 标签：jquery

我有以下代码：

```
 $('.popUp').mouseover(function() {
            var divName = $(this).data("id");
            $('#' + divName).fadeIn();
        });

        $('.popUp').mouseout(function() {
            var className = $(this).data("id");
            $('#' + divName).fadeOut();
        }); 
```

它应该在一些悬停的文本附近显示一个弹出窗口。要显示的文本存储在页面其他位置的隐藏 DIV 中。我通过 SPAN 标记中的 data-id="divname" 传递了 DIV 的名称。问题是，无论我做什么，jQuery 都不会对文本做出反应。不是鼠标悬停，悬停，甚至点击。没有什么。我通过在其中放置一个 alert() 来测试它只是为了看看是否会做出反应，但它从来没有。

以下是其中一个 SPAN 的示例：

```
I am <span class="popUp" data-id="s1"><u>employed</u>, volunteering</span>, or 
<span class="popUp" data-id="s2"><u>associated</u></span> 
```

我究竟做错了什么？:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:09:30.213

您尚未发布 div 的标记，但假设与此类似：

```
I am <span class="popUp" data-id="s1"><u>employed</u>, volunteering</span>, or 
<span class="popUp" data-id="s2"><u>associated</u></span>

<div id="s1">The s1 div</div>
<div id="s2">The s2 div</div> 
```

变量名称从更改`className`为`divName`它工作正常。

### [DEMO](http://jsfiddle.net/TEb3G/) - 默认，在变量名修复后

如对原始代码的评论中所述，确保您的脚本在文档就绪块内运行，并确保任何 jQuery 引用都存在且有效。

此外，如果您发现在链接之间快速鼠标悬停时动画行为不规律，您可以更新类似以下的代码：

```
$('.popUp').mouseover(function() {
    var divName = $(this).data("id");
    $('#' + divName).stop(true, true).fadeIn();
});

$('.popUp').mouseout(function() {
    var divName = $(this).data("id");
    $('#' + divName).hide();
});​ 
```

### [演示](http://jsfiddle.net/gf2K3/)`stop()`- 使用和的替代代码`hide()`

我添加/更改的唯一一件事（您可能根本不需要）是`stop(true, true)`停止以前的动画，如果您将鼠标悬停在链接上来回相当快。

此外，`fadeOut()` `hide()`由于在链接之间快速鼠标悬停时可能与动画发生冲突，而不是可能会更好。

这些只是建议，可能并不直接适用于您的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:06:25.923

我创建了一个[jsfiddle](http://jsfiddle.net/PT2L3/1/)。它工作正常。

修改后的代码：

JS：

```
$(document).ready(function(){
    $('.popUp').mouseover(function() {
                var divName = $(this).data("id");
                $('#' + divName).fadeIn();
            });

    $('.popUp').mouseout(function() {
            var divName = $(this).data("id");
            $('#' + divName).fadeOut();
        });

​}); 
```

HTML：

`I am <span class="popUp" data-id="s1"><u>employed</u>, volunteering</span>, or <span class="popUp" data-id="s2"><u>associated</u></span> <div id=s2 style='display:none'> text text text text text text text text text </div> <div id=s1 style='display:none'> text text text text text text text text text </div>`​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:13:12.487

如果没有更多细节，这很难调试。

```
 $(document).on("mouseover", ".popup", function() {
    var id = $(this).data('id');
    $(id).fadeIn();
 }).on('mouseout', '.popup', function() {
    var id = $(this).data('id');
    $(id).fadeOut();   
 }); 
```

​</p>

我也试过这个

```
$(".popup").mouseover(function() {
var id = $(this).data('id');
    $(id).fadeIn();
 }).mouseout(function(){
var id = $(this).data('id');
    $(id).fadeOut();
 }) 
```

它有效。问题可能是因为 .popup 在 dom 就绪时不存在（也许它是从 AJAX 请求加载的？）。除非我们看到完整的代码，否则我们无法确定。带有 $(document).on() 的代码应该在 99% 的时间内都可以正常工作（从无中生有的统计数据）

这是一个jsFiddle：

[http://jsfiddle.net/6Pp9w/](http://jsfiddle.net/6Pp9w/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:12:35.753

在您的代码中：

```
$('.popUp').mouseover(function() {
   var divName = $(this).data("id");
    $('#' + divName).fadeIn();
});
$('.popUp').mouseout(function() {
    var className = $(this).data("id");
    $('#' + divName).fadeOut();
}); 
```

对于 mouseout 事件，您使用 define *className*但您使用*divName*。*将 divName*更改为*className*。

# ruby-on-rails - 暂时关闭基于 Rails 的网站

> ID：12828189
> 
> 赞同：0
> 
> 时间：2012-10-10T20:56:02.213
> 
> 标签：ruby-on-rails

我有自己的个人网站，希望暂时关闭。在我的 PagesController 中处理我的静态页面的本地开发版本上，我创建了一个关闭的操作，它向我的用户显示了一条很好的消息。

我想部署它，但是如何在不在本地执行、再次在本地提交、部署和删除它的情况下将根路由更改为该操作。

我希望能够一次又一次地快速顺利地路由到已关闭的操作。

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:58:10.233

您可以设置一个前置过滤器。

检查此答案以了解类似情况： [Rails: admin-only maintenance mode](https://stackoverflow.com/questions/6674298/rails-admin-only-maintenance-mode)

# c# - N 层存储库 POCO - 聚合？

> ID：12828190
> 
> 赞同：3
> 
> 时间：2012-10-10T20:56:02.653
> 
> 标签：c#, asp.net, repository-pattern, poco

假设以下简单的 POCO、国家和州：

```
public partial class Country
{
    public Country()
    {
        States = new List<State>();
    }
    public virtual int CountryId { get; set; }
    public virtual string Name { get; set; }
    public virtual string CountryCode { get; set; }
    public virtual ICollection<State> States { get; set; }
}

public partial class State
{
    public virtual int StateId { get; set; }
    public virtual int CountryId { get; set; }
    public virtual Country Country { get; set; }
    public virtual string Name { get; set; }
    public virtual string Abbreviation { get; set; }
} 
```

现在假设我有一个看起来像这样的简单存储库：

```
public partial class CountryRepository : IDisposable
{
    protected internal IDatabase _db;

    public CountryRepository()
    {
        _db = new Database(System.Configuration.ConfigurationManager.AppSettings["DbConnName"]);
    }

    public IEnumerable<Country> GetAll()
    {
        return _db.Query<Country>("SELECT * FROM Countries ORDER BY Name", null);
    }

    public Country Get(object id)
    {
        return _db.SingleById(id);
    }

    public void Add(Country c)
    {
        _db.Insert(c);
    }

    /* ...And So On... */
} 
```

通常在我的 UI 中，我不会显示所有子项（状态），但会显示汇总计数。所以我的国家列表视图模型可能如下所示：

```
public partial class CountryListVM
{
    [Key]
    public int CountryId { get; set; }
    public string Name { get; set; }
    public string CountryCode { get; set; }
    public int StateCount { get; set; }
} 
```

当我直接在我的 UI 层中使用底层数据提供程序（实体框架、NHibernate、PetaPoco 等）时，我可以轻松地执行以下操作：

```
IList<CountryListVM> list = db.Countries
    .OrderBy(c => c.Name)
    .Select(c => new CountryListVM() {
        CountryId = c.CountryId,
        Name = c.Name,
        CountryCode = c.CountryCode,
        StateCount = c.States.Count
    })
    .ToList(); 
```

但是当我使用存储库或服务模式时，我抽象出对数据层的直接访问。似乎我的选择是：

1.  使用填充的 States 集合返回 Country，然后在 UI 层中映射。这种方法的缺点是我返回的数据比实际需要的多得多。

    -或者-

2.  将我所有的视图模型放入我的 Common dll 库中（而不是将它们放在我的 MVC 应用程序的 Models 目录中）并扩展我的存储库以返回特定的视图模型，而不仅仅是域 pocos。这种方法的缺点是我将 UI 特定的东西（MVC 数据验证注释）泄漏到我以前干净的 POCO 中。

    -或者-

3.  还有其他选择吗？

你是如何处理这些类型的事情的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:26:12.543

这实际上取决于我们所做的项目架构。但是通常......我们在存储库之上为您处理此逻辑的服务。该服务决定使用哪些存储库来加载哪些数据。流程是 UI -> 控制器 -> 服务 -> 存储库 -> 数据库。UI 和/或控制器不了解存储库或其实现。

此外，`StateCount = c.States.Count`毫无疑问，无论如何都会填充美国名单......不是吗？我很确定它会在 NHibernate 中（通过 LazyLoading 导致额外的选择被发送到数据库）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:27:31.310

一种选择是将您的查询与现有基础架构完全分开。这将是[CQRS](http://cqrs.wordpress.com/documents/cqrs-introduction/)设计的实现。在这种情况下，您可以使用“精简读取层”直接向数据库发出查询，绕过您的域对象。您现有的对象和 ORM 实际上阻碍了您的工作，而 CQRS 允许您拥有一个独立的“命令端”，并且可能与您的“查询端”拥有完全不同的技术集，其中每个对象都旨在完成自己的工作不受对方要求的影响。

是的，我的意思是直接从您的 MVC 控制器中直接使用[Dapper](http://code.google.com/p/dapper-dot-net/)之类的东西来执行此操作（谨防未经测试的代码示例），例如：

```
int count = 
    connection.Query<int>(
        "select count(*) from state where countryid = @countryid", 
        new { countryid = 123 } ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:21:02.567

其他一些方法：

*   如果预计 states 集合不会发生很大变化，您可以允许一些非规范化 - 将“NumberOfStates”属性添加到 Country 对象。它将优化查询，但您必须确保额外字段包含正确的信息。

*   如果您使用 NHibernate，则可以使用 ExtraLazyLoading - 它会发出另一个选择，但不会在调用 Count 时填充整个集合。更多信息： [nHibernate 集合计数](https://stackoverflow.com/questions/1757252/nhibernate-collection-count)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T17:55:59.973

老实说，你的问题让我思考了几天。我越来越倾向于认为非规范化是正确的解决方案。

看，领域驱动设计的要点是让问题领域驱动你的建模决策。考虑现实世界中的国家实体。一个国家有一个州列表。但是，当您想知道某个国家有多少个州时，您并不是要翻阅百科全书中的州列表并计算它们。您更有可能查看该国的统计数据并检查那里的州数。

IMHO, the same behavior should be reflected in your domain model. You can have this information in the country's property, or introduce a kind of CountryStatistics object. Whatever approach you choose, it must be a part of the country aggregate. Being in the consistency boundary of the aggregate will ensure that it holds a consistent data in case of adding or removing a state.

# selenium - Android WebDriver 无法输入字母数字字符

> ID：12828195
> 
> 赞同：1
> 
> 时间：2012-10-10T20:56:38.913
> 
> 标签：selenium, selenium-webdriver

我正在尝试使用 Android WebDriver 库在 android 设备上自动化移动网站。

当脚本在文本字段中输入一些字母数字字符（例如 Test12345）时，文本框会显示“TEST!@#$%”作为输入的文本。任何以大写字母开头的字母数字单词都是如此。

但是，如果我将第一个字符设为小字符或数字，则插入正确的单词。

这是我正在使用的代码（在任何文本框字段上都会发生相同的情况）

```
driver.get("http://www.google.com");
WebElement searchBox = driver.findElement(By.name("q"));
searchBox.sendKeys("Test12345"); 
```

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:54:26.147

看来这是一个错误。作为一种解决方法，您可以在字符串之前键入任何字符（除了 NULL U+E000 或 UTF-8 中的“\xEE\x80\x80”）。例如，您可以通过发送两个 SHIFT（U+E008 或 UTF-8 中的“\xEE\x80\x88”）字符或一个 CLEAR（U+E005 或 UTF-8 中的“\xEE\x80\x85”）开始输入特点。只是任何不可打印的东西，然后输入你的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:16:33.703

仅供参考：我已经确认该错误仍然存​​在。我正在查看 android webdriver 代码，看看我是否能弄清楚它发生的原因。我有一些想法，可能是以下一种或另一种：

```
java/client/src/org/openqa/selenium/android/library/AndroidKeys.java 
java/client/src/org/openqa/selenium/android/library/EventSender.java
java/client/src/org/openqa/selenium/Keys.java 
```

并与 Selenium-Webdriver 和 Android 之间的映射键有关。

我找到了另一种解决方法，类似于 Ivan 提到的解决方法。我的涉及将文本分成两部分，第一个大写字符，例如 the`T`并使用 sendKeys 发送它；然后发送其余的文本，例如`est12345`

```
searchBox.sendKeys("T");
searchBox.sendKeys("est12345"); 
```

丑陋，不应该是必要的，而是一个不涉及发送额外（不可打印）字符的实用选项。

# php - 变量作为 PHP 中变量名称的一部分

> ID：12828199
> 
> 赞同：0
> 
> 时间：2012-10-10T20:56:52.430
> 
> 标签：php, variables

以下是变量：

```
$fake= 'cool';
$fake1 = 'not cool';
$hope= '1'; 
```

这个想法是结合`$fake`并`$hope`创建变量`$fake1`。这个想法是，如果`$hope`变量是随机的，它可以生成一个随机变量：`$fake1`，`$fake2`，`$fake3`，等等。现在我要么得到一个错误，要么只是彼此相邻的值`$fake`而不是新变量。`$hope`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:59:10.827

您应该为此使用[“数组”](http://php.net/manual/en/language.types.array.php)：

```
$list = array('cool', 'not cool');
$random_item = array_rand($list); 
```

使用以变量命名的变量总是很麻烦，而这正是数组的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:57:14.930

You can try

```
$fake = array(
        "fake1" => "Cool",
        "fake2" => "Bad",
        "fake3" => "Fish",
        "fake4" => "Next",
        "fake5" => "Wow");

list($a, $b) = array_rand($fake, 2);
echo $fake[$a] . " " . $fake[$b]; // This would always change 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:03:51.900

上面 Ben 的评论可能正是您想要的，但如果您使用的是 PHP5，您还可以执行以下操作：

```
 $varname = $fake . $hope;
 $$varname = "horray"; 
```

# jquery-validation-engine - 如何使用 jQuery-validation-engine 设置类以输入错误

> ID：12828203
> 
> 赞同：1
> 
> 时间：2012-10-10T20:57:12.620
> 
> 标签：jquery-validation-engine

我正在使用 jquery-validation-engine 插件，验证后我需要向输入添加一个带有错误提示的类以添加例如红色边框或类似的东西，有没有办法使用插件配置来设置这个?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:20:13.113

我也使用相同的插件。

你有插件的最后一个版本吗？在文件中：**jquery.validationEngine.js**

你会发现几乎在底部：

```
InvalidFields: [],
    onFieldSuccess: false,
    onFieldFailure: false,
    onSuccess: false,
    onFailure: false,
    addSuccessCssClassToField: false,
    addFailureCssClassToField: false, 
```

这些是您正在寻找的选项的“主”设置。我目前的设置是这样的：

```
 InvalidFields: [],
    onFieldSuccess: true,
    onFieldFailure: true,
    onFormSuccess: false,
    onFormFailure: false,
    addSuccessCssClassToField: 'inputbox-success',
    addFailureCssClassToField: 'inputbox-error', 
```

然后是你的 css 文件中的两个 css 类（'inputbox-error' & 'inputbox-succes'）。

这在这里工作得很好......祝你好运......

如果您对此插件或其他功能有任何疑问，请询问.. :P

问候，马可

# image - 使用 VBA 在 Excel 2010 中显示一系列图像

> ID：12828204
> 
> 赞同：1
> 
> 时间：2012-10-10T20:57:27.487
> 
> 标签：image, excel, excel-2010, vba

作为一个更大项目的一部分，我需要在一个宏中显示一系列图像。当我运行它时，它会在最后一个 msgbox 之后显示最终图像，其他图像在下面：

```
Sub Macro4()
Dim x As Integer
Dim Pic As Object
Dim picname As String
For x = 1 To 7
picname = ThisWorkbook.Path & "/" & "pic" & x & ".png"
ActiveSheet.Pictures.Insert(picname).Select
MsgBox (x)
Next x
End Sub 
```

Msgbox 命令可以减慢处理速度，以便我可以看到，或者在这种情况下看不到，图片会发生变化。

这些图像被称为 pic1.png、pic2.png 等

如何在宏期间显示单独的图像？

重新编辑：

所以这里是图片功能和播放随机音乐混凝土的较大功能。

```
Private Declare Function PlaySound Lib "winmm.dll" _
Alias "PlaySoundA" (ByVal lpszName As String, _
ByVal hModule As Long, ByVal dwFlags As Long) As Long 
```

***showpic**给出与正在播放的声音的音高相关的图像。*

```
Function showpic(value)
Dim v As Integer
v = value
picname = ThisWorkbook.Path & "/" & "pic" & v & ".png"
ActiveSheet.Shapes.AddPicture (picname), True, True, a1, a1, 170, 170
DoEvents
End Function 
```

***play**运行一系列特定的声音文件，这些文件由随机过程生成，选择乐器和音高并创建必要的文件名。“piece”运行“notes”秒，并由一个单独的宏触发，该宏更改给定“单元格”中的值以匹配“条件”。*

```
Function play(Cell, condition, notes)
Dim WAVFile As String
Dim x As Integer
Dim y As Integer
Dim z As Integer
Dim c As String
Dim d As String
Dim currentcell As String
Dim pitchcell As String
Const SND_SYNC = &H0
Const SND_ASYNC = &H1
Const SND_FILENAME = &H20000
On Error GoTo ErrHandler
For x = 1 To notes
If Evaluate(Cell.value & condition) Then
y = x + 65
z = x + 39
c = Chr(y)
d = Chr(z)
If y > 90 Then c = "A" & d
currentcell = c & 6
pitchcell = c & 3
showpic (Sheets("Sheet1").Range(pitchcell).value)
WAVFile = ThisWorkbook.Path & "/" & Sheets("Sheet1").Range(currentcell).Text & ".wav"
Call PlaySound(WAVFile, 0&, SND_SYNC)
End If
Next x
ErrHandler:
play = False
Exit Function
End Function 
```

我有三个问题：

1.  它不显示第一个图像文件
2.  它在开始时执行“计算”或 F9，因此重新随机播放乐曲并且不播放显示的序列；我认为这是由第一个 DoEvents 引起的。
3.  它现在播放两次！但是，第二次通过它确实显示了所有图像文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:14:41.750

**编辑：**
由于我最初的答案对您不起作用，那么以完全不同的方式实现您的结果怎么样。此方法使用[Application.OnTime](http://msdn.microsoft.com/en-us/library/office/ff196165.aspx)重新运行您的 sub 并插入下一张图片。

```
Sub NextPicture()
    Static x As Integer
    Dim pic As Object
    Dim picname As String
    'Reset x to 0 because I assumed you want to rotate through the pictures.
    'If you want it to stop replace with If x = 7 then exit sub
    If x = 7 Then x = 0
    x = x + 1
    picname = ThisWorkbook.Path & "/" & "pic" & x & ".png"
    ActiveSheet.Pictures.Insert(picname).Select
    'Using 00:00:05 = 5 seconds, change the amount to speed up or slow down the picture changes
    Application.OnTime Now + TimeValue("00:00:05"), "NextPicture"
End Sub 
```

* * *

**原始答案**
我无法让您的代码正常工作，但如果我使用[Shapes.AddPicture](http://office.microsoft.com/en-us/excel-help/HV080554003.aspx)，我可以，这实际上更强大，因为您获得/必须指定位置和大小。

句法：

```
expression.AddPicture(Filename, LinkToFile, SaveWithDocument, Left, Top, Width, Height) 
```

例子：

```
ActiveSheet.Shapes.AddPicture(picname, True, True, 100, 100, 70, 70) 
```

# java - JSF / Primefaces dataTable 和排序问题

> ID：12828205
> 
> 赞同：1
> 
> 时间：2012-10-10T20:57:28.747
> 
> 标签：java, internet-explorer, jsf-2, primefaces

我正在使用 PrimeFaces 2.2 和 JSF 2.0.3。

我有一个包含以下数据表的 xhtml 视图：

```
<p:dataTable id="fooTable" 
    widgetVar="fooTable" 
    rowKey="#{foo.id}" 
    var="foo" 
    value="#{fooQueue.foos}"
    styleClass="table" 
    selection="#{fooQueue.selectedfoo}" 
    filteredValue="#{fooQueue.filteredfoos}"
    paginatorPosition="bottom" 
    paginatorAlwaysVisible="true" 
    selectionMode="single"
    rowEditListener="#{fooQueue.save}" 
    paginator="true" 
    rows="10" 
    rowIndexVar="#{foo.id}"
    emptyMessage="No foos found with given criteria" 
    rowStyleClass="#{foo.status == const.submitted ? 'gray' : null}"
    onRowSelectUpdate=":form:deleteValidation">

        <p:column id="mothersName" filterBy="#{foo.header1}"  filterMatchMode="contains">
            <f:facet name="header">
                <h:outputText value="Mother's Name" styleClass="tableHeader2" />
            </f:facet>

            <p:commandLink action="#{fooQueue.next(foo)}" 
                ajax="false" 
                disabled="#{foo.status == const.submitted || foo.id == 0}">
                <f:setPropertyActionListener value="#{foo}" target="#{fooQueue.selectedfoo}" />  
                <h:outputText value="#{foo.header1}" styleClass="tableData" />
            </p:commandLink>
        </p:column>

        <p:column sortBy="#{foo.header4}" >
            <f:facet name="header">
                <h:outputText value="DOB" styleClass="tableHeader2" style="width: 400px" />
            </f:facet>
            <h:outputText value="#{foo.header4}" styleClass="#{(foo.overSevenDays and foo.status != const.submitted and foo.id != 0)?'tableDataRed':'tableData'}" />
        </p:column></p:dataTable> 
```

.. 使用以下支持 bean：

```
 @ViewScoped
@ManagedBean
public class FooQueue extends BaseViewBean { 

    private List foos;
    private Foo selectedFoo;
    private List filterdFoos;

    public FooQueue() {
        logger.debug("Creating new FooRegQueue");
        retrieveFooRecords();
    }

    private void retrieveFooRecords(){
        foos = new ArrayList();
        foos.addAll(fooService.getAllFoos());
    }

    public String next(Foo clickedFoo) {        
        System.out.println(clickedFoo.getId());     
        return "";
    }

    public Collection getFoos() {
        return foos;
    }

    public Foo getSelectedFoo() {
        return selectedFoo;
    }

    public void setSelectedFoo(Foo foo) {
        if (foo != null) {
            this.selectedFoo = foo;
        }
    }

    public void setFilterdFoos(List filterdFoos) {
        this.filterdFoos = filterdFoos;
    }

    public List getFilterdFoos() {
        return filterdFoos;
    }
} 

```

请注意母亲姓名列上的“commandLink”和出生日期列上的“sortBy”。

我遇到了一个奇怪的问题，似乎仅限于IE，如果我按DOB对数据进行排序，然后分页到最后一页并单击表中最后一条记录的commandLink，它会触发两个动作事件。第一个事件正确报告我单击了排序表中的最后一条记录。但是 next() 方法的第二次调用是针对未排序表中的最后一条记录。

任何人都可以识别我的 xhtml 或支持 bean 有什么问题吗？这是一个已知的 PrimeFaces 问题吗？一个已知的 IE 问题？

我正在使用 IE 8 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:13:17.197

我解决了。我只需要改变这个：

```
<p:commandLink action="#{fooQueue.next(foo)}" 
  ajax="false" 
  disabled="#{foo.status == const.submitted || foo.id == 0}">
   <f:setPropertyActionListener value="#{foo}" target="#{fooQueue.selectedfoo}" />  
   <h:outputText value="#{foo.header1}" styleClass="tableData" />
</p:commandLink> 
```

对此：

```
<p:commandLink action="#{fooQueue.next(foo)}" 
  ajax="true" 
  disabled="#{foo.status == const.submitted || foo.id == 0}">
   <f:setPropertyActionListener value="#{foo}" target="#{fooQueue.selectedfoo}" />  
   <h:outputText value="#{foo.header1}" styleClass="tableData" />
</p:commandLink> 
```

注意**ajax="true"**。因为它之前设置为 ajax="false"，所以它正在实例化我的支持 bean 的一个新实例，并且正在加载以默认排序顺序选择的行。现在它没有实例化一个新实例，我加载了我点击的实际记录。

# node.js - 无法使用查找查询在猫鼬中查找数据

> ID：12828207
> 
> 赞同：1
> 
> 时间：2012-10-10T20:57:33.443
> 
> 标签：node.js, mongoose

在我的应用程序中，我希望用户输入用户名和密码，然后首先使用查找查询在数据库中检查用户名，如果找到用户名，则它将新页面呈现给用户。问题是如果我输入了错误的用户名和密码，那么它也会呈现一个新页面，并且该页面也没有完全加载。请告诉我错误是什么。

在 app.js 我写过：

```
app.post('/profile',users.login); 
```

在 users.js 我写过：

```
exports.login=function(req,res){
   console.log("login called");
   PersonalInfo.findOne({ name:req.params.userName}, function(err,data){
      if(err)
      {
          console.log("find is not done");
          console.log(data);
      }
      else{
          res.render("/profilearea.ejs");
      }
        }) 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:07:14.940

当`findOne`查询未能找到匹配的文档时，它不会被视为错误。相反，“未找到”的情况由回调的`data`参数指示。`findOne``null`

您的`findOne`回调函数的代码应如下所示：

```
 if(err || !data)
  {
      console.log("find is not done");
  }
  else{
      res.render("/profilearea.ejs");
  } 
```

# c# - C#.NET 来自 PHP

> ID：12828209
> 
> 赞同：0
> 
> 时间：2012-10-10T20:57:37.203
> 
> 标签：c#, php, .net

我来自 PHP，所以请忍受我的菜鸟......

我想知道一些事情。

我现在非常了解 PHP、javascript 和 MySQL，而且我知道浏览器理解一些东西.. html 和 javascript。

我浏览了一个 c#.net 教程，发现它有预先制作的“用户控件”，我想，哦，我的它与 PHP 完全不同......然后我意识到最终它以一堆 javascript 结束我本可以自己写（不是说我想；），只是说）。

我的问题......

***1.***

如果我有一个包含一些输入字段的表格：

```
<form id="form1" runat="server" method = "post" action = "validate_entry.aspx">
    <table>
        <tr>
            <td>Name: </td><td><input type = "text" name = "name" /></td>
        </tr>
        <tr>
            <td colspan = "2"><input type = "submit" value = "submit" /></td>
        </tr>
    </table>
</form> 
```

并使用 post 和 action 方法，然后在 Page_Load 类的 validate_entry.aspx 中我调用类似的东西：

```
c.Request["name"]; 
```

并用它做任何事情。这仍然是使用 c# 的专业方式还是我希望它太像 PHP。即使它正在运行javascript，我是否错过了一些执行速度或其他东西。

***2.***

如果我想在 div 中简单地输出“arse”这个词......如果我这样做，我是否击败了 c#.net 的对象

```
<div id = "the_butt_holder">
    <% Response.Write("arse"); %>
</div> 
```

或者一个更好的例子是在我的 validate_entry.aspx 页面中，我这样做：

```
<div id = "the_response">
    <% Response.Write(c.Request["name"]); %>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:00:38.637

我认为在您的情况下，您将从查看 ASP MVC 中受益匪浅。它更接近颗粒，并且可能更接近您习惯使用的内容，因为您对 html 有很大的控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:05:00.447

好吧，James，我认为您可以开始使用 asp.net mvc。它比 asp.net webforms 对您来说更容易。WebForms 基于服务器控件和事件，你不能在标签中设置页面，你可以创建一个，双击它并在你的 webform 的 .cs 文件上写你的代码，然后，.net 框架就可以了一个叫做 PostBack 的东西并执行这个事件。PostBack 运行时存在不必要的长生命周期。

在 Asp.Net webForms 中，您无法控制输出 HTML 代码。SErver Controls 会为你做这件事，有时它不是你想要（或不需要）的。

使用 ASP.NET MVC，你有一个路由表，你有一个 MVC 架构模式，所以，如果你在 PHP 中使用 mvc 框架，这对你来说很容易。使用 ASp.NET MVC，您可以控制 HTML，并且可以创建类型化视图。检查此链接：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:06:12.130

1.  您的方法绝对没有错，但是在 ASP.NET 中还有另一种方法，即使用实际的 TextBox（呈现输入字段）控件而不是直接输入字段。这样，您将能够访问值作为控件的属性。

> ```
> <asp:TextBox id="tb1" runat="server" />
> var text = tb1.Text; 
> ```

1.  为什么不直接写文字而不是像这样输出呢？

> ```
> <div id = "the_butt_holder">
>     arse
> </div> 
> ```

* * *

[使用ASP.NET MVC](http://www.asp.net/mvc)和 Razor 布局引擎可能会让您感觉更自在。它更像 PHP 和 Smarty（或任何类似的模板引擎现在取代它 :)）您可以[在网站上](http://www.asp.net/mvc/videos)找到足够多的教程来帮助您入门。

# javascript - 将 iFrame 源代码与 textarea 元素同步

> ID：12828211
> 
> 赞同：1
> 
> 时间：2012-10-10T20:57:39.247
> 
> 标签：javascript, html

我正在为我自己的内容管理系统 (CMS) 开发一个纯 JavaScript 所见即所得编辑器。我需要做的是将 IFRAME 中的源代码与 TEXTAREA 元素的内容同步，这样我就可以切换源代码视图和来回编辑富文本。我有一些代码，它同步数据，但是我只能更改富文本编辑器 (IFRAME) 中的内容，而不是源编辑器 (TEXTAREA)。这样做的目的是通过 POST 表单将数据提交到服务器，因为我不知道我还能怎么做。我也不想使用 jQuery。我不是“JavaScript 专家”。无论如何，这是我的代码部分：

```
<iframe id="editor" frameborder="0"></iframe>
<textarea id="html" onchange="document.getElementById('editor').contentWindow.document.body.innerHTML=this.value;"></textarea>
<script>
var e = document.getElementById("editor").contentWindow;
e.document.designMode = "on";
e.document.open();
e.document.write("<head><style>body{font-family:arial,helvetica,sans-serif;}</style></head>");
e.document.close();

function def() {
   document.getElementById("fontName").selectedIndex = 0;
   document.getElementById("fontSize").selectedIndex = 1;
   document.getElementById("foreColor").selectedIndex = 0;
}

function edit(x, y) {
   e.document.execCommand(x, false, y);
   e.focus();
}

setInterval(function() {
    document.getElementById("html").value = e.document.body.innerHTML;
}, 200);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:08:19.957

想通了，希望这对其他人有帮助；）

```
<iframe id="editor" frameborder="0">test</iframe>
<textarea id="html" onfocus="editor.rte();" onblur="editor.source();"></textarea>
<script>
<!--
//<![CDATA[
var editor = function() {
    var e = document.getElementById("editor").contentWindow;
    e.document.designMode = "on";
    e.document.open();
    e.document.write("<head><style>body{font-family:arial,helvetica,sans-serif;}</style></head>");
    e.document.close();
    var a, b;
    return {
        run:function(c, s) {
            e.document.execCommand(c, false, s);
        },
        source:function() {
            clearInterval(b);
            a = setInterval(function(){document.getElementById("html").value = e.document.body.innerHTML;}, 200);
        },
        rte:function() {
            clearInterval(a);
            b = setInterval(function(){e.document.body.innerHTML = document.getElementById("html").value;}, 200);
        }
    };
}();
editor.source();
//]]>
-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T03:56:25.957

@独奏

该代码不好，请尝试在 textarea 中键入 <input>。你不能在上面输入，因为间隔。所以，我的提示是，只运行代码然后用户完成输入。喜欢..

```
var timer = null;
$('textarea').keydown(function(){
   clearTimeout(timer); 
   timer = setTimeout(doStuff, 300)
});

function doStuff() {
   e.document.body.innerHTML = document.getElementById("html").value;
} 
```

对不起，我的英语不好

# c++ - 不可能：此指针作为默认参数。为什么？

> ID：12828216
> 
> 赞同：8
> 
> 时间：2012-10-10T20:57:54.493
> 
> 标签：c++, arguments, this, default-value, this-pointer

以下代码将无法编译。为什么？

```
class A
{
   int j;
   void f( int i = this->j );
} 
```

编辑，为清楚起见。这就是我试图做的，使用更少的代码行......

```
class A
{
   void f( int i ){};
   void f( );
   int j;
};

void A::f()
{
    f( j );
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T21:00:55.490

默认参数值在编译时绑定。

“this”仅在运行时定义，因此不能使用。

有关更完整的解释，请参见此处： [默认函数参数必须在 C++ 中保持不变吗？](https://stackoverflow.com/questions/334882/must-default-function-parameters-be-constant-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:10:49.930

其他人已经评论了这不起作用的原因。从其中一条评论中：

> “...表达式可以组合在当前范围内可见的函数、常量表达式和全局变量。表达式不能包含局部变量或非静态类成员变量...”

`optional`尽管我不确定它是否更清晰，但您可以使用它来消除额外的功能：

`void f( boost::optional<int> i = boost::none ) { if(!i) i = j; ... }`

# php - 提交表单时，我在 codeigniter 中找不到页面

> ID：12828225
> 
> 赞同：2
> 
> 时间：2012-10-10T20:58:49.420
> 
> 标签：php, codeigniter, codeigniter-2

我是codeigniter的新手。提交表单时，我收到 404 错误页面未找到。实际上，无需输入用户名和密码，它应该可以进行评估。这是代码。

> 控制器中的 login.php

```
public function verifyuser()
        {

          $this->load->library('form_validation');
          $this->form_validation->set_rules('username','username','required');
          $this->form_validation->set_rules('password','password','required');

          if($this->form_validation->run() == FALSE){
            $this->load->view('login/login');
        }else{
        $this->load->model('login/validate');
        }
        } 
```

****登录/login.php* ***

```
<?php echo form_open('verifyuser'); ?>
    <!--  start login-inner -->
    <div id="login-inner">
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <th>Username</th>
            <td><input type="text" name="username"  class="login-inp" /></td>
        </tr>
        <tr>
            <th>Password</th>
            <td><input type="password" name="password" value="************"  onfocus="this.value=''" class="login-inp" /></td>
        </tr>
        <tr>
            <th></th>
            <td valign="top"><input type="checkbox" class="checkbox-size" id="login-check" /><label for="login-check">Remember me</label></td>
        </tr>
        <tr>
            <th></th>
            <td><input type="submit" value="submit" class="submit-login"  /></td>
        </tr>
        </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:19:56.957

您应该使用类似的参数调用 form_open 函数`controller/function`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:29:26.880

如果您打算提交到您所在的同一控制器，则无需在以下内容中指定任何内容`form_open`：

```
<?php echo form_open(); ?>
...
<?php echo form_close(); ?> 
```

这应该足够了。当未指定任何内容时，CI 将自动使用当前控制器/方法。此外，您收到错误的原因是因为您告诉`form_open`您要加载 controller/method `verifyuser/index`。

# ruby-on-rails - NGINX + Rails：提供静态目录、index.html 和所有其他到 rails 的路由？

> ID：12828226
> 
> 赞同：5
> 
> 时间：2012-10-10T20:58:50.637
> 
> 标签：ruby-on-rails, nginx

所以 NGINX 非常适合我的 rails 应用程序 - 但希望能帮助我为混合静态/动态环境正确配置配置。这是一个 API，所以基本上：

1.  为 public/index.html 服务，因为为单个静态 html 页面编写控制器以说“欢迎使用 API”是很愚蠢的。
2.  在 blah.com/doc 上提供来自 /app/doc 的文档
3.  为代理提供所有其他请求。

现在我知道我的位置 / try_files 等正在相互挤压，但我尝试了一堆排列并且不能让它们一次全部工作。:)

```
upstream ss-api {   server unix:/tmp/ss-api.socket fail_timeout=0; }

server {
    listen 80 default deferred;
    server_name localhost;
    access_log /var/log/nginx/api_access.log;

    location {
        root /home/deployer/apps/api/current/public;
        try_files $uri/index.html $uri.html $uri @ss-api;
    }

    location /doc/ {
        root /home/deployer/apps/ss-api/current/doc;
    }

    location @ss-api {
        proxy_pass  http://ss-api;
        proxy_redirect     off;

        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;

        client_max_body_size       4G;
        client_body_buffer_size    128k;
        keepalive_timeout 5;
        error_page 500 502 503 504 /500.html;

        proxy_connect_timeout      90;
        proxy_send_timeout         90;
        proxy_read_timeout         90;

        proxy_buffer_size          4k;
        proxy_buffers              4 32k;
        proxy_busy_buffers_size    64k;
        proxy_temp_file_write_size 64k;
    }
} 
```

# cruisecontrol.net - Perforce 自定义标签

> ID：12828231
> 
> 赞同：1
> 
> 时间：2012-10-10T20:59:13.660
> 
> 标签：cruisecontrol.net, perforce

我创建了一个用于 CruiseControl.NET 的 perforce 自定义标签器。贴标机适用于我的大部分项目，但不适用于某些项目。CruiseControl.NET 在以下命令上失败：

p4 -s -c client_name -p scm:1234 -u 用户名 labelsync -l labelname

出现以下错误：文件不在标签中

尝试在 cmd 中运行上述命令并得到相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:37:52.787

我发现出了什么问题。Perforce 区分大小写。我更改了我的仓库位置以匹配案例并解决了问题。

# actionscript-3 - TypeError：错误 #1009：无法访问空对象引用的属性或方法。对于一个菜鸟

> ID：12828232
> 
> 赞同：0
> 
> 时间：2012-10-10T20:59:25.610
> 
> 标签：actionscript-3, flash, hittest

所以，基本上我在使用 hitTesting 时遇到了这个问题。在我完成的所有 AS3 中，我从来没有遇到过这个错误。我正在使用拖放，基本上你必须将垃圾拖到垃圾箱中。非常直截了当。这是搞砸的代码，给了我错误：

```
 if(coin3.hitTestObject(wallet1)) {
coins +=1;
coin3.x -=7000;
} 
```

所以这个错误真的很烦我，我需要修复它，它正在破坏我的游戏！我没有将对象分配给变量或数据类型，就这么简单。我该如何解决这个问题？我不知道什么是空！这是整个代码：

```
import flash.events.Event;
import flash.events.MouseEvent;
var coins:Number = 0;
var maxcoins:Number = 3;
coin2.addEventListener(MouseEvent.MOUSE_DOWN, coin2drag);
function coin2drag(e:MouseEvent)
{
    coin2.startDrag();
}
stage.addEventListener(MouseEvent.MOUSE_UP, coin2undrag);
function coin2undrag(e:MouseEvent)
{
    coin2.stopDrag();
}

coin3.addEventListener(MouseEvent.MOUSE_DOWN, coin3drag);
function coin3drag(e:MouseEvent)
{
    coin3.startDrag();
}
stage.addEventListener(MouseEvent.MOUSE_UP, coin3undrag);
function coin3undrag(e:MouseEvent)
{
    coin3.stopDrag();
}
coin4.addEventListener(MouseEvent.MOUSE_DOWN, coin4drag);
function coin4drag(e:MouseEvent)
{
    coin4.startDrag();
}
stage.addEventListener(MouseEvent.MOUSE_UP, coin3undrag);
function coin4undrag(e:MouseEvent)
{
    coin4.stopDrag();
}

coin2.addEventListener(Event.ENTER_FRAME, coin2hit);
function coin2hit(e:Event)
{
    if (coin2.hitTestObject(wallet1))
    {
        coins +=  1;
        coin2.x +=  700000;
    }
    if (coins == maxcoins)
    {
        gotoAndStop(54);
    }
}

coin3.addEventListener(Event.ENTER_FRAME, coin3hit);
function coin3hit(e:Event)
{
    if (coin3.hitTestObject(wallet1))
    {

        coins +=  1;
        coin3.x +=  700000;
    }
};

coin4.addEventListener(Event.ENTER_FRAME, coin4hit);
function coin4hit(e:Event)
{
    if (coin4.hitTestObject(wallet1))

    {
        coins +=  1;
        coin4.x +=  700000;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:58:19.353

This might get you started... Read about how Arrays work to better understand how to count and manage objects. This may or may not be ideal for whatever you're actually trying to do, but you can do some pretty nifty things with them... Also you mis-referenced one of your drag functions. I cleaned it up a bit to make it a little easier to manage.

```
import flash.events.Event;
import flash.events.MouseEvent;

var coins:Array();
//this creates an empty array

var maxcoins:int= 3;

coin2.addEventListener(MouseEvent.MOUSE_DOWN, drag);
coin2.addEventListener(MouseEvent.MOUSE_UP, undrag);
coin3.addEventListener(MouseEvent.MOUSE_DOWN, drag);
coin3.addEventListener(MouseEvent.MOUSE_UP, undrag);
coin4.addEventListener(MouseEvent.MOUSE_DOWN, drag);
coin4.addEventListener(MouseEvent.MOUSE_UP, undrag);

// if only dragging one object at a time, then you can just put all your drags into two     functions

function drag(e:MouseEvent)
{
coin2.startDrag();
coin3.startDrag();
coin4.startDrag();
}

function undrag(e:MouseEvent)
{
coin2.stopDrag();
coin3.stopDrag();
coin4.stopDrag();
}

/////////////////////////////////////////////////////////////////

coin2.addEventListener(Event.ENTER_FRAME, coin2hit);
function coin2hit(e:Event)
{
if (coin2.hitTestObject(wallet1))
{
    coins.push(coin2);
//this pushes the coin into the Array which will continue count until it is     cleared below ////

coin2.visible=false;
//setting coin2 to not be visible is simpler than moving it away, especially if the object is never being added again on stage. 
}

if (coins == maxcoins) // mind you this conditional will ONLY execute if coin2hit() is run.
{
    gotoAndStop(54);

    coins.pop(); //this clears the array ////
}
}

coin3.addEventListener(Event.ENTER_FRAME, coin3hit);
function coin3hit(e:Event)
{
if (coin3.hitTestObject(wallet1))
{

    coins.push(coin3);
    coin3.visible=false;
}
};

coin4.addEventListener(Event.ENTER_FRAME, coin4hit);
function coin4hit(e:Event)
{
if (coin4.hitTestObject(wallet1))

{
    coins.push(coin4);
    coin4.visible=false;
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:20:31.037

如果您使用代码严格实例化您的对象，请确保您正确分类您的对象，并相应地命名您的变量......即：

```
var coin3:Coin = new Coin; 
```

其中“coin3”是“Coin”类的一个实例...根据您打算对该对象执行的操作，您可能需要：

```
addChild(coin3);
//this may sit inside a function, or directly after the var is created, depending on what you're trying to do 
```

否则，如果您正在调用已经物理放置在舞台上的对象，请确保它具有您所调用的任何内容的实例名称。这是在属性窗口窗格中设置的。简单地将 MC 命名为“coin3”（或其他）是行不通的。

虽然没有看到更多代码，但很难知道发生了什么。如果类结构的概念是新概念，那么您绝对应该阅读它是如何工作的，因为它对于使用 AS3 等面向对象的语言正确创建和管理对象至关重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:04:05.363

此错误意味着您尝试访问的对象不存在。在这种情况下，这意味着 coin3、wallet1 或 coin 变量在您尝试使用之前尚未正确创建（初始化）。

只需确保 coin3 和 wallet1 是您的电影剪辑的真实名称并且它们确实在舞台上，并确保在使用之前至少将硬币设置为任何值（如硬币 = 0;）；。

# c# - 创建扩展名为 .txt 的文件 (C#)

> ID：12828235
> 
> 赞同：-1
> 
> 时间：2012-10-10T20:59:34.710
> 
> 标签：c#, io, save

我正在尝试使用我的程序创建 .txt 文件并在其中保存富文本框的内容（或者只是编辑现有文件，但这已经有效）。问题是当我保存尝试保存文件时，它会创建文件但没有 .txt 扩展名。我尝试了几件事，包括以下两件事，但都创建了一个没有扩展名的文件。我怎样才能解决这个问题？

```
 SaveFileDialog op = new SaveFileDialog();
            op.Title = "Save";
            op.Filter = "Text Document(*.txt)|*txt";
            //op.DefaultExt = "txt";
            //op.AddExtension = true;

            if (op.ShowDialog() == DialogResult.OK)
            {
                using (Stream s = File.Open(op.FileName, FileMode.CreateNew))
                using (StreamWriter sw = new StreamWriter(s))
                {
                    sw.Write(richTextBox1.Text);
                }
            } 
```

和：

```
 SaveFileDialog op = new SaveFileDialog();
   op.Title = "Save";
   op.Filter = "Text Document(*.txt)|*txt";
   if (op.ShowDialog() == DialogResult.OK)
   {
       richTextBox1.SaveFile(op.FileName, RichTextBoxStreamType.PlainText);
       filename = op.FileName;
       this.Text = op.FileName;
   } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:01:36.033

您需要在此处的扩展名之前添加一个点：

```
op.Filter = "Text Document(*.txt)|*txt"; 
```

所以它变成了这样：

```
op.Filter = "Text Document(*.txt)|*.txt"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:01:59.390

你错过了一个点：

```
op.Filter = "Text Document(*.txt)|*.txt"; 
```

# xslt - 处理节点内的 url 标签

> ID：12828236
> 
> 赞同：0
> 
> 时间：2012-10-10T20:59:38.433
> 
> 标签：xslt, xslt-2.0

输入：

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="NOIA" xsi:noNamespaceSchemaLocation="sample.xsd">
<id>X17A</id>
<companyName>Foo Bars</companyName>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt turpis id metus porttitor convallis. Duis ullamcorper magna a est suscipit eget blandit magna ullamcorper. Vivamus sit amet auctor elit.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt turpis id metus porttitor convallis. Duis ullamcorper magna a est suscipit eget blandit magna ullamcorper. Vivamus sit <url>http://www.google.com/</url> amet auctor elit.</p>
</document> 
```

期望的输出：

```
<html>
<body>
<h1>Foo Bars Company</h1>
<div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt turpis id metus porttitor convallis. Duis ullamcorper magna a est suscipit eget blandit magna ullamcorper. Vivamus sit amet auctor elit.</p></div>
<div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis tincidunt turpis id metus porttitor convallis. Duis ullamcorper magna a est suscipit eget blandit magna ullamcorper. Vivamus sit <a href="http://www.google.com/">http://www.google.com/</a> amet auctor elit.</p></div>
</body>
</html> 
```

这是我从这张纸上得到的：

```
<?xml version="1.0"?> 
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0">

<xsl:output method="html" indent="yes" version="4.0"/>

<xsl:template match="/">
<html>
  <body>
    <xsl:apply-templates/>
  </body>
</html>
</xsl:template>

<xsl:template match="id"></xsl:template>

<xsl:template match="companyName">
<h1><xsl:value-of select="."/></h1>
</xsl:template>

<xsl:template match="url">
<a href="#test"><xsl:value-of select="."/></a>
</xsl:template>

<xsl:template match="p">
<div><p><xsl:value-of select="."/></p></div>
</xsl:template>

</xsl:stylesheet> 
```

我不知道如何将值放入 href=""

另外，这不会以href结尾，我只是在p中获取文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:47:36.167

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="url">
    <a href="{.}">
      <xsl:apply-templates />
    </a>
  </xsl:template>

  <xsl:template match="/*">
    <html>
      <body>
        <xsl:apply-templates select="*" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="id" />

  <xsl:template match="companyName">
    <h1>
      <xsl:value-of select="concat(., ' Company')" />
    </h1>
  </xsl:template>

  <xsl:template match="p">
    <div>
      <p>
        <xsl:apply-templates />
      </p>
    </div>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于最初提供的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
type="NOIA" xsi:noNamespaceSchemaLocation="sample.xsd">
  <id>X17A</id>
  <companyName>Foo Bars</companyName>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis
  tincidunt turpis id metus porttitor convallis. Duis ullamcorper
  magna a est suscipit eget blandit magna ullamcorper. Vivamus sit
  amet auctor elit.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis
  tincidunt turpis id metus porttitor convallis. Duis ullamcorper
  magna a est suscipit eget blandit magna ullamcorper. Vivamus sit 
  <url>http://www.google.com/</url>amet auctor elit.</p>
</document> 
```

**...产生了预期的结果：**

```
<html>
  <body>
    <h1>Foo Bars Company</h1>
    <div>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      Duis tincidunt turpis id metus porttitor convallis. Duis
      ullamcorper magna a est suscipit eget blandit magna
      ullamcorper. Vivamus sit amet auctor elit.</p>
    </div>
    <div>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      Duis tincidunt turpis id metus porttitor convallis. Duis
      ullamcorper magna a est suscipit eget blandit magna
      ullamcorper. Vivamus sit 
      <a href="http://www.google.com/">
      http://www.google.com/</a>amet auctor elit.</p>
    </div>
  </body>
</html> 
```

**请注意，此解决方案适用于 XSLT 1.0 或 XSLT 2.0。**

**解释：**

*   第一个模板是[`The Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html). 其目的是将所有节点和属性按原样从源文档复制到结果文档。

*   第二个模板匹配`<url>`文档中找到的任何元素。找到一个`<url>`元素后，将创建一个新`<a>`元素，给定一个与元素`href`的原始值匹配的属性`<url>`（通过 XSLT 的[`AVT [Attribute Value Template]`](http://www.w3.org/TR/xslt#attribute-value-templates)功能），并给定一个与该原始值匹配的`<url>`值。

**`<url>`请注意，如果需要以同样的方式替换其他元素，您可以`match`根据需要简单地更改第二个模板的属性。例如：**

```
<xsl:template match="url|some-other-element|yetAnotherElement"> 
```

*   第三个模板匹配任何`<id>`元素，并且代替该元素，不输出任何内容（这实际上删除了该元素）。

*   第四个模板匹配任何`<companyName>`元素。取而代之的是一个新`<h1>`元素被创建并被赋予一个值，该值是`<companyName>`'s 值和 "Company" 的串联。

*   第五个模板匹配任何`<p>`元素并将其包装在一个`<div>`元素中。

# kif-framework - 使用 KIF 测试 UIAnimation

> ID：12828237
> 
> 赞同：0
> 
> 时间：2012-10-10T20:59:39.623
> 
> 标签：kif-framework

简短：有没有办法测试动画是否按照 KIF 应有的方式完成，

Long：在 iOS 中，如果您为 UIView 设置动画，是否有办法在 KIF 中“测试”动画，或者至少等待动画结束，或者等待 UIView 处于某个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:48:38.750

使用`stepToWaitForViewWithAccessibilityLabel`，例如等待网络加载完成，带回响应，并显示到分页滚动视图，然后我可以开始滑动它。

```
[scenario addStep:[KIFTestStep stepToWaitForViewWithAccessibilityLabel:@"pagingScrollView"]];
[scenario addStep:[KIFTestStep stepToSwipeViewWithAccessibilityLabel:@"pagingScrollView" inDirection:KIFSwipeDirectionLeft]]; 
```

所以在你的动画完成后，呈现一个 AccessibilityLabel 像`animatedDonePresentView`.

# jquery - 在 JQuery Cycle 中启用静态链接

> ID：12828238
> 
> 赞同：1
> 
> 时间：2012-10-10T20:59:40.487
> 
> 标签：jquery, jquery-cycle

我正在使用最新版本的 JQuery Cycle，利用自定义 pagerAnchorBuilder 函数，如下所示：

```
pagerAnchorBuilder: function(idx, slide) { 
    // return selector string for existing anchor 
    return '#nav li:eq(' + idx + ')'; 
```

#nav 下的那些列表项也与 Jquery Accordion 相关联，因此当您单击它们时，更大的背景图像会发生变化，并且手风琴会下降以显示内容。

在该内容中，我有文本链接，但它们不起作用，不知道为什么，任何想法都会很棒。谢谢！

# ios - 具有授权的 UIWebView，单击链接时使用相同的身份验证

> ID：12828239
> 
> 赞同：2
> 
> 时间：2012-10-10T20:59:47.300
> 
> 标签：ios, xcode, uiwebview, nsurlrequest

我有一个 UIWebView 使用此代码使用基本授权导航到网页

```
NSString *authValue = [NSString stringWithFormat:@"Basic %@", AFBase64EncodedStringFromString(basicAuthCredentials)];
    [urlRequest setValue:authValue forHTTPHeaderField:@"Authorization"]; 
```

现在，当单击链接时，`shouldStartLoadWithRequest`会触发 webView，但不会加载页面，因为下一页也需要授权。

有没有办法自动将 Auth 添加到单击的链接中？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:31:08.937

如何在 shouldStartLoad 中正确创建新请求

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    BOOL shouldNavigate = NO;
    NSString *existingAuthValue = [request valueForHTTPHeaderField:@"Authorization"];
    if (existingAuthValue == nil)
    {
        NSString *authValue = [NSString stringWithFormat:@"Basic %@", AFBase64EncodedStringFromString(basicAuthCredentials)];
        [request setValue:authValue forHTTPHeaderField:@"Authorization"];
        NSMutableURLRequest *newRequest = [NSMutableURLRequest requestWithURL:request.URL];
        //Append any other info from the old request
        [webView performSelector:@selector(loadRequest:) withObject:newRequest afterDelay:0];
    }
    else
    {
        shouldNavigate = YES;
    }
    return shouldNavigate;
} 
```

编辑：对不起，我没有考虑到 NSURLRequest != NSMutableURLRequest。我会更新代码。

# erlang - 当两个节点都参与一个 mnesia 集群时，在不同的相同节点上使用的内存是否应该不同？

> ID：12828241
> 
> 赞同：0
> 
> 时间：2012-10-10T20:59:56.407
> 
> 标签：erlang, mnesia

我在两个不同的、相同的虚拟机上有两个节点——都是相同的 CentOS 64 位、相同数量的 RAM、CPU 等。

我在这两个节点上集群了 mnesia——非常维纳拉，非碎片集群

节点 1 显示以下内容

```
 {size,[{ttl,0,283},
        {scope_to_keys,5,97105},
        {type_to_keys,3,97043},
        {key_to_value,6015,393137},
        {schema,5,935}]} 
```

节点 2 显示

```
 {size,[{ttl,0,300},
        {scope_to_keys,5,97122},
        {type_to_keys,3,97060},
        {key_to_value,6015,405184},
        {schema,5,952}]} 
```

元组结构是 {table_name, records, words}。

*   mnesia:info() 在每个节点上运行时报告与上面完全相同的数字。
*   这些表都是内存副本
*   没有交易正在进行 - 几个小时没有行动
*   mnesia:info() 还报告：33 个事务已提交，0 个中止，9 个重新启动，0 个记录到磁盘 0 个持有锁，0 个在队列中；0 个本地事务，0 个远程 0 个事务等待其他节点：[]

两个节点报告使用的内存不同是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:29:31.993

你应该做的是询问两个节点表内容是否相同。Mnesia 和 Erlang 通常会收集垃圾。因此，在某些情况下，内存的实际使用可能会有所不同。另请注意，可能是其中一个节点当前正在做一些维护工作/成为领导者等等。这将使记忆有点不同。最后，这两个节点可能正在存储原始二进制文件所在的子二进制文件。但是在复制时，子二进制文件被削减并复制到另一个节点。这可能是一个小的差异。

除非大小有显着差异。也就是说，一个节点使用的内存增加了 33%，那么我就不会太担心了。

# java - 我不断收到 ArrayIndexOutOfBoundsException，但我不知道为什么

> ID：12828242
> 
> 赞同：0
> 
> 时间：2012-10-10T21:00:08.390
> 
> 标签：java

我一直`ArrayIndexOutOfBoundsException`在说 `winVals[i] = rand`，但我不知道为什么。

```
int valueCount = 5;
int theLimit = 5;
int[] winVals = new int[valueCount];
Random r = new Random();
int rand = 0;
for(int i= 0; i < winVals.length; i++)
{
    rand = r.nextInt(theLimit - 1) +1;
    if(i == 0)
    {
        winVals[0] = rand;
    }
    else if (i > 0)
    {
        for (int j = 0; j < winVals.length; j++)
        { 
           if( winVals[j] == rand)
           {
              i--;
           }      
           else
           {
               winVals[i] = rand;
           }
        }
    }
}
for(int i=0; i < valueCount; i++)
{
    System.out.println(winVals[i]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:03:31.590

```
for (int j = 0; j < winVals.length; j++)
{ 
   if( winVals[j] == rand)
       i--;
   else
   {
       winVals[i] = rand;
   }
} 
```

在本节中，您将遍历 和 的值`j`，`i`但您不必费心检查是否`i`仍然有效。如果`i`是 1 并且你减少它两次呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:03:21.167

您减少循环内的循环计数器：

```
if( winVals[j] == rand)
     i--; 
```

这导致出界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:05:40.560

我认为这条线是问题所在。

```
 if( winVals[j] == rand)
     i--; 
```

想想如果在这行之前，i=0 和 j=0，并且这个条件变为真，**i 变为，-1**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:11:11.900

刚刚测试了一下，因为上面提到的索引是递减的，所以它在一个无限循环中运行。

# php - 如何均匀地旋转标题（位置）URL？

> ID：12828243
> 
> 赞同：1
> 
> 时间：2012-10-10T21:00:08.120
> 
> 标签：php

我正在寻找在 3 个不同页面之间执行拆分测试。

我正在使用一个超级简单的 rotate.php 文件作为我的索引，它还没有旋转能力。这是它包含的内容：

```
<?php header('Location: http://stackoverflow.com');?> 
```

如何添加更多 URL，然后在它们之间均匀旋转？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:09:47.637

如果您希望对这些页面进行 A/B/C 测试并使用 Google Analytics，我建议您查看[Google Website Optimizer](http://www.practicalecommerce.com/articles/3203-Using-Google-Website-Optimizer-for-A-B-Testing)。

如果您仍想自己做，可以使用 Brad's answer 之类的方法。但是，如果您想要一个不错的结果，请不要忘记对用户进行 cookie 并确保您每次都将他们发送到同一页面。例如：

```
$pages = array(
     1 => 'http://stackoverflow.com',
     2 => 'http://google.com'
);
if (isset($_COOKIE['testpage']) && isset($pages[$_COOKIE['testpage']])) {
    $page = $pages[$_COOKIE['testpage']];
} else {
    $page = array_rand($pages);
    setcookie('testpage', $page, ...);
    $page = $pages[$page];
}
header('Location: ' . $page); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:01:59.193

我建议制作一组 URL，然后随机选择一个。

```
$urls = array(
    'http://stackoverflow.com',
    'http://google.com'
);
header('Location: ' . $urls[array_rand($urls)]); 
```

# jquery - 了解第三方开发的 JQuery 插件和 API 的方法

> ID：12828244
> 
> 赞同：2
> 
> 时间：2012-10-02T22:59:53.373
> 
> 标签：jquery, jquery-knob

我有一个关于第三方创建的 JQuery 插件和 API 以及理解它们的方法的问题。最近我下载了 JQuery Masonry/Infinite 滚动插件，根据说明我无法弄清楚如何配置它。所以我下载了一个完全开发的演示，然后手动删除了所有不会破坏功能的东西。留下的代码让我能够比文档更详细地理解插件。

我现在在一个名为 JQuery 旋钮的插件上遇到了类似的问题。 [http://anthonyterrien.com/knob/](http://anthonyterrien.com/knob/)

如果您查看 JQuery Knob 自述文件，它会说这是工作代码：

```
<input type="text" value="75" class="dial">    

$(function() {
  $('.dial')
      .trigger(
          'configure',
          {
          "min":10,
          "max":40,
          "fgColor":"#FF0000",
          "skin":"tron",
          "cursor":true
          }
      );
  }); 
```

但据我所知，根本不是。自述文件还说插件使用 Canvas。我想知道我是否应该将此代码包装在画布上下文中，或者此功能是否已经是插件的一部分。

我知道这种“问题”可能不适合这里，但我对阅读这类文档的假设有点困惑，并认为无论如何我都会发布查询。很想知道这是否是由于我的“newbi”编程经验，或者这是否是经验丰富的编码人员也与之抗争的原因。

谢谢你。

**编辑**

回应泰安娜的回复。

我修改了代码，还是不行。我把它贴在下面。我确保我检查了 Google 控制台以确保基础知识得到处理，例如在库上没有出现读取错误。

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title>knob</title>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/hot-sneaks/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<script src="js/jquery.knob.js"></script>

<div id="button1">test </div>
<script>

  $(function() {

    $("#button1").click(function () {
        $('.dial').trigger(
                'configure',
                  { 
                    "min":10,
                    "max":40,
                    "fgColor":"#FF0000",
                    "skin":"tron",
                    "cursor":true
                  }
            );
    });
  });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:38:04.950

为此，您需要意识到 trigger 不是来自 Knob 库的命令，而是一个 jQuery 命令。您可以在此处找到有关该命令的更多信息：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

所以，这将做的是，如果您将该脚本应用于按钮单击，它将将旋钮脚本应用于表盘样式，并将配置 div 看起来像代码中的内容。

像这样：

```
$("#button1").click(function () {
    $('.dial').trigger(
            'configure',
              { 
                "min":10,
                "max":40,
                "fgColor":"#FF0000",
                "skin":"tron",
                "cursor":true
              }
        );
}); 
```

如果您只想显示一个旋钮 onload，那么您只需执行以下操作：

```
$(function() {
    $(".dial").knob();
} 
```

至于你怎么知道的问题。一开始，查一下。转到 jQuery 并输入您不知道的方法名称。**判断它是否是来自 jQuery 的命令的一个好方法是开发者/作者是否在文档中没有解释它或如何使用它。**这意味着他们认为这是常识。如果你不知道它....查一下。

一开始，它是一触即发。你只需要不断尝试和学习，直到你掌握了窍门。不要用头撞到试图弄清楚的方式。如果您无法通过 Google 搜索快速找到答案，或者您正在使用的插件没有社区，请尝试通过电子邮件发送插件的作者。你会惊讶有多少人会回答问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:37:04.580

下面是 JQuery Knob API 的完整工作代码。

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title>knob</title>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/hot-sneaks/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<body>
<script src="js/jquery.knob.js"></script>

<input type="text"  class="dial">

<script>

$(".dial").knob(  

        {
        "displayPrevious":true,
        "width": 100,
        "min":0,
        "max":4,
        "data-angleOffset":+0,
         "data-angleArc": +300, 
        "fgColor":"#ffec03",
        "bgColor":"#ddd",
        //"data-skin":"tron",
        "thickness":.3,
        "data-cursor":true,

        }
    );

</script>

<body>

<style>

body{
    background-color:#000;
}

</style> 
```

# shopify - 在 Shopify 中显示特定系列

> ID：12828252
> 
> 赞同：1
> 
> 时间：2012-10-10T21:00:43.803
> 
> 标签：shopify

嗨，我正在将 psd 编码为 Shopify 主题。实际的商店应该有几个产品系列。我也是shopify的新手。

这是我不确定的。我将在顶部导航中列出各种系列....女式连衣裙、男式衬衫等，但是当用户使用时，确保正确的系列显示在单个系列页面 (collections.liquid) 上的最佳编码实践或技术是什么每次点击。

这个演示实现了我正在解释的内容，我已经下载了主题并研究了源代码，但仍然不太了解。

[http://megatronic-theme.myshopify.com/collections](http://megatronic-theme.myshopify.com/collections)

（点击左侧nav中的分类链接，每次一页显示相关收藏）

我希望有人可以简单地解释编码过程。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:37:58.913

这是自动为您完成的。Shopify 将选择 url 中指定的集合（例如`blah.myshopify.com/collections/hello`）并将该集合（`hello`在我们的示例中）放入`collection`液体变量中。然后，您可以使用`collection.products`模板访问产品

这是相关文档（我承认有点稀疏），向您展示了`collection.liquid`模板中可用的变量：[http ://wiki.shopify.com/Collection.liquid](http://wiki.shopify.com/Collection.liquid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T10:59:03.263

**/collections**路径正在使用`list-collection.liquid`模板，如果要更改默认行为，请编辑该文件。

默认情况下，它显示来自商店的所有收藏，它可以是自动收藏和手动创建的收藏。

# ruby-on-rails - 在保存之前和设置时间戳之后挂钩到 ActiveRecord 模型

> ID：12828253
> 
> 赞同：3
> 
> 时间：2012-10-10T21:00:50.010
> 
> 标签：ruby-on-rails, activerecord

我正在编写一个计算字段 ActiveRecord 扩展（扩展 ActiveSupport::Concern），它需要在记录保存之前对其执行一些计算。这些计算可能需要一些字段和时间戳本身的值（created_at、updated_at）。

但是，所有 before_save 回调都是在写入时间戳之前执行的。这是因为 Timestamp 模块覆盖了[create](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/timestamp.rb#L49 "节省")和[update](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/timestamp.rb#L63 "更新")来添加时间戳：

有谁知道在保存记录之前但在写入时间戳之后挂钩模型的简单方法？谢谢！

after_create 为我完成了这项工作，但它并不是一个干净的解决方案。首先，我需要再次调用 save 。其次，如果其他 gem 正在观察 after_create 事件，由于触发回调的方式，它们可能无法及时访问计算字段值。

# c# - 在 nHibernate 中执行空间搜索

> ID：12828258
> 
> 赞同：1
> 
> 时间：2012-10-10T21:01:07.937
> 
> 标签：c#, sql-server-2008, nhibernate, spatial

我想在 nHibernate v3.3.1.4000 中使用空间搜索，但`nHibernate.Spatial`不支持最新版本的 nHibernate。我发现它的形式是`HashFoo.Nhib.Spatial`. 我可以做些什么来执行空间搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:16:04.843

NHibernate Spatial 不再维护（或者看起来如此）。幸运的是，社区已经尝试从 sourceforge 数据创建 github 副本，并使其与最新的 NH 修订保持同步。

尽管有些不如其他成功，但您可以尝试以下项目，以与 3.3.1.4000 兼容：

[https://github.com/suryapratap/Nhibernate.Spatial](https://github.com/suryapratap/Nhibernate.Spatial)

# .net - 如果用户安装了 .Net Framework，如何在 Windows 注册表中检测？

> ID：12828261
> 
> 赞同：3
> 
> 时间：2012-10-10T21:01:45.660
> 
> 标签：.net, registry, installation, inno-setup

如果用户安装了 .Net Framework，如何在 Windows 注册表中检测？我不是在寻找基于 .Net 的解决方案，因为查询来自 InnoSetup。

我从 Stack Overflow 上的另一篇文章中了解到 .Net Framework 是对 4.0 的就地升级。

我已经知道如何检查用户是否在系统上安装了 4.0 版本，即通过检查以下内容：

```
function FindFramework(): Boolean; 
var
 bVer4x0: Boolean;
 bVer4x0Client: Boolean;
 bVer4x0Full: Boolean;
 bSuccess: Boolean;
 iInstalled: Cardinal;
begin
 Result := False;
 bVer4x0Client := False;
 bVer4x0Full := False;

 bVer4x0 := RegKeyExists(HKLM, 'SOFTWARE\Microsoft\.NETFramework\policy\v4.0'); 
 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4    \Client', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then bVer4x0Client := True;
 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4        \Full', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then bVer4x0Full := True;

 if (True = bVer4x0Full) then begin
    Result := True;
 end;
end; 
```

我检查了注册表，没有 v4.5 文件夹，如果 .Net Framework 4.5 是就地升级，这很有意义。尽管如此，控制面板程序和功能仍包含该列表。

我知道如果在已经有 4.5 版的系统上安装，“发出 dotNetFx45_Full_setup.exe /q”可能不会产生不良影响，但如果升级已经存在，我仍然不想安装升级，更快，问题更少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T22:25:52.327

我想分享我编写的实际 Inno Setup 代码，它专门回答了我的问题。感谢先前的答案将我推向正确的方向。

```
function FindFramework45(): Boolean; 
var
 bVer4x5: Boolean;
 bSuccess: Boolean;
 iInstalled: Cardinal;
 strVersion: String;
 iPos: Cardinal;
begin
 Result := False;

 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Full', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then
  begin
    bSuccess := RegQueryStringValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Full', 'Version', strVersion);
    if (True = bSuccess) then
     Begin
        iPos := Pos('4.5.', strVersion);
        if (0 < iPos) then bVer4x5 := True;
     End
  end;

 if (True = bVer4x5) then begin
    Result := True;
 end;
end; 
```

NextButtonClick() 事件将在欢迎之后立即调用此函数。

File 和 Run 部分仅包含一个使用 Check 并检查该变量的函数。

```
[Run]
Filename: "{app}\dotNetFx45_Full_setup.exe"; Parameters: "/q"; StatusMsg: "Installing Microsoft .Net 4.5 Framework..."; Check: InstallFramework45();

[Files]
Source: "{#MySourceBaseDir}\{#MyAppVersion}\{#MyDirBinaries}\dotNetFx45_Full_setup.exe"; Flags: deleteafterinstall; DestDir: "{app}"; Check: InstallFramework45(); 
```

我会说很明显，必须确保首先安装 .Net Framework 4.0，然后检查/安装 .Net Framework 4.5。

现在，如果 System.Data.SQLite.org 将推出与 Visual Studio 2012 兼容的版本，我可以检查我的另一个重大升级任务。

更新：2010.10.11（根据 TLana 的评论） 注意：我决定保留原始代码，因为我认为其他人希望看到我从哪里开始。下面的代码是我现在的位置。下面的代码还使用正确的注册表位置并检查 .Net 4.0 和新的 .Net 4.5。未来呢？当 .Net 6.0 和 6.5 出现时，只需将 4 更改为 6，除非 Microsoft 更改公式。.5 升级似乎不是一个新框架，而是对现有框架的升级。

```
[Files]
Source: "{#MySourceBaseDir}\{#MyDirBinaries}\dotNetFx40_Full_x86_x64.exe"; Flags: deleteafterinstall; DestDir: "{app}"; Check: Framework40IsNotInstalled();
Source: "{#MySourceBaseDir}\{#MyDirBinaries}\dotNetFx45_Full_setup.exe"; Flags: deleteafterinstall; DestDir: "{app}"; Check: Framework45IsNotInstalled();
Source: "{#MySourceBaseDir}\{#MyDirBinaries}\mysql-connector-net-6.5.4.msi"; Flags: deleteafterinstall; DestDir: "{tmp}";

[Run]
Filename: "{app}\vcredist_x86.exe"; Parameters: "/q"; StatusMsg: "Installing Microsoft Visual C++ 2010 Redistributable Package...";
Filename: "{app}\dotNetFx40_Full_x86_x64.exe"; Parameters: "/q"; StatusMsg: "Installing Microsoft .Net 4.0 Full Framework..."; Check: Framework40IsNotInstalled();
Filename: "{app}\dotNetFx45_Full_setup.exe"; Parameters: "/q"; StatusMsg: "Installing Microsoft .Net 4.5 Framework..."; Check: Framework45IsNotInstalled();
Filename: "msiexec"; Parameters: "/package ""{tmp}\mysql-connector-net-6.5.4.msi"" /quiet"; StatusMsg: "Installing MySQL Connector...";

[Code]

function Framework40IsNotInstalled: Boolean;
var
 bVer4x0Client: Boolean;
 bVer4x0Full: Boolean;
 bSuccess: Boolean;
 iInstalled: Cardinal;
begin
 Result := True;
 bVer4x0Client := False;
 bVer4x0Full := False;

 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Client', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then bVer4x0Client := True;
 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Full', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then bVer4x0Full := True;

 if (True = bVer4x0Full) then begin
    Result := False;
 end;
end;

function Framework45IsNotInstalled: Boolean;
var
 bVer4x5: Boolean;
 bSuccess: Boolean;
 iInstalled: Cardinal;
 strVersion: String;
 iPos: Cardinal;
begin
 Result := True;
 bVer4x5 := False;

 bSuccess := RegQueryDWordValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Full', 'Install', iInstalled);
 if (1 = iInstalled) AND (True = bSuccess) then
  begin
    bSuccess := RegQueryStringValue(HKLM, 'Software\Microsoft\NET Framework Setup\NDP\v4\Full', 'Version', strVersion);
    if (True = bSuccess) then
     Begin
        iPos := Pos('4.5.', strVersion);
        if (0 < iPos) then bVer4x5 := True;
     End
  end;

 if (True = bVer4x5) then begin
    Result := False;
 end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:07:38.827

**如何：确定安装了哪些 .NET Framework 版本**
[http://msdn.microsoft.com/en-us/library/hh925568.aspx](http://msdn.microsoft.com/en-us/library/hh925568.aspx)

**如何：确定安装了哪些 .NET Framework 更新**
[http://msdn.microsoft.com/en-us/library/hh925567.aspx](http://msdn.microsoft.com/en-us/library/hh925567.aspx)

这两篇文章中提供的代码适用于框架的 4.5 版。更新检测代码可识别所有常规更新、安全更新和修补程序。

# excel - 如何根据前一行的值复制单元格？

> ID：12828265
> 
> 赞同：0
> 
> 时间：2012-10-10T21:02:01.573
> 
> 标签：excel, excel-formula

我遇到了以下问题：

我有一个电子表格，我想用下面的单元格 B2 的值替换单元格 B1 的值，如果相应的单元格 A1（值低于 30）后面跟着一个值低于 80 的单元格 A2。

我想它应该有以下形式：

如果 A<30 且 A+1<80
则将 B+1 复制到 B

**这是原始列​​表的示例：**

```
A       B  
9   31.395020  
60  33.167969  
81  40.399902  
5   41.425293  
60  44.031738  
81  49.647949  
6   50.671875  
81  58.111816 
```

**这就是我想要得到的：**

```
A       B  
9   33.167969   
60  33.167969  
81  40.399902  
5   44.031738  
60  44.031738  
81  49.647949  
6   50.671875  
81  58.111816 
```

我可以使用 if 语句还是需要宏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:27:52.460

这是您要求的简单公式：

```
=IF(AND(A3<80,A2<30),B3,B2) 
```

![Excel简单公式](../Images/d64dd1c03fb4b8185b548daffbeaf9cc.png)

虽然我很好奇你需要这个有什么实际目的。祝你好运。

# css - 额外的引导响应大小

> ID：12828266
> 
> 赞同：1
> 
> 时间：2012-10-10T21:02:18.807
> 
> 标签：css, twitter-bootstrap, grid-layout

Bootstrap 为 CSS 文件提供媒体查询以支持设备数组，并以 1200 像素的最小宽度结束，该文件使用 1170 像素宽的网格。问题是在这种特殊情况下，有问题的网站需要一个至少 1400 像素的额外断点，然后在其中有一个网格（比如 1370 像素）。

我尝试过处理这些数字，并一直在寻找一种可以简化此操作的生成器，但我找不到。我找到了一个响应式网格生成器，但我不知道要输入什么值，因为它不是围绕 Bootstrap 形成的生成器。

总而言之，我不太确定如何继续执行此操作，并且希望得到一些意见！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:22:54.863

您应该添加它或搜索存档 bootstrap-resposive.css

```
@media (min-width: 1400px) {
    #yourid {
        width : 1370px;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T05:57:27.183

试试这个：[自定义](http://getbootstrap.com/customize/)

我不知道您是否可以以这种方式添加另一个媒体查询，尽管以任何一种方式检查都很酷。希望这可以帮助。

# cuda - 是否可以在 AMD GPU 上运行 CUDA？

> ID：12828268
> 
> 赞同：97
> 
> 时间：2012-10-10T21:02:26.723
> 
> 标签：cuda, gpu, gpgpu, nvidia, amd

我想将我的技能组合扩展到 GPU 计算。我熟悉光线追踪和实时图形（OpenGL），但下一代图形和高性能计算似乎是在 GPU 计算或类似的东西。

我目前在家用电脑上使用 AMD HD 7870 显卡。我可以为此编写 CUDA 代码吗？（我的直觉是否定的，但由于 Nvidia 发布了编译器二进制文件，我可能错了）。

第二个更普遍的问题是，我从哪里开始使用 GPU 计算？我确信这是一个经常被问到的问题，但我看到的最好的问题是从 08 年开始，我认为从那时起这个领域已经发生了很大的变化。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-10T21:03:49.993

不，您不能为此使用 CUDA。CUDA 仅限于 NVIDIA 硬件。[OpenCL](http://www.khronos.org/opencl/)将是最好的选择。

Khronos 本身有一个[资源列表](http://www.khronos.org/opencl/resources)。[StreamComputing.eu 网站也是](http://www.streamcomputing.eu/knowledge/self-study/tutorials/)如此。对于您的 AMD 特定资源，您可能需要查看[AMD 的 APP SDK 页面](http://developer.amd.com/tools/hc/AMDAPPSDK/Pages/default.aspx)。

请注意，目前有几个举措可以将 CUDA 翻译/交叉编译为不同的语言和 API。一个这样的例子是[HIP](https://github.com/ROCm-Developer-Tools/HIP)。但是请注意，这并不意味着 CUDA 可以在 AMD GPU 上运行。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-06-09T02:09:08.917

[您可以使用Coriander](https://github.com/hughperkins/coriander)在 Mac 上运行 NVIDIA® CUDA™ 代码，实际上也可以在 OpenCL 1.2 GPU 上运行。披露：我是作者。示例用法：

```
cocl cuda_sample.cu
./cuda_sample 
```

结果： [![在此处输入图像描述](../Images/444a67736f849d8c57bfadf346b9ff48.png)](https://i.stack.imgur.com/dGrHe.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-04T16:53:35.723

是的。:) 您可以使用 Hipify 非常轻松地将 CUDA 代码转换为 HIP 代码，这些代码可以编译在 AMD 和 nVidia 硬件上运行得很好。这里有一些链接

[GPUOpen 非常酷的站点，由 AMD 提供，拥有大量工具和软件库，可帮助处理 GPU 计算的不同方面，其中许多都适用于两个平台](https://en.wikipedia.org/wiki/GPUOpen)

[HIP Github 存储库，显示了 hipify 的过程](https://github.com/GPUOpen-ProfessionalCompute-Tools/HIP)

[HIP GPU打开博客](http://gpuopen.com/tag/hip/)

**2021 年更新**：AMD 更改了网站链接转到 ROCm 网站

[https://rocmdocs.amd.com/en/latest/](https://rocmdocs.amd.com/en/latest/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-18T09:19:58.933

您不能将 CUDA 用于 GPU 编程，因为 CUDA 仅受 NVIDIA 设备支持。如果你想学习 GPU 计算，我建议你同时开始 CUDA 和 OpenCL。这对你很有好处。说到 CUDA，你可以使用 mCUDA。它不需要NVIDIA的GPU..

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-18T18:11:07.830

[我认为这将很快在 AMD FirePro GPU 中成为可能，请参阅此处](http://www.amd.com/en-us/press-releases/Pages/boltzmann-initiative-2015nov16.aspx)的新闻稿，但对开发工具的支持将于 2016 年第一季度推出：

> 计划在 2016 年第一季度推出“玻尔兹曼倡议”工具的早期访问计划。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-12T09:23:48.080

这些是我能找到的一些基本细节。

> Linux

ROCm 支持 TensorFlow 和 PyTorch 等主要 ML 框架，并通过持续开发来增强和优化工作负载加速。

似乎支持仅适用于 Linux 系统。（[https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html](https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html)）

ROCm[支持](https://www.amd.com/en/graphics/servers-solutions-rocm-ml)TensorFlow 和 PyTorch 等主要 ML 框架，并通过持续开发来增强和优化工作负载加速。基于[HIP](https://rocmdocs.amd.com/en/latest/Programming_Guides/Programming-Guides.html)

*用于可移植性的异构计算接口 (HIP) 是一种 C++ 方言，旨在简化 CUDA 应用程序到可移植 C++ 代码的转换。它提供了 C 风格的 API 和 C++ 内核语言。C++ 接口可以跨主机/内核边界使用模板和类。HIPify 工具通过执行从 CUDA 到 HIP 的源到源转换来自动化大部分转换工作。HIP 代码可以在 AMD 硬件（通过 HCC 编译器）或 NVIDIA 硬件（通过 NVCC 编译器）上运行，与原始 CUDA 代码相比没有性能损失。*

Tensorflow ROCm 端口是 [https://github.com/ROCmSoftwarePlatform/tensorflow-upstream](https://github.com/ROCmSoftwarePlatform/tensorflow-upstream)，他们的 Docker 容器是[https://hub.docker.com/r/rocm/tensorflow](https://hub.docker.com/r/rocm/tensorflow)

> 苹果电脑

[对](https://developer.apple.com/metal/tensorflow-plugin/)macOS 12.0+ 的支持（根据他们的声明）

*Apple 在 2020 年 10 月和 2020 年 11 月使用量产的 3.2GHz 16 核英特尔至强 W 型 Mac Pro 系统、32GB RAM、AMD Radeon Pro Vega II Duo 显卡、64GB HBM2 和 256GB SSD 进行了测试。*

您现在可以在 TensorFlow v2.5 中利用 Apple 的 tensorflow-metal [PluggableDevice](https://blog.tensorflow.org/2021/06/pluggabledevice-device-plugins-for-TensorFlow.html)直接使用 Metal 在 Mac GPU 上进行加速训练。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-10-10T13:48:53.977

截至 2019_10_10 我还没有测试过，但是有“GPU Ocelot”项目

[http://gpuocelot.gatech.edu/](http://gpuocelot.gatech.edu/)

根据其广告，它试图为各种目标编译 CUDA 代码，包括 AMD GPU。

# asp.net - JQuery Mobile - 从外部页面（SinglePage-template）链接到内部页面（MultiPage-template）

> ID：12828269
> 
> 赞同：0
> 
> 时间：2012-10-10T21:02:42.760
> 
> 标签：asp.net, mobile, jquery-mobile

我有一个 JQuery 移动网站，它同时使用[多页](http://jquerymobile.com/test/docs/pages/multipage-template.html)和[单页](http://jquerymobile.com/test/docs/pages/page-template.html)方法。现在我遇到了一个链接问题：当我在“外部”单页上时，如何引用位于多页模板中的“内部”页面？

我的多页模板如下所示：

```
<body>
    <div id="mulitpage-wrapper">
        <msc:mobileHome />
        <msc:mobileTestDirectory />
        <msc:mobileContactUs />
    </div>
</body> 
```

里面的一个页面是这样包装的：

```
<div data-role="page" id="home">
     ...Some Header, Content and Footer...
</div> 
```

我已经阅读了有关JQuery Mobile 中的[链接](http://jquerymobile.com/test/docs/pages/page-links.html)的信息，并且我已经尝试通过将 msc 标记包装在带有名称和 id 标记的 div 中来像锚一样链接它。我还尝试锚定多页子页面的“主页”ID，看起来像这样：

```
<a href="../mobile/index.asp#home">link</a> 
```

在此代码示例中，如何实现从外部页面链接“mobileHome”？

还有一件事：当我将鼠标悬停在它上面时，Firefox 会显示正确的链接，当我复制粘贴该链接时，浏览器会加载正确的视图......

感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:02:39.827

尝试将属性添加`rel="external"`到您的链接：

```
<a href="../mobile/index.asp#home" rel="external>link</a> 
```

试一试，让我知道这是否适合你:)

# tsql - 如何跳过重复记录的插入并在 Sybase T-SQL 中继续？

> ID：12828271
> 
> 赞同：1
> 
> 时间：2012-10-10T21:02:53.930
> 
> 标签：tsql, sybase

我正在使用以下简单`insert`子句插入几百万行：

```
insert into DEST_TABLE
select *
from SRC_TABLE 
```

但是插入时可能会出现重复，这会抛出错误，整个操作将结束。

有没有办法从头到尾执行插入操作，并且不会因重复插入错误而中断。忽略重复的插入错误并且不插入它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:20:30.820

最好一起避免这个问题并预先过滤掉它们：

```
insert into DEST_TABLE
select *
from SRC_TABLE
EXCEPT
select *
from DEST_TABLE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:50:13.333

这些是处理重复行的方法。

1.  删除约束并插入行。然后使用选项 ignore_dup_row 在表上删除重复项创建聚集索引

2.  使用选项 ignore_dup_row 删除所有约束在表上创建集群索引。如果行重复，它不会插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:07:27.107

好吧，重复插入错误只能来自您的`DEST_TABLE`.

所以删除 DEST_TABLE 中的约束，插入，清理数据，然后放回约束。

如果您的`DEST_TABLE`.

另一个（更好的）解决方案是通过更改您的`SELECT`子句来获取不重复的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:09:11.990

也许 where 子句会很好？

```
insert into DEST_TABLE
select *
from SRC_TABLE S
where not exists
      (
         select 1
         from DEST_TABLE D
         where D.id=S.id
      ) 
```

# tcp - 使用一系列 TCP 端口计算连接数的脚本

> ID：12828272
> 
> 赞同：1
> 
> 时间：2012-10-10T21:02:56.347
> 
> 标签：tcp, awk, grep, ports, connection

我正在使用以下脚本来计算已建立的连接数，以及特定 TCP 端口范围的时间等待状态。

该脚本使用 netstat 和 egrep 来尝试过滤掉有效的连接。该脚本还从文件中读取输入并计算观察到的连接数。

```
#!/bin/bash
START=121
END=9089

[ -f /tmp/ports.txt ] && rm -f /tmp/ports.txt

for ((a=$START; a <= $END; a++)); do
    netstat -an | nawk '/TIME_WAIT|ESTABLISHED/ && !/127.0.0.1/{split($4,a,".");print a[5]}' | egrep -c ^${a}$ | \
    awk -v x=$a '\
    $0 != 0 {printf("%d %d\n",x,$0)}' | tee -a /tmp/ports.txt
done

awk -v s=$START -v e=$END '\
    BEGIN{t=0}
    {t=t+$2}
    END{printf("\nTotal Connections on ports %d-%d: %d\n",s,e,t)}' /tmp/ports.txt

rm -f /tmp/ports.txt 
```

我正在寻找提高脚本性能的方法。使用当前的端口范围 (121-9089) 大约需要 77 秒才能完成。

我正在寻找提高性能的建议以及示例脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:25:23.760

您运行`netstat -an`了 8000 多次，并且一次只提取一个端口。

我会用不同的逻辑改变你的主循环：

```
netstat -na | grep -E "TIME_WAIT|ESTABLISHED" | while read line; do
    port=`echo $line | awk -F":" ' { print $2 }' | awk ' { print $1 }'` #<--- get here your port
    [ $port -ge $START ] && [ $port -le $END ] && echo $line | tee -a /tmp/ports.txt #<---- put only the selected range
 done 
```

这样你`netstat`只会一次。

请注意，您需要更改`awk`我示例中的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:55:53.490

Birei，使用您上面的示例，脚本已略有更改。

```
#!/bin/bash
OS=$(uname)

case "$OS" in
    'SunOS')
            AWK=/usr/bin/nawk
            ;;
    'Linux')
            AWK=/bin/awk
            ;;
    'AIX')
            AWK=/usr/bin/awk
            ;;
esac

netstat -an | $AWK -v start=1 -v end=65535 ' $NF ~ /TIME_WAIT|ESTABLISHED/ && $4 !~ /127\.0\.0\.1/ {
    if ($1 ~ /\./)
            {sip=$1}
    else {sip=$4}

    if ( sip ~ /:/ )
            {d=2}
    else {d=5}

    split( sip, a, /:|\./ )

    if ( a[d] >= start && a[d] <= end ) {
            ++connections;
            }
    }
    END {print connections}' 
```

我们将它与我们的网络监控工具一起使用。(zabbix) 我已经使用 solaris 10、Linux 6.3 和 AIX 7 测试了该脚本，该脚本按预期工作，并说明了 netstat 输出它的列的方式的差异以及分隔符字符的差异。即 . 或 : 出现在第 2 列或第 4 列中。它检查第一列是否包含 . 并相应地设置变量 sip ，然后确定是 a : 还是 a 。用作端口分隔符。

其余的都差不多。

谢谢你的榜样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:26:06.867

单程：

```
netstat -an | 
awk -v start=121 -v end=9089 '
    $NF ~ /TIME_WAIT|ESTABLISHED/ && $4 !~ /127\.0\.0\.1/ { 
        split( $4, a, /:/ ); 
        if ( a[2] >= start && a[2] <= end ) { 
            ++connections; 
        } 
    } 
    END { 
        printf("\nTotal Connections on ports %d-%d: %d\n", start, end, connections ); 
    }
' 
```

# c - 总线错误帮助

> ID：12828278
> 
> 赞同：0
> 
> 时间：2012-10-10T21:03:20.550
> 
> 标签：c

我有一个使用 ncurses 显示设置程序文本的可视程序，它似乎在 gcc 2.9.5 上运行良好（不要问），但在较新的 gcc 上它会崩溃。

```
char   *
dofDisplay(dlistptr *ptr)
{
        static char p[100];

        sprintf(p, " %-36s ", (*ptr)->datainfo.option);
        return p;
} 
```

GDB 报告如下：

```
0x0000000000402811 in dofDisplay (ptr=Variable "ptr" is not available.
) at file.c:676
676             sprintf(p, " %-36s ", (*ptr)->datainfo.option); 
```

dlistptr 是在另一个文件中定义的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:08:37.393

由不同编译器（或同一编译器的不同版本）编译的库可能使用不同的调用约定，因此不具有二进制兼容性。如果您还没有查看是否可以修复它，您可能会考虑使用新编译器重新制作整个项目。

# java - 如何对 ArrayList 进行排序？

> ID：12828288
> 
> 赞同：-2
> 
> 时间：2012-10-10T21:03:49.260
> 
> 标签：java, sorting, datetime

我有一些包含 DataTime(Joda-time) 类型元素的列表。如何按日期对它们进行排序？如果有人给出该示例的链接，那就太好了...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T21:06:45.797

因为列表的对象实现了`Comparable`接口，所以可以使用

```
Collections.sort(list); 
```

`list`你在哪里`ArrayList`。

* * *

相关Javadocs：

*   [`Collections`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)
*   [`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)
*   [`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

* * *

**编辑：**如果要以`DateTime`类似方式对包含字段的自定义类列表进行排序，则必须自己实现`Comparable`接口。例如，

```
public class Profile implements Comparable<Profile> { 
    DateTime date;
    double age; 
    int id; 

    ...

    @Override
    public int compareTo(Profile other) {
        return date.compareTo(other.getDate());  // compare by date
    }
} 
```

现在，如果你有一个`List`of`Profile`实例，你可以使用与上面相同的方法，即s的列表`Collections.sort(list)`在哪里。`list``Profile`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T21:06:47.077

[`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)已经实现了 Comparable 你只需要使用`Collections.sort()`

# xcode - Xcode 如何使用多个目标，除了 PCH 和 info plist 文件外，所有目标都相同

> ID：12828290
> 
> 赞同：1
> 
> 时间：2012-10-10T21:03:50.703
> 
> 标签：xcode, xcode4, xcodebuild

我们希望有多个构建目标，其中唯一的区别是 PCH 文件或预处理器宏设置。（无论哪种方式都允许我们根据我们拥有的目标来改变预处理器指令。）

我们不想维护包含的源文件、捆绑资源、链接库等的几个单独列表。

基本上我们想要这个：

*   MyApp（基本目标）
*   MyAppDev（覆盖“MyApp”，但使用不同的 pch/预处理器宏）
*   MyAppQA（也覆盖）
*   MyAppProduction（也覆盖）

我们想要它，所以我们只需将所有源文件添加到“MyApp”并拥有预处理器宏的基本列表，以及每个构建特定的一些。

然后我们将有对应的方案并构建每个目标：

*   MyAppDevScheme
*   MyAppQAScheme
*   MyAppProductionScheme

Xcode可以做到这一点吗？

我们还想结合使用 xcodebuild 命令行工具，但如果我们能做到我上面描述的，那应该很容易。

如果有人可以解释这一点，我会很高兴！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:13:16.987

尝试这个：

在您的项目设置 (Info) 中，复制 Release 或 Debug 构建配置。然后调整目标的构建设置，添加不同的预处理器变量，或调整 PCH 文件名。

之后，您可以为每个配置创建一个方案，这样您就可以轻松构建您想要的目标。

对于 xcodebuild 构建，只需根据需要指定 -configuration 或 -scheme。

这与 Apple 建议为应用商店构建的方式几乎相同。

# http - 使用 HTTP 的 WCF 自定义用户名身份验证

> ID：12828295
> 
> 赞同：3
> 
> 时间：2012-10-10T21:04:11.693
> 
> 标签：http, security, wcf

我正在尝试将我的 WCF 服务配置为通过 HTTP 和我的 ASP.NET 开发服务器使用自定义用户名验证器。以下是 serviceModel 的部分...

```
<basicHttpBinding>
    <binding name="Authentication" >
      <security mode="TransportCredentialOnly" >
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
</basicHttpBinding>

  <service behaviorConfiguration="ApiBehavior" name="CriticalWatch.AuthenticationAPI.AuthenticationAPI">
    <endpoint address="/" binding="basicHttpBinding" bindingConfiguration="AuthenticationBinding" name="Authentication" contract="CriticalWatch.AuthenticationAPI.IAuthenticationAPI" />
  </service> 
```

然后我对验证器有一个行为......

```
 <serviceBehaviors>
    <behavior name="ApiBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="Service.CustomUserNameValidator, MyService" />
      </serviceCredentials>

    </behavior>
  </serviceBehaviors> 
```

我的 CustomUserNameValidator 继承自 UserNamePasswordValidator。验证器类被实例化，但从未调用 Validate 方法。另外，客户端可以在不传递任何用户名和密码的情况下调用该方法。

我错过了什么？

这时候，我想要一个不需要 HTTPS 的解决方案。我想依赖随消息传递的用户名和密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T19:04:40.297

另外，请参阅我的博客文章，了解如何实现一个绑定，允许您在没有 SSL 的情况下通过 HTTP 传递用户名和密码：http: [//blog.tonysneed.com/2012/06/18/building-scalable-and-secure- wcf-services/](http://blog.tonysneed.com/2012/06/18/building-scalable-and-secure-wcf-services/)但是请记住，通过非安全传输以明文方式传递凭据并不是一个好主意。我描述的技术假设您正在使用另一种机制（例如 IPSec）来保护传输，并且它对于支持 SSL 终止以获得更好的可伸缩性的负载平衡器很有用。

为了具体解决您的场景，我建议您咬紧牙关，使用 SSL 设置您的开发环境，以便您可以将 HTTPS 绑定与 WCF 和您的用户名密码验证器一起使用。这比实现自定义绑定元素要容易得多，也没有您想象的那么困难。事实上，如果您安装了 IIS Express，您将获得一个自签名证书，您可以轻松地将其用作 IIS 或 Windows 服务上的证书。

干杯，托尼·斯尼德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:05:52.637

默认情况下，WCF 框架不允许通过 HTTP 通道传输用户名/密码作为其明文和安全违规，因此当您切换到 HTTPS 时，用户名/密码验证器会起作用。如果您想让用户名/密码验证器在 HTTP 上工作，您可能需要编写执行此操作的自定义服务主机工厂。您可以找到一个很久以前就出现在这里的[ClearUserNameBinding](http://webservices20.blogspot.co.uk/2008/11/introducing-wcf-clearusernamebinding.html)。它允许您通过 HTTP 执行用户名/密码验证。

注意：如前所述，出于安全考虑，不建议在 HTTP 上使用用户名/密码，但如果您确定您的服务位于足够安全的防火墙之后，并且从客户端到防火墙的调用是安全的，因此用户名/密码是没有妥协，那么你可以使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T20:21:49.203

请参阅[如何在 ASP.NET](https://stackoverflow.com/questions/6456278/how-to-set-up-basic-authentication-sans-ssl-in-asp-net)中设置无 SSL 的基本身份验证，其中提供了指向[HTTP 请求未经授权的客户端身份验证方案“基本”](http://ozkary.blogspot.in/2011/05/http-request-is-unauthorized-with.html)的链接。这让我摆脱了困境。

# mongodb - Mongo Database Profiler：这个查询是什么？

> ID：12828297
> 
> 赞同：0
> 
> 时间：2012-10-10T21:04:18.407
> 
> 标签：mongodb

我试图了解 Mongo Database Profiler 的这一行输出：

```
{ "ts" : ISODate("2012-10-10T20:58:16.805Z"), "op" : "query", "ns" : "streamified.system.indexes", "query" : { "ns" : "streamified.cache_b7dd924a2dab81cc0d47346982d90ee1s" }, "nscanned" : 34566, "nreturned" : 2, "responseLength" : 304, "millis" : 130, "client" : "10.188.17.26", "user" : "" } 
```

显然，这与我的 cache_b7dd924a2dab81cc0d47346982d90ee1s 集合中的索引有关。但是，我不清楚这里发生了什么，因为通常我会看到在查询对象中执行的查询，而不仅仅是 ns. ns 是 system.indexes 的事实似乎意味着我的表上的索引正在被查询或更新。

我问的原因是我在这种性质的探查器中有很多查询，它们是我最慢的查询，所以我正在尝试优化它们......但我不知道它们来自哪里;）

# linux - Wget：如何绕过“盗链”受保护的图像

> ID：12828299
> 
> 赞同：3
> 
> 时间：2012-10-10T21:04:29.580
> 
> 标签：linux, bash, web, wget, hotlinking

是否可以绕过“热链接”图像保护？我不是想在其他网站上发布它只是为了下载。当我使用 wget 下载以下图像时：

```
http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg 
```

我被重定向到：

```
http://comicsbook.ru/trollface/70813?na-bortu 
```

我不知道从哪里开始。到目前为止我已经尝试过：

```
curl "http://comicsbook.ru" -s -L -b cookie.c -c cookie.c -b "$COOKIEPAR" > index.$TEMP
wget http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:11:50.310

您可以使用 的`--refer=URL`选项`wget`。也许你可以尝试：

```
wget --referer=http://comicsbook.ru http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:12:02.687

要下载此图像，请运行以下 curl 命令：

```
curl -e 'http://comicsbook.ru/trollface/70813?na-bortu' -A "Mozilla/5.0" -L -b /tmp/c -c /tmp/c -s 'http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg' > image.jpg 
```

所有的魔法都在`-e`switch 中：[referer](http://en.wikipedia.org/wiki/HTTP_referer)

# objective-c - 使用 URL 输入更改和重新加载 UITableView

> ID：12828300
> 
> 赞同：0
> 
> 时间：2012-10-10T21:04:32.887
> 
> 标签：objective-c, ios

我用 UITableView 编写了一个简单的 RSSReader。我可以通过在 ViewController 类中实现 UITableDataSource 来显示指定的提要。但是，我正在尝试显示输入到文本框中的提要。我使用 NSLogs 进行调试，输入的提要在按钮按下时被正确解析。但是，在`[[self tableOfFeeds] reload]`视图没有更新。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self setNf: [[NewsFeed alloc] init]];
    if ([textFieldUserInput.text length] == 0)
    link = @"http://afeedurl.com/feed.rss";
     [self.nf setFeedUrl:[NSURL URLWithString:link]];
    [self.nf retrieveFromInternet];
    for (id newsItem in [self.nf newsStories]){ // Debug
        NSDictionary * d = (NSDictionary *) newsItem;
        NSLog(@"Title: %@ \n %@", [d objectForKey:@"title"], [d objectForKey:@"description"]);
    }
    [[self tableOfFeeds] setDataSource:self];
    [[self tableOfFeeds] setRowHeight:70.0];
    [[self tableOfFeeds] reloadData];
} 
```

这是更改提要的操作。

```
- (IBAction)refreshFeed:(id)sender {
    NSString * ui = self.textFieldUserInput.text;
    if ([ui length] == 0) // If text field is blank, then reload the old feed from internet.
        [[self tableOfFeeds] reloadData];
    else {
        [self.nf setFeedUrl: [NSURL URLWithString:ui]];
        [self.nf retrieveFromInternet];
        [[self tableOfFeeds] setDataSource: self];
        [[self tableOfFeeds] reloadData];

        for (id newsItem in [self.nf newsStories]){ // Debug
            NSDictionary * d = (NSDictionary *) newsItem;
            NSLog(@"Title: %@ \n %@", [d objectForKey:@"title"], [d objectForKey:@"description"]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:57:35.303

问题中的上述代码似乎是有效的。我将问题追溯到这种方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString * cellId = @"feeds";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:cellId];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellId];
        NSMutableDictionary * news = (NSMutableDictionary *) [[[self nf] newsStories] objectAtIndex: indexPath.row];
        [[cell textLabel] setText: [news objectForKey:@"title"]];
        [[cell detailTextLabel] setText: [news objectForKey:@"description"]];
        [[cell detailTextLabel] setNumberOfLines:2];

    }
        return cell;
} 
```

声明 NSMutable Dictionary 并设置单元格文本的部分需要在 if 语句之外。

我认为这是可行的，因为我想更改的大多数单元格已经包含数据，因此不需要调用 alloc/init。

# ninject - Ninject - 获取接口的绑定

> ID：12828301
> 
> 赞同：2
> 
> 时间：2012-10-10T21:04:34.883
> 
> 标签：ninject

因此，我将接口绑定到具体类

```
_ninjectKernal.Bind<IAuctionContext>().To<AuctionContext>() 
```

我想要在我的代码中做的是获取接口的具体类`IAuctionContext`。所以我想做这样的事情

IAuctionContext 上下文 = .GetBinding();

`context`将在哪里类型`AuctionContext`。

这可能吗。我过去用 StructureMap 做过类似的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:07:29.087

```
// get access to the "container"
IKernel kernel = new StandardKernel(.....);

// use kernel, as you would any other container
var context = kernel.Get<IAuctionContext>(); 
```

*注意 - 如果您使用依赖注入，您应该避免直接调用`Get( ... )`“内核”（或`Container.GetInstance( ... )`StructureMap）。*

# mysql - 检索数据的 3 个表的特定 JOIN

> ID：12828310
> 
> 赞同：1
> 
> 时间：2012-10-10T21:05:04.723
> 
> 标签：mysql, sql, sql-server, sql-server-2008, mysqli

我在 MySQL 中有 3 个表

```
USERS
uid
email
password
created 
```

这是包含所有用户的所有记录的表

```
PHOTOS
iid
uid
file
thumb
uploaded 
```

这是保存每个用户发布的所有照片的表格

```
COMMENTS
cid
iid
uid
message
created 
```

这是保存每个用户对每张照片的所有评论的表格

我想要的是一个查询，它可以为每个唯一（ ）用户检索`COUNT`每张照片的评论数量（） 。`DISTINCT`例如（结果输出必须是）：

```
comment_amount  by_user on_picture
3               1       1
2               2       1
2               1       2
5               2       2
6               2       3 
```

所以输出可以告诉我们它是否被格式化为（示例）

```
3 comments posted by USER1 on PICTURE1
2 comments posted by USER2 on PICTURE1

2 comments posted by USER1 on PICTURE2
5 comments posted by USER2 on PICTURE2

6 comments posted by USER2 on PICTURE3 
```

到目前为止我所拥有的是

```
SELECT 
users.uid
FROM users
INNER
    JOIN photos
    ON photos.uid = users.uid
INNER
    JOIN comments
    ON comments.iid = photos.iid 
```

这是沙盒测试

```
http://sqlfiddle.com/#!2/955d5/1 
```

但我不知道下一步该怎么做，任何帮助将不胜感激！MySQL 以外的任何语言也应该可以工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:12:06.780

您的查询可能类似于：

```
SELECT users.uid AS UserId, count(comments.cid) AS CountComments
FROM users
INNER
    JOIN photos
    ON photos.uid = users.uid
INNER
    JOIN comments
    ON comments.iid = photos.iid
group by users.uid 
```

你可以[测试一下](http://sqlfiddle.com/#!2/955d5/2)

如果要添加图像 ID，可以将 photo.iid 添加到分组依据

```
SELECT users.uid AS UserId, count(comments.cid) AS CountComments, 
  photos.iid as PhotoId
  FROM users
INNER
    JOIN photos
    ON photos.uid = users.uid
INNER
    JOIN comments
    ON comments.iid = photos.iid
group by users.uid, photos.iid 
```

[看看这个](http://sqlfiddle.com/#!2/955d5/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:14:38.620

```
SELECT count(*) AS comment_amount, users.uid AS by_user, photos.iid AS on_picture
FROM users
INNER
    JOIN photos
    ON photos.uid = users.uid
INNER
    JOIN comments
    ON comments.iid = photos.iid
group by users.uid, photos.iid 
```

要不就

```
SELECT count(*) AS comment_amount, uid AS by_user, iid AS on_picture
FROM comments 
```

如果您只需要评论表中的数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:18:59.077

我会先做 GROUP：

```
SELECT  iid, uid, count(*)
FROM comments
GROUP BY  iid, uid 
```

然后加入相关表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:14:41.603

```
 SELECT 
    users.uid, photos.iid, count(*) nb
    FROM users
    INNER
    JOIN photos
    ON photos.uid = users.uid
INNER
    JOIN comments
    ON comments.iid = photos.iid

group by users.uid, photos.iid 
```

感谢 sql fiddle 链接，我不知道。

# vector - C++中的向量唯一性

> ID：12828312
> 
> 赞同：1
> 
> 时间：2012-10-10T21:05:13.973
> 
> 标签：vector, stdset

这是我[之前的问题](https://stackoverflow.com/questions/12826364/c-stdmap-or-stdset-efficiently-insert-duplicates)的后续，我想知道在 std::set 中存储非重复任意数据的最有效方法。

答案很有帮助地指出，对于自定义类，您需要实现 operator< （如果我理解正确的话）。

但是，我的特定数据类型是向量（在数学意义上）。我想要做的是仅在集合中不存在新向量时才将其存储。为此，如何在两个向量之间实现小于运算符？当有 3 个正交维度可供比较时，这似乎没有意义。我可以使用什么策略来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:16:54.663

std::set 可以接受任何实现严格弱比较的比较类作为其第二个模板参数，它不必是 '<' 运算符。只需编写一个与“<”相同的比较：

```
struct Compare {

  bool operator( )( const T& left, const T& right ) const {
    if ( left.dimension1 < right.dimension1 ) return true; 
    if ( left.dimension2 < right.dimension2 ) return true; 
    return left.dimension3 < right.dimension3;
  } 

}; 
```

# asp.net-mvc - MVC 4 从基本路线中删除“家”

> ID：12828317
> 
> 赞同：37
> 
> 时间：2012-10-10T21:05:40.497
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

基本上我想这样做： [http ://website.com/Home/About](http://website.com/Home/About)

显示为： [http ://website.com/About](http://website.com/About)

显示在 url 中的“home”控制器会使 url 更长，以供用户阅读。

我尝试执行以下操作：

```
routes.MapRoute(
            name: "About",
            url: "",
            defaults: new { controller = "Home", action = "About", id = UrlParameter.Optional }
            ); 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-10T21:14:31.097

尝试这样的事情：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "OnlyAction",
        "{action}",
        new { controller = "Home", action = "Index" } 
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-25T16:17:01.703

尝试这个。它还使您的 URL 小写。

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.LowercaseUrls = true;

        routes.MapMvcAttributeRoutes();

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

在您的 Home 控制器中：

```
 [Route("About")]
    public ActionResult About()
    {
        return View();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-13T21:35:39.247

**第 1 步：** 创建路由约束。

```
public class RootRouteConstraint<T> : IRouteConstraint
    {
        public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
        {
            var rootMethodNames = typeof(T).GetMethods().Select(x => x.Name.ToLower());
            return rootMethodNames.Contains(values["action"].ToString().ToLower());
        }
    } 
```

**第 2 步：**
在使用我们刚刚创建的路由约束的默认映射之上添加一个新的路由映射。通用参数应该是您计划用作“根”控制器的控制器类。

```
routes.MapRoute(
                "Root",
                "{action}",
                new {controller = "Home", action = "Index", id = UrlParameter.Optional},
                new {isMethodInHomeController = new RootRouteConstraint<HomeController>()});

 routes.MapRoute(
                    "Default",
                    "{controller}/{action}/{id}",
                    new
                    {controller = "Home", action = "Index", id = UrlParameter.Optional}
                    ); 
```

现在您应该能够像这样访问您的家庭控制器方法：example.com/about、example.com/contact

> 这只会影响 HomeController。所有其他控制器将具有默认路由功能。

# html - 粘滞页脚在 IE7 中未更新

> ID：12828319
> 
> 赞同：-1
> 
> 时间：2012-10-10T21:05:55.303
> 
> 标签：html, css, internet-explorer-7

这显然是指向粘性页脚的“最佳”解决方案的链接（仅当页面上的内容很少时才会停靠）。

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

当您在任何其他浏览器（Firefox，我测试过的 chrome）中调整窗口大小时，页脚会随窗口移动。在 IE7 中它不会移动，您需要刷新页面才能使其正确定位。

谷歌似乎能够做到这一点，所以我想知道，他们是如何做到这一点的，而我却做不到？他们是在使用 JavaScript，还是我缺少一个优雅的 CSS 解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:08:01.180

我以前使用过 Chris Coryier 的解决方案，并且从未遇到过 IE 的任何问题：http: [//css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

**CSS**

```
* { margin:0; padding:0; } 

html, body, #wrap { height: 100%; }

body > #wrap {height: auto; min-height: 100%;}

#main { padding-bottom: 150px; }  /* must be same height as the footer */

#footer { 
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
} 

/* CLEAR FIX*/
.clearfix:after {content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
.clearfix {display: inline-block;}
/* Hides from IE-mac \*/
* html .clearfix { height: 1%;}
.clearfix {display: block;}
/* End hide from IE-mac */ 
```

**HTML**

```
<div id="wrap">

    <div id="main" class="clearfix">

    </div>

</div>

<div id="footer">

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:10:18.860

这是我使用的一个，它一直对我有用。

[http://www.cssstickyfooter.com/es/](http://www.cssstickyfooter.com/es/)

# objective-c - 如何获取 UINavigationController 的内容大小？

> ID：12828320
> 
> 赞同：0
> 
> 时间：2012-10-10T21:05:55.610
> 
> 标签：objective-c

我正在尝试获取 UINavigationController 的内容大小。
我可以像这样使用仅考虑导航栏高度的内容大小。

```
CGSize contentSize = self.view.bounds.size; 
```

但我想让它考虑导航栏和工具栏的高度。

如何得到它？

======== 问题后评论====================
哦~我的错误。
您可以通过上述方式获得两个考虑的帧大小。================================================

景观

![在此处输入图像描述](../Images/68e425fbc009ebaab1c2f8e4954f2d45.png)

肖像

![在此处输入图像描述](../Images/581c864789ccca70512122902bbfe1f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:12:04.787

您想要的是相关导航控制器的顶视图控制器，它的框架具有您想要的大小：

```
CGSize contentSize = nav.topViewController.frame.size; 
```

# css - 如何覆盖外部css？

> ID：12828327
> 
> 赞同：10
> 
> 时间：2012-10-10T21:06:27.247
> 
> 标签：css, html, overriding, padding

我有一个外部 css 文件，它将 35px 填充应用于我的内容 div。我所有的 html 页面都加载在该 div 中，但对于其中一个页面，我想使用 0 padding-right。

我尝试了内联 css，将其直接应用到该页面的正文上，并且还使用了 !important 但没有任何效果。

我做错了什么？

索引.html：

```
<div id="content"><?php include "page.html"?></div> 
```

主.css：

```
#content{
    margin-top: 303px;
    padding: 35px;
    z-index:1;
} 
```

page.html：

```
<body style="padding:0px;"> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-10T21:19:02.337

要覆盖 css 设置，您必须使用关键字 important。

```
<body style="padding:0px ! important;"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T21:12:04.000

CSS 自上而下读取，因此代码中较低的任何内容都应被覆盖，请参阅：http: [//jsfiddle.net/PFx9h/](http://jsfiddle.net/PFx9h/)

如果某些东西没有生效，那是因为有一些其他代码覆盖了它。使用诸如 Webkit Dev Tools 或 Firebug 之类的元素检查器来查看正在应用哪些样式以及如何应用。

编辑：

由于您发布了代码，`body`样式将不适用于 div。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T21:16:35.920

Fluidbyte 是对的，我试图在错误的元素上应用 0 填充是愚蠢的。添加

```
<style>
#content{
    padding-right:0px;  
}
</style> 
```

在 page.html 上运行良好，覆盖了外部 css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:11:54.117

在内容 div 上应用`style="padding:0px;"`内联（不推荐），或者在加载外部样式表后加载您的样式。应用于`style="padding:0px;"`body 只会影响 body，而不是应用于其中的每个元素。

# playframework - 在功能测试中调用另一个控制器方法的行为很奇怪

> ID：12828328
> 
> 赞同：0
> 
> 时间：2012-10-10T21:06:27.950
> 
> 标签：playframework, functional-testing, playframework-1.x

似乎当控制器的公共静态方法显式调用同一控制器的另一个公共静态方法（使用 Java 调用）时，**Play！**不知道在功能测试中只执行代码或重定向。

如果我有：

```
public class ApplicationTest extends FunctionalTest {
    @Test
    public void testProvesThatFunctionalTestsDoesntCallControllerMethods() {
        Response response = GET("/");

        assertEquals("", getContent(response));
    }

    @Test
    public void testProvesThatCallingItDirectlyWorksAsExpected() throws Exception {
        Response response = GET("/another");

        assertEquals("ok!", getContent(response));

    }

} 
```

和：

```
public class Application extends Controller {
    public static void index() {
        another();
    }

    public static void another() {
        renderText("ok!");
    }
} 
```

但是，如果我在我的网络浏览器中运行**play run**或**play start**并调用“/”然后它返回“ok！”，**FunctionalTest**不应该完全像在生产中运行它还是像在真实服务器中运行它一样工作？它促使我避免进行功能测试或对预运行的 Web 服务器进行大量手动设置和依赖，这并不酷。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:23:08.130

在您的浏览器中，当您调用“/”时，它会返回“ok”，但不会在第一次响应时返回。它首先返回一个重定向 (302)，然后返回一个 200 (ok)。

在你的功能测试中，它是一样的，你必须做类似的事情

```
Response response = GET("/");
assertStatus(302, response);
response = GET(response.headers.get("Location").value())
assertIsOk(response);
assertEquals("ok!", getContent(response)); 
```

# html - 可以设置 iFrame 的 src 图像的宽度吗？

> ID：12828333
> 
> 赞同：1
> 
> 时间：2012-10-10T21:06:40.897
> 
> 标签：html, css, jquery-mobile

我正在尝试在 iFrame 中显示大图像。图像在各种按钮点击时动态加载。虽然这很好用，因为图像很大，当它显示在 iFrame 中时，我需要动态调整它的大小。

有没有办法做到这一点？

谢谢你的帮助。

这就是我正在做的事情。

```
<iframe id="myFrame" style="width:950; height: 600px; border: 0px solid red;" src="myImage1.png"></iframe> 
```

我需要在 myImage.png 上设置一个宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:18:14.067

像下面这样在 iframe 中加载图像以实现调整图像大小，

```
function loadImage(index){
  img.src = images[index];
  var content = "<html><body><img src='"+images[index]+"' width='300' height='200'></body></html>";
  iF.contentWindow.document.open('text/html', 'replace');
  iF.contentWindow.document.write(content);
  iF.contentWindow.document.close();
} 
```

检查我尝试使用 iframe 和 img 的工作[示例。](http://tinkerbin.com/tRPSvN20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:10:01.223

让按钮将 CSS 类应用于图像并使用 CSS 设置图像的尺寸。

# windows - Python 3.2 Multiprocessing.Process 未运行目标函数

> ID：12828338
> 
> 赞同：4
> 
> 时间：2012-10-10T21:06:57.137
> 
> 标签：windows, path, python-3.x, multiprocessing, python-idle

我有一个问题，我无法弄清楚问题是什么。嵌入式代码（3.2 文档中最简单的示例代码，只是为了尝试调试）不会运行目标函数。流程完成，程序导入并运行无误，Python 3.2 已正确安装，目录已添加到 Path 环境变量中。我正在使用 f5 从 IDLE 运行程序，并且所有其他代码都可以正常运行，但是目标函数“f”中的代码（在这种情况下）根本无法运行。正如你所理解的，这太令人沮丧了。此代码不会打印，并且目标函数（以及任何函数）内的每个测试打印都不会执行；它只是被跳过。

```
#!/usr/bin/env python
from multiprocessing import Process

def f(name):
    print('hello', name)

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start() 
```

有什么想法吗？我在 Windows 7 系统上运行 Python 3.2，并且多处理已在我的 Python 2.7 系统上成功运行（尽管我的项目确实需要我在 3.2 中开发）。抱歉这么简单的问题我想一定是一些路径问题，但我只是不确定我可能需要做什么才能完成这项工作并且无法从谷歌找到任何解决方案，因为 Python 肯定会识别包（并且拼写错误时失败）；它只是行为不正确。感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:59:57.117

多处理和 IDLE 不能很好地协同工作。确保它在 IDLE 之外运行，如果是这样，你很好。

我自己不使用 IDE，所以我没有其他可以为您提供的，但令人惊讶的是 simple `print`s 对调试的有用程度。

# ruby-on-rails - 将旧的 sqlite3 db 加载到 Heroku 上的 postgresql

> ID：12828342
> 
> 赞同：0
> 
> 时间：2012-10-10T21:07:19.750
> 
> 标签：ruby-on-rails, sqlite, postgresql

我有一个 sqlite3 数据库，其中包含要加载到 Heroku 应用程序的 postgres 数据库中的数据。

最好的方法是什么？

我打算尝试将记录（它是一个表）导出到一个 yaml 文件，然后将该文件上传到 heroku 并从中初始化新记录，但我遇到了编码问题。除了这些问题，这是一个好方法吗？解决这个问题的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:49:57.153

将数据传输到不同类型的数据库的一个好方法是使用[yaml_db gem](https://github.com/ludicast/yaml_db)。将其添加到 Gemfile 并运行包后，您可以使用以下命令在本地提取数据：

```
rake db:data:dump 
```

这将生成一个 db/data.yml 文件。将其签入 Git，推送到 Heroku，然后运行：

```
heroku run console
rake db:data:load 
```

那应该这样做。

# c# - Ajax.ActionLink 从视图发布整个模型？

> ID：12828347
> 
> 赞同：7
> 
> 时间：2012-10-10T21:07:36.467
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, razor

我有一个对 ViewModel 进行强类型化的视图。是否可以将视图中模型的所有数据传递回控制器操作？像这样的东西？

```
@Ajax.ActionLink("(Export to Excel)", "ExportCsv", "SurveyResponse", new {  
ResultsViewModel = Model }, new AjaxOptions {HttpMethod = "POST"}) 
```

然后从 ResultsViewModel 收集数据作为另一个控制器中的参数

```
public ActionResult ExportCsv(ResultsViewModel resultsviewmodel)
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T06:34:18.963

不，您不能像这样在操作链接中传递整个视图模型。您可以仅传递`id`此模型的 ，然后使用它`id`从您最初检索它的任何位置检索实际模型：

```
@Ajax.ActionLink(
    "(Export to Excel)", 
    "ExportCsv", 
    "SurveyResponse", 
    new { id = Model.Id }, 
    new AjaxOptions { HttpMethod = "POST" }
) 
```

作为替代方案，您可以将模型序列化为 javascript 文字，然后使用 AJAX 请求将其作为 JSON 数据发送：

```
@Html.ActionLink(
    "(Export to Excel)", 
    "ExportCsv", 
    "SurveyResponse", 
    null, 
    new { @class = "exportCsv" }
)
<script type="text/javascript">
    $('.exportCsv').click(function() {
        var model = @Html.Raw(Json.Encode(Model));
        $.ajax({
            url: this.href,
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(model),
            success: function(result) {

            }
        });
        return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-09T20:52:15.300

设法制作了以下作品，

```
@Ajax.ActionLink("(Export to Excel)", "ExportCsv", "SurveyResponse", 
new { Model.F1, Model.F2, Model.OtherFields }, new AjaxOptions {HttpMethod = "POST"}) 
```

控制器

```
[HttpPost]
public ActionResult ExportCsv(ResultsViewModel resultsviewmodel)
{

} 
```

这是一个 http 帖子，但数据不在“表单数据”中，它在请求的 URL 中编码（但不是 http get）。

看起来 MVC 会自动将各个字段转换为单个模型。

URL 有长度限制，大模型可能会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:39:52.587

尝试将模型的 ID 发送到控制器并获取 json 结果：

```
@Ajax.ActionLink("(Export to Excel)", "ExportCsv", "SurveyResponse", new {  
id = Model.Id }, new AjaxOptions {HttpMethod = "POST"}) 
```

在控制器中，您将拥有：

```
[HttpGet]
public ActionResult ExportCsv(int id)
{
//Here get the whole model from your repository for example:
var model=GetModelByModelId(id);
//And do everything you want with your model.
return Json(model,JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T16:50:02.017

我做了以下。这有点违背了`HTTP POST`我的观点。但是，嘿，它完成了工作。

我的阿贾克斯：

```
@Ajax.ActionLink("Delete", "RemoveSubjectFromCategory","Categories", new { SubjectId = item.Id, CategoryId = Model.Id }, new AjaxOptions {HttpMethod = "GET"}) 
```

我的控制器：

```
[HttpGet]
public async Task<ActionResult> RemoveSubjectFromCategory(RemoveSubjectFromCategoryModel model)
{} 
```

我的绑定模型：

```
public class RemoveSubjectFromCategoryModel
{
    [Required]
    public int SubjectId { get; set; }

    [Required]
    public int CategoryId { get; set; }
} 
```

# ios - 检查 NSString 的长度

> ID：12828349
> 
> 赞同：1
> 
> 时间：2012-10-10T21:07:38.760
> 
> 标签：ios, nsstring

我想我在检查字符串长度时遇到错误。自从我为新的 iOS 6 更新了我的 Xcode 后，这只是最近的事情。

这就是我检查我的 NSStrings 长度的方式

```
if ([manuIdString length] != 0) { 
```

然后当线程遇到这个时.. manuIdString 中肯定有一个值，但我得到了这个错误。

```
2012-10-11 10:01:57.715 paranioa[8619:907] -[__NSCFNumber length]: unrecognized selector sent to instance 0x1f83ed60
2012-10-11 10:01:57.717 paranioa[8619:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber length]: unrecognized selector sent to instance 0x1f83ed60'
*** First throw call stack:
(0x36b5b2a3 0x34e6b97f 0x36b5ee07 0x36b5d531 0x36ab4f68 0x25949 0x37f170ad 0x37f17135 0x37f170ad 0x37f1705f 0x37f1703d 0x37f168f3 0x37f16de9 0x37e3f5f9 0x37e2c809 0x37e2c123 0x36fdf5a3 0x36fdf1d3 0x36b30173 0x36b30117 0x36b2ef99 0x36aa1ebd 0x36aa1d49 0x36fde2eb 0x37e80301 0x1fb41 0x3b58cb20)
libc++abi.dylib: terminate called throwing an exception 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:11:33.703

`manuIdString`不是 NSString。你不小心给`NSNumber`它分配了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T07:19:04.627

是的，我也遇到过这种从 json 获取值并在 NSString 中分配的问题

绝对 manuIdString 不是 NSString。

# wpf - wpf上传文件到服务器

> ID：12828350
> 
> 赞同：0
> 
> 时间：2012-10-10T21:07:44.180
> 
> 标签：wpf, wcf, file

我正在开发一个使用 wcf 与 db 通信的 wpf 应用程序。一项要求是上传文件，并将它们编入索引以供以后检索。在不重新发明轮子的情况下做到这一点的最佳方法是什么。我害怕使用 wcf 来担心超时。解决方案需要在后台线程中，允许我跟踪进度、重试或在失败时继续，并进行加密。我找不到像在 silverlight / asp.net 中那样的文件上传控件

还是我应该集成到 dms 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:32:35.677

您可以将 Asp.Net WebApi 用于此类内容。使用不同的工具并没有什么不好。您可以在任何应用程序中托管它，这将是简单的 http 上传。

服务器端代码示例：[使用 ASP.NET Web API 和 Azure Blob 存储上传大文件](http://code.msdn.microsoft.com/windowsazure/Uploading-large-files-386ec0af/sourcecode?fileId=60619&pathId=765329731)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:19:04.807

MS Sql Server 的[FILESTREAM](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)非常适合存储文件，因为文件由 SQL 管理（它们的存储位置、文件名（保证唯一性）等），但在幕后，它们存储在文件系统中，而不是实际存储在数据库（膨胀你的数据库）。您的代码将它们视为 BLOB，但它们实际上是文件。

WCF 可以处理任何通用[大数据流的传输](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。您的操作合同（Web 方法的 WCF 名称）有一些限制才能使其正常工作。虽然，这种方法没有报告传输进度的好方法（我知道）。如果这不能按您希望的方式工作，您可以随时求助于这里人们提交的其他解决方案或 FTP。

另请查看 WCF 的传输安全性以进行加密。

您必须在自己的后台线程中管理它。有关在后台工作的线程，请参阅 BackgroundWorker，可以向 UI 线程报告进度（非常重要），并且当线程完成时，它提供了再次向 UI 线程报告的方法。

无论您选择哪种方法，您都必须处理超时，因此如果是 WCF、FTP、WebClient.Upload 等，您仍然需要处理相同的问题，但方式略有不同。至少对于 WCF，超时时间在您的应用程序配置文件中配置，因此您可以轻松调整时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:55:19.020

试试`System.Net.WebClient.Upload`。

# regex - 模式的 Perl 搜索字符串：*@enron.com

> ID：12828353
> 
> 赞同：1
> 
> 时间：2012-10-10T21:07:53.680
> 
> 标签：regex, perl, email

我正在搜索所有以@enron.com 结尾的有效电子邮件地址的字符串。

我的任务是以下行：

```
my $enronAddress =~/^(.+?)@\@enron\.com/i; 
```

这不是做任何任务，所以我想知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:17:03.467

您正在根据正则表达式检查未初始化的变量。这可能不是你想要的。

如果您有一个电子邮件地址`$address`，您会执行以下操作：

```
my $address = 'example@enron.com';
if ($address =~ /^(.+)\@enron\.com$/) {
  my $to = $1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:17:24.770

这不是赋值，而是将未初始化的变量与正则表达式进行比较。没有更多上下文，很难修复您的代码，但首先，将其放在脚本的顶部：

```
use strict;
use warnings; 
```

从现在开始，在您编写的每个新脚本中都这样做。

然后也许像

```
my $text = <>;
my $addr = $text if $text =~ /\@enron\.com$/; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T21:19:47.383

您是在寻找字符串中的所有有效地址，还是检查完整的字符串是否为有效地址？我不明白您所说的“这不是进行任何分配”是什么意思，因为您所写的只是正则表达式模式匹配

首先，`@`您的模式中有两个标志，这显然是错误的

很大程度上取决于您认为有效的电子邮件地址，但首先这将检查内容是否`$enronAddress`是有效地址

```
if ( $enronAddress =~ /^[^@\s]+\@enron\.com$/i ) { ... } 
```

这将打印出现在`$enronAddress`

```
print "$_\n" for $enronAddress =~ /[^@\s]+\@enron\.com/gi; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T21:15:46.113

你为什么不先尝试匹配一个简单的“字符串结尾”正则表达式呢？使用 Perl 的调试器：

```
DB<3> x 'foo@enron.com' =~ /\@enron\.com$/
0  1

DB<4> x 'foo@enrn.com' =~ /\@enron\.com$/
empty array 
```

这些表明您正在寻找正确的模式。然后为其添加捕获：

```
DB<5> x ($user) = ('foo@enron.com' =~ /(.+)\@enron.com$/)
0  'foo'

DB<6> x $user
0  'foo' 
```

在代码中它看起来像：

```
#!/usr/bin/perl

my ($user) = ('foo@enron.com' =~ /(.+)\@enron\.com$/);
print "$user\n"; 
```

# html - 如何填充图像以在 HTML 中创建横幅效果

> ID：12828354
> 
> 赞同：0
> 
> 时间：2012-10-10T21:07:56.747
> 
> 标签：html

我有一个带有彩色背景的小图像，我想将它放在 HTML 页面的顶部右侧，并在左侧填充相同背景颜色的带，使其看起来像横幅。然后我希望页面的其余部分（文本）在横幅下方继续，而不是环绕图像。我更喜欢使用内联样式而不是 CSS，但两者都可以。

如果我可以在 HTML 语法上挥动魔杖，我会得到类似的东西：

```
<body>
<image-as-banner src='mylogo.jpg' align='right' background-color='black'>
<p>And my normal text starts here underneath the banner</p>
</body> 
```

也就是说...如果我可以插入一行 HTML 来实现这一点，我想知道它是什么。它需要指定图像、它想要向右对齐的事实、横幅样式以及填充剩余空间的颜色是黑色。当然，`image-as-banner`HTML 中没有标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:56:25.190

对于您上面粘贴的示例，这样的事情可能会奏效

```
<html>
<head></head>
<body>

<style type="text/css">
.img-banner {
    background-color: black;
    align: right;
    /* etc etc etc */
}
</style>

<div class="img-banner">
    <img src='mylogo.jpg' alt=''>
</div>

<p>And my normal text starts here underneath the banner</p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:15:32.120

我建议使用具有背景图像和颜色属性的 div 容器，如下所示：

CSS：

```
<style type="text/css">
#banner{
 background-image:url(images/banner.jpg);
 background-color: #$$$$$$;
 background-position: right;
 background-repeat: no-repeat;
 width: $px;
 height: $px;
}
</style> 
```

HTML：

```
<div id="banner">
&nbsp;
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:17:13.623

像这样的东西..？

```
<html>
<style type="text/css">
#container{width:100%;margin:0 auto;height:100%;background-color:grey;}
#banner{width:100%;height:100px;background-color:red;}
img{float:right;height:100px;}
#text{}
</style>
<body>
    <div id='container'>
    <div id='banner'><img src='http://darmano.typepad.com/logic_emotion/images/red.jpg'>
    </div>
    <div id='text'>
    <h3>Put your text here..</h3>
    </div>
    </div>
</body>
<html> 
```

# c++ - C++ 通过引用多次传递指针，然后对其进行修改。我怎样才能让它工作？

> ID：12828356
> 
> 赞同：0
> 
> 时间：2012-10-10T21:08:02.807
> 
> 标签：c++, class, pointers, pass-by-reference

以下是我面临的问题的一个小规模示例。在下面的示例中，我使用 int 指针，但在我自己的代码中，我实际上使用的是指向另一个类的指针。

我确实需要/希望能够将多个指针传递给同一个方法，并且我真的不想为每个指针编写一个特定的方法。当我运行代码时，当然，我没有得到预期的结果。

我想我已经缩小了问题的范围，但不知道如何解决它。由于 C++ 中的所有内容都是按值传递的，因此我传递的指针需要通过引用传递。我确实尝试在以下方法中更改我的方法以通过引用调用：

```
int** getIntPointer() {return &p1;} 
```

`void initializeP1(int **&ip,int n)`和`void initializeP1(int **ip,int n)`

但似乎没有任何效果。

有谁知道如何解决这个问题？

谢谢

```
#include <iostream>

using namespace std;

class Test {
  private:
    int *p1;   
    int *p2;
    int sizeP1;
    int sizeP2;   
  public:
    int** getIntPointer() {return &p1;}
    void initializeP1(int **&ip,int n){
        sizeP1=n; 
        *ip=new int[n];

        for(int i=0;i<n;i++)
            *ip[i]=i;         
    }  
    void printP1() {
        for(int i=0;i<sizeP1;i++)
            cout<<p1[i]<<" "; 
    }
};

int main() {
    Test t;
    int** p = t.getIntPointer();
    t.initializeP1(*&p,10);
    t.printP1(); 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:25:30.370

这一行是错误的：

```
*ip[i]=i; 
```

运算符的`[]`优先级高于`*`运算符，因此该行等效于此：

```
*(ip[i])=i; 
```

您需要将其更改为：

```
(*ip)[i]=i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:44:46.660

另外，你为什么调用函数`initializeP1`但使用`**ip`？做它喜欢

```
 void initializeP1(int n){
    sizeP1=n;
    p1=new int[sizeP1];
    for(int i=0;i<sizeP1;i++)
         p1[i]=i;
 } 
```

本来会以这种方式排在第一位（更不用说`*`'s 等等 :)

# php - 是否可以找出表mysql中匹配的字段？

> ID：12828357
> 
> 赞同：0
> 
> 时间：2012-10-10T21:08:17.433
> 
> 标签：php, mysql

我正在尝试在表中查找重复项。需要检查重复的字段是 PHP 的序列化数组。这是我的查询：

```
SELECT Blob, BID, ID
FROM  `Statuses`
WHERE ID <> :id AND (Blob LIKE :blob1 OR Blob LIKE :blob2) 
```

现在我想从此查询中选择所有那些不是我试图匹配的状态的状态，并且它们的序列化数组包含：blob1 或序列化数组包含：blob2。

这很有效，它返回的重复项很好，但我需要知道它匹配的是哪一个，是匹配 blob1 还是匹配 blob2。是否可以在不使用 PHP 的情况下直接从 Query 执行此操作？

换句话说，是否有可能找出匹配的字段以找到重复项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:10:59.183

这应该有效：

```
SELECT Blob, 
       BID, 
       ID,
       case 
          when blob like :blob1 then 0 
          when blob like :blob2 then 1
          else -1 
       end as matching_blob
FROM  Statuses
WHERE ID <> :id 
AND (Blob LIKE :blob1 OR Blob LIKE :blob2) 
```

虽然这意味着对 blob 进行了两次比较（一次用于 CASE，一次用于 WHERE 子句）。我不知道这是多少开销。

这是一个 SQLFiddle 示例（尽管不使用 blob 或变量）：[http ://sqlfiddle.com/#!2/3fc41/6](http://sqlfiddle.com/#!2/3fc41/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:11:56.327

```
SELECT Blob, BID, ID, IF(Blob LIKE :blob1, 'Matched BLOB1', ''), IF(Blob LIKE :blob2, 'Matched BLOB2', '')
FROM  `Statuses`
WHERE ID <> :id AND (Blob LIKE :blob1 OR Blob LIKE :blob2); 
```

不要担心性能，优化器应该处理这个问题。（并且在 select 子句中，您在小结果集上执行此操作）

# php - 获取点击元素的数据属性？

> ID：12828358
> 
> 赞同：1
> 
> 时间：2012-10-10T21:08:20.093
> 
> 标签：php, javascript, jquery

我有一个链接，单击时会打开一个模式，但是该元素还具有我需要获取的 data-id="#id here" 属性，以便我可以将其传递给我的 php 脚本进行处理。我怎样才能做到这一点？

我的 JS 代码：

```
$(document).ready(function() {
$('#edit_general').click(editModal);

});

function editModal(event)
{
var modal = $('#editModal');
modal.modal({
    show: true
});
} 
```

我的html：

```
<li><a id="edit_general" href="#editModal" data-uid="<?php echo $u->id; ?>">Edit General</a></li> 
```

我尝试使用 this 关键字，但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:10:40.370

试试这个：**演示** [http://jsfiddle.net/szS2J/1/](http://jsfiddle.net/szS2J/1/) **或** [http://jsfiddle.net/ug7ze/](http://jsfiddle.net/ug7ze/)

```
$(this).data('uid') 
```

希望它适合原因`:)`

像这样：

```
$('#edit_general').click(editModal);
      $(this).data('uid') 
```

**满的**

```
$(document).ready(function() {
    $('#edit_general').click(editModal);

});

function editModal(event) {
    alert($(this).data('uid'));
    var modal = $('#editModal');
    modal.modal({
        show: true
    });
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:10:58.353

您可以使用 attr 方法获取值：`$(this).attr('data-uid')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:13:02.777

像这样存储在data_id中。

```
 $(document).ready(function() {
      $('#edit_general').click(function() {
         var data_id = $(this).data('uid');
         var modal = $('#editModal');
            modal.modal({
            show: true
         });
      });
   }); 
```

# java - 将颜色对象转换为字符串

> ID：12828359
> 
> 赞同：3
> 
> 时间：2012-10-10T21:08:26.887
> 
> 标签：java, swing, colors

> **可能重复：**
> [如何在 Java 中打印颜色的字符串表示](https://stackoverflow.com/questions/9223903/how-to-print-string-representation-of-color-in-java)

我有一个称为`getColor()`返回颜色的方法（如`Color.BLACK`）。有没有办法转换`getColor()`成它的名字的字符串？

```
String test = getColor().toString(); 
```

如果`getColor()`返回`Color.BLACK`，则

```
String test = Color.BLACK.toString();
System.out.println(test); 
```

**输出**

```
java.awt.Color[r=0,g=0,b=0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:16:22.593

`toString()`永远无法重现用于存储该实例的变量的原始名称（因为可能有多个包含该实例）。

一种方法是手动比较`Color`实例：

```
Color theColor = getColor()
String colorName = null;
if (Color.BLACK.equals(theColor)) 
{
  colorName = "BLACK";
} 
else if (Color.WHITE.equals(theColor)) 
{
  colorName = "WHITE";
}
...
System.out.println(colorName); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:18:36.050

根据颜色代码创建颜色名称的自定义映射。检索颜色代码后，使用自定义地图获取字符串。

```
 Map<Color, String> colorMap = new HashMap<Color, String>();
       colorMap.put(Color.BLACK, "Black"),   
       colorMap.put(Color.RED, "Red"),  
       ....... 
```

一旦你有了你的颜色，使用下面来获取颜色名称：

```
 Color myColor = getColor();
      String colorName = colorMap.get(myColor); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:16:20.757

不。

`Color.BLACK`是大范围的颜色之一，并映射到 0、0、0 的 RGB 值。

如果你有一个 0、0、1 的 RGB - 几乎是黑色，只有一点蓝色 - 那会是什么颜色？偏绿怎么办？还是黄色加一点额外的红色？

这就是为什么无法再次将原始颜色转换回字符串的原因。因为有更多的颜色由不同的 RGB 值表示，而不仅仅是由字符串表示的颜色。

如果您不想走评论中提到的 NamedColor 枚举路线，一个简单的解决方案可能是使用反射来遍历类的静态`Color`字段`Color`，并将每个字段名称添加到哈希图中，并将其关联的颜色作为键, 删除其中一个大写或小写重复项，因为它两者都有。然后你可以看看你的颜色是否在那里。

# php - 访问这个 PHP 数组的信息？

> ID：12828364
> 
> 赞同：0
> 
> 时间：2012-10-10T21:08:49.963
> 
> 标签：php, arrays

我已经获取了变量的 print_r 并希望从中访问一些信息，这是 print_r 的预览，

```
WC_Product_Variation Object
(
    [variation_data] => Array
        (
            [attribute_pa_colour] => blue
            [attribute_pa_size] => large
        )
    [sku] => BLUEANDLARGE345
    [stock] => 345
) 
```

因此，如果我使用以下代码：

```
<td><?php echo $product->sku; ?></td>
<td><?php echo $product->stock; ?></td> 
```

这将回显：

蓝大
345 345

我怎样才能回显`variation_data`数组？

我尝试了以下方法，输出为“数组”：

```
<td><?php echo $product->variation_data; ?></td> 
```

**编辑：**

@pp19dd

所以我尝试了以下方法：

```
<td><?php echo implode(", ", $product->variation_data ); ?></td> 
```

现在输出是：

```
blue,         Test Product    Test Product    123
, pink        Test Product    Test Product    456
yellow,       Test Product    Test Product    789
blue, large   Test Product    Test Product    345 
```

该代码似乎在前后放置了一个逗号，这在示例中是不需要的。

蓝色、粉色、黄色等是`[variation_data]`阵列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:11:41.600

如果要回显数组的结构，可以再次使用 print_r：

```
print_r($product->variantion_data); 
```

如果要回显数组的各个元素：

```
foreach($product->variantion_data as $value)
    echo $value; 
```

或者，如果您想按键访问元素：

```
echo $product->variation_data['attribute_pa_size']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:10:34.330

`<td><?php echo implode(", ", $product->variation_data ); ?></td>`

编辑：如果您需要粒度位，您可以直接定位它们：

`<td><?php echo $product->variation_data['attribute_pa_colour']; ?></td>`

编辑＃2：由于数据可能为空，您需要将其过滤掉。一种快速而肮脏的方法：

`<?php echo implode(", ", array_diff( $product->variation_data, array("") ) ) ?>`

技巧：**array_diff()**应该显示数组之间的差异。因此，如果一个数组只是一个空字符串，则此方法将为您提供所有非空的内容。

如果空数据中有随机空格，则不能使用**implode()**。

# macos - 无法通过 Jenkins 运行自动化脚本 - 获取 kCGErrorFailure

> ID：12828367
> 
> 赞同：0
> 
> 时间：2012-10-10T21:09:01.303
> 
> 标签：macos, selenium, jenkins

我在本地安装了 Jenkins 并在 localhost 上运行。当我尝试通过 Jenkins 运行脚本时，出现以下错误：

[testng] Wed Oct 10 15:54:52 Automation.local java[60266] : kCGErrorFailure: 设置断点@CGErrorBreakpoint() 以在记录错误时捕获错误。

我在这里迷路了，所以任何帮助都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:18:11.377

目前尚不清楚您的脚本是什么，但我认为它试图绘制到屏幕上？也许打开一扇窗户？Jenkins 很可能在守护进程上下文中运行。守护进程上下文不能直接与窗口服务器对话以打开窗口。您需要更具体地了解您的脚本的作用，以便讨论在这种情况下如何解决它。

* * *

如前所述，您正试图在根守护程序（即 LaunchDaemon）上下文中打开浏览器窗口。你不能这样做。您需要将 Jenkins 作为普通程序或作为 LaunchAgent 运行（即在某些用户登录后）。有关有用的包装器，请参阅[https://github.com/stisti/jenkins-app](https://github.com/stisti/jenkins-app)。有关将其设置为代理而不是守护进程的讨论，请参阅[这些设置文档。](http://goodliffe.blogspot.com/2011/09/how-to-set-up-jenkins-ci-on-mac.html)

# sql - 用数量求平均值

> ID：12828368
> 
> 赞同：2
> 
> 时间：2012-10-10T21:09:01.123
> 
> 标签：sql, math, sum, average

我有一个问题很容易计算一些简单的平均值。我的桌子：

```
id / user / action     / data
1  / a    / unit_price / 40
2  / a    / quantity   / 1
3  / b    / unit_price / 70
4  / b    / quantity   / 2 
```

Unit_price 是用户的价格，数量是数量。所以我应该得到： (40 + 70 + 70) / 3 = 60

如果我做一个

`(AVG(action) WHERE action = unit_price)`

我得到：

`(70+40)/2 = 55`

如果我做一个

`(SUM(action) WHERE action = unit_price) / (SUM(action) WHERE action = quantity)`

我得到：

`110 / 3 = 36.6`

我发现的最简单的方法是不要放 unit_price 而是全局价格，然后在 PHP 代码中进行划分以获得 unit_price，但我希望 SQL 可以为我做点什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:28:21.293

```
select coalesce(sum(quantity * unit_price) /sum(quantity), 0) from
(select 
   sum(case when action='unit_price' then data else 0 end) as unit_price,
   sum(case when action='quantity' then data else 0 end) as quantity 
 from test
group by user) as a 
```

[SqlFiddle](http://sqlfiddle.com/#!2/edf0f/13)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:24:00.200

您可以使用类似这样的东西，它基本上将数据转换为更可用的格式，然后获取您需要的值：

```
select avg(unit_price) AvgUnitPrice, 
  sum(unit_price*quantity)/sum(quantity) AvgPrice
from
(
  select user,
    max(case when action = 'unit_price' then data end) unit_price,
    max(case when action = 'quantity' then data end) quantity
  from table1
  group by user
) x; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/89852/23)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T21:22:01.277

我会将表连接到自身，以便将两条记录放在一起

```
SELECT
    SUM(unit_price * quantity) / SUM(quantity) AS average_unit_price
FROM
    (SELECT
        U.data AS unit_price, Q.data AS quantity
    FROM
        theTable U
        INNER JOIN theTable Q
            ON U.user = Q.user
    WHERE
        U.action = 'unit_price' AND
        Q.action = 'quantity') 
```

如果每个用户有两个以上的记录，并且这两个记录的 ID 都是连续的，那么您必须将 WHERE 子句更改为

```
 WHERE
        U.action = 'unit_price' AND
        Q.action = 'quantity' AND
        U.id + 1 = Q.id 
```

* * *

笔记：

如果你计算`AVG(unit_price * quantity)`，你会得到每个用户的平均总和。

> (1*40 + 2*70) / 2 = 90

如果你计算`SUM(unit_price * quantity) / SUM(quantity)`，你会得到平均单价。

> (1*40 + 2*70) / 3 = 60

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T21:17:27.877

好的，显然您的表格设计不是最佳的，您应该将`unit_price`和`quantity`作为单独的列。但是，使用你所拥有的，试试这个：

```
SELECT SUM(A.data*B.data)/SUM(B.data) Calculation
FROM (  SELECT user, data
        FROM YourTable
        WHERE action = 'unit_price') AS A
INNER JOIN (SELECT user, data
            FROM YourTable
            WHERE action = 'quantity') AS B
ON A.user = B.user 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:16:55.263

像这样的东西应该有效；语法可能并不完美，因为我没有尝试过，但至少你明白了主要思想。

```
SELECT sumUnitPrice.sum / sumQuantity.sum
FROM
(
  (SELECT SUM(data) as sum
  FROM WhateverTheHellYourTableIsNamed
  WHERE action = 'unit_price') sumUnitPrice

  (SELECT SUM(data) as sum
  FROM WhateverTheHellYourTableIsNamed
  WHERE action = 'quantity') sumQuantity
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T21:13:16.927

你的桌子设计看起来不太好。

改为制作2张桌子：

```
ITEM
   ItemId int not null PK, 
   Name varchar(200) not null, 
   UnitPrice decimal (10,2) not null

SALES
   SalesId int not null PK, 
   ItemId int not null FK, 
   Quantity decimal(10,2) 
```

PK - 主键，FK - 外键

平均：

```
select 
  I.Name, avg(I.UnitPrice * S.Quantity) as avgSales
from 
  Sales S 
  join Items I on I.ItemId = S.ItemId
group by 
  I.Name 
```

# python - 如何杀死/重新加载/自动重新加载具有 SSE 等持久连接的 django 服务器？

> ID：12828374
> 
> 赞同：3
> 
> 时间：2012-10-10T21:09:21.570
> 
> 标签：python, django, persistent-connection

`django-admin.py runserver`在开发中运行。我有一个连接到我的 sse 端点的开放网页。

似乎使用`django-sse`中断来服务器自动重新加载功能，cf。这个[问题](https://github.com/niwibe/django-sse/issues/8)。

更糟糕的是，如果我手动重新启动服务器 ( `Ctr+C`& `django-admin.py runserver`)，它会因“端口已在使用错误”而失败，我`ps` `grep runserver` `kill whatever_id`首先需要一个真正的 PITA。

所以：

*   使用持久连接如何破坏我的开发工作流程？
*   是否有不涉及修补 django 的简单解决方法？

在生产中，我使用带有工头的 Procfile 来启动 gunicorn gevent 工作人员。这里手动重启很好（打开的连接关闭），但没有自动重载功能，也没有在终端中打印任何日志。

# facebook - Facebook iOS 应用有时在授权后不会切换回我的应用

> ID：12828376
> 
> 赞同：1
> 
> 时间：2012-10-10T21:09:29.570
> 
> 标签：facebook, authorization, unity3d, switching

我正在创建一个具有 facebook 集成的应用程序，以将图像发布到用户的墙上。

我正在使用名为“社交网络”的 prime31 统一插件。

这是我的问题：在重新运行时（之前在 Facebook 上没有授权，并且在设备上卸载了应用程序以确保没有缓存数据），我将使用“电子邮件”作为唯一权限登录到 facebook。然后设备从我的应用程序切换到 facebook 应用程序以请求用户许可。我点击了“登录”按钮，然后大部分时间我只是最终切换到我在 facebook 中的新闻提要，而没有切换回我的应用程序。有时在切换到 facebook 应用程序而不是权限屏幕后，我最终会出现在一个空白页面上，其中“取消”是顶部唯一的按钮，而按“取消”则无济于事（我被困在那个空白页面上）。有时我会授权并正确切换回我的应用程序。

编辑：这感觉毫无意义，但我发现了问题的根源，所以我想我会分享，以防其他人遇到这个问题。

我的问题是，当我从 Unity 构建时，我通常会点击 cmd-B（或构建/附加）。这将覆盖 info.plist 文件，删除 prime31 插件为应用程序切换所做的 URL 注入。

进入构建设置菜单，点击“构建并运行”，然后按“替换”将运行将 URL 插入 info.plist 的代码。

# linux - 在 Linux 文件权限上使用布尔 AND

> ID：12828378
> 
> 赞同：0
> 
> 时间：2012-10-10T21:09:29.327
> 
> 标签：linux, permissions, boolean

我想检查 Linux 上的文件是否具有 555 权限，但该文件具有 755 权限。所以我在我的程序中做了一个布尔 AND：

```
if ((perm_of_file && perm_required) == 555) 
```

IE`(755 && 555 == 555)`

这应该评估为真吗？我知道这从编程的角度来看并不直观，真正的背景问题是： **755 是否被视为 555 权限组的“成员”？**

我尝试了什么：我`find -perm 555`在 Linux 上使用它并没有列出那些具有 755 权限的文件，所以我猜这个问题的答案是否定的？

如果有人可以帮助我回答或改写这个问题，那将非常有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:20:55.777

答案是不。

因为在 755 中文件的所有者有写权限，而在 555 中所有者没有写权限。（尽管所有者可以更改它，`chmod`因为他是所有者！）。

如我所见，您想检查一个权限是否*包含*在另一个权限中。如果您以某种方式拥有文件的权限，则只需检查：

`if (perm_of_file >= perm_required)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:02:48.813

*   ((file_mode && some_bits) == some_bits) # 是*逻辑*的，你需要按位和
*   ((file_mode & some_bits) == some_bits) # 是*按位*的并且
*   文件模式（仍然）以*八进制*表示，在大多数类似 C 的语言中，您需要添加前导零来表示八进制模式
*   命令行程序（例如 chmod 或 find）不需要前导零，它们希望数字模式字符串为八进制
*   寻找 。*-mode* xxx # 查找模式为 xxx 的文件
*   寻找 。-mode -xxx # 查找*至少*设置了模式位 xxx 的文件

# nginx - 定位路线不匹配

> ID：12828382
> 
> 赞同：0
> 
> 时间：2012-10-10T21:09:52.787
> 
> 标签：nginx

我有一个只是由于某种原因没有触发的位置。我已经尝试了各种不同顺序的路线，但它仍然不起作用。当用户出现并请求 /_hostmanager/ 时，它应该触发，但它会从路由中获取 index.php 页面。

服务器配置文件为：

```
server {
    index index.php index.html;
    root /var/www/html;
    server_name _;
    listen 80;

    # Logging
    error_log /var/log/httpd/elasticbeanstalk-error_log;

    # Route standard requests
    location / {
        try_files $uri $uri/ /index.php;
    }

    # Proxy Hostmanager
    location /_hostmanager/ {
        proxy_pass http://127.0.0.1:8999/;
    }

    # Include PHP
    location ~ \.php {

        # CGI Configuration
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
        fastcgi_index index.php;

        # Zero-day exploit defense
        try_files $uri $uri/ /index.php =404;

        # Use socket for connection
        fastcgi_pass   unix:/tmp/php5-fpm.sock;
    }

    # Cache control
    location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
        log_not_found off;
        expires 360d;
    }

    # Disable hidden files
    location ~ /\. {
        deny all;
    }
} 
```

谁能发现我的（可能是愚蠢的！）错误是什么？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:11:31.360

没关系，我解决了！由于某种原因，在 nginx 上使用 reload 命令不起作用。停止并开始，瞧！

# javascript - 'this' 关键字并不总是指定义方法的对象，而是可以根据特定上下文进行更改。如何？

> ID：12828383
> 
> 赞同：4
> 
> 时间：2012-10-10T21:09:51.043
> 
> 标签：javascript, this

我正在阅读这篇文章[http://dev.opera.com/articles/view/objects-in-javascript/](http://dev.opera.com/articles/view/objects-in-javascript/) 在那里我读到“'this'关键字并不总是指定义方法的对象，但是而是可以根据具体情况而改变。” 我找不到任何示例，其中“this”不引用定义方法上的对象....如果可能，请给我一个示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:15:49.437

一个你可能会遇到但没想到会出现这种结果的例子：

```
var obj = {
    testFunc : function(){
        alert("testFunc: " + this);
    }
}

obj.testFunc();  // this is the object

setTimeout(obj.testFunc, 1000);  // this is window 
```

[http://jsfiddle.net/t7ycd/](http://jsfiddle.net/t7ycd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:12:19.523

有很多方法可以改变上下文。[jsfiddle](http://jsfiddle.net/wAcYD/)

使用绑定：（旧 IE 浏览器不支持（IE < 9））

```
 var obj = {}; 
    function fun1(){};
    obj2 = {};
    obj2.fun1 =  fun1.bind(obj);
    obj2.fun1(); // context inside fun1 would be obj. 
```

使用应用或调用。

```
var obj = {}; 
        function fun1(){};
        obj2 = {};
        obj2.fun1 =  function(){
            fun1.apply(obj, arguments);
            //or fun1.call(obj, ar1, arg2,...);
          };
        obj2.fun1(); // context inside fun1 would be obj. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:13:19.530

这是*一种*方法

```
var a = {};
a.foo = function(){ console.log(this); }
a.foo(); // object a
a.foo.call(window); // window object 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:12:06.447

如果您从 A 类调用 B 类中的方法，“this”将引用调用该方法的类 - A，而不是它所在的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:13:10.193

这是直接取自 Mozilla 文档的示例

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

```
var o = {prop: 37};

function independent() {
  return this.prop;
}

o.f = independent;

console.log(o.f()); // logs 37 
```

所以这个函数`independent`是在全局上下文中定义的，然后附加到一个对象上。当在该对象上调用它时，上下文成为调用函数的对象，而不是定义函数的对象。

`call`您可以使用 javascript和`bind`方法以及使用匿名函数来获得类似的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T21:13:56.503

像这样

```
var MyObject = function()
{
 this.initialize();
}

MyObject.prototype.SomeMethod = function()
{
 //common fix is to use
 //var self = this;
 (function(){
    //this has lost scope
    //self will retain the this scope that was desired
 })();
} 
```

# javascript - 带有元素数组的node.js玉+快递表

> ID：12828384
> 
> 赞同：1
> 
> 时间：2012-10-10T21:10:00.773
> 
> 标签：javascript, node.js, express, pug

我想知道使用 .jade 调用文件时是否需要 .jade `res.render('login', { locals: { title: 'Hello - Please Login To Your Account' }});`。假设 login.jade 存在。我还想知道是否可以用它创建一个 html5。我是否必须像 res.render('login.html') 那样调用它？所以在安装 html 模块后，我在登录页面中得到了以下信息：

```
TypeError: Object #<Object> has no method 'compile'
    at Function.compile (/var/www/node-login/node_modules/express/lib/view.js:68:33)
    at ServerResponse._render (/var/www/node-login/node_modules/express/lib/view.js:417:18)
    at ServerResponse.render (/var/www/node-login/node_modules/express/lib/view.js:318:17)
    at /var/www/node-login/app/server/router.js:49:8
    at callbacks (/var/www/node-login/node_modules/express/lib/router/index.js:272:11)
    at param (/var/www/node-login/node_modules/express/lib/router/index.js:246:11)
    at pass (/var/www/node-login/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/var/www/node-login/node_modules/express/lib/router/index.js:280:5)
    at Object.handle (/var/www/node-login/node_modules/express/lib/router/index.js:45:10)
    at next (/var/www/node-login/node_modules/express/node_modules/connect/lib/http.js:204:15) 
```

# java - 在 RHS 的 Spring XML 中引用属性的属性？

> ID：12828387
> 
> 赞同：1
> 
> 时间：2012-10-10T21:10:03.447
> 
> 标签：java, xml, spring, javabeans, applicationcontext

Spring XML 中有复合属性名称，但我找不到复合属性值。

假设我有`Person`以下原型的吸气剂：

```
class Person {
   Person getFather();
   void setFather(Person value);
   String getAge();
   void setAge(String value);
   ...
} 
```

`Company`原型如下：

```
class Company {
   Person getOwner();
   void setOwner(Person value);
   ...
} 
```

我可以将这些与类似的东西联系起来吗

```
<bean id="Bob" class="Person"/>

<bean id="Barnyard" class="Company">
   <property name="owner" ref="Bob.father"/>
</bean> 
```

上面说“没有带有`Bob.father`id的bean”不起作用。

以下也不起作用

```
<bean id="Barnyard" class="Company">
   <property name="owner" value="Bob.father"/>
</bean> 
```

说不能转换`String`为`Person`.

如何实现？

**更新**

假设我想设置公司所有者的年龄。显然我应该这样写：

```
<bean id="Barnyard" class="Company">
   <property name="owner" value="#{Bob.father}"/>
   <property name="owner.age" value="38"/>
</bean> 
```

当我可以在左边使用属性的属性但不能在右边做同样的事情时，这不是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:28:33.620

Spring EL 也可以在这里工作，甚至比您[之前](https://stackoverflow.com/questions/12823332/is-it-possible-to-access-string-indexed-getter-with-spring-xml)的问题更简洁-

```
<bean id="Barnyard" class="Company">
   <property name="owner" value="#{Bob.father}"/>
</bean> 
```

# java - JOptionPane 上的 ActionListener

> ID：12828389
> 
> 赞同：4
> 
> 时间：2012-10-10T21:10:14.257
> 
> 标签：java, swing, jdialog, joptionpane

我正在关注有关如何创建自定义对话框的 Oracle 教程：http: [//docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

我有两个按钮：保存对象和删除对象，单击它们应该执行一段代码。不幸的是，我似乎无法将任何 ActionListener 添加到 JOptionPane 按钮，所以当它们被点击时，什么也没有发生。

谁能帮我告诉我该怎么做？到目前为止，这是我为对话框设置的类：

```
class InputDialogBox extends JDialog implements ActionListener, PropertyChangeListener {
    private String typedText = null;
    private JTextField textField;

    private JOptionPane optionPane;

    private String btnString1 = "Save Object";
    private String btnString2 = "Delete Object";

    /**
     * Returns null if the typed string was invalid;
     * otherwise, returns the string as the user entered it.
     */
    public String getValidatedText() {
        return typedText;
    }

    /** Creates the reusable dialog. */
    public InputDialogBox(Frame aFrame, int x, int y) {
        super(aFrame, true);

        setTitle("New Object");

        textField = new JTextField(10);

        //Create an array of the text and components to be displayed.
        String msgString1 = "Object label:";

        Object[] array = {msgString1, textField};

        //Create an array specifying the number of dialog buttons
        //and their text.
        Object[] options = {btnString1, btnString2};

        //Create the JOptionPane.
        optionPane = new JOptionPane(array,
                JOptionPane.PLAIN_MESSAGE,
                JOptionPane.YES_NO_OPTION,
                null,
                options,
                options[0]);

        setSize(new Dimension(300,250));
        setLocation(x, y);

        //Make this dialog display it.
        setContentPane(optionPane);
        setVisible(true);

        //Handle window closing correctly.
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent we) {
                /*
                 * Instead of directly closing the window,
                 * we're going to change the JOptionPane's
                 * value property.
                 */
                optionPane.setValue(new Integer(
                        JOptionPane.CLOSED_OPTION));
            }
        });

        //Ensure the text field always gets the first focus.
        addComponentListener(new ComponentAdapter() {
            public void componentShown(ComponentEvent ce) {
                textField.requestFocusInWindow();
            }
        });

        //Register an event handler that puts the text into the option pane.
        textField.addActionListener(this);

        //Register an event handler that reacts to option pane state changes.
        optionPane.addPropertyChangeListener(this);
    }

    /** This method handles events for the text field. */
    public void actionPerformed(ActionEvent e) {
        optionPane.setValue(btnString1);
        System.out.println(e.getActionCommand());
    }

    /** This method reacts to state changes in the option pane. */
    public void propertyChange(PropertyChangeEvent e) {
        String prop = e.getPropertyName();

        if (isVisible()
         && (e.getSource() == optionPane)
         && (JOptionPane.VALUE_PROPERTY.equals(prop) ||
             JOptionPane.INPUT_VALUE_PROPERTY.equals(prop))) {
            Object value = optionPane.getValue();

            if (value == JOptionPane.UNINITIALIZED_VALUE) {
                //ignore reset
                return;
            }

            //Reset the JOptionPane's value.
            //If you don't do this, then if the user
            //presses the same button next time, no
            //property change event will be fired.
            optionPane.setValue(JOptionPane.UNINITIALIZED_VALUE);
            if (btnString1.equals(value)) {
                    typedText = textField.getText();
                String ucText = typedText.toUpperCase();
                if (ucText != null ) {
                    //we're done; clear and dismiss the dialog
                    clearAndHide();
                } else {
                    //text was invalid
                    textField.selectAll();
                    JOptionPane.showMessageDialog(
                                InputDialogBox.this,
                                    "Please enter a label",
                                    "Try again",
                                    JOptionPane.ERROR_MESSAGE);
                    typedText = null;
                    textField.requestFocusInWindow();
                }
            } else { //user closed dialog or clicked delete
               // Delete the object ...

                typedText = null;
                clearAndHide();
            }
        }
    }

    /** This method clears the dialog and hides it. */
    public void clearAndHide() {
        textField.setText(null);
        setVisible(false);
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T22:14:09.243

我认为你错过了`JOptionPane`. 它具有显示它自己的对话框的能力......

```
public class TestOptionPane02 {

    public static void main(String[] args) {
        new TestOptionPane02();
    }

    public TestOptionPane02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JTextField textField = new JTextField(10);

                String btnString1 = "Save Object";
                String btnString2 = "Delete Object";

                //Create an array of the text and components to be displayed.
                String msgString1 = "Object label:";
                Object[] array = {msgString1, textField};
                //Create an array specifying the number of dialog buttons
                //and their text.
                Object[] options = {btnString1, btnString2};

                int result = JOptionPane.showOptionDialog(null, array, "", JOptionPane.YES_NO_OPTION, JOptionPane.PLAIN_MESSAGE, "New Object", options, options[0]);
                switch (result) {
                    case 0:
                        System.out.println("Save me");
                        break;
                    case 1:
                        System.out.println("Delete me");
                        break;
                }
            }
        });
    }
} 
```

要手动完成，您将不得不做更多的工作。

首先，您将不得不监听面板的属性更改事件，寻找对 the 的更改`JOptionPane.VALUE_PROPERTY`并忽略`JOptionPane.UNINITIALIZED_VALUE`...

一旦检测到更改，您将需要处理您的对话框。

您将需要提取通过该`JOptionPane#getValue`方法选择的值，该方法返回一个`Object`. 您将不得不自己中断该值的含义...

不用说，`JOptionPane.showXxxDialog`方法可以为您完成所有这些...

现在，如果您担心必须完成对话框的所有设置，我会编写一个实用方法来完成它或获取所需的参数......但这只是我

**更新**

不知道为什么我没有早点想到...

不是传递一个数组`String`作为选项参数，而是传递一个数组`JButton`。这样你就可以附加你自己的听众。

> options - 表示用户可以做出的可能选择的对象数组；**如果对象是组件，它们会被正确渲染**；非字符串对象使用其 toString 方法呈现；如果此参数为空，则选项由外观确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:33:37.643

对于您似乎想要的灵活性，您应该让您的类扩展 JFrame 而不是 JDialog。然后将您的按钮声明为 JButton： JButton saveButton = new JButton("Save"); 并向该按钮添加一个 actionListnener： saveButton.addActionListener(); 您可以将类名放在 saveButton 的括号内，也可以简单地将关键字“this”传递给它并声明一个名为 actionPerformed 的方法来封装按下按钮时应执行的代码。有关更多详细信息的 JButton 教程，请参阅此链接：http: [//docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

# java - 以编程方式生成 python 源代码的库？

> ID：12828392
> 
> 赞同：-2
> 
> 时间：2012-10-10T21:10:18.397
> 
> 标签：java, python, code-generation

我正在寻找从 java 应用程序中创建 python 源代码。是否存在这样的库，可以轻松生成 python 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:26:14.680

一个基本的解决方案，如果你**真的**需要`python`从内部生成代码`java`：

```
File file = new File("script.py");
FileOutputStream fis = new FileOutputStream(file);
PrintStream out = new PrintStream(fis);
System.setOut(out);
System.out.println("#!/usr/bin/python");
System.out.println("print 'hello world'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:49:21.767

你想达到什么目的？？？，使用模板引擎（例如[Velocity](http://velocity.apache.org/)）是使用大量 println 的替代方法。使用速度会比使用 println 更干净但更慢

# javascript - 使用大量术语，搜索页面文本并用链接替换单词

> ID：12828394
> 
> 赞同：1
> 
> 时间：2012-10-10T21:10:21.473
> 
> 标签：javascript, jquery, ajax

不久前，我发布了[这个](https://stackoverflow.com/questions/9359003/how-to-replace-glossary-terms-in-html-text-with-links)问题，询问是否可以将文本转换为 HTML 链接，如果它们与我的数据库中的术语列表匹配。

我有一个相当大的术语列表——大约 6000 个。

关于这个问题的[公认答案](https://stackoverflow.com/a/9381793/864245)非常好，但是我从未使用过 XPath，当问题开始出现时我不知所措。有一次，在修改了代码之后，我设法在我们的数据库中添加了超过 40,000 个随机字符——其中大部分需要手动删除。从那以后，我对这个想法失去了信心，更简单的 PHP 解决方案根本不足以有效地处理数据量和术语数量。

我的下一个解决方案尝试是编写一个 JS 脚本，该脚本在页面加载后检索术语并将它们与页面上的文本进行匹配。

[这个答案](https://stackoverflow.com/a/1583582/864245)有一个我想尝试的想法。

我会使用 AJAX 从数据库中检索术语，以构建如下对象：

```
var words = [
    {
        word: 'Something',
        link: 'http://www.something.com'
    },
    {
        word: 'Something Else',
        link: 'http://www.something.com/else'
    }
]; 
```

构建对象后，我将使用这种代码：

```
//for each array element
$.each(words,
    function() {
        //store it ("this" is gonna become the dom element in the next function)
        var search = this;
        $('.message').each(
            function() {
                //if it's exactly the same
                if ($(this).text() === search.word) {
                    //do your magic tricks
                    $(this).html('<a href="' + search.link + '">' + search.link + '</a>');
                }
            }
        );
    }
); 
```

现在，乍一看，这里有一个主要问题：**有 6,000 个术语，这段代码在任何方面都足够高效来完成我想要做的事情吗？**.

一种选择可能是在 AJAX 与之通信的 PHP 脚本中执行一些开销。例如，我可以发送帖子的 ID，然后 PHP 脚本可以使用 SQL 语句从帖子中检索所有信息并将其与所有 6,000 个术语进行匹配。然后对 JavaScript 的返回调用可能只是匹配术语，这将显着减少上述 jQuery 将进行的匹配数（最多约 50 个）。

我对脚本在用户浏览器上“加载”几秒钟没有问题，只要它不影响他们的 CPU 使用率或类似的东西。

所以，两个问题合二为一：

*   我可以做这个工作吗？
*   我可以采取哪些步骤使其尽可能高效？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:30:26.263

您可以在插入时缓存结果。

基本上，当有人插入新帖子时，您会运行替换过程，而不是仅仅将其插入数据库。

如果您的帖子像这样存储在数据库中

```
Table: Posts
id        post
102       "Google is a search engine" 
```

您可以创建另一个表

```
Table: cached_Posts
id       post_id   date_generated   cached_post                             
1        102       2012-10-10       <a href="http://google.com">Google</a> is a search engine" 
```

检索帖子时，首先检查它是否存在于 cached_Posts 表中。

你应该保留原来的原因可能是你可能会添加一个新的关键字来替换。您所要做的就是重新制作缓存。

通过这种方式，不需要客户端 JS，并且您只需在每个帖子中执行一次，因此您的结果应该很快就会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T15:25:30.010

这是我想出的*相对简单的东西。*抱歉，没有彻底的测试，也没有性能测试。我保证它可以进一步优化，我只是没有时间去做。我发表了一些评论以使其更简单[http://pastebin.com/nkdTSvi6](http://pastebin.com/nkdTSvi6)对于 StackOverflow 来说可能有点长，但无论如何我都会在这里发布。pastebin 是为了更舒适地观看。

```
function buildTrie(hash) {
    "use strict";
    // A very simple function to build a Trie
    // we could compress this later, but simplicity
    // is better for this example. If we don't
    // perform well, we'll try to optimize this a bit
    // there is a room for optimization here.
    var p, result = {}, leaf, i;
    for (p in hash) {
        if (hash.hasOwnProperty(p)) {
            leaf = result;
            i = 0;
            do {
                if (p[i] in leaf) {
                    leaf = leaf[p[i]];
                } else {
                    leaf = leaf[p[i]] = {};
                }
                i += 1;
            } while (i < p.length);
            // since, obviously, no character
            // equals to empty character, we'll
            // use it to store the reference to the
            // original value
            leaf[""] = hash[p];
        }
    }
    return result;
}

function prefixReplaceHtml(html, trie) {
    "use strict";
    var i, len = html.length, result = [], lastMatch = 0,
        current, leaf, match, matched, replacement;
    for (i = 0; i < len; i += 1) {
        current = html[i];
        if (current === "<") {
            // don't check for out of bounds access
            // assume we never face a situation, when
            // "<" is the last character in an HTML
            if (match) {
                result.push(
                    html.substring(lastMatch, i - matched.length),
                    "<a href=\"", match, "\">", replacement, "</a>");
                lastMatch = i - matched.length + replacement.length;
                i = lastMatch - 1;
            } else {
                if (matched) {
                    // go back to the second character of the
                    // matched string and try again
                    i = i - matched.length;
                }
            }
            matched = match = replacement = leaf = "";
            if (html[i + 1] === "a") {
                // we want to skip replacing inside
                // anchor tags. We also assume they
                // are never nested, as valid HTML is
                // against that idea
                if (html[i + 2] in
                    { " " : 1, "\t" : 1, "\r" : 1, "\n" : 1 }) {
                    // this is certainly an anchor
                    i = html.indexOf("</a", i + 3) + 3;
                    continue;
                }
            }
            // if we got here, it's a regular tag, just look
            // for terminating ">"
            i = html.indexOf(">", i + 1);
            continue;
        }
        // if we got here, we need to start checking
        // for the match in the trie
        if (!leaf) {
            leaf = trie;
        }
        leaf = leaf[current];
        // we prefer longest possible match, just like POSIX
        // regular expressions do
        if (leaf && ("" in leaf)) {
            match = leaf[""];
            replacement = html.substring(
                i - (matched ? matched.length : 0), i + 1);
        }
        if (!leaf) {
            // newby-style inline (all hand work!) pay extra
            // attention, this code is duplicated few lines above
            if (match) {
                result.push(
                    html.substring(lastMatch, i - matched.length),
                    "<a href=\"", match, "\">", replacement, "</a>");
                lastMatch = i - matched.length + replacement.length;
                i = lastMatch - 1;
            } else {
                if (matched) {
                    // go back to the second character of the
                    // matched string and try again
                    i = i - matched.length;
                }
            }
            matched = match = replacement = "";
        } else if (matched) {
            // perhaps a bit premature, but we'll try to avoid
            // string concatenation, when we can.
            matched = html.substring(i - matched.length, i + 1);
        } else {
            matched = current;
        }
    }
    return result.join("");
}

function testPrefixReplace() {
    "use strict";
    var trie = buildTrie(
        { "x" : "www.xxx.com", "yyy" : "www.y.com",
          "xy" : "www.xy.com", "yy" : "www.why.com" });
    return prefixReplaceHtml(
        "<html><head>x</head><body><a >yyy</a><p>" +
            "xyyy yy x xy</p><abrval><yy>xxy</yy>", trie);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:35:35.823

正如invertedSpear 所说，你不应该仅仅因为你不能让它工作就放弃PHP。Javascript 解决方案在减轻服务器负载的同时，最终用户可能会觉得速度较慢。您也可以始终缓存服务器端解决方案，而您实际上无法在客户端进行缓存。

话虽如此，这些是我对您的 Javascript 的看法。我自己没有尝试过这样的事情，所以我无法评论你是否可以让它工作，但有几件事我认为可能存在问题：

1.  jQuery 的`$.each()`功能虽然非常有用，但效率并不高。尝试运行这个基准，你会明白我的意思：http: [//jsperf.com/jquery-each-vs-for-loops/9](http://jsperf.com/jquery-each-vs-for-loops/9)

2.  如果您要`$('.message')`在循环的每次迭代中运行，您可能会进行大量相当昂贵的 DOM 遍历。如果可能，您应该在开始循环之前将此操作的结果缓存在一个变量中`words`

3.  您是否依赖于您的“搜索”文本的每个实例都被具有该类的任何元素封装`message`并且周围没有其他文本？因为这就是你的`if ($(this).text() === search.word) {`行所暗示的。在您的另一个问题中，您似乎建议您在要替换的术语周围有更多文本，在这种情况下，您可能需要查看正则表达式来执行替换。您还需要确保文本不包含在`<a>`标签中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:34:38.797

如果您可以访问消息和单词列表的数据库，我真的建议您在 PHP 中完成所有操作。虽然这可以在 JS 中完成，但作为服务器端脚本会好很多。

在 JS 中，基本上，你必须

*   加载消息
*   加载“字典”
*   遍历字典的每个单词
    *   在 DOM 中查找匹配项（哎哟）
        *   代替

前 2 点是请求，这会产生相当大的开销。该循环将对客户端的 CPU 造成负担。

为什么我建议将其作为服务器端代码执行：

*   服务器更适合这些类型的工作
*   JS 在客户端浏览器上运行。每个客户端都是不同的（例如：有人可能使用性能较差的 IE，或者有人使用智能手机）

这在 PHP 中很容易做到。

```
<?php
    $dict[] = array('word' => 'dolor', 'link' => 'DOLORRRRRR');
    $dict[] = array('word' => 'nulla', 'link' => 'NULLAAAARRRR');

    //  Pretty sure there's a more efficient way to separate an array.. my PHP is rusty, sorry. 
    $terms = array();
    $replace = array();
    foreach ($dict as $v) {
        // If you want to make sure it's a complete word, add a space to the term. 
        $terms[] = ' ' . $v['word'] . ' ';
        $replace[] = ' '. $v['link'] . ' ';
    }

    $text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";

    echo str_replace($terms, $replace, $text);

    /* Output: 
    Lorem ipsum DOLORRRRRR sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure DOLORRRRRR in reprehenderit in voluptate velit esse cillum dolore eu fugiat NULLAAAARRRR pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    */

?> 
```

虽然这个脚本非常基本 - 它不会接受不同的情况。

我会做什么：

如果 PHP 的性能真的对你打击很大（我怀疑..），你可以替换它一次并保存它。然后，当您添加一个新单词时，删除缓存并重新生成它们（您可以编写一个 cron 来执行此操作）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:30:45.253

你可以做任何事情，问题是：你投入的时间值得吗？

第 1 步，放弃 AJAX 要求。Ajax 用于与服务器交互，向服务器提交少量数据并获得响应。不适合您想要的东西。

第 2 步，放弃 JS 要求，JS 用于与用户交互，你只是想传递一个文本块，其中一些单词替换为链接，这应该在服务器端处理。

第3步，专注于php，如果效率不高，攻击它。寻找提高效率的方法。你在 PHP 中尝试了什么？为什么它没有效率？

# jquery - 使用 jQuery 从 iframe 中删除属性

> ID：12828395
> 
> 赞同：0
> 
> 时间：2012-10-10T21:10:24.420
> 
> 标签：jquery, iframe

是否可以在 DOM 准备好或 window.load 时使用 jQuery 从 < iframe width="100%" > 中删除宽度属性？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T21:12:51.843

在您的 iframe 上放置一个 ID 以简化操作：

```
$(document).ready(function() {
    $('#myFrame').removeAttr('width');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:16:06.450

绝对地。使用 jQuery：

```
$(document).ready(function() {
    $('iframe').removeAttr('width');
}); 
```

请参见此处的示例：

[http://jsfiddle.net/3rFTF/](http://jsfiddle.net/3rFTF/)

# ios - 在文本字段点击上显示日期选择器

> ID：12828398
> 
> 赞同：22
> 
> 时间：2012-10-10T21:10:32.197
> 
> 标签：ios, xcode, uitextfield, uidatepicker

我对 iOS 很陌生，所以显然我在尝试遵循此解决方案时缺少一些概念[显示 datepicker on tap on textfield](https://stackoverflow.com/questions/6074683/display-datepicker-on-tapping-on-textfield) to my problem。

我在一个名为 DatepickerAppDelegate 的类中有接口和实现，但我在这里迷路了：

*“在 XIB 中，拉出一个 UIToolbar 和一个 UIDatePicker，但不要将其附加到视图。适当地连接插座。dateChanged：响应日期选择器中的更改和 doneEditing：当工具栏中的完成按钮被调用时单击。也连接它们。方法实现如下所列。*

我读了一些关于 XIB 的东西，但我使用的是故事板，所以我想我当时没有。另外，我不确定我应该如何在不将其附加到视图控制器的情况下拉出元素（我正在尝试，但是当我释放鼠标按钮时，该工具会飞回工具栏），而我没有甚至不明白为什么我需要 UIToolbar。

最后，如何将我的文本字段连接到 datepicker 委托？

有人能帮我吗？

更新：

其实很简单，我只需要：

```
datePicker = [[UIDatePicker alloc] init];
datePicker.datePickerMode = UIDatePickerModeDate;
[datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];

self.birthday.inputView = datePicker; 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-17T03:09:16.963

`UIResponder`，从中`UITextField`继承，[定义了一个名为 的属性`inputView`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006783-CH4-SW22)。这个属性 (a ) 可以定义一个视图，当它成为第一响应者时`UIView *`，它将显示*而不是键盘。*`UIResponder`

因此，如果您希望 a`UIDatePicker`在您点击 textField 时出现（即，您使该 textField 成为第一响应者），那么您可以天真地说：

```
UIDatePicker *datePicker = [[UIDatePicker alloc] init...];
... configure datePicker ...

[myTextField setInputView:datePicker]; 
```

现在，当你`UITextField`被点击时，a`UIDatePicker`将被调出。

# 然而

你会想做更多的事情，因为你需要处理不同的方向和不同的习语。

但这是基本的想法。

（如果您想要 上方的工具栏`UIDatePicker`，这就是该`inputAccessoryView`属性的用途......）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-25T05:30:11.390

*在* **ViewController.m的 viewDidLoad 中**

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIDatePicker *datePicker = [[UIDatePicker alloc]init];
    [datePicker setDate:[NSDate date]];
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker addTarget:self action:@selector(dateTextField:) forControlEvents:UIControlEventValueChanged];
    [txtFieldBranchYear setInputView:datePicker];
} 
```

*在 ViewController 中添加一种方法*

```
-(void) dateTextField:(id)sender
{
    UIDatePicker *picker = (UIDatePicker*)txtFieldBranchYear.inputView;
    [picker setMaximumDate:[NSDate date]];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    NSDate *eventDate = picker.date;
    [dateFormat setDateFormat:@"dd/MM/yyyy"];

    NSString *dateString = [dateFormat stringFromDate:eventDate];
    txtFieldBranchYear.text = [NSString stringWithFormat:@"%@",dateString];
} 
```

**txtFieldBranchYear** *是 UITextField 的一个出口*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:35:50.453

将 datepicker 视图和 uitoolbarview 添加到您的视图中。例如

```
CGFloat toolbarHeight = 44.f;
CGFloat datePickerHeight = 140.f;
CGFloat containerViewHeight = toolbarHeight+datePickerHeight;
//create container view for datepicker and toolbar
UIView *containerView = [[UIVIew alloc] initWithFrame:CGRectMake(0.f, [self.view bounds].size.height+containerViewHeight, [self.view bounds].size.width, containerViewHeight)];

//after init toolbar set the frame
toolBar.frame = CGRectMake(0.f,0.f,containerView.frame.size.width, toolbarHeight];
//then add on toolbar button save and release it after add

//after init datePicker set the frame
datePicker.frame = CGRectMake(0.f, toolbarHeight, containerView.frame.size.width, datePickerHeight);

//add datePicker and toolBar to containerView
[containerView addSubview: toolBar];
[containerView addSubview: datePicker];

[toolBar release];
[datePicker release];

//add containerView to main view

[self.view addSubview: containerView];
[containerView release]; 
```

因此，当视图确实加载时，它们将被隐藏，竞争者视图的 Y 位于您的视图框架之外。

现在您应该分配 UITextFieldDelegate 的属性委托

```
textfield.delegate = self; 
```

在委托**textFieldDidBeginEditing**的方法中，请参阅[UITextFieldDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)您应该触发将显示您的 datePicker 和工具栏的方法。如果您有很多 textFields 来定义哪个被选中，请使用**标签**属性，它是整数，您可以使用**switch**而不是许多**if**条件。

要显示您的 datePicker 和工具栏，您应该更改 containerView 框架的 Y。这是如何做到这一点

```
CGRect containerViewFrame = containerView.frame;
containerViewFrame.y -=containerViewHeight;
containerView.frame = containerViewFrame; 
```

隐藏只是加上 containerViewHeight 变量。您可以使用 UIViewAnimations 用一些动画来显示它。例如**UIViewAnimationCurveEaseInOut**

# magento - 分层导航中未显示属性（已禁用下拉菜单）

> ID：12828405
> 
> 赞同：1
> 
> 时间：2012-10-10T21:10:46.950
> 
> 标签：magento, navigation, layered

分层导航中未显示属性（已禁用下拉菜单）

我希望某些属性适用于某个类别..但下拉菜单被禁用...请帮助！

在分层导航中使用选择框不可点击

只能与目录输入类型 Dropdown、Multiple Select 和 Price 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:19:23.760

您不能将具有与下拉、多选和价格不同类型的属性设置为可过滤（在分层导航中使用）。

您只能在分层导航中使用这些属性类型。

# node.js - Mongodb：将键：值插入对象

> ID：12828407
> 
> 赞同：1
> 
> 时间：2012-10-10T21:10:49.763
> 
> 标签：node.js, mongodb

在过去几周我使用 Mongodb 的过程中，我正在开发越来越复杂的应用程序，在我最新的项目中，我想将 a 插入`key:value`到一个对象中。我正在使用`mongojs`& `node.js`。

我正在`hash = 3gx83h7`为要推入对象路径的新键：值生成一个动态键（即：）。我知道我可以做到以下几点：

```
db.applications.update({'apikey':key,'uid':user._id}, {'$set':{'paths.hash':0}},function(err){
    if(!err){}
}); 
```

但这将推动一个 key:value 类似于这样：

```
paths:{
    hash:0
} 
```

如何将生成的哈希作为密钥推送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:16:07.953

您需要以编程方式组合键名，以便使用`hash`'s 值：

```
var setValue = {};
setValue['paths.' + hash] = 0;

db.applications.update(
    {'apikey': key, 'uid': user._id}, 
    {'$set': setValue}, 
    function(err){
        if(!err){}
    }
); 
```

# ruby-on-rails-3 - Cucumber：访问路径的未定义方法错误

> ID：12828414
> 
> 赞同：1
> 
> 时间：2012-10-10T21:11:30.100
> 
> 标签：ruby-on-rails-3, cucumber

我有一个黄瓜步骤

```
When /^I go to the Add Suggestions form$/ do
  visit new_manage_suggestions_path
end 
```

和一条路线

```
namespace "manage" do
  resource :suggestions
end 
```

rake 路由输出

```
manage_suggestions POST /manage suggestions(.:format) manage/suggestions#create 
```

当我运行黄瓜时，我得到

```
undefined method `suggestions_path' for #<#<Class:0x000000064a4768>:0x000000064accd8> (ActionView::Template::Error) 
```

为什么黄瓜要尝试这条路？

在我的`new_manage_suggestions_path`应用程序中运行良好，我有一个使用它的链接并且运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:55:05.553

在您的路线定义中，为了让您的应用程序生成正确的路线，您需要从单数切换`resource`到复数`resources`，因为您可能有多个建议。

```
namespace "manage" do
  resources :suggestions
end 
```

更多详细信息可以在关于[奇异资源](http://guides.rubyonrails.org/routing.html#singular-resources)的 Rails 文档中找到，您可以在其中看到奇异版本的路径名中不包含命名空间。

# maven - 在测试包中生成 test-jar 和 jar 文件

> ID：12828416
> 
> 赞同：24
> 
> 时间：2012-10-10T21:11:36.030
> 
> 标签：maven, maven-surefire-plugin

我想将我的测试包打包到 jar 文件中。如何从 maven 插件 Surefire 执行生成 test-jar。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-10T21:26:27.643

通过使用以下配置，您可以从测试中创建一个 jar：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.6</version>
    <executions>
      <execution>
        <goals>
          <goal>test-jar</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

要使用这种工件：

```
 <dependencies>
    <dependency>
      <groupId>groupId</groupId>
      <artifactId>artifactId</artifactId>
      <type>test-jar</type>
      <version>version</version>
      <classifier>tests</classifier>
      <scope>test</scope>
    </dependency>
  </dependencies> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-10T21:29:18.190

您可以将以下条目添加到您的 pom 中：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.4</version>
    <executions>
        <execution>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# javascript - 为什么在 alert() 之后需要调用 .delay 才能不跳过效果？

> ID：12828417
> 
> 赞同：0
> 
> 时间：2012-10-10T21:11:37.173
> 
> 标签：javascript, jquery, jquery-ui

我试图理解为什么它会这样工作。我的印象是警报对话框会阻止脚本执行。然而，脚本的行为就像在幕后继续执行，而不更新屏幕。

拿这个代码：

```
function highlightItems(itemA, itemB, msg) {

    $(itemA).effect("highlight", {}, 800);

    window.alert(msg);

    // $(itemB).delay(1);
    $(itemB).effect("highlight", {}, 800);
} 
```

当我关闭警报对话框时， itemB 的高亮效果已经完成。（如果我足够快地关闭警报，我可以捕捉到效果的结尾。）就好像效果在我有机会关闭警报框之前就开始了。

我能想到的是，任何用于计时的 effect() 都被调用 alert() 所抛弃。如果我取消注释 .delay，突出显示按预期工作：它在警报框关闭后立即开始。那么这是否意味着 .delay 函数“重置”了效果计时器？

这不是一个大问题......我只是想了解这里发生了什么。我平时的 Google 技能今天让我失望了。

**编辑**- jsfiddle 我的意思的一个例子：[jsfiddle.net/kA2uV/](http://jsfiddle.net/kA2uV/)

**编辑 2**

这显然只影响相同的 .effect 连续使用两次的情况。如果使用不同的效果，问题不会发生：[jsfiddle.net/yXSgu/3/](http://jsfiddle.net/yXSgu/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:21:47.713

IIRC，jQuery 动画基于日期/时间，它不是主要由 setTimeout 或 setInterval 处理的。当 javascript 停止时，时间还在继续。

编辑：我明白你的意思，虽然我仍然认为它与日期/时间有关，但在这种情况下，jQuery 对 $.now() 的内部使用可能会被警报和 .delay(1) 所抛弃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:22:00.980

警报功能“暂停”程序的状态，因此当它被解除时，程序将恢复。延迟应该在警报之后发生，以确保您等待的时间不会超过预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:22:02.960

那是因为突出显示会触发，但警报不会等待它在启动之前完成。这是一个按预期工作的修改版本。（突出显示在警报显示之前结束）

另外，您的示例不会“暂停”突出显示，因为正如另一位海报所说，jQuery 使用时间值来运行动画。

[http://jsfiddle.net/yXSgu/](http://jsfiddle.net/yXSgu/)

# svg - 在 Raphael 中绘制一个填充的 180 度弧

> ID：12828418
> 
> 赞同：0
> 
> 时间：2012-10-10T21:11:38.510
> 
> 标签：svg, raphael

我刚刚开始使用 SVG 和 Raphael.js 并试图绘制一个填充的弧线，但不知道如何开始。我正在尝试绘制一个基本的挂锁，并让锁体和螺栓的两个部分适合顶部的弧线。它基本上是一个填充的 180 度弧，10 像素宽。我猜我需要使用 .path() 但不确定语法或是否要使用“curveTo”或“arc” - 老实说，努力寻找任何好的 SVG 或 Raphael 教程网站。

```
var padlockBody = paper.rect(100, 100, 100, 100, 5);
padlockBody.attr("fill", "#000000");

var leftBoltPart = paper.rect(120, 70, 10, 30);
leftBoltPart.attr("fill", "#000000");

var rightBoltPart = paper.rect(170, 70, 10, 30);
rightBoltPart.attr("fill", "#000000");

// TODO: filled arc to fit on top of left/right bolt parts 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:34:26.120

众所周知，手工编写弧线具有挑战性（在纯 SVG 或 Raphael 中，都是一样的）。

我通常用这些方法扩展 Raphael（学分属于[the55](https://gist.github.com/812657)）

```
// http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands
Raphael.fn.arc = function(startX, startY, endX, endY, radius1, radius2, angle) {
  var arcSVG = [radius1, radius2, angle, 0, 1, endX, endY].join(' ');
  return this.path('M'+startX+' '+startY + " a " + arcSVG);
};

Raphael.fn.circularArc = function(centerX, centerY, radius, startAngle, endAngle) {
  var startX = centerX+radius*Math.cos(startAngle*Math.PI/180); 
  var startY = centerY+radius*Math.sin(startAngle*Math.PI/180);
  var endX = centerX+radius*Math.cos(endAngle*Math.PI/180); 
  var endY = centerY+radius*Math.sin(endAngle*Math.PI/180);
  return this.arc(startX, startY, endX-startX, endY-startY, radius, radius, 0);
}; 
```

你可以在这里找到一个演示：http: [//jsfiddle.net/cahT9/](http://jsfiddle.net/cahT9/)

# sql - Nhibernate中非键列的内部联接

> ID：12828420
> 
> 赞同：0
> 
> 时间：2012-10-10T21:11:40.903
> 
> 标签：sql, fluent-nhibernate

我试图在 Nhibernate 中创建的查询：

```
SELECT _Eligible_Claims.ClaimID, _Eligible_Claims.DateFilled, _Eligible_Claims.NDC, _Eligible_Claims.Cost
From _Eligible_Claims
INNER JOIN _Files_Claims ON _Files_Claims.FileID = _Eligible_Claims.FileID 
```

_Eligible_Claims 是一个视图（因此它没有键），_Files_Claims 的 PK 为“FileID”。

Eligible_Claims 地图：

```
public EligibleClaimsMap()
    {
        ReadOnly();
        Table("_Eligible_Claims");

        Id(x => x.UniqueIdentifier, "Id")
            .GeneratedBy.Guid();

        Map(x => x.ApplicationID, "ApplicationID")
            .Not.Nullable();

        Map(x => x.BenOp, "BenOp")
            .Not.Nullable();

        Map(x => x.BenOpID, "BenOpID")
            .Not.Nullable();

        Map(x => x.MemberID, "MemberID")
            .Nullable();

        Map(x => x.ClaimID, "ClaimID")
            .Not.Nullable();

        Map(x => x.NDC, "NDC")
            .Not.Nullable();

        Map(x => x.DateFilled, "DateFilled")
            .Not.Nullable();

        Map(x => x.Cost, "Cost")
            .Not.Nullable();

        Map(x => x.DrugID, "DrugId")
            .Nullable();

        Map(x => x.CategoryID, "CategoryId")
            .Nullable();

         Map(x => x.FileID, "FileID")
            .Not.Nullable();
    } 
```

_Files_Claims 映射：

```
public ClamFileMap()
    {
        Table("_Files_Claims");

        Id(x => x.ID, "FileID")
            .CustomType<UintToInt>()
            .GeneratedBy.Identity();

        Map(x => x.Filename, "FileName")
            .Not.Nullable();

        Map(x => x.Size, "FileSize")
            .Not.Nullable();

        Map(x => x.DateCreated, "DateCreated")
            .Not.Nullable();

        Map(x => x.DateEntered, "DateEntered")
            .Not.Nullable();

        Map(x => x.ClientID, "ClientID")
            .Not.Nullable()
            .CustomType<UintToInt>();

        Map(x => x.MasterTable, "MasterTable")
            .Nullable();

        Map(x => x.GUID, "GUID")
            .Nullable();

        Map(x => x.Protected, "Protected")
            .Not.Nullable();

        Map(x => x.BatchTimeStamp, "BatchTimeStamp")
            .Nullable();

        Map(x => x.ApplicationID, "ApplicationID")
            .Nullable();

        Map(x => x.ClaimCount, "Claims")
            .Not.Nullable();

        Map(x => x.TotalCost, "ClaimCost")
            .Not.Nullable();

        Map(x => x.PackageID, "PackageID")
            .Nullable();

        Map(x => x.TempDate, "TempDate")
            .Nullable();

        Map(x => x.Renamed, "Renamed")
            .Not.Nullable();

        Map(x => x.ERRPPackage, "ERRPPackage")
            .Not.Nullable();

        Map(x => x.Removed, "Removed")
            .Not.Nullable();

        Map(x => x.RemovedBy, "RemovedBy")
            .Nullable();

        Map(x => x.RemovedDate, "RemovedDate")
            .Nullable();

        Map(x => x.ImportedBy, "ImportedBy")
            .Nullable();

        Map(x => x.ImportedDate, "ImportedDate")
            .Nullable();

        Map(x => x.ControlTotal, "ControlTotal")
            .Nullable();
    } 
```

我目前的做法：

```
var query = session.CreateCriteria<EligibleClaims>()
                   .CreateAlias("ClaimFile", "claimFile", NHibernate.SqlCommand.JoinType.InnerJoin); 
```

我不希望这会起作用，因为默认情况下它不会尝试在 ClaimFile 的 FK 上加入 EligibleClaims 的 PK 吗？我注意到“CreateAlias”方法有一个名为“withClause”的“ICriterion”的第四个参数的重载。知道如何实现吗？或者我应该从另一个角度来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:04:59.613

还有一个选项是简单地将 _Files_Claims 表的引用映射到 EligibleClaims 映射中。它不一定是 FK，但它似乎仍然有效：

```
References(x => x.ClaimFile)
            .Column("FileID")
            .Not.LazyLoad()
            .Cascade.None(); 
```

然后使用：

```
var query = session.CreateCriteria<EligibleClaims>()
            .CreateAlias("ClaimFile", "claimFile", NHibernate.SqlCommand.JoinType.InnerJoin); 
```

似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:09:30.747

如果 LINQ 是一个选项

```
var query = from file in session.Query<ClaimFile>()
            from claim in session.Query<EligibleClaims>()
            where file.FileId == claim.FileId
            select new { ... }; 
```

# javascript - 有谁知道 JavaScript 中原始的 JSON.stringify() 函数？

> ID：12828421
> 
> 赞同：2
> 
> 时间：2012-10-10T21:11:42.920
> 
> 标签：javascript, json, stringify

我需要它，因为我最近制作了一个应用程序，该应用程序将包含所有用户生成数据的对象保存到`localStorage`，并使用`JSON`.

奇怪的是，由于某种原因，Internet Explorer 对 JSON 的支持很差，如果不是零的话（“JSON 未定义”），我无法尝试重新创建整个函数。

```
stringify:function(x){
    y='{'
    for(i in x){
        reg=RegExp('\'','g')
        y+=',\''+i.replace(reg,'\\\'')+'\':\''+x[i].replace(reg,'\\\'')+'\''
    }
    y=y.replace(',','')
    y+='}'
    return y
} 
```

这是我的第一次尝试，但我忘记了该对象内部还有其他对象，这些对象本身包含对象，并且不断收到错误，该错误基本上源于尝试调用`String.prototype.replace()`Object 的方法。

由于当时我的代码有点强迫症，实际上我确实在源代码中保存了对象的结构：

```
/*
Link Engine.data: Object: { 
    X: Object: {    [Each is a Paradigm, contains links]
        link.0:{
            link:[link],
            title:[title],
            removed:[true/false],
            starred:[true/false]
        },
        ...
    },
    LSPAR: [Reserved] Object: { [Paradigm list and pointer contained here]
        key:[key], (this controls X)
        list:{
            [listitem]:[listitem],
            ...
        }
    },
    #CONFIG: [Reserved] Object: { [contains miscellaneous Config data]
        property:boolean/number/string,
        ...
    }
*/ 
```

那是基本的数据结构，`...`代表一个重复的模式。

* * *

## 编辑 2019

这整个问题令人憎恶，但我想至少尝试修复我为设计不佳的数据结构编写的令人讨厌的文档，使其更加连贯：

```
Link {
    string  link
    string  title
    boolean removed
    boolean starred
}

Config {
    ...

    /* Just has a bunch of arbitrary fields; not important */
}

WArray {
    string... [paradigm-name]

    /* Wasteful Array; an object of the form
     * { "a":"a", "b":"b", ... }
     */
}

Paradigm { /* analogous to above "X: Object: {..." nonsense */
    Link... [paradigm-name].[id]

    /* each key is of the form [paradigm-name].[id] and stores a Link
     * e.g. the first link in the "Example" paradigm would
     * be identified by the key "Example.0"
     */
}

ParadigmList {
    string key  /* name of selected paradigm */
    WArray list /* list of paradigm names */
}

LinkEngineData {
    Paradigm...   [paradigm-name]
    ParadigmList  LSPAR
    Config        #CONFIG /* actual field name */
} 
```

希望现在您可以解析正在发生的事情。这个语法：

```
type... format 
```

旨在传达该类型的对象`type`多次出现，如数组，但它不是数组。因此，这些字段没有固定的名称，因此

```
format: [descriptor1]text[descriptor2]text... 
```

使用格式代替实际的字段名称。当您尝试创建数据结构而不知道数据结构是什么时，就会发生这种情况。我确实在原始问题中相邻使用了“数据”和“结构”这两个词，但这纯属巧合。我并不是说“这是我使用的数据结构”；我的意思是“这是我的数据的结构”。

无论如何，这就是我今天的设计方式：

```
Link {
    string  url
    string  title
    boolean starred
}

LinkGroup {
    string name
    Link[] links
}

Config {
    ... /* has whatever it needs to have */
}

Data {
    int         selGroup
    LinkGroup[] groups
    Config      config
} 
```

就这些。

* * *

如果有人拥有实际 JSON.stringify 函数的源代码，或者知道复制它的方法，那么请给出您的答案。

* * *

**编辑（2013 年，可能）**

我最终放弃了 IE 支持并从头开始重新设计应用程序；新版本托管[在这里](http://b1kmusic.koding.com/Misc/WebApps/Link_Saver.html)。它适用于开箱即用的 IE9！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:13:45.290

我认为这是最好的替代品：http: [//bestiejs.github.com/json3/](http://bestiejs.github.com/json3/)

它声称比 Crockford 的 JSON 2 更好，原因如下（来自他们的网站）：

JSON 3...

*   正确序列化原始包装对象（[问题 #28](https://github.com/douglascrockford/JSON-js/issues/28)）。
*   序列化循环结构时抛出 TypeError（JSON 2 递归直到调用堆栈溢出）。
*   利用功能测试来检测损坏或不完整的本机 JSON 实现（JSON 2 仅检查本机功能的存在）。测试只在运行时执行一次，因此在解析或序列化值时没有额外的性能成本。

与 JSON 2 相比，JSON 3 不...

*   将 toJSON() 方法添加到 Boolean、Number 和 String 原型。这些不是任何标准的一部分，并且由于 stringify() 实现的设计而变得多余。
*   将 toJSON() 或 toISOString() 方法添加到 Date.prototype。请参阅下面有关日期序列化的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:15:08.377

试试[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:24:11.427

我认为你应该使用 json2.js 库： [https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# c# - 在多个查询之间共享 InputAdapter

> ID：12828422
> 
> 赞同：1
> 
> 时间：2012-10-10T21:11:44.040
> 
> 标签：c#, .net, streaminsight

我正在使用 StreamInsight 2.1 开发一个 StreamInsight 应用程序。

输入适配器将是每秒具有数千个事件的实时库存数据流。我想使用相同的数据流运行多个独立的查询，并能够在流运行时添加更多查询，在流中的当前位置获取。

但是，每当我编写查询时，它都会创建一个全新的输入适配器。所以，我最终得到了 25 个输入适配器，它们都加载和推送相同的数据。

我只是在想这个错误吗？输入适配器是否独立于每个查询？

将实时库存数据放在输入适配器后面并让每个输入适配器再次流式传输该数据的唯一解决方案是什么？

任何建议都会很好，很难找到关于 StreamInsight 的好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:49:47.600

由于您在谈论输入适配器，我假设您使用的是旧适配器模型，而不是较新的事件源/接收器方法。您需要看一下所谓的“动态查询组合”或 DQC。这种方法将允许您创建输入适配器的单个实例，然后与您的其他查询共享流。

简而言之，您需要创建一个包含所有股票代码数据的“来源”查询。从那里，您可以在查询上调用“ToStream()”，将查询结果转换回 CepStream。接下来让您的 25 个左右的其他查询/计算/等使用该流作为他们的数据源。

查看MSDN StreamInsight 文档中的[在运行时编写查询。](http://msdn.microsoft.com/en-us/library/ff518536%28v=sql.111%29.aspx)该页面的第一部分“重用现有查询的输出”应该正是您所需要的。

# r - 将函数应用于数据框

> ID：12828423
> 
> 赞同：0
> 
> 时间：2012-10-10T21:11:44.667
> 
> 标签：r, plyr

我不知道为什么这不起作用。我有一个包含 5 列 n 行的数据集。我只想对每一行应用一个函数，并将结果返回到一个 n x 1 向量中。

只是为了测试一切是如何工作的，我做了这个简单的函数：

```
f1 <- function(uniqueid,Perspvalue,expvalue,stddevi,stddevc) {
    uniqueid+ Perspvalue- expvalue+ stddevi+stddevc
} 
```

这是我的数据集的前几行：

```
> data
     uniqueid   Perspvalue    expvalue      stddevi      stddevc
1           1 2.404421e+03  3337239.00 8.266566e+03 3.324624e+03
2           2 1.345307e+03  3276559.87 7.068823e+03 2.648072e+03
3           3 1.345307e+03  3276559.87 7.068823e+03 2.648072e+03 
```

请注意，它是一个数据框（我认为），而不是一个矩阵。我使用 read.csv 从 csv 加载数据。

所以我试试这个：`apply(data,1,f1)`

但我的结果是这样的：`Error in uniqueid + Perspvalue : 'Perspvalue' is missing`

我期望一个数字而不是一个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:18:19.053

您需要为此使用`mapply`，或者使用 plyr 包更方便`mdply`。

一些示例代码：

```
spam_function = function(a, b) {
  return(a*b)
}

require(plyr)
input_args = data.frame(a = runif(1000), b = runif(1000))
result = mdply(input_args, spam_function)
> head(result)
           a         b         V1
1 0.46902575 0.6865863 0.32202668
2 0.56837805 0.2400993 0.13646717
3 0.07185661 0.2334754 0.01677675
4 0.15589191 0.6636891 0.10346377
5 0.98317092 0.8895609 0.87459042
6 0.46070479 0.4301685 0.19818071 
```

如果您只想要结果向量：

```
result_vector = result$V1 
```

或者，使用以下 R 的基本解决方案`mapply`：

```
result_mapply = mapply(spam_function, a = input_args$a, b = input_args$b)
> head(result_mapply)
[1] 0.2757767 0.1268879 0.5851026 0.7904186
[5] 0.2186079 0.1091692 
```

# r - read.csv 与 read.table

> ID：12828438
> 
> 赞同：19
> 
> 时间：2012-10-10T21:12:21.200
> 
> 标签：r, file-io, read.table, read.csv

我在几种情况下看到，虽然`read.table()`无法读取制表符分隔的文件（例如微阵列的注释表），但返回以下错误：

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
line xxx did not have yyy elements 
```

`read.csv()`在同一个文件上完美运行，没有错误。我认为也的速度`read.csv()`也高于`read.table()`。

甚至更多：`read.table()`正在做非常疯狂的阅读我的文件。它在读取第 100 行时出现此错误，但是当我将第 90 行到第 110 行复制并粘贴到同一文件的开头之后，它仍然会出现第 100+21 行的错误（在开头复制了新行）。如果该行有任何问题，为什么它在读取开头粘贴的行时不报告该错误？我确认`read.csv()`读取相同的文件没有错误。

您是否知道为什么`read.table()`无法读取在其上`read.csv()`工作的相同文件？还有任何理由`read.table()`在任何情况下使用吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-10T21:18:43.067

`read.csv`是一个相当薄的包装器`read.table`；如果您无法`read.csv`通过提供正确的参数来完全复制 的行为，我会感到非常惊讶`read.table`。但是，其中一些参数（例如处理引号或注释字符的方式）可以很好地改变函数的速度和行为。

特别是，这是 的*完整*定义`read.csv`：

```
function (file, header = TRUE, sep = ",", quote = "\"", dec = ".", 
    fill = TRUE, comment.char = "", ...) {
     read.table(file = file, header = header, sep = sep, quote = quote, 
        dec = dec, fill = fill, comment.char = comment.char, ...)
} 
```

所以如前所述，它只是`read.table`带有一组特定的选项。

正如@Chase 在下面的评论中`read.table()`所说，帮助页面在下面的内容中也有同样的说明`Details`：

> read.csv 和 read.csv2 与 read.table 相同，但默认值除外。它们用于读取“逗号分隔值”文件 ('.csv') 或 (read.csv2) 在使用逗号作为小数点和分号作为字段分隔符的国家/地区使用的变体。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T23:00:18.610

不要`read.table`用来读取制表符分隔的文件，使用`read.delim`. （它只是一个薄包装，`read.table`但它将选项设置为适当的值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T14:26:45.280

`read_table()`有时在 tab `sep`'ed 文件上会失败，并且设置`sep='\s+'`可能有助于假设表中的项目没有空间

# php - 如何使用 AJAX 创建投票系统？

> ID：12828441
> 
> 赞同：-2
> 
> 时间：2012-10-10T21:12:42.493
> 
> 标签：php, jquery

> **可能重复：**
> [jQuery 投票系统](https://stackoverflow.com/questions/3722874/jquery-voting-system)

我一直在使用[本教程](http://www.9lessons.info/2009/08/vote-with-jquery-ajax-and-php.html)来创建投票系统。

问题在于，在教程中投票会更新，因为如果有意义的话，他可以将投票反馈到同一个地方。但是，如果我有一张触发投票的图像，然后我想更新页面上其他地方的投票怎么办？

例如，他投票的“按钮”保持了投票的数量，但我想将这些数据保存在其他地方，但不知道一旦投票完成后如何自动更新它。

另外，我的图像总是在我点击它时消失，我该如何阻止它？

我会发布代码，但它与仅根据我自己的需要更改的教程基本相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:20:33.337

假设您想将结果更新为新的`<div id="new-results">`. 在内部使用相同的代码

```
$(".vote").click(function(){ /* his code here */ }); 
```

你会想要更换

```
parent.html(html); 
```

和

```
$("#new-results").html(html); 
```

在提到父母的两个地方。

# active-directory - 设置远程桌面服务配置文件和主目录路径 Windows 2008

> ID：12828442
> 
> 赞同：1
> 
> 时间：2012-10-10T21:12:43.940
> 
> 标签：active-directory, windows-server-2008-r2, profile, drive, home-directory

我正在尝试以编程方式为 Windows 2008 R2 Acitve Directlry 中的远程桌面服务（终端服务）设置用户漫游配置文件路径。我可以在 Windows 2003 中使用与下面列出的代码类似的 vbscript 或 powershell 来执行此操作，而不会出现任何问题。

```
objUser.TerminalServicesProfilePath = "\\testing\test\"& profilename
objUser.TerminalServicesHomeDirectory = \\testing\test\& username
objUser.TerminalServicesHomeDrive = "Y:"
objUser.AllowLogon = Enabled
objUser.SetInfo 
```

我发现 AD 对象名称在 2008 R2 中发生了变化，并更新了我的代码以反映这样的变化。

```
objUser.msTSProfilePath = "\\testing\test\"& profilename
objUser.msTSHomeDirectory = "\\testing\test\"& username
objUser.msTSHomeDrive = "Y:"
objUser.AllowLogon = Enabled
objUser.SetInfo 
```

问题是，虽然此代码更新了用户 AD 对象（我使用 ADSIEDIT 进行了验证），但设置永远不会出现在 Active Directory 用户和计算机中，并且当用户登录到远程桌面会话时它不起作用。

# c# - .NET 3.5 没有 enum.tryparse，那么如何安全地将字符串解析为枚举呢？

> ID：12828443
> 
> 赞同：3
> 
> 时间：2012-10-10T21:12:45.130
> 
> 标签：c#, enumeration

> **可能重复：**
> [如何尝试解析枚举值？](https://stackoverflow.com/questions/1082532/how-to-tryparse-for-enum-value)

我正在使用没有 Enum.TryParse 的 .net 3.5。

那么如何安全地将字符串解析为枚举呢？

我在 .net 4.0 中这样做：

```
SomeEnum someEnum;
if (Enum.TryParse(someString, true, out someEnum))
{
  //
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:19:02.877

您可以使用 Enum.GetNames(...).Contains 然后 Enum.Parse

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:23:17.673

缺少方法的另一个版本：Enum.TryParse（在 C# 中）

所有类型的“TryParse”方法都非常有用，我一直在使用它们。令人惊讶的是，微软没有在框架中包含一个非常有用的方法：Enum.TryParse。许多编码人员发现自己不时为他们的枚举编写“解析”方法。像这样的东西：

```
public enum ImageType
{
    Jpg,
    Gif,
    Png
}

public static ImageType ParseImagetype(string typeName)
{
    typeName = typeName.ToLower();
    switch (typeName)
    {
        case "Gif":
            return ImageType.Gif;
        case "png":
            return ImageType.Png;
        default:
        case "jpg":
            return ImageType.Jpg;
    }
}... 
```

那工作得很好，但是你需要为你拥有的每个枚举编写这样的“解析”方法。Enum 类有它自己的“解析”方法（幸运的是有“IgnoreCase”标志），但没有 TryParse 方法。通常的解决方法是将 Enum.Parse 方法放在 Try & Catch 中，当然，在失败的情况下会产生糟糕的性能。Enum 类还有一个方法“IsDefined”，如果枚举中存在值，则返回指示。不幸的是，这种方法没有“IgnoreCase”标志。

因此，为了将所有这些“知识”放在一起，我为“Enum.TryParse”方法编写了自己的通用版本，该方法也忽略大小写，不使用 try & catch：

```
public static bool EnumTryParse<T>(string strType,out T result)
{
    string strTypeFixed = strType.Replace(' ', '_');
    if (Enum.IsDefined(typeof(T), strTypeFixed))
    {
        result = (T)Enum.Parse(typeof(T), strTypeFixed, true);
        return true;
    }
    else
    {
        foreach (string value in Enum.GetNames(typeof(T)))
        {
            if (value.Equals(strTypeFixed, StringComparison.OrdinalIgnoreCase))
            {
                result = (T)Enum.Parse(typeof(T), value);
                return true;
            }
        }
        result = default(T);
        return false;
    }
} 
```

行'string strTypeFixed = strType.Replace(' ', ' *');' 是因为我从发送带有空格的枚举字符串的第三方 WebService 获取数据，这是枚举中不允许​​的，所以我的枚举有 '* ' 而不是空格。

要解析 ImageType（来自上面的示例），只需像这样使用它：

```
ImageType type;
if (Utils.EnumTryParse<ImageType>(typeName, out type))
{
    return type;
}
return ImageType.Jpg; 
```

# c++ - 使用 notify_listener - libpqxx

> ID：12828447
> 
> 赞同：6
> 
> 时间：2012-10-10T21:13:03.877
> 
> 标签：c++, postgresql, libpqxx

我正在尝试使用[libpqxx](http://pqxx.org/development/libpqxx/)监听通知事件。我从一个扩展的例子开始`pqxx::notify_listener`。

```
#include <iostream>
#include <string>
#include <pqxx/pqxx>

class Foo : public pqxx::notify_listener {

public:
  Foo(pqxx::connection_base &c): pqxx::notify_listener(c, "listen") {}
  virtual void operator()(int id) { std::cout << "HERE!" << std::endl; }
};

int main(void) {
  // set up the listener
  pqxx::connection con("...secret...");
  Foo listener(con);

  // loop forever ...
} 
```

我无法让这个工作。

我尝试将 name 参数切换为
`pqxx::notify_listener(c, "my_schema")`，
`pqxx::notify_listener(c, "listen my_schema")`以及其他一些参数。

我正在通过 pgAdmin 手动创建 NOTIFY 事件。无论我做什么，仿函数都不会被执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:55:32.140

你打电话`pqxx::connection_base::get_notifs()`还是`pqxx::connection_base::await_notification()`在主循环？

如果没有，你需要。

# spring - Spring MVC / Security - “商店已关闭”安全过滤器

> ID：12828451
> 
> 赞同：2
> 
> 时间：2012-10-10T21:13:16.020
> 
> 标签：spring, spring-security

我有一个使用 Spring Security 的 Spring MVC webapp。我想添加“商店已关闭”功能 - 即，如果我将商店设置为关闭，无论用户尝试在我的网站上导航到哪里，他们最终都会在页面上显示“商店已关闭”。

我已经实现了一个安全过滤器，如下所示（并且可以很好地连接它）：

```
public class ClosedFilter extends OncePerRequestFilter {

@Override
protected void doFilterInternal(HttpServletRequest req,
        HttpServletResponse response,
        FilterChain chain) throws ServletException, IOException {

    if(storeIsClosed()) {
        //do something useful here
    }else {
        chain.doFilter(req, response);
            }

}

} 
```

但是我不确定在“//在这里做一些有用的事情”位中放什么。我努力了：

```
throw new StoreIsClosedException();  //extends RuntimeException 
```

但我无法将我的异常映射到我的视图。我也试过

```
response.redirect("myClosedView"); 
```

没有运气。我想要的是概念上的东西：

```
 return new ModelAndView("closed"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:02:26.810

我最终得到了一个解决方案，我将过滤器更改为：

```
public class ClosedFilter extends OncePerRequestFilter {

@Override
protected void doFilterInternal(HttpServletRequest req,
        HttpServletResponse response,
        FilterChain chain) throws ServletException, IOException {

    if (isClosed()) {
        final String path = req.getContextPath()+"/closed.do";
        if(!path.equals(req.getRequestURI())) {
            response.sendRedirect(path);
            return;
        }
    }
    chain.doFilter(req, response);
}

} 
```

然后将其添加到我的 security.xml

```
<intercept-url pattern="/closed.do*" access="permitAll"/> 
```

# java - 声纳安全 - 数组直接存储 :: 为什么只在 ArrayList 中的数组中发出问题？

> ID：12828453
> 
> 赞同：1
> 
> 时间：2012-10-10T21:13:17.650
> 
> 标签：java, sonarqube

我有 4 节课

```
Class A {    
    public void setMyArray(String[] myArray) { 
      this.myArray = myArray; 
    }
}

Class B {    
    public void setMyArrayList(ArrayList myArray) { 
      this.myArray = myArray; 
    }
}
Class C {
  public void setX(int x) { 
  this.myX = x; 
}}
 Class D {    
public void setX(Integer x) { 
  this.x = x; 
} 
```

}

Sonar 报告第一类的问题 Only "Array is stored directly"

但声纳在二等舱没有报告同样的问题。我想知道为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:15:06.840

因为任何人都可以修改外部数组。

使用列表，您可以选择传入一个不可修改的列表来解决该问题，同时如果您愿意，仍然可以轻松地进行外部访问。

所以第二种情况确实存在问题，但它不太常见，并且更容易避免。

使用原始数组还有其他问题。如果阵列需要增长，并且您还需要外部访问，那么您将不再拥有它 - 它们指向旧阵列，而不是您的新扩展阵列。有了一个列表，这一切都被封装了。

# cad - EAGLE 6.3 包含基本部件的库

> ID：12828456
> 
> 赞同：-2
> 
> 时间：2012-10-10T21:13:42.957
> 
> 标签：cad

您好，我已经有一段时间没有使用 EAGLE 并且几乎忘记了在哪里可以获得任何好的和完整的基本部件库，如电阻器、LED、晶体管......我试图在[EAGLE 网页上](http://www.cadsoftusa.com/downloads/libraries)找到我需要的库，但我还没有找到任何可以提供大量基本部件的东西。

如果有人能将我指向一个包含大量基本部件的图书馆，他真的会节省我的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:21:59.400

Sparkfun Eagle 库非常好。在[https://github.com/sparkfun/SparkFun-Eagle-Libraries下载](https://github.com/sparkfun/SparkFun-Eagle-Libraries)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T08:33:50.157

亲爱的，您可以使用“ORCAD”软件而不是使用 EAGLE，因为它易于使用且易于在网上获取其库。

# jquery - 将json保存在数组中

> ID：12828457
> 
> 赞同：0
> 
> 时间：2012-10-10T21:13:42.480
> 
> 标签：jquery, ajax

我怎样才能转换这个json

```
{
    "dates": [
        "12-10-2012",
        "12-11-2012",
        "13-11-2012",
        "22-11-2012",
        "23-11-2012",
        "2-12-2012"
    ]
} 
```

成这样的数组

```
var array = ["12-10-2012", "12-11-2012", "13-11-2012", "22-11-2012", "23-11-2012", "2-12-2012"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:22:03.637

你想要做的就是解析。某些浏览器，例如 Chrome 具有此本机功能

```
 var obj = JSON.parse(string) 
```

但是如果你使用 jQuery，你可以使用

```
var obj = $.parseJSON(string) 
```

这会给你一个对象。然后你可以做

```
obj.dates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:15:03.470

你所拥有的是一个包含数组的对象。您所要做的就是使用 key 获取对象的值`dates`。

假设为如下数据定义了一个 var，

```
var data = {
    "dates": [
        "12-10-2012",
        "12-11-2012",
        "13-11-2012",
        "22-11-2012",
        "23-11-2012",
        "2-12-2012"
    ]
} 
```

然后`data['dates']`将返回您该数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:17:30.383

只需使用日期变量本身

```
var json = { ... your json ...}
var array = json.dates; 
```

json 中的 dates 属性已经是一个数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:19:38.017

解析 JSON 并获取`dates`属性：

```
var array = $.parseJSON(theJsonString).dates; 
```

# php - 即使未填写所有字段也提交表单

> ID：12828461
> 
> 赞同：4
> 
> 时间：2012-10-10T21:13:52.223
> 
> 标签：php, html, sql

我是 php 新手，我不太明白为什么在所有情况下都提交此表单......所以我的问题是：

如何解决此问题，以便仅在用户填写所有字段时提交表单？

```
if (!$_POST['username'] && !$_POST['password'] && !$_POST['repassword'] 
&& !$_POST['user_firstname'] && !$_POST['user_lastname'] ){
header('Location: register.php?msg=You did not complete all of the required fields');
} 
```

我同时使用了`&&`和`||`运算符，但是无论您填写什么字段，它总是提交。

```
<form action="createuser.php" method="post" name="registration_form" id="registration_form">
<label>Email</label>
<input name="username" type="text" id="username" size="50" maxlength="50" /><br />
<label>First Name</label>
<input name="user_firstname" type="text" id="user_firstname" size="50" maxlength="50" /><br />
<label>Last Name</label>
<input name="user_lastname" type="text" id="user_lastname" size="50" maxlength="50" /><br />
<label>Password</label>
<input name="password" type="password" id="password" size="50" maxlength="100" /><br />
<label>Re-type Password</label>
<input name="repassword" type="password" id="repassword" size="50" maxlength="100" /><br />

<input type="submit" value="Register" name="submit" /> 
```

在此先感谢您的帮助，这似乎是一个很棒的社区！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:19:11.850

```
if (empty($_POST['username'])
    || empty($_POST['password'])
    || empty($_POST['repassword'])
    || empty($_POST['user_firstname'])
    || empty($_POST['user_lastname'])
    ){
header('Location: register.php?msg=You did not complete all of the required fields');
} 
```

编辑：的确，正如评论所暗示的，验证需要比这更重要。检查后重定向不是一个好主意，而是尝试将表单发布到自身。如果没有任何错误，则继续处理表单数据，如果有错误将它们设置在变量/对象/数组中并将它们显示在表单上/使用发布数据重新填充表单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:21:14.063

( `!`not) 运算符最适用于布尔值，但您的所有值都是字符串。代替：

```
!$_POST['username'] 
```

尝试：

```
!empty($_POST['username']) 
```

如果您想在所有字段都已满时执行某些操作，这就是 codi：

```
if (!empty($_POST['username']) && 
   !empty($_POST['password']) && 
   !empty($_POST['repassword']) && 
   !empty($_POST['user_firstname']) &&
   !empty($_POST['user_lastname']) ){
    header('Location: register.php?msg=You completed all of the required fields');
} 
```

如果您想在至少一个字段为空时执行某些操作，请尝试：

```
if (empty($_POST['username']) || 
       empty($_POST['password']) || 
       empty($_POST['repassword']) || 
       empty($_POST['user_firstname']) ||
       empty($_POST['user_lastname']) ){
        header('Location: register.php?msg=You did not complete all of the required fields');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:19:53.127

因为您使用的是`&&`(and)，这意味着所有条件都必须为真。使用`||`（或），这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:23:28.760

您正在使用 && ，只有在所有条件都为真时才为真 - 也就是说，您仅在未设置**任何**值的情况下进行重定向。如果您想在其中**任何**一个未设置的情况下支持它，您会说`!A || !B || !C ||...`or `!(A && B && C && ...)`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T21:16:10.433

表单的行为与设计的完全一样。

您需要使用 JavaScript 来验证您的表单：

```
<input type="button" onclick="val()" value="Register" name="submit" /> 
```

JS：

```
function val() {
    ///your validation code.

} 
```

有很多表单验证脚本和插件可用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-10T21:17:30.903

尝试

```
if(empty($_POST['item'])) && ... 
```

# sql - 字符串或二进制数据将被截断。-- 即使长度比字段长度短

> ID：12828465
> 
> 赞同：3
> 
> 时间：2012-10-10T21:14:07.370
> 
> 标签：sql, sql-server, tsql

尝试使用 UPDATE 命令为表上的字符串字段添加前缀。出于某种原因，我得到了

> 字符串或二进制数据将被截断。

例外，即使我的数据长度很容易适合该字段。

使用 SQL Server 2008 R2 标准版和 SSMS 2008 R2。

~~模板：Learner 是 nvarchar(60)~~

**模板：Learner 是一个使用 60 个字节的 nvarchar(30)，如 sp_help 中所示**

```
select LEN('Aaaaaaaa' + LEFT(learner, 52)) myLen from Template order by myLen desc
>>> max len = 31

update Template set learner = 'Aaaaaaaa' + LEFT(learner, 52)
>>> String or binary data would be truncated.

update Template set learner = 'Aaaaaaaa' + LEFT(learner, 52)
>>> String or binary data would be truncated.

update Template set learner = CAST('Aaaaaaaa' + LEFT(learner, 52) AS NVARCHAR(60))
>>> String or binary data would be truncated. 
```

而以下工作：

```
SELECT CAST('Aaaaaaaa' + LEFT(learner, 52) AS NVARCHAR(60)) FROM Template 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:26:14.623

您可以尝试通过以下方式忽略此消息

```
SET ANSI_WARNINGS OFF
update ...
SET ANSI_WARNINGS ON 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T19:34:16.370

感谢您的回复。

看起来我被**sp_help**和**sp_columns**的长度值愚弄了。由于它是 NVARCHAR 列，因此长度是指以字节为单位的长度，而不是字符数。这是因为 NVARCHAR = Unicode (UTF-16) => 每个字符 2 个字节。

查看**CREATE**脚本揭示了真相。sp_columns 上的 PRECISION 字段也显示字符数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T10:21:50.507

我的问题是有另一个日志表（用于审计跟踪），由主表上的触发器填充，其中列大小也必须更改。

# c - 检测没有 CUDA 的 NVIDIA GPU

> ID：12828468
> 
> 赞同：7
> 
> 时间：2012-10-10T21:14:33.070
> 
> 标签：c, cuda

我想在不链接 CUDA 库的情况下提取一组相当有限的关于 NVIDIA GPU 的信息。唯一*需要*的信息是GPU 的计算能力和名称，这些信息可能有用但不是必需的。代码应该用 C（或 C++）编写。该信息将在配置时（当 CUDA 工具包不可用时）和运行时（当执行的二进制文件未使用 CUDA 支持编译时）用于向用户建议系统中存在受支持的 GPU。

据我了解，这可以通过驱动程序 API 实现，但我不太熟悉这需要什么技术细节。所以我的问题是：

*   至少满足最低要求的具体步骤是什么（见上文）；

*   有这样的开源代码吗？

请注意，我的第一步是为 Linux 编写一些代码，但最终我需要独立于平台的代码。考虑到 CUDA 的平台可用性，对于一个完整的解决方案，这将涉及适用于 Linux、Mac OS 和 Windows 的 x86/AMD64 上的代码（至少目前，该列表可能很快会通过 ARM 扩展）。

**编辑**

我所说的“可以通过驱动程序 API”的意思是应该能够动态加载 libcuda.so 并通过驱动程序 API 查询设备属性。不过，我不确定细节。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T07:30:35.163

不幸的是，NVML 不提供有关设备计算能力的信息。

你需要做的是：

1.  手动加载 CUDA 库（应用程序未链接到 libcuda）
    *   如果库不存在，则未安装 CUDA 驱动程序
2.  在库中找到指向必要函数的指针
3.  使用驱动 API 查询可用 GPU 的信息

我希望这段代码会有所帮助。我已经在 Linux 下对其进行了测试，但稍作修改它也应该在 Windows 下编译。

```
#include <cuda.h>
#include <stdio.h>

#ifdef WINDOWS
#include <Windows.h>
#else
#include <dlfcn.h>
#endif

void * loadCudaLibrary() {
#ifdef WINDOWS
    return LoadLibraryA("nvcuda.dll");
#else
    return dlopen ("libcuda.so", RTLD_NOW);
#endif
}

void (*getProcAddress(void * lib, const char *name))(void){
#ifdef WINDOWS
    return (void (*)(void)) GetProcAddress(lib, name);
#else
    return (void (*)(void)) dlsym(lib,(const char *)name);
#endif
}

int freeLibrary(void *lib)
{
#ifdef WINDOWS
    return FreeLibrary(lib);
#else
    return dlclose(lib);
#endif
}

typedef CUresult CUDAAPI (*cuInit_pt)(unsigned int Flags);
typedef CUresult CUDAAPI (*cuDeviceGetCount_pt)(int *count);
typedef CUresult CUDAAPI (*cuDeviceComputeCapability_pt)(int *major, int *minor, CUdevice dev);

int main() {
    void * cuLib;
    cuInit_pt my_cuInit = NULL;
    cuDeviceGetCount_pt my_cuDeviceGetCount = NULL;
    cuDeviceComputeCapability_pt my_cuDeviceComputeCapability = NULL;

    if ((cuLib = loadCudaLibrary()) == NULL)
        return 1; // cuda library is not present in the system

    if ((my_cuInit = (cuInit_pt) getProcAddress(cuLib, "cuInit")) == NULL)
        return 1; // sth is wrong with the library
    if ((my_cuDeviceGetCount = (cuDeviceGetCount_pt) getProcAddress(cuLib, "cuDeviceGetCount")) == NULL)
        return 1; // sth is wrong with the library
    if ((my_cuDeviceComputeCapability = (cuDeviceComputeCapability_pt) getProcAddress(cuLib, "cuDeviceComputeCapability")) == NULL)
        return 1; // sth is wrong with the library

    {
        int count, i;
        if (CUDA_SUCCESS != my_cuInit(0))
            return 1; // failed to initialize
        if (CUDA_SUCCESS != my_cuDeviceGetCount(&count))
            return 1; // failed

        for (i = 0; i < count; i++)
        {
            int major, minor;
            if (CUDA_SUCCESS != my_cuDeviceComputeCapability(&major, &minor, i))
                return 1; // failed

            printf("dev %d CUDA compute capability major %d minor %d\n", i, major, minor);
        }
    }
    freeLibrary(cuLib);
    return 0; 
} 
```

在 Linux 上测试：

```
$ gcc -ldl main.c
$ ./a.out
dev 0 CUDA compute capability major 2 minor 0
dev 1 CUDA compute capability major 2 minor 0 
```

在没有 CUDA 驱动程序的 linux 上测试

```
$ ./a.out
$ echo $?
1 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T08:24:07.963

首先，我认为[NVIDIA NVML](http://developer.nvidia.com/cuda/nvidia-management-library-nvml)是您正在寻找的 API。其次，有一个基于 NVML 的开源项目，称为[PAPI NVML](http://icl.cs.utk.edu/papi/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T23:59:20.567

这些人肯定知道答案：

[http://www.ozone3d.net/gpu_caps_viewer](http://www.ozone3d.net/gpu_caps_viewer)

但我只能知道我可以通过安装 CUDA 或 OpenCL 来完成。

我认为一种方法可以直接使用 OpenGL，也许这就是您使用驱动程序 API 谈论的内容，但我只能给您这些示例（需要 CUDA）：

[http://www.naic.edu/~phil/hardware/nvidia/doc/src/deviceQuery/deviceQuery.cpp](http://www.naic.edu/~phil/hardware/nvidia/doc/src/deviceQuery/deviceQuery.cpp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-11T08:50:42.840

我通过使用和静态链接 CUDA 6.0 SDK 解决了这个问题。它生成的应用程序在没有 NVIDIA 卡的机器或未安装 SDK 的机器上也能正常工作。在这种情况下，它将表明支持 CUDA 的设备为零。

CUDA SDK 附带的示例中有一个名为*deviceQuery*的示例- 我使用其中的片段来编写以下代码。我决定是否存在支持 CUDA 的设备，如果存在，哪些设备具有最高的计算能力：

```
#include <cuda_runtime.h>

struct GpuCap
{
    bool QueryFailed;           // True on error
    int  DeviceCount;           // Number of CUDA devices found 
    int  StrongestDeviceId;     // ID of best CUDA device
    int  ComputeCapabilityMajor; // Major compute capability (of best device)
    int  ComputeCapabilityMinor; // Minor compute capability
};

GpuCap GetCapabilities()
{
    GpuCap gpu;
    gpu.QueryFailed = false;
    gpu.StrongestDeviceId = -1;
    gpu.ComputeCapabilityMajor = -1;
    gpu.ComputeCapabilityMinor = -1;

    cudaError_t error_id = cudaGetDeviceCount(&gpu.DeviceCount);
    if (error_id != cudaSuccess)
    {
        gpu.QueryFailed = true;
        gpu.DeviceCount = 0;    
        return gpu;
    }

    if (gpu.DeviceCount == 0)
        return gpu; // "There are no available device(s) that support CUDA

    // Find best device
    for (int dev = 0; dev < gpu.DeviceCount; ++dev)
    {
        cudaDeviceProp deviceProp;
        cudaGetDeviceProperties(&deviceProp, dev);
        if (deviceProp.major > gpu.ComputeCapabilityMajor)
        {
            gpu.ComputeCapabilityMajor = dev;
            gpu.ComputeCapabilityMajor = deviceProp.major;
            gpu.ComputeCapabilityMinor = 0;
        }
        if (deviceProp.minor > gpu.ComputeCapabilityMinor)
        {
            gpu.ComputeCapabilityMajor = dev;
            gpu.ComputeCapabilityMinor = deviceProp.minor;
        }
    }
    return gpu;
} 
```

# jquery - 是否可以使用 jQuery 在另一个元素中嵌入 iframe 容器

> ID：12828471
> 
> 赞同：0
> 
> 时间：2012-10-10T21:14:42.760
> 
> 标签：jquery, iframe

是否可以使用 jQuery 将 iframe 容器动态包装在另一个容器中？

从 <iframe> 到 <iframe>

iframe 已经在页面上。只是弄清楚当 DOM 准备好或 Window 准备好时如何包装它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:21:52.817

绝对地。使用 jQuery，您可以使用 div 包装 iframe，例如：

[http://jsfiddle.net/PBaTu/](http://jsfiddle.net/PBaTu/)

# c - 从文件中读取字符串并将字符串存储到 C 中的多维字符串数组中

> ID：12828473
> 
> 赞同：0
> 
> 时间：2012-10-10T21:14:47.080
> 
> 标签：c, arrays, function-pointers, c-strings, function-parameter

我真的需要知道如何解决这个问题。

我有一个被读取的文件，我将文件中的字符串存储到一个作为参数传递的数组中，但我不知道如何使它工作。

当我打印数组的内容时，它会说`null`。那么如何将多维字符串`readfiles()`数组传递给并使其将字符串保存在作为参数传递的数组中，每个字符串都在一个位置？

谢谢您的帮助。

```
#include <unistd.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <stdio.h>
#include <strings.h>

#define max_chars_string 10000
#define n_strings 100

int main(int argc, char **argv)
{
    char *filename;
        char strings_hashes[n_strings][max_chars_string];
        char * pointer_string = &strings_hashes[0][0]; 
    int n_lines;
    int i = 0;

    filename = (char*)malloc(strlen(argv[1])*sizeof(char));

    if(argc !=3){
        fprintf(stderr, "Usage : %s [text_file] [cores]",argv[0]);
        exit(0);
    }

    strcpy(filename,argv[1]);
    read_lines(filename,pointer_string); 
    for(i = 0; i<n_lines;i++){
        printf("%s \n",strings_hashes[i][max_chars_string]);
    }

  return 0;
}

void read_lines(char * filename, char *pointer){ 
    FILE *fp;
    char str[max_chars_string];
    int i =0;

    if((fp = fopen(filename, "r"))==NULL) {
      printf("Cannot open file.\n");
      exit(1);
    }

    while(!feof(fp)) {
        while(fgets(str, sizeof str, fp)) {
           strcpy(pointer, str);
           printf("%s", str);
           pointer++;
           i++;
      }

  }
  fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:30:26.080

改变

```
void read_lines(char * filename, char *pointer){ 
```

至

```
void read_lines(char * filename, char (*pointer)[max_chars_string]){ 
```

(`pointer`的类型需要是“指向`max_chars_string` `char`s数组的指针”。当使用指针访问多维数组时，指针类型需要知道除了最外面的维度之外的所有维度，这样它就知道递增时要跳过多远.)

改变

```
strcpy(pointer, str); 
```

至

```
strcpy(*pointer, str); 
```

现在称它为

```
read_lines(filename,strings_hashes); 
```

（这相当于下面的，可能更清楚：）

```
read_lines(filename,&string_hashes[0]); 
```

最后，你想打印一个字符串而不是单个字符，所以使用

```
printf("%s \n",strings_hashes[i]); 
```

# asp.net - IIS 中默认阻止哪些文件扩展名

> ID：12828476
> 
> 赞同：8
> 
> 时间：2012-10-10T21:15:01.363
> 
> 标签：asp.net, .net, asp.net-mvc, iis

某些文件不是由 IIS 提供的，因为它们通常是网站本身构建块的一部分。对于 ASP.NET，这些是 *.cs、*.dll、*.config、*.cshtml 等文件。

您可以在此处的 IIS 管理设置“过滤请求”中找到它们的列表：

![过滤请求](../Images/3ba44922029b3a93c8b89dcfc9f2690e.png)

但是，如果您需要以编程方式访问此列表，似乎很难找到。这些默认扩展是否有一个很好的列表？

顺便说一句，IIS 网站提供了有关如何在此处全局启用/禁用这些的信息：

[http://www.iis.net/configreference/system.webserver/security/requestfiltering/fileextensions](http://www.iis.net/configreference/system.webserver/security/requestfiltering/fileextensions)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T22:42:55.417

如果我没记错的话，你会在机器的*根目录* `web.config`中找到它们：

> %windir%\Microsoft.NET\Framework\framework_version\CONFIG

这也是您可以找到该`machine.config`文件的地方。

例如

```
<add path="*.ascx" verb="*" type="System.Web.HttpForbiddenHandler" validate="True" /> 
```

参考：

*   Technet：[使用配置文件](http://technet.microsoft.com/en-us/library/cc754617%28v=ws.10%29.aspx)
*   KB：[使用 ASP.NET 保护文件类型](http://support.microsoft.com/kb/815152)

至于您如何以*编程*方式实现它-我还没有尝试过。IIS_USRS内置组可以访问它，并且[此文档](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)**对其**进行了扩展。

嗯...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T21:15:01.363

这是我从 IIS UI 构建的列表，因为我在任何地方都找不到它。希望对您有所帮助。

不允许的扩展

```
.asax
.ascx
.master
.skin
.browser
.sitemap
.config
.cs
.csproj
.vb
.vbproj
.webinfo
.licx
.resx
.resources
.mdb
.vjsproj
.java
.jsl
.ldb
.dsdgm
.ssdgm
.lsad
.ssmap
.cd
.dsprototype
.lsaprototype
.sdm
.sdmDocument
.mdf
.ldf
.ad
.dd
.ldd
.sd
.adprototype
.lddprototype
.exclude
.refresh
.compiled
.msgx
.vsdisco
.rules 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T19:07:54.363

在 localhost 上，您可以更改 applicationHost.config 文件，这是一个可以在 VS 中编辑的系统文件，然后转到 requestFiltering 部分，更改并保存。

# c - 指针改变值

> ID：12828477
> 
> 赞同：1
> 
> 时间：2012-10-10T21:15:02.427
> 
> 标签：c

> **可能重复：**
> [C Treenode 指针使用全局变量更改值](https://stackoverflow.com/questions/12833269/c-treenode-pointers-changing-values-with-globals)

我有一个程序正在创建一个充满各种位的节点树（它实际上是一个递归下降解析器）。无论如何，当我走到最后时，我将一个指针分配给我的程序当前所在的第一个“令牌”。我将该节点的“子节点”分配为等于包含作为令牌的数据的新节点。

所以，然后我的程序继续。也就是说，它将全局“令牌”更改为下一个值。

然后我遇到的问题是指向适当数据的树节点现在也发生了变化。

也就是说，假设程序正在标记一个像这样的简单字符串。

```
firstvar = 1 
```

所以，最初这棵树说`program->assignStmt->{identifier; firstvar}`

但是随后，程序转到下一个标记，所以现在当前的全局标记是`{assignment; =}`，而不是 assignStmt 树节点继续具有值`{identifier; firstvar}`，它现在具有值`{assignment; =}`。指针没有保留值！

希望这是你们可以在逻辑上指出我的东西。

编辑（下午 2 点 30 分）:: OKAY ... 这是一些代码

```
typedef struct node {
    TOKEN *data;

    struct node *child1, *child2, *child3, *child4, *parent;

} node;

TOKEN *token;
Symbol sym;
struct node *root;

void getsym() 
{
    token = getNextToken();
    sym = token->sym;
}

int main()
{
    getsym();
    //So, right now, from getsym() the global token has the value {identifier; firstvar} 

    struct node* tempNode;
    tempNode = (struct node*) calloc(1, sizeof(struct node));
    tempNode->child1 = tempNode->child2 = tempNode->child3 = tempNode->child4 =  NULL;
    tempNode->data = token;

    getsym();
    //BUT NOW from getsym() the global token has the value {assignment; =}, and 
    //subsequently the tempNode->data has changed from what it should be 
    //{identifier; firstvar} to what the global token's new value is: {assignment; =}

} 
```

# c# - 将完整模型从视图传递回控制器

> ID：12828486
> 
> 赞同：1
> 
> 时间：2012-10-10T21:15:26.933
> 
> 标签：c#, asp.net-mvc

有没有办法将完整的模型从视图传递回控制器（请不要使用 JSON）？我的模型是一个列表，例如 `List<ExmapleClass>`

我希望能够将它传回控制器，排序，然后将其传回要显示的视图，这样我就不必返回数据库来获取原始数据。

我想在构造函数中将列表作为（类）成员变量将消除来回传递模型的需要，但是我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:21:40.190

从概念上讲，在单个请求的服务中，从控制器到视图的通信是一种方式。控制器决定要渲染的视图，将模型传递给它，并且执行永远不会传回控制器。

您可以从视图中执行子操作，这可能会实现类似于您所追求的东西，但根据您的问题尚不清楚。

如果您谈论的是在与用户交互时发生的通信，那么您可以使用 TempData 来实现类似的事情，其中​​视图将信息存储在 TempData 中以供下一个执行的控制器使用。

如果您担心基于必须重复查询数据源的性能，我强烈建议您考虑如何在服务或数据访问层中缓存这些数据，而不是尝试使用视图/控制器交互作为缓存方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:43:07.787

它可以通过隐藏字段来完成，就像我在这里发布的那样：[Saving multiple records on submit click into differententities in MVC4。没有从 Controller 的视图中获取值](https://stackoverflow.com/questions/12768683/saving-multiple-records-on-submit-click-into-differnt-entities-in-mvc4-not-gett/12768833#12768833)，但是如果您不需要视图上的这些数据，缓存是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:48:41.453

将所有数据发送回服务器会占用大量带宽。我认为使用 JQuery/javascript 并直接在客户端对数据进行排序会更容易和更快。如果您必须将数据发送到服务器端，您可以使用 XML，但不确定是否可以通过使用 XML 获得任何好处。

以下是一些客户端排序器：http: [//tablesorter.com/docs/](http://tablesorter.com/docs/) http://www.sendesignz.com/index.php/jquery/76-how-to-sort-items-using-jquery

# performance - 如何在 PerfView 中看到我昂贵的方法

> ID：12828491
> 
> 赞同：3
> 
> 时间：2012-10-10T21:15:40.677
> 
> 标签：performance, .net-4.0, perfview

我创建了一个简单的控制台应用程序并通过运行命令从 PerfView 执行它 -> PerfMonTest.exe

我得到日志文件并查看应用程序的进程。正如预期的那样昂贵（99% CPU），但是当我想深入研究昂贵的方法时，它们不会显示在昂贵的方法列表中。

我能做些什么让它们可见吗？

这是我选择流程时的视图。我希望列表中有 CallExpensive 和 CallCheap：

![在此处输入图像描述](../Images/9be9dc819c4a114ea583f49f90e4d295.png)

选择主要方法并没有让我有机会进一步研究被调用的方法

![在此处输入图像描述](../Images/456118b244495dc8e48a470b5bb60054.png)

这是应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace PerfMonTest
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = 0; i <= 2000; i++)
            {
                CallExpensive(1000);
                CallCheap(1000);
                CallCheap(400);
            }

        }

        public static void CallExpensive(int expense)
        {
            for (int i = 0; i <= expense; i++)
            {
                DateTime checkTime = DateTime.Now;
                string val = "10" + i.ToString();
            }
        }

        public static void CallCheap(int expense)
        {
            for (int i = 0; i <= expense; i++)
            {
                int j = 2;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:17:59.803

从屏幕截图看起来，您没有加载符号。如果你这样做，你会发现大部分时间都花在了`DateTime.Now`.

如果您`Main`在*By Name*视图中单击，您将转到*Callers*视图，它会告诉您哪些方法调用了`Main`. 如果您想深入了解`Main`正在调用的方法，您需要转到*Callees*视图。`Main`如果你这样做，你会看到调用的分解。

但是，在这种特殊情况下，`CallExpensive`and的逻辑`CallCheap`非常简单，以至于方法将被内联（在发布模式下）。因为方法是内联的，所以它们不会作为调用的一部分出现，`Main`因为代码已经折叠到`Main`自身中。

您可以通过在方法运行后附加调试器来验证方法是否已内联，并查看该类型的方法描述符。这是我得到的输出：

```
0:004> !dumpmt -md 004737c0
EE类：00471278
模块：00472e94
名称：ConsoleApplication1.Program
mdToken：02000002
文件：C:\temp\ConsoleApplication1\ConsoleApplication1\bin\Release\ConsoleApplication1.exe
基数：0xc
组件大小：0x0
VTable 中的插槽：8
IFaceMap 中的 IFace 数量：0
--------------------------------------
方法描述表
   输入方法De JIT 名称
72064a00 71d66728 PreJIT System.Object.ToString()
72058830 71d66730 PreJIT System.Object.Equals(System.Object)
72058400 71d66750 PreJIT System.Object.GetHashCode()
72051790 71d66764 PreJIT System.Object.Finalize()
0047c01d 004737b8 无 ConsoleApplication1.Program..ctor()
004d0050 00473794 JIT ConsoleApplication1.Program.Main(System.String[])
0047c015 004737a0 无 ConsoleApplication1.Program.CallExpensive(Int32)
0047c019 004737ac 无 ConsoleApplication1.Program.CallCheap(Int32)

```

并列在 JIT 列中的事实表明它们是内联的（或根本没有调用，但这里不是这种`CallExpensive`情况）`CallCheap`。`NONE`

# java - Android：共享首选项。如何正确实施它们

> ID：12828502
> 
> 赞同：2
> 
> 时间：2012-10-10T21:16:12.657
> 
> 标签：java, android, sharedpreferences

我正在尝试将用户条目存储到 EditText 字段中，但是当我退出应用程序时它不会出现。

例如，用户输入他/她的姓名，然后退出应用程序。当用户返回并启动应用程序时，用户名出现在 EditText 字段中。但是我无法让它工作。我相信它与 sharedPreferences 有关，但我不确定我哪里出错了。

我对 android 和 java 很陌生，所以发现这很困难。任何帮助将非常感激。

```
public class MainActivity extends Activity {
     public final static String EXTRA_FROM = "com.example.assignment1.FROM";

     @Override
        protected void onSaveInstanceState(Bundle outState)
        {
            super.onSaveInstanceState(outState);
            EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
            String from = emailFrom.getText().toString();
            outState.putString(EXTRA_FROM, from);
        }

        @Override
        protected void onRestoreInstanceState(Bundle savedState)
        {

            EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
            String from = savedState.getString(EXTRA_FROM);
            emailFrom.setText(from);

        }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void emailSend (View sendButton) 
    {
        Intent intent = new Intent(this,DisplayEmailActivity.class);

        EditText emailFrom =(EditText) findViewById(R.id.editEmailFrom);
        String from = emailFrom.getText().toString();
        intent.putExtra(EXTRA_FROM,from);

        SharedPreferences saveFrom = getSharedPreferences(EXTRA_FROM, MODE_PRIVATE);
        Editor editor = saveFrom.edit();
        editor.putString(EXTRA_FROM, from);
        editor.commit();

        String storedfrom = saveFrom.getString(EXTRA_FROM, from);
        emailFrom.setText(storedfrom);

        startActivity(intent);
    } 
```

第二次活动

```
 public class DisplayEmailActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_display_email);

            Intent intent = getIntent();

            String from = intent.getStringExtra(MainActivity.EXTRA_FROM);
            TextView textFrom =(TextView)findViewById(R.id.displayEmailFrom);
            textFrom.setText(from);

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_display_email, menu);
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:40:32.580

好的，所以在您将值存储在 中之后`EditText emailFrom`，您必须将其保存在 SharedPreferences 中，如下所示：

```
String from = emailFrom.getText().toString(); // Getting String value from EditText and storing it in "from" String
SharedPreferences settings = getSharedPreferences("MyPreferencesFile", 0); // Opening SharedPreferences 
SharedPreferences.Editor editor = settings.edit(); // Opening editor for SharedPreferences
editor.putString("exampleName", from); // You are putting here a String "from" and give it a "exampleName" name. Later you will use this name to restore data. 
```

然后当您启动应用程序时，您需要从 SharedPreferences 加载数据：

```
SharedPreferences settings = getSharedPreferences("MyPreferencesFile", 0); // Again opening SharedPreferences
String from = settings.getString("exampleName", ""); // The second argument is the default value. The default value will be set if there wasn't saved any data with "exampleName" name
if(from != "") // If "from" is not empty, it means that the data was stored in SharedPreferences
   emailFrom.setText(from); // Setting text in your EditText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:43:33.073

您正在使用`onSaveInstanceState()`and`onRestoreInstanceState()`来保存和恢复 EditText 的内容。但是，仅当应用程序被操作系统终止以立即重新创建（即设备旋转）时，才会调用此方法。

如果您想在用户终止应用程序时保留值，您需要将其存储在某个地方、一个文件、一个数据库，或者在您的情况下，我建议使用 SharedPreferences。

我已在以下位置发布了对类似问题的答案：[SharePreferences](https://stackoverflow.com/questions/12532476/permanently-adding-an-item-to-an-existing-alertdialog/12533138#12533138)

祝你好运。

# python - 休眠函数的 Python C 扩展

> ID：12828503
> 
> 赞同：2
> 
> 时间：2012-10-10T21:16:14.513
> 
> 标签：python, c

我正在为 GPIO 驱动程序提供的功能编写[Python 扩展。](http://docs.python.org/extending/extending.html)我在 set_bit() 和 clear_bit() 等简单函数上取得了相当大的进展。但是现在我需要实现 wait_int()，它会一直休眠，直到在输入引脚上感应到一个事件，我不确定在 c 和 python 之间编排它的正确方法。这是在 c 中使用该函数的精简示例：

```
main(int argc, char *argv[])
{
    int c;

    //some setup like testing port availability, clearing interrupts, etc
    ...

    while(1)
    {
        printf("**\n");
        c = wait_int(1);//sleeps until an interrupt occurs on chip 1
        if(c > 0) {
            printf("Event sense occured on Chip 1 bit %d\n",c);
            ++event_count;
        }
        else
            break;
    }

    printf("Event count = %05d\r",event_count);
    printf("\nExiting Now\n");
} 
```

我是否只是直接暴露 wait_int ，然后执行无限循环的 python 等效习语？还有一些需要做的去抖动。我已经在 c 中完成了它，但也许它可以移动到 python 端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:41:02.457

你不需要在 Python 端做任何事情，你可以把它当作一个同步函数。在 C 端，您只需阻塞直到事件发生，可能允许中断。例如，看一下函数的[实现](http://hg.python.org/cpython/file/73e7bebb3aa4/Modules/timemodule.c#l1518)[`time.sleep`](http://docs.python.org/library/time.html#time.sleep)：

```
/* LICENSE: http://docs.python.org/license.html */

/* Implement floatsleep() for various platforms.
   When interrupted (or when another error occurs), return -1 and
   set an exception; else return 0\. */

static int
floatsleep(double secs)
{
/* XXX Should test for MS_WINDOWS first! */
#if defined(HAVE_SELECT) && !defined(__BEOS__) && !defined(__EMX__)
    struct timeval t;
    double frac;
    frac = fmod(secs, 1.0);
    secs = floor(secs);
    t.tv_sec = (long)secs;
    t.tv_usec = (long)(frac*1000000.0);
    Py_BEGIN_ALLOW_THREADS
    if (select(0, (fd_set *)0, (fd_set *)0, (fd_set *)0, &t) != 0) {
#ifdef EINTR
        if (errno != EINTR) {
#else
        if (1) {
#endif
            Py_BLOCK_THREADS
            PyErr_SetFromErrno(PyExc_IOError);
            return -1;
        }
    }
    Py_END_ALLOW_THREADS
#elif defined(__WATCOMC__) && !defined(__QNX__)
    ... 
```

它所做的只是使用该`select`功能在给定的时间段内休眠。 `select`用于如果收到任何信号（例如`SIGINT`在终端上按 Ctrl+C），系统调用将被中断，控制权返回给 Python。

因此。您的实现可以只调用 C`wait_int`函数。如果它支持被信号打断，那就太好了，这将允许用户通过按 Ctrl+C 来打断它，但请确保做出适当的反应，以便引发异常（我不确定它是如何工作的，但是看起来`NULL`从顶级函数（`time_sleep`在本例中）返回就可以了）。

同样，为了获得更好的多线程性能，请使用一对`Py_BEGIN_ALLOW_THREADS`/`Py_END_ALLOW_THREADS`宏围绕等待调用，但这不是必需的，尤其是在您根本不使用多线程的情况下。

# objective-c - 将不可变数组传递给可变属性

> ID：12828506
> 
> 赞同：0
> 
> 时间：2012-10-10T21:16:22.307
> 
> 标签：objective-c, ios, immutability, nsmutabledictionary

在我的`prepareForSegue`方法中，我将从 NSUserDefaults 检索到的不可变数组传递给 DetailViewController 可变字典属性。我是否需要在修改数组之前创建数组的可变副本，还是在 NSMutableDictionary 类设置器方法中自动发生这种情况？

我的代码...

视图控制器.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"EditReminder"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        DetailViewController *detailViewController = [[navigationController viewControllers] objectAtIndex:0];
        detailViewController.delegate = self;
        [detailViewController setTitle:@"Edit Reminder"];
        // Pass ReminderData to detailVC if editing
        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
        NSArray *remindersArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"reminders"];
        detailViewController.reminderData = [remindersArray objectAtIndex: selectedRowIndex.row];
    }
} 
```

DetailViewController.h

```
@property (strong, nonatomic) NSMutableDictionary *reminderData; 
```

细节视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if (self.reminderData) {
        // Reminder data from user defaults is immutable. Create mutable copy.
        // Is this necessary?
        self.reminderData = [self.reminderData mutableCopy];
    }
    else {
        self.reminderData = [[NSMutableDictionary alloc] init];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:25:20.830

您需要创建可变副本，但您的实现是错误的。

在`prepareForSegue`中，您需要执行`mutableCopy`，否则您的属性中已经存储了错误的对象。没有理由这样做，`viewDidLoad`它可以被认为是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:20:04.863

是的，您肯定需要创建一个可变副本，如此处所示。如果您将`NSDictionary`(immutable)的实例分配给`NSMutableDictionary`-valued 属性，编译器可能不会抱怨，但是在存储的对象上调用任何变异方法都会导致运行时异常。语言或框架中没有任何魔法可以使分配给可变类型变量的不可变集合自动可变。

此外，正如另一个答案中所述，您应该在第一次分配属性时（在 中`prepareForSegue`）执行可变副本，而不是稍后。

# maven - 为什么 nexus 索引不列出快照 jar？

> ID：12828510
> 
> 赞同：0
> 
> 时间：2012-10-10T21:16:25.660
> 
> 标签：maven, nexus, maven-indexer

Nexus 索引为我的快照列出了 pom、zip、test.jar、sources.jar 和 docs.zip，但没有列出 jar 工件。

*   存储的 Nexus 视图显示了 jar
*   Maven 用户定期从这个实例中拉取 deps

有没有办法让它通过下载链接显示在搜索和索引中，或者是故意未列出的默认工件（我猜是因为我应该总是通过 pom 访问它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:39:05.637

你可以，它对我有用：

我在浏览索引选项卡中看不到快照 jar，但我在浏览存储选项卡中看到它们，我也可以在我的网络浏览器中看到它们，看到类似这样的内容：

[https://repository.apache.org/content/groups/snapshots/commons-beanutils/commons-beanutils/1.8.4-SNAPSHOT/](https://repository.apache.org/content/groups/snapshots/commons-beanutils/commons-beanutils/1.8.4-SNAPSHOT/)

我使用：Sonatype Nexus™ 开源版，版本：1.9.2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:08:34.227

塞缪尔和我在另一个答案中讨论了这个问题。由于快照的瞬态特性，这似乎按设计工作。

您可以通过完整 url 和浏览存储找到快照 jars（或默认工件），但它们不会显示在索引或 Web UI 搜索中。

# wix - Wix Burn 问题：卸载失败说“发现依赖”

> ID：12828514
> 
> 赞同：4
> 
> 时间：2012-10-10T21:16:50.450
> 
> 标签：wix, windows-installer, burn, wix3.6

我制作了一个封装 2 msi (msi1 , msi2) 的烧录包。在 UI 中，我使用复选框来要求用户选择要安装的 MSI。

现在，如果用户选择要安装的 msi 之一，安装会正常进行。但在卸载操作期间，刻录日志文件显示：

```
[][:15]: Detected package: Netfx4Full, state: Present, cached: None

[][:15]: Detected package: DummyInstallationPackageId3, state: **Absent**, cached: None

[][:15]: Detected package: msi2.msi, state: **Present**, cached: Complete

[][:15]: Detect complete, result: 0x0
[][:16]: Plan 3 packages, action: Uninstall
[][:16]: Will not uninstall package: msi2.msi,   found dependents: 1
[][:16]: Found dependent: {08e74372-83f2-4594-833b-e924b418b360}, name: My Test Application 
```

在安装场景中，我选择安装 msi2 而不是 msi1。

我的捆绑代码如下所示：

```
<Bundle Name="My Test Application" Version="1.0.0.0" Manufacturer="Bryan" UpgradeCode="CC2A383C-751A-43B8-90BF-A250F7BC2863">

<Chain>

<PackageGroupRef Id='Netfx4Full' />

<MsiPackage  Id="DummyInstallationPackageId3"
SourceFile="msi1.msi"
ForcePerMachine="yes"
InstallCondition="var1 = 1"
>
</MsiPackage>

<MsiPackage 
SourceFile="msi2.msi"
Vital="yes" Cache="yes"  Visible="no"
ForcePerMachine="yes"
InstallCondition="var2 = 2"
>
</MsiPackage>
</Chain> 
```

我的 OnDetectPackageComplete() 看起来像：

```
 private void OnDetectPackageComplete(object sender, DetectPackageCompleteEventArgs e)
  {
    if (e.PackageId == "DummyInstallationPackageId3" )
    {
      if (e.State == PackageState.Absent)
        InstallEnabled = true;

      else if (e.State == PackageState.Present)
        UninstallEnabled = true;
    }
  } 
```

我应该怎么做才能让刻录包能够自由卸载用户在安装时选择的 msi。此外，如果我同时选择安装 msi，则卸载工作正常。

IMO，捆绑和2 msi的关系存在一些问题。请帮助我，因为我遇到了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:21:36.503

在创建您的第一个 Burn 引导程序时，您的注册表可能会因大量试验和错误而变得混乱。我建议尝试以下方法：

1.  在注册表中搜索“家属”（例如：*{08e74372-83f2-4594-833b-e924b418b360}*）并删除这些键
2.  卸载应用程序（应该成功）
3.  在注册表中搜索您之前安装的其他 .msi 的产品代码。验证它不在注册表中。如果确实存在，请删除这些键。
4.  重新安装试试看能不能卸载ok。

# https - AWS ELB 服务器端 HTTPS

> ID：12828515
> 
> 赞同：1
> 
> 时间：2012-10-10T21:16:51.443
> 
> 标签：https, amazon-web-services, amazon-elb

尽管使用 AWS 设置 HTTPS，但我一直在努力。我一直在尝试使用自签名证书进行此操作，但发现该过程有点问题。

一路上出现的一个问题是服务器端 HTTPS 的业务。我正在使用的客户端请求当用户点击服务器时 URL 更改为 HTTPS。我想知道“服务器端 HTTPS”是否意味着该协议对最终用户是透明的？他们还会在浏览器中看到 HTTP 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:51:09.100

不知道这是否是您问题的确切答案，但也许是一条建议。使用 ELB 时，我发现在 ELB 上安装 SSL 证书并使用 SSL 卸载将请求从 ELB 上的端口 443 转发到 EC2 实例上的端口 80 会容易得多。

这样做的好处：

*   您只需在一个地方安装证书，而不必跨多个实例安装（或更新 AMI 并重新启动实例），从而使证书更新更容易执行。
*   您可以在 Web 服务器上获得更好的性能，因为它们不必处理 SSL 加密。

一些缺点：

*   通信不是端到端加密的，因此在 ELB 和服务器之间存在通信可能被拦截的技术（尽管不太可能）机会。如果您正在处理诸如 PCI 合规性之类的问题，这可能对您很重要。
*   如果您需要通过 HTTPS 直接访问其中一个实例，这是不可能的。
*   如果您的应用程序需要检查请求是否通过 HTTPS ，您可能需要确保您的应用程序知道`x-forwarded-proto`ELB 注入请求中的与 https 相关的标头（即 ）。

此配置没有理由禁止您将通过 HTTP 的传入请求重定向到 HTTPS。但是，您可能需要查看`x-forwarded-proto`标头才能将任何 Web 服务器或应用程序级别重定向到 HTTPS。最终用户将无法知道他们的请求的 HTTPS 包装器正在 ELB 上卸载。

# javascript - javascript添加两个文本框值并显示在第三个

> ID：12828522
> 
> 赞同：2
> 
> 时间：2012-10-10T21:17:21.070
> 
> 标签：javascript, asp.net

如何在 javascript/asp 中添加两个文本框值并显示在第三个？我的代码如下

```
 function fill() {
        var txt8 = document.getElementById("TextBox8").value;
        var txt9 = document.getElementById("TextBox9").value;
        document.getElementById("TextBox10").value = txt8 + txt9;

    } 
```

我对 TextBox8 和 TextBox9 都有 onchange="fill"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:19:52.820

您必须调用该函数，`onchange="fill()"`注意`()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:53:27.160

```
 function Sum() {
        var text1 = document.getElementById('<%= TextBox1.ClientID %>');
        var text2 = document.getElementById('<%= TextBox2.ClientID %>');
        if (text1.value.length == 0 || text2.value.length == 0) {
            text1.value = 0;
            text2.value = 0;
        }

        var x = parseFloat(text1.value);
        var y = parseFloat(text2.value);          

        document.getElementById('<%= TextBox3.ClientID %>').value = x + y;
    }

<table>
    <tr>
        <td style="width: 100px">
            TextBox1</td>
        <td>
            <asp:TextBox ID="TextBox1" runat="server" onkeyup="Sum()"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            TextBox2</td>
        <td>
            <asp:TextBox ID="TextBox2" runat="server" onkeyup="Sum()"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            TextBox3</td>
        <td>
            <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;</td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            &nbsp;</td>
        <td>
            <asp:Button ID="Button1" runat="server" Text="Show" Width="80px" OnClientClick="Sum()" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:25:32.340

函数调用后是否有一组括号？在 javascript 中，如果您不遵循带括号的函数调用，则假定您正在引用一个变量。同样在将来，如果您正在努力调试 javascript 代码，您应该打开浏览器的 javascript 控制台以查看发生了什么以及抛出了哪些错误（如果有）。

```
<input type="text" id="TextBox8" onchange="fill()" />

<input type="text" id="TextBox9" onchange="fill()" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T21:56:08.443

你为什么不使用jQuery？这是一个示例：

```
function fill(){
var total=Number($('#TextBox9').val()) + Number($('#TextBox9').val());
$('#TextBox10').val(total);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:21:57.523

您需要将字符串转换为整数。值总是返回字符串。[jsfiddle](http://jsfiddle.net/DpeYP/1/)

```
 <input onchange="fill()"  id=TextBox8 />
<input  onchange="fill()"  id=TextBox9 />
<input  id=TextBox10 /> 
<script>

    function fill() {
        var txt8 = document.getElementById("TextBox8").value-0;
        var txt9 = document.getElementById("TextBox9").value-0;
        document.getElementById("TextBox10").value = txt8 + txt9;

    }
</script> 
```

​</p>

# android - 方法：使用许多输入变量创建我的方法，而不会重载

> ID：12828530
> 
> 赞同：0
> 
> 时间：2012-10-10T21:17:42.337
> 
> 标签：android, methods, overloading

有什么方法可以让我的方法采用许多输入变量但没有重载......我的问题可能不清楚......我的意思是这样：

**如果我有这个方法**

```
public void setValues (int val1,int val2 ,String val3){
} 
```

**我想要的是：**以多种方式使用此方法

```
setValues (val1,val2) 
```

**或者**

```
setValues (val3) 
```

**为什么我想在不重载的情况下这样做：**因为如果我有例如 10 个变量，我想添加许多重载方法，但我不喜欢那样......

有什么方法可以帮助我检查变量或以相同的方法跳过它..

感谢帮助 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:29:19.367

您可以使用 varargs future 部分解决您的问题[http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html) 如果您有相同类型的参数，可以这样做。

但这将要求您传递与最后一个参数具有相同类型的变量。这并不完全是您想要的，但它是一个小的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:19:47.767

不，如果没有方法重载，Java 就无法做到这一点。一种替代方法是将那些相关的参数分组并使其成为类的字段。然后该方法将采用该类的实例作为参数，并且哪个参数是可选的然后将为空。

# c++ - 在 Boost.Lambda 中使用自定义下标运算符

> ID：12828531
> 
> 赞同：1
> 
> 时间：2012-10-10T21:17:50.730
> 
> 标签：c++, boost, operator-overloading, boost-lambda

我正在使用 Visual Studio 2005 和 Boost 1.37。我还在 Visual Studio 2012 Express Desktop 和 Boost 1.50 上测试了相同的代码，但没有成功。

我想通过访问我的类型上的自定义**下标运算符**来使用**Boost.Lambda 。****与std::array**一起使用时也会发生这种情况，因此我将说明**std::array**类型的问题：

 ******```
#include <vector>
#include <array>
#include <algorithm>

int main() {
    std::vector<std::array<int, 3>> arrays;
    arrays.push_back(make_array(1, 2, 3));
    arrays.push_back(make_array(5, 5, 6));
    std::for_each(arrays.begin(), arrays.end(), (_1[0])); //This line fails!
    return 0;
} 
```

错误是：

```
error C2664: 'boost::lambda::detail::unspecified::unspecified(const boost::lambda::detail::unspecified &)' : cannot convert parameter 1 from 'int' to 'const boost::lambda::detail::unspecified &'
      Reason: cannot convert from 'int' to 'const boost::lambda::detail::unspecified'
      No constructor could take the source type, or constructor overload resolution was ambiguous
... ad infinitum... 
```

我找到了这个页面：[Extended return type deduction system](http://www.boost.org/doc/libs/1_41_0/doc/html/lambda/extending.html)

但我无法成功实施。

有谁知道在这里可以做什么？******

# java - 使用 git 存储库在 Eclipse 中管理 Maven 项目

> ID：12828537
> 
> 赞同：1
> 
> 时间：2012-10-10T21:18:20.913
> 
> 标签：java, eclipse, maven, egit, m2e

我们最近为我们的 Java Web 应用迁移到了 Maven 构建管理器和 git hub 存储库。我也切换到 eclipse，因为 eclipse 有很好的插件集。

作为一个新手，我只是 从代码根目录的终端运行**mvn clean package 。**然后将编译后的代码，即 /target/SNAPSHOT/* 移动到 tomcat/webapps/ROOT 位置。然后启动Tomcat7服务器。这个过程非常耗时，尤其是当我在 Java 和配置 .xml 文件中进行代码更改时。

我想完全在 IDE 环境中完成它，就像我之前在 Netbeans 中所做的那样，更新代码 -> 在调试模式下构建和运行， -> 进行代码更改然后提交。

听说过 egit 和 m2e 在 eclipse 中用于 maven 和 github 集成，但不知道如何使用它。

请引导我完成这样做所需的步骤。我对日食完全陌生。

- 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:51:14.457

您可能需要考虑使用`maven-jetty-plugin` [http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)来运行 webapp。您不需要将内容复制到 tomcat。配置此插件后，您只需执行以下操作即可运行您的应用程序`mvn jetty:run`

我一般不喜欢在 Eclipse 中运行 webapps。这是个人喜好，但拥有一种 IDE 中立的方式来构建和运行您的应用程序总是很好的。如果你有`m2e`东西应该可以正常工作。我见过`maven-jetty-plugin`热插拔，如果您更改 web.xml，码头将重新加载您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:54:03.993

我们使用 Git 进行版本控制，使用 Maven 进行依赖管理和构建自动化。一旦您的项目成功导入 Eclipse 并被识别为有效的 java web 项目，您就不需要 Git 或 Maven 在 IDE 中构建/运行它。只需使用现有的 tomcat 安装创建一个服务器，将项目添加到服务器，然后选择`Run as > Run on Server`.

完整指南：

1.  [创建服务器](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.wst.server.ui.doc.user/topics/twcrtins.html)
2.  [将项目添加到服务器](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.wst.server.ui.doc.user%2Ftopics%2Ftwaddprj.html)
3.  [启动服务器](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.wst.server.ui.doc.user/topics/twsrtins.html)

有关更多详细信息，请查看[在您的服务器上测试和发布](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.wst.server.ui.doc.user/topics/cwover.html)。

# neural-network - newff，不同数量的隐藏层但得到相同的结果

> ID：12828538
> 
> 赞同：2
> 
> 时间：2012-10-10T21:18:33.823
> 
> 标签：neural-network, matlab

我正在尝试将 newff 的结果与不同数量的隐藏层进行比较，但结果是相同的。我使用了 1 个隐藏层和 2 个隐藏层进行比较。

```
net = newff( minmax( pn ), [5 1], {'tansig' 'purelin'}, 'trainlm');
net = newff( minmax( pn ), [5 5 1], {'tansig' 'tansig' 'purelin'}, 'trainlm'); 
```

代码：

```
load data.txt;
P = data(1:20,1:3);
T = data(1:20,4);
[a,minp,maxp,b,mint,maxt] = premnmx(P',T');
net = newff( minmax( pn ), [5 1], {'tansig' 'purelin'}, 'trainlm');
net.trainParam.epochs = 10000;
net.trainParam.show = 5;
net = train(net,a,b);
y = sim(net,a)
x = postmnmx(y',mint,maxt);
plot(x, 'r');
hold
plot(T); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:32:45.107

我可以建议您对神经网络使用基于 GUI 的 matlab 命令 nprtools。

# d - 使用 GLFW 设置 Derelict3

> ID：12828541
> 
> 赞同：4
> 
> 时间：2012-10-10T21:18:39.340
> 
> 标签：d, glfw

我正在尝试将`OpenGL`and `GLFW`with`Derelict3`用于 D 语言，但是我遇到了一些问题，`glfw3.dll`并且我不确定我做错了什么：

*   我`Derelict3`从[https://github.com/aldacron/Derelict3](https://github.com/aldacron/Derelict3)下载并运行`build.d`并将`*.lib`（DMD 编译器）与我的项目链接。
*   `Derelict3`似乎需要我`glfw3.dll`克隆了 Git 存储库`git://glfw.git.sourceforge.net/gitroot/glfw/glfw`。
*   我创建了一个文件夹`build`并从内部调用`cmake -G "MinGW Makefiles" ..`并得到一个`glfw.dll`,`glfwdll.lib`和`libglfw.a`.
*   然后我将其复制`glfw.dll`到我的项目目录中并将其重命名为`glfw3.dll`.

但是当我运行我的程序时，我得到了错误：

```
derelict.util.exception.SymbolLoadException@..\import\derelict\util\exception.d(38): Failed to load symbol glfwSetErrorCallback from shared library glfw3.dll 
```

有人知道如何设置`Derelict3`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:21:31.900

您使用了错误的 Repo，已`glfw3`移至 github：[https](https://github.com/elmindreda/glfw) ://github.com/elmindreda/glfw 。

您看到的错误是由旧版本引起的`glfw`，在这个旧版本中没有称为 的符号`glfwSetErrorCallback`。

# bash - 如何使用 shell 脚本或 sed 从 user1@10.129.12.121 打印 user1

> ID：12828542
> 
> 赞同：-1
> 
> 时间：2012-10-10T21:18:38.203
> 
> 标签：bash, shell, scripting, sed, awk

我想通过 shell 脚本从整个地址打印名称。所以 user1@12.12.23.234 应该给出输出“user1”，同样 11234@12.123.12.23 应该给出输出 11234

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:20:47.960

从终端读取：

```
`$ IFS=@ read user host && echo "$user"
*<user1@12.12.23.234>*
user1`
```

`从变量中读取：`

 ````
$ address='user1@12.12.23.234'
$ cut -d@ -f1 <<< "$address"
user1
$ sed 's/@.*//' <<< "$address"
user1
$ awk -F@ '{print $1}' <<< "$address"
user1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T21:26:31.003

使用 bash 就地编辑：

```
EMAIL='user@server.com'
echo "${EMAIL%@*} 
```

这是一个内置的 Bash，所以它可能不是很便携（例如，`sh`如果它没有链接到它，它就不会运行`/bin/bash`），但它可能更快，因为它没有派生处理编辑的进程。

使用 sed：

```
echo "$EMAIL" | sed -e 's/@.*//' 
```

这告诉 sed 替换`@`字符以及它可以在它之后找到的尽可能多的字符，直到行尾什么都没有，即。删除之后的所有内容`@`。

如果您将多封电子邮件存储在一个文件中，此选项可能会更好，然后您可以执行类似的操作

```
sed -e 's/@.*//' emails.txt > users.txt 
```

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:11:00.820

我倾向于使用`expr`这种东西：

```
address='user1@12.12.23.234'
expr "$address" : '\([^@]*\)' 
```

这是`expr`其模式匹配和提取能力的用途。翻译过来，上面说：请打印出`$address`不包含`@`.

Posix 涵盖了该`expr`工具，因此它应该非常便携。

需要注意的是，一些历史版本`expr`将解释带有前导的参数`-`作为选项。如果您关心防止这种情况，您可以在字符串的开头添加一个额外的字母，并避免匹配它，如下所示：

```
expr "x$address" : 'x\([^@]*\)' 
````

# iphone - 日历选择器视图

> ID：12828543
> 
> 赞同：0
> 
> 时间：2012-10-10T21:18:41.387
> 
> 标签：iphone, ios, xcode, ipad, ios6

我正在尝试为用户获取日历选择器视图。这样用户就可以选择在应用程序中显示哪些日历，哪些不显示。有谁知道在 EventKit 框架或类似框架中是否有任何帮助？我将非常感谢任何帮助或指示！

就像苹果日历应用程序中的这个： ![在此处输入图像描述](../Images/91a16e9cae033aed88d26229072e5ebb.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:55:40.410

API 中没有这样的默认选择器，但您可以重新创建它，通过使用 grouped `UITableView`，您必须创建自己的`UIImageView's`和开/关逻辑，然后将您的子视图添加到`UITableViewCell` `contentView`属性中。

# jquery - 将旋转值传递给 css

> ID：12828554
> 
> 赞同：0
> 
> 时间：2012-10-10T21:19:06.127
> 
> 标签：jquery, css

我的 js 中有一个名为 value 的变量，它根据滚动条百分比进行更新。我的值在 0 - 360 之间。我想要一种更新以下 CSS 值的方法。有没有办法可以将它们组合在一个对象中并将值传递给它们。例如，当使用不透明度时，我可以做这样的事情。

```
function updateCSS(target, value){
 var cssObj = {};
 cssObj["opacity"] = value;
 target.css(cssObj);
} 
```

我需要一种能够用我的值编号更新所有前缀旋转属性的方法。任何好主意我怎么能做到这一点。

```
-webkit-transform: rotate(value);  /* Safari 3.1+, Chrome 
     -moz-transform: rotate(value);  /* Firefox 3.5-15 
      -ms-transform: rotate(value);  /* IE9+ 
       -o-transform: rotate(value);  /* Opera 10.5-12.00 
          transform: rotate(value);  /* Firefox 16+, Opera 12.50+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:23:23.183

您可以使用该`style`对象来更改 CSS 属性：

```
var style = element.style;
style.WebkitTransform =
    style.MozTransform =
    style.msTransform =
    style.OTransform =
    style.transform = 'rotate(' + angle + ')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:22:30.363

CSS 不是一种编程语言。它不支持变量。您需要使用 JavaScript 来执行此操作。

`$(target).attr('-webkit-transform', 'rotate('+value+')');`....ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:24:16.933

只需使用该`.css()`方法，您也忘记包括`deg`：

```
function updateCSS(target, value){
    target.css({
        '-webkit-transform': 'rotate('+value+'deg)',
        '-moz-transform': 'rotate('+value+'deg)',
        '-ms-transform': 'rotate('+value+'deg)',
        '-o-transform': 'rotate('+value+'deg)',
        'transform': 'rotate('+value+'deg)'
    });
} 
```

**小提琴：http:** [//jsfiddle.net/XKyEz/3/](http://jsfiddle.net/XKyEz/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:40:28.087

你可以很简单地用 jquery 做到这一点：

```
$(target).css('opacity',value); 
```

# c# - 编辑 Word 文档范围的文本会删除段落格式

> ID：12828560
> 
> 赞同：2
> 
> 时间：2012-10-10T21:19:17.987
> 
> 标签：c#, ms-word, vsto, add-in, office-interop

我将 Office Interop 与 MS Word (Microsoft.Office.Interop.Word) 和 Microsoft.Office.Tools.Word 一起使用来修改 Word 加载项中的 Word 文档。我有一个包含我要编辑的特定文本的范围。

当我更新 Text 对象时，Range 的段落格式被重置，特别是 Alignment 和 LeftIndent。我可以将 Alignment 和 LeftIndent 保存在临时变量中并重置它们，但这并不理想。**有没有办法阻止 ParagraphFormat 被重置，如果没有，是否还有其他我可能忘记需要保存的属性（我*刚刚*意识到前后段落间距也会被重置......）。**

```
Microsoft.Office.Interop.Word.Range range = myObject.range;
var oldAlignment = range.ParagraphFormat.Alignment;
var oldLeftIndent = range.ParagraphFormat.LeftIndent;

range.Text = "new text";
range.ParagraphFormat.Alignment = oldAlignment;
range.ParagraphFormat.LeftIndent = oldLeftIndent; 
```

**编辑：**我只是尝试将 ParagraphFormat 保存为临时变量，然后用它重置格式，但是临时变量也丢失了它的格式。

```
oldParagraphFormat = range.ParagraphFormat;
range.Text = "new text";
range.ParagraphFormat = oldParagraphFormat; // oldParagraphFormat's objects are reset 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:45:22.497

`Range.ParagraphFormat`在更改文本之前尝试创建对象的副本。您可以通过[ParagraphFormat.Duplicate](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._paragraphformat.duplicate.aspx)对象执行此操作。这将保留旧的 ParagraphFormat 值。更改范围的文本并重置其 ParagraphFormat 后，您可以从副本中恢复值。

```
// Get current value of ParagraphFormat.
Microsoft.Office.Interop.Word.Range range = myObject.range;
var oldParagraphFormat = myObject.range.ParagraphFormat.Duplicate;

// Change the range's text. This will reset ParagraphFormat, so reapply the previous value.
range.Text = "new text";
range.ParagraphFormat = oldParagraphFormat; 
```

**关于发生了什么的一些背景：**更改`Range.Text`本质上会重置 Range 对象，因为 Range 是文本 + 格式。因此，在不包含任何格式信息的情况下更改文本将导致所有以前的格式丢失。（很像更改 HTML 标记的 innerText 属性会导致该标记丢失所有子标记。）

如果复制 ParagraphFormat 没有帮助，那么您可能需要考虑设置[Range.FormattedText](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.formattedtext.aspx)属性而不是 Range.Text。

# iphone - 用户下载应用程序时如何提供特定的 IAP

> ID：12828563
> 
> 赞同：1
> 
> 时间：2012-10-10T21:19:22.350
> 
> 标签：iphone, ios, app-store-connect, in-app-purchase

如果我们向没有我们的应用程序的人推销特定的应用程序内购买内容，如果消费者响应该特定营销活动，那么促进消费者访问该 IAP 的最佳方式是什么？

例如，如果我们可以为包含 IAP 产品标识符的应用提供 iTunes 应用商店链接，那就太好了。当应用程序下载并启动时，AppDelegate 可以通过以下方法在 launchOptions 中获取产品标识符：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我在这里寻找任何想法，所以我不想将问题限制在上述解决方案中。上面的示例场景旨在帮助解释我所追求的。任何帮助将非常感激！

谢谢，德尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:05:40.433

没有方便的方法来做到这一点。苹果特别不希望开发人员通过他们的设备来定位个人。如果用户下载该应用程序，也许您应该允许他们输入代码或登录，然后相应地选择正确的 IAP。

# ios - 苹果会拒绝手动调用 viewDidUnload 的应用吗

> ID：12828573
> 
> 赞同：1
> 
> 时间：2012-10-10T21:19:58.033
> 
> 标签：ios, memory-management, ios6, appstore-approval, viewdidunload

在 iOS6 中不再调用 viewDidUnload，因此作为在 viewDidUnload 中执行一些必要操作的应用程序的解决方法，我已经这样做了：

```
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];

    // only want to do this on iOS 6
    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0) {
        //  Don't want to rehydrate the view if it's already unloaded
        BOOL isLoaded = [self isViewLoaded];

        //  We check the window property to make sure that the view is not visible
        if (isLoaded && self.view.window == nil) {

            //  Give a chance to implementors to get model data from their views
            [self performSelectorOnMainThread:@selector(viewWillUnload)
                                   withObject:nil
                                waitUntilDone:YES];

            //  Detach it from its parent (in cases of view controller containment)
            [self.view removeFromSuperview];
            self.view = nil;    //  Clear out the view.  Goodbye!

            //  The view is now unloaded...now call viewDidUnload
            [self performSelectorOnMainThread:@selector(viewDidUnload)
                                   withObject:nil
                                waitUntilDone:YES];
        }
    }
} 
```

苹果拒绝这样的事情有先例吗？由于时间限制，我不能冒险让他们拒绝任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:28:06.083

苹果没有理由拒绝它，但他们删除它是有原因的。

手动调用它只是在问问题。我强烈建议让应用程序逻辑正确并以“正确”的方式进行。

编辑：再次查看该代码后，我对您的实现表示严重怀疑。调用选择器的整个构造（我们应该已经在主线程上！）并从超级视图中删除（它只是从它的所有者那里窃取视图而不告诉它）是不正确的。这是您真正希望从代码库中消除的代码类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:23:51.010

他们没有理由拒绝这一点。通过弃用该方法，`-[UIView viewDidUnload]`它变得像任何其他方法一样。您可以将其视为一开始就从未存在过`UIView`，而您只是碰巧创建了一个名为`-viewDidUnload`.

如果内部仍然存在（它可能）并且您试图调用 Apple 的（现在是私有的）实现而不是您自己的实现，那么这*将*是一个问题`-viewDidUnload`，但我非常怀疑 Apple 会这样做。请`-viewDidUnload`记住，如果这是您当前正在执行的操作，请记住在尝试在 super 上调用该方法之前询问超类是否实现了该方法，使用：

```
if ([[self superclass] instancesRespondToSelector:@selector(viewDidUnload)]) {
    [super viewDidUnload];
} 
```

如果您真的想要安全，您可以随时将您的代码移动到不同的方法。如果你在 iOS 6 上，只需在里面`viewDidUnload`调用你的 iOS 5 设备的新方法和 in调用你的新方法。`-didReceiveMemoryWarning`

我不会对您的 didReceiveMemoryWarning 中的逻辑进行详细评论，因为这不是问题，但我会说您应该非常小心您将控制器置于的状态（确保那些 if 语句涵盖你所有的基础！）当然，当你调用 viewDidUnload 时，你不能期望你的视图控制器及其视图处于与 iOS 5 中 UIKit 调用它时相同的状态。

# javascript - 需要在不破坏布局的情况下在表格中公开细节的解决方案

> ID：12828577
> 
> 赞同：2
> 
> 时间：2012-10-10T21:20:04.663
> 
> 标签：javascript, jquery, css

我目前正在寻找一种解决方案，允许我以一种紧凑、易于阅读的方式显示大量日志输出。目标是隐藏尽可能多的信息，直到它们变得有趣，因为我们需要显示数千行日志输出。

通过在 td 中引入 div，我已经成功地阻止了我们的表格达到 2800 像素的宽度。现在，一旦用户将鼠标悬停在 div 上，我想向用户公开全部信息，但不会破坏表格的布局，也不需要在代码中两次包含所有信息，因为 html 已经接近 3-4 MByte。

可以使用 Javascript 和/或 JQuery，但我是新手，目前卡住了。

这是 html 代码的一个小简化示例。

```
 <head>
        <title>expose full details</title>
        <style>
            #codeline { width:150px; overflow:hidden; text-overflow: ellipsis; }
            #fullline { background: #EEE; z-index: 10; display: hidden; }
            #loglines { width:250px; overflow:hidden; text-overflow: ellipsis; white-space: nowrap;}
        </style>
    </head>
    <body>
    <table style="border:1px solid black;">
    <tr>
        <td>PASS</td>
        <td>2012-10-10 09:30:31</td>
        <td><div id="codeline">c:\myfiles\are\not\stored\here\testscript.py:line434</div></td>
        <td><div id="loglines">Here is a very long log output that might continue for 10-20 lines</div></td>
    </tr>
    <tr>
        <td>FAIL</td>
        <td>2012-10-10 09:30:32</td>
        <td><div id="codeline">c:\myfiles\are\not\stored\here\testscript.py:line439</div></td>
        <td><div id="loglines">Here is another very long log output that might continue for 10-20 lines</div></td>
    </tr>
    </table> 
```

每一个提示都值得赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:31:22.953

我认为如果它们很大，您可能应该允许这些 div 滚动：

```
#codelines, #loglines {overflow: auto; width: 250px; max-height: 500px } 
```

overflow:auto 只会在必要时显示滚动条，所以它看起来比 overflow:scroll 要好得多。让他们滚动一个 500 像素（或 800 像素，等等）的日志记录框比拥有一个隐藏额外信息的巨大网页要好得多。

编辑：

如果你真的希望它只在悬停时可用，你可以使用这个：

```
#codelines:hover, #loglines:hover { overflow: hidden; width: 250px; max-height: 500px }
#codelines:hover, #loglines:hover {overflow: auto} 
```

我从来没有真正看到过这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:32:33.180

重读这篇我在代码中有一个错字，在里面加上了一个额外的引号，我说稍微澄清了 id 和 class，我在里面说错了，当我的意思是 class 时说 style ......

首先，您需要了解一些事情。id="somename" 应该是整个文档中的唯一值，如果您想对项目进行分组以将它们设置为相同的样式，请使用 class="somename" 并使用 . 而不是 CSS 中的 # 。

您不清楚您希望数据显示在哪里，我相信这就是您想要做的，您可以使用#fullline 代码的绝对定位将其放置在您想要的位置。我阅读了您发表的关于想要使用绝对定位的工具提示样式的评论（在 showdtl 部分中动态调整，但从听起来您想要对文本进行静态放置的情况来看是最好的。我更改了整行的宽度，以便您可以看到它根据需要正确扩展。fullline 是您代码中的唯一 id 我单独留下来说明类和 id 的用法。我只是把它扔在一起，它可以工作，但我确定您需要进行一些调整才能获得所需的结果。

```
 <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>expose full details</title>         
      <style>             
          .codeline { width:150px; overflow:hidden; text-overflow: ellipsis; }             
          #fullline { background: #FFCC66; z-index: 10; width: 250; display: hidden;  }             
          .loglines { width:250px; overflow:hidden; text-overflow: ellipsis; white-space: nowrap;}
      </style>     
    </head>

  <body>     
<script>
function showdtl(passedobj){
fullline.style.display = '';
fullline.innerHTML=passedobj.innerHTML;
}
function hidedtl(){
fullline.style.display = 'none';
}

</script>
      <table style="border:1px solid black;">     
          <tr>         
              <td>PASS</td>
              <td>2012-10-10 09:30:31</td>
              <td><div class="codeline">c:\myfiles\are\not\stored\here\testscript.py:line434</div></td>         
              <td><div class="loglines" onMouseOver="showdtl(this);return true" onMouseOut="hidedtl();return true" >Here is a very long log output that might continue for 10-20 lines</div></td>
          </tr>     
          <tr>         
              <td>FAIL</td>  
              <td>2012-10-10 09:30:32</td>         
              <td><div class="codeline">c:\myfiles\are\not\stored\here\testscript.py:line439</div></td>         
              <td><div class="loglines" onMouseOver="showdtl(this);return true" onMouseOut="hidedtl();return true">Here is another very long log output that might continue for 10-20 lines</div></td>
          </tr>     
      </table>         

<div id="fullline">

</div>    

    </body> 
```

# c - 即使满足条件，代码也不会进入while循环

> ID：12828590
> 
> 赞同：0
> 
> 时间：2012-10-10T21:20:55.810
> 
> 标签：c, while-loop, printf, multiprocessing

> **可能重复：**
> [“while(!feof(file))”总是错误的](https://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong)

我有一个与 while 循环有关的奇怪问题。我有一个函数，它在进程的父进程 () 结束时调用，`print_file()`它不接受继续执行的真实条件。这是我的简单多进程代码，如下所示。

```
#include <stdio.h>     /* basic I/O routines.   */
#include <stdlib.h>
#include <unistd.h>    /* define fork(), etc.   */
#include <sys/types.h> /* define pid_t, etc.    */
#include <sys/wait.h>  /* define wait(), etc.   */
#include <signal.h>    /* define signal(), etc. */
#include <pthread.h>
#include <time.h>
#include <ctype.h>

void print_file(char* [], char* []);
void child_process(int,int);
void parent_process();
int counter=0;

int main(int argc, char* argv[]) {

    counter = atoi(argv[1]);
    int i,k;
    pid_t child_pid;
    int child_status;
    char* array[counter];
    srand ( time(NULL) );
    int temp;

    for(i=0; i<counter; i++){
        temp = rand()%4;
        child_pid = fork();

        switch(child_pid) {
            case -1:
                printf("Error occured with fork()\n");
                exit(1);
            case 0: 
                child_process(i,temp); /* Child Process */
                exit(0);
        }
    }

    wait(&child_status);
    parent_process();
    execl("/usr/bin/killall","killall","tail",(char *) 0);
    return 0;
}

void child_process(int i,int temp){

    FILE* fptr;
    fptr = fopen("sample.txt","a+");
    if( temp==0 ) {
        fprintf(fptr,"A %d\n",i);
    }
    else if( temp==1 ) {
        fprintf(fptr,"C %d\n",i);
    }
    else if( temp==2 ) {
        fprintf(fptr,"G %d\n",i);
    }
    else if( temp==3 ) {
        fprintf(fptr,"T %d\n",i);
    }
    fflush(fptr);
    sleep(1);
    fclose(fptr);
}

void parent_process(void){

    FILE* fptr;
    fptr = fopen("sample.txt","r");
    char* str = (char*)malloc(1);
    int temp,i,k;
    char* array_opst[counter];
    char* array[counter];

    i=0;
    while(!feof(fptr)){

        fscanf(fptr,"%s%d",str,&temp);
        if(feof(fptr))
            break;

        if(strcmp(str,"A")==0){
            array[temp]="A";
            array_opst[temp]="T";
            printf("Array[%d] = %s\n",temp,array[temp]);
        }
        else if(strcmp(str,"C")==0){
            array[temp]="C";
            array_opst[temp]="G";
            printf("Array[%d] = %s\n",temp,array[temp]);
        }
        else if(strcmp(str,"G")==0){
            array[temp]="G";
            array_opst[temp]="C";
            printf("Array[%d] = %s\n",temp,array[temp]);
        }
        else if(strcmp(str,"T")==0){
            array[temp]="T";
            array_opst[temp]="A";
            printf("Array[%d] = %s\n",temp,array[temp]);
        }
        i++;
    }
    fclose(fptr);
    free(str);
    print_file(array,array_opst);
}

void print_file(char* array[counter], char* array_opst[counter]) {

    int j=0,i=1;

    while(j<counter){
        printf("%d", i);
        i++;
        j++;
        if(i==10){
            i=0;
        }
    }
    return;
} 
```

在`print_file`函数中，即使满足条件，它也永远不会进入 while 循环。但是每当我将 printf 放在函数的第一行`print_file`以检查它是否成功输入时，它就会打印出来。（注意这`counter`是一个全局变量）。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:26:56.530

由于`stdout`被缓冲（`printf()`循环内的语句包含 no`\n`且未`stdout`显式d）和对in`fflush()`的调用，循环的输出没有出现，它替换了当前进程映像，并且缓冲区在正常程序退出时不会像往常一样刷新. 在循环之后向or 显式调用添加换行符。`execl()``main()``stdout``printf()``fflush(stdout);`

* * *

存在缓冲区溢出，导致未定义的行为：

```
char* str = (char*)malloc(1); 
```

分配 1 个字节，`str`然后这样使用：

```
fscanf(fptr,"%s%d",str,&temp); 
```

`fscanf()``str`即使只`char`读取一个，也会添加一个超出结尾的空终止符。我看不到动态分配它的原因，甚至当它需要是一个数组时，因为行的格式似乎是一个`char`后跟一个`int`：

```
fprintf(fptr,"A %d\n",i); 
```

要解决此问题，只需使用 a`char`和格式说明符`%c`：

```
char ch;

if (2 == fscanf(fptr, "%c%d", &ch, &temp))
{
} 
```

始终检查返回值（`fopen()`、、`fprintf()`等`fscanf()`）。

# asp.net-mvc - 在 RedirectToAction 之后更改 URL

> ID：12828603
> 
> 赞同：0
> 
> 时间：2012-10-10T21:21:38.127
> 
> 标签：asp.net-mvc

我的索引视图上有一个表单，它正在像这样发布到我的提交操作

```
 @using(Html.BeginForm("Submit","Receiving", FormMethod.Post))
   {
       ....
    } 
```

在该操作中，在完成所有需要的工作后，我将返回一个 RedirectToAction

```
 public ActionResult Submit(string selectedSerialNumber, string aisle, string rack, string rackbin)
    {

        //do the work

        return RedirectToAction("Index");
    } 
```

用户提交表单后，Url 在索引视图中显示“/Receiving/Submit”

而不是“/接收”或“/接收/索引”

如果用户刷新页面，它会尝试再次返回提交操作，这不是预期的并且会导致问题。他们期望刷新索引页面，我怎样才能让该 Url 在重定向后返回索引操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:48:02.523

Jquery mobile 是我发现这个[问题](https://stackoverflow.com/questions/5078612/asp-net-mvc-razor-layouts-the-url-is-not-getting-updated)的原因，因为我意识到这个网站的唯一区别是 jquery mob

# c# - 如何在 XNA 中创建工具提示？

> ID：12828615
> 
> 赞同：0
> 
> 时间：2012-10-10T21:22:07.640
> 
> 标签：c#, xna

我刚开始学习 XNA，我想制作一个工具提示？我用谷歌搜索但没有找到任何答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:53:06.510

```
MouseState ms = Mouse.GetState();

if (ms.X == YourPoint.X && ms.X == YourPoint.X)
{
   SpriteBatch.DrawString(ToolTipFont, "A tooltip!", new Vector2(ms.X,ms.Y),Color.White);
} 
```

您可以也应该使用[Rectangle.Intersects](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.rectangle.intersects.aspx)来轻松查看鼠标是否在它上面。前任：

```
MouseRect = new Rectangle(ms.X,ms.Y,1,1) 
if (MouseRect.Intersects(YourPoint.X,YourPoint.Y,WidthOfArea,HeightOfArea)) 
```

# go - 如何改进这个文件读取代码

> ID：12828616
> 
> 赞同：4
> 
> 时间：2012-10-10T21:22:17.407
> 
> 标签：go

我目前有这段代码可以逐行读取文件（由 \n 分隔）

```
file, _ := os.Open(filename) //deal with the error later
defer file.Close()

buf := bufio.NewReader(file)
for line, err := buf.ReadString('\n'); err != io.EOF; line, err = buf.ReadString('\n')
{
    fmt.Println(strings.TrimRight(line, "\n"))
} 
```

但是我对在 for 循环中写两次感到不舒服`buf.ReadString("\n")`，有没有人有任何改进的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:40:08.497

> [bufio.ReadString](http://golang.org/pkg/bufio/#Reader.ReadString)读取直到输入中第一次出现 delim，返回一个字符串，其中包含直到并包括分隔符的数据。如果 ReadString 在找到分隔符之前遇到错误，它会返回错误之前读取的数据和错误本身（通常是 io.EOF）。当且仅当返回的数据不以 delim 结尾时，ReadString 才会返回 err != nil。

如果`buf.ReadString('\n')`返回除 以外的错误`io.EOF`，例如`bufio.ErrBufferFull`，您将处于无限循环中。此外，如果文件不以 a 结尾`'\n'`，您会默默地忽略最后一个`'\n'`.

这是一个更强大的解决方案，它执行`buf.ReadString('\n')`一次。

```
package main

import (
    "bufio"
    "fmt"
    "io"
    "os"
    "strings"
)

func main() {
    filename := "FileName"
    file, err := os.Open(filename)
    if err != nil {
        fmt.Println(err)
        return
    }
    defer file.Close()
    buf := bufio.NewReader(file)
    for {
        line, err := buf.ReadString('\n')
        if err != nil {
            if err != io.EOF || len(line) > 0 {
                fmt.Println(err)
                return
            }
            break
        }
        fmt.Println(strings.TrimRight(line, "\n"))
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:46:57.723

大多数逐行读取的代码可以通过不逐行读取来改进。如果您的目标是读取文件并访问这些行，那么以下内容几乎总是更好。

```
package main

import (
    "fmt"
    "io/ioutil"
    "log"
    "strings"
)

func main() {
    b, err := ioutil.ReadFile("filename")
    if err != nil {
        log.Fatal(err)
    }
    s := string(b)                 // convert []byte to string
    s = strings.TrimRight(s, "\n") // strip \n on last line
    ss := strings.Split(s, "\n")   // split to []string
    for _, s := range ss {
        fmt.Println(s)
    }
} 
```

任何错误都会在一个点出现，因此简化了错误处理。正如彼得建议的那样，从最后一行中删除换行符允许文件可能有也可能没有最后的换行符。如今，与可用内存相比，大多数文本文件都很小，因此一口气阅读这些文件是合适的。

# php - Imagemagick PDF to JPG - 执行良好但不创建文件

> ID：12828620
> 
> 赞同：1
> 
> 时间：2012-10-10T21:22:31.690
> 
> 标签：php, imagemagick

我正在尝试使用以下代码将 PDF 转换为 JPG 文件：

```
$pdf_file = 'text.pdf';
$save_to = 'demo.jpg'; //make sure that apache has permissions to write in this folder! (common problem)
//execute ImageMagick command 'convert' and convert PDF to JPG with applied settings
exec('convert '.$pdf_file.' '.$save_to, $output, $return_var);

if($return_var == 0) { //if exec successfuly converted pdf to jpg
print "Conversion OK";
}
else print "Conversion failed.<br />".$output; 
```

我收到消息 Conversion OK 但没有创建图像文件。当我在不同的服务器上尝试这个时，一切正常。根目录的权限设置为 777。我不知道为什么它不起作用……我不知道两台服务器上都安装了哪些版本的 Imagemagick。也许这就是问题所在？在 phpinfo() 中没有关于版本或任何内容的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:22:13.013

您在运行“转换”时遇到问题，因为 PHP 函数 exec() 已在您的 php.ini 文件中禁用。

当 exec() 命令失败时，可以采取多个步骤来解决问题：

1.  验证是否打开了安全模式。具体来说，文档说：

    > 注意：启用安全模式后，您只能执行 safe_mode_exec_dir 中的文件。出于实际原因，目前不允许在可执行文件的路径中包含 .. 组件。

2.  打开错误报告，看看是否提供更多信息。这可以通过在脚本顶部添加如下代码来完成：

    ```
    ini_set('display_errors', 1);
    ini_set('error_reporting', E_ALL); 
    ```

3.  将 exec() 命令简化为应该始终有效的命令：

    ```
    exec('/bin/echo helloWorld',$output);
    var_dump($output); 
    ```

在您尝试上面的步骤 3 时的特定情况下，它返回 null。Null 是当 exec() 函数被禁用时 PHP 返回的。此外，如果您能够打开错误报告（步骤 #2），输出将类似于以下内容：

```
PHP Warning:  exec() has been disabled for security reasons in /home/path/to/file.php on line 2
NULL 
```

解决这个问题的方法是在php.ini中启用exec功能或者去一个允许使用该功能的主机/服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:35:24.427

尝试明确的错误报告：`error_reporting(E_ALL)`，也许它会给出有关 exec 权限的警告。

另外：“根目录的权限”是指执行和保存文件的文件夹？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:38:45.903

服务器上是否启用了安全模式？

启用安全模式后，您只能执行

> 安全模式执行目录

有关其他信息，请参见此处：

[http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir](http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir)

# command-line - 命令行上的“-pa”是什么意思，如果有的话？

> ID：12828625
> 
> 赞同：0
> 
> 时间：2012-10-10T21:22:57.897
> 
> 标签：command-line, erlang, installation

我正在尝试使用 erlubi，这是一种用于可视化 erlang 进程的软件：

[尔鲁比 (github)](https://github.com/krestenkrab/erlubi)

设置说明中的步骤之一如下：

```
 "Run erlang with -pa erlubi/ebin -pa erlubi/deps/xmlrpc/ebin on the command line" 
```

我的终端无法识别“-pa”命令，并且我发现没有提及使用搜索引擎。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:31:41.177

从手册页：

> -pa Dir1 Dir2 ... ：
> 将指定目录添加到代码路径的开头，类似于 code:add_pathsa/1 。

基本上，它使 erlang 能够使用该目录中的编译文件

# vb.net - 使用 Oracle Client 11 部署 .Net 应用程序

> ID：12828626
> 
> 赞同：1
> 
> 时间：2012-10-10T21:23:00.527
> 
> 标签：vb.net, oracle, oracleclient

我已经[关注了这篇文章](https://stackoverflow.com/questions/923283/what-is-the-minimal-setup-required-to-deploy-a-net-application-with-oracle-clie)，但它不起作用。有人能告诉我还有什么要检查的吗？

我遵循的步骤：

1.  我将当前安装的 Oracle (11gR2_x32) 中的 dll 添加到项目的根目录中。我没有像帖子所说的那样使用基本精简版，但我认为 dll 是一样的，对吧？

    *   oci.dll
    *   ociw32.dll
    *   Oracle.DataAccess.DLL
    *   orannzsbb11.dll
    *   oraocci11.dll
    *   oraociicus11.dll
    *   OraOps11w.dll
2.  在我的项目中选择每个 dll 并将“构建操作”设置为“内容”，将“复制到输出目录”设置为“始终复制”

3.  添加了对 Oracle.DataAccess 的引用

4.  在我的 vb 代码中添加了“导入 Oracle.DataAccess.Client”。

该代码运行良好，但仍需要用户安装 Oracle。我的意图是不让他们安装 oracle。我验证了当他们安装我的程序时，所有 dll 都存在于程序文件夹中。

我还能检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:43:55.127

> 该代码运行良好，但仍需要用户安装 Oracle。我的意图是不让他们安装 oracle。

据我所知，没有真正的“嵌入式”Oracle，您无法避免安装 Oracle 数据库服务器。如果您真的需要[嵌入式数据库](http://en.wikipedia.org/wiki/Embedded_database)，有几个不错的选择，包括但不限于：SQLite、MS SQL Server Compact 或 LocalDB ¹、Interbase/Firebird 等...

几年前，Oracle 为公司运行了一个许可计划，您可以将 Oracle 设置集成到您自己的设置中，并使其对用户“不可见”，但这仍将安装完整的 Oracle 服务器。例如，早期版本的 PTC Pro/INTRALINK 就是这样安装的——您不需要单独的 Oracle 安装。我不知道这个许可计划是否仍然可用，但即使它是可用的，您也可能正在寻找一项非常重要的金融投资。

顺便说一句，Oracle 的完全托管的 .NET 提供程序[目前处于测试阶段](http://www.oracle.com/technetwork/database/windows/downloads/odpmbeta-1696432.html)- 这将进一步简化客户端部署并消除 32 位与 64 位不匹配。

* * *

*¹ LocalDB 在技术上不像“进程内”那样“嵌入”，但这可能不会对您的最终用户产生影响。*

# mips - 如何对 .asciiz 进行 MIPS

> ID：12828628
> 
> 赞同：1
> 
> 时间：2012-10-10T21:23:21.197
> 
> 标签：mips

我有一个问题，我正在编写一个可以根据用户输入字符串输出字符串的程序。

例如，

用户输入>> 小熊

输出>> 它是一种哺乳动物。

或者

用户输入>> Snake

输出>> 这是爬行动物。

我只会做 3 只动物（简单）。“熊、蛇、鸽”所以其他任何动物都是无效的。如果用户输入这 3 种动物中的一种，则输出应该是哺乳动物、爬行动物或鸟类。

我已经写了数据代码这不是整个代码

。数据

哺乳动物：.asciiz “它是哺乳动物”

鸟：.asciiz “这是一只鸟”

爬行动物：.asciiz “这是爬行动物”

无效：.asciiz“无效”

检查： .asciiz "bear\n"

所以我的问题是你能像这样在支票上存储多个字符串吗？

检查： .asciiz "bear\n","snake\n","pigeon\n" <- 我不知道你是否可以这样做。

有没有正确的方法来做到这一点？我想在检查时存储多个字符串，以便检查它是否是输入的动物之一，然后进行相应的输出。

谢谢。

# multithreading - pthread_cond_timedwait 中的秒数溢出

> ID：12828632
> 
> 赞同：0
> 
> 时间：2012-10-10T21:23:36.940
> 
> 标签：multithreading, operating-system, pthreads, spinlock

我有一个用例，我想获取一个条件变量并在一段时间后释放它（例如：我有一个按时间排序的事件队列，我想阻塞指定的持续时间。）

```
Duration = Earliest Time in Q - Current Time() 
```

我遇到了以下内容，这正是我的目的。

```
 pthread_cond_timedwait(pthread_cond_t *restrict cond,
 pthread_mutex_t *restrict mutex,
 const struct timespec *restrict abstime); 
```

但问题是 timespec.sec 是 time_t （这是一个 32 有符号类型）并且它溢出。有解决方法吗？是否有任何其他可用的构造，我们将阻止更长的时间？我正在使用 Linux 平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:21:54.043

在 64 位 Linux 环境中，`time_t`是 64 位而不是 32 位。32 位`time_t`要到 2038 年才会溢出，因此您还有几年的时间来升级您的机器。

# php - Amazon SWF：如果最后一个 SWF 事件类型是 DecisionTaskCompleted，则决策程序会卡住

> ID：12828633
> 
> 赞同：1
> 
> 时间：2012-10-10T21:23:43.183
> 
> 标签：php, amazon, amazon-swf

我正在运行一个简单的 Decider pollForDecisionTask 循环。*但是当 Amazon SWF 的最后一个事件类型是DecisionTaskCompleted*时，它就会卡住。我的意思是，响应很好，但是 taskToken 是空的！！有人有线索吗？我重新检查了任务列表和域名，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:04:01.827

我在 Amazon SWF 论坛中开始的这个帖子正确回答了这个问题：[https ://forums.aws.amazon.com/message.jspa?messageID=389259](https://forums.aws.amazon.com/message.jspa?messageID=389259)

**精简版：**

*   工作流执行卡在 DecisionTaskCompleted 因为我用一个空的 Decision（一个空数组！）调用了 respond_decision_task_completed()；
*   这是一个死胡同状态（可能必须终止工作流执行）；
*   发送一个空的决策（一个空数组）应该被视为决策代码中的一个错误。

（感谢亚马逊格言：[https](https://forums.aws.amazon.com/profile.jspa?userID=149801) ://forums.aws.amazon.com/profile.jspa?userID=149801 ）

# javascript - 匿名函数包装局部变量并返回新函数

> ID：12828634
> 
> 赞同：2
> 
> 时间：2012-10-10T21:23:44.307
> 
> 标签：javascript, canvas, anonymous-function, kineticjs

我非常抱歉又问了一个匿名函数问题，但是每次我弄清楚它们时，javascript都会给我抛出另一个曲线球。

我正在使用[KineticJS](http://www.html5canvastutorials.com/kineticjs/html5-canvas-events-tutorials-introduction-with-kineticjs/)创建许多圆圈，然后像这样为它们设置动画（按照[这些教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-animate-position-tutorial/)）

```
for ( i = 0; i < rows; i++ )
{
   for ( j = 0; j < cols; j++ )
   {
      index = i * cols + j;
      circles [ index ] = new Kinetic.Circle({...});
      ...
   }
}
...
for ( i = 0; i < rows; i++ )
{
   for ( j = 0; j < cols; j++ )
   {
      index = i * cols + j;
      anims [ index ] = new Kinetic.Animation({func: function ( frame )
            {
               ( function ( innerCircle )
               {
                  ...
               } ( circles [ index ] ) );
            },
            node: layer
         }
      );
   }
} 
```

我的意图是`index`在创建匿名函数时传递当前值。问题是只有最后一张图片是动画的，我不知道为什么。这是[完整的jsfiddle](http://jsfiddle.net/pukster/bBskB/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:25:45.857

您应该创建新变量范围的函数位于错误的位置。它应该在被传递的函数之外，并且应该*返回*一个新函数。

返回的函数将有权访问所需的值。

```
for ( i = 0; i < rows; i++ )
{
   for ( j = 0; j < cols; j++ )
   {
      index = i * cols + j;
      anims [ index ] = new Kinetic.Animation({func: function(innerCircle) {
                                                        return function ( frame ) {

                                                        };
                                                      })(circles[index]),
            node: layer
         }
      );
   }
} 
```

* * *

但老实说，不要像这样内联函数。当您创建一个返回您的函数的命名函数时，它变得更加清晰。

```
function makeFunc(innerCircle) {
    return function (frame) {
           // you can use innerCircle in here
    };
}

for ( i = 0; i < rows; i++ ) {
   for ( j = 0; j < cols; j++ ) {
      index = i * cols + j;
      anims [ index ] = new Kinetic.Animation({
         func: makeFunc(circles[index]),
         node: layer
      });
   }
} 
```

有些人出于某种原因只是喜欢那些内联函数，但我认为它们只会增加混乱。命名函数会稍微分解代码，并在代码中添加一些文档。

此外，它的效率稍高一些，因为您没有在循环的每次迭代中创建一个新的内联函数。相反，您正在重用同一个来构建处理程序。

# flash - 在 Actionscript 中绘制形状

> ID：12828640
> 
> 赞同：0
> 
> 时间：2012-10-10T21:24:06.297
> 
> 标签：flash, apache-flex, matrix, line, shape

所以我需要在画布上动态地在 Actionscript 中绘制一些自定义形状（比如一些由线和圆组成的纺车）。我正在使用 Flash 生成器。

**问题1：** 什么会更好（更快）：

*   在画布的图形上绘制，在每一帧上清除所有内容并重新绘制？
*   创建多个Shape对象并相应地变换它们？

**问题 2：** 如何相对于其中心而不是相对于其父级旋转一些 Shape？（尝试使用矩阵，但它们相对于父容器工作）。也许有一些推送弹出矩阵功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:37:33.860

问题 1：几乎可以肯定直接使用 Shapes 会更快。当并非所有内容都必须重绘等时，Flash Player 会更好地更新屏幕。但是，当性能成为问题时，通常最好编写一个简短的测试。

问题 2：`Shapes`are `DisplayObjects`，所以您可以只使用该`rotation`属性，它们将围绕其原点（`(0,0)`点）旋转。只需确保相对于原点绘制形状，并使用其`x` `y`属性将其移动到正确的位置（例如，对于以 (70,70) 为中心的 20x20 矩形）：

```
var rect : Shape = new Shape();
rect.graphics.beginFill(0xffffff);
rect.graphics.drawRect(-10,-10,20,20); // center it properly about (0,0)
rect.graphics.endFill();
rect.x = 70.0; rect.y = 70.0; rect.rotation = 45.0; // move and rotate 
```

# refinerycms - 如何从 RefineryCMS 管理区域中删除扩展？

> ID：12828650
> 
> 赞同：1
> 
> 时间：2012-10-10T21:24:38.493
> 
> 标签：refinerycms

我从 RefineryCMS 中删除了一个扩展，但该扩展的选项卡仍在 RefineryCMS 管理区域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:17:01.260

大多数引擎安装都带有数据库迁移。查看 db/migrate 并识别与引擎相关的任何迁移。然后：

```
rake db:migrate:down VERSION=<number of migration to reverse> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T09:32:31.443

尝试使用这个：

```
rails destroy refinery:engine [refinery-engine-name] 
```

# python - 在python中匹配二维数组中的一维数组

> ID：12828656
> 
> 赞同：1
> 
> 时间：2012-10-10T21:24:58.110
> 
> 标签：python, numpy

我正在尝试使用 python 比较一维数组集合中的一维数组。例如：

```
import numpy as np;
data= np.array( [  [1,2] , [2,3] ,[3,4], [1,2] , [0,9] ])
#I want to get the indexes of [1,2] which are 0 and 3 for above list 
```

有谁知道如何在 python 中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:28:53.150

```
In [116]: data = np.array( [  [1,2] , [1,3] ,[3,4], [1,2] , [0,9] ])

In [117]: np.where(np.prod(data == [1,2], axis = -1))
Out[117]: (array([0, 3]),) 
```

# http - Cache-Control: 'private' 不需要'no-cache="set-cookie"'？

> ID：12828664
> 
> 赞同：11
> 
> 时间：2012-10-10T21:25:44.267
> 
> 标签：http, http-caching

我对 Cache-Control 标头的“私有”指令的定义的解读是，它将防止响应的任何部分被中间代理缓存。因此，基于此，听起来如果我使用“私有”指令，那么就没有必要也使用“no-cache =“set-cookie”指令来告诉中间代理抑制 Set-Cookie 的缓存标题。

[但是，在本文档](http://www.ietf.org/rfc/rfc2109.txt)的第 4.2.3 节中，它说：

> 源服务器应根据情况发送以下附加 HTTP/1.1 响应标头：
> 
> *   禁止缓存 Set-Cookie 标头：缓存控制：no-cache="set-cookie"。
>     
>     
>     
>     和以下之一：
>     
>     
> *   禁止在共享缓存中缓存私有文档：缓存控制：私有。
>     
>     
>     
>     [...]

我在网上看到了大量同时具有这两个指令的示例。

那么我真的需要这两个来防止中间代理缓存 Set-Cookie 标头吗？我一直在做一些测试，似乎 Internet Explorer 通过每次发出完整请求来响应 'no-cache="set-cookie"' 指令，所以如果不是，我宁愿不包括它必要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:01:07.433

`Cache-Control: Private`将阻止中间缓存存储内容，因此 set-cookie 指令在这种情况下不适用。

# javascript - 使用 JavaScript 的海量数据渲染性能

> ID：12828666
> 
> 赞同：0
> 
> 时间：2012-10-10T21:25:52.487
> 
> 标签：javascript, rendering

我正在为 javascript 中的软件产品开发一个特殊的网格解决方案。数据通过服务器端的 PHP 脚本收集，并通过 JSON 数组推送到 JavaScript。在我的脚本中，我必须解析这个数组并渲染网格行。这是我的问题。如果我收到例如 4000 行，javascript 渲染速度非常快，但我认为瓶颈是浏览器......

我的问题是，是否可以只渲染可见部分？我需要滚动到其他信息，但如果它不可见，浏览器不需要渲染它。是否可以在视口之外渲染某些东西？

我需要设置宽度和位置，这只有在我将新元素添加到视口时才有可能，并且由于大量数据而这非常慢......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:28:01.737

这里的解决方案可能是在客户端对您的数据进行分页。这样，您可以使用 JS 对对象数组进行排序，并且一次只需将一部分数据插入到 DOM 中。

客户端分页库选项已在[此处](https://stackoverflow.com/questions/723459/client-side-pagination)讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:29:49.560

DOM 更新是链中最慢的部分。如果可以的话，在内存中处理结果并一次性将其插入到 DOM 中。

# python - return 语句中的 Python 递归时间

> ID：12828669
> 
> 赞同：0
> 
> 时间：2012-10-10T21:26:07.020
> 
> 标签：python, python-3.x

我目前正在尝试对阶乘的递归进行计时，但我找不到在每个递归步骤中打印每个阶乘的方法。现在我已经尝试在 return 语句中打印它，这可以解决我的问题，但结果只是一堆乱七八糟的文字墙，时间碎片化了。

编辑：我应该提一下，我正在尝试获取整个过程的累积时间，而不是像下面打印语句那样的碎片化结果。

我试过类似的东西：

```
return (str(n) + '! = ' + (str(FactResult)) +  
                   ' - Runtime = %.9f seconds' % (end-start)) 
```

但这是我现在所拥有的。

```
import time
def factorial(n):
"""Factorial function that uses recursion and returns factorial of
number given."""
start = time.clock()
if n < 1:
    return 1
else:
    FactResult = n * factorial(n - 1)
    end = time.clock()
    print(str(n) + '! - Runtime = %.9f seconds' % (end-start))
    return FactResult 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:42:05.960

修复缩进和微小（外观）更改后，它似乎工作正常：

```
import time

def factorial(n):
    """Factorial function that uses recursion and returns factorial of number given."""

    start = time.clock()
    if n < 1:
        return 1
    else:
        FactResult = n * factorial(n - 1)
        end = time.clock()
        print(str(n) + '! =', FactResult, '- Runtime = %.9f seconds' % (end-start))
        return FactResult

factorial(10) 
```

它为我打印...而不打印结果值：

```
c:\tmp\___python\BobDunakey\so12828669>py a.py
1! - Runtime = 0.000001440 seconds
2! - Runtime = 0.000288474 seconds
3! - Runtime = 0.000484790 seconds
4! - Runtime = 0.000690225 seconds
5! - Runtime = 0.000895181 seconds
6! - Runtime = 0.001097736 seconds
7! - Runtime = 0.001294052 seconds
8! - Runtime = 0.001487008 seconds
9! - Runtime = 0.001683804 seconds
10! - Runtime = 0.001884920 seconds 
```

...并打印值：

```
c:\tmp\___python\BobDunakey\so12828669>py a.py
1! = 1 - Runtime = 0.000001440 seconds
2! = 2 - Runtime = 0.001313252 seconds
3! = 6 - Runtime = 0.002450827 seconds
4! = 24 - Runtime = 0.003409847 seconds
5! = 120 - Runtime = 0.004300708 seconds
6! = 720 - Runtime = 0.005694598 seconds
7! = 5040 - Runtime = 0.006678577 seconds
8! = 40320 - Runtime = 0.007579038 seconds
9! = 362880 - Runtime = 0.008463659 seconds
10! = 3628800 - Runtime = 0.009994826 seconds 
```

**编辑**

对于累积时间，您必须在通话之外进行测量。否则，您将无法捕获开始时间。它也更自然：

```
import time

def factorial(n):
    """Factorial function that uses recursion and returns factorial of number given."""

    if n < 1:
        return 1
    else:
        return n * factorial(n - 1)

n = 10

start = time.clock()
result = factorial(n)
end = time.clock()

print(str(n) + '! =', result, '- Runtime = %.9f seconds' % (end-start)) 
```

它打印：

```
c:\tmp\___python\BobDunakey\so12828669>py a.py
10! = 3628800 - Runtime = 0.000007200 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:37:02.217

将“end = time.clock()”和 print 语句移到捕获 n<1 的块中的“return 1”之前。这是递归堆栈最大深度的最后一次执行，因此您将错过的只是备份它。为了得到最合适的结果，您应该遵循 NullUserException 的建议和递归方法之外的时间。

# python - Python preinterpeter 扩展导入

> ID：12828677
> 
> 赞同：1
> 
> 时间：2012-10-10T21:26:42.997
> 
> 标签：python, import, expand, precompile

> **可能重复：**
> [如何将多个 Python 源文件连接到一个文件中？](https://stackoverflow.com/questions/1580746/how-to-concatenate-multiple-python-source-files-into-a-single-file)

是否有 Python “预解释器”将包含导入的 .py 模块作为输入并展开它，以便它可以在命令行或 Telnet 会话的解释器会话中内联运行？可以保留内置或已安装模块的导入，但我希望预解释器扩展我自己的模块。这样，我可以避免安装，同时仍然采用模块化编程技术。例如，如果我编写这两个模块：

myprint.py：

```
from math import pi
def print_pi():
    print "{0:6f}".format(pi) 
```

主要.py：

```
from myprint import print_pi
print_pi() 
```

在 main.py 上运行预解释器，输出将是：

```
from math import pi
def print_pi():
    print "{0:6f}".format(pi)

print_pi() 
```

2012 年 10 月 10 日 22:36 美国东部更新：

感谢大家的回应！我的程序的运行时主机永久安装在机车上，我的程序将从那里查询和监视该计算机和许多其他车载系统。您可以正确预测此计算环境是安全且任务关键的（因此需要我团队的监控软件）。在这样的环境中安装软件需要特权，消耗资源，并且给系统带来很小但真正的风险。因此，铁路公司实施了谨慎但耗时数周的检查，以仔细检查要安装的软件，包括变更控制委员会的签字。这是我们计划好的路线。但是，如果我们可以消除这种风险，从而通过在没有任何安装的情况下运行来减少形式，那么这至少是一个值得考虑的优势。然而，我们不希望我们的架构受到非安装要求的限制，也就是说，我们不希望必须在一个模块中编写整个程序。从你的回答看来，我的想法是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:32:47.543

您的示例假定 Python 导入类似于 C 宏。事实并非如此。Python 的导入功能更加强大和复杂。因此，不能通过复制几行代码来替换导入。答案是：不，没有这样的预处理器。但是，如果您更详细地指定您真正想解决的问题，我们可能会帮助您在 python 中解决它。

# android - android类加载，apache http客户端库

> ID：12828684
> 
> 赞同：0
> 
> 时间：2012-10-10T21:27:14.817
> 
> 标签：android, httpclient, apache-httpclient-4.x

我正在尝试对 URL 进行 HTTP POST。后端需要一个文本字段和一个文件。我正在使用 Android 4.1（minSdkVersion = 8，targetSdkVersion = 15）。我已经看过很多关于如何在 android 上执行此操作的示例（[通过 Java lib Apache Commons 上传文件的简明示例](https://stackoverflow.com/questions/3698059/concise-example-of-file-upload-via-java-lib-apache-commons)）。但是，我注意到 PostMethod 不存在于 Android 4.1 附带的 apache httpclient 版本中。我的问题如下。

*   Android 4.1 附带哪个版本的 apache httpclient？
*   如果我下载最新版本的 httpclient (v4.2.1)，我是否只需将 jar 复制/粘贴到我的 /libs 目录中？
*   android如何进行类加载？android 如何知道我使用的是较新的 httpclient 而不是 android.jar 中的内容？
*   有谁知道apache httpclient jars是否可以与android应用程序一起“开箱即用”？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:40:51.333

*   [http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)
*   如果使用相同的命名空间，jar 可能会或可能不会优先（避免它）
*   您应该重构并更改命名空间
*   我从来没有上传过文件需要看api

# jquery - jQuery：选择一个内容完全一样的元素

> ID：12828685
> 
> 赞同：0
> 
> 时间：2012-10-10T21:27:30.210
> 
> 标签：jquery

我想选择所有内容完全是“^”的 A 元素（这些是返回到顶部的链接）。怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:29:49.757

假设它们是锚标签，您可以使用：

```
$("a").filter(function(){
    return $(this).text() === "^";
}).wrapInner("<span />"); 
```

**更新评论**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:30:37.580

尝试包含选择器[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/) ...

```
$("a:contains('^')"); 
```

虽然它不会只匹配确切的字符串，但包含该文本的字符串，它可能已经足够好了。如果没有，您可以按照其他答案的建议使用过滤器。为了清楚...

**编辑**对不起，使用该`text`方法更新也将匹配任何父包装元素，因为子元素将被剥离，如果您只想要包含内容为“^”的文本节点的直接元素而不是使用该`html`方法...

```
$("a").filter(function() {
  return $(this).html() === "^";
}); 
```

我创建了一个示例小提琴[http://jsfiddle.net/7fXUH/](http://jsfiddle.net/7fXUH/)，

**编辑**我上面的最后一点现在已经指定了标签，你不太可能在锚点内嵌套锚点，但无论如何它可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:30:58.750

```
$(":contains('^')") 
```

[文档 jQuery](http://api.jquery.com/contains-selector/)

# gcc - 在具有 32 位用户空间的 64 位系统上，Configure 无法检测到正确的 ld

> ID：12828687
> 
> 赞同：4
> 
> 时间：2012-10-10T21:27:32.603
> 
> 标签：gcc, linker, g++, 32bit-64bit, autoconf

我有一个在 lxc 容器中运行的 i386 debian 系统。用户态是 32 位的，内核是 64 位的。因此 configure 检测到这一点：

```
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu 
```

可能这是取自*uname -m的输出*

我有一个用 gcc 构建的包，结果是一个正确的 32 位二进制文​​件。不幸的是，在另一个 c++ 项目中，我得到了这个：

```
configure:8595: checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries 
```

从这里开始，链接器正在使用此开关，因此将尝试链接 64 位库而不是 32 位库，但它失败了：

```
/usr/bin/ld: skipping incompatible /usr/lib/libboost_program_options.so when searching for -lboost_program_options
/usr/bin/ld: skipping incompatible /usr/lib/libboost_program_options.a when searching for -lboost_program_options
/usr/bin/ld: cannot find -lboost_program_options
collect2: ld returned 1 exit status 
```

虽然库 .so 文件是正确的 32 位 ELF：

```
file /usr/lib/libboost_program_options.so.*      
/usr/lib/libboost_program_options.so.1.42.0: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, stripped 
```

奇怪的是，配置对其他项目工作正常，并且正确检测到链接器以使用正确的拱门（elf_i386）：

```
checking whether the gcc linker (/usr/bin/ld -m elf_i386) supports shared libraries... yes 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-30T14:23:52.730

我只是删除命令语法的未知数。问题是目标：`/usr/local/libexec/gcc/x86_64-unknown-linux-gnu/` 在配置文件中重新配置目标的想法？

这对我有用：

代替： `./configure --host=x86_64-unknown-linux-gnu --build=x86_64-unknown-linux-gnu \ --target=x86_64-unknown-linux-gnu --options...`

经过： `./configure --host=x86_64-linux-gnu --build=x86_64-linux-gnu --options...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T01:44:24.763

> 可能这是取自 uname -m 的输出

这个配置脚本显然很混乱。

为了不混淆它，请准确地告诉它*你*想要它做什么：

```
./configure --host=i686-unknown-linux-gnu --build=i686-unknown-linux-gnu \
  --target=i686-unknown-linux-gnu 
```

# ruby-on-rails-3 - 如何使用 nginx 和 Unicorn 托管多个 Rails 应用程序？

> ID：12828693
> 
> 赞同：11
> 
> 时间：2012-10-10T21:27:56.360
> 
> 标签：ruby-on-rails-3, nginx, unicorn

如何使用 nginx 和 Unicorn 托管多个 Rails 应用程序？

由于“[部署到 VPS](http://railscasts.com/episodes/335-deploying-to-a-vps) ”，我目前有一个站点启动并运行。

我已经搜索过，但我需要一个分步指南来完成这项工作。我发现的结果没有得到很好的解释，无法帮助我理解如何实现这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T23:09:29.013

基本上，你做的事情和你做的一样，让你的第一个应用程序运行起来，减去 Nginx 安装。所以，不管你为你的第一个应用程序运行你的 Unicorn 实例，为你的下一个应用程序再做一次。

然后，您可以将另一个服务器块添加到您的 Nginx 配置中，其中包含指向该新 ​​Unicorn 实例的上游。

一个 Nginx 为整台机器运行就可以了，每个应用程序运行一个 Unicorn。

希望这会有所帮助。

* * *

这是您需要为 Nginx 添加以服务其他应用程序的附加服务器块的示例：

```
upstream unicorn_app_x {
  server unix:/path/to/unicorn/socket/or/http/url/here/unicorn.sock;
}

server {
  listen 127.0.0.1:80;
  server_name mysitehere.com aliasfor.mysitehere.com;
  root /path/to/rails/app/public;

    location / {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (!-f $request_filename) {
      proxy_pass http://unicorn_app_x;
      break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T08:44:34.717

上面提供的说明还不够。我的启动文件：/etc/init.d/unicorn 有几个对单个主机配置的引用。使用这些配置，它不会为第二个主机服务。

所以我创建了一个新的独角兽启动实例。

cp /etc/init.d/unicorn /etc/init.d/unicorn_app_x

编辑 /etc/init.d/unicorn_app_x，用对第二个站点的引用替换对第一个站点的引用：包括唯一的套接字。

然后我将文件添加到自动启动：update-rc.d act_unicorn defaults

它终于奏效了！

# iphone - Objective C Parsing JSON，Dictionary 返回一个 NSCFString 而不是 NSArray

> ID：12828698
> 
> 赞同：2
> 
> 时间：2012-10-10T21:28:16.713
> 
> 标签：iphone, objective-c, xcode, json

我想要做的是获取一个 JSON 提要，然后遍历结果。但是，当我从字典中获取对象时，我一直在获取字符串而不是数组。关于我做错了什么的任何想法？

这是 JSON：

```
[
  {
    "_id": "4f6d9a7c1d0b4900010007ee",
    "geo_triggers": [
      {
        "_id": "4fc3e5fdc7234e0001000002",
        "location": [1,1],
        "longitude": "1",
        "latitude": "1",
        "radius": 1,
        "location_name": "Test 1"
      },
      {
        "_id": "4fc61f3762f53f0001000043",
        "location": [-71.057673,42.355395],
        "longitude": "-71.057673",
        "latitude": "42.355395",
        "radius": 1000,
        "location_name": "Test2"
      }
    ]
  }
] 
```

这是目标 C 代码：

```
const char* className = class_getName([result class]);
NSLog(@"Result is a: %s", className);
NSLog(@"%@", result); //string
NSArray* json = [result objectForKey:@"result"]; //should be an array of dictionaries
NSLog(@"JSON Output: %@", json);
const char* className1 = class_getName([json class]);
NSLog(@"yourObject is a: %s", className1); 
```

这是输出：

```
Result is a: __NSDictionaryI
2012-10-10 17:15:15.165 App[12980:19d03] {
    result = "[{\"_id\":\"4f6d9a7c1d0b4900010007ee\",\"geo_triggers\":[{\"_id\":\"4fc3e5fdc7234e0001000002\",\"location\":[1.0,1.0],\"longitude\":\"1\",\"latitude\":\"1\",\"radius\":1,\"location_name\":\"Test 1\"},{\"_id\":\"4fc61f3762f53f0001000043\",\"location\":[-71.057673,42.355395],\"longitude\":\"-71.057673\",\"latitude\":\"42.355395\",\"radius\":1000,\"location_name\":\"Test2\"}]}]";
}
2012-10-10 17:15:15.166 App[12980:19d03] JSON Output: [{"_id":"4f6d9a7c1d0b4900010007ee","geo_triggers":[{"_id":"4fc3e5fdc7234e0001000002","location":[1.0,1.0],"longitude":"1","latitude":"1","radius":1,"location_name":"Test 1"},{"_id":"4fc61f3762f53f0001000043","location":[-71.057673,42.355395],"longitude":"-71.057673","latitude":"42.355395","radius":1000,"location_name":"Test2"}]}]
2012-10-10 17:15:15.166 App[12980:19d03] yourObject is a: __NSCFString
2012-10-10 17:15:15.166 App[12980:19d03] -[__NSCFString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0xb331800 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:32:44.240

您的`result`变量指向字典。字典包含一个键。那把钥匙是`@"result"`。该键的值是一个字符串，`@"[{\"_id\":\"4f6d9a7c1d0b4900010...`。

换句话说，您还没有真正反序列化您的 JSON。您需要获取 key 的值`result`并通过 JSON 反序列化器运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:38:51.120

首先需要解码结果。以上是JSON，所以我建议这样做

1.  如果您还没有它，请下载 JSONKit.h 并将其包含在您的项目中
2.  然后你可以做

    1.  `NSString* json = [result JSONString];`查看输出
        或
    2.  `id jsonDict = [[JSONDecoder decoder] objectWithData:responseData];` 之后你可以做类似的事情 [jsonDict objectForKey:@"_id"]; ///ETC

# c# - 仅复制较新的文件

> ID：12828700
> 
> 赞同：0
> 
> 时间：2012-10-10T21:28:21.713
> 
> 标签：c#, copy

我目前正在使用此代码：

```
 if (!Directory.Exists(command2)) Directory.CreateDirectory(command2);

    if (Directory.Exists(vmdaydir)) Directory.Delete(vmdaydir,true);

    if (!Directory.Exists(vmdaydir)) Directory.CreateDirectory(vmdaydir);

    var dir = Path.GetDirectoryName(args[0]);

    sb.AppendLine("Backing Up VM: " + DateTime.Now.ToString(CultureInfo.InvariantCulture));
    Microsoft.VisualBasic.FileIO.FileSystem.CopyDirectory(dir, vmdaydir);
    sb.AppendLine("VM Backed Up: " + DateTime.Now.ToString(CultureInfo.InvariantCulture)); 
```

如您所见，我正在删除目录，然后将文件夹复制回来。由于该目录的大小约为 80gb，因此这需要很长时间。我意识到我不需要复制所有文件，只需复制已更改的文件。

如何将文件从一个文件夹复制到另一个文件夹，但只复制较新的文件？有人有什么建议吗？

==== 编辑 ====

我假设我可以对每个文件进行文件比较，然后将其复制到新目录，遍历每个文件夹/文件？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:34:00.807

使用 FileInfo 类，并使用 LastWriteTime 属性获取文件的最后修改时间。将其与您检查的时间进行比较，并仅获取较晚的文件。

遍历目录中的文件，检查最后修改时间 (FileInfo.LastWriteTime) - 任何较新的文件都会被复制。

有关详细信息，请参阅[FileInfo 类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:38:49.700

尝试执行此操作时需要小心，否则您可能会锁定文件，否则另一个应用程序可能无法完成它，您可能会在准备好之前尝试复制它。

所以请按照以下步骤...

1) 尝试锁定文件

2) if(got lock) 复制文件

3) else 稍等片刻

4) 转到 1

:)

# javafx - 在 JavaFX 中出现错误

> ID：12828703
> 
> 赞同：0
> 
> 时间：2012-10-10T21:28:32.190
> 
> 标签：javafx, netbeans-7

我正在尝试测试此代码，但遇到了问题。我有默认 JavaFX 平台的 netbeans。![在此处输入图像描述](../Images/5cc579c4172473e0610b6f728c336497.png)

这个例子来自这个网站：[http ://onjava.com/pub/a/onjava/2007/07/27/introduction-to-javafx-script.html?page=4](http://onjava.com/pub/a/onjava/2007/07/27/introduction-to-javafx-script.html?page=4)

```
 package captureexample1;

import java.io.*;
import javafx.ui.*;
   import javafx.ui.canvas.*;
 import javafx.ui.filter.*;
import java.awt.Robot;
import java.awt.Rectangle;
import java.awt.image.RenderedImage;
import javax.imageio.ImageIO;
 import java.lang.System;
  class CaptureExample extends CompositeNode{
  attribute lx: Integer;
  attribute ly: Integer;
  operation CaptureExample();
   }
   attribute CaptureExample.lx = 0;
  attribute CaptureExample.ly = 0;
    operation saveCapture(lx_copy:Integer, ly_copy:Integer) {
     var robot = new Robot();
     var rect = new Rectangle (lx_copy, ly_copy, 50, 50);
    var BI=robot.createScreenCapture(rect);
    var file = new File(".//capture.jpg");
    ImageIO.write((RenderedImage)BI, "jpg", file);
     }
     function CaptureExample.composeNode() =
     Group{
     transform: []
    content:[ImageView {
     transform: []
      image: Image { url: ".//app//Sunset.gif" }
      cursor: DEFAULT
     onMouseClicked: operation(e:CanvasMouseEvent) {
     saveCapture(e.source.XOnScreen,e.source.YOnScreen);
     }
      onMouseMoved: operation(e:CanvasMouseEvent) {
      lx = e.x;
      ly = e.y;
       }
     },
      Rect{
    x: bind lx
     y: bind ly
     width: 50
     height:50
     strokeWidth: 1
    stroke: black
    }]
    };
   Frame {
     centerOnScreen: true
     visible: true
    height: 230
    width: 300
    title: "Capture the screen..."
    onClose: operation() {System.exit(0);}
      content: ScrollPane {
    background: white
     view: Canvas {
      background: black
        cursor: DEFAULT
        content: CaptureExample
           }
         }
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:28:43.463

看来您正在混合 JavaFX 脚本和 JavaFX2。

*   JavaFX 脚本（又名 JavaFX 1.3）已过时，不受支持且过时。
*   现代 JavaFX 2 使用 Java 作为语言而不是 FX 脚本。您可以在此处查看示例：http: [//docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm](http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm)

如果你*真的*想使用 JavaFX 1.3：

*   获取较旧的 NetBeans，例如 6.1
*   将您`.java`的文件重命名为`.fx`

但是，如果您只是想学习 JavaFX，我真的建议您尝试 JavaFX 2。

# c# - Listview win8 xaml如何创建列？

> ID：12828704
> 
> 赞同：5
> 
> 时间：2012-10-10T21:28:31.463
> 
> 标签：c#, xaml, listview, windows-8

您好我正在尝试在 ListView 中创建 3 列。

我读了这个，但我想在 C# 中以编程方式设置每列中的数据：

[如何在行和列中显示数据 XAML windows 8](https://stackoverflow.com/questions/10869715/how-to-display-data-in-rows-and-columns-xaml-windows-8)

例如，我想要艺术家姓名、歌曲名称和艺术家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:38:17.093

假设你有这样的东西来存储你的数据：

```
public class SongDetails
{
    public string ArtistName {get; set;}
    public string SongName {get; set;}
    public string Artist {get; set;}
} 
```

和一个定义了 DataTemplate 的 ListView（如您提供的链接中所示），只需给您的 ListView 一个名称：

```
<ListView Name="ListViewSongs">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid Width="500" VerticalAlignment="Center">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="150" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding Artist}" />
                <TextBlock Grid.Column="1" Text="{Binding ArtistName}" />
                <TextBlock Grid.Column="2" Text="{Binding SongName}" />
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

然后，从后面的代码来看，这只是以下情况：

```
var songDetails = new[]
    {
        new SongDetails {Artist = "a1", ArtistName = "a2", SongName = "a3"},
        new SongDetails {Artist = "b1", ArtistName = "b2", SongName = "b3"}
    };

ListViewSongs.ItemsSource = songDetails; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-16T20:30:28.800

如果您不想硬编码项目/网格的宽度（响应式设计），则改进了[Seb Boulet 答案的](https://stackoverflow.com/questions/12828704/listview-win8-xaml-how-to-create-columns#answer-12830087)XAML ：

```
<ListView Name="ListViewSongs">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="150" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="{Binding Artist}" />
                <TextBlock Grid.Column="1" Text="{Binding ArtistName}" />
                <TextBlock Grid.Column="2" Text="{Binding SongName}" />
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

相关主题：[如何让 ListBox ItemTemplate 水平拉伸 ListBox 的整个宽度？](https://stackoverflow.com/questions/838828/how-to-get-a-listbox-itemtemplate-to-stretch-horizontally-the-full-width-of-the)

# javascript - 如何合并和打乱数组数组

> ID：12828707
> 
> 赞同：2
> 
> 时间：2012-10-10T21:28:44.257
> 
> 标签：javascript, jquery, arrays

有数组数组

```
var a = [[[1, "alpha", "a"],
          [2, "beta",  "b"]],
         [[3, "gama",  "c"]],
         [[4, "delta", "d"]]];

var b = []; 
```

**1）**我怎样才能合并`a[0]`和`a[2]`进入`b`？

**2）**我怎样才能洗牌阵列`b`？

* * *

这是我正在使用的洗牌算法>>

```
Array.prototype.shuffle = function() {
  for (var i = 0; i < this.length; i++)
    this.push(this.splice(Math.random() * (this.length - i), 1)[0]);
  return this;
} 
```

有语法

```
myArray.shuffle(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T21:30:46.723

要合并，您可以简单地使用[concat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)。

```
var b = a[0].concat(a[2]); 
```

对于改组，您需要编写自己的改组逻辑。没有这样的API。

洗牌 -

*   [我怎样才能洗牌一个数组？](https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array-in-javascript)
*   [如何随机化（随机播放）JavaScript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:31:11.853

```
$.merge( a[0], b );
$.merge( a[2], b ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:33:55.200

您不需要 jQuery 特定的功能来执行此操作

看看[http://w3schools.com/jsref/jsref_concat_array.asp](http://w3schools.com/jsref/jsref_concat_array.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:37:03.887

“洗牌”非常简单：

```
var arry = [0,1,2,3,4,5,6,7,8,9];
arry.sort(function(a,b){
    return Math.random() * 2-1;
}); 
```

# python - 在忽略行尾的同时比较字符串

> ID：12828709
> 
> 赞同：1
> 
> 时间：2012-10-10T21:29:01.333
> 
> 标签：python

问题：

```
stra = """ this
is
a
test 
line """

strb = " this is a test line" 
```

stra 不等于 strb，因为在 stra 中引入了结束行字符。

请让我知道如何解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:30:32.073

使用方法[`strip`](http://docs.python.org/library/string.html#string.strip)删除尾随字符：

```
>>> " x".strip()
"x"
>>> " x".strip() == "x ".strip()
True 
```

使用方法[`split`](http://docs.python.org/library/string.html#string.split)逐字比较字符串：

```
>>> " x y\nz".split() # return list of "words" separated by whitespace characters
["x", "y", "z"]
>>> " x y\nz".split() == "x  y z".split()
True 
```

# algorithm - 简单的存储分配算法

> ID：12828711
> 
> 赞同：1
> 
> 时间：2012-10-10T21:29:16.137
> 
> 标签：algorithm, storage, allocation

我们有一大堆机器使用一大堆数据存储。我们希望将所有机器的数据转移到新的数据存储中。这些新商店的机器可用存储空间量各不相同。此外，每台机器需要存储的数据量各不相同。一台机器的所有数据都必须存储在一个数据存储中；它不能被拆分。除此之外，如何分配数据并不重要。

我们目前拥有的数据多于我们的空间，因此不可避免地有些机器需要将它们的数据留在原处，直到我们找到更多数据。与此同时，有没有人知道一种算法（相对简单：我没那么聪明），它可以为我们拥有的存储提供最佳或接近最佳的分配（即分配后新商店剩余的空间最少)?

我意识到这听起来像是一个家庭作业问题，但我向你保证这是真的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:03:31.210

乍一看，这似乎是多背包问题（[http://www.or.deis.unibo.it/knapsack.html](http://www.or.deis.unibo.it/knapsack.html)，第 6.6 章“多背包问题 - 近似算法”），但实际上它是一个调度问题因为它涉及到时间因素。不用说，解决这些类型的问题很复杂。一种方法是将它们建模为网络流并使用像 GOBLIN 这样的网络流库。

在您的情况下，请注意您实际上并不想以最佳方式填充存储，因为如果您这样做，则更有可能存储较小的数据包，因为它会导致更紧密的包装。这很糟糕，因为如果将大包裹留在机器上，那么您未来的包装将变得越来越糟糕。您要做的是优先存储较大的包裹，即使这意味着在商店中留出更多额外空间，因为这样您将来会获得更大的灵活性。

下面是如何用一个简单的算法来解决这个问题：

(1) 确定 bin 大小并对其进行排序。例如，如果您有 3 个存储空间分别为 20 GB、45 GB 和 70 GB，那么您的目标是 { 20, 45, 70 }。

(2) 按大小对所有数据包进行排序。例如，您可能有数据包：{ 2, 2, 4, 6, 7, 7, 8, 11, 13, 14, 17, 23, 29, 37 }。

(3) 如果任何包裹的总和 > 95% 的商店，则将它们放入该商店并转到步骤 (1)。不是这里的情况。

(4) 生成两个包的所有排列。

(5) 如果任何排列的总和 > 95% 的存储，则将它们放入该存储中。如果有领带，则更喜欢与更大包装的组合。在我的示例中，有两个这样的对 { 37, 8 } = 45 和 { 17, 2 } = 19。（请注意，使用 { 17, 2 } 胜过使用 { 13, 7 }）。如果您找到一个或多个匹配项，请返回步骤 (1)。

好的，现在我们只剩下一家商店：70 和以下包裹：{ 2, 4, 6, 7, 7, 11, 13, 14, 23, 29 }。

(6) 将烫发数加 1 并转到步骤 5。例如，在我们的例子中，我们发现没有 3 烫发加到 70 的 95% 以上，但 4 烫发 { 29, 23, 14, 4 } = 70。最后，我们留下了机器上留下的包 { 2, 6, 7, 7, 11, 13 }。请注意，这些大多是较小的软件包。

请注意，perms 以相反的词法顺序进行测试（最大的在前）。例如，如果你有“abcde”，其中 e 是最大的，那么 3-perms 的逆词法顺序是：

cde
bde
ade
bce
ace
等

该算法非常简单，可以根据您的情况产生良好的结果。

# node.js - 为什么在提供文件时使用 NodeJS 检查套接字 remoteAddress？

> ID：12828713
> 
> 赞同：1
> 
> 时间：2012-10-10T21:29:18.010
> 
> 标签：node.js

我正在使用 NodeJS 运行一个 webapp。当我第一次开始构建这个应用程序时（大约一年前），我对 NodeJS 和 Web 编程的世界很陌生，所以我的很多代码都是直接从其他站点/教程上托管的示例中复制而来的。

但是，既然我对 Node 相当有能力，我有一个关于我刚刚实现但没有真正理解的东西的问题。

在我的文件服务器中，我有这样的语句： `if(req.socket.remoteAddress || req.socket.socket.remoteAddress == '127.0.0.1'){`如果此检查成功通过，则将文件返回给客户端，否则，不会发送任何内容。老实说，我不知道这真正检查的是什么，以及它的用途。

有人可以告诉我这到底是做什么的，以及我的服务器逻辑中是否有必要？

最好的，
萨米

PS我现在问的原因是因为我开始偶尔出现如下错误：`TypeError: Cannot read property 'remoteAddress' of undefined`

# php - 我的写入文件夹一直在清空

> ID：12828717
> 
> 赞同：3
> 
> 时间：2012-10-10T21:29:38.640
> 
> 标签：php, ajax, fopen

我正在尝试使用此代码将令牌保存到 php 文件中，但是在 2kb 之后，文件神秘地清空并且我丢失了所有数据。为什么会这样？我该如何预防？

```
 $fh = fopen('token.txt', 'a+');
    fwrite($fh, $access_token . "\n");
    fclose($fh); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:13:30.647

你说的这个token数据，是从哪里来的？由于我不经常写入文件，因此您似乎并没有更多地附加到文件而不是写入和过度写入（我可能是错的）。无论如何，如果这些数据是在会话或 cookie 或 get 变量之类的东西中累积的，或者在拍摄到您拥有的文本文件之前的程度，那可能是那里的一些问题。据我所知，在大多数情况下，会话、cookie 和获取都有一个限制，在达到所述限制之后，它们会以一种或另一种形状形式中断。因此，如果是这种情况，也许如果您的会话、cookie、get 太大，则对其执行某些操作的操作是将其视为 null、无效、空，无论如何，然后将该等价物放入您写入的文件中。 .

不幸的是，如果没有为您的整个脚本提供更多上下文，这些令牌是从哪里生成的，无论运行、发生或不断重复这些令牌以使它们变得越来越大。很难给出一个可能对您有帮助的真正好的答案。根据您上面的代码，我完全没有看到真正的限制

此外，这可能是 Windows 问题（权限或其他问题）、服务器配置问题或 php 配置问题，许多不同的变量与此问题相关，听起来更像是您的自托管开发堆栈自己的机器。

因此，总而言之，您可以提供给我们的信息越多，我们就越能提供帮助 :-)

# spring - Glassfish 3.1.2 中的 HiddenHttpMethodFilter

> ID：12828718
> 
> 赞同：0
> 
> 时间：2012-10-10T21:29:40.153
> 
> 标签：spring, jakarta-ee, glassfish-3

我正在尝试使用 spring 的 _metgod 隐藏属性处理伪装的 PUT，但即使使用了 HiddenHttpMethodFilter，请求也会以 POST 的形式通过。你还需要做什么才能在 glassfish 中启用吗？Web.xml 如下：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<display-name>Jester</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/jester-persistence.xml
        /WEB-INF/jester-service.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>jester</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jester</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>filter1</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>filter1</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:04:47.820

好的，我发现这是因为我阅读了很多关于 enctype="multipart/form-data" 的问题。结果证明 sf:form 标签解析为多部分表单，因此 spring 尝试使用 MultipartResolver 处理它们。解决此问题的 XML 如下：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>Jester</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/jester-persistence.xml
            /WEB-INF/jester-service.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>jester</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

        <!-- Needed for processing multipart forms ahead of the HiddenHttpMethodFilter -->
        <multipart-config>
            <location>/tmp</location>
            <max-file-size>20848820</max-file-size>
            <max-request-size>418018841</max-request-size>
            <file-size-threshold>1048576</file-size-threshold>
        </multipart-config>
    </servlet>

    <servlet-mapping>
        <servlet-name>jester</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Needed for processing multipart forms ahead of the HiddenHttpMethodFilter -->
    <filter>
        <filter-name>multipartFilter</filter-name>
        <filter-class>org.springframework.web.multipart.support.MultipartFilter</filter-class>
        <init-param>
            <param-name>multipartResolverBeanName</param-name>
            <param-value>filterMultipartResolver</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>multipartFilter</filter-name>
        <servlet-name>jester</servlet-name>
    </filter-mapping>

    <!-- Convert Masqueraded PUT and DELETE requests -->
    <filter>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <servlet-name>jester</servlet-name>
    </filter-mapping>

</web-app> 
```

# html - 如何将标签放在同一行

> ID：12828719
> 
> 赞同：0
> 
> 时间：2012-10-10T21:29:40.483
> 
> 标签：html, css, twitter-bootstrap

通过使用[http://twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)，
当我制作一堆标签时，它们会在一列中呈现。

```
<label>..</label>
<label>..</label>
<label>..</label> 
```

我的目标是根据屏幕的宽度将它们分成几列。

这是我的演示[http://jsfiddle.net/D2RLR/2557/](http://jsfiddle.net/D2RLR/2557/)

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:39:11.367

类似的东西？

```
<div class="row">
    <div class="span3"><label>...</label> </div>
    <div class="span3"><label>...</label> </div>
    <div class="span3"><label>...</label> </div>
    <div class="span3"><label>...</label> </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:31:48.490

您的代码几乎是正确的。你留下了几个`<div>`s 未关闭，但你也有错误地嵌套了`.controls`and 。`.control-group`

这是一个更新的小提琴，您的代码已修复以及一个包含 3 列的示例（我还更新了 javascript 并添加了用于切换复选框的按钮。如果您仍想使用复选框进行切换，您可以很容易地修改代码）：

[http://jsfiddle.net/D2RLR/2624/](http://jsfiddle.net/D2RLR/2624/)

（确保在小提琴的 html 部分向下滚动以查看第二个示例，以防屏幕小）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:33:04.983

[此示例](http://jsfiddle.net/D2RLR/2559/)使用列，并将在屏幕大小允许的情况下添加更多列。这纯粹是css和html。

[此脚本](http://jsfiddle.net/D2RLR/2561/)将根据它们所在容器的宽度调整列的大小。只需指定列数。这样，所有列将始终完美地排成一行。这使用 jquery 来调整列宽。

您可以使用 css 浮动标签。

```
<div class="column">
   <label class="float"></label>
   <input type="checkbox" value="2"> Monday
</div>
<div class="column">
   <label class="float"></label>
   <input type="checkbox" value="3"> Tuesday
</div>
...
<div class="clear"></div> 
```

CSS

```
.column {
   width: 200px;
   float: left;
}

.clear {
   clear: both;
} 
```

# jquery - 无法使用 jquery datepicker 格式化日期

> ID：12828720
> 
> 赞同：2
> 
> 时间：2012-10-10T21:29:42.040
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我在输入框上调用日期选择器。但是，无论我给出什么格式，它总是以 mm/dd/yyyy 格式返回日期。我希望它返回 - 30-11-2011 (dd-mm-yyyy) 格式。以下是我尝试过的选项 -

**选项1**

```
$("#birthdate").datepicker({
    changeYear: true,
    changeMonth: true
    dateFormat: 'yy-mm-dd'
    }); 
```

**选项 2**

```
$.datepicker.formatDate('yy-mm-dd', new Date(2007, 1 - 1, 26)); 
```

我的 html 包括 jquery-ui.js、jquery-ui-datepicker.js 和 jquery.js。

我已经提到[jQuery UI DatePicker - Change Date Format](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format/1328040) 和[Jquery datepicker format date not working](https://stackoverflow.com/questions/9888000/jquery-datepicker-format-date-not-working) 并尝试了所有选项，但没有一个对我有用。如果有人知道解决方案，请告诉我。

# android - 使用 gps 查找用户

> ID：12828721
> 
> 赞同：0
> 
> 时间：2012-10-10T21:29:45.807
> 
> 标签：android, map, gps

我需要创建一个应用程序，它将在地图上向在 x 距离内安装了我的应用程序的所有用户显示我。

它想知道我是否需要定期将每个用户的坐标保存在数据库中并读取位置，或者是否有其他选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:34:21.700

在数据库中跟踪用户的位置可能是您最简单的选择。它也将很好地扩展。如果您只跟踪几个用户，您可以使用另一种更简单的数据存储机制，例如 XML 文件、文本文件，甚至是某种应用程序级变量。

我确信您已经对如何最好地跟踪您的用户进行了一些研究，但如果您还没有的话，[这](https://github.com/yyl/Tracking-map-on-android)是一个很好的起点。他们将每个位置存储在手机上的本地数据库中，所以我相信您可以很容易地修改它以将相同的位置发送到网络服务或其他东西。

# html - HTML5 导航菜单文本

> ID：12828726
> 
> 赞同：0
> 
> 时间：2012-10-10T21:30:35.827
> 
> 标签：html, css, nav

我正在尝试用`<nav>`HTML5 制作一个带有简单文本和 3 个链接的导航栏。这是非常基本的，但是我的链接文本混淆了，我不知道为什么。

↪[在 JSFiddle 上查看我的代码](http://jsfiddle.net/5ruLj/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:34:50.427

你需要浮动你的`LI`，而不是你的`UL`. 不需要`position:absolute`。如果要将菜单向右移动，也**可以**将其浮动，或者使用`margin:left`. 一定要在之后清除你的花车。

看我的教程：[我喜欢列表](http://preview.moveable.com/jm/ilovelists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:36:22.213

这是因为你的 CSS 中的 position:absolute 和 position:relative 部分。

试试这个 ：

```
nav {
    width:100%;
    height:181px;
    display: block;
    background: url('http://i.imgur.com/JrTUv.png') top no-repeat;
    margin-top:30px;
}
nav ul {
    float:right;
    list-style:none;
}

nav ul li {
    display:inline-block;
} 
```

# windows - 是否可以编辑已在 Windows 批处理中输出的行？

> ID：12828728
> 
> 赞同：5
> 
> 时间：2012-10-10T21:30:42.413
> 
> 标签：windows, batch-file

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T06:54:09.037

You can ommit the *CLS* and recreating the full screen with the help of `set /p`, as `set /p` doesn't output a newline, you can append text.

Normally `set /p` is for assigning text to a variable inputted by a user, but if you use redirection from *NUL* it simply outputs text.

```
@echo off

for /L %%n in (1 1 5 ) do (
  <nul set /p ".=[]"
  ping -n 2 localhost > nul
)
echo(
echo The end 
```

The status update you asked for, can be handled the same way, as it only appends something to the line.
If you want to change parts of the line or the complete line, you need to move the cursor back or to the beginning of the line.
Both can be done with the backspace character or the carriage return character.

This is a sample which counts on a fixed screen location

```
setlocal EnableDelayedExpansion
for /f %%a in ('copy /Z "%~dpf0" nul') do set "CR=%%a"
for /L %%n in (1 1 1000) do (
  <nul set /p ".=%%n!CR!"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T04:56:16.887

# matlab - 在 Matlab 中解决某种类型的混合整数规划

> ID：12828735
> 
> 赞同：0
> 
> 时间：2012-10-10T21:30:56.793
> 
> 标签：matlab, optimization, nonlinear-optimization

我想在 matlab 中解决一个相当复杂的优化问题，我将它发布在 math.stackexchange.com 上，因为它支持 LaTeX 数学显示，

[https://math.stackexchange.com/questions/210166/some-type-of-mixed-integer-nonlinear-programming-problem](https://math.stackexchange.com/questions/210166/some-type-of-mixed-integer-nonlinear-programming-problem)

如果有人能给我一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:56:45.653

我没有详细介绍您描述的最小化问题，但它让我想到了[http://www2.maths.ox.ac.uk/chebfun](http://www2.maths.ox.ac.uk/chebfun)。它是一个开源数值计算工具箱，至少在表面上看起来很有趣。也许你可以用它来解决你的问题。

# c# - 实体框架将导航属性设置为 null

> ID：12828739
> 
> 赞同：26
> 
> 时间：2012-10-10T21:31:09.813
> 
> 标签：c#, entity-framework

我有一个实体框架数据库的第一个项目。这是模型的提取：

```
public partial class LedProject
{
    public LedProject()
    {
        this.References = new HashSet<LedProjectReference>();
        this.Results = new HashSet<LedProjectResult>();
        this.History = new HashSet<LedProjectHistory>();
    }

    public string Identifier { get; set; }
    public string Name { get; set; }
    public Nullable<System.DateTime> CompletionDate { get; set; }
    public System.DateTime CreationDate { get; set; }
    public System.Guid ProjectId { get; set; }
    public string Comment { get; set; }

    public virtual User ContactUser { get; set; }
    public virtual User CreationUser { get; set; }
    public virtual Customer Customer { get; set; }
    public virtual LedProjectAccounting Accounting { get; set; }
    public virtual LedProjectState State { get; set; }
    public virtual ICollection<LedProjectReference> References { get; set; }
    public virtual ICollection<LedProjectResult> Results { get; set; }
    public virtual User ResponsibleUser { get; set; }
    public virtual ICollection<LedProjectHistory> History { get; set; }
} 
```

```
public partial class User
{
    public System.Guid UserId { get; set; }
    public string LoginName { get; set; }
    public System.DateTime CreationDate { get; set; }
    public string Firstname { get; set; }
    public string Lastname { get; set; }
    public string Email { get; set; }
} 
```

我在设置`ResponsibleUser`类的导航项时遇到问题`LedProject`。当我将其设置`ResponsibleUser`为另一个用户并随后保存 DBContext 的更改时，更改将存储在数据库中。

但是，当我想删除当前`ResponsibleUser`的 an`LedProject`时，通过将导航属性设置为 null。更改不会存储在数据库中。

```
LedProject project = db.LedProject.Find(projectId);
project.Name = string.IsNullOrEmpty(name) ? null : name;
...
project.ResponsibleUser = responsibleUser == null ? null : db.User.Find(responsibleUser.UserId);
...
db.SaveChanges(); 
```

删除导航属性有什么技巧吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-11T07:42:23.650

问题在于导航属性的延迟加载。似乎该值首先设置为 null ，然后从数据库中加载。因此，所需的值（在我的情况下为**null**）被数据库中当前存储的值覆盖。

```
LedProject project = db.LedProject
    .Include("ResponsibleUser")
    .Where(p => p.ProjectId == projectId)
    .FirstOrDefault(); 
```

这会在加载**项目**时加载**责任**用户。这终于解决了我的问题！

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-03T12:46:53.730

就像[boindiil](https://stackoverflow.com/users/1696578/boindiil)所说，问题在于延迟加载。但是，您*只需*在要将属性设为空时加载该属性，以便实体框架机制知道它已更改。代码可能如下所示：

```
responsibleUser = responsibleUser == null ? null : db.User.Find(responsibleUser.UserId);
if (responsibleUser == null)
{
    // load the value to assure setting it to null will cause a change
    var dummy = project.ResponsibleUser; 
}

project.ResponsibleUser = responsibleUser;
...
db.SaveChanges(); 
```

我一直在想应该有一种方法可以使用 db.ChangeTracker 在没有负载的情况下强制保存，但我还没有找到它（我尝试过的几件事似乎真的很hacky）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-06T14:37:15.957

找到了无需急切加载导航属性的最佳方法，因此您仍然可以使用 EF`Find()`而不必进行黑客攻击。

在导航属性旁边使用原始 ID，其中类型是导航属性 ID 类型的任何类型（通常是用户的字符串），例如：

```
public partial class LedProject
{
    public string ResponsibleUserId { get; set; }
    public virtual User ResponsibleUser { get; set; }
} 
```

无论您在何处创建记录，都使用导航属性更新字符串，然后在您想要删除关系时执行`ledProject.ResponsibleUserId = null`。

如果您在最后将 id 命名为导航属性名称 + id 以外的名称，那么您将需要使用注释或流利的 api 来映射我认为。

更多信息：[在什么情况下我需要实体框架中的外键和导航属性](https://stackoverflow.com/questions/14915938/in-what-scenarios-do-i-need-foreign-keys-and-navigation-properties-in-entity-fra)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-30T16:45:00.880

从 Entity Framework 5.0 开始：

```
db.Entry(project).Reference(p => p.ResponsibleUser).CurrentValue = null; 
```

[https://msdn.microsoft.com/en-us/data/jj713564.aspx](https://msdn.microsoft.com/en-us/data/jj713564.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-16T06:39:26.037

请参阅[https://docs.microsoft.com/en-us/ef/ef6/fundamentals/relationships](https://docs.microsoft.com/en-us/ef/ef6/fundamentals/relationships)。

**创建和修改关系**部分解释了在分配和设置为 null 时外键属性和导航属性会发生什么。

EF5 和 forward 有一些变化，但它们的关键是定义外键属性，使关系不再是**独立关联**（缺少外键属性）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T11:49:06.967

我遇到了这个问题并想出了一个不会破坏延迟加载的小“hack”。

只需像这样在模型上定义属性 -

```
 public int? AccountId { get; set; }

    //workaround for entity framework lazy loading problem

    Account account;

    public virtual Account Account
    {
        get
        {
            return account;
        }
        set
        {
            account = value;

            if (value == null)
            {
                AccountId = null;
            }

        }
    } 
```

现在您不必急于加载导航属性，将其设置为 null 即可。更重要的是，通过将 hack 直接放在您的实体中，您不必记得在代码库的其他任何地方进行显式检查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-23T11:07:00.923

您可以像这样将所有导航属性设置为 null ：（您需要拥有 EF 上下文），此处：导入的是 IEnumerable < YourEntity>

```
 foreach (var entity in imported)
        {
            foreach (var np in _YourEntityRepository.GetReferenceProperties())
                entity.GetType().GetProperty(np.Name).SetValue(entity, null);
        } 
```

GetReferenceProperties 定义为：

```
public IEnumerable<NavigationProperty> GetReferenceProperties()
    {

        var oc = ((IObjectContextAdapter)Context).ObjectContext;
        var entityType = oc.MetadataWorkspace.GetItems(DataSpace.OSpace)
                           .OfType<EntityType>()
                           .FirstOrDefault(et => et.Name == typeof(TEntity).Name);
        if (entityType != null)
        {
            foreach (NavigationProperty np in entityType.NavigationProperties
                    .Where(p => p.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.One
                             || p.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.ZeroOrOne))
            {
                yield return np;
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-09-20T14:34:40.770

作为另一种解决方法，我将两种方法编译为扩展方法：

```
public static void SetToNull<TEntity, TProperty>(this TEntity entity, Expression<Func<TEntity, TProperty>> navigationProperty, DbContext context = null)
    where TEntity : class
    where TProperty : class
{
    var pi = GetPropertyInfo(entity, navigationProperty);

    if (context != null)
    {
        //If DB Context is supplied, use Entry/Reference method to null out current value
        context.Entry(entity).Reference(navigationProperty).CurrentValue = null;
    }
    else
    {
        //If no DB Context, then lazy load first
        var prevValue = (TProperty)pi.GetValue(entity);
    }

    pi.SetValue(entity, null);
}

static PropertyInfo GetPropertyInfo<TSource, TProperty>(    TSource source,    Expression<Func<TSource, TProperty>> propertyLambda)
{
    Type type = typeof(TSource);

    MemberExpression member = propertyLambda.Body as MemberExpression;
    if (member == null)
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a method, not a property.",
            propertyLambda.ToString()));

    PropertyInfo propInfo = member.Member as PropertyInfo;
    if (propInfo == null)
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a field, not a property.",
            propertyLambda.ToString()));

    if (type != propInfo.ReflectedType &&
        !type.IsSubclassOf(propInfo.ReflectedType))
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a property that is not from type {1}.",
            propertyLambda.ToString(),
            type));

    return propInfo;
} 
```

这允许您提供 DbContext（如果有），在这种情况下，它将使用最有效的方法并将条目引用的 CurrentValue 设置为 null。

```
entity.SetToNull(e => e.ReferenceProperty, dbContext); 
```

如果没有提供 DBContext，它将首先延迟加载。

```
entity.SetToNull(e => e.ReferenceProperty); 
```

注意，这个问题本质上是重复的：[Entity Framework will only set related entity property to "null" if I first get the property](https://stackoverflow.com/questions/21692401/entity-framework-will-only-set-related-entity-property-to-null-if-i-first-get/52427522#52427522) and [Setting a foreign key to null when using entity framework code first](https://stackoverflow.com/questions/6420976/setting-a-foreign-key-to-null-when-using-entity-framework-code-first)**

# android - 在 AutoCompleteTextView 中使用 setText() 时 TextWatcher 不起作用

> ID：12828741
> 
> 赞同：0
> 
> 时间：2012-10-10T21:31:13.523
> 
> 标签：android, autocompletetextview, textwatcher

我有一个`AutoCompleteTextView`显示下拉列表，在输入文本时会自动更新。如果文本与特定字符串匹配，则`Spinner`控件会显示特定类别。这是使用`TextWatcher`. （我使用了这两种方法`onTextChanged(...)`和`afterTextChanged(...)`。两种方法都有相同的现象。）。这在手动输入文本时工作正常。`AutoCompleteTextView`但这在设置using的文本时不起作用`setText()`。然后文本来自我开始使用 startActivityForResult 的另一个活动。控件中的值`Spinner`不会更改。如果删除一个字母并再次添加它，`Spinner`控件会正确更新其值。有谁知道为什么？有谁知道如何改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:07:04.397

一种解决方法可能是在 AutoCompleteTextView 的 setText() 上显式调用 afterTextChanged(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:48:28.187

我找到了解决方案：

从我的第二个活动返回后，我必须调用`requery()`适配器的光标 ( `((SimpleCursorAdapter)categorySpinnerAdapter).getCursor().requery();`)。也许与此同时，人们不会再打电话`requery()`了，因为它被标记为已弃用，但我稍后会处理......（有人可以解释这种行为吗？光标是否在`onPause()`或期间停用`onStop()`？）

但即使这样也不够。我`SpinnerControl`的值还没有改变。我还必须调用`setAdapter()`它`SpinnerControl`以使其再次工作（`spCategory.setAdapter(categorySpinnerAdapter);`）。（有人知道这里发生了什么吗？打开光标（或重新查询）和附加适配器都应该在`onResume()`or中完成`onStart()`吗？）

# oracle - 如何在 oracle 中将分钟转换为 DD:HH:MM 格式？假设 1008307 秒我需要显示为 DD:HH:MM 格式

> ID：12828742
> 
> 赞同：1
> 
> 时间：2012-10-10T21:31:15.093
> 
> 标签：oracle

如何在 oracle 中将秒转换为（天/小时/分钟）DD:HH:MM 格式？假设 1008307 秒我需要显示为 DD:HH:MM 格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:35:05.283

如果我了解您想要什么（不确定我是否愿意！）试试这个：

```
select to_char(start_date + (1008307 / 86400), 'DD:HH24:MI') from dual; 
```

我假设您需要说自某个时间以来的天/小时/分钟 - 这是 start_date。显然，您需要将 1008307 更改为任何值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:36:33.887

如果我明白你想要什么（我的猜测与@cagcowboy 的不同）

```
SQL> ed
Wrote file afiedt.buf

  1  select extract( day from ds_interval ) || ':' ||
  2         to_char( extract( hour from ds_interval ), 'fm00' ) || ':' ||
  3         to_char( extract( minute from ds_interval ), 'fm00' ) "dd:hh:mm format",
  4         to_char( extract( second from ds_interval ), 'fm00' ) remaining_seconds
  5    from (
  6  select numtodsinterval( 1008307, 'second' ) ds_interval
  7    from dual
  8* )
SQL> /

dd:hh:mm format                                  REM
------------------------------------------------ ---
11:16:05                                         07 
```

# wpf - 绑定到用户控件公开的命令

> ID：12828747
> 
> 赞同：0
> 
> 时间：2012-10-10T21:31:28.227
> 
> 标签：wpf, binding

我试图在今天下午早些时候实现一些东西，但无法让它按照我想要的方式工作。

如果我有一些如下所示的 XAML（我知道它不完整，但仅用于说明目的）......

```
<Window>
  <StackPanel>
    <Button />
    <UserControl1>
  </StackPanel>
</Window> 
```

...并且 UserControl1 公开了一个命令属性（目前，我为此使用了 RelayCommand），如何将 Window 中的 Button 绑定到该命令。我试图在 Window 中公开一个绑定到 UserControl1 中的 command 属性的属性，以便我可以转身并将其*重新绑定*到 Button，但 Window 中的属性始终为空。这种模式似乎适用于另一个属性（整数值）。有一个更好的方法吗？该命令有什么东西可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:07:12.630

(1) 将您的命令定义为 DepenedecyProperty 并实现它。

(2)在你的UserControl中绑定MyCommand属性按钮中的Command属性。

```
 public Class UserControl1 : UserControl 
 {

      public UserControl1()
      {
          MyCommad = new RelayCommand
                     (
                         () => { // do some stuff in execute delegate},
                         () => { return true ;}                                                        
                     );
      }

      public bool MyCommand
      {
           get { return (ICommand)GetValue(MyCommandProperty); }
           set { SetValue(MyCommandProperty, value); }
      }    

      public static readonly DependencyProperty MyCommandProperty = 
                             DependencyProperty.Register("MyCommand", typeof(ICommand),new FrameworkPropertyMetadata(null));

 } 
```

xml：

```
 <Window>
      <StackPanel>
          <Button Command={Binding ElementName=control1,Path=MyCommand,Mode=OneWay/>
          <UserControl1 x:Name="control1" />
      </StackPanel>
 </Window> 
```

# ruby - 拥有并且属于超过 1 个表

> ID：12828751
> 
> 赞同：1
> 
> 时间：2012-10-10T21:31:42.477
> 
> 标签：ruby, has-many, attr, has-and-belongs-to-many, accessible

我有一个`critical_factor`带有一些字段的脚手架（），`catalog_table_id`还有`selectRight`其他`catalog_table`带有字段名称的`table_name`脚手架（） `model`。

当我在字段中的视图中选择时，填充`critical_factor`所选表的所有字段。`catalog_table_id``selectRight`

我有一个`has_and_belong_to catalog_tables_critical_factors`与字段`catalog_table_id`，`critical_factor_id`和`table_relation_fields_id`。在最后一个字段中，我想`id`从视图`selectRight`中保存，`critical_factor`但我只能保存前两个字段。

有任何想法吗？

**关键因素模型**

```
class CriticalFactor < ActiveRecord::Base
  has_and_belongs_to_many :catalog_tables
  attr_accessible: :critical_factor_id,:selectRight, :catalog_table_id
  def selectRight=(options)
    self.catalog_tables.clear
    options.each do |option|
      unless option.empty?
        line = CatalogTable.find(catalog_table_id)
        modelo = line.model
        case modelo
          when 'ActivityTypes'
            line = ActivityType.find(options,options.id)
          when 'Programs'
            line = Program.find(options)
        end

        self.catalog_tables << line
      end
    end
end 
```

**目录表模型**

```
class CatalogTable < ActiveRecord::Base
  has_and_belongs_to_many :critical_factors
  attr_accessible :name, :model, :table
end 
```

**catalog_table_critical_factor 模型**

```
class CatalogTablesCriticalFactor < ActiveRecord::Base
  attr_accessible :critical_factor_id, :catalog_table_id, :table_select_field_id
end 
```

# ruby-on-rails - 在 Rails 项目中获取“home/index”

> ID：12828753
> 
> 赞同：1
> 
> 时间：2012-10-10T21:32:11.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails 应用程序中运行后`rails generate controller home index`，我在`routes.rb`

```
get "home/index" 
```

这条线有什么作用？当我删除它时，我没有观察到它有什么不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:35:17.127

有关更多信息，请参阅[Rails 路由页面，但是...](http://guides.rubyonrails.org/routing.html#http-verb-constraints)

它在路由表中添加一个条目来引导`GET`表单的请求

```
http://localhost:3000/home/index 
```

到`HomeController#index`动作，它将呈现响应并将结果显示给用户。

它是一个简写符号

```
match 'home/index' => 'home#index', :via => :get 
```

要查看您的应用程序还有哪些其他可用路由，请在项目目录中从终端运行以下命令

```
rake routes 
```

# android - 下载和显示图像

> ID：12828754
> 
> 赞同：0
> 
> 时间：2012-10-10T21:32:28.243
> 
> 标签：android, image, download

我想从服务器下载图像，将其保存在 SD 卡上，然后显示。我编写了该代码，但它不起作用 - 没有错误，但我只看到黑屏而不是图像。

```
public class Main extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MyTask mt = new MyTask();
    mt.execute();

    Intent intent = new Intent();  
    intent.setAction(android.content.Intent.ACTION_VIEW);  
    File file = new File("/sdcard/askeroid/logos/1_mobile.png");  
    intent.setDataAndType(Uri.fromFile(file), "image/*");  
    startActivity(intent); 
} 
```

}
类 MyTask 扩展 AsyncTask {

```
@Override
protected Void doInBackground(Void... params) {
    try{
        URL url = new URL("http://ed.sadko.mobi/logo/logo_1mobile.png");
        URLConnection connection = url.openConnection();
        connection.connect();

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/askeroid/logos/1_mobile.png");

        output.flush();
        output.close();
        input.close();

    } catch(Exception e){e.printStackTrace();}
  return null;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:39:02.253

在移动到下一个活动之前，您无需等待下载结束。

我建议您使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)- 使用 in 下载图像`doInBackground`并开始下一个活动`onPostExecute`。

就像是：

```
AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {
    @Override protected Long doInBackground(Void ... urls) {
        // download the image
    }

    @Override protected void onPostExecute(Void result) {
        // start new activity...
    }
};
task.execute(); 
```

另外，请注意，不同设备的 SD 卡路径可能会有所不同。[在此处查看](https://stackoverflow.com/questions/5453708/android-how-to-use-environment-getexternalstoragedirectory)以了解如何正确访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:45:53.427

+1 使用 AsyncTask 的答案，它使 android 上的线程超级容易。另一个问题是你打开了`InputStream`and the`OutputStream`但你实际上从未从输入中读取任何内容，也没有向输出中写入任何内容，因此 sdcard 上的文件将是空的。

# ruby-on-rails-3 - 在 Rails 中如何在使用 javascript_include_tag 之前检查 javascript 文件是否存在

> ID：12828767
> 
> 赞同：7
> 
> 时间：2012-10-10T21:33:38.950
> 
> 标签：ruby-on-rails-3, asset-pipeline

在 rails 3.2 应用程序中，我想在文件中包含 javascript_include_tag 之前检查资产管道中是否存在 javascript 文件。就像是：

```
<% if javascript_file_exists? %>
  <%= javascript_include_tag "#{controller_name}_controller" %>
<% end %> 
```

我想这样做，以便缺少 javascript 文件不会导致错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-20T01:37:37.513

更 Rails 的方法是使用帮助程序。这允许您检查文件的咖啡脚本或 javascript 版本：

```
def javascript_exists?(script)
  script = "#{Rails.root}/app/assets/javascripts/#{params[:controller]}.js"
  File.exists?(script) || File.exists?("#{script}.coffee") 
end 
```

然后你可以在你的布局中使用它：

```
<%= javascript_include_tag params[:controller], :media => "all"  if javascript_exists?(params[:controller]) %> 
```

你可以对你的 CSS 做同样的事情：

```
 -- helper --
 def stylesheet_exists?(stylesheet)
   stylesheet = "#{Rails.root}/app/assets/stylesheets/#{params[:controller]}.css"
   File.exists?(stylesheet) || File.exists?("#{stylesheet}.scss") 
 end

 -- layout --
 <%= stylesheet_link_tag params[:controller], :media => "all"  if stylesheet_exists?(params[:controller]) %> 
```

**编辑：更新#javascript_exists？**

我最近对我的`javascript_exists?`助手进行了一些更改：

```
def javascript_exists?(script)
  script = "#{Rails.root}/app/assets/javascripts/#{script}.js"
  extensions = %w(.coffee .erb .coffee.erb) + [""]
  extensions.inject(false) do |truth, extension|
    truth || File.exists?("#{script}#{extension}")
  end
end 
```

在应用程序布局中调用它：

```
<%= javascript_include_tag params[:controller]  if javascript_exists?(params[:controller]) %> 
```

这现在将处理更多扩展并使用注入来确定文件是否存在。然后，您可以根据应用程序的需要向 extensions 数组添加更多扩展。

**编辑 DEUX：更新了#stylesheet_exists？**

相同，但对于样式表：

```
def stylesheet_exists?(stylesheet)
  stylesheet = "#{Rails.root}/app/assets/stylesheets/#{stylesheet}.css"
  extensions = %w(.scss .erb .scss.erb) + [""]
  extensions.inject(false) do |truth, extension|
    truth || File.exists?("#{stylesheet}#{extension}")
  end
end 
```

**编辑最后（可能）：把它擦干**

```
def asset_exists?(subdirectory, filename)
  File.exists?(File.join(Rails.root, 'app', 'assets', subdirectory, filename))
end

def image_exists?(image)
  asset_exists?('images', image)
end

def javascript_exists?(script)
  extensions = %w(.coffee .erb .coffee.erb) + [""]
  extensions.inject(false) do |truth, extension|
    truth || asset_exists?('javascripts', "#{script}.js#{extension}")
  end
end

def stylesheet_exists?(stylesheet)
  extensions = %w(.scss .erb .scss.erb) + [""]
  extensions.inject(false) do |truth, extension|
    truth || asset_exists?('stylesheets', "#{stylesheet}.css#{extension}")
  end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T04:27:19.263

尽管我知道 application.js 中的资产管道和清单，但我的方法是将应用程序的“基本”javascript 保留在 application.js 中，并仅使用每个控制器加载特定的 javascript

```
<%= javascript_include_tag "application" %> 
<%= javascript_include_tag controller_name if File.exists?("#{Rails.root}/app/assets/javascripts/#{controller_name}.js") %> 
```

在 </body> 之前的 application.html.erb 末尾

我知道这会导致浏览器再发出一个请求以获取控制器特定的 javascript，但也许在第一个请求之后，该 javascript 将被浏览器缓存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-13T14:07:11.683

我知道这是一个很老的问题，但我建议使用 find_asset 函数。对于 Rails 4，您可以执行以下操作：

```
<%= javascript_include_tag params[:controller] if ::Rails.application.assets.find_asset("#{params[:controller]}.js") %> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-04T23:27:25.637

## 自定义 ViewHelpers 救援！

将此添加到您的`ApplicationHelper`：

```
module ApplicationHelper
  def controller_stylesheet(opts = { media: :all })
    if Rails.application.assets.find_asset("#{controller_name}.css")
      stylesheet_link_tag(controller_name, opts)
    end
  end

  def controller_javascript(opts = {})
    if Rails.application.assets.find_asset("#{controller_name}.js")
      javascript_include_tag(controller_name, opts)
    end
  end
end 
```

你可以在你的`application.html.erb`：

```
<%= controller_stylesheet %>
<%= controller_javascript %> 
```

* * *

***注意：****这适用于所有 .js、.coffee、.css、.scss，即使它只是说 .css 和 .js*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:49:29.647

**在 Rails3.2 中，您只需要在application.js**文件的顶部写下您的 js 文件列表。例如，

```
//=require jquery.min
//=require jquery_ujs
//=require general 
```

如果其中一个文件确实不存在（顺便说一句，将它们放在 app/assets/javascripts 中）- 没问题，不会显示任何错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-29T20:33:16.657

捕捉错误：

```
 #/app/helpers/application_helpers.rb

    def javascript_include_tag_if_assets(*args)
      javascript_include_tag(*args)
    rescue Sprockets::Rails::Helper::AssetNotFound
      ''
    end 
```

或者，由于这要求在使用该方法之前进行检查，因此您不妨`javascript_include_tag`使用`javascript_path`它来检查然后捕获该错误。这适用于所有类似 javascript 的资产。对于类似 css 的资产，请使用`stylesheet_path`.

```
 #/app/helpers/application_helpers.rb

    def javascript_include_tag_if_assets(*files, **opts)
      files.each { |file| javascript_path(file) }
      javascript_include_tag(*files, **opts)
    rescue Sprockets::Rails::Helper::AssetNotFound
      ''
    end 
```

# asp.net-mvc-4 - SimpleMembership 更新“isconfirmed”标志

> ID：12828769
> 
> 赞同：0
> 
> 时间：2012-10-10T21:33:57.987
> 
> 标签：asp.net-mvc-4, security, simplemembership

我的用户表（我创建的那个）具有以下列：

```
UserId,UserName,FirstName,LastName,DOB 
```

在我运行这个命令之后

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "UserId", "UserName", autoCreateTables: true); 
```

它为我创建了所需的简单成员表。

我将如何使用新的 SimpleMembership API 在 pages_Membership 中“取消确认”用户或将“IsConfirmed”标志设置为 false？

*（之前，在使用“Membership”类进入 simplemembership 之前，我可以使用 api 调用更新用户：Membership.UpdateUser(user);)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:39:38.803

我最终做的是通过 SQL 查询直接更新该表。不确定这是否是推荐的方法，但这似乎对我有用。（也感谢您的建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:47:11.837

查看这篇[关于将电子邮件确认添加到 SimpleMembership 注册过程的博客文章](http://kevin-junghans.blogspot.com/2013/02/adding-email-confirmation-to.html)，其中介绍了确认过程的工作原理。悬崖笔记是，当您创建一个新用户时，您设置了您想要使用确认的标志，就像这样。

```
string confirmationToken = 
   WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Email = model.Email }, true); 
```

当您执行此操作时，CreateUserAndAccount 方法会返回一个唯一令牌，您可以将其放入带有链接的电子邮件中，以便用户可以确认他们为您提供了有效的电子邮件地址。当他们单击链接时，它会在 URL 中传递令牌，然后控制器操作可以像这样确认令牌。

```
[AllowAnonymous]
public ActionResult RegisterConfirmation(string Id)
{
    if (WebSecurity.ConfirmAccount(Id))
    {
        return RedirectToAction("ConfirmationSuccess");
    }
    return RedirectToAction("ConfirmationFailure");
} 
```

ConfirmAccount 方法检查数据库中是否存在匹配的未确认令牌，如果存在则将 isConfirmed 标志设置为 true。在设置为 true 之前，用户将无法登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T21:46:07.447

我无法直接回答您的问题，因为我也找不到“取消确认”帐户的方法。然而，我最终做的事情可能会帮助找到这个问题的人。

我基本上使用[角色](http://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)作为看门人。每当我创建一个新帐户时，我都会将该用户添加到“用户”角色中：

```
Roles.AddUserToRole(newUser.Username, "User"); 
```

我使用 Authorize 属性来限制对我的控制器的访问（并将 [AllowAnonymous] 用于我想要公开的操作——例如 RegisterUser）。然后，在每个操作中，我添加了一个方法来限制只有“用户”角色的用户才能访问。

```
if (!Roles.IsUserInRole(role))
{
    throw new HttpResponseException(
        new HttpResponseMessage(HttpStatusCode.Unauthorized));
} 
```

**注意：我使用的是 Web API，但如果你使用的是 MVC，你应该会更轻松。您可以使用 authorize 属性，而不是手动检查用户是否在每个操作中担任角色：**

```
[Authorize(Roles = "User")] 
```

当我想“取消确认”用户时，我只需将他们从“用户”角色中删除。

```
Roles.RemoveUserFromRole(user.Username, "User"); 
```

这样，如果用户回来爬网，我可以通过将他们重新添加为用户来重新激活他们的帐户。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T10:46:28.337

将 requireConfirmationToken 设置为 true：（如下所示的第 4 个值）

```
WebSecurity.CreateUserAndAccount(viewModel.UserName, viewModel.Password, null, true); 
```

来源 [http://www.w3schools.com/aspnet/met_websecurity_createuserandaccount.asp](http://www.w3schools.com/aspnet/met_websecurity_createuserandaccount.asp)

# python - 如果没有选择有效，如何返回第一个 if 语句

> ID：12828771
> 
> 赞同：11
> 
> 时间：2012-10-10T21:34:00.510
> 
> 标签：python, if-statement, raw-input

如果没有正确满足条件，我如何让 Python 移动到 if 语句的顶部。

我有一个基本的 if/else 语句，如下所示：

```
print "pick a number, 1 or 2"
a = int(raw_input("> ")

if a == 1:
    print "this"
if a == 2:
    print "that"
else:
   print "you have made an invalid choice, try again." 
```

我想要的是提示用户为此 if 语句做出另一个选择，而不必重新启动整个程序，但是我对 Python 非常陌生，并且在任何地方都无法在线找到答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T21:39:01.783

一个相当常见的方法是使用一个`while True`无限期运行`break`的循环，当输入有效时使用语句退出循环：

```
print "pick a number, 1 or 2"
while True:
    a = int(raw_input("> ")
    if a == 1:
        print "this"
        break
    if a == 2:
        print "that"
        break
    print "you have made an invalid choice, try again." 
```

这里还有一个很好的方法来限制重试次数，例如：

```
print "pick a number, 1 or 2"
for retry in range(5):
    a = int(raw_input("> ")
    if a == 1:
        print "this"
        break
    if a == 2:
        print "that"
        break
    print "you have made an invalid choice, try again."
else:
    print "you keep making invalid choices, exiting."
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T21:36:27.197

使用 while 循环。

```
print "pick a number, 1 or 2"
a = None
while a not in (1, 2):

    a = int(raw_input("> "))

    if a == 1:
        print "this"
    if a == 2:
        print "that"
    else:
        print "you have made an invalid choice, try again." 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T21:44:18.797

您可以使用递归函数

```
def chk_number(retry)
    if retry==1
        print "you have made an invalid choice, try again."
    a=int(raw_input("> "))
    if a == 1:
        return "this"
    if a == 2:
        return "that"
    else:
        return chk_number(1)

print "Pick a number, 1 or 2"
print chk_number(0) 
```

# c++ - 在 C++ 中处理 Apache Thrift 列表/映射返回类型

> ID：12828772
> 
> 赞同：2
> 
> 时间：2012-10-10T21:34:05.533
> 
> 标签：c++, list, rpc, thrift

首先，我会说我不是最称职的 C++ 程序员，但我正在学习，并享受 Thrift 的强大功能。

我已经实现了一个 Thrift 服务，其中包含一些返回 void、i32 和 list 的基本函数。我正在使用由 Django Web 应用程序控制的 Python 客户端进行 RPC 调用，它运行良好。生成的代码非常简单，除了列表返回：

.thrift 描述文件：

```
namespace cpp Remote

enum N_PROTO {
        N_TCP,
        N_UDP,
        N_ANY
}

service Rcon {
    i32 ping()
    i32 KillFlows()
    i32 RestartDispatch()
    i32 PrintActiveFlows()
    i32 PrintActiveListeners(1:i32 proto)
    list<string> ListAllFlows()
} 
```

从 Rcon.h 生成的签名：

```
 int32_t ping();
  int32_t KillFlows();
  int32_t RestartDispatch();
  int32_t PrintActiveFlows();
  int32_t PrintActiveListeners(const int32_t proto);
  int64_t ListenerBytesReceived(const int32_t id);
  void ListAllFlows(std::vector<std::string> & _return); 
```

如您所见，生成的 ListAllFlows() 函数采用对字符串向量的引用。我想我希望它返回 .thrift 描述中列出的字符串向量。

我想知道我是否打算为函数提供一个要修改的字符串向量，然后尽管函数返回 void，但 Thrift 会处理将其返回给我的客户端。

我在 C++ 中绝对找不到 Thrift list<> 类型的资源或示例用法。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:21:04.797

好的，我已经想通了。这真的很简单。

```
void ListAllFlows(std::vector<std::string> & _return)
{
    for(int x = 0; x < 5; x++)
    {
        _return.push_back(std::string("hi"));
    }
} 
```

然后 Python 客户端就按照 .thrift 文件中的样子调用它：

```
result = client.ListAllFlows()
print result # ['hi', 'hi', 'hi', 'hi', 'hi'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T18:12:26.843

直接返回容器类是可行的，但有一些缺点，我在[此处](https://stackoverflow.com/a/22695841/499466)更详细地概述了这些缺点。

# javascript - Kendo UI 无法过滤网格表

> ID：12828777
> 
> 赞同：1
> 
> 时间：2012-10-10T21:34:40.017
> 
> 标签：javascript, asp.net-mvc-3, jquery-ui, filtering, kendo-ui

我想按姓氏过滤表格，但不能工作，这是我的代码

在控制器中

```
 public JsonResult Filtering()
    {
        HealthContext rc = new HealthContext();
        var last = rc.Profiles.Select(lastt => new SelectListItem { Text = lastt.LastName, Value = lastt.Id.ToString() }).ToList();
        return Json(last.ToList(), JsonRequestBehavior.AllowGet);

    } 
```

在视野中

```
 <script type="text/x-kendo-template" id="template">
            <div class="toolbar">
                <label class="category-label" for="Last name"> by last name:</label>
                <input type="search" id="LastName" style="width: 230px"></input>
            </div>
        </script> 
```

并且

以下代码段用于显示表和过滤姓氏

```
<script>
                  $(document).ready(function() {
                      $("#grid").kendoGrid({
                          dataSource: {

                              transport: {
                                  read: {
                                      url: "/Profiles/GetJsonData",
                                      dataType: "json"
                                  }
                              },

                              pageSize: 10,

                          },
                        toolbar: kendo.template($("#template").html()),
                          height: 250,
                          filterable: true,
                          sortable: true,
                          pageable: true,
                          defaultSorting: 'LastName ASC',
                          columns: [{
                                  field: "Id",
                                  filterable: false
                              },

                              {
                                  field: "FirstName",
                                  title: "First Name",

                                  width: 100,

                              }, {
                                  field: "LastName",
                                  title: "Last Name",

                                  width: 200
                              }, {
                                  field: "Gender",
                                  title: "Gender"
                              }
                          ]
                      });

                      var dropDown = grid.find("#LastName").kendoDropDownList({
                                            dataTextField: "LastName",
                                            dataValueField: "Id",
                                            autoBind: false,
                                            optionLabel: "All",
                                            dataSource: {

                            severFiltering: true,
                             transport: {
                                  read: {
                                      url: "/Profiles/Filtering",
                                      dataType: "json"
                                  }
                              },
                        },
                        change: function() {
                            var value = this.value();
                            if (value) {
                                grid.data("kendoGrid").dataSource.filter({ field: "Id", operator: "eq", value: parseInt(value) });
                            } else {
                                grid.data("kendoGrid").dataSource.filter({});
                            }
                        }

                });
                });
              </script> 
```

所以问题是下拉列表没有显示以及值/数据，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:41:16.957

在您的代码中，您没有共享**网格**变量背后的内容？您也可以通过 id 直接找到 LastName html 元素。

IE

```
 var dropDown = $("#LastName").kendoDropDownList({ ... 
```

您的其余代码看起来不错，这里是：

[http://jsfiddle.net/knWcJ/70/](http://jsfiddle.net/knWcJ/70/)

# php - 是否可以将 cpanel 帐户位置/路径更改为不同的目录？

> ID：12828781
> 
> 赞同：4
> 
> 时间：2012-10-10T21:34:59.427
> 
> 标签：php, directory, cpanel, virtualhost, whm

有谁知道如何使用 PHP 更改 cpanel 帐户的位置/路径？

基本上会有一个带有 SSL 证书的多品牌商店，我们希望它指向根目录中的一个位置/目录。

我可以通过在 httpd.conf 文件中的一个小调整来实现这一点，但是我们想要自动化这个并有一个 php 插件。

任何想法？

注意：我们有专用服务器，并且可以 + 测试。

也许在 cPanel API 的帮助下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:26:22.707

除了调整 httppd.conf 文件之外，我不知道其他任何事情。但是，也许您可​​以构建一个与 cpanel 帐户设置挂钩的帖子帐户创建脚本。您可以查看 WHM 上的文档。我相信你会在 postwwwacct 脚本之后。

[http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/WebHome](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/WebHome)

我不确定您将这些移动到根目录的原因，除非您以主目录无法执行的方式设置磁盘分区，但也许使用文件系统连接点/指向该帐户文件夹的链接可以解决问题.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T19:25:07.223

您可以通过 CPanel API 执行此操作 以此为起点 [https://documentation.cpanel.net/display/SDK/Guide+to+the+LiveAPI+System](https://documentation.cpanel.net/display/SDK/Guide+to+the+LiveAPI+System)

使用 PHP over API 函数，您可以更改帐户位置/路径，就像您通过 WHM 使用 Home »Account Functions »重新排列帐户...但只有当您有多个分区时才会这样做。对于 Joe Meyer 所说的其他方法，只需调整 httpd.conf 或使用符号链接来重定向文件夹和文件（这是最不安全的方法）......

# javascript - 如何在数组中查找未包含在 MongoDB 集合中的项目

> ID：12828785
> 
> 赞同：0
> 
> 时间：2012-10-10T21:35:17.607
> 
> 标签：javascript, arrays, mongodb

假设我有一个城市名称数组和一个 MongoDB 城市名称集合。假设我的数组看起来像：

```
["San Francisco", "chicago", "New York", "Los Angeles"] 
```

我的收藏看起来像

```
{{cityName: "chicago"}
{cityName: "New York"}} 
```

我想做的是执行一个返回给我旧金山和洛杉矶的查询。到目前为止，我唯一的想法是只执行查询，获取匹配项，然后从原始数组中减去数组（从而得到我的城市），但我想知道是否有一种方法可以在一步查询中完成。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:51:53.950

您需要对 MongoDB 集合执行以下查询：

db.cities.distinct("cityName", {cityName:{$in:["new york","los angeles","chicago","san francisco"]}})

这将返回与集合中的某些内容匹配的城市数组。在上面的示例中，您将返回： ["chicago","new york"]

您现在可以从原始数组中减去这些元素并获得所需的结果。

关键是进行不同的查询（而不是获取所有结果）并将查询限制为您关心的城市，而不是您的集合所代表的所有城市。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:39:28.420

数组减法是进行此操作的唯一方法，因为即使您使用任何 mongodb 驱动程序并且如果它支持此功能，它最终也会做同样的事情。

MongoDb 上的查询将始终返回包含在其中的值或空值。所以你必须取值并做一个数组减法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:43:49.340

你的收藏中有昏迷吗？

```
{{cityName: "chicago"},
{cityName: "New York"}} 
```

如果是，您可以这样做：

```
for( var i in collec ){
  var cityname = collec[i]['cityname'];
  // if you use jquery
  var getcity = $.grep( yourarray, function(n,i){
   return n == cityname;
  });
  // getcity in an array with all matching elements
  console.log(getcity);
} 
```

# c - 采访：哈希函数：正弦函数

> ID：12828800
> 
> 赞同：7
> 
> 时间：2012-10-10T21:36:44.130
> 
> 标签：c, trigonometry

我被问到这个面试问题。我不确定它的正确答案是什么（以及答案背后的原因）：

sin(x) 是一个好的散列函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:45:30.960

如果您的意思是`sin()`，这不是一个好的散列函数，因为：

*   这是完全可以预测的，对某些人`x`来说，它并不比它`x`本身更好。密钥和密钥的散列之间不应存在看似明显的关系。
*   它不会产生整数值。您不能使用浮点索引对数组进行索引/下标，并且哈希表中必须存在某种数组。
*   浮点数是非常特定于实现的，即使您使用`sin()`.
*   `sin()`可能比一些更简单的整数算术函数慢得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:48:17.680

并不真地。

1.  它慢得可怕。
2.  无论如何，您都需要将结果转换为某种整数类型，以避免浮点相等比较的疯狂。（实际上并不是 FP 相等比较特有的*常见*精度问题，它们是由计算两种略有不同的方式引起的；我的意思是特别是由诸如 387 派生的 FPU 在其寄存器中存储额外的精度位之类的事实引起的问题，因此，如果在寄存器中的两个新计算的值之间进行比较，则与将其中一个操作数从内存加载到寄存器中的情况不同，您可能会得到不同的答案。）
3.  它在波峰和波谷附近几乎是平坦的，因此量化步骤（乘以某个大数并舍入为整数）将在最小值和最大值附近产生许多散列值，而不是均匀分布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:44:32.963

基于数学知识：

Sine(x) 是周期性的，所以它会从不同的 x 值达到相同的数字，所以 Sine(x) 作为散列函数会很糟糕，因为你会得到多个值散列到完全相同的点。返回值在 0 和 pi 之间有 ** 无限多个值，但超过该值将重复。所以 0 & pi & 2*pi 都会散列到同一个点。

如果您可以使增量足够小，并将 Sine(x) 乘以 x^2 或类似性质的东西，那么它充其量只是平庸，但话又说回来，如果您要这样做，为什么不只使用 x^2无论如何，把周期函数一起扔掉。

**无限：一个足够大的数字，我不愿意数。

注意：Sine(x) 的值很小，可能会受到舍入误差的影响。

注意：从正弦函数中获取的任何值都应该乘以一个整数，然后进行修改或取地板或天花板，以便该值可以用作数组偏移量等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T21:46:42.893

`sin(x)`是三角函数，每 360 度重复一次，所以它会是一个糟糕的散列函数，因为散列会经常重复。

一个简单的反驳：

```
sin(0) == sin(360) == sin(720) == sin(..) 
```

这不是 goodhash 函数的属性。

即使你决定使用它，也很难表示 sin 返回的值。正弦函数：

```
sin x = x - x^3/3! + x^5/5! - ... 
```

由于浮点精度问题，这无法准确表示，这意味着对于相同的值，它可能会产生两个不同的哈希值！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T22:17:01.763

还有一点需要注意：

对于 sine(x) 作为散列函数 - 给定近距离范围内的键也将具有近距离散列值，这是不可取的。一个好的散列函数可以均匀地分布散列值，而不管键的性质如何。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T21:48:21.587

哈希值通常必须是整数才能有用。由于`sin`不生成整数，因此不合适。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-23T22:31:32.513

假设我们有一个字符串 s。它可以表示为十六进制的数字并提供给函数。如果您添加 2 pi，它将不再是有效输入，因为它不再是整数（该函数只接受非负整数）。您必须找到一个会产生冲突的字符串，而不仅仅是将字符串的十六进制表达式乘以 2 pi。并且将（连接？） 2 pi 直接添加到字符串不会有助于发现冲突。虽然可能有另一种方法，但不是那么微不足道。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-11-23T21:41:25.923

如果使用得当，我认为 sin(x) 可以成为出色的加密哈希函数。输入应该是以弧度表示的自然数，并且从不包含 pi。我们必须使用任意精度的算术。对于每个自然数 x（弧度），sin(x) 始终是一个超越无理数，并且没有其他自然数具有相同的正弦值。但是有一个问题：攻击者可以通过计算散列的反正弦来获取有关输入的信息。为了防止这种情况，我们忽略了小数部分和小数部分的一些前数字，只保留接下来的 n（比如 100）位数字，使得这种攻击在计算上不可行。似乎输入的微小变化会产生完全不同的结果，这是一个理想的属性。该函数的结果在统计上似乎是随机的，这也是一个很好的属性。一世' 我不知道如何证明它是抗碰撞的，但我不明白为什么它不能。另外，我想不出一种方法来找到导致特定散列的特定输入。我并不是说我们应该盲目地相信它肯定是一个好的地穴。哈希函数。我只是认为成为其中之一似乎是一个很好的候选人。我们应该给它一个机会，并专注于证明它是。这对我来说可能是一个非常好的。对于那些可能会说它很慢的人：是的，确实如此。这在散列密码时很好。在这里，我为这个想法附上了一些 perl 代码。它使用 bash 和 bc 在 linux 上运行。（bc 是一个命令行任意精度计算器，包含在大多数发行版中）我将检查此页面以获取任何答案，因为这让我很感兴趣。不过不要苛刻，我只是一名CS本科生，愿意学习更多。

```
use warnings;
use strict;
my $input='5AFF36B7';#Input for bc (as a hex number)
$input='1'.$input;#put '1' in front of input, so that 0x0 , 0x00 , 0x1 , 0x01 , etc ... ,
                  #all give different nonzero results

my $a=`bc -l -q <<< "scale=256;obase=16;ibase=16;s($input)"`;#call bc, keep result in $a

#keep only fractional part
$a=~tr/a-zA-Z0-9//cd;#Clean up string, keep only alphanumerics
my @m = $a =~ /./g;#Convert string to array of chars

#PRINT OUTPUT
#We ignore some digits, for security reasons:
#If we don't ignore any of the first digits, an attacker could gain information
#about the input by computing the inverse of sin (the arcsin of the hash)
#By ignoring enough of the first digits, it becomes computationally
#infeasible to compute arcsin
#Also, to avoid problems with roundoff error, we ignore some of the last digits
for (my $c=100;$c<200;$c++){
    print $m[$c];
} 
```

# macos - 工作表无法在 OSX 上正确显示

> ID：12828801
> 
> 赞同：1
> 
> 时间：2012-10-10T21:36:44.483
> 
> 标签：macos, window, cocoa-sheet

我对 OSX 开发非常陌生。将此视为我的第一个应用程序。我想在主窗口上单击按钮时显示一张工作表。我正在使用笔尖

以下是我的 .h 文件代码

```
#import <Foundation/Foundation.h>
#import "WebKit/Webkit.h"

@interface MainViewObject : NSObject
- (IBAction)accountButtonPressed:(id)sender;
- (IBAction)cancelSheetButtonPressed:(id)sender; 
```

.m 文件如下

```
#import "MainViewObject.h"
@implementation MainViewObject

- (IBAction)accountButtonPressed:(id)sender {
    [NSApp beginSheet:self.accountSheet
   modalForWindow:[mainWindowView window]
    modalDelegate:nil
   didEndSelector:nil
      contextInfo:nil];

[NSApp runModalForWindow:self.accountSheet];

[NSApp endSheet:self.accountSheet];
[self.accountSheet orderOut:self];
}

- (IBAction)cancelSheetButtonPressed:(id)sender {
// Return to normal event handling
[NSApp endSheet:self.accountSheet];
// Hide the sheet
[self.accountSheet orderOut:sender];
} 
```

当我运行该应用程序时，我得到如下信息：

[http://i.imgur.com/DzJJ6.png](https://i.imgur.com/DzJJ6.png)

我被卡住了，我不知道这有什么问题。我无法获得工作表，甚至无法关闭应用程序。我在网上参考了一些例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:40:01.863

```
- (IBAction)accountButtonPressed:(id)sender {
    [NSApp beginSheet:self.accountSheet
   modalForWindow:[mainWindowView window]
    modalDelegate:nil
   didEndSelector:nil
      contextInfo:nil];

    [NSApp runModalForWindow:self.accountSheet];

    [NSApp endSheet:self.accountSheet];
    [self.accountSheet orderOut:self];

} 
```

哇，看着那个，截图看起来像这样也就不足为奇了。

让我们一次走过这一行。当您单击“帐户”按钮时，您会立即连续执行 4 件事：

1.  您正在告诉应用程序开始显示附加到主窗口的工作表。这没关系，实际上是您在该`accountButtonPressed:`方法中想要的唯一代码。

2.  在开始该工作表之后，您告诉应用程序您还希望以应用程序模式的方式单独显示该工作表（不附加到任何窗口，而是在屏幕中间），这会阻止所有其他事件在应用程序中处理。换句话说，这条线并没有真正的意义。您可以以“文档模式”方式（仅绑定该工作表所附加到的窗口）或以“应用程序模式”方式将窗口显示为工作表，但不能同时显示两者。;-)

3.  刚展示完表格后，您立即告诉`NSApp`停止展示表格。现在，您确实希望最终做到这一点，但是在刚刚显示它 0.0005 秒后关闭工作表可能会让您的用户有点沮丧。

4.  您现在告诉工作表隐藏自己。这需要从您的`didEndSelector:`方法中完成，这将我们带到您的第一种方法中的问题。

-

```
[NSApp beginSheet:self.accountSheet
   modalForWindow:[mainWindowView window]
    modalDelegate:nil
   didEndSelector:nil
      contextInfo:nil]; 
```

这很好，但请阅读文档[`beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:`](http://developer.apple.com/library/mac/documentation/cocoa/reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:)以及工作[表编程主题：使用自定义工作表](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Sheets/Tasks/UsingCustomSheets.html)。（Class Reference 页面顶部的 Companion guides 链接对于学习如何在现实世界中使用 API 特别有帮助。它们在我学习时非常有帮助）。

指定当工作表停止显示时`nil`，`modalDelegate:`您没有任何等待通知的信息（当您调用 时会发生这种情况`[NSApp endSheet:sheet]`）。您还没有指定`@selector`要在工作表结束时调用的方法。选择器有点像函数，也就是“方法”。

您的代码应如下所示：

```
@implementation MDAppDelegate

- (IBAction)showSheet:(id)sender {
    [NSApp beginSheet:self.sheet
       modalForWindow:self.window
        modalDelegate:self
       didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:)
          contextInfo:NULL];
}

- (IBAction)cancel:(id)sender {
    [NSApp endSheet:self.sheet];
}

- (IBAction)ok:(id)sender {
    [NSApp endSheet:self.sheet];
}

- (void)sheetDidEnd:(NSWindow *)sheet
            returnCode:(NSInteger)returnCode
               contextInfo:(void *)contextInfo {
    [sheet orderOut:nil];
}
@end 
```

在此示例中，您单击“显示工作表”按钮，工作表开始显示为附加到主窗口。在工作表中，有一个“取消”和一个“确定”按钮，它们都调用了各自的方法。在这些方法中的每一个中，您调用`[NSApp endSheet:self.sheet]`. 这告诉`NSApp`它应该调用`sheetDidEnd:returnCode:contextInfo:`指定为模式委托的对象上的方法。然后在`sheetDidEnd:returnCode:contextInfo:`你告诉工作表隐藏自己。

编辑：

每个`NSWindow`都有一个“启动时可见”标志，可以在 Interface Builder 中设置。如果设置了此标志，则在加载 nib 文件时窗口将可见。如果未设置，则窗口将隐藏，直到您以编程方式显示它。只需编辑 nib 文件中的标志，如下所示：

![在此处输入图像描述](../Images/ff1180e425b4c0b14ff79aa540894561.png)

# iphone - NSURLConnection 数据请求结束时没有数据

> ID：12828802
> 
> 赞同：2
> 
> 时间：2012-10-10T21:36:46.237
> 
> 标签：iphone, objective-c, ios, nsurlconnection

我正在使用`NSURLConnection`. 我将委托设置为`self`，并实现方法`connection:didReceiveData`和`connectionDidFinishLoading`。收到数据后，我将其存储在一个`NSMutableData`对象（称为*input*）中，然后在连接结束时，我使用它来创建位图。问题是我收到了数据，`connection:didReceiveData`但它是空的`connection:DidFinishLoading`。我该如何解决？

```
- (void)start
{
    NSURL *url = [NSURL URLWithString:src];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    connection = [[NSURLConnection alloc] initWithRequest:request
                                                 delegate:self
                                         startImmediately:YES];
}

- (void)connection:(NSURLConnection *)conn
    didReceiveData:(NSData *)d
{
    NSLog(@"Data Received: %@", d);//This prints the correct data
    //Add data chunk to input
    [input appendData:d];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    CPLog(@"Finished Receiving bitmap from server. Data received with length %d: %@", [input length], input);//this prints length 0 and a value of (null)
    CFDataRef imgData = (__bridge CFDataRef) input;
    CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData (imgData);
    CGImageRef image;
    if (!imgDataProvider)
    {
        NSLog(@"Request Failed!");//happens every time
        [callback handleBitmap:nil];
        return;
    }

    image = CGImageCreateWithJPEGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);

    [callback handleBitmap:image];
    return;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:42:43.940

`input`您应该为属性分配内存。通常在开始新的 url 连接之前完成：

```
- (void)start
{
    self.input = [NSMutableData data];
    // .... init and start url connection
} 
```

# matlab - Matlab 优化矩阵乘法

> ID：12828805
> 
> 赞同：1
> 
> 时间：2012-10-10T21:37:07.827
> 
> 标签：matlab, optimization, matrix

这是我当前的 matlab 代码：

```
a = load('m1.txt');
b = load('m2.txt');
c = a*b;
fid = fopen('Matrix.txt','wt');
for ii = 1:size(c,1)
fprintf(fid,'%g\t',c(ii,:));
fprintf(fid,'\n');
end
fclose(fid) 
```

基本上读取两个文件并将结果相乘以获得相乘矩阵，并将其写入文件。

我想找出是否有一种缓存友好的方式来做到这一点。但我认为有时与其他编程语言相反，矩阵在这个领域有些有效。任何提示或示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:16:15.170

您可以使用[save](http://www.mathworks.com/help/matlab/ref/save.html)命令来简化写入磁盘循环。

```
save Matrix.txt c -ascii 
```

这将以 ascii 格式将变量“c”写入磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:06:27.740

Matlab矩阵乘法真的很高效。我不认为你可以做得比已经存在的更好。

# git - 在 Git 存储库中查找已删除的内容；我只知道周围的环境

> ID：12828806
> 
> 赞同：5
> 
> 时间：2012-10-10T21:37:15.800
> 
> 标签：git

我想取回我前一段时间在某个提交中删除的一些代码。我根本不记得代码是什么，但我记得它做了一些非常有用的事情，但我删除了它，因为我认为我不需要它。但是，我现在需要返回该代码，但我只记得它在哪个函数中。

其他信息：包含该函数的文件还包含总共 500 行代码。有一个 30 次提交范围，我知道代码曾出现在某个时间点。

这个问题是一个高层次的问题。我如何使用我知道的信息来获得我想要的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:37:02.737

1.  您可以做的最好的事情是使用搜索关键字。如果你知道函数名

    ```
    git log -Sfunction 
    ```

    将会是完美的。

2.  如果您有一个模式，您可以在每个提交的更改中查找：

    ```
    git log --grep=pattern 
    ```

    将列出包含该模式的提交。添加`-i`不区分大小写的匹配。添加`--regex`正则表达式匹配

3.  否则

    ```
    git log -p FIRST...LAST | less 
    ```

    会给你全文。你可以搜索，或者只是滚动和视觉扫描......

* * *

哦。PS。既然你提到它是一个很长的功能，你可以这样做

```
 git log --stat FIRST...LAST 
```

`----`并注意差异统计中包含许多删除 ( ) 的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:08:31.530

`git blame`与_

```
--reverse 
```

让历史前进而不是倒退。这不是显示出现行的版本，而是显示存在行的最后一个版本。这需要一系列的修订，例如 START..END，其中责备路径存在于 START 中。

或者尝试`git bisect`在你的 30 次提交中进行二进制搜索，以找到感兴趣的代码出现的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:43:42.017

如果您能记住函数名称或任何其他重要的单词或变量，那么您可以尝试`git grep`

```
git grep <regexp> $(git rev-list <rev1>..<rev2>) 
```

您的提交范围的限制在哪里`rev1`以及在哪里。`rev2`它会 grep 所有的提交内容（包括删除），所以你一定会找到你的代码。

有关更多详细信息，请参阅[如何在 git 历史记录中 grep（搜索）已提交的代码？](https://stackoverflow.com/questions/2928584/how-to-grep-search-the-git-history)

# ampl - AMPL：求解器无法在初始解时评估 NLP 目标（和/或约束）

> ID：12828808
> 
> 赞同：1
> 
> 时间：2012-10-10T21:37:18.030
> 
> 标签：ampl

我正在尝试使用 AMPL 来优化一些返回数据的日志实用程序功能。程序正确读取数据但吐出错误

LOQO 6.07：LOQO ERROR(50)：无法在初始解决方案中评估 obj 和/或约束

我的代码很简单：

```
set ASSETS; # asset names
set TIME; # dates

param R {TIME, ASSETS}; # return of asset A in month T
param w0:= 100; # initial wealth

var x{ASSETS} >=0; # amt of capital in each asset

maximize expected_utility:
    sum {i in TIME} (1/card(TIME)) * log(sum {j in ASSETS} x[j]*(1+R[i,j])); # x*(1+r) = w

subject to tot_mass:
    sum{j in ASSETS} x[j] <= w0; # amount in each asset must total to w0

data;

set ASSETS := VT SPY TLT EEM EFA GSG DBC DBV TIP;
set TIME := January-07 February-07 March-07 April-07 May-07 June-07 July-07 August-07 September-07 October-07 November-07 December-07 January-08 February-08 March-08 April-08 May-08 June-08;

param R: VT SPY TLT EEM EFA GSG DBC DBV TIP :=

January-07  0.01248713  0.015065017 -0.009943182    0.001149425 0.013974909 -0.025455453    -0.023718763    0.007237636 0.002407806
February-07 -0.013271444    -0.019606312    0.034002869 -0.032433984    -0.001252937    0.037131882 0.050759219 0.008383234 0.019721871
March-07    0.025685366 0.011552864 -0.017066741    0.053396618 0.029010507 0.024691358 0.006606111 0.023357086 0.003347384
April-07    0.040152115 0.044265911 0.009034444 0.037172627 0.037488571 0.004578313 0.007383101 0.021276596 0.006548869
May-07      0.031768575 0.033941771 -0.02308338 0.050773826 0.023501763 -0.011753418    -0.002035831    0.023863636 -0.013012521
June-07     -0.001752913    -0.01459002 -0.01016755 0.036692506 -0.00315729 0.03131068  0.007343941 0.027376989 -0.002238806
July-07     -0.021742556    -0.031314776    0.033130787 0.007228315 -0.022890872    0.047775947 0.019036047 -0.007922218    0.023061581
August-07   0.003843633 0.012839129 0.01792466  0.010393467 -0.006335642    -0.031895777    -0.019077901    -0.039564428    0.008163763
September-07    0.056778104 0.038708217 0.002338699 0.115601274 0.053232503 0.094431555 0.094003241 0.030234316 0.012811216
October-07  0.042289615 0.013511550 0.018116937 0.118770582 0.042376461 0.05999576  0.085185185 0.029713866 0.011694511
November-07 -0.043249736    -0.038704128    0.053518469 -0.076530612    -0.03619665 -0.00460000     -0.006143345    -0.034912718    0.041165369
December-07 -0.020039022    -0.011258574    -0.006269994    -0.014024649    -0.029848655    0.059674503 0.066964286 0.00036914  0.000566444
January-08  -0.07287025 -0.060478094    0.020988926 -0.089224138    -0.078434205    -0.004550626    0.029288703 -0.016605166    0.035665761
February-08 -0.011941005    -0.025844771    -0.004540295    0.019876952 -0.010188088    0.112571429 0.111319575 -0.007129456    0.01421231
March-08    -0.007344683    -0.00889841 0.021284683 -0.037587007    0.004117181 -0.009416196    -0.009285312    -0.041950113    -0.001401315
April-08    0.057279035 0.047634882 -0.024810818    0.091610415 0.054407822 0.08192188  0.060494178 0.038658777 -0.019753886
May-08      0.016184106 0.015156324 -0.026841369    0.031581272 0.011965301 0.084664537 0.069094804 0.017850361 0.0011012
June-08     -0.096123568    -0.08363949 0.026535948 -0.102975808    -0.104936447    0.103240059 0.104208417 -0.005597015    0.017929821
;

#display(ASSETS);
#display(TIME);
#display R;

solve;

display {i in ASSETS} x[i]; 
```

有任何想法吗？

再次感谢stackoverflow

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:49:02.270

由于您没有为变量 x[j] 指定初始值，因此默认情况下它们都被赋予初始值 0。因此，您的目标函数涉及 0 的对数，而 LOQO 无法评估。尝试设置显式初始值，例如

```
var x{ASSETS} >=0, := w0 / card(ASSETS); 
```

在这里，所有变量都以相等的总资产份额进行初始化，这可能是一个合理的开始。

# java - Restful Web Service 返回 404，web.xml 错误？

> ID：12828820
> 
> 赞同：1
> 
> 时间：2012-10-10T21:38:49.713
> 
> 标签：java, rest, tomcat, jersey

还有其他人问这个问题，但他们得到的答案对我不起作用。我正在运行一个 Jersey 休息服务器，如 Tomcat 7 中的此[链接](http://www.vogella.com/articles/REST/article.html#installation_eclipse)中所述。我的资源类是 Hello，如下所示：

```
package com.rest.videos;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/hello")
public class Hello {
// This method is called if TEXT_PLAIN is request
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String sayPlainTextHello() {
    return "Hello Jersey";
  }

  // This method is called if XML is request
  @GET
  @Produces(MediaType.TEXT_XML)
  public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
  }

  // This method is called if HTML is request
  @GET
  @Produces(MediaType.TEXT_HTML)
  public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
        + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
  }

} 
```

我的 web.xml 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name>Videos</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.rest.videos</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

每当我访问 URL`http://localhost:8080/Videos/rest/hello`时，它都会返回 404。我的 WEB-INF 目录中有一个 index.html 文件，如果我去`http://localhost:8080/Videos/`我认为它应该在的位置，因为欢迎文件列表是这样说的，我也会得到一个 404。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:45:57.597

好的，如果您不介意给予学分，我会发布答案:)

web.xml 与 URI 路径无关，因此除非将您的 WAR 包装到带有 /Videos 的 EAR 中，否则此前缀是无效的，并且可能是 404 的根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:13:48.860

Based on the [tutorial](http://www.vogella.com/articles/REST/article.html#installation_eclipse) you referred to, it seems you should try the following:
`http://localhost:8080/com.rest.videos/rest/hello`

Notice the base URI the client code is using?

```
private static URI getBaseURI() {
    return UriBuilder.fromUri("http://localhost:8080/de.vogella.jersey.first").build();
 } 
```

*   com.rest.videos refers to the package name
*   /rest refers to the `servlet-mapping` in `web.xml`
*   /hello refers to the `@Path` annotation

# android - 文本视图在我的应用程序中闪烁/闪烁

> ID：12828822
> 
> 赞同：2
> 
> 时间：2012-10-10T21:38:52.803
> 
> 标签：android, textview

我们正在开发一个为特定 Android 构建的定制 Android 应用程序——以前是三星 Galaxy Tab 2——我对它的外观非常满意。

然而，我们已经将手机更换为 Nexus 7，现在一个以前看起来不错的文本视图会快速闪烁——它会引起癫痫发作。我的应用程序每秒会更新几次文本，但这并不是什么新鲜事，三星从来没有遇到过这个问题。

有没有人经历过类似的事情，或者有什么建议？我最初怀疑三星拥有更多处理器能力是不正确的。我应该查看一些有关渲染 GPU 的 Nexus 配置细节吗？

如果必须摆脱这个软件功能会很烦人，但如果我不能改善外观，我可能不得不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:33:47.100

这不是一个很好的答案，但如果我将代码设置为每隔一次通过绘图循环更新文本视图，它确实对我有用。如果其他人有不同的建议，我当然更愿意尝试其他方法，但这至少有效。

# qt - 用户调整 QMainWindow 大小时如何分配回调？

> ID：12828825
> 
> 赞同：25
> 
> 时间：2012-10-10T21:38:58.053
> 
> 标签：qt, qwidget

我既没有在 QMainWindow 上找到类似教程的调整大小事件的方案，也没有在 Qt 设计窗口的下拉菜单中看到任何添加调整大小事件的选项。

我是 Qt 的新手。我想为 QMainWindow 调整大小事件编写一个槽函数。有这样的事件吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-10T22:50:41.180

有一个[调整大小事件](http://doc.qt.io/qt-5/qresizeevent.html)。为了执行事件的自定义处理，您需要创建自己的调整大小事件处理程序。在您的情况下，您需要创建一个派生自该函数`QMainWindow`并重新实现该[`resizeEvent`](http://doc.qt.io/qt-5/qwidget.html#resizeEvent)函数的类。您的代码将如下所示：

```
void MyMainWindow::resizeEvent(QResizeEvent* event)
{
   QMainWindow::resizeEvent(event);
   // Your code here.
} 
```

[Qt Scribble 示例](http://doc.qt.io/qt-5/qtwidgets-widgets-scribble-example.html)也有一个覆盖调整大小事件的示例（尽管不在主窗口上）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-01T21:47:16.733

这适用于 Qt5，我 fe 可以调整 QTableWidget 中的图标大小：

```
mainWindow.h
...
private:
void resizeEvent(QResizeEvent*);
...

mainWindow.cpp
...
void mainWindow::resizeEvent(QResizeEvent*)
{
    tableWidget->setIconSize(QSize(tableWidget->size()/7)); //7 or whatever number you need it to get the full icon size
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-23T04:43:32.403

在 PyQt5 中尝试以下操作：

```
from PyQt5 import QtWidgets as qtw
from PyQt5 import QtGui as qtg

class MainWindow(qtw.QMainWindow):

    def __init__(self):
        super().__init__()
        self.resize(600, 600)
        # your code

    def resizeEvent(self, e: qtg.QResizeEvent):
        # your code 
```

# php - 是否可以将任意数据附加到 PHP 中的实际文件

> ID：12828832
> 
> 赞同：2
> 
> 时间：2012-10-10T21:39:35.597
> 
> 标签：php

这是一个非常“不存在”的问题，但我一直在考虑在我的应用程序中进行一些简化，如果这完全可能的话，这将是一种非常干净的做事方式。

**请注意：**我不是在寻找有关不必要的优化等的评论。我很清楚这一点，但是这是我最近一直在考虑的事情，并想知道这是否可能。

背景资料：

如果您想象用户的“封面照片”类似于在 Facebook 和 Google+ 上看到的照片。在这些应用程序中，您可以通过在个人资料页面上向上或向下拖动来调整图像的垂直位置。

此功能在我的应用程序中完全相同。用户在他们的个人资料页面上拖动图像，当他们放开鼠标按钮时，一个 ajax 帖子被发送到服务器，并使用新的“顶部”值更新数据库。

在需要时从数据库中读取这个“顶部”值，当然 css 也会相应地设置。一切正常

问题：

因此，考虑到所有这些，有什么方法可以通过 PHP 将元数据存储到文件本身。在这种情况下，一个 .jpg 文件。我知道您可以从文件中读取某些文件信息数据，但这可以直接自定义吗？是否可以设置一个名为“top”的简单元数据属性并给它一个整数，从而允许在应用程序中读取它而完全绕过对数据库的需求？如果是这样，这种方法有什么缺点吗？

如果这当然是不可能/不可取的，那很好。这也将被视为正确答案，但请解释原因。

我知道一个不寻常的问题。希望有人对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:57:22.460

您可以操作 exif 数据，这是存储在图像中的元数据。所以理论上你可以“保存”元数据字段中的最高值......但是。不要这样做！由于您只想保存一个整数，因此可能会过于昂贵。您无法以标准方式对其进行测试，这不是一种标准的做事方式，因此如果您没有很好地记录它，下一个人会错过它，等等。您的数据库连接无论如何都是打开的，很可能您有用户在内存中，所以从用户配置文件中写入和读取这个值真的不是什么大事。总而言之，我认为这不是一个好主意，即使它是原创的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:57:36.103

如果不是特别需要效率，您可以使用 serialize() 和 unserialize() 来做到这一点。

```
function save( $file, $data ) {
    file_put_contents( $file, serialize($data) );
}

function load( $file ) {
    return( unserialize( file_get_contents( $file ) ) );
} 
```

这将允许您在文件中存储/检索可变长度和组合数据结构。限制是您不能将文件指针和其他资源链接转储到文件中，并且您可能会遇到保存二进制信息的问题。

对此不确定，但如果您确实有二进制信息，您可能需要先对其进行 base64_encode()，然后使用 base64_decode() 进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:49:47.787

虽然这可能是可能的，但我相信你最好的选择是为这个数据库坚持一个数据库。只是因为它更有意义，而且效率更高。

要点：**数据库可以很容易地被索引**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:52:39.120

或者，您可能对这些现代 NoSQL 数据库中的一个感兴趣——我听说[Redis](http://redis.io/)非常适合这种事情。

# emacs - 如何在 emacs 中突出显示自定义数据类型？

> ID：12828838
> 
> 赞同：3
> 
> 时间：2012-10-10T21:39:54.140
> 
> 标签：emacs

在我工作的地方，我们使用了很多我们自己的自定义数据类型。emacs 识别的 c++ 会注意到 STL 中的许多自定义数据类型，例如字符串、向量等。这意味着如果我在我的编辑器中声明这样的函数：

```
string getString() const {
    return str;
} 
```

返回值将以绿色突出显示，因此函数名称将以蓝色突出显示。现在，如果我决定使用自定义字符串，这会搞砸一切。所以现在我的 cpp 文件大多是白色的，因为我们在这里不使用普通的 stl 类。如何对我的 emacs 编辑器进行编程以识别当我的意思是“字符串”时，以与“字符串”相同的方式着色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:54:53.933

你需要`font-lock-add-keywords`. 这是一个例子：

```
(font-lock-add-keywords 'cc-mode
  '(("String" . font-lock-type-face)
    ("str" . font-lock-type-face))) 
```

它添加了正则表达式/字体锁定对的列表。

[关于添加关键字](http://emacswiki.org/emacs/AddKeywords)的主题还有很多内容需要阅读。特别是，您可能会对[ctypes.el](http://emacswiki.org/emacs/ctypes.el)感兴趣。

# wpf - “硬最小值”和“软最小值”有什么区别？

> ID：12828842
> 
> 赞同：1
> 
> 时间：2012-10-10T21:40:06.123
> 
> 标签：wpf, cider

我是注定要为某些 WPF 控件提供设计时支持的可怜人之一。在 VS 2010 和 VS 2012 之间，出现了一个属性（更像是从 Blend 迁移而来的），它允许您为属性指定一系列有效值。

[NumberRangesAttribute](http://msdn.microsoft.com/en-us/subscriptions/microsoft.windows.design.propertyediting.numberrangesattribute.aspx)还没有很好地记录。对于包含范围，设置硬最小值/最大值就可以了。但是今天我遇到了一个排他范围，其中值必须大于零，通常小于 1，但不一定非要如此。所以我的第一次尝试是将最小值设置为 double.Epsilon，将最大值设置为 double.MaxValue。这并没有阻止设计师愉快地接受 0，然后因为无效值而导致问题。

所以开始了一个很长很长的尝试随机值的过程，直到我确定了一个硬最小值 1e-15 和一个软最小值 1。如果我选​​择一个硬最小值或软最小值任何更小的，0 是允许的，并且会发生坏事。1e-15 对我的目的来说绝对足够小，但我不喜欢我强行使用它。我想理解它，而不是留下一个黑客。

那么谁能向我解释这些参数可能会做什么？我也很想知道 canBeAuto 的作用，因为它对我来说也毫无意义。这里的“可以自动设置”是什么意思？用户设置的是一个值，而不是一个范围。

# ruby-on-rails - 如何在rails中选择具有最低字段值的记录

> ID：12828846
> 
> 赞同：1
> 
> 时间：2012-10-10T21:40:29.580
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，我获取了一些数据，它的结果可能是 null、一个或多个相同的记录，但价格值不同，因此我需要在数组中迭代并选择价格值最低的记录（数组值）。我怎样才能做到这一点？我有这样的代码部分：

```
@prlist = PriceList.find(:first, :conditions => { :id => @search.map(&:price_list_id)}) 
```

例如：

```
id name value
1 ololo 15
2 ololo 14
3 ololo 26 
```

我需要选择二维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:46:53.750

我相信

```
PriceList.where('value = MIN(value)') 
```

应该适合你（至少对 MySQL、Postgres 和 SQLite3 来说）。

如果您只需要最小值（而不是整行）：

```
PriceList.minimum('value') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T07:14:15.567

只需按“价值”添加订单：

```
@prlist = PriceList.find(:first, :conditions => { :id => @search.map(&:price_list_id)}, :order => 'value') 
```

# javascript - 通过附加 dom 元素避免 zIndex

> ID：12828850
> 
> 赞同：1
> 
> 时间：2012-10-10T21:40:47.013
> 
> 标签：javascript, performance, dom, z-index, reflow

所以我试图通过 z-index 控制相同大小元素的堆叠。现在，我最近遇到的一个想法是通过希望避免浏览器重排来避免通过 z-indices 并提高性能时间，而是通过我将事物附加到父级的顺序来排序层。

因此，如果我有一个包含所有堆叠 div 的容器 div，以及反映顺序的链表，引用堆叠 div，那么我会根据用户输入对 div 重新排序。然后，我不会更新 z 索引，而是重新创建 div 元素并按顺序附加所有内容。所以是这样的：

```
var from = nodeBeforeFrom; // Input
var target = nodeBeforeTarget; // Input
var linkedlist = input; // var linkedlist contains all the stacking divs
linkedlist.moveElement(div1, div2); //Move div1 to after div2
var container = document.createElement('div');

linkedlist.reorder; // 

var cur = linkedlist.first;
while (cur.next) {
  container.appendChild(cur)
  cur = cur.next;
}
document.removeChild(oldContainer);
document.appendChild(container);
// This is meant as pseudocode so forgive an errors in regards to the specifics 
```

所以我的问题如下：

1.  这会将浏览器回流从 n 次回流减少到 1 或 2 次（其中 n 是 div 的数量）？如果我理解正确，更改单个元素的 z-index 应该会导致浏览器重绘或重排。
2.  第二种方法是否会按照您添加元素的顺序工作和堆叠元素？
3.  有没有办法使用 DOM 的子节点结构来移动孩子，所以我不必创建单独的链表？我只看到我目前可以使用的 removeChild 和 appendChild 函数。

是的，性能是一个问题，因为我打算将它用于图形和 html5 的东西。所以我可以保存我想保存的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:31:03.397

太好了，多亏了 Opera 的好人，在玩弄了一些东西和一些研究之后，我似乎已经回答了我自己的问题。几乎是的，在浏览器上对隐藏/看不见的元素执行更新，然后将其添加到 DOM 树中会更快。我从[这里](http://dev.opera.com/articles/view/efficient-javascript/)得到了我的确认。实际的技巧是设置隐藏的 CSS 标记，执行所有影响显示的操作，然后将隐藏设置回 true，这样可以将浏览器的重排从 O(n) 减少到总共只有 2 次。

这种避免 z-index 的方法也确实有效。不幸的是，我仍然没有找到访问 DOM 元素的 childNodes 链表的方法。但是，仔细查看规范，事实证明 DOM 节点的 childNodes 是只读的，这可能意味着除非有一些模糊的 hack，否则这是不可能的。

# c# - 如何在 C# 中实例化属性的新实例

> ID：12828854
> 
> 赞同：4
> 
> 时间：2012-10-10T21:41:16.933
> 
> 标签：c#, vb.net

在 VB.Net 中，我正在使用它的变体，因此当使用 SearchModel 时，会有一个空的标签列表可供使用。

```
Public Class SearchModel
    Public Property Tags As New List(Of TagDetails)
End Class 
```

一个简单的转换结果，但“标签”为空：

```
public class SearchModel
{
    public List<TagDetails> Tags { get; set; }
} 
```

这是创建“标签”属性并同时创建新的空列表的可接受方式吗？

```
public class SearchModel
{
    public List<TagDetails> Tags = new List<TagDetails>();
} 
```

还是我应该经历所有的仪式？

```
public class SearchModel
{
  private List<TagDetails> _TagDetails;
    public List<TagDetails> Tags
    {
        get { return _TagDetails ?? (_TagDetails = new List<TagDetails>()); }
        set { _TagDetails = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T21:43:29.540

常规方法是使用构造函数：

```
public class SearchModel
{
    public SearchModel()
    {
        Tags = new List<TagDetails>();
    }
    public List<TagDetails> Tags { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T21:42:45.717

在构造函数中实例化它：

```
public class SearchModel
{
    public List<TagDetails> Tags { get; set; }

    public SearchModel()
    {
        Tags = new List<TagDetails>();
    }

    public SearchModel(List<TagDetails> tagDetails)
    {
        Tags = tagDetails;
    }
} 
```

我在 C# 中做到了这一点，因为您的大部分代码都在 C# 中。您可以保持自动属性这样做。您还可以添加一个重载的构造函数，该构造函数接受一个要使用的列表（如果您不想要它，请删除它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T21:51:24.913

最直接的转换如下（这是 VB 在幕后所做的）：

```
public class SearchModel
{
    private List<TagDetails> _Tags = new List<TagDetails>();
    public List<TagDetails> Tags
    {
        get
        {
            return _Tags;
        }
        set
        {
            _Tags = value;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:55:56.883

根本不公开具体列表类也有很好的论据。我当然会质疑 setter 是否明智，您可能会在对象生命周期和垃圾收集器方面弄得一团糟。

```
public class SearchModel
{
    private List<TagDetails> _tags;

    public SearchModel()
    {
        _tags = new List<TagDetails>();
    }

    public IEnumerable<TagDetails> Tags {get {return _tags;}}

} 
```

本来是我的第一次尝试，然后添加我需要的任何其他列表类型方法，清除，追加等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T22:02:09.883

如果要保持列表的惰性实例化：

```
public class SearchModel
{
  private Lazy<List<TagDetails>> tags = new Lazy(() => new List<TagDetails>());

  public List<TagDetails> Tags
  {
    get { return this.tags.Value; }
  }
} 
```

但是，您将无法设置该值。

# greasemonkey - 页面加载后重置或覆盖计数器

> ID：12828855
> 
> 赞同：1
> 
> 时间：2012-10-10T21:41:18.910
> 
> 标签：greasemonkey, userscripts, tampermonkey

我在启动时有以下跨度元素：

```
<span class="counter" text="Time will expire in %num% seconds" start="10"></span> 
```

*start*属性在 jQuery中被捕获并经过一个循环，直到它达到 0，然后显示其余内容。

我正在尝试在页面加载后使用 Tampermonkey 引入选项来重置或清除计数器到我自己的预定时间。

到目前为止，这就是我所拥有的：

```
function init(){
    document.getElementsByTagName("span")[0].getAttributeNode("start").value = "0";
}

window.onload = init; 
```

使用 alert 我可以判断该值已正确更改，但 jQuery 循环继续使用旧值。我知道这会更容易使用 ID 而不是自定义属性，但这是我必须使用的。谢谢！

[定时器JS的Pastebin](http://pastebin.com/hXJdxs4g)条目。

# sql - SQL 数据库中有许多索引的缺点？

> ID：12828861
> 
> 赞同：2
> 
> 时间：2012-10-10T21:41:55.483
> 
> 标签：sql, indexing

我是一个数据库新手，我正在设计我的数据库。为了有效地运行我的应用程序，我需要一半列的索引，因为这样我的外观将是对数时间。

但是在同一个表中有多个索引有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T21:45:09.273

*   修改索引列时的插入/更新性能会更差
*   更多索引将使用更多磁盘空间

# apache - mod_redirect：非 www 到 www.domain.name 和 www。域名到（无硬编码）

> ID：12828868
> 
> 赞同：1
> 
> 时间：2012-10-10T21:42:14.657
> 
> 标签：apache, mod-rewrite, redirect

我期待着做以下重定向：

1.  非 www 域到 www.domain.com 例如：
    *   cnn.com 到 www.cnn.com
2.  www 子域到非 www 子域例如：
    *   www.test.cnn.com 到 test.cnn.com
    *   www.test.cool.cnn.com 到 test.cool.cnn.com

我希望两者都在同一个 htaccess 文件上，而不对域名进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:39:26.900

将 www 添加到任何主机：

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.([a-z]{2,4})$ [NC]
RewriteRule ^(.*)$ http://www.%1.%2/$1 [L,R=301] 
```

从子域中删除 www：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)\.([^.]+)\.([a-z]{2,4})$ [NC]
RewriteRule ^(.*)$ http://%1.%2.%3/$1 [L,R=301] 
```

# python - Scala 中的 python @classmethod 或 @staticmethod 等价物是什么？

> ID：12828870
> 
> 赞同：1
> 
> 时间：2012-10-10T21:42:20.977
> 
> 标签：python, scala

当我不想使用隐式但希望有一个函数从 (eg) 转换`Int`为`MyClass`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:54:07.967

在 Scala 中，an`object`用于定义静态方法。你所描述的听起来像你想要的：

```
class MyClass(n: Int)

object MyClass {
  def apply(n: Int) = new MyClass(n)
} 
```

这样您就可以执行以下任一操作：

```
scala> val a = MyClass.apply(3)
a: MyClass = MyClass@70d1c9b5

scala> val b = MyClass(3)       // works allowed because method is called "apply"
b: MyClass = MyClass@1b4b2db7 
```

我将其称为“工厂方法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:56:30.690

您可以将一个方法放入伴随对象中，以便从 Scala 以静态方式调用它（即没有对象实例）：

```
// Scala
class A
object A {
  def staticMethod = println("Foo!")
}
A.staticMethod // prints "Foo!" 
```

请注意，Scala 编译器实际上创建了一个名为`A$`singleton的新合成类`object A`，因此该行在运行时存在`A.staticMethod`的单个实例上调用该方法。`A$`

值得注意：Scala 编译器还在字节码级别创建了一个静态方法`staticMethod`，`A`该方法将调用转发到`A$.staticMethod`- 如果您在项目中混合 Java 和 Scala 代码，这意味着您还可以从 Java 调用此静态方法像这样：

```
// Java
A.staticMethod(); // works 
```

但是，如果你在伴生类中声明了同名的方法`A`，而在 Scala 中一切仍然以相同的方式工作，则不会生成静态转发器方法`A`，**并且**你将无法`staticMethod`从 Java 调用：

```
// Scala
class A {
  def staticMethod = println("I'm doing something else.")
}
object A { // no companion class
  def staticMethod = println("Foo!")
}
A.staticMethod // prints "Foo!"

// Java
A.staticMethod(); // won't work 
```

# erlang - 为 gen_server 添加了主管，立即关闭？

> ID：12828871
> 
> 赞同：1
> 
> 时间：2012-10-10T21:42:22.177
> 
> 标签：erlang, erlang-otp, erlang-supervisor, gen-server

**编辑：下面。**

为什么我的受监督的 gen_server 这么快就关闭了？

我将给出这些组织名称以更清楚地说明我希望在我的应用程序中使用的命令链：首先我从“assembly_line_worker”开始，然后将“marketing_specialist”添加到我的监督树中......

**ceo_supervisor.erl**

```
-module(ceo_supervisor).
-behaviour(supervisor).

-export([start_link/1]).
-export([init/1]).

start_link(State) ->
     supervisor:start_link({local,?MODULE}, ?MODULE, [State]).

init([Args]) ->
     RestartStrategy = {one_for_one, 10, 60},
     ChildSpec= {assembly_line_worker_supervisor,
          {assembly_line_worker_supervisor, start_link, [Args]},
          permanent, infinity, supervisor, [assembly_line_worker_supervisor]},
     {ok, {RestartStrategy, [ChildSpec]}}. 
```

**assembly_line_worker_supervisor.erl**

```
-module(assembly_line_worker_supervisor).
-behaviour(supervisor).

-export([start_link/1]).
-export([init/1]). %% Internal

start_link(State) ->
    supervisor:start_link({local, ?MODULE}, ?MODULE, [State]).

init([Args]) ->
    RestartStrategy = {one_for_one, 10, 60},
    ChildSpec = {assembly_line_worker, {assembly_line_worker, start_link, [Args]}, permanent,     
        infinity, worker, [assembly_line_worker]},
    {ok, {RestartStrategy, [ChildSpec]}}. 
```

**装配线工人.erl**

```
-module(assembly_line_worker).
...

init([State]) ->
   process_flag(trap_exit, true),
   {ok, State}.

start_link(State) ->
    gen_server:start_link({global, ?MODULE}, ?MODULE, [State], []).

handle_cast(...,State} ->
    io:format("We're getting this message.~n",[]),
    {noreply, State};
... 
```

正在发生的事情是装配线工人做了一些工作，比如在调用 ceo_supervisor:start_link(#innovative_ideas{}) 命令后接收到几条消息，然后它就关闭了。知道为什么吗？我知道 gen_server 正在接收一些消息，因为它 io:format 将它们发送到控制台。

谢谢！

* * *

**编辑**：我通过 erlsrv.exe 在 Windows 上托管它，我发现当我通过如下函数启动程序时：

```
start() ->
    ceo_supervisor:start_link(#innovative_ideas{}),
    assembly_line_worker:ask_for_more_pay(), %% Prints out "I want more $$$" as expected,
    ok. 
```

...此功能立即退出会导致我的主管/gen_servers 关闭。我希望这是因为所有这些都通过监督链接到原始调用过程，所以当它退出时，孩子们也应该这样做。

所以我想一个更好的问题是，我怎样才能让我的主管在完成所有启动配置后继续运行？除了将所有这些包装在应用程序中之外，还有其他选择吗？（听起来还不错……）

感谢您的探索性问题！我通过这种方式了解了更多关于主管的信息。

蝙蝠侠

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:13:32.213

要获得有关正在发生的事情的更多信息，请在启动主管之前启动 sasl：application:start(sasl)。

另一种调试方法是从您的 erlang shell 启动工作程序，发送导致服务器崩溃的消息序列。顺便说一句：你确定你需要 2 级主管吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T11:23:00.183

一些即时评论：

在`ceo_supervisor:init/1`您的主管子规范中应声明`transient`而不是`permanent`.

运行`erl -boot start_sasl`，以便在出现问题时获得错误日志，并且可以获得崩溃程序的崩溃报告。

如果你在 shell 中运行它并且你犯了任何错误，那么你的树将被强行杀死。这是因为您链接到 shell 并且 shell 在错误时崩溃。所以你正在拖下你的树。尝试类似：

```
 Pid = spawn(fun() -> my_app:start() end). 
```

所以你把它分开了。您可以通过向 发送退出消息来终止应用程序`Pid`。

# java - 可编辑的 JTree 将树节点转换为字符串

> ID：12828873
> 
> 赞同：1
> 
> 时间：2012-10-10T21:42:35.310
> 
> 标签：java, swing, jtree

我正在使用从数据库填充的 JTree。

树是通过使用自定义对象设置根节点及其子节点来创建的：

```
private DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode("Categorias");
...
ResultSet primaryCategories = dbm.fetchAllCategories();
while (primaryCategories.next()){
    Category category = new Category(primaryCategories.getLong("_id"), 
            primaryCategories.getString("category"));
    DefaultMutableTreeNode childNode = new DefaultMutableTreeNode(category);
    rootNode.add(childNode);

    ResultSet currentSubcategory = dbm.fetchChildSubcategories(category.getCatId());
    while (currentSubcategory.next()){
        Category subcategory = new Category(currentSubcategory.getLong("_id"), 
                currentSubcategory.getString("category"));
        childNode.add(new DefaultMutableTreeNode(subcategory, false));
    }
}
... 
```

在此之后，树就完美地创建了。填充有“**类别**”对象，每个对象都有自己的 ID 号和名称，以便在 toString() 方法中使用。

当它设置为可编辑时，问题就来了。重命名节点后，**Category**节点也会转换为**String**对象，因此我无法将新的 Category 名称值更新到数据库中。

我试图捕获重命名事件，`treeNodesChanged(TreeModelEvent e)`但是，userObject 已经更改为字符串对象，并且无法获得编辑的对象的参考。

我有什么办法可以解决这个问题？每次发生更改时，我是否应该拥有显示的树的副本以及从数据库下载的另一个树并更新两者？

* *PD: ** 我还尝试从模型中捕获更改的节点，覆盖该方法：

```
public void nodeChanged(TreeNode newNode) {
   DefaultMutableTreeNode parent = ((DefaultMutableTreeNode)newNode.getParent());
    int index = getIndexOfChild(parent, newNode);
    DefaultMutableTreeNode oldNode = (DefaultMutableTreeNode) getChild(parent, index);
    System.out.println(parent.getUserObject().getClass().toString());
    System.out.println(oldNode.getUserObject().getClass().toString());          
} 
```

这打印：

```
class com.giorgi.commandserver.entity.Category
class java.lang.String 
```

所以这里的旧节点已经更改为字符串，我已经完全丢失了对旧类别及其 ID 的引用，因此我无法在数据库中更新它。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:06:08.277

好吧，这需要一点挖掘。

基本上，当编辑“停止”时，`JTree`将通过 editor's 请求编辑器的值`getCellEditorValue`。然后通过`valuesForPathChanged`方法将其传递给模型，最终调用节点的`setUserObject`方法。

据推测，您使用的是默认编辑器或基于文本字段的编辑器。这将返回一个`String`值。

您需要做的是捕获对`setUserObject`树节点方法的更改，访问即将到来的值（即检查它是否为a `String`）并根据需要进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:44:04.530

最终解决方案就像 MadProgrammer 所说的那样：

```
public void valueForPathChanged(TreePath path, Object newValue) {
        DefaultMutableTreeNode aNode = (DefaultMutableTreeNode)path.getLastPathComponent();
        Category catNode = (Category) aNode.getUserObject();
        catNode.setCategory((String) newValue);
        catNode.updateFromDatabase();
        nodeChanged(aNode);
    } 
```

# c# - 努力组合两个 NHibernate 查询，我在其中与结果相交

> ID：12828874
> 
> 赞同：1
> 
> 时间：2012-10-10T21:42:37.607
> 
> 标签：c#, sql, nhibernate

我制作了两个都可以正常工作的查询，但我真的很难理解如何组合它们。我认为我最大的问题是我对查询使用了两种不同的语法，但我不确定如何在不使用“SQL-esque”标记的情况下表达我的第一个查询。

```
List<Task> tasksFromQueue = NHibernateSession.CreateQuery(
    "Select t from Task t, QueueLocation q where q.Queue.ID = :queueID and (t.SiteID = q.ComponentID or t.OriginalSiteID = q.ComponentID)")
    .SetParameter("queueID", queueID).List<Task>().ToList();

List<Task> tasksFromWorkflow = NHibernateSession
    .CreateCriteria(typeof(Task), "Task")
    .CreateCriteria("Task.Order", "Order")
    .CreateAlias("Task.TaskDevice", "TaskDevice").List<Task>();

IEnumerable<Task> tasks = tasksFromWorkflow.Intersect(tasksFromQueue); 
```

如您所见，我有两个问题：

*   对第一个查询使用详细语法，对第二个查询使用 NHibernate 标记。
*   击中数据库两次，然后将结果相交。

tasksFromWorkflow 查询实际上比上面看到的要复杂得多。如果您想查看整个查询，[请单击此处。](https://gist.github.com/0b29592051c85c5fb620)我不确定额外的代码是否真的改变了我的问题——所以我决定在解释问题的同时尽可能缩短立即显示的代码段。

我读到 NHibernate[不支持 intersection](https://stackoverflow.com/questions/3803325/nhibernate-intersection)，所以也许不可能在一个查询中实现而不变得非常复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:44:37.043

我不知道这会有多好，但这个想法应该很清楚

```
var tasksFromQueue = DetachedCriteria.For<Task>()
            .Add(Restrictions.Or(
                Subqueries.In("SiteID", DetachedCriteria.For<QueueLocation>().Add(Restrictions.Eq("Queue.ID", queueID)).SetProjection(Projections.Property("ComponentID"))),
                Subqueries.In("OriginalSiteID", DetachedCriteria.For<QueueLocation>().Add(Restrictions.Eq("Queue.ID", queueID)).SetProjection(Projections.Property("ComponentID")))))
            .SetProjection(Projections.Id());

    "Select t from Task t, QueueLocation q where q.Queue.ID = :queueID and (t.SiteID = q.ComponentID or t.OriginalSiteID = q.ComponentID)")
    .SetParameter("queueID", queueID).List<Task>().ToList();

var tasksFromWorkflow = DetachedCriteria.For<Task>()
    .CreateAlias("Order", "order")
    .CreateAlias("TaskDevice", "device")
    .Add(<restrictions>)
    .SetProjection(Projections.Id());

var results = NHibernateSession.CreateCriteria<Task>()
    .Add(Subqueries.In("Id", tasksFromQueue))
    .Add(Subqueries.In("Id", tasksFromWorkflow))
    .List<Task>(); 
```

# php - 如何解决我的编译器警告

> ID：12828879
> 
> 赞同：2
> 
> 时间：2012-10-10T21:42:43.803
> 
> 标签：php, sql, syntax

整个代码：

```
<?php 

if (isset($_POST['usname']) && isset($_POST['pasw'])){

    $username = mysql_ramznegar($_POST['usname'],$link);
    $password = mysql_ramznegar($_POST['pasw'],$link);

$query = "SELECT * FROM `admin` WHERE `usname` = $username";
    $admin_result = mysql_query($query,$link);
    $admin_result = mysql_fetch_array($query,MYSQL_ASSOC);

    if($admin_result['usname']==$username && $admin_result['passw']==$password){

            if($admin_result[usname] == "admin"){

            $_SESSION['auth'] = 1;

                redirect("panel");

                   exit;                                

    }
     else{

        echo 'ur username or password is invalid';
        redirect("index.php");
     }

}

}

?> 
```

我有一个带有两列的表（管理员）的数据库，第一列是`usname`，第二列是`passw`，但是当我输入用户名和密码编译器向我显示此错误时，我选择了查询，我该如何解决此编译器警告：

> 警告：mysql_fetch_array() 期望参数 1 是资源，第 60 行 C:\xampp\htdocs\ramznegar1\index.php 中给出的字符串
> 
> 你应该改变
> 
> $admin_result = mysql_fetch_array($query, MYSQL_ASSOC)
> 
> 至
> 
> $admin_result = mysql_fetch_array($admin_result, MYSQL_ASSOC)

我编辑了我的代码，但我又遇到了这个错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 60 行的 C:\xampp\htdocs\ramznegar1\index.php 中给出

新代码是： http: [//pastebin.com/ycNT0XqM](http://pastebin.com/ycNT0XqM)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:46:59.333

你应该改变：

```
$query = "SELECT * FROM `admin` WHERE `usname` = $username";
$admin_result = mysql_query($query,$link);
$admin_result = mysql_fetch_array($query,MYSQL_ASSOC); 
```

至

```
$query = "SELECT * FROM `admin` WHERE `usname` = $username"; 
$admin_result = mysqli_query($query,$link); 
$admin_result = mysqli_fetch_array($admin_result,MYSQL_ASSOC); 
```

有关 mysql_fetch_array 如何工作的信息，请参阅[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:46:11.683

你应该改变

```
 $admin_result = mysql_fetch_array($query, MYSQL_ASSOC) 
```

至

```
 $admin_result = mysql_fetch_array($admin_result, MYSQL_ASSOC) 
```

mysql_ 上的 PHP 文档***

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

# api - 验证应用请求是否有效的最佳实践

> ID：12828895
> 
> 赞同：2
> 
> 时间：2012-10-10T21:43:48.700
> 
> 标签：api, facebook-app-requests

我目前正在使用用户对用户应用程序请求让一个用户邀请另一个用户加入我的应用程序。我收到的第一个事件来自对话框，其中列出了请求 ID 和发送到的用户。我收到的第二个事件是用户遵循应用请求时。

验证第一个事件提供的请求 ID 和用户是否有效的最佳实践是什么。我无法读取用户发送的所有 apprequests，并且当用户触发第二个事件时，我也无法调用 /me/apprequests 来验证 ID。

# ruby-on-rails - Bundle在部署时抱怨远程服务器上本地gem的路径

> ID：12828900
> 
> 赞同：0
> 
> 时间：2012-10-10T21:44:01.867
> 
> 标签：ruby-on-rails, mercurial, capistrano, bundler

所以，我有一个 mercurial 存储库，它有一个主项目和 2 个项目扩展。让我们调用项目 A 以及扩展 B 和 C。因此，repo 在 repo 中有 3 个文件夹，A、B 和 C，在我的本地计算机中，这些文件夹位于“~/Documents/Aptana Studio 3 Workspace/”中。在项目 A 的 gemfile 中，我有以下几行：

```
gem "B", :path => "~/Documents/Aptana Studio 3 Workspace/B/"
gem "C", :path => "~/Documents/Aptana Studio 3 Workspace/C/" 
```

当我使用 Capistrano 进行部署时，出现错误：“路径`/home/username/Documents/Aptana Studio 3 Workspace/B`不存在。” 这一点也不奇怪。但是，我真的不知道如何解决这个问题，以便远程服务器和我的本地主机中的路径相同。远程服务器上的正确目录是“~/rails/B”。如果我更改了此服务器端，它将在下次部署时被覆盖。从技术上讲，我可以在本地计算机上创建一个名为 rails 的文件夹，以便它们都位于相同的目录结构中，但这似乎并不是一个优雅的解决方案。

我读过关于将 3 个文件夹拆分到它们自己的存储库中的信息，但在 mercurials 网站上它说这是不好的做法。

有没有办法解决这个问题而不必在我的本地主机中移动我的项目文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:19:04.047

我最终使用了 git 而不是 mercurial。由于 bundler 喜欢 git 并且 git 可以在一个项目中轻松处理多个存储库，所以我切换到它。我在 git 上将项目拆分为 3 个存储库。

我的 gemfile 现在看起来像这样（在将 SSH 密钥添加到 bitbucket 之后）：

```
gem "B", :git => "git@bitbucket.org:username/B.git", :branch => 'master'
gem "C", :git => "git@bitbucket.org:username/C.git", :branch => 'master' 
```

# python - Django：如何创建表，然后通过它们更新数据库

> ID：12828913
> 
> 赞同：4
> 
> 时间：2012-10-10T21:45:02.503
> 
> 标签：python, django, django-models, django-forms

我是 Django 的新手，我已尽力理解它，但我还有很长的路要走。我正在做一个项目，在该项目中我必须制作一个网页，我必须在其中显示来自这些类的数据：

```
class team(models.Model):
    team_name = models.CharField(max_length = 40)
    def __unicode__(self):
            return self.team_name

class metric(models.Model):
    team = models.ForeignKey(team)
    metric_name = models.CharField(max_length = 40)
    def __unicode__(self):
            return self.metric_name

class members(models.Model):
    metric = models.ForeignKey(metric)
    member_ID = models.CharField(max_length = 40)
    member_name = models.CharField(max_length = 40, null=True, blank=True)
    def __unicode__(self):
            return self.member_ID 
```

此外，我希望这些数据也可以编辑。这意味着应该有一个编辑按钮，一旦按下，用户就可以编辑这些字段，一旦他保存它，数据库就会自动更新。

现在据我了解。我需要使用某种表格来显示这些数据，然后一旦用户单击“编辑”按钮，我就必须将表格更改为表格，以便他可以编辑数据？然后在他点击保存后更新数据库。

我不确定如何在 Django 中完成所有这些操作。如果有人可以请逐步向我介绍如何进行，也许可以参考一些参考资料这对我有很大帮助

谢谢 ：）

**更新：**我之前忘了提。我已经创建了一个用户选择 team_name 的页面。然后他被重定向到另一个页面，我想在其中显示该特定团队的表格。而且我还希望该页面是可编辑的。如果我使用模型表单，那么我将无法访问我的团队模型的单个对象。

**UPDATE2：**我仍然坚持这一点。我不明白如何只显示模型类的几个元素和变量，而不是全部。除此之外，我不明白如何创建一个表单，该表单可以从用户那里获取要编辑的数据库对象的输入，然后显示某些可编辑的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:44:19.013

[与此处](https://stackoverflow.com/questions/12828913/django-how-to-create-table-and-then-update-database-through-them#comment17358813_12829485)和[此处](https://stackoverflow.com/questions/12828913/django-how-to-create-table-and-then-update-database-through-them#comment17356249_12828913)的提问者评论相关。首先，你应该把你的类名大写。请检查[文档](http://www.python.org/dev/peps/pep-0008/#class-names)。

您为这样的查询集创建表单。

**表格.py**

```
from django.forms import ModelForm
class MembersForm(ModelForm):
    class Meta:
        model = Members 
```

**网址.py**

```
from django.conf.urls.defaults import *

urlpatterns = patterns('yourapp.views',
    url(r'^$',
        # /
        view = 'index',
        name = 'team-index',
    ),
    url(r'^(?P<lookup_team>[-\w]+)/$',
        # .../team-extreme/
        view = 'update',
        name = 'update-members',
    ),
) 
```

**views.py（您的应用程序的）**

```
from django.http import HttpResponse
from django.template.context import RequestContext
from django.shortcuts import render_to_response, reverse, redirect
from yourapp.models import Members
from yourapp.forms import MembersForm

def index(request):
    queryset = Members.objects.all()

    template = 'yourapp/index.html'
    kwvars = {
        'data': queryset,
    }
    return render_to_response(template, kwvars, RequestContext(request))

def update(request, lookup_team):
    """change members being in a special team"""

    queryset = Members.objects.filter(metric__team__team_name=lookup_team)

    if request.POST:
        form = MemberForm(request.POST, instance=queryset)
        if form.is_valid():
            form.save()
            return redirect(reverse('team-index'))
    else:
        form = MemberForm(instance=queryset)

    template = 'yourapp/update.html'
    kwvars = {
        'form': form,
    }
    return render_to_response(template, kwvars, RequestContext(request)) 
```

希望这可以帮助。如果您有任何问题，请给我留言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:34:26.043

如果您想像描述的那样动态地实现它，那么仅靠 Django 是不可能的；Django 可以为您提供表格和表单，但是无需重新加载页面的动态更改（我猜这是您真正想要的）需要一些客户端代码 JavaScript。

但是关于显示数据和表单：使用 Django 的基于类的通用视图。

[ListView](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview)和[DetailsView](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#detailview)应该让您开始显示模型中的数据。

ModelForm 结合适当的[通用编辑视图](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/)应该可以帮助您编辑数据。

默认情况下，这些视图将以某些（通常有用的）格式返回数据，并且可以使用您自己的模板进行自定义。我建议您阅读我提供给您的链接并从那里开始工作。那应该让你继续前进。

# gwt - 如何在 RequestBuilder 和 Servlet 中使用 GWT 序列化

> ID：12828915
> 
> 赞同：2
> 
> 时间：2012-10-10T21:45:11.503
> 
> 标签：gwt, servlets

到目前为止，我正在为服务器端请求使用 GWT RPC 调用，这非常好。我计划将我的代码分成 Servlet 和 GWT 客户端。由于我正在使用 RPC 调用，这似乎是不可能的。我想这样做的原因是，我打算为我的应用程序提供白标选项。因此，如果我可以将代码与客户端代码和 servlet 分开，我可以简单地将白标客户端代码提供给我的合作伙伴以托管在他们的服务器上。我已经检查过 GWT RequestBuilder`Access-Control Allow-Origin : Origin from Client Header`并且它工作正常。

但是我需要在 RequestBuilder 请求和 Servlet 响应上实现 gwt 序列化。我怎样才能做到这一点 ..？

我喜欢制作的场景：

1.  RequestBuilder 将 Serializable String（它是一个`IsSerialiazible`对象）发送到 Servlet。

2.  Servlet 将字符串反序列化为 Java 对象，处理并返回“IsSeraliazable”对象的字符串响应。

3.  在 GWT RequestBuilder 中收到的响应字符串将其反序列化回 Java 对象（编译后的 JS）。

我检查了 RemoteServiceServlet 类，它似乎有一些关于序列化和反序列化请求和响应的信息。但我无法让它与 RequestBuilder 一起工作。有什么想法，希望对大家有帮助。

```
 public final void processPost(HttpServletRequest request,HttpServletResponse response) 
    throws IOException, ServletException,SerializationException 
    {
        // Read the request fully.
        //
        String requestPayload = readContent(request);

        // Let subclasses see the serialized request.
        //
        onBeforeRequestDeserialized(requestPayload);

        // Invoke the core dispatching logic, which returns the serialized
        // result.
        //
        String responsePayload = processCall(requestPayload);

        // Let subclasses see the serialized response.
        //
        onAfterResponseSerialized(responsePayload);

        // Write the response.
        //
        writeResponse(request, response, responsePayload);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:13:31.063

GWT RPC 和 RequestBuilder 服务于不同的目的。我们不能混合/匹配它们。

GWT RPC - 获取数据的服务

GWT Request Builder - 触发对 js、css、json 对象、查询soap服务等静态资源的请求

对于您处理请求的方法，我认为唯一可行的解​​决方案是使用 JSON - [https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)

您可以保持 servlet 代码不变，然后使用 RequestBuilder 查询映射到这些 servlet 的 URL 以获取 JSON 对象。使用 JSNI 或 Overlay 概念处理 JSON 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:18:17.887

我正在尝试获取 GWT 序列化和反序列化源。不幸的是，我一直忙于其他工作，现在无法查看。当我得到 GWT 序列化类时，我会更新。

# ios - 在没有内置 UI 的情况下直接执行 Facebook 请求

> ID：12828916
> 
> 赞同：0
> 
> 时间：2012-10-10T21:45:28.700
> 
> 标签：ios, facebook, facebook-graph-api, request

我想确认这是否可能。我想使用我自己的 UI（特别是朋友选择器）将“用户到用户请求”直接发布到打开图形操作。

我的朋友选择器确实遵循平台指南（即不允许用户一次选择所有用户）。我的问题是，我可以直接发布这些请求，而无需使用任何 FB UI，包括请求对话框预览（我们将展示我们自己的预览）。

这是在 iOS 上构建的。我们想要使用自己的 UI 的主要原因是因为我们的设计团队认为弹出窗口会阻碍移动端的用户体验，他们希望使其无缝。他们的推理是一个设计问题，可能需要一起讨论，但我想知道的是在不使用本机 FB ui 的情况下使用 requests api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:56:45.927

答案很简单，是的，是的，您可以这样做，然后使用用户选择的朋友的 ID 将请求发布给每个朋友。您所要做的就是检索朋友列表检索选定的用户 ID 并将请求发布给他们。

# java - 如何使用外键保存实体而不在 JPA 中加载相关实体？

> ID：12828919
> 
> 赞同：18
> 
> 时间：2012-10-10T21:45:46.913
> 
> 标签：java, jpa, orm

我有两个实体：

```
Account {
  @Id
  Long id;
}

Preference {
  ...
  @ManyToOne
  private Account account;
} 
```

保存首选项时，我有 accountId，但我没有 Account 实体。在这种情况下我应该如何保存偏好？

加载 Account 实体并将其设置为首选项？对我来说，这似乎是一次错误的数据库之旅。

有一个可持久的 accountId 字段并使 Account 字段为只读？同时拥有 accountId 字段和 Account 字段似乎是多余的？

使用 NamedQuery 来持久化 Preference？我希望只是一般地保存一个没有特殊逻辑的实体。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T21:48:42.850

使用`em.getReference(Account.class, accountId)`. 它在实体上返回一个未初始化的代理，而不去数据库。您的用例是此方法存在的主要原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-17T19:12:07.540

除了`em.getReference`或`JpaRepository.getOne`操纵 spring-data-jpa 还有其他解决方案：

1.  可以通过更新查询。例如使用弹簧数据

    ```
    @Transactional
    @Modifying
    @Query("UPDATE Preference SET prop1=:prop1 .. WHERE u.id=:id")
    int updatePreference(@Param("id") int id, @Param("prop1") String prop1, ...); 
    ```

请参阅[Spring Data JPA 中使用更新查询更新实体](https://codingexplained.com/coding/java/spring-framework/updating-entities-with-update-query-spring-data-jpa)

2.  spring-data`DomainClassConverter`可以从请求参数或路径变量中自动解析实体实例。例如

    ```
    @GetMapping("/employees/{id}")
    public Employee getEmployeeById(@PathVariable("id") Employee employee) {
        return employee;
    } 
    ```

请参阅[从请求参数或路径变量中解析实体实例](https://www.logicbig.com/tutorials/spring-framework/spring-data/web-support-with-domain-class-converter.html)

# android - 如何读取资产中的 excel 文件？

> ID：12828923
> 
> 赞同：2
> 
> 时间：2012-10-10T21:46:01.193
> 
> 标签：android

在下面的代码中，我试图读取 xls 文件并通过 JXL api 执行任何必要的类，但是在转换为 Workbook.getWorkbook (dbInputStream) 时发生异常

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import jxl.Cell;
import jxl.Sheet;
import jxl.Workbook;
import jxl.read.biff.BiffException;
import android.content.Context;

public class ReadExcel {

    public static List<ChaveEloCoordenada> read(Context context) {
        List<ChaveEloCoordenada> list = new ArrayList<ChaveEloCoordenada>();
        try {
            InputStream dbInputStream = context.getAssets().open("file.xls", Context.MODE_WORLD_READABLE);

            int cols = 9;
            Cell[] row;

            Cell cell;

            Workbook w;

            ChaveEloCoordenada chave = null;

            w = Workbook.getWorkbook(dbInputStream);//error here

            Sheet sheet = w.getSheet(0);

            for (int r = 1; r < sheet.getRows(); r++) {
                chave = new ChaveEloCoordenada();
                row = sheet.getRow(r);
                if (row != null) {
                    for (int c = 0; c < cols; c++) {
                        cell = sheet.getCell(c, r);
                        if (cell != null) {
                            if (c == 0) {
                                chave.setBarramento(cell.getContents());
                            } else if (c == 1) {
                                chave.setCoordX(cell.getContents());
                            } else if (c == 2) {
                                chave.setCoordY(cell.getContents());
                            } else if (c == 3) {
                                chave.setPlaca(cell.getContents());
                            } else if (c == 4) {
                                chave.setTipo(cell.getContents());
                            } else if (c == 5) {
                                chave.setSe(cell.getContents());
                            } else if (c == 6) {
                                chave.setAlim(cell.getContents());
                            } else if (c == 7) {
                                chave.setElo(cell.getContents());
                            } else if (c == 8) {
                                chave.setTipoElo(cell.getContents());
                            }
                        }
                    }
                    list.add(chave);
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
        } catch (BiffException e) {
            e.printStackTrace();
        }
        return list;
    }

} 
```

知道如何解决这个问题吗？

谢谢！

## 编辑

下面是例外

```
java.io.IOException
at android.content.res.AssetManager.readAsset(Native Method)
at android.content.res.AssetManager.access$700(AssetManager.java:36)
at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:571)
at jxl.read.biff.File.<init>(File.java:91)
at jxl.Workbook.getWorkbook(Workbook.java:268)
at jxl.Workbook.getWorkbook(Workbook.java:253) 
```

如果我把上面的代码放在一个java项目中就可以正常工作了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:16:13.710

感谢所有试图帮助我的人！

问题是我试图读取的文件超出了 android 支持的大小。excel 文件有 9.4 mb，看起来 android 文件在 assets 文件夹中只读取了 1MB 多一点。

所以我发现的解决方案可能不是最好的，手动将数据从 xls 文件复制到 txt 文件，用 gzip 压缩这个文件，然后读取压缩文件，然后读取 txt 文件，从而保存我需要的所有信息（超过50,000 条记录）在数据库中！按照下面的代码：

```
 @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
           scriptChaveEloCoordenada(db);        
    }

public void scriptChaveEloCoordenada(SQLiteDatabase db) {

        List<ChaveEloCoordenada> list = ReadExcel.read(context);

        for (ChaveEloCoordenada chave : list) {
            db.execSQL(insertChaveEloCoordenadas(chave.getBarramento(), chave.getCoordX(),chave.getCoordY(),chave.getPlaca(),
                                                 chave.getTipo(),chave.getSe(),chave.getAlim(),chave.getElo(),chave.getTipoElo()));
        }       

    }

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.util.ArrayList;
import java.util.List;
import java.util.zip.GZIPInputStream;

import business.coordinate;
import android.content.Context;

    public class ReadExcel {

        public static List<ChaveEloCoordenada> read(Context context) {
            List<ChaveEloCoordenada> list = new ArrayList<ChaveEloCoordenada>();
            ChaveEloCoordenada chave = null;
            String line;
            int i = 0;
            String split[] = null;

            try {
                InputStream is = context.getAssets().open("file.zip");

                InputStream gzipStream = new GZIPInputStream(is);
                Reader decoder = new InputStreamReader(gzipStream, "UTF-8");
                BufferedReader buffered = new BufferedReader(decoder);

                while((line = buffered.readLine()) != null) {
                    i++;
                    chave = new ChaveEloCoordenada();
                    split = line.split("\t");
                    chave.setBarramento(split[0]);
                    chave.setCoordX(split[1]);
                    chave.setCoordY(split[2]);
                    chave.setPlaca(split[3]);
                    chave.setTipo(split[4]);
                    chave.setSe(split[5]);
                    chave.setAlim(split[6]);
                    if (split.length > 7 ) {
                        chave.setElo(split[7]);
                        chave.setTipoElo(split[8]);
                    }
                    list.add(chave);
                }
                buffered.close();
                System.out.println("TOTAL = " + i);
            }
            catch (final IOException ioe) {
                System.err.println("Unhandled exception:");
                ioe.printStackTrace();
                return list;
            }

            return list;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T05:09:12.800

我不认为它是因为尺寸，线

> w = Workbook.getWorkbook(dbInputStream);

仅适用于 File 对象而不适用于您要使用的 InputStream 对象

# java - 用于参数注入/属性管理的好库

> ID：12828924
> 
> 赞同：2
> 
> 时间：2012-10-10T21:46:03.750
> 
> 标签：java, configuration, properties, dependency-injection, configuration-files

我有[一段代码](https://gist.github.com/3868359)用于管理属性已有一段时间了。我的老板不喜欢这个解决方案，理由是物业管理应该由知名的库来完成，比如 Spring/Guice。这是可以理解的，我正在寻找替代品，但我找不到能够提供我想要的功能的替代品（或者我可能不知道如何正确使用它们）。

我正在寻找的功能是：

1.  超级容易在编码期间向类添加新属性
    1.  无需触摸构造函数，添加专用字段或设置器
    2.  使用 Java 代码（尽可能）
    3.  易于添加默认值。如果您只想快速配置某些内容并保持代码正常工作，则无需编辑属性文件
2.  可以使用任何类型（可以在框架内定义从 String 转换）
3.  在每个属性的配置加载时运行的自定义验证
    1.  例如检查文件是否存在，检查定义的转换是否成功等。
4.  能够将参数注入最终字段
5.  能够自动生成属性文件模板
    1.  尤其是定义描述的能力，最好是在 Java 代码中，然后将其写入模板
6.  能够在运行时以线程安全的方式更新配置

**是否有任何图书馆可以为我提供这些功能？**

**如果我遗漏了一些东西，而这些都可以通过 Spring/Guice 来满足，那么网上有什么好的资源吗？**

[我的解决方案的示例用法](https://gist.github.com/3868631)
[生成的属性文件 TEMPLATE 示例（您复制并编辑此文件）](https://gist.github.com/3868903)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T00:05:24.850

> 无需触摸构造函数，添加专用字段或设置器

那不是[依赖注入](http://martinfowler.com/articles/injection.html)模式。您可能会替换资源定位器模式，但做得好（特别是在保持可测试性的方式上）并非易事：使用 setter，我可以轻松地重新配置被测类。如果该类依赖于配置文件，每当我需要更改单元测试的设置时，我会编写一个单独的配置文件吗？我会模拟配置类吗？可能，但不完全直截了当......

> 能够自动生成属性文件模板

正如评论中已经指出的那样，这似乎不是很有用，因为它无法迁移旧的配置文件。

> 能够在运行时以线程安全的方式更新配置

这通常需要正在配置的组件的支持（例如，更改线程池大小的设置涉及启动/停止工作线程......）。一般来说，处理这个问题的唯一简单方法是重新启动应用程序......

如果您放弃这些要求，Spring 的[PropertyOverrideConfigurer](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-overrideconfigurer)就非常适合。

或者，如果您在 servlet 容器中运行，您可以使用[JNDI 查找](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-jee-jndi-lookup)来填充您的 Spring 配置。

如果你真的想生成模板，我不知道一个现成的解决方案。我可能会做类似的事情：

```
class Configuration {

    int threadCount = 10;

    String secretKey;

    @Description("Number of workers. Default value is number of available cores.")
    int workerThreadCount = Runtime.getRuntime().availableProcessors();

    /** Use default settings */
    Configuration() {

    }

    /** read the settings from the file */
    Configuration(Properties props) {
        for (String prop : props) {
            Field f = getClass().getField(prop);
            f.set(this, props.getValue(prop)); 
            // TODO: type conversion, 
            // e.g. with PropertyEditors, 
            // or Spring's ConversionService, 
            // or invoking the constructor that takes a single string argument, 
            // or ...
        }
    }

    void save() {
        for (Field f : getClass().getFields()) {
            // TODO save the setting
        }
    }
} 
```

编写默认配置将是一个简单的 as `new Configuration().save(file)`，或升级现有配置，如 `new Configuration(file).save(file)' 一样简单。

与您的方法不同，这种方法是静态类型安全的，并且不会使访问具有冗余类型说明符的配置设置的代码混乱。也就是说，而不是

```
if(config.value(Prop.PROXY_ENABLED,Boolean.class)){ 
```

你可以简单地写

```
if (config.proxyEnabled) { 
```

并且因为该字段可以是布尔类型（不是布尔类型），所以您甚至不会在这里冒 NullPointerException 的风险。

# gwt - GWT如何修改ClickHandler中的按钮值

> ID：12828935
> 
> 赞同：0
> 
> 时间：2012-10-10T21:47:01.907
> 
> 标签：gwt

我想实现这个功能，当我点击按钮时，按钮的值会发生变化。但我知道我不能在它的 clickHandler 中调用按钮对象本身。那么，我该怎么做呢？

```
button.addClickHandler(new ClickHandler(){
                public void onClick(ClickEvent event){
                    button.getButtonElement().setValue("X");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:31:36.960

2种方式：

```
((Button)event.getSource()).setValue("x"); 
```

或者

在处理程序之外，使用

```
final Button btn = button; 
```

然后，您将能够使用 btn 作为处理程序内按钮的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:50:08.243

这是一个非常容易解决的问题：

```
final Button b = new Button("Old text here", new ClickHandler() {
  public void onClick(ClickEvent event) {
    b.setText("new text here");
  }
}); 
```

# eclipse - spring roo 教程-撤消执行 eclipse 命令

> ID：12828936
> 
> 赞同：1
> 
> 时间：2012-10-10T21:47:16.527
> 
> 标签：eclipse, spring-roo

我正在关注spring roo教程

[http://static.springsource.org/spring-roo/reference/html/beginning.html](http://static.springsource.org/spring-roo/reference/html/beginning.html)

我的问题是我`perform eclipse`之前没有阅读完整的段落就运行了命令。现在，因为我已经在使用 STS，所以我不应该让我的 roo 项目黯然失色。

现在，如何撤消`perform eclipse`命令以便我可以直接导入项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:57:13.473

我恢复执行 eclipse 命令的方式是退出 roo 并从我键入项目的目录中

```
mvn eclipse:clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:06:38.803

尝试将项目直接导入为 maven 项目，而不是导入现有项目。

如果导入的项目有任何问题，请尝试从 Maven 上下文菜单中更新项目配置（右键单击项目。选项的确切名称取决于您在 STS 中拥有的 m2eclipse 插件的版本：0.12 或1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:25:58.643

既然你处于学习模式，刚刚开始，何不干脆删除当前项目，然后根据教程重新开始呢？

参考教程中“执行 eclipse”命令之前描述的所有操作都可以在 10 分钟内完成。这样，您还可以修改刚刚学习的 Roo 的前 5-6 个命令并获得干净的设置（没有任何初学者的挫败感）

# web-services - 如果您不打算共享，将 oAuth 用于您自己的服务是否有好处？

> ID：12828937
> 
> 赞同：2
> 
> 时间：2012-10-10T21:47:32.033
> 
> 标签：web-services, authentication, oauth, authorization

我有一个 REST API，可以从移动客户端和 Web 应用程序访问。我想为此使用 oAuth。不一定是资源共享方面（现在只适用于我们的应用程序），而是因为它提供了如何标记和签署请求的标准。

我的问题：

*   这是对 oAuth 的合理使用吗？
*   这里有很多帖子讨论必须在移动设备上存储客户端机密的问题，但在这种情况下，这真的是一个问题，因为我也拥有该服务吗？
*   有什么理由给每个客户自己的秘密吗？这通常用于访问撤销，但同样，我控制服务并且可以禁用他们的用户帐户。

# java - 使用 BufferedReader 读取大型文本文件并将其存储到字符串中

> ID：12828938
> 
> 赞同：2
> 
> 时间：2012-10-10T21:47:33.707
> 
> 标签：java, string, bufferedreader

> **可能重复：**
> [如何从文件内容创建 Java 字符串](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)

我正在使用 a`BufferedReader`读取一个大文本文件，并希望将阅读器读取的全部内容存储到`String`. 这似乎无法正常工作，因为当我打印出 . 时`String`，它似乎只抓取了文件的最后一部分。我在这里做错了吗？

```
try {
    String str = "";
    BufferedReader fileReader = new BufferedReader(new FileReader(args[2]));
    while (fileReader.ready()) {
        str += (char) fileReader.read();
    }
    System.out.println(str);
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:59:57.260

Your problem is the while condition. You shouldn't use ready there. By the way, please, replace your String with [StringBuffer](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html) your code will run much faster.

Try with this code (untested but should work)

```
StringBuffer sb = new StringBuffer();

try {
    fileReader = new BufferedReader(new FileReader(args[2]));
    int i;
    while ((i=fileReader.read())!=-1) {
            sb.append(s);
    }

    System.out.println(sb.toString());

 } catch (IOException e) {
        e.printStackTrace();
 } 
```

Here a version using readLine (if you care about newlines you can still append a \n)

```
StringBuffer sb = new StringBuffer();

try {
    fileReader = new BufferedReader(new FileReader(args[2]));
    String s;
    while ((s=fileReader.readLine())!=null) {
            sb.append(s);
            //sb.append('\n'); //if you want the newline
    }

    System.out.println(sb.toString());

 } catch (IOException e) {
        e.printStackTrace();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:52:52.613

> 我在这里做错了吗？

好吧，有些事情是*错误*的，有些事情远非理想。

*   你有一个`BufferedReader`名为`fileReader`. 至少可以说这令人困惑。
*   您正在使用`FileReader`这通常是一个坏主意，因为它*始终*使用平台默认编码
*   您只是在[`ready()`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#ready%28%29)返回时阅读`true`。这只是返回下一次读取是否会阻塞 - 对于文件来说*可能*没问题，但总的来说这绝对不是一个好主意。您应该阅读，直到下一次调用表明您已经用尽了流。
*   您一次读取一个字符，这有点低效 - 无需对每个字符进行一次调用，而不是使用`read`需要字符数组的重载，从而允许批量传输。
*   您正在使用字符串连接来构建文件，这也非常低效。
*   没有迹象表明您正在关闭阅读器。也许那是您尚未发布的代码...
*   你有两个级别的`try`阻塞，没有明显的原因，你的`IOException`处理几乎总是错误的方法——你应该很少吞下异常（即使在记录之后），然后继续，好像什么都没发生一样。

如果*可能*，请避免完全编写此代码 - 改用[Guava](http://guava-libraries.googlecode.com)：

```
// Use the appropriate encoding for the file, of course.
String text = Files.toString(new File(args[2]), Charsets.UTF_8); 
```

当然，现在您可能会发现您仍然看到相同的结果 - 可能文件具有`"\r"`换行符，而您所在的系统*仅*将其解释为“返回行首”，因此每一行都覆盖了前一行一。我们真的不能说 - 但是一旦你用一次调用替换了你的代码，`Files.toString()`诊断它会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T00:38:34.283

您还可以使用 commons ioutils 的 IOUtils.toString 方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T21:51:34.660

如果您使用的是 Java 7，请使用`Files.readAllLines`一行来完成此操作。

否则，您的方法效率很低。使用此处的答案之一[如何从文件的内容创建 Java 字符串？](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T21:51:38.060

如果这是一个文本文件，你为什么不使用[`readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)？

# machine-learning - 理解用于 POS 标记的结构化感知器

> ID：12828941
> 
> 赞同：3
> 
> 时间：2012-10-10T21:47:57.820
> 
> 标签：machine-learning, nlp, perceptron, pos-tagger

我在理解应该如何为词性标记实现结构化感知器时遇到了一些麻烦。您能否确认或更正我的想法，和/或填补任何缺失的空白？

因此，基本上结构化感知器是多类感知器的变体，除了您如何实现收集最佳分数。做出一阶马尔可夫假设，表示当前序列索引只依赖于前一个索引。输入是整个单词序列，而不是像在非结构化情况下那样只有一个单词，以及所有可能标签 (y) 的向量。函数 f(x,y) 返回给定单词序列的猜测标签序列。

在多类感知器中，通过迭代很容易获得最佳分数，因为我们只处理将一个标签分类到一个实例。对整个序列进行分类的问题在于它会导致可能的标记数量呈指数增长。这就是需要维特比算法的地方，它使用两个特征集递归地找到最佳路径；一个用于确定给定词性标签与某个词的可能性有多大，另一个用于确定某个词性标签直接出现在另一个词性标签之后的可能性。这些特征集中的分数乘以每个状态的唯一权重。如果选择的路径是错误的，则惩罚错误路径状态中的每个权重，并奖励正确路径中的权重。

这是关于我（希望）了解的程度。我现在最大的问题是特征是如何构造的（之前的标签序列是特征的一部分吗？），以及如何实际实现维特比算法。此外，在我可以分析的任何地方（最好是在 Java 中）是否有使用结构化感知器的 POS 标记器的实现？

如果您能给我一些提示，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:33:42.750

我想您已经阅读了[原始论文](http://www.cs.columbia.edu/~mcollins/papers/tagperc.pdf)，但为了完整起见，将在此处留下链接。

你的直觉基本上是正确的。关于特征，只要你坚持使用维特比算法，你就必须将自己局限于本地。这些通常包括一个单词窗口（我相信上面的论文中有 5 个单词）、一个或多个前面的 POS 标签和/或它们的组合。Viterbi 算法的实现将在一定程度上取决于特征的选择。一般来说，后者是动态编程中相对简单的练习，但您也可以在 Google 上搜索一些实现。例如[，该项目](http://code.google.com/p/hmm-perceptron/)声称包含上述论文中描述的算法的实现。

# c# - 打开 Visio 文档时应用程序永远挂起

> ID：12828946
> 
> 赞同：0
> 
> 时间：2012-10-10T21:48:09.287
> 
> 标签：c#, asp.net, office-interop, visio

这是我的一小段代码。

```
protected void ViewVisio(string url)
{
    // open document
    Microsoft.Office.Interop.Visio.Application visApp = 
        new Microsoft.Office.Interop.Visio.Application();
    Microsoft.Office.Interop.Visio.Document visDoc =    // application hangs here
        visApp.Documents.Open(url);

    ...
} 
```

基本上，应用程序只是永远挂在打开文档的那一行。它永远不会超时，即使在几个小时之后，它也不会抛出异常。我检查了 Windows 事件日志，但那里什么也没有。

我在我的服务器上安装了具有所有正确权限的 Office。我对 Word、Excel 和 PowerPoint 文件做同样的事情，它们都工作得很好，所以我认为这与它没有任何关系。

所以我在这里有点茫然 - 任何人都知道问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:12:59.993

切勿在自动化环境下运行 Microsoft Office。Microsoft 不推荐或不支持此操作（请参阅[此处](http://support.microsoft.com/kb/257757)的 KB257757 ）。

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

# gwt - 如何获取 google 用户名并将其放入我的 GWT 小部件中？

> ID：12828947
> 
> 赞同：0
> 
> 时间：2012-10-10T21:48:12.987
> 
> 标签：gwt

我正在使用 GWT 创建一个与远程服务器的 REST API 交互的小部件，它将位于 Google 站点上。

我想获取他们用于登录 Google Apps 的用户名，并用他们的姓名填充名称字段。

我该怎么做呢？

谢谢，brl8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:17:56.120

以下是使用 Google 帐户进行用户身份验证的指南：

[https://developers.google.com/accounts/](https://developers.google.com/accounts/)

您获得的有关经过身份验证的用户的信息有限，包括他们的电子邮件地址以及他们为其 Google 帐户选择的任何名称。

如果您在 Google App Engine 上托管您的应用程序，则有一项特殊的用户服务可以让 Google 帐户的身份验证变得非常简单。

# django - 我正在尝试使用 django-mptt 构建站点导航

> ID：12828949
> 
> 赞同：3
> 
> 时间：2012-10-10T21:48:19.230
> 
> 标签：django, django-mptt

我已经使用 django-mptt 对我想要存储文章的标题的部分和子部分等进行建模。有些部分和部分会有孩子，其他部分不会。例如：

```
[Home]
 [News]
    [Politics][Crime][Policing]  etc 
 then [News] > [Politics]
                 [UKIP][Labour] etc 
```

我相信你明白了。我已经创建了 Section 模型

```
class Section(MPTTModel):
    name = models.CharField(max_length=50)
    parent = TreeForeignKey('self',null=True, blank=True, related_name='sub_sections')
    tree = SectionTreeManager() 
```

并将 Section.objects.all() 传递到模板中：-

```
<ul class="headernav" >

    {% recursetree sections %}

        <li>
            <a href="/section/{{node.name}}" >{{ node.name }}</a>

             {% if node.is_leaf_node %}
                <ul  class="headernav"> 
                    {{ children }}
                </ul>
            {% endif %}
           </li>
    {% endrecursetree %}
</ul> 
```

我可以显示所有节点。我想要做的是，基于当前 url 即 /section/News 获取当前级别的所有兄弟姐妹，所有上一级的祖先和下一级的所有相关后代。所以如果我选择新闻我会得到

```
[home][**News**][World][Sports][Culture] <- Level 0

[Politics][Crime][Education] <- Children on Level 1 
```

我怎样才能做到这一点？任何帮助将非常感激。我正在学习 Django，所以如果很明显我提前道歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T05:56:44.873

[django-page-cms](https://github.com/batiste/django-page-cms)已经解决了这种类型的问题`django-mptt`，所以我建议看看它在那里完成的方式。

具体来说，[渲染树形菜单的模板](https://github.com/batiste/django-page-cms/blob/master/pages/templates/pages/dynamic_tree_menu.html)[是](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)通过一个名为[`pages_dynamic_tree_menu`](https://github.com/batiste/django-page-cms/blob/master/pages/templatetags/pages_tags.py#L225).

这听起来很复杂（自定义 ta-whaaa！），所以我会再分解一下。

我们可以认为 a [`Page`in`django-page-cms`](https://github.com/batiste/django-page-cms/blob/master/pages/models.py#L27)`Section`与您的班级大致相同。

在 99% 的页面之间共享的基本模板中，`django-page-cms` [让您插入以下代码段](http://packages.python.org/django-page-cms/navigation-template-tags.html#pages-dynamic-tree-menu)：

```
<ul>
{% for page in pages_navigation %}
    {% pages_dynamic_tree_menu page %}
{% endfor %}
</ul> 
```

`pages_navigation` [由](https://github.com/batiste/django-page-cms/blob/master/pages/context_processors.py#L16)[上下文处理器](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS)设置（一种将项目添加到 django 项目中所有视图的 [模板上下文](https://docs.djangoproject.com/en/dev/ref/templates/api/#playing-with-context-objects)的方法）并包含顶级页面（即没有父页面的页面）。

标签的`pages_dynamic_tree_menu`定义和注册如下：

```
def pages_dynamic_tree_menu(context, page, url='/'):
    """
    Render a "dynamic" tree menu, with all nodes expanded which are either
    ancestors or the current page itself.

    Override ``pages/dynamic_tree_menu.html`` if you want to change the
    design.

    :param page: the current page
    :param url: not used anymore
    """
    lang = context.get('lang', pages_settings.PAGE_DEFAULT_LANGUAGE)
    page = get_page_from_string_or_id(page, lang)
    children = None
    if page and 'current_page' in context:
        current_page = context['current_page']
        # if this node is expanded, we also have to render its children
        # a node is expanded if it is the current node or one of its ancestors
        if(page.tree_id == current_page.tree_id and
            page.lft <= current_page.lft and
            page.rght >= current_page.rght):
            children = page.get_children_for_frontend()
    context.update({'children': children, 'page': page})
    return context
    pages_dynamic_tree_menu = register.inclusion_tag(
        'pages/dynamic_tree_menu.html',
        takes_context=True
    )(pages_dynamic_tree_menu) 
```

它的全部意义在于设置 `page`和`children`变量。

神奇之处在于语句，它确保仅当页面是当前页面（模板变量由呈现 a 的视图设置）或页面是祖先`if`时才显示子级。&属性由 提供，该MPTT 的两个属性是*父树节点的左值将小于其子节点的左值*，*父节点的右值将大于其右值它的子节点*，您可以通过查看[SQL 中的树](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)一文中的下图来直观地验证它：`current_page``django-page-cms``Page``lft``rght``django-mptt`

 **![MPTT的图片](../Images/c7d9868cd01415388c5a74eba18c1811.png)

通过一些过滤来隐藏未发布的对象的调用`get_children_for_frontend()`方法，所以没有什么特别的。`Page``MPTTModel.getChildren()``Page`

然后标签执行与模板[等效](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)的标签，然后再次调用标签，导致整个事情递归：[`{% include %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)[`pages/dynamic_tree_menu.html`](https://github.com/batiste/django-page-cms/blob/master/pages/templates/pages/dynamic_tree_menu.html)`pages_dynamic_tree_menu`

```
{% load pages_tags cache %}
{% if page.calculated_status %}
<li {% ifequal page current_page %}class="selected"{% endifequal %}>
<a href="{% show_absolute_url page %}">{% show_content page "title" %}</a>
{% if children %}
    <ul>{% for child in children %}{% pages_dynamic_tree_menu child url %}{% endfor %}</ul>
{% endif %}
</li>
{% endif %} 
```

因此，如果您定义了类似的设置（为您的模板提供顶级部分和当前部分，定义“包含”模板标签和标签的匹配模板）并应用一些样式，那么您应该能够使用这种方法来完成你的目标。**

# python - pdb 不能中断另一个线程？

> ID：12828956
> 
> 赞同：23
> 
> 时间：2012-10-10T21:48:45.790
> 
> 标签：python, multithreading, breakpoints, pdb

考虑这个多线程程序：

```
import threading

class SomeThread(threading.Thread):
  def run(self):
    a = 1
    print a

def main():
  print 'hola'
  someThread = SomeThread()
  someThread.start()

if __name__ == '__main__':
  main() 
```

当我用 pdb 调试这个程序时，在提示符处我首先在两个打印语句的每一个处设置一个断点。然后我继续。pdb 在`print 'hola'`. 我再次继续，在另一个线程中查看打印的效果，但 pdb 没有中断。

帮助命令没有列出任何切换线程上下文的内容，例如 gdb...所以...在一个线程上下文中设置断点是不可能的，该断点将在另一个上下文中跳闸？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T00:24:23.767

这对我有用：

```
import threading
import pdb

class SomeThread(threading.Thread):
  def run(self):
    a = 1
    print a
    pdb.set_trace()

def main():
  print 'hola'
  pdb.set_trace()
  someThread = SomeThread()
  someThread.start()

if __name__ == '__main__':
  main() 
```

这给了我：

```
C:\Code>python b.py
hola
> c:\code\b.py(13)main()
-> someThread = SomeThread()
(Pdb) l
  8         pdb.set_trace()
  9
 10     def main():
 11       print 'hola'
 12       pdb.set_trace()
 13  ->   someThread = SomeThread()
 14       someThread.start()
 15
 16     if __name__ == '__main__':
 17       main()
[EOF]
(Pdb) c
1
--Return--
> c:\code\b.py(8)run()->None
-> pdb.set_trace()
(Pdb) l
  3
  4     class SomeThread(threading.Thread):
  5       def run(self):
  6         a = 1
  7         print a
  8  ->     pdb.set_trace()
  9
 10     def main():
 11       print 'hola'
 12       pdb.set_trace()
 13       someThread = SomeThread()
(Pdb) 
```

这是在 Windows 7 和 Python 2.7.2 下。您使用的是什么操作系统和 Python 版本？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-11T01:20:29.397

在您到达第一个断点后，我假设您在到达此行时正在使用 (n) 下一行

```
someThread.start() 
```

确保您使用的是 (s) step-into 而不是 (n) next。 [pdb 命令](http://docs.python.org/library/pdb.html#debugger-commands)

# ruby - 即使两个字符串的编码完全相同，编码也不兼容

> ID：12828957
> 
> 赞同：0
> 
> 时间：2012-10-10T21:48:46.093
> 
> 标签：ruby

我正在尝试将文件中的内容附加到字符串中。

使用 iso-8859-1 编码打开文件并将字符串设置为相同的编码。

但是在尝试连接值时出现`incompatible character encodings: UTF-8 and ISO-8859-1 (Encoding::CompatibilityError)` 错误。

如果两个字符串的编码相同，为什么会发生这种情况？

实际上我那里没有 UTF-8 字符串。

```
sql = "
INSERT INTO pages
(meta_title, meta_description, meta_keywords, title, URL, content)
VALUES ('%s', '%s', '%s', '%s', '%s', '%s');
".force_encoding('iso-8859-1') # setting string to iso-8859-1

Dir['./*'].select { |e| File.file? e }.each do |e|
  f = File.open(e, "r:iso-8859-1") # opening the file using iso-8859-1
  # extracting meta, title etc
  puts sql % [*meta, title, url, content]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:55:16.370

尝试对提取的内容使用显式编码。

像这样：

```
puts sql % [*meta, title, url, content].map { |s| s.force_encoding('iso-8859-1') } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:59:45.710

处理文件时有两种编码：外部编码和内部编码。

外部编码处理磁盘上的实际数据：ruby 将使用该编码来解释从文件中检索到的字节，并将任何写入该编码的字节转换。

内部编码会影响您执行此操作时返回的内容`f.read`。如果内部编码不是 nil 并且与外部编码不同，ruby 将在您阅读文件时对其进行转码。默认情况下`Encoding.default_internal`使用，我假设这在您的系统上必须是 UTF-8，结果是 ruby​​ 将您的文件读取为 iso-8859-1，然后在将数据返回给您之前转码为 utf-8。

根据您正在操作的更大环境，您可以更改值`Encoding.default_internal`或明确设置您想要的内部编码：

```
File.open(e, "r:iso-8859-1:iso-8859-1") 
```

James Gray 有一篇关于这个的[博客文章](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)（实际上是关于 ruby​​ 字符串编码的整个系列）

# jquery - jquery UI嵌套选项卡动态创建？

> ID：12828963
> 
> 赞同：0
> 
> 时间：2012-10-10T21:49:14.687
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我试图在单击按钮时动态创建一个 jquery UI 嵌套选项卡，但我只能让主选项卡工作，但嵌套不能正确显示。（注意：我不想在之前定义嵌套的 div，而是动态创建这个 div）有人可以帮忙吗？

JSFiddle 链接：http: [//jsfiddle.net/ukalaspurkar/TqF9F/](http://jsfiddle.net/ukalaspurkar/TqF9F/)

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
</head>
<body style="font-size:62.5%;">

<div id="tabs">
    <ul>
    </ul>
</div>

    <input type='button' id='addTab' value='Add Main Tab & Nested Tab'>

</body>
</html>

$(function() {

    $("#addTab").click(function() {
        createNestedTabs();
    });

});

function createNestedTabs() {

    //Main Tab..Working fine..
    $("#tabs").append('<div id="mainTab">Main Tab Div</div> ');
    var tabs = $("#tabs").tabs();
    tabs.tabs('add', "#mainTab", "Main Tab");

    //Nested Tab for the above Main Tab..Not working
    $("#tabs").append('<div id="nestedTab1">Nested Tab Div</div> ');
    var nestedTabs = $("#nestedTab1").tabs();
    nestedTabs .tabs('add', "#nestedTab1", "Nested Tab 1");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:09:22.033

您缺少第二个 div 的一些 HTML 结构。即使您是动态创建它，您仍然需要一些与第一个相同的元素。尝试这样的事情：

```
function createNestedTabs() {
    $("#tabs").append('<div id="mainTab">Main Tab Div</div> ');
    var tabs = $("#tabs").tabs();
    tabs.tabs('add', "#mainTab", "Main Tab");

    $("#mainTab").append('<div id="nestedTab1"><ul></ul></div> ');
    $("#nestedTab1").append('<div id="nestedTabContent">Nested tab</div>');
    var nestedTabs = $("#nestedTab1").tabs();
    nestedTabs.tabs('add', "#nestedTabContent", "Nested Tab 1");
}​ 
```

我修改了你的[小提琴](http://jsfiddle.net/bhayden1/TqF9F/12/)来演示。

# bash - Bash 脚本退出而不抛出退出

> ID：12828967
> 
> 赞同：1
> 
> 时间：2012-10-10T21:49:36.493
> 
> 标签：bash

嘿伙计们，当脚本中抛出退出时，我遇到了终止终端（ssh）的问题，我希望能找到解决方法，这是一个例子

```
# ssh name@host
$ program

    # program contents

    #!/bin/bash
    program()
    {
        exit 0
    }

exit
Connection to host closed.
# gfd =( 
```

这让我回到我的本地终端，有没有办法在不丢失会话的情况下退出/退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:51:03.453

回答了我自己的问题，`return`是我正在寻找的

# python - 列表中的 Python [ ] 符号

> ID：12828968
> 
> 赞同：-4
> 
> 时间：2012-10-10T21:49:39.260
> 
> 标签：python, list

有一个列表如下：`list = []`。

然后假设`x = 'A'`，是什么`list = list + [x]`意思？是不是只针对人物？如果是这样，它如何适应整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:51:35.420

首先，使用不同的名称而不是`list`.

那么，就试试吧。你有一个 Python shell，对吧？

```
>>> l = []
>>> l = l + "a"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only concatenate list (not "str") to list
>>> l = l + ["a"]
>>> l
['a']
>>> l = l + [1]
>>> l
['a', 1]
>>> l = l + 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only concatenate list (not "int") to list
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:51:49.630

它是列表与任何数据的连接：

```
>>> [1, "a", True] + ["hello", 2.3]
[1, "a", True, "hello", 2.3] 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-10T21:52:22.750

`lis=lis+[x]`表示添加`'a'`到`[]`然后将新列表存储`['a']`在`lis`LHS中

但是这样做每次都会创建新对象：

```
In [38]: x='a'

In [39]: lis=[]

In [40]: id(lis)
Out[40]: 154680492

In [41]: lis=lis+[x]

In [42]: lis
Out[42]: ['a']

In [43]: id(lis)
Out[43]: 154749100 
```

更好地使用`lis+=[x]`或`lis.extend(x)`

# ios - 在 RubyMotion 中以 Time 对象的形式获取当前月末

> ID：12828977
> 
> 赞同：1
> 
> 时间：2012-10-10T21:51:03.947
> 
> 标签：ios, rubymotion

我需要在 ruby​​motion 中将当前日历月的结束日期作为 Time 对象。

因此，对于 2012 年 10 月，考虑到当前时间，我需要 2012 年 10 月 31 日午夜作为 的实例`Time`，而不管当天如何。

我该怎么做呢？

**编辑**

我很欣赏这些答案，但我没有提及的一件事——抱歉——是我正在使用 RubyMotion 并且 Date 和 DateTime 对象不可用。

基本上，您`require`在 ruby​​ 中加载的任何内容，我都无权访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:36:32.603

由于您使用的是 RubyMotion，因此您可以访问所有 iOS SDK：

```
NSDate *curDate = [NSDate date];
    NSCalendar* calendar = [NSCalendar currentCalendar];
    NSDateComponents* comps = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:curDate]; // Get necessary date components

    comps = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:curDate]; // Get necessary date components
    // set last of month
    [comps setMonth:[comps month]+1];
    [comps setDay:0];
    NSDate *tDateMonth = [calendar dateFromComponents:comps];
    NSLog(@"%@", tDateMonth); 
```

发现于[获取一个月的最后一天](https://stackoverflow.com/questions/2772348/nsdate-getting-the-last-day-of-a-month)

翻译成 RubyMotion：

```
 curDate = NSDate.date
    calendar = NSCalendar.currentCalendar

    # Get necessary date components
    comps = calendar.components(NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit, fromDate:curDate)

    # set last of month
    comps.month += 1
    comps.day = 0
    tDateMonth = calendar.dateFromComponents(comps)
    NSLog("%@", tDateMonth) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:16:09.673

我认为这应该可以解决问题..

```
require 'date'
(DateTime.now.next_month - DateTime.now.day).to_time 
```

例子：

```
ruby-1.9.3-p194 :001 > require 'date'
 => true 

ruby-1.9.3-p194 :02 > DateTime.now
 => #<DateTime: 2012-10-10T17:18:15-05:00 ((2456211j,80295s,284081000n),-18000s,2299161j)> 

ruby-1.9.3-p194 :03 > DateTime.now.next_month - DateTime.now.day
 => #<DateTime: 2012-10-31T17:18:16-05:00 ((2456232j,80296s,819683000n),-18000s,2299161j)> 

ruby-1.9.3-p194 :04 > (DateTime.now.next_month - DateTime.now.day).to_time
 => 2012-10-31 17:18:18 -0500 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:09:17.710

**Ruby on Rails**方法

```
Time.now.at_end_of_month 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T22:18:30.813

您可以增加“开始”日期时间，直到它滚动到下个月：

```
require 'date'

def last_day_of_month(date=DateTime.now)
  month = date.month
  date += 1 while month == (date + 1).month
  date.to_time
end

last_day_of_month # => 2012-10-31 16:17:21 -0600
nov_1_2010 = DateTime.parse('2010-11-01T01:01:01-0700')
last_day_of_month(nov_1_2010) # => 2010-11-30 01:01:01 -0700 
```

# android - WebView 和 javascript

> ID：12828990
> 
> 赞同：0
> 
> 时间：2012-10-10T21:52:08.070
> 
> 标签：android

此链接： http: [//lexandera.com/category/webview_examples/](http://lexandera.com/category/webview_examples/) 表示您可以将 javascript 注入到由 WebView 呈现的网页中，如下所示：

```
webview.setWebViewClient(new WebViewClient() {  
  @Override  
  public void onPageFinished(WebView view, String url)  
  {  
    webview.loadUrl("javascript:(function() { " +  
            "document.getElementsByTagName('body')[0].style.color = 'red'; " +  
            "})()");  
  }  
}); 
```

我想更进一步，注入一个在按键时执行的函数。

我在用着：

```
 webView.setWebViewClient(new WebViewClient(){   

        @Override  
        public void onPageFinished(WebView view, String url)  
        {  

            webView.loadUrl("javascript:function keyHandler(e) { " +  
               "document.getElementsByTagName('body')[0].style.color = 'red'; " +  
                       "}");                

        }           
    }); 
```

并且该页面已经编写并包含 document.onkeypress = keyHandler AFAIK 应该将我的 keyHandler 函数与页面上发生的任何关键事件挂钩。

问题是，它不起作用。我希望它在按下一个键时将文本更改为红色。相反，在我按下任何键之前，页面被渲染并且文本变为红色。

我是否误解了这一切如何协同工作？

就这样，我没有试图破解某些东西，这一切的重点是为我的雇主创建的要在 Android WebView 中呈现的网页提供自定义 javascript 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:10:23.077

与`loadUrl()`您一起执行 javascript 而不是将其添加到文档中。你必须在你正在执行的脚本中做的是

```
webView.setWebViewClient(new WebViewClient(){   

    @Override  
    public void onPageFinished(WebView view, String url)  
    {  

        webview.loadUrl("javascript:function() { " +  
           "var script = document.createElement('script'); " +
           "script.innerHTML = 'function keyHandler(e) { document.getElementsByTagName('body')[0].style.color = 'red'; }'" +
           "document.getElementsByTagName('head')[0].appendChild(script); " +
        "}");                

    }           
}); 
```

# scheme - 在球拍中实现应用全部功能

> ID：12828994
> 
> 赞同：2
> 
> 时间：2012-10-10T21:52:30.027
> 
> 标签：scheme, racket

我正在尝试编写一个`apply-all`传递函数列表和数字的函数，并在应用于该数字时生成函数值列表

例如，

```
(apply-all (list sqrt square cube) 4) => (2 16 64)) 
```

假设所有函数都已预先定义

我知道如何分别编写每个函数以及它是如何工作的，但我对如何去做这个和处理传递的函数有点困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:15:49.557

您需要遍历函数列表，然后依次将每个函数应用于 number 参数。最简单的方法是使用以下`map`过程：

```
(define (apply-all flist num)
  (map (lambda (f) (f num))
       flist))

(apply-all (list sqrt square cube) 4)
=> '(2 16 64) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:26:08.380

这是我喜欢的一种方法，使用`for/list`：

```
(define (apply-all fs n)
  (for/list ([f fs])
     (f n))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T18:04:56.863

```
(define (apply-all fs n)
  (cond
    ((null? fs) fs)
     (else (cons ((car fs) n) (apply-all ??? ???))))) 
```

如果这是一个作业，可能是你应该写的。

# iphone - 由于未捕获的异常“NSUnknownKeyException”而终止应用程序 - 找不到解决方案

> ID：12828998
> 
> 赞同：-3
> 
> 时间：2012-10-10T21:52:44.467
> 
> 标签：iphone, xcode

我已经根据教程构建了一个应用程序。使用模态segue，页面相互之间没有问题。但是，我添加了主要内容（从 plist 调用值），当我运行主测验页面时，我收到此错误：

```
> *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: >'[<QuizViewController 0x719e9b0> setValue:forUndefinedKey:]: this class is not key value >coding-compliant for the key lblQuestionA.'
>*** First throw call stack:
>(0x1c90012 0x10cde7e 0x1d18fb1 0xb7a711 0xafbec8 0xafb9b7 0xb26428 0x2320cc 0x10e1663
>0x1c8b45a 0x230bcf 0xf5e37 0xf6418 0xf6648 0xf6882 0x102235 0x3013d2 0xff4f3 0xff777 0xff7b7 
>0x46afe2 0x45cad9 0x45cb54 0x10e1705 0x18920 0x188b8 0xd9671 0xd9bcf 0xd8d38 0x4833f 0x48552 
>0x263aa 0x17cf8 0x1bebdf9 0x1bebad0 0x1c05bf5 0x1c05962 0x1c36bb6 0x1c35f44 0x1c35e1b >0x1bea7e3 0x1bea668 0x1565c 0x20dd 0x2005)
>libc++abi.dylib: terminate called throwing an exception
>(lldb) 
```

任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:15:17.887

我猜您已经在源代码中更改了 IBOutlet 变量/属性的名称，但是在相应的界面构建器文件中，您仍然尝试将其附加到旧名称。如果您有此 View Controller 的界面构建器文件，请检查其界面构建器文件以获取指向出口 lblQuestionA 的链接，然后删除该链接并将其重新连接到正确的 IBOutlet。您也可能有一个连接到两个 IBOutlets、lblQuestionA 和正确的一个的视图元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T22:07:56.877

您正在尝试将值设置为`lblQuestionA`，但您`QuizViewController`没有为其实现设置器。

也许您在错误的对象上设置了值，或者您只是缺少 setter 方法 - 没有任何代码（实际上是问题），这很难回答。