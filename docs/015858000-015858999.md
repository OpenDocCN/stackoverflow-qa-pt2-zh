# StackOverflow 问答 15858000-15858999

# ms-access - 如何使用 Access 的 OpenRecordset 使用其数字键字段获取记录？

> ID：15858000
> 
> 赞同：0
> 
> 时间：2013-04-07T01:44:09.990
> 
> 标签：ms-access, database-design, vba

我在 Access 2010 VBA 中尝试从表中读取记录以将其写入文本框时遇到问题。

我的表是“产品”，其 ProductID 字段是数字。我以前使用过这种方法，但它只适用于**文本字段**，不适用于**数字**字段（ProductID 是自动编号）。

```
Private Sub GetProduct(ID As TextBox, Name As TextBox, Price As TextBox)
    If ID <> "" Then
        Set db = CurrentDb
        Set rs = db.OpenRecordset("Productos", dbOpenDynaset)

        'PROBLEM IS HERE
        rs.FindFirst "ProductID=" & "'" & ID & "'"

        If rs.NoMatch Then
            MsgBox "The producto doesn't exist."
            Price = ""
            Name = ""
        Else
            Name = rs!ProductName
            Price = rs!Price
        End If

        rs.Close
        Set rs = Nothing
        Set db = Nothing
    End If
End Sub 
```

请帮我。这是针对最终项目的，我不知道其他方法，但是这种方法。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:43:59.930

很高兴看到你想通了。问题是 ProductID 是数字，您的代码专门测试文本字段

```
 rs.FindFirst "ProductID=" & "'" & ID & "'" 
```

在参数的每一侧放置一个单引号会使 Access 将参数解析为字符串。

如果 ID 为 123，则显示为

```
 rs.FindFirst "ProductID='123'" 
```

你得到一个类型错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:16:54.793

我找到了一个简单的解决方案！

```
 rs.FindFirst "ProductoID=" & ID 
```

# jquery - 销毁 jQuery Flot 图表

> ID：15858001
> 
> 赞同：8
> 
> 时间：2013-04-07T01:44:11.380
> 
> 标签：jquery, flot

以清除所有事件处理程序而不导致内存泄漏的方式销毁 jQuery 浮点图的正确方法是什么？

似乎 flot 留下了一些僵尸（又名分离的 Dom 树）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:45:09.893

如果您阅读 API 文档，有一个关闭方法可以为您清理

```
shutdown()

Cleans up any event handlers Flot has currently registered. This
is used internally. 
```

例如。

```
var plot = $.plot($("#yourDiv"), options)

plot.shutdown() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-28T19:43:02.663

对于以后来这里的人来说，现在有一个`destroy`调用shutdown并移除canvas元素的函数。由于某种原因，它在 API 中没有记录，但在代码中可用：

```
var flot = $("#FlotDiv").data('plot')
if (flot) // If it's destroyed, then data('plot') will be undefined
    flot.destroy(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T01:58:16.560

如果要删除事件处理程序，请尝试`jquery off`方法。

用于清除浮动图。你可以清空div。

```
$('#yourFlotDiv').empty(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T12:35:50.727

删除浮动图

```
var placeholder = $("#FlotDiv");
placeholder.unbind(); //Remove a previously-attached event handler from the elements.
placeholder.empty(); 
```

此外，如果您希望取消绑定特定事件，这是要走的路：

```
$( "#foo").unbind( "click" ); 
```

有关更多信息，请查看[此](http://api.jquery.com/unbind/)内容。

# c# - 在图像上绘制边框

> ID：15858002
> 
> 赞同：3
> 
> 时间：2013-04-07T01:44:22.303
> 
> 标签：c#, drawing

我目前正在尝试制作一个蒙版生成器来为图像生成多边形。这是我的代码。

```
Bitmap bmp = new Bitmap(file);
int w = bmp.Width;
int h = bmp.Height;
List<Point> vertices = new List<Point>();

for (int y=0; y<h; y++)
{
    bool rowbegin = false;
    for (int x=0; x<w; x++)
    {
        Color c = bmp.GetPixel(x, y);
        if (!rowbegin)
        {
            // Check for a non alpha color
            if (c.A != Color.Transparent.A)
            {
                rowbegin = true;
                // This is the first point in the row
                vertices.Add(new Point(x, y));
            }
        } else {
            // Check for an alpha color
            if (c.A == Color.Transparent.A)
            {
                // The previous pixel is the last point in the row
                vertices.Add(new Point(x-1, y));
                rowbegin = false;
            }
        }
    }
}

// Convert to an array of points
Point[] polygon = vertices.ToArray();

Graphics g = Graphics.FromImage(bmp);

g.DrawPolygon(Pens.LawnGreen, polygon);
g.Dispose(); 
```

但我得到错误的输出。

![在此处输入图像描述](https://i.stack.imgur.com/h7v25.png)

所需的。

![在此处输入图像描述](https://i.stack.imgur.com/4JU4y.png)

我想要的也是字符之间的空白是空的。另外为什么 DrawPolygon 正在填充它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:41:24.240

您是否尝试过这样的事情：我希望我的代码对您有所帮助：

![在此处输入图像描述](https://i.stack.imgur.com/pAVKd.png)

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Bitmap bmp = new Bitmap(@"C:\Users\Ali\Desktop\1.png");
            int w = bmp.Width;
            int h = bmp.Height;
            Lst_Data lastpointcolor = new Lst_Data() ;
            for (int y = 0; y < h; y++)
            {
                for (int x = 0; x < w; x++)
                {
                    Color c = bmp.GetPixel(x, y);
                    if (c.A != Color.Transparent.A)
                    {
                        if (lastpointcolor.color.A == Color.Transparent.A)
                        {
                            bmp.SetPixel(lastpointcolor.point.X, lastpointcolor.point.Y, Color.Red);
                        }
                    }
                    lastpointcolor = new Lst_Data() { point = new Point(x, y), color = bmp.GetPixel(x, y) };
                }
            }

            for (int y = h-1; y > 0; y--)
            {
                for (int x = w-1; x > 0; x--)
                {
                    Color c = bmp.GetPixel(x, y);
                    if (c.A != Color.Transparent.A)
                    {
                        if (lastpointcolor.color.A == Color.Transparent.A)
                        {
                            bmp.SetPixel(lastpointcolor.point.X, lastpointcolor.point.Y, Color.Red);
                        }
                    }
                    lastpointcolor = new Lst_Data() { point = new Point(x, y), color = bmp.GetPixel(x, y) };
                }
            }
            pictureBox1.Image = bmp;
        }
    }
    public struct Lst_Data
    {
        public Point point;
        public Color color;
    }
} 
```

**编辑：**

还有我给你的另一个想法：D

为具有相同大小的原始图像制作蒙版并执行以下操作：

```
 Bitmap orginal = new Bitmap(@"C:\Users\Ali\Desktop\orginal.png");
    Bitmap mask = new Bitmap(@"C:\Users\Ali\Desktop\mask.png");
    for (int i = 0; i < orginal.Width; i++)
    {
        for (int j = 0; j < orginal.Height; j++)
        {
            if (orginal.GetPixel(i, j).A == Color.Transparent.A)
            {
                mask.SetPixel(i, j, Color.Transparent);
            }
        } 
    }
    Bitmap bitmap = new Bitmap(mask, mask.Height, mask.Height);
    using (Graphics g = Graphics.FromImage(bitmap))
    {
        g.DrawImage(mask, 0, 0);
        g.DrawImage(orginal,0,0);
    }
    pictureBox1.Image = bitmap; 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/JORdT.png)

![在此处输入图像描述](https://i.stack.imgur.com/lQ6b9.png)

# python - 改进文档分类方法

> ID：15858003
> 
> 赞同：0
> 
> 时间：2013-04-07T01:44:25.850
> 
> 标签：python, machine-learning, regression, libsvm, document-classification

我有一个程序来预测新闻文章是否与某个主题有关。

有两个主要脚本：

1) bow_train.py - 生成一个词表和一个模型并将它们存储在两个文件中（arab.model 和 wordList.pkl）

2) bow_predict.py - 使用词表和模型对未知文章进行分类

使用的方法是逻辑回归而不是支持向量机，因为这种分类的逻辑回归的性能应该要好得多。

我想改进结果。是否有另一种方法可以让您强调某些关键字。例如，对于“阿拉伯之春”主题，我会输入一个关键字列表：[“抗议”、“动荡”、“革命”等]，带有这些关键字的文件比没有这些关键字的文件有更高的概率。

**bow_predict.py**

```
import re
import os
import sys
import pickle
import operator

from collections import Counter

from liblinearutil import *

from bow_util import *

# path to directory with articles that should be classified
rootdirAll = 'C:\\Users\\Jiyda\\Desktop\\bow_arab\\all\\'

# load the wordList and model from the training phase
wordListIn = open('wordList.pkl', 'rb')

m        = load_model('arab.model')
wordList = pickle.load(wordListIn)

counterByFilepathAll = {}

# count and store term frequencies
for folder, subs, files in os.walk(rootdirAll):
    for filename in files:
        filepath       = os.path.join(folder, filename)
        wordsInArticle = get_words_from_file(filepath)
        counterByFilepathAll[filepath] = count_words(wordsInArticle)

denseData = []

# generate features from term frequencies (bag-of-words)
for _, counter in counterByFilepathAll.iteritems():
    denseData.append(gen_features(counter, wordList))

# assume output class is 1 (liblinear/libsvm always require a output class
# even for unknown data)
classList = [1 for _ in xrange(0, len(counterByFilepathAll))]

# predict using the model from training phase
y, x                  = classList, denseData
p_label, p_acc, p_val = predict(y, x, m)

# store probabilites by filepath
probByFilepath = {}
i = 0
for filepath, _ in counterByFilepathAll.iteritems():
    probByFilepath[filepath] = p_val[i]
    i += 1

# sort by probability
sortedByProb = sorted(probByFilepath.iteritems(),
                      key=operator.itemgetter(1),
                      reverse=True)

# write to output file         
probsOut = open('probsOut.txt', 'wb')
for t in sortedByProb:
    probsOut.write(' '.join(str(s) for s in t) + '\n')

probsOut.close() 
```

**bow_train.py**

```
import re
import os
import sys
import copy
import pickle

from collections import defaultdict
from collections import Counter

from liblinearutil import *

from bow_util import *

# Initialize directories for articles

rootdirArab = sys.argv[1]
rootdirNoArab = sys.argv[2]

#rootdirArab   = 'C:\\Users\\Jiyda\\Desktop\\bow_arab\\arab\\'
#rootdirNoArab = 'C:\\Users\\Jiyda\\Desktop\\bow_arab\\no_arab\\'

wordSet                 = set()
counterByFilepathArab   = {}
counterByFilepathNoArab = {}

# generate set of all words in all articles
for rootdir in [rootdirArab, rootdirNoArab]:
    for folder, subs, files in os.walk(rootdir):
        for filename in files:
            filepath       = os.path.join(folder, filename)
            wordsInArticle = get_words_from_file(filepath)
            wordSet        = wordSet.union(wordSet, wordsInArticle)

# store sorted set in list
wordList = sorted(wordSet)

# save sorted list to output file for prediction phase
wordListOut = open('wordList.pkl', 'wb')
pickle.dump(wordList, wordListOut)

# count and store term frequencies for all arab spring training articles
for folder, subs, files in os.walk(rootdirArab):
    for filename in files:
        filepath       = os.path.join(folder, filename)
        wordsInArticle = get_words_from_file(filepath)
        counterByFilepathArab[filepath] = count_words(wordsInArticle)

# count and store term frequencies for all non arab spring training articles
for folder, subs, files in os.walk(rootdirNoArab):
    for filename in files:
        filepath       = os.path.join(folder, filename)
        wordsInArticle = get_words_from_file(filepath)
        counterByFilepathNoArab[filepath] = count_words(wordsInArticle)

# generate features. the features for one article are a list of the frequenices 
# of each term in wordList found in the article
denseData = []

for counter in counterByFilepathArab.values():
    denseData.append(gen_features(counter, wordList))

for counter in counterByFilepathNoArab.values():
    denseData.append(gen_features(counter, wordList))

# set output value to 1 for arab spring articles and -1 for non arab spring articles
classList = [1 for _ in xrange(0, len(counterByFilepathArab))] + \
            [-1 for _ in xrange(0, len(counterByFilepathNoArab))]

# train logistic regression model
y, x  = classList, denseData
prob  = problem(y, x)
# uncomment to obtain cross validation results
#param = parameter('-v 5')
m     = train(prob)#, param)

# store model in output file for prediction phase
save_model('arab.model', m)

# uncomment to check if training worked as expected
#p_label, p_acc, p_val = predict(y, x, m)
#ACC, MSE, SCC         = evaluations(y, p_label)

wordListOut.close() 
```

# android - 关于 Buttons 和 MediaPlayer 的编码建议（避免编舞跳帧）

> ID：15858004
> 
> 赞同：1
> 
> 时间：2013-04-07T01:44:27.790
> 
> 标签：android

我一直在为我的婴儿儿子的声音制作一个音板应用程序。该应用程序只是打开到 MainActivity 类，它显示一个可滚动的按钮列表，当按下这些按钮时，将播放我儿子尖叫的预先录制的 MP3。

一旦它在我的 Nexus 7 上调试或运行，就会出现 Choreographer 错误，并且会跳过 50 到 90 帧之间的某处。警告是“应用程序可能在其主线程上做了太多工作”。在我的设备上，三个随机按钮拒绝播放声音，直到应用程序关闭并重新打开，但另外三个随机按钮拒绝工作。当我的应用在一个简单的 LinearLayout（没有 ScrollView）中只有八个按钮时，不会出现这个问题。

我是 Java 和 Android 编程的初学者，但据我猜测，我可笑的糟糕代码占用了太多内存而无法正常运行。我的问题是，您将如何编写一个包含 33 个播放自己声音的按钮的可滚动列表，或者有人可以教我如何改进我的代码吗？

MainActivity.java（仅显示此问题的前三个按钮/声音）：

```
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

final MediaPlayer ahh = MediaPlayer.create(this, R.raw.ahh);
final MediaPlayer dededeh = MediaPlayer.create(this, R.raw.dededeh);
final MediaPlayer neganegabunbunbug = MediaPlayer.create(this, R.raw.naganagbunbun);

Button bahh = (Button) this.findViewById(R.id.Ahhhbutton);
bahh.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        ahh.start();
    }
});
}
} 
```

还有activity_main.xml（同样只有这个问题的前三个按钮）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tab1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/Ahhhbutton"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:background="@layout/button_shape"
            android:text="@string/button1a"
            android:textColor="#d1d1d1"
            android:textSize="20sp" />

        <Button
            android:id="@+id/dededehbutton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:background="@layout/button_shape"
            android:text="@string/button1b"
            android:textColor="#d1d1d1"
            android:textSize="20sp" />

        <Button
            android:id="@+id/neganegabunbunbugbutton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:background="@layout/button_shape"
            android:text="@string/button1c"
            android:textColor="#d1d1d1"
            android:textSize="20sp" />

Button bdededeh = (Button) this.findViewById(R.id.dededehbutton);
bdededeh.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        dededeh.start();
    }
});

Button bnaganagbunbun = (Button) this.findViewById(R.id.naganagabunbutton);
bnaganagbunbun.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        neganegabunbunbug.start();
    }
});

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:14:11.930

这不是布局。正如你的错误所说，你不应该在主线程上做任何长期的工作。

主线程（或 Android 上的 UI 线程）处理与用户的交互。为了使 UI 不会冻结并且感觉很快，您应该在 UI 线程之外执行长期操作。

此外，问题不是实际播放，而是您加载所有媒体文件：

```
MediaPlayer.create(this, R.raw.ahh); 
```

正如[`create()`-method](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20android.net.Uri%29)的文档所建议的那样：

> [...] 完成 MediaPlayer 后，您应该调用 release() 来释放资源。如果不释放，**过多的 MediaPlayer 实例将导致异常。**

对于“关闭 UI 线程”，您有三个选项：

*   直接可以创建一个[`Runnable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)-实现类来播放你的声音并将其提交给一个[`ScheduledThreadPoolExecuter`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)（最大控制，更多代码）。
*   使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)（Android 独有）播放歌曲（相当简单）。
*   如果您希望即使应用程序当前不在前台也能继续播放声音，请使用[`Service`](http://developer.android.com/reference/android/app/Service.html)（大多数工作）

所以，你应该做的是：

1.  存储原始文件引用的列表（`R.raw.ahh`），**不要**直接加载它们。
2.  When a song is selected for playback, call `create()`on that songs ID and start playback off the UI-Thread.
3.  完成后，调用`release()`释放资源。

# javascript - 在 bitbucket 中创建一个私人 git 存储库？

> ID：15858007
> 
> 赞同：0
> 
> 时间：2013-04-07T01:45:03.690
> 
> 标签：javascript, git, bitbucket

首先我在 bitbucket 中创建一个帐户，然后我在 puttykeygen 中创建一个 shh 私钥，我保存私钥“bitbucket.ppk”，然后我从公钥中复制文本并将我的帐户粘贴到 bitbucket 中的 SSH KEY 部分. 在此之前，我在 bitbucket 中创建了一个名为 ATOMICO 的 repo。

这是我的问题

为什么我可以在没有私钥的情况下克隆 repo？

我怎么能限制那个功能？？？，因为每个人都可以克隆我的仓库并在没有私钥的情况下推送更改...我尝试在其他计算机上克隆我的仓库，我可以推送更改

回购是 git clone [https://andrescabana86@bitbucket.org/andrescabana86/atomico.git](https://andrescabana86@bitbucket.org/andrescabana86/atomico.git)

如果可以的话，尝试推动更改告诉我

编辑 2

我按照这些路线推动

```
$ git commit -m "cambios from me"
[master 36b6908] cambios from me
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 cambios de mi.txt
wirelan@WIRELAN-HM /E/UPW/webs/atomico (master)
$ git push -u origin --all
Counting objects: 3, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 246 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
remote: bb/acl: andrescabana86 is allowed. accepted payload.
To https://andrescabana86@bitbucket.org/andrescabana86/atomico.git
   eae426a..36b6908  master -> master
Branch master set up to track remote branch master from origin. 
```

全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:10:23.393

```
$  git clone https://andrescabana86@bitbucket.org/andrescabana86/atomico.git
=> Password for 'https://andrescabana86@bitbucket.org': 
```

您的存储库对我来说似乎很私密。*由于*您设置了公钥/私钥对，您可以将其克隆到本地计算机。

# google-analytics - 单独和汇总跟踪一组网站

> ID：15858010
> 
> 赞同：0
> 
> 时间：2013-04-07T01:45:27.700
> 
> 标签：google-analytics

假设我拥有并控制了几个带有域和子域的与水果相关的站点，我想单独以及集体跟踪它们以获得总访问者值。使用新的异步方法构建分析脚本设置的正确方法是什么？

假设我有这些域：

```
apple.com
one.pear.com
one.peach.com
cherry.com
other.cherry.com
www.watermelon.com 
```

我想知道我是否做得对，以及在第一次推送时在域部分中放入什么：

我目前拥有的：

XXXXX - 总跟踪代码 YYYYY - 单独跟踪代码

```
<script>
  _gaq.push(
    ['_setAccount', 'XXXXX'],
    ['_setDomainName', 'whatdoiputhere?'],
    ['_trackPageview']);

  _gaq.push(
    ['b._setAccount', 'YYYYY'],
    ['b._setDomainName', '[current_domain(just domain)]'],
    ['b._trackPageview']
  );

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:31:19.627

您必须对两个跟踪器使用完全相同的 _setDomainName。这必须是代码当前所在的域，您应该只使用域而不是子域。因此，例如对于 cherry.com 和 other.cherry.com，您应该使用相同的跟踪代码：

```
<script>
  _gaq.push(
    ['_setAccount', 'XXXXX'],
    ['_setDomainName', 'cherry.com'],
    ['_trackPageview']);

  _gaq.push(
    ['b._setAccount', 'YYYYY'],
    ['b._setDomainName', 'cherry.com'],
    ['b._trackPageview']
  );

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

此外，如果您想在其中一个跟踪器中进行任何其他自定义，那么您必须在所有跟踪器中进行完全相同的配置。

每个跟踪器将创建一组 cookie，并且通过使用相同的 _setDomainName，它们将共享同一组 cookie。这更好，因为您减少了 cookie 的数量，但也很棘手，因为两个跟踪器必须兼容才能共享相同的 cookie，因此您应该在两个 cookie 中使用相同的配置。

如果您采取不同的做法，您可能会以跟踪器共享 cookie 但他们不同意设置并可能相互重置 cookie 导致跟踪器完全损坏的情况结束。因为它非常不稳定，谷歌表示它不支持拥有多个跟踪器的用例，但如果你遵循上述规则，这当然是可能的。

如果您为 _setDomainName 使用不同的配置，那么您最终可能会遇到每个跟踪器使用不同的 cookie 集的情况，这很好，因为它们不能再发生冲突，但在某些情况下它们可能会共享 cookie，因此它并不完全安全假设 2 个孤立的集合。

希望能帮助到你

**更新**

_setDomainName 在分析中用于确定它将为 Google Analytics 保存 cookie 的位置。因此它必须与当前域匹配。如果您在 domainX.com 并尝试将域设置为 domainY.com，则无法存储这些 cookie。在这种情况下，事情可能会停止工作，或者 GA 可能会忽略您的设置并使用默认设置。

如果您有不同的域，则需要将 cookie 从一个域传递到另一个域，以使 GA 了解这是同一次访问。谷歌分析有一些帮助来解决这个问题，并且在开发者文档中有很好的记录。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

# carousel - 带有 AnySlider 的垂直旋转木马

> ID：15858012
> 
> 赞同：0
> 
> 时间：2013-04-07T01:45:53.517
> 
> 标签：carousel, anythingslider

我试图用 AnySlider 设置一个垂直轮播。但是，我需要为 UL 设置一个固定宽度，而脚本不允许这样做。那可能吗？

![旋转木马](https://i.stack.imgur.com/O4Pjh.jpg)

```
Here is my code: http://jsfiddle.net/ycUB6/5230/ 
```

但是列表中留有空格；/

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:40:20.840

目前，AnythingSlider 未设置为允许多个垂直幻灯片。因此，您会在最后一张幻灯片下方看到一些空白区域，直到它到达顶部。

要修复您的演示，请更改这部分 CSS（[更新的演示](http://jsfiddle.net/Mottie/ycUB6/5243/)）：

```
ul#slider img  {
    width: 300px;
    height: 100px;
    list-style: none;
} 
```

# javascript - JavaScript noob 因 if 语句而丢失

> ID：15858024
> 
> 赞同：0
> 
> 时间：2013-04-07T01:47:08.283
> 
> 标签：javascript

这是 myFunctions 代码，但它不起作用。实际上它的初学者代码是因为我自学了我能做的事情。所有变量都在函数之前声明

原始编码已编辑。

它一直持续到我所拥有的表格中的所有管道尺寸和重量都被填满。它仅在我有 1 个 if 语句时才有效。猜猜我问的是它有什么问题。有没有更简单的方法来做到这一点。我有更多用于不同事物的表格，例如井筒套管。

这行不通

```
<head>
    <title>Well Service Prevention</title>
    <script>
        var tubingSize;
        var tubingWeight;
        var tubingDisplacement;
        var tubingCapacity;
        function tubingTables(frm){
            if (frm.tubingSize.value == 50.8){
                tubingSize = 50.8
                tubingWeight = 5.06
                tubingDisplacement = 0.00065
                tubingCapacity = 0.001413
                alert("Tubing ID: " + tubingSize)
            }
            if (frm.tubingSize.value == 52.4){
                tubingSize = 52.4
                tubingWeight = 4.84
                tubingDisplacement = 0.000622
                tubingCapacity = 0.001554
                alert("Tubing ID: " + tubingSize)
            }
            if (frm.tubingSize.value == 60.3 && frm.tubingWeight.value == 5.95){
                tubingSize = 60.3
                tubingWeight = 5.95
                tubingDisplacement = 0.000765
                tubingCapacity = 0.00211
                alert("Tubing ID: " + tubingSize "Tubing Weight:" + tubingWeight)
            }
        }
    </script>

</head>
<body>
    <form name=known>
        <h3>
            Enter Known
        </h3>
        <p>Tubing ID: <input type="number" name="tubingSize">
        <p>Tubing Weight: <input type="number" name="tubingWeight">
        <p>Tubing Displacement: <input type="number" name="tubingDisplacement">
        <p>Tubing Capacity: <input type="number" name="tubingCapacity">
        <input type="button" value="Debug" onclick="tubingTables(this.form)">
    </form>
</body> 
```

删除最后一个 if 语句它有效。

```
<head>
    <title>Well Service Prevention</title>
    <script>
        var tubingSize;
        var tubingWeight;
        var tubingDisplacement;
        var tubingCapacity;
        function tubingTables(frm){
            if (frm.tubingSize.value == 50.8){
                tubingSize = 50.8
                tubingWeight = 5.06
                tubingDisplacement = 0.00065
                tubingCapacity = 0.001413
                alert("Tubing ID: " + tubingSize)
            }
            if (frm.tubingSize.value == 52.4){
                tubingSize = 52.4
                tubingWeight = 4.84
                tubingDisplacement = 0.000622
                tubingCapacity = 0.001554
                alert("Tubing ID: " + tubingSize)
            }
        }
    </script>

</head>
<body>
    <form name=known>
        <h3>
            Enter Known
        </h3>
        <p>Tubing ID: <input type="number" name="tubingSize">
        <p>Tubing Weight: <input type="number" name="tubingWeight">
        <p>Tubing Displacement: <input type="number" name="tubingDisplacement">
        <p>Tubing Capacity: <input type="number" name="tubingCapacity">
        <input type="button" value="Debug" onclick="tubingTables(this.form)">
    </form>
</body> 
```

现在也在努力在 Firefox 中获取调试器。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:53:11.003

你犯了一些错误。这里看看

```
// frm seems to be a Javascript Object
// tubingSize is a property of frm and seems to be an object too since you are accessing value property of it.
if (frm.tubingSize.value == 52.4){
      tubingSize = 52.4
      tubingWeight = 4.84
      tubingDisplacement = 0.000622
      tubingCapacity = 0.001554
      alert("Tubing ID: " + tubingSize) //debug
}

// Since frm.tubingSize is an object. Either you should do .value here or correct your code in above if.
if (frm.tubingSize == 60.3 && frm.tubingWeight == 5.95){
      tubingSize = 60.3
      tubingWeight = 5.95
      tubingDisplacement = 0.000765
      tubingCapacity = 0.00211
      alert("Tubing ID: " + tubingSize "Tubing Weight:" + tubingWeight)
} 
```

这就是为什么您唯一的一个 IF 正在工作的原因。您也应该在其他 IF 中使用 frm.tubingSize.value。

# c++ - 存储用于事件监听器注册的指针

> ID：15858026
> 
> 赞同：1
> 
> 时间：2013-04-07T01:47:40.410
> 
> 标签：c++, design-patterns

我有一个正在编写的 c++ (c++11) 库（一个 OpenGL 图形引擎）。

我的问题围绕着注册事件侦听器的良好编程技术。

我有这样的班级关系：

`Program`--has--> `SceneManager`--has--> `ShaderManager`--has-->*`Shader`

该类`Shader`允许其他对象将自己注册为`ShaderBindListener`，这意味着只要着色器`bind()`调用它的方法，它就会通知任何侦听器。

`ShaderManager`类是外部库可以访问的类，它们可以从中创建新对象`Shader`。

现在，我希望每个`Shader`对象都将`Program`对象作为 a `ShaderBindListener`，以便在`Shader`绑定a 时`Program`通知该对象并且可以将矩阵数据等传递到`Shader`GPU 上。

我最初的解决方案是让`Program`对象将指向自身的指针传递给`SceneManager`，后者将指针传递给`ShaderManager`，然后存储它。每当`Shader`创建一个新的时，都会将其`ShaderManager`添加`Program`为侦听器。

这工作得很好 - 但似乎 - 我不知道，在设计方面有点错误。

也许我只是在迂腐——但这对你们来说是不是很好的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:21:54.807

有几种选择，其优缺点通常是有争议的，并且取决于您的风格。

**辛格尔顿**

如果一个进程只有一个实例`Program`，那么您可以创建`Program`一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。这样，您不需要传递指针。

**中间对象**

`this`您可以让它通过一个封装`Program`和管理它的事件处理的对象，而不是传递指针。这样，其他类不需要知道`Program`，他们只需要事件类的接口。

事实上，如果您不反对使用[Boost](http://boost.org)，那么它们正是您正在寻找的东西：[Signals2](http://www.boost.org/doc/libs/1_53_0/doc/html/signals2.html)库。

# java - 在更改屏幕方向时，创建了新活动

> ID：15858027
> 
> 赞同：4
> 
> 时间：2013-04-07T01:47:48.503
> 
> 标签：java, android, android-activity, youtube, screen-orientation

我对 Android 比较陌生，但在过去一年中制作了很多应用程序，所以请原谅我。

我知道，当您在设备上运行应用程序并通过转动设备来更改屏幕方向时，显示的活动将完全重新创建。我去 youtube 应用程序（我使用的是带有 Android 4.2.2 的 Nexus 7）并播放一些视频，然后翻转屏幕以改变方向。视频继续播放，所有内容都相应地重新调整大小......如果完全重新创建活动，这怎么可能？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T01:55:35.547

在您的 AndroidManifest.xml 添加 android:configChanges ，这将避免在方向更改时重新创建活动。我希望您的横向和纵向模式具有相同的布局。

```
 <activity android:label="Your Activity Name" 
    android:configChanges="keyboardHidden|orientation|screenSize"
      android:name="com.yourpackage"> 
```

要对此添加更多内容，我建议您查看`onPause()`和`onResume()`方法，如果您正在使用 Fragments，请注意`onSaveInstanceState`，`onRetainInstanceState`而不是应用 xml 更改，因为“**活动被设计破坏了。** ”

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-16T03:05:15.987

如果您担心在活动中丢失局部变量的值......您可以对其中一些变量使用单例模式。这不是一个漂亮的解决方案，但可以工作。

# objective-c - 哪些工具提供了将 JSON 转换为模型类对象的钩子？

> ID：15858028
> 
> 赞同：0
> 
> 时间：2013-04-07T01:47:59.020
> 
> 标签：objective-c, json, code-generation, restkit

我可以轻松找到以下工具：

*   将 JSON 转换为 csharp 模型类
*   将 JSON 转换为 objc 模型类
*   将 JSON 转换为 Java 的 POJO
*   等等

但是，如果我希望在这个过程的中间介入并将我自己的转换器从 JSON 转换为`blah`模型类，会发生什么？

是否有一个编程框架或工具可以很好地理解 JSON 并简单地提供我可以以编程方式实现的钩子或回调，以便完成工作的后半部分，即吐出我自己风格的模型类？

我在这个问题背后的动机是我发现： http: [//jsonpack.com/ModelGenerators/ObjectiveC](http://jsonpack.com/ModelGenerators/ObjectiveC)这有助于生成依赖于 JSONKit 框架的 ObjC 模型类，但我想生成依赖于RestKit 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:10:49.853

如果我理解正确，您可能正在寻找“SAX 风格”解析器。也就是说，您为解析器实现某种*委托*，该委托从解析器接收*解析事件*并适当地处理这些事件。

因此，您的委托不是创建一个 JSON 表示，它是由 NSArray、NSDictionary 和 NSString 等组成的 Foundation 对象的层次结构，而是创建某些自定义类的一个或多个实例。

虽然这是可行的，但如果您有这样的“SAX 风格”解析器（NSJSONSerialization 不是），它肯定需要一些努力。请注意，您始终可以将 Foundation 层次结构“转换”为任何其他对象 - 例如 Core Data 模型对象。（意味着，从 NSDictionary 初始化一个对象）。但是，更复杂的方法肯定更快。

我知道的两个具有 SAX 风格 API 的 Objective-C JSON 解析器框架是 SBJson [https://github.com/stig/json-framework/](https://github.com/stig/json-framework/)和 JPJson [https://github.com/couchdeveloper/JPJson](https://github.com/couchdeveloper/JPJson)。

后一个解析器库（JPJson）实际上很明显是通过分离这两个任务来设计的：a）解析和 b）执行语义动作。您可以从现有的基类“语义操作”子类化，并创建自己的并覆盖对应于处理解析事件的“处理程序方法”。

我是 JPJson 的作者，目前正在更新它以适应新的 clang 编译器 (C++11) 和 Xcode。

# javascript - 使用动力学形状从组中选择形状 ID 时遇到问题？

> ID：15858029
> 
> 赞同：0
> 
> 时间：2013-04-07T01:47:59.957
> 
> 标签：javascript, html, canvas, kineticjs

我无法`shape`从`group`使用它的`id`. 这是我的代码笔：http: [//codepen.io/drixta/pen/AInHL](http://codepen.io/drixta/pen/AInHL)

这是我创建正方形的代码：

```
function create_square(posr,posc,state,len){
var square = new Kinetic.Rect({
    id : "sqr"+ posr + "," + posc,
    posr: posr,
    posc: posc,
    state : state,
    x: posr*len,
    y: posc*len,
    width: len,
    height: len,
    stroke: 'black',
    strokeWidth: 2,
    fill: 'white'
});
console.log(square.attrs.id);
squareGroup.add(square);
} 
```

从这里一切正常。控制台会打印出每个方格的 id。

```
sqr0,0 javascript.js:44
sqr0,1 javascript.js:44
sqr0,2 javascript.js:44
sqr0,3 javascript.js:44
sqr0,4 javascript.js:44
sqr0,5 javascript.js:44
sqr0,6 javascript.js:44
sqr0,7 javascript.js:44 
```

然而，根据这个网站：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-select-shape-by-id-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-select-shape-by-id-with-kineticjs/)

我尝试`console.log((squareGroup.get('#sqr0,0')[0]).attrs.id)`在程序结束时使用，它说`cannot get attrs of undefined`. 假设这不起作用。

非常感谢 ！

PS：这是突出显示框的代码：

```
square.on("mouseover", function(){
square.setFill('blue');
layer.draw();
});
square.on("mouseout", function(){
square.setFill('white');
layer.draw();
}); 
```

我将它嵌套在 create_square 函数中，当盒子数量增加时，它非常缓慢且无响应，有谁知道我可以在哪里做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:44:42.200

您的示例在 chrome 上运行良好，没有问题。

提高业绩。这里的问题：

```
square.on("mouseover", function(){
square.setFill('blue');
    layer.draw();
});
square.on("mouseout", function(){
    square.setFill('white');
layer.draw();
}); 
```

你调用 layer.draw() 两次 - 它很慢。你可以这样做：

```
square.on("mouseover", function(){
    square.setFill('blue');
});
square.on("mouseout", function(){
    square.setFill('white');
    setTimeout(function(){layer.draw();});
}); 
```

# ios - Cocos2d 重启场景为空白但显示 fps

> ID：15858030
> 
> 赞同：2
> 
> 时间：2013-04-07T01:48:14.187
> 
> 标签：ios, objective-c, cocos2d-iphone, cocos3d

我有一个表格视图，列出了我拥有的游戏地图。当我单击一个时，会加载另一个包含 cocos2d 场景的故事板。

我第一次加载场景时，一切都完美加载。但是，我第二次尝试加载场景（从导航控制器返回并单击同一张地图或另一张地图）时，我得到一个显示 fps 的空白屏幕，但没有其他内容。

这是我在 mapViewController 中的代码（包含 cocos2d）

```
 - (void)setupCocos3D { //called from viewDidLoad
    [[CCDirector sharedDirector] setOpenGLView:openGLView];  

    ((ViewInterface*)[ViewInterface sharedViewInterface]).currentScene = [testScene scene];

    // Create the customized CC3Layer that supports 3D rendering.
    CC3Layer* cc3Layer = [HelloWorldLayer node];

    // Create the customized 3D scene and attach it to the layer.
    // Could also just create this inside the customer layer.

    cc3Layer.cc3Scene =  ((ViewInterface*)[ViewInterface sharedViewInterface]).currentScene;

    // Assign to a generic variable so we can uncomment options below to play with the capabilities
    CC3ControllableLayer* mainLayer = cc3Layer;

    mainLayer.contentSize = CGSizeMake(2048, 1320);

    [CCDirector sharedDirector].animationInterval = (1.0f / kAnimationFrameRate);
    [CCDirector sharedDirector].displayStats = YES;
    [[CCDirector sharedDirector] enableRetinaDisplay: YES];

    ((ViewInterface*)[ViewInterface sharedViewInterface]).mainLayer = mainLayer;

    [[CCDirector sharedDirector] runWithScene:((ViewInterface*)[ViewInterface sharedViewInterface]).mainLayer];
}

- (void)viewWillDisappear:(BOOL)animated
{

    [super viewWillDisappear:animated];
    [[CCDirector sharedDirector] end];

} 
```

我能看到 fps 真的很奇怪，因此似乎唯一的问题是场景或图层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:59:55.960

是否保留了场景？它会被释放而不被重新创建吗？

# android - Google Play，IntelliJ 中的 Drive API 示例代码

> ID：15858037
> 
> 赞同：6
> 
> 时间：2013-04-07T01:49:33.310
> 
> 标签：android, eclipse, intellij-idea, google-drive-api

我正在遵循[关于 Android 的 Google Drive Quickstart 说明](https://developers.google.com/drive/quickstart-android)并让它在 Eclipse/Kepler 中运行。（Juno 很狡猾。）但是，我对 IntelliJ 更熟悉，所以我试图弄清楚如何以相应的方式在那里安装这些 API。

我*想*我在 Drive API 部分被绊倒了。Eclipse 插件以某种特殊的方式或位置安装 Drive。我添加了 Google-api-services-drive-v2-rev63-1.14.1-beta.jar 作为库，与其他库（Google-play-services 和 api_java_client）相同。但是当我运行应用程序时，它会返回

```
java.lang.NoClassDefFoundError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential 
```

而且我还遇到了与 Drive$Builder 相关的 NoClassDefFoundError。

在 IntelliJ 中，.jar 范围设置为“编译”，但 api_java_client 库设置为“已提供”。他们都没有检查“导出”。

编辑：添加了模块和依赖项。我现在有一个不同的错误：

```
04-07 00:39:59.766: ERROR/AndroidRuntime(10697): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError:
com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential
    at com.fallinghawks.weight4.App.onCreate(App.java:15) 
```

App.java:15 是

```
credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE); 
```

我可以找到它要求的课程......

**编辑 2，在按照 CrazyCoder 的说明添加库后：** 它编译，它运行，但我收到以下错误。我确定我错过了完全正确的事情，我会在一分钟内再试一次，但与此同时错误是：

```
04-10 18:02:35.120: ERROR/AndroidRuntime(740): FATAL EXCEPTION: main
    java.lang.ExceptionInInitializerError
    at com.google.api.services.drive.Drive$Builder.build(Drive.java:7301)
    at com.example.DriveQuickstart.MyActivity.getDriveService(MyActivity.java:110)
    at com.example.DriveQuickstart.MyActivity.onActivityResult(MyActivity.java:49)
    at android.app.Activity.dispatchActivityResult(Activity.java:5293)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:3315)
    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3362)
    at android.app.ActivityThread.access$1100(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1282)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NoClassDefFoundError: com.google.common.base.Preconditions
    at com.google.api.services.drive.Drive.<clinit>(Drive.java:63) 
```

**（希望是最终编辑）：**是的，我错过了一些东西，而野兽正在工作！非常感谢！！
现在我可以再次使用 IntelliJ 来处理我的“真实”项目......好多了:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:08:12.900

我继续从头开始创建 IntelliJ IDEA 项目，花了大约 15 分钟，工作正常。

1.  下载[Drive API v2 库和依赖项](https://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)。

2.  在某个地方打开包装，打开`readme.html`，花几分钟阅读它以了解需要哪些罐子。

3.  使用带有`com.example.drivequickstart`package 和`MainActivity`. 使用**Android 4.2.2 Google API**作为平台。

4.  将下载的 Drive API 库中的以下 jar 复制到项目`libs`文件夹中（您应该从第 2 步中了解要使用哪些 jar）：

    *   `google-api-client-1.14.1-beta.jar`
    *   `google-api-client-android-1.14.1-beta.jar`
    *   `google-http-client-1.14.1-beta.jar`
    *   `google-http-client-android-1.14.1-beta.jar`
    *   `google-http-client-gson-1.14.1-beta.jar`
    *   `google-oauth-client-1.14.1-beta.jar`
    *   `gson-2.1.jar`
    *   `jsr305-1.3.9.jar`
    *   `google-api-services-drive-v2-rev65-1.14.1-beta.jar`
5.  从这些 jar 中[配置项目库。](http://img41.imageshack.us/img41/3742/20130410005145.png)可以通过在 Project View 中选择 jars 来完成，右键单击**Add as Library...**，将此库添加到主模块的依赖项中。

6.  `File`| `Import Module`, 浏览到`ANDROID_SDK\extras\google\google_play_services\libproject\google-play-services_‌​lib`, 从现有来源。

7.  添加`google-play-services.jar`到导入模块的依赖项，启用**导出**复选框，它应该看起来[像这样](http://img809.imageshack.us/img809/7697/20130410005634.png)。

8.  将步骤 6 中创建的模块添加到[主应用程序模块的依赖项中](http://img62.imageshack.us/img62/9571/20130410005903.png)。

9.  将[快速入门](https://developers.google.com/drive/quickstart-android)`MainActivity`中的示例代码，第 4 步复制到替换旧代码的文件中，并按照指南进行编辑。`MainActivity.java``AndroidManifest.xml`

10.  在模拟器或设备上构建、运行以进行测试（不要忘记[快速入门](https://developers.google.com/drive/quickstart-android)中的步骤 1-2 ）。

* * *

或者，您可以[下载并使用](ftp://ftp.intellij.net/pub/.idea/drive-example.zip)我按照上述步骤创建的完全隔离的示例（步骤 6 中的模块包含在项目中）。

由于某些相机应用程序错误（示例使用相机并且我的模拟器没有配置它），它在模拟器中对我来说失败了，但在 Galaxy Nexus 设备上工作。该示例使用设备相机拍摄照片并将其上传到您的 Google Drive。

# java - 编译器找不到我的“吸气剂”

> ID：15858040
> 
> 赞同：0
> 
> 时间：2013-04-07T01:50:29.400
> 
> 标签：java

我正在为一个具有 Player 类和 Team 类的棒球队建模。Player 有一些每个球员的统计数据（姓名、人数、击球率等），而 Team 有一个 Player 对象数组、球队名称和球队规模。

我在 Team.java 中创建了一个 Player 对象数组，并使用一个简单的“for”循环来搜索我的数组。但是，我收到多个编译时错误，说编译器找不到 Player.java 中的任何“getter”。

这是我在 Team.java 中使用这样一个循环的 battingAverage 方法：

```
public double battingAverage () {
    double sum = 0.0;
    for (int i = 0; i<size; i++) {
        sum = sum + team[i].getAverage;
    }
    return (sum / size);
} 
```

这是 Player.java 中的“getter”

```
public double getAverage () {
    return average;
} 
```

（平均值被声明为私有动态字段，并由构造函数赋予一个值）

这是编译器给我的错误：

```
./Team.java:21: cannot find symbol
symbol  : variable getAverage
location: class Player
        sum = sum + team[i].getAverage;
                           ^ 
```

我在 Team.java 中使用的所有“getter”（getPosition、getName 等）都会重复出现这种类型的错误。

但是，我知道编译器将 team[i] 识别为单个 Player 对象，因为我也收到以下错误：

```
 ./Team.java:21: operator + cannot be applied to double,Player.getAverage
            sum = sum + team[i].getAverage;
                  ^ 
```

所以在我看来，由于某种原因，在 Player.java 中找不到 getAverage，我不知道为什么。

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T01:52:54.147

代替

```
sum = sum + team[i].getAverage; 
```

利用

```
sum = sum + team[i].getAverage(); 
```

这是一个没有您正在调用的参数的方法，而不是您正在访问的公共字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T01:53:20.803

你应该使用

```
sum = sum + team[i].getAverage(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T01:53:23.633

在循环中调用 getAverage 时省略了括号。所有方法调用必须后跟括号，即使它们不带参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T01:54:22.433

您不是访问属性，而是调用方法。这就是显示该错误的原因。`change sum = sum + team[i].getAverage;`对此`sum = sum + team[i].getAverage();`

# haskell - 加快 Haskell 中的相等性检查

> ID：15858043
> 
> 赞同：1
> 
> 时间：2013-04-07T01:51:06.637
> 
> 标签：haskell, optimization, profiling

是否可以加快（或者在我的函数的情况下，删除）Haskell 中的相等性检查？我有一个函数可以总结一个代理的所有交互，其中交互是在两个代理之间。要对交互进行求和，首先必须检查代理是否等于交互中的第一个或第二个代理，然后对其求和。检查相等性几乎占用了我的程序运行时间的一半。

```
sumAgent :: [Interaction] -> Agent -> Int
sumAgent xs agent = foldr (\x acc -> acc + sumInteraction agent x) 0 xs

-- Use this in a map call of sumAgent to return the sums of a specific agent
sumInteraction :: Agent -> Interaction  -> Int
sumInteraction agent (Interaction a1 a2 xs )
    | (==) agent a1 = sum $ map fst scores
    | (==) agent a2 = sum $ map snd scores
    | otherwise = 0
    where scores = map score xs 
```

是否可以通过使用 ac 函数或仅检查部分代理的相等性来删除相等性检查或加速它？Eq 的实现是：

```
 data Agent = Agent {
                function::[(Bool,Bool)] -> Bool,
                name::String,
                position::(Int,Int),
                dna::DNA
               }
 instance Eq Agent where
        (==) a1 a2 = position a1 == position a2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:36:43.867

你怎么知道平等需要一半的时间？我猜你最有可能通过使用严格和未装箱的对获得性能优势：

```
 data Pair = P {-# UNPACK #-} !Int {-# UNPACK #-} !Int
 data Agent = Agent {
            function::[(Bool,Bool)] -> Bool,
            name::String,
            position:: {-# UNPACK #-} !Pair Int Int,
            dna::DNA
           } 
```

这样，您将避免额外的间接性，并可能获得更好的缓存行为。

# tomcat - 使用证书对网站进行负载测试

> ID：15858044
> 
> 赞同：1
> 
> 时间：2013-04-07T01:51:19.890
> 
> 标签：tomcat, web-applications, load-testing

我的网站要求用户在获得访问权限之前选择证书。

我想使用`ab`,`Siege`或`JMeter`来测试我的网站的性能，因为我至少听说过它们。

但是，如何包含证书以便我可以进行身份​​验证，从而实际使用 Tomcat 进行负载测试？

# python - Python如何将字符串的第n个字母大写

> ID：15858065
> 
> 赞同：12
> 
> 时间：2013-04-07T01:53:45.243
> 
> 标签：python, string, capitalize

我试过这个：[*大写字符串*](https://stackoverflow.com/questions/352478/capitalize-a-string)。任何人都可以提供一个简单的脚本/片段作为指导吗？

Python 文档具有[`capitalize()`](http://docs.python.org/2/library/stdtypes.html?highlight=capitalize#str.capitalize)使首字母大写的功能。我想要类似的东西`make_nth_letter_cap(str, n)`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-07T02:22:11.897

将第 n 个字符大写，其余字符小写[`capitalize()`](http://docs.python.org/library/stdtypes.html#str.capitalize)：

```
def capitalize_nth(s, n):
    return s[:n].lower() + s[n:].capitalize() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-07T01:56:19.250

```
my_string[:n] + my_string[n].upper() + my_string[n + 1:] 
```

或者不是[Schlemiel the Painter 算法](https://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)的更有效版本：

```
''.join([my_string[:n], my_string[n].upper(), my_string[n + 1:]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:00:34.353

```
x = "string"
y = x[:3] + x[3].swapcase() + x[4:] 
```

**输出**

```
strIng 
```

[代码](http://codepad.org/84GSVftG)

请记住，`swapcase`无论是较低的还是较高的，都会反转大小写。
我用它只是为了展示另一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T18:53:04.010

我知道这是一个老话题，但这可能对将来的某人有用：

```
def myfunc(str, nth):
new_str = '' #empty string to hold new modified string
for i,l in enumerate(str): # enumerate returns both, index numbers and objects
    if i % nth == 0: # if index number % nth == 0 (even number)
        new_str += l.upper() # add an upper cased letter to the new_str
    else: # if index number nth
        new_str += l # add the other letters to new_str as they are
return new_str # returns the string new_str 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-28T06:58:39.167

一个简化的答案是：

```
 def make_nth_letter_capital(word, n):
        return word[:n].capitalize() + word[n:].capitalize() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-01T13:27:06.633

```
def capitalize_n(string, n):
return string[:n] + string[n].capitalize() + string[n+1:] 
```

> 这很完美

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-14T13:33:57.833

您可以使用：

```
def capitalize_nth(text, pos):
    before_nth = text[:pos]
    n = text[pos].upper()
    new_pos = pos+1
    after_nth = text[new_pos:]
    word = before_nth + n + after_nth
    print(word)

capitalize_nth('McDonalds', 6) 
```

结果是：

```
'McDonaLds' 
```

我认为这是那里所有答案中最简单的......

# prolog - 阅读时将 X 插入排序列表中的正确位置

> ID：15858067
> 
> 赞同：2
> 
> 时间：2013-04-07T01:54:13.730
> 
> 标签：prolog, insertion-sort

我尝试了很多思考如何在阅读时在排序列表中添加值，但我没有弄清楚。

我必须从文件中逐行读取值并将它们添加到排序列表中的正确位置。

SWI-PROLOG

如果我有 input.txt ： 1\. 4\. 2\. 3\. 8\. 6.

我必须阅读列表 1 中的 1。阅读 4 --> 我的列表是 1 4 。阅读 2 ---> 我的清单是 1 2 4 .. 等等。

读取和插入功能：

```
main :-open('input.txt', read, Str),read_file(Str,Lines),close(Str),write(Lines), nl.

read_file(Stream,[]) :-at_end_of_stream(Stream).

read_file(Stream,[X|L]) :-\+ at_end_of_stream(Stream),read(Stream,X),read_file(Stream,L).

insert(X,[Y|Sorted],[Y|Sorted1]):-X>Y,!,insert(X,Sorted,Sorted1).
insert(X,Sorted,[X|Sorted]). 
```

我试图创建一个函数来读取（Stream，X）并将 X 传递给 insert（X，[]，[]），或者将其放入 read_file 函数列表参数中（并且确定未定义）。从逻辑上讲，第一步是可以的，但我不知道如何进入下一步。没有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:27:25.367

首先，您需要修改`read_file`以获取输入*和*输出。然后，您需要修改此子句：

```
read_file(Stream,[X|L]) :-\+ at_end_of_stream(Stream),read(Stream,X),read_file(Stream,L). 
```

调用`insert`而不是预先设置项目本身。你可以这样做：

```
read_file(Stream, Before, Result) :-
  \+ at_end_of_stream(Stream),
  read(Stream, X),
  insert(X, Before, After),
  read_file(Stream, After, Result). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:28:39.490

我会这样写

```
read_file(Stream, SoFar, Result) :-
    read(Stream, X),
    (   X == end_of_file
    ->  Result = SoFar
    ;   insert(X, SoFar, Updated),
        read_file(Stream, Updated, Result)
    ). 
```

最初必须使用空列表调用：

```
?- read_file(user, [], L).
|: 4.
|: 5.
|: 1.
|: 7.
|: 2.
|: L = [1, 2, 4, 5, 7]. 
```

在 2 之后，我输入了 ^D（系统上的 end_of_file）

# jquery-ui - 在启用鼠标跟踪的情况下手动打开 jQuery UI 工具提示

> ID：15858072
> 
> 赞同：1
> 
> 时间：2013-04-07T01:55:18.657
> 
> 标签：jquery-ui, jquery-ui-tooltip

如果你看到[这个小提琴](http://jsfiddle.net/mattblang/yfYhu/10/)，你会注意到为了产生工具提示，鼠标必须`foo`在工具提示初始化后离开并重新进入 div。

我想也许我可以使用`tooltip("open")`. 不幸的是，当我这样做时，鼠标跟踪不起作用。看到[这个小提琴](http://jsfiddle.net/mattblang/yfYhu/8/)。

有谁知道如何在启用鼠标跟踪的情况下打开工具提示，而无需离开并重新输入 div？如果您想知道为什么我需要这样做，我正在使用 WebGL 在一个`canvas`占据整个屏幕的元素中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T16:56:21.500

我正在使用该`track: true`选项，并且在不同的上下文中遇到了相同的问题。我正在使用richfaces 并且有一些重新渲染页面部分的ajax 调用。

每次重新渲染后，我需要重建重新渲染部分中存在的工具提示，因此我决定将事件处理程序附加到文档并在 mouseenter 上重建这些工具提示，然后通过调用手动打开它们`$(...).tooltip('open')`...工具提示正确显示但鼠标跟踪不再起作用。

因此，我没有使用`$(...).tooltip('open')`，而是触发了 mouseenter 事件并使用 css 类仅初始化一次：

```
jQuery(document).on('mouseenter', '.tt', function() {
    jQuery(this).tooltip({
        content: function() { ... },
        items: ".tt, .ttped",
        track: true
    })
    .toggleClass('tt ttped')
    .trigger('mouseenter');
}); 
```

我编辑了你的**[jsFiddle](http://jsfiddle.net/yfYhu/23/)**，它在你每次输入 #foo 时重建工具提示，**[另一个](http://jsfiddle.net/yfYhu/25/)**只初始化一次工具提示（静态内容）

# sql - SQL：如何查询现有组中的不同对？

> ID：15858080
> 
> 赞同：1
> 
> 时间：2013-04-07T01:56:41.177
> 
> 标签：sql

例如，如果我有一个如下表：[cat] [paramA] [paramB]

并想构建一个查询以输出 [cat] [不同 paramA/paramB 对的计数]。

例如。

```
cat    paramA    paramB
001   A         B
001   A         C
001   B         B
001   A         C
002   A         A

desired output:
cat    count
001    3
002    1 
```

我使用 [cat] 作为我的参数组，并且不知道如何在此框架内对这对值进行不同的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:25:12.563

一种方法是在 cat、paramA 和 paramB 上选择 distinct。然后根据该结果进行分组：

```
select cat, count(*) from 
(select distinct * from data) as tmp
group by cat 
```

[SQL小提琴](http://sqlfiddle.com/#!1/76f57/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:28:00.657

您可能确实需要指定您正在使用的 DBMS，因为其中一些，例如[PostgreSQL](http://sqlfiddle.com/#!1/752fb/1 "SQL 小提琴示例")，将允许您执行如下简单的操作：

```
SELECT cat, COUNT(DISTINCT (paramA, paramB))
FROM atable
GROUP BY cat
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T13:43:17.287

您可以连接 paramA 和 paramB 来计算 DISTINCT 计数

```
SELECT cat, COUNT(DISTINCT paramA + paramB) AS [count]
FROM Table1
GROUP BY cat 
```

[**SQLServer2008 上的示例**](http://sqlfiddle.com/#!3/1dac1/1)

# html - li元素背后的背景

> ID：15858081
> 
> 赞同：-1
> 
> 时间：2013-04-07T01:57:50.087
> 
> 标签：html, css

我有一个（可由 js 扩展）列表，格式如下：

```
<ul>
    <li>
        <span class="arrow"></span>
        <span class="icon"></span>
        <span class="title">blah</span>
        <ul>
             <li>
                <span class="arrow"></span>
                <span class="icon"></span>
                <span class="title">blah</span>
                <ul>
                    ...
                </ul>
             </li>
        </ul>
    </li>
    <li>
        <span class="arrow"></span>
        <span class="icon"></span>
        <span class="title">blah</span>
        <ul>
    ...
</ul> 
```

给出一个典型的布局：

```
 - X blah
    - X blah
       . X blah
       - X blah
         . X blah
         . X blah
    - X blah
       . X blah
       . X blah
       . X blah
    + X blah
- X blah
    - X blah 
```

我想`<li>`通过为一个或多个项目设置背景来突出个人的。有序或分开。有没有办法让它填满整个“线”？

比如说选择 blah 2 我想：

```
 |===================| <- this range
 - blah 1
     + blah 2
     |===============| <- not this 
```

当我得到：

```
.selected {
    background : url('./img/selected.png') repeat-x;
} 
```

我试过摆弄边距等，但无法让它以我想要的方式呈现。

有任何想法吗？

***编辑：***

例如，就像此处*“组和项目”*下的选定行一样。

![在此处输入图像描述](https://i.stack.imgur.com/UBKSW.jpg) ![bg_slected_tree](https://i.stack.imgur.com/tnmXc.png)

***编辑2：***

小提琴更新[http://jsfiddle.net/zEShd/3/](http://jsfiddle.net/zEShd/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:13:16.743

[>>this fiddle<<](http://jsfiddle.net/5vgz2/)你想要达到什么目的？

这是示例html：

```
<ul class="level1">
    <li>level 1</li>
    <li>level 1
        <ul class="level2">
            <li>level 2</li>
            <li>level 2</li>
            <li>level 2
                <ul class="level3">
                    <li>level 3</li>
                    <li>level 3</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

这是示例CSS：

```
body
{
    margin:0;
}
ul
{
    margin:0;
    padding:0;
    list-style:none;
}
ul.level1 > li
{
    background-color:#ffff00;
}
ul.level2 > li
{
    background-color:#ff0000;
    padding-left:20px;
}
ul.level3 > li
{
    background-color:#ccc;
    padding-left:40px;
    margin-left:-20px;
} 
```

这是第二个[小提琴](http://jsfiddle.net/trajce/yJb9j/)，通过点击突出显示。

我通过在单击的`li`元素后面创建绝对定位的 div 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:07:43.677

如果没有看到一个实例，很难确切地知道发生了什么，但这可能是由于大多数浏览器的默认行为，即为嵌套`ul`元素添加填充。

尝试：

**CSS**

```
ul ul {
   padding:0;
   margin:0;
} 
```

或者（更好）使用[Eric Meyer 的 CSS 重置](http://meyerweb.com/eric/tools/css/reset/)来删除这些默认值。或者让他们“明智”[规范化](http://necolas.github.io/normalize.css/)

# mysql - 查询中的子字符串有多贵？我应该把值放在表中吗？

> ID：15858087
> 
> 赞同：1
> 
> 时间：2013-04-07T01:59:15.683
> 
> 标签：mysql, substring

所以，经过数周的研究，我最终决定在我的粉丝网站画廊的数据库模型上：

1.  我有图像，每个图像都有不同的大小，位于 2 级文件系统结构中。

2.  每个图像最多有 5 种不同的尺寸（小、拇指、中、大、超大）。尺寸基本上是我在图像名称末尾添加的后缀。

3.  一级目录为图片名右起最后一个整数，二级目录为右起第二个整数……</p>

4.  我在 php 中有一个常量变量，它定义了图像主文件夹的根目录：

    ```
    define('IMAGE_PATH', '…/images/') 
    ```

    因此，图像路径可能如下所示：

    ```
    …/images/6/7/3346642.4565676.jpg 
    ```

    以及该图像的小尺寸：

    ```
    …/images/6/7/3346642.4565676_s.jpg 
    ```

    …大号：

    ```
    …/images/6/7/3346642.4565676_l.jpg 
    ```

    等等……</p>

表格如下所示：

```
image (image_id, title, caption, file_dir, file_name, file_ext, update_date, upload_date)
image_size (size_id, name, suffix)
image_data (image_id, size_id, width, height) 
```

这是问题。我不需要`file_dir`，甚至不需要，`file_ext`因为我可以使用 PHP 或在查询中获取那些（使用`substring`and `concat`）但是，我读过在查询中使用子字符串很昂贵......我想如果我已经在表中有这些，它更快，无需在查询中使用 php 或函数……你觉得呢？将这些值放在表格中是否太过分……多余？

我可以只有文件名（即：`3346642.4565676.jpg`，然后让 PHP 或查询从图像文件夹中找出相对路径，或者我可以在表中分别拥有文件目录和文件扩展名……</p>

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:14:30.457

很难很好地回答您的问题，因为我们没有关于您的代码设置方式的所有信息。但我的建议是不要太担心连接字符串的性能。只需设置对您最方便的任何内容，并在概念上以清晰自然的方式组织信息。稍后，如果您发现存在性能问题，您可以处理它，但我怀疑是否将完整路径名存储在 sql 中是否会产生很大的不同。我怀疑您可能希望能够将所有图像移动到另一个文件夹而不必更新 oyur 数据库中的所有行？

# visual-studio-2010 - 单行格式化 CSS，在特定长度/列处带有换行符

> ID：15858090
> 
> 赞同：4
> 
> 时间：2013-04-07T02:00:04.007
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

**切入正题：**

VS 中是否有一个选项或插件可以提供在压缩/单行格式的 Razor/HTML/ASPX 页面的一定数量的列之后插入换行符的能力？

**从：**

![在此处输入图像描述](https://i.stack.imgur.com/CRwWK.png)

**至：**

![在此处输入图像描述](https://i.stack.imgur.com/CLw7a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T11:17:38.163

工具 -> 选项 -> 文本编辑器 -> CSS -> 格式

选择风格：紧凑的规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T15:31:51.370

您可以使用 resharper 一个 Visual Studio 插件。

如果你去`ReSharper -> Options -> Languages -> C# -> Formatting style -> Line Breaks and Wrapping`

里面有很多选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:54:54.400

`Tools -> Options -> Text Editor -> All Languages -> Word Wrap`

或者，如果您愿意：

`Ctrl+E+W`

# joomla - 在 Joomla 中的模块中添加联系表格

> ID：15858092
> 
> 赞同：0
> 
> 时间：2013-04-07T02:00:07.817
> 
> 标签：joomla, joomla2.5, joomla-extensions, contact-form, joomla-module

我正在[将此 Joomla 模板](http://demo.omegatheme.com/joomla25/ot_zdesign/index.php/features/module-positions)与 Joomla 2.5.x 一起使用，并且我想在此模板中的**RIGHT**模块中添加一个联系我们表单。

如何将联系我们表单添加到模块中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:44:25.393

[从Joomla Extensions Directory](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms)下载包含模块的联系表单扩展，安装、配置，然后将模块分配到**正确**的位置。

# jquery - 刷新 Jquery 对话框内容 + JSF

> ID：15858093
> 
> 赞同：2
> 
> 时间：2013-04-07T02:00:16.720
> 
> 标签：jquery, jsf, html, dialog, refresh

我需要显示一个记录表，每行都有一个锚标记，单击该标记将打开一个 Jquery 对话框。当我单击每一行的链接时，对话框会成功打开（目前，我有两行并且已经硬编码了我需要使它们动态化的锚和 div 标签的 ID）。无论如何，一旦对话框打开，我可以选择取消选中并选中某些复选框并进行一些更新。更新应该反映在父窗口上，这很好。但是，当我再次打开对话框时，它会在进行更新之前打开初始数据，而不是显示使用所做更新刷新的对话框。此外，它开始抛出错误消息，说“在初始化之前无法调用对话框上的方法；试图调用方法‘关闭’”

```
 $("#vendoradmin-artnodesearch-popup-0").dialog(opt).dialog("open");});

 $("#vendoradmin-artnodesearch-popup-0").dialog(
               {
                autoOpen : false,
                modal : false,
                resizable : false,
                height : 500,
                width : 750,
                buttons : [{
                text: "Submit", 
                click : function() {
                    var selNodes = "";
                  $('#artNodeAvailListId-0 input:checkbox:checked').each(
                     function() {
                        selNodes += $(this).val() + ",";
                      });

                  $("#frmAssignArticleHierarchy\\:hdnArticleNodeIds").attr("value",
                  selNodes);
                     frmAssignArticleHierarchy["frmAssignArticleHierarchy:btnRefreshArticleFilter"]
                 .click();

                  $(this).dialog("close");
                 }
             }]
         });
       }; 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:06:04.457

问题是当你关闭对话框时，实际上它并没有删除对话框中的数据，所以当它再次显示时，它会显示已经存在的数据，所以你需要添加一个删除`#vendoradmin-artnodesearch-popup-0`内容的关闭选项，只需检查jquery 对话框的 api，您可以找到执行此操作的代码。

```
$("#vendoradmin-artnodesearch-popup-0").dialog(
               {
                autoOpen : false,
                modal : false,
                resizable : false,
                height : 500,
                width : 750,
close: function(){//add code to remove the data in vendoradmin-artnodesearch-popup-0}
                buttons : [{
                text: "Submit", 

                click : function() {
                    var selNodes = "";
                  $('#artNodeAvailListId-0 input:checkbox:checked').each(
                     function() {
                        selNodes += $(this).val() + ",";
                      });

                  $("#frmAssignArticleHierarchy\\:hdnArticleNodeIds").attr("value",
                  selNodes);
                     frmAssignArticleHierarchy["frmAssignArticleHierarchy:btnRefreshArticleFilter"]
                 .click();

                  $(this).dialog("close");
                 }
             }]
         });
       }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:51:14.423

$("#vendoradmin-artnodesearch-popup-0") 是您动态创建的元素吗？您是否封装了对话框 ID。你可以使用 .ui-dialog 作为前面的选择器吗？那些id是唯一的吗？

```
 click: function () {
     var selNodes = "";
     $('.ui-dialog #artNodeAvailListId-0 input:checkbox:checked').each(

     function () {
         selNodes += $(this).val() + ",";
     });

     $("#frmAssignArticleHierarchy\\:hdnArticleNodeIds").attr("value",
     selNodes);

     $(this).dialog("close"); 
```

不知何故，我认为你可能有冲突的身份。

# javascript - 从 jQuery 为 ASP.NET 设置禁用输入的值

> ID：15858097
> 
> 赞同：1
> 
> 时间：2013-04-07T02:00:58.150
> 
> 标签：javascript, jquery, asp.net

试图弄清楚如何在 JavaScript 中设置输入值*，并*确保将其发布到 ASP.NET 中的服务器。它也必须被*禁用*字段。

我试过这个：

```
<asp:TextBox ID="DriverIdTextBox" runat="server" enabled="false" /> 
```

然后在 jQuery 中：

```
$("*[id$='DriverIdTextBox']").val("JAVA"); 
```

这在发布时不会在后端给我“JAVA”。当我启用文本框时 - 我在服务器上得到这个值就好了。我试图在客户端启用控制和禁用，如下所示：

```
$("*[id$='DriverIdTextBox']").val("JAVA").prop("disabled", true); 
```

同样的问题 - 值未发布到服务器。

基本上我想设置只读标签/输入任何内容，以便用户可以阅读它，但同时我想在用户提交表单时将其发布到服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T16:48:26.373

您还可以将元素设置为只读而不是禁用，以获取发布到服务器的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:08:15.537

如果您禁用了文本框，它将不会发回服务器。

将标签设置为文本框的值，并将隐藏字段设置为该值。

```
 <asp:HiddenField ID="hdnDriverId" runat="server" />
 <asp:Label ID="lblhdnDriverId" runat="server" Text="Label"></asp:Label>

    this.lblhdnDriverId.Text = "";
    this.hdnDriverId.Value = "";

$("*[id$='lblhdnDriverId']").val("JAVA");
$("*[id$='hdnDriverId']").val("JAVA"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:04:15.607

你可以像这样得到它的价值

```
 this.Request.Form[DriverIdTextBox.ClientId] 
```

禁用的元素不会与表单一起提交，您必须在回发之前删除“禁用”属性

# php - 关于如何使jquery、ajax和php交互以实现表单提交和其他控件的说明

> ID：15858099
> 
> 赞同：0
> 
> 时间：2013-04-07T02:01:23.277
> 
> 标签：php, jquery, ajax, form-submit

所以，正如标题所说，我需要一些关于如何进行交互 jquery、ajax 和 php 的说明，以实现表单提交和其他控件。

这是我第一次将 jquery、ajax 和 php 一起使用的网络体验，当然，我也遇到了一些问题。

我描述了我正在尝试做的事情。

基本上，我有一个带有注册表单的索引页：

```
<form id="formRegistration" action="registration_success.php" method="post">
    <p id="ptxtFullName">
        <input id="txtFullName" name="txtFullName" class="textbox" placeholder="Insert you full name" type="text" />
    </p>

    <p id="pTxtEmail">
       <input id="txtEmail" name="txtEmail" class="textbox" placeholder="Insert an email" type="text" />
    </p>

    <p id="pTxtPassword">
    <input id="txtPassword" name="txtPassword" class="textbox" placeholder="Choose a password" type="password" />
    </p>

    <p id="pTxtPasswordConfirmation">
    <input id="txtPasswordConfirmation" name="txtPasswordConfirmation" class="textbox" placeholder="Confirm your password" type="password" />
    </p>

    <p id="pBtnRegistration">
    <input id="btnRegistration" type="submit" value="Register!" />
    </p>
</form> 
```

然后，我有一个 jquery 文件，它执行所有输入验证的事情（如果输入正确或不正确，会产生一些影响，以及类似的事情），并且，如果验证顺利，则进行 ajax 调用。这只是一个示例，我不会发布整个文件，因为它非常庞大：

```
jQuery(document).ready(function($) {
$(function() {

            var $fullName = $("input[name='txtFullName']");
            var $email = $("input[name='txtEmail']");
            var $password = $("input[name='txtPassword']");
            var $passwordConfirmation = $("input[name='txtPasswordConfirmation']");

    $("#btnRegistration").click(function() {
        //Validation controls and effects.
    });

    return true;

    });

    $.ajax({
            type : "POST",
            url : "process_registration.php",
            data : "fullName", "email", "password",
            dataType : "HTML",
            success : function() {
                alert("Ok");
            },
            error : function() {
                alert("Error");
            }
        });

}); 
```

请注意，jquery 文件，当我添加 ajax 调用时，它会停止工作，而如果我不添加 ajax 调用，它会完美运行。

然后，这是我的 php 文件，名为 process_registration.php，它应该控制电子邮件是否已在使用中，然后将经过验证的输入数据插入 MySQL 数据库：

```
<?php 
```

需要'db_connection.php'；

```
$fullName = isset($_POST["fullName"]);
$email = isset($_POST["email"]);
$password = isset($_POST['password']);

$sql = mysql_query("SELECT * FROM utente WHERE mail = '$email'") or die("Email already in use");

$num_rows = mysql_num_rows($sql);

if ($num_rows == 0) 
{
    $password_md5 = md5($password);

    mysql_query("INSERT INTO user (Full_Name , Email, Password) VALUES
               ('$fullName', '$email', '$password_md5')") OR DIE(mysql_error());
} 
```

就这样。

显然它不起作用。

也许我在这件事上采用了完全错误的方法？

提前感谢您的好意和您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:18:54.860

ajax 调用中的数据属性应该是一个对象。

```
data : {
    "fullName" : fullName,
    "email" : email
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:20:10.280

尝试使用这个：

```
jQuery(document).ready(function($) {
    $('#formRegistration').submit(function() {
        e.preventDefault();

        // Perform form validation here and return from this function
        // if you do not want to submit the form.

        $.ajax({
            type : "POST",
            url : "process_registration.php",
            data : $(this).serialize(),
            dataType : 'html',
            success : function() {
                alert("Ok");
            },
            error : function() {
               alert("Error");
            }
        });
    });
}); 
```

这将注册一个事件处理程序，该处理程序在将要提交表单时被调用。调用`e.preventDefault()`阻止常规表单提交。然后处理程序通过 ajax 发布表单。

但是，您必须更改输入元素的名称，因为它们需要与您的 PHP 代码正在寻找的名称相匹配（例如，将“txtFullName”更改为“fullName”）。

# javascript - BlogSpot 中的 JavaScript/Jquery 在移动浏览器中不起作用

> ID：15858103
> 
> 赞同：2
> 
> 时间：2013-04-07T02:02:07.160
> 
> 标签：javascript, jquery, blogger

我在 BlogSpot 中的页面运行良好，除了我尝试过的移动浏览器（只有旧的 iPod touch 和我的 Windows 8 Phone，所以我不确定其他浏览器）。

页面在[这里](http://microinteriors.blogspot.com/p/pay-raise-calculator.html)。

基本上，在按下按钮对象后，JQuery 会使用 .html() 函数填充 DIV，使 DIV 的大小变大，我认为这就是问题所在。

我想知道是否有任何方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T02:48:38.467

这里的问题是博主为移动设备和 PC 加载了不同的模板。您博客的 PC 版本具有运行该功能所需的所有代码，但移动模板似乎没有这些代码。

您的脚本和 jQuery 库不会加载到移动模板中，因此您需要在模板中进行一些更改以使其也可以加载到移动浏览器中。这很简单，您所要做的就是将代码包装在

```
<b:if cond='data:blog.isMobile'></b:if> 
```

并且脚本也将加载到移动模板中。

它必须看起来像这样

```
<b:if cond='data:blog.isMobile'>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<script>
// your script
</script>
</b:if> 
```

将此模板放在任何地方（最好靠近原始脚本）并保存模板。首先通过加载博客的移动模板在您的 PC 上检查它，只需`?m=1`在博客 URL 的末尾添加即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-24T09:23:44.043

正如[@Deepak Kamat 所说](https://stackoverflow.com/a/15858351/4933700)..即使您将javascript代码放入其中也无法正常工作

`<b:if cond='data:blog.isMobile'></b:if>`

您需要做的就是选择正确的**移动**模板，在这种情况下，我相信您已经对**桌面**模板进行了一些更改，因此您必须从移动模板下拉列表中选择“自定义”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-24T08:01:10.377

是的，我试图解决这个问题，然后我找到了一些在移动模式下启用它的步骤，但是当你将此脚本代码放入添加小工具时，对我来说它不起作用是我遵循的一些步骤 - 首先我打开主题然后单击在 ... 菜单上选择编辑 html，最后将这些代码放在下面的代码行中，它就可以工作了。我贴了一些图片希望它会有所帮助。

`<b:if cond='data:blog.isMobile'><script>console.log(&quot;Hello&quot;)</script></b:if>`

[![在此处输入图像描述](https://i.stack.imgur.com/aCM3U.png)](https://i.stack.imgur.com/aCM3U.png) [![在此处输入图像描述](https://i.stack.imgur.com/Zla6G.png)](https://i.stack.imgur.com/Zla6G.png)

[![在此处输入图像描述](https://i.stack.imgur.com/aCuMM.png)](https://i.stack.imgur.com/aCuMM.png)

# php - Apache 不会解析 php 页面

> ID：15858104
> 
> 赞同：2
> 
> 时间：2013-04-07T02:02:07.987
> 
> 标签：php, linux, apache, webserver, lamp

因此，我在 Ubuntu 机器上安装了 LAMP 以进行一些 php 开发，并且一切正常，除了解析和显示 php 页面，浏览器询问我是否要下载它们。我知道这是一个有据可查的问题，而且我已经访问过有关它的 Ubuntu 页面，并了解了所有潜在的原因。我已经安装 `libapache2-mod-php5`并在运行时 `sudo a2enmod php5`得到`module php5 already enabled`. 所以我认为我已经将问题缩小到 php 文件授权问题。

现在我应该指出，这只发生在我修改配置文件以允许`UserDir`在我的`/home/public_html`. 使用文件夹中的默认配置`/var/www`php 文件解析得很好，而且仍然可以，只要我给自己 root 访问权限或修改他们的权限。而且我没有更改配置文件中的任何其他内容。

所以，我的问题是，*如何*检查/修改 php 授权文件？他们在哪？我具体检查什么？我似乎找不到任何关于此的好信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:06:32.303

尝试安装：

```
sudo apt-get install php5 libapache2-mod-php5 
```

然后重启服务。。

```
/etc/init.d/apache2 restart 
```

或者如果使用 httpd：

```
/etc/init.d/httpd restart 
```

然后让我知道情况如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:08:30.710

所以我通过一些*非常*乏味的搜索来解决这个问题，我很惊讶该解决方案没有更广泛地使用，它真的非常简单。该`/etc/apache2/mods-available/php5.conf`文件带有这些行......

```
 8     # To re-enable php in user directories comment the following lines
  9     # (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
 10     # prevents .htaccess files from disabling it.
 11     <IfModule mod_userdir.c>
 12         <Directory /home/*/public_html>
 13             php_admin_value engine Off
 14         </Directory>
 15     </IfModule> 
```

...这显然禁用了用户目录中的 php。这些需要注释掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T00:55:19.070

这解决了我的问题，但我不知道为什么：

```
AddType application/x-httpd-php .php 
```

我在 /etc/httpd/conf/httpd.conf 中添加了上述内容

当我编辑 httpd.conf 进行配置时，我的问题就出现了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-22T06:45:13.730

我在运行 PHP 7.0 的 Centos 7 上。我必须在我的`/etc/httpd/conf/httpd.conf`文件中加载 PHP 7 模块。

```
LoadModule php7_module        /usr/lib64/httpd/modules/libphp7.so
<FilesMatch \.php$>
    SetHandler application/x-httpd-php
</FilesMatch> 
```

和往常一样，记得`sudo service httpd restart`在对 apache 进行更改之后

# ruby - Qtdesinger、ruby 和生成代码中按钮/小部件的一些操作

> ID：15858106
> 
> 赞同：1
> 
> 时间：2013-04-07T02:02:15.933
> 
> 标签：ruby, qt-designer, qtruby

我正在开发一个使用 ruby​​ 和 qt 作为前端的应用程序。我使用 qtdesigner 绘制 gui 并使用 rbuic4 转换代码。但是我无法对放置在主程序上的按钮进行任何操作。我创建了 main.rb 并使用 require './muprogramm.rb' 调用了生成的代码。这是打开按钮 mbusb_close（对象名称）的文件对话框的示例代码

```
require  './muprogramm.rb'
require 'Qt4'
class Form < Qt::Widget
    slots 'file_dialog()'
    def initialize(parent = nil)
    super
        @ui = Ui_Frame.new
        @ui.setupUi(self)
        Qt::Object.connect(@ui.mbusb_close, SIGNAL('clicked()'), self, SLOT('file_dialog()'))
    end
    def file_dialog
        f = Qt::FileDialog
        text = File.new(f.getOpenFileName).read
        #@ui.editor_window.setText 'WikiBooks: Ruby'
    end
end
 a = Qt::Application.new(ARGV)
    u = Ui_Frame.new
    w = Qt::Frame.new
    u.setupUi(w)
    w.show
 a.exec 
```

网络中可用的资源是模糊的。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T02:51:51.277

只需使用您直接创建的子类：

```
require  './muprogramm.rb'
require 'Qt4'
class Form < Qt::Widget
    slots 'file_dialog()'
    def initialize(parent = nil)
    super
        @ui = Ui_Frame.new
        @ui.setupUi(self)
        Qt::Object.connect(@ui.mbusb_close, SIGNAL('clicked()'), self, SLOT('file_dialog()'))
    end
    def file_dialog
        f = Qt::FileDialog
        text = File.new(f.getOpenFileName).read
        #@ui.editor_window.setText 'WikiBooks: Ruby'
    end
end
 a = Qt::Application.new(ARGV)
    w = Form.new
    w.show
 a.exec 
```

# html - 为什么我们不应该将块元素放在内联元素中

> ID：15858107
> 
> 赞同：3
> 
> 时间：2013-04-07T02:02:36.837
> 
> 标签：html, validation

如果我将 div 元素放在锚元素中，它会使我的 HTML 无效。

没有将块级元素放置在内联元素中的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T02:09:12.897

> 如果我将 div 元素放在锚元素中，它会使我的 HTML 无效。

[从 HTML5 开始，情况并非如此。](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-a-element)

> 没有将块级元素放置在内联元素中的原因是什么？

HTML 规范描述了哪些元素可以包含其他元素。[“流内容”](http://www.w3.org/html/wg/drafts/html/master/single-page.html#flow-content-1)通常可以包含“流内容”或[“短语内容”](http://www.w3.org/html/wg/drafts/html/master/single-page.html#phrasing-content-1)，但并非总是如此。例如，一个`p`元素是块级元素，但它可能只包含“短语内容”。

# objective-c - 视图控制器的实现和头文件中出现“@interface ViewController”的原因

> ID：15858109
> 
> 赞同：6
> 
> 时间：2013-04-07T02:03:34.823
> 
> 标签：objective-c, xcode

为什么我们在 xcode 中的视图控制器的实现和头文件中都有“@interface ViewController”行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T02:09:51.200

这与`@interface`. 当它包含在头文件中时，其他类在导入头文件时可以看到它。当它包含在实现文件中时，内容仅对该实现文件可用。通常，当它在实现文件中声明时，它是通过类扩展（即`@interface ClassName ()`，`()`表示类扩展/匿名类别）完成的，尽管如果需要也可以使用命名类别。

这样做有几个原因。主要的是定义私有实例变量或属性。你不希望这些暴露给所有导入头文件的人，但你需要一个地方来存储内部信息。例如，这将`m_isActive`只允许在实现中使用：

```
@interface Class () {
    BOOL m_isActive;
} 
```

您还可以覆盖头文件中声明的只读属性，以便实现文件`readwrite`在使用点表示法时可以访问它。例如：

标题：

```
@interface Class
@property (nonatomic, readonly) NSString* name;
@end 
```

执行：

```
@interface Class ()
@property (nonatomic) NSString* name;
@end

@implementation Class
...
    self.name = @"WDUK"; // This is allowed, as the class extension has overridden the readonly attribute via a redeclaration of the property
...
@end 
```

另一个流行的用途是私下声明您符合特定协议，这是一个实现细节，不需要在公共头文件中公开。例如，当实现使用一个需要它作为委托的对象时，并且您不想使用未在类外使用的协议污染头文件。

其他用途（随着最近的 LLVM/Clang 改进而被遗忘）是定义私有方法。这不再需要，因为编译器将查找未在相应头文件中声明的方法，并假定它们是类私有的并自行声明它们。

从这一切中得到的关键部分是，`@interface`头文件中的任何内容（通过`@private`or定义的实例变量除外`@protected`）都是公共的，而实现文件中的任何内容本质上都是私有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T02:07:58.073

头文件中的那个定义了公共接口。

实现文件中的一个是*类扩展*，它使用任何私有实现细节扩展公共接口。

# javascript - Javascript 倒计时和 IE

> ID：15858111
> 
> 赞同：-2
> 
> 时间：2013-04-07T02:03:59.700
> 
> 标签：javascript

添加：

好的，添加一些额外的细节，因为我认为你必须保持问题简洁，但由于缺乏研究而被否决。这个脚本大约是我尝试做我想做的事情并在各种浏览器上工作的第三或第四个脚本。当它不起作用时，我确实搜索了资源来提供帮助，并认为这可能是在 IE 不喜欢输入 ID 时输出倒计时的方式，所以尝试了其他方式来显示它但无法让它工作，因此问题。一个 IE 没有显示任何错误，它只是没有显示任何内容 - 因此它只是对输入 id 的猜测。

我找到了这个 Javascript 代码——甚至可能在这里，它完全符合我的要求，并且在 FF 和 Chrome 中显示良好。不幸的是，尽管它在 IE 中根本不显示倒计时，并且想知道是否有任何方法可以更改与 IE 兼容的倒计时输出方式。

这是我正在使用的代码：

```
<script type="text/javascript">
// set minutes
var mins = 5;

// calculate the seconds (don't change this! unless time progresses at a different speed for you...)
var secs = mins * 60;
function countdown() {
    setTimeout('Decrement()',1000);
}
function Decrement() {
    if (document.getElementById) {
        minutes = document.getElementById("minutes");
        seconds = document.getElementById("seconds");
        // if less than a minute remaining
        if (seconds < 59) {
            seconds.value = secs;
        } else {
            minutes.value = getminutes();
            seconds.value = getseconds();
        }
        secs--;
        setTimeout('Decrement()',1000);
    }
}
function getminutes() {
    // minutes is seconds divided by 60, rounded down
    mins = Math.floor(secs / 60);
    return mins;
}
function getseconds() {
    // take mins remaining (as seconds) away from total seconds remaining
    return secs-Math.round(mins *60);
}
</script> 
```

并像这样显示它：

```
<div id="timer">
Time Ending In: <input id="minutes" type="text"> minutes and <input id="seconds"         type="text"> seconds.
</div>
   <script>
   countdown();
   </script> 
```

正如我所说，上述在 FF 和 Chrome 中显示良好 - 有没有办法让它在 IE 中工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:36:14.217

`<script type="text/javascript">...` `var minutes, seconds;` `...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:39:20.387

```
 <script type="text/javascript">

var minutes, seconds;

// set minutes
var mins = 5;

// calculate the seconds (don't change this! unless time progresses at a different speed for you...)
var secs = mins * 60;

function countdown() {
    setTimeout('Decrement()',1000);
}
function Decrement() {
        minutes = document.getElementById("minutes");
        seconds = document.getElementById("seconds");
        // if less than a minute remaining
        if (seconds < 59) {
            seconds.value = secs;
        } else {
            minutes.value = getminutes();
            seconds.value = getseconds();
        }
        secs--;
        setTimeout('Decrement()',1000);

}
function getminutes() {
    // minutes is seconds divided by 60, rounded down
    mins = Math.floor(secs / 60);
    return mins;
}
function getseconds() {
    // take mins remaining (as seconds) away from total seconds remaining
    return secs-Math.round(mins *60);
}
</script>
<div id="timer">
Time Ending In: <input id="minutes" type="text"> minutes and <input id="seconds" type="text"> seconds.
</div>
   <script>
   countdown();
   </script> 
```

# javascript - AngularJS：等待 $scope 函数内的 ng-click 事件

> ID：15858112
> 
> 赞同：0
> 
> 时间：2013-04-07T02:04:12.980
> 
> 标签：javascript, angularjs

全部：

我有一个由`ng-click`事件激活的功能。我希望这个函数等待另一个`ng-click`事件。这个想法是选择一个动作，然后为该动作选择一个目标（通过 DOM 中的可点击对象）。

我不确定如何做到这一点。我知道我可以使用 Angular 延迟事件（使用`Q`）。但是，我怎样才能`ng-click`在我的原始函数中捕获一个事件，而不必在我的范围内保存对延迟对象的引用？

编辑：我想以这种方式设计它的原因是因为我不希望我的“目标”执行任何操作，`ng-click`除非单击了某个操作；只有在选择了操作后才能选择目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T03:12:23.417

如果我正确理解您的问题，您可以使用控制器`$scope`来跟踪此状态信息。例如，在一个动作的 ng-click 函数中，设置一个`$scope.action`属性。`$scope.action`在目标的 ng-click 功能中，检查是否已设置适当的。

如果您有多个目标，并且需要跟踪每个目标的操作，请使用数组来跟踪已选择的操作。

# c++ - 使用预编译的库包

> ID：15858116
> 
> 赞同：3
> 
> 时间：2013-04-07T02:04:21.070
> 
> 标签：c++, compiler-construction, aptitude

我很难找到以下方法，因为我不知道要查看什么资源。**我应该读什么？**

我用aptitude安装了c++库包libexample5.3和libexample5.3-dev

*   libexample5.3 将实际的目标文件 ( `libexample.so.5.3`) 放入`/usr/lib/`
*   libexample5.3-dev 将头文件 ( `example.h`) 放入`/usr/include/`

要将 libexample 链接到 test.cpp，请使用以下命令进行编译：

```
g++ -o test test.cpp -lexample 
```

但首先必须声明所有链接到的实体：

```
#include <example.h> //contains declarations of everything provided by libexample
int main() {
    return example::CONSTANT_2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:53:03.370

对于`libexample`/的`libexample-dev`东西，共享库的位置等参见[Debian 政策手册](http://www.debian.org/doc/debian-policy/ch-sharedlibs.html#s-sharedlibs-dev)；有关`-l`标志的工作，请参见[g++ 手册页](http://linux.die.net/man/1/g++)；因为您必须有`#include`一些标头才能使用库，这是通常的做法，但通常无论如何都会在库文档中记录。

# database - 轻量级可移植跨平台客户端-服务器数据库

> ID：15858118
> 
> 赞同：0
> 
> 时间：2013-04-07T02:04:48.227
> 
> 标签：database, cross-platform, portable-database

是否有轻量级（在大小和内存使用方面）、便携（我可以将其复制并粘贴到另一台计算机而无需重新配置，或者轻松同步）、跨平台（在 Windows 和 linux 上运行，至少在数据级别上） ），客户端-服务器（因为会有多个用户同时写入，所以我不会使用 sqlite 或任何其他嵌入式数据库）数据库？

我有什么选择？

我不在乎它是sql还是nosql，我也不关心安全性..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:19:53.130

[阿帕奇德比](http://db.apache.org/derby/)怎么样？它需要 JRE (Java)，但除此之外，它应该完全符合您的要求。

或者，您可以为 SQLite（或任何其他嵌入式数据库）编写一个小型包装器，然后直接发布它。您的包装器将公开您选择的某种网络级 API。

# python - 如何在cherrypy中使用全局变量？

> ID：15858119
> 
> 赞同：5
> 
> 时间：2013-04-07T02:04:56.513
> 
> 标签：python, python-3.x, cherrypy, mako

我需要访问一个全局变量，该变量在不同的服务器请求中保持其状态。

在此示例中，全局变量 is`r`并且在每次请求时递增。

我怎样才能`r`在cherrypy中全球化？

```
import cherrypy
import urllib
class Root(object):
    @cherrypy.expose

    def index(self,  **params):

        jsondict = [('foo', '1'), ('fo', '2')]
        p = urllib.urlencode(jsondict)
        if r!=1
          r=r+1
          raise cherrypy.HTTPRedirect("/index?" + p)
        return "hi"
cherrypy.config.update({

                'server.socketPort': 8080

        })
cherrypy.quickstart(Root())
if __name__ == '__main__':
    r=1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T03:22:00.463

要访问全局变量，您必须使用`global`关键字后跟变量名。但是，如果`r`仅在`Root`类中使用，我建议您将其声明为类变量：

```
class Root(object):
    r = 1
    @cherrypy.expose
    def index(self,  **params):
        #...
        if Root.r != 1:
            Root.r += 1
        #... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T00:09:57.293

我有同样的问题。在意识到我的程序可以访问导入库的成员变量后解决了。

首先，创建一个名为**myglobals.py**的文件并将其放入其中

```
r=0
visitors = 0 
```

然后在您的服务器中：

```
import myglobals  
class Root(object):
        @cherrypy.expose
        def index(self,  **params):
            #...
            if myglobals.r != 1:
                myglobals.r += 1
            #... 
```

# xpages - 无法获取组合框的选定值

> ID：15858121
> 
> 赞同：0
> 
> 时间：2013-04-07T02:05:17.260
> 
> 标签：xpages, xpages-ssjs

我快疯了：我无法在 onchange 事件中访问组合框的选定值：

```
<xp:comboBox id="comboBox1" value="#{sessionScope.groupBy}">
<xp:selectItem itemLabel="nothing" itemValue=""></xp:selectItem>
<xp:selectItem itemLabel="State" itemValue="state"></xp:selectItem>
<xp:selectItem itemLabel="CCType" itemValue="cctype"></xp:selectItem>

<xp:eventHandler event="onchange" submit="true" refreshMode="complete">
            <xp:this.action>
                <xp:executeScript>
                    <xp:this.script>
<![CDATA[
#{javascript:sessionScope.groupBy = getComponent("comboBox1").getValue();
print( getComponent("comboBox1").getValue() )}
]]>
</xp:this.script>
                </xp:executeScript>
            </xp:this.action>
</xp:eventHandler>
</xp:comboBox> 
```

我想存储值并重新加载页面以访问我刚刚提交的值。我也试过 getSubmittedValue() 和 value only。他们总是返回 null。

这里的诀窍是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T17:07:29.847

我遇到了类似的问题，尝试了以下选项，它对我有用。

**将组合框的onChange**事件上的 Server Options 设置为 Full Update 并选中选项“Process Data without validation

这将为您提供所需的结果。（您的 sessionScope.groupBy 将设置为组合框的新选定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:57:42.807

我有一个类似的问题，但如果我理解你的困惑，我可能会有一个解决方案。您正在尝试捕获您选择正确的组合框字段的值？这是组合框的代码（名称：POVendor）。我从中绘制列表的视图名为“PLBV”。

@DbColumn(@DbName(), "PLBV", 1)

这是 Computed 字段的代码，用于捕获组合框中选择的值。只需从组合框中对计算字段进行部分刷新，它应该可以正常工作。

var item = document1.getValue("POVendor");

归还物品;

# c# - 有没有像样的 Websocket C# 实现？

> ID：15858124
> 
> 赞同：13
> 
> 时间：2013-04-07T02:06:37.857
> 
> 标签：c#, websocket

我已经创建了我的服务器`System.Net.WebSockets`，现在在我注意到不支持 Windows Server 2008 的机器之间传输它之后，是否有任何其他实现支持 X509Certificate 作为身份验证并且需要最少的对话。

在过去的 2 个小时里，我一直在谷歌上搜索这个，但没有发现任何有意义的东西，只是一组写得很糟糕、文档记录很差的库，这些库在常规，特别是 SuperSocket 上抛出异常，其服务器实现似乎完全是错误的公牛.

任何人都可以从一个像样的库中发布一些示例客户端代码吗？我越来越绝望。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T15:35:58.110

框架包括：

*   [信号R](http://www.asp.net/signalr)
*   XSockets
*   [超级网络套接字](http://superwebsocket.codeplex.com/)
*   [Alchemy WebSockets](https://github.com/Olivine-Labs/Alchemy-Websockets)
*   [斑点](https://github.com/statianzo/Fleck)

更多选项可通过[实时网络技术指南获得](http://www.leggetter.co.uk/real-time-web-technologies-guide)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-06T17:32:44.197

我知道这有点晚了，但我创建了一个[WebSocket C# 实现](http://vtortola.github.io/WebSocketListener/)，它可能对某些人来说很有趣。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-11T15:21:33.570

还有：

*   [https://github.com/sta/websocket-sharp](https://github.com/sta/websocket-sharp) - sharp 实现 RFC6455，在 Unity3d 开发人员中非常流行
*   [https://github.com/StackExchange/NetGain/](https://github.com/StackExchange/NetGain/) - stackoverflow 对 RFC6455 的实现

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T03:33:05.273

SignalR 为您提供了一种向应用程序添加实时功能的好方法。在底层，它使用 Web 套接字、服务器发送的事件、长轮询或基于客户端和服务器支持的永久帧。计划在未来几周内发布的即将发布的版本将支持客户端 (X509Certificate) 证书。您可以参考以下链接了解更多详情：

[http://www.asp.net/signalr](http://www.asp.net/signalr)

[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

# c++ - 在 C++ 中方便地声明编译时字符串

> ID：15858141
> 
> 赞同：155
> 
> 时间：2013-04-07T02:10:16.753
> 
> 标签：c++, string, c++11, metaprogramming, user-defined-literals

能够在 C++ 编译期间创建和操作字符串有几个有用的应用程序。虽然可以在 C++ 中创建编译时字符串，但这个过程非常繁琐，因为字符串需要声明为可变的字符序列，例如

```
using str = sequence<'H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd', '!'>; 
```

字符串连接、子字符串提取等操作可以很容易地实现为对字符序列的操作。**是否可以更方便地声明编译时字符串？如果没有，是否有一项提案可以方便地声明编译时字符串？**

### 为什么现有方法会失败

理想情况下，我们希望能够如下声明编译时字符串：

```
// Approach 1
using str1 = sequence<"Hello, world!">; 
```

或者，使用用户定义的文字，

```
// Approach 2
constexpr auto str2 = "Hello, world!"_s; 
```

where`decltype(str2)`会有一个`constexpr`构造函数。利用您可以执行以下操作的事实，可以实现方法 1 的更混乱版本：

```
template <unsigned Size, const char Array[Size]>
struct foo; 
```

但是，数组需要有外部链接，所以要让方法 1 起作用，我们必须编写如下内容：

```
/* Implementation of array to sequence goes here. */

constexpr const char str[] = "Hello, world!";

int main()
{
    using s = string<13, str>;
    return 0;
} 
```

不用说，这很不方便。方法2实际上是不可能实现的。如果我们要声明一个 ( `constexpr`) 文字运算符，那么我们将如何指定返回类型？由于我们需要操作符返回一个可变的字符序列，所以我们需要使用`const char*`参数来指定返回类型：

```
constexpr auto
operator"" _s(const char* s, size_t n) -> /* Some metafunction using `s` */ 
```

这会导致编译错误，因为`s`不是`constexpr`. 尝试通过执行以下操作来解决此问题并没有多大帮助。

```
template <char... Ts>
constexpr sequence<Ts...> operator"" _s() { return {}; } 
```

该标准规定，这种特定的文字运算符形式是为整数和浮点类型保留的。虽然`123_s`会工作，`abc_s`但不会。如果我们完全放弃用户定义的文字，而只使用常规`constexpr`函数怎么办？

```
template <unsigned Size>
constexpr auto
string(const char (&array)[Size]) -> /* Some metafunction using `array` */ 
```

和以前一样，我们遇到的问题是数组，现在是`constexpr`函数的参数，它本身不再是`constexpr`类型。

我相信应该可以定义一个 C 预处理器宏，它接受一个字符串和字符串的大小作为参数，并返回一个由字符串中的字符组成的序列（使用`BOOST_PP_FOR`、字符串化、数组下标等）。但是，我没有时间（或足够的兴趣）来实现这样的宏 =）

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-04-07T15:02:38.130

我还没有看到任何能与[Scott Schurr`str_const`](https://github.com/boostcon/cppnow_presentations_2012/blob/master/wed/schurr_cpp11_tools_for_class_authors.pdf?raw=true)在[C++ Now 2012](http://2012.cppnow.org)上的优雅相媲美的东西。它确实需要`constexpr`。

以下是您可以如何使用它以及它可以做什么：

```
int
main()
{
    constexpr str_const my_string = "Hello, world!";
    static_assert(my_string.size() == 13, "");
    static_assert(my_string[4] == 'o', "");
    constexpr str_const my_other_string = my_string;
    static_assert(my_string == my_other_string, "");
    constexpr str_const world(my_string, 7, 5);
    static_assert(world == "world", "");
//  constexpr char x = world[5]; // Does not compile because index is out of range!
} 
```

它并没有比编译时范围检查更酷！

使用和实现都没有宏。并且对字符串大小没有人为的限制。我会在这里发布实现，但我尊重 Scott 的隐含版权。实施是在他的演示文稿的一张幻灯片上链接到上面。

## 更新 C++17

自从我发布此答案以来的几年中，`std::string_view`它已成为我们工具箱的一部分。以下是我将如何使用以下方法重写上述内容`string_view`：

```
#include <string_view>

int
main()
{
    constexpr std::string_view my_string = "Hello, world!";
    static_assert(my_string.size() == 13);
    static_assert(my_string[4] == 'o');
    constexpr std::string_view my_other_string = my_string;
    static_assert(my_string == my_other_string);
    constexpr std::string_view world(my_string.substr(7, 5));
    static_assert(world == "world");
//  constexpr char x = world.at(5); // Does not compile because index is out of range!
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-04-09T21:24:00.910

> 我相信应该可以定义一个 C 预处理器宏，它将字符串和字符串的大小作为参数，并返回由字符串中的字符组成的序列（使用 BOOST_PP_FOR、字符串化、数组下标等）。但是，我没有时间（或足够的兴趣）来实现这样的宏

使用非常简单的宏和一些 C++11 特性可以在不依赖 boost 的情况下实现这一点：

1.  lambda 可变参数
2.  模板
3.  广义常量表达式
4.  非静态数据成员初始化器
5.  统一初始化

（后两者在这里不严格要求）

1.  我们需要能够使用用户提供的从 0 到 N 的索引来实例化一个可变参数模板——该工具也很有用，例如将元组扩展为可变参数模板函数的参数（请参阅问题： [如何将元组扩展为可变参数模板函数的参数？](https://stackoverflow.com/questions/687490/how-do-i-expand-a-tuple-into-variadic-template-functions-arguments)
    [“解包”一个元组来调用一个匹配的函数指针](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)）

    ```
    namespace  variadic_toolbox
    {
        template<unsigned  count, 
            template<unsigned...> class  meta_functor, unsigned...  indices>
        struct  apply_range
        {
            typedef  typename apply_range<count-1, meta_functor, count-1, indices...>::result  result;
        };

        template<template<unsigned...> class  meta_functor, unsigned...  indices>
        struct  apply_range<0, meta_functor, indices...>
        {
            typedef  typename meta_functor<indices...>::result  result;
        };
    } 
    ```

2.  然后使用非类型参数 char 定义一个名为 string 的可变参数模板：

    ```
    namespace  compile_time
    {
        template<char...  str>
        struct  string
        {
            static  constexpr  const char  chars[sizeof...(str)+1] = {str..., '\0'};
        };

        template<char...  str>
        constexpr  const char  string<str...>::chars[sizeof...(str)+1];
    } 
    ```

3.  现在最有趣的部分 - 将字符文字传递给字符串模板：

    ```
    namespace  compile_time
    {
        template<typename  lambda_str_type>
        struct  string_builder
        {
            template<unsigned... indices>
            struct  produce
            {
                typedef  string<lambda_str_type{}.chars[indices]...>  result;
            };
        };
    }

    #define  CSTRING(string_literal)                                                        \
        []{                                                                                 \
            struct  constexpr_string_type { const char * chars = string_literal; };         \
            return  variadic_toolbox::apply_range<sizeof(string_literal)-1,                 \
                compile_time::string_builder<constexpr_string_type>::produce>::result{};    \
        }() 
    ```

一个简单的串联演示展示了用法：

```
 namespace  compile_time
    {
        template<char...  str0, char...  str1>
        string<str0..., str1...>  operator*(string<str0...>, string<str1...>)
        {
            return  {};
        }
    }

    int main()
    {
        auto  str0 = CSTRING("hello");
        auto  str1 = CSTRING(" world");

        std::cout << "runtime concat: " <<  str_hello.chars  << str_world.chars  << "\n <=> \n";
        std::cout << "compile concat: " <<  (str_hello * str_world).chars  <<  std::endl;
    } 
```

[https://ideone.com/8Ft2xu](https://ideone.com/8Ft2xu)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-07T15:00:25.430

编辑：正如 Howard Hinnant（以及我在对 OP 的评论中所指出的）所指出的，您可能不需要将字符串的每个字符都作为单个模板参数的类型。如果你确实需要这个，下面有一个无宏的解决方案。

我在编译时尝试使用字符串时发现了一个技巧。它需要引入除“模板字符串”之外的另一种类型，但在函数内部，可以限制该类型的范围。

它不使用宏，而是使用一些 C++11 特性。

```
#include <iostream>

// helper function
constexpr unsigned c_strlen( char const* str, unsigned count = 0 )
{
    return ('\0' == str[0]) ? count : c_strlen(str+1, count+1);
}

// destination "template string" type
template < char... chars >
struct exploded_string
{
    static void print()
    {
        char const str[] = { chars... };
        std::cout.write(str, sizeof(str));
    }
};

// struct to explode a `char const*` to an `exploded_string` type
template < typename StrProvider, unsigned len, char... chars  >
struct explode_impl
{
    using result =
        typename explode_impl < StrProvider, len-1,
                                StrProvider::str()[len-1],
                                chars... > :: result;
};

    // recursion end
    template < typename StrProvider, char... chars >
    struct explode_impl < StrProvider, 0, chars... >
    {
         using result = exploded_string < chars... >;
    };

// syntactical sugar
template < typename StrProvider >
using explode =
    typename explode_impl < StrProvider,
                            c_strlen(StrProvider::str()) > :: result;

int main()
{
    // the trick is to introduce a type which provides the string, rather than
    // storing the string itself
    struct my_str_provider
    {
        constexpr static char const* str() { return "hello world"; }
    };

    auto my_str = explode < my_str_provider >{};    // as a variable
    using My_Str = explode < my_str_provider >;    // as a type

    my_str.print();
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-07T08:30:13.620

如果您不想使用[Boost 解决方案](https://stackoverflow.com/a/15859077/1938348)，您可以创建简单的宏来执行类似的操作：

```
#define MACRO_GET_1(str, i) \
    (sizeof(str) > (i) ? str[(i)] : 0)

#define MACRO_GET_4(str, i) \
    MACRO_GET_1(str, i+0),  \
    MACRO_GET_1(str, i+1),  \
    MACRO_GET_1(str, i+2),  \
    MACRO_GET_1(str, i+3)

#define MACRO_GET_16(str, i) \
    MACRO_GET_4(str, i+0),   \
    MACRO_GET_4(str, i+4),   \
    MACRO_GET_4(str, i+8),   \
    MACRO_GET_4(str, i+12)

#define MACRO_GET_64(str, i) \
    MACRO_GET_16(str, i+0),  \
    MACRO_GET_16(str, i+16), \
    MACRO_GET_16(str, i+32), \
    MACRO_GET_16(str, i+48)

#define MACRO_GET_STR(str) MACRO_GET_64(str, 0), 0 //guard for longer strings

using seq = sequence<MACRO_GET_STR("Hello world!")>; 
```

唯一的问题是 64 个字符的固定大小（加上额外的零）。但它可以根据您的需要轻松更改。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-07T05:06:17.180

> 我相信应该可以定义一个 C 预处理器宏，它将字符串和字符串的大小作为参数，并返回由字符串中的字符组成的序列（使用 BOOST_PP_FOR、字符串化、数组下标等）

有文章：Abel Sinkovics 和 Dave Abrahams[在 C++ 模板元程序中使用字符串。](http://cpp-next.com/archive/2012/10/using-strings-in-c-template-metaprograms/)

它比您使用宏 + **BOOST_PP_REPEAT**的想法有了一些改进- 它不需要将显式大小传递给宏。简而言之，它基于字符串大小的固定上限和“字符串溢出保护”：

```
template <int N>
constexpr char at(char const(&s)[N], int i)
{
    return i >= N ? '\0' : s[i];
} 
```

加上条件**boost::mpl::push_back**。

* * *

> 我将我接受的答案更改为 Yankes 的解决方案，因为它解决了这个特定问题，并且在不使用 constexpr 或复杂的预处理器代码的情况下优雅地做到了这一点。

如果您接受尾随零、手写宏循环、扩展宏中字符串的**2**倍重复，并且没有 Boost - 那么我同意 - 它会更好。不过，对于 Boost，它只有三行：

[**现场演示**](http://coliru.stacked-crooked.com/a/04c2c380d6308734)

```
#include <boost/preprocessor/repetition/repeat.hpp>
#define GET_STR_AUX(_, i, str) (sizeof(str) > (i) ? str[(i)] : 0),
#define GET_STR(str) BOOST_PP_REPEAT(64,GET_STR_AUX,str) 0 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-09T13:07:21.030

一位同事挑战我在编译时连接内存中的字符串。它还包括在编译时实例化单个字符串。完整的代码清单在这里：

```
//Arrange strings contiguously in memory at compile-time from string literals.
//All free functions prefixed with "my" to faciliate grepping the symbol tree
//(none of them should show up).

#include <iostream>

using std::size_t;

//wrapper for const char* to "allocate" space for it at compile-time
template<size_t N>
struct String {
    //C arrays can only be initialised with a comma-delimited list
    //of values in curly braces. Good thing the compiler expands
    //parameter packs into comma-delimited lists. Now we just have
    //to get a parameter pack of char into the constructor.
    template<typename... Args>
    constexpr String(Args... args):_str{ args... } { }
    const char _str[N];
};

//takes variadic number of chars, creates String object from it.
//i.e. myMakeStringFromChars('f', 'o', 'o', '\0') -> String<4>::_str = "foo"
template<typename... Args>
constexpr auto myMakeStringFromChars(Args... args) -> String<sizeof...(Args)> {
    return String<sizeof...(args)>(args...);
}

//This struct is here just because the iteration is going up instead of
//down. The solution was to mix traditional template metaprogramming
//with constexpr to be able to terminate the recursion since the template
//parameter N is needed in order to return the right-sized String<N>.
//This class exists only to dispatch on the recursion being finished or not.
//The default below continues recursion.
template<bool TERMINATE>
struct RecurseOrStop {
    template<size_t N, size_t I, typename... Args>
    static constexpr String<N> recurseOrStop(const char* str, Args... args);
};

//Specialisation to terminate recursion when all characters have been
//stripped from the string and converted to a variadic template parameter pack.
template<>
struct RecurseOrStop<true> {
    template<size_t N, size_t I, typename... Args>
    static constexpr String<N> recurseOrStop(const char* str, Args... args);
};

//Actual function to recurse over the string and turn it into a variadic
//parameter list of characters.
//Named differently to avoid infinite recursion.
template<size_t N, size_t I = 0, typename... Args>
constexpr String<N> myRecurseOrStop(const char* str, Args... args) {
    //template needed after :: since the compiler needs to distinguish
    //between recurseOrStop being a function template with 2 paramaters
    //or an enum being compared to N (recurseOrStop < N)
    return RecurseOrStop<I == N>::template recurseOrStop<N, I>(str, args...);
}

//implementation of the declaration above
//add a character to the end of the parameter pack and recurse to next character.
template<bool TERMINATE>
template<size_t N, size_t I, typename... Args>
constexpr String<N> RecurseOrStop<TERMINATE>::recurseOrStop(const char* str,
                                                            Args... args) {
    return myRecurseOrStop<N, I + 1>(str, args..., str[I]);
}

//implementation of the declaration above
//terminate recursion and construct string from full list of characters.
template<size_t N, size_t I, typename... Args>
constexpr String<N> RecurseOrStop<true>::recurseOrStop(const char* str,
                                                       Args... args) {
    return myMakeStringFromChars(args...);
}

//takes a compile-time static string literal and returns String<N> from it
//this happens by transforming the string literal into a variadic paramater
//pack of char.
//i.e. myMakeString("foo") -> calls myMakeStringFromChars('f', 'o', 'o', '\0');
template<size_t N>
constexpr String<N> myMakeString(const char (&str)[N]) {
    return myRecurseOrStop<N>(str);
}

//Simple tuple implementation. The only reason std::tuple isn't being used
//is because its only constexpr constructor is the default constructor.
//We need a constexpr constructor to be able to do compile-time shenanigans,
//and it's easier to roll our own tuple than to edit the standard library code.

//use MyTupleLeaf to construct MyTuple and make sure the order in memory
//is the same as the order of the variadic parameter pack passed to MyTuple.
template<typename T>
struct MyTupleLeaf {
    constexpr MyTupleLeaf(T value):_value(value) { }
    T _value;
};

//Use MyTupleLeaf implementation to define MyTuple.
//Won't work if used with 2 String<> objects of the same size but this
//is just a toy implementation anyway. Multiple inheritance guarantees
//data in the same order in memory as the variadic parameters.
template<typename... Args>
struct MyTuple: public MyTupleLeaf<Args>... {
    constexpr MyTuple(Args... args):MyTupleLeaf<Args>(args)... { }
};

//Helper function akin to std::make_tuple. Needed since functions can deduce
//types from parameter values, but classes can't.
template<typename... Args>
constexpr MyTuple<Args...> myMakeTuple(Args... args) {
    return MyTuple<Args...>(args...);
}

//Takes a variadic list of string literals and returns a tuple of String<> objects.
//These will be contiguous in memory. Trailing '\0' adds 1 to the size of each string.
//i.e. ("foo", "foobar") -> (const char (&arg1)[4], const char (&arg2)[7]) params ->
//                       ->  MyTuple<String<4>, String<7>> return value
template<size_t... Sizes>
constexpr auto myMakeStrings(const char (&...args)[Sizes]) -> MyTuple<String<Sizes>...> {
    //expands into myMakeTuple(myMakeString(arg1), myMakeString(arg2), ...)
    return myMakeTuple(myMakeString(args)...);
}

//Prints tuple of strings
template<typename T> //just to avoid typing the tuple type of the strings param
void printStrings(const T& strings) {
    //No std::get or any other helpers for MyTuple, so intead just cast it to
    //const char* to explore its layout in memory. We could add iterators to
    //myTuple and do "for(auto data: strings)" for ease of use, but the whole
    //point of this exercise is the memory layout and nothing makes that clearer
    //than the ugly cast below.
    const char* const chars = reinterpret_cast<const char*>(&strings);
    std::cout << "Printing strings of total size " << sizeof(strings);
    std::cout << " bytes:\n";
    std::cout << "-------------------------------\n";

    for(size_t i = 0; i < sizeof(strings); ++i) {
        chars[i] == '\0' ? std::cout << "\n" : std::cout << chars[i];
    }

    std::cout << "-------------------------------\n";
    std::cout << "\n\n";
}

int main() {
    {
        constexpr auto strings = myMakeStrings("foo", "foobar",
                                               "strings at compile time");
        printStrings(strings);
    }

    {
        constexpr auto strings = myMakeStrings("Some more strings",
                                               "just to show Jeff to not try",
                                               "to challenge C++11 again :P",
                                               "with more",
                                               "to show this is variadic");
        printStrings(strings);
    }

    std::cout << "Running 'objdump -t |grep my' should show that none of the\n";
    std::cout << "functions defined in this file (except printStrings()) are in\n";
    std::cout << "the executable. All computations are done by the compiler at\n";
    std::cout << "compile-time. printStrings() executes at run-time.\n";
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-09-20T01:50:55.240

这是为每个传递的编译时字符串创建 std::tuple<char...> 的简洁 C++14 解决方案。

```
#include <tuple>
#include <utility>

namespace detail {
        template <std::size_t ... indices>
        decltype(auto) build_string(const char * str, std::index_sequence<indices...>) {
                return std::make_tuple(str[indices]...);
        }
}

template <std::size_t N>
constexpr decltype(auto) make_string(const char(&str)[N]) {
        return detail::build_string(str, std::make_index_sequence<N>());
}

auto HelloStrObject = make_string("hello"); 
```

这是一个用于创建独特的编译时类型，从另一个宏帖子中删除。

```
#include <utility>

template <char ... Chars>
struct String {};

template <typename Str, std::size_t ... indices>
decltype(auto) build_string(std::index_sequence<indices...>) {
        return String<Str().chars[indices]...>();
}

#define make_string(str) []{\
        struct Str { const char * chars = str; };\
        return build_string<Str>(std::make_index_sequence<sizeof(str)>());\
}()

auto HelloStrObject = make_string("hello"); 
```

用户定义的文字还不能用于此，这真是太糟糕了。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-12-16T12:37:16.560

似乎没有人喜欢我的其他答案：-<。所以在这里我展示了如何将 str_const 转换为真实类型：

```
#include <iostream>
#include <utility>

// constexpr string with const member functions
class str_const { 
private:
    const char* const p_;
    const std::size_t sz_;
public:

    template<std::size_t N>
    constexpr str_const(const char(&a)[N]) : // ctor
    p_(a), sz_(N-1) {}

    constexpr char operator[](std::size_t n) const { 
        return n < sz_ ? p_[n] :
        throw std::out_of_range("");
    }

    constexpr std::size_t size() const { return sz_; } // size()
};

template <char... letters>
struct string_t{
    static char const * c_str() {
        static constexpr char string[]={letters...,'\0'};
        return string;
    }
};

template<str_const const& str,std::size_t... I>
auto constexpr expand(std::index_sequence<I...>){
    return string_t<str[I]...>{};
}

template<str_const const& str>
using string_const_to_type = decltype(expand<str>(std::make_index_sequence<str.size()>{}));

constexpr str_const hello{"Hello World"};
using hello_t = string_const_to_type<hello>;

int main()
{
//    char c = hello_t{};        // Compile error to print type
    std::cout << hello_t::c_str();
    return 0;
} 
```

使用 clang++ -stdlib=libc++ -std=c++14 (clang 3.7) 编译

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-19T22:56:20.030

您的方法＃1是正确的。

> 然而，数组需要有外部链接，所以要让方法 1 起作用，我们必须写这样的东西： constexpr const char str[] = "Hello, world!";

不，不正确。这使用 clang 和 gcc 编译。我希望它是标准的 c++11，但我不是语言专家。

```
#include <iostream>

template <char... letters>
struct string_t{
    static char const * c_str() {
        static constexpr char string[]={letters...,'\0'};
        return string;
    }
};

// just live with it, but only once
using Hello_World_t = string_t<'H','e','l','l','o',' ','w','o','r','l','d','!'>;

template <typename Name>
void print()
{
    //String as template parameter
    std::cout << Name::c_str();
}

int main() {
    std::cout << Hello_World_t::c_str() << std::endl;
    print<Hello_World_t>();
    return 0;
} 
```

我真正喜欢c ++ 17的是以下等价的（完成方法＃1）

```
// for template <char...>
<"Text"> == <'T','e','x','t'> 
```

模板化的用户定义文字的标准中已经存在非常相似的东西，正如 void-pointer 也提到的那样，但仅限于数字。在那之前还有一个小技巧就是使用override编辑模式+复制粘贴

```
string_t<' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' '>; 
```

如果您不介意宏，则可以使用（根据 Yankes 的回答稍作修改）：

```
#define MACRO_GET_1(str, i) \
(sizeof(str) > (i) ? str[(i)] : 0)

#define MACRO_GET_4(str, i) \
MACRO_GET_1(str, i+0),  \
MACRO_GET_1(str, i+1),  \
MACRO_GET_1(str, i+2),  \
MACRO_GET_1(str, i+3)

#define MACRO_GET_16(str, i) \
MACRO_GET_4(str, i+0),   \
MACRO_GET_4(str, i+4),   \
MACRO_GET_4(str, i+8),   \
MACRO_GET_4(str, i+12)

#define MACRO_GET_64(str, i) \
MACRO_GET_16(str, i+0),  \
MACRO_GET_16(str, i+16), \
MACRO_GET_16(str, i+32), \
MACRO_GET_16(str, i+48)

//CT_STR means Compile-Time_String
#define CT_STR(str) string_t<MACRO_GET_64(#str, 0), 0 >//guard for longer strings

print<CT_STR(Hello World!)>(); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-06-28T16:34:22.110

kacey 用于创建唯一编译时类型的解决方案只需稍作修改，也可以与 C++11 一起使用：

```
template <char... Chars>
struct string_t {};

namespace detail {
template <typename Str,unsigned int N,char... Chars>
struct make_string_t : make_string_t<Str,N-1,Str().chars[N-1],Chars...> {};

template <typename Str,char... Chars>
struct make_string_t<Str,0,Chars...> { typedef string_t<Chars...> type; };
} // namespace detail

#define CSTR(str) []{ \
    struct Str { const char *chars = str; }; \
    return detail::make_string_t<Str,sizeof(str)>::type(); \
  }() 
```

采用：

```
template <typename String>
void test(String) {
  // ... String = string_t<'H','e','l','l','o','\0'>
}

test(CSTR("Hello")); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-11-02T17:12:32.790

在玩 boost hana 地图时，我遇到了这个线程。由于没有一个答案解决了我的问题，我找到了一个不同的解决方案，我想在此处添加它，因为它可能对其他人有帮助。

我的问题是，当使用带有 hana 字符串的 boost hana 映射时，编译器仍然会生成一些运行时代码（见下文）。原因很明显，要在编译时查询地图，它必须是`constexpr`. 这是不可能的，因为`BOOST_HANA_STRING`宏会生成一个无法在`constexpr`上下文中使用的 lambda。另一方面，地图需要具有不同内容的字符串才能成为不同的类型。

由于该线程中的解决方案要么使用 lambda，要么不为不同的内容提供不同的类型，我发现以下方法很有帮助。它还避免了 hacky`str<'a', 'b', 'c'>`语法。

基本思想是在字符的散列上创建一个 Scott Schurr 的`str_const`模板版本。它是`c++14`，但`c++11`应该可以通过`crc32`函数的递归实现（参见[此处](https://stackoverflow.com/questions/2111667/compile-time-string-hashing)）。

```
// str_const from https://github.com/boostcon/cppnow_presentations_2012/blob/master/wed/schurr_cpp11_tools_for_class_authors.pdf?raw=true

    #include <string>

template<unsigned Hash>  ////// <- This is the difference...
class str_const2 { // constexpr string
private:
    const char* const p_;
    const std::size_t sz_;
public:
    template<std::size_t N>
    constexpr str_const2(const char(&a)[N]) : // ctor
        p_(a), sz_(N - 1) {}

    constexpr char operator[](std::size_t n) const { // []
        return n < sz_ ? p_[n] :
            throw std::out_of_range("");
    }

    constexpr std::size_t size() const { return sz_; } // size()

    constexpr const char* const data() const {
        return p_;
    }
};

// Crc32 hash function. Non-recursive version of https://stackoverflow.com/a/23683218/8494588
static constexpr unsigned int crc_table[256] = {
    0x00000000, 0x77073096, 0xee0e612c, 0x990951ba, 0x076dc419, 0x706af48f,
    0xe963a535, 0x9e6495a3, 0x0edb8832, 0x79dcb8a4, 0xe0d5e91e, 0x97d2d988,
    0x09b64c2b, 0x7eb17cbd, 0xe7b82d07, 0x90bf1d91, 0x1db71064, 0x6ab020f2,
    0xf3b97148, 0x84be41de, 0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7,
    0x136c9856, 0x646ba8c0, 0xfd62f97a, 0x8a65c9ec, 0x14015c4f, 0x63066cd9,
    0xfa0f3d63, 0x8d080df5, 0x3b6e20c8, 0x4c69105e, 0xd56041e4, 0xa2677172,
    0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b, 0x35b5a8fa, 0x42b2986c,
    0xdbbbc9d6, 0xacbcf940, 0x32d86ce3, 0x45df5c75, 0xdcd60dcf, 0xabd13d59,
    0x26d930ac, 0x51de003a, 0xc8d75180, 0xbfd06116, 0x21b4f4b5, 0x56b3c423,
    0xcfba9599, 0xb8bda50f, 0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924,
    0x2f6f7c87, 0x58684c11, 0xc1611dab, 0xb6662d3d, 0x76dc4190, 0x01db7106,
    0x98d220bc, 0xefd5102a, 0x71b18589, 0x06b6b51f, 0x9fbfe4a5, 0xe8b8d433,
    0x7807c9a2, 0x0f00f934, 0x9609a88e, 0xe10e9818, 0x7f6a0dbb, 0x086d3d2d,
    0x91646c97, 0xe6635c01, 0x6b6b51f4, 0x1c6c6162, 0x856530d8, 0xf262004e,
    0x6c0695ed, 0x1b01a57b, 0x8208f4c1, 0xf50fc457, 0x65b0d9c6, 0x12b7e950,
    0x8bbeb8ea, 0xfcb9887c, 0x62dd1ddf, 0x15da2d49, 0x8cd37cf3, 0xfbd44c65,
    0x4db26158, 0x3ab551ce, 0xa3bc0074, 0xd4bb30e2, 0x4adfa541, 0x3dd895d7,
    0xa4d1c46d, 0xd3d6f4fb, 0x4369e96a, 0x346ed9fc, 0xad678846, 0xda60b8d0,
    0x44042d73, 0x33031de5, 0xaa0a4c5f, 0xdd0d7cc9, 0x5005713c, 0x270241aa,
    0xbe0b1010, 0xc90c2086, 0x5768b525, 0x206f85b3, 0xb966d409, 0xce61e49f,
    0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4, 0x59b33d17, 0x2eb40d81,
    0xb7bd5c3b, 0xc0ba6cad, 0xedb88320, 0x9abfb3b6, 0x03b6e20c, 0x74b1d29a,
    0xead54739, 0x9dd277af, 0x04db2615, 0x73dc1683, 0xe3630b12, 0x94643b84,
    0x0d6d6a3e, 0x7a6a5aa8, 0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1,
    0xf00f9344, 0x8708a3d2, 0x1e01f268, 0x6906c2fe, 0xf762575d, 0x806567cb,
    0x196c3671, 0x6e6b06e7, 0xfed41b76, 0x89d32be0, 0x10da7a5a, 0x67dd4acc,
    0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5, 0xd6d6a3e8, 0xa1d1937e,
    0x38d8c2c4, 0x4fdff252, 0xd1bb67f1, 0xa6bc5767, 0x3fb506dd, 0x48b2364b,
    0xd80d2bda, 0xaf0a1b4c, 0x36034af6, 0x41047a60, 0xdf60efc3, 0xa867df55,
    0x316e8eef, 0x4669be79, 0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,
    0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f, 0xc5ba3bbe, 0xb2bd0b28,
    0x2bb45a92, 0x5cb36a04, 0xc2d7ffa7, 0xb5d0cf31, 0x2cd99e8b, 0x5bdeae1d,
    0x9b64c2b0, 0xec63f226, 0x756aa39c, 0x026d930a, 0x9c0906a9, 0xeb0e363f,
    0x72076785, 0x05005713, 0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38,
    0x92d28e9b, 0xe5d5be0d, 0x7cdcefb7, 0x0bdbdf21, 0x86d3d2d4, 0xf1d4e242,
    0x68ddb3f8, 0x1fda836e, 0x81be16cd, 0xf6b9265b, 0x6fb077e1, 0x18b74777,
    0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c, 0x8f659eff, 0xf862ae69,
    0x616bffd3, 0x166ccf45, 0xa00ae278, 0xd70dd2ee, 0x4e048354, 0x3903b3c2,
    0xa7672661, 0xd06016f7, 0x4969474d, 0x3e6e77db, 0xaed16a4a, 0xd9d65adc,
    0x40df0b66, 0x37d83bf0, 0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9,
    0xbdbdf21c, 0xcabac28a, 0x53b39330, 0x24b4a3a6, 0xbad03605, 0xcdd70693,
    0x54de5729, 0x23d967bf, 0xb3667a2e, 0xc4614ab8, 0x5d681b02, 0x2a6f2b94,
    0xb40bbe37, 0xc30c8ea1, 0x5a05df1b, 0x2d02ef8d
};

template<size_t N>
constexpr auto crc32(const char(&str)[N])
{
    unsigned int prev_crc = 0xFFFFFFFF;
    for (auto idx = 0; idx < sizeof(str) - 1; ++idx)
        prev_crc = (prev_crc >> 8) ^ crc_table[(prev_crc ^ str[idx]) & 0xFF];
    return prev_crc ^ 0xFFFFFFFF;
}

// Conveniently create a str_const2
#define CSTRING(text) str_const2 < crc32( text ) >( text )

// Conveniently create a hana type_c<str_const2> for use in map
#define CSTRING_TYPE(text) hana::type_c<decltype(str_const2 < crc32( text ) >( text ))> 
```

用法：

```
#include <boost/hana.hpp>

#include <boost/hana/map.hpp>
#include <boost/hana/pair.hpp>
#include <boost/hana/type.hpp>

namespace hana = boost::hana;

int main() {

    constexpr auto s2 = CSTRING("blah");

    constexpr auto X = hana::make_map(
        hana::make_pair(CSTRING_TYPE("aa"), 1)
    );    
    constexpr auto X2 = hana::insert(X, hana::make_pair(CSTRING_TYPE("aab"), 2));   
    constexpr auto ret = X2[(CSTRING_TYPE("aab"))];
    return ret;
} 
```

`clang-cl`生成的5.0汇编代码为：

```
012A1370  mov         eax,2  
012A1375  ret 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-07-01T11:25:39.773

在带有辅助宏函数的 C++17 中，很容易创建编译时字符串：

```
template <char... Cs>
struct ConstexprString
{
    static constexpr int size = sizeof...( Cs );
    static constexpr char buffer[size] = { Cs... };
};

template <char... C1, char... C2>
constexpr bool operator==( const ConstexprString<C1...>& lhs, const ConstexprString<C2...>& rhs )
{
    if( lhs.size != rhs.size )
        return false;

    return std::is_same_v<std::integer_sequence<char, C1...>, std::integer_sequence<char, C2...>>;
}

template <typename F, std::size_t... Is>
constexpr auto ConstexprStringBuilder( F f, std::index_sequence<Is...> )
{
    return ConstexprString<f( Is )...>{};
}

#define CONSTEXPR_STRING( x )                                              \
  ConstexprStringBuilder( []( std::size_t i ) constexpr { return x[i]; },  \
                 std::make_index_sequence<sizeof(x)>{} ) 
```

这是一个使用示例：

```
auto n = CONSTEXPR_STRING( "ab" );
auto m = CONSTEXPR_STRING( "ab" );

static_assert(n == m); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-08T22:42:35.497

根据[Howard Hinnant](https://stackoverflow.com/a/15863826/1938348)的想法，您可以创建将两个文字添加在一起的文字类。

```
template<int>
using charDummy = char;

template<int... dummy>
struct F
{
    const char table[sizeof...(dummy) + 1];
    constexpr F(const char* a) : table{ str_at<dummy>(a)..., 0}
    {

    }
    constexpr F(charDummy<dummy>... a) : table{ a..., 0}
    {

    }

    constexpr F(const F& a) : table{ a.table[dummy]..., 0}
    {

    }

    template<int... dummyB>
    constexpr F<dummy..., sizeof...(dummy)+dummyB...> operator+(F<dummyB...> b)
    {
        return { this->table[dummy]..., b.table[dummyB]... };
    }
};

template<int I>
struct get_string
{
    constexpr static auto g(const char* a) -> decltype( get_string<I-1>::g(a) + F<0>(a + I))
    {
        return get_string<I-1>::g(a) + F<0>(a + I);
    }
};

template<>
struct get_string<0>
{
    constexpr static F<0> g(const char* a)
    {
        return {a};
    }
};

template<int I>
constexpr auto make_string(const char (&a)[I]) -> decltype( get_string<I-2>::g(a) )
{
    return get_string<I-2>::g(a);
}

constexpr auto a = make_string("abc");
constexpr auto b = a+ make_string("def"); // b.table == "abcdef" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-14T11:34:51.423

我想对@user1115339的[答案添加两个非常小的改进。](https://stackoverflow.com/a/15912824/8494588)我在答案的评论中提到了它们，但为方便起见，我将在此处放置复制粘贴解决方案。

唯一的区别是`FIXED_CSTRING`宏，它允许在类模板中使用字符串并作为索引运算符的参数（如果你有一个编译时映射很有用）。

[活生生的例子](https://www.godbolt.org/z/5qjbSf)。

```
namespace  variadic_toolbox
{
    template<unsigned  count, 
        template<unsigned...> class  meta_functor, unsigned...  indices>
    struct  apply_range
    {
        typedef  typename apply_range<count-1, meta_functor, count-1, indices...>::result  result;
    };

    template<template<unsigned...> class  meta_functor, unsigned...  indices>
    struct  apply_range<0, meta_functor, indices...>
    {
        typedef  typename meta_functor<indices...>::result  result;
    };
}

namespace  compile_time
{
    template<char...  str>
    struct  string
    {
        static  constexpr  const char  chars[sizeof...(str)+1] = {str..., '\0'};
    };

    template<char...  str>
    constexpr  const char  string<str...>::chars[sizeof...(str)+1];

    template<typename  lambda_str_type>
    struct  string_builder
    {
        template<unsigned... indices>
        struct  produce
        {
            typedef  string<lambda_str_type{}.chars[indices]...>  result;
        };
    };
}

#define  CSTRING(string_literal)                                                        \
    []{                                                                                 \
        struct  constexpr_string_type { const char * chars = string_literal; };         \
        return  variadic_toolbox::apply_range<sizeof(string_literal)-1,                 \
            compile_time::string_builder<constexpr_string_type>::produce>::result{};    \
    }()

#define  FIXED_CSTRING(string_literal)                                                        \
    ([]{                                                                                 \
        struct  constexpr_string_type { const char * chars = string_literal; };         \
        return  typename variadic_toolbox::apply_range<sizeof(string_literal)-1,                 \
            compile_time::string_builder<constexpr_string_type>::template produce>::result{};    \
    }())    

struct A {

    auto test() {
        return FIXED_CSTRING("blah"); // works
        // return CSTRING("blah"); // works too
    }

    template<typename X>
    auto operator[](X) {
        return 42;
    }
};

template<typename T>
struct B {

    auto test() {       
       // return CSTRING("blah");// does not compile
       return FIXED_CSTRING("blah"); // works
    }
};

int main() {
    A a;
    //return a[CSTRING("blah")]; // fails with error: two consecutive ' [ ' shall only introduce an attribute before ' [ ' token
    return a[FIXED_CSTRING("blah")];
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-23T14:54:39.773

我自己的实现基于`Boost.Hana`字符串的方法（带有可变参数的模板类），但仅使用`C++11`标准和`constexpr`函数，对编译时间进行严格检查（如果不是编译时表达式，将是编译时错误）。可以从通常的原始 C 字符串而不是花哨的`{'a', 'b', 'c' }`（通过宏）构造。

实现： [https ://sourceforge.net/p/tacklelib/tacklelib/HEAD/tree/trunk/include/tacklelib/tackle/tmpl_string.hpp](https://sourceforge.net/p/tacklelib/tacklelib/HEAD/tree/trunk/include/tacklelib/tackle/tmpl_string.hpp)

测试： [https ://sourceforge.net/p/tacklelib/tacklelib/HEAD/tree/trunk/src/tests/unit/test_tmpl_string.cpp](https://sourceforge.net/p/tacklelib/tacklelib/HEAD/tree/trunk/src/tests/unit/test_tmpl_string.cpp)

使用示例：

```
const auto s0    = TACKLE_TMPL_STRING(0, "012");            // "012"
const char c1_s0 = UTILITY_CONSTEXPR_GET(s0, 1);            // '1'

const auto s1    = TACKLE_TMPL_STRING(0, "__012", 2);       // "012"
const char c1_s1 = UTILITY_CONSTEXPR_GET(s1, 1);            // '1'

const auto s2    = TACKLE_TMPL_STRING(0, "__012__", 2, 3);  // "012"
const char c1_s2 = UTILITY_CONSTEXPR_GET(s2, 1);            // '1'

// TACKLE_TMPL_STRING(0, "012") and TACKLE_TMPL_STRING(1, "012")
//   - semantically having different addresses.
//   So id can be used to generate new static array class field to store
//   a string bytes at different address.

// Can be overloaded in functions with another type to express the compiletimeness between functions:

template <uint64_t id, typename CharT, CharT... tchars>
const overload_resolution_1 & test_overload_resolution(const tackle::tmpl_basic_string<id, CharT, tchars...> &);
template <typename CharT>
const overload_resolution_2 & test_overload_resolution(const tackle::constexpr_basic_string<CharT> &);

// , where `constexpr_basic_string` is another approach which loses
//   the compiletimeness between function signature and body border,
//   because even in a `constexpr` function the compile time argument
//   looses the compiletimeness nature and becomes a runtime one. 
```

`constexpr`关于函数编译时边界的详细信息： [https ://www.boost.org/doc/libs/1_65_0/libs/hana/doc/html/index.html#tutorial-appendix-constexpr](https://www.boost.org/doc/libs/1_65_0/libs/hana/doc/html/index.html#tutorial-appendix-constexpr)

有关其他使用详细信息，请参阅测试。

**整个项目目前处于试验阶段。**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-04T08:48:06.613

@smilingthax 的解决方案可以通过使用更短`std::index_sequence`：

```
template<char...>
struct Str {};

template<class T, size_t... Is>
[[nodiscard]] constexpr auto helper(std::index_sequence<Is...>) {
    return Str<T{}.chars[Is]...>{};
}

#define STR(str)                                                          \
    [] {                                                                  \
        struct Temp {                                                     \
            const char* chars = str;                                      \
        };                                                                \
        return helper<Temp>(std::make_index_sequence<sizeof(str) - 1>{}); \
    }() 
```

甚至更短：

```
template<char...>
struct Str {};

#define STR(str)                                   \
    []<size_t... Is>(std::index_sequence<Is...>) { \
        return Str<str[Is]...>{};                  \
    }                                              \
    (std::make_index_sequence<sizeof(str) - 1>{}) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-04T11:23:58.790

改编自#QuarticCat 的回答

```
template <char...>
struct Str
{
};

#define STRNAME(str) _constexpr_string_type_helper_##str
#define STR(str)                                                     \
    auto STRNAME(str) = []<size_t... Is>(std::index_sequence<Is...>) \
    {                                                                \
        constexpr char chars[] = #str;                               \
        return Str<chars[Is]...>{};                                  \
    }                                                                \
    (std::make_index_sequence<sizeof(#str) - 1>{});                  \
    decltype(STRNAME(str)) 
```

[完整代码在这里](https://godbolt.org/z/jqcssn)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-03-04T12:36:04.177

非 lambda 版本，使用 std::min 和 sizeof。
购买**字符串的长度限制为**256。
这可以用于未评估的**上下文中**，例如 decltype 或 sizeof。
我使用邮票宏来减少代码大小。

```
#include <type_traits>
#include <utility>

template <char...>
struct Str
{
};

namespace char_mpl
{

constexpr auto first(char val, char...)
{
    return val;
}
constexpr auto second(char, char val, char...)
{
    return val;
}

template <class S1, class S2>
struct Concat;

template <char... lefts, char... rights>
struct Concat<Str<lefts...>, Str<rights...>>
{
    using type = Str<lefts..., rights...>;
};

template <size_t right_count, class Right>
struct Take;

template <template <char...> class Right, char... vals>
struct Take<0, Right<vals...>>
{
    using type = Str<>;
};

template <template <char...> class Right, char... vals>
struct Take<1, Right<vals...>>
{
    using type = Str<first(vals...)>;
};

template <template <char...> class Right, char... vals>
struct Take<2, Right<vals...>>
{
    using type = Str<first(vals...), second(vals...)>;
};

template <size_t lhs, size_t rhs>
concept greater = lhs > rhs;

// this may be improved for speed.
template <size_t n, char left, char... vals>
requires greater<n, 2> struct Take<n, Str<left, vals...>>
{
    using type =
        Concat<Str<left>,                              //
               typename Take<n - 1, Str<vals...>>::type//
               >::type;
};

};// namespace char_mpl

template <int length, char... vals>
struct RawStr
{
    constexpr auto ch(char c, int i)
    {
        return c;
    }

    constexpr static auto to_str()
    {
        return
            typename char_mpl::Take<length,
                                    Str<vals...>>::type{};
    }
};

#define STAMP4(n, STR, stamper)                            \
    stamper(n, STR) stamper(n + 1, STR)                    \
        stamper(n + 2, STR) stamper(n + 3, STR)
#define STAMP16(n, STR, stamper)                           \
    STAMP4(n, STR, stamper)                                \
    STAMP4(n + 4, STR, stamper)                            \
    STAMP4(n + 8, STR, stamper)                            \
    STAMP4(n + 12, STR, stamper)
#define STAMP64(n, STR, stamper)                           \
    STAMP16(n, STR, stamper)                               \
    STAMP16(n + 16, STR, stamper)                          \
    STAMP16(n + 32, STR, stamper)                          \
    STAMP16(n + 48, STR, stamper)
#define STAMP256(n, STR, stamper)                          \
    STAMP64(n, STR, stamper)                               \
    STAMP64(n + 64, STR, stamper)                          \
    STAMP64(n + 128, STR, stamper)                         \
    STAMP64(n + 192, STR, stamper)

#define STAMP(n, STR, stamper) stamper(STAMP##n, STR, n)

#define CH(STR, i) STR[std::min<size_t>(sizeof(STR) - 1, i)]

#define CSTR_STAMPER_CASE(n, STR) CH(STR, n),

#define CSTR_STAMPER(stamper, STR, n)                      \
    RawStr<sizeof(STR) - 1,                                \
           stamper(0, STR, CSTR_STAMPER_CASE)              \
               CH(STR, 256)>

#define CSTR(STR) (STAMP(256, STR, CSTR_STAMPER){}).to_str()

int main()
{
    constexpr auto s = CSTR("12345");
    decltype(CSTR("123123"));
    sizeof(CSTR("123123"));
    static_assert(
        std::is_same_v<
            Str<'1'>,
            std::remove_cvref_t<decltype(CSTR("1"))>>);
    static_assert(
        std::is_same_v<
            Str<'1', '2'>,
            std::remove_cvref_t<decltype(CSTR("12"))>>);
    static_assert(
        std::is_same_v<
            Str<'1', '2', '3', '4', '5'>,
            std::remove_cvref_t<decltype(CSTR("12345"))>>);
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-16T04:12:50.860

您正在寻找的是**[N3599 字符串的文字运算符模板](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3599.html)**。它是在 2013 年为 C++ 提出的，但在细节上[没有达成共识](https://groups.google.com/a/isocpp.org/g/std-proposals/c/YtIPoZ4ESMI)，也从未添加到标准中。

但是，GCC 和 Clang 支持它作为扩展。它允许您将字符串文字拆分为字符的模板参数包：

```
// some template type to represent a string
template <char... chars>
struct TemplateString {
    static constexpr char value[] = { chars... };

    template <char... chars2>
    constexpr auto operator+(TemplateString<chars2...>) const {
        // compile-time concatenation, oh yeah!
        return TemplateString<chars..., chars2...>{};
    }
};

// a custom user-defined literal called by the compiler when you use your _suffix
template <typename CharType, CharType... chars>
constexpr auto operator""_tstr () {
    // since all the chars are constants here, you can do compile-time
    // processing with constexpr functions and/or template metaprogramming,
    // and then return whatever converted type you like
    return TemplateString<chars...>{};
}

// auto = TemplateString<'H', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd', '!'>
constexpr auto str = "Hello"_tstr + " world!"_tstr;
cout << str.value << endl; 
```

作为后备，使用宏的技巧可以将您带到同一个地方（例如，如[Smilethax 的答案](https://stackoverflow.com/a/38081690)所示）。

请注意，这是接受字符串文字并将其拆分为 constexpr 字符的***仅有***的两种方法：要么使用扩展，要么在调用站点使用宏骇客。

# javascript - setTimeout 从另一个函数为函数提供参数

> ID：15858144
> 
> 赞同：0
> 
> 时间：2013-04-07T02:10:41.987
> 
> 标签：javascript, function

遇到问题，不知道如何给 ClickSimClick 函数公开的 ClickSimClick 函数参数（它返回具有 2 个值的数组）。

下面的代码表明 crd 在 setTimeout 上未定义。

```
var crd = plugin().ClickSimMove();
setTimeout("plugin().ClickSimClick(crd[0], crd[1])", 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:13:14.447

传递一个函数，而不是一个字符串：

```
var crd = plugin().ClickSimMove();
setTimeout(function() {
    plugin().ClickSimClick(crd[0], crd[1]);
}, 1000); 
```

当您传递一个字符串时，它会像`eval`在全局范围内一样被评估，失去对局部变量的所有访问权限。匿名函数允许您引用范围内的任何变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:13:18.130

```
var crd = plugin().ClickSimMove();
setTimeout(function(){
  plugin().ClickSimClick(crd[0], crd[1]);
}, 1e3); 
```

尽可能避免将字符串发送到`setTimeout`/ --`setInterval`使用匿名函数。特别是如果您发现自己连接变量来创建该字符串，您可能会很快遇到某种注入或格式错误的组件的麻烦。

# iphone - 游戏中心同时转弯

> ID：15858146
> 
> 赞同：2
> 
> 时间：2013-04-07T02:11:09.610
> 
> 标签：iphone, ios, objective-c, xcode, game-center

我是 iOS 新手（虽然我确实有很多 C++ 经验），我正在使用 gamecenter 开发一款基于回合的纸牌游戏。这是关键 - 轮到的玩家是裁判，等待所有其他玩家在回合结束前打出一张牌。有没有办法在 Game Center 中做到这一点，让所有玩家同时选择要做什么，一旦所有人都这样做了，裁判就会收到通知，做出决定，然后将优先权传递给下一个玩家？例如，假设我们从第 1 回合开始。我问这个问题，@“你最喜欢的颜色是什么？” 给所有向他们传递一个游戏状态的玩家，该游戏状态有这个问题并且他们没有回答它。然后你回复@“Green”，我们的朋友史蒂夫回复@“Blue”。然后我决定哪个更好，给你们一个分数，然后，无论我给出的观点是谁，都会成为新的法官。我的问题是，我如何让所有玩家同时响应，而不是依次响应。我知道，在最坏的情况下，我可以依次循环播放玩家，直到它返回给我，然后判断它，但这会减慢我的游戏速度并降低它的乐趣。有没有办法同时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T02:37:07.490

我同意 NSSplendid 关于需要顺序回合的回合制游戏的 API。唯一真正同步的方法是使用来自 GKMatch 的实时比赛，而对于多人游戏来说，这并不是一个真正的选择。

但是，通过使用游戏中心的编程方法而不是默认视图控制器，可以稍微改进顺序版本。

结束回合会通过 Game Center 触发推送通知，并且通过使用 GKTurnBasedEventHandler 的方法 handleTurnEventForMatch:didBecomeActive:，您可以在您的应用程序中收到该通知。当法官提出问题时，让用户将其显示为游戏的一部分，并将他们的回答存储在本地，直到轮到他们为止。一旦轮到给定的玩家，他们就会收到通知，即使应用程序在后台。

在该方法中，它可以检查本地存储的答案，如果他们已经回答，则立即结束回合。如果他们没有，则在答案完成后发送回合。这并不是真正同时发生的，但只要每个人都做出回应，裁判就会得到答案，而玩家不必等待一名玩家完成后才能输入自己的答案。

玩家在打开应用程序之前不会收到裁判结束轮到的通知，但如果不这样做，他们无论如何都看不到问题。另一种方法虽然有点浪费，但在裁判结束他们的回合后，他们会在所有玩家收到“轮到你”的通知后立即结束他们的回合，这样每个人都知道一个问题被问到，然后执行前两段中的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T10:50:11.713

iOS API 是围绕顺序转弯模型构建的。虽然您提到的解决方法可行，但没有办法让 GC 进行*真正的*并发轮次。对不起 ）：

# java - 使用 zip 压缩保存 BufferedImage

> ID：15858153
> 
> 赞同：0
> 
> 时间：2013-04-07T02:13:13.743
> 
> 标签：java, zip, bufferedimage

我将如何将 BufferedImage 直接保存到 zip 文件中。

这是我当前用于将 BufferedImage 保存到 zip 文件的代码，但我不知道如何将 BufferedImage 转换为 InputStream 以便可以将其保存到 zip 文件中。

如果可能的话，我需要直接从 RAM 中保存 BufferedImage 而不先将其保存到 HDD

```
byte[] buffer = new byte[1024];
try
{

    FileOutputStream outputStream = new FileOutputStream(PathName + imageData.getFileNumber() + ".zip");
    ZipOutputStream zipOutputStream = new ZipOutputStream(outputStream);
    ZipEntry imageZipOutput = new ZipEntry(imageData.getFileNumber() + ".png");
    zipOutputStream.putNextEntry(imageZipOutput);

    //the BufferedImage is stored in imageData.getImage();
    //how would I parse the BufferedImage to the InputStream below without saving the png first but straight from RAM
    InputStream in = new InputStream();

    int len;
    while ((len = in.read(buffer)) > 0)
    {
        zipOutputStream.write(buffer, 0, len);
    }

    in.close();
    zipOutputStream.closeEntry();

    zipOutputStream.close();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T02:28:00.607

用于`ImageIO.write(RenderedImage im,String formatName, OutputStream output)`写入输出。为 OutputStream 参数传递 a `ZipOutputStream`。

查看[此](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.OutputStream%29)页面了解更多信息。

# c# - Linq to Objects Sum to List

> ID：15858161
> 
> 赞同：0
> 
> 时间：2013-04-07T02:14:00.947
> 
> 标签：c#, linq, linq-to-objects

我正在设计一种方法，该方法接受 a`List<Bar>`并返回`<List>BarGroup`，按`Bar.barName`. 我的猜测是我需要将 Aggregate 与 List.Add 一起使用，但我对 lambdas 和 Linq 的语法相当陌生！

到目前为止我的代码：

```
public class BarGroup
{
   public string barName;
   public List<Bar> barList;
}

public class Bar
{
   public string barName;
   public string fooDetails;

   public Bar(string b, string f)
   {
       this.barName = b;
       this.fooDetails = f;
   }
}

void Main()
{
    Bar bar1 = new Bar("BarGroup1","Bar1");
    Bar bar2 = new Bar("BarGroup1","Bar2");
    Bar bar3 = new Bar("BarGroup2", "Bar3");
    Bar bar4 = new Bar("BarGroup2", "Bar4");

    List<Bar> bars = new List<Bar> { bar1, bar2, bar3, bar4 };

    var barGrouped = from b in bars
                group b by b.barName into g
                select new BarGroup()
                {
                    barName = g.Key, 
                    barList = bars
                };

    Console.WriteLine(barGrouped);
} 
```

当我在 LinqPad 中尝试此操作时，我得到以下结果：

```
IEnumerable<BarGroup> (2 items)
barName     barList 
BarGroup1   List<Bar> (4 items)
            barName    fooDetails 
            BarGroup1  Bar1 
            BarGroup1  Bar2 
            BarGroup2  Bar3 
            BarGroup2  Bar4 

BarGroup2   List<Bar> (4 items)
            barName    fooDetails 
            BarGroup1  Bar1 
            BarGroup1  Bar2 
            BarGroup2  Bar3 
            BarGroup2  Bar4 
```

但我正在寻找的是以下内容：

```
IEnumerable<BarGroup> (2 items)
barName     barList 
BarGroup1   List<Bar> (4 items)
            barName    fooDetails 
            BarGroup1  Bar1 
            BarGroup1  Bar2 

BarGroup2   List<Bar> (4 items)
            barName    fooDetails 
            BarGroup2  Bar3 
            BarGroup2  Bar4 
```

我认为 Linq 是此类拆分的最佳选择，但我对完成相同任务的任何其他方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:18:52.917

尝试

```
var barGrouped = from b in bars
            group b by b.barName into g
            select new BarGroup()
            {
                barName = g.Key, 
                barList = g.ToList()
            }; 
```

该组是`IEnumerable<Bar>`满足分组标准的。bar 是原始集合，这就是为什么在您的 BarGroups 中获得所有项目的原因。

# database - 在 Slick 中声明表

> ID：15858168
> 
> 赞同：0
> 
> 时间：2013-04-07T02:15:27.123
> 
> 标签：database, scala, static, slick

尝试在 Slick 中进行多对多关系时，我遇到了错误。这个[测试](https://github.com/slick/slick/commit/01251edbc7f970f29f3a471d7eee27460e6846cf#src/test/scala/scala/slick/test/ql/ForeignKeyTest.scala)展示了如何在 Slick 中建立多对多关系。我跟着它，但后来出现这个错误：

```
 Select(TableNode, "id") found. This is typically caused by an attempt to use a "raw" table object directly in a query without introducing it through a generator 
```

然后我发现这是由于在静态位置（对象）声明您的表然后尝试导入它（如果对象在同一个块中它工作正常）。[http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#tables](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#tables)

好的，所以`val T = new Table`里面`object`是答案。但现在我收到了这个错误：

```
recursive method bs needs result type 
```

`object`如果它是 a而不是 a则不需要结果类型`val`。我听说过使用 a`class`但我找不到任何有关如何执行此操作的示例。

你如何声明多对多模型并从其他地方导入它们？

编辑：这是一个要点，说明我的意思：[https ://gist.github.com/pjrt/5332311](https://gist.github.com/pjrt/5332311)

如果您运行第一个测试，它将通过，没有问题。

如果您运行第二个测试，则会引发以下错误：

```
scala.slick.SlickException: Select(TableNode, "id") found. This is typically caused by an attempt to use a "raw" table object directly in a query without introducing it through a generator. 
```

如果您运行第三个测试（使用对象内部的 vals 而不是直接使用对象），您会收到以下错误：

```
recursive method bs needs result type
[error]   val A = new Table[(Int, String)]("a") {

recursive value AToB needs type
[error]     def as = AToB.filter(_.bId === id).flatMap(_.aFK) 
```

我知道为什么会发生错误，但我想知道人们是如何绕过它们的。一种方法是将对象放在一个类中，并在每次你想使用 Slick 时实例化一个类（但这似乎......很奇怪）。另一个是永远不要在包之外使用与 Slick 相关的东西（或者至少是多对多的东西），但这似乎也很糟糕。

我的问题仍然是，你们如何解决这个问题？有正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:28:02.343

您显示的错误消息让我认为您定义了表格，但尝试直接访问它们而不是使用 for comprehension。

[您所指](https://github.com/slick/slick/blob/01251edbc7f970f29f3a471d7eee27460e6846cf/src/test/scala/scala/slick/test/ql/ForeignKeyTest.scala)的测试文件在定义多对多表之后在底部有一个示例，如下所示

```
val q1 = for {
  a <- A if a.id >= 2
  b <- a.bs
} yield (a.s, b.s)
q1.foreach(x => println("  "+x))
assertEquals(Set(("b","y"), ("b","z")), q1.list.toSet) 
```

你看到的是对象表`A`被用作理解生成器（即`a <- A`）

您的代码是否以其他方式访问表？

# python - Python中矩形图形的按键控制（休闲娱乐）

> ID：15858169
> 
> 赞同：0
> 
> 时间：2013-04-07T02:16:23.980
> 
> 标签：python, python-3.x, pygame

当我运行这个程序时，我只能将桨向左移动。我需要能够在两个方向上移动它（在 x 平面上，也就是左右），而不必重写整个程序。对不起，如果答案很简单，我只是错过了一些东西。

# 程序

```
import pygame

black = ( 0, 0, 0)
white = ( 255, 255, 255)
green = ( 0, 255, 0)
red = ( 255, 0, 0)

rect_x = 350
rect_y = 250

pad_x = 350
pad_y = 480

rect_change_x = 1
rect_change_y = 1

pad_x_c = 0

pygame.init()

size=[700,500]
screen=pygame.display.set_mode(size)

pygame.mouse.set_visible(0)

pygame.display.set_caption("Breakout Recreation WIP")

done=False

clock=pygame.time.Clock()
# -------- Main Program Loop -----------
while done==False:
    # ALL EVENT PROCESSING SHOULD GO BELOW THIS COMMENT
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        keys = pygame.key.get_pressed()  #checking pressed keys
        if keys[pygame.K_LEFT]:
            pad_x_c -= 2
        if keys[pygame.K_RIGHT]:
            pad_x_c += 2  
        else :
            pad_x_c = 0
    # ALL EVENT PROCESSING SHOULD GO ABOVE THIS COMMENT
    # ALL GAME LOGIC SHOULD GO BELOW THIS COMMENT
    # ALL GAME LOGIC SHOULD GO ABOVE THIS COMMENT
    # ALL CODE TO DRAW SHOULD GO BELOW THIS COMMENT
    # First, clear the screen to white. Don't put other drawing commands
    # above this, or they will be erased with this command.
    screen.fill(black)
    # Draw the rectangle
    pygame.draw.rect(screen,white,[rect_x,rect_y,15,15])
    pygame.draw.rect(screen,white,[pad_x,pad_y,50,10])
    # Move the rectangle starting point
    rect_x += rect_change_x
    rect_y += rect_change_y
    pad_x += pad_x_c
    # Bounce the ball if needed
    if rect_y > 480 or rect_y < 10:
        rect_change_y = rect_change_y * -1
    if rect_x > 680 or rect_x < 5:
        rect_change_x = rect_change_x * -1    
    if pad_x <= 5 :
        pad_x_c = 0
    if pad_x >= 645 :
        pad_x_c = 0
    # ALL CODE TO DRAW SHOULD GO ABOVE THIS COMMENT

    pygame.display.flip()

    clock.tick(100)

pygame.quit () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:31:02.683

在您的代码中，该`else`块仅在`keys[pygame.K_RIGHT]`为 0 时执行，而不是在两种情况均不发生时执行。

```
 if keys[pygame.K_LEFT]:
        pad_x_c -= 2

    if keys[pygame.K_RIGHT]:
        pad_x_c += 2  
    else:
        pad_x_c = 0 
```

一个`elif`语句解决了这个问题：

```
 if keys[pygame.K_LEFT]:
        pad_x_c -= 2
    elif keys[pygame.K_RIGHT]:
        pad_x_c += 2  
    else:
        pad_x_c = 0 
```

# javascript - 意外的令牌）javascript

> ID：15858170
> 
> 赞同：0
> 
> 时间：2013-04-07T02:16:37.490
> 
> 标签：javascript

我的程序应该创建一个包含 9 名玩家的团队。我想我做的都是正确的。我认为问题出在 show_teams() 函数中。它说我有一个意外的令牌）。它说它位于按钮 show_teams()，但我认为它确实包含在实际方法中。

我在这里发布了我的代码。正确的链接我很抱歉。 [http://pastebin.com/t7KbgmPD](http://pastebin.com/t7KbgmPD)

我真的不确定我做错了什么。我是输出东西的新手，但我只是写了所有其他代码，我不相信那里有任何错误。

谢谢

我用修复更新了代码。还是有不好的问题。我想我实现了这个错误，我将重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:19:07.313

对不起，这是过去的斌。然而：

```
 <input type="button"
       onclick="createTeam(this.form.name.value"
       value="Create Team"
    /> 
```

在中的那个调用中添加一个括号，`onclick`你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:19:29.463

在线 98

```
for (var p = 0; p < teams[i].players.lenth; p++) { 
```

有一个错字 -`lenth`应该是`length`

在第 140 行， - 缺少右括号

`createTeam(this.form.name.value)`

要检测 javascript 错误等，您可以使用[jslint等在线工具进行验证](http://www.jslint.com/)

# asp.net-mvc - 处理多个 aiax 请求和响应的最佳方式是什么？

> ID：15858175
> 
> 赞同：0
> 
> 时间：2013-04-07T02:17:17.313
> 
> 标签：asp.net-mvc, jquery

我有一个使用 VB.NET MVC 作为服务器端代码的 Web 应用程序。我设置了客户端 JavaScript 以轻松地向服务器控制器功能发送和接收数据。基本上，我所做的是创建一个 JavaScript“请求”对象，该对象使用 Ajax 调用控制器函数并传入参数。我让 MVC 为我完成所有的序列化。然后控制器函数返回一个 JSON，通常带有一个 HTML 块作为字符串。由于我在一个地方处理所有 ajax 调用，所以我想不出一种处理响应的好方法。当 ajax 响应返回时，我无法知道它来自哪个请求。该网站有很多事情要做，因此所有响应都需要以不同的方式处理，并且都返回不同的数据。

现在我所做的是在控制器函数中我将一些键与 HTML 块一起发回，然后在 ajax 完成函数中检查所有这些特定键。这样做会使 javascript 代码难以管理。

```
var postData =  { id=0 };
 $.ajax({
   type: "POST",
   url: "/Controller/Action/"
   data: postData
}).done(function (data) {
   if (data.Foo) {
    Foo(data);
   } else if(data.Bar) }
    Bar(data);
   }
}); 
```

我无法对此进行研究，因为我不知道要查找哪些关键字。我想我会尝试做一些事情，在 ajax done 函数中动态调用函数名，但我想知道是否有任何现有的库或代码示例可以执行像这样的更大规模的 ajax 请求函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:57.697

也许问题来自“在一个地方做所有事情”的想法。我可以想象，一旦您`if...else if...`在一种方法中链接了 40 个代码，维护您的代码将非常困难。也许把事情分开一点也不会有什么坏处。

无论如何，按照您想要的方式进行操作的一种方法是不传递密钥，而是将 javascript 函数的名称作为委托传递。然后打`window[data.funcName](data);`进来 `done()`。

说你的 json 是

```
{
    foo: "bar",
    funcName: "DoMyFoo"
} 
```

这就是您的通话的样子：

```
var postData =  { id=0 };
 $.ajax({
   type: "POST",
   url: "/Controller/Action/"
   data: postData
}).done(function (data) {
   window[data.funcName](data);
});

function DoMyFoo(d){
    //Do your specific stuff here
    alert(d.foo);
} 
```

请参阅此问题[How to execute a JavaScript function when I have its name as a string](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string) for info and examples。

**编辑**：如果您的函数位于对象实例而不是全局命名空间中，例如`obj`，您可以使用相同的方式调用它`obj['myFunction'](args)`

# asp.net-mvc - 多对多关系脚手架视图生成错误_id1

> ID：15858182
> 
> 赞同：0
> 
> 时间：2013-04-07T02:19:02.267
> 
> 标签：asp.net-mvc, many-to-many

我正在处理的应用程序在创建模型实例时生成错误。我有产品和颜色（多对多）和 ProductImage（很多 ProductImage 到 ProductColor）。

```
public partial class ProductColor
{
    public ProductColor()
    {
        this.ProductImages = new HashSet<ProductImage>();
    }
    public int Id { get; set; }
    [DefaultValue(0),DisplayName("Price Offset")]
    public Decimal PriceOffset { get; set; }
    public int ProductId { get; set; }
    public int ColorId { get; set; }

    public virtual Color Color { get; set; }
    public virtual Product Product { get; set; }
    public virtual ICollection<ProductImage> ProductImages { get; set; }
}

public partial class ProductImage
{
    public int Id { get; set; }
    [DisplayName("File name"),
      Required(),
      StringLength(255)]
    public string FileName { get; set; }
    public bool Default { get; set; }
    public int ProductColor_Id { get; set; }

    public virtual ProductColor ProductColor { get; set; }
}

public class testContext : DbContext
{
    public testContext() : base("name=testContext")
    {
    }
    public DbSet<Product> Products { get; set; }
    public DbSet<Manufacturer> Manufacturers { get; set; }
    public DbSet<ProductColor> ProductColors { get; set; }
    public DbSet<Color> Colors { get; set; }
    public DbSet<ProductImage> ProductImages { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Product>()
            .HasMany(c => c.ProductColors);
    }    
} 
```

在为 ProductImage 搭建控制器和视图并转到 ProductImage 的索引后，尝试从数据库上下文中获取 ProductImages 时出现错误。难怪实体决定应该使用以下 sql 来获取实例：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[FileName] AS [FileName], 
[Extent1].[Default] AS [Default], 
[Extent1].[ProductColor_Id] AS [ProductColor_Id], 
[Extent1].[ProductColor_Id1] AS [ProductColor_Id1]
FROM [dbo].[ProductImages] AS [Extent1] 
```

数据库中不存在 ProductColor_Id1。这是创建表的sql：

```
CREATE TABLE [dbo].[ProductColors] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [PriceOffset] decimal(7,2)  NOT NULL,
    [ProductId] int  NOT NULL,
    [ColorId] int  NOT NULL
);
CREATE TABLE [dbo].[ProductImages] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [FileName] nvarchar(255)  NOT NULL,
    [Default] bit  NOT NULL,
    [ProductColor_Id] int  NOT NULL
);
ALTER TABLE [dbo].[ProductColors]
ADD CONSTRAINT [PK_ProductColors]
    PRIMARY KEY CLUSTERED ([Id] ASC);
ALTER TABLE [dbo].[ProductColors]
ADD CONSTRAINT [FK_ProductColorColor]
    FOREIGN KEY ([ColorId])
    REFERENCES [dbo].[Colors]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
CREATE INDEX [IX_FK_ProductColorColor]
ON [dbo].[ProductColors]
    ([ColorId]);
ALTER TABLE [dbo].[ProductColors]
ADD CONSTRAINT [FK_ProductColorProduct]
    FOREIGN KEY ([ProductId])
    REFERENCES [dbo].[Products]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
CREATE INDEX [IX_FK_ProductColorProduct]
ON [dbo].[ProductColors]
    ([ProductId]);
ALTER TABLE [dbo].[ProductImages]
ADD CONSTRAINT [FK_ProductColorProductImage]
    FOREIGN KEY ([ProductColor_Id])
    REFERENCES [dbo].[ProductColors]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
CREATE INDEX [IX_FK_ProductColorProductImage]
ON [dbo].[ProductImages]
    ([ProductColor_Id]); 
```

该数据库是从实体图生成的，对我来说看起来不错。我不知道为什么在创建 ProductImage 时在 select 语句中添加了 ProductColor_Id1。

希望提供足够的信息，这是一个很容易解决的一般错误。感谢您阅读本文，希望您能提供帮助。

我希望脚手架控制器和视图能够在列出、创建、编辑和删除 ProdcutImage 对象时工作，但因为它甚至不可能使用提供给实体的信息来创建一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:26:36.777

在实体图中删除并重新创建关联后，我最终得到了具有 ProductColorId 而不是 ProductColor_Id 的 ProductImage。

不太确定我做了什么不同（可能检查了图中的“将外键属性添加到 ProductImage 实体”。

从图表重新创建数据库并从数据库重新创建模型类（用于另一个项目）。ProductImage 现在看起来像这样：

```
public partial class ProductImage
{
    public int Id { get; set; }
    [DisplayName("File name"),
      Required(),
      StringLength(255)]
    public string FileName { get; set; }
    public bool Default { get; set; }
    public int ProductColorId { get; set; }

    public virtual ProductColor ProductColor { get; set; }
} 
```

据我所知，唯一的区别是 ProductColerId，必须是实体中的约定才能以这种方式指定关系。

在图表中工作时的提示：

在一对多的情况下，首先单击一侧（在我的情况下，一个 ProductColor 有多个 ProductImage，所以我右键单击 ProductColor）。Then when choosing add new => association it automatically sets ProductColor (the clicked item) to one. 现在在右侧设置多关系将自动选中“添加外键”复选框。

如果我要先单击多面（右键单击 ProductImage）。然后将左侧下拉列表更改为多个，右侧选择 ProductColor，其中一个用于多重性，然后需要手动检查“添加外键”复选框。

# javascript - Javascript 函数将焦点（）放在下一个表单元素上不起作用

> ID：15858188
> 
> 赞同：2
> 
> 时间：2013-04-07T02:19:56.473
> 
> 标签：javascript, html, forms

啊。我写了一个简单的 HTML 页面，上面有一个表格来输入电话号码。我放入了一个 Javascript 函数，一旦填满，焦点就会跳转到下一个表单框。一切似乎都很完美。

但是，由于某种原因，它不起作用。我不明白为什么，因为我创建了一个几乎相同的文件，只有表单和函数并且它可以工作！所以这个特定文件中的某些东西阻止了它，但经过 30 分钟的修补，我无法弄清楚是什么。

```
<html>
        <head>
            <script type="text/javascript">
                function moveToNext(curr, next) {
                    if(curr.value.length == curr.getAttribute("maxlength"))
                        next.focus();
                }
            </script>
            <title> Enter Phone Number </title>
            <style type="text/css">
                #content {
                    background:url(images/content-bg-rpt.gif) repeat;
                    margin: 0 auto;
                    height: 300px;
                    width: 500px;
                }
                #formArea {

                    margin-top: 50px;
                    width: 250px;
                    margin-left: auto;
                    margin-right: auto;
                }
                #submit {
                    position: relative;
                }
                .formInput { /* These are the input styles used in forms */
                    background: #f7f7f7 url(../img/input.gif) repeat-x;
                    border: 1px solid #d0d0d0;
                    margin-bottom: 6px;
                    color: #5f6c70;
                    font-size: 16px;
                    font-weight: bold;
                    padding-top: 11px;
                    padding-bottom: 11px;
                    padding-left: 11px;
                }
            </style>
        </head>

        <body>
            <div id="container">
                <div id="content">
                    <div id="formArea">
                        <form name="enterPhone" id="enterPhone" action="phoneresult.php" method="GET">
                            <input onkeyup="moveToNext(this, document.enterPhone.d345.formInput))" type="text" class="formInput" maxlength="3" size="3" name="d012" id="d012"></input>
                            <input onkeyup="moveToNext(this, document.enterPhone.d345))" type="text" name="d345" class="formInput" maxlength="3" size="3"  id="d345"></input>
                            <input type="text" class="formInput" maxlength="4" size="4" name="d6789"></input>
                            <input id="submit" value="Enter" type="submit"></input>
                        </form>
                    </div>
                </div>
            </div>
        </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:26:36.617

两件事情：

1.  对于每个左括号，您只需要一个右括号。您输入的`onkeyup`属性有两个右括号和一个左括号。
2.  直接传递 HTML 元素，而不是`.formInput`.

这为我解决了这两个问题：

```
<input onkeyup="moveToNext(this, document.enterPhone.d345)" type="text" class="formInput" maxlength="3" size="3" name="d012" id="d012"></input>
<input onkeyup="moveToNext(this, document.enterPhone.d6789)" type="text" name="d345" class="formInput" maxlength="3" size="3"  id="d345"></input> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:28:06.403

使用此**[jsFiddle 示例修复了您的代码](http://jsfiddle.net/j08691/vTde7/1)**

**HTML**

```
<div id="container">
    <div id="content">
        <div id="formArea">
            <form name="enterPhone" id="enterPhone" action="phoneresult.php" method="GET">
                <input onkeyup="moveToNext(this, document.getElementsByName('d345'))" type="text" class="formInput" maxlength="3" size="3" name="d012" id="d012"></input>
                <input onkeyup="moveToNext(this, document.getElementsByName('d6789'))" type="text" name="d345" class="formInput" maxlength="3" size="3" id="d345"></input>
                <input type="text" class="formInput" maxlength="4" size="4" name="d6789"></input>
                <input id="submit" value="Enter" type="submit"></input>
            </form>
        </div>
    </div>
</div> 
```

**JavaScript**

```
function moveToNext(curr, next) {
    if (curr.value.length == parseInt(curr.getAttribute("maxlength"), 10)) next[0].focus();
} 
```

`curr.value.length == curr.getAttribute("maxlength")`在您的 JS 中，您在整数和字符串 ( )之间进行比较。在您的 HTML 中，您没有使用`document.enterPhone.d345.formInput`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:34:43.540

试试这个：

**JS**

```
function moveToNext(curr, next) {
    if (curr.value.length >= curr.maxLength) {
        document.getElementById(next).focus();
    }
} 
```

**HTML**

```
<form name="enterPhone" id="enterPhone" action="phoneresult.php" method="GET">
    <input onkeyup="moveToNext(this, 'd345')" type="text" class="formInput" maxlength="3" size="3" name="d012" id="d012"/>
    <input onkeyup="moveToNext(this, 'd6789')" type="text" name="d345" class="formInput" maxlength="3" size="3" id="d345"/>
    <input type="text" class="formInput" maxlength="4" size="4" name="d6789" id="d6789"/>
    <input id="submit" value="Enter" type="submit"/>
</form> 
```

[http://jsfiddle.net/JZxPR/](http://jsfiddle.net/JZxPR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T03:03:30.097

试试这个，用下面的代码替换三个输入标签：

```
<input onkeyup="moveToNext(this, document.enterPhone.d345)" type="text" class="formInput" maxlength="3" size="3" name="d012" id="d012"></input>
<input onkeyup="moveToNext(this, document.enterPhone.d6789)" type="text" name="d345" class="formInput" maxlength="3" size="3"  id="d345"></input>
<input type="text" class="formInput" maxlength="4" size="4" name="d6789" id="d6789"></input> 
```

# python - 如何在 matplotlib 中为子图设置 xlim 和 ylim

> ID：15858192
> 
> 赞同：232
> 
> 时间：2013-04-07T02:20:54.660
> 
> 标签：python, matplotlib, plot

我想限制 matplotlib 中特定子图的 X 和 Y 轴。子图本身没有任何轴属性。例如，我想仅更改第二个图的限制：

```
import matplotlib.pyplot as plt
fig=plt.subplot(131)
plt.scatter([1,2],[3,4])
fig=plt.subplot(132)
plt.scatter([10,20],[30,40])
fig=plt.subplot(133)
plt.scatter([15,23],[35,43])
plt.show() 
```

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2013-04-07T02:33:37.913

您应该使用 matplotlib 的 OO 接口，而不是状态机接口。几乎所有的`plt.*`功能都是基本上做的瘦包装器`gca().*`。

[`plt.subplot`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.subplot)返回一个[`axes`](http://matplotlib.org/api/axes_api.html)对象。一旦你引用了轴对象，你就可以直接绘制它，更改它的限制等。

```
import matplotlib.pyplot as plt

ax1 = plt.subplot(131)
ax1.scatter([1, 2], [3, 4])
ax1.set_xlim([0, 5])
ax1.set_ylim([0, 5])

ax2 = plt.subplot(132)
ax2.scatter([1, 2],[3, 4])
ax2.set_xlim([0, 5])
ax2.set_ylim([0, 5]) 
```

依此类推，您可以使用任意数量的轴。

或者更好，将它全部包装在一个循环中：

```
import matplotlib.pyplot as plt

DATA_x = ([1, 2],
          [2, 3],
          [3, 4])

DATA_y = DATA_x[::-1]

XLIMS = [[0, 10]] * 3
YLIMS = [[0, 10]] * 3

for j, (x, y, xlim, ylim) in enumerate(zip(DATA_x, DATA_y, XLIMS, YLIMS)):
    ax = plt.subplot(1, 3, j + 1)
    ax.scatter(x, y)
    ax.set_xlim(xlim)
    ax.set_ylim(ylim) 
```

# pdf - 如何解决渲染错误的 PDF 文件

> ID：15858199
> 
> 赞同：1
> 
> 时间：2013-04-07T02:23:55.397
> 
> 标签：pdf

我有一个小的 PDF 文件，它应该只显示字符串“Hello World！”。

不幸的是，它显示黑框而不是字符。我想字体有问题，但我不确定。

有没有办法诊断和解决这个问题？我在互联网上看到的只是做这件事和做那件事的建议，这对某些人有帮助，对其他人没有帮助（对我没有任何帮助）。对我来说，这就像在黑暗中拍摄。

这是一个具体的例子。为什么[这个 PDF](https://docs.google.com/file/d/0B2pbsdBJxJI3WWpHcmdCbk5RN28/edit?usp=sharing)显示黑色方块而不是字符串***Hello World***？

**编辑**

一点上下文。我正在尝试使用该[`wkhtmltopdf`](https://code.google.com/p/wkhtmltopdf/)工具将简单的 HTML 转换为 PDF。这绝对令人沮丧，因为根据互联网搜索，该工具应该可以工作并且做得很好。但是这件事[对我不起作用，我所做的任何事情都不会改变这一点](https://stackoverflow.com/questions/15693520/how-to-convert-a-simple-html-to-pdf-using-wkhtmltopdf)！不幸的是，这个工具似乎是唯一将 HTML 转换为 PDF 的免费工具。这是一个巨大的遗憾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:29:18.510

如果您想查明 PDF 是否有效或有什么问题，您可以采取一些一般步骤：

1) 在 Adob​​e Acrobat 或 Adob​​e Reader 中打开它（在桌面平台上，**而不是**平板设备上）。很长一段时间以来，PDF 格式归 Acrobat 所有，他们的软件处理 PDF 的方式仍然接近黄金标准。但是，有一个警告；Acrobat 在处理 PDF 文件的方式上*非常非常*聪明，它会忽略或主动纠正其他 PDF 引擎可能遇到的一些错误......

2）给自己一个预检工具。这些工具是为图形艺术而发明的，但也有其他应用。流行的例子是 callas pdfToolbox（警告，我隶属于这个供应商！）或您可以在 Adob​​e Acrobat Pro 中找到的“Preflight”插件（实际上也是 callas 技术）。然后专门针对 PDF/A-1b 或 PDF/A-2b 标准进行预检。

最后一点值得更多解释。您应该选择符合 PDF/A 标准的预检配置文件，因为 PDF/A（或用于存档的 PDF）标准非常挑剔。它的目标是确保 PDF 文件在 50 年后仍能以完全相同的方式可读，并确保它测试文件本身和其中不同组件的所有属性。您可能可以忽略您遇到的一些错误（例如，因为其中一些错误与 PDF/A 标识不正确的事实有关）但我不会忽略任何其他错误*，除非*您完全了解他们的意思以及为什么他们不相关。

PS：您可以通过其他方式提供您的测试文件吗？我认为您在问题中共享的文件没用。当我执行“下载”时，我得到一个不包含文本且没有字体的 PDF 文件。你看到的那些矩形就是那个——矩形。所以这个 PDF 渲染得很好——显然是 PDF 生成过程（或者你将文件存储在 Google 文档上的事实——我真的不知道这可能会做什么）很明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T10:52:42.613

除了 David 的提示（首先使用已知良好的查看器，然后使用一些预检工具），检查过程中还有第三个级别：

3) 亲眼检查 PDF，并在文本查看器中使用 PDF 规范（由 Adob​​e[在此处](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)提供）（作为第一印象）和（如果手头问题的原因不是立即可见）然后在PDF 浏览工具（用于深入分析）。

这一步一开始很麻烦，但过了一段时间你就会在 PDF 中学习。

这种 PDF 浏览器工具的一个示例是[RUPS](http://sourceforge.net/projects/itextrups/)，但周围也有其他工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-18T21:12:57.953

> ***'小 PDF 文件应该显示“Hello World!”'***

不正确。您链接到的文件不包含任何可以在屏幕或纸上呈现像素的代码，而人类大脑会将其读取为“Hello World！”。该文件确实只包含导致 12 个黑框的矢量绘图操作。

命令行工具`pdffonts`不指示文件中使用的任何字体：

```
pdffonts so-file-#15858199.pdf 
```

什么仍然可能导致您正在寻找的单词的“渲染”：PDF 中包含的一些矢量或像素绘图代码。要了解这一点，您必须查看 PDF 的低级源代码。

原始文件为 1.570 字节。因此，这项任务看起来并不过分庞大。

> ***“有没有办法诊断和解决这个问题？”***

使用**[qpdf](http://qpdf.sf.net/)**，一个*“对 PDF 文件进行结构性、内容保留转换的命令行程序”*，您可以展开所有包含的流（通常是压缩的）：

```
qpdf --qdf --object-streams=disable so-file-#15858199.pdf qdf-#15858199.pdf 
```

结果文件 ,`qdf-#15858199.pdf`是 3.875 字节。现在在文本编辑器中打开它。PDF 对象编号 第 6 行（第 66-219 行）包含页面的内容。第 123-194 行仅包含运算符`m`(moveto)、`l`(lineto) 和`h`(closepath)。这些行包含 12 组不同的绘图命令，其中每一组代表您在屏幕上渲染或打印在纸上看到的 12 个黑框之一的路径：

```
102.400001 12.8000001 m
268.800004 12.8000001 l
268.800004 179.200002 l
102.400001 179.200002 l
102.400001 12.8000001 l
h 
```

第 196 行包含

```
f 
```

这是实际将黑色填充到迄今为止构造（封闭）路径中的*填充运算符。*其他行（我没有详细分析）中没有任何绘图可能类似于任何字形的形状。

> ***“不幸的是，这个工具似乎是唯一将 HTML 转换为 PDF 的免费工具”***

也不对。

## 1.

假设您的“免费”*与 liberty 一样免费*，那么另一种选择是**[HTMLDOC](https://www.msweet.org/projects.php?Z1)**。

HTMLDOC 不支持可以通过 CSS 分配给您的 HTML 输入的特定字体，但它在将一个或多个 HTML 文档转换为包含章节、页码、页眉和页脚等的单个 PDF 书籍方面做得很好。有关所有可用选项，请参阅[其完整文档](http://www.msweet.org/documentation/project1/HTMLDOC.html#CMDREF)。

## 2.

假设您的“免费”意味着与*beer 一样免费*，那么另一种选择（仅供私人使用）可能是**[PrinceXML](http://www.princexml.com/)**。

PrinceXML 在支持您的 HTML 文档可能使用的几乎所有 CSS 功能方面做得非常好。请参阅[其文档](http://www.princexml.com/doc/9.0/)以及PrinceXML 生成的一些[示例 PDF 文件。](http://www.princexml.com/samples/)

# c# - 尝试打印字符串的前 250 个字符但出现 ArgumentOutOfRangeExecption" 错误

> ID：15858200
> 
> 赞同：0
> 
> 时间：2013-04-07T02:24:02.787
> 
> 标签：c#, entity-framework, listview, linq-to-entities, asp.net-4.5

我将 LINQ 结果绑定到 ListView 并尝试仅打印“概要”列中的前 250 个字符，但是当我尝试使用 Substring 时出现错误：

> System.ArgumentOutOfRangeException：索引和长度必须引用字符串中的位置。参数名称：长度

导致错误的代码是：

```
<%#:Eval("Synopsis").ToString().Substring(0,250)%> 
```

如果我同时删除 ToString 和 Substring，错误就会消失，但会打印整个概要。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:28:24.780

`ArgumentOutOfRangeException`每当您的起始索引或长度超出字符串长度范围时，您都会遇到异常。在您的情况下，我会说该字符串很可能已经少于 250 个字符。您可能想要类似的东西：

`<%#:Eval("Synopsis").ToString().Length > 250 ? Eval("Synopsis").ToString().Substring(0,250) : Eval("Synopsis").ToString()%>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:32:07.233

这意味着概要的长度少于 250 个字符。这可以通过检查字符串的长度是否大于 250 并减少您的请求长度来轻松解决。我不熟悉 LINQ，但这里有一个伪代码解决方案：

```
var length_of_request;

if length of synopsis < 250 then:
     length_of_request = length of synopsis
else:
     length_of_request = 250 
```

然后调用`SubString`with`length_of_request`作为第二个参数。

# asp.net - ASP.Net 中的 SignalR 1.01 集线器：跨页面存储组信息

> ID：15858203
> 
> 赞同：0
> 
> 时间：2013-04-07T02:24:35.987
> 
> 标签：asp.net, signalr, sql-server-2008r2-express

我目前正在构建一个 SignalR 应用程序（使用 ASP.Net MVC4，在带有 SQL Server 2008 R2 Express 的 IIS7 上），用户进入大厅并被分组，然后在不同的页面上进行交互。

Html5 LocalStorage 是任何参与者的要求，因此我可以在客户端存储组信息。

我对与 SignalR 组成员资格相关的应用程序设计有两个问题：

1.  在服务器上存储组成员身份的最佳方式是什么？单例变量、具有组和连接 ID 的数据库或其他不同的东西？对于 SQL Server Express 和大约 100-200 个用户，数据库是否会出现问题？

2.  页面更改期间会发生什么变化和触发？我是否必须手动更新组成员资格，断开/重新连接是否触发，如果是，我可以将这种类型的断开与永久离开的用户区分开来吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:14:42.327

1.  我为此使用[msopentech.redis](https://github.com/MSOpenTech/redis)。一个非常快速的缓存，还可以保留您的数据。（在谷歌上找到了很多信息）你可以使用 bookleeve（signalr 团队也使用它）或 servicestack.redis 来访问它。这样您就不必将其放入静态变量或缓慢的数据库调用中。

2.  随着同一站点上的每个页面更改，您将收到断开连接和连接。connectionID 会有所不同，因此您应该使用某种机制将 connectionid 映射到登录用户并保持它。也就是说，如果您希望能够发送单个消息而不是广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:15:18.400

(1) 如果您打算只为会话持久化组信息，则应考虑在 Hub/Persistent Connection 类中使用静态变量来存储有关组的信息（内存要求允许）。例如，连接 ID 和组之间的字典/映射。请务必注意，在应用程序域重新启动或 Web 农场等情况下，静态数据不会保留。

为避免这种情况，您可以简单地将组信息存储在数据库中，而不必担心在应用程序域重新启动期间丢失它。

您还应该[在 SignalR 解决方案中看到聊天示例](https://github.com/SignalR/Samples)- 它使用静态变量来保存有关不同用户所在聊天室的信息。

（2）如果你从同一个应用的另一个页面建立新的连接，那么连接ID会不同。当您刷新页面时，断开连接事件将触发，您将使用不同的 id 再次连接。在这些情况下，您将需要手动使用应用程序中的会话管理机制将新的连接 ID 映射到用户。

# iphone - 在 ViewDidLoad 上的按钮上应用动画

> ID：15858205
> 
> 赞同：0
> 
> 时间：2013-04-07T02:24:52.353
> 
> 标签：iphone, ios, objective-c, xcode, uiviewanimation

我试图在加载视图时在按钮上制作动画所以我在 ViewDidLoad 中编写了以下代码

```
 ScanBtnVIEW.alpha=0;
ScanBtnVIEW=[[UIView alloc]initWithFrame:CGRectMake(78,-10,164,164)];

[self startAnimation]; 
```

然后在 viewDidLoad 之外我实现了 StartAnimation 方法如下

```
-(void)startAnimation{
[UIView animateWithDuration:1.0
                      delay:0.0
                    options: UIViewAnimationOptionCurveLinear
                 animations:^{
                     ScanBtnVIEW.alpha=1;
                     //ScanBtnVIEW=[[UIView alloc]initWithFrame:CGRectMake(78,260,164,164)];
                     ScanBtnVIEW.frame = CGRectMake(78,260,164,164);

                 }
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }]; 
```

}

但实际上在从 App 加载视图后，按钮并没有出现。请注意，我将按钮放在 imageView 中，以便我可以轻松应用动画。任何人都可以帮助解决这个问题，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:33:40.710

在您的动画块中，您重新分配了*ScanBtnView*。

你可以试试这个：

```
ScanBtnVIEW.frame = CGRectMake(78,260,164,164)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:07:55.930

### 问题 1

> 在加载视图时尝试在按钮上制作动画

不。加载视图就是：加载视图。正在发生的一切是视图控制器获得了一个`self.view`. 没有暗示视图即将出现在*界面*中，实际上可能不会。开始动画的时间是当视图*出现在界面中*时，例如`viewDidAppear:`。

### 问题 2

```
ScanBtnVIEW=[[UIView alloc]initWithFrame:CGRectMake(78,-10,164,164)]; 
```

太好了，所以你做了一个 UIView。但是你也从来没有把*它*放在界面中！所以当然你永远不会看到它。你基本上只是创建它，然后把它放在地板上。那有什么意义呢？

### 问题 3

```
ScanBtnVIEW.alpha=0;
ScanBtnVIEW=[[UIView alloc]initWithFrame:CGRectMake(78,-10,164,164)]; 
```

太棒了。所以现在你已经*有了*一个名为 ScanBtnView 的视图。但后来你把*它*扔掉了，用你创建的一个*全新*的视图替换它( `alloc`)，然后你把它扔在地板上！*这*有多奇怪？

很可能，您的意思是：

```
ScanBtnVIEW.alpha=0;
ScanBtnVIEW.frame = CGRectMake(78,-10,164,164)]; 
```

# c - 选择菜单选项后再次打印菜单。选择选项后“do while”循环是无限的

> ID：15858206
> 
> 赞同：-1
> 
> 时间：2013-04-07T02:24:56.397
> 
> 标签：c, loops, menu, printf, do-while

我想在用户选择“VIEW”或“BID”后再次打印菜单。如果没有无限循环，我该怎么做？我将菜单设置为自己的功能，然后在我的“主要”功能中调用它。

```
 int menu() {
    char sel[6];

    printf("Welcome to the Silent Auction!\n");
    printf("Please make a selection from the following:\n");
    printf("View Auction [VIEW]\n");
    printf("Bid on Auction [BID]\n");
    printf("Close Auction [CLOSE]\n");

return;
    }

    menu();
    char sel[6];
    scanf("%s", &sel);

    do {

            if (strcmp("VIEW", sel) == 0) {
            ...
            }
        if (strcmp("BID", sel) == 0) {
            printf("Which auction would you like to bid on?\n");
            scanf("%d", &choice);
            if ...
    }       else {
                ...
        }    printf("How much would you like to bid?\n");
            scanf("%f", &user_bid);
            if ...
            else
                cur_bid[choice] += user_bid;
            }
        if (strcmp("CLOSE", sel) == 0) {
            for...
        }

        } while (sel != "CLOSE");

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:31:04.980

从您的代码中，有两点需要考虑。一，`menu`函数不必返回 an `int`，但可以是`void`ie `void menu() {`。由于您没有阅读此功能内的选择，`char sel[6]`因此是多余的。

接下来，为了实现你的目标，在`while`声明之前，你可以调用下一个调用，`menu`如下所示

```
int     close_flag = 0;

printf("Enter your choice, VIEW / BID / CLOSE\n");
scanf("%6s", sel);

printf("Entered Choice: %s\n", sel);

do {
    if(!strcmp(sel, "VIEW"))
    {
        printf("ENTERED VIEW\n");
    }
    if(!strcmp(sel, "BID"))
    {
        printf("BIDDING\n");
    }
    if(!strcmp(sel, "CLOSE"))
    {
        printf(">>>>CLOSING \n");
        close_flag = 1;
    }
    if(!close_flag)
    {
        printf("Enter your choice, VIEW / BID / CLOSE\n");
        scanf("%6s", sel);
        printf("Entered Choice: %s\n", sel);
    }
} while(!close_flag); 
```

我已经修改了`while`条件以使用一个标志来终止循环。此外，另一项建议是将字符数限制`sel`为**6 个**字符，如`scanf("%6s", sel);`

# linux - 如何在 Linux 上使用 clone() 创建一个真正的线程？

> ID：15858207
> 
> 赞同：7
> 
> 时间：2013-04-07T02:24:59.330
> 
> 标签：linux, multithreading, process

我正在尝试使用[clone()](http://linux.die.net/man/2/clone)创建一个新线程。使用以下代码（...）：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define _SCHED_H 1
#define __USE_GNU 1
#include <bits/sched.h>

#define STACK_SIZE 4096

int func(void *arg) {
    printf("Inside func.\n");
    sleep(1);
    printf("Terminating func...\n");

    return 0;
}

int main() {
    printf("This process pid: %u\n", getpid());
    char status_file[] = "/proc/self/status";
    void *child_stack = malloc(STACK_SIZE);
    int thread_pid;

    printf("Creating new thread...\n");
    thread_pid = clone(&func, child_stack+STACK_SIZE, CLONE_SIGHAND|CLONE_FS|CLONE_VM|CLONE_FILES, NULL);
    printf("Done! Thread pid: %d\n", thread_pid);

    FILE *fp = fopen(status_file, "rb");

    printf("Looking into %s...\n", status_file);

    while(1) {
        char ch = fgetc(fp);
        if(feof(fp)) break;
        printf("%c", ch);
    }

    fclose(fp);

    getchar();

    return 0;
} 
```

我得到以下信息：

```
This process pid: 10839
Creating new thread...
Done! Thread pid: 10840
Inside func.
Looking into /proc/self/status...
Name:   threadTest02
State:  R (running)
Tgid:   10839
Pid:    10839
PPid:   4777
TracerPid:      0
Uid:    1000    1000    1000    1000
Gid:    1000    1000    1000    1000
FDSize: 256
Groups: 4 20 24 27 30 46 107 123 124 1000 
VmPeak:     4300 kB
VmSize:     4300 kB
VmLck:         0 kB
VmPin:         0 kB
VmHWM:       356 kB
VmRSS:       356 kB
VmData:      188 kB
VmStk:       136 kB
VmExe:         4 kB
VmLib:      1884 kB
VmPTE:        32 kB
VmSwap:        0 kB
Threads:        1
SigQ:   0/22869
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000000000000
SigIgn: 0000000000000000
SigCgt: 0000000000000000
CapInh: 0000000000000000
CapPrm: 0000000000000000
CapEff: 0000000000000000
CapBnd: ffffffffffffffff
Cpus_allowed:   3
Cpus_allowed_list:      0-1
Mems_allowed:   00000000,00000001
Mems_allowed_list:      0
voluntary_ctxt_switches:        1
nonvoluntary_ctxt_switches:     1
Terminating func... 
```

所以，简而言之，我的程序是做什么的？它创建一个新线程`clone`并打印它`/proc/self/status`，以便我可以看到它的状态。`/proc/self/status`由于我的线程休眠了 1 秒，因此打印时它仍然活着。

但是，至少有两件事使我的线程不像普通线程那样表现。首先，正如您在上面看到的，进程的 pid 是 10839，而我的线程的 pid 是 10840。因此，进程和我的线程没有相同的 pid，就像在公共线程中发生的那样。其次，即使创建了我的线程，`Threads:`我的进程文件的字段`/proc/self/status`仍然是1。所以，我的线程似乎没有被识别为线程。

我的问题是，我的代码中缺少什么？我必须做些什么才能使我的线程表现得像一个普通线程？的第三个参数中是否缺少任何选项`clone`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T05:34:25.720

您可能希望看到标志 CLONE_THREAD，它会将新线程放在与调用进程相同的线程组中。

一旦你给了 CLONE_THREAD，它将使新线程具有与调用进程相同的 pid 和 ppid。它用于posix线程。下面是我系统的输出。LWP 专栏说它现在是一个轻量级进程并且具有不同的 TID

```
UID        PID  PPID   LWP  C NLWP    SZ   RSS PSR STIME TTY          TIME CMD
anukalp  18398  9638 18398  0    2   464   456   0 10:56 pts/3    00:00:00 ./a.out
anukalp  18398  9638 18399  0    2   464   456   1 10:56 pts/3    00:00:00 ./a.out 
```

/proc/self/status 的输出也发生了变化，我添加了几个 printfs：

[anukalp@localhost ~]$ ./a.out

```
This process pid: 18398
Creating new thread...
Done! Thread pid: 18399 /* This is now thread id, available to caller of clone */
getpid(): ad pid: 18399
Inside func.
getpid(): 18398
getppid(): 9638
Looking into /proc/self/status...
Name:   a.out
State:  R (running)
Tgid:   18398
Pid:    18398
PPid:   9638
TracerPid:      0
Uid:    500     500     500     500
Gid:    500     500     500     500
FDSize: 256
Groups: 7 19 22 80 81 82 83 100 490 500 
VmPeak:     1856 kB
VmSize:     1856 kB
VmLck:         0 kB
VmPin:         0 kB
VmHWM:       248 kB
VmRSS:       248 kB
VmData:      168 kB
VmStk:       140 kB
VmExe:         4 kB
VmLib:      1516 kB
VmPTE:        16 kB
VmSwap:        0 kB
Threads:        2
SigQ:   1/14050
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000000000000
SigIgn: 0000000000000000
SigCgt: 0000000000000000
CapInh: 0000000000000000
CapPrm: 0000000000000000
CapEff: 0000000000000000
CapBnd: ffffffffffffffff
Cpus_allowed:   00000000,000000ff
Cpus_allowed_list:      0-7
voluntary_ctxt_switches:        1
nonvoluntary_ctxt_switches:     0
Inside thread: thread pid = 18398
Inside thread: thread ppid = 9638 
```

请让我知道这可不可以帮你！

# ssis - 这是什么意思？LEN（修剪（重量））== 0？(DT_STR,50,1252)NULL(DT_STR,50,1252) : (DT_STR,50,1252)重量

> ID：15858210
> 
> 赞同：0
> 
> 时间：2013-04-07T02:25:12.157
> 
> 标签：ssis

这是派生列“ReplaceWeight”的表达式

```
LEN(TRIM(Weight)) == 0 ? (DT_STR,50,1252)NULL(DT_STR,50,1252) : (DT_STR,50,1252)Weight 
```

我不清楚这个 IF 语句的 True 部分的语法......

我将其读作“如果修剪列'Weight'的长度为零，则将派生列ReplaceWeight分配为**字符串类型的NULL值？？** ELSE将Weight列转换为字符串并将此值分配给派生列”

表达式生成器告诉我

```
NULL(DT_STR,50,1252) 
```

...返回指定数据类型 DT_STR 的 NULL 值。这对我来说有点奇怪，因为我习惯 NULL 是各种类型的数据库列的值。

我是否可以解释以下意思是“将 STRING 数据类型的空值转换为 STRING 数据类型？”

```
(DT_STR,50,1252)NULL(DT_STR,50,1252) 
```

我会认为这是有效的：

```
 LEN(TRIM(Weight)) == 0 ? NULL : (DT_STR,50,1252)Weight 
```

我是否正确地解释了这段代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:07:59.330

您发布的第一个表达式是正确的。

该表达式根据它在表达式中“看到”的值定义派生列的数据类型。您没有机会像定义表时那样手动定义派生列的数据类型。因此，所有可能的返回值都必须正确定义数据类型，这一点很重要。

这是一个函数：NULL(DT_STR,50,1252)

该函数返回 NULL 并定义了字段类型。你会认为这对 SSIS 来说已经足够了，但是你还必须对返回的值进行类型转换，导致有些多余： (DT_STR,50,1252)NULL(DT_STR,50,1252)

如果有人可以解释*为什么*SSIS 需要类型转换已经定义了数据类型的值，我很想听听解释。

干杯，彼得

# android - Android：ScrollView 拦截 Map API V2 触摸

> ID：15858214
> 
> 赞同：3
> 
> 时间：2013-04-07T02:26:02.863
> 
> 标签：android, scrollview, google-maps-api-2, ontouchlistener

我有一个 Activity，它有一个滚动视图，可以计算很多东西......其中之一是 mapfragment api v2。最大的拖钓问题是当我垂直移动地图时，所有的卷轴都会移动，我不想要这个。当我触摸并移动地图时，我真的希望滚动视图不要移动。

代码如下：

```
public class MyMap extends FragmentActivity {

...

        @Override
        public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    setContentView(R.layout.map);

            ...

    fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mapfoto);
    googleMap = fm.getMap();

    /** Here i can do something like googleMap.setOnToucListener().... 
            but it's not supported!!!! */
            ...

    }

} 
```

和map.xml：

```
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/scroll"
    tools:context=".MyMap">   

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/relativeLayoutA"
            android:layout_below="@+id/mapfoto"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
            <fragment
                android:id="@+id/map"
                android:layout_width="match_parent"
                android:layout_height="400dp"
                class="com.google.android.gms.maps.SupportMapFragment" />

      ...

            </RelativeLayout>
        ...

        </RelativeLayout>

</ScrollView> 
```

我尝试使用 OnMapClickListener() 和 OnMapLongClickListener() 但没有用

所有的帮助都很好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-25T10:22:39.980

这个想法是在地图片段区域上发生滚动动作时仅在地图片段上拦截触摸事件。

您可以扩展 MapFragment 并在其上放置一个 FrameLayout 来拦截和传达触摸动作。

```
import android.content.Context;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.content.ContextCompat;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;
import com.google.android.gms.maps.SupportMapFragment;

public class OnScrollableContainerMapFragment extends SupportMapFragment {

  private OnTouchListener mOnTouchListener;

  @Override
  public View onCreateView(
      LayoutInflater layoutInflater,
      ViewGroup viewGroup,
      Bundle savedInstance
  ) {
    final View mapView = super.onCreateView(layoutInflater, viewGroup, savedInstance);

    if (mapView != null) {
      ((ViewGroup) mapView).addView(
          new TouchableWrapper(getActivity()),
          new ViewGroup.LayoutParams(
              ViewGroup.LayoutParams.MATCH_PARENT,
              ViewGroup.LayoutParams.MATCH_PARENT
          )
      );
    }

    return mapView;
  }

  public void setOnTouchListener(@NonNull final OnTouchListener onTouchListener) {
    mOnTouchListener = onTouchListener;
  }

  public interface OnTouchListener {

    void onStartScrollingMap();

    void onStopScrollingMap();
  }

  private class TouchableWrapper extends FrameLayout {

    public TouchableWrapper(@NonNull final Context context) {
      super(context);
      setBackgroundColor(ContextCompat.getColor(context, android.R.color.transparent));
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
      switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
          mOnTouchListener.onStartScrollingMap();
          break;
        case MotionEvent.ACTION_UP:
          mOnTouchListener.onStopScrollingMap();
          break;
      }
      return super.dispatchTouchEvent(event);
    }
  }

} 
```

当地图上的滚动动作开始时，您要求外部可滚动容器停止拦截触摸事件。

当地图上的滚动完成时，您告诉外部可滚动容器再次开始拦截触摸事件。

在下面的示例中，外部可滚动容器是一个 ScrollView。

请注意，该示例假定代码位于片段内。只是整个类文件的一部分，并且在其他文件中缺少使其编译所需的元素。

```
(...)
mSupportMapFragment = (OnScrollableContainerMapFragment) getChildFragmentManager()
        .findFragmentById(R.id.fragment_map);

        mSupportMapFragment
        .setOnTouchListener(new OnScrollableContainerMapFragment.OnTouchListener() {
          @Override
          public void onStartScrollingMap() {
            mScrollView.requestDisallowInterceptTouchEvent(true);
          }

          @Override
          public void onStopScrollingMap() {
            mScrollView.requestDisallowInterceptTouchEvent(false);
          }
        });
(...) 
```

XML 布局文件如下所示。

请注意，这只是文件的一部分，并且在其他文件中缺少使其编译所需的元素。

```
(...)

<fragment
          (...)
            android:id="@+id/fragment_map"
            android:name="com.stackoverflow.answer.OnScrollableContainerMapFragment"
            android:tag="team_details_info_fragment_map" />
(...) 
```

看看这里的要点：[要点](https://gist.github.com/Sottti/890daaeead1bd4784dfce7066a9011aa)

# php - 在php中操作参数

> ID：15858217
> 
> 赞同：0
> 
> 时间：2013-04-07T02:26:44.147
> 
> 标签：php, arrays, pass-by-reference

我对 PHP 相对缺乏经验，我正在尝试对现有代码库进行一些更改。我有一个将数组作为参数的方法：

```
public function get_ids(array $order)
{
    ...
    return $ret_val;
} 
```

我想在这个数组中添加一个额外的元素，与 key 配对`count`。我知道那把钥匙不存在。我对 PHP 文档的理解是所有变量都是通过引用传递的：

> 仅函数定义就足以通过引用正确传递参数。从 PHP 5.3.0 开始，当您在 foo(&$a); 中使用 & 时，您将收到一条警告说“调用时传递引用”已被弃用。从 PHP 5.4.0 开始，调用时传递引用已被删除，因此使用它会引发致命错误。

但是，当我这样做时：

```
public function get_ids(array $order)
{
    ...
    $order['count'] = 5;
    return $ret_val;
} 
```

然后`var_dump`在调用这个方法的方法中做一个，“count”没有键。但是，如果我在方法返回`var_dump`之前做一个正确的操作，显然*有*一个. `get_ids`*`count`*

 *这是怎么回事？我显然不了解 PHP 的原理，但我通常的谷歌搜索技能完全让我失望。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T02:32:18.127

就像在已弃用功能的描述中所说：

`Function definitions alone are enough to correctly pass the argument by reference`

因此，请指定您希望在函数定义中通过引用传递参数。

```
public function get_ids(array &$order)
{
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:48:46.607

> 我的 PHP 文档是所有变量都是通过引用传递的：

所有参数如果不带前缀，则按值`&`传递，如果带前缀，则按引用传递`&`。*

# codeigniter - Jqgrid不使用codeigniter显示json数据

> ID：15858220
> 
> 赞同：0
> 
> 时间：2013-04-07T02:27:06.553
> 
> 标签：codeigniter, jqgrid

我正在尝试使用 codeigniter 实现 jqGrid。我设置了一切，它似乎是正确的，网格正在显示但没有加载任何信息。构造 Json 结构的控制器打印以下内容：

```
{"page":1,"total":1,"records":2,"rows":[{"id":"132","cell":["user1","user1@yahoo.com","1123","22767830","22767830","address"]},{"id":"12222","cell":["user2","user2@gmail.com","212222","8888888","888888","address2"]}]} 
```

这意味着数据库正在被正确访问，并且 JSON 的创建没有问题。

但是网格没有显示这些信息，所以我打印了 JSON，然后网格显示没有任何信息。

下面是控制器的代码：

```
function loadData(){           

        $page = isset($_POST['page'])?$_POST['page']:1; 
        $limit = isset($_POST['rows'])?$_POST['rows']:10; 
        $sidx = isset($_POST['sidx'])?$_POST['sidx']:'name'; 
        $sord = isset($_POST['sord'])?$_POST['sord']:'';         
        $start = $limit*$page - $limit; 
        $start = ($start<0)?0:$start; 

        $where = ""; 
        $searchField = isset($_POST['searchField']) ? $_POST['searchField'] : false;
        $searchOper = isset($_POST['searchOper']) ? $_POST['searchOper']: false;
        $searchString = isset($_POST['searchString']) ? $_POST['searchString'] : false;

        /**************************/

        //array to translate the search type
        $ops = array(
                'eq'=>'=', //equal
                'ne'=>'<>',//not equal
                'lt'=>'<', //less than
                'le'=>'<=',//less than or equal
                'gt'=>'>', //greater than
                'ge'=>'>=',//greater than or equal
                'bw'=>'LIKE', //begins with
                'bn'=>'NOT LIKE', //doesn't begin with
                'in'=>'LIKE', //is in
                'ni'=>'NOT LIKE', //is not in
                'ew'=>'LIKE', //ends with
                'en'=>'NOT LIKE', //doesn't end with
                'cn'=>'LIKE', // contains
                'nc'=>'NOT LIKE'  //doesn't contain
        );
        function getWhereClause($col, $oper, $val){
                global $ops;
                if($oper == 'bw' || $oper == 'bn') $val .= '%';
                if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;
                if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';
                return " WHERE $col {$ops[$oper]} '$val' ";
        }
        $where = ""; //if there is no search request sent by jqgrid, $where should be empty
        $searchField = isset($_POST['searchField']) ? $_POST['searchField'] : false;
        $searchOper = isset($_POST['searchOper']) ? $_POST['searchOper']: false;
        $searchString = isset($_POST['searchString']) ? $_POST['searchString'] : false;

/**************************/

        if(!$sidx) 
            $sidx =1;
        $count = $this->db->count_all_results('info'); 
        if( $count > 0 ) {
            $total_pages = ceil($count/$limit);    
        } else {
            $total_pages = 0;
        }

        if ($page > $total_pages) 
            $page=$total_pages;

        $query = $this->JqgridSample->getAllData($start,$limit,$sidx,$sord,$where); 
        $responce->page = $page;
        $responce->total = $total_pages;
        $responce->records = $count;
        $i=0;
        foreach($query as $row) {
            $responce->rows[$i]['id']=$row->id;
            $responce->rows[$i]['cell']=array($row->name,$row->email,$row->passport,$row->phone,$row->fax,$row->address);
            $i++;
        }

        //return json_encode($responce);
       echo json_encode($responce);
    } 
```

这是模型的代码：

```
function getAllData($start,$limit,$sidx,$sord,$where){

   $this->db->select('id,name,email,passport,phone,fax,address');
    $this->db->limit($limit);
     if($where != NULL)
          $this->db->where($where,NULL,FALSE);
       $this->db->order_by($sidx,$sord);
       $query = $this->db->get('info',$limit,$start);
       return $query->result();
} 
```

这是视图的代码：

```
<body>
 <center>
    <h1>Codeigniter With JQGrid</h1>
<table id="list"></table><!--Grid table-->
<div id="pager"></div>  <!--pagination div-->
</center>
</body>

<script type="text/javascript">
    $(document).ready(function (){
        jQuery("#list").jqGrid({
            url: 'http://localhost/ProyectoNetbeans/CodeIgniter_2.1.3/index.php/Nacionalidades_controller/loadData',
            mtype : "post",             //Ajax request type. It also could be GET
            datatype: "json",            //supported formats XML, JSON or Arrray
            colNames:['Name','Email','Passport','Phone','Fax','Address'],       //Grid column headings
            colModel:[
                {name:'name',index:'name', width:100, align:"left"},
                {name:'email',index:'email', width:150, align:"left"},
                {name:'passport',index:'passport', width:100, align:"right"},
                {name:'phone',index:'phone', width:100, align:"right"},
                {name:'fax',index:'fax', width:100, align:"right"},
                {name:'address',index:'address', width:100, align:"right"}
            ],
            rowNum:10,
            width: 750,
            //height: 300,
            rowList:[10,20,30],
            pager: '#pager',
            sortname: 'id',
            viewrecords: true,
            rownumbers: true,
            gridview: true,
            caption:"List Of Person"
        }).navGrid('#pager',{edit:false,add:false,del:false});
    });
</script> 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:12:10.147

在我看来，您应该设置`Content-Type`服务器响应的标头，而不仅仅是将 JSON 数据放在响应的正文中。一个可以使用

```
$this->output->set_header('Content-Type: application/json; charset=utf-8'); 
```

例如这样做。可能更好的事件是使用

```
$this->output->set_content_type('application/json')
             ->set_output(json_encode($re‌​sponce)); 
```

我不是 CodeIgniter 开发人员，但CodeIgniter[文档](http://ellislab.com/codeigniter/user-guide/libraries/output.html)中的外观似乎是您问题的原因。

# javascript - Ajax - 如何使页面上的每个链接/表单仅重新加载该页面的一部分？

> ID：15858228
> 
> 赞同：0
> 
> 时间：2013-04-07T02:28:39.723
> 
> 标签：javascript, jquery, html, ajax

我有一个网站，我想让它的一部分保持静态。现在，为了做到这一点，我需要替换单个 div，如下所示：

```
<html>
  <head>
  </head>
  <body>
    <div id="contentToReplace">
    </div>
    <div id="myStaticContent">
    </div>
  </body>
</html> 
```

现在，我怎样才能捕捉到所有对锚点的点击和对表单提交按钮的点击，然后重新加载`contentToReplace`？我尝试使用`jQuery.load()`它，它很完美，但它没有加载脚本，我需要那些。另外，我不知道如何提交带有 ajax 请求的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:00:42.653

要捕捉`a`点击和`input[type=submit]`点击，您可以执行以下操作：

```
$(document).ready(function(){
   $('a, input[type=submit]').on('click', function(e){
       // probably want to prevent default behavior
       e.preventDefault();

       // put the load stuff here

   });
} 
```

至于未加载的脚本，您应该查看以下 SO：[jquery load() strips script tags - workaround？](https://stackoverflow.com/questions/6036870/jquery-load-strips-script-tags-workaround)

# java - 随机线程睡眠

> ID：15858229
> 
> 赞同：0
> 
> 时间：2013-04-07T02:28:39.987
> 
> 标签：java, thread-safety

我在可运行的运行方法中有以下代码：

```
@Override
public void run(){
    final Random r=new Random(1000);
    int acquired=0;
    try{
        while(acquired < 1){
            for(int i=0;i<sems.length;i++){
                    if(sems[i].tryAcquire()){
                            System.out.println("Acquired for " + i);
                            Thread.sleep(r.nextInt());
                            sems[i].increment();
                            sems[i].release();
                            acquired=1;
                            break;
                    }
            }
        }

    }
    catch(InterruptedException x){}

} 
```

在执行过程中，我不断收到以下异常：

```
Exception in thread "Thread-2" java.lang.IllegalArgumentException: timeout value is negative
        at java.lang.Thread.sleep(Native Method)
        at com.bac.jp.fourteenth$1.run(fourteenth.java:24)
        at java.lang.Thread.run(Unknown Source)
Exception in thread "Thread-0" java.lang.IllegalArgumentException: timeout value is negative
        at java.lang.Thread.sleep(Native Method)
        at com.bac.jp.fourteenth$1.run(fourteenth.java:24)
        at java.lang.Thread.run(Unknown Source) 
```

但是，如果我使用 Thread.sleep(1000) 程序运行良好。为什么我不能使用 java Random 随机化暂停？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:37:04.427

使用`r.nextInt(1000)`// 返回一个 0-999 之间的数字...这解决了负返回问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:34:15.630

随机数生成器生成了一个负数，当您将负值作为参数传递给`Thread.sleep()`您时，您会立即获得异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T02:41:02.490

替换`Thread.sleep(r.nextInt());`为`Thread.sleep(r.nextInt(1000));`

如果您查看[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28%29)，您将看到以下内容：

```
nextInt

public int nextInt()
Returns the next pseudorandom, uniformly distributed int value from this random number 
generator's sequence. The general contract of nextInt is that one int value is 
pseudorandomly generated and returned. All 232 possible int values are produced with 
(approximately) equal probability.

The method nextInt is implemented by class Random as if by:

 public int nextInt() {
   return next(32);
 }
Returns:
the next pseudorandom, uniformly distributed int value from this random number 
generator's sequence 
```

您将要使用`nextInt(int n)`如下

```
nextInt

public int nextInt(int n)
Returns a pseudorandom, uniformly distributed int value between 0 (inclusive) and the 
specified value (exclusive), drawn from this random number generator's sequence. The 
general contract of nextInt is that one int value in the specified range is pseudorandomly 
generated and returned. All n possible int values are produced with (approximately) equal 
probability. 
```

# java - 使用 OpenGL 和 LWJGL 无缝纹理圆柱体

> ID：15858230
> 
> 赞同：0
> 
> 时间：2013-04-07T02:28:46.633
> 
> 标签：java, opengl, textures, lwjgl

我正在创建一个程序化城市，其中包含随机生成的建筑物和纹理。我正在正确地生成圆柱体建筑，并为窗户生成程序纹理图案，但是当我将纹理映射到圆柱体上时，它并没有像我认为的那样出现。

![在此处输入图像描述](https://i.stack.imgur.com/5HFx1.png)

图片显示了我的三个问题。首先，我的圆柱体代码将随机跳过 90 度以从圆柱体中创建看起来不错的切片，当其中两个发生时，第二个具有您在此处看到的拉伸纹理。第一片看起来非常好。那是图像上的数字2。

第二个问题（编号为 1）是，由于某种原因，它似乎占用了大部分纹理并将其映射到圆柱体末端的一小块切片上，并且每次都会发生这种情况。

第三个问题稍微难以注意到，虽然在数字 1 上最容易看到，但如果你看顶部，纹理比底部宽得多，我不知道为什么。

这是我创建和纹理圆柱体的源代码：http: [//pastebin.com/hgMhqScg](http://pastebin.com/hgMhqScg)

这是生成纹理的代码以及存储和渲染实际顶点的代码：http: [//pastebin.com/cUuEBmTr](http://pastebin.com/cUuEBmTr) [http://pastebin.com/GrytFsf1](http://pastebin.com/GrytFsf1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:23:00.207

原来#1的问题在这里：

```
 if(i < v2UVA.length-1) 
```

切换到

```
 if(i < v2UVA.length) 
```

这个问题就消失了。不知道为什么会发生拉伸，但我只是将最大削减限制为 1，它工作正常。

# python - 如何在 python 中使用“float”类型生成结果？

> ID：15858232
> 
> 赞同：0
> 
> 时间：2013-04-07T02:29:00.487
> 
> 标签：python

我在python中输入了一个小函数，代码是

```
def perimeter(side1,side2,side3):
    ''' (number,number,number)->float
    return the sum of side1,side2 and side3
    >>>perimeter(1,2,3)
     6.0
    >>>perimeter(4,5,7.1)
    16.1 '''

    result = side1+side2+side3
    return result 
```

但是当我使用它时，结果不是 float 的形状，它就像 int 。我怎样才能使它在浮动排序？

（我不知道如何在这里形成代码窗口，请见谅）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T02:33:17.413

类型转换为浮动

```
def perimeter(side1, side2, side3):
    return float(side1 + side2 + side3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T02:32:33.107

添加整数将产生一个整数。您可以将其中一个或全部转换为浮点数，或将结果转换为浮点数：

```
return float(result) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T02:38:12.960

也许如果他的错误在 之后仍然发生`return float(side1 + side2 + side3)`，那么他必须在参数中指定边是浮点数。`def perimeter(float(side1),float(side2),float(side3)):`如果没有别的，也许这会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T02:40:39.957

如果您希望每个结果都具有相同的精度，请尝试格式化

```
 return '%.3f' % result 
```

# java - FlowLayout.CENTER 未使组件居中

> ID：15858234
> 
> 赞同：2
> 
> 时间：2013-04-07T02:29:14.247
> 
> 标签：java, swing, layout, flowlayout

我正在使用 FlowLayout.CENTER 将字符串和一些复选框居中，但它没有将它们居中。我以前用过这个，效果很好。这是代码：

```
import javax.swing.*;
import java.awt.*;

public class pizza extends JFrame {
//row 1
  JPanel row1 = new JPanel();
  JLabel select = new JLabel("Please select the size you would like"); 
//row 2
  JPanel row2 = new JPanel();
  JCheckBox ninein = new JCheckBox("9 inch, $5.00", false);
  JCheckBox twelvein = new JCheckBox("12 inch, $10.00", false);
  JCheckBox seventeenin = new JCheckBox("17 inch, $15.00", false);
//row 3
  JPanel row3 = new JPanel();
  JLabel toppingslab = new JLabel("Please select your toppings");
  JCheckBox cheese = new JCheckBox("Cheese, .50");
  JCheckBox pepperoni = new JCheckBox("Pepperoni, .50");
  JCheckBox onions = new JCheckBox("Onions, .50");
  JCheckBox peppers = new JCheckBox("Peppers, .50");
  JCheckBox bacon = new JCheckBox("Bacon! Free (because it's bacon)");
//row4
  JPanel row4 = new JPanel();
  JLabel totallab = new JLabel("Total");
  JTextField total = new JTextField(10);

public pizza(){
    setTitle("Pizza Ordering");
    setSize(500,500);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
  total.setEnabled(false);

FlowLayout one = new FlowLayout(FlowLayout.CENTER);
  setLayout(one);

  row1.add(select);
  add(row1);

  row2.add(ninein);
  row2.add(twelvein);
  row2.add(seventeenin); 
  add(row2);

GridLayout two = new GridLayout(6,2);
  row3.setLayout(two);

  row3.add(toppingslab);
  row3.add(cheese);
  row3.add(pepperoni);
  row3.add(onions);
  row3.add(peppers);
  row3.add(bacon);
  add(row3);

FlowLayout three = new FlowLayout(FlowLayout.RIGHT);
  setLayout(three);

  row4.add(totallab);
  row4.add(total);
  add(row4);  
    } 
public static void main(String[] args) {
    pizza pizz = new pizza();
}
} 
```

RIGHT 或 LEFT 都没有区别，它只是将其与右侧对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T02:50:32.487

所有组件都右对齐的原因是您将布局重置`JFrame`为`FlowLayout.RIGHT`此处：

```
FlowLayout three = new FlowLayout(FlowLayout.RIGHT);
setLayout(three); 
```

这取代了之前对中心对齐组件的调用。

# javascript - 如何调用存储在对象中的函数，该对象被用作另一个函数的参数？

> ID：15858236
> 
> 赞同：0
> 
> 时间：2013-04-07T02:29:46.253
> 
> 标签：javascript, jquery, function, object, arguments

老实说，我对这个有点不知所措。任何帮助，将不胜感激。

**客观的**

我想调用一个名为 restart 的函数，但该函数位于对象内部并被传递给函数`Class.extend`。

我正在使用的代码是

```
 var Chickenz = Class.extend(
{
        init: function(value) 
        {
           //do something
        },
        // restart game
        restart: function() 
        {
            this.score.restart();  
            //etc
        }
}); 
```

我尝试了什么？

`restart();`不工作。我得到`TypeError: restart is not a function` 了 没什么大不了的，我没想到它会起作用。基于这个问题> [Javascript - 在对象中存储函数 - 不好的做法？](https://stackoverflow.com/questions/8902687/javascript-storing-function-in-object-bad-practice) 我以为我可以做类似`Chickenz.restart();`的事情，但它更复杂，因为 Class.extend

我在这个问题的底部包含了 Class.extend 的代码。

稍后使用以下代码调用重新启动函数

```
/* GUI Events */
            // restart button
            addEvent($("restart"), "click", function() {
                self.restart();
                return false;
            }); 
```

我以为我会尝试`self.restart();`，但没有奏效-`TypeError: self.restart is not a function.`

**所以我的问题。**

如何调用重启功能？

**Class.extend 的代码**

```
var initializing = false;
  // The base Class implementation (does nothing)
  this.Class = function(){};
  // Create a new Class that inherits from this class
// Create a new Class that inherits from this class
  Class.extend = function(prop) {
    var _super = this.prototype,
        prototype,
        name,
        tmp,
        ret;

    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    prototype = new this();
    initializing = false;

    // Copy the properties over onto the new prototype
    for ( name in prop ) {
      // Check if we're overwriting an existing function
      prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" ?
        (function(name, fn){
         return function() {
           tmp = this._super;
           // Add a new ._super() method that is the same method
           // but on the super-class
           this._super = _super[name];
           // The method only need to be bound temporarily, so we
           // remove it when we're done executing
           ret = fn.apply(this, arguments);
           this._super = tmp;
           return ret;
         };
        })(name, prop[name]) :
        prop[name];
    }
    // The dummy class constructor
    //Changed according to http://ejohn.org/blog/simple-class-instantiation/    
    //Use the new operator to instantiation                                     
        function Class(args){
                if ( this instanceof arguments.callee ) {
                    if ( !initializing && this.init )
                        this.init.apply( this, args.callee ? args : arguments );
                } else
                    return new arguments.callee( arguments );
            };

    // Populate our constructed prototype object
    Class.prototype = prototype;
    // Enforce the constructor to be what we expect
    Class.constructor = Class;
    // And make this class extendable
    Class.extend = arguments.callee;
    return Class;
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:40:15.157

您似乎是基于 John Resig 的示例[here](http://ejohn.org/blog/simple-javascript-inheritance/)您应该看看他是如何做到的:)

Class.extend 返回一个类的构造函数。您可以只创建该类的一个实例，然后调用它。

你需要类似的东西：

```
var chicken = new Chickenz();

chicken.restart(); 
```

请注意，这会立即引发错误，因为`this`随后将绑定到新的 chicken 对象，并且 chicken 没有`score.restart`函数，除非您有其他代码没有向我们展示。我不知道您希望该行做什么，但是您需要将带有重新启动方法的 score 属性添加到 chicken 对象或让该`restart`方法引用其他内容。

# php - jQuery 获取 DOM 的 .html 并使用 switch/case 动态更新 DOM

> ID：15858242
> 
> 赞同：0
> 
> 时间：2013-04-07T02:30:46.603
> 
> 标签：php, jquery

```
var WinBack = $('div.jWinBackFrom').html();

switch(WinBack) {
    case '1': //If database returns 1 : set Verizon FiOS logo
    $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo site_url();?>/assets/images/verizon-fios-logo.jpg" />');
    break;
    case '2': //If database returns 2 : set DirecTV logo
    $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/directv-logo.jpg" />');
    break;
    case '3': //If database returns 3 : set DISH Network logo
    $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/dish-network-logo.jpg" />');
    break;
} 
```

好的，所以数据库返回 1、2 或 3。我需要 jQuery 来确定返回的内容，因此我正在检查 DIV 以查看其内容。然后我希望根据内容显示图像，这就是我使用开关盒的原因。

```
<div class="jWinBackFrom"><?php echo $optimum['cWinBackFrom'][$i]; ?></div> 
```

我有一个返回多行数据的表，每行都需要由 jQuery 动态更新。

所以第 1 行可能是 cWinBackFrom = 1（将加载 FiOS 徽标），后续行可能是 cWinBackFrom = 2（将加载 DirecTV 徽标）等等。

1.  问题1：图像不显示。控制台说禁止访问。自动加载 -> 助手 -> url 处于活动状态。

2.  问题 2：所有图像都显示不正确的 fios。因为第二行是 2，它应该加载 direcTV 图像。

谢谢您的帮助！

# javascript - 与父级匹配的子级 div 的高度

> ID：15858252
> 
> 赞同：0
> 
> 时间：2013-04-07T02:32:09.233
> 
> 标签：javascript, jquery, html, css, forms

所以我环顾了这个网站，知道有这样的问题，但其中有很多是针对流体宽度布局的，我无法让这些技术与我正在做的事情一起工作。

我只是在设计一个表单，并且在浏览器如何调整大小时遇到​​了麻烦。您可以在下图中看到我正在使用的 div 和我的问题。

![在此处输入图像描述](https://i.stack.imgur.com/eS1HU.png)

如您所见，在`.col-1-3`div 下方，随着浏览器调整大小，出现了一些空间。我想将 的高度与`.col-1-3`其父级的高度相匹配，`.formInput`.

有谁知道无论如何要这样做？我不在乎它是黑客还是某种 Javascript/jQuery 解决方案。

**编辑**

我敢肯定你们想要一些代码，谁不想呢？

这是表单上第一个字段和标签的一些 HTML：

```
<div class="formInput">
    <div class="grid">
        <div class="col-1-3 left">
            <label>
                <p class="right">AsQ a question <img src="{{ STATIC_URL }}rd/images/arrow_right_small.png" /></p>
            </label>
        </div><!-- .col-1-3 -->         

        <div class="col-2-3 right">
            {{ form.name }} **Django code**
        </div><!-- .col-2-3 -->
    </div><!-- .grid --> 
```

这是所述字段的所有必要CSS：

```
.right { float: right: }

.left { float: left; }

.formInput { 
    border: 6px solid #A5C3D2;
    display: block; 
    margin-bottom: 25px;    

    behavior: url('./scripts/border-radius.htc');
    border-radius: 18px;
    -moz-border-radius: 18px;
    -webkit-border-radius: 18px;
}

.formInput .col-1-3 { 
    background: #006180; 
    color: #FDBA63;
    text-align: right;

    behavior: url('./scripts/border-radius.htc');
    border-radius: 12px 0 0 12px;
    -moz-border-radius: 12px 0 0 12px;
    -webkit-border-radius: 12px 0 0 12px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
}

.formInput .col-1-3 label p { width: 220px; }

/* Grid */
*, *:after, *:before {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

.grid:after {
    clear: both;
    content: "";
    display: table;
}

/* Grid Gutters */
[class*='col-'] {
    float: left;
    padding-right: 20px;
}

[class*='col-']:last-of-type { padding-right: 0; }

.col-2-3 { width: 66.66%; }

.col-1-3 { width: 33.33%; } 
```

如果你们想看看我的问题的一个工作示例：http: [//jsfiddle.net/qMgwz/](http://jsfiddle.net/qMgwz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:41:28.713

添加`position:relative`到 的父元素`.col-1-3`。

然后给`.col-1-3`一个`position:absolute; height:100%;`

您需要确保将 a`margin-left`应用于右半部分。

请参阅此示例（基于您提供的代码）：http: [//jsfiddle.net/ULM5s/1/](http://jsfiddle.net/ULM5s/1/)

# int - 将整数转换为 char 数组（字节）

> ID：15858256
> 
> 赞同：0
> 
> 时间：2013-04-07T02:32:33.717
> 
> 标签：int

**更新：** 我可以很容易地从字节到整数，但我目前的做法似乎不太好。

这是我当前的代码：

```
static unsigned char* Int32ToBytes(signed int n)
{
    unsigned char bytes[4];
    for(int i = 0;i<4;i++)
        bytes[3-i] = (n & (255 << (i*8))) >> (i*8);
    return bytes;
} 
```

我用它来写字节：

```
fwrite(Int32ToBytes(-1), 1 , 4 , file ); 
```

它正在输出：`FB 9C 8B 28`当我希望它输出时`FF FF FF FF`（有符号整数）。

有任何想法吗？帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:52:12.463

这似乎对我 [有用http://ideone.com/o6Llf9](http://ideone.com/o6Llf9)

```
void process(int x)
{
    for(int i = 0;i<4;i++)
    {
        unsigned char res = (x & (255 << (i*8))) >> (i*8);
        printf("%x " ,res);
    }
}

int main()
{
    int n;
    while (scanf("%d",&n)!=EOF) process(n);
    return 0;
} 
```

像这样的东西也可以

```
for(int i = 0;i<4;i++)
{
     bytes[3-i] = n & 255
     n = n >> 8
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:57:01.953

www.cplusplus.com/reference/cstdlib/itoa/ 它把 int 变成 char。示例： `int test; char buffer[33]; itoa(test, buffer, 10)`。您需要包含 stdlib.h。

# android - Android 打开跟踪文件时出错

> ID：15858266
> 
> 赞同：4
> 
> 时间：2013-04-07T02:33:43.377
> 
> 标签：android

我正在创建简单的`Hello World`默认项目，运行时出现以下错误。

```
04-07 06:27:08.369: D/dalvikvm(959): Debugger has detached; object registry had 1 entries
04-07 06:34:05.429: E/Trace(1132): error opening trace file: No such file or directory (2)
04-07 06:34:06.059: D/gralloc_goldfish(1132): Emulator without GPU emulation detected. 
```

我几乎在这里阅读了所有线程，但没有找到解决方案。
有没有得到解决方案？

# android - 自定义视图在列表视图中占据整个屏幕

> ID：15858267
> 
> 赞同：0
> 
> 时间：2013-04-07T02:34:06.917
> 
> 标签：android, listview, custom-adapter

安卓 2.3.3

我有一个列表视图，我正在其中填充一个自定义视图。

CustomView - ListView 项目

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="60dp" 
    android:orientation="horizontal"
    android:layout_margin="2dp" >

    <ImageView
        android:id="@+id/imgView_addcontact"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:src="@drawable/addcontactsmall2"
        android:layout_weight="0.20"
        android:padding="5dp"
        android:layout_gravity="center" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.60"
        android:orientation="vertical"
        android:padding="5dp"
        android:layout_gravity="center" >

        <TextView
            android:id="@+id/txtView_addcontact_contactname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Contact Name"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/txtview_addcontact_phonenumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Phone Number"
            android:textSize="16sp" />

    </LinearLayout>

    <CheckBox
        android:id="@+id/chbk_addcontact"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.10"
        android:padding="5dp"
        android:layout_gravity="center"
        />

</LinearLayout> 
```

列表视图 XML :::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
         android:id="@+id/txtViewContactsHeader"
         android:layout_width="wrap_content"
         android:layout_height="50dp"
         android:text="Your Contacts (Phone + SIM)"
         android:layout_gravity="center"
         android:gravity="center" />

     <ListView
         android:id="@+id/lv_addcontact"
         android:layout_width="match_parent"
         android:layout_height="0dip"
         android:layout_weight="1" >

    </ListView>

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:orientation="horizontal"
         android:layout_gravity="center"
         android:gravity="center" >

         <Button
             android:id="@+id/btn_addcontact_add"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="ADD CONTACTS" />

         <Button
             android:id="@+id/btn_addcontact_cancel"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="CANCEL" />

     </LinearLayout>

      <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="100dp"
         android:orientation="vertical" >

         <TextView
         android:id="@+id/txtViewNavigation"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:text="Navigation"
         android:layout_gravity="center"
         android:gravity="center" />

     </LinearLayout>

</LinearLayout> 
```

当我运行应用程序时，customview 会填充我需要的所有值，但每个 customview 都占用整个屏幕（列表视图可用的空间）。当我向下滚动时，我可以看到其他行。

代码 - getView()

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            // View MyView = convertView;

            ContactViewHolder contactViewHolder;

            if (convertView == null) {

                // Inflate the layout
                LayoutInflater li = getLayoutInflater();
                convertView = li.inflate(
                        R.layout.activity_listview_addcontact_item, null);

                contactViewHolder = new ContactViewHolder();

                contactViewHolder.imgContact = (ImageView) convertView
                        .findViewById(R.id.imgView_addcontact);
                contactViewHolder.txtViewContactName = (TextView) convertView
                        .findViewById(R.id.txtView_addcontact_contactname);
                contactViewHolder.txtViewPhoneNumber = (TextView) convertView
                        .findViewById(R.id.txtview_addcontact_phonenumber);
                contactViewHolder.chbkAddContact = (CheckBox) convertView.findViewById(R.id.chbk_addcontact);

                convertView.setTag(contactViewHolder);
            } else {
                contactViewHolder = (ContactViewHolder) convertView.getTag();
            }

            //while (cur.moveToNext()) {

                cur.moveToPosition(position);

/*
                // Add The Image!!!
                String image = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_URI));

                if (image != null) {
                    contactViewHolder.imgContact.setImageURI(Uri.parse(image));
                } else {
                    contactViewHolder.imgContact
                            .setImageResource(R.drawable.addcontactsmall2);
                }
*/

                // Add Contact Name //

                String name = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));

                if (name != null)
                    contactViewHolder.txtViewContactName.setText(name);
                else
                    contactViewHolder.txtViewContactName.setText("Unknown");

                // Add Phone Number //

                String phoneNumber = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                if (phoneNumber != null)
                    contactViewHolder.txtViewPhoneNumber.setText(phoneNumber);
                else
                    contactViewHolder.txtViewPhoneNumber.setText("Unknown");

                //System.out.println(image + "   " + name + "   " + phoneNumber);

            //}

            return convertView;
        }

        public class ContactViewHolder {
            ImageView imgContact;
            TextView txtViewContactName;
            TextView txtViewPhoneNumber;
            CheckBox chbkAddContact;
        } 
```

截图 - 如果它可以帮助

![在此处输入图像描述](https://i.stack.imgur.com/Klt1z.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:53:14.657

在您的适配器的 getView 方法中，当您对 listview 项目进行膨胀时，不要像在此处所做的那样将 null 作为父视图传递：

```
convertView = li.inflate(R.layout.activity_listview_addcontact_item, null); 
```

相反，将提供的父视图和 false 传递给备用重载的 inflate 方法：

```
convertView = li.inflate(R.layout.activity_listview_addcontact_item, parent, false); 
```

如果您不传递父级，则您在 xml 布局文件中设置的 layout_height 值将不会被接受。

# xml - 将值从 for 循环传递到另一个数组

> ID：15858270
> 
> 赞同：0
> 
> 时间：2013-04-07T02:34:20.193
> 
> 标签：xml, arrays, actionscript-3, loops

我正在从 XML 文件中检索值并将它们存储到`wordList`使用 Actionscript 3 调用的数组中。

说这些是 wordList 的值：熊、猫、狗、风筝、椅子

然后我需要格式化这些值并将它们存储在另一个名为`words` 的数组中，以便名为 words 的数组看起来像这样

```
words=[" bear", "cat", "dog", "kite", "chair"]; 
```

如何将数组的每个值括在引号中并将它们传递给称为单词的数组？

**我现在的代码**

```
function RetrieveWords(puzzleInput:XML):void {
    var wordList:XMLList = puzzleInput.Word.puzWord;

    for (var i:int = 0; i < wordList.length(); i++)
    {
        var wordElement:XML = wordList[i];
        pWord.push(wordElement);

        trace(pWord[i]);
    }

    trace("words");
    pWord.toString();
    trace(pWord);
} 
```

trace(pWord[i]) 列出了像这个熊猫狗风筝椅这样的词

***trace(pWord) 将值列为

熊,猫,狗,风筝,椅子

我需要将每个值括在引号中并将其传递给名为 words 的数组，使其看起来像这样

words=[“熊”、“猫”、“狗”、“风筝”、“椅子”]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:04:09.307

这一行：

```
wordList.push[i]; 
```

对我来说似乎并不正确。首先，要将项目推入数组，您应该使用括号而不是方括号，如下所示：

```
wordList.push(i); 
```

其次，你确定要推`i`送到这个数组上吗？`i`是你的 int 计数器`for loop`。

第三，`wordList`您要推入的阵列是否正确？看来`wordList`是你`XMLList`不是你的词组。

如果您想要基于 xml 中的单词创建一个单词数组，那么您可以执行以下操作：

```
var words:Array = new Array();
var wordList:XMLList = puzzleInput.Word.puzWord;                   
for (var i:int = 0; i < wordList.length(); i++)
{
    var wordElement:XML = wordList[i];
    words.push(wordElement);
    trace(words[i]);
} 
```

# bash - bash-completion - 在第一次调用命令时定义的完成函数

> ID：15858271
> 
> 赞同：4
> 
> 时间：2013-04-07T02:34:28.537
> 
> 标签：bash, bash-completion

我添加了一个新的 alias `scp_using_rsync`，它使用 rsync 通过某些选项通过 SSH 复制文件。我想将 scp 的 bash 完成链接到这个别名。

当我添加这一行时它起作用：

```
complete -o bashdefault -o default -o nospace -F _scp scp_using_rsync 2>/dev/null || complete -o default -o nospace -F _scp scp_using_rsync 
```

唯一的问题是我注意到，`_scp`只有在我在该 shell 中尝试使用 ssh/scp 至少一次完成制表符之后，才在我的 bash 环境中定义。所以如果我直接`scp_using_rsync`在一个新的 shell 中运行，我会得到`_scp`not found 错误。

在尝试 ssh 或 scp 命令的 tab 补全之前和之后的新 shell 中的输出`typeset -F`清楚地表明，在第一次尝试 tab 补全之后定义了以下函数：

```
$ diff ~/.scratch/file1 ~/.scratch/file2
224a225,227
> declare -f _scp
> declare -f _scp_local_files
> declare -f _scp_remote_files
226a230
> declare -f _sftp
230a235,240
> declare -f _ssh
> declare -f _ssh_ciphers
> declare -f _ssh_macs
> declare -f _ssh_options
> declare -f _ssh_suboption
> declare -f _ssh_suboption_check 
```

这些功能似乎是`/usr/share/bash-completion/completions/ssh`在我的系统中定义的。

这些是我的两个相互关联的问题：

*   第一次尝试完成时，bash 如何确定在哪里自动获取定义并定义它们？
*   我应该如何`scp_using_rsync`以类似的方式将 bash-completion for 链接到 scp 的 bash 完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T05:00:10.500

`Bash 4.1`为和增加了一个新`-D`选项：`complete``compgen``compopt`

> 新的 complete/compgen/compopt -D 选项，用于定义“默认”完成： **在未定义完成的命令上调用的完成**。如果此函数返回**124**，则再次尝试可编程完成，**允许用户在尝试完成时动态构建一组完成** ，方法是让默认完成函数在每次调用时安装单独的完成函数。

[bash手册](http://www.gnu.org/software/bash/manual/bashref.html#Programmable-Completion)中有一个例子：

```
_completion_loader()
{
     . "/etc/bash_completion.d/$1.sh" >/dev/null 2>&1 && return 124
}
complete -D -F _completion_loader 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T22:38:40.293

我在应用 whjm 的答案时遇到了问题。`_completion_loader`正如 Tuxdude 注意到的，在我的发行版（Ubuntu 14.04）中已经定义了一个函数。函数定义如下：

```
_completion_loader () 
{ 
    local compfile=./completions;
    [[ $BASH_SOURCE == */* ]] && compfile="${BASH_SOURCE%/*}/completions";
    compfile+="/${1##*/}";
    [[ -f "$compfile" ]] && . "$compfile" &> /dev/null && return 124;
    complete -F _minimal "$1" && return 124
} 
```

我想将完成的维护工作全部集中在一个地方，所以我添加了一个文件，`/usr/share/bash-completion/completions/`其中包含我想要为其添加完成的命令的名称。对于您的情况，您可以添加一个名为的文件，`scp_using_rsync`其中包含以下内容：

```
cfile="${compfile%/*}/scp"
cmd="${1##*/}"
. "$cfile" 
complete -F _scp $cmd 
```

这将获取定义完成的文件`scp`，包括`_scp`函数，然后为您的命令添加完成。我觉得这是一种更直接和一致的方式（当然要这样做，您必须同意为所有用户更改此行为。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-26T22:53:34.647

一些完成函数是动态加载的。您可以手动加载它们，以便它们可以使用别名。例如，您可以将其添加到您的`~/.bashrc`，以便完成将与您的别名一起使用。

`_completion_loader docker`

# design-patterns - 使用正确的模式

> ID：15858273
> 
> 赞同：1
> 
> 时间：2013-04-07T02:35:04.667
> 
> 标签：design-patterns, zend-framework2, observer-pattern

我想创建一个支付模块，这个模块将有一个用户可以支付产品的表单，支付完成后我想将支付信息保存在几个数据库表上。我想在不同的公司中使用这个模块，每个公司以不同的方式处理持久数据，例如一个将数据保存在一个表中，另一个保存在两个或树表中，我的想法是实现一个观察者模式，其中发布者（作为支付类）可以将付款信息推送到表类（作为订阅者）中，以便这些类可以将数据保存到他们的表中。

这是使用正确的模式吗？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:41:28.797

如果我对您的理解正确，您应该有一个来自支付提供商的响应的黑盒实现，并且有一次该模块可以被一家公司使用。你的想法看起来不错，确实。我的建议可能是使用命令设计模式。对于每种类型的响应：错误、拒绝付款、用户付款取消、付款成功等，每个公司都有自己的实现。并且每个具体的命令都会执行不同的支付状态。与 SuccessPayment 一样，CanceledPayment ... 实现了 ICOCommand 接口。这些具体的实现你可以留给公司。对您而言，唯一需要的是公司对支付提供商响应的特定处理结果。

# salesforce - userinfo.getuseremail() 在 salesforce 中返回 noreply@salesforce.com

> ID：15858274
> 
> 赞同：3
> 
> 时间：2013-04-07T02:35:07.153
> 
> 标签：salesforce, apex-code

我在 salesforce 中创建了一个包，它将使用用户的电子邮件 ID 发出一个 http 标注请求，以获取该电子邮件的数据并将数据添加到某个自定义对象。但是当我尝试使用`UserInfo.getUserEmail()`作为请求参数时，它使用`noreply@salesforce.com`. 当我在开发帐户上运行它时它确实有效。我也尝试过使用

```
1.String userName = UserInfo.getUserName();
2.User activeUser = [Select Email From User where Username = : userName limit 1];
3.String userEmail = activeUser.Email; 
```

但是第 2 行给了我一个错误说`List has no rows for assignment to SObject`

这是我的第一个 salesforce 软件包，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T18:53:56.237

[https://salesforce.stackexchange.com/questions/10413/userinfo-getuseremail-returns-noreplysalesforce-com-in-salesforce](https://salesforce.stackexchange.com/questions/10413/userinfo-getuseremail-returns-noreplysalesforce-com-in-salesforce)

这就是问题所在。丹尼尔回答得很好。对于遇到类似问题的人来说，这是因为计划的作业在他们的服务器上作为“幻像”进程运行。所以我们必须在使用 installhandler 或创建计划时为其提供 installedid。否则它不会对用户有任何了解。以某种方式保存installedid！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:16:12.753

```
List has no rows for assignment to SObject 
```

当没有找到行时返回。这不会解决问题，但最佳做法是将其分配给类似的列表

```
List<User> activeUsers = [Select Email From User where Username = : userName];
if(activeUsers.size() > 0)
  User activeUser = activeUsers[0]; 
```

[http://wiki.developerforce.com/page/Apex_Code_Best_Practices](http://wiki.developerforce.com/page/Apex_Code_Best_Practices)

要解决您的问题，您运行查询的两次之间的配置文件可能因分配的权限不同而不同。如果您没有设置对用户对象的读取权限，您会收到这样的错误。

# perl - Perl 函数调用让我很困惑

> ID：15858275
> 
> 赞同：5
> 
> 时间：2013-04-07T02:35:17.403
> 
> 标签：perl, function-call

一个 perl 函数调用把我弄糊涂了，谁能帮帮我？</p>

`catFiles`像这样调用：

```
catFiles( \@LINKFILES => "$output_prefix.links" ); 
```

`catFiles`函数定义：</p>

```
sub catFiles {

    unlink("$_[1]") if(exists $_[1]);
    system qq( cat "$_" >> "$_[1]" ) for @{$_[0]};
} 
```

我不知道为什么会有`=>`我认为应该是`,`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T02:45:22.947

`=>`（几乎）等价`,`于 Perl。（有关差异，请参阅[“官方”文档](http://perldoc.perl.org/perlop.html#Comma-Operator)。）

通常在定义哈希时使用它来表示键和值之间的关系：

```
my %hash = (
  'a' => 1,
  'b' => 2,
); 
```

我们可以把它写成`my %hash = ('a', 1, 'b', 2);`不改变行为，但这看起来不太好。你甚至可以这样做`my $hash = ('a', 1 => 'b', 2);`，但这只是令人困惑。

同样，在您的情况下，您可以将代码编写为

```
catFiles(\@LINKFILES, "$output_prefix.links"); 
```

它会做与版本相同的事情`=>`。

在这里它被用作语法糖，我想表明 的内容`@LINKFILES`将被连接到`"$output_prefix.links"`.

# javascript - 检测选中的单选按钮并触发点击

> ID：15858277
> 
> 赞同：0
> 
> 时间：2013-04-07T02:35:41.167
> 
> 标签：javascript, jquery, triggers, radio-button

我有一组 4 个单选按钮，当单击页面上的显示/隐藏 div 时。

在我的表单验证不成功时，我将用户返回到表单并选中最后一次单击的单选按钮。

我遇到的问题是它没有显示/隐藏 div，因为在这种情况下，单选按钮没有被单击。

我想要做的是在页面加载时检测哪个单选按钮被选中，然后触发一个点击事件。（即模拟某人单击该单选按钮），以便它显示/隐藏我的 div。

我的代码显示隐藏看起来像这样

```
$('#showduo').click(function(){
$('div[id^=div]').hide();
$('#div1').show(); 
```

html:

```
<input type="radio" name="type" value="Single" id="hideall" <?php echo set_radio('type', 'Single', TRUE); ?> />
<input type="radio" name="type" value="Singleplus" id="showsingleplus" <?php echo set_radio('type', 'Singleplus'); ?> />
<input type="radio" name="type" value="Duo" id="showduo" <?php echo set_radio('type', 'Duo'); ?> />
<input type="radio" name="type" value="Family" id="showfamily" <?php echo set_radio('type', 'Family'); ?> />

<div id="div1" style="display:none;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:59:50.657

如果您`.click()`在所选单选按钮上不带任何参数调用，它将执行该按钮的单击处理程序，就像用户单击它一样。

尝试：

```
$('input:radio[name=xxx]:checked').click(); 
```

当然，您必须将“xxx”更改为您为单选按钮指定的名称。

注意：我不得不说我不会拥有它，所以每个单选按钮都有自己的处理程序。这意味着如果要添加另一个单选按钮，则必须添加 JavaScript。

# php - MYSQL 5.5 27 需要从 -200000000 开始 ID 并正常递增每条记录 +1

> ID：15858278
> 
> 赞同：0
> 
> 时间：2013-04-07T02:35:45.747
> 
> 标签：php, mysql, sql

我有一个客户希望将 MSSQL DB 移植到 MYSQL。ID都是负整数，我需要创建一些带有负整数的MySQL表，从-200000000开始，然后像每条新记录一样增加+1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:45:19.593

您不能使用带有负数的自动递增字段。来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/innodb-auto-increment-handling.html)：

> 如果用户为列分配负值或者该值变得大于指定整数类型中可以存储的最大整数，则不会定义自动增量机制的行为。

我建议将您想要的 ID + 200000000 存储在 MySQL 中。但想必你已经想到了，只想将负数存储为 ID。您的客户必须生成 ID，并且您必须确保 ID 生成对并发问题是安全的。这是一种解决方案（免责声明：尚未对其进行测试，对于许多并发用户来说可能不是很有效）：

```
LOCK TABLE MyTable READ; -- Make sure no one else can use the table
SELECT MAX(ID) FROM MyTABLE; -- Find out what the current ID is
INSERT INTO MyTable(ID, OtherColumn) VALUES(-100, "x"); -- Derive the ID from the previous value
UNLOCK TABLES; -- Allow others to use table again 
```

该`MyTable.ID`专栏必须签名。

# flask - 即使我有语法错误，是否可以继续使用烧瓶重新加载

> ID：15858279
> 
> 赞同：6
> 
> 时间：2013-04-07T02:35:49.933
> 
> 标签：flask, development-environment

Flask 的自动重载器非常好，但是我经常犯语法错误，导致重载器崩溃。

是否可以让重新加载器捕获语法错误并仍然打印它，但是当有问题的文件再次更改时继续重新加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:19:18.943

看看[Flask-Failsafe](https://pypi.python.org/pypi/Flask-Failsafe/)，这里有作者的[更多内容](http://flask.pocoo.org/mailinglist/archive/2012/9/15/avoid-reloader-crashes-with-flask-failsafe/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T18:38:07.737

这个问题的 2021 年答案是使用`flask run`. 您可能也想`FLASK_ENV=development`在环境中设置。Flask 运行器会将您的代码包装在一个安全的加载器中，该加载器在加载 Python 代码时会处理语法错误。

请注意，在 Flask 2.0.1（目前的最新版本）中有一个[错误](https://github.com/pallets/flask/pull/4169)，您的代码中的语法错误将被一个奇怪的 TypeError 替换。该错误已于 2021 年 6 月底修复，但该版本尚未发布。错误报告不是很好，但是一旦你修复了语法错误，Flask 就会重新加载。

# magento-1.7 - 在 Magento 中的 Product VIEW 页面上显示 Collection 计数（就像它在 LIST/GRID 页面上显示的那样）

> ID：15858282
> 
> 赞同：0
> 
> 时间：2013-04-07T02:36:11.997
> 
> 标签：magento-1.7, toolbar

我是 Magento 1.7.0.2 的新手，我正在尝试在产品视图页面上进行一些小修改。

我想在产品展示的当前类别下显示 ACTIVE 产品的数量。在类别页面列表/网格中，类别显示 5 个项目。实际上，它们是该类别下的 6 个产品，但其中一个是 DISABLED。

如果我使用 $category->getProductCount() 我得到 6 而不是 5 就像它在类别页面上显示的那样。

如何在当前类别下显示正确的产品数量，就像类别页面中的情况一样？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:23:37.490

我对 Magento 也很陌生，但请尝试这样做：

```
$products = Mage::getModel('catalog/category')->load($yourCategory->getId())
->getProductCollection()
->addAttributeToFilter('status', 1); // Enabled products only

echo $products->count(); 
```

我希望它会奏效。

# jquery - 需要 jQuery 选择器帮助

> ID：15858285
> 
> 赞同：1
> 
> 时间：2013-04-07T02:36:36.517
> 
> 标签：jquery, jquery-selectors

这是我的 HTML 片段。我正在订阅锚点“查询”的“点击”事件。我如何遍历以获得`data-driverid`价值？

```
<div class="DriverWrapper" data-driverid="108WW" style="background-color: Silver; padding: 4px 4px 4px 4px; page-break-before: always;">
    <strong>Driver ID:</strong>&nbsp;108WW
</div>

<table style="width: 100%;">
    <tr>
        <td style="vertical-align: top; width: 20%">
            <strong>174794</strong>&nbsp;
            <a href="#" class="inquireTripLink">inquire</a> 
```

编辑：

我试过这个，它显示警报`null`

```
$(".inquireTripLink").on("click", function (event) 
{
    event.preventDefault();

    var driverId = $(this).closest('.DriverWrapper').data('driverid');
    alert(driverId); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:39:17.343

你可以使用`closest`方法。

```
$('.inquireTripLink').click(function(){
   var id = $(this).closest('.DriverWrapper').data('driverid');
}); 
```

**更新：**该`div`元素不是单击元素的父元素，您已在`div`标签后关闭`strong`标签。您可以使用`prev`方法：

```
$('.inquireTripLink').click(function(){
   var id = $(this).closest('table').prev('div').data('driverid');
}); 
```

[http://jsfiddle.net/J8cWT/](http://jsfiddle.net/J8cWT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:45:12.733

试试这个：

```
$(".inquireTripLink").on("click", function (event) {
    event.preventDefault();
    var driverId = $(this).closest('table').prev('.DriverWrapper').data('driverid');
    alert(driverId);
}) 
```

您的链接似乎在一个表中，该表不是 div 的子级，而是兄弟级。

**[jsFiddle 示例](http://jsfiddle.net/j08691/PZdPY/1)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:37:23.070

尝试`$(this).closest("[data-driverid]").data("driverid")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T02:44:43.497

```
$(this).closest("table").prev(".DriverWrapper").data("driverid"); 
```

如果您更改标记，它将中断，但它适用于您发布的 html。您可以考虑添加一个共同的父级，然后改为执行以下操作：

```
$(this).closest("COMMON PARENT").find(".DriverWrapper").data("driverid"); 
```

# apache - Node.js 和 Apache ...如何在两者之间共享 POST 数据？

> ID：15858287
> 
> 赞同：1
> 
> 时间：2013-04-07T02:37:21.803
> 
> 标签：apache, node.js

说我有一个登录表单->

```
<form action="$_SERVER["PHP_SELF"]" method="POST">
 <input...>
 <input...>
</form> 
```

将 PHP 与 Apache 一起使用时，我将通过此变量获取 POST 数据：`$_POST["example"]`

但是，我想使用它`$_POST["example"]`来验证 Node.js 服务器上的用户。

所以用户不需要输入两次表格。

如何从 APACHE 获取 POST 数据到 Node.js 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:47:05.617

您也可以使用其中一个库`curl`或其中一个`HTTPClient`库将`POST`数据发送到您的节点应用程序。或者，您可以将`POST`数据写入您的节点进程输入流。

# asp.net - asp.net mvc 4 验证，比较两个“System.TimeSpan”字段

> ID：15858293
> 
> 赞同：2
> 
> 时间：2013-04-07T02:38:41.590
> 
> 标签：asp.net, asp.net-mvc, web, validation

我在 asp.net MVC4 项目上工作我想知道如何为“时间跨度”添加验证我在 ASP.NET MVC 之前使用了 Fluent Validation：LessThan 和 GreaterThan 我已经添加

```
[Required]
public System.TimeSpan Start_hr { get; set; }
[Required]
public System.TimeSpan End_hr { get; set; } 
```

我曾经[http://foolproof.codeplex.com](http://foolproof.codeplex.com)

```
[Required]
public  System.TimeSpan Start { get; set; }

[Required]
[GreaterThan("Start")]
public  System.TimeSpan End { get; set; } 
```

但它不适用于“System.TimeSpan”

您知道如何将验证添加到“System.TimeSpan”字段

**更新：**

似乎万无一失不适用于EF [http://forums.asp.net/t/1752975.aspx/1](http://forums.asp.net/t/1752975.aspx/1)

# asp.net - Asp.net webforms C# 文件编译

> ID：15858296
> 
> 赞同：1
> 
> 时间：2013-04-07T02:39:18.407
> 
> 标签：asp.net, web, compilation

我有一个 asp.net 4.0 网络表单应用程序。它是一个网站，而不是一个项目，因此在部署之前没有预编译。

我对单个代码隐藏文件（c# 文件）进行了更改，我需要将其上传到网站。如果我只上传这个文件，它会在网站上编译吗？还是我需要上传其他文件来触发编译？例如，我需要上传前端的.aspx 文件吗？

我问这个是因为我所做的更改适用于我的开发机器，但不适用于生产服务器。我怀疑上传的 C# 文件可能尚未在 Web 服务器上编译，因此，该网站仍在运行较旧的 C# 文件。

有人对此有想法吗？提前致谢。

编辑：我应该指定它是一个**网站项目**，而不是一个网络应用程序项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:02:14.217

您不必再次编译它。上传新文件后，您的 Web 应用程序应该会更新。很可能是缓存问题。尝试使用其他浏览器或清除当前浏览器上的缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:22:14.770

当您在生产服务器上的网站项目上上传新的 CS 文件时，它应该动态地重新编译它们以允许拾取更改。是否有可能它在农场上并且所有服务器都没有更新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:58:01.700

让我澄清一下。您从后面的代码中对 ASP.NET 页面进行了更改。现在，您要将这些新更改上传到服务器。那是对的吗？

好的，您只需将更新的 .ASPX 页面（当然还有它的代码隐藏文件自动）上传到服务器并替换旧的 .ASPX 页面。现在应该会出现对该特定页面的更改。无论您是否预编译您的网站，这都无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:34:46.607

我有答案。我很抱歉，因为它可能甚至不应该被问到。H. Javier 在上面是正确的，正如我今天早上发现的那样（在看到他的答案之前）。

抱歉，原来我的同事上传到了 Web 服务器上的错误目录……我看不到发生了什么……这是一个冗长的故事，但我正在远程工作，没有直接访问权限自己到网络服务器。

但是，嘿，对于任何好奇的人，我只是上传了代码隐藏 (myFile.aspx.cs) 文件，asp.net 引擎发挥了它的魔力并且它工作了。因此无需上传其他文件（如前端 myFile.aspx 或 web.config）来强制编译。它自动发生。

谢谢你。

# python - 从列表中选择随机值，直到它们在 Python 中消失

> ID：15858298
> 
> 赞同：0
> 
> 时间：2013-04-07T02:39:34.203
> 
> 标签：python, arrays, list, random, population

使用 Python，我想从列表中随机选择人员并将他们分成 5 组，而不是多次选择同一个人。这些人由两个标准定义：年龄和性别。人员列表如下所示：

PPL= [1, 4, 6], [2, 5, 5], [3, 7, 3], [4, 2, 8], [5, 4, 6]

其中每个列表中的 3 个数字代表：年龄类别 (1-5)、男性人数、女性人数。我意识到 5 的分组并不重要，因为我所要做的就是制作一个随机列表（然后我可以一次数出 5 个），但我不确定如何在不重复使用的情况下制作一个随机列表人们。有什么建议么？
我从以下开始（实际上只是打印剩余的男性和女性）：

```
import random

PPL = [1, 4, 6], [2, 5, 5], [3, 7, 3], [4, 2, 8], [5, 4, 6]

age = range(0, 6)
gender = [1, 2]#1 = male, #2 = female

randomAge = random.choice(age)
randomGender = random.choice(gender)

count = 0
PPLcounter = 0
for P in PPL:
        while P[randomGender] > 0:
            PPL[PPLcounter][randomGender] = P[randomGender] - 1
            MRemaining = PPL [PPLcounter][1]
            FRemaining = PPL [PPLcounter][2]
            count = count+1
            print count, MRemaining, FRemaining
        PPLcounter += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:13:53.460

扩展 Joel Cornett 的评论和 A. Rodas 的例子：

这是你想要的吗：

```
import random

def gen_people_in_group(age, num_male, num_female):
    males = ['m%s' % age] * num_male
    females = ['f%s' % age] * num_female
    return males + females

def gen_random_sample(num_in_group=5):
    groups = [1, 4, 6], [2, 5, 5], [3, 7, 3], [4, 2, 8], [5, 4, 6]

    population = []
    for group in groups:
        population += gen_people_in_group(*group)

    random.shuffle(population)

    for idx in xrange(0, len(population), num_in_group):
        yield population[idx:(idx + num_in_group)]

def main():
    for rand_group in gen_random_sample():
        print rand_group

if __name__ == '__main__':
    main() 
```

这是一个输出：

```
['m3', 'f3', 'm5', 'f4', 'm1']
['f4', 'f4', 'm4', 'f2', 'm2']
['m4', 'f3', 'm5', 'm3', 'f5']
['m3', 'f5', 'f1', 'm3', 'f4']
['m5', 'f2', 'f1', 'f1', 'f5']
['m1', 'f2', 'f2', 'f1', 'm2']
['f5', 'f4', 'f4', 'm2', 'f4']
['m3', 'm2', 'f2', 'f1', 'f5']
['m3', 'm5', 'm2', 'f5', 'f1']
['m1', 'm3', 'f3', 'm1', 'f4'] 
```

# algorithm - 有向无环图中的最长路径

> ID：15858303
> 
> 赞同：1
> 
> 时间：2013-04-07T02:40:35.473
> 
> 标签：algorithm, directed-acyclic-graphs, longest-path

如何在没有权重的 DAG 中找到最长的路径？

我知道如果对 DAG 进行拓扑排序，则可以在线性时间内找到从 A 到 B 的最长路径，但我需要在所有图中找到最长的路径。有没有比搜索所有顶点对之间的最长路径更快的方法（这将是 O(n^3)）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:51:26.517

这与找到关键路径相同。

有一个简单的 O(n) DP 解决方案：

*   对顶点进行拓扑排序。
*   对于每个顶点，`i`我们将记录`earliest(i)`最早可能的开始时间（所有顶点最初为 0）。`i`以拓扑排序的顺序处理每个顶点，更新（增加）任何时候的`earliest(j)`任何后继顶点`j`。`i``earliest(i) + length(i, j) > earliest(j)`

完成后，所有顶点的最大值`earliest(i)`将是关键路径的长度（最长路径）。您可以通过从该顶点向后追溯来构造一条（通常可能不止一条）最长的路径，查看它的前辈，看看它们中的哪一个可以产生它作为后继（即它们中的哪一个有`earliest(i) + length(i, j) == earliest(j)`），迭代直到你命中没有前任的顶点。

# ios - 低于 iOS 6.0 的设备的广告标识符

> ID：15858310
> 
> 赞同：1
> 
> 时间：2013-04-07T02:42:28.797
> 
> 标签：ios, udid

看来我们不能再使用`[UIDevice currentDevice].uniqueIdentifier`了。应该使用广告标识符。但广告标识符仅从 iOS 6.0 开始可用。

如何唯一识别低于 iOS 6.0 的设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T09:23:24.003

是的，唯一标识符已被弃用。为此，我有一个解决方案。请通过以下链接，我相信这是苹果 UDID 的替代品。

[https://github.com/ylechelle/OpenUDID#usage](https://github.com/ylechelle/OpenUDID#usage)

[http://www.secureudid.org](http://www.secureudid.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:36:26.773

在第一次启动应用程序时，使用 创建一个 UUID `CFUUIDCreate`，使用 将其转换为字符串`CFUUIDCreateString`，然后将其保存到应用程序缓存目录中的文件中。在应用程序的后续启动时，使用保存到文件中的 UUID 而不是创建新的。

# ruby-on-rails - Rails 获取字段具有特定值的随机记录

> ID：15858313
> 
> 赞同：0
> 
> 时间：2013-04-07T02:43:18.397
> 
> 标签：ruby-on-rails, ruby

我需要获取一个字段值为 的随机`status`记录`2`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:32:42.580

如果您担心速度，这可能会更快：

```
Model.where(status: 2).offset(rand(Model.where(status: 2).count)).first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:50:29.377

真正的黑客方法是：

```
Model.where(:status => 2).order('RAND()').first 
```

请注意，`ORDER BY RAND()`在大桌子上可能会非常慢，但对于小桌子来说没问题。

# php - 如何在 Facebook 上发帖并标记朋友和地点？

> ID：15858314
> 
> 赞同：2
> 
> 时间：2013-04-07T02:43:46.880
> 
> 标签：php, facebook, facebook-opengraph

我正在阅读 Facebook 的新 api（opengraph）已经改变，我正在尝试发布一些东西并在上面标记几个朋友......根据这个[https://developers.facebook.com/docs/reference/api/user/ #posts](https://developers.facebook.com/docs/reference/api/user/#posts)我应该在“标签”部分指定ID，但不起作用，我看过一些参考资料，但很旧......

问题是它确实张贴在墙上，但没有标记或显示该地点。

我为此使用php。

有人做过这个吗？？

这是我的代码

```
$post = array('message' => 'my message ',
                'name' => 'name',
                'caption' => "something", 
                'link' => 'my page',
                'description' =>"some desc",
        'place' => '323816477724410',<--- id of a city
                'tags' => 'xxxxxx', <---- facebook id

                );    
$result = $facebook->api("/".$user."/feed/", 'post', $post); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T15:26:02.837

请检查错误日志。将您的代码放入 try{} catch{} 中，并打印异常数组，如下所示：

```
try{
    $result = $facebook->api("/".$user."/feed/", 'post', $post);
} catch (FacebookApiException $e) {
    print_r($e); // or error_log($e);
} 
```

# php - PHP 搜索可能在修剪时出错

> ID：15858316
> 
> 赞同：0
> 
> 时间：2013-04-07T02:43:53.913
> 
> 标签：php, mysql, forms

我正在尝试使用 $PHP_SELF 从表单中收集值并在同一页面上返回结果。该页面本身就是一个 PHP 页面，如果这很重要的话。

我似乎看不到我明显有的错误。我正在使用的错误处理程序告诉我错误在第 22 行（带有 $searchTerm = trim($name); 的行），但我怀疑它可能在 php 命令的下方，尽管我已经尝试过注释掉东西和剥离东西和减少东西等的各种组合，我从来没有得到页面，在初始加载时，没有给我第 22 行的错误，这是查询部分的开始这页纸。如果我将表单放在查询中的所有 php 之前，我可以看到表单，但我仍然有错误。如果我把表格放在查询下面，我看不到表格。

奇怪的部分是表格完美地工作。而且，点击提交按钮后，我没有显示错误，只有正确的结果。我想错误可能在于我如何封闭（或不封闭）它的查询处理部分，但在这一点上，我看不到它。我把这个网站上的几个问题和我通过谷歌搜索找到的教程放在一起。所以我对命令是正确的感到很舒服，我只是不明白为什么我会显示错误。

这是代码的最新版本，它与我所做的其他尝试完全相同的错误。PHP 的整个部分，从 $searchterm 到 mysqli 是否应该用括号括起来？我正在使用对初始 if 语句上方的 conn 文件的调用。这是两个功能完全正确的页面的组合 - 我在表单操作中使用了另一个页面的名称 search.php。不知何故，将它们结合起来会让事情变得非常、非常错误。

```
if(isset($_POST['submit'])) 
{ 
$name = $_POST['name'];
echo "User has entered this name : <b> $name </b>"; 
}

//capture search term and remove spaces at both ends, if there are any
$searchTerm = trim($name);

//connect to database
$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME) or die('Error connecting to MySQL server.');

//MYSQL search statement
$query = "SELECT CompanyName FROM Companies WHERE CompanyName LIKE '%$searchTerm%'";

$results = mysqli_query($dbc, $query);

//Check whether there were matching records in the table by counting the number of results returned
if(mysqli_num_rows($results) >= 1) 

    while($row = mysqli_fetch_array($results))
    {
        echo '<div class="query">' . $row['CompanyName'] . '</div>';
    } else
        echo "No match found for " . $searchTerm;

 mysqli_close($dbc); 
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input type="text" name="name"><br>
   <input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:13:34.917

该错误很可能是由于您`if(isset($_POST['submit']))`过早关闭而引起的。`$name`仅在表单 post 上设置`$name = $_POST['name'];`，因此在初始页面加载时，调用时未设置`$searchTerm = trim($name);`。尝试将右括号`}`从`if(isset($_POST['submit']))`移到 after ，`mysqli_close($dbc);`这样您的所有 php 代码在表单发布之前不会运行。

```
if(isset($_POST['submit'])) 
{ 
$name = $_POST['name'];
echo "User has entered this name : <b> $name </b>"; 
// remove closing bracket from here

//capture search term and remove spaces at both ends, if there are any
$searchTerm = trim($name);

//connect to database
$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME) or die('Error connecting to MySQL server.');

//MYSQL search statement
$searchTerm = mysqli_real_escape_string($searchTerm); // Escape user data to prevent SQL Injection
$query = "SELECT CompanyName FROM Companies WHERE CompanyName LIKE '%$searchTerm%'";

$results = mysqli_query($dbc, $query);

//Check whether there were matching records in the table by counting the number of results returned
if(mysqli_num_rows($results) >= 1) 

    while($row = mysqli_fetch_array($results))
    {
        echo '<div class="query">' . $row['CompanyName'] . '</div>';
    } else
        echo "No match found for " . $searchTerm;

 mysqli_close($dbc); 
}  // move closing bracket to here
?> 
```

# html - 如何仅针对 HTML 中的传出链接

> ID：15858317
> 
> 赞同：3
> 
> 时间：2013-04-07T02:44:35.380
> 
> 标签：html

`<header>`我想用一些简单的代码强制我网站上的所有传出链接在新选项卡中打开。我知道您可以使用标签中的以下代码强制*所有*链接在新标签中打开`<header>`：

```
<base target='_blank' /> 
```

但我只想定位传出链接（以便不会在新选项卡中打开指向我网站上另一个页面的链接）。无论如何要这样做？我觉得应该有...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:04:35.413

我在我的网站上使用 Javascript 做到了这一点。我发现在页面加载时解析我的所有链接并以`_blank`编程方式添加目标比手动将属性添加到链接更容易。（奖励：篡改`target`JS 中的属性可以让您的代码[验证](http://validator.w3.org/)）

我在我的网站上使用了 JQuery，但逻辑非常简单：

```
$(document).ready(function()
{
    parseLinks();
});

function parseLinks()
{
    // Manage external links
    $("a").each(function()
    {
        if ($(this).attr("href").indexOf("://") >= 0)
        {
            $(this).attr("target", "_blank");
        }
    });
} 
```

如果您不想使用 JQuery：

```
window.onload = function()
{
    parseLinks();
};

function parseLinks()
{
    // Manage external links
    var Links = document.getElementsByTagName("a");
    for (var i = 0; i < Links.length; i++)
    {
        if (Links[i].href.indexOf("://") >= 0)
        {
            Links[i].target = "_blank";
        }
    }
} 
```

我将它放在一个函数中，以便您可以`parseLinks`在需要重新运行代码时调用（AJAX 调用、用户交互后等）

# visual-c++ - 如何在 C++ 中开始计时？

> ID：15858318
> 
> 赞同：1
> 
> 时间：2013-04-07T02:44:36.583
> 
> 标签：visual-c++, time.h

有人知道开始计算时间的函数或库吗？因为我正在做一个需要计算事件发生时间的项目。

伪代码

```
start time
if ( seconds % 2 == 0 )
{
    counter++

} 
```

我选择了 2 秒，因为它是一个不错的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:20:52.723

通常，周期性事件生成是使用单独的线程完成的，该线程使用操作系统调用来使用操作系统计时器服务，以便提供合理准确的计时器事件。单独的线程将调度定时器事件并等待定时器到期，此时线程唤醒并开始执行。一旦工作完成，就会安排一个新的计时器事件。

但是，如果不需要很高的准确性，您可以采用线程的方法，该线程执行给定毫秒数的等待，然后发出事件，然后循环返回以进行定时等待或再次休眠。

最重要的部分通常是你必须让正在做的事情等待成为另一个线程，这样主线程就不会被阻塞。这个想法是有一个工作线程充当事件生成器，而您的主线程和任何其他线程正在处理它们自己的事件，例如用户界面事件。

请参阅[C++ 使用线程作为计时器](https://stackoverflow.com/questions/6732238/c-use-thread-as-timer)。

还有这个[代码项目 Threads and Timers](http://www.codeproject.com/Articles/5958/Threads-And-Timers)。

# javascript - HTML元素属性动态赋值

> ID：15858319
> 
> 赞同：0
> 
> 时间：2013-04-07T02:44:37.223
> 
> 标签：javascript, jquery, html

假设我有以下 HTML 代码：

```
<HTML>
    <BODY>
        <FORM>
            <div name="container" id="setup">
                <div name="element 1" id="element 1"> 
                    <input type="button" value="xxx" name="button 1" />
                </div>
            </div>
        </FORM>
    </BODY>
</HTML> 
```

我想实现以下目标：

无论父节点 ID 是什么（在本例中为“元素 1”），而不是静态“xxx”，都分配按钮值。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:46:57.610

```
$('input[type="button"]').val(function(){
  return this.parent.id;
}); 
```

大概是这样的吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:11:12.697

您可以设置按钮 ID
**id 和 name 之间不应有空格是 html**
例如

```
<div name="element1" id="element1"> 
     <input type="button" value="xxx" name="button1" id=button1/>
</div> 
```

Javascript =>

```
 var button = document.getElementById('button1');
    var parentId = button.parentNode.id;
    button.setAttribute('value',parentId); 
```

**您也可以在特定事件或您希望的情况下执行此操作。**

**[在此处查看代码片段](http://jsfiddle.net/BWtjm/)**

# image - 如何在 GPUImage 中叠加一系列图像

> ID：15858322
> 
> 赞同：0
> 
> 时间：2013-04-07T02:44:47.960
> 
> 标签：image, overlay, sequence, blend, gpuimage

我一直在查看 GPUImage，但在显示和录制视频时无法弄清楚如何在视频顶部叠加一系列 png 或 jpg 图像。我想要在视频顶部叠加（或实际相乘）的序列中大约有 150 张照片。似乎我应该能够在两个图像叠加或乘法过滤器中每隔 1/24 秒将纹理从一帧换到下一帧。我不确定这是否会起作用？

在一个相关问题中，如果我根据两个输入混合过滤器制作自定义过滤器，在实例化过滤器并开始相机捕获后，是否有任何方法可以从 UIImage更改*第二个纹理？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:06:22.737

实际上，我确实设法让它工作，尽管不是以我最初打算的方式，但它也能正常工作。我必须做的是使用 GPUImageMovie 对象。

所以代码看起来像：

```
filter10 = [[GPUImageAddBlendFilter alloc] init];

[filter10 forceProcessingAtSize:_imageView7.sizeInPixels];

NSURL *url = [[NSBundle mainBundle] URLForResource:@"sample_film" withExtension:@"mov"];

_imageMovie = [[GPUImageMovie alloc] initWithURL:url];

_imageMovie.playAtActualSpeed = true;

_imageMovie.delegate = self;

[_imageMovie addTarget:filter10];

[_imageMovie startProcessing];

[filter10 addTarget:_imageView7];

[_videoCamera startCameraCapture]; 
```

多亏了 Brad Larson 的 GPUImage，我终于能够制作出我想要制作的具有足够性能的视频应用程序，而不必依赖 CIFilter，它没有我需要的一切。我需要为一件事编写一些自定义过滤器。

# asp.net - 使用下拉列表中选择的值过滤列表视图中的项目

> ID：15858324
> 
> 赞同：0
> 
> 时间：2013-04-07T02:45:18.243
> 
> 标签：asp.net, listview, html.dropdownlistfor

我是 asp.NET 的新手，我想根据下拉列表（产品类别）中选择的值在列表视图中显示产品列表。

我一直在寻找，但没有任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:52:28.583

您可以为此使用数据视图行过滤器：

```
String filterValue = drp.SelectedValue;
DataTable dt = Your datatable;
DataView dv = dt.DefaultView;
dv.RowFilter = "product_category = '" + filterValue + "'";
lstView.DataSource = dv;
lstView.DataBind(); 
```

# android - 我只想清除此代码

> ID：15858327
> 
> 赞同：0
> 
> 时间：2013-04-07T02:45:24.647
> 
> 标签：android

我尝试编写此代码，但在页眉和页脚应该加载的部分出现错误。我从这篇文章 [Android ListActivity - 固定页眉和页脚](https://stackoverflow.com/questions/13401760/android-listactivity-fixed-header-and-footer)中得到了这个，我只是检查希望这不会导致人们错误代码...错误提示错误：在包'android'中找不到属性'above'的资源标识符错误：在包'android'中找不到属性'below'的资源标识符

或者我只是弄错了当我错的时候忽略它

```
 In main.xml

 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <include
    android:id="@+id/header_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/header.xml" />

 <ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:below="@id/header_layout"
    android:above="@id/footer_layout" />

   <include
    android:id="@+id/footer_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/footer.xml" />
  </RelativeLayout>
In header.xml

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

   <TextView
       android:id="@+id/header_text_view"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:text="Your Application Title"/>
 </LinearLayout>
In footer.xml`enter code here`

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

  <Button
       android:id="@+id/done_button"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:text="Done"/>
 </LinearLayout> 
```

在活动中，这里

```
 public class MainActivity extends ListActivity {

 private ListView mListView;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mListView = (ListView) findViewById(R.id.list_view);
    // Now you can do whatever you want

   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:49:52.253

在 main.xml中更改`android:below`为`android:layout_below`和`android:above``android:layout_above`

**编辑**：还有其他方法可以做到这一点，可能会更好。

*选项 A*：改为使用垂直 LinearLayout。注意列表视图的布局属性；这些将允许它伸展以填充页眉和页脚视图未占用的空间。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/header_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        layout="@layout/header.xml" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <include
        android:id="@+id/footer_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/footer.xml" />
</LinearLayout> 
```

*选项 B*：如果您不调用，ListActivity 会自动为您提供一个 ListView `setContentView()`。在这种情况下，您将自己创建或扩展页眉和页脚视图，并将它们添加到代码中的列表视图中。

```
public void onCreate(Bundle saved) {
    super(saved);
    ListView list = getListView();
    LayoutInflater inflater = getLayoutInflater();
    View headerView = inflater.inflate(R.layout.header, list, false);
    View footerView = inflater.inflate(R.layout.footer, list, false);

    // these must be called before list.setAdapter()
    list.addHeaderView(headerView);
    list.addFooterView(footerView);
    /* ... */
} 
```

# linux - linux open 返回 0

> ID：15858330
> 
> 赞同：1
> 
> 时间：2013-04-07T02:45:45.557
> 
> 标签：linux, system-calls

代码是这样的：

```
int fd = open(filename, O_RDONLY); 
```

“最大打开文件”为 1024。该进程可能打开数百个文件。一开始，它运作良好。过了一会儿，open返回0。我不知道为什么。帮助！！！提前谢谢！

*ps: 不是`int fd = open(filename, O_RDONLY) == -1;`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T02:48:37.683

返回 0时`open`，它告诉您如果要使用刚刚打开的文件，应该使用 fd 0。

您是否可能关闭了标准输入？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:55:55.693

admin 可以更改 ulimit 的一些参数 admin 可以设置“ulimit -n 2000”，每个进程的打开文件数可以是 2000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T09:45:32.043

它返回 0 因为您在这里使用了关系运算符。Some == another 总是 0 或 1 在你的情况下，它告诉你 open 没有返回 -1。

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“自动完成”

> ID：15858331
> 
> 赞同：5
> 
> 时间：2013-04-07T02:46:03.313
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我正在尝试`autocomplete`在 ASP MVC 3 网页上使用 jQuery 功能。不幸的是，我不断收到此错误。我查看了我正在使用的版本 1.9.2，它确实具有自动完成方法。然而，我对 jQuery 完全陌生，不确定标头中是否有太多声明、冲突的库或缺少的声明。

下面是视图中的代码

```
<link href="../../Content/jquery-ui-1.9.2.custom.css" rel="stylesheet">

<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.tablesorter.min.js")" type="text/javascript"></script>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js"></script>
<script type="text/javascript">

    $(document).ready( function() {
      $('#BankName').autocomplete('@Url.Action("GetBanks", "AgentTransmission")', {
          dataType: 'json',
          parse: function(data) {
              var rows = new Array();
              for(var i=0; i<data.length; i++){
                  rows[i] = { data:data[i], value:data[i].SignalName, result:data[i].SignalName };
              }
              return rows;
          },
          formatItem: function(row, i, n) {
              return row.SignalName + ' - ' + row.Description;
          },
          width: 300,
          mustMatch: true,
      });
    }); 
```

完整的 html 可以在这里找到：http: [//jsfiddle.net/qpvBv/](http://jsfiddle.net/qpvBv/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T03:36:52.787

**您正在使用多个版本的 jQuery。只包括一个并将其放在所有脚本的顶部。**

包含多个版本的 jQuery 不起作用，因为：

1.  首先你包括 jQuery 1.8.3。这没关系（ish）。
2.  然后包含 jQuery UI 1.9.2。这也没关系，尽管我可能会确保 jQuery 和 jQuery UI 的版本匹配。jQuery UI 1.9.2 安装在 1.8.3`jQuery`对象上。
3.  然后包含更多插件，也安装在 1.8.3`jQuery`对象上。
4.  然后你包括 jQuery 1.6.4。除了过时之外，它还`jQuery`用自己的 1.6.4`jQuery`对象覆盖了 1.8.3 对象，并用它覆盖了旧对象上的所有插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T16:33:40.090

我遇到了同样的问题，结果发现 jQuery 被多次包含，就像 icktoofay 所说的那样。

我很难找出它被包含在哪里。我找到了一种简单的方法来查找位置，如果您在本地包含文件而不是导入它们，那么您只需添加 alert('JQUERY INCLUDED'); 在文档的顶部。

然后，当页面加载时，每当您导入库并弹出一个窗口时，它都会冻结。对我来说，它原来是在一个 ajax 调用期间，否则调试将是一场噩梦。希望这会帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T18:43:00.367

我标记了icktoofay的答案，但我想补充一点，您应该将链接放在冲突链接之后，例如：

```
 <script src="~/fullcalendar/fullcalendar.min.js"></script>
<script src="~/Scripts/jquery-ui.js"></script> 
```

如果你敢颠倒这两个链接的顺序，那么自动补全方法就看不到了。所以虽然 icktoofay 说我们应该把它放在顶部，但我认为我们应该把它们放在底部。只是说......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-11T16:38:08.867

安装

```
gem 'jquery-ui-rails' 
```

并放入您的 application.js

```
//= require jquery.ui.all 
```

# c++ - 在 C++ 中返回浮点数组

> ID：15858332
> 
> 赞同：0
> 
> 时间：2013-04-07T02:46:03.907
> 
> 标签：c++, objective-c, nsdata

我将一个非常大的浮点数组与 CIColorCube CoreImage 结合使用来创建过滤器。由于我制作了许多过滤器，因此数据会一遍又一遍地重复，并且最多需要 3 分钟才能编译（这真的很烦人）。这是我所拥有的：

```
- (void)performFilter {
    NSData * cube_data = [NSData dataWithBytes:[self colorCubeData] length:32*sizeof(float)];
    CIFilter *filter = [CIFilter filterWithName:@"CIColorCube"];
    [filter setValue:outputImage forKey:kCIInputImageKey];
    [filter setValue:@16 forKey:@"inputCubeDimension"];
    [filter setValue:cube_data forKey:@"inputCubeData"];
}

- (const void*)colorCubeData {
    float color_cube_data[32] = { 1,1,1,1,1,1,1,1.0 };
    return color_cube_data;
} 
```

我把代码缩小了很多。我收到此错误：

```
Address of stack memory associated with local variable 'color_cube_data' returned 
```

我对c ++比较陌生，请帮忙！这可能是一个非常愚蠢的修复。

**编辑 1**

这是我的实际代码片段。由于我有多个需要相同格式的 CIColorCube 实例，因此我将每个 rgba 通道发送到选择器并让它返回一个浮点数组。

```
- (const void*)colorCubeData:(float)alpha redArray:(NSArray*)redArray blueArray:(NSArray*)blueArray greenArray:(NSArray*)greenArray {
    float r1 = [[redArray objectAtIndex:0] floatValue]/255.0f;
    float r2 = [[redArray objectAtIndex:1] floatValue]/255.0f;
    float b1 = [[blueArray objectAtIndex:0] floatValue]/255.0f;
    float b2 = [[blueArray objectAtIndex:1] floatValue]/255.0f;
    float g1 = [[greenArray objectAtIndex:0] floatValue]/255.0f;
    float g2 = [[greenArray objectAtIndex:1] floatValue]/255.0f;
    color_cube_data[16384] = { r1,g1,b1,1.0,r2,g1,b1,1.0 } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:48:34.743

问题正如错误所说。您将地址返回给该数组，但该数组仅限于该函数的范围，这意味着一旦该函数完成，该地址将不再可以安全使用（即未定义的行为）。您应该`float color_cube_data[32]`在更高的范围（例如全局、类等）声明或动态分配数组。

# objective-c - Objective c - 归档编码和解码的问题

> ID：15858333
> 
> 赞同：0
> 
> 时间：2013-04-07T02:46:41.270
> 
> 标签：objective-c, nscoding

我目前正在学习objective-c，一直到归档，都被编码和解码困住了。

这是我的代码。

```
 #import <Foundation/Foundation.h>

    @interface Foo : NSObject<NSCoding>

    @property (copy, nonatomic) NSString *strVal;
    @property int intVal;
    @property float floatVal;

    @end

    #import "Foo.h"

@implementation Foo

@synthesize intVal, floatVal, strVal;

-(void) encodeWithCoder: (NSCoder *) encoder
{
    [encoder encodeObject: strVal forKey: @"test1"];
    [encoder encodeInt: intVal forKey: @"test2"];
    [encoder encodeFloat: floatVal forKey: @"test3"];
}

-(id) initWithCoder: (NSCoder *) decoder
{
    strVal = [decoder decodeObjectForKey: @"test1"];
    intVal = [decoder decodeIntForKey: @"test2"];
    floatVal = [decoder decodeFloatForKey: @"test3"];

    return self;
}

@end

    #import "Foo.h"

    int main (int argc, const char * argv[])
    {

        @autoreleasepool {
            Foo *myFoo1 = [[Foo alloc] init];
            Foo *myFoo2;

            [myFoo1 setStrVal : @"bill"];
            [myFoo1 setIntVal : 2];
            [myFoo1 setFloatVal: 3.4];

            [NSKeyedArchiver archiveRootObject: myFoo1 toFile: @"foo.arch"];

            myFoo2 = [NSKeyedUnarchiver unarchiveObjectWithFile: @"foo.arch"];

            NSLog(@"%@", [myFoo2 strVal]);
        }
        return 0;
    } 
```

解码适用于 int 和 float，但是当我尝试解码 NSString 对象时。我收到以下错误，但我对此一无所知...

线程 1：程序接收到的信号：EXC_BAD_ACESS"

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug 15 16:03:10 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".tty /dev/ttys000
[Switching to process 2457 thread 0x0]
sharedlibrary apply-load-rules all
Current language:  auto; currently objective-c
(gdb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:21:41.503

`-initWithCoder:`是一个初始化方法，您*必须*`[super init]`在设置对象之前调用它。请参阅 Apple 的“ [Archives and Seralizations Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Archiving/Articles/codingobjects.html#//apple_ref/doc/uid/20000948-97254) ”中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:37:06.457

你在用ARC吗？

无论如何，您应该复制所有字符串 ( `strValue = [[decoder decodeObjectForKey:@"test1"] copy];`)，以保持对它们的不可变引用。否则，它们可能会在您的背后发生变化或消失，事情会变得很糟糕（就像您所看到的那样）。

另外，就像@一二三说的，别忘了`self = [super init];`.

# xcode - xcode ipad横向 - 重新定位对象

> ID：15858337
> 
> 赞同：0
> 
> 时间：2013-04-07T02:47:18.897
> 
> 标签：xcode, ipad, orientation, landscape

试图让我的 iPad 应用程序以横向方式工作。我想在横向模式下更改一些控件的位置。我得到了日志，所以我知道我在方法中，但是，我的对象都没有移动。我错过了什么吗？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if(toInterfaceOrientation==UIInterfaceOrientationLandscapeRight ||
   toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft)
    {
        NSLog(@"in landscape");
        // I would like to re-position my controls here but not working
        image1.frame = CGRectMake(318, 501, 100, 100);
        btnNext.frame = CGRectMake(200, 455, 100, 35)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:38:15.063

您的代码适用于 iOS 5，但对于 iOS 6 及更高版本，请尝试使用方向掩码。这是一种方法，您可以在其中实现对象的旋转。

```
- (BOOL) shouldAutorotate
{
return YES;
 }

-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft   | UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

您可以删除不需要的面具。在 iOS 6 中，通过在此方法中输入您想要的对象后，您应该归档您正在尝试执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:55:24.323

尝试将您的重新定位代码移动到`viewWillLayoutSubviews`.

如果您真的想一路走下去，请仅在 iOS 6 中使用约束。您的 iOS 6 代码将与您的 iOS 5 代码非常、非常不同，这很烦人，但它也会更加优雅。在我书中的这个讨论中，我深入探讨了重新排列界面以响应旋转的问题：

[http://www.aeth.com/iOSBook/ch19.html#SECrotationevents](http://www.apeth.com/iOSBook/ch19.html#SECrotationevents)

我在那次讨论中提出的一个优雅的解决方案是首先使用约束设置界面，然后将其`updateViewConstraints`作为一个地方来调整这些约束以响应旋转。然后讨论继续展示在应用程序启动到横向的情况下如何使用`viewWillLayoutSubviews`设置*初始界面；*但是，正如它随后指出的那样，如果您可以改用约束，那就更好了。

# php - 如何拆分php valriable值包含括号？

> ID：15858341
> 
> 赞同：0
> 
> 时间：2013-04-07T02:47:36.510
> 
> 标签：php, variables, brackets

我在一个变量中有这个值（33.8352932，-117.91450359999999）如何将这两个数字分成两个不带括号的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:50:36.367

这可以解决问题：

```
$str = '(33.8352932, -117.91450359999999)';
$pieces = explode(',', str_replace(array('(', ')'), '', $str)); 
```

现在，`var_dump($pieces)`给你这个：

```
array(2) {
  [0]=>
  string(10) "33.8352932"
  [1]=>
  string(20) " -117.91450359999999"
} 
```

# ios - 使用来自 url 的动态数据更新 UITableView

> ID：15858342
> 
> 赞同：0
> 
> 时间：2013-04-07T02:47:44.667
> 
> 标签：ios, objective-c, uitableview

我有一个列表视图控制器，它有一个从 Yelp 获取数据的表。我有一个名为“YelpObject.h/m”的单独类，它完成了从 Yelp API 收集 Yelp 数据的所有工作。我还把 YelpObject 做成了单例。我在 ListViewController 的 init 方法中初始化了单例。

```
-(id)initWithPlace:(NSString*)city{
    self=[super init];
    if(self){
        [self setCityName:city];
        [[YelpObject sharedYelpObject] initializeYelpWithLocation:city term:@"Hotels"];
        [[YelpObject sharedYelpObject] makeConnectionsToYelp];
    }
    return self;
} 
```

现在采用以下方法：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
     return [[[YelpObject sharedYelpObject] names] count];
} 
```

names 是一个 NSMutableArray，它包含来自 Yelp API 的前 20 个酒店名称。当我尝试从“YelpObject.m”中打印名称的内容时，它具有所需的数据。

但这里的问题是，当“makeConnectionsToYelp”函数获取它的数据时，上述方法和所有表数据源方法都被调用了。这使表格始终显示零行。

我不知道如何确保只有在方法调用之后才调用表数据源方法

```
[[YelpObject sharedYelpObject] makeConnectionsToYelp]; 
```

返回。

我不知道回调方法是否可以在这里提供帮助。我是 iOS 编程的新手，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:39:28.640

做这样的事情：

```
-(id)initWithPlace:(NSString*)city{
self=[super init];
if(self){
    [self setCityName:city];
    [[YelpObject sharedYelpObject] initializeYelpWithLocation:city term:@"Hotels"];
    dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
    dispatch_async(dispatchQueue, ^(void)
    {
     [[YelpObject sharedYelpObject] makeConnectionsToYelp];
     //NSLog data returned to check.
     //may be you can add a activity indicator to show loading.
    dispatch_sync(dispatch_get_main_queue(), ^{ 
    //reload your table view here.
    [tableview reloadData];
    //remove activity indicator if added.
    });
    }); 
return self; 
```

}

# java - 如何返回一个新的 ArrayList？

> ID：15858352
> 
> 赞同：-1
> 
> 时间：2013-04-07T02:48:40.947
> 
> 标签：java, arraylist

我有一个数组列表：

```
ArrayList<Student> studentList = new ArrayList<Student>(); 
```

它由一个文本文件填充，每个对象包含五条信息。

其中一条信息是“等级”。我想打印特定年级的所有学生。我当前的方法仅显示年级中学生的第一个实例。用“[]”围绕那个。

```
public ArrayList<Student> studentInGrade(String category) {
    ArrayList<Student> gradeCategory = new ArrayList<Student>();
    for (Student stu : studentList ) {
        if (stu.GetCategory().toUpperCase().contains(category.toUpperCase())) {
            System.out.println("Found");
            gradeCategory .add(stu );
            return gradeCategory ;
        }
    }

    System.out.println("No Category Found");
    return null;
} 
```

例子：

我想看看所有“初级”的学生。

示例输入：

```
Johnny Johns
Computer Science
Junior
21
In-State
Asheley Ashers
Nursing
Sophomore
20
In-State
Andrew Anders
Basket Weaving
Graduate Student
18
Out-State
Morgan Freeman
Theater
Junior
21
In-State 
```

我要输出的内容：

```
Johnny Johns
Computer Science
Junior
21
In-State
Morgan Freeman
Theater
Junior
21
In-State 
```

目前输出什么：

```
[Johnny Johns
Computer Science
Junior
21
In-State] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T02:52:24.773

当您返回时，这会破坏您的 for 循环。为了获得所有学生，您必须遍历整个列表并在之后返回结果。

尝试将其放在循环之后：

```
public ArrayList<Student> studentInGrade(String category) {
    ArrayList<Student> gradeCategory = new ArrayList<Student>();
    for (DVD stu : studentList ) {
        if (stu.GetCategory().toUpperCase().contains(category.toUpperCase())) {
            System.out.println("Found");
            gradeCategory .add(dvdEntry);
        }
    }
    return gradeCategory;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:52:39.237

您似乎遗漏了很多相关代码。但是，潜在的问题似乎是您在找到一个匹配项后立即返回，而不是收集所有匹配项。只需将您的回报移到循环之外：

```
ArrayList<Student> gradeCategory = new ArrayList<Student>();
for (DVD stu : studentList ) {
    if (stu.GetCategory().toUpperCase().contains(category.toUpperCase())) {
        System.out.println("Found");
        gradeCategory .add(dvdEntry);
    }
}

return catDVD; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T02:58:12.457

`return`in 循环结束了方法、use或`break`in`continue`循环。

```
public ArrayList<Student> studentInGrade(String category) {
  ArrayList<Student> gradeCategory = new ArrayList<Student>();
  for (Student stu : studentList ) {
    if (stu.GetCategory().toUpperCase().contains(category.toUpperCase())) {
      System.out.println("Found");
      gradeCategory .add(stu );
    }
  }
  if (gradeCategory.size() > 0)
    return gradeCategory;
  else {
    System.out.println("No Category Found");
    return null;
  }
} 
```

# ruby - RB 树插入顺序敏感度

> ID：15858357
> 
> 赞同：2
> 
> 时间：2013-04-07T02:50:03.100
> 
> 标签：ruby, algorithm, tree, binary-tree, binary-search-tree

给定一个整数区间，一个具有唯一元素`I`的 RB 树和一个唯一元素序列，其值不在 中，插入的性能是否会因排序或随机顺序而异？答案将如何根据 和 的相对大小而变化？`R``n``I``S``n``I``R``S``R``S``|I|``n`

鉴于`S`不在其中的元素，`R`不清楚如何分析插入需要维护的不变量以及需要发生的重新平衡操作。我运行`|I|`的 Ruby 基准测试比`n`建议的排序插入执行速度快 10+% 大 100 倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:21:38.073

性能会有所不同。

C++ 中的示例测试（我知道 g++`map`是基于红黑树并使用它）：

```
#include <iostream>
#include <map>
#include <cstdlib>
#include <ctime>

using namespace std;

const int N = 50000;
const int REPS = 100;
int ints[N];

int main()
{
  time_t t;
  srand(time(0));

  // fill ints[] with ints from 0 to N-1
  for (int i = 0; i < N; i++)
    ints[i] = i;

  // randomly shuffle ints[]
  for (int i = 0; i < N; i++)
  {
    int j = ((unsigned)rand() * rand()) % N;
    int t = ints[i];
    ints[i] = ints[j];
    ints[j] = t;
  }

  cout << "Inserting " << 2 * N << " sorted keys, repeating " << REPS << " times..." << endl;
  time(&t); cout << ctime(&t) << endl;
  for (int n = 0; n < REPS; n++)
  {
    map<int,int> m;
    for (int i = 0; i < N; i++)
      m[i] = i;
    for (int i = 0; i < N; i++)
      m[N + i] = i;
  }
  time(&t); cout << ctime(&t) << endl;

  cout << "Inserting " << N << " sorted keys and then " << N << " unsorted keys, repeating " << REPS << " times..." << endl;
  time(&t); cout << ctime(&t) << endl;
  for (int n = 0; n < REPS; n++)
  {
    map<int,int> m;
    for (int i = 0; i < N; i++)
      m[i] = i;
    for (int i = 0; i < N; i++)
      m[N + ints[i]] = i;
  }
  time(&t); cout << ctime(&t) << endl;

  return 0;
} 
```

输出（[liveworkspace](http://liveworkspace.org/code/1oZq7M%240)）：

```
Inserting 100000 sorted keys, repeating 100 times...
Sun Apr 7 04:14:03 2013

Sun Apr 7 04:14:05 2013

Inserting 50000 sorted keys and then 50000 unsorted keys, repeating 100 times...
Sun Apr 7 04:14:05 2013

Sun Apr 7 04:14:10 2013 
```

如您所见，性能明显不同：排序插入需要 2 秒，而未排序插入需要 5 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:01:02.177

当然性能各不相同；如果您将 2、1、3 插入到一棵空的红黑树中，则永远不会执行旋转；如果插入 1，然后 2，然后 3，则必须执行轮换。

如果您只想以最快的方式构建红黑树，请对列表进行排序，将其围绕中间元素拆分，从两半构建红黑树，并将中间元素作为两半的父元素。你在这里没有旋转或其他恶作剧。

就像 Alexey Frunze 所说，它的变化不能超过一个小的常数因子。

# javascript - 验证文本字段不起作用

> ID：15858364
> 
> 赞同：0
> 
> 时间：2013-04-07T02:50:54.753
> 
> 标签：javascript

我有带有复选框和文本字段的 html 页面，并且 JavaScript 能够验证复选框但不能验证文本字段。有人可以帮忙，因为我不确定哪里错了

```
<html>  
    <head>
    <script type="text/javascript">
     function validator()
    {
        var c = document.getElementsByName("chk");
        var k=false;
          for( var i=0; i<c.length; i++ )
          { 
            if( c[i].checked ) 
            {
               k=true;
              return(true);
            }
          }
      if(k){
              return(true);
              }
              else{
                alert("Select one environment");
                return(false);
              }
          var ap = form.getElementById("a1");
          if(ap.value == "" || ap.length == 0)
         {
        alert("Enter the path");
        ap.setfocus();
        return(false);
         }
          else
          {
            return(true);
          }

                    var p = form.getElementById("a2");
          if(p.value == "" || p.length == 0)

         {
        alert("Enter the path");
        form.p.setfocus();
        return(false);
        }

        return(true);
            }

          </script>
      </head>

     <body>
    <form action="/car.java" onsubmit="return validator(this);">
        <br />
        <p>
            <input name="chk"  type="checkbox" />One
            <input name="chk"  type="checkbox" />Two
            <input name="chk"  type="checkbox" />Three
        </p>
        <br />
        <input name="a1" id="a1" size="123" style="width: 766px; height: 21px;" type="text" />
        </p>
        <p>
            <input name="a2" id="a2" size="123" style="width: 766px; height: 21px;" 
                type="text" />
        </p>
        <textarea cols="95" name="status" rows="11"></textarea>
        <input name="sub" size="28" style="width: 156px; height: 29px;" type="button"
       value="Submit" />
        </p>
        </form>
         </body>  
       </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:06:19.343

问题出在您的函数上，您在程序完成文本字段验证之前返回一个值。您需要捕获变量的返回值，并在方法结束时只返回一次它的值。

像这样的东西

```
function validator() {
var c = document.getElementsByName("chk");
var k = false,
    isValid = false;
for (var i = 0; i < c.length; i++) {
    if (c[i].checked) {
        k = true;
    }
}
if (k) {
    isValid = true;
} else {
    alert("Select one environment");
}
var ap = form.getElementById("a1");
if (ap.value == "" || ap.length == 0) {
    alert("Enter the path");
    ap.setfocus();
} else {
    isValid = true;
}
var p = form.getElementById("a2");
if (p.value == "" || p.length == 0)
{
    alert("Enter the path");
    form.p.setfocus();
}
return isValid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:58:40.997

```
if(ap.value == "" || ap.length == 0) 
```

我认为您的意思是`ap.value.length == 0`，但无论哪种方式都是多余的，因为您已经检查了空字符串。只会`if(!ap.value)`做。此外，您`return`甚至在文本框部分运行之前就开始了。

也就是说，您应该考虑使用 HTML5 表单验证。它更清洁，可以防止此类问题。

# clojure - 如何使用merge-with为clojure中的重复键创建列表

> ID：15858365
> 
> 赞同：2
> 
> 时间：2013-04-07T02:51:16.453
> 
> 标签：clojure

我第一次尝试

```
(merge-with list maps) 
```

它适用于具有单一值的地图，但适用于类似的东西

```
{:a [1 2]} {:a [2 3]} {:a [3 4]} 
```

它给了我

```
{:a (([1 2] [2 3]) [3 4])} 
```

但我想拥有

```
{:a ([1 2] [2 3] [3 4])} 
```

我刚刚发现我可以用向量包装地图的 vals：

```
(defn my-merge
  [& coll]
  (let [maps (map #(assoc % (first (keys %)) [(first (vals %))]) coll)]
    (apply merge-with concat maps))) 
```

但是 let 绑定似乎太嵌套了，有没有更简单的函数可以用来代替 concat？所以我可以有一些一行代码，如：

```
(merge-with the-function maps) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:30:00.880

你可以试试这个：

```
(merge-with (fn [a b] 
  (if (list? a) 
      (conj a b) 
      (list a b))) 
  maps)

;; {:a ([3 4] [1 2] [2 3])} 
```

它可以工作，但依赖于输出集合的类型——在这种情况下是列表。这是我想出的最短的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:53:40.027

版本 1

```
(defn my-merge [f & mlist] 
  (into {} 
        (map (fn [[k v]] [k (apply f (map val v))]) 
             (group-by key (apply concat mlist)))))

(my-merge list
          {:a [1 2]} 
          {:a [2 3] :b :two} 
          {:a [3 4] :b :one})

=> {:a ([1 2] [2 3] [3 4]) :b (:two :one)} 
```

版本 2

```
(defn my-merge [f initv & mlist] 
  (apply merge-with f 
         (apply merge-with (fn [_ _] initv) mlist)
         mlist))

(my-merge conj ()
          {:a [1 2]} 
          {:a [2 3] :b :two} 
          {:a [3 4] :b :one})

=> {:b (:one :two), :a ([3 4] [2 3] [1 2])} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:13:51.070

以下解决方案还确保列表中项目的顺序基于地图的顺序。

```
(def maps [{:a [1 2]} 
          {:a [2 3] :b :two} 
          {:a [3 4] :b :one}])

(into {} (for [k (into #{} (mapcat keys maps))
               :let [obj (Object.)]]
           [k (filter (partial not= obj)
                      (map #(get % k obj) maps))]))

=> {:a ([1 2] [2 3] [3 4]), :b (:two :one)} 
```

# php - 删除从 php/mysql 中的组合框中选择的值

> ID：15858367
> 
> 赞同：0
> 
> 时间：2013-04-07T02:51:59.447
> 
> 标签：php, mysql

我正在尝试从 php 中的 MYSQL 数据库中删除某个选定的值。

[删除.php]

```
<form name="delete" method="POST" action="d3l3t3d.php">
    <select name="eBox" id="nname" style="width: 290px; height:40px;">
    <?php
    mysql_connect("a","b","") or die("Wrong username or password");
    mysql_select_db("TABLE") or die( "Unable to select database");
    $query = "Select * From list";
    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)) 
    { 
    $name = $row['name']; 
    echo "<option>" . $name . "</option>"; 
    } 
    echo "</select><br/><br/>"
    ?> 
```

[d3l3t3d.php]

```
<?php
   $namez = $_POST['nname'];
   $name = mysql_real_escape_string($namez);
   mysql_connect("a","b",
   "") or die("Wrong username or password");
   mysql_select_db("TABLE") or die( "Unable to select database");
mysql_query("DELETE FROM list WHERE name='$name'");
?> 
```

我收到以下错误：

> 注意：未定义索引：第 2 行 C:\xampp\htdocs\folder\d3l3t3d.php 中的 nname

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:53:23.317

`$namez = $_POST['nname'];`应该`$namez = $_POST['ebox'];`

您可以通过名称而不是 id 选择元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:54:02.490

`$namez = $_POST['nname'];`应该`$namez = $_POST['eBox'];`

错误: `Undefined index: nname in C:\xampp\htdocs\folder\d3l3t3d.php on line 2`, 表示它正在搜索具有属性的元素`name = "nname"`，当然，它不存在。你有`name = "eBox"`。

只是一个小错字:)

# php - CodeIgniter：Try Catch 在模型类中不起作用

> ID：15858372
> 
> 赞同：13
> 
> 时间：2013-04-07T02:52:46.973
> 
> 标签：php, codeigniter

我对列有`unique`限制。当这段代码运行时，我从框架中得到错误日志，但这不是我在异常块中给出的。
如果存在唯一列，那么我想查询其主键并将其设置为`$id`并返回页面。现在它停止在 db 错误上，而不是进入`Catch block`.
**这是我的代码：**

```
try {
            $result = $this->db->insert('email', $new_email);
            if ($result)
            {
                $id = $this->db->insert_id();    
            } else {
                throw new Exception("$$$$$$$$$$$$$Log database error");
            }
        } catch (Exception $e) {
            log_message('error',$e->getMessage());
            return;
        } 
```

`**Error Messages**`我从框架中得到：

```
DEBUG - 2013-04-07 05:00:38 --> DB Transaction Failure
ERROR - 2013-04-07 05:00:38 --> Query error: Duplicate entry 
```

我不知道它有什么问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-07T09:10:53.763

CI 对异常没有很好的支持。您的数据库查询将调用一些模糊的 CI error_logging 事物，称为 show_error()。您需要做的是设置适当的异常处理。

基本上你可以按照整个食谱。

现在你所有的数据库错误都会自动抛出异常。作为奖励，您可以在整个 CI 应用程序中进行良好的异常处理。

注册一个自定义错误处理程序，将 PHP 错误转换为异常，例如将其放在 config/config.php 的顶部

```
function my_error_handler($errno, $errstr, $errfile, $errline)
{
    if (!(error_reporting() & $errno))
    {
        // This error code is not included in error_reporting
        return;
    }
    log_message('error', "$errstr @$errfile::$errline($errno)" );
    throw new ErrorException( $errstr, $errno, 0, $errfile, $errline );
}
set_error_handler("my_error_handler"); 
```

注册一个未捕获的异常处理程序，在你的 config/config.php 中添加这样的东西

```
function my_exception_handler($exception)
{
    echo '<pre>';
    print_r($exception);
    echo '</pre>';
    header( "HTTP/1.0 500 Internal Server Error" );
}
set_exception_handler("my_exception_handler"); 
```

设置终止处理程序：

```
function my_fatal_handler()
{
    $errfile = "unknown file";
    $errstr  = "Fatal error";
    $errno   = E_CORE_ERROR;
    $errline = 0;
    $error = error_get_last();
    if ( $error !== NULL )
    {
        echo '<pre>';
        print_r($error);
        echo '</pre>';
        header( "HTTP/1.0 500 Internal Server Error" );
    }
}
register_shutdown_function("my_fatal_handler"); 
```

设置一个自定义的断言处理程序，将断言转换为异常，在你的 config/config.php 中放置这样的内容：

```
function my_assert_handler($file, $line, $code)
{
    log_message('debug', "assertion failed @$file::$line($code)" );
    throw new Exception( "assertion failed @$file::$line($code)" );
}
assert_options(ASSERT_ACTIVE,     1);
assert_options(ASSERT_WARNING,    0);
assert_options(ASSERT_BAIL,       0);
assert_options(ASSERT_QUIET_EVAL, 0);
assert_options(ASSERT_CALLBACK, 'my_assert_handler'); 
```

在你的控制器中使用这样的包装器

```
public function controller_method( )
{
    try
    {
        // normal flow
    }
    catch( Exception $e )
    {
        log_message( 'error', $e->getMessage( ) . ' in ' . $e->getFile() . ':' . $e->getLine() );
        // on error
    }
} 
```

您可以根据自己的喜好调整和定制整个事情！

希望这可以帮助。

您还需要拦截 CI show_error 方法。将它放在 application/core/MY_exceptions.php 中：

```
class MY_Exceptions extends CI_Exceptions
{
    function show_error($heading, $message, $template = 'error_general', $status_code = 500)
    {
        log_message( 'debug', print_r( $message, TRUE ) );
        throw new Exception(is_array($message) ? $message[1] : $message, $status_code );
    }
} 
```

并在 application/config/database.php 中将此设置保留为 FALSE，以便将数据库错误转换为异常。

```
$db['default']['db_debug'] = TRUE; 
```

CI 有一些（非常）弱点，例如异常处理，但这将大大有助于纠正这一点。

如果要使用事务，请确保对异常进行回滚。与此相关的从不（如在 EVER 中）使用持久连接作为打开的事务，其他会话特定的数据库状态将被其他会话拾取/继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:05:37.137

如果打开数据库调试，来自数据库的错误将被路由到 Exceptions 核心类，并`exit()`在之后调用，这意味着脚本甚至永远不会达到您的`if`条件。

打开`application/config/database.php`并尝试设置`db_debug`为false。无论如何，这对于生产网站来说是个好主意，因为您不希望任何 SQL 查询问题来发布有关您的数据库结构的信息。

此外，不相关的，在双引号内使用时要小心`$`，因为它会被解析为一个变量（即使是一堆连续的——它实际上是一个变量变量变量变量......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T03:07:55.707

如果将结果设置在`try`块之外怎么办？或三元运算符：

```
$result = $this->db->insert('email', $new_email);
try {
  $result = ($result) ? $result || false;  
  if ($result) {
    $id = $this->db->insert_id();    
  } else {
    throw new Exception("$$$$$$$$$$$$$Log database error");
  }
} catch (Exception $e) {
  log_message('error',$e->getMessage());
  return;
} 
```

`$result`就像@jcorry 说的那样，如果不知道真正的价值是什么，就很难知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-04T09:56:54.290

```
$db['default']['db_debug'] = FALSE; 
```

[https://forum.codeigniter.com/archive/index.php?thread-8484.html](https://forum.codeigniter.com/archive/index.php?thread-8484.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T17:41:59.707

如果您查看 CodeIgniter 的代码，您会发现它在 bot system/core 和 ci_system/core 文件夹中的 CodeIgniter.php 中设置了自己的错误处理。

```
/*
 * ------------------------------------------------------
 *  Define a custom error handler so we can log PHP errors
 * ------------------------------------------------------
 */
    set_error_handler('_error_handler');
    set_exception_handler('_exception_handler');
    register_shutdown_function('_shutdown_handler'); 
```

前两个函数处理错误处理。为了让你的 try..catch 块工作，你只需要关闭它。

使用[restore_error_handler](http://php.net/manual/en/function.restore-error-handler.php)和[restore_exception_handler](http://php.net/manual/en/function.restore-exception-handler.php)函数，我们可以将这些错误处理函数重置为默认值。

```
 restore_error_handler();
    restore_exception_handler(); 
```

或者...如果您想保留错误处理程序以便以后恢复它们。

```
 //Disable CodeIgniter error handling so we can use try catch blocks
    $errorHandlers = array();
    do {
        $errorHandler = set_error_handler(function() {}); //Get the current handler
        array_push($errorHandlers, $errorHandler); //Store the handler so that it can be restored if necessary
        for ($i = 0; $i < 2; $i++) { //We have to reset twice to get to the previous handler since we added a dummy handler
            restore_error_handler();
        }
    }
    while (!is_null($errorHandler)); //Is null when there are no handlers
    $exceptionHandlers = array(); //Do the same with exceptions
    do {
        $exceptionHandler = set_exception_handler(function() {});
        array_push($exceptionHandlers, $exceptionHandler);
        for ($i = 0; $i < 2; $i++) {
            restore_exception_handler();
        }
    }
    while (!is_null($exceptionHandler));

    try {
        //Your code goes here
    }
    catch (Error $e) {
        //Handle error
    }
    catch (Exception $e) {
        //Handle exception
    }

    //Restore all error handlers
    foreach ($errorHandlers as $errorHandler) {
        if (isset($errorHandler)) {
            set_error_handler($errorHandler);
        }
    }
    foreach ($exceptionHandlers as $exceptionHandler) {
        if (isset($exceptionHandler)) {
            set_exception_handler($exceptionHandler);
        }
    } 
```

如果需要，我们可以禁用所有自定义错误处理程序并存储它们以进行恢复。

如果设置了其他错误处理程序，我会在保存和恢复时使用循环。这样，您可以恢复所有错误处理程序，因为其他地方可能有类似的代码会出于某些特定目的返回到先前的错误处理程序，并且它将被保留。

# java - Spring MVC 使用 GeneratedKeyHolder() - java.io.NotSerializableException

> ID：15858379
> 
> 赞同：2
> 
> 时间：2013-04-07T02:54:47.157
> 
> 标签：java, mysql, spring-mvc, jdbctemplate

我正在尝试使用 jdbcTemplate 和 GeneratedKeyHolder() 将插入到 mysql 数据库中，以检索自动生成的 PK 列值。但是我遇到了一个例外。如果我删除 keyHolder 参数，记录会完美插入，但是我无法获得自动生成的 PK 正弦 keyHolder 被删除。类 Crime 实现了 Serializable。下面是代码：

**我如何构造语句以便我可以接收 keyHolder 值？**

**道**

```
KeyHolder keyHolder = new GeneratedKeyHolder();
logger.debug("In saveCrime");
logger.debug("In saveCrime");
sql = "INSERT INTO crimeTrack.tblcrimes (crimeDetails, " +
    "crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, "+
    "recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) " +
    "VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?)";

int save = getJdbcTemplate().update(new PreparedStatementCreator(){

    public java.sql.PreparedStatement createPreparedStatement(
        java.sql.Connection connection) throws SQLException {
            PreparedStatement ps =(PreparedStatement) connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
            ps.setString(1, crime.getCrimeDetails());
            ps.setFloat(2, (float)crime.getCrimeLatLocation());
            ps.setFloat(3, (float)crime.getCrimeLongLocation());
            ps.setString(4, crime.getCrimeStreetLn1());
            ps.setString(5, crime.getCrimeStreetLn2());
            ps.setString(6,  crime.getCrimeDate());
            ps.setString(7, "sim");
            ps.setInt(8, crime.getStatusId());
            ps.setInt(9, crime.getOffenceCatId());
            ps.setInt(10, crime.getOffenceTypeId());
            ps.setInt(11, crime.getCrimeLevelId());
            ps.setString(12, crime.getInvestigatingOfficerId());
            ps.setString(13, crime.getCrimeTime()); 

            return ps;
        }
    },keyHolder); 
```

**错误日志**

```
41734 [http-bio-8084-exec-4] DEBUG org.springframework.jdbc.support.SQLErrorCodesFactory  - SQL error codes for 'MySQL' found
41734 [http-bio-8084-exec-4] DEBUG org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator  - Unable to translate SQLException with Error code '0', will now try the fallback translator
41734 [http-bio-8084-exec-4] DEBUG org.springframework.jdbc.support.SQLStateSQLExceptionTranslator  - Extracted SQL state class 'S1' from value 'S1009'
41735 [http-bio-8084-exec-4] DEBUG org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver  - Resolving exception from handler [public org.springframework.web.servlet.ModelAndView com.crimetrack.web.CrimeRegistrationController.handleSave(com.crimetrack.business.Crime,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap,org.springframework.ui.Model) throws java.lang.Exception]: org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
41737 [http-bio-8084-exec-4] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver  - Resolving exception from handler [public org.springframework.web.servlet.ModelAndView com.crimetrack.web.CrimeRegistrationController.handleSave(com.crimetrack.business.Crime,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap,org.springframework.ui.Model) throws java.lang.Exception]: org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
41737 [http-bio-8084-exec-4] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver  - Resolving exception from handler [public org.springframework.web.servlet.ModelAndView com.crimetrack.web.CrimeRegistrationController.handleSave(com.crimetrack.business.Crime,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap,org.springframework.ui.Model) throws java.lang.Exception]: org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
41737 [http-bio-8084-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet  - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@26f6379c
41737 [http-bio-8084-exec-4] DEBUG org.springframework.web.servlet.DispatcherServlet  - Could not complete request
org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
    at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:107)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
    at com.crimetrack.jdbc.JdbcCrimeDAO.saveCrime(JdbcCrimeDAO.java:54)
    at com.crimetrack.service.CrimeManager.saveCrime(CrimeManager.java:18)
    at com.crimetrack.web.CrimeRegistrationController.handleSave(CrimeRegistrationController.java:261)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:910)
    at com.mysql.jdbc.PreparedStatement.setSerializableObject(PreparedStatement.java:3359)
    at com.mysql.jdbc.PreparedStatement.setObject(PreparedStatement.java:3010)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:229)
    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:351)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:144)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.doSetValue(ArgPreparedStatementSetter.java:65)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.setValues(ArgPreparedStatementSetter.java:46)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:816)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587)
    ... 38 more
41739 [http-bio-8084-exec-4] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in WebApplicationContext for namespace 'crimetrack-servlet': ServletRequestHandledEvent: url=[/crimeTrack/crime_registration_save.htm]; client=[0:0:0:0:0:0:0:1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[149ms]; status=[failed: org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException]
41739 [http-bio-8084-exec-4] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/crimeTrack/crime_registration_save.htm]; client=[0:0:0:0:0:0:0:1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[149ms]; status=[failed: org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [INSERT INTO crimeTrack.tblcrimes (crimeRecNo,crimeDetails, crimeLatLocation,crimeLongLocation, crimeStreetLn1, crimeStreetLn2, crimeDate, recordedById,statusId, offenceCatId, offenceTypeId, crimeLevelId, investigatingOfficerId,crimeTime) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; Invalid argument value: java.io.NotSerializableException; nested exception is java.sql.SQLException: Invalid argument value: java.io.NotSerializableException] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:59:04.930

哥们，我看看有什么问题。尽管您提到了该示例的参考，但我相信您使用了错误的 jdbctemplate 方法。检查[api](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html)。您在该示例中使用了不同的方法。

# java - Android ArrayList 奇怪的空指针异常

> ID：15858381
> 
> 赞同：0
> 
> 时间：2013-04-07T02:55:01.487
> 
> 标签：java, android, arraylist, nullpointerexception

我对这段代码有疑问：

```
 for(int i2=0;i2<ftdata.size();i2++){
        System.out.println("FTDATASIZE: " +ftdata.get(i2)); // here pass and shows null
        String test=ftdata.get(i2); // here gets Null Pointer Exception ????
        if(test.equals("null")){

        }
    } 
```

System.out 在 LogCat "FTDATASIZE: null" 中显示，但我在这行 "String test=ftdata.get(i2);" 出现错误 我不明白？为什么我得到空指针异常？

```
 04-07 05:42:36.309: I/System.out(12983): STDATASIZE: 1
    04-07 05:42:36.309: I/System.out(12983): FTDATASIZE: 1
    04-07 05:42:36.309: I/System.out(12983): FTDATASIZE: null
    04-07 05:42:36.309: W/dalvikvm(12983): threadid=10: thread exiting with uncaught exception (group=0x40166560)
    04-07 05:42:36.309: E/AndroidRuntime(12983): FATAL EXCEPTION: Thread-11
    04-07 05:42:36.309: E/AndroidRuntime(12983): java.lang.NullPointerException
    04-07 05:42:36.309: E/AndroidRuntime(12983):    at soft.ProDb.distanceRunsMonthly(ProDb.java:22718)
    04-07 05:42:36.309: E/AndroidRuntime(12983):    at soft.ProDb.runsMonthly(ProDb.java:22593)
    04-07 05:42:36.309: E/AndroidRuntime(12983):    at soft.SHtmlM.exportALLHtml(StringaHtmlM.java:111)
    04-07 05:42:36.309: E/AndroidRuntime(12983):    at soft.ProDb$1.run(ProDb.java:12714)
    04-07 05:42:36.309: E/AndroidRuntime(12983):    at java.lang.Thread.run(Thread.java:1019) 
```

好的 固定的

这对我有用

```
 if(ftdata.size()==1&& ftdata.get(0)==null){
        ftdata=stdata;
    } 
```

只是想测试 ftdata.get(0) 是否为空

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:00:01.840

空指针在线`if(test.equals("null")){`，因为`test`is`null`并且您正试图调用`.equals()`它。

如果您尝试检查字符串是否为空，请`if (test == null)`改用

如果您尝试检查字符串的值是否为“null”，请`if ("null".equals(test))`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:01:52.007

试试这个：

```
for(int i2=0;i2<ftdata.size();i2++){
        System.out.println("FTDATASIZE: " +ftdata.get(i2));
        String test; 
        if(ftdata.get(i2)!=null){
            test = ftdata.get(i2);
        }
    } 
```

# android - 如何在android中实现一个深度集成的APP，就像facebook启动器一样

> ID：15858382
> 
> 赞同：-1
> 
> 时间：2013-04-07T02:55:26.253
> 
> 标签：android, facebook, android-launcher

现在一天，facebook 发布了一个 android 平台的 laucher。这非常酷。我想知道他们是如何实现的。在我看来，系统模块应该支持某些功能，换句话说，facebook应该制作自己的ROM来支持他们的启动器。但它是一个独立的APP，你可以通过谷歌播放器下载。

很想知道FB Launcher用的是什么技术~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:35:46.700

对于从 4 月 12 日起您可以下载的应用程序，Facebook 只是制作了另一个 Launcher。您可以查看 Android SDK 附带的 SDK 示例以了解其工作原理。

在 Facebook 与制造商合作开发的设备上（目前只有 HTC First），启动器比可下载的应用程序更深入地集成到系统中，因为它在那里也有 ROM 修改。HTC First 上的 Facebook Home 将比可下载的 Facebook Home 功能更丰富。

# javascript - XMLHttpRequest + setTimeout = 内存泄漏

> ID：15858383
> 
> 赞同：0
> 
> 时间：2013-04-07T02:55:49.667
> 
> 标签：javascript, performance, google-chrome-extension, xmlhttprequest, settimeout

我正在开发一个 chrome 扩展，我努力尝试了网络上的所有解决方案，但似乎没有一个工作。我的 jsscript 仅通过 XMLHttpReq(XHR) 消耗一个 html（每个请求大约 13,30k）并解析响应，丢弃与某些正则表达式不匹配的所有内容。所有这一切都发生在 XHR onload 方法中的 setTimeout 内部，并且似乎有效，但问题出现在大约 10 分钟后。当我看到记忆中发生的事情时。10 分钟后，扩展 mem 从 10mb 增长到 60。那么..会发生什么并且存在任何解决方案？我读到这是一个正常的增长，因为它是一个新的请求，并且垃圾收集器会在一段时间后运行（很晚），但对我来说这是另一回事。提前致谢。

```
 var CHECK_TIME = 30000;  
      var request = new XMLHttpRequest();

      var checkLastPage = {
        url:"http://www.last.fm/inbox",
        inboxId:"inboxLink",
        lastAttempt:0,    
        init : function(){        
            request.onload = function(){
              checkLastPage.loadStuff(request);
              setTimeout(checkLastPage.init, CHECK_TIME);          
            } 
            request.open("GET",checkLastPage.url,false);
            request.send();
        },
        loadStuff:function(request){
            var node = checkLastPage.getInboxNode(request);
//...more code
        },
        getInboxNode:function(request){
            var htmlTemp = document.createElement('div');
                htmlTemp.innerHTML = request.responseText;   // Hack horrible para poder parsear el nodo importante                     
            var htmlResponse =  htmlTemp.getElementsByTagName('li');
            var relevantNode = null;
             for (var i = 0; i < htmlResponse.length; i++) {
                var node = htmlResponse[i];
                if(node.id == checkLastPage.inboxId){
                  relevantNode = node;
                }                
             }
             htmlResponse = null;
             htmlTemp = null;   
             return relevantNode;
        }, //...more code} 
```

我还使用 JQUery 和外部 setInterval 进行了测试，但结果相同：

```
 var CHECK_TIME = 30000;         
  var checkLastPage = {
    url:"http://www.last.fm/inbox",
    inboxId:"inboxLink",
    lastAttempt:0,    
    init : function(){        
       $get(checkLastPage.url,function(data){
           console.log(data)
        }            
    }
    //more code ...
  }

  setInterval(checkLastPage.init,CHECK_TIME) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:09:59.233

从回调方法中调用 setTimeout 可能不是一个好主意。

我认为从回调例程中调用 setTimeout 可能会阻止浏览器正确收集垃圾。

您可能想查看 jQuery，它为 XHR 提供了一个非常方便的框架，但我认为您可以通过将 setTimeout 调用移动到外部范围、将其更改为 setInterval 并且只调用一次来解决内存问题。

# asp.net-mvc - 将带有 webform 视图引擎的现有 asp.net-mvc 项目迁移到剃须刀是否值得？

> ID：15858385
> 
> 赞同：5
> 
> 时间：2013-04-07T02:56:32.113
> 
> 标签：asp.net-mvc, razor, viewengine, webforms-view-engine

我有一个大型的 asp.net-mvc 网站。我最近升级到 MVC 4，但我正在争论的一件事是迁移到剃刀引擎是否值得。我 [看到有](https://github.com/telerik/razor-converter)“自动”升级的工具，但我试图弄清楚它是否值得迁移痛苦。我有大约 100 个总视图（常规视图和部分视图）。如果它是一个我将不得不忍受一段时间的代码库，是否值得付出努力？

我知道这可能看起来有点主观，但考虑到我的项目规模，我正在寻找这种迁移工作的预期成本与预期收益。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T03:06:07.733

除非您有特定原因，否则恕我直言。Razor 比 WebForms 视图慢一点点（根据大多数消息来源约为 5%），*但这可能是旧信息。充其量，它们将呈现完全相同的速度。我没有看到任何迹象表明 razor 在渲染方面比 webforms*（[ASP.NET MVC 3 Razor 性能](https://stackoverflow.com/questions/3828961/asp-net-mvc-3-razor-performance)）更快，并且绝对没有提供 WebForms 标记无法提供的任何其他功能。

基本上，它是一种更简洁的标记语言，并且比 WebForms 语法可以更快地编写并且看起来更好。最后，如果您的组织从前就有编写 WebForms 代码的传统，那么所有开发人员都已经熟悉 WebForms 语法。没有学习曲线。

那么 - 你应该重写整个应用程序吗？不——你什么也得不到。展望未来，您应该使用 Razor 吗？取决于，大多数“似乎”都是这样移动的，它看起来确实更好，并使视图更清晰。

但是，如果您决定开始将视图更新为razor，请记住您可以分步执行此操作。ViewEngine 将在确定要渲染的视图时查找这两种类型的视图。这不必一蹴而就，但可以随着时间的推移逐步完成。

PS - 这可能很快就会作为一个主观问题关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T09:37:28.937

我认为您的问题在过去得到了回答，如果您的目标与新功能相匹配，您应该选择升级，例如移动网站支持等等。

[旧帖子](https://stackoverflow.com/questions/12535327/difference-between-asp-net-mvc-3-and-4)

这篇文章提供了 MVC4 发行说明的详细信息以及黑白 MVC3 和 MVC4 的区别，这篇文章中的这两个答案都将帮助您做出决定。

MVC 4 改进了这些特性（要点）：

*   更新和现代化的默认项目模板
*   新的移动项目模板
*   许多支持移动应用程序的新功能
*   自定义代码生成的方法
*   增强了对异步方法的支持

关于MVC4的更多详细信息，可以参考：[http ://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

编辑：由于问题是查看特定的，

视图在两个版本中以相同的方式工作，没有任何变化，

您可以尝试删除不需要的视图引擎

```
protected void Application_Start() 
{ 
    ViewEngines.Engines.Clear(); 
    ViewEngines.Engines.Add(new RazorViewEngine()); 
} 
```

如果你想改进渲染，你必须使用`Partial View`

```
<div class="news">
    <h3>News</h3>
    @Html.Partila("NewControl", Model.NewsItems)
</div> 
```

代码部分：

```
public ActionResult News(){
    NewItemViewModel vm = new NewItemViewModel();
    vm.Items = repository.GetNews();
    return PartialView("NewsControl",vm);
} 
```

这将使正常速度增加 10 倍

确保视图没有组合，并且没有在视图中传递任何空模型。

这应该有助于解决性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T19:13:43.203

如果你问我，自从我开始使用 Razor，我就再也不会回头使用常规的 ASPX 视图引擎了。如果你想为你的应用程序引入新鲜的味道，并且开发人员不介意使用新的 Razor 语法（更简单、更干净），那就去吧。如果每个人都对此持怀疑态度并且应用程序运行良好，请不要迁移。由于这个问题正在邀请个人评论，我的意见与[此](https://stackoverflow.com/a/4021282/270315)一致，这（尽管 Razor 现在似乎比等效的 ASPX[慢得可以忽略不计](https://stackoverflow.com/a/4418661/270315)）显然是在说 -*现在迁移我*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T07:48:41.507

不，除非你有一个真正令人信服的理由。唯一真正的区别是视图的语法更简洁，并且有一个固有的“酷”因素与不同的视图引擎一起工作。

razor 第一次出现时，我们实现了一些混合，因此我们目前正在运行一个同时具有 razor 和 webforms 视图的站点（这是在 razor 成为默认 mvc 视图引擎之前实现的）。

我们已经在 razor 中编写了所有新视图，并将旧视图留在了我们正在慢慢迁移的 web 表单中。但这是为了我们的利益，而不是为了客户或最终用户。因此，仅迁移视图是一项昂贵且及时的事情，没有真正的目的......

如果您已经正确地分层了您的应用程序，那么如果您正在考虑执行此操作，我会建议（认真地）将您现有的网站单独放置并使用新的 mvc 基础架构创建一个单独的独立站点。将站点从 mvc 1 或 2 应用程序升级到新的 mvc 5 应用程序有一定的好处。

我们目前正在我的工作地点执行此操作，因为我们的模型和逻辑都在独立的 dll 中，并且我们有非常薄的控制器。我们注意到现在内置的新 mvc5 功能发生了很多变化和更新。捆绑、twitter-bootstrap 等都是我们可以用来确保客户注意到好处的东西。

它是相同的旧后端，但有一张闪亮的新面孔，这值得做。

# c++ - 没有cpp文件的c ++静态类变量

> ID：15858386
> 
> 赞同：4
> 
> 时间：2013-04-07T02:56:33.420
> 
> 标签：c++, static-members

我有一个用于存储传感器数据的简单类，可以概括为

```
class Data
{
  public:
  Data(){timestamp = Time::now(); id = sNextID++; data = 0; type = DATA_TYPE_UNKNOWN;}

  double data;
  Time timestamp;
  DataType type;

  private:
  static unsigned int sNextID;
}; 
```

我有一个头文件，声明了一堆类似的数据类。鉴于类的简单性，不需要实现 cpp 文件。

问题是，没有实现文件如何初始化 sNextID？我在某处读到它默认为 0，这很好，尽管依赖它似乎有点骇人听闻。然而，更重要的是，如果没有在某个地方初始化它，链接器就会抱怨未定义的引用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T02:58:02.707

使用[**内联函数**](https://stackoverflow.com/a/5057065/1762344)（独立或成员）：

```
inline unsigned &sNextID()
{
    static unsigned data = 0;
    return data;
} 
```

或**类模板**（它的静态定义[可以在头文件中](https://stackoverflow.com/a/1553875/1762344)）：

```
template<typename tag>
struct Foo
{
    static unsigned sNextID;
};

template<typename tag>
unsigned Foo<tag>::sNextID=0; 
```

更新：在 C++17`inline`变量可用：

```
struct Foo
{
    static inline unsigned sNextID;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:01:51.490

在头文件中（假设它的名称是data.h），在最后添加

```
class Data
{
    .....
  private:
  static unsigned int sNextID;
};

#ifdef MY_INIT
unsigned int sNextID = 0;
#endif 
```

在你有 main 的文件中

```
#define MY_INIT
#include "data.h" 
```

在您包含标题的所有其他文件中，只是一个普通的

```
#include "data.h" 
```

这将确保该行将`unsigned int sNextID = 0;`被编译为仅一个翻译单元 - 带有`main`.

# nginx - 如何配置 nginx 以提供版本化的 css 和 javascript 文件

> ID：15858387
> 
> 赞同：0
> 
> 时间：2013-04-07T02:56:45.373
> 
> 标签：nginx

我的 css 文件名为 main.css?v=1.0.0 ， site.css?=v.1.0 。

如何配置 nginx 以提供此类文件（不是扩展名为 .css 或 .js 而是具有版本号）

供参考：

所有文件都在正确的路径中，并且 chrome 开发工具控制台中的错误消息是找不到文件（404）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:51:49.843

当您尝试访问**main.css?v=1.0.0**或**main.css?v=2.0.0**时，任何网络服务器都会将其指向同一个文件**main.css** 。那么在你的情况下，可以为你的版本文件创建一个单独的位置，然后在 nginx 配置中使用下一个代码：

```
location = /main.css {
    if ($arg_v) {
        rewrite ([0-9]+) /where/maincss/versions/stored/main-$avg_v.css last;
    }
    // otherwise default main.css
} 
```

任何其他文件也是如此

# asp.net - 禁用链接按钮的回发

> ID：15858392
> 
> 赞同：1
> 
> 时间：2013-04-07T02:57:05.600
> 
> 标签：asp.net

我正在使用 ASP.NET LinkBut​​ton。我有一个 LinkBut​​ton 从 onclick 调用后面的代码：

在 aspx 上：

```
 <asp:LinkButton ID="LinkTest" runat="server" onclick="LinkTest_Click" OnClientClick="return false;"  >LinkButton</asp:LinkButton> 
```

在 aspx.cs 上：

```
 protected void LinkTest_Click(object sender, EventArgs e)
    {
        //code here
    } 
```

如您所见，我已设置`OnClientClick="return false;"`为不会进行回发。回发不会发生。但是后面的代码没有被触发。我希望触发后面的代码，并且在单击链接按钮时我不希望回发。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:39:47.450

删除`OnclientClick`链接按钮的属性。尝试使用`UpdatePanel`类似：

```
<asp:UpdatePanel ID="up1" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="LinkTest" EventName="Click" />
    </Triggers>
    <ContentTemplate>
          <asp:label id="Label1" runat="server" Text="Initial Label" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

此外，您需要`ScriptManager`在页面中添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:03:36.537

在 updatepanel 中添加链接按钮，删除链接按钮的 onclientclick 属性：

页：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="lblName" runat="server" Text="Old Value"></asp:Label>
            <br />
            <asp:LinkButton ID="lnkbtChange" runat="server" OnClick="lnkbtChange_Click">Change</asp:LinkButton>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

代码隐藏：

```
protected void lnkbtChange_Click(object sender, EventArgs e)
{
    lblName.Text = "New value";
} 
```

# python - 如何在函数定义中强制执行自动参数转换？

> ID：15858393
> 
> 赞同：4
> 
> 时间：2013-04-07T02:57:39.170
> 
> 标签：python, types, type-conversion

考虑这个函数（及其使用）的例子，它接收一个仅有意义的参数`int`：

```
def fun(index):
    index = int(index)
    # do something with index

def main():
    print fun(1e6) 
```

我发现我在几个处理整数的函数上不断重复这种模式，因为它确保我真的收到了一些整数（注意这`1e6`是一个浮点实例）。

这有点麻烦，如果一旦忘记它可能会产生问题（有些*代码*对浮点/整数/字符串/...值的反应不同）。那么这可以以某种方式编码在函数签名中吗？

例如，类似于此伪代码的内容：

```
def fun(int index):
    # do something with index 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T03:05:02.290

首先，你不应该真的这样做（即使有些日子我也想这样做......）。Python 不是静态类型的，所以你不应该真正引入杂乱无章的静态类型。

Buuut，回答你的问题。[装饰器](https://www.google.com/search?q=python+decorators&aq=f&oq=python+de&aqs=chrome.0.59j57j60l3j0.1021j0&sourceid=chrome&ie=UTF-8)：

```
def ensure_int(fn):
    def wrapper(num):
        return fn(int(num))
    return wrapper

def test(num):
    return num + 2

@ensure_int
def test2(num):
    return num + 2 
```

像这样工作：

```
> test("2") 
ERROR!!!

>test2("2")
4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:28:46.797

在 Python 3 中，您可以使用[函数注释](http://www.python.org/dev/peps/pep-3107/)，然后编写一个装饰器，将参数转换（或尝试转换）为您指定的类型。

在 Python 2 中，您无法以您想要的方式执行此操作。Python 2 的语法不支持在函数定义中放入任何东西，除了参数本身，而且你不能改变 Python 的语法来让你把类型也放在那里。

# drupal - 共享主机中的 Drupal 错误

> ID：15858397
> 
> 赞同：0
> 
> 时间：2013-04-07T02:58:13.360
> 
> 标签：drupal, drupal-7, shared-hosting

我有一个使用 Drupal 制作的网站，托管在一个共享计划中。它安装了50多个模块。该网站适用于观众。但是有几个问题。

1.  用户 1 无法登录。但其他角色可以（如编辑等。编辑只有添加页面和文章的能力。）。为了检查发生了什么，我尝试为现有用户（当前可以登录）添加更多权限，并将该数据库上传到在线服务器。然后该用户无法登录。

2.  当我尝试在后端添加文章/页面/块以外的其他内容时，网站崩溃。添加新模块肯定会使数据库崩溃。恢复数据库后一切正常。

这是什么原因？这是因为共享主机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:31:19.243

尝试增加 php 的内存限制。

在你的`settings.php`文件中。通常它位于`sites/default/settings.php`添加新行下。

```
ini_set("memory_limit", "256M"); 
```

如需进一步阅读，请查看这篇文章[http://drupal.org/node/76156](http://drupal.org/node/76156)

希望这可以帮助...

# parameters - 在哪里可以找到 Dreamweaver 中媒体对象的参数列表？

> ID：15858404
> 
> 赞同：0
> 
> 时间：2013-04-07T02:59:31.960
> 
> 标签：parameters, dreamweaver

有没有人有 Dreamweaver 的媒体对象参数的完整列表？嵌入视频后，我想给它一些参数，但我不知道所有这些参数是什么。到目前为止，我有 3 个：

```
Autoplay: False, Loop: False, Controls: True 
```

有人有更多的参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:50:10.370

[您可以在此处](http://www.theedifier.com/blogging-blogger/attributes-embed-object-video-audio.php)查看另一个参数和示例如何使用

# jquery - 即时在 INPUT 中格式化电话号码

> ID：15858405
> 
> 赞同：0
> 
> 时间：2013-04-07T02:59:33.433
> 
> 标签：jquery, phone-number

我正在寻找一种功能，该功能将在该人输入电话号码时重新格式化它，因此它将显示为：(212) 477-1000

我找到了一个片段并创建了一个函数，它将获取该值并重新格式化它。有谁知道另一个片段将格式化 2124771000，因为人们在“即时”中键入它？

* * *

```
<input value="2124771000" type=text id="DPRnumber">

$('#DPRnumber').on('click', 'input', function(e){

    $(".phone").text(function(i, text) {
        text = text.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3");
        return text;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:11:48.267

我知道它很长，但效果很好。

```
<script language="javascript">
var zChar = new Array(' ', '(', ')', '-', '.');
var maxphonelength = 14;
var phonevalue1;
var phonevalue2;
var cursorposition;

function ParseForNumber1(object){
  phonevalue1 = ParseChar(object.value, zChar);
}

function ParseForNumber2(object){
phonevalue2 = ParseChar(object.value, zChar);
}

function backspacerUP(object,e) { 
  if(e){ 
    e = e 
  } else {
 e = window.event 
  } 
  if(e.which){ 
    var keycode = e.which 
  } else {
    var keycode = e.keyCode 
  }

  ParseForNumber1(object)

  if(keycode >= 48){
    ValidatePhone(object)
  }
}

function backspacerDOWN(object,e) { 
 if(e){ 
 e = e 
 } else {
  e = window.event 
 } 
 if(e.which){ 
  var keycode = e.which 
 } else {
   var keycode = e.keyCode 
  }
  ParseForNumber2(object)
} 

function GetCursorPosition(){

 var t1 = phonevalue1;
    var t2 = phonevalue2;
 var bool = false
  for (i=0; i<t1.length; i++)
  {
   if (t1.substring(i,1) != t2.substring(i,1)) {
  if(!bool) {
     cursorposition=i
    window.status=cursorposition
      bool=true
     }
   }
  }
}

function ValidatePhone(object){

  var p = phonevalue1

  p = p.replace(/[^\d]*/gi,"")

  if (p.length < 3) {
    object.value=p
  } else if(p.length==3){
pp=p;
d4=p.indexOf('(')
d5=p.indexOf(')')
if(d4==-1){
  pp="("+pp;
}
if(d5==-1){
  pp=pp+")";
}
object.value = pp;
  } else if(p.length>3 && p.length < 7){
p ="(" + p; 
l30=p.length;
p30=p.substring(0,4);
p30=p30+") " 

p31=p.substring(4,l30);
pp=p30+p31;

object.value = pp; 

 } else if(p.length >= 7){
p ="(" + p; 
l30=p.length;
p30=p.substring(0,4);
p30=p30+") " 

p31=p.substring(4,l30);
pp=p30+p31;

l40 = pp.length;
p40 = pp.substring(0,9);
p40 = p40 + "-"

p41 = pp.substring(9,l40);
ppp = p40 + p41;

object.value = ppp.substring(0, maxphonelength);
  }

  GetCursorPosition()

  if(cursorposition >= 0){
if (cursorposition == 0) {
  cursorposition = 2
} else if (cursorposition <= 2) {
  cursorposition = cursorposition + 1
} else if (cursorposition <= 4) {
  cursorposition = cursorposition + 3
} else if (cursorposition == 5) {
  cursorposition = cursorposition + 3
} else if (cursorposition == 6) { 
  cursorposition = cursorposition + 3 
} else if (cursorposition == 7) { 
  cursorposition = cursorposition + 4 
} else if (cursorposition == 8) { 
  cursorposition = cursorposition + 4
  e1=object.value.indexOf(')')
  e2=object.value.indexOf('-')
  if (e1>-1 && e2>-1){
    if (e2-e1 == 4) {
      cursorposition = cursorposition - 1
    }
  }
} else if (cursorposition == 9) {
  cursorposition = cursorposition + 4
} else if (cursorposition < 11) {
  cursorposition = cursorposition + 3
} else if (cursorposition == 11) {
  cursorposition = cursorposition + 1
} else if (cursorposition == 12) {
  cursorposition = cursorposition + 1
} else if (cursorposition >= 13) {
  cursorposition = cursorposition
}

var txtRange = object.createTextRange();
txtRange.moveStart( "character", cursorposition);
txtRange.moveEnd( "character", cursorposition - object.value.length);
txtRange.select();
 }

}

function ParseChar(sStr, sChar)
{

  if (sChar.length == null) 
   {
    zChar = new Array(sChar);
  }
    else zChar = sChar;

  for (i=0; i<zChar.length; i++)
  {
  sNewStr = "";

  var iStart = 0;
  var iEnd = sStr.indexOf(sChar[i]);

  while (iEnd != -1)
  {
    sNewStr += sStr.substring(iStart, iEnd);
    iStart = iEnd + 1;
    iEnd = sStr.indexOf(sChar[i], iStart);
    }
    sNewStr += sStr.substring(sStr.lastIndexOf(sChar[i]) + 1, sStr.length);

    sStr = sNewStr;
  }

  return sNewStr;
}
</script> 
```

# f# - F# 向上舍入到特定的小数位数

> ID：15858408
> 
> 赞同：4
> 
> 时间：2013-04-07T03:00:11.440
> 
> 标签：f#, rounding, roundup

例如，我可以使用`System.Math.Round((float),2)`将浮点数舍入到最接近的小数点后 2 位，但无论如何在 F# 中我可以将浮点数***舍***入到小数点后 2 位？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:39:51.373

四舍五入的黑客解决方案

```
let round x d =
    let rounded = Math.Round(x,d)
    if rounded < x then x + Math.Pow(10,-d) else rounded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:34:28.903

向上取整（严格向上，而不是远离零）：

```
let roundUp x d = 
    Math.Round(x + Math.pow(10,-d)/2,d) 
```

考虑将 0.001 舍入为 2dp。您希望将其四舍五入为 0.01：

```
0.001 + 0.01/2 = 0.006
-> 2dp: 0.01 
```

这源自从截断中获得正常舍入的常用方法；增加一半所需的精度并截断。然而，这会受到负数的影响，因此需要根据原始值的符号减去或添加增量。

请注意，如果您总是四舍五入，那么负数会向零舍入。在通常需要 2dp 的财务情况下，这是一个坏主意，因为 0.021 的余额四舍五入为 0.03，但 -0.021 的余额四舍五入为 -0.02，并且计算借方还是贷方开始变得重要. 如果你对称地做它，例如总是远离零，那么你就不再关心了。

# php - 显示数据库 MySQL 中的搜索数据

> ID：15858410
> 
> 赞同：1
> 
> 时间：2013-04-07T03:00:51.317
> 
> 标签：php

如何显示我在 MySQL 中搜索的数据？

我尝试了这段代码，但它总是给我一个错误：

> “警告：在第 12 行的 C:\xampp\htdocs\FindFriend\resultFindFriend.php 中为 foreach() 提供的参数无效”

```
<?php

if(!isset($_POST['dataFriend'])){
    echo("no result");

}else {

    $find = $_POST['dataFriend'];
    $con = mysqli_connect('127.0.0.1','root','','test');
    $queryFindFriend = "SELECT fullname FROM members WHERE fullname LIKE '%".$find."%'";
    $friendResult = mysqli_query($con, $queryFindFriend);
    $rows = mysqli_fetch_assoc($friendResult);
    foreach($rows as $row)
    {
    ?>
        <div class="outputfindfriend">
        <?php echo $row;?>
        </div>
    <?php
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:08:13.957

尝试：

```
<?php echo $row['your field name'];?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:21:37.780

这是因为[`mysqli_fetch_assoc()`](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)当时获取单行。因此，`$rows`不是一个数组，而是一个简单的值。

使用更新的 PHP 5.4+ 版本，您可以`foreach`在 mysqli 结果上使用：

```
foreach ($friendResult as $row): ?>
    <div class="outputfindfriend">
    <?= $row['fullname'] ?>
    </div>
<?php endforeach; 
```

foreach 将一次执行一行。

如果您的 PHP 版本低于 PHP 5.4，这是不可能的。

要解决此问题，您必须更改循环的逻辑。`mysqli_fetch_assoc`我们可以使用当没有更多行时将返回 false的事实。因此，我们可以将其中的赋值语句更改`for`为 a 。`while`这样，它将输出直到`$row`被分配为假。

做这样的事情：

```
while ($row = mysqli_fetch_assoc($friendResult))
{
?>
    <div class="outputfindfriend">
    <?php echo $row;?>
    </div>
<?php
} 
```

这样，您获取一行，然后输出它等等。

# android - 保存以编程方式添加的关于方向更改的视图？

> ID：15858413
> 
> 赞同：5
> 
> 时间：2013-04-07T03:01:03.993
> 
> 标签：android, views, orientation

我无法保存有关方向更改的视图。所以这就是我的情况。我有一个扩展 Horizo​​ntalScrollView 的类，它在它的构造函数中创建一个 LinearLayout 和一个按钮。单击按钮时，会将更多按钮添加到 LinearLayout。当活动开始时，我将操作栏设置为这个自定义视图，一切正常，从线性布局中添加和删除按钮。但是，这就是问题开始的地方。如果切换方向，onCreate 将重新启动，因此我的自定义视图的新实例被创建并设置为操作栏。因此，当我切换方向时，我的自定义视图会返回到开头。

如何在整个方向更改期间保持视图的层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:11:12.800

当方向改变时，活动被破坏并重新创建。

在您的清单中，将以下内容添加到您的活动中。

```
 <activity android:name=".MyActivity"
      android:configChanges="orientation|keyboardHidden|screenSize"
      android:label="@string/app_name">
      //Beginning with Android 3.2 (API level 13), the "screen size" also changes when the device switches between portrait and landscape orientation.
      //add screenSize for api 13 and above. 
```

现在，当这些配置之一发生更改时，MyActivity 不会重新启动。相反，MyActivity 收到对 onConfigurationChanged() 的调用。此方法传递一个配置对象，该对象指定新的设备配置。

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T04:09:18.757

获取这么多信息的最佳方法是将 android:configChanges="orientation" 添加到清单中的活动中，它会阻止 Android 假定您想要的销毁和重新启动功能。老实说，我建议将其添加到没有横向和纵向模式不同布局文件的任何活动中。

# android - 为什么在 Eclipse 的 SDK 中选择 Android API 而不是 Google API？

> ID：15858414
> 
> 赞同：4
> 
> 时间：2013-04-07T03:01:23.770
> 
> 标签：android, eclipse, sdk, google-api

当您在 Eclipse 中创建一个 android 项目时，您必须选择使用哪个平台进行编译。您可以选择 API 17 (Android 4.2) 或 Google API (API 17)。

据我了解，Google API 是 API 17（Android 4.2），但具有地图库支持和 USB 开放库。因此，如果 Google API 与 Android 相同，但具有更多功能……您为什么不每次都选择它？

Google API 有缺点吗？我看到的每个在线教程，他们都使用 API 17（非 Google API）。我总是很好奇为什么他们手动将其更改为那个，而不是只使用其中包含更多内容的那个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T06:31:02.473

当您使用 Google API 运行时，您的应用程序将构建为在已安装 Google 服务（地图、USB 等）的设备上运行。如果您绝对需要这些服务，则应针对 Google API 构建，但您的应用将无法在未经 Google 认证的设备上运行（即未安装 Google Play）。

如果您确实想在没有 Google Play 的设备上运行，并且您的应用不需要任何 Google 服务 100% 存在，那么您应该针对普通的 Android API 进行编译。

有关Google 对认证设备的期望的更多信息，请参阅[此文档。](http://source.android.com/faqs.html#compatibility)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:08:28.060

一些没有经过认证的安卓手机（那些没有谷歌播放的手机）的廉价安卓手机将不支持针对谷歌 api 编译的应用程序。因此，除非您需要 google api 提供的功能，否则只需针对 android api 构建

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T03:02:49.520

Google API 包括一些额外的东西，比如地图。它是可选的，有些人不想下载额外的东西。示例使用非 API 版本，以防下载示例的人没有下载 Google API。

# css - 填充居中流体最大宽度 div 左侧的空间

> ID：15858421
> 
> 赞同：0
> 
> 时间：2013-04-07T03:02:36.537
> 
> 标签：css, layout, html

我有一个具有流体宽度的居中 div，由最大宽度限制：

```
#content {
    height: 100%;
    margin-left: auto;
    margin-right: auto;
    max-width: 760px;
    width: 80%;
} 
```

由于 max-width 属性，我无法填充左右两侧的空间。即使内容 div 受到最大宽度的限制，我如何也可以使左右两侧的流体 div 填充空白空间？最好以纯 CSS 方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:24:36.883

`min-width`与 80% 一起使用？也可能用于`box-sizing`确保百分比值按其真实值处理。

此处的潜在解决方案[http://jsfiddle.net/vSRgS/1](http://jsfiddle.net/vSRgS/1)

# java - 另存为对话框以保存 PDF 文件

> ID：15858424
> 
> 赞同：0
> 
> 时间：2013-04-07T03:03:01.647
> 
> 标签：java, savefiledialog, content-disposition

我正在尝试显示另存为对话框来保存 PDF 文件。这应该在单击 JSP 中的链接时发生。单击此链接时，我调用了一个 struts 操作，它准备 PDF 并转发到另一个我想用于下载框的 JSP 'download.jsp'。

我尝试使用“document.execCommand”，但似乎这只适用于 .txt 和 .html 文件。

然后我尝试通过设置响应头和内容类型来做到这一点。以下是我的 download.jsp 中的代码。但这会将垃圾字符写入我的浏览器。

请让我知道这个问题的解决方案。

```
<%@ page language="java"     import="javax.servlet.ServletOutputStream,java.io.BufferedOutputStream,java.io.DataInputStr eam,java.io.File,java.io.FileInputStream"%><%

response.setHeader("Content-Disposition","attachment;filename=\"" + "mandateOut.pdf" + "\"");
response.setContentType( "application/pdf" );

response.setHeader("Pragma", "public");
response.setHeader("Cache-Control", "max-age=0");   
File file = new File(<fully qualified file name>);
response.setContentLength( (int)file.length() );

// get the OutputStream and buffer our bytes to it
ServletOutputStream outStream = response.getOutputStream();

byte[] buf = new byte[1024];
DataInputStream in = new DataInputStream(new FileInputStream(file));

int len;
while ((in != null) && ((len = in.read(buf)) != -1))
{
outStream.write(buf,0,len);
}

// keep the page from freaking out over our use of it's outputstream
in.close();
outStream.flush();
outStream.close();

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:02:27.007

您正在使用 Struts，一个 MVC 框架。在这样的框架中，用于生成 HTML 标记的 View 被实现为 JSP。它应该只包含 HTML、JSP EL 和 JSP 标记。没有Java代码。它的默认内容类型是 text/html。

控制器的作用是处理表示逻辑，并使用 Java 动作实现。

在这种情况下，您不需要生成任何 HTML 标记。您只需要将字节发送到响应输出流。那么为什么要使用 JSP 来做到这一点呢？这不是它的工作。您应该直接从控制器执行此操作（即操作）。

将上面的代码直接放到action中，应该一切正常。

注意 ：

*   您不需要 DataInputStream 来读取字节。您应该更喜欢 BufferedInputStream 。
*   这个流应该在一个`finally`块中关闭。

# ruby-on-rails - gitignore vs 环境变量 Ruby on Rails

> ID：15858426
> 
> 赞同：1
> 
> 时间：2013-04-07T03:03:30.887
> 
> 标签：ruby-on-rails, environment-variables, gitignore

我一直在我的 Ruby on Rails 应用程序上使用 gitignore 来保护密码/密钥，这样我的配置文件就不会被提交到 Github 上并且可以公开查看。

浏览 Github Developer's API 教程建议使用环境变量来存储这些。如果我不部署，是否有任何理由不应该使用 gitignore 来存储我的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:10:15.903

没有非常令人信服的理由更喜欢环境变量而不是文件，但我不确定依赖`.gitignore`并将文件保存在源代码树中是否会感到舒服。如果您选择文件，您可能需要考虑将它们移到源代码树之外以避免任何错误。

如果您在过去的任何时候提交过文件（尤其是提交到像 GitHub 这样的公共网站），那么`.gitignore`稍后添加它们不会删除之前提交的版本的副本；它们仍将在存储库中，并且有人可以浏览回没有被忽略的版本。

此外，根据您运行应用程序的方式，将它们与应用程序放在同一目录中可能会使您更容易受到基于 Web 的安全漏洞的攻击。如果您将它们保留在应用程序树之外，您可能会获得一些有限的保护，以防止可以从应用程序树中读取任意数据的漏洞利用。我不知道这会引起多大的关注（可以在应用程序树内读取的漏洞利用也可能在其外部读取），但将它们保存在另一个目录中并没有什么坏处。

我更喜欢环境变量，因为它使部署到 Heroku 更容易，所以我也在开发中使用它们。除了简单的登录名/密码对（RSA 密钥等）之外，我可能会使用一个文件，并将其存储在我的主目录或`/var/lib`or`/etc`或`/usr/local`or 下的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:38:47.150

有专门用于解决此类问题的 gem

费加罗：[https ://github.com/laserlemon/figaro](https://github.com/laserlemon/figaro)

简而言之，Figaro 提供了一种简洁的方式来配置您的应用程序并保持私有内容......私有。

您的所有密码、API 密钥和任何机密信息都可以保存在本地 yml 中，并且不会被推送到远程 git repo。

# javascript - 动态添加鼠标已经在元素上方时如何捕获鼠标悬停事件？

> ID：15858429
> 
> 赞同：1
> 
> 时间：2013-04-07T03:04:14.610
> 
> 标签：javascript, jquery, mouseevent, mouseover, jquery-events

我动态添加这个

```
$(ele).on("mouseover") 
```

当用户将鼠标悬停在元素上时，但似乎`mouseover`只有当我重新输入元素时才会触发事件。

**[这是 jsFiddle 中的示例](http://jsfiddle.net/tMMFb/)**（单击`<div>`以添加事件侦听器）

**如何在不手动触发的情况下实现这一目标** `.mouseover()` **？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:42:26.547

我想出的最佳解决方案是（感谢[Brandon](https://stackoverflow.com/users/674326/brandon)的[建议](https://stackoverflow.com/questions/15858429/how-to-catch-mouseover-event-when-dynamically-added-where-mouse-is-already-over/15858619#comment22578296_15858619)）：

将 x,y pos 存储在文档中（稍微降低网页性能）：

```
$(document).mousemove(function (e) {
    // Set global values
    window.mouseXPos = e.pageX;
    window.mouseYPos = e.pageY;
}); 
```

然后当动画完成时：

```
$(document.elementFromPoint(window.mouseXPos, window.mouseYPos)).trigger("mouseenter"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:38:46.227

你不能。mouseover 仅在鼠标越过元素边界时触发。一旦鼠标在元素内，它就不会触发。您的问题表明您可能需要退后一步重新检查您的问题。如果您在鼠标已经在元素内时采取行动，那么为什么需要 mouseover 事件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T03:42:25.003

以这种方式附加事件处理程序后，您可以使用触发 jQuery 函数手动触发鼠标悬停

```
$(".test").on("click",function(){
    $(this).on("mouseover",function(){
       alert("");   
    });
    $(this).trigger('mouseover');
}) 
```

# floating-point - 取对数并加法与乘法

> ID：15858433
> 
> 赞同：6
> 
> 时间：2013-04-07T03:04:55.140
> 
> 标签：floating-point, precision, multiplication, logarithm, exp

如果我想取浮点数列表的乘积，那么通过添加它们的对数然后取总和的 exp 而不是仅仅将它们相乘，最坏情况/平均情况的精度是多少。有没有这种情况实际上更精确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T03:45:23.140

没有任何上溢或下溢恶作剧，如果`a`和`b`是浮点数，则乘积`a*b`将被计算在 1/2 ulp 的相对误差范围内。

因此，在乘以`N` `double`s 链后，相对误差的粗略界限导致答案最多为 (1 - epsilon/2) ^(-N)的一个因子，约为 exp(epsilon `N`/2)。我想`N`在平均情况下，您可以预期 epsilon sqrt( ) 左右的偏差。（首先，这大约是 N epsilon。）

但是，这种策略更有可能发生指数溢出和下溢；由于次正规数的舍入，您更有可能得到无穷大、零和 NaN 以及不精确的值。

从这个意义上说，另一种方法更健壮，但在直接方法不会导致上溢或下溢的情况下，它会慢得多并且错误更严重。在 N 至少比 2 ^(53)小几个数量级的情况下，这是对标准双精度的非常非常粗略的分析：

你总是可以取一个有限浮点数的对数并得到一个有限浮点数，所以我们很酷。您可以直接将`N`浮点数相加以获得`N`epsilon 最坏情况“相对”错误和 sqrt(N) epsilon 预期“相对”错误，或者使用[Kahan 求和](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)获得大约 3 epsilon 最坏情况“相对”错误。吓人的引号围绕“相对”，因为误差与您要求和的事物的绝对值的总和有关。

请注意，没有有限`double`的对数的绝对值大于 710 左右。这意味着我们使用 Kahan 求和计算的对数和的*绝对*误差最多为 2130 N epsilon。当我们对对数和求幂时，我们从正确答案中得到最多 exp(2130 N epsilon) 的因子。

log-sum-exp 方法的病态示例：

```
int main() {
  double foo[] = {0x1.000000000018cp1023, 0x1.0000000000072p-1023};
  double prod = 1;
  double sumlogs = 0;
  for (int i = 0; i < sizeof(foo) / sizeof(*foo); i++) {
    prod *= foo[i];
    sumlogs += log(foo[i]);
  }
  printf("%a %a\n", foo[0], foo[1]);
  printf("%a %a %a\n", prod, exp(sumlogs), prod - exp(sumlogs));
} 
```

在我的平台上，我得到了 0x1.fep-44 的差异。我敢肯定还有更糟糕的例子。

# python - python在矢量化后打印生成器列表？

> ID：15858435
> 
> 赞同：1
> 
> 时间：2013-04-07T03:05:12.003
> 
> 标签：python, arrays, numpy, generator, vectorization

我是矢量化和生成器的新手。到目前为止，我已经创建了以下函数：

```
import numpy as np

def ismember(a,b):
    for i in a:
        if len(np.where(b==i)[0]) == 0:
            lv_var = 0
        else:
            lv_var = np.int(np.where(b==i)[0])
        yield lv_var

vect = np.vectorize(ismember)

A = np.array(xrange(700000))
B = np.array(xrange(700000))

lv_result = vect(A,B) 
```

当我尝试转换`lv_result`为列表或遍历生成的 numpy 数组时，我得到了生成器对象的列表。我需要以某种方式获得实际结果。如何打印此功能的实际结果？ `.next()`on generator 似乎没有完成这项工作。

有人可以告诉我我做错了什么或者我如何重新配置​​代码以实现最终目标？

# -------------------------------------------------- -

好的，所以我现在了解矢量化部分（感谢[Viet Nguyen](https://stackoverflow.com/users/2253785/viet-nguyen)的示例）。
我还能够打印生成器对象结果。代码已修改。请看下文。

对于生成器部分：

我想做的是模仿一个名为[ismember](http://www.mathworks.com/help/matlab/ref/ismember.html#btcnv44-11)的 MATLAB 函数（格式为：[Lia,Locb] = ismember(A,B)。我只是想只获取 Locb 部分。

> 来自 Matlab：Locb，对于 A 中属于 B 的每个值，包含 B 中的最低索引。输出数组 Locb 包含 0，只要 A 不是 B 的成员

主要问题之一是我需要能够尽可能高效地执行此操作。为了测试，我有两个 700k 元素的数组。创建一个生成器并检查生成器的值似乎并没有获得更好的性能。

为了打印生成器，我在下面创建了函数 f()。

```
import numpy as np

def ismember(a,b):
    for i in a:
        index = np.where(b==i)[0]
        if len(index) == 0:
            yield 0
        else:
            yield index

def f(A, gen_obj):
    my_array = np.arange(len(A))
    for i in my_array:
        my_array[i] = gen_obj.next()
    return my_array

A = np.arange(700000)
B = np.arange(700000)

gen_obj = ismember(A,B)

f(A, gen_obj)

print 'done' 
```

注意：如果我们用较小的数组尝试上面的代码：让我们说。

A = np.array([3,4,4,3,6])

B = np.array([2,5,2,6,3])

结果将是一个数组： [4 0 0 4 3]

就像 matlabs 函数一样：目标是为 A 中属于 B 的每个值获取 B 中的最低索引。输出数组 Locb 包含 0，只要 A 不是 B 的成员。

Numpy 的交集功能并不能帮助我实现目标。此外，返回数组的大小需要保持与数组 A 的大小相同。

到目前为止，这个过程需要很长时间（对于 700k 元素的数组）。不幸的是，我还没有找到最好的解决方案。任何关于我如何重新配置​​代码以实现最终目标并具有最佳性能的输入将不胜感激。

* * *

## 优化问题解决于：

[python-run-generator-using-multiple-cores-for-optimization](https://stackoverflow.com/questions/15864082/python-run-generator-using-multiple-cores-for-optimization)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:13:50.760

我相信您误解了`numpy.vectorize`函数的输入。“矢量化”函数在每个元素的基础上对数组进行操作（[请参阅`numpy.vectorize`参考资料](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)）。您的函数`ismember`似乎假定输入`a`和`b`是数组。相反，将该函数视为您将与 built-in 一起使用的东西`map()`。

```
> import numpy as np
> def mask(a, b):
>   return 1 if a == b else 0
> a = np.array([1, 2, 3, 4])
> b = np.array([1, 3, 4, 5])
> maskv = np.vectorize(mask)
> maskv(a, b)
  array([1, 0, 0, 0]) 
```

另外，如果我正确理解您的意图，NumPy 带有一个[相交函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.intersect1d.html)。

# eclipse - tomcat-maven-plugin：服务器返回 HTTP 响应代码：403

> ID：15858436
> 
> 赞同：1
> 
> 时间：2013-04-07T03:05:12.640
> 
> 标签：eclipse, jakarta-ee, maven, tomcat, m2e

我正在尝试将 Maven webapp 从 Eclipse Java EE 自动部署到我的本地 Tomcat 服务器。我正在使用 Windows XP。这是错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on project practicaIW: Cannot invoke Tomcat manager: Server returned HTTP response code: 403 for URL: http://127.0.0.1:8080/manager/deploy?path=%2Fpractica-3&war= -> [Help 1] 
```

我想我知道这个错误的原因：

*   如果我在 Eclipse 中运行 Tomcat 服务器，则 127.0.0.1:8080 是我的工作区/目标。上面有任何管理器文件夹和其他类，所以它不起作用。可能的拙劣解决方案：将此文件夹和文件复制到我的项目中。
*   如果我在 Eclipse 之外运行 Tomcat 服务器，则 127.0.0.1:8080 是 tomcat_location/webapps。它不起作用，因为 Eclipse 在我的工作区中创建了 war 文件，因此 Tomcat 找不到它。可能**的解决方案：配置 maven-war-plugin 以将 war 文件创建到 127.0.0.1:8080 中。我怎么能做到？**这是最好的方法吗？

pom.xml 提取：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <configuration>
        <url>http://127.0.0.1:8080/manager</url>
        <username>admin</username>
        <password>password</password>
        <server>TomcatServer</server>
        <path>/practica-3</path>
    </configuration>
 </plugin> 
```

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
       <warSourceDirectory>WebContent</warSourceDirectory>
       <failOnMissingWebXml>false</failOnMissingWebXml>
    </configuration>
  </plugin> 
```

tomcat-users.xml 提取：

```
<tomcat-users>
    <role rolename="manager"/>
    <role rolename="manager-gui"/>        
    <role rolename="admin"/>
    <role rolename="manager-script"/>
    <user password="password" roles="admin,manager,manager-gui,manager-script" username="admin"/>
</tomcat-users> 
```

* * *

**更新**：pvm14 回答了这个问题。但之前您必须打开文件：Tomcat v7.0 Server at localhost.server。方法如下：

1.  特性
2.  单击切换位置，将出现箭头 3 指示的文件。
3.  打开文件 ![在此处输入图像描述](https://i.stack.imgur.com/b6P3f.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:47:15.597

您从 Eclipse 内部启动的 Tomcat 服务器不会有可用的“Tomcat 管理器”控制台（localhost:8080/manager），除非您使用以下选项对其进行配置：

![在此处输入图像描述](https://i.stack.imgur.com/VF7Fo.png)

这意味着您从 Eclipse 启动的 Tomcat 正是您在 IDE 中定义 Tomcat 服务器时提供的那个。否则 Eclipse 会在工作空间内的目录中运行一个修剪后的版本，没有可用的管理器：

```
{workspace_dir}\.metadata\.plugins\org.eclipse.wst.server.core\tmp0 
```

如果您在运行的实例中没有可用的 tomcat 管理器，则 tomcat-maven-plugin 将无法部署任何东西

最好的祝福

# mysql - 单个 MySQL 查询以选择具有相互匹配的某些单元格的任何行

> ID：15858437
> 
> 赞同：1
> 
> 时间：2013-04-07T03:05:14.597
> 
> 标签：mysql, sql

标题有点混乱，让我解释一下。假设我有以下行：

```
type        name            seeds       size

fruit       apple           8           22
fruit       orange          8           14
fruit       raspberry       83          6
berry       pomegranate     201         19 
```

我想要一个查询，它将比较所有行并返回`seeds`与任何其他行匹配的任何行，类型为`fruit`. 那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T03:09:00.363

试试这个：

```
SELECT DISTINCT t1.*
FROM table t1
INNER JOIN table t2 ON t2.seeds = t1.seeds
WHERE t1.type = 'fruit' AND t2.type = 'fruit' AND t1.name <> t2.name 
```

**编辑**：

根据您的评论，要查找`seeds`匹配但`type`不匹配的项目，请尝试以下操作：

```
SELECT DISTINCT t1.*
FROM table t1
INNER JOIN table t2 ON t2.seeds = t1.seeds
WHERE t1.type <> t2.type 
```

# gwt - 未捕获的伞异常逃脱

> ID：15858442
> 
> 赞同：0
> 
> 时间：2013-04-07T03:06:07.790
> 
> 标签：gwt, mvp, requestfactory

请帮我解决这个 Umbrella 异常[http://pastebin.com/DACPRhbP](http://pastebin.com/DACPRhbP)

NewUserPresenter 文件： [http ://pastebin.com/FZyAffu8](http://pastebin.com/FZyAffu8)

NewUserViewImpl 文件： [http ://pastebin.com/i6fYwnLH](http://pastebin.com/i6fYwnLH)

服务器文件夹中的用户实体：http: [//pastebin.com/6ktwf5vp](http://pastebin.com/6ktwf5vp)

[应用控制器： http](http://pastebin.com/Kn5Wg61e) ://pastebin.com/Kn5Wg61e

[入口点： http](http://pastebin.com/sEHHihVu) ://pastebin.com/sEHHihVu

用户代理：http : [//pastebin.com/mfd67p2U](http://pastebin.com/mfd67p2U)

[用户请求： http](http://pastebin.com/JxQe77LL) ://pastebin.com/JxQe77LL

对我来说，这似乎是我添加到这个项目的请求工厂的东西导致了这些异常。在此之前一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:47:09.953

[https://groups.google.com/forum/?fromgroups=#!searchin/google-web-toolkit/umbrella](https://groups.google.com/forum/?fromgroups=#!searchin/google-web-toolkit/umbrella) $20exception/google-web-toolkit/aZggEeNm0Js/9qfNXleD1lwJ

[https://code.google.com/p/google-web-toolkit/issues/detail?id=5760](https://code.google.com/p/google-web-toolkit/issues/detail?id=5760)

异常的原因是没有为密码字段定义 getter 方法。

# ruby - Fixnum (Integer) 和 Float 如何在 Ruby 中比较相等？

> ID：15858444
> 
> 赞同：3
> 
> 时间：2013-04-07T03:06:31.153
> 
> 标签：ruby, floating-point, fixnum

在 Flanagan 和 Matz 的*The Ruby Programming Language*中，我读到：

> 这些`Numeric`类在其运算符中执行简单的类型转换`==`，因此（例如） the`Fixnum 1`和`Float 1.0`compare 是相等的。

鉴于即使是两个`Float`s 表示`1.0`也可能由于舍入而无法通过相等性测试，那么如何保证 a*`Fixnum`*和 a之间的相等性`Float`？难道不能只保证 a*`Decimal`*和 a之间`Float`吗？

还是这本书不准确，因为这不是本章上下文的重点？

* * *

**一个编辑，希望增加清晰度：**

我刚刚读到 IEEE754 （浮点）可以精确地表示最大为 2 ^(24的整数，并且最多可以表示为 2) ^(53)的整数。根据[这个问题](https://stackoverflow.com/questions/3793838/which-is-the-first-integer-that-an-ieee-754-float-is-incapable-of-representing-e)，2 ^(53) +1 (9,007,199,254,740,993) 是第一个不能用双精度表示的整数（因此是浮点数）。然后我的问题是，如何

```
9007199254­740993.0 == 90071­9925474099­3 
```

评价为`true`? 舍入不应该导致左侧（不能用`double`or表示`float`）舍入到与右侧不匹配的值（精确整数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:52:39.390

正如负责该比较的函数的源[代码所述（](http://rxr.whitequark.org/mri/source/bignum.c?v=2.0.0-p0#1488)`rb_integer_float_eq``1.0 == 1.0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:55:05.677

你确定`0.9 == 0.9`不能保证像这样的表达吗？我不这么认为。它在我的机器上成功了，即使存在舍入误差，算法也应该始终将相同的文字表达式映射到具有相同舍入误差的相同浮点数。例如，如果表达式`"0.9"`要在内部表示为`0.900001`，则始终如此。它有时不会映射到`0.900000`，有时会映射到`0.900002`. 所以应该保证平等。

`Fixnum`关于and之间的比较`Float`，如果将 fixnum 文字转换为浮点数，它也将映射到相同的浮点数，就好像它从一开始就是浮点数一样，具有相同的舍入误差。换句话说，以下两个进程以相同的浮点数结束：

*   字面量`"1.0"`→ 一些带有舍入误差的内部浮点数（例如`0.999999`）
*   Literal `"1"`→ Internal fixnum `1`→ 一些带有舍入误差的内部浮点数 ( `0.999999`)

**编辑**或者，正如 fmendez 所说，如果整数在内部精确映射到浮点数，则与整数完全对应的浮点数（如`"1.0"`、`"2.0"`等）在内部浮点表达式中没有任何舍入误差。所以无论如何都会保证平等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:26:23.137

在 Squeak/Pharo Smalltalk 中，我更改了等式/不等式比较测试以始终将不精确的算术值（浮点）提升为精确的算术值（整数分数 ScaledDecimal）。
见[http://bugs.squeak.org/view.php?id=3374](http://bugs.squeak.org/view.php?id=3374)

早在那之前，这是在各种 lisp 风格中完成的。
见[http://www.lispworks.com/documentation/lcl50/aug/aug-170.html](http://www.lispworks.com/documentation/lcl50/aug/aug-170.html)

如果你不这样做，你会降低相等测试的一些属性，因为 2^54+1 和 2^54-1 可能都等于相同的 float double(2^54)... 与不平等。您还会遇到字典（散列图）和数字集的各种麻烦。

# javascript - 创建像 getels(id) 这样的函数是错误的编码约定吗？

> ID：15858446
> 
> 赞同：0
> 
> 时间：2013-04-07T03:06:53.437
> 
> 标签：javascript

基本上，我真的很懒惰，而且我已经看到了太多由很长的函数名称中的拼写错误引起的错误，所以我在 javascript 中创建了一个函数

```
function getels(id){
    return document.getElementById(id);
} 
```

这是好的编码约定吗？它是否会显着减慢代码速度？
我是否使用它真的很重要，或者我不应该。这是一个相当普遍的问题，我在这里使用的示例是 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:53:40.790

你应该试试 jQuery。但是，这很好，因为你正在这样做。你也可以这样做：

```
var $ = function(id){
   return document.getElementById(id);
}; 
```

然后你可以打电话

`$("your_id")`获取元素。

它不会显着减慢您的脚本，[在这里](http://jsfiddle.net/5qM7m/1/)您可以看到虚拟函数方式慢了大约 2%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:42:15.767

这似乎是一种相当普遍的做法。专门针对`getElementById`. 我似乎记得一些谷歌图书馆`_gel`以这种方式使用。

我看没有问题。

一个相关的问题： [Make alias to document.getElementById in Javascript](https://stackoverflow.com/questions/954417/make-alias-to-document-getelementbyid-in-javascript)

# php - 检查数组中的数据是否有空值

> ID：15858452
> 
> 赞同：-1
> 
> 时间：2013-04-07T03:07:44.467
> 
> 标签：php, arrays

我想检查数组中的数据以查看是否有空值。如果有，我想显示一个警报。

*例子：*

```
$data = array(1 => 'AKB48', 2 => '', 3 => 'JKT48'); 
```

索引 1 的数组`($data[1])`为空，我希望它显示`"WARNING, data in array is null"`

如果数组中的数据没有空/空值，则不显示警报：

```
$data = array(1 => 'AKB48', 2 => 'HKT48', 3 => 'JKT48'); 
```

*（上面的数组不会触发警报）*

我怎样才能实现这个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:34:15.130

像这样的东西？

```
$data = array(1 => 'AKB48', 2 => '', 3 => 'JKT48');

foreach($data as $val) {
    if($val == '') {
        echo "alert, array consist of empty value";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:19:37.330

```
$data = array(1 => 'AKB48', 2 => '', 3 => 'JKT48');

foreach($data as $v)
{
  if(empty($v))
  {
    echo "Array contains null value";
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T03:38:02.030

像这样的东西？

`isDefined`将检查该值是否为有效的非空字符串。

```
function isDefined($var) {
  return isset($var) && !is_null($var) && !empty($var);
}

$data = array(
  array('AKB48', 'HKT48', NULL),
  array('AKB49', '',      'JKT49'),
  array('AKB50', 'HKT50', 'JKT50')
);

for ($i = 0; $i < count($data); $i++) {
  foreach ($data[$i] as $col) {
    if (!isDefined($col)) {
      echo "<<<Attention: Array #$i contains an empty value!>>> ";
    }
  }
} 
```

[运行上面的代码示例。](http://sandbox.onlinephpfunctions.com/code/49ecab28627a2365b9aa57d16fae048d6d6430a6)

# javascript - 谁能解释这个循环是如何达到如此高的基准的？

> ID：15858456
> 
> 赞同：8
> 
> 时间：2013-04-07T03:08:07.613
> 
> 标签：javascript, performance

[http://jsperf.com/loops/67](http://jsperf.com/loops/67)

如果你看，下面的循环管理一些疯狂的基准：

```
var i=0;
var v;
for (i, v; v = arr[i++];) {
   v;
} 
```

它在 FF 中的得分约为 7 亿次/秒，在 Chrome 中约为 2000 万次，在 IE10 中约为 5000 万次。下一个最快的循环在 FF 中管理约 100k，在 IE10 中管理约 6k，在 Chrome 中仅管理约 2k。

为什么这么快？我可以看到其他循环之间的明显差异以及一个比另一个更快的差异，但我无法想出任何可以解释这个循环绝对令人兴奋的性能差异的东西，7 亿到 100k 是一个疯狂的差距。

* * *

**回答后编辑：**

根据@Michael Gary 的回答，我回过头来编辑设置以包含一个实际的真实数组，结果又回到了现实：http: [//jsperf.com/loops/70](http://jsperf.com/loops/70)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T03:24:52.917

原因很简单。`arr`使用以下代码创建数组：

```
var arr = new Array(10000); 
```

所以它的长度为 10000，但所有元素都是`undefined`. 此循环不适用于数组长度，但会在遇到“虚假”值时终止 - 假设由于尝试读取数组末尾而`v`接收到值时循环将停止。`undefined`

但是在这个特定的数组中，所有一万个元素都有值`undefined`。因此，循环在测试数组的第一个元素时停止。换句话说，它根本不循环！难怪它很快。

但是更真实的案例呢？这种循环如何处理冗长的 JSON 对象数组：

```
[
    { "id": 507674, "name": "Kolink" },
    { "id": 997356, "name": "DarkLord7854" },
    { "id": 1202830, "name": "Michael Geary" },
    /* and thousands more */
] 
```

在这里，您不会遇到循环立即终止的问题，因为数组元素都是“真实的”。

使用现代 JavaScript 引擎，这被证明是编写循环的一种相当糟糕的方式，因为我最近发现让我非常尴尬。

我是[jQuery Cookbook](http://shop.oreilly.com/product/9780596159788.do)的作者之一：我编写了第 5 章“更快、更简单、更有趣”的大部分内容。好吧，“更快”的部分并没有那么好。我推荐了一个非常像您的循环来迭代大量对象，例如上面的对象：

```
for( var item, i = -1;  item = array[++i]; ) {
    // do stuff with item
} 
```

事实证明，在现代浏览器中，这比像这样的传统循环要慢得多：

```
for( var i = 0, n = array.length;  i < n;  i++ ) {
    var item = array[i];
    // do stuff with item
} 
```

部分原因是因为试图读取数组末尾的内容会使一些 JavaScript 引擎重新回到未优化的数组表示方式中，正如 V8 作者之一在去年的 Google I/O 上向我解释的那样。部分原因可能是浏览器优化了更常见的循环类型，而不是优化了这种不太常见的方法。

无论哪种方式，更传统的循环在现代浏览器中变得更快：

[http://jsperf.com/mikes-loops/2](http://jsperf.com/mikes-loops/2)

但这与您的循环不同。在你的情况下，疯狂的性能提升直接是因为它根本不运行*循环*。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T03:24:31.017

`arr`被初始化为一个包含 10000 批臭虫的数组。`Array(10000)`准备数组的长度，但不以任何方式填充它。

因此，`arr[0]`will be`undefined`是假的，所以 for 循环立即终止。

本质上，代码归结为：

```
var i=0;
var v;
i,v; // doesn't do anything but access the variables
v = undefined;
i++; 
```

# forms - extjs 表单面板设置默认值文本字段

> ID：15858462
> 
> 赞同：0
> 
> 时间：2013-04-07T03:08:39.727
> 
> 标签：forms, sencha-touch, textfield, default-value

这似乎是一个微不足道的问题，但是......我在面板中有一个地址列表，我希望在表单面板中添加地理位置坐标（并在地图上显示它们），以便当我单击在面板中感兴趣的地址上，触发 onTap 以执行下面给出的 onSelectGeolocation 以打开 ViewPort 中呈现的表单面板并将任何现有记录添加到关联的表单元素：

```
onSelectGeolocation: function(view, index, target, record, event) {
    console.log('Selected a Geolocation from the list');
    var geolocationForm = Ext.Viewport.down('geolocationEdit');

    if(!geolocationForm){
        geolocationForm = Ext.widget('geolocationEdit');
    }     
    geolocationForm.setRecord(record);
    geolocationForm.showBy(target);
} 
```

但是，使用 setRecord 方法将存储中的任何现有记录写入表单元素的行会阻止下面的表单面板中的默认值写入所需的表单元素。当我对此发表评论时，一切都很好。问题是我需要获取商店中存在的那些记录，例如地址，以显示在我的表单中。如何执行此操作并将默认值写入表单中的文本字段元素？

通过 onTap 呈现为 ViewPort 的表单面板是：

```
Ext.define('EvaluateIt.view.GeolocationEdit', {
    extend: 'Ext.form.Panel',
    alias : 'widget.geolocationEdit',
    requires: [
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.field.Number',
        'Ext.field.DatePicker',
        'Ext.field.Select',
        'Ext.field.Hidden'

    ],
    config: {

    // We give it a left and top property to make it floating by default
    left: 0,
    top: 0,

    // Make it modal so you can click the mask to hide the overlay
    modal: true,
    hideOnMaskTap: true,

    // Set the width and height of the panel
    width: 400,
    height: 330,
    scrollable: true,
    layout: {
        type: 'vbox'
    },
    defaults: {
        margin: '0 0 5 0',
        labelWidth: '40%',
        labelWrap: true
    },
    items: [
        {
            xtype: 'datepickerfield',
            destroyPickerOnHide: true,
            name : 'datOfEvaluatione',
            label: 'Date of evaluation',
            value: new Date(),
            picker: {
                yearFrom: 1990
            }
        },
        {   
            xtype: 'textfield',
            name: 'address',
            label: 'Address',
            itemId: 'address' 
        },
        {   
            xtype: 'textfield',
            name: 'latitude',
            label: 'Latitude',
            itemId: 'latitude',
            value: sessionStorage.latitude,             
        },
    /*  {   
            xtype: 'textfield',
            name: 'longitude',
            label: 'Longitude',
            itemId: 'longitude',
            value: sessionStorage.longitude
        },
        {   
            xtype: 'textfield',
            name: 'accuracy',
            label: 'Accuracy',
            itemId: 'accuracy',
            value: sessionStorage.accuracy
        },*/
        {
            xtype: 'button',
            itemId: 'save',
            text: 'Save'
        }

    ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:00:34.633

行为符合预期。我将在每个项目的 id 上使用 Ext.getCmp。

# smtp - 有没有办法强制 GMail/Google Apps SMTP 服务器不存储发送的消息？

> ID：15858465
> 
> 赞同：1
> 
> 时间：2013-04-07T03:09:11.193
> 
> 标签：smtp, gmail, google-apps

也许是一个特殊的命令或消息头，以便能够告诉 Google 不要将使用其 SMTP 服务器发送的消息存储在相应用户的已发送邮箱中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:17:26.417

前段时间我也陷入了这种情况，对我来说，我找不到任何标准的 API 来解决这个问题。但作为一种解决方法，我创建了一个`rule`删除所有出现在`Sent Folder`. 但要注意 IMAP 协议，它允许用户将他们在那里发送的消息也存储在自定义文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:32:38.940

没有办法阻止消息被保存到已发送。但是，您可以在发送后通过 IMAP 连接并从“已发送”文件夹中删除邮件。假设您使用的是 OAuth 身份验证，您用于 SMTP 的相同范围允许您通过 IMAP 进行连接。

# sqlite - 限制多行插入

> ID：15858466
> 
> 赞同：13
> 
> 时间：2013-04-07T03:09:21.670
> 
> 标签：sqlite

从 3.7.11 版开始，SQLite 支持增强的 INSERT 语法，允许通过 VALUES 子句插入多行。

[http://www.sqlite.org/releaselog/3_7_11.html](http://www.sqlite.org/releaselog/3_7_11.html)

在单个语句中可以插入多少个值是否有任何限制？（例如 500）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T09:17:37.033

SQLite 像复合 SELECT 一样处理多行 INSERT。限制[确实是 500](http://www.sqlite.org/limits.html#max_compound_select)。

但是，从[3.8.8 版本](http://www.sqlite.org/releaselog/3_8_8.html)开始，

> VALUES 子句中的行数不再受 SQLITE_LIMIT_COMPOUND_SELECT 限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-21T12:59:40.850

根据官方文档，实际上有一些限制：

1.  [SQL 语句的最大长度](http://www.sqlite.org/limits.html#max_sql_length)

    SQL 语句文本中的最大字节数限制为 SQLITE_MAX_SQL_LENGTH，默认为**1000000 字节**。

2.  [单个 SQL 语句中的最大主机参数数](http://www.sqlite.org/limits.html#max_variable_number)

    主机参数（又名令牌）的数量 - 命名、未命名或编号 - 仅限于 SQLITE_MAX_VARIABLE_NUMBER，默认为**999 个项目**。

# java - 错误捕获帮助；消息不断重复

> ID：15858468
> 
> 赞同：0
> 
> 时间：2013-04-07T03:09:24.390
> 
> 标签：java

只是对这里发生的事情有点困惑。此错误陷阱的要点是，例如，用户输入 3 个数字/字母而不是 4 位数字。这个错误陷阱被设计成循环问题，直到用户正确为止。但是，它会循环错误消息。任何人都可以就发生的事情给出一些指示吗？

```
JFrame Error = new JFrame ();

String input = JOptionPane.showInputDialog(null,"Enter the 4 digit resistor values:");

while (true){
  try{

    int numInput = Integer.parseInt (input);

    if (numInput >= 1000) {
    break;
    }
    else {
      JOptionPane.showMessageDialog(Error,"Invalid Input.");
    }
  }
  catch (Exception e){
    JOptionPane.showMessageDialog(Error,"Invalid Input.");

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:19:08.933

您需要移动代码以询问循环的输入。

```
JFrame Error = new JFrame ();

String input = null;

while (true){
  try{

    input = JOptionPane.showInputDialog(null,"Enter the 4 digit resistor values:");
    int numInput = Integer.parseInt (input);

    if (numInput >= 1000) {
    break;
    }
    else {
      JOptionPane.showMessageDialog(Error,"Invalid Input.");
    }
  }
  catch (Exception e){
    JOptionPane.showMessageDialog(Error,"Invalid Input.");

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:20:38.050

正如 JacobM 提到的，您需要在 while 循环中请求输入。当 catch 子句终止时，您的代码所做的下一件事将是 while 循环中的第一件事。

```
JFrame Error = new JFrame ();

while (true){
  String input = JOptionPane.showInputDialog(null,"Enter the 4 digit resistor values:");
  try{

    int numInput = Integer.parseInt (input);

    if (numInput >= 1000) {
    break;
    }
    else {
      JOptionPane.showMessageDialog(Error,"Invalid Input.");
    }
  }
  catch (Exception e){
    JOptionPane.showMessageDialog(Error,"Invalid Input.");

  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T03:12:41.853

您需要在循环*内*请求一个新值。将其更改为：

```
String input;

try {
    while (true){
        input = JOptionPane.showInputDialog(null,"Enter the 4 digit resistor values:");

        int numInput = Integer.parseInt (input);

        if (numInput >= 1000) {
            break;
        }
        else {
            JOptionPane.showMessageDialog(Error,"Invalid Input.");
        }
    }
} catch (Exception e) {
    JOptionPane.showMessageDialog(Error,"Invalid Input.");
} 
```

# html - html5中消失的提交按钮

> ID：15858472
> 
> 赞同：0
> 
> 时间：2013-04-07T03:10:03.887
> 
> 标签：html, submit

在以下代码中，当存在输出元素时，如果浏览器窗口很大，则不会显示提交按钮，但在压缩窗口时会显示：

```
<!doctype html>
<html>
<body>

<form action="/submit" method="post">
<label for="session_range"> Session Size: </label>
<input id="session_range" type="range" min="1" max="10" 
       value="5" onchange="session_rangevalue.value=value"> 
<output id="session_rangevalue"> 5 </output>
<input type="submit" value="Submit">
</form>

</body> 
```

这是错误的行为还是代码有问题 - 我正在 Chrome 24 上进行测试。

# macos - 无法在 MacOSX 中设置环境变量

> ID：15858473
> 
> 赞同：1
> 
> 时间：2013-04-07T03:10:08.640
> 
> 标签：macos, bash, command-line

我正在尝试将 Racket 添加`bin`到我的环境/路径变量列表中。

这是 Racket 的 bin 文件夹的位置：

```
/Applications/Racket/bin 
```

这是我添加到`.bash_profile`文件中的内容：

```
export PATH=$PATH:/Applications/Racket/bin 
```

这是集合的路径输出：

```
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Applications/Racket/bin 
```

但是，当我运行时`./racket`，我仍然得到：

```
-bash: ./racket: No such file or directory 
```

我能够`./racket`从 Racket 的`bin`目录运行（这意味着它可能不是 32 - *v* 64 位问题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:12:18.010

> 但是，当我运行 ./racket 时，我仍然得到一个“-bash: ./racket: No such file or directory”

像这样运行它：

```
racket 
```

当你运行它意味着从你的**当前目录**`./racket`运行一个可执行的球拍。

# f# - 如何在不破坏对其他类型的支持的情况下正确重载全局 (+) 和 (*)

> ID：15858474
> 
> 赞同：3
> 
> 时间：2013-04-07T03:10:30.877
> 
> 标签：f#, operator-overloading

我已经导入了一个向量数学库，并且想添加我自己的 (*) 和 (+) 运算符，同时保留基本 int 和 float 的现有运算符。

我尝试了以下方法：

```
let inline (*) (x : float) (y : Vector) = y.Multiply(x)
let inline (*) (x : Vector) (y : float) = x.Multiply(y)
let inline (+) (x : Vector) (y : Vector) = x.Add(y) 
```

这有两个问题：

1.  它似乎删除了`int + int`and `int * int`, and
2.  第二行（旨在完成交换性）无法编译，因为它是“重复定义”。

如何在导入的 Vector 类型上定义一些交换运算符，同时又不会丢失对 int 和 float 的这些操作？

（我希望能够使用 * 和 + 在其他地方编写通用代码，而不必指定 float/Vector/int 类型约束）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T07:33:45.980

如果您能够修改库的源代码，则通过类型扩展添加一些重载会更简单：

```
type Vector with
    static member (*) (x : Vector) (y : float) = x.Multiply(y)
    static member (+) (x : Vector) (y : Vector) = x.Add(y) 
```

但是，如果第一个操作数具有原始类型（例如您的第一个示例），则重载解析不再起作用。

无论如何，您可以利用成员重载并将约束传播到内联函数：

```
type VectorOverloadsMult =
    | VectorOverloadsMult
    static member (?<-) (VectorOverloadsMult, x: float, y: Vector) = y.Multiply(x)
    static member (?<-) (VectorOverloadsMult, x: Vector, y: float) = x.Multiply(y)     
    static member inline (?<-) (VectorOverloadsMult, x, y) = x * y

let inline (*) x y = (?<-) VectorOverloadsMult x y 
```

这适用于现有类型，`(*)`因为我们将它们保存在最后一个静态成员中。您可以对操作员执行相同的`(+)`操作。

```
let v: Vector = ... // Declare a Vector value
let a = 2.0 * v
let b = v * 2.0
let c = 2 * 3
let d = 2.0 * 3.0 
```

即使您无法修改`Vector`类型，此技术也有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T06:37:25.800

您需要在类型中定义运算符 - 即

```
type Vector = 
    ....
    static member (+) (x : Vector) (y : Vector) = x.Add(y) 
```

等等

然后一切都会如你所愿

# nsdictionary - 带有块的目标 c 字典枚举不适用于带有 gnustep 的 gcc

> ID：15858475
> 
> 赞同：0
> 
> 时间：2013-04-07T03:10:48.337
> 
> 标签：nsdictionary, objective-c-blocks, gnustep

我只是在学习 obj c。我正在使用从 gnustep.org/experience/Windows.html 下载的 GNUStep（有 3 个安装程序 - msys 系统、核心、开发）。

运行以下代码：

```
#import <Foundation/Foundation.h>

int main (int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    NSDictionary *m_Dict =
    [NSDictionary dictionaryWithObjectsAndKeys:
      @"ABC", @"One",
      @"DEF", @"Two",
      @"GHI", @"Three",
      nil ];

    // Print all key-value pairs from the dictionary

    [m_Dict enumerateKeysAndObjectsUsingBlock: ^(id key, id obj, BOOL *stop) {
        NSLog(@"%@ => %@", key, obj);
        }];

    [pool drain];
    return 0;
} 
```

显示错误：

```
$ gcc -o c c.m -I /GNUstep/System/Library/Headers -L /GNUstep/System/Library/Li
``braries -lobjc -lgnustep-base -fconstant-string-class=NSConstantString
c.m: In function 'main':
c.m:16:44: error: expected expression before '^' token
c.m:18:1: warning: 'NSDictionary' may not respond to '-enumerateKeysAndObjectsUs
ingBlock:' [enabled by default]
c.m:18:1: warning: (Messages without a matching method signature [enabled by def
ault]
c.m:18:1: warning: will be assumed to return 'id' and accept [enabled by default
]
c.m:18:1: warning: '...' as arguments.) [enabled by default]c 
```

请提出我做错了什么。在 Stackoverflow 上也搜索过，但找不到太多帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:38:47.170

您的编译器不支持块。您需要使用现代的`clang`.

确实，如果您学习 Objective-C 的目的是为 Mac 或 iPhone/iPad 编写代码，那么第一步需要购买 Mac 并安装 Xcode。如果您学习使用较旧的编译器，您将错过语言功能，并且您需要重新学习以后使用的模式。

在购买 Mac 之前查看 Mountain Lion 的要求。从技术上讲，您可以在 Lion 上运行最新的 Xcode，但我认为 Apple 不会长期保持兼容。

或者，如果您只是想学习 Objective-C，则需要弄清楚您可以使用该语言的哪个子集。不过，我建议这在 iOS/Mac 开发之外并不是非常有用。

# c# - 如何设置 .NET 结构的非自然对齐方式？

> ID：15858478
> 
> 赞同：1
> 
> 时间：2013-04-07T03:11:25.833
> 
> 标签：c#, .net, struct, alignment, pinvoke

我正在与一些本机库进行互操作，该库具有一些非自然对齐功能，我想在 .NET 结构中模拟布局。检查这两个结构：

```
public struct Int3
{
    public int X;
    public int Y;
    public int Z;
}

public struct MyStruct
{
    public short A;
    public Int3 Xyz;
    public short B;
} 
```

因此，在 .NET 中，它使用自己的布局规则来创建布局，即对齐方式为 min(sizeof(primitiveSize), StructLayout.Pack)。所以 MyStruct 的布局将是：

```
[oo--] MyStruct.A (2 bytes data and 2 bytes padding)
[oooo oooo oooo] MyStruct.Xyz (3 int, no padding)
[oo--] MyStruct.B (2 bytes data and 2 bytes padding) 
```

我想做的是，我想将 Int3 的对齐方式更改为 8 个字节，例如：

```
[StructLayout(Alignment = 8)]
public struct Int3 { .... } 
```

然后 MyStruct 的布局将变为：

```
[oo-- ----] MyStruct.A (2 bytes for data, and 6 bytes padding, to align next Xyz to 8
[oooo oooo oooo ----] MyStruct.Xyz (4 bytes padding for alignment of 8)
[oo-- ----] (6 bytes padding, because the largest alignment in this struct is 8) 
```

所以，我的问题是：

1）.NET中是否有这样的属性来控制这样的非自然对齐？

2）如果没有这样的内置属性，我知道还有其他属性如StructLayout.Explict、OffsetAttribute、StructLayout.Size、StructLayout.Pack。有了这些属性，我可以手动模拟这个布局，但是不好用。所以我的第二个问题是，有没有办法挂钩 .NET 结构布局创建，我可以干扰结构布局？我的意思是，我可以创建一个自定义属性来指定对齐方式，然后我计算布局，但我不知道如何干扰.NET 使用该布局。

问候，翔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:41:16.740

除了 StructLayout.Explicit （这就是这样一种机制）之外，没有其他方法可以像您想要的那样“连接到 .NET”。互操作是一种非常特殊的需求，除了标准的 WinAPI 案例之外，您不应该期望它很容易。在您的情况下，除非您正在处理具有这种不寻常对齐方式的真正大量不同的结构，否则最好使用 MyStruct 上的 StructLayout.Explicit 将其拼写出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:05:09.847

几乎任何结构都将存储为堆对象的一部分（作为类字段，或作为存储为类字段的结构的字段等）。.net 32​​ 平台将大对象堆上的对象对齐到16 字节边界，但其他对象以 4 字节边界。除非一个对象是在 LOH 上手动分配的，或者是一个超过 999 个双精度数的数组[由于真正残酷的 hack，恕我直言]，否则没有任何有意义的方法可以确保比 4 字节对齐更具体的内容。即使在某个时刻，未固定的结构是 16 字节对齐的，任何任意 GC 周期都可能重新定位它并更改该对齐方式。

# design-patterns - 视频游戏动画格式

> ID：15858479
> 
> 赞同：1
> 
> 时间：2013-04-07T03:11:33.020
> 
> 标签：design-patterns, animation, encoding, hex, bytecode

我想阅读一些视频游戏动画（该游戏是 Rockstar 的 Bully，类似于 GTA 系列。它使用 Gamebryo 游戏引擎。并于 2006/2008 年发布）。动画以文件扩展名保存`.cat`。

由于数字的模式和增量，我相信动画是用字节码编写的。此外，许多动画都包含在一个 .cat 文件中。

这是一个示例 .cat 文件的完整十六进制内容，我相信它包含四个单独的动画：

`56 01 00 00 82 00 00 00 1B 01 00 00 82 00 00 00 00 00 00 00 02 00 00 00 00 00 00 00 02 00 00 00 04 00 00 00 00 00 00 00 01 00 1C 00 00 00 16 00 00 00 01 00 3F 00 00 00 1E 00 00 00 01 00 45 00 00 00 2F 00 00 00 01 00 08 00 00 00 00 00 00 00 62 84 76 83 81 01 0C 00 00 00 02 00 6C 18 08 D4 AD 01 00 00 00 00 02 4C 00 00 00 18 00 00 00 00 00 6C F7 4F 0B AF 00 02 4C 00 00 00 20 00 00 00 00 00 99 C3 44 56 00 00 00 00 00 00 00 00 80 BB 2D 74 00 00 00 00 18 00 00 00 08 00 44 01 00 00 00 00 00 00 05 00 F7 4F 0B 2F 65 00 00 00 00 00 C1 00 00 E5 00 00 00 00 00 01 01 00 09 01 00 25 01 00 00 00 00 45 01 00 00 00 00 60 01 00 00 00 05 00 6C 5B 6C 6C 41 00 01 65 00 00 00 00 00 85 00 00 00 80 BF C5 00 16 DD 32 17 05 01 00 00 00 00 25 01 00 00 00 00 45 01 00 00 00 00 65 01 00 00 80 BF 85 01 00 00 80 3F A5 01 00 00 80 BF C5 01 00 00 80 BF E1 01 01 E8 01 00 46 5F 43 6F 6E 73 74 61 6E 74 69 6E 65 47 72 65 65 74 69 6E 67 00 6D 69 73 73 69 6F 6E 00 46 5F 45 75 6E 69 63 65 57 61 6E 74 47 69 66 74 00 47 4E 5F 47 52 45 45 4B 42 4F 59 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00`

将其转换为字符串：

> / *000:* / "V\x01\x00\x00\x82\x00\x00\x00\x1B\x01\x00\x00\x82\x00\x00\x00"

```
 /*010:*/ "\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00"
    /*020:*/ "\x04\x00\x00\x00\x00\x00\x00\x00\x01\x00\x1C\x00\x00\x00\x16\x00"
    /*030:*/ "\x00\x00\x01\x00\?\x00\x00\x00\x1E\x00\x00\x00\x01\x00" "E\x00"
    /*040:*/ "\x00\x00/\x00\x00\x00\x01\x00\b\x00\x00\x00\x00\x00\x00\x00"
    /*050:*/ "b\x84v\x83\x81\x01\f\x00\x00\x00\x02\x00l\x18\b\xD4"
    /*060:*/ "\xAD\x01\x00\x00\x00\x00\x02L\x00\x00\x00\x18\x00\x00\x00\x00"
    /*070:*/ "\x00l\xF7O\v\xAF\x00\x02L\x00\x00\x00 \x00\x00\x00"
    /*080:*/ "\x00\x00\x99\xC3" "DV\x00\x00\x00\x00\x00\x00\x00\x00\x80\xBB"
    /*090:*/ "-t\x00\x00\x00\x00\x18\x00\x00\x00\b\x00" "D\x01\x00\x00"
    /*0A0:*/ "\x00\x00\x00\x00\x05\x00\xF7O\v/e\x00\x00\x00\x00\x00"
    /*0B0:*/ "\xC1\x00\x00\xE5\x00\x00\x00\x00\x00\x01\x01\x00\t\x01\x00%"
    /*0C0:*/ "\x01\x00\x00\x00\x00" "E\x01\x00\x00\x00\x00``\x01\x00\x00\x00"
    /*0D0:*/ "\x05\x00l[llA\x00\x01" "e\x00\x00\x00\x00\x00\x85"
    /*0E0:*/ "\x00\x00\x00\x80\xBF\xC5\x00\x16\xDD" "2\x17\x05\x01\x00\x00\x00"
    /*0F0:*/ "\x00%\x01\x00\x00\x00\x00" "E\x01\x00\x00\x00\x00" "e\x01\x00"
    /*100:*/ "\x00\x80\xBF\x85\x01\x00\x00\x80\?\xA5\x01\x00\x00\x80\xBF\xC5"
    /*110:*/ "\x01\x00\x00\x80\xBF\xE1\x01\x01\xE8\x01\x00" "F_Con"
    /*120:*/ "stantineGreeting"
    /*130:*/ "\x00mission\x00" "F_Eunic"
    /*140:*/ "eWantGift\x00GN_GRE"
    /*150:*/ "EKBOY\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*160:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*170:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*180:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*190:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*1F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*200:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*210:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*220:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*230:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*240:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*250:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*260:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*270:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*280:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*290:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*2F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*300:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*310:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*320:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*330:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*340:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*350:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*360:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*370:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*380:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*390:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*3F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*400:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*410:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*420:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*430:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*440:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*450:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*460:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*470:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*480:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*490:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*4F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*500:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*510:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*520:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*530:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*540:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*550:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*560:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*570:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*580:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*590:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*5F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*600:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*610:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*620:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*630:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*640:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*650:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*660:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*670:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*680:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*690:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*6F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*700:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*710:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*720:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*730:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*740:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*750:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*760:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*770:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*780:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*790:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7A0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7B0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7C0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7D0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7E0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
    /*7F0:*/ "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"` 
```

也翻译成无符号字为：

> ```
>  /*000:*/   342,     0,   130,     0,   283,     0,   130,     0, 
>     /*010:*/     0,     0,     2,     0,     0,     0,     2,     0, 
>     /*020:*/     4,     0,     0,     0,     1,    28,     0,    22, 
>     /*030:*/     0,     1,    63,     0,    30,     0,     1,    69, 
> ```

```
 /*040:*/     0,    47,     0,     1,     8,     0,     0,     0, 
    /*050:*/ 33890, 33654,   385,    12,     0,     2,  6252, 54280, 
    /*060:*/   429,     0,     0, 19458,     0,  6144,     0,     0, 
    /*070:*/ 27648, 20471, 44811,   512,    76,     0,    32,     0, 
    /*080:*/     0, 50073, 22084,     0,     0,     0,     0, 48000, 
    /*090:*/ 29741,     0,     0,    24,     0,     8,   324,     0, 
    /*0A0:*/     0,     0,     5, 20471, 12043,   101,     0,     0, 
    /*0B0:*/   193, 58624,     0,     0,   256,     1,   265,  9472, 
    /*0C0:*/     1,     0, 17664,     1,     0, 24576,     1,     0, 
    /*0D0:*/     5, 23404, 27756,    65, 25857,     0,     0, 34048, 
    /*0E0:*/     0, 32768, 50623,  5632, 13021,  1303,     1,     0, 
    /*0F0:*/  9472,     1,     0, 17664,     1,     0, 25856,     1, 
    /*100:*/ 32768, 34239,     1, 32768, 42303,     1, 32768, 50623, 
    /*110:*/     1, 32768, 57791,   257,   488, 17920, 17247, 28271, 
    /*120:*/ 29811, 28257, 26996, 25966, 29255, 25957, 26996, 26478, 
    /*130:*/ 27904, 29545, 26995, 28271, 17920, 17759, 28277, 25449, 
    /*140:*/ 22373, 28257, 18292, 26217,   116, 20039, 18271, 17746, 
    /*150:*/ 19269, 20290,    89,     0,     0,     0,     0,     0, 
    /*160:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*170:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*180:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*190:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*1F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*200:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*210:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*220:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*230:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*240:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*250:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*260:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*270:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*280:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*290:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*2F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*300:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*310:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*320:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*330:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*340:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*350:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*360:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*370:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*380:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*390:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*3F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*400:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*410:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*420:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*430:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*440:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*450:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*460:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*470:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*480:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*490:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*4F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*500:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*510:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*520:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*530:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*540:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*550:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*560:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*570:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*580:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*590:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*5F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*600:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*610:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*620:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*630:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*640:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*650:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*660:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*670:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*680:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*690:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*6F0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*700:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*710:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*720:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*730:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*740:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*750:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*760:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*770:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*780:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*790:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7A0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7B0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7C0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7D0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7E0:*/     0,     0,     0,     0,     0,     0,     0,     0, 
    /*7F0:*/     0,     0,     0,     0,     0,     0,     0,     0, ` 
```

从第 110 行的值 6 开始，直到第 150 行是有效的 ASCII

1.  视频游戏动画通常以什么方式保存？（例如，对象点标识符/xyz 坐标/时间范围）
2.  有什么特殊的编码吗？
3.  您是否熟悉此代码的格式或其中的任何特征？
4.  为这些问题提供一个更好的地方的链接

# java - 单链表 - 无法对非静态类型进行静态引用

> ID：15858481
> 
> 赞同：-1
> 
> 时间：2013-04-07T03:11:49.267
> 
> 标签：java, linked-list, generic-list, type-erasure

我正在使用单链表来学习 Java。

我有一个工作链表，但它绑定到整数类型，现在我试图通过将所有整数声明更改为泛型 E 来实现一个泛型类型链表。

编译器一直抱怨它“无法对非静态类型 E 进行静态引用”。代码仍然运行。有谁知道如何解决这个错误“？

我认为这与泛型类型 E 是像整数或双精度一样是静态的，还是像 String 或其他类这样的引用类型有关。

```
public class TestingLinkedList<E> {

private E value;
private TestingLinkedList<E> next;

/*
 * Default Constructor
 * 
 * @param value an absolute E value for the current Node
 * 
 * @param next an absolute RecursiveLinkedList value for the current Node
 */
public TestingLinkedList(E value, TestingLinkedList next) {
    this.value = value;
    this.next = next;
}

/*
 * Constructor Empty, when user supplies an empty for the constructor uses
 * value = - 1 and next = null as input parameters
 * 
 * @param value an absolute int value for the current Node
 * @param next an absolute RecursiveLinkedList value for the current Node
 */
public static final TestingLinkedList EMPTY = new TestingLinkedList(null,null) 
{
    public TestingLinkedList remove(E n) {
        return this;
    };

    public String toString() {
        return "";
    };
};

/*
 * if the current node is null return false
 * else if current value is the chosen value
 * then return true. Otherwise call the contains
 * method of the next item in queue
 * 
 * @param value an absolute int value for the current Node
 * @param RecursiveLinkedList object of the remove item
 * */
public TestingLinkedList remove(E n) {
    if (value == n) {
        return next;
    }
    // Call the remove method of the next Node if the selected Node is not
    // the current node then construct and return the next method
    return new TestingLinkedList(value, next.remove(n));
}

/*
 * if the current node is null return false
 * else if current value is the chosen value
 * then return true. Otherwise call the contains
 * method of the next item in queue
 * 
 * @param value an absolute int value for the current Node
 * @param boolean
 * */
public boolean contains(E n) {
    if (next == null) {
        return false;
    }else if (value == n) {
        return true;
    } else {
        return next.contains(n);
    }
}

public String toString() {
    return value + "," + next.toString();
}

/*
 * 
 * Testing Methods for RecursiveLinkedList
 * 
 * */
public static void main(String[] args) {
    TestingLinkedList l = new TestingLinkedList(1,
            new TestingLinkedList(2, new TestingLinkedList(2,
                    new TestingLinkedList(3, new TestingLinkedList(4,
                            EMPTY)))));
    System.out.println(" Test to String Method : " + l.toString());
    System.out.println(" Test remove method " + l.remove(1).toString());
    System.out.println(" Test contains method "
            + String.valueOf(l.contains(4)));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:17:13.013

```
public static final TestingLinkedList EMPTY = new TestingLinkedList(null,null) 
```

应该：

```
public static final TestingLinkedList<Integer> EMPTY
                                      = new TestingLinkedList<Integer>(null,null) 
```

这违反了泛型，因为占位符`E`是在构造时确定的，而且这是静态的，它不能使用该`E`值。而是使用*通用方法*：

```
public static <T> TestingLinkedList<T> empty() {
    return new TestingLinkedList<T>(null, null) {

        public TestingLinkedList remove(T n) {
            return this;
        }

        public String toString() {
            return "";
        }
    }
} 
```

# android - Titanium一次将多个视图添加到滚动视图？

> ID：15858483
> 
> 赞同：1
> 
> 时间：2013-04-07T03:12:06.100
> 
> 标签：android, titanium, scrollview

是否可以`ScrollView`在钛合金中添加多个视图？所以可以说我有以下内容：

```
var scrollView = Titanium.UI.createScrollView();
var views = [];

var view1 = Titanium.UI.createView();
views.push(view1);

var view2 = Titanium.UI.createView();
views.push(view2);

scrollView.add(views);

window.add(scrollView); 
```

上面的方法有用吗？如果不是，需要做什么才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:31:36.160

根据他们的[文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.ScrollView-method-add)，这应该行不通。（以前从未尝试过。）但你可以这样做：

```
views.forEach(function(view) {
  scrollView.add(view);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T01:46:36.320

我知道这有点晚了，但它是我用来解决这个问题的解决方案，希望它仍然有用。基本上，它涉及将滚动视图的不透明度设置为 0，直到您完成加载。这意味着，它们不是一次出现 1 行，而是同时出现，并且可以在您的程序/用户执行其他操作时在后台运行。请注意，它仅在 scrollView 为空时才有效 - 对于向其中已有内容的 scrollView 添加行不是一个好的解决方案：

```
var sView = Titanium.UI.createScrollView({
    //Whatever properties you need for your scrollView
    opacity: 0,
});

//childViews is an array of all the stuff you'd like to add to sView
childCount = childViews.length

//Add a postlayout event to the last childView - this will automatically set the opacity to 1 when the last child is loaded
childViews[childCount - 1].addEventListener('postlayout', function showScrollView(e){
    this.parent.setOpacity(1);
    this.removeEventListener(showScrollView);
});

//Iteratively add each view in the array to the sView
for (var x = 0; x < childCount; x++) {
   sView.add(childViews[x]);
}
window.add(sView); 
```

# javascript - 在javascript中将字符串转换为浮点数/数字以进行数值运算

> ID：15858488
> 
> 赞同：1
> 
> 时间：2013-04-07T03:12:44.027
> 
> 标签：javascript, knockout.js

我在将字符串转换为数字以在 javascript/knockout 中进行数值计算时遇到一些问题

我有以下内容来计算淘汰表中订单的总成本

```
self.totalCost = ko.computed(function() {
   var total = 0;
   for (var i = 0; i < self.itemNumbers().length; i++)
       //somehow convert the price to a number here so then I can add it 
       total += self.itemNumbers()[i].item.price;
   return total;
}); 
```

但是，当我将“return total”更改为“return i”时，显示什么都不显示，然后显示总数。我假设意味着价格是字符串，无法添加。当我在表格中输出价格时，它们显示为小数（例如 19.99），但我不确定它们实际上是数字还是字符串。

**在下面编辑**

我使用 parseFloat 来转换值。现在，在输出结果的表中，我使用了 typeof() 并显示了数字。结果仍然没有正确求和。

我还能做些什么来检查它们为什么不求和的值？我可以检查添加的每个单独的值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T03:15:00.103

也许.. 总计 += Number(self.itemNumbers()[i].item.price);

# ruby-on-rails - Rails ActiveRecord 查询“”、“_”和“-”是可互换的

> ID：15858490
> 
> 赞同：1
> 
> 时间：2013-04-07T03:12:48.980
> 
> 标签：ruby-on-rails, ruby, postgresql

我的目标是编写一个 Model.find_by_name("foo-bar")，将返回数据库中名为“foo bar”的记录）。我正在努力寻找有关如何完成此操作的任何信息。我正在使用postgresql。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:48:42.107

您可以尝试使用[正则表达式](http://www.postgresql.org/docs/9.2/static/functions-matching.html)来执行此操作：

```
to_match = "foo_bar".sub(/[ \-\_]/, '[ \-\_]')

Model.where("'name' ~ ?", to_match) 
```

至少这是一般的想法。这些类型的搜索在大表上会慢很多。

# emacs - emacs command-t 行为

> ID：15858497
> 
> 赞同：1
> 
> 时间：2013-04-07T03:14:26.430
> 
> 标签：emacs, clojure

我是一个完全的emacs新手。我观看了一个视频，它显示 emacs 中的 ido 与 textmate 中的 command-t 类似：

![在此处输入图像描述](https://i.stack.imgur.com/jJnyJ.png)

（视频为：http: [//vimeo.com/1013263](http://vimeo.com/1013263)）

问题是当我在带有 ido 模式的 emacs 中时我没有得到这种行为。这是我的`init.el`：

```
(require 'ido)

(ido-mode t)
(setq ido-enable-flex-matching t) 
```

我不知道是什么`t`意思，这只是我在网上找到的。

当我搜索文件 (Cx Cf) 时，它在子目录中找不到文件。因此，如果我有一个文件`test/core.clj`并且我搜索`tc`（测试核心）它不匹配。

我注意到他在屏幕截图中有“项目文件：”，我得到“查找文件：”。我安装了“在项目中查找文件”以查看这是否是缺少的行为，但它也不起作用。它只匹配文件名，而不是包含文件的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:23:51.357

ido“了解”您访问过的文件并维护历史缓存。我相信这就是您在上面的屏幕截图中看到的内容。（有时您需要使用 清除缓存`ido-wash-history`）。

通常，一旦你在一个项目中工作了一段时间，它就会以你期望的方式工作。

如果您是 emacs 新手，自定义是试验各种功能的最佳方式。例如，您可以`M-x customize-group <RET> ido <RET>`查看 ido 的所有选项

还有其他选项，例如`find-file-in-project`，你确定你真的在调用它吗？仅仅安装它是不够的，它不会`C-x C-f`为你重新绑定。

试着`M-x find-file-in-project`看看这是否是你想要的行为。

`find-file-in-repository`如果您总是在源代码控制目录中工作，还有。

（'t' 意味着真正的 btw）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:04:56.707

我会看看`find-file-in-project.el`。

[http://www.emacswiki.org/cgi-bin/wiki/FindFileInProject](http://www.emacswiki.org/cgi-bin/wiki/FindFileInProject)

它将搜索`.git`树中的所有文件。我已将此映射到`C-c f`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:17:14.217

“t”仅表示非零或真。您可以使用“a”、“w”或“t”，它们的含义相同。人们只是按照惯例使用 t 。

## 启用

如果您想启用 .emacs 中的功能`(ido-mode t)`

## 禁用

如果您想禁用 .emacs 中的某些内容`(ido-mode nil)`

# c - 打破openmp中的结构化块

> ID：15858499
> 
> 赞同：0
> 
> 时间：2013-04-07T03:14:31.753
> 
> 标签：c, multithreading, openmp

我正在尝试使用 openmp 编写一个程序，其中结构块是一个 while 循环。

```
#pragma omp parallel num_threads(x)
while(condition){

} 
```

我必须决定编写任何线程停止条件的方式。我需要知道在 while 循环中使用 break 语句是否合适。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-03-22T15:03:07.713

我认为最好使用 omp 取消。

该代码看起来与此类似。

```
#pragma omp parallel
{       
    while(true) {
        #pragma omp cancellation point parallel

        // Do the heavy work

        if(condition==false) {
            #pragma omp cancel parallel
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:05:23.947

你的问题有点不完整。你说“**任何线程都会停止**的条件”，但是数学之后呢：

1.  其余的线程也应该退出。
2.  其余的线程应该继续，直到它们符合条件。

情况1：

```
bool abort = 0;
#pragma omp parallel num_threads(x) private(abort)
{
   while(!abort)
   {
      // The work you need to do.
      #pragma omp critical
      {
          if(condition==false)
          {
             abort = 1; 
          }
      }
   }
} 
```

案例二：

```
#pragma omp parallel num_threads(x)
{
    while(condition)
   {
        // The work you need to do.
   }
} 
```

# javascript - Javascript 绑定问题

> ID：15858507
> 
> 赞同：1
> 
> 时间：2013-04-07T03:16:12.733
> 
> 标签：javascript

这是让我感到困惑的代码片段：

```
var timer = 
{
    start: function()
    {
        var self = this;

        /*Why the code below doesn't write to this:
            window.setInterval(self.tick, 1000).*/

        //Instead, it embedded into a function like this:
        window.setInterval(function(){self.tick();}, 1000)
    },
    tick: function()
    {
        console.log("tick!");
    }       
}

timer.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:20:28.567

原因是 JavaScript`this`是动态的。当您调用如下函数时：

```
object.func(); 
```

`this`将设置为`object`。但是，当您简单地调用函数时：

```
func(); 
```

或者将它传递给一些其他函数（`setInterval`包括）， `this`将被设置为全局对象（`window`通常）。

因此，当您只传递`self.tick`到时`setInterval`，`this`内部`tick`将是全局对象，而不是`timer`. 当你通过`function() { self.tick(); }`时，它是`self`（`timer`）。

在这里，它没有区别，因为`tick`不访问`this`，但如果`tick`访问`this`，您可能想要使用`function() { self.tick(); }`，因为否则，您将修改全局对象的属性，而不是`timer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:18:33.370

`function(){self.tick();}`比 更容易扩展`self.tick`。`if`这有点像在只包含一个语句的块周围使用（或不使用）大括号之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:02:40.330

我们使用的另一个原因：`window.setInterval(function(){self.tick();}, 1000)`是为了符合“单一职责”的设计原则。tick() 应该只做一项工作：tick. 如果您需要在计时器触发时执行更多工作，您应该编写另一个函数并在事件处理程序中调用它，而不是修改 tick()。例如：

```
window.setInterval(function(){
    self.tick();
    self.notify();
    .....
    }, 1000) 
```

# java - 将字符串转换为字符串数组

> ID：15858508
> 
> 赞同：2
> 
> 时间：2013-04-07T03:16:19.667
> 
> 标签：java

我有来自 JSON 值的这个字符串：

```
["1","5","10","15","20"] 
```

我需要从这个字符串中获取一个字符串数组。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T03:20:34.093

您可以像这样使用[gson 库](https://code.google.com/p/google-gson/)：

```
Gson gson = new Gson(); // create gson instance

String[] strArr = gson.fromJson(jsonString, String[].class); 
```

# android - 如何查找当前片段

> ID：15858509
> 
> 赞同：0
> 
> 时间：2013-04-07T03:16:30.607
> 
> 标签：android, android-fragments

```
FragmentManager fm = getSupportFragmentManager();
Fragment Home = fm.findFragmentByTag("Home");
Fragment rec = fm.findFragmentByTag("Recents");
Fragment search = fm.findFragmentByTag("Search"); 
```

我正在尝试像这样获取当前的fragmentTag，我正在检查它是否已加载。里面的条件根本不执行。我做对了吗。

```
if(Home != null){
   // Do the following
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:47:36.473

您可以通过以下方式检查当前片段是否可见：

```
if (Home.isVisible()) {
   // write your "home" fragment code here
} 
```

# css - 为什么字体大小不变？

> ID：15858511
> 
> 赞同：16
> 
> 时间：2013-04-07T03:16:51.050
> 
> 标签：css, font-size, em

我想用 设置字体大小`em`，而不是`px`。这是我的代码：

```
<style type="text/css">
body{
    font-size: 62.5%;
}

div{
    font-size: 1.2em;
}
</style>

<body>
<div>hello world</div>
</body> 
```

我想将`div`字体大小设置为 12px，但它看起来比我想象的要小，我`div`用 chrome 浏览器工具禁用了样式，它看起来没有任何变化。为什么以及如何使`div`字体大小为 12px？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-07T03:24:41.223

嗯，似乎对我有用：[例如](http://jsfiddle.net/thinkfast2008/HKtC7/1/)

不过，您可能指的是启用/禁用该属性的变化*不大。*`font-size`这是因为`em`for 嵌套元素是相对于它们的父元素的`font-size`。在您的实例中，`font-size:Xem`div 的 相对于`font-size:X%`身体的。

如果您仍然没有改变，请尝试将您`body`的 's设置`font-size`为更大的百分比以使您`div`的 's 字体更大

# c# - 如何转换 IEnumerable 字符串，递归？

> ID：15858515
> 
> 赞同：7
> 
> 时间：2013-04-07T03:17:49.407
> 
> 标签：c#, generics

我想要一个可以作为 .ToString() 的替代方法调用的函数，它将显示集合的内容。

我试过这个：

```
public static string dump(Object o) {
    if (o == null) return "null";
    return o.ToString();
}

public static string dump<K, V>(KeyValuePair<K, V> kv) {
    return dump(kv.Key) + "=>" + dump(kv.Value);
}

public static string dump<T>(IEnumerable<T> list) {
    StringBuilder result = new StringBuilder("{");
    foreach(T t in list) {
        result.Append(dump(t));
        result.Append(", ");
    }
    result.Append("}");
    return result.ToString();
} 
```

但是第二个重载永远不会被调用。例如：

```
List<string> list = new List<string>();
list.Add("polo");
Dictionary<int, List<string>> dict;
dict.Add(1, list);
Console.WriteLine(dump(dict)); 
```

我期待这个输出：

```
{1=>{"polo", }, } 
```

实际发生的是： dict 被正确解释为`IEnumerable<KeyValuePair<int, List<string>>>`，因此调用了第三个重载。

第三次重载调用转储 KeyValuePair>。这应该（？）调用第二个重载，但它没有 - 它调用第一个重载。

所以我们得到这个输出：

```
{[1=>System.Collections.Generic.List`1[System.String]], } 
```

它是由 KeyValuePair 的 .ToString() 方法构建的。

为什么不调用第二个重载？在我看来，运行时应该具有识别具有完整通用参数的 KeyValuePair 并调用该参数所需的所有信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T03:43:09.100

泛型是一个编译时概念，而不是运行时。换句话说，类型参数是在编译时解析的。

在您的 foreach 中，您调用`dump(t)`并且 t 是 T 类型。但是此时除了 T 是一个 之外，对 T 一无所知`Object`。这就是调用第一个重载的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T04:42:03.383

**（更新）**正如其他答案中提到的，问题是编译器不知道类型`V`实际上是 a `List<string>`，所以它只是转到`dump(object)`.

一种可能的解决方法可能是在运行时检查类型。`Type.IsGenericType`将告诉您变量的类型是否具有泛型，并`Type.GetGenericArguments`为您提供这些泛型的实际类型。

因此，您可以编写一个`dump`接收对象并忽略任何泛型信息的方法。请注意，我使用的是`System.Collections.IEnumerable`接口而不是`System.Collections.Generics.IEnumerable<T>`.

```
public static string dump(Object o)
{
    Type type = o.GetType();

    // if it's a generic, check if it's a collection or keyvaluepair
    if (type.IsGenericType) {
        // a collection? iterate items
        if (o is System.Collections.IEnumerable) {
            StringBuilder result = new StringBuilder("{");
            foreach (var i in (o as System.Collections.IEnumerable)) {
                result.Append(dump(i));
                result.Append(", ");
            }
            result.Append("}");
            return result.ToString();

        // a keyvaluepair? show key => value
        } else if (type.GetGenericArguments().Length == 2 &&
                   type.FullName.StartsWith("System.Collections.Generic.KeyValuePair")) {
            StringBuilder result = new StringBuilder();
            result.Append(dump(type.GetProperty("Key").GetValue(o, null)));
            result.Append(" => ");
            result.Append(dump(type.GetProperty("Value").GetValue(o, null)));
            return result.ToString();
        }
    }
    // arbitrary generic or not generic
    return o.ToString();
} 
```

那就是：a）一个集合被迭代，b）一个键值对显示`key => value`，c）任何其他对象只是调用`ToString`。使用此代码

```
List<string> list = new List<string>();
list.Add("polo");
Dictionary<int, List<string>> dict = new Dictionary<int, List<string>>() ;
dict.Add(1, list);
Console.WriteLine(dump(list));
Console.WriteLine(dump(dict.First()));
Console.WriteLine(dump(dict)); 
```

你得到预期的输出：

```
{marco, }
1 => {marco, }
{1 => {marco, }, } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T03:37:28.340

要在您的 中调用第二个版本`foreach`，您需要指定模板参数`K`和`V`，否则它将始终调用第一个版本：

```
dump(t); // always calls first version
dump<K,V>(t); // will call the second 
```

你如何获得参数类型`K`，`V`是另一个问题....

# iphone - 使用 UITapGestureRecognizer 而不是手动调用 tapCount

> ID：15858516
> 
> 赞同：0
> 
> 时间：2013-04-07T03:18:02.757
> 
> 标签：iphone, ios, ipad, uikit, uigesturerecognizer

我一直在检查多个水龙头，无论是 2 还是 10，只需在任何触摸上调用 tapCount：

`[[touches anyObject] tapCount]==2`

这只是检查双击。

它工作正常。我想知道是否有任何特别的理由开始使用`UITapGestureRecognizer`.

看起来`UITapGestureRecognizer`API 提供了与直接检查触摸相同的功能的包装器，如上所述。诸如屏幕上的手指数量之类的东西`tapCount`不需要`UITapGestureRecognizer`。

对于像滑动这样的事情，我可以看到让 UIKit 处理识别它们的简单性，因为它们更难手动编码，但是对于 tapCount？这里真正的收获在哪里，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:15:45.707

手势识别器提供在同一视图上处理多种手势类型的协调。请参阅文档中对状态机的讨论。

如果点击是唯一感兴趣的手势，您可能找不到太多价值，但如果您想将点击的识别与您或系统提供的类提供的其他手势（例如滚动视图）协调起来，该架构会派上用场。手势识别器在触摸时首先得到破解，因此您将需要使用此架构，例如，如果您想在滚动视图处理它们之前识别滚动视图的子项中的触摸。

手势识别器也可以设置为延迟识别，例如，在双击超时之前不会调用单击的动作。

一般来说，手势识别器方法是一种很好的采用方法，因为它允许跨应用程序和代码源以一致的方式管理手势。如果 Apple 想要添加一个辅助技术偏好，允许用户选择更长的时间来识别双击。他们可以做到这一点，而无需对使用标准手势识别器的开发人员的代码进行任何更改。

我应该补充一点，手势识别器可以直接添加到您的故事板或 nib 中，因此在大多数情况下，您只需编写目标操作，这可以节省新代码的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:30:06.997

UITapGestureRecognizer 提供了一个更干净、更易于使用的 API，但没有新功能。所以对于你的情况，没有理由。

# titanium - Appcelerator Titanum 删除 tmp 目录中的文件

> ID：15858517
> 
> 赞同：1
> 
> 时间：2013-04-07T03:18:15.627
> 
> 标签：titanium, titanium-mobile

我正在使用 Appcelerator Titanium 3.0.2 来允许用户观看/下载视频和音频。这是获取文件对象并播放音频的部分代码。

```
var filename = self.url.substring(self.url.lastIndexOf('/')+1);
var file = Ti.Filesystem.getFile(Ti.Filesystem.tempDirectory,filename);
if(!file.exists())
    self._download(self.url, filename, Ti.Filesystem.tempDirectory, function(){
      setAudUrl(file.nativePath);
      timeBar.max = audPlayer.duration*1000;
      prgHandle = setInterval(updateProgressBar,10000);
      audPlayer.play();
      audCtrlBar.show();
      loading.hide();
    },
    function(_progress,_position){
      httpClient=_position;
      loading.show();
    },
    function(){
      noLabel.show();
      loading.hide();
    });
else {
    setAudUrl(file.nativePath);
    timeBar.max = audPlayer.duration*1000;
    prgHandle = setInterval(updateProgressBar,10000);
    audPlayer.play();
    audCtrlBar.show();
} 
```

此代码有效，但我的问题是如何在用户存在应用程序时删除文件。由于 Apple 要求 /tmp 目录中的文件将在用户存在应用程序后删除。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:40:51.143

您可以使用 Titanium 的应用程序事件[pause](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App-event-pause)和[paused](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App-event-paused)。当应用程序变为非活动状态时调用它们，但这仅适用于 iOS。

```
Titanium.App.addEventListener('pause' /* or paused, see docs */, function() {
  var dir = Ti.Filesystem.getFile(Ti.Filesystem.tempDirectory, 'tmpDownloads'); // ensure that you use the same folder for storing the downloaded files. A separate folder is easier to remove.
  if(dir.exists() && dir.isDirectory()) {
    dir.deleteDirectory(true); // true removes recursively the directory and its contents
  }
}); 
```

您需要在应用程序时再次创建目录`resume`。

# xml - SimpleXMLElement，如何避免实体错误？（实体“Acirc”未在...中定义）

> ID：15858519
> 
> 赞同：1
> 
> 时间：2013-04-07T03:18:42.870
> 
> 标签：xml, dom, entity, character

在 XML 文档包含博客文章类型内容的环境中，如何避免尽可能多的实体冲突？

```
Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: Entity: line 1104: parser error : Entity 'Acirc' not defined in ... (path) 
```

导致此错误的行：

```
$results = new SimpleXmlElement( $xml ); 
```

我还可以控制生成 XML 文档的函数。我一直在尝试对引入 DOM 的每个元素使用此函数来修复实体解析错误：

```
function my_special_entity_function($text) {
    $text= html_entity_decode($text,ENT_QUOTES,"ISO-8859-1"); #NOTE: UTF-8 does not work!
    //$text= preg_replace('/&#(\d+);/me',"chr(\\1)",$text); #decimal notation
    //$text= preg_replace('/&#x([a-f0-9]+);/mei',"chr(0x\\1)",$text);  #hex notation

    return $text;
} 
```

最后，我`DOMDocument()`用来创建 XML 文件。除了这个问题，它通常工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:33:23.397

XML 与 HTML 不同，它只知道四个命名实体：`&lt;`、`&gt;`和. 要教它更多，你需要一个带有实体声明的 DOCTYPE；XML Schema 不会帮助您。 `&apos;``&quot;`

# opengl - LD_PRELOAD 麻烦

> ID：15858527
> 
> 赞同：0
> 
> 时间：2013-04-07T03:19:34.900
> 
> 标签：opengl, static, hook, shared, ld-preload

我一直在 OpenGL 接口中使用一些方法来添加一些附加功能（在这种情况下，将 OpenGL 转换为 TCP/UDP 协议）。

我一直在使用一个简单的共享库，它是用 GCC 和 LD_Preload 构建的来修改现有函数。这种技术似乎对某些方法很有效，我有 dlsym 和 glBegin 等方法的工作版本。

但是，我在挂钩某些 glx 函数时遇到了麻烦，例如`glXSwapBuffers`和`glXMakeCurrent`。

谁能解释为什么我可以挂钩常规的openGL方法而不是glx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:17:11.183

> （在这种情况下，将 OpenGL 转换为 TCP/UDP 协议）。

我可以问为什么吗？通过使用 X11/GLX OpenGL（直到 2.1 版，遗憾的是还没有用于 OpenGL-3 及更高版本的 GLX）已经是网络透明的。不需要额外的工作。

为什么你认为 OpenGL-1.1 到 OpenGL-2.1 确实有功能

```
glDisableClientState
 glEnableClientState
         ^^^^^^ 
```

# c# - asp net webform textbox or razor textbox or html textbox要使用吗？什么时候使用？

> ID：15858529
> 
> 赞同：0
> 
> 时间：2013-04-07T03:20:03.360
> 
> 标签：c#, asp.net, razor, webforms, webpage

我刚从[w3school](http://www.w3schools.com/)学习 c# asp net webform 和 pages razor ，我发现 asp net webform 有自己的文本框语法，razor 也有，html 也有，我必须使用哪一个，在什么情况下？

这个是 asp.net 网络表单

```
<form runat="server">

A basic TextBox:
<asp:TextBox id="tb1" runat="server" />
<br><br>

A password TextBox:
<asp:TextBox id="tb2" TextMode="password" runat="server" />
<br><br>

</form> 
```

用于剃须刀

```
@Html.TextBox("TextBoxName") 
```

对于 HTML，我想每个人都知道。给点建议，现在真的很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:46:52.437

ASP.NET MVC 支持 2 个开箱即用的视图引擎：

1.  基于 ASP.NET WebForms 语法的 WebForms 视图引擎
2.  较新的 Razor 视图引擎

使用哪种视图引擎实际上取决于许多因素。在做出决定时，应考虑团队成员的技能水平和现有代码库等因素。

话虽如此，我强烈建议您不要使用该[`w3schools`](http://www.w3schools.com/)网站来学习任何东西。如果你想学习 ASP.NET MVC，官方[`asp.net`](http://asp.net/mvc)网站应该是一个更好的起点。

# php - 如何在 jQuery 中正确使用开关？

> ID：15858530
> 
> 赞同：3
> 
> 时间：2013-04-07T03:20:22.907
> 
> 标签：php, javascript, jquery

```
 $(document).ready(function() {
    //set all logo images based on data returned from database
    var WinBack = $('div.jWinBackFrom').html();
    switch(WinBack) {
        case '1': //If database returns 1 : set Verizon FiOS logo
        $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo site_url();?>/assets/images/verizon-fios-logo.jpg" />');
        break;

        case '2': //If database returns 2 : set DirecTV logo
        $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/directv-logo.jpg" />');
        break;

        case '3': //If database returns 3 : set DISH Network logo
        $('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/dish-network-logo.jpg" />');
        break;
    } 
```

在页面上，我有多个`<div class="jWinBackFrom"><?php echo $optimum['cWinBackFrom'][$i]; ?></div>`for 循环。

所以想象一个输出`<div class="jWinBackFrom">1</div>`，`<div class="jWinBackFrom">2</div>`, `<div class="jWinBackFrom">3</div>`, `<div class="jWinBackFrom">2</div>`, `<div class="jWinBackFrom">1</div>``<div class="jWinBackFrom">3</div>`,`<div class="jWinBackFrom">1</div>` 基本上都是随机的。jQuery 需要从所有这些 DIV 中获取值，并使用相关图像切换数值。

有人可以告诉我我是否做得对（意味着正确的方法）这是最有效的（可能不是）那是什么？

我需要对许多其他领域重复这个过程。我的理论是让数据库返回一个像 1 这样的简单值并使用 jQuery 动态构建页面会更快。

感谢您的帮助！谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:27:54.693

我对PHP一无所知，但我倾向于将您的选项添加到数组中，并查找索引。

```
var choices = [
    "", // Apparently nothing at index 0
    '<img id="WinBackLogo" src="<?php echo site_url();?>/assets/images/verizon-fios-logo.jpg" />',
    '<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/directv-logo.jpg" />',
    '<img id="WinBackLogo" src="<?php echo base_url();?>assets/images/dish-network-logo.jpg" />'
]

$(document).ready(function() {
    $('div.jWinBackFrom').html(function(i, htm) {
        return choices[htm];
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:26:10.813

在这样的情况/要求中，通常最好创建一个*查找哈希*：

```
var hash = {
    1:   'verizon-fios-logo.jpg',
    2:   'directv-logo.jpg',
    3:   'dish-network-logo.jpg'
}; 
```

然后你可以去

```
$('div.jWinBackFrom').prepend('<img id="WinBackLogo" src="<?php echo site_url();?>/assets/images/"' + hash[ $('div.jWinBackFrom').html() ] + ' />'); 
```

事实证明，在您的情况下，您几乎可以使用普通的*Javascript Array*而不是普通的*Object*。您只需要使索引开始于`0`而不是`1`.

# c - 变量文件名和 Curlib

> ID：15858531
> 
> 赞同：0
> 
> 时间：2013-04-07T03:20:28.017
> 
> 标签：c, variables, filenames, libcurl

我想做的事：

我正在尝试编写 ac 程序，该程序将从 URL 下载文件并将其保存在本地，我找到了以下指南，只要我对文件名进行硬编码，它就完全符合我的要求：

[http://siddhantahuja.wordpress.com/2009/04/12/how-to-download-a-file-from-a-url-and-save-onto-local-directory-in-c-using-libcurl/](http://siddhantahuja.wordpress.com/2009/04/12/how-to-download-a-file-from-a-url-and-save-onto-local-directory-in-c-using-libcurl/)

我的问题是什么：

这些文件每小时更新一次，每个新文件的日期和时间都被标记。我可以使用 time.h 预测所需的文件名并提取当前日期和时间信息，但是我不知道如何将这些信息组合成可以传递给 curlib 命令的表单。

当前尝试的解决方案（不起作用）：

```
char *url;                       //char pointer to URL
url = malloc((sizeof(char)*51+1);//allocate memory to pointer address is 51 characters + \0 terminator
sprintf(url, "http://>URL Info</FILENAME%.4d%.2d%.2d%.2d30.jpg\0", year, month, date, hour);
                                 //ie http://example.com/files/FILENAME201304071030.jpg 
```

该字符串正在被填充，因为我可以使用 printf 输出它，但是它似乎没有传递给 curlib 命令：

```
curl_easy_setopt(curl, CURLOPT_URL, url); 
```

它创建目标文件，但文件为空。我怀疑它与 char 指针和字符串之间的区别有关，但我不确定是什么。

关于我做错了什么以及接下来应该尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:50:09.293

您应该在使用 libcurl 的程序中使用[CURLOPT_VERBOSE](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTVERBOSE)选项并检查正在发送的请求/响应。

我的猜测是，您不知何故只是要求输入错误的 URL，而服务器以 404 或其他没有实际响应正文内容的方式响应。

curl_easy_setopt ( [curl](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html) , CURLOPT_URL, url); 你显示的电话看起来很好，因为它需要一个零终止的字符 *，这就是你发送给它的内容。当然，VERBOSE 输出也会显示 libcurl 是否以您期望的相同方式处理输入。

# ninject-extensions - 使用 Ninject 自定义实例提供者绑定成功，使用工厂方法参数解析

> ID：15858536
> 
> 赞同：1
> 
> 时间：2013-04-07T03:20:48.230
> 
> 标签：ninject-extensions, abstract-factory, open-generics, ninject-conventions

我一直在研究一个类似问题的[公认答案](https://stackoverflow.com/a/14456264/533958)，我认为具体工厂返回一个实现，该实现基于工厂方法上的字符串参数匹配具体实现上的命名绑定。

当工厂是抽象工厂并且我希望使用基于 Ninject 约定的绑定时，我正在努力让一个稍微复杂的示例正常工作。考虑以下测试：

```
[Fact]
public void VehicleBuilderFactory_Creates_Correct_Builder_For_Specified_Client()
{
    // arrange
    StandardKernel kernel = new StandardKernel();
    kernel.Bind(typeof (IVehicleBuilderFactory<,>))
        .ToFactory(() => new UseFirstArgumentAsNameInstanceProvider())
        .InSingletonScope();

    kernel.Bind(scanner => scanner
                    .FromThisAssembly()
                    .SelectAllClasses()
                    .WhichAreNotGeneric()
                    .InheritedFrom(typeof(IVehicleBuilder<>))
                    .BindAllInterfaces());

    var bicycleBuilderFactory = 
        kernel.Get<IVehicleBuilderFactory<IVehicleBuilder<BlueBicycle>, BlueBicycle>>();
    string country = "Germany";
    string localizedColor = "blau";

    // act
    var builder = bicycleBuilderFactory.Create<IVehicleBuilder<BlueBicycle>>(country);
    Bicycle Bicycle = builder.Build(localizedColor);

    // assert
    Assert.IsType<BlueBicycleBuilder_Germany>(builder);
    Assert.IsType<BlueBicycle>(Bicycle);
    Assert.Equal(localizedColor, Bicycle.Color);
} 
```

这是我尝试使用火把和刀具玩杂耍的地方，因为我曾经在互联网上看到过：

```
public class UseFirstArgumentAsNameInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(MethodInfo methodInfo, object[] arguments) {
        return methodInfo.GetGenericArguments()[0].Name + "Builder_" + (string)arguments[0];
        // ex: Germany -> 'BlueBicycle' + 'Builder_' + 'Germany' = 'BlueBicyleBuilder_Germany'
    }

    protected override ConstructorArgument[] GetConstructorArguments(MethodInfo methodInfo, object[] arguments) {
        return base.GetConstructorArguments(methodInfo, arguments).Skip(1).ToArray();
    }
} 
```

当我尝试分配`bicycleBuilderFactory`此错误时，我被刺伤并着火：

```
System.InvalidCastException was unhandled by user code
  Message=Unable to cast object of type 'Castle.Proxies.ObjectProxy' to type 'Ninject.Extensions.Conventions.Tests.IVehicleBuilderFactory`2[Ninject.Extensions.Conventions.Tests.IVehicleBuilder`1[Ninject.Extensions.Conventions.Tests.BlueBicycle],Ninject.Extensions.Conventions.Tests.BlueBicycle]'.
  Source=System.Core
  StackTrace:
       at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
       at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
       at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 37
       at Ninject.Extensions.Conventions.Tests.NinjectFactoryConventionsTests.VehicleBuilderFactory_Creates_Correct_Builder_For_Specified_Client() in C:\Programming\Ninject.Extensions.Conventions.Tests\NinjectFactoryConventionsTests.cs:line 40
  InnerException: 
```

***是否可以使用方法和自定义提供程序进行绑定******，使用工厂方法参数****(* *)****以及泛型类型参数****(* *)****来解析类型？*** *`ToFactory()` **`"Germany"`**`IVehicleBiulder<BlueBicycle>, BlueBicycle`*****

 ******这是测试的其余代码，尽可能紧凑和可读。

```
public interface IVehicleBuilderFactory<T, TVehicle> 
    where T : IVehicleBuilder<TVehicle> where TVehicle : IVehicle
{
    T Create<T>(string country);
} 
```

**VehicleBuilder 实现**

```
public interface IVehicleBuilder<T> where T : IVehicle { T Build(string localizedColor); }

abstract class BicycleBuilder<T> : IVehicleBuilder<T> where T : Bicycle
{
    public abstract T Build(string localizedColor);
}

public abstract class RedBicycleBuilder : IVehicleBuilder<RedBicycle>
{
    private readonly RedBicycle _Bicycle;
    public RedBicycleBuilder(RedBicycle Bicycle) { _Bicycle = Bicycle; }
    public RedBicycle Build(string localizedColor)
    {
        _Bicycle.Color = localizedColor;
        return _Bicycle;
    }
}
public abstract class GreenBicycleBuilder : IVehicleBuilder<GreenBicycle>
{
    private readonly GreenBicycle _Bicycle;
    public GreenBicycleBuilder(GreenBicycle Bicycle) { _Bicycle = Bicycle; }
    public GreenBicycle Build(string localizedColor)
    {
        _Bicycle.Color = localizedColor;
        return _Bicycle;
    }
}
public abstract class BlueBicycleBuilder : IVehicleBuilder<BlueBicycle>
{
    private readonly BlueBicycle _Bicycle;
    public BlueBicycleBuilder(BlueBicycle Bicycle) { _Bicycle = Bicycle; }
    public BlueBicycle Build(string localizedColor)
    {
        _Bicycle.Color = localizedColor;
        return _Bicycle;
    }
}

public class RedBicycleBuilder_USA : RedBicycleBuilder {
    public RedBicycleBuilder_USA(RedBicycle Bicycle) : base(Bicycle) { }
}

public class RedBicycleBuilder_Germany : RedBicycleBuilder {
    public RedBicycleBuilder_Germany(RedBicycle Bicycle) : base(Bicycle) { }
}
public class RedBicycleBuilder_France : RedBicycleBuilder {
    public RedBicycleBuilder_France(RedBicycle Bicycle) : base(Bicycle) { }
}
public class RedBicycleBuilder_Default : RedBicycleBuilder {
    public RedBicycleBuilder_Default(RedBicycle Bicycle) : base(Bicycle) { }
}

public class GreenBicycleBuilder_USA : GreenBicycleBuilder {
    public GreenBicycleBuilder_USA(GreenBicycle Bicycle) : base(Bicycle) { }
}
public class GreenBicycleBuilder_Germany : GreenBicycleBuilder {
    public GreenBicycleBuilder_Germany(GreenBicycle Bicycle) : base(Bicycle) { }
}
public class GreenBicycleBuilder_France : GreenBicycleBuilder {
    public GreenBicycleBuilder_France(GreenBicycle Bicycle) : base(Bicycle) { }
}
public class GreenBicycleBuilder_Default : GreenBicycleBuilder {
    public GreenBicycleBuilder_Default(GreenBicycle Bicycle) : base(Bicycle) { }
}

public class BlueBicycleBuilder_USA : BlueBicycleBuilder
{
    public BlueBicycleBuilder_USA(BlueBicycle Bicycle) : base(Bicycle) { }
}
public class BlueBicycleBuilder_Germany : BlueBicycleBuilder {
    public BlueBicycleBuilder_Germany(BlueBicycle Bicycle) : base(Bicycle) { }
}
public class BlueBicycleBuilder_France : BlueBicycleBuilder
{
    public BlueBicycleBuilder_France(BlueBicycle Bicycle) : base(Bicycle) { }
}
public class BlueBicycleBuilder_Default : BlueBicycleBuilder
{
    public BlueBicycleBuilder_Default(BlueBicycle Bicycle) : base(Bicycle) { }
} 
```

**车辆实施：**

```
public interface IVehicle { string Color { get; set; } }
public abstract class Vehicle : IVehicle { public string Color { get; set; } }
public abstract class Bicycle : Vehicle { }
public class RedBicycle : Bicycle { }
public class GreenBicycle : Bicycle { }
public class BlueBicycle : Bicycle { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T19:38:15.060

根据@LukeN 的评论，我重构了`Bicycle`该类，以便通过构造函数注入使用`IColorSetter`. 该`IColorSetter`实现具有泛型`Color`类型，并且每个`Color`实现都通过构造函数注入的方式“本地化” `IColorLocalizer<T>`。

这样一来，似乎没有一个班级知道任何超出其逻辑责任的知识（我认为）。

但是，我需要更多地考虑这一点，以了解如何使用下面显示的重构类来展示如何使用 Ninject 自定义实例提供程序现在可以用来选择属性`IColorLocalizer<T>`，因为它是唯一会知道的类颜色和语言；颜色来自其泛型类型，语言来自实现本身的名称。

自从询问原始帖子以来，我已经不再使用 IoC 容器来做出这样的选择，而是选择以编程方式在代码中放置一个用于选择实现的开关，并为任何未处理的异常情况选择默认实现。但我不确定这是否主要是为了超越让我难过的事情，或者因为以这种方式依赖 IoC 容器是一个糟糕的选择。

考虑到这一点，我需要更多地更新此答案。

**车辆**

```
public abstract class Vehicle {
    public abstract string Color { get; internal set; }
    public abstract string Move();
}

public class Bicycle : Vehicle {
    public Bicycle(IColorSetter colorSetter) { colorSetter.SetColor(this); }
    public override string Color { get; internal set; }
    public override string Move() { return "Pedaling!"; }
} 
```

**颜色设置器**

```
public interface IColorSetter { void SetColor(Vehicle vehicle); }

public class ColorSetter<T> : IColorSetter where T : Color
{
    private readonly T _color;
    public ColorSetter(T color) { _color = color; }

    public void SetColor(Vehicle vehicle) { vehicle.Color = _color.Name; }
} 
```

**颜色定位器**

```
public interface IColorLocalizer<in T> where T : Color {
    void LocalizeColor(T color);
}

public class GermanBlueLocalizer : IColorLocalizer<Blue> {
    public void LocalizeColor(Blue color) { color.Name = "blau"; }
}

public class EnglishBlueLocalizer : IColorLocalizer<Blue> {
    public void LocalizeColor(Blue color) { color.Name = "blue"; }
} 
```

**颜色**

```
public abstract class Color { public string Name { get; internal set; } }

public class Red : Color {
    public Red(IColorLocalizer<Red> colorLocalizer) {
        colorLocalizer.LocalizeColor(this); }
}

public class Green : Color {
    public Green(IColorLocalizer<Green> colorLocalizer) {
        colorLocalizer.LocalizeColor(this); }
}

public class Blue : Color {
    public Blue(IColorLocalizer<Blue> colorLocalizer) {
        colorLocalizer.LocalizeColor(this); }
} 
```******

# java - Hibernate为自己创建外键

> ID：15858539
> 
> 赞同：3
> 
> 时间：2013-04-07T03:21:24.793
> 
> 标签：java, hibernate, jpa

目前我对休眠有一个非常奇怪的问题。不知何故，它在表上创建了一个引用自身的外键。该列也是主键。这基本上阻止了我从该表中删除任何行。

在日志中我可以看到一行：

> DEBUG org.hibernate.SQL - 更改表设备添加索引 FK79D00A76C682495E (id)，添加约束 FK79D00A76C682495E 外键 (id) 引用设备 (id)

具有类似表的其他表似乎很好。这对于 MySQL 和 Derby 来说似乎都是正确的。我正在使用休眠 4.1.4

带注释的类如下。

```
@Entity(name = "Device")
public class Device extends DomainObject implements Searchable {

    @Id
@GeneratedValue(strategy = GenerationType.AUTO)
protected long id;

    @Column(name = "Type")
    @Enumerated(EnumType.STRING)
    private DeviceTypeEnum type = DeviceTypeEnum.AccessControlDevice;

    @Column(name = "Name", length = Constance.DATABASE_NAME_FIELD_LENGTH)
    private String name;

    @Column(name = "Description", length = Constance.DATABASE_DESCRIPTION_FIELD_LENGTH)
    private String description;

    @Column(name = "Identifier", length = Constance.DATABASE_IDENTIFIER_FIELD_LENGTH, unique = true)
    private String identifier;

    @ManyToMany
    @JoinTable(name = "Device2Group", joinColumns = {@JoinColumn(name = "DeviceID")}, inverseJoinColumns = {@JoinColumn(name = "DeviceGroupID")})
    private List<DeviceGroup> groups = new ArrayList<DeviceGroup>();

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "location")
    private Location location;

    @ManyToOne(cascade = {CascadeType.ALL})
    @JoinColumn(name = "Address")
    private Address address;

    @ManyToOne
    @JoinColumn(name = "Link", nullable = false)
    private Link link;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:10:58.110

事实证明，在设备实体引用的实体类“位置”之一中，它有一个`@ManyToMany`设备的映射集合，它确实应该在`@OneToMany`。更改后`@ManyToMany to @OneToMany`约束消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:59:28.320

我`Device`在您的代码中没有看到对类的引用。所以我假设这个类已经被修改了，**但是它的表没有，因为它有一些数据**。（为什么它本身应该有一个外键？）

尝试将这个表放到你的数据库中，让 hibernate 再次创建它，或者设置`p.hibernate.hbm2ddl.auto`为`create-drop`.

# html - 将标题放在图像上

> ID：15858540
> 
> 赞同：2
> 
> 时间：2013-04-07T03:21:26.350
> 
> 标签：html, css

您好，这是我真正涉足深度编码项目。我想如果我能学会这样做，我会走得很远。到目前为止，我对自己的努力感到非常满意，但我希望得到一些帮助，因为我似乎无法做到我希望的事情。

我使用 Drupal。您可以在[此处查看我正在处理的页面](http://onlinebanter.com/football)

我已经设法在我的 page.tpl 中添加了一个块区域（不要担心这不是一个 drupal 问题）我的块区域包含一个图像。我想在图像顶部打印我的标题。它似乎没有发生。

```
 <?php if ($has_header): ?>
 <!-- Header -->
  <header id="header" class="container-wrapper">
   <div class="container">
         <?php print render($page['header']) ?>

     <?php if ($title): ?>
     <?php print $breadcrumb ?>
     <?php print render($title_prefix) ?>
     <h1><?php print $title ?></h1>
     <?php print render($title_suffix) ?>
     <?php endif ?>
     <?php print $messages ?>
    <?php print render($page['help']) ?>
    <?php if ($tabs): ?><?php print render($tabs) ?><?php endif ?>
    <?php if ($action_links): ?><ul class="action-links"><?php print render($action_links) ?></ul><?php endif ?>
   </div>
</header>
<?php endif ?> 
```

上面第 5 行中的打印渲染页面标题位是我的图像的块区域“标题”。我希望将标题放在图像顶部的中间。

有人可以提供更多建议吗？

感谢编辑添加-

```
 <header id="header" class="container-wrapper">
<div class="container contextual-links-region">
 <div class="region region-header">
<h2 class="element-invisible">You are here</h2>
<div class="breadcrumb">
 <a href="/">Home</a>
 </div>
 <h1>football</h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:41:36.337

我假设您要在图像上找到标题/文本？做这样的事情。 [http://jsfiddle.net/b5Qaj/2/](http://jsfiddle.net/b5Qaj/2/)

制作一个包含标题和图像的外部容器 div。确保使用相对位置设置样式。然后将标题文本定位为绝对位置（这将其相对于容器 div 定位）...

```
<div id="container" style="position:relative;">
    <img src="http://www.hoagames.com/thumbs/1-on-1-soccer.jpg" />
    <h1 style="position:absolute; top:100px; left:20px;"> This text is on top of the image </h1>    
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T19:39:01.983

这比使用绝对定位在图像上放置文本要灵活得多，并且响应速度更快。为此，您需要事先知道图像大小，这您通常会这样做。这将允许您添加覆盖文本、标题等，而无需负填充或绝对定位。他们的关键是设置填充百分比以匹配图像纵横比，如下例所示。我使用[了这个答案](https://stackoverflow.com/a/12121309/2089133)，基本上只是添加了一个图像背景。然后像往常一样将您的标题、按钮等放置在 main 中。

```
.wrapper {
  width: 100%;
  /* whatever width you want */
  display: inline-block;
  position: relative;
  background-size: contain !important;
  background: url('https://upload.wikimedia.org/wikipedia/en/thumb/6/67/Wiki-llama.jpg/1600px-Wiki-llama.jpg') top center no-repeat;
  margin: 0 auto;
}
.wrapper:after {
  padding-top: 75%;
  /* this llama image is 800x600 so set the padding top % to match 800/600 = .75 */
  display: block;
  content: '';
}
.main {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  color: black;
  text-align: center;
  margin-top: 5%;
}
```

```
<div class="wrapper">
  <div class="main">
    This is where your overlay content goes, titles, text, buttons, etc.
  </div>
</div>
```

# php - 在for循环中为数组赋值

> ID：15858543
> 
> 赞同：0
> 
> 时间：2013-04-07T03:21:55.010
> 
> 标签：php

我知道init php数组方法是

```
$a=array("星期日","星期一","星期二","星期三","星期四","星期五","星期六"); 
```

但我必须在两个暗淡的数组中分配，这样的数据是

```
 [0]=> array(6) { ["id"]=> string(1) "2" ["menu_name"]=> string(12) "小吃菜單" ["button_pic_save_path"]=> string(40) "/images/left_button/menu/normal_menu.gif" ["cover_button_pic_save_path"]=> string(46) "/images/left_button/menu/normal_menu_cover.gif" ["order_number"]=> string(1) "0" ["modify_time"]=> string(19) "2013-04-07 09:37:43" } } 
 [1]=> array(6) { ["id"]=> string(1) "3" ["menu_name"]=> string(12) "小吃菜單" ["button_pic_save_path"]=> string(40) "/images/left_button/menu/normal_menu.gif" ["cover_button_pic_save_path"]=> string(46) "/images/left_button/menu/normal_menu_cover.gif" ["order_number"]=> string(1) "0" ["modify_time"]=> string(19) "2013-04-07 09:37:43" } } 
```

现在我的实现代码如下..

```
$query_menu_data = select_sql(QUERY_MENU_SQL_STR);

if(count($query_menu_data) >= 1)
{
    $ary_menu[count($query_menu_data)];

    for($loop_i = 0; $loop_i < count($query_menu_data); $loop_i++)
    {
        for($loop_j = 0; $loop_j < count($ARY_MENU_FIELD); $loop_j++)
        {
            // hash key
            /*
            $ary_menu[$loop_i] = array( 
                $ARY_MENU_FIELD[$loop_j] =>  $query_menu_data[$loop_i][$loop_j]
            );
            */
            $ary_menu[$loop_i] = array( 
                $ARY_MENU_FIELD[$loop_j] =>  $query_menu_data[$loop_i][$loop_j]
            );
        }   // end loop j
    } // end loop i
} 
```

数组的结果总是保存最后的数据，我有什么方法可以解决它。

感谢大家，解决方法在评论中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:29:52.063

看起来您的内部循环 ( `loop_j`) 可能永远不会执行，因为您在第一次执行它之前没有定义 $ARY_MENU_FIELD （并且它是在该循环中创建/修改的）。您是否还有其他代码未显示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:36:39.307

您需要初始化菜单项。之后，您需要填写此菜单的每个菜单字段。

代码：

```
for($loop_i = 0; $loop_i < count($query_menu_data); $loop_i++)
{
    $ary_menu[$loop_i] = array();
    for($loop_j = 0; $loop_j < count($ARY_MENU_FIELD); $loop_j++)
    {
        // hash key
        /*
        $ary_menu[$loop_i] = array( 
            $ARY_MENU_FIELD[$loop_j] =>  $query_menu_data[$loop_i][$loop_j]
        );
        */
        $ary_menu[$loop_i][$ARY_MENU_FIELD[$loop_j]] = $query_menu_data[$loop_i][$loop_j];
    }   // end loop j
} // end loop i 
```

我无法验证是否`$query_menu_data`具有正确的数据结构，但从您的问题描述来看，那里应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T03:37:40.213

当您在遍历/循环后遇到仅包含“最后”位数据的数组问题时，您应该假设您在某处发生了覆盖错误。

查看您的循环，分配来自第二个循环，其中...

`$ary_menu[$loop_i] = array(...`

上面的`=`等号应该是您正在寻找的线索。每次内部for 循环运行时，您都会一遍又一遍地分配`$loop_i`数组中的索引。这是重新分配发生的地方。`$ary_menu``$loop_j`

由于我不确切知道您要在最终数组中寻找什么，因此我只能对解决方案进行假设。这可能正在做类似的事情......

`$ary_menu[$loop_i][] = array(....)`

这实际上是创建`$ary_menu[$loop_i]`一个自己的数组，在每次循环迭代中附加新值。这将解决覆盖问题。但同样，我不确定这是否是你想要做的。

# mysql - MySql 每日报告

> ID：15858548
> 
> 赞同：3
> 
> 时间：2013-04-07T03:22:37.217
> 
> 标签：mysql, stored-procedures, jointable

我正在尝试获得一些帮助来修复我的复杂查询。我在下面解释我的情况，谢谢。

我有以下两个表：

```
ACTIVITY TABLE:

ID   USER_ID      CARD_ID    CLOCK
1      123        04675545   4/3/2013 1:07:06 PM
2      123        04675545   4/3/2013 2:08:06 PM
3      124        04675550   4/3/2013 2:07:06 PM
4      124        04675550   4/3/2013 4:07:06 PM
5      124        04675550   4/4/2013 10:07:06 AM
6      124        04675550   4/4/2013 2:00:00 PM
7      124        04675550   4/5/2013 4:07:06 PM
8      124        04675550   4/7/2013 8:00:00 AM
9      124        04675550   4/7/2013 5:00:00 PM

PRICE TABLE:

ID    FROMTIME    TOTIME       PRICEPERHOUR
1     08:00:00    19:59:59     50.00
2     20:00:00    07:59:59     75.00 
```

以及以下查询：

```
select a.user_id, date(a.clock),  ABS(TIME_TO_SEC(TIMEDIFF(a.clock, b.clock))/3600)*c.PRICEPERHOUR as total from 
(Select if((@rn:=@rn+1)%2=0,@rn,@rn-1) As rId, act.* from act
join (select @rn:=-1)a
order by user_Id, clock) a 
inner join 
(Select if((@rn1:=@rn1+1)%2=0,@rn1,@rn1-1) As rId, act.* from act
join
(select @rn1:=-1)b
order by user_Id, clock) b
ON a.rid=b.rid AND a.id <> b.id 
inner join 
price c
on 
TIME_TO_SEC(a.clock) between TIME_TO_SEC(c.FROMTIME) 
AND 
TIME_TO_SEC(c.TOTIME)
group by a.user_id, date(a.clock) 
```

我得到以下结果：

```
USER_ID    DATE(A.CLOCK)                    TOTAL  
123        April, 03 2013 00:00:00+0000     50.8333
124        April, 03 2013 00:00:00+0000     100
124        April, 04 2013 00:00:00+0000     194.0833
124        April, 05 2013 00:00:00+0000     1,994.0833
124        April, 07 2013 00:00:00+0000     1,994.0833 
```

但是，我试图得到这个结果：

```
USER_ID    DATE(A.CLOCK)                    TOTAL  
123        April, 03 2013 00:00:00+0000     50.8333
124        April, 03 2013 00:00:00+0000     100
124        April, 04 2013 00:00:00+0000     194.0833
124        April, 05 2013 00:00:00+0000     50
124        April, 07 2013 00:00:00+0000     450 
```

这是时钟系统的一部分。每次用户签入时，都会在数据库中记录一个条目。正确的用户行为将是它始终记录一对记录。例如，user_id 123 在下午 1:07:06 计时，在下午 2:08:06 再次计时。但是，在某些情况下，用户可能只执行一次（数据库上的未配对记录），因此只应从记录中的特定小时收费。例如，用户 124 在 2013 年 4 月 5 日。

我整个周末都在努力让这个查询正常工作:(。一旦我得到正确的结果，我将添加一个条件来只获得一个 user_id，（例如，其中 user_id=124）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:49:59.330

我认为即使您设法做到这一点，也存在一些潜在的设计缺陷：

人们可以每天打卡超过 1 个时段吗？如果是这样，那么 2 条记录（例如上午 10 点和下午 2 点）总共可能需要 2 小时或 4 小时。

如果人们在晚上 11 点和凌晨 2 点再次打卡会发生什么？

快速浏览一下，我认为您的 sql 没有考虑跨越 2 个不同工资率的时间段？你绝对应该在你的测试数据中包含这个场景。

如果我要实现这一点，我可能会将逻辑移动到代码中，并通过只有一个时间列来简化价格表，例如：

```
TIME, PRICE
 00:00,  75.00
 08:00,  50.00
 20:00,  75.00 
```

此外，如果用户只有一张卡，您可能不需要在活动表中拥有 card_id 和 user_id。

# c++ - 试图计算两次之间的差异，不会减去

> ID：15858552
> 
> 赞同：2
> 
> 时间：2013-04-07T03:23:34.800
> 
> 标签：c++, time

我的程序所做的是它首先打印当前时间，然后用户按下回车键。之后它再次打印出时间并计算用户等待按Enter键的时间。

我没时间去减法。我从stackoverflow中的另一个问题获得了打印当地时间的代码。

```
#include <iostream>
#include <ctime>
using namespace std;

void main()
{
    time_t rawtime;
    struct tm * timeinfo;

    time ( &rawtime );
    timeinfo = localtime ( &rawtime );
    printf ( "Current local time and date: %s", asctime (timeinfo) );

    cout << "Press enter" << endl;
    cin.ignore();

    time_t rawtime2;
    struct tm * timeinfo2;

    time ( &rawtime2 );
    timeinfo2 = localtime ( &rawtime2 );
    printf ( "Later local time and date: %s", asctime (timeinfo2) );

    printf ( "You took %s", ( asctime (timeinfo2) - asctime (timeinfo) ) ); //math won't work here
    printf ( " seconds to press enter. ");
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:26:07.267

```
cout << "Elapsed time: " << rawtime2 - rawtime << " seconds" << endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T03:38:34.073

> `printf ( "You took %s", ( asctime (timeinfo2) - asctime (timeinfo) ) ); //math won't work here`

不。在这种情况下，两个 s 之间的区别`char*`没有任何意义。你真的只需要取 和 的差，`rawtime`它们*已经以秒为单位*。`rawtime2`

 *此外，您不应该在[c++](/questions/tagged/c%2b%2b "show questions tagged 'c++'")`printf()`代码中混用和，因为它不是惯用的，并且会使代码更难阅读。因此，也许这样的事情会更好......`std::cout`

```
#include <ctime>
#include <iostream>

int main()
{
    time_t rawtime;
    struct tm* timeinfo;

    time(&rawtime);
    timeinfo = localtime(&rawtime);
    std::cout << "Current local time and date: " << asctime(timeinfo);
    std::cout << "Press enter\n";

    std::cin.ignore();

    time_t rawtime2;
    struct tm* timeinfo2;

    time(&rawtime2);
    timeinfo2 = localtime(&rawtime2);
    std::cout << "Later local time and date: " << asctime(timeinfo2);

    time_t const timediff = rawtime2 - rawtime;
    std::cout << "You took " << timediff << " seconds to press enter.\n";
} 
```

### 笔记：

[`main()`应该返回`int`，不是`void`](https://stackoverflow.com/q/204476/78845)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:07:43.983

这是一个更干净的解决方案，主要区别在于使用 int main() 并返回 0; 最后， main 永远不应该返回 void，这是一种不好的编程习惯。

```
#include <iostream>
#include <ctime>
using namespace std;

int main()
{
    time_t rawtime;
    struct tm * timeinfo;

    time ( &rawtime );
    timeinfo = localtime ( &rawtime );
    cout <<  "Current local time and date:  " <<  asctime (timeinfo) ;

    cout << "Press enter" << endl;
    cin.ignore();

    time_t rawtime2;
    struct tm * timeinfo2;

    time ( &rawtime2 );
    timeinfo2 = localtime ( &rawtime2 );
    cout <<  "Later local time and date:   " <<  asctime (timeinfo2) << endl;

    int prinAll = rawtime2 - rawtime;

    cout <<  "You took "  << prinAll << " seconds to press enter" << endl; //math     won't work here

    cout << endl;

    return 0;
} 
```*

# c# - Silverlight - 我的场景所需的动态属性数量？

> ID：15858553
> 
> 赞同：0
> 
> 时间：2013-04-07T03:23:37.800
> 
> 标签：c#, silverlight, data-binding, dynamic, properties

我手头有一个应用程序，可帮助弄清楚如何使用多种技术清洁受污染的场地（多种污染物）。自然我会有一个技术类和一个污染类。

```
Class Pollutant
{
string name;
double baselineAmount;
double reduction goal
...
}

List<Pollutant> pollutantsList=new List<Pollutant>;

Class Technique
{
string name;
List <PerPollutantProperties> PollutantRelatedProperties=new List<PerPollutantProperties>();
...
}

Class PerPollutantProperties
{
string name;
double CurrentLoad=0;
double ReducedLoad=0;
...
}

List<Technique> techniquesList= new List<Technique>();

main()
{
Pollutant pollutant1 = new Pollutant();
Pollutant pollutant2 = new Pollutant();

...
pollutantsList.Add(pollutant1);
pollutantsList.Add(pollutant2);

Technique tec1=new Technique();
Technique tec2=new Technique();
tec1.name="tec1";
tec2.name="tec2";

PerPollutantProperties PPP= new PerPollutantProperties();    
PPP.name="Nitrogen";
tec1.PollutantRelatedProperties.Add(PPP);
tec2.PollutantRelatedProperties.Add(PPP);

PPP= new PerPollutantProperties();
PPP.name="Phorsphorus";
tec1.PollutantRelatedProperties.Add(PPP);
tec2.PollutantRelatedProperties.Add(PPP);

PPP= new PerPollutantProperties();
PPP.name="Sediment";
tec1.PollutantRelatedProperties.Add(PPP);
tec2.PollutantRelatedProperties.Add(PPP);

techniquesList.Add(tec1);
techniquesList.Add(tec2);
...

dataGridTechniques.ItemSource = techniquesList;
} 
```

XAML：

```
 <sdk:DataGrid AutoGenerateColumns="False" Height="Auto" HorizontalAlignment="Left" Margin="12,483,0,0" Name="dataGridTechniques" 
                              VerticalAlignment="Top" Width="Auto" RowHeight="55">
                    <sdk:DataGrid.Columns>
                        <sdk:DataGridTemplateColumn Header="Current Load (lbs/yr)" Width="Auto">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <toolkit:LayoutTransformer RenderTransformOrigin="0,0" >
                                        <toolkit:LayoutTransformer.LayoutTransform>
                                            <RotateTransform Angle="-90"/>
                                        </toolkit:LayoutTransformer.LayoutTransform>
                                        <sdk:DataGrid ItemsSource="{Binding PollutantRelatedProperties}"  
                                                      RowHeight="70" HeadersVisibility="None" AutoGenerateColumns="False">
                                            <sdk:DataGrid.Columns>
                                                <sdk:DataGridTemplateColumn Width="25" Header="currentLoad">
                                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <toolkit:LayoutTransformer>
                                                                <toolkit:LayoutTransformer.LayoutTransform>
                                                                    <RotateTransform Angle="90"/>
                                                                </toolkit:LayoutTransformer.LayoutTransform>
                                                                <TextBlock Text="{Binding CurrentLoad,Converter={StaticResource MyDoubleToStringRoundConverter}}" />
                                                            </toolkit:LayoutTransformer>
                                                        </DataTemplate>
                                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                                </sdk:DataGridTemplateColumn>
                                                <sdk:DataGridTemplateColumn Width="25" Header="Pollutant">
                                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <toolkit:LayoutTransformer>
                                                                <toolkit:LayoutTransformer.LayoutTransform>
                                                                    <RotateTransform Angle="90"/>
                                                                </toolkit:LayoutTransformer.LayoutTransform>
                                                                <TextBlock Text="{Binding PollutantName}" />
                                                            </toolkit:LayoutTransformer>
                                                        </DataTemplate>
                                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                                </sdk:DataGridTemplateColumn>
                                            </sdk:DataGrid.Columns>
                                        </sdk:DataGrid>
                                    </toolkit:LayoutTransformer>
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                        </sdk:DataGridTemplateColumn>

                        <sdk:DataGridTemplateColumn Header="Reduced Load (lbs/yr)" Width="Auto">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <toolkit:LayoutTransformer RenderTransformOrigin="0,0" >
                                        <toolkit:LayoutTransformer.LayoutTransform>
                                            <RotateTransform Angle="-90"/>
                                        </toolkit:LayoutTransformer.LayoutTransform>
                                        <sdk:DataGrid ItemsSource="{Binding PollutantRelatedProperties}" 
                                                      RowHeight="70" HeadersVisibility="None" AutoGenerateColumns="False">
                                            <sdk:DataGrid.Columns>
                                                <sdk:DataGridTemplateColumn Width="25" Header="reducedLoad">
                                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <toolkit:LayoutTransformer>
                                                                <toolkit:LayoutTransformer.LayoutTransform>
                                                                    <RotateTransform Angle="90"/>
                                                                </toolkit:LayoutTransformer.LayoutTransform>
                                                                <TextBlock Text="{Binding ReducedLoad,Converter={StaticResource MyDoubleToStringRoundConverter}}" />
                                                            </toolkit:LayoutTransformer>
                                                        </DataTemplate>
                                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                                </sdk:DataGridTemplateColumn>
                                                <sdk:DataGridTemplateColumn Width="25" Header="Pollutant">
                                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <toolkit:LayoutTransformer>
                                                                <toolkit:LayoutTransformer.LayoutTransform>
                                                                    <RotateTransform Angle="90"/>
                                                                </toolkit:LayoutTransformer.LayoutTransform>
                                                                <TextBlock Text="{Binding PollutantName}" />
                                                            </toolkit:LayoutTransformer>
                                                        </DataTemplate>
                                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                                </sdk:DataGridTemplateColumn>
                                            </sdk:DataGrid.Columns>
                                        </sdk:DataGrid>
                                    </toolkit:LayoutTransformer>
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                        </sdk:DataGridTemplateColumn>
                    </sdk:DataGrid.Columns>
                </sdk:DataGrid> 
```

棘手的部分是应用程序应该允许用户添加/删除污染物/技术以供考虑，并且每种技术对每种污染物都有不同的减少效率。这意味着对于添加的每种污染物，需要在技术类中添加一种更有效的污染物。我应该如何构建技术类以适应这种情况？我想将技术列表绑定到数据网格之类的东西上，用户可以在其中输入自定义信息，例如高效回收。

编辑：决定在技术类中使用列表（实际上是其他帖子的 ObservableCollection 和 RKaufman 的建议）属性，并嵌套 Datagrid。到目前为止，我遇到了两个问题。

问题 1\. 除了我在嵌套 DG 中的 XAML 中设置的列之外，数据源的每个属性也显示为一列。我最初必须在后面的代码中将它们的可见性设置为“Collapsed”，但是在编辑这篇文章时，我发现我可以简单地将 AutoGenerateColumns 设置为 False 以摆脱额外的列。

问题 2\. 每个嵌套 Datagrid 的第 0 行和第 0 列中的 TextBlock 元素都有围绕它们的焦点。如果可能的话，我想知道为什么以及如何关闭它们。即使我单击 UI 的其他区域，它们也不会消失。

截图（抱歉没有足够的代表在帖子中嵌入图片）：http: [//xyk.iwebs.ws/nestedDG_textBlock_highlight.JPG](http://xyk.iwebs.ws/nestedDG_textBlock_highlight.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:20:44.127

如果我理解您所说的正确，您需要能够在技术中添加或去除污染物。如果这是正确的，那么每种技术都需要收集污染物。要向用户显示此信息，带有行详细信息模板的数据网格将解决该问题。至于将污染物添加到技术中，我建议您使用单独的页面或子窗口来添加/编辑技术，并使用几个列表框来选择/取消选择污染物。我还将使用 System.Collections.ObjectModel.ObservableCollection 而不是 List，因为它实现了 INotifyCollectionChanged 并且会在您从集合中添加或删除项目时向您的 UI 发出通知。

如果这是不正确的，请告诉我或给我更多信息，我会尝试进一步指导您。

# java - 使用 GSON 反序列化时如何记录丢弃的字段？

> ID：15858566
> 
> 赞同：1
> 
> 时间：2013-04-07T03:27:03.373
> 
> 标签：java, json, gson

我使用 JSON 作为保存格式。

如果我更改对象的字段名称，GSON 将在加载旧版本时静默丢弃原始字段，因为它们不再匹配新名称。

如果我通过重构意外执行此操作，我希望能够获得一些通知，即“警告：反序列化期间在 ObjectType 中找不到变量名”。有一个 @Version 注释，但它不是我正在寻找的。

是否有人编写了自定义反序列化器或自定义类型转换器，当 JSON 中的字段在类型中不存在时会引发错误？是否有另一个序列化库可以做到这一点？

编辑：如果有人有的话，我仍然会对能够执行此操作的 GSON 反序列化器感兴趣。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T04:33:12.280

[Jackson](http://jackson.codehaus.org)可用于在意外 JSON 元素上失败。Jackson 还可以配置为收集（和记录）所有未绑定的 JSON 元素，如[http://www.cowtowncoder.com/blog/archives/2010/09/entry_414.html](http://www.cowtowncoder.com/blog/archives/2010/09/entry_414.html)中所述（搜索“任何 setter”）。

如果您已经熟悉 Gson，我在[http://programmerbruce.blogspot.com/2011/07/gson-v-jackson-part-6记录了如何使用 Jackson 来执行 Gson 用户指南中所涵盖的相同操作.html](http://programmerbruce.blogspot.com/2011/07/gson-v-jackson-part-6.html)。

# semantic-web - 隐藏复杂的微数据结构

> ID：15858567
> 
> 赞同：1
> 
> 时间：2013-04-07T03:27:17.420
> 
> 标签：semantic-web, semantic-markup, microdata

要嵌入应该隐藏或不作为文本提供的微数据，您可以使用`meta`元素。这是[使用元元素的不可见属性的示例](http://schema.org/docs/gs.html#advanced_missing)。有没有类似的方法来隐藏类型的实例？

例如，我有一个带有表格的页面，其中列出了单个表演者的事件。执行者是隐式的，不会为每个条目重复显示，因此我将其隐藏在一个`meta`元素中。[performer 属性](http://schema.org/MusicEvent)应该是[Person](http://schema.org/Person)类型，它具有我还想隐藏的其他属性。我正在尝试实现这样的目标：

```
<meta itemprop="performer" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Some performer"/>
</meta > 
```

当然这不起作用，[元元素](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.2)必须为空。使用其他元素并用 CSS 隐藏它们会起作用，但对于屏幕阅读器来说可能不是很好。有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:34:35.320

在这种情况下，人员范围可能是一个`<span>`标签？该标签没有语义价值，如果其中只有元标签，它不应该在您的网站中可见。

您还可以查看 itemref 并将 Person 仅添加一次到页面并多次引用该 id。然而，并非所有测试工具都支持 itemref，因此目前测试它是否正确设置非常困难。

# c++ - 用特征随机排列矩阵的行/列

> ID：15858569
> 
> 赞同：7
> 
> 时间：2013-04-07T03:27:41.677
> 
> 标签：c++, random, matrix, permutation, eigen

我正在使用 Eigen，我有一个矩阵：

```
MatrixXi x = MatrixXi::Random(5); 
```

我想使用随机绘制的排列随机排列行和列（行和列只有一个排列），即如果我有一个发送索引 [0,1,2,3,4] 的排列 -> [3,4,2,1,0] 比我想用相同的排列重新排序行和列。

第 1 部分：我在网上找不到 PermutationMatrix 的示例，并且无法弄清楚语法。

第 2 部分：如何获得一个随机排列的索引向量以传递给它？也许std :: random_shuffle？

**更新：**

这是一种（可能效率低下）获得一组打乱索引的方法：

```
std::vector<int> perm;
for (int i=0; i<5; ++i) {
    perm.push_back(i);
}

std::random_shuffle(perm.begin(), perm.end()); 
```

所以现在的问题是我如何重新排序我的矩阵 x 以便它的行/列按 perm 排序？

**更新2：**

越来越近，这可行（想法来源：cplusplus.com）：

```
int myrandom (int i) { return std::rand()%i;}

PermutationMatrix<Dynamic,Dynamic> perm(5);

perm.setIdentity();
for (int i=dim-1; i>0; --i) {
    swap (perm.indices()[i],perm.indices()[myrandom(i+1)]);
}

cout << "original x" << x << endl << endl;
cout << "permuted x" << perm * x * perm << endl << endl; 
```

任何人都知道如何用 random_shuffle 做到这一点？（请参阅下面不起作用的尝试。）

（奖励：如果 perm 是一个 1e4 x 1e4 矩阵，关于 perm * x * perm 是否有效的任何想法？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T18:34:39.990

使用 std::random_shuffle 非常好，那么你必须使用 PermutationMatrix：

```
PermutationMatrix<Dynamic,Dynamic> perm(size);
perm.setIdentity();
std::random_shuffle(perm.indices().data(), perm.indices().data()+perm.indices().size());
A_perm = A * perm; // permute columns
A_perm = perm * A; // permute rows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-25T07:33:12.080

如此处所述：[Stackoverflow](https://stackoverflow.com/a/16969267/12851544)：

> 如果您可以使用 C++11，我建议您在不使用`srand()`and 的情况下实现它`random_shuffle()`；相反，您应该将`<random>`库与`std::shuffle`.
> 
> 首先，如果可能的话`rand`应该避免。除了它通常不是一个很好的 pRNG 之外，由于共享状态，它还存在线程安全问题。该`<random>`库通过为程序员提供对 pRNG 状态的显式控制并通过提供几个具有保证性能、大小和质量特征的选项来解决这两个问题。
> 
> 其次，`random_shuffle`实际上并没有指定使用`rand`，所以理论上重新播种是合法的，使用`srand`不会产生你想要的效果。要获得有保证的结果，`random_shuffle`您必须编写自己的生成器。转向`shuffle`修复该问题，因为您可以直接使用标准引擎。

```
#include <random>       //seed generation
#include <algorithm>    //shuffle()

int main() {

std::random_device r;
std::seed_seq rng_seed{r(), r(), r(), r(), r(), r(), r(), r()};

//create random engines with the rng seed
std::mt19937 eng1(rng_seed);

//create permutation Matrix with the size of the columns
Eigen::PermutationMatrix<Eigen::Dynamic, Eigen::Dynamic> permX(inputX.cols());
permX.setIdentity();
std::shuffle(permX.indices().data(), permX.indices().data()+permX.indices().size(), eng1);
inputX = inputX * permX;   //shuffle column wise

} 
```

如果要对行进行洗牌，请`inputX.rows()`改为使用置换矩阵的初始化。并`inputX = permX * inputX`改为使用。

# spring-security - Spring Security Tonr2 移除应用登录

> ID：15858574
> 
> 赞同：1
> 
> 时间：2013-04-07T03:29:21.543
> 
> 标签：spring-security, google-api, oauth-2.0

我成功地将 google 添加为 tonr2 示例应用程序中的另一个身份验证器。但我坚持的是，删除应用程序的[登录屏幕](http://db.tt/jWm6YkBw)并使用谷歌作为应用程序的身份验证模式。

此外，每次我点击谷歌信息时，我总是被带到“接受”/“不，谢谢”[页面](http://db.tt/3LRyOP6m)，而不是记住我的批准（我一直登录同一个谷歌账户）

这是我修改后的 spring-servlet.xml

```
<sec:http access-denied-page="/login.jsp?authorization_error=true" >
        <sec:custom-filter ref="oauth2ClientFilter" after="EXCEPTION_TRANSLATION_FILTER" />
        <sec:intercept-url pattern="/google/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <sec:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />

        <sec:form-login authentication-failure-url="/login.jsp?authentication_error=true"
            default-target-url="/index.jsp" login-page="/login.jsp"
            login-processing-url="/login.do" />
        <sec:logout logout-success-url="/index.jsp" logout-url="/logout.do" />
    </sec:http>

    <sec:authentication-manager >
        <sec:authentication-provider>
            <sec:user-service>
                <sec:user name="marissa" password="wombat" authorities="ROLE_USER" />
                <sec:user name="sam" password="kangaroo" authorities="ROLE_USER" />
            </sec:user-service>
        </sec:authentication-provider>
    </sec:authentication-manager>

    <!--apply the oauth client context -->
    <oauth:client id="oauth2ClientFilter" />

    <oauth:resource id="google" type="authorization_code"
        client-id="174058367013-sdyu2a9q0fek0smsqgdjjtss26tp83dt.apps.googleusercontent.com"
        client-secret="IBAAGEyTXmM0xijZ5AvvJ65x" authentication-scheme="query"
        access-token-uri="https://accounts.google.com/o/oauth2/token"
        user-authorization-uri="https://accounts.google.com/o/oauth2/auth"
        client-authentication-scheme="form"
        scope="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email" />

    <bean id="conversionService"
        class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <set>
                <bean
                    class="org.springframework.security.oauth.examples.tonr.converter.AccessTokenRequestConverter" />
            </set>
        </property>
    </bean>

    <mvc:default-servlet-handler />

    <mvc:annotation-driven>
        <mvc:message-converters>
            <bean
                class="org.springframework.http.converter.BufferedImageHttpMessageConverter" />
        </mvc:message-converters>
    </mvc:annotation-driven>

    <bean id="contentViewResolver"
        class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="json" value="application/json" />
            </map>
        </property>
        <property name="defaultViews">
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </property>
    </bean>

    <!--Basic application beans. -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="googleController"
        class="org.springframework.security.oauth.examples.tonr.mvc.GoogleController">
        <property name="googleRestTemplate">
            <oauth:rest-template resource="google">
                <property name="messageConverters">
                    <list>
                        <bean
                            class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                            <property name="supportedMediaTypes">
                                <list>
                                    <bean class="org.springframework.http.MediaType">
                                        <!--google sends its json as text/javascript for some reason -->
                                        <constructor-arg value="text" />
                                        <constructor-arg value="javascript" />
                                    </bean>
                                    <bean class="org.springframework.http.MediaType">
                                        <constructor-arg value="application" />
                                        <constructor-arg value="json" />
                                    </bean>
                                </list>
                            </property>
                        </bean>
                    </list>
                </property>
            </oauth:rest-template>
        </property>
    </bean> 
```

# c++ - 我试图制作一个程序，只显示 2 名玩家将在 Scrabble 中开始的瓷砖，但它一直在崩溃？

> ID：15858577
> 
> 赞同：0
> 
> 时间：2013-04-07T03:29:54.393
> 
> 标签：c++, crash

我有一个我正在研究的程序，它类似于拼字游戏。下面这个程序是一个“小程序”，但是它应该能够打印出两个玩家的 7 个起始牌。这个小程序似乎应该可以完全运行，但它只是崩溃了。你们有一个想法，为什么它不运行。非常感谢您的宝贵时间！:D

```
#include <iostream>
#include <string>
#include <fstream>
#include <cstdlib>
#include <ctime>
#include <cctype>
using namespace std;

void selectTiles(char (*lettArray)[53], char (*playPieces)[8], char (*compPieces)[8])
{
    int pP1, pP2, pP3, pP4, pP5, pP6, pP7;
    int cP1, cP2, cP3, cP4, cP5, cP6, cP7;
    //0000000

    srand(time(NULL)); 
    rand();

    pP1=rand()%53;
    (*playPieces)[0]=(*lettArray)[pP1];
    strcpy((lettArray)[pP1],"*");

    do{
        pP2=rand()%53;
        (*playPieces)[1]=(*lettArray)[pP2];

    }while(strcmp((lettArray)[pP2],"*")==0);

    do{
        pP3=rand()%53;
        (*playPieces)[2]=(*lettArray)[pP3];
    }while(strcmp((lettArray)[pP3],"*")==0);

    do{
         pP4=rand()%53;(*playPieces)[3]=(*lettArray)[pP4];
    }while(strcmp((lettArray)[pP4],"*")==0);

    do{
         pP5=rand()%53;(*playPieces)[4]=(*lettArray)[pP5];
    }while(strcmp((lettArray)[pP5],"*")==0);

    do{
         pP6=rand()%53;(*playPieces)[5]=(*lettArray)[pP6];
    }while(strcmp((lettArray)[pP6],"*")==0);

    do{
         pP7=rand()%53;(*playPieces)[6]=(*lettArray)[pP7];
    }while(strcmp((lettArray)[pP7],"*")==0);

    do{
         cP1=rand()%53;(*compPieces)[0]=(*lettArray)[cP1];
    }while(strcmp((lettArray)[cP1],"*")==0);

    do{
         cP2=rand()%53;(*compPieces)[1]=(*lettArray)[cP2];
    }while(strcmp((lettArray)[cP2],"*")==0);

    do{
         cP3=rand()%53;(*compPieces)[2]=(*lettArray)[cP3];
    }while(strcmp((lettArray)[cP3],"*")==0);

   do{
         cP4=rand()%53;(*compPieces)[3]=(*lettArray)[cP4];
   }while(strcmp((lettArray)[cP4],"*")==0);

   do{
         cP5=rand()%53;(*compPieces)[4]=(*lettArray)[cP5];
   }while(strcmp((lettArray)[cP5],"*")==0);

   do{
         cP6=rand()%53;(*compPieces)[5]=(*lettArray)[cP6];
   }while(strcmp((lettArray)[cP6],"*")==0);

   do{
         cP7=rand()%53;(*compPieces)[6]=(*lettArray)[cP7];
    }while(strcmp((lettArray)   [cP7],"*")==0);

    //0000000 

 }

int main()
{
    char lettArray[53]="AABBCCDDEEFFGGHHIIJJKKLLMMNNOOPPQQRRSSTTUUVVWWXXYYZZ";
    char (*pLetters)[53]=&lettArray;

    char player[8];
    char (*pPlayer)[8]=&player;

    char computer[8];
    char (*pComputer)[8]=&computer;
    selectTiles(pLetters,pPlayer,pComputer); 

    for (int i=0;i<53;i++)
       cout<<"|"<<lettArray[i]<<"|";

     cout<<endl;

    for (int i=0;i<8;i++)
       cout<<"|"<<player[i]<<"|";

     cout<<endl;

     for (int i=0;i<8;i++)
        cout<<"|"<<computer[i]<<"|";

     cout<<endl;
     system("pause");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:31:36.420

我认为问题出在这里：

```
void selectTiles(char (*lettArray)[53], ...)
{
  ...
  pP1=rand()%53;
  strcpy((lettArray)[pP1],"*");
  ...
} 
```

那`strcpy`不是在*做*你认为它在做的事情。它（通常）写入越界并导致未定义的行为。使用`std:string`而不是`char []`，引用而不是指针，并在开发代码时对其进行测试，您将不会遇到这些问题。

**编辑：**

好的，首先让我们整理一下代码，这样我们就可以看到我们在做什么。所有这些复制粘贴的 do-while 循环`selectTiles(...)`看起来都很痛苦。第 1 步，我们引入了一个用于从 中抽取随机字符的新函数`lettArray`：

```
char draw(char *lettArray)
{
  int pp;
  do{
    pp=rand()%53;
  }while(lettArray[pp]=='*');
  return(lettArray[pp]);
}

void selectTiles(char (*lettArray)[53], char (*playPieces)[8],
                 char (*compPieces)[8])
{
  int pP1;

  //0000000

  srand(time(NULL));
  rand();

  pP1=rand()%53;
  (*playPieces)[0]=(*lettArray)[pP1];
  strcpy((lettArray)[pP1],"*");

  (*playPieces)[1]=draw(*lettArray);
  (*playPieces)[2]=draw(*lettArray);
  (*playPieces)[3]=draw(*lettArray);
  (*playPieces)[4]=draw(*lettArray);
  (*playPieces)[5]=draw(*lettArray);
  (*playPieces)[6]=draw(*lettArray);

  (*compPieces)[0]=draw(*lettArray);
  (*compPieces)[1]=draw(*lettArray);
  (*compPieces)[2]=draw(*lettArray);
  (*compPieces)[3]=draw(*lettArray);
  (*compPieces)[4]=draw(*lettArray);
  (*compPieces)[5]=draw(*lettArray);
  (*compPieces)[6]=draw(*lettArray);

  //0000000

} 
```

仅此一项就将代码长度减少了 30 行，并使其更易于阅读。它还强调了将*指针传递给数组*的愚蠢。在 C 中，数组作为指向第一个元素的指针传递，因此不需要进一步的间接寻址。由于 (in `selectTiles`)`lettArray`是指向 a 的指针`char[]`，因此这一行：

```
strcpy((lettArray)[pP1],"*"); 
```

是致命的。如果`pP1`是，比如说，12，你没有在数组的第十二个（或第十三个）位置放一个星号，你正在将“*”复制到*第十二个字符数组中。*也就是说，你写的越界。让我们更正这条线（并放入一些`for`循环）：

```
 pP1=rand()%53;
  (*playPieces)[0]=(*lettArray)[pP1];
  (*lettArray)[pP1]= '*';

  for(int k=1 ; k<7 ; ++k)
    (*playPieces)[k]=draw(*lettArray);

  for(int k=0 ; k<7 ; ++k)
    (*compPieces)[k]=draw(*lettArray); 
```

并且代码停止崩溃。仍然有很多改进的可能，但现在它可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:34:02.833

我在 Cygwin 下的 g++ 版本 4.5.3 上编译了这个程序，并且在更改`#include <string>`为`#include <cstring>`它之后编译并运行没有明显问题。

然而，当我查看输出时，很明显程序为每个玩家的拼字游戏字母写了 8 个字母而不是 7 个字母，并且每组中的最后一个字母来自之前未分配的内存块。

因此，我建议如下：

```
for (int i=0;i<8;i++) 
```

... 应该：

```
for (int i=0;i<7;i++) 
```

很可能还有其他我还没有发现的错误。

（编辑）

该行：

对于 (int i=0;i<53;i++)

... 还打印一个额外的字符。它应该是：

对于 (int i=0;i<52;i++)

此外，放大 Beta 关于使用 的点`strcpy`，会将*两个*`strcpy(dest,"*")`字符复制到 指向的地址，而不是一个字符。也就是说，它将复制“*”*和*终止字符串的空值。这可能会覆盖不打算用 null 覆盖的数据。*`dest`*

# mysql - 基于类别的mysql查询

> ID：15858581
> 
> 赞同：-1
> 
> 时间：2013-04-07T03:30:32.837
> 
> 标签：mysql, database

嗨，我有 3 个表如下：

商业：

```
business_id business_name cat_id sub_cat_id
  1           bz1           1      1001
  2           bz2           1      1005
  3           bz3           2      2001
  4           bz4           1      1001 
```

业务类别：

```
cat_id cat_name
1        Restaurant
2        Food
3        Travel 
```

业务子类别：

```
b_sub_cat_id b_subcat_name b_maincat_id
1001           Italian        1
1002           French         1
1003           Asian          1
2001           Bagels         2 
```

现在，当我想基于`b_subcat_name`使用 like 查找业务时，我的查询似乎效果不佳。这是我的查询：

```
SELECT `b`.`business_name`, `b`.`cat_id`, `b`.`business_id`, `bc`.`cat_name`, `bsc`.`b_subcat_name`, `bsc`.`b_sub_cat_id` FROM `business` AS `b` INNER JOIN `business_category` AS `bc` ON b.cat_id = bc.cat_id INNER JOIN `business_sub_category` AS `bsc` ON b.sub_cat_id = bsc.b_sub_cat_id WHERE (bc.cat_name like 'italian%') OR (bc.cat_name like '%italian') OR (bc.cat_name = 'italian') 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:35:09.717

我认为你应该使用`b_subcat_name`in`WHERE`子句，因为 no `cat_name`has value contains`Italy`

尝试改变这一点：

```
SELECT `b`.`business_name`, `b`.`cat_id`, `b`.`business_id`, `bc`.`cat_name`, `bsc`.`b_subcat_name`, `bsc`.`b_sub_cat_id` FROM `business` AS `b` INNER JOIN `business_category` AS `bc` ON b.cat_id = bc.cat_id INNER JOIN `business_sub_category` AS `bsc` ON b.sub_cat_id = bsc.b_sub_cat_id WHERE (bc.cat_name like 'italian%') OR (bc.cat_name like '%italian') OR (bc.cat_name = 'italian') 
```

到

```
SELECT `b`.`business_name`, `b`.`cat_id`, `b`.`business_id`, `bc`.`cat_name`, `bsc`.`b_subcat_name`, `bsc`.`b_sub_cat_id` FROM `business` AS `b` INNER JOIN `business_category` AS `bc` ON b.cat_id = bc.cat_id INNER JOIN `business_sub_category` AS `bsc` ON b.sub_cat_id = bsc.b_sub_cat_id WHERE (bsc.b_subcat_name like 'italian%') OR (bsc.b_subcat_name like '%italian') OR (bsc.b_subcat_name = 'italian') 
```

# c# - 如何根据图像的旋转缩放图像

> ID：15858584
> 
> 赞同：2
> 
> 时间：2013-04-07T03:32:13.620
> 
> 标签：c#, image, xna, rotation, scale

我想缩放图像，以便图像始终是屏幕的大小，无论它如何旋转。有没有人对此有任何想法？顺便说一句，我正在使用 xna 在 C# 中对此进行编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:43:48.223

您可以应用 RotateTransform 来转换图像，然后将其包含在 LayoutTransform 中以填充容器的尺寸（在本例中为屏幕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:26:20.880

也许与此类似，尽管我不确定您希望如何绘制纹理。使用三角形和纹理包裹它们是最简单的。

这就是我在旋转后获得新宽度和新高度的方式：

```
Matrix origin = Matrix.CreateTranslation(0, 0, 0);
Matrix scale = Matrix.CreateScale(1f);
Matrix rotation = Matrix.CreateRotationZ(MathHelper.ToRadians(rotate));
Matrix translation = Matrix.CreateTranslation(0, 0, 0);

Vector2 pos1 = Vector2.Transform(new Vector2(Texture.Width / 2, Texture.Height / 2), origin * scale * rotation * origin);
Vector2 pos2 = Vector2.Transform(new Vector2(Texture.Width, Texture.Height), origin * scale * rotation * translation);

int width = (int)Math.Abs(pos2.X - pos1.X) * 2;
int height = (int)Math.Abs(pos2.Y - pos1.Y) * 2;

float scaleX = (graphics.PreferredBackBufferWidth / width);
float scaleY = (graphics.PreferredBackBufferHeight / height); 
```

您可能会找到绘制此图的最佳方法，因为翻转 45 度的图像在屏幕上绘制时看起来很奇怪，因此您可能必须将其放大以适合屏幕但仍会旋转。您遗漏了，旋转 180 度或 90 度的图像应该效果更好。

# node.js - nodejs：如何在两台服务器上的两个进程之间进行通信

> ID：15858585
> 
> 赞同：1
> 
> 时间：2013-04-07T03:32:36.783
> 
> 标签：node.js, process, broadcast

我正在研究 NodeJs，我的问题是：

进程A在计算机A上运行，进程B在计算机B上运行，现在我想向他们俩广播一条消息，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:37:41.183

您应该查看消息队列。

[Redis](http://redis.io/)具有发布/订阅功能，是一个常见的后端组件。

您还可以根据您的要求考虑[ZeroMQ 。](http://www.zeromq.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:08:48.583

您可能正在寻找[dnode](https://github.com/substack/dnode)，这是一个非常好的 node.js 进程之间的通信系统。

# jquery - 允许对 express/node.js 应用程序的 CORS REST 请求

> ID：15858588
> 
> 赞同：4
> 
> 时间：2013-04-07T03:32:51.310
> 
> 标签：jquery, ajax, node.js, express, cors

我是 node.js/express 的新手。我看到了这篇文章（[Allow CORS REST request to a Express/Node.js application on Heroku](https://stackoverflow.com/questions/11001817/allow-cors-rest-request-to-a-express-node-js-application-on-heroku)），但建议的解决方案不起作用。

我只是打电话给 mapquest api 来获取一些数据来玩。

这是我的 server.js 的一部分：

```
var allowCrossDomain = function(req, res, next) {
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');

    // intercept OPTIONS method
    if ('OPTIONS' == req.method) {
      console.log('hit options');
      res.send(200);
    }
    else {
      next();
    }
};

app.configure(function(){
  console.log('configuring app');
  app.use(allowCrossDomain);
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public')); 
  //app.use(express.static(path.join(application_root, "public")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

/**
 * Main route
 */

app.get('/', function (req, res, next) {
  console.log("getting /");
  Project.findAll()
    .success(function (projects) {
      res.render('index', { projects: projects });
    })
    .error(next);
}); 
```

这是我的客户端 main.js 的一部分：

```
 $('#spec').click(function(ev){
    var form = $(this);
    $.ajax({
        url: "http://www.mapquestapi.com/geocoding/v1/address?key=<mykey>"
      , type: 'POST'
      , datatype: 'json'
      , contentType: 'json'
      , data: { 
            location : {
            "postalCode":"99999"
            }
          , options : { thumbMaps : false} 
        }
      , success: function(resp){
          $('#mapdata').html(resp);
        }
      , error : function(resp){
          $('#mapdata').html(resp);
        }
    });
  }); 
```

这是我在 chrome 开发窗口中的请求标头：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:accept, origin, content-type
Access-Control-Request-Method:POST
Connection:keep-alive
Host:www.mapquestapi.com
Origin:http://localhost:3000
Referer:http://localhost:3000/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31 
```

这是响应标头：

> 允许：跟踪，选项内容长度：0 日期：星期日，2013 年 4 月 7 日 03:18:48 GMT 服务器：Apache-Coyote/1.1

这是错误消息：

```
Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T05:38:30.847

CORS 仅在*目标*HTTP 服务器启用时才有效。在您的情况下，目标 HTTP 服务器是`www.mapquestapi.com`. 在您自己的服务器中启用 CORS 不会在 MapQuest 服务器上启用 CORS。

我认为您要么需要检查 MapQuest 是否支持 JSONP（[从 MapQuest 的示例代码来看](http://developer.mapquest.com/web/documentation/sdk/javascript/v7.0/search)很可能是这样），要么可能需要使用 MapQuest 提供的[地理编码 API](http://developer.mapquest.com/web/documentation/open-sdk/javascript/v7.0/nominatim)。

如果这两个选项都不是一个选项，那么您剩下的唯一选择是在您自己的服务器上创建一个代理，您可以通过该代理向 MapQuest 服务器发送请求（您的服务器将从 MQ 服务器请求数据并将其发送回到您的客户代码）。

# java - 如何使用轴 2 Web 服务和客户端调试此问题

> ID：15858591
> 
> 赞同：0
> 
> 时间：2013-04-07T03:33:53.887
> 
> 标签：java, web-services, axis2

[在本](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)教程之后，我正在学习使用 eclipse、apache 和轴 2 制作 Web 服务。我能够生成 Web 服务、创建和上传 .aar 文件以及生成 Web 服务客户端，就像在教程中一样。但是当我去测试客户端时，它没有产生正确的响应......

```
 PersonalInfoServiceStub stub = new PersonalInfoServiceStub();
 GetContactInfo atn = new GetContactInfo();
 atn.setPersonID(1);
 GetContactInfoResponse c = stub.getContactInfo(atn);
 System.out.println(c.get_return()); //returns null

 // The Java Class that serves as the basis for the web service works well...
 PersonalInfoService s = new PersonalInfoService(); 
 System.out.println(s.getContactInfo(1).getStreet()); //returns main street 
```

这对我来说都是全新的（我仍然非常依赖于遵循本教程），所以我不确定是什么导致了这个问题，或者我如何调试出了什么问题。什么可能导致问题，我将如何调试它？

如果我尝试使用此 url 在浏览器中调用 web 服务： `http://localhost:8080/axis2/services/PersonalInfoService/getContactInfo?personID=1` 我明白了

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
    <ns:getContactInfoResponse xmlns:ns="http://webservices.com">
    <ns:return xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    </ns:getContactInfoResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:04:28.977

看起来您的客户端代码没问题。服务器的响应不包含任何数据。最简单的解释是服务器发回了没有任何数据的响应。如果我是你，我会在服务器收到此请求时对它的行为进行故障排除，而不是专注于客户端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:41:52.383

我将从**Wireshark**或**tcpdump**开始，这将帮助您捕获网络流量，这将帮助您在应用程序和传输级别调试 Java 代码正在生成的内容以及来自服务器的响应。

# actionscript-3 - 使用 建立SWC

> ID：15858592
> 
> 赞同：-1
> 
> 时间：2013-04-07T03:34:04.793
> 
> 标签：actionscript-3, ant, air, flash-builder, swc

我是用ant自动构建swc，但是构建的swc只有3K。我检查了几个解决方案，但我的 build.xml 没有任何区别，求助！

我的 build.xml 如下所示

```
<compc debug="true" output="${OUTPUT_DIR}\ExternalLib.swc">
    <source-path path-element="${SOURCE_DIR}" />
    <include-sources dir="${SOURCE_DIR}" includes="*" />
    <external-library-path file="${AIR_SDK_HOME}\frameworks\libs\air\airglobal.swc" append=true />
</compc> 
```

注意：我解压了 swc 并检查了 catalog.xml。不包括课程。我不知道为什么。我的源目录结构是

```
src
    --PNGEncoder.as
    --Box2D
    ----Collision
    ------[Kinds of AS files]
    ----Common
    ------[Kinds of AS files]
    ----Dynamics
    ------[Kinds of AS files]
    --deng
    ----fzip
    ------[Kinds of AS files]
    ----utils
    ------[Kinds of AS files] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:03:55.470

尝试更新配置为：

```
<compc debug="true" output="${OUTPUT_DIR}/ExternalLib.swc">
    <source-path path-element="${SOURCE_DIR}/"/>
    <include-sources dir="${SOURCE_DIR}/" includes="*" />

    <include-libraries dir='${AIR_SDK_HOME}/frameworks/libs/air/' append='true'>
        <include name="airglobal.swc" />
    </include-libraries>
</compc> 
```

# git - git clone --reference 未按预期运行：未实现传输节省

> ID：15858593
> 
> 赞同：2
> 
> 时间：2013-04-07T03:34:09.023
> 
> 标签：git, subgit

摘要：我将 git clone 与 --reference 一起使用到具有所有适当文件但没有提交的存储库，我希望它可以节省网络带宽和磁盘空间。它没有。

我正在从 SVN 转换存储库。我做了一个

```
cd DIR1; git svn clone $REPO 
```

然后我为 $REPO 设置了 subgit（非常好，顺便说一句）。Subgit 创建完全不同的提交，因为提交消息不同但*文件*都相同。

然后我做一个：

```
git clone --reference DIR1 $SUBGITREPO DIR2 
```

我期待它获取所有提交对象，但从 DIR1 引用文件和目录。它不会那样做——它将完整的文件传输到 DIR2 中。

结帐后，我使用 git ls-tree 验证是的，文件的 SHA1在 DIR1 和 DIR2 中是相同的*。*

那么，为什么 git 不按我的预期做，我怎样才能做到呢？

制作一个新的克隆对我来说没什么大不了的，但是太平洋彼岸的人们希望节省一些网络费用……

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:40:18.470

git的`--reference`标志用于共享*git*数据（版本控制下的文件内容、树、提交）。目录中的工作空间（即“可见文件”）包含什么（或者它们是否存在）完全无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-21T02:10:34.517

> 鉴于所有引用文件/目录的 git 对象都存在，有什么方法可以加速结帐？

检查 Git 2.23（2019 年第三季度）是否改进了该问题及其性能，因为来自备用对象存储的 refs 的提示现在可以用作可达性计算的起点。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 39b44ba](https://github.com/git/git/commit/39b44ba771a315602fd1fdca2e12dfc31ef9c613)和[提交 709dfa6](https://github.com/git/git/commit/709dfa69908c9448db91a9bcc96941549be6421e)（2019 年 7 月 1 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 68e65de](https://github.com/git/git/commit/68e65ded5b790bfd8a1072a7f551a8f283f62f29))^(中，2019 年 7 月 19 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `check_everything_connected`：假设备用参考提示是有效的
> 
> 当我们收到对 sha1 " `X`" 的远程 ref 更新时，我们想要检查我们是否拥有 " `X`" 所需的所有对象。
> 
> 我们可以假设我们的存储库当前没有损坏，因此如果我们有一个指向“ `Y`”的 ref，我们就有了它的所有对象。
> 所以我们可以在`X`点击“”时停止从“”开始的遍历`Y`。
> 
> 如果我们对用于存储替代品的任何存储库做出相同的非损坏假设，那么我们也可以使用它们的 ref 提示来缩短遍历。
> 
> **这在使用 "" 进行克隆时特别有用`--reference`，因为否则我们没有任何本地 refs 可以检查，并且必须遍历整个历史记录，即使对方可能发送给我们的对象可能很少或没有**。
> 
> 以下是包含的性能测试的结果（它或多或少地展示了最大的节省，获得了一个新的提交并共享了整个历史记录）：

```
Test                        HEAD^             HEAD
--------------------------------------------------------------------
[on git.git]
5600.3: clone --reference   2.94(2.86+0.08)   0.09(0.08+0.01) -96.9%

[on linux.git]
5600.3: clone --reference   45.74(45.34+0.41) 0.36(0.30+0.08) -99.2% 
```

# ios - 设计决策属性与变量

> ID：15858599
> 
> 赞同：0
> 
> 时间：2013-04-07T03:35:53.663
> 
> 标签：ios, objective-c

假设我有一个 UISegmentedSwitch 供用户设置公制或英制度量

然后我可以在代码的各个部分测试它的状态，但是如果条件是我认为的那样，我是否在询问中浪费了我的时间（和周期）？

在其他语言中，我通常将变量/标志设置为乘数，默认值为 1（结果没有变化），另一个是需要转换的值（例如 3.048）。

这样就不需要测试，如果计算时发生其他事情，它不是额外的方法嵌套。

但它会进入全局变量领域吗？即使在许多地方都需要这样的标志，如果只有一个这样的标志是不是很糟糕？

也许我应该创建一个只有一个属性的自定义类，或者让它成为 viewController 的一个属性，但是所有这些都涉及到 cpu 处理，就像对电池寿命或 UI 响应性征税一样？

这里的“通常”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:08:21.117

有些人认为全局变量是邪恶的，并且像大多数其他东西一样，如果它们被滥用，它们可能会被滥用。但是不应该将这样的变量设为全局变量的想法是愚蠢的。

如果您要大量使用它并将其限制为只读，除了一个位置，我会忘记反对者并继续使用它。如果它不会被大量引用，您可以将其设置为在类之间传递的属性，但这很痛苦。

另一种选择是一个单例来保存“全局”，如下所示：

[http://maniacdev.com/2009/07/global-variables-in-iphone-objective-c/](http://maniacdev.com/2009/07/global-variables-in-iphone-objective-c/)

IMO，偶尔使用全局变量的兴奋过度了。在某些时间和地点，它才有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:18:01.380

我认为这里的“正常”是使用 [NSUserDefaults standardUserDefaults] 并让它持续存在。

您正在根据此值在其他地方的代码中做出决策。您似乎也可能希望在应用程序的使用之间保持此值，以便维护他们的选择。

`[[NSUserDefaults standardUserDefaults] boolForKey:kUsesMetric];`在我的编程组中将其称为“规范”。

# .htaccess - .htaccess - 将文件 url 替换为 cdn url

> ID：15858600
> 
> 赞同：2
> 
> 时间：2013-04-07T03:36:12.707
> 
> 标签：.htaccess, cloudflare

我使用 Cloudflare 免费 CDN，因为我需要在某些区域使用 https，所以我无法在主域上激活它。因此，经过一些谷歌研究，我发现我可以将选定的文件格式替换为 url（作为镜像/cdn），但无法使其工作。

所以基本上这就是我想要做的，当人们/网站/脚本请求或访问 maindomain.com/img.png 将其重定向到 cdn.cdn.com/img.png （其中“cdn.cdn.com”设置在与插件域相同的文件夹并加载相同的htaccess）并自动提供img.png而无需更改任何代码。这是因为 cloudflare 允许通过 CNAME 记录缓存内容，所以我想自动将 maindomain.com 替换为 CDN CNAME 记录（cdn.cdn.com）。另外，我想知道如何使它适用于单个文件夹。

这是我测试的一个代码

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^maindomain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.maindomain\.com$
#if you want to apply to a single folder 
RewriteCond ^htatest\
RewriteCond $1 "\.(jpg|png)$" [NC]
RewriteRule ^(.*) http://cdn.cdn.com/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:26:36.027

用这个替换你的规则：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?maindomain\.com$ [NC]
RewriteRule ^(htatest/.+?\.(?:jpg|png))$ http://cdn.cdn.com/$1 [L,R=301,NC] 
```

# regex - 什么是 mappings.ts 文件，应该如何在 Tritium 中设置它？

> ID：15858601
> 
> 赞同：2
> 
> 时间：2013-04-07T03:36:22.623
> 
> 标签：regex, path, mapping, moovweb, tritium

我正在使用 Moovweb SDK 并使用 Tritium。我希望我的移动网站表现得像我的桌面网站。我有不同的 URL 指向我的主页。我应该使用正则表达式吗？一个共同的元素？匹配路径的最佳语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T03:37:33.127

scripts 目录中的 mappings.ts 文件是匹配特定页面的位置。该文件在 html.ts 中导入，并允许我们说“当某个页面匹配时，进行以下转换”。

大多数项目已经生成了一个映射文件。一个简单的布局将是这样的：

```
match($path) {
  with(/home/) {
    log("--> Importing pages/homes.ts in mappings.ts")
    @import pages/home.ts
  }
} 
```

每次开始在新页面上工作时，都需要设置新的“地图”。

**第一：匹配唯一路径**

上面的氚匹配主页的路径。路径是域之后的 URL 位。例如，在 www.example.com/search/item 中，“www.example.com”是域，“search/item”是路径。

< `>/home/<`> 用正则表达式指定“home”部分。如有必要，您还可以使用纯字符串：

with("home") 如果 Tritium 将路径与匹配器匹配，它将导入主页。

网站的主页实际上并不包含 home 这个词，这可能是真的。大多数主页是没有任何匹配器的 URL。更好的字符串匹配器可能是：

```
match($path) {
  with ("/")
} 
```

或者，使用正则表达式：

```
with(/index|^\/$/) { 
```

如您所见，`>with()<`映射文件的 < > 函数是 Regex 知识真正派上用场的地方。查看我们关于正则表达式的简短指南。有时会更简单，比如< `>(/search/)<`>。

请记住尽可能提供 URL 最独特的方面。如果两个 < `>with()<`> 函数匹配同一个 URL，则将使用映射文件中第一个出现的那个。如果您无法为不同的页面类型找到唯一的 URL 匹配器，则可能必须通过其他方式进行匹配。

**为什么使用正则表达式？**

使用字符串而不是正则表达式匹配器似乎更容易。但是，正则表达式在匹配哪些 URL 方面提供了更大的灵活性。

例如，网站可以在其产品页面 URL 中使用一串数字。使用普通的字符串匹配器是不切实际的——您必须列出网站上所有项目的所有可能数字。更简单的方法是使用正则表达式来表示：“如果有 5 位数字的字符串，请继续！” （匹配5位数字的代码：< `>/\d{5}/<`>。）

**第二：记录比赛**

匹配特定路径时，您还应该使用 < `>log()<`> 语句，以便准确了解导入的内容。日志语句将打印在命令行窗口中，因此您可以查看您的正则表达式是否准确匹配您的路径。

```
match($path) {
  with(/index|^\/$/) {
    log("--> importing pages/home.ts in mappings.ts")
  }
} 
```

**三：导入文件**

最后，使用 < `>@import<`> 函数来包含特定于页面的氚文件。

```
match($path) {
  with(/index|^\/$/) {
    log("--> importing pages/home.ts in mappings.ts")
    @import pages/home.ts
  }
} 
```

# sql - 使用公共分组参数合并查询

> ID：15858606
> 
> 赞同：0
> 
> 时间：2013-04-07T03:37:22.100
> 
> 标签：sql

我构建了三个 SQL 查询，它们作用于一组大约八个表。这三个中的每一个在其 group by 子句中都有相同的参数。我正在尝试合并这三个查询，以生成单个输出表，尽管我尝试的一切似乎都破坏了工作基础查询。

我想要一个看起来像的输出；

```
[heading] [query1 output column] [query2 output column] [query3 output column] 
```

[heading] 列是三个现有查询的 group by 子句中使用的现有参数。

我意识到我在这里展示了我的新手，虽然我被困住了，并且在同一个错误的循环中绕了太多次......

编辑 ***

我认为代码片段会令人困惑，尽管这里有一个稍微缩写的版本；

```
SELECT 
TITLE_COUNT.index, 
COUNT  (TITLE_COUNT.TTOTAL) AS TITLES,
COUNT (AUTHOR_COUNT.TTOTAL) AS AUTHOR
FROM(
    SELECT 
    index, title, date,
    COUNT (*) AS TTOTAL
    FROM (SELECT DISTINCT index, title, date FROM TableP P) P
    GROUP BY
    index, title, date
    ORDER BY
    index
) AS TITLE_COUNT,
(
    SELECT 
    index, 
    COUNT (*) AS TTOTAL
    FROM (SELECT DISTINCT index, FROM TableM M) M
    GROUP BY
    index
    ORDER BY
    index
) AS AUTHOR_COUNT
WHERE
TITLE_COUNT.index = AUTHOR_COUNT.index
GROUP BY
TITLE_COUNT.index
; 
```

我的问题是，输出表中的计数列已经成倍增加。例如，站在查询中给我类似的东西

```
TITLE
index count
001     12
002     10
003     15

AUTHOR
index  count
001    2
002    4
003    6 
```

虽然我上面的查询导致

```
001    24
002    40
003    90 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:55:56.857

Don't double count:

```
SELECT 
TITLE_COUNT.index, 
TITLE_COUNT.TTOTAL AS TITLES,
AUTHOR_COUNT.TTOTAL AS AUTHOR
FROM(
    SELECT 
    index, title, date,
    COUNT (*) AS TTOTAL
    FROM (SELECT DISTINCT index, title, date FROM TableP P) P
    GROUP BY
    index, title, date
    ORDER BY
    index
) AS TITLE_COUNT
FULL OUTER JOIN (
    SELECT 
    index, 
    COUNT (*) AS TTOTAL
    FROM (SELECT DISTINCT index, FROM TableM M) M
    GROUP BY
    index
    ORDER BY
    index
) AS AUTHOR_COUNT
   ON TITLE_COUNT.index = AUTHOR_COUNT.index
GROUP BY
    TITLE_COUNT.index 
```

# javascript - 这两种javascript用法有什么区别？

> ID：15858613
> 
> 赞同：0
> 
> 时间：2013-04-07T03:38:23.000
> 
> 标签：javascript, google-chrome-extension

```
var win = window.open('cover.html','','height=50,width=150,titlebar=no,toolbar=no');
win.onbeforeunload = function(){ updateIcon();}; 
```

**VS**

```
chrome.windows.create(
  { 
    url: "cover.html", 
    type: "popup", 
    width: 150,
    height: 50 
  }, 
  function(win)
  { win.onbeforeunload = function(){ updateIcon();};  } 
 ); 
```

chrome api 版本中不调用函数 updateIcon()。我想知道为什么。这两段代码都在 ubuntu linux 上进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T12:18:26.447

正如评论中有用[的](https://stackoverflow.com/questions/15858613/whats-the-difference-of-these-two-javascript-usage#comment22571869_15858613)解释：

`chrome.windows.create`返回不同类型的窗口：Chrome API [Window 对象](https://developer.chrome.com/extensions/windows#type-Window)。它不会让您访问`window`已打开文档的对象。

如果您需要检测窗口何时从打开的一侧关闭，您可以监听[`chrome.windows.onRemoved`事件](https://developer.chrome.com/extensions/windows#event-onRemoved)并将窗口 ID 与您从中获得的 ID 进行比较`create`。

如果您确定要挂钩到`unload`文档的事件，您可以从`cover.html`'s 代码中执行此操作

您可以使用`chrome.extensions.getViews`- 但请注意您必须查询 a`type : "tab"`而**不是`"popup"`**- 后者仅指[Browser/Page Action popups](https://developer.chrome.com/extensions/browserAction)，而不是在弹出式窗口中打开的常规页面。我知道这很混乱。

您提到自己找到了一种解决方案，可以[使用`runtime.getBackgroundPage`](https://stackoverflow.com/a/3840852/934239). 作为一种替代方法，我可以提供[打开一个](https://developer.chrome.com/extensions/messaging#connect)到后台页面的端口 - 然后可以监听该端口上的断开连接事件，该事件将在窗口关闭时触发。

# python - lxml unicode输出问题

> ID：15858618
> 
> 赞同：1
> 
> 时间：2013-04-07T03:38:45.750
> 
> 标签：python, lxml, python-requests

python 和 lxml 的新手，所以请多多包涵。现在卡住了似乎是 unicode 的问题。我尝试了 .encode，美丽的汤的 unicodedammit 没有运气。搜索了论坛和网络，但我缺乏 python 技能未能将建议的解决方案应用于我的特定代码。感谢任何帮助，谢谢。

代码：

```
import requests
import lxml.html

sourceUrl = "http://www.hkex.com.hk/eng/market/sec_tradinfo/stockcode/eisdeqty.htm"

sourceHtml = requests.get(sourceUrl)

htmlTree = lxml.html.fromstring(sourceHtml.text)

for stockCodes in htmlTree.xpath('''/html/body/printfriendly/table/tr/td/table/tr/td/table/tr/table/tr/td'''):
    string = stockCodes.text
    print string 
```

错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 0: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:06:05.067

当我像这样运行您的代码时`python lx.py`，我没有收到错误消息。但是当我将结果发送到 sdtout`python lx.py > output.txt`时，它就会发生。所以试试这个：

```
# -*- coding: utf-8 -*-
import requests
import lxml.html
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

这允许您从默认的 ASCII 切换到 UTF-8，Python 运行时将在必须将字符串缓冲区解码为 un​​icode 时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:02:35.323

text 属性总是返回纯字节，但 content 属性应该尝试为您编码。您也可以尝试：`sourceHTML.text.encode('utf-8')`或者`sourceHTML.text.encode('ascii')`但我相当肯定后者会导致同样的异常。

# html - IE8 css：没有背景图片，或浮动：右

> ID：15858620
> 
> 赞同：-4
> 
> 时间：2013-04-07T03:39:02.870
> 
> 标签：html, wordpress, internet-explorer-8

[本网站](http://www.piedmontpool.com/)使用二十一十二的子主题，在 Chrome、Firefox、Opera 和 Internet Explorer 10 中显示良好。

但是，在 Internet Explorer 8 中，它[会降级](http://i112.photobucket.com/albums/n180/SRD001/screenshots/ie8.png)：

`<div id="site" class="page">`没有显示其背景图像，`<h1 class="site-title">`也没有向右浮动。

如何让 IE8 显示背景图像，并将 h1 浮动到右侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:54:17.127

IE8 不能正确读取 HTML5 标签，你必须帮助他使用各种可以在网上轻松找到的脚本。

尝试在页面头部添加此脚本：

```
 <!--[if lt IE 9]> 
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"> 
    </script> 
  <![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:52:03.780

设置这两个元素样式的 CSS 位于 CSS 媒体查询中，IE8 不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:17:20.970

尝试设置

```
position: absolute;
float:right;
right: 100px; /**/ 
```

用于浮动 h1 标签。

# java - 使用 cmd 提示脚本和 java 程序将文件的输出定向到 txt 文件

> ID：15858624
> 
> 赞同：0
> 
> 时间：2013-04-07T03:40:09.393
> 
> 标签：java, windows, batch-file

嘿，我知道还有其他类似的问题，但我对如何以我想要的方式做到这一点感到困惑。我想运行我的程序，该程序基本上对给定的输入值执行某些操作，然后将执行此操作所需的时间（以毫秒为单位）输出到文本文件。我想对从 10,000 开始并以 10,000 递增直到 200,000 的值执行此操作，并将该值输出到 TXT 文件。像这样

```
for (int i = 10000; i < 200000; i+=10000){
     print i
     java Program i > results.txt
} 
```

所以输出打印到文本文件将是这样的：

```
10000    30ms
20000    56ms
30000    75ms
etc      etc 
```

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:41:31.423

我想，你的意思是：

```
@echo off
(for /l %%i in (10000,10000,200000) do "my Java program" %%i)>"results.txt" 
```

# mysql - 具有日期范围条件的查询返回空结果

> ID：15858625
> 
> 赞同：1
> 
> 时间：2013-04-07T03:40:13.457
> 
> 标签：mysql, codeigniter

我有一个查询，它从特定日期范围内的表中读取一些记录。我在 codeigniter 框架下使用 PHP，查询非常简单。

```
$this->db->select('aa.code,aa.employee_code ,aa.assign_date,aa.asset_serial_no');
$this->db->from('asset_assigns as aa');
$this->db->where("aa.assign_date >= $date1"); 
```

以上工作正常！

```
$this->db->select('aa.code,aa.employee_code ,aa.assign_date,aa.asset_serial_no');
$this->db->from('asset_assigns as aa');
$this->db->where("aa.assign_date <= $date2"); 
```

上面还读取了正确数量的查询！

```
$this->db->select('aa.code,aa.employee_code ,aa.assign_date,aa.asset_serial_no');
$this->db->from('asset_assigns as aa');
$this->db->where("aa.assign_date <= $date2");
$this->db->where("aa.assign_date >= $date1"); 
```

但是这个有两个'where'的返回空！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:42:31.110

```
$this->db->where("aa.assign_date <= $date2 AND aa.assign_date >= $date1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:45:48.050

对于日期比较，请使用 mysql`datediff`和`timediff`函数。

```
$this->db->where("datediff(aa.assign_date,$date2) <= 0 and datediff(aa.assign_date,$date1) >= 0"); 
```

如果您不明确，则将日期作为字符串进行比较。考虑两个查询：

```
select date('2010/10/01') > date('2010/2/15'); 
```

通过日期比较，您可以得到正确的“1”输出，第一个日期大于第二个日期，而：

```
select '2010/10/01' > '2010/2/15'; 
```

通过字符串比较，您会得到“0”，这是日期的错误输出（但字符串的正确输出）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T03:48:01.060

我不确定这些 db 方法是如何在 codeignitor 中实现的，但可能你可以替换；

```
$this->db->where("aa.assign_date <= $date2");
$this->db->where("aa.assign_date >= $date1"); 
```

和

```
$this->db->where("aa.assign_date <= $date2 AND aa.assign_date >= $date1"); 
```

# filepicker.io - 使用 filepicker.io 一次将多个文件导出到 Dropbox

> ID：15858627
> 
> 赞同：1
> 
> 时间：2013-04-07T03:41:01.200
> 
> 标签：filepicker.io

我想使用[filepicker.io javascript API](https://www.filepicker.io/)将多个图像文件导出到 Dropbox，但我发现它一次只能导出一个文件。

有没有办法使用 将多个文件导出到保管箱中的文件夹`filepicker.io`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:57:56.803

当前的 API 不支持多文件导出，但在路线图上。

# javascript - 在悬停事件中更改图像时如何避免新请求？

> ID：15858629
> 
> 赞同：0
> 
> 时间：2013-04-07T03:41:16.950
> 
> 标签：javascript, jquery, css, hover

我正在尝试使用 jQuery 创建一个事件，当用户将鼠标悬停在图像上时它会更改图像。我遇到的问题是，即使我已经使用 jQuery 预加载了图像，当用户将鼠标悬停在图像上时，它会发出一个新请求并再次加载图像（它已经在开发人员控制台中显示为自页面以来的预加载图像首次加载）。我想我用 jQuery 更改 CSS 属性的方式有问题，但我在任何地方都找不到正确的方法。

这是代码：

HTML：

```
<div id="box" class="box">
</div> 
```

CSS：

```
.box
{
height: 100px; 
width:  500px; 
border-radius: 15px;
background-color: #003366;
background-image: url('images/blue-box.jpg');
border:1px #003366;
box-shadow: 4px 5px 2px #888888;
} 
```

JavaScript：

```
 $(document).ready(function() {

var preload = [
    'css/images/blue-box.jpg',
    'css/images/gray-box.jpg'
];

preloadImages(preload);

   function preloadImages(arrayOfImages) {
    $(arrayOfImages).each(function(){
    (new Image()).src = this;
    });
   }

$box = "#box";
$($box).mouseover(function()
{
    $($box).css("background-image", "url(' " + preload[1] + " ')");
}); 
```

});

提前致谢，

迭戈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:49:31.787

将预加载数组移动到全局。

```
var preload = [
    'css/images/blue-box.jpg',
    'css/images/gray-box.jpg'
]; 
```

像这样打电话

```
$(function(){
preloadImages(preload);//call the preload functions 

}) 
```

我建议你使用`cache the static content resources.`诸如图像、css 之类的。这样浏览器就会读取缓存的图像。

1.  通过使用缓存，每当您请求新图像时，根据您的缓存设置，图像将附加一个过期标头作为响应。
2.  当用户再次请求相同的图像时，浏览器将从缓存的图像中加载它。（浏览器将发布`HTTP 304 Not Modifi`状态）。直到除非用户想要清除缓存。

# php - 在php中解析json不起作用

> ID：15858636
> 
> 赞同：0
> 
> 时间：2013-04-07T03:42:21.500
> 
> 标签：php, foreach, json, arrays

```
{
    "data": [
        {
            "business_type": "bar",
            "business_name": "KKK",
            "number": "1234567",
            "business_id": "test1"
        },
        {
            "business_type": "restauratns",
            "business_name": "KKKK",
            "number": "1234567",
            "business_id": "test2"
        }
    ]
} 
```

PHP代码： -

1）没有工作

```
foreach ($json_array->data as $obj) {
    echo $obj->business_name;
    echo $obj->business_type;
    echo $obj->business_id;
} 
```

2) 仅获取输出“数据数组”但未获取对象详细信息

```
foreach ($json_array as $name=>$value) {
    echo "$name: $value\n";
    foreach ($value as $entry) {
        echo '  ' . $entry->business_type;
        echo '  ' . $entry->business_name;
        echo '  ' . $entry->business_id;
        echo '  ' . $entry->number;
    }
} 
```

在此之后，我还尝试使用 print_r 和 var_dump 打印详细信息。

var_dump 的结果是：-

```
array(1) {
  ["data"]=>
  array(2) {
    [0]=>
    array(4) {
      ["business_type"]=>
      string(3) "bar"
      ["business_name"]=>
      string(3) "KKK"
      ["number"]=>
      string(7) "1234567"
      ["business_id"]=>
      string(5) "test1"
    }
    [1]=>
    array(4) {
      ["business_type"]=>
      string(11) "restauratns"
      ["business_name"]=>
      string(4) "KKKK"
      ["number"]=>
      string(7) "1234567"
      ["business_id"]=>
      string(5) "test2"
    }
  }
} 
```

我试图找到我犯错的地方，但没有任何想法。如果有人有任何想法，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:46:22.263

您显然将 JSON 数据解码*为 array*，而不是*object*。`json_decode(..., true)`返回数组，如果省略`true`它返回对象的参数。更改您的代码以期望数组或更改您的解码以返回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:20:54.677

数组.php

```
<?php
    // $json = json_decode($json_data, true);
    $json = array(
        'data' => array(
            array(
                'bussiness_type' => 'bar',
                'bussiness_name' => 'KKK',
                'number' => '1234567',
                'bussiness_id' => 'test1'
            ),
            array(
                'bussiness_type' => 'restauratns',
                'bussiness_name' => 'KKKK',
                'number' => '1234567',
                'bussiness_id' => 'test2'
            )
         )
    );

    /*
        array(1) {
          ["data"]=>
          array(2) {
            [0]=>
            array(4) {
              ["bussiness_type"]=>
              string(3) "bar"
              ["bussiness_name"]=>
              string(3) "KKK"
              ["number"]=>
              string(7) "1234567"
              ["bussiness_id"]=>
              string(5) "test1"
            }
            [1]=>
            array(4) {
              ["bussiness_type"]=>
              string(11) "restauratns"
              ["bussiness_name"]=>
              string(4) "KKKK"
              ["number"]=>
              string(7) "1234567"
              ["bussiness_id"]=>
              string(5) "test2"
            }
          }
        }
    */

    foreach( $json['data'] as $value )
    {
        echo $value['bussiness_type'] . "\n" 
            . $value['bussiness_name'] . "\n" 
            . $value['number'] . "\n" 
            . $value['bussiness_id'] . "\n\n";
    }
?> 
```

对象.php

```
<?php
    // $json = json_decode($json_data, true);
    $json = array(
        'data' => array(
            array(
                'bussiness_type' => 'bar',
                'bussiness_name' => 'KKK',
                'number' => '1234567',
                'bussiness_id' => 'test1'
            ),
            array(
                'bussiness_type' => 'restauratns',
                'bussiness_name' => 'KKKK',
                'number' => '1234567',
                'bussiness_id' => 'test2'
            )
         )
    );

    $to_json = json_encode($json);
    $to_obj = json_decode($to_json);
    /*
        object(stdClass)#1 (1) {
          ["data"]=>
          array(2) {
            [0]=>
            object(stdClass)#2 (4) {
              ["bussiness_type"]=>
              string(3) "bar"
              ["bussiness_name"]=>
              string(3) "KKK"
              ["number"]=>
              string(7) "1234567"
              ["bussiness_id"]=>
              string(5) "test1"
            }
            [1]=>
            object(stdClass)#3 (4) {
              ["bussiness_type"]=>
              string(11) "restauratns"
              ["bussiness_name"]=>
              string(4) "KKKK"
              ["number"]=>
              string(7) "1234567"
              ["bussiness_id"]=>
              string(5) "test2"
            }
          }
        }
    */

    foreach( $to_obj->data as $value )
    {
        echo $value->bussiness_type . "\n" 
            . $value->bussiness_name . "\n" 
            . $value->number . "\n" 
            . $value->bussiness_id . "\n\n";
    }

?> 
```

# vb.net - ClickOnce 设置和其他问题 vb.NET

> ID：15858643
> 
> 赞同：0
> 
> 时间：2013-04-07T03:43:44.700
> 
> 标签：vb.net, visual-studio-2012, clickonce, elevated-privileges

我正在尝试使用 vb.net winforms 编写一个小型轻量级客户端，无需提升权限即可安装。在我问我的问题之前，让我给你一些关于它应该做什么的想法。

该应用程序将在 Windows 加载时启动，从安装中设置为这样，带有系统/通知托盘图标，可以单击该图标以加载特定功能。从网站安装应用程序，或者可能是文件共享，还没有完全确定。该客户端最初会为我们的其中一个 Web 程序请求用户凭据，并且它将与已构建的 Web 服务进行对话，以确定他们有权访问我们服务的哪些功能。在此之后，凭据将被加密并保存到本地用户的 PC。每五分钟，客户端会将凭据传递给他们有权访问的网站，并检查正在处理的作业的状态，并在需要时下载可用的报告。

所以，这就是我想要理解的。如果我将此应用程序配置为 ClickOnce 应用程序，一旦它从 url 或共享驱动器安装，用户将不需要做任何其他事情，对吗？还是他们每次启动时都必须访问该 URL 以重新安装/运行客户端？

另一件事，我想就执行此应用程序将要执行的某些操作的最佳方法获得一些意见。我很清楚我要去哪里，但我不知道要采用哪种解决方案。例如，将用户传递的凭据存储在系统上以“记住我”的最佳方式是什么？此外，让客户端安装并在 Windows 启动时自动启动以将其配置为在 Windows 启动文件夹中创建自身的快捷方式的最佳方法是什么？我试图保持它尽可能轻巧，并使用一个非常小的 GUI，所以它不应该太侵入，所以任何关于如何确保它的想法，同时保持它不需要管理员权限来安装，也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:42:09.397

> 如果我将此应用程序配置为 ClickOnce 应用程序，一旦它从 url 或共享驱动器安装，用户将不需要做任何其他事情，对吗？还是他们每次启动时都必须访问该 URL 以重新安装/运行客户端？

好吧，如果他们需要重新安装它，他们将不得不再次下载 setup.exe 文件，但为什么用户需要这样做呢？CilckOnce 支持自动更新。运行程序当然不需要访问 url。

> 将用户传递的凭据存储在系统上以“记住我”的最佳方式是什么？

可能将它们存储为应用程序设置。没有使用过 Visual Studio 2012，但在 Visual Studio 2010 中，您必须在解决方案资源管理器中右键单击项目，转到项目属性，然后在设置选项卡中创建变量。然后，您可以使用 My.Settings.variableName 在代码中访问这些变量。不过，如果您需要的话，不确定安全性。

至于权限，我认为您只需要安装程序的权限即可。也许您应该发布一个原始的 clickOnce 应用程序并对其进行试验，这将回答您关于 clickOnce 的所有其他问题。

# qt - 在QT中，如何以某种方式区分调试和发布，如预处理器

> ID：15858650
> 
> 赞同：7
> 
> 时间：2013-04-07T03:46:06.633
> 
> 标签：qt, debugging, preprocessor, release

我知道我们可以在c#中使用#if DEBUG #else #endif，所以我认为Qt有同样的方法可以做到这一点，就像这样：</p>

```
QString Paths::sqlScriptPath()
{
#if DEBUG
    return "D:\edocclient\edocclient-build-Desktop_Qt_4_8_4_QT4_8_4-Debug\sql";
#else
    return "D:\edocclient\edocclient-build-Desktop_Qt_4_8_4_QT4_8_4-Release\sql";
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T04:47:28.440

正确的 Qt 宏是`QT_DEBUG`. 所以你的代码将是：

```
QString Paths::sqlScriptPath()
{
#ifdef QT_DEBUG
    return "D:\edocclient\edocclient-build-Desktop_Qt_4_8_4_QT4_8_4-Debug\sql";
#else
    return "D:\edocclient\edocclient-build-Desktop_Qt_4_8_4_QT4_8_4-Release\sql";
#endif
} 
```

# c# - 在服务器资源管理器中查看本地数据库

> ID：15858651
> 
> 赞同：0
> 
> 时间：2013-04-07T03:46:18.427
> 
> 标签：c#, visual-studio-2010, sql-server-ce

我在我的 C# Windows 应用程序中创建了一个本地数据库，并将数据插入到数据库中的一个表中。我的问题是为什么我在服务器资源管理器中查看表格时看不到表格中的数据？我看到 /bin/debug 文件夹中有一个数据库正在获取数据，但这不是服务器资源管理器中可用的数据库。Visual Studio 2010 中是否有设置使用项目数据库而不是调试版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:33:41.330

如果您打开 App.config，您可以将 connectionString 的数据源更改为指向您的数据库文件的直接链接。此外，在解决方案资源管理器中选择您的数据库，然后在“属性”部分将“复制到输出”属性更改为“不复制”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:51:19.023

Exactly i think, you have two copy of your database.one in your bin folder and another in your `server explorer`(with different location).when you add data into table exactly you insert them into database at your bin folder(a copy of your database).

check your address of database in your connection string,it must be the same as address of your database in server explorer.(do you use `EF`?)

# windows - 如何在 Windows 后端使 gtkwindow 透明

> ID：15858654
> 
> 赞同：1
> 
> 时间：2013-04-07T03:47:01.010
> 
> 标签：windows, gtk, transparent

我试图让我的 GtkWindow 在 Windows 后端透明，但程序失败。我使用 gtk+ 3.6.1 似乎 gdk_window_set_opacity() 函数不起作用所以还有其他解决方案吗？这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include "gtk/gtk.h"

int main( int argc, char *argv[] )
{
    gboolean user_func( GtkWidget *wid,
                        cairo_t *cr,
                        gpointer user_data );
    gtk_init( &argc, &argv );
    GtkWidget *win = gtk_window_new( GTK_WINDOW_TOPLEVEL );
    gtk_window_set_title( GTK_WINDOW( win ), "Translucent window");
    g_signal_connect( G_OBJECT( win ), "draw", G_CALLBACK( user_func ), NULL );
    gtk_widget_show( win );
    gtk_main();
    return 0;
}

gboolean user_func( GtkWidget *wid,
                    cairo_t *cr,
                    gpointer user_data )
{
    GdkWindow *window = gtk_widget_get_window( wid );
    printf("bbbb\n");                                // for debuging purpose
       gdk_window_set_opacity( window, 0.5 );
    printf("bonjour\n");                             // for debuging purpose
    cairo_set_source_rgba( cr, 0.0, 0.0, 1.0, 0.5 );
    cairo_paint( cr );
    GTK_WIDGET_GET_CLASS( wid )->draw( wid, cr );
    return TRUE;
} 
```

此致。

# android - Android ImageView 改变 alpha 动画

> ID：15858655
> 
> 赞同：0
> 
> 时间：2013-04-07T03:47:22.210
> 
> 标签：android, android-animation

我有四个需要加载的图像。我想要播放一个动画，等待 500 毫秒，另一个播放，等待 500 毫秒，等等。动画所做的只是将 alpha 从 255 更改为 0，然后再返回 255。所有四个 imageViews 都需要该动画。

我目前有两个问题。

1.) 所有图像同时播放。
2.) 下次调用该方法时，动画不起作用。

```
public void computerLights()
{

    ImageView green = (ImageView)findViewById(R.id.imgViewGreen);
    ImageView red = (ImageView)findViewById(R.id.imgViewRed);
    ImageView blue = (ImageView)findViewById(R.id.imgViewBlue);
    ImageView yellow = (ImageView)findViewById(R.id.imgViewYellow);

    AlphaAnimation transparency = new AlphaAnimation(1, 0);

    transparency.setDuration(500);
    transparency.start();
    green.startAnimation(transparency);
    red.startAnimation(transparency);
    blue.startAnimation(transparency);
    yellow.startAnimation(transparency);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:06:17.937

我不确定这是否是最优雅的解决方案，但是您可以使用可以以 500 毫秒间隔发送消息的处理程序轻松实现这一点。

```
private int mLights = new ArrayList<ImageView>();
private int mCurrentLightIdx = 0;
private Handler mAnimationHandler = new Handler(){

    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);

        ImageView currentLightIdx = mLights.get(currentLight);

        AlphaAnimation transparency = new AlphaAnimation(1, 0);

        transparency.setDuration(500);
        transparency.start();
        currentLight.startAnimation(transparency);

        currentLightIdx++;
        if(currentLightIdx < mLights.size()){
            this.sendMessageDelayed(new Message(), 500);
    }
};

public void computerLights()
{

    ImageView green = (ImageView)findViewById(R.id.imgViewGreen);
    ImageView red = (ImageView)findViewById(R.id.imgViewRed);
    ImageView blue = (ImageView)findViewById(R.id.imgViewBlue);
    ImageView yellow = (ImageView)findViewById(R.id.imgViewYellow);

    mLights.add(green);
    mLights.add(red);
    mLights.add(blue);
    mLights.add(yellow);

    mAnimationHandler.sendMessage(new Message());
} 
```

在发送第一条消息后，处理程序将继续每 500 毫秒发送一次消息，直到所有动画都已启动。

# go - Go 频道在被阻止时是否会保持秩序？

> ID：15858658
> 
> 赞同：8
> 
> 时间：2013-04-07T03:47:34.637
> 
> 标签：go, channel, goroutine

我有一部分频道都收到相同的消息：

```
func broadcast(c <-chan string, chans []chan<- string) {
    for msg := range c {
        for _, ch := range chans {
            ch <- msg
        }
    }
} 
```

但是，由于其中的每个频道`chans`都可能以不同的速率被读取，所以当我遇到一个缓慢的消费者时，我不想阻止其他频道。我已经用 goroutines 解决了这个问题：

```
func broadcast(c <-chan string, chans []chan<- string) {
    for msg := range c {
        for _, ch := range chans {
            go func() { ch <- msg }()
        }
    }
} 
```

但是，传递到每个通道的消息的顺序很重要。我查看了规范以查看通道在被阻塞时是否保持顺序，我发现的只是：

> 如果容量大于零，则通道是异步的：如果缓冲区未满（发送）或非空（接收），则通信操作成功而不会阻塞，并且元素按发送顺序接收。

对我来说，如果写入被阻止，那么它不是“发送”，而是等待发送。有了这个假设，上面没有说明当多个 goroutine 被阻塞时的发送顺序。

通道畅通后，发送顺序是否有任何保证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T03:59:58.450

不，没有任何保证。

即使通道未满，如果两个 goroutine 几乎同时启动并发送给它，我认为不能保证首先启动的 goroutine 会真正先执行。所以你不能指望消息按顺序到达。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T04:35:03.737

如果通道已满，您可以删除消息（然后设置一个标志以暂停客户端并向他们发送消息，表明他们正在删除消息或其他内容）。

类似于（未经测试）的东西：

```
type Client struct {
    Name string
    ch   chan<-string
}

func broadcast(c <-chan string, chans []*Client) {
    for msg := range c {
        for _, ch := range chans {
            select {
            case ch.ch <- msg:
            // all okay
            default:
                log.Printf("Channel was full sending '%s' to client %s", msg, ch.Name)
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T11:57:05.120

在此代码中，不作任何保证。

给定示例代码的主要问题不在于通道行为，而在于大量创建的 goroutines。所有的 goroutine 都在同一个叠层循环中“触发”，没有进一步的同步，所以即使在它们开始发送消息之前，我们根本不知道哪些会先执行。

然而，这通常会引发一个合理的问题：如果我们以某种方式保证几个阻塞发送指令的顺序，我们是否保证以相同的顺序接收它们？

发送的“之前发生”属性很难创建。我担心这是不可能的，因为：

1.  *在发送指令之前*任何事情都可能发生：例如，其他 goroutine 是否执行自己的发送
2.  在发送中被阻塞的 goroutine 不能同时管理其他类型的同步

例如，如果我有 10 个编号为 1 到 10 的 goroutine，我无法让它们以正确的顺序同时将自己的编号发送到通道。我所能做的就是使用各种顺序技巧，比如在 1 个单独的 goroutine 中进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:35:20.260

这是对已发布答案的补充。

正如几乎所有人所说，问题在于 goroutine 的执行顺序，您可以通过传递要运行的 goroutine 的编号来轻松地使用通道来协调 goroutine 的执行：

```
func coordinated(coord chan int, num, max int, work func()) {
    for {
        n := <-coord

        if n == num {
            work()
            coord <- (n+1) % max
        } else {
            coord <- n
        }
    }
}

coord := make(chan int)

go coordinated(coord, 0, 3, func() { println("0"); time.Sleep(1 * time.Second) })
go coordinated(coord, 1, 3, func() { println("1"); time.Sleep(1 * time.Second) })
go coordinated(coord, 2, 3, func() { println("2"); time.Sleep(1 * time.Second) })

coord <- 0 
```

或者通过使用以有序方式执行工作人员的中央 goroutine：

```
func executor(funs chan func()) {
    for {
        worker := <-funs
        worker()
        funs <- worker
    }
}

funs := make(chan func(), 3)

funs <- func() { println("0"); time.Sleep(1 * time.Second) }
funs <- func() { println("1"); time.Sleep(1 * time.Second) }
funs <- func() { println("2"); time.Sleep(1 * time.Second) }

go executor(funs) 
```

当然，这些方法会由于同步而消除所有*并行性。*但是，您的程序的并发方面仍然存在。

# python - Linux 中的 Century Gothic 字体

> ID：15858660
> 
> 赞同：2
> 
> 时间：2013-04-07T03:47:56.103
> 
> 标签：python, html, css, django, fonts

所以我在 mac 上使用 Django、Python、HTML 和 CSS 创建了一个网站，它使用了相当多的 Century Gothic 字体。然而，该网站将在 Linux 上运行，并且由于 Linux 没有 Century Gothic 字体，它看起来非常糟糕。我需要一种让 Century Gothic 字体在 Linux 上运行的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T06:11:13.890

你有两种方法可以做到这一点：

1.  在您的服务器中上传一个“ttf”和一个“eot”（对于 IE9）文件，`Century Gothic Font`并在您的 main 中写入`CSS`如下内容：

    ```
    @font-face {
        font-family: myFirstFont;
        src: url('URL/CenturyGothic.ttf'),
             url('URL/CenturyGothic.eot'); /* IE9 */
    } 
    ```

2.  您可以使用来自 的 Century Gothic 替代方案（如[Didact Gothic](http://www.google.com/fonts#UsePlace:use/Collection:Didact+Gothic)）`Google Web fonts`，因此，在`<head>`标签中放置以下代码：

    ```
    <link href='http://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'> 
    ```

    而且，在你的`CSS`：

    ```
    font-family: 'Didact Gothic', sans-serif; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:22:44.000

使用@font-face [http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp在css中嵌入字体](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

# javascript - Facebook Canvas：redirect_uri 不属于应用程序

> ID：15858662
> 
> 赞同：2
> 
> 时间：2013-04-07T03:48:18.063
> 
> 标签：javascript, facebook, localhost, facebook-canvas

我正在尝试将 facebook 画布集成到我的 Web 应用程序上，该应用程序`localhost:8080` 在运行它给我这个错误的网站时正在运行。

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

这是我的应用程序设置。

![在此处输入图像描述](https://i.stack.imgur.com/TCDbX.png)

我只是在关注文档，但出现了这个错误，

```
window.fbAsyncInit = function() {
                            FB
                                    .init({
                                        appId : 'myappIdHere', // App ID
                                        channelUrl : 'https://apps.facebook.com/mytestapp/', // Channel File
                                        status : true, // check login status
                                        cookie : true, // enable cookies to allow the server to access the session
                                        xfbml : true
                                    // parse XFBML
                                    });
                            FB.ui({
                                method : 'feed'
                            });
                        };
                        // Load the SDK Asynchronously
                        (function(d, s, id) {
                            var js, fjs = d.getElementsByTagName(s)[0];
                            if (d.getElementById(id)) {
                                return;
                            }
                            js = d.createElement(s);
                            js.id = id;
                            js.src = "//connect.facebook.net/en_US/all.js";
                            fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:44:09.080

您需要放置在“canvas url”中的 URL 可能是 localhost:8080（应用程序 url 由“名称空间”确定，并且始终是[http://apps.facebook.com/namespace](http://apps.facebook.com/namespace)（这必须是唯一的你的应用程序。）

您需要为 [http://developers.facebook.com/docs/reference/dialogs/feed/指定重定向 URI](http://developers.facebook.com/docs/reference/dialogs/feed/)

```
<script> 
  FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      redirect_uri: 'https://apps.facebook.com/mytestapp/',
      link: 'https://apps.facebook.com/mytestapp/',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

# java - 这个正则表达式怎么说？

> ID：15858663
> 
> 赞同：-2
> 
> 时间：2013-04-07T03:48:21.303
> 
> 标签：java, regex

我想要一个 java 正则表达式，它可以用来匹配这个文本：

`variable(X)`.

可以是任何字符串，`X`只包含字符`a-z`, `A-Z`, `0-9`。

但规则是，`X != tab`和`X != foo`。

也`X`不能是空字符串。

也必须以字符`X`开头。`a-z`

到目前为止我有`variable\([a-z]([a-zA-Z]|\d)*\)`，但我不知道如何写不等于部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:53:56.720

这个正则表达式应该适合你：

```
^variable\s*\(((?!(?:foo|tab)\))[a-z][a-zA-Z0-9]*)\) 
```

在 Java 中：

```
^variable\\s*\\(((?!(?:foo|tab)\\))[a-z][a-zA-Z0-9]*)\\) 
```

### 现场演示：[http ://www.rubular.com/r/0TN8bmmQLS](http://www.rubular.com/r/0TN8bmmQLS)

# encryption - 加密和解密 URL & HTML

> ID：15858665
> 
> 赞同：0
> 
> 时间：2013-04-07T03:49:24.130
> 
> 标签：encryption, asp.net-mvc-4

是否有任何开源黑客安全加密和解密算法用于加密和解密 ASP.NET MVC4 的 URL 查询字符串值和 HTML？

我用谷歌搜索了很多，但每个来源都有一些对它的 DLL 引用，我找不到任何来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:52:36.277

您可以使用一些[`symmetric encryption algorithms`](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)在 .NET 中构建的现有内容。例如，这[`AES algorithm`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aspx)是您可以使用的行业标准。

但我的建议如下：如果您想要安全，那么就不要将此信息发送给客户端（在您的情况下作为查询字符串的一部分），而是将其保存在服务器上。

# mysql - 为新的 web 应用水平或垂直扩展数据库表？（MySQL / SQLite）

> ID：15858666
> 
> 赞同：1
> 
> 时间：2013-04-07T03:49:25.697
> 
> 标签：mysql, sqlite, web-applications

我正计划开发一个简单的门户，供我的供应商登录并查看他们的销售历史。（这仅用于查看目的，因此我将 SQLite 视为 goto，因为此时没有写入/锁定问题 - 但它可能会变成 M​​ySQL）

门户的性质意味着用户权限将规定 VendorA 只能看到 VendorA 的库存/销售/等，而不能看到其他任何人的。我是 webapp 开发的新手，所以**我不确定用表扩展数据库是否更明智，以便每个供应商获得他们自己的 tbl_vendor_a_sales、tbl_vendor_a_inventory、tbl_vendor_b_sales 等的新表（？）或者我是否应该拥有三个大表我的所有供应商信息都存储在那里（tbl_orders、tbl_sales）？**

300 家供应商中的每家都可能有不到 30,000 条销售记录和 50-20 万条库存记录。

我认为采用 2-3 个大表的后一种路线是最佳选择，因为如果需要，我可以更轻松地进行任何汇总报告 - 但我仍然想知道我走在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:39:40.640

像这样对表进行分区作为一种优化可能是有意义的，但只要您没有性能问题，并且没有实际测量到明显的改进，这还为时过早。

如果您真的关心安全性，您可以将每个供应商的数据放入单独的数据库文件中，将供应商登录与 Web 服务器的用户管理集成在一起，并使用文件权限仅允许一个供应商访问每个文件。但是，您的虚拟主机不太可能允许您这样做。

# ios - 使用绝对设备 URI 时的 Phonegap 2.2 音频错误

> ID：15858668
> 
> 赞同：0
> 
> 时间：2013-04-07T03:49:34.177
> 
> 标签：ios, cordova, audio, uri

我有一个应用程序，它从远程服务器下载 m4a 文件，并使用 Phonegap 2.2 中的文件 API 将其本地存储在 IOS 设备上。

然后我去使用媒体 API 播放所述文件，但它给了我以下错误

```
Unknown resource 'file://localhost/Users/warea/Library/Application Support/iPhone Simulator/6.1/Applications/3F588513-B560-4A62-8D82-33FA03809295/Documents/fan.m4a'
2013-04-07 13:41:46.622 Infinite Storm[10017:c07] [LOG] playAudio():Audio Error: [object Object] 
```

虽然我下载成功并且我可以直接链接到文件（并播放它）。绝对 URI 和媒体框架是否存在已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:09:44.160

不是一个答案，而是一个解决方案，在查看 CDVSound.m 之后我意识到我可以只询问文件路径

```
documents://soundname.m4a 
```

它会自动映射到正确的位置。

# c++ - 如何返回 0 并从函数中终止？

> ID：15858671
> 
> 赞同：0
> 
> 时间：2013-04-07T03:50:14.610
> 
> 标签：c++, function, return

在下文中，我希望程序在function2中“条件”小于3时退出，但此时它只是在switch语句之后继续执行代码。我该如何实现我的目标？

```
#include <iostream>

using namespace std;

int main ()
{
    string answer;
    int selection;

    do
    {
        cin >> selection;

        switch(selection)
        {
            case 1:
            function1();
            break;

            case 2:
            function2();
            break;

            default:
            break;
        }

    cout << "Anything else?" << endl;
    cin >> answer;

    }while(!(answer == "no"));

    return 0;
}

void function1()
{   
    //do stuff
}

int function2()
{
    int condition;

    cin >> conditon;

    if(condition < 3)
    {
        cout << "That's an error." << endl;
        return 0;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:58:58.007

包含`<stdlib.h>`在您的标题中并放入`exit(0)`而不是返回 0，这对我有用:)

# mobile - 通过 filepicker.io 从我的手机上传失败

> ID：15858672
> 
> 赞同：0
> 
> 时间：2013-04-07T03:50:27.007
> 
> 标签：mobile, upload, filepicker.io

我有一些非常简单的 javascript 可以在桌面上运行，并且可以通过 filepicker.io 开发人员门户上的对话框弹出窗口运行。但是，使用 AT&T 网络通过我的三星 Galaxy S 进行的每一次尝试都会挂起。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:59:03.573

我很乐意帮助解决此问题，请联系 support@filepicker.io，详细说明正在上传的文件和您使用的浏览器，我们可以解决您遇到的任何问题。

# ruby - 如何检查适当的枚举是否是回文

> ID：15858673
> 
> 赞同：0
> 
> 时间：2013-04-07T03:50:41.147
> 
> 标签：ruby, palindrome, enumerable

显然，散列不适用于这种测试。无论如何，这是我到目前为止所拥有的：

```
module Enumerable
  def palindrome?
    arr = []
    self.reverse_each do |x|
      arr << x
    end
    self == arr
  end
end 
```

我的另一个想法是使用 for 循环逐个元素地循环遍历 arr 和 self 元素以进行检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:00:41.767

```
x = 'Tiger'
p "#{x} is planidrome" if x ==  x.reverse #=> no ouput
x = 'RADAR'
p "#{x} is planidrome" if x ==  x.reverse #=> "RADAR is planidrome"

module Enumerable
  def palindrome?
    p  self.to_a ==  self.to_a.reverse
  end
end
['r','a','d','a','r'].palindrome? #=> true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T04:36:51.743

```
module Enumerable
  def palindrome?
    a = to_a
    a == a.reverse
  end
end 
```

# php - Zend Framework 2 上的嵌套模块

> ID：15858675
> 
> 赞同：1
> 
> 时间：2013-04-07T03:51:14.680
> 
> 标签：php, zend-framework2, zend-autoloader

我们可以在另一个模块中有多个模块吗？

可能是类似这样的结构：

```
/module
    /Application
        /module
             /SubApplication1
             /SubApplication2 
```

我正在寻找一个简单的例子或有人知道的文章。我已经用谷歌搜索了参考，但到目前为止似乎还没有探索过 zf2 的这一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:50:33.987

在你的模块中很容易拥有多个命名空间。您唯一需要做的就是为 Zend Autoloader(s) 提供配置。对于`Zend\Loader\StandardAutoloader`配置可以在模块中设置，看起来像这样：

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                // This is the default namespace most probably the module dir name
                __NAMESPACE__    => __DIR__ . '/src/' . __NAMESPACE__,
                // And this is for your custom namespace within the module
                'SomeNamespace'  => __DIR__ . '/src/' . 'SomeNamespace',
                'OtherNamespace' => __DIR__ . '/src/' . 'OtherNamespace',
            ),
        ),
    );
} 
```

因为`Zend\Loader\ClassMapAutoloader`它是相同的概念。您只需要将命名空间与类文件匹配：

```
// file: ~/autoload_classmap.php
return array(
    'SomeNamespace\Controller\SomeController'    => __DIR__ . '/src/SomeNamespace/Controller/SomeController.php',
    'OtherNamespace\Controller\OtherController'  => __DIR__ . '/src/OtherNamespace/Controller/OtherController.php',
); 
```

有什么要注意的！确保您的子模块名称空间的名称不会与其他模块名称空间冲突。

希望这可以帮助 ：）

斯托扬

# jquery - 如何从输入框获取数据到ajax

> ID：15858677
> 
> 赞同：0
> 
> 时间：2013-04-07T03:51:39.637
> 
> 标签：jquery, html, ajax

我是 ajax 新手，想知道如何从输入中获取数据并将其传递给 ajax，以便我可以将数据使用到 php 框，我是否需要指定输入的 this.val？

到目前为止我的代码

```
div class="findfriend">

    <input type="text" id="findtext" name="friendfinder" placeholder="Enter Text to find a friend"/>
    <button id="buttonfriend" class="findfriendbutton"></button>
</div>
<div class="outputfindfriend">
   <ul class="ulfriendfind">
     <li class="lifindfriend"><a class="searchResult" href="#"></a></li>
    </ul> 
```

```
<script>
    $("#findtext").keydown(function () {
        $.ajax({
            url: 'resultFindFriend.php',
            type: 'post',
            data: { dataFriend: $(this).val },
            success: function (data) {
                $('.outputfindfriend .searchResult').html(data);
            }
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:55:06.390

我跳出来的第一个问题是线路

```
 data: { dataFriend: $(this).val }, 
```

应该是

```
 data: { dataFriend: $(this).val() }, 
```

（即 val() 是一个函数，而不是一个属性。）

# php - PHP 更新 MySQL 数据库

> ID：15858678
> 
> 赞同：1
> 
> 时间：2013-04-07T03:51:40.097
> 
> 标签：php, mysql

我将向您展示我的所有代码，以便您更好地掌握情况；

**格式名.php**

```
<table width="400" border="0" align="center" cellpadding="3" cellspacing="1">
<tr>
<td align="right"><strong>Add My Server</strong></td>
</tr>
<br>
</table>
<table width="400" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form1" method="post" action="Inputtodbame.php">
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td width="16%">Server Name</td>
<td width="2%">:</td>
<td width="82%"><input name="servername" type="text" id="subject" size="50"></td>
</tr>
<br>
<tr>
<td>Server Address </td>
<td>:</td>
<td><input name="serveraddress" type="text" id="name" size="50"></td>
</tr>
<br>
<tr>
<td>Port Number</td>
<td>:</td>
<td><input name="portnumber" type="text" id="customer_mail" size="50"></td>
</tr>
<br>
<tr>
<tr>
<td>Server Description</td>
<td>:</td>
<td><textarea name="description" cols="50" rows="4" id="detail"></textarea></td>
</tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Add My Server"> <input type="reset" name="Submit2" value="Reset"></td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

**输入todbame.php**

```
<?php

   header( 'Location: http://starforgeserversearch.com/serverindexame' ) ;

?>

<?php

define('DB_NAME', '');
define('DB_USER', '');
define('DB_PASSWORD', '');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!$link) {
    die('could not connect: ' . mysql_error());

}

$db_selected = mysql_select_db(DB_NAME, $link);

if  (!$db_selected) {
    die('Cant\'t use ' . DB_NAME . ': ' .mysql_error());

echo ('Connected');
}

$value = $_POST['servername'];
$value2 = $_POST['serveraddress'];
$value3 = $_POST['portnumber'];
$value4 = $_POST['description'];

$sql = "INSERT INTO addserverame (servername, serveraddress, portnumber, description) VALUES ('$value', '$value2', '$value3', '$value4')";

if  (!mysql_query($sql)) {
    die('Error: ' . mysql_error());
}

mysql_close();
?> 
```

**addserverindexame.php**

```
<head>
<style type="text/css">
table { 
 color:black; background-color: white;
 border: 1px solid black;
  }
table td { 
 color:black; background-color: white; 
 border: 1px solid black;
  }  
</style>
</head>
<body>  

<table border="2" bordercolor="#000000" style="background-color:#FFFFFF" width="150%" cellpadding="1" cellspacing="0">  
<tr>
<div align='centre'>
    <td><font face="Arial, Helvetica, sans-serif"><b>Server Name</b></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><b>Server Address</b></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><b>Server Port</b></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><b>Server Description</b></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><b>Status</b></font></td>
    <td><font face="Arial, Helvetica, sans-serif"><b>Update</b></font></td>
</div>
</tr>
<?php

mysql_connect("localhost", "", "") or die (mysql_error());
#echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
#echo "Connected to Data Base";
$query = "SELECT * FROM addserverame";
$result = mysql_query ($query) or die (mysql_error());

$num=mysql_numrows($result);

mysql_close();

$i=0;
while ($i < $num) {

        $value = mysql_result($result,$i,"servername");
        $value2 = mysql_result($result,$i,"serveraddress");
        $value3 = mysql_result($result,$i,"portnumber");
        $value4 = mysql_result($result,$i,"description");
        $id = mysql_result($result,$i,"ID");

ob_start();

if (!$socket = @fsockopen($value2, $value3, $errno, $errstr, 1))
{
  echo "&nbsp;<font color='red'><CENTRE><strong>OFFLINE</strong></CENTRE></font>";
}
else 
{
 echo "&nbsp;<font color='green'><CENTRE><strong>ONLINE</strong></CENTRE></font>";  

  fclose($socket);
}
$status = ob_get_contents();
ob_end_clean();
?>

<tr>
    <td><font face="Arial, Helvetica, sans-serif"><? echo $value; ?></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><? echo $value2; ?></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><? echo $value3; ?></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><? echo $value4; ?></font</td>
    <td><font face="Arial, Helvetica, sans-serif"><? echo $status; ?></font</td>
    <td align="center"><a href="updateame.php?id=<? echo $id; ?>">update</a></td>
</tr>

<?
$i++;

}

?>  
</table> 
```

**注意：上面的每件事都很好，我可以为 MySQL 字段增加价值快乐的日子!!。**

**更新名称.php**

```
<?php

mysql_connect("localhost", "", "x") or die (mysql_error());
#echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
#echo "Connected to Data Base";

$id=$_GET['ID'];

$query = "SELECT * FROM addserverame WHERE ID='$id'";
$result = mysql_query ($query) or die (mysql_error());

        $value = mysql_result($result,$i,"servername");
        $value2 = mysql_result($result,$i,"serveraddress");
        $value3 = mysql_result($result,$i,"portnumber");
        $value4 = mysql_result($result,$i,"description");
        $id = mysql_result($result,$i,"ID");

?>

        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Add Your Server</title>
<link rel="stylesheet" type="text/css" href="view.css" media="all">
<script type="text/javascript" src="view.js"></script>

</head>
<body id="main_body" >

    <img id="top" src="top.png" alt="">
    <div id="form_container">

        <h1><a>Add Your Server</a></h1>
        <form id="form_606591" class="appnitro"  method="post" action="updateameac.php">
                    <div class="form_description">
            <h2>Add Your Server</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_1" >
        <label class="description" for="servername">Server Name </label>
        <div>
            <input id="element_1" name="servername" class="element text medium" type="text" maxlength="255" value=""/> 
        </div><p class="guidelines" id="guide_1"><small>Enter your server name here NOT your server address.</small></p> 
        </li>       <li id="li_2" >
        <label class="description" for="serveraddress">Server Address </label>
        <div>
            <input id="element_2" name="serveraddress" class="element text medium" type="text" maxlength="255" value=""/> 
        </div><p class="guidelines" id="guide_2"><small>This will the DNS name of your server</small></p> 
        </li>       <li id="li_3" >
        <label class="description" for="portnumber">PortNumber </label>
        <div>
            <input id="element_3" name="portnumber" class="element text medium" type="text" maxlength="255" value=""/> 
        </div><p class="guidelines" id="guide_3"><small>This will be the port your server is using.</small></p> 
        </li>       <li id="li_4" >
        <label class="description" for="description">Server Description </label>
        <div>
            <textarea id="element_4" name="description" class="element textarea medium"></textarea> 
        </div><p class="guidelines" id="guide_4"><small>Enter server description/rules here.</small></p> 
        </li>
        div>
            <input id="ID" name="ID" class="element text medium" type="hidden" maxlength="255" value=""/> 
        </div><p class="guidelines" id="guide_5"><small>This will be the port your server is using.</small></p> 
        </li>       <li id="li_6" >

                    <li class="buttons">
                <input type="hidden" name="form_id" value="606591" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Submit" />
        </li>
            </ul>
        </form> 
        <div id="footer">
            Generated by <a href="http://www.phpform.org">pForm</a>
        </div>
    </div>

    </body>
</html>

<?php
mysql_close();

?> 
```

**更新ameac.php**

```
<?php
mysql_connect("localhost", "xxxx", "xxxx") or die (mysql_error());
echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
echo "Connected to Data Base";

$sql="UPDATE addserverame SET servername='$value', serveraddress='$value2', portnumber='$value3', description='$value4' WHERE ID='$id'";
$result=mysql_query($sql);

if($result){
echo "Successful";
echo "<BR>";
}

else {
echo "ERROR";
}

?> 
```

**问题** 如果我进入我想要编辑的字段并单击更新 href 我被带到一个页面以输入新值我这样做，updateameac.php 显示成功但是我查看这些字段并且它们没有被编辑。

**我想要的是**

我希望编辑能够反映在数据库中，基本上它可以正常工作，哈哈。我是 PHP 的初学者，所以我希望你们中的一位优秀的程序员能够解决我的问题。

我怀疑我在 updateameac.php 中没有正确显示字段值，我不知道如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:05:46.637

`updateameac.php`你也必须写这一行

```
$value = $_POST['servername'];
$value2 = $_POST['serveraddress'];
$value3 = $_POST['portnumber'];
$value4 = $_POST['description'];
$id = $_POST['ID']; 
```

# java - ConcurrentHashMap 中的分割

> ID：15858681
> 
> 赞同：3
> 
> 时间：2013-04-07T03:52:32.330
> 
> 标签：java, hashmap, concurrenthashmap

我是 Java 世界的新手，我在探索 ConcurrentHashMap API 时发现了这一点：

```
static final int DEFAULT_INITIAL_CAPACITY = 16;
  static final float DEFAULT_LOAD_FACTOR = 0.75F;
  static final int DEFAULT_CONCURRENCY_LEVEL = 16;
  static final int MAXIMUM_CAPACITY = 1073741824;
  static final int MAX_SEGMENTS = 65536;
  static final int RETRIES_BEFORE_LOCK = 2;
  final Segment<K, V>[] segments;
final Segment<K, V> segmentFor(int paramInt)
  {
    return this.segments[(paramInt >>> this.segmentShift & this.segmentMask)];
  } 
```

ConcurrentHashMap 中分段的基本原理是什么以及为什么要使用它？请就细分概念提供更多建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:55:04.890

并发散列映射将其内容划分为段，以减少写入器锁争用。

该`concurrencyLevel`参数定义段数。默认为 16。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T09:31:59.370

只是为了添加其他出色的答案，ConcurrentHashMap 将映射划分为多个段（基于创建映射时设置的并发级别或默认的并发级别 16）。

同一段内的并发读取获取最近更新的值，读取不需要锁并且不会被阻塞。不同段中的写入可以同时发生，但是，同一段中的两次写入可能会阻塞。

更多信息：[https ://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)

# java - MySQL 中的异常

> ID：15858683
> 
> 赞同：0
> 
> 时间：2013-04-07T03:52:54.937
> 
> 标签：java

我用 Java 编写了一个代码，它必须填充一个点文件。我得到了错误，我不知道为什么。所有的路径都已经设置好了。

```
Class.forName("com.mysql.jdbc.Driver");                     
Connection connects = DriverManager.getConnection("jdbc:mysql://localhost:3306/userlogin", "root","12345");
Statement stm = connects.createStatement();
ResultSet rs=stm.executeQuery("SELECT * FROM authors_4 WHERE self_authors='"+getTxt+"'");

                         int l=0;
                         /*if(rsx.next())
                         {
                             div = Double.parseDouble(rsx.getString("divs"));

                         }*/

                       do
                         {
                             if(l==0)
                             {

                                 diva = Integer.parseInt(rs.getString("tot_pub"));

                                 //fout.write("a [label=" + "\"" + rsx.getString(2) + "\\n" + rsx.getString(4) + "\"" + "color=blue,fontsize=24,fontcolor=red,style=filled];\r\n");
                                 fout.write("\"" + rs.getString("self_authors") + "\"" + "[fixedsize=true, width="+diva+",height="+diva+", label=" + "\"" + rs.getString("self_authors") + "\\n" + rs.getString("tot_pub") + "\"" + "color=blue,fontsize=24,fontcolor=red,style=filled];\r\n");
                               l++;
                             }

                             divb = Integer.parseInt(rs.getString("tot_pub")) ;

                             fout.write("\"" + rs.getString("co_auths") + "\"" + "[fixedsize=true, width="+divb+",height="+divb+",label=" + "\"" + rs.getString("co_auths") + "\\n" + rs.getString("tot_pub") + "\"];" +"\r\n");    

                             //fout.write("a ->" + "\"" + rsx.getString(6) + "\"" + "[penwidth=" +  rsx.getString(8)  +", label =" + rsx.getString(8) +" ];" + "\r\n");
                               fout.write("\"" + rs.getString("self_authors") + "\" ->" + "\"" + rs.getString("co_auths") + "\"" + "[penwidth=" +  rs.getString("1")  +", label =" + 1 +" ];" + "\r\n");

                             //System.out.println(rsx.getString(1));

                         }while(rs.next());

                         fout.write("}");
                         fout.close();
                     } 
```

我写的代码很长，无法解释，所以我只发布我遇到异常的部分。

例外情况是：

```
java.sql.SQLException: Before start of result set
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:975)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:920)
at com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:855)
at com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5773)
at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5693)
at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5733) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:58:58.710

我相信您发布的代码不会引发任何错误。当您尝试访问结果集数据而不将光标移动到第一条记录时，将返回此错误。

```
ResultSet rs = stm.executeQuery("SELECT * FROM authors_4 WHERE self_authors='"+getTxt+"'");

// Did you use rs.next() ???
while (rs.next())
{
   // You need rs.next() before trying to access 
   // Without rs.next(), you'll see the "Before start of result set" exception
   int myInt = rs.getInt(1);   
   ...
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:59:26.653

例外是告诉您将光标定位在第一行数据之前，然后从中请求数据。我不能确定这一点，因为您尚未发布请求数据的代码部分，但这是我看到此异常出现的唯一上下文。您需要致电：

```
rs.next(); 
```

将光标移动到第一行数据。

编辑：正如我所料，你在打电话`diva = Integer.parseInt(rs.getString("tot_pub"));`之前打电话 rs.next(); 所以它试图从数据库返回的第一行之前的行中获取一个字符串。只需`rs.next();`在拨打电话之前添加，您的问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:13:16.827

`do-while`循环体在计算表达式*之前执行。*`while`

这意味着您的光标不会在循环的第一遍中前进。您需要使用`while`循环：

```
while(rs.next()) {
   ...
} 
```

还可以考虑使用`PreparedStatement`来防止 SQL 注入攻击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T15:25:35.107

请将**while(rs.next())**替换为**while(rs.hasNext())**

在**Do-While 循环**中，第一条语句为**rs.next()**。

**rs.hasNext()**将检查 ResultSet 中的任何现有值，如果存在任何值，那么它将继续前进，否则它将退出循环。

```
Note: I will suggest to use **While loop** instead of a **Do-While loop**. 
```

希望这会有所帮助。

# css - 在 LESS 中，如何进行“规则插值”以生成浏览器特定代码？

> ID：15858684
> 
> 赞同：4
> 
> 时间：2013-04-07T03:53:07.970
> 
> 标签：css, less, css-animations

我正在使用新的 CSS3 动画属性，其中令人痛苦的部分是对于每种颜色效果，您必须拥有一整套

```
 @keyframes greenEffect {
      .effect(@green)
}

@-moz-keyframes greenEffect /* Firefox */ {
      .effect(@green)
}

@-webkit-keyframes greenEffect /* Safari and Chrome */ {
      .effect(@green)
} 
```

现在当我有 16 种颜色左右的时候，我真的不想复制 + 粘贴 16 块代码。16行已经够糟糕了。

为了减少工作量，我需要找到一种使用@rule 进行选择器插值的方法

我发现选择器插值语法在 1.3.1 之后是 @{VARIABLE-NAME}，但是与 @keyframes 或 @-moz-keyframes 一起使用时会引发编译错误

我对LESS很陌生，所以我尝试了类似的东西

```
.xBrowserEffect (@color, @className){
 @keyframes @{className} {
      .effect(@color)
}

@-moz-keyframes @{className} /* Firefox */ {
      .effect(@color)
}

@-webkit-keyframes @{className} /* Safari and Chrome */ {
      .effect(@color)
}

} 
```

有了这个我希望能够执行

```
.greenEffect{
  .xBrowserEffect (@green, greenEffect)
} 
```

LESS 将生成所有 3 个选择属性块

我想知道是否有人知道完成这项工作的不同方法。先感谢您。

我目前正在使用 lessc 1.3.3，但欢迎使用 less 1.4.0 的任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:14:13.643

从技术上讲，这不是“选择器插值”，而是“规则插值”。

`@rule`s 严格来说不是选择器，所以不支持。不过，我相信对此有现有的功能要求，如果不能随意创建一个。

# php - PHP中检查值是否为MySQL日期时间格式的快速方法？

> ID：15858685
> 
> 赞同：13
> 
> 时间：2013-04-07T03:53:09.617
> 
> 标签：php, string

有谁知道是否有内置或快速函数来检查字符串是否为 MySQL 日期时间格式？这是一个例子：

```
2038-01-19 03:14:07 
```

[http://dev.mysql.com/doc/refman/5.0/en/datetime.html](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T03:54:22.487

你可以试试看`DateTime::createFromFormat('Y-m-d H:i:s', '2038-01-19 03:14:07')`它是否返回false。[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-02T17:18:31.843

我喜欢epicdev的答案，但是，该课程似乎只验证格式，像 2015-18-39 这样的日期仍然对其有效，并转换为 2016-07-09 而不是拒绝无效的日/月更改为仔细检查解析的日期是否仍与输入的日期相同。

glavic 在 gmail dot com 在 php.net 文档上提出的功能

```
function validateDate($date, $format = 'Y-m-d H:i:s')
{
    $d = DateTime::createFromFormat($format, $date);
    return $d && $d->format($format) == $date;
} 
```

^(*[函数是从这个答案](https://stackoverflow.com/a/12323025/67332)或[php.net](http://www.php.net/manual/en/function.checkdate.php#113205)复制的*)

# android - Android Xamarin (VS 2012) 中的空引用异常

> ID：15858687
> 
> 赞同：1
> 
> 时间：2013-04-07T03:53:25.323
> 
> 标签：android, xamarin.android, xamarin

我只是在 VS 2012 中试用 Andorid Xamarin。我正在做他们的 Hello World 教程，但我遇到了一个问题。我以这种方式声明了我的主要布局资源：

![在此处输入图像描述](https://i.stack.imgur.com/VUGfF.png)

在我的活动中，每当我尝试通过他们的 id 查找资源时，它只会返回 null。

![在此处输入图像描述](https://i.stack.imgur.com/C00ZR.png)

两者`aButton`都`aLabel`为空。我不知道这个问题的原因是什么。你能帮我吗？谢谢。

PS：我还附上了我的资源设计师课程。我的对象在那里声明（眨眼）。

![在此处输入图像描述](https://i.stack.imgur.com/GeUiC.png)

编辑：这是更正的代码。 ![在此处输入图像描述](https://i.stack.imgur.com/5E2Mh.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T04:19:17.753

`SetContentView`您的方法中缺少调用`OnCreate`。

```
var layout = LayoutInflater.Inflate(Resource.Id.Main);
SetContentView(layout); 
```

第一行从资源 Main.axml 创建一个新视图。第二行设置活动的内容视图，以便它实际显示一些内容，因此后续调用`FindViewById<T>()`将能够找到视图。

# php - 从 facebook 评论元获取返回值

> ID：15858691
> 
> 赞同：0
> 
> 时间：2013-04-07T03:54:25.130
> 
> 标签：php, facebook, variables

我想获得我的博客文章的评论数量，我有两种方法可以让它显示出来。

第一个是我目前正在使用的，但它会导致功能`file_get_contents`出现问题，一段时间后会出现错误。

这是整个功能

```
<?php function fb_comment_count($url)
{
  $json = json_decode(file_get_contents('https://graph.facebook.com/?ids=' . $url));
  return ($json->$url->comments) ? $json->$url->comments : 0;
}
?> 
```

所以上面的代码工作正常没问题，但正如我所提到的，一段时间后会有一个错误。

我找到了另一种很好的方法，并且从未出错

```
<fb:comments-count href='<?php echo get_permalink($post->ID); ?>'></fb:comments-count> 
```

但我想要的是将正在显示的数字分配给一个变量，以便我可以使用它进行一些验证并稍后显示一些东西，但我不能这样做。

```
<?php echo $number_of_comment = "<fb:comments-count href='<?php echo get_permalink($post->ID); ?>'></fb:comments-count>"; ?> 
```

`echo`from 变量中没有显示任何内容`$number_of_comment`

有什么建议吗？

* * *

更新：

所以这就是我正在谈论的错误

> 无法打开流：HTTP 请求失败！HTTP/1.0 403 禁止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:15:38.393

好的，现在没关系，这是将其分配给变量的方法

```
<?php echo $number_of_comment = "<fb:comments-count href=" . get_permalink($post->ID) . " ></fb:comments-count>"; ?> 
```

# php - PDO 选择语句中的特殊字符

> ID：15858693
> 
> 赞同：0
> 
> 时间：2013-04-07T03:54:39.633
> 
> 标签：php, mysql, pdo

我问这个是因为我一直在为一个很可能有一个简单解决方案的东西而苦苦挣扎。我的问题是我正在尝试选择包含类似于“ss&246i”的唯一 ID 的记录。如果语句不包含 & 符号，它返回就好了，但如果它有一个，我就没有回报。这是我的代码来补充我的问题：

```
<?php
@session_start();

if (isset($_POST['code'])) {
    $id = $_POST['code'];
    $db = new PDO('mysql:host=localhost;dbname=example', 'example', '******');
    $db->exec("SET CHARACTER SET utf8");

    $sql = "SELECT * FROM tbl_human_readable WHERE unique_id = :id  LIMIT 1";
    $stmt = $db->prepare($sql);
    $stmt->bindValue(":id", $id);
    try {
        $stmt->execute();
    } catch (PDOException $e) {
        echo $e->getCode() . " - " . $e->getMessage();
    }

    $return = $stmt->fetchAll(PDO::FETCH_ASSOC);
    var_dump($return);
    if ($return) {
        $_SESSION['code'] = $id;
        echo "success"; 
    } else {
        echo "failed";
    }
} else {
    echo "failed";
} 
```

一如既往，非常感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T04:13:41.947

在解决问题时，程序员必须运用*知识*和*经验*。

知识会告诉他，任何特殊字符都不会影响格式正确的 PDO 查询。
所以，是时候尝试一些经验了。意味着一个人不仅盯着代码，而且*运行*它。出于验证假设的目的。

您假设 $_POST['code'] 包含文字`ss&246i`值。但你无法知道它是否真实——你从未验证过它。因此，您必须在脚本中放置一个验证码才能确定。

您假设数据库包含文字`ss&246i`值。但你无法知道它是否真实——你从未验证过它。因此，您必须运行一些代码来验证假设 - 尝试选择硬编码的文字值而不是发布的文字值。

这样，一一验证您的所有假设并找出哪些是错误的。因此，您可以自行解决问题，也可以在 Stack Overflow 上提出有意义的问题。

上述过程称为*调试*，是程序员工作的重要组成部分。

# jquery - CoffeScript 添加一个带有悬停的类

> ID：15858694
> 
> 赞同：1
> 
> 时间：2013-04-07T03:54:40.967
> 
> 标签：jquery, ruby-on-rails, coffeescript

我正在学习如何将 CoffeeScript 与 Ruby on Rails 一起使用。我有这个设置：

```
$ ->
  $this = $(this);
    $(".ind").hover(
  ->
      $this.addClass("hoverOver")
  ->
      $this.removeClass("hoverOver")
  ); 
```

我的css文件中有这个

```
.hoverOver {
  cursor:pointer;
  background-color:#fff;
} 
```

但它不起作用？如果我将代码更改为测试：

```
$ ->
  $this = $(this);
    $(".ind").hover(
  ->
      alert("in")
  ->
      alert("out")
  ); 
```

这行得通，但我不明白为什么添加一个类不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:57:41.143

看起来您正在将您的类添加到文档中，而不是您悬停的元素。您将 $(this) 分配给名为 $this 的 var，然后附加悬停回调，但使用 $this 附加类（在悬停回调之外定义）。您可以将 $this 更改为 $(this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T04:00:05.640

[正如 Jason 提到](https://stackoverflow.com/a/15858708)的，您将类添加到文档而不是元素中。修复代码的一种方法是这样的：

```
$ ->
  ind = $('.ind').hover \
    (-> ind.addClass 'hoverOver'), \
    (-> ind.removeClass 'hoverOver') 
```

我认为，这抓住了您的意图：缓存 jQuery 对象。但是，如果 class 有多个元素`ind`，则只要将其中任何一个悬停在上面，它就会执行所有这些元素。如果你不想这样，那么只需使用`$(this)`（或 CoffeeScript 的简洁且难以理解的缩写，`$(@)`）：

```
$ ->
  $('.ind').hover \
    (-> $(this).addClass 'hoverOver'), \
    (-> $(this).removeClass 'hoverOver') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T04:28:45.393

函数调用上的括号通常是可选的，但无论如何将它们放入可以使事情更清晰，更少噪音：

```
$('.ind').hover(
  -> $(@).addClass 'hoverOver'
  -> $(@).removeClass 'hoverOver'
) 
```

演示：http: [//jsfiddle.net/ambiguous/gXKTP/](http://jsfiddle.net/ambiguous/gXKTP/)

你也可以命名你的回调，这在你的回调变大时特别有用：

```
hover   = -> $(@).addClass 'hoverOver'
unhover = -> $(@).removeClass 'hoverOver'
$('.ind').hover hover, unhover 
```

演示：http: [//jsfiddle.net/ambiguous/kXcFM/](http://jsfiddle.net/ambiguous/kXcFM/)

或者只是去掉所有的噪音和使用[`toggleClass`](http://api.jquery.com/toggleClass/)以及单参数形式[`hover`](http://api.jquery.com/hover/#hover2)：

```
$('.ind').hover -> $(@).toggleClass 'hoverOver' 
```

演示：http: [//jsfiddle.net/ambiguous/gXKTP/](http://jsfiddle.net/ambiguous/gXKTP/)

我还在所有三种情况下都对目标元素进行了本地化，但[icktoofay](https://stackoverflow.com/a/15858720/479863)已经指出了这个问题。

# java - 房间同步：如何确保多个线程使用同一个节点？

> ID：15858699
> 
> 赞同：0
> 
> 时间：2013-04-07T03:55:15.617
> 
> 标签：java, c++, multithreading, synchronization

（维基的问题链接：[http](http://en.wikipedia.org/wiki/Room_synchronization) ://en.wikipedia.org/wiki/Room_synchronization ）

假设有 N 个 NODE 类型的资源，用一个数组表示

```
 NODE  nodearray[N]; 
```

假设有 M 个线程在起作用（读/写）。当第一个线程到达时，它可以自由选择 N 个资源中的任何一个，但只要第一个线程持有资源编号 x（x 为 0 到 n-1），第二个线程必须使用相同的 x。

假设我们要实现两个功能

```
int get();// gets the resource number for the thread and 
void ret();// returns the resource from the thread 
```

任何想法/提示如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:15:54.633

对于您所说的问题，我认为您只需要保留一个计数器，指示当前正在使用哪个（单个）资源以及使所有函数调用原子化的互斥锁.

（**编辑**：我最初在这里有代码，但它几乎与@Ajeet 在我发布此问题前几个小时在他对他自己的问题的回答中发布的代码相同。所以，如果你想要 C 中的代码，请查看@Ajeet 的答案。）

您提出的房间同步形式不是原作者所想的[（链接到 pdf）](http://www.cs.cmu.edu/~blelloch/papers/BCG03.pdf)。他们需要一个操作，调用者指定他们想要进入的房间。如果其他人在不同的房间，呼叫者需要*等待。*所以在这种情况下，我们有：

```
void enter(int roomnum);  // wait until everyone is out of all rooms other than roomnum
void exit(int roomnum);   // exit roomnum 
```

并且实现更有趣。（提示：除了上面的三个变量，你还需要一个条件变量。）

如果您想知道为什么其中任何一个都没有一点用处（我想知道）：在我链接到的论文中，他们正在尝试实现相对复杂的可扩展并发算法。他们提出了一种使用票自旋锁解决房间同步问题的方法（第 7 页）。并展示如何使用房间同步问题来实现可扩展的并发堆栈（第 4 页）。（并发堆栈的见解是：任意数量的线程可以使用 fetch-and-increment 同时推送，并且任意数量的线程可以同时使用 fetch-and-decrement 弹出，但是你需要确保没有同时发生推送和弹出。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:38:38.920

我有这个解决方案，但如果有人可以批评它会很棒。

```
int counter = 0;
int current = -1;
NODE  nodearray[N];
mutex m;

int get() {
  lock(m);
  if(!counter) {
    current = rand()%N;
  }
  ++counter;
  unlock(m);
  return current;
}

void ret() {
  lock(m);
  --counter;
  if(!counter) {
    current = -1;
  }
  unlock(m);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:50:06.577

如果我要实现这一点。我会在所有可用资源之上创建一个包装器。您的方案就像大小为 1 的资源池。

资源池实例将是静态的，并且将在其中定义 get 和 ret 方法。此资源池实现将在调用 get 时选择一个资源，并跟踪资源是否正在使用。如果正在使用它，则将始终返回相同的实例。如果它没有被使用，那么你可以释放资源[你甚至可以在释放资源之前设置一个超时]。

内部资源池实现可以根据类的选择而有所不同，如同步器、并发哈希图等。

# r - 2个csv文件返回不同的数据类型

> ID：15858702
> 
> 赞同：0
> 
> 时间：2013-04-07T03:55:48.483
> 
> 标签：r, csv

我有 2 个 csv 数据文件。1 分钟酒吧和其他 5 分钟酒吧。这两个文件的格式相同。

文件 1 是

```
> 2007-01-02 10:00:00.000,NIFTY,ABB,2007-01-02 10:00:00.000,750.4,750.4,750,750.2
  2007-01-02 10:01:00.000,NIFTY,ABB,2007-01-02 10:01:00.000,750.38,750.4,749.8,749.8
  2007-01-02 10:02:00.000,NIFTY,ABB,2007-01-02 10:02:00.000,749.8,750,749.6,750
  2007-01-02 10:03:00.000,NIFTY,ABB,2007-01-02 10:03:00.000,749.6,752.4,749.6,752
  2007-01-02 10:04:00.000,NIFTY,ABB,2007-01-02 10:04:00.000,752,755.8,752,754.2
  2007-01-02 10:05:00.000,NIFTY,ABB,2007-01-02 10:05:00.000,754.02,755,752.05,753.6
  2007-01-02 10:06:00.000,NIFTY,ABB,2007-01-02 10:06:00.000,753,753,751,751
  2007-01-02 10:07:00.000,NIFTY,ABB,2007-01-02 10:07:00.000,751,751.62,750.5,751
  2007-01-02 10:08:00.000,NIFTY,ABB,2007-01-02 10:08:00.000,750.8,751,750.2,750.62 
```

文件 2 是

```
 > 2007-01-02 10:00:00.000,NIFTY,ABB,2007-01-02 10:00:00.000,750.2,754.2,749.8,753.6
   2007-01-02 10:05:00.000,NIFTY,ABB,2007-01-02 10:05:00.000,753.6,753.6,750.62,752.8
   2007-01-02 10:10:00.000,NIFTY,ABB,2007-01-02 10:10:00.000,752.8,752.8,750.2,751.5
   2007-01-02 10:15:00.000,NIFTY,ABB,2007-01-02 10:15:00.000,751.5,752,751,751.6
   2007-01-02 10:20:00.000,NIFTY,ABB,2007-01-02 10:20:00.000,751.6,751.6,750.8,751
   2007-01-02 10:25:00.000,NIFTY,ABB,2007-01-02 10:25:00.000,751,751.2,749,749
   2007-01-02 10:30:00.000,NIFTY,ABB,2007-01-02 10:30:00.000,749,751.8,749,751.8
   2007-01-02 10:35:00.000,NIFTY,ABB,2007-01-02 10:35:00.000,751.8,752,751.1,751.4 
```

现在我运行 a <- read.csv("file1.csv")

class(a[,1:4]) 是因数

class(a[,5:8]) 是数字

而对于文件 2

b <- read.csv("file2.csv")

class(b[,1:4]) 是因子

class(b[,5:8]) 是因子。

列 5:8 的类别为何是因素。这个因素类型的数据不让我继续我的分析。任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T04:14:02.960

不看实际文件很难说。这些列中可能隐藏了一些字符。

要找出答案，请使用`stringsAsFactors = F`in 将`read.csv`因子作为字符来读取。接下来，使用 . 将字符列转换为数字`as.numeric`。这将引入 NA 代替实际字符。最后发现使用`is.na`

注意：可以使用 将因子类型转换为数字`as.numeric`，但在这种情况下会产生不希望的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T04:22:17.227

当我将您的示例数据粘贴到两个文件中并在 using 中读取这两个文件时`read.csv()`，前四列都是因子，第二组四列是数字，所以很遗憾，我无法复制您的问题。可能是文件中的某些内容未包含在您的示例中。

当我将“file2.csv”修改为：

```
2007-01-02 10:00:00.000,NIFTY,ABB,2007-01-02 10:00:00.000,750.2,754.2,749.8,753.6
2007-01-02 10:05:00.000,NIFTY,ABB,2007-01-02 10:05:00.000,753.6,753.6,750.62,752.8
2007-01-02 10:10:00.000,NIFTY,ABB,2007-01-02 10:10:00.000,752.8,752.8,750.2,751.5
2007-01-02 10:15:00.000,NIFTY,ABB,2007-01-02 10:15:00.000,751.5,752,751,751.6
2007-01-02 10:20:00.000,NIFTY,ABB,2007-01-02 10:20:00.000,751.6,751.6,750.8,751
2007-01-02 10:25:00.000,NIFTY,ABB,2007-01-02 10:25:00.000,751,751.2,749,749
2007-01-02 10:30:00.000,NIFTY,ABB,2007-01-02 10:30:00.000,749,751.8,749,751.8
2007-01-02 10:35:00.000,NIFTY,ABB,2007-01-02 10:35:00.000,a,b,c,d 
```

...我确实发现最后四列是作为因素读入的，因此这向我表明，在“file2.csv”的这些列中的某处可能存在非数字数据。

我还注意到你可能想要使用类似的东西：

```
a<-read.csv("file1.csv",header=F)
b<-read.csv("file2.csv",header=F) 
```

...为了避免将第一行转换为标题，但是，无论我有`header=F`没有改变结果。仅供参考，我在 Windows 7 64 位上使用 R 2.15.3。

# java - Android GPS 速度警报

> ID：15858703
> 
> 赞同：1
> 
> 时间：2013-04-07T03:55:54.743
> 
> 标签：java, android, performance, gps, location

我正在创建一个速度警报应用程序，并且我在创建过程中陷入了困境。我的速度显示正确，但我需要警报的设定速度不起作用。我想我把代码放在了错误的位置。我的代码是：

```
if( insetSpeed > intspeed);
{
    Toast.makeText(speedalert.this, "Over Speed!!", Toast.LENGTH_SHORT).show();
} 
```

所有变量都已转换为相同类型的 int。

只需要放置上面的代码。

非常感谢 :D

**编辑**

```
public void updateSpeed(Location location)
{
 float gpsSpeed = 0;

if( location!=null )
{ 
  gpsSpeed = ((location.getSpeed()*3600)/1000);
}

intspeed = (int)gpsSpeed;

TextView intSpeedTV = (TextView) findViewById(R.id.intSpeedTV);
intSpeedTV.setText(String.valueOf(strCurrentSpeed));

TextView SpeedTextView = (TextView) this.findViewById(R.id.SpeedTextView);

SpeedTextView.setText(String.valueOf(intspeed))

}

public void onLocationChanged(Location location)
{
if (location != null)
{
  Location myLocation = new Location(location);
  this.updateSpeed(myLocation);

  }
}

public void speedAlert(Location location)
{
  if( intspeed >= 2) ;
    {   
        Toast.makeText(SpeedAlert.this, "Over Speed!!", Toast.LENGTH_SHORT).show();
    }
} 
```

**编辑 2**

重写了代码：

```
public class SpeedAlert extends Activity 
{
    NumberPicker np;
    int setSpeed;
    String strsetSpeed;
    int intspeed;
    int intsetSpeed;
    LocationListener LocLis;
    LocationManager LocMan;

  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.speedalertmain);

    LocMan = (LocationManager) getSystemService (Context.LOCATION_SERVICE); 
    LocLis = new GetSpeeed(); 
    LocMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 0, LocLis); 

    np = (NumberPicker) findViewById(R.id.numberPicker1);
    final TextView setSpeedTV = (TextView) findViewById(R.id.setSpeedTV);

    np.setMinValue(0);
    np.setMaxValue(160);
    np.setWrapSelectorWheel(true);

    np.setOnValueChangedListener(new OnValueChangeListener() {

            @Override
            public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
                // TODO Auto-generated method stub

                String New = "";

            setSpeedTV.setText(New.concat(String.valueOf(newVal)));
            newVal = setSpeed;
            intsetSpeed = Integer.valueOf(setSpeed);
            }
    });
  }

  private class GetSpeeed implements LocationListener   
  {
  public void onLocationChanged(Location location) {
      if(location!=null) { 
          float gpsSpeed = 0;
            if(location.hasSpeed()){ 

            gpsSpeed = ((location.getSpeed()*3600)/1000);

            intspeed = (int)gpsSpeed;

            TextView SpeedTextView = (TextView) findViewById(R.id.SpeedTextView);
            SpeedTextView.setText(String.valueOf(intspeed));

            TextView intSpeedTV = (TextView) findViewById(R.id.intSpeedTV);
            intSpeedTV.setText(String.valueOf(intspeed));

            if( intspeed >= intsetSpeed) ;
            {   
                Toast.makeText(SpeedAlert.this, "Over Speed!!", Toast.LENGTH_SHORT).show();
            }

            } 
          } 
       }

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:34:48.300

从您发布的代码中，我相信您没有调用您的`public void speedAlert(Location location)`. 我建议你`public void onLocationChanged(Location location)`像这样更新你的：

```
public void onLocationChanged(Location location)
{
if (location != null)
{
  // Do you have to create a new Location instance?
  Location myLocation = new Location(location);
  this.updateSpeed(myLocation);
  this.speedAlert(myLocation);

  }
} 
```

我希望这有帮助。

# opengl-es - 如何在 OpenGL es 中复制纹理？

> ID：15858704
> 
> 赞同：1
> 
> 时间：2013-04-07T03:56:32.877
> 
> 标签：opengl-es

如何在 OpenGL ES 中将 1 个纹理分配给另一个纹理？

我有一个名为 Objects 的类，它有一个名为纹理的成员。它有一个复制构造函数来复制所有数据。如果我传递一个已经设置了纹理并分配它的对象，

```
texture = obj.texture 
```

这没用。我该怎么做才能让它发挥作用？

实际上它被称为gameObjects。这是复制构造函数

```
GameObject::GameObject(const GameObject &dummy)
{
orientation = dummy.orientation;
speed = dummy.speed;
deltax = dummy.deltax;
deltay = dummy.deltay;
position = dummy.position;
active =true;
name = dummy.name;
texture = dummy.texture;
rect = dummy.rect;
fixedWidthRatio = dummy.fixedWidthRatio;
fixedHeightRatio = dummy.fixedHeightRatio;

currentWidthRatio = dummy.currentWidthRatio;
currentHeightRatio = dummy.currentHeightRatio;

} 
```

# python - 获取唯一值的数量

> ID：15858707
> 
> 赞同：-1
> 
> 时间：2013-04-07T03:57:36.667
> 
> 标签：python, perl, awk

我有一些包含两列的文本文件。第一列是氨基酸的位置，第二列是氨基酸的名称。我想从所有文件中获取每个氨基酸的总数。我只需要独特的价值观。在以下示例中，LEU 的总数为 2（一个来自 file1，另一个来自 file2）。您的建议将不胜感激！

文件 1

```
54   LEU
54   LEU
78   VAL
112  ALA
78   VAL 
```

文件 2

```
54   LEU
113  ALA
113  ALA
12   ALA
112  ALA 
```

期望的输出

```
total no:of LEU - 2
total no:of VAL - 1
total no:of ALA - 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:01:07.133

如果您只有两个文件，只需使用`awk`：

```
awk '{ a[$2]++ } END { for (i in a) print "total no:of", i, a[i] }' <(awk '!a[$1,$2]++' file1) <(awk '!a[$1,$2]++' file2) 
```

如果你有很多很多文件，试试这个`awk`脚本。像这样运行：

```
awk -f script.awk file{1..200} 
```

内容`script.awk`：

```
{
    a[FILENAME,$1,$2]
}

END {
    for (i in a) {
        split (i,x,SUBSEP)
        b[x[3]]++
    }
    for (j in b) {
        print "total no:of", j, b[j]
    }
} 
```

或者，这是单线：

```
awk '{ a[FILENAME,$1,$2] } END { for (i in a) { split (i,x,SUBSEP); b[x[3]]++ } for (j in b) print "total no:of", j, b[j] }' file{1..200} 
```

结果：

```
total no:of LEU 2
total no:of ALA 4
total no:of VAL 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:05:32.650

```
name_dict = {}
for filename in filenames:
    fsock = open(filename, 'r')
    lines = fsock.readlines()
    fsock.close()
    for line in lines:
        a = line.split()
        key = a[-1]
        if name_dict[key]:
            name_dict[key] += 1 
        else:
            name_dict[key] = 1

for i in name_dict.items():
    print "total no:of ", i[0], " - ", i[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:05:52.977

```
with open('file1.txt', 'r') as f1, open('file2.txt', 'r') as f2:
    # open both files, then close afterwards
    data = f1.readlines().split() + f2.readlines.split()
    # read the data, then split it by spaces
d = {elem:data.count(elem) for elem in set(data[0::2])}
for i in d:
    print('total no:of {} - {}'.format(i, d[i])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T04:11:28.360

打开文件，读取一行，获取 protien 的名称，如果它存在于字典中，则添加 1 或附加到字典中。

```
protien_dict = {}
openfile = open(filename)
while True:
    line = openfile.readline()
    if line = "":
            break
    values = line.split(" ")
    if protien_dict.has_key(values[1]):
        protien_dict[values[1]] = protien_dict[values[1]] + 1
    else:
        protien_dict[values[1]] = 1
for elem in protien_dict:
    print "total no. of " + elem + " = " + protien_dict[elem] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T04:15:46.970

`collections.Counter`特别有用——你猜对了！——计算东西！：

```
from collections import Counter
counts = Counter()
for filename in filenames:
    with open(filename) as f:
        counts.update(set(tuple(line.split()) for line in f if line.strip())) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T04:42:07.113

您提到了 Python、Perl 和 Awk。

在所有三个中，想法都是一样的：使用散列来存储值。

*散列就像数组，除了每个条目都用一个键*而不是位置来索引。在散列中，只能有一个带有该键的条目。正因为如此，散列被用来检查之前是否出现过值。这是一个快速的 Perl 示例：

```
my %value_hash;
for my $value ( qw(one two three one three four) ) {
    if ( exists $value_hash{$value} ) {
       print "I've seen the value $value before\n";
    }
    else {
       print "The value of $value is new\n";
       $value_hash{$value} = 1;
    }
} 
```

这将打印出：

```
The value of one is new
The value of two is new
The value of three is new
I've seen the value of one before
I've seen the value of three before
The value of four is new 
```

首先，您需要两个循环：一个循环遍历所有文件，另一个循环遍历特定文件的每一行。

```
for my $file_name ( @file_list ) {
    open my $file_fh, "<", $file_name 
       or die qw(File $file_name doesn't exist);
    while (my $line = <$file_fh>) {
       chomp $line;
       ...
    }
} 
```

接下来，我们将介绍每个氨基酸总数的哈希值和这些氨基酸的跟踪哈希值：

```
use strict;
use warnings;
use autodie;

my %total_amino_acids;
my @file_list = qw(file1 file2);   #Your list of files

for my $file_name ( @file_list ) {
    open my $file_fh, "<", $file_name; 
    my %seen_amino_acid_before;  # "Initialize" hash which tracks seen
    while (my $line = <$file_fh>) {
       chomp $line;
       my ( $location, $amino_acid ) = split $line;
       if ( not %seen_amino_acid_before{$amino_acid} ) {
           $total_amino_acids{$amino_acid} += 1;
       }
    }
} 
```

现在，我假设当您说*unique*时，您仅在谈论氨基酸而不是位置。这`split`是拆分两个值，我只看氨基酸。如果位置也很重要，则必须将其包含在`%seen_amino_acid_before`散列的键中。这很棘手，因为我可以想象以下内容：

```
54    LEU
54 LEU
054.00  LEU 
```

这些是不同的字符串，但都具有相同的信息。您需要确保标准化位置/氨基酸键。

```
 while (my $line = <$file_fh>) {
       chomp $line;
       my ( $location, $amino_acid ) = split $line;
       my $amino_acid_key = sprinf "%04d-%s", $location, uc $amino_acid;
       if ( not %seen_amino_acid_before{$amino_acid_key} ) {
           $total_amino_acids{$amino_acid} += 1;
       }
    } 
```

在上面，我正在创建一个`$amino_acid_key`. 我使用`sprintf`将我的数字部分格式化为零填充的十进制和氨基酸为大写。这边走：

```
54    LEU
54 leu
054.00  Leu 
```

都是关键`0054-LEU`。这样，您在文件中输入数据的方式就不会影响您的结果。这可能是一个完全不必要的步骤，但您应该始终考虑这一点。例如，如果您的数据是计算机生成的，这可能不是问题。如果您的数据是由一群过度劳累的研究生在半夜输入的，您可能需要担心格式。

现在，您只需要一个循环来读取数据：

```
for my $amino_acid ( sort keys %total_amino_acids ) {
     printf "total no:of %4s - %4d\n", $amino_acid, $total_amino_acids{$amino_acid};
} 
```

请注意，我曾经`printf`帮助格式化总计，因此它们将被排列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T06:48:26.933

另外一个选项：

```
use strict;
use warnings;

my ( $argv, %hash, %seen ) = '';

while (<>) {
    $argv ne $ARGV and $argv = $ARGV and undef %seen;
    !$seen{ $1 . $2 }++ and $hash{$2}++ if /(.+)\s+(.+)/;
}

print "total no:of $_ - $hash{$_}\n" for keys %hash; 
```

数据集上的输出：

```
total no:of ALA - 4
total no:of VAL - 1
total no:of LEU - 2 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-07T07:28:27.893

只是 perl oneliner：

```
perl -anE'$h{$F[1]}++}{say"total no:of $_ - $h{$_}"for keys%h' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-07T09:23:53.700

```
ls file* | parallel 'sort -u {}  >> tmp' ; awk '{print $2}' tmp | sort | uniq -c 
```

这给出了输出：

4 阿拉巴马

2 低浓度铀

1 值

# msbuild - 如何在 MSBuild 中连接文件并保留制表符和空格

> ID：15858710
> 
> 赞同：12
> 
> 时间：2013-04-07T03:57:57.673
> 
> 标签：msbuild, msbuild-task

我试图在构建过程中连接一些文件，但我尝试的方式去掉了制表符和空格，使输出未格式化。

```
<CreateItem Include="Scripts\ApplicationModule.d.ts; Scripts\AccountModule.d.ts; Scripts\FeedModule.d.ts;">
  <Output TaskParameter="Include" ItemName="ApplicationDefinitionFiles" />
</CreateItem>

<ReadLinesFromFile File="%(ApplicationDefinitionFiles.FullPath)">
  <Output TaskParameter="Lines" ItemName="ApplicationDefinitionLines" />
</ReadLinesFromFile>

<WriteLinesToFile File="Scripts\ApplicationDefinition.d.ts" Lines="@(ApplicationDefinitionLines)" Overwrite="true" /> 
```

保存格式的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-10T09:14:11.663

当我遇到同样的问题时，这就是我最终的结果：

```
<Target Name="ConcatenateScripts">
  <!-- List all the files you want to concatenate. -->
  <ItemGroup>
    <ConcatFiles Include="
        Scripts\ApplicationModule.d.ts; 
        Scripts\AccountModule.d.ts;
        Scripts\FeedModule.d.ts;"/>
  </ItemGroup>

  <!-- Read the contents of the files (preserving tabs/spaces). -->
  <ItemGroup>
    <FileContents Include="$([System.IO.File]::ReadAllText(%(ConcatFiles.Identity)))"/>
  </ItemGroup>

  <!-- Write the result to a single file. -->
  <WriteLinesToFile File="Scripts\ApplicationDefinition.d.ts" Lines="@(FileContents)" Overwrite="true" />
</Target>

<!-- Concatenate scripts on AfterBuild. -->
<Target Name="AfterBuild">
  <CallTarget Targets="ConcatenateScripts"/>
</Target> 
```

这是[此博客文章](http://blogs.msdn.com/b/msbuild/archive/2005/09/29/475046.aspx)的修改版本，但使用`$([System.IO.File]::ReadAllText(...)`而不是`ReadLinesFromFile`任务，[如此答案](https://stackoverflow.com/a/9335100/121146)中所建议的那样。

# java - Spring Source Tool Suite 上无法显示断点

> ID：15858711
> 
> 赞同：1
> 
> 时间：2013-04-07T03:57:59.057
> 
> 标签：java, eclipse, sts-springsourcetoolsuite, mylyn

我在 Spring Source Tool Suite 2.9 中使用 Mylyn 任务管理。在 Breakpoints 窗口中，当我单击“Focus on Active Task”按钮时，新创建的 Java 断点都无法显示在此窗口上，Javascript 断点除外。

我认为这可能是 Spring Source Tool 的一个错误，因为它非常适合标准 Eclipse。或者我可能会错过一些配置以使其工作？请指教。谢谢。

# html - div不对齐

> ID：15858719
> 
> 赞同：0
> 
> 时间：2013-04-07T03:59:56.467
> 
> 标签：html, css, alignment

我在使用下面的 CSS 时遇到问题，我似乎无法让白框与品牌框对齐：

[实时网址](http://pyro.agrilife.co.nz/)

**HTML：**

```
 <div class="homeWrapper">
            <div class="homeWrapperContentLeft">
        <div id="default">
            <div class="content_inner">
            <h1><span class="color_red">Welcome</span>/h1>
            <p>
            </p>
        </div>
        <div class="brands">
            <h1><span class="color_red">Products</span> by Brand</h1>
            <table class="manufacturer_table" height="24" style="width: 100%;" width="242">
<tbody>
<tr>
<td>
</tbody>
</table>

<div class="homeWrapperContentLeftCenter">
    text
</div>
        </div>
        </div>
        </div>  
        </div> 
```

**CSS：**

```
.homeWrapperContentLeft{
    width:628x;
    height:825px;
    background-color: red;
}
.homeWrapperContentLeft .brands{
    float:left;
    width:251px;
    height:598px;
    padding: 12px; 
    clear: both;
}

.homeWrapperContentLeftCenter{
    float:left;
    width: 377px;
    height: 598px;
    background:#000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:04:10.330

**您在custom.css第****36**行有一个无效的 CSS ：

```
.homeWrapperContentLeft{
    width:628x; /* should be px not x */
    height:825px;
    background-color: red;
} 
```

在第**32**`66px`行，您已经给出了包装器的宽度。请将其更改为`auto`或`100%`。

```
.homeWrapper{
    padding: 12px;
    width:66px;
} 
```

* * *

接下来的事情是，你有这个`.homeWrapperContentLeft .brands`类有一个`float: left`并且你把它保持在一个非常低的宽度。删除`width`和`float: left;`。

```
.homeWrapperContentLeft .brands{
    float:left;
    width:251px;
    height:598px;
    padding: 12px; 
    clear: both;
} 
```

* * *

最后，`.homeWrapperContentLeftCenter`取出`.brand`. 这解决了你的问题。

# iphone - 搜索使用 MPMoviePlayerController 时应用程序崩溃

> ID：15858722
> 
> 赞同：1
> 
> 时间：2013-04-07T04:00:39.360
> 
> 标签：iphone, ios, mpmovieplayercontroller

这是我的问题，我尝试使用**MPMoviePlayerController**播放流视频，所以我准备将`MPMoviePlayerController`'s 视图放在我的自定义 viewController 中，将`controlStyle`属性设置为*MPMovieControlStyleNone*，并提供自定义播放器控制器，并在我的 init 方法中：

```
_moviePlayer = [[MPMoviePlayerController alloc] init];  
_moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;  
_moviePlayer.shouldAutoplay = YES;  
_moviePlayer.scalingMode = MPMovieScalingModeAspectFit;  
_moviePlayer.controlStyle = MPMovieControlStyleNone; 
```

并且我将自定义播放器控件放在 上`moviePlayer`，当我准备播放时，我从网络获取真实 URL 并让`moviePlayer`播放：

```
_moviePlayer.contentURL = [NSURL URLWithString:url];  
[_moviePlayer prepareToPlay]; 
```

然后我注册相关通知以报告发生了什么
我提供了简单的 seek 方法`seek`并调用了`moviePlayer`seek 方法，我发现当网络延迟很高时我尝试搜索，一段时间后，应用程序崩溃了。以及以下调用堆栈：

```
`0 CoreFoundation 0x381bd8a7 __exceptionPreprocess + 186  
1 libobjc.A.dylib 0x334ee259 objc_exception_throw + 32  
2 AVFoundation 0x37afb0dd -[AVPlayerItem _attachToPlayer:forImmediateEnqueueing:shouldAppendItem:] + 320   
3 AVFoundation 0x37af1edb -[AVPlayer _insertPlaybackItemOfItem:inPlayerQueueAfterPlaybackItemOfItem:] + 42  
4 AVFoundation 0x37af2c37 __block_global_0 + 1038  
5 libdispatch.dylib 0x34ae5c59 _dispatch_call_block_and_release + 12  
6 libdispatch.dylib 0x34ae7ee7 _dispatch_main_queue_callback_4CF$VARIANT$mp + 194
7 CoreFoundation  0x381902ad __CFRunLoopRun + 1268  
8   CoreFoundation  0x381134a5 CFRunLoopRunSpecific + 300  
9   CoreFoundation  0x3811336d CFRunLoopRunInMode + 104  
10  GraphicsServices0x365f6439 GSEventRunModal + 136  
11  UIKit 0x30fc4cd5 UIApplicationMain + 1080  
12  Player 0x000284dd main + 152  
13  Player 0x0001abb8 start + 40  
"Exception Name" = NSInvalidArgumentException  
"Exception Reason" = "An AVPlayerItem cannot be associated with more than one instance of AVPlayer` 
```

看到预期的原因，我想我可能会初始化 AVPlayer 的多个实例，但我只有一个 MPMoviePlayerController，任何人都可以为我指明方向吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:37:25.387

您没有显示任何代码，因此无法理解您的问题。问题是*你*做错了什么，所以如果你需要帮助，你必须准确地展示*你在做什么。*

但是，请注意 Apple 可能已经在帮助您。您收到的错误消息非常明确：

> "Exception Reason" = "一个 AVPlayerItem 不能与多个 AVPlayer 实例关联"

这可能是一个巨大的线索。考虑一下您可能如何违反该规则可能会很有用。

# android - UiScrollable 在 Android uiautomator 中不起作用

> ID：15858734
> 
> 赞同：6
> 
> 时间：2013-04-07T04:03:53.600
> 
> 标签：android, android-uiautomator

有人尝试过android`UITesting`框架`UIAutomator`吗？当我使用类“在*可滚动*`UiScrollabl`对象中查找某些对象时，如果*可滚动*对象的长度过长（需要滑动两次才能找到），则无法找到该对象，例如“开发人员选项”中的“设置”应用程序。有人有同样的问题吗？

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-04T22:32:11.450

我已经通过覆盖一个`UiScrollable`类来修复它。

```
public class UiScrollable extends com.android.uiautomator.core.UiScrollable {

    public UiScrollable(UiSelector container) {
        super(container);
    }

    @Override
    public boolean scrollIntoView(UiSelector selector) throws UiObjectNotFoundException {
        if (exists(getSelector().childSelector(selector))) {
            return (true);
        } else {
            System.out.println("It doesn't exist on this page");
            // we will need to reset the search from the beginning to start search
            scrollToBeginning(getMaxSearchSwipes());
            if (exists(getSelector().childSelector(selector))) {
                return (true);
            }
            for (int x = 0; x < getMaxSearchSwipes(); x++) {
                System.out.println("I'm going forward a page: " + x);
                if(!scrollForward() && x!=0) { // x!=0 is the hack
                    return false;
                }

                if(exists(getSelector().childSelector(selector))) {
                    return true;
                }
            }
        }
        return false;
    }    

} 
```

我已经从以下位置复制了源代码：[UiScrollable.java](http://android.googlesource.com/platform/frameworks/testing/+/jb-mr0-release%5E1/uiautomator/library/src/com/android/uiautomator/core/UiScrollable.java)（当心，它可能在某些时候已经过时了）并简单地改变了这一`if(!scrollForward() && x!=0)`行。

根据我的观察，对于 Google 的 ui 测试页面上滚动设置应用程序的应用程序屏幕的示例代码，该`scrollForwards()`方法在第一次尝试时失败。天知道为什么。

以上只是说如果它在第一个滚动时失败，则继续进行。如果它无法在第二个滚动上滚动，那么它实际上会返回失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-30T10:20:40.510

要查找视图中需要滚动的任何元素，我使用了下面提到的方法，它似乎工作正常。

```
public void searchForText(String searchText)
            throws UiObjectNotFoundException {
        UiScrollable textScroll = null;
        UiObject text = null;
        if (searchText != null) {
            textScroll = new UiScrollable(new UiSelector().scrollable(true));
            textScroll.scrollIntoView(new UiSelector().text(searchText));
            text = new UiObject(new UiSelector().text(searchText));
            text.click();
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T18:52:39.520

您能否提供更多详细信息，例如

*   你用的是哪个版本的adt？
*   正在/在哪个版本的 Android 上运行测试？

我问这些问题的原因是因为 UIAutomator 存在一些特定于版本的问题。例如，我发现在 Android 4.2.2 的设备上运行的滚动问题与您提到的类似。我编写了一个解决方法，如果标准的 Android 方法似乎找不到我期望可用的元素，我的代码会进行滚动。

我在这里复制了我的代码的精髓，您可以在[http://blog.bettersoftwaretesting.com/?p=84找到完整的示例](http://blog.bettersoftwaretesting.com/?p=84)

```
 // The following loop is to workaround a bug in Android 4.2.2 which
      // fails to scroll more than once into view.
      for (int i = 0; i < maxSearchSwipes; i++) {

          try {
              appToLaunch = appViews.getChildByText(selector, nameOfAppToLaunch);
              if (appToLaunch != null) {
                  // Create a UiSelector to find the Settings app and simulate      
                  // a user click to launch the app.
                  appToLaunch.clickAndWaitForNewWindow();
                  break;
              }
          } catch (UiObjectNotFoundException e) {
              System.out.println("Did not find match for " + e.getLocalizedMessage());
          }

          for (int j = 0; j < i; j++) {
              appViews.scrollForward();
              System.out.println("scrolling forward 1 page of apps.");
          }
      } 
```

注意：我不知道这段代码是否能解决您的问题，因为我没有您的应用程序示例。如果您能够发布您的测试和相关 UI 的 XML 布局，则可以更轻松地诊断问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-22T17:21:17.823

总的来说，我对 's 的运气`UiDevice`比`drag()`对`Scrollable`'s 方法的运气好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-24T02:16:19.413

我也遇到`getChildByText`了只滚动一次，我尝试追踪它。我发现根本原因可能来自系统。

当您调用 时`getChildByText`，其流程为：

```
getChildByText -> scrollIntoView -> scrollForward -> scrollSwipe 
```

在`scrollSwipe`，系统将运行滑动命令，等待，然后在当前屏幕中查找所有`AccessibilityEvent`并过滤。`AccessibilityEvent.TYPE_VIEW_SCROLLED`这一步让 UiScrollable 再次滚动或检查到底。

但是bug就在这里，系统无法正确返回`AccessibilityEvent`。

```
public boolean scrollSwipe(final int downX, final int downY, final int upX, final int upY,
        final int steps) {

    Runnable command = new Runnable() {
        @Override
        public void run() {
            swipe(downX, downY, upX, upY, steps);
        }
    };

    // Collect all accessibility events generated during the swipe command and get the
    // last event
    ArrayList<AccessibilityEvent> events = new ArrayList<AccessibilityEvent>();

    runAndWaitForEvents(command,
            new EventCollectingPredicate(AccessibilityEvent.TYPE_VIEW_SCROLLED, events),
            Configurator.getInstance().getScrollAcknowledgmentTimeout());

    //**Root cause**
    //Some times the events list size will be 0 ,
    //but in fact it can scroll again. 
    Log.e(LOG_TAG,"events size = " + events.size());

    AccessibilityEvent event = getLastMatchingEvent(events,
            AccessibilityEvent.TYPE_VIEW_SCROLLED);

    if (event == null) {
        // end of scroll since no new scroll events received
        recycleAccessibilityEvents(events);
        return false;
    }
    ...
    ..
    .
} 
```

我认为最好的方法是覆盖代码并定义合适的`MaxSearchSwipes`，如果项目超过这个大小，使测试失败。

```
public class UiScrollableFix extends UiScrollable {

public UiScrollableFix(UiSelector container) {
    super(container);
}

@Override
public boolean scrollIntoView(UiSelector selector) throws UiObjectNotFoundException {
    Tracer.trace(selector);
    // if we happen to be on top of the text we want then return here
    UiSelector childSelector = getSelector().childSelector(selector);
    if (exists(childSelector)) {
        return (true);
    } else {
        // we will need to reset the search from the beginning to start search
        scrollToBeginning(getMaxSearchSwipes());
        if (exists(childSelector)) {
            return (true);
        }

        for (int x = 0; x < getMaxSearchSwipes(); x++) {
            Log.e("test", "x=" + x);
            boolean scrolled = scrollForward();
            if (exists(childSelector)) {
                return true;
            }
            //For avoiding the scroll fail.
            // if (!scrolled && x!=0) {
            //     return false;
            // }

        }
    }
    return false;
}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-13T02:51:37.473

```
scrollableObject.scrollIntoView(btn_1);
try {if(scrollableObject.scrollIntoView(btn_1))
    btn_1.click();
}
catch (UiObjectNotFoundException e){
System.out.print("error1: "+e);
} 
```

不确定这是否可以帮助您，但这是我在我的应用程序中所做的。第一行是让它滚动，直到找到 btn_1，然后如果找到对象，它将执行单击它。**

# geolocation - Box API 将地理位置添加到文件夹和文件

> ID：15858742
> 
> 赞同：0
> 
> 时间：2013-04-07T04:04:51.810
> 
> 标签：geolocation, box-api

我正在使用 API 创建企业网络应用程序。我以为我在某处看到 Box.com 文件可以用位置数据标记以让它们显示在地图上，但我在 API 中找不到任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:24:31.997

目前还没有将地理数据添加到 Box 文件的特定约定。您可以将信息存储为文件的注释或文件描述的一部分，但不能保证该信息是持久的，因为用户可以修改它。最好将此信息存储在单独的数据库中。

# android - Android Google map V2: Binary XML file line #1: Error inflating class fragment

> ID：15858750
> 
> 赞同：4
> 
> 时间：2013-04-07T04:06:13.610
> 
> 标签：android, google-maps-android-api-2

在将 Google Map V2 与我的应用程序集成时，我面临膨胀类片段的错误。

我开始时，

1.  获得 SHA1 哈希并为 android 创建了映射键。
2.  将 google-play-services 作为库项目导入（复制到工作区）并添加为参考库。

我研究了各种解决方案，但没有解决我的问题。请问有人能帮我解决这个问题吗？帮助真的很明显。提前致谢！

```
04-07 09:14:56.387: E/AndroidRuntime(13151): FATAL EXCEPTION: main
04-07 09:14:56.387: E/AndroidRuntime(13151): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.toyota.dealerparking/com.toyota.dealerparking.GMapActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.os.Looper.loop(Looper.java:130)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at java.lang.reflect.Method.invoke(Method.java:507)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at dalvik.system.NativeStart.main(Native Method)
04-07 09:14:56.387: E/AndroidRuntime(13151): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.Activity.setContentView(Activity.java:1657)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at com.toyota.dealerparking.GMapActivity.onCreate(GMapActivity.java:11)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-07 09:14:56.387: E/AndroidRuntime(13151):    ... 11 more
04-07 09:14:56.387: E/AndroidRuntime(13151): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
04-07 09:14:56.387: E/AndroidRuntime(13151):    ... 19 more
04-07 09:14:56.387: E/AndroidRuntime(13151): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment in loader dalvik.system.PathClassLoader[/data/app/com.toyota.dealerparking-2.apk]
04-07 09:14:56.387: E/AndroidRuntime(13151):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-07 09:14:56.387: E/AndroidRuntime(13151):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
04-07 09:14:56.387: E/AndroidRuntime(13151):    ... 22 more 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.toyota.dealerparking"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.toyota.dealerparking.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature android:name="android.hardware.camera" />

    <uses-permission android:name="com.toyota.dealerparking.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <!--
     The following two permissions are not required to use
     Google Maps Android API v2, but are recommended.
    -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.toyota.dealerparking.GMapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my-key" />
    </application>
</manifest> 
```

GMapActivity.java

```
package com.toyota.dealerparking;

import android.app.Activity;
import android.os.Bundle;

public class GMapActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
    }
} 
```

地图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:04:52.363

在您的 XML 文件中，确保您已为类分配了正确的包名称。它可能是`class="com.example.yourClassName"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T08:42:32.870

在您的 XML 中尝试更改

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

经过

```
android:name="com.google.android.gms.maps.SupportMapFragment" 
```

# c# - 模拟到 .NET 中的可等待计时器

> ID：15858751
> 
> 赞同：7
> 
> 时间：2013-04-07T04:06:15.120
> 
> 标签：c#, .net, windows, timer, synchronization

在非托管 Win32 世界中，我习惯于使用[CreateWaitableTimer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682492%28v=vs.85%29.aspx) API 创建的可等待计时器，这些计时器可用于同步调用，例如[WaitForSingleObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)，主要用于[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)。

.NET 和 C# 中必须有一个可等待计时器的模拟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T04:47:00.527

你需要等待计时器做什么？

.NET 中“我可以等待的东西”的默认类是[`System.Threading.Tasks.Task`](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.task(v=vs.100).aspx). 在 .NET 4.5 中，您可以简单地使用[`Task.Delay(milliseconds)`](http://msdn.microsoft.com/en-us/library/vstudio/hh194873(v=vs.110).aspx).

在 .NET 4.0 中，您可以使用 a[`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174(v=vs.110).aspx)创建任务，并使用普通计时器将其设置为已完成。或者使用[Async Targeting Pack](http://www.microsoft.com/en-us/download/details.aspx?id=29576)或[AsyncBridge](http://omermor.github.io/AsyncBridge/)`TaskEx.Delay`中的实现

如果您需要实际的[`WaitHandle`](http://msdn.microsoft.com/en-us/library/system.threading.waithandle(v=vs.110).aspx)，您可以使用[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(v=vs.110).aspx), 并使用普通的 .NET 计时器来设置事件。

或者，您可以创建自己的派生自`WaitHandle`P/Invoke的类[`CreateWaitableTimer`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682492(v=vs.85).aspx)。.NET 框架中似乎已经存在这样的类，但它是内部的。（[`System.Runtime.IOThreadTimer.WaitableTimer`](http://referencesource.microsoft.com/#System.ServiceModel.Internals/System/Runtime/IOThreadTimer.cs#601)来自`System.ServiceModel.Internals.dll`）

```
public class WaitableTimer : WaitHandle
{
    [DllImport("kernel32.dll")]
    static extern SafeWaitHandle CreateWaitableTimer(IntPtr lpTimerAttributes, bool bManualReset, string lpTimerName);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetWaitableTimer(SafeWaitHandle hTimer, [In] ref long pDueTime, int lPeriod, IntPtr pfnCompletionRoutine, IntPtr lpArgToCompletionRoutine, [MarshalAs(UnmanagedType.Bool)] bool fResume);

    public WaitableTimer(bool manualReset = true, string timerName = null)
    {
        this.SafeWaitHandle = CreateWaitableTimer(IntPtr.Zero, manualReset, timerName);
    }

    public void Set(long dueTime)
    {
        if (!SetWaitableTimer(this.SafeWaitHandle, ref dueTime, 0, IntPtr.Zero, IntPtr.Zero, false))
        {
            throw new Win32Exception();
        }
    }
} 
```

# python - 开始下载，检查文件类型，取消下载

> ID：15858754
> 
> 赞同：1
> 
> 时间：2013-04-07T04:07:07.003
> 
> 标签：python, url, http-headers, mime-types

我想检查放置在某个 URL 上的文件的文件类型。现在我知道了两种方法：

1.  检查 URL 文件结尾（或至少`Location`来自 HTTP 请求响应）
2.  检查`Content-Type`（MIME 类型）

从这两个方面来看，第一个更不可靠，但第二个并不总是保证最好的结果。所以我想，难道不能在`GET`下载资源时发送请求并检查文件类型然后取消下载吗？

如果我开始在浏览器中下载文件，我也可以看到文件扩展名。这在 Python 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:17:42.710

如果你想要下载的文件扩展名，你可以检查`Content-Disposition`标题。一个典型的例子：

```
Content-disposition: attachment; filename=<downloadFilename> 
```

如果响应包含上述标头，您可以使用正则表达式获取文件名，然后执行您的操作。如果该标题不存在，您将不得不退回到您在问题中提到的方法。

如果您对下载的文件类型感兴趣，我建议坚持使用 MIME 类型——这更可靠（通常）

高温高压

# java - 实现linkedStack时出现NullPointerException

> ID：15858755
> 
> 赞同：1
> 
> 时间：2013-04-07T04:07:17.567
> 
> 标签：java, nullpointerexception, linked-list, stack

我得到一个

```
Exception in thread "main" java.lang.NullPointerException
    at datastructuresPart2.LinkedStack.pop(LinkedStack.java:20)
    at tests.StackTest.main(StackTest.java:66) 
```

尝试实现链接堆栈时。几乎相同的代码在不同的项目中工作，所以我不确定发生了什么。我将发布所有相关代码。（我已经成功地将它作为一个数组运行。但我需要使用一个链表......）

```
package datastructuresPart2;

import datastructuresPart2.Node;

public class LinkedStack<E> extends AbstractCollection<E> implements Stack<E> {

    private Node<E> top = null;

    @Override
    public void push(E element) {
        top = new Node<E>(element, top);
        size++;     
    }

    @Override
    public E pop() {
        if (isEmpty())
            throw new EmptyCollectionException("empty stack");
        E element = top.data;
        top = top.next;
        size--;
        return element;
        }

    @Override
    public E top() {
        if (isEmpty())
            throw new EmptyCollectionException("empty stack");
        return top.data;
    }

    @Override 
    public void clear() {
        super.clear();
        top = null;
    }

    public boolean contains(E element) {
        for (Node<E> current = top; current != null; current = current.next) 
            if (element.equals(current.data))
                return true;
        return false;
    }

    // Returns a string representation for this collection.
        @Override
        public String toString() {
            String buffer = "[";
            if (! isEmpty()) {
                buffer += top.data;
                for (Node<E> current = top.next; current != null; current = current.next)
                    buffer += ", " + current.data;
            }
            return buffer + "]";
        }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;

        if (getClass() != obj.getClass())
            return false;

        @SuppressWarnings("unchecked")
        LinkedStack<E> other = (LinkedStack<E>) obj;

        int count = 0;
        for (Node<E> trav = other.top; trav != null; trav = trav.next){

            if (top.getData().equals(trav.getData())) {
                count++;    
            }

            top = top.getNext();
        }

        if (count == size)
            return true;
        else
            return false;
    }
} 
```

我也使用：

```
/*
 * StackTest.java
 * This source file contains a class that tests the Stack interface and
 * implementation.
 */

package tests;

import datastructuresPart2.*;

public class StackTest {

    // Serves as the entry point for this application.
    public static void main(String[] args) {
        Stack<String> stk = new LinkedStack<>();
        Stack<String> stk2 = new LinkedStack<>();

        System.out.println("After creating a new stack...");
        CollectionTest.print(stk);
        System.out.println();

        stk.push("cat");
        stk.push("dog");
        stk.push("tree");
        stk.push("house");
        stk.push("boat");
        stk.push("woman");
        stk.push("man");
        stk.push("car");
        stk.push("pool");
        stk.push("motorcycle");
        stk.push("mailbox");

        System.out.println("After adding some elements...");
        CollectionTest.print(stk);
        System.out.println();

        System.out.println("After creating a new stack2...");
        CollectionTest.print(stk2);
        System.out.println();

        stk2.push("cat");
        stk2.push("dog");
        stk2.push("tree");
        stk2.push("house");
        stk2.push("boat");
        stk2.push("woman");
        stk2.push("man");
        stk2.push("car");
        stk2.push("pool");
        stk2.push("motorcycle");
        stk2.push("mailbox");

        System.out.println("The top element is " + stk.top());
        System.out.println("Does it contains a man? " + stk.contains("man"));
        System.out.println();

        System.out.println("Are the stacks equal? " + stk.equals(stk2));

//      System.out.println("Traversing the stack...");
//      for (String element : stk)
//          System.out.println(element);
//      System.out.println();

        System.out.println("Removing: " + stk.pop());
        System.out.println("Removing: " + stk.pop());

        System.out.println("After removing the top two elements...");
        CollectionTest.print(stk);
        System.out.println();

        System.out.println("Are the stacks equal? " + stk.equals(stk2));
        System.out.println();

        System.out.println("The top element is " + stk.top());
        System.out.println("Does it contains a man? " + stk.contains("man"));
        System.out.println();

        stk.clear();
        System.out.println("After clearing the stack...");
        CollectionTest.print(stk);
        System.out.println();

        System.out.println("Trying to get the top element...");
        try {
            System.out.println("The top element is " + stk.top());
        }
        catch (EmptyCollectionException e) {
            System.out.println("Error: " + e.getMessage());
        }
    }

} 
```

任何帮助是极大的赞赏！

编辑：

节点.java

```
package datastructuresPart2;

public class Node<T> {

    T data;
    Node<T> next;

    public Node(T data, Node<T> next) {
        this.data = data;
        this.next = next;
    }

    public T getData() { return data; }
    public void setData(T data) { this.data = data; }
    public Node<T> getNext() { return next; }
    public void setNext(Node<T> next) { this.next = next; }

    @Override
    public String toString() {
        return data + "--->" + next; //recursion implicita
    }

} 
```

AbstractCollection.java

```
package datastructuresPart2;

public abstract class AbstractCollection<E> implements Collection<E> {

    protected int size = 0;

    @Override
    public int size() { return size; }

    @Override 
    public void clear() { size = 0; }

    @Override
    public boolean isEmpty() { return (size == 0); }

    @Override public abstract boolean contains(E element);
    @Override public abstract String toString();
    @Override public abstract boolean equals(Object obj);

} 
```

编辑：和 Collection.java ...不妨把整个事情大声笑。

```
package datastructuresPart2;

public interface Collection<E> {

    int size();

    boolean isEmpty();

    boolean contains(E element);

    void clear();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:37:18.703

我很确定这正在发生，因为您的`equals()`实现正在修改堆栈的状态，这可能不是您想要的。您在失败的线路`equals()`之前调用。`pop()`

这里：

```
for (Node<E> trav = other.top; trav != null; trav = trav.next){

    if (top.getData().equals(trav.getData())) {
        count++;    
    }

    top = top.getNext();
} 
```

您正在更改的值，`top`如果您遍历整个堆栈`top`，则在此函数调用结束时将为空。重写`equals()`，使其不会修改对象的状态。

您可能还应该`size = 0`在您的`clear()`实现中设置和/或只是覆盖`isEmpty()`以检查是否`top==null`会更健壮地检查空性（例如，我认为您会在此处获得“堆栈为空”而不是空指针）。

# android - 获取联系人的照片

> ID：15858756
> 
> 赞同：0
> 
> 时间：2013-04-07T04:07:25.387
> 
> 标签：android, android-contacts

安卓 2.3.3

我在其中一个示例中找到了以下代码...

```
String image = cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_URI));

                if (image != null) {
                    contactViewHolder.imgContact.setImageURI(Uri.parse(image));
                } else {
                    contactViewHolder.imgContact
                            .setImageResource(R.drawable.addcontactsmall2);
                } 
```

但是，当我尝试运行应用程序时，它给了我一个 IllegalStateException。但是，在其他示例中，我没有在其他任何地方找到此 URI。这是获取联系人照片的正确方法吗？

这是我将光标放在 PHOTO_URI ::: 上时看到的内容

字符串 android.provider.ContactsContract.ContactsColumns.PHOTO_URI = "photo_uri"

```
 public static final String PHOTO_URI 
    Added in API level 11 
    A URI that can be used to retrieve the contact's full-size photo. 
If PHOTO_FILE_ID is not null, this will be populated with a URI based off CONTENT_URI. 
Otherwise, this will be populated with the same value as PHOTO_THUMBNAIL_URI. 
A photo can be referred to either by a URI (this field) or by ID (see PHOTO_ID).
If either PHOTO_FILE_ID or PHOTO_ID is not null, PHOTO_URI and PHOTO_THUMBNAIL_URI shall not be null (but not necessarily vice versa). 
Thus using PHOTO_URI is a more robust method of retrieving contact photos. 

    Type: TEXT

    Constant Value: "photo_uri" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T04:20:04.317

希望这会对您有所帮助（联系人由 getId() 识别）：

```
/**
 * @return the photo URI
 */
public Uri getPhotoUri() {
    try {
        Cursor cur = this.ctx.getContentResolver().query(
                ContactsContract.Data.CONTENT_URI,
                null,
                ContactsContract.Data.CONTACT_ID + "=" + this.getId() + " AND "
                        + ContactsContract.Data.MIMETYPE + "='"
                        + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'", null,
                null);
        if (cur != null) {
            if (!cur.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long
            .parseLong(getId()));
    return Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

用法是：

```
Uri u = objItem.getPhotoUri();
if (u != null) {
        mPhotoView.setImageURI(u);
} else {
        mPhotoView.setImageResource(R.drawable.ic_contact_picture_2);
} 
```

# php - 附加到文件...我需要锁定吗

> ID：15858760
> 
> 赞同：0
> 
> 时间：2013-04-07T04:09:05.120
> 
> 标签：php

PHP新手在这里

我正在创建一个网页，该网页通过附加到文本文件中来存储一些信息。每次网页加载时，都会有一个小的 php 脚本将信息添加到文本文件的末尾。我正在使用 file_put_contents。这是我的代码的非常简化的版本：

```
<?php
$file = "records.txt";
$current = file_get_contents($file);
$current .= "id = ". $_GET["id"]." \n";
file_put_contents($file, $current );
?> 
```

这是我的担忧...如果数百人打开我的网页，我的脚本是否能够捕获所有用户信息而不会错过任何人。这是极其重要的。

我害怕锁定它（使用 LOCK_EX），因为这意味着当新用户打开网页时，如果另一个用户正在写入脚本，则脚本将无法打开并附加到文本文件中，因此我不会能够捕获他的信息，这是一个大问题。

那么我应该忽略锁还是需要一个？我应该如何解决这个问题

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:47:53.107

Using a database will be very slow. Your problem sounds exactly like what log files do, they do it efficiently, are very well tested and are reliable. Some of them even support sets of files with a file size of your choosing. In theory you would just replace the error message with your data. Although I have not yet used it myself, I see references to log4j all over the place, so it's a good place to start. It uses Java. Java itself has a little logging system built into it that I have used with good results on a small job. You might even be able to treat log4j like a black box and use it for projects built with other languages.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:12:22.080

[`fopen()`](http://php.net/manual/en/function.fopen.php)与`a`开关一起使用。这将处理所有问题。

```
$handle = fopen("somefile.txt", "a"); 
```

根据您的要求，您不应该锁定文件，但这可能会使文件暴露于漏洞中。所以我会建议一个替代方案。

代替文件，在**数据库**中插入您想要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:14:01.047

它不是数据库，但类似于锁定。您可以使用队列来存储要写入文件的消息。它可以变得非常大。

# bash - 引号中的波浪号扩展

> ID：15858766
> 
> 赞同：5
> 
> 时间：2013-04-07T04:10:13.520
> 
> 标签：bash

我编写了一个脚本，其中必须在用户定义的目录中找到一些文件，这些文件可能包含波浪号（因此，可能有`user_defined_directory='~/foo'`）。构造看起来像

```
found_files=$(find "$user_defined_directory" -type f … ) 
```

我使用引号来覆盖该路径中的可能空格，但根据手册页，波浪号扩展在引号中不起作用。我知道`:`可能可以进行这种扩展的运算符，但我不知道如何在这里使用它。

'user-defined-directory' 取自用户 $HOME 目录中的另一个配置文件。它没有作为参数传递给我的脚本，而是从我编写的脚本中的另一个配置中解析出来的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T05:26:25.660

您可以使用`"${user_defined_directory/#~/$HOME}"`当前用户的主目录替换字符串开头的“~”。请注意，这不会处理`~username/subdir`格式，只会处理普通的`~`. 如果您需要处理更复杂的版本，则需要编写一个更复杂的转换器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T06:35:02.673

给出一些相当合理的假设，这是可行的，但它远非显而易见的代码（也不是单行代码）：

```
# Working function - painful, but can you simplify any of it?
# NB: Assumes that ~user does not expand to a name with double spaces or
#     tabs or newlines, etc.

expand_tilde()
{
    case "$1" in
    (\~)        echo "$HOME";;
    (\~/*)      echo "$HOME/${1#\~/}";;
    (\~[^/]*/*) local user=$(eval echo ${1%%/*})
                echo "$user/${1#*/}";;
    (\~[^/]*)   eval echo ${1};;
    (*)         echo "$1";;
    esac
}

# Test cases

name1="~/Documents/over  enthusiastic"
name2="~crl/Documents/double  spaced"
name3="/work/whiffle/two  spaces  are  better  than one"

expand_tilde "$name1"
expand_tilde "$name2"
expand_tilde "$name3"
expand_tilde "~"
expand_tilde "~/"
expand_tilde "~crl"
expand_tilde "~crl/"

# This is illustrative of the 'normal use' of expand_tilde function
x=$(expand_tilde "$name1")
echo "x=[$x]" 
```

在我的机器（有用户`crl`）上运行时，输出为：

```
/Users/jleffler/Documents/over  enthusiastic
/Users/crl/Documents/double  spaced
/work/whiffle/two  spaces  are  better  than one
/Users/jleffler
/Users/jleffler/
/Users/crl
/Users/crl/
x=[/Users/jleffler/Documents/over  enthusiastic] 
```

该函数`tilde_expansion`分别以不同的方式处理各种情况。第一个子句处理一个值`~`并简单地替换`$HOME`。第二种是偏执狂：`~/`被映射到`$HOME/`. 第三个处理`~/anything`（包括一个空的“任何东西”）。下一个案例处理`~user`. 包罗万象的`*`处理其他一切。

请注意，代码做出了（似是而非的）假设，即`~user`不会扩展为包含任何双空格、任何制表符或换行符（可能还有其他类似空格的字符）的值。如果你不得不面对它，生活将是地狱。

注意[`chdir()`home directory](https://stackoverflow.com/questions/9493234/chdir-to-home-directory/9493373#9493373)的答案，它解释了 POSIX 需要`~`扩展为 的当前值`$HOME`，但`~user`扩展为密码数据库中的主目录的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T04:20:44.847

波浪号绝对不会在引号内展开。可能还有其他一些 bash 技巧，但我在这种情况下所做的是：

```
find ~/"$user_defined_directory" -type f 
```

即从`~/`引号外开始移动并将其余路径保留在引号中。

# python - 用户将文件上传到 Google Cloud Storage 时如何获取创建的文件名？

> ID：15858769
> 
> 赞同：4
> 
> 时间：2013-04-07T04:10:57.170
> 
> 标签：python, google-app-engine, google-cloud-storage

当用户将图像上传到 Google Cloud Storage 时，我需要获取文件名（云中的散列名称，而不是用户的文件名）才能在之后删除文件。

我读过这个问题：

`BlobService.getUploads()``BlobStore.blobKeys`即使使用 GS 也会 返回。[https://code.google.com/p/googleappengine/issues/detail?id=8337](https://code.google.com/p/googleappengine/issues/detail?id=8337)

在 GAE SDK 1.7.5 发行说明中：

> Blobstore 服务现在在使用 Cloud Storage 时返回创建的文件名而不是 blobKey。

但是，我不知道如何通过 Blobstore 服务获取创建的文件名。

我的代码：

```
icon = self.get_uploads('icon')
if icon:
    blob_info = icon[0] 
    img_key = str(blob_info.key())
    img_filename = blob_info.filename
    img_size = blob_info.size
    img_type = blob_info.content_type
    img_creation = blob_info.creation
    img_url = images.get_serving_url(blob_info.key()) 
```

谢谢你的帮助。

**更新：**

最后我谷歌并得到问题：

`self.get_uploads('file')`[0]`BlobStore.blobKeys`即使在使用 GS 时也会返回。 [https://code.google.com/p/googleappengine/issues/detail?id=9051](https://code.google.com/p/googleappengine/issues/detail?id=9051)

魔法代码：

```
fileInfo = blobstore.parse_file_info(self.request.POST['file'])
logging.info(fileInfo.gs_object_name) 
```

有用！

所以我可以使用 gs_object_name 来删除文件：

```
files.delete(fileInfo.gs_object_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:55:26.093

现在有一个`get_file_infos`方法`BlobstoreUploadHandler`。

[如何获取通过 BlobstoreUploadHandler 上传的文件的 FileInfo/gcs file_name？](https://stackoverflow.com/questions/18116672/how-to-get-fileinfo-gcs-file-name-for-files-uploaded-via-blobstoreuploadhandler/20682293#20682293)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T09:13:42.300

而不是使用“文件名”，您可以只使用“blobKey”进行大部分操作，包括删除文件

# mysql - 使用带有rails表的resque的MySQL错误不存在

> ID：15858776
> 
> 赞同：1
> 
> 时间：2013-04-07T04:12:26.097
> 
> 标签：mysql, ruby-on-rails-3, resque, mysql2

编辑：好的，我已经在此存储库上发布了我的代码[https://github.com/willnance/doctor-self-study](https://github.com/willnance/doctor-self-study)

希望有人可以看看。我无计可施。我已经查看了我能找到的每一个示例，但无法弄清楚这一点。无论我如何更改`enqueue_at(`错误的参数都不会改变。如果我不传递任何参数并尝试传递，`enqueue_at(`那么我会 `wrong number of arguments 0 for 1` 在同一行 - 声明`perform`我的工作方法。绝对莫名其妙。

网上没有一篇关于这个特定错误的帖子。

此外，如果有人对如何调试它有任何建议，那就太棒了。我在 Windows 上使用开源 ruby​​ / rails 插件运行 netbeans 7.1 IDE，但找不到调试方法。

结束编辑。

我已经使用 resque_scheduler 设置了一个 rails 应用程序。我打算很快将它部署到heroku（使用漂浮在互联网上的漂亮的自动缩放代码），但我正试图在本地解决问题。我打开了 resque-web 界面，发现我有 10 个失败的工作（ - *_* - ）

它们都有完全相同的错误消息。我什至无法真正解决问题所在。它正在寻找 `doctor_self_study_development.id` ，这基本上是应用程序名称，环境，`.id.`我真的不明白为什么会这样。

```
Worker
PCNAME-HP:12188 on READY_QUEUE at just now Retry or Remove
Class
 SchedulerJob
Arguments
{"id"=>40}
Exception
ActiveRecord::StatementInvalid
Error
Mysql2::Error: Table 'doctor self study_development.id' doesn't exist: SHOW FULL FIELDS FROM `id`
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `query'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `block in execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql2_adapter.rb:211:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:257:in `execute_and_free'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:424:in `columns'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `yield'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `default'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `yield'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `default'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `block in build_from_hash'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `build_from_hash'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:13:in `block in build_from_hash'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `build_from_hash'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/query_methods.rb:327:in `build_where'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/query_methods.rb:136:in `where'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/relation/finder_methods.rb:264:in `find_by_attributes'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
C:/Users/Will Nance/Dropbox/Eclipse/Ruby on Rails Development/sample Heroku/app/jobs/scheduler_job.rb:8:in `perform' 
```

所以看到错误发生在 perform 方法中，这里是在这里进行提升的作业类：

```
#ALL jobs and models must extend the Autoscaling module for cheap Heroku deployment
require 'heroku_resque_auto_scale'
class SchedulerJob 
  extend HerokuAutoScaler::AutoScaling
  @queue = :ready_queue
  def self.perform(id)
    @assignment=Assignment.find_by_id(id)
    @assignment.sendAlertEmail
  end
end 
```

最后是带有`on_create`触发 enqueue_at()的回调的模型

```
require "scheduler_job"
#ALL jobs and models must extend the Autoscaling module for cheap Heroku deployment
require 'heroku_resque_auto_scale'
class Assignment  ActiveRecord::Base extend HerokuAutoScaler::AutoScaling
  belongs_to :user
  belongs_to :question
  attr_accessible :title, :body, :user_id, :question_id , :response , :correct
  after_create :queue_assignments
  before_destroy :remove_from_queue

  def grade
    self.correct = (response == self.question.solution) unless response == nil
  end
  def queue_assignments
    Resque.enqueue_at(self.question.schedule , SchedulerJob , :id => self.id)
  end
  def remove_from_queue
    Resque.remove_delayed(SchedulerJob, :id => self.id)
  end
  def sendAlertEmail
    QuestionMailer.question(self)
  end
  def as_json(options={})
    {
      :correct => correct,
      :created_at =>  created_at,
      :id => id, 
      :question_id => question_id,
      :response => response ,
      :updated_at => updated_at,
      :user_id => user_id,
      :question => self.question
    }
  end
end 
```

这里是`resque.rake`和`resque.rb`

resque.rake

```
require 'resque/tasks'
require 'resque_scheduler/tasks'
require 'resque_scheduler/server'
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*'
end
task "resque:scheduler_setup" => :environment do
  ENV['QUEUE'] = '*'
end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work" 
```

resque.rb

```
require 'resque_scheduler'
require 'resque/server'

ENV["REDISTOGO_URL"] ||=   "redis://redistogo:f95d214230c8ec72a902bbd2b519dbe3@spinyfin.redistogo.com:9192/"

require 'resque'
Dir["#{Rails.root}/app/jobs/*.rb"].each { |file| require file }

uri = URI.parse(ENV["REDISTOGO_URL"])
Resque.redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

我很感激对这里发生的事情的任何解释以及有关如何解决它的一些指示。

# c - 尝试获取指向 int 的指针时出现分段错误

> ID：15858777
> 
> 赞同：0
> 
> 时间：2013-04-07T04:12:33.233
> 
> 标签：c, segmentation-fault

尝试运行以下代码时出现分段错误

```
#include <stdio.h>

int main(){

    int* tes1;
    int* tes2;

    *tes1=55;

    *tes2=88;

    printf("int1 %p int2 %p \n",tes1,tes2);

    return 0;
} 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T04:20:05.053

您需要分配指针，否则它们指向垃圾内存：

```
int* tes1; //random initial value
int* tes2; //random initial value 
```

为了使它们指向可分配的内存，请使用以下`malloc`功能：

```
int* tes1 = malloc(sizeof(int)); //amount of memory to allocate (in bytes)
int* tes2 = malloc(sizeof(int)); 
```

然后您可以安全地使用指针：

```
*tes1=55;
*tes2=88; 
```

但是当你完成后，你应该使用以下`free`函数释放内存：

```
free(tes1);
free(tes2); 
```

这会将内存释放回系统并防止内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:17:27.580

您正在声明指针，然后尝试定义指针的指针值

```
#include <stdio.h>

int main(){

    int* tes1;
    int* tes2;
    tes1=55; //remove the * here
    tes2=88;
    printf("int1 %p int2 %p \n",tes1,tes2);

    return 0;
} 
```

# mysql - mysql if then else 更新过程

> ID：15858783
> 
> 赞同：0
> 
> 时间：2013-04-07T04:13:21.187
> 
> 标签：mysql, if-statement

我想要程序中的升级声明：

```
DROP PROCEDURE IF EXISTS `update` $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `update`
     (IN mobile VARCHAR(20), IN registered BOOLEAN, IN charge BOOLEAN, IN debit_mon INT)
BEGIN
 DECLARE chargeTime Datetime;
 DECLARE lastdayNow Integer;
 DECLARE lastdayNext Integer;

 SET lastdayNow =  DAY(now());
 SET lastdayNext =  DAY(LAST_DAY(now() + interval 1 month));

 IF lastdayNow > lastdayNext then
   SET chargeTime = LAST_DAY(now() + interval 1 month);
 ELSE
   SET chargeTime = now() + interval 1 month;
 END IF;

 UPDATE `chat_acc` SET
     `registered` = registered,
     `charge` = charge,
     `debit_mon` = debit_mon,
     CHARGE_TIME = chargeTime 
   WHERE `phone` =mobile;
END $$ 
```

我想添加案例检查字段`source`：

```
if  source = 'A' or source = 'B' then set Charge Time = now() + interval 1 week 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:21:30.560

假设字段名称是`source`. 尝试将其添加到您的存储过程中：

```
IF [source] = 'A' OR [source] = 'B' then
  SET chargeTime = now() + interval 1 week
END IF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:32:57.253

只是在这里猜测，但如果`source`是一个列，`chat_acc`你可以在你的声明中做这样的事情`UPDATE`：

```
UPDATE `chat_acc` SET
   `registered` = registered,
   `charge` = charge,
   `debit_mon` = debit_mon,
   CHARGE_TIME =
      CASE WHEN chat_acc.source IN ('A', 'B') THEN now() + interval 1 week
      ELSE chargeTime
      END
WHERE `phone` =mobile; 
```

# c# - WCF 底层连接已关闭：接收时发生意外错误

> ID：15858784
> 
> 赞同：9
> 
> 时间：2013-04-07T04:13:36.493
> 
> 标签：c#, wcf, wcf-rest

我正在使用 RestClient 应用程序与我的 WCF 服务进行通信。我收到以下异常

```
The underlying connection was closed: An unexpected error occurred on a receive. 
```

这是我使用的 C# 代码

```
 string q = string.Format(@"xxxxxxxxxxxxxxxxxxxxxxxxxxx");
            WebClient client = new WebClient();
            string Url = string.Format("{0}/Get?queries={1}", BaseUrl,HttpUtility.UrlEncodeUnicode(q));
            client.Headers.Add(HttpRequestHeader.ContentType, "application/json");
            var result = client.DownloadString(Url);
            Console.WriteLine("======================output================================");
            Console.WriteLine(result);
            Console.WriteLine("==========================================="); 
```

这是错误消息

```
System.Net.WebException was caught
  HResult=-2146233079
  Message=The underlying connection was closed: An unexpected error occurred on a receive.
  Source=System
  StackTrace:
       at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
       at System.Net.WebClient.DownloadString(Uri address)
       at System.Net.WebClient.DownloadString(String address)
       at RestClient.Program.GetRecordsTest() in C:\Users\Wiemon\Downloads\RestAppClient\RestAppClient\Program.cs:line 118
  InnerException: System.IO.IOException
       HResult=-2146232800
       Message=Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
       Source=System
       StackTrace:
            at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)
            at System.Net.Security._SslStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
            at System.Net.Security._SslStream.StartReading(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
            at System.Net.Security._SslStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
            at System.Net.Security._SslStream.Read(Byte[] buffer, Int32 offset, Int32 count)
            at System.Net.TlsStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
       InnerException: System.Net.Sockets.SocketException
            HResult=-2147467259
            Message=An existing connection was forcibly closed by the remote host
            Source=System
            ErrorCode=10054
            NativeErrorCode=10054
            StackTrace:
                 at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
                 at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            InnerException: 
```

这是我的绑定

```
<binding name="wsHttpEndpoint" >
                    <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16384" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                    <security mode="Transport">
                        <transport clientCredentialType="Certificate" />
                        <message clientCredentialType="Certificate" />
                    </security>
                </binding> 
```

还有我的端点行为，而不是我设置 maxItemsInObjectGraph="2147483647"

```
<behavior name="MyEndpointBehavior">
                    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                    <clientCredentials>
                        <clientCertificate findValue="xxxxxxxxxxxxxxxxxx" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My" />
                        <serviceCertificate>
                            <authentication certificateValidationMode="None" revocationMode="NoCheck" />
                        </serviceCertificate>
                    </clientCredentials>
                </behavior> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T04:28:59.220

它的常见（通用）消息。

您应该使用[Trace Viewer Tool](http://msdn.microsoft.com/en-us/library/ms732023.aspx) (SvcTraceViewer.exe) 找出服务器错误

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-10T12:46:58.013

我在 WCF 中的 http 绑定的深处也遇到了类似的错误。

客户端 -> 底层连接已关闭：接收时发生意外错误。

客户端 -> 无法从传输连接读取数据：现有连接被远程主机强行关闭。

服务器（在“procdump”的帮助下得到这个）-> 由于线程退出或应用程序请求，I/O 操作已中止

最终，经过几个小时后，我发现了 HTTP.sys 日志记录（在 C:\WINDOWS\System32\LogFiles\HTTPERR 中），我发现 WCF 自托管服务连接由于一个模糊的配置问题而被强制删除（故意） （每秒最小发送速率字节）。不幸的是，重新配置它又花了几个小时（你不能通过“netsh http add timeout”来做到这一点，所以你必须在应用程序内或非自托管时在 IIS 内进行）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-11T18:18:45.547

我不知道是否是相同的错误，但在我的情况下，异常发生在 Json 中，无法转换 Date 值，因为它是空的。

转换为 UTC 时大于 DateTime.MaxValue 或小于 DateTime.MinValue 的 DateTime 值无法序列化为 JSON。

跟踪查看器对于查找问题非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-18T08:31:57.223

在您的 app.config / web.config 中配置 WCF 跟踪并检查*Error.svclog*（它将在您的二进制文件附近创建）以获取详细信息。就我而言，这是因为使用了自动属性初始化程序（没有设置器的属性）—— [C# 6.0 的一个特性](https://msdn.microsoft.com/en-gb/magazine/dn802602.aspx)

```
<Message>No set method for property 'FailedCount' in type 'MyProject.Contracts.Data.SyncStatusByVersion'.</Message>
<StackTrace>   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.ThrowInvalidDataContractException(String message, Type type)
               at WriteSyncStatusByVersionToJson(XmlWriterDelegator , Object , XmlObjectSerializerWriteContextComplexJson , ClassDataContract , XmlDictionaryString[] )
               ...
</StackTrace> 
```

要配置 WCF 跟踪：

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true" >
        <listeners>
          <add name="xml"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="xml"/>
        </listeners>
      </source>
      <source name="myUserTraceSource" switchValue="Information, ActivityTracing">
        <listeners>
          <add name="xml"/>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="Error.svclog" />
    </sharedListeners>
</system.diagnostics> 
```

# mysql - 如何判断mysql插入是否成功

> ID：15858792
> 
> 赞同：5
> 
> 时间：2013-04-07T04:14:56.543
> 
> 标签：mysql

我正在学习 MySQL 事务。我已经搜索过这个问题的答案，但他们似乎都使用 PHP 来完成我想做的工作。这是我正在尝试做的示例：

1.  开始交易
2.  更新表 1
3.  插入表2
4.  如果插入成功，a. 然后插入 Table3 并提交。湾。否则回滚事务。

我不明白如何以编程方式确定步骤 3 中的插入是否成功。当然，我可以查询表并查看，但我认为有一些方法可以使用返回值，但似乎只有在我使用 PHP 进行事务时才有效。

这是我正在尝试的代码块 - 它不起作用：

```
begin;
start transaction;
-- attempt to reduce inventory
update store_inventory set item_qty = item_qty - 2 where id = 1; 
update store_inventory set item_qty = item_qty -1 where id = 5;

-- insert the order record and check whether it succeded
insert into store_orders (purchaser_name, purchase_date) 
values ('test user', now());
    -- if successful, do final insert and commit
if Row_Count() > 0 Then     
insert into store_inventory (order_id, inventory_id, item_qty)
values (1, 1, 2),
        (1, 2, 1);
commit;
else    -- otherwise rollback
rollback;
end if;

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:05:23.627

答案是 Itay Moav-Malimovka 和 Gordon 的答案的混合。

`start transaction`和之间的一切`commit`都是一个原子动作。就这样写吧：

```
start transaction;
-- attempt to reduce inventory
update store_inventory set item_qty = item_qty - 2 where id = 1; 
update store_inventory set item_qty = item_qty -1 where id = 5;

-- insert the order record
insert into store_orders (purchaser_name, purchase_date) 
values ('test user', now());
insert into store_inventory (order_id, inventory_id, item_qty)
values (1, 1, 2),
        (1, 2, 1);
commit; 
```

或者让我用一个更简单的例子来解释发生了什么。

```
create table foo(id int primary key);
insert into foo values (1); 
```

现在，如果你有这样的代码：

```
start transaction;
insert into foo values(2);
insert into foo values(1);
insert into foo values(3);
commit; 
```

插入值时会引发错误，`1`因为它违反了主键，`1`已经存在的条目并且永远不会执行后面的代码。如果你`select * from foo;`现在做，你会看到，`2`你的表中有一个值。但这可能只是你`2`在里面看到的，这取决于隔离级别（你可能想阅读那些）。这是因为交易仍在等待中。现在由您决定，如果您不关心并继续插入值`3`并提交或回滚。**但这**是在应用程序级别完成的。只需检查一个错误，如果一个被引发回滚，如果没有，一切都很好。**无需检查事务内部**，因为**如果**出现任何问题/**插入失败，将永远无法到达检查是否有任何失败的代码。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:37:15.323

您可能需要存储过程，但我可能错了这是一个要求。您需要自己设置交易并进行一些测试。

```
DELIMITER $$
CREATE PROCEDURE `sample`(name VARCHAR(100))
BEGIN
    START TRANSACTION; -- Begin a transaction
    INSERT INTO `users` (`name`) VALUES name;
    IF ROW_COUNT() > 0 THEN -- ROW_COUNT() returns the number of rows updated/inserted/deleted
        COMMIT; -- Finalize the transaction
    ELSE
        ROLLBACK; -- Revert all changes made before the transaction began
    END IF
END$$
DELIMITER ; 
```

像这样的东西可能会起作用（这是未经测试的，纯粹是从研究中拼凑起来的），您将不得不使用**InnoDB**作为存储引擎，因为**MyISAM**不支持事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:20:53.547

如果所有查询都在同一个事务中，那么它被认为是一个原子操作。要么**全部**成功，要么**全部**失败。
无需同时检查和使用交易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T04:39:24.230

如果您使用的是 java 和 JPA，您可以使用 `@TransactionManagement(TransactionManagementType.CONTAINER)`bean 中的注释来进行插入。这将确保如果事务失败，容器将撤消所有更改。您可以谷歌 EJB 3.0 以阅读有关事务管理的更多信息

# background - windows phone 8 后台代理

> ID：15858799
> 
> 赞同：1
> 
> 时间：2013-04-07T04:16:06.890
> 
> 标签：background, windows-phone-8, task

对于 Lumia 920 等 Windows Phone 8，设置/应用程序中有一个页面。点击“后台任务”，它列出了我安装的一些应用程序。我可以将它们配置为允许或阻止。我假设当我切换到其他应用程序时，那些启用的应用程序可以在后台运行。我正在开发一个音乐播放器。我需要这个功能。所以，例如，我正在听我的播放列表。当我按下主页按钮并切换到其他应用程序后，音乐播放结束然后停止。这是因为我的进程无法监听播放结束事件。谁能告诉我我能做些什么来保持我的逻辑运行。是否使用所谓的后台代理？它会自动显示在后台任务页面中吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:21:06.760

将 WindowsPhoneAudioPlaybackAgent 添加到您的项目中，并使用它来播放音乐。这是手册 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202978(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202978(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:20:16.720

从这个链接得到答案。它运作良好。我的应用程序列在后台任务/设置中。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx)

# php - URL 显示“404 未找到”，但文件下载

> ID：15858801
> 
> 赞同：1
> 
> 时间：2013-04-07T04:16:12.700
> 
> 标签：php, image, download, windows-server

我为客户构建了一个 Web 应用程序，然后将其传输到他的服务器。它不起作用，所以我不得不打电话给服务器公司并让他们修复它。他们很好，但现在我必须改变我所有的网络根。在执行此操作时，我发现了一个奇怪的错误，涉及到文件的 URL。我无法查看文件（如图像），但出现 404 错误：“无法显示页面，在此服务器上找不到请求的 URL。” 然而，与此同时，图像下载。我这辈子从来没有见过这种情况。我不想自动下载图像：我只想查看它。

有谁知道为什么会发生这种情况，以及如何防止它。

示例 URL 为[http://holyfamilyregina.com/CMS/downloads/images/cwl.png](http://holyfamilyregina.com/CMS/downloads/images/cwl.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:23:26.387

以下是我从您帖子中的图片中获得的标题：

```
HTTP/1.1 200 OK
Expires: Sun, 07 Apr 2023 04:18:16 GMT
Server: IceWarp/10.4.4
Date: Sun, 07 Apr 2013 04:18:16 GMT
Content-Type: application/octet-stream
Content-Length: 9797
Last-Modified: Sun, 07 Apr 2013 03:47:12 GMT 
```

没有 404，但文件的内容类型设置为`octet-stream`（8 位流），当您希望某人下载文件时使用。

您需要告诉您的服务器公司配置服务器，以便它提供带有正确`Content-Type`标题的图像。

# python - 如何从python中的字符串中获取纯文本？

> ID：15858803
> 
> 赞同：0
> 
> 时间：2013-04-07T04:16:45.867
> 
> 标签：python

有一个带有许多 html 标签的字符串，如下所示，
`u'find /home/tiger/workspace&nbsp; -name "[0-9]*"<br />find /home/tiger/workspace&nbsp; -name "[!0-9]*"<br />find /home/tiger/workspace&nbsp; -name "[^0-9]*"<br /><br />\u627e\u51fa\u6240\u6709\u5305\u542b\u6570\u5b57\u7684\u6587\u4ef6\uff0c\u4e0d\u5305\u542b\u6570\u5b57\u7684\u6587\u4ef6\u3002<br />tiger@debian:~$ find /home/tiger&nbsp; -name "*[0-9]*"&nbsp; &gt;kan1<br />tiger@debian:~$ find /home/tiger&nbsp; -name "[0-9]*"&nbsp; &gt;kan2<br />tiger@debian:~$ find /home/tiger&nbsp; -name "*[0-9]"&nbsp; &gt;kan3<br /><br /><br />\u5305\u542b\u6570\u5b57\uff0c\u6570\u5b57\u5f00\u5934\uff0c\u6570\u5b57\u7ed3\u5c3e'`

如何获取字符串中的纯文本以删除 html 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:10:14.283

使用[html2text](https://github.com/aaronsw/html2text)库：

```
>>> print html2text.html2text(s)
find /home/tiger/workspace&nbsp_place_holder; -name "[0-9]*"

find /home/tiger/workspace&nbsp_place_holder; -name "[!0-9]*"

find /home/tiger/workspace&nbsp_place_holder; -name "[^0-9]*"

找出所有包含数字的文件，不包含数字的文件。

tiger@debian:~$ find /home/tiger&nbsp_place_holder; -name
"*[0-9]*"&nbsp_place_holder; >kan1

tiger@debian:~$ find /home/tiger&nbsp_place_holder; -name
"[0-9]*"&nbsp_place_holder; >kan2

tiger@debian:~$ find /home/tiger&nbsp_place_holder; -name
"*[0-9]"&nbsp_place_holder; >kan3

包含数字，数字开头，数字结尾 
```

请参阅[使用 Python 从 HTML 文件中提取文本以](https://stackoverflow.com/questions/328356/extracting-text-from-html-file-using-python)供参考。

# c - 指针和解引用

> ID：15858814
> 
> 赞同：0
> 
> 时间：2013-04-07T04:19:10.110
> 
> 标签：c, visual-studio-2010, pointers, dereference

```
#include <stdio.h>
#include <stdlib.h>

struct integer2{
    int* valuePtr;
    struct integer2* next;
};
typedef struct integer2* intpointer2;

int main() {

    int value2 = 5;
    int* dpointer = &value2;
    intpointer2 intPtr2 = (intpointer2)malloc(sizeof(struct integer2));
    //intPtr2->valuePtr = (int*)malloc(sizeof(int));

    printf("Version1\n");
    intPtr2->valuePtr = value2; //dereference
    printf("intPtr2->valuePtr address %p\n",&intPtr2->valuePtr);
    printf("intPtr2->valuePtr value: %d\n", intPtr2->valuePtr);
    //print 5
    printf("--------------------------------------------\n");

    printf("Version2\n");
    intPtr2->valuePtr = &value2;
    printf("intPtr2->valuePtr address %p\n",&intPtr2->valuePtr);
    printf("intPtr2->valuePtr value: %d\n", intPtr2->valuePtr);
    printf("intPtr2->valuePtr value: %d\n", (*intPtr2).valuePtr);
    //print 1834136
    printf("--------------------------------------------\n");

    return 0;
} 
```

嗨，我有一个关于指针和取消引用的问题

在版本#1 中，当我输入时，`intPtr2->valuePtr = value2;` 我可以打印 5 的值

但是在版本#2 中，当我输入时，`intPtr2->valuePtr = &value2;` 我打印了一个奇怪的输出，例如 1834136

valuePtr 不是指针吗？我存储value2的地址应该没有问题。在版本＃1中，我只存储int，但我可以打印5的值。我不知道这个@@a

还有一个问题，1834136 是什么？它是一个无符号数字？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:44:37.160

您应该使用版本 2。但是：

```
printf("intPtr2->valuePtr address %p\n",&intPtr2->valuePtr);
printf("intPtr2->valuePtr value: %d\n", intPtr2->valuePtr); 
```

第一行应该是：

```
printf("intPtr2->valuePtr address %p\n",intPtr2->valuePtr); 
```

正如你所说，因为`valuePtr`已经是一个指针，否则你给它指针的地址，这不是你想要的。我很确定你想要指针指向的地址。

第二行应该是：

```
printf("intPtr2->valuePtr value: %d\n", *intPtr2->valuePtr); 
```

因为`intPtr2->valuePtr`是指针本身，但您仍然必须取消引用它才能获得实际的 int。做`(*intPtr2).valuePtr`就是`intPtr2->valuePtr`做的，`->`是该语法的简写，所以你仍然会留下`valuePtr`指针并且仍然必须取消引用它。

示例：http: [//ideone.com/Fh8wwr](http://ideone.com/Fh8wwr)

# ios - 在 Obj-c 中编辑 NBT

> ID：15858816
> 
> 赞同：1
> 
> 时间：2013-04-07T04:19:34.307
> 
> 标签：ios, objective-c, theos

我正在尝试在 iOS 上制作一个编辑 .dat 文件的应用程序，但我不完全确定如何编辑它，因为它采用 NBT 格式，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:12:17.843

这是[C 中的 NBT 库](https://github.com/FliPPeh/cNBT)，您必须删除解压缩/放气代码（因为 Minecraft Pocket 不压缩 level.dat 文件）并将其转换为 obj-c，但它应该适合您。

# matlab - 通过指定坐标生成弹丸运动

> ID：15858821
> 
> 赞同：1
> 
> 时间：2013-04-07T04:20:19.163
> 
> 标签：matlab, projectile

我想绘制通过 y 轴上指定坐标的射弹运动的一半，即正增加的一半，直到运动的中点或平均值的顶点。例如，通过指定从 (0, 0) 到 (1000,150) 并且仅绘制曲线的正半部分，因为另一半将是对称的。曲线前半部分的顶点触及 (1000,150)。有人可以发布代码吗。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:49:34.743

所以你正在寻找二次曲线

```
h(t) = a + b t + c t^2 
```

这样它通过点`(0,0)`和`(x,y)`：

```
0 = a                 #  ->  a = 0
y = a + b x  + c x^2  #  ->  y = x (b + c x) 
```

你还想要曲线的斜率

```
h'(t) = b + 2 c t 
```

在顶点为零`(x,y)`

```
0 = b + 2 c x         #  ->  b = -2 c x 
```

因此你有

```
y = x (-2 c x + c x)  #  ->  c = -y / x^2 
```

所以你想要的代码是

```
x = 1000;
y = 150;
a = 0;
c = -y/x^2;
b = -2*c*x;

t = 0:x;
h = a + b*t + c*t.^2;

plot(t,h)
grid 
```

这给了你这个情节：

![在此处输入图像描述](https://i.stack.imgur.com/I13Jx.png)

# android - 修改安卓源代码

> ID：15858827
> 
> 赞同：1
> 
> 时间：2013-04-07T04:21:28.690
> 
> 标签：android, android-emulator, android-activity, android-build

我对 Android 完全陌生。作为一个研究课程项目，我想对 Android 的活动管理器的源代码进行一些更改。我已经从[这里](http://source.android.com)下载了源代码并为模拟器构建了它。现在，首先，我想做一些非常简单的事情，例如将打印语句添加到我要修改的模块中。这只是为了确保我的更改真正显示效果。但我怎么能

1.  查看我所做的更改。在这种情况下，我在哪里可以看到我的打印语句打印的单词/句子？
2.  即使我做了这么小的改动，我是否需要使用“make”命令再次构建整个代码库？我不能只编译那个特定的类或文件吗？我尝试了“mmm”和“mm”，但它们似乎不起作用。即使我引入语法错误，一个人说“没有什么要构建”，另一个人说“找不到 android.mk 文件”
3.  我可以将自己的方法添加到 ActivityManager 类吗？

谢谢...

# javascript - 检查字符串中的空格

> ID：15858829
> 
> 赞同：3
> 
> 时间：2013-04-07T04:21:32.603
> 
> 标签：javascript, jquery

我想检查我的用户名是否包含空格，所以它会发出警报，所以我这样做它可以工作，但我面临的一个问题是，如果我在开始时给空间，那么它不会发出警报。我搜索它但找不到解决方案，我的代码是这个

```
var username    =   $.trim($('#r_uname').val());
var space = " ";
  var check = function(string){
   for(i = 0; i < space.length;i++){
     if(string.indexOf(space[i]) > -1){
         return true
      }
   }
   return false;
  }

  if(check(username) == true)
  {
     alert('Username contains illegal characters or Space!');
     return false;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T04:24:11.387

只需使用`.indexOf()`：

```
var check = function(string) {
    return string.indexOf(' ') === -1;
}; 
```

您还可以使用正则表达式将用户名限制为特定格式：

```
var check = function(string) {
    return /^[a-z0-9_]+$/i.test(string)
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T04:24:59.657

您应该使用正则表达式来检查空格字符`\s`：

```
if (username.match(/\s/g)){
    alert('There is a space!');
} 
```

请参阅此[jsFiddle](http://jsfiddle.net/5vzZf/1/)中的实际代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T04:32:49.630

为什么你不使用这样的东西？

```
if(string.indexOf(space) > -1){
     return true
  } 
```

# c++ - 对 Qt 主线程的 Marshal 调用

> ID：15858834
> 
> 赞同：2
> 
> 时间：2013-04-07T04:22:43.503
> 
> 标签：c++, qt, events

我将使用 Qt 的 libcommuni 包装在另一个不使用 Qt 的 DLL 项目中。据我所知，我需要运行 Qt 消息泵（通过`QCoreApplication`）以确保网络、信号等正常工作。但是，我在弄清楚如何做到这一点时遇到了一些问题。

基本上，我想在 DLL 中启动一个线程，它调用`QCoreApplication::exec()`和泵送所有 Qt 事件。然后，我想将对位于不同线程上的 DLL 的外部调用编组到 Qt 主线程，这样我就可以安全地使用 libcommuni。

看起来推荐的方法是为此使用信号和插槽，但我一直无法让它工作。`QObject`我在通过 DLL 调用的类上创建了一个信号，并将其连接到`QThread`运行 Qt 消息泵的插槽。但是，如果我`Qt::QueuedConnection`在连接信号和插槽时指定，则在发出信号时永远不会传递消息。如果我完全省略`Qt::QueuedConnection`，插槽会立即在调用线程而不是 Qt 主线程上调用。

我还尝试显式调用`QCoreApplication::postEvent()`DLL 线程以将事件发送到 Qt 主线程，但`event(QEvent)`从未在 target 中调用`QThread`。

关于我在这里做错了什么的任何想法？我猜我不太了解 Qt 的线程模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:16:54.823

当您在`QObject::connect`不指定连接类型的情况下使用时 - 它使用`Qt::AutoConnection`，`Qt::DirectConnection`如果信号和插槽在单个线程中，则变为`Qt::QueuedConnection`，如果它们在不同线程中，则变为 。因此，就您而言，我可以说，目前，当您将信号与插槽连接时，它们所属的对象位于一个线程中。

为了`Qt::QueuedConnection`工作，你需要一个线程中的事件循环，其中包含插槽。

使用 QThread 主要有两种方式：

1.  您可以派生`QThread`和重写`QThread::run`. 在这种情况下，您应该做几件事：

    *   创建线程对象时，不要指定父对象；手动删除此对象。
    *   在你线程的构造函数调用`moveToThread(this)`中。
    *   `run`在所有初始化之后但在所有删除之前，在您的线程的方法调用 exec 中；线程将`exec`在您调用后立即离开`QThread::quit`。
2.  您`QObject`可以在`QThread`调用.`QThread::moveToThread``QThread::start`

在您的情况下，我建议使用第二种方法。

那是关于线程的，但我不太确定，您的问题与`QCoreApplication::exec`.

# pycharm - 如何在pycharm中输出gunicorn日志

> ID：15858836
> 
> 赞同：1
> 
> 时间：2013-04-07T04:23:09.883
> 
> 标签：pycharm, gunicorn

我正在使用 Pycharm 2.7.1 和 gunicorn。当我运行 gunicorn 时，我添加了一个新的 Python 配置。然后我添加命令：

```
gunicorn_paster -c *.conf 
```

如果我想查看日志，我将打开终端并输入命令：

```
tail -f /var/gunicorn/username/gunicorn-error.log 
```

这不方便。我想直接在pycharm控制台中输出日志。那么，对于这个问题有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T06:44:21.163

PyCharm 中缺少此功能，请投票：

*   [运行配置中的 PY-8859](http://youtrack.jetbrains.com/issue/PY-8859)日志选项卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T10:33:05.550

在 pycharm 控制台中显示 gunicorns 访问日志的一种简单方法是使用该`--access-logfile -`选项。这会将访问日志通过管道传输到 stderr，从而传输到 pycharm 控制台窗口。注意末尾的“-”。

# cmake - 如何在 CMakeLists.txt 中禁用 CPACK_PACKAGE_VERSION_PATCH？

> ID：15858837
> 
> 赞同：4
> 
> 时间：2013-04-07T04:23:19.503
> 
> 标签：cmake, fedora, rpm, rhel, cpack

我还是一个`CMake`新手（3天前开始学习）。在我当前`CMakeLists.txt`，我有以下`set`指令：

```
[...]
SET(CPACK_GENERATOR "RPM")
SET(CPACK_PACKAGE_VERSION_MAJOR "3")
SET(CPACK_PACKAGE_VERSION_MINOR "3")
SET(CPACK_PACKAGE_VERSION_PATCH "svn")
SET(CPACK_SYSTEM_NAME "0.el6.x86_64")
[...] 
```

一旦我运行`make package`，我得到了一个`libcxx-3.3.svn-0.el6.x86_64.rpm`.

但恕我直言，这是“作弊”。

根据[http://fedoraproject.org/wiki/Packaging:NamingGuidelines#Package_Naming_and_Versioning_Guidelines](http://fedoraproject.org/wiki/Packaging:NamingGuidelines#Package_Naming_and_Versioning_Guidelines)，理想情况下我应该能够生成一个`libcxx-3.3-0.el6.x86_64.rpm`。但这要求`CPack`不显示`CPACK_PACKAGE_VERSION_PATCH`。

尽管如此，根据我的试验结果，这似乎并不可行。我将不胜感激有关如何的提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T17:58:55.660

您是否尝试将 CPACK_PACKAGE_FILE_NAME（不带扩展名）设置为所需的名称？提供它是为了在默认值不适合您的需要时，您可以定义自己的包命名方案。有关关键 CPack 变量及其作用的更多详细信息，请参见[http://www.cmake.org/Wiki/CMake:CPackConfiguration 。](http://www.cmake.org/Wiki/CMake:CPackConfiguration)

# c++ - C++ 井字游戏的 AI 问题

> ID：15858844
> 
> 赞同：0
> 
> 时间：2013-04-07T04:24:45.327
> 
> 标签：c++, artificial-intelligence

所以我的井字游戏的人工智能有一些问题。人工智能是纯粹的防御性的，所以它总是会阻止你。它通常最初适用于我的第一种情况，因此例如，如果我先播放左上角然后播放中上角，它将始终位于右上角。其他情况，比如我玩两条对角线，可能会冻结游戏，或者让我再转一圈。这些问题只有在我实现了我的错误智能 AI 之后才出现。最初，该程序有一个“愚蠢的 AI”，它会选择随机点，正如您将在代码底部看到的那样。此外，我认为问题在于某些阻塞条件可能会相互冲突并导致问题。我怎样才能解决这个问题？相关代码如下： *坐标基于井字格，左上角为（0，*

```
void Game::AIGetNextMoveRand()
{
    //top row
    if(GetSquareState(0,0) == O && GetSquareState(1,0) == O)
    {
        do
        {
            AIMoveX = 2;
            AIMoveY = 0; 
        }
            while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);

    }
    else if(GetSquareState(2,0) == O && GetSquareState(1,0) == O)
    {

        do
        {
            AIMoveX = 0;
            AIMoveY = 0;
        }
            while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //middle row
    else if(GetSquareState(0,1) == O && GetSquareState(1,1) == O)
    {
        do
        {
        AIMoveX = 2;
        AIMoveY = 1;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(2,1) == O && GetSquareState(1,1) == O)
    {
        do
        {
        AIMoveX = 0;
        AIMoveY = 1;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);    
    }
    // bottom row
    else if(GetSquareState(0,2) == O && GetSquareState(1,2) == O)
    {
        do
        {
            AIMoveX = 2;
            AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(2,2) == O && GetSquareState(1,2) == O)
    {
        do
        {
        AIMoveX = 0;
        AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    // vert 0
    else if(GetSquareState(0,0) == O && GetSquareState(0,1) == O)
    {
        do
        {
        AIMoveX = 0;
        AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(0,2) == O && GetSquareState(0,1) == O)
    {
        do
        {
            AIMoveX = 0;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    // vert 1
    else if(GetSquareState(1,0) == O && GetSquareState(1,1) == O)
    {

        do
        {
            AIMoveX = 1;
            AIMoveY = 2;
        }
            while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(1,2) == O && GetSquareState(1,1) == O)
    {
        do
        {
            AIMoveX = 1;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //vert 2
    else if(GetSquareState(2,2) == O && GetSquareState(2,1) == O)
    {
        do
        {
            AIMoveX  = 2;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(2,0) == O && GetSquareState(2,1) == O)
    {
        do
        {
            AIMoveX = 2;
            AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    // diagonal 1
    else if(GetSquareState(0,0) == O && GetSquareState(1,1) == O)
    {

        do
        {
            AIMoveX = 2;
            AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(2,2) == O && GetSquareState(1,1) == O)
    {

        do
        {
            AIMoveX = 0;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //diagonal 2
    else if(GetSquareState(0,2) == O && GetSquareState(1,1) == O)
    {
        do
        {
            AIMoveX = 0;
            AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    else if(GetSquareState(0,2) == O && GetSquareState(1,1) == O)
    {
        do
        {
            AIMoveX = 2;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    // mid 0
    else if(GetSquareState(0,0) == O && GetSquareState(2,0) == O)
    {

        do
        {
            AIMoveX = 1;
            AIMoveY = 0;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //mid 1
    else if(GetSquareState(1,0) == O && GetSquareState(2,1) == O)
    {
        do
        {
            AIMoveX = 1;
            AIMoveY = 1;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    // mid 2
    else if(GetSquareState(0,2) == O && GetSquareState(2,2) == O)
    {
        do
        {
            AIMoveX = 1;
            AIMoveY = 2;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //diag 1
    else if(GetSquareState(0,0) == O && GetSquareState(2,2) == O)
    {
        do
        {
            AIMoveX = 1;
            AIMoveY = 1;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }
    //diag 2
    else if(GetSquareState(2,0) == O && GetSquareState(0,2) == O)
    {

        do 
        {
            AIMoveX = 1;
            AIMoveY = 1;
        }
        while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
    }

    else 
    {
    do 
    {
        AIMoveX = rand() % 3;
        AIMoveY = rand() % 3;
    }while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);

    }
    }

void Game::DoAITurnRand()
{
    AIGetNextMoveRand();
    SetSquareState(AIMoveX,AIMoveY,activePlayer);
    EndTurn();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:21:19.517

do while 循环是垃圾。考虑一下，如果您的规则做出了错误的选择（即试图在填充的方格上进行游戏），那么再次做出**同样**的错误选择将无济于事。事实上，这就是你得到“冻结”的原因。您需要重新组织代码的逻辑。我建议如果你的 AI 选择了一个非法方块，那么你应该回到你的随机选择代码，那么至少你会得到一个合法的举动。

像这样的东西

```
// no move selected yet
AIMoveX = -1;
AIMoveY = -1;

// AI rules
if(GetSquareState(0,0) == O && GetSquareState(1,0) == O)
{
    AIMoveX = 2;
    AIMoveY = 0; 
}
else if(GetSquareState(2,0) == O && GetSquareState(1,0) == O)
{
    AIMoveX = 0;
    AIMoveY = 0;
}
// lots more rules
...

// check for fallback to random move
if ((AIMoveX == -1 && AIMoveY == -1)             // if no rules applied
    || GetSquareState(AIMoveX,AIMoveY) != EMPTY) // or if the square is not empty
{
    // pick a random square
    do 
    {
        AIMoveX = rand() % 3;
        AIMoveY = rand() % 3;
    }
    while(GetSquareState(AIMoveX,AIMoveY) != EMPTY);
} 
```

我最初将 AIMoveX 和 AIMoveY 设置为 -1 表示尚未选择任何规则。如果在通过所有规则后它们仍然是-1，那么我知道没有选择任何规则，我必须做出随机选择。如果确实选择了一条规则，但它选择了一个非空方格，那么我也会随机选择。我在代码末尾测试了这两个条件。

您必须仔细考虑您编写的代码到底做了什么。仅仅在一个地方放置一个 do while 循环，因为它在另一个地方工作是不对的。

# javascript - 使用 emberjs 和 turbolinks，能介绍一下如何使用吗？

> ID：15858848
> 
> 赞同：2
> 
> 时间：2013-04-07T04:26:06.757
> 
> 标签：javascript, ruby-on-rails, ember.js, turbolinks

我正在尝试在我的应用程序中使用带有 turbolinks 的 Emberjs 框架。但我无法在 Google 中搜索教程。能介绍一下使用方法吗？

并给我介绍一下“Using emberjs with turbolinks”的教程？比如web size、book等。

我想找到类似的答案：[Using angularjs with turbolinks](https://stackoverflow.com/questions/14797935/using-angularjs-with-turbolinks/14798302#14798302)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T05:59:26.860

我们遇到了类似的问题，并添加了一个 hack 来防止这种情况。

[https://gist.github.com/MiguelMadero/7309675](https://gist.github.com/MiguelMadero/7309675)

基本思想是，如果您转到 Ember 处于活动状态的页面以外的页面，则停止 Ember 运行，然后监听 page:change 事件（每次 turbolinks 导航）并尝试启动 ember。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-10T11:01:57.263

Ember.js 和 turbolinks 不能很好地协同工作。

我在 rails 4 应用程序中使用了 turbolinks 和 emberjs（默认情况下包含 turbolinks），这对我造成了错误。特别是当我使用浏览器后退按钮时。Turbolinks 导致页面在不应该重新加载时重新加载，从而阻止 ember 呈现模板。

更多信息也在这里：[Ember.js with Rails4: browser back button crash ember application](https://stackoverflow.com/questions/18142401/ember-js-with-rails4-browser-back-button-crash-ember-application-solved)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T16:35:15.903

Ember 与 Angular 非常不同，虽然相似，但它们不能直接比较。简而言之，Angular 是一个 HTML 编译器，而 Ember 是一个成熟的框架。仅仅因为有一种方法可以将 Turbolinks 与 Angular 结合在一起，并不意味着该技术也可以直接应用于 Ember（除非另有证明）。

如果您已经在客户端中进行渲染，我看不到使用 Turbolinks 的好处。从我看到的 stackoverflow 问题来看，将 Turbolinks 与客户端渲染混合使用的麻烦将超过您可以从中获得的任何好处。

为了更好地理解这两种技术，我推荐：[Turbolinks 和布拉格咖啡馆效应](http://eviltrout.com/2013/01/06/turbolinks-and-the-prague-effect.html)，扫一扫评论到！

# sitecore - sitecore：序列化和包设计器

> ID：15858850
> 
> 赞同：1
> 
> 时间：2013-04-07T04:26:57.753
> 
> 标签：sitecore, sitecore6

我在 Sitecore 中创建了大量数据（由用户而非开发人员创建的内容）。我知道为了将大量数据从一个环境传输到另一个环境，我需要先序列化所有内容。

我的问题是，序列化内容后，是否需要创建一个包含我要移动的数据的设计器包？还是序列化后，我使用序列化文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T13:46:06.647

序列化是一个选项，但您也可以通过包设计器创建一个包，下载它并将其安装在其他环境中。

如果要安装大包，最好`Indexing.UpdateInterval`将 web.config 中的值设置为 00:00:00，以防止在包安装期间启动 Lucene 索引器，这会导致安装时间更长。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T07:32:53.247

您无需创建包，使用 serliazied 文件并通过 UI 进行更新，如下所示。

要从文本文件更新项目：

1.  在内容编辑器中，选择要更新的项目。
2.  在“开发人员”选项卡的“序列化”组中，单击“更新项目”。

要从文件系统更新项目及其所有子项目：

1.  在内容编辑器中，选择要更新其所有子项的父项。
2.  在“开发人员”选项卡的“序列化”组中，单击“更新树”。

要更新整个数据库：

1.  在内容编辑器中，选择任何项目。
2.  在开发人员选项卡的序列化组中，单击更新数据库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T11:06:08.050

您还可以使用“将项目转移到另一个数据库”功能。

只需选择您想去的数据库，进入控制面板，数据库，将项目转移到另一个数据库。

这将打开一个向导。然后您可以选择源项目（您想要传输到另一个数据库的项目），然后选择目标数据库并选择您希望项目在树中的位置（即在 Home 或某个其他节点下）。

有关更多信息，您可以访问[Sam J. Griffin 的这篇博文](http://www.samjgriffin.com/blog/?p=221)，其中逐步解释了它。

不过，一个非常重要的旁注 - 如果您想做所有模板，请不要复制 /sitecore/templates/sytem。这将导致一些循环引用问题。如果它只是您要复制的内容，那应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T13:58:38.197

如果您有闲置的 149 美元，那么您还应该看看 Hedgehog 的新 Sitecore 同步工具：

[http://www.hhogdev.com/Products/Razl.aspx](http://www.hhogdev.com/Products/Razl.aspx)

# android - FragmentTransaction.Replace 时，Fragment 在哪里保存其状态？

> ID：15858854
> 
> 赞同：1
> 
> 时间：2013-04-07T04:27:56.993
> 
> 标签：android, android-layout, android-fragments, android-fragmentactivity, fragmenttransaction

*背景：左侧有一个菜单，右侧有不同的可滚动内容。我想保存滚动位置。但我失败了。然后 ...*

我已经建立了一个非常简单的项目来测试它。

换句话说，我在左边有一个菜单，不同的内容都`<EditText>`在右边。（虽然属于同一类，但它们属于不同的实例）

在代码中，*（非常简单）*

**内容.xml**

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="Please save my text ..." /> 
```

**内容片段.java**

```
package ... import ...

public class ContentFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.content, container, false);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        System.out.println("Why this is NOT called ?");
        Log.v("onSaveInstanceState()", "outState = " + outState);
    }
} 
```

和程序生成的**MenuFragment.java**

```
package ... import ...

public class MenuFragment extends ListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, new String[]{"Item 1", "Item 2", "Item 3"}));
    }
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        ((MainActivity) getActivity()).click();
    }
} 
```

最后，我们的**MainActivity.java**

```
package ... import ...

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (savedInstanceState == null)
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.menu, new MenuFragment()).commit();
    }
    public void click() {
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.content, new ContentFragment()  // everytime load a new instance
                ).addToBackStack(null).commit();
    }
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        System.out.println("... and this is NOT called neither :-/");
        Log.v("onSaveInstanceState()", "outState = " + outState);
    }
} 
```

要对其进行测试，请不要旋转您的设备。

首先，从菜单中选择一个项目，然后在文本框中输入一些内容。然后选择另一个项目并再次键入内容。重复几次。然后返回并...

您会发现您之前输入的文本**已保存！**

文本被保存并不奇怪......

但令人*惊讶的是，这些文本****与所有未******调用的函数***一起保存。***`onSaveInstanceState()`***

Android 何时保存`replaced`它们`FragmentTransaction`？

如果我想在每个`Fragment`实例中额外保存一些数据（比如滚动位置），我应该把我的代码放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:48:39.100

默认情况下，Edittext 保存自己的实例。请参阅 Yalla T. 的回答。

[如何在方向更改时保留 EditText 数据？](https://stackoverflow.com/questions/12420396/how-to-retain-edittext-data-on-orientation-change)

# c - C递归排列

> ID：15858856
> 
> 赞同：0
> 
> 时间：2013-04-07T04:28:24.810
> 
> 标签：c, recursion, permutation

在过去的一天里，我一直试图完成我的这部分作业，但无济于事，需要一些帮助或指导来帮助理解问题。

到目前为止，我有这个：

```
swap(int A, int B){
    int temp;
    temp = A;
    A = B;
    B = temp;
}

int max_array(int array[], int arraySize)
{
   int i, max=-32000;
   for (i=0; i<arraySize; i++)
   {
     if (array[i]>max)
     {
        max=array[i];
     }
   }
   printf("%d \n Max array: ", max)
   return(max);
}

int nextPermutation(int array[], int arraySize){
    int i;
    n = max_array(array, arraySize);
    if (int i; n == array[i] && i > 1; i++){
        swap(array[i], array[i-1]);
    }

    else if(int i; n == array[i]; i++){

    }
}

void main(){

    int intArray[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    //int intArray[10] = {1, 10, 3, 9, 8, 6, 7, 2, 4, 5};
    nextPermutation(intArray, 10);
    int i = 0;
    for(i = 0; i < 10; i++){
        printf("%d ",intArray[i]);
    }

} 
```

但是我很难理解的问题是“如果 a1,...,an 是任意排列（其中 a1,...,an 是数字 1、2、...、n 的顺序可能不同），那么“下一个”排列由以下过程产生： (i) 如果数组的最大元素（即 n）不是数组的第一个元素，例如 n=ai ，其中 i>1 ，则产生“下一个”排列你需要交换 ai 和 ai−1 。 (ii) 如果数组的最大元素在第一个位置，即 n=a1 ，那么产生排列的“下一个”排列 (a1,. ..,an) ，首先找到 (n-1) 元素排列 (a2,...,an ) 的“下一个”排列，然后将 a1 附加到由此获得的 (n-1) 数组的末尾元素。”

所以它需要用 1,2,3,4,5,6,7,8,9,10 的数组排列每一个可能的组合，然后当它到达这一点时完成 "(n, ..., 2, 1) .这是唯一没有“下一个”排列的排列。

并且函数 int 'nextPermutation(int array[], int arraySize){' 需要保持不变。

任何帮助或提示都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:05:44.283

你的程序有一些错误，

```
swap() function will not affect the program as it doesn't use pass by reference.

max_array() should find the index of the maximum value, not the maximum value itself.

There is no recursion in your program as far as I can see.

main() should return int. 
```

下面给出的程序片段可能会给你一个想法，

```
 int ct=-1,n=10,temp[10]={0,0,0,0,0,0,0,0,0,0};
    int intArray[10]={1,2,3,4,5,6,7,8,9,10};

    permute(int k) 
    {     
            int i;     
            temp[k]=++ct;     
            if(ct==n-1)     
            {         
               for(i=0;i<n;i++)         
               {
                      printf("%d",intArray[temp[i]]);         
               }
               printf("\n");     
            }     
            for(i=0;i<n;i++)     
            {
               if(temp[i]==0)     
               {
                   permute(i);     
               }
            }
            ct--;     
            temp[k]=0;       
    } 

    int main() 
    {     
      permute(0);     
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:41:05.240

用于交换样本

```
#include <stdio.h>

void swap(int* A, int* B){
    int wk;
    wk = *A;
    *A = *B;
    *B = wk;
}

int main(void){
    int array[] = { 1,2,3 };

    swap(&array[0], &array[2]);

    printf("array[0]=%d, array[2]=%d\n", array[0], array[2]);

   return 0;
} 
```

# python - 使用 facebook 的 javascript sdk 登录 django 站点

> ID：15858861
> 
> 赞同：0
> 
> 时间：2013-04-07T04:29:00.907
> 
> 标签：python, django, facebook

我正在尝试找到一种方法来允许用户使用 facebook 登录按钮登录到我的 django 网站。（[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)）我找到了一种使用 OAuth 登录的方法，但我找不到让 facebook 登录按钮使用 OAuth 而不是 SDK 的方法，或将 SDK 挂接到 django 社交身份验证应用程序之一。

我尝试了几个顶级的身份验证插件，它们要么根本不起作用，要么只使用 OAuth 并且不支持登录按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:57:53.420

I think that login through the facebook javascript SDK would not be able to set any session info on the django backend . DO be able to complete the django login process you will have to do that as well.

Could you possibly make an ajax request in the callback of javascript login and run the django backend login code such that you are also able to set django session info .

I should warn you this may not work at all because of CORS .

# python - 从 MongoDB 返回后将 hg.tar 渲染到内存中的树结构中

> ID：15858862
> 
> 赞同：1
> 
> 时间：2013-04-07T04:29:04.253
> 
> 标签：python, file, mongodb, mercurial

我正在做一个必须存储`.hg`目录的项目。最简单的方法是打包`.hg`成`hg.tar`. 我将它保存在 MongoDB 的 GridFS 文件系统中。

如果我按照这个计划去，我必须把焦油读出来。

```
import tarfile, cStringIO as io
repo = get_repo(saved_repo.id)
ios = io.StringIO()
ios.write(repo.hgfile.read())
ios.seek(0)

tar = tarfile.open(mode='r', fileobj=ios)
members = tar.getmembers()

#for info in members:
#    tar.extract(info.name, '/tmp')
for file in members:
    print file.name, file.isdir() 
```

这是一个工作代码。随着循环的继续，我可以获得所有文件和目录的名称。

我的问题是如何将这个 tar 提取到一个有效的、类似文件系统的目录中。我可以`.extractfile`单独进入内存，但如果我想输入 Mercurial API，我可能需要整个目录作为`.hg`内存中的单个 DIRECTORY ，就像它们在文件系统中的存在方式一样。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:59:27.593

Mercurial 有一个`opener`用于抽象文件系统访问的概念。我首先查看了[http://hg.intevation.org/mercurial/crew/file/tip/mercurial/revlog.py](http://hg.intevation.org/mercurial/crew/file/tip/mercurial/revlog.py)看看是否可以替换 revlog 类（它是 changelog、manifest log 和 filelogs 的基类） ，但最新版本的 Mercurial 也有一个 VFS 抽象层。它可以在[http://hg.intevation.org/mercurial/crew/file/8c64c4af21a4/mercurial/scmutil.py#l202](http://hg.intevation.org/mercurial/crew/file/8c64c4af21a4/mercurial/scmutil.py#l202)中找到，并被`localrepo.localrepository`该类用于所有文件访问。

# actionscript-3 - AS3 将子元素添加到保持动画运动的影片剪辑

> ID：15858864
> 
> 赞同：0
> 
> 时间：2013-04-07T04:29:27.767
> 
> 标签：actionscript-3, flash

我对 flash 和 AS3 真的很陌生，所以我什至不知道如何正确地问这个问题。

我有一个有动画的角色（MovieClip），我想做的是向这个角色添加一个项目，例如在“头”层中，这个项目应该跟在“头”层之后。
因此，这意味着该项目在每一帧中都应略高于头部，并且头部会不断改变其位置。

到目前为止，我得到的是一个静态项目（从不与头层一起移动），将它与“addchildat”一起添加到我的电影剪辑中。

```
var running : anim_running = new anim_running (); // running movieclip
var cono : i_1  = new i_1 (); // cone head item
running.addChildAt (cono, 10); // adding the cone to the proper layer
cono.x = 20; 
cono.y = -20; // positioning the cone on top of the head 
```

有了这段代码，这就是它的样子（我还不能发布图片）

[http://oi45.tinypic.com/2qx6bls.jpg](http://oi45.tinypic.com/2qx6bls.jpg) - 这是一个锥体正确定位的框架
[http://oi47.tinypic.com/34g6bub.jpg](http://oi47.tinypic.com/34g6bub.jpg) - 但在下一帧中锥体不会跟随头层

对不起，如果这是一个真正的菜鸟问题。在问之前我搜索了整个谷歌。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:08:41.567

好的，所以如果我正确理解这一点，您会想要添加一个容器影片剪辑，其中包含头部和圆锥体。然后，您将动画容器而不是头部。这样，您可以相对于其他项目将项目添加到容器中，就好像它是静态的并且动画继续播放一样。

粗略的例子：

```
var container:MovieClip = new MovieClip();
addChild(container);
container.addChild(head);
container.addChild(cone);

TweenLite.to(container, 3, {x:container.x + 50}); /*head and cone move relative to each other because their parent is being animated */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:12:25.010

可能最简单的方法（没有太多棘手的代码）是在头部动画剪辑中创建一个“容器”动画剪辑，您可以在其中添加新的帽子动画剪辑。

然后只需将帽子添加到容器中。确保您已设置实例名称，以便您可以在代码中引用它们。这是一个例子：

```
running.head.hatContainer.addChild(cono); 
```

# javascript - 持久连接的 HTTP 分块的替代方案？

> ID：15858870
> 
> 赞同：1
> 
> 时间：2013-04-07T04:30:33.480
> 
> 标签：javascript, node.js, http

根据[关于服务器发送事件的 W3C 规范](http://www.w3.org/TR/eventsource/)：

> 作者还告诫说，HTTP 分块可能对该协议的可靠性产生意想不到的负面影响。在可能的情况下，应该禁用分块以提供事件流，除非消息的速率足够高以至于这无关紧要。

我将如何在 node.js 中做这个服务器端？设置`Content-Length`标头并不是一个真正的选项，因为理想情况下连接不应该关闭。我会将响应标头设置`Transfer-Encoding`为`identity`还是完全删除`Transfer-Encoding`标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:03:24.163

`chunked`如果您没有明确提供长度或手动设置传输编码，Node 将自动使用编码。设置也很好，`Connection: close`因为在服务器完成发送事件后您显然不会保持连接打开。

```
res.setHeader('Transfer-Encoding', 'identity');
res.setHeader('Connection', 'close'); 
```

# jsf - 不保存打印页面的状态

> ID：15858871
> 
> 赞同：0
> 
> 时间：2013-04-07T04:30:57.613
> 
> 标签：jsf, lifecycle, savestate

对于打印页面，它只是文本，没有命令链接/按钮来点击，不需要保存打印页面的状态。有没有办法告诉 JSF 不要保存状态？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:24:52.120

如果视图不包含任何`<h:form>`. 所以没什么好担心的。

从`<f:view transient="true">`Mojarra 2.1.19 开始启用无状态模式的 . 如果视图已经不包含任何`<h:form>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:20:35.387

使用较新版本的 Mojarra，您可以执行以下操作：

```
<f:view transient="true">
    Your page
</f:view> 
```

但我认为这样做不会对您的申请产生任何显着的积极影响。

# javascript - 主干.js 视图不会重置

> ID：15858872
> 
> 赞同：0
> 
> 时间：2013-04-07T04:30:57.953
> 
> 标签：javascript, backbone.js, backbone-views

我需要使用backbone.js，我无法在我的视图中进入“渲染”部分这是我的代码：

```
var Vigne = {
Models:{},
Collections: {},
Views:{},
Templates:{}
}

Vigne.Models.Raisin = Backbone.Model.extend({})

Vigne.Collections.Grape = Backbone.Collection.extend({
model: Vigne.Models.Raisin,
url: "./scripts/data/vin.json",
initialize: function (){
    console.log("grape initialised");
}
});

Vigne.Views.Grape= Backbone.View.extend({
initialize: function(){
    _.bindAll(this,"render");
    this.collection.bind("reset",this.render);
},
render: function(){
    console.log("render");
    console.log(this.collection.length);
}
})

Vigne.Router = Backbone.Router.extend({
routes:{
    "": "defaultRoute"
},

defaultRoute: function(){
    console.log("defaultRoute");
    Vigne.grape = new Vigne.Collections.Grape()
    new Vigne.Views.Grape ({ collection : Vigne.grape });
    Vigne.grape.fetch();
    console.log(Vigne.grape.length);
}
}
);

var appRouter= new Vigne.Router();
Backbone.history.start(); 
```

我期待它在调试器的控制台中显示我的集合的长度，似乎它没有重置。有任何想法吗？

**编辑：**

我在 fetch 函数中添加了这个：

```
success: function(){
console.log(arguments);
},
error: function() { 
    console.log(arguments); 
    }
}); 
```

并且 fetch 函数成功获取了 json 文件，但它不会触发 reset 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:10:50.613

我通过将 fetch 函数中的属性设置为 true 来解决这个问题：

```
Vigne.grape.fetch({

   reset:true,   

   error: function() { 
    console.log(arguments); 
    }
  }

); 
```

这本书帮助了我：[http ://addyosmani.github.io/backbone-fundamentals/](http://addyosmani.github.io/backbone-fundamentals/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:16:40.870

Backbone 在获取成功时调用 reset()，这反过来又会触发**重置**事件。但是如果您的 fetch 由于某种原因失败，您将不会收到任何事件。因此，您必须在 fetch 方法中传递一个错误处理程序，并使用它来识别错误并进行处理。

```
Vigne.grape.fetch({
    error: function() { 
        console.log(arguments); 
    }
}); 
```

您还可以通过成功回调，您将能够知道获取中的问题。您还可以使用 Charles 代理/Chrome 调试器工具来确定您是否从后端获得了正确的响应。

您能否粘贴您从服务器获得的回复。您可以更改数据，但保持格式正确。

**编辑：** 我可以看到的另一个问题是您没有在模型中定义属性因此在 Backbone 提取之后，它会使用从服务器提取的新模型刷新您的集合。Fetch 方法需要来自服务器的 json 对象数组，并且响应数组中的每个 json 对象都应与您在模型中默认设置的属性相匹配，否则它将无法创建新模型，因此无法刷新你的收藏。你能否纠正这个并让我知道。

# yui - 如何使用 YUI 从数据表中删除/取消订阅监听器

> ID：15858875
> 
> 赞同：0
> 
> 时间：2013-04-07T04:31:24.157
> 
> 标签：yui, yui-datatable

我确实在数据表上订阅了一个事件，如下所示（[YUI 数据表](http://developer.yahoo.com/yui/datatable/#cellediting)）：

`myDataTable.subscribe("cellClickEvent", this.myDataTable.onEventShowCellEditor);`

我怎样才能实现如下？

```
If (condition)
   show cell editor 
else 
  remove or hide cell editor 
```

感谢进阶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:06:00.493

onEventShowCellEditor 没什么特别的，它只是调用方法 showCellEditor。你也可以。与其为事件设置侦听器并将其直接传递给 onEventShowCellEditor，不如将您自己的侦听器放在那里，并在调用 showCellEditor 之前做出决定：

```
myDataTable.subscribe('cellClickEvent', function (oArgs) {
   if (condition) {
        myDataTable.showCellEditor(oArgs.target);
   } else {
...whatever
   }
}); 
```

# cordova - 由于页面加载而重置插件 - 问题

> ID：15858879
> 
> 赞同：6
> 
> 时间：2013-04-07T04:32:31.970
> 
> 标签：cordova

从 2.3 升级到 Phonegap 2.5 后，Xcode 挂起此消息“由于页面加载而重置插件”。

我已经查看了所有这些答案：

[在 Phonegap 2.5 中加载外部 URL 时出错](https://stackoverflow.com/questions/15402447/error-loading-external-url-in-phonegap-2-5)

[https://stackoverflow.com/questions/15569327/cordova-2-5-0-query-regarding-ios-plugin](https://stackoverflow.com/questions/15569327/cordova-2-5-0-query-regarding-ios-plugin)

[无法加载网页并出现错误：帧加载中断](https://stackoverflow.com/questions/15527120/failed-to-load-webpage-with-error-frame-load-interrupted)

它告诉您将 cordova-2.5.0.js 移动到根目录（与 index.html 相同的级别），但这并没有解决我的问题。

我最初在“js/cordova-2.5.0.js”中有文件，我的索引文件有相同的引用。我做了上面的改变，我得到了同样的失败结果。

使用“create”命令升级并完成我使用过的过程后

“cordova-2.5.0.js” “/cordova-2.5.0.js” “js/cordova-2.5.0.js”

每次更改时，我都会执行“硬清洁”。

任何想法我还能尝试什么或我缺少什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T08:35:24.467

您使用的是 Jquery Mobile 还是类似的东西？我遇到了与登录页面相同的问题，如果您已经登录，它将跳过该页面。

从初始屏幕淡出并同时进行哈希更改时似乎存在问题。

我之前的代码

```
$('#LoginPage').live('pagebeforeshow', function(event) {
    if(window.localStorage.getItem("UserID"))
    {
        $.mobile.changePage("#MainPage");
        appRefresh();
    }
}); 
```

我的代码之后

```
$('#LoginPage').live('pagebeforeshow', function(event) {
    if(window.localStorage.getItem("UserID"))
    {
        $.mobile.changePage("#MainPage", {changeHash: false});
        appRefresh();
    }
}); 
```

这现在对我有用。

有一个问题日志

[https://issues.apache.org/jira/browse/CB-2602](https://issues.apache.org/jira/browse/CB-2602)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-03T06:22:51.223

如果您的 JavaScript 文件中有错误，也会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T01:05:33.687

在 iOS 应用程序中，我也遇到了这个问题 - 在 xcode 控制台中，在 iOS 模拟器中运行时，我经常看到消息：“由于页面加载而重置插件。” 并且应用程序屏幕是空白的。

应用程序堆栈是：Phonegap 2.7、jQuery 2.0、jQuery-mobile 1.3.1、iPhone 6.1 模拟器

我回滚了一些js库，发现通过恢复到jquery 1.9.1，问题没有出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T13:57:33.210

jQuery Mobile 1.3.1 旨在与 jQuery 1.9.1 版本一起使用（也可能是新的 1.10.x 更新） jQuery 2.0 去除了 jQuery Mobile 仍然使用的许多向后兼容的东西。

# java - 使用 ImageIO.write 时的 OutOfMemory

> ID：15858880
> 
> 赞同：1
> 
> 时间：2013-04-07T04:32:41.067
> 
> 标签：java, out-of-memory, javax.imageio

即使 BlockingQueue 为空，我的 saveScreenShot 线程也出现 OutOfMemory 错误

在我的 Main 中有以下变量存储图像

```
public static BlockingQueue<ImageSaveData> imageQueue1 = new LinkedBlockingQueue<ImageSaveData>();
    public static BlockingQueue<ImageSaveData> imageQueue2 = new LinkedBlockingQueue<ImageSaveData>();
    public static BlockingQueue<ImageSaveData> imageQueue3 = new LinkedBlockingQueue<ImageSaveData>();
    public static BlockingQueue<ImageSaveData> imageQueue4 = new LinkedBlockingQueue<ImageSaveData>(); 
```

这是我的 ImageSaveData 类

```
import java.awt.image.BufferedImage;

public class ImageSaveData
{
    private String fileNumber;
    private BufferedImage image;

    public ImageSaveData(String fileNumber, BufferedImage image)
    {
        this.fileNumber = fileNumber;
        this.image = image;
    }

    public String getFileNumber()
    {
        return fileNumber;
    }

    public BufferedImage getImage()
    {
        return image;
    }
} 
```

这是我的线程，它截取屏幕截图并将其保存到 imageQueueX

```
 // long start = System.currentTimeMillis();
    synchronized (runner)
    {
        int imageCount = 0;
        int maxCount = 0;
        boolean hasMessage = false;
        String[] countFormat =
        {
                "00000000", "0000000", "000000", "00000", "0000", "000", "00", "0"
        };
        // 10
        while (true)
        {
            if (maxCount++ < 1000000010)
            {
                try
                {
                    BufferedImage image = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
                    String imageOutNumb = "";
                    if (imageCount < 10) imageOutNumb = countFormat[0] + imageCount++;
                    else if (imageCount < 100) imageOutNumb = countFormat[1] + imageCount++;
                    else if (imageCount < 1000) imageOutNumb = countFormat[2] + imageCount++;
                    else if (imageCount < 10000) imageOutNumb = countFormat[3] + imageCount++;
                    else if (imageCount < 100000) imageOutNumb = countFormat[4] + imageCount++;
                    else if (imageCount < 1000000) imageOutNumb = countFormat[5] + imageCount++;
                    else if (imageCount < 10000000) imageOutNumb = countFormat[6] + imageCount++;
                    else if (imageCount < 100000000) imageOutNumb = countFormat[7] + imageCount++;
                    else imageOutNumb = "" + imageCount++;

                    ImageSaveData imageSaveData = new ImageSaveData(imageOutNumb, image);

                    while (true)
                    {
                        if (Main.imageQueue1.offer(imageSaveData, 1, TimeUnit.NANOSECONDS)) break;
                        if (Main.imageQueue2.offer(imageSaveData, 1, TimeUnit.NANOSECONDS)) break;
                        if (Main.imageQueue3.offer(imageSaveData, 1, TimeUnit.NANOSECONDS)) break;
                        if (Main.imageQueue4.offer(imageSaveData, 1, TimeUnit.NANOSECONDS)) break;
                    }
                }
                catch (HeadlessException | AWTException e)
                {
                    e.printStackTrace();
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                }
                catch(OutOfMemoryError e)
                {
                    try
                    {
                        runner.sleep(1);
                    }
                    catch (InterruptedException e1)
                    {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                }
                try
                {
                    runner.sleep(34);
                }
                catch (InterruptedException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            else
            {
                if (hasMessage)
                {
                    try
                    {
                        System.out.println(Main.imageQueue1.isEmpty());
                        System.out.println(Main.imageQueue2.isEmpty());
                        System.out.println(Main.imageQueue3.isEmpty());
                        System.out.println(Main.imageQueue4.isEmpty());
                    }
                    catch (Exception e)
                    {

                    }
                }
                else
                {
                    System.out.println("We Have Finished saving images to memory");
                    hasMessage = true;
                }
            }
        }
    } 
```

我有 3 个消费者线程，唯一的区别是 filePath 不同

```
 // long start = System.currentTimeMillis();
    synchronized (runner)
    {
        String PathName = "\\\\DELL\\Maxtor\\aJordan\\";
        while (true)
        {
            try
            {
                ImageSaveData imageData1 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
                ImageSaveData imageData2 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
                ImageSaveData imageData3 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
                ImageSaveData imageData4 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
                if (imageData1 != null) ImageIO.write(imageData1.getImage(), "png", new File(PathName + imageData1.getFileNumber() + ".png"));
                if (imageData2 != null) ImageIO.write(imageData2.getImage(), "png", new File(PathName + imageData2.getFileNumber() + ".png"));
                if (imageData3 != null) ImageIO.write(imageData3.getImage(), "png", new File(PathName + imageData3.getFileNumber() + ".png"));
                if (imageData4 != null) ImageIO.write(imageData4.getImage(), "png", new File(PathName + imageData4.getFileNumber() + ".png"));

            }
            catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (IOException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

错误

```
java.lang.OutOfMemoryError: Java heap space
    at sun.awt.windows.WRobotPeer.getRGBPixels(Unknown Source)
    at java.awt.Robot.createScreenCapture(Unknown Source)
    at TakeShothandler1.run(TakeShothandler1.java:48)
    at java.lang.Thread.run(Unknown Source) 
```

第 48 行是

```
BufferedImage image = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T00:11:08.863

您的队列容量是多少，您当前的堆大小是多少？

根据您的分辨率（例如 1024x768x32 分辨率：1024x768x4bytes/pixel=3.14MB），每个屏幕截图都将在 3-10 MB 的范围内，并且您获取它们的速度可能比将它们写入磁盘的速度更快。

根据您的堆大小和队列容量，可能不需要很长时间就可以清理可用的堆。

另外，我不确定（您可能在其他地方有其他代码），但看起来您可能只从消费者线程中的一个队列进行轮询：

```
ImageSaveData imageData1 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
ImageSaveData imageData2 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
ImageSaveData imageData3 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS);
ImageSaveData imageData4 = Main.imageQueue1.poll(1, TimeUnit.NANOSECONDS); 
```

编辑：哇，没有意识到这个线程已经有两年了。

# oracle - Oracle 是否使用 SQL Server 或 Sybase 等中间结果集？

> ID：15858882
> 
> 赞同：0
> 
> 时间：2013-04-07T04:32:50.257
> 
> 标签：oracle

```
选择姓氏、州、计数（*）
从测试
所在州（'NY'、'NJ'、'CA'）
按州、姓氏分组
计数（*）>1；
```

MS SQL server 和 Sybase 中的类似查询用于内部处理如下，

在测试表上应用 where 子句并制作结果集（内部表），然后应用 group by 并制作另一个内部结果集，最后应用 Have 并将最终结果集显示给用户。

Oracle 是否也使用结果集方法，还是有所不同？

顺便说一句，我试着用谷歌搜索，检查了 Oracle 文档，找不到我正在寻找的细节。Sybase 文档对这些事情非常清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:18:24.660

在这种情况下，您可以指望 Oracle 实现结果集。可以肯定的是，检查计划。我打赌你会在顶部找到一个哈希组，然后是一个过滤操作。

您的案例可能存在一些罕见的变化，可以通过遍历合适的索引来解决，以避免中间结果集，但我从未在执行计划中遇到过它。

# jquery - Jquery，视图中的 Div / 链接悬停，固定菜单“弹出”

> ID：15858885
> 
> 赞同：0
> 
> 时间：2013-04-07T04:33:06.523
> 
> 标签：jquery, css

我将以下代码用于悬停时弹出的固定侧边菜单。代码在网上找到，很容易集成..

CSS：

```
<div id="nav">
    <ul class="nav">
        <li class="home"><a class="home" href="#home">Home</a></li>
        <li class="museum"><a class="museum" href="#museum">Museum</a></li>
        <li class="collection"><a class="collection" href="#collection">Collection</a></li>
        <li class="timeline"><a class="timeline" href="#timeline">Timeline</a></li>
        <li class="contact"><a class="contact" href="#contact">Contact</a></li>
    </ul>
    <div class="clear"></div>
</div> 
```

查询：

```
// link hover
$(function() {
    $('.nav a').stop().animate({'marginLeft':'-140px'},200);
    $('.nav > li').hover(
        function () {
            $('a',$(this)).stop().animate({'marginLeft':'-45px'},200);
        },
        function () {
            $('a',$(this)).stop().animate({'marginLeft':'-140px'},200);
        }
    );
}); 
```

我使用 PlusAnchor 脚本将页面滚动到正确的 div：

```
// Page Scroll
$('body').plusAnchor({
    easing: 'easeInOutExpo',
    speed:  1000,
    offsetTop: -60
}); 
```

现在我需要修改代码，但我不知道对 Jquery 有多陌生。我需要菜单项在用户点击后保持“弹出”，或者在用户滚动时“弹出”并且有问题的 div 进入查看。

我怎样才能做到这一点？有我可以采用的脚本吗？

**JSFIDDLE：http:** [//jsfiddle.net/AG3tg/](http://jsfiddle.net/AG3tg/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:37:26.283

本质上，您需要记录单击元素的时间，并相应地进行处理。更新您的 jQuery 代码，如下所示：

```
$('document').ready(function() {
    // link hover
    $('.nav a').stop().animate({'marginLeft':'-140px'},200);
    $('.nav > li').hover(
        function () {
            $('a',$(this)).stop().animate({'marginLeft':'-45px'},200);
        },
        function () {
            if(!$(this).data('shown'))
            {
                $('a',$(this)).stop().animate({'marginLeft':'-140px'},200);
            }
        }
    ).click(function() {  
        $('.nav > li').data('shown', false);
        $(this).data('shown', true);
        $('.nav > li a').not(':eq('+$(this).index()+')').stop().animate({'marginLeft':'-140px'},200);
    });

    // plus anchor
    $('document').plusAnchor({
        easing: 'easeInOutExpo',
        speed:  1000,
        offsetTop: -60
    });
}) 
```

这是一个[更新的 jsFiddle](http://jsfiddle.net/AG3tg/2/)

# ruby-on-rails - 如何将独角兽用作“rails s”？

> ID：15858887
> 
> 赞同：53
> 
> 时间：2013-04-07T04:33:23.947
> 
> 标签：ruby-on-rails, ruby, unicorn

一个新的 Rails 项目`Gemfile`显示：

```
# Use unicorn as the app server
gem 'unicorn' 
```

`rails s --help`显示：

```
Usage: rails server [mongrel, thin, etc] [options] 
```

然而，做：

```
rails s unicorn 
```

我得到：

```
/Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/rack-1.4.5/lib/rack/handler.rb:63:in `require': cannot load such file -- rack/handler/unicorn (LoadError)
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/rack-1.4.5/lib/rack/handler.rb:63:in `try_require'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/rack-1.4.5/lib/rack/handler.rb:16:in `get'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/rack-1.4.5/lib/rack/server.rb:272:in `server'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/railties-3.2.13/lib/rails/commands/server.rb:59:in `start'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/railties-3.2.13/lib/rails/commands.rb:55:in `block in <top (required)>'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
from /Users/patrick/.rvm/gems/ruby-1.9.3-head@keynote/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我过去在其他项目中使用过独角兽，但总是必须运行`unicorn`命令并指定一个配置文件，这有点麻烦。我想知道如何通过使用简单地使其工作`rails s...`

这可能吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-07T07:28:21.193

看起来[`unicorn-rails`](https://github.com/samuelkadolph/unicorn-rails)@Dogbert 提到的 gem 实际上可以用来让 Unicorn 成为`rails server`处理程序。

只需在您的, 运行中包含`gem "unicorn-rails"`（对于 Rails 4.2.4，`gem "rack-handlers"`）来安装 gem，然后您可以运行：`Gemfile``bundle install`

```
$ rails server unicorn 
```

虽然一旦`unicorn-rails`安装，Unicorn 应该是默认的应用程序服务器，因此您也可以运行`rails server`并且它应该使用 Unicorn（假设您`Gemfile`的 .那些你不使用的）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-09-01T02:31:07.670

更好的选择可能是直接运行独角兽服务器。

```
bundle exec unicorn -p 3000 # default port is 8080 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-12-11T14:36:35.420

```
gem 'rack-handlers'

rails server unicorn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T15:30:22.690

然而，答案`Steven`是最简单的方法。

我`unicorn`通过 rake 任务在开发环境中运行：

lib/tasks/dev_unicorn.rake：

```
task :server do
  # optional port parameter
  port = ENV['PORT'] ? ENV['PORT'] : '3000'
  puts 'start unicorn development'
  # execute unicorn command specifically in development
  # port at 3000 if unspecified
  sh "cd #{Rails.root} && RAILS_ENV=development unicorn -p #{port}"
end
# an alias task
task :s => :server 
```

跑：

`rake s`

*参考[http://jing.io](http://jing.io/t/use-unicorn-as-Rails-3-development-server.html)*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-28T08:39:36.600

我认为不可能将独角兽用作“rails s”。用这个 -

将 gem 'unicorn' 添加到 gem 文件并运行 bundle install。

然后运行以下任何命令 -

$独角兽-p 3000

或者

$ unicorn_rails -p 3000

# mysql - 将 C 代码的输出重定向为 MySQL 服务器的输入

> ID：15858890
> 
> 赞同：0
> 
> 时间：2013-04-07T04:33:38.483
> 
> 标签：mysql, c, windows

我想在 Windows 中编译一个与数据库相关的 C 程序。我已经安装了 MySQL。

**我真正想做的是将我的 C 代码的输出重定向为我的数据库的输入命令。**

我按照以下给出的链接在 Ubuntu 中完成了这件事：

*   [通过 C++ 连接 MySQL](https://stackoverflow.com/questions/8896963/connecting-to-mysql-through-c)

PS 是否需要我在命令提示符中编译代码（因为这就是我访问 MySQL 服务器的方式）。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:51:09.183

不 - 您可以无论如何编译代码。

如果要重定向输出，最简单的方法是使程序成为控制台应用程序（可以从 IDE 或命令行编译）。

然后将程序的输出通过管道传输到 mysql 命令行客户端。

```
yourprogram | mysql --user=user_name --password=your_password db_name 
```

# php - 在 PHP 会话中保存用户信息的安全漏洞？

> ID：15858891
> 
> 赞同：0
> 
> 时间：2013-04-07T04:33:49.657
> 
> 标签：php, security, session

我正在创建一个以 RESTful API 为中心的 Web 应用程序。一旦用户登录，他们将收到一个会话 ID 和登录密钥，用于访问他们的数据，直到他们的会话过期。如果会话保存在内存中，Web 应用程序（可能还有移动应用程序）将在每次页面加载时调用 API 以获取用户信息。我正在尽我所能优化这个 API 调用，我想知道缓存这些信息是否有意义。

每个包含用户数据的表都包含一个更新的时间戳（在每次 Postgres 更新时触发）。所以我可以修改 API 以接受可选`cache_timestamp`参数。API 将首先检查是否有任何用户数据的表自该时间戳以来已被修改。如果有，则返回更新后的用户数据；如果不是，它将返回 304 not modified 并且应用程序将使用缓存。

我的问题是哪些信息太敏感而无法保存在内存中（使用 PHP 会话）。目前，这些信息包含个人资料（姓名、公司等）、联系人（电子邮件、电话）、设置（时事通讯、通知）和付款信息（计划、试用和引用 Stripe 的客户 ID）。

我认为唯一会处于边缘的是支付信息，但除非我的 API 密钥被泄露，否则他们不应该能够从 Stripe 访问任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:55:31.923

我不是安全专家，但由于会话存储在服务器上，攻击者访问数据的唯一方法是已经获得一些特权。

您可以查看这篇有趣的文章[PHP Session Fixation / Hijacking](https://stackoverflow.com/questions/5081025/php-session-fixation-hijacking)，了解如何保护更多会话。

如果用户的会话被劫持，则无事可做，攻击者将访问数据，就像它是有问题的用户一样。

如果攻击者可以利用与您的服务器相关的故障，那么他应该能够读取会话数据（默认情况下，这些数据序列化存储在某些文件中）。

因此，加密敏感数据可以防止他读取原始数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T04:47:37.090

我的意见也是一样的，付款信息应该存储在 Session 变量中，但是你说没有 API 密钥就无法访问。我认为你是安全的。

# java - Intellij IDEA 项目视图不像以前那样显示结构。

> ID：15858894
> 
> 赞同：51
> 
> 时间：2013-04-07T04:34:37.213
> 
> 标签：java, intellij-idea

我在项目中的目录结构似乎已经消失了。第一张照片是“坏”。我最近几乎同时升级到 12.1 和 vim 模拟器。我不知道我是否错过了重置某些内容的对话框？我不知道如何像第二张照片那样把它找回来。
我试图重新导入该项目，但没有帮助。我将项目保存在 Dropbox 上，并有另一台我没有重新加载项目的 PC。有没有办法从那台机器上得到我的看法？

## ![坏的](https://i.stack.imgur.com/Y4MLt.png)

图片是“好”的，我希望它看起来如何。
![好的](https://i.stack.imgur.com/KEzMD.png)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-05-28T23:09:41.300

我自己也遇到过这个问题几次。发生的事情是 intellij 在我的项目设置中丢失了模块。这是我修复它的步骤：

文件 -> 项目结构 -> 点击模块（注意空列表） -> 点击“+” -> 点击导入模块 -> 查找现有的 myProj.iml

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-09T23:26:46.550

我也有不少 IntelliJ 项目以及文本文件的 git 文件夹。我发现 IntelliJ 并不总是正确地重建 .idea 文件。但是，以下方法对我有用。

*   在没有 .idea 文件夹的顶部文件夹中打开 IntelliJ。通常 IntelliJ 只会构建一个新的 .idea 文件夹并运行。*   从类似项目中复制一个 .idea 文件夹并修改以适应。.idea 中的 xml 文件是可以合理修改的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-04T18:54:39.537

在根项目级别打开 IntelliJ 对我有用。

我有一个混合项目文件夹树，如下所示：

```
git_root
- proj_android
- proj_ios
- proj_react
  - lib
  - src 
```

我的问题是，当我在 proj_react 文件夹上打开 IntelliJ 时，我看不到我的 src 文件夹或 lib 文件夹。（我的 proj_react 比我的 git_root 低一级。）

然后我在 git_root 上打开 IntelliJ，我可以看到一切。问题已经解决了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-10T06:41:27.340

如果您正在从事使用 Maven、Gradle、Flash Builder 等的软件开发项目，则下面提到的步骤应该可以恢复项目结构：

1.  `Ctrl`+ `Alt`+ `Shift`+ `S`（或）文件>>项目结构
2.  在“项目设置”中选择“模块”
3.  `Alt`+ `Insert`（或）选择“+”以添加新模块
4.  选择“导入模块”
5.  选择要从中导入模块的文件夹（通常是父文件夹）
6.  选择“从外部模型导入模块”和相应的外部模型

这将重置您的项目结构。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T06:37:34.193

您有时可以通过在模块设置中去并重置它们的内容根目录来拯救这样的项目。甚至按照另一个答案的建议重新创建模块。

如果我在 PhPStorm 中打开一个 IntelliJ 项目，然后尝试再次在 IntelliJ 中打开它，就会发生这种情况。

但是正如提到的，项目格式最近发生了变化，因此您应该使用相同版本的 intelliJ 来处理您的项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-21T15:22:20.897

如果您的项目模块的内容根与另一个内容根相交，则会出现此问题。例如：

```
Project A (content root)
    - source for A
    - module B (content root)
      - source for B 
```

如果您的项目具有“项目 A”的源根，并且您为“模块 B”添加了源根，那么您最终会丢失结构，例如您的第一张图片。发生这种情况是因为模块 B 的内容根位于项目 A 结构中。

这一次有效，因为我在上面的设置中有多个模块。当我升级到 12.1.6 时，它停止工作。如果你有重叠的源根，你会看到这个问题。

我在 Windows 7 上使用 12.1.6。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-18T21:21:44.467

*在 Mac 上：*

*   优先

*   搜索项目结构或直接访问：

*   项目：Your_Project_Name / 项目结构

*   将所有标记为来源（我的标记为“排除”）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-07T04:45:03.237

你从什么地方更新的？如果你做了几个主要版本的更新，intellij 真的改变了他们的项目布局。您可能需要编辑项目结构并添加一个新的 java 模块。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-18T12:35:23.763

这个问题已经有 8 年了，在 IntelliJ 中仍然存在这个问题。对于具有许多模块的项目，每次发生这种情况后重新构建它们可能会很痛苦。我建议一旦你重建模块，备份 .idea 文件夹，以便下次轻松恢复它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-13T04:06:34.017

在 IntellIJ 的左下角，您会找到一个图标，您可以使用该图标获取项目结构等，

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2018-08-16T15:53:52.837

这是我所做的快速修复：

1.  关闭 IDE 并在文件管理器中打开项目文件夹
2.  删除 .idea 文件夹并在 IDE 中重新打开项目。

查看隐藏文件夹和文件：

打开文件夹并按 cntrl+H（在 linux 中），然后在 windows 中转到文件夹选项并检查`view hidden files`选项。

# mysql - 在一个查询中对一张表的不同值求和

> ID：15858896
> 
> 赞同：0
> 
> 时间：2013-04-07T04:34:56.777
> 
> 标签：mysql, sql, performance

我想创建一些关于我的用户的统计信息。

我想根据他们的年龄间隔对他们进行分组，并根据他们的性别进行总结。所以最后我得到了一张这样的桌子：

```
 age | male | female | total
  0-18 |    2 |      1 |     3
 18-25 |    3 |      4 |     7
25-100 |   13 |     25 |    38
 total |   18 |     30 |    48 
```

（顺便说一句。这些是示例间隔）

现在我通过对每一行运行这个查询来做到这一点：

```
SELECT
    SUM(IF(gender = 'male', 1,0)) AS `male`,
    SUM(IF(gender = 'female', 1,0)) AS `female`,
    COUNT(gender) AS `total`
FROM `users`
WHERE 
    `birthday` 
        BETWEEN 
            DATE_SUB(CURDATE(), INTERVAL 25 YEAR) 
        AND 
            DATE_SUB(CURDATE(), INTERVAL 18 YEAR) 
```

并通过我的 php 脚本总结结果以创建最后一行

我如何结合所有这些查询来提高性能，也许还可以通过 mysql 创建最后一行。

我想使用的间隔是：

```
0-18
18-25
25-31
31-36
36-41
41-46
46-51
51-56
56-61
61-100 
```

编辑：这是一个带有一些示例数据的表的转储以对其进行测试[http://pastebin.com/ytcuu2ge](http://pastebin.com/ytcuu2ge)

[SQL Fiddle 架构](http://sqlfiddle.com/#!2/514dc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:06:34.193

```
SELECT  Age,
        SUM(gender = 'female') Female,
        SUM(gender = 'male') Male,
        COUNT(*) TotalPerson
FROM
        (
            SELECT  CASE 
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 0 AND 18 THEN '00-18'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 19 AND 25 THEN '19-25'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 26 AND 31 THEN '26-31'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 32 AND 36 THEN '32-36'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 37 AND 41 THEN '37-41'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 42 AND 46 THEN '42-46'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 47 AND 51 THEN '47-51'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 52 AND 56 THEN '52-56'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 57 AND 61 THEN '57-61'
                        WHEN FLOOR(DATEDIFF(CURDATE(), birthday) / 365) BETWEEN 62 AND 100 THEN '62-100'
                    END Age,
                   Gender
            FROM   users
        ) ageList
GROUP   BY Age 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0b0a3/6)
*   [SQLFiddle 演示 ( *WITH ROLLUP* )](http://www.sqlfiddle.com/#!2/0b0a3/9)

输出

```
╔════════╦════════╦══════╦═════════════╗
║  AGE   ║ FEMALE ║ MALE ║ TOTALPERSON ║
╠════════╬════════╬══════╬═════════════╣
║ 00-18  ║      0 ║    1 ║           1 ║
║ 19-25  ║      6 ║    5 ║          11 ║
║ 26-31  ║     22 ║    4 ║          26 ║
║ 32-36  ║     39 ║   16 ║          56 ║
║ 37-41  ║     20 ║   11 ║          31 ║
║ 42-46  ║     31 ║    6 ║          38 ║
║ 47-51  ║     18 ║    3 ║          21 ║
║ 52-56  ║     11 ║    6 ║          17 ║
║ 57-61  ║     10 ║    6 ║          16 ║
║ 62-100 ║     12 ║   12 ║          24 ║
╚════════╩════════╩══════╩═════════════╝ 
```

输出与使用`WITH ROLLUP`

```
╔════════╦════════╦══════╦═════════════╗
║  AGE   ║ FEMALE ║ MALE ║ TOTALPERSON ║
╠════════╬════════╬══════╬═════════════╣
║ 00-18  ║      0 ║    1 ║           1 ║
║ 19-25  ║      6 ║    5 ║          11 ║
║ 26-31  ║     22 ║    4 ║          26 ║
║ 32-36  ║     39 ║   16 ║          56 ║
║ 37-41  ║     20 ║   11 ║          31 ║
║ 42-46  ║     31 ║    6 ║          38 ║
║ 47-51  ║     18 ║    3 ║          21 ║
║ 52-56  ║     11 ║    6 ║          17 ║
║ 57-61  ║     10 ║    6 ║          16 ║
║ 62-100 ║     12 ║   12 ║          24 ║
║ TOTAL  ║    169 ║   70 ║         241 ║
╚════════╩════════╩══════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:13:10.077

您可以使用年龄范围的“表格”进行非等值连接：

```
SELECT
    AgeRange.Age,
    SUM(gender = 'male') AS `male`,
    SUM(gender = 'female') AS `female`,
    SUM(friends) AS `friends`,
    COUNT(gender) AS `total`
FROM `users`
INNER JOIN (
    SELECT 0 AS Low, 18 AS High, '0-18' AS Age
    UNION SELECT 18, 25, '18-25'
    UNION SELECT 25, 31, '25-31'
    UNION SELECT 31, 36, '31-36'
    UNION SELECT 36, 41, '36-41'
    UNION SELECT 41, 46, '41-46'
    UNION SELECT 46, 51, '46-51'
    UNION SELECT 51, 56, '51-56'
    UNION SELECT 56, 61, '56-61'
    UNION SELECT 61, 100, '61-100') AgeRange
 ON users.birthday BETWEEN
    DATE_SUB(CURDATE(), INTERVAL AgeRange.High YEAR) AND
    DATE_SUB(CURDATE(), INTERVAL AgeRange.Low YEAR)
 GROUP BY AgeRange.Age WITH ROLLUP; 
```

将`WITH ROLLUP`包括总计行。[这里](http://www.sqlfiddle.com/#!2/31382/5)有一个 SQL Fiddle 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:08:58.000

如果您有静态间隔，您可以使用 UNION ALL

```
SELECT * FROM
((SELECT
  '0-18' AS age,
  SUM(IF(gender = 'male', 1,0)) AS `male`,
  SUM(IF(gender = 'female', 1,0)) AS `female`,
  COUNT(gender) AS `total`
FROM users AS u
WHERE `birthday` BETWEEN DATE_SUB(CURDATE(), INTERVAL 18 YEAR)
    AND DATE_SUB(CURDATE(), INTERVAL 0 YEAR))
 UNION ALL
(SELECT
  '18-25' AS age,
  SUM(IF(gender = 'male', 1,0)) AS `male`,
  SUM(IF(gender = 'female', 1,0)) AS `female`,
  COUNT(gender) AS `total`
FROM users AS u
WHERE `birthday` BETWEEN DATE_SUB(CURDATE(), INTERVAL 25 YEAR)
    AND DATE_SUB(CURDATE(), INTERVAL 18 YEAR))

  UNION ALL  
(SELECT
  '25-100' AS age,
  SUM(IF(gender = 'male', 1,0)) AS `male`,
  SUM(IF(gender = 'female', 1,0)) AS `female`,
  COUNT(gender) AS `total`
FROM users AS u
WHERE `birthday` BETWEEN DATE_SUB(CURDATE(), INTERVAL 100 YEAR)
    AND DATE_SUB(CURDATE(), INTERVAL 25 YEAR))) as l
group by age 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/514dc/9)

# python - 如何阅读python字典和元组

> ID：15858899
> 
> 赞同：1
> 
> 时间：2013-04-07T04:35:07.070
> 
> 标签：python, parsing, context-free-grammar

有人可以帮我阅读这个 Python 字典元组吗？我是 python 新手，我不能从中得到太多

```
Grammar = {'AB':('S', 'B'), 'BB':'A', 'a':'A', 'b':'B'} 
```

注意：语法是上下文无关语法的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:23:39.157

要将字典转换为您想要的内容，您可以执行以下操作：

```
>>> from collection import defaultdict
>>> grammar = {'AB':('S', 'B'), 'BB':'A', 'a':'A', 'b':'B'}
>>> tmp_result = defaultdict(list)
>>> def tuplify(val):
...     if not isinstance(val, tuple):
...         val = (val,)
...     return val
... 
>>> for key, value in grammar.items():
...     values = tuplify(value)
...     for val in values:
...         tmp_result[val].append(key)
... 
>>> tmp_result
defaultdict(<type 'list'>, {'A': ['a', 'BB'], 'S': ['AB'], 'B': ['AB', 'b']})
>>> result = {key:tuple(val) for key, val in tmp_result.items()}
>>> result
{'A': ('a', 'BB'), 'S': ('AB',), 'B': ('AB', 'b')} 
```

其中类`collections.defaultdict`是一个类似`dict`的类，它使用工厂在缺少键时创建默认值。例如写作：

```
>>> D = defaultdict(list)
>>> D[5].append(3)
>>> D[5]
[3] 
```

可以使用普通`dict`的 s 来编写，例如：

```
>>> D = {}
>>> if 5 in D: # key present, use that value
...     val = D[5]
... else:      # otherwise create a default value and sets it
...     val = list()
...     D[5] = val
... 
>>> val.append(3)
>>> D[5]
[3] 
```

传递给的“工厂”`defaultdict(factory)`可以是任何不接收参数的可调用对象，例如：

```
>>> n = 0
>>> def factory():
...     global n
...     print('Factory called!')
...     n += 1
...     return n   #returns numbers 1, 2, 3, 4, ...
... 
>>> D = defaultdict(factory)
>>> D[0]
Factory called!
1
>>> D[0]   # the keys exists, thus the factory is not called.
1
>>> D[1]
Factory called!
2
>>> D[1]
2 
```

# xml - 实体被引用但未声明

> ID：15858914
> 
> 赞同：6
> 
> 时间：2013-04-07T04:37:50.810
> 
> 标签：xml, jakarta-ee

在我使用磁贴的 Spring MVC 应用程序的 xml 文件中，我编写了以下内容 -

```
<definition name="dashboard" extends="base.definition">
        <put-attribute name="title" value="Dashboard - CMS &diams; &reg; Galactic NetOne" />
        <put-attribute name="body" value="/WEB-INF/views/dashboard.jsp" />
</definition> 
```

但是，`&diams; and &reg;`给出它们被引用但未声明的错误。请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T06:09:51.027

您要么需要声明这些实体，要么将它们替换为等效的十六进制或十进制。我假设角色应该是什么，`diams`并且`reg`; 您可能需要更改它们。

声明实体的示例：

```
<!DOCTYPE definition [
<!ENTITY reg "&#174;">
<!ENTITY diams "&#9830;">
]>
<definition name="dashboard" extends="base.definition">
    <put-attribute name="title" value="Dashboard - CMS &diams; &reg; Galactic NetOne" />
    <put-attribute name="body" value="/WEB-INF/views/dashboard.jsp" />
</definition> 
```

替换实体的示例：

```
<definition name="dashboard" extends="base.definition">
    <put-attribute name="title" value="Dashboard - CMS &#9830; &#174; Galactic NetOne" />
    <put-attribute name="body" value="/WEB-INF/views/dashboard.jsp" />
</definition> 
```

您可以使用 XHTML DTD 作为实体的参考：http: [//www.w3.org/TR/xhtml1/dtds.html#h-A2](http://www.w3.org/TR/xhtml1/dtds.html#h-A2)

# jquery - 如何将相关标题添加到不同 div 中的随机图像？

> ID：15858924
> 
> 赞同：0
> 
> 时间：2013-04-07T04:40:28.483
> 
> 标签：jquery

我不知道从哪里开始这个想法。我正在使用下面的 jQuery 来显示每个页面加载的随机图像。我想扩展它以显示每个图像的特定标题，这些图像显示在不同的 div 中。

下面的函数输出格式为 image1.jpg、image2.jpg 等的随机 image.jpg。我在想我需要为每个图像提供一个标题数组，但是如何引用该数组并通过函数中的图像名称？

```
<script>
(function($){

    $.randomImage = {
        defaults: {

            path: 'headerimages/',

            myImages: ['image1.jpg', 'image2.jpg','image3.jpg','image4.jpg','image5.jpg','image6.jpg' ]         
        }           
    }

    $.fn.extend({
            randomImage:function(config) {

                var config = $.extend({}, $.randomImage.defaults, config); 

                 return this.each(function() {

                        var imageNames = config.myImages;

                        var imageNamesSize = imageNames.length;

                        var randomNumber = Math.floor(Math.random()*imageNamesSize);

                        var displayImage = imageNames[randomNumber];

                        var fullPath = config.path + displayImage;

                        $(this).attr( { src: fullPath, alt: displayImage });
                }); 
            }
    });

})(jQuery);
</script> 
```

上面函数中的图像由 html 显示`<img class="randomheader" src="" alt="image">`

标题将在不同的 div 中，即`<div class="caption"></div>` CSS`#caption`可能会`display:none`在 jQuery 加载之前出现。

这是文档就绪功能：

```
<script>
$(document).ready(function(){
 $('.randomheader').randomImage();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:54:11.767

像这样的东西应该工作：

```
<script>
(function($){

$.randomImage = {
    defaults: {

        path: 'headerimages/',

        myImages: ['image1.jpg', 'image2.jpg','image3.jpg','image4.jpg','image5.jpg','image6.jpg' ],
        myCaptions: ['caption1', 'caption2','caption3','caption4','caption5','caption6' ]          
    }           
}

$.fn.extend({
        randomImage:function(config) {

            var config = $.extend({}, $.randomImage.defaults, config); 

             return this.each(function() {

                    var imageNames = config.myImages;

                    var imageCaptions = config.myCaptions;

                    var imageNamesSize = imageNames.length;

                    var randomNumber = Math.floor(Math.random()*imageNamesSize);

                    var displayImage = imageNames[randomNumber];

                    var displayCaption = imageCaptions[randomNumber];

                    var fullPath = config.path + displayImage;

                    $(this).attr( { src: fullPath, alt: displayImage });
                    $("#caption").html(displayCaption);
            }); 
        }
});

})(jQuery);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:51:40.943

将一组标题添加到 $.randomImage.defaults & config 对象。
然后使用检索`var caption = config.captions[randomNumber];`

或者

把`myImages: ['image1.jpg', 'image2.jpg','image3.jpg'`……
改成`myImages: [{image: 'image1.jpg', caption: 'My Caption},`……

# mysql - 使用 Select 语句更新

> ID：15858925
> 
> 赞同：2
> 
> 时间：2013-04-07T04:40:44.390
> 
> 标签：mysql, sql, sql-update

我想写一个这样的查询：

```
UPDATE `test_credit` 
SET `test_credit`.`credit`=(`test_credit`.`credit`-((`test_credit`.`credit`/100)*5)) 
WHERE `test_credit`.`name` = `users`.`uname` 
```

事实上，我想查询一下`users`。`uname`= `test_credit`。`name`但是mysql说它有错误并意识到`users`。`uname`作为列

什么是正确的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T04:43:16.980

您需要使用 table 显式加入它`users`。据我根据您的查询的理解，您想要计算两个表上`credit`是否`names`存在。

试试这个，

```
UPDATE  test_credit a
        INNER JOIN users b
            ON a.name = b.uname
SET     a.credit = (a.credit - ((a.credit/100) * 5.0)) 
-- WHERE  b.parent= "example" 
```

# iphone - 提高 ccTouchesBegan 的响应能力

> ID：15858927
> 
> 赞同：0
> 
> 时间：2013-04-07T04:41:22.767
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, box2d

目前，我有一个益智游戏，其中一些对象可以使用 ccTouchesBegan && ccTouchesMoved 方法移动

在 ccTouchesBegan 中调用：

```
if (CGRectContainsPoint(newBoundingBox, touchLocation))
    {
        //Set the selectedSprite to the sprite with newBoundingBox
    } 
```

然后在 ccTouchesMoved 我做：

```
CGPoint translation = ccpSub(touchLocation, oldTouchLocation);
newPos = ccpAdd(selSprite.position, translation);
selectedSprite.position = newPos; 
```

现在这一切都很好而且花花公子，但是，我正在移动的一些对象大约是 140x40 像素（在 320x480 iPhone 上），有时 ccTouchesBegan 方法不会承认包含 touchLocation 的边界框。

我的问题是，我可以增加对象边界框的大小，以便如果用户“错过”触摸一点，它会帮助他们吗？需要您在触摸屏上如此精确地移动障碍物，这有点令人沮丧。

编辑：对于 iPhone：

我如何获得 touchLocation，这是在 ccTouchesBegan 中：

```
NSSet *touchSet = [event allTouches];
int numberOfTouches = [touchSet count];
CGPoint touchLocation = [self convertTouchToNodeSpace:[touches anyObject]]; 
```

allTouches 在触摸开始时自动传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:51:32.430

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [self convertTouchToNodeSpace: touch];

    for (CCSprite *tempSprite in sprites )
    {
                //Increase the size of bounding box..
        CGRect rect=tempSprite.boundingBox;
                rect.size.height=rect.size.height + 20;
                rect.size.width=rect.size.width + 20;
        if (CGRectContainsPoint(rect, location))
        {
                   //Your stuffs
        }
    }
} 
```

# c# - eBay API：如何指定“标准运输（FedEx Ground 或 FedEx Home Delivery®）”作为运输服务？

> ID：15858929
> 
> 赞同：2
> 
> 时间：2013-04-07T04:41:37.057
> 
> 标签：c#, .net, ebay-api

我想知道如何使用 eBay API 将“标准运输（FedEx Ground 或 FedEx Home Delivery®）”指定为运输服务。任何人都可以提供任何指示吗？所有样品都使用“标准运输”选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:10:13.853

您需要指定**FedExHomeDelivery**。可以在[此处](http://faq.frooition.com/article/what-listing-information-can-i-import-and-export-185.html#ebay-site-details)找到大多数 eBay 网站的运输服务表。只需将 ID 中的值用于您的 eBay API 调用*的导入列。*

随着运输服务的类型随着时间的推移而变化，您可能希望通过 API 定期检索最新的服务，如下所示。

*   对于您感兴趣的每个 eBay 站点，使用*ShippingServiceDetails*的*DetailName*值调用*[GeteBayDetails](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GeteBayDetails.html)*。
***   在结果中迭代所有*ShippingServiceDetails*元素。每个都是您指定的站点的运输服务。*   您需要检查的每项服务的重要属性是，
    *   *ValidForSellingFlow* - 如果此设置为*“true”*，则该服务可以在 Add/Revise/Relist API 调用中使用，否则您将无法使用它。
    *   *描述*- 您可以在向用户提供服务时使用此值。文本应与用户通过 eBay 列出时看到的内容相匹配。
    *   *ShippingService* - 这是您要在 API 调用中使用的值。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:35:26.470

[您可以在 的文档中`ShippingServiceCodeType`](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/types/ShippingServiceCodeType.html)找到所有可用的运输方式。

请注意使用正确的站点 ID 来放置项目。**

# function - 私有函数与嵌套函数

> ID：15858935
> 
> 赞同：7
> 
> 时间：2013-04-07T04:42:25.943
> 
> 标签：function, f#, functional-programming

问题是：

何时使用私有函数，何时使用嵌套函数？（我问的是**F#**，但也许答案可能与其他功能语言相关）

一个小例子

```
namespace SomeName

module BinaryReaderExt =
    open System.IO

    let seek (reader : BinaryReader) positions =
        reader.BaseStream.Seek(positions, SeekOrigin.Current) |> ignore

module Mod =
    open System.IO

    let private prFun reader:BinaryReader =
        //do something
        BinaryReaderExt.seek reader 10L

    let outerFun (stream :System.IO.Stream) =
        let reader = new System.IO.BinaryReader(stream)
        let seek = BinaryReaderExt.seek reader

        let nestedFun () =
            seek 10L
            //do something

        nestedFun()
        prFun reader 
```

嵌套函数可以使用更高范围的数据是一个很大的好处。也不会污染周围的模块。但是看起来很笨拙，不是吗？特别是当有一些大型嵌套函数时

相反，私有函数可以公开并进行测试。而且它们看起来更具可读性

你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T13:17:19.610

我`private`经常在模块中使用函数——通常用于模块中其他函数使用的“帮助”函数，但不需要暴露给外部代码。

函数的另一个用例`private`是简单地使代码更具可读性。如果一个函数嵌套在另一个函数中，但它太长而无法阅读——例如，如果嵌套函数的代码占它所包含的函数长度的一半以上——我通常会将它移到模块级别，使`private`调用函数的代码更容易理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:24:58.610

> 嵌套函数可以使用更高范围的数据，这是一个很大的好处。也不会污染周围的模块。

我同意你的观点。*我的建议是将函数保持在正确的范围内*。例如，如果函数只用在一个地方，最好是嵌套函数。例如，`loop`向上移动并使其成为`private`功能是没有意义的。

```
let length xs =
   let rec loop acc = function
      | [] -> acc
      | _::xs -> loop (acc + 1) xs
   loop 0 acc 
```

> 但是看起来很笨拙，不是吗？特别是当有一些大型嵌套函数时

如果您需要大型嵌套函数，很可能您做错了。它们应该被分解成多个小的嵌套函数，或者最外层的函数应该转换为一种类型。

> 相反，私有函数可以公开并进行测试。而且它们看起来更具可读性。

可读性是一个主观问题。我认为组织问题更重要。嵌套函数的要点是它们很简单，可以通过测试最外层的函数来测试。

当函数具有更多的适用性时，您可以将它们放入实用程序模块中，并在需要时打开该模块。请注意，除了标记功能之外，还有其他技术可以隐藏功能`private`。例如，您可以使用`fsi`文件来指示公开的接口。

# list - Prolog (SWI)：列表上的连词？

> ID：15858940
> 
> 赞同：1
> 
> 时间：2013-04-07T04:44:00.527
> 
> 标签：list, prolog

假设我有一个谓词 eval(A) 仅根据某些输入计算为真/假

现在的问题是，我想要另一个成功的谓词 **and(List, R)** 如果 List 为空/List 中每个元素的 eval 的合取为 R。其中**R 只是 true/false**。

因此，如果 List 有项目 [a, b, c]，则返回 [eval(a) ^ eval(b) ^ eval(c)] == R

我的尝试：

```
and([], true).
and([H|T], R) :- eval(H), and(T, R).
and([H|T], R) :- eval(H) = R. 
```

但我不知道如何正确地与 R 进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:39:59.433

Prolog 有一个*关系*数据模型，谓词不携带值。您必须向 eval/1 添加一个参数，保存“返回值”。

```
and([], true).
and([H|T], R) :-
 eval(H, X),  % could 'shortcircuit' to false here if X is false
 and(T, And),
 ( X == true, And == true -> R = true ; R = false ). 
```

*在不更改 eval/1 的情况下，编辑*可能会更好：

```
and(L, R) :- 
   maplist(eval, L) -> R = true ; R = false. 
```

# jquery - jquery在div之间切换类

> ID：15858943
> 
> 赞同：0
> 
> 时间：2013-04-07T04:44:25.113
> 
> 标签：jquery, coffeescript, toggle, toggleclass

如果我有两个 div 元素，用户可以在两个选项之间进行选择。

我想显示用户点击了它，所以当用户点击一个元素时，该类会添加一些样式。

现在我只掌握了基础知识。用户只能选择两个元素之一。因此，如果用户已经点击了一个元素，就会有样式。如果用户决定单击另一个元素，则删除先前的单击，然后在新单击时添加样式。

```
 $(".ind").on("click", ->
    $(this).toggleClass("selected")
  ); 
```

希望有人能指导我，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T04:53:32.663

给两个 div 一个相同的类：

```
<div class="ind targetDiv">This is div 1</div>

<div class="targetDiv">This is div 2</div> 
```

然后你可以使用jQuery：

```
$(".targetDiv").on("click", function() {
    $(this).toggleClass('selected').siblings().removeClass('selected');
}); 
```

[**演示**](http://jsfiddle.net/z3De7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T04:51:49.580

```
$(".ind").on "click", ->
    $(this).siblings(".ind").removeClass("selected")
    $(this).toggleClass("selected") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T08:17:59.373

这是我的例子[http://jsfiddle.net/omegaiori/wbcTr/](http://jsfiddle.net/omegaiori/wbcTr/)

```
$(".ind").click (function() {
    $(this).toggleClass('selected').siblings().removeClass('selected');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-12T08:25:08.803

需要这个项目，并发现如果您单击已选择的项目，它只会一起删除该类。

所以添加了这个，希望有人可以使用它。

```
$(".view-type .type").click(function () {
        if (!$(this).hasClass("checked")) {
            $(this).addClass("checked").siblings(".type").removeClass("checked");
        }
    }); 
```

# python - 如何从 Flask 装饰器将变量发送到 Jinja 模板？

> ID：15858947
> 
> 赞同：32
> 
> 时间：2013-04-07T04:45:08.220
> 
> 标签：python, templates, flask, decorator, jinja2

我的蓝图烧瓶应用程序周围的许多路线都需要向 jinja 发送“侧边栏数据”。

我正在寻找最有效的方法来做到这一点。他们必须比将我的“generate_sidebar_data（）”函数导入每个蓝图更好，反复说：

```
var1, var2, var3 = generate_sidebar_data() 
```

然后用'render_template'发送它们：

```
return render_template('template.html',
                           var1=var1,
                           var2=var2,
                           var3=var3
                      ) 
```

我想要的是一个装饰器，我可以把它放在与上面做同样的事情的路线上（运行函数并将变量发送到 jinja），但我不知道这是否可能。如何从装饰器函数内部将变量发送到 jinja？

```
@blueprint.route('/')
@include_sidebar_data
def frontpage():

    return render_template('template.html') 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-07T13:37:14.303

我将提出一些比使用装饰器或模板方法或类似方法更简单的方法：

```
def render_sidebar_template(tmpl_name, **kwargs):
    (var1, var2, var3) = generate_sidebar_data()
    return render_template(tmpl_name, var1=var1, var2=var2, var3=var3, **kwargs) 
```

是的，只是一个函数。这就是你真正需要的，不是吗？请参阅[此](http://flask.pocoo.org/snippets/15/)Flask Snippet 以获得灵感。它本质上是在不同的上下文中做同样的事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T07:54:57.347

您可以使用上下文处理器（[http://flask.pocoo.org/docs/api/#flask.Flask.context_processor](http://flask.pocoo.org/docs/api/#flask.Flask.context_processor)）：

```
def include_sidebar_data(fn):
    @blueprint.context_processor
    def additional_context():
        # this code work if endpoint equals to view function name
        if request.endpoint != fn.__name__:
            return {} 
        var1, var2, var3 = generate_sidebar_data()
        return {
            'var1': var1,
            'var2': var2,
            'var3': var3,
        }
    return fn

@blueprint.route('/')
@include_sidebar_data
def frontpage():
    return render_template('template.html') 
```

**UPD：**我更喜欢下一个示例，如果装饰器用于多个视图功能会更好：

```
sidebar_data_views = []

def include_sidebar_data(fn):
    sidebar_data_views.append(fn.__name__)
    return fn

@blueprint.context_processor
def additional_context():
    # this code work if endpoint equals to view function name
    if request.endpoint not in sidebar_data_views:
        return {} 
    var1, var2, var3 = generate_sidebar_data()
    return {
        'var1': var1,
        'var2': var2,
        'var3': var3,
    }

@blueprint.route('/')
@include_sidebar_data
def frontpage():
    return render_template('template.html') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T05:30:23.210

你可以像这样创建一个装饰器函数：

```
def include_sidebar_data(fn):
    template_name = fn()
    var1, var2, var3 = generate_sidebar_data()
    def wrapped():
        return render_template(template_name, var1=var2, var2=var2)
    return wrapped

@blueprint.route('/')
@include_sidebar_data
def frontpage():

    return 'template.html' 
```

# vb.net - VB.NET - 检查 URL 是目录还是文件

> ID：15858953
> 
> 赞同：0
> 
> 时间：2013-04-07T04:46:33.707
> 
> 标签：vb.net, directory

有没有办法在 VB.NET 中检查 URL 是否是目录？我见过很多检查本地路径是否是目录的方法，但是远程 url（即[http://website.com/foo](http://website.com/foo)）呢？我读到一些纯文本文件没有扩展名，所以我需要一个解决方案除了检查文件名是否包含空格或其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:37:28.070

您可以使用[`FileAttributes`](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)类：

```
'get the file attributes for file or directory
FileAttributes attr = File.GetAttributes("c:\\Temp")

'detect whether its a directory or file
If ((attr & FileAttributes.Directory) = FileAttributes.Directory) Then
    MessageBox.Show("Its a directory")
Else
    MessageBox.Show("Its a file")
End IF 
```

或者你可以使用这个[`Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类：

```
Private IsLocalPath(Byval p As String) As Boolean
  Return New Uri(p).IsFile
End Function 
```

您可以增强此方法以包括对某些无效 URI 的支持：

```
Private IsLocalPath(Byval p As String) As Boolean
  If (p.StartsWith("http:\\")) Then      
    Return False
  End IF

  Return New Uri(p).IsFile
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:19:30.910

我能想到的唯一解决办法就是尝试从网上下载文件，如果下载成功那么它就是一个文件，否则就不是一个文件（但是你不能确定这是一个目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T08:26:35.620

这对我有用...

```
If System.IO.Path.HasExtension(FileAddress.Text)  Then
   MessageBox.Show("Its a file")
Else
   MessageBox.Show("Its a directory")
End IF 
```

# php - 可以看到变量的值但不能用它来验证 PHP

> ID：15858954
> 
> 赞同：0
> 
> 时间：2013-04-07T04:46:33.640
> 
> 标签：php

```
<?php
function number_of_fb_comments()
{
    return $number = "<fb:comments-count href=" . get_permalink($post->ID) . " ></fb:comments-count>";
}
?>
<?php
function get_fb_comments()
{
    $number = number_of_fb_comments();

    if ($number == 1) {

        echo "<a href =$url#facebook_comments > $number Comment</a></span>";

    } else if ($number > 1) {

        echo "<a href =$url#facebook_comments > $number Comments</a></span>"; 

    } else {

        echo "<a href=$url#facebook_comments>Leave a comment</a> </span>";

    }
} ?> 
```

我正在尝试验证我的 facebook 评论，但我似乎无法在 if 语句中使用“$number”来验证它，但我可以回显该值并查看它。

所以它只会进入“其他”部分......

我已将 $number 作为全局变量并在使用 var_dumb($number) 之后

我在每个帖子上都看到了一系列的内容

```
 string(104) "0" 
 string(118) "1"
 string(111) "0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:54:56.673

`$number`您正在调用的返回一个字符串 ( ) `return $number = "<fb:comments-count href="`，它不是`1`或`>1`- 看来您希望从您的`number_of_fb_comments()`函数返回一些不同的数据。

# ruby-on-rails - 在您的视图中嵌入外部页面作为部分

> ID：15858957
> 
> 赞同：0
> 
> 时间：2013-04-07T04:46:48.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个在端口 3000 上运行的 rails 应用程序，并且在 5000 上运行另一个 Java Web 应用程序。根据提供的输入，rails 应用程序会生成一个动态链接，单击该链接会将您重定向到在端口 5000 上运行的应用程序。我想知道，如果有什么方法可以让我不用重定向到第二个应用程序，而是呈现一个视图，其中嵌入了第二个应用程序的内容。是否可以？ **更新**：Java 应用程序正在为浏览器生成基于 Flash 的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:22:39.897

以下是可能性：

*   你可以使用一个，`iframe`但很多人不想要这个。
*   您可以下载 Java 服务器的内容并将其包含在视图中。但这会增加总加载时间，也不是我所说的干净。
*   转储您的 Java 或 Ruby on Rails 应用程序并仅使用 Java 或 Ruby on Rails 解决它。

# ruby-on-rails - 创建新项目后无法启动 Rails 服务

> ID：15858966
> 
> 赞同：1
> 
> 时间：2013-04-07T04:48:03.593
> 
> 标签：ruby-on-rails

Rails 新手...我正在使用 mac 并创建了一个新的 rails 项目，但服务器无法启动。这是我得到的错误。我在这台 Mac 上有另一个项目，使用该项目时可以启动服务器。有人有这方面的经验吗？谢谢！

```
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin12.1.0/psych.bundle: warning: already initialized constant ANY
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin12.1.0/psych.bundle: warning: already initialized constant UTF8
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin12.1.0/psych.bundle: warning: already initialized constant UTF16LE
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin12.1.0/psych.bundle: warning: already initialized constant UTF16BE
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:12: warning: already initialized constant ANY
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:15: warning: already initialized constant UTF8
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:18: warning: already initialized constant UTF16LE
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb:21: warning: already initialized constant UTF16BE
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/sequence.rb:42: warning: already initialized constant ANY
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/sequence.rb:45: warning: already initialized constant BLOCK
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/sequence.rb:48: warning: already initialized constant FLOW
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:9: warning: already initialized constant ANY
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:12: warning: already initialized constant PLAIN
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:15: warning: already initialized constant SINGLE_QUOTED
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:18: warning: already initialized constant DOUBLE_QUOTED
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:21: warning: already initialized constant LITERAL
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb:24: warning: already initialized constant FOLDED
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/mapping.rb:16: warning: already initialized constant ANY
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/mapping.rb:19: warning: already initialized constant BLOCK
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/mapping.rb:22: warning: already initialized constant FLOW
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:10: warning: already initialized constant DISPATCH
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/scalar_scanner.rb:8: warning: already initialized constant TIME
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/scalar_scanner.rb:11: warning: already initialized constant FLOAT
/Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/parser.rb:33:in `<class:Parser>': superclass mismatch for class Mark (TypeError)
from /Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/parser.rb:32:in `<module:Psych>'
from /Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/parser.rb:1:in `<top (required)>'
from /Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:7:in `require'
from /Users/sisigu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:7:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/ordered_hash.rb:2:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/ordered_hash.rb:2:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/ordered_options.rb:1:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/ordered_options.rb:1:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/configuration.rb:2:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/configuration.rb:2:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie.rb:2:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie.rb:2:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/engine.rb:1:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/engine.rb:1:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/plugin.rb:1:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/plugin.rb:1:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:3:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:3:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails.rb:10:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails.rb:10:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/all.rb:1:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/all.rb:1:in `<top (required)>'
from /Users/sisigu/sisi_rails_projects/first_app/config/application.rb:3:in `require'
from /Users/sisigu/sisi_rails_projects/first_app/config/application.rb:3:in `<top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
from /Users/sisigu/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:58:11.163

创建后转到项目目录，然后使用命令安装包并使用`bundle install`命令启动 rails 服务器`rails server`。

# android - How to make an image map or hotspots on android

> ID：15858967
> 
> 赞同：0
> 
> 时间：2013-04-07T04:48:13.187
> 
> 标签：android, imagemap

Im making an app on android and need to make an image map or hotspots on an image so that if you click on a certain point of the image it does something.

![this is my image](https://i.stack.imgur.com/9RpfC.png)

The image above is what i need it for. I need it so that if you click on facebook, it does one thing, and if you click on the others it does another.

And yes I have tried making them buttons but, that is not what I need, I am just trying to learn how to make an image map.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T12:41:10.783

我遇到了同样的问题，我想将图像用作热点意味着无论您按下哪里，它都会有一些功能，这是一个很好的信息来源， [http://blahti.wordpress.com/2012/06/26 /images-with-clickable-areas/](http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/) 或者您也可以参考此页面， [手动定义布局周长，这意味着我想使用我的值来定义布局的边界](https://stackoverflow.com/questions/17269046/define-the-layout-perimeters-manually-means-i-want-to-use-my-values-to-define-th)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:16:01.393

如果您知道图像中区域的位置，那应该很容易。使用单个 ImageView。设置一个 onTouch 监听器，并寻找 DOWN 事件。记录位置。然后在 UP 事件中检查该原始位置。如果事件位置在图像的范围内，他们只需单击它。

您也可以将所有这些都向下执行，具体取决于您是否希望在他们第一次触摸它或当他们移开手指时发生切换（就像点击一样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:05:44.330

[http://speckyboy.com/2008/07/21/20-amazing-jquery-plugins-and-65-excellent-jquery-resources/](http://speckyboy.com/2008/07/21/20-amazing-jquery-plugins-and-65-excellent-jquery-resources/)。

对于演示[http://www.openstudio.fr/jquery-virtual-tour/salleformation.html](http://www.openstudio.fr/jquery-virtual-tour/salleformation.html)

为此，您可以使用 jquery、css、html。我已经下载了链接中的第二个。

![在此处输入图像描述](https://i.stack.imgur.com/4FWd9.png)

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

然后在我的活动中显示与

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView wv= (WebView) findViewById(R.id.wv);
        wv.getSettings().setPluginsEnabled(true);
        WebSettings webSettings = wv.getSettings();
        webSettings.setJavaScriptEnabled(true);
        wv.loadUrl("file:///android_asset/index.html");
    }
} 
```

您也可以使用工具@http: [//360flashtour.com/](http://360flashtour.com/)。下载免费版本相应地修改源代码。您可以为图像创建热点。定义单击图像时的操作。

# java - Giving a relative path, so that the sound works as I run the jar file on any machine

> ID：15858968
> 
> 赞同：0
> 
> 时间：2013-04-07T04:48:16.953
> 
> 标签：java

In the `utility` package as shown in the snapshot, there is a class `Constants`. In the same directory as of `utility` there is a `folder` called `sounds`, also shown in the snapshot. Till now I have been giving the complete path of the `.wav` files.

*`Like W:/UnderTest/Blaah/Blaaaaah/Foo/sounds/file.wav`*

How should I give the path, so that when I make a `.jar` file of it, the sound still works. I tried this :

```
../sounds/Player_1.wav 
```

but it doesn't work and I get `java.io.FileNotFoundException: ..\sounds\Player_1.wav (The system cannot find the path specified)`

![enter image description here](https://i.stack.imgur.com/gx5XT.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:53:00.310

try this....

```
URL url = Constants.class.getResource("/sounds/file.wav"); 
```

the url in which now gets the path of your file....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T05:09:07.210

在这种情况下，最好加载相对于根类路径的资源：

```
URL soundURL = Thread.currentThread().getContextClassLoader()
        .getResource("/sounds/file.wav"); 
```

您还可以将资源作为流获取：

```
InputStream soundURLStream = Thread.currentThread().getContextClassLoader()
        .getResourceAsStream("/sounds/file.wav"); 
```

这和它之间的主要区别`Class.getResource`是`Class.getResource`假设提供的路径是相对于***它***在类层次结构中的位置。因此，给定相对路径“/sounds/file.wav”，`getResource`从 class调用`utility.Constants`，将尝试`file.wav`从 package 解析资源`utility.sounds`。而使用类加载器和相同的相对路径，资源将从`sounds`. 一个微妙但重要的区别。

# ruby-on-rails - Rails：过滤结果的问题

> ID：15858969
> 
> 赞同：0
> 
> 时间：2013-04-07T04:48:24.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试按年龄过滤结果，堆栈中的某个人非常友好地提出了一种方法来做到这一点。在我的索引操作中，我有：

```
@users = User.all
@users = User.where("birthday >= ? AND birthday <= ?", params[:min_age].to_i.years.ago + 1.day, params[:max_age].to_i.years.ago) 
```

我希望默认显示所有用户，然后为 current_user 提供按年龄过滤的选项。但是使用上面的代码，它也会选择第二行并自动过滤结果。结果是过滤了今天或昨天生日的用户，因为没有传入参数，默认不显示用户。我想要一些功能，如果没有传入参数，它不会运行上面第二行中的代码，或者如果这是不可能的，如果没有传入参数，我可以有默认参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:52:12.773

你可以试试：

```
@users = User.all
@users = @users.where("birthday >= ?", params[:min_age].to_i.years.ago + 1.day) if params[:min_age]
@users = @users.where("birthday <= ?", params[:max_age].to_i.years.ago) if params[:max_age] 
```

也许：

```
if params[:min_age] && params[:max_age]
  @users = User.where("birthday >= ? AND birthday <= ?", params[:min_age].to_i.years.ago + 1.day, params[:max_age].to_i.years.ago)
else
  @users = User.all
end 
```

# objective-c - 从弧度转换为度数错误

> ID：15858970
> 
> 赞同：3
> 
> 时间：2013-04-07T04:48:38.017
> 
> 标签：objective-c

我需要将弧度转换为度数。我已经通过 x*180/Pi 进行了尝试，问题是我的输出角度以度分秒为单位，因此转换中的小错误会导致大问题。

```
For example: (aCos(0)*180)/Pi = 90.00000250 
```

在以 10 为底的宇宙中，它应该是 90.00000000

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T04:50:47.937

在代码中使用以下宏将弧度转换为度数：

```
#define RADIANS_TO_DEGREES(radians) ((radians) * (180.0 / M_PI)) 
```

例子：

```
NSLog(@"Output radians as degrees: %f", RADIANS_TO_DEGREES(0.785398)); 
```

通过[这个链接](http://iosdevelopertips.com/graphics/radians-to-degrees-and-degrees-to-radians.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-30T17:37:05.433

正确的解决方案是 import`GLKit`
然后您可以使用 GLKit 已经实现的以下 2 个功能：
`GLKMathDegreesToRadians()`
`GLKMathRadiansToDegrees()`

函数`GLKit`返回的值很好！

目标-C：

```
import <GLKit.h>

float angleInRadian = GLKMathDegreesToRadians(360.0);
// Return 6.2831854820
float angleInDegrees = GLKMathRadiansToDegrees(angleInRadian);
// Return 360.0000000000 
```

斯威夫特：

```
import GLKit

let angleInRadian: Float = GLKMathDegreesToRadians(360.0)
// Return 6.2831855
let angleInDegrees: Float = GLKMathRadiansToDegrees(angleInRadian)
// Return 360.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:25:33.457

问题是我应该使用 acosf(float) 而应该使用 ace(double)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-30T16:09:05.057

这对我有用。您也可以`#import <GLKit/GLKit.h>` and 使用`GLKMathDegreesToRadians()`or `GLKMathRadiansToDegrees()`。

```
-(CGFloat) degreesToRadians:(CGFloat) degrees {
    return degrees == 0.0 ? 0: degrees * M_PI / 180;
}

-(CGFloat) radiansToDegrees:(CGFloat) radians {
    return radians == 0.0 ? 0: radians * 180 / M_PI;
} 
```

# java - Receving data form using HttpURLConnection.getOutputStream,chinese encoding wrong(The same code,why the result is not the same?)

> ID：15858976
> 
> 赞同：1
> 
> 时间：2013-04-07T04:49:43.193
> 
> 标签：java, encoding, character, httprequest, httpurlconnection

everybody: I try to make a httpRequest for getting data,there's something wrong while response contain chinese characters.I got a String with HttpURLConnection.getInputStream()(see /*test code.*/),I have wrote a main method on my local environment to test this code.And it works well!But when I startup my project,using this code for requesting data,the problem came out...(from the system.out below we can see the chinese characters are wrong )I don't understand why it cant be translate into write encoding. And when I copy (/*test code.*/) to static main method and run it,it seems no any problem,right?The same code,why the result is not the same? my computer environment : win7,project and tomcat all use utf-8,request and response encoding both utf-8,too. Here's my code:

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.charset.Charset;
import java.util.Map;
import java.util.Vector;

public class HttpRequestUtil {
    private String defaultContentEncoding;  

    public HttpRequestUtil() {  
        this.defaultContentEncoding = Charset.defaultCharset().name();  
    }  

    public HttpRequestUtil(String encoding) {  
        this.defaultContentEncoding = encoding;  
    } 

    /** 
     * 发送GET请求 
     *  
     * @param urlString 
     *            URL地址 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendGet(String urlString) throws IOException {  
        return this.send(urlString, "GET", null, null);  
    }  

    /** 
     * 发送GET请求 
     *  
     * @param urlString 
     *            URL地址 
     * @param params 
     *            参数集合 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendGet(String urlString, Map<String, String> params)  
            throws IOException {  
        return this.send(urlString, "GET", params, null);  
    }  

    /** 
     * 发送GET请求 
     *  
     * @param urlString 
     *            URL地址 
     * @param params 
     *            参数集合 
     * @param propertys 
     *            请求属性 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendGet(String urlString, Map<String, String> params,  
            Map<String, String> propertys) throws IOException {  
        return this.send(urlString, "GET", params, propertys);  
    }  

    /** 
     * 发送POST请求 
     *  
     * @param urlString 
     *            URL地址 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendPost(String urlString) throws IOException {  
        return this.send(urlString, "POST", null, null);  
    }  

    /** 
     * 发送POST请求 
     *  
     * @param urlString 
     *            URL地址 
     * @param params 
     *            参数集合 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendPost(String urlString, Map<String, String> params)  
            throws IOException {  
        return this.send(urlString, "POST", params, null);  
    }  

    /** 
     * 发送POST请求 
     *  
     * @param urlString 
     *            URL地址 
     * @param params 
     *            参数集合 
     * @param propertys 
     *            请求属性 
     * @return 响应对象 
     * @throws IOException 
     */  
    public HttpResponsUtil sendPost(String urlString, Map<String, String> params,  
            Map<String, String> propertys) throws IOException {  
        return this.send(urlString, "POST", params, propertys);  
    }  

    /** 
     * 发送HTTP请求 
     *  
     * @param urlString 
     * @return 响映对象 
     * @throws IOException 
     */  
    private HttpResponsUtil send(String urlString, String method,  
            Map<String, String> parameters, Map<String, String> propertys)  
            throws IOException {  
        HttpURLConnection urlConnection = null;  

        if (method.equalsIgnoreCase("GET") && parameters != null) {  
            StringBuffer param = new StringBuffer();  
            int i = 0;  
            for (String key : parameters.keySet()) {  
                if (i == 0)  
                    param.append("?");  
                else  
                    param.append("&");  
                param.append(key).append("=").append(parameters.get(key));  
                i++;  
            }  
            urlString += param;  
        }  
        URL url = new URL(urlString);  
        urlConnection = (HttpURLConnection) url.openConnection();  

        urlConnection.setRequestMethod(method);  
        urlConnection.setDoOutput(true);  
        urlConnection.setDoInput(true);  
        urlConnection.setUseCaches(false);  

        if (propertys != null)  
            for (String key : propertys.keySet()) {  
                urlConnection.addRequestProperty(key, propertys.get(key));  
            }  

        if (method.equalsIgnoreCase("POST") && parameters != null) {  
            StringBuffer param = new StringBuffer();  
            for (String key : parameters.keySet()) {  
                param.append("&");  
                param.append(key).append("=").append(parameters.get(key));  
            }  
            urlConnection.getOutputStream().write(param.toString().getBytes());  
            urlConnection.getOutputStream().flush();  
            urlConnection.getOutputStream().close();  
        }  

        return this.makeContent(urlString, urlConnection);  
    }  

    /** 
     * 得到响应对象 
     *  
     * @param urlConnection 
     * @return 响应对象 
     * @throws IOException 
     */  
    private HttpResponsUtil makeContent(String urlString,  
            HttpURLConnection urlConnection) throws IOException {  
        HttpResponsUtil httpResponser = new HttpResponsUtil();  
        try {  
            InputStream in = urlConnection.getInputStream();  
            //这里如果不指定InputStreamReader的编码，当中文字符超过两个时就会出现乱码（utf8情况下）
            BufferedReader bufferedReader = new BufferedReader(  
                    new InputStreamReader(in, this.defaultContentEncoding));  
            httpResponser.contentCollection = new Vector<String>();  
            StringBuffer temp = new StringBuffer();  
            String line = bufferedReader.readLine();  
            while (line != null) {  
                httpResponser.contentCollection.add(line);  
                temp.append(line);  //.append("\r\n")
                line = bufferedReader.readLine();  
            }  
            bufferedReader.close();  

            String ecod = urlConnection.getContentEncoding();  
            if (ecod == null){
                ecod = this.defaultContentEncoding;
                httpResponser.content = temp.toString();
                /*test code.*/
                System.out.println("ecod is" + ecod);
                //ecod isUTF-8
                System.out.println("temp = " + temp.toString());
                //temp = {"tags":[{"r_id":3553740735078269,"tag":"再测试"},{"r_id":3555331928010955,"tag":"再测试"},{"r_id":3555332033148401,"tag":"再测试,测试好多个字符串"}],"rids":"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624","idArr":["3555332033148401","3555331928010955","3553740735078269","3553509628288136","3552801450193593","3550638895838037","3550607615227068","3550334377352366","3550333965816322","3550315184067715","3550136490112256","3550098295918936","3550094449884887","3550094122996559","3550092986220398","3550090717120421","3550090532251655","3550089362475695","3549897523877864","3549756045751486","3549719639064459","3549564726035910","3549379539997223","3549377979585685","3549373109656624"],"uId":1916364215,"type":3}
                System.out.println("temp after encode: "+new String(temp.toString().getBytes(), ecod));
                //temp after encode: {"tags":[{"r_id":3553740735078269,"tag":"?????"},{"r_id":3555331928010955,"tag":"?????"},{"r_id":3555332033148401,"tag":"?????,??????????"}],"rids":"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624","idArr":["3555332033148401","3555331928010955","3553740735078269","3553509628288136","3552801450193593","3550638895838037","3550607615227068","3550334377352366","3550333965816322","3550315184067715","3550136490112256","3550098295918936","3550094449884887","3550094122996559","3550092986220398","3550090717120421","3550090532251655","3550089362475695","3549897523877864","3549756045751486","3549719639064459","3549564726035910","3549379539997223","3549377979585685","3549373109656624"],"uId":1916364215,"type":3}
                String str = "{\"tags\":[{\"r_id\":3553740735078269,\"tag\":\"再测试\"},{\"r_id\":3555331928010955,\"tag\":\"再测试\"},{\"r_id\":3555332033148401,\"tag\":\"再测试,测试好多个字符串\"}],\"rids\":\"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624\",\"idArr\":[\"3555332033148401\",\"3555331928010955\",\"3553740735078269\",\"3553509628288136\",\"3552801450193593\",\"3550638895838037\",\"3550607615227068\",\"3550334377352366\",\"3550333965816322\",\"3550315184067715\",\"3550136490112256\",\"3550098295918936\",\"3550094449884887\",\"3550094122996559\",\"3550092986220398\",\"3550090717120421\",\"3550090532251655\",\"3550089362475695\",\"3549897523877864\",\"3549756045751486\",\"3549719639064459\",\"3549564726035910\",\"3549379539997223\",\"3549377979585685\",\"3549373109656624\"],\"uId\":1916364215,\"type\":3}";

                System.out.println("compare two string:" + temp.toString().equals(str));
                //compare two string:true
                StringBuffer sb = new StringBuffer();
                sb.append(str);
                String s = new String(sb.toString().getBytes(), "UTF-8");
                System.out.println("s test:" + s);
                //s test:{"tags":[{"r_id":3553740735078269,"tag":"?????"},{"r_id":3555331928010955,"tag":"?????"},{"r_id":3555332033148401,"tag":"?????,??????????"}],"rids":"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624","idArr":["3555332033148401","3555331928010955","3553740735078269","3553509628288136","3552801450193593","3550638895838037","3550607615227068","3550334377352366","3550333965816322","3550315184067715","3550136490112256","3550098295918936","3550094449884887","3550094122996559","3550092986220398","3550090717120421","3550090532251655","3550089362475695","3549897523877864","3549756045751486","3549719639064459","3549564726035910","3549379539997223","3549377979585685","3549373109656624"],"uId":1916364215,"type":3}
                /*test code.*/

            } else{
                httpResponser.content = new String(temp.toString().getBytes(), ecod);
            } 

            httpResponser.urlString = urlString;  

            httpResponser.defaultPort = urlConnection.getURL().getDefaultPort();  
            httpResponser.file = urlConnection.getURL().getFile();  
            httpResponser.host = urlConnection.getURL().getHost();  
            httpResponser.path = urlConnection.getURL().getPath();  
            httpResponser.port = urlConnection.getURL().getPort();  
            httpResponser.protocol = urlConnection.getURL().getProtocol();  
            httpResponser.query = urlConnection.getURL().getQuery();  
            httpResponser.ref = urlConnection.getURL().getRef();  
            httpResponser.userInfo = urlConnection.getURL().getUserInfo();  

            httpResponser.contentEncoding = ecod;  
            httpResponser.code = urlConnection.getResponseCode();  
            httpResponser.message = urlConnection.getResponseMessage();  
            httpResponser.contentType = urlConnection.getContentType();  
            httpResponser.method = urlConnection.getRequestMethod();  
            httpResponser.connectTimeout = urlConnection.getConnectTimeout();  
            httpResponser.readTimeout = urlConnection.getReadTimeout();  

            return httpResponser;  
        } catch (IOException e) {  
            throw e;  
        } finally {  
            if (urlConnection != null)  
                urlConnection.disconnect();  
        }  
    }  

    /** 
     * 默认的响应字符集 
     */  
    public String getDefaultContentEncoding() {  
        return this.defaultContentEncoding;  
    }  

    /** 
     * 设置默认的响应字符集 
     */  
    public void setDefaultContentEncoding(String defaultContentEncoding) {  
        this.defaultContentEncoding = defaultContentEncoding;  
    }  

    public static void main(String[] args) throws Exception {
        String str = "{\"tags\":[{\"r_id\":3553740735078269,\"tag\":\"再测试\"},{\"r_id\":3555331928010955,\"tag\":\"再测试\"},{\"r_id\":3555332033148401,\"tag\":\"再测试,测试好多个字符串\"}],\"rids\":\"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624\",\"idArr\":[\"3555332033148401\",\"3555331928010955\",\"3553740735078269\",\"3553509628288136\",\"3552801450193593\",\"3550638895838037\",\"3550607615227068\",\"3550334377352366\",\"3550333965816322\",\"3550315184067715\",\"3550136490112256\",\"3550098295918936\",\"3550094449884887\",\"3550094122996559\",\"3550092986220398\",\"3550090717120421\",\"3550090532251655\",\"3550089362475695\",\"3549897523877864\",\"3549756045751486\",\"3549719639064459\",\"3549564726035910\",\"3549379539997223\",\"3549377979585685\",\"3549373109656624\"],\"uId\":1916364215,\"type\":3}";
        StringBuffer sb = new StringBuffer();
        sb.append(str);
        String s = new String(sb.toString().getBytes(), "UTF-8");
        System.out.println("s test:" + s);
        //s test:{"tags":[{"r_id":3553740735078269,"tag":"再测试"},{"r_id":3555331928010955,"tag":"再测试"},{"r_id":3555332033148401,"tag":"再测试,测试好多个字符串"}],"rids":"3555332033148401,3555331928010955,3553740735078269,3553509628288136,3552801450193593,3550638895838037,3550607615227068,3550334377352366,3550333965816322,3550315184067715,3550136490112256,3550098295918936,3550094449884887,3550094122996559,3550092986220398,3550090717120421,3550090532251655,3550089362475695,3549897523877864,3549756045751486,3549719639064459,3549564726035910,3549379539997223,3549377979585685,3549373109656624","idArr":["3555332033148401","3555331928010955","3553740735078269","3553509628288136","3552801450193593","3550638895838037","3550607615227068","3550334377352366","3550333965816322","3550315184067715","3550136490112256","3550098295918936","3550094449884887","3550094122996559","3550092986220398","3550090717120421","3550090532251655","3550089362475695","3549897523877864","3549756045751486","3549719639064459","3549564726035910","3549379539997223","3549377979585685","3549373109656624"],"uId":1916364215,"type":3}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:40:46.827

我找到了解决方案，使用下面的代码：

```
httpResponser.content = new String(temp.toString().getBytes(this.defaultContentEncoding), ecod); 
```

# virtualenv - 无法在 virtualenv 中卸载包

> ID：15858978
> 
> 赞同：2
> 
> 时间：2013-04-07T04:49:52.210
> 
> 标签：virtualenv, pip, virtualenvwrapper

[我通过virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito)安装了 virtualenv + virtualenvwrapper 。但是，现在从我的 virtualenvs 中卸载软件包似乎给我带来了问题（例如，`distribute`）。

看来`distribute`我的 virtualenvs 使用的是`/home/skrd/.venvburrito`. 如果在 virtualenv 中，我尝试升级`distribute`，它会安装到`/home/skrd/.virtualenvs`但 virtualenv 本身仍在使用 at `/home/skrd/.venvburrito`。这样，需要更新的软件包`distribute`仍然无法工作。

看，

```
(test)$ $ pip uninstall distribute
Not uninstalling distribute at /home/skrd/.venvburrito/lib/python/distribute-0.6.27-py2.7.egg, outside environment /home/skrd/.virtualenvs/test 
```

我试过重命名`.venvburrito`目录（相当于删除它，但有备份），但这会破坏我的 virtualenvs。我现在如何卸载软件包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T10:05:48.287

我仍然不明白这里发生了什么，但我只是想检查一下在 virtualenv 之外为我的系统的 Python 安装了什么。在那里我看到了分发，其版本与在 virtualenv 中给我带来问题的版本相似。

我升级了distribute的非virtualenv安装，下次我签入我的virtualenv时，distribute安装也升级了。

（所以，是的，我知道我的问题的初衷是删除分发。但这只是更新它的中间步骤 - 更新无法继续，因为它无法删除当前安装的分发。所以，那里，问题解决了。）

# c# - 错误地更新多对多连接表

> ID：15858981
> 
> 赞同：0
> 
> 时间：2013-04-07T04:50:53.677
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first, many-to-many

我有一个 ChangeRequest 对象和一个具有多对多关系的 BusinessArea 对象。有一个连接表：ChangeRequestBusinessArea。

如果我使用 BusinessAreaID 2、7、8 和 10 创建并保存新的 ChangeRequest，则连接表会更新得很好。

例如

```
ChangeRequestID BusinessAreaID
1               2
1               7
1               8
1               10 
```

但是，当我随后使用 BusinessAreaID 1、2、3、7 和 10 编辑并保存相同的 ChangeRequest 时，我得到以下信息：

```
ChangeRequestID BusinessAreaID
1               2
1               7
1               8
1               10
1               11
1               12
1               13
1               14
1               15 
```

这是代码：

**课程**

```
namespace MOC.Models
{
public class ChangeRequest
{
    public ChangeRequest()
    {
        BusinessAreas = new List<BusinessArea>();
    }

    public int ChangeRequestID { get; set; }
    public string ChangeRequestName { get; set; }

    public virtual ICollection<BusinessArea> BusinessAreas { get; set; }
}
}

namespace MOC.Models
{
public class BusinessArea
{
    public int BusinessAreaID { get; set; }
    public string BusinessAreaName { get; set; }

    public virtual ICollection<ChangeRequest> ChangeRequests { get; set; }
}
} 
```

**动作方法**

```
[HttpPost]
public ActionResult Edit(int id, ChangeRequestViewModel ChangeRequestViewModel)
{
    if (ModelState.IsValid)
    {
        var changeRequest = new ChangeRequest
        {
            ChangeRequestID = id
        };

        AddOrUpdateBusinessAreas(changeRequest, ChangeRequestViewModel.BusinessAreas);
        db.Entry(changeRequest).State = EntityState.Modified;
        db.SaveChangeRequests();

        return RedirectToAction("Index");
        }
        return View(ChangeRequestViewModel);
    }

    private void AddOrUpdateBusinessAreas(ChangeRequest ChangeRequest, IEnumerable<AssignedBusinessAreaData> assignedBusinessAreas)
    {
        foreach (var assignedBusinessArea in assignedBusinessAreas)
        {
            if (assignedBusArea.Assigned) {
                var busarea = new BusArea { BusAreaID = assignedBusArea.BusAreaID };
                Change.BusAreas.Add(busarea);
            } else {
                var busarea = new BusArea { BusAreaID = assignedBusArea.BusAreaID };
                Change.BusAreas.Remove(busarea);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:03:11.610

`ChangeRequest`您必须从数据库中加载s，*包括*当前与其相关的`BusinessArea`s，以便能够删除关系。

我假设如果必须将区域分配给或不分配，则它`ChangeRequestViewModel.AssignedBusinessAreaData`包含所有带有标志的可能区域。然后您的操作方法可能类似于以下内容：`Assigned``ChangeRequest`

```
[HttpPost]
public ActionResult Edit(int id, ChangeRequestViewModel ChangeRequestViewModel)
{
    if (ModelState.IsValid)
    {
        var changeRequest = db.ChangeRequests
            .Include(c => c.BusinessAreas) // Important !
            .Single(c => c.ChangeRequestID == id);

        foreach (var assignedBusArea in ChangeRequestViewModel.BusinessAreas)
        {
            if (assignedBusArea.Assigned)
            {
                if (!changeRequest.BusinessAreas
                    .Any(b => b.BusinessAreaID == assignedBusArea.BusAreaID))
                {
                    var busArea = new BusinessArea
                    {
                        BusAreaID = assignedBusArea.BusAreaID
                    };
                    db.BusinessAreas.Attach(busArea);
                    // Attach is important to avoid duplication of the area
                    changeRequest.BusinessAreas.Add(busArea);
                }
                // else do nothing if the assigned area
                // already belongs to the changeRequest
            }
            else
            {
                var busArea = changeRequest.BusinessAreas.SingleOrDefault(
                    b => b.BusinessAreaID == assignedBusArea.BusAreaID);
                if (busArea != null)
                    changeRequest.BusinessAreas.Remove(busArea);
                // else do nothing if the unassigned area
                // does not belong to the changeRequest anyway
            }
        }
        db.SaveChanges();

        return RedirectToAction("Index");
    }            

    return View(ChangeRequestViewModel);
} 
```

# xcode - Getting a "Missing Context For Method Declaration" implementing a map search bar in xcode

> ID：15858983
> 
> 赞同：0
> 
> 时间：2013-04-07T04:51:19.430
> 
> 标签：xcode

im getting an error that says "Missing Context For Method Declaration" when i implement this code into my viewcontroller.m:

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)theSearchBar {
    [theSearchBar resignFirstResponder];
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:theSearchBar.text completionHandler:^(NSArray *placemarks,      NSError *error) {
        //Error checking

        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        MKCoordinateRegion region;
        region.center.latitude = placemark.region.center.latitude;
        region.center.longitude = placemark.region.center.longitude;
        MKCoordinateSpan span;
        double radius = placemark.region.radius / 1000; // convert to km

        NSLog(@"[searchBarSearchButtonClicked] Radius is %f", radius);
        span.latitudeDelta = radius / 112.0;

        region.span = span;

        [theMapView setRegion:region animated:YES];
    }];
} 
```

# python - 在 Python 中去除某个字符

> ID：15858991
> 
> 赞同：1
> 
> 时间：2013-04-07T04:52:10.513
> 
> 标签：python

我有一个字符串`str="[0,1,12]"`

去除 , 和唯一将数字留在后面的最有效`"["`方法`"]"`是`","`什么`list`？我试过`.rstrip()`了，但它只接受字符串末尾的字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T04:54:21.210

将字符串计算为 a `list`：

```
from ast import literal_eval

numbers = literal_eval(your_string) 
```

# jquery-plugins - Call jquery plugins whenever a plugin is called

> ID：15858995
> 
> 赞同：0
> 
> 时间：2013-04-07T04:52:59.737
> 
> 标签：jquery-plugins

I have 3 jquery plugins - fixheadertable, jqTransform and facebox. Whenever fixheadertable plugin is called other two plugins are not working.

So i have to call those two plugins after each call of fixheadertable.

This is happening because fixheadertable recreates the table rows whenever i sort or use pager. So the plugins used in those table rows are not working.

The important thing is jqTransform and facebox should be applied only inside the table where fixheadertable plugin is applied. Otherwise facebox displays the content twice on overlay.

```
jQuery(document).ready(function($)
{
    $('.alter').fixheadertable({ 
    height : ($(window).height()- 200), 
    colratio : [30, ,50, 50], 
    zebra : true, 
    sortable : true,
    resizeCol : true,
    pager : false }); 

    $('form').jqTransform({imgPath:'../../assets/includes/formplugin/img/'});
    $('a[rel*=facebox]').facebox();
}); 
```

Edit :

Sample : [http://jsfiddle.net/rQXtZ/6/](http://jsfiddle.net/rQXtZ/6/)

First click edit link. And then click on country to sort. Again try edit link. now facebox will not work