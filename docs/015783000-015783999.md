# StackOverflow 问答 15783000-15783999

# php - 无法获取 php.ini 的更新值

> ID：15783001
> 
> 赞同：3
> 
> 时间：2013-04-03T09:02:29.433
> 
> 标签：php

我已经改变了 php.ini 在`php.ini`文件中的一些值，也通过 php 脚本，比如，

```
ini_set('upload_max_filesize', '10M');
ini_set('POST_MAX_SIZE', '10MB'); 
```

但是当我运行时`phpinfo()`它不会显示更新的值。

表明

`upload_max_filesize = 2M`

我想知道怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:20:19.917

您有权访问您的 Apache 配置吗？

也许这些参数在 Apache 配置的虚拟主机中通过 php_admin_value 被覆盖。如果是这种情况，那么您将无法在 php 脚本本身中更改此值。

另外，请查看以下帖子：[在 PHP 上更改 upload_max_filesize](https://stackoverflow.com/questions/1122418/changing-upload-max-filesize-on-php)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:39:50.887

首先，您的环境包含多个文件是很常见的`php.ini`，而您正在编辑的文件实际上并没有被使用。检查`php_info()`输出以获取加载的配置文件的路径以进行仔细检查。

如果它绝对正确，请重新启动您的 Web 服务器并仔细检查它仍然没有加载。

如果您仍然没有运气，请查看以下的返回值`ini_set()`：

```
if(ini_set('upload_max_filesize', '10M') === FALSE ||
   ini_set('POST_MAX_SIZE', '10MB') === FALSE)
{
    echo "Failed to set a configuration parameter.";
} else {
    // These functions returned strings containing the old value.
} 
```

让我们知道以上为您带来的回报。

# c++ - 时间：2019-01-01 标签：c++templatedoublestd::complex 规范与产品

> ID：15783010
> 
> 赞同：1
> 
> 时间：2013-04-03T09:02:51.500
> 
> 标签：c++, class, templates, std, norm

我写了一个模板类，它应该适用于 double 和 std::complex。正如假设的那样，我所有的方法都在 .hpp 文件中。除了一个。我必须专门研究一种方法，因为在某些地方我必须计算 double 的平方或 std::complex 的范数。对于“双重专业化”（A）更明确：

```
double a(2.0);
double b(0.0);
b = a*a; 
```

对于“复杂的专业化”（B）：

```
std::complex<double> a(2.0,3.0);
double b(0.0);
b = std::norm(a); 
```

我的问题是：

*   有没有办法通过使用适用于 double 和 complex 的函数来避免这些专业化？（因为 std::norm 仅适用于复杂......）

*   或者唯一的解决方案是将特化 (A) 的双 a 转换为复合体，然后仅使用特化 (B) 作为通用模板（适用于双精度和复数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:09:44.337

您可以通过引入自己的函数作为平方/范数包装器来最小化不同的情况：

```
template <typename T>
double square_or_norm(T x);

template<>
inline double square_or_norm(double x) { return x * x; }

template <>
inline double square_or_norm(std::complex<double> x) { return norm(x); } 
```

然后，在需要它的函数中使用它：

```
template <typename T>
T computation(T x) {
  return some_code_with(x, square_or_norm(x));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:15:14.587

您可以定义两个调用的函数模板**重载**（当涉及到函数模板时，*重载*通常比*专门*化更可取）`compute_norm()`，一个接受`std::complex`，一个接受无约束类型。不受约束的模板将调用`operator *`，而受约束的模板将调用`std::norm()`。

```
#include <complex>

template<typename T>
double compute_norm(T t)
{ return t * t; }

template<typename T>
double compute_norm(std::complex<T> const& t)
{ return std::norm(t); } 
```

然后，可以与 a`double`和 a一起使用的通用代码`complex<double>`将调用`compute_norm()`：

```
#include <iostream>

template<typename T>
void foo(T&& t)
{
    // ...
    double n = compute_norm(std::forward<T>(t));
    std::cout << n << std::endl;
    // ...
} 
```

例如，以下程序：

```
int main()
{
    double a(2.0);
    foo(a);

    std::complex<double> c(2.0, 3.0);
    foo(c);
} 
```

将输出：

```
4
13 
```

这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx%24255)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:29:59.720

如果你有一个符合标准的库，`std::norm`浮点类型有一个重载：

> **26.4.9**附加重载 [cmplx.over]
> 以下函数模板应具有附加重载： `arg norm conj proj imag real`
> 附加重载应足以确保：
> 
> 1.  如果参数的类型为 long double，那么它会被有效地强制转换为复数。
> 2.  否则，如果参数的类型为 double 或整数类型，则它被有效地转换为 complex<double>。
> 3.  否则，如果参数的类型为浮点数，那么它会被有效地转换为复数。

这应该有效（并且在[gcc 4.7.2](http://ideone.com/GzPAXp)上有效）

```
#include <complex>
#include <iostream>

int main()
{
    std::complex<double> c {1.5, -2.0};
    double d = 2.5;

    std::cout << "|c| = " << std::norm(c) << '\n'
              << "|d| = " << std::norm(d) << '\n';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:17:13.763

为什么不直接使用函数重载？

```
double myNorm(double);
double myNorm(std::complex<double>);

double myNorm(double x) {
    return x * x;
}
double myNorm(std::complex<double> x) {
    return std::norm(x);
} 
```

您可以将实现放在您的 .cpp 或（内联时）在您的头文件中。

# html - 如何在方向更改后设置按钮位置固定

> ID：15783013
> 
> 赞同：1
> 
> 时间：2013-04-03T09:03:07.777
> 
> 标签：html, jquery-mobile

我有一个在平板电脑上运行的 JQuery 移动应用程序。但我的问题是我的按钮（搜索）丢失了位置，如果我想在平板电脑方向为横向时看到它，我必须拖动屏幕。如何确保它在纵向和横向上仍然可见？

```
<div id="divBody" data-role="page" data-theme="c">

            <div data-role="header" class="hesto">         
                  <h1>Weld Splice </h1>
            </div>

            <div data-role="content">   
                  <div> <input type="text" name="text-1" id="txtBarcode"      class="barcodeTxt"  placeholder="Scan barcode" value=""/></div> 
                  <div id="divButton"> <a href="#" id="btnBarcode" data-role="button"   data-iconpos="right" data-inline="true">Search</a></div> 
            </div>

            <div id="divFooter" data-role="footer" >

            </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:18:12.550

`div`用类包装每一个 - 输入和按钮`ui-grid-solo`

```
<div class="ui-grid-solo">
 <input type="text" name="text-1" id="txtBarcode" class="barcodeTxt" placeholder="Scan barcode" value="" />
</div>
<div class="ui-grid-solo">
 <div id="divButton"><a href="#" id="btnBarcode" data-role="button" data-iconpos="right" data-inline="true" data-icon="search">Search</a>
 </div>
</div> 
```

*   **参考：** [网格 - JQM v1.3.0](http://view.jquerymobile.com/1.3.0/docs/widgets/grids/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:18:02.553

如果按钮被按下，为什么不把它放在标题栏中？

如果您对这种方法感到满意，您可以更改如下内容

```
<div id="divBody" data-role="page" data-theme="c">
    <div data-role="header" class="hesto">
         <h1>Weld Splice </h1>
 <a href="#" id="btnBarcode" data-role="button" data-iconpos="right" class="ui-btn-right">Search</a>

    </div>
    <div data-role="content">
        <div>
            <input type="text" name="text-1" id="txtBarcode" class="barcodeTxt" placeholder="Scan barcode" value="" />
        </div>
        <div id="divButton"></div>
    </div>
    <div id="divFooter" data-role="footer"></div>
</div> 
```

[在http://jsfiddle.net/mayooresan/DuReF/](http://jsfiddle.net/mayooresan/DuReF/)上查看现场小提琴

# java - JScrollPane 内 JPanel 上的 JTextArea 无法正确调整大小

> ID：15783014
> 
> 赞同：9
> 
> 时间：2013-04-03T09:03:10.830
> 
> 标签：java, swing, awt, jscrollpane, jtextarea

**我想实现以下目标：**

```
+------------------Other container(s)-----------------+
|        +------JScrollPane (vertical)-------+        |
|        | JTextField                        |        |
|        | Box.createRigidArea (vertical)    |        | 
|        | JTextArea                         |        |
|        | { etc.. any other J-component }   |        |
|        |                                   |        |
|        |                                   |        |
|        |                                   |        |
|        |                                   |        |
|        +-----------------------------------+        |
+-----------------------------------------------------+ 
```

**我能得到的最接近的是以下（伪）代码：**

```
JPanel container = new JPanel(new BorderLayout());
JPanel innerContainer = new JPanel();
innerContainer.setLayout(new BoxLayout(_innerContainer, BoxLayout.Y_AXIS));
JScrollPane scrollPane = new JScrollPane(innerContainer);
container.add(scrollPane, BorderLayout.NORTH); 
```

每当我想添加组件时，它们都会被添加到内部容器中：

```
innerContainer.add(new JTextField());
innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
innerContainer.add(new JTextArea());
innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
innerContainer.add(new JLabel()); 
```

.... ETC

**我面临以下问题：**

我让布局管理器处理所有 UI 元素的大小。所以最好我不使用任何 .setxxSize() 方法。一个被大量文本占据的 JTextArea 将使用所有需要的空间（垂直和水平）。这完全没问题。每当调整框架大小时，JTextArea 都会增长，这仍然很好。但是每当我缩小框架时，JTextArea 不会相应地调整。因此会出现一个水平滚动条，但我想避免这种情况。我希望用户只垂直滚动。

有没有人有一些好的提示？谢谢！

**编辑：**

**SSCCE：**

```
import java.awt.*;

import javax.swing.*;

public class VerticalStackPanel extends JFrame {

    public static void main(String[] args) {
        JFrame frame = new VerticalStackPanel();
        frame.setSize(800, 600);
        frame.setVisible(true);
    }

    public VerticalStackPanel() {
        super();

        JScrollPane scrollPane = new JScrollPane(createVerticalStackPanel());
        scrollPane.getVerticalScrollBar().setUnitIncrement(16);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

        getContentPane().add(scrollPane);
    }

    private Component createVerticalStackPanel() {
        JPanel container = new JPanel(new BorderLayout());
        container.add(createInnerContainer(), BorderLayout.NORTH);

        return container;
    }

    private Component createInnerContainer() {
        JPanel innerContainer = new JPanel();
        innerContainer.setLayout(new BoxLayout(innerContainer, BoxLayout.Y_AXIS));

        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));
        innerContainer.add(createTextArea());
        innerContainer.add(Box.createRigidArea(new Dimension(0, 10)));

        return innerContainer;
    }

    private Component createTextArea() {
        JTextArea textArea = new JTextArea();
        textArea.setText("Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vitae diam nunc. Proin vulputate, odio consectetur tincidunt aliquet, metus ipsum rhoncus tellus, in dignissim ligula tortor at risus. Aenean rhoncus lorem a magna luctus molestie. Fusce consequat enim vel quam pharetra varius. Vivamus porta condimentum orci non ultrices. Duis magna arcu, fringilla ut eleifend a, volutpat ac elit. Sed ligula enim, dictum id fringilla vitae, ornare vel nulla. Proin lobortis suscipit lectus eget placerat. Morbi aliquam dolor quis lectus tincidunt eu volutpat risus fermentum. Nunc et sapien a nisl aliquet auctor. Phasellus nec sem tellus, et scelerisque sapien. In a nibh vestibulum velit convallis sodales. Vestibulum tempor fringilla vulputate. Duis hendrerit dolor id urna aliquam cursus auctor enim pulvinar. Nulla rutrum fringilla eros, id congue nisi mattis in. Pellentesque consectetur eleifend mauris, ut aliquam purus convallis ac. Vestibulum pretium, sem at congue faucibus, leo leo volutpat odio, ut feugiat nulla felis a diam. Praesent dignissim eros ac eros semper auctor. Phasellus eu sapien nibh. Quisque pulvinar tristique lectus, quis porttitor purus suscipit sed. Curabitur gravida, ipsum ut vehicula aliquet, erat ipsum tincidunt nulla, eget bibendum felis dolor vel risus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus vitae nisl odio, blandit laoreet nibh.");
        textArea.setLineWrap(true);
        textArea.setWrapStyleWord(true);
        return textArea;
    }

} 
```

每当您水平调整框架大小时，只要框架变小，文本就会消失。出现一个水平滚动条，但因为：

```
scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER); 
```

文本消失了.. JTextArea 应相应调整

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T12:08:33.917

好的，所以问题是 JPanel 不喜欢嵌入到 JScrollPane 中。

为了让一个组件与 JScrollPane “玩得很好”，它需要实现 Scrollable。如果您只是将 JTextArea 添加到 JScrollPane 中，它将完全按照您的需要工作。

您需要创建一个小的自定义类来扩展 JPanel 并实现 Scrollable，而不是使用 JPanel 来保存所有 JTextAreas。

我重新编写了您的示例并将其粘贴在此处：[http](http://pastebin.com/q9x4fv3H) ://pastebin.com/q9x4fv3H ，以便您可以查看所有代码。可滚动的 JPanel 应如下所示：

```
private static class ScrollablePanel extends JPanel implements Scrollable{
    public Dimension getPreferredScrollableViewportSize() {
        return super.getPreferredSize(); //tell the JScrollPane that we want to be our 'preferredSize' - but later, we'll say that vertically, it should scroll.
    }

    public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
        return 16;//set to 16 because that's what you had in your code.
    }

    public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
        return 16;//set to 16 because that's what you had set in your code.
    }

    public boolean getScrollableTracksViewportWidth() {
        return true;//track the width, and re-size as needed.
    }

    public boolean getScrollableTracksViewportHeight() {
        return false; //we don't want to track the height, because we want to scroll vertically.
    }
} 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:48:55.633

您应该为您添加一个视口`scrollPane`：

```
scrollPane.setViewportView(textArea) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:17:29.503

采用

```
txtArea.setWrapStyleWord(true);
txtArea.setLineWrap(true); 
```

它包装文本并避免水平滚动窗格。

并尝试 [GridBagLayout。](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)使用 weightx 和 weighty。它将处理调整大小问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T13:30:11.680

## 启用换行时 JTextArea 永远不会缩小

我在带有 Gridlayout 的 JPanel 中有一个 JTextArea 有这个问题。通过简单地设置 TextArea 最小大小来解决我的问题。

```
textArea.setMinimumSize(new Dimension(20,40)); 
```

# windows-phone-8 - 如何删除 Windows Phone 模拟器中显示的额外图像？

> ID：15783018
> 
> 赞同：3
> 
> 时间：2013-04-03T09:03:15.673
> 
> 标签：windows-phone-8, windows-phone-8-emulator

![从模拟器捕获](https://i.stack.imgur.com/yIklk.png)

![在此处输入图像描述]

当我运行我的应用程序时，模拟器会在右上角显示一些不需要的图像或文本

如上图所示（用红色标记表示）。

这是什么图片或文字？

我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:05:42.560

这些数字是[帧速率计数器](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg588380%28v=vs.105%29.aspx)。您可以在以下位置启用/禁用它们`App.xaml.cs`：

```
// Show graphics profiling information while debugging.
if (System.Diagnostics.Debugger.IsAttached)
{
    // Display the current frame rate counters.
    Application.Current.Host.Settings.EnableFrameRateCounter = true;

    // other code…
} 
```

注释该行或将值更改为`false`以删除计数器。

# php - 使用php将sql结果保存到变量

> ID：15783022
> 
> 赞同：0
> 
> 时间：2013-04-03T09:03:44.160
> 
> 标签：php, sql

我有这个查询：

```
$result = "SELECT MAX(N) as maxid FROM (
    SELECT SUBSTRING(id_f, 2,len(id_f) -1)  as N 
    From formas  WHERE id_f LIKE '%D%'
    ) t" ;  
$res = odbc_exec($connection, $result) or die(odbc_error()); 
```

现在，如果我将查询放在 SQL SERVER 中，我会得到正确的结果。我需要将maxid保存为变量..怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:38:37.437

您需要的是函数[odbc_fetch_array](http://us.php.net/manual/en/function.odbc-fetch-array.php)。

```
$result = "SELECT MAX(N) as maxid FROM (
    SELECT SUBSTRING(id_f, 2,len(id_f) -1)  as N 
    From formas  WHERE id_f LIKE '%D%'
    ) t" ;  
$res = odbc_exec($connection, $result) or die(odbc_error());
$info = odbc_fetch_array($res);
$content[] = $info;
$maxN = $content[0] 
```

对于多行查询，您需要将函数封装在 while 循环中：

```
while($row = odbc_fetch_array($res)) 
{ 
    print_r($row); 
} 
```

# c# - kentico cms 中自定义字段的级联下拉列表

> ID：15783025
> 
> 赞同：3
> 
> 时间：2013-04-03T09:03:53.103
> 
> 标签：c#, asp.net, content-management-system, kentico

我在 CMS_USER 表中添加了两个新的自定义字段。

两个字段都是整数类型，表单控件是下拉列表类型。

目前，两个下拉列表都由编辑控件设置中的 SQL 查询填充。

我想实现功能，因为当用户从第一个下拉列表中选择任何值时，第二个下拉列表将根据第一个下拉列表的选定值的条件填充。

第二个下拉列表将填充第一个下拉选择的索引已更改。

我怎样才能做到这一点。

路径为**管理员登录**-> **CMSSiteManager** ->**管理**->**用户**->**编辑用户**->**自定义字段**。

第一个下拉列表是**CompanyName**，第二个是**CompanyAddress**

![在此处输入图像描述](https://i.stack.imgur.com/sdrK5.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:47:48.563

我想到的唯一想法（如果您不想创建自定义控件）是在 SQL 查询中解析宏。所以应该可以使用以下

```
SELECT AddressID, AddressName FROM TableWithAdresses WHERE AddressCompanyID = {% EditedObject.GetValue("CompanyID") %} 
```

作为第二个下拉列表的查询。使用集成 SQL 调试（CMS 站点管理器 -> 管理 -> 系统 -> 调试 -> SQL 调试）查看发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T10:42:03.350

您可以尝试自定义表单控件。见[http://devnet.kentico.com/docs/5_5r2/devguide/index.html?developing_form_controls.htm](http://devnet.kentico.com/docs/5_5r2/devguide/index.html?developing_form_controls.htm)

# visual-studio-2010 - 从 Visual Studio Performance Webtest 中获取 go.microsoft

> ID：15783026
> 
> 赞同：0
> 
> 时间：2013-04-03T09:03:53.163
> 
> 标签：visual-studio-2010, performance

对于我的（性能）网络测试，我使用的是 Visual Studio 2010。我从不同的域和机器执行此测试。并非所有机器都可以访问互联网（首选域除外），但有时测试需要调用 go.microsoft.com。有没有办法从结果中捕捉到这一点（所以它不会给出异常和失败的结果）。

我尝试更改主机文件，但是这在所有环境中都是不可能的。还有其他解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:50:41.937

使用性能脚本中的 NoFollow 重定向修复了此问题，但是如果还有其他可能性，我会很高兴听到它们

# asp-classic - IIS 7.5 - 没有活动调试器的“启用服务器端调试”

> ID：15783028
> 
> 赞同：4
> 
> 时间：2013-04-03T09:03:53.943
> 
> 标签：asp-classic, iis-7.5, visual-studio-debugging

我在 Windows 2008 R2 服务器上配置 IIS 7.5 时遇到了一些麻烦。我需要使用 Visual Studio 调试 .asp 页面，因此我在网站的 asp 调试部分启用了“启用服务器端调试”。

当我将调试器附加到 w3wp 进程时，一切正常，但如果它没有附加并加载代码中有一些错误的 asp 页面，在我的浏览器中我只会得到一个空白页面（代码 200）。

这与[此问题](https://stackoverflow.com/questions/603994/classic-asp-always-return-code-200-in-iis7)类似，但我无法将选项设置为 false，因为我需要它。

那么，即使我没有连接到 iis 进程的活动调试器，有没有办法在浏览器中显示错误？我已经激活了“向浏览器发送错误”，并在错误部分选择了“详细错误”。

非常感谢

里卡多

# java - 如何去除wav文件中的噪音？

> ID：15783032
> 
> 赞同：2
> 
> 时间：2013-04-03T09:03:59.567
> 
> 标签：java, android, audio, wav

我实际上是使用简单的公式 (a+b)/2 混合两个 wav 文件，其中 a 和 b 是来自两个 wav 文件的样本。这很好，我可以同时收听两个文件中的音频。但问题是背景中有很多 hssss 噪音（类似于收音机），我怎样才能摆脱这种白噪音/噪音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:12:41.543

您可以创建一个低通滤波器来消除噪声。

[如何使用java实现低通滤波器](https://stackoverflow.com/questions/4026648/how-to-implement-low-pass-filter-using-java)

请也查看此链接 [http://www.dsprelated.com/showcode/256.php](http://www.dsprelated.com/showcode/256.php)

# ms-access - 如何从一个表中复制一个记录集并添加到另一个表中？

> ID：15783036
> 
> 赞同：2
> 
> 时间：2013-04-03T09:04:11.113
> 
> 标签：ms-access, vba, recordset

我有两张桌子，我有一个链接到其中一张的表格。我想检查一个值，如果为真，则使用 VBA 将记录添加到另一个表中。任何人都可以帮助我吗？

这是我的代码，但它不起作用：

```
Dim rec1 As DAO.Recordset
Dim rec2 As DAO.Recordset

Set rec1 = CurrentDb.OpenRecordset("TotalTPAq")
Set rec2 = CurrentDb.OpenRecordset("Visi")

rec1.MoveFirst
Do Until rec1.EOF

    If rec1!Date = PlanDate.Value Then ' planDate is a text box
        rec2.AddNew
        rec2![Planing Date History] = PlanDate.Value
        rec2.Update
        rec2.Close
    End If
    rec1.MoveNext
Loop
rec1.Close

Set rec2 = Nothing
Set rec1 = Nothing

DoCmd.Close 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:26:50.480

这应该为您提供一个开始：

```
'Run query to fill table
Private Sub btnRnQry_Click()

    'No value entered
    If IsNull(Me.txtEntry) Or Me.txtEntry = "" Then
        MsgBox ("Is null or empty")
    Else
        'Assign value to variable
        Dim entry As String
        entry = Me.txtEntry

        Dim sql As String
        sql = "INSERT INTO tableTwo ([First Name],Surname,[Phone Number] )" & _
              "SELECT * " & _
              "FROM tableOne " & _
              "WHERE [First Name] = '" & entry & "';"

        'Run the SQL
        DoCmd.RunSQL sql

    End If

End Sub 
```

# php - 更改循环索引

> ID：15783038
> 
> 赞同：0
> 
> 时间：2013-04-03T09:04:13.583
> 
> 标签：php, foreach

我有同一个数组的内循环，但是在内循环中我删除了一些元素，新数组被分配给主数组，但出现主循环索引仍然不变的问题！

```
foreach ($newsletters as $index=>$mainNewsletterObj) {
    // var_dump($newsletters); // it prints new DATA !

         // the problem is here !
    echo 'up index is '.$index .'<br/>';  // it prints old index!!!!!!!!!!

      // make a copy of main array
      $newslettersArray = $newsletters; 

        //inner loop
     foreach ($newslettersArray as $key => $newsletterObj) {

    if ($newsletterObj['month'] == 3 );

         unset($newslettersArray[$key]);  //remove element
      } else
      {
     // make a new array of modified one to start index from 0
     $newslettersArray1 = array_values($newslettersArray); // to start index from 0

      // assign new modified array to the original one
     $newsletters = $newslettersArray1;

  }

}   // end inner loop

$index=0;
  echo 'down index is '.$index .'<br/>';  // it prints 0
 }  // end of outer loop 
```

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:07:54.367

不要更改原始数组！在进入循环之前创建该数组的副本，然后在必要时从副本中删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:43:44.920

使用`while (list($index, $mainNewsletterObj) = each($newsletters))`而不是`foreach ($newsletters as $index=>$mainNewsletterObj)`

# android-fragments - Android：何时注册和取消注册通知？

> ID：15783041
> 
> 赞同：4
> 
> 时间：2013-04-03T09:04:35.553
> 
> 标签：android-fragments, android-lifecycle, android-adapter

`Notifications`每当数据更改时，我都会使用接口来更新片段。

```
public interface Notifications {

    void register(ID id, Listener listener);
    void unregister(ID id, Listener listener);
    <T> void post(ID id, T value);

    interface Listener<T> {
        void onEvent(ID id, T value);
    }

    enum ID {
        CustomersUpdated,
        ProductsUpdated
    }

} 
```

关于[Android Lifecycle](http://developer.android.com/reference/android/app/Activity.html)，注册和注销通知的最佳点是什么？

![安卓生命周期](https://i.stack.imgur.com/6zoE1.png)

以下是一些场景：

# 场景一：

```
public class ProductsListFragment extends BaseFragment 
    implements Notifications.Listener {

    @Override
    public void onStart() {
        mAdapter.notifyDataChanged();
        register(Notifications.ID.ProductsUpdated, this)
        super.onStart();
    }

    @Override
    public void onStop() {
        unregister(Notifications.ID.ProductsUpdated, this)
        super.onStop();
    }

    @Override
    public void onEvent(Notifications.ID id, Object value) {
        mAdapter.notifyDataChanged();
    } 
```

# 场景二：

```
public class ProductsListFragment extends BaseFragment
    implements Notifications.Listener {

    @Override
    public void onResume() {
        mAdapter.notifyDataChanged();
        register(Notifications.ID.ProductsUpdated, this)
        super.onResume();
    }

    @Override
    public void onPause() {
        unregister(Notifications.ID.ProductsUpdated, this)
        super.onPause();
    }

    @Override
    public void onEvent(Notifications.ID id, Object value) {
        mAdapter.notifyDataChanged();
    } 
```

请解释**为什么**你会建议使用一个或另一个实现..或另一个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T18:15:26.013

这个问题没有一个普遍的答案。onResume/onPause 可能会在大多数情况下给出预期的行为，但您可能会遇到想要更早或更晚执行此操作的情况。

但是，在不同的方面，关于样式和功能的两点 -`super.onResume`作为方法中的第一件事（`super.onStop`也是最后一个）调用。这样，您的循环完全嵌套在“超级”循环中，并且您避免了奇怪的错误和边缘情况。此外，总是调用`notifyDataSetChanged`. `onResume`事实上，这可能是一个相当浪费的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T18:20:05.267

我会坚持使用场景 2。虽然片段的顺序`onPause()`和顺序`onResume()`是线性的，但活动的顺序并非如此。

![片段生命周期](https://i.stack.imgur.com/YQt8Q.png)

由于片段的暂停和恢复会在活动开始时被调用，因此只要活动处于活动状态，就会接收到广播。`onStop()`但是，该活动在失去可见性之前不会调用。在这种情况下，片段仍将处理广播，而它所包含的活动处于非活动状态，这对我来说听起来不是一个好主意。

# javascript - javascript函数后括号中的值

> ID：15783044
> 
> 赞同：14
> 
> 时间：2013-04-03T09:04:39.023
> 
> 标签：javascript, syntax

我正在尝试重新使用我在 SO 的答案中找到的一些 Javascript 代码。但我想先更好地理解它的语法。它的大纲是：

```
(function (root, ns, factory) {
    // some code
} (window, 'detectZoom', function() {
    // some more code
})); 
```

有关完整代码的参考，请参阅[本文](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)中接受的答案。

我了解最终结果是如何实现的，但我不太清楚内部 (...) 块与第一个块的关系，或者它内部的逗号分隔列表告诉编译器什么。

有人可以解释吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T09:08:41.347

有一个匿名函数采用三个参数（`root`, `ns`, `factory`），它会立即被调用。

*   `root`取`window 的值。
*   `ns`取值为`'detectZoom'`
*   `factory`取回调函数的值（也是匿名的）

说明：

```
(function (root, ns, factory) {
   // the body of the anonymous function
} (window, 'detectZoom', function() {
   // the body of the 'factory' callback
})); 
```

要将其分开，如何通过四个步骤获取此代码：

```
 1.
 // Anonymous function.
 (function (root, ns, factory) {/* body */});

 2.
 // Anonynmous function, immediately invoked
 (function (root, ns, factory) {/* body */})();  // parentheses mean it's invoked

 3.
 // Callback as a separate argument
 var cbk = function () {};
 (function (root, ns, factory) {/* body */})(window, 'detectZoom', cbk);

 4.
 // Callback as an anonymous function
 (function (root, ns, factory) {/* body */})(window, 'detectZoom', function () {}); 
```

您可以将代码重写为更详细：

```
var outer = function (root, ns, factory) {
  // the body
};

var callback = function () {
  // the body
};

outer(window, 'detectZoom', callback); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-03T09:07:34.397

您所拥有的是一个立即调用的函数表达式（[IIFE](http://en.wikipedia.org/wiki/Immediately-invoked_function_expression)）。如果你去掉所有的论点，你只剩下这个：

```
(function () {
    // some code
}()); 
```

该函数需要三个参数：

```
(function (root, ns, factory) {
    // some code
}()); 
```

然后你传递三个参数：

```
(function (root, ns, factory) {
    // some code
} (window, 'detectZoom', function() {
    // some more code
})); 
```

其中一个论点，`factory`恰好是一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:07:12.113

它创建一个接受三个参数的匿名（未命名）函数：

```
function (root, ns, factory) {
    // some code
} 
```

然后立即调用该函数并传递三个参数，第三个是另一个匿名函数：

```
(window, 'detectZoom', function() {
    // some more code
}) 
```

这两个块需要包裹在一对`()`; 原因在这里解释：
[解释JavaScript的封装匿名函数语法](https://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax)

# c# - 在大量文本文件中搜索在文本框中写入的特定文本并显示它们

> ID：15783047
> 
> 赞同：0
> 
> 时间：2013-04-03T09:04:44.610
> 
> 标签：c#, .net, performance, search

我正在尝试从特定目录中搜​​索许多文本文件，然后使用 textchanged 事件在所有文件中查找文本并仅在屏幕上显示包含该文本的行。

目前它正在工作，但它太慢了。我正在发布一个搜索文本并在列表框中显示的功能。什么可能是最有效的方法来让它工作得有点快。

```
listBox2.Items.Clear();
ArrayList lines = new ArrayList();

if (txtfile.Count > 0)
{
    for (int i = 0; i < txtfile.Count; i++)
    {
        lines.AddRange((File.ReadAllLines(Path.Combine(path, txtfile[i].ToString()))));
    }
    for (int i = 0; i < lines.Count; i++)
    {
        if(lines[i].ToString().IndexOf(txt,StringComparison.InvariantCultureIgnoreCase)>=0)

        {
                listBox2.Items.Add(lines[i].ToString());
        }       
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:07:25.983

您要搜索多少个文件？您可以随时索引它们，将内容存储在 SQL 数据库中，当然还可以使用 Parallel.For

```
Parallel.For(1, 1000, i =>
    {
        //do something here.
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:15:42.937

I would use `Directory.EnumerateFiles` and `File.ReadLines` since they are less memory hungry:

```
var matchingLines = Directory.EnumerateFiles(path, ".txt", SearchOption.TopDirectoryOnly)
    .SelectMany(fn => File.ReadLines(fn))
    .Where(l => l.IndexOf(txt, StringComparison.InvariantCultureIgnoreCase) >= 0);
foreach (var line in matchingLines)
    listBox2.Items.Add(line); 
```

I would also search only when the user triggers it explicitely, so on button-click and not on text-changed.

# java - 带有 Java 代码的 Python 不起作用

> ID：15783058
> 
> 赞同：0
> 
> 时间：2013-04-03T09:05:26.880
> 
> 标签：java, eclipse, python-3.x, jython-2.5

我正在尝试执行一个 Python 程序（用 Python 3.x 编写）来比较两个数字。IDE：Eclipse JAR：jython-standalone-2.5.3.jar
当我运行程序时，在控制台中的 Eclipse 中它说：“请输入第一个整​​数：” 输入整数后程序不会进一步执行。可能是什么问题？注意：它在 Python IDLE 中运行良好。

```
 JAVA CODE:(ExperimentWithPython.java)
   ===============
   import org.python.core.PyException;
   import org.python.util.PythonInterpreter;
   public class ExperimentWithPython{
    public static void main(String[] args) throws PyException{   
    try
    {
     PythonInterpreter.initialize(System.getProperties(), System.getProperties(),new                String[0]);
        PythonInterpreter interp = new PythonInterpreter();
        interp.execfile("D:/Development/comparisons01.py");
    }
    catch(Exception e)
    {
        System.out.println(e.toString());
        e.printStackTrace();
       }
      }
    }

    PYTHON CODE: (comparisons01.py)
     ===============
     print("Enter two integers and I will tell you")
     print("the relations they satisfy")
     number1 = input( "Please enter the first integer: " )
     number1 = int(number1)
     number2 = input( "Please enter the second integer:" )
     number2 = int(number2)
     if number1 == number2:
     print ("%d is equal to %d" % (number1, number2))
     if number1 != number2:
     print ("%d is not equal to %d" % (number1, number2))
     if number1 < number2:
     print ("%d is less than %d" % (number1, number2))
     if number1 > number2:
     print ("%d is greater than %d" % (number1, number2))
     if number1 <= number2:
     print ("%d is less than or equal to %d" % (number1, number2))

      if number1 >= number2:
      print ("%d is greater than or equal to %d" % ( number1, number2 ))
     dummy=input() 
```

我发现该解决方案实际上由于代码和 jar 兼容性而无法正常工作。

我在 Python 2.x 标准上重新编写了代码，安装了 Python 2.7 并在我的构建路径中使用了 jython-standalone 2.7 jar。它工作正常。你可以试试这段代码：

```
 import random
     import time

    ##Declare Variables
     user_num=0
    ##lottery_num=random.randint(10,99)
    lottery_num=12

     ##Input
       print("Welcome to the Lottery Program!")
       user_num=int(input("Please enter a two digit number: "))
       print("Calculating Results.")
       for i in range(3):
        time.sleep(1)
        print(".")

    ##Calc & Output
     lottery_tens = lottery_num // 10
     lottery_ones = lottery_num % 10

     user_tens = user_num // 10
     user_ones = user_num % 10

     if lottery_num == user_num:
     print("All your numbers match in exact order! Your reward is $10,000!\n")
      elif lottery_tens == user_ones and lottery_ones == user_tens:
    print("All your numbers match! Your reward is $3,000!\n")
     elif lottery_tens == user_tens or lottery_ones == user_ones \
     or lottery_ones == user_tens or lottery_tens == user_ones:
      print("One of your numbers match the lottery. Your reward is $1,000!\n")
    else:
      print("Your numbers don't match! Sorry!") 
```

# javascript - 检查现有属性 = 属性的原生 JS 快速方法？

> ID：15783062
> 
> 赞同：0
> 
> 时间：2013-04-03T09:05:33.100
> 
> 标签：javascript, attributes, selector

2部分问题

1）检查属性设置为特定值的快速/最简单的方法是什么？

我有一个追加数据的 JQuery 循环

..我需要测试重复项..因此我让这个 JQuery 代码运行 w/循环来检查重复项，然后再追加：

```
$("#team_list .teams[teamName='blahblah']").html() 
```

这实际上工作得很好但是..（我的第二个问题）

2）我正在寻找一种更 JS 原生的方式来做到这一点......因为如果我的脚本必须处理 1000 个追加，那就是 1000 个 Jquery 调用 w/c 比原生 JS 慢......并且由于每个 JQuery 选择都会创建一个新对象，那是内存中的 1000 个新对象 .. 还是我完全关闭了我的性能问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:18:55.353

您可以使用[`element.hasAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.hasAttribute)方法后跟[`element.getAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute).

# javascript - 使 div 中 paraghapghs 中的文本溢出而不是换行

> ID：15783079
> 
> 赞同：5
> 
> 时间：2013-04-03T09:06:18.173
> 
> 标签：javascript, jquery, html, css

假设我在一段中有几行很长的行：

```
<div style="overflow: auto"> 
    <p> 
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb cccccccccccccccccccccccccccccccc
    </p> 
    <p> 
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb cccccccccccccccccccccccccccccccc
    </p> 
</div> 
```

并且窗口宽度小于段落的宽度（a's + b's + c's）。目前，只有当任何组件（a、b 或 c）的宽度大于窗口宽度并且超过组件被带到新行时，才会出现滚动。我希望每个段落的内容与滚动显示在同一行。如何将每个段落视为一个字符串，以便将段落的内容视为单行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T09:07:07.073

使用 CSS，您可以：

```
p {
    white-space: nowrap;
    overflow: auto
} 
```

这使空格不会中断，因此该段落将全部位于一行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:07:18.493

你可以设置[white-space:nowrap](http://www.w3schools.com/cssref/pr_text_white-space.asp)和`overflow:auto`css 的属性。`class`您可以为您希望在单行上显示文本的段落标签分配一个。

*CSS*

```
.className {
    white-space: nowrap;
    overflow: auto;
} 
```

*html*

```
<div style="overflow: auto"> 
    <p class="className"> 
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb cccccccccccccccccccccccccccccccc
    </p> 
    <p class="className"> 
        aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb cccccccccccccccccccccccccccccccc
    </p> 
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:10:28.393

添加样式如下

```
p{
    overflow:auto;
    white-space: nowrap;
} 
```

或使用 jQuery 如下

```
$('p').css('overflow','auto');
$('p').css('white-space','nowrap'); 
```

这是一个现场小提琴示例[http://jsfiddle.net/mayooresan/qmCwL/](http://jsfiddle.net/mayooresan/qmCwL/)

# c# - 如何使用最小起订量模拟具有一个参数的方法

> ID：15783082
> 
> 赞同：0
> 
> 时间：2013-04-03T09:06:23.343
> 
> 标签：c#, .net, mocking, moq

我不熟悉嘲笑。我想测试我的方法 GetById 是否返回一个带有 Id 的对象用户。在代码下方，我想测试 GetById(10) 是否返回一个 id = 10 的用户。

我设置了起订量（我希望它是正确的）但是如何执行起订量？

谢谢，

```
[TestMethod]
public void MyMoq()
{
    var userMock = new Mock<IUsers>();
    userMock.Setup(x => x.GetById(10)).Returns(new User());

    //After ?
    new Users().GetById(10);
}

public interface IUsers
{
    IUser GetById();
}

public IUser GetById(int id)
{
    using (var context = ....)
    {
        //code here

        //return user here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:20:58.920

我不太确定你想测试什么。您还有 Mock 类，其中包含一些您未描述的方法。

但是，回答你关于嘲笑的问题。考虑这个类：

```
public class MyMoq : IUsers
{
  private readonly Mock<IUsers> userMock;
  public MyMoq(Mock<IUsers> userMock){
    this.userMock = userMock;
  }

  [TestMethod]
  public IUser GetById()
  {
      userMock.Setup(x => x.GetById(10)).Returns(new User());

      //After ?
      return new UsersDb().GetById(10);
  }
} 
```

要使用它：

```
MyMoq moq = new MyMoq(new Mock<IUsers>());
User u = moq.GetById(); 
```

我在这个例子中的假设`Mock<IUsers>`是一个存储库并且`MyMoq`是一个服务类。此外，`IUser`是一个实体接口，`IUsers`是一个服务接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:23:19.293

测试`userMock.Object`应该返回实际的模拟`IUsers`对象。

```
var userMock = new Mock<IUsers>();
userMock.Setup(x => x.GetById(10)).Returns(new User());

var mockobject = userMock.Object;

//Returns your mocked new User() instance
var newUserObject = mockobject.GetById(10); 
```

在上面的代码中，`newUserObject`只创建了一个新的`User`. 要测试您的`GetById`方法，您需要再次调用它并断言。

```
Assert.AreEqual(newUserObject.GetById(20).ID, 20);  //Assume User has a property ID 
```

***建议：***应该可以有更好的方法来创建`User`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:36:52.317

如果这是正在测试的，GetById 应该在它自己的类（可能称为用户）中。然后用户可以在构造函数中接受上下文。然后模拟此上下文以返回存根数据。

所以总而言之

实现 IUsers 的用户类用户有一个带有参数 IContext 的构造函数（或者在这里调用的任何东西） 测试类将模拟 IContext 但不是 IUsers。调用 users.GetById 并检查输出是否正确。

您设置上下文的方式取决于它是什么类型的上下文，但请参阅[https://cuttingedge.it/blogs/steven/pivot/entry.php?id=84](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=84)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:47:56.820

好吧，正如我在评论中所说，我不清楚您要测试什么代码。我在这里看到两个选项。1）`Users`该类实现`IUsers`接口，您的意图是测试`GetById(int)`方法的实现。在这种情况下，您不需要模拟 'Users#GetById(id)' 方法，您只需要调用它并检查结果。代码应类似于：

```
interface IUser
{
    int Id { get; }
}
class User : IUser
{
    public int Id { get;set; }
}

interface IUsers
{
    IUser GetById(int id);
}
class Users : IUser
{
    public IUser GetById(int id)
    {
        // TODO: make call db call
        // TODO: parse the result
        // TODO: and return new User instance with all the data from db
        return new User{ Id = id };
    }
}

[TestMethod]
public void MyMoq()
{   
    // TODO: prepare/mock database. That's whole another story.

    var users = new Users();

    // act
    var user = users.GetById(10);

    // assert
    Assert.AreEqual(10, user.Id);
} 
```

2）您的`Users#GetById(int)`方法应该调用`IUsers#GetById(int)`并返回结果。在这种情况下，您需要创建模拟`IUsers`（如您在问题中所示）并将其传递给`Users`. 代码应该是（抱歉可能重复）：

```
interface IUser
{
    int Id { get; }
}
class User : IUser
{
    public int Id { get;set; }
}

interface IUsers
{
    IUser GetById(int id);
}
class Users : IUser
{
    private readonly IUser _users;
    public Users(IUser users)
    {
        _users = users;
    }

    public IUser GetById(int id)
    {
        // next line of code is to be tested in unit test
        return _users.GetById(id);
    }
}

[TestMethod]
public void MyMoq()
{   
    var usersMock = new Mock<IUsers>();
    usersMock.Setup(x => x.GetById(10)).Returns(new User());

    var users = new Users(usersMock.Object);

    // act
    var user = users.GetById(10);

    // assert
    Assert.AreEqual(10, user.Id);
} 
```

[ps 查看起订量教程](http://code.google.com/p/moq/wiki/QuickStart)和[单元测试艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)一书（第 47 页）可能很有用`Part 2 - Core techniques`- 存根、模拟等。

# javascript - 在浏览器之外运行外部应用程序，如 BitTorrent

> ID：15783083
> 
> 赞同：0
> 
> 时间：2013-04-03T09:06:28.087
> 
> 标签：javascript

JavaScript 是否可以检测是否安装了应用程序（例如 BitTorrent），如果安装了，是否可以通过单击链接来启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:10:46.040

这不是 Javascript，它适用于处理程序。

处理程序在您的浏览器中，并在单击/调用特殊协议时触发事件。

例如：如果您打开一个`magnet://`链接，它将触发磁铁处理程序。并且处理程序与 bittorrent 应用程序连接。

所以：

第一个问题：没有

第二个问题：是的（带有处理程序[需要安装在浏览器中]）

# wcf - 用于 WCF 服务主机和 Silverlight 5 的 net.tcp 上的跨域策略文件

> ID：15783086
> 
> 赞同：1
> 
> 时间：2013-04-03T09:06:30.077
> 
> 标签：wcf, silverlight-5.0, nettcpbinding, crossdomain.xml, servicehost

我有一个本地托管的 WCF 服务和一个与之通信的 silverlight 5 应用程序。默认情况下，silverlight 在调用 WCF 服务时尝试通过 HTTP 获取跨域策略文件。我需要对此进行更改，以便改为通过 net.tcp 端口 943 提供策略文件。

我已经设置了一个本地 tcp 侦听器，它通过端口 943 提供策略文件，并且我[遵循了这种技术](http://social.msdn.microsoft.com/Forums/en-US/silverlightarchieve/thread/b2479e22-a040-49b5-9a96-3e042b1729d7/)，即我建立了一个虚拟套接字连接，以便通过 tcp 获取策略文件，因为它在每个应用程序生命周期中只检索一次。tcp 服务器按预期被命中，我得到的`SocketError`属性值是`Success`（尽管我必须注意，在启动侦听器后我第一次命中 tcp 服务器时，结果总是拒绝访问）。

据我所知，策略文件无效，因为 silverlight 应用程序仍然无法连接，或者上述技术不适用于 silverlight 5。

我想知道的是我正在做的事情是否可行并且我做得正确，否则是否有另一种方法可以通过 tcp 成功下载策略文件并消除通过 HTTP 检索它的需要。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:39:44.967

我写了一篇关于在 WPF 中托管 silverlight 的长文章 - 并在此处使用带有 http 侦听器的 WCF：

[如何在 WPF 4 应用程序中托管 Silverlight 4 应用程序？](https://stackoverflow.com/questions/6331727/how-can-i-host-a-silverlight-4-application-in-a-wpf-4-application/10148940#10148940)

现在虽然没有直接回答您的问题，但它确实展示了如何创建策略文件的 http 版本。

我还写了一些通过端口 943 提供策略侦听器的东西，但我找不到我发布源的位置 - 所以我会继续挖掘。据我记得，silverlight 对策略文件进行级联查找，如果它没有在端口 80 上获得连接，那么它将在端口 943 上查找。

我希望这对某处有所帮助。

好的，这是我为 net.TCP 传输而不是基于 HTTP 的策略侦听器。我想你现在已经整理好了，抱歉耽搁了。它现在可能对其他人有用。

我一直在寻找 MS 的东西，它说它们从 HTTP 级联到 TCP，但是，我不能，因此不得不假设它是双层的，然后改变了。

无论哪种方式，如果您使用 net.TCP 服务进行调用，并且想要一个监听器，这段代码应该会有所帮助：

```
#region "Policy Listener"

// This is a simple policy listener
// that provides the cross domain policy file for silverlight applications
// this provides them with a network access policy
public class SocketPolicyListener
{

    private TcpListener listener = null;
    private TcpClient Client = null;
    byte[] Data;
    private NetworkStream netStream = null;

    private string listenaddress = "";

    // This could be read from a file on the disk, but for now, this gives the silverlight application
    // the ability to access any domain, and all the silverlight ports 4502-4534
    string policyfile = "<?xml version='1.0' encoding='utf-8'?><access-policy><cross-domain-access><policy><allow-from><domain uri='*' /></allow-from><grant-to><socket-resource port='4502-4534' protocol='tcp' /></grant-to></policy></cross-domain-access></access-policy>";

    // the request that we're expecting from the client
    private string _policyRequestString = "<policy-file-request/>";

    // Listen for our clients to connect
    public void Listen(string ListenIPAddress)
    {
        listenaddress = ListenIPAddress;
        if (listener == null)
        {
            listener = new TcpListener(IPAddress.Parse(ListenIPAddress), 943);

            // Try and stop our clients from lingering, keeping the socket open:
            LingerOption lo = new LingerOption(true, 1);
            listener.Server.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Linger,lo);
        }

        listener.Start();

        WaitForClientConnect();
    }

    private void WaitForClientConnect()
    {
        listener.BeginAcceptTcpClient(new AsyncCallback(OnClientConnected), listener);
    }

    public void StopPolicyListener()
    {
        if (Client.Connected)
        {
            // Should never reach this point, as clients
            // are closed if they request the policy
            // only clients that open the connection and
            // do not submit a policy request will remain unclosed
            Client.Close();
        }

        listener.Stop();
    }

    public void RestartPolicyListener()
    {
        listener.Start();
    }

    // When a client connects:
    private void OnClientConnected(IAsyncResult ar)
    {
        if (ar.IsCompleted)
        {
            // Get the listener that handles the client request.
            TcpListener listener = (TcpListener)ar.AsyncState;

            // End the operation and display the received data on 
            // the console.
            Client = listener.EndAcceptTcpClient(ar);

            // Try and stop our clients from lingering, keeping the socket open:
            LingerOption lo = new LingerOption(true, 1);
            Client.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Linger, lo);

            // Set our receive callback     
            Data = new byte[1024];
            netStream = Client.GetStream();
            netStream.BeginRead(Data, 0, 1024, ReceiveMessage, null);
        }

        WaitForClientConnect();
    }

    // Read from clients.
    public void ReceiveMessage(IAsyncResult ar)
    {
        int bufferLength;
        try
        {
            bufferLength = Client.GetStream().EndRead(ar);

            // Receive the message from client side.
            string messageReceived = Encoding.ASCII.GetString(Data, 0, bufferLength);

            if (messageReceived == _policyRequestString)
            {
                // Send our policy file, as it's been requested
                SendMessage(policyfile);

                // Have to close the connection or the
                // silverlight client will wait around.
                Client.Close();
            }
            else
            {
                // Continue reading from client. 
                Client.GetStream().BeginRead(Data, 0, Data.Length, ReceiveMessage, null);
            }
        }
        catch (Exception ex)
        {
            throw new Exception(Client.Client.RemoteEndPoint.ToString() + " is disconnected.");
        }
    }

    // Send the message.
    public void SendMessage(string message)
    {
        try
        {
            byte[] bytesToSend = System.Text.Encoding.ASCII.GetBytes(message);
            //Client.Client.Send(bytesToSend,SocketFlags.None);
            Client.GetStream().Write(bytesToSend,0, bytesToSend.Length);
            Client.GetStream().Flush();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
}
#endregion 
```

# android - 在 2.2 上获取 ListView 项目的视图/反向顺序；适用于 4.0.3

> ID：15783089
> 
> 赞同：4
> 
> 时间：2013-04-03T09:06:33.147
> 
> 标签：android, android-listview, android-view, android-adapter

我有一个 ListView，它显示来自 ArrayAdapter 的项目。我想在单击时为视图设置动画。问题是在不同版本的android上我得到不同的视图（见下文）

我正在使用此方法从 ListActivity 获取视图：

```
private View getViewForListPosition(int position) {

    int firstPosition = mList.getFirstVisiblePosition() - mList.getHeaderViewsCount();
    int wantedChild = position - firstPosition;

    ZLog.d(LOG,"getViewForListPosition , position : " + position + ", wantedChild : " + wantedChild + ", view hash : " +mList.getChildAt(wantedChild).hashCode());

    for(int i = mList.getChildCount(); i>0; i--){
        ZLog.d(LOG, "pos : " + (i-1) + ", hash : " +mList.getChildAt(i-1).hashCode());
    }

    return mList.getChildAt(wantedChild);
} 
```

所以在 Android 4.0.3 和 4.2.2 手机上我得到：

```
getViewForListPosition , position : 3, wantedChild : 3, view hash : 1101734248

pos : 5, hash : 1104109360
pos : 4, hash : 1104254936
pos : 3, hash : 1101734248
pos : 2, hash : 1104876880
pos : 1, hash : 1104862296
pos : 0, hash : 1104793008 
```

然后当单击项目时，我的适配器`getView`方法为每个视图运行：

```
getView, position : 0, convertView is notnull, cv hash1104793008
getView, position : 1, convertView is notnull, cv hash1104862296
getView, position : 2, convertView is notnull, cv hash1104876880
getView, position : 3, convertView is notnull, cv hash1101734248
getView, position : 4, convertView is notnull, cv hash1104254936
getView, position : 5, convertView is notnull, cv hash1104109360 
```

所以你可以看到一切都很好并且按预期工作。但是，当我在 Android 2.2 上运行它时，我得到的结果是：

```
getViewForListPosition , position : 3, wantedChild : 3, view hash : 1205607672

pos : 5, hash : 1205730120
pos : 4, hash : 1205712904
pos : 3, hash : 1205607672
pos : 2, hash : 1206547728
pos : 1, hash : 1206483960
pos : 0, hash : 1207864856

getView, position : 0, convertView is notnull, cv hash1205730120
getView, position : 1, convertView is notnull, cv hash1205712904
getView, position : 2, convertView is notnull, cv hash1205607672
getView, position : 3, convertView is notnull, cv hash1206547728
getView, position : 4, convertView is notnull, cv hash1206483960
getView, position : 5, convertView is notnull, cv hash1207864856 
```

所以您可能已经注意到`getViewForListPosition`，我会返回适配器用于位置 2 的视图

您可能还注意到`Adapter.getView`或`ListView.getChildAt`正在以相反的顺序返回项目，这会导致此问题。这种行为的原因可能是什么？（我没有在我的适配器中做任何花哨的事情）

我会感谢任何提示。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:54:32.240

好的。所以这就是正在发生的事情：

在一个干净的情况下，`ListView`当我注册`onItemClickListener`并执行点击时，不调用视图的适配器`getView`方法。这是我所期望的。

如果我设置 a`mList.setChoiceMode(ListView.CHOICE_MODE_SINGLE)`这会使`getView`方法在单击注册后立即运行。这也是意料之中的。

但是 2.2 和 4+ 版本之间的区别在于：在 2.2 上：当此刷新发生时`getView`，在 4+（可能是 API 11+）上的反向视图列表（请参阅我的问题）上`getView`运行：按列表的正常顺序运行

最有趣的部分是，当我将 getViewForListPosition 的调用延迟 10 毫秒时，一切正常，并且适配器具有正确的视图列表（再次正常顺序）。因此，似乎视图的顺序仅在适配器刷新期间反转`CHOICE_MODE_SINGLE`

为了解决这个问题，我没有将 listview 模式更改为`CHOICE_MODE_SINGLE`这样适配器在单击期间不会触发。我自己在里面为点击的项目设置了背景/图形`onItemClicked`

希望它可以节省一些时间:)

# ruby-on-rails-3 - 如何使用 order_by 应用 rails 范围并依靠某些属性

> ID：15783092
> 
> 赞同：0
> 
> 时间：2013-04-03T09:06:47.723
> 
> 标签：ruby-on-rails-3, scope

我在我的模型中使用范围，比如

```
 scope :by_average_rating_than_no_of_rating, :order => 'average_rating DESC,number_of_ratings DESC,editors_pick DESC' 
```

但我想达到如下结果

```
 scope :by_average_rating_than_no_of_rating, :order => 'average_rating DESC,count(number_of_ratings) DESC,editors_pick DESC' 
```

我如何按顺序对模型属性应用计数？

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:39:01.030

您缺少用于计算评分数量的 select 语句。

这是我如何获得的示例，

```
class Song
  has_many :listens
  scope :top5,
    select("songs.id, OTHER_ATTRS_YOU_NEED, count(listens.id) AS listens_count").
    joins(:listens).
    order("listens_count DESC").
    limit(5)

Song.top5 # top 5 most listened songs 
```

# iphone - 禁止 iOS 控制台输出“正在卸载 xxx 未使用的资产...”

> ID：15783101
> 
> 赞同：2
> 
> 时间：2013-04-03T09:07:24.020
> 
> 标签：iphone, xcode, debugging, logging, unity3d

[当使用Application.LoadLevelAdditiveAsync](http://docs.unity3d.com/Documentation/ScriptReference/Application.LoadLevelAdditiveAsync.html)或类似方法加载新场景时，有什么方法可以抑制 iPhone 播放器中的控制台输出？

```
Unloading 7 Unused Serialized files (Serialized files now loaded: 0 / Dirty serialized files: 0)  
Unloading 185 unused Assets to reduce memory usage. Loaded Objects now: 3468\. Operation took 377.272217 ms.
System memory in use: 6.7 MB. 
```

是的，它可能不是地球上最重要的事情，但在嘈杂的输出中寻找相关的错误消息时有点烦人。

# php - 如何使用服务帐户的 google api php 客户端库从共享（非主）日历中列出/获取事件？

> ID：15783102
> 
> 赞同：1
> 
> 时间：2013-04-03T09:07:24.710
> 
> 标签：php, google-api, google-calendar-api, google-api-php-client

我正在使用 google-api-php-client-0.6.1 (API v3) 从服务帐户的共享（非主）日历中列出/获取事件？我可以使用以下设置通过 API 发出请求：

```
client id: xxx.apps.googleusercontent.com
service account name: xxx@developer.gserviceaccount.com
my google account is: yyy@gmail.com 
```

我想做的是从 yyy@gmail.com 的日历中插入/列出/获取事件。

当我执行以下操作时，它会起作用：

```
$events = $service->events->listEvents('primary'); 
```

但是，当我执行以下操作时，它不起作用：

```
$events = $service->events->listEvents('yyy@gmail.com'); 
```

我收到一个错误“服务响应中的 json 无效”，任何人都可以提供任何帮助吗？

* * *

（也在[谷歌组](https://groups.google.com/forum/#!topic/google-api-php-client/WBjrQRQTb8Y%29)发布了我的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T18:10:51.270

一个电子邮件地址可以有很多与之关联的日历。 `listEvents()`接受这些日历 ID 之一作为参数。

如果您转到日历的设置，可以找到它，在底部您会看到“日历地址”，其中包含“（日历 ID：abcdefghijklmnopqrstuvwxyz@group.calendar.google.com）”。

# c# - 是否有通用连接字符串供不同计算机使用我的vs2010开发的程序连接本地数据库

> ID：15783105
> 
> 赞同：2
> 
> 时间：2013-04-03T09:07:28.693
> 
> 标签：c#, sql-server-express

新手在这里。

我的程序中有一个本地数据库。在开发程序时，我使用了 SQL

**连接字符串：**

```
SqlConnection sconn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\leemk_000\Documents\......Integrated Security=True;User Instance=True;"); 
```

现在，如果我想将此程序加载到另一台计算机上，我确信此连接将不再工作，因为它仍在寻找`Users\Lee_000\`

我试图删除 Lee_000 但我收到以下**错误：**

> 尝试为文件 C:\Users\Documents..... 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

我该怎么做才能让连接字符串在不同的计算机上工作。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:08:59.807

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量 -**特别是**当您想在多个客户端之间共享您的数据库时！

在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`YourDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:20:16.337

如果它是本地数据库，您应该将其放在应用程序文件夹中并与应用程序一起携带，对吗？将数据库放在应用程序的 App_data 文件夹中，并在连接字符串中使用它

```
 <add name="YourConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\yourfile.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:09:44.653

您需要使用数据库服务器并让您的用户通过您的连接字符串使用它，如下所示；

```
Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

“myServerAddress”应该是您的服务器机器的 IP 地址。

# php - PHP 检查最不繁忙的 MySQL 服务器

> ID：15783107
> 
> 赞同：1
> 
> 时间：2013-04-03T09:07:34.503
> 
> 标签：php, mysql, database-performance, slave

我正在使用 PHP 编写一个 BI 工具，它由一台 Linux + Apache + PHP 机器组成，提供报告和仪表板，包含从我们的 MySQL 数据库中获取的数据。数据库结构由一个主服务器（我无权访问）和两个从服务器组成，我可以对它们运行查询。这里的想法是，如果一个从站发生故障，平台可以继续从另一个从站读取数据。我计划使用 try/catch 从一台机器故障转移到另一台机器。

我的问题是，如果两个从服务器都启动了，那么有什么方法可以使用 PHP 我可以检查哪个最不忙，然后将查询定向到这台机器以最佳地平衡两个服务器之间的负载？

我在这里环顾四周寻找答案，令我惊讶的是答案很少，也许我错过了一些明显的东西。朝着正确的方向轻推会很棒。

提前感谢您的帮助，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:17:44.350

我不会使用您的 PHP 代码来选择奴隶。在所有查询将您的请求定向到何处之前，这将花费太多检查，或者不够聪明，无法成为真正的负载均衡器。

首先，随机选择奴隶可能是一件好事。这可能是在奴隶之间获得最佳分工的好方法，但也有一些问题。

如果有一些极端查询会削弱从属服务器，那么您不想在那里进行更多查询，并且如果有一个客户端偏爱从机 1 高于从机 2，则您可能需要对此进行调整，因此并非适用于所有环境：在这种情况下，将您的（全部？）流量重定向到最佳机器的专用（IP 级）负载均衡器似乎是最佳选择。

* * *

正如您所说，您可以使用 PHP 找出机器的当前负载。

```
if(file_exists("/proc/loadavg")) {
    $load = file_get_contents("/proc/loadavg");
    $load = explode(' ', $load);
} 
```

但这仅适用于本地机器。要为远程机器获取此信息，您可以通过网络服务器公开这些值：您可以回显该文件的内容，或者更好的是，创建一个返回 JSON 或 XML 或任何您喜欢的带有这些值的小型“网络服务”。

# ruby-on-rails - Rails Postgresql 数组的 hstore

> ID：15783110
> 
> 赞同：1
> 
> 时间：2013-04-03T09:07:40.713
> 
> 标签：ruby-on-rails, hstore

somoone 是否知道是否可以在 rails 4 中有 hstore 数组？我试过了

```
add_column :orders, :frozen_content, :hstore , array: true 
```

但我得到了

```
 PG::Error: ERROR:  malformed array literal: 
```

当我尝试保存时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T14:31:59.273

In principle, yes, but as you've found it isn't being escaped correctly when saved. I've just today logged an issue about that, see [https://github.com/rails/rails/issues/11135](https://github.com/rails/rails/issues/11135) (includes a fix patch and some demo code)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-30T14:19:19.287

这是一个至少存在于 Rails 4.0.1 中的错误。

[提出了一个拉取请求来修复它](https://github.com/rails/rails/pull/11477)，但在它被合并之前，你可以对 Rails 进行猴子补丁：

```
# config/initializers/extensions/postgres.rb
module ActiveRecord
  module ConnectionAdapters
    class PostgreSQLColumn < Column
      module Cast
        private

          def quote_and_escape(value)
            case value
            when "NULL"
              value
            else
              "\"#{value.gsub(/(["\\])/, '\\\\\1')}\""
            end
          end
      end
    end
  end
end 
```

旁注，我在 Rails 控制台中测试它时遇到了麻烦，因为那里没有加载初始化程序。你可以这样做：

```
load "#{Rails.root}/config/initializers/extensions/postgres.rb" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:11:09.283

您可以起诉 activerecord-postgres-hstore gem：

[https://github.com/engageis/activerecord-postgres-hstore](https://github.com/engageis/activerecord-postgres-hstore)

从文档：

1.  创建一个 hstore 支持的字段：

    class Person < ActiveRecord::Base 序列化 :data, ActiveRecord::Coders::Hstore end

2.  向其中添加字段：

    person = Person.new person.data['foo'] = 'bar' person.save

3.  查询它：

    Perosn.where("数据 -> 'foo' = 'bar'")

Railscast #345（在付费墙后面）使用 activerecord-postgres-hstore gem 更详细地介绍了使用 hstore：

[http://railscasts.com/episodes/345-hstore](http://railscasts.com/episodes/345-hstore)

注意：我还没有尝试使用 rails 4... YMMV。

# c# - 将 DataGridView 列放入表中

> ID：15783114
> 
> 赞同：0
> 
> 时间：2013-04-03T09:07:55.657
> 
> 标签：c#, winforms

我希望列适合 DataGridView 表。我有 5-6 列，当我最大化表单时，DataGrid 表看起来很空......像这样： ![在此处输入图像描述](https://i.stack.imgur.com/OCMM4.jpg)

但我希望它看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/2hHYF.jpg)

我知道它现在看起来很难看......但会添加一些其他字段:)。我只想知道是否可以自动调整列以填充表格？哦，顺便说一句......这是因为我不希望用户允许调整列的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:34:34.770

有可能的。您可以将`AutoSizeMode`列的属性更改为`Fill`。请注意，设置`AutoSizeMode`属性不会**禁用**列大小调整。将相应的属性（我猜`AllowColumnResize`或其他）更改为`false`.

# php - PHP preg_replace 表达式删除 URL 参数

> ID：15783116
> 
> 赞同：3
> 
> 时间：2013-04-03T09:08:11.290
> 
> 标签：php, preg-replace, url-parameters

我想使用 preg_expression 从 URL 中删除所有出现的特定参数模式。如果存在，也删除最后一个“&”模式看起来像：make=xy（“make”是固定的；“xy”可以是任意两个字母）

例子：

```
http://example.com/index.php?c=y&make=yu&do=ms&r=k&p=7& 
```

处理后`preg_replace`，结果应该是：

```
http://example.com/index.php?c=y&do=ms&r=k&p=7 
```

我尝试使用：

```
$url = "index.php?ok=no&make=ae&make=as&something=no&make=gr";
$url = preg_replace('/(&?lang=..&?)/i', '', $url); 
```

但是，这效果不佳，因为我在 URL 中有 make=xx 的重复项（这种情况可能发生在我的应用程序中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T09:25:58.703

为此，您不需要 RegEx：

```
$url = "http://example.com/index.php?ok=no&make=ae&make=as&something=no&make=gr&";

list($file, $parameters) = explode('?', $url);
parse_str($parameters, $output);
unset($output['make']); // remove the make parameter

$result = $file . '?' . http_build_query($output); // Rebuild the url
echo $result; // http://example.com/index.php?ok=no&something=no 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:24:51.840

您可以尝试使用：

```
$str = parse_url($url, PHP_URL_QUERY);
$query = array();
parse_str($str, $query);
var_dump($query); 
```

这会将查询作为数组返回给您。然后，您可以使用 http_build_query() 函数在查询字符串中恢复数组。

但是如果你想使用正则表达式：

```
$url = "index.php?make=ae&ok=no&make=ae&make=as&something=no&make=gr";
echo $url."\n";
$url = preg_replace('/\b([&|&amp;]{0,1}make=[^&]*)\b/i','',$url);
$url = str_replace('?&','?',$url);
echo $url; 
```

这将删除 URL 中的所有 make

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:13:01.680

`rtrim`你可以删除最后一个`&`

```
$url = rtrim("http://example.com/index.php?c=y&make=yu&do=ms&r=k&p=7&","&");
$url = preg_replace('~&make=([a-z\-]*)~si', '', $url); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:13:31.120

```
$url = "index.php?ok=no&make=ae&make=as&something=no&make=gr";
$url = preg_replace('/(&?make=[a-z]{2})/i', '', $url);
echo $url; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-17T05:51:25.780

只需使用 preg_replace

```
$x = "http://example.com/index.php?c1=y&make=yu&do1=ms&r1=k&p1=7&";

$x = preg_replace(['/(\?make=[a-z]*[&])/i', '/(\&make=[a-z]*[^(&*)])/i', '/&(?!\w)/i'], ['?','',''], $x);
echo $x; 
```

> 结果是：[http ://example.com/index.php?c1=y&do1=ms&r1=k&p1=7](http://example.com/index.php?c1=y&do1=ms&r1=k&p1=7)

希望这对你们有帮助。

# fitnesse - Fitnesse Test History：当所有测试都成功但出现异常时，是否可以在 TestHistory 中将结果标记为黄色？

> ID：15783118
> 
> 赞同：1
> 
> 时间：2013-04-03T09:08:14.727
> 
> 标签：fitnesse, selenium-fitnesse-bridge

我相信具有深厚健身知识的人会帮助我。

**用例：**

我有一个 Fitnesse 套件，其中包含通向结果的路径，例如

```
http://localhost/FrontPage.AutomatedTesting.FlightScenarios.Storage?pageHistory&resultDate=20130402183449 
```

在这里，所有测试都已成功完成并标记为**绿色**。有时（并非总是），我在运行这些测试时遇到异常。就像是 ...

```
__EXCEPTION__:java.lang.IndexOutOfBoundsException: Illegal start index
    at java.util.regex.Matcher.find(Unknown Source)
    at fitnesse.slim.VariableStore.replaceSymbolsInString(VariableStore.java:63)
    at fitnesse.slim.VariableStore.replaceSymbol(VariableStore.java:53) 
```

...

结果，我将结果字符串标记为**黄色**：

```
Storage     36 Right    0 Wrong     0 Ignores   1 Exceptions    485072 ms 
```

我不想详细说明为什么我有这个例外。我想说的是，目前我可以接受这个例外和黄色符号。

**我不喜欢的：**

在测试历史...

```
http://localhost/FrontPage.AutomatedTesting.FlightScenarios.Storage?testHistory 
```

...我将这些测试**标记为红色**（我认为，由于上述异常）。就像是 ...

```
Page    Pass    Fail    Latest  Last 20 Results
FrontPage.AutomatedTesting.FlightScenarios.Storage  68  18  02 Apr, 13 18:34    -   +   -   +   +   +   -   + 
```

...当所有测试都成功并且没有例外时，“+”被标记为绿色，而**“-”在两种不同的情况下被标记为红色（不是黄色）**：

1）一些测试是红色的

2）所有测试都是绿色的，但有一个例外

**我想要的是：**

在TestHistory中，**当所有测试都是绿色时，“-”标记为黄色，但有一个例外。**

可行吗？以防万一，我不想听到我不需要它。我确实想听听有关如何完成它的建议。

**PS**看起来我找到了解决方法。如果我有一个名称如下的测试结果文件......

20130325203754_36_0_0_1.xml

...然后我知道，我有 36 个测试，0 个错误，0 个被忽略，1 个异常。所以我把这个文件从外部测试运行器重命名为 20130325203754_36_0_0_0.xml 。之后，testHistory 中的红色变为绿色。不是黄色，但比红色好，至少目前对我来说是这样。

还有其他建议吗？我会投票支持在 Fitnesse 本身中调整这个东西的能力。

谢谢，浣熊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:51:08.003

FitNesse 团队已经解决了这个问题。如果您更新到最新的边缘，您将获得修复。

它将在今年春天的某个时候正式发布。

[将来，我建议在https://github.com/unclebob/fitnesse](https://github.com/unclebob/fitnesse)上发布类似功能不一致的问题。

# knockout.js - 淘汰嵌套的 foreach 绑定不起作用

> ID：15783131
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:04.867
> 
> 标签：knockout.js

我有 html 作为： [JSfiddle](http://jsfiddle.net/Wnzrr/1/)

```
<ul data-bind="foreach: Items">
    <li data-bind="click: setTextColor, text: 'Color: ' + color"></li>
     <ul data-bind="foreach:add">
         <li data-bind="text:test"></li>
    </ul>
</ul> 
```

和JS如下：

```
var Item = function(color) {
    var self = this;
    self.color = String(color);
    self.setTextColor = function(item, event) {
        console.log(item.color);
        $(event.target).css('color', color);
    };
},
     add = function (test){

        this.test = String (test);
};
ko.applyBindings(new function() {
    this.Items = ko.observableArray([
        {new Item('red'),ko.observableArray(new add('colore'),new add('is'),new add('red'))},
        {new Item('blue'),ko.observableArray(new add('colore'),new add('is'),new add('blue'))},
        {new Item('green'), ko.observableArray(new add('colore'),new add('is'),new add('green'))}
    ]);
}()); 
```

但它没有填充数据。谁能告诉我是什么问题！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:28:02.170

我会这样做：

```
var Item = function(color, a) {
    var self = this;
    self.color = String(color);
    self.setTextColor = function(item, event) {
        console.log(item.color);
        $(event.target).css('color', color);
    };
    self.add = ko.observableArray(ko.utils.arrayMap(a, function(item) { return new add(item); }));
},
add = function (test){
    this.test = String (test);
};
ko.applyBindings(new function() {
    this.Items = ko.observableArray([
        new Item('red',['colore','is','red']),
        new Item('blue',['colore','is','blue']),
        new Item('green', ['colore','is','green'])
    ]);
}()); 
```

JSFiddle：http: [//jsfiddle.net/ENQzc/](http://jsfiddle.net/ENQzc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:18:14.030

也许是 Firebug 或 Chrome 控制台？

> ```
> SyntaxError: missing : after property id
> [Stanna vid fel]  
> 
> {new Item('red'),ko.observableArray(new add('colore'),new add('is
> 
> /Wnzrr/1/show/ (line 49, col 14) 
> ```

您在底部的数组定义真的很奇怪，您要做什么？

# java - ActiveMQ：如何获取接收者队列中的所有消息（Java）

> ID：15783132
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:05.763
> 
> 标签：java, jakarta-ee, activemq

这是服务器的代码：

```
import java.net.UnknownHostException;
import java.io.IOException;
import org.apache.activemq.transport.stomp.StompConnection;
public class Server{

public static void main(String[] args) {
    try {
        StompConnection con = new StompConnection();
        con.open("localhost", 61618);
        con.connect("admin", "admin123");
        con.begin("a1");
        con.send("/queue/test1", "This is test message 1");
        con.send("/queue/test1", "This is test message 2");
        con.send("/queue/test1", "This is test message 3");
        con.commit("a1");
        con.disconnect();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
  }
} 
```

这是客户端的代码：

```
import java.io.IOException;
import java.net.UnknownHostException;
import java.util.Scanner;
import org.apache.activemq.transport.stomp.StompConnection;
import org.apache.activemq.transport.stomp.StompFrame;
import org.apache.activemq.transport.stomp.Stomp.Headers.Subscribe;

public class Client {

public static void main(String[] args) {
    try {
        //login.
        Scanner in = new Scanner(System.in);
        System.out.print("Password: ");
        String pass = in.next();
        if (!"123".equals(pass)){
            System.out.println("Sorry, wrong password.");

        }
        else
        {
            StompConnection con= new StompConnection();
            con.open("localhost", 61618);
            con.connect("admin", "admin123");
            con.subscribe("/queue/test1", Subscribe.AckModeValues.CLIENT);
            con.begin("a2");
            StompFrame mes = con.receive();
            System.out.println(mes.getBody());
            con.ack(message, "a2");
            con.commit("a2");               
            con.disconnect();
        }

    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

我在服务器上有 3 条消息。但是，我每次只能在 Client 中收到 1 条消息。如何在运行中获取队列中的所有消息？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:48:27.407

不完全确定您在这里尝试了什么，但阅读所有三个只是一个简单的循环，例如：

```
 con.begin("a2");
    while (true) {
        StompFrame message = null;
        try {
            message = connection.receive(5000);
        } catch (Exception e) {
            break;
        }
        System.out.println(mes.getBody());
        con.ack(message, "a2");
    }
    connection.commit("a2"); 
```

# java - 对球衣休息服务的并发请求

> ID：15783133
> 
> 赞同：8
> 
> 时间：2013-04-03T09:09:09.583
> 
> 标签：java, web-services, rest, jdbc, jersey

我正在使用 Eclipse、Tomcat7 和 Jersey 实现开发一个非常简单的 REST Web 服务，并连接到 MySQL。查看球衣文档，我知道每个请求都会创建一个根资源类的新对象。但我不知道是否每个请求都是独立的，例如如果一个请求必须等待很长时间，服务器会正​​常接受更多请求吗？

问题是：我有 2 个主要类，1 个类实现带有注释的 Jersey（Proxy.java），以及连接到 BD（Notificator.java）的其他类，这个类（Singleton）只有一个实例，以便仅使用 1 个 Connection 对象。实现 Jersey 的类使用这个类。因此，如果其中一个请求被阻止，我不知道其他请求是否会运行，因为它们使用的是相同的 (Notificator.java) 实例。

关系是（Proxy.java）的 N 个实例使用唯一一个（Notificator.java）女巫有一个与 MySQL 的连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T05:38:52.613

Jersey 是在 servlet 之上开发的。每个传入请求都有一个新线程。您的代码正在为所有线程创建瓶颈，因为存在对单个可用连接对象的争用。如果您有多个请求，那么只有一个请求将使用该连接，其他请求必须等待。如果等待时间不是太长，那么没有问题。但是，如果等待时间超过 HTTP 请求超时，那么您的其他请求可能会以超时结束。

我了解由于某些业务要求/复杂性，您可能遇到单一连接瓶颈。因此，在所有这些我们无法同时处理所有请求并且可能有多种原因的情况下，我们应该将我们的 Web 服务创建为异步的。异步 Web 服务在 SUBMIT REQUEST-> REQUEST ACCEPTED（将异步处理）的模型上工作，并返回用于轮询的 JOB URL-> CLIENT POLLS，直到 JOB 未完成。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:40:46.947

尝试数据库连接池，更多信息在这里：

[http://en.wikipedia.org/wiki/Connection_pool](http://en.wikipedia.org/wiki/Connection_pool)

[JDBC中如何建立连接池？](https://stackoverflow.com/questions/2835090/jdbc-connection-pooling)

# jquery - 日期选择器和按钮图像

> ID：15783134
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:10.267
> 
> 标签：jquery, datepicker

使用 Jquery Datepicker，我想使用 buttonImage 设置在输入字段旁边显示一个日历图像......每次图像放错位置......是因为我的图像大小吗？(32x32)

我试着用类似的东西把它放好：

```
$("img.ui-datepicker-trigger").css("margin-left", "3%");
$("img.ui-datepicker-trigger").css("margin-top", "5%"); 
```

但是输入随着图像移动并且高度位置仍然相同（图像与输入文本位置相比太高了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:12:45.840

尝试设置图像的垂直对齐。

```
$("img.ui-datepicker-trigger").css("vertical-align", "middle"); 
```

# javascript - 我应该将我的 JavaScript 库的版本号放在文件名中吗？

> ID：15783135
> 
> 赞同：5
> 
> 时间：2013-04-03T09:09:12.340
> 
> 标签：javascript

我即将发布一个 javascript 库。

我想将文件另存为 [library-name].1.0.0

然后随着图书馆的发展，您将能够下载新版本，例如

*   [库名称].1.0.1.js
*   [库名称].1.0.2.js
*   [库名称].1.0.3.js
*   [库名称].1.1.0.js
*   [库名称].1.2.0.js
*   [库名称].2.0.0.js

我的问题是：有什么理由*不*以文件名保存版本吗？

我正在使用其他 3rd 方库以及那些我不存储版本的库，我总是必须弄清楚是否必须升级。

例如，我使用 codemirror.js，我总是想知道我是否使用的是最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:16:39.713

如果您要下载它，那么将版本号作为文件名的一部分是一个好主意。像jQuery一样在文件开头添加版本号以及许可证信息也是一个好主意

结帐 - [http://code.jquery.com/jquery-1.9.1.min.js](http://code.jquery.com/jquery-1.9.1.min.js)

唯一不应该添加版本号的情况是当您在整个网站中引用脚本文件时 - 因为您不想在更新脚本时更改所有引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:17:28.077

我自己从未发布过任何库，但将版本号放在文件名中对我来说听起来是个好主意。

在升级时，我认为*不*将版本号放在文件名中用于作者不希望在未来版本中引入重大更改的库，仅修复不影响已针对库编写的代码的错误修复和添加。这意味着使用该库但自己不托管它的人（即指向公共 CDN 上的库的人）会自动指向最新版本，从而无需执行任何操作即可修复错误。

但是，正如您所说，对于下载库并自己托管它的人来说，这确实意味着他们必须打开库文件来检查版本号。

如果你想匹配其他一些图书馆出版商所做的，你可能想看看[Semantic Versioning](http://semver.org/) - 它编码了 xxx 版本编号系统。

如果你打算通过 Github 发布你的库（我相信这就是现在酷孩子们所做的），你可能想要使用[Jonathan "Wolf" Rentzsch 的系统在那里进行语义版本控制](http://rentzsch.tumblr.com/post/45552867242/semantic-version-branches-for-submodules)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:16:59.723

如果您正在使用单元测试，您可以确保在发布库之前 V1 单元测试对 V2 都可以正常工作。

[关于js单元测试的爆款文章](http://coding.smashingmagazine.com/2012/06/27/introduction-to-javascript-unit-testing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:17:51.587

如果我正确理解了您的问题，那么不包含版本名称的一个原因是，如果您使用该 CDN 托管文件托管脚本，则用户在升级时不必更改任何代码。

# oracle - oracle如何修改数字格式？

> ID：15783136
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:15.913
> 
> 标签：oracle, globalization

我需要根据配置文件中指定的文化来全球化应用程序。

我有金额和日期值。我决定将它们转换为查询本身。如下所示

对于西班牙智利`Es-CL`：

对于日期格式是“dd-mm-yyyy”我将使用`Select TO_CHAR(busdate,'dd-mm-yyyy') from itemTable.`

同样，我想对金额使用相同的`Select to_char(Amount,'99.999.99,00') from table1.`

但它是徒劳的。

请建议我实现我的要求的正确方法。

可以使用这些金额和日期格式。但需要知道如何转换它们。

我想在 On_Data_bound 事件中使用数据网格，但这仍然是一个性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:23:19.293

您将使用[`NLS_NUMERIC_CHARACTERS`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams152.htm#i1130146)session 变量以及全球化[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34570)：

```
SQL> alter session set NLS_NUMERIC_CHARACTERS='.,';

Session altered

SQL> select to_char(123456789.01, 'fm999G999G990D00') from dual;

TO_CHAR(123456789.01,
---------------------
123,456,789.01

SQL> alter session set NLS_NUMERIC_CHARACTERS=', ';

Session altered

SQL> select to_char(123456789.01, 'fm999G999G990D00') from dual;

TO_CHAR(123456789.01,
---------------------
123 456 789,01 
```

# android - 对话框中的Android AsyncTask失败

> ID：15783138
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:21.833
> 
> 标签：android, json, dialog

我站在这个问题上，我想不通。我有这个应用程序，它在 Galaxy S3 和 Wildfire 上都运行，但是当我试图在 Galaxy S2 上运行它时，我遇到了错误。Galaxy S3 运行 4.1.2，Wilfire 运行 2.2.1，Galaxy S2 运行 2.3.3 android 操作系统。

**问题** 有一个进度对话框，它停止并且应用程序存在错误已关闭但我不明白就像我之前提到的它在 2 设备上工作但不是在 Galaxy S2 上。这是我 **的 logcat 错误：**

```
 04-03 11:02:42.010: E/AndroidRuntime(12339): FATAL EXCEPTION: AsyncTask #1
    04-03 11:02:42.010: E/AndroidRuntime(12339): java.lang.RuntimeException: An error occured while executing doInBackground()
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.lang.Thread.run(Thread.java:1019)
    04-03 11:02:42.010: E/AndroidRuntime(12339): Caused by: java.lang.NullPointerException
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at dk.tankegang.skraldespand.AlleKommuner$LoadAllProducts.doInBackground(AlleKommuner.java:138)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at dk.tankegang.skraldespand.AlleKommuner$LoadAllProducts.doInBackground(AlleKommuner.java:1)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    04-03 11:02:42.010: E/AndroidRuntime(12339):    ... 4 more
    04-03 11:02:46.975: E/WindowManager(12339): Activity dk.tankegang.skraldespand.AlleKommuner has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40534248 that was originally added here
    04-03 11:02:46.975: E/WindowManager(12339): android.view.WindowLeaked: Activity dk.tankegang.skraldespand.AlleKommuner has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40534248 that was originally added here
    04-03 11:02:46.975: E/WindowManager(12339):     at android.view.ViewRoot.<init>(ViewRoot.java:266)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:174)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:117)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.Dialog.show(Dialog.java:241)
    04-03 11:02:46.975: E/WindowManager(12339):     at dk.tankegang.skraldespand.AlleKommuner$LoadAllProducts.onPreExecute(AlleKommuner.java:126)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.os.AsyncTask.execute(AsyncTask.java:391)
    04-03 11:02:46.975: E/WindowManager(12339):     at dk.tankegang.skraldespand.AlleKommuner.onCreate(AlleKommuner.java:63)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.os.Looper.loop(Looper.java:123)
    04-03 11:02:46.975: E/WindowManager(12339):     at android.app.ActivityThread.main(ActivityThread.java:3691)
    04-03 11:02:46.975: E/WindowManager(12339):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-03 11:02:46.975: E/WindowManager(12339):     at java.lang.reflect.Method.invoke(Method.java:507)
     04-03 11:02:46.975: E/WindowManager(12339):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
     04-03 11:02:46.975: E/WindowManager(12339):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
     04-03 11:02:46.975: E/WindowManager(12339):    at dalvik.system.NativeStart.main(Native Method) 
```

**这是我正在使用的代码，类：**

```
 public class AlleKommuner extends ListActivity {

SQLiteDatabase db;
private ProgressDialog pDialog;
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> kommunerList;

private static String url_all_kommuner = "http://xxx.com";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_KOMMUNER = "kommuner";
private static final String TAG_KID = "kId";
private static final String TAG_KNAME = "kName";
private static final String TAG_KURL = "kUrl";

// products JSONArray
JSONArray kommuner = null;
  String TAG = "LEYTH Alle Kommuner";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    // Hashmap for ListView
    kommunerList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

            db = openOrCreateDatabase("value.db", Context.MODE_PRIVATE, null); // optional CursorFactory

            String kUrl = ((TextView) view.findViewById(R.id.kUrl)).getText().toString();

            Intent in = new Intent(getApplicationContext(), EnkeltView.class);
            in.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            db.execSQL("INSERT INTO startValue (myValue, myUrl) VALUES (1, "+"'" + kUrl +"'"+")");
            db.close();

            finish();
            startActivityForResult(in, 100);
            }    
    });

    ((PullToRefreshListView) getListView()).setOnRefreshListener(new OnRefreshListener() {
        @Override
        public void onRefresh() {
            // Do work to refresh the list here.
            new LoadAllProducts().execute();
            Log.d(TAG, "Here iam 2");

        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received 
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }
}

class LoadAllProducts extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AlleKommuner.this);
        pDialog.setMessage("Vent Venligst..");
        pDialog.setTitle("Henter Kommuner");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_kommuner, "GET", params);

        try {
                        // products found
                // Getting Array of Products
                kommuner = json.getJSONArray(TAG_KOMMUNER);

                kommunerList.clear();

                // looping through All Products
                for (int i = 0; i < kommuner.length(); i++) {
                    JSONObject c = kommuner.getJSONObject(i);

                    // Storing each json item in variable
                    String k_id = c.getString(TAG_KID);
                    String k_name = c.getString(TAG_KNAME);
                    String k_url = c.getString(TAG_KURL);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_KID, k_id);
                    map.put(TAG_KNAME, k_name);
                    map.put(TAG_KURL, k_url);

                    Log.v(TAG, "this is kUrl --> ; " + k_url + " --- And this is TAG --> " + TAG_KURL);

                    // adding HashList to ArrayList
                    kommunerList.add(map);
                }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AlleKommuner.this, kommunerList,
                        R.layout.list_item, new String[] { TAG_KID,
                                TAG_KNAME, TAG_KURL},
                        new int[] { R.id.kId, R.id.name, R.id.kUrl });
                // updating listview
                setListAdapter(adapter);
            }
        });

        ((PullToRefreshListView) getListView()).onRefreshComplete();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:43:25.830

json 在这一行为空。jParser.makeHttpRequest 在这些设备上失败。检查 jParser.makeHttpRequest 中发生了什么以及可能导致问题的原因。也许是互联网连接，也许是别的东西。它应该抛出异常，如果没有，请检查服务器响应状态代码。此外，您可能想要注销响应字符串并查看您得到的结果。

# javascript - 在 JSP 中单击按钮时显示下一个选项卡

> ID：15783140
> 
> 赞同：0
> 
> 时间：2013-04-03T09:09:27.007
> 
> 标签：javascript, jquery-ui, jsp

在我的 jSP 页面中，我有一些选项卡。选项卡有一个按钮。我想要的是当我单击按钮时，它应该显示下一个选项卡或我提供索引的选项卡。

我`index.jsp`的是，

```
<div class="navbar btn-navbar">
            <div id="tabs" class="tabbable">
                <ul id="myTab" class="nav nav-tabs">
                    <li id="datacollect" class="active"><a href="#datacollector"
                        target="main" data-toggle="tab">Data Collector</a></li>
                    <li id="fromDB" class="selectDataloadType"><a
                        href="#fromDatabase" target="main" data-toggle="tab">Data Load
                            Database</a></li>
                    <li id="fromFile" class="selectDataloadType"><a
                        href="#fromFiles" target="main" data-toggle="tab">Data Load
                            File</a></li>
                    <li id="email" class="selectDataloadType"><a href="#fromEmail"
                        target="main" data-toggle="tab">Data Load Email</a></li>
                    <li id="webServices" class="selectDataloadType"><a
                        href="#fromWebServices" target="main" data-toggle="tab">Data
                            Load Web</a></li>
                    <li><a href="#datamap" target="main" data-toggle="tab">Data
                            Map</a></li>
                    <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
                </ul>
                <br> <br> <br> <br> <br>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active" id="datacollector">
                        <div class="container">
                            <div class="row">
                                <div class="span8">
                                    <form>
                                        <fieldset>
                                            <label class="control-label" for="dataloadType">Data
                                                load Type:</label> <select id="dataloadType" name="dataloadType">
                                                <option>Choose Data load Type</option>
                                                <option value="fromDB">From Database</option>
                                                <option value="fromFile">From File</option>
                                                <option value="email">E-mail</option>
                                                <option value="webServices">Web Services</option>
                                            </select>
                                            <p>
                                                <button id="dataloadNext" class="btn btn-success"
                                                    type="button">Submit</button>
                                            </p>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div> 
```

脚本是

```
<script>
    $(function() {

        $("#dataloadNext").click(function() {
            $( "#tabs" ).tabs("active", 2 );
        });
    });
</script> 
```

我正在使用***`jquery-1.9.0`***这里的错误是什么？

***更新 1***

浏览器显示这样的错误

```
Uncaught Error: cannot call methods on tabs prior to initialization; attempted to call `method 'active'                       jquery-1.9.0.js:490` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:09:50.050

这是一个 jQuery-UI 错误，JSP 很好，我认为问题在于 jquery-ui 和几乎所有其他 javascript 框架（例如，您使用的引导程序）必须将它们的元素初始化为类型 I想要在与他们做任何工作之前。

*例如*，在您切换它们之前，您必须说它们是选项卡。

**示例代码将是**

```
<script>
  $(function() {
    $( "#tabs" ).tabs();
  });
  //then use them
  $("#dataloadNext").click(function() {
        $( "#tabs" ).tabs("active", 2 );
    });
 </script> 
```

希望这可以帮助

# ibatis - Mybatis（iBatis）如何读取我的私有变量？

> ID：15783141
> 
> 赞同：2
> 
> 时间：2013-04-03T09:09:30.673
> 
> 标签：ibatis, mybatis

我想知道 Mybatis 如何获取 Java 中的私有变量。

例如：

假设我们有一个名为 Foo 的 Java 类：

```
public class Foo{
   private int foolID;

   public Foo(int foolID){
     this.foolID = foolID;
   }
} 
```

让我们为插入创建 XML 映射器。

```
<insert id="insert" parameterType="Foo">
    insert into foo_table (id)
    values (#{foolID});
</insert> 
```

假设这个插入有 FooDAO java 类和 FooMapper java 接口。

我的问题是即使没有 Getter，傻瓜ID 是如何可读的（即使有傻瓜ID 的getter 方法，我也从不指定getter 是什么......）。这对我来说似乎很神奇，而且我知道编程没有魔法...... :)

我能想到的唯一方法就是反思。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:43:53.533

没错，反射是用来访问私有字段的，但前提是访问私有字段不受限制。像反射这样的接缝不仅用于访问私有字段，还用于调用 setter getter 等。

# javascript - 在多个 for 循环中使用相同的变量名是不好的做法吗？

> ID：15783144
> 
> 赞同：63
> 
> 时间：2013-04-03T09:09:33.383
> 
> 标签：javascript, for-loop, jslint, jshint

我只是在使用 JSHint 整理一些 JavaScript 代码。在代码中，我有两个 for 循环都像这样使用：

```
for (var i = 0; i < somevalue; i++) { ... } 
```

所以两个 for 循环都使用 var i 进行迭代。

现在 JSHint 向我显示了第二个 for 循环的错误：“'i' is already defined”。我不能说这不是真的（因为它显然是）但我一直认为这无关紧要，因为 var i 只在那个特定的地方使用。

以这种方式使用 for 循环是不好的做法吗？我应该为代码中的每个 for 循环使用不同的变量吗？

```
//for-loop 1
for (var i = 0; ...; i++) { ... }

//for-loop 2
for (var j = 0; ...; j++) { ... } 
```

或者这是我可以忽略的错误之一（因为它不会破坏我的代码，它仍然会做它应该做的事情）？

JSLint 顺便说一句。在第一个 for 循环处停止验证，因为我没有在函数顶部定义 var i （这就是我首先切换到 JSHint 的原因）。所以根据这个问题中的例子：[我应该使用 JSLint 还是 JSHint JavaScript 验证？](https://stackoverflow.com/questions/6803305/should-i-use-jslint-or-jshint-javascript-validation/10763615#10763615)– 我应该使用这样的 for 循环来确认 JSLint：

```
...
var i;
...
//for-loop 1
for (i = 0; ...; i++) { ... }
...
//for-loop 2
for (i = 0; ...; i++) { ... } 
```

这对我来说也很好，因为这样我应该避免 JSLint 和 JSHint 中的两个错误。但我不确定的是是否应该为每个 for 循环使用不同的变量，如下所示：

```
...
var i, j;
...
//for-loop 1
for (i = 0; ...; i++) { ... }
//for-loop 2
for (j = 0; ...; j++) { ... } 
```

那么是否有最佳实践，或者我可以使用上面的任何代码，这意味着我选择“我的”最佳实践？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-03T09:11:27.803

由于变量声明被提升到它们出现的范围的顶部，解释器将以相同的方式有效地解释两个版本。出于这个原因，JSHint 和 JSLint 建议将声明移出循环初始化程序。

以下代码...

```
for (var i = 0; i < 10; i++) {}
for (var i = 5; i < 15; i++) {} 
```

... 被有效地解释为：

```
var i;
for (i = 0; i < 10; i++) {}
for (i = 5; i < 15; i++) {} 
```

请注意，实际上只有一个声明`i`，并且对其进行了多个赋值 - 您不能真正“重新声明”同一范围内的变量。

要真正回答你的问题...

> 是否有最佳实践，或者我可以使用上面的任何代码吗？

对于如何最好地处理这个问题有不同的意见。就个人而言，我同意 JSLint 并认为当您在每个范围的顶部一起声明所有变量时，代码会更清晰。既然这就是代码的解释方式，为什么不编写看起来像它的行为的代码呢？

但是，正如您所观察到的，无论采用何种方法，代码都可以工作，因此它是一种风格/约定的选择，您可以使用您觉得最舒服的任何形式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-04T07:20:16.113

仅在[@TSCrowder 的评论](https://stackoverflow.com/questions/15783144/is-it-bad-practice-to-use-the-same-variable-name-in-multiple-for-loops#comment22438890_15783187)中提到：如果您的环境支持它（Firefox，Node.js），在 ES6 中您可以使用[`let`声明](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/let)

```
//for-loop 1
for (let i = 0; ...; i++) { ... }

//for-loop 2
for (let i = 0; ...; i++) { ... } 
```

这**将范围限制在 for-loop 内**。奖励：JSHint 停止抱怨。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T09:12:56.170

javascript 中的变量是函数范围的（不是块范围的）。

当您`var i`在循环中定义时，它会保留在循环中以及具有该循环的函数中。

见下文，

```
function myfun() {
    //for-loop 1
    for (var i = 0; ...; i++) { ... }

    // i is already defined, its scope is visible outside of the loop1.
    // so you should do something like this in second loop.

    for (i = 0; ...; j++) { ... }

    // But doing such will be inappropriate, as you will need to remember
    // if `i` has been defined already or not. If not, the `i` would be global variable.
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-03T09:12:50.743

JSHint 显示错误的原因是因为在 JS 变量范围是函数并且变量声明被提升到函数的顶部。

在 Firefox 中，您可以使用`let`关键字来定义块范围，但目前其他浏览器不支持。

该`let`关键字包含在 ECMAScript 6 规范中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-19T11:28:22.737

我知道这个问题已经得到解答，但是如果你想要超级 for 循环，可以这样写：

```
var names = ['alex','john','paul','nemo'],
    name = '',
    idx = 0,
    len = names.length;

for(;idx<len;++idx)
{
    name = names[idx];
    // do processing...
} 
```

这里发生了几件事......

1.  数组长度存储在`len`. 这会阻止 JS 评估`names.length`每次迭代

2.  `idx`增量是预增量（例如 ++idx NOT idx++）。预增量本身比后增量快。

3.  对 的引用的存储`name`。这是可选的，但如果您将`name`大量使用该变量，建议您这样做。每次调用都`names[idx]`需要在数组中找到索引。无论此搜索是线性搜索、树搜索还是哈希表，查找仍在进行。因此，将引用存储在另一个变量中以减少查找。

最后，这只是我个人的偏好，我没有证据或任何性能优势。但是，我总是喜欢将变量初始化为它们将要成为的类型，例如`name = '',`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T09:11:11.117

最佳实践是减少变量的范围，因此为循环声明迭代变量的最佳方法是

```
//for-loop 1
for (var i = 0; ...; i++) { ... }

//for-loop 2
for (var j = 0; ...; j++) { ... } 
```

我知道声明的变量的范围，`var`但我在这里讨论代码的可读性。

# iphone - 如何根据以 ios 开头的字符执行搜索

> ID：15783157
> 
> 赞同：2
> 
> 时间：2013-04-03T09:10:02.173
> 
> 标签：iphone, searchbar

嗨，在我的 ipad 应用程序中，我正在使用搜索栏执行搜索操作。为了执行此搜索操作，我使用以下逻辑

1.  如果任何元素包含我在搜索栏中输入的字符，则这些元素必须从这么多元素中提取并显示在表格中。

代码：

```
NSRange rTextRange = [finalSearchingString rangeOfString:searchStr options:(NSCaseInsensitiveSearch)];`
if (range.location != NSNotFound){                                       
     [self.filterdList addObject:product];
} 
```

这里最终结果在 filterdList 数组中可用，我将在 tableview 中显示该数组数据。

现在我在这个操作中的问题实际上是现在要求改变了。新要求是以搜索字符开头的产品，只需要显示未包含的产品。请帮助我如何实现此功能。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:17:19.603

试试这样我希望这个可以帮助你，

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@",  txtSearch.text];
   NSArray *ResultArray = [yourArray filteredArrayUsingPredicate:predicate];
  [tableview reloadData]; 
```

将上述代码保留在 searchBar 委托方法中，并使用结果数组重新加载 tableview。

# c# - MetadataException：在发布配置中使用 ExecuteStoreQuery 时指定的架构无效

> ID：15783159
> 
> 赞同：2
> 
> 时间：2013-04-03T09:10:07.073
> 
> 标签：c#, entity-framework, entity-framework-4

**[`ExecuteStoreQuery`](http://msdn.microsoft.com/en-us/library/dd487208.aspx)**使用检索当前数据库日期时出现以下异常：

```
The types in the assembly 'XYZ' cannot be loaded because the assembly contains
the EdmSchemaAttribute, and the closure of types is being loaded by name.
Loading by both name and attribute is not allowed.
   at System.Data.Metadata.Edm.ObjectItemCollection.LoadAssemblyFromCache(
       ObjectItemCollection objectItemCollection, Assembly assembly,
       Boolean loadReferencedAssemblies, EdmItemCollection edmItemCollection,
       Action`1 logLoadMessage)
   at System.Data.Metadata.Edm.MetadataWorkspace.ImplicitLoadAssemblyForType(
       Type type, Assembly callingAssembly)
   at System.Data.Objects.ObjectContext.ExecuteStoreQueryInternal[TElement](
       String commandText, String entitySetName, MergeOption mergeOption,
       Object[] parameters)
   at (my method) 
```

有问题的方法包含

```
var timestamp = context.ExecuteStoreQuery<DateTime>("SELECT GetDate() ").First(); 
```

我以前使用过规范函数`CurrentDateTime`，但这也在调试配置中导致了这个异常。**现在它只在发布配置中抛出**。

我发现这个确切的例外只提到了几次，主要是它与在一个程序集中混合代码优先和数据库优先方法有关，我相信我已经排除了这种情况。

生成的代码确实包含

```
[assembly: EdmSchemaAttribute()] 
```

但我不知道是哪种类型造成的——我不知道也不知道如何找到它们。

如果我只使用 LINQ to Entities，这一切似乎都有效。

目前，我依赖于我们的服务器时间同步并且根本不查询数据库时间 - 不建议这样做，但遗憾的是，在我们的代码库中依赖它并不是第一件事。

**还有问题：**

代码生成器包含上述属性的原因可能是什么？我怎样才能防止这种情况？什么可能是合理的解决方法（导入包含的存储过程`SELECT GetDate()`似乎有点过头了）？另外为什么这只发生在发布配置中？我没有找到关于基于编译器符号和选项的 EF 优化/差异的信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:05:25.033

从历史上看（在 EF1 中），EF 只能使用从 EntityObject 类派生的实体并赋予无数属性 - 例如，每个实体都必须具有 EdmEntityType 属性，每个属性都必须具有 EdmProperty 属性等等。具有实体的程序集必须具有 EdmSchemaAttribute。加载类型时，EF 会查找 EdmSchemaAttribute，如果找到它，它就知道此程序集包含需要加载的基于 EntityObject 的实体。在 EF4 中添加了对 POCO 类型的支持。现在，您不再需要按照惯例将任何属性和类型与您的模型匹配。但是限制是您不能混合使用 POCO 和非 POCO 类型（因此会出现异常）。VS2008 SP1 和 VS2010 中的默认代码生成器生成基于 EntityObject 的实体和基于 ObjectContext 的上下文。存在非 POCO 实体，并且为了使 EF 能够找到它们，添加了 EdmSchemaAttribute。在 VS2012 中，默认是生成 POCO 实体并且不生成 EdmSchemaAttribute（它实际上会阻止查找 POCO 实体）。最后，在 VS 代码库中有 VS2010 的 T4 模板，您可以使用该模板从设计器中生成 POCO 实体。您只需将模板添加到您的项目中，并在设计器中将“代码生成策略”从“默认”更改为“无”。VS 代码库上有 VS2010 的 T4 模板，您可以使用它从设计器生成 POCO 实体。您只需将模板添加到您的项目中，并在设计器中将“代码生成策略”从“默认”更改为“无”。VS 代码库上有 VS2010 的 T4 模板，您可以使用它从设计器生成 POCO 实体。您只需将模板添加到您的项目中，并在设计器中将“代码生成策略”从“默认”更改为“无”。

# mongodb - Mongo 因插入过多而过时

> ID：15783161
> 
> 赞同：0
> 
> 时间：2013-04-03T09:10:11.280
> 
> 标签：mongodb, nosql

我尝试使用 mongodb 运行多代理模拟。

我在运行模拟程序的同一服务器中有一个 mongo 实例，但是当我有太多代理（在 10 个模拟步骤中约为 100.000 个）时，mongodb 会在几秒钟内停止。

mongo中插入数据的代码类似于：

```
if( mongo_client( &m_conn , m_dbhost.c_str(), m_dbport ) != MONGO_OK ) {
    cout << "failed to connect '" << m_dbhost << ":" << m_dbport << "'\n";
    cout << "  mongo error: " << m_conn.err << endl;
    return;
}
bson_init( &b );
bson_append_new_oid( &b, "_id" ) != BSON_OK );
bson_append_double( &b, "time", time );
bson_append_double( &b, "x", posx );
bson_append_double( &b, "y", posy );
bson_finish( &b );

if( mongo_insert( &m_conn , ns.c_str() , &b, NULL ) != MONGO_OK ){
    cout << "failed to insert in mongo\n";
}
bson_destroy( &b );
mongo_disconnect( &m_conn ); 
```

另外，在模拟过程中，如果我尝试使用 mongo-shell 访问，我也会收到错误消息：

```
$ mongo
MongoDB shell version: 2.4.1
connecting to: test
Wed Apr  3 10:10:24.870 JavaScript execution failed: Error: couldn't connect to server 127.0.0.1:27017 at src/mongo/shell/mongo.js:L112
exception: connect failed 
```

模拟结束后，mongo shell 再次响应，我可以检查数据库中有数据但已中断。在示例中，代理 m0n999 仅保存了 10 个步骤中的 6 个：

```
> show dbs
dB0B7F527F0FA45518712C8CB27611BD7   5.951171875GB
local   0.078125GB
> db.ins.m0n999.find()
{ "_id" : ObjectId("515bdf564c60ec1e000003e7"), "time" : 1, "x" : 1.1, "y" : 8.1 }
{ "_id" : ObjectId("515be0214c60ec1e0001075f"), "time" : 2, "x" : 1.2000000000000002, "y" : 8.2 }
{ "_id" : ObjectId("515be1c04c60ec1e0002da3a"), "time" : 4, "x" : 1.4000000000000004, "y" : 8.399999999999999 }
{ "_id" : ObjectId("515be2934c60ec1e0003b82c"), "time" : 5, "x" : 1.5000000000000004, "y" : 8.499999999999998 }
{ "_id" : ObjectId("515be3664c60ec1e000497cf"), "time" : 6, "x" : 1.6000000000000005, "y" : 8.599999999999998 }
{ "_id" : ObjectId("515be6cc4c60ec1e000824b2"), "time" : 10, "x" : 2.000000000000001, "y" : 8.999999999999996 }
> 
```

如何解决这个问题？如何避免丢失连接并从 mongo 档中恢复？

**更新** 我收到了*全局*日志错误，例如：

```
 "Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
    "Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
    "Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
    "Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
    "Wed Apr  3 11:53:00.379 [conn1378573] end connection 127.0.0.1:40748 (1 connection now open)", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:33:25.393

我解决了这个问题，它有两个错误：

*   我正在创建太多的集合。我从每个代理一个收集更改为每个模拟过程仅收集一个。

*   我创造了太多的联系。我从每次代理迭代一个连接更改为每个模拟步骤只有一个连接。

# java - wsimport：多个wsdl覆盖ObjectFactory

> ID：15783166
> 
> 赞同：7
> 
> 时间：2013-04-03T09:10:21.347
> 
> 标签：java, jaxb, wsdl, wsimport, objectfactory

我有多个（比如说 2、A 和 B）网络服务，我需要生成一个客户端来一起使用它们。在 Netbeans 中，我使用向导“新 Web 服务客户端”传递两个 wsdl，查看输出 Netbeans 只需为它们中的每一个调用 wsimport。

```
wsimport http:/mydomain/wsA.svc?wsdl
wsimport http:/mydomain/wsB.svc?wsdl 
```

A 和 B 都生成同一个包 com.mydomain.myapp （我猜它们是在同一个命名空间中定义的），所以我将 A 和 B 的存根类集合并在同一个包中。

但是，wsimport 也会为每个 web 服务创建一个 ObjectFactory，因此如果我在 AI 仅获取与 B 定义相关的 ObjectFactory 后生成 B 的存根（因为第一个 A 被覆盖）。相反，如果我切换顺序，A 的 ObjectFactory 会继续存在。

问题是我需要两个 ObjectFactories 才能为 web 服务 A 和 B 的类型创建 JAXBElements 包装类实例。

有没有办法在 java 包中映射 A 的命名空间，在另一个包中映射 B 以获得

```
com.mydomain.myapp.a
com.mydomain.myapp.b 
```

所以保留两个 ObjectFactories ？

简单的重构没有帮助，因为在内部调用了 getClass()，一旦包被重构，它就不再工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:20:41.300

您可能可以通过 JAXB 绑定文件执行此操作 - 看看这个问题/答案：[java wsimport rename/different ObjectFactory.java](https://stackoverflow.com/questions/6177155/java-wsimport-rename-different-objectfactory-java)

从那个答案，看看oracle的绑定文件：http: [//docs.oracle.com/javaee/5/tutorial/doc/bnbbf.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnbbf.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-18T11:32:34.577

这对我有用（使用 Spring java config）

```
@Bean
public Jaxb2Marshaller marshaller() {
    Jaxb2Marshaller marshaller = new Jaxb2Marshaller();
    marshaller.setPackagesToScan("com.example.api");
    return marshaller;
} 
```

使用`setPackagesToScan`而不是`setContextPath`为我完成了工作（我假设它忽略了里面的内容`ObjectFactory`并扫描整个包）。

# google-apps-script - 将字符串转换为矩阵（数组）

> ID：15783169
> 
> 赞同：0
> 
> 时间：2013-04-03T09:10:28.147
> 
> 标签：google-apps-script

我有一个字符串，我想使用谷歌应用程序脚本放入一个数组，我开始为此创建函数，但我无法正确执行，有人可以帮助我。我的字符串是这种形式：“key，type，val，key，type，val，key，type，val ....”我想在矩阵的每一行中输入键、类型和 val。

在这里输入代码

```
function (tasks_data)
{
var data [];
var cpt=-1;
    while(tasks_data.length>0)
    {
    data[cpt ]= new array();
    var key =tasks_data.substring (0,tasks_data.indexof(','));
    var type= tasks_data.substring(0,tasks_data.indexof(','));  
    var val =tasks_data.substring (0,tasks_data.indexof(','));
cpt++;                       
return tasks_data;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:43:10.077

这是一个工作示例，我认为不需要太多解释...

```
function xxx(){ // this function to test the "real" function
Logger.log(toMatrix('a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0'))
}

function toMatrix(tasks_data){
  var matrix = [];
  var row = [];
  var temp = tasks_data.split(',')
  var len = temp.length
    if (len/3 != parseInt(len/3)){return false};// error condition, string must have a length multiple of 3

  for(n=1;n<len+1;++n){
    row.push(temp[n-1]);
     if(n/3==parseInt(n/3)){matrix.push(row);var row=[]};// each 3 items create a new row
     }
   return matrix
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/mmPJE.jpg)

# mysql - Codeigniter 中的 MySQL 查询优化

> ID：15783173
> 
> 赞同：0
> 
> 时间：2013-04-03T09:10:37.563
> 
> 标签：mysql, sql, codeigniter

我在 CodeIgniter 中具有从 2 个表中检索最新帖子的功能：

```
public function get_latest_comments($amount)
{
  $query = $this->db->query('
    SELECT *, FROM_UNIXTIME(date) AS timestamp
    FROM comments
    ORDER BY timestamp DESC
    LIMIT 5
  ');

  if ($query->num_rows() > 0) {
    $result = $query->result_array();

    for ($i = 0; $i < sizeof( $result ); $i++) {
      $result[$i]['author_info'] = $this->comments_model->get_comment_author( $result[$i]['id'] );
      $result[$i]['date'] = mdate( "%M %m, %Y", $result[$i]['date'] );

      if ($result[$i]['section'] === 'blog') $loc = 'blog_posts';
      if ($result[$i]['section'] === 'core') $loc = 'public_posts';

      $this->db->select( 'title, slug' );
      $query = $this->db->get_where( $loc, array('id' => $result[$i]['location']) );

      $result[$i]['post_title'] = $query->row( 'title' );
      $result[$i]['url'] = base_url() . $result[$i]['section'] . '/view/' . $query->row( 'slug' ) . '/';
    }
    return $result;
  }
  return false;
} 
```

问题是它运行得太慢了。我的页面有时会加载 7-8 秒。我怀疑这个查询运行 2 次 + 收集最新评论的类似查询会减慢我的页面速度。

我对循环内的查询有一种不好的感觉。我怎样才能避免这种情况？

我的表的结构是：

```
users (id, username, mail ...
user_info ( user_id, name, surname
public_posts ( id, slug, text, author(user id) ...
blog_posts ( id, slug, text ...
comments ( id, text, author, location(post_id_, section(post_table) ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:17:02.453

通过解释您的查询来检查，转到 mysql 命令行并输入

```
EXPLAIN SELECT *, FROM_UNIXTIME(date) AS timestamp FROM comments ORDER BY timestamp DESC LIMIT 5 
```

解释将告诉您有关查询的所有信息，在此基础上您也可以决定索引。在代码中使用它之前，请练习解释每个选择查询。

另外，当您认为您的代码需要时间时，您还可以进行分析。在 codeigniter Profiler 类可用，请通过以下链接。

[https://www.codeigniter.com/userguide3/general/profiling.html](https://www.codeigniter.com/userguide3/general/profiling.html)

# tcl - 如何获取 Tcl_Interp 的字符串值

> ID：15783174
> 
> 赞同：0
> 
> 时间：2013-04-03T09:10:40.707
> 
> 标签：tcl

我有`Tcl_Interp`我不知道持有什么的结构。我试图打印一个字符串值，`interp.result`但它没有返回任何内容。我正在使用这个功能：

```
void debug_state(char *state); 
```

像这样：

```
debug_state(Tcl_GetStringResult(g_game.tcl_interp)); 
```

但它没有返回任何东西。有没有其他方法可以查看字符串`tcl_interp`以外的值`char *Tcl_GetStringResult(interp)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:07:27.593

您不应该将 Tcl_Interp* 用作解释器的不透明句柄以外的任何东西。曾几何时，您使用 interp->result 来访问结果，但这已被弃用十多年。正如您所发现的，应该使用 Tcl_GetStringResult 和通常更好的 Tcl_GetObjResult。通常，在新代码中，您应该尝试使用 Tcl_Obj 函数而不是字符串函数，因为这样可以避免在不必要时与字符串类型进行转换。

您的代码应该没问题，前提是 debug_state 不希望函数返回后结果值有效。我会说，如果您看到一个空字符串，那么这就是您的解释器结果中的内容。您可以通过将其设置为之前的某个值来检查它，例如：`Tcl_SetObjResult(interp, Tcl_NewStringObj("testing, testing...", -1));`. 如果你随后调用 Tcl_GetStringResult(interp) 你应该得到一个指向上述字符串副本的 char * 指针。

# c# - 为什么使用 ConfigurationManager 与读取自定义配置文件？

> ID：15783175
> 
> 赞同：2
> 
> 时间：2013-04-03T09:10:44.020
> 
> 标签：c#, configuration

我一直使用我自己的配置文件格式，即 XML，然后我只是将 XML 反序列化为项目中的对象，或者只是将其读入 XML 文档。

这似乎更容易阅读和访问我需要的信息。

我`ConfigurationManager`今天早上看了这门课，只是阅读配置文件似乎有点过于复杂。

关于为什么我应该使用有什么论据`ConfigurationManager`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:17:03.657

1.  *它只是 .NET 中已经*为您实现的内置机制，因此您不需要任何额外的代码（可能除了将其包装在您自己的代码中`IConfig`以分离关注点）。

2.  有一个用于编辑 .NET 配置文件的 GUI，有时会派上用场。

3.  例如，ASP.NET 应用程序`web.config`在更改后会自动重新启动，而您需要一些自定义逻辑才能与您自己的配置文件具有相同的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:17:10.060

ConfigurationManager 是在内部使用的，您没有义务以任何方式使用它，我曾经做过您所做的事情。现在这取决于，如果它是一个用户应该更改的文件，我可能仍然会做我自己的配置，否则该文件被添加为嵌入式资源，我使用 ConfigurationManager 来读取它，因为我认为没有另一个读取这些文件的方式。问题是，使用任何你喜欢的机制，ConfigurationManager 提供了更多的封装，而且开箱即用的 utils 类。

# apache - XSLFO 中的 WMF 文件格式

> ID：15783179
> 
> 赞同：0
> 
> 时间：2013-04-03T09:10:52.457
> 
> 标签：apache, xslt, xsl-fo, apache-fop, wmf

我正在尝试使用 Apache FOP 使用 docx 中的 document.xml 文件将 Docx 转换为 Pdf。

我在将 wmf 方程文件嵌入 PDF 时遇到问题，它显示以下错误：

警告：字形“？” （0x2264，lessequal）在字体“Times-Roman”中不可用。2013 年 4 月 3 日下午 12:29:01 org.apache.fop.events.LoggingEventListener processEvent

在 PDF 中，方程显示为垃圾。

有没有其他方法可以在没有字体问题的情况下正确嵌入 WMF 文件？另外，请建议是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T21:22:54.240

PDF 本身不支持“WMF”文件。无论您使用何种流程来处理原始文档，都必须将 WMF 的格式修改为您使用的任何 XSL FO 处理器所支持的另一种类型。在 Apache FOP 的情况下，仅通过使用 Batik 来提供对 WMF 的支持。

请参阅[Apache FOP 支持的图像格式](http://xmlgraphics.apache.org/fop/1.1/graphics.html)

# c# - Windows 商店应用程序中的登录屏幕 - MessageDialog

> ID：15783181
> 
> 赞同：2
> 
> 时间：2013-04-03T09:10:57.770
> 
> 标签：c#, login, windows-8, messagedialog

我想知道，如何创建如下图所示的登录屏幕。它看起来像 MessageDialog，但我不知道如何实现那种东西。我在网上搜索这个，但对于像我这样的初学者来说没有什么用处。

![在此处输入图像描述](https://i.stack.imgur.com/71qwP.png)

我知道如何创建 MessageDialog，但不知道如何向此对话框添加任何文本框。或者这甚至不是 MessageDialog，而是某种 xaml 文件？正如我所说，我完全是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:21:01.350

这是[CredentialPicker](http://msdn.microsoft.com/en-us/library/windows/apps/hh701247.aspx)控件。

[在MSDN](http://code.msdn.microsoft.com/windowsapps/Credential-picker-sample-30fcba2e)上有一个如何使用它的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:31:01.317

首先。您是否需要调用此对话框或创建自己的类似这样的对话框？如果您需要调用此对话框，那么您应该知道这是标准的 Windows 对话框，并且您不能添加任何其他字段。它显示当您在其他情况下调用函数 XboxLIVEService.SignInAsync() - 创建您自己的用户控件

# windows - 在跨域中模拟用户角色

> ID：15783184
> 
> 赞同：1
> 
> 时间：2013-04-03T09:11:06.633
> 
> 标签：windows, asp.net-mvc-4, cross-domain, impersonation, httpmodule

在我当前的应用程序中，我的测试团队在不同的域上工作，而生产服务器位于不同的域中，在 IIS 中启用了 Windows 身份验证。测试团队用户 A（普通用户）应该能够以提升和取消提升的权限登录到服务器域。如何在 ASP.NET MVC 4 C# 中以编程方式完成此操作？我正计划为模拟创建一个 HTTP 模块，但问题是，当应用程序配置为 Windows 身份验证时，IIS 将丢弃未经身份验证的用户，并且它永远不会到达模拟模块。

# numpy - 转换速率测量

> ID：15783191
> 
> 赞同：2
> 
> 时间：2013-04-03T09:11:29.463
> 
> 标签：numpy, scipy, signal-processing, python-2.5

我必须测量信号的转换率，如下图所示。我需要灰色箭头标记的部分的转换速率。 ![信号处理](https://i.stack.imgur.com/5QGC8.png)

目前，我使用 hann 窗口平滑信号，以消除最终的噪声并使峰值变平。然后我搜索（从右开始） 30% 和 70% 点并计算这两个点之间的转换率。但我的问题是，信号在平滑后变得平坦。因此，计算出的压摆率没有达到应有的高。如果我减少平滑，那么峰值（您可以在图像中看到右侧）会变得更高，最终会在错误的位置找到 30% 的点。

是否有更好/更安全的方法来找到所需的转换速率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:09:49.240

如果你知道你的信号在什么值之间转换，并且你的噪声不是太大，你可以简单地计算所有 30% 的交叉点和 70% 的所有交叉点之间的时间差，并保留最小的一个：

```
import numpy as np
import matplotlib.pyplot as plt

s100, s0 = 5, 0

signal = np.concatenate((np.ones((25,)) * s100,
                         s100 + (np.random.rand(25) - 0.5) * (s100-s0),
                         np.linspace(s100, s0, 25),
                         s0 + (np.random.rand(25) - 0.5) * (s100-s0),
                         np.ones((25,)) * s0))

# Interpolate to find crossings with 30% and 70% of signal
# The general linear interpolation formula between (x0, y0) and (x1, y1) is:
# y = y0 + (x-x0) * (y1-y0) / (x1-x0)
# to find the x at which the crossing with y happens:
# x = x0 + (y-y0) * (x1-x0) / (y1-y0)
# Because we are using indices as time, x1-x0 == 1, and if the crossing
# happens within the interval, then 0 <= x <= 1.
# The following code is just a vectorized version of the above
delta_s = np.diff(signal)
t30 = (s0 + (s100-s0)*.3 - signal[:-1]) / delta_s
idx30 = np.where((t30 > 0) & (t30 < 1))[0]
t30 = idx30 + t30[idx30]
t70 = (s0 + (s100-s0)*.7 - signal[:-1]) / delta_s
idx70 = np.where((t70 > 0) & (t70 < 1))[0]
t70 = idx70 + t70[idx70]

# compute all possible transition times, keep the smallest
idx = np.unravel_index(np.argmin(t30[:, None] - t70),
                       (len(t30), len(t70),))

print t30[idx[0]] - t70[idx[1]]
# 9.6

plt. plot(signal)
plt.plot(t30, [s0 + (s100-s0)*.3]*len(t30), 'go')
plt.plot(t30[idx[0]], [s0 + (s100-s0)*.3], 'o', mec='g', mfc='None', ms=10)
plt.plot(t70, [s0 + (s100-s0)*.7]*len(t70), 'ro')
plt.plot(t70[idx[1]], [s0 + (s100-s0)*.7], 'o', mec='r', mfc='None', ms=10 )
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/5vBwe.png)

# php - php超链接插入错误

> ID：15783193
> 
> 赞同：0
> 
> 时间：2013-04-03T09:11:39.180
> 
> 标签：php, hyperlink

我无法在 php 中插入超链接，当我以下面给出的方式插入超链接时，页面变为空白：

```
echo "' &bull; {$row['ntitle']}: <a href=\"detail.php?id=' . $row['id'] . '\" class=\"style1\">Detail </a>'"; 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:16:23.567

您的行包含与引号和双引号的打开和关闭相关的错误。

这应该做的工作：

```
echo "&bull; {$row['ntitle']}: <a href=\"detail.php?id={$row['id']}\" class=\"style1\">Detail </a>"; 
```

那应该输出如下内容：

```
• yourTitle: Detail 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:18:09.430

试试这个

```
 echo "&bull; ".$row['ntitle']." : <a href=\"detail.php?id='" . $row['id'] . "'\" class=\"style1\">Detail </a>"; 
```

您的行有错误，请使用以下行在页面开头的 php 上显示正确的错误。

```
 ini_set('display_errors','1');
 error_reporting(E_ALL & ~E_NOTICE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:18:34.590

您的字符串引用不正确

试试这个而不是你的：

```
echo ' &bull; '.$row["ntitle"].': <a href="detail.php?id=' . $row["id"] . '" class="style1">Detail </a>'; 
```

或使用[printf](http://www.php.net/manual/en/function.printf.php)以免被大量引号和连接混淆：

```
printf(' &bull; %s: <a href="detail.php?id=%s" class="style1">Detail </a>', $row["ntitle"], $row["id"]); 
```

[并且肯定会在http://www.php.net/manual/en/function.error-reporting.php](http://www.php.net/manual/en/function.error-reporting.php)上显示错误/警告/通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:27:48.890

使用 sprintf 函数来格式化您的字符串。试试这个。

```
$string = sprintf(" &bull; %s: <a href=\"detail.php?id=%s\" class=\"style1\">Detail </a>",$row["ntitle"],$row["id"]);
echo $string; 
```

# iphone - 我可以在我的 ios 应用程序中离线使用 bing map api 吗？

> ID：15783195
> 
> 赞同：-2
> 
> 时间：2013-04-03T09:11:42.770
> 
> 标签：iphone, ios, api, offline, bing-maps

我想开发**iPhone**应用程序，我想在其中显示在搜索栏中输入的**位置的****地图**，当有互联网连接但无法**离线**显示地图时，它可以正常工作。我正在使用**bing 地图 API**。

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:41:50.000

使用必应地图 API 的互联网连接是必须的。您应该创建自己的数据库或在没有 Internet 连接时显示错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:14:59.437

it is possible but not allowed to store a local copy.

maybe a legal way would be to buy a licence for the bing maps server******

# c# - 与任务并行，一些任务有效，一些没有

> ID：15783200
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:11:54.463
> 
> 标签：c#, .net, parallel-processing, task-parallel-library

我有一个网站，我编写了一个 HttpModule 来转换所有链接，所以一切都很好，直到我要在转换 URL 中使用并行性。

这是我的测试控制台应用程序：

```
class Program
    {
        static void Main(string[] args)
        {
            new Job().Do();
        }
    }

    public class Job
    {
        public void Do()
        {
            string content = @"
            new link1 href=""www.yahoo1.com"" end
            new link2 href=""www.yahoo2.com"" end
            new link3 href=""www.yahoo3.com"" end
            new link4 href=""www.yahoo4.com"" end
            new link5 href=""www.yahoo5.com"" end
            new link6 href=""www.yahoo6.com"" end
            ";

            string newcontent = Transformlink(content);

            Console.WriteLine(content);
            Console.WriteLine();
            Console.WriteLine(newcontent);
            Console.ReadLine();
        }

        private string Transformlink(string content)
        {
            List<UrlIndex> AllUrls = GetUrls(content);
            List<Task> TaskPool = new List<Task>();
            foreach (UrlIndex Item in AllUrls)
                TaskPool.Add(Task.Factory.StartNew(() => TransformUrl(Item)));
            Task.WaitAll(TaskPool.ToArray());

            return ReplaceUrlWithTransformUrl(content, AllUrls);
        }

        private string ReplaceUrlWithTransformUrl(string content, List<UrlIndex> AllUrls)
        {
            for (int i = AllUrls.Count - 1; i >= 0; i--)
            {
                UrlIndex CurrentItem = AllUrls[i];
                content = content.Substring(0, CurrentItem.StartIndex) + CurrentItem.TransformedUrl + content.Substring(CurrentItem.EndIndex);
            }
            return content;
        }

        private void TransformUrl(UrlIndex urlindex)
        {
            urlindex.TransformedUrl = string.Format("Google{0}.com", new Random().Next(100, 999).ToString());
        }

        private List<UrlIndex> GetUrls(string content)
        {
            //Get Start And End Index, Get Url Set TransformedUrl = Url
            List<UrlIndex> AllUrls = new List<UrlIndex>();
            int startindex = 0;
            int endIndex = 0;
            int previousindex = 0;
            while (startindex != -1)
            {
                startindex = content.IndexOf("href=\"", previousindex);
                if (startindex == -1)
                    break;
                startindex += 6;
                previousindex = startindex;
                endIndex = content.IndexOf("\"", previousindex);
                if (endIndex == -1)
                    break;
                previousindex = endIndex;
                string url = content.Substring(startindex, endIndex - startindex);
                AllUrls.Add(new UrlIndex() { StartIndex = startindex, EndIndex = endIndex, Url = url, TransformedUrl = url });
            }

            return AllUrls;
        }
    }

    public class UrlIndex
    {
        public int StartIndex { get; set; }
        public int EndIndex { get; set; }
        public string Url { get; set; }
        public string TransformedUrl { get; set; }
    } 
```

结果必须是：

```
new link1 href=""www.Google859.com"" end
new link2 href=""www.Google245.com"" end
new link3 href=""www.Google749.com"" end
new link4 href=""www.Google345.com"" end
new link5 href=""www.Google894.com"" end
new link6 href=""www.Google243.com"" end 
```

这正是我想要的。

但结果是：

```
new link1 href=""www.yahoo1.com"" end
new link2 href=""www.yahoo2.com"" end
new link3 href=""www.yahoo3.com"" end
new link4 href=""www.yahoo4.com"" end
new link5 href=""www.yahoo5.com"" end
new link6 href=""www.Google125.com"" end 
```

如您所见，仅转换了最后一个链接。在某些情况下：

```
new link1 href=""www.yahoo1.com"" end
new link2 href=""www.yahoo2.com"" end
new link3 href=""www.Google285.com"" end
new link4 href=""www.yahoo4.com"" end
new link5 href=""www.yahoo5.com"" end
new link6 href=""www.Google125.com"" end 
```

控制台项目在 .NET 4 中

这是我的错吗？为什么所有任务都不起作用？线`Task.WaitAll(TaskPool.ToArray());`不够？有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:46:00.893

看起来像一个关闭问题。像这样改变你的`Transformlink`方法：

```
 private string Transformlink(string content)
    {
        List<UrlIndex> AllUrls = GetUrls(content);
        List<Task> TaskPool = new List<Task>();
        foreach (UrlIndex Item in AllUrls)
        {
            val localItem = Item;
            TaskPool.Add(Task.Factory.StartNew(() => TransformUrl(localItem)));
        }
        Task.WaitAll(TaskPool.ToArray());

        return ReplaceUrlWithTransformUrl(content, AllUrls);
    } 
```

编辑/解释：

这是按`Tasks`计划安排的。你没有真正的方法来控制它。在您的控制应用程序中，任务执行被安排“足够快”以在您循环迭代之前完成。因为`Item`你传入的那个变量`TransformUrl`仍然是你想到的那个。

但是在您的服务器应用程序循环在任何`Task`执行之前完成。请注意，您传递了一个参考。此引用在每次迭代中都会更改。`UrlIndex`因此，循环完成后，您的所有任务都将在同一个实例上执行转换。这就是发生的事情。通过创建局部变量，您可以存储对您想要使用的实际对象的引用。

所以使用局部变量是正确的方法。由于正确的时间条件，它可以在控制台应用程序中工作（我称之为运气:)）

# maven - 在进程资源阶段（groovy 脚本）无法从 Maven 依赖项加载驱动程序类

> ID：15783201
> 
> 赞同：0
> 
> 时间：2013-04-03T09:11:55.817
> 
> 标签：maven, jdbc, groovy

我已经开始处理在**进程资源**阶段运行的脚本（不是我的想法，当我得到它时就是这样）。它执行 sql 脚本来清理数据库。我需要将它从命令行工具迁移到 Jdbc。

问题是当我尝试加载驱动程序时，我得到：

```
java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver 
```

我曾尝试使用其他数据库系统的驱动程序，但异常总是相同的。驱动程序在 Eclipse 中作为 maven 依赖项可见，它们的范围是“编译”。

我试图以两种方式加载它：

```
Class.forName("net.sourceforge.jtds.jdbc.Driver")
//and:
def sql = Sql.newInstance(url,user,pass,"net.sourceforge.jtds.jdbc.Driver") 
```

我知道在构建阶段运行这样的脚本不是一个好习惯，但当时仍然可以让这些类可见吗？

[编辑] 可以创建 Driver 类的对象，因此它似乎不是 maven 阶段问题。更改标题以反映这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:45:06.670

我猜您需要`net.sourceforge.jtds.jdbc.Driver`在构建阶段添加包含作为依赖项的 jar。也就是说，不是构建依赖项，而是构建阶段类路径中可用的东西。

为此，我相信您需要将此 jar 文件作为依赖项添加到您的插件之一。在 Maven 书中查看此信息：

[http://www.sonatype.com/books/mvnref-book/reference/_configuring_maven_plugins.html#_adding_plugin_dependencies](http://www.sonatype.com/books/mvnref-book/reference/_configuring_maven_plugins.html#_adding_plugin_dependencies)

请注意，我没有尝试过这个，我不确定这是否会起作用，但这对我来说是一个可能的解决方案。

# iphone - 如何在 iPhone 的 http 正文中将数组作为参数传递

> ID：15783202
> 
> 赞同：1
> 
> 时间：2013-04-03T09:12:05.510
> 
> 标签：iphone, ios, objective-c, web-services, restkit

我在 php 中有以下代码（用于服务的 httpbody）：-

```
<$xmlJobList = "<?xml version='1.0'?><Search><CompanyId><![CDATA[ $companyId ]]></CompanyId>"; $xmlJobList .= "<Offset><![CDATA[ $offset ]]></Offset><Limit><![CDATA[ $limit ]]></Limit>";$xmlJobList .= "<Keywords><![CDATA[ $keywords ]]></Keywords>";$xmlJobList .= "<FunctionalAreaId><![CDATA[ $farea ]]></FunctionalAreaId>**<IndustryTypeIds>"; foreach ($industry as $value){$xmlJobList .= "<IndustryTypeId><![CDATA[ $value ]]></IndustryTypeId>";}$xmlJobList .= "<Format><![CDATA[ $format ]]></Format></Search>"; 
```

我想为 iPhone/objective-c 编写 HTTP 正文

请帮帮我，我第一次为 php 工作。

# javascript - 函数中的“this” VS 方法中的“this”

> ID：15783203
> 
> 赞同：2
> 
> 时间：2013-04-03T09:12:06.673
> 
> 标签：javascript, this

来自 Javascript-花园：

```
Foo.method = function() {
  function test() {
    //this is set to the global object
  }
test();
} 
```

为了从测试中访问 Foo，有必要在引用 Foo 的方法内部创建一个局部变量：

```
Foo.method = function() {
  var that = this;
  function test(){
    //Use that instead of this here
  }
test();
} 
```

谁能解释一下？据我了解，`this`如果在全局范围内调用它，则指的是全局对象。但这里它是在函数内部调用的，它在方法内部（第一个示例）。为什么它准确地引用全局对象，而第二个示例没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:17:55.670

> 据我了解，如果在全局范围内调用它，则 this 指的是全局对象。

如果在没有显式上下文的情况下调用函数，则否`this`将引用默认对象。范围无关紧要。（在严格模式下，它将`undefined`改为引用）。

> 为什么它究竟是指全局对象

~~我们不知道它指的是什么。~~的值`this`取决于函数的*调用*方式，而不是它的定义方式。

现在您已经更新了示例，我们可以看到它是在没有上下文的情况下调用的，因此`this`（在内部函数中）将是默认对象，在 Web 浏览器中是默认对象`window`（它将`undefined`处于严格模式）。

> 而第二个例子没有？

在第二个示例中，不使用内部函数`this`（其值与前一个示例相同）。

第二个示例`that`改为使用。`that`在外部函数的范围内定义，并设置`this`为调用该函数时的任何值。

假设该函数被称为`Foo.method()`then （外部）`this`（因此`that`）将是`Foo`因为那是`method`被调用的上下文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:14:21.093

`this`定义函数时未设置函数中的 in 。它仅动态定义给函数调用的接收者。

如果你打电话`foo.test()`，就会`this`在。`test``foo`

但如果你这样做

```
var f = foo.test;
f(); 
```

然后`this`in `f`(即`foo.test`) 将是外部对象（如果您在根级别执行它，则为窗口）。

这将与

```
foo.test.call(window); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:16:15.983

第二个示例使用闭包将外部函数变量放在内部函数的作用域链上。

```
Foo.method = function() {
  var that = this;
  function test(){
    //This function has access to the outer variables scope chain.
  }
} 
```

# jquery - jquery cookie 不起作用

> ID：15783205
> 
> 赞同：1
> 
> 时间：2013-04-03T09:12:13.800
> 
> 标签：jquery, cookies, hash, tabs

我编写了以下代码，并且正在使用 jquery cookie，但我认为它不起作用。但是一旦我删除这两条语句，

```
$.cookies(cookieName, hash, cookieOptions);

alert($.cookies(cookieName)); 
```

其他一切正常，它们是否有任何语法错误？我还检查了其他浏览器，我使用的是 localhost，没有一个浏览器也可以与 cookie 一起使用。非常感谢任何帮助！

问候杰伊

```
$(document).ready(function(){

    $("a.tab").click(function () {
        var cookieName = 'active';
        var cookieOptions = {expires: 7, path: '/'};

        var hash = this.getAttribute("href");

        if (hash.substring(0, 1) === "#") {
            hash = hash.substring(1);
        }
        $(".active").removeClass("active");
        $(this).addClass("active");
        location.hash = hash;

        $.cookies(cookieName, hash, cookieOptions);
        alert($.cookies(cookieName));

        alert(hash);
        showTab(hash);

        return false;
    });

    function showTab(hash) {
        $(".content").hide();
        var content_show = "content_";
        $("#"+content_show+hash).fadeIn();
    };
}); 
```

# list - 仪表板设计器中的“无法检索列表”

> ID：15783207
> 
> 赞同：1
> 
> 时间：2013-04-03T09:12:35.660
> 
> 标签：list, sharepoint-2010, business-intelligence, dashboard-designer, data-connections

设置性能点应用程序和 BI 中心后，我尝试创建一些到特定共享点站点的数据连接。它在“项目任务列表”和“问题跟踪列表”上正常工作。不幸的是，我还有一个无法连接到的任务列表，并且收到“无法检索列表”错误。与其他两个列表的唯一区别是我在其上运行了两个带有模拟步骤的工作流。

我可以选择我想要的列表，但是当我测试连接时，它显示“无法检索列表”，尽管该站点的所有安全设置都是相同的。

谁能帮我这个？

# node.js - 如何以快递方式压缩 POST 请求数据？

> ID：15783208
> 
> 赞同：5
> 
> 时间：2013-04-03T09:12:38.080
> 
> 标签：node.js, express, gzip

我正在尝试构建一个可以使用 express 接受 gzipped POST 数据的服务器。我想我可以编写自己的中间件来将请求流通过管道传输到 zlib.createGunzip() 流。问题是，我怎样才能做到这一点，之后 express.bodyParser() 中间件仍然能够解析我压缩的 POST 数据？

我试图用 zlib 流的方法替换原始请求流方法，但这只会使 bodyParser 返回“错误请求”错误：

```
var express = require('express');
var app = express();

function gUnzip(req, res, next) {
  var newReq;
  if (req.headers['content-encoding'] === 'gzip') {
    console.log("received gzipped body");
    newReq = req.pipe(zlib.createGunzip());
    Object.getOwnPropertyNames(newReq).forEach(function (p) {
      req[p] = newReq[p];
    });
  }
  next();
}

app.use(gUnzip);
app.use(express.bodyParser());

app.listen(8080); 
```

有没有办法在不重写我自己的中间件中的 bodyParser() 中间件的情况下完成这项工作？

编辑：这是同一个问题：[Unzip POST body with node + express](https://stackoverflow.com/questions/14194864/unzip-post-body-with-node-express)。但在答案中，他只是在他自己的中间件中做了 express.bodyParser() 应该做的事情，这是我想要避免的。我正在寻找一种方法来简单地从流中解压缩请求数据，然后将其传递给 bodyParser()，它需要一个流本身，如[http://www.senchalabs.org/connect/json 所示。 .html](http://www.senchalabs.org/connect/json.html) _

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T06:04:42.770

通常不使用压缩的请求主体，因为您无法轻松地在客户端和服务器之间协商内容编码（我相信还有另一个 stackoverflow 问题）。大多数服务器不支持压缩请求正文，唯一真正需要它的是客户端将发送大型正文的 API。

body-parser，特别是 raw-body，不支持它，因为用例是如此之少，尽管我已经考虑添加它。现在，你必须创建你的 body-parser。幸运的是，这很容易，因为您只需 fork body-parser 并利用 raw-body。您将在[https://github.com/expressjs/body-parser/blob/master/index.js#L80](https://github.com/expressjs/body-parser/blob/master/index.js#L80)周围添加的主要代码：

```
 var zlib = require('zlib')

        var stream
        switch (req.headers['content-encoding'] || 'identity') {
            case 'gzip': 
                stream = req.pipe(zlib.createGunzip())
                break
            case 'deflate': 
                stream = req.pipe(zlib.createInflate())
                break
            case 'identity': 
                break
            default:
                var err = new Error('encoding not supported')
                err.status = 415
                next(err)
                return
        }

        getBody(stream || req, {
            limit: '1mb',
            // only check content-length if body is not encoded
            length: !stream && req.headers['content-length'],
            encoding: 'utf8'
        }, function (err, buf) {

        }) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-03T09:56:03.650

~~您是否尝试过使用内置的`compress`中间件。它记录在`expressjs` [参考文档中](http://expressjs.com/api.html#compress)~~

```
app.use(express.compress()); 
```

也许你可以在这里找到有用的东西：[Unzip POST body with node + express](https://stackoverflow.com/questions/14194864/unzip-post-body-with-node-express)

# php - PHP日期函数

> ID：15783211
> 
> 赞同：-3
> 
> 时间：2013-04-03T09:12:45.290
> 
> 标签：php, date, time

我尝试使用 php date function() 如下

```
 $date=date('Y-m-d').' '.date('H:i:s');
 echo $date; 
```

显示的输出是`2013-04-03 09:04:02`..但我的系统是`02:49 pm`...

什么时间显示给我？即使我得到相同的答案，我也尝试更改互联网时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:19:05.937

首先，没有必要使用该`date`功能两次。这将做同样的事情：

```
echo date('Y-m-d H:i:s'); 
```

其次，您需要设置 PHP 的[`date.timezone`](http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone). 这可以在[`php.ini`](http://www.php.net/manual/en/configuration.file.php)文件中完成，但也可以使用[`date_default_timezone_set`](http://php.net/date_default_timezone_set)函数完成，如下所示：

```
date_default_timezone_set('Europe/Amsterdam'); 
```

您必须输入的字符串可以[在文档](http://www.php.net/manual/en/timezones.php)中找到。

值得注意的是，您可以随时告诉该`date`函数使用。这是通过传入[*nix 时间戳](http://en.wikipedia.org/wiki/Unix_time)作为第二个参数来完成的。例如：

```
// One week ago from now
echo date('Y-m-d H:i:s', time()-604800); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:17:22.807

它只会显示服务器的时间。如果可能的话，与您的服务器时间进行比较。如果你想使用本地机器的时间，你需要使用**JAVASCRIPT**。

还有一个建议，

您不必单独使用来显示日期和时间。您可以在这样的单个语句中实现这一点。

```
$date=date('Y-m-d H:i:s'); 
```

你会得到相同的格式`2013-04-03 09:04:02`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:18:35.343

通过打开 phpinfo() 检查您的系统时区和 php 中的默认时区

# java - 如何将工具提示添加到标签，然后将其添加到 celltable 列？

> ID：15783219
> 
> 赞同：1
> 
> 时间：2013-04-03T09:12:53.457
> 
> 标签：java, gwt

我有一个单元格表。我想在单元格表的一列中添加多个标签，并为每个标签分配一些工具提示。到目前为止我所尝试的 -

```
TextColumn<C> detailsColumn = new TextColumn<C>() {
  @Override
  public String getValue(C c) {
    List<String[]> cList = c.getChngd();
    if (cList == null || cList.size() == 0) {
      return null;
    }
    Label lbl;
    HorizontalPanel hpanel=new HorizontalPanel();
    for (Iterator<String[]> itr =List.iterator(); itr.hasNext();) {
      String[] detail = itr.next();
      lbl=new Label();
      lbl.setText(detail[0]);
      lbl.addMouseOverHandler(new MouseOverHandler() {
        @Override 
        public void onMouseOver(MouseOverEvent event) {
          Widget source = (Widget)event.getSource();
          source.setTitle("tooltip");
        }
      });
      hpanel.add(lbl);
    }
    return hpanel.getElement().getInnerText();
  }
}; 
```

它不工作。有相同的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:19:38.583

我会将工具提示逻辑移动到`Cell`，而不是 的`getCell()`方法中`Column`，该方法仅用于检索单元格将要呈现的基础数据。

如果您想要一个简单的基于标题的单元格，以下应该可以工作。它创建一个文本单元格，其数据值包含在带有标题的 div 中。

```
public class TooltipTextCell extends TextCell {
  public interface Template extends SafeHtmlTemplates {
    @Template("<div title=\"{1}\" />{0}</div>")
    SafeHtml label(SafeHtml text, String title);
  }
  private static Template template;

  public TooltipTextCell() {
    super();
    if (template == null) {
      template = GWT.create(Template.class);
    }
  }

  @Override
  public void render(Context context, SafeHtml value, SafeHtmlBuilder sb) {
    if (value != null) {
      sb.append(template.label(value, value.asString()));
    }
  }
} 
```

如果要创建一个列，其中每个单元格可以包含多个此类`TooltipTextCell`，则必须使用[`CompositeCell`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/CompositeCell.html).

# android - 对齐谷歌地图标记片段中的文本

> ID：15783227
> 
> 赞同：3
> 
> 时间：2013-04-03T09:13:03.817
> 
> 标签：android, google-maps, line-breaks, marker, text-align

我希望我的片段中的字符串与中心对齐。

此外，片段中的换行符 (\n) 被转换为空格，有没有办法插入换行符？

我的相关代码：

```
GoogleMap map = ...
map.addMarker(new MarkerOptions().position(pos)
        .title("title")
        .snippet("body \n and mind"); 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T11:40:21.587

使用一些示例以及来自的答案：[custom info window adapter with custom data in map v2](https://stackoverflow.com/questions/15090148/custom-info-window-adapter-with-custom-data-in-map-v2)，我遇到了以下解决方案：

标记.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

  <TextView
    android:id="@+id/info"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center" />

 </RelativeLayout> 
```

爪哇：

```
map.setInfoWindowAdapter(new InfoWindowAdapter() {

        @Override
        public View getInfoWindow(Marker arg0) {
            return null;
        }

        @Override
        public View getInfoContents(Marker marker) {

            View v = getLayoutInflater().inflate(R.layout.marker, null);

            TextView info= (TextView) v.findViewById(R.id.info);

            info.setText(marker.getPosition().toString());

            return v;
        }
    }); 
```

# java - 在最新的 sun jre 中更改/检测 bootclassloader 中加载的类的任何方法

> ID：15783228
> 
> 赞同：6
> 
> 时间：2013-04-03T09:13:04.200
> 
> 标签：java

需求：我们需要破解plugin.jar中的一个类，具体来说，改变一个类的非静态方法的详细实现。与最新的 jre 一样， -Xbootclasspath/p 不起作用，只有 -Xbootclasspath/a 起作用。我们也不想改变整个jre。

我们知道我们最后的解决方案是直接更改 plugin.jar 文件。但是想知道是否有更好的解决方案，不需要直接更改jar文件。

例如，不知道 JVMTI 或 JVMPI 之类的东西是否会起作用？或者以某种简单的方式改变JVM的实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:18:11.050

取决于你的类，但你可能会使用**javaagent**来注入一个自定义 ClassFileTransformer，如果被查询，它会加载一个不同的类......（javaagents 上的简单[示例](http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/)）。但这仅适用于之前未加载该类的情况...

# java - 为什么 JFrame 没有最大化？

> ID：15783229
> 
> 赞同：1
> 
> 时间：2013-04-03T09:13:07.393
> 
> 标签：java, swing, jframe, maximize

我的第一个 JFrame：这里我只是通过使用调用第二个 JFrame

```
new viewxmls().setVisible(true); 
```

我的第二个 Jframe（JFrame 名称：viewxmls）

```
 public static void main(String args[]) 
     {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run()
            {
              //  new viewxmls().setVisible(true);
              viewxmls mv1=new viewxmls();
             //mv1.setBounds(200,50,133,122);
              mv1.pack();
             //mv1.setSize(1300,700);
            //mv1.setExtendedState(MAXIMIZED_BOTH);

             mv1.setVisible(true);
             mv1.setExtendedState(JFrame.MAXIMIZED_BOTH );

            }
         });

      } 
```

当我调用第二个 Jframe 时，它​​的尺寸变得非常小，我该如何最大化它？

这是供您查看的 Jframe 图像：http://imagesup.net/?di= [8136498001116](http://imagesup.net/?di=8136498001116)

任何评论和帮助。赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:16:16.810

如果将其设置为不可调整大小，则也无法最大化它。

您还必须为框架设置一些大小。如果您正在使用一些布局管理器并将一些组件添加到您的框架中，那么只需调用`frame.pack();`

否则，您需要做任何一个`frame.setSize();`或`frame.setBounds();`这将帮助您设置位置和大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:22:20.677

```
f.setExtendedState( f.getExtendedState()|JFrame.MAXIMIZED_BOTH );
mv1.setResizable(true); 
```

# c# - 优雅地中止 FileStream 写入循环

> ID：15783231
> 
> 赞同：0
> 
> 时间：2013-04-03T09:13:13.203
> 
> 标签：c#, filestream

我有一个使用 FileStream 将数据写入文件的循环。在操作过程中，我想中止。如果我刷新并关闭它，我将在磁盘上有一个部分文件。有没有办法关闭 FileStream 并将其从系统中删除？（在相同的操作中。我知道我可以直接关闭而不是自己删除它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:02:06.330

*如果您需要处理修改文件...*

在你的情况下可能是矫枉过正，但你可以使用[NTFS transactions](http://msdn.microsoft.com/en-us/magazine/cc163388.aspx)。如果您需要中止，只需回滚事务，您修改的文件将恢复到事务开始之前的状态（如果在事务开始之前不存在，则完全消失）。即使您没有明确回滚（例如由于断电），这也将起作用。

或者您可以通过写入不同的文件来模拟事务，然后通过用新文件替换旧文件来“提交”。

* * *

*否则（如果您只处理创建新文件，而不是修改现有文件）......*

您可以在`finally`关闭/处理流之后删除块中的文件（如您已经指出的）。

# android - CWAC LocationPoller - 未收到广播

> ID：15783235
> 
> 赞同：0
> 
> 时间：2013-04-03T09:13:17.787
> 
> 标签：android, commonsware-cwac

我已链接到您的图书馆（再次感谢和出色的工作）。

在过去的两个小时里，我一直在尝试问题是什么，但我失败了。

这是我的登录屏幕代码中的 AlarmManager：

```
Intent i = new Intent(con, LocationPoller.class);
                i.putExtra(LocationPoller.EXTRA_INTENT, new Intent(con,
                        LocationReceiver.class));
                i.putExtra(LocationPoller.EXTRA_PROVIDER,
                        LocationManager.NETWORK_PROVIDER);

                gps = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

                PendingIntent pi = PendingIntent.getBroadcast(con, 0, i, PendingIntent.FLAG_NO_CREATE);
                gps.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(),
                        10 * 1000, pi);
                Log.d("Service: ",
                        "GPS Service started and scheduled with AlarmManager"); 
```

这是我自己创建的课程（不是您演示中的课程，虽然类似）：

```
public class LocationReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive(Context context, Intent intent)
    {
        Bundle b = intent.getExtras();
        Location loc = (Location) b.get(LocationPoller.EXTRA_LOCATION);

        String msg;

        if (loc == null)
        {
            loc = (Location) b.get(LocationPoller.EXTRA_LASTKNOWN);

            if (loc == null)
            {
                msg = intent.getStringExtra(LocationPoller.EXTRA_ERROR);
            }
            else
            {
                msg = "TIMEOUT, lastKnown=" + loc.toString();
            }
        }
        else
        {
            msg = loc.toString();
        }

        if (msg == null)
        {
            msg = "Invalid broadcast received!";
        }

        Log.d("GPS Broadcast: ", "Location: " + msg);
    }

} 
```

什么都没有发生。我假设这是因为我根本没有在我的 logcat 中看到任何信息。另外，当我查看调试视图时，PollerThread（如果这是正确的术语）不断堆积，好像它们都在等待某些东西但没有发送任何广播。

我究竟做错了什么？通过网络确定位置应该不会花费太多时间吧？即使这是问题所在，我也应该得到一些反馈..

以下是我的清单的应用程序标签中的条目：

```
<receiver android:name="com.commonsware.cwac.locpoll.LocationPoller" />
        <receiver android:name=".LocationReceiver" />
        <service android:name="com.commonsware.cwac.locpoll.LocationPollerService" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:58:49.260

`LocationPoller`设计用于更长的轮询周期：一个小时，而不是 10 秒。我从未`LocationPoller`以如此频繁的轮询周期进行测试，我也不打算支持`LocationPoller`短于`DEFAULT_TIMEOUT`两分钟的轮询周期。

因此，您应该做的第一件事就是首先弄清楚您为什么要为此烦恼`LocationPoller`。背后的要点`LocationPoller`是能够偶尔找出设备的位置，而无需您的代码必须已经运行（例如，您希望每小时自动检查一次 Foursquare）。如果您需要每 10 秒找出设备的位置，则需要`LocationManager`从前台活动中使用自己。

假设您确信这`LocationPoller`仍然是正确的解决方案，那么您应该做的下一件事是将轮询时间延长到更合理的时间，例如 5 分钟，看看是否有帮助。

如果这没有帮助，请尝试在`demo/`不修改的情况下运行项目。如果*这*不起作用，那么您的设备中存在一些错误`LocationPoller`，或者您的设备中存在一些不兼容问题`LocationPoller`，我需要进行一些调查。

如果`demo/`项目*确实*有效，请制作一个副本，确认该副本有效，然后慢慢修改该副本，使其看起来更像您的生产代码，直到它停止工作——此时，您的最后一组更改代表了什么问题`LocationPoller`，我们可以确定这是否代表`LocationPoller`您使用它的错误或错误。

# javascript - Node js中原型有什么用？

> ID：15783236
> 
> 赞同：1
> 
> 时间：2013-04-03T09:13:21.150
> 
> 标签：javascript, node.js, prototype

我是Node js语言新手.谁能解释我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:27:09.433

简而言之，`prototype`用于在 JavaScript 中构建自定义构建对象的接口（和实现）。

正如评论中的 Blender 所说，这就是您在 JavaScript 中执行真正 OOP 的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T03:35:46.220

使用原型还意味着您可以在一个地方定义一个方法（低内存占用）。不通过原型定义方法意味着该方法是为所述对象的每个实例定义的（高内存占用）。

# boost-geometry - Boost几何：轨道上的点

> ID：15783239
> 
> 赞同：0
> 
> 时间：2013-04-03T09:13:50.583
> 
> 标签：boost-geometry

我在一个球体（或 WGS84 椭圆体，如果使用地理扩展）上有两个点 A 和 B。这两点定义了一个大圆圈。我希望在那个大圆上找到一个点 M 的坐标，它与 A 有一定的距离（从 A 到 B）。

举个例子：一艘船在一个大圆上从 A 到 B：知道它的速度我想知道它在给定时间的位置。

有什么办法可以用 boost-geometric 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:37:16.577

[该线程](http://marc.info/?l=boost&m=126956891713360&w=2)解释说（当前）Boost 的地理功能是有限的。[我认为GeographicLib](http://geographiclib.sourceforge.net)库提供了一个可行的替代方案。

# windows-phone - 如何在 wp8 中使用麦克风向视频添加语音

> ID：15783244
> 
> 赞同：1
> 
> 时间：2013-04-03T09:14:03.287
> 
> 标签：windows-phone

我想在我的 Windows Phone 应用程序中配音视频。我想知道如何修改任何视频并将我们的声音添加到该视频中。我可以使用 MediaElement 播放视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:20:18.707

我不确定如何编辑实际视频，但您也许可以在适当的时间触发音频播放。这样就不会对视频进行实际编辑，但您可能能够以您正在寻找的方式在视频上播放音频。下面的链接解释了基于媒体播放时间触发事件的媒体标记的概念。

[http://msdn.microsoft.com/en-us/library/cc189078%28v=VS.95%29.aspx#anchor_mediaelement_mediamarkers](http://msdn.microsoft.com/en-us/library/cc189078%28v=VS.95%29.aspx#anchor_mediaelement_mediamarkers)

# iphone - 如何检测 managedObjectSelected 上的 didSelectRowAtIndexPath

> ID：15783249
> 
> 赞同：0
> 
> 时间：2013-04-03T09:14:17.853
> 
> 标签：iphone, ios, objective-c, core-data

我有以下代码，当我点击一个单元格时会自动触发

```
- (void)managedObjectSelected:(NSManagedObject *)managedObject {

} 
```

但我想在选定的 indexPath 处取消选择一行。我如何在这种方法中这样做，因为我没有任何 indexPath 可以使用。有任何想法吗？如果我添加以下方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

然后不调用 managedObjectSelected 。任何的想法？当我点击一个单元格时，我基本上想调用 deselectRowAtIndexPath 。但要这样做，我需要 indexPath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:32:29.673

```
- (void)managedObjectSelected:(NSManagedObject *)managedObject 
{

  NSIndexPath *myIndexPath = [self.tableView indexPathForSelectedRow];

  NSLog(@"%@",myIndexPath.row);
} 
```

# java - 对象到/从 JSON/XML（取消）编组扩展到什么程度可以中断

> ID：15783254
> 
> 赞同：1
> 
> 时间：2013-04-03T09:14:27.297
> 
> 标签：java, json, marshalling, xstream, unmarshalling

我一直在考虑这两个 JSON 库：

*   谷歌格森
*   JSON.简单
*   XStream

Google Gson 非常棒，它可以序列化没有参数构造函数的类对象。JSON.Simple 很简洁，有一个非常简单易用的 API。然而，这些 JSON/Object 映射库可以在多大程度上破坏，即不能再编组对象，无论是在序列化还是反序列化方面。

对于以下场景：

*   类的嵌套，即类中的类等
*   类中的类中的非常长的字符串值以及诸如此类的事情
*   对象的大小，即包含巨大字节的对象

什么情况下编组*不能再忍受*或*撞墙*了？

我只是在这里大声思考，以了解在使用这些类型的框架作为我的应用程序的主干时可能出现的问题。以及我们如何预见可能发生的潜在怪癖。

**更新：**

关于可移植性，我们可以在多大程度上回复（取消）编组，尤其是在处理对象分发时。例如，“序列化”对象通过另一台机器发送，具有不同的 CPU、JVM 等，并且旨在“反序列化”并以某种方式使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:19:27.593

这里有两个限制：JSON 的限制和编组软件的限制。

第一个很明显：

*   JSON 无法序列化图形。JSON 中只有“内容”，这意味着无法在 JSON 中创建循环关系。

代码中的一个例子：

```
class Bar { List<Drink> menu = new ArrayList<Drink>(); }
class Drink { List<Bar> servedIn = new ArrayList<Drink>(); }

public void main() {
    Bar b = new Bar();
    Drink whiskey = new Drink();
    b.menu.add(whiskey);
    whiskey.servedIn.add(b);
    serialize(b);
    // a naive serialization will keep serializing
    // a smart serialization will not include the Drink.servedIn field or throw an error
} 
```

第二个限制取决于您的编组软件及其构建方式。简而言之，您将需要两倍的对象图内存：一次用于序列化形式，一次用于非序列化形式。一些解析器更智能，并提供流式传输，从而减少了内存需求。

# c# - 从另一个类访问 Form1 中的控件

> ID：15783256
> 
> 赞同：0
> 
> 时间：2013-04-03T09:14:28.713
> 
> 标签：c#, winforms

`textBox1`我的主窗体中有一个控件`Form1`。我希望能够更改`textBox1`另一个类的文本`another_class`，但我做不到。我`another_class`有一个事件`teacher`，我`Form1`通过执行以下操作来处理

```
private void button1_Click(object sender, EventArgs e)
{
    another_class myNew_another_class = new another_class();
    myNew_another_class.teacher(sender, e);
} 
```

所以我无法在其中创建以下内容，`another_class`因为它会与上面的处理程序混淆并对其进行红色标记

```
public another_class (Form1 anytext_Form)
{
    this.anytext_Form = anytext_Form;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:20:04.680

通过以下方式更正语法：

```
partial class Form1 {
    private void button1_Click(object sender, EventArgs e) {
        another_class myNew_another_class=new another_class(this);
        myNew_another_class.teacher(sender, e);
    }
}

public partial class another_class {
    Form anytext_Form;

    public void teacher(object sender, EventArgs e) {
        // do something
    }

    public another_class(Form anytext_Form) {
        this.anytext_Form=anytext_Form;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:20:05.893

我认为你应该解释*你实际上要做什么*，因为你的事件管理看起来不太好 IMO。也许这个事件没有用，或者如果你告诉我们你想要实现什么，你可以重构它。

要回答标题中的问题，另一个表单中的控件是**私有成员**，因此您无法在父表单范围之外访问它们。您可以做的是公开可以完成这项工作的公共方法：

```
public class Form1 : Form
{
    public void SetMyText(string text)
    {
        this.myTextbox.Text = text;
    }
}

public class Form2 : Form
{
    public void Foo()
    {
        var frm1 = new Form1();
        frm1.SetMyText("test");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:20:41.753

改变这个：

```
another_class myNew_another_class = new another_class(); 
```

对此：

```
another_class myNew_another_class = new another_class(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:21:21.880

改成这样：

```
private void button1_Click(object sender, EventArgs e)
{
     another_class myNew_another_class = new another_class(this); //where this is Form1
     myNew_another_class.teacher(sender, e);
} 
```

这就是你拥有的“another_class”的构造函数。

```
public another_class (Form1 anytext_Form)
{
         this.anytext_Form = anytext_Form;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T09:26:23.957

我认为您没有清楚地说明您的问题。`teacher`方法在做什么？

但是，正如其他人所提到的，所有控制访问修饰符都是**Private**，因此您不能直接访问它。您可以尝试更改对象属性中的访问修饰符，或者创建一个属性：

```
public class Form1 : Form {
    public String TextboxText {
        set { this.myTextbox.Text = value; }
        get { return this.myTextbox.Text; }
    }
} 
```

# filepicker.io - 如果以非阻塞方式加载 filepicker.io JavaScript，我什么时候调用 filepicker.setKey()？

> ID：15783258
> 
> 赞同：1
> 
> 时间：2013-04-03T09:14:29.547
> 
> 标签：filepicker.io

如果你做得太早，你会得到错误`Uncaught ReferenceError: filepicker is not defined`。

我正在使用来自[https://developers.filepicker.io/docs/web/](https://developers.filepicker.io/docs/web/)的代码来加载它：

```
For advanced users, if you want to load the javascript in a non-blocking fashion, you can use this instead:

<script type="text/javascript">
(function(a){if(window.filepicker){return}var b=a.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"===a.location.protocol?"https:":"http:")+"//api.filepicker.io/v1/filepicker.js";var c=a.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var d={};d._queue=[];var e="pick,pickMultiple,pickAndStore,read,write,writeUrl,export,convert,store,storeUrl,remove,stat,setKey,constructWidget,makeDropPane".split(",");var f=function(a,b){return function(){b.push([a,arguments])}};for(var g=0;g<e.length;g++){d[e[g]]=f(e[g],d._queue)}window.filepicker=d})(document); 
</script> 
```

我不知道如何知道它何时加载，以便我可以调用 filepicker.setKey()。一种解决方法是每次我使用文件选择器时都调用它，但这似乎很蹩脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:34:48.067

非阻塞 js 在脚本加载时将所有调用排队，然后在脚本加载后执行这些调用。包含脚本标记后，您应该能够立即开始调用：

```
<script type="text/javascript">(function(a){if(window.filepicker){return}var b=a.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"===a.location.protocol?"https:":"http:")+"//api.filepicker.io/v1/filepicker.js";var c=a.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var d={};d._queue=[];var e="pick,pickMultiple,pickAndStore,read,write,writeUrl,export,convert,store,storeUrl,remove,stat,setKey,constructWidget,makeDropPane".split(",");var f=function(a,b){return function(){b.push([a,arguments])}};for(var g=0;g<e.length;g++){d[e[g]]=f(e[g],d._queue)}window.filepicker=d})(document); </script>
<script>
filepicker.setKey('testing');
filepicker.pick()
</script> 
```

[http://jsfiddle.net/bbcbK/1/](http://jsfiddle.net/bbcbK/1/)

# preg-match-all - PHP preg_match_all only date in string

> ID：15783265
> 
> 赞同：0
> 
> 时间：2013-04-03T09:14:44.997
> 
> 标签：preg-match-all

```
<img src="http://resim.domain.com/Gazete/kucuk/03.04.2013/yenisafak_kucuk_030413.jpeg" width="96" height="126"  />
<img src="http://resim.ihlassondakika.com/Gazete/kucuk/03.04.2013/zaman_kucuk_030413.jpeg" width="96" height="126"  />
<img src="http://resim.ihlassondakika.com/Gazete/kucuk/03.04.2013/milliyet_kucuk_030413.jpeg" width="96" height="126"  />
<img src="http://resim.ihlassondakika.com/Gazete/kucuk/03.04.2013/hurriyet_kucuk_030413.jpeg" width="96" height="126"  /> 
```

preg_match_all image and save my hosting path please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:23:52.837

如果你想使用 preg_match_all，那么我会假设输入行都包含在一个字符串中，比如 $str。如果是这样，那么可以使用以下内容仅提取路径，删除文件名，假设这就是意思。（对不起，如果我误解了。）

```
$pattern="#img.+?src\s*=\s*\"(.*?)/[^/]+\.(jpeg|jpg|gif|png)#i";
$n = preg_match_all($pattern, $str, $matches, PREG_PATTERN_ORDER);
for ($i = 0; $i < $n; ++$i) {
    print $matches[1][$i] . "\n"; # or save
} 
```

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:21:01.270

首先你需要...

```
$str = '<img src="http://resim.domain.com/Gazete/kucuk/03.04.2013/yenisafak_kucuk_030413.jpeg" width="96" height="126"  />';
$str = '<img src="http://resim.ihlassondakika.com/Gazete/kucuk/03.04.2013/zaman_kucuk_030413.jpeg" width="96" height="126"  />' 
```

然后你需要使用 preg_match 来拉出匹配项

```
preg_match('/(<img[^>]+>)/i', $str, $matches) 
```

在此之后，您可以在 match 变量中回显或存储匹配项，例如，您可以将这些回显或一一存储。

```
echo $matches[0]; // first one 

echo $matches[1]; // second match 
```

为了保存你的比赛，你需要一个循环，但你可以像这样保存一个。

```
$myFile = "test.txt";

$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $matches[0];);
fclose($fh); 
```

谢谢 ：）

# objective-c - 一键多动作

> ID：15783268
> 
> 赞同：0
> 
> 时间：2013-04-03T09:15:01.663
> 
> 标签：objective-c, xcode, cocoa

我在 MainMenu.xib 中有两个窗口

是否可以从第二个窗口上的一个操作按钮关闭两个窗口。？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:22:18.770

使用 Binding，您可以关闭任何一个，通过 Ctrl+Drag 到窗口并选择`performClose:`

使用代码，您可以执行以下操作：

创建一个 IBAction 并使用：

```
- (IBAction)closeAll:(id)sender {
    NSLog(@"closing both windows");

    [self.secondaryWindow close];
    [self.window close];//for primary

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:17:53.663

当然。

创建一个新的 IBAction 并将其作为目标分配给您的按钮。

然后在该 IBAction 中，关闭两个窗口（如果您有指向这些“ `NSWindow`”对象的指针或 IBOutlets，则可以这样做）。

# tridion-2011 - Unable to render links on page using DreamWeaver Templating

> ID：15783269
> 
> 赞同：0
> 
> 时间：2013-04-03T09:15:06.673
> 
> 标签：tridion-2011

We are using the following line of code in our DreamWeaver Template to resolve a link in Tridion. But,not getting the desired output, the link is not being resolved on the page. Is there anything wrong with the code? Please help..

```
<a href="@@internal@@" tridion:href="@@internal@@" title="@@title@@" target="_blank">@@title@@</a>  

<a tridion:href="@@Component.ID@@" href="dummy.html" class="intro-link"><h2>@@RenderComponentField  ("title_intro", 0)@@</h2></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:04:23.917

您的发布目标语言可以设置为无 - 它应该设置为适当的服务器站点语言（JSP、ASP.NET、TCDL 等）。

如果这不能解决问题 - 请发布已发布的输出（不是呈现的浏览器视图，而是页面文件或代理数据库条目中的实际输出）。

# android - start service on boot

> ID：15783279
> 
> 赞同：2
> 
> 时间：2013-04-03T09:15:35.083
> 
> 标签：android

I am using toggleButton in my code for start/stop service. I start service using togglebutton. but when I reboot my phone I want the toggleButton to be on i.e service is started as soon as phone is on. This is my code.

```
 public void onCreate(Bundle savedInstanceState) {
    Toast.makeText(getApplicationContext(),"in OnCreate", Toast.LENGTH_LONG).show();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // setAppInfo();
    dba = new DBAdapter(this);
    //toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
    //AppSettings.getLoggingInterval(MainActivity.this));
    addButtonListeners();
    enableControls();
    try {
        SharedPreferences preferences = getSharedPreferences(PREFS_NAME, 0);
        String installDate = preferences.getString("FirstRun", null);
        if (installDate == null) {
            TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            imeino = tm.getDeviceId();
            String model = getDeviceName();
            SmsManager smsManager = SmsManager.getDefault();
            SharedPreferences.Editor editor = preferences.edit();
            sdf = new SimpleDateFormat("yyyy-MM-dd");
            String dateString = sdf.format(new Date(System
                    .currentTimeMillis()));
            editor.putString("FirstRun", dateString);
            editor.commit();
        } else {
        }
    }// end of try
    catch (Exception e2) {
        e2.printStackTrace();
    }

}// -----------------end of create method---

private Runnable mUpdate = new Runnable() {
    @Override
    public void run() {

        try {
    //      TestFunction();
            //checkDatabase();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mHandler.postDelayed(this, 60000);
    }
};

public void onBackPressed() 
{
    moveTaskToBack (true);
}

private void addButtonListeners() 
{
    Toast.makeText(getApplicationContext(),"in addButtonListener", Toast.LENGTH_LONG).show();
    ((Button) findViewById(R.id.start_logging)).setOnClickListener(btnClick);
    //((Button) findViewById(R.id.exit)).setOnClickListener(btnClick);
}

private void toggleLogging(boolean isStart, int interval) 
{
    Toast.makeText(getApplicationContext(),"in toggleLogging", Toast.LENGTH_LONG).show();
    AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    PendingIntent loggerIntent = PendingIntent.getBroadcast(this, 0,new Intent(this, AlarmReceiver.class), 0);
    Toast.makeText(getApplicationContext(),"in toggleLogging2", Toast.LENGTH_LONG).show();
    if (isStart) 
    {
        Toast.makeText(getApplicationContext(),"is Start", Toast.LENGTH_LONG).show();
        manager.cancel(loggerIntent);
        AppSettings.setServiceRunning(this, false);
        AppLog.logString("Service Stopped.");
    } 
    else 
    {
        Toast.makeText(getApplicationContext(),"in stop", Toast.LENGTH_LONG).show();
        setLogFileName();
        long duration = interval * 60 * 1000;
        manager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
        SystemClock.elapsedRealtime(), duration, loggerIntent);
        AppSettings.setServiceRunning(this, true);
        AppLog.logString("Service Started with interval " + interval+ ", Logfile name: " + AppSettings.getLogFileName(this));
        AppLog.logString("Service Started with interval " + interval+ ", Logfile name: " + AppSettings.getLogFileName1(this));
    }
    Toast.makeText(getApplicationContext(),"in toggleLogging3", Toast.LENGTH_LONG).show();
}

private void enableControls() 
{
    Toast.makeText(getApplicationContext(),"in enableControls", Toast.LENGTH_LONG).show();
    boolean isServiceRunning = AppSettings.getServiceRunning(this);
    String buttonText = getString(R.string.start_logging);

    if (isServiceRunning)
    {
        buttonText = getString(R.string.stop_logging);
        // ((Button)findViewById(R.id.logging_interval)).setEnabled(false);
    } 
    else 
    {
        // ((Button)findViewById(R.id.logging_interval)).setEnabled(true);
    }
    ((Button) findViewById(R.id.start_logging)).setText(buttonText);
}

private void changeLoggingIntercal() 
{
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    final String loggingIntervals[] = { "1 minutes", "5 minutes","30 minutes", "1 hour" };
    builder.setTitle(getString(R.string.logging_interval));
    builder.setSingleChoiceItems(loggingIntervals, currentIntervalChoice,new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) 
    {
        currentIntervalChoice = which;
        setLoggingInterval(currentIntervalChoice);
        dialog.dismiss();
    }
    });

    builder.show();
}

private void setLoggingInterval(int intervalChoice) 
{
    Toast.makeText(getApplicationContext(),"in setLoggingInterval", Toast.LENGTH_LONG).show();
    int interval = 3;
    switch (intervalChoice)
    {
        case 0:
            interval = 1;
            break;
        case 1:
            interval = 5;
            break;
        case 2:
            interval = 30;
            break;
        case 3:
            interval = 60;
            break;
        default:
            interval = 1;
        break;
    }

    AppSettings.setLoggingInterval(this, interval);
}

public void setLogFileName() 
{
    String filename = "gpsdata.txt";
    String fn="gpsdata1.txt";
    AppSettings.setLogFileName(this, filename);
    AppSettings.setLogFileName1(this, fn);
}

private View.OnClickListener btnClick = new View.OnClickListener() 
{

    @Override
    public void onClick(View v)
    {
        switch (v.getId())
        {
            case R.id.start_logging:
            {
                toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                AppSettings.getLoggingInterval(MainActivity.this));
                enableControls();
                break;
            }

        }
    }
}; 
```

the application starts but service is not restarted.

# android - 启动一个可运行文件，我的按钮不再响应

> ID：15783280
> 
> 赞同：1
> 
> 时间：2013-04-03T09:15:34.917
> 
> 标签：android, multithreading, handler

我有以下按钮：

```
prStartBtn.setOnClickListener(new View.OnClickListener() {
        // @Override
        public void onClick(View v) {
            if (prRecordInProcess == false) {
                startRecording();
            } else {
                stopRecording();
            }
        }
    }); 
```

当我第一次按下它时，它会这样做：

```
private boolean startRecording() {
    prCamera.stopPreview();
    try {
        prCamera.unlock();
        prMediaRecorder.setCamera(prCamera);
        prMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        String lVideoFileFullPath;
        String lDisplayMsg = "Current container format: ";
        prMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); prMediaRecorder.setVideoEncoder(VideoEncoder.H264);
        if (first) {
            lVideoFileFullPath = cVideoFilePath + "result" + lVideoFileFullPath;
        } else {
            lVideoFileFullPath = cVideoFilePath + "vid2" + lVideoFileFullPath;
        }
        final File f = new File(lVideoFileFullPath);
        f.createNewFile();
        prRecordedFile = new FileOutputStream(f);
        prMediaRecorder.setOutputFile(prRecordedFile.getFD());
    prMediaRecorder.setVideoSize(sizeList.get(Utils.puResolutionChoice).width, sizeList.get(Utils.puResolutionChoice).height);
        prMediaRecorder.setVideoEncodingBitRate(3000000);
        prMediaRecorder.setVideoFrameRate(cFrameRate);
        prMediaRecorder.setPreviewDisplay(prSurfaceHolder.getSurface());
        prMediaRecorder.setMaxDuration(cMaxRecordDurationInMs);
        prMediaRecorder.setMaxFileSize(cMaxFileSizeInBytes);
        prMediaRecorder.prepare();
        prMediaRecorder.start();

        final Runnable r = new Runnable() {

            public void run() {
                try {
                    fileIn = new FileInputStream(f);
                    while (prRecordInProcess) {
                        // prRecordedFile.flush();
                        System.out.println("bytesAvailable: " + fileIn.available());
                        Thread.sleep(1000);
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                // handler.postDelayed(this, 1000);
            }
        };

        handler.postDelayed(r, 1000);
        prStartBtn.setText("Pause");
        prRecordInProcess = true;
        return true;
    } catch (IOException _le) {
        _le.printStackTrace();
        return false;
    }
} 
```

现在，如果我注释掉可运行文件，则代码可以完美运行。如果我离开它，它会运行（它显示文件如何增长），但我无法再访问按钮（如果我再次按下按钮，停止录制，它什么也不做），过了一会儿，它崩溃（ANR）。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:24:23.050

您的 Runnable 在 UI 线程上启动；这就是 UI 被阻止的原因，并且您会收到 ANR。要在另一个线程中启动它，您可以：

```
Thread thread = new Thread()
{
@Override
public void run() {
    try {
        fileIn = new FileInputStream(f);
        while (prRecordInProcess) {
             // prRecordedFile.flush();
             System.out.println("bytesAvailable: " + fileIn.available());
             Thread.sleep(1000);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
};

thread.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:26:00.473

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它将在后台执行您的工作，并在完成后通知您的 UI。

**AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。**

# c# - 使用 Cocos2dx for WP8 从 C++ 调用 C# 函数（例如：Facebook sdk）

> ID：15783281
> 
> 赞同：0
> 
> 时间：2013-04-03T09:15:38.423
> 
> 标签：c#, c++, facebook, windows-phone-8, cocos2d-x

我正在使用最新版本的 Cocos-2dx 为 Windows Phone 8 进行开发。有没有办法从 C++ 调用 C# 函数？我需要集成facebook sdk，我在互联网上搜索但找不到任何明确的例子谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:45:13.577

如果你拥有 C# 源代码，你应该让你的 C# 类 ComVisible，注册这个类后你可以从 C++ 中使用它。

# sql - Default value of column (when value is set to NULL) equal to other column

> ID：15783283
> 
> 赞同：2
> 
> 时间：2013-04-03T09:15:43.597
> 
> 标签：hsqldb, postgresql, hsqldb, sql, database, postgresql, hsqldb

Part of my SQL definition (for [hsqldb](/questions/tagged/hsqldb "show questions tagged 'hsqldb'")):

```
CREATE TABLE activities (
  id  BIGINT GENERATED BY DEFAULT AS IDENTITY,
  group_id  BIGINT NOT NULL
  CONSTRAINT pk_activities PRIMARY KEY (id)
); 
```

The scenario during and `insert` is:

*   `id` is auto generated / auto-incremented,
*   `group_id` when specified (non-null) is set to the given value,
*   `group_id` when not specified is set to the value of `id` just generated

I target [postgresql](/questions/tagged/postgresql "show questions tagged 'postgresql'") and [hsqldb](/questions/tagged/hsqldb "show questions tagged 'hsqldb'") (for tests).

**Can this be done?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:20:37.640

您不能将默认值设置为另一列的默认值。

但是，您可以创建一个[触发器](http://www.postgresql.org/docs/9.2/static/plpgsql-trigger.html)来完成此任务。

这是 PostgreSQL 的一个示例。如果它在或之前，它会自动替换`column`为：`anothercolumn``NULL``INSERT``UPDATE`

```
CREATE OR REPLACE FUNCTION mytable_fn()
RETURNS trigger AS
$body$
BEGIN
    IF NEW.column ISNULL THEN
        NEW.column := NEW.anothercolumn;
    END IF;
    RETURN NEW;
END;
$body$
LANGUAGE 'plpgsql';

CREATE TRIGGER mytable_trigger
BEFORE INSERT OR UPDATE ON mytable
FOR EACH ROW
EXECUTE PROCEDURE mytable_fn(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:26:39.650

这可以使用触发器来完成，或者如果您不想使用触发器，则在选择这样的行时处理 NULL：

```
SELECT id, isnull(group_id, id) group_id FROM activities; 
```

# javascript - How to scroll textarea in iOS using PhoneGap

> ID：15783285
> 
> 赞同：2
> 
> 时间：2013-04-03T09:15:50.777
> 
> 标签：javascript, jquery, html, css, cordova

I am making an application for iOS and Android using PhoneGap.

On one screen, I need to hide the keyboard when the user clicks outside the textarea. Also, the textarea should be scrollable when we enter text or fill text dynamically.

For testing, I am using iPhone 3GS and simulator. Is still no any way to do this?

# android - android canvas 翻译后使用屏幕原点而不是视图原点

> ID：15783286
> 
> 赞同：1
> 
> 时间：2013-04-03T09:15:53.377
> 
> 标签：android, android-canvas

我正在使用自定义视图和画布在屏幕上绘制对象。视图位于屏幕原点的 Y 偏移处。我想翻译画布，然后绘制一个对象。但是，当我使用 setmatrix 翻译画布时，原点会从视图原点转移到屏幕原点。根据下面的代码，应该在视图原点绘制圆圈。但是我需要在绘制圆圈时添加视图从屏幕原点的偏移量。我如何达到预期的效果？

```
protected void onDraw(Canvas canvas) 
{           
    super.onDraw(canvas);
    canvas.drawPaint(canvasPaint);
    m_canvasMatrix.set(getMatrix());
    m_canvasMatrix.postTranslate(-100, -100);
    canvas.setMatrix(m_canvasMatrix);
    canvas.drawCircle(100, 100, 20, circlePaint);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:28:57.457

我不确定我是否完全理解你的问题，但我*认为*你想要做的只是简单地将相对翻译应用于`Canvas`. 在这种情况下，你几乎把事情想得太难了。您需要做的就是：

```
protected void onDraw(Canvas canvas) 
{ 
    canvas.save();

    canvas.translate(100, 0);

    // At this point, drawing something (such as a square) with a top-left
    // corner at 0,0 would result in a square that's drawn with its top-left
    // 100px to the right of the left bound of the View.

    ...

    canvas.restore();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T08:03:05.953

问题是，一个（包括我，最初;-）直观地期望画布的初始矩阵是单位矩阵。事实上并非如此。相反，它包含从屏幕到客户端坐标的必要转换。如果您简单地设置画布的矩阵，您可以有效地消除这种转换，这就是为什么您的圆的原点位于屏幕-（0,0）。

为了避免这种情况，只需将您的矩阵连接到现有的画布：

```
protected void onDraw(Canvas canvas) 
{           
    super.onDraw(canvas);
    canvas.drawPaint(canvasPaint);
    m_canvasMatrix.set(getMatrix());
    m_canvasMatrix.postTranslate(-100, -100);
    canvas.concat(m_canvasMatrix); // <- !!!
    canvas.drawCircle(100, 100, 20, circlePaint);
} 
```

给 C# 人的一句话：

```
canvas.Matrix.PreConcat(myMatrix) // <- !!! WRONG !!! 
```

行不通！（想一想：不会调用 Matrix 的设置器...）

而是使用：

```
Matrix tmpMatrix = canvas.Matrix;
tmpMatrix.PreConcat(myMatrix);
canvas.Matrix = tmpMatrix; 
```

或者简单地说：

```
canvas.Concat(myMatrix); 
```

# javascript - build.phonegap 写入文件的问题

> ID：15783287
> 
> 赞同：8
> 
> 时间：2013-04-03T09:15:58.013
> 
> 标签：javascript, android, cordova, phonegap-plugins, phonegap-build

我正在尝试通过应该在[iOS](http://en.wikipedia.org/wiki/IOS_%28Apple%29)和[Android上运行的](http://en.wikipedia.org/wiki/Android_%28operating_system%29)[在线构建服务构建一个](https://build.phonegap.com "build.phonegap.com")[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)应用程序，但这个问题集中在 Android 部分。

该应用程序的主要目标是能够访问和修改文件系统。受[Raymond Camden 的博客文章的](http://www.raymondcamden.com/index.cfm/2012/3/9/PhoneGaps-File-API)启发，我最终编写了一个与他非常相似的示例应用程序，它以读/写权限访问文件系统。主要区别在于我的应用程序是在线构建的，没有安装任何 SDK，也不关心任何*androidManifes.xml*文件。

我的**问题**是我能够访问文件系统（列出目录、读取文件），但我无法在上面写任何东西。

为了获得文件访问权限，我在[*confix.xml*](https://build.phonegap.com/docs/config-xml)中包含了[必要的`<feature />`标签：](https://build.phonegap.com/docs/config-xml)

 *```
<feature name="http://api.phonegap.com/1.0/file"/> 
```

这是我的应用程序中使用的一些示例代码：

### 读取文件代码：

```
// Request fileSystem
fileSystem.root.getFile(fileName, {create:true}, readFile, onError);

// Function that reads a file
function readFile(file){
    var reader = new FileReader();
    reader.onloadend = function(e) {
        console.log("contents: ", e.target.result);
    }
    reader.readAsText(file);
} 
```

### 写入/附加文件代码：

```
fileSystem.root.getFile(fileName, {create:true}, function(file){
    file.createWriter(function(writer) {
        writer.onwrite = function() {
            console.log('writing', arguments);
        }

        writer.onerror = function(e) {
            console.error('error', e);
        }

        writer.onwriteend = function() {
            console.log('writeend', arguments);
        }

        //Go to the end of the file...
        writer.seek(writer.length);

        // Append a timestamp
        writerOb.write("Test at "+new Date().toString() + "\n");
    })
}, onError); 
```

第二个代码示例没有在目标文件中写入任何内容，并且`onerror`处理程序显示这是因为`NOT_FOUND_ERR`. 这只是没有意义，因为我能够读取同一个文件（并且可以*找到*它）。

以同样的方式，当我尝试创建一个新文件时（使用来自*write/append file code*的相同代码，但目标文件不存在），我得到一个`INVALID_MODIFICATION_ERR`错误。

我也尝试[了官方文档中的示例，](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileReader_full_example)得到了相同的结果（读取和不写入）。

请注意，由于 PhoneGap 使用的是 HTML5 文件[API](http://en.wikipedia.org/wiki/Application_programming_interface)，因此我尝试按照[Stack Overflow 答案](https://stackoverflow.com/questions/7685020/how-to-create-a-text-file-locally-at-client-side-using-javascript-jquery)（和其他站点）中的建议通过[blob](http://www.w3.org/TR/FileAPI/#dfn-Blob)编写内容，但没有任何运气。

我错过了什么？我是否需要一个单独的插件来编写文件，或者这是无法通过在线构建工具完成的事情，我必须下载 SDK 并以老式方式编译应用程序？

PS：我的 PhoneGap 版本是**2.3.0**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T03:56:57.500

我已经使用 PG 构建创建[了一个写入文件系统的应用程序](https://github.com/uw-ictd/freespeech)，所以我确信它可以完成并且不需要插件。我在代码中看到的主要显着差异是我明确地将 getFile 选项中的独占标志设置为 false。

如果您正在使用 iOS 进行测试，那么在黑暗解决方案中的另一个镜头是检查您是否在 config.xml 中正确设置了您的应用程序 ID

编辑：在我提到的应用程序中，文件系统编写代码在[这里](https://github.com/UW-ICTD/FreeSpeech/blob/638994d5799ad26abdfa8cd416339b205d27b0df/boilerplate/libs/sfsf/sfsf.js#L110)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:43:43.623

这是我用于写入文件的 Java 方法：

```
public void writeMyFile(String fileName, String data) throws IOException {

    File root = Environment.getExternalStorageDirectory();
    System.out.println(root);
    File gpxfile = new File(root, fileName);

    FileWriter writer = new FileWriter(gpxfile);
    String[][] recordvalue = new String[100][100];
    System.out.println("fetched value" + data);
    String[] line = data.split("#");

    // I had multiple lines of data, all split by the # symbol in a single string.
    System.out.println("row length "+line.length);

        for (int i=1; i<line.length; i++)
        {
            writer.append("#");
            recordvalue[i] = line[i].split(",");
            for(int j=0; j<recordvalue[i].length; j++) {
                System.out.println(recordvalue[i][j]);
                writer.append(recordvalue[i][j]);
                writer.append(",");
            }
            writer.append("\n");
        }

    Uri uri = Uri.fromFile(gpxfile);
    System.out.println(uri);

    writer.flush();
    writer.close();

    try {
        // Do something
    }
    catch (Exception e) {
        // If there is nothing that can send a text/html MIME type
        e.printStackTrace();
    }
} 
```

类/方法的导入如下：

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.content.Intent;
import android.net.Uri;
import android.os.Environment;
import android.util.Log;

import com.phonegap.api.Plugin; 
```

插件的主要执行类如下：

```
public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
    try {
         String fileName = arg1.getString(0);
         String data = arg1.getString(1);
         writeMyFile(fileName, data);
    }
    catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:40:51.683

首先，确保在设备准备好之后以正确的方式调用[requestFileSystem](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileSystem)

```
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, yourCode, fail);
} 
```

其次，确保*fileName*只是一个没有路径的文件名，如果你想使用目录，你应该使用[DirectoryEntry](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#DirectoryEntry)。*

# objective-c - 加载视图后无法更新 UITableView

> ID：15783289
> 
> 赞同：2
> 
> 时间：2013-04-03T09:16:06.197
> 
> 标签：objective-c, uitableview, refresh

我仍然对 obj-C 很陌生，我正在创建一个带有 tableview 的应用程序，当我将项目添加到 tableview 时需要刷新它。我用谷歌搜索了一些答案，说我需要使用`[self.tableView reloadData]`，但它对我不起作用。

这是我的 tableView 的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *) tableView {
     return 1; }

- (NSString *) tableView:(UITableView *) tableView titleForHeaderInSection:(NSInteger)section {
     NSString *myTitle = [[NSString alloc] initWithFormat:@"Runs"];
     return myTitle;
      }

- (NSInteger) tableView:(UITableView *) tableView numberOfRowsInSection:(NSInteger)section {

     return [entries count];
     }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
 forIndexPath:indexPath];

     // Set up the cell...
     NSString *cellValue = [entries objectAtIndex:indexPath.row];
     cell.textLabel.text = cellValue;

     return cell; 
} 
```

这是我填充表格的代码

```
- (void)populateTable{
     AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
     NSString *username = appDelegate.username;
     entries = [[NSMutableArray alloc]init ];
     [self openDB];
     NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Savings WHERE username = '%@'",username];
     sqlite3_stmt *statement;

     if(sqlite3_prepare_v2(runnerAppDB, [sql UTF8String], -1, &statement, nil)==SQLITE_OK)
     {
         while(sqlite3_step(statement)==SQLITE_ROW)
         {

             char *field1 = (char *) sqlite3_column_text(statement, 0);
             NSString *field1Str = [[NSString alloc] initWithUTF8String:field1];

             //   username - distance - speed - date - comment
             NSString *str = [[NSString alloc] initWithFormat:@"%@ %@ %@ - %@", field1Str];
             [entries addObject:str];

         }
     } } 
```

我已经尝试做的是每次我向数据库添加一些东西时调用 populateTable 函数，但它仍然没有刷新，有人可以帮我吗？一段时间以来一直被这个问题困扰。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:40:21.023

尝试一下....

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:YES];
    [self.myTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:04:45.577

在所有数据都在您感觉表格的数组中之后，您需要重新加载表格。并且在 tableview 的 cellforrowatindexpath 方法中，您需要重用 cell 。请更新您的 cellforrow 方法。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

         static NSString *cellIdentifier = @"ArticleCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

   NSString *cellValue = [entries objectAtIndex:indexPath.row];
   cell.textLabel.text = cellValue;

    return cell;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:31:36.517

一旦表的数据源发生变化，那么只有你需要重新加载表。一旦数据源受到影响，只需检查您是否重新加载表视图。像这样。

```
- (void)populateTable{
     AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
     NSString *username = appDelegate.username;
     entries = [[NSMutableArray alloc]init ];
     [self openDB];
     NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Savings WHERE username = '%@'",username];
     sqlite3_stmt *statement;

     if(sqlite3_prepare_v2(runnerAppDB, [sql UTF8String], -1, &statement, nil)==SQLITE_OK)
     {
         while(sqlite3_step(statement)==SQLITE_ROW)
         {

             char *field1 = (char *) sqlite3_column_text(statement, 0);
             NSString *field1Str = [[NSString alloc] initWithUTF8String:field1];

             //   username - distance - speed - date - comment
             NSString *str = [[NSString alloc] initWithFormat:@"%@ %@ %@ - %@", field1Str];
             [entries addObject:str];

         }
     }
   [self.tableView reloadData]
 } 
```

# java - 如何在java中获取windows系统DSN的默认数据库名称

> ID：15783291
> 
> 赞同：0
> 
> 时间：2013-04-03T09:16:10.943
> 
> 标签：java, dsn

```
 DatabaseMetaData data = connection.getMetaData();
     resultSet =  data.getCatalogs();
     while (resultSet.next()) {
      System.out.println(resultSet.getString("TABLE_CAT"));
    } 
```

上面的代码给了我 sql server 的所有数据库的名称，但我只需要在 DSN 中配置的默认数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:42:32.883

```
Statement statement = connection.createStatement();
    ResultSet resultSet1 = statement.executeQuery("select db_name()");
    while (resultSet1.next()) {
        System.out.println(resultSet1.getString(1));
    } 
```

# php - L_ERRORCODE0: 10501 同时连接到贝宝做直接

> ID：15783299
> 
> 赞同：0
> 
> 时间：2013-04-03T09:16:18.830
> 
> 标签：php, paypal, paypal-sandbox

我们正在尝试使用 paypal API for do direct 进行交易。我们在提交详细信息时遇到以下错误。浏览了各种链接和问题，每个人都建议在这里激活网站[支付](http://czetsuya-tech.blogspot.in/2010/03/paypal-10501-failure-in-transaction.html)**Pro**。但是，如果我检查我的帐户，左侧没有这样的部分，我也没有任何地方的网站支付专业选项。

```
PayPal API Error
The PayPal API has returned an error!
TIMESTAMP:  2013-04-03T06:36:34Z
CORRELATIONID:  d0f6f7281495d
ACK:    Failure
VERSION:    98.0 
BUILD:  5479129
L_ERRORCODE0:   10501
L_SHORTMESSAGE0:    Invalid Configuration
L_LONGMESSAGE0: This transaction cannot be processed due to an invalid merchant configuration.
L_SEVERITYCODE0:    Error
AMT:    200.00
CURRENCYCODE:   USD 
```

我不确定是否有任何其他解决方案，因此希望成员提供任何帮助。目前正在使用沙盒帐户进行测试。我正在使用的 API 版本是 98.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:12:52.173

This error means that Website Payments Pro is not enabled. I have modified the account and added pro on to it. Please try running another test and see if it goes through now.

# windows-phone-8 - Windows Phone 8 应用内购买查询

> ID：15783302
> 
> 赞同：0
> 
> 时间：2013-04-03T09:16:33.270
> 
> 标签：windows-phone-8, in-app-purchase

我只是在我的应用程序中设置应用程序内购买..这将是我允许用户购买的单个“耐用”项目。

我已经在 MockIAP 项目中进行了测试，但它确实提出了一些问题。

我的 Durable 购买将是“升级到专业版”，因此我在模拟初始设置中将密钥命名为“ProUpgrade”。

*   当我在我的应用程序中购买产品时，消息询问我是否要购买（ProUpgrade）。这是用户可见的唯一名称/描述吗？我认为在将产品与应用程序相关联时可以输入更多描述性术语？

*   这将如何在多语言应用程序中工作？我正在检查的密钥是我的“ProUpgrade”密钥，大概是所有语言的名称。如果可以在描述中输入可翻译的名称（即每种语言的名称不同），那就太好了，但是根据我的第一点 - 不确定是否会显示。当产品作为提交的一部分添加到应用程序时，这可能会更清楚，但我还没有做到这一点。

*   因为我只有一个产品，所以我没有检索应用程序的产品列表，而是直接检查它是否被购买

    if (!licenseInformation.ProductLicenses["ProUpgrade"].IsActive)

但正如我发现的那样，如果它不在可用的产品许可证中，这有点危险。（有一个例外）虽然我觉得我可以依靠我的单一产品在那里，但大概最好拨打电话以获取所有产品许可证并检查它是否在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T21:50:02.840

在 DevCenter 中，当您定义产品 (IAP) 时 - 您必须输入产品别名、id（键）显示名称和描述以及语言列表。在产品定义的后期阶段，根据之前的语言选择，它会要求对产品定义等进行相应的翻译。

这是您为所有语言定义 IAP 产品信息的唯一地方（如果您决定翻译它们），否则将显示默认语言内容。

![在此处输入图像描述](https://i.stack.imgur.com/pNdE7.png)

# actionscript-3 - 总结要循环的代码

> ID：15783303
> 
> 赞同：0
> 
> 时间：2013-04-03T09:16:44.553
> 
> 标签：actionscript-3, flash

我有代码

```
dict_a[box_1_a] = text_1_a;
dict_a[box_2_a] = text_2_a;
dict_a[box_3_a] = text_3_a;
dict_a[box_4_a] = text_4_a;
dict_a[box_5_a] = text_5_a;
dict_a[box_6_a] = text_6_a; 
```

如何总结代码看起来像这样

```
for (var i:int = 1; i <= 6; i++)
{
  dict_a[box_(i)_a] = text_(i)_a;
} 
```

之前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:18:00.110

如果框和文本是类成员，正确的语法应该是

```
for (var i:int = 1; i <= 6; i++)
{
  dict_a[this["box_" + i + "_a"]] = this["text_" + i + "_a"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:27:48.983

为此，您应该首先将 box_1_a 和文本对象保存在一个数组中，以便您可以通过以下方式迭代它们：

```
for(int i=0; i<=5; i++) {
    dict_a[box_a[i]] = text_a[i];
} 
```

我不知道语法对于 AS/Flash 是否正确，但它基本上是这样工作的。

# xslt - 如何将包含位标志的 XML 元素组合为单个值

> ID：15783309
> 
> 赞同：1
> 
> 时间：2013-04-03T09:16:56.303
> 
> 标签：xslt

如何将在位掩码中指定标志的元素转换为位掩码？我有以下 XML 架构：

![在此处输入图像描述](https://i.stack.imgur.com/7yYgf.jpg)

例如，我怎样才能打开这个 XML

```
<Flags>
  <Flag>1</Flag>
  <Flag>3</Flag>
</Flags> 
```

使用 XSLT 进入这个输出 XML？

```
<Bitmask>10</Bitmask> 
```

（10 = 1010 二进制 - 位 1 和 3 已设置）

在过程编程语言中，我会简单地做这样的事情：

```
var bitmask = 0;
foreach(var falg in flags) {
  bitmask = bitmask + pow(2,flag);
} 
```

但这在 xslt 中是不可能的，因为 xsl:variable 是静态的。是否有另一种方法，或者如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:13:25.627

这个 sytlesheet 片段解决了 .NET XslCompiledTransform 类的问题：

```
<msxsl:script implements-prefix="script" language="C#">
    <![CDATA[
        public int ToBitmask(XPathNodeIterator node)
        {
            int bitmask = 0;
            while (node.MoveNext())
            {
                bitmask += Convert.ToInt32(Math.Pow(2, int.Parse(node.Current.Value)));
            }
            return bitmask;
        }
    ]]>
 </msxsl:script>
 <xsl:template match="Flags">
     <Btimask><xsl:value-of select="script:ToBitmask(Flag)"/></Btimask>
 </xsl:template> 
```

但是，我更喜欢纯 XSLT 解决方案，这样我就可以在 XmlSpy 中调试样式表。

# bash - 如何比较不同Linux节点上的日期

> ID：15783310
> 
> 赞同：0
> 
> 时间：2013-04-03T09:16:58.517
> 
> 标签：bash, date, ssh

从节点我想比较日期，然后显示小时/天的差异。一个应用程序命令说 appcmddate 在第二行显示日期，我正在取出有效格式来计算纪元然后进行比较。

此命令在主机 linux1~# date --date " `appcmddate| sed -n 2p | cut -d \ -f 3,4,5,6,8`" +%s 1364927572 上运行良好

但是当我通过 ssh 尝试它时它没有用。

```
ssh $node "date --date "appcmddate | sed -n 2p | cut -d \  -f 3,4,5,6,8" +%s" 
```

有没有办法让它通过 ssh 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:19:34.607

您必须转义所有*奇怪*的字符：

```
ssh $node "date --date \"appcmddate \| sed -n 2p \| cut -d \\ -f 3,4,5,6,8\" +%s" 
```

否则，引号`"`，管道`|`将被解释为`ssh`与管道相同的级别`ssh ... | sed | ...`，而您希望它是`ssh (... | ...)`。

# sql - 合并连续的日期范围

> ID：15783315
> 
> 赞同：10
> 
> 时间：2013-04-03T09:17:08.910
> 
> 标签：sql, tsql, sql-server-2008-r2

使用 SQL Server 2008 R2，

鉴于一个结束日期紧邻下一个开始日期，我正在尝试将日期范围合并到最大日期范围中。

这些数据是关于不同的就业。一些员工可能已经结束了他们的工作并在以后重新加入。这些应该算作两种不同的工作（例如 ID 5）。有些人有不同类型的工作，彼此竞争（结束日期和开始日期并列），在这种情况下，它应该被视为一项工作（例如 ID 30）。

未结束的雇佣期的结束日期为空。

一些例子可能很有启发性：

```
declare @t as table  (employmentid int, startdate datetime, enddate datetime)

insert into @t values
(5, '2007-12-03', '2011-08-26'),
(5, '2013-05-02', null),
(30, '2006-10-02', '2011-01-16'),
(30, '2011-01-17', '2012-08-12'),
(30, '2012-08-13', null),
(66, '2007-09-24', null)

-- expected outcome
EmploymentId StartDate   EndDate
5            2007-12-03  2011-08-26
5            2013-05-02  NULL
30           2006-10-02  NULL
66           2007-09-24  NULL 
```

我一直在尝试不同的“岛屿和间隙”技术，但无法破解这一技术。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T09:32:42.487

您在我使用日期“31211231”时看到的奇怪之处只是一个非常大的日期来处理您的“无结束日期”场景。*我假设每个员工*实际上不会有很多日期范围，所以我使用了一个简单的**递归公用表表达式**来组合这些范围。

为了让它运行得更快，起始锚查询只保留那些**不会**链接到先前范围（每个员工）的日期。其余的只是遍历日期范围并扩大范围。最后的 GROUP BY 仅保留每个起始 ANCHOR (employmentid, startdate) 组合建立的最大日期范围。

* * *

[SQL小提琴](http://sqlfiddle.com/#!3/82db5/4)

**MS SQL Server 2008 架构设置**：

```
create table Tbl (
  employmentid int,
  startdate datetime,
  enddate datetime);

insert Tbl values
(5, '2007-12-03', '2011-08-26'),
(5, '2013-05-02', null),
(30, '2006-10-02', '2011-01-16'),
(30, '2011-01-17', '2012-08-12'),
(30, '2012-08-13', null),
(66, '2007-09-24', null);

/*
-- expected outcome
EmploymentId StartDate   EndDate
5            2007-12-03  2011-08-26
5            2013-05-02  NULL
30           2006-10-02  NULL
66           2007-09-24  NULL
*/ 
```

**查询 1**：

```
;with cte as (
   select a.employmentid, a.startdate, a.enddate
     from Tbl a
left join Tbl b on a.employmentid=b.employmentid and a.startdate-1=b.enddate
    where b.employmentid is null
    union all
   select a.employmentid, a.startdate, b.enddate
     from cte a
     join Tbl b on a.employmentid=b.employmentid and b.startdate-1=a.enddate
)
   select employmentid,
          startdate,
          nullif(max(isnull(enddate,'32121231')),'32121231') enddate
     from cte
 group by employmentid, startdate
 order by employmentid 
```

**[结果](http://sqlfiddle.com/#!3/82db5/4/0)**：

```
| EMPLOYMENTID |                        STARTDATE |                       ENDDATE |
-----------------------------------------------------------------------------------
|            5 |  December, 03 2007 00:00:00+0000 | August, 26 2011 00:00:00+0000 |
|            5 |       May, 02 2013 00:00:00+0000 |                        (null) |
|           30 |   October, 02 2006 00:00:00+0000 |                        (null) |
|           66 | September, 24 2007 00:00:00+0000 |                        (null) | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-16T04:32:41.267

```
SET NOCOUNT ON

DECLARE @T TABLE(ID INT,FromDate DATETIME, ToDate DATETIME)

INSERT INTO @T(ID,FromDate,ToDate)
SELECT 1,'20090801','20090803' UNION ALL
SELECT 2,'20090802','20090809' UNION ALL
SELECT 3,'20090805','20090806' UNION ALL
SELECT 4,'20090812','20090813' UNION ALL
SELECT 5,'20090811','20090812' UNION ALL
SELECT 6,'20090802','20090802'

SELECT ROW_NUMBER() OVER(ORDER BY s1.FromDate) AS ID,
       s1.FromDate, 
       MIN(t1.ToDate) AS ToDate 
FROM @T s1 
INNER JOIN @T t1 ON s1.FromDate <= t1.ToDate 
  AND NOT EXISTS(SELECT * FROM @T t2 
                 WHERE t1.ToDate >= t2.FromDate
                   AND t1.ToDate < t2.ToDate) 
WHERE NOT EXISTS(SELECT * FROM @T s2 
                 WHERE s1.FromDate > s2.FromDate
                   AND s1.FromDate <= s2.ToDate) 
GROUP BY s1.FromDate 
ORDER BY s1.FromDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-19T21:27:14.063

使用窗口函数而不是递归 CTE 的替代解决方案

```
SELECT 
    employmentid, 
    MIN(startdate) as startdate, 
    NULLIF(MAX(COALESCE(enddate,'9999-01-01')), '9999-01-01') as enddate
FROM (
    SELECT 
        employmentid, 
        startdate, 
        enddate,
        DATEADD(
            DAY, 
            -COALESCE(
                SUM(DATEDIFF(DAY, startdate, enddate)+1) OVER (PARTITION BY employmentid ORDER BY startdate ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING), 
                0
            ),
            startdate
    ) as grp
    FROM @t
) withGroup
GROUP BY employmentid, grp
ORDER BY employmentid, startdate 
```

* * *

这通过计算`grp`对于所有连续行都相同的值来工作。这是通过以下方式实现的：

1.  确定跨度占用的总天数（+1，因为包括日期）

```
SELECT *, DATEDIFF(DAY, startdate, enddate)+1 as daysSpanned FROM @t 
```

2.  每个工作的累计天数，按开始日期排序。这为我们提供了所有先前工作跨度的总天数
    *   我们与 0 合并以确保在我们的累积天数总和中没有 NULL
    *   我们在累积总和中不包括当前行，这是因为我们将使用该值`startdate`而不是`enddate`（我们不能使用它，`enddate`因为 NULL）

```
SELECT *, COALESCE(
    SUM(daysSpanned) OVER (
        PARTITION BY employmentid 
        ORDER BY startdate 
        ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING
    )
    ,0
)  as cumulativeDaysSpanned
FROM (
    SELECT *, DATEDIFF(DAY, startdate, enddate)+1 as daysSpanned FROM @t
) inner1 
```

3.  从 中减去累计天数`startdate`得到我们的`grp`. 这是解决方案的关键。
    *   如果开始日期的增长速度与所跨越的天数相同，那么这些天数是连续的，减去这两个天数将得到相同的值。
    *   如果 startdate 的增长速度快于所跨越的天数，则存在差距，我们将获得一个`grp`大于前一个值的新值。
    *   虽然`grp`是日期，但日期本身是没有意义的，我们只是将其用作分组值

```
SELECT *, DATEADD(DAY, -cumulativeDaysSpanned, startdate) as grp
FROM (
    SELECT *, COALESCE(
        SUM(daysSpanned) OVER (
            PARTITION BY employmentid 
            ORDER BY startdate 
            ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING
        )
        ,0
    )  as cumulativeDaysSpanned
    FROM (
        SELECT *, DATEDIFF(DAY, startdate, enddate)+1 as daysSpanned FROM @t
    ) inner1
) inner2 
```

随着结果

```
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| employmentid | startdate               | enddate                 | daysSpanned | cumulativeDaysSpanned | grp                     |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 5            | 2007-12-03 00:00:00.000 | 2011-08-26 00:00:00.000 | 1363        | 0                     | 2007-12-03 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 5            | 2013-05-02 00:00:00.000 | NULL                    | NULL        | 1363                  | 2009-08-08 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 30           | 2006-10-02 00:00:00.000 | 2011-01-16 00:00:00.000 | 1568        | 0                     | 2006-10-02 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 30           | 2011-01-17 00:00:00.000 | 2012-08-12 00:00:00.000 | 574         | 1568                  | 2006-10-02 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 30           | 2012-08-13 00:00:00.000 | NULL                    | NULL        | 2142                  | 2006-10-02 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+
| 66           | 2007-09-24 00:00:00.000 | NULL                    | NULL        | 0                     | 2007-09-24 00:00:00.000 |
+--------------+-------------------------+-------------------------+-------------+-----------------------+-------------------------+ 
```

4.  最后我们可以`GROUP BY grp`摆脱连续的日子。
    *   使用`MIN`and`MAX`获取新的`startdate`and`endate`
    *   为了处理 NULL `enddate`，我们给它们一个很大的值来获取它们，然后再将`MAX`它们转换回`NULL`

```
SELECT 
    employmentid, 
    MIN(startdate) as startdate, 
    NULLIF(MAX(COALESCE(enddate,'9999-01-01')), '9999-01-01') as enddate
FROM (
    SELECT *, DATEADD(DAY, -cumulativeDaysSpanned, startdate) as grp
    FROM (
        SELECT *, COALESCE(
            SUM(daysSpanned) OVER (
                PARTITION BY employmentid 
                ORDER BY startdate 
                ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING
            )
            ,0
        )  as cumulativeDaysSpanned
        FROM (
            SELECT *, DATEDIFF(DAY, startdate, enddate)+1 as daysSpanned FROM @t
        ) inner1
    ) inner2
) inner3
GROUP BY employmentid, grp
ORDER BY employmentid, startdate 
```

为了得到想要的结果

```
+--------------+-------------------------+-------------------------+
| employmentid | startdate               | enddate                 |
+--------------+-------------------------+-------------------------+
| 5            | 2007-12-03 00:00:00.000 | 2011-08-26 00:00:00.000 |
+--------------+-------------------------+-------------------------+
| 5            | 2013-05-02 00:00:00.000 | NULL                    |
+--------------+-------------------------+-------------------------+
| 30           | 2006-10-02 00:00:00.000 | NULL                    |
+--------------+-------------------------+-------------------------+
| 66           | 2007-09-24 00:00:00.000 | NULL                    |
+--------------+-------------------------+-------------------------+ 
```

5.  我们可以结合内部查询来获取此答案开头的查询。哪个更短，但更难解释

所有这一切的限制要求

*   就业的开始日期和结束日期没有重叠。这可能会在我们的`grp`.
*   开始日期不为 NULL。然而，这可以通过用小日期值替换 NULL 开始日期来克服
*   未来的开发者可以破译你执行的窗口黑魔法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T10:31:02.290

用于组合所有重叠时段的修改脚本。
例如
01.01.2001-01.01.2010
05.05.2005-05.05.2015

将给出一个时期：
01.01.2001-05.05.2015

tbl.enddate 必须完成

```
;WITH cte
  AS(
SELECT
  a.employmentid
  ,a.startdate
  ,a.enddate
from tbl a
left join tbl c on a.employmentid=c.employmentid
    and a.startdate > c.startdate
    and a.startdate <= dateadd(day, 1, c.enddate)
WHERE c.employmentid IS NULL

UNION all

SELECT
  a.employmentid
  ,a.startdate
  ,a.enddate
from cte a
inner join tbl c on a.startdate=c.startdate
    and (c.startdate = dateadd(day, 1, a.enddate) or (c.enddate > a.enddate and c.startdate <= a.enddate))
)
select distinct employmentid,
          startdate,
          nullif(max(enddate),'31.12.2099') enddate
from cte
group by employmentid, startdate 
```

# javascript - Slickgrid 或 Flexigrid

> ID：15783316
> 
> 赞同：3
> 
> 时间：2013-04-03T09:17:09.390
> 
> 标签：javascript, jquery, slickgrid, flexigrid

我和我的同事正在争论哪个网格插件最好，我们每个人都有有效的论据，但我们似乎无法得出结论。所以这是我的问题，为什么 slickgrid 比 flexigrid 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:09:32.093

当我不得不选择/尝试新的网格时，我研究了 Flexigrid，我最终选择了 SlickGrid，我告诉你这是一个更好的选择。

SlickGrid::

*   SlickGrid 在 GitHub 上不断发展，几乎每周都有提交
*   但它有一个缺点，它需要先加载所有数据，然后才能执行任何操作，虽然在 javascript（演示）中填充假数据速度很快，但从数据库中提取数据的时间要长得多。
*   一旦你有了数据，劣势就变成了优势，一旦加载它真的很快，分组，排序 50k 甚至 500k 行
*   由于您需要首先加载数据，它很长并且消耗带宽，但是一旦您加载了它，您对数据所做的任何操作都会在客户端计算机上完成，例如排序，分组，过滤等......所有这是在客户端完成的（因为数据视图作为 javascript 对象存在）
*   它现在支持我帮助实现的多列分组（嵌套分组）
*   您可以轻松地格式化（格式化程序）您想要的任何列，例如显示国家标志徽标而不仅仅是名称。

现在 Flexigrid::

*   Flexigrid 上次提交是 2 年前（不包括演示）
*   你能用它格式化任何列吗，我不这么认为..？
*   SlickGrid 的缺点成为 Flexigrid 的优势（首先加载所有数据），但前提是您从不更改 Flexigrid 中的页面。但这里的主要区别是，Flexigrid 将在您更改的每个页面上对数据库进行查询（并且您必须处理页面查询），因此您在 SlickGrid 中不断需要连接到数据库，一旦它被加载，您不需要'不再需要数据库（除非您正在进行插入/更新）。
*   我没有在 Flexigrid 中看到多列分组

显然我更喜欢 SlickGrid，我承认我几乎没有尝试过 Flexgrid，但它没有进化......

# asp.net - 直接上传文件到文件夹

> ID：15783317
> 
> 赞同：0
> 
> 时间：2013-04-03T09:17:09.770
> 
> 标签：asp.net, file-upload

我的项目中有一个文件夹“文件”。如何将文件直接上传到此文件夹？

我使用了以下语句：

```
string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
FileUpload1.SaveAs(Server.MapPath(".\\File\\" + filename)); 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:30:01.100

不，它不正确。你必须试试这个：

```
 FileUpload1.SaveAs(Server.MapPath("File//" + filename)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:48:16.410

`Server.MapPath`是根相对且采用 URI 格式，因此请使用：

```
FileUpload1.SaveAs(Server.MapPath("~/File/" + filename)); 
```

# sql-server - 如何使用 VBA 将 Access 表链接到 SQL Server

> ID：15783321
> 
> 赞同：4
> 
> 时间：2013-04-03T09:17:16.317
> 
> 标签：sql-server, vba, ms-access, ms-access-2003, linked-tables

我正在尝试使用 SQL Server 后端在 Access中创建链接（*或导入）表。*基本上，业务用户定期需要一个表**[SQL Rulesnew]**的副本（是的，有空格，叹气）所以我们想给他们一个小的 Access 2003 工具，它可以按需完成这项工作。

我确实尝试过使用`Docmd.TransferDataBase acTable`但没有运气

这是我正在使用的代码：

```
Sub getData()

Dim sConnStr As String
Dim oTable As TableDef
Dim sDestinationTable As String
Dim dbs As Database
Dim tbl As DAO.TableDef
Dim tblLinked As DAO.TableDef       

    sDestinationTable = "SQL Rulesnew"
    Set dbs = CurrentDb

    ' source table name has a SPACE (rolleyes!)
    CurrentDb.CreateTableDef sDestinationTable  

    ' got the below from a Data Link File (UDL)
    sConnStr = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=MYDBNAME;Data Source=MYSERVERNAME"

    ' the below also failed!
    'DoCmd.TransferDatabase acLink, "ODBC Database", "ODBC;Driver={SQL Server};Server=Fos;Database=Hermes_Rep;Trusted_Connection=Yes", acTable, "[Report SQLRulesnew]", "SQLRules" & VBA.Format(Now, "ddmmyyyy")

    'If DCount("*", "MSysObjects", "[Name]='[SQL Rulesnew]' AND [Type] In (1, 4, 6)") > 0 Then
    If IsTable(sDestinationTable) Then
       DoCmd.DeleteObject acTable, sDestinationTable
    End If

    Set tblLinked = dbs.CreateTableDef(sDestinationTable)
    Debug.Print "Linking the " & sDestinationTable
    tblLinked.Connect = sConnStr
    tblLinked.SourceTableName = sDestinationTable
    dbs.TableDefs.Append tblLinked
    tblLinked.RefreshLink

End Sub

Function IsTable(sTblName As String) As Boolean
    'does table exists and work ?
    'note: finding the name in the TableDefs collection is not enough,
    '      since the backend might be invalid or missing
Dim x
    On Error GoTo Coventry
    x = DCount("*", sTblName)
    IsTable = True
    Exit Function

Coventry:
    Debug.Print Now, sTblName, Err.Number, Err.Description
    IsTable = False
End Function 
```

不幸的是我得到一个错误*找不到可安装的ISAM*就行了`dbs.TableDefs.Append tblLinked`

我该怎么办？

谢谢菲利普

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:44:04.253

我通过反复试验找到了答案...

基本上我在 Access 中的表名可以在不使用*[方括号]*的情况下有一个空格，因此以下命令可以正常工作（在删除任何现有对象之后）：

```
DoCmd.TransferDatabase _
  acImport, _
  "ODBC Database", _
  "ODBC;Driver={SQL Server};Server=Fos;Database=Hermes;Trusted_Connection=Yes", _
  acTable, _
  "sourceTable", _
  "targetTable" 
```

# c# - 从 xls 解析数据并使用 c# 添加到数据网格视图

> ID：15783325
> 
> 赞同：1
> 
> 时间：2013-04-03T09:17:27.207
> 
> 标签：c#, excel, parsing

我正在尝试读取一个包含许多 xls 文件 (27) 的文件夹，并且我只需要在 21 行之后读取 3 个特定列，例如 A21,: B21,: ...前列的总和。我正在考虑插入一个数据库网格并在那里插入解析数据。我的问题是我从未尝试从 xls 中读取内容。你有什么想法。提前致谢！（所有数据都在所有工作簿的同一个工作表中）

# ibm-mobilefirst - IBM 移动应用程序平台模式类型 5.0：部署 SQL 适配器时出错

> ID：15783333
> 
> 赞同：0
> 
> 时间：2013-04-03T09:17:45.857
> 
> 标签：ibm-mobilefirst

我用我的工作灯项目（2 个 wlapp 和 4 个适配器）实例化了“IBM Mobile Application Platform Pattern Type 5.0”。即使 VAP 中的一切都是绿色的，我的一个适配器也没有部署在 worklight 控制台上。这是我可以在日志文件中找到的错误：

```
deploy_wl_adapter:
     [echo] worklight_context=d-ae4e9b49-478a-4f0e-99e1-e6ad4886c1d9/CustomerCentricity/
     [echo] adapter=/opt/IBM/worklight/artifact/DBAdapter.adapter
[adapter-deployer] Mar 29, 2013 12:32:48 PM com.worklight.ant.deployers.AbstractDeployerTask logDeployResponse
[adapter-deployer] SEVERE: ERROR
BUILD SUCCESSFUL
Total time: 4 seconds 
```

如果我尝试直接在工作灯控制台上部署适配器，我会遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:07:03.300

我猜您的适配器使用了一个未在 authentication.xml 中定义的领域您可以在本地工作灯控制台中部署您的适配器吗？如 locahost:8080/console

# installation - PHP 的 Imagick 安装问题：5.3.3 & ImageMagick：6.8.1 Q16

> ID：15783341
> 
> 赞同：1
> 
> 时间：2013-04-03T09:17:56.873
> 
> 标签：installation, imagemagick, imagick, centos6

我在安装 Imagick 时遇到问题，因为我刚刚将 ImageMagick 6.8.1 Q16 安装到我们的 CentOS 6.3 系统上

请注意，我以 root 身份运行所有命令

然后我正在尝试以下操作： pecl install imagick 并出现以下错误（完全错误）：

```
[root@T1600-904 /]# pecl install imagick
downloading imagick-3.1.0RC2.tgz ...
Starting to download imagick-3.1.0RC2.tgz (93,264 bytes)
.....................done: 93,264 bytes
15 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
Please provide the prefix of Imagemagick installation [autodetect] :
building in /tmp/pear/install/pear-build-rootPvQgOJ/imagick-3.1.0RC2
running: /tmp/pear/install/imagick/configure --with-imagick
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM 
-I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib
checking for PHP extension directory... /usr/lib64/php/modules
checking for PHP installed headers prefix... /usr/include/php
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... gawk
checking whether to enable the imagick extension... yes, shared
checking whether to enable the imagick GraphicsMagick backend... no
checking ImageMagick MagickWand API configuration program... found in /usr/local/bin/MagickWand-
config
checking if ImageMagick version is at least 6.2.4... found version 6.8.1 Q16
checking for MagickWand.h header file... found in /usr/local/include/ImageMagick
/wand/MagickWand.h
checking PHP version is at least 5.1.3... yes. found 5.3.3
Package MagickWand was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickWand.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickWand' found
Package MagickWand was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickWand.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickWand' found
checking for a sed that does not truncate output... (cached) /bin/sed
checking for fgrep... /bin/grep -F
checking for ld used by cc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1966080
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC -DPIC
checking if cc PIC flag -fPIC -DPIC works... yes
checking if cc static flag -static works... no
checking if cc supports -c -o file.o... yes
checking if cc supports -c -o file.o... (cached) yes
checking whether the cc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating ./config.status
config.status: creating config.h
config.status: executing libtool commands
running: make
/bin/sh /tmp/pear/install/pear-build-rootPvQgOJ/imagick-3.1.0RC2/libtool --mode=compile cc  -I.
 -I/tmp/pear/install/imagick -DPHP_ATOM_INC -I/tmp/pear/install/pear-build-rootPvQgOJ/imagick-
3.1.0RC2/include -I/tmp/pear/install/pear-build-rootPvQgOJ/imagick-3.1.0RC2/main -I/tmp
/pear/install/imagick -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr
/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g 
-O2   -c /tmp/pear/install/imagick/imagick_file.c -o imagick_file.lo
libtool: compile:  cc -I. -I/tmp/pear/install/imagick -DPHP_ATOM_INC -I/tmp/pear/install/pear-
build-rootPvQgOJ/imagick-3.1.0RC2/include -I/tmp/pear/install/pear-build-rootPvQgOJ/imagick-
3.1.0RC2/main -I/tmp/pear/install/imagick -I/usr/include/php -I/usr/include/php/main -I/usr
/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext
/date/lib -DHAVE_CONFIG_H -g -O2 -c /tmp/pear/install/imagick/imagick_file.c  -fPIC -DPIC -o 
.libs/imagick_file.o
In file included from /tmp/pear/install/imagick/imagick_file.c:21:
/tmp/pear/install/imagick/php_imagick.h:49:31: error: wand/MagickWand.h: No such file or   
directory
In file included from /tmp/pear/install/imagick/php_imagick_file.h:24,
             from /tmp/pear/install/imagick/imagick_file.c:22:
/tmp/pear/install/imagick/php_imagick_defs.h:72: error: expected specifier-qualifier-list
 before âMagickWandâ
/tmp/pear/install/imagick/php_imagick_defs.h:80: error: expected specifier-qualifier-list
 before âDrawingWandâ
/tmp/pear/install/imagick/php_imagick_defs.h:86: error: expected specifier-qualifier-list 
before âPixelIteratorâ
/tmp/pear/install/imagick/php_imagick_defs.h:98: error: expected specifier-qualifier-list 
before âPixelWandâ
In file included from /tmp/pear/install/imagick/imagick_file.c:22:
/tmp/pear/install/imagick/php_imagick_file.h:43: error: âMaxTextExtentâ undeclared here (not in 
a function)
/tmp/pear/install/imagick/imagick_file.c: In function âphp_imagick_file_initâ:
/tmp/pear/install/imagick/imagick_file.c:75: error: âMagickPathâ undeclared (first use in this 
function)
/tmp/pear/install/imagick/imagick_file.c:75: error: (Each undeclared identifier is reported 
only once
/tmp/pear/install/imagick/imagick_file.c:75: error: for each function it appears in.)
/tmp/pear/install/imagick/imagick_file.c:99: error: âHeadPathâ undeclared (first use in this
 function)
/tmp/pear/install/imagick/imagick_file.c:100: error: âTailPathâ undeclared (first use in this 
function)
/tmp/pear/install/imagick/imagick_file.c: In function 
âphp_imagick_read_image_using_imagemagickâ:
/tmp/pear/install/imagick/imagick_file.c:124: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:124: error: âMagickFalseâ undeclared (first use in 
this function)
/tmp/pear/install/imagick/imagick_file.c:128: error: âphp_imagick_objectâ has no member named
 âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:135: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:137: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c: In function 
âphp_imagick_read_image_using_php_streamsâ:
/tmp/pear/install/imagick/imagick_file.c:144: error: âMagickBooleanTypeâ undeclared (first use 
in this function)
/tmp/pear/install/imagick/imagick_file.c:144: error: expected â;â before âstatusâ
/tmp/pear/install/imagick/imagick_file.c:177: error: âstatusâ undeclared (first use in this 
function)
/tmp/pear/install/imagick/imagick_file.c:177: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:179: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:184: error: âMagickFalseâ undeclared (first use in
 this function)
/tmp/pear/install/imagick/imagick_file.c:189: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:196: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c: In function âphp_imagick_write_fileâ:
/tmp/pear/install/imagick/imagick_file.c:247: error: âMagickBooleanTypeâ undeclared (first use 
in this function)
/tmp/pear/install/imagick/imagick_file.c:247: error: expected â;â before âstatusâ
/tmp/pear/install/imagick/imagick_file.c:258: error: âstatusâ undeclared (first use in this 
function)
/tmp/pear/install/imagick/imagick_file.c:258: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:260: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:264: error: âMagickFalseâ undeclared (first use in 
this function)
/tmp/pear/install/imagick/imagick_file.c: In function âphp_imagick_stream_handlerâ:
/tmp/pear/install/imagick/imagick_file.c:277: error: âMagickBooleanTypeâ undeclared (first use 
in this function)
/tmp/pear/install/imagick/imagick_file.c:277: error: expected â;â before âstatusâ
/tmp/pear/install/imagick/imagick_file.c:306: error: âstatusâ undeclared (first use in this 
function)
/tmp/pear/install/imagick/imagick_file.c:306: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:310: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:314: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:318: error: âphp_imagick_objectâ has no member named 
âmagick_wandâ
/tmp/pear/install/imagick/imagick_file.c:326: error: âMagickFalseâ undeclared (first use in 
this function)
make: *** [imagick_file.lo] Error 1
ERROR: `make' failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T05:28:25.943

查看上面的输出，安装出错的地方是：

```
In file included from /tmp/pear/install/imagick/imagick_file.c:21:
/tmp/pear/install/imagick/php_imagick.h:49:31: error: wand/MagickWand.h: No such file or   
directory 
```

意思`'MagickWand.h'`是，找不到。

首先，您可以尝试`'pkg-config'`按照要求安装`/usr/local/bin/Wand-config`

```
$ yum install pkg-config 
```

并尝试再次安装imagick，这可能会解决问题。

如果没有，请尝试手动安装并更改`'config.m4'`源目录中的文件以匹配安装实际查找的内容。如下：

```
$ cd /usr/local
$ wget http://pecl.php.net/get/imagick-2.2.2.tgz
$ tar zxvf ./imagick-2.2.2.tgz
$ cd imagick-2.2.2 
```

然后，在您继续打开`config.m4`文件之前：

```
$ nano config.m4 
```

找到这一行：

```
if test -r $WAND_DIR/include/ImageMagick/wand/MagickWand.h; 
```

并将其更改为：

```
if test -r $WAND_DIR/include/ImageMagick-6/wand/MagickWand.h; 
```

注意：ImageMagick-6。更改它以匹配您所需的路径/版本。

并继续安装：

```
$ phpize
$ ./configure
$ make
$ make test
$ make install 
```

希望这可以帮助某人...

# c++ - 我应该将 C++11 emplace_back 与指针容器一起使用吗？

> ID：15783342
> 
> 赞同：32
> 
> 时间：2013-04-03T09:17:59.183
> 
> 标签：c++, c++11, smart-pointers

具有通常的 Base -> Derived 层次结构，例如：

```
class Fruit { ... };
class Pear : Fruit { ... };
class Tomato : Fruit { ... };

std::vector<Fruit*> m_fruits; 
```

`emplace_back`使用而不是有意义（例如：性能更好）`push_back`吗？

```
std::vector::emplace_back( new Pear() );
std::vector::emplace_back( new Tomato() ); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-03T10:24:34.740

不要使用原始指针，`std::unique_ptr`像这样使用：

```
std::vector<std::unique_ptr<Fruit>> m_fruits; 
```

而且由于您不能复制`std::unique_ptr`必须使用的构造 a `emplace_back`（尽管您可以使用`push_back`with `std::move`）。

```
~~m_fruits.emplace_back(新梨());
m_fruits.emplace_back(新番茄());~~ 
```

~~**编辑：**~~

 ~~看起来如果需要重新分配内存并且无法重新分配内存，则使用`std::vector<std::unique_ptr<T>>::emplace_back`and`new`可能会泄漏`std::vector`，我推荐的方法（直到 C++14 引入`std::make_unique`）是这样使用`push_back`的：

```
m_fruits.push_back(std::unique_ptr<Fruit>(new Pear()));
m_fruits.push_back(std::unique_ptr<Fruit>(new Tomato())); 
```

或使用`std::make_unique`：

```
m_fruits.push_back(std::make_unique<Pear>());
m_fruits.push_back(std::make_unique<Tomato>()); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-03T10:32:18.350

指针是标量类型，因此是文字类型，因此复制、移动和 emplace 构造（从左值或右值）都是等效的，并且通常会编译为相同的代码（标量副本）。 `push_back`更清楚的是您正在执行标量复制，而`emplace_back`应该保留用于调用非复制或移动构造函数（例如转换或多参数构造函数）的 emplace 构造。

如果您的向量应该保存`std::unique_ptr<Fruit>`而不是原始指针（以防止内存泄漏），那么因为您正在调用转换构造函数`emplace_back`会更正确。但是，如果扩展向量失败，它仍然会泄漏，所以在这种情况下你应该使用`push_back(make_unique<Pear>())`etc.~~

# java - 在 C 中使用 JNI 从对象中获取对象

> ID：15783344
> 
> 赞同：4
> 
> 时间：2013-04-03T09:18:07.670
> 
> 标签：java, c, java-native-interface, native

```
public class Student
{
   private People people;
   private Result result;
   private int amount;
} 
```

这是Java类的示例；在 C 中，我试图让“学生”中的“人”，但我失败了。但是，我可以从“学生”中获得整数类型“金额”。

```
jobject getObjectFromObject(JNIEnv *env, jobject obj, const char * fieldName)
{
    jfieldID fid; /* store the field ID */
    jobject i;

    /* Get a reference to obj's class */
    jclass cls = (*env)->GetObjectClass(env, obj);

    /* Look for the instance field s in cls */
    fid = (*env)->GetFieldID(env, cls, fieldName, "L");
    if (fid == NULL)
    {
        return 0; /* failed to find the field */
    }

    /* Read the instance field s */
    i = (*env)->GetObjectField(env, obj, fid);

    return i;
} 
```

我试图将“people”作为 fieldName 传递给该方法，但它仍然给出以下错误：“java.lang.NoSuchFieldError: people”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T09:30:42.043

如此[处](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html#wp276)所述，在`GetFieldID`不能单独使用“L”作为类型签名的方法中，您必须在此之后指定类名。

例如，如果您想指定参数是 a `String`，则必须使用`Ljava/lang/String;`（最后的分号是签名的一部分！）。

对于名为 的自定义类`People`，假设它在 package`your.package.name`中，您必须将其`Lyour/package/name/People;`用作类型签名。

# jquery - 为什么这个简单的 if : checked input 不能正常工作？

> ID：15783346
> 
> 赞同：0
> 
> 时间：2013-04-03T09:18:10.633
> 
> 标签：jquery, html

我有一个单选输入，在页面其他地方的一个按钮上，我检查它是否被选中，并将选中的值更改为开或关。

输入看起来像：

```
<input type="radio" name="send" value="1"  checked="true" /> 
```

或者

```
<input type="radio" name="send" value="1"  /> 
```

我有相当简单的 jQuery 来做检查：

```
$input = $('input[name=send]');

if( $input.is(":checked") ) 
{
    $input.attr("checked", false);
}
else
{
    $input.attr("checked", true);
} 
```

问题是，如果页面加载并检查了输入，出于某种原因，我需要单击按钮两次，然后才能识别语句的 else 部分。

如果页面以未选中的输入开始，那么在第一次单击按钮时，它会按预期工作。然后每次点击都有效。但如果检查输入，则不是初始负载。

将输入标记为已检查的正确方法是什么？

如何在 input[type=radio] 上执行正确的 if / else 语句以查看它是否被检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:19:45.667

使用[prop()](http://api.jquery.com/prop/)来访问`checked`属性`checkbox`而不是 attr，它发生在我的 jQuery 1.9 上，它适用于 jQuery 1.8.3，但使用 prop() 更好

```
if( $input.is(":checked") ) 
{
    $input.prop("checked", false);
}
else
{
    $input.prop("checked", true);
} 
```

正如@Álvaro G. Vicario 所说，您可以使用`if( $input.prop("checked") )`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:20:14.890

改用`.prop()`：

```
$input.prop("checked", false/true); 
```

所以在你的代码中：

```
if($input.is(":checked")){
    $input.prop("checked", false);
}else{
    $input.prop("checked", true);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T09:21:01.793

`checked`是复选框的属性，因此请使用`.prop()`而不是`.attr()`.

`checked`无论其值如何，该属性的存在都会检查复选框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T09:28:59.737

这很可能是您想要的。

```
$input.prop('checked', function(i, oldVal){
    return !oldVal;
}); 
```

你正在处理两个单选按钮......所以这会起作用。

# filemaker - 如何使用脚本将照片上传到 Filemaker 数据库

> ID：15783347
> 
> 赞同：0
> 
> 时间：2013-04-03T09:18:11.140
> 
> 标签：filemaker

要求是通过 FileMaker 中的脚本将照片上传到数据库中。我尝试在脚本中插入图片，但它没有按预期工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:16:11.730

我找到了上传照片的解决方案。我们需要创建具有容器类型的字段，并且在脚本中我们必须用户“转到字段”指向创建的字段，然后插入图片 [] 与图片所在的位置。它将照片上传到字段中。

# date - 如何使用 asp classic 显示或隐藏日期

> ID：15783352
> 
> 赞同：0
> 
> 时间：2013-04-03T09:18:26.157
> 
> 标签：date, time, asp-classic, hide, show

我使用表单让用户选择在网页上显示或隐藏日期，是或否。我正在使用 cookie 来存储选项，但我可以找到或弄清楚如何在页面上显示或不显示日期。我一直在尝试使用 IF 语句处理 yes 或 no 选项，然后将其用作网页的 css 样式表。也许我做错了。问候特雷夫

编辑从这里开始

到目前为止我的代码（不工作，甚至不知道我是否在正确的轨道上）

css/asp 处理样式表中的代码 styleCookieProcess.asp

```
<%
date= Response.Cookies("usedate")
If(date= "yes") then
    Response.Cookies("wantdate") = "date()"
ElseIf(date= "no") then
    Response.Cookies("wantdate") = "None"
End If
%> 
```

这是我网页中的代码：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="styleCookieProcess.asp">
<title>About Us</title>
</head>

<body>

<p>Current Date &nbsp; <%
Response.Write(Response.Cookies("wantdate"))
%></p>

<P ALIGN = "CENTER">
<IMG SRC = "Images\About_Us.png" HEIGHT = "250" WIDTH = "715">
</P>

<TABLE ALIGN = "CENTER">

<tr>  
<th>
<DIV ALIGN = "CENTER">
<P>
We have been around the block and back and have the t-shirt to prove it!
The Glad Rag Team
</P>
</DIV>
</th>   
</tr>
</TABLE>

</body>
</html> 
```

问候， Bubs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:36:50.723

尝试这个

```
<%
date= Response.Cookies("usedate")
If(date= "yes") then
Response.Cookies("wantdate") = "date()"
Else
Response.Cookies("wantdate") = "None"
End If
%> 
```

# android - ViewFlipper：它是否同时为所有视图加载位图？

> ID：15783356
> 
> 赞同：0
> 
> 时间：2013-04-03T09:18:31.730
> 
> 标签：android, memory-management, viewflipper

问题更多是关于android的内存分配。我有一个 ViewFlipper 有几个视图，每个视图都有一个背景图像。我只想知道 ViewFlipper 是否加载了所有的视图图像，因此它使用了太多的内存。这部分是关于 ViewFlipper 初始化的

```
bgFlipper = (ViewFlipper) findViewById(R.id.bgFlipper);

int bgLayouts[] = new int[]{ R.layout.bg1, R.layout.bg2,R.layout.bg3,R.layout.bg4,...R.layout.bg100500}; // :)
for (int i = 0;i<bgLayouts.length; i++)
    bgFlipper.addView(inflater.inflate(bgLayouts[i], null)); 
```

所以问题是我是否需要动态添加视图，或者 ViewFlipper 已经为我完成了，我不应该担心其视图背景上的那些位图，即内存分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T11:15:06.420

是的，ViewFlipper 会在它自己布局的那一刻加载它拥有的每个子视图。因此，例如，如果您的 ViewFlipper 有多个 Fragment 以及在 onCreate() 上创建的位图，那么无论它们目前是否可见，它们都将被创建。所以你最好小心，在这种情况下你可以很容易地创建 OutOfMemoryError 。

# css - 伪元素后不显示？

> ID：15783361
> 
> 赞同：27
> 
> 时间：2013-04-03T09:18:43.103
> 
> 标签：css, pseudo-element

我想在一些打开工具提示的表单字段的末尾添加一个帮助徽标。

一切正常，但 .helptip 图标 ( [http://img1.wsimg.com/shared/img/1/small-help-icon.gif](http://img1.wsimg.com/shared/img/1/small-help-icon.gif) ) 与文本一起出现在左侧（合并）。我实际上想要在跨度文本的右侧，所以我做了 .help-tip:after。但随后什么也没有出现。

你能看出哪里不对吗？

```
<div class="advancedSearchFormSelectField fclear">
<span id="view_format_mis" class="advancedSearchFormlabel help-tip"> Include Columns in Result Set </span>

<select class="advancedSearchFormSelectBox" id="filters_include_columns" multiple="multiple" name="filters[include_columns][]">

<option value="x">X</option>
<option value="y">Y</option>
<option value="z">Z</option>
</select>
</div>

<div class="advancedSearchFormSelectField fclear">
<span id="view_format_mis" class="advancedSearchFormlabel"> Sort Column </span>
<!--No help tip here -->    
<select class="advancedSearchFormSelectBox" id="filters_sort_columns" multiple="multiple" name="filters[sort_columns]">

<option value="a">A</option>
<option value="b">B</option>
<option value="c">C</option>
</select>
</div> 
```

```
.help-tip {
/* Merged text at the moment. .help-tip:after not working */ 
    cursor: pointer;
    width: 10px;
    height: 10px;
    background-repeat: no-repeat;
    background-image: url("/assets/small-help-icon.gif");
}

.advancedSearchFormSelectField{
    width:300px;
    margin: 5px;
    height: 60px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-03T09:23:45.983

您目前似乎没有使用伪元素。尝试此设置`.help-tip`并`.help-tip::after`给出 is `content: ""`and `display: inline-block`：

```
.help-tip::after {
    content: "";
    display: inline-block;
    cursor: pointer;
    width: 10px;
    height: 10px;
    background-repeat: no-repeat;
    background-image: url("/assets/small-help-icon.gif");
} 
```

# database-design - 通常在哪里保存非业务逻辑数据？

> ID：15783362
> 
> 赞同：0
> 
> 时间：2013-04-03T09:18:43.703
> 
> 标签：database-design

嗨，我正在尝试测量完成端到端请求需要多长时间。

我正在使用 facebook 实时 api 接收对我的盒子的回调。基本上一个用户签到一个位置，我得到一个回调。我想测量整个场景的总时间（从签到到收到回调）。

我目前的计划是使用随回调到达的时间戳并将其与盒子上的时间进行比较，并将其用作度量并将其放入我的 mysql 数据库中。

我的问题是，在这种情况下，通常在哪里保存与应用程序的业务逻辑无关的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:30:10.610

如果您要问的是通用产品设计-您有业务逻辑处理数据和非业务逻辑处理数据-那么根据我的经验，我们创建了两组数据持有者-1个服务数据存储（您可以读取为业务逻辑数据）和 2 非服务元数据存储（可以读取为非业务逻辑数据）。

1.  现在关于确切存储位置的问题，这取决于您的应用程序。很多时候，在分布式系统中，这些数据需要在充当本地服务器的不同代理实体之间共享。在这种情况下 - 您会将它们存储在另一个数据库文件中。

2.  如果它是本地化数据（例如应用程序），则可能是双数据库 - 一个用于本地化信息呈现，一个（服务数据库）用于数据共享将是更好的方法。

基本上意图，数据量将是选择数据存储的两个主要标准。

# iphone-5 - 为什么是 GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS？iphone 5

> ID：15783368
> 
> 赞同：1
> 
> 时间：2013-04-03T09:19:07.520
> 
> 标签：iphone-5

在将应用程序从 iphone 4s 移植到 iPhone 5 时，调用此代码后出现错误 GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS：

```
glBindFramebuffer(GL_FRAMEBUFFER, 1);

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, 1);

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, 2); 
```

根据 OpenGLES 规范，错误是由“附件的宽度和高度不同”引起的，但我对颜色和深度缓冲区都使用了 1136 x 640。

相同的代码在 iphone 4s（具有 960 x 640 缓冲区）上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T23:55:16.300

Depth and color buffer have diff size. For get real size color buffer:

```
 [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:layer]
    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &w);
    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &h); 
```

Also you need set scale to CAEAGLLayer:

```
 layer.contentsScale = [[UIScreen mainScreen] scale]; 
```

You can see how it's done in Ogre3D, SDL, Cocos2d-x.

# ruby-on-rails-3.2 - rails 3.2中的自动更新计时器

> ID：15783370
> 
> 赞同：0
> 
> 时间：2013-04-03T09:19:18.733
> 
> 标签：ruby-on-rails-3.2

我想在主站点上制作一个带有小柜台的网站。用户应该按下一个按钮，计时器应该计算自按下按钮以来的时间。时间应该始终对用户可见，并且每秒更新一次。

有这方面的宝石或例子吗？我在rails 3.2上使用ruby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:20:39.723

这不是 Ruby on Rails 问题。您可以使用 JavaScript 或[http://thecodeplayer.com/walkthrough/make-a-stopwatch-using-css3-without-images-or-javascript来解决它](http://thecodeplayer.com/walkthrough/make-a-stopwatch-using-css3-without-images-or-javascript)

对于 JavaScript 方法，只需谷歌搜索秒表或计时器和 JavaScript。

# appfabric-cache - 配置 AppFabric 缓存而不在 web.config 中列出服务器

> ID：15783376
> 
> 赞同：2
> 
> 时间：2013-04-03T09:19:39.383
> 
> 标签：appfabric-cache

我正在尝试了解如何在网站上正确配置 AppFabric 缓存。我们计划使用 SQL Server 作为缓存管理器，据我所知，SQL 将包含集群中缓存主机的列表。

但是，运行时

```
DataCacheFactory factory = new DataCacheFactory(); 
```

我明白了

> 服务器集合不能为空。

我想这是可以预料的，因为我没有在 web.config 中添加任何服务器。

但是，我不想在每个 Web 服务器上维护一个服务器列表，我希望在 SQL Server 上集中完成。我假设有一种方法可以指向 SQL Server，但我找不到有关如何执行此操作的信息。

（我也尝试过使用 XML 配置选项，但它甚至找不到该文件。我已经在 power shell 中检查了服务的运行状况。）

如何集中服务器缓存主机列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:26:16.977

> 我们计划使用 SQL Server 作为缓存管理器，据我所知，SQL 将包含集群中缓存主机的列表。

这是假的。SQL Server 可以执行集群管理，但它仅用于管理缓存主机，最终管理缓存集群。它只是用于内部管理，您的客户端可以使用此配置，他们不需要访问 Sql Server。

> DataCacheFactory 工厂 = new DataCacheFactory();

此代码将尝试在配置中加载默认数据缓存客户端。在您的情况下，它应该是空的，这就是您收到此错误的原因。

您仍然可以使用代码以这种方式配置缓存主机。

```
// Declare array for cache host(s).
DataCacheServerEndpoint[] servers = new DataCacheServerEndpoint[1];
servers[0] = new DataCacheServerEndpoint("CacheServer1", 22233);
DataCacheFactoryConfiguration factoryConfig = new DataCacheFactoryConfiguration();
factoryConfig.Servers = servers;
DataCacheFactory mycacheFactory = new DataCacheFactory(factoryConfig);
DataCache myDefaultCache = mycacheFactory.GetCache("NamedCache1"); 
```

您无需在此处指定所有主机名，因为 AppFabric 缓存会将请求路由到正确的缓存主机，如果它不在您的列表中。

# tfs - 在 iOS 项目中使用 Git-tf

> ID：15783378
> 
> 赞同：0
> 
> 时间：2013-04-03T09:19:40.937
> 
> 标签：tfs, git-tfs, git-tf

我想使用 TFS 作为版本控制来开发我们的一个 iPad 应用程序。我按照[这篇文章](http://www.hhogdev.com/~/link.aspx?_id=184AF49EFD1C412EB9C010D694FF9562&_z=z)来配置我的 Xcode 项目。

完成博客中提到的所有步骤后，我能够完成`checkin`整个`checkout`项目。但我无法将更改的文件推送回 TFS 服务器。此外，我在执行`git push`命令时收到以下错误

```
fatal:
https://username@mydomain:8080/tfsprod/info/refs?service=git-receive-pack
not found: did you run git update-server-info on the server? 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T01:17:26.510

只需将评论移入答案即可。

你不能使用`git push`. 您需要使用`git tf checkin`或`git tf checkin --deep`（如果您想在每个 git 提交中签入）。

参考文档在`git tf checkin` [这里](http://gittf.codeplex.com/wikipage?title=Checkin)

# jqgrid - JQGrid - 标题和列不对齐

> ID：15783379
> 
> 赞同：2
> 
> 时间：2013-04-03T09:19:41.367
> 
> 标签：jqgrid

希望有人能指出我正确的方向..

我有时会面临这个问题。！

[http://imgur.com/j8S9ft5](https://imgur.com/j8S9ft5)

我尝试了一些从 stackoverflow 中找到的解决方案

例如[jqGrid 列未与列标题对齐](https://stackoverflow.com/questions/4090255/jqgrid-column-not-aligned-with-column-headers)

和其他来源，但没有解决我的问题。这个问题只有在升级到 Chrome 19 及更高版本（我认为！）和 safari 6 后才会出现。我注意到在使用 safari 5 的第二台计算机上查看时以及重新安装 Chrome 版本 18 时没有问题。

我尝试通过从 trirand.net 下载来更新一些 js 和 css 文件，但没有解决方案。

目前我正在运行 Safari 版本 6.0.1 (8536.26.14) 和 Chrome 版本 26.0.1410.43。

谢谢

**更新 2：**更新到 4.4.5 图像[http://imgur.com/NlY786x](https://imgur.com/NlY786x)后 我忘了提到这只有在我集成到灯箱（脸箱）中时才会发生

**更新 3：** @Oleg 我只是在更新到 4.4.5 后才意识到，或者只是粘贴你的代码（在评论中）我不能再使用我的自定义按钮了（工作 b4）.. 什么都没有发生。

我正在使用 javascript 和 php jqgrid，下面是我的代码：

```
<div align="center" id="grido"> </div>  
<script type="text/javascript">
 //var lastSel;
$(document).ready(function(){ 
//  $('#grido').load('form/housekeeping/dun_grid.php');
});
</script>

<script type="text/javascript">
<!-- dun_grid.js  --> 

jQuery(document).ready(function(){

  var lastSel;

 jQuery("#dun_grid").jqGrid({
  url:'form/housekeeping/dun_griddata.php',
  datatype: "json",
  colNames:['DUN ID','DUN Code', 'DUN Name'],    
  colModel:[
      {name:'int_dunid',index:'int_dunid', hidden:true, align:"center", width:50},
      {name:'txt_dcode',index:'txt_dcode', editable:true, align:"center", width:150},
      {name:'txt_dname',index:'txt_dname', editable:true, align:"center", width:150},

          ],
  pager: '#pagerdun', //pagination enable
  rowNum:15,
  rowList:[10,20,30],
  width:430,
  height:'auto',
  sortname: 'txt_dcode',
  sortorder: 'asc',
  hidegrid: false,  //show/hide  grid button on caption header

  viewrecords: true, //display the number of total records
  editurl:"form/housekeeping/dun.php?mode=edit",
  loadtext: "Loading Data, Please Wait...",
  rownumbers:true, // add row numbers on left side
  caption: '&nbsp; DUN List',

 ondblClickRow: function(id){
     if(id && id!==lastSel){ 
       jQuery('#dun_grid').restoreRow(lastSel); 
       lastSel=id; 
    } 
    jQuery('#dun_grid').editRow(id, true, "", refreshing); 
 },

  onSelectRow: function(id){ 
    if(id && id!==lastSel){ 
       jQuery('#dun_grid').restoreRow(lastSel); 
       lastSel=id; 
    }  
 },  

}); /* end of jqgrid */

    jQuery("#dun_grid").jqGrid('navGrid','#pagerdun',{edit:false, add:false, view:false, del:true, search:true}, 
      {}, // edit
      {}, // add
      {url: 'form/housekeeping/dun.php?mode=delete'},  // delete
      {multipleSearch : true},
      {closeOnEscape:true} 
      );  //end on navgrid

    jQuery("#dun_grid").jqGrid('navButtonAdd','#pagerdun',{caption:"", buttonicon :'ui-icon-plus', 

        onClickButton:function(id){
          jQuery('#dun_grid').restoreRow(lastSel);

              var datarow = {txt_dname:""};
              jQuery("#dun_grid").addRowData("0",datarow,"first");
              jQuery('#dun_grid').editRow("0", true, "", tiesto);
              lastSel=id;
          },//end of onClickButton
        title:"New Record", 
        position:"last"
        }); //end of custom button

function refreshing(id){ /* refresh grid */
    jQuery('#dun_grid').trigger("reloadGrid");
    $.blockUI({ message:"Saving Data!!"}); 
        setTimeout($.unblockUI, 700); 
    } 

function tiesto(){
    jQuery('#dun_grid').restoreRow(lastSel);
   jQuery('#dun_grid').trigger("reloadGrid");
    $.blockUI({ message:"New Data Saved!!"}); 
        setTimeout($.unblockUI, 700); 
    } 

});  /*end of document ready*/
</script>

<div align="center" class="gridpanel" >   
<!--------------------------- ## grid for add/edit ## ------------------------------------------>
   <table id="dun_grid" class="scroll" cellpadding="0" cellspacing="0"></table>
  <!-- pager definition -->
  <div id="pagerdun" class="scroll" style="text-align:center;"></div>

 </div> <!----------------------- grid panel end --------------------------------------> 
```

PHP

```
<?php 
 ini_set("display_errors","1"); 
require_once('../../Connections/jq-config.php');

// include the jqGrid Class 
require_once  "../../phpgrid/php/jqGrid.php";
// include the driver class
require_once "../../phpgrid/php/jqGridPdo.php";
// Connection to the server 
$conn = new PDO(DB_DSN,DB_USER,DB_PASSWORD); 
 // Tell the db that we use utf-8 
$conn->query("SET NAMES utf8"); 

// Create the jqGrid instance 
$grid = new jqGridRender($conn); 
$grid->SelectCommand = 'SELECT int_bankid, txt_bank_code , txt_bank_name, txt_bank_address FROM tbl_bank'; 

// set the ouput format to json 
$grid->dataType = 'json'; 
$grid->table ="tbl_bank"; 
$grid->setPrimaryKeyId("int_bankid"); 

$grid->setColModel(); 
$grid->setUrl('form/housekeeping/bank_grid.php'); 
$grid->setGridOptions(array("editurl"=>"form/housekeeping/bank.php?mode=edit"));

// Set grid option
$grid->setGridOptions(array( 
    "caption"=>"&nbsp; List of Banks", 
    "rownumbers"=>true,
    "rowNum"=>10, 
    "rowList"=>array(10,20,50), 
    "sortname"=>"txt_bank_code", 
    "hoverrows"=>true,
    "hidegrid"=>false, 
    "height"=>'auto', 
    "width"=>460, 
        "sortorder"=>'desc', 
    "loadtext" => "meloading data...",
    "cmTemplate"=>array("searchoptions"=>array("sopt"=>array('eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc')))
    )); 

// Change some property of the field(s) 
$grid->setColProperty("int_bankid", array("label"=>"ID", "width"=>50, "align"=>"center", "hidden"=>true)); 
$grid->setColProperty("txt_bank_code", array("label"=>"Code", "width"=>60, "align"=>"center", "editrules"=>array("required"=>true))); 
$grid->setColProperty("txt_bank_name", array("label"=>"Name", "width"=>130, "align"=>"center", "editrules"=>array("required"=>true))); 
$grid->setColProperty("txt_bank_address", array("label"=>"Address", "width"=>200, "align"=>"center")); 

// enable navbutton 
$grid->navigator = true; 

    $grid->setNavOptions('navigator', array("pdf"=>false,"excel"=>false,"add"=>false,"edit"=>false,"del"=>true,"view"=>false )); 
    $grid->setNavOptions('del',array("url"=>"form/housekeeping/bank.php?mode=delete")); 

// jscript for adding new row       
 $reloading = <<<RELOAD
 function(id)
  {
     jQuery("#grid").trigger('reloadGrid');
  }
RELOAD;

 $mycode = <<<NEWBUTTON
 function(id)
  {
    jQuery("#grid").jqGrid('restoreRow',lastSel);
    jQuery("#grid").jqGrid('addRowData',"0",{txt_bank_code:''},"first");
    jQuery("#grid").jqGrid('editRow', "0", true,'',$reloading); 
    lastSel=id;
  }
NEWBUTTON;

//jscript for inline editing    
$editrow = <<<DOUBLECLICK
  function(rowid)
  {
      if (rowid && rowid !== lastSel) {
          jQuery("#grid").jqGrid('restoreRow', lastSel); 
          lastSel = rowid; 
      } 
         jQuery("#grid").jqGrid('editRow', rowid, true,'',$reloading); 
  }
DOUBLECLICK;

//custom button setting for adding new row
$buttonoptions = array("#pager", array("caption"=>"", 'buttonicon' =>'ui-icon-circle-plus', "onClickButton"=> "js:".$mycode));

// inserting custom button
$grid->setGridEvent('ondblClickRow', $editrow);
$grid->callGridMethod("#grid", "navButtonAdd", $buttonoptions);
$grid->renderGrid('#grid','#pager',true, null, null, true,true); 
$conn = null; 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T16:59:39.680

我遇到了同样的问题，并且能够通过调整 CSS 来解决它。我已经设置`padding`了`th`导致问题的原因。

您`th`的继承`padding`可能会破坏对齐方式。

如果 上的填充`th`与网格单元格不同（尤其是`padding-left`和`right`），它将破坏对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:52:11.793

尝试将属性设置`shrinkToFit`为`true`;

```
shrinkToFit : true, 
```

如[维基中给出的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)

> 如果设置此选项，则定义应如何重新计算网格列的宽度，同时考虑到网格的宽度。如果此值为真，并且列的宽度也已设置，则每列都按其宽度成比例缩放。例如，如果我们定义了宽度为 80 和 120 像素的两列，但希望网格的宽度为 300 像素，那么这些列将拉伸以适应整个网格，并且分配给它们的额外宽度将取决于宽度列本身和可用的额外宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T22:12:15.730

将此代码添加到`gridComplete`网格的事件中。不要忘记`gridName`用你的网格替换`id`：

```
var objHeader = $("table[aria-labelledby=gbox_" + gridName+ "] tr[role=rowheader] th");

for (var i = 0; i < objHeader.length; i++) {
   var col = $("table[id=" + gridName+ "] td[aria-describedby=" + objHeader[i].id + "]");
   var width= col.outerWidth();
   $(objHeader[i]).css("width", width);
} 
```

适用于 v.4.6.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T09:18:34.890

我的情况

1.  jqgrid 版本 4.6.0

2.  网格中的组标题

3.  shrinkTofit 不起作用

4.  我在 gridComplete 事件中调用了以下函数

    函数 alignColumnsWithHeadersGENEL(gridName) {

    ```
     var objHeaders = $("table[aria-labelledby=gbox_" + gridName + "] tr[class=jqg-first-row-header] th");
     var objColumns = $("table[id=" + gridName + "] tr[class=jqgfirstrow] td");
     for (var i = 0; i < objHeaders.length; i++) {
         objHeaders[i].style.width = objColumns[i].style.width;
     } 
    ```

    }

5.  为我的网格生成的 HTML 的结构类似于以下内容（删除不必要的填充）

6.  不知何故，标题和列的宽度之间存在差异

# c++ - c ++程序将数字转换为单词不起作用

> ID：15783380
> 
> 赞同：1
> 
> 时间：2013-04-03T09:19:41.500
> 
> 标签：c++, ostream

这是一个用 c++ 编写的程序，从这个[写代码将给定的数字转换为单词（例如 1234 作为输入应该输出一千二百三十四）](https://stackoverflow.com/questions/12284768/write-code-to-convert-given-number-into-words-eg-1234-as-input-should-output-on)问题我修改为将数字转换为单词。

在我的程序中，我没有重复使用 cout，而是创建了一个 ostream 对象并将返回值放入 out。

这是程序

```
#include<iostream>
using namespace std;
ostream & expand(int);
int main()
{
    int num;
    cin>>num;

   cout<<expand(num);
}
ostream & expand(int value)
{
ostream   &out;
out<<"";
    const char * const ones[21] = {"zero", "one", "two", "three","four","five","six","seven",
    "eight","nine","ten", "eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen",
    "eighteen","nineteen"};
    const char * const tens[10] = {"", "ten", "twenty", "thirty","forty","fifty","sixty","seventy",
    "eighty","ninety"};

    if(value<0)
    {
        out<<"minus "<<expand(-value);

    }
else if(value>=1000000){
out<<expand(value/1000000)<<" million";
if(value % 1000000)
{
out<<" "<<expand(value % 1000000);
}

}
    else if(value>=1000)
    {
        out<<expand(value/1000)<<" thousand";

        if(value % 1000)
        {
            if(value % 1000 < 100)
            {
                out << " and";
            }
            out << "  " <<expand(value % 1000);
        }
    }
    else if(value >= 100)
    {
        out<<expand(value / 100)<<" hundred";

        if(value % 100)
        {
            out << " and "<<expand (value % 100);
        }
    }
    else if(value >= 20)
    {
        out << tens[value / 10];
        if(value % 10)
        {
            out << " " << expand(value % 10);
        }
    }
    else
    {
        out << ones[value];
    }
    return &out;
} 
```

但是，编译时出现以下错误。

```
In function 'std::ostream& expand(int)':
Line 13: error: 'out' declared as reference but not initialized
compilation terminated due to -Wfatal-errors. 
```

请帮我。

我尝试设置`ostream &out=cout;`和最后`return out`。但我得到以下结果`cout<<expand(111234)`。

`one0x8050884 hundredeleven and 0x80508840x8050884 thousandtwo0x8050884 hundredthirtyfour 0x8050884 and 0x8050884 0x80508840x8050884`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T09:21:48.940

问题在这里：

```
ostream   &out; 
```

正如编译器告诉你的，**引用必须被初始化**。它们不能是默认构造的。根据 C++11 标准的第 8.3.5/1 段：

> 声明为 T& 或 T&& 的变量，即“对 T 类型的引用”（8.3.2），**应由 T 类型的对象或函数或可转换为 T 的对象初始化**。

如果您打算绑定`out`到标准输出，那么您可以这样做：

```
ostream& out = std::cout; 
```

或者，您可以`out`为函数创建一个参数，`std::cout`默认绑定到：

```
ostream& expand(int value, ostream& out = std::cout)
{
    out << "";
    // ...
} 
```

这样，客户端可以调用`expand()`并让它输出到指定的流（例如 an`std::ostringstream`或 an `std::ofstream`），如果没有指定流，则输出到标准输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:21:23.240

```
ostream   &out; // Error 
```

`out`您必须通过对象进行初始化。因为引用总是必须引用某些东西。

```
ostream   &out = cout; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:22:37.800

如果你想像这样链接输出，你应该使用安迪的答案中给出的方法。目前，系统正在尝试将您的 ostream 指针作为值输出，它无法正确链接，因为您没有将流作为输入参数提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-30T14:44:41.540

```
#include<stdio.h>
#include<conio.h>

void two_dgt(int);
void three_dgt(int);   //Function Declarations
void four_dgt(int);
long int num,hd_place,th_place;
char single[10][6] = {"","one","two","three","four",
        "five","six","seven","eight","nine"};

char tens_multi[10][8] = {"","ten","twenty","thirty","forty",
        "fifty","sixty","seventy","eighty","ninety"};

char dual[10][10] = {"ten","eleven","twelve","thirteen","fourteen",
         "fifteen","sixteen","seventeen","eighteen","nineteen"};

void main()
{
   clrscr();
   printf("Enter the number upto 5 digits: ");
   scanf("%ld",&num);
   if(num == 0)
     printf("Zero");
   else
   {
       clrscr();
       printf("\n\nEntered number: %ld",num);
       printf("\nIn words:       ");
       if(num < 10)
          printf("%s",single[num]); //use to print single digit number
       else if(num < 100)
          two_dgt(num);          //call a function to print two digits
       else if(num < 1000)
          three_dgt(num);      //call a function to print three digits
       else if(num < 10000)
          four_dgt(num);        //call a function to print four digits
       else if(num < 100000)
       {
          th_place = num/1000;
          two_dgt(th_place);
          printf(" thousand ");
          num = num - (th_place*1000);
          hd_place = num/100;
          if(hd_place == 0)
              two_dgt(num);
          else
              three_dgt(num);
       }
       else if(num > 99999)
       {
          clrscr();
          printf("\nError: number range should be upto 5 digits");
        }     
    }
    getch(); 
```

}

```
void two_dgt(int num)
{
if(num%10 == 0)
  printf("%s",tens_multi[num/10]);
else
{
  if(num/10 == 1)
     printf("%s",dual[num%10]);
  else
     printf("%s %s",tens_multi[num/10],single[num%10]);
}
}

void three_dgt(int num)
{
 hd_place = num/100;
 printf("%s hundred ",single[hd_place]);
 num = num - (hd_place*100);
 two_dgt(num);
}

void four_dgt(int num)
{
  th_place = num/1000;
  printf("%s thousand ",single[th_place]);
  num = num - (th_place*1000);
  hd_place = num/100;
  if(hd_place == 0)
     two_dgt(num);
  else
     three_dgt(num);
 } 
```

# python - MapReduce 输出不是预期的完整集？

> ID：15783381
> 
> 赞同：0
> 
> 时间：2013-04-03T09:19:43.047
> 
> 标签：python, hadoop, mapreduce, streaming, lzo

我在 python 中的单个 hadoop 伪分布式节点上运行流式 hadoop 作业，还使用 ​​hadoop-lzo 在 .lzo 压缩输入文件上生成拆分。

使用小型压缩或未压缩测试数据集时，一切都按预期工作；MapReduce 输出与简单的 'cat | 地图 | 排序 | 减少'Unix中的管道。- 输入是否被压缩。

但是，一旦我开始处理单个大型 .lzo（预索引）数据集（压缩约 40GB）并将作业拆分为多个映射器，输出看起来会被截断 - 只有前几个键值存在。

代码 + 输出如下 - 如您所见，这是测试整个过程的非常简单的计数。

来自测试数据（大型数据集的子集）的直接 unix 管道的输出；

```
lzop -cd objectdata_input.lzo | ./objectdata_map.py | sort | ./objectdata_red.py

3656  3
3671  3
51    6 
```

hadoop 作业对测试数据的输出（与上述相同的测试数据）

```
hadoop jar $HADOOP_INSTALL/contrib/streaming/hadoop-streaming-*.jar -input objectdata_input.lzo -inputformat com.hadoop.mapred.DeprecatedLzoTextInputFormat -output retention_counts -mapper objectdata_map.py -reducer objectdata_red.py -file /home/bob/python-dev/objectdata_map.py -file /home/bob/python-dev/objectdata_red.py

3656  3
3671  3
51    6 
```

现在，测试数据是来自真实数据集的一小部分行，所以我至少希望在针对完整数据集运行作业时在结果输出中看到上面的键。但是，我得到的是；

```
hadoop jar $HADOOP_INSTALL/contrib/streaming/hadoop-streaming-*.jar -input objectdata_input_full.lzo -inputformat com.hadoop.mapred.DeprecatedLzoTextInputFormat -output retention_counts -mapper objectdata_map.py -reducer objectdata_red.py -file /home/bob/python-dev/objectdata_map.py -file /home/bob/python-dev/objectdata_red.py

1       40475582
12      48874
14      8929777
15      219984
16      161340
17      793211
18      78862
19      47561
2       14279960
20      56399
21      3360
22      944639
23      1384073
24      956886
25      9667
26      51542
27      2796
28      336767
29      840
3       3874316
30      1776
33      1448
34      12144
35      1872
36      1919
37      2035
38      291
39      422
4       539750
40      1820
41      1627
42      97678
43      67581
44      11009
45      938
46      849
47      375
48      876
49      671
5       262848
50      5674
51      90
6       6459687
7       4711612
8       20505097
9       135592 
```

...根据数据集，键的数量比我预期的要少得多。

我不太担心密钥本身 - 考虑到输入数据集，可以预期这个集合，我更担心应该有更多的密钥，以千计。当我在 unix 管道中针对数据集中的前 2500 万条记录运行代码时，我得到的密钥范围约为 1 - 7000。

所以，这个输出似乎只是我实际期望的前几行，我不知道为什么。我错过了整理许多 part-0000# 文件吗？或类似的东西？这只是我在家里测试的一个单节点伪分布式hadoop，所以如果有更多的part-#文件要收集，我不知道它们可能在哪里；它们不会出现在 HDFS 的保留计数目录中。

mapper 和 reducer 代码如下 - 与许多字数示例一样有效；

objectdata_map.py

```
#!/usr/bin/env python

import sys
RETENTION_DAYS=(8321, 8335)

for line in sys.stdin:
        line=line.strip()
        try:
                retention_days=int(line[RETENTION_DAYS[0]:RETENTION_DAYS[1]])
                print "%s\t%s" % (retention_days,1)
        except:
                continue 
```

objectdata_red.py

```
#!/usr/bin/env python                                                                                                                                    

import sys                                                                                                                                               
last_key=None
key_count=0
for line in sys.stdin:
        key=line.split('\t')[0]
        if last_key and last_key!=key:
                print "%s\t%s" % (last_key,key_count)
                key_count=1
        else:
                key_count+=1

        last_key=key

print "%s\t%s" % (last_key,key_count) 
```

这一切都在手动安装的 hadoop 1.1.2 上，伪分布式模式，从构建和安装 hadoop-lzo

[https://github.com/kevinweil/hadoop-lzo](https://github.com/kevinweil/hadoop-lzo)

# c# - 将所有 C# 类分组为 1 个类的最佳方法

> ID：15783385
> 
> 赞同：-3
> 
> 时间：2013-04-03T09:19:53.913
> 
> 标签：c#, asp.net

将所有课程归为一类的最佳方法是什么，并且访问这 1 个类可以让您访问所有其他类，所以这个

```
using Student.Classes.TextFileHandler;
using Student.Scripts.Constants;
using Student.Classes.Common;
using Student.Classes.Enum; 
```

都会在 1 个班级，比如说普通班级，当我访问普通班级时，我可以访问所有其他班级

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:28:15.517

最好的方法是不要在这里也不要误会我。你必须看到不应该这样布置课程。每个责任一节课。这对您和任何阅读/维护代码的人来说都很容易。您当然可以使用构图，但不能使用您尝试的方式，这只是我的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:31:17.780

你为什么不只是实现一个`Controller`类。在这个类中，您将初始化其他类，然后提供属性或函数来访问这些类的实例（甚至静态函数/变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:22:32.927

您可以在类中创建类：

```
 class Student
 {
     class Classes
     {
         class TextFileHandler
         {
             public void MethodInTextFileHandler() {}
             ...
         }
         class Common
         {
             public void MethodInCommon() {}
             ...
         }
         public void MethodInClasses() {}
         ...
     }
     ...
 } 
```

但正如其他人之前提到的：你不应该这样做。这可能会让读者非常困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:24:24.767

改用命名空间。

```
namespace Student.Classes
{
   class TextFileHandler
   {
      ...
   }
   class Common
   {
      ...
   }
   class Enum
   {
      ...
   }

} 
```

您还可以在不同的文件中拥有多个类，但在同一个命名空间中

# c++ - C/C++ 中 HTML 内容的实时 URI 翻译

> ID：15783389
> 
> 赞同：0
> 
> 时间：2013-04-03T09:20:05.867
> 
> 标签：c++, regex, code-translation

为了开发自定义反向代理（用 C++ 编写），我想对 HTML 内容中的 URI 进行实时翻译。例如，如果我想访问`http://myserver/`using上的资源`http://my-reverse-proxy/myserver`，则所有绝对链接和顶级链接都喜欢`http://myserver/somecontent1.ext`或`/somecontent2.ext`需要修改。

一个 HTML 标签

```
<img src="/sample.png"> 
```

因此将被翻译为

```
<img src="/myserver/sample.png"> 
```

从我的角度来看，有一些方法：

1）使用正则表达式和字符串替换来查找所有相关的HTML标签及其使用捕获组的路径并进行一些字符串替换。

2) 解析整个 HTML 内容，对解析树进行一些转换，并将结果漂亮地打印回有效的 HTML 资源。

这就是这个问题的全部内容：您是否有任何经验，哪种解决方案可能更快，甚至更合理？你知道我可以用来不重新发明轮子的框架吗？由于此过程稍后也应用于基于 CSS 和 XML 的资源，因此它不应该是依赖于 HTML 的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:54:41.973

代理服务器通常作为*服务器*工作。它们处理所有 HTTP 请求，修改请求的 URL，然后将修改后的请求传递给另一端的服务器。

你应该坚持这个范式。这比处理文件本身要容易和高效得多。任何实时完成的事情都可以在请求时完成。

另外，可能应该问：为什么要*自定义*反向代理？这样的事情已经存在。

# javascript - 拖放库。拖动开始事件

> ID：15783414
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:02.537
> 
> 标签：javascript, jquery, drag-and-drop, jquery-ui-draggable, redips.drag

我正在制作一个国际象棋游戏，我必须在 Drag-Start 事件上放置一个处理程序。我目前正在使用 Redips 库进行拖放，但它似乎没有 Drag-Start 事件调度程序。我也尝试过支持拖动的 JQuery UI，但我需要特定的放置位置（国际象棋方块）来模仿移动。我想突出显示“可放置”方块，以便通过 Drag-Start 处理程序进行移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:59:08.693

[此处](http://api.jqueryui.com/draggable/#event-start)`start`记录了 JQuery 的可拖动 UI的事件。

```
$( ".selector" ).draggable({
  start: function( event, ui ) { 
      //code that is to be executed when drag starts 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:49:42.463

你绝对可以用[jQuery UI draggable](http://api.jqueryui.com/draggable/)做到这一点。

查看[快照功能](http://jqueryui.com/draggable/#snap-to)。

# elasticsearch - Elasticsearch 更深层次的父子关系（孙子）

> ID：15783420
> 
> 赞同：18
> 
> 时间：2013-04-03T09:21:23.237
> 
> 标签：elasticsearch

我需要索引 3 个级别（或更多）的子父级。例如，级别可能是作者、一本书和该书中的人物。

但是，当索引超过两级时，has_child 和 has_parent 查询和过滤器会出现问题。如果我有 5 个分片，则在最低级别（字符）上运行“has_parent”查询或在第二级（书籍）上运行 has_child 查询时，我会得到大约五分之一的结果。

我的猜测是，一本书通过它的父 id 被索引到一个分片，因此将与他的父（作者）一起存在，但是一个字符被索引到一个基于书 id 的哈希的分片，这不一定符合这本书被索引的实际碎片。

因此，这意味着同一作者的书籍的所有角色不一定都位于同一个碎片中（这确实削弱了整个孩子-父母的优势）。

难道我做错了什么？我该如何解决这个问题，因为我确实需要复杂的查询，例如“作者写了哪些女性角色的书”。

我发疯了一个显示问题的要点，在： [https ://gist.github.com/eranid/5299628](https://gist.github.com/eranid/5299628)

底线是，如果我有一个映射：

```
"author" : {          
      "properties" : {
    "name" : {
      "type" : "string"
    }
      }
    },
"book" : {        
      "_parent" : {
    "type" : "author"
      },
      "properties" : {
    "title" : {
      "type" : "string"
    }
      }
    },

"character" : {       
      "_parent" : {
    "type" : "book"
      },
      "properties" : {
    "name" : {
      "type" : "string"
    }
      }
    } 
```

和 5 个分片索引，我无法使用“has_child”和“has_parent”进行查询

查询：

```
curl -XPOST 'http://localhost:9200/index1/character/_search?pretty=true' -d '{
  "query": {
    "bool": {
      "must": [
        {
          "has_parent": {
            "parent_type": "book",
            "query": {
              "match_all": {}
            }
          }
        }
      ]
    }
  }
}' 
```

只返回五分之一（大约）的字符。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T10:30:02.370

您是对的，只有当给定父级的所有子级都与父级位于同一分片中时，父/子关系才能起作用。Elasticsearch 通过使用 parent id 作为路由值来实现这一点。它在一个层面上效果很好。但是，它在第​​二个和连续级别上中断。当您有父/子/孙关系时，父母会根据他们的 id 进行路由，孩子会根据父母 id 进行路由（有效），但是孙子会根据子 id 进行路由，最终会进入错误的分片。为了在示例中进行演示，假设我们正在索引 3 个文档：

```
curl -XPUT localhost:9200/test-idx/author/Douglas-Adams -d '{...}'
curl -XPUT localhost:9200/test-idx/book/Mostly-Harmless?parent=Douglas-Adams -d '{...}'
curl -XPUT localhost:9200/test-idx/character/Arthur-Dent?parent=Mostly-Harmless -d '{...}' 
```

Elasticsearch 使用 value`Douglas-Adams`来计算文档的路由`Douglas-Adams`——这并不奇怪。对于文档`Mostly-Harmless`，Elasticsearch 看到它有 parent `Douglas-Adams`，所以它再次使用`Douglas-Adams`来计算路由，一切都很好——相同的路由值意味着相同的分片。但是对于文档`Arthur-Dent`，Elasticsearch 认为它有 parent `Mostly-Harmless`，所以它使用 value`Mostly-Harmless`作为路由，结果文档`Arthur-Dent`最终进入了错误的分片。

解决方案是明确指定孙辈的路由值等于祖父母的 id：

```
curl -XPUT localhost:9200/test-idx/author/Douglas-Adams -d '{...}'
curl -XPUT localhost:9200/test-idx/book/Mostly-Harmless?parent=Douglas-Adams -d '{...}'
curl -XPUT localhost:9200/test-idx/character/Arthur-Dent?parent=Mostly-Harmless&routing=Douglas-Adams -d '{...}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T00:05:31.090

对于祖父文档，您需要获取 _id 作为 _routing。对于父亲文档，只需使用 _parent (grandpa._id) 作为 _routing。对于子文档，只需使用 grandpa._id 作为 _routing。

# javascript - 简单的 JavaScript 日期选择器错误？

> ID：15783421
> 
> 赞同：3
> 
> 时间：2013-04-03T09:21:25.017
> 
> 标签：javascript, jquery

我正在使用 jQuery datepicker，我正在使用这段代码......

```
<script>
    $(function() {
      $("#datepicker").datepicker();
      //$("#datepicker2").datepicker();
    });
</script> 
```

...在我的页面的标题。同时，对于 PHP，我想无限次地调用它。

但是如果只有一个，我不能使用这个函数来放置“datepicker”一次：`$("#datepicker").datepicker();`在函数上。

如何无限次调用此函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:22:48.083

叫个班..

```
$(".datepicker").datepicker(); 
```

并且您可以无限次调用..只是您的所有输入都应该具有类 datepicker

例子

```
<input name="test1" class="datepicker" />
<input name="test2" class="datepicker" />
....... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:24:43.920

ID 是唯一的。

在你的 html 和 jQuery 上切换你的`#datepicker`for 。`.datepicker`

# java - Java - 使用多点触控

> ID：15783424
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:26.813
> 
> 标签：java, multi-touch

我想用 Java 为我的敞篷车开发一个多点触控应用程序。

我只能找到 MT4j (MultiTouch 4 Java) 框架，但我想自己开发多点触控结构。

MT4j 不使用或不需要任何本机库，所以它必须是可能的：我如何通过使用普通的旧 Java 来使用 MultiTouch？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:43:59.477

多点触控在 AWT/Swing 中不可用，但在[JavaFX 2.2中支持](http://docs.oracle.com/javafx/2/events/gestures.htm#CHDDHFJJ)

据我了解，MT4j 库**确实**使用了本机库（请参阅下载中的 .dll 和 .so 文件）。

# ios - iOS 应用 Facebook 集成 - iOS 5.0 的后备

> ID：15783425
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:32.093
> 
> 标签：ios, objective-c, facebook, ios6

我正在为我的 iOS 应用程序使用本机 Facebook 集成，它运行良好，但我的目标是 iOS 5.0 及更高版本。Facebook API 仅在 iOS 6.0+ 中可用，所以我的问题是如何“删除”旧 iOS 版本的 Facebook 集成？现在，当我构建时，我得到了这个：

`dyld: Library not loaded: /System/Library/Frameworks/AdSupport.framework/AdSupport Referenced from: /Users/me/Library/Application Support/iPhone Simulator/5.0/Applications/96919EDB-C9E9-4862-ABA2-67ABAFAFB9BE/Tlipo.app/Tlipo Reason: image not found`

我只想为 iOS 6+ 用户保留 FB 集成，所以我只想从 iOS 5 设备中删除它。如何删除库以使我的应用程序不会在 iOS 5 中崩溃？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:56:00.993

1.  单击 Xcode 项目。
2.  转到构建阶段
3.  展开“将二进制文件与库链接”
4.  对于 (1)Social.framework(2)Account.framework(3)AdSupport.framework 选择**Optional**（在最右侧，默认情况下，它们将选中**Required**）

*按照上述步骤，您告诉您的应用程序仅在可用时加载那些框架（适用于 iOS 6.0 及更高版本）*

按照上述步骤操作后，它应该如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/mMMvU.png)

很可能您的问题将得到解决。

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:13:37.120

我建议您使用 Facebook 的 SDK 而不是 Apple 的 SDK。Facebook 的官方 SDK 也支持 iOS 5.0，而且非常易于使用。看看[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

# php - 为 DDNS 地址启用错误报告

> ID：15783428
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:35.227
> 
> 标签：php, apache, mod-rewrite

我正在寻找一种仅为我自己的 IP 启用 php 错误报告的方法。我的 IP 发生了变化，但我有一个指向我的实际 IP 的 DDNS（动态 DNS）地址。此解决方案不适用于生产用途。我只想能够调试远程服务器而不向互联网上的每个人提供错误。

想法是使用某种`<If...>`指令来检查 IP 是否是我的 DDNS IP 或使用`RewriteRule`. 对于`RewriteRules`我需要输入一个真实的 IP 并且没有 DDNS 域。域的反向查找也会失败，因为我无法控制 rDNS。

有什么想法我可以尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:22:33.230

为什么不在 PHP 中？

```
if($_SERVER['REMOTE_ADDR'] = 'your ip') {
    ini_set('display_errors', 1);
    error_reporting(E_ALL);
} 
```

**编辑：** 如果您想对附加到该 IP 地址的主机名执行某些操作，只需在 if 语句中添加[gethostbyaddr()](http://php.net/manual/en/function.gethostbyaddr.php)或[gethostbyname()即可。](http://php.net/manual/en/function.gethostbyname.php)（您要使用哪一个取决于您是要检查 IP 还是主机名）

```
if(gethostbyaddr($_SERVER['REMOTE_ADDR']) == 'my hostname') { .. same code } 
```

# javascript - 是否可以在更短的时间内绘制如下图的 HTML5 Canvas？

> ID：15783429
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:37.150
> 
> 标签：javascript, internet-explorer, canvas, coffeescript

[![スクリーンショット 2013-04-03 18.08.17](https://farm9.staticflickr.com/8265/8615142663_36ec0351a4.jpg)](http://www.flickr.com/photos/weed_77777/8615142663/ "スクリーンショット 2013-04-03 18.08.17 by weed_7777, on Flickr")

我想绘制**电场混合图**，但下面的代码在谷歌 Chrome 浏览器中需要 4 秒。

我想在朋友物理老师的课上用这个图，但是他学校的机房里**只有IE8的机器。**

我想让学生**自由放点收费**，看图。

是否可以在更短的时间内绘制下图**？**

```
canvas = $('canvas')[0]
context = canvas.getContext "2d"
height = canvas.height
width = canvas.width

imagedata = context.createImageData 1, 1
imagedata.width = 1
imagedata.height = 1
imagedata.data[0] = 0
imagedata.data[1] = 0
imagedata.data[2] = 0
imagedata.data[3] = 256

for w in [0...width]
  for h in [0...height]
    C = 150
    r1 = Math.sqrt(Math.pow(200 - w, 2) + Math.pow(240 - h, 2))
    v1 = C / r1 # * Math.pow 1.001, -r
    r2 = Math.sqrt(Math.pow(500 - w, 2) + Math.pow(240 - h, 2))
    v2 = C / 2 / r2 # * Math.pow 1.001, -r
    v = v1 + v2
    if 5 < v and v < 6
      context.putImageData imagedata, w, h
    else if 3 < v and v < 4
      context.putImageData imagedata, w, h
    else if 1 < v and v < 2
      context.putImageData imagedata, w, h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:59:27.710

你可能想使用一个设计来做这种事情的库。

我会看看[http://www.nickdiakopoulos.com/2012/05/14/visualization-performance-in-the-browser/](http://www.nickdiakopoulos.com/2012/05/14/visualization-performance-in-the-browser/)

这是一篇关于渲染此类事物的不同选项以及 svg 和画布之间的性能权衡的非常好的文章。

# java - 在 Android 中为慢速网络调用 httpClient.execute 时应用程序崩溃

> ID：15783430
> 
> 赞同：0
> 
> 时间：2013-04-03T09:21:46.047
> 
> 标签：java, android, http

我正在使用这种方法检查网络状态：

```
public boolean hasConnection() {
    ConnectivityManager cm = (ConnectivityManager) SigninActivity.this
            .getBaseContext()
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo wifiNetwork = cm
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    if (wifiNetwork != null && wifiNetwork.isConnected()) {
        return true;
    }

    NetworkInfo mobileNetwork = cm
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    if (mobileNetwork != null && mobileNetwork.isConnected()) {
        return true;
    }

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {
        return true;
    }

    return false;
} 
```

然后使用此类为 json 调用 web 服务：

```
 public class JSONParser {

InputStream is = null;
JSONObject jObj = null;
String json = "";
HttpClient httpClient;

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try { // defaultHttpClient DefaultHttpClient
        httpClient = new DefaultHttpClient();

        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        reader.close();
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
    } 
```

但是该应用程序在非常慢的网络下崩溃，在正常情况下工作得很好。有人能提出更好的方法来避免强制关闭吗？

“我从 AsyncTask 类的 doInBackground 方法中调用了这个类。 **提前致谢**

# c++ - 变量在 Cocos2d-x for Blackberry 中失去其价值

> ID：15783433
> 
> 赞同：1
> 
> 时间：2013-04-03T09:21:55.083
> 
> 标签：c++, cocos2d-x

我在 Blackberry Playbook 上使用 Cocos2d-x。我试图将 jpeg 在屏幕上居中，但我用来获取屏幕大小的变量最终为 0。即使我可以在 jpeg 加载和定位之前确认它是非零的。我的 init 函数中的代码如下：

```
bool MyScene::init() {

    if ( !CCLayer::init() ) {
        return false;
    }

    CCSize size = CCDirector::sharedDirector()->getWinSize();

    bg = CCSprite::create("2.jpg");
    bg->setPosition(ccp( size.width/2 , size.height/2 ));
    this->addChild(bg); 

    fg = CCSprite::create("hud2.png");
    fg->setPosition(ccp( size.width/2 , 25 ));
    this->addChild(fg);

    fg2 = CCSprite::create("hud.png");
    fg2->setPosition(ccp( size.width/2 , size.height - 30 ));
    this->addChild(fg2);

    std::stringstream stream;
    stream << "size is " << (size.width/2) << "and " (size.height/2);
    std::string outtext = stream.str();

    label = CCLabelTTF::create(outtext.c_str(), "DejaVuSansMono.ttf", 25, CCSizeMake(size.width, 25), kCCTextAlignmentCenter);
    label->setPosition(ccp( size.width/2 , 28 ));
    this->addChild(label);
} 
```

如果我运行它，标签将打印出尺寸为 0 并且 jpeg 在左下角而不是在中间居中。但是，如果我加载 png 而不是 jpeg，一切正常。更让我感到困惑的是，如果我将使用“size”值填充字符串的代码移动到设置“size”的代码下方，一切正常。如果我将该代码放在其他任何地方，或者将其完全取出，“大小”（大概）会回到 0 并且 jpeg 不会居中。这个问题只发生在黑莓上，但似乎“大小”设置正确，所以我不知道这是一个 cocos2d-x 错误。会不会有一些编译器的古怪把事情搞砸了，或者只是我错过了其他编译​​器更宽容的一些非常简单的错误？

为了进一步混淆，我有另一个应用程序，其中背景设置在一个名为 initBackground 的单独函数中，该函数从主 init 函数调用。在该应用程序中，即使我手动将位置设置为屏幕中间，背景也会定位错误。高度是正确的，但是如果我将 x 位置设置为 160，它的行为就好像我将其设置为 0 并且只显示了一半的图像。

我不介意深入研究 cocos2d-x 代码，但是任何关于从哪里开始寻找的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T02:15:22.750

我意识到这是一篇旧帖子，但我会尝试提供一些建议，以防其他人遇到类似问题。根据您的问题，我想可能会影响图像定位的一个变量是锚点值。也许由于某种原因，您的锚点设置为与图像中心 (0.5,0.5) 不同的值。

> anchorPoint 的取值范围为 0.0 到 1.0（0% 到 100%）。如果 anchorPoint 为 0.5x0.5（具有纹理的节点的默认值），则纹理以节点位置为中心。如果 anchorPoint 为 0x0，则纹理的左下角与节点的位置对齐。如果 anchorPoint 为 1x1，则纹理的右上角与节点的位置对齐。这使得 anchorPoint 在左、右、上或下对齐节点时最流行。它最常用于对齐文本标签或将屏幕元素与屏幕边框对齐。

您可以在此处了解有关 anchorPoint 的更多信息[http://www.koboldtouch.com/display/IDCAR/How+The+Anchor+Point+Works+And+What+To+Use+It+For](http://www.koboldtouch.com/display/IDCAR/How+The+Anchor+Point+Works+And+What+To+Use+It+For)

关于您的变量被重置为零，我想这些行可能存在一些问题.. `std::stringstream stream; stream << "size is " << (size.width/2) << "and " (size.height/2); std::string outtext = stream.str();`

> 块引用

我更像是一个 java 程序员，但我想应该有一种方法可以直接将 size.width 的值添加到您的标签并打印出来。

希望anchorPoint的建议有所帮助。

# iphone - 如何修复 xCode 4.5.2 中的重复符号？

> ID：15783434
> 
> 赞同：2
> 
> 时间：2013-04-03T09:21:55.517
> 
> 标签：iphone, objective-c, ipad

阅读有关此主题的 StackOverflow 上的先前帖子，我找不到正确的解决方案。

我正在编译我的项目，我收到很多重复的符号错误，例如：

```
duplicate symbol _OBJC_METACLASS_$_XMPPXFacebookPlatformAuthentication in:
    /Users/mirzahat/Library/Developer/Xcode/DerivedData/Chattar-ajtakwrcojkkiehegfaxjkhesaej/Build/Intermediates/Chattar.build/Debug-iphonesimulator/ChatProject.build/Objects-normal/i386/XMPPXFacebookPlatformAuthentication.o
    /Users/mirzahat/Desktop/Apps/Externals/Quickblox.framework/Quickblox(XMPPXFacebookPlatformAuthentication.o) 
```

我找到了链接器停止的项目的 DerivedData 文件夹，我删除了该文件夹。但是，每次我在模拟器中编译项目时都会创建它。

有什么建议么？

# javascript - 可以使用 $.getJSON 但不能使用 $.ajax 检索数据

> ID：15783439
> 
> 赞同：1
> 
> 时间：2013-04-03T09:22:03.883
> 
> 标签：javascript, jquery, ajax

我正在尝试从 cloudmade 路由 API 服务中检索数据。我可以使用带有以下代码的 $.getJSON 来做到这一点：

```
<button id="getJSON">Get JSON</button>

$(function () {

    $("#getJSON").click(function () {

        $.getJSON("http://routes.cloudmade.com/c6f2762bfe00414f822a9dec443569f5/api/0.3/51.500,0.100,51.500,0.1001/car.js?callback=?", function (data) {
            var test = data.route_geometry;
            alert(test);
        });
    });
}); 
```

另见[http://jsfiddle.net/V3qgZ/72/](http://jsfiddle.net/V3qgZ/72/)

当我尝试使用 $.ajax 执行相同的请求时，我无法检索数据，但我不确定我的错误在哪里。我想使用 $.ajax 的原因是因为 $.getJSON 是异步的，其中 $.ajax 可以设置为 'async: false'。$.ajax 请求的代码在这里：

```
<button id="getJSON">Get JSON</button>

$(function () {
$("#getJSON").click(function () {
    var url = "http://routes.cloudmade.com/c6f2762bfe00414f822a9dec443569f5/api/0.3/51.500,0.100,51.500,0.1001/car.js";
    $.ajax({
        async: false;
        dataType: "jsonp",
        url: url,
        success: function (data) {
            test = data.route_geometry;
            alert(test);
        }
    });
});
}); 
```

也在[http://jsfiddle.net/FhfVW/1/](http://jsfiddle.net/FhfVW/1/)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:24:57.620

`async: false`删除`;`和添加存在语法错误`,`

这是一个工作小提琴[http://jsfiddle.net/mayooresan/FhfVW/2/](http://jsfiddle.net/mayooresan/FhfVW/2/)

# c# - 处理线程中的线程中止异常......？

> ID：15783440
> 
> 赞同：0
> 
> 时间：2013-04-03T09:22:10.043
> 
> 标签：c#, asp.net, multithreading, thread-safety

子线程正在等待来自网络服务器的响应，并且也具有超时值。
如果超时值在从 Web 服务器获得响应之前先出现，它将继续请求超时和线程中止异常。
我们如何处理这个并登录到一个文本文件......？
**父线程**

```
 public void  Save()
 {
  List<Job> Jobs = PickJobs();

  int workerThreads = 0,compThreads = 0;
  ThreadPool.GetMinThreads(workerThreads, compThreads);

  int requiredThreads = 15;
  ThreadPool.SetMaxThreads(requiredThreads, compThreads);

  WaitCallback waitCallBack = default(WaitCallback);
  ManualResetEvent mEvent = default(ManualResetEvent);

 foreach (Job _job in Jobs) 
   {
   waitCallBack = new WaitCallback(CallBackFunc);
   mEvent = new ManualResetEvent(false);
   events.Add(mEvent);
   ThreadPool.QueueUserWorkItem(waitCallBack, new UrlData(_job, mEvent, HttpContext.Current));
   }
     WaitHandle.WaitAll(events.ToArray(), 300000);//05 Minutes
 } 
```

**子线程**

```
private void CallBackFunc(object obj)
{
     UrlData msgObj = (UrlData)obj;
   WebRequest lWebRequest = WebRequest.Create(psUrl);
   lWebRequest.Timeout = 60000;
   WebResponse lWebResponse = lWebRequest.GetResponse;

    msgObj.FinishEvent.Set();
} 
```

**用于跨线程通信的对象**

```
public class UrlData
{
public Job job;
public ManualResetEvent FinishEvent;
public HttpContext HttpContextRef;

public UrlData(Job pJob, ManualResetEvent pEvent, HttpContext pContext)
  {
      job= pJob;
      FinishEvent = pEvent;
      HttpContextRef = pContext;
  }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:02:33.130

据我了解，如果您的子线程超时，您会问如何登录到文件？

如果是这样，我相信如果在收到响应之前达到超时限制，该`GetResponse()`方法就会抛出。`WebException`因此，使用 try-catch 语句围绕您进行`GetResponse()`调用的行应该允许您将信息记录到文件中。

例子：

```
try {
    WebResponse lWebResponse = lWebRequest.GetResponse;
} catch (WebException ex) {
    // Write to file code in here
} 
```

作为`GetResponse()`抽象，`WebException`它实际上是由 的[FileWebRequest](http://msdn.microsoft.com/en-au/library/system.net.filewebrequest.getresponse.aspx)或[HttpWebRequest](http://msdn.microsoft.com/en-au/library/system.net.httpwebrequest.getresponse.aspx "Http 实际上可以抛出一些其他异常")实现抛出的`GetResponse()`。

# r - 在特定安装中使用 Rcpp::export 重命名导出函数失败

> ID：15783441
> 
> 赞同：2
> 
> 时间：2013-04-03T09:22:14.510
> 
> 标签：r, rcpp

导出具有不同名称的 Rcpp 函数在一台机器上成功，但在另一台机器上失败。R 环境非常相似。我究竟做错了什么？

## 细节

我有一个带有 Rcpp 函数的 R 包，它使用以下签名 (in `sample_int_crank.cpp`) 导出：

```
// [[Rcpp::export(sample.int.crank)]]
IntegerVector sample_int_crank(int n, int size, NumericVector prob) {
    ... 
```

此函数在相应的 R 文件 ( `sample_int_crank.R`) 中声明为空：

```
sample.int.crank <- function(n, size, prob) {
} 
```

**编辑**：当我删除这个 R 文件时，该功能可用。但是我在哪里为这个函数放置 roxygen2 注释呢？

现在，当我从 GitHub 安装包时，

```
library(devtools)
install_github('wrswoR', 'muelleki', '0.0.6') 
```

在机器**A**上它说：

```
> sample.int.crank
internal C++ function <0x29ddc40>
    signature : Rcpp::IntegerVector sample.int.crank(int, int, Rcpp::NumericVector) 
```

在机器**B**上：

```
> sample.int.crank
function(n, size, prob) {
}
<environment: namespace:wrswoR> 
```

**编辑**：如果`sample_int_crank.R`从包中删除，输出看起来不同，但在**A**和**B**上相同。这里发生了什么？

```
library(devtools)
install_github('wrswoR', 'muelleki')

> sample.int.crank
function (n, size, prob) 
{
    .Call("wrswoR_sample_int_crank", PACKAGE = "wrswoR", n, size, 
        prob)
}
<environment: namespace:wrswoR> 
```

`sessionInfo()`似乎或多或少相同，至少对于 R 和 Rcpp - **A**：

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] wrswoR_0.0.6    logging_0.7-102 Rcpp_0.10.3     devtools_0.8   

loaded via a namespace (and not attached):
 [1] digest_0.5.2    evaluate_0.4.2  httr_0.1.1      memoise_0.1    
 [5] parallel_2.15.3 plyr_1.7.1.99.2 RCurl_1.95-0    stringr_0.6.1  
 [9] tools_2.15.3    whisker_0.1 
```

**乙**：

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.utf-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.utf-8        LC_COLLATE=en_US.utf-8
 [5] LC_MONETARY=en_US.utf-8    LC_MESSAGES=en_US.utf-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.utf-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] wrswoR_0.0.6   logging_0.6-92 Rcpp_0.10.3    devtools_1.1

loaded via a namespace (and not attached):
[1] digest_0.6.3    evaluate_0.4.3  httr_0.2        memoise_0.1
[5] parallel_2.15.3 RCurl_1.95-4.1  stringr_0.6.2   tools_2.15.3
[9] whisker_0.1 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:12:05.910

关于你的问题

> 但是我在哪里为这个函数放置 roxygen2 注释呢？

我不得不让你失望的是，这里根本*不*支持 Rcpp 属性中的 roxygen(2)。也许您想为此做出贡献？

另一方面，`src/`当然支持编写普通的 C++ 函数并从普通的 R 函数调用它们，并且可以由 roxygen2 使用。

至于 devtools 对你的包做了什么：也不知道。Romain 和我自己都没有使用 devtools，因此您处于未记录和未定义的领域。

# ios - 在 cocos2d 中发布

> ID：15783443
> 
> 赞同：0
> 
> 时间：2013-04-03T09:22:18.387
> 
> 标签：ios, objective-c, cocos2d-iphone

这段代码运行良好，但有些东西我不明白。

做过

```
 //Release
 [_nextProjectile release];
 _nextProjectile =nil; 
```

在 _player 的动作之后释放并设置 _nextProjectile 为 nil？如果是这样，如果 _nextProjectile 被释放，下一个块是如何工作的？

```
_nextProjectile = [[CCSprite spriteWithFile:@"projectile2.png"] retain];
_nextProjectile.position = ccp(20, winSize.height/2);
...
[_player runAction:
 [CCSequence actions:
  [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
  [CCCallBlockN actionWithBlock:^(CCNode *node) {
     [self addChild:_nextProjectile];
     [_projectiles addObject:_nextProjectile];

     // Release
     [_nextProjectile release];
     _nextProjectile =nil;
 }],
  nil]];

// Move projectile to actual endpoint
[_nextProjectile runAction:
 [CCSequence actions:
  [CCMoveTo actionWithDuration:realMoveDuration position:realDest],
  [CCCallBlockN actionWithBlock:^(CCNode *node) {
     [_projectiles removeObject:node];
     [node removeFromParentAndCleanup:YES];
 }],
  nil]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:39:24.650

当 CCCallBlockN 被执行时（在旋转动作之后），它将被释放并设置为 nil。

然而，当这段代码被执行时，它还没有被释放，所以 [_nextProjectile runAction ...] 可以工作，因为你仍然有一个对它的引用——第一个序列甚至还没有开始。

您必须释放它的原因是因为它首先被保留，因此保留计数在某个时候下降到 0。发生这种情况时，由于 CCSprite 构造函数返回一个自动释放对象，因此最终的清除和回收内存将在主循环的下一次迭代中进行，此时自动释放池被 obj-c 运行时清理。

# winapi - 如何获得 dwm 扩展和最大化窗口的顶部框架高度？

> ID：15783445
> 
> 赞同：2
> 
> 时间：2013-04-03T09:22:23.100
> 
> 标签：winapi, user-interface, dwm

我使用 dwmextendframeintoclientarea 创建了一个窗口，一切正常，除了顶部框架高度小于我在窗口最大化时设置的值。

因此，使用 drawthemetext 绘制的文本不会完全垂直居中对齐，如下图所示。 ![正常大小](https://i.stack.imgur.com/shMU5.png)

![最大化窗口](https://i.stack.imgur.com/M0sZ5.png)

第一个是标题栏，而窗口是正常大小，而第二个窗口是最大化的。

这是因为顶部框架的高度实际上小于我在 DwmExtendFrameIntoClientArea 中设置的值。

问题是在启用 dwm 并且窗口最大化时如何获得顶部框架的实际高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T13:16:09.873

当您的应用程序最大化时，Windows 的大小实际上比屏幕略大。因此，窗口的边缘会延伸到屏幕外，从而导致您观察到的渲染。[`MINMAXINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632605%28v=vs.85%29.aspx)您可以在发送到窗口的消息中使用结构中收到的位置和大小[`WM_GETMINMAXINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632626%28v=vs.85%29.aspx)来确定窗口在屏幕外延伸的距离，并在最大化时使用它来调整渲染。

# c# - DataTable添加列不添加行？

> ID：15783449
> 
> 赞同：2
> 
> 时间：2013-04-03T09:22:32.917
> 
> 标签：c#, datatable

我需要对这个 DataTable 概念进行一些指导。我将数据存储在一个 DataTable 中，我首先添加一个如下所示的列来初始化它：

```
DataTable outputData = new DataTable();
outputData.Columns.Add("Reference/Group"); 
```

现在，如果我将其写入 CSV 文件（使用我自己的类），我会得到您所期望的，电子表格软件中的视图，例如：

```
 A
 1    Reference/Group 
```

然而，当我在脚本中继续假设第 1 行存在（通过引用`outputData.Rows[0]`）时，我得到：

```
Exception: There is no row at position 0. 
```

但是，如果我尝试添加具有上述内容的行，它会抱怨没有列。如果我指定列然后添加一行，我可以引用`Rows[0]`但到那时我有两行，如：

```
 A
 1    Reference/Group
 2    Some new row 
```

这里的正确方法是什么，这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:26:42.243

你应该使用

```
outputData.Columns[0].ColumnName 
```

代替

```
outputData.Rows[0] 
```

因为`outputData.Columns.Add("Reference/Group");`不会为您生成新行。而且您使用的是`A1`单元格的列名，而不是行数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:28:41.503

这就是说您的自定义“导出”代码在第一个 CSV 行中显示列名。它与里面的实际数据无关`DataTable`。在您插入其中任何一行之前，您的表中实际上有 0 行。

# jquery - jQuery中动态注册onClick事件导致代码重复

> ID：15783451
> 
> 赞同：0
> 
> 时间：2013-04-03T09:22:46.567
> 
> 标签：jquery

我正在构建一个动态表单

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib uri="/struts-tags" prefix="s" %>
<%@ taglib uri="/struts-dojo-tags" prefix="sx"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<html>
<head>
<script language="javascript" src="js/jquery-1.9.1.min.js"></script>
<script language="javascript" src="js/common.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Education List</title>
</head>
<body>
<s:form action="/save" method="POST">   
    <div class="educationForm">
        <c:if test="${ (not empty educations) }"> 
            <c:if test="${ fn:length(educations) ge 1 }">
                <c:forEach items="${educations}" var="edu" varStatus="status">
                    <div class="educations">                    
                        <label>Position</label><input type="text" name="educations[${ status.index }].index" value="${ educations[status.index].index }" /> <a href="" class="delete">Delete</a><br/>
                        <label>School</label><input type="text" name="educations[${ status.index }].school" value="${ educations[status.index ].school }" /><br/>
                        <label>Degree</label><input type="text" name="educations[${ status.index }].degree" value="${ educations[status.index ].degree }" /><br/>
                        <label>GPA</label><input type="text" name="educations[${ status.index }].scored" value="${ educations[status.index ].scored }" /><br/>
                        <label>Start Date</label><input type="text" name="educations[${ status.index }].startDate" value="${ educations[status.index].startDate }" /><br/>
                        <label>End Date</label><input type="text" name="educations[${ status.index }].endDate" value="${ educations[status.index].endDate }" /><br/>
                    </div>
                </c:forEach>        
            </c:if>         
        </c:if>
        <div class="educations">
            <label>Position</label><input type="text" name="educations[${fn:length(educations)}].index" value="${fn:length(educations) + 1}" /><a href="" class="delete">Delete</a><br/>
            <label>School</label><input type="text" name="educations[${fn:length(educations)}].school" /><br/>
            <label>Degree</label><input type="text" name="educations[${fn:length(educations)}].degree" /><br/>
            <label>GPA</label><input type="text" name="educations[${fn:length(educations)}].scored" /><br/>
            <label>Start Date</label><input type="text" name="educations[${fn:length(educations)}].startDate" /><br/>
            <label>End Date</label><input type="text" name="educations[${fn:length(educations)}].endDate" /><br/>
        </div>
    </div>  
    <a href="" id="addButton">Add new Edu</a>
    <input type="submit" value="Save" />        
</s:form>

<div class="template_educations" style="display:none">
    <div class="educations">
        <label>Position</label><input type="text" name="educations[_X_].index" value="_Y_" /><a href="" class="delete">Delete</a><br/>
        <label>School</label><input type="text" name="educations[_X_].school" /><br/>
        <label>Degree</label><input type="text" name="educations[_X_].degree" /><br/>
        <label>GPA</label><input type="text" name="educations[_X_].scored" /><br/>
        <label>Start Date</label><input type="text" name="educations[_X_].startDate" /><br/>
        <label>End Date</label><input type="text" name="educations[_X_].endDate" /><br/>
    </div>
</div>
</body>
</html> 
```

对于每个`educations`div，都会有一个`.delete`删除整个 div 的链接。用户可以使用链接添加更多`educations`div 。`#addButton`

使用我当前的 jquery 函数，我可以处理删除功能，但它会导致代码重复。我的代码在 2 个地方重复：

*   `.delete`页面加载：如果删除这些代码，除非用户单击，否则不会注册链接中的 onClick 事件`#addButton`。换句话说，`.delete`如果用户没有`#addButton`事先点击，链接中的点击事件将不会触发

*   添加按钮点击事件：如果删除这些代码，新添加的`.delete`链接将不会被注册

任何建议如何摆脱我的情况下的代码重复？对不起，如果这是一个愚蠢的问题。我是 jQuery 新手

```
$(document).ready(function(){

    //handle add new education
    $("#addButton").click(function(event){
        event.preventDefault();

        //append html inside template_educations div into educationForm div
        $(".educationForm").append($(".template_educations").html());

        //regist click event handle for button delete
        $(".delete").click(function(event){
            event.preventDefault();

            //delete parent tag with class = educations
            var parent = $(this).parents(".educations");
            parent.remove();
        });

        //loop through input tag inside educations div
        $(".educationForm").children(".educations").last().children("input").each(function(){           
            var count = $(".educationForm").children(".educations").length;

            //replace value of position textfield with current position
            var value = $(this).attr("value");
            if(typeof value !== 'undefined' && value !== false)
            {
                value = value.replace("_Y_", count);
                $(this).attr("value", value);
            }

            //replace educations list index in textfield
            var name = $(this).attr("name");
            name = name.replace("_X_", count);
            $(this).attr("name", name);

        });         
    });

    //handle delete education
    $(".delete").click(function(event){
        event.preventDefault();

        //delete parent tag with class = educations
        var parent = $(this).parents(".educations");
        parent.remove();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:49:36.830

您可以使用**[delegate()](http://api.jquery.com/delegate/)** jquery 方法，该方法基于一组特定的根元素，将处理程序附加到一个或多个与选择器匹配的所有元素的事件，现在或将来。

您的代码可能是：

```
$(document).ready(function(){

//handle add new education
$("#addButton").click(function(event){
    event.preventDefault();

    //append html inside template_educations div into educationForm div
    $(".educationForm").append($(".template_educations").html());

    //loop through input tag inside educations div
    $(".educationForm").children(".educations").last().children("input").each(function(){           
        var count = $(".educationForm").children(".educations").length;

        //replace value of position textfield with current position
        var value = $(this).attr("value");
        if(typeof value !== 'undefined' && value !== false)
        {
            value = value.replace("_Y_", count);
            $(this).attr("value", value);
        }

        //replace educations list index in textfield
        var name = $(this).attr("name");
        name = name.replace("_X_", count);
        $(this).attr("name", name);

    });         
});

//handle delete education
$("body").delegate('.delete', 'click', function(event){
    event.preventDefault();

    //delete parent tag with class = educations
    var parent = $(this).parents(".educations");
    parent.remove();
});
}); 
```

# iphone - 如何使用 Facebook SDK 在用户墙上发帖

> ID：15783453
> 
> 赞同：8
> 
> 时间：2013-04-03T09:22:51.357
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-ios-sdk

我想在 iOS 应用程序中使用 facebook sdk 将一些文本发布到用户墙上。

现在发布一个开放的图表故事是做到这一点的唯一方法吗？

我发现开放图表故事真的很奇怪，您只能以“用户 xa y”格式发布内容，您可以直接在 facebook 上预设 x 和 y，例如用户 ata 吃披萨或用户玩游戏。设置每一个也非常费力，因为您必须在外部服务器上为每一个创建一个 .php 对象。

我错过了什么还是有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T15:14:24.130

多浏览一下 facebook 教程就知道了。

```
-(void) postWithText: (NSString*) message
           ImageName: (NSString*) image
                 URL: (NSString*) url
             Caption: (NSString*) caption
                Name: (NSString*) name
      andDescription: (NSString*) description
{

    NSMutableDictionary* params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                   url, @"link",
                                   name, @"name",
                                   caption, @"caption",
                                   description, @"description",
                                   message, @"message",
                                   UIImagePNGRepresentation([UIImage imageNamed: image]), @"picture",
                                   nil];

    if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound)
    {
        // No permissions found in session, ask for it
        [FBSession.activeSession requestNewPublishPermissions: [NSArray arrayWithObject:@"publish_actions"]
                                              defaultAudience: FBSessionDefaultAudienceFriends
                                            completionHandler: ^(FBSession *session, NSError *error)
        {
             if (!error)
             {
                 // If permissions granted and not already posting then publish the story
                 if (!m_postingInProgress)
                 {
                     [self postToWall: params];
                 }
             }
         }];
    }
    else
    {
        // If permissions present and not already posting then publish the story
        if (!m_postingInProgress)
        {
            [self postToWall: params];
        }
    }
}

-(void) postToWall: (NSMutableDictionary*) params
{
    m_postingInProgress = YES; //for not allowing multiple hits

    [FBRequestConnection startWithGraphPath:@"me/feed"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error)
     {
         if (error)
         {
             //showing an alert for failure
             UIAlertView *alertView = [[UIAlertView alloc]
                                       initWithTitle:@"Post Failed"
                                       message:error.localizedDescription
                                       delegate:nil
                                       cancelButtonTitle:@"OK"
                                       otherButtonTitles:nil];
             [alertView show];
         }
         m_postingInProgress = NO;
     }];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T09:27:55.197

从您的 iOS 应用程序共享内容的最简单方法是使用`UIActivityViewController`该类，[在这里](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html)您可以找到该类的文档，[这里](http://blogs.captechconsulting.com/blog/steven-beyers/cocoaconf-dc-recap-sharing-uiactivityviewcontroller)是一个很好的使用示例。它很简单：

```
NSString *textToShare = @”I just shared this from my App”;
UIImage *imageToShare = [UIImage imageNamed:@"Image.png"];
NSURL *urlToShare = [NSURL URLWithString:@"http://www.bronron.com"];
NSArray *activityItems = @[textToShare, imageToShare, urlToShare];

UIActivityViewController *activityVC = [[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityVC animated:TRUE completion:nil]; 
```

这仅适用于 iOS 6，它使用用户设置中配置的 Facebook 帐户，不需要 Facebook SDK。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-21T01:09:11.137

您也可以使用**Graph API**。

完成使用 iOS 创建 facebook 应用程序的所有基本步骤后，您就可以开始享受 Graph API 的功能了。下面的代码将发布“hello world！” 在你的墙上：

```
#import <FBSDKCoreKit/FBSDKCoreKit.h>
#import <FBSDKLoginKit/FBSDKLoginKit.h>

...

//to get the permission 
//https://developers.facebook.com/docs/facebook-login/ios/permissions  
if ([[FBSDKAccessToken currentAccessToken] hasGranted:@"publish_actions"]) {
            NSLog(@"publish_actions is already granted.");
        } else {
            FBSDKLoginManager *loginManager = [[FBSDKLoginManager alloc] init];
            [loginManager logInWithPublishPermissions:@[@"publish_actions"] handler:^(FBSDKLoginManagerLoginResult *result, NSError *error) {
                //TODO: process error or result.
            }];
        }

    if ([[FBSDKAccessToken currentAccessToken] hasGranted:@"publish_actions"]) {
        [[[FBSDKGraphRequest alloc]
          initWithGraphPath:@"me/feed"
          parameters: @{ @"message" : @"hello world!"}
          HTTPMethod:@"POST"]
         startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
             if (!error) {
                 NSLog(@"Post id:%@", result[@"id"]);
             }
         }];
    }
... 
```

这里介绍了基本人员：[https ://developers.facebook.com/docs/ios/graph](https://developers.facebook.com/docs/ios/graph)

可以玩的资源管理器在这里： [https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

关于它的一个很好的介绍：[https ://www.youtube.com/watch?v=WteK95AppF4](https://www.youtube.com/watch?v=WteK95AppF4)

# c# - 如何使用wix的自定义操作中的相对路径？

> ID：15783455
> 
> 赞同：4
> 
> 时间：2013-04-03T09:22:59.263
> 
> 标签：c#, wix, windows-installer, installation

我正在制作一个自定义安装程序。我添加`Utility.CA.dll`执行自定义操作的位置。在这种情况下，我想访问相对于`setup.msi`文件路径的本地文件。自定义操作方法可以使用直接路径`e:\utility\myfile.txt`，但我找不到路径 '..\utility\myfile.txt'。经过一些实验，我得到了那个`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)`Shows`C:\Users\current_username\AppData\Local\Temp\MSIF384.tmp-`文件夹。

我能做些什么？需要 wix 代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:17:01.880

首先，我应该提到引用与 .MSI 的源相关的文件是非常具有挑战性的，因为稍后（修复、修补、卸载）.MSI 文件将在安装程序缓存之外执行，而松散的文件（如`myfile.txt`）将不可用。您需要非常仔细地编写自定义操作来处理该事实。

您正在寻找的是`Directory`with identifier `SourceDir`。`SourceDir`您可以通过调用来获取 的值：

```
 string sourceDir = session["SourceDir"]; 
```

注意：我假设您正在使用 DTF，其中将`session`对象提供给您的托管自定义操作。

现在，复杂性在于该`SourceDir`属性仅在 Windows Installer 完成后才设置`ResolveSource`。在初始安装时，双击 .MSI 文件的位置将解析源（因为它是初始安装并且需要文件）。后续安装可能不需要源（例如卸载不需要您将 CD 放回驱动器即可成功）。因此，您要么必须在 .MSI 安装序列中调用操作（这将提示用户再次提供原始 .MSI 文件），要么编写自定义操作代码，使其在所有情况下`ResolveSource`都不需要。`SourceDir`

您可以在这里阅读更多信息`SourceDir`：[http ://robmensching.com/blog/posts/2010/1/26/stackoverflow-what-does-namesourcedir-refer-to](http://robmensching.com/blog/posts/2010/1/26/stackoverflow-what-does-namesourcedir-refer-to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:45:06.383

这对我有用；在 Product.wxs 中：

```
<Binary 
    Id="WixMyCustomActions"         
    SourceFile="..\WixMyCustomActions\bin\WixMyCustomActions.CA.dll" />

<CustomAction 
    Id="MyMethod" 
    BinaryKey="WixMyCustomActions" 
    DllEntry="MyMethod" 
    Execute="immediate" 
    Return="check" /> 
```

WixMyCustomActions.CA.dll 是与 Wix 项目相同的解决方案中的 C# 类库。在 WixMyCustomActions.CA.dll 项目属性 Build Events 中，我有一个构建后事件将 WixMyCustomActions.CA.dll 和 WixMyCustomActions.CA.pdb 从 bin\Debug 或 bin\Release 复制到 bin：

```
copy "$(TargetDir)*.dll" "$(ProjectDir)bin" /Y
copy "$(TargetDir)*.pdb" "$(ProjectDir)bin" /Y 
```

通过复制 dll，我的 Product.wxs 将引用最后构建的任何配置（调试或发布）。

编辑：要获取与您的 CA dll 相关的文件，请使用它来查找 CA 程序集的目录：

```
using System.IO;
using System.Reflection;

// etc

string assemblyDirectory = 
    Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

您现在可以找到与此目录相关的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-11T17:15:41.527

如果您需要获取 msi 文件所在文件夹的路径，可以使用此代码段来检索它：

```
Path.GetDirectoryName(session["OriginalDatabase"]) 
```

[OriginalDatabase](https://msdn.microsoft.com/en-us/library/aa370562%28v=vs.85%29.aspx)属性可用于 InstallUISequence 和 InstallExecuteSequence。

要访问与您的 msi 相关的文件，您将使用

```
Path.Combine(Path.GetDirectoryName(session["OriginalDatabase"]), "myfile.txt") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T13:52:09.410

有一个可以从 MSI 读取的属性 - `SourceDir`。

您可以通过以下方式在您的 c# 代码中引用此属性`string sourceDir = session["SourceDir"];`

但是，在尝试获取源之前，您必须先解析源。那是您的 MSI 不知道它是从哪里运行的。因此，在您**的**`InstallExecuteSequence`.

`<ResolveSource After="CostInitialize"/>`

请注意，你应该把它放在之前`CostFinalize`和之后`CostInitialize`，否则会给出错误**ICE27: 'ResolveSource' Action in InstallExecuteSequence table in wrong place。当前：选择，正确：成本核算**。

您的自定义操作应在`ResolveSource`元素之后引用。

```
<InstallExecuteSequence>
      <ResolveSource After="CostInitialize"/>
      <Custom Action="CustomActionThatNeedsRelativePath" After="CostFinalize"/>
</InstallExecuteSequence> 
```

# c++ - C/C++ 64位数组操作

> ID：15783457
> 
> 赞同：5
> 
> 时间：2013-04-03T09:23:04.460
> 
> 标签：c++, c, data-structures, hashtable

我有一个效率关键应用程序，我需要这样一个数组类型的数据结构`A`。它的键是`0, 1, 2,...`，它的值是`uint64_t` **不同的**值。我需要两个**常量**操作：

```
1\. Given i, return A[i];
2\. Given val, return i such that A[i] == val 
```

我不喜欢使用哈希表。因为我尝试了[GLib GHashTable](https://developer.gnome.org/glib/2.36/glib-Hash-Tables.html)，所以将 6000 万个值加载到哈希表中大约需要 20 分钟（如果我删除插入语句，只需要大约 6 秒）。我的申请不能接受这个时间。或者也许有人推荐其他哈希表库？我尝试了 utash.c，它立即崩溃了。

我也试过[SDArray](https://code.google.com/p/sdarray/)，但它似乎不是正确的。

有人知道任何可以满足我要求的数据结构吗？或者任何有效的哈希表实现？我更喜欢使用 C/C++。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:32:42.940

通常，您需要*两个*哈希表来完成此任务。如您所知，哈希表可让您在预期的恒定时间内进行**关键**查找。搜索一个**值**需要遍历整个数据结构，因为有关这些值的信息没有编码在哈希查找表中。

使用两个哈希表：一个用于键值，一个（反向）用于值键查找。在您的特定情况下，只要您的键是“顺序的”，就可以使用向量来完成前向搜索。但这并没有改变对支持快速反向查找的数据结构的要求。

关于哈希表实现：在 C++11 中，您可以使用新的标准容器`std::unordererd_map`。

一个实现可能看起来像这样（当然这是可以调整的，比如引入 const 正确性，通过引用调用等）：

```
std::unordered_map<K,T> kvMap; // hash table for forward search
std::unordered_map<T,K> vkMap; // hash table for backward search

void insert(std::pair<K,T> item) {
    kvMap.insert(item);
    vkMap.insert(std::make_pair(item.second, item.first));
}

// expected O(1)
T valueForKey(K key) {
    return kvMap[key];
}

// expected O(1)
K keyForValue(T value) {
    return vkMap[value];
} 
```

一个干净的 C++11 实现应该“包装”键值哈希映射，因此您的包装类中有“标准”接口。始终保持反向地图与您的正向地图同步。

关于创建性能：在大多数实现中，有一种方法可以告诉数据结构要插入多少元素，称为“保留”。对于哈希表，这是一个**巨大**的性能优势，因为动态调整数据结构的大小（在插入期间不时发生）*完全*重新构建了整个哈希表，因为它改变了哈希函数本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:23:51.083

我会选择两个向量（假设您的值确实不同），因为这是访问中的 O(1)，而访问中的映射是 O(log n)

```
vector<uint64_t> values;
vector<size_t> keys

values.reserve(maxSize); // do memory reservation first, so reallocation doesn't occur during reading of data
keys.reserve(maxSize); // do memory reservation first, so reallocation doesn't occur during reading of data 
```

然后，在读入数据时

```
values[keyRead] = data;
keys[valueRead] = key; 
```

那么读取信息也是一样的

```
data = values[currentKey];
key = keys[currentData]; 
```

# wordpress - 有没有很好的工具可以帮助将现有网站迁移到基于 CMS 的网站？

> ID：15783459
> 
> 赞同：1
> 
> 时间：2013-04-03T09:23:05.060
> 
> 标签：wordpress, web, content-management-system, migrate

我正在寻找能够加载简单但旧的现有网站并生成可以加载到 wordpress 或其他 CMS 的输出的工具或库。目标是保持现有网站的导航结构和内容。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:41:14.630

我发现它确实取决于 CMS。我会推荐一个基于“标签对”的 CMS，比如新的[Craft](http://buildwithcraft.com/)或[ExpressionEngine 的免费核心](https://store.ellislab.com/#ee-core)版本（还有其他版本），您可以在其中放入循环控制区域，用标签替换字段，然后它就会运行。我个人喜欢这些，因为它们在内容和设计之间提供了更清晰的分离。

我现在正在尝试学习 Wordpress，但它与您想要的相反 - 您创建模板环境，并且一半的设计似乎由代码控制。如果您想交换通用模板，那就太好了，但是如果您自定义它们，您将做很多工作。我正在查看一个我继承的站点，而条件语句是一场噩梦 - 一半在模板中，另一半在插件本身中（事件，我在看着你）。

# java - 将 JButton 动态添加到 JPanel 不适用于 Netbeans

> ID：15783460
> 
> 赞同：0
> 
> 时间：2013-04-03T09:23:09.263
> 
> 标签：java, swing, layout, jframe, jpanel

我从调色板创建了一个`JFrame Class`并`Netbeans 7.3`添加了两个面板。我在第一个面板中添加了一个按钮，单击该按钮我想在第二个面板（topoPane）中添加一个新按钮。

下面是我为此编写的按钮单击事件。但是，即使调用事件，按钮也不会添加到面板中。请告诉我它有什么问题。

```
private void jButton1MouseClicked(java.awt.event.MouseEvent evt) 
{                                      
    // TODO add your handling code here:

    System.out.println("Creating the Button");        
    JButton but = new JButton();
    but.setBackground(Color.red);
    but.setText("New Button");
    but.setBounds(500, 500, 500, 500);

    topoPane.add(but);
    topoPane.revalidate();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:32:02.883

从您对 的使用来看`setBounds`，很明显您正在使用`null`布局。因此，您需要调用`repaint()`没有布局的容器不会自动重新绘制添加的组件`revalidate`。

除了调用`repaint`是一种很好的做法这一事实之外，布局管理器*还可以*消除进行此调用的需要，同时管理组件的大小和定位。这使得使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)成为一个很好的理由。

# qt - Qt 中对 boost::thread 的未定义引用

> ID：15783464
> 
> 赞同：0
> 
> 时间：2013-04-03T09:23:19.450
> 
> 标签：qt, boost, undefined-reference

我正在尝试`boost::thread`在 Qt 中创建一个应用程序。这是我的代码：

```
#include <iostream>

#include "boost/thread.hpp"
#include "boost/bind.hpp"

using namespace std;

class A {
public:
    void tf() {
        for (int i = 0; i < 100; ++i) {
            cout << i << endl;
        }
    }
};

int main()
{
    boost::shared_ptr<A> aPtr;
    cout << "Hello World!" << endl;
    boost::thread t = boost::thread(boost::bind(&A::tf, aPtr.get()));
    cout << "Thread started" << endl;
    return 0;
} 
```

以及相应的 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

LIBS += -L"C:/Program Files (x86)/boost/boost_1_49/lib"
DEPENDPATH += "C:/Program Files (x86)/boost/boost_1_49"
INCLUDEPATH += "C:/Program Files (x86)/boost/boost_1_49"

SOURCES += main.cpp 
```

当我尝试编译它时，我得到：

```
{{path}}\main.cpp:21: error: undefined reference to `_imp___ZN5boost6threadD1Ev'
{{path}}\main.o:-1: In function `ZN5boost6threadC1INS_3_bi6bind_tIvNS_4_mfi3mf0Iv1AEENS2_5list1INS2_5valueIPS6_EEEEEEEET_NS_10disable_ifINS_14is_convertibleIRSE_NS_6detail13thread_move_tISE_EEEEPNS0_5dummyEE4typeE':
c:\Program Files (x86)\boost\boost_1_49\boost\thread\detail\thread.hpp:205: error: undefined reference to `_imp___ZN5boost6thread12start_threadEv'
collect2.exe:-1: error: error: ld returned 1 exit status 
```

有什么问题？我错过了什么？

M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:35:10.697

您没有链接到 Boost Thread 库，您只是告诉 Qt 它在哪里。

```
LIBS += -L"C:/Program Files (x86)/boost/boost_1_49/lib" -lboost_thread 
```

# html - 高 div 打破粘性页脚

> ID：15783468
> 
> 赞同：2
> 
> 时间：2013-04-03T09:23:26.903
> 
> 标签：html, css, sticky-footer

我正在一个带有粘性页脚的网站上工作。最近我在导航中添加了购物车预览功能。基本上在鼠标悬停时会打开一个 div 以显示购物车内的项目。其实没什么特别的。

当项目列表变得很长时，首先会出现问题。包含项目的 div 以某种方式破坏了粘性页脚。

为了演示我制作了一个[jsFiddle 示例](http://jsfiddle.net/alexxus/PMabQ)的行为。

我的 HTML 如下所示：

```
<div id = "main">
    <div id = "navigation">
        navigation
        <div id = "cart">
            cart
            <div id = "cartItems">
                <p>item 1</p>
                <p>item 2</p>
                <p>item 3</p>
                <p>...</p>
            </div>
        </div>
    </div>
    <div id = "content">content</div>
    <div id = "footer">footer</div>
</div> 
```

CSS：

```
* {
    margin:0;
    padding:0;
}

html, body {
    height: 100%;
}

#main {
    width: 900px;
    min-height: 100%;
    margin: 0 auto;
    position: relative;
    background-color: lightpink;
}

#navigation {
    height: 50px;
    position: relative;
    background-color: orange;
}

#content {
    padding-bottom: 50px;
}

#footer {
    width: 900px;
    height: 50px;
    position: absolute;
    bottom: 0;
    background-color: yellowgreen;
}

#cart {
    width: 100px;
    position: absolute;
    top: 0;
    right: 0;
    background-color: red;
}

#cartItems {
    display: none;
} 
```

我希望，有人可以给我一个提示。我真的坚持这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:31:37.333

删除`position:absolute`并`#cart`使用`float:right`

并添加`overflow:auto`到`#main`它根据购物车项目增加。

```
* {
    margin:0;
    padding:0;
}

html, body {
    height: 100%;
}

#main {
    width: 900px;
    min-height: 100%;
    margin: 0 auto;
    position: relative;
    background-color: lightpink;
    overflow:auto
}

#navigation {
    height: 50px;
    position: relative;
    background-color: orange;
}

#content {
    padding-bottom: 50px;
}

#footer {
width: 900px;
height: 50px;
position: absolute;
bottom: 0;
background-color: yellowgreen; 
```

}

```
#cart {
    width: 100px;
    float:right;
    background-color: red;
}

#cartItems {
    display: none;
} 
```

**[演示](http://jsfiddle.net/PMabQ/24/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:30:32.977

这是一个更新的 jsfiddle，它使购物车越过页脚 - 看看这是否是您要查找的内容：

[http://jsfiddle.net/PMabQ/20/](http://jsfiddle.net/PMabQ/20/)

CSS：

```
* {
    margin:0;
    padding:0;
}

html, body {
    height: 100%;
}

#main {
    width: 900px;
    min-height: 100%;
    margin: 0 auto;
    position: relative;
    background-color: lightpink;
}

#navigation {
    height: 50px;
    position: relative;
    background-color: orange;
}

#content {
    padding-bottom: 50px;
}

#footer {
    width: 900px;
    height: 50px;
    position: fixed;
    bottom: 0;
    background-color: yellowgreen;
    z-index: 1;
}

#cart {
    width: 100px;
    position: absolute;
    top: 0;
    right: 0;
    background-color: red;
    z-index: 2;
}

#cartItems {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:30:39.917

将页脚的位置更改为`fixed`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:39:47.780

更改#main div 的溢出：

```
overflow-x: hidden;
overflow-y: auto; 
```

不要将页脚放入#main div

这给出了：

[http://jsfiddle.net/PMabQ/27/](http://jsfiddle.net/PMabQ/27/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T09:45:24.650

您在这里几乎没有选择。选择由你决定

1.  将更高的 z-index 添加到选项面板并使其显示在页脚的顶部（**不好**，因为如果项目列表太长，那么它会超出页脚，在页脚之后会显示一些空白区域）。

2.  添加`overflow:scroll`到`main`div 并允许项目列表下沉到内容（**不好**，如果是下沉则用户看不到内容）。

3.  指定项目列表的最大高度并制作`overflow:scrool`（退出确定，但用户需要一路向下滑动）

4.  使项目列表多列并为项目列表设置一些最大高度（我认为这种方法是可以接受的）（按部门菜单查看亚马逊左侧商店）。

5.  使用 JqueryUI 根据使简短和分类您的项目列表（不错，但有一些工作要做）。[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

# ruby-on-rails - Rails - 重定向后未设置会话值

> ID：15783469
> 
> 赞同：0
> 
> 时间：2013-04-03T09:23:32.480
> 
> 标签：ruby-on-rails, ruby, session, redirect

我正在设置一个会话变量，然后进行重定向：

控制器 #1：

```
 session[:session_id] = data['session_id']
 puts "-------from session id is: #{session[:session_id]}"
 redirect_to(:controller => :company_setup, :action => :index) and return 
```

我可以看到会话 ID 设置正确。但是，当我进入 company_setup 控制器时， session_id 是其他一些值......

知道这里发生了什么吗？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:50:24.380

好的..我想我以前做过 - 我认为问题是'session_id' - 是由rails保留的。

解决方案：使用不同的会话变量，例如 session[:user_session_id]

# cordova - 未捕获的 ReferenceError：未定义 FileUploadOptions

> ID：15783470
> 
> 赞同：5
> 
> 时间：2013-04-03T09:23:34.760
> 
> 标签：cordova, jquery-mobile, file-upload

我正在尝试使用电话间隙上传照片，但我总是收到未捕获的 ReferenceError。我试图将 cordova.js 放在 head 标签的开头，但没有成功。这是代码

索引.html

```
<head>
    <meta charset="utf-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>test</title>
    <script type="text/javascript" src="js/cordova-2.5.0.js"></script>      
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.3.0.min.css" />    
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.3.0.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
</head> 
```

index.js

```
(function($){
    var self = $.mobile.test = {
        init : function(){
            $(document).on('pagebeforeshow', '#login', function(){
                $('#access').off('click').on('click',function(){
                    self.comprobarAcceso();
                });                 
            });
            $(document).on('pagebeforeshow', '#registrarse', function(){
                $('#registro').off('click').on('click',function(){
                    self.registrar();
                });                 
            }); 

            $(document).on('pagebeforeshow', '#nueva', function(){       
                console.log("nueva live...");
                $('#sacar-foto').off('click').on('click',function(){
                    self.capturarFoto();
                });                 
                $('#crear').off('click').on('click',function(){
                        self.crear();
                });
            });

        },
        crear: function(){
            var win = function(r) {
                console.log("Code = " + r.responseCode);
                console.log("Response = " + r.response);
                console.log("Sent = " + r.bytesSent);
            }

            var fail = function(error) {
                alert("An error has occurred: Code = " + error.code);
                console.log("upload error source " + error.source);
                console.log("upload error target " + error.target);
            }

            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
            options.mimeType="text/plain";
            var params = {}; 
            params.value1 = "test"; 
            params.value2 = "param";

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(fileURI, encodeURI("http://some.server.com/upload.php"), win, fail, options);             
        }

};

self.init();

})(jQuery); 
```

我在 chrome 控制台上遇到错误： var options = new FileUploadOptions();

> 未捕获的 ReferenceError：未定义 FileUploadOptions。

似乎它没有加载cordoba库，但其他一切都正常工作，甚至用移动相机拍照。

请帮忙！

# java - Oracle 和 MS SQL Server 之间的桥梁

> ID：15783472
> 
> 赞同：0
> 
> 时间：2013-04-03T09:23:50.063
> 
> 标签：java, sql-server, oracle, database-design, database-connection

我们正在制作一个依赖于机器的应用程序。
现在我们在多台客户端机器上部署我们的应用程序，但问题是每个客户端都有来自不同供应商的数据库。`SQL Server`目前我们正面临和之间的冲突`Oracle`。
我们的应用程序建立在`Oracle`数据库上，现在我们要访问`SQL Server`。有什么办法可以做到，因为我对数据库不太感兴趣，我不想更改不同数据库的查询和配置设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:38:01.727

您需要的是提供一个提供数据库独立性的层的东西。有多种方法可以做到这一点。

*   您可以使用 ORM（对象关系映射）技术，例如 JPA（Hibernate 是主要示例）。典型的 JPA 实现具有适用于一系列不同数据库的后端。

*   您可以通过（粗略地说）在不同 SQL 方言之间映射 SQL 语句来使用支持数据库独立性的现有产品。

*   有些人建议使用 ODBC。

*   您可以为每个后端数据库实现具有不同 DAO 实现类的 DAO API。如果您尽可能地坚持符合 SQL-92 的 DDL 和 DML，那么很有可能在 DAO 实现之间会有很多共性。（JDBC 在 API 级别提供数据库独立性，前提是您不使用特定于供应商的扩展。我记得 Oracle 的 JDBC 驱动程序以非标准方式做事时遇到问题……但他们现在可能已经一起行动了。）

* * *

> ...我不想更改不同数据库的查询和配置设置。

如果您使用 ORM 及其查询语言，则不必这样做。如果您使用 SQL 和 JDBC 实现数据库，则主要是分别坚持 SQL 标准和标准 JDBC API 方法。

相关问题：

*   [DB 独立 Java 编程 - 建议？](https://stackoverflow.com/questions/7336291/db-independent-java-programming-suggestions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:43:30.767

推荐的方法是使用像 Hibernate 这样的 ORM 工具。如果这是不可能的，那么使用 StoredProcedures（确保它只使用普通的 PL SQL 而没有数据库特定的功能）进行数据库操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T16:09:29.970

如有必要，创建链接服务器并使用 openquery。

[http://technet.microsoft.com/en-us/library/ms188279.aspx](http://technet.microsoft.com/en-us/library/ms188279.aspx)

# javascript - jQuery AJAX 方法正在调用对象的 onchange

> ID：15783473
> 
> 赞同：0
> 
> 时间：2013-04-03T09:23:50.297
> 
> 标签：javascript, jquery, ajax, asynchronous

我有点困惑`jQuery AJAX method`，当我在屏幕上更改某些内容时，该方法正在调用。可能有一些问题异步任务？

## 这是 jQuery click 函数的内部：

```
 $("#divModularFenster").html(html).dialog({
            modal: true,
            buttons: {
                "OK": function () {
                            getJSONObjektList(function (jsonObjekt) {
                            console.log("Callback: " + JSON.stringify(jsonObjekt));
                            // other code
                            var pj = JSON.stringify(jsonObjekt);
                            $.support.cors = true;
                            $.ajax({
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                data: pj,
                                dataType: "json",
                                processData: false,
                                url: "http://localhost:53658/PostDatenZumWebservice",
                                success: function (data) {
                                    alert("Post erfolgreich: ");

                                }
                            });
                         });                          
                    }
                  }
              }); 
```

## 在将数据发送到我的服务之前，应该调用此方法：

```
function getJSONObjektList(callback) {

var jsonObjekt = {};
jsonObjekt.ObjektId = [];
jsonObjekt.Selected = [];

doc = Qv.GetCurrentDocument();
doc.GetAllObjects(function (objects) {
    for (var i = 0; i < objects.length; i++) {
        var obj = objects[i];
        var id = obj.id;
        var caption = obj.caption;
        var type = obj.type;
        var my = obj.my;

        //liste alle verfuegbaren Objekte auf 
        jsonObjekt.ObjektId.push(id);

        if (type === "Statusbox") {
            doc.GetObject(id, function () {
                var statusboxInhalt = this.Data.Rows;
                var utilJSONObjekt;
                for (var j = 0; j < statusboxInhalt.length; j++) {

                    utilJSONObjekt = {};
                    utilJSONObjekt.SelectedObjektId;
                    utilJSONObjekt.SelectedObjektWerte = [];

                    var inhalt = statusboxInhalt[j];
                    console.log("Name: " + inhalt[0].text + " Wert: " + inhalt[2].text);

                    var valAr = inhalt[2].text.split(",");
                    for (var k = 0; k < valAr.length; k++) {
                        //liste alle verfuegbaren Objekte auf
                        utilJSONObjekt.SelectedObjektWerte.push($.trim(valAr[k]));

                    }
                    jsonObjekt.Selected.push(utilJSONObjekt);
                    //callback erst starten, wenn alle Elemente durchlaufen worden sind
                    if (j === (statusboxInhalt.length - 1)) {
                        callback(jsonObjekt);
                    }
                }
            });
        }
    }
 });
} 
```

一些想法？

# javascript - D3.js：从 JSON 数据定义序数轴

> ID：15783475
> 
> 赞同：2
> 
> 时间：2013-04-03T09:23:58.080
> 
> 标签：javascript, json, d3.js

使用 d3.js 我想表示面积图。我从 JSON 对象数组中获取数据，如下所示：

```
[{"time":"00:00 - 00:15","energy":10},
 {"time":"00:15 - 00:30","energy":20},
 {"time":"00:30 - 00:45","energy":30},
 {"time":"00:45 - 01:00","energy":50},
 {"time":"01:00 - 01:15","energy":60},
 {"time":"01:15 - 01:30","energy":70}...] 
```

为了在 x 轴（时间）中表示域，我对域的所有 96 个元素进行了硬编码，如下所示：

```
x.domain(["00:00 - 00:15","00:15 - 00:30","00:30 - 00:45","00:45 - 01:00",
        "01:00 - 01:15","01:15 - 01:30","01:30 - 01:45","01:45 - 02:00",
        "02:00 - 02:15","02:15 - 02:30","02:30 - 02:45","02:45 - 03:00",
        "03:00 - 03:15","03:15 - 03:30","03:30 - 03:45","03:45 - 04:00",
        "04:00 - 04:15","04:15 - 04:30","04:30 - 04:45","04:45 - 05:00",
        "05:00 - 05:15","05:15 - 05:30","05:30 - 05:45","05:45 - 06:00",
        "06:00 - 06:15","06:15 - 06:30","06:30 - 06:45","06:45 - 07:00",
        "07:00 - 07:15","07:15 - 07:30","07:30 - 07:45","07:45 - 08:00",
        "08:00 - 08:15","08:15 - 08:30","08:30 - 08:45","08:45 - 09:00",
        "09:00 - 09:15","09:15 - 09:30","09:30 - 09:45","09:45 - 10:00",
        "10:00 - 10:15","10:15 - 10:30","10:30 - 10:45","10:45 - 11:00",
        "11:00 - 11:15","11:15 - 11:30","11:30 - 11:45","11:45 - 12:00",
        "12:00 - 12:15","12:15 - 12:30","12:30 - 12:45","12:45 - 13:00",
        "13:00 - 13:15","13:15 - 13:30","13:30 - 13:45","13:45 - 14:00",
        "14:00 - 14:15","14:15 - 14:30","14:30 - 14:45","14:45 - 15:00",
        "15:00 - 15:15","15:15 - 15:30","15:30 - 15:45","15:45 - 16:00",
        "16:00 - 16:15","16:15 - 16:30","16:30 - 16:45","16:45 - 17:00",
        "17:00 - 17:15","17:15 - 17:30","17:30 - 17:45","17:45 - 18:00",
        "18:00 - 18:15","18:15 - 18:30","18:30 - 18:45","18:45 - 19:00",
        "19:00 - 19:15","19:15 - 19:30","19:30 - 19:45","19:45 - 20:00",
        "20:00 - 20:15","20:15 - 20:30","20:30 - 20:45","20:45 - 21:00",
        "21:00 - 21:15","21:15 - 21:30","21:30 - 21:45","21:45 - 22:00",
        "22:00 - 22:15","22:15 - 22:30","22:30 - 22:45","22:45 - 23:00",
        "23:00 - 23:15","23:15 - 23:30","23:30 - 23:45","23:45 - 00:00"]); 
```

这是工作， ![在此处输入图像描述](https://i.stack.imgur.com/NE0Gi.png)

但我想转向更优雅的东西，比如使用 d3.min() 和 d3.max()。但这不起作用。这是我的代码。

```
x.domain([d3.min(json, function(d){return d["time"]}),d3.max(json, function(d){return d["time"]})]); 
```

和图形结果。 ![在此处输入图像描述](https://i.stack.imgur.com/LWGtr.png)

我有两个问题：

1-有什么方法可以在一行中定义我的域？我已经检查了时间尺度，但我不知道如何将它集成到我的代码中，以及是否可以按季度使用它。如果我使用`scale.ticks(d3.time.minutes, 15)`我不知道如何匹配域和我的 JSON 数据定义。

2- 如果您看到我的第一个图表的底部，刻度文本将被覆盖。我只想代表几个小时（每 4 个季度 1 个刻度）。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:39:10.950

要定义您当前拥有的域，请使用此代码。

```
 x.domain(json.map(function(d) {return d["time"];} )); 
```

格式化时间轴（实际上是`min`and `max`）的常用函数不起作用的原因是，就 Javascript 而言，您的日期只是字符串。您需要将它们解析为日期才能使用特定于时间的轴的东西。为此，您需要决定是采用间隔的起点还是终点。

[该文档](https://github.com/mbostock/d3/wiki/Time-Formatting)有更多关于解析和格式化日期和时间的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:47:14.867

如果要重现已经硬编码的内容，则需要由字符串表示的类别形成的离散域，而不是连续域。

因此，您需要为您的域生成字符串数组，

```
sprintf = require("sprintf").sprintf;

var categories = new Array;
for (var i=0, t1=0, t2=15; i<24*4; i++, t1+=15, t2+=15) {
  categories[i]=sprintf(
    "%02d:%02d - %02d:%02d",
    Math.floor(t1/60),t1%60,Math.floor(t2/60),t2%60
  );
} 
```

并传递该数组

```
x.domain(categories) 
```

另一种方法是将原始 json 数据的“时间”值转换为实时值，而不是字符串。但那是另一个 SO 帖子。

# sql - 如何编写此 Oracle 查询（每个日期的最后一次时间，其中时间 < 给定时间）

> ID：15783476
> 
> 赞同：1
> 
> 时间：2013-04-03T09:23:58.697
> 
> 标签：sql, oracle

我正在寻找为 Oracle DB 编写查询的正确方法。

它应该为每个唯一日期（dateCol 列）选择最后一行，以使 dateCol2 的时间部分低于“17:30”

```
select * from table where dateCol between to_date('2013-01-01 00:00:00','YYYY-MM-DD H24:MI:SS') and to_date('2013-02-01 00:00:00','YYYY-MM-DD H24:MI:SS') 
and id='myID' 
and [MISSING PART = the last line such that timepart(dateCol2)<'17:30'] 
```

我对 Oracle/SQL 很陌生，所以我的问题可能会遗漏很多东西，我会根据任何要求添加任何内容。

编辑：到目前为止，我明白这一点：

```
 select * from (select table.*, row_number() over (order by dateCol2 desc) last_row from table
  where dateCol between to_date('2013-01-01 00:00:00','YYYY-MM-DD H24:MI:SS') 
                    and to_date('2013-02-01 00:00:00','YYYY-MM-DD H24:MI:SS') 
                    and id='myID' 
                    and to_char(dateCol2, 'hh24:mi') < '17:30')
  where last_row = 1
  group by dateCol
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:30:26.643

如果您只存储日期`datecol`（即当您插入 TRUNC 日期时），则不需要介于两者之间。如果您也在其中存储非零时间，那么两者之间也需要调整。

要检查时间，只需将日期转换为表单`hh24mi`中的数字（生成介于 0 和 2359 之间的数字）并检查是否小于 1730

如果`datecol`日期有非 00:00:00 时间元素：

```
select distinct dateCol 
  from table 
 where dateCol >= to_date('2013-01-01','YYYY-MM-DD') 
   and dateCol < to_date('2013-01-01','YYYY-MM-DD') + 1
   and id='myID' 
   and to_number(to_char(dateCol2, 'hh24mi')) < 1730; 
```

如果`datecol`总是以 00:00:00 作为时间的日期，则：

```
select distinct dateCol 
  from table 
 where dateCol = to_date('2013-01-01','YYYY-MM-DD') 
   and id='myID' 
   and to_number(to_char(dateCol2, 'hh24mi')) < 1730; 
```

从澄清编辑

```
select *
  from (select t.*, row_number() over (partition by datecol 
                                       order by dateCol2) first_row,
               row_number() over (partition by datecol 
                                  order by dateCol2 desc) last_row
          from table t
         where dateCol = to_date('2013-01-01','YYYY-MM-DD') 
           and id='myID' 
           and to_number(to_char(dateCol2, 'hh24mi')) < 1730)
 where first_row = 1
    or last_row = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:41:38.763

如果您想在 17:30 之前为每个日期（dateCol）选择最近 dateCol2 的整行，我会选择类似

```
 select * 
     from table
    where (dateCol, dateCol2)  in (
        select dateCol, max(dateCol2) 
          from table 
         where dateCol between to_date('2013-01-01','YYYY-MM-DD') 
                           and to_date('2013-01-01','YYYY-MM-DD') 
           and id='myID' 
           and to_char(dateCol2, 'hh24:mi') < '17:30'
         group by dateCol
    ) 
```

不确定您在同一日期的中间条件，但我认为您只是在同一日期输入了两次。

编辑：

```
 select * 
         from table t
  innner join (
            select dateCol, 
                   min(dateCol2) first, 
                   max(dateCol2) last
              from table 
             where trunc(dateCol) = to_date('2013-01-01','YYYY-MM-DD') 
               and id='myID' 
               and to_char(dateCol2, 'hh24:mi') < '17:30'
             group by dateCol
              ) 
              sub s
           on t.dateCol  = s.dateCol
          and (t.dateCol2 = s.first
            or t.dateCol2 = s.last) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:44:54.367

我认为你可以这样做，即使它不是很聪明...... dateCol

```
select * from table 
where dateCol between to_date('2013-01-01','YYYY-MM-DD') 
                  and to_date('2013-01-01','YYYY-MMDD') 
and id='myID' and dateCol<trunc(dateCol)+17.5/24 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T10:43:29.507

```
    选择截断（t.dateCol），
       max(t.your_column) 保持（t.dateCol 的最后一个密集排序）
    从表 t
    其中 t.dateCol 在 to_date('2013-01-01','YYYY-MM-DD') 和 to_date('2013-05-01','YYYY-MM-DD') 之间
      和 t.id='myID'
      和 t.dateCol
```

# ios - scrollIndicatorInsets 超出 UITableView 框架

> ID：15783480
> 
> 赞同：2
> 
> 时间：2013-04-03T09:24:05.033
> 
> 标签：ios, objective-c, uitableview, uiscrollview

我可以通过 `self.tableView.scrollIndicatorInsets = UIEdgeInsetsMake(0, 0, 0, -5);`

tableview 在主视图上添加，视图有背景颜色和图像，我有下一个情况

![在此处输入图像描述](https://i.stack.imgur.com/A1VoR.png)

那么我可以在不扩大tableView宽度的情况下做到这一点吗？如果不是，我想我可以用方法轻松制作

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

但我想知道，也许很简单，但我不知道该怎么做

# c++ - 如何使用 GetTcpIPv4Statistics

> ID：15783481
> 
> 赞同：-2
> 
> 时间：2013-04-03T09:24:09.377
> 
> 标签：c++, windows, winapi, tcp, ipv4

我想获取 TCP/UDP IPv4 统计信息。我搜索并找到了`GetTcpIPv4Statistics`API。那么，如何使用它在 C++ 代码中获取 TCP/UDP 统计信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:30:30.027

这似乎只是一个 .net 方法，它调用底层[`GetTcpStatisticsEx`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366023%28v=vs.85%29.aspx)IP Helper API，这是您想从非托管 C++ 中使用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T09:54:49.187

我解决了这个问题。要获取 IPV4 的 TCP 统计信息，我使用了以下代码：

```
#include "stdafx.h"
#include <winsock2.h>
#include <ws2tcpip.h>
#include <iphlpapi.h>
#include <stdio.h>

#pragma comment(lib, "iphlpapi.lib")

#define MALLOC(x) HeapAlloc(GetProcessHeap(), 0, (x)) 
#define FREE(x) HeapFree(GetProcessHeap(), 0, (x))

/* Note: could also use malloc() and free() */

int main()
{
    PMIB_TCPSTATS pTCPStats;
    DWORD dwRetVal = 0;

    pTCPStats = (MIB_TCPSTATS*) MALLOC (sizeof(MIB_TCPSTATS));
    if (pTCPStats == NULL) {
        printf("Error allocating memory\n");
        return 1;
    }

    if ((dwRetVal = GetTcpStatisticsEx(pTCPStats,AF_INET)) == NO_ERROR) {
      printf("\tActive Opens: %ld\n", pTCPStats->dwActiveOpens);
      printf("\tPassive Opens: %ld\n", pTCPStats->dwPassiveOpens);
      printf("\tSegments Recv: %ld\n", pTCPStats->dwInSegs);
      printf("\tSegments Xmit: %ld\n", pTCPStats->dwOutSegs);
      printf("\tTotal # Conxs: %ld\n", pTCPStats->dwAttemptFails);
      printf("\tAttemp failed: %ld\n", pTCPStats->dwAttemptFails);
      printf("\tcurr estab: %ld\n", pTCPStats->dwCurrEstab);
      printf("\testab reset: %ld\n", pTCPStats->dwEstabResets);
      printf("\tIn err: %ld\n", pTCPStats->dwInErrs);
      printf("\tmax conn: %ld\n", pTCPStats->dwMaxConn);
      printf("\tNum conn: %ld\n", pTCPStats->dwNumConns);
      printf("\tout rst: %ld\n", pTCPStats->dwOutRsts);
      printf("\tretrans seg: %ld\n", pTCPStats->dwRetransSegs);
       printf("\tRtoAlgorithm: %ld\n", pTCPStats->dwRtoAlgorithm);
        printf("\RtoMax: %ld\n", pTCPStats->dwRtoMax);
         printf("\RtoMin: %ld\n", pTCPStats->dwRtoMin);
          printf("\RtoAlgorithm: %ld\n", pTCPStats->RtoAlgorithm);
    }
    else {
      printf("GetTcpStatistics failed with error: %ld\n", dwRetVal);

      LPVOID lpMsgBuf;
      if (FormatMessage( FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM | 
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dwRetVal,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), // Default language
        (LPTSTR) &lpMsgBuf,
        0,
        NULL )) {
        printf("\tError: %s", lpMsgBuf);
      }
      LocalFree( lpMsgBuf );
    }

    if (pTCPStats)
        FREE (pTCPStats);
    system("pause");
} 
```

并获得 IPv6 的统计信息，我只是替换`AF_INET`为`AF_INET6`

# raspberry-pi - Raspberry Pi Raspbian Web Kiosk 虚拟键盘解决方案

> ID：15783482
> 
> 赞同：3
> 
> 时间：2013-04-03T09:24:12.983
> 
> 标签：raspberry-pi, touchscreen, kiosk, raspbian, kiosk-mode

我按照 Alan D. Moore 的分步指南让我的 Raspberry Pi 在 kiosk 模式下运行。

我做了自己的配置，因为我需要它在没有物理键盘和鼠标的触摸屏上运行。

这是我的 ~/.xinitrc 文件的外观。

```
xset s off
xset -dpms
matchbox-window-manager &
matchbox-keyboard &
while true; do
    rsync -qr --delete --exclude='.Xauthority' /opt/kiosk/ $HOME/
    midori -i 600 -e Fullscreen -e Navigationbar -a http://myport.ac.uk
done 
```

我使用 apt-get install 将 matchbox-keyboard 用作屏幕虚拟键盘解决方案。

看看钥匙有多小！几乎不可触摸且超级不准确...![例子](https://i.stack.imgur.com/YGMsr.jpg)

真正的问题是，如果有人知道让键盘变大的方法，是否可以推荐其他解决方案或调整配置？我是一个完全的 debian 新手，所以我真的希望我能在这里得到一些帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T19:36:45.120

尝试替换该行：

```
matchbox-keyboard & 
```

和：

```
matchbox-keyboard -s 20 & 
```

其中*-s*是出现在每个键上的字体大小（字母）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T14:34:30.973

看这里： http: [//mottie.github.io/Keyboard/](http://mottie.github.io/Keyboard/)
您可以使用 javascript 制作 OSK。

# c# - WPF - 自动调整所有文本的大小

> ID：15783492
> 
> 赞同：4
> 
> 时间：2013-04-03T09:24:31.327
> 
> 标签：c#, wpf, xaml, visual-studio-2012

我正在尝试使我的应用程序中的所有元素自动调整为父元素。使用网格、边距和自动尺寸效果很好。问题是文本大小没有调整大小，并且在大元素内变得非常小。我尝试使用带有按钮的视图框，效果很好：

```
<Button x:Name="button_1">
  <Viewbox>
    <TextBlock Text="Button1"></TextBlock>
  </Viewbox>                
</Button> 
```

但我不能让它与**TreeviewItem 中的 Header 一起使用。** 如何自动调整应用程序中所有文本元素的字体？对此的任何解决方案都非常受欢迎。不需要涉及使用 viewbox 元素。

**编辑：** 我的问题可能有点不清楚。我的问题是自动调整 TreeViewItem 中标题内的文本。

```
<TreeView x:Name="tree1" Margin="0">
    <TreeViewItem x:Name="item1" Header="Item1"> //This header needs to autosize
     ...
    </TreeViewItem>
</TreeView> 
```

**解决方案：**相当于 mathieu 提供的答案。

```
<TreeView x:Name="tree1" Margin="0">
    <TreeViewItem x:Name="item1">
      <TreeViewItem.Header>
        <Viewbox>
          <TextBlock>Item1</TextBlock>
        </Viewbox>
      </TreeViewItem.Header>
    </TreeViewItem>
</TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:51:26.200

像这样声明你的标题：

```
<TreeView x:Name="tree1" Margin="0">
    <TreeViewItem x:Name="item1">
        <TreeViewItem.Header>
            <Viewbox>
                <TextBlock TextWrapping="Wrap" Text="Header" />
            </Viewbox>   
        </TreeViewItem.Header>
    </TreeViewItem>
</TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:31:50.437

浏览这段代码：

```
String text = "Your Text Goes here";
    Typeface objTypeFace = new Typeface("Helvetica");
    FormattedText objft = new FormattedText(text, CultureInfo.CurrentCulture, 
            FlowDirection.LeftToRight, objTypeFace , 20, Brushes.Red);

    Size textSize = new Size(objft.Width, objft.Height); 
```

**或者：**

```
<Button x:Name="button_1">
  <Viewbox>
    <TextBlock TextWrapping="Wrap" Text="Button1"></TextBlock>
  </Viewbox>                
</Button> 
```

# python - 用星号python分割字符串

> ID：15783493
> 
> 赞同：3
> 
> 时间：2013-04-03T09:24:31.280
> 
> 标签：python, string, pattern-matching, matching, split

我2天前刚开始学习python，如果我犯了明显的错误，请见谅

```
strings: "brake  break  at * time" --> ["at","time"]
"strang  strange  I felt very *" --> ["very",""] 
```

我试图在 * 之前和之后得到消息

我的尝试：

```
re.match(r"(?P(first_word)\w+) ('_*_') (?P(first_word)\w+)",strings).group('first_word') 
```

获得第一个词

```
re.match(r"(?P(first_word)\w+) ('_*_') (?P(first_word)\w+)",strings).group('last_word') 
```

为了得到最后一句话

错误：没有什么可重复的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:31:21.820

只需使用`string.split('*')`.

像这样（仅适用于 1 *）：

```
>>> s = "brake  break  at * time"
>>> def my_func(s):
     parts = s.split('*')
     a = parts[0].split()[-1]
     b = parts[1].split()[0] if parts[1].split() else ''
     return a,b
>>> my_func(s)
('at', ' time') 
```

或者如果你想要正则表达式：

```
>>> s = "brake  break  at * time 123 * blah"
>>> regex = re.compile("(\w+)\s+\*\s*(\w*)")
# Run findall
>>> regex.findall(s)
[(u'at', u'time'), (u'123', u'blah')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:36:02.853

```
import re
text1 = "brake  break  at * time"
text2 = "strang  strange  I felt very *"
compiled = re.compile(r'''
(\w+)  # one or more characters from [_0-9a-zA-Z] saved in group 1
\s+  # one or more spaces
\*  # literal *
\s*  # zero or more spaces
(\w*)  # zero or more characters from [_0-9a-zA-Z] saved in group 2
''',re.VERBOSE)

def parse(text):
    result = compiled.search(text)
    return [result.group(1), result.group(2)]

print(parse(text1))
print(parse(text2)) 
```

输出：

```
['at', 'time']
['very', ''] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:27:21.283

尝试：

```
[x.strip() for x in "test1 * test2".split('*', 1)] 
```

`.strip()`去掉空格并`.split('*', 1)`用星号分割字符串一次。

因为你只想要一个词：

```
words = [x.strip() for x in "test1 * test2".split('*', 1)]
first = words[0].rsplit(' ', 1)[1]
last = words[1].split(' ', 1)[0] 
```

# android - 谷歌播放付费应用程序的收款

> ID：15783495
> 
> 赞同：1
> 
> 时间：2013-04-03T09:24:38.547
> 
> 标签：android, google-play

我有一个开发者帐户来上传 android apk，但我有几个问题

1.  在我的开发者帐户中，付费应用程序的收入在哪里？
2.  由于应用程序将被支付，所以我的客户如何获得收入，即用户支付的钱？我需要授予对我的开发者帐户的访问权限还是我必须为他创建一个新帐户？
3.  有没有办法将我的客户整合到我的开发者帐户下，他们会在他们的谷歌结账时获得付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:49:40.737

根据我的经验，您有一个所有付款都在其中的商家帐户。

此商家帐户具有以下详细信息：

-账户持有人姓名：-
银行名称：
-SWIFT 代码：
-IBAN：

Google 每个月都会付款，所得款项最终会存入该帐户。

抱歉，但我认为第三种选择不可行。

**补充：** 我认为Merchant aacount与Developer Account是严格关联的。所以我认为每个开发者账户只能有一个商家账户。无论如何，在设置中你有“**用户帐户和权限**”从那里，你可以邀请用户查看你的数据。

> 您是目前唯一有权访问此开发者控制台的人。
> 
> 您可以向不限数量的人授予对该控制台的访问权限。您将仍然是此控制台的所有者，并且是唯一可以授予或撤消其他用户访问权限的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:19:28.680

如果您有多个客户，那么最好为每个客户保留单独的 Google 帐户。因此您的客户无法看到其他应用程序。作为开发人员，您可以授予对他们所有帐户的访问权限，以便查看和检查更新。

因此，每个客户都将拥有基于其银行的单独财务详细信息。

我不认为你可以在谷歌控制台中有多个财务细节。但是您可以向 google play 支持团队提出您的问题，他们会确认您。

# c# - 代码首先是多对多表的集合名称

> ID：15783497
> 
> 赞同：2
> 
> 时间：2013-04-03T09:24:45.207
> 
> 标签：c#, ef-code-first

我是第一个编码的新手，并且是从 DB Context 派生的。这是我的模型的摘录。

```
[Table("pm_Material")]
public class Material
{
    public Material()
    {
        this.ProductionStepLogs = new HashSet<ProductionStepLog>();
    }

    [Key]
    public int MaterialId { get; set; }
    public int MaterialTypeId { get; set; }
    public string Description { get; set; }
    public decimal CostRate { get; set; }

    public virtual MaterialType MaterialType { get; set; }
    public virtual ICollection<ProductionStepLog> ProductionStepLogs { get; set; }
}

[Table("pm_ProductionStepLog")]
public class ProductionStepLog
{
    public ProductionStepLog()
    {
        this.Materials = new HashSet<Material>();
    }

    [Key]
    public System.Guid ProductionStepLogId { get; set; }
    public int ProductionStepId { get; set; }
    public System.Guid ProductId { get; set; }
    public Nullable<System.DateTime> BeginStep { get; set; }
    public Nullable<System.DateTime> EndStep { get; set; }
    public int UserId { get; set; }

    public virtual Product Product { get; set; }
    public virtual ProductionStep ProductionStep { get; set; }
    public virtual ICollection<Material> Materials { get; set; }
} 
```

数据库创建工作正常，但我想使用 [Table("pm_ProductionStepLogMaterials")] 指定自动生成的多对多表“ProductionStepLogMaterials”的名称。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:44:35.433

您应该`protected override void OnModelCreating(DbModelBuilder modelBuilder)`像这样覆盖您自己的 DBContext 类：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{    
   modelBuilder.Entity<Material>()
     .HasMany(a => a.ProductionStepLog)
     .WithMany(a => a.Material)
     .Map(x =>
     {
        x.ToTable("NameOfYourTable");
        x.MapLeftKey("MaterialId");
        x.MapRightKey("ProductionStepLogId");
     });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:41:20.607

AFAIK，这对于数据注释是不可能的，但是使用配置流式 API 是可能的：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<E1Type>()
            .HasMany(e1 => e1.Collection)
            .WithMany(e2 => e2.Collection)
            .Map(config => config.ToTable("MyTable"));
    } 
```

# c# - 得到乱码字符

> ID：15783501
> 
> 赞同：1
> 
> 时间：2013-04-03T09:24:58.830
> 
> 标签：c#, .net, xml, xslt, encoding

我的目标是通过一些 xsl 将原始 xml 文件转换为具有 utf-8 编码的目标。这是带有以下标头的原始 xml 文件：

```
 <?xml version='1.0' encoding='ISO-8859-1'?> 
```

我正在使用 xsl 将其转换为另一个 xml 文件。xsl 文件具有以下标头：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                version="1.0" 
                xmlns:xalan="http://xml.apache.org/xalan" 
                exclude-result-prefixes="xalan">
<xsl:output method="xml" 
            encoding="UTF-8" 
            indent="yes" 
            xalan:indent-amount="4"/> 
```

这是 C# 代码：

```
 XPathDocument myXPathDoc = new XPathDocument(FileName);
  XslCompiledTransform myXslTrans = new XslCompiledTransform();
  myXslTrans.Load("C:/test/test.xsl");
  XmlTextWriter myWriter = new XmlTextWriter(destinationFile, Encoding.UTF8);
  myWriter.Formatting = Formatting.Indented;
  myWriter.Indentation = 4;

   myXslTrans.Transform(myXPathDoc, null, myWriter);
   myWriter.Close(); 
```

这个的输出是我在destinationfile 得到一个乱码的阿拉伯文本。如何让它阅读正确的阿拉伯语文本。

**编辑，问题 2：**

原始 XML 文件缺少结束根/子标记。如何编辑此 xml 以包含这些内容。

例如原始 xml 文件，缺少 aaaa 和 nnnn 的关闭。如何使用 C# 进行编辑以获取它们。

```
<aaaa>
<nnnn)
<rrrr>
</rrrr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:54:42.757

如果您的原始 XML 文件包含阿拉伯字符，则其 XML 声明是谎言 - 该文件不是`encoding="ISO-8859-1"`因为该编码不能代表阿拉伯语。

如果您可以确定原始文件*真正*`XPathDocument`使用的编码，您可以通过使用采用 a`TextReader`而不是采用文件名的构造函数来强制以该编码读取文件。对于阿拉伯语，编码可能是 Windows-1256。

# zend-framework - 使用 Zend_Filter_Input 验证数组中的单个值

> ID：15783502
> 
> 赞同：0
> 
> 时间：2013-04-03T09:24:59.207
> 
> 标签：zend-framework

我正在尝试实现 Zend_Filter_Input 来验证数组中的第一个值是否不为空。

这是我的 HTML：

```
 <input type="text"  name="Firstname[1]">
 <input type="text"  name="Firstname[2]">
 <input type="text"  name="Firstname[3]"> 
```

此代码不起作用：

```
 $validators = array(

   'Firstname[1]'    => array( 
                                    'NotEmpty'

                                     ));

  $input = new Zend_Filter_Input(null, $validators, $_POST); 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:42:37.750

您正在尝试使用不兼容的数据类型，这是 ZF1 参考的摘录，可能有助于解释：

> 您可以将***输入数据***指定为第三个构造函数参数。数据结构是一个***关联数组***。键是字段名称，值是数据值。PHP 中的标准 $_GET 和 $_POST 超全局变量就是这种格式的示例。您可以使用这些变量中的任何一个作为 Zend_Filter_Input 的输入数据。

```
$input = new Zend_Filter_Input($filters, $validators, $data); 
```

我希望你能看到问题。

也许你可以尝试：

```
<input type="text"  name="Firstname[1]" required>
<input type="text"  name="Firstname[2]">
<input type="text"  name="Firstname[3]"> 
```

只要你使用 HTML5

# django - 文件字段未将数据传递给表单

> ID：15783504
> 
> 赞同：1
> 
> 时间：2013-04-03T09:25:04.157
> 
> 标签：django, django-forms, django-1.5

我正在使用 python 2.7 和 django 1.5

**表格.py**

```
class FileUploadForm( forms.Form ):
    file = forms.FileField()
    title = forms.CharField(max_length = 200) 
```

**HTML**

```
<form action="{% url 'upload_file' %}" method="post" class="userFroms">
    {% csrf_token %}
      <ul class="pull-left">
      <li>
      <div class="formLabel ">Title</div>

      <div class="formFields"><input name="title" type="text" />

      </div>

      </li>

      <li>
      <div class="formLabel">Upload File</div>
      <div class="formFields">
     <input name="file" type="file" size="20" />
      </div>
      </li>

      </ul>
       <p align="center" style="margin:20px 0; "><input type="submit" value="submit" class="btn btn-info" /></p>

   </form> 
```

**视图.py**

```
def upload_file(request):
    if request.method == 'POST':
        form = FileUploadForm(request.POST, request.FILES)
        if form.is_valid():
            handle_uploaded_file(request.FILES['file'])
            return HttpResponseRedirect('/success/url/')
    else:
        form = FileUploadForm()
    return render_to_response('upload.html', {'form': form})

def handle_uploaded_file(f):
    with open('documents/name.txt', 'wb+') as destination:
        for chunk in f.chunks():
            destination.write(chunk) 
```

我的表格有两个字段，都是必需的。因此，当我提交表单时，它会使用 form.is_valid() 函数检查有效性。在我的表单字典中，我可以看到标题是在cleaned_data 中发送的，但是文件丢失了。文件虽然在字典中可用。我究竟做错了什么？

```
{'files': {}, 'is_bound': True, 'cleaned_data': {'title': u'dsad'}, 'error_class': <class 'django.forms.util.ErrorList'>, 'empty_permitted': False, 'fields': {'title': <django.forms.fields.CharField object at 0x7f64783ed410>}, 'initial': {}, 'label_suffix': u':', 'prefix': None, '_changed_data': None, 'data': <QueryDict: {u'title': [u'dsad'], u'csrfmiddlewaretoken': [u'fRCrB7JrXIQVVfQSJW70eayu5DM9PiIM'], u'file': [u'406123_138447936269777_246495737_n.jpg']}>, '_errors': {'file': [u'This field is required.']}, 'auto_id': u'id_%s'} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T09:26:38.900

您还没有设置表单的编码类型：

```
<form enctype="multipart/form-data" action="{% url 'upload_document' %}" method="post" class="userFroms"> 
```

# jquery - : 第一个孩子影响所有孩子

> ID：15783507
> 
> 赞同：2
> 
> 时间：2013-04-03T09:25:11.073
> 
> 标签：jquery, css-selectors

嗨，我正在尝试定位`<a>`.current-cat-parent 下的第一个元素，但我的 jquery 代码正在影响其`<a>`下的所有元素。我怎样才能只针对第一个直接`<a>`元素？谢谢！

```
$(".current-cat-parent a:first-child").click(function(e){
            e.preventDefault();
          if( $(this).hasClass('hide') ){
            $(this).next().slideDown(800);
            $(this).removeClass('hide');
          } else { 
            $(this).next().slideUp(800);
            $(this).addClass('hide');
          }
    }); 
```

```
<li class="cat-item cat-item-1 current-cat-parent">
  <a title="View all posts filed under Clothing" href="http://site.com/category/clothing">Clothing</a>
  <ul class="children">
    <li class="cat-item cat-item-3"><a title="View all posts filed under Jeans" href="http://site.com/category/clothing/jeans">Jeans</a></li>
    <li class="cat-item cat-item-2 current-cat"><a title="View all posts filed under Suits" href="http://site.com/category/clothing/suits">Suits</a></li>
  </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:26:44.037

您可以使用[eq()](http://api.jquery.com/eq/)来定位第*一个*孩子。

```
$(".current-cat-parent a:eq(0)") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:29:16.330

而不是这个：

```
$(".current-cat-parent a:first-child") 
```

使用直接孩子`>`：

```
$(".current-cat-parent > a:first-child") 
```

## 笔记：

我认为你的主要问题是`.hide`css类。为什么你需要它？我建议您将其设为空白 CSS 类或将其删除。

### [小提琴](http://jsfiddle.net/hYMWf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:26:15.993

它应该是

```
$(".current-cat-parent a:eq(0)").click(function(e){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T09:28:44.853

如果您仔细查看 HTML 标记，您会注意到所有`a`元素也`first-child`属于它们各自的父级。解决方案是使用以下选择器之一：

```
.current-cat-parent > a
.current-cat-parent a:first
.current-cat-parent a:eq(0) 
```

注意`:first`和`:first-child`不一样。

# javascript - 如何在 JavaScript 中找到给定小数或其他数字的整数？

> ID：15783509
> 
> 赞同：1
> 
> 时间：2013-04-03T09:25:16.553
> 
> 标签：javascript

我需要在 JavaScript 中进行如下计算：

1.  如果除法的结果是 0.02，最终结果应该是 1
2.  如果除法结果是 1.2，最终结果应该是 2
3.  如果除法结果是 2.05，最终结果应该是 3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:30:02.197

我相信您正在寻找[`Math.ceil`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.8.2.6)：

```
var ceilResult = Math.ceil(resultOfDivision); 
```

例如：

```
console.log(Math.ceil(0.02)); // "1"
console.log(Math.ceil(1.2));  // "2"
console.log(Math.ceil(2.05)); // "3" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:30:43.417

使用 Math.ceil() 函数（[参见文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)）

引用文档：

*以下示例显示了 Math.ceil() 的示例用法：*

```
Math.ceil(.95); // 1
Math.ceil(4); // 4
Math.ceil(7.004) // 8 
```

# c - Twitter 喜欢 C 中的“字符左”功能问题：如何防止它进入下一行？

> ID：15783510
> 
> 赞同：0
> 
> 时间：2013-04-03T09:25:17.313
> 
> 标签：c, twitter, character, project, getch

就像我的最后一个问题一样，这与我的学校项目有关。我必须在 C 中做一个“类似推特”的程序，但我遇到了一个小布局问题。**请记住，我知道此代码未优化，我首先“玩弄”以使基础工作正常。**

这是我遇到问题的功能（不要注意带有所有\b的printf，它只是暂时的并且非常混乱）：

```
printf("Saisissez votre message (%d caracteres max):",DIM_MSG); //Message entry character by character
        //Boucle de saisie de message caractere par caractere
        while((temptweet=getch()) != '\r' )
        {
            if ( temptweet == '\b' ) {
                if( i>0 ){
                    printf ( "\b\b\b\b\b\b\b\b\b\b%c%c%c%c%c%c%c%c%c%c\b\b\b\b\b\b\b\b\b\b", ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ',' ');
                }
                if ( i != 0) {
                    printf ( "\b%c\b", ' ' );
                    i--;
                    printf(" %03d / %d",i,DIM_MSG); //Shows the remaining chracters left
                }

            }
            else if (i<DIM_MSG){
                flag=0;
                if(i!=0){
                    printf ( "\b\b\b\b\b\b\b\b\b\b%c\b", ' ' );
                }
                tweet[i] = (char)temptweet;
                printf("%c",tweet[i]);
                if(i>=(DIM_MSG-WARN)){Color(12,0);}
                printf(" %03d / %d",i+1,DIM_MSG);
                if(i>=(DIM_MSG-WARN)){Color(7,0);}
                i++;
            }
            if( i==0 && flag!=1){
                    printf ( "\b\b\b\b\b\b\b\b\b\b%c%c%c%c%c%c%c%c%c%c\b\b\b\b\b\b\b\b\b\b", ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ',' ');
                    flag=1;
            }
        }
        tweet[i]='\0'; 
```

这个函数让用户输入一条消息，并显示用户还剩下多少个字符供他输入（DIM_MSG 常量就是这个大小）。基本上，当用户键入时，它会显示在文本右侧写入的字符数（有点像文本框底部的 twitter）。

我遇到的问题是，当您输入较长的内容并到达命令窗口的一侧时，它会“中断”并转到下一行，我最终会在窗口中看到类似这样的内容：

```
Saisissez votre message (140 caracteres max):testtesttesttesttesttestt 025 / 140
esttesttesttetstesttesttesttesttesttesttesttesttesttesttesttesttesttes 095 / 140
ttest 100 / 140 
```

困扰我的是，当您删除文本（退格键或 '\b' ）时，它会停在您所在的行。如果您查看示例，您将能够在最后一行删除“ttest”，然后您将被卡住（尽管计数器仍然会下降而不移动）

如果您对如何解决此问题或如何改进此问题有任何想法，欢迎一切！

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:20:02.883

您的想法似乎偏离了通常的 CLI 设计。也许GUI对此会更明智。

如果您真的希望使用 CLI，让我们看看如何围绕 CLI 为您的应用程序建模，而不会妨碍您。使用 CLI 的人可能会期待在 CLI 中运行的应用程序的某些内容：

1.  典型的 CLI 具有保留先前输入行的缓冲区，使用 CLI 的人对此已经习惯了。因此，“向上”箭头被大量使用。这在您的应用程序中实现起来会很复杂，对吧？
2.  CLI 应用程序往往会很快返回到 shell，即使它们作为后台进程无限运行。同样，使用 CLI 的人已经习惯了这一点。他们可能想在你的“twitter”运行时输入命令，如果它阻止他们这样做，他们可能会想关闭它。
3.  您已经发现了退格问题。

您如何一次实现所有这些功能，而不会使您的代码库过于复杂？将其拆分为两个应用程序：

1.  接收消息的程序。该程序在后台运行，将收到的任何消息写入由`argv`. 这样，用户可以创建一个命名管道来发送消息。当用户想要接收和查看消息时，他/她可以`cat messages`回到他/她决定查看消息之前的任何事情，甚至无需切换窗口。该程序遵循与许多久经考验的程序相同的设计原则，例如 apache 等在后台运行并记录到文件的程序。
2.  发送消息的程序。该程序发送在 中找到的消息`argv`并退出。您可以让它与后台应用程序通信。这样，在程序终止之前，网络延迟导致的延迟非常小。请注意，这也遵循与许多标准命令行程序相同的设计原则：`ls`、`dir`、`cd`等......它完成了它的工作，然后退出，允许再次使用 CLI 会话。当用户想要发送消息时，他/她可以`send message ...`，然后回到他/她之前正在做的事情。

通过将您的设计分成两个程序，您已经满足了所有这三个期望，而没有任何麻烦的库，例如 ncurses 或系统相关的 hack。shell 为您处理向上箭头的行为（或者它不处理，在这种情况下用户可能不会关心），后台进程不会阻止用户在同一个控制台窗口中执行其他工作，并且shell 为你处理退格，所以你也不需要处理它。

我看到的唯一其他选择是使用 GUI 或诸如 ncurses 之类的库，这将使您能够创建相同的功能，但使用更复杂的解决方案和更少的可移植性。

# servicestack - ServiceStack：httpReq.GetRawBody() 为空

> ID：15783512
> 
> 赞同：2
> 
> 时间：2013-04-03T09:25:20.800
> 
> 标签：servicestack

我有一个全局请求过滤器，我想使用 log4net 记录所有 http 流量 - 公司限制。问题是 InputStream 总是 lenght = 0。soap 信封正确反序列化并且服务执行成功，但第一次序列化后 inputstream 不可用。如果我想记录所有传入和传出的 http 流量，这是错误的方法吗？我应该怎么做才能做到这一点？我不想记录反序列化的 requestDto。

```
this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    LogManager.LogFactory.GetLogger(this.GetType()).Info(httpReq.GetRawBody());
}); 
```

方法中的 ServiceStack.WebHost.Endpoints.Support.SoapHandler 类型似乎发生错误，其中 using 语句关闭流而不缓冲它：

```
 protected static Message GetRequestMessage(Stream inputStream, MessageVersion msgVersion)
    {
        using (var sr = new StreamReader(inputStream))
        {
            var requestXml = sr.ReadToEnd();

            var doc = new XmlDocument();
            doc.LoadXml(requestXml);

            var msg = Message.CreateMessage(new XmlNodeReader(doc), int.MaxValue,
                msgVersion);

            return msg;
        }
    } 
```

当我尝试在 ServiceStack.WebHost.Endpoints.Extensions 类型上访问 GetRawBody 时，将执行以下逻辑：

```
 public string GetRawBody()
    {
        if (bufferedStream != null)
        {
            return bufferedStream.ToArray().FromUtf8Bytes();
        }

        using (var reader = new StreamReader(InputStream))
        {
            return reader.ReadToEnd();
        }
    } 
```

在这里，我希望输入流被缓冲，因为它 Inputstreaem 不再可用（长度 = 0）。

这不是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:02:46.533

你见过 [Request Logger](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)或[IRequiresRequestStream 吗](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization#reading-directly-from-the-request-stream)？这些可能有助于提供有关日志记录请求的一些见解。另外，我不相信 InputStream 在 GET 请求上会有长度。

# javascript - 我们如何在 ember.js 中将用户从一个页面重定向到另一个页面？

> ID：15783513
> 
> 赞同：1
> 
> 时间：2013-04-03T09:25:24.417
> 
> 标签：javascript, ember.js

我试图找出 ember.js 是否有某种或另一种方式，我们可以从一个应用程序页面重定向到另一个应用程序页面，同时维护一些状态数据，如活动路由。（不是单页应用）

我在应用程序 A 中，路线 3。

现在我想重定向到另一个页面，其中包含应用 B。

我还想维护信息，通知应用程序 B，我是专门从应用程序 A 中的路线 3 来的。

希望这能让一些事情变得清楚。

# android - Android：相机预览代码不适用于 Nexus7 平板电脑（Android 版本 - 4.2）

> ID：15783515
> 
> 赞同：0
> 
> 时间：2013-04-03T09:25:28.483
> 
> 标签：android, camera

获取相机源的 Android 相机预览代码在 Nexus7 平板电脑上不起作用 - android 版本 4.2。

```
Camera camera = Camera.open();
camera.startPreview();
Preview preview.setCamera(camera); 
```

它在 camera.startPreview() 上显示 NullPointerException。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T09:44:36.867

问题： [Android 相机预览代码不适用于 Nexus7 -surfaceView 错误](https://stackoverflow.com/questions/16039670/android-camera-preview-code-not-working-with-nexus7-surfaceview-error)

解决方案：

```
int numberOfCameras = Camera.getNumberOfCameras();
for (int i = 0; i < numberOfCameras; i++) {
    CameraInfo info = new CameraInfo();
    Camera.getCameraInfo(i, info);
    if (info.facing == CameraInfo.CAMERA_FACING_BACK) {
        camera = Camera.open(i);
    }
} 
```

同样，您可以搜索前置摄像头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T18:52:24.403

以下代码可能会对您有所帮助（对于背面的相机）：

```
Camera camera = Camera.open(Camera.CameraInfo.CAMERA_FACING_BACK); 
```

# ckeditor - 附加数据附加到 CKEditor 字符串

> ID：15783517
> 
> 赞同：0
> 
> 时间：2013-04-03T09:25:33.787
> 
> 标签：ckeditor, http-post, fckeditor, string-length

当我在 CKEditor 中输入 1960 个字符并提交表单时，我的控制器将获得大约 2000 个字符。我已经检查了数据，但仍然无法找出发生这种情况的确切原因

UI 中的数据长度：**1978** 控制器中的数据长度：**1991**

因此，添加了额外的 13 个字符。

**我在 UI 中发送的数据如下 --------------------------**

一些较旧的驱动程序版本允许您选择“字母”大小并调整边距以定义票证大小。此功能在新驱动程序中仍然可用以支持旧安装。

选择新字体时，Windows 将默认使用以前的字体大小。这个尺寸通常是不正确的。您必须重新分配有效的字体大小以保证屏幕上的正确字体表示。Word Pad 中的“Tall”字体无法在屏幕上正确显示。

**驱动程序使用 - 仅字（PCL 和 FGL）**
在使用 Word 之前，您必须在工具/选项/兼容性中选中“使用打印机度量来布局文档”框。所有以前的“驱动程序使用”指南都适用于 Word。Word 还为您提供了在应用程序本身中定义自定义页面大小的独特功能。我们强烈建议**不要**使用此功能。但是，以下描述将解释此功能的使用和限制。

虽然 Word 允许您在纵向和横向模式下操作页面大小，但发送到打印机的数据只能在纵向模式下正常工作。您**不能**使用 Word 定义的自定义页面大小以横向模式打印。

在纵向模式下，您可以手动设置最长 11 英寸的任何票长的高度。对于长度超过 11 英寸的票证，您需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于 11 英寸，您将需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于 11 英寸，您将需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于
 **

**我在控制器中接收到的数据如下 --------------------------------------**

一些较旧的驱动程序版本允许您选择“字母”大小并调整边距以定义票证大小。此功能在新驱动程序中仍然可用以支持旧安装。

选择新字体时，Windows 将默认使用以前的字体大小。这个尺寸通常是不正确的。您必须重新分配有效的字体大小以保证屏幕上的正确字体表示。Word Pad 中的“Tall”字体无法在屏幕上正确显示。

**驱动程序使用 - 仅字（PCL 和 FGL）**
在使用 Word 之前，您必须在工具/选项/兼容性中选中“使用打印机度量来布局文档”框。所有以前的“驱动程序使用”指南都适用于 Word。Word 还为您提供了在应用程序本身中定义自定义页面大小的独特功能。我们强烈建议**不要**使用此功能。但是，以下描述将解释此功能的使用和限制。

虽然 Word 允许您在纵向和横向模式下操作页面大小，但发送到打印机的数据只能在纵向模式下正常工作。您**不能**使用 Word 定义的自定义页面大小以横向模式打印。

在纵向模式下，您可以手动设置最长 11 英寸的任何票长的高度。对于长度超过 11 英寸的票证，您需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于 11 英寸，您将需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于 11 英寸，您将需要添加您自己的页面大小，如上文“所有应用程序”部分所述。
长度大于

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:45:02.720

我取决于您请求输出的方式，但这可以是空格，也可以
是您插入的所有内容的一些 \n\r 标记。

您是否已经尝试查看短文本中的差异，以找到它的确切含义？

我认为这是一些 \n\r 标签，当您在代码中请求数据时应该看到这些标签。如果不是，我确定它是空格。

# ios - Nsoperations 和 NSoperationqueues 的区别

> ID：15783519
> 
> 赞同：-3
> 
> 时间：2013-04-03T09:25:39.780
> 
> 标签：ios

在此处输入代码 NSoperations 和 NSoperationqueues 有什么区别？

谢谢 keerthi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:30:28.740

NSOperation 类是一个抽象类，用于封装与单个任务关联的代码和数据。

NSOperationQueue 类管理一组 NSOperation 对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。

您也可以检查这些链接..因为他们给出了很好的答案：-

[NSOperation 和 NSInvocationOperation 的区别？](https://stackoverflow.com/questions/12908886/difference-between-nsoperation-and-nsinvocationoperation)

[http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

# c++ - numeric_limits 最低和最低成员函数

> ID：15783525
> 
> 赞同：28
> 
> 时间：2013-04-03T09:25:57.930
> 
> 标签：c++, c++11, stl, standard-library

```
numeric_limits<T>::min();
numeric_limits<T>::lowest(); 
```

两个函数返回的值有什么不同？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-03T09:30:53.360

C++11 标准的第 18.3.2.4 段规定：

> `static constexpr T min() noexcept`;
> 
> 1 最小有限值。
> 
> 2 对于具有非规范化的浮点类型，返回最小正规范化值。
> 
> 3 对所有专业都有意义
> 
> [...]
> 
> `static constexpr T lowest() noexcept`;
> 
> 6 一个有限值 x，使得在 y < x 处没有其他有限值 y。
> 
> 7 对于 is_bounded != false 的所有特化都有意义。

脚注 197 然后添加了相关注释：

> `lowest()`是必要的，因为并非所有浮点表示都有一个最小（最负）值，它是最大（最正）有限值的负值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T09:30:31.960

对于浮点类型`min`，返回类型中可`> 0`表示的最小有限数（即具有最低绝对值的数`!= 0`），同时`lowest`返回可表示的最小有限数（即小于 的最大绝对值的负数`-infinity`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:28:41.283

如果您检查这些功能的参考，例如[this one for`min`](http://en.cppreference.com/w/cpp/types/numeric_limits/min)和[this one for`lowest`](http://en.cppreference.com/w/cpp/types/numeric_limits/lowest)您可以看到有一些不同的值。

# mysql - 带有 OR 条件的 LEFT OUTER JOIN <- 杀死数据库服务器

> ID：15783527
> 
> 赞同：0
> 
> 时间：2013-04-03T09:25:59.363
> 
> 标签：mysql, join, outer-join

简而言之..

```
SELECT * 
FROM tbl1 
LEFT OUTER JOIN tbl2 ON tbl1.ID = tbl2.externalRefID 
WHERE tbl1.varref = '12345' OR tbl2.varref = '12345'; 
```

对于这些表中的任何数据量，此查询都需要很长时间。然而，我需要第二个外部连接的表，因为它通常不会在 externalRefID 上匹配。为所有引用的列创建的索引但没有区别，因为我需要跨多个表的索引（这可能吗？）

这一定很明显，但我看不到树木的树林......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:05:24.767

您是否考虑过将查询重构为 UNION 查询？

```
SELECT *
  FROM tbl1 INNER JOIN tbl2 ON tbl1.id = tbl2.externalRefId
 WHERE tbl2.varref = '12345'
UNION
SELECT *
  FROM tbl1 OUTER JOIN tbl2 ON tbl1.id = tbl2.externalRefId
 WHERE tab.1.varref = '12345' 
```

您也可以在此使用 UNION ALL。

# gwt - 尝试使用 watir-webdriver 双击元素的本机事件错误

> ID：15783528
> 
> 赞同：0
> 
> 时间：2013-04-03T09:25:59.567
> 
> 标签：gwt, webdriver, watir, watir-webdriver, browser-automation

我正在为 GWT 应用程序编写自动测试。我尝试双击表格元素。我正在使用此代码单击：

```
browser.element(:xpath, '/html/body/div[5]/div[2]/div/div/div/div[2]/div/div/div/div/div/div/div/div[2]/div/div[2]/div/div/table/tbody[2]/tr[1]/td[1]/div').double_click 
```

执行此命令时，我收到如下错误：

```
test_search(TC_article_example):Selenium::WebDriver::Error::InvalidElementStateError: Cannot perform native interaction: Could not load native events component.

[remote server] file:///C:/Users/TOMASZ~1.RYB/AppData/Local/Temp/webdriver-profile20130403-4556-12yrrcd/extensions/fxdriver@googlecode.com/components/driver_component.js:8577:in `generateErrorForNativeEvents'
[remote server] file:///C:/Users/TOMASZ~1.RYB/AppData/Local/Temp/webdriver-profile20130403-4556-12yrrcd/extensions/fxdriver@googlecode.com/components/driver_component.js:8610:in `FirefoxDriver.prototype.mouseMove'
[remote server] file:///C:/Users/TOMASZ~1.RYB/AppData/Local/Temp/webdriver-profile20130403-4556-12yrrcd/extensions/fxdriver@googlecode.com/components/command_processor.js:10275:in `DelayedCommand.prototype.executeInternal_/h'
[remote server] file:///C:/Users/TOMASZ~1.RYB/AppData/Local/Temp/webdriver-profile20130403-4556-12yrrcd/extensions/fxdriver@googlecode.com/components/command_processor.js:10280:in `DelayedCommand.prototype.executeInternal_'
[remote server] file:///C:/Users/TOMASZ~1.RYB/AppData/Local/Temp/webdriver-profile20130403-4556-12yrrcd/extensions/fxdriver@googlecode.com/components/command_processor.js:10220:in `DelayedCommand.prototype.execute/<'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/http/common.rb:59:in `new'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/http/default.rb:66:in `request'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/bridge.rb:616:in `raw_execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/bridge.rb:594:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/bridge.rb:389:in `mouseMoveTo'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/mouse.rb:54:in `move_to'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/action_builder.rb:344:in `block in perform'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/action_builder.rb:343:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/action_builder.rb:343:in `perform'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir-webdriver/elements/element.rb:181:in `hover'
C:/Watir/polisy.rb:27:in `test_search' 
```

我已将此代码添加到我的脚本中，但这没有帮助：

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile.native_events = false
browser = Watir::Browser.new :firefox, :profile => profile 
```

请给我一些提示。我使用**selenium 2.31**，**watir 4.0**和**firefox 19.0.2**。PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:03:38.670

该错误听起来像是需要本地事件，而您不允许它们。尝试将本机事件的配置文件设置更改为 true

还抛弃了丑陋、脆弱、无法阅读的 xpath。Watir 有更易读、更简单的方法来识别您尝试单击的 div。

开始一个新问题，包括该 div 所在表格的一些 HTML，以及您如何选择它的逻辑（当然它与表格的内容有关？不仅仅是第三个表格的第二行的第二个单元格）我们可以给你一些建议，告诉你如何更好地选择元素，这些元素将产生有意义且可读的代码，如果表格内容发生轻微变化也不会中断，并且不会因为稍微重新设计而中断页。

# tar - 如何在没有 tar 的情况下 netcat 多个文件？

> ID：15783530
> 
> 赞同：2
> 
> 时间：2013-04-03T09:26:05.430
> 
> 标签：tar, file-transfer, netcat

目前我正在通过 telnet 来回传输文件，我想一次发送多个文件。

但是，我的目标平台（Blackfin 处理器）在其内核/busybox 配置（uClinux 发行版）中没有启用“tar”。

众所周知，正常的命令是：

```
nc -p 12345 -l | tar -x
tar -c * | nc 192.168.0.100 12345 # with x.100 the robot IP address 
```

如何在**不使用 tar**的情况下使用 netcat 发送多个文件？

请考虑到我无法在平台上轻松添加二进制文件。最好使用基本实用程序和/或 shell 脚本来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T08:59:04.853

终于设法自己做到了，可以做到！

这里`$l>`代表您的机器，带有`IP 192.168.0.10`. 并且`$e>`是在没有 tar 的嵌入式设备上完成的，在我的例子中是一个机器人。`dd`它使用能够复制整个磁盘的老式。

```
$l> nc -p 12345 -l | dd obs=4K of=/tmp/file.jffs2
$e> dd ibs=4K if=/dev/mtdblock2 | nc 192.168.0.10 12345 
```

就是这样，但因为不是每个人都知道如何读取这种形式的文件系统，所以这是挂载它的方式：

```
file /tmp/file.jffs2
  /tmp/file.jffs2: Linux jffs2 filesystem data little endian
sudo su     #careful
mknod /tmp/mtdblock0 b 31 0
modprobe loop
losetup /dev/loop0 /tmp/file.jffs2
modprobe mtdblock
modprobe block2mtd
echo "/dev/loop0,128KiB" > /sys/module/block2mtd/parameters/block2mtd
modprobe jffs2
mkdir /media/robot
mount -t jffs2 /tmp/mtdblock0 /media/robot
Ctrl-D  #back as normal user 
```

是的，您需要环回设备，否则：

```
sudo mount -t jffs2 /tmp/file.jffs2 /media/robot
  mount: /tmp/file.jffs2 is not a block device (maybe try `-o loop'?) 
```

从逻辑上讲，它是一个文件（字符），而不是块设备。我唯一不知道的是`dd`，嵌入式设备上的命令是否有语法只能选择要包含的文件系统的子集。我认为这不太可能，因为这需要`dd`理解`jffs2`，而它的优势在于它的原始字节复制行为。

# jquery - ajax 输出不会从操作页面返回

> ID：15783534
> 
> 赞同：0
> 
> 时间：2013-04-03T09:26:11.343
> 
> 标签：jquery, ajax, anchor

我只是想在我的 div 中显示输出`result2`.. 但输出保持在 action.php?me=1 ... 我在这里做错了什么.. url 问题或什么.. 我得到了输出但不在此页面中..

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script>
$(document).ready(function(){
   $('a.pop').click(function(e){ 
     $.ajax({
            type: "GET",
            url: this.href,
            success: function(data){
                      $(".result2").append(html);
            }
     });
     return false;
}); 
});
</script>
<body>

<a href="http://ex.com/free/action.php?me=1"  class="member" id="member" rel="example">click to launch</a>
<div id="result2"></div>
</body>
</html> 
```

提前感谢十几个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:28:42.267

更改`$(".result2").append(html);`为`$("#result2").append(html);`，因为它是一个 id，而不是一个类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:30:04.573

使用 id 选择器而不是类 ...`.`是类选择器 .. 而`#`id 是 ... 您的 result2 是该 div 的 id .. 并且您将您的响应命名为数据 .. 但您在那里使用 html ...

试试这个

```
$("#result2").append(html); 
```

这里

```
success: function(data){
         $("#result2").append(data);
       // --^---here   //-----^^^^---here your response is as data and not html
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:30:50.980

```
$(document).ready(function(){
   $('a.pop').click(function(e){ 
     $.ajax({
            type: "GET",
            url: this.href,
            success: function(data){
                      // result2 is id, and there is no html but data.
                      $("#result2").append(data);
            }
     });
     return false;
}); 
}); 
```

# wpf - 仅使用 XAML 聚焦文本框

> ID：15783535
> 
> 赞同：3
> 
> 时间：2013-04-03T09:26:12.337
> 
> 标签：wpf, xaml, textbox, focus

我正在尝试将键盘焦点设置为默认情况下折叠的堆栈面板中包含的文本框。当堆栈面板变得可见时，我希望文本框默认成为焦点。

我试过这段代码：

```
<StackPanel Orientation="Vertical" FocusManager.FocusedElement="{Binding ElementName=TxtB}">
  <TextBox x:Name="TxtA" Text="A" />
  <TextBox x:Name="TxtB" Text="B" />
</StackPanel> 
```

但是，它没有用。类型光标出现了，但它没有闪烁，也不允许书写。

是否可以仅使用 XAML 来解决我的问题？也许是触发器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:22:04.810

是的，正如您自己所说，简单的触发器似乎可以解决问题：

```
<StackPanel Orientation="Vertical">
    <StackPanel.Style>
       <Style TargetType="StackPanel">
          <Style.Triggers>
              <Trigger Property="Visibility" Value="Visible">
                  <Setter Property="FocusManager.FocusedElement" 
                          Value="{Binding ElementName=TxtA}" />
              </Trigger>
          </Style.Triggers>
       </Style>
    </StackPanel.Style>

    <TextBox x:Name="TxtA" Text="A" />
    <TextBox x:Name="TxtB" Text="B" />
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:30:37.387

您需要创建附加属性 IsFocused，当设置为 true 时，它​​将调用附加元素的 Focus() 方法。等等，我会添加一些代码。

```
public static class FocusHelper
    {
        static FocusHelper()
        {
            var fpmd = new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, HandleAttachedIsFocusedChanged) { DefaultUpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged };
            IsFocusedProperty = DependencyProperty.RegisterAttached("IsFocused", typeof(bool?), typeof(FocusHelper), fpmd);
        }

        public static readonly DependencyProperty IsFocusedProperty;

        [Conditional("DEBUG")]
        public static void StartFocusTracing()
        {
            FocusManager.FocusedElementProperty.OverrideMetadata(typeof(FrameworkElement), new PropertyMetadata(HandleFocusedElementChanged));
        }

        private static void HandleFocusedElementChanged(DependencyObject o, DependencyPropertyChangedEventArgs args)
        {
            var element = args.NewValue as FrameworkElement;
            if (element == null)
            {
                Debug.WriteLine("Focus is lost");
                return;
            }

            Debug.WriteLine("Focus moved to {0} type {1}", element.Name, element.GetType().Name);

            var fs = FocusManager.GetFocusScope(element) as FrameworkElement;
            if (fs == null)
                return;

            Debug.WriteLine("Focus scope {0} of type {1}", fs.Name, fs.GetType().Name);
        }

        public static bool? GetIsFocused(DependencyObject element)
        {
            if (element == null)
            {
                throw new ArgumentNullException("element");
            }

            return (bool?)element.GetValue(IsFocusedProperty);
        }

        public static void SetIsFocused(DependencyObject element, bool? value)
        {
            if (element == null)
                throw new ArgumentNullException("element");

            element.SetValue(IsFocusedProperty, value);
        }

        private static void HandleAttachedIsFocusedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            WriteDependencyPropertyBindingInformation(d, IsFocusedProperty);

            var fe = (UIElement)d;

            // значение ранее было не задано
            if (e.OldValue == null)
            {
                var pd = DependencyPropertyDescriptor.FromProperty(UIElement.IsFocusedProperty, typeof(UIElement));
                pd.AddValueChanged(fe, HandleUIElementIsFocusedChanged);
            }

            if (e.NewValue == null)
            {
                var pd = DependencyPropertyDescriptor.FromProperty(UIElement.IsFocusedProperty, typeof(UIElement));
                pd.RemoveValueChanged(fe, HandleUIElementIsFocusedChanged);
                return;
            }

            if ((bool)e.NewValue)
            {
                Action setFocus = () =>
                    {
                        IInputElement elementToBeFocused = null;
                        IInputElement finalyFocusedElement = null;
                        // If current element is Focus Scope we try to restore logical focus
                        if (FocusManager.GetIsFocusScope(fe))
                        {
                            elementToBeFocused = FocusManager.GetFocusedElement(fe);
                            if (elementToBeFocused != null)
                            {
                                finalyFocusedElement = Keyboard.Focus(elementToBeFocused);
                            }
                        }

                        // If focus was not restored we try to focus
                        if (finalyFocusedElement == null
                            || (elementToBeFocused != finalyFocusedElement))
                        {
                            fe.FocusThisOrChild();
                        }
                    };
                if (ReflectionHelper.IsInMethod("MeasureOverride", typeof(FrameworkElement))) // hack of layout issue
                    Dispatcher.CurrentDispatcher.BeginInvoke(setFocus);
                else
                    setFocus();
            }
        }

        [Conditional("DEBUG")]
        private static void WriteDependencyPropertyBindingInformation(DependencyObject d, DependencyProperty property)
        {
            var binding = BindingOperations.GetBindingBase(d, IsFocusedProperty);

            if (binding == null)
            {
                Debug.WriteLine("Property {1} of object {0} has no bindings.", d, property.Name);
            }
            else
            {
                Debug.WriteLine("Property {1} of object {0} has binding.", d, property.Name);
                Debug.WriteLine("Type {0}", binding.GetType());

                var expressionBase = BindingOperations.GetBindingExpressionBase(d, IsFocusedProperty);
                Debug.Assert(expressionBase != null);

                Debug.WriteLine("Status {0}", expressionBase.Status);

                var expression = expressionBase as BindingExpression;
                if (expression != null)
                {
                    Debug.WriteLine("Source type {0}", expression.DataItem.GetType());
                    Debug.WriteLine("Source {0}",expression.DataItem);
                }
            }
        }   

        private static void HandleUIElementIsFocusedChanged(object sender, EventArgs e)
        {
            var uiElement = sender as UIElement;
            var isFocused = uiElement.IsFocused;
            ((DependencyObject)sender).SetCurrentValue(IsFocusedProperty, isFocused);
        }

        /// <summary>
        /// Tries to set focus to the element or any child element inside this one.
        /// Tab index is respected
        /// </summary>
        public static bool FocusThisOrChild(this DependencyObject element)
        {
            if (element == null)
                throw new ArgumentNullException("element");

            var inputElement = element as IInputElement;
            var wasFocused = inputElement != null && inputElement.Focus();

            if (!wasFocused)
            {
                element.SetFocusWithin();
            }

            return true;
        }

        public static bool SetFocusWithin(this DependencyObject element)
        {
            if (element == null)
                throw new ArgumentNullException("element");

            var children = element.GetVisualChildrenSortedByTabIndex();
            return children.Any(FocusThisOrChild);
        }
    } 
```

和辅助方法：

```
public static IEnumerable<DependencyObject> GetVisualChildrenSortedByTabIndex(this DependencyObject parent)
        {
            if (parent == null)
                throw new ArgumentNullException("parent");

            return parent.GetVisualChildren().OrderBy(KeyboardNavigation.GetTabIndex);
        }

public static bool IsInMethod(string methodName, Type ownerType, bool isStatic = false)
        {
            if (string.IsNullOrWhiteSpace(methodName))
                throw new ArgumentNullException("methodName");

            if (ownerType == null)
                throw new ArgumentNullException("ownerType");

            var stackTrace = new StackTrace(false);
            var isInMethod = stackTrace.GetFrames().Skip(1).Any(frame =>
                       {
                           var method = frame.GetMethod();
                           return method.Name == methodName
                                  && method.IsStatic == isStatic
                                  && ownerType.IsAssignableFrom(method.ReflectedType);
                       });

            return isInMethod;
        } 
```

# git - 如何在 git log 历史记录中合并不同的提交

> ID：15783541
> 
> 赞同：0
> 
> 时间：2013-04-03T09:26:25.857
> 
> 标签：git, commit, rebase

假设我们有提交 1->2->3->4->5 我认为历史可能太长了，我希望日志将 1、2 和 3 合并为一个，例如 1'->2-> 3->4->5 我该怎么做，我应该使用变基吗？似乎我无法在 rebase 后推送到远程仓库。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:32:55.230

首先进入交互式变基模式

```
git rebase -i HEAD~5 
```

（将 5 替换为您想要压缩的提交次数）

然后按照 git book Squashing commmits -part 中的说明进行操作。

[来自 git 书：](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Squashing-Commits)

> 也可以使用交互式变基工具进行一系列提交并将它们压缩为单个提交。该脚本在 rebase 消息中提供了有用的说明：
> 
> ```
> #
> # Commands:
> #  p, pick = use commit
> #  e, edit = use commit, but stop for amending
> #  s, squash = use commit, but meld into previous commit
> #
> # If you remove a line here THAT COMMIT WILL BE LOST.
> # However, if you remove everything, the rebase will be aborted.
> # 
> ```
> 
> 如果您指定“squash”而不是“pick”或“edit”，Git 会应用该更改及其之前的更改，并使您将提交消息合并在一起。所以，如果你想从这三个提交中进行一次提交，你可以让脚本看起来像这样：
> 
> ```
> pick f7f3f6d changed my name a bit
> squash 310154e updated README formatting and added blame
> squash a5f4a0d added cat-file 
> ```
> 
> 当您保存并退出编辑器时，Git 会应用所有三个更改，然后将您放回编辑器以合并三个提交消息：
> 
> ```
> # This is a combination of 3 commits.
> # The first commit's message is:
> changed my name a bit
> 
> # This is the 2nd commit message:
> 
> updated README formatting and added blame
> 
> # This is the 3rd commit message:
> 
> added cat-file 
> ```
> 
> 当您保存它时，您有一个提交，其中介绍了所有三个先前提交的更改。

# ruby-on-rails - 从rails中的整数数组中读取特定值

> ID：15783542
> 
> 赞同：0
> 
> 时间：2013-04-03T09:26:31.687
> 
> 标签：ruby-on-rails, arrays

我有`brandids=[1,2,3]`一个整数数组。

如何一次获取任何 1 值，以便我可以将其一一用作参数中的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:42:52.210

使用“shift”方法，它将提取数组的第一个元素。

```
> param = brandids.shift
> param # => 1
> brandids # => [2, 3] 
```

这是否回答了您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:48:21.950

```
brandids.each do |brand_id|
    # Do something with a brand id
    puts "Provided brand ID : #{brand_id}" 
end 
```

在你的情况下，这段代码应该写

```
Provided brand ID : 1
Provided brand ID : 2
Provided brand ID : 3 
```

请注意，此代码是 100% Ruby。这与任何 Rails 特定的方法或行为无关。有关 Ruby 数组的更多信息，请参阅：[http ://www.ruby-doc.org/core-2.0/Array.html](http://www.ruby-doc.org/core-2.0/Array.html)

# android - 如何使用我的手机 Allview P5 调试我的 android 应用程序

> ID：15783545
> 
> 赞同：2
> 
> 时间：2013-04-03T09:26:36.953
> 
> 标签：android, eclipse, driver

[我用http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)打开列表，但是我没有在列表中看到 Allview。如何使用 eclipse - Allview P5 调试 android 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T12:33:35.643

您必须安装一个 adb 驱动程序，并且由于 Allview 没有一个（我遇到了同样的问题），您必须使用一个通用的：

[https://plus.google.com/u/0/103583939320326217147/posts/BQ5iYJEaaEH](https://plus.google.com/u/0/103583939320326217147/posts/BQ5iYJEaaEH)

这对我来说非常有效（我拥有一台 P6 Stony）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:39:49.757

**应启用**USB 调试。**您可能会在某些手机中的 > 和其他一些手机中的 > 中找到`Settings`该选项（基本上，如果该选项在手机上可用，则该选项将出现在某处的设置中，因此请彻底检查）。其次，并非所有手机都具有此功能，因此请先检查它是否具有。还要检查您的设备设备驱动程序是否安装正确。如果不重新安装它们。最后做检查你是否是最新的。如果没有，那么更新它。`Developer options``Settings``Applications``Android SDK`**

 **如果 USB 调试选项不可用。`ADB`您仍然可以借助`Android Debug Bridge`. 为此，请通过提供的 USB 数据线连接您的手机。一旦设备被识别。打开命令提示符并键入

> 亚行设备

如果您在那里看到您的手机，请输入

> adb install your_location/your_file.apk

但在这种情况下，您将无法知道您的应用程序崩溃的位置。您可以测试它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:33:31.413

并非所有设备供应商都提供调试功能...

如果提供了，那么您是否将设备置于调试模式？这应该在`Settings`-> `Applications`->下找到`Development`。

甚至使用 Android SDK Manager 安装 USB 驱动程序：

![使用 Android SDK Manager 安装 USB 驱动程序](https://i.stack.imgur.com/phJQ0.png)**

# windows-7 - 使用 Windows 调度程序运行 jar 文件

> ID：15783553
> 
> 赞同：30
> 
> 时间：2013-04-03T09:26:49.663
> 
> 标签：windows-7, scheduled-tasks, executable-jar

我有 jar 文件，我想从 windows 7 中的 windows 调度程序运行

我已经给出了`java.exe`路径/脚本和`-jar c:\abc\ab.jar`参数字段中的路径。

但它不运行。我也在bat文件的帮助下尝试过，但它没有运行。运行 jar 文件需要做什么？

我的 jar 文件创建文件并更新数据库。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-11-14T14:25:23.953

## 从任务计划程序运行 java jar（Windows 7 Professional 64 位）

我将把它配置为每 5 分钟运行一次。

**第 1 步，安装 java，确保它可以从命令行使用**

您应该能够从裸 cmd 命令行运行您的 java jar。像这样指定完整的java目录：（这是我使用的命令）

```
C:\ProgramData\Oracle\Java\javapath\java.exe -jar C:\repo\curium.jar 
```

**第二步，打开任务调度器：**

在开始菜单搜索栏中，搜索“计划程序”，应该会弹出“任务计划程序”。它隐藏在控制面板中：控制面板 -> 系统和安全 -> 管理工具 -> 任务计划程序。

**第三步，新建一个定时任务：**

在左窗格中，右键单击“任务计划程序库”。选择：“新建基本任务”。给它任何名字。

选择下一步。点击“每日”，（每分钟重新运行的配置将在稍后完成）。

选择下一步。每 1 天重复一次。让它从现在开始 5 分钟。选择下一步。单击“启动程序”。

**第 4 步，配置您的 java 以运行：**

在“程序/脚本”框中输入您的 java 的完整路径，您的路径可能不同。使用 cmd 命令仔细检查`where java`

```
C:\ProgramData\Oracle\Java\javapath\java.exe 
```

在“添加参数”框中输入：

```
-jar C:\repo\curium.jar 
```

点击下一步，点击完成。

**第 5 步，右键单击您的新任务以进行进一步配置：**

右键单击您的项目-> 属性。

选择气泡：“无论用户是否登录都运行”

在“触发器”选项卡下。选择您的每日任务并选择编辑。

**第 6 步，配置重复任务触发器**

开始任务：“按计划”。

选择每重复一次任务：“5 分钟”。选择启用的复选框。单击确定。节省。

系统将提示您输入 Windows 用户名和密码。添加并按确定。

**第 7 步，确保它正常工作**

等待 5 分钟以使其运行。或者通过右键单击-> 运行来强制运行它。

右键单击您的任务，选择属性。选择“历史”选项卡。

应该有一行显示它何时运行。如果您想知道它是否成功完成，您必须将输出通过管道传输到日志文件。

**第 8 步，查看它是否在重新启动后仍然存在**

重新启动计算机，看看它是否保持打开状态。如果是这样，你就完成了。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-06T13:12:30.007

如果您的 JAR 创建文件，我认为您只需在创建任务时在**Start in**字段中指定一个工作目录。例如：

*   **程序脚本：** `C:\Program Files\Java\jre7\bin\java.exe`
*   **添加参数：** `-jar c:\abc\ab.jar`
*   **开始于：** `c:\abc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T11:32:47.833

创建 Jar 文件或 bat 文件

> 创建 Jar 文件 > 项目右键单击 > 导出 > 可运行 Jar 文件 > 目标 > 运行并检查

现在转到任务计划程序并按照以下步骤使用 Windows 计划程序系统地执行您的 jar/bat 文件。

> [![1> 创建新任务](https://i.stack.imgur.com/POE91.png)](https://i.stack.imgur.com/POE91.png)

> [![2> 一般添加文字](https://i.stack.imgur.com/4B9ai.png)](https://i.stack.imgur.com/4B9ai.png)

> [![3> 新触发器](https://i.stack.imgur.com/6tZPq.png)](https://i.stack.imgur.com/6tZPq.png)
> 
> [![4> 新动作](https://i.stack.imgur.com/ZZKdl.png)](https://i.stack.imgur.com/ZZKdl.png)

> [![5> 添加条件](https://i.stack.imgur.com/TuOKa.png)](https://i.stack.imgur.com/TuOKa.png)

> [![6> 设置](https://i.stack.imgur.com/BtqLv.png)](https://i.stack.imgur.com/BtqLv.png)

> [![7> 运行任务](https://i.stack.imgur.com/yrbM6.png)](https://i.stack.imgur.com/yrbM6.png)

> [![8> 查看历史](https://i.stack.imgur.com/6s03J.png)](https://i.stack.imgur.com/6s03J.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T15:20:27.540

### 步骤 0：设置

![](https://github.com/mnadeem/wishing-app/raw/master/docs/app_running.png)

加入`app.schedule.externally_managed=true`_`application.properties`

### 第 1 步：创建新任务

单击创建

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_create_task.png)

提供详细信息

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_general.png)

### 第 2 步：触发器详细信息

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_triggers.png)

### 第 3 步：操作详情

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_actions.png)

### 第 4 步：行动

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_conditions.png)

### 第 5 步：查看任务详细信息

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_task_details.png)

应用程序调用并关闭

![](https://github.com/mnadeem/wishing-app/raw/master/docs/wts_log.png)

有关更多详细信息，请参阅[此](https://github.com/mnadeem/wishing-app/wiki/Invoking-Using-Windows-Task-Scheduler-on-a-schedule-basis)和[此](https://github.com/mnadeem/wishing-app/wiki/Invoking-Using-Windows-Task-Scheduler-At-Startup)

# sql-server - 为 SQL Server 全文搜索添加自定义排名机制

> ID：15783555
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:00.373
> 
> 标签：sql-server, sorting, full-text-search, ranking

我有一个全文索引的表，我使用`FREETEXT`. 该表是从其他具有恒定数据的表中填充的，很少更改。现在有几百万行。

表结构：

```
ID (identity), PK
Text (varchar), FT IX
ForeignID (int) -- of the original ID in it's original table 
```

我对结果不满意，因为有时一个单词重复了太多次，因此该行被引擎排名靠前。示例：“ *Gas Station Young, Young street, Some State* ”比“ *Young street* ”搜索“ *young* ”要高。对表进行排名就足够了（除了 FTS 索引已经做的事情之外，不需要对表内的行进行排名）。

我想添加一个简单的自定义排名机制。

我尝试`CustomRank`在查询之前添加一列按 while/ 排序，`FREETEXT`但这需要太长时间。执行计划说排序依据`CustomRank`是链条中最薄弱的环节。

我想过：

1.  管理另一个字段，因此我将有一个用于显示（`DisplayText`）和一个用于查询/索引（`IndexText`），并通过重复我想要提升的行的单词和短语来操作查询/索引。
2.  将其拆分为表格并在代码中进行处理。每张桌子都会有自己的排名。

有任何想法吗？谢谢，旺格。

# sharepoint - Sharepoint 2013 和 VisualStudio 2012 工具可加快部署速度

> ID：15783558
> 
> 赞同：1
> 
> 时间：2013-04-03T09:27:03.060
> 
> 标签：sharepoint, visual-studio-2012, sharepoint-2013

我对部署有一些疑问，有什么方法可以让它更快吗？我在云中有 sharepoint 2013，我正在开发应用程序托管的应用程序，每次我必须等待大约 4/5 分钟。有什么办法，有什么工具可以让它更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:19:58.903

是的，你可以看看这里：[http ://blog.mastykarz.nl/quickly-deploying-sharepoint-2013-projects-mavention-quick-deploy/](http://blog.mastykarz.nl/quickly-deploying-sharepoint-2013-projects-mavention-quick-deploy/)

它只会构建您的项目，将程序集移动到 GAC 并重置应用程序池。

# iphone - CoreTelephony 框架是否适用于 JailBreak 设备？

> ID：15783560
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:10.760
> 
> 标签：iphone, ios, ipad, jailbreak, core-telephony

我在我的应用程序中使用了核心电话框架。当我在非越狱设备中测试我的应用程序时，它起作用了。

今天，当我让我的客户测试该应用程序时，它对他不起作用，他正在使用越狱设备。

即使在越狱设备中，我应该怎么做才能使用我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:46:35.793

coretelephony 框架在越狱设备上运行良好

# android - 将子菜单添加到主页图标

> ID：15783566
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:29.247
> 
> 标签：android, android-actionbar, icons

是否可以向主页图标添加子菜单？或者在主页图标前移动一个新图标？[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)的 SlidingMenu是我尝试完成的一个很好的例子，但没有花哨的部分，只是左角的一个简单下拉。

像这样的东西只是为了homeicon！

![在此处输入图像描述](https://i.stack.imgur.com/eAizF.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:47:50.663

请在此处阅读此问题，[如何在代码中将子菜单项添加到 ActionBar 操作？](https://stackoverflow.com/questions/9344160/how-to-add-submenu-items-to-actionbar-action-in-code). 我认为它准确地显示了您的需要，子菜单。

实际上，您可以通过调用以下方法删除 home 操作项：

```
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

如果您想用下拉菜单替换它，最好的办法是构建一个 Spinner 并使用操作栏的自定义视图。

```
Spinner dropdown = new Spinner(this);
//TODO attach to an adapter of some sort
getSupportActionBar().setCustomView(dropdown);
getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:32:24.327

当用户触摸应用程序图标时，系统会使用 android.R.id.home ID 调用您的活动的 onOptionsItemSelected() 方法。所以你只需要重写这个方法并做你想做的事：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked;
            //Do your actions
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# c - 所有节点的 id 与最后添加的节点的 id 相同

> ID：15783568
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:35.067
> 
> 标签：c, pointers, struct, singly-linked-list

```
int add_server(Server *list, char *server_id, char *capacity)
{
    Server *new_node=(Server *)malloc(sizeof(Server));

    new_node->id=server_id;
    new_node->capacity=atoi(capacity);

    if(list==NULL)
    {
        list=new_node;
        list->next=list;
        return list;
    }
    else
    {

        Server *temp=list;

        while(temp->next!=list)
        {
            temp=temp->next;
        }

        temp->next=new_node;
        new_node->next=list;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:29:21.133

首先，[请不要`malloc()`在 C 中转换 的返回值](https://stackoverflow.com/a/605858/28169)。

其次，`return list;`返回的函数很奇怪`int`，这可能会导致问题。显然，函数必须返回`Server *`（的类型`list`）才能有意义。或者它可以使`list`参数具有类型`Server **`并重写调用者的指针，但这通常不太方便使用。

第三，您只复制 id 的指针，因此如果使用例如`char`保存不同名称的本地缓冲区调用它，您将获得您描述的效果。您需要使 id 成为实际的数组`Server`，或者`strdup()`在存储之前调用参数。

所以，要么：

```
typedef struct {
    /* ... */
    char server_id[32];
    /* ... rest of fields ... */
} Server;

strlcpy(new_node->server_id, server_id, sizeof new_node->server_id); 
```

或者：

```
new_node->id = strdup(server_id); 
```

# windows - 在 Windows azure 上部署 Github 时出错

> ID：15783569
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:39.840
> 
> 标签：windows, node.js, deployment, azure, github

hej，自 3 月以来，我们在 Windows azure 服务器上的部署遇到了一些麻烦。部署似乎不起作用，因为有时它起作用有时不是我不明白。

我在 Windows azure 仪表板上看到的某种错误 -> 部署：

“响应状态码不表示成功：500（内部服务器错误）。”

或者

“主机密钥验证失败。致命：远程端意外挂断”

我试图重新启动服务器或对 github 进行新的提交，或者只是重新部署或断开连接并重新连接到 github。目前没有任何效果。有一个开发服务器和一个实时服务器。两者都包含网站的完全相同的版本（用 node.js 编写）。我已经检查了很多次了。使用开发版本进行部署工作正常。住不。

你有什么建议吗？我不知道从哪里开始:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T08:03:51.107

如果它是一个网络角色，您可以检查 iisnode/ 文件夹，它应该包含日志文件。它们也可以在模拟器运行的情况下访问，尝试

```
http://127.0.0.1:81/iisnode/ 
```

# c# - NullPointerException [对象引用未设置为对象的实例]

> ID：15783570
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:40.157
> 
> 标签：c#, asp.net, nullpointerexception, master-pages

我在母版页中有下拉列表和按钮，当单击按钮时，我必须重定向到另一个继承母版页的页面 [results.aspx]。这是一个网格视图，用于根据下拉列表中的选定项目绑定数据。当我尝试这样做时，它会抛出

> NullPointerException [对象引用未设置为对象的实例]

帮我解决这个问题。

这是我在 results.aspx.cs 的页面加载事件中所做的：

```
SqlConnection scon = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Database.mdf;Integrated Security=True;User Instance=True");
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.PreviousPage != null)
    {
        DropDownList d1 = (DropDownList)Master.FindControl("DropDownList1");
        DropDownList d2 = (DropDownList)Master.FindControl("DropDownList2");
        DropDownList d3 = (DropDownList)Master.FindControl("DropDownList3");
        SqlCommand scmd = new SqlCommand("select * from dreg where dcity='" + d2.SelectedItem.Text.ToString() + "' && dbg='" + d3.SelectedItem.Text.ToString() + "'", scon);
        scmd.Connection = scon;
        scon.Open();
        SqlDataAdapter sad = new SqlDataAdapter(scmd);
        SqlCommandBuilder scb = new SqlCommandBuilder(sad);
        DataTable dTable = new DataTable();
        sad.Fill(dTable);
        GridView1.DataSource = dTable;
        GridView1.DataBind();
    }
} 
```

在某处我听说如果它在母版页上，你会找到前一页控件，因为.net 会自动更改其 ID。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:48:08.660

您正在尝试访问**母版页控件**，因此您必须尝试以下操作：

```
DropDownList d1 = (DropDownList)Master.FindControl("DropDownList1");
DropDownList d2 = (DropDownList)Master.FindControl("DropDownList2");
DropDownList d3 = (DropDownList)Master.FindControl("DropDownList3");
SqlCommand scmd = new SqlCommand("select * from dreg where dcity='" + d2.SelectedItem.Text.ToString() + "' && dbg='" + d3.SelectedItem.Text.ToString() + "'", scon); 
```

当您访问母版页控件时。所以不要使用`page.PreviousPage`.Instead 你应该去`Master.FindControl`访问**Master Page Control**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:37:14.453

ClientIDMode ="Static"，为控件设置此项，则 id 不应更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:04:09.087

`FindControl`在任何级别都不是递归的。你不太可能`DropDownList`属于真正的主人。您将需要`FindControl`从面板或其他实际具有`DropDownList`. 这可能会变得模糊，因为您在 Master 中的子控件不是其基本类型的一部分，因此无法通过正常属性访问它们。我的建议是在您的母版页中添加一个直接引用以下内容的属性`DropDownList`：

```
// Do this with a unique name for each
// DropDownList you want to access
// You may have to give the property a
// a different name to prevent conflicts
public DropDownList MyDropDownList
{
    get
    {
        return MyDropDownList;
    }
} 
```

然后在使用此母版页的页面中，您需要在页面的 html 端添加此参考行：

```
<%@ MasterType 
    virtualpath="~/Path/To/Your.master" 
%> 
```

这使编译器能够理解所引用的母版页的特定类型，因此在您后面的代码中，您可以直接访问该属性而无需强制转换：

```
DropDownList myList = Master.MyDropDownList; 
```

*注意：请，请，请研究并开始使用参数化查询。养成始终使用它们的习惯，即使在测试垃圾代码时也是如此。如果您不小心，使用内联 sql 之类的坏习惯会以一种令人讨厌的方式进入生产环境。*

 *[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)
[http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)
[http://blog.divergencehosting.com/?p=71](http://blog.divergencehosting.com/?p=71)*

# jquery - 更改 facebook 打开图形操作的名称

> ID：15783571
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:40.577
> 
> 标签：jquery, facebook, facebook-graph-api, facebook-opengraph

我正在尝试为我的网站创建一个新的开放图形操作。我命名了动作评论，但被要求重命名。

现在，自从我重命名该动作以来已经过去了大约 24 小时，但即使是现在

1.  我可以使用旧动作名称发布动作。
2.  无法发布具有新操作名称的操作。

我担心这种情况会随时恢复，我的代码会中断。

改变行动通常需要这么多时间来反映吗？还是我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:05:42.860

1.  当您尝试使用新操作名称推送打开的图形操作时，您从 Facebook 收到什么错误？
2.  对象名称从旧到新是否相同？

遇到此问题时的最佳做法是使用新的操作/对象对创建一个*新*的Open Graph 故事，以便两个操作都可用。新操作生效后，您可以删除旧操作。

我还没有听说过新动作需要时间来传播并变得可用的情况，所以这很奇怪......

# ruby-on-rails - 禁用右键单击、 ctrl +c 、 ctrl+v 和选择功能

> ID：15783574
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:45.990
> 
> 标签：ruby-on-rails, user-interface, web-applications

我正在开发一个在线考试轨道应用程序。在考试界面中，我想阻止复制（ctrl+c）、粘贴（ctrl+v）、右键单击和选择功能。我将如何使用javascript来防止它？请帮助我对此有更好的解决方案。

谢谢 ：）-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:31:43.463

这取决于客户端的浏览器，因此您需要将适当的 JScript 添加到您的页面。请注意，这仅在他们的浏览器上启用了 Javascript 时才有效（通常会启用）。

# javascript - 动画不透明度时，Jquery Scrolling Header 会中断

> ID：15783575
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:48.547
> 
> 标签：javascript, jquery, css

我有一个标题，当用户滚动到页面上的第一部分时，我想淡入。我使用不透明度为 0 的 div 更改为不透明度 1，如下所示：

```
$(window).scroll(function () {
           // If the scroll position is past the 1st section...
            if ($('body').scrollTop() > 500) {

                $('#ribbon').css('opacity', 1);

            } else {

                $('#ribbon').css('opacity', 0);
            }
    }); 
```

这很好用，但是当我尝试使用`fadeIn()`or为不透明度设置动画时`animate()`，它会停止工作并且不会在 div 中淡入淡出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:33:12.410

`**[LIVE DEMO](http://jsbin.com/inoken/1/edit)**`

```
$(window).scroll(function () {

    var opacity = $(this).scrollTop() > 500 ? 1 : 0 ;
    $('#ribbon').stop().fadeTo(800, opacity);      

}); 
```

# delphi - DirectX9 如何找到相交点？

> ID：15783579
> 
> 赞同：0
> 
> 时间：2013-04-03T09:27:52.983
> 
> 标签：delphi, directx, directx-9, jedi, d3dx

我找到了与函数“D3DXIntersectTri”的交点距离。现在，使用距离值，我怎样才能找到该点值？

IDE：德尔福 - 绝地

语言：帕斯卡

DirectX 9

编辑：实际上我有 2 个圆柱体，只想渲染 3 维中的相交部分。见图片： ![在此处输入图像描述](https://i.stack.imgur.com/T8GTc.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:05:38.403

如[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172885%28v=vs.85%29.aspx)中所述，您可以使用重心坐标计算点：

```
p = p1 + pU * (p2 - p1) + pV(p3 - p1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:57:34.627

渲染到屏幕的某些部分是模板缓冲区的任务。除非您想从交叉点创建一个新的顶点缓冲区（可以通过剪裁部分来创建，这并不容易），否则使用模板缓冲区更有效。

模板缓冲区是一个保存整数值的缓冲区。您必须使用深度缓冲区创建它，并指定正确的格式（例如 D24S8）。然后，您可以指定何时丢弃像素。这是想法：

```
Clear stencil buffer to 0
Enable solid rendering
Enable stencil buffer
Set blend states to not draw anything (Souce: 0, Destination: 1)
Disable depth testing, enable backface culling
Set the following stencil states:
    CompareFunc to Always
    StencilRef to 1
    StencilWriteMask to 255
    StencilFail to Replace
    StencilPass to Replace
    //this will set value 1 to every pixel that will be drawn
Draw the first cylinder
Now set the following stencil states:
    CompareFunc to Equal
    StencilFail to Keep //this keeps the value where the stencil test fails
    StencilPass to Increment //this increments the value to 2 where stencil test passes
Draw the second cylinder
//Now there is a 2 in the stencil buffer where the cylinders intersect
Reset blend states
Reenable depth testing
Set StencilRef to 2 //render only pixels where stencil value == 2
Draw both cylinders 
```

您可能需要在最后一次渲染之前将比较函数更改为 GreaterEqual。如果像素重叠，则可能有大于 2 的值。

# php - SimpleXML 解析外部 php 提要

> ID：15783583
> 
> 赞同：1
> 
> 时间：2013-04-03T09:28:05.937
> 
> 标签：php, xml, simplexml, feed, feedparser

我想解析一个外部 php 提要。地址：[http ://www.hittadjur.se/feed.php?count=1](http://www.hittadjur.se/feed.php?count=1)

**输出：**

```
<?xml version="1.0"?>
<annons>
<rubrik>Wilja</rubrik>
<datum>2013-03-22</datum>
<ras>Chihuahua långhår</ras>
<ort>Göteborg</ort><bildurl>http://www.hittadjur.se/images/uploaded/thumbs/1363984467.jpg</bildurl><addurl>http://www.hittadjur.se/index.php?page=case&type=&county=32&subpage=show&case=1363984558</addurl>
</annons> 
```

**我的 PHP 代码不起作用：**

```
$content = utf8_encode(file_get_contents('http://www.hittadjur.se/feed.php?count=1'));
$xml = simplexml_load_file($content);
echo $xml->annons->rubrik; 
```

我使用的原因`utf8_encode`是，如果我不这样做，我会收到此消息：

`parser error : Input is not proper UTF-8, indicate encoding ! Bytes: 0xE5 0x6E 0x67 0x68`

现在的错误是：

`Warning: simplexml_load_file() [function.simplexml-load-file]: I/O warning : failed to load external entity` 有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:41:41.693

恐怕提要提供格式错误的 XML。除了编码混乱：

```
<addurl>http://www.hittadjur.se/index.php?page=case&type=&county=32&subpage=show&case=1363984558</addurl>
                                                   ^
                                                   \_ Data not properly escaped 
```

我可能错了，但我认为您不能使用常规 XML 函数来解析它，因为它们是为有效的 XML 设计的（这就是首先使用 XML 的全部目的）。

也许您可以尝试使用[DOMDocument](http://php.net/domdocument)。它是为 HTML 设计的，因此它可以处理无效输入，但它也可以处理 XML。

**编辑：**这是[修复无效 XML 的一个技巧，](https://stackoverflow.com/questions/2890120/php-processing-invalid-xml)但老实说，我不确定这是否值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:45:03.577

`&`就像 alvaro vicario 写的那样，问题出在您的网址中的参数分隔符 ( ) 上。在 xml 中，& 符号是一个实体标记（= 命名符号（序列）的开始或字符代码点的数字表示）并且必须被转义。

在您的网址中替换`&`为`&amp;`或将网址标记为文字文本（xml 中的 CDATA 部分）`<![CDATA[http://...]]>`：。

例如。：`<addurl><![CDATA[http://www.hittadjur.se/index.php?page=case&type=&county=32&subpage=show&case=1363984558]]></addurl>`

如果您对代码中的快速 utf8 转换感到不舒服，并且您知道数据源的字符编码，则可以增强 xml 序言（iso-8859-1 包含有问题的`å`/ `0xE5`xml）：

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:29:42.733

如果您尝试加载服务器上保存的 xml，请尝试传递完整目录路径

```
simplexml_load_file($_SERVER['DOCUMENT_ROOT'].'/example.xml') 
```

或者如果您想通过 http 协议访问 xml，您需要在 php.ini 中设置 allow_url_fopen ON 或

```
ini_set('allow_url_fopen ','ON'); 
```

在你的代码中。或者，如果您使用的是 php 版本 <5，您也可以这样做

```
$temp = file_get_contents($url);
 $XmlObj = simplexml_load_string($temp); 
```

# android - 为 ListView 中的按钮设置侦听器（没有 getView 方法？）

> ID：15783584
> 
> 赞同：0
> 
> 时间：2013-04-03T09:28:08.860
> 
> 标签：android, listview, button, listener

我的应用程序中有一个 Listview 显示数据库中的内容。这是一个自定义的可点击列表视图，我想为列表视图的每个元素添加一个按钮，因此当您单击此按钮时，它会拨打电话并拨打特定号码。

我已经阅读了一些类似的主题，但都提到了适配器中的“getView”方法，但我不知道它指的是什么。这是我的列表视图的相关代码：

```
private void displayListView() {

    // getExtra
    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    String inInterval = bundle.getString("inInterval");
    Log.d(TAG, "inInterval = " + inInterval);

    poititle.setText(title);

    // put the results of the method in a cursor
    Cursor c = dbHelper.findPoiInTable(inInterval);

    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_STREET, DatabaseAdapter.COL_WEBSITE,
            DatabaseAdapter.COL_TELEPHONE, DatabaseAdapter.COL_REMARKS,
            DatabaseAdapter.COL_PRICE };

    int[] to = new int[] { R.id.name, R.id.street, R.id.website,
            R.id.telephone, R.id.remarks, R.id.price };

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        // Comportement des éléments de la listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    POIActivity.class);

            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String website = ((TextView) view.findViewById(R.id.website))
                    .getText().toString();
            String telephone = ((TextView) view
                    .findViewById(R.id.telephone)).getText().toString();
            String remarks = ((TextView) view.findViewById(R.id.remarks))
                    .getText().toString();
            String price = ((TextView) view.findViewById(R.id.price))
                    .getText().toString();
            // i.putExtra(ID_EXTRA, name) ;
            i.putExtra(ID_NAME, name);
            i.putExtra(ID_WEBSITE, website);
            i.putExtra(ID_TELEPHONE, telephone);
            i.putExtra(ID_REMARKS, remarks);
            i.putExtra(ID_PRICE, price);
            startActivity(i);

        }

    }); } 
```

这是我在 XML 文件中的按钮定义：

```
<Button
    android:id="@+id/callButton"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_centerVertical="true"
    android:layout_marginRight="10dp"
    android:layout_toLeftOf="@+id/arrowImage"
    android:text=" Call "
    android:textSize="15sp" 
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:descendantFocusability="blocksDescendants" /> 
```

我当然尝试过设置侦听器的常用方法（.setOnClickListener 等），但我想必须从我的 displayListView() 方法中真正完成一些事情。
提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:45:30.853

不使用该方法设置按钮的单击`getView`是不可能的。您需要了解如何使用适配器。每个适配器都有一个调用的方法，该方法`getView`将位置作为参数，并且适配器返回需要处于该位置的视图。您需要覆盖`SimpleCursorAdapter`及其`getView`方法，并且在创建视图 ( `R.layout.poi_info`) 时，您需要将单击侦听器分配给按钮。您现在所做的是在单击列表中的项目（而不是按钮）时触发您的侦听器。无论如何，这是一个有很多讨论的主题，在谷歌中快速搜索可以给你答案。这是我找到的教程：http: [//devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)

祝你好运

编辑 - 示例：

请注意我`newView`在这里使用过。在您阅读有关适配器的更多信息后，请阅读有关 CursorAdapter 的信息，您将了解它是什么。这个适配器有一点不同的行为。

```
public class ExtendedSimpleCursorAdapter extends SimpleCursorAdapter{

        public ExtendedSimpleCursorAdapter(Context context, int layout,
                Cursor c, String[] from, int[] to, int flags) {
            super(context, layout, c, from, to, flags);

        }

        public View newView (Context context, Cursor cursor, ViewGroup parent){
            View v = super.newView(context, cursor, parent);
            v.findViewById(R.id.your_button_id).setOnClickListener(yourClickListener);
        }
    } 
```

# java - 使用 MySQL 连接“computer-database-jpa”Play 2.1 示例应用程序

> ID：15783586
> 
> 赞同：5
> 
> 时间：2013-04-03T09:28:17.823
> 
> 标签：java, mysql, playframework, playframework-2.1

我正在使用[computer-database-jpa (Java)](https://github.com/playframework/Play20/tree/2.1.x/samples/java/computer-database-jpa) Play Framework 2.1 示例应用程序。当我在内存数据库中使用 H2 时一切正常，但是当我想将应用程序与 MySQL 连接时出现问题。

有人遇到了同样的问题（[Help 希望让示例应用程序连接到 MySQL](https://groups.google.com/d/msg/play-framework/gIjd3O18TO4/OovsuKr9kGUJ)）但没有解决方案。

我添加了`mysql-connector`（Build.scala）：

```
val appDependencies = Seq(
  ....
  "mysql" % "mysql-connector-java" % "5.1.18"
) 
```

并编辑了application.conf：

```
db.default.url="jdbc:mysql://password:user@localhost/my-database"
db.default.driver=com.mysql.jdbc.Driver 
```

当我启动应用程序并应用 1.sql（进化脚本）时，我收到一个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near 'sequence company_seq
start with 1000' at line 1 [ERROR:1064, SQLSTATE:42000] 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T11:56:13.247

我找到了解决方案 - [https://github.com/opensas/openshift-play2-computerdb](https://github.com/opensas/openshift-play2-computerdb)。

进化脚本中使用的语法不符合`MySQL`：

> ## 将计算机数据库示例应用程序从 H2 移植到 mysql 所需的更改列表
> 
> ### conf/evolutions/default/1.sql
> 
> *   添加了 engine=innodb，以启用引用完整性
> *   用 id 字段的自动增量替换序列
> *   用“SET FOREIGN_KEY_CHECKS”替换“SET REFERENTIAL_INTEGRITY”命令
> *   用日期时间替换时间戳字段
> 
> ### conf/evolutions/default/2.sql
> 
> *   在 2.sql 和 3.sql 文件之间拆分计算机数据（避免在 mysql 上运行的进化中的错误）
> 
> ### 模型/模型.scala
> 
> *   从 Computer.list sql 查询中删除 'nulls last'
> *   修改 Computer.insert 以跳过 id 字段（因为由 mysql 自动分配）

因为我在玩`Java`而不是`Scala`版本，所以我要更改`Company.java`和`Computer.java`文件。我添加了`@GeneratedValue`注释：

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
public Long id; 
```

在这里您可以找到修改后的进化脚本：[https ://github.com/opensas/openshift-play2-computerdb/tree/master/conf/evolutions/default](https://github.com/opensas/openshift-play2-computerdb/tree/master/conf/evolutions/default)

# android - Android 防止活动被服务杀死

> ID：15783587
> 
> 赞同：0
> 
> 时间：2013-04-03T09:28:18.910
> 
> 标签：android, service, android-activity, activity-lifecycle

我已经搜索了很多关于保持活动的信息，我知道不建议保持活动。但是，我希望它尽可能长时间地运行，并给予最高优先级。

在我的应用程序中，有带有音乐播放器的远程服务和带有整个数据、变量等的活动。活动绑定到服务，并负责为传入的电话连接保留 url、数据、接收器。远程服务处于前台模式并启动粘性。

它在后台运行良好，即使 30 分钟的时间也没有问题。

我最大的问题是当相机应用程序启动或电话需要很长时间然后后台活动被杀死。

我想知道是否有任何可能性（例如，在前台伪造本地服务，或者让杀戮活动而不是活动进程）可以防止活动死亡？

# c# - 在monodevelop c#中更改选项卡文本

> ID：15783595
> 
> 赞同：0
> 
> 时间：2013-04-03T09:28:34.877
> 
> 标签：c#, tabs, mono, widget, tabcontrol

我目前正在构建一个网络浏览器。

我正在使用笔记本小部件作为选项卡控件。

但是有一个问题：如何更改选项卡的文本？

我在用户打开的每个选项卡内都有一个自定义小部件。自定义小部件只不过是其上的 web 视图。它只是让事情变得更容易，而且我也可以使用这种方法来控制错误。

现在，由于笔记本中的选项卡是自定义小部件的父级，我如何从自定义小部件更改选项卡的文本。我在 Parent 属性中没有看到 Text 属性。

谢谢你的帮助。

PS 我正在使用 MonoDevelop 2.6，语言：C#

编辑：

在我的主主窗口中，我添加了此控件以将我的自定义小部件添加到我的笔记本（我已将其重命名为 TabControl）：

```
// function to add a new tab
private void AddTab(string URL)
{
    // Create new label for the tab
    Label label = new Label();
    label.Text = "Loading...";
    // Add the page to the TabControl
    TabControl.AppendPage(control, label);
    // Show the TabControl and its children
    TabControl.ShowAll();

    // Navigate to the specified URL
    view.Open(URL);
} 
```

在我的自定义小部件上，它只包含一个 Webkit.WebView，我得到了这个：

使用系统；使用 WebKit；使用 Gtk；

```
public partial class WebControl : Gtk.Bin
{
    public WebView view = new WebView();

    public WebControl ()
    {
        this.Build();

        view.Open("http://www.google.com.au");

        this.Add(view);

        view.Show();
        view.ShowAll();

        this.Show();
        this.ShowAll();

        view.LoadFinished += new LoadFinishedHandler(viewLoadFinished);
    }

    protected void viewLoadFinished (object sender, WebKit.LoadFinishedArgs e)
    {
        // This is where I want to change the text of the tab, and the tab is the parent of this custom control
    }

    public WebView CurrentView
    {
        get { return view; }
    } 
```

所以，有我的代码。我只是找不到笔记本选项卡的属性来更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:08:05.087

Gtk.Widget 的 .Parent 属性显然没有特定于父窗口小部件类型的属性，因为它没有被转换为实际的窗口小部件类型。你必须自己投。

一旦你将父母名单走到 Gtk.Notebook，你就可以打电话`notebook.SetTabLabelText (this, "new text");`（或类似的东西，我可能没有正确的名字，因为我面前没有任何代码）

# java - 如何自定义 JPanel 或 JLabel 的形状？

> ID：15783599
> 
> 赞同：4
> 
> 时间：2013-04-03T09:28:42.593
> 
> 标签：java, image, swing, jpanel, jlabel

我在 JLabel 中显示图像。我想以圆形显示该图像，即我希望 JLabel 的形状为圆形，默认为矩形。如何设置 JPanel 或 JLabel 的形状？setUndecorated() 和 setShape() 只为 Frame 定义？是否有可能改变 JPanel 和 JLabel 等其他组件的形状？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:46:36.327

组件始终是矩形的，但是，您可以使用自定义绘制和透明度使组件显示为非矩形

看看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[2D 图形](http://docs.oracle.com/javase/tutorial/2d/)

**更新了示例**

![在此处输入图像描述](https://i.stack.imgur.com/KHyPi.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.RenderingHints;
import java.awt.geom.Path2D;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class FunkyShapedComponent {

    public static void main(String[] args) {
        new FunkyShapedComponent();
    }

    public FunkyShapedComponent() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JPanel testPane = new JPanel();
                testPane.setBackground(Color.RED);
                testPane.setLayout(new GridBagLayout());
                testPane.add(new FunkyPane());

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(testPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FunkyPane extends JPanel {

        public FunkyPane() {
            setLayout(new GridBagLayout());
            add(new JLabel("This is a simple test"));
            setOpaque(false);
        }

        @Override
        public Insets getInsets() {
            return new Insets(10, 10, 10, 10);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int width = getWidth() - 1;
            int height = getHeight() - 1;

            int radius = Math.min(width, height) / 10;

            Path2D p = new Path2D.Float();
            p.moveTo(0, radius / 2);
            p.curveTo(0, 0, 0, 0, radius / 2, 0);
            p.curveTo(width / 4, radius, width / 4, radius, (width / 2) - radius, radius / 2);
            p.curveTo(width / 2, 0, width / 2, 0, (width / 2) + radius, radius / 2);
            p.curveTo(width - (width / 4), radius, width - (width / 4), radius, width - (radius / 2), 0);
            p.curveTo(width, 0, width, 0, width, radius / 2);

            p.curveTo(width - radius, height / 4, width - radius, height / 4, width - (radius / 2), (height / 2) - radius);
            p.curveTo(width, height / 2, width, height / 2, width - (radius / 2), (height / 2) + radius);
            p.curveTo(width - radius, height - (height / 4), width - radius, height - (height / 4), width, height - (radius / 2));
            p.curveTo(width, height, width, height, width - (radius / 2), height);

            p.curveTo(width - (width / 4), height - radius, width - (width / 4), height - radius, (width / 2) + radius, height - (radius / 2));
            p.curveTo(width / 2, height, width / 2, height, (width / 2) - radius, height - (radius / 2));
            p.curveTo((width / 4), height - radius, (width / 4), height - radius, (radius / 2), height);
            p.curveTo(0, height, 0, height, 0, height - (radius / 2));

            p.curveTo(radius, height - (height / 4), radius, height - (height / 4), (radius / 2), (height / 2) + radius);
            p.curveTo(0, height / 2, 0, height / 2, (radius / 2), (height / 2) - radius);
            p.curveTo(radius, (height / 4), radius, (height / 4), 0, (radius / 2));

            p.closePath();

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
            g2d.setColor(getBackground());
            g2d.fill(p);
            g2d.dispose();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:24:09.933

我认为你想要的是显示透明区域。您不需要设置形状，例如，您可以使用：

```
setOpaque(false); 
```

对于有边框的组件，您可以通过以下方式隐藏它：

```
setBorder(null); 
```

对于按钮，您可以使用

```
setBorderPainted(false);
setContentAreaFilled(false); 
```

# android - 检查哪个列表最大

> ID：15783600
> 
> 赞同：0
> 
> 时间：2013-04-03T09:28:43.297
> 
> 标签：android

我有个问题。如何检查哪个列表最大且元素最多。我有 10 个列表，但其中一些可能为空。如何检查哪个列表最大并防止为空？这就是我所拥有的：

```
if(listOfPressureDataToPlot!=null &&listOfPressureDataToPlot.size()>=listOfDBPDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfSBPDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfTempDataToPlot.size()&&
                        listOfPressureDataToPlot.size()>=listOfBIODataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfCENDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfGLUDataToPlot.size()&&
                        listOfPressureDataToPlot.size()>=listOfHBDDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfOBBDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfOBGDataToPlot.size()&&
                        listOfPressureDataToPlot.size()>=listOfOBKDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfRANDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfTALDataToPlot.size()&&
                        listOfPressureDataToPlot.size()>=listOfWAGDataToPlot.size()&& listOfPressureDataToPlot.size()>=listOfWZRDataToPlot.size()){
                    dateValue = checkDateToPopUp(listOfPressureDataToPlot, listOfPressureToPlot, x1).getFirst();
                    setMexTable(listOfPressureDataToPlot);
                } 
```

但是如果此列表之一为空，则此解决方案不会保护我。如何实现简单的代码来检查哪个列表包含最多的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:35:34.133

亲爱的 就像从 10 个数字中找出最大值一样。这是[从 Array 中找出最大值的逻辑](http://www.phanderson.com/C/arraymax.html)。

我知道您没有数组，但您可以使用您拥有的不同 ArrayList 的大小创建它，您还可以在添加时检查 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:36:16.327

您可以创建一个具有 10 个 int 类型元素的数组，然后您可以用 0 初始化每个条目。每个条目代表一个列表的大小，因此您可以检查 lis != null 是否，然后将 list.size 放入相应的入口。例如：

```
int sizes[] = new int[10];
if (list[i] != null) sizes[i] = list[i].size() 
```

然后您可以轻松检查最大尺寸。list[i] 表示 listOfBIO、listOfHBD 等。您可以为每个列表复制 if 子句（只需输入真实姓名），或者将所有列表放入一个数组中，这样您就可以迭代它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:57:06.287

您可以将所有列表放入另一个列表`ArrayList`并像这样遍历它们：

```
 ArrayList maxList = null;

   ArrayList aLists = new ArrayList();
   aLists.add(listOfOBKDataToPlot);
   aLists.add(listOfRANDataToPlot);
   aLists.add(listOfTALDataToPlot);
   aLists.add(listOfWZRDataToPlot);

   for (Object object : aLists)
   {
        ArrayList aList = (ArrayList) object;
        if (aList != null && aList.size() > maxList.size())
        {
            maxList = aList;
        }
   } 
```

# ruby-on-rails - Ruby on Rails：是什么阻止用户向表单添加表单域？

> ID：15783605
> 
> 赞同：3
> 
> 时间：2013-04-03T09:28:54.333
> 
> 标签：ruby-on-rails, ruby

如果我在 Rails 中有一个表单，并且我只想向用户公开某些字段，我如何防止用户破解表单并添加其他字段以插入不需要的数据？

例如，假设我有一个包含以下列的 task.rb 模型：名称、描述、internal_notes。对于“app/views/tasks/new.html.erb”中的公共表单，我只想像这样公开公共字段：

```
form
  name:
  description:
/form 
```

如何防止用户破解表单并执行此操作：

```
form
  name:
  description:
  internal_notes:  <--- inserted by user (e.g. through Google Chrome Elements)
/form 
```

例如，用户可以输入`<input type="text" name="task[internal_notes]" />`表单，并提交不需要的数据。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:33:49.440

这就是为什么存在两个非常有用的 ActiveRecord 类方法的原因：

*   [attr_protected](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected)
*   [attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

查看有关[MassAssignment](http://guides.rubyonrails.org/security.html#mass-assignment)的文档以更好地理解它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:40:23.813

我建议使用[strong_parameters](https://github.com/rails/strong_parameters) gem，因为它将成为 Rails 4 中 MassAssignment protectionn 的标准解决方案

# sql-server-2012 - sql server 2012 偏移量返回相同的记录

> ID：15783608
> 
> 赞同：3
> 
> 时间：2013-04-03T09:28:57.803
> 
> 标签：sql-server-2012

我对 SQL Server 2012 有一个奇怪的问题。

我使用这样的查询

```
SELECT * FROM table ORDER BY field OFFSET 0 ROWS FETCH NEXT 25 ROWS ONLY 
```

每次我从 0 到 25、25 到 50、50 到 75、75 到 100 使用这个查询时，它都会返回相同的 25 条记录。

当我将它与 100 到 125 一起使用时，它会返回原来的 25 到 50 等...

我的表只包含 197 条记录，而且这只发生在我的数据库的一个表中。所有其他表工作正常。

当我通过代码（ASP.NET C#）和直接从 SQL Management Studio 使用查询时，也会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-06T07:43:16.853

我遇到了同样的问题：查询总是在 Offset 值（30）上独立地返回相同的行：

```
OFFSET 30 ROWS FETCH NEXT 10 ROWS ONLY 
```

对我来说，这条评论是正确的答案：

> 很奇怪，也许您在 ORDER BY 中的列不是确定性的，并且会产生问题。字段列可以包含重复项吗？如果是这样，请在 ORDER BY 子句中的字段列之后添加主键列。– 韦利亚西耶

我通过将 [ID] 列添加到 Order By 中解决了这个问题：

```
ORDER BY [Status], [ID] ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-28T09:28:49.617

`OFFSET FETCH NEXT`如果您订购的列不包含唯一数据，那会吓坏了。要“伪造”一个不同的列，您可以这样做：

```
SELECT * FROM table 
ORDER BY ROW_NUMBER() over (order by field) 
OFFSET 0 ROWS FETCH NEXT 25 ROWS ONLY 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T10:02:59.803

您必须稍微更改您的逻辑，以包括哪个页面处于活动状态：

```
DECLARE @pagesize AS BIGINT = 25, @pagenum AS BIGINT = 3; 

SELECT * 
FROM table 
ORDER BY field 
OFFSET @pagesize * @pagenum ROWS FETCH NEXT @pagesize ROWS ONLY; 
```

# javascript - 通过 AJAX 加载内容后运行 javascript 代码

> ID：15783609
> 
> 赞同：0
> 
> 时间：2013-04-03T09:28:58.783
> 
> 标签：javascript, jquery, ajax

我尝试运行我的 javascript 代码，该代码使用 ajax loadContent 函数在同一个文件中声明。我的问题是，加载内容后，该功能不起作用。

我寻找解决方案，我在 jQuery 中找到了 .live() 方法，但我使用的是 1.9 版本，现在不支持。

这里我将电子表格加载到 html doc：

```
var spreadsheet = $( 'div#item-list table > tbody' );

function loadContent(){
     $.post( 'ajaxRequest.php', { 'function' : 'loadData' } )
      .done( function( content ){
               spreadsheet.empty().append( content );
      });
    } 
```

在同一个文件中，我有这个代码：在我将操作按钮加载到电子表格之前，现在我想用“removerow”之类的形式做一些操作

```
$('input[name="removerow"]').on( "click" , function (){
            $.post( 'ajaxRequest.php', { 'function' : 'removerow', 'ID' : ID } )
          .done( function( result ){
                  alert(result);
          });
            return false;
        }); 
```

问题在于 javascript，而不是 PHP，我敢肯定 100%。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:30:54.360

您正在寻找的委托版本`on()`：

```
$('#item-list').on('click', 'input[name="removerow"]', function (){
   ...
}); 
```

# jquery - Tagit 和自动完成功能

> ID：15783611
> 
> 赞同：1
> 
> 时间：2013-04-03T09:29:00.127
> 
> 标签：jquery, tag-it

这是代码：

```
$("#AddFriendToGroup").tagit({
                 autocomplete: { 
                    source: function (request, response) {
                        $.ajax({
                            type: 'POST',
                            url: 'ChatPageTest.aspx/tagFriendAutocomplete',
                            data: "{'ClientID':'" + $("#UserID").val() + "','ClientName': '" + request.term + "'}",
                            contentType: 'application/json; charset=utf-8',
                            dataType: 'json',
                            success: function (data) {
                            },
                            error: function (xhr) {
                                alert("responseText: " + xhr.responseText);
                            }
                        });
                    },
                        minLength: 2
                    }
                }); 
```

服务器端 ：

```
public static string tagFriendAutocomplete(int ClientID,string ClientName)
{
    string Result = "";
    string query = "select fr.FRIEND_ID,c.[USER_NAME] from clients c inner join friends fr on c.CLIENT_ID=fr.FRIEND_ID and fr.CLIENT_ID=" + ClientID + " and c.[USER_NAME] like '%" + ClientName + "%' ";

    DataTable dt = new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
    if (dt.Rows.Count > 0)
    { 
       for(int i=0;i<dt.Rows.Count;i++)
       {
           Result += dt.Rows[i]["FRIEND_ID"] + "," + dt.Rows[i]["USER_NAME"];
        }
    }

    return Result;
} 
```

我很困惑，我不知道在 ajax 成功功能上放置的正确代码是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:23:10.857

有关在 tagit 中使用 $.ajax() 的信息，请参阅[如何让 tagSource 与 $.ajax() 一起使用](https://github.com/aehlke/tag-it/issues/13#issuecomment-5292344)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:25:39.857

这实际上有点棘手，我不记得在文档中看到了答案。

我所做的是以下内容：

```
$("#[id of tag to attach to]").tagit({
autocomplete: {
    source: function( request, response ) {
        if (acAjax && acAjax.readyState != 4)
            acAjax.abort();

        $("#loading").show();

        acAjax = $.ajax({
            url: [server url],
            dataType: "json",
            data: {
                term: request.term
            },
            success: function( data ) {
                returnedUsers = data;
                response( $.map( data, function( item ) {
                    return {
                        label: item,
                        value: item
                    }
                }));
            },
            error: function(xhr, status, error) {
                returnedUsers = [];
            },
            complete: function(xhr, status, error) {
                $("#loading").hide();
            }
        });
    },
    minLength: 2
},
allowSpaces: true,
beforeTagAdded: function(event, ui) {
    if ($.inArray(ui.tagLabel, returnedUsers)==-1)
        return false;
}
}); 
```

抱歉格式不好。几点注意事项：

1.  成功的“响应”功能——这是 tagit 理解的功能。我不完全确定它是如何工作的，但请注意，使用这种格式，您可以让标签打印一件事（“标签”），并将值设为其他内容。

2.  'returnedUsers' 数组允许我阻止用户添加 ajax 未返回的标签。这有点难以弄清楚，所以我希望这对你有帮助。

其他选项在文档中列出，所以我不会深入探讨。希望这对你有帮助。简单地指向文档是没有帮助的——我知道！

# wpf - WPF LocalizationExtensionComboBox locBinding NullReference 异常 OnPropertyChanged of View (MVVM)

> ID：15783614
> 
> 赞同：0
> 
> 时间：2013-04-03T09:29:08.943
> 
> 标签：wpf, mvvm, localization, nullreferenceexception

我有一个 ViewModelMain 我正在更改我当前的视图和当前的 ViewModels。

```
 public ViewModelBase CurrentVm { get; set; }

        public UserControl Content
        {
            get { return _content; }
            set
            {
                _content = value;
                RaisePropertyChanged(() => Content);  // this is the Line where i get the Exception
            }
        } 
```

当我从一个带有 LocBinding 的特定视图导航到另一个没有 LocBinding 的视图时，就会出现问题。

在当前视图中，我有一个带有组合框的 locBinding

```
<ComboBox MinWidth="45" MaxWidth="80" Grid.Column="1" ItemsSource="{Binding AmountUnits.View}"  ItemTemplate="{StaticResource NameResourceKeyTextBoxItemTemplate}" /> 
```

物品模板：

```
 <DataTemplate x:Key="NameResourceKeyTextBoxItemTemplate" >
        <StackPanel>
            <StackPanel.Resources>
                <lex:LocExtension x:Key="LocalizedHeader" x:Name="LocalizedHeader"/>
            </StackPanel.Resources>
            <Engine:LocBinding Source="{Binding Name, Mode=OneWay}" Target="{x:Reference LocalizedHeader}" />
            <TextBlock Text="{x:Reference LocalizedHeader}" />
        </StackPanel>
    </DataTemplate> 
```

绑定的属性（在我的 ViewModel 中）：

```
 private CollectionViewSource _amountUnits;
        public CollectionViewSource AmountUnits
        {
            get { return _amountUnits; }
            set { _amountUnits = value;
                RaisePropertyChanged(() => AmountUnits);
            }
        }

        AmountUnits.Source =
                    AmountUnit.GetAll().Select(x => new MaterialInputProp(x.Id, x.TransKey)
                        {
                            Name = x.TransKey,
                            IsSelected = x.IsSelected
                        }).ToList(); 
```

这一切都很好......虽然当我在我的ViewModelMain中更改我的视图并且我的当前视图的PropertyChanged被提升时，我得到一个NullReferenceException..：/它不在乎我的新ViewModel是空的还是复杂的......当我我正在更改我的用户控制内容我得到了异常..：/

例如。我如何在我的 ViewModelMain 中更改我的视图

```
CurrentVm = new MaterialInputViewModel(mc.NewValue);
Content = new InputView(); 
```

在内容设置器中它打破了......

堆栈跟踪：

```
at WPFLocalizeExtension.Engine.LocBinding.OnPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
   at System.Windows.DependencyObject.InvalidateProperty(DependencyProperty dp, Boolean preserveCurrentValue)
   at System.Windows.Data.BindingExpressionBase.Invalidate(Boolean isASubPropertyChange)
   at System.Windows.Data.BindingExpression.TransferValue(Object newValue, Boolean isASubPropertyChange)
   at System.Windows.Data.BindingExpression.Activate(Object item)
   at System.Windows.Data.BindingExpression.OnDataContextChanged(DependencyObject contextElement)
   at System.Windows.Data.BindingExpression.HandlePropertyInvalidation(DependencyObject d, DependencyPropertyChangedEventArgs args)
   at System.Windows.Data.BindingExpressionBase.OnPropertyInvalidation(DependencyObject d, DependencyPropertyChangedEventArgs args)
   at System.Windows.Data.BindingExpression.OnPropertyInvalidation(DependencyObject d, DependencyPropertyChangedEventArgs args)
   at System.Windows.DependentList.InvalidateDependents(DependencyObject source, DependencyPropertyChangedEventArgs sourceArgs)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
... 
```

如果您需要更多信息，请询问...我需要帮助！这很紧急... ：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:42:34.450

刚刚解决了我的问题...

我的本地化扩展更新到版本 2.1.2 修复了它...之前有 1.xx 的最新稳定版本

# windows-phone-7 - I 在 Windows Phone 的 Web 浏览器上显示图像。我想打开一个默认浏览器然后我点击图片

> ID：15783617
> 
> 赞同：0
> 
> 时间：2013-04-03T09:29:13.413
> 
> 标签：windows-phone-7

我创建了一个 windows phone 8 应用程序。它运作良好。现在我正在使用网络浏览器在我的 Windows 手机应用程序中添加一个广告。我有一个网址链接。使用这个链接我打开了一个网络浏览器然后我打开网络浏览器这个浏览器显示一个 GIF 图像。我想当我设备的默认浏览器与另一个 URL 共进午餐时单击此 GIF 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:29:00.067

为 WebBrowser 的导航事件创建一个处理程序

并在处理程序中，检查它正在导航到的 URL，如果导航 URL 是您想要的，则使用 WebBrowserTask 将其重定向到电话的浏览器

```
private void webBrowserControl_Navigating(object sender, NavigatingEventArgs e)
    {
        if (e.Uri.ToString().StartsWith("somexyzurl"))
        {
            e.Cancel = true; // stop the navigation
            WebBrowserTask task = new WebBrowserTask();
            //set the task's URL here then show the task
            task.Show();
        }
     } 
```

为此，您必须将 GIF 设置为超链接。

编辑：实际上，在“somexyzurl”的位置，您必须放置您用于 GIF URL 的链接。

# c - 否则，如果语句错误，我该如何转到嵌套 for 循环中的下一条语句

> ID：15783619
> 
> 赞同：-15
> 
> 时间：2013-04-03T09:29:18.220
> 
> 标签：c

```
for(;;){ /********* infinite iteration**************/
  for(k=1;k<=8;k++){
                  loop1:
                     for(n=0; n<48;n++){
                        for(i=0; i<8; i++){
                               for(j=0; j<natm; j++){
                                             ...................
                                                statements;
                               }
                        }

                    }   
                  E[iter] /*** Result of three loops such as n,i,j ***/ 

                  if (E[iter] < E[iter-1])  
                  {
                    iter++;
                    print the value of E[iter];
                    /***again calculate the E[iter] ****/
                    goto loop1;
                  }
                  else if(E[iter]>E[iter-1])
                 {
/**   stop the current for loop of k and move to k=2 **/
     /*** here is the problem for me i want to get rid of this loop and goto to the next iteration for loop (k =2)***/  

                 }  

            }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:36:08.253

基于**@calccrypto**评论：

如果要进入`for`循环的下一次迭代：

```
else if(E[iter]>E[iter-1])
{
     continue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:36:35.060

替换您的评论 / ***这是问题所在......

```
continue; 
```

continue 语句将跳过当前迭代并继续下一个迭代，而不会像要中断的那样中断整个循环；陈述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:19:24.383

您可以使用`continue;`上述答案显示的命令。或者尝试使用与`goto loop1;`命令相同的逻辑，将其置于`for`循环之上`k`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-04T05:42:22.660

5 级`for`循环——这是一项了不起的成就！还有一个标签！我不会去猜测他们做了什么。

你需要：

```
else if (E[iter] > E[iter-1])
{
    /** stop the current for loop of k and move to k=2       */
    /** here is the problem for me I want to get rid of this */
    /** loop and goto to the next iteration for loop (k =2)  */
    k = 2;
    goto loop1;  
} 
```

`loop1`标签就在循环`for (k = 1; k <= 8; k++)`内；`k`使用set to的值跳转到它将使用 进行`2`迭代`k == 2`。

# asp.net - 关于aspx页面内用户控件的使用

> ID：15783621
> 
> 赞同：0
> 
> 时间：2013-04-03T09:29:21.820
> 
> 标签：asp.net

我有一个包含一个下拉列表和一个文本框的用户控件。我在我的 web 应用程序中使用的这个用户控件在 aspx 页面内。所以我有一个问题，如果我在用户控件内的文本框中放置一些文本，那么下拉列表的 requiredfieldvalidator 应该在运行时启用，否则它应该被禁用。

任何帮助都将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:41:19.593

由于您希望`RequiredFieldValidator`仅当用户在其中输入文本时才处于活动状态，所以`TextBox`我建议使用 a[`CustomValidator`](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=VS.100%29.aspx)代替。

```
void ServerValidation (object source, ServerValidateEventArgs args)
{     
   args.IsValid = TextBox1.Text.Length == 0 || DropDownList1.SelectedIndex != -1; 
} 
```

`CustomValidator`可以在不设置`ControlToValidate`属性的情况下使用控件。

一个可能的客户端验证功能：

```
<script language="javascript">
   <!--
   function ClientValidate(source, arguments)
   {
      var txt = document.getElementById('<%= TextBox1.ClientID %>');
      var ddl = document.getElementById('<%= DropDownList1.ClientID %>');
      if (txt.length == 0)
         arguments.IsValid = true;
      else
         arguments.IsValid = ddl.selectedIndex >= 0;
   }
   // -->
</script> 
```

您必须通过`ClientValidationFunction`属性在验证器上注册它：

```
<asp:CustomValidator Id="CustomValidator1" runat="server"
    ClientValidationFunction="ClientValidate" 
    OnServerValidate="ServerValidation">
</asp:CustomValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:33:53.470

将 CausesValidation 属性设置为 false，则下拉列表不会触发验证。

# html - HTML5/JQM 安卓应用结构

> ID：15783624
> 
> 赞同：0
> 
> 时间：2013-04-03T09:29:30.787
> 
> 标签：html, cordova, geolocation, jquery-mobile

我一直在开发一个应用程序，并找到了很多东西来做我需要的事情，但是似乎有很多方法可以完成这项任务，我想我会问专家他们会走哪条路。

那么，如何构建有问题的应用程序......

Idea，一款使用 GPS 地理定位引导您穿越村庄的应用程序，当您到达兴趣点（可能是 20 个左右）时，该应用程序会提醒您并向您讲述信息（媒体文件），并可能显示一些相关照片。

使用 HTML5、JQM 和 phonegap (Android)，我在一个#page 上进行地理定位，显示当前位置，然后在与该地点的距离足够近时触发页面更改，然后播放位于 Web 服务器上的音频文件.

我目前有一个多页面设置，但是当我尝试添加更多兴趣点并显示不同的地图等时，它变得令人困惑，并且内部页面导航被证明是棘手的。我已经在构建中达到了一个点，现在想知道如何在不扰乱已经工作的情况下继续进行。

对于功能，多页是要走的路吗？如果是这样，我应该如何构建它？每次到达某个点时，它是否应该打开一个新的#page，然后在该页面上运行一个事件？将所有叙事 mp3 文件存储在本地还是服务器上？将所有地图坐标存储在一个数组中并引用它们，如何？

请问有什么建议吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:25:39.427

当您使用单页架构或多页架构时，需要考虑几件事情。

使用一页架构，您的所有“页面”都驻留在一个 html 文件中。所以javascript将被加载一次。

使用多页架构，将更容易维护页面。但是当您更改页面时，根据您用于更改页面的内容，可能会重新加载 javscript。

如果您使用 jqm 的 changePage，它将加载第一个“页面”div，而如果您使用纯 javascript 重新加载来更改页面，则所有 javascript 都将被重新加载。

就个人而言，我使用这两者的混合。取决于我如何构建我的项目。

# html - 无序列表徽章/计数标签

> ID：15783625
> 
> 赞同：0
> 
> 时间：2013-04-03T09:29:31.753
> 
> 标签：html, css

在无序列表的右侧创建徽章/计数标签的最佳方法是什么，类似于 Facebook（如下所示 -**消息**旁边的徽章）：

![在此处输入图像描述](https://i.stack.imgur.com/KSPYM.png)

理想情况下，我想完全在 CSS 中完成此操作，而不需要图像。我熟悉创建具有相关角半径等的 div 以提供略微圆润的效果，但我不确定将元素放置在右侧并将其与该元素特别关联的最佳和最优雅的方式列表项（用于 CSS 中的识别目的）。

提前感谢您的任何指导/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:32:06.827

像这样的东西：

HTML：

```
<ul>
    <li>Item <span>3</span></li>
    <li>Item <span>3</span></li>
    <li>Item <span>3</span></li>
    <li>Item <span>3</span></li>
    <li>Item <span>3</span></li>
    <li>Item <span>3</span></li>
</ul> 
```

CSS：

```
li {
    background: #eee;
    padding: 0.5em;
    width: 300px;
}

span {
    background: #ccc;
    display: block;
    float: right;
    padding: 0 0.5em;
} 
```

演示：http: [//jsfiddle.net/sBJ8y/](http://jsfiddle.net/sBJ8y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:48:11.270

只需做这个小代码。要从列表元素中删除标记，请编写
ul li{ list-style:none;}

# ios - 如何使用 JSON 从 URL 绑定 UITableview 中的值？

> ID：15783630
> 
> 赞同：1
> 
> 时间：2013-04-03T09:29:57.053
> 
> 标签：ios, objective-c

我在我的应用程序中编写了代码，例如：

```
-(void)viewDidLoad
{

    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@""]];

    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

    NSArray *statuses = [parser objectWithString:json_string error:nil];

    for (NSDictionary *status in statuses) {

        NSLog(@"%@ - %@", [status objectForKey:@"Name"], [status objectForKey:@"LoginUrl"] );
    }
} 
```

这是我的 JSON。我只想在我的 UITableView 中获取名称、图像、登录网址。

**JSON**

**0**

```
Name : "Windows Live™ ID"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes 
```

**1**

```
Name : "Google"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes 
```

**2**

```
Name : "Yahoo!"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes 
```

我应该在我的 .m 文件中写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:55:06.450

这是一个关于解析 JSON 并在表视图中显示的简单教程[http://www.altinkonline.nl/tutorials/json/xcode-and-parsing-json/](http://www.altinkonline.nl/tutorials/json/xcode-and-parsing-json/)

**注意：**解析发生在`- (void)viewWillAppear:(BOOL)animated`- 除非您确实需要在每次视图出现时下载和解析数据，否则不要这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:04:57.487

不幸的是，与 OSX 不同，[您在 iOS 和 Cocoa-touch 中没有绑定](https://stackoverflow.com/questions/3812972/is-there-any-data-binding-mechanism-available-for-ios)。

我假设您正在寻找的是标准的 UITableView 填充机制，这是通过实现 UITableView 的 Datasource 和 Delegate 方法来实现的。

这已经在很多线程中讨论过，但我会提醒你基本策略。

从您的 JSON 响应中，您有一个数组，每个数组都包含填充 UITableCellView 所需的数据。在`cellForRowAtIndexPath`: 你应该检查 indexPath 行（假设你只有一个部分），获取相应数组的元素，并使用它来设置 CellView 的属性。它看起来像这样：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier] autorelease];
    }
 NSDictionary *myJsonResponseIndividualElement = myJsonResponseElementsArray[indexPath.row];
 cell.textLabel.text = myJsonResponseIndividualElement[@"Name"];    
return cell; 
```

}

# java - 如何在 JavaEE Web 应用程序中包含一个 groovy 控制台

> ID：15783631
> 
> 赞同：1
> 
> 时间：2013-04-03T09:30:00.267
> 
> 标签：java, jakarta-ee, groovy, console

在 Web 应用程序中包含 groovy 控制台的最佳方式是什么，我可以在其中输入代码并查看输出？在测试阶段检查/调试生活应用程序将非常方便。

我找到了[这些工具](http://sourceforge.net/projects/jeeutils/)，但在 Maven 存储库中没有看到它们。所以我想可能还有别的东西。我也看到了[这个问题](https://stackoverflow.com/q/2008233/520567)。它指向[grails 控制台插件](http://www.grails.org/plugin/console)。但在我看来，需要一个我不想要的 grails 项目。我只想要一个可以使用 Maven 配置文件激活的控制台。我希望现在还有其他选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T10:35:23.440

你应该看看[`GroovyShell`](http://groovy.codehaus.org/api/groovy/lang/GroovyShell.html). 它直接与 Groovy 下载包 (groovy-2.1.2.jar) 一起提供。您可以在那里传递一个 groovy 脚本并提供一些数据绑定。

例如：

```
final String script = "1+x";
try
{
  final Map<String, Object> ctx = new HashMap<String, Object>();
  ctx.put("x", 5);
  final Binding binding = new Binding(ctx);
  final Object result = new GroovyShell(binding).evaluate(script);
  System.out.println(result);
}
catch (final GroovyRuntimeException e)
{
  // something bad happend - e.g. script error
  e.printStackTrace();
} 
```

将其包含到您的 web 应用程序中的内容应该是直截了当的。

# mysql - 计算多个表给我相同的结果

> ID：15783635
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:06.533
> 
> 标签：mysql, sql, join, count

我有两张桌子，想计算两张桌子上的身份证号码。一张表只会有一个结果，但另一张可能会有更多。

```
select 
a.ID,
count(a.ID),
count(b.ID)
from a

join b on
(b.ID=a.ID)

where a.ID='7820193'
group by a.ID 
```

结果看起来像这个 ID 7820193 count (a.ID)=200 count(b.ID)=200

但是，在我尝试过的所有类型的连接（左、右、内）中，只有一个该 ID 号的实例我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:43:22.960

这应该可以解决问题：

```
SELECT
  Derived.id,
  COUNT(*),
  Derived.count

FROM(
  SELECT
    id,
    COUNT(*) AS count

  FROM a

  WHERE id = 7820193
) AS Derived

JOIN b AS b ON b.id = Derived.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:45:44.830

```
select 
    a.id, 
    count(a.id),
    b.id,
    count(b.id)
from a,b 
where a.id = b.id and a.id = ''7820193'
group by 
    a.id,
    b.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:50:47.617

试试看。

```
SELECT a.ID, COUNT(a.ID) counta, (SELECT COUNT(b.ID) FROM b WHERE b.ID = a.ID  GROUP BY b.ID) AS countb
FROM a 
WHERE a.ID='7820193' GROUP BY a.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T07:26:59.817

这应该会给你预期的结果，试一试:)

```
SELECT 
    z.id,
    count(a.id) as count_ID_from_Table_A,
    count(b.id) as count_ID_from_Table_B
FROM
   (SELECT ID FROM table1
    UNION
    SELECT ID FROM table2) z
LEFT JOIN 
    table1 a ON z.id=a.id
LEFT JOIN 
    table2 b ON z.id=b.id
GROUP BY 
    z.id 
```

# comparison - 由于“distanceToInstance”计算和比较导致的 doSMOTE 失败

> ID：15783637
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:08.083
> 
> 标签：comparison, weka

我正在使用 SMOTE 机制来过滤我的数据集，但过滤操作往往会失败。

我在 doSMOTE 函数中找到了我的案例的路径原因，其中：

1-计算实例之间的距离。

2-使用比较器根据这些距离对实例进行排序：

```
public int compare(Object o1, Object o2) {
      double distance1 = (Double) ((Object[]) o1)[0];
      double distance2 = (Double) ((Object[]) o2)[0];
      return (int) Math.ceil(distance1 - distance2);
} 
```

但是在这个阶段——Java 的比较规则被打破并抛出异常。

我怀疑原因是我的实例彼此太接近了。远处的一瞥附在帖子的末尾。

我的问题是：

1-这是一个合理的案例吗？

2-有没有办法绕过它？

3- 如果 SMOTE 在这种情况下没有用 - 您可以推荐哪些其他过滤器？

*距离采样：*

0.0000000000000000000

0.0012141773193000000

0.0038432461240999900

0.0061871080511999900

0.0100299787545999000

0.0104868096109699000

0.0105987645799099000

0.0108892893852699000

0.0117478589556099000

1.0309228276616200000

1.0310198235697600000

1.0313107565587700000

2.1496389158514700000

2.1507375480523100000

3.0822389928979700000

3.0824063362008500000

3.0827550748437000000

3.1315505239392400000

4.0849290781932300000

4.0849749023536100000

5.0827069584694600000

5.0827154979640900000

5.0827562565688700000

6.0680583877232500000

6.0680629044326200000

6.0680841744788300000

6.0681194562755100000

6.0681666719043900000

7.0640507924313300000

7.0640864288327500000

99983.1268106843000000000

99983.1287314636000000000

99983.1306576871000000000

99983.1325893850000000000

99983.1345265875000000000

99983.1454175467000000000

99983.1475548918000000000

99983.1496988369000000000

99983.1518494214000000000

99983.1540066853000000000

99983.1561706687000000000

99983.1583414124000000000

99983.1605189572000000000

99983.1627033444000000000

99983.1692979800000000000

99983.1715101578000000000

99983.1737293904000000000

99983.1759557214000000000

99983.1781891948000000000

99983.1804298551000000000

99983.2325590018000000000

99983.2784693506000000000

99984.1164113154000000000

99984.1167578005000000000

99984.1290293883000000000

99984.1405635856000000000

99984.1514150653000000000

99984.1616332310000000000

99984.1987066124000000000

99984.2049288990000000000

99984.6421596405000000000

99985.0506858703000000000

99985.1065026751000000000

99985.7425293353000000000

99985.7456043256000000000

99985.7486938850000000000

99985.8799957050000000000

99985.8918001021000000000

99986.0036067922000000000

99986.0163781578000000000

99986.0284093637000000000

99986.0362028056000000000

99986.0397551119000000000

99986.0504648354000000000

99986.5805672649000000000

99986.5908405239000000000

99986.6006006520000000000

99986.8206430289000000000

99986.8239828836000000000

99986.8273411574000000000

99986.8307180474000000000

99986.8336975245000000000

99986.8341137537000000000

99986.9395424908000000000

99986.9570787376000000000

99986.9729798986000000000

99987.1063584039000000000

99987.2804998215000000000

99987.2814803568000000000

99987.2824628995000000000

99987.2834474572000000000

99987.2844340383000000000

99987.2854226507000000000

99987.2864133025000000000

99987.2874060019000000000

99987.2884007571000000000

99987.3135877017000000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:12:44.973

Weka 3.7.x 的 SMOTE 包中已修复此问题。

该修复程序也适用于 Weka 3.6。使用 weka 3.7 版时 - 可以通过包管理器进行更新。

了解更多信息：

[SMOTE 更新](http://weka.sourceforge.net/packageMetaData/SMOTE/1.0.3.html)。

# java - Java：读取方法的输出

> ID：15783639
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:10.303
> 
> 标签：java

我正在使用反射在运行时执行方法。但是，当该方法不返回任何内容时，我想读取被调用方法打印的最后一行并将其存储在 String 变量中。有人可以帮我解决这个问题，因为我正在彻底解决。目前我正在使用 System.setOut 来做这件事。有没有更好的方法来做到这一点。下面是我目前正在使用的代码。

```
PrintStream originalOutStream = System.out; 
System.setOut(new PrintStream(new FileOutputStream("D:/myFile.txt")));
smething(2);// a method which prints something
System.setOut(originalOutStream);
FileInputStream fr = new FileInputStream("D:/myFile.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fr));
String strLine;
//Read File Line By Line
while ((strLine = br.readLine()) != null)   {
.. Do the necessary processing
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:40:06.930

根据我的理解，您想从方法中返回一个字符串。最好的方法是创建一个 String 方法：

```
public String finalString = someString();
public String someString() {
  return "foo";
} 
```

请澄清您的问题并添加您正在使用的代码。

编辑：只是打印到控制台的最后一件事？

```
public class Foo {
  public String lastOut = "";

  public static void main(String[] args) {
    lastString = "red " + Integer.parseInt(args[0]);
    System.out.println(lastString);
  }
} 
```

也许是那种东西？或者，您可以使用[`ArrayDeque`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)并继续添加发送到双端队列的最后一个字符串。对我来说，这似乎是一种更实际的解决方法，但这可能不是你想要的......

-软木

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:38:04.473

一种解决方案是将方法调用包装在另一个临时更改`System.out`流并随后检查输出的方法调用中。

它应该如下所示：

```
void wrapper( /* Parameter list */) {
  /* change System.out
     call methods
     take System.out to previous state
  */
} 
```

# ios - 为什么 UIImageView 不会更改为已设置一次的不同图像？

> ID：15783641
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:18.820
> 
> 标签：ios, objective-c, uiimageview

我的代码

```
UIImage *img = [UIImage imageWithCGImage:[repr fullResolutionImage]];
[_photoPreview setImage:img]; 
```

第一次工作正常。但是，当我想更新 _photoPreview 中的图像时，它不会这样做并与原始图像保持一致。

我有一个模糊的怀疑，这与加载界面或其他东西有关，但我可能完全错了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:15:54.760

通过在视图控制器中实现以下代码，我可以毫无问题地更改图像视图中的图像。

```
#import "ViewController.h"

@interface ViewController ()

@property (weak) IBOutlet UIImageView *imageView;

@end

@implementation ViewController

- (IBAction)selectImage1:(id)sender {
    UIImage *image1 = [UIImage imageNamed:@"pic1.png"];
    [_imageView setImage:image1];
}

- (IBAction)selectImage2:(id)sender {
    UIImage *image2 = [UIImage imageNamed:@"pic2.png"];
    [_imageView setImage:image2];
}

- (IBAction)selectImage3:(id)sender {
    UIImage *image3 = [UIImage imageNamed:@"pic3.png"];
    [_imageView setImage:image3];
}

@end 
```

# .htaccess - 使用请求作为查询字符串 (.htaccess) 将所有请求重新路由到 index.php

> ID：15783646
> 
> 赞同：2
> 
> 时间：2013-04-03T09:30:27.087
> 
> 标签：.htaccess, rewrite, query-string

我正在编写我的第一个 .htaccess 文件，虽然我已经学到了很多东西，但我有一件事正在努力解决。

我有一个 CMS，它根据一个名为“文件名”的变量生成页面，该变量通过我的 URL 传递，例如... index.php?filename=about.htm

所以我只有一个真实的文件... index.php

我希望“index.php?filename”不出现，因此所有 URL 看起来都像 www.example.com/about.htm 一样正常，即使“filename”查询字符串仍在传递。

我希望我有道理，这是可能的......谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:49:27.293

想改写`/$var`成`/index.php?filename=$var`？尝试将其粘贴到`.htaccess`文件中：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/index\.php$
RewriteCond %{QUERY_STRING} filename=([a-z0-9-_])
RewriteRule ^(.*) /index.php?filename=%1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:39:33.223

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?filename=$1 [L,QSA] 
```

# extjs - 使用checkboxmodel加载网格时如何默认设置选定行

> ID：15783648
> 
> 赞同：-3
> 
> 时间：2013-04-03T09:30:27.793
> 
> 标签：extjs, extjs4, extjs4.1

这是详细信息：

[http://www.sencha.com/forum/showthread.php?194117-how-set-selected-row-in-default-when-load-gridpanel-using-checkbox-selection-model](http://www.sencha.com/forum/showthread.php?194117-how-set-selected-row-in-default-when-load-gridpanel-using-checkbox-selection-model)

提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T15:30:43.427

在 Ext JS 4.2.1 中工作的测试代码：

```
grid.on('viewready', function(){
    grid.selModel.doSelect(grid.store.data.items[0]);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:34:00.930

更好的解决方案总是受欢迎的！

```
grid.getStore().load({

scope:this,

callback: function (records, operation, success) {
    if(success){

        /*var store = grid.getStore();
        var records = [];
        store.queryBy(function(record,id){

            if(record.data.chkd){
                    records.push(record);
                }

            console.log(id);

        },this);

        grid.getSelectionModel().select(records,false,false);
        */
          var sm = grid.getSelectionModel();
          Ext.each(records, function(record) {
              if(record.data.chkd){
                var row = record.index;
                sm.select(row, true);
              }
      });

    }else{

        //alert(success);
        //console.log(operation.exception);
    }
}}
); 
```

# javascript - 更改 document.readyState 属性

> ID：15783653
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:33.810
> 
> 标签：javascript, jquery, html, dom

`head`如果它们不存在，我将在标签中添加脚本和样式：

```
$(function(){
    var script = CL.addScriptIfMissing('someurl');
    console.log(objectFromScript);
}); 
```

`addScriptIfMissing`工作正常。然后我从加载的脚本中调用 objectFromScript 并且它是未定义的，因为在文档加载时它不存在并且加载需要时间。我有一个解决方案：

```
$(function(){
    var script = CL.addScriptIfMissing('someurl');
    script.addEventListener('load', function(){
        console.log(objectFromScript);
    });
}); 
```

但我需要其他解决方案：我想将 document.readyState 改回`interactive`. 这样`$(document).ready`脚本加载时将停止并第二次调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:36:47.943

您可以这样做来重置就绪状态。

```
$.isReady = false; 
```

触发就绪事件。

```
$.ready(); 
```

不建议更改 的值，`$.isReady`因为它将来可能不起作用。

# sql-server - SQL Server 2008 R2 还原错误

> ID：15783666
> 
> 赞同：0
> 
> 时间：2013-04-03T09:30:55.777
> 
> 标签：sql-server, sql-server-2008

当我在 SQL Server 2008 R2 中恢复数据库备份时，我收到此错误消息。

![在此处输入图像描述](https://i.stack.imgur.com/8wTT4.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:32:56.373

您的备份来自 SQL Server **2008 R2** (v10.50.1600) 安装，并且您正在尝试恢复到 SQL Server **2008** (v10.00.1600)。

这**不受支持**且无法完成。如果您有来自 SQL Server **2008 R2**的备份，则需要恢复到**2008 R2**（或更高版本） - 您无法及时返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:33:36.100

生产版本和目标版本之间的版本不同。我认为你不能简单地解决这个问题，也许尝试制作用于创建数据库和对象的脚本，并使用 SQL Import/Export 工具将数据从源传输到目标。

此外，您可以转到生产数据库，右键单击它，然后选择`Generate scripts`选项以创建具有整个结构的整个数据库。甚至，您可以使用此工具导出数据，然后再导入它们，但对于大量数据，此步骤的工作不可预测。

# c# - 如何将 excel 文件转换为 .csv 文件？

> ID：15783667
> 
> 赞同：4
> 
> 时间：2013-04-03T09:30:59.217
> 
> 标签：c#, windows-ce, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我想创建一个负责将 excel 文件转换为 .csv 文件的小应用程序。

**在 Win CE 中可以吗？如果是这样，有什么帮助吗？**

先感谢您 ！！

**注意**：我正在使用 VS2008，并且正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:36:46.940

您可以通过在 Excel 中使用 saveas() 方法来做到这一点：

```
wbexceltocsv.SaveAs("c:\Filename.csv", Microsoft.Office.Interop.Excel.XlFileFormat.xlCSV) 
```

关注链接：

[http://www.c-sharpcorner.com/UploadFile/yuanwang200409/how-to-convert-xls-file-into-csv-file-in-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/yuanwang200409/how-to-convert-xls-file-into-csv-file-in-C-Sharp/)

这个链接也对你有帮助：

[http://www.codeproject.com/Articles/246772/Convert-xlsx-xls-to-csv](http://www.codeproject.com/Articles/246772/Convert-xlsx-xls-to-csv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:44:58.567

在 Windows CE 设备上没有合理的方法可以做到这一点。CSV 文件可能来自 PC，因此您必须在 PC 上将其转换（使用互操作库或工具），然后才能发送到设备。

# php - camelCase 方法，under_score 方法参数

> ID：15783668
> 
> 赞同：1
> 
> 时间：2013-04-03T09:30:59.967
> 
> 标签：php, coding-style, naming-conventions

这是属于 PHP 的[PDOStatement](http://www.php.net/manual/en/class.pdostatement.php)类的函数[声明：](http://php.net/manual/en/pdostatement.bindvalue.php)

```
public function bindValue ($parameter, $value, $data_type = 'PDO::PARAM_STR') 
```

它展示了 PDOStatmenet 和其他一些 PHP 类使用的编码风格的一些特殊之处 - 方法名称（以及类和实例变量）使用 camelCase 而参数变量 - under_score。

这种编码风格是否遵循任何特定的编码/命名约定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:55:49.147

**[PHP 框架互操作性小组 (FIG)](http://www.php-fig.org/)**创建了一个标准**[PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)** （PHP的基本编码标准，旨在确保共享的 PHP 代码之间的高水平技术互操作性。）。这证明了类常量和方法的这种格式格式。[请参阅指南的第 4 节](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md#4-classes-properties-and-methods)。

FIG 成立于 2009 年，[由多名 PHP 框架开发人员组成](https://github.com/php-fig/fig-standards#voting-members)。他们召集并制定标准以改善框架之间的互操作性和编码风格。它们不是“官方”标准，但其目的是影响 PHP 社区的大部分。在我看来，这个标准在 PHP5.3+ 的世界中已经非常牢固地建立起来了。

# ios - 绘制点的问题

> ID：15783669
> 
> 赞同：0
> 
> 时间：2013-04-03T09:31:00.650
> 
> 标签：ios, uigraphicscontext

在我的应用程序中，我想在屏幕上（用户触摸的地方）画一个点。添加后，我保存`incrementalImage`，下一个点将添加到此图像中。

问题是，第一点没有出现。我错过了什么？

```
 UIGraphicsBeginImageContextWithOptions(self.bounds.size, YES, 0.0);

    if (!self.incrementalImage) // first time; paint background white
    {
        UIBezierPath *rectpath = [UIBezierPath bezierPathWithRect:self.bounds];
        [[UIColor whiteColor] setFill];
        [rectpath fill];
    }
    [self.incrementalImage drawAtPoint:CGPointZero];

    CGContextFillEllipseInRect(UIGraphicsGetCurrentContext(), CGRectMake(point.x - roundf(_lineWidth / 2.0), point.y - roundf(_lineWidth / 2.0), _lineWidth, _lineWidth));

    self.incrementalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

# joomla - 录制后令牌无效

> ID：15783671
> 
> 赞同：0
> 
> 时间：2013-04-03T09:31:06.440
> 
> 标签：joomla, visual-studio-2012, performance-testing

我正在使用 Visual Studio 进行 Web 性能测试我使用 fiddler 记录场景。当我在 Visual Studio 上运行测试时记录成功登录后，我正在测试一个 joomla 网站，响应是无效令牌。有人知道如何处理这个?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:29:00.477

Joomla！登录表单包含一个只能使用一次的令牌。您需要每次从服务器加载实际登录页面（以便服务器处理令牌），或者 - 在私有测试环境中 - 破解核心

```
components/com_users/controllers/user.php 
```

在第 26/28 行（Joomla 2.5 或 3）只需注释登录功能的第一行：

```
public function login()
{
    //  JSession::checkToken('post') or jexit(JText::_('JInvalid_Token')); 
```

# git - 防止在 git pull 处合并

> ID：15783672
> 
> 赞同：1
> 
> 时间：2013-04-03T09:31:12.763
> 
> 标签：git, merge, pull

有时我在执行“git pull origin BRANCH”时不小心输入了错误的分支名称。
当 XXX 不是我目前在本地存储库上检查的同一个分支时，有没有办法禁止“git pull origin XXX”？即仅当本地检查的分支是 XXX 而不是 YYY 时才允许“git pull”。

也就是说，我确实希望“合并”发生，但前提是我拉出我当前在本地存储库中签入的同一个分支。有没有办法可以将本地存储库配置为仅允许来自同一分支名称的“git pull”？

例如：案例1：
本地存储库上当前检查的分支是“test”

```
[* test ] /code$ git pull origin master 
```

这会将代码从“test”分支合并到我的本地“master”分支。==> 我想禁止这个。

案例二：

本地存储库上当前检查的分支是“master”

```
[* master ] /code$ git pull origin master 
```

这会将远程“master”分支的更改合并到我的本地“master”分支。==> 这没关系。

我希望我能很好地解释我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:34:17.083

你应该使用`git fetch`

它执行[以下](http://www.siteground.com/tutorials/git/commands.htm)操作：

> 从远程存储库中获取本地存储库中不存在的所有对象。

**编辑：**

[“git pull”和“git fetch”有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)( `"git pull does a git fetch followed by a git merge"`)

**编辑2：**

AFAIK 你不能禁止进入一个分支，因为它可以是本地名称，并且可以是任何时候。

但是您可以通过使用不检查将项目更改为拉取之前的最后一次提交， `git pull --abort`它应该是这样的。

您可以做的另一件事是`git checkout`在您制作`git pull`.

请记住，您始终可以通过（不可逆）撤消所有操作：

```
git clean -fd
git reset HEAD --hard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:49:26.887

来自'man git-pull'：

```
 git pull runs git fetch with the given parameters and calls git merge to
    merge the retrieved branch heads into the current branch. 
```

因此，

```
 git fetch origin master 
```

不进行自动合并。

你也可以这样做：

```
 git fetch origin master:tmp 
```

从获取的 master 分支创建一个新的分支 'tmp'。
然后`git merge FETCH_HEAD`会告诉你任何冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:13:42.140

Don't worry too much, you can undo the mess by a judicious use of `git reset`. Just make sure that each time you pull your repository is in shipshape.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T09:35:16.717

使用`git fetch`不合并代码。 `git pull`实际上是两个命令的组合，`git fetch`后跟`git merge`

# jsf - JSF - HtmlcommandLink.setOnclick() 在创建动态组件时向 onclick 属性添加其他内容

> ID：15783676
> 
> 赞同：1
> 
> 时间：2013-04-03T09:31:23.853
> 
> 标签：jsf, icefaces

我想创建动态组件（`HtmlCommandLink`s）。当我设置`onClick`属性时，不知何故 JSF 添加了额外的东西。所以它并没有`javascript`像我预期的那样触发我的。通过 FirBug 删除这些额外的东西后，它工作正常。

```
Application app = FacesContext.getCurrentInstance().getApplication();
HtmlCommandLink link = HtmlCommandLink)app.createComponent(HtmlCommandLink.COMPONENT_TYPE);
link.setId("link1");
link.setValue("ClickMe");
link.setOnclick("fireAlert('someText');"); 
```

但是我看到这样的东西......

```
<a onclick="jsf.util.chain(this,event,'fireAlert(\'someText\')','mojarra.jsfcljs(document.getElementById(\'frmBody\'),{\'frmBody:j_idt15:link1\':\'frmBody:j_idt15:link1\'},\'\')');return false" id="frmBody:j_idt15:link1" h>ClickMe</a> 
```

我想要的是......

```
<a onclick="fireAlert('someText')" id="frmBody:j_idt15:link1" h>ClickMe</a> 
```

我正在使用`icefaces`. 为什么我不能将那个简单的文本值设置为我的`onClick`值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:51:01.540

使用`h:commandLink`或`ice:commandLink`与渲染属性。

# jquery - 让 Draggable 元素回到它在 jquery 中的位置

> ID：15783679
> 
> 赞同：0
> 
> 时间：2013-04-03T09:31:42.613
> 
> 标签：jquery, drag-and-drop

我正在创建一个使用 jquery ui 拖放的表单构建器，它运行良好，但现在我想做的是，如果可拖动对象没有进入可放置区域以返回其原始位置，我的代码是：

```
 <script>

  $(function() {
    $( "#dr td" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {

            var InputName = ui.draggable.attr("id");
            console.log(InputName);
            //$.post("socialformpost.php", { add: "John"} );
            var text = $('#myform').text();
            $('#myform').show();
            $('#sf').show();
            $('#myform').append("<div style=\"background-color:#CCC;padding:10px;margin:10px\">"+InputName+"</div>");
            $('#myspan').append(InputName+',');

      },
      r
    });
  });
  </script> 
```

HTML：

```
<table id="dr">
    <tr><td id="FirstName"><span>First Name : </span><input type="text" name="FirstName" data-widget="datepicker" class="draggable" id="draggable"/></td></tr>
    <tr><td id="LastName">Last Name : <input type="text" name="LastName" class="draggable"/></td></tr>
    <tr><td id="Gender">Gender : <input type="text" name="Gender" class="draggable"/></td></tr>
    <tr><td id="Email">Email: <input type="text" name="" class="draggable"/></td></tr>
    <tr><td id="Phone">Phone : <input type="text" class="draggable"/></td></tr>
    <tr><td id="Country">Country : <input type="text" class="draggable"/></td></tr>
    <tr><td id="City">City : <input type="text" class="draggable"/></td></tr>
</table>
<div style="background:#ccc;width:300px;height:400px;border:2px dotted #000" id="droppable" name="mydiv"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:33:43.523

您正在寻找`revert:valid`

[这是关于它的文档](http://jqueryui.com/droppable/#revert)

还有一个例子：

```
$("#draggable").draggable({
    revert: "valid"
}); 
```

# axapta - 通过 ODBC 的动态 AX 批处理作业

> ID：15783682
> 
> 赞同：3
> 
> 时间：2013-04-03T09:31:47.340
> 
> 标签：axapta, batch-processing, dynamics-ax-2009, x++

我在批处理作业中使用 ODBC 连接时遇到问题：执行时，出现以下错误消息：

“ODBC 操作失败。无法连接到数据库无效的连接字符串属性 Trusted_Connection 无法创建对象‘OdbcConnection’”

我尝试连接到 Access 数据库，我使用以下代码：

```
LoginProperty                 loginProperty;
OdbcConnection                odbcConnection;
;
loginProperty = new LoginProperty();
loginProperty.setDSN("MyDSN");
loginProperty.setDatabase("MyDatabase");

odbcConnection = new OdbcConnection(loginProperty); 
```

调试时，它在 odbcConnection = new OdbcConnection(loginProperty) 上崩溃。我在本地客户端执行的作业中测试了相同的代码，没有问题并且工作正常（没有在代码或 DSN 中定义登录密码）。我的 DSN 在 AOS 上似乎没问题，我使用的是不带 SP1 的 AX 2009，我看到了一些示例，其中 loginProperty 对象中定义了登录名/密码，我的 AX 版本 loginProperty 中没有 setUserName() 和 setPassword() 方法目的。我的课程在服务器端执行（作为任何批处理作业）。

是否有一些特定的设置可以通过批处理作业连接到 ODBC 数据源？

有什么想法或建议吗？

感谢您的帮助

编辑：AOS 在 Windows server 2003 32 位上运行，在其上进行了 ODBC 测试，工作正常，但不能通过批处理作业在 AX 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:43:28.863

Most likely you will need a 32-bit DSN connection for your AX. I would create both versions on the AOS server.

Look [here](http://blogs.msdn.com/b/emeadaxsupport/archive/2008/10/31/odbc-dsn-not-appearing-64-bit-os.aspx) for details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:47:16.820

如果您使用的是 64 位计算机，请使用 C:\Windows\SysWOW64\odbca32.exe 创建数据源。检查 AOS 在哪个 ID 下运行，使用该 ID 登录并确保您可以“看到”数据源。还要确保 AOS 帐户有权访问目录/文件（如果使用基于文件的 odbc）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:35:48.730

它可能是由于权限引起的。“*可信连接*”是指您通过**登录到当前会话**的用户连接到数据库。当您从 AX 客户端运行作业时，这将使用运行当前 AX 客户端的用户（登录到活动会话的用户）执行；在批处理作业中从服务器执行代码时，将通过**运行 AOS windows 服务的用户**执行代码。

此用户是否具有读/写/访问访问文件和目录的权限**？**

# ios - 我无法在 ios uiwebview 的 phoneGap 中加载 JQuery

> ID：15783687
> 
> 赞同：0
> 
> 时间：2013-04-03T09:32:14.940
> 
> 标签：ios, cordova

我在我的 UIWebView 中嵌入了 phoneGap，参考了这个文档： [http ://docs.phonegap.com/en/2.2.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS](http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

在 index.html 中，我编写了以下示例代码：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>

        $(document).ready(function() {
                          alert(“jquery loaded”);
                          });
    </script>
</head>

<body>
    <h2>This is a heading</h2>
    <p>This is a paragraph.</p>
    <p>This is another paragraph.</p>
    <button>Click me</button>
</body> 
```

webview加载后，可以显示“body”，但不能弹出alert。所以 jquery.js 没有加载？还是有其他问题？

编辑：我在 src 中添加了“http:”，但不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:35:36.367

在您的代码中添加 http 或 https

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

以上应该对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:21:55.530

改变

```
alert(“jquery loaded”); 
```

到

```
alert("jquery loaded"); 
```

或者

```
alert('jquery loaded'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:19:50.980

您是否添加了 Cordova 文件？

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="./cordova-2.3.0.js"></script>
    <script>

        $(document).ready(function() {
                          alert(“jquery loaded”);
                          });
    </script>
</head>

<body>
    <h2>This is a heading</h2>
    <p>This is a paragraph.</p>
    <p>This is another paragraph.</p>
    <button>Click me</button>
</body>
</html> 
```

此外，尽管 phonegap 使用 HTML 5，但它仍然需要一些不同的代码编写风格。您创建的每个页面都应该在同一个索引页面中，因为 Cordova 在您的项目启动时加载。如果您离开页面 Cordova 需要重新加载。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T02:52:31.937

您是否在 www forder (www/jquery.js) 复制了 jquery 文件。我也用 jquery，我的是 www/js/jquery.js 试试这个！！！

# pdo - PDO fetchColumn() 和 fetchObject() 更好更正确的用法

> ID：15783689
> 
> 赞同：0
> 
> 时间：2013-04-03T09:32:23.373
> 
> 标签：pdo

这一直困扰着我，我有一个返回**单行**的查询，我需要获取它们对应的列值。

```
//Retrieve Ticket Information to Database
$r = db_query("SELECT title, description, terms_cond, image, social_status, sched_stat FROM giveaway_table WHERE ticket_id = :ticket_id",
    array(
        ':ticket_id' => $ticket_id
)); 
```

有两种方法可以获取数据，即使用**fetchColumn()**和**fetchObject()**

**获取对象（）**

```
$object = $r->fetchObject();

$ticket_info[] = $object->title;
$ticket_info[] = $object->description;
$ticket_info[] = $object->terms_cond;
$ticket_info[] = $object->image;
$ticket_info[] = $object->social_status;
$ticket_info[] = $object->sched_stat; 
```

**取列（）**

```
$title = $r->fetchColumn() //Returns title column value
$description = $r->fetchColumn(1) //Returns description column value 
```

想知道哪个更好，或者这些东西有什么优点和缺点？

**如果可能的话，**你们能否就如何检索查询中选择的所有列并将其存储到代码行更少的数组中提出**最佳方法（如果有的话）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:41:34.930

我不知道使用它的利弊。在我的项目中，我经常使用获取数组而不是对象。它更舒服。但是，如果您制作 ORM 项目，那么使用 fetchObject 并使其成为您的对象而不是 std_class 可能会更好。您可以创建一个具有一个参数的构造器，即 stdClass 并从此类中创建您的对象

回答您的其他问题，您可以使用 fetchAll(); 获取所有列；

按照此链接了解有关此功能的更多信息[http://www.php.net/manual/en/pdostatement.fetchall.php](http://www.php.net/manual/en/pdostatement.fetchall.php)

有关抽象数据库层的更多信息，您可以在这里找到 -> [http://www.doctrine-project.org/](http://www.doctrine-project.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:52:37.483

> 有两种方法可以获取数据，即使用 fetchColumn() 和 fetchObject()

真的吗？怎么样`fetch()`？

有一个[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)，您可以在其中找到所需的一切

# excel - LightSwitch 中类似 Excel 的过滤

> ID：15783690
> 
> 赞同：0
> 
> 时间：2013-04-03T09:32:23.847
> 
> 标签：excel, filter, telerik, visual-studio-lightswitch

我对 LightSwitch 还很陌生，并试图为我的表格制作一个响应式过滤器功能。

[这就是它在 Excel 中的样子](http://i.stack.imgur.com/NpxPE.png)

Telerik 扩展有这个[功能](http://www.telerik.com/products/silverlight/gridview.aspx)，你可以在 LightSwitch 中使用它，但我买不起许可证。

有没有其他方法可以在不支付 999 美元的情况下完成同样的事情？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:56:14.817

这里有一个[过滤器控制扩展可用](http://code.msdn.microsoft.com/silverlight/Filter-Control-for-eb947bdc)，但似乎 VS10 和 VS12 版本都没有完全功能（我没有时间自己检查）。

# android - 如何从开发者控制台的产品列表中删除订阅以及它对旧订阅用户的影响？

> ID：15783694
> 
> 赞同：31
> 
> 时间：2013-04-03T09:32:36.900
> 
> 标签：android, in-app-billing, subscription, android-billing

我想从产品列表中删除现有的订阅产品。

由于在开发人员控制台上没有找到删除订阅的任何选项，我将如何执行？

此外，如果以任何可能的方式允许它，那么当他们在与 Google Play 通信时从他们的应用程序中调用 RESTORE_TRANSACTION 时，它会对购买该订阅的现有用户产生任何影响吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-03T21:38:39.073

遗憾的是，无法从开发者控制台的产品列表中删除订阅产品。您可以从应用中提供的产品列表中删除订阅产品，以防止用户看到或购买它。

# android - Android：警报在实际警报时间之前触发

> ID：15783695
> 
> 赞同：0
> 
> 时间：2013-04-03T09:32:42.267
> 
> 标签：android, timer, android-service, alarmmanager

我的应用程序是一个使用 GPS 的跟踪器应用程序。每 15 分钟，它会找到用户的当前位置。为此，我使用了`AlarmManager`. 我通过后台服务获取当前位置，该服务计划在每个`15 minutes`. 该服务将由广播接收器在警报时启动。但是，问题是警报在时间之前触发，即一旦服务启动并完成其工作，服务应该在 15 分钟后被调用。但是，它每隔 2-3 分钟就会被调用一次。

**活动代码**

```
AlarmManager AlmMgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        Sender = PendingIntent.getBroadcast(GpsTrackActivity.this, 0,
                AlarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        AlmMgr.setRepeating(AlarmManager.RTC_WAKEUP, 0, 15 * 60 * 1000,
                Sender); 
```

**广播接收器**

```
public class StartServiceReceiver extends BroadcastReceiver 
{
    private static final String TAG = "StartServiceReceiver";
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Intent serviceIntent = new Intent(context, MyLocationService.class);
        context.startService(serviceIntent);
        Log.v(TAG, "onReceive called");
    }
} 
```

**服务等级**

```
public class MyLocationService extends Service implements
    OnLocationReceivedListener {

private LocationManager manager;
private Location location = null;
PowerManager powerManager;
private WakeLock wakeLock;
private String city, time, udid;
private String country;
GPSLocationListener mGPSLocationListener;
NetworkLocationListener mNetworkLocationListener;
private static final int MAX_ATTEMPTS = 250;
private static String TAG = "MyLocationService";
LocTimerTask mTimerTask;
int mSattelites;
Timer myLocTimer;
int i = 0;
boolean isGPS;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.v(TAG, "onStartCommand called");
    getCurrentLocation();
    time = getCurrentTime();
    udid = getDeviceId();
    return 1;
}

@Override
public void onCreate() {
    Log.v(TAG, "onCreate called");
    powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
            "mywakelock");
    mGPSLocationListener = new GPSLocationListener();
    mNetworkLocationListener = new NetworkLocationListener();
    wakeLock.acquire();
    super.onCreate();
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

public String getCurrentTime() {
    String currentTime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",
            Locale.getDefault()).format(new Date());

    return currentTime;
}

public String getDeviceId() {
    TelephonyManager tm = (TelephonyManager) MyLocationService.this
            .getSystemService(Context.TELEPHONY_SERVICE);
    return tm.getDeviceId();
}

public void getCurrentLocation() {
    manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    manager.addGpsStatusListener(mGPSStatusListener);
    mTimerTask = new LocTimerTask(LocationManager.GPS_PROVIDER);

    if (manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        Log.v(TAG, "GPS ENABLED");
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000L,
                50.0f, mGPSLocationListener);
    } else {
        turnGPSOn();
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000L,
                50.0f, mGPSLocationListener);
    }

    myLocTimer = new Timer("LocationRunner", true);
    myLocTimer.schedule(mTimerTask, 0, 1000);
}

public String getLong(Location loc) {
    String longi = null;
    if (loc != null) {
        longi = Double.toString(loc.getLongitude());
    }
    return longi;
}

public String getLat(Location loc) {
    String lat = null;
    if (loc != null) {
        lat = Double.toString(loc.getLatitude());
    }
    return lat;
}

public class GPSLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location argLocation) {
        location = argLocation;
    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
}

class LocTimerTask extends TimerTask {
    String provider;

    public LocTimerTask(String provider) {
        this.provider = provider;
    }

    final Handler mHandler = new Handler(Looper.getMainLooper());

    Runnable r = new Runnable() {
        @Override
        public void run() {
            i++;
            Log.v(TAG, "Timer Task run " + i);
            location = manager.getLastKnownLocation(provider);

            if (location != null) {
                Log.v(TAG, "in timer task run in if location not null");
                isGPS = true;
                onLocationReceived(location);
                myLocTimer.cancel();
                myLocTimer.purge();
                mTimerTask.cancel();
                return;
            } else {
                Log.v(TAG, "in timer task run in else location null");
                isGPS = false;
                if (location == null && i == MAX_ATTEMPTS) {
                    Log.v(TAG, "if 1 max attempts done");
                    turnGPSOff();
                    location = manager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        Log.v(TAG,
                                "if 1 max attempts done Location from network not null");
                        Log.v(TAG,
                                "if 1 max attempts done Location from network not null coordinates not null");
                        onLocationReceived(location);
                        myLocTimer.cancel();
                        myLocTimer.purge();
                        mTimerTask.cancel();
                        i = 0;
                        return;
                    } else {
                        i = 0;
                        return;
                    }
                } else {
                    return;
                }
            }
        }
    };

    public void run() {
        mHandler.post(r);
    }
}

private GpsStatus.Listener mGPSStatusListener = new GpsStatus.Listener() {

    @Override
    public synchronized void onGpsStatusChanged(int event) {
        switch (event) {
        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            Log.v(TAG, "GPS SAtellitestatus");
            GpsStatus status = manager.getGpsStatus(null);
            mSattelites = 0;
            Iterable<GpsSatellite> list = status.getSatellites();
            for (GpsSatellite satellite : list) {
                if (satellite.usedInFix()) {
                    mSattelites++;
                }
            }
            break;

        case GpsStatus.GPS_EVENT_FIRST_FIX:
            Toast.makeText(getApplicationContext(), "Got First Fix",
            Toast.LENGTH_LONG).show();
            break;

        case GpsStatus.GPS_EVENT_STARTED:
            Toast.makeText(getApplicationContext(), "GPS Event Started",
            Toast.LENGTH_LONG).show();
            break;

        case GpsStatus.GPS_EVENT_STOPPED:
            Toast.makeText(getApplicationContext(), "GPS Event Stopped",
            Toast.LENGTH_LONG).show();
            break;
        default:
            break;
        }
    }
};

public void onDestroy() {
    super.onDestroy();
    if (myLocTimer != null) {
        myLocTimer.cancel();
        myLocTimer.purge();
    }

    if (mTimerTask != null) {
        if (mTimerTask.r != null) {
            mTimerTask.mHandler.removeCallbacks(mTimerTask.r);
        }
    }

    if (manager != null) {
        if (mGPSLocationListener != null) {
            manager.removeUpdates(mGPSLocationListener);
        }

        if (mNetworkLocationListener != null) {
            manager.removeUpdates(mNetworkLocationListener);
        }

        if (mGPSStatusListener != null) {
            manager.removeGpsStatusListener(mGPSStatusListener);
        }
    }
     Toast.makeText(getApplicationContext(), "Service onDestroy called",
     Toast.LENGTH_LONG).show();
}

@Override
public void onLocationReceived(Location mLoc) {
    String lat = getLat(mLoc);
    String lon = getLong(mLoc);
    if (NetworkConnection.isOnline(getApplicationContext())) {
        new SendDataAsynctask(lat, lon, "", time, udid, city, country,
                wakeLock).execute();
        Log.v(TAG, "net available");
    } else {
        Toast.makeText(getApplicationContext(), "Network unavailable",
        Toast.LENGTH_LONG).show();
        Log.v(TAG, "net unavailable");
    }
}
} 
```

我有一个疑问，确实`AlarmManager`会受到 Timer 或 TimerTask 的影响。我问这个是因为在我的服务中我使用了 Timer，因为 GPS 需要时间来找到第一个修复。

# c# - 从 c# 后端更改 asp 控件名称/引用

> ID：15783696
> 
> 赞同：0
> 
> 时间：2013-04-03T09:32:42.313
> 
> 标签：c#, jquery, asp.net, .net

我正在使用 jquery table addrow 插件来生成更多相同的字段（为用户添加多个相同类型的数据）

添加新字段时，会在控件末尾动态生成控件 ID，并在添加的字段中添加 1、2、3 等

这是我的文本框

```
 <asp:TextBox ID="documentName1" ClientIDMode="Static" runat="server" Width="195px" ></asp:TextBox> 
```

我在我的 c# 中将它引用为 documentName1。基本上我想要一种方法来将这个文本框从 c# 更改为“documentName2”

也许有一种方法可以将它作为变量存储在 asp 中？

我尝试了 documentName1 = documentName2 , documentName1.ID = "documentName2" 尝试创建一个新的文本框实例并将其命名为 documentName2，然后将其分配给 documentName1。所有这些都不起作用

请帮忙 ？？

# bash - 使用 Bash 时需要转义哪些字符？

> ID：15783701
> 
> 赞同：263
> 
> 时间：2013-04-03T09:32:50.407
> 
> 标签：bash, shell, unix, escaping, special-characters

是否有需要在 Bash 中转义的完整字符列表？可以检查`sed`吗？

特别是，我正在检查是否`%`需要转义。我试过

```
echo "h%h" | sed 's/%/i/g' 
```

并且工作正常，没有逃脱`%`。这是否意味着`%`不需要转义？这是检查必要性的好方法吗？

更笼统地说：它们是要在`shell`and中转义的相同字符`bash`吗？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2013-11-18T16:47:08.823

有两个简单且安全的规则不仅适用`sh`于`bash`.

## 1.将整个字符串放在单引号中

这适用于除单引号本身之外的所有字符。要转义单引号，请关闭它之前的引用，插入单引号，然后重新打开引用。

```
'I'\''m a s@fe $tring which ends in newline
' 
```

sed 命令：`sed -e "s/'/'\\\\''/g; 1s/^/'/; \$s/\$/'/"`

## 2\. 用反斜杠转义每个字符

这适用于除换行符以外的所有字符。对于换行符，请使用单引号或双引号。*仍必须处理空字符串 - 替换为`""`*

```
\I\'\m\ \a\ \s\@\f\e\ \$\t\r\i\n\g\ \w\h\i\c\h\ \e\n\d\s\ \i\n\ \n\e\w\l\i\n\e"
" 
```

sed 命令：`sed -e 's/./\\&/g; 1{$s/^$/""/}; 1!s/^/"/; $!s/$/"/'`.

### 2b。更易读的版本 2

有一组简单安全的字符，例如`[a-zA-Z0-9,._+:@%/-]`，可以不转义以使其更具可读性

```
I\'m\ a\ s@fe\ \$tring\ which\ ends\ in\ newline"
" 
```

sed 命令：`LC_ALL=C sed -e 's/[^a-zA-Z0-9,._+@%/-]/\\&/g; 1{$s/^$/""/}; 1!s/^/"/; $!s/$/"/'`.

* * *

请注意，在 sed 程序中，无法知道输入的最后一行是否以换行字节结尾（除非它为空）。这就是为什么上述两个 sed 命令都假定它没有。您可以手动添加带引号的换行符。

请注意，shell 变量仅为 POSIX 意义上的文本定义。未定义处理二进制数据。对于重要的实现，除了 NUL 字节外，二进制工作（因为变量是用 C 字符串实现的，并且打算用作 C 字符串，即程序参数），但是您应该切换到“二进制”语言环境，例如 latin1 .

* * *

（您可以通过阅读 POSIX 规范轻松验证规则`sh`。对于 bash，请查看@AustinPhillips 链接的[参考手册）](http://www.gnu.org/software/bash/manual/bashref.html#Quoting)

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2015-01-07T10:38:03.963

## 可用作 shell 输入的格式

### 2021 年 2 月编辑：[bash](/questions/tagged/bash "显示标记为“bash”的问题") `${var@Q}`

在 bash 下，您可以使用*Parameter Expansion*的*Parameter transformation*`@`命令存储变量内容：

 *> ```
> ${parameter@operator}
>        Parameter transformation.  The expansion is either a transforma‐
>        tion of the value of parameter or  information  about  parameter
>        itself,  depending on the value of operator.  Each operator is a
>        single letter:
> 
>        Q      The expansion is a string that is the value of  parameter
>               quoted in a format that can be reused as input.
> ...
>        A      The  expansion  is  a string in the form of an assignment
>               statement or declare command  that,  if  evaluated,  will
>               recreate parameter with its attributes and value. 
> ```

样本：

```
$ var=$'Hello\nGood world.\n'
$ echo "$var"
Hello
Good world.

$ echo "${var@Q}"
$'Hello\nGood world.\n'

$ echo "${var@A}"
var=$'Hello\nGood world.\n' 
```

### 旧答案

为这种请求构建了一个*特殊* `printf`的格式指令 ( )：`%q`

> printf [-v var] 格式 [参数]
> 
> ```
>  %q     causes printf to output the corresponding argument
>         in a format that can be reused as shell input. 
> ```

### 一些样本：

```
read foo
Hello world
printf "%q\n" "$foo"
Hello\ world

printf "%q\n" $'Hello world!\n'
$'Hello world!\n' 
```

这也可以通过变量使用：

```
printf -v var "%q" "$foo
"
echo "$var"
$'Hello world\n' 
```

### 快速检查所有 (128) 个 ascii 字节：

请注意，必须转义从 128 到 255 的所有字节。

```
for i in {0..127} ;do
    printf -v var \\%o $i
    printf -v var $var
    printf -v res "%q" "$var"
    esc=E
    [ "$var" = "$res" ] && esc=-
    printf "%02X %s %-7s\n" $i $esc "$res"
done |
    column 
```

这必须呈现如下内容：

```
00 E ''         1A E $'\032'    34 - 4          4E - N          68 - h      
01 E $'\001'    1B E $'\E'      35 - 5          4F - O          69 - i      
02 E $'\002'    1C E $'\034'    36 - 6          50 - P          6A - j      
03 E $'\003'    1D E $'\035'    37 - 7          51 - Q          6B - k      
04 E $'\004'    1E E $'\036'    38 - 8          52 - R          6C - l      
05 E $'\005'    1F E $'\037'    39 - 9          53 - S          6D - m      
06 E $'\006'    20 E \          3A - :          54 - T          6E - n      
07 E $'\a'      21 E \!         3B E \;         55 - U          6F - o      
08 E $'\b'      22 E \"         3C E \<         56 - V          70 - p      
09 E $'\t'      23 E \#         3D - =          57 - W          71 - q      
0A E $'\n'      24 E \$         3E E \>         58 - X          72 - r      
0B E $'\v'      25 - %          3F E \?         59 - Y          73 - s      
0C E $'\f'      26 E \&         40 - @          5A - Z          74 - t      
0D E $'\r'      27 E \'         41 - A          5B E \[         75 - u      
0E E $'\016'    28 E \(         42 - B          5C E \\         76 - v      
0F E $'\017'    29 E \)         43 - C          5D E \]         77 - w      
10 E $'\020'    2A E \*         44 - D          5E E \^         78 - x      
11 E $'\021'    2B - +          45 - E          5F - _          79 - y      
12 E $'\022'    2C E \,         46 - F          60 E \`         7A - z      
13 E $'\023'    2D - -          47 - G          61 - a          7B E \{     
14 E $'\024'    2E - .          48 - H          62 - b          7C E \|     
15 E $'\025'    2F - /          49 - I          63 - c          7D E \}     
16 E $'\026'    30 - 0          4A - J          64 - d          7E E \~     
17 E $'\027'    31 - 1          4B - K          65 - e          7F E $'\177'
18 E $'\030'    32 - 2          4C - L          66 - f      
19 E $'\031'    33 - 3          4D - M          67 - g 
```

其中第一个字段是字节的十六进制值，第二个包含`E`是否需要转义字符，第三个字段显示字符的转义表示。

### 为什么`,`？

您可能会看到一些并不*总是*需要转义的字符，`,`例如`}`和`{`。

所以并非*总是*如此，但*有时*：

```
echo test 1, 2, 3 and 4,5.
test 1, 2, 3 and 4,5. 
```

或者

```
echo test { 1, 2, 3 }
test { 1, 2, 3 } 
```

但关心：

```
echo test{1,2,3}
test1 test2 test3

echo test\ {1,2,3}
test 1 test 2 test 3

echo test\ {\ 1,\ 2,\ 3\ }
test  1 test  2 test  3

echo test\ {\ 1\,\ 2,\ 3\ }
test  1, 2 test  3 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-03-03T23:00:30.853

为了避免其他人不得不在*bash*中使用 RTFM... ：

> 将字符括在双引号中会保留引号内所有字符的字面值，但`$`, ```, `\`, 和启用历史扩展时除外`!`。

...因此，如果您逃避这些（当然还有报价本身），您可能还可以。

如果您采取更保守的“如有疑问，请转义”方法，应该可以通过不转义标识符字符（即 ASCII 字母、数字或“_”）来避免获取具有特殊含义的字符。这些（即在一些奇怪的 POSIX-ish shell 中）不太可能具有特殊含义，因此需要转义。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2017-06-16T04:52:21.007

使用该`print '%q'` [技术](https://stackoverflow.com/a/27817504/6862601)，我们可以运行一个循环来找出哪些字符是特殊的：

```
#!/bin/bash
special=$'`!@#$%^&*()-_+={}|[]\\;\':",.<>?/ '
for ((i=0; i < ${#special}; i++)); do
    char="${special:i:1}"
    printf -v q_char '%q' "$char"
    if [[ "$char" != "$q_char" ]]; then
        printf 'Yes - character %s needs to be escaped\n' "$char"
    else
        printf 'No - character %s does not need to be escaped\n' "$char"
    fi
done | sort 
```

它给出了这个输出：

```
No, character % does not need to be escaped
No, character + does not need to be escaped
No, character - does not need to be escaped
No, character . does not need to be escaped
No, character / does not need to be escaped
No, character : does not need to be escaped
No, character = does not need to be escaped
No, character @ does not need to be escaped
No, character _ does not need to be escaped
Yes, character   needs to be escaped
Yes, character ! needs to be escaped
Yes, character " needs to be escaped
Yes, character # needs to be escaped
Yes, character $ needs to be escaped
Yes, character & needs to be escaped
Yes, character ' needs to be escaped
Yes, character ( needs to be escaped
Yes, character ) needs to be escaped
Yes, character * needs to be escaped
Yes, character , needs to be escaped
Yes, character ; needs to be escaped
Yes, character < needs to be escaped
Yes, character > needs to be escaped
Yes, character ? needs to be escaped
Yes, character [ needs to be escaped
Yes, character \ needs to be escaped
Yes, character ] needs to be escaped
Yes, character ^ needs to be escaped
Yes, character ` needs to be escaped
Yes, character { needs to be escaped
Yes, character | needs to be escaped
Yes, character } needs to be escaped 
```

一些结果，像是`,`看起来有点可疑。获得@CharlesDuffy 对此的意见会很有趣。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-04-03T09:53:01.323

Bourne 或 POSIX shell 中需要转义的字符与 Bash 中的字符不同。通常（非常）Bash 是这些 shell 的超集，因此您在其中转义的任何内容都`shell`应该在 Bash 中转义。

一个很好的一般规则是“如果有疑问，请避开它​​”。但是转义某些字符会赋予它们特殊的含义，例如`\n`. 这些在和`man bash`下的页面中列出。`Quoting``echo`

除此之外，转义任何不是字母数字的字符，这样更安全。我不知道一个明确的清单。

手册页在某个地方列出了它们，但不是在一个地方。学习语言，这是确定的方法。

一个让我失望的是`!`。这是 Bash（和 csh）中的特殊字符（历史扩展），但在 Korn shell 中不是。甚至`echo "Hello world!"`会出问题。像往常一样使用单引号会删除特殊含义。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-03T09:54:55.433

我想你在谈论 bash 字符串。有不同类型的字符串对转义有不同的要求。例如。单引号字符串与双引号字符串不同。

最好的参考是 bash 手册的[引用](http://www.gnu.org/software/bash/manual/bashref.html#Quoting)部分。

它解释了哪些字符需要转义。请注意，某些字符可能需要转义，具体取决于启用了哪些选项，例如历史扩展。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-01-30T02:58:37.043

我注意到 bash 在使用自动完成时会自动转义一些字符。

例如，如果您有一个名为 的目录`dir:A`，bash 将自动完成`dir\:A`

使用它，我使用 ASCII 表的字符进行了一些实验，并得出以下列表：

*bash 在自动完成时转义的字符*：（包括空格）

```
 !"$&'()*,:;<=>?@[\]^`{|} 
```

*bash 不会转义的字符*：

```
#%+-.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~ 
```

（我排除`/`了 ，因为它不能用于目录名称）*

# blackberry-10 - 如何在 Blackberry App World 开发者门户上获取 Virtual Good 销售报告？

> ID：15783705
> 
> 赞同：-3
> 
> 时间：2013-04-03T09:32:59.983
> 
> 标签：blackberry-10, appworld

我在 Blackberry 10 免费应用程序中销售虚拟商品。但是，我想知道如何查看这个虚拟商品的销售报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:53:52.197

找到了。我必须在“生成图表”页面上检查“包括虚拟商品”。

# iphone - 如何将 ViewController 添加到 UIPageViewController

> ID：15783707
> 
> 赞同：1
> 
> 时间：2013-04-03T09:33:06.990
> 
> 标签：iphone, ios, objective-c, xcode, storyboard

我的故事板上有一个 UIPageViewController，现在我想知道如何向它添加视图控制器？假设我有 5 个视图控制器，如何将它们从头到尾添加到 UIPageViewController？通常我会这样做：

```
 [self addChildViewController:firstViewController];
        [self addChildViewController:secondViewController];
        [self addChildViewController:thridViewController];
        [self addChildViewController:fourthViewController];
        [self addChildViewController:fifthViewController]; 
```

但我不知道如何按这个顺序在 UIPageViewController 上添加它......

**编辑：**

```
ChapterViewController *chapterViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ChapterView"];
NSArray *viewControllers = [NSArray arrayWithObject:chapterViewController];

[self setViewControllers:viewControllers
                         direction:UIPageViewControllerNavigationDirectionForward
                          animated:NO
              completion:^(BOOL finished){
                  NSLog(@"call back success");}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:35:29.680

UIPageViewController 不允许以一种简单的方式一次添加一个新的视图控制器，大概是因为 Apple 希望开发人员***不要***轻易地一次添加一个页面（我可以看到这对于应用程序的用户来说是令人困惑的 UI）。

要做你想做的事，你必须将新的视图控制器添加到一个数组（大概是已经存在的视图控制器的数组，你通过[" `viewControllers`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html#//apple_ref/occ/instp/UIPageViewController/viewControllers)检索），然后用包括你的视图控制器的**新**数组调用[" `setViewControllers:direction:animated:completion:`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html#//apple_ref/occ/instm/UIPageViewController/setViewControllers%3adirection%3aanimated%3acompletion%3a)一个（或多个）要添加到页面视图控制器的新视图控制器。

# spring - Hibernate 保存空的 Spring 自动绑定对象

> ID：15783711
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:23.170
> 
> 标签：spring, hibernate, validation, jsf-2, integration

我正在使用 Spring + JSF2 + Hibernate 构建一个 Web 应用程序。两个相关的类如下所示：

```
@Entity
@Table(name="people")
@Named
public class Person implements Serializable {
private int id;
private String forename;
@Inject private PhoneNumber mobile_phone;
/* Other properties */

@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name="mobile_phone_number_id", nullable = true)
public PhoneNumber getMobilePhone() {
  return mobile_phone;
}
/* Other getters and setters */
}

@Entity
@Table(name="phone_numbers")
@Named
public class PhoneNumber {
private Integer id;
private String code;
private String number;
/* Other stuff */
} 
```

依赖注入由 Spring ( `@Named`, `@Inject`) 处理。数据库持久性是通过 Hibernate 注释 ( `@OneToOne`, `@JoinColumn`) 配置的。JSF 表单元素使用 EL 绑定到这些类。

**我的问题是**如果所有字段都留空（用户不提交任何值），如何告诉休眠不保存自动绑定的电话号码？换句话说，我希望保存 Person 对象，但不希望`phone_numbers`表中出现空字符串的记录。

如果有人知道，还有两个额外的问题。

1.  Spring 何时绑定 PhoneNumber - 在创建人员时或来自 JSF 的 PhoneNumber 请求时？
2.  [已解决] 我的表单中有没有用`required`JSF 中的属性标记的字段。显然，如果这些字段为空，则不应触发验证。问题是，当我配置 Hibernate 验证器时，即使留空，现在也会验证这些非必填字段。是否有任何方法可以跳过未标记为`required`JSF 的空字段的验证？我试图设置bean `<prop key="javax.persistence.validation.mode">CALLBACK</prop>`，但这没有帮助。`hibernateProperties``SessionFactory`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:07:53.963

第二个附赠问题有以下答案：JSF 将空字段视为空字符串，因此必须设置

```
<context-param>
<param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
<param-value>true</param-value>
</context-param> 
```

在 web.xml 中将空字符串解释为 null。显然，一个空字符串不能很好地验证我的正则表达式验证模式。

# mysql - 如何使用“WHERE”处理 MySQL 查询中的 python 列表？

> ID：15783712
> 
> 赞同：1
> 
> 时间：2013-04-03T09:33:24.983
> 
> 标签：mysql, string, python-2.7

我有下面的代码，我希望我的 MySQL 查询在“名称”列中选择与“文件名”python 列表中的值相同的那些值。对于结果，我一直得到一个空的 ()。谁能帮我这个？

```
import MySQLdb
import fnmatch
import os
import pprint

connect = MySQLdb.connect(host = "123.5.4.4", port=3366, user = "me", passwd="*********", db="data2")

filenames=[]
maindict = {}  

for root, dirnames, filenames in os.walk('d:/data1'):  
    for filename in fnmatch.filter(filenames, '*.txt'):   
       filenames.append(filename)

with connect:            
    cur= connect.cursor()            
    cur.execute("SELECT version,name FROM data2.files WHERE name IN ('filenames'.join('')" )
    result = cur.fetchall()

pprint.pprint(result) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:01:26.067

你应该使用

```
cur.execute(
    "SELECT version,name FROM data2.files WHERE name IN (" +
    ",".join(("%s",) * len(filenames)) + 
    ")",
    tuple(filenames)
) 
```

这将创建一个形式为 SQL 字符串

```
WHERE name IN (%s,%s,%s,%s) 
```

使用尽可能多`%s`的 s 并让 MySQL 模块用`filenames`数据替换它们，并根据需要处理引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:43:13.207

代替：

```
cur.execute("SELECT version,name FROM data2.files WHERE name IN ('filenames'.join('')" ) 
```

和：

```
cur.execute("SELECT version,name FROM data2.files WHERE name IN ('%s')" % "','".join(filenames) ) 
```

在 python 外壳中：

```
>>> filenames=['file1', 'file2']
>>> query = "SELECT version,name FROM data2.files WHERE name IN ('%s')" % "','".join(filenames)
>>> print query
SELECT version,name FROM data2.files WHERE name IN ('file1','file2')
>>> 
```

# iphone - 从 NSMutableArray 中删除某些对象

> ID：15783713
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:33:29.690
> 
> 标签：iphone, ios, nsmutablearray, nsobject

我有一个`NSMutableArray`对象，它们属于`AdDetail`具有一些属性的类（例如 adId、adTitle、adPrice ... 等）。我只想删除那些具有`adID = 0`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T09:40:01.607

也许更优雅的东西就足够了？

```
[array removeObjectsInArray:[array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"adID == 0"]]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:38:11.653

使用谓词

```
NSArray *filtered=[array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(adId == 0)"]]; 
```

使用快速枚举：

```
NSMutableArray *newArray=[NSMutableArray new];
for(AdDetail adDetailObj in array){
    if(![[adDetailObj adId] isEqualToString:@"0"]){ //if these are strings, if NSInteger then directly compare using ==
       newArray[newArray.count]=adDetailObj;
   }
} 
```

现在`newArray`包含除`id=0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:37:20.110

```
NSMutableArray *newArray = [NSMutableArray arrayWithArray:yourArray];

for (int i = 0; i < yourArray.count; i++)
{
     AdDetail *obj = (AdDetail *)[yourArray objectAtIndex:i];
     if (obj.adID == 0)
         [newArray removeObjectAtIndex:i];
}
yourArray = [newArray mutableCopy]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T09:38:03.803

```
for(i=0; i < myArray.count; i++)
{
  myClass = [myArray objectAtIndex:i];
  if([myClass.adID isEqualtoString:"0"])// if it it int/NSInteger the write myClass.adID==0
  {
            [myArray removeObjectAtIndex:i];
      i--;
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T09:40:44.777

使用以下代码：

```
int count = array.count;
for(i=0;i<count;i++){

     ADetail *adetail = [array objectAtIndex:i];
     if(adetail.adID = 0){

         [array removeObjectAtIndex:i];
          i--;

     }
     count = array.count;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T09:41:08.793

```
predicate = @"adID == 0";
newArray = [theArray filterUsingPredicate:aPredicate] 
```

# java - 无法获得 WSDL 最大重定向次数 (5)？

> ID：15783715
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:31.747
> 
> 标签：java, web-services, jax-ws

我们使用 RPC 样式实现了一个 jax-ws webservice，并使用以下 url 发布

```
http://localhost:9999/ws/hello?wsdl 
```

但是当我们发出

```
wsimport -keep http://localhost:9999/ws/hello?wsdl 
```

从 jdk bin 命令提示符 wsimport throwing 生成存根的命令无法获得 WSDL 最大重定向数（5），

# android - 是否有明确的 Android ksoap2 从 .Net Web 服务返回对象数组的示例？

> ID：15783716
> 
> 赞同：1
> 
> 时间：2013-04-03T09:33:31.377
> 
> 标签：android, .net, service, web, ksoap2

由于缺乏特定信息，我花了一些时间尝试和调试此问题中的错误，我关注了这篇[文章](http://seesharpgears.blogspot.com/2010/10/web-service-that-returns-array-of.html?showComment=1364980939179#c853038181979931664)。

但是这个人只提供代码片段，而不是一个完整的工作示例。

任何用于从.Net Web 服务返回和解析对象数组的清晰工作示例（android 4+）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:17:56.783

我认为该教程足够清晰。但是您仍在搜索另一个示例，请检查以下内容：[How to parse the SOAP response with complex objects in Android](http://www.oguzozkeroglu.com/android-webservisten-donen-ic-ice-yapidaki-xmlin-parse-edilmesi/)。

`envelope.dotNet = true;`如果您的 web 服务是 .net 服务，请不要忘记在代码中添加行。

它来自我的博客，它的语言是土耳其语，但您可以轻松理解 Java 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T16:01:20.623

试试这个代码，但我在 java webservice 中使用了这个，而不是 .net 试试看

```
 SoapObject request = new SoapObject(NAMESPACE, "getNames");
        SoapSerializationEnvelope envelope = newSoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        HttpTransportSE transport = new HttpTransportSE(URL);

        transport.call(SOAP_ACTION, envelope);

        Vector xx = (Vector)  envelope.getResponse();
        final int size=xx.size();
        System.out.println("Size "+xx.size());
        List<Category> list=new ArrayList<Category>();
        for(int i=0;i<xx.size();i++){
            SoapObject soapObject=(SoapObject)xx.get(i);

            String categoryid=soapObject.getPropertyAsString("category");
            String name=soapObject.getPropertyAsString("name");
            String desc=soapObject.getPropertyAsString("description");

            int id=Integer.parseInt(categoryid);
            list.add(new Category(id,name,desc));

            System.out.println("CategoryId: " +categoryid + " Name: " + name + " Description " + desc);
        } 
```

# python - 基本代码调试python

> ID：15783722
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:42.483
> 
> 标签：python

我对python有点陌生，我试图阅读类似的例子，但我找不到我的答案。我只是想在我的生成器中返回两个值，一个是数字，另一个是时间戳。仅使用数字即可正常工作，但我无法“打印”时间戳，有人可以帮我吗？

```
import random
import datetime

mynumber = 1000

def generator():
    i = 0
    while 1:
        yield random.randint(-1, 1)
        now = datetime.datetime.now()
        i = i + 1

for random_number in generator():
    mynumber = mynumber + random_number
    print mynumber 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:24:08.847

目前还不清楚你想做什么，但 Python 将允许你`yield`和`return`多个项目（以元组的形式）：

```
def generator():
    while 1:
        yield random.randint(-1, 1), datetime.datetime.now()

mynumber = 1000
for random_number, current_time in generator():
    mynumber += random_number
    print mynumber, current_time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:19:19.117

python有一个静态分析的东西，擅长发现基本的东西

```
$ pyflakes f.py
f.py:10: local variable 'now' is assigned to but never used 
```

# asp.net - .NET 应用程序中的非托管资源消耗了高百分比的内存

> ID：15783724
> 
> 赞同：4
> 
> 时间：2013-04-03T09:33:44.270
> 
> 标签：asp.net, memory-leaks, unmanaged, red-gate-ants

我有一个执行简单 MDX 查询并产生输出的网站。此输出用于生成 excel 文件。我使用了 ANTS 探查器，发现大量内存被非托管资源消耗。检查下图：

![](https://i.stack.imgur.com/A9VBs.png) *（[全尺寸图片](https://i.stack.imgur.com/A9VBs.png)）*

**接下来我应该怎么做才能检测到这种内存泄漏。我想找出为什么这些对象仍然存在于记忆中。请建议我下一步该怎么做。**

![在此处输入图像描述](https://i.stack.imgur.com/pk888.png) *（[全尺寸图片](https://i.stack.imgur.com/pk888.png)）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:35:56.023

我遇到了类似的问题。我没有检测内存泄漏的解决方案，但我会让你知道我选择的路径。我没有直接从页面调用 MDX，而是将 MDX 查询移动到一个 SQL 存储过程，该过程返回一个我可以像使用关系查询一样使用的结果集。

```
CREATE procedure [dbo].[executeMdxQuery]
as
Declare @sql nvarchar(max) = '  SELECT a.* FROM OpenQuery("MY_SERVER",'' 

with member [Measures].[Fiscal Calendar Level] as ' --- remaining MDX 

exec sp_executesql @sql 
GO 
```

希望这可以帮助

# google-translate - 谷歌翻译更改货币符号

> ID：15783725
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:44.890
> 
> 标签：google-translate

我正在将谷歌的网站翻译器[1] 集成到客户的网站。

一切工作正常，翻译工作正常......然而，它似乎错误地（并且不一致地）将英镑符号 (£) 翻译成目标语言使用的任何货币。例如，对于法语和德语，该符号（有时）被替换为 EUR 符号 (€)。

这只有时会发生，但我找不到货币符号以外的事件之间的共同链接，所以不确定如何防止它。

显然，10 英镑永远不会与 10 美元、10 兰特或 10 欧元相同——所以我发现自己需要阻止谷歌翻译货币符号，同时允许它翻译其他所有内容。

我能找到的唯一线索是他们自己的帮助[2]，但它涉及将货币符号的每个实例包装在 span 或 div 中，这对于这个应用程序来说是完全不切实际的。

有谁知道更好的方法？

[1] [http://translate.google.com/manager/website/add?hl=en](http://translate.google.com/manager/website/add?hl=en)

[2] [http://support.google.com/translate/#2641276](http://support.google.com/translate/#2641276)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:19:53.830

我能找到控制这一点的唯一方法是使用该`class='notranslate'`方法并将我可以在该类的跨度中找到的价格的每个实例包装起来。

谷歌的支持说你可以在任何（有效的）HTML元素上使用那个类，它会被单独留下，所以我在一些带有价格的选择上使用了它，等等。

总而言之，这是一个可怕的解决方案，但它胜过向不懂英语的人错误地显示价格。

# sql - 带有 Excel 目标的 SSIS 包 -> 适用于本地计算机但不适用于服务器

> ID：15783727
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:48.100
> 
> 标签：sql, sql-server-2008, sql-server-2005, ssis, bids

我开发了一个简单的 SSIS 包，它查询一个表并将结果保存在一个动态命名的 excel 文件中（使用 Excel 连接管理器上的 SSIS 表达式）。该软件包在我的本地机器上就像一个魅力，但在远程服务器上的服务器上却不行。谁能帮我理解为什么会这样？

这里有一些提示：-
1\. 我的本地机器上有 2008 BIDS 环境。在服务器上它的 2005 环境。所以我在服务器上重新创建了包。
2\. 我在我的 packgae 中使用了 Excel 目标任务组件，但服务器上没有安装 Excel。
3\. 我从中检索数据的服务器使用带有用户名和密码的 Windows 身份验证。
4\. 如果我将 Excel 目标任务替换为平面文件目标，则程序包会完美运行并生成正确的文件。

下面我正在生成我收到的错误消息的屏幕截图：- ![在此处输入图像描述](https://i.stack.imgur.com/8g2vt.png)

如果我错过任何评论，我会加分;-)

# ruby-on-rails - Rails：使用自定义列查找 has_many 关联

> ID：15783728
> 
> 赞同：0
> 
> 时间：2013-04-03T09:33:48.180
> 
> 标签：ruby-on-rails, activerecord, has-many

我有 3 个模型：用户、列表、关注

我正在尝试实现一个系统，其中

*   用户可以创建许多列表（列表包含照片，但与此问题无关）
*   用户可以关注其他用户创建的列表

以下是我尝试构建此系统的方式：

首先我们有一个列表的数据库表：

`lists: id, user_id`

并指定如下模型：

```
class User < ActiveRecord::Base
  has_many :lists
end
class List < ActiveRecord::Base
  belongs_to :user
end 
```

我们可以`User.first.lists`毫无问题地做。

现在我的挑战来自于试图创造追随者。我希望用户能够找到

1.  他关注的所有列表
2.  他创建的所有列表
3.  关注他的列表的所有用户（或等效地，所有“关注者”）

这是我试图用来实现上述功能的数据库表：

`followings: user_id, list_id, list_user_id`

在此表定义中，`user_id`指定谁在关注列表，`list_id`指定被关注的列表，并`list_user_id`指定被关注的列表的所有者。`list_user_id`此处用于加快数据库查找速度，这样我们就不必将`lists`表与`users`表连接起来。

现在我被困住了。我试图将用户模型更改为以下内容：

```
class User < ActiveRecord::Base
  has_many :lists
  has_many :followings

  # Works
  has_many :following_lists, :through => :followings, :class_name => "List", :source => :list

  # Doesn't work
  has_many :followed_lists, :through => :followings, :class_name => "List", :source => :list, :conditions => {:list_user_id => self.id}

  # Doesn't work
  has_many :followers, :through => :followings, :class_name => "User", :source => :user
end 
```

第一个目标“找到他关注的所有列表”，通过 完成`has_many :following_lists`，没有问题。但是，似乎很难获得用户的“所有列表被关注”和“所有关注者”。

问题是似乎没有办法指定用于在`followings`表中查找的键。例如，在查找用户 A 的关注者时，我需要在`followings`表中找到`list_user_id`equals的所有行`A.id`，但是`has_many`方法没有提供执行此操作的选项，条件也`:conditions => {:list_user_id => self.id}`不起作用（它会抱怨`undefined method 'id'`）。

那么..您将如何处理这种情况？有没有更好的方法来设计表格，或者我们可以根据当前的表格定义实际计算出一些东西？

顺便说一句，这是`Following`模型的定义方式：

```
class Following < ActiveRecord::Base
  attr_accessible :list_id, :list_user_id, :user_id
  belongs_to :user
  belongs_to :list
  belongs_to :list_user, :class_name => "User"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:06:02.443

您正在尝试获得以下两件事：

1.）他创建的所有列表

2.) 所有关注他列表的用户（或者，等效地，所有“关注者”）

这两者都在用户拥有的列表之上进行过滤。因此与 :through => 以下的关联是不正确的。由于这会将列表范围限定为您关注的列表，而不是您拥有的列表。

做你想要的一种方法是这样的：

```
def followed_lists
  # This essentially limits your owned lists to ones with an entry in the followings table
  lists.join(:followings).all
end

def users_following_owned_lists
  lists.followers.all
end 
```

您需要将关注者关联添加到列表 AR。

```
class List < ActiveRecord::Base
  has_many :followings

  has_many :followers, :through => :followings, :class_name => "User", :source => :user
end 
```

另请注意，下表中的 list_user_id 并不是真正需要的。

# sql - 在不丢失或更改当前数据的情况下更改身份种子

> ID：15783732
> 
> 赞同：2
> 
> 时间：2013-04-03T09:33:57.957
> 
> 标签：sql, sql-server

我有一个现有的数据库，其中包含一些我不想丢失/更改的值，但是我希望更改身份种子，因此删除表是不可能的。

有什么方法可以在不丢失数据的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:39:35.123

您可以使用带有 RESEED 选项的[DBCC CHECKIDENT](http://msdn.microsoft.com/en-us/library/ms176057.aspx)更改种子（当前值） 。

句法

> DBCC CHECKIDENT (
> table_name
> [, { NORESEED | { RESEED [, new_reseed_value] } } ])
> [ WITH NO_INFOMSGS]

例如

```
DBCC CHECKIDENT ( 'myTable', RESEED, 1234 ) 
```

如果您的意思是更改初始值，如果您要执行`TRUNCATE TABLE`- 那么您不能没有`DROP`/ `CREATE`table 序列或`DROP`/ `ADD`column 序列。

# spring-mvc - Spring MVC Jsonp 过滤器响应不正确。（响应输出的内容长度削减）

> ID：15783734
> 
> 赞同：1
> 
> 时间：2013-04-03T09:34:01.067
> 
> 标签：spring-mvc, filter, jsonp

我正在尝试实现这个[Jsonp Filter](http://jpgmr.wordpress.com/2010/07/28/tutorial-implementing-a-servlet-filter-for-jsonp-callback-with-springs-delegatingfilterproxy/ "Jsonp 过滤器")。
但是，每当我调用我的 url`/server/api.jsonp?callback=something`时，它都会削减响应的最后一部分（ContentLength 具有原始响应输出的长度。在这种情况下，这将是 15，因为这`{test: 'blaat'}`是我的原始响应输出 - 请参阅控制器）。
至少这是我的假设，因为我得到的输出是`test({test: 'bl`. 有人知道如何让过滤器工作并发送正确的响应吗？（我什至尝试强制 Content-length - 请参阅 JsonpCallbackFilter）

筛选：

```
public class JsonpCallbackFilter implements Filter {

    protected final Log logger = LogFactory.getLog(JsonpCallbackFilter.class);

    @Override
    public void init(FilterConfig fConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;

        Map<String, String[]> params = httpRequest.getParameterMap();

        if (params.containsKey("callback")) {
            if (logger.isDebugEnabled()) {
                logger.debug("Wrapping response with JSONP callback: " + params.get("callback")[0]);
            }

            OutputStream out = httpResponse.getOutputStream();

            GenericResponseWrapper wrapper = new GenericResponseWrapper(httpResponse);

            chain.doFilter(request, wrapper);

            byte[] callBack = (params.get("callback")[0] + "(").getBytes();
            byte[] callBackEnd = (");").getBytes();

            byte[] jsonpResponse = new byte[callBack.length + wrapper.getData().length + callBackEnd.length];
            System.arraycopy(callBack, 0, jsonpResponse, 0, callBack.length);
            System.arraycopy(wrapper.getData(), 0, jsonpResponse, callBack.length, wrapper.getData().length);
            System.arraycopy(callBackEnd, 0, jsonpResponse, callBack.length + wrapper.getData().length, callBackEnd.length);

            logger.debug(new String(jsonpResponse));
            logger.debug("Length: " + jsonpResponse.length);

            out.write(jsonpResponse);

            wrapper.setContentType("text/javascript;charset=UTF-8");
            wrapper.setContentLength(jsonpResponse.length);
        } else {
            if (logger.isDebugEnabled()) {
                logger.debug("No callback found, resort to default json request!");
            }
            chain.doFilter(request, response);
        }
    }

    @Override
    public void destroy() {
    }
} 
```

通用响应包装器：

```
public class GenericResponseWrapper extends HttpServletResponseWrapper {

    private ByteArrayOutputStream output;
    private FilterServletOutputStream filterStream;
    private PrintWriter printWriter;
    private int contentLength;
    private String contentType;

    public GenericResponseWrapper(HttpServletResponse response) {
        super(response);

        output = new ByteArrayOutputStream();
        filterStream = new FilterServletOutputStream(output);
        printWriter = new PrintWriter(output, true);
    }

    public byte[] getData() {
        printWriter.close();
        return output.toByteArray();
    }

    @Override
    public ServletOutputStream getOutputStream() {
        return filterStream;
    }

    @Override
    public PrintWriter getWriter() {
        return printWriter;
    }

    public int getContentLength() {
        return contentLength;
    }

    @Override
    public void setContentLength(int length) {
        this.contentLength = length;
        super.setContentLength(length);
    }

    @Override
    public String getContentType() {
        return contentType;
    }

    @Override
    public void setContentType(String contentType) {
        this.contentType = contentType;
        super.setContentType(contentType);
    }
} 
```

自定义过滤器输出流：

```
public class FilterServletOutputStream extends ServletOutputStream {

    private DataOutputStream stream;

    public FilterServletOutputStream(OutputStream output) {
        stream = new DataOutputStream(output);
    }

    @Override
    public void write(int b) throws IOException {
        stream.write(b);
    }

    @Override
    public void write(byte[] b) throws IOException {
        stream.write(b);
    }

    @Override
    public void write(byte[] b, int off, int len) throws IOException {
        stream.write(b, off, len);
    }
} 
```

web.xml 过滤器映射：

```
<filter>
    <filter-name>jsonpCallbackFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>jsonpCallbackFilter</filter-name>
    <url-pattern>*.jsonp</url-pattern>
</filter-mapping> 
```

applicationContext.xml 中的 bean 映射

```
<bean id="jsonpCallbackFilter" class="com.world2.utils.spring.filters.jsonp.JsonpCallbackFilter" /> 
```

控制器：

```
@Controller
public class ApiRequests {
    protected final Logger logger = Logger.getLogger(ApiRequests.class);

    @RequestMapping(value = "api.json", produces = {"application/json"}, method = RequestMethod.GET)
    @ResponseBody
    public String handleActionJson(final HttpServletRequest request){
        return "{test: 'blaat'}";
    }

    @RequestMapping(value = "api.jsonp", produces = {"text/javascript", "application/javascript", "application/json"}, method = RequestMethod.GET)
    @ResponseBody
    public String handleActionJsonp(final HttpServletRequest request){
        return "{test: 'blaat'}";
    }
} 
```

我尝试调用的网址：

```
http://host:8084/MyProject/server/api.jsonp?callback=test&_=1364980436087 
```

调试输出：

```
11:13:57,776 DEBUG JsonpCallbackFilter:57 - test({test: 'blaat'});
11:13:57,776 DEBUG JsonpCallbackFilter:58 - Length: 22 
```

结果：

```
test({test: 'bl 
```

而不是预期的结果：

```
test({test: 'blaat'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:41:29.297

显然我必须先设置内容长度，然后再写输出。

正确的：

```
 wrapper.setContentType("text/javascript;charset=UTF-8");
    wrapper.setContentLength(jsonpResponse.length);

    out.write(jsonpResponse); 
```

错误的：

```
 out.write(jsonpResponse);     

    wrapper.setContentType("text/javascript;charset=UTF-8");
    wrapper.setContentLength(jsonpResponse.length); 
```

# arrays - Perl，检查最后一个字符是否是括号

> ID：15783736
> 
> 赞同：1
> 
> 时间：2013-04-03T09:34:10.257
> 
> 标签：arrays, perl, match

我想检查数组条目的最后一个字符，是否是括号。

我的代码如下所示：

```
 my $lastchar = substr $blub[8],-1,1;
        print "$lastchar..............................\n";
        if ($lastchar == "\(" )
        {
            splice @blub, 8, 2, join('', @blub[8,9]);
        } 
```

但是这段代码不起作用......它匹配每个括号，当它是一个开放的“（”或一个封闭的括号“）”时......

提前致谢。问候，约翰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:40:34.277

正如其他人提到的，您需要使用`eq`而不是`==`用于字符串比较。

[`eq`测试字符串相等，而`==`测试数字相等](http://perldoc.perl.org/perlop.html#Equality-Operators)。这是必要的，因为 Perl 是动态类型的。它需要知道您是想将某些东西视为数字还是字符串。例如，`"123.00"`在数值上等价于`"123"`，但两者不是字符串等价的。

在您的原始代码中，Perl 获取每个的数字部分`$lastchar`并`"\("`比较它们。但是，由于两者都没有任何数字，因此每个的“数字部分”都等于零，并且比较总是正确的。

您应该始终`use warnings; use strict;`在您的代码中。如果您启用了警告，您将在比较中收到有关非数字值的警告。

但是，为此使用正则表达式会更 Perlish 和更简单：

```
if ($blub[8] =~ /\($/)
{
    splice @blub, 8, 2, join('', @blub[8,9]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:38:10.320

您需要使用`eq`( `==`is for numbers and `eq`is for strings) 和 just `"("`(这里不需要转义)

```
 my $lastchar = substr $blub[8],-1,1;
    print "$lastchar..............................\n";
    if ( $lastchar eq "(" )
    {
        splice @blub, 8, 2, join('', @blub[8,9]);
    } 
```

# android - 如何在 Android 中显示从服务器接收到的测试数据

> ID：15783742
> 
> 赞同：0
> 
> 时间：2013-04-03T09:34:33.433
> 
> 标签：android, multithreading, user-interface, client

我正在编写一个涉及客户端 -> 服务器 -> 客户端通信（单向流量）的应用程序。我将数据从客户端 A 传输到服务器，测试简单，只需打印到控制台，但是，我正在尝试测试数据是否已发送到下一个客户端。我尝试了一个文本视图，但是这个视图中没有显示任何内容，现在我不知道这是因为数据还没有到达还是因为我编码错误。我在android方面不是很有经验。

我在下面附上了我的代码，如果有人可以提供帮助，我将不胜感激。

问候，加里

```
public class Parent extends Activity {

private Socket s;
private PrintWriter p;
String location;
double Platitude, Plongitude;
double Clatitude, Clongitude;
double distance;

public void onCreate(Bundle savedInstanceState)

{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.parent);

    Thread rec = new Thread(new Runnable() {

        public void run() {

            // TODO Auto-generated method stub
            try { 

                s = new Socket("192.168.1.2", 1980);

                InputStream fromServer = s.getInputStream();

                while (s.isConnected()) {

                    Scanner r = new Scanner(fromServer);

                    if(r.hasNextLine())
                    {
                        location = r.nextLine();
                    }

                    TextView myTextview = (TextView) findViewById(R.id.dist);
                    myTextview.setText(location);

                }

            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
    rec.start();       
} 
```

# php - 如何从数据库中获取不同的数据？

> ID：15783744
> 
> 赞同：2
> 
> 时间：2013-04-03T09:34:35.457
> 
> 标签：php, mysql

我有一个这样的数据库表：
![在此处输入图像描述](https://i.stack.imgur.com/XGug0.jpg)

我想`hostel_name`根据日期与表不同。如果日期相同，则仅获取不同的名称，但如果日期更改，则也获取相同的 hostel_name。就像上图一样。
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:37:37.140

在和上使用`group by`子句`hostel_name``date`

```
SELECT id,date,type,hostel_name,block_id,hostel_charge from <table_name> group by hostel_name,date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:47:10.507

您可以使用 GROUP BY 根据 DATE 和 HOSTEL_NAME 对数据进行分组。但是，如果您只对获得不同的 DATE 和 HOSTEL_NAME 感兴趣，请使用它，

SELECT DISTINCT DATE, HOSTEL_NAME FROM <TABLE_NAME> ORDER BY DATE

# c# - Visual Studio 2012 中的 MVVM Light 显示没有项目模板

> ID：15783746
> 
> 赞同：4
> 
> 时间：2013-04-03T09:34:38.840
> 
> 标签：c#, wpf, c#-4.0, visual-studio-2012, mvvm-light

我已按照[http://www.galasoft.ch/mvvm/installing/](http://www.galasoft.ch/mvvm/installing/)上的指南在 VS 2012 上安装 MVVM light。我已经从[http://mvvmlight.codeplex 下载了适用于 Visual Studio 2012 的 MVVM Light Toolkit V4.1。 com/releases](http://mvvmlight.codeplex.com/releases)安装后，当我在 VS 2012 中单击 FILE->NEW PROJECT 时，我看不到任何 MVVM 轻项目。

我选择默认安装二进制文件、模板和片段。我不知道发生了什么。

我错了什么？没有错误。

我的目标是在 C# 中使用 VS 2012 创建 MVVM 轻项目

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T09:54:04.153

要启用项目模板，您必须转到开始 - 程序 - MVVM Light - Vsix 文件夹并在那里运行其中一个文件（我认为您需要 MvvmLight.VS2012.vsix 但仔细阅读它们的名称以找到适合您的 Visual Studio 版本的文件）。如果您没有这样的文件夹 - 尝试在“C:\Program Files (x86)\Laurent Bugnion (GalaSoft)\Mvvm Light Toolkit\Vsix”中的某个位置找到它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:47:58.293

我有点晚了，但请检查以下路径：

C:\Program Files\Laurent Bugnion (GalaSoft)\Mvvm Light Toolkit\Vsix

（开始 > 所有程序 > MvvmLight > VSIX）

你会发现 Visual Studio Extensions (vsix)。尝试运行 VS2012。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:55:58.790

我通过从源代码手动安装解决了问题。我已将代码片段、模板复制到 VS 2012 目录中，并且可以正常工作。

源代码可以在这里找到[http://mvvmlight.codeplex.com/SourceControl/changeset/view/b9bb3f49bb0e](http://mvvmlight.codeplex.com/SourceControl/changeset/view/b9bb3f49bb0e)

# c++ - 如何在运行时设置列表的类型？

> ID：15783751
> 
> 赞同：0
> 
> 时间：2013-04-03T09:35:02.073
> 
> 标签：c++, list

我有一个基本上包含事件列表的类（其中事件是另一个类）

```
#include "event.h"
#include <list>

class EventPacket
{

private:
    int max_size;

public:
    std::list<Event> EventList;
    EventPacket();
    ~EventPacket();

    void add(Event *event);
    int size();
    void sort();
    int merge(EventPacket *ep);
    void clear();
}; 
```

到目前为止，这工作正常。但是现在，我有另一个类 SpecialEvent，它是 Event 类的扩展。我想使用同一个类 EventPacket 将特殊事件放入列表中，我想知道这样做的正确方法是什么？有没有一种方法可以在不定义其类型的情况下创建列表，以便可以在运行时设置类型（在我的情况下为事件或特殊事件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:43:00.813

您必须存储指针列表，而不是对象列表。例如：

```
std::list<Event*> EventList; 
```

或者

```
std::list<shared_ptr<Event>> EventList; 
```

您不能存储对象列表，`Event`因为任何继承的对象都将被切片。基本上继承的部分将被切断。请参阅：[什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

因为您正在存储指针，所以您现在遇到了内存管理问题。您必须决定您的`EventPacket`对象是否应该取得对象的所有权然后删除它们，或者调用代码是否应该删除它们。

为了解决这个问题，您可能需要研究智能指针，例如`unique_ptr`and `shared_ptr`。您对所有权语义所做的决定将决定智能指针是否有用，如果有用，选择哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:37:42.573

阅读 C++ 书中关于*多态性*的章节。

您不能在运行时更改列表的类型，但是如果您在其中存储指针，那么您可以利用*虚拟调度*让这些指针指向不同继承级别的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:39:33.360

您可以使列表成为`Event`指针列表；这些可以指向派生自`Event`（包括`Event`其自身）的任何类的实例。

`unique_ptr`我建议您使用类似or的智能指针类`shared_ptr`来简化内存管理。

例子：

```
list<shared_ptr<Event> > EventList; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:38:58.727

这是多态性的情况。如果您的类`SpecialEvent`派生自`Event`您可以使用指针并在运行时动态确定它们的行为

```
std::list<Event*> EventList; 
```

如果您有`virtual`方法，运行时将在运行时选择正确的方法。否则，您可能必须`dynamic_cast<>`在运行时使用才能获得正确的类型。

阅读[这篇](http://www.cplusplus.com/doc/tutorial/polymorphism/)文章`polymorphism`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T09:39:03.763

好吧，您将指针传递给`add`函数，您可以将这些指针存储在列表中而不是副本中。最好是智能指针，例如[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr).

# javascript - 更改 jQuery 元素切换

> ID：15783756
> 
> 赞同：1
> 
> 时间：2013-04-03T09:35:16.180
> 
> 标签：javascript, jquery, html, css

我有一个`show / hide`从顶部开始的 div 示例，但我需要从底部到顶部，我试图更改一些代码，但我不能，而且我没有找到任何示例。

```
<script type="text/javascript">
$(document).ready(function(){
    $(".btn-slide").click(function(){
        $("#panel").slideToggle("slow");
        $(this).toggleClass("active"); return false;
    });
});
</script> 
```

滑动面板

```
<div id="panel">
    <!-- you can put content here -->
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:13:44.497

您还可以使用动画效果 ( [http://api.jquery.com/animate/](http://api.jquery.com/animate/) ) 并更改 div 的高度。

```
$(document).ready(function(){
$(".btn-slide").click(function(){
if($('#panel1').height=='0')
$("#panel1").animate({height:"140px"},{duration:1000});
else
$("#panel1").animate({height:"0px"},{duration:1000});

    });
}); 
```

这将作为一个切换以及从底部动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:49:42.520

您可能想要使用jQuery UI 提供的[幻灯片效果。](http://docs.jquery.com/UI/Effects/Slide)它还允许您定义方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:07:04.397

您可能想在 jquery 中使用 animate 选项，这里是代码

HTML

```
<button class="btn-slide">Some Text</button>
<div id="box">
<div id="panel">Sample Text here<br/> Sample Text here<br/>Sample Text here</div>
</div> 
```

CSS

```
#box
{
height: 100px;
width:200px;
position:relative;
border: 1px solid #000;
}
#panel
{
position:absolute;
bottom:0px;
width:200px;
height:20px;
border: 1px solid red;
display:none;
} 
```

查询

```
var panelH = $('#box').innerHeight();
$(".btn-slide").click(function(){
$("#panel").stop(1).show().height(0).animate({height: panelH},500);
});
}); 
```

# android - 按钮单击时未添加列表视图项

> ID：15783758
> 
> 赞同：0
> 
> 时间：2013-04-03T09:35:23.557
> 
> 标签：android, listview, android-listview, adapter, android-arrayadapter

我遇到了适配器在按钮单击时将数据添加到列表视图的问题。

我有一个名为 createteam 的活动，其中包含名称和电子邮件编辑文本以及一个 createplayer 按钮。单击 createplayer 按钮后，名称和电子邮件应添加到列表视图中。

我想使用适配器来做到这一点（这样我就可以学习）。

**更新：单击按钮会添加第一个条目，但是当我** **再次填写编辑文本时，列表视图确实会更新。我在更新** **数据时通知适配器，但只有第一个条目被获取并保持添加到列表视图**

create_team.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
    android:id="@+id/teamname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/blue"
    android:hint="Team Name"
    android:gravity="center"
     android:textStyle="bold">

    </EditText>

<Button
    android:id="@+id/addplayer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/blue"
    android:text="Add Player"
    android:layout_gravity="center"
     android:textStyle="bold">

    </Button>

<LinearLayout
    android:id="@+id/view_addplayer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
 >
 <Button
    android:id="@+id/createplayer"
       android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/red"
    android:text="Create Player"
     android:layout_gravity="center"
     android:textStyle="bold">

    </Button>
    <EditText
        android:id="@+id/name"
        android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/blue"
    android:hint="Name"
    android:gravity="center"
     android:textStyle="bold">

    </EditText>
        <EditText
    android:id="@+id/email"
    android:layout_marginTop="10dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
      android:textColor="@color/blue"

    android:hint="Email "
     android:textStyle="bold"

    android:gravity="center">

    </EditText>

  </LinearLayout>

      <ListView 
          android:id="@+id/android:list"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">

          </ListView>

</LinearLayout>
</ScrollView> 
```

add_player_listview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:orientation="horizontal" 
    android:weightSum="2">

<TextView android:id="@+id/name" 
android:textSize="20sp" 
android:textStyle="bold" 
android:color="@color/blue"
android:textColor="#FFFF00" 
android:layout_width="wrap_content" 
android:layout_height="50dp"/>

<TextView android:id="@+id/email"
android:textSize="15sp" 
android:textStyle="bold" 
android:color="@color/mustard"
android:layout_width="wrap_content" 
android:layout_height="50dp"/>
</LinearLayout> 
```

创建团队活动.java

```
package com.recscores.android;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TableLayout;
import android.widget.Toast;
import com.recscores.android.PlayerInfo;

public class CreateTeamActivity extends ListActivity {
    Button createPlayer;
    EditText Email;
    EditText Name;
    private ArrayList<PlayerInfo> newList;
    private PlayerAddAdapter newAdpt;
    private int i = 0;
    private ListView lv;

    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.create_team);

    newList = new ArrayList<PlayerInfo>();

    // CREATE TEAM
    getWindow().setBackgroundDrawableResource(R.drawable.app_background2);

    createPlayer = (Button)findViewById(R.id.createplayer);

    Email = (EditText)findViewById(R.id.email);
    Name = (EditText)findViewById(R.id.name);

    lv = (ListView)findViewById(android.R.id.list);
    newAdpt = new PlayerAddAdapter(CreateTeamActivity.this,android.R.id.list,newList);
    lv.setAdapter(newAdpt);

    createPlayer.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
        //  newList = new ArrayList<PlayerInfo>();
            PlayerInfo info = new PlayerInfo();
            info.SetName(Name.getText().toString());
            info.SetEmail(Email.getText().toString());
            newList.add(info);          
            newAdpt.notifyDataSetChanged();
            //Thread.sleep(2000);

            Name.setText("");
            Email.setText("");

            }
            });

    }

} 
```

PlayerAddAdapter.java

```
package com.recscores.android;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class PlayerAddAdapter extends ArrayAdapter<PlayerInfo> {
    private Activity activity;
    //private final Context mContext;
    private ArrayList<PlayerInfo> items;

    public PlayerAddAdapter(Activity a, int textViewResourceId, ArrayList<PlayerInfo> items){
    super(a,textViewResourceId,items);
    this.items=items;
    this.activity = a;
    }

    public static class ViewHolder{
        public TextView name;
        public TextView email;
    }
    @Override

    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;
        if (v == null) {
            LayoutInflater vi =
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                 vi.inflate(R.layout.add_player_listview, null);
            holder = new ViewHolder();
            holder.name = (TextView)v.findViewById(R.id.name);
            holder.email = (TextView)v.findViewById(R.id.email);

            v.setTag(holder);
        }
        else
            holder=(ViewHolder)v.getTag();

        final PlayerInfo custom = items.get(position);
        if (custom != null) {
            **holder.name.setText(custom.GetName());
            holder.email.setText(custom.GetEmail());
        }
        return v;
    }

} 
```

播放器信息.java

```
package com.recscores.android;

public class PlayerInfo {

    private String name="";
    private String email="";

        public void SetName(String name){
        this.name = name;
        }
        public String GetName(){
        return this.name;
        }

        public void SetEmail(String email){
        this.email = email;
        }
        public String GetEmail(){
        return this.email;
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:38:02.800

```
LayoutInflater vi =(LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
v = vi.inflate(R.layout.add_player_listview, null); 
```

像这样更改您的代码。您没有将值设置为 v 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:09:38.850

`onClick`你的`button`电话`list.notifyDataSetChanged()`。它将刷新您的列表。

万一如果不起作用，只需检查适配器的 getCount() 它返回的值。如果它正在返回，`0`即使您调用，您的列表也不会显示任何数据`list.notifyDataSetChanged()`。

`arrayList`在你的里面做一个`adapter`并添加新的项目。并从`getCount()`返回大小`arrayList`.

# jquery-ui - 未选中复选框时的警报消息

> ID：15783763
> 
> 赞同：0
> 
> 时间：2013-04-03T09:35:40.350
> 
> 标签：jquery-ui, jquery, jqgrid

我是 jquery 和 Jqgrid 的新手。当未在 jqgrid 中选中复选框时，我在显示警报消息时遇到问题，即我已声明 multiselect:true。

```
function initJqGridSearchSubProject(table,pager,msg,loadSelID,caption,chkMrk ){

 $(table).empty();
 $(table).GridUnload();
 var mygrid =jQuery(table).jqGrid({
    datatype: "local",      
    data:msg,   
    width: 1240,
    scrollOffset:0,     
    height: 250,
    colNames:['ID','PID','Project Folder Name','Sub Project Name','Responsible','Status','Last Updated On'],
    colModel:[
    {name:'id',index:'id',hidden:true, width:5, sorttype:"int", editable: false,resizable:false},
    {name:'pid',hidden:true, width:5, sorttype:"int", editable: false,resizable:false},
    {name:'projectFolderName', width:250, editable: true,formatter:'tsLinks'},
    {name:'subProjectName', width:250, editable: true,formatter:'subProjectLinks'},
    {name:'responsible', width:200, editable:false,resizable:false},
    {name:'status', width:100,editable: true,stype:'select',edittype:"select",resizable:false,editoptions:{value:"ACTIVE:ACTIVE;INACTIVE:INACTIVE;DELETED:DELETED",readonly:false},editrules:{edithidden:false}},   
    {name:'lastUpdatedOn', width:200,editable: false,resizable:false,sorttype:'date',formatter:'date',formatoptions:{ srcformat: 'M d y H:i:s', newformat: 'd M y h:i A' }}

        ],
    pager: pager,
    rowNum:200,     
    rowList:[200,400,600,1000],
    //rowTotal:2000,                    
    //loadOnce:true,    
    //rownumbers:true,
    gridview : true,
    //sortname: 'lastUpdatedOn',                    
    viewrecords: true,
    //sortorder: "desc",                    
    toppager:true,
    multiselect:true,
    singleselect: false, 
    //multiboxonly:true,
    //toolbar: [true,'both'],                   
    caption:caption,
    hidegrid: false,
    gridComplete:function(id){
    //$(chkMrk).hide();
    //alert('grid complete');
    },

     beforeSelectRow: function(rowid, e)
    {
        // reset check box selection only when user clicks on another checkbox
        if($(e.target).is("input:checkbox"))
        {
            // reset/clear other checkboxes selection before making a latest clicked row's checkbox as selected
            jQuery(table).jqGrid('resetSelection');
        }

        // Code To Disable Check Box Selection When User Selects by Clicking on A Row
        return $(e.target).is("input:checkbox");
        //return(true);
    } 
```

});

```
jQuery(table).jqGrid('navGrid',pager,{del:false,add:false,edit:false,search:false,refresh:true,cloneToTop:true,afterRefresh:function(){}},{},{},{},{}); 
jQuery(table).jqGrid('navButtonAdd', table+ '_toppager_left',{caption:"Add WO", buttonicon:"ui-icon ui-icon-plus",id:"SUBPROJID", onClickButton: function(){},position:"first",title:"Add WO"});
}); 
```

这是我的整个代码jqgrid ...我有一排带有prjt名称和子项目名称的字段，我使用多选来在所有字段的行之前显示复选框，它要求用户单击一个复选框以显示其他页面，如果用户不检查，则应向他显示一条警报消息以检查任何复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:57:46.377

在最后一行使用它来取消选中最后选择的复选框

```
jQuery(this).attr('checked', false); 
```

完整代码

```
jQuery(document).ready(function(){
jQuery('input:checkbox').change(
function(){

if (jQuery('input:checkbox:checked').length == jQuery('input:checkbox').length){

    alert('Alert Text.');
jQuery(this).attr('checked', false);
}
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:37:45.903

我希望我理解您的要求。您将自定义按钮“添加 WO”添加到导航栏，如果单击按钮时未选择任何行，则需要显示警报消息，或者如果选择了某些行，则需要重定向到另一个页面。

`$(this).jqGrid("getGridParam", "selarrrow")`您可以使用或使用`$(this).jqGrid("getGridParam", "selrow")`inside of获取所选行的列表，`onClickButton`如果用户单击按钮，则会调用该列表。内部参数`selrow`表示最后选择的行的rowid。如果`$(this).jqGrid("getGridParam", "selrow")`为空，则不选择任何行。该调用`$(this).jqGrid("getGridParam", "selarrrow")`获取另一个内部参数“selarrrow”的值，该参数是选定 ID 的数组。如果使用时会填写`multiselect:true`。

所以我认为如果`selrow`是`null`或者如果`selarrrow`是空数组，你可以向用户显示警告。如果需要重定向到另一个 HTML 页面，您可以为`location.href`.

# java - 允许多个 JFormattedTextField 接受新的 SimpleDateObjects

> ID：15783769
> 
> 赞同：0
> 
> 时间：2013-04-03T09:35:56.620
> 
> 标签：java, swing, simpledateformat, jformattedtextfield

我希望我的 dateField 接受两种日期格式。我目前拥有的解决方案只接受来自 String 数组的最后一个元素。是否可以接受两种日期格式？

```
import java.text.SimpleDateFormat;
import javax.swing.*;

public class TimeConverterView extends JPanel {
private JFormattedTextField dateField;
private final String[] DATE_FORMATS = {"yyy.DDD.HH.mm.ss", "yyyy/MM/dd HH:mm:ss"};

public TimeConverterView() {
    for (String s : DATE_FORMATS){
        dateField = new JFormattedTextField(new SimpleDateFormat(s)); 
    }
} 
} 
```

# php - 以 symfony 形式传递变量 builForm 函数

> ID：15783770
> 
> 赞同：0
> 
> 时间：2013-04-03T09:35:57.133
> 
> 标签：php, symfony

我已经在我的控制器中尝试过这段代码

```
$form = $this->createForm(new CentrexEdit2Type($ids), $centrex); 
```

我现在想将`ids`表单添加到我的表单生成器：

```
 public function buildForm(FormBuilderInterface $builder, array $options)
        {
          $ids = $options['ids']; 
          ....... 
```

我失败了有什么想法吗？

我在这里加入代码：

```
 if ($step==2){
        $form = $this->createForm(new CentrexEdit1Type(), $centrex);
        $ids=$form->get('bases')->getData();
        }

        foreach($ids as $id){echo($id->getId());}
        if ($step==3){
         $form = $this->createForm(new CentrexEdit2Type(array('ids'=>$ids)), $centrex);
        } 
```

我需要`$ids`什么时候`$step==3`，这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:41:51.037

我所做的是以这种方式创建表单：

> $form = $this->createForm(new TheForm($anArray), $client);

`$anArray`数组在哪里。

然后，以我的形式执行以下操作：

```
public $anArray;

public function __construct($anArray)
{
    $this->anArray = $anArray;
} 
```

在此之后，在表单类中我访问数组`$this->anArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:40:27.807

尝试

```
$form = $this->createForm(new CentrexEdit2Type(array('ids'=>$ids)), $centrex); 
```

在你的控制器中

并修改您的表格

```
protected $ids;
public function __construct(array $parameters=Null)
{
  if($parameters)
  {
    if(array_key_exists('ids',$parameters)) $this->ids = $parameters['ids'];   
  }
} 
```

最后一步

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
  $ids = $this->ids; 
  [...] 
} 
```

# xcode - 在 Xamarin.IOS 中处理 UI

> ID：15783771
> 
> 赞同：2
> 
> 时间：2013-04-03T09:35:59.213
> 
> 标签：xcode, xamarin.ios, xamarin-studio

我是使用 xamarin 工作室的新 iphone 开发人员。我想知道是否需要学习 Objective-c 来处理 xcode 中的 ui？例如，我在我的视图控制器（.xib）中创建了一个 UIView（子视图），我需要在同一个按钮单击时生成许多类似的 UIView。那么我是否需要在 xcode .h 或 .m 文件或 xamarin 工作室的 .cs 文件中编写事件代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:42:12.553

不，你不需要学习 Obj-C。能够阅读它会很有帮助，因为 Apple 的示例和文档（以及网络上的大量参考资料）是用 Obj-C 编写的。但是您可以使用 XCode 的设计工具或使用 C# 直接在代码中创建您的 UI，而无需编写任何 Obj-C 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:27:23.527

可以使用 interface builder 在 xib 中创建视图，也可以使用 c# 通过代码创建视图，因为您必须像在 csharp 中一样在 cs 文件中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T21:07:40.213

不，Objective-C .h/m。Xamarin Studio 在 Xcode 项目中生成的文件只是镜像导出的 C# 类上的操作和出口的存根，以便 Xcode UI 设计器（仅理解 Obj-C）可以连接到它们。您可以使用 Xcode 的控制拖动连接系统将出口/操作添加到这些存根，这些将同步回 C#，但添加到 obj-c 存根的任何更高级的内容都将被忽略。您必须用 C# 编写您的实际实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:00:48.980

您不需要学习 Objective-C，尽管它会有所帮助。熟悉 Cocoa Touch 框架更重要，尤其是 UIKit；在使用 Xamarin 进行开发时，这些知识同样有用。

# javascript - 如何在 C++ 向量上从 javascript 存储和调用 v8::Value

> ID：15783780
> 
> 赞同：0
> 
> 时间：2013-04-03T09:36:25.910
> 
> 标签：javascript, c++, v8

可以说我的班级是这样的：

```
namespace foo
{
    class Item
    {
    public:
        Item();
        ~Item();

        std::string Name;
        v8::Local<v8::Value> DataValue;
        bool ReadOnly;
    }; 

    static std::vector<Item *> GlobalCollection;
} 
```

我有一个 Item 的向量，我的 getMessage("Name") 在向量内搜索以找到对应的名称后，必须返回类 Item 的 DataValue 成员。

到目前为止，我将 DataValue 的 v8 对象引用值添加到我的 javascript 代码中。

在调试时，我看到 v8::Value 在从向量中获取项目后不再存在。我只有一个 v8::Object 值，而没有实际数据。

我正在尝试实现（javascript）：

```
var a = my.global('VAR1', 1); // returns true / false
var b = my.global('VAR1'); // must return 1 (number)

var x = 'Store this globaly!';
var c = my.global("VAR2", x); // returns true / false
var d = my.global("VAR2"); // must return string "Store this globaly!" 
```

x 可以是任何 javascript 值或对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:14:41.487

一种可能的解决方案如下：未测试函数值...

```
class Item
{
public:
    Item();
    ~Item();

    std::string Name;
    v8::Persistent<v8::Object> DataValue;
    bool ReadOnly;
};

INSIDE SET FUNCTION:
v8::Local<v8::Object> dataValue;

item = new foo::Item();
item->Name = varName;
item->DataValue = v8::Persistent<v8::Object>::New(dataValue);

std::vector<foo::Item *>::iterator it;
it = foo::GlobalCollection.end();
it = foo::GlobalCollection.insert(it, item);

INSIDE GET FUNCTION:
v8::Local<v8::Value> ret;
foo::Item *item = bla-bla...;
ret = v8::Local<v8::Value>::New(item->DataValue);
return ret; 
```

希望这会有所帮助...

# php - Javascript xmlhttp - 获取 JSON 中的变量名称

> ID：15783781
> 
> 赞同：2
> 
> 时间：2013-04-03T09:36:29.537
> 
> 标签：php, javascript, ajax, json

JSON：

```
{
    dynamicname1: {
        0: "x",
        7: "y",
            ....
    },
    dynamicname2: {
        0: "xx",
        7: "yy",
        14: "zz",
            ...
    }
} 
```

`dynamicname1`并且`dynamicname2`是为每个对服务器的请求（PHP）动态生成的。

我可以获得`dynamicname`每个时间请求和值的名称吗？

```
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        var data = JSON.parse(xmlhttp.responseText);
        // data[0].name; // i want to get name of variable
        $.each(data[0], function(){       
            alert(this);
        });
        $.each(data[1], function(){       
            alert(this);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:39:19.050

您可以使用`for in`循环来迭代对象的属性（键）：

```
for(var key in data) {
    // key will be dynamicname1 in the first iteration, dynamicname2, etc
    console.log(data[key][0]); // x, xx, etc
} 
```

或者，由于您似乎无论如何都在使用 jQuery，您可以使用 [ `jQuery.each()`][1] 来做同样的事情：

```
$.each(data, function(key, value) {
    // key would be dynamicname1, dynamicname2, etc
    // value would be the object that corresponds to that key, so equivalent to data[dynamicname1], etc
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:45:11.353

您可以使用以下方法检索您的动态名称`Object.keys`（[链接到 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)）：

```
xmlhttp.onreadystatechange=function() {

    if (xmlhttp.readyState==4 && xmlhttp.status==200) {

        var data = JSON.parse(xmlhttp.responseText);
        var keys = Object.keys(data); // keys = ["dynamicname1", "dynamicname2"]

        // do whatever you want with it...

    }
} 
```

# python - python导入错误“没有名为appengine.ext的模块”

> ID：15783783
> 
> 赞同：25
> 
> 时间：2013-04-03T09:36:30.707
> 
> 标签：python, google-app-engine

运行此代码后，我发现导入错误：-

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class MainPage(webapp.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, webapp World!')

application = webapp.WSGIApplication([('/', MainPage)],debug=True)

def main():
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

如何使用 google.apengine.ext

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-09-08T10:42:46.887

```
import sys
sys.path.insert(1, '/Users/<username>/google-cloud-sdk/platform/google_appengine')
sys.path.insert(1, '/Users/<username>/google-cloud-sdk/platform/google_appengine/lib/yaml/lib')
sys.path.insert(1, 'lib')

if 'google' in sys.modules:
    del sys.modules['google'] 
```

这为我解决了问题

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-03T09:45:43.713

看起来 App Engine SDK 没有安装，或者至少 Python 运行时找不到它。

阅读并按照此处的说明进行操作：[https ://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Python](https://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Python)

他们告诉你，如何安装 App Engine SDK for Python。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-07T13:51:50.933

尝试：

```
import google
print google.__path__ 
```

看看你到底在导入什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-07T17:56:42.287

我遇到了同样的问题，因为我在下载和安装 SDK 之前 pip 安装了 gcloud。pip 安装创建了一个不包含 appengine 子模块（位于 SDK 文件夹中）的 python 包 google。我卸载了 gcloud 和相关软件包。然后只需 pip 安装 google-cloud-bigquery，这是我需要从 gcloud 获得的唯一软件包。现在一切正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-18T02:52:03.267

我在使用 AWS Lambda 调用 Google Analytics API 时遇到了类似的错误。

(Schweigi [1](https://github.com/googleapis/google-api-python-client/issues/325) ) 的解决方法帮助了我。

```
import googleapiclient
from googleapiclient.discovery_cache.base import Cache

class MemoryCache(Cache):
    _CACHE = {}

    def get(self, url):
        return MemoryCache._CACHE.get(url)

    def set(self, url, content):
        MemoryCache._CACHE[url] = content 
```

用法：

```
service = googleapiclient.discovery.build("analyticsreporting", "v4", http=http, credentials=credentials,cache=MemoryCache()) 
```

希望这对在 AWS Lambda 中遇到此问题的人有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-12T07:56:27.323

**第一个可能的原因：**

您没有在 google cloud sdk 中安装 python 库，因此您可以在 cmd 中运行（以管理员身份）：

`gcloud components install app-engine-python`.

**第二个可能的原因：**

你的 IDE 没有成功进入谷歌库，它们存在于：

`C:\Program Files (x86)\Google\Cloud SDK\google-cloud-sdk\platform\google_appengine`

或在：

`C:\Users\[your user]\AppData\Local\Google\Cloud SDK\google-cloud-sdk\platform\google_appengine`

您可以在附加的链接中看到如何将这些库添加到 IDE 外部库：[https ://stackoverflow.com/a/24206781/8244338](https://stackoverflow.com/a/24206781/8244338)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-26T21:24:40.217

我在python中遇到了这个错误：

```
from google.appengine.api import search
ImportError: No module named appengine.api 
```

我认为这与该线程中发生的事情类似。

所以，我的解决方案是运行“dev_appserver.py 'your yaml file'”。我通过以下链接获得了此解决方案：

1) [https://cloud.google.com/appengine/docs/standard/python/tools/using-local-server](https://cloud.google.com/appengine/docs/standard/python/tools/using-local-server)

2) [https://www.youtube.com/watch?v=BdqUY8lCuBI](https://www.youtube.com/watch?v=BdqUY8lCuBI)

希望这可以帮助！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-24T14:08:48.093

检查您是否在同一个包中命名了某个文件 google.py :)，因为这会影响 google.appengine.ext 的导入。我有同样的错误：

```
python import error “No module named appengine.ext” 
```

并删除文件解决了问题。

# android - 我在这个适用于 Android 的 Proguard 配置中缺少什么？

> ID：15783787
> 
> 赞同：3
> 
> 时间：2013-04-03T09:36:49.697
> 
> 标签：android, exception, protocol-buffers, proguard

我已经尝试了无数的事情，但我无法防止我的应用程序在使用 Proguard 缩小代码时崩溃（混淆被禁用）。启用 Proguard 时，我总是遇到以下异常：

```
04-03 10:26:37.277 E/AndroidRuntime(29460): FATAL EXCEPTION: main
04-03 10:26:37.277 E/AndroidRuntime(29460): java.lang.ExceptionInInitializerError
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.nativeapp.activitycontrollers.LoginController.onLogInSuccess(LoginController.java:199)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.datamanager.BfAccountStateManager$AccountWebViewClient.shouldOverrideUrlLoading(BfAccountStateManager.java:326)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at android.os.Handler.dispatchMessage(Handler.java)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at android.os.Looper.loop(Looper.java)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at android.app.ActivityThread.main(ActivityThread.java)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at dalvik.system.NativeStart.main(Native Method)
04-03 10:26:37.277 E/AndroidRuntime(29460): Caused by: java.lang.ExceptionInInitializerError
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.android.bfsdk.diffusion.requests.mcs.BaseMCSRequest.<clinit>(BaseMCSRequest.java:28)
04-03 10:26:37.277 E/AndroidRuntime(29460):     ... 12 more
04-03 10:26:37.277 E/AndroidRuntime(29460): Caused by: java.lang.ExceptionInInitializerError
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.mobile.mcs.service.descriptor.inplay.Inplay.<clinit>(Inplay.java:20585)
04-03 10:26:37.277 E/AndroidRuntime(29460):     ... 13 more
04-03 10:26:37.277 E/AndroidRuntime(29460): Caused by: java.lang.RuntimeException: Generated message class "com.company.mobile.mcs.service.descriptor.Mcs$MCSRequestMessage$Builder" missing method "getUserAgent".
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.GeneratedMessage.getMethodOrDie(GeneratedMessage.java:1359)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.GeneratedMessage.access$1300(GeneratedMessage.java:57)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.GeneratedMessage$FieldAccessorTable$SingularFieldAccessor.<init>(GeneratedMessage.java:1485)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.GeneratedMessage$FieldAccessorTable.<init>(GeneratedMessage.java:1432)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.mobile.mcs.service.descriptor.Mcs$1.assignDescriptors(Mcs.java:2083)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.Descriptors$FileDescriptor.internalBuildGeneratedFileFrom(Descriptors.java:298)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.company.mobile.mcs.service.descriptor.Mcs.<clinit>(Mcs.java:2109)
04-03 10:26:37.277 E/AndroidRuntime(29460):     ... 14 more
04-03 10:26:37.277 E/AndroidRuntime(29460): Caused by: java.lang.NoSuchMethodException: getUserAgent []
04-03 10:26:37.277 E/AndroidRuntime(29460):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at java.lang.Class.getMethod(Class.java:915)
04-03 10:26:37.277 E/AndroidRuntime(29460):     at com.google.protobuf.GeneratedMessage.getMethodOrDie(GeneratedMessage.java:1357)
04-03 10:26:37.277 E/AndroidRuntime(29460):     ... 20 more 
```

除了 Android 应用程序的标准 Proguard 配置之外，我还添加了以下几行：

```
-keep public class com.company.**

-keep class com.company.* { *; }
-keepclassmembernames class com.company.* { *; }

-keep class * extends com.google.protobuf.GeneratedMessage { *; }
-keepclassmembernames class * extends com.google.protobuf.GeneratedMessage { *; } 
```

但我仍然得到上面提到的异常......

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:34:57.150

问题是 ProtocolBuffers 使用**反射**来调用方法，但**Proguard**看不到反射调用。Proguard 可以更改方法/对象的名称或删除方法/对象，无论哪种方式反射都找不到它。

选项：

*   您可以尝试查找每个可能的反射调用并添加适当的 Proguard 语句。但是您可能需要为每个新版本的协议缓冲区更改此设置。就我个人而言，我不会走这条路

*   您可以尝试将**[optimize_for SPEED](https://developers.google.com/protocol-buffers/docs/proto#options)**选项添加到 Proto 定义并重新生成 java 代码，这将导致更大的类不使用反射并且可以与 Proguard 一起使用。

*   尝试其中一种 JavaMe protobuf 解决方案 - 它们要小得多。见上[一个问题](https://stackoverflow.com/questions/15436956/how-to-solve-the-issue-with-dalvik-compiler-limitation-on-64k-methods)

问题代码：

```
 private static Method getMethodOrDie(
      final Class clazz, final String name, final Class... params) {
    try {
      return clazz.getMethod(name, params);
    } catch (NoSuchMethodException e) {
      throw new RuntimeException(
        "Generated message class \"" + clazz.getName() +
        "\" missing method \"" + name + "\".", e);
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T02:35:22.467

我也遇到过这个问题：java.lang.RuntimeException Generated message class "xxx" missing method "xxx" in signed apk，但在调试模式下是没问题的。而且我确信 Proguard 的配置没问题。

通过分析堆栈跟踪日志，找到了问题的根本原因：print protobuf file log too huge, like

```
List<UserPb.UserInfo> userInfos = obj.getUserInfoList();

Log.d(TAG, "userInfos: " + userInfos); 
```

这个 UserPb.java 文件非常庞大，包含超过 50000 行代码。

所以**不要在签名的 apk 中打印与 protobuf 相关的登录**。

# sql - Oracle SQL 关联子查询以准确获取一行

> ID：15783796
> 
> 赞同：1
> 
> 时间：2013-04-03T09:37:18.217
> 
> 标签：sql, oracle, analytics, correlated-subquery

在 Oracle SQL 相关子查询中，

我需要在子查询上有一个条件来准确地获取一行（如果有更多行，它不应该获取任何行）。

下面的查询工作得很好。但它涉及两次查询同一张表。

```
SELECT m.pk_1
      ,m.pk_2
      ,m.fld_3
      ,(SELECT c.pk_1
        FROM   child_tab c
        WHERE  (SELECT COUNT(*)
                FROM   child_tab c2
                WHERE  c2.pk_1 = m.pk_1
                AND    rownum <= 2) = 1
        AND    c.pk_1 = m.pk_1) c_pk_1
FROM   master_tab m
WHERE  m.pk_1 = '018'
AND    m.pk_2 = 'value' 
```

通过使用解析函数重新设计子查询，下面的查询给出了错误

```
SELECT m.pk_1
      ,m.pk_2
      ,m.fld_3
      ,(SELECT ch.pk_1
        FROM   (SELECT COUNT(*) over() cnt
                      ,c.pk_1
                FROM   child_tab c
                WHERE  c.pk_1 = m.pk_1
                AND    rownum <= 2) ch
        WHERE  cnt = 1
        AND    c.pk_1 = m.pk_1) c_pk_1
FROM   master_tab m
WHERE  m.pk_1 = '018'
AND    m.pk_2 = 'value' 
```

`ORA-00904 m.pk_1 is an invalid identifier`

使用 Oracle SQL 有没有更好的方法来做到这一点？

**更新**

我真正的要求是我将这个 SQL 生成为一个递归过程，它会导致很多这样的级别。而且我选择的数据不会局限于key。我只需要 SQL 解决方案，所以 PLSQL 不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:44:19.270

考虑一下。我没有任何方法来执行和检查这个。所以，请让我知道任何问题

```
 SELECT m.pk_1, m.pk_2, m.fld_3, C.PK1
   FROM MASTER_TAB M, CHILD_TAB C
   WHERE c.pk_1 = m.pk_1 AND m.pk_1 = '018'
   AND    m.pk_2 = 'value'
   AND EXISTS
   (
   SELECT *
   FROM CHILD_TAB C2
   c2.pk_1 = m.pk_1
   HAVING COUNT(*) = 1
   ) 
```

**编辑：**

```
 SELECT m.pk_1, m.pk_2, m.fld_3, C.PK1
   FROM MASTER_TAB M, (
   SELECT c2.pk_1
   FROM CHILD_TAB C2
   HAVING COUNT(*) = 1
   ) C
   WHERE c.pk_1 = m.pk_1 AND m.pk_1 = '018'
   AND    m.pk_2 = 'value' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:29:25.387

Oracle 无法将 的值下推`m.pk_1`到两个级别的子查询中。但是，鉴于您`m.pk_1`在顶级 where 子句中提供了值，您可以将其直接放入标量子查询中，如下所示：

```
SELECT m.pk_1
      ,m.pk_2
      ,m.fld_3
      ,(SELECT ch.pk_1
        FROM   (SELECT COUNT(*) over() cnt
                      ,c.pk_1
                FROM   child_tab c
                WHERE  c.pk_1 = '018'
                AND    rownum <= 2) ch
        WHERE  cnt = 1
        AND    c.pk_1 = m.pk_1) c_pk_1
FROM   master_tab m
WHERE  m.pk_1 = '018'
AND    m.pk_2 = 'value'; 
```

或者，鉴于此`m.pk_1 = c.pk_1`，您不需要选择`c.pk_1`，只需使用 case 语句检查行是否存在，`m.pk_1`如果只有一行则返回：

```
SELECT m.pk_1
      ,m.pk_2
      ,m.fld_3
      ,CASE WHEN (SELECT COUNT(*)
                  FROM   child_tab c
                  WHERE  c.pk_1 = m.pk_1
                  AND    rownum <= 2) = 1 THEN
          m.pk_1
       END c_pk_1
FROM   master_tab m
WHERE  m.pk_1 = '018'
AND    m.pk_2 = 'value'; 
```

最后，您始终可以创建一个 PL/SQL 函数来为您进行查找，当存在`too_many_rows`. 如果你有少量不同的值`m.pk_1`并且你使用的是 11g，这可能是一个[结果缓存函数](http://www.oracle-developer.net/display.php?id=504)，它应该表现良好：

```
CREATE FUNCTION get_id(m_pk master_tab.pk_1%TYPE) RETURN child_tab.pk_1%TYPE AS
  retval child_tab.pk_1%TYPE;
BEGIN

  SELECT t.pk_1
  INTO   retval
  FROM   child_tab t
  WHERE  t.pk_1 = m_pk
  AND    ROWNUM <= 2;

  RETURN retval;

EXCEPTION
  WHEN TOO_MANY_ROWS THEN
    RETURN NULL;
END;

SELECT m.pk_1
      ,m.pk_2
      ,m.fld_3
      ,get_id(m.pk_1) c_pk_1
FROM   master_tab m
WHERE  m.pk_1 = '018'
AND    m.pk_2 = 'value'; 
```

# ruby-on-rails - 与 Rails 的动态关联？

> ID：15783801
> 
> 赞同：2
> 
> 时间：2013-04-03T09:37:32.630
> 
> 标签：ruby-on-rails, activerecord, model, associations, rails-activerecord

在为我正在从事的当前项目定义模型设计时，我有点困惑。

这是一个运动队管理应用程序，所以我可以让来自不同运动的团队添加球员。因为对于每项运动我都想为球员存储不同的信息，所以我考虑过使用以下模型。

```
A team:
-> has_many soccer_players
-> has_many basketball_players
-> ... 
```

但这似乎是重复的，我只会有很多 has_many，每种运动类型都有一个。我的问题是，因为在用户创建团队时，他会选择运动类型，我只需要定义一个关联。所以如果球队是一支足球队，我只需要' `has_many soccer_players`'。

我怎么能那样做？甚至更好，我将如何以更好的方式对此进行建模？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:00:27.443

根据 Zippie 提供的内容以及您在评论中提出的问题，我提供了一个稍微修改过的版本。

我会把它分解成短语，然后分解成 ruby​​ 类和关联，所以如果你想让它真正多态，

*   一个团队有很多玩家
*   一个团队有很多团队属性
*   一个玩家有很多属性

它可能会简化我们应用程序的某些部分。团队模型本身用于验证等。您必须决定哪些是通用属性，哪些是动态属性，例如姓名、体重、身高是通用的，因为所有玩家都有它们，所以它们可以在您的`Player`模型中，而不是在您的`Attribute`模型中。

所以我们现在可以有这样的东西：

```
class Team < ActiveRecord::Base
  has_many :players
  has_many :attributes, :as => :attributable
end

class Player < ActiveRecord::Base
  belongs_to :team
  has_many :attributes, :as => :attributable
  attr_accessible :name, :weight, :height
end

class Attribute < ActiveRecord::Base
  belongs_to :attributable, :polymorphic => true
  attr_accessible :name, :value
end 
```

至于你的另一个问题

本质上，您将拥有一张属性表、一张球员表和一组球队。创建一个足球队和球员（足球=足球是吗？）将是这样的（让我们决定我们已经创建了一个团队）：

```
player = Player.new
player.name = 'Lionel Messi'
player.attributes << Attribute.create!(:name => :playing_position, :value => :second_striker)
@team.players << player
@team.attributes << Attribute.create!(:name => :uefa_cups, :value => 4) 
```

您的迁移看起来像这样（直接取自 Rails Guides - 稍作更改）：

```
class CreateAttributes < ActiveRecord::Migration
  def change
    create_table :attributes do |t|
      t.string :name
      t.string :value
      t.references :attributable, :polymorphic => true
      t.timestamps
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:50:38.397

也许是这样的：

团队：

```
has_many :type_of_sports, :through => type_of_sport_on_team
has_many :players, :through => types_of_sports 
```

type_of_sport：

```
has_many :teams, :through => type_of_sport_on_team
has_many :players 
```

type_of_sport_on_team：

```
belongs_to :team
belongs_to :type_of_sport 
```

玩家：

```
belongs_to :type_of_sport 
```

附加信息后：

```
Class Player < ActiveRecord::Base
     attr_accessible :name, :surname, :age
end

Class BasketballPlayer < Player
     attr_accessible :free_throw_average
end

Class SoccerPlayer < Player
     attr_accessible :penalty_scores
end 
```

# java - 在android中捕获图像时出现管道错误

> ID：15783805
> 
> 赞同：14
> 
> 时间：2013-04-03T09:37:38.030
> 
> 标签：java, android, file, outputstream

我将捕获来自 android 应用程序的图像，但**Output Stream存在一些问题，并且****BROKEN PIPE with JAVA.IO**存在错误。我的代码如下。这是写命令功能的问题。我已经从 git hub 下载了这个演示，所以请尽快帮助我。提前非常感谢。

```
void takeScreenshot()
{
    String file ="/data/data/com.koushikdutta.screenshot/screenshot.bmp";;
    OutputStream os = null;
    int screenshotUid;
    String screenshotUser = null;
    Process sh = null;
    try
    {
        try
        {
            sh = Runtime.getRuntime().exec("su -c sh");

            os = sh.getOutputStream();
            Log.e("","THE VALUE OF OBJECT IS:::::"+os.toString());

            // file ="/data/data/com.koushikdutta.screenshot/screenshot.bmp";
            screenshotUid = getUidForPackage("com.koushikdutta.screenshot");
            screenshotUser = getUserForPackage("com.koushikdutta.screenshot");
        }
        catch(Exception e)
        {
            Log.e("","Hi Error created");
        }
        try
        {
            Thread.sleep(2000);
            writeCommand(os, "rm "+file);
            writeCommand(os, "mkdir /sdcard/dcim");

        }
        catch(Exception e)
        {
            Log.e("","Hello How are you??"+e.getMessage());
        }
        writeCommand(os, "mkdir /sdcard/dcim/Screenshot");
        writeCommand(os, "/data/data/com.koushikdutta.screenshot/screenshot");
        writeCommand(os, "chown root." + screenshotUser + " " + file);
        writeCommand(os, "chmod 660 " + file);
        writeCommand(os, "exit");
        os.flush();
        os.close(); 
        boolean success = false;
        for (int i = 0; i < 10; i++)
        {
            try
            {
                Thread.sleep(1000);
                // if we can successfully get the exit value, 
                // then that means the process exited.
                sh.exitValue();
                success = true;
                break;
            }
            catch (Exception ex)
            {
                Log.e("","Error while"+ex.getMessage());
            }
        }
        try
        {
            if (!success)
                throw new Exception("Unable to take screenshot");

            File screenshot = new File(file);
            if (!screenshot.exists())
                throw new Exception("screenshot.raw file not found!");

            mHander.post(new Runnable()
            {
                public void run()
                {
                    Toast toast = Toast.makeText(
                        ScreenshotActivity.this, 
                        "Screen captured!", Toast.LENGTH_LONG);
                    toast.show();
                }
            });
        }
        catch(Exception e)
        {
            Log.e("","ERROR CREATING......."+e.getMessage());
        }

        try
        {
            FileInputStream fs = new FileInputStream(file);
            mBitmap = BitmapFactory.decodeStream(fs);
            mScreenshotFile = String.format(
                        "/sdcard/dcim/Screenshot/screenshot%d.png", 
                        System.currentTimeMillis());
            FileOutputStream fout = new FileOutputStream(mScreenshotFile);
            mBitmap.compress(CompressFormat.PNG, 100, fout);
            fout.close();
            mConnection.scanFile(mScreenshotFile, null);
        }
        catch (Exception ex)
        {
            Log.e("","Error while"+ex.getMessage());
        }

        mHander.post(new Runnable()
        {
            public void run()
            {
                mImage.setImageBitmap(mBitmap);
            }
        });
    }
    catch (Exception ex)
    {
        Toast toast = Toast.makeText(
                        ScreenshotActivity.this, "Error: " + ex.getMessage(), 
                        Toast.LENGTH_LONG);
        toast.show();
        Log.e("",""+ "Error: " + ex.getMessage());
    }
}

   static void writeCommand(final OutputStream os, String command) 
   {

       try
    {
        os.write((command+"\n").getBytes("ASCII"));
    }
    catch(Exception e)
    {
        e.printStackTrace();
        Log.e("","Error was::::::::::::::::::"+e.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:38:29.263

我认为您执行的进程已终止，因此`OutputStream`不再可用，因此出现“Broken Pipe”错误。

我会尝试：

```
ProcessBuilder builder = new ProcessBuilder("/bin/bash");
builder.redirectErrorStream(true);
Process process = builder.start(); 
```

而不是直接调用：

```
sh = Runtime.getRuntime().exec("su -c sh"); 
```

试试看。让我知道。

也许您可以从以下方面获得一些好主意：

[具有输入/输出流的 Java 进程](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T10:54:57.087

我认为访问存储存在问题，您应该查看使用权限，也许您应该使用 Environment.getExternalStorage.getPath 访问要保存图像的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:46:22.463

以防万一……您检查过您的存储卡是否正确？如果您使用 wifi - 连接是否良好？

# c# - Visual Studio 不支持 XSLT 2.0

> ID：15783808
> 
> 赞同：3
> 
> 时间：2013-04-03T09:37:42.717
> 
> 标签：c#, c#-4.0, xslt, c#-3.0, xslt-2.0

我正在使用视觉工作室 2010。在运行 xslt2.0 时出现以下错误

> xsl:value-of/* ** 尚未实现。
> 
> 'xsl:result-document'** 尚未实现。

谁能帮我解决上述问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:43:19.210

如果您想使用 XSLT 2.0，您需要从 XslCompiledTransform 切换到 XSLT 2.0 处理器，例如 Saxon 9 的 .NET 版本或 AltovaXML 或 XmlPrime。Microsoft 的 XslCompiledTransform 是 XSLT 1.0 处理器，即使在 .NET 4.5/VS 2012 中也是如此。

然而，命名的 XSLT 处理器主要允许您使用 XSLT 2.0 编写代码，我不认为它们集成在 VS 2010 中。

# c# - c# 如何让 Visual Studio Designer 也显示基类组件

> ID：15783811
> 
> 赞同：0
> 
> 时间：2013-04-03T09:37:46.173
> 
> 标签：c#, visual-studio-2008, windows-forms-designer

我有一堂课

```
public abstract class BaseFormClass : UserControl 
```

和另一个类：

```
public class DerivedFormClass : BaseFormClass 
```

如果我在 baseformclass 上打开设计视图，它会在顶部显示 3 个组件。但是如果我打开派生窗体类，它不会显示这 3 个组件，我尝试将 InitializeComponent 声明为虚拟并覆盖，但这没有任何区别。

这很烦人，好像我运行它然后它显示正常，但我希望它在设计器中工作，以便将来更容易使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:06:39.003

我发现了什么有效，

“both”类定义需要扩展基类，因此设计者和通用

```
public partial class BaseFormClass : UserControl 
```

...

```
partial class DerivedFormClass: BaseFormClass 
```

...

然后 DerivedFormClass 的设计器将显示来自 BaseFormClass 的组件，

另一种方法是只定义基表单类，然后在派生表单类中使用该控件，但这取决于您需要实现的内容。

# android - 如何循环查看 sqlite 数据库中的所有图像

> ID：15783813
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:37:50.233
> 
> 标签：android

我是android新手，我已经使用带有图像的sqlite创建了一个数据库。当我查看我插入到数据库中的所有数据时，只有热度（字符串行）显示所有记录，但图像只显示第一行。任何人都可以请帮助我，我现在很绝望。

```
public String getHot() {
             // TODO Auto-generated method stub

    String[] columns = new String[] { KEY_HOTNESS };
            Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,null,null);

    String hotness = "";
    int iRow = c.getColumnIndex(KEY_HOTNESS);
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        hotness = hotness + c.getString(iRow) + "\n";
    }
    return hotness;
}

public byte[] getImage1(int id) {
    // TODO Auto-generated method stub

    String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_HOTNESS,
    KEY_IMAGE1, KEY_IMAGE2, KEY_IMAGE3, KEY_IMAGE4,KEY_IMAGE5 };

    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
            null, null);
    if (c == null) {
        return null;
    }
    byte[] iMage1 = null;
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE1));
    }
    return iMage1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:53:24.800

`java.lang.OutOfMemoryError: bitmap`这是您的解决方案：但如果您的图像尺寸很大，它也会给您。

```
public ArrayList<Bitmap> getImage1(int id) { 
        // TODO Auto-generated method stub
        ArrayList<Bitmap> a = new ArrayList<Bitmap>();
        Bitmap bmp;

        String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_HOTNESS,
                KEY_IMAGE1, KEY_IMAGE2, KEY_IMAGE3, KEY_IMAGE4, KEY_IMAGE5 };

        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
                null, null);
        if (c != null) {
            do {
                iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE1));
                bmp = BitmapFactory.decodeByteArray(iMage1, 0,
                        iMage1.length);
                a.add(bmp);
                iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE2));
                bmp = BitmapFactory.decodeByteArray(iMage1, 0,
                        iMage1.length);
                a.add(bmp);
                iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE3));
                bmp = BitmapFactory.decodeByteArray(iMage1, 0,
                        iMage1.length);
                a.add(bmp);
                iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE4));
                bmp = BitmapFactory.decodeByteArray(iMage1, 0,
                        iMage1.length);
                a.add(bmp);
                iMage1 = c.getBlob(c.getColumnIndexOrThrow(KEY_IMAGE5));
                bmp = BitmapFactory.decodeByteArray(iMage1, 0,
                        iMage1.length);
                a.add(bmp);

            } while (c.moveToNext());
        }

        return a;
    } 
```

# hadoop-streaming - PipeMapRed 在 Hadoop 流中做了什么？

> ID：15783823
> 
> 赞同：0
> 
> 时间：2013-04-03T09:38:17.520
> 
> 标签：hadoop-streaming

我运行一项 hadoop 作业不止一次，每次都需要很长时间才能完成，比如 * *15 分钟 **　总共。

我检查了`syslog`，发现，`org.apache.hadoop.streaming.PipeMapRed`做了大约**10 分钟**的事情，完成后`PipeMapRed`，`MapTask`接管并在不到**1 分钟**的时间内完成，这到底是什么？

实际上做什么`PipeMapRed`？为什么这么费时间？

这是一些打印的日志`PipeMapRed`：

```
17:00:57,307 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=1633/1
17:00:59,782 INFO org.apache.hadoop.streaming.PipeMapRed: R/W/S=10000/8763/0 in:5000=10000/2 [rec/s] out:4381=8763/2 [rec/s]
17:01:07,310 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=60670/59051
17:01:12,610 INFO org.apache.hadoop.streaming.PipeMapRed: R/W/S=100000/97904/0 in:6666=100000/15 [rec/s] out:6526=97904/15 [rec/s]
17:01:17,332 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=126104/124334
17:01:27,378 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=181681/179714
17:01:30,514 INFO org.apache.hadoop.streaming.PipeMapRed: R/W/S=200000/198233/0 in:6060=200000/33 [rec/s] out:6007=198233/33 [rec/s]
17:01:37,404 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=244642/242654 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T15:50:11.547

您提供的日志是来自 mapreduce 流式传输的日志，您可以看到正在读取和写入的记录数，例如：

```
R/W/S=10000/8763/0 in:5000=10000/2 [rec/s] out:4381=8763/2 [rec/s] 
```

第一部分代表有多少条记录：

```
READ/WRITE/SKIPPED=10000/8763/0 
```

第二部分是关于您处理记录的速度有多快，因此您读取 5000 条记录/秒并写入 4381 条记录/秒

每个（流式传输）mapreduce 作业 15 分钟完全可以，如果不是很少的话:)

# build - 待定 - 在哈德逊等待下一个可用的执行者

> ID：15783824
> 
> 赞同：3
> 
> 时间：2013-04-03T09:38:24.203
> 
> 标签：build, hudson, executor

在哈德森，在构建我的工作时，我正在“**等待 - 等待下一个可用的执行**器”。它显示**构建执行器状态为“死（！）”**

谁能告诉如何克服这个问题？如何让哈德森死去的执行人活着？

# windows-8 - 如何为寡妇地铁应用程序创建烛台图。是否有任何开源代码？反正

> ID：15783825
> 
> 赞同：0
> 
> 时间：2013-04-03T09:38:25.870
> 
> 标签：windows-8, windows-runtime, microsoft-metro, windows-store-apps, candlestick-chart

我需要在 Windows Metro 应用程序中实现烛台图表。我不是在寻找任何图表控件，如 visfire..需要开源代码或构建它的方法......请帮助我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:10:01.583

OxyPlot 是一个开源的跨平台 .NET 绘图库。它适用于 WPF、Windows Store Apo、Silverlight 和 Windows 窗体。

CodePlex 页面： http: [//oxyplot.codeplex.com/](http://oxyplot.codeplex.com/)

NuGet 包（您必须已安装 NuGet v2.1 或更高版本）： http: [//nuget.org/List/Packages/OxyPlot.Metro](http://nuget.org/List/Packages/OxyPlot.Metro)

示例应用程序： http: [//apps.microsoft.com/webpdp/app/oxyplot-example-browser/95b37c05-f2b0-4186-b48e-01b6fcbeec5d](http://apps.microsoft.com/webpdp/app/oxyplot-example-browser/95b37c05-f2b0-4186-b48e-01b6fcbeec5d)

在这里，我给你演示如何在 Windwos 商店应用程序中使用烛台系列图表

XAML

我已经采取`xmlns:oxy="using:OxyPlot.Metro" in``tag`

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <oxy:Plot x:Name="Plot1" Background="White"/>
</Grid> 
```

C＃

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    Plot1.Model = CandleStickSeries();
}

public PlotModel CandleStickSeries()
{
    PlotModel plotModel = new PlotModel("Candle Stick Series", null)
    {
        LegendSymbolLength = 24.0
    };
    CandleStickSeries candleStickSeries = new CandleStickSeries("random values")
    {
        Color = OxyColors.Black
    };
    Random random = new Random();
    double num = 100.0;
    for (int i = 0; i < 16; i++)
    {
        num = num + random.NextDouble() + 0.1;
        double num2 = num + 10.0 + random.NextDouble() * 10.0;
        double num3 = num - (10.0 + random.NextDouble() * 10.0);
        double open = num3 + random.NextDouble() * (num2 - num3);
        double close = num3 + random.NextDouble() * (num2 - num3);
        candleStickSeries.Items.Add(new HighLowItem((double)i, num2, num3, open, close));
    }
    plotModel.Series.Add(candleStickSeries);
    plotModel.Axes.Add(new LinearAxis(AxisPosition.Left, double.NaN, double.NaN, null)
    {
        MaximumPadding = 0.3,
        MinimumPadding = 0.3
    });
    return plotModel;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:58:13.283

这是我所知道的 WindowsPhone 的唯一开源图表实现：[amCharts](https://github.com/ailon/amCharts-Quick-Charts "图表")

高温高压

# mysql - 将数据插入内存表

> ID：15783827
> 
> 赞同：1
> 
> 时间：2013-04-03T09:38:28.753
> 
> 标签：mysql, memory-table

我创建了一个 MEMORY 表。我想将 MyIsam 表（比如`PIN_DETAILS`）中的数据加载到 MEMORY 表（比如`PIN_DETAILS_MEMORY`）中。

当我尝试将`MyISAM`表的数据转储到 MEMORY 表中时（使用`INSERT INTO...SELECT`），只有*8190*行被复制到内存表中。MyISAM 表中有近 2 条 lacs 记录。我也尝试过更改***max_heap_table_size***，但没有任何运气。你能建议任何解决方案吗？

更新：

我插入数据的 SQL 查询是

```
INSERT INTO PIN_DETAILS_MEMORY (COL1,COL2,COL3,COL4) SELECT COL1,COL2,COL3,COL4 FROM PIN_DETAILS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:48:09.850

这可能是因为内存限制考虑在放入临时表之前使用 where 条件。或者考虑使用 With Class

# c# - 我如何清除会话？

> ID：15783828
> 
> 赞同：1
> 
> 时间：2013-04-03T09:38:32.493
> 
> 标签：c#, sql-server

我正在使用实体框架，现在我正在保存两个作业并希望将它们显示给我的网格视图。

在这里，我将它们保存到我的数据库表中并在 gridview 中显示它们： ![在此处输入图像描述](https://i.stack.imgur.com/ZHuHN.jpg)

这里的代码：

```
protected void ButtonAddAssignmentClick(object sender, EventArgs e)
{
    Session.Remove("DataTable");

//Add to DB and show in gridview
using (var db = new KnowItCvdbEntities())
  {
      SPWeb theSite = SPControl.GetContextWeb(Context);
      SPUser theUser = theSite.CurrentUser;
      string strUserName = theUser.LoginName;
       var theEmplAssignment = (
                                  from p
                                  in db.EMPLOYEES
                                  where p.username == strUserName
                                  select p).FirstOrDefault();

      _emp = theEmplAssignment;

      if (_emp != null)
      {
          //Create assignment
          var myAssignment = new EMPLOYEES_ASSIGNMENT
          {
              assignment_id = new Random().Next(),
              employee_id = _emp.employee_id,

              reference_name = TextBoxReference.Text,
              company_name = TextBoxCompanyName.Text,
              sector = TextBoxSector.Text,
              area = TextBoxArea.Text,
              from_date = TextBoxFromDate.Text,
              to_date = TextBoxToDate.Text,
              description = TextBoxDesc.Text,
          };

          //Create assignment tools
          for (int i = 0; i < ListBoxAssignmentTools.Items.Count; i++)
          {
              var myTool = new ASSIGNMENT_TOOLS
              {
                  assignment_tools_id = new Random().Next(),
                  assignment_id = myAssignment.assignment_id,
                  employee_id = myAssignment.employee_id,

                  tool_name = ListBoxAssignmentTools.Items[i].ToString()
              };

              myAssignment.ASSIGNMENT_TOOLS.Add(myTool);
          }

          //Create assignment technology
          for (int i = 0; i < ListBoxAssignmentTechnology.Items.Count; i++)
          {
              var myTech = new ASSIGNMENT_TECHNOLOGY
              {
                  assignment_technology_id = new Random().Next(),
                  assignment_id = myAssignment.assignment_id,
                  employee_id = myAssignment.employee_id,

                  technology_name = ListBoxAssignmentTechnology.Items[i].ToString()
              };

              myAssignment.ASSIGNMENT_TECHNOLOGY.Add(myTech);
          }

          //Add assignment to db                   
          _emp.EMPLOYEES_ASSIGNMENT.Add(myAssignment);
          db.SaveChanges();

          //Populate gridview  
          var dt = new DataTable();
          if (Session["DataTable"] != null)
          {
              dt = (DataTable)Session["DataTable"];
          }
          else
          {
              dt.Columns.Add("Company name");
              dt.Columns.Add("Sector");
              dt.Columns.Add("Area");
              dt.Columns.Add("From");
              dt.Columns.Add("To");
              dt.Columns.Add("Tools");
              dt.Columns.Add("Technology");
              dt.Columns.Add("Description");
              dt.Columns.Add("Reference");
              dt.Rows.Clear();
          }

          DataRow dr = dt.NewRow();
          dr["Company name"] = TextBoxCompanyName.Text;
          dr["Sector"] = TextBoxSector.Text;
          dr["Area"] = TextBoxArea.Text;
          dr["From"] = TextBoxFromDate.Text;
          dr["To"] = TextBoxToDate.Text;
          dr["Description"] = TextBoxDesc.Text;
          dr["Reference"] = TextBoxReference.Text;

          string sToolsValue = string.Empty;
          for (int i = 0; i < ListBoxAssignmentTools.Items.Count; i++)
          {
              sToolsValue += ListBoxAssignmentTools.Items[i] + " ";
          }
          dr["Tools"] = sToolsValue;

          string sTechValue = string.Empty;
          for (int i = 0; i < ListBoxAssignmentTechnology.Items.Count; i++)
          {
               sTechValue += ListBoxAssignmentTechnology.Items[i] + " ";
          }
          dr["Technology"] = sTechValue;

          dt.Rows.Add(dr);
          Session["DataTable"] = dt;

          //Add to gridview
          GridViewShowAssignments.DataSource = dt;
          GridViewShowAssignments.DataBind();

          TextBoxCompanyName.Text = string.Empty;
          TextBoxArea.Text = string.Empty;
          TextBoxSector.Text = string.Empty;
          TextBoxFromDate.Text = string.Empty;
          TextBoxToDate.Text = string.Empty;
          TextBoxDesc.Text = string.Empty;
          TextBoxReference.Text = string.Empty;
          ListBoxAssignmentTools.Items.Clear();
          ListBoxAssignmentTechnology.Items.Clear();
      }                
  }
} 
```

我正在使用一种页面加载方法，该方法检索当前登录用户的所有分配并将其显示在 gridview 上。但是gridview正在填充重复项！我怀疑我必须在页面加载时清除我的会话，但我真的不知道该怎么做。 ![在此处输入图像描述](https://i.stack.imgur.com/znCzf.jpg)

方法代码：

```
//Get assignment from db and populate gridview
private void GetEmployeeAssignment(EMPLOYEE theEmpl)
{
    Session.Remove("DataTable");

    using (var db = new KnowItCvdbEntities())
    {
        if (_emp != null)
        {
            var assignmentList = from p in db.EMPLOYEES_ASSIGNMENT.AsEnumerable()
                                 join at in db.ASSIGNMENT_TOOLS.AsEnumerable() on p.assignment_id equals at.assignment_id
                                 join ate in db.ASSIGNMENT_TECHNOLOGY.AsEnumerable() on p.assignment_id equals ate.assignment_id
                                 where p.employee_id == theEmpl.employee_id
                                 select new EmployeeAssignmentInfo
                                 {
                                     CompanyName = p.company_name,
                                     AssignmentId = p.assignment_id,
                                     Area = p.area,
                                     From = p.from_date,
                                     To = p.to_date,
                                     Description = p.description,
                                     Sector = p.sector,
                                     Reference = p.reference_name,

                                     ToolName = at.tool_name,
                                     AssignmentToolsId = at.assignment_tools_id,
                                     TechnologyName = ate.technology_name,
                                     AssignmentTechnologyId = ate.assignment_technology_id
                                 };

            foreach (var vAssignment in assignmentList)
            {
                //Populate gridview  
                var dt = new DataTable();
                if (Session["DataTable"] != null)
                {
                    dt = (DataTable)Session["DataTable"];
                }
                else
                {
                    dt.Columns.Add("Company name");
                    dt.Columns.Add("Sector");
                    dt.Columns.Add("Area");
                    dt.Columns.Add("From");
                    dt.Columns.Add("To");
                    dt.Columns.Add("Tools");
                    dt.Columns.Add("Technology");
                    dt.Columns.Add("Description");
                    dt.Columns.Add("Reference");
                    dt.Rows.Clear();
                }

                DataRow dr = dt.NewRow();
                dr["Company name"] = vAssignment.CompanyName;
                dr["Sector"] = vAssignment.Sector;
                dr["Area"] = vAssignment.Area;
                dr["From"] = vAssignment.From;
                dr["To"] = vAssignment.To;
                dr["Description"] = vAssignment.Description;
                dr["Reference"] = vAssignment.Reference;
                dr["Tools"] = vAssignment.ToolName + " ";
                dr["Technology"] = vAssignment.TechnologyName + " ";

                dt.Rows.Add(dr);
                Session["DataTable"] = dt;

                GridViewShowAssignments.DataSource = dt;
                GridViewShowAssignments.DataBind();
            }
        }
        else
        {
            LabelPleaseRegister.Visible = true;
            LabelPleaseRegister.Text = "Please register your personal information";
            PanelRegisterCv.Visible = false;
            PanelRegisterPersonalInfo.Visible = false;
        }
    }
} 
```

页面加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        SPWeb theSite = SPControl.GetContextWeb(Context);
        SPUser theUser = theSite.CurrentUser;
        string strUserName = theUser.LoginName;

        LabelUsername.Text = strUserName;

        if (!IsPostBack)
        {
            _emp = GetEmployee(strUserName);                

            GetEmployeeAssignment(_emp);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:48:35.027

做就是了

```
Session["DataTable"] = null; 
```

或者

```
Session.Remove("DataTable") 
```

更新您的代码，例如：

```
 //Get assignment from db and populate gridview
 private void GetEmployeeAssignment(EMPLOYEE theEmpl)
  {
Session["DataTable"]=null;

using (var db = new KnowItCvdbEntities())
{
    if (_emp != null)
    {
        var assignmentList = from p in db.EMPLOYEES_ASSIGNMENT.AsEnumerable()
                             join at in db.ASSIGNMENT_TOOLS.AsEnumerable() on p.assignment_id equals at.assignment_id
                             join ate in db.ASSIGNMENT_TECHNOLOGY.AsEnumerable() on p.assignment_id equals ate.assignment_id
                             where p.employee_id == theEmpl.employee_id
                             select new EmployeeAssignmentInfo
                             {
                                 CompanyName = p.company_name,
                                 AssignmentId = p.assignment_id,
                                 Area = p.area,
                                 From = p.from_date,
                                 To = p.to_date,
                                 Description = p.description,
                                 Sector = p.sector,
                                 Reference = p.reference_name,

                                 ToolName = at.tool_name,
                                 AssignmentToolsId = at.assignment_tools_id,
                                 TechnologyName = ate.technology_name,
                                 AssignmentTechnologyId = ate.assignment_technology_id
                             };
      var dt = new DataTable();

        foreach (var vAssignment in assignmentList)
        {
            //Populate gridview  

            if (Session["DataTable"] != null)
            {
                dt = (DataTable)Session["DataTable"];
            }
            else
            {
                dt.Columns.Add("Company name");
                dt.Columns.Add("Sector");
                dt.Columns.Add("Area");
                dt.Columns.Add("From");
                dt.Columns.Add("To");
                dt.Columns.Add("Tools");
                dt.Columns.Add("Technology");
                dt.Columns.Add("Description");
                dt.Columns.Add("Reference");
                dt.Rows.Clear();
            }

            DataRow dr = dt.NewRow();
            dr["Company name"] = vAssignment.CompanyName;
            dr["Sector"] = vAssignment.Sector;
            dr["Area"] = vAssignment.Area;
            dr["From"] = vAssignment.From;
            dr["To"] = vAssignment.To;
            dr["Description"] = vAssignment.Description;
            dr["Reference"] = vAssignment.Reference;
            dr["Tools"] = vAssignment.ToolName + " ";
            dr["Technology"] = vAssignment.TechnologyName + " ";

            dt.Rows.Add(dr);

        }

            Session["DataTable"] = dt;

            GridViewShowAssignments.DataSource = dt;
            GridViewShowAssignments.DataBind();

    }
    else
    {
        LabelPleaseRegister.Visible = true;
        LabelPleaseRegister.Text = "Please register your personal information";
        PanelRegisterCv.Visible = false;
        PanelRegisterPersonalInfo.Visible = false;
    }
} 
```

}

此致

# unicode - 如何在golang中将utf16文本文件读取为字符串？

> ID：15783830
> 
> 赞同：21
> 
> 时间：2013-04-03T09:38:34.977
> 
> 标签：unicode, go, readline, utf-16

我可以将文件读入字节数组

但是当我将它转换为字符串时

它将 utf16 字节视为 ascii

如何正确转换？

```
package main

import ("fmt"
"os"
"bufio"
)

func main(){
    // read whole the file
    f, err := os.Open("test.txt")
    if err != nil {
        fmt.Printf("error opening file: %v\n",err)
        os.Exit(1)
    }
    r := bufio.NewReader(f)
    var s,b,e = r.ReadLine()
    if e==nil{
        fmt.Println(b)
        fmt.Println(s)
        fmt.Println(string(s))
    }
} 
```

* * *

输出：

错误的

[255 254 91 0 83 0 99 0 114 0 105 0 112 0 116 0 32 0 73 0 110 0 102 0 111 0 93 0 13 0]

脚本信息]

* * *

更新：

在我测试了这两个例子之后，我现在明白了确切的问题是什么。

在 Windows 中，如果我在行尾添加换行符 (CR+LF)，则会在行中读取 CR。因为 readline 函数无法正确处理 unicode（[OD OA]=ok, [OD 00 OA 00]=not ok）。

如果 readline 函数可以识别 unicode，它应该理解 [OD 00 OA 00] 并返回 []uint16 而不是 []bytes。

所以我认为我不应该使用 bufio.NewReader，因为它无法读取 utf16，我看不到 bufio.NewReader.ReadLine 可以接受参数作为标志来指示读取文本是 utf8、utf16le/be 或 utf32。go 库中是否有任何用于 unicode 文本的 readline 函数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-21T17:44:20.767

最新版本`golang.org/x/text/encoding/unicode`更容易做到这一点，因为它包含`unicode.BOMOverride`，它将智能地解释 BOM。

这是 ReadFileUTF16()，它类似于 os.ReadFile()，但解码 UTF-16。

```
package main

import (
    "bytes"
    "fmt"
    "io/ioutil"
    "log"
    "strings"

    "golang.org/x/text/encoding/unicode"
    "golang.org/x/text/transform"
)

// Similar to ioutil.ReadFile() but decodes UTF-16\.  Useful when
// reading data from MS-Windows systems that generate UTF-16BE files,
// but will do the right thing if other BOMs are found.
func ReadFileUTF16(filename string) ([]byte, error) {

    // Read the file into a []byte:
    raw, err := ioutil.ReadFile(filename)
    if err != nil {
        return nil, err
    }

    // Make an tranformer that converts MS-Win default to UTF8:
    win16be := unicode.UTF16(unicode.BigEndian, unicode.IgnoreBOM)
    // Make a transformer that is like win16be, but abides by BOM:
    utf16bom := unicode.BOMOverride(win16be.NewDecoder())

    // Make a Reader that uses utf16bom:
    unicodeReader := transform.NewReader(bytes.NewReader(raw), utf16bom)

    // decode and print:
    decoded, err := ioutil.ReadAll(unicodeReader)
    return decoded, err
}

func main() {
    data, err := ReadFileUTF16("inputfile.txt")
    if err != nil {
        log.Fatal(err)
    }
    final := strings.Replace(string(data), "\r\n", "\n", -1)
    fmt.Println(final)

} 
```

这是 NewScannerUTF16 ，它类似于 os.Open() 但返回一个扫描仪。

```
package main

import (
    "bufio"
    "fmt"
    "log"
    "os"

    "golang.org/x/text/encoding/unicode"
    "golang.org/x/text/transform"
)

type utfScanner interface {
    Read(p []byte) (n int, err error)
}

// Creates a scanner similar to os.Open() but decodes the file as UTF-16.
// Useful when reading data from MS-Windows systems that generate UTF-16BE
// files, but will do the right thing if other BOMs are found.
func NewScannerUTF16(filename string) (utfScanner, error) {

    // Read the file into a []byte:
    file, err := os.Open(filename)
    if err != nil {
        return nil, err
    }

    // Make an tranformer that converts MS-Win default to UTF8:
    win16be := unicode.UTF16(unicode.BigEndian, unicode.IgnoreBOM)
    // Make a transformer that is like win16be, but abides by BOM:
    utf16bom := unicode.BOMOverride(win16be.NewDecoder())

    // Make a Reader that uses utf16bom:
    unicodeReader := transform.NewReader(file, utf16bom)
    return unicodeReader, nil
}

func main() {

    s, err := NewScannerUTF16("inputfile.txt")
    if err != nil {
        log.Fatal(err)
    }

    scanner := bufio.NewScanner(s)
    for scanner.Scan() {
        fmt.Println(scanner.Text()) // Println will add back the final '\n'
    }
    if err := scanner.Err(); err != nil {
        fmt.Fprintln(os.Stderr, "reading inputfile:", err)
    }

} 
```

仅供参考：我已将这些功能放入一个开源模块中，并进行了进一步的改进。见[https://github.com/TomOnTime/utfutil/](https://github.com/TomOnTime/utfutil/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-03T17:31:13.190

UTF16、UTF8 和字节顺序标记由[Unicode 联盟](http://www.unicode.org/)定义：[UTF-16 FAQ](http://www.unicode.org/faq/utf_bom.html#UTF16)、[UTF-8 FAQ](http://www.unicode.org/faq/utf_bom.html#UTF8)和[字节顺序标记 (BOM) FAQ](http://www.unicode.org/faq/utf_bom.html#BOM)。

* * *

> [问题 4802：bufio：读行太麻烦](https://code.google.com/p/go/issues/detail?id=4802)
> 
> 在 Go 中从文件中读取行太麻烦了。
> 
> 人们经常被 bufio.Reader.ReadLine 所吸引，因为它的名字，但是它有一个奇怪的签名，返回 (line []byte, isPrefix bool, err error)，并且需要大量的工作。
> 
> ReadSlice 和 ReadString 需要一个分隔字节，它几乎总是明显且难看的 '\n'，也可以返回一行和一个 EOF

* * *

> [修订： f685026a2d38](https://code.google.com/p/go/source/detail?r=f685026a2d38916dc87a25741b4b5fcdbd59d1d1)
> 
> bufio：新的扫描仪界面
> 
> 添加一个新的、简单的界面，用于扫描（可能是文本）数据，基于一种名为 Scanner 的新类型。它有自己的内部缓冲，因此即使没有注入 bufio.Reader 也应该是合理有效的。输入的格式由“拆分函数”定义，默认情况下拆分为行。

* * *

> [go1.1beta1 发布](https://groups.google.com/d/msg/golang-nuts/sbjJDgxLqiE/xqWJ1ybaiKoJ)
> 
> 您可以从通常的位置下载二进制和源代码分发： [https ://code.google.com/p/go/downloads/list?q=go1.1beta1](https://code.google.com/p/go/downloads/list?q=go1.1beta1)

* * *

这是一个使用 Unicode 规则将 UTF16 文本文件行转换为 Go UTF8 编码字符串的程序。代码已被修改以利用`bufio.Scanner`Go 1.1 中的新接口。

```
package main

import (
    "bufio"
    "bytes"
    "encoding/binary"
    "fmt"
    "os"
    "runtime"
    "unicode/utf16"
    "unicode/utf8"
)

// UTF16BytesToString converts UTF-16 encoded bytes, in big or little endian byte order,
// to a UTF-8 encoded string.
func UTF16BytesToString(b []byte, o binary.ByteOrder) string {
    utf := make([]uint16, (len(b)+(2-1))/2)
    for i := 0; i+(2-1) < len(b); i += 2 {
        utf[i/2] = o.Uint16(b[i:])
    }
    if len(b)/2 < len(utf) {
        utf[len(utf)-1] = utf8.RuneError
    }
    return string(utf16.Decode(utf))
}

// UTF-16 endian byte order
const (
    unknownEndian = iota
    bigEndian
    littleEndian
)

// dropCREndian drops a terminal \r from the endian data.
func dropCREndian(data []byte, t1, t2 byte) []byte {
    if len(data) > 1 {
        if data[len(data)-2] == t1 && data[len(data)-1] == t2 {
            return data[0 : len(data)-2]
        }
    }
    return data
}

// dropCRBE drops a terminal \r from the big endian data.
func dropCRBE(data []byte) []byte {
    return dropCREndian(data, '\x00', '\r')
}

// dropCRLE drops a terminal \r from the little endian data.
func dropCRLE(data []byte) []byte {
    return dropCREndian(data, '\r', '\x00')
}

// dropCR drops a terminal \r from the data.
func dropCR(data []byte) ([]byte, int) {
    var endian = unknownEndian
    switch ld := len(data); {
    case ld != len(dropCRLE(data)):
        endian = littleEndian
    case ld != len(dropCRBE(data)):
        endian = bigEndian
    }
    return data, endian
}

// SplitFunc is a split function for a Scanner that returns each line of
// text, stripped of any trailing end-of-line marker. The returned line may
// be empty. The end-of-line marker is one optional carriage return followed
// by one mandatory newline. In regular expression notation, it is `\r?\n`.
// The last non-empty line of input will be returned even if it has no
// newline.
func ScanUTF16LinesFunc(byteOrder binary.ByteOrder) (bufio.SplitFunc, func() binary.ByteOrder) {

    // Function closure variables
    var endian = unknownEndian
    switch byteOrder {
    case binary.BigEndian:
        endian = bigEndian
    case binary.LittleEndian:
        endian = littleEndian
    }
    const bom = 0xFEFF
    var checkBOM bool = endian == unknownEndian

    // Scanner split function
    splitFunc := func(data []byte, atEOF bool) (advance int, token []byte, err error) {

        if atEOF && len(data) == 0 {
            return 0, nil, nil
        }

        if checkBOM {
            checkBOM = false
            if len(data) > 1 {
                switch uint16(bom) {
                case uint16(data[0])<<8 | uint16(data[1]):
                    endian = bigEndian
                    return 2, nil, nil
                case uint16(data[1])<<8 | uint16(data[0]):
                    endian = littleEndian
                    return 2, nil, nil
                }
            }
        }

        // Scan for newline-terminated lines.
        i := 0
        for {
            j := bytes.IndexByte(data[i:], '\n')
            if j < 0 {
                break
            }
            i += j
            switch e := i % 2; e {
            case 1: // UTF-16BE
                if endian != littleEndian {
                    if i > 1 {
                        if data[i-1] == '\x00' {
                            endian = bigEndian
                            // We have a full newline-terminated line.
                            return i + 1, dropCRBE(data[0 : i-1]), nil
                        }
                    }
                }
            case 0: // UTF-16LE
                if endian != bigEndian {
                    if i+1 < len(data) {
                        i++
                        if data[i] == '\x00' {
                            endian = littleEndian
                            // We have a full newline-terminated line.
                            return i + 1, dropCRLE(data[0 : i-1]), nil
                        }
                    }
                }
            }
            i++
        }

        // If we're at EOF, we have a final, non-terminated line. Return it.
        if atEOF {
            // drop CR.
            advance = len(data)
            switch endian {
            case bigEndian:
                data = dropCRBE(data)
            case littleEndian:
                data = dropCRLE(data)
            default:
                data, endian = dropCR(data)
            }
            if endian == unknownEndian {
                if runtime.GOOS == "windows" {
                    endian = littleEndian
                } else {
                    endian = bigEndian
                }
            }
            return advance, data, nil
        }

        // Request more data.
        return 0, nil, nil
    }

    // Endian byte order function
    orderFunc := func() (byteOrder binary.ByteOrder) {
        switch endian {
        case bigEndian:
            byteOrder = binary.BigEndian
        case littleEndian:
            byteOrder = binary.LittleEndian
        }
        return byteOrder
    }

    return splitFunc, orderFunc
}

func main() {
    file, err := os.Open("utf16.le.txt")
    if err != nil {
        fmt.Println(err)
        os.Exit(1)
    }
    defer file.Close()
    fmt.Println(file.Name())

    rdr := bufio.NewReader(file)
    scanner := bufio.NewScanner(rdr)
    var bo binary.ByteOrder // unknown, infer from data
    // bo = binary.LittleEndian // windows
    splitFunc, orderFunc := ScanUTF16LinesFunc(bo)
    scanner.Split(splitFunc)

    for scanner.Scan() {
        b := scanner.Bytes()
        s := UTF16BytesToString(b, orderFunc())
        fmt.Println(len(s), s)
        fmt.Println(len(b), b)
    }
    fmt.Println(orderFunc())

    if err := scanner.Err(); err != nil {
        fmt.Println(err)
    }
} 
```

输出：

```
utf16.le.txt
15 "Hello, 世界"
22 [34 0 72 0 101 0 108 0 108 0 111 0 44 0 32 0 22 78 76 117 34 0]
0 
0 []
15 "Hello, 世界"
22 [34 0 72 0 101 0 108 0 108 0 111 0 44 0 32 0 22 78 76 117 34 0]
LittleEndian

utf16.be.txt
15 "Hello, 世界"
22 [0 34 0 72 0 101 0 108 0 108 0 111 0 44 0 32 78 22 117 76 0 34]
0 
0 []
15 "Hello, 世界"
22 [0 34 0 72 0 101 0 108 0 108 0 111 0 44 0 32 78 22 117 76 0 34]
BigEndian 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-04-11T12:28:58.920

这是最简单的阅读方法：

```
package main

import (
    "bufio"
    "fmt"
    "log"
    "os"

    "golang.org/x/text/encoding/unicode"
    "golang.org/x/text/transform"
)

func main() {
    file, err := os.Open("./text.txt")
    if err != nil {
        log.Fatal(err)
    }

    scanner := bufio.NewScanner(transform.NewReader(file, unicode.UTF16(unicode.LittleEndian, unicode.UseBOM).NewDecoder()))
    for scanner.Scan() {
        fmt.Printf(scanner.Text())
    }
} 
```

由于 Windows 默认使用 little-endian 顺序，因此我们使用[unicode.UseBOM](https://en.wikipedia.org/wiki/UTF-16#Byte_order_encoding_schemes)策略从文本中检索 BOM，并使用 unicode.LittleEndian 作为后备

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-03T10:05:33.547

例如：

```
package main

import (
        "errors"
        "fmt"
        "log"
        "unicode/utf16"
)

func utf16toString(b []uint8) (string, error) {
        if len(b)&1 != 0 {
                return "", errors.New("len(b) must be even")
        }

        // Check BOM
        var bom int
        if len(b) >= 2 {
                switch n := int(b[0])<<8 | int(b[1]); n {
                case 0xfffe:
                        bom = 1
                        fallthrough
                case 0xfeff:
                        b = b[2:]
                }
        }

        w := make([]uint16, len(b)/2)
        for i := range w {
                w[i] = uint16(b[2*i+bom&1])<<8 | uint16(b[2*i+(bom+1)&1])
        }
        return string(utf16.Decode(w)), nil
}

func main() {
        // Simulated data from e.g. a file
        b := []byte{255, 254, 91, 0, 83, 0, 99, 0, 114, 0, 105, 0, 112, 0, 116, 0, 32, 0, 73, 0, 110, 0, 102, 0, 111, 0, 93, 0, 13, 0}
        s, err := utf16toString(b)
        if err != nil {
                log.Fatal(err)
        }

        fmt.Printf("%q", s)
} 
```

（也在[这里](http://play.golang.org/p/itQFWYPY5p)）

输出：

* * *

```
"[Script Info]\r" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-16T02:57:37.120

如果您想将任何内容打印为字符串，您可以使用`fmt.Sprint`

```
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    // read whole the file
    f, err := os.Open("test.txt")
    if err != nil {
        fmt.Printf("error opening file: %v\n", err)
        return
    }
    r := bufio.NewReader(f)
    var s, _, e = r.ReadLine()
    if e != nil {
        fmt.Println(e)
        return
    }
    fmt.Println(fmt.Sprint(string(s)))
} 
```

# spring - 如何使 spring 3.1 和 hibernate 4.1.x 可用于所有 portlet 而不会与 ROOT liferay 发生冲突

> ID：15783834
> 
> 赞同：0
> 
> 时间：2013-04-03T09:38:45.303
> 
> 标签：spring, hibernate, liferay, portlet, spring-portlet-mvc

我有多个使用相同框架的 portlet，并且我曾经将这些依赖项与每个 portlet 一起部署，这会导致 PermGen 问题，尤其是在我为 portlet 部署/取消部署时。

有时即使没有部署/取消部署，这个问题也会突然出现。

我正在考虑将这些依赖项移动到 tomcat 级别，但它会与使用它的版本 liferay 冲突。

这是我的 JVM 参数：

```
JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF8 -Dorg.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES=false -Duser.timezone=GMT -Djruby.min.runtimes=1 -Djruby.max.runtimes=3 -Djruby.runtime=1 -XX:NewSize=700m -XX:MaxNewSize=700m -Xms2048m -Xms2048m -XX:MaxPermSize=512m  -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:SurvivorRatio=10 -XX:ParallelGCThreads=8" 
```

还有其他推荐的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:27:10.410

Liferay 6.1 在其根 portlet 中使用 Spring 3.0.7。

如果您将它们配置为 in 中的依赖项`portal-dependency-jars`，`liferay-plugin-package.properties`这些将被复制到您的 portlet 中，因此很像您自己包含它们。当然，您在 portlet 中包含的任何库都会增加您对 PermGen 空间的使用。

在 Tomcat 中放置不同的 Spring 和 Hibernate 库可能会导致类加载问题。由于 Hibernate 4.x 不能很好地与早于 3.1 的 Spring 配合使用，因此您遇到了一些问题。您可以尝试在根 portlet 中升级 Spring。就我个人而言，我从来没有让它发挥作用。

我会增加 PermGen 空间并将库放在您的 portlet 中。`META-INF/context.xml`此外，在你的战争中，如果你使用的是 Tomcat ，你可能想把它放进去。

```
<Context>
    <Loader loaderClass="com.liferay.support.tomcat.loader.PortalClassLoader" />
</Context> 
```

这可能会解决一些类加载问题。在某些情况下，它没有任何区别，但如果您使用单独的库，它可能很重要。

# java - 如何使用 Jsp JSTL 显示 Spring 模型？

> ID：15783835
> 
> 赞同：1
> 
> 时间：2013-04-03T09:38:45.747
> 
> 标签：java, spring, jsp, jstl

实际上在我的 spring 应用程序中有 User.jsp 并使用这个 Jsp 我显示详细信息。

在我的 UserProfileForm bean 中，我正在写

```
private List<ProfessionalForm> professionalDetails = new ArrayList<ProfessionalForm>(); 
```

而ProfessionalForm 有另一种形式的细节。

在我的控制器类中，我正在写..

```
 @RequestMapping(value = "user", method = RequestMethod.GET)
    public String user(Model model) throws Exception {
        UserProfileForm form = (UserProfileForm)FormType.USER_PROFILE.getNewInstance();

        model.addAttribute("USER_PROFILE", form);
        return "profile/user";
    } 
```

还有我的 user.jsp 页面代码..

```
<form:form action="" modelAttribute="USER_PROFILE">
   <div class="answer">
    <c:forEach items="${USER_PROFILE.professionalDetails}" var="professionalForm">
        <jsp:include page="user/professional.jsp">
           <jsp:param value="${professionalForm}" name="PROFESSIONAL" />
        </jsp:include>
    </c:forEach>
   </div>
</form:form> 
```

这是我的专业.jsp ..

```
<form:form action="profile/proffessional" modelAttribute="PROFESSIONAL">
<p>
  <label class="control_label">Postion:</label>
    <div class="controls">
        <form:input class="text_midem" path="positionName" />
    </div>
</p>
</form> 
```

但是我的服务器控制台出现了以下异常..

```
 SEVERE: Servlet.service() for servlet [spring] in context with path [/EClass] threw exception [An exception occurred processing JSP page /WEB-INF/pages/profile/user.jsp at line 40

37:                         <div class="answer">
38:                             <c:forEach items="${USER_PROFILE.professionalDetails}"
39:                                 var="professionalForm">
40:                                 <jsp:include page="user/professional.jsp">
41:                                     <jsp:param value="${professionalForm}" name="PROFESSIONAL" />
42:                                 </jsp:include>
43:                             </c:forEach>

Stacktrace:] with root cause
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'PROFESSIONAL' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141) 
```

为什么这条消息是他们在 User.jsp 页面或 Professional.jsp 中需要的任何循环。

请帮我..

编辑：

而不是`<jsp:include>`我们使用...

```
<%@include file="user/professional.jsp"%> 
```

听说还有错误来...

```
 SEVERE: Servlet.service() for servlet [spring] in context with path [/EClass] threw exception [An exception occurred processing JSP page /WEB-INF/pages/profile/user/professional.jsp at line 16

13:                                 <p>
14:                                     <label class="control_label">Postion:</label>
15:                                 <div class="controls">
16:                                   <form:input class="text_midem" path="positionName" />
17:                                 </div>
18:                                 </p>
19:                                 <p>

Stacktrace:] with root cause
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'PROFESSIONAL' available as request attribute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:25:26.163

使用 <%@include%> 代替 jsp:include

```
<%@include file="user/professional.jsp"%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:38:56.913

```
......
<jsp:include page="user/professional.jsp">
           <jsp:param value="${professionalForm}" name="PROFESSIONAL" />
        </jsp:include>
....... 
```

上面的代码将名为 PROFESSIONAL 的请求**参数发送到专业.jsp 页面，而****不是**请求**属性**。虽然下面的代码寻找请求属性

```
....
<form:form action="profile/proffessional" modelAttribute="PROFESSIONAL">
.... 
```

因此，您可能需要将该值设置为请求属性。

试试下面的代码

```
.......

<form:form action="" modelAttribute="USER_PROFILE">
   <div class="answer">
    <c:forEach items="${USER_PROFILE.professionalDetails}" var="professionalForm">
        <c:set var="PROFESSIONAL" scope="request" value="${professionalForm}">
        <jsp:include page="user/professional.jsp">           
        </jsp:include>
    </c:forEach>
   </div>
</form:form>
........ 
```

# scala - 初学者：Scala 2.10 中的 Scala 类型别名？

> ID：15783837
> 
> 赞同：20
> 
> 时间：2013-04-03T09:38:51.647
> 
> 标签：scala

为什么此代码无法编译并出现错误：未找到：值矩阵？从文档和一些（可能已过时）代码示例中，这应该有效吗？

```
object TestMatrix extends App{  
type Row = List[Int]
type Matrix = List[Row]

val m = Matrix( Row(1,2,3),
                Row(1,2,3),
                Row(1,2,3)
              )

} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-03T09:48:36.820

`Matrix`表示一种类型，但您将其用作值。

当你这样做时`List(1, 2, 3)`，你实际上是在调用`List.apply`，这是`List`.

`Matrix`要修复编译错误，您可以为and定义自己的工厂`Row`：

```
object TestMatrix extends App{  
  type Row = List[Int]
  def Row(xs: Int*) = List(xs: _*)

  type Matrix = List[Row]
  def Matrix(xs: Row*) = List(xs: _*)

  val m = Matrix( Row(1,2,3),
      Row(1,2,3),
      Row(1,2,3)
      )
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T11:14:32.773

从[这篇](http://www.artima.com/scalazine/articles/package_objects.html)文章你有。

> 还要注意，在包 scala 中，除了大多数类型别名之外，还有一个同名的值别名。例如，List 类有一个类型别名，List 对象有一个值别名。

该问题的解决方案转化为：

```
object TestMatrix extends App{  
  type Row = List[Int]
  val Row = List
  type Matrix = List[Row]
  val Matrix = List

  val m = Matrix( Row(1,2,3),
                  Row(1,2,3),
                  Row(1,2,3))
} 
```

# php - jquery / php 和文件上传到远程站点

> ID：15783840
> 
> 赞同：1
> 
> 时间：2013-04-03T09:38:59.723
> 
> 标签：php, jquery, file, upload

这是我的第一篇文章，所以请温柔。

我正在尝试简化一些 B2B，但我们的供应商没有提供帮助，因此我正在尝试使用他们的标准 Web 控件和我这边的用户通过浏览器单击来创建一个界面。

远程服务器有一些很好的安全协议，所以 curl 是不可能的。我可以让远程服务器接受我的文件的唯一方法是通过 Web 浏览器使用他们的 cookie 创建界面。这不是一件坏事，因为我希望工作人员在文件发布之前查看它。

当我使用 Fiddler 并通过他们的网站进行上传时，内容长度文件大小为 55344，文件大小为 54920，所以这是正确的......但是当我通过 Java / PHP / jquery 进行上传时，它们都在 99870 左右尺寸。

如果我上传一个文本文件，这工作正常。

如果我上传 PDF 或 Word 文档，文件大小会爆炸并损坏。

我试图通过 PHP 创建发布数据，而 jquery 有一个 tanty 并且不会发送，我已经在 PHP 和 Java 之间编码和解码 base 64 .. 文件大小爆炸

我已经在谷歌上搜索了几天，但运气不佳。为什么会这样？

这是我的 JavaScript 代码：

```
 var boundary = "' . $boundary . '";

    var jqxhr = $.ajax({
        type: "GET",
        url: "' . $filename . '",
        context: document.pdf,
        global: false,
        async:false,
        success: function(data) {
            return data;
        }
    }).responseText;

var javabody = "--" + boundary + "\r\n"
        + "Content-Disposition: form-data; name=\"' .$name. '\"; filename=\"' .$filename. '\"\r\n"
        + "Content-Type: application/pdf\r\n\r\n"
        + jqxhr + "\r\n"
        + "--" + boundary + "\r\n"
        + "Content-Disposition: form-data; name=\"attachDocument\"" + "\r\n\r\n"
        + "Attach Docs\r\n"
        + "--" + boundary + "--";

    $.ajax({
            type: "post",
            url: "' . $url . '",
            datatype: "html",
            contentType: "multipart/form-data; boundary=' . $boundary . '",
            cache: "false",
            context: document.body,
            global: "false",
            data: javabody,
            crossDomain: true,
            xhrFields: {
                    withCredentials: true
                    },
            processData: false,
            async: false,
            }); 
```

一切正常，“a”文件上升，占位符和边界正确，只是文件大小爆炸并损坏。

任何帮助，将不胜感激

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T01:41:44.173

在头脑风暴和搜索这个网站直到我的手指流血之后，我想出了一个解决方案：

```
function submitQuoteSupportingDoc() {
    //add the binary file contents to the object, can only submit file contents via post if binary blob is present
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "' . $filename . '", true);
    xhr.responseType = "blob";
    xhr.onload = function(e) {
            if (this.status == 200) {
                    var myBlob = this.response;
                    var fd = new FormData();
                    fd.append("attachFile", myBlob, "' . $FileForUpload . '" );
                    fd.append("attachDocument", "Attach Docs");
                    $.ajax({
                        type: "POST",
                        url: "' . $DocumentUrl . '",
                        data: fd,
                        async: false,
                        crossDomain: true,
                            xhrFields: {
                                    withCredentials: true
                                    },
                        processData: false,
                        contentType: false
                    }).done(function(data) {
                           console.log(data);
                    });
                    close();
                    }
    };
    xhr.send();
I} 
```

显然这是在 PHP 脚本中运行的。但它可以工作。

多谢你们

麦克风

# performance - 缓存渲染页面以获得更好的性能

> ID：15783848
> 
> 赞同：2
> 
> 时间：2013-04-03T09:39:17.497
> 
> 标签：performance, spring, caching, ehcache

基于spring框架的应用程序中缓存所有页面内容的最佳方法是什么？我想使用缓存来记住相同 url 的所有渲染页面（我不想使用 Squid 服务器）。是否存在达到可接受结果的最佳实践？我想降低处理数据和渲染页面的成本。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:23:28.000

使用**反向代理**进行缓存通常是正确的选择，因为它可以部署在单独的机器上，并且通常具有更大的灵活性。如果 Squid 不符合您的要求，请考虑使用[Varnish 。](https://www.varnish-cache.org/)您还可以检查您的“常规”代理服务器是否存在现有缓存​​模块（大多数服务器以某种方式支持内容缓存）。

如果您正在寻找纯**Java**解决方案，那么缓存[过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)应该可以解决问题。检查[此讨论](https://stackoverflow.com/questions/5784928/servlet-filter-for-caching)以获取模板。

此外，请考虑在单独的过滤器中为客户端/代理缓存设置*Expires*和*Cache-Control标头。*可以在[此处](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter)找到示例 Tomcat 配置。

# c# - Tesseract - 我如何识别框中的数字？

> ID：15783853
> 
> 赞同：6
> 
> 时间：2013-04-03T09:39:21.777
> 
> 标签：c#, numbers, character, ocr, tesseract

我有一张你可以看到的图片。但 Tesseract 承认它不是文本。我怎样才能让 Tesseract 知道它有数字并且可以从图像中提取？

![盒子内的图像](https://i.stack.imgur.com/03AwQ.png)

谢谢你的帮助！！

# java - 如何在 Spring 中为（非静态）内部类定义 bean？避免循环依赖

> ID：15783854
> 
> 赞同：3
> 
> 时间：2013-04-03T09:39:22.483
> 
> 标签：java, spring, inner-classes, circular-dependency

我有一个像这样的内部类的类：

```
package myPackage;

public class A {
    private B b;

    public void setB(B b) { this.b = b; }
    public B getB() { return this.b; }

    public class B {
    }
} 
```

我的弹簧配置如下：

```
<bean id="a" class="myPackage.A" autowire="byName" scope="prototype">
    <property name="b">
        <bean class="myPackage.A$B" name="b" autowire="byName" scope="prototype">
            <constructor-arg ref="a"/>
        </bean>
    </property>
</bean> 
```

但我面临这个错误：

```
org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'a': Requested bean is currently in creation: Is there an unresolvable circular reference? 
```

当然，很明显我有一个循环引用，但是我的内部类怎么能有一个spring bean呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:22:28.667

`a`如果您需要将其限定为原型，我不确定这是否可以在 Spring 级别解决。问题是您正在尝试创建 的实例`a`，这需要引用 a `b`，而后者又引用了 的*不同*实例`a`（因为每次注入 bean 时原型都会为您提供一个新实例），依此类推。如果您真正想要的是`a`成为一个原型bean，其中包含`b`引用*相同*封闭实例的a，`a`那么您将不得不使用Java config或工厂bean。

# sitecore - Sitecore Glass Mapper：接口或具体类的属性？

> ID：15783869
> 
> 赞同：5
> 
> 时间：2013-04-03T09:39:55.043
> 
> 标签：sitecore, glass-mapper

我们是 Glass mapper 的新手，想在我们的 Sitecore 项目中使用它。在查看教程时，我们注意到没有关于如何设置 Sitecore 允许的深度继承的深入示例。浏览网页时，我们注意到有人将属性放在接口上，而另一方面，有人将属性放在具体类上。这些例子都没有解释他们这样做的充分理由，但给我们留下了一个问题：**正确的用法是什么，做其中一个有什么影响？**

考虑以下：

模板：内容（这是一个添加 2 个简单字段的字段部分模板：标题、正文） 该模板直接或间接地被我们的许多模板继承。

现在在我们的一个子布局中，我们只使用这部分，它是一种更通用的控件，因此我们需要做：`GetCurrentItem<Content>`或`GetCurrentItem<IContent>`。

就我个人而言，我觉得`GetCurrentItem<IContent>`更直观，因为它感觉像是在问：“如果它支持内容部分，请给我当前项目”，而另一个感觉更像是“如果它是内容部分，请给我当前项目”（这在技术上是不可能的，因为永远不会创建内容项）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:56:20.427

为 Glass Mapper 配置接口可以用于几个目的。首先，Glass Mapper 实际上可以根据您的界面创建动态代理对象。这意味着您实际上可以仅基于接口使用 Glass Mapper，而无需您自己的具体实现。

[Mike Edwards 在这里对此进行了描述](http://www.glass.lu/Mapper/Sc/Tutorials/Tutorial21)。

> 在幕后 Glass.Sitecore.Mapper 映射器检测到您正在使用接口并使用 Castle Dynamic Proxies 生成您的应用程序可以使用的具体类。

正如他所指出的，这会增加一些开销，并且确实无法添加额外的逻辑。

[另一个用途是类型推断](http://www.glass.lu/Mapper/Sc/Tutorials/Tutorial17)。这在接口的上下文中没有很好地记录，但是在调用`SitecoreService`或您的字段属性中，请 Glass Mapper 推断类型。对于这种行为，您不需要映射接口字段。一定要包括你的具体类`TemplateId`的`SitecoreClass`属性。这应该允许您对多重继承进行建模。

```
public interface ISitecoreItem {

    Guid ID{ get; }

    Language Language{ get; }

    int Version { get; }

    string Url { get; }
}

[SitecoreClass]
public partial interface IHeader : MyProject.Content.ISitecoreItem 
{

    Link LogoLink  {get; set;}

    Image Logo  {get; set;}

}

    [SitecoreClass(TemplateId="87d5b6c1-a084-4738-be11-b4e6fe07d894")]
    public partial class Header  : IHeader 
    {
        [SitecoreId]
        public virtual Guid ID{ get; private set;}

        [SitecoreInfo(SitecoreInfoType.Language)]
        public virtual Language Language{ get; private set; }

        [SitecoreInfo(SitecoreInfoType.Version)]
        public virtual int Version { get; private set; }

        [SitecoreInfo(SitecoreInfoType.Url)]
        public virtual string Url { get; private set; }

        [SitecoreField(FieldName = "Logo Link" )]
        public virtual Link LogoLink  {get; set;}

        [SitecoreField(FieldName = "Logo" )]
        public virtual Image Logo  {get; set;}

    }

var service = new SitecoreService(Sitecore.Context.Database);
var header = service.CreateClass<IHeader>(false /* don't lazy load */, true /* infer type */, headerItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:34:21.290

我发现使用接口对我的 Sitecore 模板进行建模通常是更好的选择。这使我可以像在 Sitecore 中一样在代码中对模板结构进行建模。例如，

```
public interface IMyPageTemplate : IBaseTemplate1, IBaseTemplate2 {

} 
```

由于我们通常有许多基本模板，因此使用具体类对模板进行建模要困难得多。也许值得考虑（尽管我没有尝试过）某种接口和具体类的组合。也许，严格来说是基本模板的模板`IContent`应该建模为接口，所有可以创建为内容的模板都应该建模为具体的类。

做类似的事情是有效的`GetCurrentItem<IContent>()`。值得注意的是，返回的是一个代理类，它可以提供它自己的挑战（取决于你在做什么）。

# linux - 在 RedHat 上安装 MongoDB 时出现错误

> ID：15783870
> 
> 赞同：0
> 
> 时间：2013-04-03T09:39:59.643
> 
> 标签：linux, mongodb, installation, redhat, yum

我试图通过以下文档在我的 RedHat 服务器上安装 Mongo 服务器：[http ://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-c​​entos-or-fedora-linux/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/)

这是我的环境信息：

```
[root@localhost tmp]# uname -a
Linux localhost.localdomain 2.6.18-164.el5PAE #1 SMP Tue Aug 18 15:59:11 EDT 2009 i686 i686 i386 GNU/Linux
[root@localhost yum.repos.d]# ll /etc/yum.repos.d/
-rw-r--r-- 1 root   root    115 Apr  3 17:19 10gen.repo
-rw-r--r-- 1 root   root   1426 May 24  2009 CentOS-Base.repo
-rw-r--r-- 1 root   root    954 Aug 12  2010 epel.repo
-rw-r--r-- 1 root   root   1054 Aug 12  2010 epel-testing.repo
-rw-r--r-- 1 root   root    684 Jan 18  2007 mirrors-rpmforge
-rw-r--r-- 1 root   root   1644 Apr 12  2012 rhel-debuginfo.repo
-rw-r--r-- 1 root   root    428 Jan 18  2007 rpmforge.repo
[root@localhost yum.repos.d]# cat 10gen.repo
[10gen]
name=10gen Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/i686
gpgcheck=0
enabled=1 
```

当我尝试安装 Mongo 服务器时收到此消息：

```
[root@localhost yum.repos.d]# yum install mongo-10gen-server mongo-10gen
Loaded plugins: fastestmirror
Repository base is listed more than once in the configuration
Repository update is listed more than once in the configuration
Repository addons is listed more than once in the configuration
Repository extras is listed more than once in the configuration
Repository centosplus is listed more than once in the configuration
Repository contrib is listed more than once in the configuration
Repository testing is listed more than once in the configuration
Loading mirror speeds from cached hostfile
 * epel: mirrors.ustc.edu.cn
 * rpmforge: fr2.rpmfind.net
Setting up Install Process
No package mongo-10gen-server available.
No package mongo-10gen available.
Nothing to do 
```

我是 Linux 新手，我不太确定这是否是由 yum 配置错误引起的。有人可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:44:04.743

看来您的配置文件中有一些冲突。尝试下载 rpm 包并通过 rpm -hiv xxx.rpm 安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:54:38.837

我跳过了 Yum 问题，并尝试从该网站[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-c](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/) ​​entos-or-fedora-linux/ 下载软件包。它正在工作。

# symfony - 使用 Bootstrap 自定义注册 FOSUserBundle

> ID：15783882
> 
> 赞同：2
> 
> 时间：2013-04-03T09:40:39.513
> 
> 标签：symfony, twitter-bootstrap, fosuserbundle

我在引导文档中创建了一个表单 builder.php 来构建我的登录表单和注册表单，就像这样：[http](http://bootstrap.braincrafted.com/base-css#forms) : //bootstrap.braincrafted.com/base-css#forms 但接下来我发现了 FOSUserBundle，我认为它可能是使用它是个好主意。问题是：我不能简单地重用之前创建的表单。

我想使用引导程序来自定义 FOSUser 模板。特别是对于提交按钮，我想为所有按钮添加：class="btn primary large"

我创建了一个覆盖 FOSUserBundle 的 UserBundle。

我在 FOSUserBundle 中自定义 login.html.twig，将 login.html.twig 放入 UserBundle/Ressources/Views/Security/login.html.twig

这很容易，因为登录模板只有一个文件。

但是，例如，我如何为注册部分做到这一点？

有两个文件：register.html.twig 和 register_content.html.twig

所以我在我的 UserBundle 中创建了一个 Registration 文件夹，并放入了这两个文件。

但是，我做了什么来改变提交按钮的样式？

在 register.html.twig 我让：

```
{% extends "UserBundle::layout.html.twig" %}

{% block fos_user_content %}
{% include "UserBundle:Registration:register_content.html.twig" %}
{% endblock fos_user_content %} 
```

在 register_content.html.twig ：

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">
    {{ form_widget(form) }}
    <div>
        <input class="btn primary large" type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

但它不起作用。

您认为使用该捆绑包是一个很好的解决方案吗？ [https://github.com/CCETC/FOSUserBundle](https://github.com/CCETC/FOSUserBundle)

它直接将所有表单与引导样式集成在一起。

但是，如果有一天我想在注册表单中添加一个字段（例如性别），我可以在这个捆绑包中这样做吗，就像原来的 FOSUserBundle 一样？

知道我想在注册表单中添加一些自定义字段，并使用引导程序自定义表单，我想知道使用 FOSUserBundle 是否是个好主意，或者是否最好构建一个我自己的全新捆绑包来管理我的用户网站。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-15T16:38:32.443

这是我如何做到这一点的完整示例（自举模式：P，您可以适应简单的 html 或其他框架）。您必须查看表单的末尾，并在“ **{{ form_rest(form) }}** ”中注意这是 symfony 它如何绘制 de token 的代码

```
<!-- BEGIN REGISTRATION FORM -->
{{ form_start(form, {'method': 'post', 'action': path('fos_user_registration_register'), 'attr': {'class': 'fos_user_registration_register'}}) }}
    <h3 class="font-green">Register Form</h3>
    <div class="form-group">
        {{ form_widget(form.username, { 'attr': {'class': 'form-control placeholder-no-fix', 'placeholder':'User Name'} }) }}
        {% for errorItem in form.username.vars.errors %}
        <span class="help-inline">{{ errorItem.message }}</span>
        {% endfor %}
    </div>
    <div class="form-group">
        {{ form_widget(form.email, { 'attr': {'class': 'form-control', 'placeholder':'E-mail'} }) }}
        {% for errorItem in form.email.vars.errors %}
        <span class="help-inline">{{ errorItem.message }}</span>
        {% endfor %}
    </div>
    <div class="form-group">
        {{ form_widget(form.plainPassword.first, { 'attr': {'class': 'form-control', 'placeholder':'Password'} }) }}
        {% for errorItem in form.plainPassword.first.vars.errors %}
        <span class="help-inline">{{ errorItem.message }}</span>
        {% endfor %}
    </div>
    <div class="form-group">
        {{ form_widget(form.plainPassword.second, { 'attr': {'class': 'form-control', 'placeholder':'Repeat Password'} }) }}
        {% for errorItem in form.plainPassword.second.vars.errors %}
        <span class="help-inline">{{ errorItem.message }}</span>
        {% endfor %}
    </div>
    <div class="form-actions">
        <a class="btn btn-default" href="{{ path('fos_user_security_login') }}">Back to login</a>
        <button type="submit" id="register-submit-btn" class="btn btn-success">Submit</button>
    </div>
    {{ form_rest(form) }}
{{ form_end(form) }}
<!-- END REGISTRATION FORM --> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T10:04:19.560

如果要在注册表单中添加自定义字段，则必须覆盖表单：

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)

将字段添加到您的用户实体并在 buildForm 方法中，只需添加您的自定义字段

```
 $builder->add('name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T22:23:28.620

回答你标题中的问题：你有 FOSUserBundle 并且你希望 Bootstrap CSS 来设置它的样式。您可以像 Carlos Garcia 的回答一样自行设置样式，或者在 Symfony3 中应用站点范围的主题。

```
# app/config/config.yml
# Twig Configuration
twig:
  form_themes: ['bootstrap_3_layout.html.twig'] 
```

[这适用于https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/bootstrap_3_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/bootstrap_3_layout.html.twig)上的 Twig 主题，它将 a 添加`class="form-control"`到所有文本字段，因此 Bootstrap CSS 将为它设置样式，以及其他内容。

但是那个主题只有样式`<button>`，而不是`<input type="submit"`FOSUserBundle 似乎出于某种原因使用的样式。所以你仍然需要`btn btn-lg btn-primary btn-block`手动覆盖 FOSUserBundle register_content.html.twig 和类。

```
# app/Resources/FOSUserBundle/views/Registration/register_content.html.twig
{% trans_default_domain 'FOSUserBundle' %}

{{ form_start(form, {'method': 'post', 'action': path('fos_user_registration_register'), 'attr': {'class': 'fos_user_registration_register'}}) }}
{{ form_widget(form) }}
<div>
    <input class="btn btn-lg btn-primary btn-block" type="submit" value="{{ 'registration.submit'|trans }}" />
</div>
{{ form_end(form) }} 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-04-21T13:33:57.473

在“vendor/fos../resource/views/”中修改 FOSUB 布局文件（或覆盖）例如：

```
{% extends 'JamBlogBundle::layout.html.twig' %}
{% block content %}
<div class="container">
<div class="row">
    <div class="span9">
        <section id="erreurs">
        {% for type, messages in app.session.flashbag.all() %}
            {% for message in messages %}
                <div class="flash-{{ type }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        </section>
        <section id="foscontent">
        {% block fos_user_content %}
        {% endblock fos_user_content %}
        </section>
    </div>
etc.... 
```

和“JamBlogBu​​ndle:layout.html.twig”

```
{% extends '::base.html.twig' %} /** with bootstrap.css **/
{% block title %} {{ parent() }} - Le Blog {% endblock %}
{% block body %}
<div class="jumbotron subhead">
<div class="container">
    <h1>Le blog de Jamonce !</h1>
    <p class="lead">Lire, écrire, écouter et partager notre passion de la musique.</p>
</div>
</div>
{% block content %} {% endblock %}
<footer class="footer">
<div class="container">
etc..... 
```

对于自定义字段，请参阅上面的回复。如果能帮上忙

# django - 在 Django Admin 中增加 PositiveIntegerField 的宽度

> ID：15783887
> 
> 赞同：-1
> 
> 时间：2013-04-03T09:40:52.003
> 
> 标签：django

在 Django Admin 中为 PositiveIntegerField 增加输入框宽度的正确方法是什么？

**更新**

这些是我的文件：

**模型.py**

```
from django.db import models

class Report(models.Model):
    datum       = models.DateField(unique=True, help_text='Od koji je datuma izvjestaj.')
    osiguranika = models.PositiveIntegerField(help_text='Broj osiguranika.')
    /* lot of staf below*/

    def __unicode__(self):
        return str(self.datum) 
```

**表格.py**

```
from django import forms
from hzmo_web.apps.hzmo.models import Report

class ReportForm(forms.ModelForm):
    class Meta:
        model = Report

    def __init__(self, *args, **kw):
        super(ReportForm, self).__init__(*args, **kw)
        self.fields['osiguranika'].widget.attrs['class']  = 'form-text' 
```

**css**

```
.form-text{
    width:750px; 
    height:250px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:19:46.213

模型.py

```
class Num(models.Models):
    number   = models.PositiveIntegerField() 
```

表格.py

```
class NumForm(forms.ModelForm):
    class Meta:
        model = Num

    def __init__(self, *args, **kw):
        super(NumForm, self).__init__(*args, **kw)
        self.fields['number'].widget.attrs['class']  = 'form-text' 
```

样式.css

```
.form-text{
    width:250px; 
        height:25px;
} 
```

管理员.py

```
class NumAdmin(AuditAdmin):
    form = NumForm
    list_display         = ('number', )

    class Media:
        css = {
             'all': (/style.css',) 
        } 
```

# php - 我正在显示来自 php 查询的结果，并希望在不同的幻灯片中显示每个结果

> ID：15783892
> 
> 赞同：-2
> 
> 时间：2013-04-03T09:41:11.387
> 
> 标签：php, jquery, html, mysql, css

我有一个显示子信息的切换开关工作，但以下切换不起作用，我不知道如何解决这个问题。我使用了 w3schools 的代码来让它工作，但其他名称似乎并没有滑下来，只是显示它们。请问有什么想法吗？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
   <script> 
    $(document).ready(function(){
     $("#flip").click(function(){
     $("#panel").slideToggle("slow");
    });
    });
    </script>

    <style type="text/css"> 
     #panel,#flip
   {
     padding:5px;
    text-align:center;
     background-color:#e5eecc;
     border:solid 1px #c3c3c3;
      }
    #panel
    {
    padding:50px;
   display:none;
   }
   </style> 
```

```
 $connect = mysql_connect("127.0.0.1" , "root" , "") or die ("Couldnt connect to database");
    mysql_select_db("travellerfile") or die ("couldnt find the database");

    $searchsurname = $_POST['Surname'];
    $searchfirstname = $_POST['Firstname'];
    $searchage = $_POST['Age'];

    $query = mysql_query("SELECT * FROM child WHERE Surname like '%$searchsurname%' and Firstname like '%$searchfirstname%' and Age like '%$searchage%'");
    while($row = mysql_fetch_array($query))
    {
    ?>
    <div id="flip"><?php echo $row['Firstname']; ?> <?php echo $row['Surname']; ?></div>
    <div id="panel"><?php echo $row['DateOfBirth']; ?> <br /> <img src="<?php echo $row['sourcepath']; ?>" width="100px" height="100px"> <form method="post" action="childdetail.php">
                <input name="Button1" type="submit" value="View" /></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:56:54.437

您不能有重复`id`的元素，我建议您将它们更改为类：

```
<div class="flip"> 
<div class="panel"> 
```

至于 jQuery，你需要`panel`根据`slideToggle`对应的`flip`. 鉴于您当前的结构，您可以使用以下内容：-

```
$('.flip').click(function() {
  $(this).next('.panel').slideToggle('slow'); 
}); 
```

### [这是您尝试实现的目标的简化示例](http://jsfiddle.net/aX8Vm/1/)

# java - 在 MyBatis 中添加一个项目列表，在 SQL 列中共享一个值

> ID：15783896
> 
> 赞同：1
> 
> 时间：2013-04-03T09:41:16.717
> 
> 标签：mybatis, mybatis, java, sql, postgresql, hsqldb, mybatis

我有一个`List<MyItem>`我想通过[mybatis](/questions/tagged/mybatis "显示标记为“mybatis”的问题")插入到表中：

```
CREATE TABLE activities (
  id  BIGINT GENERATED BY DEFAULT AS IDENTITY,
  group_id  BIGINT NOT NULL,
  name VARCHAR(64),
  CONSTRAINT pk_activities PRIMARY KEY (id)
); 
```

*   `id`是自动生成的/唯一的
*   `group_id`应该是唯一的`List<>`
*   `name`只是一个属性`MyItem`

当我插入它们时，我希望[mybatis](/questions/tagged/mybatis "显示标记为“mybatis”的问题") **或**数据库使所有插入的项目共享相同的（但在数据库中是唯一的）`group_id`值。

**这可以在一次`insert`操作中实现吗？** 如果不是 - 是否有可能在 2,3.. 中？

**我强烈强调一个事实，即 MyBatis 或数据库本身（通过 SQL）可以做我正在寻找的事情**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:03:01.567

你可以使用一个独立[**`SEQUENCE`**](http://www.postgresql.org/docs/current/interactive/sql-createsequence.html)的：

```
CREATE SEQUENCE activities_group_id; 
```

甚至将其与列关联，用于文档，以便与表一起删除：

```
ALTER SEQUENCE activities_group_id OWNED BY activities.group_id; 
```

与常规序列（如 a[`serial`或`bigserial`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)列）的唯一区别将自动创建：没有列默认为`activities.group_id`.
那么你的 SQL 命令可能是：

```
WITH g AS (SELECT nextval('activities_group_id') AS group_id)
INSERT INTO activities (group_id, name)
SELECT group_id, unnest(ARRAY['foo','bar','baz']) FROM g 
```

更新：您的项目（名称）数组
在哪里。 现在使用 ARRAY 构造函数而不是 PostgreSQL 特定类型转换`ARRAY['foo','bar','baz']`
`'{foo, bar,baz}'::text[]`

这需要 PostgreSQL 9.1 或更高版本的[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)。我用它来避免多次`nextval()`通话。我们想要一个电话。

`CREATE`顺便说一句，我（或 PostgreSQL）不知道你脚本中的语法。我本来希望是：

```
CREATE TABLE activities (
  id  bigserial PRIMARY KEY,
  group_id  bigint NOT NULL,
  name  varchar(64)
); 
```

# spring - 模拟在 Struts 操作上运行 HTTP 请求

> ID：15783897
> 
> 赞同：1
> 
> 时间：2013-04-03T09:41:18.170
> 
> 标签：spring, spring-mvc, struts, opensymphony

我正在尝试将使用 Struts 和 OpenSymphony 编写的 Web 应用程序转换为 JSF 和 Spring（现在这是一个[死项目](http://www.opensymphony.com/)）。

该 Web 项目的问题在于，Struts 操作是用其中的大量代码编写的，这些代码直接执行并获取视图的数据（生成的 JSP）。很多时候，他们的 Struts 动作也扩展了其他动作，因此当我以某种形式调用某个动作时，很难跟踪正在执行的逻辑。

因此，如果我想在我的 JSF 托管 bean 中获取这些数据，我会看到两个选项：

1.  在每种情况下准确地确定在该操作层次结构中发生了什么，并在某些 UI 服务（独立于框架）中重新创建该代码，然后从我的托管 bean 调用该服务。

2.  在我的 UI 服务中，以某种方式模拟 HTTP 请求对该操作的操作，获取该数据，然后从我的托管 bean 调用该服务。

(1) 是很多我现在不想做的工作，也许在将来。(2) 快得多，但我不知道在 Struts 的情况下如何做。

如果我尝试做类似的事情：

```
SomeAction Action = new SomeAction();
action.execute(); 
```

这通常不起作用......因为有时`SomeAction`继承自的 Actions 会从中获取`request`并获取数据。因此，克服它的一种方法是：

```
HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();

SomeAction Action = new SomeAction();

action.setServletRequest(request);
action.execute(); 
```

这仍然不起作用，因为有时`SomeAction`继承自的 Actions 会创建一些稍后将由`SomeAction`.

有没有办法简单地模拟当前请求在特定 Struts 操作上的提交，并完全按照 Struts 容器的方式进行操作，这样我就可以获得该操作的所有预期结果？

我想这样的事情可以在测试类中完成，我该如何为 Struts 做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:20:01.787

由于您正在转换为 Spring，您可能会发现以下 Spring 方面很有趣：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/mock/web/package-summary.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/mock/web/package-summary.html)

在这里，它们为您提供了完全模拟的 HttpSession、HttpRequest 和 HttpResponse 对象，因此您不仅可以对遗留的 Struts 操作进行单元测试，还可以使用它们来帮助进行大型重构工作。

# java - 无法使用 struts2 在显示标签内创建链接？

> ID：15783905
> 
> 赞同：1
> 
> 时间：2013-04-03T09:41:49.197
> 
> 标签：java, jsp, struts2, displaytag

请看下面的代码，我无法在显示标签内生成链接，附件属性不为空并且有`taskHistory`附件。使用此代码，我只能看到[http://anyhost.com/user/](http://anyhost.com/user/)，以及我想要的[http://anyhost.com/user/attachment](http://anyhost.com/user/attachment)

```
<display:table export="true" id="data" name="taskHistory" pagesize="5"
        requestURI="">

        <display:column title="Download Attachments">
        <a href="/notifier/<s:property value="%{#session.user.userId}" />/<s:property value="%{#data.attachment}" />">Download</a>
        </display:column>
    </display:table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:17:06.257

我发现 solution.attr 需要用于访问如下值

```
<display:column title="Download Attachments">
        <a href="/notifier/<s:property value="%{#session.user.userId}" />/<s:property value="#attr.data.attachment" />">Download</a>
    </display:column> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:50:10.263

如果附件是动作类的一个属性，那么

```
<a href="/notifier/<s:property value="%{#session.user.userId}" />/<s:property value="%{attachment}" />">Download</a> 
```

# php - 从多维数组中删除数组

> ID：15783909
> 
> 赞同：1
> 
> 时间：2013-04-03T09:41:52.420
> 
> 标签：php, multidimensional-array

我需要能够从多维数组中删除指定数量的数组，其中一个值在所有数组中都相同。我有的示例数组：

```
array(
      array(1,'this'),
      array(2,'that'),
      array(1,'andthat')
) 
```

因此，例如，我需要删除两个以 1 作为第一个值的数组。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:43:17.437

你可以用它[`array_filter()`](http://php.net/manual/en/function.array-filter.php)来做到这一点。

```
$newArray = array_filter($arr, function($arr) { return $arr[0] != 1; }); 
```

[键盘](http://codepad.viper-7.com/jQc0Ba)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:52:53.457

可能这更容易阅读：

```
foreach($a as $i => $item)
    if($item[0]==1)
        unset($a[$i]); 
```

其中`$a`是数组，`$item`是子数组，`$i`是数组索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:51:34.880

我对此进行了测试以防止数组重复，这对您有帮助吗...

```
<?php
function func($array)
{
  $result = array_map("unserialize", array_unique(array_map("serialize", $array)));

  foreach ($result as $key => $value)
  {
    if ( is_array($value) )
    {
      $result[$key] = func($value);
    }
  }

  return $result;
}
?> 
```

# ios - 选择性切换 在浏览器的视口中

> ID：15783912
> 
> 赞同：5
> 
> 时间：2013-04-03T09:41:57.977
> 
> 标签：ios, css, html, viewport

我正在`HTML5`为`iOS`. 看完[这篇](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)文章后，我想通过保留一些 HTML 节点`DOM`而不是保留它们来做一些性能优化`viewport`。

出于演示目的，我一直在使用以下代码（我的实际工作场景会有更多`<div>`）

```
<!DOCTYPE HTML>
<html>
<head>
<script>
    function func(){
        var div1 = document.getElementById('div1');
        var div2 = document.getElementById('div2');
        div1.style.cssFloat = "";
        div1.style.visibility = "hidden";
        div1.style.left = "-100%";

        div2.style.left = "100%";
        div2.style.visibility = "";
        div2.style.cssFloat = "left";
    }

    function func1(){
        var div1 = document.getElementById('div1');
        var div2 = document.getElementById('div2');
        div2.style.cssFloat = "";
        div2.style.visibility = "hidden";
        div2.style.left = "-100%";

        div1.style.left = "100%";
        div1.style.visibility = "";
        div1.style.cssFloat = "left";
    }
</script>
</head> 
<body style="position:absolute;height: 100%;width:100%;margin:0px;padding:0px;">
   <div onclick="func();" id="div1" style="background-color:blue;height:100%;width:100%;top:0;left:100%;display: inline;float:left;margin: 0px;padding: 0px">
   </div>
   <div onclick="func1();" id="div2" style="background-color:green;height:100%;width:100%;top:0;left:-100%;visibility:hidden;display: inline;margin: 0px;padding: 0px;">
   </div>
</body>
</html> 
```

我的问题是，每当我想在其中显示`<div>`并`viewport`隐藏所有其他内容`<div>`时，我必须进行前者`div's float:left`以及明显的调整`left(css)` 如果我把`float:left`所有的`<div>`，逻辑不起作用，我无法显示具体`<div>`哪个我想在`viewport`. 我也不确定如何`visibility:hidden`帮助优化性能。我的猜测是，浏览器不会重新绘制`DOM`设置`visibility(css)`为`hidden`. 这是性能更好的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:10:33.957

在css中，如果你给出`visiblity:hidden`方法，它只隐藏内容而不是被占用的地方。如果你使用`disply:none`意味着它隐藏内容和位置。

并在您的代码中替换它..

```
 <script type="text/javascript">
    function pageBodyLoad(){  // this function is called at the body load.. 
            var div1 = document.getElementById('div1');
            var div2 = document.getElementById('div2');
            div1.style.display = "block";  // its shows div1
            div2.style.display = "none";   // its hide div2
    }
    function func(){
            var div1 = document.getElementById('div1');
            var div2 = document.getElementById('div2');
            div1.style.display = "none";  // its hide div1
            div2.style.display = "block"; // its shows div2
        }

        function func1(){
            var div1 = document.getElementById('div1');
            var div2 = document.getElementById('div2');
            div1.style.display = "block";  // its shows div1
            div2.style.display = "none";   // its hide div2
        }
    </script>
    <body style="position:absolute;height: 100%;width:100%;margin:0px;padding:0px;" onload="pageBodyLoad()">`
        <div onclick="func();" id="div1" style="background-color:blue;height:100%;width:100%;top:0;float:left;margin: 0px;padding: 0px">
        </div>
        <div onclick="func1();" id="div2" style="background-color:green;height:100%;width:100%;top:0;margin: 0px;padding: 0px;">
        </div>
    </body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:48:55.793

> 我也不确定可见性：隐藏如何有助于性能优化。我的猜测是，浏览器不会重新绘制可见性（css）设置为隐藏的 DOM 元素。

我对此表示怀疑——因为设置为的元素的布局*空间*`visibility:hidden`仍然被保留，为此，必须知道元素的尺寸。为此，必须渲染元素及其所有后代。

`display:none`然而确实会导致一个元素及其后代根本不被渲染。根据定义，具有这种样式的元素的行为就好像它当时根本不是 DOM 的一部分（从渲染的角度来看）。

# jsf - 渲染和渲染概念

> ID：15783920
> 
> 赞同：3
> 
> 时间：2013-04-03T09:42:35.760
> 
> 标签：jsf, richfaces, render

谁能解释我在所有 JSF、RichFaces 组件中***渲染***和***渲染属性的主要目的是什么？***

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:54:33.443

在 JSF 中，Facelets 中的组件在服务器上创建，形成某种组件树。这些组件中的大多数应该以某种方式呈现在 HTML 中，这就是***Renderer***的角色。它将创建代表该组件的 HTML 代码。

***渲染***属性在可以渲染的组件上可用。它是`boolean`属性，如果`true`（我一直都知道`true`默认情况下），则将呈现该组件，并将其 HTML 发送到客户端浏览器。如果是，则`false`该组件将不会在客户端浏览器中呈现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:43:43.140

在 Java 服务器端中，**render**是 JSF 组件的一个属性，我们可以使用它在完成特定操作时加载一个或多个其他组件。

**渲染**是 JSF 组件的另一个属性，它将具有一个布尔值，组件将基于该属性被渲染。如果rendered 为true，那么组件将被渲染，否则不会。

# amazon-web-services - 是否可以模拟亚马逊云搜索和 dynamoDB 进行开发？

> ID：15783924
> 
> 赞同：4
> 
> 时间：2013-04-03T09:42:44.877
> 
> 标签：amazon-web-services, amazon-dynamodb, amazon-cloudsearch

我希望在 Amazon 云搜索和 Dynamo DB 之外构建一个应用程序，我不想在应用程序开发过程中浪费金钱或免费套餐。所以，我想知道在开发期间是否可以在您的本地计算机上以某种方式模拟 Amazon Dynamo DB 和云搜索？如果没有，创建存根的最佳选择是什么？我正在考虑使用 Apache Cassandra 和 Solr。还有其他低成本开发的替代方案吗？

另外，我正在 Windows 上开发，所以我想知道是否有一个好的 Windows 替代 Cassandra，这将节省我在 VM 上运行 Cassandra 的复杂性。一个可以嵌入到 Java 中的开源数据库将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T21:17:37.010

这是一个可以使用 MongoDB 在本地模拟 AWS CloudSearch 的 Python 包：[https ://github.com/oisinmulvihill/nozama-cloudsearch](https://github.com/oisinmulvihill/nozama-cloudsearch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T06:42:41.680

尝试[DynamoDB 本地](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.html)。它是 DynamoDB 的模拟器。我为它制作了一个 Maven 插件：[jcabi-dynamodb-maven-plugin](http://www.jcabi.com/jcabi-dynamodb-maven-plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:40:36.437

我一直在使用[ddbmock](http://ddbmock.readthedocs.org/)，这是一个 Python 库，并取得了很大的成功。它支持实时 DynamoDB 实例的大部分功能，甚至支持一些错误消息（尽管消息可能不是 100% 匹配）。

还有一些其他的：用 Java 编写的[Alternator](https://github.com/mboudreau/Alternator/)和用 Ruby 编写的[clientside_aws 。](https://github.com/perrystreetsoftware/clientside_aws)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-03T11:26:58.723

我真的很欣赏您的想法，您无法真正模拟云搜索和 Dynamo db 环境。这些东西属于 AWS，如果可用，您可以只使用 API 或 SDK。我觉得 AWS 在后端使用 solr 进行云搜索我不确定 dynamo DB，我觉得它是一个自定义引擎。

Casaandra 的 Windows 替代品？我真的不确定。在开发方面，我总是更喜欢 Linux 或 Ubuntu 非常具体。

# c++ - 内存超出范围 C++

> ID：15783926
> 
> 赞同：0
> 
> 时间：2013-04-03T09:42:45.637
> 
> 标签：c++

我正在为 DES 实现代码。它接收 8 个字节的数据并返回 8 个字节的编码数据。当我尝试发送大小超过 10 MB 的文件时，会出现问题，堆栈内存超出范围。我尽可能释放分配的内存，但错误仍然存​​在。这是我的代码。

```
 // DES.cpp : Defines the entry point for the console application.
//
#include<iostream>
#include "stdafx.h"
#include "des.h"
using namespace std;

//loads of const array declarations here
    des::des(const char Key[17]){
        // constructor work
    }

    void des::tokey_56(){
        //works on the keys and converts it to 56 bits.
        tokey_48(); //called to convert to 48 bit keys.
    }

    void leftshift(int a[],int shift){
        //leftshifts a by shif number of bits
    }

    void des::tokey_48(){
        /* */
            //makes 16 subkeys of 48bits each.
    }
    //This function calculates permutation using the const arrays decalared above.
    Byte* des::permute(Byte bytes[],const int permutatn[],int permlen,int bytelen){
        Byte *newbytes=new Byte[permlen/8];
        //init
        for(int i=0;i<permlen/8;i++)
            newbytes[i]=0;
        //initclose
        /*for(int i=0;i<bytelen;i++){
        printf("%d - ",bytes[i]);
        }*/
        for(int i=0;i<permlen;i++){
            int temp=permutatn[i];
            int index1=(permutatn[i]-1)/8;
            int index2=(permutatn[i]-1)%8;
            int tempvar=bytes[index1]&masks[index2];
            int tempvar_1;
            tempvar_1=(tempvar>0)?masks[i%8]:0;
            newbytes[i/8]= newbytes[i/8] | tempvar_1;
            /*if(i==13){
            printf(" %d-%d ",bytes[index1],newbytes[i/8]);
            }*/
        }

        /*for(int i=0;i<permlen/8;i++){
        printf("%d - ",newbytes[i]);
        }*/
        return newbytes;
    }

    void des::create_sub_array(Byte array[], Byte subarray[],int start,int end){
        // creates 2 subarrays from start to end
    }

    void des::swap(Byte a[],Byte b[]){
        // Swaps array a and b
    }

    //This is the main DES function (Key,Right)
    Byte* des::function_des(Byte right[],Byte k[]){
        Byte *right_p=new Byte[6];
        Byte *B=new Byte[8];
        right_p=permute(right,E,48,4);
        for(int i=0;i<6;i++){
            right_p[i]=right_p[i]^k[i];
            //printf(" %d ",right_p[i]);
        }

        B[0]=(right_p[0]&0xFC)>>2;
        B[1]=( ((right_p[0]&0x3 )<<4)|0x0F ) & ( ((right_p[1]&0xF0)>>4)|0xF0 );  
        B[2]=( ((right_p[1]&0x0F)<<2)|0x03 ) & ( ((right_p[2]&0xC0)>>6)|0xFC );
        B[3]=(right_p[2]&0x3F);
        B[4]=(right_p[3]&0xFC)>>2;
        B[5]=( ((right_p[3]&0x3 )<<4)|0x0F ) & ( ((right_p[4]&0xF0)>>4)|0xF0 );  
        B[6]=( ((right_p[4]&0x0F)<<2)|0x03 ) & ( ((right_p[5]&0xC0)>>6)|0xFC );
        B[7]= (right_p[5]&0x3F);

        for(int i=0;i<8;i++){
            int row=( ((B[i]&0x20)>>4)|0x01) & ( (B[i]&0x01)|0x3E);
            int column= (B[i]&0x1E)>>1;
            //using SBoxes
            switch(i){
            case 0: B[0]=S1[row][column];
                break;
            case 1: B[1]=S2[row][column];
                break;
            case 2: B[2]=S3[row][column];
                break;
            case 3: B[3]=S4[row][column];
                break;
            case 4: B[4]=S5[row][column];
                break;
            case 5: B[5]=S6[row][column];
                break;
            case 6: B[6]=S7[row][column];
                break;
            case 7: B[7]=S8[row][column];
                break;
            }
        }
        for(int i=0,j=0; i<4; i++,j+=2){
            B[i]=(B[j]<<4)|(B[j+1]);
        }
        B=permute(B,P,32,4);
        delete[] right_p;
        return B;
    }

    void des::XOR(Byte a[],Byte b[],int len){
        //XOR Function bit by bit.
    }

   //This Function is called from outside the class DES with a 8 byte packet
    Byte* des::encode(Byte bytes[8]){
        Byte *encoded=new Byte[8];
        tokey_56();
        bytes=permute(bytes,IP,64,8);
        Byte left[4],right[4];
        create_sub_array(bytes,left,0,4);
        create_sub_array(bytes,right,4,8);
        //printf("\n\n");
        for(int i=0;i<16;i++){
            Byte *newright=new Byte[4];
            newright=function_des(right,key48[i]);
            XOR(left,newright,4);
            swap(left,right);
            delete[] newright;
        }
        swap(left,right);
        for(int i=0;i<4;i++){
            encoded[i]=left[i];
            encoded[i+4]=right[i];
        }
        encoded=permute(encoded,IPi,64,8);

        //print final coded message
        /*(for(int i=0;i<8;i++){
            printf("%2X",encoded[i]);
        }*/
        return encoded;
    }

    Byte* des::decode(Byte bytes[8]){
        Byte *decoded=new Byte[8];
        tokey_56();
        bytes=permute(bytes,IP,64,8);
        Byte left[4],right[4];
        create_sub_array(bytes,left,0,4);
        create_sub_array(bytes,right,4,8);
        //printf("\n\n");
        for(int i=0;i<16;i++){
            Byte *newright=new Byte[4];
            newright=function_des(right,key48[15-i]);
            XOR(left,newright,4);
            swap(left,right);
            delete[] newright;
        }
        swap(left,right);
        for(int i=0;i<4;i++){
            decoded[i]=left[i];
            decoded[i+4]=right[i];
        }
        decoded=permute(decoded,IPi,64,8);

        /*for(int i=0;i<8;i++){
            printf("%2X",decoded[i]);
        }*/
        return decoded;
    } 
```

DES 类的头文件在下面声明。

```
#pragma once
#include<ctype.h>
#include<string.h>
#include<stdio.h>
#include<conio.h>
#include"stdafx.h"
using namespace std;

typedef unsigned char Byte;

class des
{
private:
    static const int PC_1[56];
    static const int PC_2[];
    static const int IP[];
    static const int E[];
    static const int S1[4][16];
    static const int S2[4][16];
    static const int S3[4][16];
    static const int S4[4][16];
    static const int S5[4][16];
    static const int S6[4][16];
    static const int S7[4][16];
    static const int S8[4][16];
    static const int P[];
    static const int IPi[];
    static const char binary[16][5];
    static const Byte masks[8];
    //static const Byte masks_1[8];
    char key[16][5];
    int key_56[56];
    //int key_48[16][48];
    Byte key48[16][6];
public:

    char toBinary();
    des(const char Key[17]);
    void tokey_56();
    void tokey_48();
    Byte* encode(Byte bytes[]);
    Byte* des::decode(Byte bytes[8]);
    Byte* permute(Byte byte[],const int permutatn[],int permlen,int bytelen);
    void create_sub_array(Byte array[],Byte subarray[],int start,int end);
    void swap(Byte a[],Byte b[]);
    void XOR(Byte a[],Byte b[],int len);
    Byte* function_des(Byte right[],Byte k[]);
    ~des(void){}
}; 
```

如果有人告诉我如何有效地处理给我的记忆，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:51:51.713

我认为这是您的内存泄漏的地方：

```
 Byte *newright=new Byte[4];
        newright=function_des(right,key48[i]);
        /*...*/
        delete[] newright; 
```

您分配内存，将其分配给指针，然后将另一个值分配给指针，因此 delete[] 释放新引用的内存并且先前分配的内存丢失。

也在这里：

```
Byte* des::function_des(Byte right[],Byte k[]){
    Byte *right_p=new Byte[6];
    Byte *B=new Byte[8];
    /*...*/
    B=permute(B,P,32,4);
    delete[] right_p;
} 
```

如何修复它 - 不要像那样覆盖你的指针变量，声明新指针：

```
 Byte *newright=new Byte[4];
        Byte *really_newright=function_des(right,key48[i]);
        /* use really_newright instead of newright */
        delete[] newright;
        /* ... delete[] really_newright; delete it when appropriate ... */ 
```

而且我不确定您是否需要动态分配这些临时数组，但是您转储了很多代码，所以我不确定（也许您递归地调用您的方法，如果您在堆栈上分配数组，您将遇到堆栈溢出）。

# c# - 所有网络适配器的驱动程序文件信息 [C#]

> ID：15783928
> 
> 赞同：1
> 
> 时间：2013-04-03T09:42:51.603
> 
> 标签：c#, nic

我正在尝试获取我机器上所有网络适配器的驱动程序文件信息。

有谁知道，如何使用 C#

![在此处输入图像描述](https://i.stack.imgur.com/KQLb5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:46:43.733

要获取硬件信息，您需要创建一个`ManagementObjectSearcher`类对象。

以下链接可能对您有所帮助：

[http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

[http://www.codeproject.com/Articles/24756/How-to-query-miniport-driver-information-802-11-OI](http://www.codeproject.com/Articles/24756/How-to-query-miniport-driver-information-802-11-OI)

以下链接包含所有代码：

[http://www.daniweb.com/software-development/csharp/code/217155/get-a-list-of-installed-drivers](http://www.daniweb.com/software-development/csharp/code/217155/get-a-list-of-installed-drivers)

# git - 如何从版本控制中排除文件/文件夹，但将其保存在 Git 的存储库中？

> ID：15783938
> 
> 赞同：3
> 
> 时间：2013-04-03T09:43:19.400
> 
> 标签：git, version-control, ignore

`git rm <file>`可以在本地删除文件，从版本控制中删除，并在存储库中删除。`git rm --cached <file>`几乎相同，但将文件保存在本地工作副本中。

是否有可能从版本控制中删除文件/文件夹（因此忽略其更改）将其保留在存储库中，以便如果有人克隆存储库，该文件也存在，但不能用简单的`add`&更改`commit`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:22:18.640

最简洁的答案是不。这些`.gitignore`设施仅首先防止文件被跟踪。换句话说，它会阻止文件第一次进入存储库。但是，一旦文件被跟踪，它就会被永久跟踪。将跟踪对该文件的所有更改。

有两种通用解决方案。(1) 避免将该文件添加到索引中。这只是一个政策问题。(2) 将所有这些被忽略的文件放在一个档案中，如`UnzipMeRightAfterCloning.zip`. 对于进入 repo 的人来说，这是一个额外的步骤，但至少目标文件永远不会被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:56:07.230

已经在 Git 下的文件，您可以使用忽略

```
git update-index --assume-unchanged filename 
```

和 unigtore git update-index --no-assume-unchanged 文件名

但是，还有一些有趣的功能，[git - 忽略提交的文件并切换分支](https://stackoverflow.com/questions/15790390/git-ignoring-commited-files-and-switch-branch)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T09:46:45.940

尝试将文件/文件夹添加到 .gitignore

# wpf - WPF 控件移除焦点和悬停效果（FocusVisualStyle？！）

> ID：15783943
> 
> 赞同：0
> 
> 时间：2013-04-03T09:43:34.203
> 
> 标签：wpf, focusvisualstyle

我试图消除悬停或聚焦时控件上令人讨厌的外观效果。

这似乎不起作用：

> FocusVisualStyle="{x:Null}"

这就是我到目前为止得到的：

```
<ComboBox Grid.Row="2" HorizontalAlignment="Right" Background="Transparent" BorderBrush="#FFE87E00" FocusVisualStyle="{x:Null}"/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:01:22.723

查看控件模板，您应该能够操纵视觉状态从那里发生变化时发生的情况。

# c# - 如何让gridview中的数据字段成为url

> ID：15783948
> 
> 赞同：1
> 
> 时间：2013-04-03T09:43:55.070
> 
> 标签：c#, asp.net, sql, database, gridview

再一次，我知道这已经被回答了很多次，但我对所有的例子都感到困惑。所以我会以我需要回答的方式问它。

我有一个 sql 表，`supplylinks`. 这有`rowid`(identity pk)、`title`(varchar)、`link`(varchar) 和`description`(varchar)。

链接字段是一个实际的超链接，一个 url。因此，为了争论，假设第一行是：

> 1 | 谷歌 | [http://www.google.com](http://www.google.com) | 谷歌搜索引擎

很容易。现在我将它加载到gridview中。没什么花哨的，都是用 c# 代码完成的。

```
SqlConnection conn = new SqlConnection(@"Server=DEV6\MSSQLHOSTING;Database=Intranet;Trusted_Connection=True;");
        ds = new DataSet("ds");
        if (type.Equals("SAIX"))
        {

            SqlDataAdapter da = new SqlDataAdapter("select [Title],[Link],[Description] from SupplierLinks where SuppRowID = " + index, conn);
            da.Fill(ds);
        }
        if (type.Equals("Domian Related Links"))
        {
            SqlDataAdapter da = new SqlDataAdapter("select [Title],[Link],[Description] from DomainLinks where SuppRowID = " + index, conn);
            da.Fill(ds);
        }
        if (ds.Tables.Count > 0)
        {
            if (ds.Tables[0].Rows.Count > 0)
            {

                grdLinks.DataSource = ds;

                grdLinks.DataBind();
            }
        }
        else
        {
            lblDisp.Text = "";
            lblError.Text = "There are no links for that type";
        } 
```

那里没有错。我得到我的信息。但我现在想制作由 sql 表返回的链接，并将其作为正确的链接放入 gridview 中，这样当有人点击链接时，他们会被重定向到谷歌，在这种情况下。

请帮忙。这里的所有其他编码都让我感到困惑。很多人说我必须在 gridview 中添加一个超链接列。但是哪里？

我走了这么远，然后迷失了要绑定什么。

```
<asp:GridView ID="grdLinks" runat="server">
    <Columns>
        <asp:HyperLinkField DataNavigateUrlFields="col2" 
    </Columns>
</asp:GridView> 
```

就像我说的，我迷茫和困惑。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:50:47.353

```
<Columns>
    <asp:HyperLinkField DataTextField="LeadID" DataNavigateUrlFields="LeadID" DataNavigateUrlFormatString="LeadInformation.aspx?LeadID={0}" Text="Lead ID" />
    <asp:BoundField DataField="DateTime" HeaderText="Date Updated" />
    <asp:TemplateField>
        <ItemTemplate>
            <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Bind("LeadID") + Request.QueryString("type") %>' Text=""></asp:HyperLink>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:56:09.183

我所需要的只是

```
<a href='<%# Eval("Link") %>'>
                <asp:Label ID="LinkLabel" runat="server" Text='<%# Eval("Link") %>' /></a> 
```

在我的列表视图中。

# c# - C#获取计算机的MAC地址“离线”

> ID：15783954
> 
> 赞同：10
> 
> 时间：2013-04-03T09:44:13.147
> 
> 标签：c#, mac-address

当c#中没有互联网连接时，有什么方法可以获取计算机的mac地址？当我有连接时我能够获得，但当我离线时无法获得。但是我强烈需要我的工作的mac地址。

我的在线代码；

```
var macAddr =
      (from nic in NetworkInterface.GetAllNetworkInterfaces()
       where nic.OperationalStatus == OperationalStatus.Up
       select nic.GetPhysicalAddress().ToString()).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T09:50:29.017

来自 WMI：

```
public static string GetMACAddress1()
{
    ManagementObjectSearcher objMOS = new ManagementObjectSearcher("Select * FROM Win32_NetworkAdapterConfiguration");
    ManagementObjectCollection objMOC = objMOS.Get();
    string macAddress = String.Empty;
    foreach (ManagementObject objMO in objMOC)
    {
        object tempMacAddrObj = objMO["MacAddress"];

        if (tempMacAddrObj == null) //Skip objects without a MACAddress
        {
            continue;
        }
        if (macAddress == String.Empty) // only return MAC Address from first card that has a MAC Address
        {
            macAddress = tempMacAddrObj.ToString();              
        }
        objMO.Dispose();
    }
    macAddress = macAddress.Replace(":", "");
    return macAddress;
} 
```

从 System.Net 命名空间：

```
public static string GetMACAddress2()
{
    NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
    String sMacAddress = string.Empty;
    foreach (NetworkInterface adapter in nics)
    {
        if (sMacAddress == String.Empty)// only return MAC Address from first card  
        {
            //IPInterfaceProperties properties = adapter.GetIPProperties(); Line is not required
            sMacAddress = adapter.GetPhysicalAddress().ToString();
        }
    } return sMacAddress;
} 
```

稍微修改了[如何获取系统的 MAC 地址 - C-Sharp Corner](http://www.c-sharpcorner.com/uploadfile/ahsanm.m/how-to-get-the-mac-address-of-system-using-Asp-NetC-Sharp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:46:58.943

您可以在 C# ( ) 中使用 WMI`System.Management`来获取`Win32_NetworkAdapter`包含`MACAddress`属性的 's 列表。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394216(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394216(v=vs.85).aspx)

# delphi - EMS 高级数据导出 VCL - 使用自定义字段名称导出到 Excel

> ID：15783956
> 
> 赞同：0
> 
> 时间：2013-04-03T09:44:15.183
> 
> 标签：delphi, delphi-xe2, delphi-xe

我似乎无法弄清楚这一点。

将数据导出到 Excel 工作正常，但我不想使用原始表字段名称，而是我选择的名称。

现在，原始字段名称被导出（当然是数据）。`QExport4XLS1`链接到数据集。我尝试使用`qeCustomSource41`（自定义源）并更改字段名称 - 它工作正常，但没有导出数据。只有字段名称。

有谁知道如何做到这一点？我以前从未使用过这些组件，所以我只是尝试一下。文档很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:15:31.873

似乎唯一的方法是通过 QExport4Dialog1 而不是通过 QExport4XLS1。

# asp.net - 文本框水印扩展器

> ID：15783960
> 
> 赞同：0
> 
> 时间：2013-04-03T09:44:29.670
> 
> 标签：asp.net

我是 asp.net 的新手，我在 AjaxControlToolkit 中工作，我安装并执行了其他操作，但它向我显示报告...，

**错误是：**

```
 The type name 'TextBoxWatermarkExtender' does not exist in the type 'AjaxControlToolkit'

  protected global::AjaxControlToolkit.TextBoxWatermarkExtender TextBoxWatermarkExtender1; 
```

**代码是：**

```
<asp:TextBoxWatermarkExtender id="TBWEDOB" runat="server" targetcontrolid="txtDOB"
                    watermarktext="dd/mm/yy" watermarkcssclass="watermarked"> </asp:TextBoxWatermarkExtender> 
```

PLZ任何人在这个流程上给我打针......，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:07:58.563

```
First Check This 
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

在您的页面中查看您的页面中的 TagPrefix 是什么，然后使用 that.like

```
<asp:TextBoxWatermarkExtender ID="TBWE2" runat="server"
    TargetControlID="TextBox1"
    WatermarkText="Type First Name Here"
    WatermarkCssClass="watermarked" />

it will work defiantly 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T10:13:17.563

你为什么不简单地尝试`placeholder`属性来实现输入字段中的水印。

是的，旧版浏览器存在限制，因此如果您使用的是较新版本（支持 HTML 5），那么您可以像这样使用它

```
<asp:TextBox ID="textbox1" runat="server" placeholder="dd/mm/yyyy"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T10:08:37.217

尝试修改标签前缀

在页面顶部注册 ajax 工具包。

```
<%@ Register Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit" TagPrefix="ajax" %>

<ajax:TextBoxWatermarkExtender id="TBWEDOB" runat="server" targetcontrolid="txtDOB"
                    watermarktext="dd/mm/yy" watermarkcssclass="watermarked"> </ajax:TextBoxWatermarkExtender> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T10:12:14.790

您没有提供太多信息，因此很难确定您的错误在哪里，这里有一个简单的分步列表，说明如何在应用程序中使用 AJAX，只需按照以下几点操作即可：

[1) 从codeplex](http://ajaxcontroltoolkit.codeplex.com/)下载 AJAX ，保存并解压到您机器上的任何位置

2) 在 Visual Studio 工具箱中，右键单击-> 添加选项卡，为其命名

3）右键单击新创建的选项卡->选择项目...

4）点击浏览，找到AjaxControlToolkit.dll点击确定

5) 如果一切顺利，控件将添加到您的工具箱中

6) 将 ToolkitScriptManager 拖放到 .aspx 页面，这样做会自动：

6.1) 为您的项目添加 AjaxControlToolkit.dll 引用

6.2）将以下行添加到页面的源视图

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

7) 将 TextBoxWatermarkExtender 拖放到 .aspx 页面，您就完成了：

```
<asp:ToolkitScriptManager ID="sm" runat="server" />
<asp:TextBoxWatermarkExtender ID="watermark" runat="server" TargetControlID="txtName" WatermarkText="Type name here..." />
<asp:TextBox ID="txtName" runat="server" /> 
```

# android - 两个后台服务android

> ID：15783963
> 
> 赞同：0
> 
> 时间：2013-04-03T09:44:40.653
> 
> 标签：android, background-service

在我的活动中，我需要运行两个后台服务。

主要后台服务：

```
class loadingTask extends AsyncTask<Void, Void,Void> {

      @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        pd = ProgressDialog.show(context, "", "Chargement en cours..", true, false);
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void result) {
         // TODO Auto-generated method stub
        super.onPostExecute(result);
        pd.dismiss();
    }

    ...

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        getxml = Util.CallWebService("");
        return null;
    }
} 
```

第二个后台服务。

```
class mloadingTask extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... urls) {

        SAXHelper sh = null;
        try {
            sh = new SAXHelper(urls[0]);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        sh.parseContent("");
        return "";

    }

    protected void onPostExecute(String s) {
        pd.dismiss();

    }
} 
```

在我的`onCreate()`方法中，我想调用第一个后​​台，当它完成加载第二个后台服务时启动。我的部分后台服务如下。

```
AsyncTask<Void, Void,Void> loadTask = new loadingTask().execute();

    if(loadTask.getStatus()==AsyncTask.Status.FINISHED){

         new mloadingTask().execute(getxml);

         System.out.println("getxml: "+getxml);
    } 
```

但是，第二个后台服务似乎没有启动。我也没有打印出来。我想我错过了一步，或者 android 在同一个活动中不允许多个后台服务。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:50:58.347

顾名思义，AsyncTask 是异步的。您需要在第一个 AsyncTask 的 onPostExecute 中调用您的第二个 AsyncTask

或者

循环并等待 AsyncTask 在您的活动中完成，但这可能需要更多时间，您可能会收到 Application Not Responding 消息。

一旦您调用 execute() 方法，控制权就会转到 loadTask.getStatus() 的下一条语句。由于任务刚刚开始， loadTask.getStatus() 不会返回 FINISH 并且您的第二个任务永远不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:06:13.597

```
AsyncTask<Void, Void,Void> loadTask = new loadingTask().execute();

if(loadTask.getStatus()==AsyncTask.Status.FINISHED){

  new mloadingTask().execute(getxml);

  System.out.println("getxml: "+getxml);
} 
```

if() 块有 99% 的可能性永远不会通过。在检查它是否完成后，您首先执行名为 loadTask 和 RIGHT 的第一个 asyncTask。到那时它实际上完成的可能性很小。

简单的方法：

只使用一个异步任务。您想完成 asyncTask 1 然后触发 asyncTask 2，这与只有一个 asyncTask 执行这两项操作完全相同。

```
class loadingTask extends AsyncTask<Void, Void,Void> {

      @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        pd = ProgressDialog.show(context, "", "Chargement en cours..", true, false);
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void result) {
         // TODO Auto-generated method stub
        super.onPostExecute(result);
        pd.dismiss();
    }

    ...

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        getxml = Util.CallWebService("");

        SAXHelper sh = null;
        try {
            sh = new SAXHelper(urls[0]);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        sh.parseContent("");
        return null;
    }
} 
```

困难的方法：

我如何解决这种事情是（我们的情况不同，但应该这样做）

使用一种方法创建一个接口。例如：

```
public interface OnDataChangedListner {
    void dataChanged(Class listener);
} 
```

然后在某个地方（我使用我的存储库类）编写一个方法来添加和删除整体到 OnDataChangedListener 接口列表

```
private ArrayList<OnDataChangedListner> mOnDataChangedListners;

public void addOnDataChangedListner(OnDataChangedListner onDataChangedListner){
    synchronized (mOnDataChangedListners){
        mOnDataChangedListners.add(onDataChangedListner);
    }
}

public void removeOnDataChangedListner(OnDataChangedListner onyDataChangedListner){
    if (mOnDataChangedListners != null){
        synchronized (mOnDataChangedListners){
            for (Iterator<OnDataChangedListner> it = mOnDataChangedListners.iterator(); it.hasNext();) {
                OnDataChangedListner listener = it.next();
                if (listener .equals(onDataChangedListner))
                    it.remove();
            }
        }
    }
} 
```

这可能是矫枉过正。但是这个示例应该可以帮助您在任务运行时更新 UI。免费额外！:))

使用上面的代码，在您定义添加和删除侦听器方法的同一类中创建一个 onDataChanged() 方法。

在该代码中调用处理程序

```
// Need handler for callbacks to the UI thread
final static Handler mHandler = new Handler();

// Create runnable for posting
final Runnable mNotifyDataChanged = new Runnable() {
    public void run() {
        if (mOnDataChangedListners != null){
            synchronized (mOnDataChangedListners){
                for (Iterator<OnDataChangedListner> it = mOnDataChangedListners.iterator(); it.hasNext();) {
                    OnDataChangedListner listener = it.next();
                    if (listener  != null)
                        listener.dataChanged(this.getClass());
                    else
                        it.remove();
                }
            }
        }
    }
};

/**
 * will notify registerred delegates on the main (UI) thread
 */
public void notifyDataChanged(){
    mHandler.post(mNotifyDataChanged);
} 
```

好的，所以我最终给出了整个样本。放置此代码的位置取决于您。但是，当您调用 notifyDataChanged() 时，它将触发处理程序，该处理程序又将循环遍历该类的所有当前注册侦听器

然后它将依次调用侦听器的 datachanged 方法。

为了使这一切正常工作，您所要做的就是让一个类实现接口

调用 addOnDataChangedListener(this);

并实现接口中提供的方法。

请注意，这绝对不是最简单的做事方式。我不知道做你想做的最简单的方法是什么。我以前从来没有遇到过这种情况。

但是您可以在已实现的方法中执行第二个任务。应该管用..

# vba - VBA 如果比较 TR\TD 元素

> ID：15783972
> 
> 赞同：1
> 
> 时间：2013-04-03T09:45:32.790
> 
> 标签：vba, excel, excel-web-query

我有一个表格的网络查询，它给了我这样的表格：

```
 [C]                  [D]             [E]
[A] Events         |   IP source    | IP destination |
[B] MyEvent (1.10) |   192.168.0.1  | 192.168.0.3    | 
```

给我信息的 Html 代码是关于这种类型的模式：

```
<table class="wrapper">

<tbody>
  <tr>
   <td width="100%" valign="top"> 
    <center>
     <div id="contenpanel">

      <table id="contenttable" class="full_table_of_events">
        <tbody>
          <tr class="content" oncontextmenu="blablabla",( "src=192.168.0.1&dst=192.168.0.2")></tr>
          <tr></tr>
          <tr></tr>
        </tbody>
      </table>

     </div>
    </center>
   </td>
  <tr>
</tbody>

</table> 
```

所以我可以通过简单的 c0de .innerText 获得值，innerText 的完整值是：

```
myEvent (1.10) 192.168.0.1 192.168.0.2 
```

我确实用 msgbox 清除了这个值，我在 excel 中有这个 c0de，它的作用是，看看你有没有在工作表上有鼠标并给一个 Label.form 你得到的标题，我有 3 label.form 的 1 用于事件，1 用于源 IP，1 用于目标 ip，我尝试使用 c0de 查看我拥有的那条线是否存在于桌子上，但没有任何反应。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

    Eventi.Caption = ActiveCell.Value
    Source.Caption = Cells(ActiveCell.Row, ActiveCell.Column + 1)
    Destination.Caption = Cells(ActiveCell.Row, ActiveCell.Column + 2)
End Sub

Sub Extract()    
    Dim URL As String
    Dim IE As InternetExplorer
    Dim HTMLdoc As HTMLDocument
    Dim TRelements As IHTMLElementCollection
    Dim TRelement As HTMLTableRow
    Dim Chkb0x As IHTMLElementCollection

    URL = "https://localhost/events/index.cgi"
    Set IE = New InternetExplorer

    With IE
        .navigate URL    
        .Visible = True

        While .Busy Or .readyState <> READYSTATE_COMPLETE: DoEvents: Wend

        Set HTMLdoc = .document
    End With

    Set TRelements = HTMLdoc.getElementsByTagName("TR")    
    MsgBox Eventi.Caption & " " & Source.Caption & " " & Destination.Caption
    MsgBox "Search Starting..."

    For Each TRelement In TRelements

        If Trim(TRelement.innerText) = Eventi.Caption & " " & Source.Caption & " " & Destino.Caption Then                       
            MsgBox "Bingo! You have this event"                       
        End If                      
    Next
End Sub 
```

好吧，我希望有人能看到我做错了什么我只是想知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:12:41.207

几个调试点：

1.  逐步检查您的代码并手动检查每个`Trim(TRelement.innerText)`值的有效性。
2.  确保该`Eventi.Caption`值恰好是“myEvent (x.xx)”，包括空格、括号和大小写。
3.  我不熟悉`HTMLdoc.getElementsByTagName("TR")`，但请确保它不区分大小写。
4.  正如@Dick 建议的那样，检查任何应该是 spce using 的非空格`asc(mid(TRelement.innertext),8,1))`，其中 8 是您认为空格所在的位置。如果它返回的不是 32（ascii 表示空格），那么您的`If`语句中将不会匹配。

# c# - WCF 始终附加会话令牌

> ID：15783974
> 
> 赞同：1
> 
> 时间：2013-04-03T09:45:36.137
> 
> 标签：c#, .net, wcf, rest

我正在向我对 REST 服务发出的每个请求附加一个令牌。例如，要获取有关用户的信息，您可以：

```
/Service.svc/users/12174?auth_token=138eac01291378f 
```

但要实现这一点，我需要这样做：

```
[OperationContract]
public interface Foo
{
    [OperationContract]
    [WebInvoke (UriTemplate = "/users/{id}/?auth_token={token}")]
    UserInfo GetUserInfo (int id, string token);

    [OperationContract]
    [WebInvoke (UriTemplate = "/users/delete/{id}/?auth_token{token}")]
    void DeleteUser (int id, string token);
} 
```

我不仅需要设置`UriTemplate`接受访问令牌，而且必须在每个方法中单独处理它。

在调用方法之前有没有办法处理这个（身份验证）？因此，我将能够在全局范围内处理身份验证，而无需分别将令牌传递给每个方法。

# c# - 添加项目后组合框不刷新 C# WPF

> ID：15783975
> 
> 赞同：2
> 
> 时间：2013-04-03T09:45:36.080
> 
> 标签：c#, wpf, binding, combobox, observablecollection

在我的主窗口中，我有一个将所有数据存储在其中的类（称为“Measconsettings”）。此类（“Measconsettings”）包含另一个类“DeviceDefinition”的 ObservableCollection“DeviceDefinitionList”

`ObservableCollection<DeviceDefinition> DeviceDefinitionList`.

当我在 MainWindow 中按下一个按钮时，会使用 datacontex = Measconsettings 创建一个新窗口。

在这个新窗口中，有一个 ItemsSource 绑定到“Measconsettings.DeviceDefinitionList”的组合框。

```
<ComboBox Grid.Row="2" Grid.Column="2" Margin="2,0" Name="CboDeviceDefinitionList" ItemsSource="{Binding Path=DeviceDefinitionList}"/> 
```

我现在的问题是添加项目时组合框不会自动更新。

我需要关闭新窗口并再次按下按钮将其打开，然后它才会显示组合框中的项目。

我尝试添加`CboDeviceDefinitionList.Items.Refresh();`但它不起作用..

只有当我`CboDeviceDefinitionList.ItemsSource = orgMeasConSettings.DeviceDefinitionList;`在将项目添加到 ObservableCollection 后立即添加时，它们才会立即显示。

关于如何正确绑定到组合框的任何想法或提示？PS：我是wpf初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:40:53.243

这是我按照 manish 建议实施 INotifyPropertyChanged 后的解决方案。

编辑：它现在有效！

```
public class MeasConSettings : INotifyPropertyChanged
    {

private ObservableCollection<DeviceDefinition> mDeviceDefinitionList;
private DeviceDefinition mSelectedDeviceDefinition;

    public ObservableCollection<DeviceDefinition> DeviceDefinitionList
    {
        get
        {
            return mDeviceDefinitionList;
        }
        set
        {
            mDeviceDefinitionList = value;
        }
    }

    public DeviceDefinition SelectedDeviceDefinition
        {
            get
            {
                return mSelectedDeviceDefinition;
            }
            set
            {
                mSelectedDeviceDefinition = value;
                NotifyPropertyChanged("SelectedDeviceDefinition");
            }
        }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }

} 
```

XAML 代码：

```
<ComboBox Grid.Row="2" Grid.Column="2" Margin="2,0" Name="CboDeviceDefinitionList" ItemsSource="{Binding Path=DeviceDefinitionList}" SelectedItem="{Binding Path=SelectedDeviceDefinition}"/> 
```

添加项目的代码：

```
orgMeasConSettings.DeviceDefinitionList.Clear();
            foreach (DeviceDefinition deviceDefinition in newSettings.DeviceDefinitionList)
            {
                orgMeasConSettings.DeviceDefinitionList.Add(deviceDefinition);
            }

            orgMeasConSettings.SelectedDeviceDefinition = newSettings.DeviceDefinitionList.FirstOrDefault(); 
```

# sql - SQL 请求（唯一路由）

> ID：15783977
> 
> 赞同：0
> 
> 时间：2013-04-03T09:45:43.227
> 
> 标签：sql

我有表城镇：

```
TOWNS (t)
Paris
London
Berlin
etc.. 
```

我想发出 SELECT 请求，它返回所有独特的路线，例如：

```
ROUTES (t1, t2)
Paris London  
Paris Berlin  
Berlin London  
etc.. 
```

如果我们有路线伦敦 - 巴黎，我们不能添加路线巴黎 - 伦敦，因为在这种情况下 AB=BA。

将欣赏任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:47:39.493

```
select a.townname, b.townname othertown
  from town a
  join town b on a.townname < b.townname 
```

要填充 ROUTE 表，您可以从此 SELECT 语句中插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:50:08.700

这应该排除所有 A=B 和所有反向路线:)

```
select t1.town,
       t2.town
from towns t
inner join towns t2
where t1.town > t2.town 
```

# php - 反射属性过滤器

> ID：15783984
> 
> 赞同：5
> 
> 时间：2013-04-03T09:46:05.983
> 
> 标签：php

我有一个具有公共、公共静态、私有和私有静态属性的类，我试图只获取公共的。由于某种原因我无法正确使用过滤器，我试过了

```
ReflectionProperty::IS_PUBLIC & ~ReflectionProperty::IS_STATIC 
```

或者

```
ReflectionProperty::IS_PUBLIC & (ReflectionProperty::IS_PUBLIC | ~ReflectionProperty::IS_STATIC) 
```

除其他外，我要么不断获得静态公共或私有静态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:22:32.117

您需要查询所有公众，然后像这样过滤公共静态数据：

```
$ro = new ReflectionObject($obj);

$publics = array_filter(
    $ro->getProperties(ReflectionProperty::IS_PUBLIC), 
    function(ReflectionProperty $prop) {
        return !$prop->isStatic();
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T10:16:29.923

得到所有的公众和所有的静态然后得到它的相交：

```
class Test{
 public static $test1 = 'test1';
 private static $test2 = 'test2';
 public $test3 = 'test3';
}
$test = new Test();
$ro = new ReflectionObject($test);
$publics = $ro->getProperties(ReflectionProperty::IS_PUBLIC);
$statics = $ro->getProperties(ReflectionProperty::IS_STATIC);
var_export(array_diff($publics, $statics)); 
```

返回：

```
array ( 1 => ReflectionProperty::__set_state(array( 'name' => 'test3', 'class' => 'Test', )), ) 
```

# symfony - Symfony2：transchoice 中的树枝过滤器

> ID：15783985
> 
> 赞同：0
> 
> 时间：2013-04-03T09:46:06.357
> 
> 标签：symfony, internationalization, translation

我正在使用基于 Symfony2、Twig 和 xliff 的翻译。

现在，我想根据介于`[-Inf,Inf]`. 为此，我使用[`transchoice`](http://symfony.com/doc/2.0/book/translation.html#pluralization).

**我的问题**：我想显示`7 days ago`if `count=-7`。但是，我得到`-7 days ago`. 我不能`abs`在 transchoice 字段中使用树枝过滤器，对吧？如何删除前导减号。

这是我的`message.en.xliff`...

```
<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
               <source>todo.days-difference</source>
                   <target>{0} today|{1} tommorow|]1,14] %count% days before|]14,Inf] far away|{-1} yesterday|[-14,-1[{{ count }}%count% days after|[-Inf,-14[ long after</target>
            </trans-unit>
        </body>
    </file>
</xliff> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:56:34.343

将 count 变量的绝对值作为参数传递可以解决问题：

```
 {{ "todo.days-differences"|transchoice(task.getDueDateDifference(), {'%count_abs%': task.getDueDateDifference()|abs}) }}

    <?xml version="1.0"?>
    <xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
        <file source-language="en" datatype="plaintext" original="file.ext">
            <body>
                <trans-unit id="1">
                   <source>todo.days-difference</source>
                       <target>{0} today|{1} tommorow|]1,14] %count_abs% days before|]14,Inf] far away|{-1} yesterday|[-14,-1[ %count_abs% days after|[-Inf,-14[ long after</target>
                </trans-unit>
            </body>
        </file>
    </xliff> 
```

# c# - 应用程序关闭时线程是否运行？

> ID：15783986
> 
> 赞同：0
> 
> 时间：2013-04-03T09:46:14.260
> 
> 标签：c#, .net, multithreading

我有一个使用线程的窗口（C#）应用程序（只有 .exe 文件，没有代码）。如果我的应用程序已关闭，则意味着我没有使用该应用程序。此时线程是否正在工作？

我的问题是我在特定时间使用计时器线程类将文件从一个驱动器传输到另一个驱动器，在该特定时间应用程序关闭。

文件是否会传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:48:15.490

不，它不会。该线程是在应用程序中启动的，如果应用程序关闭，则其中的所有线程都将被杀死。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:57:10.500

您在程序中启动的任何线程都会阻止应用程序**终止**，直到所有的线程都退出它们的线程 proc 函数，或者在它们上调用了 abort()。

要检查计时器线程类的确切工作方式，请运行位于 MSDN 上的演示代码

[http://msdn.microsoft.com/en-GB/library/ms149618.aspx](http://msdn.microsoft.com/en-GB/library/ms149618.aspx)

正如人们所指出的那样，设置后台线程不会阻止应用程序终止，但是，将线程作为后台线程将无法实现操作想要的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:48:14.927

不，线程仅在您的应用程序正在运行时才存在。如果您希望在主应用程序退出后继续执行某些操作，则需要创建一个完全独立的后台进程（不仅仅是后台线程）

# javascript - 如何将值从 jQuery 传递到 jsf h:inputText 和 Backing Bean

> ID：15783987
> 
> 赞同：2
> 
> 时间：2013-04-03T09:46:16.153
> 
> 标签：javascript, jsf, jquery

我尝试将值从 jquery 传递给 jsf 和 Backing Bean。在此过程中，我不想使用来自 jsf-Tag 的 f:ajax。

javaScript 或 jQuery

```
<script>
   var myvalue = null;
   $('.classname').live('click',function(){
      myvalue = "thisvalue"+xyz;  
      // update myvalue in jsf inputtext and in bean
   });
</script> 
```

JSF - 内容

```
<h:form id="myid" prependId="false">

  <h:inputText id="fragment" value="#{myBean.changevalue}">
  <!-- please do not use here f:ajax or p:ajax so on. -->

</h:form> 
```

豆含量

```
private String changevalue;

public String getChangevalue() {
  return changevalue;
}

public void setChangevalue(String changevalue) {
  this.changevalue = changevalue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:30:09.600

只是你必须在 jquery 中将 val 设置为浏览器文本框 id

例如

```
 <script>
   var myvalue = null;
   $('.classname').live('click',function(){
      myvalue = "thisvalue"+xyz;  

     $("#myid\\:fragment").val(myvalue);

   });
</script> 
```

**它会自动将值绑定到您的 bean**

希望对你有帮助。

# ios - UIStepperButtom 图像更改（+ 和 -）

> ID：15783988
> 
> 赞同：1
> 
> 时间：2013-04-03T09:46:19.390
> 
> 标签：ios, uistepper

我知道这个问题很有趣，但是想尝试一下是否可以将`UIStepper`图像**`+`**和图像更改为**`-`**其他图像？**`x.png`****`y.png`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:55:25.343

在[iOS 6](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/decrementImageForState%3a)中是可能的，但在早期版本中没有此功能。这些是可用的方法

1.  [– 背景图像状态：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/backgroundImageForState%3a)
2.  [– 设置背景图像：forState：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/setBackgroundImage%3aforState%3a)
3.  [– 递减图像状态：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/decrementImageForState%3a)
4.  [– setDecrementImage:forState:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/setDecrementImage%3aforState%3a)
5.  [– 分割器ImageForLeftSegmentState：rightSegmentState：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/dividerImageForLeftSegmentState%3arightSegmentState%3a)
6.  [– setDividerImage:forLeftSegmentState:rightSegmentState:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/setDividerImage%3aforLeftSegmentState%3arightSegmentState%3a)
7.  [– 增量图像状态：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/incrementImageForState%3a)
8.  [– setIncrementImage:forState:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStepper_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStepper/setIncrementImage%3aforState%3a)

如果要更改步进器的外观，请使用以下代码。

```
[[UIButton appearanceWhenContainedIn:[UIStepper class], nil] setBackgroundImage:[UIImage imageNamed:@"normal.png"] forState:UIControlStateNormal];
[[UIButton appearanceWhenContainedIn:[UIStepper class], nil] setBackgroundImage:[UIImage imageNamed:@"highlighted.png"]  forState:UIControlStateHighlighted];
[[UIButton appearanceWhenContainedIn:[UIStepper class], nil] setBackgroundImage:[UIImage imageNamed:@"disabled.png"]  forState:UIControlStateDisabled]; 
```

# asp.net - 验证传入 XML 的 ASP.NET Web 服务

> ID：15783989
> 
> 赞同：0
> 
> 时间：2013-04-03T09:46:29.427
> 
> 标签：asp.net, xml, web-services

我有 ASP.NET 4 Web 服务 (asmx)。我使用 IXmlSerializable 接口进行手动序列化/反序列化。在函数 ReadXml（IXmlSerializable 的一部分）中，我使用 functin XmlReader.ReadString，如果客户端向我发送无效 XML，则此函数将引发异常。如何在反序列化之前验证传入的 XMl？因为异常对于性能来说是非常困难的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:49:35.777

将反序列化放在 try catch 块中并在 catch 中处理异常。预先验证 xml 是没有意义的，因为当您尝试验证时它可能会通过异常。

# http - “每个 SSL 证书都需要一个专用 IP”到底是什么意思？

> ID：15783990
> 
> 赞同：23
> 
> 时间：2013-04-03T09:46:29.583
> 
> 标签：http, ssl, https, ssl-certificate

我读过一些关于 SSL 证书的内容，特别是我读过 SSL 证书“需要专用 IP 地址”。现在，我不确定这是什么意思；这是否意味着证书需要与用于正常 HTTP 通信的 IP 地址分开的专用 IP 地址，或者只是它不能与其他 SSL 证书共享 IP 地址？

澄清一下，我有一个带有专用 IP 地址的 VPS。VPS 托管了很多不同的站点，包括主站点的几个子域，但只有主站点和子域需要 SSL。*我可以使用我当前的 IP 地址简单地为*.example.com*购买 SSL 证书，还是需要获得一个与 VPS 上的其他站点分开的证书？或者更糟糕的是，我是否需要获得一个与服务器上的所有 HTTP 流量分开的服务器？请记住，其他站点都不需要 SSL。

感谢您对该主题的任何澄清。

* * *

编辑：我担心的一些来源：

[http://symbiosis.bytemark.co.uk/docs/symbiosis.html#ch-ssl-hosting](http://symbiosis.bytemark.co.uk/docs/symbiosis.html#ch-ssl-hosting)

[是否需要有专用 IP 地址来安装 SSL 证书？](https://stackoverflow.com/questions/6106471/is-it-necessary-to-have-dedicated-ip-address-to-install-ssl-certificate)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-03T10:07:57.900

1.  没有“SSL证书”之类的东西。该术语具有误导性。X.509 证书可以出于不同目的（由其密钥使用和扩展密钥使用“属性”定义）颁发，特别是用于保护 SSL/TLS 会话。

2.  证书不需要关于套接字、地址和端口的任何内容，因为证书是纯数据。

3.  当使用 TLS 保护某些连接时，您通常使用证书来验证服务器（有时是客户端）。每个 IP/端口有一台服务器，因此通常服务器选择要使用的证书是没有问题的。

    HTTPS 是个例外——几个不同的域名可以引用一个 IP，而客户端（通常是浏览器）连接到同一个服务器以获得不同的域名。域名在请求中传递给服务器，该请求在TLS 握手**之后进行。**

    这就是问题所在 - Web 服务器不知道要出示哪个证书。为了解决这个问题，TLS 中添加了一个新的扩展，名为 SNI（服务器名称指示）。但是，并非所有客户端都支持它。所以一般来说，每个域的每个 IP/端口都有一个专用服务器是个好主意。换句话说，客户端可以使用 HTTPS 连接到的每个域都应该有自己的 IP 地址（或不同的端口，但这并不常见）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T09:52:15.653

SSL 证书不需要专用 IP 地址。SSL 证书存储一个所谓的*公用名*。浏览器将此通用名称解释为它们正在与之通信的服务器的 DNS 名称。如果公共名称与浏览器正在与之通信的服务器的 DNS 名称不匹配，浏览器将发出警告。

您可以获得所谓的*通配符证书*，该证书可用于某个域内的所有主机。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-08T02:26:44.693

...跟进@Eugene 的回答，提供有关兼容性问题的更多信息...

根据[namecheap.com 的此页面，](https://www.namecheap.com/support/knowledgebase/article.aspx/9259) SNI 不适用于：

*   Windows XP + 任何版本的 Internet Explorer (6,7,8,9)
*   Internet Explorer 6 或更早版本
*   Windows XP 上的 Safari
*   黑莓浏览器
*   Windows Mobile 高达 6.5
*   至少在 Series60 上适用于 Symbian 的诺基亚浏览器
*   至少在 Series60 上适用于 Symbian 的 Opera Mobile

网站仍可通过 HTTPS 访问，但会出现证书不匹配错误。

因此，当我们进入 2016 年时，我会大胆地站出来说：“如果你无论如何都在构建一个**现代网站**（不支持旧浏览器），并且如果项目太小以至于它负担不起专用 IP 地址，你可能会依靠 SNI 没问题。” 当然，有成千上万的专家不同意这一点，但我们谈论的是*实用*，而不是完美。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:50:22.227

ssl 证书公用名必须与域名匹配。您对 ip 地址没有任何要求，除非它是证书提供商或 http 服务器软件施加的限制。

**编辑**：查看网络，似乎谣言已经传播，因为 Apache 的 ssl 插件没有（至少在 2002 年没有）任何机制来使用基于主机名的不同证书。在这种情况下，您必须在两个不同的 IP 地址上运行两个不同的 Apache Web 服务器。

无论如何，在您的配置中，只使用一个 IP 应该没有任何问题，因为您不必使用两个不同的证书（因为您计划使用通配符证书）。

在花钱购买第二个 ip 或证书之前，我无论如何都会尝试使用自签名证书配置网络服务器。

**编辑 2**：参考 apache 文档：

[http://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)

现在似乎（apache> = 2.2.12）它受支持

# python - Python：元组中的列表

> ID：15783991
> 
> 赞同：1
> 
> 时间：2013-04-03T09:46:29.813
> 
> 标签：python, list, python-2.7, tuples

我有来自开放街道地图的数据，格式如下：

```
</way>
<way id="148531879">
    <nd ref="1616241466"/>
    <nd ref="1616241469"/>
    <nd ref="1616241471"/>
    <nd ref="1616241472"/>
    <nd ref="1616241475"/>
    <nd ref="1616241479"/>
    <nd ref="276928691"/>
    <tag k="highway" v="secondary"/>
    <tag k="lit" v="no"/>
    <tag k="oneway" v="yes"/>
    <tag k="ref" v="L 292"/>
</way>
<way id="10870759">
    <nd ref="96594201"/>
    <nd ref="96594205"/>
    <nd ref="96594209"/>
    <nd ref="96594224"/>
    <tag k="highway" v="residential"/>
    <tag k="maxspeed" v="50"/>
    <tag k="name" v="Rockwellstraße"/>
    <tag k="oneway" v="yes"/>
    <tag k="postal_code" v="38518"/>
</way>
<way id="10522831">
    <nd ref="90664716"/>
    <nd ref="940615687"/>
    <nd ref="2222543788"/>
    <nd ref="940619729"/>
    <nd ref="90664692"/>
    <nd ref="939024170"/>
    <nd ref="298997463"/>
    <tag k="highway" v="residential"/>
    <tag k="name" v="Am Allerkanal"/>
    <tag k="postal_code" v="38518"/>
    <tag k="tracktype" v="grade2"/>
</way> 
```

单个文件包含 1000 个类似的方式 ID。我想将这些方式 id 存储在列表/元组中，但问题是方式 id 中的内容不固定。

例如，“nd ref”条目的数量可以不同。我正在考虑将id数据存储到一个元组中，并在每个包含`nd ref`数据的元组中包含一个列表。然后最后将所有元组存储在一个列表中。请问是否可行，是否可以通过循环访问所有的enteries？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:06:25.527

假设方式 id 只有 2 种标签，在这种情况下，如果您想在数据结构中组织输出，将方式 id 及其内容存储在列表中，您可以执行以下操作：

对于每种方式 id，您可以定义一个元组的形式

```
 t = (way_id,[list of nd ref tags],[list of tag k values]) 
```

因此，每个方式 id 都会有一个元组，并且可以随时将这些元组附加到列表中。使用元组的想法更好，因为数据组织得更好，你可以很容易地引用元组的内容：

```
t[0] -> gives you the way-id
t[1] -> gives you the list of nd-ref values for that id and so on. 
```

元组是不可变的数据结构，从某种意义上说，一旦你定义了一个元组（假设它命名为 't'）。您不能更改元组的内容，例如：

```
t[0] = 34983948 /*Invalid*/ 
```

但是元组可以包含可变元素，如列表。[关于列表](http://docs.python.org/2/tutorial/datastructures.html)和[元组](http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences)的官方 python 文档也可能会派上用场。

# ruby-on-rails-3 - 保存后Rails 3.2更新属性

> ID：15783992
> 
> 赞同：0
> 
> 时间：2013-04-03T09:46:30.300
> 
> 标签：ruby-on-rails-3, after-save

保存数据后，我想更新数据库中的特定属性。

例如，我的表中有一个名为pending 的列，它是一个布尔值。我想在保存数据时将此值设置为 true。

```
after_save :do_something

private
def do_something
  self.update_column(:pending, true)
end 
```

这行不通。这里有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:23:41.527

尝试 after_commit 而不是 after_save。它将在保存事务之外运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:07:34.357

您可以直接修改属性，例如：

```
after_save { |user| user.username = user.username.downcase } 
```