# StackOverflow 问答 13913000-13913999

# java - 为什么 JAXB 不为列表生成设置器

> ID：13913000
> 
> 赞同：64
> 
> 时间：2012-12-17T11:12:02.923
> 
> 标签：java, jaxb, getter-setter

当我从 XSD 生成 JAXB 类时，具有`maxOccurs="unbounded"`为它们生成的 getter 方法的元素，但没有 setter 方法，如下所示：

```
/**
 * Gets the value of the element3 property.
 * 
 * <p>
 * This accessor method returns a reference to the live list,
 * not a snapshot. Therefore any modification you make to the
 * returned list will be present inside the JAXB object.
 * This is why there is not a <CODE>set</CODE> method for the element3 property.
 * 
 * <p>
 * For example, to add a new item, do as follows:
 * <pre>
 *    getElement3().add(newItem);
 * </pre>
 * 
 * 
 * <p>
 * Objects of the following type(s) are allowed in the list
 * {@link Type }
 * 
 * 
 */
public List<Type> getElement3() {
    if (element3 == null) {
        element3 = new ArrayList<Type>();
    }
    return this.element3;
} 
```

方法注释清楚地说明了如何使用它，但我的问题如下：
**为什么 JAXB 不按照 Java Beans 规则生成一个 setter？**我知道我可以自己编写 setter 方法，但是生成的 getter 方法中建议的方法有什么优势吗？

这是我的 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.example.org/DoTransfer/" targetNamespace="http://www.example.org/DoTransfer/">

    <element name="CollectionTest" type="tns:CollectionTest"></element>

    <complexType name="CollectionTest">
        <sequence>
            <element name="element1" type="string" maxOccurs="1" minOccurs="1"></element>
            <element name="element2" type="boolean" maxOccurs="1" minOccurs="1"></element>
            <element name="element3" type="tns:type" maxOccurs="unbounded" minOccurs="1" nillable="true"></element>
        </sequence>
    </complexType>

    <complexType name="type">
        <sequence>
            <element name="subelement1" type="string" maxOccurs="1" minOccurs="1"></element>
            <element name="subelement2" type="string" maxOccurs="1" minOccurs="0"></element>
        </sequence>
    </complexType>
</schema> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-26T13:34:10.893

这是来自 JAXB 规范的理由 - 第 60 页。

> 设计说明 – List 属性没有 setter 方法。getter 通过引用返回 List。可以使用 java.util.List 上定义的适当方法将项目添加到 getter 方法返回的列表中。**JAXB 1.0 中此设计的基本原理是使实现能够包装列表并能够在从列表中添加或删除内容时执行检查。**

因此，如果 List 的实现覆盖了 add/remove 来执行验证，那么用（例如）ArrayList 替换那个“特殊”的 List 会破坏这些检查。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-17T12:21:41.347

链接：[列表没有设置器](http://jaxb.java.net/tutorial/section_2_2_7-Defining-a-List-of-Integers.html)

> getter 方法中的代码确保创建了 List。没有相应的**设置器**，这意味着列表元素的所有添加或删除都必须在**“活动”** 列表中进行。

正如报价所说，没有设置器，因为当您使用 getter 方法时，它确保列表的新实例在不存在时被初始化。

之后，当您必须添加或删除任何您必须使用的东西时

```
getElement3().add(Type); 
```

**更新**：编组`null`和空列表的区别

列表为的示例`null`

```
@XmlRootElement(name = "list-demo")
public class ListDemo {

    @XmlElementWrapper(name = "list")
    @XmlElement(name = "list-item")
    private List<String> list;

} 
```

输出将是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<list-demo/> 
```

**列表为空**的示例

 **```
@XmlRootElement(name = "list-demo")
public class ListDemo {

    @XmlElementWrapper(name = "list")
    @XmlElement(name = "list-item")
    private List<String> list = new ArrayList<String>();

} 
```

输出将是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<list-demo>
    <list/>
</list-demo> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-14T01:19:40.543

同意以上帕特里克的担忧。如果我直接对生成的 java 类进行编码，我很乐意提供帮助，但我使用的内省工具需要一个 setter 或一个可直接访问的成员。成功使用来自 [https://github.com/highsource/jaxb2-basics/wiki/JAXB2-Setters-Plugin](https://github.com/highsource/jaxb2-basics/wiki/JAXB2-Setters-Plugin)的 XJC 插件 并将 -B-Xsetter 参数添加到 wsimport

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-19T11:54:55.253

`XJC plugin`可以根据自己的具体要求编写自己的。

在此示例中，尝试在每个生成的 java 文件中添加一个`id`类型字段：`long``xjc`

```
package com.ricston;

import java.io.IOException;

import org.xml.sax.ErrorHandler;
import org.xml.sax.SAXException;

import com.sun.codemodel.JBlock;
import com.sun.codemodel.JCodeModel;
import com.sun.codemodel.JFieldVar;
import com.sun.codemodel.JMethod;
import com.sun.codemodel.JMod;
import com.sun.codemodel.JType;
import com.sun.codemodel.JVar;
import com.sun.tools.xjc.BadCommandLineException;
import com.sun.tools.xjc.Options;
import com.sun.tools.xjc.Plugin;
import com.sun.tools.xjc.outline.ClassOutline;
import com.sun.tools.xjc.outline.Outline;

public class XJCPlugin extends Plugin {

  public final static String ID = "id";
    public final static JType LONG_TYPE = new JCodeModel().LONG;
    public final static String ID_GETTER = "getId";
    public final static JType VOID_TYPE = new JCodeModel().VOID;
    public final static String ID_SETTER = "setId";

    @Override
    public String getOptionName() {
        return "Xexample-plugin";
    }

    @Override
    public int parseArgument(Options opt, String[] args, int i)
            throws BadCommandLineException, IOException {
        return 1;
    }

    @Override
    public String getUsage() {
        return "  -Xexample-plugin    :  xjc example plugin";
    }

    @Override
    public boolean run(Outline model, Options opt, ErrorHandler errorHandler)
            throws SAXException {

        for (ClassOutline classOutline : model.getClasses()) {
            JFieldVar globalId = classOutline.implClass.field(JMod.PRIVATE,
                    LONG_TYPE, ID);

            JMethod idGetterMethod = classOutline.implClass.method(JMod.PUBLIC,
                    LONG_TYPE, ID_GETTER);
            JBlock idGetterBlock = idGetterMethod.body();
            idGetterBlock._return(globalId);

            JMethod idSetterMethod = classOutline.implClass.method(JMod.PUBLIC,
                    VOID_TYPE, ID_SETTER);
            JVar localId = idSetterMethod.param(LONG_TYPE, "_" + ID);
            JBlock idSetterBlock = idSetterMethod.body();
            idSetterBlock.assign(globalId, localId);
        }
        return true;
    }

} 
```

完整的例子[在这里](http://archive.ricston.com/blog/xjc-plugin/)。

这里的另一个例子：

[https://blog.jooq.org/2018/02/19/how-to-implement-your-own-xjc-plugin-to-generate-tostring-equals-and-hashcode-methods/](https://blog.jooq.org/2018/02/19/how-to-implement-your-own-xjc-plugin-to-generate-tostring-equals-and-hashcode-methods/)

它们也是可在[github](https://github.com/highsource/jaxb2-basics/wiki)`hashCode`上生成, `equals`,的插件。`setters-for-list`

**参考：**

回答我提出的一个[问题](https://stackoverflow.com/questions/51304471/jaxb-edit-list-getter)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-25T09:24:36.770

万一有人在这里寻找一种方法来摆脱 XJC 生成的代码中那些烦人的懒惰初始化程序......在我的 Maven POM 中，这属于`<build><plugins>`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <id>remove-jaxb-generated-lazy-initializers</id>
            <phase>process-sources</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <target if="${remove-jaxb-generated-lazy-initializers}">
                    <echo message="Running 'replaceregexp' target on generated sources..."/>
                    <echo message="This removes JAXB-generated lazy initializers from collection accessors."/>
                    <replaceregexp match="if \([\w_]+ == null\) \{\s+[\w_]+ = new ArrayList&lt;[\w_]+&gt;\(\);\s+\}\s+" replace="" flags="g">
                        <fileset dir="${project.build.directory}/generated-sources" includes="**/*.java"/>
                    </replaceregexp>
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

对于设置器，我还使用绑定文件添加`@lombok.Setter`到某些类。`org.jvnet.jaxb2_commons:jaxb2-basics-annotate`因此，这些类最终成为标准 bean。

如果有人知道一种不那么老套的方法，我很乐意听到它——例如，一个 XJC 插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-30T12:20:42.117

需要在插件内部添加依赖。例如如下，

```
<plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>jaxb2-maven-plugin</artifactId>
                    <version>1.5</version>
                    <dependencies>
                    <dependency>
                        <groupId>org.andromda.thirdparty.jaxb2_commons</groupId>
                        <artifactId>collection-setter-injector</artifactId>
                        <version>1.0</version>
                    </dependency>
                    </dependencies>
                    <configuration>
                        <schemaDirectory>${project.basedir}/epc</schemaDirectory>
                        <arguments>-Xcollection-setter-injector</arguments>
                        <clearOutputDir>false</clearOutputDir>
                        <extension>true</extension>
                    </configuration>
                    <executions>
                        <execution>
                            <id>generate-java-from-xsd-1</id>
                            <phase>generate-sources</phase>
                            <goals>
                                <goal>xjc</goal>
                            </goals>
                            <configuration>
                                <packageName>${package name}</packageName>
                                <schemaFiles>example.xsd</schemaFiles>
                                <schemaDirectory>${project.basedir}/epc</schemaDirectory>
                                <bindingFiles>example_1.xjb</bindingFiles>
                                <bindingDirectory>${project.basedir}/generate</bindingDirectory>
                                <staleFile>${project.build.directory}/jaxb2/.xjc1StaleFlag</staleFile>
                            </configuration>
                        </execution>
              </plugin>
```**

# android - 如何在 Android SD 卡中保存 KSOP2 对 xml 的响应？

> ID：13913001
> 
> 赞同：0
> 
> 时间：2012-12-17T11:12:02.037
> 
> 标签：android, web-services, ksoap2

在我的项目中，我正在调用一个 Web 服务，该服务将响应作为来自 SQL 服务器的数千条记录返回，但由于 SOAP ENVELOPE 的默认大小为 64KB，我在我的 log-cat 和`OutOfMemory`异常中只获得前 15 条记录...
请告诉我如何在 SD 卡中的 xml 文件中写入此响应。

```
private static String SOAP_ACTION1 ="http://tempuri.org/DownloadAllMasterDataRelatedToFarmer";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME1 = "DownloadAllMasterDataRelatedToFarmer";
private static String URL = "http://someIP/Tracebaledemo/fieldbook/webservice1.asmxwsdl";

(...)

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
request.addProperty("prefixText",txtFar.getText().toString());
request.addProperty("count",txtCount.getText().toString());
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.dotNet = true;

try {
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    Log.d(TAG, "Entering Try and calling WebService");

    //this is the actual part that will call the webservice
    androidHttpTransport.call(SOAP_ACTION1, envelope);

    // Get the SoapResult from the envelope body.
    Log.d(TAG, "Fetching Results");

    SoapObject result = (SoapObject)envelope.bodyIn;
    Log.d(TAG, "Result from WebService before if block= "+result);
} (...) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T13:02:35.623

`records`如果没有必要，您保存您的 xml 只是为了获取您的您可以做

你为什么不给你的定义一个限制`Activity`

```
Suppose 30 records per hit 
```

或者您也可以优化您的 webService 并且您可以使用`Footer`显示`Loading more` 以这种方式查看您的记录

缺点-正如您所说，您有 10,000 条记录，这需要时间来获取您的记录

解决方案-您可以通过使用搜索事件的第一个字母来优化您的网络服务我希望你能得到我想说的如果没有，请告诉我

# c# - 从 Microsoft 帐户和应用程序帐户登录 Windows 8 应用程序

> ID：13913002
> 
> 赞同：0
> 
> 时间：2012-12-17T11:12:03.307
> 
> 标签：c#, windows-8, windows-live-id, microsoft-account

我想开发一个使用 Microsoft 帐户启用设备之间同步的 Windows 8 应用程序。

但是，用户还必须通过网络服务登录才能使用该应用程序。

那么它是如何工作的呢？登录是否可以跨设备“关联”到 Microsoft 帐户？

是否有说明如何执行此操作的教程/链接？

我希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:33:58.087

如果您在运行相同 Windows 8 应用程序的不同计算机之间进行同步，您可以使用漫游设置和漫游文件夹

*   [http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)

该示例涵盖本地和漫游数据。

如果您尝试在 Wwindows 8 应用程序和 iOS 应用程序之间同步，您可以将 SkyDrive 与实时 SDK 一起使用

*   [http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141](http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141)

据我了解，如果您选择漫游设置，Windows 将使这些设置在每台设备上保持最新，所以这就是我的建议。希望能帮助到你

# excel - 如果单元格突出显示，则 Excel 用户定义函数

> ID：13913004
> 
> 赞同：1
> 
> 时间：2012-12-17T11:12:06.113
> 
> 标签：excel, vba, user-defined-functions, highlight, if-statement

我创建了一个用户定义的函数来确定单元格是否以特定颜色突出显示，它在某些情况下有效，但不是我需要的；基本上，当该单元格永久突出显示该颜色时它可以工作，但我将它基于条件格式，并且如果单元格由于条件格式而成为该颜色，则该功能不起作用。

```
 Public Function Active(Rng As Range) As Boolean
        If Rng.Interior.Color = RGB(217, 151, 149) _
            Then Active = True
    End Function 
```

任何关于为什么的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:24:08.520

您能否在 udf 中使用与条件格式相同的标准？不是检查颜色，而是检查条件格式检查的因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:25:40.833

对于简单的条件格式（NONE-Color 缩放类型），可以参考@brettdj 和@Chuff 的外部参考 [http://www.xldynamic.com/source/xld.CFConditions.html#specific](http://www.xldynamic.com/source/xld.CFConditions.html#specific)

[如何使用 vba 在 Excel 2007 中找到条件格式单元格的填充颜色值？](https://stackoverflow.com/questions/7408899/how-do-i-find-the-fill-colour-value-of-a-conditionally-formatted-cell-in-excel-2)

对于颜色缩放条件格式，我尝试过 pasteSpecial 但它不起作用。

对我来说唯一可行的解​​决方案是将范围复制到 MS Word，然后将范围复制回 EXCEL。这将删除条件格式。然后你可以得到背景颜色 `Cells(X,Y).interior.color`

否则你需要自己实现条件格式的颜色缩放类型。

# java - 如何从项目资源管理器和包资源管理器获取文件到 Eclipse 上的新视图？

> ID：13913006
> 
> 赞同：0
> 
> 时间：2012-12-17T11:12:14.443
> 
> 标签：java, eclipse

我创建了创建项目的向导，我可以从该项目创建新文件或导入一个。这个文件显示在项目资源管理器和包资源管理器中，我可以从那里打开文件。我想要这个文件打开一个新视图并从那里打开。因为这个文件你可以建议我什么？哪一条路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:26:04.050

Eclipse 框架只能在您从导航视图打开文件时调用编辑器。但是，您可以构建一个外观和行为类似于视图的只读编辑器，并让您的用户使用此编辑器打开文件。

# cron - 创建 Cron 作业以在第 2 周的每个星期三执行

> ID：13913007
> 
> 赞同：0
> 
> 时间：2012-12-17T11:12:20.053
> 
> 标签：cron

执行 cron 作业的正确方法是什么？

每月第 2 周和第 4 周结婚

有小费吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:53:17.937

以下将在每个星期三上午 11 点运行该作业

```
00 11 * * 3 <your-command> 
```

这里`3`说，每周三运行的命令。您需要创建一个包装脚本，以跳过备用星期三的执行，并从 cron 上方调用该脚本。

# bash - Grepping一个巨大的文件（80GB）有什么办法可以加快速度？

> ID：13913014
> 
> 赞同：142
> 
> 时间：2012-12-17T11:12:43.780
> 
> 标签：bash, grep

```
 grep -i -A 5 -B 5 'db_pd.Clients'  eightygigsfile.sql 
```

这已经在一个相当强大的 linux 服务器上运行了一个小时，否则它不会超载。grep的任何替代品？关于我的语法有什么可以改进的，（egrep，fgrep 更好？）

该文件实际上位于与挂载到另一台服务器共享的目录中，但实际的磁盘空间是本地的，所以应该没有任何区别？

grep 占用了高达 93% 的 CPU

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-12-17T11:25:46.683

这里有几个选项：

1) 为您的 grep 命令添加前缀`LC_ALL=C`以使用 C 语言环境而不是 UTF-8。

2）使用`fgrep`是因为您正在搜索固定字符串，而不是正则表达式。

3）删除`-i`选项，如果你不需要它。

所以你的命令变成：

```
LC_ALL=C fgrep -A 5 -B 5 'db_pd.Clients' eightygigsfile.sql 
```

如果将文件复制到 RAM 磁盘也会更快。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-17T12:49:49.480

如果你有一个多核 CPU，我真的会推荐[GNU parallel](http://www.gnu.org/software/parallel/)。要并行使用 grep 大文件：

```
< eightygigsfile.sql parallel --pipe grep -i -C 5 'db_pd.Clients' 
```

根据您的磁盘和 CPU，读取更大的块可能会更快：

```
< eightygigsfile.sql parallel --pipe --block 10M grep -i -C 5 'db_pd.Clients' 
```

您的问题并不完全清楚，但其他选项`grep`包括：

*   放下`-i`旗帜。
*   将`-F`标志用于固定字符串
*   禁用 NLS`LANG=C`
*   `-m`使用标志设置最大匹配数。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-17T11:19:21.613

一些微不足道的改进：

*   删除 -i 选项，如果可以的话，不区分大小写非常慢。

*   替换`.`_`\.`

    单点是匹配任意字符的正则表达式符号，也很慢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T11:18:06.523

两条攻击线：

*   你确定，你需要`-i`，或者你有可能摆脱它吗？
*   你有更多的核心可以玩吗？`grep`是单线程的，因此您可能希望在不同的偏移量处启动更多它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-18T03:10:09.640

```
< eightygigsfile.sql parallel -k -j120% -n10 -m grep -F -i -C 5 'db_pd.Clients' 
```

如果您需要搜索多个字符串， grep -f strings.txt 可以节省大量时间。以上是我目前正在测试的内容的翻译。-j 和 -n 选项值似乎最适合我的用例。-F grep 也有很大的不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-25T08:10:15.420

尝试[ripgrep](https://github.com/BurntSushi/ripgrep)

与 grep 相比，它提供了更好的结果。

# html - ฏ๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎ํํํํํํํํํํํํํํํํํํํํํํํํํํ Why does this character never end?

> ID：13913016
> 
> 赞同：3
> 
> 时间：2012-12-17T11:12:55.467
> 
> 标签：html, char

你有没有注意到网页中的这个字符，ฏ๎ํ？由 0x0EOF、0x0E4E 和 0x0E4D 产生。

我可以在这里找到一些信息：http: [//shapecatcher.com/unicode/info/3599](http://shapecatcher.com/unicode/info/3599)。

但是，其实应该是三个字放在一起的，为什么在网页里，好像没完没了？

(KUbuntu 12.04 Chrome 版本 23)

![在此处输入图像描述](../Images/7cdebca282e887ab9ca8bf7be44a3040.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T11:50:41.030

这是一个非常重的字符，你也可以用拉丁字符来做这个，例如 ̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂

这就是 ̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂̂在十六进制编辑器中的显示方式： ![在此处输入图像描述](../Images/f92d57aeab8b98cf5f1a3084af6be67b.png)

所以你可以看到有很多`CC 82`，它们是[COMBINING CIRCUMFLEX ACCENT](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=768&number=128)，我们来分析一下：

1.  `EF BB BF`:[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)
2.  `C3 A2`:[带圆形的拉丁文小写字母 A](http://www.utf8-chartable.de/unicode-utf8-table.pl) : â
3.  `CC 82`: [COMBINING CIRCUMFLEX ACCENT](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=768&number=128) : ^ (与预览字母混合)

现在让我们试试我们自己的，我做到了：`EF BB BF C3 AB CC 88 CC 88 CC 88`...这是结果：ë̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈̈

![在此处输入图像描述](../Images/d8d1f2b80d8750bfd9997ab68196f469.png)

1.  `EF BB BF`:[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)
2.  `C3 AB`:[带分音符号的拉丁文小写字母 E](http://www.utf8-chartable.de/unicode-utf8-table.pl) : ë
3.  `CC 88`:[结合分音符](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=768&number=128): ¨

* * *

## 这是渲染问题吗？

实际上，二进制句子告诉系统做“无限字符”，它们实际上并不是无限的，它们有一个限制，但是当人们这样做时，他们这样做是为了好玩，并在字母中加入很多重音，让人相信它是无限的，例如，这个a只有2个波浪号：ã̃，这个另一个有3个：ã̃̃，下一个有很多：ã̃̃̃̃̃̃̃̃̃̃̃̃，这与锐音组合：ã̃́̃̃́̃́̃́̃́̃́̃́̃́̃́̃́̃̃̃

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T11:28:10.530

这是为我显示角色的方式：

![ฏ๎ํ"></p> <p>(OS X 10.8, Safari)</p> <p>如果它的显示方式与您不同，但变音符号以某种奇怪的方式隔开，则表示您的系统无法处理正确显示这个复杂的组合字符。</p>     </div>
    <div class=](../Images/7a9f19c46eeb7c60273125762916f038.png)

于 2012-12-17T11:28:10.530 回答

# c - C中的浮点运算是关联的吗？

> ID：13913017
> 
> 赞同：23
> 
> 时间：2012-12-17T11:13:11.133
> 
> 标签：c, math, floating-point, compiler-optimization

加法在数学上具有关联属性：

```
(a + b) + c = a + (b + c) 
```

在一般情况下，此属性不适用于浮点数，因为它们以有限精度表示值。

在从 C 程序生成机器代码作为优化的一部分时，是否允许编译器进行上述替换？它在C标准中到底在哪里说？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T11:32:40.613

不允许编译器执行“优化”，这将导致计算的值与根据抽象机器语义计算的值不同。

> 5.1.2.3 程序执行
> 
> [#1] 本国际标准中的语义描述描述了与优化问题无关的抽象机器的行为。
> 
> [#3] 在抽象机中，所有表达式都按照语义的规定进行评估。
> 
> [#13] 示例 5 由于精度和范围的限制，浮点表达式的重新排列通常受到限制。由于舍入误差，即使没有上溢和下溢，该实现通常也不能应用数学关联规则进行加法或乘法运算，也不能应用分配规则。

在您的示例中：

```
(a + b) + c 
```

甚至没有括号：

```
a + b + c 
```

我们有

```
 +
  / \
  +  c
 / \
 a  b 
```

并且编译器需要生成代码，好像`a`与 相加，`b`结果与 相加`c`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-16T09:20:45.407

您可以使浮点运算与 gcc 选项相关联：

```
-funsafe-math-optimizations -O2 
```

例子：

```
double test (double a, double b, double c) {    
  return (a + b + c) * (a + (b + c));
} 
```

这简化为：

```
double temp = a + (b + c);
return temp * temp; 
```

类似地，减少到零，忽略和`(a + b + c) - (a + (b + c))`的可能性。`INF``NAN`

如果我改为编译`-fassociative-math -O2`，我会收到奇怪的消息：

> 警告：-fassociative-math 已禁用；其他选项优先

`-funsafe-math-optimizations`如果您无论如何都不关心操作数的顺序，则可以提高速度，但是如果操作数的顺序很重要，则可能会导致精度损失，并且您可能会丢失`NAN`结果`INF`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-22T20:32:39.337

**C中的浮点乘法不是关联的。**

```
In C, Floating point multiplication is not associative. 
```

**这个 C 代码有一些证据：**

选择三个随机浮点值。
检查是否`a*(b*c)`永远不等于`(a*b)*c`

```
#include<stdio.h>
#include<time.h>
#include<stdlib.h>
using namespace std;
int main() {
    int counter = 0;
    srand(time(NULL));
    while(counter++ < 10){
        float a = rand() / 100000;
        float b = rand() / 100000;
        float c = rand() / 100000;

        if (a*(b*c) != (a*b)*c){
            printf("Not equal\n");
        }
    }
    printf("DONE");
    return 0;
} 
```

程序打印：

```
Not equal
Not equal
Not equal
Not equal
DONE
RUN FINISHED; exit value 0; real time: 10ms; user: 0ms; system: 0ms 
```

**结论：**

在我的测试中，三个随机选择的浮点乘法值在大约 70% 的时间是关联的。

# eclipse - 在eclipse中更改jdk

> ID：13913019
> 
> 赞同：9
> 
> 时间：2012-12-17T11:13:14.310
> 
> 标签：eclipse, google-app-engine, java

我正在尝试更新我的 Eclipse 以使用 jdk 而不是 jre。我按照这个论坛的说明，也在谷歌搜索答案，但由于某种原因它仍然不起作用。

我试着去偏好 ->java->install jre's ，从那里删除旧的 jre 并使用 jdk 的路径。

还尝试进入项目属性-> java构建路径-> jre系统库->编辑->工作区默认jre。它还说我正在使用jdk。

我什至尝试将下一个路径 C:\Program Files\Java\jdk1.6.0_31\bin\javaw.exe 添加到 ini 文件中

但是当我尝试将我的程序部署到应用程序引擎时，我收到下一条消息：无法更新应用程序：无法获取系统 Java 编译器。请使用 JDK，而不是 JRE。

我的eclipse版本是juno 4.2，我的jdk版本是1.6.0_31 我不知道我还需要改变什么。我什至从我的计算机上卸载了我的旧 jre，但 eclipse 仍然不能与 jdk 一起使用（虽然它可以识别它）

我不知道......任何人都可以帮助我吗？

这是我的ini文件：

```
 -startup
    plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar          
    --launcher.library
    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
    -product
    org.eclipse.epp.package.jee.product
    --launcher.defaultAction
    openFile
    --launcher.XXMaxPermSize
    256M
    -showsplash
    org.eclipse.platform
    --launcher.XXMaxPermSize
    256m
    --launcher.defaultAction
    openFile
    -vmargs
    -Dosgi.requiredJavaVersion=1.5
    -Dhelp.lucene.tokenizer=standard
    -Xms40m
    -Xmx512m
    -vm
    C:\Program Files\Java\jdk1.6.0_31\bin

thanks for the help 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T11:23:08.357

如果你想改变 Eclipse 本身应该运行的 JVM，那么合适的地方就是 eclipse.ini。以下是有关如何指定的说明：[eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)。

常见的错误是`-vm`在一行中指定参数名称和值，或者缺少' `-vm`'，或者放错位置。另外，请注意`-vm`不同操作系统上的格式。

**编辑**（在.ini 文件发布之后）：您的 -vm 选项出现在 -vmargs 之后，这是错误的（这两行都被视为 VM args）。.ini 文件中的正确参数位置如下所示：

```
...
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Program Files\Java\jdk1.6.0_31\bin
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T15:50:09.030

您可以在下面找到我的 eclipse ini，其中我通过以下方式设置了专用 JDK

```
-vm C:/Program Files (x86)/Java/jdk1.7.0_10/bin/javaw.exe 
```

[查看eclipse 帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/running_eclipse.htm&cp=0_3_0)中的“指定 Java 虚拟机”部分。

Quote:
*提示：在运行Eclipse 时明确指定要使用的Java VM 通常是一个好主意。如上图所示，这是通过“-vm”命令行参数实现的。如果不使用“-vm”，Eclipse 将查看 O/S 路径。当您安装其他基于 Java 的产品时，它们可能会更改您的路径，并可能导致您下次启动 Eclipse 时使用不同的 Java VM。*

* * *

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-vm
C:/Program Files (x86)/Java/jdk1.7.0_10/bin/javaw.exe
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vmargs
-Dorg.eclipse.ecf.provider.filetransfer.httpclient.retrieve.readTimeout=999999
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms128m
-Xmx1024m 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-09T02:09:32.797

其他答案都不适合我。我最终只是删除了“jre7”目录，然后，Eclipse 开始使用安装在它旁边的 JDK。

# asp.net - 调用异步进程时保持 asp.net 会话处于活动状态

> ID：13913021
> 
> 赞同：2
> 
> 时间：2012-12-17T11:13:17.703
> 
> 标签：asp.net, session, asynchronous

我有一个应用程序，我将在其中将一些数据上传到数据库，因为上传时间很长，并且为了允许用户在上传过程中处理应用程序的另一部分，我尝试使用`PageAsyncTask`或`AsyncCallback`方法异步上传。但是有了这个，我遇到了会话超时问题。假设我的会话超时设置为 20 分钟，我开始异步上传，用户不对应用程序执行任何操作，因此 20 分钟后页面超时，但由于上传`async`仍在继续。我想保持会话活动，直到上传完成。

我无法在页面中使用计时器，因为用户可以从页面导航并且时间会停止。有什么办法可以防止会话超时，任何建议都会有所帮助。我谢谢

# hibernate - (hibernate4) org.hibernate.MappingException: 未知实体

> ID：13913022
> 
> 赞同：1
> 
> 时间：2012-12-17T11:13:19.467
> 
> 标签：hibernate, jakarta-ee, struts2, oracle11g

我是Java EE的新手，请帮忙！

以下代码使用了struts2+hibernate4+oracle11g。运行此代码后，它给了我以下错误消息：

> org.hibernate.MappingException：未知实体

用户详细信息.java

```
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

@Entity
@Table(name="users")
public class UserDetails {
    @Id
    private int id;
    private String passwd;
    public String getPasswd() {
        return passwd;
    }
    public void setPasswd(String passwd) {
        this.passwd = passwd;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    public void Update(){
        SessionFactory sessionFactory;
        ServiceRegistry serviceRegistry;

        Configuration configuration = new Configuration();
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);

        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(this);
        session.getTransaction().commit();
    }
} 
```

休眠.cfg.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>

  <session-factory>

    <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>
    <property name="connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="connection.url">jdbc:oracle:thin:@192.168.1.2:1521:orcl</property>
    <property name="connection.username">steve</property>
    <property name="connection.password">steve</property>

    <property name="cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>

    <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
    <property name="current_session_context_class">thread</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hbm2ddl.auto">create</property>
  </session-factory>

</hibernate-configuration> 
```

表结构：

```
Create table Users (ID int primary key, passwd varchar(45)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:21:15.533

您需要添加类：

```
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

@Entity
@Table(name="users")
public class UserDetails {
    @Id
    private int id;
    private String passwd;
    public String getPasswd() {
        return passwd;
    }
    public void setPasswd(String passwd) {
        this.passwd = passwd;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    public void Update(){
        SessionFactory sessionFactory;
        ServiceRegistry serviceRegistry;

        Configuration configuration = new Configuration();
        configuration.addAnnotatedClass(UserDetails.class); //<-- Here, adds the class to the Hibernate configuration
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);

        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(this);
        session.getTransaction().commit();
    }
} 
```

您绝对不想在每次要将某些内容保存到表时都构造一个新的 Hibernate Configuration 和 SessionFactory，因此将这些内容从`Update`某个地方移到 init 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:51:01.810

缺少实体的休眠映射。或者，您可以在休眠配置文件中使用。并定义 UserDetails.hbm.xml。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:20:50.557

问题是你还没有将你的类定义为hiberante。

在你`session-factory`添加这些行：

```
<property name="annotatedClasses">
    <list>
        <value>myPackage.UserDetails</value>
    </list>
</property> 
```

# asp.net-mvc - 在多租户 ASP.Net MVC3 中存储租户 ID

> ID：13913023
> 
> 赞同：2
> 
> 时间：2012-12-17T11:13:24.157
> 
> 标签：asp.net-mvc, asp.net-mvc-3, multi-tenant

我正在使用**共享数据库**方法开发 ASP.Net MVC3 多租户应用程序。我的意思是一个数据库，它与每个表中的标识符 TenantId 共享所有租户信息。

```
URL will never change 
URL will not look like tenant1.app.com or app.com/tenant1.
The reason is not to show any tenant information on URL for secure access. 
```

根据用户名和密码，我们在数据库中进行身份验证并为他获取租户 ID。我的应用程序用户表有一个名为租户 ID 的字段。在表单身份验证之后，我需要为每个后续请求维护此租户 ID。

**现在的问题是我将租户 ID 保存在哪里？会话或 Cookie 并使用全局操作属性来获取租户上下文？**

欢迎任何代码片段和建议。

# spring - 在 cloudfoundry 和 @Value 注释中处理属性的两个不同值（云和默认值）

> ID：13913026
> 
> 赞同：2
> 
> 时间：2012-12-17T11:13:37.067
> 
> 标签：spring, cloud-foundry, properties-file

我参考了`@Value`此处记录的 Spring 注释：[@Value](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html)和 Spring 配置文件。

我需要能够为给定的属性设置不同的值，例如：

```
websiteContext=http://localhost:8080/kadjoukor 
```

...根据应用程序是在本地运行还是在云上运行。我不知道如何通过`@Value("${websiteContext}")`注释来实现这一点......

处理此类问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:18:45.820

如果您使用的是 Spring 3.1 或更高版本，则可以利用 bean 配置文件和 CloudFoundry“云”配置文件根据环境加载不同的属性文件。在 Spring XML 配置文件中可能看起来像这样：

```
<beans profile="default">
    <context:property-placeholder location="default.properties"/>
</beans>
<beans profile="cloud">
    <context:property-placeholder location="cloud.properties"/>
</beans> 
```

这里有一些很好的博客文章，更详细地解释了它是如何工作的：

*   [春季 3.1 M1：统一的物业管理](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/)
*   [在 Spring 中使用 Cloud Foundry 服务：第 4 部分 – 弹簧配置文件](http://blog.springsource.org/2011/11/10/using-cloud-foundry-services-with-spring-part-4-%E2%80%93-spring-profiles/)

# javascript - CanJS 模型：attr 函数和嵌套数据

> ID：13913037
> 
> 赞同：2
> 
> 时间：2012-12-17T11:14:23.297
> 
> 标签：javascript, jquery, canjs, canjs-map

在[canJS 中](http://canjs.us/)，我可以使用 设置模型属性`person.attr('name', 'John Doe');`，但有时该属性包含嵌套数据，因此我需要执行以下操作：

```
var address = person.attr('address');
// Update country
address.country = 'USA'; 
person.attr('address', address); 
```

在 canJS 中是否有更短的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:16:09.117

```
person.attr('address.country', 'USA'); 
```

[http://canjs.us/#why_canjs-flexibility](http://canjs.us/#why_canjs-flexibility)（见“工程软木”部分）

PS：我`canjs`第一次看到，使用“canjs嵌套对象”请求在几秒钟内搜索了答案

# tomcat - wurfl：如何在 web.xml 中配置 wurfl_patch.xml？

> ID：13913039
> 
> 赞同：3
> 
> 时间：2012-12-17T11:14:25.490
> 
> 标签：tomcat, wurfl

在我的应用程序中，我在 WEB-INF 文件夹中创建了一个 wurfl_patch.xml 文件。但是还有另一个补丁文件 web_browsers_patch.xml 也存在。我将这些文件配置如下。

```
<context-param>
        <param-name>wurfl</param-name>
        <param-value>/WEB-INF/wurfl-2.3.3.zip</param-value>
    </context-param>
    <context-param>
        <param-name>wurflPatch</param-name>
        <param-value>/WEB-INF/web_browsers_patch.xml</param-value>
    </context-param> 
```

我可以按如下方式配置 wurfl_patch.xml

```
 <context-param>
        <param-name>wurflPatch</param-name>
        <param-value>/WEB-INF/wurfl_patch.xml</param-value>
    </context-param> 
```

在相同的参数名称 wurflPatch 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:14:56.373

是的，只需将 /WEB-INF/web_browsers_patch.xml 替换为 /WEB-INF/wurfl_patch.xml

# android - tabhost 中按钮按下状态的共享首选项在重新启动时不起作用

> ID：13913050
> 
> 赞同：0
> 
> 时间：2012-12-17T11:14:55.887
> 
> 标签：android, button, sharedpreferences, save, reboot

tabhost 中的共享首选项不适用于按钮按下状态。

我正在按下状态下更改按钮的背景。但是当我重新启动（关闭和打开）手机时，共享首选项不会保存状态。

变量

```
 btn_state 
```

在下面的行中总是返回 False

```
 final boolean btn_state = prefs.getBoolean("BUTTON_STATE", isclick); 
```

任何帮助总是很感激，谢谢

这是我的代码

```
private SharedPreferences prefs;
private String prefName = "MyPref";
private SharedPreferences.Editor editor;
private static final String BUTTON_STATE = "button_selected";

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    final boolean btn_state = prefs.getBoolean("BUTTON_STATE", isclick);
    editor = prefs.edit();
       if(btn_state == false){
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    }
    else if(btn_state == true){
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } 
      }

     @Override
public void onStop() {
    super.onStop();
    prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());

    editor = prefs.edit();
            editor.putBoolean("BUTTON_STATE", isclick);
    editor.commit();

}
      public static boolean isclick = false;
private View.OnClickListener listner1 = new View.OnClickListener() {

    public void onClick(View v) {

        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
            isclick = true;

            prefs = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());
            editor = prefs.edit();

            editor.putBoolean("BUTTON_STATE", isclick);
            editor.commit();
        } else {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
            isclick = false;
        }

        isclick = !isclick;
    } 
```

编辑

```
 private boolean isclick ;

           @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

      if (savedInstanceState == null) { isclick = false; }

    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);

    isclick = prefs.getBoolean("prefName", false);
    System.out.println("bool? " + isclick);

    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } 
            }

           @Override
public void onRestart() {
    super.onRestart();
    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    }
}

@Override
public void onStop() {
    super.onStop();

    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
            editor = prefs.edit();
        editor.putBoolean("prefName", true);
    editor.commit();

}

         private View.OnClickListener listner1 = new View.OnClickListener() {

    public void onClick(View v) {

        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);

            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", true);
            editor.commit();
        } else if (!isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", false);
            editor.commit();
        }

        isclick = !isclick;
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:59:43.547

我会使用 getSharedPreferences() 而不是 getDefaultSharedPreferences()。根据我在 StackOverflow 上看到的一些问题，例如[this one](https://stackoverflow.com/questions/10786172/android-getdefaultsharedpreferences)，默认首选项方法可能会出现一些问题。

您可以使用 getSharedPreferences() 更明确地指定首选项文件，这可能会帮助您解决此问题。查看 Android Developers [Shared Preferences 指南](https://developer.android.com/guide/topics/data/data-storage.html#pref)以获取代码示例和说明，如果您想尝试一下，它们应该会对您有所帮助。

您列出的代码中有几件事我不明白。您有 2 个布尔变量，onclick 和 btn_state。为什么不只使用一个？btn_state 被声明为最终状态。为什么？您已经声明了一个 BUTTON_STATE 字符串，但您没有在引用您的首选项时使用它，您使用的是字符串“BUTTON_STATE”。

# javascript - 多个动态输入文本javascript

> ID：13913051
> 
> 赞同：2
> 
> 时间：2012-12-17T11:14:57.380
> 
> 标签：javascript

我无法使用 javascript 创建多个输入文本。

我的观点是每次之前的输入完成时都会创建一个新的输入文本。（父母？）

我有一些组合框的代码，但这次我只需要输入文本框。

我怎样才能做到这一点 ？

我找到了这段代码：

```
<script type="text/javascript">
function addInput()
{
    var x = document.getElementById("inputs");
    x.innerHTML += "<input type=\"text\" />";
}
</script>

<input type="button" onmousedown="addInput();" />
<div id="inputs"></div> 
```

但是对于我的问题按钮已经过时了。

我认为我的事件触发器将围绕这个“当用户单击输入文本框并且它是！=空白它创建一个新的”。

我可能需要一些 ID 来识别每个输入文本框。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:33:22.590

**[JSBIn 演示](http://jsbin.com/ojagej/4/)**

猜猜这有帮助：

```
 <div id="myDiv">
        <input type="text" id="txt_1" onkeydown="newTextBox(this)" />
   </div>

<script type="text/javascript">

function newTextBox(element){
   if(!element.value){
       element.parentNode.removeChild( element.nextElementSibling);
       return;
   }
   else if(element.nextElementSibling)
       return;
    var newTxt = element.cloneNode();
    newTxt.id = 'txt_'+( parseInt( element.id.substring(element.id.indexOf('_')+1)) + 1);
    newTxt.value='';
    element.parentNode.appendChild(newTxt);
}  

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:36:44.557

HTML 代码：

```
<div id="inputcontainer">
    <input type="text" name="input0" id="input0" onkeyup="addInput();" />
</div> 
```

和 Javascript：

```
var currentindex = 0;
function addInput(){
    var lastinput = document.getElementById('input'+currentindex);
   if(lastinput.value != ''){
        var container = document.getElementById('inputcontainer');
        var newinput = document.createElement('input');
        currentindex++;
        newinput.type = "text";
        newinput.name = 'input'+currentindex;
        newinput.id = 'input'+currentindex;
        newinput.onkeyup = addInput;
        container.appendChild(newinput);
   }
} 
```

仅当最后一个输入不为空时，这才会将新输入添加到列表中。

[http://jsfiddle.net/HJbgS/](http://jsfiddle.net/HJbgS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:28:28.557

查看文本输入字段中的`onchange`事件。您可以使用它，就像`onmousedown`在按钮上使用一样。

有关示例，请参见[http://www.w3schools.com/jsref/event_onchange.asp 。](http://www.w3schools.com/jsref/event_onchange.asp)

然后，在您的`addInput()`函数中，您应该检查前一个文本字段的输入是否为 != ""。

# silverlight - 调整 Silverlight 应用程序的大小以适合窗口

> ID：13913056
> 
> 赞同：0
> 
> 时间：2012-12-17T11:15:28.210
> 
> 标签：silverlight, silverlight-4.0, dynamics-crm-2011

我创建了一个放置在实体表单上的 silverlight 应用程序，目前它已设置为固定宽度。我所追求的是应用程序，包括其中的数据网格和寻呼机，以拉伸到窗口的宽度。

到目前为止，我一直找不到任何有用的东西，所以我希望有人能够帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:51:14.130

您应该尝试将列宽和行高设置为“自动”，并且您应该尝试 StackPanal 来解决此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:06:53.923

尝试在您的 silverlight 页面中使用 Stackpanel 并将所有控件放在 stackpanel 中并将其宽度设置为“自动”。

# vhdl - 整数递增的永无止境的综合

> ID：13913057
> 
> 赞同：1
> 
> 时间：2012-12-17T11:15:33.233
> 
> 标签：vhdl, fpga, synthesize

我有一段可以编译的 VHDL 代码，但是当我尝试合成它时我卡住了，这意味着合成永远不会结束，我在控制台中有：

> 分析图书馆工作中的实体解释器（架构）。

我试图理解为什么，但我不能。我所知道的是，如果我评论这条线，`CPT_PAN <= CPT_PAN - 1;`那么我突然之间就可以综合了。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity Interpretor is
    Port (SCAN_CODE : IN STD_LOGIC_VECTOR(7 downto 0));
end Interpretor;

architecture Behavioral of Interpretor is
Signal CPT_PAN : Integer range 0 to 255 := 0;
begin
process(SYS_CLK)
begin
if (SYS_CLK'EVENT and SYS_CLK = '1') then
    if SCAN_CODE = "01101011" then 
        if CPT_PAN /= 0 then    
            CPT_PAN <= CPT_PAN - 1; -- Line to be commented to synthesize
        end if;
    end if;
end if;
end process;     
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:33:31.547

哪个合成工具？知道会很有用。

Xilinx XST 14.3 只需报告`<sys_clk> is not declared.`并退出。

为它添加一个输入端口，它可以正确合成，不产生任何硬件！

添加输出，

```
entity Interpretor is
Port (
    SYS_CLK   : in std_logic;
    SCAN_CODE : IN STD_LOGIC_VECTOR(7 downto 0);
    Zero      : Out Boolean
 );
end Interpretor; 
```

和建筑的一条线

```
Zero <= CPT_Pan = 0; 
```

它产生的几乎是你所期望的。由于 CPT_Pan 被初始化为 0，它仍然优化到零，并且该过程根本不处理这种情况。

我敢问你是否在尝试合成之前模拟了这个？

# database - cakephp 将图像上传到文件夹并在数据库中存储参考

> ID：13913062
> 
> 赞同：0
> 
> 时间：2012-12-17T11:15:54.290
> 
> 标签：database, cakephp

在我正在开发的 cakephp 2.0 应用程序中，我需要一个具有“正常”数据的表和一个具有存储图像的表之间的 HABTM 关系。

经过搜索，我得出结论，实现这一点的最佳方法是将图像存储在应用程序的目录中，并在“图像”表中对每个图像的 url 进行引用，以便稍后显示它们应用程序。请，如果您认为这不是最好的实现，请说出来。

对此进行研究，我想知道我该怎么做，我的意思是，我如何将图像存储在目录中并将引用存储在与控制器相同的功能中的数据库中？我做了一些搜索，但我发现只上传到文件夹或只将图像存储在数据库中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:04:32.360

我的 FileStorage 插件[https://github.com/burzum/FileStorage](https://github.com/burzum/FileStorage)结合[https://github.com/CakeDC/Imagine](https://github.com/CakeDC/Imagine)插件将完全满足您的需求。

所有文件数据都存储在数据库中，文件本身存储在本地文件系统或任何其他适配器中。它还在上传后处理生成图像的版本。

阅读 readme.md，它确实在做你想做的事，我已经在不同的项目中使用它，也用于画廊和用户头像。

# checkbox - 在 javaFX 2.2 表视图中从数据库中动态添加复选框和记录

> ID：13913063
> 
> 赞同：1
> 
> 时间：2012-12-17T11:15:54.077
> 
> 标签：checkbox, tableview, javafx-2

我正在编写一个带有表视图的客户端-服务器 java FX 应用程序。我在服务器端有一个数据库，我希望从客户端将表列和表记录从数据库动态加载到表视图中。到目前为止，我已经找到了许多关于如何成功执行此操作的提示。问题是我想在表格中添加一个“选择”列，这是一个复选框。下面是我的代码。

```
private void AddToTableRecordsFromDB(TabPane tp){
    tableview = (TableView) tp.lookup("#table");
    ObservableList<Object> data = null;
    try {
        String[] columnNames = (String[]) Login.Login.in.readObject();
        ArrayList<ArrayList> al = (ArrayList<ArrayList>) Login.Login.in.readObject();
        /**********************************
         * TABLE COLUMN ADDED DYNAMICALLY *
         **********************************/
                TableColumn select = new TableColumn("Select");
                select.setCellValueFactory(new PropertyValueFactory("invited"));
                select.setCellFactory(new Callback<TableColumn<ObservableValue, Boolean>, TableCell<ObservableValue, Boolean>>() {

                    public TableCell<ObservableValue, Boolean> call(TableColumn<ObservableValue, Boolean> p) {
                        return new CheckBoxTableCell<ObservableValue, Boolean>();
                    }
                });
                tableview.getColumns().add(select);

        for(int i=0 ; i<columnNames.length; i++){
            //use non property style for making dynamic table
            final int j = i;  
            TableColumn col;
                col = new TableColumn(columnNames[i]);
                col.setCellValueFactory(new Callback<CellDataFeatures<ObservableList,String>,ObservableValue<String>>(){                   
                    @Override
                    public ObservableValue<String> call(CellDataFeatures<ObservableList, String> param) {                                                                                             
                        return new SimpleStringProperty(param.getValue().get(j).toString());                     
                    }                   
                });                  

            tableview.getColumns().add(col);
        }
        /********************************
         * Data added to ObservableList *
         ********************************/
        data = FXCollections.observableArrayList();

        for(int i=0 ; i<al.size(); i++){
            ObservableList<ArrayList> row = FXCollections.observableArrayList(al.get(i));
            data.add(row);
        }
        //FINALLY ADDED TO TableView
        tableview.setItems(data);

    } catch (IOException | ClassNotFoundException ex) {
        Logger.getLogger(Developer_Main.class.getName()).log(Level.SEVERE, null, ex);
    } 

} 
```

我从 JavaFX2.0 Ensemble 中获取了 CheckBoxTableCell 类。数据库成功加载到表视图中，并且创建了我的“选择”列，但我在行中看不到任何复选框。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:49:48.367

您说您正在使用“非属性样式”动态添加列，并且您的表格视图由列表项列表组成。我猜那些数据结构模型中没有`getInvited()`方法。但是通过设置`select.setCellValueFactory(new PropertyValueFactory("invited"));`表格列将寻找该方法。使用有效值设置单元格值工厂。

**编辑**：我没有测试，但你可以试试下面的代码。

```
select.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<ObservableList, String>, ObservableValue<String>>() {
    public ObservableValue<String> call(TableColumn.CellDataFeatures<ObservableList, String> p) {
        return new SimpleStringProperty(p.getValue().get(0).toString());
    }
}); 
```

注意`get(0)`. `readObject()`也就是说，如果返回至少 1 个项目会更好。另一个注意事项是`CheckBoxTableCell`需要一个回调，它返回`ObservableProperty<Boolean>`并双向绑定，所以我认为最好实现你自己的包含复选框的单元工厂，关于你的数据模型。

# jquery - jquery ajax 赋值

> ID：13913066
> 
> 赞同：0
> 
> 时间：2012-12-17T11:16:13.513
> 
> 标签：jquery, jquery-callback

我对 jquery ajax 回调有一个奇怪的情况

```
var isOk = false;

 CheckStoreAvailability(store, function (result) {
            isOk = result;
             alert(result);  >> show message true    
});

alert(isOk ); 
```

无论CheckStoreAvailability 中的返回值分配给 isOk 什么，它总是显示**false ！**

我现在被困住了。请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:17:52.540

您的`second`警报被执行`before`，`CheckStoreAvailability`由于异步调用而被调用。这就是您没有获得更新值的原因。

[**检查this post**](https://stackoverflow.com/questions/13648995/how-to-grab-return-value-from-an-ajax-call)中的答案如何使用函数调用`done()`，您可以相应地更改您的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:18:15.580

AJAX 是**异步**的，因此该`alert(isOk);`行将在 AJAX 调用完成之前执行，并且通过扩展，在 AJAX 请求回调函数更改值之前执行。

如果您想使用该值，请在处理来自 AJAX 调用的响应的函数中执行此操作。

# grails - 结合 Grails 插件

> ID：13913070
> 
> 赞同：0
> 
> 时间：2012-12-17T11:16:37.333
> 
> 标签：grails, grails-plugin, grails-2.0

我可以将以下插件组合在一起还是有任何不兼容性？如何测试插件是否可以很好地协同工作？

```
 runtime ":zipped-resources:1.0"
    runtime ":cached-resources:1.0"
    runtime ":yui-minify-resources:0.1.4"
    compile ":cache-headers:1.1.5"
    compile ':cache:1.0.1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:33:16.953

前四个都是相关的，因为它们基于[http://grails.org/plugin/resources](http://grails.org/plugin/resources)插件，所以你不应该有问题。不过，这些版本可能很重要。

该`cache`插件完全不相关，因为它与静态资源无关。它缓存服务和控制器方法调用、GSP 片段和模板内容。

# jqgrid - 如何自定义标题jqgrid

> ID：13913071
> 
> 赞同：4
> 
> 时间：2012-12-17T11:16:55.107
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter

我想像这样创建 jqGrid ![在此处输入图像描述](../Images/235a5eeaa6fa2c12daa45ba123cda847.png)
我可以划分身体 jqGrid 我写这段代码

```
var data = [[1, 45, "E123", "1/1/11", "Done", 100], [2, 46, "E124", "1/12/11", "Done", 100]];

$("#grid").jqGrid({
    datatype: "local",
    height: 250,
    colNames: ["SNO", "OrderID", "Location", "Date", "Status", "Amount"],
    colModel: [{
        name: 'SNO',
        index: 'SNO',
        width: 60},
    {
        name: 'OrderID',
        index: 'OrderID',
        width: 90,
        formatter:orderFmatter},
    {
        name: 'Location',
        index: 'Location',
        hidden: true},
    {
        name: 'Date',
        index: 'Date',
        width: 80,
        formatter:dateStatusFmatter},
    {
        name: 'Status',
        index: 'Status',
        width: 80,
        hidden: true},
    {
        name: 'Amount',
        index: 'Amount',
        width: 80}
    ],
    caption: "Stack Overflow Example",
});

var names = ["SNO", "OrderID", "Location", "Date", "Status", "Amount"];
var mydata = [];
for (var i = 0; i < data.length; i++) {
    mydata[i] = {};
    for (var j = 0; j < data[i].length; j++) {
        mydata[i][names[j]] = data[i][j];
    }
}

for (var i = 0; i <= mydata.length; i++) {
    $("#grid").jqGrid('addRowData', i + 1, mydata[i]);
}

function orderFmatter( cellvalue, options, rowObject )
{
    return "<div>" + cellvalue + "</div><hr /><div>" + rowObject.Location + "</div>";
}

function dateStatusFmatter( cellvalue, options, rowObject )
{
    return "<div>" + cellvalue + "</div><hr /><div>" + rowObject.Status+ "</div>";
} 
```

此代码创建此网格
![在此处输入图像描述](../Images/2f91fdf22f19633f0301ed3e3bcf4225.png)

在这个网格中，我想要像正文网格一样的分页眉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:39:32.300

jqGrid 支持[标题分组](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:groupingheadar)。如果您只需要在列标题中放置多行文本，您可以以更简单的方式实现这一点。

中的值`colNames`可以是 HTML 片段。所以你应该把你需要的代码放在相应的项目中，`colNames`并添加额外的 CSS，强制使用`auto`列标题的高度，而不是 jqGrid 默认使用的固定高度。

[演示](http://www.ok-soft-gmbh.com/jqGrid/MultilineTextInColumnHeaders.htm)在最后一列的列标题中放置 HTML 片段

```
<div style="height: auto; padding: 4px 0;">
    <span>Shipped</span><hr /><span>via</span>
</div> 
```

并额外使用 CSS

```
.ui-jqgrid .ui-jqgrid-labels .ui-th-column>div {height: auto} 
```

结果得到如下图所示的网格

![在此处输入图像描述](../Images/cb7864e06aa3c600221c3c3878b26ba6.png)

# java - 池或不池 java 加密服务提供者

> ID：13913075
> 
> 赞同：11
> 
> 时间：2012-12-17T11:17:07.840
> 
> 标签：java, pool

# 解决方案

*   MessageDigest => 根据需要经常创建新实例
*   KeyFactory => 使用单个共享实例
*   SecureRandom => 使用[StackObjectPool](http://commons.apache.org/proper/commons-pool/apidocs/org/apache/commons/pool/impl/StackObjectPool.html)
*   密码 => 使用[StackObjectPool](http://commons.apache.org/proper/commons-pool/apidocs/org/apache/commons/pool/impl/StackObjectPool.html)

# 问题

**在编写安全框架**时，我经常面临两难境地：“汇集或不汇集”

基本上这个问题分为两个“组”：

1.  第 1 组：`SecureRandom`因为调用`nextBytes(...)`是同步的，它可能成为 WebApp / 多线程应用程序的瓶颈

2.  第 2 组：加密服务提供商，如`MessageDigest`, `Signature`, `Cipher`, `KeyFactory`, ... （因为`getInstance()`? 的成本）

你有什么意见 ？

你对这些问题有什么习惯？

# 编辑 09/07/2013

我终于花时间自己测试了@Qwerky`Share`课程，我发现结果相当……令人惊讶。

这门课缺少我主要关心的问题：像[GenericObjectPool](http://commons.apache.org/proper/commons-pool/apidocs/org/apache/commons/pool/impl/GenericObjectPool.html)或[StackObjectPool](http://commons.apache.org/proper/commons-pool/apidocs/org/apache/commons/pool/impl/StackObjectPool.html)这样的池。

因此，我对课程进行了重新设计以测试所有 4 种替代方案：

*   具有同步[要点的单个共享实例](https://gist.github.com/GrmpCerber/5956460)
*   每个循环内的新实例（我对可以将摘要创建拉到循环外的情况不感兴趣）[要点](https://gist.github.com/GrmpCerber/5956464)
*   GenericObjectPool：[要点](https://gist.github.com/GrmpCerber/5956444)
*   StackObjectPool：[要点](https://gist.github.com/GrmpCerber/5956417)

我不得不将循环数降低到 100000，因为 1M 占用池的时间太多。

我还在`Thread.yield()`每个循环的末尾添加了一个，以使负载具有更好的形状。

结果（累积运行时间）：

*   信息摘要
    *   新实例：420 秒
    *   单实例：550 秒
    *   StackObjectPool : 800 秒
    *   通用对象池：1900 秒
*   密钥工厂
    *   新实例：400s
    *   单实例：350 秒
    *   StackObjectPool : 2900 秒
    *   通用对象池：3500 秒
*   安全随机
    *   StackObjectPool : 1600 秒
    *   新实例：2300 秒
    *   通用对象池：2300s
    *   单实例：2800 秒
*   密码
    *   StackObjectPool : 2800 秒
    *   通用对象池：3500 秒
    *   单实例：5100 秒
    *   新实例：8000 秒

# 结论

对于 MessageDigest 和 KeyFactory，池是性能杀手，甚至比具有同步瓶颈的单个实例还要糟糕，而对于 SecureRandom 和 Cipher，它们确实很有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:45:48.140

如果您让 100 个线程访问一个共享`MessageDigest`并让它们分别计算 1,000,000 个哈希值，那么在我的机器上，第一个线程在 70,160 毫秒内完成，最后一个线程在 98,748 毫秒内完成。

如果线程每次都创建一个新实例`MessageDigest`，那么第一个线程在 43,392 毫秒和最后一个 58,691 毫秒内完成。

**编辑：**
事实上，在这个例子中，只有两个线程，创建新实例的例子运行得更快。

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Share {

  final byte[] bytes = new byte[100];
  final MessageDigest sharedDigest;
  final ExecutorService pool;
  int threads = 100;

  Share() throws NoSuchAlgorithmException {
    sharedDigest = MessageDigest.getInstance("MD5");
    pool = Executors.newFixedThreadPool(threads);
  }

  void go() {

    for (int i=0; i<threads; i++) {
      pool.execute(new Runnable() {
        public void run() {
          long start = System.currentTimeMillis();
          for (int i=0; i<1000000; i++) {
            /*
            synchronized (sharedDigest) {
              sharedDigest.reset();
              sharedDigest.update(bytes);
              sharedDigest.digest();
            }*/
            try {
              MessageDigest digest = MessageDigest.getInstance("MD5");
              digest.reset();
              digest.update(bytes);
              digest.digest();
            } catch (Exception ex) {
              ex.printStackTrace();
            }
          }
          long end = System.currentTimeMillis();
          System.out.println(end-start);
          pool.shutdown();
        }
      });
    }

  }

  public static void main(String[] args) throws Exception {
    Share share = new Share();
    share.go();
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:26:52.260

这个测试似乎有利于缓存

```
long t0 = System.currentTimeMillis();
byte[] bytes = new byte[100];
MessageDigest md = MessageDigest.getInstance("MD5");
for(int i = 0; i < 1000000; i++) {
    //MessageDigest md = MessageDigest.getInstance("MD5");
    md.reset();
    md.update(bytes);
    md.digest();
}
System.out.println(System.currentTimeMillis() - t0); 
```

当 md 在循环之外时，它打印 579，当在循环内时 - 953。

# android - 按光标在列表视图中显示数据

> ID：13913078
> 
> 赞同：0
> 
> 时间：2012-12-17T11:17:32.577
> 
> 标签：android, listview, cursor

我编写了一个程序，可以通过光标显示存储在列表视图中的数据库中的数据。但在运行时它让我强制关闭。我读了 logcat，但我不明白这个错误是什么。我给出了我的代码和 logcat。请帮助我

current_cart 代码：

```
public class current_cart extends ListActivity {

    private ListView mainListView = null;
    CustomSqlCursorAdapter adapter = null;
    private SqlHelper dbHelper = null;
    private Cursor currentCursor = null;

    private ListView listView = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.current_cart);

        if (this.dbHelper == null) {
            this.dbHelper = new SqlHelper(this);

        }

        listView = getListView();
        listView.setItemsCanFocus(false);
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        //listView.setClickable(true);

        Button btnClear = (Button) findViewById(R.id.btnClear);
        btnClear.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Toast.makeText(getApplicationContext(),
                        " You clicked Clear button", Toast.LENGTH_SHORT).show();
              //  ClearDBSelections();
            }
        });

        new SelectDataTask().execute();

        this.mainListView = getListView();

        mainListView.setCacheColorHint(0);

    }

    @Override
    protected void onRestart() {
        super.onRestart();
        new SelectDataTask().execute();
    }

    @Override
    protected void onPause() {

        super.onPause();
        this.dbHelper.close();
    }

  //  protected void ClearDBSelections() {

      //  this.adapter.ClearSelections();

  //  }

    private class SelectDataTask extends AsyncTask<Void, Void, String> {

        protected String doInBackground(Void... params) {

            try {

                current_cart.this.dbHelper.createDatabase(dbHelper.dbSqlite);
                current_cart.this.dbHelper.openDataBase();

                current_cart.this.currentCursor = current_cart.this.dbHelper
                        .getCursor();

            } 
            catch (SQLException sqle) 
            {

                throw sqle;

            }
            return null;
        }

        // can use UI thread here
        protected void onPostExecute(final String result) {

            startManagingCursor(current_cart.this.currentCursor);
            int[] listFields = new int[] { R.id.txtTitle,R.id.txtprice };
            String[] dbColumns = new String[] { SqlHelper.COLUMN_TITLE,SqlHelper.COLUMN_NAME_DESC };

            current_cart.this.adapter = new CustomSqlCursorAdapter(
                    current_cart.this, R.layout.single_item,
                    current_cart.this.currentCursor, dbColumns, listFields,
                    current_cart.this.dbHelper);
            setListAdapter(current_cart.this.adapter);

        }
    }

} 
```

CustomSqlCursorAdapter 代码：

```
public class CustomSqlCursorAdapter extends SimpleCursorAdapter {
    private Context mContext;

    private SqlHelper mDbHelper;
    private Cursor mCurrentCursor;

    public CustomSqlCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, SqlHelper dbHelper) {
        super(context, layout, c, from, to);
        this.mCurrentCursor = c;
        this.mContext = context;
        this.mDbHelper = dbHelper;

    }

    public View getView(int pos, View inView, ViewGroup parent) {
        View v = inView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.single_item, null);
        }

        if (!this.mCurrentCursor.moveToPosition(pos)) {
            throw new SQLException("CustomSqlCursorAdapter.getView: Unable to move to position: "+pos);
        }

        CheckBox cBox = (CheckBox) v.findViewById(R.id.bcheck);

        cBox.setTag(Integer.valueOf(this.mCurrentCursor.getInt(0)));

        cBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            }
        });

        TextView txtTitle = (TextView) v.findViewById(R.id.txtTitle);
        txtTitle.setText(this.mCurrentCursor.getString(this.mCurrentCursor
                .getColumnIndex(SqlHelper.COLUMN_TITLE)));
        TextView txtprice = (TextView) v.findViewById(R.id.txtprice);
        txtprice.setText(this.mCurrentCursor.getString(this.mCurrentCursor
                .getColumnIndex(SqlHelper.COLUMN_NAME_DESC)));

        return (v);
    }

} 
```

SqlHelper 代码：

```
 public class SqlHelper extends SQLiteOpenHelper {
        private static final String DATABASE_PATH = "/data/data/com.example.bb/databases/";

        public static final String DATABASE_NAME = "ll";

        public static final String TABLE_NAME = "w";
        public static final int ToDoItems_VERSION = 1;

       // public static final String COLUMN_ID = "_id";             
        public static final String COLUMN_TITLE = "Good_Name";         
       public static final String COLUMN_NAME_DESC = "Good_UnitPrice";

        public SQLiteDatabase dbSqlite;
        private Context mContext;

        public SqlHelper(Context context) {
            super(context, DATABASE_NAME, null, 1);
            mContext = context;
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            createDB(db);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w("SqlHelper", "Upgrading database from version " + oldVersion
                    + " to " + newVersion + ", which will destroy all old data");

            db.execSQL("DROP TABLE IF EXISTS w;");

            createDB(db);
        }

        public void createDatabase(SQLiteDatabase db) {
            createDB(db);
        }

        private void createDB(SQLiteDatabase db) {
            if (db == null) {
                db = mContext.openOrCreateDatabase(DATABASE_NAME, 0, null);
            }

            db.execSQL("CREATE TABLE IF NOT EXISTS w (Cart_ID INTEGER, Good_Name VARCHAR(50),Good_UnitPrice INTEGER (10),Quantity INTEGER);");
            db.setVersion(ToDoItems_VERSION);

        }

        public void openDataBase() throws SQLException {
            String myPath = DATABASE_PATH + DATABASE_NAME;

            dbSqlite = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READWRITE);
        }

        @Override
        public synchronized void close() {
            if (dbSqlite != null)
                dbSqlite.close();

            super.close();
        }

        public Cursor getCursor() {
            SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

            queryBuilder.setTables(TABLE_NAME);

            String[] asColumnsToReturn = new String[] {COLUMN_TITLE,COLUMN_NAME_DESC};

            Cursor mCursor = queryBuilder.query(dbSqlite, asColumnsToReturn, null,
                    null, null, null, null);

            return mCursor;
        }

       // public void clearSelections() {
         //   ContentValues values = new ContentValues();
          //  values.put(COLUMN_SELECTED, 0);
          //  this.dbSqlite.update(SqlHelper.TABLE_NAME, values, null, null);
       // }
    } 
```

我的日志猫：

```
12-19 14:36:02.999: E/AndroidRuntime(436): FATAL EXCEPTION: main
12-19 14:36:02.999: E/AndroidRuntime(436): java.lang.IllegalArgumentException: column '_id' does not exist
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:297)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.widget.CursorAdapter.init(CursorAdapter.java:169)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.widget.CursorAdapter.<init>(CursorAdapter.java:117)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.widget.ResourceCursorAdapter.<init>(ResourceCursorAdapter.java:52)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:78)
12-19 14:36:02.999: E/AndroidRuntime(436):  at com.example.nfc.CustomSqlCursorAdapter.<init>(CustomSqlCursorAdapter.java:28)
12-19 14:36:02.999: E/AndroidRuntime(436):  at com.example.nfc.current_cart$SelectDataTask.onPostExecute(current_cart.java:110)
12-19 14:36:02.999: E/AndroidRuntime(436):  at com.example.nfc.current_cart$SelectDataTask.onPostExecute(current_cart.java:1)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.os.AsyncTask.finish(AsyncTask.java:590)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.os.AsyncTask.access$600(AsyncTask.java:149)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:603)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.os.Looper.loop(Looper.java:126)
12-19 14:36:02.999: E/AndroidRuntime(436):  at android.app.ActivityThread.main(ActivityThread.java:3997)
12-19 14:36:02.999: E/AndroidRuntime(436):  at java.lang.reflect.Method.invokeNative(Native Method)
12-19 14:36:02.999: E/AndroidRuntime(436):  at java.lang.reflect.Method.invoke(Method.java:491)
12-19 14:36:02.999: E/AndroidRuntime(436):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
12-19 14:36:02.999: E/AndroidRuntime(436):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
12-19 14:36:02.999: E/AndroidRuntime(436):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:21:50.793

游标适配器要求您为其提供的游标包含一`_id`列，如文档中所述：

> 游标必须包含名为“_id”的列，否则此类将不起作用。

您需要将这样的列添加到您的表中。它`id`用于所有提及 id 的方法（onItemSelected、getItemId、...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:23:20.197

您应该在 SimpleCursorAdapter 的列选择列表中包含列“_id”

# maven - 从多个 repo 获取依赖项

> ID：13913082
> 
> 赞同：0
> 
> 时间：2012-12-17T11:17:44.470
> 
> 标签：maven

是否可以使用多个插件库在 Maven 中下载依赖项？

我将我的 settings.xml 配置为从自定义 repo 获取依赖项，因此，我无法从主 maven repo 服务器获取依赖项。

这可以设置多个插件回购吗？

这是我到目前为止为我的自定义仓库设置的内容：

```
</profiles>
  <profile>
    <id>custom-config</id>
    <repositories>
      <repository>
        <id>custom-snapshots</id>
        <name>customSnapshots</name>
        <releases>
          <enabled>false</enabled>
          <updatePolicy>always</updatePolicy>
          <checksumPolicy>warn</checksumPolicy>
        </releases>
        <snapshots>
          <enabled>true</enabled>
          <updatePolicy>never</updatePolicy>
          <checksumPolicy>fail</checksumPolicy>
        </snapshots>
        <url>http:/custom/repo</url>
        <layout>default</layout>
      </repository>
    </repositories>

    <pluginRepositories>
      <pluginRepository>
        <id>custom-plugins</id>
        <urlhttp:/custom/repo/public-snapshots</url>
        <releases>
          <enabled>true</enabled>
        </releases>
        <snapshots>
          <enabled>true</enabled>
        </snapshots>
      </pluginRepository>
    </pluginRepositories>
  </profile>
</profiles> 
```

我没有在这里包含依赖项，但是我无法提取和解决一些库依赖项。

我使用的 maven 存储库是[http://mvnrepository.com/](http://mvnrepository.com/)，但我没有关于确切的存储库设置的详细信息，可用作我为自定义设置定义的存储库设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:10:37.633

默认的 Maven 存储库称为“中央”。它的网址是：[http](http://repo1.maven.org/maven2/) ://repo1.maven.org/maven2/或现在：[http ://repo.maven.apache.org/maven2/](http://repo.maven.apache.org/maven2/)

但通常配置为mirrorOf。如果您在 settings.xml 中创建一个存储库并为其提供 id *central" 它将替换它。

所以我想知道为什么你不能从那里解决依赖关系。通常在 settings.xml 中添加存储库不会成为中心。

您可以执行`mvn help:effective-settings`并`mvn help:effective-pom`查看 xml 中的所有存储库、配置文件和 mirrorOf 元素吗？中央应该在那里。

我还建议使用 Maven 代理，如 Nexus 或 Artifactory。它简化了公司内部的许多事情。

# c++ - 是否可以从 file.lib 中提取目标文件？

> ID：13913083
> 
> 赞同：1
> 
> 时间：2012-12-17T11:17:47.240
> 
> 标签：c++, linux, windows

> **可能重复：**
> [将 file.lib 构建为可在 linux 上使用的 file.a](https://stackoverflow.com/questions/13877196/build-a-file-lib-to-a-file-a-usable-on-linux)

正如我在标题中所说，是否可以从 file.lib 中提取目标文件。这样做的目的是创建file.a，这样我就可以编译从windows移植到linux的移植file.cpp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:23:13.943

您可以使用`lib /extract`调用库管理器并从库中提取目标文件。但是，请注意，您不能只将 Windows 生成的目标文件打包到`.a`存档中并期望它们在 Linux 上工作。跨平台移植时，您必须*从源代码重新编译。*

# javascript - 如何在 Mustache.js 中加载 jquery-latitude-longitude-picker-gmaps

> ID：13913088
> 
> 赞同：0
> 
> 时间：2012-12-17T11:18:02.503
> 
> 标签：javascript, jquery, google-maps, mustache, jquery-gmap3

我有一个 Web 应用程序，在其中使用 Mustache.js 模板库。我正在使用**HospitalListTemplate**加载医院列表，因为在此之后的代码`$(this.el).html(Mustache.to_html(HospitalListTemplate, { 'data': this.model.toJSON(), 'longitude': lon, 'latitude': lat, 'isEdit': false }));`中我正在调用**mapLoad()**函数，该函数使用[jquery-latitude-longitude-picker-gmaps](https://github.com/wimagguc/jquery-latitude-longitude-picker-gmaps)`function mapLoad(){ $(".gllpLatlonPicker").each(function () { (new GMapsLatLonPicker()).init($(this)); }); }`加载 Google 地图我的问题是地图没有加载到模板中. 在 chrome 控制台中调试给出**$(".gllpLatlonPicker")**因为ie 模板不可用于地图加载，因此无法加载地图。有没有办法先完全加载模板然后调用 mapLoad() 函数??**`[]`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:38:23.273

如果您使用 Places API 来获取医院列表，则 Places API 结果对象将包括以下格式的 lat、lon：

```
 "geometry" : {
     "location" : {
       "lat" : -33.8669710,
       "lng" : 151.1958750
     } 
```

其中“place”是医院列表），您可以传递 place.geometry.location 对象，或调用 place.geometry.location.lat() 和 place.geometry.location.lng() 以获取 lat、lon 值.**

# javascript - 使用 JScript 向 Dynamics CRM 电子邮件添加附件

> ID：13913091
> 
> 赞同：0
> 
> 时间：2012-12-17T11:18:06.440
> 
> 标签：javascript, dynamics-crm-2011, jscript

如何在 Dynamics CRM 2011 中向电子邮件添加附件？
附件是 Base64 PNG。
我需要使用吗

```
ActivityMimeAttachmentSet? 
```

我想使用 JScript 将附件显示为内联图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:31:24.403

你需要使用**mimeType = "image/png"**

# php - PHP：过滤多维 POST 数组

> ID：13913094
> 
> 赞同：1
> 
> 时间：2012-12-17T11:18:13.427
> 
> 标签：php, post, multidimensional-array, filter

我有以下 POST 数组：

```
[projects] => Array (
        [0] => Array
            (
                [description] => description 1
                [path] => url 1
            )

        [1] => Array
            (
                [description] => description2
                [path] => url 2
            )

        [2] => Array
            (
                [description] => description 3
                [path] => url 3
            )

    ) 
```

我希望用`filter_var_array($_POST, $this -> fields);`where fields =过滤它`array('projects' => array('filter' => FILTER_CALLBACK,'flags' => FILTER_FORCE_ARRAY, 'options' => array($this, 'cleanProjects'));`

但是，传递给 cleanProjects 函数的值并不是包含描述和路径的数组，而是将所有的值 1 一个一个地传递（所以该方法被调用了六次，1 代表描述 1，1 代表 url 1，1 代表描述2等）

如何让过滤函数将整个对象传递给回调函数？所以它会为项目中的每个对象/数组调用 cleanProjects（在这个例子中是 3 次）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:10:05.640

您现在使用的称为[数组变量的间接方法调用](https://wiki.php.net/rfc/indirect-method-call-by-array-var)，它仅支持`PHP 5.4 above`

解决方案 1：升级您的 PHP 版本，您的代码无需修改即可工作

```
 'options' => array($this, 'cleanProjects')));  
                         |_______________________|
                                      +------------ Indirect Method call by array 
```

解决方案2：只需使用[闭包](http://php.net/manual/en/functions.anonymous.php)

```
 $self = $this ;
    $options = function($args) use ($self)
    {
        $self->cleanProjects($args);
    };

    $this->fields = array('projects' => array(
            'filter' => FILTER_CALLBACK,
            'flags' => FILTER_FORCE_ARRAY, 
            'options' => $options));   // add the closure 
    $var = filter_var_array($_POST, $this -> fields); 
```

# java - 为什么引用类型存储在堆中

> ID：13913099
> 
> 赞同：8
> 
> 时间：2012-12-17T11:18:18.997
> 
> 标签：java, jvm, heap-memory

我确实知道在 Java 中（也可能在 .net 中），原语存储在堆栈中，而引用类型存储在堆中。

我的问题是我不了解这种行为的过程/缺点。为什么我们不能引用堆栈内的内存位置呢？. 我在谷歌上搜索时找不到合适的解释（也许我很烂），但如果你们能提供一些见解，我将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T11:23:14.033

> 我确实知道在 Java 中（也可能在 .net 中），原语存储在堆栈中，而引用类型存储在堆中。

不，它**不**取决于它是原语还是参考。这取决于使用堆栈还是堆的**范围。**局部变量在栈上分配，成员变量在对象实例化时在堆上分配。

另请参阅[Java 原语是在堆栈上还是在堆上？](https://stackoverflow.com/questions/3646632/does-the-java-primitives-go-on-the-stack-or-the-heap)

> 我的问题是我不了解这种行为的过程/缺点。

只要您的方法正在执行，存储在堆栈中的数据就会一直存在。一旦方法完成，堆栈上分配的所有数据都将被删除。存储在堆上的数据只要不被丢弃（在 Java 的情况下，由垃圾收集器在后台完成）就可以存活。在 C/C++ 等其他语言中，您明确需要删除/释放在堆上分配的数据。

考虑以下代码片段：

```
String someMethod() {
  int i = 0;
  String result = "Hello";

  i = i + 5;
  return result;
} 
```

在这里，在堆栈上创建了一个基元 ( `int i`)，并对其进行了一些计算。一旦方法完成，`i`就不能再访问，它的值就丢失了。引用基本上也是如此`result`：引用是在栈上分配的，而 Object（在这种情况下是 String 对象）是在堆上分配的。通过将引用作为返回值返回，它所引用的对象仍然可以在方法之外使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T11:27:19.040

您通常不能将引用类型存储在堆栈上，因为堆栈框架在方法返回时被破坏。如果您保存了对对象的引用，以便在方法完成后可以取消引用，那么您将取消引用不存在的堆栈位置。

HotSpot JVM 可以执行*逃逸分析*，如果它确定一个对象不可能逃逸方法范围，它实际上会在堆栈上分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:24:33.080

> 其中引用类型存储在堆上。

我不知道那部分到底是什么意思，但请记住，只有对象存储在 上`heap`，而指向这些对象的引用仍在堆栈上。可能这就是你的疑问。

现在，您还应该注意，只有局部变量存储在 上`stack`，而`instance / member`变量存储在`Heap`.

例如： -

```
String str = new String("Rohit");  // Local variable 
```

在上述情况下，`str`引用将在 上分配内存`stack`，当然如果它是在某个本地范围内定义的。并且它将指向在 上创建的新字符串对象`Heap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:23:59.977

> 为什么我们不能引用堆栈内的内存位置呢？

您可以将此决定视为**内存架构决定。**

`stack`从概念上讲，理想情况下，如果数据不在其之上，则无法从中检索任何数据。但在现实世界中，您需要从程序中的任何位置访问某个位置。所以，不能叠加。他们给它起了名字`heap`。

这个[链接](http://www.javatutorialhub.com/java-stack-heap.html)可能会更清楚地说明它。

# iphone - CABasicAnimation 键

> ID：13913101
> 
> 赞同：12
> 
> 时间：2012-12-17T11:18:27.583
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想知道使用的所有可能的键是什么`CABasicAnimation`

像这个：

```
CABasicAnimation *imageRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"]; 
```

这使得旋转......我在哪里可以找到所有可能的钥匙？并感谢转发

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T11:27:31.443

以下是主要`animationWithKeyPath`价值。

![动画WithKeyPath](../Images/76d6fae6b3aded19012687850ef031bc.png)

参考[http://www.adamzucchi.com/blog/?p=24](http://www.adamzucchi.com/blog/?p=24)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-25T18:40:49.263

在对其中一个答案的评论中提到了此来源，但希望将来发现此问题的人可以接受此来源，截至发布日期的正确列表是苹果文档上的此页面：

[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html) [https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/Key -ValueCodingExtensions/键-ValueCodingExtensions.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/Key-ValueCodingExtensions/Key-ValueCodingExtensions.html)

以下是这些链接中列出的关键路径：

（除非另有说明，CALayer 属性使用默认的 CABasicAnimation）

### 图层

*   **锚点**：*CGPoint*
*   **背景**颜色：*CGColor？*
*   **背景**过滤器：*[CIFilter]？*（使用默认 CATransition，过滤器的子属性使用默认 CABasicAnimation 进行动画处理）
*   **边框**颜色：*CGColor？*
*   **边框宽度**：*CGFloat*
*   **界限**：*CGRect*
*   **合成**过滤器：*CIFilter？*（使用默认 CATransition，过滤器的子属性使用默认 CABasicAnimation 进行动画处理）
*   **内容**：*CGImage？*
*   **内容**矩形：*CGRect*
*   **角半径**：*CGFloat*
*   **doubleSided** : *Bool*（无默认动画）
*   **过滤器**：__[CIFilter]？（使用默认 CATransition，过滤器的子属性使用默认 CABasicAnimation 进行动画处理）
*   **框架**：*CGRect*（！！不可动画！使用边界和位置）
*   **隐藏**：*布尔*
*   **面具**：*CALayer？*
*   **maskToBounds** :*布尔*
*   **不透明度**：*浮动*（0 <= 不透明度 <= 1）
*   **位置**：*CGPoint*
*   **阴影颜色：**CGColor** *？***
***   **shadowOffset** : *CGSize* (默认为 (0,-3))*   **shadowOpacity** :*浮点数*(0 <= shadowOpacity <= 1)*   **阴影路径：**CGPath** *？******   **shadowRadius** : *CGFloat* (默认为 3)*   **子层**：*[CALayer]？**   **子层**变换：*CATransform3D**   **变换**：*CATransform3D**   **zPosition** : *CGFloat*****

 ****CALayer 默认隐含 CABasicAnimation**：*duration* = 0.25s 或当前事务的持续时间。
CALayer 默认隐含 CATransition**：*持续时间*= 0.25s 或当前事务的持续时间，类型 = kCATransitionFade，开始进度 = 0，结束进度 = 1

### CIFilter（仅限 macOS）

*   **名称**：*字符串*
*   **启用**：*布尔*

### CATransform3D

*   **rotation.x** : *NSNumber* (弧度)
*   **rotation.y** : *NSNumber* (弧度)
*   **rotation.z** : *NSNumber* (弧度)
*   **旋转**：*NSNumber*（弧度）（与rotation.z相同）
*   **scale.x** : *NSNumber*
*   **scale.y** : *NSNumber*
*   **scale.z** : *NSNumber*
*   **scale** : *NSNumber*（所有三个比例因子的平均值）
*   **翻译**.x ：*NSNumber*
*   **翻译**.y ：*NSNumber*
*   **翻译**.z ：*NSNumber*
*   **翻译**：包含 NSSize 或 CGSize 的*NSValue*

### CG点

*   **x** : *CGF浮动*
*   **y** : *CGF浮动*

### CGS尺寸

*   **宽度**：*CGFloat*
*   **高度**：*CGF浮动*

### CG矩形

*   **原点**：*CGPoint*
*   **origin.x** : *CGFloat*
*   **origin.y** : *CGFloat*
*   **尺寸**：*CGSize*
*   **size.width** : *CGFloat*
*   **size.height** : *CGFloat*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-21T20:37:31.403

**你可以简单地**写： CABasicAnimation(keyPath: #keyPath(CAShapeLayer.strokeColor))

此外，使用 command+shift+o，打开例如 CALayer.h 并观看评论。**Apple 团队提供有关动画功能的信息

对于动画键：

====**漂亮的包装器；用法示例**====

*请回复这条关于错误的消息，如果你会看到*

```
extension CABasicAnimation {
        convenience init(_ key: CAPropertyAnimation.Key, duration: Double) {
        self.init(keyPath: key.keyPath)
        self.duration = duration
    }
} 
```

![XCode 外观](../Images/f2e8a0d9961cb7d9ab6330d0be8bdbef.png)

* * *

```
extension CAPropertyAnimation {

    enum Key {

        /// `CALayer` in the `Parent` layer for `Subclass layers`.  Able to use this keys for animating `Subclass layers`
        case caLayer(_ property: CALayer.CALayerAnimatableProperty)
        case shapeLayer(_ property: CAShapeLayer.AnimatableProperty)
        case emitterLayer(_ property: CAEmitterLayer.AnimatableProperty)
        case gradientLayer(_ property: CAGradientLayer.AnimatableProperty)
        case replicationLayer(_ property: CAReplicatorLayer.AnimatableProperty)
        case textLayer(_ property: CATextLayer.AnimatableProperty)

        var keyPath: String {
            switch self {
            case .caLayer(let property):           return property.rawValue
            case .shapeLayer(let property):        return property.rawValue
            case .emitterLayer(let property):      return property.rawValue
            case .gradientLayer(let property):     return property.rawValue
            case .replicationLayer(let property):  return property.rawValue
            case .textLayer(let property):         return property.rawValue
            }
        }
    }
}

extension CALayer {

    /**

     - references:

     [Apple. Key-Value Coding Extensions (CALayer examples)](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Key-ValueCodingExtensions/Key-ValueCodingExtensions.html#//apple_ref/doc/uid/TP40004514-CH12-SW2)

     [Apple. Animatable Properties.](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html)

     [Stack overflow 1](https://stackoverflow.com/questions/44230796/what-is-the-full-keypath-list-for-cabasicanimation)

     [Stack overflow 2](https://stackoverflow.com/questions/13913101/cabasicanimation-keys)

     */

    enum CALayerAnimatableProperty: String {

        /// CGPoint
        case anchorPoint = "anchorPoint"
        /// CGPoint
        case anchorPointZ = "anchorPointZ"
        /// CGColor?
        case backgroundColor = "backgroundColor"
        /// [CIFilter]? (uses default CATransition, sub-properties of filters are animated using default CABasicAnimation)
        case backgroundFilters = "backgroundFilters"
        /// CGColor?
        case borderColor = "borderColor"
        /// CGFloat
        case borderWidth = "borderWidth"
        /// CGRect
        case bounds = "bounds"
        /// CGpoint
        case boundsOrigin = "bounds.origin"
        /// CGFloat
        case boundsOriginX = "bounds.origin.x"
        /// CGFloat
        case boundsOriginY = "bounds.origin.y"
        /// CGSize
        case boundsSize = "bounds.size"
        /// CGFloat
        case boundsWidth = "bounds.size.width"
        /// CGFloat
        case boundsHeight = "bounds.size.height"
        /// CIFilter? (uses default CATransition, sub-properties of filters are animated using default CABasicAnimation)
        case compositingFilter = "compositingFilter"
        /// typically a CGImageRef, but may be something else
        case contents = "contents"
        /// CGRect
        case contentsRect = "contentsRect"
        /// CGFloat
        case contentsScale = "contentsScale"
        /// CGRect
        case contentsCenter = "contentsCenter"
        /// CGFloat
        case cornerRadius = "cornerRadius"
        /// Bool (no default animation)
        case doubleSided = "doubleSided"
        /// [CIFilter]? (uses default CATransition, sub-properties of filters are animated using default CABasicAnimation)
        case filters = "filters"
        /// CGRect (!!not animatable!! use bounds and position)
        case frame = "frame"
        /// Bool
        case hidden = "hidden"
        /// Bool
        case masksToBounds = "masksToBounds"
        /// Float
        case minificationFilterBias = "minificationFilterBias"
        /// Float (0 <= opacity <= 1)
        case opacity = "opacity"
        /// CGPoint
        case position = "position"
        /// CGFloat
        case positionX = "position.x"
        /// CGFloat
        case positionY = "position.y"
        /// CGFloat
        case rotationX = "transform.rotation.x"
        /// CGFloat
        case rotationY = "transform.rotation.y"
        /// CGFloat
        case rotationZ = "transform.rotation.z"
        /// CGFloat
        case scale = "transform.scale"
        /// CGFloat
        case scaleX = "transform.scale.x"
        /// CGFloat
        case scaleY = "transform.scale.y"
        /// CGFloat
        case scaleZ = "transform.scale.z"
        /// CGColor?
        case shadowColor = "shadowColor"
        /// CGSize (default is (0,-3))
        case shadowOffset = "shadowOffset"
        /// Float (0 <= shadowOpacity <= 1); default is 0
        case shadowOpacity = "shadowOpacity"
        /// CGpath?
        case shadowPath = "shadowPath"
        /// CGFloat (default is 3)
        case shadowRadius = "shadowRadius"
        /// [CALayer]?
        case sublayers = "sublayers"
        /// Bool
        case shouldRasterize = "shouldRasterize"
        /// CGFloat
        case rasterizationScale = "rasterizationScale"
        /// CATransform3D
        case sublayerTransform = "sublayerTransform"
        /// CGSize
        case translation = "transform.translation"
        /// CGFloat
        case translationX = "transform.translation.x"
        /// CGFloat
        case translationY = "transform.translation.y"
        /// CGFloat
        case translationZ = "transform.translation.z"
        /// CATransform3D
        case transform = "transform"
        /// CGFloat
        case zPosition = "zPosition"
    }
}

extension CAShapeLayer {

    enum AnimatableProperty: String {
        /// CGColor?
        case fillColor = "fillColor"
        /// [NSNumber]?
        case lineDashPhase = "lineDashPhase"
        /// CGFloat
        case lineWidth = "lineWidth"
        /// CGFloat
        case miterLimit = "miterLimit"
        /// CGColor?
        case strokeColor = "strokeColor"
        /// CGFloat
        case strokeStart = "strokeStart"
        /// CGFloat
        case strokeEnd = "strokeEnd"
    }
}

extension CAEmitterLayer {

    enum AnimatableProperty: String {

        /// CGPoint
        case emitterPosition = "emitterPosition"
        /// CGFloat
        case emitterZPosition = "emitterZPosition"
        /// CGSize
        case emitterSize = "emitterSize"
    }
}

extension CAGradientLayer {

    enum AnimatableProperty: String {

        /// [CGColor]? ([Any]? by Apple docs, but CGColor works as well)
        case colors = "colors"
        /// [NSNuber]?
        case locations = "locations"
        /// CGPoint
        case endPoint = "endPoint"
        /// CGPoint
        case startPoint = "startPoint"
    }

}

extension CAReplicatorLayer {

    enum AnimatableProperty: String {

        /// CFTimeInterval (Double)
        case instanceDelay = "instanceDelay"
        /// CATransform3D
        case instanceTransform = "instanceTransform"
        /// Float
        case instanceRedOffset = "instanceRedOffset"
        /// Float
        case instanceGreenOffset = "instanceGreenOffset"
        /// Float
        case instanceBlueOffset = "instanceBlueOffset"
        /// Float
        case instanceAlphaOffset = "instanceAlphaOffset"
    }
}

extension CATextLayer {

    enum AnimatableProperty: String {

        /// CGSize
        case fontSize = "fontSize"
        /// CGColor?
        case foregroundColor = "foregroundColor"
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T11:22:39.683

您可以在CoreAnimation 编程指南的[“结构字段的关键路径支持”](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/Key-ValueCodingExtensions/Key-ValueCodingExtensions.html)部分找到它们

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T11:23:47.920

您基本上可以使用所有可能的**keyPath**。因此，如果一个对象实现了属性“alpha”，就像所有视图一样，你可以让这个属性自动动画。

然后 CAAnimation 计算动画起点和终点之间的步长，设置它们并重绘视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T11:23:16.437

您是否考虑过查找 CABasicAnimation 及其相应超类的类参考？

CABasicAnimation： [https ://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html)

CAPropertyAnimation [https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAPropertyAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAPropertyAnimation](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAPropertyAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAPropertyAnimation)

CAAnimation [https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation)****

# android - 如何在用户停止查看应用程序活动后停止服务运行。安卓

> ID：13913103
> 
> 赞同：0
> 
> 时间：2012-12-17T11:18:36.853
> 
> 标签：android, audio, service, scope, databound

我的应用程序的 5 个活动中的每一个都有以下代码。我想保持绑定到这五个活动的服务运行。它将在后台播放音乐。然而，当用户离开这五个活动中的任何一个时，服务应该被终止。使用下面的代码，我可以得到它，以便在活动之间导航时在后台播放音乐。但服务在离开应用程序后继续运行。解决这个问题的最佳方法是什么？来点创意怎么样。

我把这个 Toast 消息放在服务的 onDestroy 方法中，这样我就可以知道服务何时停止。

```
 Toast.makeText(this, "My Service Destroyed", Toast.LENGTH_LONG).show(); 
```

当我离开应用程序时，我从来没有看到任何 Toast 消息弹出。其他 toast 消息确实表明该服务已启动。

```
@Override
public void onPause() {
    super.onPause();
    unbindService(serviceConnection);
}

@Override
public void onResume() { 
    //After a pause OR at startup
    super.onResume();
    //add this to the onResume of the activity
    //  startService(new Intent(this, AudioService.class));
    bindService(new Intent(this, AudioService.class), 
                  serviceConnection, Context.BIND_AUTO_CREATE);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:21:58.297

根据[此处的文档](http://developer.android.com/guide/components/services.html)：

> 多个客户端可以一次绑定到服务。当客户端完成与服务的交互时，它调用 unbindService() 来解除绑定。一旦没有客户端绑定到该服务，系统就会销毁该服务。

因此，也许您在一项活动中缺少一些未绑定的内容。**您可以通过在服务的onBind**和**onUnbind**方法中打印日志来检查这一点。

# youtube-api - 如何使用 Youtube 的搜索 API 查找不受国家/地区限制的视频？

> ID：13913105
> 
> 赞同：1
> 
> 时间：2012-12-17T11:18:41.070
> 
> 标签：youtube-api

我想使用 Youtube 的 seach API 来查找在全球范围内可用且不限于某个国家/地区的视频。

[API](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#restrictionsp)有一个`restriction`参数，但这只能用于将搜索限制在单个国家/地区，例如

```
https://gdata.youtube.com/feeds/api/videos?q=football&restriction=US 
```

一种可能的解决方案是为所有国家/地区添加多个参数值，但这不受 API 支持。

我可以对每个国家/地区执行多次搜索并组合结果，但这种方法似乎太麻烦了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:26:17.073

添加`&safeSearch=strict`到您的查询中（为此，您需要使用 api 版本 2）

还可以查看[字段](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial#Fields_Formatting_Rules)以进一步过滤限制

# java - 使用复制运行时的 Java 线程

> ID：13913107
> 
> 赞同：1
> 
> 时间：2012-12-17T11:18:46.110
> 
> 标签：java, multithreading, concurrency

我正在编写的一些 Java 代码有一个非常奇怪的错误。如果我运行一些我编写的并行代码，它运行得很好，但是如果我在同一次运行中多次运行相同的代码，运行时每次都会变得越来越慢。

如果我将线程数从 4 个增加到 8 个，则每次迭代的减速都会更加剧烈。

每次运行都是完全独立的，我什至将运行时变量设置为 null 以清除旧运行。所以我不知道是什么会减慢它的速度。我一直在使用 Visual VM，它说 .run() 将所有时间都花在“Self Time”或“Thread.init()”上，这没有帮助。

一些代码片段：

```
for (int r = 0; r < replicateRuns; ++r) {
    startTime = System.nanoTime();
    result = newRuntime.execute();
    result = null;
    System.out.println((System.nanoTime() - startTime) / 1000000);
    total += System.nanoTime() - startTime;
} 
```

* * *

```
 parentThread = this;
    thread = new Thread[numberOfThreads];
    barrier = new CyclicBarrier(numberOfThreads);

    for (int i = 0; i < numberOfThreads; i++) {
        thread[i] = new Thread(new Runtime(parentThread, variation, delta, eta, i,
                numberOfThreads), i + "");
        thread[i].start();
    }

    for (int i = 0; i < numberOfThreads; i++) {
        try {
            thread[i].join();
            thread[i] = null;
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

因此，任何关于为什么如果我多次启动 Java 应用程序我会得到不错的结果的线索，但如果我在同一次启动中多次运行它，一切都会变慢，即使据我所见，我正在使一切都无效GC 来清理它。

我正在使用线程局部变量，但是从我读过的内容来看，当线程本身设置为空时，它们都被清除了。

为任何帮助干杯！

编辑1：

感谢所有的帮助。情节变厚了，在我的 Windows 桌面（而不是我的 MacBook）上完全没有问题，即使我增加运行量，每个线程也运行良好，中间没有减慢！在盯着这个看了一天之后，我将在早上的第一件事中再次尝试使用 Eclipse MAT。

关于源代码，我正在使用 MOEAD 的并行版本扩展 MOEA 框架，因此有许多依赖项和类。[MOEA 框架](http://www.moeaframework.org/)你可以在[这里](https://www.dropbox.com/s/f8k3k9oerpq4m75/ParallelMOEAD.java)找到我的课程的源代码。本质上，迭代被重复调用，直到 numberOfEvaulations 达到一个设定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:26:30.460

我相信大家在这里所说的问题是你没有以正确的方式“停止”你的线程 - 有点说话。

根据我的经验，最好的方法是将状态存储在线程中，在布尔变量中，例如`isRunning`. 然后在你的循环中你测试`isRunning`标志的状态，即

```
//inside the run method
while(isRunning){
//your code goes here
} 
```

这样，在循环的每次迭代中，您都在检查标志的当前状态，因此当您将其设置为“假”时，例如，在您的自定义`stop()`方法中。循环的下一次迭代将导致线程退出其`run`方法，从而结束线程的生命。从技术上讲，现在它已经准备好被垃圾收集了。它的内存将在不久的将来某个时候被释放，考虑到在你的代码中的某个地方没有提到这个威胁。

有更多来源展示了这种方法，例如，查看[LinkedIn 上的讨论](http://www.linkedin.com/groups/Killing-threads-in-java-program-70526.S.191670441?view=&srchtype=discussedNews&gid=70526&item=191670441&type=member&trk=eml-anet_dig-b_pd-ttl-hdp&ut=0AA26BiLWSO5w1)。

*`newRuntime`附带说明一下，查看or变量的确切含义、它们的类和继承等实际上很有用`result`。否则我们只能尝试猜测代码中实际发生的情况。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:38:10.780

您总是在生成新线程并且从不处理它们。如果线程数大于处理器内核数，我们必须切换线程，这可能会降低大约 1000 倍的性能。如果您使用的是 Netbeans IDE，您可以在分析器中查看线程及其状态。

# datagrid - 如何在 DataGrid 单元格 AS3 中绘制矩形

> ID：13913110
> 
> 赞同：0
> 
> 时间：2012-12-17T11:18:53.080
> 
> 标签：datagrid, drawrect

我以编程方式将带有字段的数据网格放置在舞台上，并将矩形形状放置在同一舞台上。我现在需要做的是让数据网格的列中的单元格包含矩形，而不是文本。

简而言之，我想要实现的是在数据网格内有一个图表，例如，Col1 有名称，Col 2 有分数，而 Col3 有矩形，代表分数长度的百分比。它将与百分比分数一样长或短。我能够动态改变长度，但我不知道如何将它放在网格的单元格中。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:08:54.317

我被锁定在考虑将其作为列添加到数据网格中。我想只是将形状添加到数据网格中，即

```
 datagrid.addChild(myShape); 
```

然后定位它！

# python - Python 3.2 Monte Carlo Pi 估计？

> ID：13913112
> 
> 赞同：0
> 
> 时间：2012-12-17T11:18:55.753
> 
> 标签：python, montecarlo

我刚开始编程，这个任务给我带来了很多麻烦。如何更改下面的蒙特卡洛代码（用于曲线下面积）以估计 pi？

```
from random import uniform
from math import exp

def estimate_area(f, a, b, m, n=1000):
    hits = 0
    total = m * (b - a)
    for i in range(n):
        x = uniform(a, b)
        y = uniform(0, m)
        if y <= f(x):
            hits += 1
    frac = hits / n
    return frac * total

def f(x):
    return exp(-x**2)

def main():
    print(estimate_area(f, 0, 2, 1))

main() 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:29:05.680

我不会为你解决这个问题，但我会给你一个提示。考虑在 2x2 正方形中嵌入[单位圆](http://en.wikipedia.org/wiki/Unit_circle)，以及如何帮助您估计 π。一旦你弄清楚了，利用固有的对称性来处理四个象限中的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T01:23:37.313

这是 Monte Carlo 方法的一个常见示例，例如参见[Monte Carlo Method](http://en.wikipedia.org/wiki/Monte_Carlo_method)的 Wikipedia 页面。仅在一个象限中考虑这个问题，即以 0,0 为中心、半径为 1 的四分之一圆和从 (0,0) 到 (1,1) 的正方形。`x=uniform(0,1)`如果您在和处随机放置一个点`y=uniform(0,1)`，您可以检查该点是否在四分之一圆内，`(x^2.+y^2.)^0.5 <= 1.0`。发生这种情况的机会与两个物体的体积比有关。

# vtd-xml - 从 VTD XML 中的元素评估 XPath 表达式

> ID：13913113
> 
> 赞同：1
> 
> 时间：2012-12-17T11:19:06.093
> 
> 标签：vtd-xml

XML 文件：

```
<apps>
        <app name="google">
              <branches> 
                   <branch location="us">
                       <datacenters>
                               <datacenter city="Mayes County" />
                                <datacenter city="Douglas County" />
                       </datacenters>
                   </branch>
              </branches>
        </app>
        <app name="facebook">
        </app>
</apps> 
```

Java 代码：

```
XPath xpath = XPathFactory.newInstance().newXPath();
Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(file);
String expression = "/apps/app[name='google']";
Element element = xpath.evaluvate(expression,document.getDocumentElement();
Element app = (Element)xpath.evaluvate(expression,element,XPathConstants.NODE); 
```

我可以存储 app 元素并在 app 元素中执行 xpath 表达式。像这样

```
xpath.evaluvate("branches/branch[@location='us']",app,XPathConstants.STRING); 
```

如何在 VTD XML 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:51:39.383

我认为您可以通过访问 VTD-XML 的 sourceforge 网站来学习 API。下面是我认为它的样子：

```
VTDGen vg = new VTDGen();
String filename ="this.xml";
if (vg.parseFile(filename, true)){
    VTDNav vn = vg.getNav();
    AutoPilot ap = new AutoPilot(vn);
    ap.selectXPath("/apps/app[name='google']");
    int i=-1;
    while((i=ap.evalXPath())!=-1){
         //do something with i, it is the node index
    }

} 
```

# jquery - 如何在jquery中获取和设置tabindex

> ID：13913114
> 
> 赞同：4
> 
> 时间：2012-12-17T11:19:12.370
> 
> 标签：jquery

我要设置标签索引，

```
$("#DilutionFactor1_" + nCount).attr(
       'tabindex',
       $("#UnitOfMeasure" + nCount).attr('tabindex')+ 1) ; 
```

但这不起作用。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T11:28:37.987

尝试使用`parseInt`

```
 $("#DilutionFactor1_" + nCount).attr('tabindex',
parseInt($("#UnitOfMeasure" + nCount).attr('tabindex'))+ 1) ; 
```

# python - Tweepy OAuth - HTTP 错误 404：未找到

> ID：13913117
> 
> 赞同：1
> 
> 时间：2012-12-17T11:19:22.573
> 
> 标签：python, google-app-engine, twitter, tweepy

我正在使用[Tweepy 库](https://github.com/tweepy/tweepy)在我的网站上实现“使用 Twitter 登录”。

如[Tweepy 示例](https://github.com/tweepy/examples/blob/master/appengine/oauth_example/handlers.py)中所示，我正在做：

 `````
def get(self):

    callback_url = "http://127.0.1.1:8080/social_login/complete/"

    auth = tweepy.OAuthHandler(
                                config.twitter_consumer_key, 
                                config.twitter_consumer_secret, 
                                callback_url
                                )

    try:
        redirect_url = auth.get_authorization_url()
    except tweepy.TweepError, e:
        self.redirect_to('error', {'message': e})

    request_token = models.OAuthToken(
            token_key = auth.request_token.key,
            token_secret = auth.request_token.secret
    )
    request_token.put() 
````  `当我运行此代码时，我收到此错误：

`File "/home/jeremy/Dropbox/Projects/bibliogram/controllers/handlers.py", line 72, in get token_key = auth.request_token.key, AttributeError: 'NoneType' object has no attribute 'key'`

tweepy.TweepError, e 是：HTTP Error 404: Not Found

我尝试使用来自两个不同帐户的消费者密钥和秘密。我真的不明白为什么它不起作用......

有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:18:50.637

您没有在`except`处理程序中返回，因此代码继续尝试在重定向之前创建请求令牌。在那里放一个退货，所以只有在没有错误的情况下才会继续。``

# c# - NullReferenceException 与 Umbraco 4.9 中的改编创建

> ID：13913118
> 
> 赞同：0
> 
> 时间：2012-12-17T11:19:27.623
> 
> 标签：c#, umbraco, nullreferenceexception

我已经调整了 Umbraco 创建上下文菜单项以复制内容。我一直在努力解决小问题，但我现在陷入困境。尝试使用该`dialogHandler_temp.Create()`方法时，我得到了一个`NullReferenceException`.

使用的所有变量都不为空，页面也不为空。有谁知道我该如何排序？

```
 private void DoCreation()
{
    if (!Page.IsValid)
        return;

    var hel = helper.Request("nodeType");
    var nType = int.Parse(nodeType.SelectedValue);
    var nId = int.Parse(Request["nodeID"]);
    var rName = rename.Text;
    var cur = Current;

    if (cur != null) // dialogHandler_temp.Create() is a static method
        cur.ClientTools.ChangeContentFrameUrl(dialogHandler_temp.Create(hel, nType, nId, rName)).CloseModalWindow();
} 
```

堆栈跟踪：

```
 [NullReferenceException: Object reference not set to an instance of an object.]
   umbraco.presentation.create.dialogHandler_temp.Create(String NodeType, Int32 TypeId, Int32 NodeId, String Text) +278
   OptionalMultiLangPage.DoCreation() in c:\inetpub\wwwAmaris\optional_multiLang.aspx.cs:112
   OptionalMultiLangPage.SbmtClick(Object sender, EventArgs e) in c:\inetpub\wwwAmaris\optional_multiLang.aspx.cs:96
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3803 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:42:17.517

我把这个整理好了。我花了一段时间才意识到这`helper.Request("nodeType")`不是返回新节点的类型，而是返回正在执行的 xml 节点值。这必须与 Umbraco Content 类一起分配到某个地方，所以我错过了它。它应该设置为 的值`"content"`。

我的代码现在看起来像：

```
 private void DoCreation()
    {
        if (!Page.IsValid)
            return;

        const string xmlNodeVal = "content";
        var nType = int.Parse(nodeType.SelectedValue);
        var nId = int.Parse(Request["nodeID"]);
        var rName = rename.Text;
        var returnUrl = dialogHandler_temp.Create(xmlNodeVal, nType, nId, rName);
        var cur = Current;

        if (cur != null)
            cur.ClientTools.ChangeContentFrameUrl(returnUrl).CloseModalWindow();
    } 
```

# android - 如何以编程方式禁用 Android 状态栏？

> ID：13913123
> 
> 赞同：0
> 
> 时间：2012-12-17T11:19:44.817
> 
> 标签：android, statusbar, notificationmanager

我正在尝试在 android 中制作 SMS 应用程序。有些消息我想隐藏其中的内容，但是一旦我收到消息，android`stausbar`就会显示消息的内容。如何在我的应用程序中以编程方式禁用此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:26:55.227

看看这个问题

[我们可以在 Android 中的 SMS 到达收件箱之前删除它吗？](https://stackoverflow.com/questions/1741628/can-we-delete-an-sms-in-android-before-it-reaches-the-inbox/2566199#2566199)

它向您展示了如何使用 a`BroadcastReceiver`来侦听 SMS 通知并取消它们到达其他应用程序。这将允许您的 SMS 应用程序显示您希望或不希望的任何通知。

# mysql - 无法将代码优先迁移应用到 mysql 数据库

> ID：13913126
> 
> 赞同：2
> 
> 时间：2012-12-17T11:19:56.673
> 
> 标签：mysql, asp.net-mvc, ef-code-first, entity-framework-migrations

我正在使用 EF 代码优先模型开发 asp.net mvc。我正在尝试首先将使用 EF 代码的迁移应用到我的项目中。我正在使用 MySql 数据库。目前我正在使用 EF 4.3.1 版本和 6.6.4.0 版本的 mysql connector/.net。我成功地将迁移添加到我的项目中，这意味着我执行了一系列对我来说没有错误的命令。我已经按照这些步骤，

```
PM> Enable-Migrations

PM> Add-Migration InitialMigration

PM> update-database -verbose 
```

这些步骤为我的项目创建 Migration 文件夹，并在 Migration 文件夹中创建配置和 timestamp_Initialmigration 文件，在配置文件中我添加了以下代码。

```
SetSqlGenerator("MySql.Data.MySqlClient", new MySql.Data.Entity.MySqlMigrationSqlGenerator()); 
```

之后，我在课堂上添加了一个字段，例如，

```
public int newprop{get; set;} 
```

之后我在 PM 控制台中执行 update-database -verbose 命令。

当我执行我的应用程序时，它会抛出一个错误，例如，

**“‘字段列表’中的未知列‘Extent1.newprop’”**

请指导我为什么会收到此错误我是否走错路了请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:36:20.877

如果您不使用自动迁移

Database.SetInitializer(new MigrateDatabaseToLatestVersion());

```
 public class MyMigrationConfiguration : DbMigrationsConfiguration<MyDbContext>
    {
        public MyMigrationConfiguration()
        {
            AutomaticMigrationsEnabled = true; // Are you using this ?????
            AutomaticMigrationDataLossAllowed = true;
        }
    } 
```

然后，您需要使用 PM Commandlet 告诉 EF 添加另一个迁移并更新数据库。

```
PM> Enable-Migrations  //already done this ?
PM> Add-Migration myLabel
PM> Update-Database 
```

在网络上搜索“基于代码的迁移”以获取帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T03:28:12.407

回答 OP 有点晚了...但是由于它是我在谷歌上的第一次点击，所以我还是继续吧:)

这里的问题是，与 MSSQL 相比，MySQL 存在许多限制。* 特别是在区分大小写的文件系统（Linux 主机）上使用 mysql，表名可能不包含大写字母。* 键也被限制为 767 字节并且应该/必须是整数类型。* 那么Mysql.Data包的部分迁移生成器有问题。例如，重命名时，'dbo' 不会被删除。

[在 insidemysql.com 上](http://insidemysql.com/how-to-use-mysql-for-your-asp-net-identity-provider-with-a-custom-primary-key/)查看本指南。它描述了如何重新配置​​ Aspnet.Identity 堆栈以`int`在`TKey`类型转换中使用。

我有一个项目，我也连接到 HistoryContext，允许更改 __MigrationHistory 的结构。它重命名表/列并调整其大小。还有对 IdentityConfig 的重制 - 所以看看

1.  [https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/tree/master/my.ns.entities/DbContexts/MigrationConfig](https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/tree/master/my.ns.entities/DbContexts/MigrationConfig)
2.  [https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/tree/master/my.ns.entities/IdentityConfig](https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/tree/master/my.ns.entities/IdentityConfig)

然后将它与您的上下文挂钩（请参阅[IdentityDbContext](https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/blob/master/my.ns.entities/DbContexts/IdentityDb.cs)`MySqlMigrationScriptGenerator` ）并`HistoryContextFactory`在您的 Migrations.Configuration 类中启用提到的和（请参阅我的[IdentitiyMigrations.Configuration](https://github.com/mschr/ASP.NET-MVC5.MySql-Extended-Bootstrap/blob/master/my.ns.entities/DbContexts/IdentityMigrations/Configuration.cs)）

# asp.net - ASP.NET 列表视图双击

> ID：13913133
> 
> 赞同：0
> 
> 时间：2012-12-17T11:20:28.687
> 
> 标签：asp.net, listview, double-click

我可以双击asp.net listview 吗？我想在双击而不是单击时调用一个函数，即 ItemCommand。

有可能吗？

塔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:54:30.713

如果调用函数是指`server side`调用简单的事情将是

```
private void listView_MouseDoubleClick(object sender, MouseEventArgs e)
{
  MessageBox.Show("Double Click Event Called");
} 
```

有关同一检查的更多信息：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doubleclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doubleclick.aspx)

如果调用函数是指任何`client side (Javascript/Jquery call)`那么你可以使用：

```
 $('#target').dblclick(function() {
  alert('Handler for .dblclick() called.');
 }) 
```

欲了解更多信息，请查看[此处](http://api.jquery.com/dblclick/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:59:21.657

ASPX：

```
<asp:ListView ID="ListView1" runat="server" 
    onitemdatabound="ListView1_ItemDataBound" onitemcommand="ListView1_ItemCommand">
    <ItemTemplate>
        <asp:LinkButton ID="LinkButton1" CommandName="DoubleClick" runat="server">LinkButton</asp:LinkButton>
    </ItemTemplate>
</asp:ListView> 
```

CS：

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            LinkButton LinkButton1 = (LinkButton)e.Item.FindControl("LinkButton1");
            string _jsDouble = ClientScript.GetPostBackClientHyperlink(LinkButton1, "");
            LinkButton1.Attributes["ondblclick"] = _jsDouble;
            LinkButton1.Attributes["onclick"] = "return false;";    
        }
    }

    protected void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        if (e.CommandName == "DoubleClick")
        {

        }
    } 
```

# php - 如何按字段下订单但里面有条件？

> ID：13913137
> 
> 赞同：1
> 
> 时间：2012-12-17T11:20:37.950
> 
> 标签：php, mysql, sql-order-by

请高手，我有三个表，我需要从中选择数据`LEFT JOIN`；并且我需要按字段**q**（存在于 中`table3`）进行排序，但仅在 state = 1 的地方（也存在于 中`table3`）。

我试过这个但它不起作用：

```
SELECT * FROM table 1
         LEFT JOIN table2 ON x = y
         LEFT JOIN table3 ON z=w
         WHERE w = 1
         ORDER BY q IN ( SELECT q FROM table3 WHERE state = 1); 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:25:49.833

这是怎么回事：

```
SELECT * FROM table 1
         LEFT JOIN table2 ON x = y
         LEFT JOIN table3 ON z=w
         WHERE w = 1
         ORDER BY case when state=1 then 0 else 1 end,q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:26:57.933

试试这个：

```
SELECT *,
    (SELECT q FROM table3 WHERE state = 1) as sort_order
FROM table 1
    LEFT JOIN table2 ON x = y
    LEFT JOIN table3 ON z=w
WHERE w = 1
ORDER BY sort_order 
```

因为我不知道期望的结果应该是什么，所以这可能是正确的查询：

```
SELECT *
FROM table1 as t1
    LEFT JOIN table2 as t2 ON t1.x = t2.y
    LEFT JOIN table3 as t3 ON t2.z = t3.w AND t3.state = 1
WHERE t3.w = 1
ORDER BY t3.q 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:28:29.570

尝试这样的事情：

```
SELECT * FROM table 1
         LEFT JOIN table2 ON x = y
         LEFT JOIN table3 ON z=w
         WHERE w = 1 AND table3.state = 1
         ORDER BY q 
```

# sql - SQL contains 的奇怪问题 - 忽略字符串的起始字符

> ID：13913138
> 
> 赞同：1
> 
> 时间：2012-12-17T11:20:38.577
> 
> 标签：sql, tsql, sql-server-2005, full-text-search, full-text-indexing

我在使用 sql 全文索引时遇到了一个奇怪的问题。基本上我正在搜索一个用于存放电子邮件地址的列。对于我测试的所有情况，似乎都按预期工作，除了一个！

```
SELECT *
FROM Table
WHERE CONTAINS(Email, '"email@me.com"') 
```

对于某个电子邮件地址，它完全忽略了上面的“电子邮件”部分，而是在做

```
SELECT *
FROM Table
WHERE CONTAINS(Email, '@me.com') 
```

只有一个案例我能发现这种情况正在发生。我重新填充了索引，但没有任何乐趣。还重建了目录。

有任何想法吗？？

**编辑：** 我不能将某人的电子邮件地址放在公共网站上，所以我会给出更合适的例子。导致问题的原因是以下形式：

```
a.b.c@somedomain.net.au 
```

当我做

```
WHERE CONTAINS(Email, "'a.b.c@somedomain.net.au"') 
```

返回的匹配行都是 form `.*@somedomain.net.au`。即它忽略了`a.b.c`部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:15:09.283

Full stops are treated as noise words (or stopwords) in a fulltext index, you can find a list of the excluded characters by checking the system stopwords:

SELECT * FROM sys.fulltext_system_stopwords WHERE language_id = 2057 --this is the lang Id for British English (change accordingly)

So your email address which is "a.b.c@somedomain.net.au" is actually treated as "a b c@somedomain.net.au" and in this particular case as individual letters are also excluded from the index you end up searching on "@somedomain.net.au"

You really have two choices, you can either replace the character you want to include before indexing (so replace the special characters with a match tag) or you remove the words/character you which to include from the Full Text Stoplist.

NT// If you choose the latter I would be careful as this can bloat your index significantly.

Here are some links that should help you :

[Configure and Manage Stopwords and Stoplists for Full-Text Search](http://msdn.microsoft.com/en-us/library/ms142551.aspx)

[Create Full Text Stoplists](http://technet.microsoft.com/en-us/library/cc280405.aspx)

# jquery - jqGrid中的工具提示被截断

> ID：13913139
> 
> 赞同：0
> 
> 时间：2012-12-17T11:20:39.403
> 
> 标签：jquery, jqgrid, tooltip, truncate

我在这里的 JQgrid 中有一个独特的场景。我正在尝试将一些数据加载到 jqGrid 中。数据已成功加载到网格中。问题是当我将鼠标悬停在某一行的特定列上时，会出现工具提示。我能够看到所有具有普通文本的工具提示，但是当文本具有“<”字符时，工具提示会被截断，因此整个文本不可见。你能建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:50:07.663

如果您不能保证网格中的文本不包含 HTML 中使用的特殊字符，`autoencode: true`则可能您没有使用**严格推荐的选项。**

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/TooltipWithSpecialCharacters.htm)：

![在此处输入图像描述](../Images/9250d7954b312ce1596c95ae5695ff14.png)

# python - 如何在 gensim 的 LDA 模型中获取主题编号

> ID：13913142
> 
> 赞同：1
> 
> 时间：2012-12-17T11:20:56.640
> 
> 标签：python, nlp, lda, gensim

我已经在 text_corpus 上使用 gensim 训练了 LDA 模型。

```
>lda_model = gensim.models.ldamodel.LdaModel(text_corpus, 10) 
```

现在，如果必须推断一个新的文本文档 text_sparse_vector 我必须做

```
>lda_model[text_sparse_vector]
[(0, 0.036479568280206563), (3, 0.053828073308160099), (7, 0.021936618544365804), (11, 0.017499953446152686), (15, 0.010153090454090822), (16, 0.35967516223499041), (19, 0.098570351997275749), (26, 0.068550060242800928), (27, 0.08371562828754453), (28, 0.14110945630261607), (29, 0.089938130046832571)] 
```

但是我如何获得每个相应主题的单词分布。例如，我如何知道主题编号 16 的前 20 个单词？

gensim.models.ldamodel.LdaModel 类具有名为 show_topics(topics=10, topn=10, log=False, formatted=True) 的方法，但正如文档所述，它显示随机选择的主题列表。

有没有办法链接或打印我可以将推断的主题编号映射到单词分布？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T22:38:00.603

```
lda.print_topic(x, topn=20) 
```

将为您提供主题 x 的前 20 个功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T16:35:17.997

这里的最后一行将更改每个主题的字数。希望这可以帮助 ：）

```
# train and save LDA model

lda_model = gensim.models.LdaMulticore(bow_corpus, num_topics=20, id2word=dictionary, passes=2, workers=2, chunksize=400000)

# check out the topics 

for idx, topic in lda_model.print_topics(-1):
   print('Topic: {} \nWords: {}'.format(idx, topic))

# swap out '30' for any number and this line will give you that many words per topic :)
lda_model.print_topics(idx, 30)
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T00:49:47.987

或者，如果您有`K`主题，那么：

`print(str(["Topic #"+str(k)+":\n" + str(lda.show_topic(k,topn=20)) for k in range(K)]))`

会让你变得丑陋，但始终排序的输出。

# c - 无法将包含数据的数组添加到共享内存

> ID：13913143
> 
> 赞同：0
> 
> 时间：2012-12-17T11:21:02.613
> 
> 标签：c, linux, shared-memory

我正在尝试将带有数据的文件写入我的共享内存段。然而，我所尝试的一切似乎只是给出了错误分割错误。我一直在互联网上寻找帮助超过一天。

```
int main(int argc, char *argv[]).
{
    int sm;
    char *data;
    int pid=atoi(argv[1]);
    int key=atoi(argv[2]);
    char (*d)[1025];
    data=(char*) malloc(1025);

    //put the data in the shared memory segment
    FILE *file=fopen(argv[3], "r"); //r for read
    if (file==0)
    {printf("Could not open file");}
    else
    {
        while(fgets(data, 1025, file)!=NULL)
        {
            fputs(data, file);
        //  puts(d);
        }       
        fclose(file);
    }

    //access shared memory 
    //S_IWUSR gives owner the write permession
    sm = shmget(key, 1024, S_IWUSR); 
    //create a pointer to the shared memory segment
    d =  shmat(sm, (void *)0, 0); //shared memory id, shmaddr, shmflg
    //for (int j=0; j<100; j++)
        strcpy(d[0], data);

    shmdt(d); //detach the shared memory segment
    //remove the shared memory segment
    shmctl(sm, IPC_RMID, NULL);
} 
```

任何帮助将不胜感激提前谢谢

编辑：添加了 malloc

EDIT2：也许我应该改写我的问题，我的问题是将数据放入我的共享内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:22:26.937

1.  文件仅以读取模式打开。

将其更改为`rw+`将以读/写模式打开文件。如果该文件不可用，则会创建该文件。

`fputs(data, file);`这里文件以只读模式打开，但正在写入。

但我不确定，为什么你试图将读取的数据写入同一个文件。您应该首先考虑您的设计。

2\. 字符 (*d)[1025]; 是一个指向大小为 1025 的 char 数组的指针。您在 strcpy() 中使用它。

3\. 内存应该是`data`静态分配还是动态分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:29:50.287

+1 关于**rjayavrp 的**回答

我可以补充一点，数据没有分配......这只是一个指针，而不是一个字符数组......

此外，你想做什么

```
char (*d)[1025]; 
```

一个快速而肮脏的例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/ipc.h>
#include <sys/shm.h>

#define SIZE_SHARED_MEMORY  1024

int main(int argc, char *argv[])
{
    int sm = -1;
    char *d = NULL;
    FILE *file = NULL;
    key_t key = 0;
    int ret = 0;

    if (argc != 4)
    {
        return 1;
    }

    key = atoi(argv[2]);

    //access shared memory
    sm = shmget(key, SIZE_SHARED_MEMORY, IPC_CREAT | 0600);
    if (sm == -1)
    {
        perror("shmget : Failed");
        return 2;
    }

    //create a pointer to the shared memory segment
    d =  shmat(sm, (char *)0, 0);
    if (d == (void *)-1)
    {
        perror("shmat : Failed");
        return 3;
    }

    // Open the file
    file = fopen(argv[3], "r");
    if (file == NULL)
    {
        perror("fopen : Failed");
        ret  = 4;
    }
    else
    {
        if(fgets(d, SIZE_SHARED_MEMORY, file) == NULL)
        {
            perror("fgets : Failed");
            ret = 5;
        }
        fclose(file);
    }

    shmdt(d); //detach the shared memory segment

    // remove the shared memory segment ???
    // Don't understand why you are doing this
    shmctl(sm, IPC_RMID, NULL);

   return ret;
} 
```

# objective-c - iOS 设备的 vCard 格式是否正确？

> ID：13913157
> 
> 赞同：12
> 
> 时间：2012-12-17T11:21:59.433
> 
> 标签：objective-c, ios, abaddressbook

在 iOS 5 及更高版本中，Apple 引入了该`ABPersonCreatePeopleInSourceWithVCardRepresentation`方法，该方法在将 vCard 输入地址簿并为创建的人员取回 ABRecordRefs 时非常有用。

然而，Apple vCard 似乎（至少有点）与标准 vCard 不同，正如我在尝试将标准 vCard 添加到地址簿时发现的那样。是否有一个页面详细说明了 vCard 的 Apple 格式应该是什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T07:00:01.597

`ABPersonCreatePeopleInSourceWithVCardRepresentation`文档声明[vCard 版本 3 是受支持的](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABPersonCreatePeopleInSourceWithVCardRepresentation)协议。不幸的是，如果您在使用标准 vCard 时遇到问题，我不知道如何提供帮助 - 我进行了相当多的搜索（该赏金是很好的动力：P），但无法找到任何进一步的信息。

我没有要测试的 iPhone，但是[这个人声称已经使用 QR 扫描仪应用程序（](http://learnyii.blogspot.com/2011/04/vcard-qr-code-iphone-android-blackberry.html)*可能*正在使用有问题的 API）在iPhone 4 上成功导入了以下 v2.1 vCard 。[3.0 规范是 2.1 规范的超集](http://en.wikipedia.org/wiki/VCard#Properties)——你能试试这个 vCard 并告诉我它是否有效吗？

```
BEGIN:VCARD
VERSION:2.1
N:;Company Name
FN:Company Name
ORG:Company Name
TEL;WORK;VOICE;PREF:+16045551212
TEL;WORK;FAX:+16045551213
ADR;WORK;POSTAL;PARCEL;DOM;PREF:;;123 main street;vancouver;bc;v0v0v0;canada
EMAIL;INTERNET;PREF:user@example.com
URL;WORK;PREF:http://www.example.com/
NOTE:http://www.example.com/
CATEGORIES:BUSINESS,WORK
UID:A64440FC-6545-11E0-B7A1-3214E0D72085
REV:20110412165200
END:VCARD 
```

[您可以在此处](https://www.rfc-editor.org/rfc/rfc2425)和[此处](https://www.rfc-editor.org/rfc/rfc2426)阅读官方 3.0 规范。

作为最后的解决方案，有[很多 vCard 解析器](https://github.com/search?q=.vcf&p=1&ref=searchbar&type=Repositories&l=Objective-C)- 这是一个非常简单的协议。[您可以使用其中任何一个（或自己编写一个）并使用ABPersonCreatePeopleInSourceWithVCardRepresentation](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABPersonCreatePeopleInSourceWithVCardRepresentation)手动将联系人添加到通讯簿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T07:45:57.863

我创建了一个向后兼容的[VCard 类](https://github.com/jeroendesloovere/vcard)，它生成 .vcf 文件。但是对于 < iOS 8 的 iOS 设备，该类导出为 .ics 文件（然后将 VCard 包装在 VCalendar 文件中），因为这是在旧 iOS 版本上运行的唯一方法！

被成千上万的人使用！[在GitHub 上](https://github.com/jeroendesloovere/vcard)查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-19T10:33:36.573

从 iOS 9 / iPadOS 9 / watchOS 2.0 / macOS 10.11 开始，您应该使用`Contacts`框架，而不是使用`CNContactVCardSerialization`记录在的格式化程序类

[https://developer.apple.com/documentation/contacts/cncontactsuserdefaults](https://developer.apple.com/documentation/contacts/cncontactsuserdefaults)

不幸的是，我不再看到支持的 vCard 版本的提及。

# javascript - 检查用户是否喜欢我的页面或不使用页面 url 和 appId

> ID：13913158
> 
> 赞同：0
> 
> 时间：2012-12-17T11:22:02.520
> 
> 标签：javascript, facebook, facebook-like

从[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/) 我得到了这个脚本来在我的网站上显示类似按钮

```
<div id="fb-root"></div>
    <script>
   (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1&appId=155899567847";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
   </script>
    <div class="fb-like" data-href="http://website.com/project/hello" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div> 
```

我只有 appId 和 url，我可以检查当前用户是否喜欢我的页面？我查看了谷歌，发现了一些使用 PageId 的示例，但我不知道如何获取它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:29:49.683

`PageID`对于检查该页面是否已被其他来源点赞是必要的。如果您在同一页面（您的 facebook 页面），则意味着无需获取该 id，因为它会自动从会话或其他地方获取它。

您可以通过以下方式之一获取 PAGE ID，

[http://hellboundbloggers.com/2010/07/10/find-facebook-profile-and-page-id/](http://hellboundbloggers.com/2010/07/10/find-facebook-profile-and-page-id/)

[http://rieglerova.net/how-to-get-a-facebook-fan-page-id/](http://rieglerova.net/how-to-get-a-facebook-fan-page-id/)

# jquery - 列表项无法保留类

> ID：13913160
> 
> 赞同：1
> 
> 时间：2012-12-17T11:22:08.703
> 
> 标签：jquery

我在 ASP.NET 中使用 jQuery 代码在单击它时更改列表项的类。代码工作正常，但问题是`<li>`更改类有一段时间，但在代码完全加载时无法保留。我的代码是这样的：

jQuery：

```
$(document).ready(function () {
    //On Click Event
    $("ul.tabs li").click(function () {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
    });
}); 
```

HTML：

```
<div class="menu_nav">
    <ul class="tabs">
        <li><a href="default.aspx"><span>Home Page</span></a></li>
        <li><a href="support.aspx"><span>Support</span></a></li>
        <li><a href="aboutus.aspx"><span>About Us</span></a></li>
        <li><a href="services.aspx"><span>Services</span></a></li>
        <li><a href="contactus.aspx"><span>Contact Us</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:57:18.747

您的代码是正确的，请参见此处 jsfiddle.net/S3hGq/

但是点击后，您的浏览器会加载 url，因为它是一个链接。重新加载后，当然不再设置“活动”类。

是这样吗？给我一些更多的信息来帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:03:19.553

错误的做法。您需要“记住”最后一次单击的锚点（例如基于 id）或读取当前文档位置并基于该突出显示正确的项目。

我将为第二种方法提供代码：

```
$(document).ready(function () {
    //read current page:
    var page = document.location.href.split("/").splice(-1,1);

    //find proper item and mark it active:
    $("ul.tabs li a[href='" + page + "']").addClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T06:54:53.070

一些框架，如 Struts 2 和 Spring MVC for java 说我之前共享的 JavaScript 已经过时，所以我想出了 jquery 中相同功能的新版本。

```
 <script type="text/javascript">
          $(document).ready(function(){
          var testtitle=$('title').text();
          $("#"+testtitle).addClass('current');
          }); 
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:17:42.453

您必须为所有`li`标签提供一个 id。与它所链接的页面标题相同，例如链接到dashboard.aspx的li应该将dashboard作为id，并且dashboard.aspx应该将title作为dashboard，然后编写以下代码：

```
<script language="javascript" type="text/javascript">
    window.onload = function changeClass() {
        document.getElementById(document.title).setAttribute("class", "current");
    }
</script> 
```

在这段代码中，我通过 id 找到页面的标题，然后将类设置为链接的 li

# asp.net - 通过 asp.net 从 facebook 获取所有朋友并显示在标签中

> ID：13913163
> 
> 赞同：1
> 
> 时间：2012-12-17T11:22:21.007
> 
> 标签：asp.net, facebook

我可以访问 facebook 用户信息，但我想显示用户的所有朋友列表。

facebook的请求代码是

```
string clientId = "xxxxxxxxxxxxx";

        string redirectUrl = "http://localhost:4727/facebook.aspx";

        Response.Redirect(string.Format("https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}", clientId, redirectUrl)); 
```

我使用一些代码来获取

```
 if (Request.QueryString["code"] != null)
        {
            string token = GetAccessToken();
            string url = "https://graph.facebook.com/me?fields=id,email,first_name,last_name,gender,locale,link,username,timezone,location&access_token=" + token;
            //string url = "https://graph.facebook.com/me/friends?fields=id,name,picture,link&access_token=" + token;
            JObject myProfile = JObject.Parse(requestFBData(url));
            string myID = myProfile["id"].ToString().Replace("\"", "");
            string myName = myProfile["name"].ToString().Replace("\"", "");
            //string email = myProfile["email"].ToString().Replace("\"", "");

            Label1.Text = myID;
            Label2.Text = myName;
            Label3.Text = "Welcome to fb.somee.com  ";
            Image1.ImageUrl = "https://graph.facebook.com/me/picture?type=large&access_token=" + token;

        } 
```

我还需要做什么？？

# python - 用于将数字转换为单词以打印支票的 Python 脚本

> ID：13913165
> 
> 赞同：6
> 
> 时间：2012-12-17T11:22:36.287
> 
> 标签：python

我想我可以避免在这里重新发明轮子。

我需要一个 Python 脚本来将数字转换为单词以打印支票。

例如`1,10,543`，应该提供输出为`One lac ten thousand five hundred and forty three`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T11:58:20.300

编写了具有以下功能的自定义转换器：

*   Number to Word 转换器，可用于从 0 到 999999999 的数字，适合印度次大陆，即 lacs 和 crore（范围足够大，可以容纳许多用例）
*   包括派萨支持最多 2 位小数（四舍五入）
*   灵感来自[http://www.blog.pythonlibrary.org/2010/10/21/python-converting-numbers-to-words/上的帖子](http://www.blog.pythonlibrary.org/2010/10/21/python-converting-numbers-to-words/)
*   分析信息：此脚本在 0.458 秒的执行时间方面的性能较低，而上述脚本的 0.237 秒恰好运行 10000 次。

    ```
    class Number2Words(object):

            def __init__(self):
                '''Initialise the class with useful data'''

                self.wordsDict = {1: 'one', 2: 'two', 3: 'three', 4: 'four', 5: 'five', 6: 'six', 7: 'seven',
                                  8: 'eight', 9: 'nine', 10: 'ten', 11: 'eleven', 12: 'twelve', 13: 'thirteen',
                                  14: 'fourteen', 15: 'fifteen', 16: 'sixteen', 17: 'seventeen',
                                  18: 'eighteen', 19: 'nineteen', 20: 'twenty', 30: 'thirty', 40: 'forty',
                                  50: 'fifty', 60: 'sixty', 70: 'seventy', 80: 'eighty', 90: 'ninty' }

                self.powerNameList = ['thousand', 'lac', 'crore']

            def convertNumberToWords(self, number):

                # Check if there is decimal in the number. If Yes process them as paisa part.
                formString = str(number)
                if formString.find('.') != -1:
                    withoutDecimal, decimalPart = formString.split('.')

                    paisaPart =  str(round(float(formString), 2)).split('.')[1]
                    inPaisa = self._formulateDoubleDigitWords(paisaPart)

                    formString, formNumber = str(withoutDecimal), int(withoutDecimal)
                else:
                    # Process the number part without decimal separately
                    formNumber = int(number)
                    inPaisa = None

                if not formNumber:
                    return 'zero'

                self._validateNumber(formString, formNumber)

                inRupees = self._convertNumberToWords(formString)

                if inPaisa:
                    return 'Rs. %s and %s paisa' % (inRupees.title(), inPaisa.title())
                else:
                    return 'Rs. %s' % inRupees.title()

            def _validateNumber(self, formString, formNumber):

                assert formString.isdigit()

                # Developed to provide words upto 999999999
                if formNumber > 999999999 or formNumber < 0:
                    raise AssertionError('Out Of range')

            def _convertNumberToWords(self, formString):

                MSBs, hundredthPlace, teens = self._getGroupOfNumbers(formString)

                wordsList = self._convertGroupsToWords(MSBs, hundredthPlace, teens)

                return ' '.join(wordsList)

            def _getGroupOfNumbers(self, formString):

                hundredthPlace, teens = formString[-3:-2], formString[-2:]

                msbUnformattedList = list(formString[:-3])

                #---------------------------------------------------------------------#

                MSBs = []
                tempstr = ''
                for num in msbUnformattedList[::-1]:
                    tempstr = '%s%s' % (num, tempstr)
                    if len(tempstr) == 2:
                        MSBs.insert(0, tempstr)
                        tempstr = ''
                if tempstr:
                    MSBs.insert(0, tempstr)

                #---------------------------------------------------------------------#

                return MSBs, hundredthPlace, teens

            def _convertGroupsToWords(self, MSBs, hundredthPlace, teens):

                wordList = []

                #---------------------------------------------------------------------#
                if teens:
                    teens = int(teens)
                    tensUnitsInWords = self._formulateDoubleDigitWords(teens)
                    if tensUnitsInWords:
                        wordList.insert(0, tensUnitsInWords)

                #---------------------------------------------------------------------#
                if hundredthPlace:
                    hundredthPlace = int(hundredthPlace)
                    if not hundredthPlace:
                        # Might be zero. Ignore.
                        pass
                    else:
                        hundredsInWords = '%s hundred' % self.wordsDict[hundredthPlace]
                        wordList.insert(0, hundredsInWords)

                #---------------------------------------------------------------------#
                if MSBs:
                    MSBs.reverse()

                    for idx, item in enumerate(MSBs):
                        inWords = self._formulateDoubleDigitWords(int(item))
                        if inWords:
                            inWordsWithDenomination = '%s %s' % (inWords, self.powerNameList[idx])
                            wordList.insert(0, inWordsWithDenomination)

                #---------------------------------------------------------------------#
                return wordList

            def _formulateDoubleDigitWords(self, doubleDigit):

                if not int(doubleDigit):
                    # Might be zero. Ignore.
                    return None
                elif self.wordsDict.has_key(int(doubleDigit)):
                    # Global dict has the key for this number
                    tensInWords = self.wordsDict[int(doubleDigit)]
                    return tensInWords
                else:
                    doubleDigitStr = str(doubleDigit)
                    tens, units = int(doubleDigitStr[0])*10, int(doubleDigitStr[1])
                    tensUnitsInWords = '%s %s' % (self.wordsDict[tens], self.wordsDict[units])
                    return tensUnitsInWords

    if __name__ == '__main__':

        wGenerator = Number2Words()
        print wGenerator.convertNumberToWords(100000) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-04T07:52:25.013

您可以使用 python 库[num2words](https://github.com/savoirfairelinux/num2words) ( `pip install num2words`)：

例子：

```
from num2words import num2words
num2words(110543, to='cardinal', lang='en_IN') 
```

输出：

```
'one lakh, ten thousand, five hundred and forty-three' 
```

# ruby - 如何使用 imagemagick 创建高分辨率 QR 码图像？

> ID：13913168
> 
> 赞同：0
> 
> 时间：2012-12-17T11:22:47.920
> 
> 标签：ruby, rubygems, imagemagick

如何使用 imagemagick 创建 300 DPI QR 码？我可以在哪里以毫米为单位定义宽度和高度。

我搜索了 ruby​​gems 并找到了一些 QR 码库。但没有找到使用 imagemagick 的合适解决方案。我需要生成大量的二维码，因此我需要一些二维码库来使用 imagemagick，因为我需要添加额外的图形，比如一些背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:43:53.877

[rqrcode](http://whomwah.github.com/rqrcode/)是一个很好的起点

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T11:25:15.323

您可以使用

```
mogrify -density 300 img.jpg 
```

# c# - 在后台线程上格式化 winforms UI

> ID：13913171
> 
> 赞同：1
> 
> 时间：2012-12-17T11:23:05.393
> 
> 标签：c#, winforms, multithreading, datagridview

我有一个表单“StartForm”，用户在其中选择组合框，然后单击一个按钮。从那里我想：

1.  生成另一个表单的实例，“MainForm”

2.  在该表单上填充大约 50 000 行的 DataGridView

3.  循环遍历数据网格视图中的每一行并对其执行一些处理。就我而言，它根据单元格的值格式化行颜色，并更新一些列。

4.  显示表格。

这是直截了当的，但是由于大量的行和每一行的处理时间，UI 在构造 MainForm 时冻结。因此，我需要在后台线程上构建 MainForm，并在此过程中在 StartForm 上填充进度条。

使用 backgroundWorker 时，我不断收到跨线程异常或我的格式丢失，并且 control.Invoke() 似乎也抛出异常。也许我只是没有正确使用这些......

有人可以解释一下如何完成上述工作吗？我试图让问题保持基本理解，以便对其他人有所帮助，但如果您想要我的代码，请询问。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:27:20.240

我认为您需要为数据网格实现虚拟模式。[查看有关在 DataGridView 控件中实现虚拟模式的](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)msdn 文章。小样本：

```
grid.VirtualMode = true; // enable virtual mode
grid.RowCount = source.Count; // 50000
grid.CellValueNeeded += grid_CellValueNeeded;
grid.CellPainting += grid_CellPainting; 
```

使用`CellValueNeeded`事件处理程序为单元格提供值（即从源中选择值）。使用`CellPainting`事件处理程序根据单元格值设置单元格颜色（使用`e.CellStyle`属性）。如果用数据填充源需要很长时间，您可以在 BackgroundWorker 中执行此操作。但是在虚拟模式下格式化和显示数据 - 这是最好的选择，当你有大量的行时（顺便说一句，考虑应用一些过滤 - 很少用户一次需要 50000 行数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:42:58.667

默认情况下，所有工作都在 UI 线程上完成，这会产生“崩溃”的错觉，因为在繁重的工作期间 UI 变得无法访问。在不是 UI 线程的线程上创建表单本身是可能的，但这意味着该表单只能由创建它的线程访问，因此这不太可能是您想要的。你得到了`cross-thread exception`因为你试图从另一个线程修改 UI 线程。

您可以尝试在后台线程上加载和处理所有数据，但将其加载到新的临时`DataTable`. 然后，在 UI 线程上使用[DataSet.Merge](http://msdn.microsoft.com/en-us/library/system.data.dataset.merge.aspx)（如果您使用的是 BackgroundWorker，则可能在`RunWorkerCompleted`事件中）并将临时 DataTable 与绑定到 DataGridView 的主 DataSet 合并。

That should mean all the processing and heavy work is done on a background thread, but the `DataGridView` control is updated on the UI thread, thus bypassing any invalid cross-threading. One side note is that you should test the performance of the `DataSet.Merge`.

# sql - 将 SQL 列中的分隔值拆分为使用多个分隔符的多行

> ID：13913173
> 
> 赞同：0
> 
> 时间：2012-12-17T11:23:07.357
> 
> 标签：sql, sql-server, sql-server-2005

我正在寻找一些帮助来拆分在 sql 函数/语句中使用多个分隔符的字段。我已经按照[这里列出的几个例子](https://stackoverflow.com/questions/11018076/splitting-delimited-values-in-a-sql-column-into-multiple-rows)

在这里，与单个分隔符一起工作得很好。但是，我需要拆分基于以下内容的字段。它的格式是 qty x itemno description、qty x itemno description 等。因此我需要将第一个“x”第二个空格“”和最后一个逗号上的语句分开。我想我可以根据一个正则表达式语句，但不确定如何去做..

有人可以帮忙吗？

```
 OnSameLine = substring( ( SELECT ', ' + 
                 coalesce (CAST(CNT.qty AS varchar(1000)), '') +                  
                 ' x ' + '['+ coalesce (CNT.Itemno,'') + ']' + 
                 ' ' + coalesce (STK.Desc#1,'') 
```

我需要的格式..

```
PK qty itemno description
PK qty itemno description 
```

ETC..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:07:44.320

尝试这个：

基于[这里的文章](http://jingyangli.wordpress.com/2012/10/18/split-string-with-multiple-delimiters-t-sql-xml-method/)

```
;with T(id, Cols) as
(
  select 1, '10 x 1234 description1,11 x 456 description2' 
  UNION ALL
  select 2, '40 x 123478 description3,51 x 45678 description4' 
),
--first split all comma separated into different rows
CTE2 AS 
(
    SELECT id, 
    CAST(N'<H><r>' + replace(Replace(Vals.a.value('.', 'NVARCHAR(50)'),
        ' ','|'), '|', '</r><r>') + '</r></H>' as XML) Cols
    FROM
    (
    SELECT *,CAST (N'<H><r>' + Replace(cols,',','</r><r>') + 
        '</r></H>' AS XML) AS [vals]
    FROM T) d
    CROSS APPLY d.[vals].nodes('/H/r') Vals(a)
)
-- split all ' ' demilited values now
SELECT distinct id, Vals.a.value('(/H/r)[1]', 'VARCHAR(100)') AS Qty,
Vals.a.value('(/H/r)[2]', 'VARCHAR(100)') AS X,
Vals.a.value('(/H/r)[3]', 'VARCHAR(100)') AS ItemNo,
Vals.a.value('(/H/r)[4]', 'VARCHAR(100)') AS Description
FROM
(
SELECT *
FROM CTE2) d
CROSS APPLY d.[cols].nodes('/H/r') Vals(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:20:02.233

**如果你只是想分割，交换数量和PK，试试这个；**

```
DECLARE @S VARCHAR(max)= 'Q1 PK1 ITM1 D1,Q2 PK2 ITM2 D2'

DECLARE @X XML
SELECT @X  = '<myxml><n><d>' + 
             REPLACE (@S,',','</d></n><n><d>') + '</d></n></myxml>'

SELECT SUBSTRING(x,firstSpace,secondSpace-firstSpace) + ' ' + 
       SUBSTRING(x,1,firstSpace) + ' ' + 
       SUBSTRING(x,secondSpace,len(x))
FROM ( --Getting CharIndex of first and second spaces
    SELECT x, CHARINDEX(' ',x,1) firstSpace, CHARINDEX(' ',x,CHARINDEX(' ',x,1)+1) secondSpace
    FROM ( --Spliting by "," into records 
        SELECT C.value('d[1]','VARCHAR(50)') x
        FROM @X.nodes('/myxml/n') Cols (C) ) T1
) T2 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!3/d41d8/7250)

```
--Data
'Q1 PK1 ITM1 D1,Q2 PK2 ITM2 D2'

--Results
'PK1 Q1 ITM1 D1'
'PK2 Q2 ITM2 D2' 
```

**如果你想把它们分成几列，那么试试这个；**

```
DECLARE @S VARCHAR(500)= 'Q1 PK1 ITM1 D1,Q2 PK2 ITM2 D2'
DECLARE @X XML

SELECT @X  = '<myxml><n><d>' + 
REPLACE(REPLACE (@S,',','</d></n><n><d>'), ' ', '</d><d>') + 
'</d></n></myxml>'

SELECT  C.value('d[2]','VARCHAR(50)') PK,
        C.value('d[1]','VARCHAR(50)') Qty,
        C.value('d[3]','VARCHAR(50)') Item,
        C.value('d[4]','VARCHAR(50)') Description
        FROM @X.nodes('/myxml/n') Cols (C) 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!3/d41d8/7252)

```
--Data 
'Q1 PK1 ITM1 D1,Q2 PK2 ITM2 D2'

--Results
PK1 | Q1 | ITM1 | D1
PK2 | Q2 | ITM2 | D2 
```

# java - 信息隐藏和封装有什么区别？

> ID：13913174
> 
> 赞同：28
> 
> 时间：2012-12-17T11:23:11.670
> 
> 标签：java, oop, encapsulation, modularity, information-hiding

*信息隐藏*和*封装*有什么区别？

我读过封装意味着将数据和应该对它们进行操作的过程捆绑在一起。如果是这样，下面的类是否实现了封装？

```
class IsThisEncapsulation {
    public int age;

    public int getAge() {
        return this.age;
    }

    public void setAge(int age) {
        this.age = age;
    }
} 
```

现在声明数据属性会`age` `private`实现信息隐藏吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T11:55:30.157

> 好吧，我知道将字段设为私有，然后将字段的 setter 和 getter 设为封装。然而，封装仅意味着这个吗？

---> 封装是一个 OOP 概念，其中对象状态（类字段）及其行为（方法）被包装在一起。Java 使用`class`.

> 信息隐藏：

--> 用于限制对某些对象组件的访问的机制。如果您将其设为`age`私有，则上述示例是信息隐藏的情况。

* * *

最初，信息/数据隐藏被认为是封装的一部分，封装的定义如下：

*   一种语言机制，用于限制对某些对象组件的访问。
*   一种语言结构，有助于将数据与操作该数据的方法（或其他功能）捆绑在一起。

第二个定义的动机是，在许多 OOP 语言中，组件的隐藏不是自动的或可以被覆盖；因此，喜欢第二种定义的人将信息隐藏定义为一个单独的概念。

参考：[维基页面](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-14T20:43:55.253

封装和信息隐藏是密切相关的概念，尽管它们的精确定义取决于您与谁交谈。

“信息隐藏”的概念首先由[Parnas (1972)](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.132.7232)描述，他建议应该限制对信息的访问，以减少系统的互连性。他建议这将有助于将系统拆分为模块，同时保持用户友好的外部界面，并允许在不影响客户端的情况下更改实施细节。

[Zilles (1973)](http://dl.acm.org/citation.cfm?doid=800021.808305)创造了术语“封装”来描述使用过程来控制对底层数据的访问，以降低系统复杂性并保护数据免受危险修改。

随后，[Parnas (1978)](https://courses.cs.washington.edu/courses/cse503/08wi/parnas-1979.pdf)将信息隐藏和封装（和抽象）描述为同义词，它们描述了隐藏可能更改的系统细节。然而，信息隐藏和封装之间已经有了区别，例如[Micallef (1987)](http://dl.acm.org/citation.cfm?id=36160.36167)将封装描述为“对信息隐藏的严格执行”。一些作者，例如[Cohen (1984)](http://doi.acm.org/10.1145/948415.948418)和[Abreu 和 Melo (1996)](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.49.3479)将“封装机制”描述为允许信息隐藏，特别是在面向对象的编程语言中。

[Meyers (2000)](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)提出，一段代码的封装程度取决于如果它发生变化会被破坏的代码量。从这个意义上说，私有数据和方法被封装得越多，访问它们的方法就越少。相比之下，公共数据和方法是完全未封装的，因为可以访问它们的代码量是未知的。

相反，[Rogers (2001)](http://www.javaworld.com/article/2075271/core-java/encapsulation-is-not-information-hiding.html)认为封装只是一种语言机制，它允许将数据与操作该数据的方法捆绑在一起。他声称封装从根本上与信息隐藏无关。然而，这一定义与他的文章发表之前的 28 年学术文献中对该术语的几乎所有用法背道而驰。还有*其他*一些这种用法的例子，例如[Archer 和 Stinson (1995)](http://repository.cmu.edu/sei/214/)，但它们很少而且相差甚远，也不是特别引人注目。

总之，信息隐藏是指信息应该被隐藏，以便可以在不影响客户的情况下更改设计。这允许增加灵活性和安全性。封装可能被认为与信息隐藏相同，但该术语通常用于描述信息隐藏的实际实现，尤其是在面向对象的编程中。

作为信息隐藏/封装的一个例子，考虑这个类：

```
public class BankAccount {
    public int dollars;
} 
```

这个类的实现是完全未封装的，这意味着它不灵活（例如我们以后不能轻易添加对单个美分的支持）并且不安全（例如可以将帐户更改为负数）。但是，如果我们将数据隐藏在正式定义的方法接口后面，我们将获得灵活性和安全性。

```
public class BankAccount {
    private int dollars;

    public void deposit(int dollars) {
        this.dollars += Math.max(0, dollars);
    }
} 
```

我们现在可以控制如何修改状态，并且我们还可以在不破坏客户端代码的情况下更改实现：

```
public class BankAccount {
    private int cents;

    public void deposit(int dollars) {
        deposit(dollars, 0);
    }

    public void deposit(int dollars, int cents) {
        this.cents += Math.max(0, 100 * dollars) + Math.max(0, cents);
    }
} 
```

该类现在被更好地封装，因为我们隐藏了有关其底层实现的信息。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-17T11:24:57.353

从[抽象与信息隐藏与封装](https://stackoverflow.com/questions/24626/abstraction-vs-information-hiding-vs-encapsulation)

> 抽象和封装是互补的概念：抽象关注对象的可观察行为……封装关注引起这种行为的实现……封装通常通过信息隐藏来实现，即隐藏所有信息的过程不影响其本质特征的对象的秘密。

**信息隐藏：**

> “选择它的界面或定义是为了尽可能少地揭示其内部运作。” ——[帕纳斯，1972b]
> 
> “抽象可以 [...] 用作识别应该隐藏哪些信息的技术。”
> 
> “当人们无法区分隐藏信息和用于帮助识别要隐藏哪些信息的技术（例如，抽象）时，就会出现混淆。”

**封装：**

> “它 [...] 是指围绕一些事物集合构建一个胶囊，在这种情况下是一个概念障碍。” — [Wirfs-Brock 等人，1990 年]
> 
> “作为一个过程，封装是指将一件或多件物品封装在 […] 容器内的行为。封装作为一个实体，是指容纳（包含、封装）一件或多件物品的包装或外壳。”
> 
> “如果封装是‘与信息隐藏一样’，那么人们可能会提出‘所有被封装的东西也被隐藏’的论点。这显然不是不正确的。”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-17T11:28:43.017

它们之间有细微的差别，我喜欢 Steve Freeman 和 Nat Pryce 写的“Growing Object-Oriented Software Guided by Tests”一书中的描述：

其中说：

**封装**

确保对象的行为只能通过其 API 受到影响。它让我们通过确保不相关的组件之间没有意外的依赖关系来控制对一个对象的更改将对系统的其他部分产生多大的影响。

**信息隐藏**

隐藏对象如何在其 API 抽象背后实现其功能。它允许我们通过忽略与手头任务无关的较低级别的细节来处理更高的抽象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T11:29:27.240

只看他们的字面意思。封装只是把东西放在一个袋子里。即把所有的属性和方法都放在一个类中实现了封装，但是在一定程度上你也通过封装实现了信息隐藏。访问修饰符对封装没有贡献，但对信息隐藏有贡献。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-08T20:22:02.490

```
class NoEncapsulationNoInformationHiding { 
    public List widths = new ArrayList();
}

class EncapsulationNoInformationHiding {
    private ArrayList widths = new ArrayList();

    public ArrayList getWidths() {
        return this.widths;
    }
}

class EncapsulationInformationHiding {
    private List widths = new ArrayList();

    public List getWidths() {
        return this.widths;
    }
} 
```

*   *封装*：组合事物，例如数据和对这些数据进行操作的过程（组成一个对象）。封装意味着隐藏对象的数据，因为任何过程都可以对公共数据进行操作。
*   *信息隐藏*：抽象事物，例如对象的实现，即对象的数据，其过程的实现，以及其过程的参数和返回值的类。信息隐藏意味着封装，但反之则不然。

示例灵感来自[威廉·安德伍德的](http://wiki.c2.com/?EncapsulationIsNotInformationHiding).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T11:36:00.517

要回答您的问题：

信息隐藏：隐藏对象的基本部分，这些部分暴露了内部实现的方式并暴露了更高的抽象。例如：在电视遥控器中，我们只接触到与电视交互的按键，我们不知道里面有什么。

封装：封装是将数据和方法结合起来，允许公共方法访问内部数据。所以，是的，如果在您的班级中，您将变量 age 设为私有，您将实现封装

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-12T08:11:41.177

当您不实施信息隐藏、封装或任何它所称的事情时，就会发生这种情况。当你在某个角落的某个地方改变你认为独立的东西时，就会发生不好的事情。其次，当您想更改系统中使用的第三方库时，您会发现系统中到处都有引用，如果不重构整个事物就无法移动。例如，您想升级您的数据访问库版本（我想更新 ODP.net 版本时遇到了这个问题），您估计工作是想修改应该引用数据库的 DataAccess 类客户端库。但是您会发现每个业务类都为 DB 客户端库创建了一个引用。现在您必须更新 60 个程序集的引用而不是一个 :( [信息泄露](https://i.stack.imgur.com/hV0n7.png)

当您向客户端公开内部逻辑时，也会发生同样的事情。例如，您有一个函数 EnrollMember(string flag)，您接受“A”、“B”作为有效标志并在函数内部执行一些逻辑。当您想稍后更改此功能时，您不能在不通知客户的情况下进行。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-01-20T05:31:58.373

-> 封装允许我们提供对对象某些部分的访问，同时限制对其他部分的访问。换句话说，封装允许我们进行信息隐藏。

-> 信息隐藏实际上是限制的过程或行为

# c++ - 使用带有 Ycbcr 值的 opencv 的 cvScalar

> ID：13913179
> 
> 赞同：0
> 
> 时间：2012-12-17T11:23:15.873
> 
> 标签：c++, opencv

我正在尝试使用`cvInRange`需要两个`Scalar`参数的 OpenCV 函数，问题是我需要使用`YcbCr`标量最小值和最大值的值，有人知道如何制作吗？

```
cvInRangeS(imgYCbcr,  
        cvScalar( Ymax, Cbmax, Crmax  ),  
        cvScalar( Ymin, Crmin, Crmin ), 
        imgThresh); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:45:58.763

将图像从转换`BGR`为`YCrCb`（请参阅[`cvtColor`](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)）并使用[`inRange`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#inrange)（不是`cvInRangeS`- 这是一个`c`函数，您需要`c++`）函数来获取所需的掩码。

# jquery - jqGrid TreeGrid 不向服务器发送附加数据

> ID：13913181
> 
> 赞同：1
> 
> 时间：2012-12-17T11:23:26.887
> 
> 标签：jquery, jqgrid, treegrid

我有一个 jqGrid Treegrid 定义如下：

```
$('#MyGrid').jqGrid({
    colNames: ['Id','Nome','Nivel','Combo',''],
    colModel: [
        { hidden: true, name: 'Id' },
        { editable: true, name: 'Nome' },
        { hidden: true, name: 'Nivel' },
        { name: 'Combo', editable: true, edittype: 'select',
            editoptions: {
                buildSelect: createSelectList ,
                dataUrl: '/Home/GetCombo' // <-- to this controller, I want
                    // to send the id of the row edited to load custom items
                    // in select object
            }}, 
        { formatter: 'actions', formatoptions: { keys: true },
            resizable: false, search: false, sortable: false,
            width: 60, viewable: false, name: 'actions' }
    ],
    cellEdit: true,
    url: '...',
    datatype: 'json',
    editurl: '...',
    jsonReader: {
        repeatitems: false,
        id: 'Id',
        subgrid: { repeatitems: false }
    }, 
    mtype: 'POST',
    gridComplete: function() { myOnGridComplete(); },
    ajaxSelectOptions: {
        data: {
            tempid: function () {
                // !!! the next line always returns null
                return $('#MyGrid').jqGrid('getGridParam', 'selrow');
            }
        }
    }, 
    prmNames: { npage: 'npage' }, 
    rowNum: -1,
    ExpandColClick: true,
    ExpandColumn: 'Nome',
    treeGrid: true,
    treeGridModel: 'adjacency',
    width: 700,
    height: '100%'
}); 
```

我的目标是将当前行 ID 发送到服务器，但是当我使用*$('#MyGrid').jqGrid('getGridParam', 'selrow') 时，*我总是得到一个空值。

我已经阅读了这篇文章，但没有一个能解决我的问题：

*   [jqgrid dataUrl函数代码段有问题](https://stackoverflow.com/questions/8148843/having-trouble-with-jqgrid-dataurl-function-code-segment/8150307#8150307)

*   [带有参数化查询的 jqGrid setSelect 函数](https://stackoverflow.com/questions/8063876/jqgrid-setselect-function-with-parametrized-query/8067258#8067258)

*   [jqGrid，如何从查询中填充选择列表](https://stackoverflow.com/questions/841739/jqgrid-how-to-populate-select-list-from-query)

有什么建议吗？

提前谢谢！

**更新1：**

TreeGrid 绑定没问题。真正的问题是当我单击叶节点中的编辑按钮时。在这种情况下，我想向服务器发送额外的数据。

我尝试使用 来完成此操作`ajaxSelectOptions`，但此命令始终返回 null：`$('#MyGrid').jqGrid('getGridParam', 'selrow')`

**解决方法**

这是我在 Oleg 帮助之前所做的一种解决方法：

第 1 步：在 HTML 中创建隐藏字段

第 2 步：在我的 myOnGridComplete 函数中，我为编辑按钮设置了一个点击事件：

```
function onGridAjusteDTOComplete()
{
    $('#MyGrid').find('span.ui-icon-pencil').each(function() {
        $(this).click(function(){
            var rowID = $(this).parents('tr').attr('id');
            // !!! the next commented line not work in my case
            // $('#MyGrid').jqGrid('setSelection', therowid );
            $('#myHiddenField').val(rowID); // <-- this works
        });
    });
} 
```

第3步：`rowID`从隐藏字段中获取`ajaxSelectOptions`：

```
ajaxSelectOptions: "{type: 'GET', contentType: 'application/json; charset=utf-8',dataType: 'json',cache: false, async:false, data: {id: function () { return $('#myHiddenField').val(); }}}" 
```

**解决方案**

请参阅下面 Oleg 提供的解决方案。真是太神奇了。谢谢奥列格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:01:28.893

我不确定我是否正确理解了您的问题。TreeGrid在加载子节点时**自动**发送父节点的 id。请参阅有关将发送到服务器的, ,参数[的文档。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadjacency_model#what_we_post)所以我不明白为什么您可能需要另外将当前选定行的 id ( ) 发送到服务器。`nodeid``parentid``n_level``selrow`

**更新**：现在我了解您描述的问题的原因。这是一个非常有趣的问题，可能会有其他人。

真正的解决方案是更改 jqGrid 的代码以支持一些回调函数，该函数可以构造调用 which build`data`中使用的参数。对jqGrid原代码最简单的修改就是插入行`$.ajax``<select>`

```
var rowid = $.jgrid.stripPref($t.p.idPrefix,
        String(options.id).substring(0, String(options.id).length - String(options.name).length - 1)); 
```

在将调用with的代码行[之前。](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.common.js#L346)此外，还需要在 中添加一个参数：`$.ajax``dataUrl``$.ajax`

```
data: $.isFunction(ajaxso.postData) ?
    ajaxso.postData.call($t, rowid, String(options.name), vl) :
    ajaxso.postData, 
```

进行此类更改后，您将可以使用

```
ajaxSelectOptions: {
    postData: function (rowid, colName, value) {
        return { id: rowid };
    }
} 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SelectIdForActions_.htm)证明该方法有效。您可以在 Fiddler、Firebug 或开发人员工具中看到该选项`id`将真正发送到 URL。稍后我会向 trirand 发布相应的建议（我想针对更常见的情况做一些额外的改进）

如果您需要使用当前版本的 jqGrid 实现解决方案，您可以改为执行以下操作。您可以“子类化”`$.jgrid.createEl`执行`$.ajax`请求的方法。实现也很简单：

```
var originalCreateEl = $.jgrid.createEl,
    createElementOptions;

$.extend($.jgrid, {
    createEl: function (eltype, options, vl, autowidth, ajaxso) {
        if (options.dataUrl) {
            createElementOptions = options;
        }
        return originalCreateEl.call(this,eltype, ptions,vl,autowidth,ajaxso);
    }
});

$('#MyGrid').jqGrid({
    ...
    ajaxSelectOptions: {
        data: {
            id: function () {
                var id = createElementOptions.id,
                    colName = createElementOptions.name;
                if (typeof id !== "string" || typeof colName !== "string") {
                    return null;
                }
                return id.substring(0, id.length - colName.length - 1);
            }
        }
    }
}); 
```

[下一个演示](http://www.ok-soft-gmbh.com/jqGrid/SelectIdForActions.htm)演示了该方法。

**更新 2**：我发布[了拉取请求](https://github.com/tonytomov/jqGrid/pull/404)以支持ajaxSelectOptions的`postData`as 属性。`` and`现在提交请求（请参阅[此处](https://github.com/tonytomov/jqGrid/commit/c5a4998582cbf60761ab8d7c96f36b784a51857b)）。所以 jqGrid 的下一个版本（4.4.1 更高版本）将具有“开箱即用”的功能。

# c++ - Swipl 中的套接字

> ID：13913182
> 
> 赞同：2
> 
> 时间：2012-12-17T11:23:32.070
> 
> 标签：c++, sockets, tcp, swi-prolog

所以我目前正处于构建游戏的开始阶段，我正在使用 prolog 作为游戏的服务器端来对棋盘中的游戏进行验证检查。

我目前有两个问题。

一：似乎无法在不中止的情况下关闭服务器，从而使套接字保持打开状态。代码如下

服务器：

```
:- use_module(library(socket)).

create_server(Port) :-
        tcp_socket(Socket),
        tcp_bind(Socket, Port),
        tcp_listen(Socket, 5),
        tcp_open_socket(Socket, AcceptFd, _),
    dispatch(AcceptFd).

dispatch(AcceptFd) :-
        tcp_accept(AcceptFd, Socket, Peer),
        thread_create(process_client(Socket, Peer), _,
                      [ detached(true)
                      ]),
        dispatch(AcceptFd).

process_client(Socket, _Peer) :-
        setup_call_cleanup(tcp_open_socket(Socket, In, Out),
                           handle_service(In, Out),
                           close_connection(In, Out)).

close_connection(In, Out) :-
        close(In, [force(true)]),
        close(Out, [force(true)]).

handle_service(In, Out) :-
    read(In, Int),
    writeln(Int),
    (   Int == end_of_file
    ->  true
    ;   
        call_test(Int,Term),
        format(Out, 'seen(~q).~n', [Term]),
        flush_output(Out),
        handle_service(In, Out)
    ).

call_test(test,Term):-Term = 'really test'.
call_test(validate(teste),Term):-
    String = "validate(test)",
    string_to_list(String,List),
    read_from_chars(List,Stringf),
    writeln(Stringf), 
    Term = 'foo'. 
```

客户：

```
:- use_module(library(streampool)).

create_client(Host, Port) :-
        setup_call_catcher_cleanup(tcp_socket(Socket),
                                   tcp_connect(Socket, Host:Port),
                                   exception(_),
                                   tcp_close_socket(Socket)),
        setup_call_cleanup(tcp_open_socket(Socket, In, Out),
                           chat_to_server(In, Out),
                           close_connection(In, Out)).

chat_to_server(In, Out) :-
        read(Term),
    (   Term == end_of_file
    ->  true
    ;   format(Out, '~q .~n', [Term]),
        flush_output(Out),
        read(In, Reply),
        write(Reply),
        %format('Reply: ~q.~n', [Reply]),
        chat_to_server(In, Out)
    ).

close_connection(In, Out) :-
        close(In, [force(true)]),
        close(Out, [force(true)]). 
```

我可以使用 ctrl+D（即 end_of_file）毫无问题地关闭客户端，但我的服务器没有关闭...它接收 end_of_file，它打印 end_of_file 但它没有关闭。即使将其直接插入服务器也不行。我究竟做错了什么？

二：我需要将一个字符串从 C++ 传递给 Swipl，其中包含要使用的谓词名称和参数。有人可以告诉我如何做到这一点，或者至少指出我正确的方向吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:52:08.610

不`Int == end_of_file`应该`Int = end_of_file`，检查统一？我在这里可能错了，我使用 sicstus。

至于如何传递谓词名称和参数，这样的事情应该有效

```
call_test(Request, Answer) :-
    Request = Pred(Arg1, Arg2, Arg3),
    Request,
    Answer = somethingHere. 
```

然后在 C++ 中简单地做

```
//pseudo-code
write(socket, "myPredicate(myArg1, myArg2, myArg3).\n"); 
```

如果你告诉它，Prolog 会将传入的字符串转换为实际代码。另一种更通用的实现是

```
call_test(Request, Answer) :-
    Pred =.. Request,
    Pred,
    Answer = somethingHere. 
```

在 C++ 中

```
write(socket, "[myPredicate, Arg1, Arg2, Arg3].\n");
//supports variable number of args 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:01:58.970

一：你可以用简单的方法或复杂的方法来解决这个问题。简单的方法是不仅重新启动您的服务器，还重新启动 Prolog 解释器。复杂的是调用一个谓词，当收到“关闭”消息时干净地退出程序。

二：read/2 谓词，它以输入流（在本例中为套接字的读取端）和一个变量作为参数，解析后的输入将被放置在其中，它只是你想要的：它从输入并将其转换为它所代表的 Prolog 术语，就像您在 Prolog 程序中编写它一样。请注意，在术语之后，输入必须包含一个点来告诉 Prolog 术语已经结束（如另一个答案所示）。

# java - HttpClient.execute 抛出 OutOfMemoryError

> ID：13913186
> 
> 赞同：11
> 
> 时间：2012-12-17T11:23:42.417
> 
> 标签：java, android, json, httpclient, out-of-memory

我有一个使用对象`JSONObject`作为实体发布的 Android 应用程序。`ByteArrayEntity`这里的样子：

```
post.setEntity(new ByteArrayEntity(entity.getBytes("UTF-8")));
result = client.execute(post, handler); 
```

实体是一个`String`. 处理程序是`ResponseHandler<String>`，客户端是`HttpClient`. 这在模拟器和某些设备上运行良好。但是，有时我在执行`x10i`（也称为 XPERIA）时遇到 OutOfMemoryError。

这是堆栈：

```
java.lang.OutOfMemoryError
at org.apache.http.impl.io.AbstractSessionInputBuffer.init(AbstractSessionInputBuffer.java:79)
at org.apache.http.impl.io.SocketInputBuffer.<init>(SocketInputBuffer.java:93)
at org.apache.http.impl.SocketHttpClientConnection.createSessionInputBuffer(SocketHttpClientConnection.java:83)
at org.apache.http.impl.conn.DefaultClientConnection.createSessionInputBuffer(DefaultClientConnection.java:170)
at org.apache.http.impl.SocketHttpClientConnection.bind(SocketHttpClientConnection.java:106)
at org.apache.http.impl.conn.DefaultClientConnection.openCompleted(DefaultClientConnection.java:129)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:171)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:580)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:678)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:652)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
at com.test.application.api.Request.post(Request.java:102)
at com.test.application.api.API.getResult(API.java:123)
at com.test.application.api.APITask.doInBackground(APITask.java:127)
at com.test.application.api.APITask.doInBackground(APITask.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019) 
```

正如我所说，我只是将 JSONObject 作为字符串发布。最多可能是 200 个字符。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:04:48.397

Android 设备具有每个进程的内存限制。默认默认值为 24MB，但某些设备的值较低，例如 16MB 或更低。X10i 似乎有 384MB 的 RAM，这对于现代 Android 设备来说是很低的（现在标准是 1GB），这可能会带来额外的限制。

我会建议：

1.  首先检查设备上的每个进程限制。使用[ActivityManager.getMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)进行检查。
2.  [使用DDMS](http://developer.android.com/tools/debugging/ddms.html)查看您的实际内存使用情况。

您可能会发现，就在您进行此调用之前，您已经处于内存上限；HTTPClient 的初始化和调用可能会使您超出限制。如果 OOM 在第*一次*调用时发生，则更有可能发生这种情况。

如果这种情况只是偶尔发生，或者在多次调用之后发生，则可能存在内存泄漏。[DDMS 将帮助您使用获取分配](http://developer.android.com/tools/debugging/ddms.html#alloc)功能进行跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:31:44.003

如果`java.lang.OutOfMemoryError`您的应用程序可能保留对应该释放的对象的引用。尝试在此手机上调试此应用程序，而不是在模拟器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:21:19.427

从表面上看，即使在 Android 上，仅分配不经常分配的 200 个字节也不会导致进程内存不足。因此，这些假设之一是错误的。以下情况之一很可能是正确的：

1) 在失败情况下分配了超过 200 个字节（例如，是否为每次调用分配了一个新的 HttpClient）。

2) 这段代码*经常*被调用

3) 已经存在内存问题（如图像），这只是应用程序超出其限制的最后一次分配。

这行代码有多少次是这个问题的罪魁祸首？如果答案很多，那么 1) 或 2) 看起来很可能。由于我们没有所有应用程序代码，因此很难诊断，但请查看触发此代码的事件/环境——它是从触摸还是移动中调用的——如果是这样，用户每毫秒都会发生这种情况因为 onTouch 循环中没有睡眠，他们的手指在屏幕上拖动？这种事情可能因平台而异。

如果这行代码只导致了一次或两次问题，那么可能是时候寻找一般的内存使用问题了。尝试确定应用程序与内存限制的接近程度。限额因 Android 版本而异，因此这可能是您在模拟器中看不到它的另一个原因。尝试使用遇到问题的相同 Android 版本进行测试。

# javascript - 为什么引入了新的 JSLint 错误“使用空格，而不是制表符”和“不安全字符”？

> ID：13913189
> 
> 赞同：60
> 
> 时间：2012-12-17T11:23:58.667
> 
> 标签：javascript, jslint

我已经使用 JSLint 验证我的 JavaScript 大约 2 年了，偶尔会有一些规则发生变化。一般来说，当 JSLint 引入新规则时，有一个复选框可以在解析时忽略此规则，或者如果您选择不忽略它，则使您的代码符合它。

然而，当我今天运行 JSLint 验证时，我遇到了以下两个新错误：

> 使用空格，而不是制表符。

这不是“混合制表符和空格”错误。我只使用标签。这是“混合制表符和空格”的最近修改版本，现在一般不允许使用制表符。

和：

> 不安全的性格。
> 
> */
> 
> 不安全的性格。
> 
> _const: {

没有新的选择可以忽略。我无法理解关闭块注释的不安全之处，为什么它认为 _const: { 当我有`nomen: true`, 时不安全（在标识符中悬挂 _）或者为什么我应该突然从空格切换到制表符，当我仍然有关于缩进的配置时4 个空格是一个制表符。

有谁知道为什么将这些引入到至少如何使 JSLint 忽略这些新规则？

**更新：** 该*`Messy White Space`*选项可以解决该问题，但会导致其他意外行为：

```
if (condition) { 
  //            ^-- there is a space but it won't indicate an error 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-17T13:12:42.520

好吧，看起来 Douglas Crockford 刚刚让更多的人转向 JSHint。看看[这个提交](https://github.com/douglascrockford/JSLint/commit/f819cf3c65d07086cf217c549c577fa77dc65fc9)。

“混合空格和制表符”错误已被删除，并在其位置添加了一个新的“使用空格，而不是制表符”错误。除此之外，该差异中有一个微小的变化表明了造成这种情况的原因。以下行（添加评论）：

```
at = source_row.search(/ \t/);
//                      ^ Space 
```

已替换为：

```
at = source_row.search(/\t/);
//                      ^ No space! 
```

在搜索之后有一个`if`声明。如果条件评估为`true`，则会发出“使用空格，而不是制表符”警告。这是该声明：

```
if (at >= 0) {
    warn_at('use_spaces', line, at + 1);
} 
```

我*希望*这只是 Crockford 的一个小小的疏忽。如您所见，如果您在任何地方使用制表符，JSLint 现在将发出此*警告*。不幸的是，他的提交信息完全没用，而且文档似乎没有更新，所以我只能猜测这个变化背后的原因。

我建议你现在放弃 JSLint 并切换到[JSHint](http://jshint.com/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-31T16:05:42.600

您可以通过单击“混乱的空白”选项来抑制错误。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-04T19:08:27.617

要回答*为什么*JSLint 现在给出关于选项卡的错误， http: [//www.jslint.com/help.html](http://www.jslint.com/help.html)给出了这个理由：

> 制表符和空格不应混用。我们应该只选择一个，以避免两者兼而有之的问题。个人喜好是一个极其不可靠的标准。两者都没有提供比另一个强大的优势。50 年前，tab 具有消耗更少内存的优势，但摩尔定律已经消除了这一优势。空格相对于制表符有一个明显的优势：制表符代表多少个空格没有可靠的标准，但普遍接受的是空格占用一个空格。所以使用空格。如果必须，您可以使用制表符进行编辑，但在提交之前请确保它再次是空格。也许有一天我们最终会得到一个标签的通用标准，但在那一天到来之前，更好的选择是空格。

从本质上讲，他希望每个人就是否使用制表符或空格来防止它们被混合达成共识。他认为空间宽度的一致性使其成为最佳选择，所以我们都应该使用它。显然有些人会不同意这种思路（包括我自己），但这就是 JSLint 抛出该错误的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-20T17:46:49.600

根据您的编辑器/IDE，您可以调整 TAB 的工作方式。

例如，我使用 Sublime Text。在右下角附近有一个标签大小：4。

我单击它并将其设置为“使用空格缩进”。

这更新了我所有的选项卡以使用空格，并且 JSLint 错误消失了。我尝试在 JSLint 中使用尽可能少的选项，因为我希望我的代码结构良好。

我还使用 JSFormat，它会根据我的编辑器设置进行选项卡，所以每当我完成时，我运行我的 JSFormat，然后运行 ​​JSLint。没有错误=快乐的男孩！

希望能帮助到你。

# html - 当我通过 html 提交请求表/提交表单时，我应该如何收到电子邮件

> ID：13913191
> 
> 赞同：0
> 
> 时间：2012-12-17T11:23:59.717
> 
> 标签：html, email, html-email

我正在处理我的 html 页面中的提交表单。当我单击提交按钮时，我应该在我的收件箱中收到邮件。

那么，我需要遵循哪些程序才能获得输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:44:00.880

> 没有使用任何服务器，是否有任何插件对获取我的输出有用。– 巴拉德瓦杰

我认为这可能对你[有用 http://www.emailmeform.com/](http://www.emailmeform.com/)

我从未使用过它，但它看起来像是一个为您托管表格并将结果通过电子邮件发送给您的网站。您只需将表单 html 放在您的页面上，然后让他们完成其余的工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:27:06.443

您需要使用 PHP / ASP.NET 等服务器端语言。然后：

1.  用户提交表单。
2.  检索提交的信息。
3.  使用特定于您决定使用的语言的电子邮件功能发送电子邮件。

你没有付出太多，所以这只是你需要做的事情的概述。您可以将 Google 用于您需要实施的各个领域。

# c# - 如何通过win forms将数据发布到网站c#

> ID：13913192
> 
> 赞同：7
> 
> 时间：2012-12-17T11:24:11.053
> 
> 标签：c#, winforms

我有一个 api，我可以在其中发布一些数据 n 提交，然后获取发布的数据是否有效。此 api 重定向到指示成功/失败的不同 url。为此，我通常做的是，在 html 标记中调用目标 url 并提交页面：

```
 <form method="post" action="https://web.tie.org/verify.php" name="main">
<table width="100%" border="0" cellpadding="0" cellspacing="0" align="center" valign="top">
    <tr>
        <td class="normal">&nbsp;</td><td class="normal"><input type='text' class='text' name='Email' value='x@hotmail.com' size='15' maxlength='35'></td>
    </tr>
</table>
</form>
<script language='javascript'>

document.forms[0].submit();

</script> 
```

有没有办法通过winforms c#直接发布数据。我希望能够在发布后访问成功/失败 url 并获取重定向站点的查询字符串。

参考在[此处输入链接描述](https://stackoverflow.com/questions/5401501/how-to-post-data-to-specific-url-using-webclient-in-c-sharp)我尝试过发布，但我需要结果查询字符串。

现在我可以通过以下方式实现：

```
webBrowser1.Url = new Uri("C:\\Documents and Settings\\Admin\\Desktop\\calltie.html");            
webBrowser1.Show(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T11:30:59.243

是的，您可以使用 WebClient 类。

```
public static string PostMessageToURL(string url, string parameters)
{
    using (WebClient wc = new WebClient())
    {
        wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        string HtmlResult = wc.UploadString(url,"POST", parameters);
        return HtmlResult;
    }
} 
```

例子：

```
PostMessageToURL("http://tempurl.org","query=param1&query2=param2"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T11:26:39.803

当然，看看WebRequest，这里有一个完整的例子

[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

然后你可以做这种事情

```
UriBuilder uriBuilder = new UriBuilder(url);
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uriBuilder.Uri);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = bytesToPost.Length;

using(Stream postStream = request.GetRequestStream())
{
     postStream.Write(bytesToPost, 0, bytesToPost.Length);
     postStream.Close();
}

HttpWebResponse response = (HttpWebResponse )request.GetResponse();
string url = response.ResponseUri 
```

最后一行将为您提供您所追求的 URL（成功/失败）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:17:28.920

我目前正在研究它..这是运行代码尝试它..

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("www.linktoposton.php");
        req.Method = "POST";
        byte[] byteArray = Encoding.UTF8.GetBytes(content);
        req.ContentType = "application/x-www-form-urlencoded";
        req.ContentLength = byteArray.Length;
        Stream dataStream = req.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        WebResponse response = req.GetResponse();
        dataStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(dataStream);
        string responseFromServer = HttpUtility.UrlDecode(reader.ReadToEnd());
        reader.Close();
        dataStream.Close();
        response.Close();
        Application.DoEvents();   // optional 
```

只需更改 Httpwebrequest 中的 url（“www.linktoposton.php”为您要发送的链接）

# selenium - selenium.mouseOver() 不适用于 selenium 服务器 jar 2.25

> ID：13913194
> 
> 赞同：1
> 
> 时间：2012-12-17T11:24:20.277
> 
> 标签：selenium, selenium-rc

该`selenium.mouseOver(id)`函数在 selenium 2.25 中不执行任何操作。它适用于 selenium 服务器 2.24.1 和最新的 2.28

由于某种原因，我想使用 selenium 2.25 版。

是因为 2.25 中的任何错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:15:10.487

我能够在 Firefox 12 、 IE 8 和 google chrome 中完美地使用 2.25 jar 进行鼠标悬停操作。

# java - file.separator Java 7 选项导致 ExceptionInInitializerError

> ID：13913196
> 
> 赞同：21
> 
> 时间：2012-12-17T11:24:22.940
> 
> 标签：java, windows, jvm, 64-bit, teamcity

我们有一个在 64 位 Windows Server 2008 机器上运行的 TeamCity (7.0.3) 代理。当我们最近升级代理以使用 Java 7 (1.7.0_10) 时，构建开始失败并出现以下堆栈跟踪：

```
Error occurred during initialization of VM
java.lang.ExceptionInInitializerError
    at java.lang.Runtime.loadLibrary0(Runtime.java:841)
    at java.lang.System.loadLibrary(System.java:1084)
    at java.lang.System.initializeSystemClass(System.java:1145)
Caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(String.java:658)
    at java.io.Win32FileSystem.<init>(Win32FileSystem.java:40)
    at java.io.WinNTFileSystem.<init>(WinNTFileSystem.java:37)
    at java.io.FileSystem.getFileSystem(Native Method)
    at java.io.File.<clinit>(File.java:156)
    at java.lang.Runtime.loadLibrary0(Runtime.java:841)
    at java.lang.System.loadLibrary(System.java:1084)
    at java.lang.System.initializeSystemClass(System.java:1145) 
```

该问题似乎是由 TeamCity 在代理的可执行命令中使用的“-Dfile.separator=\”java 选项引起的。我能够通过编写一个简单的“Hello World”类并在 Windows 机器上编译它然后使用 file.separator 选项运行程序（即 java -Dfile.separator=\ HelloWorld）来重现该问题

我还没有发现任何类似的错误报告。有没有人见过这样的事情？Java 7 中 file.separator 的行为是否发生了变化？

此外，我意识到 \ 无论如何都是 Windows 的默认 file.separator，所以我认为代理确实不需要在可执行命令中使用它，但是我在 TeamCity 中看不到告诉代理不要包含它的方法. 是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T11:23:25.940

尝试使用 JVM 命令行参数`-Dfile.separator=\/`（即，同时指定反斜杠和正斜杠）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T13:40:50.043

它看起来 java.exe 现在修剪尾随 \（反斜杠）。

我有以下代码： import java.lang.*;

```
public class test {
  public static void main(String[] argz) { 
    for(String s : argz) {
     System.out.println("agg=" + s + "|");
    }

    System.out.println("prop=" +  System.getProperty("prop") + "|");
  }
} 
```

我从 Java 1.7.0_07 和 _10 开始：

```
C:\Java\jdk1.7.0_07\bin\java.exe -cp . -Dprop=z\\ test a\\ b
agg=a\\|
agg=b|
prop=z\\| 
```

和_10

```
C:\Java\jdk1.7.0_10\bin\java.exe -cp . -Dprop=z\\ test a\\ b
agg=a|
agg=b|
prop=z| 
```

还有一个系列：

```
C:\Java\jdk1.7.0_07\bin\java.exe -cp . -Dprop=z\ test a\ b
agg=a\|
agg=b|
prop=z\| 
```

和_10

```
C:\Java\jdk1.7.0_10\bin\java.exe -cp . -Dprop=z\ test a\ b
agg=a|
agg=b|
prop=z| 
```

# r - 在R中按键对列表进行排序

> ID：13913197
> 
> 赞同：5
> 
> 时间：2012-12-17T11:24:28.710
> 
> 标签：r, list, sorting, key

我有以下列表：

```
myList <- list(list(a = 1,b = 1:5,x = 2),
               list(a = 7,b = 9.1,x = 3),
               list(a=-1, b = 0.2, x = 1)) 
```

我想按标准“x”对这个列表中的元素进行排序。我不知道该怎么做。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:31:23.853

```
myList[order(sapply(myList, "[[", "x"))] 
```

会成功的

```
[[1]]
[[1]]$a
[1] -1

[[1]]$b
[1] 0.2

[[1]]$x
[1] 1

[[2]]
[[2]]$a
[1] 1

[[2]]$b
[1] 1 2 3 4 5

[[2]]$x
[1] 2

[[3]]
[[3]]$a
[1] 7

[[3]]$b
[1] 9.1

[[3]]$x
[1] 3 
```

# ruby-on-rails-3 - nginx - 禁止...的目录索引，即使对于 chmod 777

> ID：13913201
> 
> 赞同：0
> 
> 时间：2012-12-17T11:24:48.890
> 
> 标签：ruby-on-rails-3, nginx

我正在尝试使用基于 Ryan Bates railcast 的 nginx 和 unicorn 运行 rails 应用程序（它是全新的`rails new testapp`）。

所以第一步我只想测试 nginx，没有独角兽 - 只是为了`index.html`在`public/`. 我将它指向我的 testapp 目录，并得到“/var/www/testapp”的索引被禁止”错误（我什至将它全部设置为 777 并得到相同的错误）

我的用户名：`deployer`，nginx：工作进程用户是`www-data`。

在为我的 testapp 启用的站点中，我有符号链接到`/var/www/testapp/config/nginx.conf` ：

```
server {
  listen 80;
  server_name beta.sitename.pl;
  root /var/www/testapp;
} 
```

所有者`www/`及其所有文件和子目录是`deployer`和组`www-data`，全部设置为 775。

知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:30:50.017

尝试正确设置目录索引，例如：

> 索引 index.html default.html index.php；

在您的位置块或使用`autoindex on`选项中。

[更多信息在这里](http://www.pannix.net/585/nginx-and-the-importance-of-punctuation/)

# mysql - 对于导致德尔福灾难性故障的原因，是否有一个明确的答案

> ID：13913203
> 
> 赞同：2
> 
> 时间：2012-12-17T11:24:50.123
> 
> 标签：mysql, sql-server, delphi

我已经阅读了一些/很多关于此的内容，但它们似乎并没有太大帮助。

我有一个应用程序（它被称为“TieUp”，但这无关紧要）我每天手动运行它以整理来自多个位置的数据。

它用作来源：

A) 来自远程 SOAP 源并通过 XMLtransform 设置加载到内存中的 TClientDataset 的数据。

B) CSV 文件每天下载并加载到内存中的 TClientDataset

C）与程序在同一台计算机上的 Mysql 数据库（它是实时源的还原备份）

D) 远程 MS-SQL (SQLServer 2008) 数据库

E) 远程服务器上的 Mysql 数据库

仅从源 A、B、C 和 D 读取数据 使用合并数据更新数据源 E。

每天有 800 到 2000 条记录，因此数据集并不庞大，尽管目标 (E) 已增长到大约 150,000 条并且每天都在增加。

我通常可以愉快地运行这一切，并且由于对 MS-SQL 系统的所有单独远程查找，一切都按预期运行）但有时它真的搞砸了，错误总是“灾难性失败！”。

在我可以看到的任何特定阶段或操作期间都不会发生故障。步骤是：

1) 首先获取 SOAP(A) 数据。

2) 与 CSV/内存数据 (B) 相关联。

3) 查找源 C 和 D 上的引用数据以进行整理

4) 将合并后的数据写入源 E

在将数据读入内存数据集之后，每件事都在 TClientDatasets 中，通过链接到 TSQLQueries 的 DatasetProviders 访问（它们目前都在同一台服务器上，但我这样做是为了在未来可能真正实现三层时保持一定的灵活性）。所有查询都包含在 SQLQuery 组件中，因为它们实际上非常简单 - 只需将事物捆绑在一起即可。

我使用的是 Delphi 2009 Enterprise 的完全标准组件。已应用所有更新和数据库更新包。每个数据源都有自己的 DataModule 这些是在启动时自动创建的

显然这里正在进行大量的数据访问，但是当它崩溃（发生灾难性故障）时，它会卡住，完全卡住。Windows 无法从正常的“TieUp 已停止工作”结束任务，我必须去进程并杀死它。

发生了很多事情，因为这种情况每周只发生一次左右，所以我真的不知道从哪里开始寻找。

问这个问题的原因有两个：1）是我试图消除任何手动的东西并完全自动化它，但如果每周左右都有炸弹，我不能依赖它。2）如果它发生在 E 的更新阶段 - 我必须手动删除当天的新记录并重新开始，因为我没有（或尚未编写）从随机点重新启动的机制，我会仍然必须手动查询数据库以确定该点。

我的下一步是在另一台计算机上安装 Delphi 并始终在调试器下运行它，直到我可以捕获它，如果它没有先冻结。但这引入了另一种不同的网络连接（而不是本地主机连接）。

所以：“有确定的答案吗？” 或者最有可能有问题的组件/连接是什么？最喜欢从哪里开始寻找？

提前致谢...

# jquery - 创建单一次处理文件和网址？

> ID：13913213
> 
> 赞同：4
> 
> 时间：2012-12-17T11:25:17.903
> 
> 标签：jquery, html, css, forms, file-upload

我允许我的用户导入本地和远程文件，但是如何使用单个输入来处理这两种情况？

像 Stackoverflow 一样，我可以使用 tabs 来做到这一点：

![在此处输入图像描述](../Images/cb143268638ec4c6a7d415b0e9e3c187.png)

或使用单选按钮，如：

```
<style>
    .displayNone {
        display:none;
    }
</style>

<form action="test.php">
    File type:
    <input id="radio-url" name="type" type="radio" checked value="url" /> URL
    <input id="radio-file" name="type" type="radio" value="file" /> File
    <div id="url">
        <input name="url" type="text" />
    </div>
    <div id="file" class="displayNone">
        <input name="file" type="file" />
    </div>
    <input type="submit" value="Send" />
</form>

<script type="text/javascript">
        $('#radio-url').click(function() {
            $('#url').removeClass('displayNone');
            $('#file').addClass('displayNone');
        });
        $('#radio-file').click(function() {
            $('#file').removeClass('displayNone');
            $('#url').addClass('displayNone');
        });
</script> 
```

给出一个可切换的：

![在此处输入图像描述](../Images/55fdcc6a6d64447e72974b39e30295d9.png)

但是我怎样才能创建这样一个字段：

![在此处输入图像描述](../Images/bb68868a7476f5f3aaef168cd5a84aa7.png)

请注意，在远程主机上处理文件的方式并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:45:24.273

我找到了一种使用 CSS 的工作方式：

```
<style>
    .container {
        position: relative;
    }
    .url {
        position: absolute;
        top:0;
        left:0;
        z-index:2;
    }
</style>

<form action="test.php">
    File or URL :
    <div class="container">
        <input name="file" type="file" />
        <input class="url" name="url" type="text" />
    </div>
    <input type="submit" value="Send" />
</form> 
```

在 上面给出一个可编辑`input type="text"`的`input type="file"`：

![在此处输入图像描述](../Images/5c527712dab0cf4a0b6c0193b989ba7e.png)

但我认为这会很棘手，因为`input type="file"`.

# jquery - 如何编写弹出窗口功能？

> ID：13913219
> 
> 赞同：1
> 
> 时间：2012-12-17T11:25:40.820
> 
> 标签：jquery

```
$.ajax({
    //....
    success: function() {
    }, 
```

在`success`我想弹出一个固定高度和宽度的窗口。窗口直角上有一个封闭的单点。我做了以下，但它不起作用。

我添加了`div`一个名为`success-tip`. 我给它添加了一些样式并首先隐藏它。然后我使用以下内容：

```
$.ajax({
    //....
    success: function() {
        success();
        $('.success-tip').show();    
    }, 
```

它不会弹出。我需要对我的代码做什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:15:33.173

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
jQuery(document).ready(function(){
    jQuery( "#dialog" ).dialog({ dialogClass:'custom_dialog', width: 350, zIndex: 9999, height: 398, resizable: false, draggable: false,
    show: { effect: 'drop', direction: "up"},
    hide: { effect: 'drop', direction: "up"}
});
</script>

<div id="dialog"><img src="xyz.jpg" /></div> 
```

将您的弹出内容放入其中

```
<div id="dialog">your content for popup</div> 
```

[使用jquery Ui](https://jqueryui.com/dialog/)弹出

在你的成功函数中写下这段代码

# character-encoding - 百分比编码 - 希腊字母百分比是如何编码的？

> ID：13913221
> 
> 赞同：0
> 
> 时间：2012-12-17T11:25:45.807
> 
> 标签：character-encoding, url-encoding

我正在网上浏览答案，但找不到答案。我有一个 HTML 表单（方法 = GET）并在文本字段中提交文本 helloΩ（你好，附加希腊字母 Omega）

浏览器中的 URL 将其编码为：

```
mytext=hello%26%23937%3B 
```

没有附加希腊字母 Omega，我得到（如预期的那样）：

```
mytext=hello 
```

那么希腊欧米茄字母百分比如何编码为：

```
%26%23937%3B 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:40:48.897

当您的 Web 服务器声明不支持该字符的编码时，就会发生这种情况。例如，`ISO-8859-1`不支持它，这是许多 Web 服务器的默认编码。

那是一个html实体字符引用百分比编码：`&#937;`，因为`#`，`&`..都是ASCII字符，这是唯一不丢失信息的方法，因为浏览器认为服务器只支持ISO-8859-1。

要解决此问题，`UTF-8`请在您的 http 标头中声明：

```
Content-Type: text/html; charset=utf-8 
```

这甚至不是浏览器之间的一致行为，因为 IE 将其编码为`hello%D9`CP1252 `Ú`/ISO-8859-1 中的。

# jquery - jquery UI 对话框在父 UI 对话框后面打开

> ID：13913223
> 
> 赞同：0
> 
> 时间：2012-12-17T11:25:49.727
> 
> 标签：jquery, jquery-ui, model-view-controller

我有一个 jquery UI 对话框（使用 ajax 打开）。在那个对话框上，我有一些内容和一个打开（再次使用 ajax）另一个 ui 对话框的按钮。

首次按下按钮会很好地打开第二个对话框。如果我关闭第二个对话框并再次按下按钮，对话框将打开，但它隐藏在第一个对话框后面。

我可以在 jquery 中做些什么来强制该对话框聚焦吗？我永远不会希望它位于那个原始窗口的后面。

代码：

第一个对话框的代码...

```
$('#searchUsers').autocomplete({
    source: "/gpcadmin/Roles/Lookup",
    minLength: 0,
    focus: function (event, ui) {
        $('#searchUsers').val(ui.item.label);

        return false;
    },
    select: function (event, ui) {
        var id = ui.item.value;
        $.ajax({           
            url: "/gpcadmin/Users/UserDashboard/" + id,
            type: "GET",
            success: function (data) {
                $("#my-dialog2").html(data);
                $('#my-dialog2').dialog({
                    modal: true,
                    width: "1200px",
                    height: 700,
                    close: function (event, ui) {
                        $("#my-dialog2").dialog("close");
                    }
                });
            },
            error: function (data) {
            }
        });

        return false;
    } 
```

第一个对话框上用于调用第二个对话框的代码：

```
$("#quickButton1").on("click", function (e) {
    e.preventDefault();
    $.ajax({
        url: "/gpcadmin/Roles/cardOfficersui/" + $(this).data("task-id"),
        type: "GET",
        success: function (data) {
            $("#my-dialog23").html(data);
            $('#my-dialog23').dialog({
                modal: true,
                width: "600px",
                height: 400,
                close: function (event, ui) {

                }
            });
        },
        error: function (data) {
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:32:21.173

您可以使用不同的 z 索引。例如：

```
$('#my-dialog23').dialog({
            modal: true,
            width: "600px",
            height: 400,
            close: function (event, ui) {

            },
            zIndex:500
        });

$('#my-dialog2').dialog({
                    modal: true,
                    width: "1200px",
                    height: 700,
                    close: function (event, ui) {
                        $("#my-dialog2").dialog("close");
                    },
                     zIndex:501
                }); 
```

# android - 视图不会垂直对齐或居中

> ID：13913225
> 
> 赞同：0
> 
> 时间：2012-12-17T11:25:53.310
> 
> 标签：android, android-layout

我有一个需要添加一个或多个视图的类。在此示例中，单个`ImageView`. 我可以毫无问题地添加视图并使用 对齐它们`LayoutParameters`，但是当我尝试将它们沿垂直轴对齐或居中时，它们要么粘在顶部，要么根本不出现（它们可能只是在视图之外）。
在构造函数中，我调用了一个方法`fillView()`，它发生在所有维度等都设置好之后。

**填充视图（）**

```
public void fillView(){
    img = new ImageView(context);
    rl = new RelativeLayout(context);

    img.setImageResource(R.drawable.device_access_not_secure);

    rl.addView(img, setCenter());
    this.addView(rl, matchParent());
} 
```

**匹配父母（）**

```
public LayoutParams matchParent(){
    lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
    lp.setMargins(0, 0, 0, 0);
    return lp;
} 
```

**设置中心（）**

```
public LayoutParams setCenter(){
    lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    lp.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE); //This puts the view horizontally at the center, but vertically at the top
    return lp;
} 
```

同样，添加诸如 ALIGN_RIGHT 或 BELOW 之类的规则也可以正常工作，但 ALIGN_BOTTOM 或 CENTER_VERTICALLY 则不行。

我尝试同时使用此方法和`setGravity()`a`LinearLayout`报价，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:38:01.377

您在添加`ImageView`之前添加`RelativeLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:54:33.497

虽然我仍然不知道为什么我的方法水平工作，而不是垂直工作，但我确实解决了这个问题。发布的方法有效，问题隐藏在`onMeasure()`.
我之前通过简单地将尺寸传递给`setMeasuredDimension()`. 我通过将它们传递给`layoutParams()`. 我还更改了我以前使用的整数`MeasureSpecs`。

我改变了这个：

```
 @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(this.getT_Width(), this.getT_Heigth());     
        this.setMeasuredDimension(desiredHSpec, desiredWSpec);
    } 
```

对此：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    final int desiredHSpec = MeasureSpec.makeMeasureSpec(this.getT_heigth(), MeasureSpec.EXACTLY);
    final int desiredWSpec = MeasureSpec.makeMeasureSpec(this.getT_width(), MeasureSpec.EXACTLY);
    this.getLayoutParams().height = this.getT_heigth();
    this.getLayoutParams().width = this.getT_width();
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(desiredWSpec);
    int height = MeasureSpec.getSize(desiredHSpec);
    setMeasuredDimension(width, height);
} 
```

`getT_Width()`并且`getT_Heigth()`是我用来获取我在其他地方设置的一些自定义尺寸的方法。我希望这对某人有所帮助。

# php - 根据特定键在对象数组中查找重复项

> ID：13913229
> 
> 赞同：2
> 
> 时间：2012-12-17T11:26:02.407
> 
> 标签：php, arrays, duplicates

我的目标是在对象数组中找到重复项，但仅限于特定的对象变量。

我没有使用像下面这样的两个 foreach 循环，而是寻找一种更好（更优雅）的方法来查找重复项：

```
foreach ($data as $date) {
      foreach ($data as $innerDate) {
          if ($date->birthday == $innerDate->birthday &&
              $date->street == $innerDate->street &&
              $date->streetnr == $innerDate->streetnr &&
              $date->zipcode == $innerDate->zipcode &&
              $date->twinid == $innerDate->twinid &&
              $date !== $innerDate) {
              // Duple
        }
    }
} 
```

谢谢！

* * *

现在，我正在使用以下代码，基于 Tarilo 的想法：

```
usort($data, function($obj_a, $obj_b){
      if ($obj_a->birthday == $obj_b->birthday &&
          $obj_a->street == $obj_b->street &&
          $obj_a->streetnr == $obj_b->streetnr &&
          $obj_a->zipcode == $obj_b->zipcode &&
          $obj_a->twinid == $obj_b->twinid) {
          // Duple
      }
}); 
```

看起来比两个 foreach 循环好得多;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:33:19.527

你试过`in_array()`php中的函数吗？

有关 in_array() 的更多参考，请使用此 url

[http://php.net/manual/fr/function.in-array.php](http://php.net/manual/fr/function.in-array.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:43:23.103

您可以先对数组进行排序，然后对排序后的数组进行循环。这样，您只需将当前对象与下一个/上一个对象进行比较。您当前的算法是 O(n^2) 有效的，但在排序后它将是 (排序 + 循环) = (O(log n) + O(n)) 有效的。其中 n 是数组中的对象数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:02:08.053

由于 $data 是一个数组，我们可以使用 array_* 函数

试试这个，对我有用（PHP 5.2.0）。

```
if ($data != array_unique($data)) {
    echo 'oops, this variable has one or more duplicate item(s)'; die;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:38:55.123

这为您提供了一个包含相似项目的数组。对于更大的数据集应该更快：O（2n），字符串连接的额外成本并依靠结果组。由于哈希图，只需要更多的内存。

```
$hashmap = array();
foreach ($data as $date) {
    $hash = $date->zipcode.'-'.$date->street.'-'.$date->streetnr.'-'.$date->birthday.'-'.$date->twinid;
    if (!array_key_exists($hash, $hashmap)) {
        $hashmap[$hash] = array();
    }
    $hashmap[$hash][] = $date;
}

foreach ($hashmap as $entry) {
    if (count($entry) > 1) {
        foreach ($entry as $date) {
            // $date is a duplicate
        }
    }
} 
```

# c++ - 模仿向量的 C++ 链表

> ID：13913230
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:03.530
> 
> 标签：c++, linked-list

我想知道这段代码是否正确地模仿了使用链表的向量的“at”函数。这个概念是为了教我们链表，我不确定我是否将 pos++ 放在正确的位置。有人可以帮助我并告诉我每行在做什么，以便我知道它是如何退出 while 循环的吗？到现在为止，很混乱。谢谢你！

这是整个项目的pastebin：http: [//pastebin.com/wyNQx3GP](http://pastebin.com/wyNQx3GP)

多谢你们

```
 // This returns the countyElectionResults result at a particular point
 // in the list.
 // This is analogous to the at method in the vector class.
 countyElectionResults countyElectionList::at(int place){
    if(head == NULL){
            countyElectionResults * name = NULL;
            return * name;
    }
    else{
            countyElectionResults * current = head;
            int pos = 0;
            while(pos != place && current->getNextResult() != NULL){
                    current = current->getNextResult();
            }
            pos++;
            return * current;
    }
    cout << "Not Found" << endl;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:33:27.513

代码中还有一个错误，在 if 条件为 true 时的 return 语句处：

```
countyElectionResults countyElectionList::at(int place){
    if(head == NULL){
            // if head is null, then set name to NULL
            countyElectionResults * name = NULL;
            // This is segmentation fault due to dereferencing name (null)
            return * name;
    }
    else{
            // set the current to list head and pos to 0
            countyElectionResults * current = head;
            int pos = 0;
            // compare pos to place, while these are different
            // and list does not end
            while(pos != place && current->getNextResult() != NULL){
                    // set current to next node
                    current = current->getNextResult();
            }
            pos++;  // this should be inside the loop, incremented when current 
                    // advances
            return * current; 
    }
    cout << "Not Found" << endl;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:28:06.180

不，pos++ 应该在 while 循环内。

```
while(pos != place && current->getNextResult() != NULL)
{
   当前 = 当前->getNextResult();
   正++；
};

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:31:01.567

pos++ 应该在循环内，因为您必须计算循环时通过的位置。如果你不这样做，那么检查`pos != place`没有实际意义，除非 place 为零。它目前适用于您迄今为止运行的数字和案例。它不适用于所有情况......

编辑 - -

当我说不起作用时，我的意思是它会给出错误的结果，而不是它不会编译或给出一个 SIGSEV

# sql - 加入两个相关的表

> ID：13913231
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:11.020
> 
> 标签：sql, sql-server, tsql, join

我有两张桌子：一张用于发票，另一张用于付款：

tbl_Invoice

![发票](../Images/8cee258e3424fc2b58f56ac7308e1731.png)

tbl_payment

![支付](../Images/9dc872ace6b23bc62b72a30989ad7d6f.png)

愿望输出如下：

```
PSUM        IPRICE
----------- ------------
312.00      1100.00 
```

在哪里：

`PSUM`是付款总和。

`IPRICE`是该客户的 Total_price 的总和。

我试过的查询是：

```
select 
IsNull(sum(p.amt), 0) PSUM,
IsNull(sum(i.total_price), 0) IPRICE
from tbl_invoice i
left join tbl_payment p
on i.invoice_id = p.invoice_id
    and i.client_id = p.client_id
where i.client_id = 5
group by i.invoice_id
order by i.invoice_id 
```

但它给出了错误的输出：

```
PSUM        IPRICE
----------- ------------
312.00      400.00
0.00        1000.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:34:35.817

好像你想要这个。`amt`这给出了 the和 the的总和，`total_price`没有分组。您的版本分组`invoice_id`是不同的：

```
select 
  IsNull(sum(p.amt), 0) PSUM,
  IsNull(sum(distinct i.total_price), 0) IPRICE
from tbl_invoice i
left join tbl_payment p
  on i.invoice_id = p.invoice_id
  and i.client_id = p.client_id
where i.client_id = 5 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4bb94/10)

你可以这样写的另一种方法是使用子查询：

```
select 
  IsNull(sum(p.amt), 0) PSUM,
  IsNull(sum(i.total_price), 0) IPRICE
from
(
  select sum(total_price) total_price, invoice_id, client_id
  from tbl_invoice
  group by invoice_id, client_id
) i
left join
(
  select sum(amt) amt, invoice_id, client_id 
  from tbl_payment
  group by invoice_id, client_id
) p
  on i.invoice_id = p.invoice_id
  and i.client_id = p.client_id
where i.client_id = 5 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4bb94/15)

两者都产生相同的结果：

```
| PSUM | IPRICE |
-----------------
|  312 |   1100 | 
```

# svn - SVN+脚本在windows中导出文件

> ID：13913232
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:13.463
> 
> 标签：svn, tortoisesvn

有许多脚本可用于从 SVN 导出文件。但所有这些都是针对 linux 的。如果有人有将文件导出到 Windows 的脚本，请分享。

我正在为 linux 使用类似的东西。我需要 Windows 的相同或更好的。

[http://www.electrictoolbox.com/subversion-export-changed-files-cli/](http://www.electrictoolbox.com/subversion-export-changed-files-cli/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:19:36.303

*   如果您安装 Ruby，请使用[ExportRevs Ruby 脚本，或要求使用 ruby​​2exe 或](http://kurakin.info/files/exportrevs.zip)[OCRA](http://ocra.rubyforge.org/)将其编译为 exe
*   在 Windows 的情况下，没有什么可以阻止安装 TortoiseSVN 并通过[GUI 方式](http://www.electrictoolbox.com/tortoisesvn-exporting-changed-files/)导出修订范围（您必须以更透明的方式提出问题）

# c# - 非实例化对象的继承和事件处理 C#

> ID：13913236
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:26.710
> 
> 标签：c#, winforms, inheritance, datagridview, event-handling

我在弄清楚如何创建一个继承类来扩展 Windows 窗体控件以始终具有一个事件处理程序来处理该对象的每个实例的按键事件时遇到了一些麻烦。

我可能解释得不好。本质上，我想在 Windows 窗体中扩展 DatagridView 类，以便始终为我扩展的 DatagridView 类的任何实例化对象提供一个 keyPress 事件处理程序。

我想知道是否有可能有一个事件处理程序来监听按键并使用类似于我在下面编写的代码来处理它们：

```
 private void dgvObject_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (Char.IsLetterOrDigit(e.KeyChar))
        {
            //start the loop at the currently selected row in the datagridview
            for (int i = dgvObject.SelectedRows[0].Index; i < dgvObject.Rows.Count; i++)
            {
                //will only evaluate to true when the current index has iterated above above the 
                //selected rows index number AND the key press event argument matches the first character of the current row
                // character of the 
                if (i > dgvObject.SelectedRows[0].Index && dgvObject.Rows[i].Cells[1].FormattedValue
                    .ToString().StartsWith(e.KeyChar.ToString(), true, CultureInfo.InvariantCulture))
                {
                    //selects current iteration as the selected row
                    dgvObject.Rows[i].Selected = true;
                    //scrolls datagridview to selected row
                    dgvObject.FirstDisplayedScrollingRowIndex = dgvObject.SelectedRows[0].Index;
                    //break out of loop as I want to select the first result that matches
                    break;
                }
            }
        }
    } 
```

上面的代码只是选择下一行，该行以触发时 keypress 事件在其事件参数中的任何字符开头。我想知道我是否可以将其作为始终存在的继承处理程序的原因。我认为这比在我的 Windows 窗体中为每个单独的 DatagridView 对象显式创建数百个处理程序要好。如果我的想法是错误的，请随时纠正我！无论如何，感谢您的任何意见。

我已经用 C# 编程大约 5 个月了，我还在学习 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:32:04.397

是的，在你继承的类中只是 override `OnKeyPress`，你应该记得`base.OnKeyPress`之后调用：

```
protected override OnKeyPress(KeyPressEventArgs e)
{
   .. all your code

   base.OnKeyPress(e); // to ensure external event handlers are called
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:35:29.663

您可以通过覆盖 ProcessCmdKey 来捕获所有按键甚至组合：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) 
{
    if (keyData == (Keys.Control | Keys.F)) 
    {
        //your code here
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

# html - 在活动链接上闪烁光标

> ID：13913238
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:30.533
> 
> 标签：html, css

当我点击一个链接时，这个光标在活动链接上仍然闪烁，这有点烦人，因为它看起来很糟糕。这个问题有什么解决方案吗，我的意思是任何用于链接的css属性。![这张图片正是我所说的](../Images/2019d79fea58297bcc091e43490022b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:34:20.533

据我所知，这是一个浏览器问题。大多数浏览器都可以选择显示插入符号，我猜你不小心打开了它。

您可以尝试使用其他浏览器来查看它是否是客户端问题。在您对代码进行任何更改之前，我会先检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:28:15.623

一定有什么东西覆盖了浏览器的链接样式。将其更改为指针。

```
a{
  cursor: pointer;
} 
```

# java - Cucumber 适用于 Eclipse 但不适用于 Jenkins

> ID：13913243
> 
> 赞同：0
> 
> 时间：2012-12-17T11:26:41.670
> 
> 标签：java, maven, jenkins, cucumber

我在我的 java/maven eclipse 项目上成功运行 Cucumber 测试。但是当我添加我的项目做 Jenkins 时，我总是会收到以下错误“cucumber.runtime.CucumberException: No features found at []”。

我在这个线程[中从命令行在 Maven 中设置 cucumber-jvm 选项中](https://stackoverflow.com/questions/12711189/setting-cucumber-jvm-options-in-maven-from-the-command-line)读到：

> *...测试在单独的 JVM 中运行，因此您需要在测试插件配置中指定该系统属性（即 pom.xml 中的surefire或故障安全插件配置）*

但我不太确定如何做到这一点。谁能帮我？

PS：我正在使用“cucumber-java”和“cucumber-junit”依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:01:10.590

如果您使用的是 surefire，插件文档页面[http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html)显示了一些您可以尝试设置系统属性的选项

例如，您可以尝试**systemPropertyVariables**插件设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T03:44:16.667

您在 Jenkins 从站上的目标文件夹中看到功能文件吗？也许您的 *.feature 文件因为 Maven 中的资源排除/包含配置不正确而被排除？

# android - android 中 libGoogleAnalytics.jar 的 javadoc.zip

> ID：13913248
> 
> 赞同：0
> 
> 时间：2012-12-17T11:27:00.927
> 
> 标签：android, google-analytics, javadoc

我正在尝试通过我的 android 应用程序上的谷歌分析来扩展跟踪。目前我正在尝试发送自定义变量。但它接缝我错过了图书馆的java文档，有人可以把javadoc.zip发给我吗？另外，如何使用`trackPageView`或`trackEvent`方法（调用）发送自定义变量。我无法在女巫方法（调用）中指定的接缝我将使用自定义变量。例如，我需要`trackEvent`在单击按钮时调用并发送自定义变量，或者我需要调用`trackPageView`并使用此方法发送自定义战争。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:39:33.907

[从https://developers.google.com/analytics/devguides/collection/android/resources](https://developers.google.com/analytics/devguides/collection/android/resources)下载 GoogleAnalytics Android SDK 2.0 beta 3。它有 javadocs.zip。要在 Google Analytics Android 中发送自定义变量，您可以使用此 api 调用

EasyTracker.getTracker().trackView("我的自定义变量："+ x); 此值将显示在 Google Analytics 仪表板的屏幕视图中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:30:06.657

`trackEvent`用于事件，用于`trackPageView`浏览量。

```
EasyTracker.getTracker().trackEvent("MainPage", "Info buttonclick", "date today", (long) 1); 
```

和浏览量

```
EasyTracker.getTracker().trackView("MainPage"); 
```

请参阅：[分析事件](https://developers.google.com/analytics/devguides/collection/android/v2/events)和[综合浏览量](https://developers.google.com/analytics/devguides/collection/android/v2/screens)

# ruby - 这个 Ruby 代码是如何工作的 - if-stmt with range ？

> ID：13913252
> 
> 赞同：3
> 
> 时间：2012-12-17T11:27:05.530
> 
> 标签：ruby

我目前正在学习 Ruby，但我似乎无法理解`if /start/../end`... 帮助？

```
while gets
  print if /start/../end/
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:51:46.897

由于您提到您是 Ruby 新手，因此首先值得注意的是，您正在处理示例中的正则表达式 (regex) - 任何在两个正斜杠之间分隔的内容：

```
/start/   # a regular expression literal 
```

正则表达式是匹配较大字符串中特定字母组合的强大方法。

```
"To start means to begin." =~ /start/  #=> true, because 'start' is in the string. 
```

双点表示法是触发器运算符，这是一个有争议的结构，可能继承自 Perl，通常不推荐使用，因为它会导致混淆。

这意味着以下内容：它将集体评估为假，直到左侧操作数为真。在这一点上，它将集体评估为真。然而，它只会在右手操作数评估为真之前保持为真 - 此时它将再次集体评估为假。

因此，使用上面的示例：

```
while gets
 print if /start/../end/
end 
```

1.  在输入'start'之前，整个表达式为假，不打印任何内容。
2.  当输入 'start' 时，整个表达式为真，因此在此点之后输入的所有内容也将被打印出来。（尽管不是“开始”）
3.  一旦输入 'end'，整个表达式的计算结果为 false，并且从那时起不会打印任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:33:53.507

它被称为触发器运算符。您可以在“ [Ruby 触发器运算符](http://matousek.wordpress.com/2008/12/06/ruby-flip-flop-operator/)”中阅读更多内容。

# magento - 基于 SSL 的 Google Chart API

> ID：13913254
> 
> 赞同：1
> 
> 时间：2012-12-17T11:27:17.200
> 
> 标签：magento, ssl, charts, google-api, dashboard

好的，自从我将 SSL 证书应用到我们的网站后，仪表板中的图表已经停止工作。我读了这个网站

编辑：忘了添加，我试图让它在 magento 仪表板中工作。

[http://www.phpro.be/blog/detail/magento-dashboard-charts-not-working](http://www.phpro.be/blog/detail/magento-dashboard-charts-not-working)

哪些状态将“true”添加到 app/design/adminhtml/default/default/template/dashboard/graph.phtml 中的 GetChartUrl() 函数

这适用于不使用 SSL 的网站。

然后我找到了这个网站

[http://webguru.org/2009/11/09/php/how-to-use-google-charts-api-in-your-secure-https-webpage/comment-page-1/#comment-988](http://webguru.org/2009/11/09/php/how-to-use-google-charts-api-in-your-secure-https-webpage/comment-page-1/#comment-988)

但这应该为 SQL 注入和其他恶意攻击提供了机会。

接下来我找到了这个网站

[http://store.ivvy.ru/blog/chartssl/](http://store.ivvy.ru/blog/chartssl/)

并按照说明进行操作，但图表仍然无法正常工作。

我试着改变

```
const API_URL='http://chart.apis.google.com/chart'; 
```

二者皆是

```
const API_URL='//chart.apis.google.com/chart';
const API_URL='https://chart.apis.google.com/chart'; 
```

但都没有奏效。

谁能指出我的任何其他示例/解释，或解释如何使其工作？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:50:45.510

您使用 Firebug 或其他浏览器调试工具吗？如果是这样，当您加载包含图表的页面时，控制台选项卡上的错误是什么。我现在可以告诉你，这很可能是由于尝试通过 HTTPS 连接加载 HTTP JS 脚本......这将失败。

尝试使用他们最新的支持 HTTPS 的 API URL： `https://chart.googleapis.com/chart`

# file - MATLAB：从多个目录导入所有文件并创建 2 个变量的单列向量

> ID：13913257
> 
> 赞同：1
> 
> 时间：2012-12-17T11:27:20.747
> 
> 标签：file, matlab, import, directory

我是 MATLAB 编码的初学者，所以我从 else-ware 中获取了代码来满足我自己的需要。到目前为止，我已经设法将一个文件夹中的所有文件放入一个列向量中，但现在我想将父目录中所有文件夹中的所有文件放入这个单列向量中。这是我的代码：

...

```
folder = ('parent_directory_path_name\01');     
files = eval(['dir(''' folder '\*wind*.na'')']); % take files with wind in name
N = length(files);

%%

for n=1:N

    filename = files(n).name;
    eval(['fid = fopen(''' folder '/' filename ''');']) 
    data=textscan(fid, '%s','delimiter','\n');
    lines=data{1};
    lines=lines(56:end);

        for i=1:size(lines,1)
            [s(i).time s(i).east s(i).north] = strread(lines{i},'%f %f %f %*f %*f %*f %*f %*f');
        end

    time = [s.time]';
    east (:,n) = [s.east]';
    north(:,n) = [s.north]';

fclose(fid);

end

%%

ea = east (:);      % put matrix columns into 1 column
no = north (:); 
```

...

我确定必须有一个简单的循环，我可以围绕文件夹规范放置，但我无法解决。我还看过： [如何在 MATLAB 中获取特定目录下的所有文件？](https://stackoverflow.com/questions/2652630/how-to-get-all-files-under-a-specific-directory-in-matlab)，但由于方法非常不同，我不确定如何将其应用于我正在使用的代码。

任何提示将不胜感激。

谢谢，卢克

***编辑***

Re:Shai，（评论区不够大）

好的，我已经尝试过了，但我现在不知道如何打开文件。这是我尝试过的：

```
sub_f = dir( fullfile( 'parent_folder', '*' ) );
for si = 1:numel( sub_f )
    if sub_f(si).name(1) =='.', continue; 
    end; % skip '.' and '..'
    files = dir( fullfile( 'parent_folder', sub_f(si).name, '*wind*.na' ) ); % get all files in sub folder
    for n = 1:numel(files)
         % put your code here...
        filename = files(n).name;
        fid = fopen('' sub_f '/' filename '');
        data=textscan(fid, '%s','delimiter','\n');
        lines=data{1};
        lines=lines(56:end);
        for i=1:size(lines,1)
            [s(i).time s(i).east s(i).north] = strread(lines{i},'%f %f %f %*f %*f %*f %*f %*f');
        end
        time = [s.time]';
        east (:,n) = [s.east]';
        north(:,n) = [s.north]';
        fclose(fid);

    end
end 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:38:05.197

几点评论：

1.  而不是将文件夹名称和文件名连接为简单的字符串，更好的做法是使用`fullfile`命令：

    `folder = fullfile( 'parent_folder', '01' );`

2.  您不需要繁琐的`evel`表达式：

    `files = dir( fullfile( folder, '*wind*.na' ) );`

3.  为了迭代子文件夹，您可以简单地做

    ```
     sub_f = dir( fullfile( 'parent_folder', '*' ) );
    for si = 1:numel( sub_f )
        if sub_f(si).name(1) =='.', continue; end; % skip '.' and '..'
        files = dir( fullfile( 'parent_folder', sub_f(si).name, '*wind*.na' ) ); get all files in sub folder
        for n = 1:numel(files)
             % put your code here...
        end
    end 
    ```

# android - 如何更改 Android 图库中的最小滑动距离？

> ID：13913258
> 
> 赞同：2
> 
> 时间：2012-12-17T11:27:25.790
> 
> 标签：android, gallery, swipe, minimum, onfling

我有一个扩展`Gallery`名为**MyGallery**的类，并且我有一组位图要显示在 MyGallery 小部件中。为了每个手势只刷一个项目，我必须覆盖 ，`onFling()`所以它不会调用`super.onFling()`. 问题是为了改变项目，我必须滑动超过 50% 的屏幕尺寸，这让我很困扰。我进行了搜索，但没有找到任何更改此最低限制的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:41:23.790

您可以使用 MotionEvent 对象来处理最小和最大滑动距离。
使用 MotionEvent 对象（即事件）计算滑动距离。

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    // TODO Auto-generated method stub
    float rawX = 0.0f, dist;
    switch (event.getAction()) 
    {
    case MotionEvent.ACTION_DOWN:
        rawX = event.getX();
        break;
    case MotionEvent.ACTION_UP:
        dist = event.getX() - rawX;
        break;
    default:
        break;
    }
    return super.onTouchEvent(event);
} 
```

# ios - UIWindow 正在重置我的子视图

> ID：13913261
> 
> 赞同：0
> 
> 时间：2012-12-17T11:27:34.750
> 
> 标签：ios

我有两个视图控制器，其中一个是另一个的子视图。两个视图都是通过 nibs 加载的。子视图控制器将其位置设置在`viewDidLoad`父视图控制器中。当父视图控制器设置为 UIWindow 的根视图控制器时，它会将子视图控制器的视图的位置重置回`{0.0, 0.0}`.

我知道它是窗口，因为我决定观察子视图控制器的视图的框架并添加了一个断点（观察者是父视图控制器）。堆栈跟踪报告返回：

```
#0  0x000d34e0 in -[ParentViewController observeValueForKeyPath:ofObject:change:context:]
#1  0x32866eb0 in NSKeyValueNotifyObserver ()
#2  0x32866b0a in NSKeyValueDidChange ()
#3  0x32840eca in -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] ()
#4  0x39b87d9e in -[UIViewController viewDidMoveToWindow:shouldAppearOrDisappear:] ()
#5  0x39b4075e in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#6  0x39b405be in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#7  0x39b3ae4a in -[UIView(Hierarchy) _postMovedFromSuperview:] ()
#8  0x39b227dc in -[UIView(Internal) _addSubview:positioned:relativeTo:] ()
#9  0x39b222c2 in -[UIView(Hierarchy) addSubview:] ()
#10 0x39b7fe42 in -[UIWindow addRootViewControllerViewIfPossible] ()
#11 0x39b7bae4 in -[UIWindow _setHidden:forced:] () 
```

如果我不打算将位置设置在`viewDidLoad`我打算设置的位置？

**更新：** 我以为只是改变了位置，但是通过相同的路径，正在设置尺寸。在笔尖中，它设置为横向尺寸，但框架设置为纵向尺寸`{0.0, 0.0}`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:05:57.373

我建议在`viewWillAppear`or中进行操作`viewDidAppear`。调用时`viewDidLoad`，视图只加载到内存中，尚未绘制到屏幕上，这会导致此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:25:07.340

尝试了一些不同的搜索关键字，我发现了几个确实非常有用的链接：

*   [加载后视图框架发生变化](https://stackoverflow.com/questions/10954820/view-frames-change-after-being-loaded)
*   [UIView 在横向时有纵向尺寸吗？](https://stackoverflow.com/questions/11394934/uiview-has-portrait-dimensions-while-in-landscape)

第一个更详细地介绍了 Numan Tariq 所说的内容，最后一个解释了我的问题。

问题是未设置自动调整大小的蒙版。在 Interface Builder 中，有时视图具有灵活的宽度和高度并锁定到所有边距，有时它只锁定左侧和顶部边距。对于我使用它的方式，我需要第一个视图。它现在可以工作并显示正确的大小，并且感谢 Numan Tarig ;)，位置。

# oracle - qt调用oracle存储过程

> ID：13913263
> 
> 赞同：2
> 
> 时间：2012-12-17T11:27:37.247
> 
> 标签：oracle, qt, stored-procedures, output-parameter, qsqlquery

我正在使用QsqlQuery调用使用输入参数和两个输出参数的oracle存储过程该过程执行完美但输出参数不包含数据

```
QSqlQuery movementQuery ;
movementQuery.prepare("call Qt.add_movement(:pDocumentType , :pDocumentId ,       
to_date(sysdate,'dd-mm-yyyy') ,:pDocumentNumber"
",to_date(sysdate,'dd-mm-yyyy') , :pCustId ,:pMovementId ,:pReturn )");
movementQuery.bindValue(":pDocumentType",documentType);
movementQuery.bindValue(":pDocumentId",documentId);
movementQuery.bindValue(":pDocumentNumber",0);
movementQuery.bindValue(":pCustId",ui->custId->text());
movementQuery.bindValue(":pMovementId", 0, QSql::Out);
movementQuery.bindValue(":pReturn", "FALSE", QSql::Out);
movementQuery.exec();
 //// The query executed the query is active and no errors are valid
//// message is method to display the value
message(query.boundValue(":pReturn").toString());
message(query.boundValue(5).toString());
message(query.boundValue(":pMovementId").toString());
message(query.boundValue(4).toString()); 
```

任何想法感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:52:41.897

你正在执行`movementQuery`

```
movementQuery.exec(); 
```

但是您正在返回 的绑定值`query`。

```
message(query.boundValue(":pReturn").toString()); 
```

# rest - 在肥皂中有用于通信的 WSDL，但在休息中有什么？

> ID：13913264
> 
> 赞同：1
> 
> 时间：2012-12-17T11:27:46.820
> 
> 标签：rest, soap, restful-url, restful-architecture

在 SOAP 中有用于通信的 WSDL。我在博客中读到 WSDL 2.0 支持 REST，但它没有正确定义 REST，那么 REST 是否有任何等价物？我正在使用客户端和服务器之间的 JSON 数据进行通信，所以我需要一些适合通信的东西，所以有什么适合的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:38:10.677

业界有不同的提议，例如 WADL（参见[http://en.wikipedia.org/wiki/Web_Application_Description_Language](http://en.wikipedia.org/wiki/Web_Application_Description_Language)），但遗憾的是目前还没有普遍接受的 REST 元数据标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:12:55.597

在真正的 WSDL 中可以用于 REST，但实际上它并不是最适合 REST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T19:42:05.010

当谈到 REST 风格时，我宁愿远离使用 WADL 或任何其他描述性语言。RESTful 服务本质上是明确定义和自我描述的，因此命名为 Representational State Transfer。鉴于它们遵循 HTTP 词汇表 (CRUD)，并且有效负载结构可以是任何字符集（原始、JSON、XML 等），因此不需要任何标准的描述性语言。

这是从基于 SOAP 的服务的根本转变，应用程序开发人员需要担心在 WSDL 中描述服务接口以用于发现和其他目的。

# jquery - DropdownList 从 mvc3 的数据库中的文本框中选择的值

> ID：13913265
> 
> 赞同：0
> 
> 时间：2012-12-17T11:27:47.677
> 
> 标签：jquery, asp.net-mvc-3

我在 Mvc3 中有下拉列表框的视图

当我选择一个项目时，它应该触发一个动作并根据值给我相应的行。

这些对应的值必须显示在同一个View的文本框中

我尝试了以下方法：

```
 <script type="text/javascript"> 
      $(document).ready(function () { $("#Departments").change(function () { 
           var itemVal=$(this).val(); 
           $.get('@Url.Action("GetData")', 
                  { id: itemVal }, 
                  function (data) { $("#Fee").val(data); }); 
           }); 
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:04:23.347

我认为您没有从下拉菜单中获得价值。它应该是这样的：

```
var itemVal=$(this).find('option:selected').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:21:38.753

我曾经在更改下拉列表中的值时执行以下方法来触发操作。

```
 $('#ShipCountry').change(function () {
        $.ajax({
            type: "POST",
            url: "Home/GetCities",
            dataType: "json",
            success: function (data) {
               ....

            }
        });
    }); 
```

# php - 如何使用 curl 保存以表单提交的文件 url？

> ID：13913275
> 
> 赞同：0
> 
> 时间：2012-12-17T11:28:16.333
> 
> 标签：php, forms, file-upload, curl

我正在尝试创建一个上传插件，允许用户从他们的计算机或从他们在提供的文本字段中键入的 url 上传任何文件。

这是我必须从本地磁盘上传文件的脚本：

```
session_start();
//Loop through each file
for($i=0; $i<count($_FILES['file']); $i++) {
  //Get the temp file path
  if (isset($_FILES['file']['tmp_name'][$i]))
  {
  $tmpFilePath = $_FILES['file']['tmp_name'][$i];
  }

  //Make sure we have a filepath
  if ($tmpFilePath != ""){
    //Setup our new file path
    if (isset($_FILES['file']['name'][$i]))
    $newFilePath = "./uploaded_files/" . $_FILES['file']['name'][$i];
    }

    //Upload the file into the temp dir
    if(move_uploaded_file($tmpFilePath, $newFilePath)) {

    echo "Uploaded Successfully!<br />";

} 
```

我现在需要的只是让 curl 部分从文本字段中提交的 url 中获取文件并将其保存到相同的位置。

这是我到目前为止的 cURL：

```
function GetImageFromUrl($link) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch,CURLOPT_URL,$link);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result=curl_exec($ch);
    curl_close($ch);
    return $result;
}

$sourcecode=GetImageFromUrl("http://domain.com/path/image.jpg");
$savefile = fopen('/home/path/image.jpg', 'w');
fwrite($savefile, $sourcecode);
fclose($savefile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:43:12.347

您想使用 curl 是否有特定原因？以下是没有它的简单方法：

```
$url = $_POST['url'];
$file_content = file_get_contents($url);
$file_name = array_pop(explode('/', parse_url($url, PHP_URL_PATH)));
file_put_contents('/home/path/' . $file_name, $file_content); 
```

您还应该考虑查看 $url 并在使用它之前检查它是否有效。

# java - 将 AWT 图像转换为 SVG 图像

> ID：13913289
> 
> 赞同：3
> 
> 时间：2012-12-17T11:28:55.673
> 
> 标签：java, image, svg, awt

我正在使用以下代码摄取 AWT 图像（来自 PDF，通过 PDFBox）：

```
private java.awt.Graphics2D graphics;
public void drawImage(java.awt.Image awtImage, java.awt.geom.AffineTransform at) {
    graphics.setComposite(getGraphicsState().getStrokeJavaComposite());
    graphics.setClip(getGraphicsState().getCurrentClippingPath());
    graphics.drawImage( awtImage, at, null );
} 
```

并希望将图像捕获/输出为 SVG。我一直在使用产生 svg 形式的 Batik 库

```
 <image x="0" y="0" transform="matrix(0.144,0,0,0.1439,251.521,271.844)" 
clip-path="url(#clipPath2)" width="1797" xlink:href="data:image/png;
base64,iVBORw0KGgoAAAANSUhEUgAABwUAAAV4CAMAAAB2DvLsAAADAFBMVEX////+/v56 
enpWVlZbW1taWlpZWVnHx8eRkZFVVVWMjIysrKxXV1dYWFhqamr5+fnMzMxeXl7c 
3NyUlJR/f3+3t7cAAACGhob29vYpKSliYmJPT083Nzf8/PyBgYENDQ3s7OwwMDD1 
    ...
    RERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERE 
RPQP/R8CiIK+y8Q6KQAAAABJRU5ErkJggg==" height="1400"
 preserveAspectRatio="none" stroke-width="0" xmlns:xlink="http://www.w3.org/1999/xlink"/> 
```

我有自己的 SVG 库，并且想向我的 SVGImage 类添加方法以产生类似的东西。我是否需要将 AffineTransformation 应用于数据，如果需要，如何？

如果有人指出可以做到这一点的适当（F/OSS）方法或库，我将不胜感激。数据应该是内联的（如上例所示）并且符合 XML。

更新：在没有任何答案或评论的情况下，我不得不编写自己的实现。这不是完全微不足道的，可能不是健壮的或最好的解决方案。我将其附加为答案-如果它有缺陷或可以改进，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:38:48.943

[回答自己的问题]

我认为`java.awt.Image`它`BufferedImage`具有适当的方法。在目前的情况下，这已经奏效（到目前为止）。

SVG 需要图像的 MIME 类型（例如“ `image/png`”）。 `ImageIO`需要诸如“ `PNG`”之类的类型。 `mimeType2ImageTypeMap`映射这些。Base64 编解码器取自 Xerces，但周围有很多。DOM 实现是 XOM，属性构造为 xlink 提供了命名空间

```
 public class SVGImage extends xom.nu.Element {
    private static final String DATA = "data";
    private static final String BASE64 = "base64";
    public static final String IMAGE_PNG = "image/png";
    public static final String PNG = "PNG";

    private static final String XLINK_PREF = "xlink";
    private static final String HREF = "href";
    private static final String XLINK_NS = "http://www.w3.org/1999/xlink";

        public void readImageData(BufferedImage bufferedImage, String mimeType) {
    String type = mimeType2ImageTypeMap.get(mimeType);
    if (type == null) {
        throw new RuntimeException("Cannot convert mimeType: "+mimeType);
    }
    double x = bufferedImage.getMinX();
    double y = bufferedImage.getMinY();
    double height = bufferedImage.getHeight();
    double width = bufferedImage.getWidth();
    this.setX(x);
    this.setY(y);
    this.setWidth(width);
    this.setHeight(height);

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        ImageIO.write(bufferedImage, type, baos);
    } catch (IOException e) {
        throw new RuntimeException("Cannot read image", e);
    }
    byte[] byteArray = baos.toByteArray();
    String base64 = Base64.encode(byteArray);
    String attValue = DATA+":"+mimeType+";"+BASE64+","+base64;
    this.addAttribute(new Attribute(XLINK_PREF+":"+HREF, XLINK_NS, attValue));
    }
} 
```

上面的代码已经在一个测试用例上工作过，所以我很乐观它会扩展到大图像和其他 MIME 类型，但还没有测试它们。

是的：我必须应用仿射变换。我已经有用于将 3*2 双精度矩阵转换为 SVG`transform="matrix(...)"` 属性的实用程序。所以我的最终代码是：

```
Transform2 t2 = new Transform2(at);              // converts matrix syntax
BufferedImage bImage = (BufferedImage) awtImage;
SVGImage svgImage = new SVGImage();
svgImage.setTransform(t2);
svgImage.readImageData(bImage, SVGImage.IMAGE_PNG); 
```

# php - symfony 1.4 中的用户身份验证在到期配置之前超时

> ID：13913291
> 
> 赞同：1
> 
> 时间：2012-12-17T11:29:05.170
> 
> 标签：php, session, authentication, symfony-1.4

我已将用户身份验证超时设置为超过默认的 30 分钟，但我仍然发现用户正在超时。这会产生受 csrf 保护的表单的问题。

工厂.yml

```
storage:
  class: sfSessionStorage
  param:
    session_cookie_lifetime: 604800
    session_cookie_httponly: true

user:
  class: myUser
  param:
    timeout: 604800 
```

gc.session_timeout 设置为相同的值它在我的本地工作正常，只是在生产中存在问题。关于导致提前超时的任何想法？如果我更改`sfPDOSessionStorage`为这可能会有所作为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T08:43:43.887

您可以使用新属性 authenticationExpiration 自定义您的 User 类：

```
`
class CustomUser extends User
{
    protected $authenticationExpiration;

    public function setAuthenticationExpiration( $timestamp)
    {
        $this->authenticationExpiration = $timestamp;
        return $this;
    }

    public function getAuthenticationExpiration()
    {
        return $this->authenticationExpiration;
    }
}` 
```

您可以像这样自定义 UserProvider 方法“refereshUser”：

`

```
public function refreshUser(UserInterface $user) {
    if (!$this->supportsClass(get_class($user))) {
       throw new UnsupportedUserException('usuported class');
    }

    // durée
    if( time() > $user->getAuthenticationExpiration() ){
        throw new AutoLoginTokenNotFoundException('Login failed');
    }
    else {
        return $user;
    }
} 
```

`

并在您的用户提供程序服务方法“loadUserByUsername($username)”的末尾添加：

`

```
public function loadUserByUsername($username)
{
     // ...
     $user = new CustomUser($username, $data); 
     $user->setAuthenticationExpiration( time() + 3600);
     return $user ;
} 
```

`

# objective-c - 将 NSDateFormatter 一天中的时间转换为小时和分钟为整数

> ID：13913292
> 
> 赞同：0
> 
> 时间：2012-12-17T11:29:12.280
> 
> 标签：objective-c, nsstring, integer, int, nsdateformatter

如何将 NSDateFormatter 转换为整数？

我有这个代码可以使用：

```
 NSDateFormatter *timeOfDayInt = [[[NSDateFormatter alloc] init] autorelease];
     [timeOfDayInt setDateFormat:@"HHmm"];
    int currentTime = (int)[timeOfDayInt stringFromDate:[NSDate date]];

    if(currentTime >= 1400 && currentTime <= 1500) {
     //do something
} 
```

奇怪的是，这段代码就像一天前一样工作，现在它返回一些奇怪的数字......我真的找不到问题的灵魂，我会申请一个答案......谢谢！

PS：

如果我记录时间，`NSLog(@"%@",[timeOfDayInt stringFromDate:[NSDate date]]);`

它正确记录..为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:32:05.027

不要将 a`String`转换为`int`. 我不知道这应该如何工作。

试试这个：

```
int currentTime = [[timeOfDayInt stringFromDate:[NSDate date]] intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:32:35.720

`convert` `string`你为什么不`int`使用`intValue`：

```
int currentTime = [[timeOfDayInt stringFromDate:[NSDate date]] intValue]; 
```

由`casting` `string`至`int`，不能`converted`入`int`。

# android - 无法播放 youtube 嵌入视频

> ID：13913300
> 
> 赞同：1
> 
> 时间：2012-12-17T11:29:57.270
> 
> 标签：android, youtube

从 2 天开始，我试图在我的应用程序中运行 youtube 嵌入视频，但我没有成功。我已经使用了从堆栈溢出和其他网站获得的一切。

1.  我用我的三星 Y 二重奏用 android 2.3.6 版本尝试了这些东西

    我在 webview 设置中设置了以下属性

    *   javascript启用
    *   插件启用
    *   插件状态
    *   缓存模式
    *   允许内容访问
    *   应用缓存路径
    *   最后我实现了 webView 的 webViewClient 并覆盖了它的 shouldOverrideUrlLoading 方法。

结果 - 我在播放器中获得了视频的第一页，但是当我运行时，我的播放器中出现黑屏。

2- 我还在 iframe 中打开 youtube 提供的运行嵌入视频的视频。

结果 - 我得到了与上述相同的结果

3- 我还在清单中使用了 android:hardwareAccelerated="true" 但它不起作用。

4- 我还使用 VideoPlayer 类运行此视频。

结果：我收到无法播放此视频的消息。在我们的 android 应用程序中，我们使用默认视频播放器来运行视频，而三星 Y 和三星 Y Duos 中的默认视频播放器不支持 youtube 嵌入视频。这可能是原因。

5-我也尝试在我的assest文件夹中使用html页面，并在我的html中使用嵌入代码并在webview中打开这个页面，但我是视频的首页，当我播放它时，我得到空白窗口。

请帮我解决这个问题。任何形式的帮助将不胜感激。

# java - Android蓝牙连接另一个蓝牙设备

> ID：13913302
> 
> 赞同：4
> 
> 时间：2012-12-17T11:30:00.263
> 
> 标签：java, android, bluetooth

我正在做基于蓝牙的应用程序，我想连接其他设备，如诺基亚设备和打印机。

我参考了 android 蓝牙文档[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)。它演示了所有基本的蓝牙 API 功能，我做了所有这些事情

```
Scanning for other Bluetooth devices
Querying the local Bluetooth adapter for paired Bluetooth devices
Establishing RFCOMM channels/sockets
Connecting to a remote device
Transfering data over Bluetooth 
```

我从 BluetoothChat 获得参考，android 的示例。

```
BluetoothChat This application send data to another android device but for that this application must be installed in both the devices. 
```

像这样[如何通过代码通过蓝牙将文件从Android设备发送到其他设备](https://stackoverflow.com/questions/6227498/how-to-send-file-from-android-device-to-other-device-through-bluetooth-by-code)

我想要的是

1.  我想从我的应用程序将文件从一台设备发送到另一台设备，即使另一台没有运行我们的应用程序的设备也能正常工作。即接收设备也能够使用默认蓝牙接收文件。

这在android中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:07:13.973

我认为这是不可能的。

事实上，当你创建一个蓝牙套接字时，你必须使用`createRfcommSocketToServiceRecord(UUID)`

此功能需要一个 UUID，它是两个设备上的应用程序之间共享的字符串，以便可以建立连接。

如果没有在其他设备上侦听的蓝牙套接字，使用完全相同的 UUID，您将无法共享数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T14:37:48.370

您可以轻松地在两个 BT 设备之间进行连接。你只需要打电话

```
createRfcommSocketToServiceRecord(UUID) 
```

使用了解接收器设备的 UUID。对于文件传输操作，UUID 必须等于（例如）00001106-0000-1000-8000-00805F9B34FB（文件传输服务）

所以你的连接代码可能看起来像下面的代码

BluetoothDevice 设备 = mBluetoothAdapter.getRemoteDevice("00:0A:94:16:77:A0"); BluetoothSocket 客户端Socket；

```
try {
    log(TAG, "Remote device " + device);
    ParcelUuid[] uuids = device.getUuids();
    boolean isFileTransferSupported = false;
    UUID ftpUID = UUID.fromString("00001106-0000-1000-8000-00805F9B34FB");
    // Check if remote device supports file transfer
    for (ParcelUuid parcelUuid: uuids) {
        if (parcelUuid.getUuid().equals(ftpUID)) {
            isFileTransferSupported = true;
            break;
        }
    }
    if (!isFileTransferSupported) {
        log(TAG, "Remote bluetooth device does not supports file transfer ");
        return;
    }
    clientSocket = device.createRfcommSocketToServiceRecord(ftpUID);
    clientSocket.connect();
} catch (IOException e) {
    return;
} 
```

# sql - 当相似条件包含多个字符时，SQL 返回 null

> ID：13913303
> 
> 赞同：2
> 
> 时间：2012-12-17T11:30:11.467
> 
> 标签：sql, postgresql, pgadmin

我正在使用 SQL 尝试使用 PGAdmin 从具有 3.5m 行的表中返回条目的子集。以下代码返回 131,970 行：

```
SELECT 
  orgs.org_name, 
  orgs.org_oid
FROM 
  public.orgs
WHER
  org_name LIKE 'L%'
ORDER BY
  orgs.org_name ASC 
```

但是，一旦我将更多字符添加到 LIKE 标准中，PGAdmin 根本不会返回任何数据：

```
SELECT 
  orgs.org_name, 
  orgs.org_oid
FROM 
  public.orgs
WHER
  org_name LIKE 'Lo%'
ORDER BY
  orgs.org_name ASC 
```

我认为我的 SQL 没有任何问题，但是我没有从 PGAdmin 收到任何错误消息，表明内存或其他任何可能是问题所在。

我正在使用 PGAdmin 1.16.0 和 Postgres 9.2 在 mac OS X 10.8 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:49:32.590

您可以使用`ilike`不区分大小写的过滤器：

```
SELECT orgs.org_name, orgs.org_oid FROM public.orgs
WHERE
UPPER(org_name) ILIKE 'LO%' --OR ILIKE 'lo%' (same thing) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:33:33.937

尝试对数据使用 lower 关键字：

```
SELECT 
  orgs.org_name, 
  orgs.org_oid
FROM 
  public.orgs
WHER
  lower(org_name) LIKE 'lo%'
ORDER BY
  orgs.org_name ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T11:34:09.977

如果您确定`orgs`您的名称以“Lo”开头，请尝试`UPPER`如下使用：

```
SELECT 
  orgs.org_name, 
  orgs.org_oid
FROM 
  public.orgs
WHERE
  UPPER(org_name) LIKE 'LO%'
ORDER BY
  orgs.org_name ASC 
```

# java - Android - 为什么将对象转换为类？

> ID：13913304
> 
> 赞同：1
> 
> 时间：2012-12-17T11:30:14.647
> 
> 标签：java, android, class, object, casting

这个我见多了

返回一个对象的方法，即

```
public Object getGroup(int groupPosition) 
{       
    return groups.get(groupPosition);
} 
```

然后在调用这个函数时，将返回的对象强制转换为某个类，即

```
ExpandListGroup group = (ExpandListGroup) getGroup (groupPosition); 
```

似乎是这样的情况，如果返回一个普通对象，您知道该对象的类（TestClass）并且您想为该返回的对象（Y）设置一个预先声明的对象（X），您需要转换相应的类以..的形式

```
TestClass X = (TestClass) returnsY(); 
```

它是否正确？将对象转换为类还有其他更深层次的含义/后果吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:44:14.560

所有引用都需要保存与引用或其子类型相同类型的对象。由于编译器只知道`getGroup`返回`Object`它不能让 Object 被分配给`TestClass`引用（Object 可能没有实现 TestClass 拥有的所有方法）。要解决该问题，您需要通过强制转换显式告诉编译器返回的对象`getGroup`也是`TestClass`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:37:44.370

这样做是为了能够调用 TestClass 的方法。但是如果没有任何先前的检查（以查看该对象确实是 TestClass 的一个实例），您将得到一个 ClassCast 异常

# haskell - 'let' 上的 Haskell 解析错误

> ID：13913307
> 
> 赞同：1
> 
> 时间：2012-12-17T11:30:33.313
> 
> 标签：haskell, let, rabin-karp

所以我是 Haskell 的新手，我必须编写 Rabin Karps 算法。我觉得我的答案应该有效，但是我在编译时不断收到“'let' 上的解析错误”错误。谁能帮帮我。

这是我的代码：

```
import Data.Char

hash :: String -> Int
hash [] = -1
hash (x:xs) = ((ord x))

rabinKarp :: String -> String -> Bool
rabinKarp [] _ = False
rabinKarp mainString patternString
    let
     hashPattern = hash patternString
     hashMain = hash (take (length pattern) mainString)
    if hashPattern == hashMain
    then True
    else rabinKarp (drop 1 mainString) patternString 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:35:29.210

你错过了一个`=`，还有一个`in`

```
rabinKarp mainString patternString =
    let
     hashPattern = hash patternString
     hashMain = hash (take (length pattern) mainString)
    in if hashPattern == hashMain
     then True
     else rabinKarp (drop 1 mainString) patternString 
```

编辑：`in`

# java - 在目录java中拆分多个文本文件

> ID：13913310
> 
> 赞同：0
> 
> 时间：2012-12-17T11:30:43.823
> 
> 标签：java, file, split

我正在尝试沿“客户声明结束”行拆分目录中的文本文件，并将结果文件存储到临时目录中。拆分仅针对第一个文件发生，而忽略另一个文件，我的代码有什么问题。我期待 for 循环会吞没目录中的所有文件？这是我的代码。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

/**
 *
 * @author Administrator
 */
public class SplitFiles {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        File f = new File("D:/statements/");
        String[] filenames = f.list();
        File[] texts = f.listFiles();
        String lines = "";
        for (int m = 0; m < filenames.length; m++) {
            try {
                 int count = 0;
                FileInputStream fs = new FileInputStream("D:/statements/" + filenames[m]);
                BufferedReader br = new BufferedReader(new InputStreamReader(fs));

                FileOutputStream fos = new FileOutputStream("D:/DFCU Statements/statement" + count + ".RPT");
                BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));

                while ((lines = br.readLine()) != null) {
                    String mine = lines.trim();

                    if (mine.startsWith("END OF CUSTOMER STATEMENT")) {
                        bw.close();
                        count++;
                        fos = new FileOutputStream("D:/DFCU Statements/statement" + count + ".RPT");
                        bw = new BufferedWriter(new OutputStreamWriter(fos));
                        continue;
                    }
                    if (mine.isEmpty()) {
                        continue;
                    } else {
                        bw.write(lines);
                        bw.newLine();
                        bw.flush();
                    }
                }
                fos.close();
                fs.close();
                br.close();
                bw.close();
            } catch (Exception ag) {
                System.out.println(ag);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:40:06.153

我认为你应该首先这样做（可能有更多的错误）

```
int count = 0;
for (int m = 0; m < filenames.length; m++) {
   ... 
```

**更新**此外，删除您的 count++ 并将其放置在每个文件创建之后

```
FileOutputStream fos = new FileOutputStream("D:/DFCU Statements/statement" + count + ".RPT");
count++; 
```

然后它将按预期工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:42:57.120

我假设由于目标文件没有任何东西可以区分它们（它们都被命名`statementX.RPT`） - 最后一个文件实际上是你在输出中拥有的那个 - 但这只是一个猜测。

尝试更改要命名的输出文件`"statement." + m + "." + count ".RPT"`，这样您将拥有唯一的输出文件。

另外，请注意以下评论：

1.  使用`File`该类时，`listFiles`API 更有用（在我看来） - 从您获得的每个文件中，您可以查询`getName`和`getPath`.
2.  关于这一行：`FileInputStream fs = new FileInputStream("D:/statements/" + filenames[m]);`- 如果您使用了从`listFiles`您那里获得的结果，则可以将其替换为`FileInputStream fs = new FileInputStream(files[m]);`- 无需对路径进行硬编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:11:07.227

你应该修改你的代码。否则，您的代码将创建三个输出文件，而不是创建两个输出文件。这是正确的代码

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

/**
 *
 * @author Administrator
 */
public class SplitFiles {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        File f = new File("D:/statements/");
        String[] filenames = f.list();
        File[] texts = f.listFiles();
        String lines = "";
         int count = 0;
        for (int m = 0; m < filenames.length; m++) {
            try {

                FileInputStream fs = new FileInputStream("D:/statements/" + filenames[m]);
                BufferedReader br = new BufferedReader(new InputStreamReader(fs));

                FileOutputStream fos = null;
                BufferedWriter bw = null;

                while ((lines = br.readLine()) != null) {
                    String mine = lines.trim();

                    if (mine.startsWith("END OF CUSTOMER STATEMENT")) {
                        if(bw!=null)
                        {
                        bw.close();
                        }
                        count++;

                        continue;
                    }
                    if (mine.isEmpty()) {
                        continue;
                    } else {
                        if(bw==null)
                        {
                             fos = new FileOutputStream("D:/DFCU Statements/statement" + count + ".RPT");
                             bw = new BufferedWriter(new OutputStreamWriter(fos));
                        }
                        bw.write(lines);
                        bw.newLine();
                        bw.flush();
                    }
                }
                fos.close();
                fs.close();
                br.close();
                bw.close();
            } catch (Exception ag) {
                System.out.println(ag);
            }
        }
    }
} 
```

# jquery - jQuery 捕获 JSON 响应

> ID：13913313
> 
> 赞同：0
> 
> 时间：2012-12-17T11:31:00.247
> 
> 标签：jquery, json

我真的不知道下面的代码有什么问题。我在状态中没有得到任何回应...

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js">    
</script>
<input type="text" name="UserName" id="UserName" />
<div id="divStatus"></div>
<script type="text/javascript">
    $("#UserName").keyup(function() {
        var name = $("#UserName").val();
        var status = $("#divStatus");
        var user = $.trim(name);
        if (user.length > 3) {
            status.html("Checking....")
            $.getJSON("http://192.168.0.14/openids/api/json/user/username/availability/check/", {
                username: name,
            }, function(data) {
                status.html("got")
            });

        } else {
            status.html("Min 3 letters ");
        }
    });​
</script> 
```

json响应如下：

```
 {"status": "Error", "message": "A user with this username already exists."} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:43:44.133

引用[文档](http://api.jquery.com/jQuery.getJSON/#jsonp)：

> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。有关详细信息，请参阅 $.ajax() 中对 jsonp 数据类型的讨论。

由于您正在发出跨域请求，因此您可能希望使用 JSONP。为此，`callback`请在查询字符串的末尾添加一个参数：

```
$.getJSON("http://192.168.0.14/openids/api/json/user/username/availability/check/?callback=", {
    username: name,
}, function(data) {
    status.html("got")
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:39:21.753

好的，所以跨域ajax安全问题是麻烦。您的调用脚本和目标脚本应该在同一个域中，这样它就可以在不付出额外努力的情况下工作。如果您打开浏览器的错误控制台，您应该能够在那里看到安全异常。

除非您已明确将其设置为支持来自其他主机的请求。

检查这些答案：

[如何在服务器上启用跨域请求？](https://stackoverflow.com/questions/6871021/how-to-enable-cross-domain-request-on-the-server)

[jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:40:24.843

我认为您遇到的是调用正在返回错误状态，但 .getJSON api 只为您提供了成功处理程序的选项。

您需要做的是查看 .ajax API，它允许您添加错误处理程序。.getJSON [API](http://api.jquery.com/jQuery.getJSON/)显示了它的简写形式。查看[.ajax API](http://api.jquery.com/jQuery.ajax/)以了解您可以传递的所有选项。

**编辑** 我没有注意到这从未到达处理程序，因为这是一个[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)类型请求。

# linux - UTS_RELEASE 中 UTS 的含义

> ID：13913320
> 
> 赞同：17
> 
> 时间：2012-12-17T11:31:39.793
> 
> 标签：linux, linux-kernel

`UTS_RELEASE`定义 Linux 中的内核版本。它在 中定义`generated/utsrelease.h`，由[主 Makefile](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob;f=Makefile;h=540f7b240c77d7332f7c51746de660a709e6c431;hb=29594404d7fe73cd80eaa4ee8c43dcc53970c60e)创建，如下所示：

```
# KERNELRELEASE can change from a few different places, meaning version.h
# needs to be updated, so this check is forced on all builds

uts_len := 64
define filechk_utsrelease.h
        if [ `echo -n "$(KERNELRELEASE)" | wc -c ` -gt $(uts_len) ]; then \
          echo '"$(KERNELRELEASE)" exceeds $(uts_len) characters' >&2;    \
          exit 1;                                                         \
        fi;                                                               \
        (echo \#define UTS_RELEASE \"$(KERNELRELEASE)\";)
endef 
```

我想知道UTS代表什么，在这里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T19:55:01.293

我敢打赌：它来自 unix 历史时代。Unix 时间共享 [http://en.wikipedia.org/wiki/Time-sharing](http://en.wikipedia.org/wiki/Time-sharing)

（有另一个链接更重视我的猜测：[http](http://www.linuxmisc.com/9-unix-programmer/515225795f89ebf5.htm) ://www.linuxmisc.com/9-unix-programmer/515225795f89ebf5.htm ）

此外，如果您在 Wikipedia 上搜索 UTS，您也会发现这也是证据：

**UTS 是一个三个字母的缩写，可以描述：**

*   Time-sharing，在许多类 Unix 操作系统的源代码中缩写为 Unix Time-sharing System (UTS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T14:08:45.357

也许[https://lwn.net/Articles/531114/](https://lwn.net/Articles/531114/ "运行中的命名空间，第 1 部分：命名空间概述")和[https://lwn.net/Articles/179345/](https://lwn.net/Articles/179345/ "uts 命名空间：简介")是正确的（tm）答案:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T12:33:20.543

例如，如果`KERNELRELEASE`值为：

```
3.18.31-g18e453b 
```

也在文件中

```
*utsrelease.h 
```

将会：

```
#define UTS_RELEASE "3.18.31-g18e453b" 
```

在Android中，它在这里：

```
Settings > About Phone > Kernel Version 
```

# matlab - 括号中的波浪号字符

> ID：13913325
> 
> 赞同：3
> 
> 时间：2012-12-17T11:32:05.773
> 
> 标签：matlab, syntax

在 MATLAB 中，以下代码的作用是：

```
[m, ~]=func_returning_matrix() 
```

波浪号运算符 ~ 有什么作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:35:00.237

在 Matlab 中，这意味着不要在赋值的 rhs 上从函数中分配相应的输出参数。因此，如果`func_returning_matrix`返回 2 个参数，表达式会将第一个分配给变量`m`而忘记第二个。如果`func_returning_matrix`返回 3 个（或更多）参数，则表达式将删除函数的第二个和所有后续输出。

# c - 缺少 main() 会阻止在链接时创建可执行文件

> ID：13913326
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:32:05.337
> 
> 标签：c, linker, kernighan-and-ritchie

我在 Windows 上使用 Microsoft Visual C++。我编译得很好，没有任何错误。但是，当我尝试执行它时，出现了两个错误。我阅读了调试错误，但我无法理解它们。我在 C 编程方面有点新手。

此代码来自 Kernighan 和 Ritchie 的教科书第 61 页：

```
#include <ctype.h>

/* atoi: convert s to integer; version 2 */
int atoi(char s[])
{
    int i, n, sign;

    for (i=0; isspace(s[i]); i++) /* skip white space */
        ;
    sign = (s[i] == '-') ? -1: 1;
    if (s[i] == '+' || s[i] == '-') /* skip sign */
        i++;
    for (n=0; isdigit(s[i]); i++)
        n = 10 * n + (s[i] - '0');
    return sign*n;
} 
```

错误：

```
--------------------Configuration: 3.5 - Win32 Debug--------------------
Linking... LIBCD.lib(crt0.obj) : error LNK2001: unresolved external symbol _main Debug/3.5.exe : fatal error LNK1120: 1 unresolved externals Error executing link.exe. 3.5.exe - 2 error(s), 0 warning(s) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:35:42.760

那不是一个完整的程序。这只是一个功能。如果不编写一些代码来调用它，就无法执行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:42:30.570

每个 C 程序都需要一个入口点并`main()`提供它。

请参考以下内容：

*   [http://www.dummies.com/how-to/content/the-importance-of-the-main-function-in-c-programmi.html](http://www.dummies.com/how-to/content/the-importance-of-the-main-function-in-c-programmi.html)

*   [http://en.wikipedia.org/wiki/Main_function](http://en.wikipedia.org/wiki/Main_function)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:00:35.220

我想知道你是如何编写整个`atoi`函数的，而不知道`main()`. :) 你应该写一个`main()`函数并`atoi`像这样调用你：

```
#include <stdio.h>//Required for printf used in main()
#include <ctype.h>

/* atoi: convert s to integer; version 2 */
int atoi(char s[])
{
    int i, n, sign;

    for (i=0; isspace(s[i]); i++) /* skip white space */
        ;
    sign = (s[i] == '-') ? -1: 1;
    if (s[i] == '+' || s[i] == '-') /* skip sign */
        i++;
    for (n=0; isdigit(s[i]); i++)
        n = 10 * n + (s[i] - '0');
    return sign*n;
}

/* This is the part you've been missing. */
int main(int argc, char **argv)
{
   printf("%d\n",atoi("-100"));
   return 0;
} 
```

我还建议您：首先尝试用 C++ 编写一个 hello world 程序，然后转向编写这样的高级内容。

# android - 如何在对话框 Android 中使用复选框访问自定义列表视图？

> ID：13913328
> 
> 赞同：1
> 
> 时间：2012-12-17T11:32:15.907
> 
> 标签：android, listview, dialog, alert

我在警报对话框中有一个带有复选框的自定义列表视图。我想在单击完成按钮时访问带有选中复选框的行。这是图像的屏幕不足。

在这里，我使用哈希映射两个参数字符串和自定义列表

提前致谢![在此处输入图像描述](../Images/bd04452bd48d543ce665755f64bb2ca5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:38:50.240

一种方法是为您的 CheckBox 设置一个侦听器，并在检查更改时将行（对象、视图或您需要的任何内容）添加/删除到列表中。

实现此目的的另一种方法可能是遍历您的行并查看 CheckButton 是否被选中。但是，如果行数过多，此选择的性能将不佳。

# iphone - UIControlStateNormal 的 Addtarget 不起作用

> ID：13913334
> 
> 赞同：0
> 
> 时间：2012-12-17T11:32:34.863
> 
> 标签：iphone, ios, uibutton, uicontrolevents

我创建了一个名为 SectionButton 的自定义 UIButton。

该按钮有 2 个图像，一个用于正常状态，另一个用于选定和突出显示状态。

该按钮也有一个文本，当按下按钮时，必须调整 TitleEdgesInset。

在 init 方法中，我添加了方法：

```
[self addTarget:self action: @selector(buttonHighlighted:) forControlEvents: UIControlStateHighlighted];
[self addTarget:self action:@selector(buttonNormal:) forControlEvents:UIControlStateNormal]; 
```

但是方法'buttonNormal：'从未被调用，所以我不能调整titleEdgeInsets 属性。

```
#import "SectionButton.h"

@implementation SectionButton

- (id)initWithFrame: (CGRect)frame andTitle: (NSString*)title andbaseImageName:(NSString*)imageBaseName
{
if (self = [super initWithFrame: frame])
{
    // Create images for button
    UIImage* normalImage = [UIImage imageNamed: imageBaseName ];
    UIImage* downImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@_selected",imageBaseName]];
    // Set up button
    [self setTitle: [title uppercaseString] forState: UIControlStateNormal];    // Will be used for all states
    [self setTitleColor: [UIColor whiteColor] forState: UIControlStateNormal];
    [self.titleLabel setFont:[UIFont fontWithName:@"Helvetica" size:12.0]];

    [self setBackgroundImage: normalImage forState: UIControlStateNormal];
    [self setBackgroundImage: downImage forState: UIControlStateHighlighted];
    [self setContentEdgeInsets:UIEdgeInsetsMake(54, 0, 0, 0)];

    [self addTarget: self action: @selector(buttonHighlighted:) forControlEvents: UIControlStateHighlighted];
    [self addTarget:self action:@selector(buttonNormal:) forControlEvents:UIControlStateNormal];

}
return self;
}

- (void)buttonHighlighted: (id)sender
{
[self setTitleEdgeInsets:UIEdgeInsetsMake(0,0,-16,0)];
NSLog(@"button selected");
}

- (void) buttonNormal: (id)sender {
[self setTitleEdgeInsets:UIEdgeInsetsMake(0,0,0,0)];
NSLog(@"Button normal");
}    

}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:38:44.713

您正在传递控制状态而不是 ControlEvent，

```
[self addTarget:self action: @selector(buttonHighlighted:) forControlEvents: UIControlEventTouchDownInside];
[self addTarget:self action:@selector(buttonNormal:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:58:20.797

您只需要调用该按钮的 1 个方法。

在该方法中，您需要根据按钮的当前状态执行代码。

# regex - 将值列表转换为 CSV 值

> ID：13913336
> 
> 赞同：0
> 
> 时间：2012-12-17T11:32:36.313
> 
> 标签：regex, eclipse

我有一个单词列表，我想将它们转换为 CSV。

```
a
b
c
d 
```

至`a,b,c,d`

我替换`\n`为`,`并且它有效，但这是我的第二次尝试

我首先尝试了这个正则表达式`^([A-Za-z ]+)$\n`，替换为`\1,`. 这个特殊的正则表达式正在为相邻的字符串做这样的事情：

```
a,b
c,d 
```

我可以对其进行哪些更改以使其正常工作。

我在eclipse中做，所以我猜是java，但我不必考虑\转义，它和edit+一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:56:22.460

这个正则表达式：

```
^([A-Za-z ]+)$\n 
```

匹配行首、字母和空格，然后匹配行尾。

执行第一次替换后，该行包含一个逗号，因此它将不再匹配该模式。

正则表达式也有点多余。因为`\n`无论如何只会出现在一行的末尾，所以你不需要在你的模式中`$`同时使用两者。`\n`

为了修复它，你只需要让你的模式匹配一​​个逗号：

```
^([A-Za-z ,]+)\n 
```

注意：具体细节可能因您的 Eclipse 版本和/或文件编码而异。我需要 `\r\n`匹配我的换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:35:26.743

从您的示例中，您甚至不需要使用正则表达式。只需用逗号 ( ) 替换~~两个~~一个~~换行符~~换行符 ( ) 即可。`\n``,`

# android - 如何将 utf8 转换为 iso-8859-7？

> ID：13913340
> 
> 赞同：3
> 
> 时间：2012-12-17T11:32:42.747
> 
> 标签：android, c, utf-8

我有进行文本处理的遗留 C 代码。所有规则和数据都以 ISO-8859-7 编码。现在，我正在尝试移植到android。我已经建立了适当的`JNI`功能`GetStringUTFChars()`。这个 const char* 似乎是`UTF-8`. 所以，我需要转换成ISO。

在 Windows 中，我有一个转换为 ISO 的函数，`utf-8 (const char*)`然后`wchar_t`我用它`wcstombs()`来转换为 ISO。但是，这在 Android 下不起作用，我还读到 wchar_t 不安全。

那么，我该如何进行这种转换呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:07:03.130

从 UTF-8 到 ISO-8859-7。首先从 UTF-8 转换为原生 unicode，然后从原生 unicode 转换为 ISO-8859-7。但是，UTF-8 可能允许来自几乎所有现代脚本的超过 60000 个代码点，而 ISO-8859-7 仅允许 256 个。因此，您应该注意数据丢失并尽可能将数据保存在 unicode/UTF-8 中.

到目前为止，您可以使用任何 android 特定的 API（如果有的话）（我知道 iconv-android API）或 GNU C`libiconv`库进行转换。

# php - What is the difference between these 2 XPath queries?

> ID：13913341
> 
> 赞同：0
> 
> 时间：2012-12-17T11:32:44.830
> 
> 标签：php, xpath, xpath-2.0

Both queries retrive pictures that has been liked more than 5 times. What I think is that query 1 defines the relative path while query 2 don't and that's why query 2 uses "ancestor". Am I right? Which is better?

**First Query:**

```
//div[@class="pin"]
     [.//span[@class = 'LikesCount']
             [substring-before(normalize-space(.),' ') > 5]]
     /div[@class="PinHolder"]
     /a/img 
```

**Second Query:**

```
//div[@class="pin"]/p/span[@class="LikesCount"]
[substring-before(., " ") > 5]/ancestor::div[@class="pin"]/a/img 
```

**Follows the Markup:**

```
<div class="pin">

[...]

<div class="PinHolder">
<a href="/pin/56787645270909880/" class="PinImage ImgLink">
    <img src="http://media-cache-ec3.pinterest.com/upload/56787645270909880_d7AaHYHA_b.jpg" 
         alt="Krizia" 
         data-componenttype="MODAL_PIN" 
         class="PinImageImg" 
         style="height: 288px;">
</a>
</div>

<p class="stats colorless">
    <span class="LikesCount"> 
        22 likes 
    </span>
    <span class="RepinsCount">
        6 repins
    </span>
</p>

[...]

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:02:39.617

There are a few differences that could make them return different results, and a few that make no difference. Some differences will affect the values of the expressions (or expressions like them) in some input and not in others.

*   The first expression looks for (a subset of) the elements matching the following path:

    ```
    //div[@class='pin']/div[@class='PinHolder']/a/img 
    ```

    The second looks for (a subset of) elements matching this path:

    ```
    //div[@class='pin']/a/img 
    ```

    So the two will never return overlapping results.

*   In checking the condition on the `span` of class `LikesCount`, the first expression applies the `normalize-space` function to the span's string value before extracting the first token; the second doesn't. Given string values like the one in the sample markup (newline, eight blanks, "22 likes", blank, newline, four blanks), this may make a difference. If the environment normalizes whitespace before evaluating the XPath expression, it might not make a difference.

*   Each expression tests for a `span` element of class `LikesCount`; the first expression looks for such a span among all the descendants of the `div` with class `pin`, while the second looks for it only among grandchildren whose parent is a `p`. In the sample XML shown, these amount to the same thing (the first expression won't find any spans of class `LikesCount` that the second expression doesn't also find.

*   Owing to the use of the ancestor axis in the second expression, the two will return different results in some cases of documents with nested `div` elements of class `pin`; if there are no such nested `div` elements in the input, this difference in formulation won't make a difference in the values they return.

*   The first expression uses more whitespace than the second, in places where whitespace is not significant to XPath. This may make the first expression easier to read for some readers; it also make it take more space (which some readers will dislike). The indentation of the predicates in expression 1 places predicates applied against the same nodes directly above and below each other, which may help some readers see that they apply to the same nodes. On rare occasions I have encountered XPath evaluators which were not prepared to handle insignificant whitespace in XPath expressions, and of course some programming languages require special treatment for multiline strings, so the multi-line indented form of the first expression may be hard to use in some environments, even though it's legal XPath.

You write "What I think is that query 1 defines the relative path while query 2 don't and that's why query 2 uses "ancestor". Am I right?" I am not sure what you mean, so this attempt at an answer may not be helpful (sorry). The first expression puts the test concerning the likes-count span into a predicate on the `div` of class `pin`, while the second navigates to the span, performs the test, and then navigates back up to the set of all ancestors which are `div` elements with class `pin`. In XML like that shown, these formulations have the same effect; they can produce slightly different results when `div` elements of class `pin` can nest. But the exact formulation of the test and the traversal matter.

You ask "Which is better?" Since they currently return different results, the first way to decide this is to ask "which of them expresses the question you want to ask?"

If they are modified to return the same result, the question will become "which of them do you find easier to understand?", so that when maintaining the code you or your successors can see what is going on?

# upgrade - SpringSource-TC-Server 和 Java7 是否存在任何已知问题？

> ID：13913343
> 
> 赞同：0
> 
> 时间：2012-12-17T11:32:52.147
> 
> 标签：upgrade, java-7, tcserver

我们正在使用***SpringSource-TC-Server***并且我们正在考虑升级到**java7**。（目前使用**java6**）。

我们没有看到任何关于***SpringSource-TC-Server***与**java7**无法正常工作的报告，但我们不知道有任何值得命名的项目已经迁移到这样的环境。

我正在寻找有关以下内容的答案：

是否有任何已知问题？

是否有任何项目已迁移并可以报告其进展情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T09:56:32.820

自 vFabric tc Server 2.7.0 起正式支持 Java 7：

[http://www.vmware.com/support/vfabric-tcserver/doc/vfabric-tcserver-rn-2.7.0.html#whatsnew](http://www.vmware.com/support/vfabric-tcserver/doc/vfabric-tcserver-rn-2.7.0.html#whatsnew)

由于您可能由于商业支持而使用 tc Server 而不是普通的 Tomcat，因此只有在使用的 tc Server 版本正式支持底层 Java JDK 时，才将其迁移到最新版本是合理的。否则，您将在不受支持的配置中运行它，这与运行普通不受支持的 Tomcat 开源版本相距不远。

以官方支持的版本排列在 Java 7 上运行 tc Server 可为您带来 2 个优势：

1.  vmWare 会彻底测试它是否存在任何不兼容性，这样您就不必自己处理测试。
2.  如果确实发生任何问题，您始终可以从 vmWare 获得支持来解决这些问题。

我知道它不能直接解决您的问题，因为我们公司还没有升级，只是计划这样做。

我只是觉得你的方法对商业支持的产品没有意义，我想概述一下广泛使用的合理 (IMO) 方法。

至于任何已知问题，Java 7 以其对 XML 堆栈的向后不兼容更改而闻名，尤其是迁移到 JAXB 2.2 会更改`java.lang.Boolean`对象的处理（请参阅另一个问题 -[升级到 Java 7 时有哪些陷阱](https://stackoverflow.com/questions/10833781/what-are-the-pitfalls-when-upgrading-to-java-7)）。这可能会在许多不同的地方出现，我已经看到它在`cxf-codegen-plugin`从 WSDL 生成 Java 存根的 Apache CXF 中引起问题，因为`wsdl2java`它启动的工具使用 JAXB - 为布尔元素生成的方法名称不再采用`java.lang.Boolean isSomeBooleanProperty()`但`java.lang.Boolean getSomeBooleanProperty()`根据这些存根破坏代码的形式。

因此，如果您通常处理 SOAP Web 服务或 XML，请执行彻底的测试。

# sql-server-2012 - 在 SQL Server 2012 中处理当前版本的数据层应用程序

> ID：13913344
> 
> 赞同：3
> 
> 时间：2012-12-17T11:33:02.627
> 
> 标签：sql-server-2012, data-tier-applications

我在跟踪我的 DAC 版本时遇到了一些问题。我无法看到当前版本的数据库。幸运的是，我找到了这篇文章： [如何找到 SQL Server 数据层应用程序的当前版本？](https://stackoverflow.com/questions/3331782/how-do-i-find-the-current-version-of-a-sql-server-2008-data-tier-application)

第二个答案成功了，现在我可以使用 SQL 语句查看当前版本：

```
select instance_name,type_version from msdb.dbo.sysdac_instances 
```

现在我可以看到当前版本和新 dacpac 的版本，但方式非常难看。我还有一些问题/不确定性。

1.  出于某种原因，我没有在 SSMS 中看到管理下的数据层应用程序。我只是为 SQL 2008 R2 建立了关于这个的讨论，所以我不确定是在 SQL 2012 中放弃了还是我做错了什么。

2.  在 SSMS 中升级数据层应用程序时，我只能在升级向导中达到摘要步骤时看到 dacpac 版本。当我在选择包步骤中选择新的 dacpac 时，我希望在下面的向导中看到所选 dacpac 的版本和描述（如许多教程中所述），但没有出现任何内容。根据我在那些教程中找到的图像，即使在摘要步骤中，我也看不到当前 DAC 数据库的版本，而 2008 R2 就是这种情况。

3.  有没有比这更好的处理版本比较的方法，比如在同一个地方显示当前版本和新版本？如果您尝试使用具有相同或更低版本号的 dacpac 进行升级，有没有办法显示警告？

谢谢

马尔科

# c# - Linq2Sql Buildtime 需要很长时间

> ID：13913348
> 
> 赞同：1
> 
> 时间：2012-12-17T11:33:17.177
> 
> 标签：c#, .net, performance, linq-to-sql

我正在使用 Linq2Sql 来访问我相当大的数据库。（67 个表）目前使用它非常痛苦，因为“MSLinqToSQLGenerator”需要很长时间才能生成它的类并最终完成编译。

有什么方法可以加快这个过程吗？像，是否可以缓存其生成的输出，因为我很少接触数据库结构？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:13:41.417

**将模型移动到单独的装配体。**

当您的模型直接包含在应用程序的项目中并且您通过预构建事件或 T4 模板生成视图时，无论何时重新构建项目，都会进行视图生成和验证，即使模型没有更改。

如果将模型移动到单独的程序集并从应用程序的项目中引用它，则可以对应用程序进行其他更改，而无需重新构建包含模型的项目。

**注意：** 将模型移动到单独的程序集时，**请记住将模型的连接字符串复制到**客户端项目的应用程序配置文件中。

有关更多信息，请检查[**实体框架的性能注意事项**](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

# jquery - Jquery中的加/减增量器，如何概括？

> ID：13913350
> 
> 赞同：1
> 
> 时间：2012-12-17T11:33:21.373
> 
> 标签：jquery, increment

我正在使用此代码

```
<a id="minus" href="#">-</a>
   <span id="VALUE">0</span>
<a id="plus" href="#">+</a> 
```

Javascript：

```
$(function(){

    var valueElement = $('#VALUE');
    function incrementValue(e){
        valueElement.text(Math.max(parseInt(valueElement.text()) + e.data.increment, 0));
        return false;
    }

    $('#plus').bind('click', {increment: 1}, incrementValue);

    $('#minus').bind('click', {increment: -1}, incrementValue);

}); 
```

有一个名为“VALUE”的文件的加/减增量器。现在，我有一个使用这个包含 150 个字段的表单......有一种方法可以概括这个代码，以某种方式将用户正在递增/递减的字段的名称传递给函数？否则，我必须复制此代码 150 次...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:54:36.967

把它们放在一个容器里，比如

```
<span class="stepper">
   <dec>-</dec>
   <span>0</span>
   <inc>+</inc>
</span> 
```

这样你就可以相对地选择显示器，而不会太麻烦，比如

```
$(this).parent().children("span"); 
```

在各自的`click`处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:02:07.730

如果有帮助，试试这个：

我改变了一点我用`classes .plus, .minus`的而不是`ids #plus, #minus`

```
 $('.plus').click(function() {
    var sp = parseFloat($(this).prev('span').text());
    $(this).prev('span').text(sp + 1);
 });

 $('.minus').click(function() {
    var sp = parseFloat($(this).next('span').text());
    $(this).next('span').text(sp - 1);
 }); 
```

在小提琴中检查一下：http: **[//jsfiddle.net/L2UPw/](http://jsfiddle.net/L2UPw/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:39:10.100

在选择器中使用类而不是 ID

```
$('.minus').bind('click', {increment: -1}, incrementValue); 
```

和

```
< a id="minus1" class="minus" href="#">-< /a>
...
< a id="minus150" class="minus" href="#">-< /a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T11:14:51.140

如果您想通用化您的代码，那么最好的方法是在影响值的两个元素上使用单个类，但添加一个`data`属性，该属性是调整添加/删除量的因素。然后，您可以将控件包装在单个包含中`div`，以使 DOM 遍历更容易。

通过使用这种模式，您可以在页面上拥有多个控件实例，所有按钮都由一个单击处理程序控制。试试这个：

```
$('.value-amender').click(function() {
  var $el = $(this);
  $el.closest('.amender-container').find('.value').text(function(i, t) {
    return parseInt(t, 10) + (1 * $el.data('factor'));
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="amender-container">
  <a class="value-amender" href="#" data-factor="-1">-</a>
  <span class="value">0</span>
  <a class="value-amender" href="#" data-factor="1">+</a>
</div>

<div class="amender-container">
  <a class="value-amender" href="#" data-factor="-1">-</a>
  <span class="value">0</span>
  <a class="value-amender" href="#" data-factor="1">+</a>
</div>
```

# c# - 使用内存流将二进制转换为位图

> ID：13913353
> 
> 赞同：15
> 
> 时间：2012-12-17T11:33:29.037
> 
> 标签：c#, .net

嗨，我想将二进制数组转换为位图并在`picturebox`. 我编写了以下代码，但出现异常，表明参数无效。

```
 public static Bitmap ByteToImage(byte[] blob)
    {
        MemoryStream mStream = new MemoryStream();
        byte[] pData = blob;
        mStream.Write(pData, 0, Convert.ToInt32(pData.Length));
        Bitmap bm = new Bitmap(mStream);
        mStream.Dispose();
        return bm;

    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T11:39:05.740

这真的取决于`blob`. 它是否是有效的位图格式（如 PNG、BMP、GIF 等？）。如果它是有关位图中像素的原始字节信息，则不能那样做。

`mStream.Seek(0, SeekOrigin.Begin)`在 line 之前使用将流倒回到开头可能会有所帮助`Bitmap bm = new Bitmap(mStream);`。

```
public static Bitmap ByteToImage(byte[] blob)
{
    using (MemoryStream mStream = new MemoryStream())
    {
         mStream.Write(blob, 0, blob.Length);
         mStream.Seek(0, SeekOrigin.Begin);

         Bitmap bm = new Bitmap(mStream);
         return bm;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T11:38:24.030

不要丢弃 MemoryStream。它现在属于图像对象，将在您处置图像时被处置。

也考虑这样做

```
var ms = new MemoryStream(blob);
var img = Image.FromStream(ms);
.....
img.Dispose(); //once you are done with the image. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:46:51.120

```
System.IO.MemoryStream mStrm = new System.IO.MemoryStream(your byte array);
Image im = Image.FromStream(mStrm);
im.Save("image.bmp"); 
```

尝试这个。如果您仍然收到任何错误或异常；请发布您尝试转换为图像的字节。您的图像流中应该有问题....

# javascript - 样式不适用于使用 javascript 的打印页面

> ID：13913355
> 
> 赞同：0
> 
> 时间：2012-12-17T11:33:38.960
> 
> 标签：javascript, printing, printing-web-page

我正在使用下面的代码打印 ASPX 网页。它正在工作。但是样式表不适用于此模板。请帮我将样式应用于打印页面。

```
 <script language="javascript">
        function printpr() {

            var panel = document.getElementById("<%= all.ClientID %>");
            var printWindow = window.open('', '', 'height=400,width=800');
            printWindow.document.write('<link rel="stylesheet" type="text/css" href="style.css" media="print"/>\n')
            printWindow.document.write(panel.innerHTML);
            printWindow.document.close();
            setTimeout(function () {
                printWindow.print();
            }, 500);
            return false;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:36:47.760

认为这应该能够指导您解决问题。

[http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml](http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml)

# javascript - 使用 CGI 脚本和 jquery ajax 请求进行电子邮件验证

> ID：13913356
> 
> 赞同：0
> 
> 时间：2012-12-17T11:33:40.050
> 
> 标签：javascript, jquery, ajax, cgi, email-validation

我的服务器上有 CGI 脚本，用于检查电子邮件 ID 是否存在。它以“Y”或“N”响应。我正在尝试使用 jquery ajax 在客户端获取此值，但我似乎无法得到响应。但是当我使用`CURL`.

这是我的代码： `jQuery.get("http://<mysite-name>/cgi-bin/response.cgi?mailaddress=myid@gmail.com", function(data){alert(data);})`

数据为空。响应内容类型是`text/plain`

我什至尝试了json格式。但这似乎也没有奏效。

# deployment - Jenkins：处理许多构建配置

> ID：13913357
> 
> 赞同：2
> 
> 时间：2012-12-17T11:33:46.877
> 
> 标签：deployment, jenkins, continuous-integration

我工作的商店正在使用 jenkins 进行持续集成，并使用其升级的构建插件来部署构建工件。但是，随着配置数量的增加，我们在管理此设置时遇到了麻烦。所以我的问题是：

**如何设置一个方便的 CI 系统，我可以从中部署各种配置的各种工件，而无需手动编写每个可能的组合脚本？**

更多细节：

假设我有构建配置（即分支）`A`，`B`并且`C`. 有 3 个部署目标`I`，`J`和`K`（例如针对各种客户端或消费者）。最后，每个部署的实例都有各种服务`X`，`Y`和`Z` （例如网站、后台任务和数据服务）。各种服务通常是一起推广的；但有时，特别是为了获得修补程序，它们不是。

目前，我们对这些组合中的每一个都有促销活动。所以要安装一个典型的构建，我需要运行 Promotions`J/X`和config 。不幸的是，服务的数量正在增加，并且在 jenkins 中获取所有这些配置而不会出现任何错误，并且确保在部署时不会忘记或混淆任何组件变得越来越棘手。当然，有超过三个构建配置和三个以上的目标，所以这一切都失控了。`J/Y``J/Z``C`

一些不太有效的选项：

*   参数化促销以禁用各种组件。Jenkins 允许参数化促销，但值在您第一次促销时是固定的。我可以通过提升和设置一些参数来消除一定的自由度`J`，但是如果以后的版本坏了，我不能只回滚坏的组件，我需要回滚整个部署。

*   依赖的，参数化的构建。Jenkins 似乎不支持选择依赖哪个构建的参数，如果您手动编码选项，那么“运行”选择参数当然无法工作。

我真正想要的：

*   在手动接受构建以准备部署后，应将其标记为这样，包括针对哪个目标的参数和针对哪些组件的参数。

*   安装历史记录按组件按目标记录，*而不是*（仅）按构建记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:40:00.600

可能有一些插件可以提供帮助，但您也可能正在接近适合查看商业工具的地步。我为构建/部署供应商 ( [Urbancode](http://Urbancode.com) ) 工作，所以一定要对它持保留态度。

我们通常看到人们对单个项目有不同的构建类型（或分支），并将它们分组为具有多个“构建工作流”的单个“项目”，使用相同的基本配置和每个工作流参数化。真正简单的流程重用。

> 不幸的是，服务的数量正在增加，并且在 jenkins 中获取所有这些配置而不会出现任何错误，并且确保在部署时不会忘记或混淆任何组件变得越来越棘手。当然，有超过三个构建配置和三个以上的目标，所以这一切都失控了。

如果这里的挑战是您有多个 Web 服务和促销（尤其是对生产）涉及以协调的方式推送大量特定版本的东西，那么您将达到我们的[应用程序发布自动化工具](http://www.urbancode.com/html/products/deploy/)uDeploy 的标准用例。它方便地与 Jenkins 集成。它还可以很好地跟踪哪个版本的部署目标是什么，以及谁运行了该过程。

# email - 从用户那里获取文件，用 base64 编码并在电子邮件中转发文件的脚本

> ID：13913360
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:33:58.087
> 
> 标签：email, php

我正在尝试创建一个脚本，该脚本从用户那里获取文件，将其编码为 base64，然后将其作为带有编码文件的附件转发到电子邮件。

这是到目前为止的代码：

客户端 ：

```
<form action="send.php" method="post" enctype="multipart/form-data">
<input type="file" name="uploaded_file">
<input type="submit" value="Submit" name='submit'>
</form> 
```

PHP 脚本 (send.php)

```
<?php
$uploaded_file = basename($_FILES['uploaded_file']['name']);
$file_size = filesize($uploaded_file);
$handle = fopen($uploaded_file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content1 = base64_encode($content);
$my_file = "'$encoded_file' . '_encoded' . '.html'";
$handle1 = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file);
fwrite($handle1, $content1);
$from="tes@gmail.com";
$to="myemail@gmail.com"
$subject="New file";
$message="you got a new file";
mail($from,$to,$subject,$message);
unlink($my_file);
?> 
```

我不知道如何在电子邮件中附加 $myfile。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:47:32.120

你可以只使用[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)

```
$mail = new PHPMailer(); // defaults to using php "mail()"

$body = file_get_contents('contents.html');
$body = preg_replace('/[\]/', '', $body);

$mail->SetFrom('tes@gmail.com', 'First Last');
$mail->AddReplyTo("tes@gmail.com", "First Last");
$mail->AddAddress("myemail@gmail.com", "John Doe");
$mail->Subject = "New File";
$mail->AltBody = "you got a new file";
$mail->MsgHTML($body);

$my_file = file_put_contents("tmp.html", base64_encode($content));
$mail->AddAttachment($my_file); // attachment

if (! $mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message sent!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:38:31.283

如果您没有使用任何外部邮件库，例如 PEAR::SMTP 或 Swift，那么创建附件并不是一件简单的事情。

您必须检查他们指示的邮件标准，了解如何将标头与邮件内容以及邮件内容与附件分开。

分隔符是`\r\n`，并且每个部分之前必须有一个分隔符。

检查此链接：[http ://webcheatsheet.com/php/send_email_text_html_attachment.php](http://webcheatsheet.com/php/send_email_text_html_attachment.php)

我的代码示例：

```
$uid = md5(uniqid(time()));
$header = implode("\r\n",
    array(
        'MIME-Version: 1.0',
        'From: Address <address@example.com>',
        'Reply-To: Address <address@example.com>',
        'Cc: Address <address@example.com>',
        'Content-Type: multipart/mixed;',
        '    boundary="'.$uid.'"',
        '',
        '--'.$uid,
        'Content-Type: text/plain;',
        '    charset="us-ascii"',
        'Content-Transfer-Encoding: 7bit',
        '',
        mb_convert_encoding(
            implode("\r\n",
                array_map('wordwrap',
                    array(
                        'Hello,',
                        '',
                        'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla laoreet varius augue non pretium. Nullam dignissim iaculis velit, ut cursus neque mollis et. Fusce faucibus dictum nunc, sit amet cursus tellus aliquam ut. Praesent id libero orci, ut vehicula orci. Proin nulla sem, dapibus in lacinia vel, pharetra eget eros. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras rhoncus, enim sed mollis suscipit, sapien mauris suscipit mauris, nec placerat nisi sapien ac lectus. Sed vehicula faucibus iaculis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Integer placerat commodo nibh. Morbi sit amet augue vitae urna mattis pulvinar ac eget tellus. Donec mattis cursus posuere. Donec dolor velit, aliquam eu pretium vel, accumsan eu est. Proin at ante nisi, ut malesuada diam.',
                        '',
                        'Nulla ac urna lacus, in luctus ipsum. Nunc luctus risus non dui tincidunt in ultricies tellus rhoncus. Aliquam pellentesque vehicula adipiscing. Phasellus porttitor sodales quam et cursus. Pellentesque iaculis consectetur lorem, et consectetur sem tristique sed. Duis vehicula eleifend nisl, a semper augue lobortis cursus. Fusce ut ligula diam. Quisque fringilla sodales massa vitae rhoncus. Pellentesque a libero sed enim lacinia commodo quis et dolor. Praesent facilisis, orci nec lacinia ultrices, enim nunc imperdiet augue, at aliquet dolor augue nec nulla.',
                        '',
                        'Ut venenatis commodo pulvinar. Vestibulum quam odio, malesuada posuere porttitor facilisis, molestie vel risus. Mauris auctor fringilla ornare. Morbi eu libero orci, nec semper lorem. Quisque blandit, ante nec pharetra bibendum, felis felis tincidunt felis, sed mattis sapien lorem et risus. In sed interdum quam. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas vitae metus id purus ultrices fermentum. In dui eros, feugiat sit amet feugiat vel, accumsan vitae ligula. Nam at consectetur elit. Maecenas eget metus id nibh luctus mattis. Quisque mollis, sapien semper vulputate venenatis, purus arcu ornare orci, sit amet pellentesque enim ipsum non urna. Quisque at augue nec quam vehicula suscipit eu a dui. Morbi at molestie nunc. Mauris ultricies rutrum euismod. Sed non sem nisi. '
                    )
                )
            ),
            'iso-8859-1'
        ),
        '',
        '--'.$uid,
        'Content-Type: application/pdf;',
        '    name="file.pdf"',
        'Content-Transfer-Encoding: base64',
        'Content-Disposition: attachment;',
        '    filename="file.pdf"',
        '',
        chunk_split(base64_encode(file_get_contents('file.pdf'))),
        '--'.$uid.'--'
    )
);
mail($contacts, 'Subject', '', $header); 
```

# c++ - 网络：当接口启动/关闭时，在所有接口上绑定一个套接字

> ID：13913363
> 
> 赞同：4
> 
> 时间：2012-12-17T11:34:10.950
> 
> 标签：c++, sockets, networking, network-programming, bind

我正在创建一个需要侦听特定端口上所有网络接口的套接字。

我使用 INADDR_ANY 创建它，因此套接字可以正确侦听所有本地 IP 地址。

我的问题是：如果出现新界面会发生什么？套接字是自动监听新接口，还是我必须重新绑定？

示例：我的套接字已经在监听，我创建了一个 wifi ad-hoc 连接。我是否需要检测新接口可用（即席接口），然后重新绑定套接字？

（我现在在 Windows 上使用 C++，但代码必须移植到 MacOS）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:53:29.450

INADDR_ANY 真正意味着*任何*接口，而不是“所有”接口。因此，绑定套接字时接口是否存在并不重要。

# android - 如何在android中创建带有内容的角框？

> ID：13913364
> 
> 赞同：1
> 
> 时间：2012-12-17T11:34:12.767
> 
> 标签：android

如何在 Android 中创建类似于下图的圆形边框表格？

![在此处输入图像描述](../Images/ce6f88651a06481564789912517aea0b.png)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:48:38.713

只需查看通过 XML 制作形状的[官方 Android 文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)。

您可以创建一个 box.xml 文件来定义您的矩形，如提供的示例中所述：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#FFFF0000"
        android:endColor="#80FF00FF"
        android:angle="45"/>
    <padding android:left="7dp"
        android:top="7dp"
        android:right="7dp"
        android:bottom="7dp" />
    <corners android:radius="8dp" />
</shape> 
```

# jpa - 使用关节从 HQL 查询中获取对象列表

> ID：13913366
> 
> 赞同：0
> 
> 时间：2012-12-17T11:34:28.133
> 
> 标签：jpa, ejb, hql, jointjs

我有两个表：客户和命令，这是`@OneToMany`从客户端到命令的关系，一个客户端有很多命令。表命令包含 : `idCommand, date, nameCommande, idCustomer`。表客户包含：`idCustomer, nameClient, email`。所有 JPA 和 EJB 都已设置好，我可以使用托管 bean 中的 HQL 查询轻松获取命令或客户端列表，并使用此代码在 JSP 中列出它们。

```
 public List<Commande> selectAllCommandes() {
    List<Commande> commandes = em.createQuery("select c from Commande c").getResultList();
      return commandes;
}
 public List<Customer> selectAllCustomers() {
    List<Customer> customers = em.createQuery("select cu from Customer cu").getResultList();
    return customers;
} 
```

如何`idCustomer`以显示客户名称而不是其 ID 的方式将两个表与列连接起来？我用过这个 HQL 查询

`SELECT c.date, c.name Commande, cu.nameClient FROM Commande AS c, Customer AS cu WHERE cu.idCustomer = c.idCustomer`

但我不知道`List<>`我需要使用哪种类型来获得结果/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:53:21.010

如果您在`Commande`实体中映射反向关系...

```
public class Commande {
    ...

    @ManyToOne(mappedBy="commande")
    private Client client;

    // getter and setter ...
} 
```

[（这里`mappedBy`是获取在`@OneToMany`关系另一端设置的属性名称）]

然后在执行查询后，`SELECT c FROM Commande c`您将获得一个对象列表`Commande`，对于每个对象，您可以使用以下命令获取客户端的名称：`thisCommande.getClient().getName()`。

# android - 将相机图片渲染到纹理

> ID：13913370
> 
> 赞同：0
> 
> 时间：2012-12-17T11:34:41.813
> 
> 标签：android

有没有办法将相机图片绑定到着色器？

我通过以下方式设置相机预览：

```
// Create shader and GL program
_texture = new SurfaceTexture( _texName );
_camera = Camera.open();
_camera.setPreviewTexture( texture );
_camera.startPreview(); // What does start preview do internally? 
```

当有新图片可用时，我会：

```
_texture.updateTexImage(); // Should bind to GL_TEXTURE_EXTERNAL_OS
GLES20.glViewport( 0, 0, _surfaceWidth, _surfaceHeight );
GLES20.glBindFramebuffer( GLES20.GL_FRAMEBUFFER, _framebuffers[0] );
GLES20.glFramebufferTexture2D( GLES20.GL_FRAMEBUFFER, GLES20.GL_COLOR_ATTACHMENT0, GL_TEXTURE_EXTERNAL_OES, _texName, 0); 
```

PS原始代码包含错误检查

# django - 在Django中，如何实现不同mysql dbs中表之间的外键关系

> ID：13913372
> 
> 赞同：1
> 
> 时间：2012-12-17T11:34:48.350
> 
> 标签：django, django-models, django-admin, foreign-key-relationship

在 MySQL 中，我们可以在不同数据库中的表之间建立外键关系。我发现很难在各自的 Django 模型上翻译这种关系。

我在[文档](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#cross-database-relations)中读到不支持跨数据库关系，但是我们可以覆盖一些属性/函数，以便我们可以将表标识为`DB.table`而不是`table`？

例如，在某些in 中引用了table `table1`in 。Django 尝试（未成功）在 中查找，并引发了`DB1``table2``DB2``table1``DB2``DatabaseError`

```
Variable    Value
charset     'latin1'
exc         <class '_mysql_exceptions.ProgrammingError'>
self        <MySQLdb.cursors.Cursor object at 0x2a87ed0>
args        (195,)
db          <weakproxy at 0x2a95208 to Connection at 0xdad0>
value       ProgrammingError(1146, "Table 'DB2.table1' doesn't exist")
query       'SELECT (1) AS `a` FROM `table1` WHERE `table1`.`ndx` = 195  LIMIT 1' 
```

除了方法之外，几乎所有东西都有效`save`。朝着正确的方向推动会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:49:18.673

您需要[手动选择数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database-for-a-queryset)。

查看您给出的错误，您应该执行以下操作：

```
qs = table1.objects.using('DB1 ').filter(pk=id)
# just an example 
```

在这个例子中，我们明确地告诉 Django 定位`table1`在`DB1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:57:27.610

似乎我们无法做任何事情来使不同 mysql 数据库中的两个表之间的关系正常工作。这是设计使然。票[17875](https://code.djangoproject.com/ticket/17875)有一些信息。我们需要编写代码来解决这个问题。

# bash - bash：sed：变量中的正则表达式

> ID：13913382
> 
> 赞同：1
> 
> 时间：2012-12-17T11:35:30.863
> 
> 标签：bash, sed

我对以下脚本感到非常疯狂。

以下命令按预期工作：

```
echo a | sed 's/a/b/' 
```

输出 ：

```
b 
```

但是这个脚本没有：

```
test="'s/a/b/'"
echo a | sed $test 
```

输出 ：

```
sed: -e expression #1, char 1: unknown command : `'' 
```

我真的应该很愚蠢，但我看不出我错过了什么。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:42:23.220

```
test="'s/a/b/'"
echo a | sed $test 
```

相当于：

```
test="'s/a/b/'"
echo a | sed "'s/a/b/'" 
```

显然`sed`不理解带有`"`and的命令`'`，它解释`'`为命令。您可以使用其中任何一种：

```
test='s/a/b/' 
```

或者

```
test='s/a/b/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:38:55.310

你可能想要这个：

```
kent$  test="s/a/b/"         

kent$  echo a | sed ${test}
b 
```

或者

```
kent$  echo a | sed $test  
b 
```

或者

```
test=s/a/b/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:43:24.653

这是因为你的双重包装你的字符串。`test="'s/a/b'"`. 然后 Sed 得到`'s/a/b/'`文字字符串。您只希望 sed 接收`s/a/b/`.
您只需要将字符串包装在**一组引号**中，否则内部引号将被解释为参数的一部分。

# ruby-on-rails - FactoryGirl 指的是之前创建的工厂

> ID：13913394
> 
> 赞同：0
> 
> 时间：2012-12-17T11:36:19.610
> 
> 标签：ruby-on-rails, factory-bot

我的工厂有点卡在这里，我有一个友谊工厂

```
FactoryGirl.define do
  factory :friendship do |f|
    f.association :user
    f.association :friend, :factory => :user

    trait :authorized do
        authorized true
    end

    trait :pending do
        authorized false
    end

  end
end 
```

现在在我的用户工厂内，我有以下内容

```
factory :valid_user, :parent => :user do |user|
  user.after(:create) { |u| FactoryGirl.create(:usergroup, :user => u) }
  user.after(:create) { |u| FactoryGirl.create(:friendship, :user => u, :authorized => true) }
  user.after(:create) { |u| FactoryGirl.create(:friendship, :friend => u, :authorized => true) }
end 
```

我的问题是，有什么方法可以引用第一个友谊，它是为了创建第一个友谊的反向友谊（用户 = 朋友，朋友 = 用户？除此之外，为什么我不能使用里面的特征块？我必须设置 :authorized = true 并且不能只使用 :authorized。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:52:17.417

尝试这个：

```
factory :valid_user, :parent => :user do |user|
  user.after(:create) do |u|
    FactoryGirl.create(:usergroup, :user => u)

    f1 = FactoryGirl.create(:friendship, :user => u, :authorized => true)
    FactoryGirl.create(:friendship, :friend => u, :authorized => true)

    FactoryGirl.create(:friendship, :friend => f1.user, :user => f1.friend)
  end
end 
```

对于第二部分，FactoryGirl 采用键值对。这就是它的工作原理。

# xml - 如果属性存在于 xml 中但不存在于 xsd 中会发生什么

> ID：13913397
> 
> 赞同：0
> 
> 时间：2012-12-17T11:36:24.387
> 
> 标签：xml, xsd, xsd-validation

如果xml中存在属性但xsd中没有属性会发生什么如果上述可能，请举一些例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:06:09.980

> 如果某个属性存在于 xml 中但不存在于 xsd

验证肯定会失败！

但是可以使用通配符声明未知属性`<xs:anyAttribute/>`

参考：http: [//msdn.microsoft.com/en-us/library/ms256443.aspx](http://msdn.microsoft.com/en-us/library/ms256443.aspx)

# javascript - 如何在 JavaScript 中将作用域用于函数构造函数？

> ID：13913401
> 
> 赞同：0
> 
> 时间：2012-12-17T11:36:36.943
> 
> 标签：javascript, function, scope

如果我要`function`使用`Function`构造函数创建一个新的，我怎么能给它一个非临时范围来访问`window`（意味着只需要评估一次范围，而不是每次调用函数时）？目的是构造多个变量，这些变量需要一些非常昂贵的计算，我不想在每次调用函数时都重构它们，但我也不想将它们存储在`window`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T11:47:27.750

您可以使用`bind`关键字将函数绑定到特定上下文：

```
var context = {};
var f = new Function("args", "return this").bind(context);
f(); // context 
```

由于绑定是在 ECMA 5th 中定义的，它可能不会出现在所有浏览器中，[这里有一个解决方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:40:54.710

出于上述目的，您使用静态函数。您不能阻止在每次调用时评估范围，因为这是 JavaScript 的工作方式，但您可以通过不在`window`范围链中来加速它。

```
var namespace = {};
namespace.someMethod = function() {
    // do something here.
}; 
```

现在，在您的代码中的任何地方，您都可以使用`namespace.someMethod();`. 小心点。以上是静态方法。您可以在不实例化的情况下调用它。但是你**不能**`this.property`在静态函数中使用。这是一个潜在的非常危险的操作，因为它可能会授予对全局对象的扩展访问权限，并且基本上是不受限制的权限。

上面是一个**静态**的JavaScript 方法。它在作用域链**中没有窗口。**

以下是使用相同模式创建构造函数的方法。当你想使用构造函数时，你总是在使用之前实例化。为此，您有`new`关键字。

```
var namespace = {};
namespace.coordinate = function(x, y) {
    this.x = x;
    this.y = y;
};

namespace.coordinate.prototype.addCoordinates = function() {
    return this.x + this.y;

}; 
```

现在您可以在代码中的任何位置执行以下操作：

```
var coordinateObject = new namespace.coordinate(5,10);
// you have created a new instance.
alert(coordinateObject.addCoordinates());// will alert 15;
// now you can make as many as you want. They will behave as instances. 
// This means they do not interfere with each other in any way.
// They just have the same properties and methods, but the instance values
// Can be entirely different.

var secondCoordinateObject = new namespace.coordinate(10, 25);
alert(secondCoordinateObject.addCoordinates());// will output 35. 
```

你已经成功地创建了你的`namespace.coordinate`类的一个实例。使用我给您的模式，您几乎可以复制 Java 或 C 或任何其他面向对象语言的全部功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:10:44.360

不断增长的创建、存储、隐藏、显示和分组变量和函数的方法是通过“**闭包**”的魔力，这是 Javascript 最强大但最不为人知的特性：

```
var groupObj = (function (setUp) {

    // maintained by reference, hidden
    var _priVar = setUp * 2; 

    // maintained by reference, revealed (through returned object)
    var _pubVar = 8;     
    var _pubFunc = function (x) {     
        _priVar += x;
        _pubVar += x;    
    }

    var lostVar = setUp * 99; // not referenced, hidden, so evaporates!

    return {    
        'pubVar' : _pubVar,
        'pubFunc' : _pubFunc    
    }

}(4)); // runs immediately with 4 as setUp, revealing pubVar & pubFunc 
```

然后...

```
groupObj.pubFunc(7); // runs public function, adds 7 to both variables

alert('public variable: ' + groupObj.pubVar); // alerts public variable 
```

每当另一个函数内部有一个函数时，就会发生闭包。外部函数内部的变量将被维护，只要它被内部函数引用，这是一种“无人区”，其中变量通过从较低范围的引用强制存在，但被隐藏由于 Javascript 的先天原则，从更高的范围。

还有其他几种使用闭包的方法，替换对象构造函数，一次性无冲突私有函数等等。这里有很多关于它们的帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:17:48.813

```
var yourNamespace = {

func1: function() {
},

func2: function() {
}
};

...

yourNamespace.func1(); 
```

您可以通过从名称空间调用函数来调用所需的函数，例如 yourNamespace.func1();

# c# - 列出 c# lib 中标记为资源的所有文件

> ID：13913408
> 
> 赞同：1
> 
> 时间：2012-12-17T11:37:04.620
> 
> 标签：c#

是否可以列出所有添加到程序集并标记为资源（未嵌入）的文件。

我试过**GetManifestResourceNames**方法。它仅适用于嵌入式资源。但我需要将该文件标记为资源，以便使用 uri 访问该文件，例如*pack://application:,,,/ApplicationName;component/Resources/logo.png*

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T12:06:06.703

您可以像这样访问它：

```
var image = new BitmapImage(new Uri("pack://application:,,,/ApplicationName;component/Resources/logo.png", UriKind.Absolute)) 
```

**[编辑]**

您可以通过调用此方法列出所有这些：

```
public static string[] GetResourceNames()
{
    var asm = Assembly.GetEntryAssembly();
    string resName = asm.GetName().Name + ".g.resources";
    using (var stream = asm.GetManifestResourceStream(resName))
    using (var reader = new System.Resources.ResourceReader(stream))
    {
        return reader.Cast<DictionaryEntry>().Select(entry => (string)entry.Key).ToArray();
    }
} 
```

# php - php函数将url中的阿拉伯文本解码为百分比编码，如firefox

> ID：13913409
> 
> 赞同：1
> 
> 时间：2012-12-17T11:37:05.557
> 
> 标签：php

我有这个网址

```
http://al-mashhad.com/News/النيابة-تستمع-لأقوال-خالد-يوسف-في-بلاغه-ضد-أبو-إسم/141274.aspx 
```

火狐改成

```
http://al-mashhad.com/News/%D8%A7%D9%84%D9%86%D9%8A%D8%A7%D8%A8%D8%A9-%D8%AA%D8%B3%D8%AA%D9%85%D8%B9-%D9%84%D8%A3%D9%82%D9%88%D8%A7%D9%84-%D8%AE%D8%A7%D9%84%D8%AF-%D9%8A%D9%88%D8%B3%D9%81-%D9%81%D9%8A-%D8%A8%D9%84%D8%A7%D8%BA%D9%87-%D8%B6%D8%AF-%D8%A3%D8%A8%D9%88-%D8%A5%D8%B3%D9%85/141274.aspx 
```

我想要 php 函数来完成这项任务

我尝试了[urencode()](http://php.net/manual/en/function.urlencode.php)，但它做到了

```
http%3A%2F%2Fal-mashhad.com%2FNews%2F%D8%A7%D9%84%D9%86%D9%8A%D8%A7%D8%A8%D8%A9-%D8%AA%D8%B3%D8%AA%D9%85%D8%B9-%D9%84%D8%A3%D9%82%D9%88%D8%A7%D9%84-%D8%AE%D8%A7%D9%84%D8%AF-%D9%8A%D9%88%D8%B3%D9%81-%D9%81%D9%8A-%D8%A8%D9%84%D8%A7%D8%BA%D9%87-%D8%B6%D8%AF-%D8%A3%D8%A8%D9%88-%D8%A5%D8%B3%D9%85%2F141274.aspxstring(296) "http://al-mashhad.com%2FNews%2F%D8%A7%D9%84%D9%86%D9%8A%D8%A7%D8%A8%D8%A9-%D8%AA%D8%B3%D8%AA%D9%85%D8%B9-%D9%84%D8%A3%D9%82%D9%88%D8%A7%D9%84-%D8%AE%D8%A7%D9%84%D8%AF-%D9%8A%D9%88%D8%B3%D9_-%D9_%D9%8A-%D8%A8%D9%84%D8%A7%D8%BA%D9%87-%D8%B6%D8%AF-%D8%A3%D8%A8%D9%88-%D8%A5%D8%B3%D9%85%2F141274.aspx" 
```

我希望它只更改阿拉伯语文本，就像 Mozilla Firefox

因为它损坏了 http:// 和 /

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:43:10.600

您可以仅考虑斜杠字符 (/) 来拆分完整的 URI，并仅对最终片段进行编码。

您还可以访问服务器信息。在 PHP 中，您可以访问变量 $_SERVER['SCRIPT_NAME'] 来恢复要编码的 URI 部分。我不知道这是如何在 ASP 中制作的。

# php - mb_strpos vs strpos，有什么区别？

> ID：13913411
> 
> 赞同：11
> 
> 时间：2012-12-17T11:37:12.097
> 
> 标签：php, utf-8, strpos

是的，我知道。当我们使用多字节字符时，我们应该使用 mb_* 函数。但是当我们使用 strpos 时呢？我们来看看这段代码（以utf-8保存）

```
var_dump(strpos("My symbol utf-8 is the €.", "\xE2\x82\xAC")); // int(23) 
```

使用mb_strpos有区别吗？不会使这项工作成为相同的工作吗？毕竟，*strpos*不是在寻找**一个字符串**（多字节）吗？有理由使用 strpos 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T12:04:31.040

对于 UTF-8，匹配字节序列与匹配字符序列完全相同。

所以他们都将在完全相同的点找到针，但在针**之前**`mb_strpos`计算完整的 UTF-8 字节序列，其中 as计算任何字节。因此，如果您的字符串有另一个多字节 UTF-8 序列，结果会有所不同：**`strpos`**

 **```
strpos("My symbolö utf-8 is the €.", "€") !== mb_strpos("My symbolö utf-8 is the €.", "€", 0, "UTF-8") 
```

但：

```
strpos("My symbol utf-8 is the €.", "€") === mb_strpos("My symbol utf-8 is the €.", "€", 0, "UTF-8") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T11:40:05.147

根据使用的字符集和正在搜索的字符串，这可能会或可能不会有所不同。

`strpos()`查找作为指针传递的字节序列。

`mb_strpos()`做同样的事情*，但*它也尊重字符边界。

`strpos()`如果字节序列出现在字符串中的任何位置，那么将匹配。`mb_strpos()`仅当字节序列也表示一组有效的完整字符时才会匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-25T22:17:24.267

我发现上面的例子不是完全透明的，一些用户可能会感到困惑。

`mb_string()`应该用于多字节编码，什么是您在其他问题中解释的多字节编码，例如[这里](https://stackoverflow.com/questions/748965/what-is-a-multibyte-character-set)。

最近我们在这个例子中主要使用 UTF 编码`UTF-8`（也是`UTF-16`），它是多字节字符集，但是通常我们只使用 ASCII 字符集（例如英语），并且它们的结果`strpos`和`mb_strpos`是相同的。

当我们使用多字节字符，即汉字时，差异是显而易见的。

```
echo mb_internal_encoding(); //UTF-8

echo strpos('我在买绿茶', '在'); //3

echo mb_strpos('我在买绿茶', '在'); //1 
```

所以显然它适用于汉字，也适用于一些人不知道的**表情符号。**

为了更广泛地了解它是如何工作的，我用`strlen()`和`mb_strlen()`函数显示了以下字符串的长度。

```
echo strlen('我在买绿茶'); //15

echo mb_strlen('我在买绿茶'); //5 
```**

# android - 循环重复一次，而不是重复Android中的项目数

> ID：13913414
> 
> 赞同：1
> 
> 时间：2012-12-17T11:37:16.043
> 
> 标签：android, json, sqlite

我在 json webservice 中有 11 个项目。我将详细信息存储在 sqlite 中并从 sqlite 中显示它们。因此，我必须检查 sqlite 的 id 和 web 服务的 TAG_ID。如果 id 不相等，那么我必须在 sqlite 中更新他们的详细信息并为我正在使用的内容显示它们

```
 if(data_exist!=bookProduct.length()){
               Log.i("in update","m here");
               Cursor cursors = getRawEvents("select id from bcuk_book");
               try{
                     for (int i = 0; i < bookProduct.length(); i++) {
                     JSONObject c = bookProduct.getJSONObject(i);
                     String Bid = c.getString(TAG_ID);
                     ArrayList<String> mapId = new ArrayList<String>();
                        while(cursors.moveToNext())
                        {
                                Log.e("cursors",cursors.getString(0));
                                Log.i(Bid,Bid);
                                String csv = cursors.getString(0);
                                if(!cursors.getString(cursors.getColumnIndex(TAG_ID)).equalsIgnoreCase(c.getString(TAG_ID)))
                                        {
                                            Log.e("fas",Bid);
                                        }

                                        else
                                        {
                                            Log.e("enter","if case");
                                            cursors.moveToPosition(i);
                                        }
                                    }
                                    mapId.add(TAG_ID);
                                    Log.e(Bid,Bid);            
                             }

                     } 
```

这里的问题是我只能在 for 循环中获取 TAG_ID 一次，但 while 获取所有项目。所以比较只进行一次，而不是比较所有项目。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:47:35.997

通过调用 cursors.moveToFirst(); 解决了它 在while循环之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:44:02.303

```
if (cursor.moveToFirst()){
    do {
       Log.v("mylog", cursor.getString(0) + "," + cursor.getString(1) + "," + cursor.getString(2));
    }
    while(cursor.moveToNext());
} 
```

像这样使用

# php - 如何从按钮更改为 href 格式？

> ID：13913419
> 
> 赞同：0
> 
> 时间：2012-12-17T11:37:30.223
> 
> 标签：php, html, hyperlink

我可以以 href 格式 ( `ahref ='...'`) 制作此链接吗？

```
<form action='add_to_card.php' method="POST">
<input type='hidden' name='id' value='<?php echo $id?>' />
<input type='submit' value='Add' />
</form> 
```

我试过了

```
echo "<a href='add_to_card.php?id=$id'>Add</a>"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:38:43.623

```
<a href="add_to_cart.php?id=<?php echo $id ?>" > Add </a> 
```

并确保您的表单使用 GET 来解析变量。

作为邮政...

```
<form name="form1" action='add_to_card.php' method="POST">
<input type='hidden' name='id' value='<?php echo $id?>' />
<a href="##" onClick="fn_submit();" >Submit</a>
</form>

<script>
function fn_submit()
{
document.form1.submit();
}
</script> 
```

这样您就可以将锚点放在任何地方并提交表单1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:43:21.997

像蛋糕一样容易：

```
<input type="button" id="<?php echo $id; ?>" class='add2cart' value='Add to Cart' />
<script>
$('.add2cart').click(function(e) {
    $.ajax({type: "POST", url: "/add_to_cart.php?id=" + e.currentTarget.id}).done(function( html ) {
   $("body").html(html);
});     
});
</script>

This is through jQuery though. The advantage is that not the whole page gets reloaded. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:46:34.313

您可以通过单击链接使用 javascript 提交表单：

```
<form name="myform" action='add_to_card.php' method="POST">
<input type='hidden' name='id' value='<?php echo $id?>' />
<a href="#" onclick="submitform()">Add</a>
</form>

<script type="text/javascript">
function submitform()
{
  document.myform.submit();
}
</script> 
```

# android - 如何在android中实现更高和更低的兼容性

> ID：13913423
> 
> 赞同：0
> 
> 时间：2012-12-17T11:37:50.707
> 
> 标签：android, cordova, android-2.2-froyo

目前我正在使用较低版本的 sdk-platform:2.3.3 Revision :2 开发应用程序。并且应用程序运行完美，没有任何问题..现在我想让这个应用程序向前兼容，以便我可以在更高版本上运行这个应用程序请建议我如何升级我的代码，以便我的应用程序可以在所有设备上运行......

告诉我我必须在下面的清单文件中进行哪些更改。我正在使用 Phonegap 和 cordova 使平台兼容...

Cordova：1.6.1 -- 假设如果我升级我的cordova，它应该可以正常工作......

我刚刚在更高版本的android上运行我的应用程序我的应用程序正在关闭请告诉我如何解决这个问题

这是 Logcat 文件，我收到网络连接错误。如果我的应用程序版本为 4.0.3 API:15 ...请检查问题所在并建议我最好的解决方案，以便我的应用程序与更高版本具有可比性。

我一运行应用程序它就会崩溃。它显示我提示发生网络错误

我的 manifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.lbs"
        android:versionCode="1"
        android:versionName="1.0" >

        <supports-screens
            android:largeScreens="true"
            android:normalScreens="true"
            android:smallScreens="true"
            android:resizeable="true"
            android:anyDensity="true"
            />

        <uses-permission android:name="android.permission.CAMERA" />
            <uses-permission android:name="android.permission.VIBRATE" />
            <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
            <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
            <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
            <uses-permission android:name="android.permission.READ_PHONE_STATE" />
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.RECEIVE_SMS" />
            <uses-permission android:name="android.permission.RECORD_AUDIO" />
            <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
            <uses-permission android:name="android.permission.READ_CONTACTS" />
            <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

```
12-17 17:25:17.914: D/DroidGap(534): Origin to allow: http://127.0.0.1*
12-17 17:25:17.954: I/CordovaLog(534): Found log level DEBUG
12-17 17:25:17.954: I/CordovaLog(534): Changing log level to DEBUG(3)
12-17 17:25:17.974: I/CordovaLog(534): Found preference for classicRender
12-17 17:25:17.974: D/DroidGap(534): DroidGap.onCreate()
12-17 17:25:18.174: D/DroidGap(534): DroidGap.loadUrl(file:///android_asset/www/login.html?imeino=000000000000000&status=0)
12-17 17:25:18.244: D/DroidGap(534): DroidGap: url=file:///android_asset/www/login.html?imeino=000000000000000&status=0 baseUrl=file:///android_asset/www/
12-17 17:25:18.304: D/DroidGap(534): DroidGap.init()
12-17 17:25:18.354: I/dalvikvm(534): threadid=3: reacting to signal 3
12-17 17:25:18.444: I/dalvikvm(534): Wrote stack traces to '/data/anr/traces.txt'
12-17 17:25:18.494: D/PluginManager(534): init()
12-17 17:25:18.704: D/chromium(534): Unknown chromium error: -6
12-17 17:25:18.724: D/SoftKeyboardDetect(534): Ignore this event
12-17 17:25:18.864: I/dalvikvm(534): threadid=3: reacting to signal 3
12-17 17:25:19.035: D/Cordova(534): DroidGap: GapViewClient.onReceivedError: Error code=-1 Description=A network error occurred. URL=file:///android_asset/www/login.html?imeino=000000000000000&status=0
12-17 17:25:19.044: I/dalvikvm(534): Wrote stack traces to '/data/anr/traces.txt'
12-17 17:25:19.314: D/SoftKeyboardDetect(534): Ignore this event
12-17 17:25:19.364: I/dalvikvm(534): threadid=3: reacting to signal 3
12-17 17:25:19.534: I/dalvikvm(534): Wrote stack traces to '/data/anr/traces.txt'
12-17 17:25:19.644: D/dalvikvm(534): GC_CONCURRENT freed 87K, 2% free 13129K/13383K, paused 10ms+9ms
12-17 17:25:19.864: I/dalvikvm(534): threadid=3: reacting to signal 3
12-17 17:25:19.984: I/dalvikvm(534): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:42:22.157

也许不是一个明显的问题，而只是一个代码问题（例如：在较新版本的 Android 中，如果您**在 UI 线程中**执行网络操作，您的应用程序将**崩溃**）。您能否添加您遇到的错误的**堆栈跟踪**？

# java - 不懂线程o/p

> ID：13913424
> 
> 赞同：1
> 
> 时间：2012-12-17T11:37:59.067
> 
> 标签：java, multithreading

我正在研究scjp，我的问题如下：

```
public class Bunnies extends Thread{

    public static void main(String[] args) {
        Thread t = new Thread(new Bunnies());
        Thread t1 = new Thread(new Bunnies());
        t.start();
        t1.start();

    }
    public  void run()
    {
        for(int i=0; i<3; i++)
        {
            System.out.println(Thread.currentThread().getName()+"  ");
        }
    }

} 
```

当我运行上面的程序时，我得到如下的 o/p：

```
Thread-1  
Thread-1  
Thread-1  
Thread-3  
Thread-3  
Thread-3 
```

这里我不明白为什么 Thread-2 没有显示在这里，只有 Thread 1&3。

请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:44:10.810

每次您创建一个`Bunnies`扩展的`Thread`时，您也会创建一个`Thread`因此数字中的空白。

你的第一次运行：`Thread t = new Thread(new Bunnies());`。`new Bunnies()`是`Thread-0`和`t`是`Thread-1`。
然后你跑`Thread t1 = new Thread(new Bunnies());`。 `new Bunnies()`是`Thread-2`和`t1`是`Thread-3`。

但是请注意，您不应依赖线程编号，因为[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread%28%29)不保证编号是连续的。

您可以使用以下代码进行验证：

```
public static void main(String[] args) {
    Bunnies b = new Bunnies();
    Thread t = new Thread(b);
    Bunnies b1 = new Bunnies();
    Thread t1 = new Thread(b1);
    System.out.println(b.getName()); //Thread-0
    System.out.println(t.getName()); //Thread-1
    System.out.println(b1.getName()); //Thread-2
    System.out.println(t1.getName()); //Thread-3
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:42:21.990

> 在这里我不明白为什么这里没有显示 Thread-2；只有线程 1&3。

在抽象视图上至少有 5 个线程`main`：`t`和`t1`。（和两个匿名线程）

```
class Bunnies extends Thread 
```

因此，当您创建 class 的对象时，会创建`Bunnies`一个线程，并且 JVM 会为其分配一个名称。

由于`main`不执行`run`方法和匿名线程不启动，即`start()`不调用。只有`t`and`t1`将执行`run`方法，因此您只会得到两个线程名称。

命名顺序如下：

![在此处输入图像描述](../Images/84c4416e3eb892a6a84a677501ca24dc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:45:45.677

在您的代码中，Bunnies 是一个线程（和一个 Runnable），但您使用它是因为它只是一个 Runnable，实际上您应该这样做：

```
public class Bunnies extends Thread {

    public static void main(String[] args) {
        Thread t = new Bunnies();
        Thread t1 = new Bunnies();
        t.start();
        t1.start();

    }

    public void run() {
        for (int i = 0; i < 3; i++) {
            System.out.println(Thread.currentThread().getName() + "  ");
        }
    }
} 
```

或像这样：

```
public class Bunnies implements Runnable{

    public static void main(String[] args) {
        Thread t = new Thread(new Bunnies());
        Thread t1 = new Thread(new Bunnies());
        t.start();
        t1.start();

    }

    public void run() {
        for (int i = 0; i < 3; i++) {
            System.out.println(Thread.currentThread().getName() + "  ");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:44:27.263

如果您没有明确指定线程名称，则由运行时环境生成。

由运行时生成这些线程名称。可能名称“Thread-2”已经在使用，例如，对于某些后台线程，下一个可用的名称应该是“Thread-3”。

正如@assylias 正确认识到的那样，`Thread-2`已经在使用的原因是它`Bunnies`本身就是一个线程，因此在创建线程时`t`，不仅已经创建了一个，而且已经创建了两个线程，运行时为其创建了唯一的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T11:43:14.877

好吧，你有两个`Bunnies`线程。如何命名它们取决于运行时。在您的情况下，它选择调用它们`Thread-1`并且`Thread-3`. 据推测，发生这种情况是因为您子类化`Thread`而不是`Runnable`. 结果，您最终得到了四个线程对象，其中只有两个作为单独的线程运行。

如果您希望它们被称为其他名称，则可以使用该[`Thread.setName()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setName%28java.lang.String%29)方法。

# html - php。内联（单行）html代码渲染速度更快吗？

> ID：13913428
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:38:05.870
> 
> 标签：html, css

我的前端 PHP 同事一次又一次地想知道我。我很快就会向他开枪）））

页面的html代码是单行的

```
<html><title></title><div></div></html> 
```

一直认为一定是：

```
 <html>
    <title></title>
     <body>
    <div> 
    </div>
    </body>
</html> 
```

包含 100 个产品的页面是单行。很难理解的东西。

浏览器渲染内联 html 代码是否更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T11:53:19.450

这显然是错误的优化。永远不会注意到性能差异。这将是毫秒或更短的数量级。

但是，您使代码更难维护。从长远来看，这可能会花费您的钱，因为了解正在发生的事情需要更长的时间。

简而言之，**潜在**的性能提升永远不会超过维护该代码的额外成本。

# c# - 在 linq 搜索中使用 int.parse(string) 不起作用

> ID：13913429
> 
> 赞同：0
> 
> 时间：2012-12-17T11:38:06.323
> 
> 标签：c#, visual-studio-2010, linq, sdf

我在 C# 中使用 LINQ 搜索。我的一项搜索需要将 a 转换`string`为`int`. 当我尝试使用`int.parse()`or`convert.toInt32()`时，它显示错误（在 LINQ 中无法识别）

例如：

```
var google = from p in ctx.dates
       where int.Parse(p.effDate) < 20101212 && int.Parse(p.effDate) > 20121212
           select p; 
```

如您所见，我有一个字符串，其中包含我的日期`yyyymmdd`格式，我想将其转换为整数，以便在这些日期之间进行搜索。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:39:52.113

该`yyyyMMdd`格式有一个很好的属性，即字典顺序与时间顺序相同，因此您可以使用字符串比较：

```
var google = from p in ctx.dates
             where p.effDate.CompareTo("20121212") < 0
             && p.effDate.CompareTo("20101212") > 0
             select p; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:41:39.230

首先，您不能仅通过将日期转换为 int 来比较日期，因为在大多数情况下它会失败。`DateTime` `Parse`使用or解析你的字符串`ParseExact`并比较它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:42:44.040

那是因为`int.Parse`是客户端调用，Linq 提供者不知道如何将其映射到数据库函数。

由于字符串是一种易于排序的格式，因此您可以使用`where p.effDate < "20101212" && p.effDate > "20121212"`.

更好的方法是更改​​数据库以将日期存储在`date`非列`char`或`varchar`列中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:53:52.060

**最后我找到了一个不错的答案：**

```
 google = from p in ctx.dates
 where p.effDate.CompareTo(picker1) > 0 && p.effDate.CompareTo(picker2) <0 
select p; 
```

picker1 和 picker2 都是 "yyyymmdd" 中的字符串 谢谢大家帮助我

# visual-studio-2012 - 我可以在 VS 2012 Professional 中使用 stubs/shims 命令执行我的单元测试方法吗？虽然是在 VS 2012 Ultimate 中创建的

> ID：13913431
> 
> 赞同：0
> 
> 时间：2012-12-17T11:38:18.133
> 
> 标签：visual-studio-2012, stub, shim, microsoft-fakes

我在 VS 2012 终极版中使用存根/垫片创建了我的单元测试方法。

我可以在 VS 2012 Professional 中使用 stubs/shims 命令执行我的测试方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:33:33.180

是的。创建 Fakes 参考结构需要 Ultimate 许可证。一旦到位，任何人都可以运行单元测试。

**编辑**：根据 MSDN 评论中提供的链接，我完全错了......似乎除非您拥有 Ultimate 许可证，否则无法运行带有 shims/stubs 的单元测试。奇怪。

**编辑 2.0**：与我团队的成员交谈后，似乎有一个解决方法。如果您的团队中的任何成员拥有 Ultimate 许可证，您可以在构建服务器上安装 Ultimate 并使用它来运行您的 shims/stubs 单元测试。

# winforms - 如何将 Visual Studios 2010 与 Python 连接

> ID：13913443
> 
> 赞同：0
> 
> 时间：2012-12-17T11:38:49.907
> 
> 标签：winforms, visual-studio-2010, user-interface, python-2.7, ironpython

我想用一些简单的按钮和文本字段制作一个界面。我的问题是我不知道如何使用 Python 制作接口。我希望像 Visual Studios 2010 那样易于拖放。我知道有一个扩展可以让我使用 Python。我必须使用另一种语言来创建表单吗？如果我这样做，我该怎么做？如果没有，那么扩展如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:56:25.250

如果您需要 Ironpython 中的表格，那么您可能想在这里查看一下sharpdevelop studio：

[http://www.icsharpcode.net/opensource/sd/download/](http://www.icsharpcode.net/opensource/sd/download/)

# c# - 绑定不随视图的 TextBox 更新

> ID：13913446
> 
> 赞同：0
> 
> 时间：2012-12-17T11:38:59.927
> 
> 标签：c#, wpf, mvvm, textbox, dependency-properties

我有这个`TextBox`：

```
<TextBox DockPanel.Dock="Left" Width="32" Text="{Binding DMinRange, Mode=OneWay}"/> 
```

它连接到 ViewModel 的`DMinRange`依赖项：

```
 public string DMinRange
        {
            get { return (string)GetValue(DMinRangeProperty); }
            set { SetValue(DMinRangeProperty, value); }
        }

        public static readonly DependencyProperty DMinRangeProperty =
            DependencyProperty.Register("DMinRange", typeof(string), typeof(Spectrum), new UIPropertyMetadata("0")); 
```

并且正在正确更新（我打印了一个`MessageBox`不显示零但`TextBox`仍显示*零*的内容）

使用此方法更新依赖项：

```
public void UpdateRange()
{
    // need to provide some validation
    DMinRange = MinRange.ToString();
    DMaxRange = MaxRange.ToString();
} 
```

我在这里做错了什么，我`TextBox`没有得到更新？

# php - PHP - 截止日期查询

> ID：13913456
> 
> 赞同：0
> 
> 时间：2012-12-17T11:39:33.713
> 
> 标签：php, date, deadlines

我已经编写了一个 php 代码来由管理员设置截止日期，因此管理员通过表单输入 daedline 日期并将其存储在数据库中，现在我想使用此截止日期来检查用户何时想要访问页面，如果截止日期到期，用户无法访问此页面，它会自动将他移动到名为“closed.html”的页面，如果不是，用户可以访问它..我已经尝试过这段代码，但它一直让我关闭。 html 页面即使日期还没有过期！请问有什么想法吗？

```
<?php
session_start();
$Load=$_SESSION['login_user'];
$sql= "Select deadline from schedule_deliverables";
$deadline = mysql_query($sql);
$todays_date = date("Y-m-d");

$today = strtotime($todays_date);
$expiration_date = strtotime($deadline);

if ($expiration_date > $today) {
     echo "<meta http-equiv='refresh' content='1;URL=Check_file.php'>"; //user can access the page 
} else {
     echo "<meta http-equiv='refresh' content='1;URL=closed.html'>"; //deadline is past user can't access 

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:42:50.847

你需要 fetch_Array

```
$query = "Select deadline from schedule_deliverables"; 

$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result) or die(mysql_error());
$deadline = $row['deadline']; // and then you rest code with that if 
```

# php - 如何使用 TCPDF 消除此错误：“TCPPDF 错误：某些数据已输出到浏览器，无法发送 PDF 文件”

> ID：13913457
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:39:35.793
> 
> 标签：php, tcpdf

我想打印输出（即变量 $matter 的值），但我收到了上面提到的错误消息。我为它做了很多谷歌，并检查了 php 标签前后的空格。但无法得到解决方案。请帮我。这是我使用 tcpdf 打印输出的代码：

```
<?php
    ob_start();
  require_once("../../includes/application-header.php");

  // Include tcpdf liabrary
  require_once OCN_ROOT."/core/extention/tcpdf/config/lang/eng.php";
  require_once OCN_ROOT."/core/extention/tcpdf/tcpdf.php";

    define ('PDF_MARGIN_TOP', 22); 
    define ('PDF_HEADER_TITLE', 'This is Heading');
    define ('PDF_HEADER_STRING', $head_string);
    define ('PDF_CREATOR', PAGE_TITLE); 

    // create new PDF document
    $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

    // set document information
    $pdf->SetCreator(PDF_CREATOR);
    $pdf->SetAuthor(PDF_CREATOR);
    $pdf->SetTitle('TCPDF Example');

    // set default header data
    $pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE, PDF_HEADER_STRING);

    // set header and footer fonts
    $pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
    $pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

    // set default monospaced font
    $pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

    //set margins
    $pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
    $pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
    $pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

    //set auto page breaks
    $pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

    //set image scale factor
    $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

    //set some language-dependent strings
    $pdf->setLanguageArray($l);

    // ---------------------------------------------------------

    // set font
    $pdf->SetFont('helvetica', '', 10);

    // add a page
    $pdf->AddPage();

    $matter = <<<EOD
         <h1>HTML Example</h1> 
EOD;

    $pdf->writeHTML($matter, true, false, true, false, '');

    // reset pointer to the last page
    $pdf->lastPage();

    // ---------------------------------------------------------
    ob_flush();
    //Close and output PDF document
    $pdf->Output('example_061.pdf', 'I');

    //============================================================+
    // END OF FILE                                                
    //============================================================+
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T12:04:40.157

尝试而不是`ob_flush();`与`ob_end_clean();`

# matlab - 如何摆脱matlab中过多的系统if语句

> ID：13913459
> 
> 赞同：0
> 
> 时间：2012-12-17T11:39:48.300
> 
> 标签：matlab, if-statement

我有 2 个单元矩阵（来自某个代码）：

```
 m1 = GO:0008150'    'GO:0016740'
      'GO:0016740'    'GO:0016787'
      'GO:0016787'    'GO:0006810'
      'GO:0008150'    'GO:0006412'
      'GO:0016740'    'GO:0004672'
      'GO:0016740'    'GO:0016779'
      'GO:0016787'    'GO:0004386'
      'GO:0016787'    'GO:0003774'
      'GO:0016787'    'GO:0016298'
      'GO:0006810'    'GO:0016192'

  m2 ='GO:0008150'    'GO:0016787'
      'GO:0008150'    'GO:0006810'
      'GO:0006810'    'GO:0006412'
      'GO:0016192'    'GO:0003774'
      'GO:0006810'    'GO:0005215'
      'GO:0005215'    'GO:0030533' 
```

在每个矩阵中，第一列是第二列的父...我需要从代码中找到可以确定这些单元格之间所有关系的图形部分...我必须从第 1 列中找到出现在第 2 列，然后从第 1 列但从第 2 列的同一行中取出单元格，并找到它与第 2 列中的另一个单元格之间的相似性 .. 等等.. 这类似于图论中的深度优先搜索

一般来说，我如何制作可以替换以下 if 语句的大小灵活的代码（递归）：

```
for k=1:length(m1)
for ii=1:length(m1)         
for j=1:length(m1)
for i=1:length(m2)
 for e=1:length(m1)
   if isequal(m2{i,1},m1{j,2})
      x1=[m1(j,1) m2(i,2)];
      x11=[x1;x11];
       if isequal(m1{j,1},m1{k,2})
          x2=[m1(k,1),m2(i,2)];
          x22=[x2;x22];
             if isequal(m1{k,1},m1{ii,2})
              x3=[m1(ii,1),m2(i,2)];
              x33=[x3;x33];
                 if isequal(m1{ii,1},m1{e,2})
                 x4=[m1(e,1),m2(i,2)];
                 x44=[x4;x44];
                      .
                      .
            and so..x_total=[x11;x22;x33;x44...]
end
end
end
end
end
end
end 
```

请注意，if statemtnes 的数量不确定（它取决于 m1 和 m2，它们也不总是常量）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:05:43.327

一个通用的编程技巧是将循环中不变的语句移出循环。例如，您的“for e=1:length(m1)”循环可以移动到仅覆盖“if isequal(m1{ii,1},m1{e,2})”语句。希望在重新排列 if 语句和循环之后，如何递归地实现某些东西会变得更加清晰。

```
for i=1:length(m2)
for j=1:length(m1)
   if isequal(m2{i,1},m1{j,2})
      x1=[m1(j,1) m2(i,2)];
      x11=[x1;x11];
      for k=1:length(m1)
       if isequal(m1{j,1},m1{k,2})
          x2=[m1(k,1),m2(i,2)];
          x22=[x2;x22];
          for ii=1:length(m1)         
             if isequal(m1{k,1},m1{ii,2})
              x3=[m1(ii,1),m2(i,2)];
              x33=[x3;x33];
              for e=1:length(m1)
                 if isequal(m1{ii,1},m1{e,2})
                 x4=[m1(e,1),m2(i,2)];
                 x44=[x4;x44];
                      .
                      .
                 and so..x_total=[x11;x22;x33;x44...]
              end
          end
      end
end
end
end
end 
```

现在你可以看到递归函数看起来像

```
function x_total=recursive(m1,m2,j,i)
for k=1:length(m1)
   if isequal(m2{j,1},m1{k,2})
      x=[m1(k,1) m2(i,2)];
      xx=[x;xx];
      x_total=[xx;recursive(m1,m2,k,i)];
   end
end 
```

这可能会运行缓慢，您可能希望查看持久变量，但希望这足以让您入门。（并且不要忘记添加一个条件来结束递归）

# java - 在 Java 中处理覆盖方法层次结构中的异常

> ID：13913463
> 
> 赞同：1
> 
> 时间：2012-12-17T11:39:55.443
> 
> 标签：java, exception

考虑一个 Java 类层次结构，例如：

```
abstract class Exp { public void generate(); }
class EffExp extends Exp {...}
clas PureExp extends Exp {...}
class NewExp extends EffExp {...}
etc, etc. 
```

`generate`inside的实现`NewExp`被更改为抛出一个`IOException`.

```
public void generate() throws IOException {...} 
```

其他实现`generate`不做任何 IO 因此不需要抛出它。编译器抱怨并强迫我声明类层次结构中的所有方法以引发异常。这真的是唯一的出路吗？这似乎相当侵入。

我当然可以捕捉到它发生的异常， inside `NewExp`，但这并没有什么意义。异常应该传播到顶部并停止程序执行。

这里更一般的问题是：如果您有一个相互覆盖的方法层次结构，是否都必须声明它们以抛出相同的异常集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:43:44.797

只要记住*一条规则*：-

*   您无法对您覆盖的方法添加更多限制。限制可以是例如： - 添加一个新的`Checked Exception`，降低方法的可见性。

所以，如果你必须（别无选择），让你的覆盖方法抛出一个`Checked Exception`（注意，你可以添加一个未经检查的异常，但它没有任何意义），只需在 throws 子句中添加异常您正在覆盖的方法。

因此，简单来说，您的`overridden`方法的签名应该与覆盖它的签名完全匹配。

* * *

现在这背后的简单推理是 - `Polymorphism`。

如您所知，在多态中，您可以拥有`super type`指向子类对象的引用点。所以，你可以有： -

```
SupClass ref = new SubClass();
ref.method1(); 
```

现在，在检查 是否存在时`method1`，编译器只关心引用类型。因此，它签入`SupClass`，并相应地允许访问。

现在，想象一下会发生什么，在运行时，当`ref`实际指向`SubClass`对象时，JVM 发现`method1`抛出了一个新的异常，而`compiler`. 它会崩溃。这就是为什么它是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:53:47.937

假设场景是这样的：

```
abstract class Exp { public void generate(); }
class EffExp extends Exp { public void generate throw IOException(....)....}
clas PureExp extends Exp {public void generate(....)....} 
```

我们使用抽象类表示法，以便我们可以实现我们的其他类而不用担心实际的实现。如果我们做实际；实现范围缩小了，即在某些情况下抛出异常，在其他情况下不抛出异常，那么它显然违反了 Java 的健壮性。所以你需要清楚地同步。对于所有方法。

尽管您可以通过抛出父级“异常”来增加可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:56:40.187

在抽象类中，您可以定义抛出 java.lang.Exception

```
abstract class Exp { public abstract void generate() throws Exception; } 
```

在派生类中更具体地说明您抛出的异常类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:46:32.580

只需考虑这个简单的假设代码，让我们假设......符合您的描述：

```
Exp ex = new NewExp(); 
try {
ex.generate(); //It should throw an exception, but has no such method signature. 
} catch(AnException e) { //Nope, not allowed.
 ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T11:49:50.640

是否需要抛出已检查的异常。你能把它包装在运行时异常中吗？

```
public void generate() {
     try {
     ....
     } catch (IOException e ){
        RuntimeException re = new RuntimeException();
        re.initCause(e);
        throw re;
     }   
} 
```

（没有检查这个进行编译，但它应该给你一个大致的想法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T11:51:59.573

如果您正在重写一个方法，则超类中的重写方法只能声明抛出该异常（已检查）或其超类。否则你会失去多态性，因此在 Java 中是不允许的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-16T18:04:38.167

1.  我们不能在被覆盖的方法中引入新的检查异常，但可以有子检查异常或与父类中处理的相同异常。即使我们这样做了，如果我们使用父引用来引用子对象，那么编译器将强制捕获父类方法中声明的异常，然后看下面的示例：

    ```
    class Parent{
                public void method throws IOException{
                }
        } 

        class Child extends Parent{
               public void method throws SQLException{
               }      
        }

        class Test{
        public static void main(){
              Parent p=new Child();

             try{
              p.method();
             }catch(IOException e){
                e.printStackTrace();
             }
        }
    } 
    ```

    在上面的程序中，子类方法抛出 SQLException 但 Compiler 会强制捕获 IOException。因为在编译时编译器不知道子对象是从父引用中引用的。但是我们可以声明任何未经检查的异常，因为编译器不会强制执行 try/ctach 或为它们抛出异常。

# go - 如何启动一个进程？

> ID：13913468
> 
> 赞同：13
> 
> 时间：2012-12-17T11:40:17.383
> 
> 标签：go

我尝试从如下所示的 Google Go 程序启动 JVM：

```
package main
import "fmt"
import "os"
import "log"
func main() {

var name string
name="\\jrex64\\bin\\java.exe"

var path="-Xbootclasspath:jrex64\\lib\\rt.jar;"+
"jrex64\\lib\\jfxrt.jar;"+
"jrex64\\lib\\resources.jar;"+
"jrex64\\lib\\ext\\sunjce_provider.jar;"+
"jrex64\\lib\\ext\\zipfs.jar;"+
"jrex64\\lib\\ext\\sunmscapi.jar;"+
"jrex64\\lib\\ext\\sunec.jar;"+
"jrex64\\lib\\ext\\dnsns.jar;"+
"jrex64\\lib\\ext\\access-bridge-64.jar;"+
"jrex64\\lib\\security\\local_policy.jar;"+
"jrex64\\lib\\jce.jar;"+
"jrex64\\lib\\jfr.jar;"+
"jrex64\\lib\\jsse.jar;"+
"jrex64\\lib\\charsets.jar;"+
"jrex64\\lib\\";

var args[] string=make([]string,4)
args[0]="-verbose"
args[1]=path;
args[2]="-cp Ganesha_lib\\*"
args[3]="-jar Ganesha.jar"

var attr* os.ProcAttr

proc,err:=os.StartProcess(name,args,attr)
proc.Wait();

if err!=nil {
    fmt.Println("an error occurred.\n")
    log.Fatal(err)
}

} 
```

这是我的第一个围棋程序。而且我完全被以下错误所淹没：

> 恐慌：运行时错误：无效的内存地址或 nil 指针取消引用 [信号 0xc0000005 代码=0x0 地址=0x0 pc=0x4278b5] goroutine 1 [运行]：os.startProcess(0x4aacb4, 0x14, 0xf840001eb0, 0x500000005, 0x0, ...) C :/Users/ADMINI~1/AppData/Local/Temp/2/bindist767862039/go/src/pkg/os/exec_posix.go:28 +0x152 os.StartProcess(0x4aacb4, 0x14, 0xf840001eb0, 0x500000005, 0x0, ... ) C:/Users/ADMINI~1/AppData/Local/Temp/2/bindist767862039/go/src/pkg/os/doc.go:24 +0x5c main.main() D:/MyGoProject/src/main.go :60 +0x23c goroutine 2 [syscall]: 由 runtime.main 创建 C:/Users/ADMINI~1/AppData/Local/Temp/2/bindist767862039/go/src/pkg/runtime/proc.c:221 进程完成退出代码 2

我该如何解释这个错误代码？什么地方出了错？以及如何获得 JVM startet - 它位于 Go 可执行文件的子目录中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T16:42:37.863

通常建议您不要直接使用 os.StartProcess。相反，使用 os/exec 具有更简单的界面。这是我将如何启动一个 java 子进程并等待它完成的方法。

[http://play.golang.org/p/APlp9KK9wx](http://play.golang.org/p/APlp9KK9wx)

```
package main

import (
    "fmt"
    "log"
    "os/exec"
    "strings"
)

func main() {
    var java = "\\jrex64\\bin\\java.exe"

    var path = []string{
        "jrex64\\lib\\rt.jar",
        "jrex64\\lib\\jfxrt.jar",
        "jrex64\\lib\\resources.jar",
        "jrex64\\lib\\ext\\sunjce_provider.jar",
        "jrex64\\lib\\ext\\zipfs.jar",
        "jrex64\\lib\\ext\\sunmscapi.jar",
        "jrex64\\lib\\ext\\sunec.jar",
        "jrex64\\lib\\ext\\dnsns.jar",
        "jrex64\\lib\\ext\\access-bridge-64.jar",
        "jrex64\\lib\\security\\local_policy.jar",
        "jrex64\\lib\\jce.jar",
        "jrex64\\lib\\jfr.jar",
        "jrex64\\lib\\jsse.jar",
        "jrex64\\lib\\charsets.jar",
        "jrex64\\lib\\",
    }

    pathflag := "-Xbootclasspath:" + strings.Join(path, ";")
    cmd := exec.Command(java, "-verbose", pathflag, "-cp Ganesha_lib\\*", "-jar Ganesha.jar")
    err := cmd.Run()

    if err != nil {
        fmt.Println("an error occurred.\n")
        log.Fatal(err)
    }

} 
```

如果你很好奇，你会感到恐慌的原因是 attr 是一个 nil 指针。相反，您本可以完成`attr := new(os.ProcAttr)`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-03T00:34:40.863

前面的答案实际上并没有描述如何使用 os.StartProcess()。这是一个例子：

```
cmdToRun := "/path/to/someCommand"
args := []string{"someCommand", "arg1"}
procAttr := new(os.ProcAttr)
procAttr.Files = []*os.File{os.Stdin, os.Stdout, os.Stderr}
if process, err := os.StartProcess(cmdToRun, args, procAttr); err != nil {
    fmt.Printf("ERROR Unable to run %s: %s\n", cmdToRun, err.Error())
} else {
    fmt.Printf("%s running as pid %d\n", cmdToRun, process.Pid)
} 
```

请注意，有必要初始化 ProcAttr.Files 字段 - 如果不这样做，您可能会在 os 包的深处得到索引越界错误。如果您想在自己的代码中提供来自新进程的输入或进程输出，则可以对文件使用管道。您可能还想指定 Dir（起始目录）和 Env（环境变量）字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T11:53:59.450

这里：

```
var attr* os.ProcAttr

proc, err := os.StartProcess(name, args, attr) 
```

该`attr`变量为 nil，当在其中取消引用时`os.StartProcess`会导致您看到的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-21T15:40:55.817

在 Windows 上，os.ProcAttr 不能留空。At Dir 必须设置为空字符串，Sys 必须设置为 &syscall.SysProcAttr{}。以下应该有效：

```
name := "\\jrex64\\bin\\java.exe"
libs := "-Xbootclasspath:jrex64\\lib\\rt.jar;" +
    // add all libs
    "jrex64\\lib\\";
args := []string{"-verbose", libs, "-cp Ganesha_lib\\*", "-jar Ganesha.jar"}
attr := &os.ProcAttr{
    "",
    nil,
    []*os.File{os.Stdin, os.Stdout, os.Stderr},
    &syscall.SysProcAttr{}} //CreationFlags: syscall.CREATE_NEW_PROCESS_GROUP, } 
}

proc, err := os.StartProcess(name,args,attr);
if err != nil {
    log.Fatalf("start process: %v", err)
}
_, err = proc.Wait();
if err != nil {
    log.Fatalf("wait: %v", err)
} 
```

# java - Drools 规则中的运算符优先级

> ID：13913469
> 
> 赞同：0
> 
> 时间：2012-12-17T11:40:24.123
> 
> 标签：java, drools, jbpm, mvel

嗨，我想知道如何在 Drools 中解释以下规则

```
rule "test"
when
    condiction A
    or
    condiction B
    condiction C
then something
end 
```

是吗

1.  （A 或 B）和 C

2.  A 或（B 和 C）

3.  变成两条规则：a）。A 和 C b)。乙和丙

4.  变成两条规则：a）。乙）。乙和丙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:01:10.487

Drools 中的运算符优先级（很大程度上）遵循 Java 运算符优先级。与(&) 在***ors*** (|) 之前求值，在***逻辑***与 (&&) 之前求值，在***逻辑 ors*** ***(*** ||) 之前求值。

 **```
运算符优先级---->

& | && ||

```

请注意，Drools*确实*支持带括号的显式操作数分组，因此当有疑问时使用它们。照原样，在您的示例中，评估顺序对应于#2：

A 或（B 和 C）

然后根据分组将此排序编译为两条规则：

```
A
B and C 
```

然后可能会激活这些规则中的任何一个，具体取决于您的模型。

所有这些都在***强烈***推荐的[Drools 文档](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html#d0e5351)中进行了解释。**

# php - 是否可以使用 php 从本地存储中检索所有值？

> ID：13913472
> 
> 赞同：1
> 
> 时间：2012-12-17T11:40:23.417
> 
> 标签：php, jquery

是否可以使用 php 从本地存储中检索数据？

实际上，我可以使用 jquery 插件 sysphus 将表单值存储在本地存储中。如果可能的话，您能否建议一段仅使用 php 从本地存储中检索数据的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:43:47.760

如果“本地存储”是指浏览器中的存储：不，PHP 无法进入浏览器以获取数据。PHP 接收来自浏览器的 HTTP 请求，这就是 PHP 从中获取的所有信息。它不能要求或得到更多。浏览器中的本地存储只能通过 Javascript 访问。

有点相关，请参阅[https://stackoverflow.com/a/13840431/476](https://stackoverflow.com/a/13840431/476)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:28:26.017

您需要使用 javascript 将值从本地复制到表单元素中。然后提交一个表单来获取 php.ini 的值。

# java - 我无法使用 JTree 监听器更改 cardLayout 中的卡片

> ID：13913473
> 
> 赞同：0
> 
> 时间：2012-12-17T11:40:26.320
> 
> 标签：java, swing, jtree, cardlayout

我在 CardLayout 中更换卡片时遇到问题。我有一个以 CardLayout 作为布局的 JPanel，以及其他包含 JTree 的 JPanel（在其他类中）的 JPanel。我想添加 TreeSelectionListener。如果我单击节点，卡片应更改为节点标题。

这是一些代码：

我要更改卡片的侦听器位于第 159 行下的第二个代码片段中。

当我从 ThumbPanel（以 JPanel 和 CardLayout 作为布局的类）更改卡片时，它可以工作，但 TreeSelectionListener 在其他类中，当我尝试从那里更改它时，什么也没有发生。

带有卡片布局的JPanel：

```
import com.alee.extended.image.WebImage;
import com.alee.managers.tooltip.TooltipManager;
import com.alee.managers.tooltip.TooltipWay;

    import javax.swing.*;
    import javax.swing.border.Border;
    import java.awt.*;

    public class ThumbPanel extends JPanel{
    public CardLayout cl = new CardLayout();

        public ThumbPanel(){
            super();
            initComponents();

        }

        public void initComponents() {
            final ThumbPopupMenu tpm = new ThumbPopupMenu();
            setMinimumSize(new Dimension(200, 320));
            setPreferredSize(new Dimension(650, 400));
            setVisible(true);
            setLayout(cl);
            Border blackline = BorderFactory.createLineBorder(Color.black);
            setBorder(blackline);
            JPanel p1 = new JPanel();
            p1.add(new JLabel("parent 1"));
            JPanel p2 = new JPanel();
            p2.add(new JLabel("parent 2"));
            add(p1, "Parent 1");
            add(p2, "Parent 2");
            }

        public void showCategoryPanel(String panelName){
            cl.show(this, panelName);
        }
    } 
```

这是 JTreeHelper，其中包含 TreeSelectionListener（在此代码的底部）

```
 import java.awt.CardLayout;
    import java.awt.Component;
    import java.awt.Dimension;
    import java.awt.GridLayout;
    import java.awt.Toolkit;
    import java.util.Enumeration;
    import javax.swing.JPanel;
    import javax.swing.JScrollPane;
    import javax.swing.JTree;
    import javax.swing.tree.DefaultMutableTreeNode;
    import javax.swing.tree.DefaultTreeModel;
    import javax.swing.tree.MutableTreeNode;
    import javax.swing.tree.TreePath;
    import javax.swing.tree.TreeSelectionModel;
    import javax.swing.event.TreeModelEvent;
    import javax.swing.event.TreeModelListener;
    import javax.swing.event.TreeSelectionEvent;
    import javax.swing.event.TreeSelectionListener;
    import net.miginfocom.swing.MigLayout;

    public class JTreeHelper extends JPanel{
    protected DefaultMutableTreeNode rootNode;
    protected DefaultTreeModel treeModel;
    protected JTree tree;
    private Toolkit toolkit = Toolkit.getDefaultToolkit();
    private ThumbPanel tp = new ThumbPanel();
    public JTreeHelper() {
        super();
        ml = new MigLayout("",
                "[]",
                "[]");
        setLayout(ml);
        setMinimumSize(new Dimension(200, 320));
        setPreferredSize(new Dimension(250, 400));
        rootNode = new DefaultMutableTreeNode("Root Node");
        treeModel = new DefaultTreeModel(rootNode);
    treeModel.addTreeModelListener(new MyTreeModelListener());

        tree = new JTree(treeModel);
        tree.setEditable(true);
        tree.getSelectionModel().setSelectionMode
                (TreeSelectionModel.SINGLE_TREE_SELECTION);
        tree.setShowsRootHandles(true);

        //add JTree listeners
        tree.addTreeSelectionListener(createSelectionListener());

        JScrollPane scrollPane = new JScrollPane(tree);
        scrollPane.setMinimumSize(new Dimension(200, 320));
        scrollPane.setPreferredSize(new Dimension(250, 400));
        scrollPane.setBorder(null);
        add(scrollPane);

    }

    /** Remove all nodes except the root node. */
    public void clear() {
        rootNode.removeAllChildren();
        treeModel.reload();
    }

    /** Remove the currently selected node. */
    public void removeCurrentNode() {
        TreePath currentSelection = tree.getSelectionPath();
        if (currentSelection != null) {
            DefaultMutableTreeNode currentNode = (DefaultMutableTreeNode)
                         (currentSelection.getLastPathComponent());
            MutableTreeNode parent = (MutableTreeNode)(currentNode.getParent());
            if (parent != null) {
                treeModel.removeNodeFromParent(currentNode);
                return;
            }
        } 

        // Either there was no selection, or the root was selected.
        toolkit.beep();
    }

    /** Add child to the currently selected node. */
    public DefaultMutableTreeNode addObject(Object child) {
        DefaultMutableTreeNode parentNode = null;
        TreePath parentPath = tree.getSelectionPath();

        if (parentPath == null) {
            parentNode = rootNode;
        } else {
            parentNode = (DefaultMutableTreeNode)
                         (parentPath.getLastPathComponent());
        }

        return addObject(parentNode, child, true);
    }

    public DefaultMutableTreeNode addObject(DefaultMutableTreeNode parent,
                                            Object child) {
        return addObject(parent, child, false);
    }

    public DefaultMutableTreeNode addObject(DefaultMutableTreeNode parent,
                                            Object child, 
                                            boolean shouldBeVisible) {
        DefaultMutableTreeNode childNode = 
                new DefaultMutableTreeNode(child);

        if (parent == null) {
            parent = rootNode;
        }

    //It is key to invoke this on the TreeModel, and NOT DefaultMutableTreeNode
        treeModel.insertNodeInto(childNode, parent, 
                                 parent.getChildCount());

        //Make sure the user can see the new node.
        if (shouldBeVisible) {
            tree.scrollPathToVisible(new TreePath(childNode.getPath()));
        }
        return childNode;
    }

    class MyTreeModelListener implements TreeModelListener {
        public void treeNodesChanged(TreeModelEvent e) {
            DefaultMutableTreeNode node;
            node = (DefaultMutableTreeNode)(e.getTreePath().getLastPathComponent());
            int index = e.getChildIndices()[0];
            node = (DefaultMutableTreeNode)(node.getChildAt(index));

            System.out.println("The user has finished editing the node.");
            System.out.println("New value: " + node.getUserObject());
        }
        public void treeNodesInserted(TreeModelEvent e) {
        }
        public void treeNodesRemoved(TreeModelEvent e) {
        }
        public void treeStructureChanged(TreeModelEvent e) {
        }
    }
        /*tree selection listener
         * 
         * after click on tree node, the category is shown on the right
         * 
         * 
         */

        private TreeSelectionListener createSelectionListener() {
            return new TreeSelectionListener() {
            public void valueChanged(TreeSelectionEvent e) {
                TreePath path = e.getPath();                
                DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) path.getLastPathComponent();
               // HERE SHOULD CHANGE CARD
                tp.cl.show(tp, parentNode.toString());
                System.out.println(parentNode.toString());

            }

        };
    }

    /*
     * 
     * Method which finds JTree node with given name
     * 
     */    
    public TreePath find(DefaultMutableTreeNode root, String s) {
        @SuppressWarnings("unchecked")
        Enumeration<DefaultMutableTreeNode> e = root.depthFirstEnumeration();
        while (e.hasMoreElements()) {
            DefaultMutableTreeNode node = e.nextElement();
            if (node.toString().equalsIgnoreCase(s)) {
                return new TreePath(node.getPath());
            }
        }
        return null;
    }

} 
```

这是第三张卡片，它只是将 JTree 添加到 gui 中。

```
 import java.awt.Color;
    import java.awt.Dimension;
    import javax.swing.BorderFactory;
    import javax.swing.ImageIcon;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.border.Border;
    import javax.swing.event.TreeSelectionEvent;
    import javax.swing.event.TreeSelectionListener;
    import javax.swing.tree.DefaultMutableTreeNode;
    import javax.swing.tree.TreePath;
    import javax.xml.ws.BindingProvider;
    import net.miginfocom.swing.MigLayout;

    public class CategoryTreePanel extends JPanel{

    private JTreeHelper treePanel;

    public CategoryTreePanel(){
        super();
        initComponents();
    }

    public void initComponents() {

        setMinimumSize(new Dimension(200, 320));
        setPreferredSize(new Dimension(250, 400));
        setVisible(true);

        ml = new MigLayout("",
                "[]",
                "[]");
        setLayout(ml);
        Border blackline = BorderFactory.createLineBorder(Color.black);
        setBorder(blackline);
        treePanel = new JTreeHelper();
        populateTree(treePanel, thumbPanel);
        add(treePanel);
    }

    public void populateTree(JTreeHelper treePanel, JPanel mainPanel) {

        String p1Name = new String("Parent 1");
        String p2Name = new String("Parent 2");
        String c1Name = new String("Child 1");
        String c2Name = new String("Child 2");
        String[] categoryArray = {p1Name, p2Name,c1Name,c2Name};
        for (String s : categoryArray){
            if(s.equals(p1Name) == true){
                createNode(s, true, null, mainPanel);
            }
            if(s.equals(p2Name) == true){
                createNode(s, true, null, mainPanel);
            }
            if(s.equals(c1Name) == true){
                createNode(s, false, "Parent 1", mainPanel);
            }
            if(s.equals(c2Name) == true){
                createNode(s, false, "Parent 2", mainPanel);
            }

        }
        /*
         * DefaultMutableTreeNode p1, p2;

        p1 = treePanel.addObject(null, p1Name);
        p2 = treePanel.addObject(null, p2Name);

        treePanel.addObject(p1, c1Name);
        treePanel.addObject(p1, c2Name);

        treePanel.addObject(p2, c1Name);
        treePanel.addObject(p2, c2Name);
        */

    }

    public void createNode(String categoryName, boolean isParent, String parent, 
        JPanel mainPanel){
        DefaultMutableTreeNode categoryNode;
        if(isParent == true){

            categoryNode = treePanel.addObject(null, categoryName);

        }else{

            DefaultMutableTreeNode rootNode = (DefaultMutableTreeNode)               treePanel.tree.getModel().getRoot();
            TreePath path = treePanel.find(rootNode, parent);
            DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) path.getLastPathComponent();
            categoryNode = treePanel.addObject(parentNode, categoryName);

        }
    }

    } 
```

任何想法如何从 JTreeHelper 的侦听器更改 ThumbPanel 中的卡片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:48:31.077

检查返回的内容

```
parentNode.toString() 
```

试试吧

```
tp.cl.show(tp, parentNode.getUserObject().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:15:10.300

问题已解决，我已将所有代码放在一个类中，现在它可以工作了。我不知道为什么当我拥有三个不同类的代码时我不能换卡。

现在它看起来很糟糕，但它正在工作，我可以继续我的项目。

谢谢大家的时间。

最好的问候 MK

# php - 如何使用厨师在 Vagrant 盒子上安装 PECL 包？

> ID：13913480
> 
> 赞同：2
> 
> 时间：2012-12-17T11:40:50.640
> 
> 标签：php, chef-infra, pecl, vagrant

我是 Vagrant 和 Chef 的新手。我有以下使用厨师在 Vagrant 盒子上安装 apache 和 php。Cookbook 包含官方操作码食谱。

```
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = "cookbooks"
  chef.add_recipe "apt"
  chef.add_recipe "apache2"
  chef.add_recipe "apache2::mod_php5"
  chef.add_recipe "apache2::mod_rewrite"
  chef.add_recipe "php"
end 
```

它正确安装了包括 PDO 支持在内的所有内容。PHP 配方[提供对 PEAR/PECL repos](https://github.com/opscode/cookbooks/tree/master/php)的访问。但我找不到安装 PECL 包的方法。

**如何使用这个 PHP 厨师安装 PECL 包？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T08:47:11.697

您必须创建自己的配方（或修改 php）来安装 PECL 包。

我不知道 php 和 pecl 是什么，但如果您需要在食谱中使用梨资源，请这样做：

```
php_pear *package_name* do
  action :install
  version *version*
end 
```

并添加`depends 'php'`到您食谱的 metadata.rb 中。然后，您可以将您的配方添加到您的 vagrant VM 运行列表中。

```
chef.add_recipe "my_recipe" 
```

# mysql - MySQL 不接受这个过程。你能帮忙吗？

> ID：13913482
> 
> 赞同：0
> 
> 时间：2012-12-17T11:41:00.723
> 
> 标签：mysql

```
CREATE PROCEDURE reset_xyz_autoincrement
BEGIN

  SELECT @max := MAX(ID)+ 1 FROM ABC; 

  PREPARE stmt FROM 'ALTER TABLE XYZ AUTO_INCREMENT = ?'
  EXECUTE stmt USING @max 

  DEALLOCATE PREPARE stmt;

END $$ 
```

我从这里获取代码： [如何使用另一个表中的 MAX 值重置 MySQL AutoIncrement？](https://stackoverflow.com/questions/2410689/how-to-reset-an-mysql-autoincrement-using-a-max-value-from-another-table)

这是 MySQL 输出：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BEGIN

  SELECT @max := MAX(ID)+ 1 FROM ABC' at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:27:27.757

你应该遵循：

1.  使用函数大括号
2.  每个语句使用分号。

> 分隔符 $$
> CREATE PROCEDURE reset_xyz_autoincrement() BEGIN
> 
> ```
>  SELECT @max:=MAX(ID)+ 1 FROM Company_Master; 
> 
>       PREPARE stmt FROM 'ALTER TABLE Dept_Master AUTO_INCREMENT = ?';
>       EXECUTE stmt USING @max ;
> 
>       DEALLOCATE PREPARE stmt;
> 
>     END$$ 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:55:06.240

尝试这个

```
 CREATE PROCEDURE reset_xyz_autoincrement
          (username varchar(64),password varchar(64))     // here you use your columns
      BEGIN 
```

编辑：

尝试这个

```
 DROP PROCEDURE IF EXISTS reset_xyz_autoincrement;
     CREATE PROCEDURE reset_xyz_autoincrement (userid INT)
      BEGIN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:46:48.203

尝试在语句`delimiter $$`之前添加。`CREATE PROCEDURE`

编辑：

我在您的程序的当前版本的评论中迷失了方向，但您的`SELECT`陈述中有一个错误：

```
SELECT @yourVar := MAX(ID)+ 1 FROM ABC; 
```

应该成为

```
SELECT MAX(ID) + 1 INTO @yourVar FROM ABC; 
```

另外，我认为你应该`DECLARE myVar INT`（假设它是一个整数）之前，请注意这`max`也是一个 MySQL 关键字，所以我会避免在我的过程中使用该名称。

# ldap - 在 LDAP 中，我们真的需要向 IANA 注册自定义属性来获取 OID

> ID：13913483
> 
> 赞同：0
> 
> 时间：2012-12-17T11:41:09.957
> 
> 标签：ldap, oid, iana

使用自生成的 OID 有什么问题？我相信它只需要在整个系统中是唯一的，对吗？而且我只使用一个 LDAP 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:42:56.537

**将自行生成的 OID 用于您的内部目的**没有“问题” 。现代的、专业质量的 LDAP 目录服务器提供了一种使用文本代替 OID 的机制，或一些其他自动生成 OID 的机制。使用自行生成的 OID 是完全可以接受的，只要创建者不打算在未经注册的情况下发布这些 OID - 这可能会与现有已发布的 OID 产生冲突。

# php - 使用 PHP 写入然后从文件中读取

> ID：13913484
> 
> 赞同：2
> 
> 时间：2012-12-17T11:41:15.997
> 
> 标签：php, file-get-contents, fwrite, fread

我正在尝试获取特定网站的内容，将内容写入 .txt 文件并在我的浏览器中输出未格式化的结果。我实际上可以将网站内容写入我的文本文件，但它不会在我的浏览器中回显。我尝试在原始句柄中使用“w+”和“r+”，但这并没有成功。我在这里做错了什么？

```
$file = file_get_contents('http://www.example.com');
$handle = fopen("text.txt", "w");
fwrite($handle, $file);
fclose($handle);

$myfile = "text.txt";
$handle = fopen($myfile, "r");
$read = htmlentities(fread($handle, filesize($myfile)));
echo $read; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:05:07.077

您的 $file 初始语句包含您刚刚编写的文件中的所有格式化代码，因此您可以使用它。

```
 echo htmlentities($file); 
```

但是，已经有几个人问过这个问题了。也许 OP 想要验证文件是否正确写入？

您的打开代码看起来不错，您是否排除了权限问题？在打开它之前使用 is_readable($myFile) 检查它。您还可以对您写入的文件夹执行 is_writable 操作，以确保您实际写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:15:23.407

您不需要多次打开文件..只需尝试

```
$file = "log.txt";
$url = 'http://www.stackoverflow.com' ;

$handle = fopen("log.txt", "w+");
fwrite($handle, file_get_contents($url));
rewind($handle);

$read = htmlentities(fread($handle, filesize($file)));
echo $read; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:44:56.000

你可以var_dump() $handle 看看它是否可以打开。如果是，var_dump($read)..

要读取文件，您还可以使用 file_get_contents()。

# javascript - 更快的 HTML5 视频替代品

> ID：13913485
> 
> 赞同：1
> 
> 时间：2012-12-17T11:41:18.540
> 
> 标签：javascript, jquery, html, video

我正在尝试播放视频并能够在某些事件中快速查找视频中的不同帧。最后，视频应该根据音乐节拍播放不同的关键帧，因此触发器需要尽可能准确。

我的第一个实验是这样的：http: [//jsfiddle.net/QfvsE/](http://jsfiddle.net/QfvsE/)（在播放时单击任意位置）

它基本上是一个测试，看看`video.currentTime`触发的速度有多快，并且怀疑`<video>`元素和 API 太慢了。视频实际播放大约需要 200 毫秒。当使用更高分辨率的源时，这个数字会迅速增加。

因此，我正在考虑替代方案，例如导出大量 JPEGS，然后将它们导入画布区域并创建一个触发不同帧的微 API。这会更快吗？是否有其他替代方法可以在没有闪光灯的情况下播放短片，并且能够更准确地控制它？

仅供参考：这一切都将在使用最新 chrome 的本地环境中发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:09:27.617

导出大量 JPEG 文件会降低内存和计算机性能，如果您想要更快的连接来流式传输视频，您可以使用`WebSocket API`

WebSocket 可以修复这种情况或使用 Flash

# iphone - 如何以编程方式创建多个 CheckBox

> ID：13913490
> 
> 赞同：1
> 
> 时间：2012-12-17T11:41:52.363
> 
> 标签：iphone, objective-c, ios, checkbox, uitextview

我有一个`UITextView`在`UIViewController`. 在那`UITextView`，需要为注释插入多个复选框。

如何创建多个复选框？

```
I have created Multiple CheckBoxes for `UIButton` Click, But When I Select or DeSelect operation, all ChecKBoxes Value changes. 
```

如何动态创建多个复选框并为这些复选框创建方法？

是否可以？

这是我的代码：

```
-(void)Check
{
    CGPoint origin = note.frame.origin;
    NSString* head = [note.text substringToIndex:note.selectedRange.location];
    CGSize initialSize = [head sizeWithFont:note.font constrainedToSize:note.contentSize];
    NSUInteger startOfLine = [head length];

    NSString* tail = [head substringFromIndex:startOfLine];
    CGSize lineSize = [tail sizeWithFont:note.font forWidth:note.contentSize.width lineBreakMode:UILineBreakModeWordWrap];
    CGPoint cursor = origin;
    cursor.x += lineSize.width+15;
    cursor.y += initialSize.height - lineSize.height-130;

checkbox = [[UIButton alloc] initWithFrame:CGRectMake(cursor.x,cursor.y,15,15)];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"unchk.png"]forState:UIControlStateNormal];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateSelected];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateHighlighted];
    checkbox.adjustsImageWhenHighlighted=YES;
    [checkbox addTarget:self action:@selector(ChkUnChk) forControlEvents:UIControlEventTouchUpInside];
    [note addSubview:checkbox];
}

-(void)ChkUnChk
{
    if(checkUnCheck==NO)
    {
        [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateNormal];
        checkUnCheck=YES;
    }
    else if(checkUnCheck==YES)
    {
        [checkbox setBackgroundImage:[UIImage imageNamed:@"unchk.png"]forState:UIControlStateNormal];
        checkUnCheck=NO;
    }
}

-(void)checkboxSelected:(id)sender
{
    checkBoxSelected = !checkBoxSelected;
    [checkbox setSelected:checkBoxSelected];
} 
```

这里注意 --> `UITextView`,复选框 -->`UIButton`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:02:27.370

拿一个`NSMutableArray`..

**在 .h 文件中**

```
NSMutableArray *selectedBtnarr; 
```

**在 .m 文件中**

```
 - (void)viewDidLoad
   {
         selectedBtnarr=[NSMutableArray alloc]init];
   } 
```

然后，您必须设置 UIButton 的 tag 属性。每个按钮都有不同的标签。

```
-(void)ChkUnChk:(id)sender
{

    UIButton *btn=(UIButton *)sender;
    NSString *Str=[NSString stringWithFormat:@"%d",btn.tag];
    BOOL flag=   [selectedBtnarr containsObject:Str];

    if (flag==YES)
    {
        [btn setBackgroundImage:[UIImage imageNamed:@"unchk.png"]    forState:UIControlStateNormal];
        [selectedBtnarr removeObject:Str];
    }
    else
    {
        [selectedBtnarr addObject:Str];
        [btn setBackgroundImage:[UIImage imageNamed:@"chk.png"] forState:UIControlStateNormal];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:57:55.617

尝试使用任何整数（使用循环）设置要创建的按钮的标签。然后使用 . 调用选择器`-(void)ChkUnChk:(id)sender{}`。因此，该方法将只为标记按钮调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:07:39.650

在这里您可以找到示例源代码

[https://github.com/ardalahmet/SSCheckBoxView](https://github.com/ardalahmet/SSCheckBoxView)

![在此处输入图像描述](../Images/ef69c8316011e2eff914f96532d8acbd.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:03:35.900

写下以下2种方法。由于您已经为不同的状态分配了按钮的不同方法，因此您只需更改这些状态​​并根据按钮的状态执行代码。

```
-(void)Check
{
    CGPoint origin = note.frame.origin;
    NSString* head = [note.text substringToIndex:note.selectedRange.location];
    CGSize initialSize = [head sizeWithFont:note.font constrainedToSize:note.contentSize];
    NSUInteger startOfLine = [head length];

    NSString* tail = [head substringFromIndex:startOfLine];
    CGSize lineSize = [tail sizeWithFont:note.font forWidth:note.contentSize.width lineBreakMode:UILineBreakModeWordWrap];
    CGPoint cursor = origin;
    cursor.x += lineSize.width+15;
    cursor.y += initialSize.height - lineSize.height-130;

    checkbox = [[UIButton alloc] initWithFrame:CGRectMake(cursor.x,cursor.y,15,15)];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"unchk.png"]forState:UIControlStateNormal];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateSelected];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateHighlighted];
    checkbox.adjustsImageWhenHighlighted=YES;
    [checkbox addTarget:self action:@selector(ChkUnChk) forControlEvents:UIControlEventTouchUpInside];
    [note addSubview:checkbox];
}

-(void)ChkUnChk:(id)sender
{
    UIButton *btn = sender;
    if(btn.selected==NO)
    {
        [btn setSelected:YES];
    }
    else if(btn.selected==YES)
    {
        [btn setSelected:NO];
    }
} 
```

如果你卡在某个地方，请告诉我。

谢谢。

# android - 自定义 Webview 错误屏幕

> ID：13913491
> 
> 赞同：1
> 
> 时间：2012-12-17T11:41:54.493
> 
> 标签：android, webview

我想创建一个简单的屏幕，当 webview 无法加载页面时出现。我改变了一些对象的可见性，所以 webview 是不可见的，你可以看到屏幕。

```
webview1.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
                    //visible
                    view.stopLoading();
                    warningText.setText(description);
                    Bar.setVisibility(0);
                    header.setVisibility(0);
                    loadState.setVisibility(0);
                    border.setVisibility(0);
                    aborted.setVisibility(0);
                    warning.setVisibility(0);
                    warningText.setVisibility(0);
                    //invisible
                    Bar.setVisibility(4);
                    webview1.setVisibility(4);

        }
    }); 
```

但现在问题是：我的屏幕闪烁、消失，并且出现了 Webview 的 Errorscreen。为什么？我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:18:49.333

在 onReceivedError 中，您可以完成您的 webview 活动并在其下方显示一些带有背景的对话框。还可以在“pageloadstart”上使用 webview.setVisibility(GONE) 并显示您的进度条。以及“pageloadfinish”上的 webview.setVisibility(VISIBLE) （对不起，我是用手机写的，不记得确切的名字，请查看文档）并隐藏您的进度条。

# java - 为什么当 Tree 的样式设置为 FULL_SELECTION 时，SWT.Tree 中的虚线会消失

> ID：13913493
> 
> 赞同：3
> 
> 时间：2012-12-17T11:41:54.867
> 
> 标签：java, tree, swt

请参阅[java2s 的 Tree 演示代码中的演示代码](http://www.java2s.com/Tutorial/Java/0280__SWT/TreeViewers.htm)。如果我将`Tree`的样式更改为`SWT.FULL_SELECTION`，连接节点的虚线就会消失。我应该怎么做才能使虚线再次可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:15:10.987

我认为这是完全依赖于操作系统的行为。您在 SWT 小部件上设置的许多样式实际上是提示操作系统定义行为。根据确切的操作系统，不同样式的结果渲染可能会有所不同。如果您想在此处了解更多有关原因的信息，如果您阅读有关 Windows（XP 或 7？）控件及其样式参数的信息，也许会很有用。[看看这里，也许这很有用](http://msdn.microsoft.com/en-us/library/bb760013%28VS.85%29.aspx)。

> **TVS_FULLROWSELECT：**版本 4.71。在树视图中启用全行选择。所选项目的整行被突出显示，单击项目行上的任意位置会使其被选中。此样式不能与 TVS_HASLINES 样式结合使用。
> **TVS_HASLINES：**使用线条显示项目的层次结构。

# jquery - 使用 javascript 获取推文列表

> ID：13913495
> 
> 赞同：0
> 
> 时间：2012-12-17T11:42:03.387
> 
> 标签：jquery, twitter

是否可以使用 jQuery AJAX 请求检索用户的推文？我有以下代码，但我得到了相同的来源错误。

```
function GetTweets(handle) {
    $.ajax({
        url: "https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=wesleyskeen"
    }).success(function (tweets) { 
        console.log(tweets) 
    });
} 
```

即使我添加

```
dataType: "jsonp" 
```

我得到一个不同的错误

> 未捕获的 SyntaxError：意外的令牌 <

结果实际上是返回的，但是它们以 XML 形式返回，因为这似乎给脚本带来了问题。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:43:46.823

您正在请求 XML。使用 json url 代替：

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=wesleyskeen](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=wesleyskeen)

（只需将 url**路径中的****xml**更改 为 json）

# ios - [__NSCFDictionary enumerateObjectsUsingBlock:]：无法识别的选择器发送到实例 0x101918a10'

> ID：13913499
> 
> 赞同：1
> 
> 时间：2012-12-17T11:42:14.500
> 
> 标签：ios, xcode, json, core-data

我正在从我的 json 文件中读取 jason 数据，并且我成功打印了 NSarray 类型 arraytsik，现在当我尝试使用 enumerateObjectsUsingBlock 循环遍历 arraytsik 时，它给了我输出或数组错误

> ```
>  2012-12-17 16:59:04.711 tsikzoeMig[6416:303] here i am printing the array {
>     tsik =     (
>                 {
>             author = 2;
>             authorName = fgfg;
>             dateSubmitted = "2012-08-19 00:00:00";
>             dictionaryType = 1;
>             id = 1;
>             word = fgdf;
>             wordDef = fdgdfg;
>         },
>                 {
>             author = 2;
>             authorName = "\U0f51\U0f74\U0f44\U0f0b\U0f51\U0f40\U0f62\U0f0b\U0f5a\U0f72\U0f42\U0f0b\U0f58\U0f5b\U0f7c\U0f51\U0f0d";
>             dateSubmitted = "2012-08-19 00:00:00";
>             dictionaryType = 1;
>             id = 2;
>             word = "\U0f21\U0f20\U0f24\U0f20\U0f56\U0f66\U0f7c\U0f0d";
>             wordDef = "\U0f56\U0f66\U0f7c\U0f0b\U0f56\U0f66\U0f7c\U0f0b\U0f5e\U0f7a\U0f66\U0f0b\U0f54\U0f60\U0f72\U0f0b\U0f66\U0f92\U0fb2\U0f60\U0f72\U0f0b\U0f41\U0fb1\U0f51\U0f0b\U0f54\U0f62\U0f0b\U0f42\U0fb1\U0f72\U0f0b\U0f58\U0f72\U0f44\U0f0c\U0f0d";
>         }
>     );
> }
> 2012-12-17 16:59:04.712 tsikzoeMig[6416:303] -[__NSCFDictionary enumerateObjectsUsingBlock:]: unrecognized selector sent to instance 
> ```
> 
> 0x102114700 2012-12-17 16:59:04.713 tsikzoeMig[6416:303] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary enumerateObjectsUsingBlock:]：无法识别的选择器发送到实例 0x102114700”***第一次抛出调用堆栈: ( 0 CoreFoundation 0x00007fff8a1190a6 **exceptionPreprocess + 198 1 libobjc.A.dylib 0x00007fff8a2963f0 objc_exception_throw + 43 2 CoreFoundation 0x00007fff8a1af6ea -[NSObject(NSObject) doesNotRecognizeSelector:] ce 186 38CoreFoundation *07x***+ 414 4 CoreFoundation 0x00007fff8a1073b8 _CF_forwarding_prep_0 + 232 5 tsikzoeMig 0x0000000100001cd3 主要 + 851 6 libdyld.dylib 0x00007fff8acd97e1 开始 + 0 7 ??? 0x0000000000000001 0x0 + 1）libc++abi.dylib：终止调用抛出异常（lldb）

我的 main.m 代码在这里

```
//  main.m

#import "TsikzoeE.h"
static NSManagedObjectModel *managedObjectModel()
{
    static NSManagedObjectModel *model = nil;
    if (model != nil) {
        return model;
    }

    NSString *path = @"tsikzoe";
    NSURL *modelURL = [NSURL fileURLWithPath:[path stringByAppendingPathExtension:@"momd"]];
    model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return model;
}

static NSManagedObjectContext *managedObjectContext()
{
    static NSManagedObjectContext *context = nil;
    if (context != nil) {
        return context;
    }

    @autoreleasepool {
        context = [[NSManagedObjectContext alloc] init];

        NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:managedObjectModel()];
        [context setPersistentStoreCoordinator:coordinator];

        NSString *STORE_TYPE = NSSQLiteStoreType;

        NSString *path = [[NSProcessInfo processInfo] arguments][0];
        path = [path stringByDeletingPathExtension];
        NSURL *url = [NSURL fileURLWithPath:[path stringByAppendingPathExtension:@"sqlite"]];

        NSError *error;
        NSPersistentStore *newStore = [coordinator addPersistentStoreWithType:STORE_TYPE configuration:nil URL:url options:nil error:&error];

        if (newStore == nil) {
            NSLog(@"Store Configuration Failure %@", ([error localizedDescription] != nil) ? [error localizedDescription] : @"Unknown Error");
        }
    }
    return context;
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        // Create the managed object context
        NSManagedObjectContext *context = managedObjectContext();

        // Custom code here...
        // Save the managed object context
        NSError *error = nil;
        if (![context save:&error]) {
            NSLog(@"Error while saving %@", ([error localizedDescription] != nil) ? [error localizedDescription] : @"Unknown Error");
            exit(1);
        }
        NSError* err = nil;

        NSString* dataPath = [[NSBundle mainBundle] pathForResource:@"tsikzoe" ofType:@"json"];
        NSArray* arraytsik = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath]options:kNilOptions error:&err];

        // array outputing here to check

        NSLog(@"here i am printing the array %@",arraytsik);

        [arraytsik enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

           TsikzoeE *tsikz = [NSEntityDescription insertNewObjectForEntityForName:@"TsikzoeE"inManagedObjectContext:context];
            tsikz.id = [obj objectForKey:@"id"];
            tsikz.dictionaryType=[obj objectForKey:@"dictionaryType"];
            tsikz.word=[obj objectAtIndex:3];
            tsikz.wordDef=[obj objectForKey:@"wordDef"];
            tsikz.author=[obj objectForKey:@"author"];
            tsikz.authorName=[obj objectForKey:@"authorName"];
            NSError *error;
            if (![context save:&error]) {
                NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
            }
        }];

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"TsikzoeE"
                                                  inManagedObjectContext:context];
        [fetchRequest setEntity:entity];
        NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
        for (TsikzoeE *tsikz in fetchedObjects) {
            NSLog(@"word: %@", tsikz.word);

            NSLog(@"wordDef: %@", tsikz.wordDef);
        }

    }
    return 0;
} 
```

我的 json 内容是

```
{"tsik":[{"id":1,"dictionaryType":1,"word":"fgdf","wordDef":"fdgdfg","dateSubmitted":"2012-08-19 00:00:00","author":2,"authorName":"fgfg"},{"id":2,"dictionaryType":1,"word":"༡༠༤༠བསོ།","wordDef":"བསོ་བསོ་ཞེས་པའི་སྒྲའི་ཁྱད་པར་གྱི་མིང༌།","dateSubmitted":"2012-08-19 00:00:00","author":2,"authorName":"དུང་དཀར་ཚིག་མཛོད།"}]} 
```

我的 TsikzoeE.h 代码

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface TsikzoeE : NSManagedObject

@property (nonatomic, retain) NSNumber * author;
@property (nonatomic, retain) NSString * authorName;
@property (nonatomic, retain) NSNumber * dictionaryType;
@property (nonatomic, retain) NSNumber * id;
@property (nonatomic, retain) NSString * word;
@property (nonatomic, retain) NSString * wordDef;

@end 
```

tsikzoeE.m 代码

```
 //
//  TsikzoeE.m

#import "TsikzoeE.h"

@implementation TsikzoeE

@dynamic author;
@dynamic authorName;
@dynamic dictionaryType;
@dynamic id;
@dynamic word;
@dynamic wordDef;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:51:37.033

JSON 数据包含一个*字典*（带有一个键“tsik”）而不是一个*数组*。

以下应该更好地工作：

```
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath] options:kNilOptions error:&err];
NSArray *arraytsik = [dict objectForKey:@"tsik"]; 
```

`enumerateObjectsUsingBlock`块内部似乎也有问题：`obj`这里是字典，所以

```
tsikz.word=[obj objectAtIndex:3]; 
```

不起作用。也许你的意思是

```
tsikz.word=[obj objectForKey:@"word"]; 
```

*备注：*您还可以考虑在循环完成*后*保存托管对象上下文，而不是为添加的每个项目保存它。

# struts2 - 重定向 url 中的 Struts2 命名空间更改

> ID：13913503
> 
> 赞同：0
> 
> 时间：2012-12-17T11:42:25.600
> 
> 标签：struts2, struts

我有包含应用程序创建方法的操作类，如果应用程序保存成功，则返回“成功”。如您所见，我的 struts.xml 正在重定向到应用程序只读模式。当我重定向到“tenantId”（包含在会话中）的只读操作默认名称空间覆盖时

这是重定向网址

```
http://localhost:8080/scandium/tenantId/applicationView.html!tenantId?applicationId=40 
```

为什么会有“！” 在网址中？它如何将默认命名空间更改为 "tenantId" ？

谁能帮我解决这个问题？

```
 <struts>

        <constant name="struts.devMode" value="true"/>
        <constant name="struts.action.extension" value="html"/>

        <package name="default" namespace="/" extends="struts-default">
             <action name="createApplication" class="com.action.ApplicationAction" method="create">
                        type="tiles">/applicationReadOnlyBody.tiles</result>-->
                        <result name="success" type="redirectAction">
                            <param name="actionName">applicationView.html</param>
                           <!-- <param name="namespace">/</param> -->
                            <param name="applicationId">${appId}</param>
                        </result>
                        <result name="input" type="tiles">/new-application.tiles</result>
                </action>

              <action name="applicationView" class="com.action.ApplicationReadOnlyAction" method="viewApplication">
                    <result name="success" type="tiles">/applicationReadOnlyBody.tiles</result>
              </action>

    </package>

</struts> 
```

先感谢您，

乌德西卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:48:00.947

您的配置中有一些错误。“浮动” type="tiles... 和一个已关闭（但从未打开）的 html 注释标签。

改变这个：

```
<action name="createApplication" 
        class="com.action.ApplicationAction" 
        method="create">
        type="tiles">/applicationReadOnlyBody.tiles</result>--> 
```

对此：

```
<action name="createApplication" 
        class="com.action.ApplicationAction" 
        method="create"> 
```

看看它是否有效或以某种方式改变......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:58:21.670

它是您正确的 struts.xml 文件吗？您的 struts 文件似乎缺少图块的结果类型

```
<result-types>
    <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types> 
```

你的 struts.xml 应该是这样的：`

```
<struts>

        <constant name="struts.devMode" value="true"/>
        <constant name="struts.action.extension" value="html"/>

        <package name="default" namespace="/" extends="struts-default">

<result-types>
    <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types>

             <action name="createApplication" class="com.action.ApplicationAction" method="create">
                        type="tiles">/applicationReadOnlyBody.tiles</result>-->
                        <result name="success" type="redirectAction">
                            <param name="actionName">applicationView.html</param>
                           <!-- <param name="namespace">/</param> -->
                            <param name="applicationId">${appId}</param>
                        </result>
                        <result name="input" type="tiles">/new-application.tiles</result>
                </action>

              <action name="applicationView" class="com.action.ApplicationReadOnlyAction" method="viewApplication">
                    <result name="success" type="tiles">/applicationReadOnlyBody.tiles</result>
              </action>

    </package>

</struts> 
```

`

并且在struts2中将redirectAction改为redirect。进行更改尝试并告诉我

# c - 正在使用 lseek 扩展文件，保证创建稀疏文件

> ID：13913508
> 
> 赞同：2
> 
> 时间：2012-12-17T11:42:36.193
> 
> 标签：c, linux, solaris, sparse-matrix

我一直在通过使用文件映射来减少使用我一直在处理的几个大型数组的程序的内存占用。由于我不知道这些数组的所需大小，我将大小高估到我知道数组无法达到的水平，然后将文件截断到最终大小，我完成了数组。幸运的是，我用来创建映射文件的代码（在这篇文章的底部）在我尝试过的每台机器上创建了稀疏文件。如果没有，那就是磁盘空间问题。

问题是：在映射之前调用 lseek 来扩展文件可以保证创建一个稀疏文件，或者至少可以依靠任何合理的 Linux 发行版以及 Solaris 来做到这一点。

还有什么方法可以检查创建的文件是否稀疏，因为退出可能比尝试创建数百 GB 的非稀疏文件更好。

```
output_data_file_handle = open(output_file_name,O_RDWR | O_CREAT ,0600);
lseek(output_data_file_handle,output_file_size,SEEK_SET);
write(output_data_file_handle, "", 1);
void * ttv = mmap(0,(size_t)output_file_size,PROT_WRITE | PROT_READ, MAP_SHARED,output_data_file_handle,0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:08:08.133

参考您的第二个问题：要测试文件是否（部分）是稀疏文件，您可以使用该`stat()`命令。

例子：

```
#include <stdio.h>
#include <sys/stat.h>

...

struct stat st = {0};

int result = stat("filename", &st);
if (-1 == result)
  perror("stat()");
else
{
  printf("size/bytes: %ld", st.st_size); /* 'official' size in bytes */
  printf("block size/bytes: %ld", st.st_blksize);
  printf("blocks: %ld", st.st_blocks); /* number of blocks actually on disk */

  if (st.st_size > (st.st_blksize * st.st_blocks))  
       printf("file is (at least partially) a sparse file");
}

... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T12:23:15.480

该手册[`lseek`](http://pubs.opengroup.org/onlinepubs/009695399/functions/lseek.html)指定了在文件末尾之外搜索时的行为，但没有提到稀疏文件。所以它取决于操作系统，尤其是使用的文件系统。

要测试，是否可以在系统上创建稀疏文件，您可以

```
dd if=/dev/zero of=/path/to/sparse.txt bs=1k seek=1024 count=1
du /path/to/sparse.txt 
```

这会跳过 1024 个 1k 块，然后写入 1024 个字节。`du`如果它是一个稀疏文件，应该只显示几 kB，如果不是，大约 1.1 MB。

# html - 将 div 背景与其父级对齐

> ID：13913509
> 
> 赞同：4
> 
> 时间：2012-12-17T11:42:39.103
> 
> 标签：html, css, html4

我想有一个带背景的 div，在里面有更多的 div，它们的背景会在父背景上应用一些过滤器。由于对过滤器的支持不完全在这里，我想我将创建过滤后的图像，然后设置`background-position`子元素的属性，使背景与父元素对齐。在 jQuery 中，我可以编写如下内容：

```
$this.css('background-position', -$this.offset) 
```

不使用 JavaScript 也能实现这个效果吗？通过将孩子的背景设置为 ，我几乎可以得到我想要的东西`fixed`，但我当然不希望它们被固定到视口，我希望它被固定到父母。

为了给你一个更好的主意，这是我在 Gimp 中制作的一个快速模型：

![在此处输入图像描述](../Images/9a3a7e105251f9770e77178e080d2a0f.png)

编辑：我创建了[JSFiddle](http://jsfiddle.net/FB2Qp/3/)，有`fixed`背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:57:08.333

您需要创建一个具有透明度（以及这种蓝紫色）的 png 图片，并将此图像作为背景图像提供给孩子们。然后，您需要使用 margin:auto 使孩子居中。

它应该工作！希望我理解正确.. :)

对不起我的英语不好..祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:21:02.560

仅使用 CSS 是不可能做到这一点的。**节省一些时间，并寻找替代解决方案**

也可以看看：

*   [CSS背景位置固定到父级](https://stackoverflow.com/questions/5811589/css-background-position-fixed-to-parent)
*   [背景图像位置固定到父元素](https://stackoverflow.com/questions/6323281/background-image-position-fixed-to-parent-element)

# php - 使用 PHP 循环多个表单值

> ID：13913514
> 
> 赞同：3
> 
> 时间：2012-12-17T11:42:55.780
> 
> 标签：php, codeigniter

我有一个表格，我正在编辑我的订单。在我的编辑订单页面上，我正在分解我的订单。例如，订单详细信息（客户姓名、地址等），然后订购如下物品：

订单详细信息：

```
 <form name="edit_order" id="edit_order" method="post">
      <? 
     if ($order_details) {
                //    print_array($order_details);
                    foreach ($order_details as $key => $link) {
                    ?>
                    <div width="200">
                        <div><b>Product: </b> <br><?=$link->product_name?> - <?=$link->product_id?></div>  
                        <div><strong>Cost:</strong><br>&pound;<?=$link->unit_cost?></div>
                        <div><strong>Pack Qty:</strong><br><input name="quantity" id="quantity" value="<?=$link->quantity?>" style="width:50px;"   /> </div> 
                        <div><strong>Pack Cost:</strong> <br><input name="pack_cost" id="pack_cost" value="<?=$link->pack_cost?>" style="width:50px;" />   </div>
                           <div><strong>Pallet Qty:</strong><br><input name="pallet_quantity" id="pallet_quantity" value="<?=$link->pallet_quantity?>" style="width:50px;" />  </div>
                           <div><strong>Pallet Cost:</strong><br><input name="pallet_quantity" id="pallet_quantity" value="<?=$link->pallet_unit?>" style="width:50px;" />  </div>

                    </div>
                    <?
                    }
                }
           ?> 
```

**我的问题是：**

如何在下一页上检索多个字段（输入框）的这些值？

例如，如果我在编辑订单页面上编辑 10 个产品的“pallet_quantity”和“pack_cost”，那么我如何使用循环在下一页检索它们以将它们保存在数据库中？

当我尝试像这样在网页上显示值时： `print($_POST['pack_cost'])`它给了我单个值。如何循环遍历 POST 数组以显示我编辑的值并将其保存到数据库中？请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:50:42.793

您可以为输入值创建数组。看下面的代码...

```
<input name="pack_cost[]" id="pack_cost1" value="<?=$link->pack_cost?>" style="width:50px;" />
<input name="pack_cost[]" id="pack_cost2" value="<?=$link->pack_cost?>" style="width:50px;" />
<input name="pack_cost[]" id="pack_cost3" value="<?=$link->pack_cost?>" style="width:50px;" /> 
```

只要记住这些输入框的id应该不同。

因此，当您在下一页制作**echo $_POST['pack_cost']**时，您将获得一个名为**pack_cost**的数组，其中包含键和值。

**已编辑**

**完整代码：-**

```
<form name="edit_order" id="edit_order" method="post">
<? 
if ($order_details) {
     //    print_array($order_details);
     foreach ($order_details as $key => $link) {
?>
    <div width="200">
        <div><b>Product: </b> <br><?=$link->product_name?> - <?=$link->product_id?></div>  
        <div><strong>Cost:</strong><br>&pound;<?=$link->unit_cost?></div>
        <div><strong>Pack Qty:</strong><br><input name="quantity[]" id="quantity<?php echo $key; ?>" value="<?=$link->quantity?>" style="width:50px;"   /> </div> 
        <div><strong>Pack Cost:</strong> <br><input name="pack_cost[]" id="pack_cost<?php echo $key; ?>" value="<?=$link->pack_cost?>" style="width:50px;" />   </div>
        <div><strong>Pallet Qty:</strong><br><input name="pallet_quantity[]" id="pallet_quantity<?php echo $key; ?>" value="<?=$link->pallet_quantity?>" style="width:50px;" />  </div>
        <div><strong>Pallet Cost:</strong><br><input name="pallet_quantity[]" id="pallet_quantity<?php echo $key; ?>" value="<?=$link->pallet_unit?>" style="width:50px;" />  </div>
    </div>
 <?
    }
 }
 ?>
</form> 
```

这就是什么，它将输出您的需求。

**下面是获取返回值的代码**

```
if($_POST)
{
    $field_array = array();
    for( $i=0 ; $i < count($_POST['pack_cost']) ; $i++ )
    {
        $field_array[$i]['quantity']        = $_POST['quantity'][$i];
        $field_array[$i]['pack_cost']       = $_POST['pack_cost'][$i];
        $field_array[$i]['pallet_quantity'] = $_POST['pallet_quantity'][$i];
        $field_array[$i]['pallet_cost']     = $_POST['pallet_cost'][$i];

        // if you require then the query for your database
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:46:50.863

据我了解，你想这样做：

```
foreach ($_POST as $tag => $value) {
// Do whatever you want with the params
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:01:46.307

**使用会话级存储**

```
(i.e) $_SESSION[ID][field1], $_SESSION[ID][field2], $_SESSION[ID][field3] 
```

在从一个页面移动到另一个页面以获取其他字段时..您将前一页的数据存储在具有一个会话 ID 的 SESSION 中..并且在接下来的页面中执行相同的操作..但对整个表单使用相同的会话 ID ...在下一页或最后一页显示之后...或者如果您需要将数据从会话变量存储到数据库中（在进程结束时），如果您不希望取消设置/删除所有这些会话数据，包括 id...

对于 Codeigniter，您将会话库用于这些概念......请参阅为会话变量分配和检索值，，

**[CodeIgniter 会话](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)**

# wordpress - Wordpress 可过滤的投资组合插件

> ID：13913518
> 
> 赞同：1
> 
> 时间：2012-12-17T11:42:59.007
> 
> 标签：wordpress, plugins

有人知道像 nimble 3 这样的可过滤 wordpress 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:46:44.640

这是我开发的一个插件，功能与nimble相同，但更易于使用。

[http://wordpress.org/extend/plugins/awesome-filterable-portfolio/](http://wordpress.org/extend/plugins/awesome-filterable-portfolio/)

我希望这会有所帮助

# cakephp - CakePHP - 如何操作组件中的请求数据？

> ID：13913522
> 
> 赞同：2
> 
> 时间：2012-12-17T11:43:16.333
> 
> 标签：cakephp, cakephp-2.0

在我的组件方法中，如何获取控制器正常读取的请求数据？

```
class MyComponent extends Component {

    public function processData() {

        // Get the data normally found in $this->request->data

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:47:20.480

这里有两种方法可以做到这一点，第二种方法更简单：

将此添加到您的组件中

```
public function initialize(Controller $controller) {
    $this->controller = $controller;
} 
```

然后，您可以通过执行以下操作访问组件中的请求数据：

```
$this->controller->request->data 
```

或者，您可以将其传递给您的函数。例如

```
public function processData($data) {

} 
```

然后用

```
$this->MyComponent->processData($this->request->data); 
```

# .net - Redis 是否提供 Expiration 和 Expiration 回调？

> ID：13913527
> 
> 赞同：3
> 
> 时间：2012-12-17T11:43:32.257
> 
> 标签：.net, redis, queue, servicestack, redistogo

我正在开始一个绿地项目。在其中，我们希望有一个有期限的**队列**。所以我添加了一个密钥，该项目在 .. 说 .. 20 分钟后过期。

队列预计会很大。成千上万个具有不同到期时间的密钥。

我马上想到可能使用[ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis/)，当然还有 Redis :)

到目前为止，这有望在`AppHarbor + RavenDb + RedisToGo`. Redis Key 将是 RavenDb Id。（字符串 - 例如。`users/1`或其他）

### 问题

1.  我可以利用 SS.Redis 将项目添加到过期的 redis 队列吗？（我假设是的。例如 typedClient.ExpiresAt(..)）
2.  我可以利用 RedisToGo 作为云托管的 redis 提供商并使用 SS.Redis 作为客户端吗？（再次，假设是和是）
3.  当一个项目过期时，我可以让它做一个 REST GET 或 POST 到某个 URL 吗？- 所以我可以“处理”到期？（不知道）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:05:43.673

1.  在 redis 中，过期的是**key**，而不是 list/set/hash/etc 中的单个项目。如果您有一个队列（我假设这是 redis 术语中的*列表*，在不同的端推送/弹出），那么您的到期适用于同一队列中的*所有项目。*对于允许每个项目到期的列表（等），没有一个很好的比喻。坦率地说，最简单的事情可能是在有效负载中包含逻辑到期，如果它们过期，则在弹出它们时丢弃它们

2.  由于客户端可以通过所选端口访问服务器，因此您应该没问题 - 无论特定的客户端和服务器/提供商如何；但如果你有这些服务，验证这一点可能是微不足道的。

3.  Redis 目前不包括任何到期触发功能，**但**已经提出并（似乎）接受了 2.8 版本（[请参阅此处的讨论](https://groups.google.com/forum/#!msg/redis-db/7jEUTqeSkSs/Cq8a-UbZTSwJ)）；redis**本身**不会对 url 发布任何帖子，但假设您可以只在事件通道上收听并在*您的*代码中执行此操作

但同样，它又回到了密钥与物品的到期问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T00:57:32.577

尝试为您的队列使用排序集 (ZSET) - 以时间戳作为 SCORE。当您使用 ZREVRANGEBYSCORE 从队列中挑选作业时，您可以检查作业提交到队列中的时间戳，如果它太旧，您可以简单地忽略该作业。

# c# - 读取多个excel文件

> ID：13913528
> 
> 赞同：1
> 
> 时间：2012-12-17T11:43:33.797
> 
> 标签：c#, excel

我是 CSharp 编程的新手。我需要从一个文件夹中读取多个 excel 文件。我不知道该文件夹中的 excel 文件数。我想一一阅读所有文件。为了读取一个文件，我编写了一些代码。我想应用此代码来一一读取文件夹中的所有文件。请让我知道路。这是我的代码。

```
class RatWalk
{
    public List<RatStep> steps = new List<RatStep>();
    string[] Individal_Runs = Directory.GetFiles(@"C:\Users\AG_Winter\Desktop\Individual_Runs");
    public void LoadFromFile(String fileName) // reads data from excel file
    {
        steps.Clear();
        XlsFile file = new XlsFile(fileName);
        try
        {
           // Everything I wanna do
        }
        catch (NullReferenceException ex)
        {
            Console.Out.WriteLine("No run");
        }
    }
} 
```

* * *

谢谢你们。我不知道如何回复帖子，因为评论应该是有限的字符数。所以我在这里输入。

在我的程序中，我想从一个文件夹中一个一个地读取 xlsx 文件。到目前为止，我正在使用一个按钮来浏览单个文件。但后来我想使用这个按钮来浏览我有文件的文件夹。这样当我选择这个文件夹时，程序应该会自动一个一个地运行文件夹中的所有文件。这是我在此之前所做的。

[\code = c#] class RatWalk { public List steps = new List();

```
 public void LoadFromFile(String fileName)                       // reads data from excel file
    {

            steps.Clear();

            XlsFile file = new XlsFile(fileName);
try{
//everything I wanna do 
```

}抓住{} }

```
 private void InitializeComponent()                             
        {
            EventHandler handler = new EventHandler(OnClick);
            button.Text = "Browse for the XLS file";                    
            // button properties                                       
            this.Controls.Add(button);
}
private void OnClick(object sender, EventArgs e)            // Browses for the file and loads the selected Excel file
        {
            OpenFileDialog fileDialog = new OpenFileDialog();
            if (fileDialog.ShowDialog() != DialogResult.OK)
                return;
            ratWalk.LoadFromFile(fileDialog.FileName);

           // Whatever I wanna do   
        } 
```

在这里，我想改变它，当我单击按钮并选择文件夹时，它应该一个一个地运行文件夹中的所有文件。

请让我知道如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:48:16.877

我会给你举个例子，剩下的就交给你了。

```
string [] fileEntries = Directory.GetFiles(sourceDir);
foreach(string fileName in fileEntries)
{
   // do something with fileName
   Console.WriteLine(fileName);
} 
```

顺便说一句，这不会遍历子文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:56:02.537

```
 string[] Individal_Runs = Directory.GetFiles(@"D:\testfiles");
        foreach (string s in Individal_Runs)
        {
            try
            {
String theConnString= "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + s + ";Extended Properties=Excel 8.0;";

    OleDbConnection objConn = new OleDbConnection(theConnString);
    objConn.Open();

    OleDbCommand objCmdSelect = new OleDbCommand("SELECT * FROM [sheet1$]", objConn);
    OleDbDataAdapter objAdapter1 = new OleDbDataAdapter();

    objAdapter1.SelectCommand = objCmdSelect;
    DataSet objDataset1 = new DataSet();
    objAdapter1.Fill(objDataset1, "XLData");

     //Your code here

    objConn.Close();

            }
            catch (NullReferenceException ex)
            {
                Console.Out.WriteLine("No run");
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:49:34.150

1.  获取目标文件夹的路径。
2.  获得文件夹后，以编程方式获取其下的所有 excel 文件并将它们放入列表中。
3.  您的代码读取一个 excel 文件，遍历 excel 文件列表并在循环中使用相同的函数。

```
using System;
using System.IO;

namespace FileOperationsSample
{
    class Program
    {
        static void Main(string[] args)
        {
            // Change this path to the directory you want to read
            string path = "C:\\Junk";             
            DirectoryInfo dir = new DirectoryInfo(path);
            Console.WriteLine("File Name                       Size        Creation Date and Time");
            Console.WriteLine("=================================================================");
            foreach (FileInfo flInfo in dir.GetFiles())
            {
                String name = flInfo.Name;
                long size = flInfo.Length;
                DateTime creationTime = flInfo.CreationTime;
                Console.WriteLine("{0, -30:g} {1,-12:N0} {2} ", name, size, creationTime);
            }
            Console.ReadLine();
        }
    }
} 
```

# python - Python正则表达式搜索句子中的单词

> ID：13913530
> 
> 赞同：1
> 
> 时间：2012-12-17T11:43:35.373
> 
> 标签：python, regex

我仍在使用 Python 广告正则表达式学习绳索，我需要一些帮助！我需要一个可以在句子中搜索特定单词的正则表达式。我已经设法创建了一个模式来搜索一个单词，但是我如何检索我需要找到的其他单词？re 模式会如何做到这一点？

```
>>> question = "the total number of staff in 30?"
>>> re_pattern = r'\btotal.*?\b'
>>> m = re.findall(re_pattern, question)
['total'] 
```

它必须寻找“total”和“staff”这两个词谢谢 Mike

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:47:32.370

使用联合运算符`|`搜索您需要查找的所有单词：

```
In [20]: re_pattern = r'\b(?:total|staff)\b'

In [21]: re.findall(re_pattern, question)
Out[21]: ['total', 'staff'] 
```

这与您上面的示例最接近。但是，这种方法只有在没有其他字符被预先或附加到单词时才有效。这通常出现在主句和从句的末尾，其中逗号、点、感叹号或问号附加到从句的最后一个单词。

例如，在问题*中，您的员工有多少人？*上面的方法找不到单词*staff因为在**staff*末尾没有单词边界。取而代之的是一个问号。但是，如果您在上面的正则表达式末尾省略第二个`\b`，则表达式将错误地检测子字符串中的单词，例如*total* in *total*或*totalities*。

 *完成您想要的最佳方法是首先提取句子中的所有字母数字字符，然后在此列表中搜索您需要查找的单词：

```
In [51]: def find_all_words(words, sentence):
....:     all_words = re.findall(r'\w+', sentence)
....:     words_found = []
....:     for word in words:
....:         if word in all_words:
....:             words_found.append(word)
....:     return words_found

In [52]: print find_all_words(['total', 'staff'], 'The total number of staff in 30?')
['total', 'staff'] 

In [53]: print find_all_words(['total', 'staff'], 'My staff is totally overworked.')
['staff'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:04:12.907

```
question = "the total number of staff in 30?"
find=["total","staff"]
words=re.findall("\w+",question)
result=[x for x in find if x in words]
result
['total', 'staff'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:47:37.257

你有没有使用过正则表达式之外的东西？

考虑一下，如果它有效，请从此解决方案扩展

```
>>> 'total' in question.split()
True 
```

相似地

```
>>> words = {'total','staff'}
>>> [e   for e in words if e in question.split()]
['total', 'staff'] 
```*

# configuration - 未在石英配置中提供数据库凭据

> ID：13913531
> 
> 赞同：1
> 
> 时间：2012-12-17T11:43:37.653
> 
> 标签：configuration, quartz-scheduler, credentials

我在 Web 应用程序中使用石英并使用`QuartzInitializerServlet`.

现在要在多个系统上运行它，我添加了一个数据库以使其以集群模式运行。数据源属性在 quartz.properties 文件中提供，但这会以明文形式公开数据库凭据。

有什么方法可以使用`QuartzInitializerServlet`但`dataSource`通过代码提供凭据（我可以在其中检索存储在其他地方的凭据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:31:59.337

这是文档：[http ://www.quartz-scheduler.org/documentation/quartz-2.3.0/configuration/ConfigDataSources.html#configure-datasources](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/configuration/ConfigDataSources.html#configure-datasources)

使用 jndiUrl 属性指定数据源的 jndi 名称：

```
org.quartz.dataSource.NAME.jndiURL = java:comp/env/jdbc/www_datasource 
```

HIH

# zurb-foundation - 使用foundation-3.2.2 我想同时滑动图像和内容

> ID：13913534
> 
> 赞同：0
> 
> 时间：2012-12-17T11:43:44.243
> 
> 标签：zurb-foundation

我正在使用foundation-3.2.2，但我面临图像滑块问题，我同时使用了轨道图像滑块或内容滑块，但它没有帮助。

问题是，在我的网站上，我想同时滑动图像和内容，而我的 html 结构如下，您可以通过破解`http://ipadfeatures.info/yogita/envision.com`来最大化和最小化您的浏览器。

```
<div class="row">
    <div class="twelve columns">
        <div id="featuredContent">
            <div>
               <img src="images/illustration/spotlight1.jpg"/>
               <div class="data">
                    <h3 class="textWeight">"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed"</h3>              
               </div>
            </div>
            <div>        
                <img src="images/illustration/spotlight2.jpg"/>
                <div class="data">
                    <h3 class="textWeight">"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed"</h3>
                    <a href="html/corporatePrograms.html" class="topMargin">Lorem ipsum dolor sit amet,</a>
                 </div>
            </div>
            <div>        
                <img src="images/illustration/spotlight3.jpg"/>
                <div class="data">
                    <h3>""Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed</h3>
                    <a href="html/cadCourses.html" class="topMargin">Lorem ipsum dolor sit amet, c</a>
                </div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:04:28.657

[Zurb 已经在这个 github 页面上](https://github.com/zurb/foundation/issues/402)回应了这个话题。

不幸的是，Foundation 3 中的可变内容滑动不是 Orbit 滑块的计划，它已在 Foundation 4.0 中进行了更新，但在 3 中不受支持。

# c# - app.config 不保存我的配置

> ID：13913538
> 
> 赞同：2
> 
> 时间：2012-12-17T11:43:58.197
> 
> 标签：c#, app-config

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

config.AppSettings.Settings["dbHost"].Value = txtHost.Text.ToString();
config.AppSettings.Settings["dbName"].Value = txtName.Text.ToString();
config.AppSettings.Settings["dbUser"].Value = txtUser.Text.ToString();
config.AppSettings.Settings["dbPass"].Value = txtPass.Text.ToString();
config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection("appSettings"); 
```

当我重新打开应用程序时，我得到一个空白文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:49:57.203

应用程序不应该在运行时更改 setup/bin 目录中的 app.config，只能在设置时更改。在运行时，应用程序应该写入 %APPDATA% 文件夹下的应用程序文件夹。如果您激活了 UAC，Windows 将强制执行此操作。

此外，您使用的 API 并不意味着修改文件。

如果要访问 %APPDATA% 设置（每个用户），请改用此 PerUserRoaming 或 PerUserRoamingAndLocal。

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationuserlevel.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationuserlevel.aspx)

# c++ - 递归扫描目录中的文件

> ID：13913541
> 
> 赞同：0
> 
> 时间：2012-12-17T11:44:06.387
> 
> 标签：c++, boost, boost-filesystem

我正在尝试遍历目录并打印从根目录开始的所有文件的名称。

这是我在程序中使用`Boost::Filesystem`(1.52.0) 编写的简短片段。

```
void testApp::getNames(const string& dirPath, string& fileExtension)
{
    namespace fs = boost::filesystem;
    namespace sys = boost::system;
    fs::path filePath(dirPath);
    for(fs::recursive_directory_iterator dir(filePath), dir_end; dir!=dir_end ;++dir)
    {
        cout<<*dir;
    }
} 
```

在尝试编译这个时，奇怪的是我得到了构建错误，它指向`path.hpp`以下代码段中的文件：

```
 static const codecvt_type& codecvt()
    {
      return *wchar_t_codecvt_facet();
    } 
```

我得到的错误是`undefined reference to boost::filesystem3::path::wchar_t_codecvt_facet()'|`

我在 Ubuntu 12.10 上为我的项目使用 Codeblocks IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:48:11.317

那是一个链接器错误。您需要链接 Boost 文件系统库。

在 IDE 中，项目设置中的某处应该有一个用于添加库的设置。（我不知道具体在哪里，因为我从未使用过代码块。）

# jpa - JPA eclipselink缓存自动刷新

> ID：13913546
> 
> 赞同：1
> 
> 时间：2012-12-17T11:44:38.277
> 
> 标签：jpa, eclipselink

当前使用 eclipselink JPA 提供程序来访问后端实体。我正在使用命名查询来访问数据并使用以下查询缓存选项。

```
@NamedQueries({
@NamedQuery(name = Supplier.FIND_ALL, query = "select o from Supplier o",hints={
      @QueryHint(name=QueryHints.READ_ONLY, value=HintValues.TRUE),          
      @QueryHint(name = QueryHints.QUERY_RESULTS_CACHE, value = HintValues.TRUE),
      @QueryHint(name = QueryHints.CACHE_STATMENT, value = HintValues.TRUE),
      @QueryHint(name = QueryHints.CACHE_STORE_MODE, value = "REFRESH"),
      @QueryHint(name = QueryHints.CACHE_RETRIEVE_MODE,value=CacheUsage.CheckCacheThenDatabase),
      }),
}) 
```

我也在实体上使用以下缓存选项。

```
@Cache(refreshOnlyIfNewer=true,
coordinationType=CacheCoordinationType.SEND_OBJECT_CHANGES,alwaysRefresh=true) 
```

该查询似乎是第一次花费一些时间，但对于进一步检索（ b'cozs of `QueryHints.QUERY_RESULTS_CACHE, value = HintValues.TRUE`）来说非常快。但似乎随后对数据库的任何更改都没有反映在输出中。似乎缓存没有被刷新，并且对数据库的更新更改没有反映在输出中。

需要相同的帮助。

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:58:35.797

你的设置没有多大意义。

QueryHints.QUERY_RESULTS_CACHE 是启用查询缓存的正确方法。但你不应该设置其他，

QueryHints.CACHE_STATMENT - 这是 JDBC 语句缓存，在查询中设置它很奇怪，通常这是为 DatabaseSource 中的所有语句配置的，如果使用 EclipseLink 连接池，则为持久单元配置。

QueryHints.CACHE_STORE_MODE - 我不确定这是否有意义，您无法刷新和缓存查询。

QueryHints.CACHE_RETRIEVE_MODE,value=CacheUsage.CheckCacheThenDatabase，这没有意义，CacheUsage 不适用于这个属性，CheckCacheThenDatabase 对使用查询缓存的查询没有意义。

EclipseLink 有两种类型的缓存，“对象缓存”（按 Id）和“查询缓存”（按查询名称和参数）。启用查询缓存后，查询结果将被缓存直到过期。默认情况下没有过期，但你可以配置它，或者手动清除查询缓存。查询缓存不会随数据库更改而更新。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Cache](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Cache)

# ios - 无法重新启动 UITabBarController

> ID：13913547
> 
> 赞同：1
> 
> 时间：2012-12-17T11:44:40.693
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

我有三个视图：登录视图、注册视图和主视图“tabController”，每个选项卡包含 4 个选项卡 UINavigationController

首先，用户登录或注册并呈现主视图“tabController”，从第4个选项卡，他可以注销，注销时，呈现登录视图，登录后，再次呈现“tabController”，发生的是旧数据有没有从以前的登录！我想重新初始化tabController！！！！

在 MainWindow 中创建 tabController，并在 AppDelegate 中获取 IBOutlet

这个怎么做？！

# yii - 如何为移动版和主要版 Yii 使用不同的主题？

> ID：13913548
> 
> 赞同：1
> 
> 时间：2012-12-17T11:44:44.810
> 
> 标签：yii

我有主要和移动版本的 Yii 项目。移动版的 Views 文件路径为 modules/mobile/views/nameController/ 。对于主版本创建的主题，所有视图都从路径主题/名称主题加载。在配置中写入'theme' =>'nameTheme'，在控制器中我使用代码：

```
public function init() {
       ...
        Yii::app()->theme = 'mobile';
       ...
        return parent::init();
    } 
```

我将移动版本的文件移动到新主题。但是 Yii 从 modules/mobile/views/nameController/ 加载视图。我不知道如何在配置中为移动版本定义主题。我可以在我的项目中使用其他移动版本的主题（连同主版本的主题）吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:44:31.337

我进行动态主题切换的方式是，我的控制器组件中有方法来确定客户端使用哪种浏览器，然后从“init”方法中设置主题。与您所做的非常相似。

我认为区别在于文件组织。如果您的桌面和移动主题有单独的视图文件，我建议您将视图文件放在各自的主题目录中。

我通常为我的主题使用一个标记，只为桌面和移动主题修改样式表，所以我不得不担心一次。

这是我的做法：

```
public function isMobileBrowser()
{
    $useragent=$_SERVER['HTTP_USER_AGENT'];
    return preg_match('/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4));
} 
```

这是我的 Controller::init 方法：

```
public function init()
{
    if ($this->isMobileBrowser()) {
        Yii::app()->theme = "mobile-white-blue";
    }
            parent::init();   
} 
```

如果你的应用程序中有多个视图文件，Yii 首先在你的主题文件夹中查找视图文件：AppRoot>>Themes>>{theme_name}>>views，如果在那里找不到，Yii 会在主文件夹中查找查看文件夹：AppRoot>>protected>>views 或者如果是模块视图，AppRoot>>protected>>modules>>{module_name}>>views

我希望这会有所帮助。

# recursion - 使用块的递归函数返回不起作用

> ID：13913551
> 
> 赞同：2
> 
> 时间：2012-12-17T11:45:01.337
> 
> 标签：recursion, return, elisp

**[解决了]**

我有与这四个函数类似的东西：`base`、`init`和。是递归的并调用自身：在*“停止情况”*中，它将调用并返回其值，然后将控制**权**返回给“ ”，从中调用它；后者曾经被调用 from 。`func``some``func`*`some`**`init``base`***

 ***```
base
  -> init
       -> func
            -> init
                 -> func
                      -> some
                    |
           _________+
          |
          v
          ; should continue from here (in `func`) 
```

**[不再]**

相反，在第一次调用 之后`some`，控制权直接交给`base`，跳过了我期望的中间`(init,func)`对调用。

`block`实际上，我使用,`return`和递归（例如，“相互尾递归”）尝试了几个更简单的情况`factorial`，并且都运行良好。我提到它`func`使用了一个辅助`test`函数（但我什至尝试了一个带有 的示例，并且没关系）；就这样，我的真实程序可能会导致问题。`catch``throw``(catch 'test (throw 'test 0))`

这是`elisp`：每个都`defun`以 开头`block`，并且所有函数都使用`return`，如下所示。

**[我从使用“ `defun`/ `block`”切换到“ `defun*`”]**

```
(defmacro 4+ (number)
  "Add 4 to NUMBER, where NUMBER is a number."
  (list 'setq number (list '1+ (list '1+ (list '1+ (list '1+ number))))))

(defmacro 4- (number)
  "Subtract 4 from NUMBER, where NUMBER is a number."
  (list 'setq number (list '1- (list '1- (list '1- (list '1- number))))))

(defun mesg (s &optional o)
  "Use ATAB to tabulate message S at 4-multiple column; next/prev tab if O=1/0."
  (when (null o) (setq o 0))
  (case o (0 (4- atab)) (1 nil))
  (message (concat "%" (format "%d" (+ atab (length s))) "s") s)
  (case o (0 nil) (1 (4+ atab))))

(defun* base ()
  (let (pack)
    (setq atab 0)
    (mesg "base->" 1)
    (setq pack (init))
    (mesg "<-base")))

(defun* init ()
  (mesg "init->" 1)
  (return-from init (progn (setq temp (func)) (mesg "<-init") temp)))

(defun* func (&optional pack)
  (mesg "func->" 1)
  (when (not (null pack)) (return-from func (progn (mesg "<+func") pack)))
  (when (< 0 (mod (random) 2)); stop case
    (return-from func (progn (setq temp (some)) (mesg "<-func") temp)))
  (setq pack (init))
  (case (mod (random) 2)
    (0 (return-from func (progn (mesg "<0func") pack)))
    (1 (return-from func (progn (setq temp (func pack)) (mesg "<1func") temp))) ; use tail-recursion instead of `while'
    (t (error "foo bar"))))

(defun* some ()
  (mesg "some->" 1)
  (return-from some (progn (mesg "<-some") (list 2 3 4))))

(base) 
```

`pack`变量是我的价值——`list`作为数据结构。我还使用`func`一个特殊的累积参数来重申自己（在尾递归调用中），这样我就避免了*“命令式”* `while`。

所以不是我所期望的（每个都由`>`配对`<`）

```
base->
    init->
        func->
            init->
                func->
                    some->
                    <-some
                <-func
            <-init
            func-> ; tail-recursion
            <+func
        <1func
    <-init
<-base 
```

我的程序的行为如下。

```
base
  -> init
       -> func
            -> init
                 -> func
                      -> some
                           |
 __________________________+
|
v
; control yielded here (to `base`) 
```

**[不再]**

为什么控制权*过早*地回到程序的开头，而不是在第一次调用时继续`func`，`return`从第二次调用 via开始`init`？

感谢任何帮助，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:40:00.977

查看您的代码，我不清楚`func`. 如果块包含整个`func`定义，那么是的，控件`func`在返回时到达，但块被完全跳过，因此函数完全，并一直返回到它被调用的地方（最终`base`）。可能是这样吗？

如果是这样，您必须将要在 return 之后执行的代码放在块之后。

**编辑**：再次查看您的代码，我认为您没有使用`return`应该使用的 。例如在`init`你有

```
(block nil
 ...

 (return (func ...))) 
```

这`return`“取消”了该块，并且与根本没有该块具有相同的效果，*除非*在 " " 中调用的某些函数`...`确实有 a`return` *而没有*a `block`。所以`return`这里取消了可能的返回点`func`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:58:48.100

感谢您的回答：将我尝试的那些消息插入到我的程序中，就像我为解释添加的代码一样，结果表明 没有`defun*`问题`elisp`，但是我在设计中犯了一些错误。***

# java - Java的指纹读取器

> ID：13913552
> 
> 赞同：1
> 
> 时间：2012-12-17T11:45:03.190
> 
> 标签：java, fingerprint

我想在我的`Java`应用程序中使用指纹读取器，我想购买任何指纹读取器设备，但我不知道这些，

*   数据保存在哪里？
*   我可以在 Java 应用程序中使用它吗？
*   你知道这方面的任何文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:47:50.880

这可能对您有用： [http ://en.pudn.com/search_db.asp?keyword=java+fingerprint](http://en.pudn.com/search_db.asp?keyword=java+fingerprint)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:48:08.580

> 您将从指纹读取器设备手册中获得更好的想法。
> 您可以知道如何从设备连接和读取数据

# visual-studio-2010 - 如何检查相同数组元素的碰撞检测？

> ID：13913556
> 
> 赞同：0
> 
> 时间：2012-12-17T11:45:20.023
> 
> 标签：visual-studio-2010, cocos2d-iphone, cocos2d-x

我为一些鸟儿飞翔的游戏编写了代码。我创建了数组`CCSprite`并将它们添加到场景中。现在它为每个鸟对象分配一个调度程序，以便在屏幕中随机方向移动。所有人都在工作。现在我在鸟类碰撞中遇到了麻烦。

我正在尝试`CCARRAY_FOREACH`在数组上运行一个循环，但它给出了错误。

```
 0xC0000005: Access violation reading location 0xfeeefeee. 
```

请帮助我如何在数组元素移动时获得碰撞检测。`updateCollison`方法未执行。

我的代码是：

```
#include "HelloWorldScene.h"

using namespace cocos2d;

CCScene* HelloWorld::scene()
{
    CCScene * scene = NULL;
    do 
    {
        // 'scene' is an autorelease object
        scene = CCScene::create();
        CC_BREAK_IF(! scene);

        // 'layer' is an autorelease object
        HelloWorld *layer = HelloWorld::create();
        CC_BREAK_IF(! layer);

        // add layer as a child to scene
        scene->addChild(layer);
    } while (0);

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
bool HelloWorld::init()
{
    //srand(time(NULL));
    CCSize size = CCDirector::sharedDirector()->getWinSize();
    birds = CCArray::create();
    for(int j = 0; j<5; j++){
        CCSprite *bird = CCSprite::create("twitter_square.png");
        bird->setTag(j);
        int max = rand() % 480;
        int min = rand() % 320;
        bird->setPosition(ccp(max, min));
        this->addChild(bird);
        birds->addObject(bird);
        bird->schedule( schedule_selector(HelloWorld::moveBird), 5.0 );
bird->schedule( schedule_selector(HelloWorld::updateCollison), 5.0 );
    }

    return true;
}

void HelloWorld::menuCloseCallback(CCObject* pSender)
{
    CCDirector::sharedDirector()->end();
}

void HelloWorld::moveBird(float dt)
{
    CCSize size = CCDirector::sharedDirector()->getWinSize();
    int max = rand() % (int)size.width;
    int min = rand() % (int)size.height;
    CCActionInterval*  actionTo = CCMoveTo::actionWithDuration(5, ccp(max,min));
    this->runAction(actionTo);
}

void HelloWorld::updateCollison(float dt)
{
    CCObject *obj;
    for(int i=0; i < birds->count(); i++)
    {
        CCLOG("$$$$$$$$$$$$$$$$$$$$$$$");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:07:35.430

最好在一个更新函数中做事......例如在调用 MoveBird 函数中进行一次更新，该函数将包含您的移动鸟代码

其次现在调用检查碰撞功能

```
void update (float dt) {

MoveBird();     // Move how many birds you want to move 
CheckCollision();

} 
```

现在如何检查你的鸟的碰撞

在你的碰撞函数 forLoop 你的鸟数组检查

```
if(mBirdsArray[i]->boundingBox().containsPoint(mBirdsArray[j]->getPosition())) 
```

反之亦然...

我希望这会奏效..可能有比这更好的逻辑..

# tsql - 当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

> ID：13913559
> 
> 赞同：0
> 
> 时间：2012-12-17T11:45:37.323
> 
> 标签：tsql

我有以下查询：

```
SELECT QuoteReference,
       CreatedDate,
       StartDate,
       EndDate,
       Operation,
       TableName,
       OccurredAt,
       PerformedBy,
       FieldName,
       OldValue,
       NewValue,
       Quotes.CreatedByID,
       CompletedDate,
       EmailAddress = (SELECT ContactDetails.EmailAddress,
                              QuoteReference,
                              ContactDetails.MobilePhoneNumber
                       FROM   ContactDetails,
                              Quotes,
                              QuoteCustomers
                       WHERE  ContactDetails.ID = Quotes.ID
                              AND QuoteCustomers.QuoteID = ContactDetails.ID)
FROM   Quotes
       JOIN Audit
         ON Quotes.ID = Audit.RowId
WHERE  Quotes.CreatedDate BETWEEN '20100401' AND '20120830'
       AND PaymentReference IS NOT NULL
       AND Audit.OccurredAt > Quotes.CompletedDate
       AND Quotes.EmailAddress < > NULL
       AND TableName = 'Quotes'
       AND Quotes.PolicyReference = NULL
       AND Quotes.CreatedByID < > 2 
ORDER BY  Audit.OccurredAt desc 
```

执行时出现此错误：

当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

在子查询中添加第二个 where 子句后。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:51:28.653

您正在将三列值选择到一个变量中。

改变

```
EmailAddress = (SELECT EmailAddress,
                          QuoteReference,
                          ContactDetails.MobilePhoneNumber
                   FROM   ContactDetails,
                          Quotes,
                          QuoteCustomers
                   WHERE  ContactDetails.ID = Quotes.ID
                          AND QuoteCustomers.QuoteID = ContactDetails.ID) 
```

至

```
EmailAddress = (SELECT EmailAddress
                   FROM   ContactDetails,
                          Quotes,
                          QuoteCustomers
                   WHERE  ContactDetails.ID = Quotes.ID
                          AND QuoteCustomers.QuoteID = ContactDetails.ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:52:46.703

您的子查询必须返回 ONE 行和 ONE 列，因此它应该如下所示：

```
 EmailAddress = (SELECT TOP 1 ContactDetails.EmailAddress
                   FROM   ContactDetails,
                          Quotes,
                          QuoteCustomers
                   WHERE  ContactDetails.ID = Quotes.ID
                          AND QuoteCustomers.QuoteID = ContactDetails.ID) 
```

# jakarta-ee - POJO 和 CDI bean 可以从同一个类中实例化吗？

> ID：13913564
> 
> 赞同：1
> 
> 时间：2012-12-17T11:46:21.893
> 
> 标签：jakarta-ee, java-ee-6, cdi, pojo

它可能是非常基本的......在 Java EE 6 环境中：

POJO 和 CDI bean 可以从同一个类中实例化吗？

*CDI* bean 和*POJO*之间的根本区别是什么？

可能这个问题对 Java EE 容器管理应用程序的初学者很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:46:21.893

是的。

基本上，POJO 通常使用**new**运算符实例化，而 CDI bean 由容器实例化（管理）。所以同一个类可以同时实例化 POJO 和 CDI bean。

# python - Python 中 scipy.stats.mstats.chisquare 和 scipy.stats.mstats 的区别

> ID：13913572
> 
> 赞同：0
> 
> 时间：2012-12-17T11:46:37.090
> 
> 标签：python, numpy

我正在比较两个分布，例如：

`group1 = [ 0, 0, 0, 1, 11, 11, 13, 12]`

`group2 = [ 0, 0, 0, 0, 5, 11, 18, 14]`

我的分布没有很多元素，我不确定卡方是否是最好的方法，但从我读到的内容来看，我认为它仍然是我见过的最好的测试。

问题是，无论我尝试哪种卡方，我都会得到不同的结果：

所以如果我使用：

```
import numpy as np

import scipy.stats.mstats as mst
mst.chisquare(np.array(group1), np.array(group2)) 
```

答案将是：`(8.874603174603175, 0.26178489290758555)`

如果我使用：

```
import scipy.stats as stat
stat.chisquare(np.array(group1), np.array(group2)) 
```

我会得到：`(nan, nan)`

如果我删除两个组中所有为 0 的元素，以便我的组现在看起来像这样：

`group1 = [ 1, 11, 11, 13, 12]`

`group2 = [ 0, 5, 11, 18, 14]`

使用：

```
mst.chisquare(np.array(group1), np.array(group2)) 
```

会给我：`(8.874603174603175, 0.06431137995249224)`

我对这种模棱两可感到很困惑。我的分布的真实 p 值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:18:45.087

我猜这是`scipy.stats.mstats`模块中的一个错误。`mstats`应该比 . 更好地处理屏蔽数组（具有无效值的数组）`stats`。然而，在这种情况下，它似乎没有正确计算自由度 (DOF) 的数量：卡方统计量（的第一个返回值`chisquare`）在去除零之前和之后是相同的，因此只有自由度可以改变。

请注意，在两个数组中删除 0 后，您仍然会得到无穷大，因为要计算卡方统计量，您必须除以频率`group2`（`group2`在您的数组中，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test#Calculating_the_test-statistic)）。`mstat`删除这些无效值，但它不会相应地调整自由度（因为元素较少，自由度应该因元素的差异而减少）。

我希望它能澄清一点。请考虑向 scipy 讨论列表发送错误报告。

# php - PHP，存储属性..数组中的对象或值

> ID：13913573
> 
> 赞同：1
> 
> 时间：2012-12-17T11:46:45.560
> 
> 标签：php, oop

我刚刚开始一个具有产品类的新项目。一个对象将代表一个产品。

每个产品都有任意数量的未定义属性（可能是颜色，可能是 foobar 等）。产品对象将包含任一属性对象的数组：

```
class attr {
  var type;  // string, float, int etc..
  var name;  // the name
  var value; // the value
  ...

(and then the product object has an array of these attr objects..) 
```

或者我应该为每个产品存储一个数组：

```
class product {
  var attributes = array('colour' => 'red', 'weight' => '11')
  ... 
```

显然，如果需要，我可以将数组设为 2d 并存储属性类型。

我主要担心的是产品可能有 20 个左右的属性，并且我正在创建的网站有很多用户，这可能会占用大量内存 - 这是正确的，还是只是一个神话？

我只是想知道是否有人知道这种事情的最佳实践是什么。对象方法感觉更正确，但对我来说有点浪费。有什么建议/想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:03:18.807

作为一般建议，我反对早期优化，特别是如果这意味着将您的 OO 模型转换为隐式（非建模概念）事物，如数组。虽然我不知道您将使用它们的上下文是什么，但将属性作为一等公民将允许您在需要时将行为委托给它们，从而使 IMO 设计更加简洁。从我的角度来看，如果您需要操作属性、它们的类型等，您将主要受益于使用第一种方法。

话虽如此，有很多框架使用数组方法通过使用数组和[`_get()`/`_set()`](http://php.net/manual/en/language.oop5.overloading.php#object.get)魔术方法来动态填充对象。例如，您可能想看看[Elgg](http://docs.elgg.org/wiki/Main_Page)如何处理类的`$attributes`数组`ElggEntity`以查看它的工作情况并获得一些想法。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:55:08.857

AFAIK，没有最佳实践。

如您的问题中所述，您有两个选项，每个选项都有其 cos'n'pros。它所依赖的只是产品和属性的存储方式/位置 - 如果它在 MySQL 数据库中，则应该没有区别，因为您可以从数据库中获取数组或对象。

如果您对每件简单的事情都使用类，那么对属性也使用类，如果您只对大对象使用类，那么使用数组。这取决于您的喜好。使用类或数组时不会有任何显着的内存消耗差异，并且绝不会在拥有 20 个左右的属性时出现。

如果它在我身上，我会选择属性的类和类数组，因为如果我需要以某种方式扩展属性，它会在未来提供更多优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T12:09:34.880

如果 Product 类确实需要灵活并容纳任意数量的属性，我会很想使用 __get 和 __set 例如

```
class Product {

    protected $attributes = array();

    public function __get($name) {

        if (array_key_exists($name, $this->attributes)) {
            return $this->attributes[$name];
        }
    }

    public function __set($name, $value) {

        $this->attributes[$name] = $value;
    }
}

$o = new Product();
$o->foo = 123;
var_dump($o->foo); 
```

如果您的解决方案需要，这将非常适合在未来实现 ArrayAccess 和其他 SPL 迭代器类型类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:59:40.330

我认为考虑如何将它们存储在数据库中更为重要。我猜您想进行搜索，您可以在其中说出类似的内容，`I want a RED HAT size 12`然后您必须能够找到所有具有与此匹配的属性的产品。这都是在数据库级别上完成的。首先在 PHP 类中加载所有产品然后搜索不是一个好主意。

一旦你得到你想要显示的内容（搜索结果、概览页面、详细信息），然后你加载带有属性的完整产品类。由于它的所有文本/数字，一次可能不会超过 100 个产品，因此在速度方面，您在 PHP 中选择什么并不重要。做你最喜欢的事。

在您的数据库中，这可能很重要（因为您始终使用所有产品）。确保将字符串/数字/布尔值等分开并放置正确的索引，否则可能会导致性能下降。

# jquery - 如何以及在何处编写 if 语句来检查 length()

> ID：13913577
> 
> 赞同：1
> 
> 时间：2012-12-17T11:46:57.547
> 
> 标签：jquery, html

下面我有一段代码，它显示所选答案按钮的复选框并计算所选答案按钮的数量。

```
function updateAnswer(context, iQuestionIndex, bDisableAppend) {
    var _sCurrQ_Class = 'q_' + iQuestionIndex;
    var _oCurrAnswerContainer = jQuery('#answer_selections .' + _sCurrQ_Class);
    if (!_oCurrAnswerContainer.length) {
        _oCurrAnswerContainer = jQuery(document.createElement('div')).addClass(_sCurrQ_Class);
        !bDisableAppend && jQuery('#answer_selections').append(_oCurrAnswerContainer);
    }

    _oCurrAnswerContainer.html('');

    var value, id;
    // loop through all buttons with 'on' status and their info to the current answer container
    $('.answerBtnsOn', context).each(function(i, btn) {

        var $btn = $(btn);
        value = btn.value;
        id = $btn.attr('id');

        var n = $("input[name='value[" + id + "]']").length;
        var hid = "hidden" + id + n + "value";    
        $(btn).attr("data-hid", hid);

        if (!bDisableAppend) {
            // append those values to the form
            var input = '<input type="checkbox" id="' + hid + '" name="value[' + iQuestionIndex + '][]" value="' + value + '" checked /><label for="' + hid + '">' + value + '</label>';
            _oCurrAnswerContainer.append(input);
        }
    });        
} 
```

但是我对回答按钮数量的计数有一点问题。如果选择的选项类型是“真或假”或“是或否”之外的任何东西，我只想计算答案按钮的数量。我的问题是我在哪里以及如何为此编写适当的 if 语句？

我在这里有一个jsfiddle：

[http://jsfiddle.net/7sARw/25/](http://jsfiddle.net/7sARw/25/)

有很多代码，但我尽量减少代码。

要使用小提琴：

1：打开小提琴并单击应用程序中的“打开网格”并选择选项“3”。然后点击“添加问题”按钮。

2：您将看到已附加了一个表格行。在附加的表格行中单击任何字母按钮，您将看到对于您打开的每个字母按钮，在上面的文本框中，它会计算打开了多少个按钮。

3：在附加的行中单击“Open Grid”链接并选择“True or False”选项。现在对于此选项，答案文本的数量应始终为 1，无论打开或关闭多少个答案按钮，它都应始终为 1。但问题是，如果您打开“真”或“假”按钮并打开它后退，它会回到 0，因为没有打开应答按钮。我不希望这种情况发生，因为选项是“True or False”或“Yes or No”，它们的两个选项的文本框应该始终是`1`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:33:08.087

嗨，请转到以下链接[http://jsfiddle.net/7sARw/26/](http://jsfiddle.net/7sARw/26/)

我所做的解释： - 每当用户单击真或假到行元素时，答案仅保持“1”。

所做的更改：- 转到 updateAnswer 函数并查看

```
 if (btn.id == "answerTrueRow" || btn.id == "answerFalseRow")
return; 
```

它不允许 btn 函数做出任何更改来回答。享受..

# iphone - *可编辑* UITableviewCell 的标签

> ID：13913578
> 
> 赞同：0
> 
> 时间：2012-12-17T11:46:59.333
> 
> 标签：iphone, xcode, uitableview, uilabel

我问这个问题是因为我没有得到任何正确/相关的答案（意味着我得到了答案，但不是我想要的形式）。希望你们中的任何人都可以为我提供正确的解决方案。

好的，我的问题是关于可编辑标签的。我有一个表格视图，其中包含自定义单元格，每个单元格中有 6 个不同的标签。

**我想要的是 ：**

> 1）我想在用户触摸它时编辑标签（将保存更改）。
> 
> 2）当按下某个保存按钮时，我希望将表视图中的所有值保存在一个数组中。

我附上截图（希望它可以帮助你理解我的问题）。

![在此处输入图像描述](../Images/9cdc52e1c6be87265bdc9f6b5db0da16.png)

**笔记 ：**

在上面的屏幕截图中，我想要的是当用户触摸**“棉”字**时，它是可编辑的，当用户触摸下一个字（假设“托盘”）时，必须保存第一个字（意思是“棉”）的变化. 将有一个名为**“保存”**的按钮（不在屏幕截图中）。当用户按下“保存”按钮时，所有的值都`Tableview`应该保存在某个数组中。

如果您可以为我提供相关代码的答案，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:20:57.647

您必须进行子类`UItextField`化，以便它们可以存储 rowNumber 和 productName。当用户点击它时更改 UITextField 外观，您可以捕捉到触摸事件`textFieldDidBeginEditing,`

并将特定行的数据保存在字典中，然后可以将该字典保存在指向表行的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:55:32.103

首先，在这种情况下，最好忘记使用标签，而使用 UITextField。如果您实现 UITextFieldDelegate 的方法，它们会在您开始编辑或完成时通知您。

所以这就是我要做的。创建一个 UITableViewCell 的子类，让它看起来和你想要的完全一样。此外，它还应该有一个 NSIndexPath 属性，因此您将始终准确地知道哪一行被编辑。（如果您的单元格与您提供的屏幕截图中的单元格相似，则此步骤应该相当简单）

此外，它应该实现 UITextFieldDelegate 协议，并创建一个让您知道单元格何时被编辑的协议，以便您可以保存它的内容。

在您的控制器中，您应该创建一个临时数组，该数组将作为您的数据源的副本。当单元格被编辑时，您应该更新临时数组中的信息。按保存时，您应该保存此数组并将其设为数据源。否则，只需将其设置为 nil，ARC 就会处理它。

我现在不能为你提供代码，但是一旦你理解了逻辑，编写它应该不难。

# visual-studio-2012 - 检索 Microsoft Surface 的唯一设备 ID

> ID：13913579
> 
> 赞同：1
> 
> 时间：2012-12-17T11:47:01.137
> 
> 标签：visual-studio-2012, windows-store-apps

我正在为 Windows 8 开发一个应用程序，并在 Microsoft 的 Surface 上对其进行测试。有谁知道如何检索 Surface 的唯一设备 ID？

就像我们为 Windows Phone 所做的那样，使用`Microsoft.Phone.Info`命名空间检索其唯一的设备 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:14:13.753

我使用`Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null).Id`转换为字符串，详细信息位于[http://coding.kulman.sk/how-to-uniquely-identify-a-windows-8-device/](http://coding.kulman.sk/how-to-uniquely-identify-a-windows-8-device/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:36:17.343

AFAIK，您会找到的最接近的东西（对于 Windows 应用商店应用程序）是[ASHWID](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)，它不是特定于设备的，而是特定于应用程序+设备的。在加权构成 ASHWID 的不同因素方面，您可以提供许多选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T12:57:54.340

EasClientDeviceInformation esClientDeviceInformation=new EasClientDeviceInformation(); var localDeviceID=esClientDeviceInformation.Id;

快乐编码:)

# c++ - STL向量推回和设定值之间的性能差异

> ID：13913583
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:47:29.977
> 
> 标签：c++, stl, vector, performance

我有一个数组，比如 ARR，并且 ARR 中的对象总数是已知的。我想将 ARR 中每个对象的属性复制（放入）到 STL 向量中，例如 VEC。

一种方法是遍历 ARR

```
VEC.pushback(ARR[i].att); 
```

另一种方式是

```
VEC.resize(ARR.size());
VEC[i] = ARR[i].att; 
```

它们对运行时性能有影响吗？哪一个更好？谢谢。

跟进：我想为有兴趣的人提供一些实验结果。我通过将 50000 个整数放入 STL 向量中尝试了 (1) resize() + '=' 和 (2) reserve() + push_back() 方法。

```
(1) takes 0.000201s;
(2) takes 0.000229s. 
```

*   两者都是用 g++ -O3 编译的，我运行了几次程序。
*   (1) 始终优于 (2)。
*   (1) 有额外的分配，因此在空间方面占用了更多的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:49:45.940

在添加新项目时调用`resize()`（或`reserve()`）之前可能会节省一些调整大小。无论如何，您已经知道项目的数量，所以它更有意义。

有了`resize()`你将有一个默认的构造步骤，我会去`reserve()`防止重新分配和`push_back()`（在 C++11 中，`emplace_back()`如果你的编译器支持它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:05:58.977

我认为您应该尝试使用 QueryPerformanceCounter() 函数或在执行前启动计时器并在两种情况下执行后停止。您可以看到时间上的差异，并可以评估每个场景需要多少时间，然后决定哪个是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:09:20.220

如果你想将数组的数据复制到向量，你可以简单地做 VEC.assign(ARR, ARR + ARR_size) 如果 ARR 是一个简单的数组，或者 VEC.assign(ARR.begin(), ARR.end()) 如果 arr 是任何其他序列这将是非 POD 类型的最快方式

# git - Git：即将分叉我自己的项目

> ID：13913586
> 
> 赞同：4
> 
> 时间：2012-12-17T11:47:33.617
> 
> 标签：git, branch

我是一个非常基础的 git 用户；我基本上只使用命令`git add -a`（在修改它们后添加文件），`git commit -m "what I did"`然后`git push`（将其推送到我的服务器）。

现在我想对我的代码库做一些*非常*激烈的事情。一些可能不起作用的东西——我将不得不回到我原来的位置。

我怎么做？我要创建一个“分支”吗？还是标签？或者是其他东西？

我追求的是一组带有简单解释的简单命令。然后返回到原来的 HEAD，或者然后（也许）将更改合并到 HEAD（不会改变）

默克。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:51:59.840

你需要一个分支。

```
git checkout -b nameofyournewbranch 
```

这会将您当前的分支（默认名称为“master”）签出为具有您指定名称的新分支。您现在所做的任何提交都将在新分支上。如果您想离开它并回到原来的位置：

```
git checkout master 
```

回到你的新分支：

```
git checkout nameofyournewbranch 
```

如果要将分支合并到主代码库中：

```
git checkout master
git merge --no-ff nameofyourbranch 
```

--no-ff 意味着你会看到它从 master 分支出来然后分支回来，让你可以跟踪不同的特性。

要查看您在做什么，请获取某种 git 源代码树查看器，例如[source tree](http://www.sourcetreeapp.com/)、 gitk 等。如果您可以直观地看到它们，则更容易理解分支在做什么。

**更新：** 要检查合并前会发生什么，请在与 master 相同的位置创建一个临时分支并合并到那里：

```
git checkout -b tempbranchname master
git merge --no-ff nameofyourbranch 
```

如果您喜欢它，请将其合并到 master 中，就好像您首先在 master 上做了一样：

```
git checkout master
git merge tempbranchname 
```

如果不这样做，只需将其删除：

```
git checkout master
git branch -D tempbranchname 
```

-D 表示即使没有合并到 master 也删除。通常使用 -d ，因为如果您尝试删除将丢失的未合并内容，则会收到警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:55:26.810

您可以执行以下操作：
1) 创建新分支。然后将其合并到您的主分支。

```
git branch newbranch
git checkout newbranch
...
git checkout master
git merge newbranch 
```

2）您可以提交到您的主分支，然后撤消您最近的提交。

但我认为最好的方法是分支。

您可以阅读这篇文章以了解有关分支的更多信息：
[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:55:02.163

在这里你有几个有用的备忘单：[一个是 HTML 的](http://ndpsoftware.com/git-cheatsheet.html)，[一个是 PDF 的](http://zrusin.blogspot.com.es/2007/09/git-cheat-sheet.html)

基本命令是

显示所有现有的分支

```
git branch 
```

创建新分支

```
git branch BRANCHNAME 
```

将工作副本更改为另一个分支

```
git checkout BRANCHNAME 
```

将另一个分支合并到当前分支

```
git merge BRANCHNAME 
```

# c# - azure blob 存储“找不到有效的帐户信息组合”

> ID：13913589
> 
> 赞同：27
> 
> 时间：2012-12-17T11:47:42.733
> 
> 标签：c#, azure, connection-string, azure-blob-storage

我有一个使用 Azure 网站预览运行的 MVC4 项目。

我的问题是，当我将网站部署到天蓝色时，我无法将 blob 上传到我的 blob 存储容器中，但是当我在本地调试时上传工作正常。

这是我在部署时得到的异常和堆栈跟踪，我尝试上传到容器：

> 未找到有效的帐户信息组合。在 Microsoft.WindowsAzure.Storage.CloudStorageAccount.b__0(String err) 在 Microsoft.WindowsAzure.Storage.CloudStorageAccount.TryParse(String s, CloudStorageAccount& accountInformation, Action`1 错误) 在 Microsoft.WindowsAzure.Storage.CloudStorageAccount.Parse(String connectionString)在 MyProj.Controllers.ImageController.Upload（ImageViewModel 模型）

特别是根据堆栈跟踪，它是失败的 .Parse 方法。

我用来连接到 blob 存储的代码直接来自 azure how-to 文档：

```
string connectionString = ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString;
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient(); 
```

再一次，当我在我的开发盒上本地运行时，这工作正常，我可以毫无问题地成功上传。然而，它在部署时给了我这个错误，我试图做同样的事情。

我猜我的 storageConnectionString 在网络部署发布过程中被弄乱了，但我不确定如何解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-16T15:47:16.703

请确保

1）您正在使用正确的诊断协议（双击角色->配置选项卡->选择配置->在“诊断”下，单击省略号->尝试单击确定...如果它给出了您必须使用https，将连接字符串更改为https）

和

2）不允许有空格......即 `UseDevelopmentStorage=true;DevelopmentStorageProxyUri=https://127.0.0.1` 代替 `UseDevelopmentStorage=true; DevelopmentStorageProxyUri=https://127.0.0.1`

（注意分号后的空格）

检查“设置”选项卡上所有连接字符串中的 https 和空格

**- -编辑 - -**

将“https”放入实际上为我们搞砸了一切。Worker 角色会抛出异常（“Handshack 由于意外的数据包格式而失败。”），然后在未知和销毁之间循环。删除了“https”中的“s”，并确保没有空格，瞧。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-30T08:20:24.263

获取 CloadStorageAccount 实例的另一种方法是这样做

```
StorageCredentials credentials = new StorageCredentials(accountName, accountKey);
CloudStorageAccount storageAccount = new CloudStorageAccount(credentials, true); 
```

这应该可以帮助遇到此解析问题的任何人。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-17T18:27:58.463

将存储连接字符串存储在 AppSettings 中，而不是 ConnectionStrings 部分。并且，在此处粘贴实际的连接字符串将帮助我们帮助您（您可以将***用于帐户密钥）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T12:16:14.273

我认为，这不可能是 Sandino Di Mattia 所表达的问题的原因。我在将 SDK 升级到 2.0 时也遇到了同样的问题，结果发现 API 的连接字符串解析器不再允许连接字符串中出现空格，并且在任何地方都没有提到它。如果这种改变是故意的，我会称之为讨厌的举动......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-08T06:59:37.547

我收到此错误是因为在[Blob SAS URL](https://docs.microsoft.com/en-us/azure/storage/common/storage-configure-connection-string#account-sas-example)之前错过了前缀*BlobEndpoint=*：

错误*的 appsettings.json*

```
{
  "TestBlobWriter": {
    "ConnectionString": "https://test.blob.core.windows.net/test-container?sp=*&st=*&se=*&spr=*&sv=*&sr=*&sig=*",
    "ContainerName": "test-container"
  }
} 
```

正确*的 appsettings.json*

```
{
  "TestBlobWriter": {
    "ConnectionString": "BlobEndpoint=https://test.blob.core.windows.net/test-container?sp=*&st=*&se=*&spr=*&sv=*&sr=*&sig=*",
    "ContainerName": "test-container"
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-24T16:11:20.673

还要注意，连接字符串中的大小写很重要。在大型合并导致某人在我的 Web.config 中将“AccountName”更改为“Accountname”之前，我遇到了此错误。使用正确的外壳修复了错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-14T05:05:06.573

如果您非常确定，从 Azure 服务复制的连接字符串与您粘贴的相同，那么请检查您是否给了任何回车/空格以方便阅读，这也是导致您遇到的问题的原因之一有经验的。我试图给@scottndecker +1，但因为我没有 15 名声望所以不能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-17T23:04:17.977

使用 proxyUri 时不要忘记包含“https://”或“https://”。喜欢：

`UseDevelopmentStorage=true;DevelopmentStorageProxyUri=https://127.0.0.1`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-01T13:47:15.160

我将分享我的问题的解决方案。我在想括号必须保留并在其中输入信息。去掉括号后，我的问题就解决了。

从：

```
string eventHubName = "{Event Hub name}"; 
```

至：

```
string eventHubName = "Event Hub name"; 
```

这同样适用于：eventHubConnectionString、storageAccountName 和 storageAccountKey

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-12T14:48:54.503

我得到这个是因为我不小心在字符串的末尾添加了一个换行符 (\r\n)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-16T05:19:01.780

当我使用 @Microsoft.KeyVault(SecretUri=https...) 将存储连接字符串从应用程序设置文字迁移到 keyvault 引用时遇到此错误我创建了一个新的函数应用程序并忘记打开系统分配身份并授予应用程序访问密钥库的权限。因此，症状是未定义的应用程序设置值 - 存储连接尝试失败。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-19T12:47:22.710

我收到此错误是因为我使用了错误的 nuget 包，（我使用的是 dot net 4.6.1）

错误的包是：WindowsAzureStorage.Helper

正确的包是：WindowsAzure.Storage

并确保使用命名空间： using Microsoft.WindowsAzure.Storage;

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-24T10:08:31.517

要在 azure 上解决此问题，请不要使用默认字符串，而是使用简约版本，例如：

```
<add name="StorageConnection" 
    connectionString="DefaultEndpointsProtocol=https;AccountName=name;AccountKey=yourkey;EndpointSuffix=core.windows.net" /> 
```

没有空格或换行符！！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-19T10:34:36.047

我面临同样的问题。您需要使用`Microsoft.WindowsAzure.Storage`名称空间并确保连接字符串中没有多余的空格。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-08-10T05:33:37.903

我也遇到了同样的问题，我在命名空间中找到了它。CloudStorageAccount 类存在于两个命名空间中

```
using Microsoft.WindowsAzure;

using Microsoft.WindowsAzure.Storage; 
```

所以我只是删除了`WindowsAzure`命名空间并添加`WindowsAzure.Storage`到我的代码中。

以前的代码：

```
using Microsoft.WindowsAzure; 
```

固定代码：

```
using Microsoft.WindowsAzure.Storage; 
```

# mysql - Mysql链选查询

> ID：13913595
> 
> 赞同：1
> 
> 时间：2012-12-17T11:48:12.500
> 
> 标签：mysql, database

我有一个带有表格的数据库，看起来有点像这样：

```
Root   |   Connector
  A    |      B
  B    |      C
  C    |      D
  D    |      E
  E    |      - 
```

所以我想检索任何给定根的链，直到连接器为空白

例如：A 链表示 a->B->C->D->E，而 C 链表示 C->D->E

我正在使用mysql数据库。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:27:15.027

我只是尝试在 Mysql 中使用循环结构并获得了成功。只发帖分享——

```
CREATE PROCEDURE `root_connect`(IN init char(1),OUT str char(15))
BEGIN
    set @startChar:=(select connector from tableName where root = init);
    set @endloop := "no";
    set @fullchar:= @startChar;
    set @newchar:= "";  
    if (@startChar !="-" OR @startChar =null) then 
        WHILE (@endloop = "no") DO                  
            set @newchar :=(select connector from tableName where root = @startChar);       
            if(@newchar = '-') THEN
                set @endloop := "yes";
            else
                set @fullchar:= concat(@fullchar,"-",@newchar);
            end if;         
            set @startChar := @newchar;     
        END WHILE;
    end if;
        select @fullchar;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:50:21.023

由于 MySQL 不允许用户创建递归函数，让我向您展示使用存储过程：

假设您正在处理的表名为“test”。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS build_chain$$
CREATE PROCEDURE build_chain(init CHAR(1))
BEGIN
    IF init != '-' THEN
        SET @r := (SELECT DISTINCT(root) FROM test WHERE root = init);
        SET @search_type := TRUE;
        SET @result := @r;
    END IF;

    SET @r := (SELECT DISTINCT(connector) FROM test WHERE root = @r AND connector != '-');
    SET @result = CONCAT_WS('->', @result, @r);
    SET @search_type = IF(@search_type, FALSE, TRUE);
    IF @r IS NOT NULL THEN CALL build_chain('-'); ELSE SELECT @result AS result_chain; END IF;

END$$

DELIMITER ; 
```

用法：

```
SET max_sp_recursion_depth = 255;
CALL build_chain('a'); 
```

结果（链）存储在@result 变量中。

注意：您也可以使用 MySQL 以外的编程语言构建链。

# java - 如何使用 Java 数组——从 Ruby 到 Java 的翻译

> ID：13913600
> 
> 赞同：2
> 
> 时间：2012-12-17T11:48:26.743
> 
> 标签：java, ruby, arrays

我刚开始使用 Java，所以我正在转录我的一些 Ruby 内容。我有一个像这样的 Ruby 函数，它会生成一些看起来像 IPv6 地址的东西：

```
def generate_ip()
    list = ["a", "b", "c", "d", "e", "f", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0"]
    address = ""
    8.times do
        4.times do
            address << list.shuffle[5]
        end
        address << ":"
    end
    return address[0..-2].to_sym
end 
```

这个方法只需要一个字符串数组，然后反复将它们打乱，每次选择第 5 个元素来构造返回的字符串。

据我所知，Java 中没有用于字符串数组的“shuffle()”方法，所以我想我会自己编写。但后来我开始完全陷入子问题，例如：

1.  显然没有内置的方法可以从字符串数组中删除项目，这看起来很奇怪——对吗？我看到了其他几个 SO 帖子，其中对此功能的响应是 10 行代码块。所以我决定使用 ArrayLists，因为根据文档，它们有像 size()、get() 和 remove() 这样的合理方法，虽然......

2.  ...我还没有找到一种方法来使用文字实例化它们，或者使用单个方法调用添加多个项目。我看到的每个教程（包括官方的 Oracle Java 教程）都使用了对 ArrayList.add() 的多次调用。这不可能是这样做的，不是吗？

3.  等等

因此，在我进入子问题领域并提出 ​​50 个不同的问题之前，我想我会问如何解决最重要的问题。有没有一种简单的方法可以将上面的 Ruby 代码翻译成 Java？

FWIW，我正在进行的“洗牌”方法如下。我只是循环 array.length 次，每次将随机元素从旧数组复制/删除到新数组。

```
public ArrayList<String> shuffle(ArrayList<String> array) {
        Random generator = new Random();
        ArrayList<String> shuffled = new ArrayList<String>();

        for (int i = 0; i > array.size(); i++) {
            int index = generator.nextInt(array.size());

            String popped = array.get(index);
            array.remove(index);

            shuffled.add(popped);
        }

        return shuffled;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:50:39.493

如果您创建一个`List`（`ArrayList`或`LinkedList`），您可以使用[Collections.shuffle()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

ArrayList 和 LinkedList 都是 List 接口的实现。我怀疑这两种方法都可以满足您的需求，尽管 ArrayList 更可取（由数组支持）。这是[Java 列表教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)。

数组在 Java 中是固定长度的，而 a`List`的大小是可变的，因此`List`通常更适合您的上述转换。要创建具有给定起始元素集的列表，请参见[Arrays.asList()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29)例如

```
List stooges = Arrays.asList("Larry", "Moe", "Curly"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:50:31.103

[`Collections.shuffle(List<?> list, Random rnd)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)java中提供的内置库。

> 使用指定的随机源随机排列指定的列表。假设随机性的来源是公平的，所有排列都以相同的可能性发生。

[打开jdk代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.shuffle%28java.util.List,java.util.Random%29)。

# java - 自定义 xml relativelayout 包含多次使用的视图

> ID：13913606
> 
> 赞同：1
> 
> 时间：2012-12-17T11:48:48.207
> 
> 标签：java, android, xml

我需要一些关于我正在制作的 android 应用程序的帮助，让我解释一下：

**当前解决方案：工作但不是最佳的**

在我的 XML 中，我有一个`TableLayout`定义。我以编程方式将 4 个视图添加到一行 ( `RelativeLayout`)，然后将此行添加到`TableLayout`. 这 4 个视图最多可以有 25 行。这工作正常。但是我在为多种布局设计这些样式时遇到了问题。以编程方式设置边距、填充、权重都可以，但是有太多不同的设备，这使得它很难维护。（据我所知，a`TableRow`不允许向右对齐）具体来说，我想将最后一个视图对齐到屏幕的右侧。

**我想拥有什么：**

我将创建一个 XML 文件，其中包含这 4 个视图的布局（可能在 a 中`RelativeLayout`）。然后我想使用我定义的 XML 布局以编程方式添加这 4 个视图。

我可以做一些（伪代码出现）：

```
TextView1 = new TextView
TextView2 = new TextView
TextView3 = new TextView
TextView4 = new TextView
//Do stuff with the textviews
X = getXMLLayout(definedXMLlayout)
X.view(1) = TextView1
X.view(2) = TextView2
X.view(3) = TextView3
X.view(4) = TextView4
TableLayout.addRow(X) 
```

这样我就可以`RelativeLayout`在 .xml 文件中设置这些行的样式，并将它们放在`-large -land -xlarge`etc... 地图下。

所以我的问题是：我该怎么做？

或者，是否有更好的方法来设置多个以编程方式创建的视图的样式？

**编辑**：我确实阅读了有关此的其他 SO 文章，但大多数都没有准确描述我需要什么。我知道我可以在代码中添加所有视图，但是我还必须在代码中设置它们的样式，这是我不想要的。（而且我知道样式文件，但这对我来说也不是一个好选择）

总成绩

**编辑2：**

嗨什雷瓦，

基本上这个“有效”，我确实必须更改以下代码

```
final LayoutInflater lyInflater= (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

进入

```
LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

而不是LinearLayout，我正在使用RelativeLayout。但由于某种原因布局不正确，这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:id="@+id/rl_playerCard"
    android:layout_height="wrap_content"
    android:background="@drawable/playercard" >
<TextView
        android:id="@+id/tv_min"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        style="@style/txtMin"
        android:text="@string/str_min" />

    <TextView
        android:id="@+id/tv_plus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/tv_min"
        style="@style/txtPlus"
        android:text="@string/str_plus" />

    <TextView
        android:id="@+id/tv_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/tv_plus"
        style="@style/txtPlayercardGrey"
        android:text="name" />

    <TextView
        android:id="@+id/tv_score"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        style="@style/txtPlayercardGreen"
        android:text="score" />
</RelativeLayout> 
```

padding/margin 在我的 styles.xml 文件中完成，还有一些文本颜色和文本大小。3 个视图现在位于屏幕边缘的左侧，彼此重叠。tv_score 在右侧。所以这意味着边距/填充没有被考虑在内，也不是

```
android:layout_toRightOf 
```

知道为什么会这样吗？

grts

**编辑3**

这些是我定义的 4 种风格，我还有其他的都很好用。当在图形布局中查看 xml 布局时，一切似乎都很好。

```
<!-- playercard name -->
    <style name="txtPlayercardGrey" parent="@android:style/Widget.TextView">
        <item name="android:textSize">17sp</item>
        <item name="android:textColor">#666666</item>
        <item name="android:layout_marginLeft">15dp</item>
    </style>

    <!-- playercard score -->
    <style name="txtPlayercardGreen" parent="@android:style/Widget.TextView">
        <item name="android:textSize">17sp</item>
        <item name="android:textColor">#7DC500</item>
        <item name="android:layout_marginRight">15dp</item>
    </style> 

    <style name="txtMin" parent="@android:style/Widget.TextView">
        <item name="android:textSize">25sp</item>
        <item name="android:textColor">#ff0000</item>
        <item name="android:paddingLeft">15dp</item>
        <item name="android:paddingRight">15dp</item>
        <item name="android:layout_marginLeft">15dp</item>
        <item name="android:layout_marginRight">15dp</item>

    </style>

    <style name="txtPlus" parent="@android:style/Widget.TextView">
        <item name="android:textSize">25sp</item>
        <item name="android:textColor">#00a62b</item>
        <item name="android:paddingLeft">15dp</item>
        <item name="android:paddingRight">15dp</item>
        <item name="android:layout_marginLeft">15dp</item>
        <item name="android:layout_marginRight">15dp</item>
    </style> 
```

这是它的外观图片：http: [//i.stack.imgur.com/lNN05.png](http://i.stack.imgur.com/lNN05.png)

以及它的外观：http: [//i.stack.imgur.com/lNBYS.png](http://i.stack.imgur.com/lNBYS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:51:29.277

您可以为此使用通货膨胀

```
final LayoutInflater lyInflater= (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout lLayoutRow = (LinearLayout) lyInflater.inflate(
                R.layout.table_row_layout, null);

TextView tv1 = (TextView) lLayoutRow.findViewById(R.id.rowTv1);
TextView tv2 = (TextView) lLayoutRow.findViewById(R.id.rowTv2);
TextView tv3 = (TextView) lLayoutRow.findViewById(R.id.rowTv3);
TextView tv4 = (TextView) lLayoutRow.findViewById(R.id.rowTv4); 
```

编辑：

我用你的styles.xml 试过你的代码。我在我的主要布局中膨胀了它。它在 3.2" QVGA 模拟器中给了我以下输出。

![截屏](../Images/d044a558c949c76da0e45c0cc0eff499.png)

所以问题不在于样式。

# iphone - 如何在横向ios6中添加导航控制器

> ID：13913616
> 
> 赞同：0
> 
> 时间：2012-12-17T11:49:39.993
> 
> 标签：iphone, uinavigationcontroller, ios6

虽然我试图在基于横向的应用程序 ios6 应用程序中添加导航控制器，但它仅在图像中以纵向模式显示，我应该做些什么改变？![在此处输入图像描述](../Images/6cc50d0891821986775c58f94491a308.png)

在应用程序委托文件编码中，

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.window addSubview:[navigationController view]];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:01:03.903

选中此项以添加`UINavigationController`到您的应用中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // start of your application:didFinishLaunchingWithOptions
    // ...

    viewController = [[ViewController alloc]init];

    UINavigationController *navigationController = [[UINavigationController alloc]initWithRootViewController:viewController];
    [self.window setRootViewController:navigationController];
    [window makeKeyAndVisible];

    [viewController release];
    [navigationController release];

    return YES;
} 
```

# mysql - 如果单个查询有效，MySQL 提交会失败吗？

> ID：13913619
> 
> 赞同：0
> 
> 时间：2012-12-17T11:49:46.143
> 
> 标签：mysql, transactions, innodb, commit

> **可能重复：**
> [COMMIT 语句（在 SQL 中）会失败吗？如何？](https://stackoverflow.com/questions/3960189/can-a-commit-statement-in-sql-ever-fail-how)

如果事务中的所有查询都返回工作结果，提交查询会失败吗？

我`$ok = mysql_query($query);`对事务中的所有查询都有一个，但我没有一个，`$ok = mysql_query("COMMIT");`因为我认为如果单个查询有效。

使用innodb。

# c# - 使用 Floyd-Warshall 算法寻路迷宫

> ID：13913620
> 
> 赞同：0
> 
> 时间：2012-12-17T11:49:47.100
> 
> 标签：c#, algorithm, graph-algorithm, path-finding, floyd-warshall

我正在尝试使用弗洛伊德的算法来生成一个通过具有 98 个航点（位于每个迷宫顶点）的迷宫的最快路线矩阵。当算法运行时，它会填充两个矩阵 - 距离矩阵（两个节点之间的最佳距离）和路径矩阵（下一个节点要转到任意两个节点之间的最佳路径）。

距离矩阵使用我在之前代码中生成的邻接矩阵进行初始化。我还生成了一个数据结构，其中包含指向每个航路点的四个可能的相邻航路点的指针，但我没有在生成路径矩阵时使用此数据结构。

这是我的 C# 代码：

```
 // Initialize distance path matrix
        distanceMatrix = adjacencyMatrix;

        // Initialize path matrix
        int N = (WaypointList.Count);
        pathMatrix = new int[N, N];

        for (int i = 0; i < N; i++)
            for (int t = 0; t < N; t++)
                pathMatrix[i,t] = t;

        // Floyd-Warshall algorithm            
        for (int k = 0; k < N; ++k)
            for (int i = 0; i < N; ++i)
                for (int j = 0; j <= i; ++j)
                {
                    int currentCombo = distanceMatrix[i, k] + distanceMatrix[k, j];
                    if (currentCombo < distanceMatrix[i, j])
                    {                            
                        distanceMatrix[j, i] = distanceMatrix[i, j] = currentCombo;
                        pathMatrix[j, i] = pathMatrix[i, j] = k;
                    }
                } 
```

我相信我计算路径矩阵不正确，因为使用此代码生成的路径矩阵的机器人在大多数情况下都失败了（因为路径矩阵告诉要穿过墙等）。

我已经盯着这段代码看了好几个小时，我对自己做错了什么感到困惑。如何生成正确的路径矩阵以用于我的迷宫导航代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:08:50.610

设置时`pathMatrix[i, j] = k`，您假设这意味着从节点到的路径将从`i`节点`j`开始`k`。但实际上，这意味着从`i`到的路径`j`将`k`在某个时刻经过，不一定在第一步。

你需要做的是以下，假设有一个路径 from `i`to `j`：

```
target = j
while there is no edge from i to target:
    target = pathMatrix[i, target] 
```

This will set `target` to the next node to go to from `i`.

# ios - 将 Xcode 4.3 升级到 4.5 会再次下载整个包

> ID：13913626
> 
> 赞同：0
> 
> 时间：2012-12-17T11:50:14.377
> 
> 标签：ios, xcode, macos, upgrade

我正在从 Xcode 4.3.2 升级到 4.5.. 当我从 App Store 升级时，它会再次下载整个 1.6 GB..

如果不下载整个 Xcode dmg，就没有办法从 Xcode 内部升级吗？

我知道这在早期版本的 Xcode 中是不可能的。在 Xcode 4.3 中也是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:14:01.747

Xcode 版本现在是一个独立的 .app 包。我相信这意味着您可以轻松运行较旧的独立 .app XCode 包（即两者都可用），但缺点显然是必须下载整个应用程序。“新方式”的优点是它不那么混乱，缺点显然是下载所需的时间。

# objective-c - 将函数指针“转换”到objective-C中的块

> ID：13913627
> 
> 赞同：11
> 
> 时间：2012-12-17T11:50:14.963
> 
> 标签：objective-c, block, function-pointers, objective-c-blocks

我正在做一些从 Mono C# 到 Obj-C 的互操作并遇到了这个问题。C# 代码需要传递一个回调——它使用函数指针来完成。我可以从 Obj-C 端获取函数指针并调用它，一切正常。但是我现在需要将该函数指针作为回调提供给第三方 API，该 API 使用块作为回调。我希望第三方调用 C# 函数 - 所以在某种程度上我试图将函数指针转换为块以便第三方可以运行它，或者制作某种桥梁 - 创建我自己的运行块该函数指针并将其提供给第三方。我似乎无法找到一种方法来做到这一点 - 我将如何生成一个包含要运行哪个函数的信息的块，然后将其提供给第三方。也许我还有其他选择？

编辑：将函数放在全局变量中可能会起作用，但我希望能够拥有大量这些，因为第三方 API 是异步的，我不希望它调用错误的回调。

我试过的代码：

```
typedef void (*DummyAction)(char * result);
typedef void (^DummyBlock)(char * result);

@interface FunctionToBlock : NSObject
{
    DummyAction function;
    DummyBlock block;
}

- (id) initWithFunction: (DummyAction) func;
- (DummyBlock) block;
@end

@implementation FunctionToBlock : NSObject
- (id) initWithFunction: (DummyAction) func {
    if (self = [super init]) {
        function = func;
        block = ^(char * result) {
            function(result);
        };
    }
    return self;
}

- (DummyBlock) block {
    return block;
}
@end 
```

然后我运行这个

```
void RegisterCallback( char * text, DummyAction callback)
{
    FunctionToBlock *funcToBlock = [[FunctionToBlock alloc] initWithFunction : callback];
    funcToBlock.block(text);
} 
```

它因 BAD_ACCESS 而失败。也许我做错了什么，因为我对 Obj-C 还不是很精通。如果直接运行，我可以确认回调是正常的，并且正在调用块，但它在函数（结果）行上失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:24:20.247

关于什么

```
void (*myFunc)(int x); // ... your function pointer

void (^myBlock)(int) = ^(int x) {
    myFunc(x);
}; 
```

然后`myBlock`是一个块，它捕获函数指针的值并在块执行时调用函数。

* * *

**补充：**我的建议是，根据您的代码，使用@property（并假设您使用 ARC 编译）：

*FunctionToBlock.h：*

```
typedef void (*DummyAction)(char * result);
typedef void (^DummyBlock)(char * result);

@interface FunctionToBlock : NSObject
{
    DummyAction function; // Not really needed.
}

- (id) initWithFunction: (DummyAction) func;
@property(copy, nonatomic) DummyBlock block;   // "copy" is important here!

@end 
```

*FunctionToBlock.m:*

```
#import "FunctionToBlock.h"

@implementation FunctionToBlock : NSObject
@synthesize block = _block; // Can be ommitted if you use Xcode 4.4 or later.

- (id) initWithFunction: (DummyAction) func
{
    if (self = [super init]) {
        function = func; // Not really needed.
        self.block = ^(char * result) {
            func(result); // Use "func", not "self->function", to avoid retain cycle.
        };
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T00:27:32.027

为什么不只是一个简单的功能

```
typedef void (*DummyAction)(char * result);
typedef void (^DummyBlock)(char * result);

DummyBlock functionToBlock(DummyAction func) {
    return [[^(char * result) {
                 func(result);
             } copy] autorelease];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T13:54:36.573

块在引擎盖下是指向本地数据结构的指针。一旦您离开声明它的范围，一个块就会变得无效。范围是 init 中的 if 语句；一旦你离开，这个块就无效了。

您在这里以一种糟糕的方式打破了编码约定。首先，实例变量应该以下划线开头，这样每个人都可以看到你在做什么。最好在不声明实例变量的情况下使用属性。并且每个块属性都应该声明为“副本”。如果你这样做，一切都很好。

# javascript - 之前的 HTML5 输入范围样式

> ID：13913637
> 
> 赞同：3
> 
> 时间：2012-12-17T11:50:50.493
> 
> 标签：javascript, html, css

我目前正在使用以下代码设置 HTML5 输入类型范围的样式：

```
input[type="range"]{
    -webkit-appearance: none;
    -moz-apperance: none;
    width: 100%;
    height: 8px;
    padding: 0 20px;
    background: #024069;
    border-radius: 2px;
    margin-top: 25px;
}

input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; 
    -moz-apperance:none; 
    width:25px; 
    height:25px;
    -webkit-border-radius:20px; 
    -moz-border-radius:20px; 
    -ms-border-radius:20px; 
    -o-border-radius:20px; 
    border-radius:20px;
    background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #fefefe), color-stop(0.49, #d7d7d7), color-stop(0.51, #d1d1d1), color-stop(1, #c8c8c8) );
    border: 1px solid #787878;
} 
```

这一切都很好。但现在我试图在实际滑块上有两种不同的颜色，所以拇指的左边是蓝色，拇​​指的右边是黑色。

我试过 :before 但它没有用。我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T12:35:21.007

这是一些 JavaScript，当您更改值时会更新栏的颜色。

```
input.oninput = function () {
  var value = (input.value - input.min)/(input.max - input.min);
  input.style.backgroundImage = [
    '-webkit-gradient(',
      'linear, ',
      'left top, ',
      'right top, ',
      'color-stop(' + value + ', blue), ',
      'color-stop(' + value + ', red)',
    ')'
  ].join('');
}; 
```

```
onload = function() {
  var inputs = document.querySelectorAll('input[type=range]');
  for (var i = 0; i < inputs.length; i++) {
    input = inputs[i]
    input.oninput = function () {
      var value = (input.value - input.min)/(input.max - input.min);
      input.style.backgroundImage = [
        '-webkit-gradient(',
          'linear, ',
          'left top, ',
          'right top, ',
          'color-stop(' + value + ', blue), ',
          'color-stop(' + value + ', red)',
        ')'
      ].join('');
    };
  }
};
```

```
body {
    margin: 20px;
}
input[type="range"]{
    -webkit-appearance: none;
    -moz-apperance: none;
    width: 200px;
    height: 8px;
    padding: 0;
    border-left: 20px solid blue;
    border-right: 20px solid red;
    background: #024069;
    border-radius: 2px;
    margin-top: 25px;
    background-image: -webkit-gradient(
        linear,
        left top,
        right top,
        color-stop(0.2, blue),
        color-stop(0.2, red)
    );
    outline: none;
}

input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; 
    -moz-apperance:none; 
    width:25px; 
    height:25px;
    -webkit-border-radius:20px; 
    -moz-border-radius:20px; 
    -ms-border-radius:20px; 
    -o-border-radius:20px; 
    border-radius:20px;
    background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #fefefe), color-stop(0.49, #d7d7d7), color-stop(0.51, #d1d1d1), color-stop(1, #c8c8c8) );
    border: 1px solid #787878;
}
```

```
<!doctype html>
<html>
  <body>
    <input type="range" min="1" max="100" step="1" value="20">
  </body>
</html>
```

感谢@adamvert 建议使用`oninput`而不是`onchange`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:20:41.727

您需要 JS 以您需要的方式执行此操作。我假设即使您滑动物品，您也需要条形着色才能正常工作。即拇指左侧为蓝色，右侧为黑色。

检查这个演示： http: [//fiddle.jshell.net/tv3bx/2/](http://fiddle.jshell.net/tv3bx/2/)

代码：

```
function colorTheBar(slider) {
    var left = $('.left'), right = $('.right');
    console.log(slider.val());
    if(left.length == 0) {
        left = $('<div>').addClass('left').appendTo('body');
        right = $('<div>').addClass('right').appendTo('body');
    }
    left.css({
        left: (slider.offset().left + 20) + 'px',
        top: slider.offset().top + 'px',
        width: (slider.width() * (parseInt(slider.val())/100)) + 'px',
        height: slider.height() + 'px'
    });
    right.css({
        left: (slider.offset().left + 20 + slider.width() * (parseInt(slider.val())/100)) + 'px',
        top: slider.offset().top + 'px',
        width: (slider.width() * (1 - parseInt(slider.val())/100)) + 'px',
        height: slider.height() + 'px'
    });
}

$('input').change(function() {
    colorTheBar($(this));
});

colorTheBar($('input'));
​

/* CSS */

.left, .right {
    position: absolute;    
    z-index: 1;
}
.left {
    background-color: blue;
}
.right {
    background-color: black;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:03:45.690

最简单的方法是使用渐变：

**CSS**

```
input[type="range"]{
    -webkit-appearance: none;
    -moz-apperance: none;
    width: 100%;
    height: 8px;
    padding: 0 20px;
    background: #0000ff;
    background: -moz-linear-gradient(left,  #0000ff 0%, #0000ff 50%, #000000 50%, #000000 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#0000ff), color-stop(50%,#0000ff), color-stop(50%,#000000), color-stop(100%,#000000));
    background: -webkit-linear-gradient(left,  #0000ff 0%,#0000ff 50%,#000000 50%,#000000 100%);
    background: -o-linear-gradient(left,  #0000ff 0%,#0000ff 50%,#000000 50%,#000000 100%);
    background: -ms-linear-gradient(left,  #0000ff 0%,#0000ff 50%,#000000 50%,#000000 100%);
    background: linear-gradient(to right,  #0000ff 0%,#0000ff 50%,#000000 50%,#000000 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0000ff', endColorstr='#000000',GradientType=1 );
    border-radius: 2px;
    margin-top: 25px;
}

input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; 
    -moz-apperance:none; 
    width:25px; 
    height:25px;
    -webkit-border-radius:20px; 
    -moz-border-radius:20px; 
    -ms-border-radius:20px; 
    -o-border-radius:20px; 
    border-radius:20px;
    background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #fefefe), color-stop(0.49, #d7d7d7), color-stop(0.51, #d1d1d1), color-stop(1, #c8c8c8) );
    border: 1px solid #787878;
} 
```

要自定义渐变，我推荐[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)。

**[小提琴](http://fiddle.jshell.net/t5eFE/)**

# c# - 如何在.net socket程序中手动设置客户端的IP地址

> ID：13913639
> 
> 赞同：5
> 
> 时间：2012-12-17T11:50:55.430
> 
> 标签：c#, .net, multithreading, client-server, serversocket

我创建了一个多线程客户端-服务器聊天应用程序，并想用多个客户端测试我的应用程序。我打算在客户端创建一个模拟器，它创建一个随机端口和 IP。我的意思是我的客户端系统应该运行多个端口（不运行多次）。

我试图找出在客户端类中提供客户端 IP 和端口号的代码部分，但无法弄清楚。我只找到了提供服务器 IP 和端口的部分。

这是我的连接建立部分

```
private void cmdConnect_Click(object sender, System.EventArgs e)
    {
        try
        {
            //create a new client socket ...
            m_socWorker = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
            String szIPSelected  = txtIPAddress.Text;
            String szPort = txtPort.Text;
            int  alPort = System.Convert.ToInt16 (szPort,10);

            System.Net.IPAddress    remoteIPAddress  = System.Net.IPAddress.Parse(szIPSelected);
            System.Net.IPEndPoint   remoteEndPoint = new System.Net.IPEndPoint(remoteIPAddress, alPort);
            m_socWorker.Connect(remoteEndPoint);
        }
        catch (System.Net.Sockets.SocketException se)
        {
            MessageBox.Show ( se.Message );
        }
    } 
```

和我的数据发送部分

```
private void cmdSendData_Click(object sender, System.EventArgs e)
    {
        try
        {
            Object objData = txtData.Text;
            byte[] byData = System.Text.Encoding.ASCII.GetBytes(objData.ToString ());
            m_socWorker.Send (byData);
        }
        catch(System.Net.Sockets.SocketException se)
        {
            MessageBox.Show (se.Message );
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T13:23:31.540

如果您确实需要在与服务器建立连接之前设置客户端套接字地址，并且当您想要强制内核绑定到多宿主系统上的特定本地地址时通常是一个有效的场景，您可以在调用`Socket.Bind()` **之前**调用`Socket.Connect()`：

```
IPAddress  localIPAddress = IPAddress.Parse(szLocalIP);
IPEndPoint localEndPoint  = new IPEndPoint(localIPAddress, 0);
m_socWorker.Bind(localEndPoint);

m_socWorker.Connect(remoteEndPoint); 
```

您也可以在`IPEndPoint`构造函数中显式指定本地端口号，但您必须确保该端口未在使用中。如果您将端口号保留为 0，则系统将选择（几乎）任意空闲端口号。

请注意，您不能只选择任意客户端 IP 地址 - 它必须是在系统启用的网络接口上配置的地址之一。查看`ipconfig /all`配置的输出。如果您只是想测试，您可以为一个接口分配多个 IP 地址。

# php - php mysql 控制帖子表单字段

> ID：13913642
> 
> 赞同：0
> 
> 时间：2012-12-17T11:51:10.420
> 
> 标签：php, mysql, forms, database-design

我正在尝试创建一个用于存储汽车信息的数据库。

汽车可以分为新的、二手的或出租的。每种类型的汽车类别具有不同的属性，因为新车具有不同的特征，不需要使用，并且使用和租赁类别的情况相同。将来可以使用应用程序管理端表单管理器为这 3 个类别添加、删除属性。

目前我将这些存储在 1 个产品表中，其中包含这 3 个类别所需的所有属性。

```
PRODUCT(id,title,description,model,kilometer,enginsize,conditions,.....,.,...) 
```

由于建议从管理员控制中管理每个类别的表单，因此我正在寻找一个新的可扩展数据库。

```
current development:

all common attributes in Products

PRODUCT(pid,title,description,...)

CATEGORY(cid,cname) new,used,rent

form_field(formfield_id,name,type)  to store all attributes that are not common

form_field_category(formfield_id,cid) to store category associated attributes

form_post_data(post_id,pid,formfield_id,value) to store submitted data 
```

有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:59:05.010

据我了解，您有 2 类属性：常见的和特定于类别的。

所以做类似的事情：

```
PRODUCT(pid,title,description,...)

CATEGORY(cid,cname) new,used,rent

additional_info_category(aid, cid, name)

adition_info_data (adataid, aid, pid, data) 
```

应该足够了，您只需要加载所有产品信息以及与类别相关的附加信息中的字段。

如果它们是特定于类别的，添加新字段应该没有问题，但我的问题是：您确定不需要添加公共字段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:52:22.487

您需要的是一个[实体-属性-值模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。

如果表中的大多数值`form_post_data`都是文本，只需将其设为`varchar`字段即可。但是，如果您要存储数值、选项和其他类型（您可能想要过滤的内容），请查看这篇文章[EAV 建模的替代方法](http://www.jasny.net/articles/an-alternative-way-of-eav-modeling/)。

如果您有可以有多个值的属性，请查看这篇后续文章[EAV 多值字段](http://www.jasny.net/articles/eav-multi-value-fields/)。

# zend-framework - Zend 项目不适用于 XAMPP

> ID：13913649
> 
> 赞同：0
> 
> 时间：2012-12-17T11:51:42.320
> 
> 标签：zend-framework, xampp

我刚刚在本地机器上创建了 zend 项目。但是当我尝试在浏览器中运行它时，它只会加载至少一分钟，然后显示此错误。

```
Fatal error: Maximum execution time of 30 seconds exceeded in /opt/lampp/htdocs/launchmind/library/Zend/Db/Adapter/Abstract.php on line 815 
```

**每次我重新加载页面时，它都会在其他文件上显示与其他行号相同的错误。**

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:43:28.563

很可能您有一些防火墙问题导致脚本超时。检查从本地计算机到配置和/或 Web 服务和/或其他相关服务器中所有数据库主机的连接。

这里有一些提示：

1.  监控 xampp`error_log`和`/var/log/messages`...
2.  由于它是本地服务器，请暂时禁用防火墙，以查看问题出在本地防火墙（阻止传出连接）还是远程服务器防火墙（阻止传入连接）。在 RHEL 上使用`sudo service iptables stop`或`/etc/init.d/iptables stop`
3.  如果您的应用程序中有非常耗时的任务（不太可能），那么您可以尝试通过修改`/opt/lampp/etc/php.ini`（在某处）或在应用程序配置中设置最大执行时间`phpSettings.max_execution_time = 60`或`ini_set`在引导程序中使用来增加最大执行时间

希望这可以帮助。

# windows-phone-7 - 两个应用程序使用 BackgroundAudioPlayer 时如何处理错误

> ID：13913650
> 
> 赞同：2
> 
> 时间：2012-12-17T11:51:47.570
> 
> 标签：windows-phone-7, resources, invalidoperationexception, background-audio

这是 Windows Phone 7 中另一个[背景音频资源不再可用](https://stackoverflow.com/questions/13641735/wp7-background-audio-resources-are-no-longer-available?lq=1)的错误，而是不同的场景。我有 2 个应用程序，它们都`BackgroundAudioPlayer`用来播放背景音乐。

当app A正在播放背景音乐时，我按Home键选择app B，在app B中播放一些音乐，然后返回app A。

每当app A使用时`BackgroundAudioPlayer.Instance`，它会抛出`InvalidOperationException`消息“*背景音频资源不再可用*”。

我唯一能做的是`try/catch`，除了防止应用程序崩溃之外，这没有任何用处。而且，我不能打电话 `BackgroundAudioPlayer.Instance.Close()`，因为它不再可用。

如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:21:23.613

在这种情况下，您不能依赖`BackgroundAudioPlayer.Instance`工作方法 - 您需要处理`InvalidOperationException`才能知道这种情况已经发生。

此时，您可以使用 重新启动后台音频代理`BackgroundAudioPlayer.Instance.Play()`。

# java - 对话框提示edittext为空，需要填写

> ID：13913652
> 
> 赞同：0
> 
> 时间：2012-12-17T11:51:59.270
> 
> 标签：java, android, xml

我正在尝试将所有警报框放在我的代码中..但仍然无法运行...当为`editText`空或为空时。它将显示一个对话框，需要用户填写。我已经尝试了所有步骤和所有对话框警报框。但它仍然有效。但在我的情况下......这涉及超过3个edittext。只需要一个意见，我应该将错误空编辑文本的代码放在哪里，并需要用户在按下按钮之前填写它。

```
JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputPrice;
EditText inputDesc;

// url to create new product
private static String url_create_product = "http://192.168.0.102/android_connect/create_product.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

//private static final CharSequence TITLE_DIALOG = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_product);

    // Edit Text
    inputName = (EditText) findViewById(R.id.inputName);
    inputPrice = (EditText) findViewById(R.id.inputPrice);
    inputDesc = (EditText) findViewById(R.id.inputDesc);

    // Create button
    Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

    // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            // creating new product in background thread
            new CreateNewProduct().execute();
        }
    });
}

/**
 * Background Async Task to Create new product
 * */
class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressDialog pDialog = new ProgressDialog(NewProductActivity.this);
        pDialog.setMessage("Creating Product..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }
     /**
     * Creating product
     * */
    protected String doInBackground(String... args) {
        List<EditText> editTextList = new ArrayList<EditText>();
        //editTextList.add(myEditText);
        String name = inputName.getText().toString();
        String price = inputPrice.getText().toString();
        String description = inputDesc.getText().toString();
        for(EditText inputName : editTextList)
        {

        if (name == null || inputName.getText().toString().length() == 0)
        {   

            Context context = getApplicationContext();
            CharSequence error = "Please enter a track name" + name;
            int duration = Toast.LENGTH_LONG;

            Toast toast = Toast.makeText(context, error, duration);
            toast.show();

        }
        else {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("price", price));
        params.add(new BasicNameValuePair("description", description));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created product
                Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                startActivity(i);

                // closing this screen
                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        }
        }
        return null;

    }
    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:01:53.300

实际上，我会以完全不同的方式执行此操作...错误检查代码应该是 Dialog onClick 按钮的一部分。检查是否输入了所有值，如果没有，则在未完成对话框的同时放置一个指示符，指示用户需要填写该框。这是我的一个程序中的一个示例，在这种情况下，获取一个名称以添加到高分例程中。

```
EditText input;
input=new EditText(this.getApplicationContext());
final int index=i;
new AlertDialog.Builder(this)
     .setTitle("Update Status")
     .setMessage(R.string.getName)
     .setView(input)
     .setPositiveButton(sayings_array[rnum], new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int whichButton) {
             Editable value = input.getText();
             String name=value.toString();
             if (name!=null)
             {
                 addToHighScore(name,level,score,index);
                 dialog.dismiss();
             }
        }
 }).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:05:43.317

`AsyncTask`在开始执行之前检查 Edittext 是否为空。只需先检查 EditText 按钮是否为空，先单击然后开始`CreateNewProduct` `AsyncTask`。将您的代码更改为：

```
 // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

       String name = inputName.getText().toString();
        String price = inputPrice.getText().toString();
        String description = inputDesc.getText().toString();

        if (name != null || inputName.getText().toString().length() != 0)
        {   

           if (price != null || price.getText().toString().length() != 0)
            {  
              if (description != null || description.getText().toString().length() != 0)
                { 
                  // creating new product in background thread
                  new CreateNewProduct().execute();
                }
               else{
                      //show alert here
                }

           }else{
         //show alert here
           }

        }else{
         //show alert here
        }

        }
    }); 
```

# php - 扩展 Twig：解析 html 标签

> ID：13913654
> 
> 赞同：0
> 
> 时间：2012-12-17T11:52:28.187
> 
> 标签：php, coffeescript, twig

是否可以扩展 Twig 来解析 <tag>...</tag> 字符串？

我知道我可以扩展 twig 来解析 {% tag %} {% endtag %}。

但是如何解析html标签呢？

我要解析

```
<script type="text/coffeescript">...</script> 
```

到 javascript：

```
<script type="text/javascript">...</script> 
```

*更新*：

**这是解决方案**：[https ://github.com/Elfet/CoffeeBundle](https://github.com/Elfet/CoffeeBundle)

# c# - 存储文件路径和映射

> ID：13913656
> 
> 赞同：1
> 
> 时间：2012-12-17T11:52:33.707
> 
> 标签：c#

我是 C# 新手，所以我想要的是映射文件路径并将其与

```
"./non-XFA.pdf" and "./XFA.pdf" 
```

所以，这就是我写的

```
string[] testFiles = {"./non-XFA.pdf", "./XFA.pdf"}; 
```

我正在考虑为此编写一个 foreach 循环，但我无法更进一步。请帮忙

```
OpenFileDialog dialog = new OpenFileDialog();
fileName = dialog.FileName.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:01:44.793

您获得的`fileName`包含完整的文件路径。

1-从返回的字符串中获取文件名：

```
string myFile = Path.GetFileName(fileName); 
```

2-现在你可以比较

```
if(testFiles.Contain(myFile))
{
    //do your checking
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:58:27.040

`foreach`您可以使用循环获取每个元素；

```
string[] testFiles = { "./non-XFA.pdf", "./XFA.pdf" };

foreach(string s in testFiles)
{
   Console.WriteLine(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:59:25.617

您可以简单地使用`Comparer` [Class](http://msdn.microsoft.com/en-us/library/system.collections.comparer.aspx)

```
String str1 = "./non-XFA.pdf";
String str2 = "./XFA.pdf";
Console.WriteLine( "   Invariant Comparer: {0}", Comparer.DefaultInvariant.Compare( str1, str2 ) ); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:59:33.513

首先，如果您想要的文件路径直接在输出文件夹中（如 bin\debug），则不需要在 Linux 样式前用 ./ 编写路径。

其次，OpenFileDialog 会给你返回带有扩展名的文件名。如果您想安全地分别提取文件名和/或扩展名，您可以使用 System.IO.Path 中的专用方法来执行此操作。

# lucene.net - 是否可以在 Lucene.Net 中为搜索词赋予更多权重

> ID：13913659
> 
> 赞同：1
> 
> 时间：2012-12-17T11:52:48.497
> 
> 标签：lucene.net

根据标题，我想对发送到 Lucene.Net 搜索的搜索词进行加权。

数据是地址数据，所以我想给街道和大道之类的词以及数字赋予较低的权重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:06:24.293

看起来 Query.SetBoost 是我想要的。

它允许您为查询词赋予更高的权重。

# java - 用 Java 编写一个简单的 JSON 响应

> ID：13913660
> 
> 赞同：5
> 
> 时间：2012-12-17T11:52:49.463
> 
> 标签：java, json, serialization

想象一个简单的 JSON 响应，例如：

```
{
    "success": false,
    "message": "PEBKAC"
} 
```

鉴于我有`boolean`和`String`变量，在 Java 中将它们转换为 JSON 的最简单方法是什么，而不求助于`String.format`和朋友。

我更熟悉 C#，使用内置[`JavaScriptSerializer`类](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)非常简单：

```
var success = false;
var message = "PEBKAC";
var serializer = new JavaScriptSerializer();
var json = serializer.Serialize(new { success, message }); 
```

Java有什么这么简单的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T12:00:40.187

使用[JSON](http://www.json.org/)
**序列化**

```
 org.json.JSONObject obj = new org.json.JSONObject();
  obj.put("success", false);
  obj.put("message", "PEBKAC");
  obj.toString(); 
```

**反序列化**

```
org.json.JSONObject obj = new org.json.JSONObject(responseAsString);  
obj.optBoolean("success"); // false
obj.optString("message"); // PEBKAC 
```

使用[谷歌-gson](http://code.google.com/p/google-gson/)

```
public class MyObject
{
   private String message;
   private boolean success;
   public MyObject(String message, boolean success)
   {
      this.message = message;
      this.success = success;
   }
} 
```

**序列化**

```
 MyObject obj = new MyObject("PEBKAC", false);  
   new com.google.gson.Gson().toJSON(obj); 
```

**反序列化**

```
 MyObject obj = new com.google.gson.Gson().fromJSON(responseAsString, MyObject.class);
   obj.getMessage();
   obj.getSuccess(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:55:12.800

你看过gson吗？

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

//亨里克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:58:32.437

有可用的 JSON 解析器库，其中之一是 Jackson ( [http://jackson.codehaus.org](http://jackson.codehaus.org) )。Jackson 的 ObjecMapper 类 ( [http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html) ) 为您提供类似于 C# 中的 JavaScriptSerializer 的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:55:49.417

使用 org.json.JSONObject

[http://www.json.org/javadoc/org/json/JSONObject.html](http://www.json.org/javadoc/org/json/JSONObject.html)

您可以创建一个 JSON 对象，然后使用 put 方法添加您的值。然后调用`jsonObj.toString()`获取 JSON

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T11:55:57.770

看看谷歌的 GSON。是一个与 JSON 一起工作的 Java 库。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

这里有一些例子：

[https://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Primitives-Examples)

**更新**

与@Ilya 代码一样的示例在链接中。但这将是这样的：

目的：

```
public class MyObj
{
   private String message;
   private boolean success;
   public MyObj(String message, boolean success)
   {
      this.message = message;
      this.success = success;
   }
} 
```

转换为 JSON：

```
import com.google.gson.Gson;

public class Main {

    public static void main(String[] args) {
        MyObj obj = new MyObj("PEBKAC",false);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }
} 
```

输出：

```
{"message":"PEBKAC","success":false} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T11:56:17.310

java中有很多简单的库可以处理JSON，查看：[JSON](http://www.json.org/)

Java 中没有内置支持

# php - 需要与使用 php 从远程服务器下载的 $_FILES 相同的东西

> ID：13913661
> 
> 赞同：2
> 
> 时间：2012-12-17T11:52:50.637
> 
> 标签：php, image

好的，我有处理图像上传的 php 代码。现在我有处理此代码的远程帖子：

```
$postheader = http_build_query($postarray);
$url = parse_url($uri);
$host = $url['host'];
$path = $url['path'];

$results = '';
if ($fp = fsockopen($host, 80, $errno, $errstr, 2))
{
    stream_set_timeout($fp, 30);

    $headers = "POST ". $path ." HTTP/1.0\r\n";     
    $headers .= "User-Agent: \r\n";
    $headers .= "Host: ". $host ."\r\n";
    $headers .= "Accept: */*\r\n";
    $headers .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $headers .= "Content-Length: " . strlen($postheader) . "\r\n";
    $headers .= "Connection: close\r\n\r\n";
    @fputs($fp, $headers . $postheader);
    while($currentHeader = fgets($fp, 4096))
    {
        if (preg_match("/^\r?\n$/", $currentHeader)) { break; }
    }

    while(!@feof($fp))
    {
        $results .= @fgets($fp, 1024);
    }
    @fclose($fp); 
```

问题是我从该帖子中获取了图像的 url，它的存储方式如下：

```
$file = 'http://someurl.ll/image.jpg' 
```

以及处理图像的脚本：`$_FILES['image']`

现在，如果我可以说它`$_FILES['image'] = $file`应该去费德，但事实并非如此！我`$_FILES['image']`不仅需要数据的url，还需要原始上传的数据

所以我想知道什么是等于`$_FILES['image']`，那可以是`$file = 'http://someurl.ll/image.jpg'`什么？

更新： Hier 是我得到的 $_FILES['image'] as var_dump

```
array(5) { ["name"]=> string(17) "logo.png" ["type"]=> string(9) "image/png" ["tmp_name"]=> string(14) "/tmp/phpWUqC5c" ["error"]=> int(0) ["size"]=> int(5674) } 
```

我想做同样的事情，但是从 $file = 'http://someurl.ll/image.jpg' 所以同样的数组然后说：

```
$_FILES['image'] = that array from http://someurl.ll/image.jpg 
```

因为它是远程的，所以我想将它作为 $_FILES['image'] 处理，但我不能，所以快速的解决方案是使远程图像与 $_FILES['image'] 相同

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T13:40:43.063

将此功能添加到您的源

```
/**
 * Add to $_FILES from external url
 * sample usage: addToFiles('google_favicon', 'http://google.com/favicon.ico');
 * @since 17.12.12 17:23
 * @author mekegi
 * @param string $key
 * @param string $url sample http://some.tld/path/to/file.ext
 */
function addToFiles($key, $url)
{
    $tempName = tempnam('/tmp', 'php_files');
    $originalName = basename(parse_url($url, PHP_URL_PATH));

    $imgRawData = file_get_contents($url);
    file_put_contents($tempName, $imgRawData);
    $_FILES[$key] = array(
        'name' => $originalName,
        'type' => mime_content_type($tempName),
        'tmp_name' => $tempName,
        'error' => 0,
        'size' => strlen($imgRawData),
    );
} 
```

并使用：

```
addToFiles('image', 'http://someurl.ll/image.jpg'); 
```

# javascript - javascript的admob不起作用

> ID：13913670
> 
> 赞同：0
> 
> 时间：2012-12-17T11:53:34.443
> 
> 标签：javascript, admob

我正在尝试在这样的网页中添加广告：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>test</title>
</head>
<body>
<div style="width: 400px; height: 100px; ">
    <script type="text/javascript">
     var admob_vars = {
      pubid: 'a150bdd0d7d7f00', // publisher id
      bgcolor: '000000', // background color (hex)
      text: 'FFFFFF', // font-color (hex)
      test: false // test mode, set to false if non-test mode
     };
     </script>
     <script type="text/javascript" src="http://mmv.admob.com/static/iphone/iadmob.js"></script>
</div>
</body>
</html> 
```

但我看不到广告，也没有错误，甚至没有 javascript 错误。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:59:14.027

它工作正常，如果你使用类似的东西：

```
console.log(_admob.vars_cache) 
```

在您的浏览器中，您会看到。:)

# android - 使 SQLite 数据库密码受保护

> ID：13913673
> 
> 赞同：0
> 
> 时间：2012-12-17T11:53:40.637
> 
> 标签：android, sqlite

我在我的应用程序中使用 SQLite 数据库。我想让我的 SQLite 数据库密码受到保护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:00:55.737

HWACI（SQLite 开发背后的商业部门）提供（为了钱）一个名为[SEE](http://www.hwaci.com/sw/sqlite/see.html)的加密引擎。如果您正在构建自己的 SQLite 源代码，将其集成到其中非常容易，而且它也非常易于使用。

[SQLCipher](http://sqlcipher.net/)是 SEE 的开源替代方案。我从未使用过它，但我希望它与 SEE 一样易于集成和使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:56:46.287

据我所知：不，你不能以简单的方式做到这一点。

可能的选择：

- 您可以简单地在插入数据时**加密**您想要安全的数据，并在您想要使用它们时解密这些值。在我看来，这是最好的选择。

- 您可以加密应用程序文件夹中的 db 文件。并在每次您想访问它时对其进行解密（不太推荐）。

**另请注意**，您的数据库文件存储在应用程序的私有目录中，因此在大多数终端（root 终端除外）中，用户和其他应用程序都没有读写权限。

* * *

**编辑：对于第一选择，如果您不想实现自己的加密方法，我建议您查看 mah 的答案 =)**

# eclipse - 安装 Eclipse（eclipse-jee-juno-SR1-linux-gtk.tar.gz）？

> ID：13913676
> 
> 赞同：0
> 
> 时间：2012-12-17T11:53:48.950
> 
> 标签：eclipse

我已经下载了 Eclipse（eclipse-jee-juno-SR1-linux-gtk.tar.gz）。如何在 Ubuntu 中安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:59:42.140

只需将其提取到您想要的位置（家庭/用户）：

```
tar xzf eclipse-jee-juno-SR1-linux-gtk.tar.gz 
```

它将提取文件夹 eclipse 并且可执行文件在其中。

# java - 无法显示标签

> ID：13913678
> 
> 赞同：-3
> 
> 时间：2012-12-17T11:53:53.177
> 
> 标签：java

好的，我正在关注我一周前发布的另一个问题。 [无法解析 ^ 字符](https://stackoverflow.com/questions/13855988/unable-to-parse-character)

我目前的情况是，现在我能够解析所需的正则表达式并创建后续元素。我为每种元素类型创建了标签。

例如，我的输入字符串是 A|1|2|3^4|B||1|2|3^4^5

所以我在这个字符串中的标签是 A 和 B

我的输出应该是（预期的）

```
A1      1 
A2      2
A3.1    3 
A3.2    4
B1      (BLANK) //not B
B2      1
B3      2
B4.1    3
B4.2    4
B4.3    5 
```

B1 应该为空的原因是因为输入是 B||1|2。我目前的输出将是

```
element1    A
element2    1
element3.1  2
element3.2  3
element4    4
element5    B
element6     
element7.1  2
element7.2  3
element7.3  4
element7.4  5 
```

基本上，我正在尝试构建一个 HL7 解析器。用准确的标签替换是为了避免混淆和保密。代码如下。

> 公共类解析器{
> 
> ```
> public static final String ELEMENT_DELIM_REGEX = "\\|";
> 
> public static void main(String[] args) {
>     String input = "A|1|2|3^4|";
>     String[] tokens = input.split(ELEMENT_DELIM_REGEX);
>     Element[] elements = new Element[tokens.length];
>     for (int i = 0; i < tokens.length; i++) {
>         elements[i] = new Element(i + 1, tokens[i]);
>     }
>     for (Element element : elements) {
>         System.out.println(element);
>     }
> } 
> ```
> 
> }

和

```
Element.java 
```

> 公共类元素{
> 
> ```
> public static final String SUB_ELEMENT_DELIM_REGEX = "\\^";
> 
> private int number;
> 
> private String[] content;
> 
> public Element(int number, String content) {
>     this.number = number;
>     this.content = content.split(SUB_ELEMENT_DELIM_REGEX);
> }
> 
> @Override
> public String toString() {
>     if (content.length == 1) {
>         return "Element " + number + "\t" + content[0];
>     }
>     StringBuilder str = new StringBuilder();
>     for (int i = 0; i < content.length; i++) {
>         str.append("Element " + number + "." + (i+1) + "\t" + content[i] + "\n");   
>     }
>     // Delete the last \n
>     str.replace(str.length() - 1, str.length(), "");
>     return str.toString();
> } } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:06:59.587

可以通过对两个类进行一些小的更改来实现：（如果您不明白代码中发生了什么，请询问我，我只写了一些评论，但试图保持自我解释）

```
public class Parser {

    public static final String ELEMENT_DELIM_REGEX = "\\|";

    public static void main(String[] args) {
        String input = "A|1|2|3^4|B||1|2|3^4^5";
        String[] tokens = input.split(ELEMENT_DELIM_REGEX);
        List<Element> elements = new ArrayList<Element>();
        String currentTag = "";
        int elementCounter = 1;
        for (int i = 0; i < tokens.length; i++) {
            if (tokens[i].matches("\\p{Alpha}+")) {
                currentTag = tokens[i];
                elementCounter = 1;
                continue;
            }
            elements.add(new Element(elementCounter++, currentTag,  tokens[i]));
        }
        for (Element element : elements) {
            System.out.println(element);
        }
    }
} 
```

和

```
public class Element {

    public static final String SUB_ELEMENT_DELIM_REGEX = "\\^";

    private int number;

    private String[] content;

    private String tag;

    public Element(int number, String tag, String content) {
        this.number = number;
        this.content = content.split(SUB_ELEMENT_DELIM_REGEX);
        this.tag = tag;
    }

    @Override
    public String toString() {
        if (content.length == 1) {
            return tag + "" + number + "\t" + content[0];
        }
        StringBuilder str = new StringBuilder();
        for (int i = 0; i < content.length; i++) {
            str.append(tag + "" + number + "." + (i+1) + "\t" + content[i] + "\n");   
        }
        // Delete the last \n
        str.replace(str.length() - 1, str.length(), "");
        return str.toString();
    } 
} 
```

输出（供您输入`A|1|2|3^4|B||1|2|3^4^5`）

```
A1      1
A2      2
A3.1    3
A3.2    4
B1  
B2      1
B3      2
B4.1    3
B4.2    4
B4.3    5 
```

# javascript - 如何使用 Testacular 运行单个 E2E 测试？

> ID：13913684
> 
> 赞同：1
> 
> 时间：2012-12-17T11:54:15.083
> 
> 标签：javascript, angularjs, karma-runner

[Testacular](https://github.com/vojtajina/testacular/)是非常好的测试运行器，我非常喜欢它。运行我的单元测试我注意到运行的测试是光标所在的测试，但 E2E 测试并非如此。运行所有 e2e 测试来验证单个测试确实很乏味且浪费时间。有谁知道如何运行单个 e2e 测试。是否有一些我错过的配置可以让我运行单个 e2e 测试？

先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:29:05.967

要隔离测试，您可以使用一个简单的技巧 - 添加“d”来描述，或添加 i 到“it”。

例如：

```
describe("Should not run", function(){
  ...
});

ddescribe("Should run...", function(){
  ...
}); 
```

这同样适用于：

```
describe("Will run", function(){
   it("should not run...", function(){

   });

   iit("should run...", function(){

   });
}); 
```

如果您有多个“ddescribe”或“iit”，它们将全部运行，而其他常规“describe”或“it”则不会。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:28:53.350

[在教程](http://docs.angularjs.org/tutorial)中有一个关于使用 Testacular 的很好的解释。测试样本具体在[第 2 章](http://docs.angularjs.org/tutorial/step_02)。

另外，请查看[AngularJS 文档](http://docs.angularjs.org/guide/dev_guide.unit-testing)。

# mysql - 对存储的 MySQL 数据库过程的输入进行清理

> ID：13913686
> 
> 赞同：1
> 
> 时间：2012-12-17T11:54:29.250
> 
> 标签：mysql, sanitization

我正在使用其他人制作的数据库（并且我没有真正授权更改它）。但是，当我查看数据库中的存储过程时，我注意到以下过程：

```
DELIMITER $$

CREATE PROCEDURE `logIn`(userName varChar(50), userPass varChar(50))
BEGIN
  declare userID int;

  SELECT 
    u.userID INTO userID 
  FROM
    users u
  WHERE
    u.userName=userName 
    AND u.userPassword=MD5(userPass);

  IF (IFNULL(uID,-1) > 0) THEN
    select 1 as outMsg;
  ELSE
    select 0 as outMsg;
  END IF;
END$$ 
```

对应的表`users`具有三列`userID INT`：`userName VARCHAR(50)`和`userPassword VARCHAR(50)`。

由于我对此不太擅长，有人可以让我知道是否需要对此类函数的输入进行清理以不允许任何 SQL 注入，如果不是 - 为什么？一般的经验法则将不胜感激。

PS 此函数将在表单提交时从 JS 脚本调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:25:42.833

这里有一些经验法则，它们取决于底层数据类型以及它是如何插入到数据库中的。

首先，参数化查询总是最适合 SQL 注入保护.. 但是.. 如果你不能改变它..

字符串类型：

1.  删除任何单引号 **或** 将任何单引号替换为单引号两次。

2.  将以下任何字符替换为其编码的替代字符；

    *   >
    *   <
    *   "
    *   ;
    *   （第 34 章）
    *   )
    *   (
    *   例如..) 替换为 & #x29;

        -（上面示例中的空格是为了让您看到代码，删除它以获得“）”）

对于字符串以外的数据类型，请检查数据类型是否正常，并删除任何不应出现在数据类型中的字符。如果是整数，请确保您传入的字符串是整数。这通常可以通过转换为代码中的类型来完成。演员要么工作..要么导致错误。检查数据类型 min 和 maxes 是否没有被超过也是很好的。例如.. 如果我正在检查一个整数，我可能会使用类似这样的代码：

var myInt = parseInt(param);

然后我可能会检查它的界限以确保它小于最大整数值并且大于最小整数值。

这应该足以防止 SQL 注入攻击......

而且..由于您尚未发布实际与数据库交互的代码...作为额外的预防措施..您可能还想删除--,`,%,",", ""。

你只想要'sane'值进入数据库调用..所以像 $309 这样的整数没有意义，你想删除 $..。可能通过对任何非数字字符使用正则表达式替换逗号和句点。[^[0-9,.]]

要格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:56:34.800

是的，在尝试运行该过程之前必须对输入进行清理。

您可能希望在此处共享该过程的实际调用点以获得更多帮助，因为无法**在表单 submit 上直接从 JS**调用该过程。您可能有一个 Servlet、PHP 页面或一些 HTTP 友好的中介来以某种方式进行数据库调用。

# ipad - Youtube 对象嵌入 ipad

> ID：13913688
> 
> 赞同：1
> 
> 时间：2012-12-17T11:54:34.630
> 
> 标签：ipad, youtube

我有一个 youtube 视频，可以在除 ipad 之外的所有浏览器中使用对象嵌入渲染，代码如下：

```
<object id="ytViewer" width="468" height="327" type="application/x-shockwave-flash" data="http://www.youtube.com/apiplayer?version=3&enablejsapi=1&version=3&playerapiid=ytViewer" state="0" mute="0">
<param name="allowScriptAccess" value="always">
<param name="autoplay" value="0">
<param name="WMode" value="Opaque">
</object> 
```

我正在使用对象嵌入，因为我在 javascript 中制作了一些自定义播放器控件，当我使用 iframe 嵌入视频时这些控件不起作用。

它使用一些 javascript 来提取视频，但是否因为 ipad 不支持 Flash 嵌入？

更新：

```
function loadPlayer( divToLoad, plId, vidid) {

        var params = {
            allowScriptAccess: "always",
            autoplay: 0
        };
        var atts = {
            id: plId
        };
        // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)
        swfobject.embedSWF("http://www.youtube.com/apiplayer?" + "&enablejsapi=1&version=3&playerapiid=" + plId, divToLoad, "468", "327", "9", null, null, params, atts);
        swfobject.createCSS("#" + plId, "display:block");

        $('#' + plId + '_container').attr('videoid', vidid);
    } 
```

所以我需要得到上面的函数来添加嵌入标签，不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:11:04.293

您的代码仅链接到 YT flash 视频播放器（甚至没有指向视频）。

为什么不直接使用 YouTube 自动生成的“分享”代码？在视频正下方的“分享”部分中寻找“嵌入”按钮并复制默认代码。您甚至可以激活一些附加选项：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/KVHO-FWuMXs" frameborder="0" allowfullscreen></iframe> 
```

这应该适用于所有浏览器。

**编辑：** 如果您需要对象/参数语法，您可以切换到嵌入视频的“旧”方式：可以勾选（当前第四个）选项以使用此不推荐使用的代码：

```
<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/KVHO-FWuMXs?version=3&amp;hl=de_DE"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/KVHO-FWuMXs?version=3&amp;hl=de_DE" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object> 
```

使用 Psy 的音乐视频进行测试： [http ://www.youtube.com/watch?v=KVHO-FWuMXs](http://www.youtube.com/watch?v=KVHO-FWuMXs)

# api - 服务器端代码的 soundcloud 身份验证（无应用程序！）

> ID：13913690
> 
> 赞同：0
> 
> 时间：2012-12-17T11:54:40.260
> 
> 标签：api, authentication, soundcloud

我希望我的服务器端代码以自己的名义将曲目上传到 soundcloud，然后它会检索评论、收藏夹和听众人数。我不想代表应用程序用户这样做 - 因为**没有应用程序**！以前关于 stackoverflow 的问题§（没有“我也是”按钮）和 API 文档似乎表明我不能这样做。我对么？

§[可以跟踪属于应用程序而不是个人用户吗？](https://stackoverflow.com/questions/9725669/can-track-belong-to-the-application-and-not-individual-users)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:45:25.290

这在 API 文档中称为“在没有 SoundCloud 连接屏幕的情况下进行身份验证”：http: [//developers.soundcloud.com/docs/api/guide#user-credentials](http://developers.soundcloud.com/docs/api/guide#user-credentials)

在这种情况下，“应用程序”是想要访问 Soundcloud API 的程序。你在这里注册它们：http: [//soundcloud.com/you/apps/](http://soundcloud.com/you/apps/)

通常，您会创建一个唯一的用户名，并将应用程序注册给该用户。然后，代码以该用户身份登录以进行身份​​验证。

# directx-9 - DirectX9 对具有多种材质的网格使用几何实例化

> ID：13913691
> 
> 赞同：0
> 
> 时间：2012-12-17T11:54:41.510
> 
> 标签：directx-9, geometry-instancing

我正在尝试拥有一个灵活的几何实例化代码，能够处理具有多种材料的网格。对于具有一种材料的网格，一切都很好。我设法通过一次绘制调用渲染尽可能多的实例。

使用多种材料会使事情变得更加复杂。我的网格来自一个 .x 文件。它有一个顶点缓冲区、一个索引缓冲区和几种材质。为每个子集（材质）渲染的索引存储在属性数组中。

这是我使用的代码：

```
d3ddev->SetVertexDeclaration( m_vertexDeclaration );    
d3ddev->SetIndices( m_indexBuffer );

d3ddev->SetStreamSourceFreq(0, (D3DSTREAMSOURCE_INDEXEDDATA | m_numInstancesToDraw ));
d3ddev->SetStreamSource(0, m_vertexBuffer, 0, D3DXGetDeclVertexSize( m_geometryElements, 0 ) );

d3ddev->SetStreamSourceFreq(1, (D3DSTREAMSOURCE_INSTANCEDATA | 1ul));
d3ddev->SetStreamSource(1, m_instanceBuffer, 0, D3DXGetDeclVertexSize( m_instanceElements, 1 ) );

m_effect->Begin(NULL, NULL);    // begin using the effect
m_effect->BeginPass(0);         // begin the pass

for( DWORD i = 0; i < m_numMaterials; ++i ) // loop through each subset.
{
    d3ddev->SetMaterial(&m_materials[i]);    // set the material for the subset
    if(m_textures[i] != NULL)
    {
       d3ddev->SetTexture( 0, m_textures[i] );
    }

    d3ddev->DrawIndexedPrimitive( 
        D3DPT_TRIANGLELIST,             // Type
        0,                              // BaseVertexIndex
        m_attributes[i].VertexStart,    // MinIndex
        m_attributes[i].VertexCount,    // NumVertices
        m_attributes[i].FaceStart * 3,  // StartIndex
        m_attributes[i].FaceCount       // PrimitiveCount
    );
}  

m_effect->EndPass();
m_effect->End();

d3ddev->SetStreamSourceFreq(0,1);
d3ddev->SetStreamSourceFreq(1,1); 
```

此代码仅适用于第一种材料。当我说第一个时，我的意思是索引为 0 的那个，因为如果我用第二种材料开始循环，它将不会被渲染。但是，通过调试 PIX 中的顶点缓冲区，我可以看到我的所有材质都被正确处理。所以在顶点着色器之后会发生一些事情。

另一个奇怪的问题，如果我将包含实例数据的流源设置为顶点大小为零，我的所有材质都将被渲染。

所以代替这个：

```
d3ddev->SetStreamSource(1, m_instanceBuffer, 0, D3DXGetDeclVertexSize( m_instanceElements, 1 ) ); 
```

我将其替换为：

```
d3ddev->SetStreamSource(1, m_instanceBuffer, 0, 0 ); 
```

但是，当然，使用这段代码，我的所有实例都呈现在同一个位置，因为我一遍又一遍地重用相同的实例数据。

最后一点，如果我使用 D3DCREATE_SOFTWARE_VERTEXPROCESSING 创建设备，一切正常。只有硬件有问题，但不幸的是 DirectX 在调试模式下没有报告任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T15:39:56.580

我遇到了同样的问题，就我而言，问题在于用于实例化网格的池。我最初在 SYSTEM_MEMORY 中有这个网格，但在 POOL_DEFAULT 中有实例化网格。当我将实例化网格更改为默认内存时，一切都按预期工作。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:40:40.860

请参阅[着色器模型 3 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147365%28v=vs.85%29.aspx)

如果您在硬件中实现着色器，则不得将 vs_3_0 或 ps_3_0 与任何其他着色器版本一起使用，并且您不得将任一着色器类型与固定功能管道一起使用。这些更改使简化驱动程序和运行时成为可能。唯一的例外是纯软件 vs_3_0 着色器可以与任何像素着色器版本一起使用。

# project - BigQuery 控制台 api“无法在没有项目 ID 的情况下开始工作”

> ID：13913694
> 
> 赞同：3
> 
> 时间：2012-12-17T11:54:58.843
> 
> 标签：project, google-bigquery

我可以在大查询浏览器工具上调用 sql 我在 centos 上安装了 bq 工具并注册它现在我可以连接 bigdata 并显示数据集或使用 head 方法获取表数据但是当我从 bq 工具调用 quert 时我得到了“*查询操作中的 BigQuery 错误：没有项目 ID 就无法开始工作。* ” 我在谷歌上搜索了它，但没有发现任何有用的信息。

*是否有人通过“ This is BigQuery CLI v2.0.1* ”运行选择查询

BigQuery> ls

```
 projectId     friendlyName  
 -------------- -------------- 
  XXXX 
```

**API项目**

```
BigQuery> show publicdata:samples.shakespeare   
Table publicdata:samples.shakespeare

   Last modified                  Schema                 Total Rows   Total Bytes   Expiration  
 ----------------- ------------------------------------ ------------ ------------- ------------ 
  02 May 02:47:25   |- word: string (required)           164656       6432064                   
                    |- word_count: integer (required)                                           
                    |- corpus: string (required)                                                
                    |- corpus_date: integer (required) 
```

* * *

```
BigQuery> query "SELECT  title FROM [publicdata:samples.wikipedia] LIMIT 10 "
BigQuery error in query operation: Cannot start a job without a project id. 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:13:42.040

为了运行查询，您需要提供一个项目 ID，即为查询计费的项目（有 25GB/月的免费配额，但我们仍然需要一个项目来将使用情况归因于）。您可以使用 --project_id 标志或通过运行设置默认项目来指定项目`gcloud config set project PROJECT_ID`。请参阅 bq 的文档，尤其是[此处](https://developers.google.com/bigquery/docs/cli_tool#projects)的“使用项目”部分。

听起来你可能有旧版本的 bq。最新的可以在这里下载：[https ://cloud.google.com/sdk/docs/](https://cloud.google.com/sdk/docs/)

# android - JsonSyntaxException 无法解析为类型

> ID：13913695
> 
> 赞同：1
> 
> 时间：2012-12-17T11:55:01.647
> 
> 标签：android, json, android-emulator, gson

大家好，我正在制作一个 android 应用程序，其中收到 4 条错误消息：

1.  **GSON**无法解析为类型

2.  **JsonSyntaxException**无法解析为类型

    还有**2 个**

    我刚刚加了**gson-2.2.2.jar**，3个错误已经自动解决了，

    但我仍然得到**JsonSyntaxException 无法解析为类型**

    我已经尝试了很多次来解决这个问题，但没有任何办法，现在我需要你的帮助，请给一些建议......

    谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:56:22.153

您是否已添加`import com.google.gson.JsonSyntaxException;`到代码的顶部？

此类问题可以在 Eclipse 中通过按`Cmd-Shift-O`(OSX) 或`Ctrl-Shift-O`(Windows/Linux)快速解决

# html - 如何隐藏 html 表单下拉列表中的箭头按钮？

> ID：13913704
> 
> 赞同：1
> 
> 时间：2012-12-17T11:55:36.517
> 
> 标签：html, css, forms, drop-down-menu, printing

> **可能重复：**
> [如何设置 html 选择框的样式以省略打印的下拉箭头？](https://stackoverflow.com/questions/1439163/how-can-i-style-an-html-select-box-to-omit-drop-down-arrow-for-print)

我正在考虑为 html 表单创建打印页面，并且在表单中我希望只显示所选选项的文本，而不是框或下拉按钮。如何才能做到这一点？最好使用纯 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:03:14.100

```
You can refer this link that will shed some light on your need
http://imar.spaanjaars.com/240/how-do-i-hide-screen-elements-when-a-page-is-printed

<html>
<head>
  <title>Non Printable Stuff</title>
  <link href="/Styles/MainStyle.css" rel="stylesheet" type="text/css">
  <link href="/Styles/PrintStyle.css" rel=" stylesheet" type="text/css" media="print">

  <style type="text/css" media="print">
    .NonPrintable
    {
      display: none;
    }
  </style>

</head>
<body>
  <input type="button" value="I am hidden" class="NonPrintable">
</body>
</html> 

</head>
<body>
  <input type="button" value="I am hidden" class="NonPrintable">
</body>
</html> 
```

# html - 使用 position:fixed 修复特定方向的 div

> ID：13913705
> 
> 赞同：0
> 
> 时间：2012-12-17T11:55:36.053
> 
> 标签：html, css

`position:fixed`有没有办法只使用从上到下的方向来修复 div ；即当我从左到右滚动时，不应修复 div。它应该表现为绝对定位元素。只有当我从上到下滚动时才应该修复它。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:56:59.663

这是不可能的，因为它不应该是。

“滚动”的动作可能从浏览器到另一个非常不同......从一个设备到另一个......所以它是不可预测的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:46:56.097

如果你想要纯粹的好解决方案，我建议你使用[jQuery](http://api.jquery.com/css/)。如果您将使用 CSS 来实现它，那么它可能并不流畅。

# github - Github 下载页面/按钮不再可见

> ID：13913708
> 
> 赞同：9
> 
> 时间：2012-12-17T11:55:53.727
> 
> 标签：github, github-services

我曾经使用我的仓库中文件选项卡上的下载/添加下载...按钮上传二进制文件。这个功能好像没了。有人知道为什么吗？临时 Github 问题 / 浏览器问题 / ...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T00:50:23.637

GitHub 上传已于 12 月 11 日停止。有关更多信息，请参阅[博客文章](https://github.com/blog/1302-goodbye-uploads)。

### 概括：

> 您无法再上传，下载选项卡已消失。下载区和下载将继续工作 90 天。只需添加`/downloads`到您的存储库的链接。

编辑：Archive.org 归档了 github 关闭上传时可用的所有 github 下载：http: [//archive.org/details/github-downloads-2012-12](http://archive.org/details/github-downloads-2012-12)

编辑：类似于 2013 年 7 月推出的下载：[GitHub Releases](https://github.com/blog/1547-release-your-software)。在那里，您可以将上传添加到发布中，这也是大多数人使用 GitHub 下载所做的事情。

# c# - 如何在ajax请求的html页面中添加自定义标头

> ID：13913722
> 
> 赞同：0
> 
> 时间：2012-12-17T11:56:38.893
> 
> 标签：c#, asp.net, html

我必须在 html 页面中使用***ajax 请求将我的密码发送到******wcf webservice***，然后在 wcf 服务中我想以以下格式检索我的密码，所以我可以做些什么来在 html 页面中设置标题。

```
Password = HttpContext.Current.Request.Headers["Password"].ToString() 
```

我使用以下代码，但它不是在服务器端以上述格式在 web 服务中获取密码。

```
function setHeader(xhr) 
{
     xhr.setRequestHeader('UserName', document.getElementById('textinput1').value);
} 
```

# asp.net - urlrewrite.Net 无限循环

> ID：13913728
> 
> 赞同：1
> 
> 时间：2012-12-17T11:57:16.803
> 
> 标签：asp.net, .net, url-rewriting, iis-6, url-rewrite-module

我使用 urlrewrite.net @ [http://urlrewriter.net](http://urlrewriter.net)在带有 IIS 6 的 Windows 2003 服务器上托管的 .net 网站上执行 url 重写。

我需要简单地打开一个长的动态网址，例如： [http ://mydomain.com/aircraft/result.aspx?view=,734,,810,,159,,163&cat=1&loc=999999&model=false](http://mydomain.com/aircraft/result.aspx?view=,734,,810,,159,,163&cat=1&loc=999999&model=false)

转换成更短的友好网址，例如： http: [//mydomain.com/forsale/manufacturer/,734,,810,,159,,163,/1/999999/false](http://mydomain.com/forsale/manufacturer/,734,,810,,159,,163,/1/999999/false)

我的 web.config 中有以下规则：

```
<rewrite url="^/forsale/(.+)/(.+)/(.+)/(.+)/(.+)" to="/aircraft/result.aspx?view=$2&amp;cat=$3&amp;loc=$4&amp;model=$5" / > 
```

当我输入以下内容作为 url 时，这很好用：http: [//mydomain.com/forsale/manufacturer/,734,,810,,159,,163,/1/999999/false](http://mydomain.com/forsale/manufacturer/,734,,810,,159,,163,/1/999999/false)

但是，一旦我触发任何类型的回发，它就会进入无限循环，并且浏览器地址栏中的 url 会变得很疯狂，例如： [http ://mydomain.com/aircraft/result.aspx?view=1&cat=999999&loc=detailed .aspx?AId=32270&Cat=公务机&seo=庞巴迪&model=挑战者%20300&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat =1&猫=1&猫=1](http://mydomain.com/aircraft/result.aspx?view=1&cat=999999&loc=detailed.aspx?AId=32270&Cat=Business-Jets&seo=Bombardier&model=Challenger%20300&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1&cat=1)

它似乎恢复到真正的 url，但添加了重复的查询字符串变量..

理想情况下，我希望这样可以保持更短/更友好的重写 url，但这并不重要。主要目的是能够实际允许回发事件，以便页面适合目的。

任何帮助/建议/指针/答案将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:21:09.560

无限循环是由于页面上的一些重定向代码造成的，只有在以这种方式访问​​时才会导致问题。删除它已经解决了循环问题，但导致真正的查询字符串被附加到重写 url 上。

# zend-framework - 使用 Zend_Currency 显示一个值而不使用符号

> ID：13913733
> 
> 赞同：0
> 
> 时间：2012-12-17T11:57:42.763
> 
> 标签：zend-framework, zend-currency

我使用 Zend 的 toCurrency() 输出一个值：

```
echo $currency->toCurrency(1000, array('currency' => "GBP", 'precision' => 2)); 
```

这给了我一个 1,999.99 英镑的例子，**如果不使用任何额外的代码，例如 preg repplace，我可以返回没有符号的值吗？**

完整代码：

```
// $locale is set by browser
Zend_Registry::set('Zend_Locale', $locale);
$currency = new Zend_Currency();
echo $currency->toCurrency(1000, array('currency' => "GBP", 'precision' => 2));
// £1,000.00 but would like only 1,000.00 
```

如果有人需要了解更多信息，请随时询问。

如果有人对我将两种货币混合在一起做什么感到好奇，我将以本地化格式显示货币值，但以英镑表示。这就是为什么我宁愿避免使用剥离/替换方法的原因，因为我无法保证表示值时的准确性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:03:36.513

您可以指定“符号”来显示您的货币。这包括一个空字符串：

```
echo $currency->toCurrency(
    1000,
    array(
        'currency' => "GBP",
        'precision' => 2
        'symbol' => ''
    )
 ); 
```

[参考](http://framework.zend.com/manual/1.12/en/zend.currency.options.html)

# mysql - 使用逗号在社交网站中存储朋友关系

> ID：13913740
> 
> 赞同：2
> 
> 时间：2012-12-17T11:58:16.913
> 
> 标签：mysql, sql, database, performance

我正在与另一位开发人员合作开发一种社交网站，人们可以在其中提出类似于 Facebook 的好友请求。但是，他将每个用户的朋友存储为逗号分隔值：

```
user_id | user_friends
101     | 102,103,105 
```

我确信这是非常低效且容易出错的。我会亲自使用关系数据库模型并创建另一个包含列的表`friendship_id (PRIMARY KEY), friender_id and friended_id.`

我对吗？我应该提出什么论据来支持我的立场？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:00:51.363

你是对的。

使用他的系统，您将如何处理好友请求的状态（即取消、待处理、已接受）？

解析 user_friends 字符串会很痛苦，您将无法使用连接来获取复杂的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:02:46.487

虽然使用逗号分隔是可以的，但很难管理搜索你将不得不使用 FIND_IN_SET 并且在更新时你将不得不做更多的工作。Intead 使用其他方式很容易使用。您可以根据需要轻松添加尽可能多的关系。搜索当然很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:19:40.347

再补充一个原因：两个用户朋友之间的任何比较都会因为逗号分隔记录而变得麻烦。例如，人们的共同朋友必须在数据库之外处理，这意味着您需要获取所有数据然后进行比较。数据传输是使用数据库时的主要瓶颈之一。

另一个原因是在关系数据库中使用逗号分隔的记录，因为本质上是关系的东西是彻头彻尾的愚蠢。但这个原因可能是一个但不太现实的......

# regex - Python：无与伦比的组异常

> ID：13913741
> 
> 赞同：3
> 
> 时间：2012-12-17T11:58:17.290
> 
> 标签：regex, replace, python-2.7

我有包含时间的字符串，我想将时间格式化为 12 小时格式。

我试过，

```
pat1 = "(\d+):(\d+)?\s*pm"
pat1 = "(\d+):(\d+)?\s*am"
hooString = "673 HOO: Mon. 7:30 am - 6pm, Tue. 7:30am - 6 pm, Wed. 7:30 am - 6 pm, Thurs. 7:30 am - 6 pm, Fri. 8 am - 5 pm,"
hooString  = sub(compile(pat1, IGNORECASE), "\1:\2 AM", hooString)
hooString  = sub(compile(pat2, IGNORECASE), "\1:\2 PM", hooString)
print hooString 
```

我得到了输出，

```
673 HOO: Mon. 7:30 AM - 6pm, Tue. 7:30 AM - 6 pm, Wed. 7:30 AM - 6 pm, Thurs. 7:30 AM - 6 pm, Fri. 8 am - 5 pm, 
```

但我还要求将“8am or 8 am”替换为“8 AM”，所以我将正则表达式稍微更改为

```
pat1 = "(\d+):?(\d+)?\s*am"
pat2 = "(\d+):?(\d+)?\s*pm" 
```

它向我抛出了“无与伦比的组”异常。因为输入字符串中不存在第二组。

对于“%H:%M %P”和“%H %p”这两个条件，我怎样才能毫无例外地得到我的预期结果

此外，如果我能将“8 am”的结果设为“8:00 AM”，那可能是最好的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:13:02.447

为什么首先有两个组？

```
pat1 = r"(\d+(?:[:]\d+)?)\s*am"
pat1 = r"(\d+(?:[:]\d+)?)\s*pm" 
```

请注意使用原始字符串。否则，您可能会遇到转义问题。

我做了什么？我只是把整个时间都塞进一个组中，并使其成为`:\d+`可选的（与一个非捕获组）。替换当然是`\1 AM`and `\1 PM`。

# asp.net-mvc-3 - 使用 [授权] mvc3

> ID：13913742
> 
> 赞同：1
> 
> 时间：2012-12-17T11:58:17.897
> 
> 标签：asp.net-mvc-3, authorization, boolean-operations

因此，在我的控制器顶部，我添加了 [Authorize]，到目前为止，只有登录用户才能访问这些页面（人员和假日）

但是 homeController 中将用户导航到这些页面的选项卡仍然显示...来自 layout.cs

```
 <li>@Html.ActionLink("Home", "Index", "Home")</li>
            <li>@Html.ActionLink("About", "About", "Home")</li>
            <li>@Html.ActionLink("Person", "Index", "Person")</li>
            <li>@Html.ActionLink("Holidays", "Index", "Holidays")</li> 
```

如果用户登录，我怎样才能让这些选项卡显示。

我尝试了在 AccountController.cs 中添加布尔值的方法

```
else
                    {
                        loggedIn = true;
                        return RedirectToAction("Index", "Home");
                    }
                }
                else
                {
                    loggedIn = false;
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                } 
```

但是我如何从 layout.cs 访问它？

这是正确的方法吗。请指教。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:17:39.200

请试试这个。

```
 if (Request.IsAuthenticated)
        {
            //process here
        }
        else
        {
            //  Response.Redirect("~/Login.aspx");
        } 
```

# java - Spring 无法自动装配 Map bean

> ID：13913752
> 
> 赞同：58
> 
> 时间：2012-12-17T11:58:55.573
> 
> 标签：java, spring, map

我在春天这样定义了一张地图：

```
<util:map id="AdditionalParams" scope="prototype" map-class="java.util.HashMap" 
          key-type="java.lang.String" value-type="java.lang.String">

    <entry key="Start" value="12345" />
    <entry key="Finish" value="12365" />
</util:map> 
```

然后我将此 bean 自动装配到定义为的属性：

```
private @Autowired @Qualifier(value = "AdditionalParams") Map<String, String> additionalParams; 
```

这样做时，会抛出一个异常，说明：

> 原因：org.springframework.beans.factory.BeanCreationException：创建名为“DutyCreator”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 java.util.Map DutyCreator.additionalParams；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项 [map with value type java.lang.String] 找到类型为 [java.lang.String] 的匹配 bean：预计至少有 1 个符合自动装配候选资格的 bean对于这种依赖。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=AdditionalParams)}
> 
> 原因：org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [java.lang.String] 的匹配 bean [值类型为 java.lang.String 的映射]：预计至少有 1 个符合自动装配候选资格的 bean对于这种依赖。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=AdditionalParams)}

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-17T12:19:35.463

从 Spring 4.3 开始，`@Autowired` [可以注入列表和地图](http://docs.spring.io/spring/docs/4.3.0.RELEASE/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)，并且问题中的给定代码可以工作：

> 也就是说，从 4.3 开始，`@Autowired`只要元素类型信息保留在`@Bean`返回类型签名或集合继承层次结构中，集合/映射和数组类型也可以通过 Spring 的类型匹配算法进行匹配。

但是对于较低的 Spring 版本，您无法自动装配这样的集合。但是，您可以执行以下操作：

```
@Resource(name="AdditionalParams")
private Map<String, String> additionalParams; 
```

甚至：

```
@Value("#{AdditionalParams}")
private Map<String, String> additionalParams; 
```

检查[spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)，提示部分：

> 本身定义为集合或映射类型的 bean 不能通过 @Autowired 注入，因为类型匹配不适用于它们。对此类 bean 使用 @Resource

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:21:29.117

似乎您的**@Qualifier(value = "AdditionalParams")**不起作用。

尝试通过以下注释使用地图：

```
@Resource
private Properties AdditionalParams; 
```

并保持您的 applicationContext.xml 文件完好无损。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-10T01:22:57.820

```
@Autowired ApplicationContext ctx;
private  <T> T getBean(String qualifier, Class<T> returnType){
    //use this for loop to print all bean from ctx. so you wont miss the typo.
    /*for(String s:ctx.getBeanDefinitionNames())
        log.info(s);*/
    return ctx.getBean(qualifier, returnType);
} 
```

// 在你的调用中

```
 if(providerList == null){
       providerList = ctx.getBean("providerList", Map.class);
 } 
```

这个解决方案对我很好

# axis2 - Apache-ODE 进程管理

> ID：13913753
> 
> 赞同：1
> 
> 时间：2012-12-17T11:59:00.143
> 
> 标签：axis2, apache-ode

我可以通过
`http://localhost:8080/ode/processes/ProcessManagement?wsdl`.

1.  我想通过此服务获取流程的流程信息并激活它。
    服务具有匹配操作`getProcessInfo`和激活。
    我得到了一个delpoyed`listAllProcesses`包的所有进程。
    因为`getProcessInfo/activate`我需要 Process `pid`。
    我得到一个`<ns:pid>`，使用它会给我带来很多异常。
    使用我之前收到的进程名称和其他内容也不起作用。是 type ，也许
    这就是问题的根源。 但是我现在不知道如何在这里进行类型转换。 （用 eclipse Web Services Explorer 和soapUI 都试过了）`pid``QName`

    **问题：**两个操作的正确请求是什么样的？

2.  当我尝试通过 eclipse 使用 axi2 使用 web 服务时，`local`AnySimpleType 类中有一个未声明的变量。我不热衷于以这种方式使用该服务。但是由于我已经在为 DeploymentService 编写客户端，所以我考虑了这种方法。

    **问题：**如何正确访问 ProcessManagement？

编辑：我对[DeploymentService](https://stackoverflow.com/questions/13621738/apache-ode-bpel-deployment-with-a-webservice-file-transfer)和`undeploy`操作有一个类似的问题。
EDIT2：我发现了 DeploymentService 的问题`undeploy`。
我必须将 Packagename 作为字符串。然后用它制作了一个 javax.xml.namespace.QName 。然后我使用了`setPackageName`上述`undeploy`操作。

**问题 1 的答案**：soapUI with listAllProcesses 返回
`<ns:pid>{ode/bpel/unit-test}HelloWorld2-1</ns:pid>`
getProcessInfo 想要

```
<pmap:getProcessInfo>
    <pid>?</pid>
</pmap:getProcessInfo> 
```

现在我替换`<pid>?</pid>`为
`<pid xmlns:odetest="http://ode/bpel/unit-test">odetest:HelloWorld2-1</pid>` 它，它就像一个魅力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:00:51.697

我记得在使用 Axis2 生成的 WSDL 时参数排序存在问题。如果针对`http://localhost:8080/ode/deployment/services/ProcessManagement`工作中的原始 WSDL 构建请求，您可以尝试吗？

**编辑：**现在我得到了正确的问题，问题是 ODE 期望 QName 以不同的方式序列化，即以 XML 方式而不是 Java 方式。因此，而不是`<ns:pid>{ode/bpel/unit-test}HelloWorld2-1</ns:pid>`正确的符号是`<ns:pid xmlns:odetest="ode/bpel/unit-test">odetest:HelloWorld2-1</ns:pid>`。

# vim - vim 中嵌入的 awk 语法高亮显示

> ID：13913756
> 
> 赞同：3
> 
> 时间：2012-12-17T11:59:16.867
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我有一个语法文件，用于突出 bash 脚本中嵌入的 awk：

```
syn include @AWKScript syntax/awk.vim
syn region AWKScriptCode matchgroup=AWKCommand
    \ start=+[=\\]\@<!'+ skip=+\\'+ end=+'+ contains @AWKScript contained
syn region AWKScriptEmbedded matchgroup=AWKCommand
    \ start=+\<\(g\?awk\|\$AWK\)\>+ skip=+\\$+ end=+[=\\]\@<!'+me=e-1 
    \ contains=@shIdList,@shExprList2 nextgroup=AWKScriptCode
syn cluster shCommandSubList add=AWKScriptEmbedded
hi def link AWKCommand Type 
```

这个部分的问题是：

```
start=+\<\(g\?awk\|\$AWK\)\>+ 
```

它适用于 awk 和 gawk，但不适用于 $AWK。如何添加规则以匹配 $AWK 作为 AWKScriptEmbedded 区域的起始模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:00:39.447

问题是语法组`$AWK`已经突出显示了`shDerefSimple`，因此您的新区域未应用。将语法定义分成两部分并`containedin=`为后者添加：

```
syn region AWKScriptEmbedded matchgroup=AWKCommand
    \ start=+\<g\?awk\>+ skip=+\\$+ end=+[=\\]\@<!'+me=e-1
    \ contains=@shIdList,@shExprList2 nextgroup=AWKScriptCode
syn region AWKScriptEmbedded matchgroup=AWKCommand
    \ start=+\$AWK\>+ skip=+\\$+ end=+[=\\]\@<!'+me=e-1
    \ contains=@shIdList,@shExprList2 containedin=shDerefSimple nextgroup=AWKScriptCode 
```

# wordpress - 在内容加载时阻止颜色图像占位符的代码

> ID：13913760
> 
> 赞同：0
> 
> 时间：2012-12-17T11:59:25.743
> 
> 标签：wordpress, loading

我正在努力寻找一些代码来在内容加载时阻止我的图像占位符的颜色。我主页上的内容从 dB 中获取数据，加载大约需要 3 秒，具体取决于连接速度。使用 Wordpress，我正在尝试创建类似于 http://www.lyricsandtype.com/ 上的纯粉色[和Theo](http://www.lyricsandtype.com/) [http://www.theo-theo.com/](http://www.theo-theo.com/)上的图像网格上的多色

任何指针将不胜感激！谢谢，N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:24:48.637

看起来它是一个简单的背景颜色。当图像尚未加载时它是可见的，然后它就被覆盖了。`background-color`您可以像这样为每个类创建不同的类：

```
.blue{ background-color: blue;}
.yellow{ background-color: yellow;}
.red{ background-color: red;} 
```

然后通过像这样调用其类将背景颜色应用于容器：

```
<div class="red">the div content</div>
<div class="yellow">the div content</div> 
```

是你所追求的吗？

# xslt - 使用 XSLT 删除复数

> ID：13913762
> 
> 赞同：0
> 
> 时间：2012-12-17T11:59:35.243
> 
> 标签：xslt, plural

我不确定这是否可能。是否有可能使用 xslt，最好是 xslt 1，通过一个 xml 文件并删除一个术语，如果它是另一个术语的复数。我有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<Zthes>
<term>
<termId>35518385342487469049732</termId>
<termUpdate>add</termUpdate>
<termName>Doctor</termName>
<termType>PT</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:47:45</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:39</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
</term>
<term>
<termId>19229419919329134598161</termId>
<termUpdate>add</termUpdate>
<termName>Doctors</termName>
<termType>ND</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:48:14</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:14</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
<relation>
<relationType>USE</relationType>
<termId>35518385342487469049732</termId>
<termName>Doctor</termName>
</relation>
</term>
<term>
<termId>179468269297128829432204</termId>
<termUpdate>add</termUpdate>
<termName>Medical Centre</termName>
<termType>PT</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:48:31</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:53</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
</term>
<term>
<termId>109697087683409264068424</termId>
<termUpdate>add</termUpdate>
<termName>Hospitals</termName>
<termType>ND</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:48:53</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:53</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
<relation>
<relationType>USE</relationType>
<termId>179468269297128829432204</termId>
<termName>Medical Centre</termName>
</relation>
 </term>
</Zthes> 
```

我希望能够查看`<termName>`是否`<termType>`具有状态 ND。然后，如果确实如此，请检查该`<termName>`部分中的`<relation>`。如果它们之间的唯一区别是其中一个以's'结尾，则删除`<term>`带有状态ND的：

```
<?xml version="1.0" encoding="utf-8"?>
<Zthes>
<term>
<termId>35518385342487469049732</termId>
<termUpdate>add</termUpdate>
<termName>Doctor</termName>
<termType>PT</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:47:45</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:39</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
</term>
<term>
<termId>179468269297128829432204</termId>
<termUpdate>add</termUpdate>
<termName>Medical Centre</termName>
<termType>PT</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:48:31</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:53</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
</term>
<term>
<termId>109697087683409264068424</termId>
<termUpdate>add</termUpdate>
<termName>Hospitals</termName>
<termType>ND</termType>
<termStatus>active</termStatus>
<termApproval>candidate</termApproval>
<termCreatedDate>20121217T11:48:53</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20121217T11:48:53</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
<relation>
<relationType>USE</relationType>
<termId>179468269297128829432204</termId>
<termName>Medical Centre</termName>
</relation>
 </term>
</Zthes> 
```

XSLT 是最好的方法吗？老实说，我在这里超出了我的深度。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:36:50.900

如果`s`串联足以满足所有使用的术语，则

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="term[termType = 'ND' and concat(relation/termName, 's') = termName]"/>

</xsl:stylesheet> 
```

可能做。它还假设`relation/termName`在 a中只有一个，`term`分别只有第一个是相关的。

如果可以有几个，那么也许

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="term[termType = 'ND' and relation/termName[concat(., 's') = ../../termName]]"/>

</xsl:stylesheet> 
```

更合适。

# ios - 单击图形点iOS时如何显示描述

> ID：13913766
> 
> 赞同：3
> 
> 时间：2012-12-17T11:59:41.847
> 
> 标签：ios, graph, popup, core-plot

有人知道对角线放置图形坐标的值吗？

编辑：我成功地对角显示了 oX 轴的值。也许它可以帮助某人：

```
 label.rotation = M_PI/4; 
```

另一个问题是，是否有人可以给我一些链接或教程，说明如何在散点图的点附近显示描述，我点击。

这是我在图表上绘制的散点图代码：

```
 -(void)initPlot {
[self configureHost];
[self configureGraph];
[self configurePlots];
[self configureAxes];
 }

-(void)configureHost {

self.hostView = [(CPTGraphHostingView *) [CPTGraphHostingView alloc] initWithFrame:CGRectMake(0, 40 , 480, 280)];
self.hostView.allowPinchScaling = YES;
[self.view addSubview:self.hostView];

}

-(void)configureGraph {

graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];
[graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];
self.hostView.hostedGraph = graph;
// 2 - Set graph title
NSString *title = @"Valori";
graph.title = title;
// 3 - Create and set text style
CPTMutableTextStyle *titleStyle = [CPTMutableTextStyle textStyle];
titleStyle.color = [CPTColor whiteColor];
titleStyle.fontName = @"Helvetica-Bold";
titleStyle.fontSize = 16.0f;
graph.titleTextStyle = titleStyle;
graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
graph.titleDisplacement = CGPointMake(0.0f, 10.0f);
// 4 - Set padding for plot area
[graph.plotAreaFrame setPaddingLeft:30.0f];
[graph.plotAreaFrame setPaddingBottom:30.0f];
// 5 - Enable user interactions for plot space
plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;

}

-(void)configurePlots {

// 1 - Get graph and plot space
graph = self.hostView.hostedGraph;
plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
// 2 - Create the three plots

aaplPlot = [[CPTScatterPlot alloc] init];
aaplPlot.dataSource = self;
aaplPlot.identifier = CPDTickerSymbolAAPL;
CPTColor *aaplColor = [CPTColor redColor];
[graph addPlot:aaplPlot toPlotSpace:plotSpace];

msftPlot = [[CPTScatterPlot alloc] init];
msftPlot.dataSource = self;
msftPlot.identifier = CPDTickerSymbolMSFT;
CPTColor *msftColor = [CPTColor clearColor];
[graph addPlot:msftPlot toPlotSpace:plotSpace];
// 3 - Set up plot space

NSArray *array = [[NSArray alloc] initWithObjects:aaplPlot, msftPlot, nil];
[plotSpace scaleToFitPlots:array];

CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];
plotSpace.xRange = xRange;
CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];
plotSpace.yRange = yRange;
// 4 - Create styles and symbols
CPTMutableLineStyle *aaplLineStyle = [aaplPlot.dataLineStyle mutableCopy];
aaplLineStyle.lineWidth = 2.5;
aaplLineStyle.lineColor = aaplColor;
aaplPlot.dataLineStyle = aaplLineStyle;
CPTMutableLineStyle *aaplSymbolLineStyle = [CPTMutableLineStyle lineStyle];
aaplSymbolLineStyle.lineColor = aaplColor;
CPTPlotSymbol *aaplSymbol = [CPTPlotSymbol ellipsePlotSymbol];
aaplSymbol.fill = [CPTFill fillWithColor:aaplColor];
aaplSymbol.lineStyle = aaplSymbolLineStyle;
aaplSymbol.size = CGSizeMake(6.0f, 6.0f);
aaplPlot.plotSymbol = aaplSymbol;

CPTMutableLineStyle *msftLineStyle = [msftPlot.dataLineStyle mutableCopy];
msftLineStyle.lineWidth = 2.0;
msftLineStyle.lineColor = msftColor;
msftPlot.dataLineStyle = msftLineStyle;
CPTMutableLineStyle *msftSymbolLineStyle = [CPTMutableLineStyle lineStyle];
msftSymbolLineStyle.lineColor = msftColor;
CPTPlotSymbol *msftSymbol = [CPTPlotSymbol diamondPlotSymbol];
msftSymbol.fill = [CPTFill fillWithColor:msftColor];
msftSymbol.lineStyle = msftSymbolLineStyle;
msftSymbol.size = CGSizeMake(6.0f, 6.0f);
msftPlot.plotSymbol = msftSymbol;

}

-(void)configureAxes {

// 1 - Create styles
CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
axisTitleStyle.color = [CPTColor whiteColor];
axisTitleStyle.fontName = @"Helvetica-Bold";
axisTitleStyle.fontSize = 12.0f;
CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
axisLineStyle.lineWidth = 2.0f;
axisLineStyle.lineColor = [CPTColor whiteColor];
CPTMutableTextStyle *axisTextStyle = [[CPTMutableTextStyle alloc] init];
axisTextStyle.color = [CPTColor whiteColor];
axisTextStyle.fontName = @"Helvetica-Bold";
axisTextStyle.fontSize = 11.0f;
CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor whiteColor];
tickLineStyle.lineWidth = 2.0f;
CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];
tickLineStyle.lineColor = [CPTColor blackColor];
tickLineStyle.lineWidth = 1.0f;
// 2 - Get axis set
CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;
// 3 - Configure x-axis
CPTAxis *x = axisSet.xAxis;
x.title = @"Ziua Lunii";
x.titleTextStyle = axisTitleStyle;
x.titleOffset = 15.0f;
x.axisLineStyle = axisLineStyle;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
x.labelTextStyle = axisTextStyle;
x.majorTickLineStyle = axisLineStyle;
x.majorTickLength = 4.0f;
x.tickDirection = CPTSignNegative;
CGFloat dateCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];
NSMutableSet *xLabels = [NSMutableSet setWithCapacity:dateCount];
NSMutableSet *xLocations = [NSMutableSet setWithCapacity:dateCount];
NSInteger i = 0;
for (NSString *date in [[CPDStockPriceStore sharedInstance] datesInMonth]) {
    CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:date  textStyle:x.labelTextStyle];
    CGFloat location = i++;
    label.tickLocation = CPTDecimalFromCGFloat(location);
    label.offset = x.majorTickLength;
    if (label) {
        [xLabels addObject:label];
        [xLocations addObject:[NSNumber numberWithFloat:location]];
    }
}
x.axisLabels = xLabels;
x.majorTickLocations = xLocations;
// 4 - Configure y-axis
CPTAxis *y = axisSet.yAxis;
y.title = @"Pret";
y.titleTextStyle = axisTitleStyle;
y.titleOffset = -50.0f;
y.axisLineStyle = axisLineStyle;
y.majorGridLineStyle = gridLineStyle;
y.labelingPolicy = CPTAxisLabelingPolicyNone;
y.labelTextStyle = axisTextStyle;
y.labelOffset = 23.0f;
y.majorTickLineStyle = axisLineStyle;
y.majorTickLength = 4.0f;
y.minorTickLength = 2.0f;
y.tickDirection = CPTSignPositive;
NSInteger majorIncrement = 100;
NSInteger minorIncrement = 50;
CGFloat yMax = 1300.0f;  // should determine dynamically based on max price
NSMutableSet *yLabels = [NSMutableSet set];
NSMutableSet *yMajorLocations = [NSMutableSet set];
NSMutableSet *yMinorLocations = [NSMutableSet set];
for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {
    NSUInteger mod = j % majorIncrement;
    if (mod == 0) {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", j] textStyle:y.labelTextStyle];
        NSDecimal location = CPTDecimalFromInteger(j);
        label.tickLocation = location;
        label.offset = - y.majorTickLength - y.labelOffset;
        if (label) {
            [yLabels addObject:label];
        }
        [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];
    } else {
        [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];
    }
}
y.axisLabels = yLabels;
y.majorTickLocations = yMajorLocations;
y.minorTickLocations = yMinorLocations;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:15:42.673

您可以`-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index`用于此目的，如[Core Plot 的示例中所示](http://code.google.com/p/core-plot/source/browse/examples/CPTTestApp/Source/Controller.m)

# c++ - 竞争隐式和模板复制构造函数

> ID：13913769
> 
> 赞同：3
> 
> 时间：2012-12-17T11:59:59.957
> 
> 标签：c++, templates, constructor, copy, implicit

关于[这篇](https://stackoverflow.com/questions/1249814/templated-copy-constructor-fails-with-specific-templated-type)文章，请解释这种行为：

```
#include <stdio.h>

struct B { B(B&) { } B() { } };
struct A {
  template<typename T>
  A(T&){ printf("A(T&)\n"); }
  A() { }
//  B b; // when this is uncommented, output changes 
  int i;
};

int main() {
  A a;
  A b(a);

// B b; commented:
// template wins:
//   A<A>(A&)  -- specialization
//   A(A const&); -- implicit copy constructor
// (prefer less qualification)

// B b; uncommented:
// implicit copy constructor wins:
//   A<A>(A&)  -- specialization
//   A(A&); -- implicit copy constructor
// (prefer non-template)

  printf("\nA\n");
  A const a1;
  A b1(a1);

// B b; commented:
// implicit copy constructor wins: 
//   A(A const&) -- specialization
//   A(A const&) -- implicit copy constructor
// (prefer non-template)

// B b; uncommented:
// template wins:
//   A(A const&) -- specialization
// (implicit copy constructor not viable)
} 
```

B b 时输出变化；未注释。

显然，隐式复制构造函数从取消注释`A(A const&)`变为`A(A &)`何时`B b;`。为什么？当我更改`B(B&){}`为`B(const B&){}`复制构造函数时，更改回`A(A const&)`. 现在编译器对 的形式参数感到`A()`满意`const`? 这跟标准有关系吗？（我使用的是 gcc 4.2.4。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:12:27.003

`A`类的隐式复制构造函数的签名`A(const A&)`仅**在可行**的情况下。当您取消注释该`B b;`行时，此复制构造函数不可行，因为复制构造函数`B`需要一个非常量输入参数。

```
// Illegal implicit copy constructor
A::A(const A& a) :
b(a.b),  // This line would be illegal because a.b is const
i(a.i)
{
} 
```

在这种情况下，隐式复制构造函数也是非常量版本：`A(A&);`.

```
// Legal implicit copy constructor
A::A(A& a) :
b(a.b),  // Fine: a.b is now non-const
i(a.i)
{
} 
```

这就是`B b;`在类定义中取消注释会更改隐式复制构造函数并因此更改程序行为的原因。

编辑：不直接相关，但为了完整起见：如果`B`没有可访问的复制构造函数（因为它被声明`private`或删除），`A`则不会有隐式复制构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:13:35.573

是的，这种行为在 12.8/8 标准中得到了很好的定义：

> 类的隐式声明的复制构造函数`X`将具有`X::X(const X &)`if [... conditions where this s sense ...] 的形式，否则 [it] 将具有形式`X::X(X &)`。

事实上，如果你的类`A`有一个 member `B`，那么 const 形式是不可能的，因此隐式声明的复制构造函数采用非常量形式。

请注意，模板化构造函数永远不是*复制*构造函数。

# reporting-services - 报告预览中的 ssrs 报告错误：无法创建与数据源的连接

> ID：13913775
> 
> 赞同：1
> 
> 时间：2012-12-17T12:00:47.240
> 
> 标签：reporting-services, datasource

我有一个使用共享数据集和共享数据源的 ssrs 报告。我可以在本地工作区中毫无问题地预览它。现在我已将报告复制到远程计算机上，并在其中修改了数据源的连接属性。我无法在此系统上预览报告，出现错误：

“报表处理过程中发生错误。共享数据集执行错误。无法与共享数据集的数据源创建连接。” （我的翻译，消息是德语）

我可以创建与服务器的连接（数据源中的“测试连接”成功）并在查询设计器中访问数据集的数据。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:13:38.377

问题出在未安装驱动程序或安装不正确的远程计算机上。

我遇到了未设置服务器但我的电脑已设置的问题。因此，我的查询设计器工作但从服务器发布和运行时却没有。

# javascript - 为 FOR LOOP 中的每次迭代添加暂停/间隔

> ID：13913786
> 
> 赞同：1
> 
> 时间：2012-12-17T12:01:17.613
> 
> 标签：javascript, for-loop, iteration, settimeout, setinterval

我想编写一个 for 循环，在每次迭代后以间隔打印数字 1 到 10 *“**[像这样](http://jsfiddle.net/cynNy/)**”*

我怎样才能实现它？我尝试了 sleep() setInterval() setTimeout(") 和什么没有但似乎找不到任何可行的解决方案。如果可能的话，我想只使用纯 Javascript 来做到这一点。

```
function abc(){
    for(i=1;i<=10;i++){
        document.write(i+"<br>");
        sleep(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:14:52.247

要回答这个问题，要获得类似睡眠功能的东西，您可以像这样写一些东西作为辅助功能

```
function sleep(dur) {
 var d = new Date().getTime() + dur;
  while(new Date().getTime() <= d ) {
    //Do nothing
  }

}

console.log(new Date().getTime())
     sleep(1000)

 console.log(new Date().getTime()) 
```

然后您*可以*`sleep`在每次迭代后调用该函数，例如

```
function abc(){
    for(i=1;i<=10;i++){
        document.write(i+"<br>");
        sleep(1000);
    }
} 
```

但是请注意，`sleep`此时会冻结您的浏览器，而当您只想定期做某事时，您并不是真的不想这种行为

`window.setInterval`在这种情况下会是你想要的

```
 function abcd(i){
       document.write(i + "<br>")
    }

function repeatedTimeout(func,times,duration) {
    var args = Array.prototype.slice.call(arguments).splice(3);
    var i = 0;
    args.push(i)
    var wrap = function () {
     if(args[args.length - 1] >= times)
       window.clearInterval(wrap)
      else {

         func.apply(this,args)
         args[args.length - 1]++
       }
    }
    window.setInterval(wrap,duration)
}
repeatedTimeout(abcd,10,1000) 
```

它将每 1000 毫秒调用 10 次，而不会冻结 Brower

这是[JSBin](http://jsbin.com/iyaser/1/edit)

## 更新

如果它真的必须是一个 for 循环，你可以做这样的事情，不管它对我有什么意义

```
for (var i = 0; i <= 10 ; i++) {
  window.setTimeout(
    (function (i){ 
      return function() {
        document.write(i + "<br>")
      }
    })(i),i * 1000)
  } 
```

在这种情况下，这是另一个[JSBin](http://jsbin.com/okusez/1/edit)

这将调用`window.setTimeout`一个`for`循环和多个超时`i`作为超时，这会起作用，但我宁愿建议`setInterval`像你在评论中发布的小提琴中所做的那样使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:47:39.337

由于浏览器中 JavaScript 的主要异步（和单线程）性质，诸如此类的构造`sleep()`并不是可行的方法。

您可以编写一个通用函数，使用`setTimeout()`它将执行循环，然后传入应该以 x 毫秒间隔运行的函数。至少你会有一个可重用的容器，你可以在其中运行你的代码。

```
function loopn(n, fn, delay)
{
    if (n > 0) {
        fn();
        if (n > 1) {
            setTimeout(function() {
                loopn(n - 1, fn, delay);
            }, delay);
        }
    }
}

loopn(10, function() {
    console.log('hello there');
}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:07:08.750

您可以将循环解构为递归函数并用于`setTimeout`实现暂停。

```
var i = 0;
var limit = 10;

function loop(){
    console.log(i);
    i++;
    if(i < limit)
    {

        setTimeout(loop, 100);
    }
}
loop();
​ 
```

# jenkins - 在 Jenkins Job 上使用 Sonar Runner 的声纳无法访问类

> ID：13913787
> 
> 赞同：2
> 
> 时间：2012-12-17T12:01:23.967
> 
> 标签：jenkins, sonarqube, sonar-runner

我试图对 Jenkins Job 进行声纳分析。我使用蚂蚁，所以我在项目中使用 Sonar Runner 和 sonar.properties。我将二进制文件配置为

sonar.binaries=build/ant/classes

成功构建后，Sonar 启动并运行了一段时间。但是我在字节码分析过程中收到了很多警告。

我收到警告 XX - 无法通过 ClassLoader 访问“XX”类。

对于每一堂课...

我真的不知道为什么课程都在那里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:03:41.240

这些是 Findbugs 发出的警告，需要访问源代码、编译二进制文件和第 3 方库。

要解决这些警告，您需要包含一个额外的**sonar.libraries**属性，其中填充了您的代码所依赖的第 3 方 jar（请参阅[分析参数文档](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T00:25:52.680

我实际上遇到了同样的问题，但那是因为 Maven 缓存的问题。

我在本地机器上的目录中运行了 mvn clean install，但在虚拟机上的目录中运行声纳。这导致找不到类。

# qt - Qt 类层次结构图/pdf

> ID：13913789
> 
> 赞同：4
> 
> 时间：2012-12-17T12:01:31.513
> 
> 标签：qt, qt4, class-hierarchy, poster

你知道 Qt 4 的类层次结构的任何像样的图像或 pdf 吗？

比如他们对 Qt 3 的看法：

[ftp://ftp.trolltech.com/qt/pdf/3.0/qt30-class-chart.pdf](ftp://ftp.trolltech.com/qt/pdf/3.0/qt30-class-chart.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:36:51.983

这里有一个 Qt 4.3 的类表：

[http://doc.qt.digia.com/extras/qt43-class-chart.pdf](http://doc.qt.digia.com/extras/qt43-class-chart.pdf)

我不知道有任何更新版本的班级图表。

# vb.net - vb.net：跳出异常函数

> ID：13913790
> 
> 赞同：0
> 
> 时间：2012-12-17T12:01:39.367
> 
> 标签：vb.net

我只是在 .NET 中修改我的 VB6。

我有一个名为 NonNullString(byval uAny As Object) As String 的函数

在 VB6 中，我使用了一个 sqlite 包装器，并且可以通过使用来访问记录集的成员

```
Dim sString$
sString = r("somefield") 
```

（没有“.Value”）

我确实有很多这样的字段，我把它们中的大部分都改成了“.Value”，但有些我忘记了。

因此在函数 NoNullString 中引发了异常，我正在寻找一种快速跳出函数的方法，以便查看调用者是什么并改进代码。

F5 不做这项工作。

有人有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:03:29.810

按`CTRL`+`L`查看调用堆栈。从那里您可以浏览堆栈。

然后，您可以在错误函数上使用`Set Next Statement`( `CTRL+F9`) 。`End Function`两次`F10`完成这个函数的执行。重复此步骤，直到您处于您认为错误起源的范围内。然后，如果您使用的是 x86（因此您`Edit&Continue`有空），请修复您的代码，并将您当前执行的行拖到发生此修复的那一刻。然后尝试再次运行您的功能。

不幸的是，你不能`Set Next Statement`在我最初建议的当前块函数/子之外。

# gcc - 删除 GCC ABI 更改的注释

> ID：13913791
> 
> 赞同：9
> 
> 时间：2012-12-17T12:01:41.360
> 
> 标签：gcc, g++

当我用 GCC 4.7 编译我的程序时，我得到以下注释：

```
/usr/include/c++/4.7/backward/binders.h:167:5: note: the ABI of passing structure with complex float member has changed in GCC 4.4 here 
```

有没有办法摆脱它？我试图用谷歌搜索它，但我发现的只是打印注释字符串的 GCC 源代码行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T14:13:20.877

将选项传递`-Wno-psabi`给 GCC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-18T20:48:38.493

我收到了同样的信息：

```
/usr/include/c++/4.8.3/bits/stl_pair.h:276:5: note: the ABI of passing structure with complex float member has changed in GCC 4.4 
```

对于以下代码行：

```
indices.push_back(make_pair(centreIndex,centre)); 
```

其中 centerIndex 是一个整数，而 center 是一个复数浮点数。

为了摆脱错误消息，我将代码更改为：

```
indices.push_back(pair<int,complex<float> >(centreIndex,centre)); 
```

我认为这是一种更好的方法，因为 make_pair 只是这种更直接的创建对的方法的包装器。

# php - PHP glob 样式匹配

> ID：13913796
> 
> 赞同：11
> 
> 时间：2012-12-17T12:01:54.437
> 
> 标签：php, path, pattern-matching, glob

为了简短起见，我编写了一个访问控制系统。

该系统的要求之一是通过将其与模式匹配来检查是否可以访问规范/规范化路径。

首先想到的是 PREG，问题是，模式是基于文件的，即类似于`glob()`. 基本上，它只是包含`?`（匹配一个任意字符）或`*`（匹配任何字符）的模式。

所以简单来说，我需要`glob()`在 PHP 上重新创建匹配功能。

示例代码：

```
function path_matches($path, $pattern){
    // ... ?
}

path_matches('path/index.php', 'path/*');        // true
path_matches('path2/', 'path/*');                // false
path_matches('path2/test.php', 'path2/*.php');   // true 
```

一个可能的解决方案是转换`$pattern`成一个正则表达式而不是 use `preg_match()`，还有其他方法吗？

**注意：**我不能使用正则表达式的原因是模式将由非程序员编写。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T12:21:53.267

使用[`fnmatch()`](http://php.net/manual/en/function.fnmatch.php)，这似乎可以解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T12:23:15.520

转换为正则表达式对我来说似乎是最好的解决方案。您需要做的就是转换`*`为`.*`、`?`和。然而，这并不像看起来那么简单，因为就你做事的顺序而言，这是一个先有鸡还是先有蛋的问题。`.``preg_quote`

我不*喜欢*这个解决方案，但这是我能想到的最好的解决方案：使用正则表达式生成正则表达式。

```
function path_matches($path, $pattern, $ignoreCase = FALSE) {

  $expr = preg_replace_callback('/[\\\\^$.[\\]|()?*+{}\\-\\/]/', function($matches) {
    switch ($matches[0]) {
      case '*':
        return '.*';
      case '?':
        return '.';
      default:
        return '\\'.$matches[0];
    }
  }, $pattern);

  $expr = '/'.$expr.'/';
  if ($ignoreCase) {
    $expr .= 'i';
  }

  return (bool) preg_match($expr, $path);

} 
```

**编辑**添加了区分大小写的选项。

[看到它工作](http://codepad.viper-7.com/jAB3G7)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-11T08:34:24.903

PHP 中已经有一个函数，自 PHP 4.3.0 起就包含在内。

> [`fnmatch()`](http://php.net/manual/en/function.fnmatch.php)检查传递的字符串是否匹配给定的 shell 通配符模式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T12:27:34.907

来自 glob() 的 PHP 文档。我认为 preg_match 无论如何都是最好的解决方案。

[http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

```
<?php   
function match_wildcard( $wildcard_pattern, $haystack ) {
   $regex = str_replace(
     array("\*", "\?"), // wildcard chars
     array('.*','.'),   // regexp chars
     preg_quote($wildcard_pattern)
   );

   return preg_match('/^'.$regex.'$/is', $haystack);
}

$test = "foobar and blob\netc.";
var_dump(
    match_wildcard('foo*', $test),      // TRUE
    match_wildcard('bar*', $test),      // FALSE
    match_wildcard('*bar*', $test),     // TRUE
    match_wildcard('**blob**', $test),  // TRUE
    match_wildcard('*a?d*', $test),     // TRUE
    match_wildcard('*etc**', $test)     // TRUE
);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-10T00:05:05.843

我认为这应该适用于将 glob-patterns 转换为 regex-patterns：

```
function glob2regex($globPatt) {
    return '/'.preg_replace_callback('/./u', function($m) {
        switch($m[0]) {
            case '*': return '.*';
            case '?': return '.';
        }
        return preg_quote($m[0],'/');
    }, $globPatt).'\z/AsS';
} 
```

如果要防止匹配目录名称，则可能要使用`[^\\/]*`for 。`*``*`

# keyboard-shortcuts - 从 Midnight Commander 调用 Vim 时，Ctrl-O 让我卡在 Midnight Commander 面板视图中

> ID：13913801
> 
> 赞同：7
> 
> 时间：2012-12-17T12:02:12.627
> 
> 标签：keyboard-shortcuts, debian, vim, mc

默认情况下，Midnight Commander 中的 Ctrl-O 用于显示控制台输出。在`/etc/mc/mc.keymap`我设置`ShowCommandLine`了另一个键盘快捷键，现在 MC 对 Ctrl-O 没有反应。

同样，默认情况下，Vim 中的 Ctrl-O 用于循环浏览以前访问过的文件。在我的`~/.vimrc`中，我添加了`map <C-o> <nop>`并且，以防万一`imap <C-o> <nop>`。现在，如果直接从终端或 xterm 调用，Vim 也不会对 Ctrl-O 做出反应。

*尽管如此*，如果我从 Midnight Commander 提示符下调用 Vim，然后按 Ctrl-O，我最终会进入 Midnight Commander 的标准两面板模式，并且*无法 Ctrl-O*（或 Ctrl-I）*退出它*。

当然，如果我尝试从 MC 启动一个新的 Vim 任务，它现在会告诉我“shell 已经在运行一个命令”，如果我只是想 F10 退出 MC，它会说“shell 仍然处于活动状态。退出无论如何？”，如果我这样做，它当然会在此过程中杀死 Vim。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:39:56.373

这里发生的情况是 Vim 默认捕获`Ctrl`+`O`以在跳转列表中导航回来。当你这样做时`:map <C-o> <nop>`，Vim 仍然会捕获`Ctrl`+`O`键序列；它只是没有做任何事情。就午夜指挥官而言，你从未按下过那些键；Vim 首先捕获输入。我不知道有什么方法可以让 Vim 停止捕获默认键序列。

# jquery - 如何定义溢出-y？

> ID：13913805
> 
> 赞同：3
> 
> 时间：2012-12-17T12:02:20.957
> 
> 标签：jquery, css

我不明白为什么它不喜欢我的`overflow-y`语法？

![在此处输入图像描述](../Images/2b9b01970f43dae3144969b25ebb48b7.png)

```
function show_modal(target){
    $(target).modal({
        backdrop: true,
        keyboard: true
    }).css({
        width: 'auto',
        overflow-y: 'hidden',
        'margin-left': function () {
            return -($(this).width() / 2);
        }
    });
    $(target).modal('show');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:03:41.620

DOM 将 CSS 属性公开为它们自身的驼峰版本。尝试`overflowY`改用。

作为一般说明，要将连字符放在对象键名中，您需要使用引号：

```
{
    "width": 'auto',
    "overflow-y": 'hidden',
    "margin-left": function () {
        return -($(this).width() / 2);
    }
} 
```

~~我不确定 jQuery 是否会自动将 CSS 名称映射到相应的 DOM 版本，所以最好`overflowY`改用。~~

正如 Chris Heald 所指出的，jQuery 实际上接受连字符的属性名称以及骆驼大小写的属性名称，因此`overflow-y`（如果您使用引号）或者`overflowY`应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:07:29.250

`overflow-y`是溢出减去 y，这是一个语法错误，因为对象文字的关键部分必须是*标识符*、*字符串文字*或*数字文字*，而不是*表达式*。要使用 overflow-y 属性，您可以将属性名称引用到字符串文字中，如下所示：`'overflow-y': 'hidden',`

# java - 想通过电子邮件或手机号码使用 Spring Security 登录

> ID：13913806
> 
> 赞同：0
> 
> 时间：2012-12-17T12:02:25.573
> 
> 标签：java, spring, spring-social

想要使用 Spring Security 使用电子邮件或手机号码登录。

这是我的代码：--

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/admin" security="none" /> 

    <http auto-config="true" use-expressions="true">

        <intercept-url pattern="/admin*" access="hasRole('SYS_ADMIN')" />
        <intercept-url pattern="/cab-stop-admin*" access="hasAnyRole('SYS_ADMIN','CABSTOP_ADMIN')" />
        <intercept-url pattern="/driver*" access="hasAnyRole('DRIVER','SYS_ADMIN','CABSTOP_ADMIN')" />
        <intercept-url pattern="/customer*" access="hasAnyRole('CUSTOMER','SYS_ADMIN','CABSTOP_ADMIN')" />

        <form-login login-page="/login" default-target-url="/role-check"
            authentication-failure-url="/login?error=true" />
            <remember-me key="_spring_security_remember_me" data-source-ref="fmsDataSource" authentication-success-handler-ref="loginSuccessHandler"/>
        <logout logout-success-url="/" />
        <access-denied-handler error-page="/login"/>
         </http> 
         <beans:bean id="loginSuccessHandler" class="com.cabfms.authentication.LoginSuccessHandler"></beans:bean>
         <authentication-manager> 
        <authentication-provider> 
         <!-- <password-encoder hash="md5"  />  -->
        <jdbc-user-service data-source-ref="fmsDataSource"  
        users-by-username-query="select Email,Password, 'true' as enabled from login_details where Is_Blocked = 'N' and Deleted='N' and Email=?"
        authorities-by-username-query="select u.Email, ur.Role_Name from login_details u, role_master ur where u.Role_Master_Id = ur.Role_Master_Id and u.Email =?" />
    </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

在这段代码中，我有一个类似的查询

```
select Email,Password, 'true' as enabled from login_details where Is_Blocked = 'N' and Deleted='N' and Email=? 
```

我只匹配电子邮件，但我也想匹配手机号码。** 表示我想匹配电子邮件或手机号码（任何一个），因为我从 JSP（电子邮件或手机）传递了任何一个

所以请提出你的答案

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:37:49.703

您的 JSP 看起来如何？您是否有一个带有`j_username`或正在使用电子邮件和移动设备的两个单独字段的表单？

如果您同时通过两者，则必须实现自己的身份验证管理器。声明时 Spring Security 使用的具体用户详细信息服务`jdbc-user-service>`是`JdbcDaoImpl`which implements `UserDetailsService`。该接口有一个`loadUserByUsername(String)`显然只接受用户名的方法。

如果您想允许您的用户在一个名为的文本输入中输入电子邮件或移动设备，*如果*您`j_username`的查询是

```
... where Is_Blocked = 'N' and Deleted='N' and (Email=? or Mobile=?) 
```

# jquery - 列表值未绑定到 kendoui 中的移动 ListView

> ID：13913815
> 
> 赞同：0
> 
> 时间：2012-12-17T12:02:58.750
> 
> 标签：jquery, kendo-ui

我正在使用 Web 服务从数据库中检索值。我编写了用于将列表值从 Web 服务绑定到移动列表视图的书面 Fallowing 代码。但是值未显示在列表视图中。从数据库绑定数据是否有任何问题。

```
<div data-role="view" id="flat" data-init="mobileListViewDataBindInitFlat" data-title="ListView"
    data-layout="databinding">
    <ul id="flat-listview">
    </ul>
</div>    

<script type="text/javascript">  
    $(function () {
        var dataS = new kendo.data.DataSource({
            transport: {
                read: {
                    type: 'POST',
                    url: 'mobileAppWebService.asmx/EmployeeNames',
                    dataType: 'json',
                    data: '{}',
                    contentType: 'application/json; charset=utf-8'
                },
                schema: {
                    data: 'd'
                }
            }
        });

        $("#flat-listview").kendoMobileListView({
            dataSource: dataS,
            template: "${ename}"
        });

    });       
</script>
<script>
    var app = new kendo.mobile.Application(document.body);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:46:08.073

```
<div data-role="view" id="grouped" data-init="mobileListViewDataBindInitGrouped"
    data-transition="" data-title="ListView" data-layout="databinding">
    <ul id="grouped-listview">
    </ul>
</div>
<script type="text/x-kendo-template" id="ListViewTemplate">
    <div class="GetEmployeeData">
        <p>${EName}</p>
    </div>
</script>
<script type="text/javascript">
function mobileListViewDataBindInitFlat() {
$.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "MobileAppService.asmx/GetEmployeeData",
            dataType: "json",
            success: function (data) {
                $("#flat-listview").kendoMobileListView({
                    dataSource: data.d,
                    template: $("#ListViewTemplate").html()
                });
            },
            failure: function (msg) {
                alert(msg);
            }
        });
    }
  var app = new kendo.mobile.Application();

</script> 
```

试试这样

# c# - 在非 Controller 类中获取 QueryString

> ID：13913817
> 
> 赞同：0
> 
> 时间：2012-12-17T12:03:02.133
> 
> 标签：c#, .net, asp.net-mvc

我想`QueryString`在非控制器类中获取

```
string configType = Request.QueryString["configType"]; 
```

我应该使用什么命名空间？

`using System.Web`不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:19:27.903

试试这个：

```
var valueOfT = System.Web.HttpContext.Current.Request.QueryString["t"]; 
```

但要有主动性`HttpContext`。

*但我最好建议将值从您的控制器类传递给非控制器类。*

# c++ - 如何在 OSX 上获得“协同设计”的 gdb？

> ID：13913818
> 
> 赞同：46
> 
> 时间：2012-12-17T12:03:01.970
> 
> 标签：c++, macos, debugging, gdb, code-signing

因为我需要启用 Python 的`gdb`，所以我通过安装了另一个版本

```
brew tap homebrew/dupes
brew install gdb 
```

我想将它`gdb`与 Eclipse CDT 一起使用，我在调试设置中输入了二进制文件的路径。但是，启动调试程序失败并显示以下消息：

```
Error in final launch sequence
Failed to execute MI command:
-exec-run
Error message from debugger back end:
Unable to find Mach task port for process-id 39847: (os/kern) failure (0x5).\n (please check gdb is codesigned - see taskgated(8))
Unable to find Mach task port for process-id 39847: (os/kern) failure (0x5).\n (please check gdb is codesigned - see taskgated(8)) 
```

在这种情况下，“协同设计”是什么意思？我怎样才能让它`gdb`运行？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-09-05T04:15:59.417

> I.1 对调试器进行代码设计
> 
> Darwin Kernel 要求调试器在被允许控制其他进程之前具有特殊权限。这些权限是通过对 GDB 可执行文件进行代码签名来授予的。如果没有这些权限，调试器将报告错误消息，例如：
> 
> ```
> Starting program: /x/y/foo
> Unable to find Mach task port for process-id 28885: (os/kern) failure (0x5).
>  (please check gdb is codesigned - see taskgated(8)) 
> ```
> 
> 代码设计需要证书。以下过程说明了如何创建一个：
> 
> *   启动 Keychain Access 应用程序（在 /Applications/Utilities/Keychain Access.app 中）
> *   选择 Keychain Access -> Certificate Assistant -> Create a Certificate... 菜单
> *   然后：
>     *   为新证书选择一个名称（此过程将使用“gdb-cert”作为示例）
>     *   将“身份类型”设置为“自签名根”
>     *   将“证书类型”设置为“代码签名”
>     *   激活“让我覆盖默认值”选项
> *   单击“继续”几次，直到出现“指定证书的位置”屏幕，然后将“钥匙串”设置为“系统”
> *   单击“继续”，直到创建证书
> *   最后，在视图中，双击新建证书，将“使用此证书时”设置为“始终信任”
> *   退出钥匙串访问应用程序并重新启动计算机（不幸的是，这是必需的）
> 
> 创建证书后，可以对调试器进行代码签名，如下所示。在终端中，运行以下命令...
> 
> ```
> codesign -f -s  "gdb-cert"  <gnat_install_prefix>/bin/gdb 
> ```
> 
> ...其中“gdb-cert”应替换为上面选择的实际证书名称，并应替换为您安装 GNAT 的位置。

*来源：[https ://gcc.gnu.org/onlinedocs/gcc-4.8.1/gnat_ugn_unw/Codesigning-the-Debugger.html](https://gcc.gnu.org/onlinedocs/gcc-4.8.1/gnat_ugn_unw/Codesigning-the-Debugger.html)*

***更新：** High-Sierra（证书助理 - 未知错误）* [https://apple.stackexchange.com/questions/309017/unknown-error-2-147-414-007-on-creating-certificate-with-certificate-assist](https://apple.stackexchange.com/questions/309017/unknown-error-2-147-414-007-on-creating-certificate-with-certificate-assist)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-03T15:39:36.433

检查证书的信任度，它必须受信任才能进行代码签名（在钥匙串访问中证书视图信任部分的倒数第三个 yosemite 上）。

起初，证书对钥匙串的代码签名并不为人所知，因为缺少扩展目的“代码签名”，如果您查看钥匙串并双击证书，您可以找到它：

[![在此处输入图像描述](../Images/ad41b39f18da9550f567cd35f8833c41.png)](https://i.stack.imgur.com/xA8Zr.png)

我解决了这个问题：

[![在此处输入图像描述](../Images/32099f9920846b288633ef99eb083878.png)](https://i.stack.imgur.com/4Ulnq.png)

然后，在将证书从钥匙串拖放到我的桌面后，我将证书添加到受信任的签名证书中，这创建了 ~/Desktop/gdb-cert.cer：

```
$ sudo security add-trusted-cert -d -r trustRoot -p codeSign -k /Library/Keychains/System.keychain ~/Desktop/gdb-cert.cer 
```

这有点棘手，因为我被一些互联网帖子误导并且没有查看手册页。有人说你应该使用 add-trust ( [https://llvm.org/svn/llvm-project/lldb/trunk/docs/code-signing.txt](https://llvm.org/svn/llvm-project/lldb/trunk/docs/code-signing.txt) )。可怕的是命令成功了，但没有做它“应该”做的事情（好吧，这是错误的命令，但它应该告诉我这是错误的）。

之后，我在受信任的证书中找到了新证书，如下所示：

```
$ security find-identity -p codesigning

Policy: Code Signing
  Matching identities
      1) E7419032D4..... "Mac Developer: FirstName LastName (K2Q869SWUE)"    (CSSMERR_TP_CERT_EXPIRED)
      2) ACD43B6... "gdb-cert"
  2 identities found

  Valid identities only
      1) ACD43... "gdb-cert"
  1 valid identities found 
```

在我的情况下，苹果证书已过期，但我用来签署 gdb 的证书没有过期（好吧，我只是自己创建的）。另请注意，“security add-trusted-cert”（-p codeSign）和“security find-identity”命令（-p codesigning）的策略名称不同。然后我继续签署 gdb，我也总是得到：

```
$ codesign --sign gdb-cert.cer --keychain ~/Library/Keychains/login.keychain `which gdb`
  gdb-cert.cer: no identity found 
```

因为我的印象是我必须将证书文件的文件名提供给 --sign 选项，但实际上这是我应该提供的证书的 CN，并且应该在信任库中。双击钥匙串中的证书时，您可以在此处找到 CN：

[![在此处输入图像描述](../Images/efb3e3b77f8a234e658fe9904cd2eb76.png)](https://i.stack.imgur.com/Ib6hc.png)

或在“security find-identity -p codesigning”的上述输出中。然后我继续签名，我必须给它正确的钥匙串：

```
 codesign -s gdb-cert --keychain /Library/Keychains/System.keychain `which gdb` 
```

我必须输入 root 密码才能访问钥匙串。

然后给了我一个工作的 gdb，它应该给你一个签名的应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-18T12:54:05.133

我让 gdb 在 OSX 10.9 上工作而没有以这种方式进行代码设计（[在此处](http://trac.macports.org/ticket/39349#comment:6)描述）：

1.  使用 macports 安装 gdb。（也许你可以跳过它）

2.  > sudo nano /System/Library/LaunchDaemons/com.apple.taskgated.plist

    在第 22 行，第 27 列将选项字符串从 更改`-s`为`-sp`。

3.  重新启动计算机。

4.  使用 gdb

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-17T12:29:29.360

看来您需要签署可执行文件。有关更多信息，请参阅这些链接。如果您不打算重新分发该版本的`gdb`.

[https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html)

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/codesign.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/codesign.1.html)

或者，您可以在系统上禁用代码签名，尽管这会带来安全风险。为此，请尝试`sudo spctl --master-disable`在终端中运行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-19T23:16:16.057

如果使用`gdb`不是硬性要求，您也可以将`lldb`其用作替代方案。它已经在您的系统上，不需要进行代码签名：

```
$ lldb stddev_bugged
(lldb) target create "stddev_bugged"
Current executable set to 'stddev_bugged' (x86_64).
(lldb) b mean_and_var
Breakpoint 1: where = stddev_bugged`mean_and_var + 17 at stddev_bugged.c:17, address = 0x0000000100000b11
(lldb) r
Process 1621 launched: '/Users/richardschneeman/Documents/projects/21stCentury/02/example-00/stddev_bugged' (x86_64)
Process 1621 stopped
* thread #1: tid = 0xc777, 0x0000000100000b11 stddev_bugged`mean_and_var(data=0x00007fff5fbff590) + 17 at stddev_bugged.c:17, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000b11 stddev_bugged`mean_and_var(data=0x00007fff5fbff590) + 17 at stddev_bugged.c:17
   14   typedef struct meanvar {double mean, var;} meanvar;
   15
   16   meanvar mean_and_var(const double *data){
-> 17       long double avg = 0,
   18             avg2 = 0;
   19       long double ratio;
   20       size_t count= 0;
(lldb) 
```

这是一个转换`gdb`为`lldb`命令的表[http://lldb.llvm.org/lldb-gdb.html](http://lldb.llvm.org/lldb-gdb.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-12T18:39:29.667

我最终不得不遵循[这些指示](http://panks.me/posts/2013/11/install-gdb-on-os-x-mavericks-from-source/)，而不是其他人建议的指示。

我仍然不确定是否是`killall taskgated`启用 root 用户的行为或过程有所不同。

有人说重启是必要的。我发现根据上述说明，情况可能并非如此。

我也做了@klm123 推荐的改变，所以这也可能有所贡献。

请注意，我使用的是自制软件，而不是 macports。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-03T14:11:10.107

这是一个较老的问题，但似乎没有一个解决方案对我有用（我使用的是 Mojave）。转换为 lldb 不是问题的解决方案 - 它只是一种解决方法。

在尝试了几种解决方案后，我发现可以工作的解决方案位于此处：[https ://gist.github.com/gravitylow/fb595186ce6068537a6e9da6d8b5b96d#gistcomment-2891198](https://gist.github.com/gravitylow/fb595186ce6068537a6e9da6d8b5b96d#gistcomment-2891198)

其中引用了这个网站：[https ://sourceware.org/gdb/wiki/PermissionsDarwin#Sign_and_entitle_the_gdb_binary](https://sourceware.org/gdb/wiki/PermissionsDarwin#Sign_and_entitle_the_gdb_binary)

该解决方案涉及代码签名的略微修改版本。本质上，主要区别是在签署证书时，在共同签名时必须传递权利 XML 文件。下面我从头到尾复制/粘贴了所有步骤的源软件网站的内容。

> 1.1。在系统钥匙串中创建证书
> 
> 启动钥匙串访问应用程序（/Applications/Utilities/Keychain Access.app）
> 
> 打开菜单项/钥匙串访问/证书助手/创建证书...
> 
> 选择一个名称（示例中为 gdb-cert），将 Identity Type 设置为 Self Signed Root，将 Certificate Type 设置为 Code Signing，然后选择 Let me override defaults。单击 Continue 几次，直到出现 Specify a Location For The Certificate 屏幕，然后将 Keychain 设置为 System。
> 
> 如果您无法将证书存储在系统钥匙串中：改为在登录钥匙串中创建它，然后将其导出。然后，您可以将其导入系统钥匙串。
> 
> 最后，退出 Keychain Access 应用程序以刷新证书存储。
> 
> 控制：在终端类型
> 
> ```
> security find-certificate -c gdb-cert 
> ```
> 
> 这应该显示有关您新铸造的证书的一些详细信息，例如
> 
> 钥匙串：“/Library/Keychains/System.keychain”版本：256 类：0x80001000 属性：“alis”="gdb-cert" [...]
> 
> 确保 keychain: 是系统钥匙串，如图所示。
> 
> 另外，请确保您的证书尚未过期：
> 
> ```
> security find-certificate -p -c gdb-cert | openssl x509 -checkend 0 
> ```
> 
> 如果要检查整个 X509 数据结构，可以键入
> 
> ```
> security find-certificate -p -c gdb-cert |openssl x509 -noout -text 
> ```
> 
> 1.2\. 信任用于代码签名的证书
> 
> 再次启动钥匙串访问。使用证书的上下文菜单，选择获取信息，打开信任项，然后将代码签名设置为始终信任。
> 
> 最后，再次退出 Keychain Access 应用程序以刷新证书存储。
> 
> 控制：在终端类型
> 
> ```
> security dump-trust-settings -d 
> ```
> 
> 这应该显示 gdb-cert 证书（可能还有其他）及其信任设置，包括代码签名。
> 
> 1.3\. 签署并授权 gdb 二进制文件
> 
> （Mac OS X 10.14 及更高版本）创建包含以下内容的 gdb-entitlement.xml 文件：
> 
> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
> <plist version="1.0">
> <dict>
>     <key>com.apple.security.cs.debugger</key>
>     <true/>
> </dict>
> </plist> 
> ```
> 
> 如果您在上一节中生成的证书称为 gdb-cert，请使用：
> 
> ```
> codesign --entitlements gdb-entitlement.xml -fs gdb-cert $(which gdb) 
> ```
> 
> 或在 Mojave (10.14) 之前，只需
> 
> ```
> codesign -fs gdb-cert $(which gdb) 
> ```
> 
> 如果 gdb 二进制文件位于普通用户无法写入的位置，您可能必须在此命令前面加上 sudo。
> 
> 如果您计划经常构建 gdb，则可以通过传递 --enable-codesign=gdb-cert （再次假设 gdb-cert 是证书的名称）来配置来自动执行此步骤。
> 
> 控制：在终端类型
> 
> ```
> codesign -vv $(which gdb) 
> ```
> 
> 对于 10.14 (Mojave) 之后的版本，还要检查权利：
> 
> ```
> codesign -d --entitlements - $(which gdb) 
> ```
> 
> 1.4\. 刷新系统的证书和代码签名数据
> 
> 最可靠的方法是重新启动系统。
> 
> 一种侵入性较小的方法是通过终止当前正在运行的 taskgated 进程来重新启动 taskgated 服务（在进程中的任何时间，但不迟于再次尝试运行 gdb 之前）：
> 
> ```
> sudo killall taskgated 
> ```
> 
> 但是，有时 taskgated 服务在杀死它后不会成功重新启动，因此通过检查例如 ps $(pgrep -f taskgated) 确保它在此步骤后处于活动状态。或者只是重新启动您的系统，如上所述。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-30T21:13:08.690

这是一个非常古老的话题，但我正在添加一个响应，因为在许多可用的指令中，只有一个包含正确的步骤来使自签名调试器工作。

您必须创建一个自签名根证书，然后用它签署 gdb 可执行文件，但许多人抱怨它对他们不起作用。在我偶然发现[这个链接](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw.pdf "这个")之前，我也没有这样做。

其他手册中缺少的关键点是您**必须重新启动**计算机才能使更改生效。一旦我这样做了，一切都按预期进行。

我希望，这会对其他人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-09T16:44:21.237

我按照说明进行了代码设计，但 gdb 仍然会给我同样的错误。事实证明，当 gdb 以 root (sudo gdb) 运行时，它确实有效。我正在使用 Sierra osx。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-12T20:04:50.050

我知道这不是问题的直接答案，但我希望有人在我努力让 gdb 工作之前提到它。

您可以使用 Apple 的免费 IDE Xcode 构建和调试 C++ 代码。（Xcode 类似于“Visual Studio”或“Android Studio”。）。我已经是 Xcode 用户，但我不知道它可以与 c++ 一起使用——因为该选项隐藏得相当好。这个 youtube 视频将引导您完成它：

[https://www.youtube.com/watch?v=-H_EyIqBNDA](https://www.youtube.com/watch?v=-H_EyIqBNDA)

# function - 可到达的负字节数 valgrind

> ID：13913820
> 
> 赞同：0
> 
> 时间：2012-12-17T12:03:14.547
> 
> 标签：function, memory-leaks, valgrind

在浏览 valgrind 中显示内存泄漏案例的示例代码时，我不明白两件事：

1.  任何内存泄漏中可到达或丢失的字节数如何为负数？当字节数带有减号时是什么意思？
2.  `breakme()`没有语句的空函数需要什么？当它什么都不做时，它有什么用？

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include "../memcheck.h"
#include "leak.h"

char *b10;
char *b21;

char *b32_33[2];
static void breakme() {};
void f(void)
{
   int i;

   b10 = malloc (10);

   fprintf(stderr, "expecting details 10 bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_LEAK_CHECK;

   fprintf(stderr, "expecting to have NO details\n"); fflush(stderr); breakme();
   VALGRIND_DO_ADDED_LEAK_CHECK;

   b10--; // lose b10
   b21 = malloc (21);
   fprintf(stderr, "expecting details +10 bytes lost, +21 bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_ADDED_LEAK_CHECK;

   for (i = 0; i < 2; i ++)
      b32_33[i] = malloc (32+i);
   fprintf(stderr, "expecting details +65 bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_ADDED_LEAK_CHECK;

   fprintf(stderr, "expecting to have NO details\n"); fflush(stderr); breakme();
   VALGRIND_DO_ADDED_LEAK_CHECK;

   b10++;
   fprintf(stderr, "expecting details +10 bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_ADDED_LEAK_CHECK;

   b10--;
   fprintf(stderr, "expecting details -10 bytes reachable, +10 bytes lost\n"); fflush(stderr); breakme();
   VALGRIND_DO_CHANGED_LEAK_CHECK;

   b10++;
   fprintf(stderr, "expecting details -10 bytes lost, +10 bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_CHANGED_LEAK_CHECK;

   b32_33[0]--;
   fprintf(stderr, "expecting details 32 (+32) bytes lost, 33 (-32) bytes reachable\n"); fflush(stderr); breakme();
   VALGRIND_DO_CHANGED_LEAK_CHECK;

   fprintf(stderr, "finished\n");
}

int main(void)
{
   DECLARE_LEAK_COUNTERS;

   GET_INITIAL_LEAK_COUNTS;

   f();   // see leak-cases.c

   GET_FINAL_LEAK_COUNTS;

   PRINT_LEAK_COUNTS(stderr);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:38:55.023

可以进行泄漏搜索以显示泄漏内存的“绝对数字”。通常，此类泄漏搜索是在程序运行结束时完成的。如果您在运行期间进行了多次泄漏搜索，那么与之前的泄漏搜索相比，泄漏搜索可以（如果您要求）显示泄漏内存的“增量”。通常，这几个泄漏搜索是通过 Valgrind 嵌入式 gdbserver（连接到它的 GDB 发送监控命令）或通过客户端请求（如 VALGRIND_DO_ADDED_LEAK_CHECK）或在 shell 中完成（使用 vgdb 发送监控命令）。

对于这样的增量泄漏搜索，您可以仅显示泄漏内存增加的堆栈跟踪，或显示发生变化（增加或减少）的堆栈跟踪。

有关详细信息，请参阅 [http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.monitor-commands](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.monitor-commands) 和 [http://www.valgrind.org/docs/manual/mc-manual .html#mc-manual.clientreqs](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.clientreqs)

函数 breakme 使自动 Valgrind 回归测试更容易执行：启动 GDB 并在函数 breakme 中放置一个中断。在 Valgrind 发行版中，perl 脚本 tests/vg_regtest.in 是测试驱动程序，启动 Valgrind 和可选的第二个进程（在测试 Valgrind gdbserver 的测试中是 GDB）。有关此（以及如何使用 breakme 函数）的更多详细信息，请阅读 tests/vg_regtest.in 注释和 gdbserver_tests/mcleak。*

# c# - DirectoryEntry 对象“处理”方法卡住

> ID：13913822
> 
> 赞同：1
> 
> 时间：2012-12-17T12:03:19.783
> 
> 标签：c#, dispose, directoryentry

`DirectoryEntry`在使用对象时，我在代码中发现了一个大问题。调用“Dispose”方法时，程序卡住了。知道是什么原因造成的吗？

这是代码：

```
foreach (DirectoryEntry oDireEntry in _DirectoryEntries)
{
     oDireEntry.Dispose();
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:02:28.023

由于初始化 _DirectoryEntries 列表，您可以**使用构造吗？**伪代码：

```
using (var _DirectoryEntries = new DirectoryEntries())
{
   // code to add items to list
   // anoy other work with list
} 
```

所以，这样你就不需要使用你的循环元素来处理它。

问候。

# javascript - Javascript：获取当前页面当前源

> ID：13913824
> 
> 赞同：8
> 
> 时间：2012-12-17T12:03:29.590
> 
> 标签：javascript, jquery, html

我有 HTML，我需要获取此 html 的页面源代码。

```
document.documentElement.outerHTML 
```

或者

```
$.ajax({
async: true,
type: 'GET',
cache: false,
url: window.location.href,
success: function(data) {
   alert(data);
}
}); 
```

正在工作，但它们显示原始来源。如果我更改 html（例如，通过 jQuery），他们不会阅读我的更改。

是否可以读取页面的当前来源？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T12:25:30.600

在 chrome 上试了一下，效果很好。利用

```
document.documentElement.innerHTML 
```

有趣的是，您的代码也有效

```
document.documentElement.outerHTML 
```

[**在这个小提琴**](http://jsfiddle.net/bruno/nmRJ5/1/)中查看打印到控制台的 html 。它实际上包含 jQuery 所做的更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T12:06:00.177

使用 jQuery，您可以通过以下方式执行此操作：

```
$( 'body' ).html(); 
```

例如。

或转换为字符串：

```
$( 'body' ).html().toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:07:30.570

你只需要抓取元素并使用 html 方法：

```
$('.selector').html(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-02T17:12:42.423

简单的解决方案，通常嵌入在 html 标签中的文档源，因此使用`$('html').html()`，您将获得 html 标签之间的所有内容。

# python - 在 Python 中将计算的信息写入文本文件的前面

> ID：13913830
> 
> 赞同：1
> 
> 时间：2012-12-17T12:03:55.033
> 
> 标签：python, file, primes

因此，我在地下室发现了这台破旧的笔记本电脑（我现在从大约 05 年搬出的姐姐的笔记本电脑），我一直在用 Python 对其进行大量计算并将其放置数小时来搞乱它。我最新的项目是将前 10 亿个素数保存到一个文本文件中（我知道毫无意义，但有点有趣）所以到目前为止我的代码如下：

```
from time import time
start_time = time()
f = open('primes.txt', 'w')
counter = 1
number = 1
while counter <= 1000000000:
    if prime(number): #NOTE: prime is a function checking if a number is prime
        f.write(str(counter) + '   ' + str(number) + '\n')
        counter += 1
    number += 1

f.write(time() - start_time)
f.write('This file contains the first %s primes.' % (counter)) 

f.close 
```

我遇到的问题在最后。我希望时间和素数列在文件的第一行，而不是结尾，因为十亿素数是一个非常长的文本文件。显然我不能在计算/写入素数之前写它，因为时间和素数都将为0。

在计算和写入完成后，有什么方法可以将信息插入文件的开头（第一行）？

解决了！在开始时添加空格然后使用 f.seek(0) 效果很好。至于节目，前1亿用了3天左右！显然不是最有效的程序，但它也只运行在一个只有 800 MHz 的内核上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:13:46.480

你可以在文件的开头写一些空格

```
f.write(" "*30) 
```

然后，当你完成计算时，你回到开头并覆盖这个空白：

```
f.seek(0)
f.write(str(counter)+" primes") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T12:11:57.527

简短的回答：不可能

长答案：您需要在其他地方收集数据，将标头写入新文件，然后将收集的数据复制/附加到标头之后。

# android - PhoneGap 2.2 的奇怪问题，Android 4.0.3 上的预测文本和输入 type="text"

> ID：13913834
> 
> 赞同：4
> 
> 时间：2012-12-17T12:04:14.153
> 
> 标签：android, cordova

我在 PhoneGap 2.2 和 Android 4.0.3 中遇到了一个奇怪的文本预测问题（在三星 Galaxy Tab 2 7.0 上，其他设备/Android 版本上不会出现该问题）。当在设备上启用预测文本并且我在任何输入字段中键入文本时，不会将文本添加到输入字段中，并且当点击预测时，会在输入框中添加奇怪的文本。例如，如果我键入“demo”，则不会将任何字母添加到输入框中，如果然后点击预测“demo”，则会将字符串“d”（总是预测的第一个字母后跟一个空格）添加到输入字段。有谁知道是什么导致了这种行为？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T11:34:55.713

i fixed it using the softKeyboard plugin. [https://github.com/phonostar/PhoneGap-SoftKeyboard/tree/7eae2991eef34d4451968876c8b8893e309456e5](https://github.com/phonostar/PhoneGap-SoftKeyboard/tree/7eae2991eef34d4451968876c8b8893e309456e5)

```
$(document).on({
        blur : function(){
            cordova.plugins.SoftKeyboard.hide();
        },
        focus : function(){
            cordova.plugins.SoftKeyboard.show();
        }
    }, ':input[type="text"],[type="number"],[type="email"]'); 
```

# android - 从位于android中服务器的数据库中读取数据

> ID：13913837
> 
> 赞同：1
> 
> 时间：2012-12-17T12:04:33.273
> 
> 标签：android, database

我有一个名为 menu.db 的数据库文件，该文件位于服务器上，现在我想从该数据库中读取数据。我正在处理的应用程序上也有注册页面，当用户按下提交按钮时，所有用户信息都应存储在服务器上的该数据库中。如果有人解决了这个问题，请帮助我。

如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:04:10.073

我有以下代码。它验证用户密码。您应该在 AsyncTask 扩展类的 doBackground() 中调用此方法。

```
public boolean authenticate(String strUsername, String strPassword)
{
    boolean bReturn = false;

    InputStream pInputStream = null;
    ArrayList<NameValuePair> pNameValuePairs = new ArrayList<NameValuePair>();
    pNameValuePairs.add(new BasicNameValuePair("userid", strUsername));
    pNameValuePairs.add(new BasicNameValuePair("password", strPassword));

    try
    {
        HttpClient pHttpClient = new DefaultHttpClient();

        String strURL = p_strServerIP + "Login.php";
        HttpPost pHttpPost = new HttpPost(strURL);
        pHttpPost.setEntity(new UrlEncodedFormEntity(pNameValuePairs));

        HttpResponse pHttpResponse = pHttpClient.execute(pHttpPost);
        HttpEntity pHttpEntity = pHttpResponse.getEntity();
        pInputStream = pHttpEntity.getContent();

        BufferedReader pBufferedReader = new BufferedReader(new InputStreamReader(pInputStream,"iso-8859-1"),8);

        StringBuilder pStringBuilder = new StringBuilder();
        String strLine = pBufferedReader.readLine();
        pInputStream.close();
        if(strLine != null)
        {
            if((strLine).equals("permit"))
            {
                bReturn = true;
            }
        }
    }
    catch (Exception e) 
    {
        Log.e("log_tag", "Caught Exception @ authenticate(String strUsername, String strPassword):" + e.toString());
    }

    return bReturn;
} 
```

您从 AsyncTask 扩展的类应该类似于

```
class ConnectionTask extends AsyncTask<String, Void, Boolean> 
{
    private SharedPreferences mSettings;
    private Context mContext;
    ConnectionTask(SharedPreferences settings, Context context)
    {
        mSettings = settings;
        mContext = context;
    }

    protected void onProgressUpdate(Integer... progress) 
    {
    }

    protected void onPostExecute(Boolean result) 
    {
        Toast.makeText(mContext, "Authentication over.", Toast.LENGTH_LONG).show();
    }

    @Override
    protected Boolean doInBackground(String... params) 
    {
        pVerifier.authenticate(params[0], params[1]);
        return true;
    }
} 
```

# c - scanf 中的 %2d 是什么

> ID：13913848
> 
> 赞同：7
> 
> 时间：2012-12-17T09:01:05.257
> 
> 标签：c, scanf

我知道这句话的意思

```
scanf("%d",&x); 
```

但是这个声明有什么作用

```
scanf("%2d",&x); 
```

我试图搜索这个，但找不到答案。我也想知道内部发生了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T09:14:54.093

那是两位数：

```
int n = 0;
scanf ("%2d", &n);
printf ("-> %d\n", n); 
```

12 -> 12

88657 -> 88

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:27:54.133

'%' 符号之后和您要读取的数据类型之前的数字表示该特定数据类型的最大大小。

当您正在读取一个整数 (%2d) 时，它只允许一个最长为**两位数**的整数。如果您要读取一个 50 个字符长的数组，您应该使用 %49s（为空终止字节留一个）。这是相同的想法。

```
int number = 0;
scanf("%2d", &number);
printf("%d", number); 
```

如果用户为 scanf() 函数传递了 21，则数字 21 将存储在变量 number 中。如果用户传递的内容超过 21，即 987，则只会存储前 2 位数字 - 98。

# c# - 如何用 $.ajax 替换 div 内容，例如 $.post

> ID：13913852
> 
> 赞同：2
> 
> 时间：2012-12-17T12:05:25.267
> 
> 标签：c#, jquery, json, asp.net-mvc-3

**目标：**

将我的 $.post 更改为 $.ajax 以同步它并显示消息，直到请求完成。

我想确切地知道如何使用 ajax 请求来做到这一点，我的大问题是当我尝试替换 div 内容时，就像我在这里使用 $.post 所做的那样

**编码：**

风景

```
 function NewVersion() {
     $.ajax({
         url: "/Valoration/NewVersion",
         type: "POST",
         async: false,
         success: function (data, status, xhr) {
             if (data.success) {

                 $.post(data.hvmHeaderPartialView, function (partial) { $('#divHvmHeader').html(partial); });

                 MessageNewVersionSucced();
             }
         },
         error: function (xhr, status, err) {
             alert(err);
         }
     }); 
```

控制器

```
public ActionResult HvmHeaderPartialView()
    {
        return PartialView("_HvmHeaderPartialView,", DetailHvmModel);
    }    

private ActionResult NewVersion()
    {

    var result = hvmService.addNewVersion(hvm);
        var HvmHeaderPartialView = Url.Action("HvmHeaderPartialView,");

        return Json(new
        {
            success = result,
            hvmHeaderPartialView= HvmHeaderPartialView,

        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:01:03.590

你需要保持它 async=false 吗？

您可以使用[$.load()](http://api.jquery.com/load/)替换 div 内容，而不是使用`$.post`. 例如：

```
$('#divHvmHeader').load('ajax/test.html'); 
```

使用回调函数：

```
$('#divHvmHeader').load('/Valoration/NewVersion', function() {
  MessageNewVersionSucced();
}); 
```

**注意**：`MessageNewVersionSucced`只有在对“/Valoration/NewVersion”的 ajax 调用完成后才会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:11:21.330

你说

> 将我的 $.post 更改为 $.ajax 以使其同步...

我不确定您是否使用的是 jQuery 1.8，但 jQuery 网站声明

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。

您的请求将不会同步执行。这可能是您问题的根源。

# node.js - Node.js - 运行多个请求时写入 EPIPE 错误

> ID：13913853
> 
> 赞同：1
> 
> 时间：2012-12-17T12:05:31.580
> 
> 标签：node.js, http, load-testing, stress-testing, epipe

我正在使用 Node 的“net”模块编写一个静态 Web 服务器，但在运行压力测试时遇到了一些麻烦。

这是测试本身的代码：

```
var http = require("http");
http.globalAgent.maxSockets = 100000;
var numOfRequests = 1000;

var options = {
  host: 'localhost',
  port: 9000,
  path: '/first/profile.html', 
  method: 'GET'
};

//Number of current responses.
var currResponse = 0;

//Create 1000 http requests 
for (var i = 0; i < numOfRequests; i++) {

    var req = http.request(options, function(res) {
        console.log("Got response: " + res.statusCode);
        console.log("response num: "+currResponse);
        currResponse++;

    });
    req.on('error',function(e){ console.log('some error occured: '+e.message); });
    req.end();
} 
```

在 Node v. 0.8.15（当前最新版本）上运行时，对于 'numOfRequest' 大于 20，服务器几乎崩溃 - 在一千个请求中，只有 ~160 个被正确处理。从测试人员的角度来看，

我正在使用 fs.createReadStream().pipe() （使用适当的参数，并输入 {end: false} ）通过套接字发送数据。另外，我在超时（两秒不活动）时调用socket.destroy（）（其中socket是net.createServer的回调函数中接收的参数），如果我收到“Connection：close”作为标题，则调用socket.end（） HTTP 请求。

有什么帮助吗？我什么都试过了；切换到 http.get()，在创建服务器时放置 {allowHalfOpen: true} 等等 - 但我仍然收到“错误：写入 EPIPE”（或者，过了一会儿，“错误：此套接字已关闭。 ") 来自服务器端和来自客户端的“套接字挂断”。

# android - 如何在适配器中实现延迟加载

> ID：13913854
> 
> 赞同：2
> 
> 时间：2012-12-17T12:05:39.477
> 
> 标签：android, lazy-loading

嗨，我正在尝试学习延迟加载的概念。在我看到标题大纲的每个地方，但是它是如何实现的，找不到它遵循的模式。我从 github 的lazylist 项目中找到了以下代码。

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

有人可以解释图像是如何延迟加载的..我正在尝试实现一个适配器，其中列表需要使用延迟加载..不确定如何实现。 [http://pastebin.com/EPfMBRA1](http://pastebin.com/EPfMBRA1) 这里我正在尝试用设备中的图像加载我的联系人任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:09:26.063

嗨，请参阅这些链接，这将对您有所帮助。

[http://andytui.wordpress.com/2012/05/10/tutorial-lazy-loading-list-views-in-android-binding-44/](http://andytsui.wordpress.com/2012/05/10/tutorial-lazy-loading-list-views-in-android-binding-44/)

[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

[http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:17:21.183

这里完全解释了如何实现延迟加载
[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

# javascript - Web 应用程序中具有置信区间的条形图

> ID：13913857
> 
> 赞同：1
> 
> 时间：2012-12-17T12:05:50.007
> 
> 标签：javascript, kendo-ui, bar-chart, confidence-interval

我正在寻找一个能够绘制具有置信区间的条形图的 javascript 库。输出应如下[所示](https://stackoverflow.com/a/13629197/1010666)：

*   水平条
*   线标记，指示置信区间的下限和上限。

基本上，我正在寻找类似于[烛台/开高低封闭](http://www.jqplot.com/deploy/dist/examples/candlestick-charts.html)图表的东西。但是，该值最好显示为水平条，并且自变量不是时间序列，而是一组类别。

编辑：有谁知道 KendoUI 是否能够做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:39:11.540

如您所见，[dygraphs具有置信区间：](http://dygraphs.com/)

![dygraphs 截图](../Images/c3cf4588d4d118f3932e87cf6ea9f18f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:26:54.377

fltr2 可以垂直执行此操作：

[http://humblesoftware.com/flotr2/#!basic-candle](http://humblesoftware.com/flotr2/#!basic-candle)![带有 fltr2 的基本蜡烛](../Images/34aa2f8c526935e2bc29d87281aad2a8.png)

# c# - 无法在 asp.net 中正确地将字符串转换为日期

> ID：13913864
> 
> 赞同：0
> 
> 时间：2012-12-17T12:06:18.667
> 
> 标签：c#, asp.net

我无法将字符串转换为日期，我的字符串如 17/12/2012 为此编写的代码如下所示

```
public string Date_Convert(string dt1)
{
    string strdate = string.Empty;
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB");
    DateTime dt = Convert.ToDateTime(dt1);
    strdate = dt.Month.ToString() + "/" + dt.Day.ToString() + "/" + dt.Year.ToString();
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
    return strdate;
} 
```

它在我的本地系统中运行良好。并且不在我的服务器（位于澳大利亚）中工作，当然我在上面的代码中尝试了不同的文化设置，

我在条件条件下的 sql 查询中使用此日期字符串。

请帮助我，它杀死了我一天的时间，并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:11:27.567

与其切换文化，不如做这样的事情：

```
public string Date_Convert(string dt1)
{
    DateTime dt = DateTime.ParseExact(dt1, "dd/MM/yyyy", new CultureInfo("en-GB"));
    return dt.ToString("d", new CultureInfo("en-US"));
} 
```

另外：如果您在 SQL 查询中使用该值（并且假设您的查询适用于`DATETIME`字段，而不是`NVARCHAR`），您还应该考虑使用参数化查询将`DateTime`值传递给数据库以避免 SQL 注入。

例如：

```
DateTime value = DateTime.Parse(dt1, new CultureInfo("en-GB"));
using (SqlCommand cmd = new SqlCommand("SELECT ... FROM ... WHERE Date = @date", connection))
{
    cmd.Parameters.AddWithValue("@date", value);
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:07:02.573

尝试[DateTime.ParseExact()](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)它作为参数接收模式，因此对于您的情况，它将是“dd/MM/yyyy”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:11:32.123

DataTime 的格式将取决于您的应用程序的当前文化。为了在您的应用程序中使用特定格式，您可以在部分的 web.config 文件中设置标记。在这种情况下，您无需编写代码将数据时间转换为正确的格式。默认情况下，所有日期都将设置为指定的格式。

[http://forums.asp.net/t/1109183.aspx/1](http://forums.asp.net/t/1109183.aspx/1)

**[更多信息](https://stackoverflow.com/questions/680598/problem-with-convert-todatetime-in-asp-net)**

# colors - Linecolor（不是这样）变量

> ID：13913865
> 
> 赞同：1
> 
> 时间：2012-12-17T12:06:22.693
> 
> 标签：colors, gnuplot, average, boxplot

我正在尝试在箱线图中显示数据，并添加一些内容。在箱线图之上，我还想打印所有数据点，因为没有那么多。将有许多并排的箱线图，并且数据点将对应，因此一个图中的每个数据点将在另一个箱线图中表示，但是它们的顺序可以改变。这就是为什么我想给点上色。到目前为止我得到了这个：

```
plot    data using (1):($1) with boxplot,\
            data using (1):($1) with points lc variable
            [more plots...] 
```

这需要在每个数据文件中添加一个额外的列，用于指定线条颜色。如果我有这样的专栏，或者如果我愿意添加它，那效果很好。

是否有另一种方法来遍历线条样式（或颜色），所以它用样式 1 绘制第一个点，用样式 2 绘制第二个点等？

这似乎是一个非常简单的问题，要么通过我似乎无法找到的某些命令解决，要么通过从不同文件中获取线型来解决，这对于所有绘图都是相同的（如果在 gnuplot 中有效）。

此外，我想知道 boxplot 命令是否还具有能够绘制平均值的附加功能（或者我是否绝对需要 gnuplot 4.6 中的 stats 命令，或者某种 hack）。

有时能够简单地将平均值添加到箱线图中真是太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:12:44.540

> 是否有另一种方法来遍历线条样式（或颜色），所以它用样式 1 绘制第一个点，用样式 2 绘制第二个点等？

是的。Gnuplot 提供了许多`pseudo-columns`. 要获取更多信息，请参阅

```
help datafile using pseudocolumn 
```

但它的要点是你可以使用`column(0)`它。我相信迭代从 0 开始。由于没有`ls 0`，因此您需要添加 1。

```
plot data using (1):($1) with boxplot,\
     data using (1):($1):(column(0)+1) with points lc variable 
```

> 此外，我想知道 boxplot 命令是否还具有能够绘制平均值的附加功能（或者我是否绝对需要 gnuplot 4.6 中的 stats 命令，或者某种 hack）。

我相信您需要 gnuplot 4.6 或某种 hack。一种这样的 hack（可以使用 gnuplot 4.4，但不是更早的版本）可能是：

```
sum=0.0
npt=0
compute_sum_npt(x)=(npt=npt+1,sum=sum+x,NaN)
set term unknown
plot data u 1:(compute_sum_npt($1))
avg=sum/npt

set term ...
set output ...
plot data using (1):($1) with boxplot,\
     data using (1):($1):(column(0)+1) with points lc variable,\
     avg w lines ls -1 
```

如果您的 gnuplot 版本早于 4.4，则需要使用 shell 命令来计算平均值。类似的东西`awk`就足够了。

# iphone - 以编程方式隐藏应用程序

> ID：13913868
> 
> 赞同：2
> 
> 时间：2012-12-17T12:06:36.937
> 
> 标签：iphone, ios, springboard

我需要像“Nike+ iPod”应用程序那样以编程方式从跳板上隐藏我的应用程序。有谁知道如何实现这一目标？

PS：这是一个内部应用程序，我不打算提交到应用程序商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:25:47.347

好的，我实现了，在 Info.plist 添加以下行，

```
<key>SBAppTags</key>
<array>
<string>hidden</string>
</array> 
```

我试过 JB 设备

# jquery - 不在每个页面上的元素的 jQuery 选择器。

> ID：13913874
> 
> 赞同：0
> 
> 时间：2012-12-17T12:07:17.687
> 
> 标签：jquery

我有以下代码。它工作正常，但我想知道第三行是否是最佳实践。当元素 myID 在页面上时，它的属性会发生变化。然而，它不是在每一页上，所以经常这无济于事。这对我来说似乎无害，但有什么我不知道的缺点吗？

```
 $(document).ready(function () {
        if ($(window).width() < 700) {
            $('#myID').attr('size', 1)
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:24:54.470

来自[jquery attr 文档](http://api.jquery.com/attr/)

> .attr() 方法仅获取匹配集中第一个元素的属性值。要单独获取每个元素的值，请使用循环构造，例如 jQuery 的 .each() 或 .map() 方法。

该`.attr()`方法尝试在 jquery 对象的第一个元素上设置属性。如果 jquery 对象为空，则什么也不会发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:24:25.577

为了确定，您可以在对其执行任何操作之前检查对象是否存在

```
$(document).ready(function () {
    if ($(window).width() < 700 && $('#myID').length) {
        $('#myID').attr('size', 1);
    }
}); 
```

# linux - WaitForMultipleObjects() 和 WSAEnumNetworkEvents() 的等效 linux API 是什么？

> ID：13913882
> 
> 赞同：6
> 
> 时间：2012-12-17T12:07:42.973
> 
> 标签：linux, windows, porting

WaitForMultipleObjects() 和 WSAEnumNetworkEvents() 的等效 linux API 是什么？我们可以将 pthread_cond_wait() 用于 WaitForMultipleObjects 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T04:00:24.087

对于来自 Windows 背景的开发人员，我们在将一些代码从 Win32 移植到 pthreads 时遇到了同样的问题，并创建了一个名为[pevents](https://github.com/NeoSmart/PEvents)[的开源（MIT 许可）库](https://neosmart.net/blog/2011/waitformultipleobjects-and-win32-events-for-linux-and-read-write-locks-for-windows/)，该库在 Linux上实现，支持自动和手动重置事件。它的行为方式应该与 Windows 上的 WIN32 事件相同。`WaitForMultipleObjects()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:40:12.360

好吧，Linux 中没有直接的 API，可以做`WaitForMultipleObjects()`等价的。

[Linux 中的 WaitForSingleObject 和 WaitForMultipleObjects 等效？](https://stackoverflow.com/questions/2719580/waitforsingleobject-and-waitformultipleobjects-equivalent-in-linux)包含对第一部分的答案，也许还有更好的解释。

对于`WSAEnumNetworkEvents()`，在 Linux 中，使用`poll()`或`select()`根据您的要求。另一个应用程序`libevent`也可能有用。

参考：

*   [`poll(3)`手册页](https://linux.die.net/man/3/poll)

*   [`select(3)`手册页](https://linux.die.net/man/3/select)

*   [libevent](http://libevent.org/)

# macos - 告诉应用程序包含一个单词的过程

> ID：13913884
> 
> 赞同：0
> 
> 时间：2012-12-17T12:07:48.767
> 
> 标签：macos, applescript

这个问题可能看起来很奇怪。但是，我需要与在全球范围内以不同名称发布的应用程序进行交互，例如。AppEN、AppGB、AppDE 等...

我正在寻找允许我使用此命令的解决方案：

```
tell application process "AppnameGB" 
```

但是，它应该适用于此应用程序的所有不同变体。我不知道这是否可能，但在应用程序名称中搜索字符串可以解决问题：告诉应用程序进程在其名称中包含“Appname”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:03:14.470

如果该过程已经打开，您可以使用以下内容：

```
tell application "System Events"
    tell (process 1 where name starts with "TextEd")
        properties
        set f to its file
    end tell
end tell
tell application (f as text)
    properties
end tell 
```

告诉 Finder 列出文件真的很慢：

```
tell application "Finder"
    item 1 of (path to applications folder) where name starts with "Text"
end tell 
```

你可以使用`do shell script`：

```
set a to do shell script "ls /Applications/ | grep -m1 '^Text.*\\.app$'"
tell application a
    properties
end tell 
```

`set a to do shell script "mdfind 'kMDItemContentType==com.apple.application-bundle&&kMDItemFSName==Text*' | head -n1"`还将在应用程序文件夹之外搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:14:01.253

最简单的方法是您可以使用应用程序的包标识符而不是其名称。很可能捆绑 ID 不会更改，而名称会更改。因此，在该应用程序上使用此脚本并检查捆绑 ID 是否更改。

```
tell application "Finder" to set bundleID to id of (choose file) 
```

如果你发现它没有改变，那么你可以像这样通过applescript访问它......

```
tell application "com.bundle.id"
   activate
   -- do something
end tell 
```

您唯一的另一种选择是获取所有应用程序的列表，并按照您的建议遍历它们检查名称。像这样的东西可以工作，但速度很慢。

```
-- use spotlight to find all the apps on the computer
set cmd to "mdfind 'kMDItemContentType == \"com.apple.application-bundle\"'"
set foundApps to paragraphs of (do shell script cmd)

-- search the found apps looking for the one you're interested in
set appPath to missing value
repeat with i from 1 to count of foundApps
    if (item i of foundApps) contains "Appname" then
        set appPath to item i of foundApps
        exit repeat
    end if
end repeat

if appPath is missing value then error "Couldn't find the app!"

-- open the app
set macAppPath to (POSIX file appPath) as text
tell application macAppPath
    activate
    -- do something
end tell 
```

# macos - 哪个寄存器在汇编语言中有“this”指针？（逆向工程）

> ID：13913886
> 
> 赞同：1
> 
> 时间：2012-12-17T12:08:15.780
> 
> 标签：macos, assembly

在 Mac OS 中，这看起来像是 EDI 存储了一个类的当前实例的句柄。这样对吗？我希望通过它调用其他类方法。

尽管我查了 Intel 64bit 手册和 AMD64 ABI 接口，但也没有明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:13:46.090

它通常在 RDI 中，因为它被视为函数的第一个参数，并且在 ABI 下，该参数在 RDI 中传递。

警告：如果方法的返回值是非平凡的（即它是在堆栈中分配的临时值），那么还有一个额外的第一个参数传递，它是那个临时的地址，并且在`this`指针之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:37:04.877

我在以下文档中找到了定义：http: [//developer.apple.com/library/ios/technotes/tn2004/tn2124.html#SECSOMEASSEMBLY](http://developer.apple.com/library/ios/technotes/tn2004/tn2124.html#SECSOMEASSEMBLY)

谢谢！

# c++ - OpenGL 缓冲区更新

> ID：13913887
> 
> 赞同：3
> 
> 时间：2012-12-17T12:08:17.003
> 
> 标签：c++, opengl

目前我正在编写一个模拟水的程序。以下是我执行的步骤：

1.  创建水面-平面。
2.  创建 VAO
3.  创建顶点缓冲区对象，我在其中存储法线和顶点。
4.  绑定指向此 VBO 的指针。
5.  创建索引缓冲区对象。

然后我使用 glDrawElements 渲染这个平面，然后我调用一个 update() 函数来改变水面顶点的位置。之后我调用 glBufferSubData 函数来更新顶点位置。

当我这样做时 - 没有任何事情发生，就好像缓冲区没有改变一样。

这是代码片段：

```
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(Oscillator) * nOscillators, oscillators, GL_DYNAMIC_DRAW);

glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(Oscillator), 0);
glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, sizeof(Oscillator), (const GLvoid*)12);
glEnableVertexAttribArray(0);  // Vertex position
glEnableVertexAttribArray(2);  // normals position

glGenBuffers(1, &indicesBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indicesBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(unsigned int) * nIndices, indices, GL_DYNAMIC_DRAW);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indicesBuffer);
glBindVertexArray(0); 
```

然后渲染：

```
glBindVertexArray(vaoHandle);
glDrawElements(GL_TRIANGLES, nIndices, GL_UNSIGNED_INT, 0); 
update(time); 
```

和更新功能：

```
//some calculations
glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(Oscillator) * nOscillators, oscillators); 
```

***Oscillator*** - 它是一个结构，分别有：8 个浮点数 - x、y、z（顶点位置）、nx、ny、nz（法线）、upSpeed、newY

***振荡器***- 这是一组振荡器结构。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T08:53:09.397

在更新数据之前，您必须绑定正确的缓冲区。例如：

```
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer); 
```

由于您要立即更新完整缓冲区，我建议使用 glMapBuffer 来更新它

```
void* data = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);
//[...] update the buffer with new values
bool done = glUnmapBuffer(GL_ARRAY_BUFFER); 
```

请记住在修改要复制到 gl 缓冲区的数据之前等待（或强制）glFlush()。

# mysql - MySQL导入一个70GB的海量表，mysqlimport完成后长时间不可用表

> ID：13913888
> 
> 赞同：1
> 
> 时间：2012-12-17T12:08:19.307
> 
> 标签：mysql, mysqlimport

好的，主题行的明显答案是：呃！这是70GB，请耐心等待。但听我说完。

我用来`mysqlimport`快速加载数据文件（mysql标准制表符分隔格式）。完成 mysqlimport 命令大约需要 4 个小时。在此期间，磁盘以容量运行（约 50MB/秒磁盘活动）

但是它完成后又过了 5 个小时，我仍然无法运行简单的查询，例如

```
 select * from my_big_table limit 1 
```

当我运行该查询时，它只会（似乎）无限期地阻塞。在没有运行查询的情况下，我看到了磁盘活动（一个 mysql 进程运行 3MB/秒的读写，另一个运行几 MB/秒的读取活动），自从我运行`mysqlimport`. 我还看到了一个 mysql 线程从那以后运行得接近 100% `mysqlimport`。

我的猜测是 mysql 正在*后台处理索引等*（150M 记录，InnoDB），这就是阻碍我查询表的能力的原因。但我不知道**如何验证**或查看正在进行的活动。或者对它可能完成的时间**进行任何估计**。

* * *

多余的细节：

我敢肯定有人会质疑为什么一个 70GB 的表会进入 mysql。它是 Web 应用程序中使用的只读数据表。它仅在 上建立索引，`id`并且查询只会在一组有限的 ID 上（没有对该表的范围查询），只是在`id`列上连接并直接在`id`列上查询。该表在一个大型 Hadoop 作业中更新，并且将使用 mysqlimport 每晚更新以提高效率。

* * *

更新： MySQL 在 70GB 导入后最终崩溃，我在错误日志中看不到太多。我已将表更改为 myisam 引擎并再次尝试导入。

错误日志：

```
Version: '5.5.28-0ubuntu0.12.04.2-log'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  (Ubuntu)
121209 18:41:07 [Warning] IP address '10.0.4.160' could not be resolved: Name or service not known
121217  1:54:16 [Note] Plugin 'FEDERATED' is disabled.
121217  1:54:16 InnoDB: The InnoDB memory heap is disabled
121217  1:54:16 InnoDB: Mutexes and rw_locks use GCC atomic builtins
121217  1:54:16 InnoDB: Compressed tables use zlib 1.2.3.4
121217  1:54:16 InnoDB: Initializing buffer pool, size = 11.7G
121217  1:54:18 InnoDB: Completed initialization of buffer pool
121217  1:54:18 InnoDB: highest supported file format is Barracuda.
InnoDB: Log scan progressed past the checkpoint lsn 217624804600
121217  1:54:18  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Doing recovery: scanned up to log sequence number 217630047232
InnoDB: Doing recovery: scanned up to log sequence number 217635290112
InnoDB: Doing recovery: scanned up to log sequence number 217640532992
InnoDB: Doing recovery: scanned up to log sequence number 217645775872
InnoDB: Doing recovery: scanned up to log sequence number 217651018752
InnoDB: Doing recovery: scanned up to log sequence number 217656261632
InnoDB: Doing recovery: scanned up to log sequence number 217661504512
InnoDB: Doing recovery: scanned up to log sequence number 217666747392
InnoDB: Doing recovery: scanned up to log sequence number 217671990272
InnoDB: Doing recovery: scanned up to log sequence number 217677233152
InnoDB: Doing recovery: scanned up to log sequence number 217682476032
InnoDB: Doing recovery: scanned up to log sequence number 217687718912
InnoDB: Doing recovery: scanned up to log sequence number 217692961792
InnoDB: Doing recovery: scanned up to log sequence number 217698204672
InnoDB: Doing recovery: scanned up to log sequence number 217703447552
InnoDB: Doing recovery: scanned up to log sequence number 217708690432
InnoDB: Doing recovery: scanned up to log sequence number 217713933312
InnoDB: Doing recovery: scanned up to log sequence number 217719176192
InnoDB: Doing recovery: scanned up to log sequence number 217724419072
InnoDB: Doing recovery: scanned up to log sequence number 217729661952
InnoDB: Doing recovery: scanned up to log sequence number 217734904832
InnoDB: Doing recovery: scanned up to log sequence number 217740147712
InnoDB: Doing recovery: scanned up to log sequence number 217745390592
InnoDB: Doing recovery: scanned up to log sequence number 217750633472
InnoDB: Doing recovery: scanned up to log sequence number 217755876352
InnoDB: Doing recovery: scanned up to log sequence number 217761119232
InnoDB: Doing recovery: scanned up to log sequence number 217766362112
InnoDB: Doing recovery: scanned up to log sequence number 217771604992
InnoDB: Doing recovery: scanned up to log sequence number 217776847872
InnoDB: Doing recovery: scanned up to log sequence number 217782090752
InnoDB: Doing recovery: scanned up to log sequence number 217787333632
InnoDB: Doing recovery: scanned up to log sequence number 217792576512
InnoDB: Doing recovery: scanned up to log sequence number 217797819392
InnoDB: Doing recovery: scanned up to log sequence number 217803062272
InnoDB: Doing recovery: scanned up to log sequence number 217808305152
InnoDB: Doing recovery: scanned up to log sequence number 217813548032
InnoDB: Doing recovery: scanned up to log sequence number 217818790912
InnoDB: Doing recovery: scanned up to log sequence number 217824033792
InnoDB: Doing recovery: scanned up to log sequence number 217829276672
InnoDB: Doing recovery: scanned up to log sequence number 217834519552
InnoDB: Doing recovery: scanned up to log sequence number 217839762432
InnoDB: Doing recovery: scanned up to log sequence number 217845005312
InnoDB: Doing recovery: scanned up to log sequence number 217850248192
InnoDB: Doing recovery: scanned up to log sequence number 217855491072
InnoDB: Doing recovery: scanned up to log sequence number 217860733952
InnoDB: Doing recovery: scanned up to log sequence number 217865976832
InnoDB: Doing recovery: scanned up to log sequence number 217871219712
InnoDB: Doing recovery: scanned up to log sequence number 217876462592
InnoDB: Doing recovery: scanned up to log sequence number 217881705472
InnoDB: Doing recovery: scanned up to log sequence number 217886948352
InnoDB: Doing recovery: scanned up to log sequence number 217892191232
InnoDB: Doing recovery: scanned up to log sequence number 217897434112
InnoDB: Doing recovery: scanned up to log sequence number 217902676992
InnoDB: Doing recovery: scanned up to log sequence number 217907919872
InnoDB: Doing recovery: scanned up to log sequence number 217913162752
InnoDB: Doing recovery: scanned up to log sequence number 217918405632
InnoDB: Doing recovery: scanned up to log sequence number 217923648512
InnoDB: Doing recovery: scanned up to log sequence number 217928891392
InnoDB: Doing recovery: scanned up to log sequence number 217934134272
InnoDB: Doing recovery: scanned up to log sequence number 217939377152
InnoDB: Doing recovery: scanned up to log sequence number 217944620032
InnoDB: Doing recovery: scanned up to log sequence number 217949862912
InnoDB: Doing recovery: scanned up to log sequence number 217955105792
InnoDB: Doing recovery: scanned up to log sequence number 217960348672
InnoDB: Doing recovery: scanned up to log sequence number 217965591552
InnoDB: Doing recovery: scanned up to log sequence number 217970834432
InnoDB: Doing recovery: scanned up to log sequence number 217976077312
InnoDB: Doing recovery: scanned up to log sequence number 217981320192
InnoDB: Doing recovery: scanned up to log sequence number 217986563072
InnoDB: Doing recovery: scanned up to log sequence number 217991805952
InnoDB: Doing recovery: scanned up to log sequence number 217997048832
InnoDB: Doing recovery: scanned up to log sequence number 218002291712
InnoDB: Doing recovery: scanned up to log sequence number 218007534592
InnoDB: Doing recovery: scanned up to log sequence number 218012777472
InnoDB: Doing recovery: scanned up to log sequence number 218018020352
InnoDB: Doing recovery: scanned up to log sequence number 218023263232
InnoDB: Doing recovery: scanned up to log sequence number 218028506112
InnoDB: Doing recovery: scanned up to log sequence number 218033748992
InnoDB: Doing recovery: scanned up to log sequence number 218038991872
InnoDB: Doing recovery: scanned up to log sequence number 218044234752
InnoDB: Doing recovery: scanned up to log sequence number 218047052128
InnoDB: 1 transaction(s) which must be rolled back or cleaned up
InnoDB: in total 17071570 row operations to undo
InnoDB: Trx id counter is 3D0D200
121217  1:54:32  InnoDB: Starting an apply batch of log records to the database...
InnoDB: Progress in percents: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
InnoDB: Apply batch completed
InnoDB: Last MySQL binlog file position 0 1211503, file name ./frugg-bin-backups.000389
InnoDB: Starting in background the rollback of uncommitted transactions
121217  2:01:34  InnoDB: Rolling back trx with id 3D02544, 17071570 rows to undo

InnoDB: Progress in percents: 1121217  2:01:34  InnoDB: Waiting for the background threads to start
121217  2:01:35 InnoDB: 1.1.8 started; log sequence number 218047052128
121217  2:01:35 [Note] Recovering after a crash using frugg-bin-backups
121217  2:01:35 [Note] Starting crash recovery...
121217  2:01:35 [Note] Crash recovery finished.
121217  2:01:35 [Note] Server hostname (bind-address): '10.0.1.227'; port: 3306
121217  2:01:35 [Note]   - '10.0.1.227' resolves to '10.0.1.227';
121217  2:01:35 [Note] Server socket created on IP: '10.0.1.227'.
121217  2:01:35 [Note] Event Scheduler: Loaded 0 events
121217  2:01:35 [Note] /usr/sbin/mysqld: ready for connections.
Version: '5.5.28-0ubuntu0.12.04.2-log'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  (Ubuntu)
121217  2:01:38 [Warning] IP address '10.0.4.160' could not be resolved: Name or service not known
 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100
InnoDB: Rolling back of trx id 3D02544 completed
121217  9:36:40  InnoDB: Rollback of non-prepared transactions completed
121217 16:12:45 [Note] /usr/sbin/mysqld: Normal shutdown

121217 16:12:45 [Note] Event Scheduler: Purging the queue. 0 events
121217 16:12:45  InnoDB: Starting shutdown...
121217 16:12:54  InnoDB: Shutdown completed; log sequence number 230916413935
121217 16:12:54 [Note] /usr/sbin/mysqld: Shutdown complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:39:16.933

您只需做一件事，而不是编写 select * from.. 尝试使用

**将表的数据分成几个块（暂时在查询中）后**联合。**由于 union 是集合运算，所以它是并行运算。因此，如果您将表格分为 5 个部分，如我对问题的回答中所示，那么您的数据加载速度至少会快 5 倍。[请参见此处](https://stackoverflow.com/questions/13560266/mysql-selecting-data-from-second-row-in-a-large-table/13560439#13560439)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:17:55.497

切换到 MyISAM 后，我能够更快地加载表格。它加载了表，然后在加载后又花了好几个小时才可以运行查询。这主要是由于启用了二进制日志记录，它两次写入 70GB 文件，一次写入表，另一次写入二进制日志。

我还启用了：

```
[mysqld]
innodb_file_per_table 
```

这使得了解 innodb 发生了什么变得容易得多。**

# c# - Server.Transfer 之后的“对象引用未设置为对象的实例”

> ID：13913889
> 
> 赞同：1
> 
> 时间：2012-12-17T12:08:28.620
> 
> 标签：c#, asp.net, session

我有一个搜索控件，当用户单击搜索时，查询将通过后面的代码中的以下行传入 url（获取模式）：

```
 Server.Transfer("portfolio_search_results.aspx?search=" + query); 
```

现在我有一个非常奇怪的问题，如果用户点击搜索按钮搜索工作正常，但如果用户再次点击搜索错误

> 你调用的对象是空的。

正在提高。搜索后转到其他页面并再次搜索工作正常，只有连续两次单击搜索按钮时才会发生这种情况。搜索控件位于主页面的顶部。搜索功能中的代码：

```
 SqlCommand cmd = new SqlCommand("something", _mainConnection);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("ID", SessionManager.Session[SessionParam.ID].ToString()));
    cmd.Parameters.Add(new SqlParameter("Type", type));
    return _mainDb.ExecuteDataSet(cmd).Tables[0]; 
```

并且错误在会话中。

如果我使用的是 Response.Redirect 而不是 Server.Transfer 它根本不起作用，即使在第一次搜索时也会出现上述错误。

**编辑：添加堆栈跟踪。**

```
Server Error in '/' Application.
Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

[No relevant source lines]

Source File: c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\e76777bb\bf0abb72\App_Web_portfolio_search_results.aspx.cdcab7d2.jiztmxz2.0.cs    Line: 0

Stack Trace:

[NullReferenceException: Object reference not set to an instance of an object.]
   Appeals.GetAppeals(String typeAppeals) +104
   search.make_dt() +21
   search..ctor() +311
   portfolio_search_results..ctor() +26
   ASP.portfolio_search_results_aspx..ctor() in c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\e76777bb\bf0abb72\App_Web_portfolio_search_results.aspx.cdcab7d2.jiztmxz2.0.cs:0
   __ASP.FastObjectFactory_app_web_portfolio_search_results_aspx_cdcab7d2_jiztmxz2.Create_ASP_portfolio_search_results_aspx() in c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\e76777bb\bf0abb72\App_Web_portfolio_search_results.aspx.cdcab7d2.jiztmxz2.1.cs:0
   System.Web.Compilation.BuildResultCompiledType.CreateInstance() +32
   System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert) +119
   System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +33
   System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +40
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +160
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +93
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

Version Information: Microsoft .NET Framework Version:2.0.50727.3634; ASP.NET Version:2.0.50727.3634 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:52:08.863

我建议您在调试模式下逐行诊断您的对象。例如：

```
if (_mainConnection == null)
{
  throw new Exception("_mainConnection is null");
}

SqlCommand cmd = new SqlCommand("something", _mainConnection);
cmd.CommandType = CommandType.StoredProcedure;

if (string.IsNullOrEmpty(SessionParam.ID))
{
  throw new Exception("SessionParam.ID is null or empty");
}
else if (SessionManager.Session[SessionParam.ID] == null)
{
  throw new Exception("SessionManager.Session[SessionParam.ID] is null or empty");
}

cmd.Parameters.Add(new SqlParameter("ID", SessionManager.Session[SessionParam.ID].ToString()));

if (type == null)
{
  throw new Exception("type is null")
}

cmd.Parameters.Add(new SqlParameter("Type", type));

var res =  _mainDb.ExecuteDataSet(cmd);

if (res == null)
{
  throw new Exception("res is null")
}

if ((res.Tables == null) || (res.Tables.Length == 0))
{
  throw new Exception("tables is null or = 0")  
}

return res.Tables[0]; 
```

因此，通过这种方式，您应该会收到有关错误的详细信息。不确定我的代码输入是否正确——我没有检查拼写错误。我认为主要思想是可以理解的。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:58:21.910

我通过将会话作为参数传递给我项目中 App_code 目录中的类来解决它，而不是使用 App_code 类中的会话参数。所以研究是该会话不会在 app_code 目录中使用。

# prolog - Prolog 程序 - 如何使其工作？

> ID：13913898
> 
> 赞同：1
> 
> 时间：2012-12-17T12:09:38.603
> 
> 标签：prolog

我有这两个程序，但它们没有按应有的方式工作。第一个 without_doubles_2(Xs, Ys) 应该表明如果 Ys 是出现在 Xs 中没有重复的元素的列表，则它是真的。Ys 中的元素与 Xs 的顺序相反，保留第一个重复值。例如， without_doubles_2([1,2,3,4,5,6,4,4],X) 打印 X=[6,5,4,3,2,1] 但它打印错误。

```
without_doubles_2([],[]).
without_doubles_2([H|T],[H|Y]):- member(H,T),!,
                                 delete(H,T,T1),
                                 without_doubles_2(T1,Y).

without_doubles_2([H|T],[H|Y]):-    without_doubles_2(T,Y).

reverse([],[]).
reverse([H|T],Y):- reverse(T,T1), addtoend(H,T1,Y).

addtoend(H,[],[H]).
addtoend(X,[H|T],[H|T1]):-addtoend(X,T,T1).

without_doubles_21(X,Z):-  without_doubles_2(X,Y),
                           reverse(Y,Z). 
```

第二个是如何让这个程序使用字符串？它应该从字符串中删除元音并只打印辅音。

```
deleteV([H|T],R):-member(H,[a,e,i,o,u]),deleteV(T,R),!.
deleteV([H|T],[H|R]):-deleteV(T,R),!.
deleteV([],[]). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:48:56.767

您的调用[`delete`](http://www.swi-prolog.org/pldoc/man?predicate=delete%2F3)总是失败，因为您的参数顺序错误：

```
delete(+List1, @Elem, -List2) 
```

所以而不是

```
delete(H, T, T1) 
```

你要

```
delete(T, H, T1) 
```

使用 swi-prolog 解释器的跟踪功能很容易找到这样的错误 - 只需进入`trace.`开始跟踪模式，输入谓词，然后查看解释器在做什么。在这种情况下，您会看到失败来自`delete`语句。[可以在此处找到与跟踪相关的文档](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272.9%27,swi%28%27/doc/Manual/debugoverview.html%27%29%29)。

另请注意，您可以重写谓词省略成员检查，从而省略第三个子句，因为`delete([1,2,3],9001,[1,2,3])`计算结果为真 - 如果元素不在列表中，则结果与输入相同。所以你的谓词可能看起来像这样（由于懒惰而缩短了名称）：

```
nodubs([], []).
nodubs([H|T], [H|Y]) :- delete(T, H, T1), nodubs(T1, Y). 
```

对于第二个问题，您可以使用[`string_to_list`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.23%27,swi%28%27/doc/Manual/strings.html%27%29%29)谓词将字符串转换为字符列表（表示为 ascii 代码）。

至于从字符串中删除元音的谓词，我会这样实现（对于这个问题可能有更好的解决方案，或者你可以使用一些内置插件，但我的序言有点生疏）：

```
%deleteall(+L, +Elems, -R)
%a helper predicate for deleting all items in Elems from L
deleteall(L, [], L).
deleteall(L, [H|T], R) :- delete(L, H, L1), deleteall(L1, T, R).

deleteV(S, R) :-
    string_to_list(S, L),         %create list L from input string
    string_to_list("aeiou", A),   %create a list of all vovels
    deleteall(L, A, RL),          %use deleteall to delete all vovels from L
    string_to_list(R, RL).        %turn the result back into a string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:22:27.000

deleteV/2 可以使用库（[列表](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29)）：

```
?- subtract("carlo","aeiou",L), format('~s',[L]).
crl
L = [99, 114, 108]. 
```

而要删除重复项，我们可以利用[sort](http://www.swi-prolog.org/pldoc/doc_for?object=sort/2) /2 并[选择](http://www.swi-prolog.org/pldoc/doc_for?object=select/3)/3：

```
nodup(L, N) :-
    sort(L, S),
    nodup(L, S, N).

nodup([], _S, []).
nodup([X|Xs], S, N) :-
    ( select(X, S, R) -> N = [X|Ys] ; N = Ys, R = S ),
    nodup(Xs, R, Ys). 
```

测试：

```
?- nodup([1,2,3,4,4,4,5,2,7],L).
L = [1, 2, 3, 4, 5, 7]. 
```

**编辑**得更好，来自 ssBarBee

```
?- setof(X,member(X,[1,2,2,5,3,2]),L).
L = [1, 2, 3, 5]. 
```

# jquery - 需要将jquery从随机图像更改为序列

> ID：13913900
> 
> 赞同：0
> 
> 时间：2012-12-17T12:09:51.893
> 
> 标签：jquery

所以它是预加载图像

```
 var headerImages = [
       'images/logoa.png',
       'images/logob.png',
       'images/logoc.png',
       'images/logod.png',
       'images/logoe.png',
       'images/logog.png',
       'images/logoh.png',
       /* 'images/logoi.png', */
       'images/test/logoa.png',
       'images/test/logob.png']; 
```

然后在每个页面滚动上随机选择一个，我如何按顺序制作，意思是从上到下预加载？

```
....

jQuery.preLoadImages(headerImages);

jQuery(window).scroll(function() {
  jQuery('#sidebar').css('backgroundImage', 'url(' +
headerImages[Math.floor(Math.random()*headerImages.length)] + ')');
}); 
```

所以我想这是这部分`Math.floor(Math.random()*headerImages.length)`，但我不知道该怎么做..

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:12:41.133

```
var x =0;
jQuery(window).scroll(function() {
  jQuery('#sidebar').css('backgroundImage', 'url(' +
headerImages[x] + ')');
x++
if (x == headerImages.length)
{
 x =0;
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:14:01.907

`headerImages`似乎是一个数组，所以如果你从 0 到 headerImages.lenght 循环并执行以下操作，你应该没问题：

```
jQuery('#sidebar').css('backgroundImage', 'url(' + headerImages[x] + ')'); 
```

在循环内部，`x`您从 0 增加到最大值的变量在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:14:02.603

您可以通过将当前图像索引存储在变量中并在每次滚动时添加来实现。然后在到达列表末尾时将其设置为零：

```
jQuery.preLoadImages(headerImages);

    var index = 0; // set the variable

    jQuery(window).scroll(function() {
    jQuery('#sidebar').css('backgroundImage', 'url(' + headerImages[index] + ')');

    index ++; // add one to point to the next image on the next scroll

    if(index==headerImages.length) index = 0; // If the counter is at the end of the array then set it to zero again

}); 
```

# actionscript-3 - AS3 XMLListCollection 数据在多个字段上排序并在值更改时崩溃

> ID：13913902
> 
> 赞同：0
> 
> 时间：2012-12-17T12:10:07.643
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flash-builder

我的 XML：

```
<destinations>
    <destination>
        <fav>1</fav>
        <cheapest>140</cheapest>
    </destination>
    <destination>
        <fav>0</fav>
        <cheapest>150</cheapest>
    </destination>
</destinations> 
```

我正在为我的 spark List 组件创建 XMLListCollection。

```
var dataprovider:XMLListCollection = new XMLListCollection(xml.destination); 
```

我正在尝试使用 fav 和最便宜的元素对这个 XMLListCollection 进行排序。

```
var sort:Sort = new Sort();
sort.fields = [new SortField("fav" , true , true)];
sort.fields.push(new SortField("cheapest" , false , true));
dataprovider.sort = sort;
dataprovider.refresh(); 
```

一切正常，直到我更新 fav 的值：

```
xml.destination.(id == String(destId))[0].fav = 0; 
```

更新后 XML 结构看起来完全一样，但我的 itemrenderer 对象抛出错误：

```
override public function set data( value:Object ) : void { 
    dest_name.text = value.text;
} 
```

错误说明该值为空。首先 value 怎么可能是 null 呢？当我从排序字段中删除 fav 或更新最便宜的元素时，我没有收到任何错误。

有人知道这个异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:29:02.547

您必须考虑到您的 itemrenderer 被回收，例如，如果您的集合中的项目顺序发生更改（当您更改排序字段的值时）。当渲染器被回收时，可以将 null 传递给 set data 函数。

这意味着你的功能

```
override public function set data( value:Object ) : void { 
    dest_name.text = value.text;
} 
```

应该这样改变：

```
override public function set data( value:Object ) : void { 
    if(value){
         dest_name.text = value.text;
    }
} 
```

在实现项目渲染器时，您应该始终牢记这一点。

# php - 分配外键时的问题

> ID：13913903
> 
> 赞同：-6
> 
> 时间：2012-12-17T12:10:10.780
> 
> 标签：php, mysql

我创建了一个名为“项目”的表。我想在此表中创建一个外键“c_id”，但我面临以下错误消息。

错误信息如下。

SQL查询：

```
CREATE TABLE `Projects` (
`p_id` INT( 150 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`project_name` VARCHAR( 500 ) NOT NULL ,
`c_id` INT( 150 ) NOT NULL AUTO_INCREMENT ,
INDEX ( `c_id` )
) ENGINE = MYISAM 
```

MySQL 说：文档

> #1075 - 表定义不正确；只能有一个自动列，并且必须将其定义为键

背后的原因是什么？有什么帮助吗？

提前谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:11:58.330

你有两个`auto_increment`。试试这个：

```
CREATE TABLE Projects( 
    p_id INT( 150 ) NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    project_name VARCHAR( 500 ) NOT NULL, 
    c_id INT( 150 ) NOT NULL, 
    INDEX ( c_id ) 
) ENGINE = MYISAM 
```

`AUTO_INCREMENT`只为 p_id 做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:12:35.583

利用

```
CREATE TABLE Projects ( p_id INT( 150 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , project_name VARCHAR( 500 ) NOT NULL , c_id INT( 150 ) NOT NULL  , INDEX ( c_id ) ) ENGINE = MYISAM 
```

应该只有一个 AUTO_INCREMENT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:12:22.760

尝试这个。您必须使用 InnDB 以及只有 1 AUTO INCREMENT

```
CREATE TABLE Projects ( p_id INT( 150 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , project_name VARCHAR( 500 ) NOT NULL , c_id INT( 150 ) NOT NULL , INDEX ( c_id ) ) ENGINE = InnoDB 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:12:26.847

每个表只能有一个带有 AUTO_INCREMENT 的列。从 c_id 中删除它并重试

# java - 如何防止 jar-in-jar-loader 加载特定的类？

> ID：13913904
> 
> 赞同：0
> 
> 时间：2012-12-17T12:10:14.840
> 
> 标签：java, eclipse, jar, classloader, classnotfoundexception

想象一下我有一个文件夹的以下项目结构

*   一种
*   乙
*   C

和许多外部罐子。

现在我正在尝试构建两个不同的可执行jar，例如 A+B、A+C。

首先，我执行 Eclipse -> Export -> Executable Jar 并为 Ant 保存脚本。所以它会生成 Ant-script 和 jar-in-jar-loader。现在我修改 ant 脚本以排除文件夹`B`

```
 <fileset dir="C:/Users/Nikolay/bin">
        <exclude name="org/B"/>
    </fileset> 
```

并保持`jar-in-jar-loader.zip`文件不变。

构建 jar 运行后会出现此错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/B
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoa
der.java:56)
Caused by: java.lang.ClassNotFoundException: org.B
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 3 more 
```

**但我确信 A 中没有使用 B 类。**

似乎`JarRscrLoader`尝试在应用程序启动时加载所有列出的类。**我怎样才能防止这种情况？**

请不要建议我将 Eclipse 的代码拆分为 2-3 个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:35:34.747

创建两个不同的运行配置（运行 --> 运行配置...）并根据您的要求修改类路径选项卡中包含的库。

导出项目时，只需选择适当的配置即可。

# hibernate - 使用 JPA 2 配置持久性和 orm

> ID：13913905
> 
> 赞同：5
> 
> 时间：2012-12-17T12:10:26.020
> 
> 标签：hibernate, persistence, jpa-2.0, jbpm

我在我的 jBPM 项目中使用 Persistence 时遇到了一些麻烦。

我的配置是 jBPM 5.4 + Hibernate + JPA 2，我目前正在设置流程以通过 persistence.xml 连接到具有持久性的数据库。我只是尝试将默认数据源（在 H2 服务器中）与我的自定义 persistence.xml 连接，但我一遍又一遍地收到相同的错误：

```
Unknown entity: org.jbpm.persistence.processinstance.ProcessInstanceInfo 
```

我已手动将以下内容添加到我的 src/META-INF 文件夹 JBPMorm-JPA2.xml 中，但错误仍然存​​在。谁能帮我？

JBPMorm-JPA2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
                 version="2.0">
      <named-query name="ProcessInstancesWaitingForEvent">
          <query>
select 
    processInstanceInfo.processInstanceId
from 
    ProcessInstanceInfo processInstanceInfo join processInstanceInfo.eventTypes eventTypes
where
    eventTypes = :type
          </query>
      </named-query>

      <!-- ProcessInstanceInfo mapping (needed for JPA 2) -->

      <entity class="org.jbpm.persistence.processinstance.ProcessInstanceInfo"
              metadata-complete="true">
        <pre-update method-name="update" />
        <attributes>
            <id name="processInstanceId">
                <column name="InstanceId" />
                <generated-value strategy="AUTO"/>
            </id>
            <basic name="processId" access="FIELD" />
            <basic name="startDate" access="FIELD" >
                <temporal>DATE</temporal>
            </basic>
            <basic name="lastReadDate" access="FIELD" >
                <temporal>DATE</temporal>
            </basic>
            <basic name="lastModificationDate" access="FIELD" >
                <temporal>DATE</temporal>
            </basic>
            <basic name="state" access="FIELD" />
            <basic name="processInstanceByteArray" access="FIELD" >
                <lob/>
            </basic>
            <version name="version" access="FIELD" >
                <column name="OPTLOCK" />
            </version>
            <element-collection name="eventTypes" target-class="java.lang.String" access="FIELD" >
                <collection-table name="EventTypes">
                    <join-column name="InstanceId"/>
                </collection-table> 
            </element-collection>
            <transient name="processInstance" />
            <transient name="env" />
        </attributes>
      </entity>

</entity-mappings> 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence
  version="1.0"
  xsi:schemaLocation=
    "http://java.sun.com/xml/ns/persistence
     http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd
     http://java.sun.com/xml/ns/persistence/orm
     http://java.sun.com/xml/ns/persistence/orm_1_0.xsd"
  xmlns:orm="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://java.sun.com/xml/ns/persistence">

  <persistence-unit name="IALPR" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/jbpm-ds</jta-data-source>
    <class>org.drools.persistence.info.SessionInfo</class>
    <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
    <class>org.drools.persistence.info.WorkItemInfo</class>

    <properties>
      <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
      <property name="hibernate.max_fetch_depth" value="3"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.transaction.manager_lookup_class"
                value="org.hibernate.transaction.BTMTransactionManagerLookup"/>

    </properties>

  </persistence-unit>

</persistence> 
```

**更新：**

为了解决这个问题，在 META-INF 文件夹中创建一个 ProcessInstanceInfo.hbm.xml，内容如下：

```
<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" > <hibernate-mapping package="org.jbpm.persistence.processinstance">

    <!-- access="field" for fields that have no setter methods -->
    <class name="ProcessInstanceInfo" table="ProcessInstanceInfo">

        <id name="processInstanceId" type="long" column="InstanceId">
            <generator class="native" />
        </id>

        <version name="version" type="integer" unsaved-value="null" access="field">
          <column name="OPTLOCK" not-null="false" />
        </version>

        <property name="processId" access="field" />
        <property name="startDate" type="timestamp" access="field" />
        <property name="lastReadDate" type="timestamp"  access="field" />
        <property name="lastModificationDate" type="timestamp" access="field" />
        <property name="state" type="integer" not-null="true" access="field" />

       <property name="processInstanceByteArray" type="org.hibernate.type.PrimitiveByteArrayBlobType" 
            column="processInstanceByteArray" access="field" length="2147483647" />

        <set name="eventTypes" table="EventTypes" access="field" >
            <key column="InstanceId"/>
            <element column="element" type="string"/>
        </set>

        <!-- NOT mapping [processInstance] field because field is transient -->    
        <!-- NOT mapping [env] field because field is transient -->    

    </class>

</hibernate-mapping> 
```

如果有人知道为 jBPM5 配置持久性的好教程，请分享...这太疯狂了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T09:45:35.063

好的，这里有一个使用 MySQL 数据库和 JBoss AS 在 JBPM 中配置持久性的小教程：

1) 在你的 src/main/java 文件夹下创建一个 META-INF 文件夹

2）创建persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
             xmlns="http://java.sun.com/xml/ns/persistence" 
             xmlns:orm="http://java.sun.com/xml/ns/persistence/orm" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd">

    <persistence-unit name="your_unit_name" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/your_data_source_name</jta-data-source>        
        <mapping-file>META-INF/JBPMorm.xml</mapping-file>
        <mapping-file>META-INF/ProcessInstanceInfo.hbm.xml</mapping-file>

        <!-- The tables that will be created in your specified sql schema -->
        <class>org.drools.persistence.info.SessionInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
        <class>org.drools.persistence.info.WorkItemInfo</class>

        <properties>

      <property name="hibernate.default_schema" value="your_schema_name" />  

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
            <property name="hibernate.connection.autocommit" value="false" />
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.hbm2ddl.auto" value="create" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" />

        </properties>        
    </persistence-unit>

</persistence> 
```

3）创建orm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd"
    version="1.0">
    <named-query name="ProcessInstancesWaitingForEvent">
        <query>
            select
            processInstanceInfo.processInstanceId
            from
            ProcessInstanceInfo processInstanceInfo
            where
            :type in elements(processInstanceInfo.eventTypes)
          </query>
    </named-query>

</entity-mappings> 
```

4) 创建 ProcessInstanceInfo.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping package="org.jbpm.persistence.processinstance">

    <!-- access="field" for fields that have no setter methods -->
    <class name="ProcessInstanceInfo" table="ProcessInstanceInfo">

        <id name="processInstanceId" type="long" column="InstanceId">
            <generator class="native" />
        </id>

        <version name="version" type="integer" unsaved-value="null" access="field">
          <column name="OPTLOCK" not-null="false" />
        </version>

        <property name="processId" access="field" />
        <property name="startDate" type="timestamp" access="field" />
        <property name="lastReadDate" type="timestamp"  access="field" />
        <property name="lastModificationDate" type="timestamp" access="field" />
        <property name="state" type="integer" not-null="true" access="field" />

       <property name="processInstanceByteArray" type="org.hibernate.type.PrimitiveByteArrayBlobType" 
            column="processInstanceByteArray" access="field" length="2147483647" />

        <set name="eventTypes" table="EventTypes" access="field" >
            <key column="InstanceId"/>
            <element column="element" type="string"/>
        </set>

        <!-- NOT mapping [processInstance] field because field is transient -->    
        <!-- NOT mapping [env] field because field is transient -->    

    </class>

</hibernate-mapping> 
```

5) 现在你必须定义你的数据源。我使用 JBoss5，这个版本的 JBoss 将读取任何带有 *-ds.xml 模式的文件作为数据源的定义。你必须把这个文件放在你的部署文件夹中（你可能会注意到那里已经有一个数据源文件，但不会有冲突）。如果您使用的是 JBoss7，则有另一种定义 DS 的方法 - 我想这可能会有所帮助[https://community.jboss.org/wiki/DataSourceConfigurationInAS7](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)。

无论如何，您的 yourDS-ds.xml 应该是这样的：

```
<datasources>
  <local-tx-datasource>
    <jndi-name>jdbc/your_datasource_name</jndi-name>
    <connection-url>your_db_url</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>your_user</user-name>
    <password>your_pass</password>
    <min-pool-size>5</min-pool-size>
    <max-pool-size>20</max-pool-size>
    <idle-timeout-minutes>5</idle-timeout-minutes>
  </local-tx-datasource>
</datasources> 
```

6）以上指令至少足以在数据库中创建持久化表。当您最终开始在 JBPM 中使用任务时，可能需要创建一个 Taskorm.xml 文件（google 一下，它太长了）。我不确定是否有必要，但无论如何我都有。

7) 最后，只需通过 EntityManagerFactory 在 Java 中调用您的持久性单元，创建您的环境并开始一个新会话。持久性数据应自动保存到数据库中。

希望这会有所帮助。干杯!

# javascript - 通过字符串名称访问 parseJSON

> ID：13913907
> 
> 赞同：0
> 
> 时间：2012-12-17T12:10:34.963
> 
> 标签：javascript, jquery, json

我正在 jsoning ac# const 类，获取名称-值对。我需要在客户端通过字符串名称访问它们，例如

```
return $.parseJSON(constantClass).'property'; 
```

这显然不起作用 - 有没有办法使用字符串名称从我的 json 输入中获取我的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:12:48.927

尝试以数组键的形式访问它们（对关联数组非常熟悉）：

```
return $.parseJSON(constantClass)['property']; 
```

在 MDN 上了解**[更多](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)**如何操作对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:18:53.243

您可以使用：

```
JSON.parse(constantClass)['proptery'] 
```

# python - Python在列表列表中查找值

> ID：13913911
> 
> 赞同：0
> 
> 时间：2012-12-17T12:10:44.133
> 
> 标签：python, list

最近我必须找到某物在哪个列表中。我使用了：

```
def findPoint(haystack, needle): # haystack = [[1,2,3], [4,5]...,[6,7,8,9]]
    for x in range(len(haystack)):
        if needle in haystack[x]:
            return x
    raise Exception("needle: " + str(needle) + " not in haystack") 
```

有一个 haystack.index(needle) 方法。问题是：“有没有更好的方法来做到这一点？”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T12:14:04.777

是的，对于初学者来说，不需要范围

```
for hay in haystack:
  if needle in hay:
    return hay 
```

如果您真的需要索引，请使用`enumerate`

```
for x, hay in enumerate(haystack):
  if needle in hay:
    return x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:31:06.427

你可以用 1-liner 做这样的事情：

```
def find_point(haystack,needle)
    return next(elem for elem in haystack if needle in elem) 
```

我认为应该可以（但它会返回 haystack 元素）。`StopIteration`如果针不在任何干草堆元素中，则会引发 a 。

听起来您实际上并不需要索引，但如果需要，请使用`enumerate`（如 Dima Rudnik 的出色回答所建议的那样）：

```
def find_point(haystack,needle):
    return next(idx for idx,elem in enumerate(haystack) if needle in elem) 
```

# jquery - 旨在在 iframe 中编写页面，但在 IE 中“Jquery 未定义”，但在其他任何地方都可以使用

> ID：13913913
> 
> 赞同：0
> 
> 时间：2012-12-17T12:10:51.590
> 
> 标签：jquery, ajax, internet-explorer, iframe

我正在整理一个网站（www.pickmixmagazine.com/wordpress），我有一个功能可以点击其中一个大方块，数据被加载到滑动 iframe 中（试试看！）我正在尝试从服务器使用 ajax 并将数据写入 iframe，如下所示。它在 Firefox 和 chrome 中完美运行，只是在 IE 中我不断收到错误**“$”未定义**，我无法访问任何 Jquery。这是代码（我只包含了函数的ajax部分）：

```
function changeFrame(i)
    {
        var elm = parent.document.getElementsByTagName('iframe')[0];
        var topval = $(elm).css('top');

        if(i!='' && i!='home' && window.top==window.self){
            //$('iframe.primary').attr('src', 'http://www.pickmixmagazine.com/wordpress/'+i);

            var ifrm = document.getElementById("mainframe")
            ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
            //var doc = w.document.documentElement;
            //w.contentWindow.location.replace('http://www.pickmixmagazine.com/wordpress/'+i);

            var xhr = $.ajax({
                    url: 'http://www.pickmixmagazine.com/wordpress/'+i,
                    success: function(data) {
                      ifrm.document.open();
                       ifrm.document.write(data);
                       ifrm.document.close(); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:25:12.013

听起来好像有什么东西导致了与 $ 的命名冲突。虽然这个问题只在 IE 中表现出来这一事实有点奇怪。

有点像在黑暗中拍摄，但您可以尝试取消定义 $ 标识符并尝试在代理函数中运行您的代码：

```
jQuery.noConflict();
jQuery(function($) {
       //put all JQuery related code here.

 }); 
```

# solr - org.apache.solr.common.SolrException：加载类 'org.apache.solr.handler.dataimport.DataImportHandler 时出错

> ID：13913915
> 
> 赞同：12
> 
> 时间：2012-12-17T12:10:53.460
> 
> 标签：solr, dataimporthandler

我是 solr 的新手。我已经在我的服务器上安装了 apache tomcat 7.0，我在服务器上安装了 solr 3.6.1。

我的 D:\ 驱动器上有网络人员设置的 solr-home 文件夹。其中的文件夹是：bin，etc，logs，multicore，webapps。

在 multicore 文件夹中有：core0、core1、exampledocs、README.txt 和 solr.xml。在 webapps 文件夹中，我没有别的 solr.war 文件。

现在我在名为 ConfigUserTextUpdate 的多核文件夹中再保留一个核心文件夹，其中包含 conf 文件夹并重新启动 tomcat 服务，我可以在 localhost/solr 上看到新的核心。

现在我将 db-config.xml 添加到 ConfigUserTextUpdate 核心。以下是内容：

```
<dataConfig>
<dataSource
type="JdbcDataSource"
driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"
url="jdbc:sqlserver://<dbname>\<servername>;databaseName=dbname" user="username"
    password="password"/>
<document>
    <entity name="ConfigUserTextUpdate" query="UserTextUpdate_Index">
    </entity>
</document>
</dataConfig> 
```

到目前为止一切都很好，所有三个核心都显示在 localhost/solr 上。现在在核心 ConfigUserTextUpdate 的 solrconfig.xml 中，我添加了这一行

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">db-data-config.xml</str>
    </lst>
  </requestHandler> 
```

它开始给出错误，如下所示：

> ```
> HTTP Status 500 - Severe errors in solr configuration. Check your log files for more detailed information on what may be wrong. If you 
> ```
> 
> 希望solr在配置错误后继续，更改：solr.xml中的false ------------------------------------ -------------------------- org.apache.solr.common.SolrException：加载类'org.apache.solr.handler.dataimport时出错。 DataImportHandler' 在 org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:394) 在 org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419) 在 org.apache.solr.core.SolrCore .createRequestHandler(SolrCore.java:455) 在 org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:159) 在 org.apache.solr.core.SolrCore.(SolrCore.java:563) 在 org.apache .solr.core.CoreContainer.create(CoreContainer.java:480) 在 org.apache.solr.core.CoreContainer.load(CoreContainer.java:332) 在 org.apache.solr.core.CoreContainer.load(CoreContainer.java ：216) 在 org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) 在 org.apache.catalina.core 的 org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161) .ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) 在 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) 在 org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) 在org.apache.catalina.core.ApplicationFilterConfig.(ApplicationFilterConfig.java:103) 在 org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650) 在 org.apache.catalina.core.StandardContext.startInternal(StandardContext .java:5306) 在 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 在 org.apache.catalina.core。ContainerBase.addChildInternal(ContainerBase.java:901) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) at org .apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655) at java.util.concurrent.Executors$RunnableAdapter.call （未知来源）在 java.util.concurrent.FutureTask$Sync.innerRun（未知来源）在 java.util.concurrent.FutureTask.run（未知来源）在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask（未知来源）在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) 引起：java.lang.ClassNotFoundException：org.apache.solr.handler.dataimport。DataImportHandler at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source)在 java.net.FactoryURLClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at org .apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378) ... 27 更多loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378) .. . 27 更多loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378) .. . 27 更多

我已经尝试了很多事情，比如将 dataimporthandler.jar 文件放在核心文件夹中，以及在各个站点上给出的其他许多事情，但仍然得到相同的错误。请帮我解决这些问题。

如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-15T10:49:02.847

您必须编辑 solrconfig.xml 并将路径添加到库中，例如：

```
<lib dir="../../../../dist/" regex="apache-solr-dataimporthandler-.*\.jar" /> 
```

..如果您仍然在该目录中拥有它。在示例 solrconfigs 我发现他们把它放在下面

```
<luceneMatchVersion>LUCENE_40</luceneMatchVersion> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-09T14:02:49.193

在 solr-4.3.0 中尝试实现：[http](http://wiki.apache.org/solr/DIHQuickStart) ://wiki.apache.org/solr/DIHQuickStart添加：

```
<lib dir="../../../contrib/dataimporthandler/lib" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-dataimporthandler-.*\.jar" /> 
```

在文件中：*PROJECT-HOME* \solr\collection1\conf\solrconfig.xml

在现有线路下：

```
<lib dir="../../../contrib/velocity/lib" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-velocity-\d.*\.jar" /> 
```

解决了这个问题。也许您需要重新启动 servlet 容器（默认情况下：Jetty）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T12:46:03.620

**solr-5.2.0**版本的问题。当我切换到**solr-5.5.0**时，问题已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T19:02:24.057

有类似的问题，我的问题是符号链接（solr 没有关注它们）。

# facebook - 在重定向 https://www.facebook.com/dialog/oauth/access_token?client_id=183536378401103&redirect_uri=https://apps.facebook.com/ 上进行身份验证后出现错误 500

> ID：13913916
> 
> 赞同：1
> 
> 时间：2012-12-17T12:10:58.703
> 
> 标签：facebook, oauth, confirm

早上好

身份验证后确认我的应用程序不起作用。

[https://www.facebook.com/dialog/oauth/access_token?client_id=183536378401103&redirect_uri=https://apps.facebook.com/barometrorischio/home.php](https://www.facebook.com/dialog/oauth/access_token?client_id=183536378401103&redirect_uri=https://apps.facebook.com/barometrorischio/home.php)上有一个arror 500

直到几周前，该应用程序才能完美运行。

在我的索引代码下方

```
$facebook = new Facebook(array('appId'  => APP_ID,
                   secret' => SECRET,
                       'cookie' => false));

$user = $facebook->getUser();
if ($user) { 
try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
  }
}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Il Barometro del Rischio</title>
    </head>
    <body>
        <?php            
            if (isset($user) && $user != 0) {
                $redirect = "https://apps.facebook.com/".APP_NAME."/home.php";            
            }   else    {
                $uri="https://apps.facebook.com/".APP_NAME."/home.php";
                $redirect = "https://www.facebook.com/dialog/oauth/access_token?client_id=".APP_ID."&redirect_uri=".$uri;
            }
        ?>
        <script type="text/javascript">window.open('<?=$redirect?>', '_parent', '');</script>
    </body>
</html> 
```

我不知道会发生什么。

我在 Index e 中有另一个具有相同代码的应用程序，它运行良好

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:28:31.827

你做错了什么

改变

```
 $redirect = "https://www.facebook.com/dialog/oauth/access_token?client_id=".APP_ID."&redirect_uri=".$uri; 
```

至

```
 $redirect = "https://www.facebook.com/dialog/oauth/?client_id=".APP_ID."&redirect_uri=".$uri; 
```

# java - 大于/小于如何在内部起作用

> ID：13913917
> 
> 赞同：1
> 
> 时间：2012-12-17T12:11:01.420
> 
> 标签：java, comparison, integer

大于/小于如何在内部起作用

如果我将 5 与 100 与 5 与 2,147,483,647 (Integer.MAX_VALUE) 进行比较，会对性能造成多大影响

```
5 < 100 and 5 < Integer.MAX_VALUE 
```

我问这个问题是因为在某些代码中，当数据不存在时会返回 rank= Integer.MAX_VALUE，即使 rank 大于 100，我们也会丢弃数据，所以如果我返回 101 而不是 Integer.MAX_VALUE，会有一些显着改善. 我正在获取数百万条记录的文件，我必须对每条记录进行比较。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T12:15:24.857

> 如果我将 5 与 100 与 5 与 2,147,483,647 进行比较，会对性能造成多大影响

在我熟悉的所有 32 位和 64 位硬件架构上，这两个比较将花费完全相同的时间。

提高性能的方法是关注您进行*的比较次数*（以及更一般地说，您的算法必须执行的工作量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:15:33.777

应该没有任何区别，只要数量很小（IE，不是 64 位）。只有在比较 64 位数字时，64 位才会有所不同。这通常是我熟悉的任何 CPU 中的单个周期（或固定数量的小周期）请求。但是，抛出异常或类似的东西可能是个好主意，而不是将数字设置为预定义的范围。

# excel - 在 Excel 中从字符串转换为 int 为空或空白

> ID：13913923
> 
> 赞同：2
> 
> 时间：2012-12-17T12:11:17.020
> 
> 标签：excel, cell, converter, string, vba

作为输出我有`Range("H" & temp).Cells`：

```
234
0
   (Empty)
2 
```

我想将其转换为`long`or `int`，因为它是一个文本值。所以我做了

```
Range("H" & temp).Cells = CInt(Range("H" & temp).Cells) 
```

它适用于 234、0 和 2，但是当单元格为空时，它会显示错误。我应该怎么办？我希望空单元格被视为 0，当然使用 VBA 宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:21:10.233

那个牢房不是真的空的。它有一个空格或其他一些非打印字符。`Trim`在使用之前尝试使用`CInt`以消除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T08:36:44.027

如果你需要在公式中这样做，你可以使用这个：IF(IFERROR(VALUE(A1)); 0; A1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:59:56.780

```
Sub t()
Dim colNum As Long
colNum = Range("H1").Column 'please coustomize which column
For i = 1 To 4 'Please customize the row range
    Cells(i, colNum).Value = CLng(Cells(i, colNum).Value) 'blank --> 0
    Cells(i, colNum).NumberFormat = "0.00" 'also changes the numberFormat
Next i
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:14:06.727

在未使用的单元格中输入数字 1 并将该单元格复制到剪贴板。突出显示您希望用零替换空白的单元格范围。选择编辑 | 从菜单中选择性粘贴。在结果对话框的“操作”部分，选择“乘”选项并单击“确定”。您刚刚将范围内的每个单元格乘以 1。数字单元格不会改变。包含文本数据的单元格将被忽略。但是任何空白的单元格现在都将包含一个零。当然，您可以通过将包含 0 的单元格复制到剪贴板并在“选择性粘贴”对话框中使用“添加”而不是“相乘”来完成相同的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-08T23:23:32.947

这对我有用，一个自定义函数，您可以根据需要将变体更改为 int 或 double

```
Function checkEmpty(value As Variant) As Variant
    If value = "" Then
        checkEmpty = 0
    Else
        checkEmpty = value
    End If
End Function 
```

如何称呼它：

```
checkEmpty(cells(1,1).value) 
```

# html - html5 在不同的行中启动文本

> ID：13913925
> 
> 赞同：0
> 
> 时间：2012-12-17T12:11:21.750
> 
> 标签：html, html5-canvas

我正在制作一个 html5 文本飞溅，其中我要求文本位于多行中。例如

```
Everything
Awesome
Is Really
Not awesome 
```

但是要排成一行，这样

> 一切很棒的东西真的不很棒

我无法创建换行符。对于不同的单词。任何人都可以帮我解决这个问题。

我创建了一个演示来展示[http://cssdeck.com/labs/owxlsevi/0](http://cssdeck.com/labs/owxlsevi/0)上的内容。任何人都可以建议我如何像我上面指定的那样在不同的行中获取每个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:17:58.520

不幸的是，canvas 2d 上下文的 fillText 和 strokeText 方法不支持换行符。当您需要多行文本时，您必须自己通过将文本拆分为子字符串并使用不同的 y 偏移量分别输出它们来执行此操作。

这是一个函数，它在多行中绘制带有换行符 (\n) 的文本，由 12 像素的固定行高分隔：

```
function fillMultilineText(context, text, x, y) {
    // split text at line-breaks and put the resulting sub-strings into an array
    var lines = text.split('\n');
    // draw each line with 12pixel offset
    for(var i = 0; i < lines.length; i++) {
         var line_y = y + i * 12;
         context.fillText(lines[i], x, line_y);
    }
} 
```

这是一些解决方案的相关问题： [HTML5 canvas ctx.fillText won't do line breaks?](https://stackoverflow.com/questions/5026961/html5-canvas-ctx-filltext-wont-do-line-breaks)

# javascript - 查找类的第一个实例的 id

> ID：13913927
> 
> 赞同：5
> 
> 时间：2012-12-17T12:11:24.133
> 
> 标签：javascript, jquery, jquery-selectors

我有几个`input`......有些有课程，有些没有。类是任意分配的（`.error`在提交失败的表单上使用“”，给您一个想法）。

**如何找到该类出现的第一个实例的 id？**

例如：

```
<input id="firstName" type="text" name="firstName" class="text" value="" />
<input id="lastName" type="text" name="lastName" class="text error" value="" />
<input id="email" type="text" name="email" class="text" value="" />
<select name="gender" class="error">
    <option value=""></option>
    <option value="male">Male</option>
    <option value="female">Female</option>                          
</select> 
```

您会注意到，标签上还有一个`error`类。`select`因此，在这种特殊情况下，我需要找到 id “lastName”，因为这是第一次出现带有类“error”的元素。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:12:48.267

试试这个

```
$('.error').first().attr('id') 
```

如其他答案所述，使用 css 选择器`:first`：

```
$('.error:first').attr('id') 
```

请记住，`undefined`如果没有 id 属性或没有包含类“错误”的元素，则结果可能是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:14:28.937

你可以这样找到它：

```
 $('.error:first').attr('id'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T12:14:34.933

这应该是您正在寻找的 -

```
var className = 'error';
$('.' + className + ':first').attr('id'); 
```

我正在使用[`:first`](http://api.jquery.com/first-selector/)选择器和[`.attr()`函数](http://api.jquery.com/attr/)。

*   `:first`- 选择第一个匹配的元素。
*   `.attr()`- 获取匹配元素集中第一个元素的属性值。

查看`attr()`函数的定义，您甚至可能不需要指定`:first`. 但是，我发现使用选择器尽可能详细总是更好。这也提高了可读性。

由于您有多个具有相同类的不同类型的元素（输入和选择），我还建议指定元素的类型（在本例中为输入） -

```
$('input.error:first').attr('id'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T12:14:04.043

`$('.error').first();`将返回具有类错误的第一个元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T12:17:59.877

试试这个：

```
$(".error:first").prop('id'); 
```

**PS**作为建议，`prop()`如果您使用的是 jQuery 1.6+，请使用

`.attr`查看和之间区别的最简单方法`.prop`是以下示例：

```
<input blah="hello"> 
```

1.  **`$('input').attr('blah')`**：`'hello'`按预期返回。这里没有惊喜。
2.  **`$('input').prop('blah')`**: 返回`undefined`——因为它正在尝试这样做`[HTMLInputElement].blah`——并且该 DOM 对象上不存在这样的属性。它仅作为该元素的属性存在于范围内，即`[HTMLInputElement].getAttribute('blah')`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T12:12:58.657

```
var yourID = document.getElementsByClassName('error')[0].id; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-17T12:15:39.940

您可以使用

```
$('input').first(function(){
    $(this).attr(id);
}); 
```

但这适用于所有输入，我建议您将它们包装在 div 中并编写

```
$('div#%wrapper_id% input').first(function(){
    ...
} 
```

# android - 在安卓设备中插入信用卡信息时没有连接错误

> ID：13913931
> 
> 赞同：3
> 
> 时间：2012-12-17T12:11:37.163
> 
> 标签：android, in-app

我正在尝试`in-app`在 android 中实现我的测试示例现在运行完美（终于）。 **但是**现在当我在我的 android 设备（Sony xperia sola 4.0.4，HTC salsa 2.3.3，Galaxy_tab2 4.0.4）中插入信用卡信息时，我遇到了另一个问题，由于这个错误，它是字段。 ![在此处输入图像描述](../Images/320ab5999a903274c3e2b792ce421d30.png)

我每次都检查互联网，它工作正常，首先我不确定我的代码，所以我尝试从 Google Play 下载应用程序，即使错误变成了acouter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:47:05.800

![在此处输入图像描述](../Images/caa265f1be063ca76c2ff16e6815085d.png)

是的，终于完成了问题出在我的测试帐户上，我只是不认为该帐户必须输入其信用卡信息作为Gmail注册的一部分

# c# - 获取异常详细信息

> ID：13913932
> 
> 赞同：2
> 
> 时间：2012-12-17T12:11:49.023
> 
> 标签：c#, exception

我想写异常的方法名、类名、文件名、行号。我怎样才能做到这一点？我尝试了下面的代码，传递`Exception`给写入`msg`文本文件的函数。

```
string msg = "";
StackTrace st = new StackTrace(ex);
var frame=st.GetFrame(0);           
msg = @"Message : " + ex.Message + " \n FileName: " + frame.GetFileName() + " \n Method Name : " + frame.GetMethod() + "\n Line Number : " + frame.GetFileLineNumber()+"\n Class Name :"+frame.GetMethod().DeclaringType; 
```

日志写入文件如下

```
 Message: Message : Attempted to divide by zero. 
 FileName:  
 Method Name : Void Page_Load(System.Object, System.EventArgs)
 Line Number : 0
 Class Name :RequestsView 
```

为什么即使它出现在页面的另一行，也会`FileName`丢失并显示 0。`LineNumber`如果有的话，请在代码中提出更正建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:18:40.207

只需使用`Exception.StackTrace`抛出异常的属性来获取您需要的所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:31:32.173

为什么要重新发明轮子？干燥。NLog 提供了这个功能，而且开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T12:39:31.707

使用此行获取您想要的详细信息..

int lineNumber = new System.Diagnostics.StackTrace(ex,true).GetFrame(0).GetFileLineNumber(); className = new System.Diagnostics.StackTrace(ex, true).GetFrame(0).GetFileName(); methodName = new System.Diagnostics.StackTrace(ex,true).GetFrame(0).GetMethod().Name;

# json - 如何在 gorest EndPoint 语法中为输出数据提供 JSON 对象 ID？

> ID：13913935
> 
> 赞同：2
> 
> 时间：2012-12-17T12:11:56.603
> 
> 标签：json, go, mustache

我是 Go 和 GoRest 的新手，但我对此有疑问。

如何在 gorest EndPoint 语法中为下面描述的输出数据提供 JSON 对象 ID？

我有一个简单的例子：

```
type HelloService struct {
    gorest.RestService `root:"/api" consumes:"application/json" produces:"application/json"`
    playList    gorest.EndPoint `method:"GET" path:"/list/" output:"[]Item"`
    playItem    gorest.EndPoint `method:"PUT" path:"/go/{Id:int}" postdata:"Item"`
}

func(serv HelloService) PlayList() []Item{
    serv.ResponseBuilder().SetResponseCode(200)
    return itemStore

}

type Item struct{
    Id              int
    FileName        string
    Active          bool
}

var(
    itemStore []Item
) 
```

生成的 JSON 是：

```
[{"Id":1,"FileName":"test :1","Active":false},{"Id":2,"FileName":"test :2","Active":false}, ... ] 
```

但是，Mustache.js 无法解析它，因为它首先需要对象 ID。小胡子想要这样的东西：

```
{
 "repo": [{"Id":1,"FileName":"test :1","Active":false},{"Id":2,"FileName":"test      
:2","Active":false}, ... ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:27:03.800

你可能需要改变

`playList gorest.EndPoint`方法：“GET” 路径：“/list/” 输出：“[]Item”`

到 `playList gorest.EndPoint`方法：“GET”路径：“/list/”输出：“ItemStore”`

和

```
var(
    itemStore []Item
) 
```

到

```
type ItemStore struct {
    Items []Item
}

var(
    itemStore ItemStore
) 
```

一个完整的工作程序会更容易调试。

# android - onCreateLoader() 方法中的几个游标

> ID：13913940
> 
> 赞同：1
> 
> 时间：2012-12-17T12:12:11.637
> 
> 标签：android, android-cursorloader

我在使用`CursorLoader`. 我需要检索给定名称的电话和电子邮件地址。

我实现了`LoaderManager.LoaderCallbacks<Cursor>`接口的方法。问题是我需要先从表联系人中获取contact_id，然后根据该contact_id 查询电子邮件和电话的RawContacts/Data 表。

我找不到你有多个查询的例子`onCreateLoader()`，通常你有 return `new CursorLoader(...)`。我有使用`managedQuery(..)`方法获取联系人 ID 并将其传递给的想法，`CursorLoader`但我想这不是一个好主意。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:35:31.657

在 OnCreateLoader 中有一个 id 参数，您可以使用它来更改 CursorLoader。

你可以做类似的事情

```
onCreateLoader(int id, bundle args) {

    switch(id) {

        case FETCH_CONTACT_ID: {
             //Return CursorLoader for fetching contactID
             break;
        }

        case FETCH_CONTACT_INFO: {
             //Return CursorLoader for fetching raw contacts
             break;
        }
   }
}

OnLoadFinished(Loader loader, Cursor c) {

    switch(loader.getId()) {

     case FETCH_CONTACT_ID: {
         //Contact IDs have been fetched, so start fetching raw contact data
         //Enter the IDs you want to fetch data for in the bundle which will be passed to onCreateLoader()
         mLoaderManager().restartLoader(FETCH_CONTACT_INFO, args);
         break;
    }

    case FETCH_CONTACT_INFO: {
         //Raw contact info has been fetched, do whatever you want with it
         break;
    }
    }
} 
```

# npm - 在 Windows 上运行 Npm 时如何修复 SSL 证书错误？

> ID：13913941
> 
> 赞同：108
> 
> 时间：2012-12-17T12:12:13.767
> 
> 标签：npm

当我尝试使用 npm 安装软件包时，它不起作用。经过漫长的等待，我最终得到一个错误'隧道套接字无法建立，sutatusCode = 403'。

```
$ npm install coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm ERR! Error: tunneling socket could not be established, sutatusCode=403
npm ERR!     at ClientRequest.onConnect (c:\Program Files\nodejs\node_modules\npm\node_modules\request\tunnel.js:148:19)
npm ERR!     at ClientRequest.g (events.js:193:14)
npm ERR!     at ClientRequest.EventEmitter.emit (events.js:123:20)
npm ERR!     at Socket.socketOnData (http.js:1393:11)
npm ERR!     at TCP.onread (net.js:403:27) 
```

但是，当我在我的网络浏览器（谷歌浏览器）中浏览到相同的 URL 时，它加载得很好（见脚注）。[https://registry.npmjs.org/coffee-script](https://registry.npmjs.org/coffee-script)

怎么了？

* * *

虽然我碰巧使用了 https 代理，但我相信这不是问题。我已经配置了环境变量`https_proxy`（根据 npm[用户指南](https://npmjs.org/doc/config.html)）。我知道环境变量是正确的，因为 Python 包管理器`pip`正确地遵循它。

我相信这个问题与 SSL 证书有关，因为如果我使用 下载该 URL `wget`，我会收到关于证书的明确错误

```
$ wget https://registry.npmjs.org/coffee-script
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = c:/progra~1/wget/etc/wgetrc
--2012-12-17 12:14:07--  https://registry.npmjs.org/coffee-script
Resolving corpproxy... 10.254.215.35
Connecting to corpproxy|10.254.215.35|:8080... connected.
ERROR: cannot verify registry.npmjs.org's certificate, issued by `/C=US/ST=CA/L=Oakland/O=npm/OU=npm Certificate Authority/CN=npmCA/emailAddress=i@izs.me':
  Unable to locally verify the issuer's authority.
To connect to registry.npmjs.org insecurely, use `--no-check-certificate'.
Unable to establish SSL connection. 
```

我怎样才能解决这个问题？在不影响安全性的情况下。

* * *

我曾经在我的网络浏览器中遇到 SSL 证书错误，直到我在控制面板的 Internet 选项中将“npmCA”证书安装为“受信任的根证书颁发机构”（截图![在此处输入图像描述](../Images/1a005b76a2e4688bfaac47824b720c03.png)）

* * *

[编辑：我根据https://npmjs.org/doc/config.html#strict-ssl](https://npmjs.org/doc/config.html#strict-ssl)尝试了一个*不安全*的解决方法

```
npm set strict-ssl false 
```

然而它仍然超时并出现同样的错误

```
$ npm install coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm ERR! Error: tunneling socket could not be established, sutatusCode=403 
```

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2015-05-20T05:58:43.877

**TL;DR** - 只需运行此程序，不要禁用您的安全性：

*替换现有证书*

```
# Windows/MacOS/Linux 
npm config set cafile "<path to your certificate file>"

# Check the 'cafile'
npm config get cafile 
```

**或** *扩展现有证书*

设置此环境变量以扩展预定义的证书： `NODE_EXTRA_CA_CERTS`到`"<path to certificate file>"`

## 全文

我不得不在 Windows 下的企业防火墙后面使用 npm、pip、ma​​ven 等——这并不好玩。我会尽可能地保持这个平台不可知/感知。

## HTTP_PROXY & HTTPS_PROXY

`HTTP_PROXY`&`HTTPS_PROXY`是许多软件用来知道你的代理在哪里的环境变量。在 Windows 下，许多软件还使用您的操作系统指定的代理，这是完全不同的事情。这意味着您可以让 Chrome（它使用 Internet 选项中指定的代理）很好地连接到 URL，但 npm、pip、ma​​ven 等由于使用 HTTPS_PROXY（除非它们使用 HTTP_PROXY - 见下文）而无法正常工作。通常环境变量看起来像：

```
http://proxy.example.com:3128 
```

但是你得到一个[403](http://en.wikipedia.org/wiki/HTTP_403)，这表明你没有通过你的代理进行身份验证。如果它是代理上的基本身份验证，您需要将环境变量设置为以下形式：

```
http://user:pass@proxy.example.com:3128 
```

## 可怕的 NTLM

有一个 HTTP 状态代码 407（需要代理身份验证），这是说它是代理而不是目标服务器拒绝您的请求的更正确的方式。该代码困扰了我最长时间，直到在 Google 上呆了很长时间后，我才知道我的代理使用了[NTLM 身份验证](http://en.wikipedia.org/wiki/NT_LAN_Manager)。HTTP 基本身份验证不足以满足我的公司霸主安装的任何代理。我求助于在我的本地机器上使用[Cntlm](http://cntlm.sourceforge.net/)（未经身份验证），然后让它使用上游代理处理 NTLM 身份验证。然后我不得不告诉所有不能做 NTLM 的程序使用我的本地机器作为代理——这通常就像设置`HTTP_PROXY`和`HTTPS_PROXY`. 否则，对于 npm 使用（正如@Agus 建议的那样）：

```
npm config set proxy http://proxy.example.com:3128
npm config set https-proxy http://proxy.example.com:3128 
```

## “我们需要解密所有 HTTPS 流量，因为病毒”

在这种设置已经（笨拙地）嗡嗡作响大约一年之后，公司霸主决定更换代理。不仅如此，它还将不再使用 NTLM！可以肯定的是一个勇敢的新世界。但是由于这些恶意软件的编写者现在通过 HTTPS 传递恶意软件，他们保护我们这些可怜的无辜用户的唯一方法就是在每个连接到达我们之前就对每个连接进行中间人扫描以查找威胁。正如你可以想象的那样，我被安全感所征服。

长话短说，需要将自签名证书安装到 npm 中以避免[`SELF_SIGNED_CERT_IN_CHAIN`](https://github.com/npm/npm/issues/8129)：

```
npm config set cafile "<path to certificate file>" 
```

或者，`NODE_EXTRA_CA_CERTS`可以将环境变量设置为证书文件。

我认为这就是我所知道的关于让 npm 在代理/防火墙后面工作的一切。可能有人觉得它有用。

**编辑**：通过使用 HTTP 注册表或设置来关闭 HTTPS 是一个非常常见的建议`NODE_TLS_REJECT_UNAUTHORIZED`。这些都不是好主意，因为您正在为进一步的中间人或重定向攻击敞开大门。在进行软件包安装的机器上快速欺骗您的 DNS 记录，您会发现自己在任何地方都信任软件包。使 HTTPS 工作似乎需要做很多工作，但强烈建议这样做。当您负责允许不受信任的代码进入公司时，您就会明白为什么。

**编辑 2**：请记住，设置`npm config set cafile <path>`会导致 npm 仅使用该文件中提供的证书，而不是使用它扩展现有证书。

如果您想扩展现有的证书（例如使用公司证书），使用环境变量`NODE_EXTRA_CA_CERTS`链接到文件是可行的方法，并且可以为您节省很多麻烦。请参阅[如何添加自定义证书授权 ca-to-nodejs](https://stackoverflow.com/questions/29283040/how-to-add-custom-certificate-authority-ca-to-nodejs#comment91831623_47160447)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-11-30T20:47:40.363

通过使用存储库的 http 版本为我解决了这个问题：

```
npm config set registry http://registry.npmjs.org/ 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-02-05T15:45:15.710

```
npm config set strict-ssl false 
```

为我解决了这个问题。在这种情况下，我的代理和工件存储库都位于 aws 云上的私有子网后面

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-20T12:12:37.060

几天前我碰巧遇到了类似的 SSL 问题。问题是您的 npm 没有为[https://registry.npmjs.org](https://registry.npmjs.org)使用的证书设置根证书。

**解决方案：**

1.  用于`wget https://registry.npmjs.org/coffee-script --ca-certificate=./DigiCertHighAssuranceEVRootCA.crt`修复 wget 问题
2.  用于`npm config set cafile /path/to/DigiCertHighAssuranceEVRootCA.crt`为您的 npm 程序设置根证书。

您可以从以下位置下载根证书：`https://www.digicert.com/CACerts/DigiCertHighAssuranceEVRootCA.crt`

**注意：**不同的程序可能使用不同的方式管理根证书，所以不要将浏览器与其他浏览器混用。

## **分析：**

让我们先解决您的`wget https://registry.npmjs.org/coffee-script`问题。你的片段说：

```
        错误：无法验证 registry.npmjs.org 的证书，
        由 /C=US/ST=CA/L=Oakland/O=npm/OU=npm 发布
       证书颁发机构/CN=npmCA/emailAddress=i@izs.me：
       无法在本地验证颁发者的权限。

```

这意味着您的 wget 程序无法验证`https://registry.npmjs.org`的证书。有两个原因可能会导致此问题：

1.  您的 wget 程序没有此域的根证书。根证书通常随系统一起提供。
2.  该域不会将根证书打包到他的证书中。

所以解决方案是明确设置根证书为`https://registry.npmjs.org`. 我们可以使用 openssl 来确定下面的原因是问题所在。

在命令行上尝试`openssl s_client -host registry.npmjs.org -port 443`，我们将收到此消息（前几行）：

```
    已连接（00000003）
    depth=1 /C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance CA-3
    验证错误：num=20：无法获取本地颁发者证书
    验证返回：0
    ---
    证书链
     0 秒：/C=US/ST=加利福尼亚/L=旧金山/O=Fastly, Inc./CN=a.sni.fastly.net
       i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance CA-3
     1 s:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance CA-3
       i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance EV Root CA
    ---

```

此行 `verify error:num=20:unable to get local issuer certificate`确保`https://registry.npmjs.org`不打包根证书。所以我们谷歌`DigiCert High Assurance EV Root CA`根证书。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-05-13T17:13:26.737

我有同样的问题，我克服了使用

```
npm config set proxy http://my-proxy.com:1080
npm config set https-proxy http://my-proxy.com:1080 
```

[node-doc](https://npmjs.org/doc/config.html#https-proxy)上的附加信息

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-18T14:52:02.140

我遇到了同样的问题。经过一番挖掘，我意识到许多后/预安装脚本会尝试安装各种依赖项，并且有时会使用特定的存储库。更好的方法是禁用对我有用的 nodejs 的 https 模块的证书检查。

`process.env.NODE_TLS_REJECT_UNAUTHORIZED = "0"`

[从这个问题](https://stackoverflow.com/questions/10888610/ignore-invalid-self-signed-ssl-certificate-in-node-js-with-https-request)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-20T11:04:50.487

问题出在您的代理上。因为您的安装包的位置提供者会创建自己的证书，并且不会从公认的权威机构购买经过验证的证书，所以您的代理不允许访问目标主机。我假设您在使用 Chrome 浏览器时绕过代理。所以没有检查。

这个问题有一些解决方案。但这一切都意味着您信任软件包提供者。

可能的解决方案：

1.  如其他答案中所述，您可以进行`http://`可能绕过您的代理的访问。这有点危险，因为中间人可以将恶意软件注入您的下载中。
2.  `wget`建议您使用flag `--no-check-certificate`。这将为您的请求添加代理指令。如果代理理解该指令，则不检查服务器证书是否由权威机构验证并通过请求。也许有一个与 wget 标志相同的 npm 配置。
3.  您将代理配置为接受 CA npm。我不知道你的代理，所以我不能给你提示。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-29T22:53:30.353

您需要将证书 .cer 转换为 .pem。对于在 CMD 中运行：

openssl x509 -inform der -in C:\tmp\zScaler.cer -out C:\tmp\zScaler.pem

npm 配置设置 cafile C:\tmp\zScaler.pem

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-08-27T08:34:15.837

这是您可以避免 npm 并在窗口机器中使用纱线的方法。

```
yarn config set "strict-ssl" false 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-09-28T07:09:11.567

如果您可以控制代理服务器或者可以说服您的 IT 管理员，您可以尝试从 SSL 检查中明确排除 registry.npmjs.org。这应该避免代理服务器的用户必须禁用严格的 SSL 检查或安装新的根 CA。

# jquery - 绝对位置 jquery 内联表单验证错误框位置

> ID：13913946
> 
> 赞同：2
> 
> 时间：2012-12-17T12:12:26.103
> 
> 标签：jquery, css, validation

我正在使用[Positon-Absolute 的 jQuery 内联表单验证](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)。

但是我对错误框的位置不满意，我宁愿它坐在输入框旁边而不是它上面。jquery 在输入上方插入 div。[这是演示](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)。

关于如何定位它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:41:17.600

我认为这可以通过为负责显示错误消息的类覆盖他们的 css 来实现。

# php - 即将举行的活动脚本

> ID：13913948
> 
> 赞同：0
> 
> 时间：2012-12-17T12:12:34.387
> 
> 标签：php, mysql, events, show

我正在尝试制作一个显示即将发生的事件（单个）的脚本。

这是我所拥有的：

Joomla，一个扩展程序，您可以在其中添加事件和该扩展程序的日历，以显示这些事件。事件存储在 MySQL 中（事件日期存储为 xxx-xx-xx 格式）。

为了显示迄今为止的事件，我在想：

```
<?php if(strtotime('gets date from mysql') > time()): ?> 
```

我在这里面临一个问题。如何告诉脚本自动选择什么事件，以及在截止日期之后选择另一个最近的事件？

要找到一个事件，我认为它必须从今天开始搜索并找到今天日期之后的第一个事件。

（编辑：也许使用`SELECT * FROM ... WHERE 'time' > NOW() ORDER BY 'time' ASC LIMIT 1`而不是 strtotime 更好？）

谢谢！

问候， 巴塞卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:21:44.137

您需要这样的查询来返回即将发生的事件：

```
SELECT * FROM EventTable
WHERE Date > CURDATE()
ORDER BY Date
LIMIT 0, 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:21:11.450

选择日期字段作为日期字段。

```
SELECT * FROM .. WHERE time >= CURDATE() 
```

# java - 在我的 android 应用程序中获取灰色方块而不是谷歌地图

> ID：13913954
> 
> 赞同：1
> 
> 时间：2012-12-17T12:12:51.873
> 
> 标签：java, android

我正在创建基于 Web 的 android 应用程序，我想将 Google Map 集成到我的应用程序中。我也得到了我的 api 密钥，但我仍然得到灰色方块而不是实际的地图。还有我在下面给出的错误消息

在控制台中，我收到此消息

```
[2012-12-17 17:37:28 - Google] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.google/.MapsActivity }
[2012-12-17 17:37:28 - Google] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

这是我的日志：

```
12-17 17:31:23.004: W/dalvikvm(301): threadid=1: spin on suspend #1 threadid=8 (pcf=0)
12-17 17:31:23.004: D/dalvikvm(301): Temporarily moving tid 313 to fg (was 0)
12-17 17:31:23.004: D/dalvikvm(301): Temporarily raised priority on tid 313 (19 -> 0)
12-17 17:31:23.013: W/dalvikvm(301): threadid=1: spin on suspend resolved in 1014 msec
12-17 17:31:23.013: D/dalvikvm(301): Restored policy of 313 to 0
12-17 17:31:23.013: D/dalvikvm(301): Restored priority on 313 to 19
12-17 17:31:23.444: D/dalvikvm(301): GC_FOR_MALLOC freed 5064 objects / 310440 bytes in 1440ms
12-17 17:31:23.864: D/dalvikvm(301): GC_FOR_MALLOC freed 9756 objects / 595416 bytes in 98ms
12-17 17:31:24.194: D/dalvikvm(301): GC_FOR_MALLOC freed 5164 objects / 335976 bytes in 135ms
12-17 17:31:24.374: D/dalvikvm(301): GC_FOR_MALLOC freed 6226 objects / 380088 bytes in 59ms
12-17 17:31:24.584: D/dalvikvm(301): GC_FOR_MALLOC freed 8548 objects / 652784 bytes in 52ms
12-17 17:31:24.744: D/dalvikvm(301): GC_FOR_MALLOC freed 6088 objects / 369232 bytes in 59ms
12-17 17:31:24.903: I/MapActivity(301): Handling network change notification:CONNECTED
12-17 17:31:24.903: E/MapActivity(301): Couldn't get connection factory client
12-17 17:31:28.734: D/dalvikvm(301): GC_FOR_MALLOC freed 5901 objects / 533024 bytes in 47ms
12-17 17:31:31.524: D/dalvikvm(301): GC_FOR_MALLOC freed 1368 objects / 166224 bytes in 41ms
12-17 17:31:36.544: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162584 bytes in 41ms
12-17 17:31:39.044: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162552 bytes in 42ms
12-17 17:31:41.594: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162512 bytes in 42ms
12-17 17:31:54.893: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162568 bytes in 43ms
12-17 17:32:25.104: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162568 bytes in 41ms
12-17 17:33:35.694: D/dalvikvm(301): GC_FOR_MALLOC freed 1278 objects / 162504 bytes in 42ms
12-17 17:36:25.954: D/dalvikvm(301): GC_FOR_MALLOC freed 1280 objects / 162560 bytes in 40ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:36:58.743

...或使用不需要任何 API 密钥或其他东西的免费库：[https](https://sourceforge.net/projects/libwlocate/) ://sourceforge.net/projects/libwlocate/是轻量级的，支持 OSM、谷歌地图、谷歌卫星，完全支持缩放/移动和演示功能的示例实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:19:23.107

正如我在评论中提到的，这不是错误，也与您的问题无关。

您应该检查您是否遵循[新的 Android 地图](https://developers.google.com/maps/documentation/android/)指南，还要检查您的 api 密钥是否写得很好。

* * *

**编辑**：您还可以查看[此帖子](https://stackoverflow.com/questions/7982320/couldnt-get-connection-factory-client-fighting-with-google-maps)以获取更多信息。

# data-warehouse - 数据仓库：处理累积的数据

> ID：13913957
> 
> 赞同：3
> 
> 时间：2012-12-17T12:13:03.867
> 
> 标签：data-warehouse, etl, date-range, star-schema, snowflake-schema

我们的数据仓库使用来自数据源的累积数据（并且无法反转累积）来创建雪花模式。我们必须处理的一个要求是我们的架构必须能够用于创建基于日期范围的报告。

我们的模式看起来像这样（简化）：

```
+------------------------------------------+
| fact                                     |
+-------+-----------------+----------------+
|    id | statisticsDimId | dateRangeDimId |
+-------+-----------------+----------------+
|     1 |               1 |             10 |
|     2 |               2 |             11 |
|     3 |               3 |             12 |
|     4 |               4 |             13 |
|     5 |               5 |             14 |
|     6 |               5 |             15 |
|     7 |               5 |             16 |
|   ... |             ... |            ... |
| 10001 |            9908 |             11 |
| 10002 |            9909 |             11 |
+-------+-----------------+----------------+

+-------------------------------------------------+
| date_range_dimension                            |
+-------+-----------------------------------------+
|    id | startDateTime      | endDateTime        |
+-------+--------------------+--------------------+
|    10 | '2012-01-01 00:00' | '2012-01-01 23:59' |
|    11 | '2012-01-01 00:00' | '2012-01-02 23:59' |
|    12 | '2012-01-01 00:00' | '2012-01-03 23:59' |
|    13 | '2012-01-01 00:00' | '2012-01-04 23:59' |
|    14 | '2012-01-01 00:00' | '2012-01-05 23:59' |
|    15 | '2012-01-01 00:00' | '2012-01-06 23:59' |
|    16 | '2012-01-01 00:00' | '2012-01-07 23:59' |
|    17 | '2012-01-01 00:00' | '2012-01-08 23:59' |
|    18 | '2012-01-01 00:00' | '2012-01-09 23:59' |
|   ... |                ... |                ... |
+-------+--------------------+--------------------+

+-----------------------------------------------------+
| statistics_dimension                                |
+-------+-------------------+-------------------+-----+
|    id | accumulatedValue1 | accumulatedValue2 | ... |
+-------+-------------------+-------------------+-----+
|     1 |    [not relevant] |    [not relevant] | ... |
|     2 |    [not relevant] |    [not relevant] | ... |
|     3 |    [not relevant] |    [not relevant] | ... |
|     4 |    [not relevant] |    [not relevant] | ... |
|     5 |    [not relevant] |    [not relevant] | ... |
|     6 |    [not relevant] |    [not relevant] | ... |
|     7 |    [not relevant] |    [not relevant] | ... |
|   ... |    [not relevant] |    [not relevant] | ... |
|   ... |    [not relevant] |    [not relevant] | ... |
| 10001 |    [not relevant] |    [not relevant] | ... |
| 10002 |    [not relevant] |    [not relevant] | ... |
+-------+-------------------+-------------------+-----+ 
```

我们想用这样的东西创建我们的报告数据集：

```
SELECT *
    FROM fact
INNER JOIN statistics_dimension
    ON (fact.statisticsDimId = statistics_dimension.id)
INNER JOIN date_range_dimension
    ON (fact.dateDimId = date_range_dimension.id)
WHERE
    date_range_dimension.startDateTime = [start]
AND
    date_range_dimension.endDateTime = [end] 
```

问题是我们的统计维度中的数据已经积累了，不能反积累。我们计算了事实表中的近似行数，得到了 5,250,137,022,180。我们的数据大约有 250 万个日期范围排列，由于累积，我们需要将它们计算到我们的日期维度和事实表中。SQL 的 SUM 函数由于累加对我们不起作用（不能将两个属于不相异集合的值相加）。

是否有我们可以遵循的最佳实践来使其在计算上可行？我们的架构设计有问题吗？

我们需要报告有关在线培训的数据。数据源是一个遗留数据提供者，其部件已超过 10 年——因此没有人可以重建内部逻辑。统计维度包含 - 例如 - 用户在基于 Web 的培训 (WBT) 中完成的进度（以 % 为单位）、每个 WBT 页面的调用次数、WBT 的状态（对于用户，例如“完成”） ，同样。数据提供者的重要之处在于：它只是为我们提供了当前状态的快照。我们无权访问历史数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:56:31.597

我假设您为此使用了一些非常强大的硬件。您的设计有一个主要缺点 - 事实表和“统计”维度之间的连接。

通常，事实表包含维度和度量。在我看来，您的“统计”维度和事实表之间可能存在 1-1 关系。由于事实表本质上是一个“多对多”关系表，因此将您的统计信息放在单独的表上是没有意义的。另外，您说统计表具有“按用户”的信息。

每当您在仓储中说“按 X”时，您几乎总能确定 X 应该是一个维度。

我会看到有关直接在其上建立度量的事实表。我不确定您要如何“反转”统计表上的累积？您的意思是它是跨日期范围累积的吗？用户？如果数据不是原子的，你能做的最好的就是给出你所拥有的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:39:01.200

您可以通过以下方式减少计算此任务所需的维数：

*   添加具有每日粒度的时间维度，而不使用您当前的设计
*   将统计维度与事实表合并

在我们当前的数据仓库中，我们使用以下方法：

```
time_dimension
 time_key (bigint)
 time_date (date)
 (other time related columns)

fact_table
 (keys to other dimensions)
 time_key_start (bigint) /* reference to time_dimension, time_key */
 time_key_end (bigint)   /* reference to time_dimension, time_key */
 value_1
 value_2 
```

此外， time_dimension 中的键是“智能的”。我知道很多人不会同意这样的设计，但是当必须提高性能时，我们可以通过直接查询 time_key 来减少查询中使用的维度数，条件如下：

```
time_key_start = to_char('2012-01-01','J')::bigint
and
time_key_end = to_char('2012-01-02','J')::bigint 
```

通过这样的设计，您可以避免查询中的所有联接。然后您必须专注于表分区和索引以提高性能。

也许，也不需要分析整个数据历史，您可以将一些数据移动到存档。

# google-maps - 从 bing 地图替换 EntityCollection 类

> ID：13913975
> 
> 赞同：0
> 
> 时间：2012-12-17T12:13:55.163
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在从 bing 地图迁移到 Google 地图，同时迁移从 bing 地图中获得了一个类，即 Microsoft.Maps.EntityCollection，其中包含一组实体。实体可以是以下任何一种类型：信息框、多边形、折线、图钉等。

谷歌地图中是否有任何支持允许此类功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:58:43.853

Google 地图中没有这样的 EntityCollection。如果我们想使用不同的标记，我们可以使用覆盖

# jakarta-ee - 使用 ANT 将文件添加到 WEB-INF 文件夹

> ID：13913984
> 
> 赞同：0
> 
> 时间：2012-12-17T12:14:07.783
> 
> 标签：jakarta-ee, ant

我的 ant 中有以下任务，它正在复制 WEB-INF 文件夹之外的所有文件，如 jdbc.properties、applicationContext.xml。但我需要的是放置在 WEB-INF 文件夹下的文件。我如何实现这一目标？

```
<war destfile="my.war" webxml="web/WEB-INF/web.xml">
   <classes dir="build/web/WEB-INF/classes"/>
   <fileset dir="web/WEB-INF"/>
   <lib dir="web/WEB-INF/lib"/>
   <zipfileset dir="web/images" prefix="images"/>
</war> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:49:55.430

而不是`<fileset>`，使用`<sipfileset>`它就像`<fileset>`你可以声明一个*前缀*参数：

```
<war destfile="my.war" webxml="web/WEB-INF/web.xml">
    <classes dir="build/web/WEB-INF/classes"/>
    <zipfileset dir="web/WEB-INF"
        prefix=WEB-INF"/>
    <lib dir="web/WEB-INF/lib"/>
    <zipfileset dir="web/images" prefix="images"/>
</war> 
```

或者，由于这些文件已经在一个`WEB-INF`目录下，您可以指定一个目录，然后只指定该目录下`<fileset>`的目录：`web``WEB-INF`

```
<war destfile="my.war" webxml="web/WEB-INF/web.xml">
    <classes dir="build/web/WEB-INF/classes"/>
    <fileset dir="web">
        <include name="WEB-INF/**"/>
    </fileset>
    <lib dir="web/WEB-INF/lib"/>
    <zipfileset dir="web/images" prefix="images"/>
</war> 
```

# java - JTable动态加载大量数据

> ID：13913988
> 
> 赞同：6
> 
> 时间：2012-12-17T12:14:25.397
> 
> 标签：java, swing, jtable

这是我的问题：我目前有一个包含 5,000 到 200,000 多行的 JTable。你知道我要去哪里。数据已经加载到内存中，这不是问题，但是我如何创建一个高效的 JTable 以便它只加载可见的行并且任何事件只作用于视口中可见的那些行？显然，使用这么多数据几乎不可能滚动，因为系统需要很长时间才能重新绘制和触发事件。

基本上我认为一种解决方案是确定视口中有哪些行，然后创建一个包含这些行的新模型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:22:48.833

您可能会使用[`FixedRowsTable`](https://stackoverflow.com/a/6175860/418556)字体设计，这里显示了大约 200,000 行。虽然您想添加额外的按钮 `<<` `>>`

![](../Images/a9cd438944cdba35afde8f2d3bb2bff3.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

class FixedRowsTable {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                String[] columns = {"1","2","3","4","5","6","7"};
                Integer[][] data = new Integer[200000][columns.length];
                for (int xx=0; xx<data.length; xx++) {
                    for (int yy=0; yy<data[0].length; yy++) {
                        data[xx][yy] = new Integer((xx+1)*(yy+1));
                    }
                }
                final int rows = 11;

                JPanel gui = new JPanel(new BorderLayout(3,3));

                final JTable table = new JTable(
                    new DefaultTableModel(data, columns));

                final JScrollPane scrollPane = new JScrollPane(
                    table,
                    JScrollPane.VERTICAL_SCROLLBAR_NEVER,
                    JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
                Dimension d = table.getPreferredSize();
                scrollPane.setPreferredSize(
                    new Dimension(d.width,table.getRowHeight()*rows));

                JPanel navigation = new JPanel(
                    new FlowLayout(FlowLayout.CENTER));
                JButton next = new JButton(">");
                next.addActionListener( new ActionListener(){
                    public void actionPerformed(ActionEvent ae) {
                        int height = table.getRowHeight()*(rows-1);
                        JScrollBar bar = scrollPane.getVerticalScrollBar();
                        bar.setValue( bar.getValue()+height );
                    }
                } );
                JButton previous = new JButton("<");
                previous.addActionListener( new ActionListener(){
                    public void actionPerformed(ActionEvent ae) {
                        int height = table.getRowHeight()*(rows-1);
                        JScrollBar bar = scrollPane.getVerticalScrollBar();
                        bar.setValue( bar.getValue()-height );
                    }
                } );

                navigation.add(previous);
                navigation.add(next);

                gui.add(scrollPane, BorderLayout.CENTER);
                gui.add(navigation, BorderLayout.SOUTH);

                JOptionPane.showMessageDialog(null, gui);
            }
        });
    }
} 
```

# xcode4 - Xcode缓存问题

> ID：13913992
> 
> 赞同：1
> 
> 时间：2012-12-17T12:14:37.910
> 
> 标签：xcode4, uiviewcontroller, subclass

几天前，我为我的 iOS 项目创建了一个类。它是 UIViewController 的子类。我只想以编程方式使用它，没有 XIB 文件。

当我想将它呈现为模态视图控制器时，屏幕闪烁为黑色，我的视图没有呈现。

经过一番研究，我决定删除课程并重新开始，这次使用 XIB，因为我知道这会更容易。

当然，我也这样称呼这门课。但是嗖的一声，同样的错误又发生了。然后我删除了它，创建了一个新的并将其命名为 deferent。一切都很好。

因此，每次我给一个类起旧名称时，都会再次出现同样的老问题。

我尝试删除派生数据，打开 xcodeproj 以删除除 pbxproj 文件之外的所有内容，我使用 grep 搜索类名（没有命中）我从 iPad 上删除了应用程序（与模拟器相同），~/Library/Application Support/iPhone Simulator/ 目录我从每个文件中删除了对我的应用程序的所有引用并重新启动计算机。

没有任何效果。看来我的班级名称现在被列入黑名单，并导致一般的“不工作错误”......</p>

当然。我可以简单地重命名它。但是这种行为告诉我一定有问题。

感谢您的帮助——朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:28:19.123

哦，这真的很烦人，完全是 Xcode 的错。对我有用的解决方案是删除您可以在 ~/Library/Developer/Xcode/DerivedData 找到的 DerivedData 文件夹。希望这可以帮助。

# android - 如何从android上传到网络服务器简单的整数变量？

> ID：13913993
> 
> 赞同：0
> 
> 时间：2012-12-17T12:14:42.020
> 
> 标签：android, upload, webserver

如何从 android 向我的网络服务器上传一个简单的整数变量？我想发送温度变量。我的服务器支持 php。需要来自网络服务器的权限？我必须创建一个带有变量的 temperature.php 文件并上传它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:23:25.827

假设您的服务器接受 POST 请求，请查看以下 HTTP POST 请求示例：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);  
//you should put here your temp variable
nameValuePairs.add(new BasicNameValuePair("temperature", String.valueOf(30)));

HttpPost request = post("http://mysite.com/temperature.php", nameValuePairs);

DefaultHttpClient client = generateHttpClient();
HttpResponse httpResponse = client.execute(request); 
```

在哪里：

```
public static DefaultHttpClient generateHttpClient(){
        HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, TIMEOUT_CONNECTION);
        HttpConnectionParams.setSoTimeout(params, TIMEOUT_SOCKET);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

        try{

KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new EasySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(
               SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
        registry.register(new Scheme("https", sf, 443));
    }catch (Exception e) {
        e.printStackTrace();
    }

//      params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,             HttpVersion.HTTP_1_1);
    ClientConnectionManager cm = new ThreadSafeClientConnManager(params, registry);
    DefaultHttpClient client = new DefaultHttpClient(cm, params);
    client.setKeepAliveStrategy(new ConnectionKeepAliveStrategy() { 
        @Override 
        public long getKeepAliveDuration(HttpResponse response, HttpContext 
    context) { 
            return 60; // seconds 
        } 

    }); 

    return client;

} 
```

失踪的班级：

```
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;
import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

import org.apache.http.conn.ssl.SSLSocketFactory;
public class EasySSLSocketFactory extends SSLSocketFactory {
        SSLContext sslContext = SSLContext.getInstance("TLS");

        public EasySSLSocketFactory(KeyStore truststore)
                        throws NoSuchAlgorithmException, KeyManagementException,
                        KeyStoreException, UnrecoverableKeyException {
                super(truststore);

  TrustManager tm = new X509TrustManager() {
                    public void checkClientTrusted(X509Certificate[] chain,
                                    String authType) throws CertificateException {
                    }

                    public void checkServerTrusted(X509Certificate[] chain,
                                    String authType) throws CertificateException {
                    }

                    public X509Certificate[] getAcceptedIssuers() {
                            return null;
                    }
            };

            sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port,
                    boolean autoClose) throws IOException, UnknownHostException {
            return sslContext.getSocketFactory().createSocket(socket, host, port,
                            autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
            return sslContext.getSocketFactory().createSocket();
    } 
```

}

# css - CSS：连续显示三角形

> ID：13913998
> 
> 赞同：3
> 
> 时间：2012-12-17T12:15:18.550
> 
> 标签：css

我的带有*CSS的**HTML*标记可以在这个[链接](http://jsfiddle.net/kpatel/PrDyq/)中看到。在这里，您可以看到最后一个带框的三角形看起来很好。实际上，在这里我用盒子制作了 3 个三角形。在每一个里面都有一个盒子，并制作了一个三角形。*`box-1-wrap, box-2-wrap``box-3-wrap`*

 *现在，我希望显示第一个 div 的三角形。他们排成一行。所以在这里我希望第一行显示在第二个框的上方，第二个三角形应该显示在第三个框的上方。

这里有人可以帮我吗？

以下是输出文件的外观：

![在此处输入图像描述](../Images/cf1aa2497990195409692f8955e0b05f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:28:25.763

您所要做的就是将每个连续的框*放在*前一个框的下方。

将此添加到您的 CSS 中：

```
.box-1-wrap{
    position:relative;
    z-index:3;
}
.box-2-wrap{
    position:relative;
    z-index:2;
}
.box-3-wrap{
    position:relative;
    z-index:1;
} 
```

这是一个演示：http: [//jsfiddle.net/PrDyq/11/](http://jsfiddle.net/PrDyq/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:25:03.970

```
.box-1-wrap, .box-2-wrap, .box-3-wrap {
  display: inline-block;
}
.light-blue-box {
  padding: 20px 40px;
  height: 0;
  background: #2D98F0;
  display:inline-block;
}
.arrow-first {
width: 0;
height: 0;
border-left: 20px solid #2D98F0;
border-top: 20px solid #2B90E3;
border-bottom: 20px solid #2B90E3;
display: inline-block;
margin: 0 0 0 -5px;
}
.light-blue-box-2 {
  padding: 20px 40px;
  height: 0;
  background: #2B90E3;
  display:inline-block;
  margin:0 0 0 -4px;
  z-index:999;
}
.arrow-second {
  width: 0;
  height: 0;
  border-left: 20px solid #2B90E3;
border-top: 20px solid #2879BB;
border-bottom: 20px solid #2879BB;
  display: inline-block;
  margin: 0 0 0 -5px
}
.light-blue-box-3 {
  padding: 20px 40px;
  height: 0;
  background: #2879BB;
  display:inline-block;
  margin:0 0 0 -4px;
  z-index:999;
}
.arrow-third {
  width: 0;
  height: 0;
  border-left: 20px solid #2879BB;
  border-top: 20px solid transparent;
  border-bottom: 20px solid transparent;
  display: inline-block;
  margin: 0 0 0 -5px
} 
```

添加此代码并检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:16:36.403

一个更通用的解决方案，更少的 css 和更少的 html：http: [//jsfiddle.net/Z5pTR/1/](http://jsfiddle.net/Z5pTR/1/)

支持 IE <9 需要手动注释第一个和最后一个元素，而不是使用`first-child`; 最后添加一个占位符，而不是使用`:after`最后不使用 css3 的`hsla`.*