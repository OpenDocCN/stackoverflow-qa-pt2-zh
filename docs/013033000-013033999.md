# StackOverflow 问答 13033000-13033999

# javascript - 如何将指令的属性绑定到 Angular.js 中的下拉列表？

> ID：13033004
> 
> 赞同：0
> 
> 时间：2012-10-23T14:39:49.037
> 
> 标签：javascript, angularjs

我在绑定到 $scope.templates 的下拉列表中有一系列模板：

`[{"id":1, "name":"Test 1",{"id":2, "name":"Test 2"}]`.

我也有一个指令，

```
<editor data-template="1"></editor> 
```

根据下拉列表中选择的模板，它应该使用适当的模板重新呈现指令。这可能吗？迄今为止，我只看到了简单的字段到 div 的一对一数据绑定，并且没有触发整个指令的重新呈现。这种情况的最佳方法是什么？

**更新**：指令 $scope 更基本的是跨控制器双向绑定。例如，我似乎无法弄清楚如何使服务对象在控制器之间保持同步。我真正希望发生的是一个控制器中的更改可用于另一个控制器，反之亦然。[http://jsfiddle.net/9gSVn/1/](http://jsfiddle.net/9gSVn/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:44:53.253

一种方法是创建一个指令，在范围值更改时替换 html 内容。[这篇博](http://onehungrymind.com/angularjs-dynamic-templates/)文非常有助于描述使用动态模板创建指令的步骤。

这是一个带有监视模型更改指令[的示例小提琴：](http://jsfiddle.net/FmUU7/)

```
module.directive('template', function () {
    var getTemplate = function (id) {
        var template = '<div>no template for ' + id + '</div>';

        switch (id) {
            case 1:
                template = '<div>template 1 from directive</div>';
                break;
            case 2:
                template = '<div>template 2 also from directive</div>';
                break;
        }

        return template;
    }
    return {
        restrict: 'E',
        replace: true,
        scope: { id: '=templateId' },
        link: function (scope, element, attrs) {
            scope.$watch('id', function (newValue, oldValue) {
                element.html(getTemplate(newValue));
            });
        }
    };
}); 
```

# php - 我有一个时间签名的 XML 清单文件来播放 MP3 文件。我可以使用 PHP 将这些 MP3 组合成一个主 MP3 文件吗？

> ID：13033005
> 
> 赞同：0
> 
> 时间：2012-10-23T14:39:51.623
> 
> 标签：php, mp3

我想 XML 看起来像这样：

```
 <xml>
   <node time="500">1.mp3</node>
   <node time="700">2.mp3</node>
   <node time="800">3mp3</node>
   <node time="900">1.mp3</node>
   <node time="1000">2.mp3</node>
   <node time="1100">3.mp3</node>
 </xml> 
```

时间以毫秒为单位。我是 PHP 新手，我不确定是否存在允许我对这些 MP3 进行排序的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:43:51.093

由于 mp3 文件只是帧，您可以删除前后的 ID3 标签，然后使用普通的 php 脚本基本上将文件流拼接在一起。他们会点击，但它本质上会给你一个 0 延迟播放，尽管来自文件流。如果答案涉及使用php作为某种文件系统一个接一个地播放，那么不会。

# jquery - 循环遍历表行以计算总计（数量 * 每行成本）

> ID：13033011
> 
> 赞同：1
> 
> 时间：2012-10-23T14:39:54.780
> 
> 标签：jquery

所以我基本上有多行格式：

```
<tr class="items" id="items">
    <td><input type="text" name="description[]" id="description[]" style="width:450px;" /></td>
    <td><input type="text" name="quantity[]" id="quantity[]" style="width:40px;text-align:center;" onblur="CaclulateQuantityTotal();"/></td>
    <td><input type="text" name="cost[]" id="cost[]" style="width:40px;text-align:center;" onblur="CaclulateCostTotal();"/></td>
    <td><select name="currency[]" id="currency[]"><option value="USD">USD</option><option value="CAD">CAD</option></select></td>
    <td style="text-align:right;"><input type="text" name="total[]" id="total[]" style="width:40px;text-align:center;" readonly="readonly" /></td>
    <td><a href="#" id="add_item">+</a></td>
</tr> 
```

我基本上希望 total[] 是（对于该行）成本 * 数量。

我的问题是我知道如何使用 jquery 分别遍历所有数量 [] 和货币 []，但我无法弄清楚如何在每行的基础上匹配它们。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T14:43:42.473

```
$('tr.items').each(function(i,el) {
    var $this = $(this),
        $cost = $this.find('[name="cost\\[\\]"]'),
        $quant = $this.find('[name="quantity\\[\\]"]'),
        c = parseFloat($cost.val()),
        q = parseInt($quant.val(), 10), // always use a radix
        total = c * q || 0; // default value in case of "NaN"
    $this.find('[name="total\\[\\]"]').val(total.toFixed(2));
}); 
```

[http://jsfiddle.net/mblase75/AtcPc/](http://jsfiddle.net/mblase75/AtcPc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:44:49.007

您可以遍历 $(".items")，并比较 $(items[i]).children(".cost") 和 $(items[i]).children(".quantity") （当然，您必须将其作为一个类添加到这些输入中）

所以像 -

```
var items = $(".items").get();

for(var i = 0; i < items.length; i++)
{
   var cost = $(items[i]).children(".cost").val() * $(items[i]).children(".quantity").val();
} 
```

这可能不准确，但它应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:47:11.437

在 HTML 的函数调用中添加对象

HTML

```
 <tr class="items" id="items">
        <td><input type="text" name="description[]" id="description[]" /></td>
        <td><input type="text" name="quantity[]" id="quantity[]" onblur="CaclulateQuantityTotal(this);"/></td>
        <td><input type="text" name="cost[]" id="cost[]" onblur="CaclulateCostTotal(this);"/></td>
        <td><select name="currency[]" id="currency[]"><option value="USD">USD</option><option value="CAD">CAD</option></select></td>
        <td><input type="text" name="total[]" id="total[]" readonly="readonly" /></td>
         <td><a href="#" id="add_item">+</a></td>
</tr> 
```

Javascript

```
function CaclulateQuantityTotal(obj) {
  var $tr = $(obj).closest('tr.items');
  //you now have access to the tr the function is called from, do whatever you want!
  var $q = $tr.find('input[name=quantity]'); // gives you quantity, etc...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:58:09.627

添加一些类，这样您就可以更轻松地获得这些值，而且……您不应该有重复的 ID :)

```
 <tr class="items" id="items">
            <td><input type="text" name="description[]" id="description[]" style="width:450px;" /></td>
            <td><input type="text" name="quantity[]" id="quantity[]" style="width:40px;text-align:center;" onblur="CaclulateQuantityTotal();" class="quantity"/></td>
            <td><input type="text" name="cost[]" id="cost[]" style="width:40px;text-align:center;" onblur="CaclulateCostTotal();" class="cost"/></td>
            <td><select name="currency[]" id="currency[]"><option value="USD">USD</option><option value="CAD">CAD</option></select></td>
            <td style="text-align:right;"><input type="text" name="total[]" id="total[]" style="width:40px;text-align:center;" readonly="readonly" class="total"/></td>
            <td><a href="#" id="add_item">+</a></td>
        </tr> 
```

jQuery代码：

```
(function () {
    $.each($('tr.items'), function(){
        var quantity = $(this).children('td').children('.quantity').val();
        var cost = $(this).children('td').children('.cost').val();
        var total = quantity*cost;
        $(this).children('td').children('.total').val(total);
    });
}()); 
```

希望它有所帮助，这是工作演示：http: [//jsfiddle.net/MvFYd/](http://jsfiddle.net/MvFYd/)

# java - 在流上传递 javax.mail.Message

> ID：13033014
> 
> 赞同：1
> 
> 时间：2012-10-23T14:40:08.140
> 
> 标签：java, jakarta-mail

我正在使用 JavaMail API 来获取一些电子邮件。我想获得消息流，然后在另一端将流返回到电子邮件。此外，我不想丢失任何属性，如附件、目的地、发件人、正文等......

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:52:27.547

好的...我设法找到了如何实现的答案

我们可以使用

.writeTo(出);

写入OutputStream，向其发送InputStream，最后您可以使用它重建它

Message receivedMail = new MimeMessage( session, inputStream );

问题已解决！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:49:46.633

请检查下面的示例代码：

```
 URLName url = new URLName("pop3","xxxx",123,"","user","password");
  Session session = Session.getInstance(props, null);
  Store store = new POP3SSLStore(session,url);
  store.connect();

  Folder folder = store.getFolder("INBOX");
  folder.open(Folder.READ_WRITE);

  Message message[] = folder.getMessages(); 

  for (int i=0; i <message.length;i++) {
      Message message = messages[i];

      //Get Message Properties
      System.out.println("From : " + message.getFrom()[0]);
      System.out.println("Subject : " + message.getSubject());
      System.out.println("Sent Date : " + message.getSentDate());

      //Get Input stream for each message
      InputStream is = message.getInputStream();
      .....
      is.close();
  }
  folder.close(false);
  store.close(); 
```

向后构造消息：

```
 MimeMessage newMessage = new MimeMessage(session);
      MimeMultipart mimeMultipart = new MimeMultipart();
      MimeBodyPart attachment = new MimeBodyPart(is);
      attachment.setHeader("Content-Type", "contentType");
      mimeMultipart.addBodyPart(attachment);
      newMessage.setContent(mimeMultipart);
      newMessage.setFrom(InternetAddress.parse("fromAddress")[0]);
      newMessage.setReplyTo(InternetAddress.parse("toAddress"));
      newMessage.setSubject("subject"); 
```

# operating-system - 是否有 Erlang 函数来获取 Erlang 系统（erl.exe 或 werl.exe）OS PID？

> ID：13033015
> 
> 赞同：0
> 
> 时间：2012-10-23T14:40:07.367
> 
> 标签：operating-system, erlang, process

我想从我的 Erlang 代码中获取 Erlang 系统（werl.exe）的（windows 7）操作系统 PID。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:42:44.663

```
os:getpid(). 
```

这就是它的全部内容。干杯。

# c# - 忽略验证

> ID：13033024
> 
> 赞同：1
> 
> 时间：2012-10-23T14:40:52.293
> 
> 标签：c#, asp.net, asp.net-mvc, ado.net, entity-framework-4.1

我有一个带有其他两个模型的视图模型。两者都有必需的字段（使用实体框架完成）。

```
 public class featureModel
    {

        public FEATURE FEATURE { get; set; }

        public REQUIREMENTS REQUIREMENTS { get; set; }
    } 
```

在我的页面上，我有一个下拉列表，如下所示

```
ViewBag.FEATURE_ID = new SelectList(db.FEATURE, "FEATURE_ID", "Name_"); 
```

正在查看

```
@Html.DropDownList("FEATURE_ID", "ADD FEATURE") 
```

这将是找到的所有功能的下拉列表，顶部有一个添加功能选项（选择此选项时，我有一些 js 来显示用户应该输入的字段）。如果选择了此选项，则用户将需要输入某些字段，如果不是，则不应该（并且这些字段被隐藏）。当我的页面验证时，它需要填充，这在验证方面是有意义的。

如果下拉列表位于某个选项上，是否可以设置条件以忽略此验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:58:42.703

我猜你想忽略隐藏字段的 jquery 验证。你可以试试这个。

```
 var validator = $("#formId").data('validator');
  validator.settings.ignore = ":hidden"; 
```

在服务器端清除`ModelState`@Forty-2 所说的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:53:56.940

您`System.ComponentModel.DataAnnotations.IValidatableObject`在 ViewModel 上实现并在那里执行验证：

```
public class featureModel : IValidatableObject
{
    public FEATURE FEATURE { get; set; }
    public REQUIREMENTS REQUIREMENTS { get; set; }
    public bool FeaturesRequired { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (featuresRequired)
        {
            // do your feature check here
            if (FEATURE == null)
            {
                yield return new ValidationResult("You must enter a feature.");
            }
        }
    }
} 
```

在您的视图上有一个隐藏字段，它提供了一个值`FeaturesRequired`（您可以使用 javascript 来执行此操作，以便`onchange`您的下拉菜单），然后可以在模型验证中对其进行检查。

**IValidatable 与不显眼的 ajax（客户端验证）**

查看[此资源](http://www.ienablemuch.com/2011/07/ivalidatableobject-client-side.html)`IValidatableObject`以在客户端进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:00:00.090

如果您在说“当我的页面验证时”时指的是控制器中的 ModelState 错误，那么您可以使用

```
ModelState.Clear() 
```

清除所有错误或

```
ModelState.Remove(string key) 
```

清除特定错误。您可以检查下拉列表的值，然后决定要删除哪些模型错误（如果有）。

编辑

忽略 jQuery 验证

```
$("#formId").validate({  //Your form id 
   ignore: "#ignoreFieldId"  //you can use any selector you want here: class, etc
}) 
```

# .net - 以编程方式续订 Windows 8 开发人员许可证？

> ID：13033026
> 
> 赞同：10
> 
> 时间：2012-10-23T14:41:20.530
> 
> 标签：.net, windows-8, windows-runtime, windows-store-apps

我正在尝试针对 Windows Store 应用程序设置一些自动化测试。我看到的最大问题是，这将设置一个我们不想碰的服务器，它只是神奇地继续构建和运行测试。这是一个问题，因为 Windows 应用商店应用程序需要开发人员许可证才能构建或执行任何操作（如侧载）。开发者许可证必须每 30 天更新一次。

是否有更新开发人员许可证的程序化方式或某种方式来回避这个问题？我真的宁愿不必担心每 30 天登录一次构建服务器来更新许可证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:39:23.727

我建议设置与机器的远程连接。您还可以尝试构建一个允许运行 WPCoder 建议的 powershell 命令的虚拟宏应用程序。您可以尝试记录更新许可证所需采取的步骤，并尝试在每个月的某一天运行它（这可以通过 VS2010 / 2012 轻松完成）。

我希望这有帮助！祝你好运！

# c - 在c中以ecb模式使用mcrypt加密

> ID：13033029
> 
> 赞同：2
> 
> 时间：2012-10-23T14:41:37.103
> 
> 标签：c, encryption, arrays

我正在尝试用 c 中的 libmcrypt 加密一个长字符数组。在我调用 encrypt funktion 超过 5 次后，我遇到了问题。我看不到错误，但我得到了奇怪的输出。如果我有一个 64 个字符的明文，它会加密前 32 个字符，然后对于最后 32 个字符，我会得到两次相同的 16 个字符。我希望你明白我的意思。这是我的代码：

```
char *Encrypt( char *key, char *message, int buff_len){

    unsigned char *Res;
    MCRYPT mfd; 
    char *IV;
    int i, blocks, key_size=16, block_size;

    mfd = mcrypt_module_open(MCRYPT_RIJNDAEL_128, NULL, "ecb", NULL);
    block_size = mcrypt_enc_get_block_size(mfd);
    blocks = ceil((double)buff_len/block_size);

    mcrypt_generic_init(mfd, key, key_size, IV);
    Res = calloc(1, (blocks *block_size)+1);

    strncpy(Res, message, buff_len);
    //memset(message,'\0',blocks *block_size);
    mcrypt_generic(mfd,Res,(blocks *block_size));
    //printf("the encrypted in function(Encrypt) %s len %d\n",Res, strlen(Res));

    mcrypt_generic_deinit(mfd);
    mcrypt_module_close(mfd);

     return (Res); 
```

}

我主要打电话给：

```
 char seed[] = "thesecretmessage which I really want to check if if works", key1[]="abcdefghijklmnop";
int buff_len = strlen(seed), i;

char *encrypted = Encrypt(key1, seed, buff_len), *encrypted_pr=Encrypt(key1, encrypted, buff_len);
printf("the encrypted %s, %d\n", encrypted, strlen(encrypted));
printf("the encrypted_pr %s, %d\n", encrypted_pr, strlen(encrypted_pr));
for(i=0;i<15;i++){
    memcpy(encrypted2, Encrypt(key1, encrypted2, buff_len),64);
    printf("the encrypted_pr[%d] %s\n",i, encrypted_pr);
} 
```

我真的要疯了。如果我有一个只有 16 个字节的纯文本，它就可以完美地工作。谢谢您的帮助！

# box-api - Box API v2 - 检索带有字段的文件夹项目，是否允许标记？

> ID：13033034
> 
> 赞同：1
> 
> 时间：2012-10-23T14:41:51.140
> 
> 标签：box-api

我想升级到 Box API 的 v2，但是我目前无法像在以前的 api 中那样检索标签。您可以将标签作为字段添加到 v2 api 的 GET 调用中吗？

谢谢大家，

乍得。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:21:08.693

它们是 V2 API 的一部分。如果您查看[文件夹](https://developers.box.com/docs/#folders)的文档，您可以看到标签条目是绿色条目。这意味着您必须明确要求该字段才能让我们将其返回给您。[?fields 参数](https://developers.box.com/docs/#fields)r将让您只询问您想要的字段（而不是 Box 自动为您提供的默认设置作为其响应的一部分）

请注意，如果您尝试获取文件夹中所有项目的此信息，则询问有关文件夹的详细信息和询问有关文件夹中每个项目的详细信息是不同的。?fields 两者都适用（如果您也在执行 POST 或 PUT 操作，也适用）。

如果您想要有关*单个*文件夹的详细信息： `GET ./folders/<id>?fields=a,b,c`

如果您想要有关文件夹*内所有项目的详细信息*`GET ./folders/<id>/items?fields=a,b,c`

# java - 当参数是文字空值时，如何选择重载方法？

> ID：13033037
> 
> 赞同：98
> 
> 时间：2012-10-23T14:42:04.260
> 
> 标签：java, overloading

我在一次测验中遇到了这个问题，

```
public class MoneyCalc {

   public void method(Object o) {
      System.out.println("Object Verion");
   }

   public void method(String s) {
      System.out.println("String Version");
   }

   public static void main(String args[]) {
      MoneyCalc question = new MoneyCalc();
      question.method(null);
   }
} 
```

该程序的输出是“字符串版本”。但我无法理解为什么将 null 传递给重载方法会选择字符串版本。null 是一个指向空的字符串变量吗？

但是，当代码更改为，

```
public class MoneyCalc {

   public void method(StringBuffer sb) {
      System.out.println("StringBuffer Verion");
   }

   public void method(String s) {
      System.out.println("String Version");
   }

   public static void main(String args[]) {
      MoneyCalc question = new MoneyCalc();
      question.method(null);
   }
} 
```

它给出了一个编译错误，说“方法方法（StringBuffer）对于MoneyCalc类型不明确”

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-23T14:44:26.850

> null 是一个指向空的字符串变量吗？

空引用可以转换为任何类类型的表达式。所以在 的情况下`String`，这很好：

```
String x = null; 
```

之所以选择此处的`String`重载，是因为 Java 编译器[会根据 JLS 的第 15.12.2.5 节选择](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)*最具体*的重载。尤其：

> 非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误，那么一个方法比另一个方法更具体。

在您的第二种情况下，这两种方法仍然适用，但两者都`String`没有`StringBuffer`比另一种更具体，因此没有一种方法比另一种更具体，因此编译器错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T14:52:34.447

此外，[JLS 3.10.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.7)还声明“null”是“null 类型”的文字值。因此存在一种称为“null”的类型。

后来，[JLS 4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1)声明存在一个无法声明变量的 null 类型，但您只能通过 null 文字使用它。后来它说：

> 空引用始终可以进行扩展引用转换为任何引用类型。

为什么编译器选择将其扩展为 String 可能会在[Jon 的回答](https://stackoverflow.com/a/13033089/697630)中得到很好的解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T14:44:45.357

您可以将 a 分配`string`给一个`null`值，使其有效，并且 java 和大多数编程语言的顺序适合最接近的类型，然后适合对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T14:45:59.483

要回答标题中的问题：`null`既不是 a`String`也不是 an `Object`，但是可以将任何一个的引用分配给`null`。

我真的很惊讶这段代码甚至可以编译。我之前尝试过类似的东西，但我得到一个编译器错误，说调用不明确。

但是，在这种情况下，编译器似乎选择了食物链上最低的方法。它假设您想要该方法的最通用版本以帮助您。

我将不得不看看我是否可以挖掘在这个（看似）完全相同的场景中出现编译器错误的示例，不过......]

**编辑：** 我明白了。在我制作的版本中，我有两个接受 a`String`和 an 的重载方法`Integer`。在这种情况下，没有“最具体”的参数（如`Object`and `String`），因此它不能在它们之间进行选择，这与您的代码不同。

很酷的问题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-02T11:17:25.437

因为 String 类型比 Object 类型更具体。假设您添加了一个采用 Integer 类型的方法。

```
public void method(Integer i) {
      System.out.println("Integer Version");
   } 
```

然后你会得到一个编译器错误，说调用不明确。就像现在我们两个同样特定的方法具有相同的优先级。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-24T11:42:50.073

Java 编译器将大多数派生类类型分配给 null。

这是理解它的示例：

```
class A{

    public void methodA(){
        System.out.println("Hello methodA");
    }
}

class B extends A{
    public void methodB(){
        System.out.println("Hello methodB");
    }
}

class C{
    public void methodC(){
        System.out.println("Hello methodC");
    }
}

public class MyTest {

     public static void fun(B Obj){
         System.out.println("B Class.");
     }
     public static void fun(A Obj){
         System.out.println("A Class.");
     }

    public static void main(String[] args) {
        fun(null);
    }
} 
```

**输出：** B类。

另一方面：

```
public class MyTest {

     public static void fun(C Obj){
         System.out.println("B Class.");
     }
     public static void fun(A Obj){
         System.out.println("A Class.");
     }

    public static void main(String[] args) {
        fun(null);
    }
} 
```

**结果：**方法 fun(C) 对于 MyTest 类型不明确

希望这将有助于更好地理解这个案例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-12T12:50:56.210

**来源：** [https ://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.2.5)
**概念：**最具体的方法
说明：如果多个成员方法既可访问又可访问适用于方法调用，需要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。尝试将 null 转换为特定类型，您希望的方法将被自动调用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-23T14:46:55.740

我也不会说。NULL 是一个状态而不是一个值。查看此[链接](http://en.wikipedia.org/wiki/Null_%28SQL%29)以获取更多信息（该文章适用于 SQL，但我认为它也有助于解决您的问题）。

# javascript - 防止光标更改到禁用按钮上

> ID：13033038
> 
> 赞同：20
> 
> 时间：2012-10-23T14:42:04.280
> 
> 标签：javascript, jquery, button, hover

> **可能重复：**
> [jQuery 鼠标悬停在禁用的链接上，如何更改光标使其无法点击？](https://stackoverflow.com/questions/7748283/jquery-mouseover-a-disabled-link-how-do-i-change-the-cursor-so-it-doesnt-appea)

我有一个按钮，我试图在某些情况下禁用它的功能是不必要或不可能的。它是页面上的众多按钮之一，我只想禁用此特定按钮。

我正在寻找的效果是让它变灰，不可点击，并且当鼠标悬停在按钮上时鼠标指针不会变为手形指针。

我已经成功实现了前两个目标，但不确定如何实现第三个目标。当我搜索时，我看到了全局禁用此行为的建议，但没有看到特定按钮的建议。

这是我到目前为止所拥有的。

```
if(buttonIsDisabled)
{
    var btnid ="#button"+index;
    $(btnid).attr("disabled","disabled").fadeTo(500,0.2);
} 
```

这成功地使按钮无法点击并淡出，但在 Firefox 和 Chrome 中，它在悬停时仍然显示手形图标。IE8（我也必须支持）正确禁用手并显示光标。

有关如何在 Chrome 和 Firefox 中强制执行 IE 行为的任何建议？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-23T14:44:50.953

您可以将“光标”规则设置为“默认”值。在 jQuery 中，您可以使用[css](http://api.jquery.com/css/)方法。

```
$(btnid).css("cursor", "default"); 
```

由于您已经在使用 $(btnid)，因此您可以链接调用，如下所示：

```
$(btnid).attr("disabled","disabled").css("cursor", "default").fadeTo(500,0.2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T14:44:38.753

您还可以为`cursor: default`按钮设置样式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T14:44:54.697

你可以像这样设置css：

```
$(btnid)
  .attr("disabled","disabled")
  .css('cursor','default')
  .fadeTo(500,0.2); 
```

# android - LinearLayout：左侧是TextViews，右侧是大ImageView

> ID：13033043
> 
> 赞同：2
> 
> 时间：2012-10-23T14:42:22.283
> 
> 标签：android, layout

我正在研究 LinearLayout 但不幸的是它没有按应有的方式工作。目标是在左侧有一个带有两个 TextView（一个位于另一个下方）的 LinearLayout，在右侧有一个 ImageView。

ImageView 应该尽可能大，TextViews 应该占据剩余空间。

目前我的布局 XML 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_linearlayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="1dp"
android:background="@drawable/background" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_marginLeft="2dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/layout1label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:singleLine="true"
        android:text="1234"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/layout2label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1234_label2"
        android:textSize="14dp" />
</LinearLayout>

<ImageView
    android:id="@+id/layout_image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical"
    android:layout_margin="2dp"
    android:layout_weight="1"
    android:adjustViewBounds="true"
    android:src="@drawable/ic_launcher" /> 
```

不起作用的部分：如果 TextViews 中的文本“太长”，则 ImageView 会缩小。我想要它正好相反。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:00:38.953

使用`RelativeLayout`而不是`LinearLayout`. 然后您可以放置​​视图而无需嵌套布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >
  <TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/image"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    />
  <TextView
    android:id="@+id/subtitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/image"
    android:layout_below="@+id/title"
    />
  <ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    />
</RelativeLayout> 
```

通过将`TextView`s 安排为相对于 the`ImageView`而不是相反的方式，the`ImageView`优先于空间，而文本与其余部分一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:24:15.270

```
this might be help to you

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_linearlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="1dp"
    android:background="@drawable/background" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="2dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/layout1label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:singleLine="true"
            android:text="1234"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/layout2label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="1234_labj hairu iue rel2"
            android:textSize="14dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/layout_image"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_vertical"
            android:layout_margin="2dp"
            android:adjustViewBounds="true"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T05:44:11.893

对 Kirans Code 的一点修改..对我有用

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/layout1label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:singleLine="true"
        android:text="Name: BalaVishnu"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <ImageView
        android:id="@+id/layout_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:adjustViewBounds="true"
        android:src="@drawable/edit_icon" />
</LinearLayout> 
```

# java - Android XML 到自定义列表视图

> ID：13033046
> 
> 赞同：0
> 
> 时间：2012-10-23T14:42:32.327
> 
> 标签：java, android, android-layout

我有一个获取远程 xml 文件并在 android 中创建列表视图的程序，我可以从 xml 中提取数据，但我似乎无法将其放置在正确的位置。我有一个自定义布局，但它没有进入正确的领域。我怎样才能做到这一点？这是我的代码的一部分。它目前不工作。提前致谢

```
 // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);
            }

            // Adding menuItems to ListView
            ListAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.list_item,
                      new String[] { KEY_NAME, KEY_DESC, KEY_COST }, 
                      new int[] { R.id.status_data_user, R.id.status_data_msg, R.id.status_data_date }); 
```

以下是错误：

```
10-23 21:33:55.379: W/dalvikvm(613): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-23 21:33:55.402: E/AndroidRuntime(613): FATAL EXCEPTION: main
10-23 21:33:55.402: E/AndroidRuntime(613): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vlad.xml.parser.app/com.vlad.xml.parser.app.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.os.Looper.loop(Looper.java:123)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-23 21:33:55.402: E/AndroidRuntime(613):  at java.lang.reflect.Method.invokeNative(Native Method)
10-23 21:33:55.402: E/AndroidRuntime(613):  at java.lang.reflect.Method.invoke(Method.java:521)
10-23 21:33:55.402: E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-23 21:33:55.402: E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-23 21:33:55.402: E/AndroidRuntime(613):  at dalvik.system.NativeStart.main(Native Method)
10-23 21:33:55.402: E/AndroidRuntime(613): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ListActivity.onContentChanged(ListActivity.java:245)
10-23 21:33:55.402: E/AndroidRuntime(613):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.Activity.setContentView(Activity.java:1647)
10-23 21:33:55.402: E/AndroidRuntime(613):  at com.vlad.xml.parser.app.MainActivity.onCreate(MainActivity.java:37)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-23 21:33:55.402: E/AndroidRuntime(613):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-23 21:33:55.402: E/AndroidRuntime(613):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:45:49.907

我从这个网站找到了解决方案：http: [//eureka.ykyuen.info/2010/01/03/android-simple-listview-using-simpleadapter/](http://eureka.ykyuen.info/2010/01/03/android-simple-listview-using-simpleadapter/)

这就是我发现的：

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ListView lv= (ListView)findViewById(R.id.listview);

    // create the grid item mapping
    String[] from = new String[] {"rowid", "col_1", "col_2"};
    int[] to = new int[] { R.id.item1, R.id.item2, R.id.item3 };

    // prepare the list of all records
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
    for(int i = 0; i < 10; i++){
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("rowid", "" + i);
        map.put("col_1", "col_1_item_" + i);
        map.put("col_2", "col_2_item_" + i);
        fillMaps.add(map);
    }

    // fill in the grid_item layout
    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, R.layout.grid_item, from, to);
    lv.setAdapter(adapter);
} 
```

}

# python - 在 Google App Engine 之外托管一个小型数据库？

> ID：13033048
> 
> 赞同：1
> 
> 时间：2012-10-23T14:42:39.597
> 
> 标签：python, database, google-app-engine

我问[了另一个](https://stackoverflow.com/questions/12976652/efficient-way-to-do-large-in-query-in-google-app-engine)关于在 GAE 中进行大型查询的问题，答案几乎是不可能的。

我想要做的是：从 iOS 设备，我得到所有用户的联系人电话号码。所以现在我有一个包含 250 个电话号码的列表。我想将这些电话号码发送回服务器并检查这些电话号码中的哪些属于用户帐户。

所以我需要做一个查询：`query = User.query(User.phone.IN(phones_list))`

然而，对于 GAE，这是一个相当昂贵的查询。仅此一个查询将花费 250 次读取，我希望经常执行此类查询。

所以我想出了一个疯狂的想法。为什么我不将电话号码托管在另一个主机上，另一个数据库上，这种类型的查询更便宜。然后我可以让 GAE 向我的其他服务器发送 HTTP 请求以获取所需的信息。

所以我有两个问题：

1.  有没有更精简的数据库来处理这些类型的查询，并且这样做会更便宜？还是和GAE一样？
2.  这是矫枉过正吗？这是个好主意吗？我应该把它吸起来并支付费用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:50:08.620

GAE 的数据存储应该足以满足您的服务需求。由于您的应用程序看起来可以很好地并行化。

# 1.使用电话号码`key_name`。`User`

当您将 number 设置为 User 的 key_name 时，以下代码将提高查询速度并减少读取操作。

```
memcache.get_multi([phone_number1, phone_number2 ... ])
db.get([number1_not_found_in_memcache, number2_not_found_in_memcache])

memcache.set_multi("all_number_found_in_db") 
```

# 2.将多个号码存储在一个数据存储中。

GAE 的运营成本与实体的规模没有直接关系。因此，大型实体存储多数据将是另一种节省运营成本的方法。

例如，将多个具有相同 number_prefix 的电话号码存储在一起。

```
class Number(db.Model):
    number_prefix = db.StringProperty()
    numbers = db.StringListProperty(indexed = False)

# check number 01234567, 032123124
numbers = Number.get(["01", "03'])

# check 01234567 in number[0].numbers ?
# check 032123124 in number[1].numbers ? 
```

这种方法可以通过 memcache 进一步改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:37:17.137

稍微概括提供的其他想法...假设您的所有搜索键对于单个用户都是唯一的（例如电子邮件、电话、推特句柄等）

在用户写入时，您可以生成一组 SearchIndex(...) 并将其持久化。每个 SearchIndex 都有用户的键。然后在搜索时，您可以为任何 SearchIndex 构造键并执行两个 ndb.get_multi_async 调用。第一个获取匹配的 SearchIndex 实体，第二个获取与这些索引实体关联的用户。

# java - 如何清除 ButtonGroup 中的选择，以便没有选择关联的抽象按钮集的元素？

> ID：13033050
> 
> 赞同：1
> 
> 时间：2012-10-23T14:42:41.950
> 
> 标签：java, swing, jradiobutton, buttongroup

我创建了 5 个单选按钮组。我希望用户一键清除所有组。我使用java 1.5。

**有谁知道怎么做？**

```
public void actionCommandCLEAR() {
        timeGroup.setSelected(timeGroup.getSelection(),false);
        dateGroup.setSelected(dateGroup.getSelection(),false);
        docGroup.setSelected(docGroup.getSelection(),false);
        socGroup.setSelected(socGroup.getSelection(),false);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:53:27.190

```
timeGroup.clearSelection();
dateGroup.clearSelection();
docGroup.clearSelection();
socGroup.clearSelection(); 
```

对于 java 1.5，我们需要自己编写 clearSelection 代码：

```
void cleartSelection(ButtonGroup bg) {
 Enumeration<AbstractButton> e =bg.getElements(); 
    while(e.hasMoreElements()) {
        AbstractButton b = e.nextElement();
        b.setSelected(false);
    }
} 
```

和

```
clearSelection(timeGroup); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:13:49.700

我只是为每个组添加一个额外的隐藏单选按钮，并在我想清除所有按钮组时选择该单选按钮。

```
public void actionCommandCLEAR() {
        hiddenTime.setSelected(true);
        hiddenDate.setSelected(true);
        hiddenDoc.setSelected(true);
        hiddenSoc.setSelected(true);
        hiddenLand.setSelected(true);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:01:37.467

这就是@Darryl Burke创建[Select Button Group的原因](http://tips4java.wordpress.com/2008/11/09/select-button-group/)

# android - 将 UI 控件从活动传递到类

> ID：13033052
> 
> 赞同：4
> 
> 时间：2012-10-23T14:42:46.217
> 
> 标签：android, class, android-activity

我多次遇到这个问题，我以不同的方式解决了这个问题，我不确定我是否以正确的方式解决了这个问题。我在以下示例中简化了问题。我知道我只能将数据传递给类，但我确实想传递 editText 因为我遇到了更难的 UI 控件的问题。

主要活动.java

```
public class mainactivity extends Activity {

    public EditText clickEditText;
    int count =0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        newTxt();
    }

    public void newTxt() {
        txt = new MyText(context);
        txt.updateTextEdit("Main Activity");
    }
} 
```

我的文本.java

```
public class MyText
{
    private Context _context;

    // constructor
    public MyText(Context context) 
    {
        _context = context;
    }

    public void updateTextEdit(String str)
    {
        private EditText strEditText;
        strEditText= (EditText)findViewById(_context.R.id.editTextClick); // ????
        strEditText.setText(str + " and myTxt");
    }
} 
```

如果你能解释一下如何修复 updateTextEdit 函数。我通过了主要活动的上下文。如何更改编辑文本？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:50:34.970

如果你真的想这样做，你需要保存对 的引用`Activity`，而不是`Context`. 像这样：

```
public class MyText
{
    private Activity _activity;

    // constructor
    public MyText(Activity activity) 
    {
        _activity= activity;
    }

    public void updateTextEdit(String str)
    {
        private EditText strEditText;
        strEditText= (EditText)activity.findViewById(R.id.editTextClick);
        strEditText.setText(str + " and myTxt");
    }
} 
```

`newTxt()`你需要改变：

```
txt = new MyText(context); 
```

至：

```
txt = new MyText(this); 
```

但是把这个方法放在你的活动中不是更容易吗？你为什么要把它放在另一个班级？如果它确实需要在另一个类中，您可以将该类设置为您的活动的内部类，您仍然可以访问活动的方法和成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:51:37.307

这里有一个类似的问题 [How to access Activity UI from my class?](https://stackoverflow.com/questions/6030982/android-how-to-access-activity-ui-from-my-class)

你没有说你是如何获得上下文的，你应该在另一个类中使用`this`和获取。`mainactivity`不是上下文。

然后您可以调用`runOnUIThread`以执行 UI 更新。

# c# - 以编程方式将样式应用于控制

> ID：13033053
> 
> 赞同：2
> 
> 时间：2012-10-23T14:42:47.613
> 
> 标签：c#, .net, wpf, styles

我真的是 WPF 的新手，我很难理解一些与样式有关的东西。首先，该样式不会在任何地方抛出任何错误，尽管我仍然不确定它是否完全正确......所以这是我的样式的 XAML；

编辑：样式应该允许我的自定义用户控件使用 Storyboard 和 DoubleAnimation 淡入

```
<Application.Resources>
    <Style TargetType="{x:Type UserControl}" x:Key="UCStyle">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Visibility}" Value="Visible">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="UserControl.Opacity" From="0.0" To="1.0" Duration="0:0:3">

                            </DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Application.Resources> 
```

从这里开始，我使用复选框将用户控件添加到画布的子项中，如下所示；

```
private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        UserControlLibrary.UserControl1 userControl = new UserControlLibrary.UserControl1();
        userControl.Style = Resources["UCStyle"] as Style;
        canvas1.Children.Add(userControl);
    } 
```

我在 SO 上阅读了一圈，发现一些答案表明这是您以编程方式应用样式的方式，将密钥作为样式引用。但是，当我运行它时，用户控件似乎没有淡入（正如样式所暗示的那样）。

我在这里错过了什么重要的东西吗？或者只是有点傻？

编辑2：

我已经修改了我的复选框选中事件以在将其添加到画布后将可见性设置为隐藏，以及一个带有单击事件的新按钮将可见性设置为可见，但遗憾的是它并没有解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:54:01.633

您正在使用`DataTrigger`绑定到的 a `UserControl.DataContext.Visibility`，但是我相当确定您想要绑定到`UserControl.Visibility`，因此您需要使用不同的绑定类型。

默认情况下，所有绑定都引用`DataContext`，因此要引用 以外的其他`DataContext`内容，您需要为绑定指定不同的源，例如`RelativeSource`绑定到`Self`

```
<DataTrigger Binding="{Binding Visibility, RelativeSource={RelativeSource Self}}" Value="Visible"> 
```

作为替代方案，您可以使用常规`Trigger`而不是 a `DataTrigger`，它应该基于 UserControl 的属性触发，而不是尝试通过绑定查找属性。

```
<Trigger Property="Visibility" Value="Visible"> 
```

# tridion - 如何获取项目上次在 Tridion 中发布的日期/时间

> ID：13033056
> 
> 赞同：7
> 
> 时间：2012-10-23T14:42:56.857
> 
> 标签：tridion, tridion-2011

如何获取项目上次发布的日期/时间。

我试图为 PublishInfoData 创建对象以便使用 PublishedAt。

```
 PublishInfoData pobj = csClient.Read(pageTCMID, readoptions) as PublishInfoData; 
```

但这会产生错误，例如无法将 IdentifiableObjectData 转换为 PublishInfoData。

请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:45:54.307

这将为您提供所有发布信息：

```
csClient.GetListPublishInfo(pageTCMID); 
```

然后你必须选择最新的：

```
var publishInfo = csClient.GetListPublishInfo(pageTCMID);
var lastPublishedAt = publishInfo.OrderByDescending(pi => pi.PublishedAt).First().PublishedAt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T10:12:58.517

我为记录添加了这个 Powershell 代码以获取页面的最后发布日期

```
Set-TridionCoreServiceSettings sdswpap004 2013-SP1
$client = Get-TridionCoreServiceClient

Write-Output "Getting the title"
$pageTitle = Get-TridionItem -Id "tcm:30-7386-64" | Select-Object Title
Write-Output $pageTitle

$publishInfo = $client.GetListPublishInfo("tcm:30-7386-64")

if ($publishInfo) {
    Write-Output "Getting the last pablished date: "
    Write-Output $publishInfo.PublishedAt | Out-String
} 
```

# php - 将 saml 令牌添加到 wso2 php 请求

> ID：13033057
> 
> 赞同：1
> 
> 时间：2012-10-23T14:42:58.010
> 
> 标签：php, web-services, wso2, wso2esb, saml

我想使用 WSO2 php 将 SAML 令牌添加到服务请求中。在我们的系统中，我们有一个 STS 服务，负责根据用户名和密码对用户进行身份验证。然后该服务以 SAML 断言进行响应，以用于调用其他服务。我查看了 wso2 php 的示例，并且获取 saml 令牌应该没问题。但是很难看我应该如何将它添加到 WSSecurityToken 对象。是否可以以适当的方式完成，或者是否需要构造 xml 有效负载并将 SAML 断言注入标头。

对于我们的 java 客户端，我使用 apache axis/rampart

谢谢，哈康

# entity-framework - 实体框架：使用 ExecuteSqlCommand 清除表导致异常，因为 ObjectStateManager

> ID：13033059
> 
> 赞同：5
> 
> 时间：2012-10-23T14:43:04.360
> 
> 标签：entity-framework, ef-code-first

我使用的是 EF5 Code First，需要一种快速清除表格的方法。因此，我制作了一个非常简单的方法来使用 ExecuteSqlCommand 来提供快速的表格清除。代码如下：

```
 public void FastClearTable(Type tableType)
    {
        Context.Database.ExecuteSqlCommand(
            string.Format("delete from {0}", PluraliseTableName(tableType.Name)));
    } 
```

我用它在重新计算之前清除表格。下面我列出了我的方法的简化版本。请注意，表的键是一个字符串（即不是标识键），因此我将使用与 ExecuteSqlCommand 删除的条目相同的键放入新条目。

```
public int ComputeNewTableContent( IRepository<MyClass> rep, IUnitOfWork uow)
{
     if ( rep.GetUntracked().Count() > 0)
           uow.FastClearTable( typeof(MyClass));

     --- compute new entries and call rep.Insert( newEntry) for each one ---
     uow.Commit();    //This calls DbContext.SaveChanges()
} 
```

这第一次运行良好，但如果我再次运行它，我会在 SaveChanges() 命令上出现异常，该命令由 uow.Commit() 调用。例外是：

Message="调用的目标已抛出异常。"

InnerException Message="已成功提交对数据库的更改，但更新对象上下文时出错。ObjectContext 可能处于不一致状态。内部异常消息：**AcceptChanges 无法继续，因为对象的键值与对象中的另一个对象冲突ObjectStateManager。在调用 AcceptChanges 之前确保键值是唯一的**。”

如果找到这个存档的 MSDN[帖子](http://social.msdn.microsoft.com/Forums/en/adonetefx/thread/8374c10b-5e45-4c17-a9e2-5ced6ad06c7d)，并且在底部该人有同样的问题，但没有答案。我的观点是数据的内存版本仍然存在并且不知道ExecuteSqlCommand。但是，我对 EF 的了解还不够，还不知道如何解决它。

我当然可以通过使用“正常”删除来解决它，但我希望有人解释发生了什么以及我如何处理它。这将提高我对实体框架的了解。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T11:23:47.630

在我遇到 Julia Lerman 的优秀书籍['Programming Entity Framework: DbContext'](http://www.amazon.co.uk/Programming-Entity-Framework-Julia-Lerman/dp/1449312969/)之前，我还没有找到关于在实体框架中安全使用 ExecuteSqlCommand 的问题的好的答案。

她介绍了 ExecuteSqlCommand 的使用（第 226 页），但最重要的是，她提到在 ExecuteSqlCommand 之后使用**[Reload](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbentityentry.reload%28v=vs.103%29.aspx)**命令来更新本地（第 138 页）。这会从数据库中更新内存中的实体。您可以按如下方式使用它：

```
 yourDbContext.Entry(TheTrackedEntityYouWantToUpdate).Reload(); 
```

这正是我所需要的。谢谢朱莉娅。

我认为 Julia Lerman 的 DbContext 书对于任何计划使用 Code First 的实际应用程序的人来说都是必须的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:06:37.273

您是否使用身份作为密钥？是不是 ObjectContext 正在跟踪您从数据库中删除的旧实体并正在添加新实体。新实体（如果您的密钥没有标识列）被赋予与旧实体相同的密钥。由于上下文已经在跟踪旧实体，因此它会获得一个带有被跟踪实体键的新实体。EF 假定所有更改都是通过对象上下文完成的，而不是来自数据库。如果您删除这样的实体，您可能应该丢弃上下文

# python - 当地语言的时区名称

> ID：13033060
> 
> 赞同：7
> 
> 时间：2012-10-23T14:43:05.233
> 
> 标签：python, localization, internationalization, timezone, pytz

有没有一种方法可以用另一种语言检索时区名称？

在 Python 中，如果我这样做：

```
for tz in pytz.common_timezones_set :
 print tz 
```

结果是英文的，但如果我想要西班牙文或阿拉伯文怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-02T08:44:11.273

你可以使用[babel 包](http://babel.pocoo.org/en/latest/)

```
import pytz
from babel.dates import get_timezone_location

for tz in pytz.common_timezones_set:
    print(get_timezone_location(tz, locale='es')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:01:50.240

不，很遗憾，时区名称没有翻译。这些名称是[Olson 时区数据库](http://www.iana.org/time-zones)的一部分（不是 Python 或 的一部分`pytz`）。不时添加新的，因此任何潜在的翻译项目都必须与该数据库保持同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T20:02:06.830

`pytz.common_timezones_set`返回 tz 数据库中的一组时区**ID**。它们被设计成人类可读的，但它们不可翻译。

[PyICU](https://pypi.python.org/pypi/PyICU)提供对本地化时区名称的访问：

```
>>> from datetime import datetime
>>> import icu
>>> df = icu.DateFormat.createDateTimeInstance(icu.DateFormat.SHORT, icu.DateFormat.FULL, icu.Locale.getFrance())
>>> df.format(datetime.now(icu.ICUtzinfo.getDefault()))
'27/01/2015 21:01:01 heure normale d’Europe centrale' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T20:50:12.447

来得很晚，但我最近遇到了类似的问题，最终`l18n`为此目的创建了自己的包。它在这里可用：[https ://pypi.python.org/pypi/l18n](https://pypi.python.org/pypi/l18n)

它为 pytz 中使用的人类可读地点和时区提供翻译文件。大多数翻译都是从 CLDR 数据库中自动获取的，但总是有一些翻译丢失。目前只有英文和法文的翻译文件可用。如果您想为您的语言添加翻译，请随时与我联系（在包的 repo [https://bitbucket.org/tkhyn/l18n上创建问题）或按照](https://bitbucket.org/tkhyn/l18n)[此处](https://bitbucket.org/tkhyn/l18n/src/default/CONTRIBUTE.rst)的分步程序进行操作。

# c++ - 如果我使用 if 语句，则存在身份验证问题

> ID：13033062
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:43:07.317
> 
> 标签：c++, text-files, c-strings

当我尝试编译时出现错误，我不确定它有什么问题。这是一个使用文本文件验证用户名和密码的程序，用“;”分隔 单个文本文件中的分隔符。错误很长。

```
/tmp/ccgs7RYV.o：在函数'Employee::Employee()'中：
main2.cpp:(.text+0xa5): 未定义引用 'Employee::authenticate(std::basic_string, std::allocator>, std::basic_string, std::allocator>)'
/tmp/ccgs7RYV.o：在函数`Employee::Employee()'中：
main2.cpp:(.text+0x231): 未定义引用 'Employee::authenticate(std::basic_string, std::allocator>, std::basic_string, std::allocator>)'
collect2: ld 返回 1 个退出状态

```

```
#include<iostream>
#include<string>
#include <fstream>

using namespace std;

class Employee
{
public:
Employee();
bool authenticate(string, string);
};

Employee::Employee()
{
    string username, password;
    cout << "Username: ";
    cin >> username;

    cout << "Password: ";
    cin >> password;

    if (authenticate(username, password) == true)
        cout << "Sucess" << endl;
    else
        cout << "fail" << endl; 
}

bool authenticate(string username, string password) 
{
    std::ifstream file("login.txt");
    std::string fusername, fpassword;

    while (!file.fail()) 
    {
        std::getline(file, fusername, ';'); // use ; as delimiter
        std::getline(file, fpassword); // use line end as delimiter
        // remember - delimiter readed from input but not added to output

        if (fusername == username && fpassword == password)
            return true;
    }

    return false;
}

int main()
{
    Employee();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:46:05.553

```
bool Employee::authenticate(string username, string password) {
std::ifstream file("login.txt");
std::string fusername, fpassword;

while (!file.fail()) {
    std::getline(file, fusername, ';'); // use ; as delimiter
    std::getline(file, fpassword); // use line end as delimiter
    // remember - delimiter readed from input but not added to output
    if (fusername == username && fpassword == password)
        return true;
} 
```

您需要使用范围解析运算符。你只是错过了那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:11:21.243

好的，我将尝试整理一下类设计。

```
class Employee
{
public:
      Employee( std::string name, std::string password ) :
          m_name( name ), m_password( password )
      {
      }

      bool authenticate( const char * filename ) const;

private:
      std::string m_name;
      std::string m_password;
};

Employee readEmployeeFromConsole()  
{
      std::string name, password;
     std::cout << "Name: ";
     std::cin >> name;
     std::cout << "Password: "
     std::cin >> password;
     return Employee( name, password );
}

bool Employee::authenticate( const char * filename ) const
{
      // your implementation
}

int main()
{
    Employee emp = readEmployeeFromConsole();
    if( emp.authenticate( "input.txt" ) )
    {
         std::cout << "You're in!\n";
    }
    else
    {
         std::cout << "Get out!\n";
    }
} 
```

# objective-c - 在文本文件objective-c中查找数字

> ID：13033063
> 
> 赞同：-2
> 
> 时间：2012-10-23T14:43:06.883
> 
> 标签：objective-c, ios, cocoa-touch, file, parsing

> **可能重复：**
> [如何在 Objective-C 中生成 pi 的所有数字](https://stackoverflow.com/questions/13018816/how-to-generate-all-of-the-numbers-of-pi-in-objective-c)

我想实现“我在 pi 中”来搜索 pi 数字中的出生日期，我在 .txt 文件中有 100 万个系列的 pi 数字，请你给我一些实现这个游戏的提示吗？

什么是最好的方法？如何在文本文件中找到我的出生日期？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:52:15.240

```
NSString* str = [NSString stringWithContentsOfFile: @"path to your file" encoding: NSASCIIStringEncoding error: nil];
NSRange rng = [str rangeOfString: @"1989"]; //here is the range of the birth year 1989 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:30:42.207

有一次我写了一个 NSString 类，它有方法：

```
- (NSArray *)occurrencesOfSubstring:(NSString *)string
{
    NSMutableArray *result = [NSMutableArray array];
    NSRange range = NSMakeRange(0, self.length);
    NSUInteger len = self.length;

    while (range.location != NSNotFound) {
        range = [self rangeOfString:string options:0 range:range];
        if (range.location != NSNotFound) {
            NSRange resRange = range;
            [result addObject:[NSValue valueWithRange:resRange]];
            range = NSMakeRange(NSMaxRange(resRange), len - NSMaxRange(resRange));
        }
    }
    return result;
} 
```

它返回搜索的子字符串范围的数组。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:03:19.793

1 兆字节足够小，加载然后扫描它相当简单。如果你想稍微聪明一点，你可以将文件映射到内存中，然后通过映射扫描它（避免需要将整个文件加载到内存中，这对于数百 MB 的文件变得更加重要）。

```
NSDataReadingOptions options = NSDataReadingMappedIfSafe | NSDataReadingUncached;
NSData *data = [NSData dataWithContentsOfFile:filename
                                      options:options
                                        error:nil];
NSString *string = [[NSString alloc] initWithData:data
                                         encoding:NSASCIIStringEncoding];
NSRange range = [string rangeOfString:year];
[string release]; 
```

您可以添加适当的错误处理。

# actionscript-3 - Fla Timeline 中 as3 中的“this”

> ID：13033066
> 
> 赞同：1
> 
> 时间：2012-10-23T14:43:12.013
> 
> 标签：actionscript-3, actionscript

我在时间线中编写了以下代码。

```
 function chk():void
{

}

this["temp"]=chk;

                          /*   output   */
trace(this.chk);      //function Function() {}

trace(chk);          //function Function() {}

trace(this.temp)   //function Function() {}

trace(temp)        // Access of undefined property temp. 
```

我已经给出了我得到的输出。我的疑问是为什么 this.temp 与 temp 不同，其中 this.chk 与 chk 相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:31:22.040

该变量`temp`在编译时不可用。所以编译器会推送一个错误。但是在运行时，您的程序会执行此代码`this["temp"]=chk;`并且变量`temp`变为可用。

# r - 从命令行运行 R 文件时出错

> ID：13033068
> 
> 赞同：2
> 
> 时间：2012-10-23T14:43:28.783
> 
> 标签：r, command-line

我有一个 R 文件，它导入一个文件，进行一些数据操作，并执行一个逻辑回归模型，然后将这些结果保存到一个 txt 文件中。但是，当我从命令行运行文件时，我收到以下错误消息并且不知道发生了什么。

```
anonymous@anonymous-Latitude-E6520:~/Downloads$ R --no-save < Auto_Model.r > out.txt
Warning message:
NAs introduced by coercion 
Error in if (x == "\\N") NA else if (x > 1 & x < 6999) "1:6999" else if (x >  : 
  missing value where TRUE/FALSE needed
Calls: bin.value -> do.call -> mapply -> .Call -> <Anonymous>
Execution halted
anonymous@anonymous-Latitude-E6520:~/Downloads$ R --no-save < Auto_Model.r 
```

导致错误的R脚本如下=

```
> ## IMPORT DATA:
> #setwd("~/Desktop")
> library(foreign)
> dat = read.csv("dat.csv", stringsAsFactors=FALSE)
> 
> ## zipcode = 
> dat$zipcode = as.character(dat$zipcode)
> 
> bin.value = Vectorize(function(x) {
+   if (x == "\\N") NA
+   else if (x > 1 & x < 6999) "1:6999"
+   else if (x > 7000 & x < 9999) "7000:9999"
+   else if (x > 10000 & x < 14849) "10000:14849"
+   else if (x > 14850 & x < 19699) "14850:19699"
+   else if (x > 19700 & x < 29999) "19700:29999"
+   else if (x > 30000 & x < 31999) "30000:31999"
+   else if (x > 32000 & x < 34999) "32000:34999"
+   else if (x > 35000 & x < 42999) "35000:42999"
+   else if (x > 43000 & x < 49999) "43000:49999"
+   else if (x > 50000 & x < 59999) "50000:59999"
+   else if (x > 60000 & x < 69999) "60000:69999"
+   else if (x > 70000 & x < 79999) "70000:79999"
+   else if (x > 80000 & x < 89999) "80000:89999"
+   else if (x > 90000 & x < 96999) "90000:96999"
+   else if (x > 97000 & x < 99820) "97000:99820"
+   else NA 
+ })
> 
> dat$zipcode2 = as.character(bin.value(as.integer(dat$zipcode)))
Error in if (x == "\\N") NA else if (x > 1 & x < 6999) "1:6999" else if (x >  : 
  missing value where TRUE/FALSE needed
Calls: bin.value -> do.call -> mapply -> .Call -> <Anonymous>
Execution halted 
```

我认为我尝试操纵 zipcode 变量模式的方式有些错误，但我尝试过的任何方法似乎都无法解决问题。

```
> str(dat$zipcode)
 int [1:12635] 76148 33825 61832 11368 98290 92078 44104 62052 55106 20861 ...
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:06:48.750

在我看来，您正在尝试做的事情已经由 function 完成`cut`：

```
bin.value <- function(x){
    cut(as.integer(x),
        breaks= c(1,6999,9999,14849,19699,29999,31999,34999,42999,49999,59999,69999,79999,89999,96999,99820),
        labels= c("1:6999", "7000:9999", "10000:14849", "14850:19699", "19700:29999", "30000:31999", "32000:34999", "35000:42999", "43000:49999", "50000:59999", "60000:69999", "70000:79999", "80000:89999", "90000:96999", "97000:99820"))
    } 
```

否则，您的具体问题是由以下原因引起的`as.integer`：

```
a <- c("\\N",sample(seq(0,100000,by=1),10))
a
[1] "\\N"   "38987" "50403" "75683" "66706" "27924" "17216" "77539" "80658" "2335"  "53010"
as.integer(a)
[1]    NA 38987 50403 75683 66706 27924 17216 77539 80658  2335 53010 
```

`\\N`因此`NA`，您的循环仅在最后处理，同时所有`if`语句都尝试将缺失值与某些元素进行比较。

```
as.integer(a)[1]=="\\N"
[1] NA # Instead of TRUE or FALSE 
```

# performance - FACELETS_REFRESH_PERIOD 的默认值是什么？

> ID：13033070
> 
> 赞同：14
> 
> 时间：2012-10-23T14:43:32.467
> 
> 标签：performance, jsf, configuration, myfaces, mojarra

在 JSF 应用程序中，参数 javax.faces.FACELETS_REFRESH_PERIOD 可用于启用/禁用 XHTML 文件的自动重新加载。

我目前正在研究生产部署的正确配置，偶然发现即使在生产中我们当前也以 FACELETS_REFRESH_PERIOD=1 运行，这显然不是一个好主意。

这就引出了一个问题：这个参数的默认值是多少？

理想情况下，为了简单起见，我想从我们的生产配置中省略 FACELETS_REFRESH_PERIOD，并希望它使用“安全”的默认值 -1。但是，情况似乎并非如此，因为没有该参数，刷新似乎已启用（同时使用 Mojarra 和 MyFaces）。

我检查了 JSF 规范，虽然它描述了参数，但它没有给出默认值。这是规范中的故意遗漏吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T15:47:29.413

默认值取决于实现。

鉴于您使用的是 Mojarra，您可以在[`com.sun.faces.config.WebConfiguration`](http://grepcode.com/file/repository.jboss.org/maven2/javax.faces/jsf-impl/2.0.0-RC/com/sun/faces/config/WebConfiguration.java)类中找到默认值：

```
768         FaceletsDefaultRefreshPeriod(
769               "javax.faces.FACELETS_REFRESH_PERIOD",
770               "2"
771         ) 
```

*（行号来自 Mojarra 2.0.0）*

因此，默认值为`2`。我在任何 Mojarra 文档中都找不到这个。向 Mojarra人员发布[问题报告](http://java.net/jira/browse/JAVASERVERFACES)以更好地记录它可能是值得的。

MyFaces 根据[其文档](http://myfaces.apache.org/core20/myfaces-impl/webconfig.html)还有一个默认值`2`.

* * *

**更新：**从 Mojarra 2.2.11 开始，默认值设置为`-1`if project stage is `Production`. 另见[问题 3788](https://java.net/jira/browse/JAVASERVERFACES-3788)。

# java - 保存由 Selenuim Web Driver 生成的 firefox 配置文件

> ID：13033071
> 
> 赞同：4
> 
> 时间：2012-10-23T14:43:35.367
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我将 Selenium WebDriver 与 Firefox 一起使用。每次 selenium 在 temp 文件夹中为 firefox 生成新的 anoniumus 配置文件时，退出后将其删除。我需要这个配置文件。我怎么才能得到它？铁轮廓存储在

```
C:\Documents and Settings\Developer\Local Settings\Temp\anonymous5583304190515426768webdriver-profile 
```

关闭 WebDriver 后

```
driver.quit(); 
```

profile 将被删除，但它已经被记录，我想在下一次迭代中使用它，方法是用它初始化 WebDriver：

```
FirefoxDriver driver = new FirefoxDriver(new FirefoxProfile(profileFolder)); 
```

是否可以保存配置文件而无需像在驱动程序工作时处理整个文件夹这样的肮脏黑客行为（我不确定它是否有效，因为在 Windows 中，文件夹在 firefox 启动时被锁定）？也许在 Selenium 中存在一些 API 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:47:49.750

你为什么不改变方法？

*   [创建一个干净的 Firefox 配置文件](http://kb.mozillazine.org/Creating_a_new_Firefox_profile_on_Windows)，并以某种方式命名它，你知道它是什么。例如`SELENIUM`
*   初始化 Webdriver 时：

    ```
     ProfilesIni allProfiles = new ProfilesIni();
     FirefoxProfile desiredProfile = allProfiles.getProfile("SELENIUM");
     WebDriver driver = new FirefoxDriver(desiredProfile); 
    ```

这样，您就可以确保在您进行测试的任何时候都会使用此配置文件...

# javascript - javascript复选框创建元素

> ID：13033074
> 
> 赞同：5
> 
> 时间：2012-10-23T14:43:45.420
> 
> 标签：javascript, checkbox, createelement

我正在尝试将复选框列表添加到表单中。当我使用以下代码时，我得到了数组中的所有项目但没有复选框，所以我不能选择任何东西。我确信有一个非常简单的解决方案，但我看不出我做错了什么（我是新手）。非常感谢您的帮助。这是代码：

```
var check_value = new Array()
check_value[0] = "I work at home"
check_value[1] = "Train/Subway"
check_value[2] = "Walk"
check_value[3] = "Bicycle"

for(count in check_value)
    {
    var ptworkinfo=document.createElement("input");
    ptworkinfo.type="checkbox";
    ptworkinfo=(check_value[count] + "</br>");
    ptworkinfo.id="ptworkinfo";
    document.write(ptworkinfo);
    count+=count;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T14:49:32.073

这里有几个问题：

1)*永远不要使用 document.write* - 您需要使用的标准纯 javascript 实现是*appendChild*到父元素。例如：

```
var parentElement = document.getElementById('myParentElement');

if(parentElement != null)
   parentElement.appendChild(myChildElement); 
```

2) 使用这些知识，您可以通过简单的修改语句轻松添加元素：

```
var parentElement = document.getElementById('myParentElement');

for(var count in check_value)
{
    var newCheckBox = document.createElement('input');
    newCheckBox.type = 'checkbox';
    newCheckBox.id = 'ptworkinfo' + count; // need unique Ids!
    newCheckBox.value = check_value[count] + '<br/>';

    parentElement.appendChild(newCheckBox);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:48:51.607

看起来你只是忘了放`.value`一条线。相反，它会用字符串覆盖您作为输入框创建的变量。

```
...
    ptworkinfo.value =(check_value[count] + "</br>");
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-16T09:59:04.343

首先创建一个输入类型的元素。然后将它的类型属性设置为复选框。这可以通过下面提到的两种方式中的任何一种来完成。

```
const checkBox = document.createElement('input')
checkBox.type = 'checkbox' 
```

也可以使用 setAttribute 函数设置属性。第一个参数说明正在更新的属性。这里 type 属性更新为复选框的类型。

```
checkBox.setAttribute('type','checkbox') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:45:45.513

这是根据上面的建议更新的新代码（谢谢）。我现在得到一排复选框，旁边没有文字。此外，奇怪的是，每个复选框之后也没有中断。就像“ ptworkinfo.value=(check_value[count] + '< br/>'); ”行一样，只是没有通过。有什么想法/建议吗？

```
var residence = document.getElementById('residence');

var check_value = new Array( )
check_value[0] = "I work at home"
check_value[1] = "Train/Subway"
check_value[2] = "Walk"
check_value[3] = "Bicycle"

for(var count in check_value)
    {
    var ptworkinfo=document.createElement("input");   
    ptworkinfo.value=(check_value[count] + '</br>');
    ptworkinfo.type="checkbox";
    ptworkinfo.id="ptworkinfo" + count;
    residence.appendChild(ptworkinfo);
    } 
```

# extjs - EXT JS 4.1 如何在 tabPanel 中显示网格

> ID：13033076
> 
> 赞同：0
> 
> 时间：2012-10-23T14:43:46.303
> 
> 标签：extjs, grid, tabpanel

我试图在 tabPanel（对象 Ext.tab.Panel）中显示一个网格（EXTJS 4.1 的对象 Ext.grid.GridPanel），但我遇到了问题：网格作为独立的源代码工作得很好，面板也可以作为一个独立的源代码。但是当我尝试让网格和面板一起工作时，它不起作用。

网格 ：

```
 var monGridPanelDetailEcriture = new Ext.grid.GridPanel({
    id: 'monGridPanelDetailEcriture',
    frame: true,
    width: 1100,
    autoHeight: true,
    renderTo: 'gridDetailEcriture',
    store: monStoreDetailEcriture,
    columns: mesColonnesDetailEcriture
}); 
```

选项卡面板：

```
var tabs = Ext.create('Ext.tab.Panel', {
    renderTo: document.body,
    width: 450,
    activeTab: 0,     // first tab initially active
    defaults :{
        bodyPadding: 10
    },
    items: [{
        title: 'Short Text',
        closable: true
    },{
        title: 'Long Text'
    }]
}); 
```

我在互联网上搜索解决方案，但每次我发现都不起作用：我尝试了这个解决方案，在几个论坛上都有解释：

```
var tabs = Ext.create('Ext.tab.Panel', {
    renderTo: document.body,
    width: 450,
    activeTab: 0,     // first tab initially active
    defaults :{
        bodyPadding: 10
    },
    items: [{
        monGridPanelDetailEcriture 
    },{
        title: 'Long Text'
    }]
}); 
```

但是我有一个 Javascript 错误，表明这不是描述项目的方法。

我还尝试在 Grid 上创建一种新类型的小部件（使用属性“别名”），但它没有用。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:03:36.957

您的第二次尝试即将完成，但`monGridPanelDetailEcriture`已经是一个对象，您不需要将其包装在 {} 中。

因此，以下应该起作用：

```
var tabs = Ext.create('Ext.tab.Panel', {
    renderTo: document.body,
    width: 450,
    activeTab: 0,     // first tab initially active
    defaults :{
        bodyPadding: 10
    },
    items: [
        monGridPanelDetailEcriture
    ]
}); 
```

编辑：您可能也不希望在您的网格上使用 renderTo，因为它将在您的选项卡面板中呈现。编辑-编辑：另外，我认为在你的 renderTo 中使用 Ext.getBody() 可能是更好的做法，而不是 document.body。似乎更多Ext'y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T06:33:37.983

对于多个标签：

```
 var tabs = Ext.create('Ext.tab.Panel', {

     renderTo: document.body,
     width: 450,
     activeTab: 0,     // first tab initially active
     defaults :{
          bodyPadding: 10
      },
    items: [
          monGridPanelDetailEcriture,
          {
           title:'tab2',
           html:'I m tab 2'
           }
       ]
   }); 
```

# javascript - Rhino 中的原生函数是如何创建的？

> ID：13033080
> 
> 赞同：4
> 
> 时间：2012-10-23T14:43:50.623
> 
> 标签：javascript, rhino, ringojs

我一直在查看 Rhino[文档](https://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial#JavaScript_host_objects)和[源代码](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/NativeGlobal.java)以获取有关如何实现我自己的全局本机函数的线索。然而，这项任务比我预期的要复杂。

在阅读了RingoJS 中函数实现的[代码](https://github.com/ringo/ringojs/blob/master/src/org/ringojs/engine/Require.java)`require`后，我相信我需要按照以下几行来做一些事情：

```
import org.mozilla.javascript.BaseFunction;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.Context;

public class MyGlobalNativeFunction extends BaseFunction {
    public MyGlobalNativeFunction() {}

    public Object call(Context cx, Scriptable scope, Scriptable thisObj, Object[] args) {
        // implementation of my function
    }

    public int getArity() {
        return 1;
    }
} 
```

我在正确的轨道上吗？关于如何实现这一点的逐步演练会很棒。

如果我可以使用 Rhino 的`defineClass`函数来创建我的全局原生函数，那就太好了。我不太热衷于推出我自己的修改版 Rhino，只是因为我想实现一个本机功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:49:35.537

我认为这应该可行，如果您只想实现一个全局函数，这是一个好方法。如果要实现多个功能或一个宿主对象，还有其他方法。

然后你会使用这样的东西来实例化你的函数：

```
scope.defineProperty("myNativeFunction",
                     new MyGlobalNativeFunction(),
                     ScriptableObject.DONTENUM); 
```

查看[RingoGlobal](https://github.com/ringo/ringojs/blob/master/src/org/ringojs/engine/RingoGlobal.java)了解这是如何完成的（它还展示了如何在一次扫描中定义多个函数，而无需为每个函数创建一个类）。[Rhino 示例目录](https://github.com/mozilla/rhino/tree/master/examples)包含一些如何使用 Rhino 创建合适的宿主对象的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T14:36:39.427

首先，您需要初始化全局范围（初始化所有 javascript 标准对象、函数等），然后将函数添加到此范围，如 Hannes Wallnöfer 所写。

```
Context cx = Context.enter();  //enter rhino context - bind context with current thread
Scriptable globalScope= cx.initStandardObjects();  //init js standard object in global scope
globalScope.defineProperty("myNativeFunction",
                     new MyGlobalNativeFunction(),
                     ScriptableObject.DONTENUM); 
```

就是这样。

现在调用这个函数调用：

```
Object result = cx.evaluateString(globalScope, "myNativeFunction()", "<cmd>", 1, null); 
```

有关更多信息，请参阅：[rhino 嵌入教程](https://developer.mozilla.org/en-US/docs/Rhino/Embedding_tutorial)

# cakephp - cakephp1.3中不同错误的不同布局

> ID：13033082
> 
> 赞同：0
> 
> 时间：2012-10-23T14:43:55.710
> 
> 标签：cakephp, cakephp-1.3

cakephp1.3中是否可以为不同的错误设置不同的布局？

这是我的**AppError**类

```
function _outputMessage($template) {
    $this->controller->beforeFilter();
    $this->controller->render($template);
    $this->controller->afterFilter();
    echo $this->controller->output;
}

function error404($params) {
    extract($params, EXTR_OVERWRITE);
    header("HTTP/1.0 404 Not Found");
    $this->error(array('code' => '404',
                    'name' => 'Not found',
                    'message' => sprintf("page not found %s", $url, $message),
                    'base' => $base));

    exit();
}

function item404($params) {
    extract($params, EXTR_OVERWRITE);
    header("HTTP/1.0 404 Not Found");

    $this->error(array('code' => '404',
                    'name' => 'Not found',
                    'message' => sprintf("Item not found %s", $url, $message),
                    'base' => $base));

    exit();
} 
```

我想分别有布局“错误”和布局“itemerror”。我尝试在函数中设置布局，但它不起作用。

任何帮助表示赞赏，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:15:37.623

当然，只需更改控制器的布局。

```
$this->controller->layout = 'error_layout'; 
```

这假设您继续使用默认`_outputMessage()`方法。

```
function _outputMessage($template) {
    // can be set in the error method
    $this->controller->layout = 'error_layout';
    parent::_outputMessage($template);
} 
```

# java - 从 Eclipse 运行 OSGi 应用程序时的 JVM_Bind

> ID：13033084
> 
> 赞同：0
> 
> 时间：2012-10-23T14:44:06.253
> 
> 标签：java, eclipse, jvm, osgi

我有以下问题。

我在 Eclipse 中有一个运行配置（osgi 类型）。曾几何时，此运行配置运行良好，没有任何问题。

现在，当我尝试运行它时，我得到 a`java.net.BindException: Address already in use: JVM_Bind`并且控制台中打印的所有行都打印了两次。

我看到应用程序是在端口 xxxx 上启动的，然后在几行之后我得到了错误。

运行配置没有改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:06:51.737

例外是由于应用程序试图绑定到服务器端口，而该端口已被另一个应用程序占用。

您还提到控制台中的每一行都打印了两次。这意味着应用程序可能会启动两次。

没有足够的信息来确定您的运行配置为何会两次启动同一个应用程序。您应该查看 Eclipse 中的 DEBUG 透视图，以了解是否使用两个线程启动了单个进程。

# jquery - jQuery swfobject 参数作为变量

> ID：13033090
> 
> 赞同：0
> 
> 时间：2012-10-23T14:44:36.287
> 
> 标签：jquery, swfobject

我有 jQuery swfobject 的问题。如何在高度下添加“params1”变量：385？

```
 var params1 = {
                play: false,
                menu: false
            };

            flashMovie = $('#Flash .movie');
            flashMovie.flash({
                swf: 'swf/some_flash.swf',
                width: 640,
                height: 385
            }); 
```

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:09:13.137

您可以尝试使用[jQuery.extend()](http://api.jquery.com/jQuery.extend/)将两个对象合并在一起（或[jQuery.merge()](http://api.jquery.com/jQuery.merge/)）我不确定哪一个适合您，而且我从未使用过它们，但希望您可以阅读文档和图出来。

**编辑2：**

例子：

```
 var params1 = {
            play: false,
            menu: false
        };
        var baseparams = {
            swf: 'swf/some_flash.swf',
            width: 640,
            height: 385
        }
        $.extend(baseparams , params1);

        flashMovie = $('#Flash .movie');
        flashMovie.flash(baseparams); 
```

这没有经过测试。这是一个粗略的草图。

# excel - 匹配 cols a 和 c 然后匹配 cols b 和 d

> ID：13033096
> 
> 赞同：1
> 
> 时间：2012-10-23T14:44:45.960
> 
> 标签：excel, match

我正在尝试匹配 cols a(id) 和 c(id)，然后是相应的“平衡”列 b(balance) 和 d(balance)。

例如，我需要像 e 中那样的输出（是否平衡匹配 id 上的键控）：

```
id  balance id  balance does balance match keying on id
1   20.1    2   30  yes
2   30  6   24.6    no
3   12.5    4   16  yes
4   16  5   51  no
5   50  3   12.5    yes
6   24.5    1   20.1    yes 
```

它快把我逼疯了。我可以将 id 与 vlookup 匹配，但如果所有行都混淆了（如上所述），我无法轻松比较 b 和 d 中的相应余额。如果按顺序排列的行当然很容易（使用 IF(b = d, "true","false")），在这种情况下，我实际上有数万行。

有谁知道这样做的方法？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:06:49.093

`vlookup`除非我不完全理解某些内容，否则您应该可以在这里使用。如果您的标题位于第 1 行，而值从第 2 行开始，则您的值将位于 A2 到 D(x) 的范围内，其中 x 是您的最后一行值。在上面的示例中，这将是第 7 行，因此是 A2 到 D7。

您可以设置“平衡匹配”（示例中为 E2）以使用此公式，再次用 7 替换 $D$x 中的 x 来定义数据集的范围。

```
=IF(D2=VLOOKUP(C2,$A$2:$D$7,2),"yes", "no") 
```

然后将其拖到最后一行以完成结果列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:06:35.063

使用数组公式...

把它放在 E1 中：

```
=ISNUMBER(MATCH(C2&D2,A:A&B:B,0)) 
```

然后按 Ctrl + Shift + Enter 使其成为数组公式并向下拖动

希望这能解决问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:09:00.920

还有一个选择：

假设您的数据从 A1 开始...

E2 的公式可以是

```
=IF(INDEX(A:D,MATCH(C2,A:A),2)=D2,"Yes","No") 
```

将此公式复制并粘贴到所有行将给出所需的结果。

请注意，我使用的是 A:D，因此您不需要仅定义列的数据范围。

# sql-server-2005 - 使用自定义连接提供程序的连接池

> ID：13033099
> 
> 赞同：0
> 
> 时间：2012-10-23T14:44:49.143
> 
> 标签：sql-server-2005, nhibernate, connection-pooling, nhibernate-3

当您使用动态生成连接字符串的自定义连接提供程序时，是否启用了连接池？用户是连接字符串中唯一改变的数据，通过时间可以为同一个用户打开许多会话。顺便说一句，我使用 NHibernate 3.0 连接到 SQL Server 2005 中的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:51:18.367

无论连接字符串如何生成，都使用 ADO.NET 池，但是要将连接字符串绑定到池，字符串必须相同，因此如果用户名更改，则不满足此条件，结果您将为每个用户从不同的池中获取连接。

# powershell - Powershell脚本仅从2003邮箱返回totalitems并交换2003邮箱

> ID：13033100
> 
> 赞同：4
> 
> 时间：2012-10-23T14:44:49.227
> 
> 标签：powershell, scripting

我正在开发一个 Powershell 脚本，它只返回来自 Exchange 2003 邮箱的所有项目。到目前为止，我有这个：

> get-wmiobject -computername exchange01 -namespace root\microsoftexchangev2 -class exchange_mailbox -filter "mailboxdisplayname='Journal Mail'" | 选择对象总数 | 写主机

然而，这给出的结果为：

> @{totalitems=939}

我只想返回这个数字，因为我们有一个外部程序，它会读取这个数字并在它超过预定数字时发送通知。

我很难找到一种方法来从结果中删除所有不必要的信息。欢迎对我如何实现这一点提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:47:20.233

Select-Object 返回具有一个属性的对象，将结果分配给变量并引用属性名称：

```
$mbx = get-wmiobject -computername exchange01 -namespace root\microsoftexchangev2 -class exchange_mailbox -filter "mailboxdisplayname='Journal Mail'" 
$mbx.totalitems 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:48:46.150

试试这是否有效：

```
get-wmiobject -computername exchange01 -namespace root\microsoftexchangev2 -class exchange_mailbox -filter "mailboxdisplayname='Journal Mail'" | select-object -ExpandProperty totalitems 
```

# php - PHP 和 Ajax 文件上传 - 无法使用 $_FILES 获取 tmp_name

> ID：13033104
> 
> 赞同：2
> 
> 时间：2012-10-23T14:44:58.097
> 
> 标签：php, javascript, ajax, file-upload

我正在尝试使用 Ajax 上传文件，但在处理文件时遇到了麻烦...出于测试目的，我构建了一个如下所示的简单代码：

JS：

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST",document.getElementById('upload').action,true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var cmdStr="q="+str;
xmlhttp.send(cmdStr);

document.getElementById("ResponseDiv").innerHTML=xmlhttp.responseText; 
```

PHP：

```
$q=$_POST["q"];
echo $q; 
```

它工作正常并`xmlhttp.responseText`打印`[object File]`。

但是，我的问题是我需要使用`$_FILES["q"]['tmp_name']`. 为此，我已将代码更改为以下内容：

JS：

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST",document.getElementById('upload').action,true);
xmlhttp.setRequestHeader("enctype","multipart/form-data");
var cmdStr="q="+str;
xmlhttp.send(cmdStr);

document.getElementById("ResponseDiv").innerHTML=xmlhttp.responseText; 
```

PHP：

```
$q=$_FILES["q"]["tmp_name"];
echo $q; 
```

问题是现在`xmlhttp.responseText`我什么也得不到。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:14:13.200

查看此答案以使用 AJAX 进行文件上传。这是可能的，但并非在所有浏览器中都兼容。

[jQuery 上传进度和 AJAX 文件上传](https://stackoverflow.com/questions/4856917/jquery-upload-progress-and-ajax-file-upload/4943774#4943774)

--

或者，如果您想即时上传，有一个很酷的库，您可以将其称为“Uploadify”。它是一个 flash/jquery（或现在的 HTML5）装备，可让您即时上传文件。在 Flash 版本中，我上次使用它时……你可以添加回调函数，让它基本上做任何你想做的事情。

一些聪明的 javascript 可以使这项工作为您服务。

[http://www.uploadify.com/](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:49:36.567

AJAX 不进行文件上传。它不是为此而设计的。标准的解决方法是让 JS 代码构建一个隐藏的 iframe 并在其中执行标准的 POST 类型上传。因此，如果您尝试这样做`echo $_FILES['q']['error']`，您可能会得到`4`“无文件”。

# android - 请求分成块的 HTTPS 套接字

> ID：13033105
> 
> 赞同：1
> 
> 时间：2012-10-23T14:44:59.990
> 
> 标签：android, ssl, proxy

我有一个关于 HTTPS 套接字如何工作的问题。

我必须在移动设备和服务器之间实现双向通信。

我从蓝牙设备以原始字节的形式获取请求，但请求是以块的形式接收的，并且它以相同的方式等待响应。我的意思是：设备正在向我发送一个块，我必须将其发送到服务器，并且我必须将服务器响应发送回设备，以接收第二个块。

好吧，这一次有效，我的意思是我正在打开套接字，正在编写请求块，正在读取响应块，但是当我编写第二个请求块时，没有从套接字接收到数据。

代码如下所示：

```
if (webSocket == null) {
    SocketFactory factory = SSLSocketFactory.getDefault();
    webSocket = factory.createSocket(DataUtils.stringValueFromByteArray(requestPackage.getHostAddress()),
                                                   DataUtils.intValueFromByteArray(requestPackage.getHostPort()));

}
 webInputStream = webSocket.getInputStream();
 webOutputStream = webSocket.getOutputStream();

 webOutputStream.write(requestPackage.getDataContent(), 0,requestPackage.getDataContent().length);
 webOutputStream.flush();

byte[] byteBuffer = getBytesFromInputStream(webInputStream); 
```

getBytesFromInputStream 看起来像：

```
public static byte[] getBytesFromInputStream(InputStream is)
        throws IOException {

    ByteArrayOutputStream bout = new ByteArrayOutputStream();
    byte buf[] = new byte[8192];
    int ret = 0;
    while ((ret = is.read(buf)) != -1) {
        bout.write(buf, 0, ret);
    }

    byte[] bytes = bout.toByteArray();
    return bytes;
} 
```

`webSocket`请求开始时获取一个值，`null`并且连接不应该结束。

现在的问题是这段代码适用于第一个数据块，但在第二个数据块上，`getButesFromInputStream`返回一个空数组，因为`is.read()`立即返回 -1。

任何人都可以建议我该怎么做，或者向我解释我做错了什么？

任何帮助，将不胜感激。谢谢，阿克德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:41:17.907

TCP 的一个常见误解是，接收应用程序会以与发送应用程序发送数据的方式相同的块中获取数据片段。TCP 所保证的只是顺序（以及最终交付，前提是没有错误）：这应该被视为一个整体的流。

为此原因：

*   读取 0 字节并不表示套接字已关闭（也是一个常见的误解）
*   应用协议必须定义分隔符或替代方式来告诉对方何时停止读取，以便能够处理应用协议的各种命令。

HTTP 1.1 使用header 来告诉在请求/响应或[Chunked Transfer-Encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)`Content-Length`的主体中必须读取多少字节，而在发送 header 时不知道大小。

如果您想读取 HTTP 请求/响应，您需要处理：标头以空行终止，正文的长度由`Content-Length`您获得的 或 各种块给出。

如果您想读取内容长度，自己实现这一点相对简单，但如果您还希望能够处理分块传输编码，则肯定需要更多的工作。总的来说，你不妨使用一个 HTTP 库，它会为你做这一切。正如尼古拉所说，`HttpsURLConnection`是一个好方法。如果这不能满足您的需求，您可以使用 Apache Http Client 库（也随 Android AFAIK 提供）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:01:00.810

如果您确实在使用 HTTPS，请不要使用原始套接字，而是使用`HttpsURLConnection`理解该协议的类似 HTTP 客户端。然后来自 BT 的每个下一个块将作为一个新请求发送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:04:02.183

in `getBytesFromInputStream`，在你的 while 之前，添加另一个 while ：

```
while (is.available() == -1) {
    Thread.sleep(100); // for instance. less may very well work too.
} 
```

这将等待一些数据可供读取。（数据到达服务器、服务器回复、数据到达您的时间。）

## 编辑

由于某种原因 is.available() 似乎返回 0，您可以使用 is.read 代替：

```
while (ret = (is.read(buf)) <= 0) {
    Thread.sleep(100); // for instance. less may very well work too.
}
bout.write(buf, 0, ret); 
```

（额外的写入避免丢失实际读取的数据。）

这个想法是等到从服务器收到一些答案，然后实际读取它。

# ruby-on-rails - Rail 应用程序模板 - 导致服务器启动错误

> ID：13033111
> 
> 赞同：1
> 
> 时间：2012-10-23T14:45:12.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在为某人开发的快速应用程序上使用了 Rails 应用程序模板。它通过 RVM 安装了一个新的 Ruby 版本，一切都很好。我已将其推送到 Github，并且可以通过 Heroku 提供服务。

当我尝试更新它时，问题就来了。我正在使用它安装的正确 Ruby 版本，但是当我在本地启动服务器时，我收到一个错误，我认为这与 Ruby 版本问题有关。

```
/Users/tomallen/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): found character that cannot start any token while scanning for the next token at line 2 column 1 (Psych::SyntaxError)
    from /Users/tomallen/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/tomallen/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/tomallen/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/configuration.rb:115:in `database_configuration'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railtie.rb:78:in `block (2 levels) in <class:Railtie>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `each'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/tomallen/Documents/Sites/videoapp/config/environment.rb:5:in `<top (required)>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/tomallen/Documents/Sites/videoapp/config.ru:4:in `block in <main>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/tomallen/Documents/Sites/videoapp/config.ru:1:in `new'
    from /Users/tomallen/Documents/Sites/videoapp/config.ru:1:in `<main>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /Users/tomallen/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

有什么想法可能导致这种情况吗？

# sql - 处理 PostgreSQL 外键错误与防止它们发生

> ID：13033115
> 
> 赞同：2
> 
> 时间：2012-10-23T14:45:25.490
> 
> 标签：sql, postgresql

我真的需要检查另一个表中的记录是否真的存在，如果 PostgreSQL 无论如何都会检查那个外键约束吗？

`parent`通常，您在创建记录之前检查是否存在现有`child`记录。但这是另一个要执行的查询。所以我认为最好只处理 PostgreSQL 错误并检查它是否是关于`parent`记录不存在（违反外键约束）。

是更好地利用数据库服务器功能，还是没有为此目的？您是否建议在创建新记录之前进行所有完整性检查？

```
CREATE TABLE "public"."categories" (
    "id" serial,
    "name" varchar(100),
    CONSTRAINT "categories__id_pkey" PRIMARY KEY ("id")
);

CREATE TABLE "public"."products" (
    "id" serial,
    "category_id" integer NOT NULL,
    "name" varchar(100),
    CONSTRAINT "products__id_pkey" PRIMARY KEY ("id"),
    CONSTRAINT "products__category_id_fkey" FOREIGN KEY ("category_id")
        REFERENCES "categories" ("id") ON DELETE CASCADE
); 
```

一个伪代码：

```
if (query("SELECT * FROM categories WHERE id = 123"))
    query("INSERT INTO products (category_id, name) VALUES (123, 'Something')")
else
    throw Error("Parent record does not exist")

try
    query("INSERT INTO products (category_id, name) VALUES (123, 'Something')")
catch (Exception e)
    if (e.code == '23503')
        throw Error("Parent record does not exist")
    else
        throw Error("Some other error occured") 
```

PostgreSQL 中的错误代码`23503`是：

`ERROR: insert or update on table "products" violates foreign key constraint "products__category_id_fkey"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T16:30:50.413

> *是更好地利用数据库服务器功能，还是没有为此目的*

它**正是**为此目的。

只需处理错误，否则您做的工作太多。

如果您检查相关行的存在，您只需复制工作，因为 PostgreSQL 也会这样做。

如果您不想关心插入行的顺序，可以将约束声明为`deferrable initially deferred`. *在这种情况下，当您提交*事务时，而不是在运行每个语句时，所有相关行都必须存在。这是一个简短的例子：[http ://sqlfiddle.com/#!12/33de1/1](http://sqlfiddle.com/#!12/33de1/1)

在这种情况下，您需要在提交时处理错误，而不是在运行每个语句时。

# java - 耆那教认证

> ID：13033116
> 
> 赞同：8
> 
> 时间：2012-10-23T14:45:26.697
> 
> 标签：java, sip, jain-sip

我正在使用 Jain Sip 库，尝试创建与星号服务器的连接。我一直在使用此页面中的 textclient 示例应用程序： [http ://www.oracle.com/technetwork/articles/entarch/introduction-jain-sip-090386.html](http://www.oracle.com/technetwork/articles/entarch/introduction-jain-sip-090386.html)

但这实际上并没有通过服务器进行身份验证。我可以向服务器上的用户发送消息，但我通常需要在服务器上进行用户/密码身份验证。

据我所知，我必须使用“javax.sip.OUTBOUND_PROXY”属性，但我找不到任何关于如何设置用户名或密码的文档。有没有其他人在这方面取得过任何成功？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-17T21:52:41.743

我在注册中找到的最佳示例在[这里](http://vkslabs.com/sip-register-request-using-jain-sip/)。如果万一有一天链接干涸，以下是要点：

> REGISTER 请求用于更新用户在 REGISTRAR 服务器上的当前位置。应用程序发送 REGISTER 消息通知服务器其当前位置，该位置又存储在位置服务器中。当呼叫者呼叫用户时，代理服务器使用此信息来查找被呼叫者的位置。
> 
> 注册请求应由客户端定期发送。REGISTER 请求的有效性由 Expires 标头确定。
> 
> **流动**
> 
> ![图片](../Images/a0f3c913dcca68a59ffc8d684a1631bf.png)
> 
> **样品请求**
> 
> ```
> REGISTER sip:sip.linphone.org SIP/2.0
> Call-ID: 0a0f14355fa76ae6435b98bfe085baf9@223.1.1.128
> CSeq: 1 REGISTER
> From: <sip:vkslabs@sip.linphone.org>;tag=-1427592833
> To: <sip:vkslabs@sip.linphone.org>
> Max-Forwards: 70
> Via: SIP/2.0/TCP 223.1.1.128:5060;branch=z9hG4bK-323532-2a454f4ec2a4213f6d6928eba479521d
> Contact: <sip:vkslabs@223.1.1.128;transport=tcp>
> Content-Length: 0 
> ```
> 
> 现在让我们看看如何使用 NIST SIP 堆栈构建上述请求。
> 
> 第一步是创建一个实现 SIPListener 的类。确保您的 SIP 堆栈正在初始化 NIST JAIN SIP 堆栈。
> 
> 1.  创建 Call-ID 标头
>     
>     
>     
>     CallIdHeader callIdHeader = this.sipProvider.getNewCallId();
>     
>     
> 2.  创建 Cseq 标头
>     
>     
>     
>     CSeqHeader cSeqHeader = this.headerFactory.createCSeqHeader(cseq, "REGISTER");
>     
>     
> 3.  创建自标头
>     
>     
>     
>     地址 fromAddress = addressFactory.createAddress("sip:" + username + '@' + server); FromHeader fromHeader = this.headerFactory.createFromHeader(fromAddress, String.valueOf(this.tag));
>     
>     
> 4.  创建到标题
>     
>     
>     
>     ToHeader toHeader = this.headerFactory.createToHeader(fromAddress, null);
>     
>     
> 5.  创建 Max-Forwards 标头
>     
>     
>     
>     MaxForwardsHeader maxForwardsHeader = this.headerFactory.createMaxForwardsHeader(70);
>     
>     
> 6.  创建 Via 标头
>     
>     
>     
>     ArrayList viaHeaders = new ArrayList(); ViaHeader viaHeader = this.headerFactory.createViaHeader(this.ip, this.port, "tcp", null); viaHeaders.add(viaHeader);
>     
>     
> 7.  创建联系人标题
>     
>     
>     
>     this.contactAddress = this.addressFactory.createAddress("sip:" + this.username + '@' + this.ip + "transport=tcp");
>     
>     
>     
>     // 创建用于所有 SIP 消息的联系人标头。this.contactHeader = this.headerFactory.createContactHeader(contactAddress);
>     
>     
> 
> 一旦创建了所有标头，就该创建请求本身了。
> 
> ```
> request = this.messageFactory.createRequest("REGISTER sip:" + server + "SIP/2.0\r\n\r\n"); 
> request.addHeader(callIdHeader);
> request.addHeader(cSeqHeader); 
> request.addHeader(fromHeader);
> request.addHeader(toHeader); 
> request.addHeader(maxForwardsHeader);
> request.addHeader(viaHeader); 
> request.addHeader(contactHeader); 
> ```
> 
> 现在请求对象已经创建了所有必要的标头，是时候发送请求了。
> 
> ```
> inviteTid = sipProvider.getNewClientTransaction(request); // send the request out. 
> inviteTid.sendRequest(); 
> ```
> 
> 成功发送请求后，将使用 SIPListener 中的 processResponse 回调将响应传递给应用程序。
> 
> ```
> public void processResponse(ResponseEvent responseEvent) { 
>   int statusCode = responseEvent.getResponse().getStatusCode(); 
> } 
> ```
> 
> **代码**
> 
> ```
> public void register(Response response) {
>   try {
>   cseq++;
>   ArrayList viaHeaders = new ArrayList();
>   ViaHeader viaHeader = this.headerFactory.createViaHeader(this.ip,
>   this.port, "tcp", null);
>   viaHeaders.add(viaHeader);
>   // The "Max-Forwards" header.
>   MaxForwardsHeader maxForwardsHeader = this.headerFactory
>   .createMaxForwardsHeader(70);
>   // The "Call-Id" header.
>   CallIdHeader callIdHeader = this.sipProvider.getNewCallId();
>   // The "CSeq" header.
>   CSeqHeader cSeqHeader = this.headerFactory.createCSeqHeader(cseq,
>   "REGISTER");
> 
>   Address fromAddress = addressFactory.createAddress("sip:"
>   + username + '@' + server);
> 
>   FromHeader fromHeader = this.headerFactory.createFromHeader(
>   fromAddress, String.valueOf(this.tag));
>   // The "To" header.
>   ToHeader toHeader = this.headerFactory.createToHeader(fromAddress,
>   null);
> 
>   // this.contactHeader = this.headerFactory
>   // .createContactHeader(contactAddress);
> 
>   request = this.messageFactory.createRequest("REGISTER sip:"
>   + server + " SIP/2.0\r\n\r\n");
>   request.addHeader(callIdHeader);
>   request.addHeader(cSeqHeader);
>   request.addHeader(fromHeader);
>   request.addHeader(toHeader);
>   request.addHeader(maxForwardsHeader);
>   request.addHeader(viaHeader);
>   request.addHeader(contactHeader);
>   if (response != null) {
>   retry = true;
>   AuthorizationHeader authHeader = Utils.makeAuthHeader(headerFactory, response,
>   request, username, password);
>   request.addHeader(authHeader);
>   }
>   inviteTid = sipProvider.getNewClientTransaction(request);
>   // send the request out.
>   inviteTid.sendRequest();
>   this.dialog = inviteTid.getDialog();
>   // Send the request statelessly through the SIP provider.
>   //            this.sipProvider.sendRequest(request);
> 
>   // Display the message in the text area.
>   logger.debug("Request sent:\n" + request.toString() + "\n\n");
>   } catch (Exception e) {
>   // If an error occurred, display the error.
>   e.printStackTrace();
>   logger.debug("Request sent failed: " + e.getMessage() + "\n");
>   }
> } 
> ```

您还可以在[此处](http://vkslabs.com/digest-authorization-in-sip-with-md5-challenge)查看有关身份验证的参考帖子。如果万一有一天链接干涸，以下是要点：

> 在 SIP 请求期间，如果服务器以 401 Proxy Authentication Required 或 401 Unauthorized 响应，则意味着客户端必须使用 MD5 质询再次重放相同的请求。
> 
> 客户端应该使用来自响应头 WWW-Authenticate 的 nonce 值。
> 
> WWW-Authenticate: Digest realm="sip.linphone.org", nonce="JbAO1QAAAAA3aDI0AADMobiT7toAAAAA", opaque="+GNywA==", algorithm=MD5, qop="auth"
> 
> 客户端应使用 nonce 生成 MD5 质询，并使用 Authorization 标头再次发出原始请求。
> 
> 创建 MD5 挑战的步骤
> 
> 1.  使用用户名 + “:” + 领域 + “:” + 密码创建第一个 MD5 哈希
>     
>     
>     
>     字符串 a1 = 用户名 + ":" + 领域 + ":" + 密码；字符串 ha1 = toHexString(mdigest.digest(a1.getBytes()));
>     
>     
> 2.  使用 request_method + “:” + request_uri 创建第二个 MD5 哈希
>     
>     
>     
>     字符串 a2 = request_method.toUpperCase() + ":" + request_uri; 字符串 ha2 = toHexString(mdigest.digest(a2.getBytes()));
>     
>     
> 3.  如果响应标头中的 qop 是“auth”，则使用步骤 3a 计算最终的 MD5 哈希，否则如果它未定义或为空，请参阅步骤 3b。
>     
>     
> 
> 3a。使用 ha1 + “:” + nonce + “:” + nonceCount + “:” + cNonce + “:” + qop + “:” + ha2 创建最终的 MD5 字符串
> 
> ```
> String finalStr = ha1 + ":" + nonce + ":" + nonceCount + ":" + cNonce + ":" + qop + ":" + ha2; 
> String response = toHexString(mdigest.digest(finalStr.getBytes())); 
> ```
> 
> 3b。使用 ha1 + “:” + nonce + “:” + ha2 创建最终的 MD5 字符串
> 
> ```
> String finalStr = ha1 + ":" + nonce + ":" + ha2; 
> String response = toHexString(mdigest.digest(finalStr.getBytes())); 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T20:34:57.387

从这里查看示例[http://code.google.com/p/jain-sip/source/browse/#git%2Fsrc%2Fexamples%2Fauthorization](http://code.google.com/p/jain-sip/source/browse/#git%2Fsrc%2Fexamples%2Fauthorization)

为什么你需要去这个低级别，你可能最好使用 SIP Servlets 容器，比如 Mobicents [http://code.google.com/p/sipservlets/](http://code.google.com/p/sipservlets/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-11T16:28:11.837

您可能还想查看封装了上述步骤的 ClientAuthenticationHelper 类：请参阅包 gov.nist.javax.sip.clientauthutils

我相信代码库中有一个使用示例。

# angularjs - Angular JS：如何绑定到 Promise

> ID：13033118
> 
> 赞同：68
> 
> 时间：2012-10-23T14:45:28.337
> 
> 标签：angularjs, promise

我正在尝试将承诺绑定到视图。我不知道你是否可以直接这样做，但这就是我正在尝试做的。任何想法我做错了什么？

注意：源有点做作超时并使用静态数据，但这是为了使代码更易于诊断。

**编辑：** JSFiddle 页面：http: [//jsfiddle.net/YQwaf/27/](http://jsfiddle.net/YQwaf/27/)

**编辑：解决方案：**原来你**可以**直接绑定承诺。我的原始代码有两个问题：

1.  使用 setTimeout() 而不是 angular 的 $timeout 是一个问题。Angular 不知道它需要在触发超时时刷新 UI（你可以在 setTimeout 中使用 $scope.$apply 来解决这个问题，或者你可以只使用 $timeout ）
2.  绑定到返回承诺的函数是一个问题。如果它被第二次调用，它会做出另一个承诺。更好的是为 promise 设置一个范围变量，并且只根据需要创建一个新的 promise。（就我而言，这是在国家代码上调用 $scope.$watch）

HTML：

```
<div ng:controller="addressValidationController">
    Region Code <select ng:model="regionCode" ng:options="r.code as r.name for r in getRegions()"/>
    Country Code<select ng:model="countryCode"><option value="US">United States</option><option value="CA">Canada</option></select>
</div> 
```

JS：

```
function addressValidationController($scope, $q) {
    var regions = {
        US: [{code: 'WI',name: 'Wisconsin'}, {code: 'MN',name: 'Minnesota'}], 
        CA: [{code: 'ON',name: 'Ontario'}]
    };
    $scope.getRegions = function () {
        var deferred = $q.defer();
        setTimeout(function () {
            var countryRegions = regions[$scope.countryCode];
            console.log(countryRegions);
            if(countryRegions === undefined) {
                deferred.resolve([]);
            } else {
                deferred.resolve(countryRegions);
            }
        }, 1000);
        return deferred.promise;
    };
} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-01-24T17:36:18.157

从 Angular 1.2 开始，[你不能再直接在模板中使用 Promise 了](https://github.com/angular/angular.js/commit/5dc35b527b3c99f6544b8cb52e93c6510d3ac577)。相反，您需要像往常一样将
结果放入`$scope`inside ——没有魔法。`then`

作为获得旧行为的临时解决方法，您可以致电

```
$parseProvider.unwrapPromises(true) 
```

但是这个功能稍后会被删除，所以不要依赖它。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-23T15:23:24.990

> **警告**：这个答案在编写时是准确的，但是从 1.2 开始，Angular 模板引擎不能透明地处理承诺！-- *@马伏里奥*

是的，模板引擎（和表达式）透明地处理承诺，但我会将承诺分配给控制器中的范围属性，而不是每次都调用返回新承诺的函数（我认为这是你的问题，已解决的承诺会丢失，因为新的每次都返回承诺）。

JSFiddle：http: [//jsfiddle.net/YQwaf/36/](http://jsfiddle.net/YQwaf/36/)

HTML：

```
<div ng:controller="addressValidationController">
    Region Code <select ng:model="regionCode" ng:options="r.code as r.name for r in regions"/>
    Country Code<select ng:model="countryCode"><option value="US">United States</option><option value="CA">Canada</option></select>
</div> 
```

JS：

```
function addressValidationController($scope, $q, $timeout) {
    var regions = {
        US: [{
            code: 'WI',
            name: 'Wisconsin'},
        {
            code: 'MN',
            name: 'Minnesota'}],
        CA: [{
            code: 'ON',
            name: 'Ontario'}]
    };

    function getRegions(countryCode) {
        console.log('getRegions: ' + countryCode);
        var deferred = $q.defer();
        $timeout(function() {
            var countryRegions = regions[countryCode];
            if (countryRegions === undefined) {
                console.log('resolve empty');
                deferred.resolve([]);
            } else {
                console.log('resolve');
                deferred.resolve(countryRegions);
            }
        }, 1000);
        return deferred.promise;
    };

    $scope.regions = [];

    // Manage country changes:
    $scope.$watch('countryCode', function(countryCode) {
        if (angular.isDefined(countryCode)) {
            $scope.regions = getRegions(countryCode);
        }
        else {
            $scope.regions = [];
        }
    });
}​ 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-09-14T19:11:48.107

从 Angular 1.3 开始 -`$parseProvider.unwrapPromises(true)` [将不再工作](https://docs.angularjs.org/guide/migration#migrating-from-1-2-to-1-3)。

相反，您应该直接解开 Promise：

```
myApiMethod().then(function(value){
    $scope.item = value; 
}); 
```

请注意，promise unwrapping 仍然可以像往常一样与 ngResource 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-20T23:46:14.977

返回对保存列表的范围变量的引用就足够了。

```
function addressValidationController($scope,$timeout) {
    var regions = {
        US: [{code: 'WI',name: 'Wisconsin'}, {code: 'MN',name: 'Minnesota'}], 
        CA: [{code: 'ON',name: 'Ontario'}]
    };

    $scope._regions = [];

    $scope.getRegions = function () {

        $timeout(function () {
            var countryRegions = regions[$scope.countryCode];
            console.log(countryRegions);
            if(countryRegions === undefined) {
                $scope._regions = []
            } else {
                $scope._regions = countryRegions
            }
        }, 1000);

        return $scope._regions;
    };
} 
```

# ruby-on-rails - Rspec static_pages_spec.rb 失败，看不到标题或 H1

> ID：13033119
> 
> 赞同：0
> 
> 时间：2012-10-23T14:45:32.323
> 
> 标签：ruby-on-rails, rspec

运行以下命令时：

> bundle exec rspec 规范/请求/static_pages_spec.rb

我收到以下错误

```
 FF.......

    Failures:

      1) Static pages Home page should have the h1 'Sample App'
         Failure/Error: page.should have_selector('h1', text: 'Sample App')
           expected css "h1" with text "Sample App" to return something
         # ./spec/requests/static_pages_spec.rb:6:in `block (3 levels) in <top (required)>'

      2) Static pages Home page should have the base title
         Failure/Error: page.should have_selector('title',
           expected css "title" with text "Ruby on Rails Tutorial Sample App" to return something
         # ./spec/requests/static_pages_spec.rb:10:in `block (3 levels) in <top (required)>'

    Finished in 0.38131 seconds
    9 examples, 2 failures

    Failed examples:

    rspec ./spec/requests/static_pages_spec.rb:4 # Static pages Home page should have the h1 'Sample App'
    rspec ./spec/requests/static_pages_spec.rb:8 # Static pages Home page should have the base title 
```

我的 static_pages_spec.rb 看起来像这样：

```
require 'spec_helper'
describe "Static pages" do
  describe "Home page" do
    it "should have the h1 'Sample App'" do
      visit root_path
      page.should have_selector('h1', text: 'Sample App')
    end
    it "should have the base title" do
      visit root_path
      page.should have_selector('title',
                        text: "Ruby on Rails Tutorial Sample App")
    end
    it "should not have a custom page title" do
      visit root_path
      page.should_not have_selector('title', text: '| Home')
    end
  end
describe "Help page" do
    it "should have the h1 'Help me'" do
        visit help_path
        page.should have_selector('h1', text: 'Help me')
    end
it "should have the title 'Help me'" do
  visit help_path
   page.should have_selector('title',
                text: "Ruby on Rails Tutorial Sample App | Help me")
end
end
describe "About page" do
  it "should have the h1 'About us'" do
    visit about_path
    page.should have_selector('h1', text: 'About us')
  end
it "should have the title 'About us'" do
  visit about_path
  page.should have_selector('title',
                text: "Ruby on Rails Tutorial Sample App | About us")
    end
  end

  describe "Contact page" do
  it "should have the h1 'Contact'" do
    visit contact_path
    page.should have_selector('h1', text: 'Contact')
  end

it "should have the title 'Contact'" do
  visit contact_path
  page.should have_selector('title',
                text: "Ruby on Rails Tutorial Sample App | Contact")
    end
  end
end 
```

我的路线.rb

```
 SampleApp::Application.routes.draw do
      root to: 'static_pages#home'

      match '/help', to: 'static_pages#help'
      match '/about', to: 'static_pages#about'
      match '/contact', to: 'static_pages#contact'
end 
```

我之前有 9/9 失败，但后来我添加了

> config.include Rails.application.routes.url_helpers

到spec/rspec_helper.rb，现在我只剩下上面的失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:27:34.833

您需要删除您的 public/index.html 文件。删除后，您的代码运行良好。

一种检查正在发生的事情的方法：

1.  添加`gem "launchy"`到您的 Gemfile
2.  捆
3.  访问后添加 `save_and_open_page`root_path

# jsf - 用于数据库表示的 ApplicationScoped Bean 或 Singleton？

> ID：13033120
> 
> 赞同：3
> 
> 时间：2012-10-23T14:45:44.093
> 
> 标签：jsf, jakarta-ee, singleton, ejb

我将信息存储在数据库中（实际上是一个内容存储库，但这无关紧要），这些信息应该呈现给所有用户。目前我有一个 Singleton Bean，它获取这些信息并将其存储在一个变量中。每次数据库发生更新时都会调用此提取操作，以便表示数据库内容的变量始终是最新的。jsf 托管 bean 也使用此变量来显示信息。我想用这种方法避免的是必须为每个只读请求打开一个新的数据库连接。这种方法有意义还是我应该使用应用程序范围的托管 bean？然后我必须从 EJB 中调用托管 bean 的更新方法。这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:44:39.540

如果您想在 JSF 中跨给定 Web 应用程序的所有会话中保留信息，那么最好使用 Application Scoped 而不是使用静态单例。

以下是几个原因：

1.  静态字段基于特定 VM 中加载的类。如果您的应用程序要进行负载平衡或集群，则其他应用程序服务器节点不可能访问存储在其他服务器 VM 上的信息。

2.  ApplicationScoped bean 可以是可序列化的，这意味着某些 Web 和应用程序容器能够在服务器重新启动时将这些作用域 bean 持久化到磁盘。但是，这取决于给定服务器的功能。

3.  某些应用程序服务器具有良好的集群支持以及粘性会话和全局集群范围的应用程序范围。如果当前会话服务器意外关闭，这将允许会话成功路由到另一台服务器。此外，ApplicationScoped bean 将是公共的，并且可以在整个应用程序中随处访问，无论哪个节点正在为给定请求提供服务。同样，这高度依赖于应用程序容器的特性和配置。

4.  静态字段不仅对给定应用程序的 VM 上的每个请求都可访问，而且对给定 VM 上运行的每个应用程序上的每个请求都可用。如果应用程序服务器或 Web 容器正在运行多个 Web 应用程序并且它们都使用相同的类，那么它们可能会无意中共享信息或相互冲突。不是一个好的设计选择。

有关更多信息，请参见下文：

[https://blogs.oracle.com/groundside/entry/application_scope_v_s_static](https://blogs.oracle.com/groundside/entry/application_scope_v_s_static)

# asp.net - YouTube 评论和回复列表

> ID：13033122
> 
> 赞同：1
> 
> 时间：2012-10-23T14:45:44.433
> 
> 标签：asp.net, youtube-api

我正在使用 YouTube (Google) api (c#)。我正在列出视频的评论。我希望能够将回复与其父评论相关联以进行显示。评论和回复之间有什么关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:26:06.707

如果评论是对另一个评论的回复，则`link`评论数组包含一个对象，其中包含指向原始评论的链接。它应该如下所示：

```
{
rel: "http://gdata.youtube.com/schemas/2007#in-reply-to",
type: "application/atom+xml",
href: "http://gdata.youtube.com/feeds/api/videos/WRGmlVJD1tE/comments/wiskpP8JKnkb2xWsGKrGwTadVHSGoTIKXeEtJ2PWeCw"
} 
```

您必须发出另一个 HTTP 请求，但至少它可以工作：D

# powershell - 读取文本文件的第一行，然后将以下行传递给循环以读取

> ID：13033123
> 
> 赞同：6
> 
> 时间：2012-10-23T14:45:45.710
> 
> 标签：powershell

我需要读取文件的第一行，然后使用循环读取我想要读取的后续行。

例如：

```
Read in first line
Do stuff with the data

foreach ($line in $remainingLines)
{
    more stuff
} 
```

我有一个相当混乱的方法来实现这一点，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T14:55:10.900

将文件的内容分配给两个变量。第一个将保留第一行，第二个变量获取其余部分。然后循环 $remainingLines。

```
$firstLine,$remainingLines = Get-Content foo.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T14:56:23.557

```
$contents = gc .\myfile.txt

write-host $contents[0]

for ($i=1; $i -lt $contents.Length; $i++)
{
  write-host $contents[$i]
} 
```

# android - 服务可以包含活动吗？

> ID：13033124
> 
> 赞同：1
> 
> 时间：2012-10-23T14:45:47.143
> 
> 标签：android, android-service

我想创建一个具有 onWindowFocusChanged 方法的服务，该方法原生于 Activity。但是我们的客户要求平板电脑不断寻找这种焦点变化有没有办法将这样的监听器添加到服务或让活动作为服务的一部分运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:00:44.507

服务没有`onWindowFocusChanged()`办法。

但是您可以`onWindowFocusChanged()`在作为所有活动的父级的 Base Activity 中覆盖，并通过向其发送 Intent 来通知您的服务：

```
Intent intent = new Intent("focus changed");
intent.setClass(this, MyService.class);
startService(intent); 
```

您将通过覆盖`onStartCommand(Intent intent, int flags, int startId)`方法收到服务中的意图。

# javascript - JavaScript 查找所有文本节点并以字符串形式返回

> ID：13033141
> 
> 赞同：1
> 
> 时间：2012-10-23T14:47:04.383
> 
> 标签：javascript, textnode

我需要定义一个名为 getText() 的函数，它查找指定节点处或下方的所有 Text 节点，然后提取并连接节点的文本内容并将其作为单个 JavaScript 字符串返回。在 getText() 中，它将是一个被调用的警报

我的正文内容将是：

```
<body onload="getText()">
<div id="divText">
<h4>This is a heading!</h4>
<p>This is a paragraph.</p>
<p>And this is another paragraph.</p>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:52:12.760

在较新的浏览器中，您可以使用[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)它。

```
alert(document.getElementById('divText').textContent); 
```

在较旧的浏览器中，您需要遍历 DOM`.childNodes`并测试一个节点是否具有`nodeType === 3`（那么它是一个文本节点）或`nodeType === 1`（它也是一个您需要递归遍历的元素）。

当您需要过滤仅空白节点时，您还需要最后一个解决方案，例如标签之间的换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:54:11.987

你反对使用 jQuery 吗？($('body').text()) 如果你这样做可能会解决你的问题

# java - java 日志文件中的这个数字是多少？

> ID：13033142
> 
> 赞同：0
> 
> 时间：2012-10-23T14:47:05.303
> 
> 标签：java, multithreading

我的日志文件开头有一个数字：

```
[10/17/12 17:44:03:341 CDT] 00000066 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [WC]..... 
```

我不知道它是什么，或者这是否足以让任何人知道它是什么。我的目标是在代码中获取这个数字，以便在某处使用。这不是线程ID，我试过：

```
Thread.currentThread().getId() 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:50:17.533

如果您使用 log4j，您可以在此处了解有关消息的新信息 - [http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)或者只需查找您在 google 中使用的日志消息结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:19:01.417

这个 8 位数字似乎是特定于 WebSphere 日志的。它们可能对应于此页面上的错误代码：http: [//publib.boulder.ibm.com/infocenter/tsminfo/v6/index.jsp ?topic=%2Fcom.ibm.itsm.tshoot.doc%2Fr_pdg_retcodes.html](http://publib.boulder.ibm.com/infocenter/tsminfo/v6/index.jsp?topic=%2Fcom.ibm.itsm.tshoot.doc%2Fr_pdg_retcodes.html)

在这种情况下，00000066 将是密钥文件 i/o 错误。

或者，它可能是一个行号。这是放置行号的一个相当合乎逻辑的地方。我搜索了其他类似的 8 位代码，其中一些与上述错误代码不对应。

# php - 使用php从大文本中获取多个信息到数组中

> ID：13033148
> 
> 赞同：0
> 
> 时间：2012-10-23T14:47:28.273
> 
> 标签：php, split, explode

任何人都可以在以下方面提供帮助。我在 mysql 表中有一个“注释”字段，但需要将其分隔到一个新表中。

注释目前采用以下格式：

> 由 username1 添加于 22/10/2012 3:50pm
> 
> 笔记在这里
> 
> 由 username2 添加于 20/10/2012 12:29pm
> 
> 注释在这里等等

这里有 2 个注释作为示例。我怎样才能把它变成一个数组：

```
[0] => Array(
        [0] username1
        [1] 22/10/2012 3:50pm
        [2] Note1
    )
[1] => Array(
        [0] username2
        [1] 20/10/2012 12:29pm
        [2] Note2
    ) 
```

我尝试使用 preg_split 但它只返回注释如果被“在日期时间由用户名添加”分割，因为我不能单独使用“添加者”来分割它，因为注释本身可能包含“添加者”

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:05:29.773

试试这个

```
// Get the data from the database
$myData = $row['notes'];

// Split this into an array
$data = explode("\r\n", $myData);

// $data has each line as an element of the array
$key   = -1;
$final = array();
foreach ($data as $element)
{
    // Check if this is the first row
    if (strpos($element, "Added by") > 0)
    {
        $key = $key + 1;
        // This is the first header row. Get the info from it
        $tmp   = str_replace("Added by", "", $element);
        $parts = explode(" on ", $tmp)

        // Add them to the final array
        // Username
        $final[$key][0] = trim($parts[0]);
        // Date
        $final[$key][1] = trim($parts[1]);

        // Initialize the note element
        $final[$key][2] = '';
    }
    else
    {
        // We don't have the 'Added On' so add this as a note.
        $final[$key][2] .= $element;
    }
} 
```

这应该为您提供工作的基础。您还可以检查注释元素中的空行`$final[$key][2] .= $element;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:04:20.960

可能你最好的选择是将该字段吞入一组行，然后遍历每一行。如果您点击一个看起来像该`Added`行的记录，那么您就有了一条新记录，那么后续的每一行都是注释的一部分......直到您点击另一个添加的行。

例如

```
$lines = array(... your monolithic text here ...);
$idx = 0;
$notes = array();
foreach($lines as $line) {
   if (preg_match('/^Added by (.*?) on (.*?)$/', $matches)) {
        $notes[$idx] = array(
             0 => $matches[1], // username
             1 => $matches[2], // date/time
             2 => '' // note text
        )
        continue;
   }
   $notes[$idx[2]] .= $line;
} 
```

# javascript - 清除 setTimeout 的数组

> ID：13033149
> 
> 赞同：7
> 
> 时间：2012-10-23T14:47:35.553
> 
> 标签：javascript, jquery, tooltip

好的，所以我在我的 AJAX 应用程序中有一个功能，它会在一定时间后在角落里粘贴一个工具提示，以帮助提示用户他们正在做什么。如果用户单击其他地方，还有第二个功能可以清除超时，因为该工具提示将不再相关。

我现在开始遇到在超时时设置多个工具提示的问题，设置它们很好，但如果用户继续前进，我找不到取消它们的有效方法。

目前我的代码看起来像这样

```
var tuttimer = new Array();

function showtooltip(uniqueid, delay){
    tuttimer[uniqueid] = setTimeout(function(){
        //Create tooltip code here
    },delay);
}

function clearTuttimer(){
    if(typeof tuttimer != 'undefined'){
        for (var i = 0; i < tuttimer.length; i++) {
            clearTimeout(tuttimer[i]);
        }
    }
} 
```

因此，该`tuttimer`数组是在页面加载时创建的，然后每当用户执行某些操作时，都会`showtooltip()`调用工具提示来显示该函数，并被赋予唯一的 ID 和延迟时间。

但是，如果用户要继续做其他事情，它会调用该函数`clearTuttimer()`来检查数组是否存在，然后循环并清除每个单独的超时。

但是，这是行不通的。希望有人能指出我正确的方向。非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T14:51:01.180

如果你使用数组，那么使用`Array.push`方法。

```
var tuttimer = [];

function showtooltip(delay){
    tuttimer.push(setTimeout(function(){
        //Create tooltip code here
    },delay));
}

function clearTuttimer(){
    for (var i = 0; i < tuttimer.length; i++) {
        clearTimeout(tuttimer[i]);
    }
} 
```

如果要使用`uniqueid`，请使用对象而不是数组。

```
var tuttimer = {};

function showtooltip(uniqueid, delay){
    tuttimer[uniqueid] = setTimeout(function(){
        //Create tooltip code here
    },delay);
}

function clearTuttimer(){
    for (var k in tuttimer) {
        clearTimeout(tuttimer[k]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:52:05.787

像往常一样，只是输入问题就让我看到了我的方式的错误。

问题来自我将数组关键字设置为某个预定义的值，然后当我循环时我正在寻找数字键。为了克服这个我修改了

```
function showtooltip(uniqueid, delay){
    tuttimer[uniqueid] = setTimeout(function(){
        //Create tooltip code here
    },delay);
} 
```

成为

```
function showtooltip(uniqueid, delay){
    tuttimer.push(setTimeout(function(){
        //Create tooltip code here
    },delay));
} 
```

# javascript - 压缩和解压 Stack Overflow 主页 HTML

> ID：13033161
> 
> 赞同：0
> 
> 时间：2012-10-23T14:48:02.517
> 
> 标签：javascript, ruby, encoding, character-encoding, compression

我正在尝试用 JavaScript 压缩 HTML 并用 Ruby 解压缩它。然而，一些carachter 没有得到正确处理，我正在寻找一种方法来解决这个问题。

[我的压缩函数首先使用此函数](https://gist.github.com/3939036)将 html 转换为字节数组。[然后它使用js-deflate 库](https://github.com/dankogai/js-deflate/blob/master/rawdeflate.js)压缩数组。[最后，使用window.btoa()](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)对输出进行 base64 编码。

```
var compress = function(htmlString) {
  var compressed, originalBytes;

  originalBytes = Utils.stringToByteArray(htmlString);
  compressed = RawDeflate.deflate(originalBytes.join(''));
  return window.btoa(compressed);
}; 
```

在 Ruby 方面，我有一个`Decompression`类，它首先对压缩的 html 进行 base64 解码。然后它使用 Ruby`Zlib`标准库来解压缩 html。[此Stack Overflow 问题线程](https://stackoverflow.com/q/1361892/574190)中描述了此过程。

```
require "base64"
require "zlib"

class Decompression
  def self.decompress(string)
    decoded = Base64.decode64(string)
    inflate(decoded)
  end

private

  def self.inflate(string)
    zstream = Zlib::Inflate.new(-Zlib::MAX_WBITS)
    buf = zstream.inflate(string)
    zstream.finish
    zstream.close
    buf
  end
end 
```

我正在使用这个类来膨胀压缩的 html，它被发送到本地服务器，并将其写入文件。

```
decompressed_content = Decompression.decompress(params["compressed_content"])
File.write('decompressed.html', decompressed_content) 
```

然后我在浏览器中打开文件，看看它是否正确。

在大多数情况下，这工作正常。我可以处理 Stack Overflow 主页，结果如下：

![已处理的 Stack Overflow 主页](../Images/a7a3acdb6a3dc3679583b1595ecb4df5.png)

你可以看到有一些问题。有些字符没有正确显示，最明显的是标题中我名字旁边的向下箭头

![向下箭头](../Images/0c2fb9b0f28bdd7ca2710a042b565f09.png)

以及最近标签列表中的乘号

![最近的标签列表](../Images/50cc64f985de000a0a92a08e20187b66.png)

**如何修复我的代码以便正确处理页面的这些部分？**

我试图强制对膨胀的 html 进行编码，`UTF-8`但它并没有改变任何东西。

```
 def self.decompress(string)
    decoded = Base64.decode64(string)
    # Forcing the encoding of the output doesn't do anything.
    inflate(decoded).force_encoding('UTF-8')
  end

  def self.decompress(string)
    decoded = Base64.decode64(string)
    # Either does forcing the encoding of the inflate input.
    inflate(decoded.force_encoding('UTF-8'))
  end 
```

一个关键是字符串的编码似乎在`ASCII-8BIT`经过 Base64 解码后更改为：

```
def self.decompress(string)
  p "Before decode: #{string.encoding}"
  decoded = Base64.decode64(string)
  p "After decode: #{decoded.encoding}"
  inflated = inflate(decoded)
  p "After inflate: #{inflated.encoding}"
  inflated
end

# Before decode: UTF-8
# After decode: ASCII-8BIT
# After inflate: ASCII-8BIT 
```

**编辑**

有人首先询问我用来获取 html 的方法。我只是用 jQuery 把它从页面上拉下来：

```
$('html')[0].outerHTML 
```

**编辑以显示将`Content-Type`元标记添加到膨胀的 html 的效果**

我添加`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`到膨胀的 html 中。我现在得到这样的问号框（顺便说一下 Chrome 浏览器）：

![问号框](../Images/ccf8d74250b968a4266d1991d13e9bf0.png).

如果我检查我的膨胀 html 的来源并将其与实际 Stack Overflow html 的来源进行比较，我可以看到我的名字旁边的倒三角形使用了不同的字符。

**实际 SO 来源：** `<span class="profile-triangle">&#9662;</span>`
**没有元 Content-Type 的** `<span class="profile-triangle">¾</span>`
**膨胀源：具有元 Content-Type 的膨胀源：** `<span class="profile-triangle">�&lt;/span>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:49:58.503

尝试将 UTF8 编码添加到您获得的 HTML 中。像

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" charset="UTF-8" /> 
```

我建议这样做是因为我实际上无法在源代码中看到它（同一页面上的 ctrl+u）。

编辑：原来你错过了字符集！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T17:37:24.763

通常，HTML 的内容类型由 HTTP 标头和 HTML 代码本身决定。如果只发送 HTML 代码，HTTP 标头信息会丢失。

查看 StackOverflow 发送的 HTTP 标头：

```
Cache-Control:public, max-age=60
Content-Encoding:gzip
Content-Length:33200
Content-Type:text/html; charset=utf-8
Date:Tue, 23 Oct 2012 17:35:02 GMT
Expires:Tue, 23 Oct 2012 17:36:02 GMT
Last-Modified:Tue, 23 Oct 2012 17:35:02 GMT
Vary:* 
```

如您所见， Content-type 被指定为 is `utf-8`。如果创建文件，则需要使用 HEAD 中的 HTML 标记手动设置内容类型，正如@alexandernst 所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:21:15.080

[alexandernst](https://stackoverflow.com/users/940158/alexandernst)是在正确的轨道上，但我实际上需要添加到 HTML 输出的是元字符集标签：

```
<meta charset="UTF-8"> 
```

一旦我将它放入 Stack Overflow 主页的 HTML 输出中，它看起来就完美了。

# objective-c - dispatch_queue_t SerialQueue 如何检查是否仍在运行。ios GCD

> ID：13033165
> 
> 赞同：1
> 
> 时间：2012-10-23T14:48:15.163
> 
> 标签：objective-c, ios, grand-central-dispatch

我需要进行验证，为此我需要知道任务是否仍在运行我使用此代码启动任务

```
 ` SerialQueue = dispatch_queue_create("miColaEnSerie", NULL);
       dispatch_async(SerialQueue, ^{
    [self loadImageFriend:init finalWhitNumber:final img1WithArray:infoImages1 img2WithArray:infoImages2 img3WithArray:infoImages3];
    });` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:58:31.970

如果您的 SerialQueue 中一次只有一个任务，那么您可以将原子属性添加到类中，例如：

```
@property (assign) BOOL isSerialQueueRunning; 
```

然后：

```
 isSerialQueueRunning = YES;
 dispatch_async(SerialQueue, ^{
    [self loadImageFriend:init finalWhitNumber:final img1WithArray:infoImages1 img2WithArray:infoImages2 img3WithArray:infoImages3];
    isSerialQueueRunning= NO;
 }); 
```

但是，如果您向 SerialQueue 添加了更多任务，则可以相应地更改`BOOL isSerialQueueRunning`并`NSInteger serialQueueTasks`增加/减少它。然后验证它是否为 0，这意味着目前队列中没有任何内容。

有时最好实现通知以在任务完成后获取信息并在此之后执行一些操作。

# java - Joda-Time - 如何找到“每月的第二个星期四”

> ID：13033167
> 
> 赞同：2
> 
> 时间：2012-10-23T14:48:20.840
> 
> 标签：java, jodatime

我没有看到将日期设置为一个月中某一周的某一天的好方法。 [Joda-Time](http://www.joda.org/joda-time/)的[LocalDate](http://www.joda.org/joda-time/apidocs/org/joda/time/LocalDate.html)没有 withWeekOfMonth 方法。我可以看到一个可能的算法，但它似乎很复杂，所以我假设我错过了一些东西。我需要确定某人下一次付款的日期。如果他们在每月的第二个星期四支付，那是什么日期。

有人已经解决了这个问题吗？

好的，我能够想出这个，这似乎工作正常。

```
/**  
 * Finds a date such as 2nd Tuesday of a month.  
 */  
public static LocalDate calcDayOfWeekOfMonth( final DayOfWeek pDayOfWeek, final int pWeekOfMonth, final LocalDate pStartDate )  
{  
    LocalDate result = pStartDate;  
    int month = result.getMonthOfYear();  
    result = result.withDayOfMonth( 1 );  
    result = result.withDayOfWeek( pDayOfWeek.ordinal() );  
    if ( result.getMonthOfYear() != month )  
    {  
        result = result.plusWeeks( 1 );  
    }  
    result = result.plusWeeks( pWeekOfMonth - 1 );  
    return result;  
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:19:47.723

我个人不知道有什么超级简单的方法，这就是我用来获取它的方法：

```
/**
 * Calculates the nth occurrence of a day of the week, for a given month and
 * year.
 * 
 * @param dayOfWeek
 *            The day of the week to calculate the day for (In the range of
 *            [1,7], where 1 is Monday.
 * @param month
 *            The month to calculate the day for.
 * @param year
 *            The year to calculate the day for.
 * @param n
 *            The occurrence of the weekday to calculate. (ie. 1st, 2nd,
 *            3rd)
 * @return A {@link LocalDate} with the nth occurrence of the day of week,
 *         for the given month and year.
 */
public static LocalDate nthWeekdayOfMonth(int dayOfWeek, int month, int year, int n) {
    LocalDate start = new LocalDate(year, month, 1);
    LocalDate date = start.withDayOfWeek(dayOfWeek);
    return (date.isBefore(start)) ? date.plusWeeks(n) : date.plusWeeks(n - 1);
} 
```

例子：

```
System.out.println(nthWeekdayOfMonth(4, 1, 2012, 2)); 
```

输出：

```
2012-01-12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-26T21:00:02.817

## 使用 Java-8 `java.time`API的解决方案

使用 Java 的[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html)，您可以将[`TemporalAdjusters#dayOfWeekInMonth`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html#dayOfWeekInMonth-int-java.time.DayOfWeek-)其作为参数传递[`LocalDate#with`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#with-java.time.temporal.TemporalAdjuster-)来实现此目的。

```
import java.time.DayOfWeek;
import java.time.LocalDate;
import java.time.temporal.TemporalAdjusters;

public class Main {
    public static void main(String[] args) {
        // Test with today's date, 26-Dec-2020
        System.out.println(
            localDateOnNthDayOfWeekOfMonth(DayOfWeek.THURSDAY, 2, LocalDate.now())
        );
    }

    public static LocalDate localDateOnNthDayOfWeekOfMonth
    (
        final DayOfWeek dayOfWeek, 
        final int ordinal,
        final LocalDate startDate
    ) {
        return startDate.with(
            TemporalAdjusters.dayOfWeekInMonth(ordinal, dayOfWeek)
        );
    }
} 
```

**输出：**

```
2020-12-10 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解 Java-8 日期时间 API 。

**Java 6 或 7 用户的注意事项：**

出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目工作并且您的 Android API 级别仍然不兼容 Java-8，请通过脱糖和[How to use ThreeTenABP in Android Project检查](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)[可用的 Java 8+ API](https://developer.android.com/studio/write/java8-support-table)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-26T20:44:13.190

示例如何检测第二个星期一

```
val DateTime.is2ndMonday
    get() = dayOfWeek == 1 && dayOfMonth > 7 
```

# android - 将二维字符串数组传递给新活动

> ID：13033169
> 
> 赞同：0
> 
> 时间：2012-10-23T14:48:32.657
> 
> 标签：android, android-intent, multidimensional-array, android-activity

> **可能重复：**
> [如何从一个活动获取二维字符串数组到另一个活动](https://stackoverflow.com/questions/8664370/how-to-get-two-dimensional-string-array-from-one-activity-to-other)

我有一个像这样的二维字符串数组

```
String[][] ContactList = new String[][]
        {
        { "a", 123 },
        { "b", 123 },
        { "c", 123 },
        { "d", 123 } }; 
```

如何将此数组传递给另一个活动？？？

然后在那个活动中，我怎样才能检索这个数组？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:52:31.807

您可以使用`Bundle`：

```
bundleInstance.putSerializable("ContactList ", ContactList); 
```

要检索它：

```
String[][] ContactList = (String[][]) bundleInstance.getSerializable("ContactList "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:56:12.280

您可以在 labeeb 提供的 bundle put parceable 数组列表中创建一个 bundle 并设置为 intent 这里是代码

```
Intent i = new Intent(this,name.class);
 Bundle b = new Bundle();
b.putIntegerArrayListExtra(String name, ArrayList<Integer> value);
//b.putParcelableArrayListExtra(String name, ArrayList<? extends Parcelable> value);
//b.putStringArrayListExtra(String name, ArrayList<String> value);
i.putExtra(String name,b);
startActivity(i); 
```

并将数据获取到另一个活动中，例如

```
//pseudo code
Bundle b = getIntent().getExtra().putParcelableArrayListExtra(String name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:59:11.107

我通常将它序列化为一个简单的字符串对象，例如“a:123;b:123;c:123;d:123”，然后在其他活动中反序列化它。取决于您拥有的行数，但这是通过它的快速简便的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:52:41.977

```
Intent intent = new Intent(/* ... */);

int i = 0;
for (String[] arr : contactList) {
  intent.putExtra("StringArray#" + i, arr);
  ++i;
}
intent.putExtra("StringArrayCount", i); 
```

在另一个活动中，您将从读取计数开始，然后使用`getStringArrayExtra`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:02:57.720

在这种情况下，为什么不使用 Hashmap 和 ArrayList？

```
ArrayList<HashMap<String,String>> 
```

然后使用 put 添加数据并使用 get 获取数据

# .net - 在 Json.NET 中查找任何节点

> ID：13033174
> 
> 赞同：10
> 
> 时间：2012-10-23T14:48:42.420
> 
> 标签：.net, json, json.net

我正在使用 NewtonSoft Json.NET 库来解析 .NET 应用程序中的 JSON 文件。我需要做的是传递一个节点的名称，如果它存在则获取该节点，而不管它们的级别是事先未知的。

例如在一个文件中：

```
string json = @"{
  ""Name"": ""Apple"",
  ""Expiry"": new Date(1230422400000),
  ""Price"": 3.99,
  ""ATest"": {
    ""MyTest"":
    [
       ""blah"",
       ""blah""
    ]
  }
}"; 
```

有没有办法只使用该值`"MyTest"`来获取该节点而不必知道父级的名称`jObject["ATest"]["MyTest"][0]`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T16:08:19.147

`JToken`AFAIK 对于/没有类似 XPath 的查询语法`JObject`，但您可以相当轻松地制作一个 - 请参见下面的代码。

```
public static class StackOverflow_13033174
{
    public static void Test()
    {
        string json = @"{ 
                          ""Name"": ""Apple"", 
                          ""Expiry"": new Date(1230422400000), 
                          ""Price"": 3.99, 
                          ""ATest"": { 
                            ""MyTest"": 
                            [ 
                               ""blah"", 
                               ""blah"" 
                            ] 
                          } 
                        }";

        JObject jo = JObject.Parse(json);
        JToken myTest = jo.Descendants()
            .Where(t => t.Type == JTokenType.Property && ((JProperty)t).Name == "MyTest")
            .Select(p => ((JProperty)p).Value)
            .FirstOrDefault();
        Console.WriteLine(myTest);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-24T16:33:50.553

这是使用[JSONPath](https://www.newtonsoft.com/json/help/html/QueryJsonSelectTokenJsonPath.htm)的另一种方法：

见：[https ://dotnetfiddle.net/EIKjnH](https://dotnetfiddle.net/EIKjnH)

```
using System;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.Collections.Generic;
using System.Linq;

public static class StackOverflow_13033174
{
    public static void Main()
    {
    string json = @"{ 
                      ""Name"": ""Apple"", 
                      ""Expiry"": new Date(1230422400000), 
                      ""Price"": 3.99, 
                      ""ATest"": { 
                        ""MyTest"": 
                        [ 
                           ""blah"", 
                           ""blah"" 
                        ] 
                      } 
                    }";

    JObject jo = JObject.Parse(json);

    JToken myTest = jo.SelectToken("*.MyTest");
    Console.WriteLine(myTest);
    }
} 
```

# javascript - 直接在 HTML 中和通过 JavaScript 与输入字段的设置值不一致

> ID：13033175
> 
> 赞同：0
> 
> 时间：2012-10-23T14:48:44.777
> 
> 标签：javascript

直接在 HTML 中和通过 JavaScript 与输入字段的设置值不一致。

这是示例：

```
 <!DOCTYPE html>
   <html>
   <body>
   <input type="text" id="f1" ><br>
   <input type="text" id="f2"  value="123&apos;134"><br>
   <input type="text" id="f3" ><br>
   <input type="text" id="f4" value="123\'134"><br>
   </body>
   </html>​ 
```

* * *

```
document.getElementById('f1').value = "123&apos;134";
document.getElementById('f3').value = "123\'134";​ 
```

在这里运行

[http://jsfiddle.net/UfaJk/2/](http://jsfiddle.net/UfaJk/2/)

当我在 HTML 中设置属性值时，HTML 实体很好，转义字符不是，当通过 JavaScript 设置时，都是向后的......

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:54:46.850

HTML 被解析为 HTML，它有特定的转义规则，例如字符串`&apos;`应该被解释为撇号`'`字符。

同样，javascript 有自己的（和不同的）转义规则，例如字符串`\'`应该被解释为撇号`'`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:56:24.987

反斜杠是 javascipt 中的转义字符，为了输出反斜杠文字，您需要为要输出的每个反斜杠设置两个反斜杠。例如：

```
 document.getElementById('f3').value = "123\\'134";​ 
```

希望这可以帮助。

# java - 如果在 java 中无效，我需要验证用户输入并让用户重新输入

> ID：13033178
> 
> 赞同：0
> 
> 时间：2012-10-23T14:48:49.173
> 
> 标签：java, validation, try-catch

我必须验证我的用户输入是否为整数值，并在输入无效值时提示用户重新输入。到目前为止，我已经把这个方法放在了下面。我相信逻辑是正确的，但我需要让用户在出现错误消息后再次重新输入。

```
void validateItemquantity() {
    boolean error = true;
    while (error) {
        try{ 
            Integer.parseInt(itemQuantityinput.getText());
            error = false; 
        }
        catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(null, "Item quantity must be a positive number, please reenter");
            error = true; 
        }
    }
} 
```

jframe方法的部分代码：

```
private void bnPurchaseActionPerformed(java.awt.event.ActionEvent evt) {                                           

        String itemCode; 
        int itemQuantity, itemPrice, itemCost, totalCost ;

        validateItemquantity();
        itemCode = itemCodeinput.getText();
        itemQuantity = Integer.parseInt(itemQuantityinput.getText());
        itemPrice = catalog.searchCatalog(itemCode);
        itemCost = payment.calculateItemcost(itemQuantity,itemPrice);
        totalCost = payment.calculateTotalcost(itemCost); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:57:25.357

该`validateItemquantity()`方法应根据输入是否有效返回真或假。

您可以在调用它的函数中处理真假情况。要接受输入，您可能会显示一个输入对话框。

```
String text = JOptionPane.showInputDialog ("Enter New Value")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:06:54.083

如果用户输入了错误的值，您的方法将无限循环。如果该方法不等待 JOptionPane 关闭，您将面临无法估量的对话框弹出窗口。

在任何情况下，您都应该让该方法返回一个布尔值，如果成功，则在您的程序中更改某种“状态”、另一种布尔值或某种其他类型的状态变量。

如果不是，您可以让您的状态“循环”回到用户必须输入数字然后让他重新启动验证过程的点，但在我看来，您不应该自行重新启动验证过程失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:59:44.340

我认为循环应该在调用方法中。

```
boolean validateItemquantity() {
    try{ 
        Integer.parseInt(itemQuantityinput.getText());
        return true; 
    }
    catch (NumberFormatException e) {
        JOptionPane.showMessageDialog(null, "Item quantity must be a positive number, please reenter");
        error = false; 
    }
} 
```

调用部分应该是这样的

```
while(!validateItemquantity()) 
```

# jquery - 使用 jQuery 根据 iPad 方向显示不同的文本

> ID：13033184
> 
> 赞同：0
> 
> 时间：2012-10-23T14:49:02.467
> 
> 标签：jquery, custom-data-attribute

我只想在纵向模式下在 iPad 上显示不同的文本。

使用数据属性，我可以存储纵向文本，但如何检测方向变化并在 iPad 上应用文本？

我的标记目前看起来像这样；

```
<h2 class="searchLink" data-landscape="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam" data-portrait="Lorem ipsum dolor sit amet, consectetur.">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam</h2> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:52:02.633

听说过`media queries?`你不需要 jQuery，你可以使用`CSS`.

以[本](http://webdesignerwall.com/tutorials/css3-media-queries)教程为例：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:58:54.433

您可以绑定到[orientationChange 事件](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)。因此，如果您使用的是 jQuery/zepto.js（其他 DOM 库可用等），您可以这样做

```
$(window).bind('orientationchange', function() {
    //call your text swapping fn here
  }); 
```

Mobile Safari 还公开`window.orientation`了它返回一个表示当前方向的整数（可能的值是 0,90,180,-90）。然后，您可以在 fn 中检查以决定显示哪些文本。

您可能需要将所有这些包装在`if(window.orientation)`条件中以避免在不支持的浏览器中出现错误。

# java-io - Java IO：未生成文件

> ID：13033186
> 
> 赞同：0
> 
> 时间：2012-10-23T14:49:09.500
> 
> 标签：java-io, filewriter

当我尝试生成文件以便写入时，我遇到了问题。我没有得到任何异常，系统输出也显示了，但是没有生成文件..有什么我看不到的..？这是类，它可以做所有事情：

```
public class GraphMLWriter {

public FileWriter writer;
public File file;

private static GraphMLWriter instance;

private GraphMLWriter() {
    initFile();
}

public void initFile() {
    file = new File("myFile.txt");

    try {
        writer = new FileWriter(file, true);
                    System.out.println("File erzeugt");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void writeToFile() {
    try {
        writer.write("tolltoll");
        writer.write(System.getProperty("line.separator"));
        writer.write("es klappt");
        writer.flush();
        writer.close();
        System.out.println("File geschrieben");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static synchronized GraphMLWriter getInstance() {
    if (instance == null) {
        instance = new GraphMLWriter();
    }
    return instance;
}
} 
```

它是这样调用的：

```
writer = GraphMLWriter.getInstance();
writer.writeToFile(); 
```

对于上下文：我有一个连接到数据库的 Spring 3 应用程序，我想将结果集写入生成的 xml 文件！我刚刚从另一个可以正常工作的应用程序中复制了代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-06T04:14:38.213

尝试在代码中提供完整路径，如“C:\Users\DELL\Desktop\myfile.txt”

```
File file=new File("C:\Users\DELL\Desktop\myfile.txt"); 
```

# xml - XML UTF-8 编码什么是表示非 ascii 数据的正确方法

> ID：13033193
> 
> 赞同：1
> 
> 时间：2012-10-23T14:49:46.053
> 
> 标签：xml, xml-parsing

当数据具有非 ascii 字符时，表示 XML 数据的正确方法是什么。以下是 2 个选项，这是正确且有效的选项。

选项1： `<?xml version="1.0" encoding="UTF-8"?>`
`<name>Doña</name>`

选项 2： `<?xml version="1.0" encoding="UTF-8"?>`
`<name>Do&#xf1;a</name>`

F1 是 UTF-8 中 ñ 的 unicode 十六进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:59:50.477

基本上它们都是等价的和正确的。您甚至可以选择`&#241;`十进制[Unicode 代码点](http://codepoints.net/U+00F1)。

这主要取决于您的工具需要什么。如果您的工具链中有一个步骤需要纯 ASCII，请使用选项 2。如果人们在编辑器中查看您的 XML，或者文件大小有问题，请使用选项 1。如今，大多数 XML 传播者在大多数情况下都倾向于选项 1案例。

请注意，XML 工具可以在这些表示之间自由转换。这意味着，您永远不应该相信您的 XML 会以一种或另一种方式呈现。处理 XML 输入时，您必须同时支持这两个选项。

# objective-c - 带有变音符号的 iOS HttpRequest 长度不正确

> ID：13033197
> 
> 赞同：0
> 
> 时间：2012-10-23T14:50:06.817
> 
> 标签：objective-c, ios, encoding, http-headers, diacritics

在 iOS 中，我正在构建一个 http 请求，如下所示：

```
NSURL* url = [ NSURL URLWithString:[ NSString stringWithFormat: @"%@%@", [ HPSWebService getBaseURL ], @"Sync/PushObject"] ];

        // 'request' is defined within the base class and is set here to the class-specific server url
        request = [[NSMutableURLRequest alloc] initWithURL:url];

        NSString* jsonRequest = [NSString stringWithFormat: @"{\"collection\":\"responses\",\"id\":\"%@\",\"objectjson\":%@}",response.id,response.json];

        NSLog(@"HPSPushResponsesWebService jsonRequest = %@",jsonRequest);

        NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

        [request setHTTPMethod:@"POST"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request setValue:self.contentEncoding forHTTPHeaderField:@"Content-Type"];
        [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
        [request setHTTPBody: requestData]; 
```

NSLog 输出如下：

2012-10-23 15:45:51.543 HPS[12523:707] HPSPushResponsesWebService jsonRequest = {"collection":"responses","id":"ZBZiaa43QciMSlMCp0Vtyw==","objectjson":{"_id":"{ \ "$binary\" : \"ZBZiaa43QciMSlMCp0Vtyw==\", \"$type\" : \"03\" }","_user":"Eddie Freshman","_lastmodifieddatelocalutc":"2012-10-23 14: 45:39","Fav Car":["Other:Me√´zoom"],"_formid":"{ \"$binary\" : \"OCDI9VNGStmN8GbOLSevtA==\", \"$type\" : \ "03\" }","是否需要跟进？":[],"_contactid":"{ \"$binary\" : \"+3144XhxQzCNzWKfqXCHyg==\", \"$type\" : \"03 \" }"}}

在 JSON 数据包含特殊字符（例如变音符号）之前，一切正常。发生这种情况时，内容长度实际上比应有的少 1 个字符。在示例中，umlat (e) 字符已转换为 √´（靠近 Fav Car 字符串）

我应该如何编码，以便在 http 请求中正确设置内容长度？

谢谢

# testcomplete - 使用 TestComplete 回复电子邮件

> ID：13033204
> 
> 赞同：4
> 
> 时间：2012-10-23T14:50:31.893
> 
> 标签：testcomplete

我正在努力寻找一种简单的方法来使用 TestComplete 回复收件箱中的电子邮件。

目前我正在使用的代码可以在这里[http://support.smartbear.com/viewarticle/9022/](http://support.smartbear.com/viewarticle/9022/)在 JScript 部分下找到。

我已经设法根据正文和主题创建并发送一封电子邮件以模拟回复。然而，这还不够，因为我正在测试的软件需要有一个真正的回复才能将其链接到之前发送的消息，以将其放置在正确的用户邮箱中。

任何帮助将不胜感激。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:44:18.997

您应该能够做到这一点，而不会出现通过 COM 使用 Outlook 的问题。我已经修改了您提到的文章中的示例，以演示如何执行此操作。

```
function Test()
{
  Log.Message(replyToMessage2010("account name", "sender email", "Test 1234321", "This is a reply"));
}

function replyToMessage2010(accountName, senderEMail, eMailSubject, replyText)
{
  var OutlookApplication = Sys.OleObject("Outlook.Application"); 
  var NamespaceMAPI = OutlookApplication.GetNamespace("MAPI"); 

  // Check whether the specified account exists:
  if (NamespaceMAPI.Accounts.Item(accountName) != null)
  {
    NamespaceMAPI.SendAndReceive(false);

    // Get the "Inbox" folder
    var inbox = NamespaceMAPI.Folders(accountName).Folders("Inbox");
    var items = inbox.Items;
    for (var i = 1; i < items.Count + 1; i++)
    {
      if (items.Item(i).Subject == eMailSubject && 
        items.Item(i).SenderEmailAddress == senderEMail && items.Item(i).UnRead)
      {
        var reply = items.Item(i).ReplyAll();
        reply.Body = replyText + reply.Body;
        reply.Send(); 
        return true;
      }   
    }
    return false;
  } else
  {
    OutlookApplication.Quit();
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:37:30.770

我找到了答案。我认为 MailItem.Reply() 方法会发送电子邮件，这实在是太愚蠢了。但是我发现它必须使用 MailItem.Send() 显式发送。

这是我的代码：

```
//Creates a reply MailItem
var replyEmail = currentEmail.Reply();
//Creates a variable on the reply email's body
var body = replyEmail.Body; 
//Additional text to add
var additionaltext = "Reply to Email Message.\n"; 
//Start position for insert
var startpos = 0; 
//Inserts additional text to the beginning of the message
var fullBody = aqString["Insert"](body, additionaltext, startpos);
//Applies the new body to the reply email
replyEmail.Body = fullBody;
//Sends the new reply
replyEmail.Send(); 
```

拥有新正文的原因是因为否则会发送空白响应。

# android - Android地图键不工作空瓷砖

> ID：13033206
> 
> 赞同：1
> 
> 时间：2012-10-23T14:50:40.887
> 
> 标签：android, google-maps, api-key

> **可能重复：**
> [Android 中的 Google 地图签名 api 密钥错误](https://stackoverflow.com/questions/7296467/google-map-signed-api-key-errors-in-android)

我真的尝试了我能找到的所有可能的解决方案。我几乎要拔掉我所有的头发，做我以前做过一百万次的事情，但不管我尝试什么，它都不起作用！在设备上运行导出的 .apk 时，我收到以下日志：

```
10-23 16:39:31.504: W/System.err(14068): IOException processing: 26
10-23 16:39:31.504: W/System.err(14068): java.io.IOException: Server returned: 3
10-23 16:39:31.504: W/System.err(14068):    at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
10-23 16:39:31.504: W/System.err(14068):    at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
10-23 16:39:31.504: W/System.err(14068):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
10-23 16:39:31.504: W/System.err(14068):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
10-23 16:39:31.504: W/System.err(14068):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
10-23 16:39:31.504: W/System.err(14068):    at java.lang.Thread.run(Thread.java:1027) 
```

我做了以下事情（和其他许多人一样）：

1.  创建了一个新证书（直接在终端中，也来自 Eclipse）
2.  生成 MD5 并粘贴到 google api 密钥网页中（使用我自己的和实际的发布者 google 帐户，没关系
3.  在布局 xml 文件中使用了地图视图的 api 键
4.  设置 debuggable = false
5.  包括应用程序标签内的库
6.  添加了所有必要的权限
7.  检查地图应用程序是否正常工作

在调试模式下运行时一切正常，那么在导出过程中我缺少什么？我选择项目，密钥库文件，输入密码并保存文件。而已！（这就是我一直在做的事情，而且以前也一直有效）

真的，我已经尝试了我找到的所有东西，但我仍然收到上面的错误！现在，根据您的经验：什么可能的设置会导致上述错误如此一致？

当然，它在某种程度上是密钥库文件/api 密钥，但是我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:59:42.010

看起来像这样： [Google map signed api key errors in Android](https://stackoverflow.com/questions/7296467/google-map-signed-api-key-errors-in-android)

是您面临的完全相同的问题。它说

> 可调试 = 假

设置，您需要从商店安装您的 apk。只有在这种情况下，才会显示瓷砖。这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:23:46.830

这确实是一个与密钥库相关的问题。这是我解决我的问题的方法。

albrechtATnetzfactor 指出了将应用程序发布到 GPlay 的正确解决方案，但我想发布一个 BETA。

只需在导出 APK 以进行 BETA 测试时选择 debug.keystore 并设置 debuggable=true。

我花了整个下午在这上面，每天都更讨厌Android......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:56:14.360

您是否将`Map key`获得的证书与您签署的应用程序一起签署？

# php - .htaccess 重写不适用于所有 URL

> ID：13033210
> 
> 赞同：0
> 
> 时间：2012-10-23T14:51:05.510
> 
> 标签：php, .htaccess, url, mod-rewrite, url-rewriting

我正在开发一个网站，我正在尝试重写 URL 以使它们看起来更漂亮并更易于访问。

首先，在 PHP 中，我使用 rawurlencode 和 rawurldecode 来清理 URL。

接下来，在我的 .htaccess 文件中，这是我正在使用的 RewriteRule：

```
RewriteRule ^(/(/[^/]*/?)?)?([^/]+[a-zA-Z0-9])/(albums)/(.*)$ /name.php?name=$3&page=photos&album=$5 [L] 
```

首先，这与我尝试过的所有内容都完美匹配，除了一个 URL，我还不太清楚为什么。

有问题的 URL 是：[https ://domain.com/name/albums/album%3B.%2F](https://domain.com/name/albums/album%3B.%2F)

现在我在我的 .htaccess 中设置了一个 ErrorDocument，它甚至没有进入该文档，它通常会这样做。404 错误将转到我的域名主机正常错误页面。我试图弄清楚为什么这不起作用，因为 URL 已经过清理，所以我不确定是什么导致了这个问题。

如果您想知道 URL 的最后一部分是从“album;./”编码的...

如果您对如何解决此错误有任何建议，请告诉我。感谢您提前回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:18:25.503

尝试在您的规则中添加一个 NE 标志，以便`%3B.%2F`不会在查询字符串中重新编码为`%253B.%252F`：

```
RewriteRule ^(/(/[^/]*/?)?)?([^/]+[a-zA-Z0-9])/(albums)/(.*)$ /name.php?name=$3&page=photos&album=$5 [L,NE] 
```

# scheduler - .Net Micro Framework 中的中断调度

> ID：13033212
> 
> 赞同：1
> 
> 时间：2012-10-23T14:51:06.947
> 
> 标签：scheduler, interrupt, interrupt-handling, .net-micro-framework

.NET MF 不支持抢先式中断。一旦进程完成或调度程序分配的 20 毫秒计时器超时，就可以处理中断。

有什么办法可以将这 20 毫秒更改为更短的时间，或者更改调度程序进程并使其像实时调度程序一样？

或者，假设可以容忍 20 毫秒的延迟来开始中断处理，但中断发生的确切时间是一个必须知道的因素。我认为使用 InterruptPort 事件处理程序中的时间参数，可以向后工作并确定 iteruppt 排队的时间。

但是，如果使用串行端口，并且必须知道数据到达端口的时间呢？有什么方法可以确定数据什么时候到达串口，或者相应的中断被框架排队了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:35:53.770

.NET 微框架旨在用于没有 MMU（内存管理单元）的内存受限微控制器。.NET Micro 框架，即使具有所有多线程模型和 TCP/IP 堆栈支持，也不能在经典的实时操作系统结构上运行。

如果您需要严格的实时功能，请查看 Windows CE 6.0 R3 和 Windows Compact 7，它们是硬实时操作系统并具有原生 32 位实时支持。

希望我的回答对你有所帮助。

# python - 通过 Popen 执行模块

> ID：13033215
> 
> 赞同：0
> 
> 时间：2012-10-23T14:51:10.763
> 
> 标签：python

我正在执行一个模块 popen1.py 并使用 subprocess 模块调用 popen2.py，

但是没有显示 popen2.py 的输出..当我显示子进程 id 时，它正在显示..popen2.py 的输出将在哪里打印

称呼

```
child = subprocess.Popen(['python', 'popen2.py',"parm1='test'","parm='test1'"], shell=True,
                        stdin=subprocess.PIPE,
                         stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:57:42.823

该过程完成后，您可以读取`child.stdout`并`child.stderr`获取数据（因为您通过了`subprocess.PIPE`）

或者，您可以使用`oudata,errdata = child.communicate()`which 将等待子进程完成，然后将其作为字符串输出。

* * *

从设计的角度来看，最好是导入。我将重构`popen2.py`如下：

```
#popen2.py
# ... stuff here
def run(*argv):
    #...

if __name__ == '__main__':
    import sys
    run(sys.argv[1:]) 
```

然后你可以在 popen1.py 中导入并运行 popen2.py：

```
#popen1.py
import popen2
popen2.run("parm1=test","parm=test1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:04:42.837

您可以使用 child.stdout/child.stdin 与进程通信：

```
child = subprocess.Popen(['python', 'popen2.py',"parm1='test'","parm='test1'"], shell=True,
                    stdin=subprocess.PIPE,
                     stdout=subprocess.PIPE, stderr=subprocess.PIPE)
print child.stdout.readlines() 
```

# html - 创建一个 100% 高度的基本设计

> ID：13033216
> 
> 赞同：0
> 
> 时间：2012-10-23T14:51:13.493
> 
> 标签：html, css, layout

我正在尝试获得这种设计：

![在此处输入图像描述](../Images/4a53798ae71c157ab5fbbef2af94c6ad.png)

我只是不知道如何开始。我如何获得这个在我的脑海中没有意义。

有人能帮我吗？也许做一个快速的 jsFiddle，只需要基础知识。我想学习如何制作这样的布局，其中左侧菜单栏的 bg（或只是高度）与“DIV#2”的内容相同。

更新：

我试过@Josh Davies这样回答：

```
 <div class="container">
    <div class="row">
        <div id="wrapper">
            <div class="leftt">left content</div>
            <div class="rightt">right content</div>
        </div>
    </div>
 </div><!-- end container -->

   #wrapper{background-color:blue;width:100%;}
   .leftt{float:left;width:29%;}
   .rightt{float:left;width:69%;} 
```

不幸的是，我只得到左侧边栏和正确的内容。不是顶部栏，也不是左侧菜单底部的小菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:57:03.883

只需创建一个包装器并为包装器提供左侧 div 的背景颜色。然后定位左右 div 并给右 div 一个您选择的颜色。这样，当页面展开时，包装器也会展开。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:57:07.540

有几种方法可以实现这一目标。您当然可以使用`<table/>`标签，尽管对此有些不满。谷歌虽然在云端硬盘中做到了。

在“现代”浏览器中，您还可以使用“table-cell”CSS 属性使您的 DIV 表现得像 TABLE，但这在旧版浏览器上并未得到广泛支持，而且恕我直言，这比使用平衡表更糟糕。

不过，您可以在 DIV 中，跨浏览器，在纯 CSS 中完成这一切，这需要强制它到全屏高度。这里有一个答案和 jsFiddle 示例，应该可以帮助您解决这个问题； [https://stackoverflow.com/questions/12861847/100-height-div-using-jquery/12862033#12862033](https://stackoverflow.com/questions/12861847/100-height-div-using-jquery/12862033#12862033)（我的回答不需要jQuery，尽管标题如此）。

您可能要考虑的另一件事是获取一个网格库，它将为您解决所有跨浏览器的问题。Twitter bootstrap 包含一个很好的网格库，但我更喜欢这个[http://responsive.gs/](http://responsive.gs/)，它更易于为您的表格配置，如上面的布局。您可能需要将两者结合起来以获得全屏高度，但让网格为您进行宽度布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:56:30.623

没有最大宽度或最大高度之类的东西。最多您可以获得屏幕宽度/高度并将其用作最大宽度/高度。

在另一个站点上，您正在寻找某种布局系统。也许看看[http://www.bramstein.com/projects/jlayout/](http://www.bramstein.com/projects/jlayout/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:09:28.453

我将从这个结构开始：

```
<div class="containter">
   <div class="top-bar">
      ...
   </div>
   <div class="div1>
      ...
      <div class="bottom-menu">
         ...
      </div>
   </div>
   <div class="div2">
      ...
   </div>
</div> 
```

然后你是 CSS 这将是起点：

```
.container { position: relative; }
.top-bar { position: absolute; top: 0; z-index: 5;}
.div1 { height: 100%; position: relative; }
.bottom-menu { position: absolute; bottom: 0; } 
```

那将是一个非常基本的起点，您仍然需要为其设计样式。感觉听起来 Div2 将通过作为更大的元素来设置高度 Div1 应该继承父容器 div 的整体高度。

将 div 位置设置为相对将允许您将底部菜单类设置为底部 0 的绝对位置，以便无论高度如何，它都将保持在 div 的底部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:15:34.553

尝试类似：

演示：http: [//jsfiddle.net/sEKtU/](http://jsfiddle.net/sEKtU/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      #top {
        background: lightblue;
      }

      #inner-wrapper {
        position: relative;
      }

      #main {
        margin-left: 200px;
      }

      #main-inner {
        background: lightsteelblue;
        padding: 1px 0;
      }

      #left {
        background: lightSeaGreen;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: 200px;
      }

      #left-menu {
        background: lightPink;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
  </head>

  <body>
    <div id="wrapper">
      <div id="top">
        top
      </div>

      <div id="inner-wrapper">
        <div id="left">
          <div id="left-content">
            left
          </div>

          <div id="left-menu">
            menu
          </div>
        </div>

        <div id="main">
          <div id="main-inner">
            <h1>Lorem ipsum dolor sit amet,</h1>
            <p>consetetur sadipscing elitr, sed diam nonumy eirmod tempor
            invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
            At vero eos et accusam et justo duo dolores et ea rebum.
            Stet clita kasd gubergren, no sea takimata sanctus est Lorem
            ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur
            sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore
            et dolore magna aliquyam erat, sed diam voluptua. At vero eos et
            accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,
            no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>​ 
```

# jquery - 在 jQuery 中使用第 n 个子选择器是否依赖于浏览器对 CSS3 的支持？

> ID：13033222
> 
> 赞同：4
> 
> 时间：2012-10-23T14:51:30.480
> 
> 标签：jquery, css, jquery-selectors, css-selectors

或者在大量使用 IE6/IE7 时使用是否安全？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T14:54:36.410

jQuery 背后的整个想法是它规范了浏览器之间的行为。一切都应该在[“兼容”列表中的](http://docs.jquery.com/Browser_Compatibility)任何浏览器上正常工作，包括 IE6 及更高版本。

但是，请注意，将来可能会将浏览器添加到兼容列表中或从兼容列表中删除；例如，[jQuery 2.0 将只支持 IE 9 或更高版本](http://blog.jquery.com/2012/06/28/jquery-core-version-1-9-and-beyond/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:53:10.513

不，jQuery 选择器实现不依赖于 CSS3 支持。

是的，您可以使用 IE6/7 中的所有 jQuery 功能。jQuery 在 IE 6.0+、FF 10+、Safari 5.0+、Opera、Chrome 中工作，如其网站所述。

# linux - 使用 grep 检测重复字符

> ID：13033226
> 
> 赞同：2
> 
> 时间：2012-10-23T14:51:39.060
> 
> 标签：linux, bash, grep

我正在尝试编写一个 grep（或 egrep）命令，该命令将查找并打印“words.txt”中连续三次包含相同小写字母的任何行。这三个字母可能连续出现（如“mooo”）或由一个或多个空格分隔（如“xx x”）但不被任何其他字符分隔。

words.txt 包含：

```
The monster said "grrr"!
He lived in an igloo only in the winter.
He looked like an aardvark. 
```

这是我认为该命令应如下所示：

```
grep -E '\b[^ ]*[[:alpha:]]{3}[^ ]*\b' 'words.txt' 
```

虽然我知道这是错误的，但我对语法的了解还不够，无法弄清楚。使用grep，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:01:33.427

这对你有用吗？

```
grep '\([[:lower:]]\) *\1 *\1' 
```

它需要一个小写字符`[[:lower:]]`并记住它`\( ... \)`。它会尝试匹配任意数量的空格`_*`（包括 0）、记住的字符`\1`、任意数量的空格、记住的字符。就是这样。

您可以尝试运行它`--color=auto`以查看它匹配的输入部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:07:05.817

试试这个。请注意，这不会匹配“mooo”，因为单词边界 ( `\b`) 出现在“m”之前。

`grep -E '\b([[:alpha:]]) *\1 *\1 *\b' words.txt`

`[:alpha:]`是字符类的表达式。要用作正则表达式字符集，它需要额外的括号。您可能已经知道这一点，因为看起来您已经开始这样做了，但未闭合开放括号。

# visual-c++ - 服务中使用的 Windows 命名管道不起作用

> ID：13033239
> 
> 赞同：0
> 
> 时间：2012-10-23T14:52:30.077
> 
> 标签：visual-c++, service, named-pipes

我正在使用 Windows 命名管道示例。当我运行示例程序来创建管道时，写一些东西并在客户端程序中接收它，一切都很好。当我将客户端代码移动到在 Windows 服务中运行的 dll 中时，它不会接收到发送的字节。

服务器的代码如下：

```
ThreadParams * params = reinterpret_cast<ThreadParams*>(args);
CString * connectionString = params->connectString;

HANDLE hPipe;
DWORD dwBytesRead;
TCHAR buf[1024];
int len;

hPipe = CreateNamedPipe(PIPE_NAME,  // Name
                        PIPE_ACCESS_OUTBOUND | WRITE_OWNER, // OpenMode
                        PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT, // PipeMode
                        2, // MaxInstances
                        1024, // OutBufferSize
                        1024, // InBuffersize
                        2000, // TimeOut
                        NULL); // Security
if (hPipe == INVALID_HANDLE_VALUE)
{
    Globals::WriteLog("Could not create the pipe",1);
    exit(1);
}

Globals::WriteLog("connect...",1);
ConnectNamedPipe(hPipe, NULL);
Globals::WriteLog("...connected",1);

swprintf(buf, connectionString->GetBuffer());
len = wcslen(buf);

if (!WriteFile(hPipe, buf, len*sizeof(TCHAR), &dwBytesRead, NULL))
    Globals::WriteLog("WriteFile failed",1);
else
    wprintf(L"written %d bytes\n",dwBytesRead);

DisconnectNamedPipe(hPipe);

CloseHandle(hPipe); 
```

和客户：

```
 CString finalResult = _T("");

HANDLE      hOut = INVALID_HANDLE_VALUE;
TCHAR       buf[1024];
DWORD       len;
DWORD       dwWritten;

Global::WriteLog("pwrite: waiting for the pipe...",1);
if (WaitNamedPipe(PIPE_NAME, NMPWAIT_WAIT_FOREVER) == 0)
{
    Global::WriteLog("WaitNamedPipe failed. error=%d",1,GetLastError());
    goto cleanup;
}
Global::WriteLog("the pipe is ready",1);

hOut = CreateFile(PIPE_NAME,
    GENERIC_READ,
    0,
    NULL, OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL,
    NULL);
if (hOut == INVALID_HANDLE_VALUE)
{
    Global::WriteLog("CreateFile failed with error %d",1,GetLastError());
    goto cleanup;
}
Global::WriteLog("Opened the pipe",1);

for (;;)
{
    if (!ReadFile(hOut, buf, sizeof(buf), &dwWritten, NULL))
    {
        Global::WriteLog("ReadFile failed -- probably EOF. Read %d bytes.",1,dwWritten);
        goto cleanup;
    }
    else
        break;
}

finalResult = CString(buf);
Global::WriteLog("String from pipe:%S",1,buf);
cleanup:
if(hOut != INVALID_HANDLE_VALUE)
    CloseHandle(hOut); 
```

如果更改任何内容，服务器的代码将在线程中运行（我已经在示例程序中使用此线程版本对其进行了测试，并且没有问题）。

为什么它不起作用？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:50:03.733

好吧，看来我想通了。看来我没有正确理解文档。

在服务器端，WriteFile 函数在读取字符串之前不会阻塞。我的程序只是简单地写入数据，然后关闭句柄 - 管道。客户端没有收到消息并抛出错误，指出管道另一侧没有进程。

同样从客户端我删除了 for(;;) 循环。

为了等待客户端的读取操作完成，我添加了

```
FlushFileBuffers(hPipe); 
```

写入操作成功后。

希望对某人有所帮助

# ms-access-2003 - 将 access 2000 转换为 access 97 时出现错误消息

> ID：13033242
> 
> 赞同：0
> 
> 时间：2012-10-23T14:52:32.527
> 
> 标签：ms-access-2003, ms-access-2000, ms-access-97

当使用 access 2003 将 access 2000 数据库转换为 access 97 时，我在另一个之后收到以下 2 条错误消息

'无效的论点'

'转换过程中发生了一些错误。没有生成转换的数据库。

除此之外，没有提供任何信息。以前有没有人遇到过这个问题，并且有任何关于如何找到我压缩/修复数据库的错误的线索，但这没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:49:48.640

发生此错误是因为在转换时 Access 97 数据库的大小将超过 1 GB，这是该版本 Access 的限制。

# c# - 匹配不同字符串格式的字符串

> ID：13033251
> 
> 赞同：0
> 
> 时间：2012-10-23T14:53:07.650
> 
> 标签：c#, regex

我有一个带有长 sql 查询的随机 .sql 文件。我需要运行时从插入 sql 语句中获取所有表名以放入数组中。如果插入语句在（一行）中，我可以获取表名（Inventory.tableA），如下所示：

```
...
Insert into Inventory.tableA;
... 
```

但是，如果插入语句在多行中，如下所示

```
Insert into 
Inventory.tableA; 
```

或者

```
Insert into 
(blank line)
(blank line)
Inventory.tableA; 
```

然后我检索表名的查询将失败。您能否建议我如何从长 sql 查询中获取表名，其中插入语句可以在一行或多行中？这里最好的方法是什么？

下面是我尝试过的可以处理 1 行的 c# 查询。

```
public List<string> GetAllTablesNames(string sp)
        {
            List<string> output = new List<string>();

            string[] contentSplit = sp.Split(new string[] { "INSERT INTO " }, StringSplitOptions.None);
            for (int a = 1; a < contentSplit.Length; a++)
            {
                string[] sa_tableName = contentSplit[a].Substring(0, contentSplit[a].IndexOf("\r")).Trim().Split('.');

                    output.Add(sa_tableName[0] + "." + sa_tableName[1]);
            }

            return output.Distinct().ToList();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:57:13.450

使用`singleline`模式

```
List<string> tables= Regex.Matches("yourInput",@"Insert into\s+(.*?)[\s\(]+"
,RegexOptions.Singleline|RegexOptions.IgnoreCase)
.Cast<Match>().Select(x=>x.Groups[1].Value)
.ToList<string>();

//tables contains all the table names 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:58:05.240

我不确定你的正则表达式是什么，但你可以：

1.  将正则表达式中的所有空格更改为`\s+`.
2.  用 first 替换所有 endlines `" "`，然后通过你的正则表达式运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:50:00.060

\s 将忽略所有空格，因此使用 \s+ 它将跳过制表符和 CRLF。由于您的示例有 ;，我们将捕获所有不是 ; 的文本。如果之间有空格，则使用 [^;\s]+ 代替。

```
string text = @"Insert into  
    Inventory.tableA;
    Insert into Orders;";

    var tableNames = Regex.Matches(text, @"(?:Insert into\s+)(?<Name>[^;]+)(?:;)")
                          .OfType<Match>()
                          .Select (mt => mt.Groups["Name"].Value);

    Console.WriteLine ("Tables: {0}", string.Join(" ", tableNames));            

    /* Tables: Inventory.tableA Orders */ 
```

# mysql - 如何获取日历小时的日期时间差异

> ID：13033253
> 
> 赞同：0
> 
> 时间：2012-10-23T14:53:12.027
> 
> 标签：mysql, date

如何获得日历小时内两个日期时间之间的差异（以调整夏令时）。

这是在 SO 帖子中提出的： `time_to_sec(timediff(to_date, from_date))`.

但我收到奇怪的警告：

```
select time_to_sec("65:00:00");
show warnings; -- nonthing

select time_to_sec("984:00:00");
show warnings; -- Truncated incorrect time value: '984:00:00 
```

我只是忽略这些警告吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:55:21.040

如[文档中所述](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)，time_to_diff 返回一个 TIME 值，并限制在 TIME 字段类型支持的范围内：-838:59:59 -> 838:59:59。您的 984 小时超出了最大支持值约 150 小时。

# vb.net - 使用 vb.net 的顺序任务

> ID：13033254
> 
> 赞同：0
> 
> 时间：2012-10-23T14:53:17.430
> 
> 标签：vb.net, task, sequence

我在 Visual Basic 2008 中使用 vb.net。我想知道如何使用 vb.net 执行顺序任务？

例子 ：

```
Do Task 1 then Move to Task 2 when Task 1 is complete 
```

有什么想法吗？我必须使用哪些东西和工具来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:20:56.053

.NET 框架有一个[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类，它支持`Task continuation`. 您将使用[Task.ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)将它们链接在一起。这是一个代码示例：

```
Imports System.Threading.Tasks

Public Class Form1
  Dim _var1 As Integer = 0

  Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim task1 As task = Task.Factory.StartNew(AddressOf Task1_Code).ContinueWith(AddressOf Task2_Code)
    task1.Wait()
    MessageBox.Show(_var1)
  End Sub

  Sub Task1_Code()
    Threading.Thread.Sleep(1000)
    _var1 = 5
  End Sub

  Sub Task2_Code()
    Threading.Thread.Sleep(1000)
    _var1 *= 5
  End Sub
End Class 
```

# c# - Async/await 用于具有进度/取消的长时间运行的 API 方法

> ID：13033258
> 
> 赞同：7
> 
> 时间：2012-10-23T14:53:34.393
> 
> 标签：c#, backgroundworker, async-await

**编辑** 我想强制等待异步调用工作人员的正确方法是使用Task.Run，​​如下所示：

```
 await Task.Run(() => builder.Build(dlg.FileName, cts.Token, new Progress(ReportProgress))); 
```

[从http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)得到了一些启发。

* * *

这应该很容易，但我是异步/等待的新手，所以请耐心等待。我正在构建一个类库，以公开具有一些长时间运行的操作的 API。过去，我使用 BackgroundWorker 来处理进度报告和取消，就像在这个简化的代码片段中一样：

```
 public void DoSomething(object sender, DoWorkEventArgs e)
{
            BackgroundWorker bw = (BackgroundWorker)sender;
            // e.Argument is any object as passed by consumer via RunWorkerAsync...

            do
            {
                // ... do something ...

                // abort if requested
                if (bw.CancellationPending)
                {
                    e.Cancel = true;
                    break;
                } //eif

                // notify progress
                bw.ReportProgress(nPercent);
            }
} 
```

客户端代码如下：

```
 BackgroundWorker worker = new BackgroundWorker
{ WorkerReportsProgress = true,
    WorkerSupportsCancellation = true
};
worker.DoWork += new DoWorkEventHandler(_myWorkerClass.DoSomething);
worker.ProgressChanged += WorkerProgressChanged;
worker.RunWorkerCompleted += WorkerCompleted;
worker.RunWorkerAsync(someparam); 
```

现在我想利用新的异步模式。所以，首先是我如何在我的 API 中编写一个简单的长时间运行的方法；在这里，我只是逐行读取文件，只是为了模拟一个真实的过程，我必须通过一些处理来转换文件格式：

```
 public async Task DoSomething(string sInputFileName, CancellationToken? cancel, IProgress progress)
{
    using (StreamReader reader = new StreamReader(sInputFileName))
    {
        int nLine = 0;
        int nTotalLines = CountLines(sInputFileName);

        while ((sLine = reader.ReadLine()) != null)
        {
            nLine++;
            // do something here...
      if ((cancel.HasValue) && (cancel.Value.IsCancellationRequested)) break;
      if (progress != null) progress.Report(nLine * 100 / nTotalLines);
        }
        return nLine;
    }
} 
```

为了这个示例，假设这是一个 DummyWorker 类的方法。现在，这是我的客户端代码（一个 WPF 测试应用程序）：

```
 private void ReportProgress(int n)
{
    Dispatcher.BeginInvoke((Action)(() => { _progress.Value = n; }));
}

private async void OnDoSomethingClick(object sender, RoutedEventArgs e)
{
    OpenFileDialog dlg = new OpenFileDialog { Filter = "Text Files (*.txt)|*.txt" };
    if (dlg.ShowDialog() == false) return;

        // show the job progress UI...

    CancellationTokenSource cts = new CancellationTokenSource();
    DummyWorker worker = new DummyWorker();
    await builder.Build(dlg.FileName, cts.Token, new Progress(ReportProgress));

    // hide the progress UI...
} 
```

IProgress 接口的实现来自[http://blog.stephencleary.com/2010/06/reporting-progress-from-tasks.html](http://blog.stephencleary.com/2010/06/reporting-progress-from-tasks.html)，因此您可以参考该 URL。无论如何，在这个使用测试中，UI 被有效地阻止了，我看不到任何进展。那么参考消费代码，这种情况的全貌是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T05:48:24.310

如该博客文章顶部所述，该文章中的信息已过时。`IProgress<T>`您应该使用.NET 4.5 中提供的新API。

如果你使用阻塞 I/O，那么让你的核心方法阻塞：

```
public void Build(string sInputFileName, CancellationToken cancel, IProgress<int> progress)
{
  using (StreamReader reader = new StreamReader(sInputFileName))
  {
    int nLine = 0;
    int nTotalLines = CountLines(sInputFileName);

    while ((sLine = reader.ReadLine()) != null)
    {
      nLine++;
      // do something here...
      cancel.ThrowIfCancellationRequested();
      if (progress != null) progress.Report(nLine * 100 / nTotalLines);
    }

    return nLine;
  }
} 
```

然后在`Task.Run`您调用它时将其包装起来：

```
private async void OnDoSomethingClick(object sender, RoutedEventArgs e)
{
  OpenFileDialog dlg = new OpenFileDialog { Filter = "Text Files (*.txt)|*.txt" };
  if (dlg.ShowDialog() == false) return;

  // show the job progress UI...

  CancellationTokenSource cts = new CancellationTokenSource();
  DummyWorker worker = new DummyWorker();
  var progress = new Progress<int>((_, value) => { _progress.Value = value; });
  await Task.Run(() => builder.Build(dlg.FileName, cts.Token, progress);

  // hide the progress UI...
} 
```

或者，您可以重写`Build`以使用异步 API，然后直接从事件处理程序中调用它，而不将其包装在`Task.Run`.

# android - XML 行为从 Android 2.3 更改为 4.1？

> ID：13033260
> 
> 赞同：1
> 
> 时间：2012-10-23T14:53:36.580
> 
> 标签：android, xml, dom, w3c

我想问是否有人知道，org.w3c 从 Android 2.3 到 4.1 的行为是否发生了变化

我有一个 XML 节点：

```
<block nr="1" canceled="FALSE" lesson="TRUE">
  <subject change="FALSE">AS</subject>
  <room change="FALSE">1234</room>
  <person change="FALSE">Name</person>
</block> 
```

我将这些节点作为`Element`我想要获取属性值的函数

```
GetAttributeByTag(pNode, "block", "lesson");

private String GetAttributeByTag(Element pElement, String pTag, String pAttributeTag) 
{
    Element toReturn = (Element)pElement.getElementsByTagName(pTag).item(0);
    return toReturn.getAttribute(pAttributeTag).trim();     
} 
```

在我的设备（带有 Android 2.3 的三星 Galaxy S Advance）上，toReturn 包含与 pElement 相同的元素，因此我可以返回属性值。

但在另一台设备（带有 Android 4.1 的 Galaxy S2）上，我得到`null`了`(Element)pElement.getElementsByTagName(pTag).item(0)`

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T00:30:03.600

> 看起来像是两个 Android 版本之间的错误修复。element.getElementsByTagName 应该只包括元素的后代，而不是它本身。

# database - 使用 TinyMCE 时无法添加记录

> ID：13033261
> 
> 赞同：0
> 
> 时间：2012-10-23T14:53:42.610
> 
> 标签：database, tinymce, records

我想在我的数据库中添加一条记录。在我使用简单的文本区域来执行此操作之前。但我想要更多的东西，所以我决定实现 tinyMCE。

如果您只是在 tinyMCE 文本区域中输入一些行，那么一切正常。但是，如果您在其中复制粘贴某些内容，然后想将其添加到数据库中，它将无法正常工作。您将收到以下消息：

> 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在“Helvetica Neue”、Helvetica、Arial、sans-serif 附近使用的正确语法；字体大小：15px；边距：0px；在第 2 行

我认为这与 '' 事物和逗号有关。我该如何解决这个问题？

这是我的查询：

```
mysql_query("INSERT INTO items (itemTitle,itemContent,itemDate,pageID,catName,itemFlag)
    VALUES ('$title','$content','$date','$pageID','$catName','$itemFlag')")or die(mysql_error()); 
```

其中 content 是我复制粘贴到 tinyMCE 文本区域的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:43:33.927

将编辑器内容插入数据库时​​，您似乎需要转义引号。

您正在使用函数 mysql_query，所以我猜您的脚本语言是 php。这是转义引号的代码。

```
$content = mysql_real_escape_string($content); 
```

# google-maps - Google Maps v3：多个 KML 图层的 Z-Index 问题

> ID：13033265
> 
> 赞同：2
> 
> 时间：2012-10-23T14:53:58.403
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个带有 4 个单独叠加层的 Google Maps (v3) 地图，这些叠加层由 4 个单独的 KML 文件填充。其中三个 KML 文件仅指示地图上的点，我将其渲染为不同颜色（例如红色、蓝色、黄色）的 Google 制造商。第三个覆盖包含多边形的多个坐标（即建筑轮廓）。

问题是多边形（建筑轮廓）位于其他 3 个叠加层中的标记之上。我希望其他三个叠加层（标记）位于多边形之上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-15T02:26:20.580

这个线程是由谷歌搜索返回的，所以会注意到谷歌地图已经为 kml 叠加添加了一个 zIndex 规范，现在应该是“答案”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:36:11.230

首先将多边形的 KmlLayer 添加到地图中（您可能需要等待它被渲染以确保它位于底部）。有几个[功能请求允许指定 layers 的相对 z-index](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=layer+z-index&sort=-id&colspec=ID+Type+Status+Introduced+Fixed+Summary+Stars+ApiType+Internal&cells=tiles)，但尚未实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T20:57:18.437

h这里有一个简单的解决方法：将元素放置在特定于其分层需求的文件夹中，为每个文件夹提供一个 TimeSpan - End，其中需要最明显的层的结尾比其他层具有更大的价值。此示例始终将沙坑和三通定位在孔多边形上方。

```
<Folder id="placemarks">
<TimeSpan><end>Wed Dec 31 15:59:59 PST 2012</end></TimeSpan>
<Placemark id="Hole_1"><name>Hole #1</name><styleUrl>#Hole</styleUrl><Polygon><outerBoundaryIs><LinearRing><coordinates>-122.91870161890983,45.483615855274756,0 -122.91865199804306,45.48361585527471,0 -122.91855275630951,45.483619616338856,0 -122.91794121265411,45.48370235968636,0 -122.91695952415466,45.483627138466375,0 -122.91472256183624,45.483218121324924,0 -122.91451670229435,45.483212949824846,0 -122.9143376648426,45.48322470323348,0 -122.91415393352508,45.48328488064735,0 -122.91402518749237,45.483354460702024,0 -122.91395008563995,45.48342404067077,0 -122.91389912366867,45.48350772457338,0 -122.91387498378753,45.48359328888462,0 -122.91387498378753,45.48368543492061,0 -122.91389375925064,45.48373808973069,0 -122.91392594575882,45.48377617041085,0 -122.91397422552109,45.48379920685918,0 -122.91409760713577,45.483826474479734,0 -122.91429609060287,45.48382083290416,0 -122.91442953050136,45.48381519132801,0 -122.91455760598182,45.48383399657965,0 -122.91581690311432,45.484202578244506,0 -122.91596710681915,45.48423454694876,0 -122.91628360748291,45.48424018848292,0 -122.91661083698272,45.48421950285486,0 -122.9167677462101,45.484191765296345,0 -122.91696421802044,45.484127122628124,0 -122.9171821475029,45.48403615263833,0 -122.9174154996872,45.48397879680701,0 -122.91756838560104,45.483983498106866,0 -122.91772797703743,45.48396140199421,0 -122.91793651878834,45.48391838506911,0 -122.91816920042038,45.483914859090184,0 -122.91850447654724,45.48388665125083,0 -122.91868150234222,45.48381895237883,0 -122.91873782873153,45.483689195980105,0 -122.91874051094055,45.483630899529764,0 -122.91870161890983,45.483615855274756,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
</Folder>
<Folder id="placemarks2">
<TimeSpan><end>Thu Mar 14 15:24:23 PDT 2013</end></TimeSpan>
<Placemark id="Overlay_104"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91651293635368,45.484182832859304,0 -122.91652634739876,45.48417060952213,0 -122.91653171181679,45.48415368489706,0 -122.91653037071228,45.484138640781616,0 -122.91652366518974,45.48412359666217,0 -122.91650488972664,45.48411325382773,0 -122.916479408741,45.484101030475465,0 -122.91644051671028,45.484088807120536,0 -122.91640967130661,45.48408504608773,0 -122.91637346148491,45.48408128505467,0 -122.91634932160377,45.48408410582948,0 -122.91632384061813,45.484093508411206,0 -122.91630908846855,45.48411043305436,0 -122.91630372405052,45.484120775889316,0 -122.91630372405052,45.4841329992373,0 -122.91630908846855,45.48414522258262,0 -122.91632384061813,45.48415650566826,0 -122.91634261608124,45.48416308746718,0 -122.91636407375335,45.48416308746718,0 -122.91638284921646,45.48415932643931,0 -122.9164083302021,45.48415368489706,0 -122.91641905903816,45.48415838618231,0 -122.91641905903816,45.484166848494766,0 -122.91641235351562,45.4841771913194,0 -122.91642308235168,45.484184713372464,0 -122.91644051671028,45.484190354911604,0 -122.91645929217338,45.48419411593739,0 -122.9164807498455,45.48419411593739,0 -122.91650220751762,45.48418753414211,0 -122.91651293635368,45.484182832859304,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_105"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91556611657142,45.48406247988558,0 -122.91557282209396,45.48407000195396,0 -122.91557148098945,45.48407940453805,0 -122.9155795276165,45.48409068763687,0 -122.91560500860214,45.484096329185405,0 -122.91562780737877,45.484095388927365,0 -122.91565462946892,45.48408786686237,0 -122.91567474603653,45.484074703246186,0 -122.91568011045456,45.48406153962695,0 -122.91568413376808,45.48404743574578,0 -122.91567742824554,45.484032391601964,0 -122.91566535830498,45.48401922797283,0 -122.91564390063286,45.48400982537872,0 -122.91560903191566,45.48400888511922,0 -122.915578186512,45.48400982537872,0 -122.91555404663086,45.484003243561915,0 -122.91551917791366,45.48399290070535,0 -122.91550442576408,45.48399384096513,0 -122.91547894477844,45.48400230330229,0 -122.9154534637928,45.48401734745415,0 -122.91544675827026,45.484030511083716,0 -122.9154534637928,45.4840511967811,0 -122.9154722392559,45.48406624091988,0 -122.91550174355507,45.48407658376298,0 -122.91552051901817,45.48407658376298,0 -122.91553929448128,45.48407094221243,0 -122.91555672883987,45.48406153962695,0 -122.91556611657142,45.48406247988558,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_106"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91515573859215,45.48395717082267,0 -122.91517853736877,45.4839496487392,0 -122.9152013361454,45.48393742535144,0 -122.91521206498146,45.48392332143921,0 -122.91521072387695,45.48391109804572,0 -122.91520535945892,45.4838969941269,0 -122.91519463062286,45.483881949942905,0 -122.91516780853271,45.483872547325866,0 -122.91514366865158,45.483870666802275,0 -122.91511550545692,45.483875368111136,0 -122.91509807109833,45.483881949942905,0 -122.91507795453071,45.4838960538655,0 -122.91506186127662,45.483912038306876,0 -122.91506722569465,45.48392802274367,0 -122.91509538888931,45.483946827957645,0 -122.91512355208397,45.48395623056229,0 -122.91515573859215,45.48395717082267,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_107"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91511282324791,45.483822713429426,0 -122.91509941220283,45.48381425106526,0 -122.9150739312172,45.483806728962705,0 -122.91505247354507,45.4837963860701,0 -122.91503503918648,45.48377946133259,0 -122.91501894593239,45.48375877553543,0 -122.91499882936477,45.48373714946662,0 -122.91497468948364,45.483731507882105,0 -122.91494384407997,45.48373338841033,0 -122.91491568088531,45.48374091052268,0 -122.91489824652672,45.48375501448059,0 -122.91489154100418,45.483775700279146,0 -122.91490226984024,45.48379450554396,0 -122.91491836309433,45.48380014712216,0 -122.91493713855743,45.483809549751285,0 -122.91493982076645,45.483824593954615,0 -122.91492909193039,45.4838499810386,0 -122.91494384407997,45.483870666802275,0 -122.91497200727463,45.48388759151238,0 -122.91500151157379,45.4838969941269,0 -122.91501760482788,45.4838960538655,0 -122.9150390625,45.483891352558366,0 -122.91507259011268,45.48387724863458,0 -122.9151101410389,45.48385656287332,0 -122.91511952877044,45.48383399657965,0 -122.91511282324791,45.483822713429426,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_108"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91608780622482,45.483770058698454,0 -122.91611328721046,45.4837615963264,0 -122.91614949703216,45.48374561184236,0 -122.91618973016739,45.48374185078665,0 -122.9162085056305,45.48373432867442,0 -122.91622459888458,45.483714583125106,0 -122.9162286221981,45.48369389730411,0 -122.91621789336204,45.48367697253584,0 -122.91619643568992,45.48365816723179,0 -122.91616827249527,45.483648764577396,0 -122.9161387681961,45.48364500351523,0 -122.91610389947891,45.48364688404635,0 -122.91608646512031,45.48365628670105,0 -122.9160650074482,45.48367509200573,0 -122.91604354977608,45.48368355439079,0 -122.91601940989494,45.48367885306589,0 -122.91600063443184,45.48367039068013,0 -122.9159563779831,45.483652525639336,0 -122.9159215092659,45.483652525639336,0 -122.91589468717575,45.4836609880278,0 -122.91586250066757,45.48367885306589,0 -122.91585445404053,45.483710822067316,0 -122.91586384177208,45.48373244814623,0 -122.91588395833969,45.483744671578464,0 -122.91590943932533,45.48375125342547,0 -122.91592553257942,45.48375125342547,0 -122.91594296693802,45.4837559547443,0 -122.91598856449127,45.48377193922543,0 -122.91602477431297,45.483778521069254,0 -122.9160650074482,45.48377664054253,0 -122.91608780622482,45.483770058698454,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_110"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91436985135078,45.48374185078668,0 -122.91438594460487,45.48373714946664,0 -122.91439533233642,45.48373432867442,0 -122.91441276669502,45.48372774682543,0 -122.9144261777401,45.48371364286071,0 -122.91443556547165,45.48369107650978,0 -122.91443020105362,45.48366568935417,0 -122.91441544890404,45.483644063249635,0 -122.91439935564995,45.483636541124355,0 -122.91436985135078,45.4836346605929,0 -122.91434168815613,45.483637481390076,0 -122.91432425379753,45.483648764577396,0 -122.91431620717048,45.483661928293095,0 -122.91432425379753,45.4836685101498,0 -122.9143363237381,45.483681673860886,0 -122.91432693600654,45.483689195980105,0 -122.91431084275245,45.4836844946557,0 -122.91430547833442,45.483674151740644,0 -122.91429877281189,45.48366380882366,0 -122.91427329182625,45.48366286855839,0 -122.91424110531807,45.4836713309453,0 -122.9142290353775,45.48367885306589,0 -122.91423439979553,45.48369295703935,0 -122.91423708200455,45.48370047915707,0 -122.9142290353775,45.48370706100927,0 -122.91421428322792,45.48370047915707,0 -122.91421696543693,45.48368825571527,0 -122.91421562433243,45.48367791280088,0 -122.91419014334678,45.48366004776248,0 -122.91413381695747,45.483641242452784,0 -122.91410431265831,45.483639361921455,0 -122.91409224271774,45.48364594378078,0 -122.91407749056816,45.48366474908892,0 -122.91407480835914,45.48368731545038,0 -122.9140841960907,45.48370706100927,0 -122.91413515806198,45.48374185078665,0 -122.91417136788368,45.48375501448059,0 -122.91420891880989,45.483759715799096,0 -122.91424512863159,45.483759715799096,0 -122.91430950164795,45.48374937289783,0 -122.91435107588768,45.483744671578464,0 -122.91436985135078,45.48374185078668,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Overlay_111"><name>Sand</name><styleUrl>#Sand</styleUrl><Polygon><drawOrder>2</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91445970535278,45.4834484876664,0 -122.91447043418884,45.48344002524603,0 -122.91448518633842,45.483429682286065,0 -122.9144985973835,45.483434383631746,0 -122.91450664401054,45.48344284605295,0 -122.91448786854744,45.483453189010504,0 -122.91446641087532,45.483468233309,0 -122.91446641087532,45.483485158139985,0 -122.91448518633842,45.48351148564473,0 -122.91453346610069,45.48353029099776,0 -122.91456162929535,45.48352935073025,0 -122.91460454463959,45.48352088832202,0 -122.9146420955658,45.483501142697925,0 -122.9146608710289,45.483471994382974,0 -122.9146608710289,45.48345600981676,0 -122.91465014219284,45.483441905784,0 -122.9146260023117,45.48342498094003,0 -122.9145884513855,45.48340711582141,0 -122.9145535826683,45.48338078826786,0 -122.91452139616012,45.483359162053965,0 -122.9144798219204,45.48334317745575,0 -122.91443422436714,45.48333847610246,0 -122.91440606117248,45.48334693853809,0 -122.91437655687332,45.483366684216264,0 -122.91436582803726,45.48338925069713,0 -122.91436985135078,45.48340523528229,0 -122.91438460350036,45.48342027959356,0 -122.91440740227699,45.48343908497702,0 -122.91442885994911,45.483447547397546,0 -122.91444763541221,45.483453189010504,0 -122.91445970535278,45.4834484876664,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Tee_Gold_1"><name>Gold Tee #1</name><styleUrl>#T_Gold</styleUrl><Polygon><drawOrder>3</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91861981153488,45.48369671809834,0 -122.9185326397419,45.48369389730411,0 -122.91852459311485,45.48377758080589,0 -122.91861176490783,45.483781341859235,0 -122.91861981153488,45.48369671809834,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Tee_Blue_1"><name>Blue Tee #1</name><styleUrl>#T_Blue</styleUrl><Polygon><drawOrder>3</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91848301887512,45.48376723790791,0 -122.9182630777359,45.48376347685363,0 -122.91826039552688,45.48383399657965,0 -122.91848167777061,45.48383681736685,0 -122.91848301887512,45.48376723790791,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Tee_White_1"><name>White Tee #1</name><styleUrl>#T_White</styleUrl><Polygon><drawOrder>3</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91820138692856,45.48381237053972,0 -122.91803240776062,45.483807669225584,0 -122.9180297255516,45.483889472035386,0 -122.91819736361503,45.4838951136041,0 -122.91820138692856,45.48381237053972,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Tee_Red_1"><name>Red Tee #1</name><styleUrl>#T_Red</styleUrl><Polygon><drawOrder>3</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91756972670555,45.48389041229689,0 -122.91743963956833,45.48388383046611,0 -122.9174356162548,45.483943066915344,0 -122.91756302118301,45.4839496487392,0 -122.91756972670555,45.48389041229689,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark id="Fairway_1"><name>Fairway #1</name><styleUrl>#Fairway</styleUrl><Polygon><drawOrder>1</drawOrder><outerBoundaryIs><LinearRing><coordinates>-122.91679188609123,45.484095388927365,0 -122.91688308119774,45.48406247988558,0 -122.91699305176735,45.48399196044558,0 -122.91703060269356,45.48395058899968,0 -122.91704803705215,45.48389229281982,0 -122.91703596711159,45.48384621998984,0 -122.91699573397636,45.483819892641506,0 -122.91690856218338,45.48380202764812,0 -122.91676640510559,45.48378604317555,0 -122.91657462716102,45.483762536590014,0 -122.91647002100944,45.48374091052268,0 -122.91637882590294,45.48372586629701,0 -122.91633322834968,45.48372868708961,0 -122.91628360748291,45.48373902999469,0 -122.91620045900345,45.48376817817145,0 -122.91611194610595,45.48379262501775,0 -122.91604489088058,45.483802967911075,0 -122.91599795222282,45.48379826659618,0 -122.91580483317375,45.48375689500802,0 -122.91560634970665,45.48369953889241,0 -122.91538909077644,45.48362525793459,0 -122.91519597172737,45.48355003661168,0 -122.91507124900818,45.48350396350177,0 -122.91493311524391,45.483455069548036,0 -122.91485130786896,45.483441905784,0 -122.91478425264358,45.48344566685975,0 -122.91473060846329,45.48346823330902,0 -122.91463941335678,45.48352276885732,0 -122.91458979249,45.4836073928795,0 -122.91453614830971,45.48369483756887,0 -122.91458979249,45.483723045504256,0 -122.91463807225227,45.483744671578464,0 -122.91468098759651,45.48375031316168,0 -122.91472658514976,45.48374937289783,0 -122.91488617658615,45.48370894153833,0 -122.91493579745292,45.48370047915707,0 -122.91498005390167,45.48370706100927,0 -122.9150202870369,45.48372492603276,0 -122.91515305638313,45.483821773166774,0 -122.9152549803257,45.48390357595612,0 -122.91532203555107,45.48393648509073,0 -122.91538774967193,45.483960931864004,0 -122.91544407606125,45.48396751368577,0 -122.91560500860214,45.48397973706699,0 -122.91568279266357,45.4839957214846,0 -122.91588798165321,45.48404837600464,0 -122.91600063443184,45.48406342014418,0 -122.91615217924118,45.48407000195396,0 -122.91626617312431,45.48405777859231,0 -122.91635200381279,45.484049316263466,0 -122.91639894247055,45.48405307729866,0 -122.91657865047455,45.484099149959484,0 -122.91666179895401,45.48411325382773,0 -122.91679188609123,45.484095388927365,0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
</folder> 
```

# javascript - 使用视口 JQuery 滚动部分

> ID：13033267
> 
> 赞同：0
> 
> 时间：2012-10-23T14:54:01.730
> 
> 标签：javascript, jquery, html, scroll, viewport

我在 viewport jQuery 插件的帮助下滚动 HTML 部分时遇到了一些问题。我一页有 4 个部分，我想在鼠标滚动（向上或向下）时一个一个滚动。我的 HTML 和 JavaScript 代码如下：

```
<section id="chapter1-block" class="chapter">
<span id="chapter1" class="pointer"></span><span class="pointer-b"></span>
</section>

<section id="chapter2-block" class="chapter">
<span id="chapter2" class="pointer"></span><span class="pointer-b"></span>
</section>

<section id="chapter3-block" class="chapter">
<span id="chapter3" class="pointer"></span><span class="pointer-b"></span>
</section>

<section id="chapter4-block" class="chapter">
<span id="chapter4" class="pointer"></span><span class="pointer-b"></span>
</section> 
```

JS：

```
$(function () {
    var _top = $(window).scrollTop();
    var _direction;
    var curChapterPos = 'chapter1';
    $(window).scroll(function(){
        var _cur_top = $(window).scrollTop();
        console.log(curChapterPos);
        if(_top < _cur_top)
        {   
            if(curChapterPos == "chapter1")
            {
                $('body').scrollTo( '#chapter2');
                curChapterPos = 'chapter2';
                console.log(_cur_top);
                return false;
            }
            else
            if(curChapterPos == "chapter2")
            {
                $('body').scrollTo( '#chapter2');
                curChapterPos = 'chapter3';
                console.log('3--'+curChapterPos);
                return false;
            }else
            if(curChapterPos == "chapter3")
            {
                $('body').scrollTo( '#chapter3');
                curChapterPos = 'chapter4';
                console.log('3--'+curChapterPos);
                return false;
            }           
            _direction = 'down';
        }
        else
        {
            _direction = 'up';
        }
        _top = _cur_top;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:16:21.483

这里的问题是，当页面滚动时，如果您使用浏览器中的滚动条，函数会被调用 7 次。9 次与钥匙向下。如果您使用鼠标滚轮，该函数会被调用 12 到 25 次。因此，如果您避免使用鼠标，问题可能会得到解决，因为鼠标的灵敏度在任何客户端/浏览器中都可能不同。但这并不能解决原来的问题。也许如果将页面滚动与鼠标悬停和标签的可见性结合起来，就会得到您需要的答案。

这是我的部分解决方案。如果鼠标滚动向下，它会循环。

[http://jsfiddle.net/manueru_mx/Wm6Pn/](http://jsfiddle.net/manueru_mx/Wm6Pn/)

```
$(function () {
    var _top = $(window).scrollTop();
    $("#xtop").val(0);
    var _direction;
    var curChapterPos = '';
    var _last = false;

    $(window).scroll(function(){
        var _cur_top = $(window).scrollTop();        
        var _top = $("#xtop").val();
        curChapterPos = $("#chapterhidden").val();

        if(_top < _cur_top){            
            if(curChapterPos == "chapter1"){
                $('body').scrollTo( '#chapter2');
                curChapterPos = 'chapter2';
                $("#chapterhidden").val(curChapterPos);
            }else if(curChapterPos == "chapter2"){
                $('body').scrollTo( '#chapter2');
                curChapterPos = 'chapter3';                
                $("#chapterhidden").val(curChapterPos);                
            }else if(curChapterPos == "chapter3"){
                $('body').scrollTo( '#chapter3');                
                curChapterPos = 'chapter4';
                $("#chapterhidden").val(curChapterPos);                
            } else if(curChapterPos == "chapter4" &&  elementInViewport(document.getElementById('chapter3')) == false){                
                console.log("aquisss");
                $('body').scrollTo( '#chapter4');
                curChapterPos = 'chapter4';
                $("#chapterhidden").val(curChapterPos);
                $("#xtop").val(_cur_top+1000);
            }else{
                return false;
            }
            _direction = 'down';            
            $("#xtop").val(_cur_top);

        }else {            
            if(curChapterPos == "chapter4" && elementInViewport(document.getElementById('chapter4-block')) == false){                
                $('body').scrollTo( '#chapter3');
                curChapterPos = 'chapter3';
                $("#chapterhidden").val(curChapterPos);                
            } else if (curChapterPos== "chapter3"){
                $('body').scrollTo( '#chapter2');
                curChapterPos = 'chapter2';
                $("#chapterhidden").val(curChapterPos);
            } else if (curChapterPos== "chapter2"){            
                $('body').scrollTo( '#chapter1');
                curChapterPos = 'chapter1';
                $("#chapterhidden").val(curChapterPos);
            }
            _direction = 'up';
            $("#xtop").val(_cur_top);
        }        
    });
});

function elementInViewport(el) {
  var top = el.offsetTop;
  var left = el.offsetLeft;
  var width = el.offsetWidth;
  var height = el.offsetHeight;

  while(el.offsetParent) {
    el = el.offsetParent;
    top += el.offsetTop;
    left += el.offsetLeft;
  }

  return (
    top >= window.pageYOffset &&
    left >= window.pageXOffset &&
    (top + height) <= (window.pageYOffset + window.innerHeight) &&
    (left + width) <= (window.pageXOffset + window.innerWidth)
  );
} 
```

当你进入最后一个位置时，虽然行进方向是向上的，但永远不会进入状态。所以我将 1000 添加到结束位置。这创建了循环，让我们从头开始。这是错误的，但我在行为中找不到逻辑。有趣的是只发生在最后一个位置。

在具有兼容性视图的 FF 16 和 IE 8 上进行了测试。并适用于鼠标滚动、按键和浏览器滚动条。

使用这个插件会更容易。 [http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)

但我不会改变你最初的方法。我使用了库 scrollTo 因为我看到您使用该函数并且不是 jQuery 原生的

[http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js](http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js)

希望这有帮助

参考： [ElementInViewPort 函数](https://stackoverflow.com/a/8229360/1757214)

# paypal - PayPal 自适应 - 可以通过多种货币支付吗？

> ID：13033268
> 
> 赞同：0
> 
> 时间：2012-10-23T14:54:03.150
> 
> 标签：paypal

每个用户可以设置多个预先批准的付款协议吗？

即预先批准的美元和预先批准的英镑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:48:36.107

预先批准在 API 调用者（应用程序）和消费者之间。您可以根据需要创建任意数量的预批准 - 每个都将获得自己的预批准密钥。但话虽如此，Preapproval 只是应用程序代表用户进行付款的授权访问。因此，可以使用相同的预批准密钥以不同的货币进行支付。请记住，当发生货币兑换时 - 收款人必须支付货币兑换费，并可能支付跨境 txn 费用。

# c# - 阻止 ViewBox 中的 MediaElement 像素化

> ID：13033269
> 
> 赞同：0
> 
> 时间：2012-10-23T14:54:07.267
> 
> 标签：c#, .net, vb.net, xaml, mediaelement

我有以下内容：

```
<Viewbox x:Name="vb" HorizontalAlignment="Center" VerticalAlignment="Center">
    <MediaElement x:Name="mc" />
</Viewbox> 
```

为了向`MediaElement`用户提供缩放视频的选项，我保留了`MediaElement`内部`ViewBox`（通过更改 ViewBox 的 Stretch 属性）。这样做会导致低分辨率视频像素化。

有谁知道如何阻止视频像素化或实施不同的方法来缩放视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:04:58.877

视频最终会像光栅图像一样以某种程度的缩放像素化。像素化程度还取决于编解码器的实现以及是否使用硬件加速进行渲染。MediaElement 使用您在机器中安装的编解码器。我可以建议您尝试 ScaleTransform 并查看有帮助的 fi 吗？这里有一个很好的教程：

[用户界面缩放](http://blogs.msdn.com/b/ivo_manolov/archive/2007/10/05/ui-scaling-ui-zooming-with-wpf.aspx)

# python - 如何直接以压缩格式保存熊猫数据框？

> ID：13033270
> 
> 赞同：12
> 
> 时间：2012-10-23T14:54:07.120
> 
> 标签：python, gzip, pandas

我有一个 pandas 数据框，名为`df`.

我想以压缩格式保存它。一种方法如下：

```
import gzip
import pandas

df.save('filename.pickle')
f_in = open('filename.pickle', 'rb')
f_out = gzip.open('filename.pickle.gz', 'wb')
f_out.writelines(f_in)
f_in.close()
f_out.close() 
```

但是，这需要我首先创建一个名为`filename.pickle`. 有没有办法更直接地做到这一点，即不创建`filename.pickle`?

当我想加载已被 gzip 压缩的数据框时，我必须完成创建 filename.pickle 的相同步骤。例如，要读取一个文件 `filename2.pickle.gzip`，它是一个 gzipped pandas 数据帧，我知道以下方法：

```
f_in = gzip.open('filename2.pickle.gz', 'rb')
f_out = gzip.open('filename2.pickle', 'wb')
f_out.writelines(f_in)
f_in.close()
f_out.close()

df2 = pandas.load('filename2.pickle') 
```

这可以在不`filename2.pickle`先创建的情况下完成吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-05-19T15:33:49.500

Pandas 最近添加了更好的压缩序列化。（从 pandas 0.20.0 开始。）这是一个如何使用它的示例：

```
df.to_csv("my_file.gz", compression="gzip") 
```

有关更多信息，例如可用的不同压缩形式，[请查看文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:18:42.117

出于某种原因，Python [zlib 模块](http://docs.python.org/library/zlib.html)具有解压缩 gzip 数据的能力，但它不具有直接压缩为该格式的能力。至少就记录在案的内容而言。尽管有明显误导性的文档页面标题“与 gzip 兼容的压缩”。

您可以使用or压缩为[zlib 格式](https://www.rfc-editor.org/rfc/rfc1950)，然后剥离 zlib 标头和预告片并添加 gzip 标头和预告片，因为 zlib 和 gzip 格式都使用相同的[压缩数据格式](https://www.rfc-editor.org/rfc/rfc1951)。这将为您提供[gzip 格式](https://www.rfc-editor.org/rfc/rfc1952)的数据。zlib 标头固定为两个字节，尾部固定为四个字节，因此很容易剥离。然后，您可以在前面添加一个 10 字节的基本 gzip 标头：（C 字符串格式）并以 little-endian 顺序添加一个 4 字节的 CRC。可以使用 计算 CRC 。`zlib.compress``zlib.compressobj``"\x1f\x8b\x08\0\0\0\0\0\0\xff"``zlib.crc32`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T22:03:33.303

您可以使用 pickle.dumps 将数据帧转储到字符串中，然后使用 import gzip 将其写入磁盘

```
file = gzip.GzipFile('filename.pickle.gz', 'wb', 3)
file.write(pickle.dumps(df))
file.close() 
```

# c# - 如何使用 LINQ 基于多个值查找重复项？

> ID：13033272
> 
> 赞同：7
> 
> 时间：2012-10-23T14:54:10.543
> 
> 标签：c#, linq, list, duplicates

假设我有以下课程：

```
public class Test{
    public string Length { get; set; }
    public string Width { get; set; }
    public string Height { get; set; }
    public int Count { get; set; }
    public string Label { get; set; }
} 
```

我想找到长度和标签具有相同值的项目，并计算每个项目有多少。到目前为止，我的代码如下所示：

```
var dups = testlist.GroupBy(i => new { i.Length, i.Label })
                   .Where(g => g.Count() >= 1)
                   .Select(g => new { Length = g.Key.Length, Label = g.Key.Label, 
                                      Count = g.Count() }); 
```

但问题是，var 中的对象不再具有 width 或 height 属性（它们在 g.Key 中不存在）。无论如何在结果中保存其他属性的同时基于两个属性查找重复项？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T15:01:49.877

在这之后

```
testList
  .GroupBy(i => new { i.Length, i.Label })
  .Where(g => g.Count() >= 1) 
```

你实际上有一个`IEnumerable<IEnumerable<Test>>`. 这是一份受骗者名单。你还想要什么？

# asp.net - 您正试图打开一个预编译的网站

> ID：13033274
> 
> 赞同：2
> 
> 时间：2012-10-23T14:54:19.967
> 
> 标签：asp.net, visual-studio-2010

我有一个用 asp.net 开发的网站。文件同时具有 aspx 页面和代码隐藏文件。当我尝试在 Visual Studio 2010 中打开它时，我收到以下消息：

```
---------------------------
Microsoft Visual Studio
---------------------------
You are attempting to open a precompiled Web site. You can view the site, but changes might cause the Web site to stop functioning. To modify a site, it is recommended that you edit the files in the original Web site, precompile the site, and then publish it again.

Do you wish to continue and open this Web site?
---------------------------
Yes   No 
```

* * *

如何打开这个网站进行编辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-01T09:31:10.437

我知道这已经晚了，但它可能对后来的读者有用。

首先，Martuza Kabul 是错误的。您只需要 2 个文件，.aspx/.ascx/.master 和相关的 .cs（这意味着 .aspx.cs/.ascx.cs/.master.cs）

这里最有可能发生的是有人编译了该站点，并且 DLL 现在位于 bin 文件夹中。（如果你像我一样幸运，他们也在源代码控制中......）

这是您需要做的：

*   删除 PrecompiledApp.config 文件
*   删除 bin 文件夹中的所有非库 .dll 文件（我的是 WebApp_122141Xas 或类似的东西，这些是编译的代码隐藏文件。）
*   看看你的 .aspx / .ascx 页面的第一行 - 在那个控制标签中 - 有一个“继承”属性......你会看到它有 2 个值，删除第二个。
*   在同一个控制标记中，请注意缺少 Codefile 属性。添加它并将其指向正确的代码隐藏文件。

应该是这样的。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:57:50.767

您必须拥有 CS 文件才能编辑网站。我假设您正在尝试使用预编译选项打开之前发布的网站。

请在您的网站上发布文件类型以获取更多信息。

# javascript - 设置复选框的值不起作用

> ID：13033275
> 
> 赞同：-2
> 
> 时间：2012-10-23T14:54:20.447
> 
> 标签：javascript, jquery, html

有没有办法使用javascript设置复选框的值？

```
var checkbox = document.getElementById("form1").getElementsByTagName("checkbox"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:55:30.180

```
 var checkbox = document.forms["form1"].checkbox.value = "your value here"; 
```

上面的 JavaScript 将使用此 HTML 设置“您的值”：

```
 <form name="form1">
    <input name="checkbox" value="before change">
 </form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:56:04.020

an 上的`value`属性`HTMLInputElement`是读/写的。

```
document.getElementById('myCheckbox').value = 'some value'; 
```

`checked`…尽管将属性设置为`true`或`false`除非您正在创建新复选框通常更有用。

* * *

> `var checkbox = document.getElementById(“form1”).getElementsByTagName(“checkbox”);`

这不会返回一个复选框，因为：

1.  `getElementsByTagName`返回一个**NodeList**（就像一个数组）而不是一个**HTMLElement**。您必须遍历结果（或假设只有一个并抓住`[0]`）。
2.  **输入**复选框的标签名称

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:57:26.167

是的

```
<input type="checkbox" id="test" />bla bla

<script type="text/javascript">
var checkbox = document.getElementById('test');
checkbox.checked="checked";
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T14:58:13.397

使用 jQuery：`$("input[type='checkbox']").val('your value');`**

# python - Image size (Python, OpenCV)

> ID：13033278
> 
> 赞同：50
> 
> 时间：2012-10-23T14:54:34.757
> 
> 标签：python, opencv, size

I would like to get the Image size in python,as I do it with c++.

```
int w = src->width;
printf("%d", 'w'); 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2014-04-21T22:34:08.277

Using openCV and numpy it is as easy as this:

```
import cv2

img = cv2.imread('path/to/img',0)
height, width = img.shape[:2] 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-09-15T20:06:59.230

For me the easiest way is to take all the values returned by image.shape:

```
height, width, channels = img.shape 
```

if you don't want the number of channels (useful to determine if the image is bgr or grayscale) just drop the value:

```
height, width, _ = img.shape 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-23T15:03:57.783

Use the function [`GetSize`](http://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html?highlight=getsize#GetSize) from the module `cv` with your image as parameter. It returns width, height as a tuple with 2 elements:

```
width, height = cv.GetSize(src) 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-11-15T21:41:27.277

I use numpy.size() to do the same:

```
import numpy as np
import cv2

image = cv2.imread('image.jpg')
height = np.size(image, 0)
width = np.size(image, 1) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-24T15:28:05.263

from this tutorial: [https://www.tutorialkart.com/opencv/python/opencv-python-get-image-size/](https://www.tutorialkart.com/opencv/python/opencv-python-get-image-size/)

```
import cv2

# read image
img = cv2.imread('/home/ubuntu/Walnut.jpg', cv2.IMREAD_UNCHANGED)

# get dimensions of image
dimensions = img.shape

# height, width, number of channels in image

height = img.shape[0]
width = img.shape[1]
channels = img.shape[2] 
```

* * *

from this other tutorial: [https://www.pyimagesearch.com/2018/07/19/opencv-tutorial-a-guide-to-learn-opencv/](https://www.pyimagesearch.com/2018/07/19/opencv-tutorial-a-guide-to-learn-opencv/)

> image = cv2.imread("jp.png")
> 
> (h, w, d) = image.shape

Please double check things before posting answers.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-12T10:05:26.930

Here is a method that returns the image dimensions:

```
from PIL import Image
import os

def get_image_dimensions(imagefile):
    """
    Helper function that returns the image dimentions

    :param: imagefile str (path to image)
    :return dict (of the form: {width:<int>, height=<int>, size_bytes=<size_bytes>)
    """
    # Inline import for PIL because it is not a common library
    with Image.open(imagefile) as img:
        # Calculate the width and hight of an image
        width, height = img.size

    # calculat ethe size in bytes
    size_bytes = os.path.getsize(imagefile)

    return dict(width=width, height=height, size_bytes=size_bytes) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-09T06:13:37.613

I believe simply `img.shape[-1::-1]` would be nicer.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-03T09:19:42.210

You can use `image.shape` to get the dimensions of the image. It returns 3 values. The first value is height of an image, the second is width, and the last one is number of channels. You don't need the last value here so you can use below code to get height and width of image:

```
height, width = src.shape[:2]
print(width, height) 
```

# c++ - 提升状态图，状态机的单元测试部分

> ID：13033282
> 
> 赞同：2
> 
> 时间：2012-10-23T14:54:40.557
> 
> 标签：c++, unit-testing, boost, statechart, boost-statechart

我正在寻找一种方法来执行（出于单元测试目的）仅复杂状态机的一部分。为此，我正在评估 boost::statechart 框架。

我考虑的一种方法是设计一个分层状态机，其中每个状态都定义为嵌套状态机，应该单独测试。

考虑以下代码片段中的 FSM 定义：

```
struct Fsm: boost::statechart::state_machine< Fsm, StateA >
{
  ...
}

struct StatA : boost::simple_state< StateA, Fsm, StateA1 >
{
  ...
}

struct StateB : boost::simple_state< StateB, Fsm, StateB1 >  
{
  ....
}

struct StateA1 : boost::simple_state< StateA1, StateA >
{
  ....
}

struct StateA2 : boost::simple_state< StateA2, StateA >
{
  ....
}

struct StateB1 : boost::simple_state< StateB1, StateB >  
{
  ....
}

struct StateB2 : boost::simple_state< StateB2, StateB >  
{
  ....
} 
```

是否可以对状态 B 内部定义的逻辑进行单元测试，即 B1 和 B2 内部状态，而不执行甚至编译为状态 A 定义的逻辑，包括其内部 A1 和 A2 状态？

提前致谢， AmirH

# r - 使用不同的数据重复 ggplot 而无需输入整个代码

> ID：13033284
> 
> 赞同：6
> 
> 时间：2012-10-23T14:54:45.543
> 
> 标签：r, ggplot2

是一种重新绘制某些东西但使用子集数据集而不再次写出整个代码的方法吗？

可能类似于 last_plot() 但允许指定要使用的 data.frame 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T15:00:27.543

您可以使用`%+%`运算符：

```
##Two data sets:
R> dd = data.frame(x = runif(10), y=runif(10))
R> dd_new = data.frame(x = runif(10), y=runif(10))

R> g = ggplot(dd, aes(x,y)) + geom_point() 
R> g
R> g %+% dd_new 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T16:07:47.467

虽然我觉得 Csgillespie 的回答很完整。我想添加一种我个人经常使用但很少在野外看到的辅助方法。它非常适合应用公司/个人主题并避免重新输入工作。

您可以将 ggplot2 元素保存为列表，就像您使用`... + ... +`

```
default.point <- list(geom_point(), 
coord_flip(),
theme(
axis.text.x=element_text(size=12
)))

ggplot(diamonds,aes(carat, price, colour=cut)) + default.point 
```

# java - Android Java ODBC 连接

> ID：13033287
> 
> 赞同：1
> 
> 时间：2012-10-23T14:54:49.910
> 
> 标签：java, android, mysql, odbc

我在这里遇到了另一个关于 android 的问题...我正在尝试使用该代码连接到我的 mysql 数据库：

```
 public void testDB() {
    TextView tv = (TextView)this.findViewById(R.id.textView1);
    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(url, user, pass);
        /* System.out.println("Database connection success"); */

        String result = "Database connection success\n";
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("select * from users");
        ResultSetMetaData rsmd = rs.getMetaData();

        while(rs.next()) {
            result += rsmd.getColumnName(1) + ": " + rs.getInt(1) + "\n";
            result += rsmd.getColumnName(2) + ": " + rs.getString(2) + "\n";
            result += rsmd.getColumnName(3) + ": " + rs.getString(3) + "\n";
        }
        tv.setText(result);
    }
    catch(Exception e) {
        e.printStackTrace();
        tv.setText(e.toString());
    }   

} 
```

在 AVD 中，我收到此错误：

```
10-23 16:49:08.103: W/System.err(12939): java.sql.SQLException: Unable to connect to any hosts due to exception: android.os.NetworkOnMainThreadException 
```

我认为库中有问题，这是真的吗？但是我在bluestack模拟器上尝试了这个，我认为使用android姜饼并且连接效果很好......有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:58:24.303

[异常](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)信息非常丰富：您正在主线程中执行不允许的网络操作。[本文](http://developer.android.com/guide/components/processes-and-threads.html#Threads)是后台操作指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:57:15.627

你得到一个[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。使用 Honeycomb 和 forward，您不能在主线程上执行任何网络任务，这意味着您需要将代码移到单独的线程中。我建议使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:56:36.363

这是因为您正在主线程中进行网络操作，请考虑使用`AsyncTask`for 网络操作。

实现示例`AsyncTask`： [http ://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

在 中进行网络操作`doInBackground`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T14:56:37.407

```
 java.sql.SQLException: Unable to connect to any hosts due to exception: android.os.NetworkOnMainThreadException 
```

所有网络调用都应该在单独的线程上，而不是在主线程上。您需要使用 AsynchTask 进行网络调用。

这是关于如何为此目的编写 asynchtask 的[android 教程。](http://developer.android.com/training/basics/network-ops/connecting.html)

# iphone - 数据传递到 UITableViewCell 内的 UIPickerView

> ID：13033291
> 
> 赞同：0
> 
> 时间：2012-10-23T14:55:00.717
> 
> 标签：iphone, objective-c, ios, xcode

我有`UITableView`并且每个单元格内都有一个选择器视图。用户可以单独更改每个选择器的值。

我需要知道哪个单元格的 pickerView 已更改。例如，当用户移动选择器时，我会知道，这是单元格 3。

有没有办法做到这一点？没有必要获得即时更改的值。我们可以将它存储在数组中，而不是在单击与 tableview 无关的 Go 按钮时发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:11:45.027

我建议存储指向您的选择器视图的指针数组。因此，数组的索引 0 将指向表第 0 行的选择器视图，等等。然后，确保您的视图控制器是所有选择器视图的代表。实现协议`pickerView:didSelectRow:inComponent:`声明的方法。`UIPickerViewDelegate`该方法有一个`UIPickerView`as 参数的实例：这是值被更改的那个。要获取该选择器视图的行，您可以向数组发送该`indexOfObject:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:12:08.110

创建 a 的子类`UITableViewCell`。该子类应该获得对您想要更新的任何内容的引用，然后它可以简单地创建（或 IBOutlet 链接）到选取器并成为选取器的代表。

所以细胞应该有：

```
- (void) passStuff:(NSMutableDictionary *)datamodel key:(NSString *)key values:(NSArray *)values {
    _privateWeakRefDataModel = datamodel;
    _privateCopyKey = key;
    _privateValues = values;
    [picker reloadData];
}

#pragma mark - Picker Delegate Code here 
```

这样，单元格将直接处理更新您的数据模型。让你的代码更干净。

# html - 仅 CSS 滑动菜单

> ID：13033292
> 
> 赞同：0
> 
> 时间：2012-10-23T14:55:05.237
> 
> 标签：html, css, menu

请看下面的链接：

[http://cssmenumaker.com/builder/111528](http://cssmenumaker.com/builder/111528)

我试图弄清楚。我不明白它是如何工作的 - 我无法理解子菜单如何保持隐藏并且不干扰页面的其余部分。

请允许我进一步解释-当我尝试自己制作时，我想到我必须隐藏并显示子菜单（我使用 DIV 标签认为我很聪明）但是当它们变得可见时，它们会拿走他们的放置在 DOM 中并将其他所有内容移开（我显然想避免但不完全了解如何完成）。当我尝试使用 JS 制作我的作品时，它并没有按我的意愿工作。我将嵌套 DIV 标签（子菜单）的“显示”和“可见性”属性分别更改为“无”和“隐藏”，直到出现 onmouseover 事件，但它无法正常工作，我不知道如何制作像这个例子一样工作。

我正在查看悬停命令，但无法看到这如何使子菜单在悬停之前不可见。我也只能将 display:block 命令视为它们如何显示的唯一参考，但不明白它们在显示时如何不将其他所有内容移开。

这有道理吗？谁能解释一下这个例子是如何工作的，DOM 模型是什么样的以及 DOM 的所有部分是如何相互交互的？W3C 在这里帮助不大。

我的印象是 DOM 模型是静态的，除非您添加一些复杂的 z-index 或其他方法，否则将以框的方式显示内容，那么我在这里缺少什么？我也更喜欢纯 CSS 解决方案，这就是我发布上面示例的原因，我想比现在更了解这一切。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:59:42.820

答案是：绝对位置。

绝对位置从静态流中移除元素，因此不会推开其他元素。要控制绝对定位的元素，您可以将它们包装在相对定位的元素中：偏移父元素。这样，您可以创建块/菜单/等。在正常流程中具有绝对定位的元素。

简要说明：[http ://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

display none/block 部分只是隐藏/显示子菜单。如果父母有 :hover，您可以使用 display: block 显示子菜单。

# c# - GridView 命令按钮无法删除

> ID：13033293
> 
> 赞同：0
> 
> 时间：2012-10-23T14:55:08.763
> 
> 标签：c#, events, gridview

我在我的 GridView 中添加了一个删除命令按钮，但是每当我点击按钮时，我都会收到一个错误，即：

*   [HttpException (0x80004005): GridView 'GridView1' 触发了未处理的事件 RowDeleting。]
*   System.Web.UI.WebControls.GridView.OnRowDeleting(GridViewDeleteEventArgs e) +1463321

但我不知道我应该使用什么事件以及删除和编辑什么，这是我的代码：

```
 <asp:TemplateField HeaderText="">
                 <ItemTemplate>
                   <asp:Button ID="lkDelte" runat="server" OnClientClick="return confirm('Are you sure you want to delete?')"
                                CommandName="Delete" CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'></asp:Button>
                   </ItemTemplate>
            </asp:TemplateField>

protected void gdCourse_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Delete")
    {
        int index = Convert.ToInt32(e.CommandArgument);

        GridViewRow row = GridView1.Rows[index];

        string con_str = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(con_str);

        SqlCommand com = new SqlCommand("dbo.delete_documents", con);
        com.CommandType = CommandType.StoredProcedure;
        SqlParameter pDocument_ID = new SqlParameter("@document_id", row);

        com.Parameters.Add(pDocument_ID);

        con.Open();
        com.ExecuteNonQuery();
        con.Close();

    }
    else
    {
        Label2.Text = "Unable to delete";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:57:16.323

您的代码没有问题，但您忘记处理`RowDeleting`网格视图的事件。

您需要处理 gridview`RowDeleting`方法：

`protected void gvLineItems_RowDeleting(object sender, GridViewDeleteEventArgs e)`

在这种情况下，您可以在此方法中重新绑定或将方法留空，但添加它的签名，以便事件可以正确触发。

将此添加到您的程序中：

```
protected void NameOfYourGridView_RowDeleting(object sender, GridViewDeleteEventArgs e)
 {
  //bind your grid view here...
 } 
```

# jquery - 根据滚动位置调整 DIV 大小

> ID：13033297
> 
> 赞同：0
> 
> 时间：2012-10-23T14:55:15.510
> 
> 标签：jquery, scroll, jquery-animate

我试图根据滚动位置调整 div 上的填充。然而，我的代码似乎很不稳定，而不是 div '缩小'它只是变得更大。任何见解都会很棒

这是一个小提琴，我在其中翻转了语句：http: [//jsfiddle.net/yQZsT/](http://jsfiddle.net/yQZsT/)

```
$(window).scroll(function(){

if($(window).scrollTop() >= 428){

    $("#nav-container").animate({'padding-top' : '1.2em', 'padding-bottom' : '1.2em'}, 900);        
    } else{

    $("#nav-container").animate({'padding-top' : '3em', 'padding-bottom' : '3em'}, 900);        

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:04:20.560

浏览器将填充呈现为增加父元素的大小。所以，如果你减少宽度和高度而不增加填充，它会更好。

# php - Mysql更改数据库的用户名和密码

> ID：13033299
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:55:19.660
> 
> 标签：php, mysql

我是 POD 和 php 的新手。我创建了一个新数据库，它的默认用户名是“root”，密码为空。现在如何更改该用户名和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:57:07.530

您不会“更改数据库的用户名”。您**授予**帐户使用该数据库的权限。请参阅[GRANT 语法](http://dev.mysql.com/doc/refman/5.1/en/grant.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:56:59.033

例如，您可以轻松地使用 phpmyadmin 创建一个新用户并授予他在特定数据库上工作的权限。

[PMA 维基](http://wiki.phpmyadmin.net/pma/user_management)

# flashdevelop - 一个用于 flash 和 actionscript 导出的 haxe 项目

> ID：13033300
> 
> 赞同：0
> 
> 时间：2012-10-23T14:55:20.547
> 
> 标签：flashdevelop, haxe

我惶恐地问，因为某处可能有一个简单明显的解决方案，但鉴于 haxe 具有允许编译到多个环境的条件语句，你如何让一个项目同时编译为 flash 和 javascript？我觉得我应该能够自己回答这个问题，但我还没有找到一个例子。

下面的截图是项目创建对话框：

![项目创建对话框](../Images/886451f1c8bb6768267f467b0309399a.png)

我只能选择项目类型。我看到“空项目”选项，这是在哪里完成的？或者有没有办法跨项目共享课程？

我正在使用 flash develop 4 和普通 haxe（不是 nme）。我已经好几年没用过 flashdevelop 了，所以我意识到这可能是 flashdevelop 的问题，而不是 haxe 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:58:03.387

创建一个 AS3 项目，然后复制 .hxproj 文件：现在您在同一位置有 2 个项目共享相同的代码。

打开这个新的 .hxproj，进入项目属性并将目标更改为 Actionscript，并将输出更改为某个`as3`文件夹而不是“app.swf”。

# wix - MSI 属性在被动、基本 UI 和无 UI 安装时为空

> ID：13033302
> 
> 赞同：3
> 
> 时间：2012-10-23T14:55:26.980
> 
> 标签：wix, windows-installer

我正在开发一个安装程序，其中包含一些在以下 MSI 属性中查找值的自定义操作：

*   添加本地
*   添加默认
*   重新安装
*   消除

使用完整 UI 运行安装程序时，这些属性包含逗号分隔的功能名称列表（根据用户选择的选项而定）。但是，当我以被动模式运行安装程序或从命令行仅使用基本 UI（或没有 UI）时，我发现属性为空/空白。只有当我从命令行显式设置它们时，它们才具有任何价值。这是一个可以接受的解决方法，但如果这些可以采用某种默认值（例如“all”）而不需要在命令行上传递值，那就更好了。有什么方法可以在 WiX（我用来构建 MSI）中指定它，还是我必须在自定义操作代码中做一些事情（或完全其他事情）？

我在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx)查看了属性参考，但我没有看到任何关于如何为这些属性指定*默认功能的提及。*

我还发现有趣的是，如果我在安装过程中以这种方式在命令行上指定一个功能，它似乎存储在 REMOVE 属性中以供卸载（换句话说，我在卸载时不必传递任何参数）模式）。这是我可以依赖的功能吗？如果以后有人修改安装，它会自动更新吗？

我正在运行 WiX 3.5.2519 并将 Visual Studio 2010 与 Visual C++ 一起用于自定义操作代码。感谢你给与我的帮助！

编辑：

其实，我错了。在其中一种模式下卸载和运行时，即使我在命令行上传递了不同的值或只安装了一部分功能，REMOVE 属性似乎*总是​​设置为“全部”。*这似乎坏了。我在这里做错了吗？

```
C:\> msiexec REMOVE=FeatureName /passive /l* uninstall.log /x Product.msi 
```

它将完全忽略我为“FeatureName”指定的内容，并在其位置使用“all”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:00:21.717

您的自定义操作可能不应该检查这些属性。相反，他们应该检查产品的功能和/或组件状态，这取决于他们想要做什么。在[条件语句语法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368012.aspx)中，这看起来像`$component-action`或`&feature-action`（您使用组件或功能的名称，您尝试对其操作进行条件处理）。在 C++ 中（用于自定义操作），这看起来像[`MsiGetFeatureState`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370117.aspx)or [`MsiGetComponentState`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370113.aspx)，当然，这些在大多数其他语言中通过类似的方式提供（例如`session.FeatureRequestState`/`session.ComponentRequestState`在您不应该使用的语言中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:54:12.387

建议将安装使用的所有属性都输入到[属性表中](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/1f4215b2-dc71-4e6e-bc2e-3b43316806b9)并带有初始值。安装程序在安装启动时将属性设置为这些值。空白是可接受的值的属性和安装程序中内置的属性不需要初始化。

然后，您可以通过编程方式或在命令行上更改默认值，如下所述：[使用属性](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/5a2f1cd4-2bbd-414a-a814-8b9fdab434b4)。

# html - 使用 GWT 一次上传多个文件

> ID：13033304
> 
> 赞同：2
> 
> 时间：2012-10-23T14:55:36.293
> 
> 标签：html, gwt, file-upload, multifile-uploader, gwtupload

我正在拼命地尝试为我的网站用户启用多重属性。用户应该能够将一堆 PDF 文件上传到我的服务器，而无需单独选择每个文件。我正在使用[gwt-upload](http://code.google.com/p/gwtupload/)进行上传。可悲的是

```
MultiUploader 
```

实际上并不允许用户一次选择多个文件，但您必须再次单击每个文件的“浏览”按钮并在浏览器中选择。

我研究并意识到我需要这样的东西

```
<input name='uploads[]' type="file" multiple> 
```

[到目前为止，在从gwt-upload](http://code.google.com/p/gwtupload/)创建的输入中设置“多个”-属性可以使打开文件对话框让我选择多个文件，但是上传不再开始/工作。

我找不到任何使用带有 gwt 的多文件输入的示例。如果有办法用[gwt-upload](http://code.google.com/p/gwtupload/)做到这一点，那将是完美的，因为我真的不想再自己实现整个上传逻辑！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T18:16:22.847

我使用更简单的解决方案。

```
defaultUploader = new MultiUploader();
IFileInput ctrl = defaultUploader.getFileInput();
DOM.setElementProperty((ctrl).getElement(), "multiple", "multiple"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:32:56.720

解决方案非常简单。gwt-upload 有一个 Uploader 类，它可以进行多次上传。gwt-upload wiki 中建议的 servlet 代码已经能够处理多个上传。

我不得不更改 Uploader 类中的某些内容（源代码完全可用，所以我只是复制它并替换了我需要的部分）。要访问所选文件的文件名和文件大小，我创建了一个简单的本机方法：

```
private static native String getFilesSelected() /*-{
    var count = $wnd.$('input:file')[0].files.length;

    var out = "";

    for (i = 0; i < count; i++) {
        var file = $wnd.$('input:file')[0].files[i];
        out += file.name + ';' + file.size + ";";
    }
    return out;
}-*/; 
```

我分割的返回值是哪个；以获得所需的结果。

并且您需要将上传器 FileInput (setFileInput()) 替换为自定义的，它将 multiple 属性设置为输入。我使用这样的包装类：

```
public class MyFileInput implements IFileInput {

    private final FileUpload fu;

    public MyFileInput() {
        fu = new FileUpload();
        DOM.setElementProperty(fu.getElement(), "multiple", "multiple");    
    }
} 
```

您显然需要实现 IFileInput 的其他方法，我将它们全部链接到 fu。两个没有等效的方法，但我不使用它们，所以这里没问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T23:39:31.390

以下是我认为适用于所有浏览器的结果：

```
form = new FormPanel();
form.setEncoding(FormPanel.ENCODING_MULTIPART);
form.setMethod(FormPanel.METHOD_POST);
form.add(new HTML("<input type='file' id='fileselect' name='fileselect[]' multiple />")); 
```

然后在服务器端我只是使用“org.apache.commons.fileupload”的东西。

是的，有些人可能不喜欢表单中的 HTML 元素，但如果需要，可以通过以下方式获取输入元素：

```
protected Element getFileSelectElement() {
    HashMap<String, Element> idMap = Maps.newHashMap();
    GuiUtil.parseIdsToMap(inputField.getElement(), idMap);
    Element input = idMap.get("fileselect");
    return input;
}

public static void parseIdsToMap(Element element, HashMap<String, Element> idMap) {
    int nodeCount = element.getChildCount();
    for (int i = 0; i < nodeCount; i++) {
        Element e = (Element) element.getChild(i);
        if (e.getId() != null) {
            idMap.put(e.getId(), e);
        }
    }
} 
```

最后......如果你想访问用户选择的文件列表，在浏览器端，这就是我所拥有的：

```
public static native String getFileNames(Element input) /*-{

    var ret = "";

    //microsoft support
    if (typeof (input.files) == 'undefined'
            || typeof (input.files.length) == 'undefined') {
        return input.value;
    }

    for ( var i = 0; i < input.files.length; i++) {
        if (i > 0) {
            ret += ",";
        }
        ret += input.files[i].name;
    }
    return ret;
}-*/; 
```

# ravendb - 嵌入在 Azure 网站上的 RavenDB - 拒绝访问

> ID：13033305
> 
> 赞同：5
> 
> 时间：2012-10-23T14:55:37.393
> 
> 标签：ravendb, azure-web-app-service

当我尝试将带有 RavenDB 嵌入式实例的 MVC4 站点部署到新的 Azure 网站预览功能时，我收到拒绝访问消息。该网站在本地运行良好。

这是我配置 Raven 的方法：

```
//Initialize the RavenDB Data Store
        Raven.Database.Server.NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8887);

        var documentStore = new EmbeddableDocumentStore()
        {
            DataDirectory = "~\\App_Data",
            UseEmbeddedHttpServer = true, 
            Configuration = { Port = 8887 }
        };

        documentStore.Initialize(); 
```

这是我浏览到该站点时的堆栈跟踪：

```
Access is denied

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.NetworkInformation.NetworkInformationException: Access is denied

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NetworkInformationException (0x5): Access is denied]
   System.Net.NetworkInformation.SystemIPGlobalProperties.GetAllTcpConnections() +1570717
   System.Net.NetworkInformation.SystemIPGlobalProperties.GetActiveTcpListeners() +74
   Raven.Database.Util.PortUtil.FindPort() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Database\Util\PortUtil.cs:110
   Raven.Database.Util.PortUtil.GetPort(String portStr) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Database\Util\PortUtil.cs:44
   Raven.Database.Config.InMemoryRavenConfiguration.Initialize() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Database\Config\InMemoryRavenConfiguration.cs:170
   Raven.Database.Config.RavenConfiguration.LoadConfigurationAndInitialize(IEnumerable`1 values) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Database\Config\RavenConfiguration.cs:28
   Raven.Database.Config.RavenConfiguration..ctor() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Database\Config\RavenConfiguration.cs:17
   Raven.Client.Embedded.EmbeddableDocumentStore.get_Configuration() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Embedded\EmbeddableDocumentStore.cs:63
   Raven.Client.Embedded.EmbeddableDocumentStore.set_DataDirectory(String value) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Embedded\EmbeddableDocumentStore.cs:90
   Solarity.DesignSearch.Website.Bootstrapper.BuildUnityContainer() in c:\a\src\Solarity.DesignSearch\Solarity.DesignSearch.Website\Bootstrapper.cs:35
   Solarity.DesignSearch.Website.Bootstrapper.Initialise() in c:\a\src\Solarity.DesignSearch\Solarity.DesignSearch.Website\Bootstrapper.cs:20
   Solarity.DesignSearch.Website.MvcApplication.Application_Start() in c:\a\src\Solarity.DesignSearch\Solarity.DesignSearch.Website\Global.asax.cs:23

[HttpException (0x80004005): Access is denied]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): Access is denied]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:11:35.440

我设法让它工作，虽然它并不理想。您可能会在我的原始帖子中注意到我正在设置 UseEmbeddedHttpServer = true。这样我就可以浏览到 http:[MyUrl]:8081 并获取 RavendDB Management Studio 以便我可以浏览我的数据。出于某种原因，RavenDB 希望在设置此属性时执行与将端口设置设置为自动 (Port=*) 时相同的端口检查。

我相信 RavenDB 可能需要修复，以便在 UseEmbeddedHttpServer 为 True 时支持端口设置，并且还允许您在创建时设置 EmbeddedDocumentStore 的 Configuration 属性。

但与此同时，您可以真正让您的 MVC4 站点与 Azure 网站上的 EmbeddedDocumentStore 一起使用，只需指定一个端口即可。此外，您确实必须使用 AppSettings 配置，而不是在创建时设置 EmbeddedDocumentStore 的 Configuration 属性（就像我在上面尝试做的那样）。这篇文章 ( [stackoverflow.com/questions/11529159/](https://stackoverflow.com/questions/11529159/) ) 展示了如何做到这一点。

不幸的是，我仍然没有找到运行 EmbeddedHttpServer 的方法，因此我可以使用 Raven Management Studio。如果我弄清楚如何，我会在这里发布一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:58:10.010

嗨，这已[在 Azure 网站上的 RavenDb 上得到回答 - 拒绝访问](https://stackoverflow.com/questions/11529159/ravendb-on-azure-websites-access-denied) 基本上您需要在 Web.config 中配置端口

# matlab - “没有足够的输入参数。” 将 fsolve 与嵌套函数一起使用时

> ID：13033307
> 
> 赞同：1
> 
> 时间：2012-10-23T14:55:40.313
> 
> 标签：matlab

我正在尝试在 matlab 中创建自己的函数来求解两个非线性方程组，同时使用嵌套函数来共享一些参数，这是一个示例代码：

```
function y=solve(a,x0)
a;
y=fsolve(nle,x0);                       % this is line 3

    function f=nle(x)
        f(1)=x(1)-a*x(1)^2-x(1)*x(2);   % this is line 6
        f(2)=2*x(2)-x(2)+3*x(1)*x(2);
    end

end 
```

这`a`是我想从命令行传递给函数的参数，`x0`也是`fsolve`.

`a=4`但是，当我在指定and后调用 malab 中的函数时`x0=[1 1]'`，它给了我以下错误：

```
Error using solve/nle (line 6)
Not enough input arguments.

Error in solve (line 3)
y=fsolve(nle,x0); 
```

我是matlab的新手，谁能告诉我哪里做错了？

提前致谢。

**编辑：** 我尝试`nle`用函数句柄替换`@nle`，但似乎还有其他问题：

```
Undefined function 'fsolve' for input arguments of type 'function_handle'.

Error in solve (line 3)
y=fsolve(@nle,x0); 
```

似乎没有意义，因为我检查了文档`fsolve`，它说它确实应该在那里使用函数句柄......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:57:28.057

你错过了nle前面的'@'，即

```
 y = fsolve(@nle,x0); 
```

应该管用。

# iphone - 如何长按和抬起 MKAnnotationView

> ID：13033310
> 
> 赞同：2
> 
> 时间：2012-10-23T14:55:47.953
> 
> 标签：iphone, mapkit

我在 MKMapView 上添加了一个 MKAnnotationView，当我长按它时，我希望它可以被抬起并移动到另一个位置。

如何？特别感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:40:51.540

## 对于 iOS 4.0 或更高版本

从 Apple's Location Awareness Guide > [Marking Your Annotation View as Draggable](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html#//apple_ref/doc/uid/TP40009497-CH6-SW22)：

> 要实现对拖动的最小支持，您必须执行以下操作：
> 
> *   在您的注释对象中，实现 setCoordinate: 方法以允许地图视图更新注释的坐标点。
>     
>     
> *   创建注释视图时，将其可拖动属性设置为 YES。

实现 setCoordinate：

```
#import <MapKit/MapKit.h>
@interface mapAnnotation : NSObject<MKAnnotation> {
    double latitude, longitude; 
}
@end

@implementation mapAnnotation
- (void)setCoordinate:(CLLocationCoordinate2D)coordinate{
    latitude = coordinate.latitude;
    longitude = coordinate.longitude;
}

-(CLLocationCoordinate2D)coordinate {
    CLLocationCoordinate2D coordinate = {latitude,longitude};
    return coordinate;
}
// ...
@end 
```

在视图控制器中创建注释视图：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString * const identifier = "identifier";
    MKPinAnnotationView *pinView = (MKPinAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (pinView ==nil) {
        pinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:identifier];
        pinView.animatesDrop = YES;
        pinView.draggable = YES;    
    }
    return pinView;
} 
```

## 适用于任何 iOS 版本

跟踪用户的触摸并相应地移动 pin 视图。查看本页底部的 DDAnnotationView：http: [//digdog.tumblr.com/post/252784277/mapkit-annotation-drag-and-drop-with-callout-info](http://digdog.tumblr.com/post/252784277/mapkit-annotation-drag-and-drop-with-callout-info)

当用户停止拖动时，将视图位置转换为地图坐标并更改注释坐标。为图钉添加一些动画。

这是一个工作示例：[https](https://github.com/digdog/MapKitDragAndDrop) ://github.com/digdog/MapKitDragAndDrop尝试将 DDAnnotationView 和 DDAnnotation 类添加到您的项目中，并使用[此行](https://github.com/digdog/MapKitDragAndDrop/blob/master/Demo/Classes/MapKitDragAndDropViewController.m#L90)下方的 MKMapViewDelegate 方法。

# java - 空对象 - 实例化或单例的东西？

> ID：13033325
> 
> 赞同：2
> 
> 时间：2012-10-23T14:56:39.197
> 
> 标签：java, null, singleton

这更像是一个风格问题，而不是“我遇到麻烦的问题”。对于 Null 占位符对象（我是否使用了正确的术语？），通常首选使用 Singleton 模式吗？为了便于讨论，这里举个例子：

```
public interface Foo {
    void myMethod();
}

public class RealFoo implements Foo {
    void myMethod() { /* Do something productive */ }
}

public class MyUniverse {
    public static void main(String args[]) {
        Foo[] fooArray = new Foo[10];
        // do something productive that might result in Null objects in the array
        for (Foo f : fooArray) {
            f.myMethod(); // I DONT WANT TO DO if (f != null) blah blah
        }
    }
} 
```

好的，这就是我的情况，是首选做A还是做B？

```
// A
public class NullFoo implements Foo {
    public NullFoo() {}       
    public void myMethod() { /* don't need to do anything */ }
}

// B
public class NullFoo implements Foo {
    private static NullFoo _instance = null;
    protected NullFoo() {}
    public static NullFoo getInstance() {
        if (_instance == null) _instance = new NullFoo();
        return _instance;
    }
    public void myMethod() {  /* don't need to do anything */ }
} 
```

谢谢！我的直觉认为 B 几乎总是优越的，但也许我错过了什么，所以我问......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:58:47.513

我会选择后者。在这方面，我可能是一个趋势支持者，但我不认为单身人士天生就是邪恶的。如果一个类没有可变状态，那么单例就可以了。

不过，我会将构造函数设为私有，不受保护。此外，您的延迟加载很容易出现竞争；我只会在声明行 ( `private static final Foo instance = new NullFoo();`) 上实例化 NullFoo。最后，不要忘记让类实际实现接口。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:02:07.657

从虚拟机的角度来看，B 方案会更好，因为 java 最多实例化一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:05:15.753

嗯，很有趣。不能说我曾经遇到过这种情况，但是...

我建议如果要一致地使用该实例（即它总是做同样的事情）然后使用 B。这样，您只有一个表示您的空对象的共享实例。这是一种节省空间的优化（而不是使用`NullFoos`.`Collections#emptyList`

不过我必须说，就 dsign 而言，我不明白为什么你会*//做一些有成效的事情，这可能会导致数组中出现 Null 对象，这些对象*会占用`Foo`你的`fooArray`元素，然后用 null 替换它。我相信你有你的理由。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T15:05:54.007

我认为你不应该在这里使用接口。接口描述了实现它的类需要支持的一组操作。但是您使用 NullFoo 类基本上可以规避该要求。

那么为什么不直接使用在 myMethod 的实现中什么都不做的基类：

```
public class BaseFoo
{
    public void myMethod()
    {
        // do nothing
    }
}

public class DerivedFoo extends BaseFoo
{
    public void myMethod()
    {
        // do actual work
    }
} 
```

或者，如果您的实际情况确实需要接口，那么请继续编写`if (foo != null) ...`测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T15:02:54.903

我将单例实现为枚举。

```
enum NullFoo implements Foo{
  INSTANCE{
    // implement methods here
  }
} 
```

请参阅：[Singleton > The Enum Way](http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way)或阅读
**Item 3: Enforce the singleton property with a private constructor or an enum type**
in [Effective Java 2nd Ed by Joshua Bloch](https://rads.stackoverflow.com/amzn/click/com/0321356683)

# objective-c - Dropbox iOS SDK 总是为 isLinked 返回“YES”：

> ID：13033327
> 
> 赞同：9
> 
> 时间：2012-10-23T14:56:47.050
> 
> 标签：objective-c, ios, dropbox

我正在使用 iOS Dropbox SDK 并想检查我的应用是否已与 Dropbox 帐户相关联。所以我这样做：

```
if (self.isLinked) {
    NSLog(@"linked");
} 
```

但是`self.isLinked`总是返回`YES`。即使在清洁和重置 iPhone 模拟器之后。

* * *

这只发生在 iOS 模拟器而不是真实设备上运行时。我不知道为什么会发生这种情况，但如果其主机 Mac 与 Dropbox 帐户相关联，则模拟器上的 Dropbox SDK 也会相关联。

要在模拟器中获得真实的行为，请在 Dropbox 首选项中取消关联您的 Mac。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T09:29:58.840

2012 年年中的某个时候（找不到 iOS SDK 版本日志），Dropbox iOS SDK 行为更改为通过卸载/重新安装应用程序（甚至在设备上）保持“链接”状态。因此，在接收“链接”回调时执行某些操作的应用程序（如我的）在重新安装后将无法运行。

一种解决方案是在首次运行时取消链接。像这样：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([[NSUserDefaults standardUserDefaults] objectForKey:HAS_RUN_KEY] == nil)
    {
        // ensure you have a DBSession to unlink
        if ([DBSession sharedSession] == nil)
        {
            DBSession* dbSession = [[[DBSession alloc] initWithAppKey:DROPBOX_KEY appSecret:DROPBOX_SECRET root:kDBRootAppFolder] autorelease];
            [DBSession setSharedSession:dbSession];
        }

        // unlink
        [[DBSession sharedSession] unlinkAll];

        // set 'has run' flag
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:HAS_RUN_KEY];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
} 
```

# c# - 你如何在 asp.net 中获取类似于 php 的 get_file_contents 的网页标记

> ID：13033331
> 
> 赞同：0
> 
> 时间：2012-10-23T14:56:53.667
> 
> 标签：c#, asp.net

我试图做一些类似于 PHP 命令 get_file_contents 的事情来让市场建立一个网页，但它必须在 ASP.net 中。我不确定我是否可以通过文件打开网页，然后将流读入另一个文件。

一个想法是：[如何使用 C# 将整个文件读入字符串？](https://stackoverflow.com/questions/7387085/how-to-read-an-entire-file-to-a-string-using-c-sharp)但我不确定这是否是我需要走的路线，或者其他人是否知道可以做我想做的事情。

寻找以下伪代码的答案：

```
$test = "www.google.com";
$string = get_file_contents($test);
$filePointer = fopen("sample.txt", "w+");
$filePointer.write($string);
fclose($filePointer); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:58:48.780

```
string html;
using (var client = new WebClient())
{
    html = client.DownloadString("http://www.google.com");
}
Console.WriteLine(html); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T14:59:47.970

认为这可能是我正在查看的内容：http: [//www.devprise.com/2006/07/14/c-method-to-mimic-php-file_get_contents/](http://www.devprise.com/2006/07/14/c-method-to-mimic-php-file_get_contents/) 不过不确定。

# email - 想要在电子邮件中创建一个链接，将自定义/特定文本从电子邮件发布到 Facebook

> ID：13033339
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:09.383
> 
> 标签：email, facebook-opengraph

我有一个礼宾服务，我的客户用来问各种问题。他们中的许多人都会通过电子邮件将答案发送给他们。他们中的一些人询问我们是否可以在电子邮件正文中添加一个按钮，以便他们将问题/答案的内容发布到 Facebook。

我已经对此进行了一段时间的研究，特别是关于 Open Graph 的 facebook 开发人员教程，但似乎我将仅限于使用预定义的对象和动作创建非常狭窄的句子。

例如，假设我的一位客户通过电子邮件向他们发送了以下答案：

***开始电子邮件***

问题：NFL历史上的3个最高分是多少？

答案：1966 年 11 月 27 日，华盛顿红皮队以 72-41 击败纽约巨人队。

2004 年 11 月 28 日，辛辛那提孟加拉虎队以 58-48 击败克利夫兰布朗队。

1963 年 12 月 22 日，奥克兰突袭者队以 52-49 击败休斯敦油人队（现为田纳西泰坦队）。

[发布到脸书]

***结束电子邮件***

我想要发生的是，当用户点击电子邮件中的“发布到 facebook”链接时，它会在他们的 facebook 帐户上发布以下内容：

***开始脸书发帖***

John Smith 向 xxxx Concierge 提出了一个问题。

问题：NFL历史上的3个最高分是多少？

答案：1966 年 11 月 27 日，华盛顿红皮队以 72-41 击败纽约巨人队。

2004 年 11 月 28 日，辛辛那提孟加拉虎队以 58-48 击败克利夫兰布朗队。

1963 年 12 月 22 日，奥克兰突袭者队以 52-49 击败休斯敦油人队（现为田纳西泰坦队）。

***结束脸书帖子***

facebook 是否使这样的自动发布（从电子邮件链接到）成为可能？

谢谢。

# c++ - 在一个 DFS 中查找有向图中的强连通分量

> ID：13033343
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:17.393
> 
> 标签：c++, c, algorithm, graph

到目前为止，我已经使用以下算法来查找图的强连通分量。

1.  调用 DFS(G) 计算每个顶点 v 的完成时间 f[v]，将 G 的顶点按完成时间的降序排序；

2.  计算 G 的转置 GT；

3.  对 G 执行另一个 DFS，这次在主 for 循环中，我们按照 f[v] 的降序遍历 G 的顶点；

4.  将 DFS 森林（由第二个 DFS 形成）中每棵树的顶点作为单独的强连通分量输出。

.

但我想知道是否有可能**仅在一个 DFS 中找到所有强连接组件。**

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:11:04.753

[我在强连接组件](http://en.wikipedia.org/wiki/Strongly_connected_component)的维基百科页面上找到了这个：

> Kosaraju 算法、Tarjan 算法和基于路径的强分量算法都有效地计算了有向图的强连通分量，但 Tarjan 和基于路径的算法在实践中受到青睐，因为它们**只需要一次深度优先搜索**而不是两次。

我认为这完全回答了你的问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T23:13:31.790

查看 Steven Skiena 的算法设计手册。它在一个 DFS 中计算 SCC。它基于最旧可达顶点的概念。

在开始时将每个顶点的可达顶点和 SCComponent# 初始化为自身。

```
low[i] = i;
scc[i] = -1; 
```

在有向图上进行 DFS，您只对后边和交叉边感兴趣，因为这两条边会告诉您是否遇到后边并从另一个输入一个组件。

```
 int edge_classification(int x, int y)
  {
    if (parent[y] == x) return(TREE);
    if (discovered[y] && !processed[y]) return(BACK);
    if (processed[y] && (entry_time[y]>entry_time[x])) return(FORWARD);
    if (processed[y] && (entry_time[y]<entry_time[x])) return(CROSS);
     printf("Warning: unclassified edge (%d,%d)\n",x,y);
  } 
```

因此，当您遇到这些边时，您会根据进入时间递归地设置可达顶点[]。if (class == BACK) { if (entry_time[y] < entry_time[ low[x] ] ) low[x] = y; }

```
if (class == CROSS) 
{
            if (scc[y] == -1)  /* component not yet assigned */
                    if (entry_time[y] < entry_time[ low[x] ] )
                            low[x] = y;
} 
```

每当顶点'v'的最低可达顶点是它自己时，就会找到一个新的强连通分量（循环可以说，a->b->c->a，a 的最低可达顶点是a）。

```
process_vertex_early(int v)
{
    push(&active,v);
} 
```

在一个顶点的 DFS 完成后（它的邻居的 DFS 也将完成），检查它的最低可达顶点：

```
if (low[v] == v) 
{     /* edge (parent[v],v) cuts off scc */
          pop_component(v);
}

if (entry_time[low[v]] < entry_time[low[parent[v]]])
          low[parent[v]] = low[v]; 
```

pop_component(...) 只是从堆栈中弹出，直到找到该组件。如果 a->b->c->a 被扫描，堆栈将有 a(bottom)->b->c(top).. pop 直到看到顶点 'a'。你得到一个'a'的SCC..同样你在一个DFS中得到所有连接的组件。

# sql - 将 SQL 子查询转换为更高效的版本

> ID：13033344
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:19.673
> 
> 标签：sql, ms-access-2007

我正在使用一个中等大小的 MSAccess .mdb 文件，我需要使用 SQL 来操作它。不幸的是，一些理论上有效的陈述似乎导致它挂起，我遇到了砖墙。

[这是 SQL Fiddle 中的简化表示](http://sqlfiddle.com/#!6/080a5/6 "SQLFiddle 表示")

三个表：products、product_category 和 categories 我需要选择仅包含具有“HIDE = 1”字段的项目的类别 如果类别包含隐藏 = 0 的产品，则不应选择它。

我可以使用子查询相对轻松地做到这一点，但查询会停止。在过去，依赖左连接的查询似乎可以有效地执行，但我无法将我的思想围绕在连接上，足以将此查询转换为那种格式。

编辑：

```
SELECT c.categoryid 
FROM product_category AS c
      LEFT JOIN
      (
          SELECT DISTINCT c.categoryid 
          FROM  product_category AS c
                LEFT JOIN products AS p 
                  ON c.catalogid = p.catalogid
          WHERE p.hide = 0
      )    y ON y.categoryid = c.categoryid

WHERE y.categoryid IS NULL 
```

有人发布了上述查询作为答案，但由于某种原因将其删除。据我所知，它可以工作并且工作得很快。我认为这个问题可以回答。如果我记得，一旦计时器允许，我会自行发布答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:02:02.800

我相信您只需要取消关联子查询，例如...

```
SELECT c.categoryid FROM product_category AS c
WHERE c.categoryid NOT IN 

(SELECT DISTINCT c1.categoryid FROM product_category AS c1
LEFT JOIN products AS p ON c1.catalogid = p.catalogid
WHERE p.hide = 0) 
```

请注意我如何将子查询`product_category`表别名`c1`为`c`- 这意味着子查询将只执行一次，而不是对主查询的每一行执行一次。

[SQL小提琴](http://sqlfiddle.com/#!6/080a5/8/0)

请注意，毫无疑问，还有*更多的*效率有待发现，但我认为这足以满足您的目的。

事实上，这里不需要 LEFT JOIN 我不认为即...

```
SELECT c.categoryid FROM product_category AS c
WHERE c.categoryid NOT IN 

(SELECT DISTINCT c1.categoryid FROM product_category AS c1
INNER JOIN products AS p ON c1.catalogid = p.catalogid
WHERE p.hide = 0) 
```

..这将为您提供一些额外的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:58:20.383

如果每个 catalogid 只有一个 categoryid，那么您可以去掉不同的：

```
Select
  c.id, c.categoryname
From
  category c
Where
  Not Exists (
    Select 
      'x'
    From 
      products p
        Inner Join
      product_category pc
        on pc.catalogid = p.catalogid
    Where
      pc.categoryid = c.id and
      p.hide = 0
  ) 
```

已编辑 - 小提琴中的测试数据似乎有误，我已更正。这应该现在可以工作

[http://sqlfiddle.com/#!6/56f5e/1/0](http://sqlfiddle.com/#!6/56f5e/1/0)

# mysql - Magento 缓存正在重用错误代码，导致“连接过多”导致站点死亡

> ID：13033345
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:20.467
> 
> 标签：mysql, magento

在我的 Magento 商店中，有一段代码没有关闭数据库连接（似乎）。通常我看不出有什么问题。但是，当我启用缓存时会出现问题。几个小时后，该站点停止运行，并最终因 MySQL 错误“连接过多”而死机。似乎“坏”的代码被缓存和重用，因此变得越来越糟，直到……死亡。

我正在挠头，想知道从哪里调用这段流氓代码（当然可能有不止一个问题）。我怀疑这是一个核心问题，否则我可能会在谷歌搜索这个问题时听说过它。这样就只剩下我编写的第 3 部分模块和代码了。

一种选择是禁用所有模块并重新启用每个模块，直到问题发生。但当然，它可能不会在几个小时内发生（当它发生时，你只知道它会在半夜发生；））。那么当然它可能不是第 3 方的问题，而是我做过的事情。而且我还需要商店中的某些模块才能正常运行（支付网关等）。

因此，我正在寻求有关如何追踪此问题的建议...

我已经启用了 MySQL 日志记录，但它并没有真正告诉我那么多。

有任何想法吗？

Magento 1.7.0.2 和 APC 与 Apache 2

# charts - 在 Dynamics CRM 中的两列总和上绘制图表

> ID：13033351
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:31.777
> 
> 标签：charts, dynamics-crm-2011

我想绘制一个基于两列的折线图 - 我们称之为相关字段`cats`和`dogs`. 我知道我可以创建一个名为`animals`并填充它的第三个字段，但这在我看来是一个丑陋的解决方法。

我很确定没有办法通过 GUI 实现这一点，所以我希望编辑生成的 XML 会打开这种可能性。据我所知，[这个讨论](https://stackoverflow.com/questions/3669802/concatenated-calculated-columns-in-dynamics-crm-view)是不可能的，但由于它已经过时，我希望从那时起它就成为可能。

这个有运气吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-09-14T14:30:48.943

有点不清楚你到底想问这个问题。这是一篇关于如何修改图表的 fetchxml 以扩展 crm 图表功能的优秀博客（它可能会或可能不会回答您的问题，具体取决于您“基于两列画一条线”的确切含义）：[https:// crmchartguy.wordpress.com/2015/06/21/compare-this-year-to-last-year-with-a-dynamics-crm-chart/](https://crmchartguy.wordpress.com/2015/06/21/compare-this-year-to-last-year-with-a-dynamics-crm-chart/)

# android-resources - Android：错误地清理了项目并丢失了R文件

> ID：13033352
> 
> 赞同：0
> 
> 时间：2012-10-23T14:57:32.693
> 
> 标签：android-resources

我是android开发的新手。R 文件未检测到我清理项目并丢失 R 文件的两个布局。它不再存在于 gen 文件夹中，并且所有类都显示错误。构建选项被选中，即我无法构建项目。在这个阶段，我负担不起重新创建该项目的费用。因此，我们将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:15:02.323

Android 清单包含错误。Manifest 文件在 android:label 属性中使用了 Manifest 未检测到的活动的布局名称，因为 R 文件已被删除。我将标签更改为 app_name 并在修复清单错误时，重新生成了 R 文件。如果其他人遇到同样的问题，这可能会有所帮助。

# php - 核心 PHP 中的 Ajax 调用，

> ID：13033353
> 
> 赞同：0
> 
> 时间：2012-10-23T14:57:37.500
> 
> 标签：php, jquery, ajax

在我的一个前端 PHP 文件中，我在我的 Jquery 中执行此操作：

```
var name = $('#core_name').val();
var param = {};
        param['name'] = name;
        $.ajax({
            url:'../back_end/user.php/verify_name',
            data:param,
            type:'POST',
            success:function(result){
                alert(result);
            }
        }); 
```

在我的 back_end/user.php 中，我正在这样做：

```
<?php
class User{

    function index(){
        //for now do nothing  
    }
    function verify_name(){
        echo "here";        
    }
}
?> 
```

为什么我不能提醒“这里”，我做错了什么？Firebug 没有检测到错误，所以文件 user.php 有正确的路径（没有 404 错误）为什么我不能到达函数 verify_name ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:58:58.397

您需要实例化该类`User`并调用`verify_name()`.`back_end/user.php`

您可以将以下内容添加到`back_end/user.php`：

```
$user = new User;
$user->verify_name(); 
```

# java - SQLite 'BETWEEN' 的行为不符合预期

> ID：13033357
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:51.580
> 
> 标签：java, sqlite, jdbc

我正在尝试选择介于两列值之间的所有行。这些值是 UNIX 时间戳，但查询根本不返回任何行。为什么会这样？

这是我的代码：

```
public static ArrayList<Appointment> getAppointments(long start, long end) {
    ArrayList<Appointment> appointments = new ArrayList<>();
    try {
        Statement stat = db.createStatement();
        System.out.println("\n" + start + "  ->  " + end);

        // debugging only
        try (ResultSet rs = stat.executeQuery("SELECT * FROM appointments;")) {
            while (rs.next()) {
                long time = rs.getLong("date");
                if (time >= start && time <= end) {
                    System.out.println("Should be adding to list");
                }
            }
        } // 

        try (ResultSet rs = stat.executeQuery("SELECT * FROM appointments WHERE date BETWEEN " + start + " AND " + end + ";")) {
            while (rs.next()) {
                System.out.println("ADDING");
                appointments.add(new Appointment(rs.getLong("date"), rs.getInt("duration")));
            }
        }
    } catch (SQLException ex) {
    }
    System.out.println(appointments);
    return appointments;
} 
```

表中有三行具有这些值：

```
1347390000000 15
1347461100000 30
1347469200000 45 
```

输出是：

```
date = 1347390000000 duration = 15
date = 1347461100000 duration = 30
date = 1347469200000 duration = 45

1350141222283  ->  1350746022283
[]

1349536422283  ->  1350141222283
[]

1348931622283  ->  1349536422283
[]

1348330422283  ->  1348931622283
[]

1347725622283  ->  1348330422283
[]

1347120822283  ->  1347725622283
Should be adding to list
Should be adding to list
Should be adding to list
[]

1346516022283  ->  1347120822283
[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:38:21.690

您必须声明列的数据类型。

# actionscript-3 - 如何删除 eventListener，AS3

> ID：13033359
> 
> 赞同：1
> 
> 时间：2012-10-23T14:57:57.463
> 
> 标签：actionscript-3, event-listener

在我的时间线的第一帧，我有以下动作脚本：

```
stop();

ClickTAG.addEventListener(MouseEvent.ROLL_OVER, manageMouseOver, false, 0, true);   

function manageMouseOver(event:MouseEvent):void
{   
    play(); 
} 
```

我不太熟悉 AS，但这完成了我想要的，即在 mouseOver 上启动时间线。但是，如果您稍后反复将鼠标悬停和关闭 swf，这可能会在时间轴稍后中断动画，例如，它将跳过时间轴延迟并在最后一帧之后重新开始电影。

如何在电影到达第二帧后删除此侦听器或阻止它运行？我对AS的基本了解较少，所以感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:00:37.243

```
function manageMouseOver(event:MouseEvent):void{   
     event.currentTarget.removeEventListener(event.type, manageMouseOver);
     play(); 
} 
```

这个简单的代码能够在事件被调用后立即删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:17:49.107

在 AS3 中删除事件侦听器的便捷方法

```
function manageMouseOver(event:MouseEvent):void
{
    event.currentTarget.removeEventListener(event.type, arguments.callee);

   play(); 
} 
```

有关更多详细信息[arguments.callee 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/arguments.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-11T23:52:15.200

在您的情况下从对象本身中删除侦听器：

```
stop();

ClickTAG.addEventListener(MouseEvent.ROLL_OVER, manageMouseOver, false, 0, true);   

function manageMouseOver(event:MouseEvent):void
{   
    ClickTAG.removeEventListener(MouseEvent.ROLL_OVER, manageMouseOver)
    play();
} 
```

# html - CSS3查询目标标签+输入[type="radio"]（指定节点）

> ID：13033360
> 
> 赞同：0
> 
> 时间：2012-10-23T14:58:04.577
> 
> 标签：html, css, css-selectors

嗨，我`<label>`只想在 a 旁边定位和修改标签`input[type=radio]`，在任何其他情况下都没有。

我的代码如下所示：

```
<fieldset>
  <legend>Some legend</legend>
  <p>Some explanation</p>
  <label>
   <input type="radio" name="#{name}" value="#{value}" />
  </label>
</fieldset> 
```

我尝试过`fieldset label:first-child+input[type=radio]{}`但没有工作，如果有人可以帮助我会很棒。

**编辑**：我想要的是能够只设置 LABEL 标签而不是 RADIO button INPUT 标签的样式，并且这种样式仅在`<label><input type="radio"></label>`找到结构时才适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:08:14.887

你所要求的在 CSS 中是不可能的。无法“向后”或“向上”遍历 DOM 树（因此您不能针对先前的兄弟节点或父节点）。

请参阅这篇文章：[是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

# c# - SQLDependency + 服务代理

> ID：13033362
> 
> 赞同：3
> 
> 时间：2012-10-23T14:58:07.850
> 
> 标签：c#, sql, sql-server, service-broker, sqldependency

当某些表中的数据发生更改时，我正在使用 SqlDependency 获取通知。

```
 private void subscribeBroker()
    {
        using (var conn = new SqlConnection(connString))
        {
            conn.Open();

            var cmd = new SqlCommand("SELECT text FROM dbo.Test");
            cmd.Connection = conn;

            var dependency = new SqlDependency(cmd);
            dependency.OnChange += dependency_OnChange;
            SqlDependency.Start(connString);

            cmd.ExecuteNonQuery();
        }
    }

    void dependency_OnChange(object sender, SqlNotificationEventArgs e)
    {
        //Do something...
        subscribeBroker();
    } 
```

它正在工作，但我有一些问题。

1）我没有找到一种方法来获取更改了哪一行的信息。我需要从整个表中读取所有数据，看看有什么不同。有没有办法获取这些信息？（主 ID 或其他东西）也许使用与 SqlDependency 不同的方法？

2）如果“某人”非常快地更改数据怎么办。可能有些更改不会被通知？（我担心通知和再次订阅之间的时间。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:43:41.477

关于 1- 查询通知会通知您某事已更改的事实。如果您想获取自上次以来发生的更改 - 您可能可以使用时间戳列。

关于 2- 查询通知会通知您有关更改，然后被删除。然后您再次订阅通知。删除和创建通知之间的时间是不发送有关更改的通知的时间。

查询通知更适用于数据不经常更改的情况。例如 - 一些兑现的分类值。因此，您订阅某些表中的更改，等待更改，并在它们发生时获得最新版本的数据。应该考虑到查询通知也使用服务器资源，所以如果你有很大的表并且想要对一些小的数据子集进行更改，很多查询可能会在性能方面受到影响（比如索引视图）。

如果您需要根据更改的数据采取一些措施并且每个更改都很重要，那么我猜触发器 + 服务代理可能会更有效。或者，根据您的需要，更改数据捕获。

# jquery - 'this' 在我的课堂上不起作用

> ID：13033363
> 
> 赞同：0
> 
> 时间：2012-10-23T14:58:07.910
> 
> 标签：jquery, jquery-mobile

我有这个代码，它是我的用户类的一部分。当我调用这个函数时：

```
user = new User();
user.regUser("john", "john@doe.com", "john123", function() { }); 
```

我得到错误

```
Uncaught TypeError: Object #<Database> has no method 'writeDb' 
```

用户类中的函数：

```
User.prototype.regUser = function(name, email, password, cb) {
        this.db.exec("SELECT * from users WHERE user_email='"+email+"';", function(results) {
            var len = results.rows.length;
            if (typeof(cb) == 'function') {
                if (len < 1) {

                    this.name = name;
                    this.email = email;
                    this.password = password;
                    this.writeDb();

                    cb(true); // username doesn't exists

                } else {
                    cb(false); // username already exists
                }
            }
        });
    } 
```

问题是否可能是在我的函数的嵌套函数中调用了“this”变量？因为在其他函数中没有嵌套时是有效的。我怎样才能解决这个问题？

*   小编辑：我已经写了 this.db.writeDb() 必须是 this.writeDb() 仍然得到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:04:52.550

您假设“this”对象是回调中的用户类。只需声明一个闭包变量来捕获“this”对象。尝试这个;

```
User.prototype.regUser = function(name, email, password, cb) {
      var user = this;
      user.db.exec("SELECT * from users WHERE user_email='"+email+"';",   function(results) {
        var len = results.rows.length;
        if (typeof(cb) == 'function') {
            if (len < 1) {

                user.name = name;
                user.email = email;
                user.password = password;
                user.db.writeDb();

                cb(true); // username doesn't exists

            } else {
                cb(false); // username already exists
            }
        }
    });
} 
```

# xml - xml转换

> ID：13033367
> 
> 赞同：3
> 
> 时间：2012-10-23T14:58:23.023
> 
> 标签：xml

```
 <Products>    
    <Product ProductID="1">
      <productName>Ball</productName>
      <Color>Green</Color>
    </Product>
    <Product ProductID="2">
      <productName>Doll</productName>
      <Color>White</Color>
    </Product>      
  </Products> 
```

我有一个像上面这样的 xml 输入。但是我在创建产品元素时遇到问题，该元素具有产品名称作为属性，产品 ID 作为产品下的元素。下面是我拥有的代码。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
 <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

 <xsl:template match="//Products">
 <html>
  <body>
   <Products>
    <xsl:for-each select="//Product">
     <xsl:call-template name="Import"/>
    </xsl:for-each>
   </Products>
  </body>
 </html>
 </xsl:template>    

  <xsl:template name="Import" match="@*|node()">
    <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

   </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:11:09.893

我相信你可以通过以下方式做到这一点：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="//Products">
        <html>
            <body>
                <Products>
                    <xsl:apply-templates />
                </Products>
            </body>
        </html>
    </xsl:template>
    <xsl:template match="Product">
        <xsl:element name="product">
            <xsl:attribute name="name" select="ProductName/text()" />
            <xsl:element name="productID">
                <xsl:value-of select="@ProductID" />
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

顺便说一句，您在输入 XML 中有一个小错误（`productName`没有大写字母）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:11:18.130

改变

```
<xsl:template match="//Products">
 <html>
  <body>
   <Products>
    <xsl:for-each select="//Product">
     <xsl:call-template name="Import"/>
    </xsl:for-each>
   </Products>
  </body>
 </html>
 </xsl:template> 
```

进入

```
<xsl:template match="Products">
 <html>
  <body>
   <Products>
    <xsl:apply-templates/>
   </Products>
  </body>
 </html>
 </xsl:template> 
```

然后写一个模板

```
<xsl:template match="Product">
  <product name="{ProductName}">
    <xsl:apply-templates select="@ProductID"/>
  </product>
</xsl:template> 
```

和一个模板

```
<xsl:template match="Product/@ProductID">
  <productID>
    <xsl:value-of select="."/>
  </productID>
</xsl:template> 
```

# javascript - 使用 Javascript 和 Underscore.js，如何比较 2 个数组并在匹配时替换属性？

> ID：13033371
> 
> 赞同：1
> 
> 时间：2012-10-23T14:58:27.283
> 
> 标签：javascript, arrays, node.js, underscore.js

我有2个这样的数组：

```
var arrayOne = [
    {page:'1',tags:['foo','bar']},
    {page:'2',tags:['oh','boy']}
];
var arrayTwo = [
    {page:'1',tags:['go','out']},
    {page:'9b',tags:['red','blue','green']}
]; 
```

我想比较两个数组，如果`page`属性相同，将`tags`in`arrayOne`的`tags`属性替换为 from的属性`arrayTwo`。

`page: 1`所以给定上面的示例数组，只有of的标签`arrayOne`会被替换为`page: 1`的值`arrayTwo`。

我想我可以用 来做到这一点`underscore.js`，但我很难知道如何做。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:18:28.007

如果您实际上有两个这样的 JavaScript 对象数组：

```
var a1 = [
    {page: '1', tags: ['foo', 'bar']},
    {page: '2', tags: ['oh',  'boy']},
    //...
];
var a2 = [
    {page: '1',  tags: ['go', 'out']},
    {page: '9b', tags: ['red', 'blue', 'green']},
    //...
]; 
```

然后我会转换`a2`为一个页面到标签的查找表：

```
var lookup = { }, i, e;
for(i = 0, e = a2[i]; i < a2.length; e = a2[++i])
    lookup[e.page] = e.tags; 
```

然后在进行时通过`a1`合并`lookup`值旋转：

```
for(i = 0, e = a1[i]; i < a1.length; e = a1[++i])
    e.tags = lookup[e.page] || e.tags; 
```

演示：http: [//jsfiddle.net/ambiguous/aDgH7/](http://jsfiddle.net/ambiguous/aDgH7/)

[`_.reduce`](http://underscorejs.org/#reduce)如果你必须使用下划线，你可以用and替换循环[`_.each`](http://underscorejs.org/#each)：

```
var lookup = _(a2).reduce(function(lookup, e) {
    lookup[e.page] = e.tags;
    return lookup;
}, { });
_(a1).each(function(e) {
    e.tags = lookup[e.page] || e.tags;
}); 
```

演示：http: [//jsfiddle.net/ambiguous/rkMZz/](http://jsfiddle.net/ambiguous/rkMZz/)

如果你可以假设一个现代的 JavaScript，那么可以使用标准[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reduce)和[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)数组方法：

```
var lookup = a2.reduce(function(lookup, e) {
    lookup[e.page] = e.tags;
    return lookup;
}, { });
a1.forEach(function(e) {
    e.tags = lookup[e.page] || e.tags;
}); 
```

演示：http: [//jsfiddle.net/ambiguous/cy2Qy/](http://jsfiddle.net/ambiguous/cy2Qy/)

如果您实际上有 JSON 字符串数组，那么您可以混合`JSON.parse`并`JSON.stringify`调用来解包和重新打包数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:04:17.727

像

```
var arrayOne = [
    '{"page":"1","tags":["foo","bar"]}',
    '{"page":"2","tags":["oh","boy"]}'
];
var arrayTwo = [
    '{"page":"1","tags":["go","out"]}',
    '{"page":"9b","tags":["red","blue","green"]}'
];

var maxLen = Math.max( arrayOne.length, arrayTwo.length ),
    objA, objB;

while( maxLen-- ) {
    objA = JSON.parse( arrayOne[ maxLen ] );
    objB = JSON.parse( arrayTwo[ maxLen ] );

    if( objA.page === objB.page ) {
        objA.tags = objB.tags
        arrayOne[ maxLen ] = JSON.stringify( objA );
    }
} 
```

这几乎是一个*完美的世界*例子。如果数组 1 和 2 不包含相同数量的项目，这会变得有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:25:31.920

我能够通过使用下划线来做我需要的事情，方法是像这样（ [http://jsfiddle.net/4JP7g/](http://jsfiddle.net/4JP7g/)`_each` ）在另一个内部做一个：

```
var arrayOne = [
    {page:1,tags:["foo","bar"]},
    {page:2,tags:["oh","boy"]}
];
var arrayTwo = [
    {page:1,tags:["go","out"]},
    {page:9,tags:["red","blue","green"]}
];

_.each(arrayOne, function(one){
    _.each(arrayTwo, function(two){
      if(one.page === two.page){
                one.tags = two.tags;  
                console.log (one.tags);            
      }           
    });
});​ 
```

# jquery - 请求的 JSON 解析失败

> ID：13033374
> 
> 赞同：3
> 
> 时间：2012-10-23T14:58:32.837
> 
> 标签：jquery, ajax, json, parsing

由于某种原因，下面的 ajax 代码存在解析错误。我怎么能找出它是什么，和/或有人能看出什么问题吗？

```
$('#listElements').sortable({
        //revert: true,
        update: function(event, ui) {

            var order = [];
            $('.listObject li').each(function (e) {
                order.push($(this).attr('id'));
            });
            $.ajax({
                type: "POST",
                url: "index.php?",
                dataType: "json",
                data: { json: order },                  error: function(jqXHR, exception) {
                    if (jqXHR.status === 0) {
                        alert('Not connect.\n Verify Network.');
                    } else if (jqXHR.status == 404) {
                        alert('Requested page not found. [404]');
                    } else if (jqXHR.status == 500) {
                        alert('Internal Server Error [500].');
                    } else if (exception === 'parsererror') {
                        alert('Requested JSON parse failed.');
                    } else if (exception === 'timeout') {
                        alert('Time out error.');
                    } else if (exception === 'abort') {
                        alert('Ajax request aborted.');
                    } else {
                        alert('Uncaught Error.\n' + jqXHR.responseText);
                    }
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:01:37.777

此 JavaScript 代码中没有解析错误。

请发布“index.php”的响应和您收到的错误消息。

查看响应数据。在浏览器中打开 index.php，按 F12 并将其插入控制台：

```
 $.ajax({
            type: "POST",
            url: "index.php",
            //dataType: "json",
            data: { json: order },
            success: function(data) {
               console.log(data);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:08:12.923

data: { json: order } ...格式不正确...

# sql-server - 如何更改具有命名默认约束和命名外键约束的表添加列？

> ID：13033379
> 
> 赞同：75
> 
> 时间：2012-10-23T14:58:49.673
> 
> 标签：sql-server

我有两个现有表（TableA 和 TableB），我需要向 TableA 添加一个新列，该列具有 TableB 的外键并且默认值不为空......并且这两个约束都需要命名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-10-23T14:58:49.673

在一个语句中添加两个约束并不像我想象的那么容易，而且那里似乎没有很多例子（至少我不能很容易地找到任何例子），所以我想我会在这里分享我是如何做到的，也许有人可以提出更好的方法？

```
ALTER TABLE [table name] ADD
    [New Column Name] [Column Type] 
    CONSTRAINT [constraint name] DEFAULT ([default value]) NOT NULL,
    CONSTRAINT [constraint name] FOREIGN KEY ([New Column Name]) 
    REFERENCES [Other Table] ([Foreign ID]) 
```

例子：

```
ALTER TABLE tableA ADD
    myNewColumn BIGINT 
    CONSTRAINT myNamedConstraint_df default (1) NOT NULL,
    CONSTRAINT myNamedConstraint_fk FOREIGN KEY (myNewColumn)
    REFERENCES tableB (tableBPrimaryKeyID) 
```

# java - 如何检查日期是否已超过列表中的日期？在java中

> ID：13033384
> 
> 赞同：0
> 
> 时间：2012-10-23T14:58:57.533
> 
> 标签：java, date

好的，所以我拥有的是一个 ScheduledExexecutorService，它每秒检查一次日期列表中的日期是否已过，代码：

```
public void dateCheckinator(){
        ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
        Runnable r = new Runnable() {
            @Override
            public void run() {
                Calendar cal = Calendar.getInstance();
                for(int i=0;i<dateList.size();i++){
                    if (cal.getTime()>dateList.get(i)){
                        kaladeList.add(kaladeList.get(i));
                    kaladeListats.add(kaladeListats.get(i));
                    }
                }
                System.out.println(cal.getTime());
            }
        };
        scheduler.scheduleAtFixedRate(r, 1, 1, TimeUnit.SECONDS);
    } 
```

但是我在 if 语句中收到错误，我如何检查日期是否已过？我会将调度程序更改为每分钟左右检查一次，而不是几秒钟后检查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:01:51.210

在 Java 中，您应该使用`after`或`before`方法。

```
if (cal.getTime().after(dateList.get(i))){
   kaladeList.add(kaladeList.get(i));
   kaladeListats.add(kaladeListats.get(i));
} 
```

# c++ - 在 OpenGl 中读取 TGA 文件以创建 3d 用户

> ID：13033388
> 
> 赞同：0
> 
> 时间：2012-10-23T14:59:16.580
> 
> 标签：c++, opengl, textures, tga

我有一个 TGA 文件和一个库，它已经拥有阅读 TGA 和使用它们所需的一切。

该类有一个名为pixels()的方法，它返回一个指针，该指针指向像素存储为RGBRGBRGB的内存区域...

我的问题是，如何获取像素值？

因为如果我做这样的事情：

```
img.load("foo.tga");
printf ("%i", img.pixels()); 
```

它给了我大概的地址。

我在这个网站上找到了这段代码：

```
struct Pixel2d
{
    static const int SIZE = 50;
    unsigned char& operator()( int nCol,  int nRow, int RGB)
    {
        return pixels[ ( nCol* SIZE + nRow) * 3 + RGB];
    }

    unsigned char pixels[SIZE * SIZE * 3 ];
};

int main()
{

    Pixel2d p2darray;
    glReadPixels(50,50, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, &p.pixels);

    for( int i = 0; i < Pixel2d::SIZE ; ++i )
    {
        for( int j = 0; j < Pixel2d::SIZE ; ++j )
        {
            unsigned char rpixel = p2darray(i , j , 0);
            unsigned char gpixel = p2darray(i , j , 1);
            unsigned char bpixel = p2darray(i , j , 2);
        }
    }
} 
```

我认为它对我很有用，但是我怎样才能告诉程序从我的 img 中读取呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:26:01.493

Tga 支持不同的像素深度。而且我们不知道您使用的是什么库。但一般来说，pixels() 应该返回一个指向包含像素的缓冲区的指针。假设为了论证，它将像素解压缩为每通道 8 位的子像素，然后每个像素由 3 个字节表示。

因此，要访问缓冲区中给定偏移量的像素：

```
const u8* pixelBuffer = img.pixels():

u8 red   = pixelBuffer[(offset*3)+0];
u8 green = pixelBuffer[(offset*3)+1];
u8 blue  = pixelBuffer[(offset*3)+2]; 
```

如果您知道图像缓冲区的宽度，那么您可以通过其 x 和 y 坐标获得一个像素：

```
u8 red = pixelBuffer[((x+(y*width))*3)+0]; 
```

# r - 将上标添加到点阵图标签 R

> ID：13033389
> 
> 赞同：1
> 
> 时间：2012-10-23T14:59:27.803
> 
> 标签：r, lattice

我需要在我的 R 格子图标签中添加上标，特别是使用“m^2”。

```
equivalence.xyplot(mydata$IsoCanopyArea ~ mydata$ControlCanopyArea,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25,
                   xlab= "ISODATA (m^2)",
                   ylab= "Measured (m^2)") 
```

此函数使用点阵图形，因此典型的命令似乎不起作用：

```
plot(0, ylab = ~ "AddTextHere" (m^2)) 
```

我在这个站点上查看了几个示例，但均未成功：[example1](https://stackoverflow.com/a/10628662/1446289)和[example2](https://stackoverflow.com/a/9507009/1446289)（*注意*我是与 example2 中的 OP 不同的 Aaron）

如何在点阵图标签中完成上标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:08:25.247

使用`expression`如下：

```
plot(...
    xlab=expression("ISODATA " (m^2))
    ylab= expression("Measured" (m^2))
....) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:32:27.813

根据@Jilber 的解决方案，对图表进行了以下更改：

```
equivalence.xyplot(mydata$IsoCanopyArea ~ mydata$ControlCanopyArea,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25,
                   xlab= expression("ISODATA " (m^2)),
                   ylab= expression("Measured " (m^2))) 
```

![在此处输入图像描述](../Images/d4355eeef479aa6d33f3277dbfe20a84.png)

# java - 我将如何嵌入用户界面来使用数组列表而不是我已经拥有的数组来输入各种类型的汽车

> ID：13033391
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:59:29.983
> 
> 标签：java, netbeans

这是我的课

```
package javaapplication1;

public class Car {

private String model;
private String reg;
private String colour;
private double litreEngine;

//Default Constructor
public Car() {
    model = null;
    reg = null;
    colour = null;
    litreEngine = -1;
}

public Car(String startModel, String startReg, String startColour, double startLitreEngine) {
    model = startModel;
    reg = startReg;
    colour = startColour;
    litreEngine = startLitreEngine;
}

//Prints out Car attributes

public void print() {
    System.out.println("Model:" + model + "Reg:" + reg + "Colour:" + colour + "litreEngine:" + litreEngine);
}

public String toString() {
   return ("Model:" + model + " Reg: " + reg + " Colour: " + colour + " Litre Engine: " + litreEngine);
}

//Get and set Methods
public String getModel() {
    return model;
}

public String getReg() {
    return reg;
}

public String getColour() {
    return colour;
}

public double getLitreEngine() {
    return litreEngine;
}

public void setModel(String new_model)
{
    model = new_model;
}

public void setReg(String new_Reg)
    {
        reg = new_Reg;
}

public void setnumberOfHoursPerWeek(String new_colour)
{
            colour = new_colour;
}

public void setcompulsory(double new_litreEngine)
{
            litreEngine = new_litreEngine;
}

} 
```

这是我的测试课

```
package javaapplication1;

import java.util.Scanner;

public class CarTestApp {

public static void main(String[] args) {
    Scanner in = new Scanner(System.in);
    Car[] values = new Car[4];
    int i = 0;
    String Continue = "Y";
    String Stop = "N";
    String answer = null;

    //Car c = new Car("VW Golf", "01D1234", "Red", 1.6);
    //Car d = new Car("Mazda MX-5", "03WW324", "Olive", 1.6);
    //Car e = new Car();

    // Creates car details from user input.
    do {
        System.out.println("Enter model details: ");
        String model = in.nextLine();

        System.out.println("Enter reg details: ");
        String reg = in.nextLine();

        System.out.println("Enter colour details: ");
        String colour = in.nextLine();

        System.out.println("Enter engine details:(Number) ");
        String line = in.nextLine();
        double litreEngine = Double.parseDouble(line);
        //double litreEngine = in.nextDouble();

        Car one = new Car(model, reg, colour, litreEngine);
        values[i] = one;
        i++;

        if (i < values.length) {
            System.out.println("Do you want to add another car?(Y/N)");
            answer = in.nextLine();
        }
    } while (answer.equalsIgnoreCase(Continue) && i < values.length);

    System.out.println("Thank you for inputting this information");

    System.out.println(values[0]+"\t"+values[1]+"\t"+values[2]+"\t"+values[3]);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:23:56.813

我认为您需要一个菜单​​驱动的程序来与用户交互以执行不同的任务。

首先，您需要不同的方法，这将完成添加汽车的工作。然后你可以有一个开关盒，它可以处理你的各种情况。

```
public static void main(String args) {

    int choice = 0;
    char redo = 'n';

    do {   
        System.out.println("Enter your choice:");
        System.out.println("1\. Add a car \n 2\. Exit");

        choice = /** Read choice from user **/

        switch (choice) {
              case 1: addCar();                          
                      System.out.println("Do you want to continue? (Y or N)?");
                      redo = /** read char from user ('y' or 'n') **/
                      break;

              case 2: redo = 'n';
                      break;
        }

    } while (redo == 'Y' || redo == 'y'));
}

public static void addCar() {
    // Add the Car adding logic here
} 
```

您可以声明一个可以动态增加大小的，而不是使用`Array`for storage 。而且您需要在您的主要方法之外将其声明为实例变量。`Cars``ArrayList`

# jquery - 如何将参数传递到 jquery UI 对话框

> ID：13033392
> 
> 赞同：0
> 
> 时间：2012-10-23T14:59:31.407
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-dialog

我的页面上有几个链接，每个链接都包含不同的`id=X`. 我想在用户单击这些链接中的任何一个时打开一个对话框，并且还想要`id`单击的链接的值。使用此 ID，我需要返回我的服务器并使用 ajax 将页面获取到对话框中。

我的第一步是尝试将 ID 放入对话框中。所以，我创建了一个示例：http: [//jsbin.com/ajefel/1/](http://jsbin.com/ajefel/1/)

对话框打开，但是，我不知道如何访问`id`对话框中单击的链接的值。

**问题**

在上面的[示例](http://jsbin.com/ajefel/1/)中，如何在对话框中包含单击链接的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:02:34.770

将对发件人的引用传递给您的函数：

```
<a href="#?id=3" onclick="return showDialog(this)"> 
```

修改函数以接受 sender 作为参数：

```
function showDialog(sender){
   // TODO
   alert(sender);
} 
```

PS：尽可能避免使用内联 javascript..

查看您修改后的[JSBIN](http://jsbin.com/ajefel/3/)。

# ruby-on-rails - Ruby：在关联对象发生更改时标记对关联对象的修改的解决方案

> ID：13033397
> 
> 赞同：0
> 
> 时间：2012-10-23T14:59:45.870
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, message-queue

我正在处理这个要求：我有一个很大的对象关系模型，其中实体之间的联系非常紧密。让我们以这种关系为例：一栋建筑有很多公寓，一个公寓有很多分区。现在，我想要的是：当任何部门发生变化时，我想“通知”建筑物，或者更好地标记建筑物已被“更新”或“修改”。

*   当前解决方案：我们有一个自己编写的实现，我们将在其中将分区标记为“影响”建筑物，并且每次更新分区时都会更新建筑物的“修改”时间戳。

*   期望的解决方案：一个已经存在的“开箱即用”的实现（一个gem，一个插件，也许是上帝），这将使我们免于重构我们的实现的工作。

*   不需要的解决方案：请不要告诉我用 :autosave => true 标记所有这些关联。我想要一个可排队的解决方案。

当然，也欢迎不包含所需解决方案但建议改进当前解决方案性能的解决方案。在缺乏理想的解决方案的情况下，我们肯定会改进现有的解决方案。

一个小编辑：

这种行为必须是通用的。它不仅适用于建筑案例，任何具有关联的模型都可以具有这种行为。这将始终是相同的：获取受影响的关联并更新它们。现在，我不想用相同的例程编写不同的观察者。

关于性能问题：更新受影响的关联更新也必须触发其受影响的关联。现在，让我们假设 1 个建筑物影响 100 个分区，每个分区影响 100 个椅子。现在，观察者解决方案仅适用于业务级别。也就是说，我必须实例化每个 AR 实例，以便观察者可以采取行动。我认为这是糟糕的表现。如果 A 影响 100 个 B，我用一个 DB 语句来做。但是，当我使用 SQL 完成所有操作时，如何触发这 100 个观察者呢？

所以，回到主要的更新点：这种行为是通用的，最重要的是，性能必须是顶级的（例如，关联可能会触发 has_many 关联的 nxn 更新）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:07:44.247

您可以使用[`observer`](http://apidock.com/rails/ActiveRecord/Observer). 创建名称为`audit_observer.rb`的文件`app/models`

```
class AuditObserver < ActiveRecord::Observer
  observe :division

  def after_update(division)
    division.logger.info('Division is updated at #{division.updated_at}')
    ######Your logic goes here 
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:02:06.117

所以，我解决它的方法是混合了关于观察者设计模式实现的各种建议。因此，首先，该模式的基本实现都不适合我。为什么？我想要一个模型 A 观察其关系 B 的概念，B 被其关系 A 观察，并且这个观察的例程在其他地方定义，在一个（让我们称之为）通知程序中。

为什么我不能使用 Ruby 'observer' 库？理论上我可以做到这一点，但是被观察的对象调用一个名为“changed”的方法来通知它的观察者，而“changed”是一个被 ActiveRecord 覆盖的方法，即被“dirty”库覆盖。

为什么我不能使用 AR“观察者”？因为这里的观察者就是我想要的通知者。该例程未在模型中实现，但我不能说必须通知哪些其他 AR 模型。这是一个障碍。

我是怎么解决的？我自己创建了一个库，使用 ActiveModel::Observing 库，它允许我实现我想要的功能。我设计我会有这个 DSL：

类 A < ActiveRecord has_one :b

```
 observes :b, :on => :create, :notifiers => :update_observer 
```

结尾

所以这意味着，当 b 被创建时，有一个通知器 update_observer 可以到达 b 和 a 并对其进行处理。所以，在这种情况下：

```
class UpdateObserverNotifier < Notifier

  def action(observable, observer)
    observer.update_attributes(updated_at: observable.updated_at)
  end
end 
```

对观察者的 DSL 调用将在各自的类中注入“观察者”和“可观察”行为。Notifier 基类将具有通知行为，并且它可以访问可观察对象和观察者对象，以防可观察对象中的某些内容必须在观察者中镜像。如果你的动作触发了观察者的回调，它也会通知观察者本身的潜在观察者。

是的，就是这样。感谢您的建议，否则我不会实现它。

# javascript - 多选不以编程方式选择值

> ID：13033402
> 
> 赞同：1
> 
> 时间：2012-10-23T15:00:03.227
> 
> 标签：javascript, jquery, jquery-ui, multi-select

我遇到了 DropDownList 多选（[参考](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/ "jQuery UI 多选")）的问题。

**我想要的是...**

我想使用它们的值以编程方式从下拉列表中单击一些复选框（对于回发事项）。

# **简报**

* * *

在“参考”中，我发现 jQuery 中有一个错误，所以我需要这样做 ->

```
$("select").multiselect("widget").find(":checkbox").each(function(){
    this.click();
}); 
```

所以，我尝试了这个并且工作了......然后，我添加了“[value ='value']”，它工作了。这正是我所需要的。

```
$("select").multiselect("widget").find(":checkbox[value='value']").each(function(){
    this.click();
}); 
```

这就是我所做的：我获得了一个数组，其中包含回发之前选择的值（***顾问***值）。然后，我想在“顾问”下拉列表中找到带有数组值的复选框，最后单击它。

**代码**->

```
for (var x = 0; x < consultantValues.length; x++) {
    var consultantSelected = ":checkbox[value='" + consultantValues[x] + "']";
    var doConsultantStringCode = $("id$='ddlConsultant']").multiselect("widget").find(consultantSelected);    
    for (var a = 0; a < doConsultantStringCode.length; a++) {
        doConsultantStringCode[a].click();
    }
} 
```

这就像一个魅力：B 顺便说一下，我使用“for”而不是“each”，因为它运行得更快。

# **问题**

* * *

在其他下拉列表中，我尝试做同样的事情......它有效，但突然停止工作：/

**代码**->

```
for (var i = 0; i < selectedManagements.length; i++) {
   var checkboxValue = ":checkbox[value='" + selectedManagements[i] + "']";
   var findCheckbox = $("[id$='ddlManagement']").multiselect("widget").find(checkboxValue);
   for (var k = 0; k < findCheckbox.length; k++) {
     findCheckbox[k].click();
   }
} 
```

我坚持这个：/

**注意事项**：

*   我所看到的，findCheckbox 的长度 = 0 ...不明白为什么现在长度为 0，而之前的长度为 1 ...
*   下拉菜单是 ASP 控件。
*   如果您需要任何额外信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:15:36.230

你为什么不添加`checked="checked"`属性而不是模拟点击？这实际上太 hack-ish 来触发用户没有启动的 DOM 事件。

只需这样做：

```
$("select").multiselect("widget").find(":checkbox").each(function(){
    this.attr({ checked: "checked" });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:58:04.280

我终于设法解决了这个问题。

我和一些人一起工作，我们都在同一个网站上工作。问题是有人在我的代码之后移动了设置多选的部分（使用它的配置）......

所以，我的代码正在寻找仍然不存在的东西，所以它什么也没做。

有两种可能的做法：

*   1：将编程方式选择的代码放在设置多选的代码之后。
*   2：使下拉多选。然后添加您的代码，最后添加多选配置。（我最后做了什么XD）

2：示例：

```
 management.attr("multiple", 'multiple');

        if (selectedManagements != null) {
            for (var z = 0; z < selectedManagements.length; z++) {
                var checkboxValue = "[value='" + selectedManagements[z] + "']";
                var findSelectedCheckbox = management.children(checkboxValue);
                for (var lambda = 0; lambda < findSelectedCheckbox.length; lambda++) {
                    findSelectedCheckbox[lambda].setAttribute('selected', true);
                }
            }
        } 

           [...]

            management.multiselect({
                selectedList: 2,
                noneSelectedText: 'Select a management',
                width: 300
            }).multiselectfilter(); 
```

PS：我感谢 @mvbl-fst 帮助改进我的代码 :)

# php - php.ini 默认时区与 date.timezone

> ID：13033407
> 
> 赞同：14
> 
> 时间：2012-10-23T15:00:07.830
> 
> 标签：php, timezone

当我在两台不同的服务器上使用 PHP 的`date()`函数时，我得到了两个不同的结果，但两台服务器应该是相同的。

我检查了`php.ini`服务器 #1 上的文件，其中时间是正确的，它看起来如下：

```
date/time support                   enabled
"Olson" Timezone Database Version   0.system
Timezone Database                   internal
Default timezone                    America/Chicago

Directive        Local Value        Master Value
---------------------------------------------------
date.timezone    America/Chicago    America/Chicago 
```

我检查了服务器#2，它看起来如下：

```
date/time support                   enabled
"Olson" Timezone Database Version   0.system
Timezone Database                   internal
Default timezone                    UTC

Directive        Local Value        Master Value
---------------------------------------------------
date.timezone    America/Chicago    America/Chicago 
```

我看到的唯一区别是“默认时区”值。

两台服务器当前的日期/时间显示为：

```
Server #1: 10/23/2012 09:40:39
Server #2: 10/23/2012 14:40:39 
```

我确认两台服务器都使用`php.ini`位于其中的服务器，`/etc`并且我还在两个 Web 目录中搜索了时区可能被覆盖的任何地方：

```
grep -r "date_default_timezone_set" * 
```

但在这方面，它们都包含具有相同设置的相同文件。

“默认时区”是什么导致了 5 小时的差异？如果是这样，我该如何纠正？

**更新**

*加载的配置文件。*

服务器 #2 包含两个额外的 ini 文件：

```
/etc/php.d/snmp.ini
/etc/php.d/apc.ini 
```

*php -i 结果。*

服务器＃1：

```
date/time support => enabled
"Olson" Timezone Database Version => 0.system
Timezone Database => internal
Default timezone => America/Chicago

Directive => Local Value => Master Value
date.timezone => America/Chicago => America/Chicago 
```

服务器#2：

```
date/time support => enabled
"Olson" Timezone Database Version => 0.system
Timezone Database => internal
Default timezone => America/Chicago

Directive => Local Value => Master Value
date.timezone => America/Chicago => America/Chicago 
```

`php -i`值得注意的是，由于某种原因，“默认时区”在服务器#2 上与`phpinfo()`通过网页查看时不匹配。

**解决方案**

问题出在 CMS 及其插件上。虽然服务器 #1 和 #2 具有相同的文件和所有内容，但似乎每个服务器上插件的加载顺序不同，这使得加载的最后一个插件可以确定我的脚本的时区。

原因`php -i`和`phpinfo`不同是因为你使用后`date_default_timezone_set()`，它会影响`phpinfo()`打印的内容。

修复是确保我在我需要通过的时区`date_default_timezone_set()`。在我发布这个问题之前对我不起作用的原因是因为我在从 CMS 加载一些必需的文件之前声明了这一点，这可能会在那里再次设置时区。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T15:04:35.963

[`date()`](http://php.net/manual/en/function.date.php)依赖于[date.timezone](http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone) INI 设置。由于一个是芝加哥 (CT)，另一个是 UTC，因此您的时差为 5 小时。

*我相信*从 PHP > 5.2 开始，您应该收到：

> PHP 警告：未知：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。

我鼓励您查看新的[DateTime对象或按照](http://www.php.net/manual/en/class.datetime.php)**SDC**的建议使用 UTC 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T15:33:57.513

需要检查的几件事：

1.  检查 phpinfo() 输出中的“加载的配置文件”值，以确保您更改了正确的 php.ini 文件。（这不止一次咬了我！）
2.  查看 phpinfo() 输出时，请检查“已解析的其他 .ini 文件”行，以查看在通过 Web 服务器运行时是否有其他 ini 文件正在解析。
3.  date.timezone 可以通过 ini_set 函数设置。你有任何代码可以做到这一点吗？请务必检查由于 auto_prepend ini 设置而可能正在运行的任何代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-20T19:20:15.280

这是代码：

```
[Date]
date.timezone = ('America/New_York')

date.default_latitude = 31.7667

date.default_longitude = 35.2333

date.sunrise_zenith = 90.583333

date.sunset_zenith = 90.583333 
```

只需更改`date.timezone = ('America/New_York')`为您想要的时区。

[来源](http://www.gizmozine.com/2013/12/date-timezone-zen-cart-fix.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-26T08:02:54.143

[http://us.php.net/manual/en/function.date-default-timezone-get.php](http://us.php.net/manual/en/function.date-default-timezone-get.php)

TZ 环境优先于 php.ini 默认值；也许这就是原因。您可以通过显式调用 date_default_timezone_set 来解决此问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-28T13:03:53.150

在我的情况下，使用 Ubuntu 14.0 LTS 默认时区设置为：

/etc/php5/cli/php.ini

然后我可以验证：

php -i | grep“时区”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-18T02:11:06.357

如果您在 php.ini 中设置了 date.timezone 值但它不起作用（即本地值和主值不同），那么您可能需要在 apache 配置文件中更新如下内容：

```
<IfModule mod_php5.c>
   php_value date.timezone "Europe/Paris"
</IfModule> 
```

对于之前删除上述答案的mod：我已经搜索了几个小时才能找到这个解决方案。不要仅仅因为您认为它是重复的答案而删除答案。

# facebook - Facebook api 邀请朋友到每个请求 50 的网站

> ID：13033408
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:00:09.877
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我想邀请 facebook 朋友到我的网站。Facebook 只允许一次发送 50 个请求。所以我想制作一个 UI 来显示 facebook 发出的这个批处理请求，以邀请每 50 个请求。如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:06:29.260

认为这就是您要寻找的。

[http://www.webtuts.info/webdevelopment/facebook-api-invite-friends-website/172/](http://www.webtuts.info/webdevelopment/facebook-api-invite-friends-website/172/)

# c# - 使列表视图中的网格出现在 IDE 中

> ID：13033409
> 
> 赞同：1
> 
> 时间：2012-10-23T15:00:10.347
> 
> 标签：c#, .net, winforms, visual-studio-2010, windows-forms-designer

我正在使用 VS2010 Windows 窗体

这是我将其拖放到 Windows 窗体后的列表视图，并在添加列后，使用 IDE 中的列属性。

![在此处输入图像描述](../Images/03da73305059a040c3e6463a11f9388f.png)

我希望我可以在 IDE 中显示如下所示的内容，我应该更改哪些属性？

![在此处输入图像描述](../Images/45e18a4c501aa165bfb3c327f33d8ab5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:49:25.567

更改以下内容（假设您在设计时添加列）：

```
listView1.View = View.Details; 
```

![在此处输入图像描述](../Images/1fdc9fb75356962a5e75a902f1e346b1.png)

# python - Django 1.4 设置文件问题？

> ID：13033423
> 
> 赞同：0
> 
> 时间：2012-10-23T15:01:21.543
> 
> 标签：python, django, django-1.4

我使用 Django 1.3 已经有一段时间了，现在我的系统自动将 django 更新到 1.4，我遇到了设置文件的问题。问题 1：我已经使用命令`django-admin.py startproject tutorial` Django 在教程项目中自动创建教程应用程序创建了新项目。我不想要教程应用程序所以我删除了它，现在当我启动开发服务器时出现错误：

```
 raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'tutorial.settings' (Is it on sys.path?): No module named tutorial.settings 
```

问题2：我曾经在一个项目（1.3）的根目录中有一个中央设置文件，但是现在如果我创建了另一个应用程序，django似乎甚至都不看它。例如，在上一个问题中，如果我不删除教程应用程序，django 只会查看该应用程序的设置文件并抱怨如果我在启动开发服务器之前没有在那里设置数据库信息。如果是这样，如果我有 3 个应用程序，我需要真的让他们每个人都用数据库信息填充单独的设置文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:07:41.540

Django 1.4 改变了 Django 项目的文件系统布局。你看到的教程“app”不是一个app，而是项目包。[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#creating-a-project)中提供了更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:12:17.360

Django 1.4 项目结构发生了变化——变得更好。它现在更加模块化。里面添加的“tutorial”目录就是你的项目目录。它包含特定于您的项目的 settings.py、urls.py 等。应用程序现在与项目并行添加（在主目录中，与您的“教程”项目目录处于同一级别）。这允许它们通过您的项目和应用程序作为应用程序导入，即`from some_app.models import SomeModel`，而不是`myproject.some_app.models import SomeModel`. 这样做的好处是显而易见的。您的应用不再与特定项目绑定。您基本上可以按原样将其撕掉，将其打包以重新分发或在完全不同的项目中使用它，而无需进行大量更改，删除依赖项。保持新的项目结构并学会喜欢它。

# ruby-on-rails - 在 Rspec PUT 调用中接收到未定义的方法错误

> ID：13033426
> 
> 赞同：0
> 
> 时间：2012-10-23T15:01:27.860
> 
> 标签：ruby-on-rails, api, rest, rspec, tdd

在我的规范中，当我运行下面的 POST 请求时，一切正常。

```
 before do
      request_payload = {
        player: {
          first_name: "Joe",
          last_name: "Carradine",
          team_id: "1"
        }
      }

      post :create, request_payload
    end 
```

但是当我运行 PUT 规范时：

```
 before do
      request_payload = {
        player: {
          first_name: "Buck",
          last_name: "Carradine",
          team_id: "1"
        }
      }

      put :update, { id: 3 }, request_payload
    end 
```

我收到这样的错误：

```
 Failure/Error: put :update, { id: 1 }, request_payload
 NoMethodError:
   undefined method `[]' for nil:NilClass 
```

我无法弄清楚什么被认为是零。此 API 调用在 REST 客户端中运行良好。

这是基于先前 SO 问题的另一个错误：[Receiving error in RSpec for PUT, but not POST](https://stackoverflow.com/questions/13024146/receiving-error-in-rspec-for-put-but-not-post)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:39:49.080

你应该做 ：

```
put :update, { id: 3 }.merge(request_payload) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T20:33:01.247

我这样做：

```
describe 'PUT #update' do

before do

  @todo = FactoryGirl.create(:todo)

  @initial_title = @todo.title
  @initial_updated_at = @todo.updated_at
  @new_title = 'Title Changed'

  request_payload = { :title => @new_title }

  put :update, :id => @todo.id, :todo => request_payload, :format => :json

  @todo.reload

end

it 'should retrieve status code of 204' do
  response.status.should eq(204)
end

it 'updated attributes should not be as initially' do
  @todo.title.should_not eq(@initial_title)
  @todo.updated_at.should_not eq(@initial_updated_at)
end

it 'updated attribute should be the the same' do
  @todo.title.should eq(@new_title)
end

it 'updated date should be increased' do
  @todo.updated_at.should > @initial_updated_at
end

end 
```

可能对某人另外有用，进行类似测试的方式；）

# c# - 改变设计现在没有按钮工作

> ID：13033432
> 
> 赞同：0
> 
> 时间：2012-10-23T15:01:34.130
> 
> 标签：c#, button, onclick

我已更改母版页设计以更新为站点的一个不错的新设计，但是由于这样做，所有表单提交按钮都不起作用。我什至无法弄清楚如何调试它。onclick 的 HTML 在那里，但似乎没有命中

输入与原始输入完全相同。我在代码中的 onclick 事件上设置了一个断点，但它没有被命中。任何建议都将受到欢迎。

编辑：这是 ASP / HTMl

公司名称：  

```
 <div class="field">
    <label>Type of Business:</label>
     <asp:TextBox Text="" ID="GSU_BussinessType" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>First Name:</label>
     <asp:TextBox Text="" ID="GSU_FirstName" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>Last Name:</label>
     <asp:TextBox Text="" ID="GSU_LastName" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>Mobile Number:</label>
     <asp:TextBox Text="" ID="GSU_Mobile" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>Email Address:</label>
     <asp:TextBox Text="" ID="GSU_Email" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>User Name:</label>
     <asp:TextBox Text="" ID="GSU_Username" CssClass="" runat="server"/>
    </div>
     <div class="field">
    <label>Password:</label>
     <asp:TextBox Text="" ID="GSU_Password" autocomplete="off" runat="server" TextMode="Password"/>
    </div>
    <asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Button" />
    <asp:Button ID="Button1" runat="server" text="Submit" onclick="Unnamed1_Click" Class="button color"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:36:35.083

找到了。使用 get! 在我的母版页中隐藏了另一个表单！呸！

# c++ - 删除指针时出错

> ID：13033436
> 
> 赞同：1
> 
> 时间：2012-10-23T15:01:39.793
> 
> 标签：c++, pointers

我有一个看起来类似于这样的数据包结构：

```
struct packet {
    sockaddr_in m_Recv;
    int m_iPacketSize;
    unsigned char* m_ucpPacket;
} 
```

这是我使用此结构的代码的选择：

```
packet tOutPacket;
tOutPacket.m_Recv = tInPacket.m_Recv;
tOutPacket.m_iPacketSize = 256;
tOutPacket.m_ucpPacket = new unsigned char[256];

// Creating a uuid (not important how it's done, the pointer has 16 bytes)
unsigned char* uuid = NetworkHandlerN::ConnectionData::createUUID(hardware_hash);
NetworkHandlerN::PacketHandler::addUUIDToPacket(tOutPacket.m_ucpPacket, uuid);
delete[] uuid;

UDPsend(tOutPacket.m_Recv, tOutPacket.m_ucpPacket, tOutPacket.m_iPacketSize);

/* Delete pointer */
delete[] tOutPacket.m_ucpPacket; // This is causing an error 
```

这是我的 UDPsend 方法：

```
bool NBsocket::UDPsend(sockaddr_in& AddrSento, const unsigned char* cucpBuffer, int iSize)
{
    if(sendto(m_iSocket, reinterpret_cast<const char*>(cucpBuffer), iSize, 0, (sockaddr*) &AddrSento, sizeof(AddrSento)) == -1) {
        m_iErrorCode = 6;
        return false;
    }

    return true;
} 
```

这是 addUUIDToPacket 方法：

```
static void addUUIDToPacket(unsigned char* ucpPacket, unsigned char* ucpChar) 
{
    for(int i = 0; i < ciUUIDSize; i++) {
        ucpPacket[ciHeaderSize+i] = ucpChar[i];
    }
} 
```

首先，我以为我在`tOutPacket.m_ucpPacket`某处删除了指针，但我检查了它。如果我像这样（在 之前`delete[]`）对存储在里面的数据进行测试：

```
if(tOutPacket.m_ucpPacket[tOutPacket.m_iPacketSize-1] == 0x08) 
    std::cout << "0x08"; 
```

它工作得很好（是的，值应该是 0x08）

这是我的调用堆栈输出：

```
 ntdll.dll!77dcfadc()    Unknown
    [Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
    ntdll.dll!77db4f92()    Unknown
    ntdll.dll!77d926fc()    Unknown
    ntdll.dll!77dd0b37()    Unknown
    ntdll.dll!77d8a967()    Unknown
>   msvcp110.dll!std::_Fputc<char>(char _Byte, _iobuf * _File) Line 83  C++
    msvcp110.dll!std::basic_filebuf<char,std::char_traits<char> >::overflow(int _Meta) Line 383 C++
    msvcp110.dll!std::basic_streambuf<char,std::char_traits<char> >::xsputn(const char * _Ptr, __int64 _Count) Line 406 C++ 
```

我已经测试了很多，但无法弄清楚出了什么问题。

希望可以有人帮帮我。如果需要，我可以添加该`/* add data to packet */`部分，但这将是更多代码。

**编辑**

发现错误。我向这个方法传递了一个字节：

```
static void addToPacket(unsigned char* ucpPacket, int iInt, int iPos) 
{
    ucpPacket[iPos+0] = iInt & 0xFF;
    ucpPacket[iPos+1] = iInt >> 8 & 0xFF;
    ucpPacket[iPos+2] = iInt >> 8 & 0xFF;
    ucpPacket[iPos+3] = iInt >> 8 & 0xFF;
} 
```

这导致了所有的麻烦......太多的方法重载:)。一定是失去了概述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:22:32.977

Before trying to actually find the bug and its cause, consider whether you have to use new[] and delete[].

1.  Is the size fixed at 256? can you just put a regular array in your struct? It's not exactly that big.

2.  Assuming not, can you use `std::vector<unsigned char>` ?

3.  Failing that can you use `boost::shared_array<unsigned char>` ? You'll have to also put in the size as a separate element (e.g. iPacketSize). For this you will still call `new[]` but the `delete[]` will be taken care of. You will have to hold on to this `shared_array` object as long as you require the memory it uses.

What does `createUUID` do? It returns `unsigned char *` but who owns this memory?

At what point does the data you send get copied? At the call `sendto` ?

# c# - 在下拉列表中选择和显示不同的值时出现问题

> ID：13033444
> 
> 赞同：1
> 
> 时间：2012-10-23T15:02:00.030
> 
> 标签：c#, asp.net-mvc, linq, razor

我试图代表一个项目的大小。我们有多个供应商，我们用来存储尺寸和供应商值的表意味着我们有多个尺寸相等，但供应商不同。

我需要填充以下下拉列表，但不能有重复的例子，例如 S、M 或 L：

```
@Html.DropDownListFor(
    m => m.RejectLog.SupplierTypeId, 
    new SelectList(Model.SupplierTypes, "ID", "Size", 
                   Model.RejectLog.SupplierTypeId), 
    new { 
        @size = Model.SupplierTypes.Count,
        @class = "reject-select",
        @id = "Size",
        @name = "Size"
    }
) 
```

我已经尝试添加`.Distinct()`几乎所有可以添加的地方。我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:16:17.003

尝试按如下方式编辑您的代码：

```
new SelectList(
    Model.SupplierTypes.Select( t => new {ID = t.ID, Size = t.Size} )
                       .Distinct(), 
    "ID", "Size", Model.RejectLog.SupplierTypeId) 
```

* * *

如果您只想选择一个大小（并且将大小值本身，而不是关联的 ID 返回到服务器），那么您可以只使用 Size 作为 Display 值和“Identity”值：

```
new SelectList(
    Model.SupplierTypes.Select( t => new {Size = t.Size} )
                       .Distinct(), 
    "Size", "Size", ???) 
```

*（我对 Razor 非常非常陌生，所以我不确定第四个参数的预期内容。但是，由于您不再使用 ID，我认为必须重新检查它。）*

# drupal-7 - 如何以编程方式为给定节点加载表单，修改其值然后提交？

> ID：13033445
> 
> 赞同：0
> 
> 时间：2012-10-23T15:01:59.473
> 
> 标签：drupal-7

当我单击我的一个论坛节点的“编辑”选项卡时，我会看到一个显示如下的表单：

![论坛节点的编辑视图](../Images/304e98fed166bc1e92f5c368f8e45b7b.png)

当我选择“论坛”-下拉菜单中的任何选项（并因此选择论坛容器）并单击“提交”时，论坛节点将移动到所选论坛容器。

现在，我需要做的是从我的代码中的某处以编程方式触发所有这些。我必须将很多论坛节点移动到很多不同的论坛容器中，这就是我需要这样做的原因。

我在想如何做到这一点是这样的：

1.  加载“forum_node_form”的表单数据，以便包含特定论坛节点的数据（我想移动到另一个论坛容器的论坛节点）。
2.  将参数 $form_state['values']['forum_tid'] 更改为我要将论坛节点移动到的论坛容器的 tid。
3.  使用 drupal_form_submit() 保存表单数据。

然而，事实证明这比我预期的要难。有人可以为我指出正确的方法吗？

到目前为止，我已经在手动测试期间使用 var_export($form_state['values'], true) 记录了 $form_state['values'] 的内容。然后我将 $form_state['values']['forum_tid'] 更改为我想将论坛移动到的论坛容器的 tid，然后使用 drupal_form_submit('forum_node_form', $form_state);

这导致了错误消息：

> 警告：call_user_func_array() 期望参数 1 是一个有效的回调，函数 'node_form' 未找到或 drupal_retrieve_form() 中的函数名称无效（/“PATH”/includes/form.inc 的第 795 行）。

我找到了一些使用 form_load_include() 的建议，因此添加了这一行：

`form_load_include($form_state, 'inc', 'node', 'node.pages');`

...这会导致一些新的错误：

> *   警告：node_form() 中的 node_form() 缺少参数 3（/“PATH”/modules/node/node.pages.inc 的第 83 行）。
> *   EntityMalformedException：类型节点的实体上缺少捆绑属性。在 entity_extract_ids() 中（/“PATH”/includes/common.inc 的第 7539 行）。

node_form() 的参数 3 是节点对象 $node ，我不知道如何解决这个问题，我实际上觉得这不是解决整个问题的正确方法。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:19:03.370

无需经历加载节点表单的痛苦，您只需加载节点对象（使用[node_load](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_load/7)），更改论坛 tid 值，然后保存节点（使用[node_save](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_save/7)）以更新它。

例子：

```
<?php

function mymodule_updatemynode($nid,$new_forum_tid){
    if ($node = node_load($nid)){
        // not exactly sure what the forum tid field is called
        // just an example
        $node->field_forum_tid['und'][0]['#value'] = $new_forum_tid;
        node_save($node);
    }
} 
```

# java - 为 ref bean 创建属性，Spring

> ID：13033448
> 
> 赞同：0
> 
> 时间：2012-10-23T15:02:03.900
> 
> 标签：java, spring, properties, javabeans, ref

我在这个网站上搜索了很多春天.. 但我真的很陌生.. 所以这是我的问题：

我有3个主要课程，我会这样说..

```
 public class User
 {
    private String name;
    private ArrayList<Car> cars;

    public ArrayList<Car> getCars() 
    {
       return cars;
    }

    public void setCars(ArrayList<Car> cars) 
    {
       this.cars= cars;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
       this.name = name;
    }
 }

 public class Car
 {
    private String type;
    private ArrayList<Wheel> wheels;

    public ArrayList<Wheel> getWheels() 
    {
       return wheels;
    }

    public void setWheels(ArrayList<Wheel> wheels) 
    {
       this.wheels= wheels;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
       this.type= type;
    }
 }

 public class Wheel
 {
    private String name;        

    public String getName() {
        return name;
    }

    public void setType(String name) {
       this.name= name;
    }
 } 
```

那是Java代码..这只是一个例子。所以我有 3 个类，如你所见，一个是可以拥有一辆或多辆汽车的用户，然后是可以有一个或多个轮子的汽车..

在我的 Spring.xml 中，我想做这样的事情..

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="car1" class="Car">
        <property name="type" value="motorcycle"/>
    </bean>

    <bean id="wheel1" class="Wheel">
        <property name="name" value="one"/>
    </bean>
    <bean id="wheel2" class="Wheel">
        <property name="name" value="two"/>
    </bean>

    <bean id="user1" class="User">
        <property name="name" value="Me"/>
        <property name="cars">
            <list value-type="Car">
                <ref bean="car1">
                  <property name="wheels">
                     <ref bean="wheel1">
                     <ref bean="wheel2">
                  </property">
                </ref>
            </list> 
        </property>
    </bean> 
```

如果你看到这个春天..我想通过弹簧代码创建用户实例以及汽车和车轮..但它不会让我这样做..因为我无法创建具有属性 children 的 ref bean。 . 所以我不能在我的 ref bean 车上加轮子.. 我该怎么做？或者这不能这样做，也许是另一种解决方案..不知道..提前谢谢..

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:37:32.837

您不能在 bean ref 上设置属性，但是如果您希望能够为不同的用户重用具有不同数量车轮的同一个汽车实例，您可以使用 Spring 的 bean 定义继承来制作汽车 bean 的副本。

在下面的 XML 中，我们创建了一个*抽象*的汽车定义，然后从它继承并在用户定义中设置轮子属性。

```
<!-- note that original car bean is now marked abstract -->
<bean id="carPrototype" class="Car" abstract="true">
    <property name="type" value="motorcycle"/>
</bean>

<bean id="wheel1" class="Wheel">
    <property name="name" value="one"/>
</bean>
<bean id="wheel2" class="Wheel">
    <property name="name" value="two"/>
</bean>

<bean id="user1" class="User">
    <property name="name" value="Me"/>
    <property name="cars">
        <list value-type="Car">
            <!-- note the use of 'parent' attribute -->
            <bean parent="carPrototype">
                <!-- the type property of "motorcycle" is inherited from the carPrototype definition -->
                <property name="wheels">
                    <ref bean="wheel1">
                    <ref bean="wheel2">
                </property">
            </bean>
        </list> 
    </property>
</bean>

<bean id="user2" class="User">
    <property name="name" value="You"/>
    <property name="cars">
        <list value-type="Car">
            <bean parent="carPrototype">
                <!-- the type property of "motorcycle" is inherited from the carPrototype definition -->
                <property name="wheels">
                    <ref bean="wheel1">
                </property">
            </bean>
        </list> 
    </property>
</bean> 
```

但是，您应该注意，`<bean>`像上面这样的嵌套（例如，汽车 bean 定义嵌套在用户 bean 定义中）称为*内部*bean，它不能有*id*或*name*。您也无法从其他任何地方引用它。如果你想让你的每辆车都有一个 bean id，你必须让它们都是顶级 bean：

```
<bean id="carPrototype" class="Car" abstract="true">
    <property name="type" value="motorcycle"/>
</bean>

<bean id="car1" parent="carPrototype">
    <!-- the type property of "motorcycle" is inherited from the carPrototype definition -->
    <property name="wheels">
        <ref bean="wheel1">
        <ref bean="wheel2">
    </property">
</bean>

<bean id="car2" parent="carPrototype">
    <!-- the type property of "motorcycle" is inherited from the carPrototype definition -->
    <property name="wheels">
        <ref bean="wheel1">
    </property">
</bean>

<bean id="wheel1" class="Wheel">
    <property name="name" value="one"/>
</bean>
<bean id="wheel2" class="Wheel">
    <property name="name" value="two"/>
</bean>

<bean id="user1" class="User">
    <property name="name" value="Me"/>
    <property name="cars">
        <list value-type="Car">
            <ref bean="car1"/>
        </list> 
    </property>
</bean>

<bean id="user2" class="User">
    <property name="name" value="You"/>
    <property name="cars">
        <list value-type="Car">
            <ref bean="car2"/>
        </list> 
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:20:30.393

您正在创建一个 Car bean：

```
<bean id="car1" class="Car">
    <property name="type" value="motorcycle"/>
</bean> 
```

为了您的目的，我认为您应该在此处定义所需的 Wheel 对象，然后只需对该对象进行引用，例如：

```
<bean id="car1" class="Car">
    <property name="type" value="motorcycle"/>
    <property name="wheels">
        <list>
            <ref bean="wheel1">
            <ref bean="wheel2">
        </list>
    </property">
</bean>

<bean id="wheel1" class="Wheel">
    <property name="name" value="one"/>
</bean>
<bean id="wheel2" class="Wheel">
    <property name="name" value="two"/>
</bean>

<bean id="user1" class="User">
    <property name="name" value="Me"/>
    <property name="cars" ref="car1"/>
</bean> 
```

# c# - 共享点搜索服务器 2010

> ID：13033449
> 
> 赞同：2
> 
> 时间：2012-10-23T15:02:06.067
> 
> 标签：c#, .net, sharepoint-2010

有人可以指出我正确的方向吗？我正在尝试使用使用 Sharepoint 2010 的 Search Server Express 2010。我想在我自己的网页中使用它并在我的网站中输出结果。使用 .Net 和 C#。

我曾尝试使用 Web 服务，但出现“尝试执行且未经授权的操作”错误。我还尝试使用 srchrss.aspx 页面来输出我的结果，但出现 401 错误。有人可以举个例子指出我正确的方向吗？

提前致谢。

# ssl - 如何像浏览器一样使用openssl验证证书？

> ID：13033452
> 
> 赞同：3
> 
> 时间：2012-10-23T15:02:11.933
> 
> 标签：ssl, openssl, certificate

我正在使用 openssl 来验证证书，但似乎在一种情况下，即使浏览器认为证书有效，它也无法验证证书。

```
openssl s_client -connect test.uk.example.com:443
+ sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p'
depth=0 /C=GB/ST=CB/L=Cambridge/O=acme Systems Inc./OU=Development Operations acme/CN=acme.com/CN=*.acme.com/CN=*.uk.acme .com/CN=*.acme.com/CN=*.vmd.acme.com/CN=*.acme.net/CN=*.eng.acme.net
验证错误：num=20：无法获取本地颁发者证书
验证返回：1
depth=0 /C=GB/ST=CB/L=Cambridge/O=acme Systems Inc./OU=Development Operations acme/CN=acme.com/CN=*.acme.com/CN=*.uk.acme .com/CN=*.acme.com/CN=*.vmd.acme.com/CN=*.acme.net/CN=*.eng.acme.net
验证错误：num=27：证书不受信任
验证返回：1
depth=0 /C=GB/ST=CB/L=Cambridge/O=acme Systems Inc./OU=Development Operations acme/CN=acme.com/CN=*.acme.com/CN=*.uk.acme .com/CN=*.acme.com/CN=*.vmd.acme.com/CN=*.acme.net/CN=*.eng.acme.net
验证错误：num=21：无法验证第一个证书
验证返回：1

```

浏览器正确验证了相同的证书。

我应该如何调用 oepnssl 以确保验证通过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:09:42.733

最可能的原因是 OpenSSL 尚未配置或找不到用于验证证书路径的信任锚列表。

`-CApath`您可以使用或显式传递它们`-CAfile`。

# sql - 返回每个产品的所有销售价值和销售价值的总和

> ID：13033455
> 
> 赞同：1
> 
> 时间：2012-10-23T15:02:15.663
> 
> 标签：sql, sql-server-2008, sum

我有一个这样的查询

```
SELECT
    ProductID,
    ProductSales,
    ProductLocationName
FROM
    ProductLocation
WHERE
    ProductLine=@ProductLine 
```

所以我的样本结果可能是这样的

```
ProductID    ProductSales   ProductLocationName
1            $2             Boston
1            $2             Chicago
2            $8             Boston 
```

如果不同，则会重复一些`productID/ProductSales`组合，`ProductLocationName`但我需要返回以下内容：

我需要在我的示例结果中返回上面返回的内容，但除此之外，我还需要对`ProductSales`除重复`ProductID/ProductSales`组合之外的所有值求和。

上面的例子：

```
ProductID 1 + ProductID 2
$2 + $8 = $10 
```

请注意，我没有两次添加 $2，因为该`prodID/Sales`值在结果中重复，但是我仍然需要返回上面的 3 行，因为我必须在我的转发器中显示所有 3 行。

希望我很清楚，除了`ProductID`& `ProductLocation`（我的查询中还会包含其他列），我需要

1.  `ProductSales`（如上`SampleResults`所示）为每个`ProductID`. 我知道这`SUM(ProductSales)`会让我得到这个。

2.  `SUM`对于`ProductSales`所有唯一`ProductID`值 ($2 + $8 = $10)

如果可能的话，我想在同一个存储过程中完成所有这些。

我主要关心的是如何获得第 2 点，即对所有`ProductSales`值求和，在我的示例中为 $2+$8

如果您需要更多信息，请告诉我，这是我在这里的第一篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:35:45.377

要正确执行此操作，您将需要一个子查询来进行计算：

```
SELECT ProductID, ProductSales, ProductLocationName, t.SumProductSales
FROM ProductLocation pl cross join
     (select sum(ProductSales) as SumProductSales
      from (select productId, max(ProductSales) as ProductSales
            from ProductionLocation pl
            group by productId
           ) p
     ) t
WHERE ProductLine=@ProductLine 
```

您需要注意对 ProductSales 具有相同价值的不同产品。

# grails - 将 Grails 部署到云（Jelastic）引导问题？

> ID：13033456
> 
> 赞同：1
> 
> 时间：2012-10-23T15:02:19.440
> 
> 标签：grails, deployment, cloud, bootstrapping, jelastic

我创建了一个 Grails 应用程序，它正在顺利完成，我一直在与各种云提供商进行测试，例如 Cloud Foundry、Heroku、App Engine 等。最后我选择了 Jelastic，因为它是似乎完全支持使用本地插件，因为我只需要上传一个“战争”文件进行部署。

直到今天，我对此没有任何问题，一切都很好，但是我做了一些更改并为我的应用程序添加了一些关系，然后我使用 BootStrap 填充这些关系。这个 Bootstrap 以前可以工作，但现在已经停止，下面你可以看到我的 Bootstrap 示例：

```
def init = { servletContext ->

def adminRole = new SecRole(authority: 'ADMIN').save(flush: true) 
def userRole = new SecRole(authority: 'USER').save(flush: true)

def Admin = new SecUser(username: 'admin', email:'admin@admin.com', enabled: true, password: 'password')

def SuperUser = new Areas(name:"SuperUser")
.addToUsers(Admin)
.save(flush:true)

SecUserSecRole.create Admin, adminRole, true

assert SecUser.count() == 1 
assert SecRole.count() == 2 
assert SecUserSecRole.count() == 1 
    } 
```

当我使用此数据在本地运行应用程序时，BootStrap 工作正常，但是当我在 Jelastic 上运行它时，我收到以下错误消息：

```
SEVERE: Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL 
```

这只是错误发生位置的部分堆栈跟踪，但我不知道为什么会发生这种情况，有人可以帮忙吗？

谢谢

编辑.....

我也尝试过这个引导数据，显示相同的错误消息：S

```
def init = { servletContext ->

def adminRole = new SecRole(authority: 'ADMIN').save(flush: true) 

def SuperAdmin = new Areas(name: 'Super Admin')

SuperAdmin.save(flush: true)

def area = Areas.findByName('SuperAdmin')

def SuperAdmin = new SecUser(username: 'admin', email:'test@test.com', area: area, enabled: true, password: 'admin')

SuperAdmin.save()

SecUserSecRole.create SuperAdmin, adminRole, true

assert SecUser.count() == 1 
assert SecRole.count() == 2 
assert SecUserSecRole.count() == 1 
    } 
```

我收到的错误消息如下：

```
SEVERE: Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [select this_.id as id3_0_, this_.version as version3_0_, this_.account_expired as account3_3_0_, this_.account_locked as account4_3_0_, this_.area_id as area5_3_0_, this_.email as email3_0_, this_.enabled as enabled3_0_, this_."password" as password8_3_0_, this_.password_expired as password9_3_0_, this_.username as username3_0_ from sec_user this_ where this_.username=?]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query 
```

我已经剥离了 BootStrap 数据并且应用程序启动正常，任何人都可以对此有所了解，因为它在本地引导程序运行良好，而不是在云上？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:56:57.437

我想您提供的信息不足以帮助您。

为了调试它，我建议您删除引导代码，以便您的应用程序启动。

接下来我将安装控制台插件 (http://grails.org/plugin/console)。这将让您在控制台中测试您的引导代码。也许它可以帮助您跟踪问题。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:22:03.497

您是否在本地使用与 Jelastic 云中相同的环境拓扑？您能否提供您的 Jelastic 环境名称？此外，请确保您的 Jelastic 安装不会错过数据库连接库，并且版本与您在本地使用的版本相同。

# c# - 使用 Entity Framework 管理实体访问和权限

> ID：13033458
> 
> 赞同：2
> 
> 时间：2012-10-23T15:02:31.770
> 
> 标签：c#, sql-server-2008, entity-framework, permissions

在使用 Entity Framework 4.1 的 Web 应用程序中，我们使用 SQL Server Membership 来管理用户访问。然而，我们需要实现一组更细粒度的角色权限管理。

在数据库中，我们已经创建了相关表：

```
- Roles 
- Permissions 
- UserInRole (roles per user)
- RolesPermissions (permissions associated to a role) 
```

使用某些核心实体上的属性，我们通过 EF 在语义上限制访问，例如，给定特定用户，她/他只能看到相关的发货订单或固有数据。

现在我们想在其中注入权限，这意味着例如*客户*可以查看和创建订单，而*公司*（这是两个不同的角色）只能查看其产品的订单并打印报告。

这个想法是在实体级别也将属性用于权限，并在调用方法时检查当前用户是否拥有适当的权限。例如：

```
public void BeforeAdd()
{
   // Get required permissions for the specific entity (Order as example)

   //Check that current user has permission of creating a new Order 
} 
```

这样的方法将被每个实体调用，允许在实体级别集中控制权限。

我们使用 MVC 作为前端，并且在那里我们已经实现了角色和权限访问。我们需要对后端部分（包含数据层）进行相同的处理。这是两个通过 Web 服务进行通信的独立服务器。通过在后端实施权限管理将加强对数据访问的控制。

是否有我们可以遵循的模式或最佳实践（最终使用 EF 的一些内置功能）来实现权限管理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:05:50.860

> 有没有我们可以遵循的模式或最佳实践

是的，它被称为[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，而[PostSharp](http://www.sharpcrafters.com/postsharp/features)可能是这项工作的最佳工具（不幸的是它不是免费的）。

但是，如果您使用的是 MVC（您还没有提到任何东西），您可以派生您自己的[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)版本来查询您自己的权限表，并且您可以简单地使用您想要允许的角色来装饰您的操作，例如

```
[Authorize(Roles="Customer, Company")]
public ActionResult ViewOrders(...)
{
    ...
}

[Authorize(Roles="Customer")]
public ActionResult CreateOrder(...)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:07:51.437

您熟悉[ASP.NET 的默认成员资格提供程序](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)吗？

这是如何建立会员制度的典型例子。如果您不熟悉它，这可能是一个很好的学习例子。

您可能还会发现[这个 SO 问题](https://stackoverflow.com/questions/620350/can-i-use-entity-framework-with-asp-net-membership)很有帮助。

# crystal-reports - How to display fields from different rows in one row in a sequence based on a 3rd field

> ID：13033468
> 
> 赞同：1
> 
> 时间：2012-10-23T15:03:29.850
> 
> 标签：crystal-reports, report, rows

I'm working on a Crystal Report for Shipments and I'm struggling with the following:

I have Shipments with 2 Shipment Detail records, one for LOAD and one for DISCHARGE. When grouped by shipment and load type (for sorting in descending order - Load then Discharge) the detail section looks like this:

Shipment-----------load type------------Location

1001---------------LOAD-----------------New York
1001---------------DISCHARGE--------Chicago

I now want to hide the detail section and display one row/sentence in the group or report footer reading:
"Shipment 1001 from New York to Chicago"

How can I do this?
I tried stringvars and all sorts of things, I can concatenate it to list both locations separated by a comma, I tried nthlargest and nthsmallest location, but I can't get it into the right sequence.

If Crystal worked with embedded SQL I would say
"Shipment " + {shipment.ID} + " from " + (select location from shipment where loadtype = 'LOAD') + " to " + (select location from shipment where loadtype = 'DISCHARGE')

Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:27:54.977

You can use the `Previous` function to find a value in the previous row.

Assuming you only ever have two records per shipment ID, you can create a formula with the following code, and place it in your group footer (replacing your table and field names as necessary):

```
"Shipment " & ToText ({YourTable.Shipment}, "0") & " from " 
    & Previous ({YourTable.Location}) & " to " & {YourTable.Location} 
```

# javascript - 订购一个`` 使用 JavaScript（没有 jQuery） 我有一个 <select>元素，它有一些初始值，我如何向选择添加一个值，然后按字母顺序对其进行排序。我可以使用一些简单的 JavaScript 添加选项： var select = document.getElementById("example-select"); select.options[select.options.length] = new Option('Text 1', 'Value1'); .. ID：13033472 赞同：0 时间：2012-10-23T15:03:49.473 标签：javascript, html, html-select 回答 #1 赞同：2 时间：2012-10-23T15:13:40.590 尝试这个 var select = document.getElementById('select'); var sorted = Array.prototype.slice.call(select.options).sort(function(a, b) { if(a.label < b.label) return -1; if(a.label > b.label) return 1; return 0; }); for(var i = 0; i < sorted.length; i++) { select.add(sorted[i]); } 按标签排序。只需将其更改为其他属性。 注意options是只读的。 https://tinker.io/9720d 注意：不适用于 IE 8 及以下版本 回答 #2 赞同：2 时间：2012-10-23T15:15:15.487 试试这个。 var select = document.getElementById("example-select"); var options = select.options; var newOption = new Option('Text 1', 'Value1'); for (var i = 0, len = options.length; i < len; i++) { if (newOption.text.localeCompare(options[i].text) < 0) { break; } } select.insertBefore(newOption, options[i] || null); 回答 #3 赞同：0 时间：2012-10-23T15:22:03.337 There are a couple of methods, one is to create an array of the option values (or text, whatever you want to sort on) and create an object with properties whose names are the option values (or text) and values are references to the options. Sort the array, then iterate over it, using the member values to get the options from the object, e.g. function sortOptionsByValue(select) { var a = [], o = {}, opt; for (var i=0, iLen=select.options.length; i<iLen; i++) { opt = select.options[i]; a.push(opt.value); o[opt.value] = opt; } a.sort(); while (i--) { select.insertBefore(o[a[i]], select.firstChild); } // Optional, make first option selected select.selectedIndex = 0; } There are other methods, the above is just one. But it will work in any ECMA-262 compliant browser and doesn't depend on host objects acting like native objects, only that they behave like the W3C DOM Core says they should.</select>

# spring - 不支持 POST

> ID：13033473
> 
> 赞同：1
> 
> 时间：2012-10-23T15:03:56.177
> 
> 标签：spring, spring-mvc, spring-security

我以前有一个登录表单，如下所示

```
<div class="span-10 last">
    <c:url value="/j_spring_security_check" var="loginActionUrl" />
    <user:login   actionNameKey="login.login" action="${loginActionUrl}"/>
</div> 
```

但现在我将表格更改为如下所示。

```
<div class="span-10 last">
    <c:url value="/login/loginNow" var="loginActionUrl" />
    <user:login actionNameKey="login.login" action="${loginActionUrl}"/>
</div> 
```

我的控制器现在看起来像这样

```
@Controller
@RequestMapping(value = "/login")
public class LoginPageController {
    @RequestMapping(value = "/loginNow", method = RequestMethod.POST)
    public String doLogin(
        @RequestHeader(value = "referer", required = false) final String referer,
        @Valid final LoginForm loginForm, final BindingResult bindingResult,
        final Model model, final HttpServletRequest request,
        final HttpServletResponse response) throws CMSItemNotFoundException {

        if (somethingMissing) {
            return to login page.
        }

        return FORWARD_PREFIX + "/j_spring_security_check";

    }
} 
```

但现在我收到不支持请求方法的帖子。我不知道为什么..？我该如何纠正这个错误..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:50:57.270

你需要把它放在 web.xml

```
<filter> 
    <filter-name>httpMethodFilter</filter-name> 
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>httpMethodFilter</filter-name>
    <servlet-name>yourServlet</servlet-name>
</filter-mapping> 
```

# asp.net - 将 ASP.Net 文本框的值发送到 Jqgrid 保存事件

> ID：13033481
> 
> 赞同：0
> 
> 时间：2012-10-23T15:04:13.763
> 
> 标签：asp.net, jqgrid

我有一个 asp.net 表单，上面有一个 jqgrid。用户可以在主窗体上输入帐号，然后在 jqgrid 上输入一些数据。

在用户将行保存在网格中时，我还想将帐号从表单传递到保存过程，因为我们使用它来计算网格中行的一些折扣信息。

我不确定在保存时如何传递这些信息？

**更新**

我使用 json 作为我的数据类型，使用内联编辑和使用 editurl 将网格发布到处理将其保存到后端数据库的 Web 服务。

**更新 2 - 解决方案**

这是我用来将文本框的值与正常的发布数据一起传递的代码

```
jQuery(grid).jqGrid('inlineNav', "#pager", { edit: false, add: true, del: false, search: false,

                //add the extra params to the post call
                addParams: {
                    useDefValues: true,
                    addRowParams: {
                        keys: true,
                        aftersavefunc: reloadGrid,
                        extraparam: { accNo: getAccNumber, colourName: getColName }
                    }
                },
                editParams: {
                    keys: true,
                    aftersavefunc: reloadGrid,
                    extraparam: { accNo: getAccNumber, colourName: getColName }
                }
            }); 
```

该函数获取asp.net文本框的值

```
//get the value of the account number field
            getAccNumber = function () {
                return $("#<%= txtAccNo.ClientID %>").val();
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:52:16.507

您可以使用以下`extraparam`选项`editRow`：

```
onSelectRow: function (id) {
    ...
    $(this).jqGrid('editRow', id, {
        keys: true,
        url: "yourServerUrl",
        extraparam: {
            accountNumber: function () {
                return $("#accountNr").val();
            }
        }
    });
    ....
} 
```

来自 id="accountNr" 的输入字段的当前值的附加参数`accountNumber`将另外发送到标准数据。

你可以[在这里](http://www.ok-soft-gmbh.com/jqGrid/SendAdditionalDataDuringRowSaving.htm)看到相应的演示。因为没有 URL 存在`http://www.ok-soft-gmbh.com/jqGrid/myServerUrl`会出错，但是可以在 Fiddler、Firebug 或 IE 或 Chrome 的开发者工具中轻松验证附加参数`accountNumber`是否真的会发送到服务器。

在 ASP.NET 代码的情况下，您可能需要使用诸如`"<%=accountNumber.ClientID%>"`获取表单相应输入字段的 id 之类的语法。

也可以使用jqGrid 的[inlineData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)选项，其中属性定义为方法。[这里的想法与这里](https://stackoverflow.com/a/2928819/315935)描述的相同`postData`。在[答案](https://stackoverflow.com/a/8512693/315935)中，您会找到一个`inlineData`使用的示例。

# linux - tail -f -catalina.out 给出错误“无法打开输入”

> ID：13033482
> 
> 赞同：0
> 
> 时间：2012-10-23T15:04:14.833
> 
> 标签：linux, unix, putty

我无法使用 tail -f -catalina.out 跟踪 catalina.out 文件 显示的错误是 tail: cannot open input

以tomcat用户身份登录。该文件具有 -rw-r--r-- 权限。不知道为什么即使在尝试 --retry 之后我也无法跟踪它。

该文件可用，我没有收到丢失文件错误。文件显示 1.970MiB 大小。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:29:37.343

您的命令中有错字（起始破折号），正确的是：

```
tail -f catalina.out 
```

假设您在包含该`catalina.out`文件的目录中。

# python - 如何在 Python 中创建进程间数据结构？

> ID：13033486
> 
> 赞同：4
> 
> 时间：2012-10-23T15:04:21.163
> 
> 标签：python, multiprocessing, shared-memory, interprocess

我有一个包含字典（称为请求）的列表（称为 requestRoster）。'requests' 字典中的项目是诸如 'requestTime' 和 'thisURL' 之类的东西。例如：

```
[
{'thisURL': 'http://localhost/bikes', 'requestTime': datetime.datetime(2012, 10, 18, 0, 41, 34)}, 
{'thisURL': 'http://localhost/clothing', 'requestTime': datetime.datetime(2012, 10, 18, 0, 41, 35)}
] 
```

我正在使用 multiprocessing.Process 来生成一个新进程来发出每个请求。

我希望每个进程都更新 requestRoster，为每个请求添加一个“响应”项。

我怎样才能做到这一点？

我尝试使用 multiprocessing.Manager() 来制作 manager.list() 和 manager.Namespace()。也不让我做我想做的事，我认为是因为这个： [http ://docs.python.org/library/multiprocessing.html#multiprocessing.managers.SyncManager.list](http://docs.python.org/library/multiprocessing.html#multiprocessing.managers.SyncManager.list)

我想我可以使用 multiprocessing.Lock() 来

*   获取互斥锁
*   在流程中复制 requestRoster
*   修改本地化的 requestRoster
*   用本地化的请求名册覆盖“全球化”请求名册
*   释放互斥锁

...但它似乎有点复杂，我想知道我是否遗漏了一些更简单的东西。异步回调会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:19:49.720

如果可以的话，最好避免共享内存结构。在这里，您没有理由让进程自己写入字典列表 - 相反，您可以让主进程对此负责，并且只将 URL 提取分配给进程。

我喜欢`concurrent.futures.<Process|Thread>PoolExecutor`这种东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:28:35.483

我认为这种方法应该适合你：

调度员：

```
create logger_queue
create logger process, initialize with logger_queue
for each request
    create worker_pipe
    create worker process, initialize with send end of worker_pipe
    push receive end of worker_pipe over logger_queue 
```

工人：

```
make request
push response over connection 
```

记录仪：

```
while True
    for connection on logger_queue
        create new element in logging list
        link connection to new logging list element
    for each open connection
        poll for message
        if message
            store message to log
            close connection 
```

记录器进程还可以运行您想要的任何输出例程，因此您甚至不必担心另一个进程会从记录的数据集中读取数据。请注意，上面的连接是指`multiprocessing.Connection`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:36:36.570

我设法通过使用线程而不是多处理来做到这一点。因为工作人员与调度程序处于同一进程中，所以他们可以更新 requestRoster。

# iphone - 给定页面的 url，我如何访问 html，并使用正则表达式在某个 div 之间提取 html？

> ID：13033489
> 
> 赞同：0
> 
> 时间：2012-10-23T15:04:25.997
> 
> 标签：iphone, objective-c, regex, uiwebview, uiwebviewdelegate

给定网页的 URL，我需要获取特定类的打开`<div>`和关闭之间的 HTML。`</div>`

我认为如果我可以将页面的整个 html 代码作为字符串返回，我可以使用 RegEx 在特定`<div>`类之间的 HTML 之间提取并将其作为字符串返回。

我们如何使用 Objective-C 和 RegExes 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:07:00.310

对于解析部分，我有 3 个字给你：

> **不要尝试**

阅读[Parsing HTML the Cthulhu Wya](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)（由 Jeff 本人撰写）并查看[这个著名的 SO 答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。对于库，使用[HTML::Sanitizer](http://search.cpan.org/~nesting/HTML-Sanitizer-0.04/Sanitizer.pm)

另一方面，大多数程序在解析时既不需要也不应该预测整个 HTML 领域。事实上，设计一个这样的程序很可能是一个完全错误的方法，如果它将一个程序从几行脚本更改为一个防弹的商业级程序，这需要更多数量级的时间来正确编码和支持。在创建程序化解决方案时，应始终考虑资源支出（哎呀，经常这样做，我也过于笼统了）。此外，硬边界不一定是面向 HTML 的限制。它们可以很简单，比如“使用这些网页集”、“使用这些网页中的数据”、“98% 的时间为 98% 的用户工作”，甚至“天哪，我们必须做到这一点”在接下来的一个小时内工作，尽你所能”。

因此，如果您要解析类似[icanhazip](http://icanhazip.com)的内容，则可以选择它。也许如果它很小，它可能会起作用。或者，如果您使用的是静态内容。那是你来选择的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:19:18.420

您可以检查字符串是否与正则表达式匹配`NSPredicate`

此代码将检查是否`_test`是电子邮件地址

```
-(BOOL)CheckInput:(NSString *)_text  
{  
    NSString *Regex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";  
    NSPredicate *emailTest = [NSPredicatepredicateWithFormat:@"SELF MATCHES %@", Regex];   
    return [emailTest evaluateWithObject:_text];  
} 
```

# iphone - MGTwitterEngine.m 中的 XCode 标志错误

> ID：13033500
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:04:59.457
> 
> 标签：iphone, objective-c, ios

如图所示，我在 MGTwitterEngine.m 中遇到错误 ![在此处输入图像描述](../Images/53c9cd29501b45b16b40fc7f0b24d5dc.png)

我找不到错误在哪里..请指导我

非常感谢提前

以及 MGTTwitterLibXMLParser.m 中的错误，如下图所示

![在此处输入图像描述](../Images/9b8cb25b2197d0d2c4cae8e83b238b13.png)

SA_OAuthTwitterController.m 中的错误

![在此处输入图像描述](../Images/bf5a590572da5f0234194e925b0f1d02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:14:08.503

只需取消注释这些行，因为分配的变量未使用。如评论中所见`Dump XML to file for debugging.`

# ruby-on-rails - 无法选择数据库计数导轨

> ID：13033501
> 
> 赞同：0
> 
> 时间：2012-10-23T15:05:01.940
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ 和 ruby​​ on rails 的新手，所以我想知道，为什么这段代码不起作用！（我来自 PHP :// ）。

```
 class SayController < ApplicationController
  def hello
        # function for user data

        if ( params[:username] != nil && params[:password] != nil )
            if ( params[:username].length > 3 && params[:password].length > 3 )
                @err = 0
            else
                @err = 1
            end

            if ( @err == 1 )
                @messege = "Hey, yor username Must be longer that 3 charasters."
            else
                @messege = "Ok, We will check your user data"

                result = Users.count( :username => params[:username], :password => params[:password] )

                    if ( result == 1 )
                        @l = "Hey, #{params[:username]}."
                     else
                        @l = "Users data was wrong."
                     end 
            end
        else
            @messege = "Please fill in the text fields."
        end
  end

  def goodbye
  end

end 
```

和错误：

```
 ArgumentError in SayController#hello 
```

未知键：用户名

Rails.root：/home/cdr/perku 应用程序跟踪 | 框架跟踪 | 全跟踪

app/controllers/say_controller.rb:17:in `你好'

要求

参数：

{"用户名"=>"asdasdasdasdaaaasdfda", "密码"=>"[过滤]"}

显示会话转储

显示环境转储响应

标题：

没有任何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:08:27.260

```
 result = Users.where("username = ? and password = ?",
     params[:username], params[:password] ).count 
```

# model-view-controller - LocaleChangeInterceptor - 预期的行为是什么？

> ID：13033502
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:05:03.970
> 
> 标签：model-view-controller, internationalization, interceptor

我刚刚迈出了国际化领域的第一步，我将准备一个用于多语言的 Spring MVC 应用程序。我用谷歌搜索并阅读了一些示例（例如：http: [//viralpatel.net/blogs/spring-3-mvc-internationalization-i18n-localization-tutorial-example/](http://viralpatel.net/blogs/spring-3-mvc-internationalization-i18n-localization-tutorial-example/)），看起来很简单。我使用了与此示例完全相同的设置以及其中引用的修复程序中的代码。我在不同论坛的许多帖子中看到了相同的设置。

我不完全理解的一件事是：我有一个控制器方法，其映射如下所示：

@RequestMapping(value = "/placeDetails.htm", method = RequestMethod.GET) public String showPlaceDetails(Model model, @RequestParam(value = "placeId", required = true) int placeId, Locale locale) {

它会捕获这样的请求：www.me.com/placeDetails.htm?placeId=123。

我添加到“更改语言”菜单项的 href 表示 href="?lang=en"。据我所见，我最终得到了 URL www.me.com/placeDetails.htm?lang=en（当我将鼠标悬停在菜单项上时，我看到了这个）。上面的方法的请求映射将无法识别这一点，并且我从 Tomcat 收到一条错误消息，提示“客户端发送的请求在语法上不正确 ()。”。我的控制器知道没有使用名为 lang 的参数调用 www.me.com/placeDetails.htm。

这是（现在仍然是）我的假设，即我不应该添加另一个具有包含 lang 参数的请求映射的方法。我假设 LocaleChangeInterceptor 会拦截这个调用并处理它。

所以我的问题是：我是否做出了正确的假设，如果不是，当控制器方法具有其他参数时，拦截器应该如何工作。如果我做出正确的假设 - 任何想法为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:30:31.607

试试这个非常简单直接的方法。它对我有用。

[http://semikas.blogspot.gr/2012/07/spring-3-internationalization-and.html](http://semikas.blogspot.gr/2012/07/spring-3-internationalization-and.html)

# ckeditor - ckeditor更改href链接颜色？

> ID：13033504
> 
> 赞同：2
> 
> 时间：2012-10-23T15:05:12.067
> 
> 标签：ckeditor

我试图将链接颜色从蓝色更改为我的 ckeditor 内容的另一种颜色（用户编写的内容）

仅针对编辑器而不更改整个页面的链接颜色时遇到问题。

有任何想法吗？

# jquery - 为什么我不能将动态事件处理程序附加到此元素？

> ID：13033506
> 
> 赞同：1
> 
> 时间：2012-10-23T15:05:25.883
> 
> 标签：jquery, google-maps

我的[代码](http://jsfiddle.net/arEWv/7/)：

# HTML

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>

<div id="map" style="width:500px; height:500px"></div>

<div id="mappa-infowindow" style="display:none;">
    <div style="background-color:#ffffff;">            
        <span style="cursor:pointer;" class="pulsanteProva">Click</span>
    </div>            
</div> 
```

# jQuery/地图

```
$("body").on("click", ".pulsanteProva", function () {
    alert("clicked");
});

$(window).load(function () {
    var templateFinestra = $('#mappa-infowindow');
    var infoWindowOptions = {
        content: templateFinestra.html(),
        pixelOffset: new google.maps.Size(-87, -88)
    };
    var infowindow = new InfoBox(infoWindowOptions);    

    var latlng = new google.maps.LatLng(42.745334,12.738430);
    var options = { zoom: 12, center: latlng, mapTypeId: google.maps.MapTypeId.ROADMAP };
    var map = new google.maps.Map(document.getElementById('map'), options);
    var marker = new google.maps.Marker({ position: latlng, map: map, title: 'Example' });   

    markerClick = function () {
        infowindow.setContent(templateFinestra.html());
        infowindow.open(map, marker);
    };    

    google.maps.event.addListener(marker, 'click', markerClick);
}); 
```

当我单击标记而不是跨度`Click`时，它必须向我显示警报，但实际上它不起作用。似乎没有附加处理程序？为什么？

将函数放入`on`函数内部并从地图父级附加它都不起作用[http://jsfiddle.net/arEWv/9/](http://jsfiddle.net/arEWv/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:38:41.400

似乎谷歌地图在渲染之前删除了所有附加到嵌入元素的事件。

看到那个工作[的jsfiddle](http://jsfiddle.net/arEWv/8/)

```
markerClick = function () {
        infowindow.setContent(templateFinestra.html());
        infowindow.open(map, marker);
        setTimeout(function(){$('.pulsanteProva').click(function(){alert('clicked');});},500);
    }; 
```

而这个不工作[的jsfiddle](http://jsfiddle.net/arEWv/12/)

```
markerClick = function () {
        infowindow.setContent(templateFinestra.html());
        infowindow.open(map, marker);
       $('.pulsanteProva').click(function(){alert('clicked');});
}; 
```

# ios - 在 IOS 中为 html 文件保留文件夹层次结构

> ID：13033507
> 
> 赞同：0
> 
> 时间：2012-10-23T15:05:28.723
> 
> 标签：ios, html, ipad, uiwebview, nsurl

我正在尝试在我的 xcode 项目中包含一个文件夹结构，其中包含 html、css、js 和如下图像：

```
htmlcontent
    html
       test.html
    css
       test.css
    js
       test.js 
```

我将文件夹及其子文件夹复制到 xcode，我可以在那里看到 heirachy，但是当我执行以下操作时：

```
NSString *pathToFile = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];
NSURL *url = [NSURL fileURLWithPath:pathToFile isDirectory:NO];
[_webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

它打印：

```
/Users/scoota/Library/Application Support/iPhone Simulator/6.0/Applications/8AAC5870-DF24-49BB-BCB8-598C8C0A7C9A/TestApp.app/test.html 
```

有没有办法保留层次结构？我问的原因是我的 html 文件有对 css 的引用，如下所示：

```
<link rel="stylesheet" type="text/css" href="htmlcontent/test.css" media="screen, projector" /> 
```

结果没有加载css。如果我将其更改为以下内容：

```
<link rel="stylesheet" type="text/css" href="test.css" media="screen, projector" /> 
```

它加载。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:18:12.460

将文件添加到 Xcode 项目时，请确保选择“制作文件夹引用”而不是“为文件夹制作组”

但是，不应该是 ,,/css/test.css 吗？

# php - 使用 Aptana 插件通过 Eclipse 上传时的文件权限问题

> ID：13033510
> 
> 赞同：2
> 
> 时间：2012-10-23T15:05:29.957
> 
> 标签：php, eclipse, eclipse-plugin, aptana

我有一个奇怪的问题，可能需要很长时间才能在 Google 中找到答案......

我正在为 PHP 使用 EasyEclipse，并且在其上安装了 Aptana 插件（仅用于能够直接从 Eclipse 获取文件）。

当我在 Eclipse 中创建文件或文件夹并通过 ecplise 上传到 ftp 时 - 文件权限设置为 666。

有谁知道必须更改哪些设置才能获得 664 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:19:15.210

我知道这有点晚了 - 但我遇到了同样的问题，发现这个问题没有答案。后来我发现了相同的查询和一个有效的答案，所以其他仍在搜索的人应该在这里检查......[如何在 Aptana Studio 3 中设置默认文件权限？](https://stackoverflow.com/questions/13448931/how-to-set-default-file-permissions-in-aptana-studio-3)

# php - MySQL User_ID - 需要帮助

> ID：13033513
> 
> 赞同：0
> 
> 时间：2012-10-23T15:05:36.757
> 
> 标签：php, mysql, sql

这些是我的 4 个 MySQL 表：

```
---Users---
user_id
user_name
user_email
user_firstname
user_lastname
user_state
user_country
user_occupation
user_dob
user_accountcreationdate
user_sex
user_password

---Logins----
user_id
last_login
browser_type
ip_address

---User Roles---
user_id
role_id

---Roles---
role_id
role_name
role_description 
```

当用户在网站上注册一个帐户时，它将在用户表中创建一个自动递增的 user_id。如何从用户表中获取相同的 user_id 到登录和用户角色表？每个表中的 user_id 都是相同的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:13:20.353

1）在用户表中插入您的新用户

2）`user_id`通过使用 MySQL`LAST_INSERT_ID()`函数获取（更多信息[在这里](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)）

**例子：**

```
mysql> SELECT LAST_INSERT_ID();
        -> 195 
```

3）将其他数据（和`user_id`）插入其他表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:08:29.530

插入用户表后，您可以获取最后一个插入 ID。或者在任何时候您都可以运行 select 来获取 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:18:41.387

当您使用 PHP 时，您可以使用 php 命令[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)（或您使用的任何风格，例如 mysqli_insert_id() 等）：

```
$new_user_id = mysql_insert_id(); 
```

这将为您提供先前执行的 SQL 自动生成的 ID。

# php - 带有 2 个附件的 PHP 邮件

> ID：13033515
> 
> 赞同：1
> 
> 时间：2012-10-23T15:05:44.467
> 
> 标签：php, email, attachment

我有以下代码可以发送带有附件的邮件，但我无法将其调整为发送 2 个附件而不仅仅是一个附件。我需要发送一个 .docx 和一个 .pdf

关于我应该修改什么的任何想法？

```
 function mail_attachment($filename1, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
        $file = $path.$filename;
        $file_size = filesize($file);
        $handle = fopen($file, "r");
        $content = fread($handle, $file_size);
        fclose($handle);
        $content = chunk_split(base64_encode($content));
        $uid = md5(uniqid(time()));
        $name = basename($file);
        $header = "From: ".$from_name." <".$from_mail.">\r\n";
        $header .= "Reply-To: ".$replyto."\r\n";
        $header .= "MIME-Version: 1.0\r\n";
        $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
        $header .= "This is a multi-part message in MIME format.\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
        $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
        $header .= $message."\r\n\r\n";
        $header .= "Content-Type: application/msword; name=\"".$filename."\"\r\n"; // use different content types here
        $header .= "Content-Transfer-Encoding: base64\r\n";
        $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
        $header .= $content."\r\n\r\n";
        mail($mailto, $subject, "", $header);  
    } 
```

这就是我所说的..

```
 mail_attachment("attachment.docx", "","recipient@mail.com","admin@mail.com","Admin","admin@mail.com","Subject","Mail body"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:09:54.867

我建议您使用 PHPMailer - 一个易于使用的稳定库，可以完成您的所有工作！[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

```
$mail = new PHPMailer();
$mail->IsMail();

$mail->AddAddress("email@example.com");
$mail->Subject = "Test 1";
$mail->Body = "Test 1 of PHPMailer."; 
```

您将能够在一个字符串中添加附件：

```
$mail->AddAttachment('/home/mywebsite/public_html/file1.zip', 'file1.zip');
$mail->AddAttachment('/home/mywebsite/public_html/file2.zip', 'file2.zip'); 
```

它更容易，更灵活。不要做猴子的工作。它已经为你完成了！
程序员一定很懒！输入更少的代码）

# javascript - 更改浮点图的 x 轴单位

> ID：13033516
> 
> 赞同：0
> 
> 时间：2012-10-23T15:05:49.463
> 
> 标签：javascript, jquery, flot

我能够用 30 个数据点绘制图表，并且所有点都显示在图表中。图表看起来很局促。我想以 5 的倍数显示数据点。假设我有 30 个点，我的图表应该有 [0, 5, 10, 15, 20, 25, 30] 作为轴点。从数学上讲，当我们绘制图表时说 1 个单位 = 5 个点。我不知道该怎么做。有人可以在查看方法时至少从文档中指出正确的方向。

```
var options = {
        series: {           
            lines: {
                show: true,
                lineWidth: 1,                   
                fillColor: {colors:[{opacity: 1},{opacity: 1}]}, 
                align: "right" 
            }           
       },
       grid: {
            show: true,
            markings: [{xaxis: {from: 0, to: 5}}]
       },      
       xaxis:{
            tickFormatter:timeTickFormatter,
            tickSize : 1
       },
       yaxis: { 
            max:24
       }
    };

function timeTickFormatter(val,axis) {

        var returnDate =new Array();    
        <% for (String dateValue: pasDays) { %>

            returnDate.push("<%= dateValue %>");

        <% } %>

        return returnDate[val];
    }

$(document).ready(function () {
        $.plot($("#HoursChart"), [ { label : "Work Hours", data: <%= workHrsDaily %>  },
                                                                  { label : "Idle Hours", data: <%= idleHrsDaily %> } ], options);

    }); 
```

更新：我将 tickSize 更改为 5，它显示 5 个数据点 :)！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:19:24.913

很确定您可以执行以下操作：`ticks: [0, 5, 10, 15, 20, 25, 30]`

来自[Flot API 文档](http://flot.googlecode.com/svn/trunk/API.txt)：

> 如果要完全覆盖刻度算法，可以为“刻度”指定一个数组，如下所示：
> 
> 滴答声：[0, 1.2, 2.4]

您可能需要删除该`tickSize: 1`属性，因为这会将刻度的间隔设置为 1。如果您将 设置`tickSize`为类似`6`（长度为 30），这将为您提供一个间隔`5, 10, 15, 20, 25, 30`

# java - 为什么我尝试保存图像时收到 NullPointerException？

> ID：13033523
> 
> 赞同：0
> 
> 时间：2012-10-23T15:06:03.907
> 
> 标签：java, google-app-engine, persistence, blobstore, object-persistence

我正在尝试将图像保存在我的应用程序中。但是当我尝试持久化图像对象时出现空指针异常。这是我的图像类：

```
 @PersistenceCapable
 public class ImageObject {

     @PrimaryKey
     @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
     private Key key;

     @Persistent
     private String title;

     @Persistent
     private Blob image;

     public ImageObject(){}

 //     all getters and setters
 } 
```

以下是我的 servlet 代码，它给出了异常：

```
 resp.setContentType("text/html");
    PrintWriter out = resp.getWriter();
    PersistenceManager pm = PMF.get().getPersistenceManager();
    Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(req);
    List<BlobKey> blobKeyList = blobs.get("upload_img_form_input");
    BlobKey blobKey = blobKeyList.get(0);
    String keyString = req.getParameter("upload_img_form_key");

    Key key = KeyFactory.createKey(ImageObject.class.getSimpleName(), keyString);
    Image img = ImagesServiceFactory.makeImageFromBlob(blobKey);
    ImageObject imgObj = new ImageObject();
    imgObj.setKey(key);
    imgObj.setTitle(keyString);
    imgObj.setImage(img.getImageData());
// i am getting exception at this line where i am trying to persist 
    pm.makePersistent(imgObj); 
```

谁能告诉我为什么我会得到这个 NullPointerException？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:09:17.640

你可以在这条线上拥有 Npe 的唯一方法：

```
pm.makePersistent(imgObj); 
```

是当 pm 为空时

你应该检查那部分：

```
PersistenceManager pm = PMF.get().getPersistenceManager(); 
```

你的 persistence.xml 在类路径中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T08:22:01.567

根据我的经验，当您从中获取图像而不对其进行任何转换时会`img.getImageData()`返回。如果您想在不进行任何图像转换的情况下从 blob 中获取字节，则实际上不需要图像服务，您只需从 blob 存储中获取数据。[我从博客文章](http://bpossolo.blogspot.fr/2012/04/method-for-fully-reading-blob-from.html)中尝试了这段代码，它运行良好。`null``ImagesServiceFactory.makeImageFromBlob`

```
public static byte[] readBlobFully(BlobKey blobKey) {

    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    BlobInfo blobInfo = new BlobInfoFactory().loadBlobInfo(blobKey);

    if (blobInfo == null)
        return null;

    if (blobInfo.getSize() > Integer.MAX_VALUE)
        throw new RuntimeException("This method can only process blobs up to " + Integer.MAX_VALUE + " bytes");

    int blobSize = (int) blobInfo.getSize();
    int chunks = (int) Math.ceil(((double) blobSize / BlobstoreService.MAX_BLOB_FETCH_SIZE));
    int totalBytesRead = 0;
    int startPointer = 0;
    int endPointer;
    byte[] blobBytes = new byte[blobSize];

    for (int i = 0; i < chunks; i++) {

        endPointer = Math.min(blobSize - 1, startPointer + BlobstoreService.MAX_BLOB_FETCH_SIZE - 1);

        byte[] bytes = blobstoreService.fetchData(blobKey, startPointer, endPointer);

        for (int j = 0; j < bytes.length; j++)
            blobBytes[j + totalBytesRead] = bytes[j];

        startPointer = endPointer + 1;
        totalBytesRead += bytes.length;
    }

    return blobBytes;
} 
```

# erlang - 暂停/暂停整个 Erlang 程序

> ID：13033527
> 
> 赞同：0
> 
> 时间：2012-10-23T15:06:30.303
> 
> 标签：erlang

有没有一种简单的方法来挂起/暂停整个 Erlang 程序而无需使用操作系统命令（例如 Windows 的 sysinternals pssuspend）？

理想情况下，我想在从外部程序返回时恢复程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:37:10.977

正如 W55tKQbuRu28Q4xv 所说，您可以“暂停”进程。

要执行此操作并且不会丢失在暂停时发送到您的进程的所有消息，请执行选择性接收。假设您的进程是 gen_server 它可能如下所示：

```
handle_info(pause, State) ->
    receive 
        unpause ->
            {noreply, State}
    end; 
```

请注意，所有消息都将存在，在您的进程的接收队列中。因此，如果您以依赖于系统时钟值的方式处理消息，则需要将时间采样移至发送方进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:30:06.227

我认为我的问题的简短回答是“不”。

您可以向所有进程发送暂停消息。然而，很难知道进程将以什么顺序停止，如果使用大量进程，可能会有相对较大的时间延迟。最后我确实使用 pssuspend 来做到这一点：

在二郎中：

```
runmyscript() ->
  receive
       updatemodel->
           os:cmd("start myscript.bat"),
...
end. 
```

在 myscript.bat 中

```
pssuspend werl.exe
mycommands
...
pssuspend -r werl.exe
exit 
```

# asp.net - 运行部署项目给我“某事”不是有效的虚拟路径

> ID：13033528
> 
> 赞同：1
> 
> 时间：2012-10-23T15:06:31.090
> 
> 标签：asp.net, deployment, aspnet-compiler

当我运行部署项目时，我有一个 Web 应用程序的部署项目，它给了我这个错误 Error 443 'http:/localhost:54333/Content/XXXX/XXXXXX/XXXXXX.ascx' is not a valid virtual path。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:13:44.403

您无法导航到 .ASCX 文件。.ASCX 文件是用户控件，它不是 .ASPX Web 表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:16:09.793

ascx 用于用户类型控件，它不像 .aspx 那样表示任何页面，因此您无法导航到 ascx

# wcf - Visual Studio 中的 WCF MSMQ 服务

> ID：13033529
> 
> 赞同：3
> 
> 时间：2012-10-23T15:06:32.990
> 
> 标签：wcf, visual-studio, msmq, cassini

我正在尝试使用 MSMQ 设置一个非常简单的 WCF 服务。我正在按照[这里](http://www.codeproject.com/Articles/326909/Creating-a-WCF-Service-with-MSMQ-Communication-and)的步骤。当我去运行我的服务并加载 .svc 文件时，我收到以下错误：

`The protocol 'net.msmq' is not supported.`

这是我的配置的相关部分：

```
<services>
  <service name="MSMQService.MSMQService">
    <host>
      <baseAddresses>
        <add baseAddress="http://technoka1-l7:9999/"/>
      </baseAddresses>
    </host>
    <endpoint address="net.msmq://technoka1-l7/private/MSMQService.svc"
              binding="netMsmqBinding" contract="MSMQService.IMSMQService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services> 
```

任何有关如何修复的想法将不胜感激。我查看了很多为 IIS 提供建议的不同地方，但现在它正在 Cassini 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:42:23.753

这看起来像是您从 IIS 得到的错误。如果您在 IIS 中托管您的服务，请查看这篇[关于](http://dotnet.dzone.com/news/msmq-wcf-and-iis-getting-them-)设置 IIS 以处理`netMsmqBinding`. 对于在 Windows 服务中托管，[这个旧的 Byte 表单帖子](http://bytes.com/topic/net/answers/614483-wcf-hosted-windows-service)足以让您继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:44:07.563

我建议您切换到 IIS，该协议必须在 IIS 本身中启用，您使用控制台、服务等的事实并不重要。您的服务的主机是 IIS，它是激活器，因为您使用的协议以及您使用它的方式。

参考： http: [//geekswithblogs.net/LessonsLearned/archive/2010/12/27/the-protocol-net.msmq-is-not-supported.aspx](http://geekswithblogs.net/LessonsLearned/archive/2010/12/27/the-protocol-net.msmq-is-not-supported.aspx)

*   [服务总线](http://www.nservicebus.com/)
*   [轨道交通](http://masstransit-project.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T21:29:20.897

看起来[Cassini 只支持 http](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6828959c-43c1-4452-8070-01f14df1c1d2)，所以没有办法直接从 Visual Studio 运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T05:46:12.203

1）如果您手动托管服务（使用控制台或其他 Windows 应用程序），一切正常。
2) 如果尝试启动 wcf 服务应用程序，则不支持 msmq 绑定。我还没有找到解决这个问题的方法。
3) 如果您使用 IIS 托管 wcf 服务，请确保 SITE 和 APPLICATION 都支持 msmq 协议：

1.  站点->绑定。如有必要，添加 msmq 绑定。
2.  站点-> 扩展设置-> 活动协议。如有必要，添加“net.msmq”。
3.  应用程序-> 扩展设置-> 活动协议。如有必要，添加“net.msmq”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T14:39:57.500

我还在寻找一种在直接从 Visual Studio 运行的 IIS 中调试 WCF net.msmq 服务的方法。我遇到了这篇很棒的帖子，它允许我这样做。

[http://codenamesean.wordpress.com/2012/09/26/debugging-a-net-msmq-wcf-service-hosted-in-iis-7/](http://codenamesean.wordpress.com/2012/09/26/debugging-a-net-msmq-wcf-service-hosted-in-iis-7/)

*   通过选择 IIS 中虚拟目录的“Browse *:80 (http)”链接启动 w3wp.exe 进程
*   调试菜单 => 附加到 w3wp.exe 进程
*   运行客户端
*   通过单击虚拟目录并浏览到您的 Service.svc 来激活 Windows Process Activation Service。（注意：我不必执行此步骤即可对其进行调试。）

# html - 锚标签上的两层边框：活动状态

> ID：13033535
> 
> 赞同：1
> 
> 时间：2012-10-23T15:06:53.263
> 
> 标签：html, css

在 Gmail 中，当我单击撰写按钮，然后将鼠标移开而不松开鼠标按钮时，我会得到这种优雅的两层边框：

![gmail撰写按钮](../Images/4021b7fbf2c182d050a271e97d455a38.png)

这个效果是怎么做的？我可以将此效果应用于锚标签吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:10:03.200

是的，您可以，只需使用`border-style: double`：

```
a {
    color: #fff;
    background-color: #f00;
    font-weight: bold;
    border: 6px double #fff;
    padding: 0.4em 1em;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/f9wv9/3/)。

这里`border-color`是`#fff`出现在背景色部分“内部”或“之间”的部分。

如果您想变得更有趣，并且让“最外边框”的颜色与 不同`background-color`，那么您还可以使用`box-shadow`（或供应商前缀的变体）来：

```
a {
    text-decoration: none;
    color: #fff;
    background-color: #f00;
    font-weight: bold;
    border: 3px solid #fff;
    padding: 0.4em 1em;
    box-shadow: 0 0 0 4px #f90;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/f9wv9/)。

这会将阴影水平位移零个单位，垂直位移零个单位，具有零个单位的模糊和`4px`.

`box-shadow`当然，这种方法允许将[多种不同的颜色](http://jsfiddle.net/davidThomas/f9wv9/2/)添加到元素的外部。但不幸的是，该`box-shadow`解决方案并没有取代阴影实际上是“无形的”元素。因此，您可能必须考虑阴影的宽度并将相关边距应用于`a`元素元素以及`display: inline-block`（如果它们是内联元素）以使边距生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:21:42.477

这两种方法都有效，这是一种替代解决方案。看起来这也是 Gmail 正在使用的：

[jsfiddle](http://jsfiddle.net/f9wv9/5/)

```
a {
    color: #fff;
    background-color: #f00;
    padding: 10px;
    box-shadow: 0 0 0 1px #FFFFFF inset;
    border: 1px solid #f00;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:18:35.477

[http://jsfiddle.net/calder12/PfuJn/1/](http://jsfiddle.net/calder12/PfuJn/1/)

```
a{color:white;font-family:sans-serif;font-weight:bold;text-align:center;display:block;}
.aContainer{width:80px;padding:15px;background-color:orange;border: 6px double white;}

<div class="aContainer">
<a href="#">Compose</a>
</div>​ 
```

# c# - 使用 X509Certificate2 在 https 中进行客户端证书身份验证

> ID：13033540
> 
> 赞同：1
> 
> 时间：2012-10-23T15:07:02.220
> 
> 标签：c#, asp.net, security, authentication, ssl

我试图了解客户端身份验证在 https 场景中的工作方式以及如何使用它来提供基本的身份验证/授权功能。

假设我想在证书和用户（例如 IPrincipal）之间建立一个映射。我的服务器颁发证书并将其分发给客户端。当客户端连接时，我要求提供证书，如果提供了有效的证书，我会根据之前定义的映射对用户进行身份验证。

我应该使用什么来创建映射？证书指纹是一个很好的候选人吗？确定客户身份就足够了吗？

或者也许我根本不需要映射并且可以简单地接受我的服务器颁发的所有证书？

编辑：让我改写一下 - 假设我可以颁发客户端证书，我如何在 https 会话期间验证客户端身份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:21:50.777

A lot of what your asking depends greatly on what your existing cert infrastructure looks like. For security reasons I would highly suggest identifying the specific user via a mapping. If you've gone as far as to distribute certs for user auth, theres probably something worth securing. Any authorization or auditing you need should be per user. The best way is to use the cert CN (common name). The thumbprint will identify as specific cert, but what happens when the cert expires? This of course means when you issue certs the CN is controlled, and will relate to a specific person. I've found using email address to be very reliable, because you can create a validation routine by sending them confirmation emails. You can also enforce some uniqueness with the email address.

The hard part is distributing certs and getting IIS to ask the client for certs so your asp.net app can gain access to its information. Once you have that all your requests will have something in `Request.ClientCertificate` which has all the details of their cert you'd need to authenticate them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:22:23.853

I'm assuming you are using .Net framework. You may try to use HttpRequest.ClientCertificate property. Certificate validation is already done with ASP.NET you just need check IsValid property. Rest of validation is map certificates to users.

If all certificates are issued by same CA you can use the certificate serial number. If not include the HttpClientCertificate.Issuer property with serial number.

Thumbprint is hard to use later if you need some debugging.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:26:58.267

你的问题包含 2 个不同的部分：

1) 我如何验证客户证书是由我签发且信誉良好？

非常普遍的答案是您根据受信任的根证书验证它的链。例如，您可以在此处阅读：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd407310(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407310(v=vs.85).aspx) http://www.openssl.org/docs/apps/verify.html [http:// /www.cryptosys.net/pki/x509_validatechain.html](http://www.cryptosys.net/pki/x509_validatechain.html)

在大多数情况下，您不必编写任何代码来执行此操作。您只需要在 Web 服务器之前安装（例如）Apache。Apache 可以配置为根据受信任的证书请求和验证客户端证书。

2) 如何将证书映射到用户？

如果您正在寻找一种常见的完成方式，那么您应该在证书中使用 Subject Alternative Name 属性来存储主体名称。这是多个提供商使用的最常见的方式。

以下是一些与 Windows 相关的有趣链接：

[http://technet.microsoft.com/en-us/library/cc736706(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc736706(v=ws.10).aspx)

[http://technet.microsoft.com/en-us/library/cc736781(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc736781(WS.10).aspx)

但是，一般来说，您可以使用证书中的任何唯一事物进行映射。

# emacs - 特定次要模式的模式行中的自定义颜色

> ID：13033542
> 
> 赞同：0
> 
> 时间：2012-10-23T15:07:07.357
> 
> 标签：emacs, configuration, fonts, colors

纯粹出于吸引眼球的原因，我希望在模式行中显示一种次要模式，具有 '((()))' （不带单引号）。

是为`rainbow-delimiters-mode`. 到目前为止，我在我的*.emacs*中得到了以下内容并且它有效：

```
(setq minor-mode-alist (cons '(rainbow-delimiters-mode " ((()))") minor-mode-alist)) 
```

但是现在我想在模式行中使用三种不同的颜色，以便我的模式行中的括号“反映”彩虹分隔符模式的作用。

我应该怎么做？（我不在乎与实际`rainbow-delimiters-mode`使用的颜色相匹配的颜色）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:21:03.867

这将做到这一点，在 Emacs 24.2.1 中进行了测试：

```
(setq minor-mode-alist
      `((rainbow-delimiters-mode " ")
        (rainbow-delimiters-mode #("(" 0 1 (face rainbow-delimiters-depth-1-face)))
        (rainbow-delimiters-mode #("(" 0 1 (face rainbow-delimiters-depth-2-face)))
        (rainbow-delimiters-mode #("(" 0 1 (face rainbow-delimiters-depth-3-face)))
        (rainbow-delimiters-mode #(")" 0 1 (face rainbow-delimiters-depth-3-face)))
        (rainbow-delimiters-mode #(")" 0 1 (face rainbow-delimiters-depth-2-face)))
        (rainbow-delimiters-mode #(")" 0 1 (face rainbow-delimiters-depth-1-face)))
        ,@(assq-delete-all 'rainbow-delimiters-mode minor-mode-alist))) 
```

它利用字符串属性为次要模式指示器添加颜色——`#("(" 0 1 (face foo-face))"`语法指定一个单字符字符串，其`face`属性设置`foo-face`为范围 [0, 1)。

由于一个字符串可以有许多属性，因此人们希望能够`minor-mode-alist`为每个字符指定一个具有不同面孔的条目。但是，由于可能是 Emacs 错误，在显示模式行时，仅考虑次要模式指示器的第一个字符的属性。为了解决这个问题，代码利用了 Emacs`minor-mode-alist`为同一模式合并多个指标的事实。它为 指定了几个字符串，每个字符串都有自己的颜色，`rainbow-delimiters-mode`并用于`assq-delete-all`从 中删除旧的彩虹分隔符条目`minor-mode-alist`。

为了完整起见，这里是单入口代码，它在 Emacs 24.2.1 中看起来是无色的，因为它的第一个字符没有指定面：

```
(setq minor-mode-alist
      `((rainbow-delimiters-mode #(" ((()))"
                                   1 2 (face rainbow-delimiters-depth-1-face)
                                   2 3 (face rainbow-delimiters-depth-2-face)
                                   3 4 (face rainbow-delimiters-depth-3-face)
                                   4 5 (face rainbow-delimiters-depth-3-face)
                                   5 6 (face rainbow-delimiters-depth-2-face)
                                   6 7 (face rainbow-delimiters-depth-1-face)))
        ,@(assq-delete-all 'rainbow-delimiters-mode minor-mode-alist))) 
```

# mysql - 数据库和wordpress备份cron作业

> ID：13033546
> 
> 赞同：2
> 
> 时间：2012-10-23T15:07:25.260
> 
> 标签：mysql, linux, cron, crontab, crontrigger

我想每天从hostgator cpanel运行一次备份我的mysql数据库和wordpress文件的cron作业。

我找到了一个示例脚本并使用我的信息编辑了参数，但它似乎无法正常工作。我对 cron 工作没有太多经验，所以我不确定我所有的问题是什么。

我有一个名为 backups.sh 的 .sh 文件，保存在主目录中，并有一个名为 backups 的文件夹，其中包含子文件夹数据库和 wordpress。

这是 .sh 文件。我用我的凭据替换了 {my info} 并填写了我的数据库信息的所有内容：

```
#!/bin/bash
# Script Function:
# This bash script backups up the db everyday dependent on 
# when you set the cron job to run with a file name time stamp 
# and tar.gz zips the file.
# The db will be saved in /backups/database/
# Db backups older than 5 days will be deleted.\
#[Changes Directory]
cd /home/{my info}/backups/

#[Old DB Deletion and Files Script]
find /home/{my info}/backups/database -name "*.tar.gz" -mtime +5 -exec rm -f {};
find /home/{my info}/backups/wordpress -name "*.tar.gz" -mtime +5 -exec rm -f {};

#[Stamps the file name with a date]
TIMESTAMP=`date +%m-%d-%y-%H%M`

#[DB Backup Scripts]
# DB Name
HOST=localhost
DBNAME=""
USER=""
PASSWORD=""
DUMP_PATH=/home/{my info}/backups/database/
BACK_PATH=/home/{my info}/backups/wordpress/
mysqldump --opt -c -e -Q -h$HOST -u$USER -p$PASSWORD $DBNAME > $DBNAME.sql
tar czpf $DUMP_PATH/$DBNAME.$TIMESTAMP.tar.gz $DBNAME.sql

rm -f $DBNAME.sql
#Backing up Wordpress files @ root
tar czf $BACK_PATH/wordpress.$TIMESTAMP.tar.gz /home/{my info}/public_html/mydomain 
```

这是我的命令行：

```
/bin/sh ~/backups.sh 
```

cron 作业执行后我收到一封电子邮件，它通知我说“没有这样的文件或目录”，以及一堆找不到的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:34:34.357

`cron`并不总是与`PATH`您的登录 shell 具有相同的变量，因此不能总是找到类似`mysqldump`或什至`tar`.

我建议使用每个命令的完整路径，即：`/usr/bin/mysqldump`而不是`mysqldump`. `which`您可以使用该命令轻松确定路径是什么。

```
$ which mysqldump
/usr/bin/mysqldump 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-12T09:56:53.197

您可以使用以下 bash 脚本来备份 wordpress 网站和数据库。此处的完整详细信息-> [https://www.easyaslinux.com/tutorials/how-to-periodically-backup-your-website-and-mysql-database-to-local-server-as-well-as-s3-bucket -使用bash脚本/](https://www.easyaslinux.com/tutorials/how-to-periodically-backup-your-website-and-mysql-database-to-local-server-as-well-as-s3-bucket-using-bash-script/)

```
#!/bin/bash

###################################
backup_dir="give_directory_here"
webapp_path="website_patj"
database_name="testdb"
database_user="dbuser"
database_pwd="password"
database_host="db_host_name.net"
retention_days=10
##################################

date=`date +%d-%m-%y`
path="$backup_dir$date"
echo $date
mkdir -p $path > /dev/null 2>&1
if [ $? -eq 0 ]; then
    echo "-Successfully  created directory $path"

    mysqldump -u $database_user -p$database_pwd -h $database_host $database_name > $path/db_backup.sql

    if [ $? -eq 0 ]; then
        echo "-Successfully created database dump"

        tar -czvf  $path/backup_with_db.tar.gz $webapp_path $path/db_backup.sql > /dev/null 2>&1

        if [ $? -eq 0 ]; then
                echo "-Successfully completed file + db  backup process"
        rm -rf $path/db_backup.sql

                old_date=`date --date="$retention_days day ago" +%d-%m-%y`
                old_path="$backup_dir$old_date"

                ls $old_path > /dev/null 2>&1
                if [ $? -eq 0 ]; then
                        rm -rf $old_path > /dev/null 2>&1
            if [ $? -eq 0 ]; then
                            echo "-Sucessfully removed old backup on $old_date"
                    else
                            echo "-Failed old backup removal $old_path" && exit 1
                    fi
        fi

        else
                echo "-Failed file +db backup process" && exit 1
        fi

    else
        echo "-Failed creating database dump, backup process failed" && exit 1
    fi

else
    echo "-Failed creating directory $path, backup process failed" && exit 1

fi 
```

# html - 使用 CSS 自动调整宽度内容

> ID：13033552
> 
> 赞同：1
> 
> 时间：2012-10-23T15:07:45.980
> 
> 标签：html, css, css-tables, col

我有一个有两列的表。第二列应始终完美显示其内容，并且应根据内容自动计算宽度。第一列应尽可能宽到某个点（最大宽度）。不幸的是，我只习惯 WPF 而不是 HTML。在 WPF 中，我将编写以下内容：

```
<Grid.ColumnDefinitions>
   <ColumnDefinition Width="*" MaxWidth="600" />
   <ColumnDefinition Width="Auto" />
</Grid.ColumnDefinitions> 
```

我的 HTML 是：

```
<colgroup>
   <col class="fullWidthCol" />
   <col class="autoWidthCol" />
</colgroup> 
```

我的 CSS 是：

```
.fullWidthCol {
   width: 100%;
   max-width: 600px;
}

.autoWidthCol {
   overflow: auto;
} 
```

我确定我什至没有接近。它忽略了我的最大宽度并将第一列的大小尽可能大，将第二列推到屏幕的右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:10:46.650

看起来`td`不接受`max-width`规范。改用`width`；在 a 上`td`，`width`将具有相同的效果。

例子：

```
table
{ width: 100%; }

.fullWidthCol
{ width: 300px; }

<table border="1">
  <tr>
    <td class="fullWidthCol">The first column should be as wide as possible up to a certain point (max width). </td>
    <td class="autoWidthCol">The second column should ALWAYS show it's content perfectly and the width should be automatically calculated based on the content. </td>
  </tr>  
</table> 
```

或查看[http://jsfiddle.net/HdSA2/](http://jsfiddle.net/HdSA2/)。

# php - 文件大小（）函数不起作用

> ID：13033568
> 
> 赞同：1
> 
> 时间：2012-10-23T15:08:49.373
> 
> 标签：php, file, size

我将一些文件上传到一个文件夹，当我使用文件大小功能时，我收到以下消息：

```
Message: filesize() [function.filesize]: stat failed for http://www.books.tahasoft.com/216.ppt 
```

文件的路径是：

```
http://www.books.tahasoft.com/216.ppt 
```

这是我的代码：

```
<?
echo filesize("http://www.books.tahasoft.com/216.ppt");
?> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:11:32.670

您无法通过 http 协议获取文件大小。

如果文件在本地服务器上，请在文件系统中使用带有绝对或相对路径的文件大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-18T04:34:35.573

你可以这样使用......

```
 $ch = curl_init('http://www.books.tahasoft.com/216.ppt');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
 curl_setopt($ch, CURLOPT_HEADER, TRUE);
 curl_setopt($ch, CURLOPT_NOBODY, TRUE);
 $data = curl_exec($ch);
 $size = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);

 curl_close($ch);
 echo $size; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:11:58.983

流`http://`包装器[不支持](http://www.php.net/manual/en/wrappers.http.php)`stat`函数系列，因此您不能`filesize`像文档警告的那样这样做：

> 从 PHP 5.0.0 开始，这个函数也可以与*一些*URL 包装器一起使用。请参阅支持的协议和包装器以确定哪些包装器支持 stat() 系列功能。

如果您需要通过 HTTP 的文件大小而无需先下载整个文件，您可以使用`curl`; [你可以在这里](https://stackoverflow.com/questions/5440270/serving-file-hosted-on-another-server-as-download/5440303#5440303)看到如何做到这一点。但请记住，这取决于远程服务器决定发回的标头；*不能保证*它会一直有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T15:12:12.853

你可以这样做。

```
echo strlen(file_get_contents("http://www.books.tahasoft.com/216.ppt")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T17:14:33.810

您可以做的最好的事情是对文件执行 HTTP [HEAD](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)请求，并检查`Content-Length`标头是否存在；唯一的另一种方法是*下载*整个文件，并检查它的长度——但在我看来这不是一个真正的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T05:13:08.963

要从 filesize() 函数获取文件的大小，您需要添加文件的文件夹路径以获取大小。

==> 错误方法：$filePath = " [http://www.books.tahasoft.com/216.ppt](http://www.books.tahasoft.com/216.ppt) ";

==> 正确方法：文件夹路径如：$filePath = '/home/www/uploadpath/filename';

因此，您可以通过调用以下函数来获得结果：

文件大小（$文件路径）；

或者

如果要从链接中获取大小，则必须这样做：

strlen(file_get_contents(" [http://www.books.tahasoft.com/216.ppt](http://www.books.tahasoft.com/216.ppt) "));

# asp.net-mvc-3 - e.preventDefault() 在 IE8 中不起作用

> ID：13033569
> 
> 赞同：1
> 
> 时间：2012-10-23T15:08:52.467
> 
> 标签：asp.net-mvc-3

我正在编写一段代码以防止 Telerik Grid 联系服务器以保存重复的数据。这是我到目前为止所拥有的。

看法

```
@(Html.Telerik().Grid<CategoryModel.CategoryUnitsModel>()
                    .Name("categoryunits-grid")
                    .DataKeys(keys =>
                    {
                        keys.Add(x => x.Id);
                        keys.Add(x => x.CategoryId);
                        keys.Add(x => x.UnitId);
                    })
                    .DataBinding(dataBinding =>
                    {
                        dataBinding.Ajax()
                            .Select("CategoryUnitsList", "Category", new { categoryId = Model.Id })
                            .Insert("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Update("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Delete("CategoryUnitsDelete", "Category", new { categoryId = Model.Id });
                    })
                    .Columns(columns =>
                    {
                        columns.Bound(x => x.UnitId)
                            .Visible(false);
                        columns.Bound(x => x.UnitText);
                        columns.Command(commands =>
                        {
                            commands.Edit();
                            commands.Delete();
                        })
                       .Width(100);
                    })
                    .ToolBar(commands => commands.Insert())
                    .Pageable(settings => settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))
                    .ClientEvents(events => events.OnRowDataBound("onRowDataBound"))
                    .ClientEvents(events => events.OnSave("onSave"))
                    .EnableCustomBinding(true))

<script type="text/javascript">
                    function onRowDataBound(e) {
                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button
                    }

                    function onSave(e) {
                        $.getJSON('@Url.Action("CheckForCategoryUnit", "Category")', { categoryId: $("#Id").val(), unitId: $("#UnitText").val() }, function (data) {
                            if (data) {
                                alert("Units may not be added twice for a category");
                                e.preventDefault();
                            }
                            else {

                            }
                        });
                    }
                </script> 
```

控制器

```
[HttpPost, GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryUnits = _categoryService.GetCategoryUnits(categoryId, command.Page - 1 , command.PageSize);
        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);

        var model = new GridModel<CategoryModel.CategoryUnitsModel>
        {
            Data = categoryUnitsModel,
            Total = categoryUnitsModel.Count
        };

        return new JsonResult
        {
            Data = model
        };
    }

    public ActionResult CheckForCategoryUnit(int categoryId, int unitId)
    {
        var categoryUnit = _categoryService.GetCategoryUnitByCategoryIdAndUnitId(categoryId, unitId);
        return Json(categoryUnit != null, JsonRequestBehavior.AllowGet);
    }

    [GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryUnit = new CategoryUnits
        {
            UnitId = Int32.Parse(model.UnitText),
            CategoryId = model.CategoryId
        };

        _categoryService.InsertCategoryUnit(categoryUnit);

        return CategoryUnitsList(command, model.CategoryId);
    } 
```

此时，我收到一条警报，提示我在我的 ajax 中点击。但是， e.preventDefault() 并没有阻止服务器继续前进并保存我的数据。关于这个问题，我尝试了几种不同的方法，包括：

返回 false，e.stop()，e.returnValue = false，e.stopPropagation()。

到目前为止还没有工作。如果有人有任何想法，我愿意接受。我拥有的操作系​​统和浏览器的组合是 Windows XP 和 IE8。只是添加以防万一。谢谢。

最诚挚的问候，查德·约翰逊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:48:30.973

感谢您到目前为止的回复。我也尝试过 e.returnValue ，但不幸的是，它像其他人一样失败了，Nathalie。

我实际上想出了一个类似于 IronMan84 的解决方案。

我没有使用 OnSave，而是等到在控制器上插入期间检查重复数据。这是我想出的：

控制器：

```
[GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var searchForEntry = _categoryService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));
        if (searchForEntry != null)
        {
            var scriptText = "alert('Units may not be added twice for a category');";
            return JavaScript(scriptText);
        }

        var categoryUnit = new CategoryUnits
        {
            UnitId = Int32.Parse(model.UnitText),
            CategoryId = model.CategoryId
        };

        _categoryService.InsertCategoryUnit(categoryUnit);

        return CategoryUnitsList(command, model.CategoryId);
    } 
```

我只是在重复数据的情况下返回了一个 JavaScript 操作。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:21:47.883

我也在我的应用程序中进行了类似的检查，但我以不同的方式处理它。我没有尝试在 AJAX 中保存时发出警告，而是在我的控制器中进行了操作。如果它发现任何重复项，它将在 ViewData 字典中设置一个值。然后，在我的主页上，我有一个警告框，将显示该值。

```
if(ViewData.ContainsKey("PopupMessage"))
    {
        var message = ViewData["PopupMessage"].ToString();
        <script type="text/javascript">
            window.alert('@message');
        </script>
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:22:07.810

IE 中的事件没有 preventDefault。

看看这个线程：[preventdefault Alternative for ie8](https://stackoverflow.com/questions/4422045/preventdefault-alternative-for-ie8)

对于 IE，您必须使用：`e.returnValue`

```
(e.preventDefault) ? e.preventDefault() : e.returnValue = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:49:55.553

好吧，伙计们，我想出了一个完全不同的解决方案。但是，我确实还有另一个问题想问。

首先，这就是我所做的。我没有捕捉到何时重复数据，而是从下拉列表中删除了该数据，这样该选项就不会发生。除此之外，我现在动态加载下拉列表，从而保持数据新鲜并避免重复。

看法

```
var gridPageSize = EngineContext.Current.Resolve<Nop.Core.Domain.Common.AdminAreaSettings>().GridPageSize;
    <table class="adminContent">
        <tr>
            <td>
                @(Html.Telerik().Grid<CategoryModel.CategoryUnitsModel>()
                    .Name("categoryunits-grid")
                    .DataKeys(keys =>
                    {
                        keys.Add(x => x.Id);
                        keys.Add(x => x.CategoryId);
                        keys.Add(x => x.UnitId);
                    })
                    .DataBinding(dataBinding =>
                    {
                        dataBinding.Ajax()
                            .Select("CategoryUnitsList", "Category", new { categoryId = Model.Id })
                            .Insert("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Update("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Delete("CategoryUnitsDelete", "Category", new { categoryId = Model.Id });
                    })
                    .Columns(columns =>
                    {
                        columns.Bound(x => x.UnitId)
                            .Visible(false);
                        columns.Bound(x => x.UnitText);
                        columns.Command(commands =>
                        {
                            commands.Edit();
                            commands.Delete();
                        })
                        .Width(100);
                    })
                    .ToolBar(commands => commands.Insert())
                    .Pageable(settings => settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))
                    .ClientEvents(events => events.OnRowDataBound("onRowDataBound"))
                    .ClientEvents(events => events.OnEdit("onEdit"))
                    .EnableCustomBinding(true))

                <script type="text/javascript">
                    function onRowDataBound(e) {
                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button
                    }

                    function onEdit(e) {
                        $.getJSON('@Url.Action("LoadAvailableUnits", "Category")', { categoryId: $("#Id").val() }, function (data) {
                            var ddl = $("#UnitText").data("tDropDownList");
                            if (data.length > 0) {
                                ddl.dataBind(data);
                                ddl.reload();
                            }
                            else {
                                $('a[class="t-button t-grid-cancel"]').click();
                                alert("There are no Units left to select from");
                            }
                        });
                    }
                </script> 
```

EditorTemplates/CategoryUnit.cshtml

```
@using Telerik.Web.Mvc.UI;
@Html.Telerik().DropDownList().Name("UnitText") 
```

我的模型是一样的。

控制器

```
[HttpPost, GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryUnits = _unitsService.GetCategoryUnits(categoryId, command.Page - 1, command.PageSize);
        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);

        var model = new GridModel<CategoryModel.CategoryUnitsModel>
        {
            Data = categoryUnitsModel,
            Total = categoryUnitsModel.Count
        };

        return new JsonResult
        {
            Data = model
        };
    }

    public JsonResult LoadAvailableUnits(int categoryId)
    {
        var categoryUnits = _unitsService.GetAvailableUnits(categoryId);
        var categoryUnitsModel = PrepareAvailableUnitsInModel(categoryUnits);
        var returnData = new SelectList(categoryUnitsModel, "UnitId", "UnitText");
        return Json(returnData, JsonRequestBehavior.AllowGet);
    }

    [GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var searchForEntry = _unitsService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));
        if (searchForEntry != null)
        {
            return CategoryUnitsList(command, model.CategoryId);
        }

        var categoryUnit = new CategoryUnits
        {
            UnitId = Int32.Parse(model.UnitText),
            CategoryId = model.CategoryId
        };

        _unitsService.InsertCategoryUnit(categoryUnit);

        return CategoryUnitsList(command, model.CategoryId);
    }

    [GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsDelete(GridCommand command, CategoryModel.CategoryUnitsModel model, int id)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryId = model.CategoryId;
        _unitsService.DeleteCategoryUnit(model.CategoryId, id);

        return CategoryUnitsList(command, categoryId);
    } 
```

我的新问题是分页不起作用。我不确定为什么它没有，因为我并没有真正搞砸它。我怀疑这与我加载网格的方式有关。任何帮助，将不胜感激。

# jquery - html中的javascript不起作用

> ID：13033570
> 
> 赞同：0
> 
> 时间：2012-10-23T15:08:55.723
> 
> 标签：jquery, html

我有一个链接到 jquery 页面的 html 页面，但无法正常工作。我正在使用 jquery 来查找单元格值低于 3000 的单元格，然后应该填充单元格，目前它不起作用。

这是html代码

```
 $(document).ready(function () {
    rr();
})</script>
</head>
<body>
<table class="colorMe">
<tr><td>2000</td><td>3500</td></tr>
<tr><td>3000</td><td>2500</td></tr>
<tr><td>4000</td><td>4500</td></tr>
</table>​
</body>
</html>

and here is the jquery code which is on a seperate page
// JavaScript Document
$("#d td").each(function rr() {
  var thisCell = $(this);
  var cellValue = parseInt(thisCell.text());

  if (!isNaN(cellValue) && (cellValue <=3000)) {
     thisCell.css("background-color","#FF0000");
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:22:21.280

You seem to be selecting an ID (#d) in your javascript that doesn't exist in your HTML. You also have not linked the jQuery library to your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:12:04.710

您需要将 jQuery 库添加到您的代码中：

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="yourcode.js type='text/javascript></script>
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:14:55.427

正确的用法是：

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="yourcode.js" type="text/javascript"></script>
<script type="text/javascript">
   $(document).ready(function () {
       rr();
   });
</script>
</head> 
```

并在`yourcode.js`您的javascript代码文件中。试试这个，如果你有其他问题再回来；）

^(当然，您可以直接链接到 googleapis，而不是直接链接到 jquery 的本地副本...)

# sql - 如何处理 R 连接字符串中的数据库密码？

> ID：13033573
> 
> 赞同：15
> 
> 时间：2012-10-23T15:09:00.347
> 
> 标签：sql, r, passwords, rstudio-server

虽然我不知道 SO quorum 是什么，但问题本身很简单：当您从 R 连接到数据库时，你们如何处理 db 连接字符串中的密码？

教程经常展示这样的例子。

```
con <- dbConnect(MySQL(), user="root", password="test", 
             dbname="research_db", host="localhost",
             client.flag=CLIENT_MULTI_STATEMENTS) 
```

如果数据库确实是您的实验性本地主机，这可能有点现实。但是，如果您将它与服务器上的多个用户一起使用，您可能不想像这样公开数据库凭据。特别是在将 RStudio Server 与 SQL 数据库结合使用时，您可能想要做一些加密的事情。你的经验是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T15:49:57.113

下面是一段示例代码，它使用 tcltk 包提示输入密码，同时隐藏实际值：

```
library(tcltk)
tt <- tktoplevel()
pass <- tclVar()
tkpack(tklabel(tt,text='Password:'))
tkpack(tkentry(tt,textvariable=pass,show='*'))
tkpack(tkbutton(tt,text="Done",command=function()tkdestroy(tt)))
tkwait.window(tt)
tclvalue(pass) 
```

在这种情况下，它只是在最后打印出未隐藏的密码，但您可以将其包装在一个函数中以返回该值，然后将其用作密码参数的值。或者你可以把这个和连接调用（以 tclvalue 行作为密码）放在一个调用中，`local`以便包含密码的变量在使用后立即消失。

**编辑**

对于 RStudio 和 RStudio 服务器，有一个功能`.rs.askForPassword`。像这样使用它：

```
psswd <- .rs.askForPassword("Database Password:")
con <- dbConnect(MySQL(), user="root", password=psswd, 
             dbname="research_db", host="localhost",
             client.flag=CLIENT_MULTI_STATEMENTS) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-31T21:17:54.917

所以我喜欢使用配置文件的解决方案——这是一个很好的答案。关于密码提示答案也有一些很好的评论，导致我找到了这个解决方案：

```
conn <- dbConnect(drv, "jdbc:sqlserver://host:port", 'username', password=.rs.askForPassword("Enter password:")) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T22:00:11.420

对于同一个问题，我有不同的解决方案，它不需要用户在每次连接时都输入密码。我正在使用 .my.cnf 文件功能。基本上每个用户在他们的 RStudio 服务器主目录的根目录中都有一个 .my.cnf 文件，其中包含他们对所有 MySQL 数据库的密码，所以在 R 脚本中我只是通过“组”功能引用数据库。

R脚本：

```
library("RMySQL")
m <- dbDriver("MySQL")
# connect using .my.cnf
con <- dbConnect(m, group = "theDatabase") 
```

.my.cnf 文件：

```
[client]
user = userName
host = mysql.server.com
password = MyPassword
[theDatabase]
database = hr
[theDatabase2]
user = opto
database = opto
password = pure-light
host = merced 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-12T07:01:20.690

使用 Keyring 包，您可以通过以下方式实现您的功能。

```
require(keyring)
require(RMySQL)
keyring::keyring_create("set_keyring_password_here") #Remember this password
keyring::key_set("dbname", keyring = "Your_set_keyring_password_here") 
keyring::key_set("host", keyring = "Your_set_keyring_password_here")
keyring::key_set("port", keyring = "Your_set_keyring_password_here")
keyring::key_set("user", keyring = "Your_set_keyring_password_here")
keyring::key_set("pass", keyring = "Your_set_keyring_password_here")
keyring::key_set("unix.sock", keyring = "Your_set_keyring_password_here")

m<-MySQL() #set the driver to mysql check your database driver and edit
summary(m)
    con<-dbConnect(m, dbname = keyring::key_get("dbname",
                      keyring = "Your_set_keyring_password_here"),
                   host=keyring::key_get("host",
                      keyring = "Your_set_keyring_password_here"),
                   port=as.numeric(keyring::key_get("port",
                      keyring = "Your_set_keyring_password_here")),
                   user=keyring::key_get("user",
                      keyring = "Your_set_keyring_password_here"),
                   pass=keyring::key_get("pass",
                      keyring = "Your_set_keyring_password_here"),
                   unix.sock=keyring::key_get("unix.sock",
                      keyring = "Your_set_keyring_password_here"),
                     )
keyring::keyring_lock("Your_set_keyring_password_here") #Lock keyring after using it. 
```

# iphone - 如何在 wcf rest 服务中从 iPhone 客户端提取 post 参数？

> ID：13033574
> 
> 赞同：1
> 
> 时间：2012-10-23T15:09:03.890
> 
> 标签：iphone, json, wcf, rest, http-post

我有一个使用 wcf RESTful 服务的 iPhone 应用程序。`GET`如果我使用方法，一切正常。但是当我在 web 服务 URL 中使用 post 方法和传递参数时，`NSURL`是 nil，因为我在 post 参数中有一些特殊字符。所以我曾经`stringByAddingPercentEscapesUsingEncoding`构造过url。但是现在在服务器端 url 无法识别，并且无法映射到 Web 服务模板中的正确方法。

1.  有什么解决办法吗？
2.  如果我将 post 参数作为 HTTPBody 而不是`NSURL`本身传递，那么如何在 ASP.net 的服务器端处理它。（注意它是 wcf 宁静的网络服务）。
3.  有没有其他使用方法`stringByAddingPercentEscapesUsingEncoding`

# javascript - 从存储在变量中的元素中选择具有类的子元素

> ID：13033575
> 
> 赞同：2
> 
> 时间：2012-10-23T15:09:04.763
> 
> 标签：javascript, jquery, jquery-selectors

HTML：

```
<div class="view">
    <span class="number">40000</span>
    <br/>
    <span class="number">50000</span>
    <br/>
    <span class="number">240000</span>
    <br/>
</div>
<div class="view">
    <span class="number">60000</span>
    <br/>
    <span class="number">70000</span>
    <br/>
    <span class="number">350000</span>
    <br/>
</div> 
```

JavaScript：

```
$(".view").each(function(i,foo){
    $($(foo).html()).filter('.number').each(function(index,Element){
    } 
```

如何优雅地仅选择foo 变量`.number`中的选定元素的子元素？`.view`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:11:27.227

```
$('.view').find('.number') 
```

是你要找的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:15:14.487

你可以试试这个

```
$('.view > .number'); 
```

或者

```
$('.view').find('.number'); 
```

或者

```
$('.number' , '.view'); 
```

# c# - 在字符串中间插入变量值

> ID：13033581
> 
> 赞同：55
> 
> 时间：2012-10-23T15:09:25.413
> 
> 标签：c#, string

在 C# 中：如果我想创建这样的消息：“嗨，我们为您准备了以下航班：**航班 A、B、C、D。**您想要哪一个”

其中只有粗体部分是动态的，我在运行时传递它的值，但它的左右部分是固定的。我可以创建类似 LeftMessage + 这些变量 + RightMessage 来创建它。但是我想知道是否有一种方法可以一次完成所有操作而无需创建两个单独的左右消息？

出于翻译目的，我将这些左右消息放在字符串资源中，所以现在我有两个单独的字符串资源。有没有办法一次完成所有事情？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2015-09-10T22:50:00.947

现在（C# 6）有一种更简洁的方法：字符串插值。

从[另一个问题的答案](https://stackoverflow.com/a/31654174/316760)：

> 在 C# 6 中，您可以使用[字符串插值](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)：
> 
> ```
> string name = "John";
> string result = $"Hello {name}"; 
> ```
> 
> Visual Studio 中的语法突出显示使其具有高度可读性，并且所有标记都经过检查。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-10-23T15:12:38.890

您可以使用`string.Format`：

```
string template = "Hi We have these flights for you: {0}. Which one do you want";
string data = "A, B, C, D";
string message = string.Format(template, data); 
```

您应该`template`从您的资源文件加载并且`data`是您的运行时值。

但是，如果您要翻译成多种语言，请小心：在某些情况下，您需要`{0}`不同语言的不同标记 (the )。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-10-23T15:12:05.427

使用[字符串格式](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)

C# 6.0 之前

```
string data = "FlightA, B,C,D";
var str = String.Format("Hi We have these flights for you: {0}. Which one do you want?", data); 
```

C# 6.0 --[字符串插值](http://www.informit.com/articles/article.aspx?p=2422807)

```
string data = "FlightA, B,C,D";
var str = $"Hi We have these flights for you: {data}. Which one do you want?"; 
```

[http://www.informit.com/articles/article.aspx?p=2422807](http://www.informit.com/articles/article.aspx?p=2422807)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-23T15:11:15.800

```
String.Format("Hi We have these flights for you: {0}. Which one do you want",
                              flights); 
```

编辑：您甚至可以单独保存“模板”字符串（例如，您可以将其存储在配置文件中并从那里检索），如下所示：

```
string flights = "Flight A, B,C,D";

string template = @"Hi We have these flights for you: {0}. Which one do you want";
Console.WriteLine(String.Format(template, flights)); 
```

EDIT2：哎呀，抱歉，我看到@DanPuzey 已经提出了与我的 EDIT 非常相似的建议（但更好一些）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-23T15:11:03.840

1 你可以使用 `string.Replace`方法

```
var sample = "testtesttesttest#replace#testtesttest";
var result = sample.Replace("#replace#", yourValue); 
```

2 你也可以使用`string.Format`

```
var result = string.Format("your right part {0} Your left Part", yourValue); 
```

3 您可以使用正则表达式类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-15T17:06:41.907

我会使用 StringBuilder 类来进行字符串操作，因为它会更有效（可变）

```
string flights = "Flight A, B,C,D";
StringBuilder message = new StringBuilder();
message.Append("Hi We have these flights for you: ");
message.Append(flights);
message.Append(" . Which one do you want?"); 
```

# ios - 如何设置“无效”公开？

> ID：13033583
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:09:28.663
> 
> 标签：ios, xcode

例如，我有这种方法：

```
-(void)customSum {
NSLog(@"show something");
} 
```

在 HomeView.m 中，我想在所有其他文件中调用该方法，例如在 ArticleView.m 中。我可以做类似的事情：

```
[HomeView customSum]; 
```

或类似的东西？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:39:44.623

这听起来不像是试图继承任何东西（这就是人们提到继承的原因）。如果是，请查看其他答案。

执行此操作的 obj-c 方法如下：您希望 HomeView.h 为 HomeView 类声明一个接口，并让该方法是类方法或实例方法。像这样：

```
 @interface HomeView : UIView
    - (void)anInstanceMethod;
    + (void)aClassMethod;
    @end 
```

我假设因为这些是您从 UIView 派生的“视图”。然后你会让 HomeView.m 实现该方法：

```
 @implementation HomeView
    - (void)anInstanceMethod
    {
        // Do Something
    }
    + (void)aClassMethod
    {
        // Do Something else
    }
    @end 
```

然后，在 ArtclViewe.m 中（您在 ArticleView.h 中声明了类 ArticleView 的实现（这是执行此操作的标准方法，尽管您可以将接口放入 .m 文件中，但您不希望'不要包含 .m 文件，因此该类在文件外不可见）。

```
 #include "HomeView.h"

    ...
        [HomeView aClassMethod]; // Call the class method on the class
        HomeView *homeView = [HomeView new];
        [homeView anInstanceMethod]; // Call the instance method on an instance
    ... 
```

如果这对您来说是全新的，您可能应该得到一本关于 Objective-C 和 iOS 开发的书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:12:19.847

也许您应该阅读[有关 Inheritance](http://www.techotopia.com/index.php/Objective-C_Inheritance)的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:43:02.443

您首先必须创建一个实例`HomeView`，如下所示：

```
HomeView *view = [[HomeView alloc]init]; 
```

然后，您可以从任何您喜欢的地方调用此方法，如下所示：

```
[view customSum]; 
```

如果您想调用此方法而无需创建 的实例，您可以通过将 更改为 a`HomeView`使其成为类方法而不是实例方法，如下所示：`-``+`

```
+(void)customSum {
    NSLog(@"show something");
} 
```

现在，您可以从任何地方调用它，如下所示：

```
[HomeView customSum]; 
```

但是，请确保您已在`HomeView.h`文件中声明了此方法，并且已将该头文件导入到要从中调用此方法的文件中，如下所示：

```
#import "HomeView.h" 
```

有关 Objective-C 编程语言的更多信息，我建议您阅读[Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html "苹果文档")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:14:44.590

假设`ArticleView`派生自`HomeView`，您可以简单地`[self customSum]`从内部调用`ArticleView`。

在`ArticleView`中，您还可以覆盖if 需要的实现`HomeView`。`-customSum`

# selenium - 将 selenium 测试用例组合到 JUnit 测试套件中时的不确定行为

> ID：13033586
> 
> 赞同：0
> 
> 时间：2012-10-23T15:09:46.913
> 
> 标签：selenium, webdriver, junit4, test-suite

我有一个场景，我有 29 个测试用例。所有测试用例在独立运行时都会弹出新的firefox窗口并运行完成。但是，当我将测试用例（全部 29 个）组合到一个测试套件中时，我会收到“无法定位元素”的随机错误。如果我多次运行测试套件，我可以看到不同的测试用例在不同的地方随机失败。注意 - 在单击它们之前，我正在等待每个元素的可见性大约 100 秒。代码看起来像 -

```
 WebElement myDynamicElement = (new WebDriverWait(driver, 100))
    .until(new ExpectedCondition<WebElement>() {
    @Override
    public WebElement apply(WebDriver driver) {
    return driver.findElement(element);
    } 
```

有人可以建议吗？是否推荐使用较小的测试套件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:23:56.133

到目前为止还没有遇到类似的问题类型。恕我直言，尝试使用更强大的等待机制`fluentWait`：

```
public WebElement fluentWait(final By locator){
            Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                    .withTimeout(30, TimeUnit.SECONDS)
                    .pollingEvery(5, TimeUnit.SECONDS)
                    .ignoring(org.openqa.selenium.NoSuchElementException.class);
            WebElement foo = wait.until(
                    new Function<WebDriver, WebElement>() {
                        public WebElement apply(WebDriver driver) {
                            return driver.findElement(locator);
                        }
                    }
            );
            return  foo;              }     ; 
```

这是有关流利等待的[文档](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

用法如下：

```
String cssSelectorElement ="blablablab";
String xPathElement = "balblabla";

fluentWait(By.cssSelector(cssSelectorElement)).click()
//fluentWait(By.cssSelector(cssSelectorElement)).getText();

fluentWait(By.xpath(xPathElement)).click()
//fluentWait(By.xpath(xPathElement)).getText(); 
```

不要忘记在您工作的 IDE（IDEA、Eclipse、NetBeans）中逐步调试。

# iframe - 当内容变小时如何调整 iframe 的大小？

> ID：13033587
> 
> 赞同：2
> 
> 时间：2012-10-23T15:09:48.650
> 
> 标签：iframe, resize

我在谷歌上搜索了一段时间，发现了一些关于 iframe 调整大小的类似主题，
实际上我从中学到了很多，例如
1.[使用 Jquery 将 iframe 调整为内容](https://stackoverflow.com/questions/12872394/resize-iframe-to-content-with-jquery)
2.[将动态内容添加](http://thomas.bindzus.me/2007/12/24/adding-dynamic-contents-to-iframes/)
到 iframe 感谢那些做出贡献的人回答这些问题。
但是我仍然有一些问题没有解决，
所以你们知道当内容变小时如何调整 iframe 的大小吗？
就我而言，我试图使用
document.documentElement.scrollHeight 或 document.body.scrollHeight 来获取内容高度，但它不起作用。
我想很难从外面得到正确的内容高度，如果我们需要一个高度
要传递给resize函数的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T21:19:22.600

您需要使用 document.body.offsetHeight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T09:21:20.190

在不同的站点和浏览器上进行 Whit 测试，我终于在这段代码的高度上得到了最好的结果：

```
var height = document.documentElement.offsetHeight;
if(document.all) height = Number(document.body.clientHeight) + Number(document.body.bottomMargin) + Number(document.body.topMargin); // IE v <= 10 
```

# c - 使用 gdb 通过共享库进入 3rd 方函数

> ID：13033589
> 
> 赞同：8
> 
> 时间：2012-10-23T15:09:53.483
> 
> 标签：c, gdb, shared-libraries, step-into

我正在使用 gdb 和一些共享库。我可以让 gdb 进入我自己的共享库，但不能进入第 3 方。

使用 gdb 时，我希望“s”（步骤）进入 3rd 方库并向我显示它在这些 opj_* 函数中执行的行，而不是只进入我自己的共享库代码中的下一行。

我很确定我只是在编译过程中遗漏了一些东西，与链接有关（让 gcc 将一些调试标志传递给 ld），但我不知道它是什么，或者在运行 gdb 时告诉它在哪里调试符号是。

**以下是详细信息：**

我安装了 openjpeg 库、调试信息和开发包。

```
# zypper search -si openjpeg
Loading repository data...
Reading installed packages...

S | Name                     | Type    | Version   | Arch   | Repository
--+--------------------------+---------+-----------+--------+-----------
i | libopenjpeg2_0           | package | 2.0.0-1.4 | x86_64 | packman   
i | libopenjpeg2_0-debuginfo | package | 2.0.0-1.4 | x86_64 | packman   
i | openjpeg2-devel          | package | 2.0.0-1.4 | x86_64 | packman   

# rpm -ql libopenjpeg2_0
/usr/lib64/libopenjpeg.so.2.0
/usr/lib64/libopenjpeg.so.2.0.0

# rpm -ql openjpeg2-devel
/usr/include/openjpeg-2.0
/usr/include/openjpeg-2.0/openjpeg.h
/usr/lib64/libopenjpeg.so
/usr/lib64/openjpeg-2.0
/usr/lib64/openjpeg-2.0/OpenJPEGConfig.cmake
/usr/lib64/openjpeg-2.0/OpenJPEGTargets-release.cmake
/usr/lib64/openjpeg-2.0/OpenJPEGTargets.cmake

# rpm -ql libopenjpeg2_0-debuginfo
/usr/lib/debug
/usr/lib/debug/.build-id
/usr/lib/debug/.build-id/85/f8603c75aadee0bd66653332d7ce16d0292752
/usr/lib/debug/.build-id/85/f8603c75aadee0bd66653332d7ce16d0292752.debug
/usr/lib/debug/usr/lib64/libopenjpeg.so.2.0.0.debug 
```

我有一个链接到 libopenjpeg 的共享库 libjna_openjpeg。

我有一个链接到 libopenjpeg 和 libjna_openjpeg 的测试程序“pathtest”

我用“gcc -g ...”编译了每个，还尝试了“gcc -ggdb ...”

```
gcc -ggdb -c -fpic -I/usr/include/openjpeg-2.0 jna_openjpeg.c -lopenjpeg
gcc -ggdb -shared -o libjna_openjpeg.so jna_openjpeg.o -lopenjpeg
gcc -ggdb -I/usr/include/openjpeg-2.0 -L. -o pathtest pathtest.c -ljna_openjpeg -lopenjpeg 
```

我的共享库代码片段，其中删除了一些注释：

```
opj_stream_t* p_stream = opj_stream_create_default_file_stream( p_file, p_is_read_stream );

opj_codec_t *p_decompressor = opj_create_decompress(CODEC_J2K);

// my bug I want to debug is here... this always returns 0
p_image =  opj_decode( p_decompressor, p_stream ); 
```

运行 gdb

```
$ gdp pathtest

...

(gdb) s
52          opj_codec_t *p_decompressor = opj_create_decompress(CODEC_J2K);
(gdb) s
59          p_image =  opj_decode( p_decompressor, p_stream );
(gdb) s 
```

gdb 版本

```
# gdb --version
GNU gdb (GDB) SUSE (7.3-41.1.2)
... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-29T07:00:24.887

您可以尝试启用步进模式吗？

```
(gdb) set step-mode on 
```

这会导致 step 命令在不包含调试行信息的函数的第一条指令处停止（通常是 libc 之类的第 3 方），而不是跳过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:31:55.683

你没有给你的 gdb 版本。显然这可能是 gdb 中的一个错误，因为我在 7.0.1 中遇到了同样的问题，但升级到 7.3.50 修复了它。

# c++ - 反转LinkedList c ++

> ID：13033592
> 
> 赞同：2
> 
> 时间：2012-10-23T15:10:00.357
> 
> 标签：c++, linked-list, reversing

> **可能重复：**
> [无法反转链表](https://stackoverflow.com/questions/11521452/unable-to-reverse-a-linked-list)

我正在尝试反转链接列表：

```
void LinkedList::reverseList()
{
    Node *next=_head;
    Node *prev=0;
    while(next!=0)
    {
        Node *tmp=next->_next;
        next->_next=prev;
        prev=next;
        next=tmp;
    }
} 
```

假设列表是：4->3->2->1

当我打印列表时，我只看到 1（打印功能很好）。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:56:07.950

既然你说你想自己找到问题，我只是给你一个提示而不是解决方案。

您的`reverse`函数的工作原理是它成功地反转了列表。那不是问题。您可能有 2 次调用`print`. 一个前一个后一个反向。关于这两种情况下传递给的节点，您有什么注意事项`print`？这告诉你什么？

编辑：

既然你说你已经找到了问题，我会发布实际的解决方案。

在您的`reverse`代码中，您永远不会更新`_head`列表的 ，但是当您`reverse`列出列表时，头部实际上确实从`4`变为`1`。由于您从不更新`_head`，因此当您`print`第二次调用时（在`reverse`调用之后），您开始打印`1`，这是列表的末尾，这是唯一打印的节点。

`_head`解决方案是在您反转列表时进行更新。最简单的方法是在每次迭代中简单地更新它。这可能比其他可能的解决方案效率略低，但它不会改变算法的时间复杂度——它仍然是 O(n)：

```
void LinkedList::reverseList()
{
    Node *next=_head;
    Node *prev=0;
    while(next!=0)
    {
        Node *tmp=next->_next;
        next->_next=prev;
        _head = next;
        prev=next;
        next=tmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:25:52.587

尝试这样的事情。

**双向链表：**

```
for (Node * n = _head, * next; ; n = next)
{
    next = n->next;

    std::swap(n->next, n->prev);

    if (next == NULL) { _head = n; break; }
} 
```

**单链表：**

```
for (Node * n = _head, * prev = NULL, * next; ; prev = n, n = next)
{
    next = n->next;

    n->next = prev;

    if (next == NULL) { _head = n; break; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:35:29.170

我喜欢递归；更容易掌握和验证；

```
Node* LinkedList::reverseList() { // returns tail
  if (!_head || !_head->_next)
      return _head;
  Node* const h = _head;
  _head = _head->_next;
  h->_next = NULL;
  return reverseList()->_next = h;
} 
```

# c++ - 简单的 OpenGL C++ 代码的 Xcode 4.5 问题

> ID：13033596
> 
> 赞同：0
> 
> 时间：2012-10-23T15:10:03.527
> 
> 标签：c++, xcode, opengl

我在 Xcode 中有一个简单的 OpenGL 项目。

Xcode 升级到 4.5 后开始出现奇怪的行为

在下一行

```
#include <fstream.h> 
```

编译失败并显示以下错误消息：未找到词法或预处理器问题“fstream.h”文件。

用于在 Xcode 4.2 中成功编译的相同代码

将行更改为

```
#include <c++/4.2.1/backward/fstream.h> 
```

修复了问题，但会产生其他几个编译错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:25:05.583

fstream.h 不是 C++ 头文件。当您使用较长的路径名时，您正在访问一个不同的、不兼容的标准库实现（名为 libstdc++），该实现具有一个名为 fstream.h 的兼容性头文件（用于与预标准 C++ 兼容；C++ 在 14 年前就已标准化）。

fstream.h 与 Xcode 4.2 一起使用，因为该版本的 Xcode 默认使用 libstdc++，但 Xcode 4.5 已改为默认使用 libc++。

解决方案是使用标准 C++ 并包含`<fstream>`.

或者，我不建议这样做，您可以切换您在项目设置中使用的标准库实现。

# java - Java - 文本字段上的占位符

> ID：13033600
> 
> 赞同：16
> 
> 时间：2012-10-23T15:10:08.283
> 
> 标签：java, swing, textfield, placeholder

我正在尝试使用 Swing 创建一个 GUI。我的问题是，我有一个文本字段，但我希望它有一个“占位符”（如在 html 中）。我在这里和那里读到它可以通过覆盖文本字段的paint（）来完成。

由于生成了我的代码，我发现我需要使用“自定义创建代码”来覆盖生成的代码。

这是我在“自定义创建代码”字段中输入的内容

```
new javax.swing.JTextField()
{
    String test = super.getText();
    String hint = "Username";

    public void paint(Graphics g)
    {
        if ( test == null || test.length() < 1 ) {
            g.setColor( Color.red );
            g.drawString(hint, 0, 0);
        }

        g.setColor(Color.BLACK);
        super.paint(g);
    }
} 
```

这会生成以下输出

```
javax.swing.JTextField username = new javax.swing.JTextField()
{
    String test = super.getText();
    String hint = "Username";

    public void paint(Graphics g)
    {
        if ( test == null || test.length() < 1 ) {
            g.setColor( Color.red );
            g.drawString(hint, 0, 0);
        }

        g.setColor(Color.BLACK);
        super.paint(g);
    }
}; 
```

现在我看到了 textField 但里面什么都没有，也许我需要在某个事件上添加一些功能，但我不确定。

如果有人能伸出援手，我将不胜感激。

编辑：这是我想做的演示：http: [//davidwalsh.name/demo/html5-placeholder.php](http://davidwalsh.name/demo/html5-placeholder.php)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T18:22:25.570

我用来覆盖文本字段的绘制方法，直到我最终得到更多的自定义文本字段，然后我才真正想要......

然后我发现[这个提示 API](http://code.google.com/p/xswingx/)使用简单，不需要你扩展任何组件。它还有一个不错的“伙伴”API

这现在已包含在 SwingLabs、[SwingX 库](https://java.net/downloads/swingx/releases/)中，这使得它更易于使用......

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T15:17:49.487

我在甲骨文论坛上找到了这个。

```
public class TextFieldWithPrompt extends JTextField{

@Override
protected void paintComponent(java.awt.Graphics g) {
    super.paintComponent(g);

    if(getText().isEmpty() && ! (FocusManager.getCurrentKeyboardFocusManager().getFocusOwner() == this)){
        Graphics2D g2 = (Graphics2D)g.create();
        g2.setBackground(Color.gray);
        g2.setFont(getFont().deriveFont(Font.ITALIC));
        g2.drawString("zip", 5, 10); //figure out x, y from font's FontMetrics and size of component.
        g2.dispose();
    }
  } 
```

[https://forums.oracle.com/forums/thread.jspa?threadID=1349874](https://forums.oracle.com/forums/thread.jspa?threadID=1349874)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-29T15:54:51.357

试试这个。

```
private void txtUserNameFocusGained(java.awt.event.FocusEvent evt) {                                        
    String username = txtUserName.getText();
    if(username.equals("User Name")){
        txtUserName.setCaretPosition(0);
    }

}                                       

private void txtUserNameFocusLost(java.awt.event.FocusEvent evt) {                                      
    String username = txtUserName.getText();
    if(username.equals("")){
        txtUserName.setForeground(new java.awt.Color(86, 86, 86));
        txtUserName.setCaretPosition(0);
        txtUserName.setText("User Name");
    }
}                                     

private void txtUserNameKeyPressed(java.awt.event.KeyEvent evt) {                                       
    String username = txtUserName.getText();
    if(username.equals("User Name")){
        txtUserName.setForeground(new java.awt.Color(0, 0, 0));
        txtUserName.setText(null);
        txtUserName.setCaretPosition(0);
    }
} 
```

请注意，文本字段的名称是“txtUserName”。你可以看到这样的输出。

[![图片说明在这里](../Images/279c460acd6175443c202266fcb7a87c.png)](https://i.stack.imgur.com/xEjcY.png)

# android - android活动onResume和onPause被调用了很多次

> ID：13033602
> 
> 赞同：2
> 
> 时间：2012-10-23T15:10:18.177
> 
> 标签：android, events, android-activity

当手机在我的活动 onResume 和 onPause 方法被多次调用时进入深度睡眠模式时，我创建了一个应用程序。
我实现了以下活动方法：
`onSaveInstanceState`, `onRestoreInstanceState`, `onPause`, `onResume`, `onCreate`, onStart,`onRestart`和`onStop`方法`onDestroy`，我的活动配置是

```
 <activity
            android:name=".ScreenActivity"  
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:configChanges="keyboardHidden|orientation"  
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"                            
            >
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
  </activity> 
```

这是我的日志信息

```
2012_10_16   11:58:8:80 PM: ScreenActivity.onResume:  Activity interacting with user
2012_10_16   11:58:8:119 PM: ScreenActivity.onSaveInstanceState:  onSaveInstanceState method called
2012_10_16   11:58:8:119 PM: ScreenActivity.onPause:  current activity got paused
2012_10_16   11:58:8:380 PM: ScreenActivity.onResume:  Activity interacting with user
2012_10_16   11:58:8:409 PM: ScreenActivity.onSaveInstanceState:  onSaveInstanceState method called
2012_10_16   11:58:8:411 PM: ScreenActivity.onPause:  current activity got paused
2012_10_16   11:58:8:434 PM: ScreenActivity.onResume:  Activity interacting with user
2012_10_16   11:58:8:493 PM: ScreenActivity.onSaveInstanceState:  onSaveInstanceState method called
2012_10_16   11:58:8:497 PM: ScreenActivity.onPause:  current activity got paused
2012_10_16   11:58:10:885 PM: ScreenActivity.onResume:  Activity interacting with user
2012_10_16   11:58:10:914 PM: ScreenActivity.onSaveInstanceState:  onSaveInstanceState method called
2012_10_16   11:58:10:916 PM: ScreenActivity.onPause:  current activity got paused
2012_10_16   11:58:10:999 PM: ScreenActivity.onResume:  Activity interacting with user
2012_10_16   11:58:11:32 PM: ScreenActivity.onSaveInstanceState:  onSaveInstanceState method called 
```

请提供帮助

# c# - 将带有颜色名称的字符串转换为颜色“id”

> ID：13033606
> 
> 赞同：2
> 
> 时间：2012-10-23T15:10:28.880
> 
> 标签：c#, winforms, colors, gdi+

我有

```
public String colorid = "Blue"; 
```

和

```
 Sbrush = new SolidBrush(Color.Convert.ToInt32(colorid)); 
```

我希望能够在其他地方定义 colorid，这就是我这样编写 SolidBrush 代码的原因。现在这不起作用，如果有人可以帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:12:53.773

使用从名称创建颜色

```
Color.FromName("Blue") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:17:33.450

这种方式同时支持颜色名称和 html 颜色：

```
string nm = "Blue"; // or f.ex. "#0000ff"

if (nm.StartsWith("#")) {
    return ColorTranslator.FromHtml(nm);
}
else {
    return Color.FromName(nm);
} 
```

# c# - 将 XML (outerxml) 反序列化为 C# 对象

> ID：13033607
> 
> 赞同：0
> 
> 时间：2012-10-23T15:10:30.953
> 
> 标签：c#, xml-serialization, deserialization

这是我需要转换为 C# 对象的 XML

```
<SEARCH_CTX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
  <MATCHES>1</MATCHES> 
  <TBL>
     <Result>
         <ID>13373384</ID> 
         <A_ID>216190</A_ID> 
         <A_Name>Fujitsu Account 1</A_Name> 
         <A_No>10200318</A_No> 
     </Result>
     <Result>
         <ID>13373384</ID> 
         <A_ID>217129</A_ID> 
         <A_Name>Test account 3</A_Name> 
         <A_No>10200374</A_No> 
     </Result>
  </TBL>
</SEARCH_CTX> 
```

我在命令提示符下使用 XSD 自动生成了类。试图用闲置代码反序列化它以反对

```
 var reader = new StringReader(XMLString);
 var serializer = new XmlSerializer(OBJECT.GetType());
 var dA1 = (OBJECT)serializer.Deserialize(rd); 
```

它给了我错误
消息=无法生成临时类...无法将对象 [] 转换为对象

# r - 水晶球怎么画里面有两种颜色的颗粒

> ID：13033614
> 
> 赞同：58
> 
> 时间：2012-10-23T15:11:11.017
> 
> 标签：r, matlab, plot, computer-vision

我只是提出一个可能关闭的想法。我需要画一个水晶球，其中红色和蓝色粒子随机分布。我想我必须使用 Photoshop，甚至尝试在图像中制作球，但由于这是用于研究论文并且不必花哨，我想知道是否有任何方法可以使用 R、matlab 或任何其他语言。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-23T15:26:52.680

在 R 中，使用`rgl`包（R-to-OpenGL 接口）：

```
library(rgl)
n <- 100
set.seed(101)
randcoord <- function(n=100,r=1) {
    d <- data.frame(rho=runif(n)*r,phi=runif(n)*2*pi,psi=runif(n)*2*pi)
    with(d,data.frame(x=rho*sin(phi)*cos(psi),
                      y=rho*sin(phi)*sin(psi),
                      z=rho*cos(phi)))
}
    ## http://en.wikipedia.org/wiki/List_of_common_coordinate_transformations
with(randcoord(50,r=0.95),spheres3d(x,y,z,radius=0.02,col="red"))
with(randcoord(50,r=0.95),spheres3d(x,y,z,radius=0.02,col="blue"))
spheres3d(0,0,0,radius=1,col="white",alpha=0.5,shininess=128)
rgl.bg(col="black")
rgl.snapshot("crystalball.png") 
```

![在此处输入图像描述](../Images/b1f6e6baa12d6bf94153dcae2c58e991.png)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-04-26T04:46:12.523

这与 Ben Bolker 的回答非常相似，但我正在展示如何通过使用一些神秘的颜色为水晶球添加一点光环：

```
library(rgl)
lapply(seq(0.01, 1, by=0.01), function(x) rgl.spheres(0,0,0, rad=1.1*x, alpha=.01,
    col=colorRampPalette(c("orange","blue"))(100)[100*x]))
rgl.spheres(0,0,0, radius=1.11, col="red", alpha=.1)
rgl.spheres(0,0,0, radius=1.12, col="black", alpha=.1)
rgl.spheres(0,0,0, radius=1.13, col="white", alpha=.1)

xyz <- matrix(rnorm(3*100), ncol=3)
xyz <- xyz * runif(100)^(1/3) / sqrt(rowSums(xyz^2))

rgl.spheres(xyz[1:50,], rad=.02, col="blue")
rgl.spheres(xyz[51:100,], rad=.02, col="red")

rgl.bg(col="black")
rgl.viewpoint(zoom=.75)
rgl.snapshot("crystalball.png") 
```

![在此处输入图像描述](../Images/05bce8440e74367eea8d9df85c9dc969.png)![在此处输入图像描述](../Images/0205530ac2df848257f997f20a3b3173.png)

两者之间的唯一区别在于`lapply`通话。您可以看到，仅通过更改颜色`colorRampPalette`就可以显着改变水晶球的外观。左边的使用`lapply`上面的代码，右边的使用这个代码：

```
lapply(seq(0.01, 1, by=0.01), function(x) rgl.spheres(0,0,0,rad=1.1*x, alpha=.01,
     col=colorRampPalette(c("orange","yellow"))(100)[100*x]))
...code from above 
```

这是一种不同的方法，您可以在其中定义自己的纹理文件并使用它为水晶球着色：

```
# create a texture file, get as creative as you want:
png("texture.png")
x <- seq(1,870)
y <- seq(1,610)
z <- matrix(rnorm(870*610), nrow=870)
z <- t(apply(z,1,cumsum))/100

# Swirly texture options:
# Use the Simon O'Hanlon's roll function from this answer:
# http://stackoverflow.com/questions/18791212/equivalent-to-numpy-roll-in-r/18791252#18791252
# roll <- function( x , n ){
#   if( n == 0 )
#     return( x )
#   c( tail(x,n) , head(x,-n) )
# }

# One option
# z <- mapply(function(x,y) roll(z[,x], y), x = 1:ncol(z), y=1:ncol(z))
#
# Another option
# z <- mapply(function(x,y) roll(z[,x], y), x = 1:ncol(z), y=rep(c(1:50,51:2), 10))[1:870, 1:610]
#
# One more
# z <- mapply(function(x,y) roll(z[,x], y), x = 1:ncol(z), y=rep(seq(0, 100, by=10), each=5))[1:870, 1:610]

par(mar=c(0,0,0,0))
image(x, y, z, col = colorRampPalette(c("cyan","black"))(100), axes = FALSE)
dev.off()

xyz <- matrix(rnorm(3*100), ncol=3)
xyz <- xyz * runif(100)^(1/3) / sqrt(rowSums(xyz^2))

rgl.spheres(xyz[1:50,], rad=.02, col="blue")
rgl.spheres(xyz[51:100,], rad=.02, col="red")

rgl.spheres(0,0,0, rad=1.1, texture="texture.png", alpha=0.4, back="cull")
rgl.viewpoint(phi=90, zoom=.75) # change the view if need be
rgl.bg(color="black") 
```

![在此处输入图像描述](../Images/2622f6bc26777bbde9800fd9ea7bf155.png)![在此处输入图像描述](../Images/a356563a67d62cc3ca41668ddb54027b.png)！![在此处输入图像描述](../Images/f67a90134933595a86062f991c42ed2c.png)![在此处输入图像描述](../Images/afd82dbe10c9e6cc65e7b441eda3f08d.png)

左上角的第一张图片是你运行上面的代码得到的结果，其他三张是在注释掉的代码中使用不同选项的结果。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-04-25T09:32:10.947

因为问题是

> 我想知道是否有任何方法可以使用 R、matlab 或**任何其他语言**进行编程。

TeX 是图灵完备的，可以被认为是一种编程语言，我花了一些时间并使用 TikZ 在 LaTeX 中创建了一个示例。正如 OP 所写的那样，它是针对研究论文的，假设它也是用 LaTeX 编写的，它具有可以直接集成到论文中的优点。

所以，这里是：

```
\documentclass[tikz]{standalone}
\usetikzlibrary{positioning, backgrounds}
\usepackage{pgf}
\pgfmathsetseed{\number\pdfrandomseed}

\begin{document}
\begin{tikzpicture}[background rectangle/.style={fill=black},
                    show background rectangle,
                   ] 

    % Definitions
    \def\ballRadius{5}
    \def\pointRadius{0.1}
    \def\nRed{30}
    \def\nBlue{30}

    % Draw all red points
    \foreach \i in {1,...,\nRed}
    {
        % Get random coordinates
        \pgfmathparse{0.9*\ballRadius*rand}\let\mrho\pgfmathresult
        \pgfmathparse{360*rand}\let\mpsi\pgfmathresult
        \pgfmathparse{360*rand}\let\mphi\pgfmathresult

        % Convert to x/y/z
        \pgfmathparse{\mrho*sin(\mphi)*cos(\mpsi)}\let\mx\pgfmathresult
        \pgfmathparse{\mrho*sin(\mphi)*sin(\mpsi)}\let\my\pgfmathresult
        \pgfmathparse{\mrho*cos(\mphi)}\let\mz\pgfmathresult

        \fill[ball color=blue] (\mz,\mx,\my) circle (\pointRadius);
    }

    % Draw all blue points
    \foreach \i in {1,...,\nBlue}
    {
        % Get random coordinates
        \pgfmathparse{0.9*\ballRadius*rand}\let\mrho\pgfmathresult
        \pgfmathparse{360*rand}\let\mpsi\pgfmathresult
        \pgfmathparse{360*rand}\let\mphi\pgfmathresult

        % Convert to x/y/z
        \pgfmathparse{\mrho*sin(\mphi)*cos(\mpsi)}\let\mx\pgfmathresult
        \pgfmathparse{\mrho*sin(\mphi)*sin(\mpsi)}\let\my\pgfmathresult
        \pgfmathparse{\mrho*cos(\mphi)}\let\mz\pgfmathresult

        \fill[ball color=red] (\mz,\mx,\my) circle (\pointRadius);
    }

    % Draw ball
    \shade[ball color=blue!10!white,opacity=0.65] (0,0) circle (\ballRadius);

\end{tikzpicture}
\end{document} 
```

结果：

![领域](../Images/0c9b23d477c5c23116c41f334e3a6ecd.png)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-10-23T21:23:18.637

我只**需要**在 Matlab 中生成与 R 答案一样闪亮的东西 :) 所以，这是我的深夜、过于复杂、超慢的解决方案，但*我*的不是吗？:)

```
figure(1), clf, hold on
whitebg('k')    

light(...
    'Color','w',...
    'Position',[-3 -1 0],...
    'Style','infinite')

colormap cool
brighten(0.2)

[x,y,z] = sphere(50);
surf(x,y,z);

lighting phong
alpha(.2)
shading interp
grid off

blues = 2*rand(15,3)-1;
reds  = 2*rand(15,3)-1;
R     = linspace(0.001, 0.02, 20);

done = false;
while ~done

    indsB = sum(blues.^2,2)>1-0.02;    
    if any(indsB)
        done = false;
        blues(indsB,:) = 2*rand(sum(indsB),3)-1; 
    else
        done = true;
    end

    indsR = sum( reds.^2,2)>1-0.02;
    if any(indsR)
        done = false;
        reds(indsR,:) = 2*rand(sum(indsR),3)-1; 
    else
        done = done && true;
    end

end

nR = numel(R);
[x,y,z] = sphere(15);
for ii = 1:size(blues,1)
    for jj = 1:nR        
        surf(x*R(jj)-blues(ii,1), y*R(jj)-blues(ii,2), z*R(jj)-blues(ii,3), ...
            'edgecolor', 'none', ...
            'facecolor', [1-jj/nR 1-jj/nR 1],...
            'facealpha', exp(-(jj-1)/5));
    end
end

nR = numel(R);
[x,y,z] = sphere(15);
for ii = 1:size(reds,1)
    for jj = 1:nR        
        surf(x*R(jj)-reds(ii,1), y*R(jj)-reds(ii,2), z*R(jj)-reds(ii,3), ...
            'edgecolor', 'none', ...
            'facecolor', [1 1-jj/nR 1-jj/nR],...
            'facealpha', exp(-(jj-1)/5));
    end
end

set(findobj(gca,'type','surface'),...
    'FaceLighting','phong',...
    'SpecularStrength',1,...
    'DiffuseStrength',0.6,...
    'AmbientStrength',0.9,...
    'SpecularExponent',200,...
    'SpecularColorReflectance',0.4 ,...
    'BackFaceLighting','lit');

axis equal
view(30,60) 
```

![在此处输入图像描述](../Images/c9adb5a0812e91d48d2f3479b220fd01.png)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-04-28T10:53:20.893

我建议您看一下[光线追踪程序](http://en.wikipedia.org/wiki/Ray_tracing_%28graphics%29)，[例如](http://www.pbrt.org/scenes.php) [povray](http://hof.povray.org/)。我不太懂这门语言，但摆弄了一些例子，我设法不费吹灰之力就完成了。

![在此处输入图像描述](../Images/02417d5aaa0af12a31197f04ea10f5cd.png)

```
background { color rgb <1,1,1,1> }
#include "colors.inc"
#include "glass.inc" 

#declare R = 3;
#declare Rs = 0.05;
#declare Rd = R - Rs ;

camera {location <1, 10 ,1>
right <0, 4/3, 0>
 up    <0,0.1,1>
 look_at  <0.0 , 0.0 , 0.0>}

light_source { 
    z*10000
    White
    }

light_source{<15,25,-25> color  rgb <1,1,1> }

#declare T_05 = texture { pigment { color Clear } finish { F_Glass1 } } 

#declare Ball = sphere {
    <0,0,0>, R
      pigment { rgbf <0.75,0.8,1,0.9> } // A blue-tinted glass

    finish
  { phong 0.5 phong_size 40  // A highlight
    reflection 0.2  // Glass reflects a bit
  }
    interior{ior 1.5}
  }

#declare redsphere =    sphere {
    <0,0,0>, Rs
        pigment{color Red}
      texture { T_05 } interior { I_Glass4 fade_color Col_Red_01 }}

#declare bluesphere =   sphere {
    <0,0,0>, Rs
    pigment{color Blue}
      texture { T_05 } interior { I_Glass4 fade_color Col_Blue_01 }}

object{ Ball }

#declare Rnd_1 = seed (123);
 #for (Cntr, 0, 200)
#declare rr = Rd* rand( Rnd_1);
#declare theta = -pi/2 + pi * rand( Rnd_1);
#declare phi = -pi+2*pi* rand( Rnd_1);
#declare xx = rr * cos(theta) * cos(phi);
#declare yy = rr * cos(theta) * sin(phi);
#declare zz = rr * sin(theta) ;
object{ bluesphere  translate  <xx , yy , zz > }
#declare rr = Rd* rand( Rnd_1);
#declare theta = -pi/2 + pi * rand( Rnd_1);
#declare phi = -pi+2*pi* rand( Rnd_1);
#declare xx = rr * cos(theta) * cos(phi);
#declare yy = rr * cos(theta) * sin(phi);
#declare zz = rr * sin(theta) ;
object{ redsphere  translate  <xx , yy , zz > }
#end 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2012-10-23T20:29:36.313

游戏有点晚了，但这是一个实现[scatter3sph](http://www.mathworks.com/matlabcentral/fileexchange/27112-scatter3sph)的 Matlab 代码（来自 FEX）

```
figure('Color', [0.04 0.15 0.4]);
nos = 11; % number small of spheres
S= 3; %small spheres sizes
Grid_Size=256;
%Coordinates
X= Grid_Size*(0.5+rand(2*nos,1));
Y= Grid_Size*(0.5+rand(2*nos,1));
Z= Grid_Size*(0.5+rand(2*nos,1));
%Small spheres colors: (Red & Blue)
C= ones(nos,1)*[0 0 1];
C= [C;ones(nos,1)*[1 0 0]];
% Plot big Sphere
scatter3sph(Grid_Size,Grid_Size,Grid_Size,'size',220,'color',[0.9 0.9 0.9]); hold on
light('Position',[0 0 0],'Style','local');
alpha(0.45);
material shiny 
% Plot small spheres 
scatter3sph(X,Y,Z,'size',S,'color',C);  
axis equal; axis tight; grid off
view([108 -42]);
set(gca,'Visible','off')
set(gca,'color','none') 
```

![在此处输入图像描述](../Images/978bb124796539a429c44f69440e001d.png)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-04-28T07:24:01.443

Matlab 的另一种解决方案。

```
[x,y,z] = sphere(50);
[img] = imread('crystal.jpg');

figure('Color',[0 0 0]);
surf(x,y,z,img,'edgeColor','none','FaceAlpha',.6,'FaceColor','texturemap')
hold on;

i = 0;
while i<100
    px = randn();
    py = randn();
    pz = randn();
    d = pdist([0 0 0; px py pz],'euclidean');
    if d<1
        if mod(i,2)==0
            scatter3(px, py, pz,30,'ro','filled');
        else
            scatter3(px, py, pz,30,'bo','filled');
        end
        i = i+1;
    end
end

hold off;
camlight;

axis equal;
axis off; 
```

输出：

![在此处输入图像描述](../Images/26f81d1f368217707289ff328c0d6db9.png)

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-04-27T11:58:54.530

在带有 d3.js 的 Javascript 中：http: [//jsfiddle.net/jjcosare/rggn86aj/6/](http://jsfiddle.net/jjcosare/rggn86aj/6/) 或 > 运行代码片段

对在线发布很有用。

```
var particleChangePerMs = 1000;
var particleTotal = 250;
var particleSizeInRelationToCircle = 75;

var svgWidth = (window.innerWidth > window.innerHeight) ? window.innerHeight : window.innerWidth;
var svgHeight = (window.innerHeight > window.innerWidth) ? window.innerWidth : window.innerHeight;

var circleX = svgWidth / 2;
var circleY = svgHeight / 2;
var circleRadius = (circleX / 4) + (circleY / 4);
var circleDiameter = circleRadius * 2;

var particleX = function() {
  return Math.floor(Math.random() * circleDiameter) + circleX - circleRadius;
};
var particleY = function() {
  return Math.floor(Math.random() * circleDiameter) + circleY - circleRadius;
};
var particleRadius = function() {
  return circleDiameter / particleSizeInRelationToCircle;
};
var particleColorList = [
  'blue',
  'red'
];
var particleColor = function() {
  return "url(#" + particleColorList[Math.floor(Math.random() * particleColorList.length)] + "Gradient)";
};

var svg = d3.select("#quantumBall")
  .append("svg")
  .attr("width", svgWidth)
  .attr("height", svgHeight);

var blackGradient = svg.append("svg:defs")
  .append("svg:radialGradient")
  .attr("id", "blackGradient")
  .attr("cx", "50%")
  .attr("cy", "50%")
  .attr("radius", "90%")

blackGradient.append("svg:stop")
  .attr("offset", "80%")
  .attr("stop-color", "black")

blackGradient.append("svg:stop")
  .attr("offset", "100%")
  .attr("stop-color", "grey")

var redGradient = svg.append("svg:defs")
  .append("svg:linearGradient")
  .attr("id", "redGradient")
  .attr("x1", "0%")
  .attr("y1", "0%")
  .attr("x2", "100%")
  .attr("y2", "100%")
  .attr("spreadMethod", "pad");

redGradient.append("svg:stop")
  .attr("offset", "0%")
  .attr("stop-color", "red")
  .attr("stop-opacity", 1);

redGradient.append("svg:stop")
  .attr("offset", "100%")
  .attr("stop-color", "pink")
  .attr("stop-opacity", 1);

var blueGradient = svg.append("svg:defs")
  .append("svg:linearGradient")
  .attr("id", "blueGradient")
  .attr("x1", "0%")
  .attr("y1", "0%")
  .attr("x2", "100%")
  .attr("y2", "100%")
  .attr("spreadMethod", "pad");

blueGradient.append("svg:stop")
  .attr("offset", "0%")
  .attr("stop-color", "blue")
  .attr("stop-opacity", 1);

blueGradient.append("svg:stop")
  .attr("offset", "100%")
  .attr("stop-color", "skyblue")
  .attr("stop-opacity", 1);

svg.append("circle")
  .attr("r", circleRadius)
  .attr("cx", circleX)
  .attr("cy", circleY)
  .attr("fill", "url(#blackGradient)");

function isParticleInQuantumBall(particle) {
  var x1 = circleX;
  var y1 = circleY;
  var r1 = circleRadius;
  var x0 = particle.x;
  var y0 = particle.y;
  var r0 = particle.radius;
  return Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0)) < (r1 - r0);
};

function randomizedParticles() {
  d3.selectAll("svg > .particle").remove();
  var particle = {};
  particle.radius = particleRadius();
  for (var i = 0; i < particleTotal;) {
    particle.x = particleX();
    particle.y = particleY();
    particle.color = particleColor();
    if (isParticleInQuantumBall(particle)) {
      svg.append("circle")
        .attr("class", "particle")
        .attr("cx", particle.x)
        .attr("cy", particle.y)
        .attr("r", particle.radius)
        .attr("fill", particle.color);
      i++;
    }
  }
}

setInterval(randomizedParticles, particleChangePerMs);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<div id="quantumBall"></div>
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2012-10-23T15:34:00.570

在 R 中，您可以使用该`rasterImage`功能添加到当前绘图中，您可以创建/下载漂亮的水晶球图像并将其加载到 R 中（参见 png、EBImage 或其他包），然后使其半透明并使用`rasterImage`将其添加到当前绘图中。我可能会先绘制你的 2 个彩色点，然后在顶部绘制球的图像（在透明度的情况下，它们仍然可见并且看起来就像它们在里面）。

一个更简单的方法（虽然可能不那么好看）是使用该`polygon`函数绘制一个半透明的灰色圆圈来表示球。

如果您想在 3 维中执行此操作，请查看 rgl 包，这是一个基本示例：

```
library(rgl)
open3d()
spheres3d(0,0,0, radius=1, color='lightgrey', alpha=0.2)
spheres3d(c(.3,-.3),c(-.2,.4),c(.1,.2), color=c('red','blue'),
     alpha=1, radius=0.15) 
```

# android - android中的图像处理（模糊效果）

> ID：13033615
> 
> 赞同：0
> 
> 时间：2012-10-23T15:11:12.250
> 
> 标签：android, image-processing

我正在android中进行图像处理，例如模糊效果和图像上的圆圈。

我的目标是在特定点及其周围模糊图像。我可以使用高斯模糊和卷积矩阵对整个图像进行模糊效果。

```
public static Bitmap applyGaussianBlur(Bitmap src) {

    double[][] GaussianBlurConfig = new double[][] { { 1, 2, 1 }, { 2, 4, 2 }, { 1, 2, 1 } };
    ConvolutionMatrix convMatrix = new ConvolutionMatrix(3);
    convMatrix.applyConfig(GaussianBlurConfig);
    convMatrix.Factor = 16;
    convMatrix.Offset = 0;
    return ConvolutionMatrix.computeConvolution3x3(src, convMatrix);
} 
```

谁能给我一个想法，在图像中的特定点做模糊效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:49:53.837

我实际上只是回答了类似的问题。

[尝试与此相反。](https://stackoverflow.com/questions/12972733/how-to-make-image-blur-in-android/13014723#13014723)

我认为您想要做的是创建原始图像的两个副本。一个是清晰的，一个是模糊的（使用你想要的任何过滤器）。然后，对于您想要模糊的区域中的所有像素，将它们的值从模糊图像复制到清晰图像。

单独对所有像素进行模糊拟合可能会浪费您的时间。除非您尝试做一些花哨的事情（如链接中的），否则请执行一次并将其用作一种查找表。

但是，由于您是在移动设备上执行此操作，因此您可能需要进行一些特殊的内存管理。在这种情况下，获取原始图像的裁剪版本（尺寸略大于模糊区域）并仅模糊该子图像。然后跟踪子图像中的哪些像素对应于原始像素中的哪些像素，并将这些值复制过来，或者对您的项目有用的任何内容。

# android - Android 4.1.2 不显示菜单按钮

> ID：13033623
> 
> 赞同：2
> 
> 时间：2012-10-23T15:11:32.373
> 
> 标签：android, menu

我的应用程序提供了一个菜单，可以通过单击 Android 菜单按钮访问该菜单。由于 Google 自 3.0 起删除了硬件菜单按钮，因此屏幕上有一个软件模拟按钮（通常为 3 个点）来访问菜单。

许多使用 Google Nexus 手机的用户现在抱怨说，自从他们更新到 4.1.2 后，菜单按钮没有出现。

这里的代码：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, 0, Menu.NONE, this.getString(R.string.setting));
        menu.add(0, 1, Menu.NONE, this.getString(R.string.config));
        return super.onCreateOptionsMenu(menu);
    } 
```

我必须改变什么才能在 4.1.2 上恢复按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:18:14.163

我在平板电脑上遇到了同样的问题，现在它似乎也推广到了手机上。唯一的解决方案是添加一个 ActionBar（然后您将自动获得菜单条目）或使 android:targetSdkVersion 低于 11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:18:30.137

这个问题的正确解决方案是实现一个 ActionBar（如果你想在 Android 版本之间协调你的应用的外观和感觉，ActionBarSherlock 是一个不错的选择）：

*   Android 3.0 及更高版本：无菜单按钮，可在操作栏和溢出菜单中访问相应选项。
*   早期版本：使用菜单按钮访问相应的操作。

# c# - 为 SVN 修改提交时的文本文件，让我的程序知道它的提交号

> ID：13033625
> 
> 赞同：3
> 
> 时间：2012-10-23T15:11:36.830
> 
> 标签：c#, svn, commit

我想在我的应用程序中显示当前提交号。我使用 SVN，我的代码是 C#。

我想知道我是否可以自动更新存储库内的文本文件，以便它包含一个提交号，例如，将其显示给用户。

目前我正在考虑制作一个提交后挂钩（一个接收多个包含提交信息的环境变量的 shell 脚本）并将提交号“回显”到该文本文件中。干扰服务器端存储库中的文本文件是否有效？

还有其他存储版本号的方法吗？我知道 SVN 可以修改某些关键字的源代码，但是我需要提交这些文件才能进行修改。我希望能够始终更新该修订号，而不是在我提交特定文件时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:18:45.587

您要显示的不是*提交号*，而是***修订号***。

检查[`svn info`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.info.html)在存储库中输出最新修订号的命令。您可以让您的应用程序发布`svn info`以了解最新的 repo 修订号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:40:40.280

1.  您不必在存储库中拥有具有全局修订号的附加文件，因为存储库已经具有此元信息
2.  你**不能**（也不能真的）在 post-commit 钩子中修改存储库
3.  您只能在构建阶段获得 RevID（“构建”可以是从 repo、编译等简单导出）并写入*一些未版本化的源代码*

如果您使用 c#-code，您使用 Windows，是吗？！在这种情况下，除了`svn info`必须预先解析输出以供使用之外，您可以考虑使用[SubWCRev](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html)（TortoiseSVN 的一部分），它将带有[SubWCRev-keywords 的](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev-keywords.html)**版本化模板文件**转换为**未版本化的数据文件**，其中关键字被来自 repository-info 的实际数据替换

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:37:47.270

看看[svn:keywords](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)。您可以放入`$Revision$`您的文件，如果您为该文件设置了 svn:keywords，Subversion 会将修订号添加到该字符串。

从：

```
 Revision = $Revision$ 
```

到：

```
 Revision = $Revision: 12343$ 
```

这表明该文件是在修订版 12,343 中提交的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-14T10:29:13.547

正如大卫指出的那样，[您可以使用 svn "$Revision$" 关键字](https://stackoverflow.com/a/13035254/1051649)。当然，这将告诉您*该特定文件*最后更改的版本。

要了解项目中的整体最新版本，您可以使用`svnversion`命令行工具。在 之后`svn update`，您将始终有一个数字（但这将是整个存储库的 HEAD 修订版）；使用`-c`or`--commited`开关，`first:last`几乎可以肯定你会得到一个范围，但之后`:`你会得到你项目的主要版本。**

# design-patterns - uml 模式类似于 GoF 复合

> ID：13033628
> 
> 赞同：1
> 
> 时间：2012-10-23T15:11:45.870
> 
> 标签：design-patterns, hierarchy, uml, composite

我如何传达一个层次结构/树的基本思想，其中一个实例的高度可变但高度固定；叶子与节点分离，它们都位于相同的最低级别，并且从根到叶子的每个分支都具有相同的长度。

就像一个非常简单、统一的组织结构图或统一的目录结构，例如，

```
rootdir
|- subdir
  |-- subsubdir
    |--- file
    |--- file
    |--- file
  |-- subsubdir
    |--- file
|- subdir
  |-- subsubdir
    |--- file 
```

其中所有文件都位于第 3 级，并且每个子树都具有与其兄弟姐妹相同的高度。不存在不同高度的中间节点或不同最低级别的文件。

什么额外的符号会传达（可能与复合模式一起），这个限制。或者更优雅的是，层次结构或正是这种结构是否有其他模式？

相关：[“结束”组合的 UML 符号](https://stackoverflow.com/questions/5259335/uml-notation-for-ending-composition)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:24:24.037

我使用 OCL 来指示约束。实际上，复合模式无论如何都不适合这里，因为叶子不应该存在于“子级别”中。它要简单得多：

![在此处输入图像描述](../Images/b60e2952d0d943f03f939af1ad4ba0f3.png)

希望我是对的。

# linux - per-cpu 变量的地址

> ID：13033629
> 
> 赞同：5
> 
> 时间：2012-10-23T15:11:47.457
> 
> 标签：linux, kernel, thread-local-storage

我正在为在 x86-64 SMP 上运行的 2.6.32 版编写一个小型 linux 可加载内核模块。

我的问题是：有没有办法获得内核中声明的每个 CPU 变量的地址偏移量。偏移量是指地址与 percpu 基址的偏移量，它位于 gs 寄存器中。具体来说，我试图找到 current_task 变量的偏移量，它是指向我相信的当前任务的任务结构的指针。

我正在查看具有 get_current() 函数的 arch/x86/include/asm/current.h。此函数使用宏 percpu_read_stable 读取 current_task per-cpu 变量。据我所知 percpu_read_stable 基本上扩展为这样的 asm 例程：

```
asm("movq %%gs:%P1, %0"
  : "=r" (ret__)
  : "m" (per_cpu__current_task)) 
```

这是在 arch/x86/include/asm/percpu.h 中。我想从我的模块中读取 gs 之后的偏移量。如果我尝试使用 per_cpu_current_task 变量简单地执行 printk，则该模块将被杀死。

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:40:41.623

好的，我算出了这个特定符号的偏移量。这个是内核导出的。因此 /proc/kallsyms 中有一个条目

```
000000000000cbc0 D per_cpu__current_task 
```

所以这个特定变量的偏移量是 0xcbc0。当然，其他版本的偏移量会有所不同。

# mono - .addSubview 适用于 NSScrollView 但不适用于 NSCustomView

> ID：13033635
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:12:08.063
> 
> 标签：mono, monomac

在我的项目中，我有一个带有控制器的视图，称为 TaskOverviewView，只有一个 NSTextField，我想像小部件一样使用它。在 NSWindow 中，我也有 NSCustomView 和 NSScrollView。在展位上，我尝试使用 addSubview(NSView) 方法将 TaskOverviewViewController 的视图实例添加为子视图。虽然它适用于 ScrollView，但小部件在 CustomView 上不可见。

代码：

TaskOverviewViewController 的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using MonoMac.Foundation;
using MonoMac.AppKit;

    namespace GetTheMilk.MacGUI

{
    public partial class TaskOverviewViewController : MonoMac.AppKit.NSViewController
    {
        #region Constructors

        // Called when created from unmanaged code
        public TaskOverviewViewController (IntPtr handle) : base (handle)
        {
            Initialize ();
        }

        // Called when created directly from a XIB file
        [Export ("initWithCoder:")]
        public TaskOverviewViewController (NSCoder coder) : base (coder)
        {
            Initialize ();
        }

        // Call to load from the XIB/NIB file
        public TaskOverviewViewController () : base ("TaskOverviewView", NSBundle.MainBundle)
        {
            Initialize ();
        }

        // Shared initialization code
        void Initialize ()
        {
            _taskName = new NSTextField();
            _taskName.StringValue = "HUHUH";
        }

        #endregion

        //strongly typed view accessor
        public new TaskOverviewView View {
            get {
                return (TaskOverviewView)base.View;
            }
        }
    }
} 
```

我的 StartupWindow 的控制器：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using MonoMac.Foundation;
using MonoMac.AppKit;

namespace GetTheMilk.MacGUI
{
    public partial class StartupWindowController : MonoMac.AppKit.NSWindowController
    {
        #region Constructors

        // Called when created from unmanaged code
        public StartupWindowController (IntPtr handle) : base (handle)
        {
            Initialize ();
        }

        // Called when created directly from a XIB file
        [Export ("initWithCoder:")]
        public StartupWindowController (NSCoder coder) : base (coder)
        {
            Initialize ();
        }

        // Call to load from the XIB/NIB file
        public StartupWindowController () : base ("StartupWindow")
        {
            Initialize ();
        }

        // Shared initialization code
        void Initialize ()
        {

        }

        #endregion

        //strongly typed window accessor
        public new StartupWindow Window {
            get {
                return (StartupWindow)base.Window;
            }
        }

        partial void _ButtonClick(NSObject sender)
        {
            _Label1.StringValue = "Hello";
            TaskOverviewViewController widget = new TaskOverviewViewController();
            _cview.AddSubview(widget.View);
            _scrillView.AddSubview(widget.View);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:56:01.587

该问题与 ScrollView 和 CustomView 无关。相反，它与调用顺序相关。如果我改为切换它，则 ScrollView 将不起作用，但 CustomView. 解决方案与一个问题相关，我在这里问：[NullReferenceException when access GUI Components in Controllers constructor](https://stackoverflow.com/questions/13038438/nullreferenceexception-when-acceccing-gui-components-in-controllers-constructor)

与其将代码放入`Initialize()`方法中，不如将其放入`AwakeFromNib()`方法中。

# api - 从 Linkedin 组获取最新和热门帖子

> ID：13033640
> 
> 赞同：3
> 
> 时间：2012-10-23T15:12:19.373
> 
> 标签：api, linkedin

如何在**没有用户身份验证**的情况下从 Linkedin Group 获取最新和热门帖子 无论我在哪里搜索，似乎都需要用户登录。

然而，[这些人](http://www.digitalwpc.com/Pages/Home.aspx)是如何在没有用户登录的情况下让它工作的呢？

我理解在大多数情况下强制用户登录的原因。但以上内容无需登录网站本身即可看到。例如：[http ://www.linkedin.com/groups/Microsoft-Office-365-3724282](http://www.linkedin.com/groups/Microsoft-Office-365-3724282)

# sql - 归档大表 (SQL Server 2008)

> ID：13033645
> 
> 赞同：5
> 
> 时间：2012-10-23T15:12:35.707
> 
> 标签：sql, sql-server, sql-server-2008

我有一个非常大的表，每个季度都有大约 100 条记录。

[我使用此脚本](http://sqlserverperformance.wordpress.com/2011/08/13/gradually-deleting-data-in-sql-server/)手动将数据从现有表移动到另一个数据库，以最小化备份大小，并在执行查询时卸载生产数据库。

有没有更好的方法，例如，一些计划脚本将数据从生产数据库移动到其他数据库，然后每天或每周有效地从源数据库中删除记录？

请注意，由于该表中的大量 INSERT，我的日志文件正在迅速增长，而且当我将数据移动到存档数据库时，将记录 DELETE。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T01:30:11.073

让我回顾一下要求：

1.  减少备份大小
2.  通过归档减少数据库中的记录数
3.  归档数据而无需过多记录

为了减少备份大小，您需要将数据移动到不同的数据库中。

就日志记录而言，您需要查看[最小日志记录的规则](http://msdn.microsoft.com/en-us/library/ms190422.aspx)并确保您遵循它们。确保您要插入的数据库的恢复模式是简单或大容量日志恢复模式。

对于插入归档数据，您希望禁用非聚集数据（并在插入完成后重建它们），如果存在聚集索引，则使用跟踪标志 610，并在目标表上放置表锁。链接中还有许多您需要检查的规则，但这些是基础。

删除没有最小的日志记录，但是您可以通过使用 top 子句以块删除来最小化日志文件的增长。基本思想是（在删除期间切换到简单恢复模式以限制文件增长）：

```
SELECT NULL;

WHILE @@ROWCOUNT > 0

     DELETE TOP (50000) FROM TABLE WHERE Condition = TRUE; 
```

调整顶部数字以调整每次删除完成的记录量。您还需要确保谓词条件正确，以便您只删除您打算删除的内容。这将删除 50000，然后如果返回 rowcount，它将重复，直到返回的 rowcount 为 0。

如果您真的想要对所有内容进行最少的日志记录，您可以按周对源表进行分区，创建源表的克隆（在相同的分区函数和相同的索引结构上），将分区从源表切换到克隆表，插入从克隆表到存档表，然后截断克隆表。这样做的好处是截断而不是删除。缺点是设置、维护和查询要复杂得多（每个分区都有一个堆或 b-tree，所以如果所有查询都不使用分区消除，聚集索引/表扫描将不得不扫描多个 b -trees/heaps 而不仅仅是一个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:16:54.027

您是否考虑过使用 SSIS 来执行此操作。我使用 SSIS 按顺序进行归档和备份。您还可以在 tsql 任务中使用相同的脚本并使用代理对其进行调度。或者您可以只使用代理并将脚本粘贴到其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T15:49:15.487

您可以使用表分区而不是移动数据

[http://technet.microsoft.com/en-us/library/dd578580(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/dd578580(v=sql.100).aspx)

[http://msdn.microsoft.com/en-us/library/ms345146(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms345146(v=sql.90).aspx)

对于定期移动数据，您可以使用 SQL Server 作业调度功能来运行 SSIS 包。

也许也可以使用数据转换服务 (DTS)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T15:55:26.840

分区，肯定的。它将消除对新数据库的需求。[这里的](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)好例子

如果你不想改变你的架构，我建议使用 SSIS 来移动数据而不是脚本

# magento-1.7 - Magento - getItemsCount() 返回差异产品的数量

> ID：13033646
> 
> 赞同：0
> 
> 时间：2012-10-23T15:12:36.617
> 
> 标签：magento-1.7

该函数`getItemsCount()`假设返回当前购物车中的产品数量。但在我的情况下，它会返回**差异**产品的数量。如下图所示，它应该返回 3，而不是返回 2。

![在此处输入图像描述](../Images/0a376e70b5126a476160cf1f13a29dbd.png)

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:24:36.060

```
 $totalQuantity = Mage::getModel('checkout/cart')->getQuote()->getItemsQty(); 
```

阅读更多@ [http://wabism.com/magento-shopping-cart-total-quantity-vs-total-items/](http://wabism.com/magento-shopping-cart-total-quantity-vs-total-items/)

# javascript - DOM Javascript：仅使用显示某些内容的元素创建一个数组

> ID：13033653
> 
> 赞同：0
> 
> 时间：2012-10-23T15:12:49.360
> 
> 标签：javascript, html, css, dom, browser

假设一个 HTML 文件被特意安排为显示一个简单的垂直布局，以便在浏览器呈现它时我看到元素的垂直排列。因此，没有元素从右到左。
现在，出于布局目的，还有各种其他元素，例如 < div> （例如），它们不会显示，因为它们只是对 CSS 或结构有用。也就是说，只是像 <p>、<img> 和其他文本节点这样的元素显示了一些东西（间距和颜色区域并不重要）。
我想在这里询问是否有可能（在 DOM 上使用 javascript）填充一个数组，其中仅包含在渲染时显示某些内容的元素。
例如，说我有

```
< div class="div1class">  
< div class="div2class">  
< p>
some text here  
< img src="img.jpg"/>  
some text here too
< /p>  
< /div>  
< div class="div3class"> <img src="img2.jpg"/> < /div>  
< /div> 
```

在这种情况下，数组将是：

```
0 text node  
1 img  
2 text node  
3 img 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:05:56.063

根据这篇文章下面的第一条评论编辑了我的答案。

**Javascript**

```
 var nodeTypes = [];

    function getContent(elm) {
        if (elm.nodeType != 1 && elm.nodeType != 3) return;
        // skip if it's not an element or text node
        if (elm.nodeType == 1) { // element
            var comp = window.getComputedStyle(elm,null);
            var disp = comp.getPropertyValue('display') != 'none';
            var hidden = comp.getPropertyValue('visibility') == 'hidden';
            if (!disp || hidden) return;
            // skip if it's hidden
            if (elm.childNodes.length) {
                for (var i = 0; i < elm.childNodes.length; i++)
                    getContent(elm.childNodes[i]);
                return;
            }
        }
        if (/^\s+$/.test(elm.nodeValue)) return;
        // skip if it's empty
        nodeTypes.push((elm.nodeType == 3 ? 'text node' : elm.nodeName).toLowerCase());
    }

</script> 
```

**CSS**

```
<style type="text/css">
    a span {display:none;}
</style> 
```

**HTML**

```
<body>
    <div class="div1class">
        <div class="div2class">
            <p>
                some text here
                <img src="img.jpg" />
                some text here too
            </p>
        </div>
        <div>
            <a href="#">Anchor example<span>hidden element</span></a>
        </div>
        <!-- some comment -->
        <div class="div3class"><img src="img2.jpg" /></div>
    </div>
    <script type="text/javascript">
        nodeTypes = [];
        getContent(document.getElementsByClassName('div1class')[0]);
        console.log(nodeTypes);
    </script>
</body> 
```

**输出**

> `["text node", "img", "text node", "text node", "img"]`

您将需要考虑许多可能性，例如在代码中可能看起来为空但实际上具有背景图像的元素。使用 jQuery 这会更可靠。

# java - 错误：未指定类

> ID：13033656
> 
> 赞同：0
> 
> 时间：2012-10-23T15:12:54.853
> 
> 标签：java, linux, hadoop, java-native-interface, solaris

我编写了这个 Java hadoop 程序，它将执行文件的并行索引。该文件是在 eclipse 中创建的

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> { 
     private final static IntWritable zero = new IntWritable(0); 
     private Text word = new Text();
     public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
        String line = value.toString();
        int CountComputers;
        //DataInputStream ConfigFile = new DataInputStream( new FileInputStream("countcomputers.txt"));
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // путь к файлу
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String result = br.readLine(); // читаем как строку
        CountComputers = Integer.parseInt(result); // переводим строку в число
        //CountComputers=ConfigFile.readInt();
        in.close();
        fstream.close();
        ArrayList<String> paths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          paths.add(tokenizer.nextToken());
        }
        String[] ConcatPaths= new String[CountComputers];
        int NumberOfElementConcatPaths=0;
        if (paths.size()%CountComputers==0)
        {
            for (int i=0; i<CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*paths.size()/CountComputers+j);
                }
            }
        }
        else
        {
            NumberOfElementConcatPaths=0;
            for (int i=0; i<paths.size()%CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers+1;              
                for (int j=1; j<paths.size()/CountComputers+1; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*(paths.size()/CountComputers+1)+j);
                }           
            }
            for (int k=paths.size()%CountComputers; k<CountComputers; k++)
            {
                ConcatPaths[k]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;                
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[k]+="\n"+paths.get((k-paths.size()%CountComputers)*paths.size()/CountComputers+paths.size()%CountComputers*(paths.size()/CountComputers+1)+j);
                }                   
            }
        }
        //CountComputers=ConfigFile.readInt();
        for (int i=0; i<ConcatPaths.length; i++)
        {
            word.set(ConcatPaths[i]);
            output.collect(word, zero);
        }
     }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, LongWritable> { 
    public native long Traveser(String Path);
    public native void Configure(String Path);
    public void reduce(Text key, <Iterator>IntWritable value, OutputCollector<Text, LongWritable> output, Reporter reporter) throws IOException { 
        long count;
        String line = key.toString();
        ArrayList<String> ProcessedPaths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          ProcessedPaths.add(tokenizer.nextToken());
        }       
        Configure("/etc/nsindexer.conf");
        for (int i=0; i<ProcessedPaths.size(); i++)
        {
            count=Traveser(ProcessedPaths.get(i));
        }
        output.collect(key, new LongWritable(count));
      }
    static
    {
        System.loadLibrary("nativelib");
    } 
}

public static void main(String[] args) throws Exception { 
      JobConf conf = new JobConf(ParallelIndexation.class); 
      conf.setJobName("parallelindexation");
      conf.setOutputKeyClass(Text.class);
      conf.setOutputValueClass(LongWritable.class);
      conf.setMapperClass(Map.class);
      conf.setCombinerClass(Reduce.class);
      conf.setReducerClass(Reduce.class);
      conf.setInputFormat(TextInputFormat.class);
      conf.setOutputFormat(TextOutputFormat.class);
      FileInputFormat.setInputPaths(conf, new Path(args[0]));
      FileOutputFormat.setOutputPath(conf, new Path(args[1]));
      JobClient.runJob(conf);
  } 
} 
```

我通过命令编译了程序

```
javac -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar -d folder/classes folder/src/ParallelIndexation.java,
root@one:/export/hadoop-1.0.1/folder/classes# jar -cvf ParallelIndexation.jar -C /export/hadoop-1.0.1/folder/classes 
```

然后对于本机方法，我尝试创建 .h 文件

```
root@one:/export/hadoop-1.0.1/folder/classes# javah -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar;/export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar -jni org.myorg.ParallelIndexation 
```

收到以下错误

```
Error: no classes specified
bash: /export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar: Permission denied 
```

因此在 ParallelIndexation.jar 上设置了权限 0777

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:27:38.203

1.  你应该使用 ':' 而不是 ';' 分离类路径时：

    ```
    javah -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar:/export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar -jni org.myorg.ParallelIndexation 
    ```

2.  也许你应该检查你的 jar 结构。

我尝试发出修复错误 1 ​​的命令并且它有效。

```
javac -cp /usr/share/hadoop/hadoop-core-1.0.4.jar org/myorg/ParallelIndexation.java
jar c org/myorg/ParallelIndexation*.class > ParallelIndexation.jar
javah -classpath /usr/share/hadoop/hadoop-core-1.0.4.jar:ParallelIndexation.jar -jni org.myorg.ParallelIndexation 
```

* * *

问题是当您发布命令版本时：

```
javah -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar;/export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar -jni org.myorg.ParallelIndexation 
```

bash 处理 ';' 作为命令分隔符，因此尝试执行两个命令：

```
javah -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar
/export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar -jni org.myorg.ParallelIndexation 
```

第一个命令“javah”没有指定类，第二个命令试图执行“/export/hadoop-1.0.1/folder/classes/ParallelIndexation.jar”，但文件不可执行。

# javascript - 从javascript中的字符串中删除“\”

> ID：13033657
> 
> 赞同：3
> 
> 时间：2012-10-23T15:13:04.130
> 
> 标签：javascript, json

我在删除 Javascript 中的斜杠时遇到了一些麻烦。

我通过 JSON 获得了一些 HTML，需要摆脱转义的斜杠。

这就是我现在所拥有的，但它似乎不起作用 - 根本......

```
obj.embed_code = obj.embed_code.replace(/\\/g, ''); 
```

该对象内的 HTML 是来自 YouTube 的嵌入 iframe，但由于它包含转义引号，因此我最终得到了一个包含 404 页面的 iframe。

这样做的正确方法是什么？

这是输出的示例...

```
<iframe width=\\\"420\\\" height=\\\"315\\\" src=\\\"http:\/\/www.youtube.com\/embed\/MD61itbPNEY\\\" frameborder=\\\"0\\\" allowfullscreen><\/iframe> 
```

此外，这是从中提取 JSON 的页面，因此您可以看到它看起来像什么原始的......

[http://bit.ly/UxuvfL](http://bit.ly/UxuvfL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:30:03.880

如果数据是真正的 JSON，那么*正确*的方法是使用 JSON 解析器，因为 JSON 解析不仅仅是删除反斜杠。鉴于类似

```
{"content":"<p>CleverStuff\u2122<\/p>"} 
```

`JSON.parse(theData).content`会给你

```
<p>CleverStuff™&lt;/p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:18:28.403

尝试

`obj.embed_code = obj.embed_code.replace(/\\\//g, "/");`

它匹配`\/`，因此您不会意外删除未转义的实例`/`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T15:16:00.733

你的 JSON 是有效的，我检查了[jsonlint.com](http://jsonlint.com/)。

这应该清理 embed_code 了：

```
obj.embed_code = obj.embed_code.replace(/\\\\\\"/g, '"').replace(/\\\//g, "/"); 
```

对我来说很好：

```
> var a = "width=\\\\\\\"420 src=\\\\\\\"http:\\/\\/www"
"width=\\\"420 src=\\\"http:\/\/www"
> a.replace(/\\\\\\"/g, '"').replace(/\\\//g, "/")
"width="420 src="http://wwww" 
```

但我会推荐这个：

```
$.getJSON('http://webiwave.com/includes/checkForButton.php?id=922', function (data){
    console.log(data.embed_code.replace(/\\\"/g, '"') ) 
}); 
```

如果我在你的网页上运行它，我会得到干净的 html：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/MD61itbPNEY" frameborder="0" allowfullscreen></iframe> 
```

# mysql - 需要MySQL查询帮助

> ID：13033668
> 
> 赞同：0
> 
> 时间：2012-10-23T15:13:38.130
> 
> 标签：mysql

我有一张这样的桌子

```
CREATE TABLE `air_video` (
`id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
`date` DATE NOT NULL,
`time` TIME NOT NULL,
`asset_id` INT(10) UNSIGNED NOT NULL,
`duration` TIME NOT NULL,
`name` VARCHAR(100) NOT NULL,
PRIMARY KEY (`id`),
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

有些条目具有相同的`asset_id`,`duration`和`name`，但不同的`date`和`time`。这些是在一段时间内多次播放的相同视频。

我需要计算`duration`每个月分组的不同视频的总数。请给一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:17:56.027

因此，您需要每月每个不同视频的持续时间总和：

```
select
  year,
  month,
  sec_to_time(sum(time_to_sec(duration))) as totaltime
from
  (select distinct
    av.asset_id,
    av.duration,
    year(av.date) as year,  
    month(av.date) as month
  from
    air_video av)
group by
  year,
  month 
```

~~因此，您需要每月每个视频`sum`的持续时间...`grouped`~~

正如 RobertHarvey 在评论中建议的那样巧妙地使用分组（谢谢）。 `time_to_sec`用于将时间值转换为秒，以便对其求和。

```
select
  av.asset_id,
  year(av.date) as year,  
  month(av.date) as month,
  sec_to_time(sum(time_to_sec(av.duration))) as totaltime
from
  air_video av
group by
  av.asset_id,
  year(av.date), 
  month(av.date) 
```

# c++ - 如何将 MAC 地址与 IP 地址相关联

> ID：13033670
> 
> 赞同：2
> 
> 时间：2012-10-23T15:13:38.397
> 
> 标签：c++, ip-address, mac-address, netsh

我有一个应用程序，其中（脑死亡）远程设备将 BOOTP 数据包发送到 W7 PC。我的 PC 程序需要能够与此设备通信。显而易见的方法是让程序从 BOOTP 数据包中获取 MAC 地址，并将其与给定的 IP 地址相关联，此时套接字可以正常工作。

这可以通过使用 netsh 从管理员命令提示符轻松完成，但是对于我的用户来说，必须定期进行手动干预会很痛苦（乏味且容易出错），尤其是当所有必需的信息都可用于程序。

有没有什么方法可以从程序中完成此操作或等效操作，而无需用户使用管理员权限提升它？我能想到的最好的办法是用 system() 包装一个 netsh 命令，但这仍然需要一切以管理员权限运行。

# java - 将电子邮件从 Outlook 拖到 Java（使用 JNA）

> ID：13033673
> 
> 赞同：1
> 
> 时间：2012-10-23T15:13:47.007
> 
> 标签：java, eclipse, outlook, swt, jna

我正在尝试通过拖放将电子邮件从 Outlook 传输到 Eclipse RCP 应用程序。使用此[代码片段](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet83.java)，我发现在从 Outlook 2010 到 Java 的拖放操作期间，会传输以下本机类型：

![在此处输入图像描述](../Images/46d1b08b639760e6d81c288524559dc4.png)

我需要完整的消息正文，因此在拖放操作期间提供的文本是不够的。我试图扩展[ByteArrayTransfer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/dnd/ByteArrayTransfer.html)以便将本机对象转换为 Java 对象，从而提供对电子邮件的访问。像[FileGroupDescriptor](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773290%28v=vs.85%29.aspx)这样的结构是原生的 C 结构。我尝试使用 JNA 将它们读出，但 JNA 无法将 C 结构转换为我的 Structure 类的对象。

我有两个问题：

1.  我的 JNA 代码有什么问题？
2.  有人知道在java中读取本机拖放结构的更好方法吗？

扩展 ByteArrayTransfer 类的代码：

```
 public class FileGroupDescriptor extends Structure {
        public int cItems;
        public FileDescriptor[] fgd;

        public FileGroupDescriptor() {
            super();
        }

        public FileGroupDescriptor(Pointer pointer) {
            super(pointer);
        }
    }

    public Object nativeToJava(TransferData transferData) {
        if (transferData.type == 49478) {
            Native.setProtected(true);

            byte[] buffer = (byte[]) super.nativeToJava(transferData);

            Memory memory = new Memory(buffer.length);
            memory.write(0, buffer, 0, buffer.length - 1);

            Pointer p = memory.getPointer(0);
            FileGroupDescriptor groupDescriptor = new FileGroupDescriptor(p);

            System.out.println(groupDescriptor.cItems);
        }

        return "";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:35:12.820

名义上，这就是您需要初始化 JNA 结构的方式。

```
public class FileGroupDescriptor extends Structure {
    public int cItems;
    public FileDescriptor[] fgd;

    public FileGroupDescriptor(Pointer pointer) {
        super(pointer);
        this.cItems = pointer.readInt(0);
        this.fgd = new FileDescriptor[this.cItems];
        this.read();
    }
} 
```

这应该足以提供您在该`fgd`领域寻找的信息。您还应该将整个`byte[]`长度写入内存；不知道为什么要省略最后一个字节（这不是 C 字符串）。

# objective-c - 将核心数据库中的数据放入数组中

> ID：13033674
> 
> 赞同：1
> 
> 时间：2012-10-23T15:13:48.910
> 
> 标签：objective-c, core-data, nspredicate

我有一个核心数据数据库，我想将数据显示到表格视图中。我一直在网上搜索如何做到这一点，但我永远找不到。

```
NSEntityDescription *entitydesc = [NSEntityDescription entityForName:@"Host" inManagedObjectContext;context];
NSFetchRequest *request = [[NSFetchRequest alloc]init];
[request setEntity:entitydesc];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"I DON'T KNOW WHAT TO PUT HERE"];
[request setPredicate:predicate]; 
```

但我不知道我必须在 predicateWithFormat 中写什么，所以我可以选择我的数据库表的所有数据。

当我拥有数据库表的所有数据时，如何将它们放入数组中，以便将数组添加到 tableview？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:21:43.163

from the `NSFetchRequest` docs:

> If you don’t specify a predicate, then all instances of the specified entity are selected

# selenium-webdriver - WebDriver Chrome 问题

> ID：13033675
> 
> 赞同：2
> 
> 时间：2012-10-23T15:14:00.073
> 
> 标签：selenium-webdriver, selenium-chromedriver

操作系统：Windows。使用硒网络驱动程序。我下载了 chromedriver.exe，为其设置路径，chrome 运行但步骤未运行，这是日志：

```
 Started ChromeDriver
    port=26306
    version=14.0.836.0
    log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager).
    log4j:WARN Please initialize the log4j system properly.
    .\test\automation\proxy_launcher.cc(89): error: Value of: app_launched
      Actual: 1
    Expected: AUTOMATION_SUCCESS
    Which is: 0
    Error while awaiting automation ping from browser process
    .\test\automation\proxy_launcher.cc(223): error: Value of: automation()->GetBrowserWindowCount(&window_count)
      Actual: false
    Expected: true
    .\test\automation\proxy_launcher.cc(244): error: Value of: browser_proxy.get()
      Actual: false
    Expected: true
    .\test\automation\proxy_launcher.cc(269): error: Value of: WaitForBrowserProcessToQuit( TestTimeouts::action_max_timeout_ms(), &exit_code)
      Actual: false
    Expected: true
    .\test\automation\proxy_launcher.cc(270): error: Value of: exit_code
      Actual: -1
    Expected: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:49:21.410

较新版本的 chromedriver.exe 可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:27:42.287

您是否尝试过设置代理？你知道是否需要设置代理吗？

# android - 强制 DialogFragment 的大小/使其超出屏幕

> ID：13033681
> 
> 赞同：1
> 
> 时间：2012-10-23T15:14:12.780
> 
> 标签：android, android-dialogfragment

我有以下情况：我需要在对话框框架中放置一个大图像（超出屏幕尺寸），但是我仍然需要对话框框架在顶部有大约 150dp 的边距（以便它后面的标题可见）。我可以通过让对话框超出屏幕来做到这一点，或者通过强制对话框的大小并将其 y 位置设置为某个值，比如 150。但是现在发生的情况是，当屏幕上没有位置时, DialogFragment 仍然尽可能地扩展直到屏幕的边框（它适用于屏幕尺寸足够大以容纳全尺寸图像的设备），因此忽略垂直起始位置 y。有什么办法可以解决这个问题吗？这是我到目前为止的代码：

```
public static class MyDialogFragment extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(STYLE_NO_TITLE, 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.findings_dialog, container, false);

        Window window = getDialog().getWindow();
        // window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
        // WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
        window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        window.clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

        Display display = window.getWindowManager().getDefaultDisplay();
        int width = display.getWidth();
        int height = display.getHeight();
        WindowManager.LayoutParams p = window.getAttributes();
        p.softInputMode = WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE;
        p.x = 240;
        p.y = 40;
        p.height = 100;
        // p.verticalMargin = 50.0f;
        window.setAttributes(p);

        // ScrollView scv = (ScrollView) v.findViewById(R.id.findingsPopup);
        // ViewGroup.LayoutParams svcp = new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, height - 200);
        // scv.setLayoutParams(svcp);

        getDialog().setCanceledOnTouchOutside(true);
        ImageView image = (ImageView) v.findViewById(R.id.findingsImage);
        image.setImageResource(R.drawable.dummy_findings_picture); // TODO dummy image

        Button closeButton = (Button) v.findViewById(R.id.closeButton);
        closeButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                MyDialogFragment.this.dismiss();
            }
        });

        // this.setStyle(DialogFragment.STYLE_NO_TITLE, 0);

        return v;
    }
} 
```

这是xml布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/findingsPopup"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:minWidth="100dp"
android:minHeight="50dp" >

<Button
    android:id="@+id/closeButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="onClose"
    android:text="@string/close" 
    android:layout_marginLeft="200dp"/>

<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/closeButton" >

    <ImageView
        android:id="@+id/findingsImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="false"
        android:contentDescription="@string/logo"
        android:src="@drawable/acute_myocarditis_cover" />
</ScrollView>
</RelativeLayout> 
```

# sql - 选择 1 不同的所有列

> ID：13033683
> 
> 赞同：0
> 
> 时间：2012-10-23T15:14:15.487
> 
> 标签：sql, oracle

好的，所以我有一个包含以下列的表格

```
| id | release_id | publish_date | category | title | 
```

基于这种结构，一个`release`可以有*多个类别*，这给它在表格中的一个新行。我的页面浏览量之一列出了最新的 x 版本（所有类别）。当我像这样运行查询时：

```
select * 
from (select * 
      from TABLE 
      order by PUBLISH_DATE DESC) 
where rownum <= 10 
```

如果最新版本之一（在这种情况下为 10 个）具有多个类别，它将返回两次，因此我尝试添加 UNIQUE 或 DISTINCT （或任何其他适当的方式），以便 RELEASE_ID 与返回的行不同。

当我运行 select`DISTINCT RELEASE_ID`时，只返回该列，但*我仍然需要其他列的数据*。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:20:04.330

由于 oracle 支持`ROW_NUMBER()`和窗口函数，如果它适合您的需要，请尝试以下操作。

```
SELECT id, release_id, publish_date, category, title
FROM
(
    SELECT  id, release_id, publish_date, category, title,
            ROW_NUMBER() OVER
           (PARTITION BY category ORDER BY Publish_DATE DESC) rn
    FROM tableName
) x
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:20:59.137

How about

```
select * from TABLE 
where release_id in (select release_id from 
                      (select distinct(release_id) from TABLE order by PUBLISH_DATE DESC)
                      where rownum <= 10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:06:11.967

你不能这样做，因为 relese_id 与类别有一对多的关系。如果您想要不同的 release_id ，您如何获得“其他列”数据？（如类别。）您只能对任何其他列执行聚合函数。

# c# - 如何正确处理类中使用的字节数组？

> ID：13033684
> 
> 赞同：2
> 
> 时间：2012-10-23T15:14:16.070
> 
> 标签：c#, .net, sockets, memory-leaks

我有一个 StateObject 类，用于存储来自客户端和服务器的数据。

这是代码：

```
 public class StateObject : IDisposable 
    {
        public StateObject()
        {

        }

        public String serviceName = ConfigurationManager.AppSettings["ServiceName"].ToString().Trim();  //Holds the service name 
        public Socket clientSocket; //socket for communication with the client

        public int id; //client id  (A running sequence to keep track of StateObjects)

        public string leaseId; //holds the leaseId that is used to communicate with the server

        public bool isLeaseIdValid = false;

        public string requestQuery = string.Empty;

        public IPEndPoint serverEP;

        public Socket serverSocket; //Socket for communication with the server

        public static int BUFFER_SIZE = Convert.ToInt32(ConfigurationManager.AppSettings["BufferSize"].ToString().Trim());  //Get the buffer size from the state object

        public byte[] clientReadBuffer = new byte[BUFFER_SIZE];   // Receive clientReadBuffer.
        public byte[] serverReadBuffer = new byte[BUFFER_SIZE];

        public int clientNumBytes;
        public byte[] clientSendBuffer = new byte[BUFFER_SIZE];
        public int serverNumBytes;
        public byte[] serverSendBuffer = new byte[BUFFER_SIZE];

        public bool isShutdown = false;

        public Socket serverSocketPort80; //Socket for communication with the server

        public bool ConnectedToPort80 = false; //initially set to false

        public ConnectionObject connectionObject;

        #region Dispose implementation

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing)
            {
                connectionObject.Dispose();
            }
        }

        ~StateObject()
        {
            Dispose(false);
        }

        #endregion
    } 
```

如何正确处理此类并清除字节数组使用的内存？字节数组用于在套接字通信中存储发送/接收的消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T15:17:15.827

您只需要释放非托管内存。

在这种情况下，您似乎唯一需要处理的是 the`Socket`和可能的`ConnectionObject`，无论它是什么。

换句话说，处置`IDisposable`该类创建的任何实例。

一旦该对象超出范围，垃圾收集器将处理字节数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T15:18:53.083

您没有（如@DrewNoakes 回答中所述）。如果您将此特定代码部分标识为对象创建/内存分配热点，请考虑创建一个字节数组池，您可以从中租用已分配的数组。通常，我尝试使用服务器软件来执行此操作，因此内存使用量存在某种上限。

# php - 使用ajax将字段提交到数据库

> ID：13033686
> 
> 赞同：1
> 
> 时间：2012-10-23T15:14:25.820
> 
> 标签：php, jquery, ajax

我有一个图像滑块，每次加载下一张图像时，我都需要将记录保存到数据库中。我正在尝试使用 jQuery 和 AJAX 来完成此操作。

我将所需的信息写入一个名为 data 的隐藏字段，以便将其发布到我的 PHP 页面。

```
 function ajaxSave(){
        $("#data").val($("#image").attr("src")+","+ratings[iCount]);
        //alert($("#data").val());//Testing
        $.ajax({
            type: "POST",
            url: "ajax/ajaxSave.php",
            data: $("#data").val(),

            success: function(data){
                alert(data);//only for testing purposes
            }
        });
    } 
```

每次按下下一个按钮时，我都会调用我的 ajaxSave() 函数。我收到了成功的警报，但我的问题是：$_POST[''] 数组单元格是什么？

我需要操作 php 页面中的数据（见下文），但我只收到一条显示“array ()”的警报。

```
<?php
    print_r($_POST);
?> 
```

我对 AJAX 很陌生，所以任何帮助都将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:17:39.293

您需要设置数据：

```
 function ajaxSave(){
        $("#data").val($("#image").attr("src")+","+ratings[iCount]);
        //alert($("#data").val());//Testing
        $.ajax({
          type: "POST",
          url: "ajax/ajaxSave.php",
          data: {"requestName":$("#data").val(), 'param2':'hello World'},

          success: function(data){
             alert(data);//only for testing purposes
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:19:40.207

Ajax 的数据应作为地图发送。

所以而不是

```
data: $("#data").val(), 
```

尝试

```
data: { 'param' : $("#data").val() }, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T15:20:49.847

数据必须是 JSON 格式的键/值对。例如：

```
{ username:"JhoneD", address: "and address of JhonD", city: "Boston" } 
```

# clearcase - 清除案例 - Windows 找不到“Clearviewupdate”

> ID：13033687
> 
> 赞同：1
> 
> 时间：2012-10-23T15:14:30.043
> 
> 标签：clearcase

我正在尝试添加一个新流，一旦我设置它并清除案例尝试开始下载文件，我会看到以下消息。

有没有任何 ClearCase Guru 知道我为什么会得到这个？

![在此处输入图像描述](../Images/1bd43bbebbcade99cc1da86e768e9cd2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:33:06.407

它位于 ClearCase 安装的 bin 目录中（例如：`C:\Rational\ClearCase\bin\clearviewupdate.exe`）。
所以这应该是一个简单的`PATH`问题。

如果 Windows 找不到该 exe，它应该无法找到任何其他 ( `clearexplorer`, `clearprojexp`, `cleartool`, ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T12:50:46.643

尝试将具有 clearviewupdate.exe 的 ..\ClearCase\bin 添加到 PATH 变量并重新启动 Clearcase。它应该工作:)

# javascript - 将对象数组合并为数组数组，每个数组包含 3 个对象

> ID：13033688
> 
> 赞同：2
> 
> 时间：2012-10-23T15:14:31.267
> 
> 标签：javascript, algorithm

我有以下许多对象的 JavaScript 数组：

```
[
    {...},
    {...},
    {...},
    .
    .
    .
    .
    .
    {...},
    {...}
] 
```

我想将数组转换为 3 个对象的行，如下所示：

```
[
    [ {...}, {...}, {...} ],
    [ {...}, {...}, {...} ],
    [ {...}, {...}, {...} ],
    .
    .
    .
    [ {...}, {...}, {...} ],
    [ {...}, {...}, {...} ]
] 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:24:11.463

另一个片段（改编自@Florent）

```
var result = [];

do {
   result.push( data.splice( 0, 3 ) )
} while( data.length ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:17:34.660

使用`for`循环：

```
var i = 0
  , n = data.length
  , result = [];

for (; i < n; i += 3) {
  result.push([data[i], data[i + 1], data[i + 2]]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T15:18:06.203

你可以用一个循环来做到这一点。这需要数组`items`并创建数组`result`：

```
var result = [];
var line;
for (var i = 0; i < items.length; i++) {
  if (i % 3 == 0) {
    line = [];
    result.push(line);
  }
  line.push(items[i]);
} 
```

（即使源数组不能被三整除，这种循环方式也有效。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:51:19.460

只是另一种选择:)

```
var result = arr.reduce(
    function(prev, curr, index) { 
        if(index > 1) { 
            if(prev[prev.length-1].length == 3) 
                prev.push([]); 
            prev[prev.length-1].push(curr); 
            return prev; 
        }
        return [[prev, curr]]; 
    }
); 
```

# sql-server - 我想知道我的 .bat 文件从哪个网络驱动器中提取文件

> ID：13033689
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:14:37.333
> 
> 标签：sql-server, ssis

我有一个 SQL SERVER 作业，作业类型是“操作系统（CmdExec）。它作为 SQL 代理服务帐户运行。命令是`F:\Tools2\SSIS\MonthlyProcess.bat`

谁能解释一下这份工作是做什么的？这应该是一个 SSIS 作业，其中文件从大型机服务器推送到网络驱动器，并且该`.bat`文件将平面文件从共享网络驱动器拉到本地 F 驱动器。

我如何知道文件从哪个网络驱动器`.bat`中提取文件以及如何编辑 .bat 文件？因为每当我尝试打开`.bat`文件时，命令窗口都会很快打开和关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:21:57.197

The batch file can be edited with any text processor, like Notepad. Right click on it, you should see a "Modify" item menu. If not, open Notepad and browse to your file in the open file explorer.

Once the file is opened, you can see what it does. From the fact that your batch file is in a folder called SSIS, I suspect it does something like :

```
dtexec /f Drive:/Path/To/Some/SSISFile.dtsx 
```

The `/f` flag tells you what SSIS package is being executed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:42:02.400

根据您在 Dominic Goulet 的回答中发表的评论，您的 bat 文件是

1.  确保它在 F: 驱动器中
2.  将目录更改为 \tools2\SSIS\MonthlyProcess\MonthlyProcess\
3.  使用dtexec执行包package.dtsx（大概位于上述目录）
4.  将输出定向到 f:\tools2\Log\MonthlyProcess.log

您应该从该服务器的 F\tools\SSIS\MonthlyProcess\MonthlyProcess\ 目录中检索 package.dtsx 文件，并使用 Visual Studio 对其进行编辑以查看包在做什么。您还应该咨询原始程序员（如果他仍然可用），询问我们为什么使用如此复杂的流程来运行此 SSIS 包，并在您尝试进行任何更改之前获取有关此流程的任何文档。

# c++ - 特征将密集矩阵转换为稀疏矩阵

> ID：13033694
> 
> 赞同：15
> 
> 时间：2012-10-23T15:14:51.290
> 
> 标签：c++, matrix, sparse-matrix, eigen

如何将一个转换`Eigen::Matrix<double,Dynamic,Dynamic>`为一个`Eigen::SparseMatrix<double>`？我正在寻找一种更好的方法，而不是遍历密集矩阵

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T06:11:51.123

您可以为此使用 sparseView() 方法：

`sparse = dense.sparseView();`

甚至指定一个公差：

`sparse = dense.sparseView(epsilon,reference);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:46:41.413

你控制密集矩阵的创建吗？

如果你不这样做，那么如果不读取每个矩阵元素以查看它是否为空，就无法做到这一点。

如果您自己创建密集矩阵，您可以创建一个数据结构来帮助您在需要时将其转换为稀疏矩阵。例如，您可以在每个矩阵行中存储该行中非空元素的数量。然后，您可以跳过包含 0 个非空元素的行，一旦您看到计数告诉您的非空元素数量，您就可以停止任何行的转换。

您存储的额外数据取决于您期望的稀疏矩阵类型。一种常见的稀疏矩阵模式是在稀疏矩阵中浮动的密集子矩阵。当您创建密集矩阵时，您可以对那些密集区域进行标注。例如，不存储每行的元素计数，而是在某些 x,y 偏移处保留非空矩形区域的列表。

# windows-8 - 动态引用listview windows 8 itemtemplate javascript

> ID：13033702
> 
> 赞同：1
> 
> 时间：2012-10-23T15:15:19.837
> 
> 标签：windows-8, microsoft-metro, winjs

我正在用 HTML5/Javascript 开发一个 win8 应用程序；我需要在外部 html 文件中设置 itemtemplate 并在需要时引用它。

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:46:50.680

我认为您不能从外部 html 文件加载它。但是，您可以完全在 JavaScript 中创建模板。

以下代码从此处复制：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx)

```
 app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                // TODO: This application has been newly launched. Initialize
                // your application here.
            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll().then(function () {
                var lView = document.getElementById("templateFunctionListView").winControl;
                lView.itemTemplate = itemTemplateFunction;

            }));

        }
    };

   function itemTemplateFunction(itemPromise) {

       return itemPromise.then(function (item) {
           var div = document.createElement("div");

           var img = document.createElement("img");
           img.src = item.data.picture;
           img.alt = item.data.title;
           div.appendChild(img);

           var childDiv = document.createElement("div");

           var title = document.createElement("h4");
           title.innerText = item.data.title;
           childDiv.appendChild(title);

           var desc = document.createElement("h6");
           desc.innerText = item.data.text;
           childDiv.appendChild(desc);

           div.appendChild(childDiv);

           return div;
       });
    }; 
```

# .htaccess - 有条件的 .htaccess request_uri 重定向（mod-rewrite）

> ID：13033703
> 
> 赞同：0
> 
> 时间：2012-10-23T15:15:21.437
> 
> 标签：.htaccess, mod-rewrite, redirect

在我的 Apache 服务器上，我将一个旧域移动到一个新位置，并且它将共享与前一个相同的 Apache 设置。

假设我有两个域：

*   example.com（旧域名）
*   example.net（新域）。

如果请求 uri 是旧域，那么它应该使用其路径重定向到新域，例如`example.com/blog/great-post/`301 重定向到`example.net/blog/great-post/`

但是，如果请求 uri 是，`example.net/blog/great-post/`那么它不应该重定向到自身，因为它已经在其目的地（并且不会卡在重定向循环中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:27:16.297

[您可以使用RewriteCond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)设置条件重写，请阅读手册了解更多信息。

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^example.net$
RewriteRule (.*) http://example.net/$1 [R=301,L] 
```

# c# - 我可以使用 OpenXML SDK 在 Word 文档中找到文本的位置吗？

> ID：13033705
> 
> 赞同：0
> 
> 时间：2012-10-23T15:15:22.337
> 
> 标签：c#, .net, openxml, openxml-sdk

我想将一些已知文本放在 Word 文档中，并使用 .NET 以编程方式找到它相对于文档或页面的 x、y 位置。那可能吗？我正在考虑使用 OpenXML SDK，但我没有看到让它发挥作用的途径。或者我可以使用图像或书签之类的东西来做到这一点吗？

最终，我尝试将 Word 文档另存为 PDF 或图像（使用 Aspose 之类的库）并在该位置覆盖一些内容。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-03T02:13:00.910

这是一个老问题，但我认为指出这一点很有帮助。

一个解决方案是放置一个占位符文本，在文档中找到它，用图像替换它并保存。

[此答案中对此进行了详细说明](https://stackoverflow.com/a/19180076/4584870)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:00:42.690

基于对文档 XML 结构的进一步研究和一般理解，这看起来不太可能。我查看了 Aspose 的第三方组件，看看他们是否支持它，而它们不来自 Word 文档，但它可能来自 PDF。所以我想我会发布一个指向该信息的链接： [http ://www.aspose.com/community/forums/thread/420805.aspx](http://www.aspose.com/community/forums/thread/420805.aspx)

# php - 我刚开始使用 PHP，我想知道如何解决这个解析错误。这是错误：

> ID：13033706
> 
> 赞同：-2
> 
> 时间：2012-10-23T15:15:29.567
> 
> 标签：php

> 解析错误：第 70 行 C:\wamp\www\Discussion Forums\login.php 中的解析错误

这是我的代码。顺便说一句，我正在制作一个登录页面，其中包含功能配置（用于数据库连接）、页眉和页脚页面，并且我使用 WampServer 和 Dreamweaver。

```
<?php
session_start();
require("config.php");
require("functions.php");
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
if($_POST['submit']) 
{
    $sql = "SELECT * FROM users WHERE username = '"
    . $_POST['username'] . "' AND password = '"
    . $_POST['password'] . "';";
    $result = mysql_query($sql);
    $numrows = mysql_num_rows($result);
    $result = mysql_query($sql);
    $numrows = mysql_num_rows($result);
    if($numrows == 1) 
        {
            $row = mysql_fetch_assoc($result);
            if($row['active'] == 1) 
                {
                    session_register("USERNAME");
                    session_register("USERID");
                    switch($_GET['ref']) 
                    {
                        case "newpost":
                        if(isset($_GET['id']) == FALSE) 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php");
                            }
                        else 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php?id=" . $_GET['id']);
                            }
                        break;
                        case "reply":
                        if(isset($_GET['id']) == FALSE) 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php");
                            }
                        else 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php?id=" . $_GET['id']);
                            }
                        break;
                        default:
                        header("Location: " . $config_basedir);
                        break;
                    }
                }
                else {
                require("header.php");
                echo "This account is not verified yet. You were emailed a link
                to verify the account. Please  click on the link in the email to
                                                        continue.";
                }
            echo "This account is not verified yet. You were emailed a link
          to verify the account. Please click on the link in the email to
          continue.";
        }
}
else {
header("Location: " . $config_basedir . "/login.php?error=1");
}
else {
require("header.php");
if($_GET['error']) {
echo "Incorrect login, please try again!";
}
}
?>
<form action="<?php echo pf_script_with_get($SCRIPT_NAME); ?>"
  method="post">
<table>
    <tr>
        <td>Username</td>
        <td><input type="text" name="username"></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="password" name="password"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="submit" name="submit" value="Login!"></td>
    </tr>
</table>
</form>
Don't have an account? Go and <a href="register.php">Register</a>!

<?php
 }
  require("footer.php");
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:18:07.993

这是你的问题：

```
else {
header("Location: " . $config_basedir . "/login.php?error=1");
}
else { 
```

你有两个连续`else`的。你应该修改你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:19:23.850

前行没有匹配`else`。也就是说，打开和关闭大括号不匹配。 保持代码缩进有助于避免此类错误。`require("header.php");``if`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:37:05.190

在第 67 行使用 else if($somecondition) 代替，因为在 if-elseif-else 中只能有一个 else 块。您的逻辑也存在错误，我正在输入可能对您有所帮助的新代码。

```
 <?php
session_start();
require("config.php");
require("functions.php");
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
if($_POST['submit']) 
{
    $sql = "SELECT * FROM users WHERE username = '"
    . $_POST['username'] . "' AND password = '"
    . $_POST['password'] . "';";
    $result = mysql_query($sql);
    $numrows = mysql_num_rows($result);
    $result = mysql_query($sql);
    $numrows = mysql_num_rows($result);
    if($numrows == 1) 
        {
            $row = mysql_fetch_assoc($result);
            if($row['active'] == 1) 
                {
                    session_register("USERNAME");
                    session_register("USERID");
                    switch($_GET['ref']) 
                    {
                        case "newpost":
                        if(isset($_GET['id']) == FALSE) 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php");exit;
                            }
                        else 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php?id=" . $_GET['id']);exit;
                            }
                        break;
                        case "reply":
                        if(isset($_GET['id']) == FALSE) 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php");exit;
                            }
                        else 
                            {
                                header("Location: " . $config_basedir .
                                "/newtopic.php?id=" . $_GET['id']);exit;
                            }
                        break;
                        default:
                        header("Location: " . $config_basedir);
                        break;
                    }
                }
                else {
                    //require("header.php");
                        $msg = base64_encode("This account is not verified yet. You were emailed a link
                      to verify the account. Please click on the link in the email to
                      continue.");
                      header("Location: " . $config_basedir . "/login.php?msg=".$msg);exit;
                }
                    $msg = base64_encode("This account is not verified yet. You were emailed a link
                  to verify the account. Please click on the link in the email to
                  continue.");
                  header("Location: " . $config_basedir . "/login.php?msg=".$msg);exit;

        }else{
             $msg = base64_encode("You have incorrect username or password");
                  header("Location: " . $config_basedir . "/login.php?msg=".$msg);exit;
        }
}

require("header.php");
if($_GET['msg']) {
    echo base64_decod($msg);
}

?>
<form action="<?php echo pf_script_with_get($SCRIPT_NAME); ?>"
  method="post">
<table>
    <tr>
        <td>Username</td>
        <td><input type="text" name="username"></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="password" name="password"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="submit" name="submit" value="Login!"></td>
    </tr>
</table>
</form>
Don't have an account? Go and <a href="register.php">Register</a>!

<?php

  require("footer.php");
?> 
```

# java - 如何清除 CallableStatement 的 OUT 参数

> ID：13033708
> 
> 赞同：1
> 
> 时间：2012-10-23T15:15:33.353
> 
> 标签：java, jdbc

我想知道是否有一种方法可以清除 CallableStatement 的 OUT 参数，就像为 PreparedStatement 的绑定参数提供 clearParameters() 方法一样。由于 CallableStatement 扩展了 PreparedStatement，我尝试使用 clearParameters() 方法，但它不会重置 OUT 参数。

例子：

```
CallableStatement statement = conn.prepareCall("call myStoredProcedure (?)");
statement.registerOutParameter("myOutParameterName", Types.VARCHAR);
statement.clearParameters();
statement.execute(); //still working despite clearParameters()
System.out.println(statement.getString("myOutParameterName")); //still working despite clearParameters() 
```

# css - jquery ui 滑块样式

> ID：13033710
> 
> 赞同：3
> 
> 时间：2012-10-23T15:15:38.520
> 
> 标签：css, jquery-ui

我正在尝试在 jquery ui 范围滑块句柄中设置一个值的样式。

我正在使用这个[DEMO](http://jsfiddle.net/6hyVP/2/)

另外，我使用了这个 CSS，但它仍然无法正常工作。我哪里错了？

```
<div class="demo">
    <div id="slider-vertical" class="sliderControl-label v-labeCurrent"></div>
</div>

.sliderControl-label {
    color: #CCCCCC;
    font-size: 16px;
    font-weight: bold;
    position: absolute;
    top: -10px;
}

.ui-slider-handle .sliderControl-label .v-labelCurrent {
    color: #777777;
    font-size: 16px;
    line-height: 24px;
    position: relative;
    text-shadow: 0 1px 0 #FFFFFF;
    top: -2px;
    transition: color 0.15s linear 0s;
}​

$(function(){
    $("#slider-vertical").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 60,
        slide: function( event, ui ) {
            $( "#amount" ).val( ui.value );
            $(this).find('.ui-slider-handle').text(ui.value);
        },
        create: function(event, ui) {
            var v=$(this).slider('value');
            $(this).find('.ui-slider-handle .sliderControl-label .v-labelCurrent').text(v);
        }
    });    
});​ 
```

我让自己陷入了正确的 CSS 混乱中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:36:43.393

用作`.ui-slider .ui-slider-handle`您的 CSS 选择器（并在 jQuery UI CSS 文件下声明这些样式）。

[示例 jsfiddle](http://jsfiddle.net/pxfunc/6hyVP/10/)

```
.ui-slider .ui-slider-handle {
    width:2em;
    left:-.6em;
    text-decoration:none;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:33:17.840

如果您只想在句柄中设置该数字的样式，您需要做的就是`.ui-slider-handle`像这样定位：[jsfiddle](http://jsfiddle.net/6hyVP/8/)：

```
.ui-slider-handle {
    color: #777777;
    font-size: 10px;
    padding: 3px;
    text-shadow: 0 1px 0 #FFFFFF;
    text-decoration:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:56:30.030

好的，我已经解决了这个问题。谢谢你们的帮助。我的问题是我没有在 javascript 中声明值的类。

```
$(this).find('.ui-slider-handle').html('<div class="value-label">'+ui.value+'</div>'); 
```

通过声明这一行，我可以设置句柄内的值的样式。干杯

# c# - 将 RowDetailsTemplate 中的列与 DataGrid 中的列同步

> ID：13033712
> 
> 赞同：1
> 
> 时间：2012-10-23T15:15:57.470
> 
> 标签：c#, wpf, xaml, wpf-controls, wpfdatagrid

我想知道是否有可能做到这一点`DataGrid.RowDetailsTemplate`？

![例子](../Images/38733a54e5af1bf433e2c94d45eef1a9.png)

我希望当用户在 中选择一行时，该行的`DataGrid`详细信息会出现在该行下方。到目前为止，我知道该怎么做。问题是我希望中的时间列`RowDetailsTemplate`与中的相应列同步`DataGrid`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:23:30.470

```
<DataGrid.RowDetailsTemplate>
    <ItemContainerTemplate>                      
        <DockPanel >
           <Rectangle Name="LeftRect" DockPanel.Dock="Left" Width="{Binding ElementName=DG1, Path=Columns[0].ActualWidth}" Height="40" Fill="Red"></Rectangle>
           <Rectangle Name="RightRect" Height="40" Fill="Yellow"></Rectangle>
        </DockPanel>
    </ItemContainerTemplate>                
</DataGrid.RowDetailsTemplate> 
```

在这里，为了简单起见，我使用了带有 2 的 DockPanel`Rectangle`作为项目容器，您可以使用网格/面板。诀窍是`Width`将 LeftRect 的 绑定到`Width`的`DataGrid`第一列并标记它`Dock=Left`。因为，这是`DockPanel`其余的空间将由 RightRect 填充。

你可以使用`RelativeSource`或`ElemenatName`去做。这里我使用`ElementName`了 ，其中 DG1 是我的`DataGrid`控件的名称。

还要确保您已`RowDetailsVisibilityMode="VisibleWhenSelected"`在 DataGrid 上设置。

# python - 缓存或预取 Django 的反向关系

> ID：13033716
> 
> 赞同：2
> 
> 时间：2012-10-23T15:16:06.513
> 
> 标签：python, django, prefetch

考虑一个带有 Publishers 表和 Books 表的 shema，这样

```
def Publisher(models.Model):
  city = models.CharField()
  ...

def Book(models.Model):
  title = models.CharField()
  publisher = models.ForeignKey(Publisher) 
```

在我的模板中，我希望显示某些出版商及其所有书籍的列表。在我的视图功能中，我使用类似的东西获取所需的发布者

```
publishers=Publisher.objects.filter(city='NY') 
```

然后在我看来，我遍历 publishers 和 publishers.book_set.all 一样

```
{% for p in publishers %}
....
   {% for b in p.book_set.all %} 
```

这按预期工作，只是它显然像无数次一样击中数据库。

如何优化代码以使 django 只访问 db 一次或两次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:19:15.323

在 Django 1.4+ 中，使用[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

```
Publisher.objects.filter(city='NY').prefetch_related('book_set') 
```

在 Django <1.4 中，使用[django-batch-select](https://github.com/lilspikey/django-batch-select)。

# php - PHP字符串不连接

> ID：13033719
> 
> 赞同：0
> 
> 时间：2012-10-23T15:16:17.563
> 
> 标签：php

> **可能重复：**
> [解析错误：语法错误，意外的 '('，期待 ',' 或 ';' in](https://stackoverflow.com/questions/11313051/parse-error-syntax-error-unexpected-expecting-or-in)

我收到以下错误：

> 解析错误：语法错误，意外的 '.'，期待 ',' 或 ';' 在第 19 行的 xxx 中

在这条线上：

```
public $metad_name = "lol" . "lol"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T15:17:28.420

此错误表示不能在类属性中使用表达式：

## 作品

```
class Foo {

    public $metad_name = '';

    function __construct() {
        $this->metad_name = 'lol' . 'lol';
    }

} 
```

## 解析错误

```
class Bar {

    public $metad_name = 'lol' . 'lol';

} 
```

如果您的代码不是类属性 - 只需删除`public`

# asp.net-mvc-4 - MVC4 - 过早开始不显眼的验证

> ID：13033721
> 
> 赞同：2
> 
> 时间：2012-10-23T15:16:18.643
> 
> 标签：asp.net-mvc-4, data-annotations, unobtrusive-validation

我有一个 HTML 表单，它在我的网站中使用不显眼的验证，它是一个 ASP.Net MVC4 应用程序。我认为表格很简单，如下所示

```
@Using (Html.BeginForm())
{
  @: Listing for @ViewBag.itemNumber
  @Html.TextBoxFor(model=>model.Name)
  @Html.TextBoxFor(model=>model.Location)
  @:<input type="submit" value="Save" />
} 
```

我的控制器如下图

```
public ActionResult test()
{
  string itemNumber = Request.params["item"];
  ViewBag.itemNumber = itemNumber;
  return View();
} 
```

我的模型是

```
public class item
{
 [StringLength(10, ErrorMessage = "The Name should be atleast 3 characters in length", MinimumLength = 3)]
 public string Name {get;set;}
 public string Location {get;set;}
} 
```

我遇到的问题是，即使在我的第一个表单提交之前，页面加载时就会启动不显眼的验证。由于最小长度验证，我一开始输入，名称的文本框就会变成红色。我已经成功地使用了不显眼的验证，并且在同一网站的其他页面上没有这个问题。我怀疑验证在这个特定页面的早期就开始了，因为我的控制器中的代码从 URL GET 参数中检索一个值并将其设置在 Viewbag 中。我的假设正确吗？如果是，如何防止验证在此页面上过早开始？

编辑：我的页面上有以下 javascript 库，其顺序与下面指定的相同

```
<script src="~/Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-ui-1.9.0.min.js" type="text/javascript"></script>
<script src="~/Scripts/jQuery.tmpl.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T00:55:50.930

您描述的是默认行为！默认情况下，还验证字段 onKeyUp。必填字段不会发生这种情况，因为当键向上时，文本框不再为空！因此，您可能对所需字段案例的行为感到困惑。无论如何，您可以禁用 keyUp 验证。在此处查看您可以更改的插件的完整选项：http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:24:41.133

您能否向我们展示您呈现的 HTML 页面（即查看源代码）？

我有兴趣查看您正在使用哪些 .js 包。

也许您正在使用旧的/越野车`jquery-1....js`包。我刚刚使用 jquery-1.6.2.js 版本（仅供参考：最新版本是 1.8.2）测试了您的示例代码，并且不显眼的 js 按预期工作。

您的问题的症状听起来肯定像是客户端问题 (JavaScript)，因此能够看到您呈现的网页可能会帮助我们帮助您。

顺便一提; 你的代码示例仍然有错别字。您的`View`代码应如下所示：

```
@using(Html.BeginForm())
{
  @ViewBag.itemNumber
  @Html.TextBoxFor(model=>model.Name)
  @Html.TextBoxFor(model=>model.Location)
  <input type="submit" value="Save" />
} 
```

**更新** 我根据您发布的内容创建了一个 MVC 4 应用程序。这是呈现的 HTML。

*注意我包含的 JavaScript 包。您的问题很可能是由于缺少 js 包造成的。*

```
 <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>test</title>
        <link href="/Content/site.css" rel="stylesheet" type="text/css" />
        <script src="/Scripts/jquery-1.6.2.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.validate.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
    </head>
    <body>

    <h2>test</h2>
    <form action="/" method="post">
<input data-val="true" data-val-length="The Name should be at least 3 characters in length" data-val-length-max="10" data-val-length-min="3" id="Name" name="Name" type="text" value="" />
<input id="Location" name="Location" type="text" value="" />  
<input type="submit" value="Save" />
    </form>
    </body>
    </html> 
```

# python - Python 拆分字符串并打乱中间

> ID：13033724
> 
> 赞同：1
> 
> 时间：2012-10-23T15:16:38.753
> 
> 标签：python, string, split

我在使用 python 中的程序时遇到问题...我需要程序在保持外部两个字母完整的同时混淆单词的中间...我相信我已经成功地将单词分成三个不同的部分，我只是不能弄清楚我应该如何打乱单词的中间

```
word = input("Enter a word")

first_letter = word[0]

last_letter = word[-1]

still_to_scramble = word[1:-1] 
```

我应该使用随机数吗？或者有没有简单的方法，对不起，我对编码比较陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:19:49.580

您可以`shuffle`从随机包中使用：

```
import random
letters = list(still_to_scramble)
random.shuffle(letters)
scrambled = ''.join(letters) 
```

以下是它的工作原理：

```
>>> s
'$123abc$'
>>> first_letter = s[0]
>>> last_letter = s[-1]
>>> middle_parts = list(s[1:-1])
>>> random.shuffle(middle_parts)
>>> ''.join(middle_parts)
'b3a2c1' 
```

小心不要这样做：

```
>>> middle_parts_random = random.shuffle(middle_parts) 
```

`shuffle`*就地*工作- 这是一种奇特的说法，它不会返回经过洗牌的位，而是修改它。它实际上返回`None`，你可能会被它绊倒，因为你不会看到错误：

```
>>> middle_parts_random = random.shuffle(middle_parts)
>>> middle_parts_random # Huh? nothing is printed!
>>> middle_parts_random == None # Ah, that's why. Darn you in-place methods!
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T18:52:39.397

我添加了一个正则表达式来扩展上面 Burhan Khalid 的解决方案。此添加适用于包含多个单词的输入，我认为有些人可能会觉得有用。

```
$ cat ./jumble.py
#!/usr/bin/env python
import re
import random

def jumble(s):
    l = list(s)
    random.shuffle(l)
    return(''.join(l))

line = raw_input("Input string to jumble: ")
print(re.sub(r'\b(\w)(\w+)(\w)\b', lambda m: "".join([m.group(1),jumble(m.group(2)),m.group(3)]), line)) 
```

例如：
$ ./jumble.py
输入字符串到混乱：我只是输入一些任意字符串
我是 jsut etnrneig some aabtrrriy sritng

*注意：以上示例是在 Red Hat Enterprise Linux 6.7 系统上完成的，默认为 python-2.6.6-64.el6.x86_64*

# android - 媒体扫描仪无法在某些设备上拾取图像

> ID：13033726
> 
> 赞同：0
> 
> 时间：2012-10-23T15:16:43.850
> 
> 标签：android, android-contentresolver, android-mediascanner

我有一个应用程序将图像保存到 sdcard 上的目录中，然后我希望 MediaScanner 将其拾取，以便它们显示在设备上的图库/照片库中。

**我的问题**

我目前的解决方案在 Galaxy S3、Galaxy Ace 和 Sony Xperia U 上都能正常工作。它不能在 HTC Hero 上工作。

它更新其内容的唯一方法是重新启动设备，因为我将其添加到内容解析器，因此其他设备在添加它时会拾取它。我的代码如下所示。

```
 ContentResolver cr = MyApplication.getAppContext().getContentResolver();
        ContentValues values = new ContentValues();
        values.put(Images.Media.TITLE,fileName);
        values.put(Images.Media.DISPLAY_NAME,photoName);
        values.put(Images.Media.DATE_TAKEN, currentPhoto.getTimestamp());
        values.put(Images.Media.MIME_TYPE, "image/jpeg");
        values.put(Images.Media.ORIENTATION, rotation);
        values.put(Images.Media.LATITUDE,currentPhoto.getLatitude());
        values.put(Images.Media.LONGITUDE, currentPhoto.getLongitude());
        values.put(Images.Media.DATA,MainActivity.APP_GALLERY_STORAGE_PATH+File.separator+fileName);
        cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values); 
```

**我的问题**

如何强制重新扫描或更新 MediaScanner，以便在不重新启动设备的情况下将新添加到该目录的图像显示在 HTC Hero 的照片库中？

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:33:48.907

我对华为设备也有同样的问题。尝试添加

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

到清单。它对我有用！

# api - 谷歌扩展 API 2

> ID：13033727
> 
> 赞同：0
> 
> 时间：2012-10-23T15:16:49.700
> 
> 标签：api, google-chrome

我有个问题。我在清单 v1 上有一个应用程序。但现在它告诉我将其更改为 v2。但这给了我一个错误，例如：

> *   拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

我试图改变清单：

```
"web_accessible_resources": [
    "jquery-1.7.1.min.js",
    "plugin.js"
] 
```

但是在html代码中，我有：

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>  
<script src="plugin.js"></script> 
```

我现在怎么放？我应该删除它吗？如果我删除它不会运行！我的弹出窗口甚至不再打开了：|

希望你能理解我的问题，谢谢

（如果有人提供使用 javaScript 下载的 API v2 示例，我将更加感谢 :)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:47:24.603

此错误通常意味着有一些脚本直接在您的 HTML 页面内执行，而不是通过外部 javascript 文件包含在内。

例如：

`<script type="text/javascript">alert('hello');</script>`嵌入在您的 html 文件中的是一个内联脚本。正确的做法是

`<script type="text/javascript" src="hello.js"></script>`.

您的文件 hello.js 将包括`alert('hello');`

我希望这有帮助。

# php - php无法从ftp服务器下载文件

> ID：13033730
> 
> 赞同：1
> 
> 时间：2012-10-23T15:16:58.093
> 
> 标签：php, ftp

我们的客户在他们自己的服务器上运行我们的 php 程序。有些是Linux，有些是Windows。要更新我使用 ftp 的程序。最近我改变了FTP服务器，即运行服务器的物理机。
现在我们的一些客户如果想要更新就会遇到麻烦。如果他们执行测试脚本，他们会收到以下消息：

> 警告：ftp_get() [function.ftp-get]：为 _testupdate.txt（68 字节）打开 BINARY 模式数据连接。在第 65 行的 C:\Programme\Zend\Apache2\htdocs_testupdate.php

我尝试通过被动和主动模式以及 ASCII 和 BINARY 模式下载文件...。但没有任何改变。这是代码：

```
 echo "<br> Testfilegröße wurde richtig ermittelt.";
    $bstat = ftp_get ( $conn_id, "_testupdate.txt", "_testupdate.txt", FTP_BINARY);     #FTP_ASCII oder FTP_BINARY
    $exists = file_exists("_testupdate.txt"); 
```

起初我认为防火墙可能会导致问题，但这似乎不太可能，因为测试脚本可以连接并登录到 ftp 服务器
有人知道我可以尝试解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:25:32.790

尝试这个：

```
ftp_pasv($conn_id, TRUE); 
```

如果防火墙确实是罪魁祸首，则会有所帮助。

否则，请确保您的文件确实是二进制或 ASCII。在错误的情况下会抛出此错误。

# .net - 使用 Ninject 将用户名作为构造函数参数注入存储库

> ID：13033731
> 
> 赞同：0
> 
> 时间：2012-10-23T15:17:04.307
> 
> 标签：.net, entity-framework, dependency-injection, ef-code-first, ninject

我使用传递给构造函数的参数发现了几个问题，但我无法将其转化为我的具体问题。

我正在结合 MVC 学习 EF codefirst。

我创建了一个抽象类和一个接口作为基础：

```
public abstract class RepositoryBase<C, T> : IRepositoryBase<T> 
    where T: class where C : DbContext,  new()

public interface IRepositoryBase<T> where T : class 
```

对于我在具有接口的具体类中创建的模型存储库

```
public interface ICustomerRepository : IRepositoryBase<Customer>

public class CustomerRepository: RepositoryBase<PNMP, Customer>,
    ICustomerRepository 
```

PNMP（我的代码优先上下文）只有一个构造函数，它接受用户身份以跟踪更改设置内部参数 _username

```
public override int SaveChanges()
{
    var changeSet = ChangeTracker.Entries<IDatabaseBaseType>();

    if (changeSet != null)
    {
        var modifiedEntries =
            changeSet.Where(c => c.State== EntityState.Modified);

        foreach (var entry in modifiedEntries)
        {
            entry.Entity.ModifiedDate = DateTime.Now;
            entry.Entity.ModifiedBy = _username;
        }

        var addedEntries =
            changeSet.Where(c => c.State == EntityState.Added);

        foreach (var entry in addedEntries)
        {
            entry.Entity.CreatedDate = DateTime.Now;
            entry.Entity.CreatedBy = _username;
        }
    }
    return base.SaveChanges();
} 
```

我如何将身份变量传递给 PNMP（上下文）的构造函数

我正在使用 Ninject.MVC3 将具体类绑定到接口，使用：

```
kernel.Bind<ICustomerRepository>().To<CustomerRepository>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:37:06.093

与其注入一个`username`字符串原语，不如让你`DbContext`依赖一个`IUserContext`抽象。这使您可以简单地注册您的服务，而不必诉诸于重写任何构造函数参数。

**更新**

您可以定义如下的 MVC 特定实现`IUserContext`：

```
public class MvcUserContxt : IUserContext
{
    public string UserName
    {
        get { return HttpContext.Current.User.Identity.Name; }
    }
} 
```

您可以按如下方式注册它：

```
Bind<IUserContext>().To<MvcUserContext>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:40:18.063

您可以使用`WithConstructorParameter`：

```
kernel.Bind<IInterface>()
    .To<ConcreteClass>()
     .WithConstructorParameter("name", value); 
```

但是，我敦促您*不要*使用存储库来抽象 DbContext。它没有真正的目的。如果你想对你的类进行单元测试并且你的数据库不是微不足道的，你最终会花费大量时间来创建模拟存储库——没有任何理由，只需使用数据库的快照进行单元测试。

微软在使用 DbContext 抽象出数据库方面做得非常好，无需抽象它们的抽象。

# php - GalleryCMS - Uploadify - HTTP 错误 500

> ID：13033733
> 
> 赞同：1
> 
> 时间：2012-10-23T15:17:07.473
> 
> 标签：php, upload, uploadify

我正在尝试将文件上传到 GalleryCMS，但每次都收到 HTTP 错误 500。

我检查了每个可能的网页，我将我的 php.ini 更改为 1200，上传最大值为 300mb，我将 sizelimit 更改为 200MB，我尝试更改 .htaccess 文件中的 modsecurity，问题不存在。

我可以上传任何最大 2MB 的文件，还有什么我会收到 HTTP 错误 500。你们中有人对此有什么新想法吗？我访问过的大多数网站都陷入了死胡同。

下面是我的uploadify 脚本（它与GalleryCMS 一起出现，除了大小限制，我没有做太多改动）：

```
$('#file_upload').uploadify({
'uploader'       : '<?php echo base_url(); ?>flash/uploadify.swf',
'script'         : '<?php echo base_url(); ?>index.php/api/upload/<?php echo $album->id; ?>',
'cancelImg'      : '<?php echo base_url(); ?>images/cancel.png',
'folder'         : '/uploads',
'auto'           : false,
'multi'          : true,
'scriptData'     : { 'user_id' : '<?php echo $user_id; ?>' },
'fileExt'        : '*.jpg;*.jpeg;*.gif;*.png',
'fileDesc'       : 'Image files',
'sizeLimit'      : 209715200, // 200MB
'wmode'          : 'opaque',
'onSelect'       : function(event, ID, fileObj) {
  $('#upload-btn').show();
},
'onCancel'       : function(event, ID, fileObj) {
  $('#upload-btn').hide();
},
'onError'        : function(event, ID, fileObj, errorObj) {

},
'onComplete'     : function(event, ID, fileObj, response, data) {
  var fileName = response;
  $('#upload-btn').hide();
  $('#new-images').show();
  $.ajax({
    url          : '<?php echo base_url(); ?>index.php/album/resize/<?php echo $album->id; ?>/' + response,
    type         : 'POST',
    cache        : false,
    success      : function(response) {
      if (response !== 'failure') {
        var new_image = '<li><img src="<?php echo base_url(); ?>uploads/' + response + '" /><br />' + response + '</li>';
        $('#new-image-list').append(new_image);
      } else {
        var fail_message = '<li>Thumbnail creation failed for: ' + fileObj.name + '</li>';
        $('#new-image-list').append(fail_message);
      }
    },
    error        : function(jqXHR, textStatus, errorThrown) {
      alert('Error occurred when generating thumbnails.');
    }
  });
}
}); 
```

自己查，网址是[GalleryMe](http://www.galleryme.co.cc)

> 用户名：test@test.com
> 
> 密码：12345

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:10:49.050

由于您使用的是共享主机，我很确定您在共享主机配置方面遇到了问题。正如告诉你的 phpinfo(); 您正在使用 Apache/2 和 FastCGI。

我认为您的主机提供商将 FastCGI Apache 模块的 MaxRequestLength 设置得太低。

如果可能，您需要将此块添加到您的 VirtualHost 配置中：

```
# Work around annoying fcgid limitations
<IfModule mod_fcgid.c>
  # 20MB should be enough
  MaxRequestLen 20000000
</IfModule> 
```

如果没有，您必须联系您的供应商或更换供应商。

# delphi - maxint 在哪里定义 - 重复定义？

> ID：13033737
> 
> 赞同：2
> 
> 时间：2012-10-23T15:17:14.743
> 
> 标签：delphi, delphi-xe2

我有一个项目组，其中所有 Win32 程序都具有相同的 ..\PatchLibs 搜索路径。此文件夹包含一个修补过的 System.Win.Ctrl.pas，其中包含：

```
{$IFDEF WIN32}
function _malloc(size: size_t): Pointer; cdecl;
begin
  if (size > MaxInt) then 
  begin                   
     Result := Nil
  end
  else
  begin
     try
        Result := AllocMem(size);
     except
        Result := Nil;
     end;
  end;
end; 
```

[此补丁抑制 midaslib (QC 104337) 中的错误]

问题：

*其中一个*（较小的）项目在“MaxInt”行上给出了 W1023（“比较有符号和无符号类型”）编译器警告，所有其他项目都在没有警告的情况下构建。
所有项目的使用语句或项目文件中都没有 System.Win.Ctrl。

考虑到 Maxint 可能有两个类型化的常量定义，我想在 Maxint 前面加上“正确”的单位名称，但找不到它的定义。
我搜索了所有可用的 c:\program files (x86)\embarcadero\rad studio\9.0\source*.* 文件，但没有找到任何定义。
System.MaxInt 有效，但不会消除警告。
类型转换 Cardinal(MaxInt) 删除了警告，但我仍然更喜欢“完全合格”的解决方案。
（size_t 定义为 ULONG_PTR 定义为 NativeUInt）
我发现 Quality Central 问题 102873、69836 和 53202，但这些引用重复定义 C++ .h 头文件

我对多个定义的假设是否正确？如果是这样，单位前缀应该/应该是什么？最重要的是：为什么我只得到那个项目构建的编译器警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:34:42.173

MaxInt 在系统单元中声明。我很确定这是这里范围内唯一的 MaxInt。您看到的警告是准确的。MaxInt 是有符号的，而 size_t 是无符号的。您应该抑制警告。例如，您可以将 MaxInt 转换为 size_t：

```
if size > size_t(MaxInt) then 
```

这很好，因为 MaxInt 在 size_t 的值范围内。

顺便说一句，我可能会通过挂钩需要修复的函数来处理潜在问题，而不是重新编译整个单元。我个人发现它的侵入性更小，更容易维护。

* * *

> 为什么我只收到一个项目构建的编译器警告？

一些想法：

1.  您只有一个包含该单元的项目。
2.  您在不同的项目中有不同的编译器选项。可能只有一个项目启用了警告，或者只有一个项目启用了该特定警告。
3.  您只有一个定义了 WIN32 的项目。
4.  该文件只编译一次，但多次使用。也许是因为你正在建造。

很难解释你问题的那一部分。无论如何，当您的问题中的代码在启用警告的情况下编译时，您将收到该警告。你真的在比较有符号和无符号。所以你真的需要用我上面提供的方法来抑制警告。

请记住，警告并不意味着您的代码已损坏。抑制该警告不会改变代码的行为。当您看到该警告时，您会分析代码以检查是否存在问题。在这种情况下，代码可以正常工作，您只需要取消警告。

# javascript - IE9 中的多个文件选择并将 FileReference 数据传递给 Javascript

> ID：13033739
> 
> 赞同：1
> 
> 时间：2012-10-23T15:17:19.717
> 
> 标签：javascript, actionscript-3, flash, file-upload, filereference

因此，我使用 javascript 和 jquery 创建了一个 HTML5 XHR 多文件上传器。现在，我希望能够为一次只允许选择一个文件的浏览器（如 Internet Explorer）提供基于 Flash 的回退。

我的问题是，我可以让 Flash 将任何原始文件数据传递给 javascript 吗？

如果我无法通过外部接口调用获取原始文件数据，我是否可以从 Flash 中为 javascript 提供足够的信息以获取文件数据本身？

如果没有这一切，在 IE9 中提供多个文件选择的最佳方式是什么？

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:31:17.583

你应该可以`ByteArray`通过`ExternalInterface`。

见[http://ria.dzone.com/articles/javascript-flash](http://ria.dzone.com/articles/javascript-flash)

# expressionengine - 表达式引擎中包含标签和嵌入 标签有什么区别？

> ID：13033742
> 
> 赞同：6
> 
> 时间：2012-10-23T15:17:25.597
> 
> 标签：expressionengine

表达式引擎的论坛模块在其模板中使用 {include:file} 标签，例如 forum_themes/developer/forum_index/main_forum_list.html：

```
{include:table_heading}
{include:table_rows}
{include:table_footer} 
```

我已经搜索了包含标签文档，但在任何地方都找不到？什么是包含标签以及应该在何时/何地使用它？它特定于讨论论坛模块吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T15:51:55.737

我无法谈论 {include:file} 标记的范围，但在大多数情况下，{embed} 标记是您将在 ExpressionEngine 中用于包含/嵌入其他代码位的标记。

其他替代方案，具体取决于您希望在页面中包含的信息，是[Snippets](http://expressionengine.com/user_guide/templates/globals/snippets.html)、 Global Variables 或对于更复杂的信息[LowVariables](http://gotolow.com/addons/low-variables)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T20:51:32.790

论坛很难定制，文档也很少，但论坛的包含本质上是一个嵌入。

对于自定义您的论坛，我建议您查看使用Devot:ee 上的[Scaffold Theme](http://devot-ee.com/add-ons/scaffold)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-23T17:50:25.880

It should also be noted that {include:file} only work in the forum template code and most standard EE tags (such as the {embed} tag) don't work in the forum templates. Why? I don't know, but dems da rules. :)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-24T01:11:49.377

没有关于 {include:XXX} 标记的文档，因为它仅在论坛模板中使用。

你永远不会在普通的 EE 模板中使用这个标签。在 EE 模板中，您将根据需要使用 {embed="group/template"} 标记或 Snippet。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-07T05:40:34.543

除了相互嵌入模板外，您还可以为模板创建共享布局。布局可以被认为是包装模板或反向嵌入。要使用模板，请使用模板顶部的 {layout=""} 标签：

{layout="template_group/template"}

# ruby - 如何访问 RSpec 文件中的验证错误消息？

> ID：13033749
> 
> 赞同：1
> 
> 时间：2012-10-23T15:17:43.683
> 
> 标签：ruby, ruby-on-rails-3, rspec

我正在为我的第一个 Rails 应用程序编写一些代码，但似乎找不到查找验证错误的最佳方法，以便我可以轻松地将它们放入而无需重复自己。

我想把这个：

```
let(:error_messages) { page.find 'div#error_explanation ul' }
specify { error_messages.should have_content "Name can't be blank" }
specify { error_messages.should have_content "Email can't be blank" }
specify { error_messages.should have_content "Email is invalid" }
specify { error_messages.should have_content "Password can't be blank" }
specify { error_messages.should have_content "Password is too short (minimum is 6 characters)" }
specify { error_messages.should have_content "Email is invalid" } 
```

变成这样：

```
let(:error_messages) { page.find 'div#error_explanation ul' }
specify { error_messages.should have_content "errors.name_blank" }
specify { error_messages.should have_content "errors.email_blank" }
specify { error_messages.should have_content "errors.email_invalid" }
specify { error_messages.should have_content "errors.password_invalid" }
specify { error_messages.should have_content "errors.password_short" }
specify { error_messages.should have_content "errors.email_invalid" } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:07:31.713

您是否已经在测试您的模型验证？如果是这样，道歉。

否则，您应该考虑使用 errors_on 帮助程序并自行测试您的模型，如[rspec 的 relish pages](https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/model-specs/errors-on)中所述。当标记发生变化时，这种方法执行起来会更快，并且不会那么脆弱。

```
describe ValidatingWidget do
  it "fails validation with no name (using error_on)" do
    ValidatingWidget.new.should have(1).error_on(:name)
  end
end 
```

# objective-c - 我什么时候应该在同一个视图控制器中使用多个视图？

> ID：13033754
> 
> 赞同：0
> 
> 时间：2012-10-23T15:17:50.907
> 
> 标签：objective-c, ios, view, uiview, uiviewcontroller

我什么时候应该在同一个视图控制器中创建新视图，什么时候应该创建新视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:22:24.380

以下更多的是指导方针而不是规则。

当你想根据一些参数模块化你的代码时，你需要创建一个新的视图控制器（我是根据功能来做的）。例如。`DashboardViewController`等`SettingsViewController`。

在 a`DashboardViewController`中，我们可以进行很多事情。其中每一个都可能需要一个`view`来表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:23:27.780

这是一个笼统的问题，不知道您要做什么很难告诉您如何创建应用程序。顺便说一下，一个小（和简单）的解释可以是这样的。

控制器必须实现应用程序的逻辑，它们必须“控制”应用程序的特定功能。视图必须显示控制器想要向用户显示的内容。

因此，如果您想创建具有某种逻辑（用户检查/数据加载等）的东西，您必须创建一个控制器，如果您想向用户展示一些东西，您可以创建一个视图。

1 个或 2 个控制器之间的区别取决于您的应用程序，您必须创建一种单一的逻辑使用 1，否则如果您有一个具有不同功能的大型应用程序，则创建 N 个控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:39:54.163

我认为这比客观更主观。在我拥有的一个项目中，每当我需要更改选项卡式导航时，都需要创建一个新控制器，否则我最终会在定义选项卡的 onInit 方法中遇到一堆 if/else。

在其他情况下，它可能就像问自己是否是一个逻辑分组一样简单。例如，我有一个管理添加/编辑/删除用户的 UserController。我应该使用该控制器进行登录/注销/忘记密码，还是应该创建一个 AuthController？就个人而言，我会将它与 AuthController 分开，因为 UserController 的安全性应该是管理员，而 AuthController 允许任何人尝试登录。然后，当用户登录时，您是否为他们的个人资料执行 UserController 或创建 ProfileController 因为再次存在权限差异。任何登录的用户都可以管理他们自己的个人资料，但这并不意味着他们应该可以访问我的 UserController。

但是，您可以将 add/edit/delete/profile/login/logout/forgotPassword 视图放入单个控制器中，并按每个视图处理权限，这不会是“错误的”。只要您将业务逻辑保留在模型中和控制器之外，并将尽可能多的逻辑保留在您的视图之外......那么您就已经领先于曲线并在需要时进行重构不应该太难了。

如果您发现自己在 onInit 中根据正在加载的方法进行初始化时做了很多 if/else 操作……这对我来说是一个信号，表明您可能应该考虑创建一个单独的控制器。

# exception - Erlang - 进程太多

> ID：13033758
> 
> 赞同：3
> 
> 时间：2012-10-23T15:18:10.083
> 
> 标签：exception, concurrency, erlang, process

这些是我在 Erlang 中的第一步，对于这个新手问题，我感到很抱歉进程的数量，例如最大。16？

```
-module(queue_manager).
-export([add_ids/0, add_id/2]).

add_ids() ->
    {ok, Client} = eredis:start_link(),
    do_spawn(Client, lists:seq(1,100000)).

do_spawn(Client, [H|T]) ->
    Pid = spawn(?MODULE, add_id, [Client, H]),
    do_spawn(Client, T);

do_spawn(_, []) -> none.

add_id(C, Id) ->
    {ok, _} = eredis:q(C, ["SADD", "todo_queue", Id]). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:24:35.627

尝试使用 Erlang[`pg2`模块](http://www.erlang.org/doc/man/pg2.html)。它允许您轻松创建进程组并提供 API 来获取组中“最接近”（或随机）的 PI​​D。

以下是`eredis`客户端进程组的示例：

```
-module(redis_pg).

-export([create/1,
         add_connections/1, 
         connection/0,
         connections/0,
         q/1]).

create(Count) ->
    % create process group using the module name as the reference
    pg2:create(?MODULE),
    add_connections(Count).

% recursive helper for adding +Count+ connections
add_connections(Count) when Count > 0 ->
    ok = add_connection(),
    add_connections(Count - 1);
add_connections(_Count) -> 
    ok.

add_connection() ->
    % start redis client connection
    {ok, RedisPid} = eredis:start_link(),
    % join the redis connection PID to the process group
    pg2:join(?MODULE, RedisPid).

connection() ->
    % get a random redis connection PID
    pg2:get_closest_pid(?MODULE).

connections() ->
    % get all redis connection PIDs in the group
    pg2:get_members(?MODULE).

q(Argv) ->
    % execute redis command +Argv+ using random connection
    eredis:q(connection(), Argv). 
```

以下是上述模块的示例：

```
1> redis_pg:create(16).
ok
2> redis_pg:connection().
<0.68.0>
3> redis_pg:connection().
<0.69.0>
4> redis_pg:connections().
[<0.53.0>,<0.56.0>,<0.57.0>,<0.58.0>,<0.59.0>,<0.60.0>,
 <0.61.0>,<0.62.0>,<0.63.0>,<0.64.0>,<0.65.0>,<0.66.0>,
 <0.67.0>,<0.68.0>,<0.69.0>,<0.70.0>]
5> redis_pg:q(["PING"]).  
{ok,<<"PONG">>} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:05:34.290

您可以使用连接池，例如[eredis_pool](https://github.com/hiroeorz/eredis_pool)。[这是一个类似的问题](https://stackoverflow.com/questions/12895448/how-can-i-make-webmachine-and-eredis-work-together/12907226#12907226)，您可能会感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:45:15.090

您可以使用主管启动每个新流程（对于您的示例，您似乎应该使用 simple_one_for_one 策略）：

`supervisor:start_child(SupRef, ChildSpec) -> startchild_ret()`.

然后您可以使用该函数访问进程计数

`supervisor:count_children(SupRef) -> PropListOfCounts`.

结果是形式的proplist

`[{specs,N1},{active,N2},{supervisors,N3},{workers,N4}]`（订单不保证！）

如果您想了解有关活动进程的更多信息，还可以使用

`supervisor:which_children(SupRef) -> [{Id, Child, Type, Modules}]`但是，当主管管理“大量”孩子时，不建议这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:05:04.637

当您实施限制时，您基本上是“靠自己”。有一些工具可以帮助你，但我认为一般的问题是“我如何避免产生太多的进程？” 仍然成立。诀窍是在某处跟踪进程计数。

Erlang 惯用的方法是拥有一个包含计数器的进程。每当您想生成一个新进程时，您都会通过注册对令牌的需求来询问它是否允许这样做。然后，您等待计数过程回复您。

计数过程是一个很好的模块化人，为您维护一个限制。

# c# - 在ac#程序中使用c++11

> ID：13033759
> 
> 赞同：1
> 
> 时间：2012-10-23T15:18:10.810
> 
> 标签：c#, c++, c++11, interop

我正在基于 C# 的主程序中编写一些图形过滤器。
但是 C# 对于 getpixel / putpixel 并不快。
我已经看到了解决方法，在 C#
不安全代码中使用不安全代码也给我一种不安全的感觉，因为我了解安全代码和内存清理的好处。

所以现在我想知道....
在基于 C++ 的单独 dll 中编写这个不安全的代码会更好吗？
但是我从未制作过混合语言程序，所以我很想知道。

*   如何将位图从 C# 传递到 C++ 中的函数我可以设置对 dll 的引用，但我认为这还不够
*   如何将一些返回值和位图再次传递回 c# 主程序

另外，如果我使用另一个编译器编写 c++11 .dll 会不会有问题？主程序用visual studio 2010 expres编写

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:06:47.453

实际上，我正在使用 CUDA 做与您提到的（图形过滤器）完全相同的操作。为了能够从托管代码 (WinForms) 调用 C 函数，我使用了 InteropServices。

假设您在一个解决方案中有 2 个项目 - C++ 库和一些 C# 项目。

要在 C++ 库中声明函数，我使用以下参数：

```
extern "C" int __declspec(dllexport) __stdcall cudaCopyInputData
    (int n, int w, int h, byte* data)
{
    inputBuffer = data;
    bufferLength = n;
    inputWidth = w;
    inputHeight = h;
    useFloatBuffer = 0;
    binaryBufferValid = 0;

    int bufferSize = bufferLength * sizeof(byte);
    int floatBufferSize = bufferLength * sizeof(float);
    int binaryBufferSize = w * h * sizeof(int);

    cudaMalloc((void**)&cudaInputBuffer, bufferSize);
    cudaMemcpy(cudaInputBuffer, inputBuffer, bufferSize, cudaMemcpyHostToDevice);

    cudaMalloc((void**)&cudaFloatBuffer, floatBufferSize);
    cudaMalloc((void**)&cudaBinaryBuffer, binaryBufferSize);

    return 0;
} 
```

为了能够从 C# 项目中使用它，我使用 InteropServices 将此函数作为静态方法导入：

```
[DllImport("CUDA Dll.dll", CharSet = CharSet.Ansi, SetLastError = true, CallingConvention = CallingConvention.StdCall)]
        public static extern int cudaCopyInputData(int n, int w, int h, IntPtr data); 
```

然后，您可以从托管代码中将其用作标准方法。

要将位图数据传递给导入的方法，您可以使用如下内容：

```
BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadWrite, PixelFormat.Format32bppRgb); 
```

然后将 bmpData.Scan0 作为指向位图数据的指针和一些其他参数（如 Width、Height、Stride 或任何您想在 C 函数中确定数据格式的参数）传递。在上面的示例中，每个像素将有 4 个字节（3 个字节 + 1 个虚拟字节），因此处理它很舒服。

要重用 bmp 对象中已处理的数据，您只需在处理后调用：

```
bmp.UnlockBits(bmpData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:25:22.013

如果您使用 C++，那么您也可以使用带有不安全代码的 C#。两者都是不安全的，在 C# 中你仍然不需要关心内存清理。您唯一需要关心的是访问无效指针，这将导致`AccessViolationException`.

```
public unsafe void SwapChannels(Byte[] imageSrc)
{
    fixed (Byte* pImageSrc = imageSrc)
    {
        // Swap channels here
    }
} 
```

我也在我的图像库中使用了不安全的代码。如果你不打算跨平台，你也可以使用 C++/CLI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:26:33.600

有几种方法可以在 C++ 和 C# 之间进行互操作：C++/CLI、COM 和 P/Invoke。

C++/CLI 和 COM 都有可以更好的领域，但我认为不应该使用 P/Invoke，除了一些快速而肮脏的解决方案。

在您的情况下，特别是因为您提到 C++ DLL 是用另一个编译器构建的，我认为 COM 是您最好的选择。

但请注意，使用 C++ 非常类似于在 C# 中使用不安全代码。例如，到处都是指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:25:37.327

[SWIG](http://www.swig.org)允许您轻松包装 C++ 代码并在 c# 中公开类/函数。我用它在 c# 中公开了我的一些图像处理例程，这很容易。你最终得到的类表现为 c# classes，SWIG 生成的包装器处理类型转换（主要）和 P/Invoke 的东西。

swig.org 网站在我写这篇文章的那一刻已经关闭，如果有人知道原因，请发表评论

至于编译器混淆，我对 Mingw 编译的 DLL 有很好的经验。

编辑：您仍然可以访问[项目 sourceforge 页面](http://sourceforge.net/projects/swig/)

# c# - 从注册表中获取值

> ID：13033761
> 
> 赞同：0
> 
> 时间：2012-10-23T15:18:11.743
> 
> 标签：c#, .net, registry

我想检查以下键的值：-

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges\Range1] 
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges\Range2]
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges\Range3]
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges\Range4] 
```

这是必需的，因为当我运行一个名为“securityNT.reg”的 .reg 文件时，该文件是我项目的先决条件，它会更新这些键的值。我知道这些密钥包含受信任站点的值。

我正在使用以下代码来获取这些值：

```
bool flagIESettings = false;
    string strKeyIESettings = @"Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges";
    string valRange1 = "", valRange2 = "", valRange3 = "", valRange4 = "";
    using (Microsoft.Win32.RegistryKey keyIESettings = Registry.CurrentUser.OpenSubKey(strKeyIESettings))
      {
        foreach (string subkey_name in keyIESettings.GetSubKeyNames())
          {
            using (RegistryKey subkey = keyIESettings.OpenSubKey(subkey_name))
             {
               switch (subkey_name)
                 {
                  case "Range1" :
                     if (subkey.GetValue(":Range") != null)
                      {
                         valRange1 = subkey.GetValue(":Range").ToString();
                      }                                
                       break;

                        case "Range2" :
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange2 = subkey.GetValue(":Range").ToString();
                            }                                
                            break;

                        case "Range3":
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange3 = subkey.GetValue(":Range").ToString();
                            }
                            break;

                        case "Range4":
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange4 = subkey.GetValue(":Range").ToString();
                            }
                            break;

                        default:
                            break;
                    }
                }
            }
        }

        if (valRange1 == "10.237.24.165" && valRange2 == "10.237.24.166" && valRange3 == "10.237.24.167" && valRange4 == "10.237.24.168")
        {
            flagIESettings = true;
        } 
```

我正在使用 Registry.CurrentUser 来获取值，`HKEY_CURRENT_USER`但是这个对象（keyIESettings）正在从`HKEY_USERS\S-1-5-20`. 这是我想从中获取值`HKEY_CURRENT_USER`但从 HKEY_USERS\S-1-5-20 获取值的主要问题。

我观察到`HKEY_CURRENT_USER`和`HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014`我的机器上是同步的，可能是因为它是当前用户。如果对象从中获取值，`HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014`那么我的目的就完成了。请让我知道如何从`HKEY_CURRENT_USER`或`HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:27:04.787

你自己说过你*可以*从中获得价值`HKEY_CURRENT_USER`，你只是没有得到你期望/想要的价值。

`HKEY_CURRENT_USER`是注册表中的一个虚拟链接，指向当前登录的用户的键（因此得名）。正如您所指出的，当您登录时，它会“同步”到`HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014`.

`HKEY_USERS\S-1-5-20`是“网络服务”用户（请参阅[此处](http://support.microsoft.com/kb/243330)了解众所周知的 ID 列表）。我猜想您正在将程序作为服务运行（IIS 下的网站或 Windows 服务）。

在这种情况下，您将不会（或至少不应该）有权访问本地用户的注册表配置单元。您需要以您打算编辑的用户（或可能作为本地用户）的身份运行您的应用程序才能访问它。

# asp.net - Page_Load 中 sender 和 EventArgs 的实际使用

> ID：13033779
> 
> 赞同：3
> 
> 时间：2012-10-23T15:18:50.323
> 
> 标签：asp.net

我即将将我所有的 asp.net WebForms 技能迁移到 asp.net mvc。到目前为止，我从来没有觉得需要使用`EventArgs`和`sender`论证，传递给`Page_Load`.

当您利用这些参数时，能否请您指出几个场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:33:12.803

所有事件处理程序都遵循相同的模式，即它们有一个 sender 参数和一个 arguments 参数。

事件的事件处理程序`Load`很少使用其中任何一个，因为您几乎（？）每个表单或控件总是有一个事件处理程序（因此您已经知道哪个对象发送了事件），并且在参数参数。

当您对多个事件使用同一个处理程序时，您使用 sender 参数来找出事件的来源。您将 arguments 参数用于某些事件，其中有一些特定数据发送到事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:23:52.217

你永远不会使用 EventArgs 或 Sender，永远不会使用 Page_Load 方法

因为 MVC 将调用作为操作来管理

解析 POST 的 EventArgs 结果

因此，如果您在旧代码中需要 eventargs 中的任何内容，则在新代码中您应该将其作为 formcollection 过去

# python - 我需要一个合适的 Python 数据结构

> ID：13033782
> 
> 赞同：1
> 
> 时间：2012-10-23T15:18:58.193
> 
> 标签：python, data-structures, python-2.7

这是我要解决的问题：

我有盒子`A`, `B`, `C`, `D`and 有球`a`, `b`, `c`, `d`, `e`, `f`, ... - 每个都在上述盒子之一中。所以我知道，例如， balls 、`a`和are in box 。Balls , , , and are in box等`b``c``d``A``e``j``p``w``B`

我试图根据包含它的盒子为每个球着色，所以我需要一个数据结构来有效地保存和处理这些信息。

我的第一个想法是保持 dict 之类的`{'a':'A', 'b':'A',... 'w' : 'B' ...}`if`a`的值是将`A`他（例如）染成红色，但我不确定这是在这种情况下保持信息的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:40:06.377

另一种方法是保留一个字典，其中盒子作为键，球集作为值：

```
boxes = { 'A' : set('a', 'b', 'c', 'd'), 'B' : set('e', 'j', 'p'), ... } 
```

然后，您可以遍历键并用相同颜色为相应集合中的所有球着色。

```
for box in boxes:
    for ball in boxes[box]:
        color(ball, box) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:58:27.417

什么是有效的取决于你在做什么以及你做的频率。您的问题中没有太多信息可以冒险猜测。

例如，不清楚同一个盒子里的所有球是否都具有相同的颜色。如果是这样，那么您可以将颜色分配给盒子而不是球，以提高空间效率；但是你想让什么变得高效？

如果您展示了一些代码，则可以省去很多任务。

# ios - 无法从 iOS6 中的后台线程调用主线程上的代码

> ID：13033785
> 
> 赞同：0
> 
> 时间：2012-10-23T15:19:02.427
> 
> 标签：ios, multithreading, ios6, nsmanagedobjectcontext

在后台线程上保存托管对象上下文时，我正在监听 NSManagedObjectContextDidSaveNotification 并尝试在主线程上合并它。

但是，当我尝试将请求转发到主线程时，既没有使用也没有执行任何代码

```
[self performSelectorOnMainThread:@selector(executeThisCode:) withObject:saveNotification waitUntilDone:NO]; 
```

也不与

```
dispatch_async(dispatch_get_main_queue(), ^{
    ...execute this code
}); 
```

奇怪的是，这一切都适用于 iOS 5.1 和 iOS 5.0，但不适用于 iOS 6。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:47:39.700

你首先检查你是否已经在主线程中？如果`executeThisCode`您在调用`performSelectorOnMainThread`. 像这样的东西：

```
- (void) executeThisCode: (NSNotification*) notification{
    if (![NSThread isMainThread]) {
       [self performSelectorOnMainThread:@selector(executeThisCode:) 
                                 withObject:notification 
                              waitUntilDone:YES];
       return;
    }

    // merge logic goes here and executes on the main thread
} 
```

# php - Facebook PHP API 登录窗口弹出

> ID：13033790
> 
> 赞同：9
> 
> 时间：2012-10-23T15:19:13.963
> 
> 标签：php, facebook, api, login, sdk

我正在使用最新版本的 facebook 的 php api sdk。我正在尝试使登录按钮激活弹出窗口，而不是打开整个页面。我尝试使用本教程：[http ://thinkdiff.net/facebook/create-facebook-popup-authentication-window-using-php-and-javascript/](http://thinkdiff.net/facebook/create-facebook-popup-authentication-window-using-php-and-javascript/)

弹出窗口有效，但是当我登录时，弹出窗口没有关闭，网站只是在弹出窗口中打开。

有人知道我登录后需要做什么才能关闭弹出窗口吗？

这是我用于生成登录 url 的 php 代码：

```
<?php
    $loginUrl = $me_on_facebook->getLoginUrl(array(
        'display' => 'popup',
        'next' => $config['baseurl'],
        'redirect_uri' => $config['baseurl'],
        'scope' => 'email'
    ));
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T19:33:10.710

当弹出登录框加载并且用户登录/连接时，该框然后加载带有 ?code=XXX 附加到 url 的站点。所以对于该站点，我添加了一个 php if 语句

```
<?php
    if (isset($_REQUEST['state']) && isset($_REQUEST['code'])) {
        echo "<script>
            window.close();
    window.opener.location.reload();
        </script>";
} else {
        // load page
    }
?> 
```

这样做是关闭弹出窗口并重新加载启动弹出窗口的原始页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:23:08.827

您应该使用 Facebook Javascript SDK 并使用 Javascript 函数 FB.login() 授权用户。教程在这里[http://developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)

# ssh - 如何使 ssh-add 从文件中读取密码？

> ID：13033799
> 
> 赞同：42
> 
> 时间：2012-10-23T15:19:34.383
> 
> 标签：ssh, ssh-agent

我正在尝试添加一个密钥`ssh-agent`并想`ssh-add`从我正在使用的密钥文件中读取密码。这怎么可能？

如何从 shell 脚本自动执行此过程？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-23T15:45:29.010

根据您的发行版和 ssh-add 的版本，您可能能够或不使用`-p`以这种方式从标准输入读取密码的 ssh-add 选项：

```
cat passfile | ssh-add -p keyfile 
```

如果这不起作用，您可以使用[Expect](http://en.wikipedia.org/wiki/Expect "预计")，一个 Unix 工具，使交互式应用程序非交互式。你必须从你的包管理器安装它。

我已经为您编写了一个工具。只需将内容复制到名为*ssh-add-pass*的文件中并对其设置可执行权限 ( `chmod +x ssh-add-pass`)。您还可以将其复制到 /usr/bin 或 /usr/local/bin 以便从 $PATH 搜索中访问。

```
#!/bin/bash

if [ $# -ne 2 ] ; then
  echo "Usage: ssh-add-pass keyfile passfile"
  exit 1
fi

eval $(ssh-agent)
pass=$(cat $2)

expect << EOF
  spawn ssh-add $1
  expect "Enter passphrase"
  send "$pass\r"
  expect eof
EOF 
```

用法很简单：`ssh-add-pass keyfile passfile`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-10-05T18:21:17.333

类似于 kenorb 的答案，但不将秘密保存在文件中：

```
$ SSH_ASKPASS=/path/to/ssh_give_pass.sh ssh-add $KEYFILE <<< "$KEYPASS" 
```

其中 ssh_give_pass.sh 是：

```
#!/bin/bash
# Parameter $1 passed to the script is the prompt text
# READ Secret from STDIN and echo it
read SECRET
echo $SECRET 
```

如果您在 $KEYPASSFILE 中有秘密，请先将其读入变量

```
KEYPASS=`cat $KEYPASSFILE` 
```

还要确保 ssh_give_pass.sh 不能被未经授权的用户编辑 - 很容易记录通过脚本传递的所有秘密。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-11T18:03:08.317

以下是不支持系统的一些解决方法`-p`：

```
$ PASS="my_passphrase"
$ install -vm700 <(echo "echo $PASS") "$PWD/ps.sh"
$ cat id_rsa | SSH_ASKPASS="$PWD/ps.sh" ssh-add - && rm -v "$PWD/ps.sh" 
```

`ps.sh`基本上你的脚本在哪里打印你的密码。见：`man ssh-add`。

为了使其更安全（不要将其保存在同一个文件中），请使用`mktemp`生成一个随机私有文件，使其可执行（`chmod`）并确保它在执行后将密码短语打印到标准输出。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-21T22:27:31.143

在我的 Ubuntu 系统上，没有一个答案有效：

*   `ssh-add`不支持该`-p`选项。
*   `ssh-add`忽略 SSH_ASKPASS，坚持在控制终端上提示输入密码。
*   我想避免安装额外的包，尤其是`expect`.

在我的案例中起作用的是：

```
password_source | SSH_ASKPASS=/bin/cat setsid -w ssh-add keyfile 
```

password_source 并不是一个真正的程序：它只是表示将密码短语提供给`ssh-add`. 就我而言，它是一个执行`setsid`密码短语并将其写入其标准输入的程序。如果您将密码保存在文件中，您有责任进行简单的修改：我不会让您伤害自己。

`setsid`已安装，并分离控制终端，这样`ssh-add`就不会尝试使用它来提示输入密码。`-w`导致`setsid`等待`ssh-add`退出并使其返回代码可用。`/bin/cat`与 Ray Shannon 提供的脚本具有相同的效果，但使用标准工具而不是使用脚本复制其功能。

# php - 如何在 php 和 mysql 数据库中正确进行字符编码

> ID：13033801
> 
> 赞同：4
> 
> 时间：2012-10-23T15:19:37.880
> 
> 标签：php, mysql, character-encoding, phpmyadmin

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

搜索高和低的解决方案。在发布问题之前，我已经尝试了很多变体。

什么要求名称在 phpMyAdmin 和 html 页面中显示相同？这甚至可以实现吗？

**编辑1：**这似乎是一个mysql问题。为什么？因为 php 生成的 html 页面总是会显示正确的字符。此时只有数据库显示不正确。

**编辑2：**澄清。使用下面的代码片段和图像中显示的原始设置，

1.  输入 João 并提交
2.  João 显示在数据库中
3.  重新加载后若昂显示

添加`mysqli_query ( $link, 'SET NAMES utf8' )`

1.  输入 João 并提交
2.  João 显示在数据库中
3.  重新加载后显示 Jo�o

结束编辑 2

在 mysql 数据库中，用 phpMyAdmin 查看： ![数据库结构](../Images/781977e673a8051afa9fb20030044f87.png)

这些项目出现在数据库中是这样的：（我已经修改了第一个 João 以使其在数据库中显示正确）

![2 个同名条目的 phpMyAdmin 视图](../Images/b4e4fd362ce033d1cb7a184b994a4124.png)

并且在带有编码设置的 html 页面中，名称看起来像（顺序相反，修改后有黑色菱形），

![出现在 html 页面中](../Images/2529635863eb3d2ea1b7c1cf5bc11580.png)

编码：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

我已经尝试将列排序规则更改为 utf8_bin、utf8_general_ci、utf8_unicode_ci，任何一方都没有改变。还将文档 (BBEdit) 从 UTF-8 更改为 UTF-8（带 BOM）、ISO Latin 1 和 Windows Latin 1。其中一些创建了更多的黑色菱形，使问题变得更糟。（在图像中设置为 UTF-8）我什至尝试用编码的等价物 preg_replace ã、é 等。

简短的故事是，在页面上输入了 João（上面的内容类型），João 在数据库中，并且 João 在刷新时来到 html 页面。

寻找想法。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:33:42.913

字符集问题通常很难弄清楚。基本上，您需要确保满足以下所有条件：

*   数据库*连接*使用 UTF-8
*   数据库*表*使用 UTF-8
*   数据库表中的各个*列*使用 UTF-8
*   数据实际上以 UTF-8 编码正确*存储*在数据库内（如果您从错误的来源导入，或者更改了表或列排序规则，则通常不是这种情况）
*   该网页正在*请求*UTF-8
*   Apache*提供*UTF-8

这是处理该列表的一个很好的教程，从头到尾：[https ://web.archive.org/web/20110303024445/http://www.bluebox.net/news/2009/07/mysql_encoding/](https://web.archive.org/web/20110303024445/http://www.bluebox.net/news/2009/07/mysql_encoding/)

听起来您的问题特别是您有双重编码（或三重编码）字符，可能来自更改字符集或导入具有错误字符集的已编码数据。在上面的教程中有一个完整的部分来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:26:21.993

确保您的数据库连接也使用 UTF-8。尝试将下面的行放在页面顶部，

```
mysql_query("SET NAMES utf8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:42:29.740

默认 PHP 讨厌 UTF8。确保您使用的是[mbstring](http://php.net/manual/en/book.mbstring.php)函数而不是通常的内置字符串函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:57:28.713

确保您的 html 页面以及参与 AJAX 数据交换的脚本使用正确的 HTTP 标头提供服务，包括

```
Content-Type: text/html; charset=UTF-8 
```

由于浏览器可能会忽略 html 端编码设置

# python - 导入 win32com.client 错误

> ID：13033803
> 
> 赞同：1
> 
> 时间：2012-10-23T15:19:41.193
> 
> 标签：python, pywin32

当我尝试：

```
from win32com.client import Dispatch 
```

在 Python 中我得到错误：

> 回溯（最后一次调用）：文件“”，第 1 行，从 win32com.client 导入调度文件“C:\Users\Lynn\Documents\2e master\masterproef\python\lib\site-packages\win32com__init__.py” , 第 5 行, 在 import win32api, sys, os ImportError: No module named win32api

我已经尝试将文件复制到并且没有`pythoncom27.dll`帮助。`pythonwintypes27.dll``python\lib\site-packages\win32``python\lib\site-packages\win32com`

我已经安装`pywin32-217.win32-py2.7.‌exe`了`http://www.lfd.uci.edu/~gohlke/pythonlibs/`

我也已经搜索过重复的文件，但也没有成功。

我之前安装了其他软件包（numpy，...），它们都运行良好。

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:03:49.657

我已经解决了我的问题:-) 经过更多的谷歌搜索后，我终于找到了一些有用的东西：

[http://www.python-forum.org/pythonforum/viewtopic.php?f=15&t=17163&p=156600](http://www.python-forum.org/pythonforum/viewtopic.php?f=15&t=17163&p=156600)

当我运行带有“选择修复兼容性问题”的 .exe 文件时，一切都神奇地起作用了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T05:11:41.983

这为我解决了这个问题

[https://pypi.python.org/pypi/pypiwin32](https://pypi.python.org/pypi/pypiwin32)

```
pip install pypiwin32 
```

这将在 virtualenv 或 tox 等中工作

# asp.net-mvc-3 - 使用 Razor "RenderPartial" 和 "RenderBody"，body 渲染在顶部

> ID：13033808
> 
> 赞同：0
> 
> 时间：2012-10-23T15:19:52.600
> 
> 标签：asp.net-mvc-3, layout, razor, renderpartial

我正在开发一个带有*Header*、*Main Menu*、*Body*和*Footer*部分的网站。
我正在使用网页基础布局`_Layout.cshtml`，我使用该`RenderPartial()`方法呈现*Header、Main Menu*和*Footer*。对于身体，我使用的是`RenderBody()`方法。
在`_Layout.cshtml`我有以下代码：

```
<body style="margin: 0">
<form name="FormStart" method="post" action="Start.aspx" id="FormStart">
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
    <tr>
        <td valign="top" width="1px"></td>
        <td valign="top" align="center" width="972" bgcolor="#FFFFFF">
            <table id="Table1" cellspacing="0" cellpadding="0" width="972" border="0" bordercolor="yellow">
                 <!-- HEADER -->
                 @{Html.RenderPartial("_Header");}

                 <!-- MAIN MENU -->
                 @{Html.RenderPartial("_Menu");}

                 <!-- CONTENT -->
                 @RenderBody()
             </table>
             <br />
             <!-- FOOTER -->
             @{Html.RenderPartial("_Footer");}
         </td>
    </tr>
</table>
</form>
</body> 
```

另一方面，我使用以下代码创建了一个非常简单的视图

```
@{
    ViewBag.Title = "Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h3>You just clicked </h3><h1>NATURAL ALOE SECTION</h1> 
```

问题是，这个简单视图的内容显示在页面的最顶部，而其余部分显示在底部。它不是显示**HEADER-MAINMENU- *my site* -FOOTER**而是按***我的站点*-HEADER-MAINMENU-FOOTER**的顺序显示。

我对 MVC 很陌生；我一直[在这里](https://stackoverflow.com/questions/6018362/how-to-layout-a-page-with-mvc3-razor)阅读有关在我的主布局站点中使用 RenderSection 而不是 RenderPartial 的可能性，但这可能是它以这种方式显示的原因吗？可能我离基地很远，任何建议都非常感谢。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:23:18.267

这*可能*是因为*您**在*. _ `<table>`至少*正文*似乎缺少行和单元格标记 ( `<tr><td>...</td></tr>`)。因此，您的表格中没有可能导致各种渲染问题的行和单元格。

如果您不渲染到表格中并使用 CSS 进行布局，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:08:06.860

这看起来与您正在做的 MVC 方面无关 - 看起来非常好。

问题在于您的 HTML。我建议使用其中一种浏览器开发工具查看该站点（例如，在 Chrome 或 IE 中打开您的站点并按 F12） - 您可以使用这些功能来检查页面上的视觉元素与 HTML 的关系. 这些工具对于 MVC 程序员来说是无价的。

不鼓励使用表格来控制网页的布局，而是使用 css 进行布局。您可以通过 Google 找到一些基本的 css 布局模板以开始使用。

# dart - 如何存储输入结果（webkitdirectory）以供以后使用？

> ID：13033816
> 
> 赞同：4
> 
> 时间：2012-10-23T15:20:12.990
> 
> 标签：dart, html5-filesystem

我想允许用户选择一个目录（我在其中解析一些文本文件）并将其存储在同一个客户端`result(List<File>)`的`PERSISTENT`存储中，这样当用户返回时，无需再次选择相同的目录。

在会话期间选择目录（通过`<input webkitdirectory="..." />`）然后访问目录并解析文件已经可以正常工作，但我不知道我应该保存什么样的数据以便以后检索它。我已经尝试过使用 `window.webkitResolveLocalFileSystemURL()`但到目前为止还没有成功......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:01:43.857

好的，所以你正在使用类似的东西：

```
<input type="file" id="file-input" webkitdirectory="" directory=""> 
```

这允许用户上传目录。粗略地说，这是获取上传文件列表的代码：

```
query("#file-input").on.change.add((e) {
  print(e.target.files);
}); 
```

听起来你已经弄清楚了那部分。

真的，你只是得到一个文件列表。我查看了 e.target，我认为其中没有与目录本身相关的任何内容。例如，我没有看到有关目录名称的任何信息，而且您也不会突然拥有对该目录的写入权限。您也无法在用户下次加载页面时从该目录上传文件，而无需再次选择该目录。

但是，您可以做的是从该目录上传文件并使用本地文件存储在本地保存这些文件的*副本。*

也可以看看：

*   “使用 HTML5 文件系统 API”p. 20-21
*   [https://github.com/dart-lang/dart-html5-samples/tree/master/web/file](https://github.com/dart-lang/dart-html5-samples/tree/master/web/file)
*   [如何在我自己的代码中使用 Google Chrome 11 的上传文件夹功能？](https://stackoverflow.com/questions/5826286/how-do-i-use-google-chrome-11s-upload-folder-feature-in-my-own-code)

顺便说一句，我知道我无法完全实现您想要的，但如果您同意我的回答，请接受。如果我在 Stack Overflow 上回答 100 个问题，我的老板答应给我买一只小狗；）

# java - 使用 .bin 保存/加载 HashMap

> ID：13033817
> 
> 赞同：0
> 
> 时间：2012-10-23T15:20:19.203
> 
> 标签：java, serialization, hashmap, objectoutputstream, objectinputstream

```
public Map<String, BarrackData> barrack = new HashMap<String, BarrackData>();
SavingData.save(barrack, "barrack.bin"); // save
barrack = (Map<String, BarrackData>)SavingData.load("barrack.bin"); // load
// BarrackData contains 3 int's and 1 String.

public static void save(Object obj, String path) throws Exception {
    ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(path));
    oos.writeObject(obj);
    oos.flush();
    oos.close();
}

public static Object load(String path) throws Exception {
    ObjectInputStream ois = new ObjectInputStream(new FileInputStream(path));
    Object result = ois.readObject();
    ois.close();
    return result;
} 
```

如何保存/加载 HashMap。
我使用这种方法，但它似乎有问题。
barrack.bin 包含一些我无法弄清楚的错误。
（java.io.NotSerializableException java.io.ObjectStreamException IOException suppressExceptionst）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:28:07.990

您的课程`BarrackData`似乎没有实现`java.io.Serializable`。它应该如下所示：

```
public class BarrackData implements Serializable {
   ... 
```

# jasper-reports - JasperReports 参数在 iReport 中有效，但在 JasperReports Server (II) 上失败

> ID：13033818
> 
> 赞同：0
> 
> 时间：2012-10-23T15:20:20.067
> 
> 标签：jasper-reports, jasperserver

[我有一个与[JasperReport parameters works in iReport but failed on JasperServer]](https://stackoverflow.com/questions/9459409/jasperreport-parameters-works-in-ireport-but-fails-on-jasperserver)帖子中描述的问题非常相似的问题。

该报告使用*预览选项在**iReport*环境中正常工作，但在*JasperReports Server*中失败

 **评论表明*iReport*不会在*JR Server中创建**InputControl*。所以我验证了服务器包含正确的*InputControl*（这显然解决了他们的问题）。

 **输入控件称为*sk 串行选择*：

```
ID: ic_sk_serial
Name: sk serial selection
Type: Single Select Query
Mandatory: false
Read Only: false
Visible: true
Query resource: 
    From repository (pointing to *q_sk_serial* see below)
Value and Visible columns:
    Value column: id
    Visible query columns: serialnr 
```

*名为q_sk_serial*的输入控件查询（使用字母数字序列号列表填充输入控件，项目是唯一的）：

```
select id,serialnr from "public"."serials" order by serialnr; 
```

参数名称：

```
ic_sk_serial 
```

报告查询：

```
select * from "public"."datas" datas where datas."serialnr" like $P{ic_sk_serial} 
```

就我而言，输入控件似乎在两种环境中都能正常工作（在*iReport*预览和*JasperServer*中）：我填充了来自同一数据库的项目列表；我在*iReport*中看到了该*下拉列表*，但在*JR Server*中也看到了。

 **在*iReport*中，下拉列表会在报告参数中返回正确的选定值，从而生成正确的报告。在*JasperReports Server*中，我只收到*“报告为空”*消息。*所以我倾向于认为报告参数没有在JasperServer*中正确传递。

硬编码“输入控制”输出值，显示预期报告。

**旁注**：我在与*JasperReports Server 4.5.0*兼容的模式下使用*iReport 4.7.1*。

 *我很高兴听到有人遇到同样的问题吗？

如何在*JR Server*中进一步调试报告执行？

兼容模式是否容易导致该问题？

输入参数类型呢？我使用返回*字符串*的查询。但是我的输入数据类型是*文本*（与字符串最接近）。我的参数类型是*java.lang.string*。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:35:38.007

其实这是一个简单的错误：

我刚刚发现：

```
value column: id 
```

应该

```
value column: serialnr 
```

不过，我不明白为什么报告在预览模式下工作？这么大的错误应该不会在预览上失败吧？

无论如何感谢大家导致我的错误;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T15:58:39.967

在我看来，jasper 报告中有两种类型的参数，包括：报告参数和数据集参数。

首先，您必须创建两个参数，然后将 Dataset 的一个映射到 Report 的一个。

我遇到了同样的问题，因此解决了我的问题。*******

# python - while循环等待输入python

> ID：13033820
> 
> 赞同：0
> 
> 时间：2012-10-23T15:20:22.867
> 
> 标签：python, input, while-loop, pygame

我对python中的while循环有疑问。我想制作一个在特定时间执行while循环的程序。我想添加一个额外的功能，即在程序运行时，可以通过按随机键来更改某个变量。

```
 from time import sleep
   import time
   i=0
   a=0
   while i<10:
       i=i+1
       i=i+a
       a=a+1
       time.sleep(1)
      print i 
```

我想通过按任意键将变量a重置为0。如果没有按下任何按钮，循环应该继续不变。我应该添加什么命令？

谢谢编辑：我试过了：

```
import pygame
from pygame.locals import *
import time

i=0
a=0
pygame.init()
while i<10:
    pygame.event.get()
    i=i+a
    print i
    keys = pygame.key.get_pressed()
    if keys[K_ESCAPE]:
               i=0
    i=i+1
    time.sleep(1)
 pygame.quit() 
```

但是现在当我按下按钮时什么也没有发生。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:38:45.720

你需要的是一个非阻塞输入函数

```
while i<10:
    keys = pygame.key.get_pressed()
    etc
    ... 
```

pygame 内置了各种事件的东西，所以不需要自己做所有艰苦的线程工作。

如果这对您不起作用，请查看：[http ://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/](http://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:20:01.930

[你可以使用curses。优秀的文档在这里： http](http://docs.python.org/dev/howto/curses.html#user-input) ://docs.python.org/dev/howto/curses.html#user-input

# iphone - 当应用程序在后台时，日历的 requestAccessToEntityType 被停用时崩溃

> ID：13033821
> 
> 赞同：1
> 
> 时间：2012-10-23T15:20:28.810
> 
> 标签：iphone, calendar, ios6

我的应用需要访问设备上的日历数据库。对于 ios6，我在应用程序首次运行时请求许可，如果允许，一切正常。但是，如果应用程序在后台并且用户关闭应用程序的权限，我的代码会崩溃并跳转到主循环并在以下位置停止：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

任何想法如何解决这个问题。

感谢

礼萨

进一步补充：

这是崩溃的堆栈跟踪

```
Thread 1, Queue : com.apple.main-thread
#0  0x33269eb4 in mach_msg_trap ()
#1  0x3326a04c in mach_msg ()
#2  0x3525a6c6 in _GSSendEvent ()
#3  0x35259510 in GSSendEvent ()
#4  0x370e9f28 in _sendPendingApplicationSuspendEvent ()
#5  0x370e34aa in _UIApplicationHandleEvent ()
#6  0x3525b5a2 in _PurpleEventCallback ()
#7  0x3525b1d2 in PurpleEventCallback ()
#8  0x34580172 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#9  0x34580116 in __CFRunLoopDoSource1 ()
#10 0x3457ef98 in __CFRunLoopRun ()
#11 0x344f1ebc in CFRunLoopRunSpecific ()
#12 0x344f1d48 in CFRunLoopRunInMode ()
#13 0x3525a2ea in GSEventRunModal ()
#14 0x37137300 in UIApplicationMain ()
#15 0x000aede4 in main at /Users/..../appName/main.m:16

Thread 3, Queue : com.apple.libdispatch-manager
#0  0x3326a648 in kevent64 ()
#1  0x389934f0 in _dispatch_mgr_invoke ()
#2  0x38985df8 in _dispatch_mgr_thread$VARIANT$up ()

Thread 4, Queue : (null)
#0  0x3327ad98 in __workq_kernreturn ()
#1  0x3862ccfa in _pthread_workq_return ()
#2  0x3862ca16 in _pthread_wqthread ()
#3  0x3862c8a4 in start_wqthread ()

Thread 5 WebThread, Queue : (null)
#0  0x33269eb4 in mach_msg_trap ()
#1  0x3326a04c in mach_msg ()
#2  0x34580044 in __CFRunLoopServiceMachPort ()
#3  0x3457eda2 in __CFRunLoopRun ()
#4  0x344f1ebc in CFRunLoopRunSpecific ()
#5  0x344f1d48 in CFRunLoopRunInMode ()
#6  0x352d5a74 in RunWebThread(void*) ()
#7  0x38637310 in _pthread_start ()
#8  0x386371d8 in thread_start ()

Thread 9, Queue : (null)
#0  0x3327ad98 in __workq_kernreturn ()
#1  0x3862ccfa in _pthread_workq_return ()
#2  0x3862ca16 in _pthread_wqthread ()
#3  0x3862c8a4 in start_wqthread ()

Thread 10, Queue : (null)
#0  0x3327ad98 in __workq_kernreturn ()
#1  0x3862ccfa in _pthread_workq_return ()
#2  0x3862ca16 in _pthread_wqthread ()
#3  0x3862c8a4 in start_wqthread () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:32:20.320

如果我在更改相应设置时处于调试过程中，我也会遇到同样的问题。

虽然我认为因为我们收到 SIGKILL(not SIGABRT) 这意味着这是预期的行为。

基本上操作系统中的某些内容发生了变化，并且所有依赖于更改的应用程序都应该重新启动。至少我是这么看的。

# c# - 日期选择器未显示在浏览器中

> ID：13033823
> 
> 赞同：1
> 
> 时间：2012-10-23T15:20:32.820
> 
> 标签：c#, c#-4.0, razor, telerik, asp.net-mvc-4

我的代码：

```
@using Telerik.Web.Mvc.UI;
@using Telerik.Web.UI;

@{
    ViewBag.Title = "Home Page";
}
<script type="text/javascript" src="~/Scripts/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.8.11.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.8.20.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.min.css"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.css"></script>

<script type="text/javascript">
    console.log($)
</script>
@(Html.Telerik().DatePicker()
    .Name("DatePickerDOB")
    .HtmlAttributes(new { style = "width: 140px; " })
)

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
                To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">
                    http://asp.net/mvc</a>. The page features <mark>videos, tutorials,
                        and samples</mark> to help you get the most from ASP.NET MVC. If you have
                any questions about ASP.NET MVC visit <a href="http://forums.asp.net/1146.aspx/1?MVC"
                    title="ASP.NET MVC Forum">our forums</a>.
            </p>
        </div>
    </section>
}
<h3>We suggest the following:</h3>
<ol class="round">
    <li class="one">
        <h5>Getting Started</h5>
        ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
        enables a clean separation of concerns and that gives you full control over markup
        for enjoyable, agile development. ASP.NET MVC includes many features that enable
        fast, TDD-friendly development for creating sophisticated applications that use
        the latest web standards. <a href="http://go.microsoft.com/fwlink/?LinkId=245151">Learn
            more</a></li>
    <li class="two">
        <h5>Add NuGet packages and jump start your coding</h5>
        NuGet makes it easy to install and update free libraries and tools. <a href="http://go.microsoft.com/fwlink/?LinkId=245153">
            Learn more</a></li>
    <li class="three">
        <h5>Find Web Hosting</h5>
        You can easily find a web hosting company that offers the right mix of features
        and price for your applications. <a href="http://go.microsoft.com/fwlink/?LinkId=245157">Learn
            more</a></li>
</ol> 
```

**当我单击 datepicker 文本字段时，我不知道我需要做些什么来显示 DatePicker。**请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:57:16.773

没什么不好的

```
@(Html.Telerik().DatePicker()
    .Name("DatePickerDOB")
    .HtmlAttributes(new { style = "width: 140px; " })
) 
```

它在我的项目中运行良好（尽管单击图标时会打开日历，而不是文本框，但我认为此时这实际上不是您的问题）。

检查以确保

```
@(Html.Telerik().ScriptRegistrar() 
```

正在被调用。通常这是在 _Layout 中，但可以使用 Telerik 控件直接放入文件中。

附带说明（我认为这不会导致您的问题，但肯定没有任何帮助），这些行是错误的：

```
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.min.css"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.9.0.custom.css"></script> 
```

.css 文件不是脚本。应该像这样引用它们：

```
<link href="~/Scripts/jquery-ui-1.9.0.custom.min.css" rel="stylesheet" type="text/css"/> 
```

而且您似乎实际上并没有在此页面上使用任何 jQuery，因此您可能不需要导入所有这些脚本和 css 文件。Telerik 使用自己的 jQuery 脚本，这就是脚本 Registrar 的用途。

# java - 静态初始化程序块中的多线程代码产生死锁

> ID：13033824
> 
> 赞同：-2
> 
> 时间：2012-10-23T15:20:33.087
> 
> 标签：java, multithreading, static

我有一个需要提供快速分类服务的类。例如，我想编写像“classify("Ac Kd Kh 3c 3s")”这样快速返回 TWO_PAIR 的代码。（这不是应用程序，但你得到了 jist）

因为我需要快速分类，所以我想预先计算并存储一个查找表，其中列出了所有可能输入的分类输出。为了节省时间，我想并行化这个预计算。但是，尝试从第二个线程使用“classifySlowly”会产生死锁。

```
public class Classifcation Service {
  enum CLASS {TYPE_A, TYPE_B, ...};

  static CLASS[] preComputedClassLookUpTable;

  static {
    preComputedClassLookUpTable = constructLookUpTableInParallel();
  }

  //Note: using this method from with constructLookUpTableInParallel causes deadlock
  private static CLASS classifySlowly(Object classifyMe) {
    //do time intensive work to classify the input
    // -- uses no other methods from this class
    return classification;
  }

  public static CLASS classify(Object classifyMe) {
    //use the lookup table to do a quick classification
    return classification;
  }   
} 
```

所以我的问题是：有没有办法从静态初始化程序块中预先计算并行中的这个查找表？

我看到的唯一（差）选择是从：

```
preComputedClassLookUpTable = constructLookUpTableInParallel(); 
```

到：

```
preComputeClassLookUpTable = loadLookUpTableFromFile();
if(preComputedClassLookUpTable == null) {
  System.out.println("WARNING:  Construction incomplete, Must call computeAndSaveLookUpTableFile();}
} 
```

* * *

我认为这太多了，但这里是constructLookUpTableInParallel的实现

```
private static CLASS[] constructLookUpTableInParallel() {

  //build a collection of Runnables by iterating over all possible input Objects
  //wrap each possible input in an anonymous Runnable that calls classifySlowly.

  //submit the collection of Runnables to a new ExecutorService
  //process runnables...
  //shutdown executor service      
} 
```

////////措辞不好的原始问题结束 ///////////

工作得有点干净的解决方案是将classifySlowly(ObjectclassifyMe) 和classify(ObjectclassifyMe) 方法分成两个不同的类。

这将允许包含“公共静态 CLASS 分类快速（对象分类我）”的（第二个）类需要使用分类慢速方法时完全加载包含“公共静态类分类快速（对象分类我）”的（第一个）类. 现在，第二个静态初始化块不需要任何自己的静态方法，它可以完全并行化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:46:16.823

“所以我的问题是：有没有办法从静态初始化程序块中预先计算并行中的这个查找表？”

是的，几乎可以肯定有办法。只需新建数组并为每个数组元素启动一个 Runnable。给每个 Runnable 对数组的引用，并索引它正在计算的内容，然后让它在没有锁定的情况下进行计算，然后在将结果分配给数组元素时锁定。

注意/免责声明：此答案基于问题中给出的相当不完整的信息...

# string - 使用 unix make 检查子字符串

> ID：13033826
> 
> 赞同：1
> 
> 时间：2012-10-23T15:20:33.817
> 
> 标签：string, unix

[在UNIX make](http://frank.mtsu.edu/~csdept/FacilitiesAndResources/make.htm)中编码，我写过：

```
cat $ sString | grep sSubstring > sResult 
```

所以我想检查是否`sString`包含`sSubString`，如果是，将结果放入`sResult`.

背景：我已将文件的内容放入`sString`- 如果文件中`sSubString`存在，则`sResult`包含文件的每一行，其中包含`sSubString`.

这`sSubString`在`sString`. 如果不是，我得到[Error Code 1](http://tldp.org/LDP/abs/html/exitcodes.html)。

我该如何正确处理？完整的代码是：

```
cat $ sString | grep sSubstring > sResult
if [ -s sResult -gt 0 ];then \
(echo "substring present" ) \
else (echo "substring not present" ) ;fi 
```

*（使用错误代码，我永远不会到达* `else` *。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:36:27.847

要检查字符串中是否存在特定的子字符串，可以使用“findstring”函数。更多信息在这里：[http](http://www.gnu.org/software/make/manual/html_node/Text-Functions.html) ://www.gnu.org/software/make/manual/html_node/Text-Functions.html 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:30:42.090

听起来你可能需要这个

```
cat $ sString | { grep sSubstring || true; } > sResult 
```

[请参阅此解决方案](https://stackoverflow.com/questions/6550484/avoid-grep-returning-error-when-input-doesnt-match)。问题是当`grep`没有找到任何东西时，它会返回一个非零退出代码。`make`然后会认为这是一个错误。因此，您只需确保命令始终返回零退出代码，`or`方法是将退出代码`grep`的退出代码与`true`. 的退出代码`true`始终为 0。

# c# - ListView 在应包含数据的选定项目上返回 null

> ID：13033827
> 
> 赞同：0
> 
> 时间：2012-10-23T15:20:33.433
> 
> 标签：c#, listview, windows-runtime

我有从 Flickrs Rest 服务中获取数据并填充 ListView 的代码。此代码工作正常，当我运行我的应用程序时，我可以搜索照片并显示它们的列表。但是，我想然后获取单个照片数据，但是当我尝试从 ListView 访问此数据时，它完全是空的（我已对其进行了调试，并且仅包含空条目）。我在 C# 方面没有很多经验，所以无论如何都可以告诉我为什么我会得到空结果？

```
 private async void ParseFlickrResponse(HttpResponseMessage response)
    {

        XDocument xml = XDocument.Parse(await response.Content.ReadAsStringAsync());          
        var photos = from results in xml.Descendants("photo")
                     select new FlickrImage
                     {
                         ImageId = results.Attribute("id").Value.ToString(),
                         FarmId = results.Attribute("farm").Value.ToString(),
                         ServerId = results.Attribute("server").Value.ToString(),
                         Secret = results.Attribute("secret").Value.ToString(),
                         Title = results.Attribute("title").Value.ToString()
                     };

        FlickrListView.ItemsSource = photos;

    } 
```

**已编辑**

当前代码：

```
enter code here: 
```

私有异步无效 ParseFlickrResponse（HttpResponseMessage 响应）{

```
 XDocument xml = XDocument.Parse(await response.Content.ReadAsStringAsync());          
        var photos = from results in xml.Descendants("photo").ToList()
                     select new FlickrImage
                     {
                         ImageId = results.Attribute("id").Value.ToString(),
                         FarmId = results.Attribute("farm").Value.ToString(),
                         ServerId = results.Attribute("server").Value.ToString(),
                         Secret = results.Attribute("secret").Value.ToString(),
                         Title = results.Attribute("title").Value.ToString()
                     };

        FlickrListView.ItemsSource = new ObservableCollection<FlickrImage>(photos);

    }

    private void GetPhotoSource(object sender, ItemClickEventArgs e)
    {

        int inx = FlickrListView.SelectedIndex;
       // FlickrImage t = lst.First();
        FlickrImage t = lst.ElementAt(inx);
        MyImage.Source = new BitmapImage(new Uri(t.ImageUrl.ToString(), UriKind.Absolute));  

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:43:41.353

尝试在 LINQ 末尾添加一个 .ToList() 。

*编辑（评论摘要）

您正在处理似乎在 ListViewBase 上的选择属性更改之前引发的 ItemClick 事件。由于此时这些尚未更新 - 您可以检查 e.ClickedItem 并将其转换为 FlickrImage 以获取您单击的项目。

如果您确实想使用选择属性 - 您应该处理 SelectionChanged 事件。

# ruby - Ruby 函数作为哈希值

> ID：13033830
> 
> 赞同：9
> 
> 时间：2012-10-23T15:20:38.517
> 
> 标签：ruby, function

我想知道是否或如何将函数映射到哈希值。

例如：----开始上课------------

```
def foo(var)
    return var + 2
end

hash_var = { func => foo() } 
```

----结束课堂--------------

这样我以后可以打电话

```
Class::hash_var["func"][10] 
```

或者

```
Class::hash_var["func"](10) 
```

那将返回12？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T15:26:32.197

你可以使用[`method`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)方法。

```
def foo(var)
      return var + 2
end

hash_var = { :func => method(:foo) }

hash_var[:func].call(10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T16:01:41.337

函数/方法是 Ruby 中少数不是对象的事物之一，因此您不能将它们用作散列中的键或值。与作为对象的函数最接近的东西是proc。所以你最好使用这些......

其他答案几乎列出了如何将 proc 作为值放入散列的所有可能方法，但我还是会总结一下；）

```
hash = {}

hash['variant1'] = Proc.new {|var| var + 2}
hash['variant2'] = proc     {|var| var + 2}
hash['variant3'] = lambda   {|var| var + 2}

def func(var)
  var + 2
end

hash['variant4'] = method(:func) # the *method* method returns a proc
                                 # describing the method's body 
```

评估过程也有不同的方法：

```
hash['variant1'].call(2) # => 4
hash['variant1'][2]      # => 4
hash['variant1'].(2)     # => 4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T15:24:09.530

您可以将值设置为 Proc 并调用它。

```
hash_var = {
  'func' =>  proc {|x| x+2}
}

hash_var['func'].call(10) #=> 12 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T15:27:55.737

尝试使用 lambda

```
hash_var = { :func => lambda { |var| var + 2 }}
hash_var['func'].call(5) #=> 7 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T17:59:24.723

另一种选择是：

```
def foo(name)
    puts "Hi #{name}"
end

def bar(numb)
    puts numb + 1
end

hash_var = { func: :foo, func2: :bar }
send hash_var[:func], "Grid"
# => Hi Grid
send hash_bar[:func2], 3
# => 4 
```

以下是有关[#send](https://ruby-doc.org/core-2.6.2/Object.html#method-i-send)方法的一些信息[send() 在 Ruby 中的作用是什么？](https://stackoverflow.com/questions/3337285/what-does-send-do-in-ruby)

# linux - Find files with a certain extension that exceeds a certain file size

> ID：13033832
> 
> 赞同：1
> 
> 时间：2012-10-23T15:20:50.647
> 
> 标签：linux, bash, find

I'm having trouble with the find command in bash. I'm trying to find a file that ends with .c and has a file size bigger than 2000 bytes. I thought it would be:

```
find $HOME -type f -size +2000c .c$ 
```

But obviously that isn't correct.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:24:55.003

`find $HOME -type f -name "*.c" -size +2000c`

看看`-name`鬃毛页面中的开关：

```
-name pattern
              Base of  file  name  (the  path  with  the  leading  directories
              removed)  matches  shell  pattern  pattern.   The metacharacters
              (`*', `?', and `[]') match a `.' at the start of the  base  name
              (this is a change in findutils-4.2.2; see section STANDARDS CON‐
              FORMANCE below).  To ignore a directory and the files under  it,
              use  -prune; see an example in the description of -path.  Braces
              are not recognised as being special, despite the fact that  some
              shells  including  Bash  imbue  braces with a special meaning in
              shell patterns.  The filename matching is performed with the use
              of  the  fnmatch(3)  library function.   Don't forget to enclose
              the pattern in quotes in order to protect it from  expansion  by
              the shell. 
```

请注意最后的建议，即始终将模式括在引号内。选项的顺序不相关。再次查看手册页：

```
EXPRESSIONS
       The  expression  is  made up of options (which affect overall operation
       rather than the processing of a specific file, and always return true),
       tests  (which  return  a  true or false value), and actions (which have
       side effects and return a true or false value), all separated by opera‐
       tors.  -and is assumed where the operator is omitted.

       If the expression contains no actions other than -prune, -print is per‐
       formed on all files for which the expression is true. 
```

因此，选项默认情况下与和`-and`运算符连接：它们必须全部为真才能找到文件，并且顺序根本不重要。该顺序可能仅与存在除 . 之外的其他运算符的更复杂的模式匹配相关`-and`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T15:22:44.270

Try this:

```
find $HOME -type f -size +2000c -name *.c 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T15:26:42.133

尝试以下操作：

```
find $HOME -type f -size +2000c -name *.c 
```

# r - How can I plot svm graph in R by using these data?

> ID：13033835
> 
> 赞同：1
> 
> 时间：2012-10-23T15:20:53.863
> 
> 标签：r

I used package `kernlab` and installed a function called `ksvm`. I built a ksvm model using data with 12x33 matrix. The first column of the matrix is the class (ie. 0 and 1). Other columns are numbers that used for classification.

How can I plot the graph of this svm model? I would like to plot a graph including support vectors and the margins.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:54:00.083

对于包**kernlab**：

```
library("kernlab")
example(plot.ksvm) 
```

对于包**e1071**：

```
library("e1071")
example(plot.svm) 
```

# php - How can I query a country's property like language from DBpedia?

> ID：13033841
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:21:27.707
> 
> 标签：php, dbpedia

How can I query a country profile with DBPedia like [http://dbpedia.org/page/France](http://dbpedia.org/page/France) and get a property like language?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:29:00.680

让我们从头开始，因为您没有说出您尝试过的内容。

DBpedia 是一个关于所谓**资源**的信息数据库：来自存储为 RDF 三元组的维基百科文章的事实。资源由 URI 标识；DBpedia 使用`http://dbpedia.org/resource/*`where与in`*`相同的形式。`*``http://en.wikipedia.org/wiki/*`

[所以 DBpedia 有关于资源http://dbpedia.org/resource/France](http://dbpedia.org/resource/France)的事实。如果您在浏览器中查找此资源，您将被重定向到[http://dbpedia.org/page/France](http://dbpedia.org/page/France)，因为您的浏览器中无法显示国家 France，但其描述可以。

DBpedia 知道的事实包括

```
<http://dbpedia.org/resource/France> <http://dbpedia.org/ontology/language> <http://dbpedia.org/resource/French_language> 
```

它基本上说“法国[的]语言[是]法语。”

要通过 API 获得这一事实，您可以使用标准 RDF 查询语言和协议[SPARQL](http://www.w3.org/TR/rdf-sparql-query/)。[DBpedia SPARQL 端点](http://dbpedia.org/sparql)是您向 DBpedia 发送 SPARQL 查询的地方，它有一个 Web 表单，可让您输入和提交查询。如果您只想要一个显示法国使用的语言的 HTML 表格，请将表单的设置保留为默认值并使用：

```
select ?language ?languageName
where {
  dbpedia:France dbpedia-owl:language ?language .
  ?language rdfs:label ?languageName .
} 
```

这意味着：“给我法国用作语言的资源和名称。”
`dbpedia:France`是 的缩写`<http://dbpedia.org/resource/France>`，`dbpedia-owl:language`是 的缩写`<http://dbpedia.org/ontology/language>`。

如果您想要国家和这些国家使用的语言，请使用：

```
select distinct ?country ?language
where {
  ?country a dbpedia-owl:Country .
  ?country dbpedia-owl:language ?language .
} 
LIMIT 100 
```

这意味着：“给我 100 个国家资源组合以及这些国家/地区用作语言的资源。”

我遗漏了一些细微差别，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:55:44.937

正如@Bergi 在评论中指出的那样，请参阅[http://wiki.dbpedia.org/OnlineAccess](http://wiki.dbpedia.org/OnlineAccess)以获取可能的在线访问方法列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T15:49:45.437

除非他们提供某种 API，否则您唯一的选择是“屏幕抓取”页面 - 换句话说，使用 curl（或其他方法）加载页面，然后搜索“dbpedia-owl:language”并获取字符串紧随其后 (dbpedia:French_language) 并对其进行解析以使其看起来更好看。

# wpf - Overriding words in the default Spell-Check dictionary

> ID：13033856
> 
> 赞同：4
> 
> 时间：2012-10-23T15:22:13.163
> 
> 标签：wpf, textbox, customization, spell-checking, dictionary

I've been playing with the Spell-Check capabilities in WPF 4.0 TextBox controls, including Custom Dictionaries, and while they are great; I was wondering if there was any way to **override** a word in the default dictionary. Or, rather, override the default casing of a word.

Here's my example. I work in the Property/Casualty insurance industry, and we have specific jargon that we use, just like any other industry. For example, in dealing with auto accident claims, we use "IV" to refer to the Insured's Vehicle and "OV" to the Other Vehicle. I am able to add "OV" to a custom dictionary and have the built-in spell-checking features trigger so that it should be typed in all upper case (for easier readability, among other things), but am unable to do so for IV, since it already seems to be in the default dictionary as "iv". I have "IV" in my custom dictionary, but spell check does not flag an occurrence of "iv" as being incorrect.

I would like to be able to override the casing on that word so that it triggers when the user types "iv" instead of "IV". Does anybody know of a way to do that?

# objective-c - Convert binary data to byte array to be transfered via json

> ID：13033857
> 
> 赞同：0
> 
> 时间：2012-10-23T15:22:18.287
> 
> 标签：objective-c, restkit

I'm creating a iphone clients that talks to a wcf service (I do not have control over the server, so no changes can be made here).

I need to send an image to this server, along with some other information. It must be send using json.

I'm using restkit to send and receive data.

The problem is, that the binary data must be send as a byte array. Not as a base64 encoded string.

How do I get from an UIimage to a json string that looks like this

"Picture":{"Content":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,..........

I'm open to a solution that doesn't use restkit.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:34:50.543

接收 WCF 服务中的类型是什么？字节[]？

听起来很古怪，但您可以尝试映射到 NSNumber 关系并创建它们的数组。

在我的脑海中，我认为这将序列化为：

"图片":{"内容":["1","1","1".....

因此，您可能还需要自定义格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:05:48.730

感谢您的快速回复。

无法获得任何建议的答案，所以我们不得不使用我们疯狂的人际交往能力，让制造服务器端服务的公司改变他们的结局，这样我们就可以发送一个 base64 编码的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:36:24.903

这是一个将字节数组转换为 NSString 的 SO 帖子。如果我正确理解了问题，请尝试将您的字节数组转换为字符串，然后将其添加到您的提要中。 [Objective-C - 如何将字节数组转换为 NSString？](https://stackoverflow.com/questions/5281251/objective-c-how-can-i-convert-byte-array-to-nsstring)

这是带有代码的已接受答案的摘录：

```
 NSData *data = [[NSMutableData alloc] init];
            uint8_t buffer[1024];
            unsigned int len = 0;

            len =  [(NSInputStream *)stream read:buffer maxLength:1024];

            if(len > 0)
            {
                [data appendBytes:&buffer length:len];
            }
            NSString *serverText = [[NSString alloc]
                                    initWithData:data
                                    encoding:NSASCIIStringEncoding];

            NSLog(@"%@", serverText); 
```

同样值得注意的是，一旦将值放入 json，请注意不要超过 json 最大字符串长度值。

# dart - Specifying optional parameters when calling JavaScript functions in Dart

> ID：13033866
> 
> 赞同：0
> 
> 时间：2012-10-23T15:22:45.273
> 
> 标签：dart

I'm calling the function `window.navigator.geolocation.getCurrentPosition` from Dart code. The final parameter to this function is optional. In JavaScript I would set the optional parameters as follows:

```
var wpid = navigator.geolocation.watchPosition(geo_success, geo_error,
  {enableHighAccuracy:true, maximumAge:30000, timeout:27000}); 
```

What would the equivalent be in Dart code? I've tried the following but I'm not sure if it is correct:

```
window.navigator.geolocation.watchPosition(geo_success, geo_error,
 {'enableHighAccuracy':true, 'maximumAge':30000, 'timeout':27000}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:08:03.363

您正在使用此方法：[http ://api.dartlang.org/docs/bleeding_edge/dart_html/Geolocation.html#watchPosition](http://api.dartlang.org/docs/bleeding_edge/dart_html/Geolocation.html#watchPosition)

```
int watchPosition(PositionCallback successCallback, [PositionErrorCallback errorCallback, Object options]) 
```

我在这台机器上没有 Dark SDK，但对我来说它看起来完全没问题。如果 JavaScript 等效代码只是一个对象，那么像您所做的那样传递 Dart Map 应该可以工作。有问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:25:53.043

希望通过地图作品，请尝试让我们知道。

即使它确实有效，这也是一个糟糕的 Dart API。选项确实应该是可选参数，而不是选项对象的属性。我在这里提交了一个错误：http: [//dartbug.com/6280](http://dartbug.com/6280)

# c# - 如何从已经运行的 WPF 系统托盘应用程序启动窗口？

> ID：13033868
> 
> 赞同：2
> 
> 时间：2012-10-23T15:22:51.277
> 
> 标签：c#, wpf

我有一个在系统托盘中运行并监视 HTTP 活动的 WPF 应用程序。

当我右键单击系统托盘图标时，我可以从上下文菜单命令中启动“控制面板”。

但是，当用户转到`StartMenu\Programs\MYAPPLICATION`并单击名为“控制面板”的菜单项时，我想触发一个显示控制面板的方法（只是一个常规的 WPF 窗口），

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:23:55.290

在应用程序启动时，您可以检查是否有另一个实例正在运行。然后通过您选择的进程间通信（例如 WCF、命名管道、.NET 远程处理、放置文件等），您可以指示原始实例（通过所选通信方法提供的任何方式）显示所需的窗口。

# php - 使用 mysql 存储评论或将它们写入 PHP 中的文件或 XML 文件并以这种方式显示在主页上会更好吗？

> ID：13033869
> 
> 赞同：0
> 
> 时间：2012-10-23T15:22:54.790
> 
> 标签：php, html, mysql, database, phpmyadmin

我正在制作一个评论系统，用户将在已构建的主页上使用他们的详细信息登录，但是在第二个评论页面上，我想按创建的时间顺序显示每个评论，这样会更好吗在 mysql 数据库中完成以存储评论或将评论放入文件并从服务器上的文件中读取它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:27:27.033

为简单起见，XML [又名“平面文件”数据库] 似乎更可取，但是一旦获得合理的流量，您会发现性能下降得非常快。假设您有一个单独的 XML 文件来存储每个页面的评论，并且您希望显示最后 5 条评论，最新的在前。服务器必须从头到尾读取整个文件，只需找出最后的 5 条评论。

当您对某事有 10,000 条评论时会发生什么？当你有 100 条帖子、10,000 条评论和每秒 1000 次浏览量时会发生什么？基本上，您在磁盘上放置了如此多的 I/O 负载，以至于其他所有内容都会因排队 I/O 而停止。

像 mysql 这样的 RDBMS 的要点是，信息在放入数据库时​​被索引，并且该索引保存在内存中。这样，应用程序不必在每次发出请求时重新检查 100% 的数据。编写一个 mysql 查询来查询索引并让系统*只*检索所需的信息，即：最后 5 条评论。

相信我，我曾为一家托管服务提供商工作，这样的代码经常会导致各种问题“它运行了好几个月，但现在我的网站速度慢得要命”。您不会后悔花一点额外时间第一次做对，而不是在应用程序停止时争先恐后地重新做应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:25:23.357

绝对在 MySQL 中。操作很简单，可追溯性很容易。

除非你想走 NoSQL 路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:25:40.360

将评论存储在数据库中将是一个更好的选择。您可以通过数据库获得更多功能。说**more power**，我的意思是你可以很容易地做到这些：

*   当使用被删除时，您可以决定是否要删除他的评论或不
*   您可以显示前 10 条（左右）评论
*   您可以在其他页面上显示用户的所有评论
*   ETC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:25:45.127

我会推荐一个数据库，以这种方式访问​​数据要容易得多。在提取数据时，当涉及到布局代码时，XML 总是很痛苦。可能值得从某人那里获得更详细的解释，因为我对 XML 没有太多经验。

另外，您可以更好地控制评论的审核。

希望有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:26:04.817

每次都是 MySQL！

它非常适合这样做并且非常适合/灵活/强大。

# c# - 在一个事务中从磁盘上的数据库和目录中删除行

> ID：13033870
> 
> 赞同：1
> 
> 时间：2012-10-23T15:22:57.767
> 
> 标签：c#, asp.net, data-synchronization

> **可能重复：**
> [从数据库中删除文件和相应条目](https://stackoverflow.com/questions/1739444/deleting-files-and-corresponding-entries-from-database)

我正在编写一个 ASP.NET 应用程序。我在数据库中有一行，其中包含磁盘上文件夹的物理路径。我想在一个事务中删除该行并删除目录。即确保两者都被删除或两者都没有。

我正在使用实体框架与数据库进行通信。

要删除的文件夹包含可以由网站用户查看的图像。恐怕我可以在 IIS 将图像传输给用户的那一刻尝试删除该文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:30:45.110

为此，您需要使用[Transaction Scope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)，如果您的服务器是 Windows 2008 R2 或 2012，它将工作，因为 Transaction 将通过 SQL 和[NTFS](http://msdn.microsoft.com/en-us/library/aa363764%28VS.85%29.aspx)。确保分布式事务协调器 windows 服务处于运行状态。

# c# - 如何在不每次都创建新播放器的情况下播放声音

> ID：13033871
> 
> 赞同：0
> 
> 时间：2012-10-23T15:22:58.467
> 
> 标签：c#, wav, audio-player, soundplayer

我正在一个表单项目中工作，并在某些方法和事件中播放一些声音。例如，在一种方法中，我有这个：

```
SoundPlayer sndplayrONE = new SoundPlayer(Properties.Resources.wavsound1);

sndplayrONE.Play(); 
```

在另一个中，我有这个：

```
SoundPlayer sndplayrTWO = new SoundPlayer(Properties.Resources.wavsound2);

sndplayrTWO.Play(); 
```

我想要的是在表单代码的开头只创建一个声音播放器类的实例，比如

```
SoundPlayer sndplayr = new SoundPlayer(--some generic input---) 
```

然后从任何事件中调用它，比如

```
sndplayr2.Play(sound1); sndplayr2.Play(sound2); sndplayr2.Play(sound3); 
```

ETC...

我见过一些类似`SoundPlayer(Stream)`or的构造函数`SoundPlayer(String)`，但我不明白其中的任何一个。我需要一些简单的东西，就像我以前做的那样，但每次我想播放声音时都不需要创建一个新实例。我在 Resources.resx 中嵌入了所有声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:28:43.760

使用不同的构造函数

[http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

```
System.Media.SoundPlayer myPlayer = new System.Media.SoundPlayer();
myPlayer.SoundLocation = @"c:\click.wav";
myPlayer.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:30:34.333

在此处查看信息：[MSDN SoundPlayer 类 (System.Media)](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

看起来您可以通过设置 SoundLocation 属性然后执行 Load() 或 LoadAsync() 来更改特定播放器将播放的声音。

然而，明智的做法是制作像字典一样的东西，将一些您认为与当前上下文相关的 SoundPlayer 对象放入其中。就像是：

```
Dictionary<string, SoundPlayer> sounds;

// Load sounds

// I wouldn't hardcode strings here, use constants or something. This is just an example.
sound["Sound1"].Play(); 
```

# ajax - jQuery.ajax POST 请求转换为 GET

> ID：13033873
> 
> 赞同：2
> 
> 时间：2012-10-23T15:23:09.193
> 
> 标签：ajax, jquery, post, get

我有以下 jQuery 代码：

```
 $.ajax({
        url: Url,
        dataType: 'JSONP',
        type: 'POST',
        success: function (data, textStatus, jqXHR) {
            //callback function here
        },
        error: function (xhr, ajaxOptions, thrownError) {
            //report error
        }
    }); 
```

[但是，当我在Fiddler](http://www.fiddler2.com/fiddler2/)中查看此 AJAX 请求时，我的请求已从 a 转换`POST`为 a `GET`。

我正在连接的 API 不允许这样做，因为它必须是`POST`请求。

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:24:07.610

JSONP 请求只能是 GET。

删除`dataType: 'JSONP'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:25:30.497

```
dataType: 'JSONP', 
```

始终是**GET**请求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:28:05.737

您不能将 POST 与 JSONP 一起使用，请参阅[https://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/5-tKI-7zQvs](https://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/5-tKI-7zQvs)了解更多详情。

# numpy - Genfromtxt 不返回列名

> ID：13033875
> 
> 赞同：0
> 
> 时间：2012-10-23T15:23:15.133
> 
> 标签：numpy, genfromtxt

我想将 csv 转换为 numpy 数组。csv 文件的第一行包含列的名称/标题。但是当我使用设置为`genfromtxt`的`names`参数时，`true`我仍然只收到一个带有很多`NaN`值的普通 numpy 数组。我忘记了什么？

```
numpy.genfromtxt("test.csv", names=True, delimiter=",")
array([[ NaN,  64.,  11., ...,  NaN,  NaN,  NaN],
       [ NaN,  64.,  11., ...,  NaN,  NaN,  NaN],
       [ NaN,  64.,  11., ...,  NaN,  NaN,  NaN],
       ..., 
       [ NaN,  64.,  11., ...,  NaN,  NaN,  NaN],
       [ NaN,  64.,  11., ...,  NaN,  NaN,  NaN],
       [ NaN,  64.,   5., ...,  NaN,  NaN,  NaN]]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:23:15.133

您必须设置`dtype`为`None`：

`numpy.genfromtxt("test.csv", names=True, delimiter=",", dtype=None)`

# database - 使用 EntityFramework 对列进行单向更新

> ID：13033880
> 
> 赞同：0
> 
> 时间：2012-10-23T15:23:30.313
> 
> 标签：database, entity-framework, entity-framework-4, .net-4.0

实体框架 4.3.1。

计算应该存储在数据库中但不打算从数据库中检索的属性的最佳方法是什么？例如

```
 [Column("SOME_COLUMN")]
    public ulong SomeColumn
    {
        get { return /*calculate here*/; }
    } 
```

我希望在保存到 db 时保持该值。但是当然 - 当我从 db 加载时没有得到更新。我可以在旁边放一个空的二传手......但是当列是键时它似乎不起作用。

我可以有这样一个键列吗？

现在我收到此错误：

**EntityFramework 错误：作为对象键一部分的属性值与存储在 ObjectContext 中的相应属性值不匹配。如果作为键的一部分的属性返回不一致或不正确的值，或者在对作为键的一部分的属性进行更改后未调用 DetectChanges，则可能会发生这种情况。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:23:58.083

首先，将 setter 设为私有：

```
[Column("SOME_COLUMN")]
public ulong SomeColumn { get; private set; } 
```

其次，在对象中添加一个计算方法（这样就可以访问私有的setter了）：

```
public void CaculateSomeColumn(){
    this.SomeColumn = /* some calculation */;
} 
```

第三，`SavingChanges`向 Repository 上下文对象 ( `MyEntities`) 添加回调。此回调可以在上下文构造函数中定义，它应该`MyPoco`为添加或修改的类型 ( ) 的项目设置计算字段：

```
public MyEntities(){
    this.SavingChanges += (sender, eventArgs) => {
        ObjectContext context = sender as ObjectContext;
        if (context != null)
        {

            foreach (ObjectStateEntry entry in
                context.ObjectStateManager.GetObjectStateEntries(
                EntityState.Added | EntityState.Modified))
            {
                if (!entry.IsRelationship && (entry.Entity.GetType() == typeof(MyPoco)))
                {
                    var myObject = entry.Entity as MyPoco;
                    myObject.CalculateSomeColumn();
                }
            }
        }

    };
} 
```

# java - 如何获取远程主solr服务器已删除但仍存在于本地solr服务器中的已删除文档

> ID：13033884
> 
> 赞同：0
> 
> 时间：2012-10-23T15:23:42.307
> 
> 标签：java, solr, solrj

我正在尝试实现以下功能：

我有一个主要的中央 solr 服务器，其中包含来自所有用户的所有文档。
在每个客户端中，我想为他/她的文档创建一个本地缓存（所以如果没有互联网连接，用户仍然可以搜索他/她的本地缓存）：首先导入在最后 2 中创建或更改的用户文档的索引周（例如），然后每天午夜获取该用户在此期间创建、更改或删除的文档的索引，并将更改导入本地缓存。

我使用[http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor)
1\. 首先，使用 /dataimport&query=+from:jeffery +last_modified:[${last_2weeks_ago} TO NOW] 导入该用户创建/更改的索引在过去 2 周内。
2\. 对于增量导入，要检查创建或更改（不包括）删除的索引，我使用 /dataimport&query=+from:jeffery +last_modified:[${dataimporter.request.last_index_time} TO NOW]&clean=false。

但难的是如何获取最后一天被删除的文档的索引。我找到了一些方法来做到这一点，但它根本没有效率。

解决方案 1 - 效率不高。
1\. 读取本地缓存中的所有 id（仅加载 ID）- 命名为 ${local_ids}
2\. 读取远程中央服务器中 ${first_index_time} 和 ${last_index_time} 之间的所有 id - 命名为 ${ids_still_exist_in_remote_server}
3.删除的 id 将是 = ${local_ids}-${ids_still_exist _in_remote_server}

这可以通过每次仅从本地缓存服务器和远程 solr 服务器获取 N（例如 10000）个 id 来优化，然后在循环中计算差异，直到本地和远程服务器中没有剩余 id。

解决方案2：

在远程中央solr服务器中，当一个doc被删除时，在solr服务器中添加一条类似{docid，deletedate}的记录（可能是一些其他信息，如作者）。运行 delta-import 时，进行查询以获取 ${last_index_time} 到 NOW 之间的已删除 ID。

还不知道如何实现，但我认为这是可以实现的。但这会减慢远程中央 solr 服务器中的删除操作，并将记录远程服务器中不必要的已删除文档。（尽管我们可以使用线程来删除有关已删除文档的旧索引）

在 solr 中还有其他更好的方法吗？非常感谢您的帮助和建议：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:56:05.303

您可以使用[Solr 复制](http://wiki.apache.org/solr/SolrReplication)定期将内容从远程服务器复制到本地服务器，或使其基于事件（基于提交或优化）。
您无需跟踪更新。

# android - Android onClickListener 删除自身

> ID：13033886
> 
> 赞同：1
> 
> 时间：2012-10-23T15:23:50.267
> 
> 标签：android, button, android-linearlayout

我有一个名为 LabelButton 的自定义 LinearLayout 类，其中包含一个按钮和一个 TextView。我想让按钮的 onclick 监听器删除 LabelButton。如何将 LabelButton 对象中的某些内容传递给我的 Activity 类，告诉我的主布局删除该 LabelButton？

```
public class LabelButton extends LinearLayout {
  private OnClickListener onClick;
    public LabelButton(Context context, final String text) {
        super(context);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        View labelView = inflater.inflate( R.layout.button_label, this );
        TextView textView = (TextView) labelView.findViewById( R.id.textLabelText);
        textView.setText( text );
        Button button = (Button) labelView.findViewById( R.id.buttonCancelLabel );

        onClick = new OnClickListener( ) {
          public void onClick( View v ) {
            System.out.println("Button: " + text + " clicked");
            // do something here to remove this button
          }
        };
        button.setOnClickListener( onClick );
    }
    @Override
    public void onFinishInflate() {
        super.onFinishInflate();

    }

} 
```

在我的 Activity 类中，我将 LabelButtons 添加到这样的列表中......

```
//labelButtons is a List of LabelButtons

LabelButton labelButton = new LabelButton( getApplicationContext( ),
            txtBagLabel.getText( ).toString( ) );
        labelButtons.add( labelButton ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:43:56.983

`((ViewGroup) LabelButton.this.getParent()).removeView(LabelButton.this);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:29:10.230

有两种方法。一，您可以在要删除的按钮上将可见性设置为 GONE。

```
labelButton.setVisibility(View.GONE); 
```

如果您是从按钮内部执行此操作（即它想隐藏*自己*），您可以尝试

```
LabelButton.this.setVisibility(View.GONE); 
```

第二种方法是获取对父视图的引用并调用

```
parentView.remove(child); 
```

其中 child 当然是对您的 LabelButton 对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T22:54:14.087

您可以将“this”别名为类变量，如下所示：

```
ViewGroup self = this; 
```

然后您可以执行以下操作：

```
onClick = new OnClickListener( ) {
    public void onClick( View v ) {
        System.out.println("Button: " + text + " clicked");
        // do something here to remove this button
        ViewGroup parent = (ViewGroup) getParent();
        parent.removeView(self);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:29:10.790

使您的按钮对象成为最终对象，然后您可以从内部引用它，`OnClickListener`并可能更改其可见性或将其从视图中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T18:12:00.887

这样做：

```
 onClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           //remove this button
            ((LinearLayout)v.getParent()).removeView(v);              
        }
 }; 
```

然后设置按钮那个监听器

```
 button.setOnClickListener( onClick ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-07T21:32:03.480

在 KOTLIN 中也是一样的：

```
findViewById<View>(R.id.removeWidget)?.setOnClickListener {
        (parent as ViewGroup).removeView(this)
    } 
```

# javascript - 调用 JS 文件时从 JQuery Ajax 调用中检索参数

> ID：13033892
> 
> 赞同：1
> 
> 时间：2012-10-23T15:23:56.673
> 
> 标签：javascript, jquery, parameters, parameter-passing

我正在尝试利用 JQuery Ajax 调用 javascript 文件。我需要传递一些参数，但我不确定在使用 javascript 时如何传递（PHP 似乎更简单）。这是我的电话：

```
function getDocument(parameters) {
    $.ajax({
        type:       "GET",
        url:        "js/document.js",
        dataType:   "script",
        data:       "info=hellothere",
        success:    function(msg) { 
        },
        error: function(jqXHR, textStatus, errorThrown){
        }
    });
} 
```

我想做的就是打印出document.js中参数'info'的内容

所以本质上应该打印'hellothere'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:26:55.470

你最好使用 PHP。

将 URL 更改为`document.php`，并在该文件中执行以下操作：

```
echo $_GET['info']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:27:04.223

```
url: "js/document.js" 
```

应该是`path to the Server file`

您不能使用 Ajax 请求将 ajax 请求发送到您的**.js**文件

将请求发送到 .php 文件并在其中写下您的方法来处理数据。

Ajax 请求主要用于从**客户**端到**服务器端**来回发送数据..

如果您想访问两个 .js 文件之间的数据，最好将该数据存储在 a`cookie`或 a`local storage`

# jquery - 使用jQuery获取位置高度：绝对内容运行两次，第二次返回不正确的值

> ID：13033897
> 
> 赞同：1
> 
> 时间：2012-10-23T15:24:13.663
> 
> 标签：jquery, html, css

这个小提琴[http://jsfiddle.net/paultrotter50/fdvC5/](http://jsfiddle.net/paultrotter50/fdvC5/)显示了我在检测位置绝对内容的高度时遇到的问题。

我正在创建一个选项卡式面板，以便用户可以选择房间类型，然后选择房间子类型。房间子类型（ul.sub-types）具有绝对位置，因此可以正确定位。

当用户在房间子类型之间切换时，我需要使用 jQuery/javascript 来检测 ul.sub-types 的高度，以便我可以设置整个面板的高度（div.tab-panel - 显示为蓝色轮廓) 以匹配其内容。这应该意味着面板之后的页面内容不会被绝对定位的房间子类型重叠。

不幸的是，jQuery 函数似乎运行了两次——第一次它检测到正确的值并正确调整了蓝色轮廓的选项卡面板。然后它似乎立即再次运行并返回不正确的值。

当您单击左侧栏中的家庭，然后单击右侧底部的家庭双人间时，您可以最清楚地看到这一点。这在列表中有很多项目，以便强调高度变化。

任何有关导致问题的原因和/或如何解决此问题的建议将不胜感激。

HTML：

```
<section id="main_col">

<div class="tab-panel">

                                <ul id="room-types" class="left-tabs">

                                    <li class="type double selected">
                                        <input id="double" type="radio" name="room-type" checked="checked">
                                        <label for="double">Double

                                        <ul class="sub-types">

                                            <li class="selected">
                                                <input id="subtype1" type="radio" name="double-subtypes" value="subtype1" checked="checked">
                                            <label for="subtype1">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Classic Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype1 -->
                                         </li>

                                        <li>
                                            <input id="subtype2" type="radio" name="double-subtypes" value="subtype2">
                                            <label for="subtype2">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Classic Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype2 -->
                                         </li>

                                         <li>
                                            <input id="subtype3" type="radio" name="double-subtypes" value="subtype3">
                                            <label for="subtype3">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Classic Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype3 -->
                                         </li>
                                     </ul>
                                     </label>
                                </li><!-- end .type.double -->

                                <li class="type twin">
                                    <input id="twin" type="radio" name="room-type">
                                    <label for="twin">Twin

                                    <ul class="sub-types">

                                        <li class="selected">
                                            <input id="subtype1" type="radio" name="twin-subtypes" value="subtype1" checked="checked">
                                            <label for="subtype1">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Twin Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype1 -->
                                         </li>

                                        <li>
                                            <input id="subtype2" type="radio" name="twin-subtypes" value="subtype2">
                                            <label for="subtype2">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Twin Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype2 -->
                                         </li>

                                         <li>
                                            <input id="subtype3" type="radio" name="twin-subtypes" value="subtype2">
                                            <label for="subtype3">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Twin Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype3 -->
                                         </li>
                                     </ul>
                                     </label>
                                </li><!-- end .type.twin -->

                                <li class="type family">
                                    <input id="family" type="radio" name="room-type">
                                    <label for="family">Family

                                    <ul class="sub-types">

                                        <li class="selected">
                                            <input id="subtype1" type="radio" name="family-subtypes" value="subtype1" checked="checked">
                                            <label for="subtype1">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Family Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype1 -->
                                         </li>

                                        <li>
                                            <input id="subtype2" type="radio" name="family-subtypes" value="subtype2">
                                            <label for="subtype2">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Family Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype2 -->
                                         </li>

                                         <li>
                                            <input id="subtype3" type="radio" name="family-subtypes" value="subtype3">
                                            <label for="subtype3">

                                                <span class="col2">
                                                   <img src="img/pg-specific/left_col/room_sea_view.jpg" width="124" height="70" alt=" "> 
                                                </span><!-- end col2 -->

                                                <span class="col1">
                                                    <span class="title">Family Double</span>
                                                    <ul>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                        <li>bullet item 1</li>
                                                        <li>bullet item 2</li>
                                                        <li>bullet item 3</li>
                                                    </ul>
                                                </span><!-- end col1 -->
                                                <span class="clearfix"></span>
                                            </label><!-- end lable for subtype3 -->
                                         </li>
                                     </ul>
                                     </label>
                                </li><!-- end .type.family -->

                            </ul>
                        </div> 
```

​ CSS：

```
/*--- booking tab panels --- */

                    .tab-panel ul.sub-types {display:none;}
                    .tab-panel { position:relative; width:100%; border: 1px solid blue; height:500px; font-size:0.9em;}
                    .tab-panel input[type="radio"]:checked + label ul.sub-types {display:block; position:absolute; right:0px; top:0px; width:80%;}
                    .tab-panel ul.sub-types > li .col2, .tab-panel ul.sub-types > li .col1 ul  {display:none;}
                    .tab-panel ul.sub-types input[type="radio"]:checked  + label .col2, .tab-panel ul.sub-types input[type="radio"]:checked + label .col1 ul  {display:block;}
                    #main_col .tab-panel input, #main_col .tab-panel label {float:left;}
                    #main_col .tab-panel input {clear:both; margin-right:10px; width:auto;}
                    #room-types > li > input[type="radio"]:checked + label { font-weight:bold; background-color: #bfb2b5; width:60%; }
                    #room-types > li > input[type="radio"]:checked + label .sub-types { font-weight:normal;}
                    #room-types > li > label {padding:7px 0px 5px 5px;}
                    .tab-panel .sub-types {background-color: #e0d7c1; }

                    .tab-panel .col1, .tab-panel .col2 {display:block;}
                    .tab-panel .col1 {float:left; width:58%; margin-left:10%; margin-top:10px; margin-right:0px;}
                    .tab-panel .col2 {float:right; width:25%; padding:10px; margin-right:0px;}
                    .tab-panel .sub-types li.selected label {width:100%;}
                    .tab-panel .sub-types li.selected  label { background-color:#f3ebde;}
                    .tab-panel .sub-types input[type="radio"]:checked + label {background-color:#f3ebde; background-image: url(../img/core/radio-on-cream-bg.gif); background-repeat:no-repeat; background-position:7px 13px; cursor:auto;}
                    .tab-panel .sub-types li label  {background: url(../img/core/radio-off-sand-bg.gif); background-repeat:no-repeat; background-position:7px 13px; cursor:pointer; }
                    #main_col .tab-panel .sub-types li label {margin-bottom:0px; padding-bottom:10px; padding-top:5px;}
                    .tab-panel .sub-types li label li {background-image:url("../img/core/tick-description-text.gif"); background-repeat:no-repeat; background-position: 0px 2px; padding-left:15px; width: 100px; float: left; margin-right:15px; margin-bottom:3px;}
                    .tab-panel .sub-types li label ul {width:100%; float:left; margin-top:8px;} 
                    .tab-panel .sub-types li label img {max-width: 100%; height: auto;}
                    .tab-panel .sub-types input[type="radio"]:checked + label .title { font-weight:bold;}​ 
```

jQuery：

```
$(document).ready(function() {

/* book page panels -------------------------------------- */

$('.sub-types li').click(function() {
    $(this).parent().find('input:radio').attr('checked', false)
    $(this).children('input:radio').attr('checked', true)
    $('.sub-types li').removeClass('selected');
    $(this).addClass('selected');

    var panelHeight = $(this).closest('ul.sub-types').height();
    alert("height: " + panelHeight);
    $(this).closest(".tab-panel").css('height', panelHeight)

});

}); /* end $(document).ready(function() */​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:36:10.997

好的，所以它运行两次的原因是你下面的隐藏元素也被点击了。尝试指定一个 :visible 选择器。我还必须将 click 事件切换为 On，并将其绑定到不同的 dom 元素，否则 click 事件将仅绑定到 document.ready 中标记为“li:visible”的任何元素：

```
$('.sub-types').on('click', 'li:visible', function() {
    $(this).parent().find('input:radio').attr('checked', false)
    $(this).children('input:radio').attr('checked', true)
    $('.sub-types li').removeClass('selected');
    $(this).addClass('selected');

    var panelHeight = $(this).closest('ul.sub-types').height();
    alert("height: " + panelHeight);
    $(this).closest(".tab-panel").css('height', panelHeight)

}); 
```

# sql - SQL - 如何返回包含所有子行的行

> ID：13033902
> 
> 赞同：0
> 
> 时间：2012-10-23T15:24:42.740
> 
> 标签：sql, join, sql-server-ce

给定一个父+参考表，其中`Reference`表如下

```
Ref_ID    PARENT_ID    
-------------------
1           1            
2           1            
1           2       
3           2       
1           3       
3           3       
4           3       
2           4       
3           4 
```

我正在尝试返回`ref_id`同时包含 2 和 3的所有不同父行

查询

```
SELECT *
FROM  Parent 
WHERE parent_id in (SELECT parent_id from XRefTable where ref_id in (2, 3) ) 
```

返回所有 parent_id 1、2、3、4

鉴于所需的正确结果是返回具有 ref_id 2 和 3 的 parent_id 4，其他具有 2 或 3

任何帮助表示赞赏

仅供参考 - 查询中有 4-7 个表（取决于用户选择），因此性能是一个重要因素

SORRY 不能使用存储过程，因为它也必须在 SQL Server CE 上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:28:56.453

```
 SELECT parent_id 
 from XRefTable 
 where ref_id in ( 2, 3 ) 
 group by PARENT_ID 
 having count(distinct ref_id) = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:30:17.903

您正在尝试进行逐组比较。为此，我强烈推荐`group by`and`having`子句：

```
select parent_id
from Reference r
group by parent_id
having sum(case when ref_id = 2 then 1 else 0 end) > 0 and
       sum(case when ref_id = 3 then 1 else 0 end) > 0 
```

该子句的每个组成部分都在`having`计算其中一个字段。逻辑要求两者都存在。

我比其他方法更喜欢这种方法的原因是你可以改变逻辑，使用基本相同的结构。

如果您有逗号分隔字符串中的列表，则以下内容将起作用。也许不是“优雅”和“关系”，但它有效：

```
set @Ref_ids = "1,2,3,4"

select parent_id
from Reference r
where charindex(','+cast(ref_id as varchar(255))+',', '+@ref_ids+',') > 0
group by parent_id
having count(distinct ref_id) = (len(replace(@ref_ids, ',', '')) - len(@ref_ids))+1 
```

这是进行字符串操作以确定 ref_id 是否在列表中。然后该`having`子句计算匹配的数量，确保它与列表的大小相同。假设列表中没有空格并且没有空白值，这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:30:43.990

你可以这样做：

```
SELECT 
    ParentReference.Parent_ID
FROM
    ParentReference
    INNER JOIN ParentReference B ON ParentReference.Parent_ID = B.Parent_ID AND ParentReference.Ref_ID = 2 AND B.Ref_ID = 3 
```

# java - 将 String 属性连接到另一个 bean 的方法的最类似于 Spring 的方法是什么？

> ID：13033907
> 
> 赞同：1
> 
> 时间：2012-10-23T15:25:20.527
> 
> 标签：java, spring

我有两个 bean，我想将一个 bean 的 String 属性连接到另一个 bean 的 String 值（从程序的环境中计算得出）。将这些连接在一起的最佳方法是什么？

我能想到的最佳解决方案是：

```
<bean id="thisBean">
  <property name="foo">
    <bean factory-bean="otherBean" factory-method="getStringForThisBean" />
  </property>
</bean> 
```

还有其他方法可以做到这一点，例如使用 SpringEL 或在 Spring 的属性系统中工作，但这是最简单的。创建一个重量级的 bean 来存储 String 值感觉不太对劲。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:28:45.610

我觉得 Spring-EL 会更合适，Spring-EL 就是这样：

```
<bean id="thisBean">
  <property name="foo" value="#{otherbean.property}"/>
</bean> 
```

# linux - 为什么反引号中的 cd 从不工作

> ID：13033910
> 
> 赞同：1
> 
> 时间：2012-10-23T15:25:25.957
> 
> 标签：linux, bash, shell, unix, sh

> **可能重复：**
> [为什么“cd”在 bash shell 脚本中不起作用？](https://stackoverflow.com/questions/255414/why-doesnt-cd-work-in-a-bash-shell-script)

为什么反引号或 $(..) 中的 cd 命令永远不会更改到新目录。任何想法如何在单个命令中执行此操作，即捕获任何错误并更改目录。

```
[root@linux ~]# pwd
/root
[root@linux ~]# cmdMsg=`cd /tmp 2>&1`
[root@linux ~]# pwd
/root 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:28:21.913

因为反引号产生一个单独的进程并单独运行。因此它会在该进程中执行 cd，但不会更改您当前进程的工作目录。

如果您只需要查看命令是否成功并且想要更改目录，则可以检查它的退出代码：

```
cd /tmp
retval = $?

if [ $retval -gt 0 ]; then
    echo "cd failed"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:28:27.393

因为它 cd 在您打开以运行 cd 的新 shell 的上下文中，请尝试例如：

```
cmdMsg=`cd /tmp; pwd`
echo $cmdMsg 
```

它会告诉你你在 /tmp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:29:35.893

`;`如果要在单个命令中运行所有命令，请使用 with 分隔命令。

例如：

```
cd /; ls; cd ~; ls; cd /var; ls 
```

但是您的问题是 cd 在新生成的外壳中运行，这不会影响您当前的外壳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:35:08.857

子进程不能改变其父进程的环境。

```
pwd
`cd /tmp 2>&1`
pwd 
```

1.  打印当前进程中的工作目录。
2.  创建一个新的子进程。
3.  切换到子进程内的目录 /tmp（同时将 stderr 重定向到 stdout）。
4.  退出子进程。
5.  打印当前进程中的工作目录。

# r - 样本均值的抽样分布

> ID：13033914
> 
> 赞同：3
> 
> 时间：2012-10-23T15:25:33.727
> 
> 标签：r, distribution, sample, sampling, mean

我有一个简单的问题，虽然我无法在任何地方找到答案。我有以下数据集：

```
data.set <- c(7,7,8,8,7,8,9) 
```

Basic Stats 书中的问题是：对于大小为 2 的样本，样本均值的抽样分布是什么？是否有可能在 R 指挥官（或使用命令行）中计算这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:02:58.950

以下是在进行简单随机样本而不进行替换时查看样本分布的几种方法：

```
# Exact
data.set <- c(7,7,8,8,7,8,9)
samps <- combn(data.set, 2)
xbars <- colMeans(samps)
table(xbars)
prop.table(table(xbars))
barplot(table(xbars))

# Simulated
data.set <- c(7,7,8,8,7,8,9)
out <- replicate( 10000, mean( sample(data.set, 2) ) )
prop.table(table(out))
hist(out) 
```

确切的版本适用于小群体（如这个），但对于大群体/样本不实用，例如，如果您的群体规模为 100 并且您的样本大小为 10 并且您可以每秒计算 10,000 个均值，它仍然会需要将近 55 年的时间来制作确切的版本，因此在这种情况下模拟版本会好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:49:05.283

这个

```
mean2 <- function(x,y){ (x+y)/2 }
table(outer(data.set, data.set, "mean2")) / length(data.set)^2 
```

会给

```
 7        7.5          8        8.5          9 
0.18367347 0.36734694 0.30612245 0.12244898 0.02040816 
```

这可能是您正在寻找的那种东西。概率是 9、18、15、6 和 1 的 1/49。

* * *

补充：无需更换

```
mean2 <- function(x,y){ (x+y)/2 }
L     <- length(data.set)
table(outer(data.set, data.set, "mean2")[- ((L+1)*(1:L)-L) ] ) / (L*(L-1)) 
```

给予

```
 7       7.5         8       8.5 
0.1428571 0.4285714 0.2857143 0.1428571 
```

分别是 1/7、4/7、2/7、1/7，

# sublimetext2 - Sublime text 使用不正确的 PATH 环境变量运行

> ID：13033915
> 
> 赞同：1
> 
> 时间：2012-10-23T15:25:33.770
> 
> 标签：sublimetext2

如果我在控制台中运行以下命令，它会输出“/usr/bin:/bin:/usr/sbin:/sbin”：

```
import os  
os.environ['PATH'] 
```

但在其他任何地方 PATH 都是正确的。在两者中`~/.MacOSX/environment.plist`，如果我跑步，`launchctl getenv PATH`我会得到正确的路径。

这使我无法运行 CoffeeCompile。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T20:37:39.250

我遇到了同样的问题，并没有找到传递正确路径的方法。但是，**我有一个解决方法**：只要您从 shell 打开 Sublime Text，它似乎就可以使用正确的 PATH 。换句话说：

1.  按照[这个提示](http://www.sublimetext.com/docs/2/osx_command_line.html)创建 Sublime Text 的 shell 快捷方式。这是可选的，但会派上用场。
2.  [按照此线程的答案中](https://stackoverflow.com/questions/281372/executing-shell-scripts-from-the-os-x-dock)所述创建一个工作流，使用 shell 脚本打开 Sublime Text（使用上面创建的`subl`命令，或直接使用）。这样您就可以从 Dock 中打开 ST。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T00:17:58.310

在 Sublime Text 应用程序包目录中创建一个名为“Sublime Text.sh”的空文本文件

```
/Applications/Sublime\ Text.app/Contents/MacOS 
```

在文本编辑器中打开 Sublime Text.sh 并输入以下内容：

```
#!/bin/sh

. ~/.bash_profile

logger "`dirname \"$0\"`/Sublime Text"

exec "`dirname \"$0\"`/Sublime Text" $@ 
```

在终端设置shell脚本eclipse.sh的可执行标志，即：

```
chmod +x /Applications/Sublime\ Text.app/Contents/MacOS/Sublime\ Text.sh 
```

打开 Sublime Text.app Info.plist 并将键 CFBundleExecutable 的值从 Sublime Text 更改为 Sublime Text.sh。

MacOS X 不会自动检测到 Sublime Text.app 的 Info.plist 已更改。因此，您需要使用 lsregister 命令强制更新终端中的 LaunchService 数据库：

```
/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -v -f /Applications/eclipse/Sublime Text.app 
```

下次从 Dock 或 Finder 启动 Sublime Text.app 时，应该设置环境变量。

这将使得当您打开 Sublime Text.app 时，它将运行您的 shell 脚本而不是 Sublime Text 可执行文件。

然后，您的 shell 脚本执行 .bash_profile（设置路径）并使用该路径启动 Sublime Text 可执行文件。

# android - Android 偏好和 AmbilWarnaDialog

> ID：13033916
> 
> 赞同：1
> 
> 时间：2012-10-23T15:25:34.743
> 
> 标签：android

我有带有复选框、列表等的preferences.xml。我想添加一个选项来更改字体颜色。我想使用 ColorPicker - AmbilWarnaDialog（我知道如何使用它）

当您单击打开 ColorPicker 时，我需要创建什么字段。

# ios - 将快速枚举从 indexPath 更改为字符串

> ID：13033917
> 
> 赞同：0
> 
> 时间：2012-10-23T15:25:34.770
> 
> 标签：ios, uitableview

我有一个 tableView，我通过将行的 indexPath 添加到数组然后添加复选标记来跟踪选择了哪些行。

我正在使用 cellForRowAtIndexPath 方法中的这段代码迭代该数组，它就像一个魅力：

```
for (NSIndexPath * element in indexArray)
    if ([indexPath compare:element] == NSOrderedSame) { 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } 
```

但是，我也将该行的值放入另一个数组中以用于其他目的。我想如果我在这两种情况下都使用第二个数组，我可以简化我的代码，但我不明白我将如何重写上面的代码。我明白了这个概念，但上面的代码使用了 indexPath 比较，我需要将字符串与数组进行比较。

这是我不知道如何改变的“如果”线。

```
for (NSString *element in valueArray) {
    if ([indexPath compare:element] == NSOrderedSame) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

想法？谢谢。

***编辑更多信息***

我的数组包含 400 个不会更改的唯一项目。将他们的 indexPath 添加到我的数组并遍历它以添加复选标记工作正常。我想使用数组的字符串值进行迭代的原因是因为我想向 tableView 添加一个 searchBar。

添加该 searchBar 后，当我进行搜索时，searchResultsTableView 会将我的 400 个唯一项目截断为与该搜索匹配的少数项目 - 所以我们的 searchResultsTableView 中只有一行或几行。现在假设我们选择了搜索中返回的第一行 - 然后我的代码将该行的 indexPath 添加到我的 indexArray 以跟踪复选标记。它将添加索引 0,0。

但是当我们取消搜索模式时，第一行 0,0 将在我的 tableView 中检查，因为我们在 searchResultsTableView 中选择了 0,0 - 即使我们选择的行将在完整 tableView 中的列表下方。看看我要去哪里？所以我的想法是跟踪行的字符串而不是它的 indexPath 来缓解这个问题。

更清晰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:48:51.877

您可以使用字符串和索引值创建 ac 结构，并将其包装到 NSValue 对象中，然后将该对象放入 NSArray? 然后您可以修改您的 for() 循环和 if() 子句以使用 NSValue? 请参阅[如何将 Struct 包装到 NSObject 中](https://stackoverflow.com/questions/5691881/how-to-wrap-a-struct-into-nsobject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:37:57.433

您可以使用一组（可变）字典作为表视图的数据源。每个字典都包含`NSNumber`一行的文本值和选择状态 (as )。（我在这里假设您的表格视图只有一个部分）。

然后`cellForRowAtIndexPath`你可以做类似的事情

```
NSDictionary *d = [dataArray objectAtIndex:indexPath.row];
NSString *value = [d objectForKey:@"value"];
BOOL selected = [[d objectForKey:@"selected"] boolValue]; 
```

并相应地设置单元格的内容和附件类型。

要更改选择状态：

```
NSDictionary *d = [dataArray objectAtIndex:indexPath.row];
BOOL selected = [[d objectForKey:@"selected"] boolValue];
[d setObject:[NSNumber numberWithBool:!selected] forKey:@"selected"]; 
```

现在，对于您的搜索，您将创建该数组的过滤子集。但是因为过滤后的数组引用了相同的字典，所以当您更改搜索文本或完成搜索时，每个条目的选择状态都会保留。

当然，当搜索处于活动状态时，您必须在上述方法中使用过滤后的数组。

# css - css - 使用媒体查询来缩放内容

> ID：13033918
> 
> 赞同：0
> 
> 时间：2012-10-23T15:25:34.990
> 
> 标签：css, scalability, media-queries, scaling, viewport

我想知道是否有一种方法可以使用媒体查询来缩放 div 内容（而不是整个浏览器的内容）。我有一个流体宽度站点，当窗口调整大小超过某个点时，一些内容会隐藏在其他一些内容后面，我希望能够对其进行缩放。

我有两个问题 - 一个是我使用 ems 作为字体，但字体不会随着浏览器调整大小而缩放。他们应该这样做吗？

其次，我想调整大小的 div 的一些内容是图像 - 所以我不确定如何缩放这些内容，而不是使用某些浏览器不支持的 css scale 属性。

任何人都可以推荐最简单的方法来处理这个问题吗？我附上了网站上发生的事情的屏幕截图。![在此处输入图像描述](../Images/cc16d21ba6b1c31a7bb8e85487c01790.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:52:07.293

我相信昨天提到了其中的一部分：

要根据屏幕调整字体大小，我相信您需要视口大小的字体：

```
vw vh and vmin. 
```

[http://css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/)

要调整图像大小，只需为每个屏幕尺寸指定相应的尺寸。您还可以根据屏幕大小或任何 CSS 属性设置特定的字体大小：

```
/* mobile phones */
@media only screen
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* This is where you would specify the width and hight of your images */
}

/* iPads (portrait and landscape) */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
} 
```

这里还有更多内容：[Twitter Bootstrap 的响应式背景？](https://stackoverflow.com/questions/13018000/responsive-backgrounds-with-twitter-bootstrap/13018069#13018069)

# .net - TSQL ADO.NET 返回不正确的行数

> ID：13033923
> 
> 赞同：0
> 
> 时间：2012-10-23T15:25:44.737
> 
> 标签：.net, tsql, ado.net, sql-server-2008-r2, concurrent-collections

在 C# .NET 4.0 中有一个 BlockingCollection 取自

[阻塞集合](http://msdn.microsoft.com/en-us/library/dd267312%28v=vs.100%29.aspx)

示例 BC_AddTakeCompleteAdding

我的问题是 .NET 中的 SQLCommand.ExecuteNonQuery 返回错误的行数。
更新在主键上，所以应该得到一行。
有时会得到正确的数字。
在 .NET 中经常得到大于 1 (100-10000) 的数字。
即使针对相同的 PK 运行完全相同的 TSQL，它也不总是相同的错误数字。
每次都可以将TSQL复制粘贴到SSMS并得到正确答案（1）。

```
update [docSVsys]  set [FTSstatus] = '1', [FTSdate] = '10/23/2012 8:51:32 AM' , 
textHash = '5b4d553360fbe733a66eebf36fa666f7', [textSize] = '39504' 
where [sID] = '1525850' 
```

声明使用的变量并且没有其他变量被命名为 rowsRet5

```
int rowsRet5 = sqlCmdUpate.ExecuteNonQuery(); 
```

检查了该 textHash 值，仅更新了一行。
它似乎执行了正确的更新，但报告了错误的计数。
鉴于计数是错误的，不愿意在生产数据上使用它。

该命令位于消费者端的末尾。
在此更新之上有两个 .BeginExecuteNonQuery。
这些更新针对不同的表，不引用 docSVsys。
这些表确实有对 docSVsys 的 FK 引用。
在调试中，如果我停止回调（减慢速度），那么我不会收到此错误。
我想知道任务中的 BeginExecuteNonQuery 是否不是问题。
这个错误的 rowCount 与任何一个异步 rowCount 都不匹配，但在同一范围内。

此基本代码已处理数百万行。
没有改变任何TSQL。
转换为生产者消费者时它变坏了。

要将文档标记为正在进行中，请在生产者端使用非常相似的 TSQL，它没有问题。该循环也有一个 BeginExecuteNonQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:25:26.240

问题似乎是在生产者和消费者端共享连接和命令。

是的，我意识到这显然是一件坏事。
当它是一个单循环（没有生产者消费者端）时，可以共享该命令。
当我转换为消费者生产者时，我没有考虑拆分命令。

# css - 如何在 div 标签中居中视频标签？

> ID：13033925
> 
> 赞同：4
> 
> 时间：2012-10-23T15:25:49.907
> 
> 标签：css

我似乎无法用通常的“margin：0px auto 0px auto;”来定位这个视频标签。帮助小伙子们！感谢您查看这个！

```
#wrapper #trailer {
    position: absolute;
    z-index: 3;
    margin-top: 55px;
    width: 987px;
    height: 620px;
    background-color: #000;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    border: 1px solid #009;
}
#wrapper #trailer #close {
    position: absolute;
    z-index: 2;
    top: 20px;
    right: 231px;
    cursor: pointer;
}
#wrapper #trailer video {
        margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    border: 1px solid #009;
} 
```

和 html 并按要求解释我的场景：

```
<div id="trailer">
<img id="close" src="images/close.png" alt="close" />
<div id="video">
<video controls  autoplay="autoplay" poster="video/trailer.jpg" width="600"      onclick="if(/Android/.test(navigator.userAgent))this.play();">
<source src="video/trailer.mp4" type="video/mp4" />
<source src="video/trailer.webm" type="video/webm" />
<source src="video/trailer.ogv" type="video/ogg" />
<embed src="video/flashfox.swf" width="600" height="480"  flashVars="autoplay=true&amp;controls=true&amp;loop=true&amp;src=trailer.mp4" allowFullScreen="true" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_en" />
</video>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T15:36:40.577

实际上，当涉及到样式表时，html5 视频和图像都算作文本。因此，您必须进行的唯一更改就是在您的 css 代码中。使用`<div id="video>`您包装视频的标签，您只需添加：

```
#video {
   text-align: center;
   //rest of rules here
} 
```

而不是整天玩利润。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-11T09:05:43.627

如果您不知道您的视频，您仍然可以使用 css 转换将其居中：

```
video {
  position: relative;
  left: 50%;
  transform: translateX(-50%);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T15:33:31.640

您必须`margin: 0 auto`在周围设置`<div id="video">`，而不是`<video>`标签：

```
#video {
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    border: 1px solid #009;
} 
```

代替

```
#wrapper #trailer video {
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    border: 1px solid #009;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:27:59.420

您需要在视频 div 上设置宽度，以便`margin: 0 auto`; 正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T09:09:00.987

```
//Try This
#parant{
 width:100%;
 height:300px;
 text-align:center;
}
#video{
width:100px;
height:100px;
margin:auto; 
```

}

# c# - 依赖注入重构

> ID：13033926
> 
> 赞同：2
> 
> 时间：2012-10-23T15:25:51.437
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0, fakeiteasy

我有这个ctor：

```
 public Section()
    {
        _tabs = new TabCollection(this);
        _sections = new SubSectionCollection(this);
    } 
```

我想得到这样的东西：

```
public Section()
        : this(new TabCollection(this), new SubSectionCollection(this))
    {

    }

     public Section(TabCollection tabCollection, IList<ISection> sections)
     {
         _tabs = tabCollection;
         _sections = sections;

     } 
```

当然，这是行不通的。有人对我如何重构此代码有任何建议吗？我需要这样做才能在单元测试中模拟 Section 类型的对象。我们正在使用 FakeItEasy 测试框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:33:16.813

一个问题是您的第一个构造函数，即没有参数的构造函数，委托给第二个构造函数。换句话说，第二个将由第一个使用`this()`语句中的参数调用。然而，第一个还包含`_tabs`and的设置器`_sections`，这是多余的。它应该如下所示：

```
public Section()
    : this(new TabCollection(this), new SubSectionCollection(this))
{ }

public Section(TabCollection tabCollection, IList<ISection> sections)
{
    _tabs = tabCollection;
    _sections = sections;
} 
```

不过，这是构造函数链接，这是依赖注入中使用的一种技术。这是你要问的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:52:13.100

依赖注入并不一定意味着你的类不能在构造时实例化它的一些字段/属性。我通常将构造函数注入用于“服务”，而不是子对象的集合。

但是，我不知道您的代码的所有细节，因此您可能想要使用工厂模式。像 SectionFactory 这样的东西在这里可能有意义......

```
public class Section
{
    internal Section(TabCollection tabColl, SectionCollection subSections)
    {
        // check for null, etc.

        // do whatever you need to do to finish construction
        tabColl.Parent = this;
        subSections.Parent = this;
    }
}

public class SectionFactory : ISectionFactory
{
    public Section Create()
    {
        var tabs = new TabCollection();
        var subs = new SectionCollection();

        return new Section(tabs, subs);
    }
} 
```

# jquery - 根据兄弟姐妹的内部内容使用 jQuery 添加菜单项

> ID：13033928
> 
> 赞同：0
> 
> 时间：2012-10-23T15:25:55.380
> 
> 标签：jquery, dom, append

我正在为客户更新公司网站，但不允许编辑他们的 html/css/php。当我需要进行小的更改时，例如从主导航中添加或删除，我必须使用 JS 覆盖文件和 jQuery。不管你喜不喜欢，这是他们的系统。

我需要将一个简单的项目添加到无序列表中。定位 UL 很容易，因为 nav 包装器有一个 ID。我不想使用 nth:child ，因为他们希望这个新项目位于两个特定的其他项目之间，这可能会发生变化。所有 LI 标签都没有类或 ID。每个 LI 内部都有一个链接/锚点。我需要能够根据内部锚点的文本选择列表项。

```
<div id="nav">
<ul>
  <li><a href="">Something 1</a></li>
  <li><a href="">Something 2</a></li>
  // Need to insert here, but only because it must go after 
     Something 2, which itself may change positions in the future.
  <li><a href="">Something 3</a></li>
  <li><a href="">Something 4</a></li>
</ul>
</div> 
```

使用 jQuery，我怎样才能最安全地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:38:11.900

这应该做你想要的..

```
$('#nav li').filter(function(){
     return $(this).text() == 'Something 2';
}).after('<li><a href="">Something new</a></li>'); 
```

* * *

一种更安全的比较方法是将两个字符串修剪并转换为小写。
此外，您应该在 DOMready 事件之后调用您的代码

```
$(function(){
    var existingElement = 'Something 2'.toLowerCase();
    $('#nav li').filter(function(){
         var cleanText = $.trim($(this).text()).toLowerCase();
         return cleanText  == existingElement;
    }).after('<li><a href="">Something new</a></li>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:29:42.567

试试这个...

```
$("ul#nav li").filter(function() {
    return $(this).find("a").text() == "Something 2";
}).after("<li>your element goes here</li>");​ 
```

这是一个工作小提琴...... [http://jsfiddle.net/Sbm7D/](http://jsfiddle.net/Sbm7D/)

# google-maps - 谷歌地图强制使用英语

> ID：13033929
> 
> 赞同：6
> 
> 时间：2012-10-23T15:25:56.757
> 
> 标签：google-maps

嗨，我想知道是否可以强制英语作为谷歌地图的语言。我有一个使用谷歌地图的小应用程序，但如果我尝试从希腊浏览器使用它，所有字符都在希腊（如果我的一个朋友在埃及使用它，字符也是阿拉伯文，也会发生同样的情况）。有什么代码可以用来解决问题吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T15:37:58.200

您可以在加载地图时添加某些 GET 参数，例如`language=en&region=US`. 完整示例：

```
https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&language=en&region=US 
```

有关可用选项，[请检查 API Docs 本地化设置](https://developers.google.com/maps/documentation/javascript/localization)。

# ef-code-first - 如何首先定义嵌套的识别关系实体框架代码

> ID：13033934
> 
> 赞同：5
> 
> 时间：2012-10-23T15:26:14.270
> 
> 标签：ef-code-first, entity-relationship, one-to-many, entity-framework-5

我目前在一个简单的测试应用程序中首先使用 EF5 代码来测试各种功能。我已经定义了代表一对多链接的两个实体之间的“识别关系”。这里我定义了一个有很多子 Photo 实体的 PhotoCollection；

```
public class PhotoCollection
{
    public int Id { get; set; }
    public virtual ISet<Photo> Photos { get; private set; }

    public PhotoCollection()
    {
        Photos = new HashSet<Photo>();
    }
}

public class Photo
{
    [Key, ForeignKey("Parent"), Column(Order = 1)]
    public int PhotoCollectionId { get; set; }

    [Key, Column(Order = 2)]
    public int PhotoId { get; set; }

    public virtual PhotoCollection Parent { get; set; }

    [Required, MaxLength(200)]
    public string FilePath { get; set; }

    public Photo()
    {
    }

} 
```

我对 OnModelCreating 的实现包括：

```
modelBuilder.Entity<Photo>().Property(p => p.PhotoId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

结果是，当我删除 PhotoCollection 时，所有照片实体也会被删除，这是由“识别关系”提供的。伟大的。

**我的问题是如何在这个对象图中定义一个更深的层次**，假设我想要一个 PhotoProperties 作为来自 Photo 的一对多集合。在这种情况下，我想删除 PhotoCollection，所有适当的 Photo 和 PhotoProperty 记录也将被删除。使用上述方法，是否有必要将 GrandParent 属性添加到指向 PhotoCollection 的 PhotoProperty？

我可以在模型构建器中使用流利的 Api 获得相同的结果吗？

我设法在网上找到的唯一示例是单级父>子层次结构。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T18:42:07.547

在我看来，这应该有效：

```
public class Photo
{
    [Key, ForeignKey("Parent"), Column(Order = 1)]
    public int PhotoCollectionId { get; set; }

    [Key, Column(Order = 2)]
    public int PhotoId { get; set; }

    public virtual PhotoCollection Parent { get; set; }

    public virtual ISet<PhotoProperty> PhotoProperties { get; private set; }

    //...
}

public class PhotoProperty
{
    [Key, ForeignKey("Parent"), Column(Order = 1)]
    public int PhotoCollectionId { get; set; }

    [Key, ForeignKey("Parent"), Column(Order = 2)]
    public int PhotoId { get; set; }

    [Key, Column(Order = 3)]
    public int PhotoPropertyId { get; set; }

    public virtual Photo Parent { get; set; }

    //...
} 
```

请注意，`PhotoCollectionId`in`PhotoProperty`不是指 a ，而是指`PhotoCollection`复合外键的一部分。`(PhotoCollectionId,PhotoId)``Photo`

是的，您可以使用 Fluent API 定义整个映射：

```
modelBuilder.Entity<PhotoCollection>()
    .HasMany(pc => pc.Photos)
    .WithRequired(p => p.Parent)
    .HasForeignKey(p => p.PhotoCollectionId);

modelBuilder.Entity<Photo>()
    .HasKey(p => new { p.PhotoCollectionId, p.PhotoId });

modelBuilder.Entity<Photo>()
    .Property(p => p.PhotoId)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

modelBuilder.Entity<Photo>()
    .HasMany(p => p.PhotoProperties)
    .WithRequired(pp => pp.Parent)
    .HasForeignKey(pp => new { pp.PhotoCollectionId, pp.PhotoId });

modelBuilder.Entity<PhotoProperty>()
    .HasKey(pp => new { pp.PhotoCollectionId, pp.PhotoId, pp.PhotoPropertyId });

modelBuilder.Entity<PhotoProperty>()
    .Property(pp => pp.PhotoPropertyId)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

# xml - XSD：不同文件中同名的元素一起使用

> ID：13033937
> 
> 赞同：0
> 
> 时间：2012-10-23T15:26:29.220
> 
> 标签：xml, xsd

我有一组 XSD 文件，每个文件具有以下结构：

message_i.xsd

```
<xs:complexType name="message_i">
    <!-- definition of message -->
</xs:complexType>

<xs:element name="document" type="message_i"></xs:element> 
```

因此，每个 xsd 文件都包含一个名为“文档”的元素，该元素属于该文件定义的类型。接收特定“文档”类型消息的 Web 服务正在使用 xsd 文件。

问题是我需要有一堆元素“文档”，但类型不同。

现在我想将多条消息合二为一。我创建了以下代码：

```
<!-- some data -->
<xs:element name="document1" type="message1">
<xs:element name="document4" type="message4">    
<xs:element name="document5" type="message5"> 
```

但我收到错误消息，指出此文档包含目标命名空间中已存在的元素。这个名字就是“文档”。

如何创建包含不同消息的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:53:51.553

如果没有在每个 xsd 中定义每个复杂类型，就看不到这一点，但是

为每个 xsd 添加一个命名空间

例如

```
<xs:schema xmlns:DOC1="http://www.mySite.Com/DOC1" /> 
```

那么您的复杂类型将是 DOC1:message_i

所以你可以有，

```
<xs:element name="document1" type="DOC1:message_i">
<xs:element name="document4" type="DOC2:message_i">
<xs:element name="document5" type="DOC3:message_i"> 
```

# javascript - 正则表达式仅适用于字符 0-9？

> ID：13033941
> 
> 赞同：0
> 
> 时间：2012-10-23T15:26:33.803
> 
> 标签：javascript, jquery, regex

我正在尝试仅为字符 0-9 查找/使用正则表达式。如果可能的话，我还试图让用户能够使用他们的普通键（退格键、左右箭头、退格键）。

另外，我想停下来。（句点）、%（百分比）和 '（单引号）。

这是我到目前为止所拥有的，但它并没有阻止上述三个问题：

```
function onlyNumbers(evt) {
        var theEvent = evt || window.event;
        var key = theEvent.keyCode || theEvent.which;
        key = String.fromCharCode( key );
        var regex = /[0-9]/;
        //alert(theEvent.keyCode)
        if( !regex.test(key) && theEvent.keyCode!='8' && theEvent.keyCode!='46'&& theEvent.keyCode!='37' && theEvent.keyCode!='39') {//keyCode8 = backspace
            theEvent.returnValue = false;
            if(theEvent.preventDefault) theEvent.preventDefault();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:29:20.287

你应该使用`||`而不是`&&`

您还可以使用正则表达式`[^.%']`.it 匹配除`.`, `%`,之外的任何字符`'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:34:16.110

我会使用一组允许的 keyCodes 并检查：

```
function onlyNumbers(evt) {
    var theEvent = evt || window.event;
    var key = theEvent.keyCode || theEvent.which;

    // 0-9, backspace, left and right arrows
    var allowedKeyCodes = [48,49,50,51,52,53,54,55,56,57,8,37,39]; 

    if(allowedKeyCodes.indexOf(key) === -1) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();
    }
} 
```

# ruby-on-rails - Rails 引擎 gemspec 的“找不到 gem”

> ID：13033944
> 
> 赞同：2
> 
> 时间：2012-10-23T15:26:43.133
> 
> 标签：ruby-on-rails, gem, jruby

我有一个名为“后端”的 Rails 3.2 引擎（可安装）。

Ruby 平台是 JRuby 1.7.0 (1.9.3p203)。

我还有一个 Rails 3.2 应用程序（称为 my_app），其中 Gemfile 包含：

```
gem 'backend', :path => "/home/jacob/projects/backend" 
```

我在 my_app 的根目录执行“捆绑安装”并得到以下错误：

**“在 /home/jacob/projects/backend 的源代码中找不到 gem 'backend (>= 0) java'。源不包含任何版本的 'backend (>= 0) java'”**

后端.gemspec：

```
$:.push File.expand_path("../lib", \__FILE__)  
require "backend/version"

Gem::Specification.new do |s|  
  s.name        = "Backend"  
  s.version     = Backend::VERSION  
  s.authors     = [""]  
  s.email       = [""]  
  s.homepage    = ""  
  s.summary     = ""  
  s.description = ""  

  s.files = Dir["{app,config,db,lib}/\**/*"] + ["MIT-LICENSE", "Rakefile", "README.rdoc"]
  s.test_files = Dir["test/**/*"]
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:50:02.540

我认为 gem 名称是区分大小写的。尝试

```
s.name = "backend" 
```

在您的 gemspec 中，或

```
gem "Backend", , :path => "/home/jacob/projects/backend" 
```

在你的 Gemfile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:31:03.750

可能来自对 j​​ruby-openssl 的依赖的错误

# c# - 在 WinForms 中制作类似应用程序的向导

> ID：13033954
> 
> 赞同：0
> 
> 时间：2012-10-23T15:27:24.877
> 
> 标签：c#, winforms

我一直在开发一个带有一些表单字段等的简单 asp 应用程序。我想让它成为一个类似向导的应用程序，比如当你输入一些字段时，你可以单击下一步，一个新部分出现在同一个表单上，最后使用所有数据从表格中收集，我可以在最后执行我的操作。

请你把我链接到这样的winforms教程吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:29:19.953

我推荐使用这个组件，我已经在一些 WinForms 应用程序中成功使用过它：

[http://www.codeproject.com/KB/miscctrl/DesignTimeWizard.aspx](http://www.codeproject.com/KB/miscctrl/DesignTimeWizard.aspx)

它带有源代码，因此您可以看到它在做什么，以及它是如何做的。您可以从中学习并修改您需要的内容，甚至可以按原样使用它。

CodePriject.com 上还有其他 WinForms 向导项目，我也看过一些文章，但以我有限的经验，这是我见过的最好的，价格免费，源代码可供您使用和。

# .htaccess - Wordpress 多站点安装生成的 .htaccess 失败

> ID：13033958
> 
> 赞同：1
> 
> 时间：2012-10-23T15:27:39.323
> 
> 标签：.htaccess, wordpress

我的第一个（新的）Wordpress 安装和它的多站点安装。一切都很顺利，直到 Wordpress 安装过程生成以下代码放入 .htaccess 文件中：

```
 RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]

    # uploaded files
    RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    RewriteRule . index.php [L] 
```

通过向我显示 403 Forbidden 错误，这立即使整个网站无法使用。现在据我所知，只要有适当的目录和文件权限，一切都应该没问题。另外我将它安装到root等中。

我一直在 Google 上寻找解决方案，发现（对于这个特定问题）某些主机可能需要将整个 .htaccess 包装在：

```
 <IfModule mod_rewrite.so>
    ...
    </IfModule> 
```

它现在适用于根索引（index.php）并显示该站点，但只要我单击任何测试帖子（更改地址）就会失败。

所以我想我被卡住了，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:30:27.127

听起来您的网站没有加载 mod_rewrite。它应该在您的服务器配置中，看起来像这样：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

此外，确保 wordpress 安装在 apache 可读的用户/组/权限下。

# c# - Paypal C# API：CreateInvoiceRequest dueDate

> ID：13033959
> 
> 赞同：0
> 
> 时间：2012-10-23T15:27:42.180
> 
> 标签：c#, paypal, invoice

我在使用 Paypal 的 CreateInvoiceRequest 时遇到问题，所以问题是：

**CreateInvoiceRequest.dueDate**（或 CreateAndSendInvoiceRequest）使用的日期时间格式是什么？

所有[文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_CreateInvoice)都说：

> xs:dateTime （可选）发票付款到期的日期。

提前致谢。

**编辑：** 使用格式说明符“s”（例如：2009-06-15T13:45:30）适用于 Paypal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:12:47.067

它很可能是 ISO 8601，请参阅[http://www.w3.org/TR/xmlschema-2/#isoformats](http://www.w3.org/TR/xmlschema-2/#isoformats)。使用`XmlConvert.ToString(DateTime.Now)`来查看它的外观。

但是，您如何使用 PayPal 的网络服务？您可能会发现 Visual Studio 的集成 Web 服务引用工具很有用，例如`[Your Project in Solution Explorer] -> References -> [Right Click] -> Add Service Reference`，在这种情况下，将为您自动生成 Web 服务包装器。

# crystal-reports - 水晶报表整行高度增加

> ID：13033969
> 
> 赞同：0
> 
> 时间：2012-10-23T15:28:03.133
> 
> 标签：crystal-reports

（破碎的图像在这里）

增长会增加单行列的高度，但不会增加整行的高度。我已经检查过，它可以为所有字段增长，其中一个字段已变灰，无法检查。在字段的格式字段属性中选中“保持对象在一起”框。我检查并在字段属性和部分专家中检查了“保持在一起”字段。我尝试了所有不同的方法，但不知道在至少一个字段高度连续增加的同时，我会使用哪种公式来获得整行增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-08T12:43:51.363

您可以通过使用框和线而不是字段周围的固定边框来解决此问题。在跨越标题和详细信息部分的字段周围放置一个框，然后右键单击并格式化框。勾选/选中“打印时扩展到部分底部”。在每个字段之间垂直放置分隔线，确保它们接触到框的顶部（不要担心接触到底部）。现在右键单击每个垂直线和格式线。勾选/选中“打印时扩展到部分底部”。现在，当您的 can grow 字段超过 1 行时，字段将显示为您希望的边框！-

更多参考 - 点击[这里](http://www.forumtopics.com/busobj/viewtopic.php?t=96790&sid=1308037c515ef175d966fc14e79d0a3c)

当一个列/字段值增长时，整行高度没有增加的另一个原因是……固定的水平分隔线将仅触及详细信息字段。确保您添加了任何水平分隔线，那么它应该远离添加的字段。（即，清除保证金必须在该行和添加的数据字段列之间）。这个解决方案对我很有效:)

# ruby - 未能定义简单的单元测试测试用例

> ID：13033977
> 
> 赞同：0
> 
> 时间：2012-10-23T15:28:20.437
> 
> 标签：ruby, unit-testing, ruby-1.9.1

我正在尝试使用测试单元在 Ruby 1.9.1（Ubuntu Linux 12.04 64 位）中做一个简单的测试用例：但它说我的 TestCase 的初始化方法缺少参数。当我进一步查看错误时，它告诉我它试图启动 /usr/lib/ruby/1.9.1/minitest。

但是，我之前安装了测试单元 gem。

这是第一个源文件：Run.rb

```
#!/usr/bin/env ruby

require "test/unit"
require_relative "NumbersSet.rb"

def draw_result
    the_drawn_result = nil
    loop do
        the_drawn_result = rand(1000)
        break if the_drawn_result >= 100
    end
    the_drawn_result
end

def do_operation(operation, number_1, number_2)
    return nil if number_1 < 1 or number_2 < 1
    number_1, number_2 = number_2, number_1 if  number_1 < number_2
    case operation
        when :add
            result = number_1 + number_2
            return "#{number_1} + #{number_2} = #{result}", result
        when :sub
            return nil if number_1 == number_2 # A zero result will not help us
            result = number_1 - number_2
            return "#{number_1} - #{number_2} = #{result}", result
        when :mul
            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this would be identity operation
            result = number_1 * number_2
            return "#{number_1} * #{number_2} = #{result}", result
        when :div
            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this could be identity operation
            return nil if number_1 % number_2 != 0
            result = number_1 / number_2
            return "#{number_1} / #{number_2} = #{result}", result
        else
            raise "Unknown operation #{operation} !"
    end
end

def play
    drawn_numbers = NumbersSet.draw
    puts drawn_numbers.inspect, draw_result
end

class DrawTest < Test::Unit::TestCase
    def draw_test

        assert_equal(nil, do_operation(:add, -3, 1))
        assert_equal(nil, do_operation(:add, 1, -1))
        assert_equal(nil, do_operation(:add, 5, 0))
        assert_equal(nil, do_operation(:add, 0, 5))
        assert_equal(nil, do_operation(:add, 3, 5))
        assert_equal(nil, do_operation(:add, 5, 3))

        assert_equal(nil, do_operation(:sub, 5, 3))
        assert_equal(nil, do_operation(:sub, 3, 5))
        assert_equal(nil, do_operation(:sub, 3, 3))

        assert_equal(nil, do_operation(:mul, 3, 5))
        assert_equal(nil, do_operation(:mul, 5, 3))
        assert_equal(nil, do_operation(:mul, 3, 1))
        assert_equal(nil, do_operation(:mul, 1, 3))

        assert_equal(nil, do_operation(:div, 20, 3))
        assert_equal(nil, do_operation(:div, 3, 20))
        assert_equal(nil, do_operation(:div, 20, 1))
        assert_equal(nil, do_operation(:div, 1, 20))
        assert_equal(nil, do_operation(:div, 20, 4))
        assert_equal(nil, do_operation(:div, 5, 20))

    end
end

OPERATIONS = [:add, :sub, :mul, :div]

DrawTest.new.draw_test 
```

这是第二个文件：NumbersSet.rb

```
class NumbersSet

    def self.draw
        plaques = {}
        (1..10).each { |value| plaques[value] = 2}
        [25,50,75,100].each { |value| plaques[value] = 1}

        draw_possibilities = (1..10).to_a << 25 << 50 << 75 << 100
        the_draw = []
        6.times do |loop_index|
            drawn_number_index = nil
            loop do
                drawn_number_index = rand(draw_possibilities.size)
                break if plaques[draw_possibilities[drawn_number_index]] > 0
            end
            the_draw << draw_possibilities[drawn_number_index]
            plaques[draw_possibilities[drawn_number_index]] -= 1
        end
        the_draw
    end

end 
```

这是终端错误：

```
$ ./Run.rb 
/usr/lib/ruby/1.9.1/minitest/unit.rb:971:in `initialize': wrong number of arguments (0 for 1) (ArgumentError)
    from ./Run.rb:77:in `new'
    from ./Run.rb:77:in `<main>' 
```

那么，这真的是我自己的错误编码，还是安装问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:46:19.413

我发现出了什么问题：

在文件 Run.rb 中，我定义了我的 TestCase 子类：

1.  DrawTest 类，作为 Test::Unit::TestCase 的子类，必须使用以 test => 开头的名称来定义其测试方法，所以不是 draw_test。
2.  我不能像在以前的版本中那样创建 DrawTest 类的实例

所以这个源文件更好：

```
#!/usr/bin/env ruby

require "test/unit"
require_relative "NumbersSet.rb"

def draw_result
    the_drawn_result = nil
    loop do
        the_drawn_result = rand(1000)
        break if the_drawn_result >= 100
    end
    the_drawn_result
end

def do_operation(operation, number_1, number_2)
    return nil if number_1 < 1 or number_2 < 1
    number_1, number_2 = number_2, number_1 if  number_1 < number_2
    case operation
        when :add
            result = number_1 + number_2
            return "#{number_1} + #{number_2} = #{result}", result
        when :sub
            return nil if number_1 == number_2 # A zero result will not help us
            result = number_1 - number_2
            return "#{number_1} - #{number_2} = #{result}", result
        when :mul
            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this would be identity operation
            result = number_1 * number_2
            return "#{number_1} * #{number_2} = #{result}", result
        when :div
            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this could be identity operation
            return nil if number_1 % number_2 != 0
            result = number_1 / number_2
            return "#{number_1} / #{number_2} = #{result}", result
        else
            raise "Unknown operation #{operation} !"
    end
end

def play
    drawn_numbers = NumbersSet.draw
    puts drawn_numbers.inspect, draw_result
end

class DrawTest < Test::Unit::TestCase
    def test_draw

        assert_equal(nil, do_operation(:add, -3, 1))
        assert_equal(nil, do_operation(:add, 1, -1))
        assert_equal(nil, do_operation(:add, 5, 0))
        assert_equal(nil, do_operation(:add, 0, 5))

        assert_equal(nil, do_operation(:sub, -3, 1))
        assert_equal(nil, do_operation(:sub, 1, -1))
        assert_equal(nil, do_operation(:sub, 5, 0))
        assert_equal(nil, do_operation(:sub, 0, 5))

        assert_equal(nil, do_operation(:mul, -3, 1))
        assert_equal(nil, do_operation(:mul, 1, -1))
        assert_equal(nil, do_operation(:mul, 5, 0))
        assert_equal(nil, do_operation(:mul, 0, 5))

        assert_equal(nil, do_operation(:div, -3, 1))
        assert_equal(nil, do_operation(:div, 1, -1))
        assert_equal(nil, do_operation(:div, 5, 0))
        assert_equal(nil, do_operation(:div, 0, 5))

        assert_equal(nil, do_operation(:add, 3, 5))
        assert_equal(nil, do_operation(:add, 5, 3))

        assert_equal(nil, do_operation(:sub, 5, 3))
        assert_equal(nil, do_operation(:sub, 3, 5))
        assert_equal(nil, do_operation(:sub, 3, 3))

        assert_equal(nil, do_operation(:mul, 3, 5))
        assert_equal(nil, do_operation(:mul, 5, 3))
        assert_equal(nil, do_operation(:mul, 3, 1))
        assert_equal(nil, do_operation(:mul, 1, 3))

        assert_equal(nil, do_operation(:div, 20, 3))
        assert_equal(nil, do_operation(:div, 3, 20))
        assert_equal(nil, do_operation(:div, 20, 1))
        assert_equal(nil, do_operation(:div, 1, 20))
        assert_equal(nil, do_operation(:div, 20, 4))
        assert_equal(nil, do_operation(:div, 5, 20))

    end
end

OPERATIONS = [:add, :sub, :mul, :div] 
```

# python - django 将关系添加到用户模型

> ID：13033979
> 
> 赞同：3
> 
> 时间：2012-10-23T15:28:22.210
> 
> 标签：python, django, django-models

我有一个使用内置用户模型的 django 项目。

我需要向用户添加关系。现在，用户喜欢的文章的“喜欢”关系和其他用户关注的“关注”关系。

定义这些关系的最佳方式是什么？django 文档建议创建一个与用户具有一对一关系的 Profile 模型，以向用户添加字段。但是在我的情况下，不会将额外的字段添加到用户配置文件中，这太过分了。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:42:33.677

对于这些特殊的多对多关系，你必须在模型中定义它们：

```
class UserFollowing(models.Model):
    user = models.ForeignKey(User, related_name='following')
    following = models.ForeignKey(User, related_name='followed_by') 
```

因此，如果您有用户，则可以执行以下操作：

```
user = User.objects.get(...)
user.following.all() # all users this user is following
user.followed_by.all() # all users who follow this user 
```

至于文章，您已经设置了类似的架构：

```
class ArticleLike(models.Model):
    article = models.ForeignKey(Article, related_name='likes')
    like = models.ForeignKey(User, related_name='articles_like')

Article.objects.get(...).likes.all()

User.objects.get(...).articles_like.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:44:47.870

在当前发布的 Django 版本 [ 最高 1.4.x ] 上，标准做法是定义一个配置文件对象。这比通过扩展/修改“污染”内置用户模型更可取。即将发布的 Django 版本将允许创建[自定义用户模型](https://docs.djangoproject.com/en/dev/topics/auth/#auth-custom-user)。

总之：

*   可以与 Django 的当前生产版本一起使用的最简洁的解决方案是创建一个配置文件模型并将“喜欢”和“关注”关系放在那里
*   下一个版本的 Django 将允许您提供自己的用户模型 - 这正是您所需要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:27:39.170

您应该尝试为此使用[Django 关系](https://github.com/coleifer/django-relationships)应用程序。它旨在创建之间的关系`auth.users`，您将通过研究该代码了解如何创建自引用跟随。[然后，您可以将其扩展为更通用的类型或使用Django 内容类型框架](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)编写自己的

但是，由于 Django ORM 本质上并未完全定义为图形数据库，因此您应该尝试坚持关系数据库概念并酌情使用`ManyToMany`关系`ForeignKey`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:44:59.660

将文章中的多对多关系添加到 User 模型。每次用户喜欢一篇文章时，都会将他添加到其中。该字段的长度将是该文章中的点赞数。

# orbeon - 是什么导致 Orbeon Forms 对 XForm 进行无休止的重新验证，直到它得到一个 stackoverflow

> ID：13033984
> 
> 赞同：2
> 
> 时间：2012-10-23T15:28:29.183
> 
> 标签：orbeon

我正在使用 Orbeon Forms CE 版本 orbeon-4.0.0.M11.201210030654-CE。

我有一个带有多个实例的 XForm (XHTML)，我在其中一个实例上使用 required="true()" 进行了绑定，并使用 xxforms-invalid 和 xxforms-valid 来切换案例。以下是我的 xform 中的一些代码示例。

```
<xforms:instance id="teaching-load-instance" src="oxf:/apps/uis-common/model/uis-teaching-load-xforms-instance.xml"/>

<xforms:bind nodeset="instance('teaching-load-instance')/teaching_load">
    <xforms:bind nodeset="module_id" required="true()"/>
</xforms:bind>

<xforms:action ev:event="xxforms-invalid" ev:observer="teaching-load-instance">
    <xforms:toggle case="invalid-form-case"/>
</xforms:action>

<xforms:action ev:event="xxforms-valid" ev:observer="teaching-load-instance">
    <xforms:toggle case="valid-form-case"/>
</xforms:action> 
```

访问此 xform 页面时，将引发 stackoverflow 错误。

这是来自 orbeon.log 文件的调试日志。

```
2012-10-23 21:42:42,470 DEBUG XFormsServer  -         start dispatching {name: "xxforms-valid", target: "month-instance"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -           start performing default action {}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -           end performing default action {time (ms): "0"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -         end dispatching {time (ms): "0"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -         start dispatching {name: "xxforms-valid", target: "verification-instance"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -           start performing default action {}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -           end performing default action {time (ms): "0"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -         end dispatching {time (ms): "0"}
2012-10-23 21:42:42,470 DEBUG XFormsServer  -         start dispatching {name: "xxforms-valid", target: "modules-instance"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -           start performing default action {}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -           end performing default action {time (ms): "0"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -         end dispatching {time (ms): "1"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -         start dispatching {name: "xxforms-invalid", target: "teaching-load-instance"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -           start handler {name: "xxforms-invalid", phase: "target", observer: "teaching-load-instance"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -             interpreter - start executing {action name: "xforms:action"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -               interpreter - start executing {action name: "xforms:toggle"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                 start dispatching {name: "xforms-revalidate", target: "xf-2"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                   start performing default action {}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                     validation - start performing revalidate {model id: "xf-2"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "triggers-instance"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,471 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "parameters-instance"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       end dispatching {time (ms): "1"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "check-user-instance"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "main"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "temp"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "session"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,472 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "status-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       end dispatching {time (ms): "1"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "month-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "verification-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-valid", target: "modules-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         start performing default action {}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         end performing default action {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       end dispatching {time (ms): "0"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                       start dispatching {name: "xxforms-invalid", target: "teaching-load-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                         start handler {name: "xxforms-invalid", phase: "target", observer: "teaching-load-instance"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                           interpreter - start executing {action name: "xforms:action"}
2012-10-23 21:42:42,473 DEBUG XFormsServer  -                             interpreter - start executing {action name: "xforms:toggle"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                               start dispatching {name: "xforms-revalidate", target: "xf-2"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                 start performing default action {}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                   validation - start performing revalidate {model id: "xf-2"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "triggers-instance"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "parameters-instance"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "check-user-instance"}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,474 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     end dispatching {time (ms): "1"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "main"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "temp"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "session"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "status-instance"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,475 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "month-instance"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     end dispatching {time (ms): "1"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "verification-instance"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-valid", target: "modules-instance"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       start performing default action {}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       end performing default action {time (ms): "0"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     end dispatching {time (ms): "0"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                     start dispatching {name: "xxforms-invalid", target: "teaching-load-instance"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                       start handler {name: "xxforms-invalid", phase: "target", observer: "teaching-load-instance"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                         interpreter - start executing {action name: "xforms:action"}
2012-10-23 21:42:42,476 DEBUG XFormsServer  -                                           interpreter - start executing {action name: "xforms:toggle"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                             start dispatching {name: "xforms-revalidate", target: "xf-2"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                               start performing default action {}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                 validation - start performing revalidate {model id: "xf-2"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                   start dispatching {name: "xxforms-valid", target: "triggers-instance"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                     start performing default action {}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                     end performing default action {time (ms): "0"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                   end dispatching {time (ms): "0"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                   start dispatching {name: "xxforms-valid", target: "parameters-instance"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                     start performing default action {}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                     end performing default action {time (ms): "0"}
2012-10-23 21:42:42,477 DEBUG XFormsServer  -                                                   end dispatching {time (ms): "0"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:12:19.467

您*可以*在 XForms 中创建无限循环，但在这种情况下，您似乎遇到了 XForms 引擎中的错误。如果情况没有改变，`xf:toggle`则应该没有效果。我为此填写[了一个问题](https://github.com/orbeon/orbeon-forms/issues/513)，您可以跟踪该问题。

自 Orbeon Forms 4.0 M13 起，此问题已得到修复。对于早期版本，您可以通过`if`在`xf:toggle`. 假设您的开关 id 是`my-switch`：

```
<xforms:toggle if="xxforms:case('my-switch') != 'invalid-form-case'"
               case="invalid-form-case"/> 
```

加上一个等价的`if`加到另一个`<xforms:toggle case="valid-form-case"/>`。

# regex - 使用 Notepad++ 从多行中删除前导字符

> ID：13033987
> 
> 赞同：2
> 
> 时间：2012-10-23T15:28:36.190
> 
> 标签：regex, notepad++

我有 299516 行的 txt 文件 - 不要问为什么！

我需要从每行中删除所有 110 个前导字符，保存接下来的 5 个字符并删除该行的其余部分。

我可以用英文版的“MID()”在 EXCEL 中完成。

不幸的是，Notepad++ 不支持像 ^ 这样的重复计数。{27}

提示：

[http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions)

[http://blog.creativeitp.com/posts-and-articles/editors/understanding-regex-with-notepad/](http://blog.creativeitp.com/posts-and-articles/editors/understanding-regex-with-notepad/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:29:54.783

实际上，从版本 6 开始就可以了（以前使用的旧正则表达式库已替换为 PCRE）。这些文章现在已经过时了。

使用最新版本的 Notepad++，找到：

```
^.{110}(.{5}).*$ 
```

用。。。来代替：

```
\1 
```

# javascript - 仅加载 div-Tab OnClick

> ID：13033988
> 
> 赞同：0
> 
> 时间：2012-10-23T15:28:37.173
> 
> 标签：javascript, jquery, function, tabs, onclick

我不知道如何在该代码中添加点击操作。问题是我必须创建一个包含 600 多张图片的页面，这在页面加载时非常繁重。所以我为每组图片都有一个标签，我只想通过点击来加载。在代码中现在只有一个选项卡来显示我的问题。功能：

```
$(document).ready(function(){
        jQuery('#mycarousel-1, #mycarousel-2, #mycarousel-3, #mycarousel-4, #mycarousel-5, #mycarousel-6, #mycarousel-7').jcarousel({
            horisontal: true,
            wrap:'circular',
            scroll:1,
            easing:'easeInOutBack',
            animation:1200
        }); 
```

菜单：

```
<section id="content">
    <div class="page3-row1 pad-2 tabs">
        <div class="col-8">
            <h2 class="h2 p2">Categorie:</h2>
            <div class="demo-container clear">
            <ul class="list-1 nav">
                <li><a href="#tab-1-modern">Modern Design</a></li>
            </ul>
        </div>
   </div> 
```

编码：

```
<div class="col-9">
     <h3 class="h3-2">Design's:</h3> 
    <div id="tab-1-modern" class="tab-content gallery-photo">
        <div class="inner">
            <ul id="mycarousel-1" class="jcarousel-skin-tango">
                <li><a class="plus"     href="images/modern-001-big_b.jpg"><img src="images/modern-001_b.jpg" alt=""></a><a class="plus"     href="images/modern-002-big_b.jpg"><img src="images/modern-002_b.jpg" alt=""></a><a class="plus"     href="images/modern-003-big_b.jpg"><img src="images/modern-003_b.jpg" alt=""></a><a class="plus"     href="images/modern-004-big_b.jpg"><img src="images/modern-004_b.jpg" alt=""></a></li>
                        <li><a class="plus"     href="images/modern-005-big_b.jpg"><img src="images/modern-005_b.jpg" alt=""></a><a class="plus"     href="images/modern-006-big_b.jpg"><img src="images/modern-006_b.jpg" alt=""></a><a class="plus"     href="images/modern-007-big_b.jpg"><img src="images/modern-007_b.jpg" alt=""></a><a class="plus"     href="images/modern-008-big_b.jpg"><img src="images/modern-008_b.jpg" alt=""></a></li>
                        <li><a class="plus"     href="images/modern-009-big_b.jpg"><img src="images/modern-009_b.jpg" alt=""></a><a class="plus"     href="images/modern-010-big_b.jpg"><img src="images/modern-010_b.jpg" alt=""></a><a class="plus"     href="images/modern-011-big_b.jpg"><img src="images/modern-011_b.jpg" alt=""></a><a class="plus"     href="images/modern-012-big_b.jpg"><img src="images/modern-012_b.jpg" alt=""></a></li>
                        <li><a class="plus"     href="images/modern-013-big_b.jpg"><img src="images/modern-013_b.jpg" alt=""></a><a class="plus"     href="images/modern-014-big_b.jpg"><img src="images/modern-014_b.jpg" alt=""></a><a class="plus"     href="images/modern-015-big_b.jpg"><img src="images/modern-015_b.jpg" alt=""></a><a class="plus"     href="images/modern-016-big_b.jpg"><img src="images/modern-016_b.jpg" alt=""></a></li>
            </ul>
        </div>
    </div>
</div> 
```

在上面的代码中现在也是图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:37:51.883

恐怕从你到目前为止所提供的，这是我能做的最好的......

```
$('#mycarousel-1 li').click(function() {
  // code here to load the images...
}); 
```

[编辑]

```
 <div class="col-9">
     <h3 class="h3-2">Design's:</h3> 
    <div id="tab-1-modern" class="tab-content gallery-photo">
        <div class="inner">
            <ul id="mycarousel-1" class="jcarousel-skin-tango">
                <li><a class="plus" thishref="images/modern-001-big_b.jpg"><img src="images/modern-001_b.jpg" alt=""></a><a class="plus"     href="images/modern-002-    big_b.jpg"><img src="images/modern-002_b.jpg" alt=""></a><a class="plus"     href="images/modern-003-big_b.jpg"><img src="images/modern-003_b.jpg" alt=""></a><a class="plus"     href="images/modern-004-big_b.jpg"><img src="images/modern-004_b.jpg" alt=""></a></li>
                <li><a class="plus" thishref="images/modern-005-big_b.jpg"><img src="images/modern-005_b.jpg" alt=""></a><a class="plus"     href="images/modern-006-big_b.jpg"><img src="images/modern-006_b.jpg" alt=""></a><a class="plus"     href="images/modern-007-big_b.jpg"><img src="images/modern-007_b.jpg" alt=""></a><a class="plus"     href="images/modern-008-big_b.jpg"><img src="images/modern-008_b.jpg" alt=""></a></li>
                <li><a class="plus" thishref="images/modern-009-big_b.jpg"><img src="images/modern-009_b.jpg" alt=""></a><a class="plus"     href="images/modern-010-big_b.jpg"><img src="images/modern-010_b.jpg" alt=""></a><a class="plus"     href="images/modern-011-big_b.jpg"><img src="images/modern-011_b.jpg" alt=""></a><a class="plus"     href="images/modern-012-big_b.jpg"><img src="images/modern-012_b.jpg" alt=""></a></li>
                <li><a class="plus" thishref="images/modern-013-big_b.jpg"><img src="images/modern-013_b.jpg" alt=""></a><a class="plus"     href="images/modern-014-big_b.jpg"><img src="images/modern-014_b.jpg" alt=""></a><a class="plus"     href="images/modern-015-big_b.jpg"><img src="images/modern-015_b.jpg" alt=""></a><a class="plus"     href="images/modern-016-big_b.jpg"><img src="images/modern-016_b.jpg" alt=""></a></li>
            </ul>
        </div>
    </div>
</div> 
```

和脚本如下：

```
$('#mycarousel-1 a').click(function() {
  // this loads each image the same, but you can use the same technique to
  // load the correct images for each image
  var imgurl = $(this).attr('thishref');
  $(this).find('img').each(function() {
      $(this).attr('src',imgurl);
  });
}); 
```

[/编辑]

# sencha-touch-2 - 如何禁用 Ext.field.Select 中的选项？

> ID：13033996
> 
> 赞同：1
> 
> 时间：2012-10-23T15:28:57.303
> 
> 标签：sencha-touch-2, option, selectlist, disabled-input

我有以下构造来创建选择：

```
Ext.create('Ext.field.Select',
{
    renderTo: Ext.get("displaySizes"),
    xtype: 'selectfield',
    label: 'Sizes',
    options: [
        {
            disabled: true //<- does not work
            text: "36"
            value: "1235"
        },
        {
            disabled: false
            text: "40"
            value: "1234"
        }

    ]
} 
```

我想禁用一些选项以向用户显示它们在那里，但不可选择。

就像使用 html 一样：

```
<select>
  <option value="1235" disabled="disabled">36</option>
  <option value="1234">40</option>
</select> 
```

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:41:09.527

我自己尝试过，但我想没有简单的方法可以做到这一点，因为“禁用”不是该选项的属性，并且没有内置的方法可以做到这一点。

可以完全禁用该字段，但选项本身不是组件，并且没有比值和文本更多的选项。

您必须编辑用于选择列表的选择器。而且不止一个（平板电脑选择器，电话选择器，...）

# php - MySQL中的序列化类型

> ID：13033997
> 
> 赞同：0
> 
> 时间：2012-10-23T15:29:07.187
> 
> 标签：php, mysql

我有一个数组，我想将它存储在一个 Sql 表中，所以我正在使用

```
$table_temp = serialize($table); 
```

假设我想将它存储在 MySql 中名为“table”的字段中。这个字段应该是什么类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:32:04.257

第一站： http: [//php.net/serialize](http://php.net/serialize)

在那里，我们可以读到：

> **字符串**序列化（混合 $value ）

该函数返回一个字符串，因此我们需要任何可以保存文本的 MySQL 数据类型。下一站： [http ://dev.mysql.com/doc/refman/5.5/en//string-types.html](http://dev.mysql.com/doc/refman/5.5/en//string-types.html)