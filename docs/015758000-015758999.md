# StackOverflow 问答 15758000-15758999

# css - 亮度和对比度的默认 CSS 过滤器值

> ID：15758007
> 
> 赞同：7
> 
> 时间：2013-04-02T06:58:00.527
> 
> 标签：css, brightness, contrast

最近我将 Chrome 更新到 v.26，使用 HTML5 画布显示的图片不再可见。当我发现我必须改变亮度和对比度。

CSS 过滤器的 BC 值如何因浏览器引擎而异？

默认：

```
Brightness:  0; contrast 100: Firefox ? 
Brightness:100; contrast:100: Chrome ? 
```

我发现它实际上是 Chrome 的错误修复： [https ://code.google.com/p/chromium/issues/detail?id=168004](https://code.google.com/p/chromium/issues/detail?id=168004)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T21:34:13.893

我找到了这个，它肯定会对你有所帮助。语法是这样的。

```
.thing_you_want_to_filter {
  /*
    these are all default values, note that hue-rotate and blur have units.
    You'll also need to include the vendor prefixes.
  */
  filter: grayscale(0);
  filter: sepia(0);
  filter: saturate(1);
  filter: hue-rotate(0deg);
  filter: invert(0);
  filter: opacity(1);
  filter: brightness(0);
  filter: contrast(1);
  filter: blur(0px);

  /* Drop shadow has the same syntax as box-shadow – see below for why it's amazing! */
  filter: drop-shadow(5px 5px 10px #ccc);
} 
```

Chrome 18.0+ 和 Safari 6+ 是唯一支持此功能的浏览器。对于版本 6 下的 Safari，它将是这样的：

```
.img
 {
  -webkit-filter:contrast(100%); /* play with the percentages */
  -webkit-filter:brightness(100%);
 } 
```

您可以自己阅读来源

[http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/) [http://css3.bradshawenterprises.com/filters/](http://css3.bradshawenterprises.com/filters/)

# upload - 如何在 Joomla 2.5 中上传整个文件夹

> ID：15758010
> 
> 赞同：1
> 
> 时间：2013-04-02T06:58:09.107
> 
> 标签：upload, module, joomla2.5

您好，我是 Joomla CMS 的新手。我想将整个文件夹上传到另一个新文件夹。有任何扩展或模块可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:59:50.067

如果您没有 ftp 访问权限，对我来说最好的 joomla 文件管理器模块是[eXtplorer](http://extplorer.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:41:52.917

通过总指挥官或其他程序进行 crete ftp 连接，您可以轻松传输文件和文件夹

# php - 数据库：插入行多查询

> ID：15758011
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:09.513
> 
> 标签：php, phpmyadmin

当我单击提交按钮时，除了将字符串的名称放在数组中之外，一切正常，我在每一行的列名下的行中都获得了名称“数组”。我整天都在更改代码，但无法弄清楚。请注意，我的数组里面有 130 多个字符串。

您可以在表中放置无限数量的行，对吗？关于如何解决名称问题并增加我的“限制 0、30”的任何建议？

这是我的代码：

曾是：

```
$array = ("","","");
$random = $array;
shuffle($random); 
```

现在：

```
$array = ("","",""); 
```

而且还是不行。我还尝试使用 mysqli_stmt_send_long_data 进行试验，也无法使其正常工作。

```
<?php
include ('login-home.php');
$mysqli = new mysqli("", "", "", "");
if ($mysqli->connect_error) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_error . ") " . $mysqli->connect_error;
}
if (!$mysqli->query("INSERT INTO table(id, name) VALUES (id, '".$array."')")) {
    echo "Multi-INSERT failed: (" . $mysqli->error . ") " . $mysqli->error;
}
/* Prepared statement, stage 2: bind and execute */
$id = 1;
if (!$stmt->bind_param("s", $id)) {
    echo "Binding parameters failed: (" . $stmt->error . ") " . $stmt->error;
}

if (!$stmt->execute()) {
    echo "Execute failed: (" . $stmt->error . ") " . $stmt->error;
}

for ($id; $id = $id+1; $id++) {
    if (!$stmt->execute()) {
        echo "Execute failed: (" . $stmt->error . ") " . $stmt->error;
    }
}

$stmt->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:10:04.833

您可能会插入数组，因为该变量是一个数组..

尝试

```
echo $array; /// the output will be array 
```

因此，如果您想将数组的值插入到 db 中，您必须首先使用连接和 foreach 循环或任何可以执行此操作的 php 函数将它们转换为字符串。比如爆炸它们内爆等等。

这些将转换

```
$array = ("ar1","ar2","ar3"); 
```

到

```
$array = "ar1,ar2,ar3"; 
```

# php - 将 ASP HTTP 请求转换为 PHP Curl 请求

> ID：15758012
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:10.637
> 
> 标签：php, asp.net, xml, curl, http-headers

如果此代码正确并在 asp 中工作

```
String xmlstc = "Some XML Code";
HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(server);
httpWebRequest.Method = "POST";
httpWebRequest.ContentLength = xmlstc.Length;
httpWebRequest.ContentType = "application/x-www-form-urlencoded";

streamWriter = new StreamWriter(httpWebRequest.GetRequestStream());
streamWriter.Write(xmlstc);` 
```

我想在 PHP 中使用 curl 实现同样的功能。下面的代码是否正确？

```
$xmlrequest = 'some xml code'

$server = ''

$headers = array(
    "Content-type: text/xml;charset=\"utf-8\"",
    "Accept: text/xml",
    "Cache-Control: no-cache",
    "Pragma: no-cache",
    "SOAPAction: \"run\"",
    "Content-length: ".strlen($requestXML)
    //"Connection: close",
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $server);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 100);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);  
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $requestXML); 
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
$data = curl_exec($ch); 
```

# android - 在通话期间发送语音数据

> ID：15758015
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:22.780
> 
> 标签：android

我正在对一个应用程序进行可行性研究，该应用程序可以自动发送消息，例如“我马上接电话。请稍候。” 左右按用户设置，不挂断电话，以便用户在忙时有时间接听电话，并提醒来电者耐心等待电话被接听。

问题是我想将它作为语音数据发送。是否可以在不参加或挂断电话的情况下发送？是否可以发送不是彩信的语音数据！！！？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:27:28.540

根据我的建议..

1>当您实际接到电话时选择呼叫意图

你可以找到有用的链接

[这里，](http://mfarhan133.wordpress.com/2010/10/15/manipulating-incoming-ougoing-calls-tutorial-for-android/) [这里](http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/) [和这里](http://learnandroideasily.blogspot.in/2012/11/how-to-handle-incoming-calls-in-android.html)

2>有一些预先录制的彩信或短信。

3> 使用线程睡眠方法等待一段时间（在此之后您实际上想要将信息消息发送给调用者）。

4>在这里做你的工作，通过你的应用程序在后台将消息发送给呼叫者。

# ldap - jBPM5.4 与 LDAP 的集成

> ID：15758017
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:33.093
> 
> 标签：ldap, jboss7.x, jbpm

我正在尝试将 jbpm5.4 与 LDAP 服务器连接，并且我正在使用 JBOSS AS7。

1.  我使用用户和角色详细信息设置 LDAP 服务器。

2.  [在 jBPM 中，我设置了此链接http://mswiderski.blogspot.in/2012/05/jbpm-53-brings-ldap-into-picture.html](http://mswiderski.blogspot.in/2012/05/jbpm-53-brings-ldap-into-picture.html)中提到的所有属性。

3.  但是当我尝试通过 jbpm 控制台登录时，我收到消息“您无权使用此应用程序”。

4.  我已附上服务器日志以供参考。

5.  请在这方面帮助我。

* * *

server.log 包含

* * *

```
17:44:49,559 TRACE [org.jboss.security.auth.login.XMLLoginConfigImpl] (http-localhost-127.0.0.1-8080-6) End getAppConfigurationEntry(jbpm-console), authInfo=AppConfigurationEntry[]:
[0]
LoginModule Class: org.jboss.security.auth.spi.LdapExtLoginModule
ControlFlag: LoginModuleControlFlag: required
Options:
name=baseFilter, value=(uid={0})
name=bindDN, value=uid=admin,ou=system
name=rolesCtxDN, value=ou=Roles,dc=jbpm,dc=org
name=roleNameAttributeID, value=CN
name=baseCtxDN, value=ou=People,dc=jbpm,dc=org
name=java.naming.factory.initial, value=com.sun.jndi.ldap.LdapCtxFactory
name=allowEmptyPasswords, value=true
name=roleFilter, value=(member=uid={0},ou=People,dc=jbpm,dc=org)
name=bindCredential, value=****
name=java.naming.provider.url, value=ldap://localhost:10389
name=roleAttributeIsDN, value=true
name=searchScope, value=SUBTREE_SCOPE
name=roleAttributeID, value=cn
name=throwValidateError, value=true

17:44:49,569 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) initialize
17:44:49,569 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) Security domain: jbpm-console
17:44:49,570 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) login
17:44:49,572 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) Failed to parse: null, disabling recursion: java.lang.NumberFormatException: null
    at java.lang.Integer.parseInt(Unknown Source) [rt.jar:1.7.0_09]
    at java.lang.Integer.parseInt(Unknown Source) [rt.jar:1.7.0_09]
    at org.jboss.security.auth.spi.LdapExtLoginModule.createLdapInitContext(LdapExtLoginModule.java:395) [picketbox-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.auth.spi.LdapExtLoginModule.validatePassword(LdapExtLoginModule.java:312) [picketbox-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:267) [picketbox-4.0.7.Final.jar:4.0.7.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_09]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_09]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_09]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext.invoke(Unknown Source) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext.access$000(Unknown Source) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext$4.run(Unknown Source) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext$4.run(Unknown Source) [rt.jar:1.7.0_09]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext.invokePriv(Unknown Source) [rt.jar:1.7.0_09]
    at javax.security.auth.login.LoginContext.login(Unknown Source) [rt.jar:1.7.0_09]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:449) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:383) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:371) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:160) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.as.web.security.JBossWebRealm.authenticate(JBossWebRealm.java:214) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:381) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_09]

17:44:49,586 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) Logging into LDAP server, env={throwValidateError=true, baseFilter=(uid={0}), allowEmptyPasswords=true, java.naming.security.credentials=***, jboss.security.security_domain=jbpm-console, java.naming.security.authentication=simple, baseCtxDN=ou=People,dc=jbpm,dc=org, roleAttributeIsDN=true, rolesCtxDN=ou=Roles,dc=jbpm,dc=org, java.naming.security.principal=uid=admin,ou=system, searchScope=SUBTREE_SCOPE, java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory, roleFilter=(member=uid={0},ou=People,dc=jbpm,dc=org), java.naming.provider.url=ldap://localhost:10389, roleNameAttributeID=CN, roleAttributeID=cn, bindDN=uid=admin,ou=system, bindCredential=***}
17:44:54,620 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) Logging into LDAP server, env={throwValidateError=true, baseFilter=(uid={0}), allowEmptyPasswords=true, java.naming.security.credentials=***, jboss.security.security_domain=jbpm-console, java.naming.security.authentication=simple, baseCtxDN=ou=People,dc=jbpm,dc=org, roleAttributeIsDN=true, rolesCtxDN=ou=Roles,dc=jbpm,dc=org, java.naming.security.principal=cn=john,ou=People,dc=jbpm,dc=org, searchScope=SUBTREE_SCOPE, java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory, roleFilter=(member=uid={0},ou=People,dc=jbpm,dc=org), java.naming.provider.url=ldap://localhost:10389, roleNameAttributeID=CN, roleAttributeID=cn, bindDN=uid=admin,ou=system, bindCredential=***}
17:44:55,573 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) User 'john' authenticated, loginOk=true
17:44:55,574 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) commit, loginOk=true
17:44:55,620 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http-localhost-127.0.0.1-8080-6) defaultLogin, lc=javax.security.auth.login.LoginContext@20ae2ec, subject=Subject(1912636285).principals=org.jboss.security.SimplePrincipal@2142813699(john)org.jboss.security.SimpleGroup@969078903(CallerPrincipal(members:john))org.jboss.security.SimpleGroup@969078903(Roles(members))
17:44:55,623 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http-localhost-127.0.0.1-8080-6) updateCache, inputSubject=Subject(1912636285).principals=org.jboss.security.SimplePrincipal@2142813699(john)org.jboss.security.SimpleGroup@969078903(CallerPrincipal(members:john))org.jboss.security.SimpleGroup@969078903(Roles(members)), cacheSubject=Subject(2027969932).principals=org.jboss.security.SimplePrincipal@2142813699(john)org.jboss.security.SimpleGroup@969078903(CallerPrincipal(members:john))org.jboss.security.SimpleGroup@969078903(Roles(members))
17:44:55,625 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http-localhost-127.0.0.1-8080-6) Inserted cache info: org.jboss.security.authentication.JBossCachedAuthenticationManager$DomainInfo@521dd053
17:44:55,627 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http-localhost-127.0.0.1-8080-6) End isValid, true
17:44:55,725 TRACE [org.jboss.security.SecurityRolesAssociation] (http-localhost-127.0.0.1-8080-6) Setting threadlocal:null
17:44:55,728 TRACE [org.jboss.security.SecurityRolesAssociation] (http-localhost-127.0.0.1-8080-6) Setting threadlocal:null
17:44:55,754 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http-localhost-127.0.0.1-8080-6) Flushing john from cache
17:44:55,823 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http-localhost-127.0.0.1-8080-6) logout 
```

问候，

杰亚拉克什米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:26:11.043

## 自己找到了答案：

我用 roleFilter 修改了 stanalone.xml 文件，它应该是这样的：

```
 <authentication>

                    <login-module code="org.jboss.security.auth.spi.LdapExtLoginModule" flag="required">

                        <module-option name="bindDN" value="uid=admin,ou=system"/>

                        <module-option name="bindCredential" value="secret"/>

                        <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>

                        <module-option name="java.naming.provider.url" value="ldap://localhost:10389"/>

                        <module-option name="baseCtxDN" value="ou=People,dc=jbpm,dc=org"/>

                        <module-option name="baseFilter" value="(uid={0})"/>

                        <module-option name="rolesCtxDN" value="ou=Roles,dc=jbpm,dc=org"/>

                        <module-option name="roleFilter" value="(member={1})"/>

                        <module-option name="roleAttributeID" value="cn"/>

                        <module-option name="roleAttributeIsDN" value="true"/>

                        <module-option name="roleNameAttributeID" value="CN"/>

                        <module-option name="searchScope" value="SUBTREE_SCOPE"/>

                        <module-option name="allowEmptyPasswords" value="true"/>

                        <module-option name="throwValidateError" value="true"/>

                        <module-option name="roleRecursion" value="-1"/>

                    </login-module>                       

                </authentication>

            </security-domain> 
```

# javascript - 这段代码是什么意思？

> ID：15758020
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:48.343
> 
> 标签：javascript, jquery

```
url = (url.match(/^([^#]+)/)||[])[1];

iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank' 
```

上面的代码是什么意思，我在jquery.form.js的源码中找到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:25:37.873

第一行删除给定 URL 字符串的哈希部分。

第二行，我假设它位于某个对象定义的中间（或者 : 将是一个语法错误），查看当前页面的 URL，检查它是否是 HTTPS，并为某些动态 iFrame 使用不同的 URL如果是。大概有安全原因，为什么`javascript:false`iFrame 比`about:blank`HTTPS 页面更好。

# actionscript-3 - 设置 Movieclip 子项的深度时无法更改 Movieclip 的当前帧

> ID：15758022
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:48.843
> 
> 标签：actionscript-3, flash-cs5

我正在尝试设置一个名为“地图”的大电影剪辑中包含的每个电影剪辑的深度。为此，我创建了一个在事件 ENTER_FRAME 上运行的函数，即：

```
public function set_depth(map:MovieClip) {
    var arr:Array = [];
    for(var i=1;i<=map.numChildren;i++) {
        arr.push({ "name" : map.getChildAt(i-1).name, "y" : map.getChildAt(i-1).y});
    }
    arr.sortOn("y", Array.NUMERIC);

    for(var h=0;h<arr.length;h++) {
        map.setChildIndex(map.getChildByName(arr[h].name), h);
    }
} 
```

该函数的基本作用是根据其 y 属性对 MovieClip 进行排序，并根据 MovieClips 的 ordererd 列表设置 MovieClip 索引（y 属性最终会自行更改，因此索引顺序也会更改）。问题是，当“set_depth”函数连续运行时，我似乎无法更改“地图”电影剪辑帧，例如，我想在每次按下 Shift 键时更改地图当前帧，如下所示：

```
public function whenKeyUp(e:KeyboardEvent) {
    if(e.keyCode == 16) {
        trace('Shift pressed');
        map.gotoAndStop(2);
    }
} 
```

每次我按下 Shift 键都没有发生任何事情，即使调用了跟踪函数。但是，如果“set_depth”函数被注释/删除，则地图 MovieClip 将其帧更改为 2 没有任何问题。

那么，代码有什么问题吗？我可以以某种方式修复它，以便地图 MovieClip 可以在 set_depth 函数运行时更改其帧吗？或者有没有其他解决方案？提前致谢。原谅我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:17:22.100

假设从函数 yourEnterFrame(e: Event) 调用 setDepth(map)..

将此更改为

```
public function whenKeyUp(e:KeyboardEvent) {
    if(e.keyCode == 16) {
       map.removeEventListener(Event.ENTER_FRAME, yourEnterFrame);
       map.addEventListener(Event.ENTER_FRAME, frameHunt);
       trace('Shift pressed');
       map.gotoAndStop(2);
   }
} 
```

请添加这个

```
public function frameHunt(e: Event){
var map:MovieClip = MovieClip(e.target);  
    if( map.currentFrame != 2) return;
    map.removeEventListener(Event.ENTER_FRAME, frameHunt);
    map.addEventListener(Event.ENTER_FRAME, yourEnterFrame);
} 
```

# iphone - 如何在 iOS 中使用 NSDateFormatter 将日期类型更改为“2013 年 1 月 21 日上午 5:30”

> ID：15758023
> 
> 赞同：-4
> 
> 时间：2013-04-02T06:58:51.233
> 
> 标签：iphone, ios, nsdateformatter

我希望将日期格式从“ **2013-01-21 11:55:00** ”更改为“ **2013 年 1 月 21 日 5:30 AM** ”。

我尝试了下面的代码。但它给出了一个固定的日期。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];

NSDate *myDate = [NSDate dateWithTimeIntervalSinceReferenceDate:162000];
NSLog(@"%@",[dateFormatter stringFromDate:myDate]); 
```

**上面的代码给出了恒定的输出：2001 年 1 月 3 日 2:30:00 AM**

但就我而言，日期是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:11:42.143

```
 NSString *firstDate = @"2013-01-21 11:55:00";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy'-'MM'-'dd  HH':'mm':'ss"];
    NSDate *date = [dateFormatter dateFromString:firstDate];
    [dateFormatter setDateFormat:@"MMM d, yyyy h:mm a"];

    NSLog(@"Expected Result___ %@",[dateFormatter stringFromDate:date]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:08:51.017

试试这个

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"MMM d, yyyy h:mm a"];

NSDate *myDate = [NSDate dateWithTimeIntervalSinceReferenceDate:162000];
NSLog(@"%@",[dateFormatter stringFromDate:myDate]; 
```

试试`[NSDate date]`吧`[NSDate dateWithTimeIntervalSinceReferenceDate:162000]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:06:53.617

好吧，您将获得恒定的输出，因为您将恒定的输入设为 162000 ！！！

首先使用其格式从字符串中获取日期，然后使用新格式从获取的日期中获取字符串

使用它来输出格式为

```
@"MMM d, yyyy h:mm a"

NSDateFormatter *dateFormatter=[[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MMM d, yyyy h:mm a"];
NSLog(@"%@",[dateFormatter stringFromDate:[NSDate date]]); 
```

# asp.net-mvc - razor 引擎模型声明 - 编译器错误消息：CS1003：语法错误，预期为“>”

> ID：15758024
> 
> 赞同：0
> 
> 时间：2013-04-02T06:58:57.840
> 
> 标签：asp.net-mvc, razor

目前我正在尝试在 asp.net mvc 4.5 中使用 razor 引擎的多维列表我想我有一个像[asp.net mvc 3 razor view 这样的问题 - > 强类型元组列表问题](https://stackoverflow.com/questions/6098649/asp-net-mvc-3-razor-view-strongly-typed-list-of-tuple-problem)

但没有解决方案或解决方法......返回错误“编译器错误消息：CS1003：语法错误，'>'预期”的代码行

```
@model List<Group2<string, Group<string, string, Group<string, string, ProductCatalogItem>>>> 
```

以及 Group + Group2 的模型

```
public class Group<K, L, T>
{
    public K Key;
    public L Name;
    public IEnumerable<T> Values;
}
public class Group2<K, T>
{
    public K Name;
    public IEnumerable<T> Values;
} 
```

有人给我建议吗？

# javascript - 无法在 jQuery 中添加边框半径

> ID：15758025
> 
> 赞同：1
> 
> 时间：2013-04-02T06:58:59.263
> 
> 标签：javascript, jquery, css

我正在尝试在单击 div 时添加边框半径属性，但它不起作用：

HTML：

```
<div class="div1">
    Div 1        
</div>

<br>

<div class="div2">
    Div 2            
</div> 
```

查询：

```
$(".div2").click(function() {
    $(this).css({"border-radius":"10px 15px 20px 25px;"})
}); 
```

我的 jsFiddle：http: [//jsfiddle.net/6mLpJ/](http://jsfiddle.net/6mLpJ/)

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:59:49.190

`border-radius`这是因为分配给您的属性的值中的分号：

```
$(this).css({"border-radius":"10px 15px 20px 25px;"})
------------------------------------------- here ^ ----- 
```

`;`用于分隔 CSS 中元素之间的样式。它不是价值的一部分，因此您只需将其删除即可使您的功能正常工作。

更新演示：http: [//jsfiddle.net/6mLpJ/2/](http://jsfiddle.net/6mLpJ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:02:40.843

你的css属性中有一个额外的分号，根本不需要它..删除它，它应该可以工作..

```
 $(this).css({"border-radius":"10px 15px 20px 25px"}) 
```

[在这里工作小提琴](http://jsfiddle.net/6mLpJ/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:16:49.217

这种更简单的方法也可能有帮助：

```
$(".div2").click(function() {
    $(this).css('border-radius','10px 15px 20px 25px');
} 
```

# sql-server - 对称解密返回 NULL 值

> ID：15758028
> 
> 赞同：0
> 
> 时间：2013-04-02T06:59:07.013
> 
> 标签：sql-server, encryption, encryption-symmetric, isqlquery

我有两个数据库。我从一个表中复制了所有数据并插入到另一个数据库表中。我已经在第二个数据库上创建了对称密钥，但是当我尝试按如下方式运行查询时

```
 OPEN SYMMETRIC KEY SecureSymmetricKey DECRYPTION BY PASSWORD = N'StrongPassword';        
 select DecryptByKey(columname) as DocSSN from tablename
 CLOSE SYMMETRIC KEY SecureSymmetricKey; 
```

但总是返回空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:11:55.080

您需要按照[在两台服务器上创建相同的对称密钥中](http://msdn.microsoft.com/en-us/library/ms366281.aspx)描述的步骤进行操作。您必须使用新创建的对称密钥重新加密两个服务器/数据库上的所有数据，该对称密钥使用给定的已知密钥材料。事后创建密钥副本是不可能的。

在服务器/数据库之间共享对称密钥是一种非常糟糕的做法。您应该在每个数据库上使用不同的密钥进行加密。

# java - 致命错误：无法写入核心转储

> ID：15758031
> 
> 赞同：0
> 
> 时间：2013-04-02T06:59:13.077
> 
> 标签：java, eclipse, debugging, operating-system, tesseract

我目前正在尝试在 tess4j 发行版中运行单元测试。在运行其中一个单元测试时，java 崩溃并出现以下错误：

```
TessBaseAPIGetIterator
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6718f834, pid=5612, tid=3592
#
# JRE version: 7.0_17-b02
# Java VM: Java HotSpot(TM) Client VM (23.7-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [libtesseract302.dll+0xf834]  tesseract::TessBaseAPI::Init+0x34
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# G:\Final year project\eclipse stuff\Testings\hs_err_pid5612.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

我能得到帮助吗？我相当确定 DLL 文件没有损坏，我的硬盘也没有损坏。我正在使用 Windows 8 操作系统和最新版本的 eclipse 来构建项目。

代码是：

```
import java.io.File;
import net.sourceforge.tess4j.*;

import com.sun.jna.Pointer;
import com.sun.jna.ptr.PointerByReference;
import java.awt.image.BufferedImage;
import java.io.*;
import java.nio.*;
import java.util.Arrays;
import javax.imageio.ImageIO;
    import net.sourceforge.tess4j.TessAPI1.*;
import net.sourceforge.vietocr.ImageIOHelper;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import static org.junit.Assert.*;

public class TesseractExample{
String datapath = "G:\\Final year project\\eclipse stuff\\tessdemo\\tessdata";
String language = "eng";
String expOCRResult = "The (quick) [brown] {fox} jumps!\nOver the $43,456.78 <lazy> #90 dog";

TessAPI1.TessBaseAPI handle;

public void testResultIterator() throws Exception {
    System.out.println("TessBaseAPIGetIterator");
    String lang = "eng";
    File tiff = new File("eurotext.tif");
    BufferedImage image = ImageIO.read(new FileInputStream(tiff)); // require jai-imageio lib to read TIFF
    ByteBuffer buf = ImageIOHelper.convertImageData(image);
    int bpp = image.getColorModel().getPixelSize();
    int bytespp = bpp / 8;
    int bytespl = (int) Math.ceil(image.getWidth() * bpp / 8.0);
    TessAPI1.TessBaseAPIInit3(handle, datapath, lang);
    TessAPI1.TessBaseAPISetPageSegMode(handle, TessAPI1.TessPageSegMode.PSM_AUTO);
    TessAPI1.TessBaseAPISetImage(handle, buf, image.getWidth(), image.getHeight(), bytespp, bytespl);
    TessAPI1.TessBaseAPIRecognize(handle, null);
    TessAPI1.TessResultIterator ri = TessAPI1.TessBaseAPIGetIterator(handle);
    TessAPI1.TessPageIterator pi = TessAPI1.TessResultIteratorGetPageIterator(ri);
    TessAPI1.TessPageIteratorBegin(pi);
    System.out.println("Bounding boxes:\nchar(s) left top right bottom confidence font-attributes");

    int height = image.getHeight();
     do {
        Pointer ptr = TessAPI1.TessResultIteratorGetUTF8Text(ri, TessAPI1.TessPageIteratorLevel.RIL_WORD);
        String word = ptr.getString(0);
        TessAPI1.TessDeleteText(ptr);
        float confidence = TessAPI1.TessResultIteratorConfidence(ri, TessAPI1.TessPageIteratorLevel.RIL_WORD);
        IntBuffer leftB = IntBuffer.allocate(1);
        IntBuffer topB = IntBuffer.allocate(1);
        IntBuffer rightB = IntBuffer.allocate(1);
        IntBuffer bottomB = IntBuffer.allocate(1);
        TessAPI1.TessPageIteratorBoundingBox(pi, TessAPI1.TessPageIteratorLevel.RIL_WORD, leftB, topB, rightB, bottomB);
        int left = leftB.get();
        int top = topB.get();
        int right = rightB.get();
        int bottom = bottomB.get();
        System.out.print(String.format("%s %d %d %d %d %f", word, left, top, right, bottom, confidence));
       System.out.println(String.format("%s %d %d %d %d", str, left, height - bottom, right, height - top)); // training box coordinates     

        IntBuffer boldB = IntBuffer.allocate(1);
        IntBuffer italicB = IntBuffer.allocate(1);
        IntBuffer underlinedB = IntBuffer.allocate(1);
        IntBuffer monospaceB = IntBuffer.allocate(1);
        IntBuffer serifB = IntBuffer.allocate(1);
        IntBuffer smallcapsB = IntBuffer.allocate(1);
        IntBuffer pointSizeB = IntBuffer.allocate(1);
        IntBuffer fontIdB = IntBuffer.allocate(1);
        String fontName = TessAPI1.TessResultIteratorWordFontAttributes(ri, boldB, italicB, underlinedB,
                monospaceB, serifB, smallcapsB, pointSizeB, fontIdB);
        boolean bold = boldB.get() == TessAPI1.TRUE;
        boolean italic = italicB.get() == TessAPI1.TRUE;
        boolean underlined = underlinedB.get() == TessAPI1.TRUE;
        boolean monospace = monospaceB.get() == TessAPI1.TRUE;
        boolean serif = serifB.get() == TessAPI1.TRUE;
        boolean smallcaps = smallcapsB.get() == TessAPI1.TRUE;
        int pointSize = pointSizeB.get();
        int fontId = fontIdB.get();
        System.out.println(String.format("  font: %s, size: %d, font id: %d, bold: %b," +
                   " italic: %b, underlined: %b, monospace: %b, serif: %b, smallcap: %b", 
                fontName, pointSize, fontId, bold, italic, underlined, monospace, serif, smallcaps));            
    } while (TessAPI1.TessPageIteratorNext(pi, TessAPI1.TessPageIteratorLevel.RIL_WORD) == TessAPI1.TRUE);

}

public static void main(String[] args) {
    TesseractExample instance=new TesseractExample();

   try {

instance.testResultIterator();

    } catch (Exception e) {
        System.err.println(e.getMessage());
    }
}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:30:50.017

貌似`handle`还没有初始化。

```
handle = TessAPI1.TessBaseAPICreate(); 
```

# python - 在 Windows 中打开未保存到桌面的文件时出现问题

> ID：15758042
> 
> 赞同：0
> 
> 时间：2013-04-02T06:59:37.063
> 
> 标签：python, file-io, python-3.x

我正在编写一个程序，它需要打开和访问 110 个不同文本文件的内容，这些文本文件存储在我的计算机（运行 Windows 7）上的各种文件夹和子文件夹中。我已经为程序中的所有文件定义了变量，如下所示：

```
#Arno Holz, Buch der Zeit 1886, 1892
Holz_raw = r"C:\Users\Carolyn\Desktop\Dissertation Texts (txt)\Poetry\1850-1900    (txt)\Arno Holz.txt"
Holz = open(Holz_raw, 'r', encoding='utf-8').read()

#Felix Dahn, Balladen 1878
Dahn_raw = r'C:\Users\Carolyn\Desktop\Dissertation Texts\Poetry\1850-1900 (txt)\Felix Dahn.txt'
Dahn = open(Dahn_raw, 'r', encoding='utf-8').read() 
```

... 等等。

但是，当我尝试运行该程序时，我收到一条消息，上面写着“没有这样的文件或目录”。

奇怪的是，它在我输入时有效

```
open(r'C:\Users\Carolyn\Desktop\Dissertation Texts\Poetry\1850-1900 (txt)\Felix Dahn.txt', 'r', encoding='utf-8') 
```

进入口译员。

当我将文件直接保存到桌面然后将该路径作为第一个参数提供给我的程序中的 open() 时，它也可以工作。（这也适用于解释器）。

我是否需要将所有 110 个文件保存到我的桌面才能让 Python 识别它们？关于为什么会发生这种情况的任何想法？

我在整个互联网上都查看了，但无法找到答案。我还花了好几个小时研究各种 Python 手册......

如果您能提供任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:57:56.537

我找出了导致问题的原因，并修复了它。两种文件的文件路径确实不同；不知道那里发生了什么！另外，一位朋友建议我更改 IDLE 中的当前工作目录，这是我没有想到的。做到了——问题解决了！

# xcode - 如何从 .p12 文件中获取分发标识的名称

> ID：15758043
> 
> 赞同：4
> 
> 时间：2013-04-02T06:59:38.720
> 
> 标签：xcode, jenkins, xcode4.5, xcodebuild

我正在尝试为 Xcode 创建自动构建。到目前为止，一切正常。为了从命令行构建项目，我正在使用这个命令

```
xcodebuild –project {“xcode_project file path”}–target {“target_name”} –sdk iphoneos –
configuration Release clean build CODE_SIGN_IDENTITY={$distribution_signing Identity} 
PROVISIONING_PROFILE={UUID for provisioning profile} 
```

我想动态获取 UUID 和 CODE_SIGN_IDENTITY，

对于 UUID 我正在做

```
UUID=$(grep "<key>UUID</key>" "$PROVISIONING_PROFILE_PATH" -A 1 --binary-files=text | sed -E -e "/<key>/ d" -e "s/(^.*<string>)//" -e "s/(<.*)//") 
```

上面的脚本代码为我提供了任何配置文件的 UUID。

我被困在动态获取 CODE_SIGN_IDENTITY 上。我知道它的形式像`iPhone Distribution: Developer name`

如何`iPhone Distribution: Developer name` 从 .p12 文件中提取。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T07:06:21.997

您可以使用`security find-identity`命令行实用程序列出系统上可用的代码签名身份：

```
/usr/bin/security find-identity -v -p codesigning
  1) F188B6FD76D83316FCB2E594940XXXXXXXXXXXXE "Mac App Distribution"
  2) ADDB5E33AC36FEB2CA0F1C3BC71XXXXXXXXXXXXE "iPhone Developer: Stuart M (xxxxx)"
 2 valid identities found 
```

该`-v`选项将列表限制为仅“有效”身份，并将`-p codesigning`其过滤为仅代码签名身份，以防您有多个身份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-19T02:09:37.837

这一点 Python 对我有用。我不需要安装任何额外的东西就可以在 Mac 上运行它。

```
# load everything. Probably not the best idea in production...
from OpenSSL.crypto import *

p12 = load_pkcs12(file("./path/to/your.p12", 'rb').read(), 'YOUR_P12_PASSWORD')
print(p12.get_friendlyname()) 
```

归功于这个答案：[Python：使用 pyOpenSSL.crypto 读取 pkcs12 证书](https://stackoverflow.com/questions/6345786/python-reading-a-pkcs12-certificate-with-pyopenssl-crypto)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T14:42:18.383

对于那些不知道如何运行`security find-identity`@Stuart M 中提到的命令的人来说，这里是如何做到的：-

```
xcrun security find-identity -v -p codesigning 
```

# linux - rsync 选定的子文件夹

> ID：15758048
> 
> 赞同：1
> 
> 时间：2013-04-02T07:00:00.473
> 
> 标签：linux, rsync, transfer

我想从一系列父文件夹中传输选择性子文件夹：

```
/home/user/sample_rsync/ 
FolderA/sub1
FolderA/sub2
FolderA/sub3
FolderB/sub1
FolderB/sub2
FolderB/sub3
FolderC/sub1
FolderC/sub2
FolderC/sub3 
```

从上面的示例中说，我只想从每个目录中复制 sub1 。即在我的目的地，我希望创建以下文件夹（以及它们包含的文件）

```
/destination/
sample_rsync/FolderA/sub1
sample_rsync/FolderB/sub1
sample_rsync/FolderC/sub1 
```

我该怎么做呢？

我试过了

```
rsync -avh -f"- *" -f"+ *sub1/*" /home/user/sample_rsync /destination/ 
```

试图排除一切，然后只包括 sub1 - 没用。

有什么办法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:41:49.213

假设您的源文件夹位于第一个代码段中键入的名为“sources”的文件中（没有尾随 / 字符）

```
for s in $(cat sources)
do
  rsync -av ${s} /destination/sample_rsync/$(echo ${s}| awk -F "/" '{print $1}')
done 
```

当然，这仅在您的源文件中有一定级别的深层目录时才有效。如果要复制的目录的深度级别发生变化，则需要大量修改此脚本。但至少我希望这是一个起点。

根据您在下面的问题，您可能想要使用这样的东西：（忽略上面的代码段。我只是将它留在那里以供历史记录使用）

```
cd /home/user/sample_rsync
for dir in $(find ./ -type d -name sub1)
do
  dest=$(echo ${dir} | sed -e "1,1s+/sub1++")
  mkdir /destination/sample_rsync/${dest}
  rsync -av ${dir} /destination/sample_rsync/${dest}
done 
```

请不要把它当作福音的话。我还没有测试过代码。所以。它可能会产生一些意想不到的结果。请在一个系统上测试它，如果它出现问题，你不会介意出现问题。

# c# - 将自定义命名空间添加到元数据 (BitmapMetadata)

> ID：15758054
> 
> 赞同：4
> 
> 时间：2013-04-02T07:00:12.943
> 
> 标签：c#, wpf, adobe, metadata, xmp

这是一个快速的问题：如何正确地将自定义命名空间添加到 XMP 使用`BitmapMetadata`？

假设我希望命名空间看起来像这样：`xmlns:MyNamespace="http://test"`

没有明确的方法如何在 中添加命名空间`BitmapMetadata`，所以我尝试了这个：

```
//I retrieve the image frame (Frame[0]), then:
var metadata = (BitmapMetadata) frame.Metadata.Clone();

//Covering all bases
metadata.SetQuery("/app1/ifd/PaddingSchema:Padding", 4096);
metadata.SetQuery("/app1/ifd/exif/PaddingSchema:Padding", 4096);
metadata.SetQuery("/xmp/PaddingSchema:Padding", 4096); 
```

现在是主要查询，我尝试采用“显而易见的方式”：

```
metadata.SetQuery("/xmp/MyNamespace:MyTag", "AwesomeTagValue"); 
```

果然，如果我保存图像，打开它并运行

```
var value = (string) metadata.GetQuery("/xmp/MyNamespace:MyTag"); 
```

它返回正确的值 - AwesomeTagValue。

但问题是，标签被写入名称空间格式错误的文件中。我查看了文件，这是剥离的 XML/RDF 视图：

```
<rdf:Description rdf:about="" xmlns:prefix0="MyNamespace"> ... </rdf:Description> 
```

所以所有标签都带有前缀，`prefix0`我希望它是

```
<rdf:Description rdf:about="" xmlns:MyNamespace="http://test"> ... </rdf:Description> 
```

任何想法如何做到这一点，或者甚至可以使用`BitmapMetadata`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:41:28.560

您可以通过以下方式实现的最佳效果`BitmapMetadata`：

```
<rdf:Description xmlns:prefix0="http://test">...</rdf:Description> 
```

这是元数据查询：

```
metadata.SetQuery("/xmp/{wstr=http://test}:MyTag", "AwesomeTagValue"); 
```

根据文档：

> 如果特定架构没有友好的架构前缀，例如，如果图像包含使用自定义第三方架构的 XMP 元数据，则元数据查询应使用完整架构 URL。

因此，如果您对结果不满意，您可以：

*   打开图像文件并全部替换`prefix0`为`MyNamespace`
*   使用第三方库修改元数据

# endeca - 在endeca中，我想将伪造输出备份保存在单独的文件夹中

> ID：15758056
> 
> 赞同：0
> 
> 时间：2013-04-02T07:00:20.883
> 
> 标签：endeca

我的项目中有四个子管道，并且这些子管道的输出被摄取到主管道中。我希望在某个目录中的基线之后自动备份子管道的输出文件。如果我禁用单个伪造并想要恢复以前的索引，这将有所帮助。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T18:05:26.500

在您的主锻造运行之前，将复制或存档作业添加到您的基线更新脚本以执行此类事情应该是直截了当的。

radimbe，因为 forge 本身是单线程的（除了很少实现的多线程 java 操纵器）和单片机，这种架构通常用于更好地利用多处理器机器和多线程 CPU 内核。此外，如果数据在不同时间或以不同频率提供，您可以将子锻造与主要基线流程分离，从而缩短其整体周转时间。从战略 POV 来看，这种方法可以将可能庞大、笨重的工作分解为更简单、更专注和更易于维护的组件。

# iphone - ios 4.3 中的标签栏项目外观

> ID：15758057
> 
> 赞同：0
> 
> 时间：2013-04-02T07:00:20.917
> 
> 标签：iphone, ipad, ios4, xcode4.5

我有一个 UITabbar，我正在自定义它的外观，它在 ios >5 中运行良好。但是当我在 iphone 4.3 模拟器中运行相同的时候，它会因为标签栏的外观而崩溃。

```
 for(UIViewController *tab in  tabBarController1.viewControllers)

        {
            [tab.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                    [UIFont fontWithName:@"Arial" size:16.0], UITextAttributeFont, nil]
                                          forState:UIControlStateNormal];
        } 
```

我怎样才能在 iphone 4.3 模拟器中获得相同的外观？

任何帮助将是可观的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:44:50.320

它需要一个棘手的实现。这是一个。您可以在应用程序的标签栏上添加按钮。它很棘手，但它有效。

为此，您必须将`UITabBarController`.

像这样的东西

**BaseViewController.h**

```
@interface BaseViewController : UITabBarController
{
}

// Create custom UIButtons and add it to the tab bar
-(void) addButtons;

@end 
```

**BaseViewController.m**

```
#import "BaseViewController.h"
#import "AppDelegate.h"

@implementation BaseViewController
// Create custom UIButtons and add it to the tab bar

-(void) addButtons
{
    UIImageView *backgroundImage    =   [[UIImageView alloc] initWithFrame: CGRectMake(20, 0, 330, 60)];
    [backgroundImage setImage: [UIImage imageNamed: @"bottom.png"]];
    [backgroundImage setCenter: self.tabBar.center];
    [self.view addSubview: backgroundImage];
    [backgroundImage release];

    UIButton    *firstTabbarButton  =   [UIButton buttonWithType: UIButtonTypeCustom];
    firstTabbarButton.frame = CGRectMake(20.0, 52.0, 68, 49);
    [firstTabbarButton setBackgroundImage:[UIImage imageNamed: @"home_normal.png"] forState:UIControlStateNormal];
    [firstTabbarButton setBackgroundImage:[UIImage imageNamed: @"home_normal.png"] forState:UIControlStateHighlighted];
    [firstTabbarButton setBackgroundImage:[UIImage imageNamed: @"home.png"] forState:UIControlStateSelected];
    [firstTabbarButton addTarget: self action: @selector(goButtonClicked:) forControlEvents: UIControlEventTouchUpInside];
    [firstTabbarButton setCenter: CGPointMake(33, self.tabBar.center.y)];
    [firstTabbarButton setTag: 1000];
    [firstTabbarButton setAdjustsImageWhenHighlighted: NO];
    [self.view addSubview: firstTabbarButton];

    UIButton    *secondTabbarButton  =   [UIButton buttonWithType: UIButtonTypeCustom];
    secondTabbarButton.frame = CGRectMake(20.0, 52.0, 68, 49);
    [secondTabbarButton setBackgroundImage:[UIImage imageNamed: @"lab_normal.png"] forState:UIControlStateNormal];
    [secondTabbarButton setBackgroundImage:[UIImage imageNamed: @"lab_normal.png"] forState:UIControlStateHighlighted];
    [secondTabbarButton setBackgroundImage:[UIImage imageNamed: @"lab_hover.png"] forState:UIControlStateSelected];
    [secondTabbarButton addTarget: self action: @selector(goButtonClicked:) forControlEvents: UIControlEventTouchUpInside];
    [secondTabbarButton setCenter: CGPointMake(96, self.tabBar.center.y)];
    [secondTabbarButton setTag: 1001];
    [secondTabbarButton setAdjustsImageWhenHighlighted: NO];
    [self.view addSubview: secondTabbarButton];

    UIButton    *thirdTabbarButton  =   [UIButton buttonWithType: UIButtonTypeCustom];
    thirdTabbarButton.frame = CGRectMake(20.0, 52.0, 68, 49);
    [thirdTabbarButton setBackgroundImage:[UIImage imageNamed: @"others.png"] forState:UIControlStateNormal];
    [thirdTabbarButton setBackgroundImage:[UIImage imageNamed: @"others.png"] forState:UIControlStateHighlighted];
    [thirdTabbarButton setBackgroundImage:[UIImage imageNamed: @"others_hover.png"] forState:UIControlStateSelected];
    [thirdTabbarButton addTarget: self action: @selector(goButtonClicked:) forControlEvents: UIControlEventTouchUpInside];
    [thirdTabbarButton setCenter: CGPointMake(287, self.tabBar.center.y)];
    [thirdTabbarButton setTag: 1004];
    [thirdTabbarButton setAdjustsImageWhenHighlighted: NO];
    [self.view addSubview: thirdTabbarButton];

    UIButton    *forthTabbarButton  =   [UIButton buttonWithType: UIButtonTypeCustom];
    forthTabbarButton.frame = CGRectMake(20.0, 52.0, 68, 49);
    [forthTabbarButton setBackgroundImage:[UIImage imageNamed: @"history_normal.png"] forState:UIControlStateNormal];
    [forthTabbarButton setBackgroundImage:[UIImage imageNamed: @"history_normal.png"] forState:UIControlStateHighlighted];
    [forthTabbarButton setBackgroundImage:[UIImage imageNamed: @"history.png"] forState:UIControlStateSelected];
    [forthTabbarButton addTarget: self action: @selector(goButtonClicked:) forControlEvents: UIControlEventTouchUpInside];
    [forthTabbarButton setCenter: CGPointMake(223, self.tabBar.center.y)];
    [forthTabbarButton setAdjustsImageWhenHighlighted: NO];
    [forthTabbarButton setTag: 1003];
    [self.view addSubview: forthTabbarButton];

    UIImage *centerImage  =   [UIImage imageNamed:@"go_btn.png"];
    UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0.0, 52.0, 62, 62);
    [button setTag: 1002];
    [button setBackgroundImage:centerImage forState:UIControlStateNormal];
    [button setBackgroundImage:highlightImage forState:UIControlStateSelected];
    [button addTarget: self action: @selector(goButtonClicked:) forControlEvents: UIControlEventTouchUpInside];

    CGFloat heightDifference = button.frame.size.height - self.tabBar.frame.size.height;

    if (heightDifference < 0)
        button.center = self.tabBar.center;
    else
    {
        CGPoint center = self.tabBar.center;
        center.y = center.y - heightDifference/2.0;
        button.center = center;
    }

    [self.view addSubview:button];
}

@end 
```

这将起作用。但请注意应用商店提交指南。尝试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:12:04.967

@Aman Aggarwal 给出了答案

苹果文档说

> setTitleTextAttributes:forState：为给定的控件状态设置标题的文本属性。... 可用性**适用于 iOS 5.0 及更高版本。**

仅适用于 iOS 5.0 及更高版本

# android - Android 图片推文

> ID：15758058
> 
> 赞同：1
> 
> 时间：2013-04-02T07:00:28.020
> 
> 标签：android, image, twitter

我正在尝试从 sd 卡文件夹中发送图像，但仍然无法做到这一点。我正在使用`twitter4j-core-3.0.3` api 并授予权限`android.permission.INTERNET`，`android.permission.ACCESS_NETWORK_STATE`. 这是我的代码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    mSharedPreferences = getApplicationContext().getSharedPreferences(
            "MyPref", 0);

    twitterButton = (Button) findViewById(R.id.twitPic);

    twitterButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            new ImageSender().execute();

        }
    });

    if (!isTwitterLoggedInAlready()) {
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            // oAuth verifier
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                requestToken = twitter
                        .getOAuthRequestToken(TWITTER_CALLBACK_URL);
                // Get the access token
                accessToken = twitter.getOAuthAccessToken(
                        requestToken, verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }
        }
    }       

}
private class ImageSender extends AsyncTask<URL, Integer, Long> {
    private String url;

    protected void onPreExecute() {
         pDialog = ProgressDialog.show(MainActivity.this, "", "Sending image...", true);             
         pDialog.setCancelable(false);
         pDialog.show();
    }

    protected Long doInBackground(URL... urls) {
         long result = 0;

        Log.d(TAG, "Start sending image...");

try {
    String ExternalStorageDirectoryPath = Environment
              .getExternalStorageDirectory()
              .getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/Friends/"+"image4.jpg";

    File targetDirector = new File(targetPath);

    ConfigurationBuilder builder = new ConfigurationBuilder();
    builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
    builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

    // Access Token
    String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
    // Access Token Secret
    String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

    AccessToken accessToken = new AccessToken(access_token, access_token_secret);
    twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

    StatusUpdate status = new StatusUpdate("");
    status.setMedia(targetDirector);

    twitter.updateStatus(status);

    result = 1;

    Log.d(TAG, "Image uploaded, Twitpic url is " + url);    
} catch (TwitterException e) {  
Log.e(TAG, "Failed to send image "+e);
e.printStackTrace();
}
        return result;
        }

        protected void onProgressUpdate(Integer... progress) {
        }

        protected void onPostExecute(Long result) {
         pDialog.cancel();

         String text = (result == 1) ? "Image sent successfully.\n Twitpic url is: " + url : "Failed to send image";

         Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
        }
    }
private boolean isTwitterLoggedInAlready() {
    // return twitter login status from Shared Preferences
    return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
} 
```

这是我的日志

```
04-02 06:38:02.275: E/Tag(1762): Failed to send image 400:The request was invalid. An accompanying error message will explain why. This is the status code will be returned during version 1.0 rate limiting(https://dev.twitter.com/pages/rate-limiting). In API v1.1, a request without authentication is considered invalid and you will get this response.
04-02 06:38:02.275: E/Tag(1762): message - Bad Authentication data
04-02 06:38:02.275: E/Tag(1762): code - 215
04-02 06:38:02.275: E/Tag(1762): Relevant discussions can be found on the Internet at:
04-02 06:38:02.275: E/Tag(1762):    http://www.google.co.jp/search?q=b2b52c28 or
04-02 06:38:02.275: E/Tag(1762):    http://www.google.co.jp/search?q=11331d43
04-02 06:38:02.275: E/Tag(1762): TwitterException{exceptionCode=[b2b52c28-11331d43], statusCode=400, message=Bad Authentication data, code=215, retryAfter=-1, rateLimitStatus=null, version=3.0.3} 
```

**编辑：**当我尝试在这部分发推文时

```
StatusUpdate status = new StatusUpdate("");
status.setMedia(targetDirector);
twitter.updateStatus(status); 
```

然后会产生`twitter.updateStatus("If you're reading this on Twitter, it worked!");`同样的错误。

我从几天开始就在上面，但没有得到解决方案。请任何人帮助我解决问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:19:10.747

改变你`AsyncTask`这样使用它对我有用

```
 twitterButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) 
    {
        String status = null;   
    new updateTwitterStatus().execute(status);

    }
}); 

public class updateTwitterStatus extends AsyncTask<String, String, String> {         
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressBar_show();
    }

    protected String doInBackground(String... args) {

        try {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

            // Access Token
            access_token = SharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
            // Access Token Secret
            access_token_secret = SharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");            

            String upload_image_url = postPicture( "/mnt/sdcard/yourimage.jpg", " ");
            Log.d("--------------upload_image_url=" + upload_image_url.toString() + "---------", " ");

        } catch (Exception e) {              
            Log.d("Twitter Update Error", e.getMessage());
        }
        return null;
    }

    public String postPicture(String fileName, String message) {

        try {
            Log.d("----start---postPicture()---", " ");
            File file = new File(fileName);
            MediaProvider mProvider = getMediaProvider();

            String accessTokenToken = access_token;
            String accessTokenSecret = access_token_secret;

            Properties props = new Properties();
            props.put(PropertyConfiguration.MEDIA_PROVIDER, mProvider);
            props.put(PropertyConfiguration.OAUTH_ACCESS_TOKEN, accessTokenToken);
            props.put(PropertyConfiguration.OAUTH_ACCESS_TOKEN_SECRET, accessTokenSecret);
            props.put(PropertyConfiguration.OAUTH_CONSUMER_KEY, TWITTER_CONSUMER_KEY);
            props.put(PropertyConfiguration.OAUTH_CONSUMER_SECRET, TWITTER_CONSUMER_SECRET);
            Configuration conf = new PropertyConfiguration(props);

            ImageUploadFactory factory = new ImageUploadFactory(conf);
            ImageUpload upload = factory.getInstance(mProvider);
            String url;
            url = upload.upload(file, message);
            Log.d("----end---postPicture()---", " ");
            return url;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    MediaProvider getMediaProvider() {

        Log.d("----start---getMediaProvider()---", " ");

        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(MainActivity.this);
        String provider = preferences.getString("pictureService", "twitter");

        MediaProvider mProvider;
        if (provider.equals("yfrog"))
            mProvider = MediaProvider.YFROG;
        else if (provider.equals("twitpic"))
            mProvider = MediaProvider.TWITPIC;
        else if (provider.equals("twitter"))
            mProvider = MediaProvider.TWITTER;
        else
            throw new IllegalArgumentException("Picture provider " + provider + " unknown");

        Log.d("----end---getMediaProvider()---", " ");

        return mProvider;
    }

    protected void onPostExecute(String file_url) {
        ProgressBar_hide();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getApplicationContext(), "Status tweeted successfully", Toast.LENGTH_SHORT).show();              
            }
        });
    }
} 
```

# php - 在 cakephp/sql 服务器中获取更新记录的 PK

> ID：15758065
> 
> 赞同：0
> 
> 时间：2013-04-02T07:00:47.153
> 
> 标签：php, sql, sql-server, cakephp, bulkinsert

我已使用批量更新在两个表之间同步数据，如下所示

```
$sqlProc="
UPDATE cards
SET cards.card_no = t2.card_number,
    cards.expiry_date=t2.expiry_date OUTPUT INSERTED.Id AS 'updated_id'
FROM cards
INNER JOIN card_temp t2 ON (cards.account_no = t2.account_number
                            AND cards.customer_name=t2.customer_name)
WHERE cards.is_disabled='N'";
        debug($this->Request->query($sqlProc)); 
```

上面的查询还将返回`OUTPUT INSERTED.Id AS 'updated_id'`在 sql server 编辑器中使用的更新记录的主键，但是当我调试 sql 时

```
debug($this->Request->query($sqlProc)); 
```

然后它返回`true`成功的查询和`false`不成功的查询。

有什么想法可以提取`updated_id`到数组，以便我可以将这些 id 用于另一个表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:43:01.223

好吧，我终于想通了。我创建了一个中间表做了以下

```
//inserted into temp_id (bridge table)
$sqlProc="insert into temp_id select * FROM (update cards 
                        set         cards.card_no = t2.card_number,cards.expiry_date=t2.expiry_date
                        OUTPUT INSERTED.Id AS 'updated_id'
                        from        cards 
                        inner join  card_temp t2
                        on          (cards.account_no = t2.account_number and cards.customer_name=t2.customer_name)
                        where cards.is_disabled='N'
                        ) AS t";
        $this->Request->query($sqlProc);
        //fetch from intermediate table

        $sqlSel="SELECT * FROM temp_id";
        $arr=$this->Request->query($sqlSel);
          //this array will fetch all updated id's
        debug($arr);
        $sqlDel="DELETE FROM temp_id";
        $this->Request->query($sqlDel); 
```

# mysql - mysql如何删除一条记录

> ID：15758067
> 
> 赞同：0
> 
> 时间：2013-04-02T07:00:50.413
> 
> 标签：mysql

我对mysql一无所知，所以请多多包涵。

我在我的网站应用程序中使用了一个叫做 livesite 的东西，当任何人都可以在我的网站上发帖时，它会创建这些叫做表单的东西。我在设置网站时不知道他的表单，现在我提交了 75000 个垃圾邮件表单。我仍然不知道人们（或更可能是机器人）是如何做到的，一定是某个地方的后门。

Livesite 只允许您一次删除一个表单条目，这显然对我不起作用。

我知道后端是 mysql，但我的 ISP 不会提供帮助，因为这不是他们的问题。

有人可以给我绝对的白痴指南来删除mysql中的一堆记录。所有记录在现场管理页面上如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/aVRRM.png)

# iphone - 如何以编程方式选择地图图钉

> ID：15758068
> 
> 赞同：25
> 
> 时间：2013-04-02T07:00:52.630
> 
> 标签：iphone, ios, objective-c, map, mkmapview

我是地图概念的新手。

请找到所附图像一次。

![在此处输入图像描述](https://i.stack.imgur.com/SrDnu.png)

当我单击“图钉”时，我收到消息说“欣赏你的微笑”或任何文字.....现在我想要...当我们选择表格视图时，我需要为该图钉提出该消息（使用退出该引脚的用户交互）...

我正在使用下面的代码来制作这张地图和别针。

```
 -(void) viewWillAppear:(BOOL)animated
{
[super viewWillAppear:YES];
customLocation.latitude=[casesobjc.latitude_string doubleValue];
        customLocation.longitude=[casesobjc.longitude_string doubleValue];
 MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:casesobjc.locationForMap_string andCoordinate:customLocation];
[mapView addAnnotation:newAnnotation];
}
- (MKAnnotationView *) mapView: (MKMapView *) mapView viewForAnnotation: (id<MKAnnotation>) annotation {
 MKPinAnnotationView *pin = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier: @"annotation_ID"];
if (pin == nil) {
        pin = [[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier: @"annotation_ID"];
    } else {
        pin.annotation = annotation;
    }
    pin.pinColor = MKPinAnnotationColorPurple;
    pin.animatesDrop = YES;
    pin.canShowCallout=YES;
return pin;
} 
```

现在我将显示所有的引脚，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/Thrw2.png)

怎么做当我们单击表格视图时，我需要显示该引脚的标题，就像我们选择引脚时的显示方式一样？

提前致谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-02T19:52:54.000

您正在寻找的方法是**selectAnnotation:**。

在您的`didSelectRowAtIndexPath`中，您必须找到与表格行关联的注释。

找到它后，您可以告诉它，使用以下命令选择它：

```
[mapView selectAnnotation:foundAnnotation animated:YES]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-22T11:37:21.023

与 Objective C 的答案相同，在您的表格视图中，您有一个注释列表。在 Swift 中`didSelectRow`：

对于斯威夫特 4：

```
// annotations would be the array of annotations - change to your required data sets name
let selectedAnnotation = annotations[indexPath.row]
self.mapView.selectAnnotation(selectedAnnotation, animated: true) 
```

简短而简单。

# c# - C# oxyplot 从图中获取数据

> ID：15758069
> 
> 赞同：0
> 
> 时间：2013-04-02T07:01:05.150
> 
> 标签：c#, plot, oxyplot

我试图使用它绘制一些点的图，但是我想在用户单击窗口中图的任何点时显示实际值。不知何故，这是在执行 WPF 应用程序时自动完成的，但不是在执行 Windows 窗体应用程序时。有人对此有任何想法吗？还是我必须自己使用事件处理程序等来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T08:29:54.120

你可以看看这个讨论。

但是假设你有一个看起来像这样的类：

```
class ExercisePoint : IDataPoint
{
    public double X { get; set; }
    public double Y { get; set; }
    public int Lvl { get; set; }
    public DateTime DateTime { get; set; }
    public string Exercise { get; set; }
} 
```

您可以让您的跟踪器显示如下信息：

```
var line_series_array = new LineSeries()
{
  ... other propreties initialization here ...
  TrackerFormatString = "{DateTime:dd.MM.yy}"+ Environment.NewLine +"{Exercise}, lvl {Lvl}:{Y}"
}; 
```

（在“{}”中使用你的类属性。如果你使用默认的 DataPoint，你只会得到 X 和 Y）

# asp.net - Microsoft 移动资源管理器 3.0 错误

> ID：15758070
> 
> 赞同：0
> 
> 时间：2013-04-02T07:01:07.680
> 
> 标签：asp.net, windows-phone, mobile-emulator

我使用以下链接完成了一个移动应用程序：http: [//www.codeproject.com/Articles/69887/Mobile-Application-Development-in-ASP-NET](http://www.codeproject.com/Articles/69887/Mobile-Application-Development-in-ASP-NET)

当我尝试使用从以下链接下载的 Microsoft mobile explorere 3.0 启动移动应用程序时 [http://www.microsoft.com/en-us/download/details.aspx?id=5352](http://www.microsoft.com/en-us/download/details.aspx?id=5352)

得到以下错误： ![在此处输入图像描述](https://i.stack.imgur.com/EdGxr.png)

请帮助我如何继续我是新手，我无法追踪错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:09:28.120

正如@Dai 在上面的评论中提到的，Windows Mobile 6.x 现在不受支持（并且几乎没有人使用）。要为 Windows Phone（7.x 和 8）创建应用程序，请查看适用于 Windows Phone 的 Visual Studio Express 2012（它是免费的）。它拥有开始为 Windows Phone 创建应用程序所需的一切 - [http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone)

另请查看 dev.windowsphone.com 以获取示例代码、视频、博客等。在这里，您还可以注册一个允许您发布应用程序的开发人员帐户（这通常为 99 美元/年，尽管如果您对 Windows Phone 生态系统给予足够的关注，您几乎总能找到几场比赛在您可以运行的地方进行赢取开发者代币，免费一年）。

最后一点...如果您有兴趣为 Windows Phone 创建基于 HTML 的应用程序，您可以查看 PhoneGap。它允许您创建托管在本机应用程序外壳（即混合应用程序）中的跨平台、基于 HTML5 的应用程序 - [http://phonegap.com/](http://phonegap.com/)

# android - 如何阅读通知消息以提醒我的应用程序中的用户？

> ID：15758071
> 
> 赞同：0
> 
> 时间：2013-04-02T07:01:10.307
> 
> 标签：android, notifications, file-transfer

我已经使用蓝牙实现了文件传输。文件传输完成后，它会向我显示通知

> 文件成功 1 失败 0 在通知栏中。

如何阅读此移动通知消息。在我的应用程序中向用户显示成功发送或失败。

# wordpress - 将 Pods CMS 与 Roots Wordpress 主题一起使用

> ID：15758073
> 
> 赞同：2
> 
> 时间：2013-04-02T07:01:28.123
> 
> 标签：wordpress, podscms

我在使用[Roots 主题的自定义 Wordpress 模板中显示 Pod 数据时遇到问题](http://www.rootstheme.com/)

我已经设置了一个“产品”Pod，一个分配了自定义 Wordpress 模板的 Pod 页面“products/*”。Roots 使用的[Theme Wrapper](https://github.com/retlehs/roots/blob/master/doc/wrapper.md)文件似乎不适用于 Pods 页面。有没有人遇到过这个问题，也许找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T21:18:27.840

我不知道这是否是一个“好”的解决方案。我昨天开始使用 Wordpress。

也就是说，这是我的解决方案，似乎效果很好。

在您的 pods 页面模板中，将页面的输出放入 $pods_content

```
$pods_content = $cookie->template('', get_pod_template('market-single'));
ob_start();
include get_stylesheet_directory() . '/base.php';
print ob_get_clean(); 
```

然后在 base.php 中替换 root_template_path 包含：

```
if ($pods_content): print $pods_content; else: include roots_template_path(); endif; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:16:24.923

您可以添加自定义模板并将 pods_content() 放入您要输出内容的位置。

或者您可以连接`get_template_part_templates/content`并检查“页面”的第二个值，然后在那里运行 pods_content()。

```
add_action( 'get_template_part_templates/content', 'hook_into_pods_page', 2 );

function hook_into_pods_page ( $slug, $name ) {
    if ( is_pod_page() && 'page' == $name )
        pods_content();
} 
```

# flash - 如何将 Flash 动作脚本背景转换为透明？

> ID：15758075
> 
> 赞同：0
> 
> 时间：2013-04-02T07:01:28.920
> 
> 标签：flash, actionscript, background, transparent

嗨帮我解决这个问题。我想将背景更改为透明。目前它是黑色的。您可以从下面的链接中找到代码。

[http://pastebin.com/dK5rgCTA](http://pastebin.com/dK5rgCTA)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:28:22.957

要将 SWF 设置为透明，请检查您的 flash 对象 html 属性。

```
 <object classid="00" width="600" height="450">
                      <param name="movie" 
                      <param name="quality" value="high">
                      <param name="wmode" value="direct" > // here change 
```

如果设置 wmode =transparent，则设置 flash 文件的 bg 颜色将被忽略。如果您在播放器外部运行 .swf，则将显示背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:13:29.170

透明背景是 html 相关的使用参数

警告 wmode tranparent 是处理器密集型的，你总能找到不使用它的方法。例如，您可以在您的 swf 中嵌入您的 html 背景。

# mysql - 范围约束数字 MySQL 列：如何？

> ID：15758076
> 
> 赞同：2
> 
> 时间：2013-04-02T07:01:36.183
> 
> 标签：mysql

我可以在数字 MySQL 列（InnoDB）上定义一个约束，只允许某个范围内的值吗？

例如`wavelength`此表中的列：

```
CREATE TABLE spectrumdata
(
  valueid INT AUTO_INCREMENT,
  spectrumset INT NOT NULL,
  wavelength DOUBLE NULL,
  intensity DOUBLE NULL,
  error INT NOT NULL,
  status INT NOT NULL,
  PRIMARY KEY (valueid),
  INDEX spectrumset_idx (spectrumset),
  CONSTRAINT spectrumset_fk FOREIGN KEY (spectrumset)
    REFERENCES spectrumsets (setid)
)
COLLATE=utf8_general_ci
ENGINE=InnoDB
ROW_FORMAT=DEFAULT
AUTO_INCREMENT=1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:10:44.247

如果您使用 InnoDB 作为引擎先生，您可以[检查](https://stackoverflow.com/questions/9249695/limit-the-value-of-a-mysql-datatype-to-a-specific-range-preferably-not-enum)一下。如您所见，您可以创建一个新表，其中包含您的限制值和对您的字段的引用（作为外键），然后它现在以引用完整性强制您的约束。

**更新**

尝试这个：

```
 CREATE TABLE allowed_val(
      limiting_val DOUBLE NOT NULL,
      PRIMARY KEY (limiting_val )
    ) ENGINE = InnoDB;

INSERT INTO allowed_val( limiting_val) VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),..(1000);

ALTER TABLE spectrumdata
ADD FOREIGN KEY (wavelength) REFERENCES allowed_val(limiting_val); 
```

但是您还必须将`spectrumdata`波长更改`NOT NULL`为 DEFAULT = 0; 处理空值。

# json - 在 R 中解析 Facebook JSON 结果

> ID：15758077
> 
> 赞同：1
> 
> 时间：2013-04-02T07:01:39.277
> 
> 标签：json, r, facebook-graph-api, rcurl, rjsonio

我已经阅读了其他问题，但我仍然不知道如何在 R 中解析 Facebook Graph Search 结果。我的主要目标是转换为数据框之类的东西，以分析一些列。

```
library(RCurl)
library(RJSONIO)
library(rjson)

data <- getURL("https://graph.facebook.com/search?q=flamengo&type=post&limit=1000", cainfo="cacert.perm")
#if you don't have "cacert.perm" file, do as follow
#download.file(url="http://curl.haxx.se/ca/cacert.pem", destfile="cacert.perm") 
```

更新：谢谢@user1609452

现在如果我想包含嵌套在“喜欢”中的“计数”怎么办？让我展示：

```
names(fbData$data[[1]])
[1] "id"           "from"         "message"      "actions"      "privacy"     
[6] "type"         "created_time" "updated_time" "shares"       "likes"   
names(fbData$data[[1]]$likes)
[1] "data"  "count" 
```

在这种情况下，我应该如何设置 match.fun 参数？

```
likes <- lapply(fbData$data[[1]]$likes,name='count')
Error in match.fun(FUN) : no "FUN" argument, no pattern

likes <- lapply(fbData$data[[1]]$likes,'[[',name='count')
Error in FUN(X[[2L]], ...) : index out of bounds 
```

有人能帮助我吗？

* * *

如果我想包含“计数”，嵌套在“喜欢”中？让我展示：

```
names(fbData$data[[1]])
[1] "id"           "from"         "message"      "actions"      "privacy"     
[6] "type"         "created_time" "updated_time" "shares"       "likes"   
names(fbData$data[[1]]$likes)
[1] "data"  "count" 
```

在这种情况下，我应该如何设置 match.fun 参数？

```
likes <- lapply(fbData$data[[1]]$likes,name='count')
Error in match.fun(FUN) : no "FUN" argument, no pattern

likes <- lapply(fbData$data[[1]]$likes,'[[',name='count')
Error in FUN(X[[2L]], ...) : index out of bounds 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:14:23.087

使用`RJSONIO`或`rjson`不需要调用两者。导入`JSON`数据后，您需要将其转换为列表。

```
library(RCurl)
library(RJSONIO)

data <- getURL("https://graph.facebook.com/search?q=flamengo&type=post&limit=1000")

fbData <- fromJSON(data) 
```

这些帖子包含在`fbData$data`.

```
#> length(fbData$data)
#[1] 500 
```

第一篇文章有​​各种属性：

```
#> names(fbData$data[[1]])
#[1] "id"           "from"         "message"      "privacy"      "type"        
#[6] "application"  "created_time" "updated_time" 
```

要将此数据转换为数据框，您需要确定要包含的内容以及如何构建它。例如，要获取您可以使用的所有消息正文：

```
lapply(fbData$data,'[[',name='message') 
```

更新：

要获取帖子的点赞数，您可以使用：

```
lapply(fbData$data,function(x){x$likes$count}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:25:43.837

这实际上是对您在评论中提出的问题的回答。我很抱歉没有在评论中回答，但我看不到这样做的选项。

如果你想替换 / 你可以使用

```
install.packages("stringr", dep=TRUE)
library("stringr")
library("RCurl")
library("RJSONIO")
data <- getURL("https://graph.facebook.com/search?q=flamengo&type=post&limit=1000")
clean <- str_replace_all(data,"\","whatever")
fbData <- fromJSON(clean) 
```

其中“whatever”是您要替换它的内容。顺便说一句，如果您可以使用 rjson 而不是 RJSONIO 那么这可能会稍微好一点，但无论如何它们基本上是相同的。rjson 只是运行得更快更可靠，而 RJSONIO 具有更多功能。

哦，顺便说一句，您可以在 jsonlint.com 验证您的 JSON 数据

这听起来像一个有趣的应用程序，你要在这里，它是什么？某种FB跟踪狂？

# android - Android Sax Xml 解析器属性

> ID：15758085
> 
> 赞同：0
> 
> 时间：2013-04-02T07:01:49.310
> 
> 标签：android, xml-parsing, saxparser

我正在使用 SAX 解析 xml 文件，但无法获得“y”的值

这是xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type= "text/html" ?>
<Chart1 count="3">
            <Sales_x0020_Amount Label="Sales Amount">
               <Chart1_CategoryGroup_Collection>
                  <Chart1_CategoryGroup Label="URC 1">
                     <Value Y="30434929.1" />
                     <name>keeevin</name>
                  </Chart1_CategoryGroup>
                  <Chart1_CategoryGroup Label="URC 2">
                     <Value Y="39757503.83" />
                     <name>kevin2</name>
                  </Chart1_CategoryGroup>
                  <Chart1_CategoryGroup Label="URC 3">
                     <Value Y="19611069.73" />
                     <name>kevin</name>
                  </Chart1_CategoryGroup>
               </Chart1_CategoryGroup_Collection>
            </Sales_x0020_Amount>
</Chart1> 
```

我可以得到属性“name”的值，但不能得到“y”的值。

获取值的部分代码..

```
Element e = (Element)nodes.item(i);
map.put("Name", "Name:" + XMLfunctions.getValue(e, "name"));
map.put("Y", "Y Coord:" + XMLfunctions.getValue(ee, "y")); 
```

谢谢。

编辑：我在这里设置了一个断点，它不会通过这里。

```
static class MyHandler extends DefaultHandler {
    public void startElement(String namespaceURI, String localName,
                             String qName, Attributes atts)  {
        // Get the number of attribute
        int length = atts.getLength();

    // Process each attribute
    for (int i=0; i<length; i++) {
        // Get names and values for each attribute
        String name = atts.getQName(i);
        String value = atts.getValue(i);
        if(qName == "Value"){
             y = atts.getValue(i);
        }
        String nsUri = atts.getURI(i);
        String lName = atts.getLocalName(i);
    }
} 
```

}

使用这个解决了它：

```
 public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {

            elementOn = true;

    if (localName.equals("Chart"))
            {
                data = new XMLGettersSetters();
            }
            if (qName.equals("Value")) {
                String attributeValue = attributes.getValue(0);
                data.setValue(attributeValue);
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T11:15:50.927

您的起始元素将是图表，该计数将是属性，它将出现在 if 部分中，而不是在 else if 部分中，Sales_x0020_Amount 将出现，并且该属性将是标签。参考本[教程](http://theopentutorials.com/tutorials/android/xml/how-to-parse-remote-xml-using-sax-parser-with-android-asynctask/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:44:02.287

在您的 Handler(extended DefaultHandler) 中的 startElement 方法中写入

```
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if (qName.equals("Value")) {
                 map.put("Y", "Y Coord:" + attributes.getValue(0));
            }
    } 
```

# c++ - c++ 文件和变量

> ID：15758089
> 
> 赞同：0
> 
> 时间：2013-04-02T07:02:14.527
> 
> 标签：c++

我正在尝试读取文件并使用行上的第一个整数作为变量 `s`。
我的函数可以读取文件并写入另一个文件，但它不会将第一个数字存储为变量

```
void process_file(ifstream& in, ofstream& out)
{
 string i,o;
char tmp;
int s;
prompt_user(i,o);
in.open (i.c_str());
if (in.fail())
{
    cout << "Error opening " << i << endl;
    exit(1);
}
    out.open(o.c_str());

while(tmp !='\n')
{
    in.get(tmp);
    s=tmp;
}
cout << tmp;
in.get(tmp);

while (tmp !='\n')
{
    out.put(tmp);
    in.get(tmp);
}
in.close();
out.close();

} 
```

这是我在读取看起来像这样的文件时得到的结果..

4 姓 1 姓 1 姓 2 姓 2 姓 3 姓 3 .....

输入包含销售人员姓名和若干周的每日销售额的文件名。somedat.dat 输入存储总销售额和平均销售额摘要的文件的名称。od.dat

10（第一个的姓氏和名字正确地输出到另一个文件中，正如预期的那样，10应该是4..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:15:28.217

我假设您想要的是获取输入文件中的第一行，这是一个数字，并将其存储在`s`. 您可以使用`stringstream`and`getline`来执行此操作：

```
void process_file(ifstream& in, ofstream& out)
{
 string i,o;
char tmp;
int s;
prompt_user(i,o);
in.open (i.c_str());
if (in.fail())
{
    cout << "Error opening " << i << endl;
    exit(1);
}
    out.open(o.c_str());

//assuming the number is on a separate line by itself
string line;
getline(in, line);
stringstream linestream(line);
linestream >> s;

//while you can read from the input, write what you read directly to the output
while(getline(in, line))
  out << line;

in.close();
out.close(); 
```

# ios - 在 sqlite3 中使用 sqlite3_stmt？

> ID：15758092
> 
> 赞同：0
> 
> 时间：2013-04-02T07:02:21.547
> 
> 标签：ios, sqlite

我是 iOS 和 sqlite3 的新手，我发现`sqlite3_stmt`在 ios4 中使用的方式有点困惑，有人可以解释为什么以及如何在 ios 开发中使用 sqlite3_stmt 吗？

# java - 目录分隔符不应出现在库名称中：Macintosh HD/Users/sakkisetty/Documents/dll/FasExtend.dll

> ID：15758095
> 
> 赞同：8
> 
> 时间：2013-04-02T07:02:35.810
> 
> 标签：java

我用它来加载java程序中的dll库。显示错误。像这样的目录分隔符不应该出现在库名中：。

```
import java.sql.*;
/*
import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.NativeLong;
import com.sun.jna.Platform;
import com.sun.jna.*;*/

public class jdbc3
{
     public native void FasSendUserFromFasToFac();

    static
    {
        System.loadLibrary("Macintosh HD/Users/sakkisetty/Documents/dll/FasExtend");
    }

  /*  public interface simpleDLL extends Library
        {
            simpleDLL INSTANCE = (simpleDLL) Native.loadLibrary((Platform.isWindows() ? "simpleDLL" : "simpleDLLLinuxPort"), simpleDLL.class);

    byte giveVoidPtrGetChar(Pointer param); // char giveVoidPtrGetChar(void* param);
    int giveVoidPtrGetInt(Pointer param);   //int giveVoidPtrGetInt(void* param);
    int giveIntGetInt(int a);               // int giveIntGetInt(int a);
    void simpleCall();

        }*/

    // JDBC driver name and database URL
    static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";
    static final String DB_URL = "jdbc:mysql://localhost:3306/somesh";

    //  Database credentials
    static final String USER = "root";
    static final String PASS = "";

    public static void main(String[] args)
    {

              jdbc3 jb=new jdbc3();
        jb.FasSendUserFromFasToFac();

        Connection conn = null;
        Statement stmt = null;
        try{
            //STEP 2: Register JDBC driver
            Class.forName("com.mysql.jdbc.Driver");

            //STEP 3: Open a connection
            // System.out.println("Connecting to database...");
            conn = DriverManager.getConnection(DB_URL,USER,PASS);
            System.out.println("Connecting to database...");
            //STEP 4: Execute a query
            System.out.println("Creating statement...");
            stmt = conn.createStatement();
            String sql;
            sql = " select id,image from images1 ";
            ResultSet rs  = stmt.executeQuery(sql);

            //STEP 5: Extract data from result set
            while(rs.next())
            {
                //Retrieve by column name
                System.out.println("\n");
                int no = rs.getInt("id");
                System.out.print("\t USER_I_ID: " +no);
                /*String std_name = rs.getString("name");
                 System.out.print(" \t First_name : " + std_name);
                 String std_course = rs.getString("course");
                 System.out.print(" \t course : " + std_course);*/
                Blob std_image = rs.getBlob("image");
                System.out.print(" \t std_images : SS" + std_image);
            }
        }

        catch(SQLException se)
        {
            //Handle errors for JDBC
            se.printStackTrace();
        }catch(Exception e)
        {
            //Handle errors for Class.forName
            e.printStackTrace();
        }finally
        {
            //finally block used to close resources
            try{
                if(stmt!=null)
                    stmt.close();
            }catch(SQLException se2){
            }// nothing we can do
            try{
                if(conn!=null)
                    conn.close();
            }catch(SQLException se){
                se.printStackTrace();
            }//end catch try

        }//end finally

    }//end main
}//end FirstExample 
```

假设我只使用`system.load()`它可能会显示一种类型的错误。那是

```
Expecting an absolute path of the library: Macintosh HD/Users/sakkisetty/Documents/dll/FasExtend.dll 
```

并使用全名`system.loadlibrary()`。它可能会显示另一种类型错误。那是

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: 
   Directory separator should not appear in library name: 
      Macintosh HD/Users/sakkisetty/Documents/dll/FasExtend.dll 
```

所以我正在使用 mac 操作系统。请告诉我这个问题的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-12T03:30:43.497

System.loadLibrary 仅接受文件名并在当前可用的 java 路径中查找文件。您需要将包含 FasExtend.dll 的目录添加到您的 java 路径中，然后使用

```
 System.loadLibrary("FasExtend") 
```

与这篇文章类似：[Java 本机库 System.loadLibrary failed with UnsatisfiedLinkError](https://stackoverflow.com/questions/5388925/java-native-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T21:21:26.103

尝试`.so`从应用程序的文档目录（而不是从应用程序包中）加载库时，我在 Android 上遇到了同样的问题。就我而言，调用以下方法有效：

```
System.load('/absolute/path/to/lib.so') 
```

# java - 简单递归

> ID：15758096
> 
> 赞同：2
> 
> 时间：2013-04-02T07:02:40.267
> 
> 标签：java, function, loops, recursion

我在玩这个功能：

```
public class x {

public static void main(String[] args) {
recurse(10);
}

public static int recurse(int theNumber) {

    if(theNumber == 0) {
        return 0;
    }

    else
    {
        System.out.println(theNumber);
        theNumber--;
        recurse(theNumber);
        System.out.println(theNumber);
    }

    return -1;
}
} 
```

我得到了这个输出：

10 9 8 7 6 5 4 3 2 1 0 1 2 3 4 5 6 7 8 9 按任意键继续。. .

这怎么可能？我知道从 10 到 0 的倒计时是从哪里来的……但是它到底是怎么倒计时的？我很确定我错过了关于递归的基本概念。有人可以填空吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T07:04:06.387

那是因为`System.out.println(theNumber);`你的方法中的最后一个。在递归调用该方法并完成该方法之后，它正在打印这些值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T07:20:11.087

Habib实际上解释得很好。只需确保您了解在参数 theNumber 为零之前遵循递归，因此递归终止，并且这发生在任何最后一次 Sysout 调用完成之前。另请记住，该变量不是共享的，而是每次调用的本地变量。在视觉上，它可能看起来像这样

```
recurse(5)
print(5)
recurse(4)
  print(4)
  recurse(3)
    print(3)
    recurse(2)
      print(2)
      recurse(1)
         print(1)
         recurse(0)
         print(0)
      print(1)
    print(2)
  print(3)
print(4) 
```

同一列中的调用属于相同的堆栈帧，即相同的方法调用。请注意，在递归调用之后实际到达第一个打印语句之前，您在调用层次结构中的表现如何。这应该让你清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T07:13:01.453

为简洁起见，假设您调用`recurse(2)`了主程序。然后你有：

`theNumber`= 2 打印 2、递减、调用`recurse(1)`

--> `theNumber`= 1，打印 1，递减，调用`recurse(0)`

----> `theNumber`= 0，不打印返回

--> `theNumber`= 1 打印 0（从 1 递减），返回

`theNumber`= 2 打印 1（从 2 递减），返回

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T07:12:19.660

这就是你需要的——

```
public static int recurse(int theNumber) {

    System.out.println(theNumber);
    if (theNumber > 0) {
        theNumber--;
        recurse(theNumber);
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T07:11:59.420

你的最后一个`System.out.println(theNumber)`是它的原因。正如您所询问的那样。首先递归调用完成，然后进行回溯。检查此链接[回溯](http://en.wikipedia.org/wiki/Backtracking)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T07:12:11.927

正如 Habib 所说，流程进入递归，然后在完成执行递归函数后，您的最后一个 System.out.println(theNumber) 被调用。

```
---->  public static int recurse(int theNumber) {
|   
|       if(theNumber == 0) {
|           return 0;
|       }
|   
|       else
|       {
|           System.out.println(theNumber);
|           theNumber--;
----------< recurse(theNumber);
            System.out.println(theNumber);
        }

        return -1;
    } 
```

因此，函数从递归返回的时间 theNumber 包含仅减 1 的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T07:23:37.983

在最后一个 syso 语句之前，您正在调用递归函数，因此它继续在堆栈上添加您的调用。在达到 0 值后，它通过从堆栈中拉取值返回到当前函数。之后，它通过打印值你最后的 syso 声明...

# vb.net - 如何在另一台电脑上运行 vb.net 项目？

> ID：15758099
> 
> 赞同：1
> 
> 时间：2013-04-02T07:02:58.373
> 
> 标签：vb.net, deployment

请帮助我做了很多研究，但是当我尝试将我的 vb.net 项目安装到另一台没有 vb.net 的电脑时都失败了。安装程序说：

> 无法安装或运行应用程序。该应用程序需要首先在全局程序集缓存 (GAC) 中安装程序集 Microsoft.VisualStudio.DebuggerVisualizers 版本 10.0.0.0。

但我找不到如何解决这个错误的好方法。我是部署 .Net 项目的初学者。请有人帮助我，我明天需要它才能在另一台电脑上工作。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:14:58.747

其实我认为它有一些其他的安装方式。从以前开始我也安装了问题。但我尝试了其他方式。如果您的项目不需要许可并且就像免费开源一样，您可以尝试通过 ZIP 安装。您可以检查 ZIP 安装程序。这个[链接](http://www.msfn.org/board/topic/39048-how-to-make-a-7-zip-switchless-installer/)会教你。此外，您只需将调试文件夹复制为安装程序项

```
copy /b 7z.sfx + config.txt + file_name.7z setupname.exe >> This line we write at cmd 
```

7z.sfx 是来自 C:\Program Files\7-zip\7z.sfx 的文件<< 您将其复制到新目录 file_name.7z << 您想要安装到其他计算机的目录并将其压缩 Setupname.exe << 这是您自己的 exe 名称，但必须与 Config.txt 相同

```
;!@Install@!UTF-8!
RunProgram="REgFile.exe .cmd"
;!@InstallEnd@! << All this is config.txt text 
```

您必须将 RegFile.exe 更改为您的 setupname.exe 名称。cmd 对于我们的副本来说是基本的

# jquery - jQuery Cycle 插件在模态框内不起作用（简单模态插件）

> ID：15758104
> 
> 赞同：5
> 
> 时间：2013-04-02T07:03:22.593
> 
> 标签：jquery, wordpress, modal-dialog, jquery-cycle, simplemodal

我正在开发一个 Wordpress 主题，它在模式框中而不是单独的页面中打开新帖子。

我用来为每个帖子显示图像的图像幻灯片插件（[jQuery Cycle Plugin](http://www.malsup.com/jquery/cycle/)）在帖子位于其自己的页面上时效果很好，但是当使用[Simple Modal](http://www.ericmmartin.com/projects/simplemodal/)插件时，图像显示在列表中而不是幻灯片中，完全打破了我的布局。

这是帖子本身的样子（单击图片以推进幻灯片）：[http ://cl.ly/240c3C0i1m1o](http://cl.ly/240c3C0i1m1o)

您可以单击此页面上的第一个缩略图查看模态的工作原理（我还没有为模态编写唯一 URL）：[http ://cl.ly/3A2J1V2q1T0P](http://cl.ly/3A2J1V2q1T0P)

我假设 jQuery Cycle 插件在模态框中不起作用，因为它在通过单击链接加载模态内容之前将自身应用于页面？我真的不知道。

任何帮助将非常感激。我用这个答案来帮助我实现模态框：[Using simplemodal with wordpress](https://stackoverflow.com/questions/5000404/using-simplemodal-with-wordpress/5007689#5007689)。我在下面的主题中包含了一些相关代码。

这是在我的 header.php 文件中：

```
<?php
        wp_enqueue_script('jquery.cycle.all.min.js', '/wp-content/themes/Goaty%20Tapes%20Theme/js/jquery.cycle.all.min.js', array('jquery'));
        wp_enqueue_script('product-slideshow', '/wp-content/themes/Goaty%20Tapes%20Theme/js/product-slideshow.js');
?> 
```

这是包含的内容`product-slideshow.js`（启动循环插件的设置）：

```
$(document).ready(function() { $('.product-images').cycle({ 
    fx:      'none', 
    next:   '.slide',
    timeout:  0
}); }); 
```

我有这个`functions.php`让模态工作：

```
function my_print_scripts() {
        if (!is_admin()) {
            $url = get_bloginfo('template_url');
            wp_enqueue_script('jquery-simplemodal', 'http://66.147.244.226/~goatytap/wp-content/themes/Goaty%20Tapes%20Theme/js/jquery.simplemodal.1.4.1.min.js', array('jquery'), '1.4.1', true);
            wp_enqueue_script('my_js', 'http://66.147.244.226/~goatytap/wp-content/themes/Goaty%20Tapes%20Theme/js/site.js', null, '1.0', true);
        }
    }
    add_action('wp_print_scripts', 'my_print_scripts'); 
```

这是在我的`site.js`文件中：

```
jQuery(function ($) {
    $('a.popup').click(function(){
        id = this.rel;
        $.get('http://66.147.244.226/~goatytap/ajax-handler/?id='+id, function (resp) {
            var data = $('<div id="ajax-popup"></div>').append(resp);
            // remove modal options if not needed
            data.modal({
                overlayCss:{backgroundColor:'#FFF'}, 
                containerCss:{backgroundColor:'#fff'}
            });
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T09:02:22.933

您正在初始化文档准备好的周期。您需要在模态显示上进行初始化。

检查他们的[文档](http://www.ericmmartin.com/projects/simplemodal/#options)

```
onShow [Function:null]
The callback function used after the modal dialog has opened 
```

像这样的东西

```
data.modal({
            overlayCss:{backgroundColor:'#FFF'}, 
            containerCss:{backgroundColor:'#fff'},
            onShow: function (dialog) {
               $('.product-images').cycle({ 
                   fx:      'none', 
                   next:   '.slide',
                   timeout:  0
               }); 

            }
        }); 
```

# javascript - 从 Flickr 公众号获取最新的 12 张照片

> ID：15758113
> 
> 赞同：0
> 
> 时间：2013-04-02T07:04:01.843
> 
> 标签：javascript, jquery, html

我有一个包含 12 个标签的#images div，我想用来自 Flickr 帐户的最新 12 张图像填充这些图像。我需要什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:21:46.260

首先，您将需要您要从中检索图像的用户名的 flickr id。您可以使用[http://idgettr.com找到](http://idgettr.com)

然后，您可以使用它以及 JSON 格式和 JASONP 回调来构造 URL，然后将其传递给 $.getJSON() jquery 函数。

取自“JavaScript & jQuery the missing manual”一书中的一个例子看起来像这样

```
var flickrURL = "http://api.flickr.com/services/feeds/photos_public.gne?ids=userId&format=json&jsoncallback=?"
$.getJSON(flickrURL, function(data){
//do something with returned data
});//end get 
```

正如 Ummar 建议的那样，您需要自己付出更多努力...尝试搜索“将 flickr 提要添加到您的网站”以找到一些有用的教程，然后从那里开始。

# c# - 在 C# 项目中使用 FFmpeg

> ID：15758114
> 
> 赞同：4
> 
> 时间：2013-04-02T07:04:02.630
> 
> 标签：c#, ffmpeg, video-streaming, desktop, live-streaming

我正在尝试用 C# 创建一个桌面直播应用程序。该程序必须在 Windows 下运行并将图像从用户桌面流式传输到 rtmp。还必须有帧率、视频大小、质量和编解码器（h263 和 h264）选项。我认为 FFmpeg 是最好的选择（如果不是这样，请写评论）。我已经设法使用控制台使用 ffmpeg.exe 完成了我上面提到的所有事情。所以我想知道，我是否可以将 FFmpeg 库包含到 C# 项目中（作为 .lib 或 .dll）来使用它而不是 .exe，从而为我的任务保存合适的功能？对于任何示例，我将不胜感激。

PS 以下是我使用的一些命令示例：

```
ffmpeg -f dshow -i video=UScreenCapture -vcodec h264 -pix_fmt yuv420p -s 320x240 -f flv rtmp://[my adr]/desc

ffmpeg -f dshow -i video=UScreenCapture -vcodec h264 -r 15 -t 0:1:00 -q 12 -pix_fmt yuv420p -s 320x240 -f flv rtmp://[my adr]/desc 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T07:09:23.267

这是[我的示例](http://www.mediafire.com/download.php?9l9ndafvvqzydh6)，希望对您有所帮助

您可以像这样使用 .exe 文件：

```
ffmpeg.StartInfo.UseShellExecute = false;
ffmpeg.StartInfo.RedirectStandardOutput = true;
ffmpeg.StartInfo.FileName = Server.MapPath("~/Video_Clips/ffmpeg.exe");

ffmpeg.StartInfo.Arguments = String.Format(@"-i ""{0}"" -threads 8 -f webm -aspect 16:9 -vcodec libvpx -deinterlace -g 120 -level 216 -profile 0 -qmax 42 -qmin 10 -rc_buf_aggressivity 0.95 -vb 2M -acodec libvorbis -aq 90 -ac 2 ""{1}""",
                                           Server.MapPath("~/Video_Clips/" + sNameWithoutExtension + ".wmv"),
                                           Server.MapPath("~/Video_Clips/" + sNameWithoutExtension + ".webm"));
ffmpeg.Start();

ffmpeg.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-17T19:16:08.177

我知道这是一个有点旧的线程，但如果我到这里其他人也会看到这个。您不应该使用它处理信息来启动 ffmpeg。这与它有很大关系。只需使用任何包装器。我犯了这个错误，浪费了我几乎一年的生命......在[Xabe.FFmpeg](https://xabe.net/product/xabe-ffmpeg/)你可以通过运行来做到这一点

```
await Conversion.New().Start(@"-i ""{0}"" -threads 8 -f webm -aspect 16:9 -vcodec libvpx -deinterlace -g 120 -level 216 -profile 0 -qmax 42 -qmin 10 -rc_buf_aggressivity 0.95 -vb 2M -acodec libvorbis -aq 90 -ac 2 ""{1}"); 
```

但这只是一个基本用法，因为它提供了流畅的 API 来使用 FFmpeg。

# backbone.js - 主干 V1.0.0 中的更改事件触发器

> ID：15758117
> 
> 赞同：0
> 
> 时间：2013-04-02T07:04:22.683
> 
> 标签：backbone.js, requirejs

我下载了最新的backbone V1.0.0，和V0.9.2相比发现了一些奇怪的问题

```
 TodosCollection.on('add', this.addOne, this);
        TodosCollection.on('reset', this.addAllTodos, this);
        TodosCollection.on('change:completed', this.filterOne, this);
        TodosCollection.on("filter", this.filterAll, this);
        TodosCollection.on('all', this.render, this); 
```

将新内容添加到集合后，在 V0.9.2 中，只有以下三个序列事件触发：

```
add
change
sync 
```

但在 V1.0.0 中，除了以上三个

```
change:cid
"change:attributes"
"change:collection"
"change:_changing"
..... 
```

这么多事件触发

模型

```
define([
    'lodash',
    'backbone'
], function (_, Backbone) {

    var TodoModel = Backbone.Model.extend({
        defaults : {
            title : '',
            completed : false,
            order : 0
        },
        settings : {
            validation : {
                rules : {
                    title : {
                        "required" : true,
                        "min" : 5
                    }
                }
            }
        },
        toggle : function () {
            this.save({
                completed : !this.get('completed')
            });
        }
    });
    return TodoModel;
}); 
```

实际上在模型中没有这些触发事件，那为什么会发生这种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:45:05.067

[这](http://backbonejs.org/#changelog)可能有助于了解版本之间的哪些变化。
还有，[那](http://backbonejs.org/#Events-catalog)也是。您提到的只是内置事件，它们没有任何问题。对 Backbone 的文档进行一点研究/阅读（使用 Backbone 时的非常经典的行为）会告诉你。
如果我在您的问题中遗漏了一点，请随时告诉我。

# html - 不要在窗口调整大小时移动背景图像，保持静止

> ID：15758120
> 
> 赞同：2
> 
> 时间：2013-04-02T07:04:27.227
> 
> 标签：html, css

当我调整窗口大小时，背景图像也会移动并调整大小，我不希望它调整大小，我希望它保持静态。我真的很困惑如何保持我的背景静止。如果我以像素为单位设置宽度，那么它仍然是静态的，但这不是一个好的选择，因为取决于不同的屏幕尺寸

```
body {
    background-color: #000000;
    margin: 0 auto;
    width: 100%;
}

#container {
    background: url("url") no-repeat scroll center top transparent;
    width: 100%;
} 
```

代码如下：

```
<body>
<div id="container">
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:07:04.767

你试过这个吗？

```
#container {
    background: url("url");
    background-repeat:no-repeat;
    background-position:fixed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:09:15.467

试试这个代码 -

```
#container {
    background: transparent url("url") 0 0 no-repeat;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:09:12.227

如果您将图像设置为，`width:100%`则图像将随屏幕调整大小。如果您希望它仅位于顶部中心而不缩放，那么您可以使用`position:fixed`, explicit`width`然后正确定位它。

```
#container {
    background:url("url") no-repeat scroll center top transparent;
    background-position:fixed;
    position:fixed;
    width:500px; /* width of image */
    height:auto;
    top:0;
    left:50%;
    margin-left:-250px; /* -1/2 width */
} 
```

# visual-studio - 如何在 Visual Studio Express for Windows 8 中创建控制台应用程序？

> ID：15758124
> 
> 赞同：10
> 
> 时间：2013-04-02T07:04:56.617
> 
> 标签：visual-studio, console-application

在 VS Express for Windows 8 中，我无法创建控制台应用程序。我对 C++ 的理解非常基础，我只想使用单个 C++ 文件。

创建 C++ 文件后，我可以编辑程序，但不能测试。谁能向我解释如何构建文件或创建控制台应用程序项目？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-04T04:45:17.740

无论您使用什么版本的 VS Express，我都找到了一种创建控制台项目的方法。

1.  创建任何类型的项目（即一个基本的“类库”项目）。
2.  右键单击解决方案资源管理器中的项目，然后单击属性。您将看到“输出类型”的下拉菜单。选择“控制台应用程序”。
3.  在某处创建一个 Main 方法作为应用程序的入口点。不管你把它放在哪个班级。

    ```
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("We made a console app");
            Console.ReadKey();
        }
    } 
    ```

我是用“Visual Studio 2013 Express for Web”来做的，所以我不确定你在其他口味上的表现如何。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-02T08:30:59.073

Visual Studio 2012 Express 有不同的版本。

`Visual Studio Express for Windows 8`旨在针对使用新的平铺界面为 Windows 应用商店构建软件。它不允许您构建控制台应用程序。

您应该使用的版本称为`Visual Studio Express for Windows Desktop`，它涵盖了更传统的 Windows 开发，包括控制台应用程序。

安装 Express for Windows Desktop 后，启动它并创建一个 C++ 控制台应用程序项目。然后，您可以从菜单中选择构建您的解决方案，然后从`Build`菜单中运行它`Debug`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T18:09:34.240

使用 Visual Studio express for desktop，您可以使用您选择的语言创建控制台应用程序。以下 YouTube 视频提供了构建控制台应用程序的分步教程，其中包含执行相同操作的详细说明的链接。不幸的是，演示和说明是用 C# 编写的，但过程在 C++ 中是相似的，只是语法不同。

还要确保您运行的是正确版本的 Visual Studio Express。创建控制台应用程序所需的“平台”是 VS Express for Desktop。控制台应用程序模板在 Visual Studio Express for Windows 中不可用...

有关 VS Express 版本（平台）的详细信息，请参阅此博客文章 [http://www.prodataman.com/Blog/Post/97/What-c ​​an-you-get-for-FREE-with-Visual-Studio-Express- by-Edtion](http://www.prodataman.com/Blog/Post/97/What-can-you-get-for-FREE-with-Visual-Studio-Express-by-Edtion) [创建基本控制台应用程序 Visual Studio 2013 C# .Net - 视频](https://www.youtube.com/watch?v=oIhNea3_vPw)

# node.js - 如何在 Node.js 中跟踪相应请求的响应对象

> ID：15758125
> 
> 赞同：0
> 
> 时间：2013-04-02T07:04:58.293
> 
> 标签：node.js, asynchronous

我正在用 Node.js 编写一个应用程序，我需要一些建议。

我收到来自客户端的 POST 请求。收到请求后，我调用了一些函数。在执行结束时，我需要回复使用 HTTP 响应发起请求的客户端。问题是：

1.  我在异步接收请求后调用了许多函数。如何回溯到请求的相应响应对象。
2.  我是否需要继续将其传递给后续的函数调用。
3.  我什么时候决定调用 response.end()。由于它是异步函数调用，我不确定哪个将是我的最后一个函数调用。

我该怎么做？我能得到一些架构建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:19:30.643

听起来您想使用[async](https://github.com/caolan/async)库之类的东西来处理异步任务（[async.series](https://github.com/caolan/async#series)或[async.parallel](https://github.com/caolan/async#parallel)听起来都合适）。

这样，您可以“分组”所有异步任务，并在所有任务完成时调用一个回调。从该回调中，您可以处理您的响应：

```
app.post('/your/route', function(req, res) {
  async.parallel([
    // start your tasks (called 'task1', 'task2', and pass the 'async' callback
    // to them; once a task is done, it needs to call the callback)
    function(cb) { task1(cb); },
    function(cb) { task2(cb); },
    ...
  ], function(err, results) {
    if (err)
      // handle error
    else
      res.send('tasks done'); // or whatever you want to send back
  });
}); 
```

（根据您的任务签名，您可以使用[async.apply](https://github.com/caolan/async#applyfunction-arguments)而不必为每个任务创建一个新函数）

传递响应对象听起来不是一个好主意，因为——如果我理解正确的话——你的任务不必自己生成响应。

# visual-studio-2010 - 黑曜石之子vs2010效果不好

> ID：15758127
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:05:18.870
> 
> 标签：visual-studio-2010

每个人！[我从http://studiostyl.es/schemes/son-of-obsidian](http://studiostyl.es/schemes/son-of-obsidian)下载了黑曜石之子，我参考了[http://blogs.msdn.com/b/zainnab/archive/2010/08/13/change- your-visual-studio-color-scheme-vstipenv0034.aspx](http://blogs.msdn.com/b/zainnab/archive/2010/08/13/change-your-visual-studio-color-scheme-vstipenv0034.aspx)在 VS2010 上安装样式。一切都是默认的，但效果太糟糕了。

我是新来的，所以我没有足够的声誉来发布图片。以前有人遇到过这个问题吗？一旦我有足够的声誉，我将发布图像。请执行我。感谢 Malice，我已将图像上传到 url。很抱歉，由于缺乏声誉，我无法显示该网址，但您可以在下面的评论中找到它。

谁能告诉我为什么会发生不良影响以及如何将效果更改为第一个网站上显示的最佳效果？

一个小问题，为什么“everyone”前面的“hello”字母被系统删除了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:41:04.870

我必须承认我从来没有通过安装模板来修改我的配色方案，我一直只是手动更改颜色，所以下面的建议可能没有多大用处。这是模板的*外观*： ![正确的源图像](https://i.stack.imgur.com/e2qso.png)

这是你的样子： ![不稳定的图像](https://i.stack.imgur.com/Y7xu2.png)

背景、关键字、运算符和数字的颜色在我看来是一样的。如果您为 Identifiers 和 Literals 设置了自定义颜色值，那么您可以尝试通过转到 Tools->Options->Environment->Fonts and Colors 并更改 Display Items 列表中的相应项目来更改它们。

您还可以尝试通过转到工具->导入和导出设置并选择“重置所有设置”来将您的配色方案重置为默认值。重置配色方案后，您可以手动更改颜色或尝试再次安装模板。

# c# - 64 位操作系统与 32 位 MS Office 问题

> ID：15758128
> 
> 赞同：0
> 
> 时间：2013-04-02T07:05:19.710
> 
> 标签：c#, winforms

我是 C#.net 应用程序的新手。

我开发了使用 access 数据库的窗口应用程序。

当我在 32 位操作系统和 32 位 MS Office 中运行我的应用程序时，它工作正常。

它在 64 位操作系统和 64 位 MS office 中运行的方式相同。

但是当我尝试在 64 位操作系统和 32 位 MS office 中运行时，它会抛出以下错误

> *“System.InvalidOperationException：'Microsoft.ACE.OLEDB.12.0' 提供程序未在本地计算机上注册............”*

为什么会出现这种情况，这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:07:18.400

试着看看这篇文章： [http ://forums.asp.net/t/1348126.aspx](http://forums.asp.net/t/1348126.aspx)

网上有很多关于这个问题的信息，阅读一下，你会找到解决方案

还可以尝试将编译配置更改为 x86。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:20:26.277

安装它可能会解决您的问题 [http://www.microsoft.com/en-us/download/details.aspx?id=23734](http://www.microsoft.com/en-us/download/details.aspx?id=23734)

# android - Android布局高度问题

> ID：15758144
> 
> 赞同：0
> 
> 时间：2013-04-02T07:06:46.680
> 
> 标签：android, android-layout

![在此处输入图像描述](https://i.stack.imgur.com/ikCvR.png)我有一个RelativeLayout，里面有一些TextViews & ImageViews。我有一个图像设置为相对布局的背景，其高度大于子视图的总高度。因此，它在底部的子视图中留下了一些空白空间。那么，我怎样才能避免这个空白呢？我的意思是，是否可以在不考虑布局背景图像高度的情况下使布局高度完全等于子视图的总高度？

**前任：**

```
<RelativeLayout android:layout_width="wrap_content" 
        android:layout_height="wrap_content" android:background="@drawable/bg_image">
    <TextView />
    <ImageView /> 
</RelativeLayout/> 
```

这里，'bg_image' 的高度大于 TextView 和 ImageView 的总高度。因此，它在 TextView 和 ImageView 之后留下了一些空白空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:21:41.123

您可以尝试使用选项.. 我不知道您的**XML 布局**`fill_parent`中有多少控件.. 但可能会对您有所帮助..**`fill_parent`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:21:48.767

试试下面的代码

```
<RelativeLayout android:layout_width="fill_parent" 
        android:layout_height="fill_parent" android:background="@drawable/bg_image">
    <TextView />
    <ImageView /> 
</RelativeLayout/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:55:37.893

我相信问题在于`RelativeLayout`它从背景图像计算它的高度。尝试设置一个[9-patch](http://developer.android.com/tools/help/draw9patch.html)图像。然后它将根据需要拉伸以填充布局，它应该有`android:layout_height="wrap_content"`**

# javascript - 尝试使用每个查找元素表单 xml 文件

> ID：15758146
> 
> 赞同：0
> 
> 时间：2013-04-02T07:07:01.383
> 
> 标签：javascript, jquery, xml, each

我有一个 xml 文件：-

```
<child_2 entity_id="2" value="Root" parent_id="1">
    <child_4 entity_id="4" value="Activities" parent_id="2">
        <child_10066 entity_id="10066" value="Physical1" parent_id="4">
            <child_10067 entity_id="10067" value="Cricket" parent_id="10066">
                <child_10068 entity_id="10068" value="One Day" parent_id="10067"/>
            </child_10067>
        </child_10066>
        <child_10069 entity_id="10069" value="Test2" parent_id="4"/>
        <child_10070 entity_id="10070" value="Test3" parent_id="4"/>
        <child_10071 entity_id="10071" value="Test4" parent_id="4"/>
        <child_10072 entity_id="10072" value="Test5" parent_id="4"/>
        <child_5 entity_id="5" value="Physical" parent_id="4"/>
    </child_4>
</child_2> 
```

这是我的完整代码：-

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>

    function load()
    {
            $.ajax({ type: "GET", 
            async: false, 
            url: "reg.xml", 
            dataType: "xml", 
            success: function(xml){ 
            makeHTML(xml,'child_4', $('ul'));
    } 
        }); 
    }
 function makeHTML(xml,parent, $ul) {

 $(xml).find(parent).children().each(function() {

            var $node =  $(this) ;

            var $li = $('<li></li>').html( $node.attr('value') );

            $ul.append( $li ); 

            if ( $node.children().length > 0 ) {

                 $childUl = $('<ul></ul>').hide(); 

                 $ul.append( $childUl ); 

                 // toggle hide and show
                 $li.click( function(){

                        if( $(this).next().css('display') == 'none') {
                            $(this).next().show();
                        } else {
                            $(this).next().hide();
                        }  
                 });

                 makeHTML( $node.attr('tagName'), $childUl );
            }                        

    }); 
} 
    </script> 
```

单击不起作用...
请帮助我解决此问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:10:53.230

你的参数是

```
makeHTML($( xml ),'child_4', $('ul'));  //<-- here xml as jquery object 
```

并且您正在将 jquery 对象再次转换为 jquery 对象

```
 $(xml).find(parent).children().each(function() {
  //-^^---here 
```

它应该是

```
function makeHTML($xml,parent, $ul) {
  $xml.find(parent).children().each(function() {
   ..... 
```

**更新**

委托您的点击功能

```
 $(document).on('click',$li,function(){
      if( $(this).next().css('display') == 'none') {
     .... 
```

但是我建议您将其委托给文档中最接近的静态元素，然后是文档本身....

[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)阅读更多关于

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:30:59.883

查看 ObjTree - 它可以帮助您简单地将 xml 转换为 obj [https://github.com/thatcher/jquery-objtree](https://github.com/thatcher/jquery-objtree)

例子：

```
/*
 here xml is 
 <addressbook>
    <contact    first='chris'
                last='thatcher'
                cell='555-555-5555'
                fax='444-444-4444'>
        <address    line1='po box 1234'
                    city='shepherdstown'
                    state='WV'
                    zipcode='25425'/>
    </contact>
    <contact    first='ariel'
                last='flesler'
                cell='222-222-2222'>
        <address    line1='123 smart way'
                    city='new york'
                    state='NY'
                    zipcode='34526'/>
    </contact>
    <contact    first='yusuke'
                last='kawasaki'
                cell='888-888-8888'
                fax='999-999-9999'>
        <address    line1='po box 8765'
                    city='san fransisco'
                    state='CA'
                    zipcode='87654'/>
    </contact>
 </addressbook>
*/
$.get(url, function(xml){
    var addressbook = _.xml2js(xml).addressbook;
    //addressbook is now object
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:13:22.100

我认为问题在于您将对象封装在 Jquery 样式中。尝试这个

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>

    function load()
    {
            $.ajax({ type: "GET", 
            async: false, 
            url: "reg.xml", 
            dataType: "html", 
            success: function(data){ 
            var xml = data ; 
            makeHTML($(xml),'child_4', $('ul'));
    } 
        }); 
    }
 function makeHTML($xml,parent, $ul) {

 $xml.find(parent).children().each(function() {

            var $node =  $(this) ;

            var $li = $('<li></li>').html( $node.attr('value') );

            $ul.append( $li ); 

            if ( $node.children().length > 0 ) {

                 $childUl = $('<ul></ul>').hide(); 

                 $ul.append( $childUl ); 

                 // toggle hide and show
                 // use live for dynamically added DOM elements
                 $li.live("click", function(){
                        //toggle the current li visibility
                        $(this).toggle();
                 });

                 makeHTML( $node.attr('tagName'), $childUl );
            }                        

    }); 
} 
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:25:05.957

使用 jQuery.parseXML 不是更容易吗？

# java - 启动Java项目时发生类冲突：ClassMetadataReadingVisitor有接口org.springframework.asm.ClassVisitor作为超类

> ID：15758151
> 
> 赞同：20
> 
> 时间：2013-04-02T07:07:16.687
> 
> 标签：java, spring, conflict

我正在使用最新的 Spring 框架版本（3.2.2-RELEASE）开发 Java web 项目，但是现在启动项目时出现问题。详细错误是

> java.lang.IncompatibleClassChangeError:
> class org.springframework.core.type.classreading.ClassMetadataReadingVisitor 有接口 org.springframework.asm.ClassVisitor 作为超类。

我在互联网和这个网站上也研究过这个问题，并得到了一些线索。我已经从我的项目中删除了 asm 和 spring-asm 库，但它不起作用。我看到在默认 JRE 的 rt.jar 中定义了另一个 ClassVisitor 接口。这是造成这种冲突的原因吗？

但我确实认识到：

```
class ClassMetadataReadingVisitor extends ClassVisitor implements ClassMetadata {

    private String className;
        ....
} 
```

`ClassMetadataReadingVisitor`指的是`class org.springframework.asm.ClassVisitor`（在spring-core包中已经有），怎么会`com.sun.xml.internal.ws.org.objectweb.asm.ClassVisitor`和JRE的接口冲突呢？我不知道这怎么会发生？

这是完整的堆栈跟踪：

```
[ERROR 13:49:39] (ContextLoader:319) - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [D:\workspace\.projects\myproject\trunk\target\myproject\WEB-INF\classes\com\myproject\action\AuthenticationAction.class]; nested exception is java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super class
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:281)
    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242)
    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1438)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1428)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:185)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:139)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:108)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.core.type.classreading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:63)
    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:102)
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:257)
    ... 47 more
[ERROR 13:49:39] (ContextLoader:319) - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [D:\workspace\.projects\myproject\trunk\target\myproject\WEB-INF\classes\com\myproject\action\AuthenticationAction.class]; nested exception is java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super class
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:281)
    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242)
    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1438)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1428)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:185)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:139)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:108)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.core.type.classreading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:63)
    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:102)
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:257)
    ... 47 more 
```

这是依赖项列表：

```
activation-1.0.2.jar  
antlr-2.7.7.jar  
antlr-runtime-3.3.jar  
arena-0.1.jar  
asm-3.3.1.jar (removed from classpath)  
aspectjweaver.jar  
bcprov-jdk16-145.jar  
c3p0-0.9.1.2.jar  
cglib-2.1_3.jar  
com.springsource.org.apache.xml.serializer-2.7.1.jar  
commons-beanutils-1.8.3.jar  
commons-codec-1.7.jar  
commons-collections-3.2.1.jar  
commons-dbcp-1.4.jar  
commons-digester-2.1.jar  
commons-fileupload-1.2.2.jar  
commons-httpclient-3.1.jar  
commons-io-2.4.jar  
commons-lang-2.6.jar  
commons-logging-1.1.1.jar  
commons-pool-1.6.jar  
commons-vfs-patched-1.9.1.jar  
commons-vfs2-2.0.jar  
csv.jar  
dom4j-1.6.1.jar  
fop-1.0.jar  
gson-2.2.2.jar  
htmlcleaner-2.4.jar  
httpclient-4.2.3.jar  
httpcore-4.2.3.jar  
httpcore-nio-4.2.3.jar  
httpmime-4.2.3.jar  
jaxen-1.1-beta-6.jar  
jcifs-1.3.15.jar  
jdom-1.0.jar  
jersey-client-1.8.jar  
jersey-core-1.8.jar  
jersey-multipart-1.0.3.144640.jar  
jersey-server-1.8.jar  
jersey-spring-1.8.jar  
joda-time-2.2.jar  
joda-time-jsptags-1.1.1.jar  
jodconverter-2.2.2.jar  
json-lib-2.4-jdk15.jar  
json-simple-1.1.1.jar  
json-taglib-0.4.1.jar  
jsoup-1.7.2.jar  
jstl-1.2.jar  
juh-3.2.1.jar  
jurt-3.2.1.jar  
log4j-1.2.17.jar  
mail-1.4.5.jar  
persistence-api-1.0.2.jar  
poi-3.9.jar  
poi-ooxml-3.9.jar  
poi-ooxml-schemas-3.9.jar  
poi-scratchpad-3.9.jar  
postgresql-9.1-901-1.jdbc4.jar  
quartz-2.1.6.jar  
ridl-3.2.1.jar  
scribe-1.3.3.jar  
slf4j-api-1.7.5.jar  
slf4j-jdk14-1.7.5.jar  
spring-aop-3.2.2.RELEASE.jar  
spring-asm-3.1.4.RELEASE.jar (removed from classpath)  
spring-beans-3.2.2.RELEASE.jar  
spring-context-3.2.2.RELEASE.jar  
spring-context-support-3.2.2.RELEASE.jar  
spring-core-3.2.2.RELEASE.jar  
spring-expression-3.2.2.RELEASE.jar  
spring-jdbc-3.2.2.RELEASE.jar  
spring-tx-3.2.2.RELEASE.jar  
spring-web-3.2.2.RELEASE.jar  
spring-webmvc-3.2.2.RELEASE.jar  
standard-1.1.2.jar  
stax-api-1.0.1.jar  
stringtemplate-4.0.2.jar  
unoil-3.2.1.jar  
velocity-1.7.jar  
velocity-tools-2.0.jar  
wmf2svg-0.9.3.jar  
xalan-2.7.1.jar  
xercesImpl-2.11.0.jar  
xml-apis-1.4.01.jar  
xmlbeans-2.6.0.jar  
xmlgraphics-commons-1.5.jar  
xstream-1.4.4.jar 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T08:29:30.690

在生成 mvn 依赖项后，我解决了同样的问题：tree 并在我的树中查找较旧的 spring 版本。事实上，在我的依赖项中存在对 org.springframework:spring-asm:3.0.7-RELEASE 的依赖项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-08T09:09:11.083

我通过重新排序 pom 依赖项解决了同样的问题。

我从 org.springframework.security 得到问题。所以我把它带到了依赖关系的末尾。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-21T13:20:21.727

如果您使用的是 spring 版本 > 3.2.0，则不再需要特别包含 spring-asm，因为它已包含在 spring-core 中。

从构建定义中删除 spring-asm 并确保 spring-core 存在。

见[http://docs.spring.io/spring-framework/docs/3.2.16.RELEASE/spring-framework-reference/htmlsingle/#migration-3.2-inline-asm](http://docs.spring.io/spring-framework/docs/3.2.16.RELEASE/spring-framework-reference/htmlsingle/#migration-3.2-inline-asm)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-26T17:14:00.810

我有类似的问题，根本原因是其他 spring lib 包括 spring-asm 3.1.0 作为依赖项。

通过从我的 gradle 构建脚本中的所有配置中排除“spring-asm”来解决此问题。

```
configurations {
    all*.exclude group: 'org.springframework', module: 'spring-asm'
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-01T23:20:13.300

对我来说同样的问题。我运行了“mvn dependency:tree”，注意到引入了旧版本的 spring-aop，所以我将它添加到 jersey-spring 排除项中，这纠正了我的问题：

```
 <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>${jersey.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-aop</artifactId>
            </exclusion>
        </exclusions>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-30T20:26:03.843

尝试将 Spring 安全性添加到应用程序时，我遇到了同样的问题。问题已通过添加解决

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.2.2.RELEASE</version>
</dependency> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-13T03:48:47.017

我解决了在 jersey-spring 依赖项中添加以下排除项的问题。

```
<exclusion>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
</exclusion> 
```

# ruby-on-rails - rails 2.3.5 中的自定义 url 路由我怎样才能有带有空格或下划线的 url 格式？

> ID：15758156
> 
> 赞同：0
> 
> 时间：2013-04-02T07:07:45.600
> 
> 标签：ruby-on-rails, routing

我正在使用 rails 2.3.5 。

我需要有一个像这样的 url 格式

```
/:first_name{space}:last_name  # e.g.: /Michael Jackson

/:first_name{_}:last_name      # e.g.: /Michael_Jackson 
```

目前我将其作为有效的格式

```
map.shorturl "/:first_name.:last_name", :controller => 'users', :action => 'show' ex: Michael.Jackson 
```

中间的点正在工作..但其他两种格式不起作用。

有可能有这些格式吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:44:26.607

对于空格，我很确定您必须编码为 %20 或 +。见评论链接。

对于“_”，您可以将参数括在括号中，以使 rails 将每个部分视为彼此不同的[SO post](https://stackoverflow.com/questions/11962006/rails-routing-with-a-letter-as-separator)。

您确定点分隔形式运行良好吗？我不确定，但我敢打赌 rails 会尝试使用第二个参数作为格式

# video-streaming - 使用 javacv 将视频流式传输到 rtsp 服务器

> ID：15758158
> 
> 赞同：4
> 
> 时间：2013-04-02T07:08:04.207
> 
> 标签：video-streaming, rtsp, javacv

我正在使用 java CV 进行视频流传输。我从网络摄像头捕获了视频。但是当我尝试将流传输到 Darwin 服务器时它失败了。代码是，

```
package streamingapp;

import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.avcodec;
import com.googlecode.javacv.cpp.opencv_objdetect;
import static com.googlecode.javacv.cpp.avutil.*;
import static com.googlecode.javacv.cpp.opencv_core.*;

public class StreamingApp {

public static void main(String[] args) throws Exception {

    Loader.load(opencv_objdetect.class);
    CanvasFrame frame = new CanvasFrame("webcam");
    FrameGrabber grabber = new OpenCVFrameGrabber(0);

    grabber.setImageHeight(500);
    grabber.setImageWidth(500);
    grabber.start();

    IplImage grabbedImage = grabber.grab();
    int width = grabbedImage.width();
    int height = grabbedImage.height();

    CvMemStorage storage = CvMemStorage.create();

    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder("rtsp://ipaddress:portno/testVideoStream.3gp", width, height);

    recorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
    recorder.setFormat("rtsp");
    recorder.setFrameRate(grabber.getFrameRate());
    recorder.setVideoCodec(13);
    recorder.setPixelFormat(AV_PIX_FMT_YUV420P);
    recorder.setVideoBitrate(10 * 1024 * 1024);
    recorder.start();

    int i = 0;

    while (frame.isVisible() && (grabbedImage = grabber.grab()) != null) {
    System.out.println("(" + i++ + ") Invio. . .");
    frame.showImage(grabbedImage);
    recorder.record(grabbedImage);
    }

    cvClearMemStorage(storage);
    recorder.stop();
    grabber.stop();
  }

} 
```

是否可以使用 rtsp 格式的 javacv 流式传输视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-23T11:25:49.320

试试这个....我得到了结果（达尔文服务器）

```
FFmpegFrameRecorder recorder = new FFmpegFrameRecorder("rtp://ipaddress:portno/testVideoStream.sdp", width, height);

recorder.setVideoCodec(13);
recorder.setFormat("rtp");
recorder.setFrameRate(30);

//recorder.setPixelFormat(AV_PIX_FMT_YUV420P);
//recorder.setVideoBitrate(10 * 1024 * 1024);
recorder.start(); 
```

# java - 带页脚的 JTable

> ID：15758159
> 
> 赞同：1
> 
> 时间：2013-04-02T07:08:04.690
> 
> 标签：java, swing, jtable, jscrollpane, jscrollbar

我需要创建一个带有页脚行的 JTable（Java Swing）（它将包含每列数据的总和）。

具体需求如下：

*   页脚始终可见（如页眉）：父 JScrollPane 应该只在页眉和页脚之间滚动（即实际数据）
*   表格列不可调整大小（这应该会让事情变得更容易）
*   根据屏幕分辨率，表格可以水平和/或垂直滚动

阅读类似的问题，似乎最好的方法是在主表下方添加第二个表（只有 1 行），这就是我所做的：

```
 JPanel result = new JPanel(new BorderLayout());
        SessionTable sessionTbl = null; //This is a JTable
        AbstractSessionTableModel sessionTableModel = null;
        JScrollPane sessionScrollPane = null;

(...)

        //Inits scrollpane
        sessionScrollPane = new JScrollPane(sessionTbl);
        sessionScrollPane.setPreferredSize(new Dimension(100, 50));
        sessionScrollPane.setBorder(BorderFactory.createEmptyBorder());

        //Adds tables
        result.add(sessionScrollPane, BorderLayout.CENTER);

        //Adds footer table (which is also contained in a JScrollPane and has the same columns than the main table)
        result.add(createSessionFooterTable(sessionTableModel), BorderLayout.SOUTH); 
```

不幸的是，这种方法有两个问题（见图）：

*   水平滚动只移动主表（即页脚不移动，因为它在不同的 JScrollPane 中）
*   水平滚动条出现在 2 个表格之间

![截屏](https://i.stack.imgur.com/s0PmH.png)

然后我尝试了另一种方法：在将 2 个表添加到同一个 JPanel 中之前，将它们添加到一个通用的 JScrollPane 中。不幸的是，这种方法也有两个问题：

*   主表的标题不再可见
*   页脚行是滚动的一部分（即它并不总是可见）

任何帮助或提示将不胜感激！

非常感谢！托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:25:19.583

*   使用 JLabel添加[JMenuBar 或禁用 JTextField](https://stackoverflow.com/a/8127463/714968)

*   或单独的 JPanel

*   [使用这段代码（最初由@camickr 制作）](https://stackoverflow.com/a/11782008/714968)

# php - 安卓转php。解析数据时出错 org.json 字符串无法转换为 json

> ID：15758161
> 
> 赞同：0
> 
> 时间：2013-04-02T07:08:09.263
> 
> 标签：php, android, mysql, json

我搜索了许多解决方案，但仍然不起作用。我仍然收到将字符串转换为的错误`JSONObject` 这是我的代码：

```
 public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is,"iso-8859-1",8));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", json);
            //Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

这是我要解析的字符串：

```
{"products":[{"pid":"1","name":"abc","price":"222.00","created_at":"2013-04-02 12:44:26","updated_at":"0000-00-00 00:00:00"}],"success":1} 
```

我[从这里学到了这段代码](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)。

也不`jObj = new JSONObject(json.substring(3));`适合我。

我解决了问题：问题出在我的字符串上，我实际上在我的 php 中回显了一些评论，它包含在我的 json 字符串中。所以我从我的 php 中删除了我的回声，一切都很顺利。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:17:21.573

你`JSON`的无效。您缺少一个左括号`[`，表明`JSONArray`它应该是：

```
 {
        "products": [
          {
          "pid":"1",
          "name":"abc",
          "price":"222.00",
          "created_at":"2013-04-02 12:44:26",
          "updated_at":"0000-00-00 00:00:00"
          }
        ],
        "success":1
    } 
```

## 更新：

你的问题是这样的：

```
if (method == "POST") { .. } // and same for GET 
```

这总是返回**false**，因为您正在尝试将字符串与**`==`**比较引用的运算符进行比较。您必须使用`equals()`方法，因为您想比较字符串的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T05:13:21.550

```
package com.example.aam1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;

import org.json.JSONObject;

import android.util.Log;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;

    static JSONArray jarr = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public  JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();

                if(httpEntity == null)
                {      String msg = "No response from server";   
                return null;
                }            
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString().trim();
            Log.i("StringBuilder...", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {

            jObj = new JSONObject(json.substring(3));
            jarr = new JSONArray(json);
        } catch (JSONException e) {
           // Log.e("JSON Parser", "Error parsing data " + e.toString());
            Log.e("JSON Parser", "Error parsing data [" + e.getMessage()+"] "+json);

            try {
                jObj = new JSONObject(json.substring(json.indexOf("{"), json.lastIndexOf("}") + 1));
            } catch (Exception e0) {

                Log.e("JSON Parser0", "Error parsing data0 [" + e0.getMessage()+"] "+json);
                Log.e("JSON Parser0", "Error parsing data0 " + e0.toString());

                try {
                    jObj = new JSONObject(json.substring(1));
                } catch (Exception e1) {

                    Log.e("JSON Parser1", "Error parsing data1 [" + e1.getMessage()+"] "+json);
                    Log.e("JSON Parser1", "Error parsing data1 " + e1.toString());

                    try {
                        jObj = new JSONObject(json.substring(2));
                    } catch (Exception e2) {

                        Log.e("JSON Parser2", "Error parsing data2 [" + e2.getMessage()+"] "+json);
                        Log.e("JSON Parser2", "Error parsing data2 " + e2.toString());

                        try {
                            jObj = new JSONObject(json.substring(3));
                        } catch (Exception e3) {

                            Log.e("JSON Parser3", "Error parsing data3 [" + e3.getMessage()+"] "+json);
                            Log.e("JSON Parser3", "Error parsing data3 " + e3.toString());

                        }
                    }
                }
            }

        }

        // return JSON String
        return jObj;
 //       return new JSONObject(json.substring(json.indexOf("{"), json.lastIndexOf("}") + 1));

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:03:39.030

确保验证您的 json。您可以使用[http://jsonlint.com/](http://jsonlint.com/)

# javascript - 如何通过Javascript显示/隐藏一系列有序元素？

> ID：15758162
> 
> 赞同：1
> 
> 时间：2013-04-02T07:08:14.200
> 
> 标签：javascript, html, dom-events, show

在一系列按 id 编号排序的元素中

```
<div id="test-1">
<div id="test-2">
<div id="test-3">
<div id="test-4">
<div id="test-5"> 
```

想象一下，我们想通过箭头键显示/隐藏每个元素。在纯 JavaScript 中这样做的最佳方法是什么？

问题是当显示前三个元素时，我们如何检测后箭头显示隐藏元素`#3`和前箭头应该显示元素`#4`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:19:35.580

我们需要跟踪当前显示的 div 并处理`keydown`事件以检查左右键。请参阅下面的示例。

[jsFiddle](http://jsfiddle.net/Tyriar/WDQgH/)

**JavaScript**

```
var numDivs = 5;

var divs = [];
for (var i = 1; i < numDivs + 1; i++)
    divs.push(document.getElementById('test-' + i));

var current = 0;
showDiv(current);

window.onkeydown = function (e) {
    if (e.keyCode == 37) { 
        // Left
        current--;
        if (current < 0)
            current = numDivs - 1; // wrap around back to max
        showDiv(current);
    } else if (e.keyCode == 39) {
        // Right
        current++;
        if (current == numDivs)
            current = 0; // wrap around back to 0
        showDiv(current);
    }
};

// Hide all divs except for index passed in
function showDiv(div) {
    for (var i = 0; i < divs.length; i++) {
        divs[i].style.display = div == i ? 'block' : 'none';
    }
} 
```

**CSS**

```
div {
    width:100px;
    height:100px;
    background-color:#F00;
    display:none;

    line-height:100px;
    font-size:4em;
    text-align:center;
}
div:nth-child(even) {
    background-color:#0F0;
} 
```

## 更新

如果您不知道元素的数量，那么我建议您使用一个类来定义元素。

**HTML**

```
<div class="slide"></div>
<div class="slide"></div>
<div class="slide"></div>
<div class="slide"></div> 
```

**JS**

除了你如何初始化`divs`和`numDivs`.

```
var divs = document.getElementsByClassName('slide');
var numDivs = divs.length; 
```

# iphone - 如何将图像附加到 uiactivityviewcontroller 消息 ios？

> ID：15758163
> 
> 赞同：0
> 
> 时间：2013-04-02T07:08:15.787
> 
> 标签：iphone, ios, uiactivityviewcontroller

如何将图像附加到 UIActivityViewController 消息类型。如果以编程方式无法实现，请告诉我如何将图像复制并粘贴到粘贴板。这是我的代码。

```
UIImage *image = photoView.image;
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
pasteboard.persistent = YES;
pasteboard.image = photoView.image;

NSString *firstN = [NSString stringWithFormat:@"First Name    : %@",((data.firstName)?data.firstName:@"")];
NSString *lastN = [NSString stringWithFormat:@"Last Name    : %@",((data.lastName)?data.lastName:@"")];
NSString *phoneMob = [NSString stringWithFormat:@"Mobile           : %@",((data.phoneMob)?data.phoneMob:@"")];
NSString *phoneHome = [NSString stringWithFormat:@"Home            : %@",((data.phoneHome)?data.phoneHome:@"")];
NSString *emailOff = [NSString stringWithFormat:@"Email(Off.)     : %@",((data.emailOffice)?data.emailOffice:@"")];
NSString *emailPers = [NSString stringWithFormat:@"Email(Pers.)  : %@",((data.emailPersonal)?data.emailPersonal:@"")];

NSArray *actItems = [NSArray arrayWithObjects:image,pasteboard,firstN,lastN,phoneMob,phoneHome,emailOff,emailPers, nil];

UIActivityViewController *actCtrl = [[UIActivityViewController alloc]initWithActivityItems:actItems applicationActivities:nil];

actCtrl.excludedActivityTypes = @[UIActivityTypePrint,UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact,UIActivityTypeSaveToCameraRoll];

[self presentViewController:actCtrl animated:YES completion:nil ]; 
```

在上面的代码中，我无法将图像粘贴到消息正文中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T06:45:15.677

不能直接上传图片。您必须将图像转换为数据并上传数据。

# android - 拉动刷新列表以刷新android

> ID：15758166
> 
> 赞同：0
> 
> 时间：2013-04-02T07:08:37.550
> 
> 标签：android, android-layout, android-widget, android-listview, pull-to-refresh

在 pull_to_refresh 库的本机源代码中，我必须拉动布局的整个高度才能将新项目添加到列表中（见图）。

![截屏](https://i.stack.imgur.com/MeRjY.png)

请告诉我在哪里可以更改必须拉动以刷新列表的高度值？我想在到达标题布局顶部之前添加一个新元素，例如 10 像素 thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:10:06.170

查看 SourceCode 并看到参数`static final float FRICTION = 2.0f;`是硬编码的，因此，您可以分叉项目并为该变量放置一个设置器

[https://github.com/chrisbanes/Android-PullToRefresh/blob/master/library/src/com/handmark/pullorefresh/library/PullToRefreshBase.java](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/library/src/com/handmark/pulltorefresh/library/PullToRefreshBase.java)

# asp.net - asp.net 中的 System.Security.SecurityException

> ID：15758171
> 
> 赞同：0
> 
> 时间：2013-04-02T07:08:57.877
> 
> 标签：asp.net

我有一个应用程序，它在我的本地系统中运行良好，但是当我在服务器中运行相同的代码时，它给出的异常为

> System.Security.SecurityException：请求“System.Web.AspNetHostingPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。

我曾尝试取消阻止 dll 的安全性，但这并没有解决我的问题。请给我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-19T17:21:59.127

我使用以下方法解决了这个问题[`caspol.exe`](https://msdn.microsoft.com/en-us//library/cb6t8dtz(v=vs.110).aspx)：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\caspol.exe -m -ag 1 -url "file:////c:/wwwroot/intepub/MyApp/bin/*" FullTrust -exclusive on 
```

替换：`c:/wwwroot/intepub/MyApp/bin/*`用您的 DLL 的路径。

[参考](https://blogs.msdn.microsoft.com/narahari/2010/06/03/system-security-securityexception-request-for-the-permission-of-type-system-web-aspnethostingpermission-system-version2-0-0-0-cultureneutral-publickeytokenb77a5c561934e089-failed/)

# ios6 - UICollectionViewCell - 编辑模式

> ID：15758173
> 
> 赞同：2
> 
> 时间：2013-04-02T07:09:02.210
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我正在开发一个应用程序，我在其中实现了编辑模式。`UICollectionView`我正在尝试实现这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/XvY2d.jpg)

当我点击编辑按钮时，相机按钮和眼睛按钮应该被隐藏，删除和重命名按钮应该如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/piwMP.jpg)

编辑后，当我点击“完成”按钮时，删除按钮和重命名按钮应该被隐藏，相机按钮和眼睛按钮应该再次出现。我已经尝试过了，但它给了我一些奇怪的输出。除了这个“编辑”按钮正常工作外，一切正常。任何人都可以建议我解决这个问题的任何方法。建议将不胜感激。请提供一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:33:24.093

根据您对任务的解释，您已用`NSMutableArray`. `UICollectionViewCell`因此，您可以通过使用删除图像数组、重命名图像数组、相机图像数组和眼睛图像数组填充各自的所有按钮来完成您的任务。只需为每个特定条件设置标志。当您单击“编辑”按钮时，基于该标志，您可以填充您的收藏视图。试试这个。它可能会帮助你。

# python - not i==j 和 i is not j 的区别

> ID：15758179
> 
> 赞同：0
> 
> 时间：2013-04-02T07:09:23.013
> 
> 标签：python, python-2.7, comparison-operators

我正在创建这个程序，它检查列表上的 2 个项目是否加起来我拥有的一定数量的学分，但是每个项目应该只计算一次..

第一部分是给我正确的解决方案，而第二部分是两次执行某些案例..

那么'not e==j'和'e is not j'之间究竟有什么区别呢？

```
for j in range(len(prices)):
    for e in range(j,len(prices)):
        if(int(prices[j])+int(prices[e])==creds and (not e==j)):
            if(j<e):
                    something
            else:
                    something

for j in range(len(prices)):
    for e in range(j,len(prices)):
        if(int(prices[j])+int(prices[e])==creds and (e is not j)):
            if(j<e):
                    something
            else:
                    something 
```

# java - NullPointerException Java BFS

> ID：15758181
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:09:28.513
> 
> 标签：java, nullpointerexception

我正在尝试对从文本文件“Input.txt”的邻接列表创建的图形执行呼吸优先搜索我在第 162 行收到 NullPointerException，其中显示“root.visited = true;” 我不知道为什么会这样。这是我的代码。

```
 import java.io.BufferedReader;
     import java.io.FileNotFoundException;
     import java.io.FileReader;
     import java.io.IOException;
     import java.util.ArrayList;
     import java.util.Iterator;
     import java.util.LinkedList;
     import java.util.Queue;
     import java.util.Stack;

    public class BFS {
    public static void main(String[] args) {
        {
            Graph g = new Graph();
            // Making Adjacency Matrix
            ArrayList<ArrayList<Integer>> adjacency = new ArrayList<ArrayList<Integer>>();
            adjacency.add(new ArrayList<Integer>());

            String input = "input.txt";
            Graph MyGraph = new Graph();
            boolean root = true;
            Vertex n = null;
            int j = 0;
            try {
                // Reading in the Input File to the Adjacency Matrix
                BufferedReader reader = new BufferedReader(
                        new FileReader(input));
                String line = reader.readLine();

                while (line != null) {
                    // Getting numbers from each line
                    String[] numbers = line.split(",");
                    int[] values = new int[numbers.length];
                    for (int i = 0; i < numbers.length; i++)
                        values[i] += Integer.parseInt(numbers[i]);

                    // Adding values to Matrix
                    for (int i = 0; i < values.length; i++) {
                        adjacency.get(j).add(values[i]);
                        System.out.print(" " + adjacency.get(j).get(i)); // output
                                                                            // of
                                                                            // matrix
                    }
                    System.out.print("\n");

                    // Progressing through file
                    adjacency.add(new ArrayList<Integer>());
                    line = reader.readLine();
                    j++;
                }

                // read each line
                for (int currRow = 0; (line = reader.readLine()) != null; currRow++) {
                    String[] row = line.split(",");

                    // insert vertices
                    if (currRow == 0) {

                        for (int i = 0; i < row.length; i++) {
                            g.addVertex(n);
                            if (root = true) {

                            }
                        }
                    }

                    // create the edges specified in this row
                    for (int i = 0; i < row.length; i++) {

                        // edge exists between indices 'currRow' and col 'i'.
                        if (Integer.parseInt(row[i]) == 1) {
                            g.connectVertex(currRow, i);
                        }
                    }
                }
                reader.close();
            } catch (FileNotFoundException e) {
                System.out.println(e);
            } catch (IOException e) {
                System.out.println(e);
            }

            /* DFS Algorithm */

            // schtuff (use stack? use index of node for unique number?)

            // System.out.print("Visited nodes (in order): ");

        }

        // catch exceptions & errors
        Graph MyGraph = new Graph();
        MyGraph.dfs();
    }

    public static class Graph {
        public Vertex root;
        public ArrayList<Vertex> vertices = new ArrayList<Vertex>();
        public ArrayList<Vertex> dfsArrList = new ArrayList<Vertex>();
        public int[][] adjMatrix;
        int size;

        public void setRootVertex(Vertex n) {
            this.root = n;
        }

        public Vertex getRootVertex() {
            return this.root;
        }

        public void addVertex(Vertex n) {
            vertices.add(n);
        }

        public void removeVertex(int loc) {
            vertices.remove(loc);
        }

        public void connectVertex(int vertexStart, int vertexEnd) {
            if (adjMatrix == null) {
                size = vertices.size();
                adjMatrix = new int[size][size];
            }

            int startIndex = vertices.indexOf(vertexStart) + 1;
            int endIndex = vertices.indexOf(vertexEnd) + 1;
            adjMatrix[startIndex][endIndex] = 1;
            adjMatrix[endIndex][startIndex] = 1;
        }

        public void removeEdge(Vertex v1, Vertex v2) {

            int startIndex = vertices.indexOf(v1);
            int endIndex = vertices.indexOf(v2);
            adjMatrix[startIndex][endIndex] = 1;
            adjMatrix[endIndex][startIndex] = 1;
        }

        public int countVertices() {
            int ver = vertices.size();
            return ver;
        }

        private Vertex getUnvisitedChildNode(Vertex n) {

            int index = vertices.indexOf(n);
            int j = 0;
            while (j < size) {
                if (adjMatrix[index][j] == 1
                        && vertices.get(j).visited == false) {
                    return vertices.get(j);
                }
                j++;
            }
            return null;
        }

        public Iterator<Vertex> dfs() {

            Stack<Vertex> s = new Stack<Vertex>();
            s.push(this.root);
            root.visited = true;
            printVertex(root);
            while (!s.isEmpty()) {
                Vertex n = s.peek();
                Vertex child = getUnvisitedChildNode(n);
                if (child != null) {
                    child.visited = true;
                    dfsArrList.add(child);
                    s.push(child);
                } else {
                    s.pop();
                }
            }
            clearVertices();
            return dfsArrList.iterator();
        }

        private void clearVertices() {
            int i = 0;
            while (i < size) {
                Vertex n = vertices.get(i);
                n.visited = false;
                i++;
            }
        }

        private void printVertex(Vertex n) {
            System.out.print(n.vertexName + " ");
        }
    }

    public class Vertex {

        public char vertexName;
        public boolean visited = false;

        public Vertex(char l) {
            this.vertexName = l;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:15:06.013

看看这段代码（在 的大括号部分之后有点奇怪`main`）：

```
Graph MyGraph = new Graph();
MyGraph.dfs(); 
```

该`dfs`方法开始于：

```
Stack<Vertex> s = new Stack<Vertex>();
s.push(this.root);
root.visited = true; 
```

你希望`MyGraph.root`在这里做什么？它怎么可能是 null 以外的任何东西？（请注意，您在`MyGraph`中声明了两个变量`main`。出于某种原因，第一个没有用于任何用途。）

我强烈建议您对这段代码进行重大重组：

*   `main`将您的方法重构为更小
*   避免仅仅为了它而引入一个新的范围 - 你的主要方法是有效的事实：

    ```
    public static void main(String[] args) { 
        {
             // Code
        }
    } 
    ```

    很奇怪。

*   当你真的不需要嵌套类时避免它们：使用单独的文件
*   避免公共变量
*   尽可能使您的数据不可变。构造*后*真的需要更改顶点的根吗？你不能将它传递给构造函数吗？这样的事情使代码更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:17:28.727

当您调用
MyGraph.dfs();
公共静态类图{公共顶点根；

您的根未初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:15:08.123

`Vertex root`未初始化，因此在运行`root.visited`时`null.visited`会导致`NullPointerException`.

`Vertex root`预计通过`setRootVertex`方法设置值。

# iphone - 如何提取安装了您的 ios 应用程序的 Facebook 朋友

> ID：15758182
> 
> 赞同：3
> 
> 时间：2013-04-02T07:09:36.440
> 
> 标签：iphone, ios, facebook-graph-api

```
 NSArray* friends = [result objectForKey:@"data"] ;

NSLog(@"Found: %i friends", friends.count);
         for (NSDictionary<FBGraphUser>* friend in friends) {
    NSLog(@"I have a friend named %@ with id %@", friend.name, friend.id);

    // person.firstName = friend.first_name;
   // person.lastName = friend.last_name;
    Contact_Details *person;         
    person = [[Contact_Details alloc] init];
    person.emails = [[NSMutableArray alloc] init];

    person.fullName = friend.name;
    email2=friend.id;

    [person.emails addObject:email2];
    [GathrUsers addObject:person];              //gathrusers is mutualable array of objects 
```

这里的列表显示了 facebook 朋友的名字，但我需要那些没有使用 FBFriendPicker 就安装了应用程序的人的名字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:19:00.177

试试这个

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys: @"Select name, uid, pic_small from user where is_app_user = 1 and  uid in (select uid2 from friend where uid1 = me()) order by concat(first_name,last_name) asc",  @"query", nil];
[facebook requestWithMethodName:@"fql.query"andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

在您的 FBRequestDelegate 方法中

```
- (void)request:(FBRequest *)request didLoad:(id)result {

    NSLog(@"App Installed Friends: %@,%d",[result description],[result count]);

 } 
```

# php - 如何测试我的 PHP MySQL 注入示例？

> ID：15758185
> 
> 赞同：20
> 
> 时间：2013-04-02T07:09:46.330
> 
> 标签：php, mysql, code-injection

我想在登录示例中使用 PHP/Mysql 注入，我的代码如下。

我尝试使用用户名`anything' --`和空密码，但它不起作用，我无法登录。

有人可以帮我吗？

```
<?php
mysql_connect('localhost','root','root');
mysql_select_db('hp');
?>

<form action="" method="post">
<table width="50%">
    <tr>
        <td>User</td>
        <td><input type="text" name="user"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="text" name="password"></td>
    </tr>
</table>
    <input type="submit" value="OK" name="s">
</form>

<?php
if($_POST['s']){
    $user = $_POST['user'];
    $pass = $_POST['password'];     
    $re = mysql_query("select * from zend_adminlist where user_name = '$user' and password = '$pass'");

    if(mysql_num_rows($re) == 0){       
        echo '0';
    }else{
        echo '1';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T07:12:01.140

最常见的示例之一是此查询：

```
' or '1'='1 
```

如果您将此作为用户名和密码输入到一些未经处理的登录输入中，则查询将更改如下：

```
Original: SELECT * FROM USERS WHERE USER='' AND PASS='';
Modified: SELECT * FROM USERS WHERE USER='' or '1'='1' AND PASS='' or '1'='1'; 
```

这会导致它寻找的每一件事都是真实的，因为 1 总是等于 1。这种方法的问题是它不允许选择特定的用户。这样做您需要通过注释掉它来忽略 AND 语句，如其他示例中所示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T07:13:26.753

如果用户名的值为：

```
 $_POST['user'] = "1' OR 1 LIMIT 1; --"; 
```

那么mysql查询就变成了：

```
select * 
from zend_adminlist 
where user_name = '1' OR 1 LIMIT 1; --' and password = '$pass' 
```

# jruby - 是否可以 instance_eval 编译 jruby 的 .class 文件？

> ID：15758188
> 
> 赞同：0
> 
> 时间：2013-04-02T07:09:52.143
> 
> 标签：jruby

我正在尝试编译我们的 jruby 项目。
有一些带有 dsl 的文件，在某些对象上被读取为文本和 instance_eval。
它们似乎也被编译为 .class 文件。有什么方法可以从 .class 文件中调用该 dsl 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:41:18.463

如我所见，没有办法做到这一点。

# asp.net-mvc - 如何从控制器在 MVC 中显示 Jquery 消息

> ID：15758190
> 
> 赞同：0
> 
> 时间：2013-04-02T07:09:54.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我正在使用 MVC，并且正在检查后端（控制器）上的条件。我想在将从后端（控制器）触发的 Jquery 模式框中显示消息。

谁能告诉我如何做到这一点。

我尝试使用以下代码，但这给了我一些信息：无效参数。

```
string scriptstring = "$(function(){initializedialog();showDialog(\"" + "Please answer to all the Question." + "\");});";
            ScriptManager.RegisterStartupScript(this, typeof(Page), "test", scriptstring , true); 
```

你能告诉我如何在 MVC 中使用上述语句吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:27:52.677

在控制器中，为其设置 ViewBag 标志，如下所示：

```
 ViewBag.Login = "No"; 
```

然后在查看检查 Document.Ready 是否已设置并在此处提供警报消息。

```
 <script>
$(document).ready(function () {
    varifyForLogin();
});
function varifyForLogin() {
    if ('@ViewBag.Login' == 'No') {
        //Give your alert message here
        alert('Please answer to all the Question.');
    }
    document.getElementById('UserName').focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:57:22.653

您可以使用 ajax 来执行此操作，因为 ssilas777 已注释掉。

使用以下 $.ajax 代码。

```
$(function(){
    $.ajax({
        url:'@Url.Action("Index","Home")',
        type: 'GET',
        dataType:'json',
        success:function(data){
            //Here you will get the data.
            //Display this in your Modal popup
        },
        error: function(data){
        }
    });
}); 
```

这是控制器代码。

```
public ActionResult Index(){
    //do some stuff
    string Message="your message here !";
    return Json(Message,JsonRequestBehaviour.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:45:28.793

***在视图中的脚本中使用以下代码***

```
<script>
$.post("Home/Index", function(result) {
<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;//result will be your message
<br/>
});
</script>
<br/> 
```

***控制器：***

```
public ActionResult Index(){

    //do some stuff
    string msg="your message";
    return Json(msg,JsonRequestBehaviour.AllowGet);
} 
```

# c++ - 显示枚举类型

> ID：15758197
> 
> 赞同：1
> 
> 时间：2013-04-02T07:10:19.020
> 
> 标签：c++, enums

好的，这是我的显示函数，以及与之关联的枚举类型。

```
enum EventType {ARRIVAL = 'A', DEPARTURE = 'D'};    

void EventList::display()
{
cout << "Event List: ";
for (ListNode *cur = head; cur != NULL; cur = cur->next)
{
    if (cur->item.type == ARRIVAL)
        cout << ARRIVAL << cur->item.beginTime << ":" << cur->item.transactionLength << " ";
    else if (cur->item.type == DEPARTURE)
        cout << DEPARTURE << cur->item.beginTime << " ";
}
cout << endl; 
```

}

问题在于我想要的输出是显示 A 或 D。而不是与字母关联的整数值。我该怎么做？

```
Event List: 652:5 686 
```

我想读

```
Event List: A2:5 D6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:13:58.007

这很简单：将其转换为`char`：

```
cout << char(ARRIVAL) << cur->item.beginTime << ":" << cur->item.transactionLength << " "; 
```

对于`DEPARTURE`.

它以这种方式工作的原因是，当在表达式中使用时，枚举通常被提升为`int`（或者如果它们的值不适合，则提升为更大的整数类型`int`）。但是，您在枚举中具有正确的`char`值，因此您可以强制转换它。

# joomla - 带有 Rocket Theme (RT) 体素模板的 Joomla 2.5 首次加载缓慢

> ID：15758200
> 
> 赞同：0
> 
> 时间：2013-04-02T07:10:34.183
> 
> 标签：joomla, joomla2.5, voxel

我已经使用 RT 体素模板开发了 Joomla 网站，当页面第一次加载时需要 10 秒，如果我刷新，那么它会在所有浏览器中加载 2 秒。

这种慢的原因是什么？

模板体素或任何其他插件或组件

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:14:15.637

以管理员登录进入全局配置，将缓存设置为开启。默认情况下它设置为关闭，大多数组件和模块都带有内置的缓存系统来缓存特定的模块或组件，通常在模块管理器下的 dit 页面上或其组件设置中。

# mysql - MySQL 计数在同一个表中，包括零计数值

> ID：15758201
> 
> 赞同：11
> 
> 时间：2013-04-02T07:10:35.057
> 
> 标签：mysql, count

我有这个带有数据的表结构：

```
INSERT INTO `test` (`id`, `email`, `id_user_ref`, `name`) VALUES
(1, 'email@gmail.com', NULL, 'Mike'),
(2, 'email2@gmail.com', '1', 'Jhonny'),
(3, 'email3@gmail.com', '1', 'Michael'),
(4, 'email4@gmail.com', '2', 'Jorhe'),
(5, 'email5@gmail.com', '3', 'Mia'); 
```

我需要使用此查询计算所有用户的 id_user_ref ：

```
SELECT id, COUNT(name) AS refNr FROM test GROUP BY id_user_ref
HAVING id_user_ref IS NOT NULL; 
```

这可行，但问题是即使计数结果为 0，我也需要显示所有结果。

我用同一张表尝试了几个左连接，但没有任何成功。

输出应该是：

```
id  refNr
1    2
2    1
3    1
4    0
5    0 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T07:18:35.330

试试这个：

```
SELECT 
  t1.id, 
  IFNULL(COUNT(t2.name), 0) AS refNr 
FROM test AS t1
LEFT JOIN test AS t2 ON t1.id = t2.id_user_ref
GROUP BY t1.id; 
```

[**SQL Fiddle 演示**](http://www.sqlfiddle.com/#!2/ce037/3)

这会给你：

```
| ID | REFNR |
--------------
|  1 |     2 |
|  2 |     1 |
|  3 |     1 |
|  4 |     0 |
|  5 |     0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:30:39.777

你能试试这个吗？

```
SELECT a.id,
CASE  WHEN b.refNr IS NULL THEN 0
ELSE b.refNr END FROM test a LEFT JOIN
( SELECT id_user_ref, COUNT(name) AS refNr
    FROM test
    WHERE id_user_ref IS NOT NULL
    GROUP BY id_user_ref) b
ON a.id = b.id_user_ref 
```

[Sql 演示](http://www.sqlfiddle.com/#!2/ce037/14)

# android - 从应用程序调用 MediapPlayer Invoke 方法

> ID：15758203
> 
> 赞同：0
> 
> 时间：2013-04-02T07:10:42.537
> 
> 标签：android, android-mediaplayer, android-source

我正在尝试为 Aosp Mediaplayer 实现额外的功能（例如 awesomeplayer 中的 setspeed）。

我在 AOSP 代码中看到 mediaplayer.java 中有一个名为 Invoke 的 API `public void invoke(Parcel request, Parcel reply)`，它遍历到 AwesomePlayer.cpp 文件`status_t AwesomePlayer::invoke(const Parcel &request, Parcel *reply)`。

我想从应用程序中使用这个 Invoke 方法来调用 AwesomePlayer 的调用 API，然后从那里调用我的 setspeed 方法，这样我就不需要修改 android.jar 文件了。

但是，我不能从应用程序中使用这个调用 API。[我在http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)中没有看到任何关于调用 API 的字眼

有人可以帮我从应用程序中使用这个调用 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:04:50.853

该`invoke`方法是隐藏的，这就是您无法以正常方式访问它的原因。不过，您可能可以通过反思来解决。即是这样的：

```
Class mediaPlayerClass = Class.forName("android.media.MediaPlayer");
Method mediaPlayerInvoke = mediaPlayerClass.getMethod("invoke", new Class[]{Parcel.class, Parcel.class});
mediaPlayerInvoke.invoke(parcel1, parcel2); 
```

请注意，不建议使用这种做事方式，因为隐藏的方法可能会更改或删除，如果您依赖它们，可能会使您的应用程序崩溃。

# java - JAXWS-RI 模块需要每个服务接口的实现

> ID：15758205
> 
> 赞同：0
> 
> 时间：2013-04-02T07:10:44.410
> 
> 标签：java, web-services, jax-ws, enunciate

我有服务及其实现的接口......

我的接口有一个注释，将服务名称指定为已实现该接口的服务名称..但是该服务没有指定端点接口的注释？

那么这会导致 wsdl 生成失败吗？

我收到错误消息： 1> 端点接口没有实现！它不会被部署... 2> JAXWS-RI 模块需要每个服务接口的实现

我正在使用 enunciate 来生成 Web 服务。

我的代码是这样的：

```
// no annotation for endpoint interface
public class ABC implements IABC
{
}

@WebService(targetNamespace = "http://ABC", serviceName = "ABC", portName = "ABCPort", name = "ABC")
public interface IABC
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:00:09.910

您需要注释指向服务接口的实现：

```
@WebService(endpointInterface="IABC")
public class ABC implements IABC
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T15:14:21.647

我有同样的问题，我发现它是由于我的@WebMethod 签名中新抛出的检查异常引起的。

# php - 使用 POP3 阅读电子邮件后，如何从 PHP 中向 Kayako Resolve API 提交票证？

> ID：15758207
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:03.703
> 
> 标签：php, api, pop3

***更新：在发布新问题之前，请阅读此问题的答案！谢谢。***

这是为了工作。（我在 Acenet, Inc - 一个网络主机商工作 - 所以我的代码将被清除重要的登录信息和其他 API 数据）。我需要一些关于我正在编写的脚本的帮助：

```
<?php
/* lothbrok.php - abuse notification email-reader & ticket-injector script for Acenet Inc */

/*
 * 
 * "One script to rule them all,
 * One script to find them.
 * One script to bring them home,
 * And in the darkness, bind them."
 * 
 */

if ($_GET['worms'] != "food") {
    echo "Sorry, but you are not authorized to run LOTHBROK today! Goodbye!";
    exit;
} else {
require("email_functions.php");

global $timeout, $error, $buffer;

// Date in the past
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");

// always modified
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");

// HTTP/1.1
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);

// HTTP/1.0
header("Pragma: no-cache");

ob_start();

//-----------------------------------------------------------------------------
//                 Declarations
//-----------------------------------------------------------------------------

$error              = "";                       //    Error string.

$timeout            = 90;                       //    Default timeout before giving up on a network operation.

$Count              = -1;                       //    Mailbox msg count

$buffer             = 512;                      //    Socket buffer for socket fgets() calls, max per RFC 1939 the returned line a POP3 server can send is 512 bytes.

$server             = "SANITIZED";      //    Set this to hard code the server name

$RFC1939            = false;                    //    Set by noop(). See rfc1939.txt

$msg_list_array     = array();                  //    List of messages from server

$login              = 'SANITIZED';
$pass               = 'SANITIZED';

 //-----------------------------------------------------------------------------
 //                 The Code
 //-----------------------------------------------------------------------------
    echo "<h1>LOTHBROK</h1><h2>Starting Program</h2><br>";
         set_time_limit($timeout);

         $fp = connect ($server, $port = 110);

    $Count = login($login,$pass, $fp);

    if( (!$Count) or ($Count == -1) )
    {
         exit;
  }// end if
  if ($Count < 1)
  {
      die();
  } else {
      echo "Login OK: Inbox contains [$Count] messages<BR>\n";
      $msg_list_array = uidl("", $fp);
      set_time_limit($timeout);
   }// end if

    // loop thru the array to get each message
   for ($i=1; $i <= $Count; $i++){
        set_time_limit($timeout);
        $MsgOne = top($i, empty($numLines), $fp);

        if( (!$MsgOne) or (gettype($MsgOne) != "array") )
        {
            echo "oops, Message not returned by the server.<BR>\n";
            exit;
        }// end if
        /*
            call the function to read the message
            returns true if access, breakdown and insertion
            in to db are completed sucessfully
       */
       /*
        Function to read the message and extract :
            a. subject
            b. date
            c. split the body line by line
    */
       $body            = '';       // get the body of the message into 1 variable
       $subjects        = '';       // get the subject of the email
       $dates           = '';       // get the date of the email
       $body_start_key  = false;    // body starts at blank line, blank line is separator for from headers to body
       $TIRSFlag        = false;    // flag for seeing if the email is really to be processed by the app
       $base64Flag      = false;    // flag to handle base 64 encoding by email systems.

        foreach ($MsgOne as $key => $value)
    {
    if (trim($value) == "Content-Transfer-Encoding: base64"){
      $base64Flag = true;
    }//end if

    //get the subject line of the email
    preg_match("/^(Subject\:) (.*)\r?\n$/i",$subjects,$subject);

      //look for "FBL" in the subject to see if we need to attempt to process the email
      if (strstr($subject,"FBL")) {
          $TIRSFlag = true;
        }// end if
    }// end if

    //get the date of the email
    preg_match("/(Date\:) ^([A-Za-z]{3}), ([0-9]{2}) ([A-Za-z]{3}) ([0-9]{4}) ([0-9]{2})\:([0-9]{2})\:([0-9]{2}) \-?([0-9]{4})$\r?\n/i",$subjects,$dates);

    // Grab the message body
        $MsgOne = get($i, $fp);

    //the body
    if (strlen(trim($value))==0){
      if ($body_start_key == false){ $body_start_key = true; } //set the start key for the body
    }//end if

    if ($body_start_key == true){
      $body .= trim($value);
      if ($base64Flag == false){ $body .="<br />"; }
    }// end if

  }// end foreach

  // only create support ticket(s) if the subject line contains the acronym "FBL"
  if ($TIRSFlag == false){
        echo "<br>Nothing to read - finished.</b>";
        exit;
  }else{

      //decode the message if its base64 encoded
      if ($base64Flag == true) {
        $body = base64_decode($body);
      } //end if

  } 
         //convert the body crlf to <br> tags if not done when the message was built
         $body = nl2br($body);
         $body = preg_replace("/^(Please investigate these FBL reports accordingly and create a ticket for the client if need be.)$/i"," ",$body);
         $body = preg_replace("/^(Acenet) (AOL|Comcast|Yahoo!?|Hotmail) (FBL Bot)$/i"," ",$body);
 /* Cordoned off in case something doesn't work and this is then neeeded.....
            $dayn = substr($date,0,2);
            $day = substr($date,6,7);
            $monn = substr($date,9,11);
            $monn = substr($date,9,11);
            $year = substr($date,13,16);
            $fhrd = substr($date,18,19);
            $mind = substr($date,20,21);
            $secd = substr($date,22,23);
            $msed = substr($date,26,30);
 End of Quarantine! :D .... */
         while (preg_match("/(THIS IS AN AUTOMATED ABUSE ALERT - DO NOT REPLY)/i",$body) && $dates > strtotime($dates - 8)) {

        // Here goes the part to actually make things work!

 /* Yet another Quarantine section....
        preg_match("/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\z/", $subject, $ipaddy);   // Client's first name in records (check WHMCS)
        preg_match("/^(AOL|Hotmail|Yahoo|Comcast|Facebook|Google|Gmail)$/", $subject, $mailnet);    // FBL Reporting Mailsys Network (Hotmail, Comcast, Yahoo!, Google, or AOL)
 Hello, back to the news! */

        $getArray["e"] = "/Tickets/Ticket";
        $apiUrl = "SANITIZED" . $getArray["e"];
        $apiKey = "SANITIZED";
        $salt =  mt_rand(1,99);
        $secretKey = "SANITIZED";
        $signature = base64_encode(hash_hmac('sha256',$salt,$secretKey,true));

        $subject = "Abuse Email Ticket (TESTING - DO NOT RESPOND!)";
        $fullname = "Ragnar Lothbrok";
        $email = "burningjunk@mailinator.com";
        $contents = "Hello anonymous Acenet user,\n\nWe have recently received an FBL (Feedback Loop) Report from an email provider indicating users have identified one or more messages originating from your account as spam. \n\nAcenet is setup to receive a notification any time email sent from our network arrives in the mailbox of another user at this provider and that email provider's user clicks \"This is Spam\" for that email. This is known as a Feedback Loop, we receive Feedback from external mail providers categorizing email which is sent from our network.\n\nThere are many reasons other users may be categorizing mail from your account as spam. The purpose of this notification is not to imply you are a spammer, but to factually inform you that a user has clicked \"This is Spam\" for email sent from your account. \n\nAlong with the FBL, we receive details about the email itself including the Sender, Subject, and Header information. Please note that the exact recipient of the email is often removed by the mail provider as part of their privacy policy. You will often see <redacted> in place of the true recipient's email address.\n\nThe relevant information related to this FBL Report is included below. \n\nIt's important to understand that we are not implying you are a spammer. But, it is our goal to assist you in determining why this report was generated for your emails. If these reports continue to generate, the aforementioned email provider may end up blacklisting your IP and prevent you from emailing those users. By working with our Technicians to address these FBL reports, we can help you to avoid such a situation.\n\nIf the email details provided below are unfamiliar to you, please update this ticket and our Technicians will be happy to review the contents and help interpret how this email may have originated from your account.\n\n\nIf you recognize the email details provided, you should review your mailing practices and attempt to identify why recipients are clicking \"This is Spam\" for these emails.\nFBL Reporting Information follows:\n-------------------------------------------------------------------------------------\n$body\n\n\n";
        $departmentid = "9";
        $ticketstatusid = "4";
        $ticketpriorityid = "9";
        $tickettypeid = "1";
        $staffid = "27";

        $post_data = array('subject' => $subject,
            'fullname' => $fullname,
            'email' => $email,
            'contents' => $contents,
            'departmentid' => $departmentid,
            'ticketstatusid' => $ticketstatusid,
            'ticketpriorityid' => $ticketpriorityid,
            'tickettypeid' => $tickettypeid,
            'staffid' => $staffid, 
            'apikey' => $apiKey, 
            'salt' => $salt, 
            'signature' => $signature);

        $post_data = http_build_query($post_data, '', '&');

        $curl = curl_init($apiUrl); 
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($curl, CURLOPT_POST, true);
        curl_setopt($curl, CURLOPT_URL, $apiUrl);
        curl_setopt($curl, CURLOPT_HEADER, true); 
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);

        $response = curl_exec($curl);  
        curl_close($curl);

       }// end for loop

    //close the email box and delete all messages marked for deletion
    quit($fp);

    //close the application
    echo "<br>Finished</b>";
    exit;

    }
  /* Have a nice day! */

  ?> 
```

无论如何，我的问题是我只需要阅读前 7 天（换句话说：一周）的滥用电子邮件，并将它们作为我们公司 Kayako 安装中的支持票提交。我对 Kayako API 很感兴趣；对我来说，问题是我如何**只**阅读上周的滥用通知，而**不是**整个电子邮件帐户中的所有通知（最近两次我运行了这个脚本，它像 Energizer Bunny 和我一样不停地走来走去必须在脚本及其进程所在的服务器上运行**kill -9 [process ID]命令）。**

顺便说一句，对于这个脚本提到的“email-functions.php”脚本：忽略它。这是其他人写的，不是我写的，所以我不能保证它的错误。

*我只能承认我自己编码中的错误......*

如果有人知道如何解决我的问题，请留下回复或评论，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:37:37.587

**简单的回答：**

我在做什么是没有意义的。在任何这些 PHP/Kayako REST API 脚本变得方便之前，我的公司处理收到的滥用票据（实际上是根据电子邮件通知提交滥用票据）的方式需要修复。

**长答案：**

我们公司目前处理所有滥用通知，并将其提交给使用人类作为传输方法的 Kayako 票务支持系统。然而，我们的人工票证提交（以及使用 WHMCS 的客户端查找）存在缺陷，因为只有人类才能使用它；如果我们试图将机器人（自动化）系统集成（或自动化）到我们当前的方法中，正如比尔盖茨（或其他人）曾经说过的那样，它会“放大我们自己当前系统方法的低效率”。

因此，我决定剧本是一场闹剧。这不值得; 我计划在明天早上的午夜前通知我的老板，并向他提出修复当前系统的计划。与此同时，我将编写该商业计划书。

# c++ - gstreamer：如何更改网络摄像头的输入/输出分辨率？

> ID：15758208
> 
> 赞同：4
> 
> 时间：2013-04-02T07:11:04.197
> 
> 标签：c++, c, resolution, gstreamer

我想使用 gstreamer 更改我的网络摄像头的输出/输入分辨率。例如，我想将结果从 800x600 更改为 640x480 像素。我在 C 中找不到用于执行此操作的语法。任何人都可以帮助我吗？

此代码应显示来自网络摄像头的视频流：

```
#include <gst/gst.h>

int main(int argc, char *argv[]) {
    GstElement *pipeline, *source, *sink, *convert;
    GstBus *bus;
    GstMessage *msg;
    GstStateChangeReturn ret;

    /* Initialize GStreamer */
    gst_init (&argc, &argv);

    /* Create the elements */
    source = gst_element_factory_make ("v4l2src", "source");
    sink = gst_element_factory_make ("autovideosink", "sink");
    convert =gst_element_factory_make("ffmpegcolorspace","convert");

    /* Create the empty pipeline */
    pipeline = gst_pipeline_new ("test-pipeline");

    if (!pipeline || !source || !sink || !convert) {
        g_printerr ("Not all elements could be created.\n");
        return -1;
    }

    /*set der source*/
    g_object_set (source, "device", "/dev/video0", NULL);

    /* Build the pipeline */
    gst_bin_add_many (GST_BIN (pipeline), source, sink, convert, NULL);
    if (gst_element_link (convert, sink) != TRUE) {
        g_printerr ("Elements could not be linked confert sink.\n");
        gst_object_unref (pipeline);
        return -1;
    }

    if (gst_element_link (source, convert) != TRUE) {
        g_printerr ("Elements could not be linked source -convert.\n");
        gst_object_unref (pipeline);
        return -1;
    }

    /* Start playing */
    ret = gst_element_set_state (pipeline, GST_STATE_PLAYING);
    if (ret == GST_STATE_CHANGE_FAILURE) {
        g_printerr ("Unable to set the pipeline to the playing state.\n");
        gst_object_unref (pipeline);
        return -1;
    }

    /* Wait until error or EOS */
    bus = gst_element_get_bus (pipeline);
    msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

    /* Parse message */
    if (msg != NULL) {
        GError *err;
        gchar *debug_info;

        switch (GST_MESSAGE_TYPE (msg)) {
            case GST_MESSAGE_ERROR:
                gst_message_parse_error (msg, &err, &debug_info);
                g_printerr ("Error received from element %s: %s\n", GST_OBJECT_NAME (msg->src), err->message);
                g_printerr ("Debugging information: %s\n", debug_info ? debug_info : "none");
                g_clear_error (&err);
                g_free (debug_info);
                break;
            case GST_MESSAGE_EOS:
                g_print ("End-Of-Stream reached.\n");
                break;
            default:
                /* We should not reach here because we only asked for ERRORs and EOS */
                g_printerr ("Unexpected message received.\n");
                break;
        }
        gst_message_unref (msg);
    }

    /* Free resources */
    gst_object_unref (bus);
    gst_element_set_state (pipeline, GST_STATE_NULL);
    gst_object_unref (pipeline);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:24:45.587

谢谢你，你救了我的命。无论如何，我拼命地找到一个使用 C++ 代码捕获 video0 的代码。你解决你的问题了吗？？希望这个附件可以帮助

```
static gboolean initialize_pipeline(AppData *appdata,
    int *argc, char ***argv)
{
GstElement *pipeline, *camera_src, *screen_sink, *image_sink;
GstElement *screen_queue, *image_queue;
GstElement *csp_filter, *image_filter, *tee;
GstCaps *caps;
GstBus *bus;

/* Initialize Gstreamer */
gst_init(argc, argv);

/* Create pipeline and attach a callback to it's
 * message bus */
pipeline = gst_pipeline_new("test-camera");

bus = gst_pipeline_get_bus(GST_PIPELINE(pipeline));
gst_bus_add_watch(bus, (GstBusFunc)bus_callback, appdata);
gst_object_unref(GST_OBJECT(bus));

/* Save pipeline to the AppData structure */
appdata->pipeline = pipeline;

/* Create elements */
/* Camera video stream comes from a Video4Linux driver */
camera_src = gst_element_factory_make(VIDEO_SRC, "camera_src");
/* Colorspace filter is needed to make sure that sinks understands
 * the stream coming from the camera */
csp_filter = gst_element_factory_make("ffmpegcolorspace", "csp_filter");
/* Tee that copies the stream to multiple outputs */
tee = gst_element_factory_make("tee", "tee");
/* Queue creates new thread for the stream */
screen_queue = gst_element_factory_make("queue", "screen_queue");
/* Sink that shows the image on screen. Xephyr doesn't support XVideo
 * extension, so it needs to use ximagesink, but the device uses
 * xvimagesink */
screen_sink = gst_element_factory_make(VIDEO_SINK, "screen_sink");
/* Creates separate thread for the stream from which the image
 * is captured */
image_queue = gst_element_factory_make("queue", "image_queue");
/* Filter to convert stream to use format that the gdkpixbuf library
 * can use */
image_filter = gst_element_factory_make("ffmpegcolorspace", "image_filter");
/* A dummy sink for the image stream. Goes to bitheaven */
image_sink = gst_element_factory_make("fakesink", "image_sink");

/* Check that elements are correctly initialized */
if(!(pipeline && camera_src && screen_sink && csp_filter && screen_queue
    && image_queue && image_filter && image_sink))
{
    g_critical("Couldn't create pipeline elements");
    return FALSE;
}

/* Set image sink to emit handoff-signal before throwing away
 * it's buffer */
g_object_set(G_OBJECT(image_sink),
        "signal-handoffs", TRUE, NULL);

/* Add elements to the pipeline. This has to be done prior to
 * linking them */
gst_bin_add_many(GST_BIN(pipeline), camera_src, csp_filter,
        tee, screen_queue, screen_sink, image_queue,
        image_filter, image_sink, NULL);

/* Specify what kind of video is wanted from the camera */
caps = gst_caps_new_simple("video/x-raw-rgb",
        "width", G_TYPE_INT, 640,
        "height", G_TYPE_INT, 480,
        NULL);

/* Link the camera source and colorspace filter using capabilities
 * specified */
if(!gst_element_link_filtered(camera_src, csp_filter, caps))
{
    return FALSE;
}
gst_caps_unref(caps);

/* Connect Colorspace Filter -> Tee -> Screen Queue -> Screen Sink
 * This finalizes the initialization of the screen-part of the pipeline */
if(!gst_element_link_many(csp_filter, tee, screen_queue, screen_sink, NULL))
{
    return FALSE;
}

/* gdkpixbuf requires 8 bits per sample which is 24 bits per
 * pixel */
caps = gst_caps_new_simple("video/x-raw-rgb",
        "width", G_TYPE_INT, 640,
        "height", G_TYPE_INT, 480,
        "bpp", G_TYPE_INT, 24,
        "depth", G_TYPE_INT, 24,
        "framerate", GST_TYPE_FRACTION, 15, 1,
        NULL);

/* Link the image-branch of the pipeline. The pipeline is
 * ready after this */
if(!gst_element_link_many(tee, image_queue, image_filter, NULL)) return FALSE;
if(!gst_element_link_filtered(image_filter, image_sink, caps)) return FALSE;

gst_caps_unref(caps);

/* As soon as screen is exposed, window ID will be advised to the sink */
g_signal_connect(appdata->screen, "expose-event", G_CALLBACK(expose_cb),
         screen_sink);

gst_element_set_state(pipeline, GST_STATE_PLAYING);

return TRUE; 
```

}

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T08:22:55.803

是的，我找到了解决方案。它和你的几乎一样。

我使用过滤器元件和帽子。

```
GstCaps *Cap,*Cap2;
GstElement *filter;

Cap = gst_caps_from_string("video/x-raw-yuv, width=320, height=240,framerate=20/1");
Cap2 = gst_caps_from_string("video/x-raw-yuv, width=640, height=320,framerate=20/1");

filter = gst_element_factory_make("capsfilter","filter"); 
```

现在我可以制作一个管道，在我将管道设置为播放状态之前，我使用以下命令设置分辨率：

```
g_object_set(filter,"caps",Cap,NULL); 
```

谢谢你的回答，我希望它也能帮助其他人。

斯特凡

# entity-framework - 找不到类型...请确保引用了包含此类型的程序集

> ID：15758210
> 
> 赞同：2
> 
> 时间：2013-04-02T07:11:12.577
> 
> 标签：entity-framework, c#-4.0, generics, user-controls

我创建了一个具有以下签名的通用用户控件..

```
public partial class GridMastercontrol<TMainEntity, TChildEntity> : UserControl
where TMainEntity : class
where TChildEntity : class
{
// more code here
} 
```

参考创建如下 -

```
GridMastercontrol<STACS.ACASupp,STACS.ACALot> ctrl=
                 new GridMastercontrol<STACS.ACASupp,STACS.ACALot>(); 
```

该控件在运行时完美运行。但是，当我打开设计器时，设计不会显示，并且会弹出以下两个警告-

警告 1 - 找不到类型“WindowsFormsControlLibrary1.GridMastercontrol”。请确保引用了包含此类型的程序集。如果此类型是您的开发项目的一部分，请确保已使用当前平台或任何 CPU 的设置成功构建项目。

警告 2- 变量 'ctlMasterACA' 未声明或从未分配。

当我没有在其中实现泛型概念时，它在设计模式下工作得很好。但现在，它没有。:(

请帮助我..提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T11:43:43.263

您可以在以下位置找到这个问题的答案： http: [//social.msdn.microsoft.com/Forums/vstudio/en-US/c774bc84-87cb-4464-adb2-5f1391ed2389/could-not-find-type-please -make-sure-that-the-assembly-that-c​​ontains-this-type-is-referenced](http://social.msdn.microsoft.com/Forums/vstudio/en-US/c774bc84-87cb-4464-adb2-5f1391ed2389/could-not-find-type-please-make-sure-that-the-assembly-that-contains-this-type-is-referenced)

问候， Hlina

# android - Android：为什么 DialogFragment 在方向更改时返回空指针

> ID：15758213
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:23.760
> 
> 标签：android, dialog

在更改方向后，我遇到了正确的对话框片段解散的问题。我猜这是由于旧的上下文，因为在重新创建该活动之后，创建了一个新的活动和相应的上下文。我知道我可以在 onSaveInstance 中设置一些变量来保存对话框状态并在必要时重新创建对话框，或者只是将一个属性放在清单“方向”中。但是，也许有更好的方法可以做到不在清单中硬编码它而不是手动保存在 onSaveIntance 中？我还尝试在主片段和对话框片段中使用 setRetainInstance ，但这对我没有帮助。

**分段：**

```
public class MainFragment extends Fragment implements ServiceExecutorListener, OnClickListener, DialogClickListener {

private static final String TAG = MainFragment.class.getName();

private TextView serviceStatus;
Intent intent;
Boolean bound = false;
ServiceConnection sConn;
RESTService service;
ProgressDialogFragment pd;
private Button btnSend, btnCheck;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "onCreate");
    setRetainInstance(true);
    intent = new Intent(getActivity(), RESTService.class);
    getActivity().startService(intent);
    sConn = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName name, IBinder binder) {
            Log.d(TAG, "MainFragment onServiceConnected");
            service = ((RESTService.MyBinder) binder).getService();
            service.registerListener(MainFragment.this);
            if (service.tasksAreDone())
                serviceStatus.setText(service.getResult());
            bound = true;
        }

        public void onServiceDisconnected(ComponentName name) {
            Log.d(TAG, "MainFragment onServiceDisconnected");
            bound = false;
        }

    };
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.main_fragment, container, false);
    serviceStatus = (TextView) rootView.findViewById(R.id.tvServiceStatusValue);
    btnSend = (Button) rootView.findViewById(R.id.btnSend);
    btnCheck = (Button) rootView.findViewById(R.id.btnCheck);

    btnSend.setOnClickListener(this);
    btnCheck.setOnClickListener(this);
    return rootView;
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.btnSend:
            pd = new ProgressDialogFragment();
            pd.newInstance(null);
            pd.setDialogClickListener(this);
            pd.show(getActivity().getSupportFragmentManager(), "ProgressDialog");
            service.run(RESTService.REQUEST, 7);
            service.run(RESTService.REQUEST, 2);
            service.run(RESTService.REQUEST, 4);
            break;
        case R.id.btnCheck:
            if (service != null)
                serviceStatus.setText(String.valueOf(service.tasksAreDone()) + service.getTasksCount());
            break;
    }
}

@Override
public void onStart() {
    super.onStart();
    Log.d(TAG, "onStart: Bind service");
    getActivity().bindService(intent, sConn, 0);
}

@Override
public void onPause() {
    super.onPause();
    Log.d(TAG, "onPause: Unbind service");
    if (!bound)
        return;
    getActivity().unbindService(sConn);
    service.unregisterListener();
    bound = false;
}

@Override
public void onComplete(int taskID, int action, String result) {
    Log.d(TAG, "Task #" + taskID + ", action = " + action + " Completed");
    pd.dismiss();
    serviceStatus.setText(result);
}

@Override
public void onDialogClick(int action) {
    switch (action) {
        case Dialog.BUTTON_POSITIVE:
            Log.d(TAG, "POSITIVE BUTTON");
            break;
        case Dialog.BUTTON_NEGATIVE:
            Log.d(TAG, "NEGATIVE BUTTON");
            service.removeTasks();
            break;
        case Dialog.BUTTON_NEUTRAL:
            Log.d(TAG, "NEUTRAL BUTTON");
            break;
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.d(TAG, "onDestroy");
}
} 
```

**对话：**

```
public class ProgressDialogFragment extends DialogFragment implements OnClickListener {

final String TAG = ProgressDialogFragment.class.getName();
private DialogClickListener listener;

public ProgressDialogFragment newInstance(Bundle args) {
    ProgressDialogFragment pdf = new ProgressDialogFragment();
    pdf.setArguments(args);
    return pdf;
}

public void setDialogClickListener(DialogClickListener listener) {
    this.listener = listener;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
    Log.d(TAG, "onCreate");
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder adb = new AlertDialog.Builder(getActivity())
            .setTitle("Title!")
            .setPositiveButton(R.string.yes, this)
            .setNegativeButton(R.string.no, this)
            .setNeutralButton(R.string.maybe, this)
            .setCancelable(false)
            .setMessage(R.string.message_text)
            .setOnKeyListener(new OnKeyListener() {
                @Override
                public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                    return true;
                }
            });
    return adb.create();
}

public void onClick(DialogInterface dialog, int which) {
    if (listener != null)
        listener.onDialogClick(which);
}

public void onDismiss(DialogInterface dialog) {
    Log.d(TAG, "Dialog: onDismiss, dialog = " + getDialog() + ", retainInstance = " + getRetainInstance());
    // Fix to avoid simple dialog dismiss in orientation change
    if ((getDialog() != null) && getRetainInstance())  
        getDialog().setDismissMessage(null);

}

public void onCancel(DialogInterface dialog) {
    super.onCancel(dialog);
    Log.d(TAG, "Dialog: onCancel");
} 
```

日志猫：

```
04-29 06:17:17.860: E/AndroidRuntime(4202): FATAL EXCEPTION: main
04-29 06:17:17.860: E/AndroidRuntime(4202): java.lang.NullPointerException
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.support.v4.app.DialogFragment.dismissInternal(DialogFragment.java:184)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.support.v4.app.DialogFragment.dismiss(DialogFragment.java:155)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at com.example.restservice.fragments.MainFragment.onComplete(MainFragment.java:108)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at com.example.restservice.service.RESTService$1.run(RESTService.java:79)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.os.Handler.handleCallback(Handler.java:605)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.os.Looper.loop(Looper.java:137)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at android.app.ActivityThread.main(ActivityThread.java:4514)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at java.lang.reflect.Method.invokeNative(Native Method)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at java.lang.reflect.Method.invoke(Method.java:511)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-29 06:17:17.860: E/AndroidRuntime(4202):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：**

如果我将 setRetainInstance(true) 放在调用 dialogFragment 的主片段和 onCreate 方法中的 DialogFragment 中，那么我看到 getRetainInstance 返回 true 并且 getDialog 在方向更改过程中具有对象（否则为 NPE）。在这种情况下，我也没有 NPE，但是会出现以下奇怪的行为：创建并呈现对话框，重新创建对话框（方向更改）并关闭（为什么？），重新创建对话框（再次更改方向）并呈现（wtf？上次它被解除了）等等，即对话在一侧被解除，但请记住它应该在另一侧呈现。那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:33:14.837

删除`setRetainInstance(true);`from`onCreateDialog(Bundle savedInstanceState)`并将其保存在 onCreate(Bundle savedInstance) 中，如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:45:24.123

找到修复。也许，它已经写在谷歌社区的修复之一中，这有助于避免简单地忽略方向变化，我想念它。

我还不知道。就我而言，我设置`setRetainInstance(true)`了`onCreate`.`DialogFragment`

通过简单修复实现`onDismiss`的方法，我的最后一个小问题是我没有`super.onDestroyView()`在 onDismiss 方法中删除。现在它就像一个魅力。

# php - PHP socket_read 最多读取 512 个字节

> ID：15758214
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:25.970
> 
> 标签：php, sockets

```
$input = socket_read($clients[$i]['socket'],2048);
$lent = strlen($input);
echo "\n\n$lent\n";
echo "\nDATA: ".$input."\n"; 
```

我要读取的实际数据长度> 512。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:57:14.737

请看一下这个线程：

[无法从套接字读取（挂起）](https://stackoverflow.com/questions/4137661/cant-read-from-socket-hangs)

```
while($resp = socket_read($clients[$i]['socket'], 1000)) {
   $str .= $resp;
   if (strpos($str, "\n") !== false) break;
}
socket_close($sock);
die("Server said: $str"); 
```

这组代码循环，直到响应为空。

# python - 使用带有 django 的 Python - 我可以记录用户输入（键盘和鼠标）并回放吗？

> ID：15758216
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:28.183
> 
> 标签：python, django, frameworks, programming-languages

我对开发并不陌生（在 .net、php 甚至 node.js 上开展了许多业务），但我对从头开始创建自己的应用程序很陌生。我一直在研究应该使用哪种语言，并且我倾向于使用 django 和 postgreSQL 或 mongoDB 作为数据库的 Python。我很乐意修改现有代码，但我将开始尝试从头开始构建一些东西。

我想构建一个非常简单的在线代码编辑器，用户可以在其中输入一些代码在他们的浏览器中（颜色编码和格式化就像传统的 IDE）。但是，我希望发生两件事：

1.) 当他们输入代码时，其他人（查看者）可以看到输入的代码，因为它是实时输入的。

2.) 当用户在网络代码编辑器中输入代码时，他们的击键和点击被记录下来，以便以后可以回放。

这个想法是有人可以编写一段代码，然后有人可以稍后回放该代码段（几乎就像一个视频），看看编码员是如何得出这个解决方案的。这有点像屏幕录制，除了录制屏幕（如果没有在最终用户系统上安装应用程序，这是不可能的），我将记录他们的输入，以便可以重播这些输入。

这可能使用 python/django 吗？django（或其他）中是否已经有一些东西可以为我提供这种录制/播放功能？

如果说 100 个用户同时执行此操作，那么 postgreSQL 是否能够跟上所有这些读/写操作？这可能是一项更适合 mongoDB 之类的任务，但我不希望将 noSQL 数据库用作整个站点的数据库。

如果您觉得对此有更好的框架（例如 Rails），我也会有兴趣了解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:32:10.393

使用 Django（或任何与此相关的 Web 框架）是可能的。虽然对于第一个项目来说似乎有点困难。

困难的部分将是性能/可扩展性。由于您需要实时通信（一位观众实时看到另一位观众输入的内容），您可能需要将[websocket](http://en.wikipedia.org/wiki/WebSocket)合并到您的堆栈中。否则你将无法处理负载。

“重播”部分更容易。这将发生在前端（Javascript），您将在其中以小批量存储击键，您将定期发送到服务器以保持持久性。

您不必担心 PostgreSQL 跟不上负载。请参阅此演示文稿 [https://speakerdeck.com/zeeg/building-to-scale](https://speakerdeck.com/zeeg/building-to-scale)，它解释了您的数据库很少成为瓶颈。MongoDB 也比宣传的要慢得多。大多数时候它不会在 Postgres 面前举起蜡烛。

另一个有趣的文件是这个[基准](https://wiki.postgresql.org/images/b/b4/Pg-as-nosql-pgday-fosdem-2013.pdf)（pdf）

至于现有的 django 项目可以满足您的需求，我认为没有。

# yii - 加载 yii 小部件表单返回错误

> ID：15758221
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:54.187
> 
> 标签：yii, components

我有一个选项卡在视图中，我想在一个选项卡中通过小部件调用显示表单。

`<div class="tabcontent" id="country2"> <div class="No-Time">No Reviews ! <?php $this->widget('Review');?> </div> </div>`

为此创建了`Review`模型。然后我创建了组件

```
<?php 
class Review extends CWidget
{
public $title='Review';
public $visible=true; 
public function run()
{
    if($this->visible)
    {
        $this->renderContent();
    }
}

protected function renderContent()
{

    $merchant_id = Yii::app()->user->id;
    $model  =  new Review;

    $this->performAjaxValidation($model);
$valid  = $model->validate();

    if(isset($_POST['ajax']) && $_POST['ajax']==='review-form')
    {
            echo CActiveForm::validate($model);
            Yii::app()->end();
    }
    $this->render('Review',array('model'=>$model));
}

protected function performAjaxValidation($model)
{
        if(isset($_POST['ajax']) && $_POST['ajax']==='review-form')
        {
                echo CActiveForm::validate($model);
                Yii::app()->end();
        }
}
}
?> 
```

这是我的组件视图文件：

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'review-form',
'enableAjaxValidation'=>false,
)); ?>

<div class="row">
    <?php echo $form->labelEx($model,'name'); ?>
    <?php echo $form->textField($model,'name'); ?>
    <?php echo $form->error($model,'name'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'email'); ?>
    <?php echo $form->textField($model,'email'); ?>
    <?php echo $form->error($model,'email'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'review'); ?>
    <?php echo $form->textField($model,'review'); ?>
    <?php echo $form->error($model,'review'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'mobile'); ?>
    <?php echo $form->textField($model,'mobile'); ?>
    <?php echo $form->error($model,'mobile'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'status'); ?>
    <?php echo $form->textField($model,'status'); ?>
    <?php echo $form->error($model,'status'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'website'); ?>
    <?php echo $form->textField($model,'website'); ?>
    <?php echo $form->error($model,'website'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'avtar'); ?>
    <?php echo $form->textField($model,'avtar'); ?>
    <?php echo $form->error($model,'avtar'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'date'); ?>
    <?php echo $form->textField($model,'date'); ?>
    <?php echo $form->error($model,'date'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton('Submit'); ?>
</div>
<input type="hidden" name="merchant" id="merchant-id" />
<?php $this->endWidget(); ?>

</div> 
```

返回此错误。不知道为什么会这样。

```
 Review and its behaviors do not have a method or closure named "isAttributeRequired". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:22:03.150

您需要将组件重命名为`Review`. 错误是因为该行`$model= new Review`创建了 Review 组件的实例，而不是 Review 模型。

# ios - 如何在 ios 4.3 模拟器中使用 json 从列表视图中的 url 获取数据

> ID：15758223
> 
> 赞同：0
> 
> 时间：2013-04-02T07:11:55.153
> 
> 标签：ios, objective-c, ios4

我只是使用 xcode 3.2 的 ios 初学者，我想从 url 获取数据，我正在获取这样的 JSON 格式数据，如何显示 Windows Live ID，Google with Image，loginUrl，logoutUr ..

**JSON**

```
0
Name : "Windows Live™ ID"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes

1

Name : "Google"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes

2

Name : "Yahoo!"

LoginUrl : ""

LogoutUrl : ""

ImageUrl : ""

EmailAddressSuffixes 
```

我必须在 .h 文件和 .m 文件中写什么，有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:20:24.293

一次尝试这样，在tableview`cellForRowAtIndex`方法中使用这个

如果您想获取字典，请使用，

```
NSMutableDictionary *dict=[jsonArray objectAtIndex:indexPath.row]; 
```

如果您想获取字符串值，请使用此值，

```
NSString * LoginUrl=[[jsonArray objectAtIndex:indexPath.row]valueForKey:@"LoginUrl"]; 
```

如果您想获取所有数据，请使用一个 for 循环并保存该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:20:31.863

您可以使用 NSURLConnection（或）Json 库来解析从服务器接收到的数据。

下面是使用 NSURL 连接解析 JSON 的示例代码：

在 viewDidLoad 中：

```
NSString *strConfirmChallenge = [URL string];

     strConfirmChallenge = [strConfirmChallenge stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"strConfirmChallenge=%@",strConfirmChallenge);

    NSURL *myURL = [NSURL URLWithString:strConfirmChallenge];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                       timeoutInterval:60];

    NSURLConnection *theConnection =[[NSURLConnection alloc] initWithRequest:request delegate:self];

    //Delegate methods

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
        responseData = [[NSMutableData alloc] init];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [responseData appendData:data];
    }

    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        //NSLog(@"Failed to get data");
        self.view.userInteractionEnabled = TRUE;
        UIAlertView *myalert = [[UIAlertView alloc]initWithTitle:@"Info" message:@"Service error" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [myalert show];
    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        dispatch_async(kBgQue, ^{
            [self performSelectorOnMainThread:@selector(parseData:)
                                   withObject:responseData
                                waitUntilDone:YES];
        });
        self.view.userInteractionEnabled = TRUE;
    }

    //parsing data

    -(void)parseData:(NSData *)data{
         NSError *error;
            NSDictionary *data = [NSJSONSerialization JSONObjectWithData:data options:(0) error:&error];

            if(error){
                //NSLog(@"JSon Error %@",[error localizedDescription]);
                UIAlertView *myalert = [[UIAlertView alloc]initWithTitle:@"Info" message:@"Service error" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [myalert show];

            }else{
                NSDictionary *datDetails = (NSDictionary *) [data objectForKey:@"your key"];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:21:51.777

您可以使用[SBJson](https://github.com/stig/json-framework/)解析 json。在您的项目中添加 SBJson 类，然后使用此代码解析 json

```
-(void)WBCalled
{

    ExampleAppDataObject* theDataObject = [self theAppDataObject];

    //this code is used to send and retrive data from webservices
    NSString *post =@"";

    //NSLog(@"post is:%@",post);

    NSURL *url=[NSURL URLWithString:@""];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    NSError *error = [[NSError alloc] init];
    NSHTTPURLResponse *response = nil;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    if ([response statusCode] >=200 && [response statusCode] <300)
    {
        NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
        // NSLog(@"Response ==> %@", responseData);

        SBJsonParser *jsonParser = [SBJsonParser new];   //here you are using sbjson library to parse json data
        NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];
        NSLog(@"full jsonData : %@",jsonData);   //this dictionary contain all the data of your json response you can conver this data in NSString or NSArray according to your need

        NSString *message = (NSString *) [jsonData objectForKey:@"Message"];

        if (message.length !=0) {
            [self alertStatus:message :@"Status"];
        }

    } else {
        if (error) NSLog(@"Error: %@", error);
        [self alertStatus:@"Connection Failed" :@"Data Sending Failed!"];
    }

}
-(void) alertStatus:(NSString *)msg :(NSString *)title
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title
                                                        message:msg
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil, nil];

    [alertView show];
} 
```

# javascript - 单击特定按钮时如何在 iframe 中打开特定 JSP 页面

> ID：15758229
> 
> 赞同：1
> 
> 时间：2013-04-02T07:12:01.567
> 
> 标签：javascript, function, jsp, iframe, webpage

我正在使用 javascript 函数来创建 aniframe，但它不起作用。

我在主页上有 4 个按钮（使用 JSP）。我想在下面的同一个窗口中打开 4 个不同的页面（我们可以认为它是页眉和页脚）。 `onClick`在 4 个按钮中的任何一个（位于页眉部分）中，一个相应的页面应在同一页面内打开（在页脚部分）。在上面（可以说是标题部分）我​​有一些文本框，并希望将它们保留在每一页上。我正在使用一个`iframe`. 一个有静态`src`ie`src="index.jsp"`和“页脚”，我想根据 click 打开不同的页面。

我使用标头 iframe 作为 -

```
<iframe id='header_iframe' style="width: 100%; height:250px;" src="index.jsp" name="iframe_main" frameborder="0"></iframe> 
```

我正在使用 javascript 函数创建 iframe，但它不起作用

作为-

```
function setIframe()
{
   var demo_Iframe = document.createElement("iframe");
   demo_Iframe.src = "http://localhost:8084/project/demo.jsp";
   demo_Iframe.id="demo_Iframe";
   demo_Iframe.width="100%";
   demo_Iframe.height="400px";
   document.appendChild(demo_Iframe);
} 
```

我正在调用按钮`setIframe()`事件`onclick`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:56:23.083

尝试

```
document.getElementsByTagName('body')[0].appendChild(demo_Iframe); 
```

演示：[小提琴](http://plnkr.co/edit/npkMtG?p=preview)

# authentication - 使用 auth 扩展的模块范围的访问控制

> ID：15758230
> 
> 赞同：2
> 
> 时间：2013-04-02T07:12:01.597
> 
> 标签：authentication, yii, access-control

我正在使用[auth](http://www.yiiframework.com/extension/auth "身份验证扩展")扩展来进行用户访问控制。我有几个模块，每个模块都有几个控制器。我想在模块化的基础上控制访问。我尝试添加操作，`moduleId.*`但在尝试访问模块中的任何控制器时出现**401 Access denied错误。**我目前的解决方案是为每个控制器添加一个操作，`moduleId.controllerId.*`并将这些操作组合成每个模块的任务。有没有更好的方法来添加模块范围的访问控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T01:53:01.280

模块范围控制的实现不存在。我将`/auth/filters/AuthFilter.php`文件更改如下：

```
protected function preFilter($filterChain)
{
    $itemName = '';
    $controller = $filterChain->controller;

    if (($module = $controller->getModule()) !== null){
        $itemName=str_replace('/','.',$module->getId()).'.';//for nested modules
        if (Yii::app()->user->checkAccess($itemName . '*')) return true;//Added this
    }

    $itemName .= $controller->getId();
    ... 
```

**编辑**

[Github 存储库](https://github.com/Crisu83/yii-auth)中的最新代码具有此修复程序。

# windows-phone-8 - 是否可以直接链接到“评分和评论”？

> ID：15758238
> 
> 赞同：4
> 
> 时间：2013-04-02T07:12:24.020
> 
> 标签：windows-phone-8

我可以设置我的应用程序的“评分和评论”页面的链接吗？
实际上，我想在我的应用程序的**“关于”**页面中提供此链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:15:40.153

使用[`MarketplaceReviewTask`Launcher](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394030%28v=vs.105%29.aspx)而不是链接：

```
using Microsoft.Phone.Tasks;

(...)

MarketplaceReviewTask marketplaceReviewTask = new MarketplaceReviewTask();
marketplaceReviewTask.Show(); 
```

它将在您的应用程序页面上打开`Marketplace`应用程序，用户将能够在其中查看您的应用程序。

# ruby - 如何在单独的进程中运行代码？

> ID：15758241
> 
> 赞同：4
> 
> 时间：2013-04-02T07:12:33.097
> 
> 标签：ruby, process

我正在寻找一种解决方案来生成在单独进程中的块或 Proc 中定义的代码。就像是

```
p = Proc.new do
  File.open('newproc.log', 'w') {
    |fw|
    10.times do
      fw.puts Time.now
      sleep 1
    end
  }
end

# spawn p in a separate process here

# original code continues 
```

没有进程分叉，没有线程，没有存储在外部文件中。只需在独立进程中执行块。

任何想法 ？

**更新：** 我要添加的块不依赖于调用过程中定义的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:25:08.303

在基于 Unix 的系统上，[`fork(3)`](http://linux.die.net/man/3/fork)这是创建新进程的唯一方法。你必须有分叉的能力来完成你所描述的。

如果您因为父进程“胖”并且占用大量内存而试图避免分叉，则可以通过使用实现[Copy-on-Write的 Ruby 版本（例如](http://en.wikipedia.org/wiki/Copy-on-write)[Ruby 2.0](http://patshaughnessy.net/2012/3/23/why-you-should-be-excited-about-garbage-collection-in-ruby-2-0) ）来避免重复内存. 而且线程使用的内存比单独的进程少得多，因此线程当然值得考虑。

**编辑**

使用的解决方案`fork`可能如下所示：

```
p = Proc.new do
  File.open('newproc.log', 'w') {
    |fw|
    10.times do
      fw.puts Time.now
      sleep 1
    end
  }
end

# spawn p in a separate process here
fork { p.call }

# original code continues 
```

# codeigniter - Codeigniter url路径？

> ID：15758245
> 
> 赞同：1
> 
> 时间：2013-04-02T07:12:57.960
> 
> 标签：codeigniter

我有登录表单和路径是这个

```
http://localhost/xxx/CI/login/ 
```

用户输入值后，我会进行验证

```
http://localhost/xxx/CI/login/validation 
```

验证后我想将用户重定向到 main_page 控制器，如果我加载主页的视图，它会加载视图但路径在浏览器中保持不变

```
http://localhost/xxx/CI/login/validation 
```

我希望在验证成功时它应该向我显示这条路径

```
http://localhost/xxx/CI/main_page 
```

我尝试加载 main_page 的控制器，但它显示空白页，在 main_page 控制器索引函数中我正在加载 main page 的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:22:24.750

要在登录 abd 更改 URL 后重定向用户，请使用重定向功能。
就像是;

```
public function login() {
    if($this->form_validation->run('login') == TRUE ) {
        // $redirect is what ever page you want to go to
        redirect($redirect);
    } else {
        // show form
        $this->load->view('login_form');
    }
} 
```

# php - 当用户点击链接时使用 JavaScript 添加 cookie

> ID：15758249
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:13:12.773
> 
> 标签：php, javascript, cookies

我的网站有两个版本（手机版，电脑版）

我想让用户从手机浏览网站来选择他想要的版本。

我在用户单击时添加了页脚链接，浏览器使用 add cookie browser = pc_version 刷新页面

看看这段代码，但对我不起作用，我不知道是什么问题

```
<script>
function change_browser(){
   days=30; // number of days to keep the cookie
   myDate = new Date();
   myDate.setTime(myDate.getTime()+(days*24*60*60*1000));
   <?php if($_COOKIE['browser'] == 'pc_version'): $browser = 'mobile';else:$browser='pc_version';endif;?>
   document.cookie = 'browser=<?php echo $browser;?>' + ';domain=saudi-hotels.info/;path=/;expires='+ myDate.toGMTString() ;
   window.location = "http://saudi-hotels.info/ar";

}
</script>
<div class="change_mobile">
    <div onclick="change_browser()" style="width:100%;border-radius:none;"  class="go"> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:22:57.313

```
<script>

function toggleBrowser(){
   var days=30; // number of days to keep the cookie
   var myDate = new Date();
   myDate.setDate(myDate.getDate()+days);
   var ver = getCookie("browser");
   ver = ver=="mobile"?"pc_version":"mobile";
   setCookie("browser",ver,myDate,"/")
   window.location.reload(1); // assuming same URL
}
/* Cookie functions originally by Bill Dortsch */

function setCookie (name,value,expires,path,theDomain,secure) { 
   var theCookie = name + "=" + escape (value) + 
   ((expires)    ? "; expires=" + expires.toGMTString() : "") + 
   ((path)       ? "; path="    + path   : "") + 
   ((theDomain)  ? "; domain="  + theDomain : "") + 
   ((secure)     ? "; secure"            : ""); 
   document.cookie = theCookie;
} 

function getCookie(Name) { 
   var search = Name + "=" 
   if (document.cookie.length > 0) { // if there are any cookies 
      offset = document.cookie.indexOf(search) 
      if (offset != -1) { // if cookie exists 
         offset += search.length 
         // set index of beginning of value 
         end = document.cookie.indexOf(";", offset) 
         // set index of end of cookie value 
         if (end == -1) end = document.cookie.length 
         return unescape(document.cookie.substring(offset, end)) 
      } 
   } 
} 
function delCookie(name,path,domain) {
   if (getCookie(name)) document.cookie = name + "=" +
      ((path)   ? ";path="   + path   : "") +
      ((domain) ? ";domain=" + domain : "") +
      ";expires=Thu, 01-Jan-70 00:00:01 GMT";
//   alert(name+' marked for deletion');
}

</script>
<div class="change_mobile">
    <div onclick="toggleBrowser()" style="width:100%;border-radius:none;"  class="go"> </div>
</div> 
```

# php - PHP 和 MySQL - 有没有办法让嵌入式/嵌套对象作为响应？

> ID：15758254
> 
> 赞同：0
> 
> 时间：2013-04-02T07:13:43.850
> 
> 标签：php, mysql, oop, object, nested

我认为 SQL 可能没有这么先进 - 或者它可能是 PHP + MySQL 的限制，但请考虑这种情况：

我有一个用户表和一个配置文件表。

我想通过他们的 ID 获取用户。用户表具有对配置文件表的外键引用。我能否以某种方式加入表，以便响应会产生这样的对象：（注意：使用足够的 PHP 这是可行的，但我想将其保留为单个 MySQL 查询）

```
user_id: 1
username: foo
profile => first_name: Foo
           last_name: Bar
           picture: foo.jpg
email: foo@example.com 
```

这可以在 C# 中使用 LINQ，我只是想知道是否有 PHP 的等价物。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T07:18:03.963

我认为您在这里需要做的是一个简单的 JOIN。

```
SELECT users.*, profiles.*
FROM `users`
LEFT JOIN profiles
ON users.id = profiles.user_id
WHERE users.id = '$user_id_var'
LIMIT 1; 
```

这会将配置文件数据附加到您的用户，但不需要配置文件数据返回肯定的结果。

您需要小心考虑冲突键，但此查询应该让您走上正确的道路。

# javascript - 我正在为数组分配一个元素，但它显示未定义

> ID：15758259
> 
> 赞同：-4
> 
> 时间：2013-04-02T07:13:55.617
> 
> 标签：javascript, jquery

```
 var prev = [];
    var count = 0;
    var data = '';
    $('#add_ref').click(function(){
       var man_val = $.trim($('#manual_ref').val());
         if(($.inArray(man_val,prev))==-1){

          if(man_val != ''){
            count += 1;
            prev[1] = man_val;
            alert(prev[i);// Problem is here
            data = '<li id="45" class="as-selection-item"><a class="as-close">x</a> '+ man_val +'   <input id="notal_45" class="cls-notal" type="checkbox" value="45" name="notal_chk[]"></li>';
            $('#ul-rtl-ref-1').append(data);
        }
       }
  }
 ); 
```

为什么它不为数组赋值？如果我写`prev[1] = "myvalue"`它也不起作用。警报总是显示未定义 **编辑**prev.push(man_val) 显示推送不是函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:16:21.113

**编辑**：您已经更改了代码，因此`i`不再存在，因此下面的部分答案不再适用。但是你所说的关于你提供的代码的内容在两种不同的方面根本不可信：

1.  您已经说过，`prev[1] = man_val;`紧随其后的是`alert(prev[1]);`shows `undefined`，但是对于您显示的代码而言，这根本不是真的。

2.  您说过这`prev.push`会导致错误，说`push`is not a function，但在您显示的代码中，`prev`绝对是一个数组，并且数组肯定有`push`.

我的猜测是你有一些你没有展示的东西，要么是阴影，要么是`prev`给它分配一个非数组。但是由于您没有显示该代码，因此您对代码所说的内容根本与代码不符。

希望以下内容对您的实际情况有所帮助。

* * *

> `count += 1;`
> 
> `prev[1] = man_val;`
> 
> `alert(prev[i]);// Problem is here`

您正在使用`i`那里，而在上面的行中您正在使用`1`. 您没有显示任何声明或初始化的代码`i`，因此我们不知道它可能具有什么值，但显然它没有值`1`。

如果您真的想推送到数组，通常的做法是使用`push`或分配给`prev[prev.length]`. 所以你的 rcode 可能是：

```
prev.push(man_val);
alert(prev[prev.length - 1]); 
```

或者

```
prev[prev.length] = man_val;  // This will increment `prev.length`
alert(prev[prev.length - 1]); // ...which is why we're using -1 here 
```

但是，如果您确实有一个`i`（并且您必须在某个地方，或者尝试从中读取一个值会导致 a `ReferenceError`）并且您想使用它，那么您希望与使用它的方式保持一致。例如：

```
prev[i++] = man_val;
alert(prev[i - 1]); 
```

我假设`i`从`0`那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:16:43.130

我在您的代码中看不到变量`i`。它应该是-

```
prev[count] = man_val;
alert(prev[count]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:58:48.430

我找到了我的答案，我将变量 prev 更改为 prv 和`alert(prev[i]`）`alert(prv[count])` 我认为全局变量中的 javascript 问题 prev 。我的最终代码是

```
var prv = []
var count = 0;
var data = '';
$('#add_ref').click(function(){

var man_val = $.trim($('#manual_ref').val());
if(($.inArray(man_val,prv))==-1){

    if(man_val != ''){
        count += 1;
        prv[count] = man_val;
        alert(prv[count]);
        data = '<li id="45" class="as-selection-item"><a class="as-close">x</a> '+ man_val +'   <input id="notal_45" class="cls-notal" type="checkbox" value="45" name="notal_chk[]"></li>';
        $('#ul-rtl-ref-1').append(data);
    }
}
}
); 
```

它工作得很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:14:36.810

使用[推（）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

> 通过附加给定元素并返回数组的新长度来改变数组。

```
count += 1;
prev.push(man_val);
console.log(prev);
... 
```

# android - 在 Android 应用中更改订阅产品的价格

> ID：15758261
> 
> 赞同：4
> 
> 时间：2013-04-02T07:13:59.603
> 
> 标签：android, in-app-billing, subscription

我在 Play 商店中发布了一个 Android 应用，订阅产品按年收费。我已经习惯了旧的应用内计费 API。现在我想更改订阅产品的价格。

我想我需要在开发者控制台中更改订阅产品的价格。该选项是否适用于旧的 In-App Billing API。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T08:51:33.217

如果您已将产品发布为订阅，我想您在发布后无法更改商品的价格。一种选择是您可以以新价格发布新的订阅产品 ID，然后在您的应用程序中提供它而不是原始产品。已经购买的用户将继续按原价收费，但新用户将按新价格收费。您还可以从应用中提供的产品列表中删除旧的订阅产品，以防止用户看到或购买它。有关更多信息，请查看：http: [//developer.android.com/google/play/billing/billing_subscriptions.html](http://developer.android.com/google/play/billing/billing_subscriptions.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-06T14:32:06.927

现在情况并非如此。

您可以更改价格，对于新用户，它将直接更新，对于老用户，您必须等待 30 天才能通知他们。

请查看以下链接以获取更多信息；

[Android 开发者：更改订阅价格](https://developer.android.com/google/play/billing/billing_subscriptions#change-price-sub)

# mysql - 从另一个表中插入不重复，仅插入

> ID：15758262
> 
> 赞同：0
> 
> 时间：2013-04-02T07:14:00.163
> 
> 标签：mysql, sql-update, no-duplicates

我已经和这个斗争了好几个小时了。我需要从多个表构建一个主表（糟糕的设计，我知道。）我写了这段代码：

```
INSERT INTO amdashboard
(DashboardFirst, DashboardLast, charlotteorg, charlotteAdd1, charlotteCity, charlotteState, charlotteZip, charlottey2007, charlottey2008, charlottey2009,charlottey2010, charlotteY2011, charlotteY2012)
select Firstname, lastname, org, add1, city, state, zip, y2007, y2008, y2009, y2010, y2011, y2012
from CharlotteClean
ON DUPLICATE KEY UPDATE 
amdashboard.DashboardFirst = CharlotteClean.Firstname,
amdashboard.DashboardLast = CharlotteClean.Lastname,
amdashboard.Charlotteorg = CharlotteClean.org,
amdashboard.Charlotteadd1 = CharlotteClean.add1,
amdashboard.Charlottecity = CharlotteClean.city,
amdashboard.Charlottestate = CharlotteClean.state,
amdashboard.Charlottezip = CharlotteClean.zip,
amdashboard.Charlottey2007 = CharlotteClean.y2007,
amdashboard.Charlottey2008 = CharlotteClean.y2008,
amdashboard.Charlottey2009 = CharlotteClean.y2009,
amdashboard.Charlottey2010 = CharlotteClean.y2010,
amdashboard.Charlottey2011 = CharlotteClean.y2011,
amdashboard.Charlottey2012 = CharlotteClean.y2012; 
```

我已将 DashboardFirst 和 DashboardLast 设为组合键。但是每当我运行它时，它只会插入，从不更新，而且我知道一些记录应该更新。

有任何想法吗？

# android - 在 tomcat 中编辑 Web 服务的主机链接

> ID：15758264
> 
> 赞同：1
> 
> 时间：2013-04-02T07:14:14.963
> 
> 标签：android, jsp, servlets, google-cloud-messaging, unknown-host

我对使用 JSP、servlet 和 android 编程非常陌生。`unknownhostexception`当我从我的 jsp 文件发布时，我得到了。我开始知道我使用的主机不正确。我的具体错误是`java.net.UnknownHostException:android.googleapis.com`它应该是`android.googleapis.com/gcm/send` 请帮我更改主机名！！！

# c# - 更新datagridview的最佳方法是什么？

> ID：15758266
> 
> 赞同：3
> 
> 时间：2013-04-02T07:14:19.417
> 
> 标签：c#, datagridview, screen

我使用下面的代码在我的应用程序中使用 Timmer 更新 datagridview。Timmer 每秒运行一次，并保持屏幕闪烁。我怎样才能改变不闪烁的时间？或另一种更新datagridview的方法？

```
 SqlConnection mySqlConnection = new SqlConnection(SQLCONN);
        mySqlConnection.Open();

        SqlDataAdapter addapter = new SqlDataAdapter();
        DataTable dt = new DataTable("SSReportAmalgamate");
        SqlCommand cmd = mySqlConnection.CreateCommand();

        cmd.CommandText = "EXEC App_GetDATA " + "@acc" + "," + "@selecttype";
        cmd.Parameters.Add("@acc", SqlDbType.Char).Value = acc;
        cmd.Parameters.Add("@selecttype", SqlDbType.Char).Value = type;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandType = CommandType.Text;
        cmd.Connection = mySqlConnection;
        addapter.SelectCommand = cmd;

        addapter.Fill(dt);
        dataGridView1.DataSource = dt;

        mySqlConnection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:15:31.220

问题是，即使数据没有更改，您也会更新表单。相反，尝试从 SQL Server 听到事件，例如，当有新数据时[使用 SqlDependency （当然，如果您的数据不经常更改）。](http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:18:41.113

假设您使用的是 WinForms，一种做法是将控件设置为[double buffer](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.doublebuffered.aspx)。

```
control.DoubleBuffered = true; 
```

或者您可以通过设计视图中的属性窗口进行设置；表单本身也有这个属性，IIRC。

和这个...

> [...] 可以减少或消除由部分显示表面的渐进重绘引起的闪烁。缓冲图形要求首先将更新的图形数据写入缓冲区。然后将图形缓冲区中的数据快速写入显示的表面内存。显示图形存储器的相对快速切换通常会减少否则可能发生的闪烁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:18:38.437

使用扩展方法为数据网格添加双缓冲，然后在表单中将其设置为 true。

```
public static class ExtensionMethods
{
    public static void DoubleBuffered(this DataGridView dgv, bool setting)
    {
        Type dgvType = dgv.GetType();
        PropertyInfo pi = dgvType.GetProperty("DoubleBuffered",
            BindingFlags.Instance | BindingFlags.NonPublic);
        pi.SetValue(dgv, setting, null);
    }
} 
```

将上述类添加到您的项目中并为数据网格设置双缓冲属性，如下所示

```
dataGridView1.DoubleBuffered(true); 
```

参考：[http ://bitmatic.com/c/fixing-a-slow-scrolling-datagridview](http://bitmatic.com/c/fixing-a-slow-scrolling-datagridview)

# mysql - 使用一个 MySQL 查询获取报告

> ID：15758273
> 
> 赞同：2
> 
> 时间：2013-04-02T07:14:46.977
> 
> 标签：mysql, select, report

我有一个包含以下数据的 MySQL 表“日志”

```
id  username    status   statusdatetime   mailid
-----------------------------------------------------------------------
1   abc         pull     3/21/2013 10:04  1753
2   abc         step1    3/21/2013 10:13  1753
3   abc         step2    3/21/2013 10:17  1753
4   abc         step1    3/21/2013 10:46  1753
5   abc         step2    3/21/2013 10:54  1753
6   abc         step3    3/21/2013 11:09  1753
7   abc         mailsent 3/21/2013 11:10  1753
8   abc         pull     3/21/2013 11:11  2113
9   abc         step1    3/21/2013 11:18  2113
10  abc         step1    3/21/2013 11:32  2113
11  abc         step2    3/21/2013 11:33  2113
12  abc         step3    3/21/2013 11:44  2113
13  abc         mailsent 3/21/2013 11:44  2113
14  def         pull     3/21/2013 10:21  120
15  def         step1    3/21/2013 10:22  120
16  def         step2    3/21/2013 10:36  120
17  def         step1    3/21/2013 10:37  120
18  def         step2    3/21/2013 10:38  120
19  def         step3    3/21/2013 10:39  120
20  def         mailsent 3/21/2013 10:39  120
21  def         pull     3/21/2013 10:40  1203
22  def         step1    3/21/2013 10:41  1203
23  def         step2    3/21/2013 10:50  1203
24  def         step3    3/21/2013 10:54  1203
25  def         mailsent 3/21/2013 10:55  1203 
```

我请求的帮助是以下输出：

```
id  username    mailid  Time (Seconds)
-----------------------------------------------------------------------
1   abc         1753    3977
2   abc         2113    1991
3   def         120     1101
4   def         1203    888 
```

解释：

每个用户和每个 mailid 都被分组，并从“status”列计算“mailsent”和“pull”之间的时间差！

这可能在一个选择查询中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:26:00.367

试试这个查询

```
SELECT  
   a.username,
   a.mailid, 
   TIME_TO_SEC(TIMEDIFF(b.statusdatetime, a.statusdatetime)) AS DIFF
FROM 
   tbl a 
INNER JOIN
   tbl b 
ON 
   a.mailid = b.mailid AND 
   a.status = 'pull' AND
   b.status = 'mailsent'
GROUP BY 
   username, 
   mailid 
```

[**小提琴**](http://sqlfiddle.com/#!2/16c90/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:30:58.823

如果你有相同的序列，从每个邮件 ID`pull`的`mailsent`状态，然后使用下面的查询

```
 select
     username,
     mailid,
     TIMESTAMPDIFF(SECOND,min(statusdatetime),max(statusdatetime)) as `Time`
 from logs
 group by mailid; 
```

# php - 分页并存入数据库

> ID：15758276
> 
> 赞同：3
> 
> 时间：2013-04-02T07:15:02.123
> 
> 标签：php, mysql

大家好，我想用分页创建问题和答案，单击下一步按钮后，第一页应该验证并存储在数据库中，然后转到下一页？我尝试了一些代码，但我不知道如何发布值并通过分页存储到数据库中。

**我的代码是**

```
<form class="cmxform" id="form1" method="get" action="process.php" >
$newsquestion=$db->paging("SELECT * FROM question where classname='$_SESSION[class_name]' and category in (select category from cat where class_name='$_SESSION[class_name]' order by p_order) and  status='1'",1);
foreach($newquestion as question)
{
$answer=$db->get_results("SELECT * FROM answer where qid='$question->id'");
foreach($newanswer as $answer)
         {
<input type="radio" name='answer_value1[<?php echo $question->id?>]' value="<?php echo$answer->id?>" validate="required:true" />

}
Comment :<textarea  rows="5" cols="50" name="comment[<?php echo $question->id?>]" validate="required:true'" ></textarea> 
```

}

在分页字段中我放了

```
$linktext.=" <a href='$nextlnk' title='Show Next ".$this->MaxRecord." Data'><input type='Submit' name='button' value='Submit' ></a>"; 
```

我如何将问题值存储在数据库中。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:18:48.000

如果您使用 PHP，您可以在更新 mysql 数据库后添加以下内容以将用户重定向到下一页：

```
header("Location: $nextlnk"); 
```

然后，您所需要的只是一个显示“下一步”的提交按钮，该按钮将发布答案并推动用户前进到下一个问题。

# php - 使用 PHPExcel 将 .txt 数组转换为 .xml 所需的建议

> ID：15758278
> 
> 赞同：0
> 
> 时间：2013-04-02T07:15:06.937
> 
> 标签：php, phpexcel

基本上我需要获取包含以下内容的data.txt：

```
$mas = array (
  'Adavere' => 
  array (
    '2013-04-02' => '1744',
    '2013-04-01' => '11592', 
```

使用 PHPExcel 进入 xml

# flex4 - 如何在鼠标拖动时选择在组容器上绘制的所有显示对象？

> ID：15758279
> 
> 赞同：1
> 
> 时间：2013-04-02T07:15:07.717
> 
> 标签：flex4, flex4.6

我正在使用 actionscript3.0 和 flexbuilder4.6。我无法选择在组上用铅笔绘制的对象。建议我正确的方向。

# ebnf - 更大粒度的铁路图生成器？

> ID：15758282
> 
> 赞同：3
> 
> 时间：2013-04-02T07:15:08.813
> 
> 标签：ebnf

是否有一个 EBNF 铁路生成器可以创建更大的块，而不是每个语法生成一个图表？

我已经尝试过[http://bottlecaps.de/rr/ui](http://bottlecaps.de/rr/ui)并且非常好：可以从 W3C 规范中抓取 EBNF 语法（例如[http://www.w3.org/TR/sparql11-query/](http://www.w3.org/TR/sparql11-query/)），生成一个带有嵌入 SVG 的单个 XHTML 或带有许多 PNG 的 zip 交叉链接定义和用法。

但是，SPARQL 1.1 语法有 173 个产生式。当每个产品都有一张图表时，很难理解。我正在寻找类似这样的块：http: [//ontologicalengineering.blogspot.com/2008/12/sparql-railroad-diagram-from-hell.html](http://ontologicalengineering.blogspot.com/2008/12/sparql-railroad-diagram-from-hell.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T04:36:14.007

我也遇到了这个问题。我最终编写了一个快速而肮脏的 vim 脚本，将我的整个语法压缩到一个产品中。

较少粒度的铁路图的问题在于，它们丢失了一些由较细粒度的铁路图赋予它们的标签。

对于 EBNF 的任何常规（IE：无递归）子集，您只需将左侧“查找并替换”为右侧，直到它处于所需的形式。例如我压缩：

```
Identifier ::= Letter AlphaNum*
Letter ::= [a-zA-Z]|[_]
NonZeroDigit ::= [1-9]
Digit ::= NonZeroDigit | [0]
AlphaNum ::= Letter|Digit 
```

进入：

```
Identifier ::= ([a-zA-Z]|[_]) (([a-zA-Z]|[_])|(([1-9])|[0]))* 
```

达到了预期的效果。

过程：

1.  查找仅包含终端的规则（例如：）`Letter ::= [a-zA-Z]|[_]`编辑：如果找不到任何规则，只需选择任何规则，它仍然有效，但会导致过程稍微混乱
2.  将所有出现的左侧替换为用括号括起来的右侧。
3.  重复直到达到所需的粒度。

希望这可以帮助！

# java - java中是否有任何替代gettickcount函数的方法可以在启动后提供时间？

> ID：15758287
> 
> 赞同：1
> 
> 时间：2013-04-02T07:15:38.297
> 
> 标签：java, macos, boot, system-information

有没有什么办法可以从java中的mac os x系统启动以来获得时间？

在 Visual Studio 中，我们有 gettickcount 函数，但在 java 中，我无法获得可以执行相同操作的函数。

我不想使用将是最后一个选项的计时器手动实现它所以有没有任何 api 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:24:34.377

通过 JNI，您可以拥有操作系统的所有 API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:27:14.217

AFAIK 对此没有直接的 API。你可以执行一个系统实用程序来返回这个值，也可以使用 JNI 来实现。

# gtk - 尝试使用 GTK 和 glade 启动应用程序时出错

> ID：15758290
> 
> 赞同：0
> 
> 时间：2013-04-02T07:15:48.623
> 
> 标签：gtk, glade

当我们尝试启动使用 GTK 2.0 版本的 GTK 库的应用程序时，我们收到以下错误：

> 消息：未处理的标签：“需要”

`'requires'`在错误的 XML 文件中只出现一次。使用的 Glade 版本是`3.6.1`.

您能帮我们查询一下吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:08:14.657

Glade XML 文件可能包含所需的 GTK 最低版本号。检查您是否至少使用该版本。

# c# - 可以将命令参数和 onclick 事件添加到 div 吗？

> ID：15758291
> 
> 赞同：0
> 
> 时间：2013-04-02T07:16:11.970
> 
> 标签：c#, javascript, asp.net, jquery-plugins

我有一个相册（不是画廊），可以预览照片。相册是根据与用户关联的相册数量动态生成的。我想向它添加点击事件，以便当一个人点击一个相册时，它会将他带到该相册中的照片。我是初学者，所以我不完全知道如何完成。但我认为添加命令参数应该可以解决问题。

ASPX 代码：

```
for (int i = 0; i < dt5.Rows.Count; i++)
{
    string q = "select  imageurl from photos where albumid='" 
                                        + dt5.Rows[i]["albumid"].ToString() + "'";
    dt6 = dbo.Getdt(q);
    a = dt6.Rows[0]["imageurl"].ToString();
    b = dt6.Rows[1]["imageurl"].ToString();
    c = dt6.Rows[2]["imageurl"].ToString();
    a= a.Substring(1, a.Length - 1);
    b = b.Substring(1, b.Length - 1);
    c = c.Substring(1, c.Length - 1);
  %> 
   <div   class="image_stack" style="margin-left:300px ; right: 418px;"   
        runat="server">
       <img   class="stackphotos photo1" src="<%: a %>"   />
       <img   class="stackphotos photo2" src="<%: b %>"  />
       <img "   class="stackphotos photo3" src="<%: c %>" />
   </div>
     <br /><br /><br /><br />
<% } %> 
```

在上面的代码中 image_stack 是用于使用 Jquery 插件显示专辑的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:16:09.080

纯粹根据您发布的内容，这可以让您处理“选择”专辑图片：

```
<script>

    $(function() {
        $('div.image_stack').on('click', 'img.stackphotos', function(event) {
            // handle click event
        });
    });

</script> 
```

你在点击事件中做什么取决于你，因为我不完全确定你的意思

> ...带他去那个相册里的照片。

如果目的是将用户重定向到新页面，您真的应该将图像包装在超链接标签中并使用“自然”HTTP 机制。

**编辑：**

要在评论中回答您的问题，您有两种选择：

1）将图像包裹在锚点中：

```
<a href="url_to_your_detail_page"><img class="stackphotos photo1" src="<%: a %>" /></a> 
```

我不知道`href`价值是多少，因为这取决于了解您的网站是如何设置的。

2）使用JavaScript重定向：

```
window.location.replace('url_to_your_detail_page'); 
```

MDN 有很好的参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

无论哪种情况，您都必须在创建页面标记时生成正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:17:45.617

尝试下面的代码使用 Jquery 在 Div 上添加单击和传递命令参数：

```
$(".image_stack").click(function(event){
//Do here whatever you want
}); 
```

# css - HTML5 显示表格嵌套 div 不适用于 Firefox 和 Opera

> ID：15758293
> 
> 赞同：4
> 
> 时间：2013-04-02T07:16:26.093
> 
> 标签：css, html, css-tables, tablerow

有以下测试代码。

```
<!DOCTYPE html>
<html style="min-width:100%;min-height:100%;height:100%;width:100%">
<body style="margin:0;min-width:100%;min-height:100%;height:100%;width:100%">
<div style="display:table;width:100%;height:100%;min-wight:100%;min-height:100%;">
    <div style="display:table-row;background:red;">A</div>
    <div style="display:table-row;background:green;">
        <div style="display:block;background:yellow;width:100%;height:100%;">B</div>
    </div>
    <div style="display:table-row;background:blue;height:50px;">C</div>
</div>
</body>
</html> 
```

Firefox 它显示黄色 div 小（作为 table-row 但设置为 display:block）。歌剧也是。Chrome 在绿色 div（表格行）的 100% 高度显示黄色 div。

我需要它在 Firefox、Opera、IE>8 和 Chrome 中一样工作！

**更新：**

我发现以下问题：

```
<!DOCTYPE html>
<html style="min-width:100%;min-height:100%;height:100%;width:100%">
<body style="margin:0;min-width:100%;min-height:100%;height:100%;width:100%">
<div style="display:table;width:100%;height:100%;min-wight:100%;min-height:100%;">
    <div style="height:50px;display:table-row;background:red;">A</div>
    <div style="display:table-row;background:green;">
        <div style="display:table-cell;background:yellow;">
            <div style="display:block;width:100%;height:100%;background:darkred;">B</div>
        </div>
    </div>
    <div style="display:table-row;background:blue;height:50px;">C</div>
</div>
</body>
</html> 
```

在 Opera 中无法使用深色 div！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:26:05.360

这似乎使所有内容在 IE、FireFox 和 Chrome 上呈现一致：

```
<!DOCTYPE html>
<html style="min-width:100%;min-height:100%;height:100%;width:100%">
<body style="margin:0;min-width:100%;min-height:100%;height:100%;width:100%">
<div style="display:table;width:100%;height:100%;min-width:100%;min-height:100%;">
    <div style="display:table-row;background:red;">
        <div style="display:table-cell">A</div>
    </div>
    <div style="display:table-row;background:green;">
        <div style="display:table-cell;background:yellow;width:100%;height:100%;">B</div>
    </div>
    <div style="display:table-row;background:blue;height:50px;">
        <div style="display:table-cell">C</div>
    </div>
</div>
</body>
</html> 
```

唯一的区别是我`display:table-cell`在每个表格行中添加了 div。它将有一个 50px 高的“C”行，一个最小的“A”行，其余的填充一个黄色的“B”行。

看起来您只需将内部“B” div 从更改为 就可以逃脱`display:block`，`display:table-cell`但我认为最好的做法是始终`table-cell`在您的内部拥有一个`table-row`（我可能是错的？）。

我修改后的所有 3 个浏览器的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/aON9T.jpg)

编辑：

如果你想让你的行有相同的高度，你可以使用这个标记：

```
<!DOCTYPE html>
<html style="min-width:100%;min-height:100%;height:100%;width:100%">
<body style="margin:0;min-width:100%;min-height:100%;height:100%;width:100%">
<div style="display:table;width:100%;height:100%;min-width:100%;min-height:100%;">
    <div style="display:table-row;background:red;height:33%">
        <div style="display:table-cell">A</div>
    </div>
    <div style="display:table-row;background:green;height:33%">
        <div style="display:table-cell;background:yellow;">B</div>
    </div>
    <div style="display:table-row;background:blue;height:33%;">
        <div style="display:table-cell">C</div>
    </div>
</div>
</body>
</html> 
```

![在此处输入图像描述](https://i.stack.imgur.com/l5j9Y.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:31:48.073

如果您的目标是所有行的高度相同，那么最好使用合适的表格：

```
<table style="width:100%;height:100%;">
  <tr style="background:red;">
    <td>A</td></tr>
  <tr style="background:green;">
    <td style="background:yellow;">B</td>
  </tr>
  <tr style="background:blue;">
    <td>C</td>
  </tr>
</table> 
```

这是一个小提琴：http: [//jsfiddle.net/B5jUh/9/](http://jsfiddle.net/B5jUh/9/)

# excel - 创建邮件时保留 Outlook 签名的格式

> ID：15758300
> 
> 赞同：1
> 
> 时间：2013-04-02T07:17:09.383
> 
> 标签：excel, vba, email, outlook-2007

[我从如何使用 Outlook 向 Excel VBA 中的多个收件人发送电子邮件中](https://stackoverflow.com/questions/14985261/excel-vba-email-using-outlook-to-multiple-recipients)复制了整个代码块，并在电子邮件末尾添加了一个签名。

```
With OutMail
    .Display
End With
    Signature = OutMail.Body
With OutMail
    .To = sTo
    .CC = sCC
    .BCC = ""
    .Subject = Worksheets("MassEmail").Range("A2") & " WW" & Worksheets("MassEmail").Range("B1")
    sHTML = "<HTML><BODY><FONT face=""Calibri, Arial"">"
    sHTML = sHTML & "<p style=""font-size:11pt"">Hi,</p>"
    sHTML = sHTML & "<p style=""font-size:11pt"">Here is the RMA list WW" & Worksheets("MassEmail").Range("B1") & ".  Please review.</p>"
    sHTML = sHTML & "<pre style=""font-size:11pt;font-family:Calibri,Arial"">     Total: </pre>"
    .HTMLBody = sHTML & Signature
    .HTMLBody = .HTMLBody & "</FONT></BODY></HTML>"
End With 
```

这就是签名的外观。
![原始签名](https://i.stack.imgur.com/AUKE3.png)

除了签名，输出没问题。 ![HTML正文](https://i.stack.imgur.com/FCtDv.png)

我尝试将 .htmlbody 更改为 .body，但结果更糟。

.body 的输出。 ![身体](https://i.stack.imgur.com/PPry6.png)

我正在使用 Excel/Outlook 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:01:24.947

您需要将消息的格式设置为 RichText 或 HTMLFormat

像**olFormatHTML**或**olFormatRichText**

然后使用*MailItem.HTMLBody="...."*

**在VBA MVP Legend Ron De Bruin**的网站上有更多信息

[从 Excel 发送邮件的示例代码](http://www.rondebruin.nl/sendmail.htm)

# android - 仍然错误 Android: Unable to start Activity ComponentInfo{/com.}: android.view.InflateException: Binary XML file line Error inflating class fragment

> ID：15758303
> 
> 赞同：1
> 
> 时间：2013-04-02T07:17:23.310
> 
> 标签：android, xml, google-maps, exception, google-maps-android-api-2

我使用 Google Maps Android v1 API 创建了我的应用程序的第一个版本。但是现在当我发布我的第二版应用程序时，谷歌地图停止工作。我认为这是因为它已被弃用。

所以现在我正在尝试使用此[**链接**](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)创建示例 Android 应用程序以使用 Google Map 。

首先，我尝试使用此**[代码](https://stackoverflow.com/questions/15757106/android-unable-to-start-activity-componentinfo-com-android-view-inflateexce#)**

但正如我建议将 SupportMapFragment 与 FragmentActivity 一起使用，我将 xml 代码更改为

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginRight="150dp" />

</RelativeLayout> 
```

并导入 FragmentActivity 而不是 Activity，现在我收到错误

```
 FATAL EXCEPTION: main
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testmap/com.example.testmap.MainActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class fragment
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
 Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class fragment
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at    com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
at android.app.Activity.setContentView(Activity.java:1657)
at com.example.testmap.MainActivity.onCreate(MainActivity.java:12)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more
 Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
... 20 more
 Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment in loader dalvik.system.PathClassLoader[/data/app/com.example.testmap-2.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.support.v4.app.Fragment.instantiate(Fragment.java:391) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:25:10.867

你需要一个`android:name="com.google.android.gms.maps.SupportMapFragment"`内部`<fragment>`标签。

中的 android:name 属性指定要在布局中实例化的 Fragment 类。

更新：

更新代码后，com.google.android.gms.maps.SupportMapFragment 会出现 ClassNotFoundException。

因此，您还需要确保添加了参考库 google-play-services.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T10:57:04.643

就我而言，我错过了将 id 添加到导航 xml 类中的片段。

为此添加 id。

```
 <activity
        android:name="com.example.LoginActivity"
        android:label="LoginActivity"
        tools:layout="@layout/activity_login"/> 
```

添加 id 删除了错误：

```
<activity
        android:id="@+id/loginActivity"
        android:name="com.example.LoginActivity"
        android:label="LoginActivity"
        tools:layout="@layout/activity_login"/> 
```

当我删除未使用的资源时，登录活动的 ID 被删除。确保在清理时不会删除必要的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-06T14:27:36.657

只需更改 emulator 或 device ，我就克服了这个错误。

# iphone - 在 RestKit 中混合 http 和 https

> ID：15758307
> 
> 赞同：0
> 
> 时间：2013-04-02T07:17:30.740
> 
> 标签：iphone, ssl, restkit

我有一个启用了[RestKit](https://github.com/RestKit/RestKit)的应用程序，它可以进行 HTTP GET 调用，并且应该进行 HTTPS POST 调用，以保护否则会以未加密方式发送的用户数据。据我所知，只需**将基本 URL 设置为所需的 url** ，就可以将 RestKit 框架设置为对整个应用程序使用未加密的 HTTP 或 SSL 加密的 HTTPS 。

就我而言，我需要两者兼得。如何在 RestKit 中切换 HTTP 和 HTTPS？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:27:32.570

您需要使用两个实例`RKObjectManager`- 一个用于 HTTP GET 调用，一个用于 HTTPS POST 调用。请记住使用给定名称调用每个经理，并且不再使用，`[RKObjectManager sharedManager]`因为它设置为第一个 initialized `RKObjectManager`。

`RKObjectManager`作为替代方案，您可以在每次 GET/POST 调用之前设置给定的基本 URL 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T03:56:49.883

我使用方法 swizzling 来解决这个问题，因为[RestKit](https://github.com/RestKit/RestKit)使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)来做 http 相关的事情，并且`AFNetworking`使用

```
- (NSMutableURLRequest *)requestWithMethod:(NSString *)method path:(NSString *)path parameters:(NSDictionary *)parameters 
```

生成请求对象。在我的实现中，我调整了这个方法并检查我是使用`http`还是`https`基于，`path`所以你可以选择基于`method`

# oracle - 如何在更新后创建触发器以获取值 totalPayment

> ID：15758310
> 
> 赞同：0
> 
> 时间：2013-04-02T07:17:44.627
> 
> 标签：oracle

我想创建一个触发器来计算 Event 表上的 totalPayment。但是为了计算 totalPayment 列，它引用了另外两个表，即 Location 和 Equipment。下面是表的表结构：

```
create table equipment(
equipmentID varchar2(10) primary key,
equipmentName varchar2(50) not null,
equipmentPriceUnit decimal(18,2) not null
);

create table location(
locationID varchar2(10) primary key,
locationName varchar2(50) not null,
locationMaxCapacity int not null,
locationPriceHour decimal(18,2) not null
);

create table event(
eventID varchar2(10) primary key,
eventName varchar2(50) not null,
eventDurationHour int not null,
noAudience int not null,
equipmentID references equipment(equipmentID) null,
equipmentQuantity int null,
locationID references location(locationID) null,
**totalPayment decimal(18,2) null**
); 
```

进行此计算的方程式是

```
totallocation := locationPriceHour*eventDurationHour;
totalequipment := equipmentPriceUnit*equipmentQuantity;
totalPayment :=totallocation + totalequipment; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:37:12.417

试试这个：

```
CREATE OR REPLACE TRIGGER trg_event_update
AFTER UPDATE ON event
FOR EACH ROW
REFERENCING new AS new old AS old
DECLARE
  totalLocation location.locationPriceHour%TYPE;
  totalequipment equipment.equipmentPriceUnit%TYPE;
  ... -- declaration variables
BEGIN
  SELECT l.locationPriceHour * :new.eventDurationHour
    INTO totalLocation
    FROM location
   WHERE locationID = :new.locationID;

  SELECT e.equipmentPriceUnit * :new.equipmentQuantity
    INTO totalequipment
    FROM equipment
   WHERE equipmentID = :new.equipmentID;

  :new.totalPayment := totalLocation + totalequipment;

END;
/ 
```

我建议不要使用计算字段。而是在运行时计算值，如下所示：

```
SELECT (SELECT l.locationPriceHour
          FROM location l
         WHERE l.locationID = ev.locationID) * ev.eventDurationHour
       + (SELECT eq.equipmentPriceUnit
            FROM equipment eq
           WHERE eq.equipmentID = ev.equipmentID) * ev.equipmentQuantity
       AS totalPayment
  FROM event ev; 
```

# build - 准备网站构建以供发布

> ID：15758313
> 
> 赞同：1
> 
> 时间：2013-04-02T07:17:58.260
> 
> 标签：build, web, workflow, release, production-environment

我们公司开发网站超过 1 年。在这个阶段我们提出了一个问题：将网站从本地环境移动到生产环境的算法是什么？我们已经有了自己的流程，但我们很确定，有经验丰富的公司有一些有用的东西，可以在我们自己的地方使用。

我们的流程（简单）如下所示：

1.  从 git 拉取版本
2.  上传到远程服务器
3.  更新远程服务器上的配置和静态文件（如果需要）
4.  CSS\JS 的优化
5.  切换到生产

问题：

1.  我们的主要问题是我们没有任何将版本从 git 推送到登台服务器的自动化（我们自己编码）脚本。有人这样做吗？

2.  每个步骤：从 git 拉取，上传到服务器，更改配置，CSS\JS 的优化都是由个人调用单独进行的。这是好习惯吗？

也许我们错过了一些关键点？希望对我们的流程有任何帮助或提示。提前致谢

# php - 在一个查询中按两个不同的行排序

> ID：15758316
> 
> 赞同：0
> 
> 时间：2013-04-02T07:18:06.727
> 
> 标签：php, mysql, group-by

这里的概念证明问题：

基本上我想将以下两个查询合二为一：

```
SELECT `cat` FROM `test` group by `cat` order by `catSort`,`ID` desc
$cat-->  SELECT * FROM `test` where `cat`=$cat group by `cat2` order by `cat2Sort`,`ID` desc 
```

让我详细说明。假设我有下表`test`：

```
-----------------------------------------
| ID | cat  | cat2 | catSort | cat2Sort |
|----------------------------------------
| 1  | cat  | sub  | 0       | 0        |
| 2  | cat  | sub2 | 0       | 1        |
| 3  | cat  | sub  | 0       | 1        |
| 4  | cat2 | sub  | 1       | 0        |
| 5  | cat2 | sub2 | 1       | 0        |
| 6  | cat  | sub2 | 0       | 0        |
---------------------------------------- 
```

它的作用是它有两个类别，其中`cat2`是 的子类别`cat`和`cat`排序依据`catSort`和`cat2`排序依据，你猜对了，`cat2Sort`。其层次结构应如下所示：

```
cat
  sub  ID:1
  sub  ID:3
  sub2 ID:6
  sub2 ID:2
cat2
  sub  ID:4
  sub2 ID:5 
```

我如何通过 NOT 来实现这一点，`order by catSort, cat2Sort`因为稍后会添加排序。它们需要按其排序，`ID`以便新添加的条目位于底部，但同时按排序字段（如果已设置）进行排序。例如`order by catSort, cat2Sort, ID`。

我还需要将它们分组到另一个查询中才能得到这个：

```
cat
  sub  ID:1
  sub2 ID:6
cat2
  sub  ID:4
  sub2 ID:5 
```

我最初的想法是将两个字段组合在一起并按它们分组。就像是：

```
SELECT *, combine(`cat`,`cat2`) as `tempCat` FROM `test`
group by `tempCat` order by `catSort`,`serSort`,`ID` desc 
```

当然，这完全是编造的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:23:01.467

使用可以按如下两列排序

```
ORDER BY `column1` ASC/DESC, `column2` ASC/DESC 
```

# asp.net - 必填字段验证器

> ID：15758317
> 
> 赞同：1
> 
> 时间：2013-04-02T07:18:08.277
> 
> 标签：asp.net

我是 asp.net 的新手，我正在设置必填字段验证器，它向我显示一个错误

**错误是：**

```
Unable to find control id 'txtFirstName' referenced by the 'ControlToValidate' property of 'RequiredFieldValidator1'. 
```

**代码是：**

```
 <tr>
            <td align="right" style="padding-right: 5px; width: 50%;">
                <asp:Label ID="lblFirstName" runat="server" Text="FIRSTNAME :"></asp:Label>
            </td>
            <td align="left" style="padding-left: 5px; width: 50%;">
                <asp:TextBox ID="txtFistName" runat="server" Width="70%"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtFirstName" ErrorMessage="You can't leave this empty."></asp:RequiredFieldValidator>
            </td>

        </tr> 
```

任何人都可以在这个流程上帮助我......，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:19:09.610

你的 id 有错字`TextBox`，你有 id`txtFistName`没有`txtFirstName`那么改变它。

*改变*

```
<asp:TextBox ID="txtFistName" runat="server" Width="70%"></asp:TextBox> 
```

*到*

```
<asp:TextBox ID="txtFirstName" runat="server" Width="70%"></asp:TextBox> 
```

# ruby-on-rails-3 - 在 Rails 应用程序中集成 vicidial

> ID：15758324
> 
> 赞同：0
> 
> 时间：2013-04-02T07:18:49.153
> 
> 标签：ruby-on-rails-3, api

我必须将 vicidial 集成到我的 rails 应用程序中，我只需要将电话号码添加到列表中，我搜索了这个但没有找到任何有用的文档。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T23:16:49.123

There are two basic methods (aside from the web interface) to add leads to the vicidial_list table (which is where the leads reside).

1) As previously mentioned: the API This can be activated from the command line by invoking wget or curl to simulate a web request and using the instructions in NON-AGENT_API.txt regarding the "add_lead" function. The instruction file is in /usr/src/astguiclient/trunk/docs/NON-AGENT_API.txt by default and the api itself is /srv/www/htdocs/vicidial/non_agent_api.php or "[http://example.com/vicidial/non_agent_api.php](http://example.com/vicidial/non_agent_api.php)".

2) Command Line Lead Loader This can be used to add multiple leads at once (or one at a time). It can also be used to reach out and grab leads from an FTP site, which means you'd be able to "plop" the lead in a location and then send Vicidial to "go get it" by invoking the CLILeadLoader. This script resides in /usr/share/astguiclient/VICIDIAL_IN_new_leads_file.pl, and there are some other related utilities nearby. Instructions and options are available by executing the script with "--help"

Of course, in both cases you could extract the code (one is PHP and one is PERL) if you want to write your own add to database method without invoking another script.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:47:35.390

您可以使用 Vicidial NON-Agent API 将电话添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T09:20:33.717

在原始 vicibox 安装中，您会在

```
/usr/src/astguiclient/trunk/docs 
```

文件夹。

为了与 Rails 集成，您很可能希望使用 Web 代理 API。有多个选项可以将潜在客户添加到系统，例如您可以在 AGENT_API.txt 文件中找到的“external_add_lead”函数。

# c# - 绘制列表视图列并分别对齐列

> ID：15758328
> 
> 赞同：0
> 
> 时间：2013-04-02T07:19:03.903
> 
> 标签：c#, listview, alignment, drawstring, string-formatting

我在打印它之前绘制了我的列表视图，我可以使用 StringAlignment.Far 将列向右对齐，但它会将所有列绘制到右侧，我可以将我的第一个描述列绘制到左侧并将价格列绘制到右侧吗？

```
 if (Controls[i].GetType() == this.listView1.GetType())
            {
                StringFormat stringFormat = new StringFormat();
                stringFormat.Alignment = StringAlignment.Far;
                stringFormat.LineAlignment = StringAlignment.Far;
                for (int row = 0; row < listView1.Items.Count; row++)
                {
                    int nextColumnPosition = listView1.Bounds.X;
                    for (int col = 0; col < listView1.Items[row].SubItems.Count; col++)
                    {
                        g.DrawString(listView1.Items[row].SubItems[col].Text, listView1.Items[row].Font, Brushes.Black, (nextColumnPosition + 3) * scalex, (listView1.Items[row].Bounds.Y + listView1.Bounds.Y) * scaley, stringFormat);
                        nextColumnPosition += listView1.Columns[col].Width;

                    }
                }
            } 
```

# telerik - 绑定 Telerik 网格

> ID：15758331
> 
> 赞同：0
> 
> 时间：2013-04-02T07:19:11.823
> 
> 标签：telerik

我正在用名为“Employee”的模型绑定下面的 Grid

```
<%= Html.Telerik().Grid<Employee>() 
             .Name( "EmployeeGrid" ) 
    .Columns(colums => colums.Bound(E => E.EmployeeID)) %>   

But I am getting the below error in this line Grid<Employee>() 
```

找不到类型或命名空间名称“员工”

我在一个视图中有三个网格，所以我不能在第一行视图中使用 @model 引用任何特定的模型名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T12:59:49.193

该错误告诉您 View 不知道 Type 'Employee' 。你必须在第一行写：

```
<%@ Import namespace="MyProgram.FolderOfEmployeeClass" %> 
```

aspx 文件中 using 语句的信息：

[是否可以在我的 aspx 视图中使用“使用”语句？(ASP.NET MVC)](https://stackoverflow.com/questions/1697169/is-it-possible-to-use-the-using-statement-in-my-aspx-views-asp-net-mvc)

**一条建议：**使用 Razor 引擎而不是 aspx。这更容易使用！

# php - 有人知道如何通过 MYSQL Query 获取帖子图像大小吗？

> ID：15758333
> 
> 赞同：0
> 
> 时间：2013-04-02T07:19:14.827
> 
> 标签：php, mysql, database, image, wordpress

我正在使用带有 adodb 类的 PHP 开发 Web 服务。我想做的是我需要帖子的图像尺寸，即（缩略图、中、大）尺寸。我能够从数据库中获取发布的原始图片链接 URL。但我需要从数据库中发布不同大小的图像。

有谁知道大小的帖子图像存储在数据库中的哪个位置？

用于获取帖子图像的 MySQL 查询如下：

```
 SELECT files.meta_value AS filepath FROM wp_posts posts INNER JOIN wp_posts attachments ON posts.ID = attachments.post_parent INNER JOIN wp_postmeta files ON attachments.ID = files.post_id WHERE files.meta_key = '_wp_attached_file' AND posts.ID =$post_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:24:29.270

您可以通过阅读源代码来准确查看 WordPress 是如何工作的。您正在寻找的功能可以在这里找到：[http ://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/media.php#L544](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/media.php#L544)

正如其他评论者所说，请务必预先正确描述您的问题。

# javascript - Google Script - UrlFetchApp.fetch：在 Cyrillic windows-1251 字符集中发布请求，如何？

> ID：15758337
> 
> 赞同：2
> 
> 时间：2013-04-02T07:19:30.547
> 
> 标签：javascript, google-apps-script

我正在使用谷歌脚本通过使用 UrlFetchApp 库的发布请求对某些域执行搜索，但有一个问题，谷歌脚本使用 UFT-8 字符集，但我的域只接受 windows-1251 编码，我无法更改代码在服务器端。

有我的代码：

```
 var url2="http://job-test.1gb.ua/posttest.php";

  var name = "Ультраблиск";

  var form = {"sci" : "iev", "gsearch" :  name };
  var options = {contentType: "application/x-www-form-urlencoded; charset=windows-1251", 
     "method" : "post", "payload" : form};

  var html = UrlFetchApp.fetch(url2, options).getContentText("windows-1251");

  Logger.log(html); 
```

我在服务器端得到的是“РЈР»СЊС,СЂР°Р±Р»РёСЃРє”（在 windows-1251 中）。

我发现了如何在 windows-1251 中阅读答案，它使这部分成为 - .getContentText("windows-1251"); 但发布请求始终以 UTF-8 字符集发送。我试图使用一些 JS 函数从 UTF-8 解码到 windows-1251，如下所示：

```
var DMap = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15, 16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21, 22: 22, 23: 23, 24: 24, 25: 25, 26: 26, 27: 27, 28: 28, 29: 29, 30: 30, 31: 31, 32: 32, 33: 33, 34: 34, 35: 35, 36: 36, 37: 37, 38: 38, 39: 39, 40: 40, 41: 41, 42: 42, 43: 43, 44: 44, 45: 45, 46: 46, 47: 47, 48: 48, 49: 49, 50: 50, 51: 51, 52: 52, 53: 53, 54: 54, 55: 55, 56: 56, 57: 57, 58: 58, 59: 59, 60: 60, 61: 61, 62: 62, 63: 63, 64: 64, 65: 65, 66: 66, 67: 67, 68: 68, 69: 69, 70: 70, 71: 71, 72: 72, 73: 73, 74: 74, 75: 75, 76: 76, 77: 77, 78: 78, 79: 79, 80: 80, 81: 81, 82: 82, 83: 83, 84: 84, 85: 85, 86: 86, 87: 87, 88: 88, 89: 89, 90: 90, 91: 91, 92: 92, 93: 93, 94: 94, 95: 95, 96: 96, 97: 97, 98: 98, 99: 99, 100: 100, 101: 101, 102: 102, 103: 103, 104: 104, 105: 105, 106: 106, 107: 107, 108: 108, 109: 109, 110: 110, 111: 111, 112: 112, 113: 113, 114: 114, 115: 115, 116: 116, 117: 117, 118: 118, 119: 119, 120: 120, 121: 121, 122: 122, 123: 123, 124: 124, 125: 125, 126: 126, 127: 127, 1027: 129, 8225: 135, 1046: 198, 8222: 132, 1047: 199, 1168: 165, 1048: 200, 1113: 154, 1049: 201, 1045: 197, 1050: 202, 1028: 170, 160: 160, 1040: 192, 1051: 203, 164: 164, 166: 166, 167: 167, 169: 169, 171: 171, 172: 172, 173: 173, 174: 174, 1053: 205, 176: 176, 177: 177, 1114: 156, 181: 181, 182: 182, 183: 183, 8221: 148, 187: 187, 1029: 189, 1056: 208, 1057: 209, 1058: 210, 8364: 136, 1112: 188, 1115: 158, 1059: 211, 1060: 212, 1030: 178, 1061: 213, 1062: 214, 1063: 215, 1116: 157, 1064: 216, 1065: 217, 1031: 175, 1066: 218, 1067: 219, 1068: 220, 1069: 221, 1070: 222, 1032: 163, 8226: 149, 1071: 223, 1072: 224, 8482: 153, 1073: 225, 8240: 137, 1118: 162, 1074: 226, 1110: 179, 8230: 133, 1075: 227, 1033: 138, 1076: 228, 1077: 229, 8211: 150, 1078: 230, 1119: 159, 1079: 231, 1042: 194, 1080: 232, 1034: 140, 1025: 168, 1081: 233, 1082: 234, 8212: 151, 1083: 235, 1169: 180, 1084: 236, 1052: 204, 1085: 237, 1035: 142, 1086: 238, 1087: 239, 1088: 240, 1089: 241, 1090: 242, 1036: 141, 1041: 193, 1091: 243, 1092: 244, 8224: 134, 1093: 245, 8470: 185, 1094: 246, 1054: 206, 1095: 247, 1096: 248, 8249: 139, 1097: 249, 1098: 250, 1044: 196, 1099: 251, 1111: 191, 1055: 207, 1100: 252, 1038: 161, 8220: 147, 1101: 253, 8250: 155, 1102: 254, 8216: 145, 1103: 255, 1043: 195, 1105: 184, 1039: 143, 1026: 128, 1106: 144, 8218: 130, 1107: 131, 8217: 146, 1108: 186, 1109: 190}

function UnicodeToWin1251(s) {
    var L = []
    for (var i=0; i<s.length; i++) {
        var ord = s.charCodeAt(i)
        if (!(ord in DMap))
            throw "Character "+s.charAt(i)+" isn't supported by win1251!"
        L.push(String.fromCharCode(DMap[ord]))
    }
    return L.join('')
} 
```

但我在服务器端得到的是：Windows-1251 中的“Г“Г«ГјГІГ°Г ГЎГ«ГЁГ±ГЄ”（以及 UTF-8 中的“Óëüòðàáëèñê”）和我发现的所有其他解码功能都一样。

# libpcap - 如何动态修改tcpdump中的过滤器

> ID：15758343
> 
> 赞同：1
> 
> 时间：2013-04-02T07:19:37.920
> 
> 标签：libpcap, packet-capture, tcpdump

我正在修改 tcpdump 以动态更改它用来获取输出的过滤器。

目前，tcpdump 使用 pcap_set_filter 实际为用户感兴趣的传入数据包或传出数据包准备过滤器，（pcap_compile 这样做吗？我不太确定），是否可以从 tcpdump 动态换过滤器？从某种意义上说，我想过滤我的 MAC 地址上的数据包，并且由于某些原因我动态更改了 mac，现在我的 mac 改变了，反过来我应该通知 tcpdump 更改新 mac 上的过滤器，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:33:30.083

> 是否可以从 tcpdump 动态更改过滤器？

是的，它可以`pcap_setfilter()`使用新过滤器（由过滤器表达式编译`pcap_compile()`）调用`pcap_t`它已打开的过滤器，以将过滤器设置为新值。

但是，这将导致已捕获但未被 tcpdump 读取的流量被丢弃。libpcap 中没有防止这种情况发生的机制。

> 从某种意义上说，我想过滤我的 MAC 地址上的数据包，并且由于某些原因我动态更改了 mac，现在我的 mac 改变了，反过来我应该通知 tcpdump 更改新 mac 上的过滤器，我该怎么做？

您不仅需要修改 tcpdump 来调用`pcap_compile()`并且`pcap_setfilter()`在它捕获流量时，还必须修改它以接收来自某个来源的消息，告诉它更改过滤器并指定新过滤器应该是什么，并安排有当 MAC 地址更改时，该消息将发送给它。

# php - 生成缩略图

> ID：15758351
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:20:04.597
> 
> 标签：php

我有一个上传多个文件的 php 脚本。

我正在寻找的是一个生成缩略图并保持比例的脚本，所以如果原件是 1000 x 500 并且我将宽度设置为 200，则 img 将是 200 x 100。

我有一个`$file_name`包含文件名的变量。

图片可以是jpg、png、JPEG、gif等多种类型。输出文件并不重要（只要它是图像）。图像最大为 4.5 MB。我希望它给出 300px 的宽度，并且高度必须是比例。

有没有一种简单的方法来创建脚本？

我发现[http://nl3.php.net/imagejpeg](http://nl3.php.net/imagejpeg)看起来很简单。但什么是最简单的选择。我**不需要**可以重用的框架，我需要最简单的脚本。所以**尽可能最小**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:23:00.840

如果你安装了 GD 库，试试这个： [来自 magicbook](http://www.phpmagicbook.com/upload-image-and-create-thumbnail/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T07:52:06.637

你可能会在这里找到一些有用的脚本.. [http://www.phpclasses.org/browse/class/11.html](http://www.phpclasses.org/browse/class/11.html)，它们是简单的类，所以你也可以查看代码并了解它是如何完成的...... HTH。

# c# - 如何在windows phone 8中连续旋转？

> ID：15758358
> 
> 赞同：5
> 
> 时间：2013-04-02T07:20:29.410
> 
> 标签：c#, windows-phone-7, rotation, rotateanimation

我使用此代码进行旋转

```
void rotate()
{
    Duration Time_duration = new Duration(TimeSpan.FromSeconds(20));
    Storyboard MyStory = new Storyboard();
    MyStory.Duration = Time_duration;
    DoubleAnimation My_Double = new DoubleAnimation();
    My_Double.Duration = Time_duration;
    MyStory.Chil*emphasized text*dren.Add(My_Double);
    RotateTransform MyTransform = new RotateTransform();
    Storyboard.SetTarget(My_Double, MyTransform);
    Storyboard.SetTargetProperty(My_Double, new PropertyPath("Angle"));
    My_Double.To = 270;
    this.maincan.RenderTransform = MyTransform;
    this.maincan.RenderTransformOrigin = new Point(0.5, 0.5);
    //stackPanel1.Children.Add(image1);
    MyStory.Begin();
} 
```

它正在工作，但我想连续旋转图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:22:55.360

`Storyboard`有一个名为的属性，`RepeatBehavior`它允许您控制动画的重复方式。在您的代码中，添加以下行...

```
MyStory.RepeatBehavior = RepeatBehavior.Forever;  // repeat forever 
```

或者

```
MyStory.RepeatBehavior = new RepeatBehavior(TimeSpan.FromSeconds(20)); // repeat for 20 seconds 
```

官方文档中还有更多示例：

[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.repeatbehavior(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.repeatbehavior(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T10:15:43.093

这只是一个想法，但如果您唯一关心的是让图像不断旋转，这可能是最简单的方法。

```
 void rotate()
        {
            DispatcherTimer dispatcherTimer = new DispatcherTimer();
            dispatcherTimer.Tick += dispatcherTimer_Tick;
            dispatcherTimer.Interval = new TimeSpan(0, 0, 1);
            dispatcherTimer.Start();
        } 
```

所以每一秒事件都会被触发

```
 private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        Storyboard MyStory = new Storyboard();
        MyStory.Duration = new TimeSpan(0, 0, 1);
        DoubleAnimation My_Double = new DoubleAnimation();
        My_Double.Duration = new TimeSpan(0, 0, 1);
        MyStory.Children.Add(My_Double);
        RotateTransform MyTransform = new RotateTransform();
        Storyboard.SetTarget(My_Double, MyTransform);
        Storyboard.SetTargetProperty(My_Double, new PropertyPath("Angle"));
        My_Double.To = 360;
        YourImage.RenderTransform = MyTransform;
        YourImage.RenderTransformOrigin = new Point(0.5, 0.5);       
        MyStory.Begin();
    } 
```

让我知道事情的后续 （：

**编辑**

**这只是一个想法，我相信有更好的方法**

```
 void rotate(int i)
       {            
        Storyboard MyStory = new Storyboard();
        MyStory.Duration = new TimeSpan(0,0,1);           
        DoubleAnimation My_Double = new DoubleAnimation();
        My_Double.Duration =  new TimeSpan(0,0,1);          
        MyStory.Children.Add(My_Double);
        RotateTransform MyTransform = new RotateTransform();
        Storyboard.SetTarget(My_Double, MyTransform);
        Storyboard.SetTargetProperty(My_Double, new PropertyPath("Angle"));
        My_Double.From = i;
        My_Double.To = i +90;
        m_Image.RenderTransform = MyTransform;
        m_Image.RenderTransformOrigin = new Point(0.5, 0.5);            
        MyStory.Begin();
        MyStory.Completed +=((arg,c) =>
        {
            if (i == 360)
            {
                rotate(0);
            }
            else 
            {
                rotate(i + 90);
            }        
        });                                
    } 
```

# plugins - Facebook 社交插件图片配置

> ID：15758360
> 
> 赞同：1
> 
> 时间：2013-04-02T07:20:31.207
> 
> 标签：plugins, facebook-social-plugins

我在 facebook 社交插件中设置了一个like 按钮，以使用户能够通过 facebook 分享我的网络。这是成功的，但有一个小图像捕获了我网络的一小部分。我无法配置它捕获的网站的哪个部分。有什么办法让我控制图像显示？！[照片供参考][1]

图片链接：http: [//i.stack.imgur.com/iWvaq.png](http://i.stack.imgur.com/iWvaq.png)

# c# - 如何在使用 linq 的 c# 数据库编程中在服务器上引入数据库

> ID：15758362
> 
> 赞同：0
> 
> 时间：2013-04-02T07:20:37.270
> 
> 标签：c#, linq-to-sql

我有一个小的 c# 程序，它使用 linq to sql 连接到数据库。现在我想将数据库放在服务器上，以便 2 或 3 个不同的人可以连接到它，我应该如何以及在哪里在我的代码中提供数据库的新地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:23:05.100

您将需要更新配置文件中的连接字符串。根据项目类型，这可能会有所不同，要么在 web.config 或 app.config 中，要么在`<connectionStrings />`元素内。

如果它是一个库/dll 项目，那么尽管它可能会`app.config`为设计器存储连接字符串，但实例将从调用应用程序的配置中获取它。

# iphone - iOS - 在 UITabBarController 中添加标题图像

> ID：15758363
> 
> 赞同：0
> 
> 时间：2013-04-02T07:20:39.660
> 
> 标签：iphone, ios, ipad, uitabbarcontroller, uitabbar

我在 iOS 6 中创建了一个新的选项卡式应用程序，
但我想在顶部添加一个图像，以便在我的项目中保持相同

在`AppDelegate.m`文件中我添加了这段代码

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[LMSFirstViewController alloc] initWithNibName:@"LMSFirstViewController" bundle:nil];
    UIViewController *viewController2 = [[LMSSecondViewController alloc] initWithNibName:@"LMSSecondViewController" bundle:nil];
    UIViewController *viewController3 = [[LMSThirdViewController alloc] initWithNibName:@"LMSThirdViewController" bundle:nil];

    **UIImageView *imageView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 80, 1024)];
    imageView.image=[UIImage imageNamed:@"LMS.jpg"];**

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3,nil];

    self.window.rootViewController = self.tabBarController;
    **[self.window addSubview:imageView];**
    [self.window makeKeyAndVisible];
    return YES;
} 
```

但它不加载任何图像
我应该怎么做才能以任何其他方式添加图像来实现这一点

谢谢，
阿伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:27:04.247

一旦像这样检查它就可以工作，在调用 `[self.window makeKeyAndVisible];` 方法后添加子视图，之前你在加载之前添加子视图发生了什么。

```
self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];   
    [self.window addSubview:imageView]; 
```

# android - Android 布局：制作一个 可扩展

> ID：15758365
> 
> 赞同：0
> 
> 时间：2013-04-02T07:20:50.893
> 
> 标签：android, android-layout, android-linearlayout, android-xml

我有一个线性布局（可以说是垂直的），里面有 3 个 vews - A、B 和 C。它们每个都有一个权重（权重总和为 4）。

```
A - layout_weight 1, A is a <space>
B - layout_weight 2, B has real content
C - layout_weight 1, C is a <space> 
```

一切都很好，除非我们必须切换到非常低的分辨率——比如 320x240 或 320x480。比例保持不变，但是如果我在 B 中有重要的内容（例如某些文本或编辑字段），它会被剪裁并且不会显示。

所以基本上，我希望 B 的高度为最大值（包装内容，layout_weight 计算的高度）另外，我希望 C 为 min（layout_weight 计算的高度，B 布局后剩余的高度）。

我可以在java代码中做到这一点。Android xml中有没有布局机制来实现这样的效果？（据我记得我在 html/css 中看到过类似的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:47:17.700

检查 android 开发者的页面关于`[Providing Resources](http://developer.android.com/guide/topics/resources/providing-resources.html)`. 我认为该部分`Providing Alternative Resources`是您需要阅读的。简而言之 - 您可以通过为`layout`文件夹指定不同的名称（例如`layout-small`.

# maven - 如何指示 Maven 将 linux 或 windows 上已编译的 EAR 复制到特定于操作系统的目录？

> ID：15758366
> 
> 赞同：1
> 
> 时间：2013-04-02T07:20:52.927
> 
> 标签：maven, maven-resources-plugin

我有一个 POM 文件，它当前正在将编译的 EAR 文件复制到 linux 目录。

我的意思是为我的 Windows 开发人员做同样的事情，而不需要他们手动调整输出目录。因此，maven 资源插件应该由操作系统确定路径（Linux 的 /projects/shared_ears 和 Windows 的 D:\projects_bin\shared_ears）。可以用 maven-resources-plugin 完成吗？说，不使用 maven ant run 插件？

在仅适用于 linux OS 的现有复制命令下方。

感谢任何聪明的想法。

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <executions>
        <execution>
            <id>copy-resources</id>
            <phase>install</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>/projects/shared_ears</outputDirectory>
                <resources>
                    <resource>
                        <directory>${project.build.directory}</directory>
                        <includes>
                            <include>project-${project.version}.ear</include>
                        </includes>
                    </resource>
                </resources>
                <overwrite>true</overwrite>
            </configuration>
        </execution>

    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:44:35.493

最简单的方法是使用[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

激活配置文件的一种方法是使用 os（操作系统）。您必须定义一个属性。假设`<ear.directory>/projects/shared_ears</ear.directory>`并在您的插件配置中使用此属性：

```
 <configuration>
            <outputDirectory>${ear.directory}</outputDirectory>
            <resources>
                <resource>
                    <directory>${project.build.directory}</directory>
                    <includes>
                        <include>project-${project.version}.ear</include>
                    </includes>
                </resource>
            </resources>
            <overwrite>true</overwrite>
        </configuration> 
```

现在，您可以在 2 个不同的配置文件中指定此属性，并根据当前操作系统激活一个配置文件或另一个。这是如何做到的：

```
<profiles>
  <profile>
    <id>WinProfile</id>
    <activation>
      <os>
        <family>windows</family>
      </os>
    </activation>
    <properties>
      <ear.directory>D:\projects_bin\shared_ears</ear.directory>
    </properties>
    ...
  </profile>
  <profile>
    <id>UnixProfile</id>
    <activation>
      <os>
        <family>unix</family>
      </os>
    </activation>
    <properties>
      <ear.directory>/projects/shared_ears</ear.directory>
    </properties>
    ...
  </profile>
</profiles> 
```

有关配置文件和操作系统检测的附加信息[here](http://docs.codehaus.org/display/MAVENUSER/Profiles)

# android - Android sqlite3_open_v2("/data/data/package name/*.db", &handle, 1, NULL) 失败

> ID：15758367
> 
> 赞同：0
> 
> 时间：2013-04-02T07:20:54.520
> 
> 标签：android, sqlite

我开发了在我的公司中使用的应用程序。当我尝试安装更新的应用程序时出现此错误。错误发生在这行代码：

```
SQLiteDatabase db = SQLiteOpenHelperDAO.getInstance(context).getReadableDatabase(); 
```

我把 try/catch 放在那里，错误消息显示“无法打开数据库文件”

logCat 告诉我：

```
04-02 11:50:38.626: I/Database(16526): sqlite returned: error code = 14, msg = cannot open file at source line 25467
04-02 11:50:38.626: E/Database(16526):  sqlite3_open_v2("/data/data/myappPackage/databases/mydb.db", &handle, 6, NULL) failed
04-02 11:50:38.642: E/SQLiteOpenHelper(16526): Couldn't open mydb.db for writing (will try read-only): 
```

然后我得到了***Force close***。

这是我的**getInstance**方法

```
public static synchronized SQLiteOpenHelperDAO getInstance(Context context) {

    if (helper == null) {
        helper = new SQLiteOpenHelperDAO(context);
    }

    if (dbRefCounter > 1000)
        dbRefCounter = 0;
    else
        dbRefCounter++;

    Log.i(TAG, "Return new reference to mPos database. Current number of references=" + String.valueOf(dbRefCounter));

    return helper;
} 
```

我有大约 3 台设备进行测试，当我尝试升级应用程序时，这个错误总是只发生在**三星设备上，但它适用于我的索尼 XSL 和中国 Android 平板电脑。**

我不知道如何解决这个问题。请帮助问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:39:30.127

尝试这个 。

如果它有效，请检查您的 getInstance() 在 Database 类中。

```
 SQLiteOpenHelperDAO dbAdapter = new  SQLiteOpenHelperDAO(this);

 SQLiteDatabase db = dbAdapter .getReadableDatabase(); 
```

或者这里是 getInstance()。

```
public static synchronized SQLiteOpenHelperDAO  getInstance(Context ctx)
    {
        if (dbAdapter == null) 
            dbAdapter = new SQLiteOpenHelperDAO(ctx);
        }

        return dbAdapter;
    } 
```

# build-automation - 可编程构建自动化工具？

> ID：15758370
> 
> 赞同：1
> 
> 时间：2013-04-02T07:21:15.953
> 
> 标签：build-automation

我正在尝试找到一个构建自动化工具（如 Apache Ant 或 Maven），其中构建脚本是用 OOP 语言（例如 Java、Ruby 或类似语言）编写的。我的构建过程相当复杂，Ant 编程机制还不够强大，无法处理它（脚本现在非常复杂且无法维护）。你能推荐一些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:57:12.407

Rake (ruby DSL)、Gradle (Groovy) 还是 Buildr（他们声称是 Maven 的 Ruby 替代品）？

[http://rake.rubyforge.org/](http://rake.rubyforge.org/)

[http://www.gradle.org/](http://www.gradle.org/)

[http://buildr.apache.org/](http://buildr.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:27:43.500

你可以试试[Scons](http://www.scons.org/)。它是python（一种OOP脚本语言）中的软件构建工具

# windows-8 - Windows 8 用户控制导航问题

> ID：15758375
> 
> 赞同：0
> 
> 时间：2013-04-02T07:21:24.407
> 
> 标签：windows-8, windows-store-apps

我的要求是我必须`usercontrol`在所有页面中添加一个共同点。将`usercontrol`有 5 个按钮。当用户按下一个按钮时，导航应该发生在该按钮相关的页面上。我正在使用以下代码在 Windows Phone 中处理相同的事情：

```
(Application.Current.RootVisual as PhoneApplicationFrame).Navigate(
                        new Uri(PageUrls.INCOMEEXPENCE_PAGE, UriKind.Relative)); 
```

现在我想在我的窗口 8 应用程序中使用它。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:47:14.600

会是这样

```
private void btnMyPage_Click(object sender, RoutedEventArgs e)
{
    Frame.Navigate(typeof(MyPage),YOUR_PARAMETER);
} 
```

`MyPage`XAML 页面在哪里，`YOUR_PARAMETER`如果您想在导航时传递一些数据，它是对象参数，它是可选的。`OnNavigatedTo`您可以在事件中使用访问该参数`e.Parameter`。

请查看本文以获取更多信息：[WinRT XAML 从一页导航到另一页：它与 Windows Phone 7 有何不同](http://mikaelkoskinen.net/winrt-xaml-navigating-from-page-to-page-how-it-differs-from-windows-phone-7/)

**编辑 1：**

根据您的评论，您希望应用程序中的母版页功能。所以我建议你检查一下：[Windows 8 XAML Tips - Master Pages](http://www.reflectionit.nl/Blog/2013/windows-8-xaml-tips-master-pages)。

此外，我建议您查看[Windows Store Apps samples](http://code.msdn.microsoft.com/windowsapps/)。它也有你想要的用户界面，它有页眉和页脚，各种场景显示在中心。

# jquery - 最初显示 div 透明并通过 jquery 显示突出或清晰

> ID：15758376
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:21:34.287
> 
> 标签：jquery

假设我有链接，并且我希望当人们单击该链接时，DIV 会出现在页面中心的初始透明处，并逐渐通过 jquery 变得突出或清晰。

这是一个示例页面。只需转到链接[http://www.purolator.com/purolator/ship-track/tracking-summary.page](http://www.purolator.com/purolator/ship-track/tracking-summary.page)并将**602336548147**放入文本框中，然后单击跟踪按钮。然后出现一个表格数据，其中包含另一个名为“**验证条目/优化搜索”的链接**

只需单击该链接并查看 div 如何显示效果并在调整大小时保持在页面中心。我想模仿这种效果。所以请指导我如何使用 jquery 做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:23:47.253

您想要的称为模态窗口。您可以使用[Simple jQuery Modal Window Tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)制作类似的效果。

你需要有一个`div`已经有或没有的内容，但应该存在。您只需将其定位并在此处显示：

```
<script>

$(document).ready(function() {  

    //select all the a tag with name equal to modal
    $('a[name=modal]').click(function(e) {
        //Cancel the link behavior
        e.preventDefault();
        //Get the A tag
        var id = $(this).attr('href');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000); 

    });

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();
        $('#mask, .window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });         

});

</script> 
```

# c# - 无法隐式转换类型'System.Collections.Generic.IEnumerable '到'字符串

> ID：15758390
> 
> 赞同：1
> 
> 时间：2013-04-02T07:21:58.090
> 
> 标签：c#

我想知道我的代码有什么问题：

```
var trimmed = RemoveFromStart(Slb, new String[]{ "ab", "Ac", "Accep", "Acces", "Accessible", "AccessibleE" });

var uniqueItems = trimmed.Distinct();

rtb.SelectedText = uniqueItems; 
```

指向“uniqueItems”的错误。

```
//Replacing Parameter:
        public string RemoveFromStart(string s, IEnumerable<string> strings)
        {
        foreach (var x in strings.Where(s.StartsWith))
        {
            return s.Remove(0, x.Length);
        }
         return s;
        } 
```

我只是希望每个字符串都是唯一的，即使“Ac”是最短的字符串，“Accep”仍然存在。

任何人都可以帮助我如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:24:17.987

An`IEnumerable<Char>`不是 a `string`，因此如果需要，可以使用[构造函数](http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx)：

```
rtb.SelectedText = new String(uniqueItems.ToArray()); 
```

如果你想在你的缩写列表中找到第一个匹配的字符串：

```
var abbreviations = new String[] { "ab", "Ac", "Accep", "Acces", "Accessible", "AccessibleE" };
string abbr = abbreviations.FirstOrDefault(a => Slb.StartsWith(a));
rtb.SelectedText = abbr ?? Slb; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:25:12.270

由于[`Enumerable.Distinct()`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)方法返回`IEnumerable<T>`（在这种情况下`IEnumerable<Char>`）显然不是 a `string`，因此您可以将其与`char[]`构造函数一起使用来初始化它。

```
rtb.SelectedText = new String(uniqueItems.ToArray()); 
```

> *将 String 类的新实例初始化为 Unicode 字符数组指示的值。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:27:08.800

您是否检查了`Distinct`在这种情况下返回的内容，`IEnumerable<char>`因此您必须使用构造函数重载将其转换为字符串`char[]`

因此您可以执行 a`new string(trimmed.Distinct().ToArray())`并将其分配给期望字符串的 SelectedText

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:26:13.683

您需要将其转换为字符串。它不会自动转换。

```
var uniqueItems = trimmed.Distinct();
rtb.SelectedText = new string(uniqueItems); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T07:26:53.920

您正在返回 a`string`并使用`Distinct()`来获取唯一字符，这将返回为`IEnumerable<char>`. Tou 需要将其转换回`string`某种方式，这是一种方法：

```
rtb.SelectedText = string.Join(string.Empty, uniqueItems); 
```

# amazon-web-services - 在java中以编程方式检索亚马逊订单历史

> ID：15758395
> 
> 赞同：13
> 
> 时间：2013-04-02T07:22:12.920
> 
> 标签：amazon-web-services, screen-scraping, amazon

我想登录我的亚马逊帐户并在 java 中以编程方式检索购买历史记录。做了很多研究，遇到了屏幕抓取。这是唯一的方法还是亚马逊提供用于登录和检索购买历史的 API？还研究了 AWS，但它太混乱了。有很多 api 无法确定使用哪一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:43:41.127

看起来亚马逊没有提供一个 API 来专门做你需要的事情，但是我遇到了[这个线程。](https://webmasters.stackexchange.com/questions/5801/amazon-web-service-to-get-purchase-data)你可能已经看过了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-27T11:12:15.663

我遇到了同样的问题，但没有找到用于检索购买历史记录的公共 Amazon API。

所以，我构建了一个 Chrome 扩展来解决它。该 repo 是[开源的，可在此处获得](https://github.com/ElishaKay/udemy-fullstack-chrome-extension)。

我还建立了一个 Udemy 课程，它基本上审查了代码库：[https ://www.udemy.com/course/build-a-full-stack-chrome-extension-with-nodejs-and-mongdb](https://www.udemy.com/course/build-a-full-stack-chrome-extension-with-nodejs-and-mongdb)

这是 Chrome 扩展程序：[Amazon Scraper King](https://chrome.google.com/webstore/detail/my-amazon-history/epmjnoajehdombhjonaoifmhbkkflnli)

我还构建了一个网络应用程序，它使您能够获取您的亚马逊历史记录并[创建一个社交购物档案](https://myamazonhistory.com)。

# java - 如何使用 GCM 从 Java 服务器向 Android 应用发送通知？

> ID：15758402
> 
> 赞同：22
> 
> 时间：2013-04-02T07:22:44.363
> 
> 标签：java, android, web-services, google-cloud-messaging

我有一个使用 REST Web 服务的简单 Android 应用程序。现在我想使用 GCM 从我的 REST Web 服务向 Android 应用程序发送通知。

这是怎么做的？这个要求有什么简单的教程吗？我搜索并找到了 Google API，但我不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:52:42.523

我为 GCMUtils 项目创建了一个基于 Java 的测试服务器，作为 Maven 插件实现： [https ://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server](https://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server)

这是源代码：[https ://github.com/jarlehansen/gcmutils/tree/master/gcm-test-server](https://github.com/jarlehansen/gcmutils/tree/master/gcm-test-server)

maven插件的来源：[https ://github.com/jarlehansen/gcmutils/tree/master/gcmutils-maven-plugin](https://github.com/jarlehansen/gcmutils/tree/master/gcmutils-maven-plugin)

也许这可以帮助您入门？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-21T15:00:08.740

这是一个用于将通知从 java 发送到应用程序 android 的功能。此代码使用 JSONObject，您必须将此 jar 添加到项目构建路径中。

注意：我使用 fcm

```
 import java.io.OutputStreamWriter;
 import java.net.HttpURLConnection;
 import java.net.URL;

import org.json.JSONObject;

public class FcmNotif {
  public final static String AUTH_KEY_FCM ="AIzB***********RFA";
  public final static String API_URL_FCM = "https://fcm.googleapis.com/fcm/send";

// userDeviceIdKey is the device id you will query from your database

public void pushFCMNotification(String userDeviceIdKey, String title, String message) throws Exception{

String authKey = AUTH_KEY_FCM;   // You FCM AUTH key
String FMCurl = API_URL_FCM;     

URL url = new URL(FMCurl);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();

conn.setUseCaches(false);
conn.setDoInput(true);
conn.setDoOutput(true);

conn.setRequestMethod("POST");
conn.setRequestProperty("Authorization","key="+authKey);
conn.setRequestProperty("Content-Type","application/json");

JSONObject json = new JSONObject();
json.put("to",userDeviceIdKey.trim());
JSONObject info = new JSONObject();
info.put("title", title); // Notification title
info.put("body", message); // Notification body
info.put("image", "https://lh6.googleusercontent.com/-sYITU_cFMVg/AAAAAAAAAAI/AAAAAAAAABM/JmQNdKRPSBg/photo.jpg");
info.put("type", "message");
json.put("data", info);
System.out.println(json.toString());

OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(json.toString());
wr.flush();
conn.getInputStream();
}
} 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T11:45:28.853

> 按照此网址 [https://firebase.google.com/docs/cloud-messaging/send-message](https://firebase.google.com/docs/cloud-messaging/send-message)

**FCM 网址**

```
private String ANDROID_NOTIFICATION_URL = "https://fcm.googleapis.com/fcm/send" 
```

**通知键**

```
private String ANDROID_NOTIFICATION_KEY = "Your key"; 
```

**Java 代码**

```
private void sendAndroidNotification(String deviceToken,String message,String title) throws IOException {
        OkHttpClient client = new OkHttpClient();
        MediaType mediaType = MediaType.parse("application/json");
        JSONObject obj = new JSONObject();
        JSONObject msgObject = new JSONObject();
        msgObject.put("body", message);
        msgObject.put("title", title);
        msgObject.put("icon", ANDROID_NOTIFICATION_ICON);
        msgObject.put("color", ANDROID_NOTIFICATION_COLOR);

        obj.put("to", deviceToken);
        obj.put("notification",msgObject);

        RequestBody body = RequestBody.create(mediaType, obj.toString());
        Request request = new Request.Builder().url(ANDROID_NOTIFICATION_URL).post(body)
                .addHeader("content-type", CONTENT_TYPE)
                .addHeader("authorization", "key="+ANDROID_NOTIFICATION_KEY).build();

        Response response = client.newCall(request).execute();
        logger.debug("Notification response >>>" +response.body().string());
    } 
```

而已 ！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T06:03:01.657

1.  包 com.test;

    导入 java.io.BufferedReader；导入 java.io.IOException；导入 java.io.InputStreamReader；导入 java.io.OutputStream；导入 java.net.HttpURLConnection；导入 java.net.URL；

    公共类 Firebase {

    ```
    public static void main(String[] args) throws IOException {         final 
    ```

    字符串 apiKey = "AAAAqf1B9uQ:**********_1MoeQBVPbVROXuyD4ERyV-i6nva0LAic9uRotN80C9utoaGL9Sp1GjrPr5-mtJBlxVNbuqG1zeg9LBnslZw-vyud3jW-11SWDfLBB26bcHuAi8bdnQCPcj3DWKX2h"; URL url = 新 URL(" [https://fcm.googleapis.com/fcm/send](https://fcm.googleapis.com/fcm/send) "); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); System.setProperty("javax.net.debug","all"); conn.setDoOutput(true); conn.setRequestMethod("POST"); conn.setRequestProperty("Content-Type", "application/json"); conn.setRequestProperty("授权", "key=" + apiKey);

    ```
     conn.setDoOutput(true);

        String input = "{\r\n\"to\": 
    ```

    \"fdaxKOmRcAI:APA91bEXILacYEjypsbusKXHV_TuEzt_vsqhI5OxH-******************-l2qGIORSiE0W5B2d74yjXAz60l\", \r\n\"通知\": {\r\n\"title\" : \" title \",\r\n\"body\" : \" 单个vijay的正文\"\r\n}\r\n}";

    ```
     OutputStream os = conn.getOutputStream();       os.write(input.getBytes());         os.flush();         os.close();

        int responseCode = conn.getResponseCode();
        System.out.println("\nSending 'POST' request to URL : " + url);
        System.out.println("Post parameters : " + input);
        System.out.println("Response Code : " + responseCode);

        BufferedReader in = new BufferedReader(new 
    ```

    InputStreamReader(conn.getInputStream())); 字符串输入线；StringBuffer 响应 = new StringBuffer();

    ```
     while ((inputLine = in.readLine()) != null) {
            response.append(inputLine);         }       in.close();

        // print result         System.out.println(response.toString());

    } 
    ```

    }

    1.  项目清单

# url - 我的网站 URL 重定向

> ID：15758409
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:23:04.937
> 
> 标签：url, web, http-redirect

我有一个网站 www.gkduniya.com，大约 6 个月大。但是从今天开始，如果我输入该 URL，它就会重定向到 www.gkduniya.com/#gsc.tab=0。为什么这个 /#gsc.tab=0 在 URL 后面添加。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:50:25.473

同样的问题。我使用谷歌 CSE。当我删除它时，网址是正常的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:37:11.033

到目前为止，唯一的解决方案是禁用谷歌的自定义搜索引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:19:27.410

我也面临这个问题。正如我发现的那样，这是因为谷歌自定义搜索引擎。在页面上添加。

# wpf - 如何限制 PDF 文件中的颜色通道

> ID：15758411
> 
> 赞同：1
> 
> 时间：2013-04-02T07:23:10.563
> 
> 标签：wpf, pdf, printing, acrobat, cmyk

我创建了一个 WPF 系统，它使用 CMYK 颜色并且仅适用于两个通道：黑色和洋红色。我遇到的问题是当我将输出打印到 Adob​​e Acrobat 打印机时，生成的 PDF 文件在所有四个通道中都有输出，例如：

当我有一个灰色阴影时，生成的输出使用所有四个通道的混合来再现为灰色，这不是我想要的：我的输出将进入一个只有洋红色和黑色通道的印刷系统。

似乎 pdf 打印机不尊重打印文档中的 CMYK 值，并使用它们的 RGB 值来猜测一个好的 CMYK 等效值。

如何强制 PDF 尊重我的颜色值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:36:34.973

我猜问题出在 Windows 打印子系统上，它在此过程中执行了一些 CMYK->RGB->CMYK 转换。PDF 打印机并不是真正为创建此类专用 PDF 文件而设计的。
我的建议是使用可以生成 PDF 文件并让您完全控制 PDF 文件中的颜色的第 3 方 PDF 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:24:50.640

在创建 CMYK-pdf 时，我使用 websupergoos [ABCpdf 。](http://www.websupergoo.com/abcpdf-1.htm)你要花几块钱...

# liferay-6 - 无法在 Liferay 中找到 Freemarker 模板

> ID：15758413
> 
> 赞同：0
> 
> 时间：2013-04-02T07:23:34.597
> 
> 标签：liferay-6, freemarker

我正在使用 Liferay 开发我的应用程序，并希望使用 freemarker 开发模板。

我只是在测试freemarker。当我部署我的应用程序时，它说找不到模板。我知道模板文件应该在 src 文件夹中。所以我在 docroot.WEB-INF/src 文件夹中创建了 helloworld.ftl 并在代码中我尝试使用语句访问它

```
Configuration cfg = new Configuration();
Template template = cfg.getTemplate("src/helloworld.ftl"); 
```

错误如下：

```
java.io.FileNotFoundException: Template src/helloworld.ftl not found. 
```

我应该如何给出我的文件夹路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:07:04.390

嘿，我想出了问题所在。在这里我会分享它。在获取模板之前我没有加载模板:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:36:49.150

您需要`PortletContext`为您的 portlet 获取 ahold，并使用它`getRealPath`来获取文件的实际路径：

```
String realPath = portletContext.getRealPath("WEB-INF/src/helloworld.ftl");
Template template = cfg.getTemplate(realPath); 
```

显然，您真的需要“WEB-INF/src”的路径，您可以将路径附加到特定的 FTL 文件。

# linux - 写模式管道是同步的吗？

> ID：15758416
> 
> 赞同：0
> 
> 时间：2013-04-02T07:23:45.710
> 
> 标签：linux, pipe

下面的代码会在调用 abort() 之前等待命令执行完成吗？如果它没有并且父进程被中止，那么子进程（bash shell）是否还活着并继续执行命令。

```
FILE *_popenShell = NULL;
_popenShell = popen("/bin/bash","w");
fwrite("some_command", 1, SOME_SIZE, _popenShell);
fflush(_popenShell);        
pclose(_popenShell);        
abort(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:52:05.757

[`pclose()`](http://man7.org/linux/man-pages/man3/pclose.3.html)等到孩子终止（使用`wait4()`）。孩子不应该在你打的时候跑`abort()`。

# neo4j - 如何在neo4j中找到最大的连通子图

> ID：15758420
> 
> 赞同：2
> 
> 时间：2013-04-02T07:24:00.607
> 
> 标签：neo4j, subgraph

是的，就像标题说的，我在neo4j中存储了一个社交图，大约100万个节点和2000万个关系，我想得到最大的连通子图，这样我就可以继续我的工作了。现在我编写了一个程序来做到这一点，我使用 DFS() 来找到最大的连接子图。如果它是健全的，我删除那些未连接的节点。但是需要3个小时.....所以我的问题是：有没有更有效的算法来找到最大的连通子图？任何建议都会有所帮助~谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:48:17.047

试试这个，它对我来说很好：

```
START input=node:user(your lucene index)
MATCH path = input-[:YOUR_REL*1..]->m WHERE NOT(m-[:YOUR_REL]->())
RETURN path 
```

你可以看看这个[找到最长的路径](https://groups.google.com/forum/?fromgroups#!topic/neo4j/4tLVSSKnn_M)

# itextsharp - 使用 itextsharp 从 Pdf 中提取字体颜色

> ID：15758422
> 
> 赞同：1
> 
> 时间：2013-04-02T07:24:04.707
> 
> 标签：itextsharp

我想从 PDF 中提取颜色如果使用 itextsharp 从 pdf 中使用颜色提取和字体颜色突出显示文本。任何人都可以介绍如何从 pdf 中提取颜色。感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T06:28:52.067

```
int r = renderInfo.GetColorNonStroke().R;
int g = renderInfo.GetColorNonStroke().G;
int b = renderInfo.GetColorNonStroke().B; 
```

# javascript - Joomla 1.5 中的电子邮件隐藏功能是否有用？更好的选择？

> ID：15758423
> 
> 赞同：0
> 
> 时间：2013-04-02T07:24:05.110
> 
> 标签：javascript, joomla1.5, spam-prevention

我刚刚注意到 Joomla 1.5 中用于隐藏电子邮件的内置插件没有像预期的那样工作。事实证明，谷歌现在可以处理暴露电子邮件地址的 JavaScript。我想垃圾邮件发送者很容易创建一个脚本，在每个域名的开头使用“@”符号搜索每个域名，以公开每个网站上的所有电子邮件地址。

我喜欢 Joomla 中的反垃圾邮件功能，因为它可以毫不费力地完成这项工作。访问者不会遇到任何问题，电子邮件和电子邮件链接会像往常一样出现在他们面前。我不喜欢使用表单或烦人`CAPTCHA's`的 . 我的理念是不应该因为垃圾邮件发送者而影响可用性。我确实使用并且我确实推荐垃圾邮件隔离区，但如果电子邮件地址一开始就没有暴露和出售，那会更好并节省一些时间。

所以我的问题是，如果我的观察是正确的，即 JavaScript 电子邮件保护现在已经过时，那么对可用性影响最小的替代方案是什么？

# objective-c - 使用 dequeueResuableCellWithIdentifier 时的 sigarbt

> ID：15758424
> 
> 赞同：0
> 
> 时间：2013-04-02T07:24:10.957
> 
> 标签：objective-c, uitableview, sigabrt

使用故事板和表格视图，我的应用程序运行良好，直到我添加了另一个 ViewController 并对新控制器进行了推送。我将 segue 连接到单元格中的附件上。现在我在代码行收到错误信号

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"]; 
```

> 由于未捕获的异常 NSUnknownKeyException
> 原因而终止应用程序：[ setValue:forUndefinedKey:]：此类与键附件ActionSegueTemplate 的键值编码不兼容。

请询问更多信息，因为我意识到我从一开始并不总是很清楚，我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:57:16.207

您已删除在 nib（或故事板）中使用的类之一中命名的插座`accessoryActionSegueTemplate`，但您没有断开 IB 中的插座。在运行时 nib 加载尝试使用键值编码建立连接，因为它找不到键（出口）而抛出。

编辑：有时在巨大的故事板上找到东西并不容易。它可以帮助在源代码中进行搜索。为此，请在 Project Navigator 中右键单击该文件，然后选择 Open As → Source Code。故事板是可读性很强的 XML 文件。您将了解在界面中的搜索位置。

# xslt-1.0 - 使用 xslt 将源 xml 转换为另一个 xml

> ID：15758427
> 
> 赞同：0
> 
> 时间：2013-04-02T07:24:13.947
> 
> 标签：xslt-1.0

我正在考虑将源输入 xml 转换为输出 xml 格式，具体取决于单个记录`<Student>`是`<teacher>`

> **输入 xml**：

```
<staff>
 <record>
    <Student>
      <field name="LastName">Dtext</field>
      <field name="FirstName"></field>
      <field name="Class">5</field>
      <field name="Email">Dtext-user33@nova.com</field>
   </Student>
</record>   
<record>   
   <Student>
    ....
   </Student>
</record> 
<record>
   <Teacher>
      <field name="LastName">Dtext-user35</field>
      <field name="FirstName"></field>
      <field name="Email">Dtext-user35@nova.com</field>
      <field name="Experience">10</field>
       <field name="Qualification"></field>
   </Teacher>
</record>
  ....
  .... 
```

> **输出xml：**

```
<input>
<add user="Student" >
  <add-value value-name="LastName">
    <value type="string">Dtext</value>
  </add-value>
  <add-value value-name="FirstName">
    <value type="string"></value>
  </add-value>
  <add-value value-name="class">
    <value type="string">5</value>
  </add-value>
  <add-value value-name="Email">
    <value type="string">Dtext-user33@novell.com</value>
  </add-value>
</add> 
```

或者

```
<input>
<add user="Teacher" >
  <add-value value-name="LastName">
    <value type="string">Dtext-user35</value>
  </add-value>
  .... 
```

下面是我目前正在工作的代码片段。由于某种原因，这不起作用。

```
<xsl:template match="/">
    <xsl:choose>
        <xsl:when test="staff">           
                 <xsl:for-each select="staff/record">
                    <xsl:when test="name(./*[1])= 'Student'">
                        <xsl:apply-template select = "Student"/>
                    </xsl:when>
                    <xsl:otherwise>
                         <xsl:apply-template select = "Teacher">
                    </xsl:otherwise>
                  </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy-of select="."/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
<xsl:template match="Student">  
    <input> 
      <add user="Student">
        <xsl:for-each select="field[string()]">
         <xsl:variable name="fieldValue" select="normalize-space(.)"/>
         <add-value value-name="{@name}">
           <value type="string">
             <xsl:value-of select="$fieldValue"/>
           </value>
         </add-value>
       </xsl:for-each>
       </add>
    </input>
    </xsl:template>
</xsl:stylesheet>
<xsl:template match="Teacher">  
    <input> 
      <add user="Teacher">
        <xsl:for-each select="field[string()]">
         <xsl:variable name="fieldValue" select="normalize-space(.)"/>
         <add-value value-name="{@name}">
           <value type="string">
             <xsl:value-of select="$fieldValue"/>
           </value>
         </add-value>
       </xsl:for-each>
       </add>
    </input>
    </xsl:template>
</xsl:stylesheet> 
```

需要对代码进行哪些更正才能使其正常工作..？

> **编辑：**纠正了我代码中的所有愚蠢错误。但就输出而言仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:22:46.383

好的，我终于有时间使用 Visual Studio 调试 XSLT（如果可以的话，我强烈建议您使用 XSLT 调试器）

这是您的 XSLT 文件的外观：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
      <xsl:choose>
        <xsl:when test="staff">
          <xsl:for-each select="staff/record">
            <xsl:choose>
            <xsl:when test="name(./*[1])= 'Student'">
              <xsl:apply-templates select = "Student" />
            </xsl:when>
            <xsl:otherwise>
              <xsl:apply-templates select = "Teacher" />
            </xsl:otherwise>
            </xsl:choose>
          </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy-of select="."/>
        </xsl:otherwise>
      </xsl:choose>
  </xsl:template>
  <xsl:template match="Student">
    <input>
      <add user="Student">
        <xsl:for-each select="field[string()]">
          <xsl:variable name="fieldValue" select="normalize-space(.)"/>
          <add-value value-name="{@name}">
            <value type="string">
              <xsl:value-of select="$fieldValue"/>
            </value>
          </add-value>
        </xsl:for-each>
      </add>
    </input>
  </xsl:template>
  <xsl:template match="Teacher">
    <input>
      <add user="Teacher">
        <xsl:for-each select="field[string()]">
          <xsl:variable name="fieldValue" select="normalize-space(.)"/>
          <add-value value-name="{@name}">
            <value type="string">
              <xsl:value-of select="$fieldValue"/>
            </value>
          </add-value>
        </xsl:for-each>
      </add>
    </input>
  </xsl:template>
</xsl:stylesheet> 
```

基本上，除了我在评论中告诉您的错误之外，您忘记将循环的 and 包装在元素`<xsl:when>`中。`<xsl:otherwise>``for-each``<xsl:choose>`

# python - 第二次调用时无法从python模块获取函数

> ID：15758438
> 
> 赞同：1
> 
> 时间：2013-04-02T07:25:07.247
> 
> 标签：python, python-c-api

下面是 c++ 代码，它将在同一目录中调用我的 python 脚本“rule.py”。

```
#include <Python.h>
#include <iostream>
using namespace std;

int dou(int a)
{
    PyObject *pModule, *pDict, *pFunc, *pArgs, *pRetVal;
    if( !Py_IsInitialized() ){
        cout<<"Can't initialize"<<endl;
        return -1;
    }
    PyRun_SimpleString("import sys");
    PyRun_SimpleString("sys.path.append('.')");
    pModule = PyImport_ImportModule("rule");
    if( !pModule ){
        cout<<"can' import the module "<<endl;
        return -1;
    }
    pDict = PyModule_GetDict(pModule);
    if( !pDict ){
        cout<<"can't get the dict"<<endl;
        return -1;
    }
    pFunc = PyDict_GetItemString(pDict, "fun");
    if( !pFunc || !PyCallable_Check(pFunc) ){
        cout<<"can't get the function"<<endl;
        return -1;
    }

    pArgs = PyTuple_New(1);
    PyTuple_SetItem(pArgs,0,Py_BuildValue("i",a));
    pRetVal = PyObject_CallObject(pFunc,pArgs);

    int result = PyInt_AsLong(pRetVal);

    Py_DECREF(pModule);
    Py_DECREF(pDict);
    Py_DECREF(pFunc);
    Py_DECREF(pArgs);
    Py_DECREF(pRetVal);

    return result;
}
int main(void)
{
    Py_Initialize();
    cout<<dou(2)<<endl;
    cout<<dou(3)<<endl;
    Py_Finalize();
    return 0;
} 
```

这是简单的python代码。

```
def fun(a):
    return 2*a
if __name__ == "__main__":
    print fun(2) 
```

输出是：

```
4
can't get the function.
-1 
```

它第一次工作，但第二次调用它时无法获得该功能。也许我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:38:48.663

`PyModule_GetDict()`返回一个借来的引用。这意味着您不能减少其引用计数，否则模块 dict 将被破坏。

您的代码段中有很多错误。我想你可以试试 boost::python。并仔细阅读 Python 手册，尤其是在引用计数管理方面。

# java - 当它应该为真时，递归返回假

> ID：15758443
> 
> 赞同：1
> 
> 时间：2013-04-02T07:25:13.223
> 
> 标签：java, if-statement, boolean

我正在进行单词匹配递归，但是遇到了问题。我有一个 if 语句，如果该语句为真，它将返回真。我有一个 system.print 行来测试它是否真的运行正确并且确实如此。但是，当该方法假定返回 true 时，它​​返回 false。抱歉，如果我不清楚，我希望我的代码可以清除它。

```
public class A10 {

    public static int counter = 3;

    public static boolean match(String x, String y) {
        // If the x string's letter at place 'counter' is the same as y string's letter at place counter.
        if ((counter) >= x.length()) {
            System.out.println("RUNNING THIS METHOD");
            return true;
        }

        if (x.charAt(counter) == y.charAt(counter)) {
            counter++;
            match(x, y);
        }

        return false;

    }

    public static void main(String[] args) {
        System.out.println(match("asdfasdf", "asdfasdf"));
    }
} 
```

当你运行它时，它会打印“运行这个方法”，但是它会返回 false，当它应该返回 true 时......有人可以告诉我是什么原因造成的以及我将如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T07:27:03.737

**当`match()`递归调用自身时，它会忽略返回值。**

因此如下：

```
 match(x, y); 
```

应该

```
 return match(x, y); 
```

我还建议你`counter`变成一个论点，从而摆脱`static`状态：

```
public static boolean match(String x, String y) {
    return match_helper(x, y, 0);
}

private static boolean match_helper(String x, String y, int counter) {
    if (counter >= x.length()) {
        return true;
    }

    if (x.charAt(counter) == y.charAt(counter)) {
        return match_helper(x, y, counter + 1);
    }

    return false;
}

public static void main(String[] args) {
    System.out.println(match("asdfasdf", "asdfasdf"));
} 
```

您当前的版本`match()`不能多次使用，因为它会无意中在调用之间保持状态。上面提议的版本没有这个缺陷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:27:48.143

你应该`return match(x, y);`在你的第二个`if`。这是递归的主要原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:29:21.320

只有被调用函数的第一个实例返回输出。但只有 counter >= x.length() 的实例具有显示文本的副作用。

# primefaces - p:datatable 的 var 属性在标题方面为空

> ID：15758452
> 
> 赞同：1
> 
> 时间：2013-04-02T07:25:57.013
> 
> 标签：primefaces, jsf-2

我有这样的数据表：

```
 <p:dataTable value="#{noteMB.noteList}" var="noteItem" id="noteListTable" 
        rowKey="#{noteItem.hashCode()}" selectionMode="single"  selection="#noteMB.selectedNote}" paginator="true" rows="10" paginatorPosition="top"
        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15">

    <p:column width="300">
       <f:facet name="header">
            <h:outputText value="#{noteItem.name == 'blabla' ? 'true' : 'false' }"  />
       </f:facet> 
            <h:outputText value="#{noteItem.code}"  />
    </p:column>
  </p:dataTable> 
```

我的问题：为什么 noteItem 在 facet name="header" 区域为空？当我运行此代码时，标题（noteItem.name）为假，列值（noteItem.code）有一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:17:57.130

noteItem 是您的 var 条目。

`var="noteItem"`

假设这个 var 属性保存`dataTable`. var 将遍历`noteList`.

正如丹尼尔所说，在`h:facet`标记期间，甚至没有开始创建行。它是每列的主标题，实际上没有数据表行。因此，您在那里得到空值。

简而言之，您无法访问构面中 var 属性给出的对象。因为**构面是行独立的**。

# android - 服务管理器和背景音乐的问题

> ID：15758455
> 
> 赞同：0
> 
> 时间：2013-04-02T07:26:04.183
> 
> 标签：android, service, andengine, background-music

我有一个类扩展了播放我的应用程序背景音乐的服务管理器。当您退出应用程序时，服务会完全停止，但是当您使用 Home 按钮退出应用程序时，背景音乐会停止，但后者会恢复而不返回应用程序。会是什么？

谢谢。

我的服务：

```
public class MusicManager extends Service  implements MediaPlayer.OnErrorListener{

private final IBinder mBinder = new ServiceBinder();
MediaPlayer mPlayer;
private int length = 0;

String[] myMusic = {"mfx/Track01.ogg", "mfx/Track02.ogg", "mfx/Track03.ogg"};        
private static int mUltimaPista = -1;

public MusicManager() { }

public class ServiceBinder extends Binder {
     public MusicManager getService()
     {
        return MusicManager.this;
     }
}

@Override
public IBinder onBind(Intent arg0){return mBinder;}

@Override
public void onCreate (){
  super.onCreate();

//Musica
  SiguienteCancion();        
  MusicFactory.setAssetBasePath("mfx/");
  AssetFileDescriptor afd = null;       
  try {
    afd = getAssets().openFd(myMusic[mUltimaPista]);
    mPlayer = new MediaPlayer();
    mPlayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
        afd.close();
        mPlayer.prepare();
    } catch (IllegalArgumentException e) {
        Log.d("Kids",e.getMessage());
    } catch (IllegalStateException e) { 
        Log.d("Kids",e.getMessage());           
    } catch (IOException e) {
        Log.d("Kids",e.getMessage());
    }        

  mPlayer.setOnCompletionListener(new OnCompletionListener() {            
      public void onCompletion(MediaPlayer mp) {
          mp.reset();
          mp.setVolume(0.25f, 0.25f);
          try {
            SiguienteCancion();
            MusicFactory.setAssetBasePath("mfx/");                   
              AssetFileDescriptor afd = getAssets().openFd(myMusic[mUltimaPista]);
              if (afd != null) {
                  mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
                  afd.close();
                  mp.prepare();
                  mp.setVolume(0.25f, 0.25f);
                  mp.start();
              }
          } catch (Exception ex) {
              // report a crash
            Log.d("Kids",ex.getMessage());
          }
      }
  });       

    mPlayer.setOnErrorListener(new OnErrorListener() {

  public boolean onError(MediaPlayer mp, int what, int
      extra){

        onError(mPlayer, what, extra);
        return true;
    }
      });
}

@Override
public int onStartCommand (Intent intent, int flags, int startId)
{
     mPlayer.start();
     return START_STICKY;
}

public void pauseMusic()
{
    if(mPlayer.isPlaying())
    {
        mPlayer.pause();
        length=mPlayer.getCurrentPosition();

    }
}

public void resumeMusic()
{
    if(mPlayer.isPlaying()==false)
    {
        mPlayer.seekTo(length);
        mPlayer.start();
    }
}

public void stopMusic()
{
    mPlayer.stop();
    mPlayer.release();
    mPlayer = null;
}

@Override
public void onDestroy ()
{
    super.onDestroy();
    if(mPlayer != null)
    {
    try{            
     mPlayer.stop();
     mPlayer.reset();        
     mPlayer.release();
        }finally {
            mPlayer = null;
        }
    }
}

public boolean onError(MediaPlayer mp, int what, int extra) {

    Toast.makeText(this, "music player failed", Toast.LENGTH_SHORT).show();
    if(mPlayer != null)
    {
        try{
            mPlayer.stop();
            mPlayer.release();
        }finally {
            mPlayer = null;
        }
    }
    return false;
}

// Obtenemos la siguiente canción a reproducir
public void SiguienteCancion()
{
    Random rand = new Random();
    int track = Math.abs(rand.nextInt() % 3);

    while (track == mUltimaPista)
    {
        track = Math.abs(rand.nextInt() % 3);
    }               

    mUltimaPista = track;
} 
```

}

主要活动：

```
private boolean mIsBound = false;
private MusicManager mServ;
private ServiceConnection Scon =new ServiceConnection()
{
    public void onServiceConnected(ComponentName name, IBinder service) {                       
        mServ = (MusicManager)((ServiceBinder) service).getService();
    }

    public void onServiceDisconnected(ComponentName name) {
        mServ = null;
    }
};

void doBindService(){
    bindService(new Intent(this,MusicManager.class),Scon,Context.BIND_AUTO_CREATE);
    mIsBound = true;
}

void doUnbindService()
{
    if(mIsBound)
    {
        unbindService(Scon);
        mIsBound = false;
    }
}

public void onCreateResources(OnCreateResourcesCallback pOnCreateResourcesCallback)
        throws Exception {                                                            
    Intent music = new Intent();
    music.setClass(this,MusicManager.class);
    startService(music);

    doBindService();

    pOnCreateResourcesCallback.onCreateResourcesFinished();
}
@Override
public void onResumeGame() {
    super.onResumeGame();

    if (mServ != null)
    {                   
        mServ.resumeMusic();                        
    }                                         
}
@Override
public void onPauseGame() {
    if (mServ != null)
    {           
        mServ.pauseMusic();
    }

    super.onPauseGame();                                                        
} 
```

其他活动：

```
private boolean mIsBound = false;
private MusicManager mServ;
private ServiceConnection Scon =new ServiceConnection()
{
    public void onServiceConnected(ComponentName name, IBinder service) {                       
        mServ = (MusicManager)((ServiceBinder) service).getService();
    }

    public void onServiceDisconnected(ComponentName name) {
        mServ = null;
    }
};

void doBindService(){
    bindService(new Intent(this,MusicManager.class),Scon,Context.BIND_AUTO_CREATE);
    mIsBound = true;
}

void doUnbindService()
{
    if(mIsBound)
    {
        unbindService(Scon);
        mIsBound = false;
    }
}
public void onCreateResources(
        OnCreateResourcesCallback pOnCreateResourcesCallback)
        throws Exception {

    doBindService();

    pOnCreateResourcesCallback.onCreateResourcesFinished();

}
 @Override
public void onResumeGame() {
    super.onResumeGame();

    if (mServ != null)
    {           
        mServ.resumeMusic();                        
    }
}

@Override
public void onPauseGame() {     
    super.onPauseGame();                

    if (mServ != null)
    {
        mServ.pauseMusic();
    }               
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:44:16.110

在您的主要活动中，将代码放在下面。

```
@Override
protected void onResume() {
    if (!SoundService.isMediaPlaying()) {
            startService(new Intent(Game.this, SoundService.class));
    }
}

@Override
protected void onPause() {
    stopService(new Intent(this, SoundService.class));
} 
```

还添加以下功能您的服务。

```
public static boolean isMediaPlaying() {
    if (bgMusic != null) {
        try {
            return bgMusic.isPlaying();
        } catch (Exception e) {
        }
    }

    return false;
} 
```

如果处理您的游戏的所有活动，则此活动的所有代码然后在恢复和暂停方法上设置布尔变量

# android - HttpConnectionParams 奇怪的语法错误

> ID：15758457
> 
> 赞同：0
> 
> 时间：2013-04-02T07:26:11.627
> 
> 标签：android, syntax

我确定有一些我只是没有看到的简单修复，但由于某种原因，下面的代码：

```
private HttpClient httpclient = new DefaultHttpClient();
HttpParams httpParameters = new BasicHttpParams(); 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
private Gson gson = new Gson(); 
```

给出语法错误，如下所示：http: [//i.imgur.com/JF8zxPG.png](http://i.imgur.com/JF8zxPG.png)

请帮忙，我不知道为什么这些在语法上不正确，它试图告诉我我需要删除括号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:30:49.023

您试图`setConnectionTimeout()`在类体中调用函数 ()，而不是在方法体中。

将`HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);`and移动`HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);`到某个方法（例如构造函数），例如：

```
private HttpClient httpclient = new DefaultHttpClient();

public void initialize () {
  HttpParams httpParameters = new BasicHttpParams(); 
  int timeoutConnection = 3000;
  HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
  int timeoutSocket = 5000;
  HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
}

// rest of the code 
```

此外，为什么需要两个实例`HttpClient`？

# c# - 当每天指定费率时，如何计算几天内的停车费？

> ID：15758461
> 
> 赞同：6
> 
> 时间：2013-04-02T07:26:30.767
> 
> 标签：c#, algorithm

我必须计算持卡人的总计费金额，用于基于卡的停车场访问。我的费率结构是这样的。停车场的每个区域都会有这些价格的优先列表。

```
public partial class HourlyPrice
{
    public int Id { get; set; }
    public int DayId { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
    public int MinHour { get; set; }
    public int MaxHour { get; set; }
    public decimal Price { get; set; }
} 
```

`DayId`允许例如“从 13:00 开始的周日免费”。`MinNour`并且“MaxHour”允许 0 到 2 小时是免费的，其中 5 到 6 小时需要 R11.00。`StartTime`并`EndTime`允许“18h00 后费用 R7.00，统一费率”。

我担心的是没有指定多日价格。当一辆汽车在某一天进入一个价格结构，并在另一天退出另一个价格结构。在我看来，这就像我必须按顺序访问车辆停放的每个小时并累积到期金额。这似乎是一种非常昂贵的做事方式。

任何关于这种努力的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:50:01.833

我认为这个库应该可以解决你所有的问题：

[http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:44:43.483

您可以将每个特定日期的定价策略存储在间隔树中。树应该存储一天中的所有时间。除了小时范围外，还应保存一些信息：

*   一个布尔单位：定价单位是额定的吗？（例如，R7.00 为间隔的所有时间段）
*   整数价格：周期内一小时的成本。如果`flat`设置为 true，则这是整个期间的成本。

您在输入中获得停车记录。我认为它们是汽车到达和离开时间的时间戳。前两个小时是免费的，因此您将到达时间“增加”了两个小时。根据生成的时间戳，您可以构建一个三元组序列（*天*、*开始时间*、*结束时间*）。它可能是空的（如果车主停车不到两个小时），这种情况是微不足道的：花费 R0.00

现在，处理序列的算法应该如下所示：

```
cost <- 0
while (NOT is_empty(sequence)) {
    dayTriplet <- pop(sequence)
    down <- dayTriplet.StartTime
    up <- dayTriplet.EndTime
    pricingTree <- getPriceTree(dayTriplet.dayId)
    while (down < up) {
        node <- findNode(pricingTree, down)
        nbHours <- min(up, node.up) - down
        if (node.flat) {
            cost <- cost + node.price
        } else {
            cost <- cost + nbHours*node.price
        }
        down <- down + nbHours
    }
} 
```

该算法有点错误，但我觉得它背后的想法值得一试。例如，如果一辆汽车在一天 18:00 之后停到第二天 4:00，这个算法会解析 (d, 18, 24) 和 (d+1, 0, 4)，因此车主应该支付两倍的费用期间的比率，而不是只有一次。一个类似进位的系统应该可以解决这个问题。我只是没有集成它留下一个相对清晰的算法。

# python - 将 Python 期货用于没有结果的任务是个好主意吗？

> ID：15758479
> 
> 赞同：2
> 
> 时间：2013-04-02T07:27:18.483
> 
> 标签：python, asynchronous, future, concurrent.futures

`concurrent.futures`问题出现了，当我开始使用这样的模块在对象上实现异步 set 和 get 操作时：

```
import time
from concurrent.futures import ThreadPoolExecutor

executor = ThreadPoolExecutor(max_workers=2)

class Foo(object):
    def set_something(self):
        def long_running_setter():
            time.sleep(1.5)
            print('Set something')
        return executor.submit(long_running_setter)

    def get_something(self):
        def long_running_getter():
            time.sleep(0.5)
            return 'something'
        return executor.submit(long_running_getter)

foo = Foo()
future = foo.get_something()
print("Got " + future.result()) 
```

但是现在，设置一个值并等待它使用起来有点尴尬，并且在语义上“不正确”

```
foo.set_something().result() 
```

虽然我觉得它仍然有效，因为`Foo`对象处于最低级别，并且可以在期货之上构建进一步的抽象。

所以，总结一下我的问题：

*   期货是从对象异步获取/设置值的正确抽象吗？特别是对于不返回任何值的设置器？
*   我应该添加一个`blocking`参数以`set_something`摆脱`result()`调用吗？我对这种方法持怀疑态度，因为那样我会鼓励根本不要使用期货。
*   你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-12T15:55:39.770

如果必须先完成操作才能继续超过代码中的某个点，则需要某种方式来阻止/加入/等待。

Python[属性](https://docs.python.org/3/library/functions.html#property)比 Java 风格的 getter 和 setter（如`obj.get_x`和`obj.set_x`）更受欢迎。因为属性伪装成常规属性，所以由属性触发异步代码是不好的风格。

许多人发现面向对象让他们在使用异步代码时遇到了麻烦，他们更喜欢使用功能性更强的风格。幸运的是，Python 支持使用任何一种编程范式。

# jsf - 如何动态地将 id(s) 添加到 primefaces 组件？

> ID：15758482
> 
> 赞同：4
> 
> 时间：2013-04-02T07:27:31.867
> 
> 标签：jsf, primefaces, datatable, facelets, uirepeat

我有一个要求，我需要在表单上显示将从数据库中检索的组件。我能够在数据表和 ui 重复的帮助下显示组件。我还需要为这些组件包含工具提示功能，每个组件都需要一个 ID。有什么方法可以动态地将 id(s) 添加到组件中。

```
<p:dataTable styleClass="borderless" id="rdResultTable" var="result"
    value="#{RequestBean.radioList}" rendered="#{not empty RequestBean.radioList}">

    <p:column style="width:150px;">
        <f:facet name="header">
            <h:outputText value=" " />
        </f:facet>
        <h:outputText value="#{msg[result.field_label]}"/>
    </p:column>
    <p:column>
        <f:facet name="header">
            <h:outputText value="" />
        </f:facet>
        <ui:repeat value="#{RequestBean.radioList}" var="itm">
            <p:inputText  value="#{itm.indFieldValue}"
            rendered="#{result.level_id==itm.level_id and  result.field_type=='textbox'}">
            </p:inputText>
        </ui:repeat>
    </p:column>
</p:dataTable> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-22T19:41:43.817

你不需要。JSF 会自动担心`<p:tooltip>`在同一循环中设置与目标组件之间的正确关系。

```
<ui:repeat ...>
    <p:inputText id="foo" ... />
    <p:tooltip for="foo" ... />
</ui:repeat> 
```

在您的网络浏览器中拉取 JSF 页面，右键单击并执行*查看源代码*。您会注意到`<ui:repeat>`已经自动为 ID`foo`添加了迭代索引的前缀。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-22T16:44:09.400

据我所知，JSF 不允许您动态设置 id，而 primefaces 是基于 JSF 的。

或许这个问题的答案可以帮到你：[参考JSF根据迭代索引动态生成的ids](https://stackoverflow.com/questions/16043218/refer-to-jsf-dynamically-generated-ids-based-on-iteration-index)

# group-by - 如何做 Pandas dataframe.groupby(these_columns).apply(these_columns 的函数)？

> ID：15758491
> 
> 赞同：1
> 
> 时间：2013-04-02T07:28:05.633
> 
> 标签：group-by, pandas

我有一个熊猫数据框`df`：

```
>>> df
                   net_inventory      sales    yr temp_stk_id
STK_ID   RPT_Date                                            
34_STK43 20080331       282.1603   359.4644  2008    34_STK43
         20080630       297.4760   716.7633  2008    34_STK43
         20080930       283.6312  1105.6332  2008    34_STK43
         20081231       296.9090  1380.4886  2008    34_STK43
         20090331       276.2348   363.3449  2009    34_STK43
         20090630       288.0186   753.6347  2009    34_STK43
         20090930       287.0811  1173.3760  2009    34_STK43

>>> df.dtypes
net_inventory    float64
sales            float64
yr                object
temp_stk_id       object 
```

然后我想为“net_inventory”和“sales”列 groupby 做一个“expanding_mean()” `['temp_stk_id','yr']` ：

```
>>> df.groupby(['temp_stk_id','yr']).apply(lambda x: pd.expanding_mean(x)) 
```

它给出以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Python\Lib\site-packages\pandas\core\groupby.py", line 322, in apply
    return self._python_apply_general(f)
  File "D:\Python\Lib\site-packages\pandas\core\groupby.py", line 325, in _python_apply_general
    keys, values, mutated = self.grouper.apply(f, self.obj, self.axis)
  File "D:\Python\Lib\site-packages\pandas\core\groupby.py", line 596, in apply
    res = f(group)
  File "D:\Python\Lib\site-packages\pandas\core\groupby.py", line 321, in <lambda>
    f = lambda g: func(g, *args, **kwargs)
  File "<stdin>", line 1, in <lambda>
  File "D:\Python\Lib\site-packages\pandas\stats\moments.py", line 697, in f
    time_rule=time_rule, **kwargs)
  File "D:\Python\Lib\site-packages\pandas\stats\moments.py", line 281, in _rolling_moment
    return_hook, values = _process_data_structure(arg)
  File "D:\Python\Lib\site-packages\pandas\stats\moments.py", line 326, in _process_data_structure
    values = values.astype(float)
ValueError: invalid literal for float(): 34_STK43 
```

我认为这是因为 expand_mean() 不适用于对象类型`temp_stk_id`和 'yr' 列，所以我想要：

```
df.groupby(['temp_stk_id','yr']).apply(lambda x: pd.expanding_mean(x) for all columns except [`temp_stk_id`, 'yr']) 
```

或者

```
df.groupby(['temp_stk_id','yr']).apply(lambda x: pd.expanding_mean(x) for specified columns) 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:49:09.500

这看起来像是一份工作[`transform`](http://pandas.pydata.org/pandas-docs/dev/groupby.html#transformation)：

```
In [10]: g = df1.groupby(['temp_stk_id','yr'])

In [11]: g.transform(pd.expanding_mean)
Out[11]: 
                   net_inventory       sales
STK_ID   RPT_Date                           
34_STK43 20080331     282.160300  359.464400
         20080630     289.818150  538.113850
         20080930     287.755833  727.286967
         20081231     290.044125  890.587375
         20090331     276.234800  363.344900
         20090630     282.126700  558.489800
         20090930     283.778167  763.451867 
```

# vb.net - 如何使用 VBScript 在 InternetExplorer 窗口中设置可编辑组合框的值？

> ID：15758493
> 
> 赞同：0
> 
> 时间：2013-04-02T07:28:11.543
> 
> 标签：vb.net, vbscript, combobox, automation

谁能告诉我如何使用 vbscript 在 IE 窗口中设置可编辑组合框的值？

我已将要使用的 IE 窗口设置为对象。

如果它是一个文本框，我用过

```
ie.document.all("textboxname").value = "textboxvalue" 
```

对于单选按钮，我使用过

```
ie.document.all("radiobuttonname")(2).click            --- where '2' is index of array (3rd value in array is selected) 
```

对于不可编辑的组合框，我使用过

```
ie.document.all("comboboxname").selectedindex = 2    --- where '2' is index of array 
```

以上所有代码都可以正常工作，但我无法为该 IE 窗口中的可编辑组合框设置值。

对于可编辑的组合框，我试过了

```
ie.document.all("editablecomboboxname").selectedindex = 2 
```

或者

```
ie.document.all("editablecomboboxname").selectedindex.text = "text of any options in the combobox" 
```

或者

```
ie.document.all("editablecomboboxname").selectedindex(2).click 
```

或者

```
ie.document.all("editablecomboboxname").options.selected = 2 
```

但是一切都会导致这个错误——“对象不支持这个属性或方法：”

谁能帮我这个？提前致谢

请注意，我只使用了 VBscript，没有使用 Visual Studio 或 QTP 等其他工具。

根据 Panayot Karabakalov 的要求，我在下面添加了一个这样的可编辑组合框的代码示例：

```
<td class="small">        
<span id="Curr Car Name" style = "display:none;"  class = "small">          
Curr Car Name 
<font  class="asteriskRed" style="font-size:11px" style="display:none;">*</font><br>
<input type="hidden" name='curr_car_name' id='curr_car_name' value='' style='width:180px;height=20px;' >

<script>
getTypeAhead(true,true,'curr_car_name',180,20,'null','AutoCompleteHighlight',  'AutoCompleteBackground','divclass','null',5,20,'curr_car_name_datasrc','','null',0,'setHHChangeIndicator();priorValidations();deleteRowFromAccordion(this);',310,100,'null','');
searchandFill('curr_car_name','',curr_car_name_datasrc);</script>
</span>
<input type="hidden" name="currentcarriernameHdd" id="currentcarriernameHdd" value="null"/>
</td 
```

我将网页（用 Java 创建）保存为 html 文件并查看了它的源代码。从那里，我复制并粘贴了上面组合框的代码。我不确定它是否会有所帮助，因为我对 Java 了解不多。

——迪帕克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:21:44.560

好吧，我会发布我的想法。

查看错误描述（*Object 不支持此属性或方法*），在我看来，您的名字调用...

```
ie.document.all("editablecomboboxname") 
```

...返回不同的对象，即不是您期望的元素。而且由于您无法访问纯 HTML 源代码，这会使调试变得复杂。

我怀疑命名冲突。您可以做的是查看按名称返回的内容。

```
MsgBox TypeName(ie.document.all("editablecomboboxname").Type) 
```

但是如果有一些命名冲突，我不知道你如何在没有实际对应的 HTML 代码块的情况下调试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:25:28.737

@Panayot - 得到了我的问题的答案！！

正如你所说，我尝试过

```
MsgBox TypeName(ie.document.all("editablecomboboxname").Type) 
```

它返回“字符串”。所以我去找我的一个 Java 同事，问他为什么即使 inputtype 是字符串，组合框也没有更新。经过大量讨论后，他给了我两个字段来更新组合框 - 一个标签字段将使用我想要在组合框中的字符串进行更新，另一个字段将使用与我选择的字符串对应的值进行更新。这就是我使用的：

```
ie.document.all("curr_car_name").value = 8001

ie.document.all("_lblcurr_car_name").value = "NO PRIOR CARRIER" 
```

“curr_car_name”是可编辑组合框的名称，“_lblcurr_car_name”是可编辑组合框的标签。“NO PRIOR CARRIER”是我希望组合框拥有的文本，8001 是它的对应值。我从网页包含的 javascript 中获得了值 8001。这行得通。:) 感谢 Panayot 的所有帮助。

# python - 运行测试时 Django 1.5.1 'ImportError: No module named urls'

> ID：15758494
> 
> 赞同：3
> 
> 时间：2013-04-02T07:28:11.773
> 
> 标签：python, django, django-urls, django-testing

我已经使用 Django 1.5 开始了项目我有以下 url、视图和配置文件应用程序的测试。

当我浏览`localhost:8000/profiles`它工作得很好 ![运行服务器](https://i.stack.imgur.com/3te0b.png)

但是当我为配置文件应用程序运行测试时，`./manage.py test profile`它失败并出现以下异常

```
 File "<stdlib>/site-packages/django/core/urlresolvers.py", line 342, in RegexURLResolver.urlconf_module
    self = <RegexURLResolver 'yoda.urls' (None:None) ^/>
    340     return self._urlconf_module
    341 except AttributeError:
--> 342     self._urlconf_module = import_module(self.urlconf_name)
    343     return self._urlconf_module
    344
  File "<stdlib>/site-packages/django/utils/importlib.py", line 35, in import_module
    name = 'yoda.urls'
    package = None
     32             break
     33         level += 1
     34     name = _resolve_name(name[level:], package, level)
---> 35 __import__(name)
     36 return sys.modules[name]
ImportError: No module named urls 
```

### 主要网址.py

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'', include('profile.urls', namespace='profile')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

### 个人资料应用网址

```
from django.conf.urls import patterns, url

urlpatterns = patterns('profile.views',
    url(r'^u/(?P<username>[\-_\.\w\d]+)/$', view='profile_detail', name='detail'),
    url(r'^profiles/$', view='profile_list', name='list'),
) 
```

### 个人资料.views

```
from django.shortcuts import render
from django.contrib.auth.decorators import login_required
from django.db.models.signals import post_save

from profile import signals
from profile.models import User

@login_required
def profile_list(request, template='profiles/profile_list.html'):
    """ Profiles list """
    return render(request, template, {'profiles': []})

@login_required
def profile_detail(request, username, template='profiles/profile_detail.html'):
    """ Profile details """
    return render(request, template)

# Connect signals and senders
post_save.connect(signals.user_created, sender=User) 
```

### profile.tests

```
from django.core.urlresolvers import reverse
from django.test import TestCase

from profile.tests.factories import UserFactory

class UrlsTest(TestCase):
    """ Testing urls for category application """
    def setUp(self):
        self.user = UserFactory.build()

    def get(self, url, follow=False):
        return self.client.get(url, follow=follow)

    def test_list_profiles(self):
        """ Page with the list of profiles """
        self.client.login(username=self.user.username, password='pass')
        print(reverse('profile:list'))
        res = self.get(reverse('profile:list'))
        self.assertTrue(res.status_code, 200)
        self.assertTemplateUsed('profile/profile_list.html') 
```

### 设置

```
import os
import sys

here = lambda * x: os.path.abspath(os.path.join(os.path.abspath(os.path.dirname(__file__)), *x))

PROJECT_NAME = 'yoda'
PROJECT_ROOT = here('../..')

root = lambda * x: os.path.abspath(os.path.join(os.path.abspath(PROJECT_ROOT), *x))

sys.path.insert(0, root('yoda'))
sys.path.insert(0, PROJECT_ROOT)
sys.path.insert(0, root('apps'))
...
ROOT_URLCONF = 'yoda.urls' 
```

什么可能导致这样的问题？在具有完全相同配置的项目和 Django 1.4.5 上它工作正常。

## 调试 Django 内部

试图调试 Django `django.core.urlresolvers:263`。当`ROOT_URLCONF='yoda.urls'`它因上面显示的错误而失败时，但我尝试过`yoda.yoda.urls`并且它有效。我对这个问题感到困惑，仍在尝试解决。

```
ipdb> __import__('yoda.yoda.urls')
<module 'yoda' from '/Users/sultan/.virtualenvs/yoda/yoda/__init__.pyc'> 
```

## 小更新

当它从设置中接收 ROOT_URLCONF 时，我们有以下错误

```
> /Users/sultan/.virtualenvs/yoda/lib/python2.7/site-packages/django/core/urlresolvers.py(351)url_patterns()
    350     def url_patterns(self):
--> 351         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
    352         try:

ipdb> l
    346             self._urlconf_module = import_module(self.urlconf_name)
    347             return self._urlconf_module
    348
    349     @property
    350     def url_patterns(self):
--> 351         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
    352         try:
    353             iter(patterns)
    354         except TypeError:
    355             raise ImproperlyConfigured("The included urlconf %s doesn't have any patterns in it" % self.urlconf_name)
    356         return patterns

ipdb> self.urlconf_module
*** ImportError: No module named urls 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:45:59.010

如果您在`urls.py`名为 yoda 的应用程序之外创建了文件，则设置

```
ROOT_URLCONF = 'urls' 
```

如果您`urls.py`在模块中创建然后设置

```
ROOT_URLCONF = 'modulename.urls' 
```

试试这个

# sql - 在 T-SQL 查询方面需要帮助

> ID：15758496
> 
> 赞同：0
> 
> 时间：2013-04-02T07:28:13.767
> 
> 标签：sql, sql-server, tsql

我有下表...

```
orderID | itemID
---------------------
100          3425
100          3432
102          4443
102          8754
102          3425
103          6511
103          1176
103          3584
107          4967
109          0067 
```

现在我想要以下查询...

1.  返回`itemID`每个 s的数量`orderID`，但仅适用于每个`OrderID`具有 3 个或更多订单的 s`orderID`

2.  使用单个查询，找到所有具有的`orderID`s`itemID 3425`并列出`itemID`这些 s 的所有`orderID`s。

对于我尝试的第一个...

```
SELECT orderid,COUNT(itemid) AS item_count
FROM orderitems 
WHERE (select COUNT(orderid) from orderitems) >2
GROUP BY orderid. 
```

但这并没有给出预期的结果....我是 T-SQL 新手，请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:29:51.577

 ~~1 AND 2 的组合查询。

```
SELECT  OrderID
FROM    tableName
GROUP   BY OrderID
HAVING  COUNT(*) >= 3 AND
        SUM(CASE WHEN ItemID = 3425 THEN 1 ELSE 0 END) >= 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/fb68e/1)

 ~~**更新 1**

如果这两个问题不同，

对于问题 1

```
SELECT  OrderID
FROM    tableName
GROUP   BY OrderID
HAVING  COUNT(*) >= 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/fb68e/2)

对于问题 2

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  OrderID
            FROM    tableName
            GROUP   BY OrderID
            HAVING  SUM(CASE WHEN ItemID = 3425 THEN 1 ELSE 0 END) >= 1
        ) b ON  a.OrderID = b.OrderID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/fb68e/4)~~~~

# c# - 什么是 XPS 文件以及如何使用它

> ID：15758497
> 
> 赞同：6
> 
> 时间：2013-04-02T07:28:14.703
> 
> 标签：c#, .net, web-applications, bmp, xps

我有一个简单的 C# .net Web 应用程序。我正在使用 XPS 文件。我使用了以下代码

```
private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                string xpsFile = "D:\\Completed-Form.xps";
                xpsToBmp(xpsFile);
                MessageBox.Show("Done");
            }
            catch (Exception ex)
            {
                MessageBox.Show (ex.Message);
            }
        }

        static public void xpsToBmp(string xpsFile)
        {
            XpsDocument xps = new XpsDocument(xpsFile, System.IO.FileAccess.Read);
            FixedDocumentSequence sequence = xps.GetFixedDocumentSequence();

            for (int pageCount = 0; pageCount < sequence.DocumentPaginator.PageCount; ++pageCount)
            {
                DocumentPage page = sequence.DocumentPaginator.GetPage(pageCount);
                RenderTargetBitmap toBitmap = new RenderTargetBitmap((int)page.Size.Width,(int)page.Size.Height,96,96,System.Windows.Media.PixelFormats.Default);

                toBitmap.Render(page.Visual);

                BitmapEncoder bmpEncoder = new BmpBitmapEncoder();
                bmpEncoder.Frames.Add(BitmapFrame.Create(toBitmap));

                FileStream fStream = new FileStream("D:\\xpstobmp" + pageCount + ".bmp", FileMode.Create, FileAccess.Write);
                bmpEncoder.Save(fStream);
                fStream.Close();
            }
        } 
```

当我调试代码时，显示为`XamlParserException`发生错误

> '对与指定绑定约束匹配的'System.Windows.Documents.DocumentReference'类型的构造函数的调用引发了异常。行号“2”和行位置“20”。

在以下代码行中：

```
FixedDocumentSequence sequence = xps.GetFixedDocumentSequence(); 
```

我从[http://msdn.microsoft.com/en-us/library/windows/hardware/gg463422.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463422.aspx)下载了一个示例 XPS 文件（我从那里得到了 160MB 的 zip 文件。当我解压缩它时，有许多文件夹和具有 .xps 扩展名的文件。我不知道如何使用这些文件）并在上面的代码中使用。我对这个文件概念很陌生。我不知道如何解决此错误以及如何使用 .xps 文件。我也对位图文件知之甚少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:20:57.613

即使我在作为 Windows 应用程序运行时也遇到了同样的问题。

解决方案是：

调用线程必须处于 STA 模式。Visual Studio 创建的大多数项目默认设置为 MTA。

您可以做的是在 STA 线程中运行您的代码。

我尝试过： **Visual Studio 2010、Windows XP Srv Pack 3 64 位和 .Net Framework 4.0**

祝你好运...

*如果它解决了您的问题，请接受此作为答案*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:53:30.217

您的代码正在运行，我刚刚在我的环境（VS 2010，Windows 7 64 位）上进行了测试。

作为输入文件，我使用了一个使用内置 Microsoft XPS Document Writer 打印的谷歌页面。

所以问题在于您正在测试的 XPS 文档。

# linux-kernel - CPU的时钟频率和测量时间

> ID：15758500
> 
> 赞同：1
> 
> 时间：2013-04-02T07:28:22.240
> 
> 标签：linux-kernel, cpu, kernel, cpu-speed

我想知道“1ms sleep”需要多少时间。

在内核模块中运行此任务：

```
rdtscl(aj);
msleep(1);
rdtscl(b);
printk(KERN_INFO "Difference = %lu", (b-a));// Number of clock cycles consumed 
```

我得到的输出：

```
Difference = 13479219 
```

cat /proc/cpuinfo 的输出

```
cpu MHz : 1197.000 
```

有了这个，我计算了延迟，得到了 11.26 毫秒。

为什么我没有在 1 毫秒左右得到它？

**更新：**

cat /proc/cpuinfo 中的处理器频率应从以下行获取：

```
model name  : Intel(R) Core(TM) i3 CPU         540  @ 3.07GHz 
```

=> 处理器频率为 3.07 GHz。不知道这条线“cpu MHz：1197.000”的含义是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:55:20.223

进程分辨率取决于运行测试代码的系统上配置的 HZ 值。HZ 值可以是 100 或 1000，如果为 100，则调度程序将在 10 毫秒内仅唤醒一次。大多数在桌面系统中，在最近的发行版中，它将设置为 1000。（您可以在 Fedora 的 /boot 中检查配置文件）。调度程序将仅基于此进行调度，因此如果调度程序每 10 毫秒唤醒一次，则无法获得小于 10 毫秒的分辨率。或者您需要在内核中使用 HR 计时器。

```
kernel-3.4.5 (u3-1 *)$ cat /boot/config-3.6.10-4.fc18.x86_64 | grep HZ
CONFIG_NO_HZ=y
# CONFIG_RCU_FAST_NO_HZ is not set
# CONFIG_HZ_100 is not set
# CONFIG_HZ_250 is not set
# CONFIG_HZ_300 is not set
CONFIG_HZ_1000=y
CONFIG_HZ=1000 
```

如果你真的想要延迟但不睡觉，那么你可以使用 mdelay，它只会循环指定的时间并返回。

# android - 我们可以在android模拟器中使用robotium启用/禁用飞行模式吗

> ID：15758501
> 
> 赞同：0
> 
> 时间：2013-04-02T07:28:24.847
> 
> 标签：android, android-emulator, robotium

我需要在 android 模拟器中禁用网络来测试错误消息，有什么方法可以使用 robotsium 来做到这一点吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-12T08:36:02.453

您可以使用**ExtSolo**库[http://docs.testdroid.com/_static/extSolodocs/com/bitbar/recorder/extensions/ExtSolo.html](http://docs.testdroid.com/_static/extSolodocs/com/bitbar/recorder/extensions/ExtSolo.html) 它是 Solo 库的扩展。（您可以从[http://docs.testdroid.com/_pages/extsolo.html](http://docs.testdroid.com/_pages/extsolo.html)下载）

看看关键字**turnWifi(boolean enabled)，**它就是你要找的。

# iphone - 增加 NSMutableArray 中的间隔间隙

> ID：15758506
> 
> 赞同：0
> 
> 时间：2013-04-02T07:28:49.123
> 
> 标签：iphone, ios, ipad, nsmutablearray, nsarray

我是 iPhone 开发的新手。我有一个 NSMutableArray。

```
arrayNo = [[NSMutableArray alloc] initWithObjects:@"10",@"50", @"100", @"1000 ",@"2000", @"5000", @"10000",nil]; 
```

但现在，我想要做的是这个值之间的间隔差距不是完全不同的。达到 10000 后，我想将这个数组增加 10000 个间隔。例如。10000、20000、30000 最多 N 个。

我在 UIPickerView 中显示这个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:33:47.163

因为你有一个 mutableArray，填充了几个值，只有在 10000 之后，你才需要以 10000 的步长填充。

```
arrayNo = [[NSMutableArray alloc] initWithObjects:@"10",@"50", @"100", @"1000 ",@"2000", @"5000", @"10000",nil]; 
```

现在这样做：

```
for(NSInteger num=20000; i<=N ; i+=10000){ //N is your last number
    arrayNo[arrayNo.count]=@(num);
} 
```

**但要考虑 Integer 或 long long int 的范围**

# mongodb - 如何在 MongoDB 中强制预分配

> ID：15758507
> 
> 赞同：1
> 
> 时间：2013-04-02T07:29:05.647
> 
> 标签：mongodb

我想在我的日志文件夹中创建 prealloc.X 文件，没有显式创建这些文件的选项，由 mongo 决定是否进行预分配。

我使用了 --journal 选项，但这没有帮助。

请建议可以创建 prealloc.X 文件的任何方式或条件。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:57:10.167

启用日记功能时，默认情况下会进行预分配（在 V2.2 及更高版本中默认启用）。事实上，如果你想禁用预分配，你需要明确告诉 mongo - 使用`noprealloc`标志。

我建议您首先查看`noprealloc`mongodb.conf 中是否设置为 true 并将其更改为 false。

但是您也可以在 mongod 启动之前手动创建 prealloc.X 以保存 Preallocation Lag。这在此处详细描述[http://docs.mongodb.org/manual/administration/journaling/#avoid-preallocation-lag](http://docs.mongodb.org/manual/administration/journaling/#avoid-preallocation-lag)

这个想法是您启动 mongod 只是为了创建 prealloc.X 文件。然后停止它并将文件复制到常规 mond 的日志目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:21:20.360

MongoDb will actually pre-alloc 2-3GB of journal upon starting `mongod`, this as @balafi states is the default behaviour and you must explicitly tell MongoDB not to do this, via `--smallfiles` ( [http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--smallfiles](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--smallfiles) ) and/or `--noprealloc` ( [http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--noprealloc](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--noprealloc) ).

It is normally OK to suffer a bit of pre-allocation lag unless you are in the middle of a production shutdown and every minute = money^2.

So I would recommend checking how you are starting `mongod` and see if you have some options which are forcing it to start:

*   without journal
*   with smallfiles
*   with no prealloc

# sql - 使用分组依据和按日期排序的 SQL 选择

> ID：15758508
> 
> 赞同：4
> 
> 时间：2013-04-02T07:29:08.920
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server 2008，我想知道是否可以在一个 select 语句中完成我的查询，而无需子查询。

如果记录中的字段在最后 10 条创建的记录中为真，我想将变量设置为真，如果最后 10 条记录中的字段为真，则变量将为真，如果为假，则变量将为假，也如果记录总数小于 10，则变量也将为 false。

我的问题是，要获取最新创建的 10 条记录，我需要通过降序对用户进行排序并在前 10 位上进行过滤，因此我的查询应如下所示，其中它不是有效的查询：

```
declare @MyVar bit
set @MyVar = 0

select top(10) @MyVar = 1 from MyTable
where SomeId = 1000 and SomeFlag = 1
group by SomeId
having count(SomeId) >= 10
order by CreatedDate 
```

请向我提供您的建议。

这是一个示例，假设我们有下表，并说我想检查每个 id 的最新 3 条记录：

```
ID  Joined  CreatedDate
1   true    03/27/2013
1   false   03/26/2013
1   false   03/25/2013
1   true    03/24/2013
1   true    03/23/2013

2   true    03/22/2013
2   true    03/21/2013
2   true    03/20/2013
2   false   03/19/2013

3   true    03/18/2013
3   true    03/17/2013 
```

对于 id="1"，结果将为 FALSE，因为最近 3 条创建的记录在这 3 条记录中的 JOINED 字段的值不为 true。

对于 id="2"，结果将为 TRUE，因为最新创建的 3 条记录在这 3 条记录中具有真正的 JOINED 字段。

对于 id="3"，结果将为 FALSE，因为要检查的最新创建记录必须至少为 3 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:01:25.537

（在 OP 指定 2008 年之前给出的答案。以下仅适用于 2012 年）

* * *

此查询（对于每个 ID 值）给出最后 10 行中标志等于 1 的行数。应该足够简单（如果需要）将其过滤为仅计数为 10 的行，并限制将其设置为单个`ID`值。

如果没有更好的样本数据，我将暂时保留它：

```
;with Vals as (
    select
        *,
        ROW_NUMBER() OVER (PARTITION BY ID ORDER BY CreatedDate DESC) as rn,
        SUM(CASE WHEN Flag = 1 THEN 1 ELSE 0 END)
                 OVER (PARTITION BY ID
                       ORDER BY CreatedDate ASC
                       ROWS BETWEEN 9 PRECEDING AND CURRENT ROW) as Cnt
    from
        T1
)
select * from Vals where rn = 1 
```

（这确实取决于[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461.aspx)的 SQL Server 2012 版本- 但您没有指定哪个版本）

结果：

```
ID          Flag  CreatedDate             rn                   Cnt
----------- ----- ----------------------- -------------------- -----------
1           1     2012-01-12 00:00:00.000 1                    10
2           1     2012-01-12 00:00:00.000 1                    9
3           1     2012-01-12 00:00:00.000 1                    6 
```

（只有 ID 1 符合您的条件）

样本数据：

```
create table T1 (ID int not null,Flag bit not null,CreatedDate datetime not null)
insert into T1 (ID,Flag,CreatedDate) values
(1,1,'20120101'),
(1,0,'20120102'),
(1,1,'20120103'),
(1,1,'20120104'),
(1,1,'20120105'),
(1,1,'20120106'),
(1,1,'20120107'),
(1,1,'20120108'),
(1,1,'20120109'),
(1,1,'20120110'),
(1,1,'20120111'),
(1,1,'20120112'),

(2,1,'20120101'),
(2,1,'20120102'),
(2,1,'20120103'),
(2,1,'20120104'),
(2,1,'20120105'),
(2,1,'20120106'),
(2,0,'20120107'),
(2,1,'20120108'),
(2,1,'20120109'),
(2,1,'20120110'),
(2,1,'20120111'),
(2,1,'20120112'),

(3,1,'20120107'),
(3,1,'20120108'),
(3,1,'20120109'),
(3,1,'20120110'),
(3,1,'20120111'),
(3,1,'20120112') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:17:10.660

在 SQLServer2008 中，您可以将[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)与[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)排名函数一起使用，而不是子查询

```
 ;WITH cte AS
 (      
  SELECT ID, CAST(Joined AS int) AS Flag, 
         ROW_NUMBER() OVER(PARTITION BY ID ORDER BY CreatedDate DESC) AS rn
  FROM dbo.test63 t
  )
  SELECT ID, CASE WHEN SUM(Flag) != 3 THEN 0 ELSE 1 END AS Flag
  FROM cte
  WHERE rn <= 3
  GROUP BY ID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/09ffd/2)上的演示[](http://sqlfiddle.com/#!3/09ffd/2)

# mysql - 使用分组计算对 MySQL 中自己 ID 的引用

> ID：15758509
> 
> 赞同：2
> 
> 时间：2013-04-02T07:29:12.313
> 
> 标签：mysql, sql, select

我正在对数据库中的帖子进行查询。如果帖子是对另一个帖子的响应，则它的`parent_id`值大于零，否则为零。

要生成帖子报告，我在 SELECT 中使用以下内容，然后按用户分组。

```
SELECT
    SUM(IF(parent_id = 0, 1, 0)) as 'NewPosts',
    SUM(IF(parent_id > 0, 1,0))  as 'Responses',
    COUNT(parent_id)             as 'TotalPosts',
FROM posts
GROUP BY user 
```

现在我需要添加一列来显示用户的自我反应。就像是...

```
SUM(IF(parent_id IN id, 1, 0)) as 'SelfResponses' 
```

当然，我知道这是错误的，但我希望它能传达这个想法。

**编辑**：数据看起来像：

```
User        Id        parent_id
Henry       12          0
Henry       24          12
Henry       32          16
Joseph      16          0 
```

所以在这种情况下，输出将是：

```
User         NewPosts        Responses     TotalPosts        SelfResponses
Henry          2                2             3                    1
Joseph         1                0             1                    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:57:02.593

假设响应的 parentId 是响应的 postId，那么您可以通过以下方式实现此目的

**查询 1**：

```
SELECT
   a.user,
   SUM(IF(a.parent_id = 0, 1, 0)) as 'NewPosts',
   SUM(IF(a.parent_id > 0, 1,0))  as 'Responses',
   COUNT(a.parent_id)             as 'TotalPosts',
   SUM(IF(a.user = b.user, 1, 0)) as 'SelfResponses'
FROM 
  Table1 a
LEFT JOIN
  Table1 b
ON 
  a.parent_id = b.id
GROUP BY 
  a.user 
```

**结果**：

```
|   USER | NEWPOSTS | RESPONSES | TOTALPOSTS | SELFRESPONSES |
--------------------------------------------------------------
|  Henry |        1 |         2 |          3 |             1 |
| Joseph |        1 |         0 |          1 |             0 | 
```

## **[SQL 小提琴](http://sqlfiddle.com/#!2/b1495/5)**

希望这可以帮助

# java - 多数据类型表单中 enctype multipart/form-data 的使用

> ID：15758510
> 
> 赞同：0
> 
> 时间：2013-04-02T07:29:15.350
> 
> 标签：java, html, post, file-upload, enctype

我有包含 3 个文件输入和 3 个文本输入的 html 页面。如果我在 jsp 页面中使用 enctype = multipart/form-data 我无法获取测试输入表单字段。这些值始终显示为空。如果我从 jsp 中的 post 表单中删除 enctype，我可以获得文本字段输入，但在这种情况下我无法上传文件。所以我的问题是是否可以有多个带有文件输入的输入字段，如果是，如何获取文本输入字段名称？

对此的任何帮助表示赞赏..

下面是html代码

```
<html>
<body>
<form method="post" action="upload.jsp" enctype="multipart/form-data">
  Office Name: <input type="text" name="officeName" />  <br>
  Doc. Description : <input type="text" name="docDesc" />   <br>
  Document 1 :  <input type="file" name="doc1" />   <br>
  Document 2 :  <input type="file" name="doc2" />   <br>
  Document 3 :  <input type="file" name="doc3" />   <br>
  Remarks : <input type="text" name="remarks" />    <br>

  <br>
    <input type="submit" value="submit" />
</form> 
```

我正在检索文本和文件输入

```
strOffficeName=Request.getParameter("officeName");
strDocDescription=Request.getParameter("docDesc");
strDoc1Path=Request.getParameter("doc1");
strDoc2Path=Request.getParameter("doc2");
strDoc3Path=Request.getParameter("doc3");
strRemarks=Request.getParameter("remarks"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:54:33.477

我会看看[Apache Commons FileUpload](http://commons.apache.org/proper/commons-fileupload/)。它有一个[用户指南](http://commons.apache.org/proper/commons-fileupload/using.html)，解释了如何从您的请求中获取文件上传。

“[处理上传的项目](http://commons.apache.org/proper/commons-fileupload/using.html#Processing_the_uploaded_items)”部分显示了如何处理文件上传和文本输入的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:00:04.060

创建一个名为 fileUploader 的类，它返回 ServletFileUpload 对象

```
private FileUploader()
{

}

public static synchronized ServletFileUpload getservletFileUploader(String tempDir, int maxSizeInMB) 
{
    if(uploader == null)
    {
        DiskFileItemFactory factory = new DiskFileItemFactory();

        factory.setSizeThreshold(1024 * 1024);
        factory.setRepository(new File(tempDir));

        uploader = new ServletFileUpload(factory);

        uploader.setFileSizeMax(maxSizeInMB * 1024 * 1024);
    }

    return uploader;
} 
```

现在您可以处理请求并读取所有数据。它处理上传的文件以及其他表单数据。

```
protected MultiPartFormData handleMultiPartRequest(HttpServletRequest request)
throws FileSizeLimitExceededException
{
    if(!isMultipartRequest(request))
        return null;

    ServletFileUpload upload = FileUploader.getservletFileUploader(tempDir, 50);
    MultiPartFormData data = new MultiPartFormData();
    try
    {
        List<FileItem> items = upload.parseRequest(request);

        for (FileItem item : items) 
        {
            if(item.isFormField())
            {
                data.getParameters().put(item.getFieldName(), item.getString());
            }
            else
            {
                String filename = item.getName();

                //Internet explorer and firefox will send the file name differently
                //Internet explorer will send the entire path to the file name including 
                //the backslash characters etc ... we should strip it down
                //THIS IS HACKY
                if(filename.indexOf("\\") != -1)
                {
                    int index = filename.lastIndexOf("\\");
                    filename = filename.substring(index + 1);
                }

                if(filename == null || filename.equals(""))
                {
                    //do nothing 
                }
                else
                {
                    File uploadFile = new File(uploadDir + File.separator + randomFileName);
                    item.write(uploadFile);

                                            data.addFile(item.getFieldname(), item.getString());
                }
            }
        }
    }
    catch(FileSizeLimitExceededException e)
    {
        throw e;
    }
    catch(Exception e)
    {
        e.printStackTrace();

    }

    return data;
} 
```

解析请求后，我将其存储在一个名为 MultipartFormData 的对象中，该对象可用于获取请求参数

```
public class MultiPartFormData {

private Hashtable<String, String> parameters;
    private Hashtable<String, String> uploadedFiles;

public MultiPartFormData()
{
    this.parameters = new Hashtable<String, String>();
    this.uploadedFiles = new Hashtable<String, String>();
}

public Hashtable<String, String> getParameters() {
    return parameters;
}
public void setParameters(Hashtable<String, String> parameters) {
    this.parameters = parameters;
}
    public void getParameter(String paramName) {
          if(this.parameters.contains(paramName))
                 return tyhis.parameters.get(paramName);
          return null;
    }
    public void addFile(String key, String filename) {
        uploadedFile.put(key, filename);
    }
    public void getFilename(String key) {
        uploadedFile.get(key);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T16:24:01.190

我遇到了类似的问题，在这种情况下，原因是：IT 部门在他们的防火墙上设置了一些设置，这些设置停止了我的一些脚本的执行，并且只针对一些客户端。暂停将浏览器发送到我服务器的根网页。他们无法详细解释，但在打开一些过滤器后，一切都按预期工作。WAMP，PHP7。

# c# - 手机唤醒时 Application_Activated 中的代码未运行

> ID：15758511
> 
> 赞同：1
> 
> 时间：2013-04-02T07:29:20.150
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone

我已经对 Windows Phone 应用程序的生命周期进行了一些研究，并且我收集到当手机被锁定而应用程序仍在运行时，并且您解锁手机时，App.xaml 中会调用“Application_Activated”函数。 cs 文件。

```
// Code to execute when the application is activated (brought to foreground)
// This code will not execute when the application is first launched
private void Application_Activated(object sender, ActivatedEventArgs e)
{
    //Code to run
    MessageBox.Show("Hello there!");
} 
```

现在在上面的例子中，简单的“MessageBox”调用没有运行。就像我说的，如果你的应用程序正在运行并且你锁定了手机，然后解锁了手机，上面的代码应该会运行，在这种情况下，一旦你解锁手机就会显示一个 MessageBox。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:41:11.480

你不能这样做

```
If you call Show(String) method from the app Activated and Launching event 
handlers an InvalidOperationException is thrown with the message Error 
Displaying MessageBox. 
```

[它在 msdn 中](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx)

如果您想显示相同的消息，我的建议是使用`OnNavigatedTo`事件

**编辑**

如果我理解正确你想更改默认页面导航

1.  1.一种方法：

    用您想要的页面`WMAppManifest.xml`替换的属性`Navigation Page`

2.  替代：

在`WMAppManifest.xml`删除的属性`Navigation Page`

> ```
> private void Application_Launching(object sender, LaunchingEventArgs e)
> {
>     RootFrame.Navigate(new Uri("YourPage.xaml", UriKind.Relative)); 
> } 
> ```

```
private void Application_Activated(object sender, ActivatedEventArgs e)
{            
     RootFrame.Navigate(new Uri("YourPage.xaml", UriKind.Relative));
} 
```

这样你就可以“玩”`IsolatedStorageSettings`例如

```
 if (boolvariable)
        {
            RootFrame.Navigate(new Uri("YourPage.xaml", UriKind.Relative));
            boolvariable = false;
        }
     else 
        {
            RootFrame.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        } 
```

这只是一个想法，让我知道它是怎么回事（：

# c# - 在 MS 图表中，#PERCENT{N} 关键字不会只返回没有小数的数值

> ID：15758513
> 
> 赞同：1
> 
> 时间：2013-04-02T07:29:23.943
> 
> 标签：c#, mschart, pie-chart, dynamic-controls

我正在使用 Ms 图表，我只需要一个数字或数值来计算百分比，因此我使用 #PERCENT{N} 但它返回一个十进制值，如 0.45 0.78 0.11 等。我不需要，我希望它应该给出我只喜欢 45 78 11 23 等数值。请参阅下面的代码。它只是我在这里发布的编码的一部分。请帮帮我。

```
LegendCellColumn PercentageColumn = new LegendCellColumn();
PercentageColumn.Text = "#PERCENT{N}";
PercentageColumn.HeaderText = "%";
PercentageColumn.Name = "Percentage %";
//avgColumn.HeaderBackColor = Color.WhiteSmoke;
Chart1.Legends[0].CellColumns.Add(PercentageColumn); 
```

我应该用这个做什么才能只得到没有十进制值的数值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:39:33.090

```
Decimal outDec;
if (Decimal.TryParse("<some string>", out outDec))
{
    // Sets Decimal as a Percentage out of 100
    PercentageColumn.Text = Convert.ToInt32(outDec * 100).ToString();
} 
```

**编辑**

要专门使用`String`格式化来做到这一点：

```
PercentageColumn.Text = "#PERCENT{P0}"; 
```

来自：[Social.MSDN - 在饼图 (Aspnet) 上显示百分比](http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/74d5f11d-e8f0-4767-b2ca-45beadde4c40/) 和 [MSDN - 标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

# php - 为什么这个简单的 php 脚本会崩溃？

> ID：15758517
> 
> 赞同：0
> 
> 时间：2013-04-02T07:29:33.667
> 
> 标签：php

在我的本地 wamp 服务器上运行它可以让我`ERR_CONNECTION_RESET`尝试通过浏览器访问 .php 文件。这里发生了什么？

```
<?php
$catalog = simplexml_load_file('http://www.w3schools.com/xml/cd_catalog.xml');

session_start();

if (!isset($_SESSION['selection'])) {
    $_SESSION['selection'] = array();
}

array_push($_SESSION['selection'], $catalog->CD[0]);
?> 
```

这是输出的一部分`var_dump($catalog)`

```
object(SimpleXMLElement)[1]
  public 'CD' => 
    array (size=26)
      0 => 
        object(SimpleXMLElement)[2]
          public 'TITLE' => string 'Empire Burlesque' (length=16)
          public 'ARTIST' => string 'Bob Dylan' (length=9)
          public 'COUNTRY' => string 'USA' (length=3)
          public 'COMPANY' => string 'Columbia' (length=8)
          public 'PRICE' => string '10.90' (length=5)
          public 'YEAR' => string '1985' (length=4)
      1 => [...] 
```

编辑：按照建议从 apache 日志中找到这个：

```
[Tue Apr 02 09:34:54 2013] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'Exception' with message 'Serialization of 'SimpleXMLElement' is not allowed' in [no active file]:0\nStack trace:\n#0 {main}\n  thrown in [no active file] on line 0 
```

所以我想问题是php的会话序列化不允许SimpleXMLElements。我会保存一个索引或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:33:26.610

在你的程序顶部插入一些东西，如下所示：

```
error_reporting(E_ALL);
ini_set('error_log', 'phperror.log');
ini_set('log_errors_max_len', 0);
ini_set('log_errors', true); 
```

并在错误后查看错误文件。

# java - Eclipse 条件断点。如何检查是否发生异常？

> ID：15758519
> 
> 赞同：4
> 
> 时间：2013-04-02T07:29:35.353
> 
> 标签：java, eclipse, conditional-breakpoint

我有这个功能：

```
public static FradId readFradId(DataInput pIn) throws IOException {
    Integer lMainId = Integer.valueOf(pIn.readInt());
    Integer lReferenceId = Integer.valueOf(pIn.readInt());
    String lShortname = pIn.readUTF();
    return new FradId(lMainId,lReferenceId,lShortname);
  } 
```

我在这一行有一个断点：

```
String lShortname = pIn.readUTF(); 
```

我的问题是在某些情况下该函数`readUTF`会抛出一个`RuntimeException`. 该应用程序执行该功能超过 100 次，因此我很难找到问题所在。

我的问题：有没有办法用断点条件捕获该异常？我已经使用简单的布尔条件使用了该条件，但是当抛出异常时我不知道如何在该行中停止。

提前谢谢

斯特凡

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T07:35:41.073

是的，有一个名为“异常断点”的选项
打开断点视图，单击`j!`选项并添加所需的异常

![在此处输入图像描述](https://i.stack.imgur.com/awElU.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:36:58.463

我认为你需要[Java 异常断点](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-addexception_viewaction.htm)

在您的 Eclipse 中，从*运行*菜单中打开“*添加 Java 异常断点... ”。*您可以选择需要为其设置断点的异常。

 *```
Run -> Add Java Exception Breakpoint... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:35:16.567

你尝试过类似的东西吗？

```
public static FradId readFradId(DataInput pIn) throws IOException {
    Integer lMainId = Integer.valueOf(pIn.readInt());
    Integer lReferenceId = Integer.valueOf(pIn.readInt());
    try{
        String lShortname = pIn.readUTF();
    }catch(Exception e){
       //need a breakpoint here.
    }
    return new FradId(lMainId,lReferenceId,lShortname);
} 
```*

# jquery - 简单的 css 选项卡式菜单提交未显示

> ID：15758521
> 
> 赞同：1
> 
> 时间：2013-04-02T07:29:45.650
> 
> 标签：jquery, html, css

我只是在这里开始新...我有这个带有 jquery 的 css 选项卡..

```
<ul class="tabs">
<li><a href="#tab1">First tab</a></li>
<li><a href="#tab2">Second tab</a></li>
</ul>

<div class="tab_container">
<div id="tab1" class="tab_content">
    Content of the first tab
</div>
<div id="tab2" class="tab_content">
Content
</div> 
```

myjquery

```
 <script type="text/javascript">
     $(document).ready(function() {
    //Default Action
     $(".tab_content").hide(); //Hide all content
     $("ul.tabs li:first").addClass("active").show(); //Activate first tab
     $(".tab_content:first").show(); //Show first tab content
     //On Click Event
     $("ul.tabs li").click(function() {
     $("ul.tabs li").removeClass("active"); //Remove any "active" class
     $(this).addClass("active"); //Add "active" class to selected tab
     $(".tab_content").hide(); //Hide all tab content
     var activeTab = $(this).find("a").attr("href"); 
      $(activeTab).fadeIn(); //Fade in the active content
      return false;
      });
      });
      </script> 
```

它适用于表单域，但是当我在表单域之后添加提交按钮时它消失了..但是当只使用提交按钮（没有其他表单域）时..它显示..我试图更改 css 设置，但无法弄清楚..我尽力在这里说清楚..

和CSS

```
 ul.tabs {
       margin: 0;
       padding: 0;
       float: left;
       list-style: none;
       height: 32px; /*--Set height of tabs--*/
       border-bottom: 1px solid #999;
       border-left: 1px solid #999;
       width: 100%;
               }

       ul.tabs li {
       float: left;
       margin: 0;
       padding: 0;
       height: 31px; /*--Subtract 1px from the height of the unordered list--*/
       line-height: 31px; /*--Vertically aligns the text within the tab--*/
       border: 1px solid #999;
       border-left: none;
       margin-bottom: -1px; /*--Pull the list item down 1px--*/
       overflow: hidden; 
       position: relative;
       background: #e0e0e0;
        }

      ul.tabs li a {
      text-decoration: none;
      color: #000;
     display: block;
     font-size: 1.2em;
     padding: 0 20px;
     border: 1px solid #fff; /*--Gives the bevel look with a 1px white border inside the list item--*/
     outline: none;
     }

     ul.tabs li a:hover {
     background: #ccc;
     }

     html ul.tabs li.active, html ul.tabs li.active a:hover  { /*--Makes sure that the active tab does not listen to the hover properties--*/
     background: #fff;
     border-bottom: 1px solid #fff; /*--Makes the active tab look like it's connected with its content--*/
     }

     .tab_container {
     border: 1px solid #999;
     border-top: none;
     overflow: hidden;
     clear: both;
     float: left; width: 100%;
     background: #fff;
     }

     .tab_content {
     padding: 20px;
     font-size: 1.2em;
     color:#333;
     } 
```

请帮忙！！wat我做错了吗...

我的 html 表单代码

```
 <label for="username" id="name_label">Username</label><br>
                 <input id="username" type="text" name="username"/><br>

                 <label for="password" id="name_label">Password</label><br>
                 <input id="password" type="text" name="password"/><br>

                 <label for="confirm_password" id="name_label">Confirm Password</label>              <br>
                 <input id="confirm_password" type="text" name="confirm_password"/><br>

                   <br>
                 <b>Personal Details</b><br><br>

                 <label for="firstname" id="name_label">Firstname</label><br>
                 <input id="firstname" type="text" name="firstname"/><br>

                <label for="lastname" id="name_label">Lastname</label><br>
                <input id="lastname" type="text" name="lastname"/><br>

                Gender<br>
                <select class="cc" name="sex" id="sex">
                <option value="" selected="selected">--Select Gender--</option>
                <option value="m">Male</option>
                <option value="f">Female</option>
                </select>

                <br>

                Date of birth<br>

                <label class="dob" for="dateid" id="date_label">Date
                <?php $number = range(1,31);
                $tempholder = range(1,31);
                $nr=31;
                echo '<select class="doba" name="dateid" id="dateid">';
                echo '<option value="" selected="selected">--Select Date--</option>';
                for ($i=0; $i<$nr; $i++)
                {

                 echo "<option>".$tempholder[$i]."</option>";
                 }
            echo '</select>';

                ?>
                </label>

                <label class="dob" for="month" id="month_label">Month
                <?php $number = range(1,12);
                $tempholder = range(1,12);
                $nr=12;             
                echo '<select class="doba" name="month" id="month">';
                echo '<option value="" selected="selected">--Select Month--</option>';
                for ($i=0; $i<$nr; $i++)
                {

                echo "<option>".$tempholder[$i]."</option>";
                }
            echo '</select>';

                ?>
                </label>

               <label class="dob" for="year" id="year_label">Year
                <?php 
              $tempholder =  range(1960,2000);
              $nr=40;
              echo '  <select  class="doba" name="year" id="year">';
              echo '<option value="" selected="selected">--Select Year--</option>';
              for ($i=0; $i<$nr; $i++)
              {
              echo "<option>".$tempholder[$i]."</option>";
              }
         echo '</select>';

             ?>
             </label>
             <br>

             <b>Contact Details</b> <br>
             <label for="add1" id="add1_label">Address1</label><br>
             <input id="add1" type="text" name="add1"/><br>

             <label for="add2" id="add2_label">Address2</label><br> 
             <input id="add2" type="text" name="add2"/><br>

             <label for="add3" id="add3_label">Address3</label><br>
             <input id="add3" type="text" name="add3"/><br>

             <label for="mobile" id="mobile_label">Mobile</label><br> 

             <input id="mobile" type="text" name="mobile"/><br>

             <label for="tele" id="tele_label">Telephone</label><br>

              <input id="tele" type="text" name="tele"/><br>

              <label for="email" id="email_label">E-mail</label><br>
              <input id="email" type="text" name="email"/><br>

                <br>

              <b>Card Details</b><br>
              <label for="cardno" id="cardno_label">Card No</label><br>
              <input id="cardno" type="text" name="cardno"/><br>

             <label for="cvcno" id="cvcno_label">CVC No</label><br>
             <input id="cvcno" type="text" name="cvcno"/><br>

             <label class="dob" for="dateid" id="date_label">Expiry Date<br>
             <?php $number = range(1,31);
             $tempholder = range(1,31);
             $nr=31;
             echo '<select class="doba" name="dateid" id="dateid">';
             echo '<option value="" selected="selected">--Select Date--</option>';
             for ($i=0; $i<$nr; $i++)
             {

           echo "<option>".$tempholder[$i]."</option>";
             }
         echo '</select>';

             ?>
            </label>

           <label class="dob" for="month" id="month_label">Month
           <?php $number = range(1,12);
           $tempholder = range(1,12);
           $nr=12;
           echo '<select class="doba" name="month" id="month">';
           echo '<option value="" selected="selected">--Select Month--</option>';
           for ($i=0; $i<$nr; $i++)
           {

           echo "<option>".$tempholder[$i]."</option>";
            }
       echo '</select>';

           ?>
           </label>

           <label class="dob" for="year" id="year_label">Year
           <?php 
           $tempholder =  range(2013,2050);
           $nr=40;
           echo '  <select  class="doba" name="year" id="year">';
           echo '<option value="" selected="selected">--Select Year--</option>';
           for ($i=0; $i<$nr; $i++)
           {
           echo "<option>".$tempholder[$i]."</option>";
           }
           break;
       echo '</select>';

           ?>
           </label>

           <br>
          <select  name="cardtype" id="cardtype">
          <option value="" selected="selected">--Card Type--</option>
           <option value="visa">Visa</option>
          <option value="master">Master</option>
          <option value="american">American Express</option>
          </select>

          <input type="submit" value="enter"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:48:53.550

我添加了 30 个输入，它完美地从一个选项卡切换到另一个选项卡。

```
 <ul class="tabs">
  <li><a href="#tab1">First tab</a></li>
  <li><a href="#tab2">Second tab</a></li>
</ul>
<div class="tab_container">
<div id="tab1" class="tab_content"> Content of the first tab </div>
<div id="tab2" class="tab_content"> Content 
  <form id="form1" name="form1" method="post" action="">
    <label>
      <input type="text" name="textfield" id="textfield" />
    </label>
    <label>
      <input type="text" name="textfield2" id="textfield2" />
    </label>
    <label>
      <input type="text" name="textfield3" id="textfield3" />
    </label>
    <label>
      <input type="text" name="textfield4" id="textfield4" />
    </label>
    <label>
      <input type="text" name="textfield5" id="textfield5" />
    </label>
    <label>
      <input type="text" name="textfield6" id="textfield6" />
    </label>
    <label>
      <input type="text" name="textfield7" id="textfield7" />
    </label>
    <label>
      <input type="text" name="textfield8" id="textfield8" />
    </label>
    <label>
      <input type="text" name="textfield9" id="textfield9" />
    </label>
    <label>
      <input type="text" name="textfield10" id="textfield10" />
    </label>
    <label>
      <input type="text" name="textfield11" id="textfield11" />
    </label>
    <label>
      <input type="text" name="textfield12" id="textfield12" />
    </label>
    <label>
      <input type="text" name="textfield13" id="textfield13" />
    </label>
    <label>
      <input type="text" name="textfield14" id="textfield14" />
    </label>
    <label>
      <input type="text" name="textfield15" id="textfield15" />
    </label>
    <label>
      <input type="text" name="textfield16" id="textfield16" />
    </label>
    <label>
      <input type="text" name="textfield17" id="textfield17" />
    </label>
    <label>
      <input type="text" name="textfield18" id="textfield18" />
    </label>
    <label>
      <input type="text" name="textfield19" id="textfield19" />
    </label>
    <label>
      <input type="text" name="textfield20" id="textfield20" />
    </label>
    <label>
      <input type="text" name="textfield21" id="textfield21" />
    </label>
    <label>
      <input type="text" name="textfield22" id="textfield22" />
    </label>
    <label>
      <input type="text" name="textfield23" id="textfield23" />
    </label>
    <label>
      <input type="text" name="textfield24" id="textfield24" />
    </label>
    <label>
      <input type="text" name="textfield25" id="textfield25" />
    </label>
    <label>
      <input type="text" name="textfield26" id="textfield26" />
    </label>
    <label>
      <input type="text" name="textfield27" id="textfield27" />
    </label>
    <label>
      <input type="text" name="textfield28" id="textfield28" />
    </label>
    <label>
      <input type="text" name="textfield29" id="textfield29" />
    </label>
    <label>
      <input type="text" name="textfield30" id="textfield30" />
    </label>
    <label>
      <input type="submit" name="button" id="button" value="Submit" />
    </label>
  </form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:50:20.020

```
<ul class="myMenu">
    <li><a href="#">menu item 1</a></li>
    <li><a href="#">menu item 2</a>
        <ul>
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li>
        </ul>
    </li>
    <li><a href="#">menu item 3</a>
       <ul>
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            <li><a href="#">sub menu item 3</a></li>
            <li><a href="#">sub menu item 4</a></li>
        </ul>
    </li>
    <li><a href="#">menu item 4</a></li>
    <li><a href="#">menu item 5</a></li>
</ul>

Now we're going to style the list with css:

/*style the main menu*/
.myMenu {
    margin:0;
    padding:0;
}

.myMenu li {
    list-style:none;
    float:left;
    font:12px Arial, Helvetica, sans-serif #111;
}

.myMenu li a:link, .myMenu li a:visited {
    display:block;
    text-decoration:none;
    background-color:#09F;
    padding: 0.5em 2em;
    margin:0;
    border-right: 1px solid #fff;
    color:#111;
}

.myMenu li a:hover {
    background-color:#0CF;  
}

/*style the sub menu*/
.myMenu li ul {
    position:absolute;
    visibility:hidden;
    border-top:1px solid #fff;
    margin:0;
    padding:0;
}

.myMenu li ul li {
    display:inline;
    float:none;
}

.myMenu li ul li a:link, .myMenu li ul li a:visited {
    background-color:#09F;
    width:auto;
}

.myMenu li ul li a:hover {
    background-color:#0CF;  
}

<script type="text/javascript">
    $(document).ready(function() {
        $('.myMenu > li').bind('mouseover', openSubMenu);
        $('.myMenu > li').bind('mouseout', closeSubMenu);

        function openSubMenu() {
            $(this).find('ul').css('visibility', 'visible');    
        };

        function closeSubMenu() {
            $(this).find('ul').css('visibility', 'hidden'); 
        };

    });
</script> 
```

干得好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:15:16.100

错误 #1：

你`Labels`把`SelectBoxes`里面的东西弄乱了。

关闭 a`Label`然后打开 a `SelectBox`，而不是将 a 封装`SelectBox`在它自己的内部`label`（就像您对输入字段所做的那样）。

错误 #2：

`ID`s（可能还有`name`s）应该是唯一的（根据体面的`DTD`）。

你加倍`dateid`, `month`, `year`. 拆分它们以使它们独一无二，例如`dateid1`and`dateid2`等...

开始更正代码，然后重试并最终更新您的答案，如果它仍然不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:54:46.830

为什么你需要在年份下拉列表中**休息，尝试删除它。**

你的完整代码

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
     $(document).ready(function() {
    //Default Action
     $(".tab_content").hide(); //Hide all content
     $("ul.tabs li:first").addClass("active").show(); //Activate first tab
     $(".tab_content:first").show(); //Show first tab content
     //On Click Event
     $("ul.tabs li").click(function() {
     $("ul.tabs li").removeClass("active"); //Remove any "active" class
     $(this).addClass("active"); //Add "active" class to selected tab
     $(".tab_content").hide(); //Hide all tab content
     var activeTab = $(this).find("a").attr("href"); 
      $(activeTab).fadeIn(); //Fade in the active content
      return false;
      });
      });
      </script>
<style type="text/css">
ul.tabs {
    margin: 0;
    padding: 0;
    float: left;
    list-style: none;
    height: 32px; /*--Set height of tabs--*/
    border-bottom: 1px solid #999;
    border-left: 1px solid #999;
    width: 100%;
}
ul.tabs li {
    float: left;
    margin: 0;
    padding: 0;
    height: 31px; /*--Subtract 1px from the height of the unordered list--*/
    line-height: 31px; /*--Vertically aligns the text within the tab--*/
    border: 1px solid #999;
    border-left: none;
    margin-bottom: -1px; /*--Pull the list item down 1px--*/
    overflow: hidden;
    position: relative;
    background: #e0e0e0;
}
ul.tabs li a {
    text-decoration: none;
    color: #000;
    display: block;
    font-size: 1.2em;
    padding: 0 20px;
    border: 1px solid #fff; /*--Gives the bevel look with a 1px white border inside the list item--*/
    outline: none;
}
ul.tabs li a:hover {
    background: #ccc;
}
html ul.tabs li.active, html ul.tabs li.active a:hover { /*--Makes sure that the active tab does not listen to the hover properties--*/
    background: #fff;
    border-bottom: 1px solid #fff; /*--Makes the active tab look like it's connected with its content--*/
}
.tab_container {
    border: 1px solid #999;
    border-top: none;
    overflow: hidden;
    clear: both;
    float: left;
    width: 100%;
    background: #fff;
}
.tab_content {
    padding: 20px;
    font-size: 1.2em;
    color:#333;
}
</style>
<ul class="tabs">
  <li><a href="#tab1">First tab</a></li>
  <li><a href="#tab2">Second tab</a></li>
</ul>
<div class="tab_container">
<div id="tab1" class="tab_content">
<form id="form1" name="form1" method="post" action="">
<label for="username" id="name_label">Username</label>
<br>
<input id="username" type="text" name="username"/>
<br>
<label for="password" id="name_label">Password</label>
<br>
<input id="password" type="text" name="password"/>
<br>
<label for="confirm_password" id="name_label">Confirm Password</label>
<br>
<input id="confirm_password" type="text" name="confirm_password"/>
<br>
<br>
<b>Personal Details</b><br>
<br>
<label for="firstname" id="name_label">Firstname</label>
<br>
<input id="firstname" type="text" name="firstname"/>
<br>
<label for="lastname" id="name_label">Lastname</label>
<br>
<input id="lastname" type="text" name="lastname"/>
<br>
Gender<br>
<select class="cc" name="sex" id="sex">
  <option value="" selected="selected">--Select Gender--</option>
  <option value="m">Male</option>
  <option value="f">Female</option>
</select>
<br>
Date of birth<br>
<label class="dob" for="dateid" id="date_label">Date
  <?php $number = range(1,31);
                $tempholder = range(1,31);
                $nr=31;
                echo '<select class="doba" name="dateid" id="dateid">';
                echo '<option value="" selected="selected">--Select Date--</option>';
                for ($i=0; $i<$nr; $i++)
                {

                 echo "<option>".$tempholder[$i]."</option>";
                 }
            echo '</select>';

                ?>
</label>
<label class="dob" for="month" id="month_label">Month
  <?php $number = range(1,12);
                $tempholder = range(1,12);
                $nr=12;             
                echo '<select class="doba" name="month" id="month">';
                echo '<option value="" selected="selected">--Select Month--</option>';
                for ($i=0; $i<$nr; $i++)
                {

                echo "<option>".$tempholder[$i]."</option>";
                }
            echo '</select>';

                ?>
</label>
<label class="dob" for="year" id="year_label">Year
  <?php 
              $tempholder =  range(1960,2000);
              $nr=40;
              echo '  <select  class="doba" name="year" id="year">';
              echo '<option value="" selected="selected">--Select Year--</option>';
              for ($i=0; $i<$nr; $i++)
              {
              echo "<option>".$tempholder[$i]."</option>";
              }
         echo '</select>';

             ?>
</label>
<br>
<b>Contact Details</b> <br>
<label for="add1" id="add1_label">Address1</label>
<br>
<input id="add1" type="text" name="add1"/>
<br>
<label for="add2" id="add2_label">Address2</label>
<br>
<input id="add2" type="text" name="add2"/>
<br>
<label for="add3" id="add3_label">Address3</label>
<br>
<input id="add3" type="text" name="add3"/>
<br>
<label for="mobile" id="mobile_label">Mobile</label>
<br>
<input id="mobile" type="text" name="mobile"/>
<br>
<label for="tele" id="tele_label">Telephone</label>
<br>
<input id="tele" type="text" name="tele"/>
<br>
<label for="email" id="email_label">E-mail</label>
<br>
<input id="email" type="text" name="email"/>
<br>
<br>
<b>Card Details</b><br>
<label for="cardno" id="cardno_label">Card No</label>
<br>
<input id="cardno" type="text" name="cardno"/>
<br>
<label for="cvcno" id="cvcno_label">CVC No</label>
<br>
<input id="cvcno" type="text" name="cvcno"/>
<br />
<label class="dob" for="dateid" id="date_label">Expiry Date<br>
  <?php $number = range(1,31);
             $tempholder = range(1,31);
             $nr=31;
             echo '<select class="doba" name="dateid" id="dateid">';
             echo '<option value="" selected="selected">--Select Date--</option>';
             for ($i=0; $i<$nr; $i++)
             {

           echo "<option>".$tempholder[$i]."</option>";
             }
         echo '</select>';

             ?>
</label>
<label class="dob" for="month" id="month_label">Month
  <?php $number = range(1,12);
                $tempholder = range(1,12);
                $nr=12;             
                echo '<select class="doba" name="month" id="month">';
                echo '<option value="" selected="selected">--Select Month--</option>';
                for ($i=0; $i<$nr; $i++)
                {

                echo "<option>".$tempholder[$i]."</option>";
                }
            echo '</select>';

                ?>
</label>
<label class="dob" for="year" id="year_label">Year
  <?php 
              $tempholder =  range(1960,2000);
              $nr=40;
              echo '  <select  class="doba" name="year" id="year">';
              echo '<option value="" selected="selected">--Select Year--</option>';
              for ($i=0; $i<$nr; $i++)
              {
              echo "<option>".$tempholder[$i]."</option>";
              }
         echo '</select>';

             ?>
</label>
<br>
<b>Contact Details</b> <br>
<label for="add1" id="add1_label">Address1</label>
<br>
<input id="add1" type="text" name="add1"/>
<br>
<label for="add2" id="add2_label">Address2</label>
<br>
<input id="add2" type="text" name="add2"/>
<br>
<label for="add3" id="add3_label">Address3</label>
<br>
<input id="add3" type="text" name="add3"/>
<br>
<label for="mobile" id="mobile_label">Mobile</label>
<br>
<input id="mobile" type="text" name="mobile"/>
<br>
<label for="tele" id="tele_label">Telephone</label>
<br>
<input id="tele" type="text" name="tele"/>
<br>
<label for="email" id="email_label">E-mail</label>
<br>
<input id="email" type="text" name="email"/>
<br>
<br>
<b>Card Details</b><br>
<label for="cardno" id="cardno_label">Card No</label>
<br>
<input id="cardno" type="text" name="cardno"/>
<br>
<label for="cvcno" id="cvcno_label">CVC No</label>
<br>
<input id="cvcno" type="text" name="cvcno"/>
<br>
<label class="dob" for="dateid" id="date_label">Expiry Date<br>
  <?php $number = range(1,31);
             $tempholder = range(1,31);
             $nr=31;
             echo '<select class="doba" name="dateid" id="dateid">';
             echo '<option value="" selected="selected">--Select Date--</option>';
             for ($i=0; $i<$nr; $i++)
             {

           echo "<option>".$tempholder[$i]."</option>";
             }
         echo '</select>';

             ?>
</label>
<label class="dob" for="month" id="month_label">Month
  <?php $number = range(1,12);
           $tempholder = range(1,12);
           $nr=12;
           echo '<select class="doba" name="month" id="month">';
           echo '<option value="" selected="selected">--Select Month--</option>';
           for ($i=0; $i<$nr; $i++)
           {

           echo "<option>".$tempholder[$i]."</option>";
            }
       echo '</select>';

           ?>
</label>
<label class="dob" for="year" id="year_label">Year
  <?php 
           $tempholder =  range(2013,2050);
           $nr=40;
           echo '  <select  class="doba" name="year" id="year">';
           echo '<option value="" selected="selected">--Select Year--</option>';
           for ($i=0; $i<$nr; $i++)
           {
           echo "<option>".$tempholder[$i]."</option>";
           }
           break;
       echo '</select>';
           ?>
</label>
<br>
<select  name="cardtype" id="cardtype">
  <option value="" selected="selected">--Card Type--</option>
  <option value="visa">Visa</option>
  <option value="master">Master</option>
  <option value="american">American Express</option>
</select>
<input type="submit" value="enter"/> 
```

# python - 如何使用 Python 在 Linux 中检测 CAN 设备插入和移除

> ID：15758524
> 
> 赞同：0
> 
> 时间：2013-04-02T07:29:53.920
> 
> 标签：python, linux, python-3.x, dbus, can-bus

我一直在研究如何最好地检测与 Linux 平台（Ubuntu 12.04）连接和断开的 CAN-USB 设备，但进展缓慢。我能找到的最好的建议是使用 dbus 来检测插入/删除事件。我正在为 Python 3.3（支持 CANbus）编译和安装所有必要的库，但由于依赖项的数量庞大，安装所有包和库需要相当长的时间。

任何人都可以推荐使用标准 Linux 库/API 检测设备插入/移除（特别是 CAN-USB 设备）的最简单和最简单的方法吗？dbus是要走的路吗？

# c++ - Linux Mint 上的 Eclipse 和 SFML2 问题（可能是链接？）

> ID：15758525
> 
> 赞同：0
> 
> 时间：2013-04-02T07:29:54.753
> 
> 标签：c++, eclipse, linker, sfml, 2d-games

我用 gcc 和 make 编译了 sfml2（最新的 github 版本），一切都很顺利。我可以在终端中直接使用 g++ 编译示例程序，但是每当我使用 Eclipse 时，它​​都会抱怨对 sf:: 命名空间中的类的未定义引用。

我已经相应地设置了我的项目，以正确的顺序添加了 /usr/local/include、/usr/local/lib、SFML_DYNAMIC 符号和 sfml-* 库，但如果我不使用它仍然无法编译“ using namespace sf"，即使那样，我仍然会收到所有错误，尽管我能够运行该程序。

此外，当我尝试使用 Intellisense（或在 Eclipse 中调用的任何内容）时，当我键入 sf:: 时，它给了我很多与这个命名空间无关的东西。

我正在使用 Linux Mint 14、带有 CDT 的 Eclipse Juno 和默认的 linux gcc 工具。

这是我的 IDE 当前的屏幕截图：

[Eclipse IDE 截图 http://dl.dropbox.com/u/62794148/Screenshot%20from%202013-04-02%2010%3A26%3A08.png](http://dl.dropbox.com/u/62794148/Screenshot%20from%202013-04-02%2010%3A26%3A08.png)

# javascript - 当用户单击选项卡时，如何刷新 JSP 中选项卡的内容？

> ID：15758526
> 
> 赞同：0
> 
> 时间：2013-04-02T07:29:57.040
> 
> 标签：javascript, jquery, jsp

我知道这是一个重复的问题。但是我没有找到解决问题的好方法。我创建了一个带有一些选项卡的 JSP 页面。当用户单击选项卡时，我想重新加载选项卡的内容。

```
<div class="navbar btn-navbar">
        <div id="tabs" class="tabbable">
            <ul id="myTab" class="nav nav-tabs">
                <li><a href="#datacollector" target="main"
                    data-toggle="tab">Data Collector</a></li>
                <li><a href="#fromDB" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li><a href="#fromFile" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li><a href="#email" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li><a href="ajax/DataFieldMapping.jsp" target="main" data-toggle="tab">Data
                        Map</a></li>
                <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
            </ul> 
```

我的脚本应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:40:49.857

使用[jQuery](http://jquery.com/download/)获取数据（使用 AJAX）。我猜你已经在使用[jQuery UI](http://jqueryui.com/)了。我假设您想从 HTML 文件加载内容？

HTML

```
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Data Collector</a></li>
    <li><a href="#tabs-2">Data Load</a></li>
    <li><a href="#tabs-3">Data Load</a></li>
  </ul>
  <div id="tabs-1">
  </div>
  <div id="tabs-2">
  </div>
  <div id="tabs-3">
  </div>
</div> 
```

JavaScript - 像这样初始化

```
$( "#tabs" ).tabs({
  beforeActivate: function( event, ui ) {
      var myData = {
              previousTabSelection: 5 // read previous tab data ...
      };

      $.get('/url/to/your/content.html', myData).done(function(contentHtml){
        ui.newPanel.html(contentHtml);
      });

      // or without params
      if(myData.previousTabSelection === 5 ){
             ui.newPanel.load('/url/to/your/content.html');
      }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:42:55.277

```
$('#tab-id-selector').click(function() {
    $.ajax({
        type:'POST', 
        url: 'targetUrl', 
        data: { 
        'foo': 'bar' //request parameters,In your case may be the tab ID to recognize on the server side  that which tab pressed
    }, 
        success: function(response) {
          //handle the data here ,means set the data where you want
        }
    });
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:46:04.430

为什么单击选项卡时需要重新加载内容？根据请求加载内容还不够吗？

```
 $("tab selector").click(function(){

        //do ajax-request to fetch data
        $.ajax({
            url: "/url/to/your/data",
            type: "GET",
            contentType: "application/json; charset=UTF8",
            success: (function (data) {
                //load your tab with your new data
            }),
            error: (function (data) {
            })
        });
    }); 
```

# .net-4.0 - .Net 4 环境是否会干扰 Documentum 5.3 SP3

> ID：15758527
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:30:05.040
> 
> 标签：.net-4.0, .net-2.0, documentum

我在一台机器上安装了一个**documentum 5.3 SP3**内容服务器并且一个**.net 应用程序**也安装在同一台机器上

当前的 .NET 版本是 2.0

我想在那台机器上安装 .NET 4.0 版。

> 那么，我想知道该安装是否会以任何方式干扰 Documentum？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:33:04.223

您可以在一台机器上安装不同版本的 .Net 框架，一切正常。documentum 内容服务器不需要安装 .Net 框架。所以我想你正在使用一些 3rd 方/自制组件，也许你应该问那些东西的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:54:04.353

您可以同时安装所有主要版本的 .Net，所以应该没有问题。这完全独立于 Documentum。

# jquery - jQuery 元素选择

> ID：15758531
> 
> 赞同：0
> 
> 时间：2013-04-02T07:30:32.100
> 
> 标签：jquery, jquery-selectors

我不能简单地在 API 文档中找到这些信息，因为我不知道如何正确调用它。所以问题：

我有这种 jQuery 选择器用法：

```
var $table = $('#sort-table');          // id of <table>
var $rows = $('tbody > tr', $table);    // , $table ??? 
```

那么 $rows 的第二个参数是什么意思呢？如果您好心，请您帮我在 jQuery 文档中找到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:31:59.543

> var $rows = $('tbody > tr', $table);

这里 $table 是上下文，根据[jQuery 文档](http://api.jquery.com/jQuery/) `jQuery( selector [, context ] )`

```
$('tbody > tr', $table); 
```

或者

```
$table.find('tbody > tr'); 
```

用于使用`context`给定的选择标准调用 find

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:32:11.543

第二个参数为选择提供[*上下文*](http://api.jquery.com/jQuery/)。您的`rows`变量将包含`tr`元素的直接子*元素*`tbody`，这些元素是.*`$table`*

 *你也可以这样写，在这种情况下，它的行为方式完全相同：

```
var $rows = $("#sort-table tbody > tr"); 
```

context 参数有点等价于`.find()`方法，所以你也可以这样写：

```
var $rows = $table.find("tbody > tr"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T07:32:39.027

这意味着`tr`在 $table 中查找

这类似于调用

```
var $rows = $table.find('tbody > tr'); 
```

第二个参数`$('tbody > tr', $table);` 是可选的上下文。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T07:32:45.777

是上下文参数，相当于`$table.find('tbody > tr')`

给定的选择器`tbody > tr`将在给定的 context 中查找`$table`。

例如：在您的页面中，您可能有多个表，并且您只对一个表上的行感兴趣，在这种情况下，如果您使用选择器`$('tbody > tr')`将选择所有`tr`表中的所有 s。那不是你想要的。

但是在您将上下文作为您感兴趣的表传递时，`$('tbody > tr', $table)`选择器`tbody > tr`将仅针对`$table`表的子级执行，仅获取所需`tr`的 s。

演示：[小提琴](http://jsfiddle.net/arunpjohny/NgRmn/)。

如果您查看演示，则 css 属性`$rows.css('color', 'red');`仅应用于第一个表，而 as`$('tbody > tr').css('font-weight', 'bold');`应用于所有表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T07:34:44.007

它被称为选择器的上下文，用于将您的查询限制在某个“范围”，由您用作上下文的 jQuery 对象指定。

从文档：

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以使用 $() 函数的可选第二个参数为搜索提供替代上下文。例如，要在事件处理程序中进行搜索，可以像这样限制搜索：

```
$( "div.foo" ).click(function() {
  $(  "span", this ).addClass( "bar" );
}); 
```

有关详细信息，请参阅：[http ://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

在您的示例中，这意味着：

```
var $rows = $('tbody > tr', $table); 
```

是相同的：

```
var $rows = $table.find('tbody > tr'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T07:47:19.603

看看这里发生了什么：

```
var $table = $('#sort-table');  
var $rows = $('tbody > tr', $table); 
```

在第一行代码变量`$table`中保存着表 id `#sort-table`。

在第二行代码中说仅`'tbody > tr'`在此中找到`$table`。

这也可以这样写：

```
var $rows = $('tbody > tr', '#sort-table'); 
  //-says find-^^^^^^^^^--in-^^^^^^^^^^^----this table 
```

您也可以使用 find 来实现：

```
var $rows = $('#sort-table').find('tbody > tr'); 
```

或者

```
var $rows = $table.find('tbody > tr'); 
```*

# c++ - 局部变量的顺序：在 cpp 中声明变量（大小不同）的最佳方式

> ID：15758533
> 
> 赞同：0
> 
> 时间：2013-04-02T07:30:39.870
> 
> 标签：c++, variables, local

我目前正在审查代码，并且有许多不同大小的局部变量。

是按大小递增的顺序声明更可取的一个，反之亦然。

在任何一种情况下都用内存布局来解释它。

是根据声明顺序或大小为局部变量分配的内存。

```
int fun()
{

  struct *ptr;
  int var1;
  long double *ld;
  .
  .
  .
  .
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:34:52.227

在 C++ 中声明（和初始化）局部变量的最佳位置就在第一次需要它的地方。

变量的大小根本不应该是一个考虑因素，除非你有相反的具体证据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:40:20.897

编译器会在优化时重新排序局部变量。简而言之，同一范围内的变量顺序无关紧要。

不过，好主意是在使用它的范围内声明局部变量，例如：

```
void func() {
    //int i, j; // not here!
    for (int i = 0 ; i<10; ++i) {
       int j = func2(i);
       ...
    }
    // i and j below are different variables than i and j above
    // you can consider changing their names if they also have different meaning
    for (int i = 0 ; i<10; ++i) { 
       int j = func3(i);
       ...
    }
} 
```

尽管对于良好的优化编译器，从性能或内存占用的角度来看，这可能无关紧要（它会检测到何时使用变量）。它仍然会使代码更具可读性，并避免在不同范围内混合不相关的值，从而防止编译器警告未捕获的一些愚蠢错误（因为编译器不知道您何时意外忘记重新初始化重用变量，但它会知道你是否忘记初始化一个新变量）。

* * *

另外，担心变量（或任何东西）时很重要的一点：记得打开编译器的警告，比如`-Wall -Wextra`gcc。此外，使用[valgrind](http://valgrind.org)是个好主意（如果您可以让您的代码在具有 valgrind 的操作系统上运行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:51:16.477

我的方法是，我在尽可能小的范围内声明局部变量，在范围的开头，例如

```
void foo()
{
    int local1 = 42;
    int local2 = bar(local1);

    if ( local2 != local1)
    {
        double local3 = double(local2)/double(local1);
        MyMemoryAllocatingObject mmao; // large memory allocation, deallocation in destructor

        baz(local3);
        bat(mmao);
    } // mmao memory gets freed here
} 
```

对于不复杂的编译器，它有助于优化，对于用户，它有助于跟踪信息。另外，它有助于使内存占用尽可能小，因为局部变量超出范围（原文如此！），即调用了它们的析构函数。

# db2 - db2表和类型表的区别

> ID：15758534
> 
> 赞同：0
> 
> 时间：2013-04-02T07:30:47.937
> 
> 标签：db2

下面的链接对 DB2 中的表类型进行了分类。

[DB2 表类型](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0001063.htm "DB2 表类型")

```
T = Table (untyped)
U = Typed table
V = View (untyped)
W = Typed view 
```

这些有什么区别，哪些是我们应该使用它们的条件？

另外，我们如何在创建表的过程中定义它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:53:24.320

类型表是基于 UDT（用户定义类型）定义的。它们可以在层次结构中具有级别并描述引用的对象（来自模型），并且该描述可以在其他表甚至存储过程中重用。（为了创建一个结构相同的表，不需要做create like，而是根据type创建表）

普通表是基于列定义的，但该定义不能在其他对象中重复使用，必须重新定义（重新定义列顺序和精度等）

看看文档：http: [//publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.structtypes.doc/doc/c0006606.html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.structypes.doc/doc/c0006606.html)

# python - Python 字典 ManuaLoa CO2

> ID：15758538
> 
> 赞同：1
> 
> 时间：2013-04-02T07:31:02.570
> 
> 标签：python, dictionary, numpy, formula, mean

我的 python 程序需要一些帮助。我已经导入了一个 .txt 文件，并在一个 numpy 数组中创建了一个字典。文本文件是一张二氧化碳测量表，每年每月一次。我需要在一个公式（def Annual_mean_co2）中计算每年的平均二氧化碳值。“extract_complete_years”是一个公式，它排除了不完整的测量年份。

到目前为止，这是我的程序：

```
data = np.loadtxt('MaunaLoa_CO2.txt', comments = '#')

def extract_complete_years(r):
    whole_year = data[10:-2, r]
    return whole_year

def read_MLdata(dittfilnavn):
    dictionary = {'years': extract_complete_years(0),\
            'months': extract_complete_years(1),\
            'decyears': extract_complete_years(2),\
            'co2': extract_complete_years(3),\
            'co2_interp': extract_complete_years(4),\
            'co2_trend': extract_complete_years(5),\
            'num_no_data': extract_complete_years(6)}
    return dictionary

def annual_mean_co2(MLdata): 
```

我真的希望有人可以提供帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:48:31.430

最简单的方法是执行以下操作：

```
def annual_mean_co2(MLdata):
    years = MLdata['years']
    co2 = MLdata['co2']
    y, _ = np.unique(years, return_inverse=True)
    co2_mean = np.empty(y.shape)
    for j in xrange(len(y)):
        co2_mean[j] = np.mean(co2[_ == j])
    return y, c02_mean 
```

如果，因为你只有完整的年份，你确定每年都会有完全相同数量的条目，你可以将 for 循环向量化为：

```
def annual_mean_co2(MLdata):
    years = MLdata['years']
    co2 = MLdata['co2']
    y, _ = np.unique(years, return_inverse=True)
    idx = np.argsort(_)
    co2_mean = co2[idx].reshape(len(y), -1)
    return y, np.mean(co2_mean, axis=1) 
```

# javascript - jQuery mobile 1.3.0：“未捕获的错误：表小部件实例没有这样的方法'刷新'”

> ID：15758539
> 
> 赞同：2
> 
> 时间：2013-04-02T07:31:06.550
> 
> 标签：javascript, jquery, html, jquery-mobile, jquery-mobile-table

我使用 jQuery mobile 1.3.0 版本：“未捕获的错误：表小部件实例没有此类方法'刷新'”但文档说可以使用：

更新单元格中的标签。

```
$( myTable ).table( "refresh" ); 
```

如何解决问题？有没有办法让单元格中的标签刷新？

```
 <div data-role="content" >
        <table id="tableProp" data-role="table" data-mode="Reflow" class="ui-body-d ui-shadow table-stripe ui-responsive" data-column-popup-theme="a">
                                        <thead>
                      <tr class="ui-bar-d">
                        <th data-priority="2" style="text-align: center">Test1</th>
                        <th  style="text-align: center">Test2</th>
                        <th data-priority="3" colspan=2   style="text-align: center">Test3</th>
                      </tr>
                    </thead>
                    <tbody id="tbProp">

                    </tbody>
                  </table>
               <a href="javascript:clickBtn()">Table test</a>

    </div><!-- /content -->
</div><!-- /page -->
    <script>
    function clickBtn()
    {
        var tb = $('#tbProp'),
        newRow = '<tr><th style="text-align: center;vertical-align:middle">' + 'Test11' + '</th> <td style="text-align: center;vertical-align:middle">' + '23.3'+ '</td><td style="text-align: center;vertical-align:middle"><a href="#" data-role="button" data-mini="true">Test22</a></td><td style="text-align: center;vertical-align:middle"><a href="#popupLogin" data-rel="popup" data-position-to="window" data-role="button" data-mini="true">Test33</a></td></tr>',
         newBody = "";
        for (var i = 0,
        l = 6; i < l; i += 1) {
            newBody += newRow;
        }

        tb.empty()
          .append(newBody);

          $("#tableProp").table("refresh");
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T07:33:37.037

您的表是动态创建的，因为它首先需要在刷新之前进行初始化：

```
$( myTable ).table().table("refresh"); 
```

**编辑 ：**

工作示例：http: [//jsfiddle.net/Gajotres/Zqy4n/](http://jsfiddle.net/Gajotres/Zqy4n/)

代替：

```
$( myTable ).table("refresh"); 
```

扳机：

```
$( myTable ).trigger('create'); 
```

# delphi - 如何创建一个连接到没有任何类型的数据集、查询或表组件的数据库的类？

> ID：15758541
> 
> 赞同：0
> 
> 时间：2013-04-02T07:31:15.563
> 
> 标签：delphi, ms-access

我遇到的问题是我想在 delphi 中创建一个连接到 MS access 数据库的类，但我不允许使用任何类型的数据集、查询或表组件。我找到了一种连接数据库的方法（代码如下）：

```
procedure TForm1.FormCreate(Sender: TObject);
begin

conn := TADOConnection.Create(nil);

conn.ConnectionString := 'Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Program Files (x86)\Delphi7SE\Projects\Bpl\Database11.mdb;Persist Security Info=False';
conn.LoginPrompt := False;
qr := TADOQuery.Create(nil);
try
  conn.Connected := True;
except on e: EADOError do
  begin
      MessageDlg('Error while connecting', mtError, [mbOK], 0);
      Exit;
end;
end;

try
conn.Open;
  qr.Connection := conn;
  ListBox1.Items.Clear;
  qr.SQL.Text := 'Select * FROM Customer';
  qr.Open;
  while NOT qr.Eof do
  begin
      //ListBox1.Items.Add(IntToStr(qr.SQL.Add('SELECT FirstName FROM Customer;')));
      ListBox1.Items.Add(qr.FieldByName('FirstName').Value);
      qr.Next;
  end;
  conn.Close;
finally
  conn.Free;
  qr.Free;
end;

end; 
```

我想把它放到课堂上，但我不知道怎么做，因为我只在 10 到 12 年级做过 delphi。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:47:06.450

目前尚不清楚您的潜在雇主要求什么，但我将给您留下这个答案，因为评论太长了。

首先，您使用的`TADOQuery`是在代码中创建的组件。`TADOQuery`这与使用放在表单上的 a完全相同。

从最严格的意义上讲，没有组件的数据库访问意味着您不应该使用任何从 TComponent 派生的类。如果可以使用 TADOConnection，则可以直接从该 TADOConnection 执行 SQL 语句，但这只是一种在现实世界中永远不会使用的“面试问题”技术。

其次，如果您希望通过 OLEDB 提供程序（例如 ADO）连接到可用的数据库，则可以直接访问 Microsoft 的 OLEDB 或 ADO COM 接口并连接到它们。Delphi 非常擅长使用您可以命名的任何 COM 接口。但是，以一种不只是 hack 或演示的方式来实现所有这些，远远超出了我期望任何人在面试期间能够完成的任何事情的范围。

如果您有一个没有 COM/ADO/OLEDB 接口功能的数据库，则可以编写自己的类来加载数据库客户端代码，也许作为 DLL，并以这种方式与数据库通信。您甚至可以在 delphi 中编写自己的 ODBC 客户端。毕竟，这些预先编写和预先测试的数据库访问组件使用的任何底层技术都可以由您完成。这会是您的雇主经营业务的明智方式吗？不会。但是因为您甚至可以研究任何现有组件的来源，并且由于您的雇主可能希望雇用可以找到并修复组件中的错误的人，即使该错误不是他们编写的，这可能就是他们的正在找; 深入堆栈的技术知识。

我最好的猜测是你的面试官想知道你是一个了解整个技术堆栈的好奇的开发人员，还是一个只了解你使用的顶级技术堆栈的货物狂热程序员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:29:45.313

Delphi自带`TAccessApplication`组件（其实最多3个，Office 2000+，Office XP+，Office 2010+）

您连接到 Access 应用程序（和/或启动它）并控制它的组件。

谷歌使用 COM 或 OLE 自动化进行 Delphi 交互。您将获得大量有关控制 Word 或 Excel 的示例，但通常相同的规则和精神适用于 Access。但是 CreateOLEObject 和 Variant vars 最好用`TAccessApplication`组件和相关类型代替。

还搜索 Access 的 VBA 示例，甚至制作一个（如果 Access 具有代码自动生成功能，如 Excel 和 Word 的“记录宏”菜单）——因为 MS Office 对象的 VBA 文档是 TAccessApplication 的文档，而 VBA 代码几乎是字面意思翻译成 Delphi 代码，除了你可以从其他 COM 示例中学到的一些怪癖。

还有[https://www.google.ru/search?client=opera&q=Delphi+TAccessApplication&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest](https://www.google.ru/search?client=opera&q=Delphi+TAccessApplication&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)

*顺便说一句，你的 Delphi 版本是哪个？您将编辑您的问题并将 Delphi 版本添加到**tags**中。*

# java - Android 软键盘大小

> ID：15758543
> 
> 赞同：2
> 
> 时间：2013-04-02T07:31:28.207
> 
> 标签：java, android, android-softkeyboard

我正在为具有自定义布局的 android 开发软键盘。这意味着我不使用 KeyboardView，我只是创建一个新的输入法服务，并在 onCreateInputView 中填充我的自定义布局，然后为子视图实现 onTouchListener。我希望我的自定义软键盘高度占据屏幕尺寸的 70%。我尝试为我的视图设置布局参数，但不受影响。

```
public View onCreateInputView() {
    // TODO Auto-generated method stub
    keyboardLayout = getLayoutInflater().inflate(R.layout.full_keyboard, null);
            // Then here i set the height of the keyboard layout
            .....
} 
```

我的问题是android系统是否控制了软键盘的大小。如果是，是否有任何解决方案。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-18T11:11:53.470

转到您的 res->values\dimens.xml 并更改您的 key_height;

例如-`<dimen name="key_height">70dip</dimen>`

# php - 使用 PHP 上传文件时出错

> ID：15758546
> 
> 赞同：0
> 
> 时间：2013-04-02T07:32:04.453
> 
> 标签：php, html

我得到了这个 PHP 代码：

```
SESSION_start();

$conn = mysql_connect("localhost", "root", "");
if(!$conn) die("Cannot connect to the database server: <br />
    ".mysql_error());

$db = mysql_select_db("tsismics", $conn);
if(!$db) die("Cannot connect to the database: <br />
    ".mysql_error());

 $userId = $_SESSION['userId'];
 $dir = $userId."/".$_FILES['profpic']['name'];
 $filename = $_FILES['profpic']['name'];

 $target = "profile_pictures/".$userId."/";
 echo $target;

 mysql_query("UPDATE users SET photo=\"$dir\" WHERE userId=$userId", $conn);

 if(move_uploaded_file($_FILES['profpic']['tmp_name'], $target)) {
     echo "The file ". basename( $_FILES['profpic']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 
     echo "Sorry, there was a problem uploading your file."; 
 } 
```

这是我的 HTML 块：

```
<form method="POST" action="upload-prof-pic.php" enctype="multipart/form-data">
    <input type="file" value="upload profile pic" name="profpic"/>
    <input type="submit" value="Upload" id="prof-pic-submit"> 
</form> 
```

上传时，它会在文件夹中创建一个以 userId 作为文件名且没有任何扩展名的文件：profile_pictures

* * *

我忘了发布这个..它有这两个错误：

警告：move_uploaded_file(profile_pictures/1/3.png)：无法打开流：第 22 行的 C:\wamp\www\project\upload-prof-pic.php 中没有这样的文件或目录

警告：move_uploaded_file(): Unable to move 'C:\wamp\tmp\php2070.tmp' to 'profile_pictures/1/3.png' in C:\wamp\www\project\upload-prof-pic.php on line 22

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:34:09.507

哦，还要注意一件事（基于您更新的问题），因为您尝试将每张图片存储在以用户 ID 命名的新目录中，您还需要创建该目录并且显然具有写入权限。

[mkdir](http://php.net/mkdir)

```
$target = "profile_pictures/".$userId."/"; 
```

应该

```
$target = "profile_pictures/".$userId."/".$filename; 
```

哦，还在用那个著名的`mysql_*`api吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:05:08.137

你需要 ：

1.  [如果该文件夹不存在，则创建该文件夹](http://www.php.net/manual/en/function.mkdir.php)。
2.  [给它足够的权限来写入它](http://www.php.net/manual/en/function.chmod.php)。
3.  [正确使用 move_uploaded_file](http://www.php.net/manual/en/function.move-uploaded-file.php)。（文件参数的路径而不是文件夹）
4.  [停止使用 mysql_ 函数](http://www.php.net/manual/en/function.mysql-query.php)（见红色矩形？）

例子 ：

```
session_start();

if(!empty($_FILES['profpic'])){
$conn = mysql_connect("localhost", "root", "");
if(!$conn) die("Cannot connect to the database server: <br />
    ".mysql_error());

$db = mysql_select_db("tsismics", $conn);
if(!$db) die("Cannot connect to the database: <br />".mysql_error());

$userId = $_SESSION['userId'];
$filename = $_FILES['profpic']['name'];

$target = "profile_pictures/".$userId.'/'.$filename;
echo $target;

mysql_query("UPDATE users SET photo=\"$dir\" WHERE userId=$userId", $conn);
if(!file_exists("profile_pictures/".$userId)){
   mkdir("profile_pictures/".$userId, 700);
}
if(move_uploaded_file($_FILES['profpic']['tmp_name'], $target)) {
     echo "The file ". basename( $_FILES['profpic']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 
     echo "Sorry, there was a problem uploading your file."; 
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:41:24.867

我不确定这是它还是它是否有效，但请尝试更改`SESSION_start();`为`session_start();`

看起来您可能想要删除 / 甚至更好地创建时间/文件名的 md5，因此 profile_pictures/1/3.png 正在寻找 profile_pictures/1 作为目录

使用这样的东西可能会奏效

```
$file = md5($_FILES['profpic']['name'] . microtime(true)) . "." . pathinfo($_FILES['profpic']['name'], PATHINFO_EXTENSION); 
```

应该给你一些东西，比如`79054025255fb1a26e4bc422aef54eb4.png`使用 pathinfo() 保留扩展名

**编辑：** 再次查看您的问题，该文件不是给您`/1`的文件夹。我建议将所有个人资料头像放在一个文件夹中，而不是每个用户都有一个文件夹，其中包含一个文件。更改以下行

```
$target = "profile_pictures/".$userId."/"; 
```

至

```
$target = "profile_pictures/". $_FILES['profpic']['name'];
#OR
$target = "profile_pictures/" . $file;#if using md5 as above 
```

我仍然建议使用如上所述的 md5 来克服相同的文件名上传

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:01:07.490

我认为您正在尝试创建文件夹或目录并将文件一起上传。在这种情况下，我会建议你先执行这个命令：

```
mkdir("profile_pictures/".$userId , 700); 
```

在上传文件之前创建目录。

希望不会有问题...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:01:46.623

正如我告诉你的，你早先发布的错误表明文件夹“1”不存在或至少没有上传到的权限，所以我认为你必须检查它是否不存在，如果是这样的话创建它然后将其权限更改为合适的权限使用`chmod`并继续上传过程。希望这能解决你的问题:)

# css - CSS：左：0 或左：0px

> ID：15758549
> 
> 赞同：2
> 
> 时间：2013-04-02T07:32:14.510
> 
> 标签：css

将 left 指定为`left:0;`or是否重要`left:0px;`？据我所知，它可以在没有 Firefox 的错误控制台抱怨的情况下工作，但只是想知道它们是否具有完全相同的含义。

我正在编写一些将移动项目并使其扩展/收缩的 JavaScript。我猜上面的答案也会回答 if `height:0;`is the same as `height:0px;`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:35:37.043

好吧，它是相同的，但仅在零的情况下。零就是零，不管是什么单位。

如果指定非零值的维度，则还必须指定单位。

这是`left`属性规范：

```
'left'
Value:      <length> | <percentage> | auto | inherit 
```

如您所见，它的值为`<length>`。

现在，对于长度（[来自规范](http://www.w3.org/TR/css3-values/)）：

> 长度是指距离测量值，在属性定义中用 表示。长度是一个维度。零长度可以表示为“0”。（换句话说，对于零长度，单位标识符是可选的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:36:18.700

如果您将 0 放在`CSS`. 0 没有单位。它只是零，仍然被浏览器解释为 0。

但是如果你放`value > 0`你必须指定单位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:34:30.617

对于 CSS，无论单位 0 始终为 0。没有理由添加这个单位。

[规范清楚地表明](http://www.w3.org/TR/CSS21/syndata.html#values)：

> 在零长度之后，单元标识符是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:39:17.717

不，没关系。

```
left:0px;
left:0%; 
```

都等于 0。

# iphone - 如何在 Ipad 中详细显示 splitView 控制器的键盘？

> ID：15758564
> 
> 赞同：2
> 
> 时间：2013-04-02T07:33:27.663
> 
> 标签：iphone, ios, ipad

我正在开发 ipad 应用程序。在我的应用程序中，我使用的是拆分视图。现在，我只想在 detailView 窗口中显示键盘。我已经用谷歌搜索了，但我无法解决我的问题。如果有人解决了与此概念类似的问题，请给我解决方案

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:21:39.713

而不是将键盘添加到 appdelegate 或 self.view 添加到 detailviewcontroller.view。它将解决问题。

# svn - 查找 svn 更新后的冲突

> ID：15758571
> 
> 赞同：1
> 
> 时间：2013-04-02T07:34:03.063
> 
> 标签：svn, conflict

在更新了数千行更新的文件和目录后，我遇到了一个冲突：

```
Summary of conflicts:
  Skipped paths: 1 
```

**有没有办法找出冲突是什么？**（某处的日志或 svn 选项？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:45:01.197

此特殊冲突消息（跳过的路径）是在将同一文件添加到您的合并位置以及自上次合并后的合并位置时创建的。

```
svn status [PATH...] 
```

**[svn status](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.status.html)** (stat, st) 打印工作副本文件和目录的状态

' **C** ' ：项目的内容（相对于属性）与从存储库接收的更新冲突。

# java - 监听和响应面板内的事件？

> ID：15758572
> 
> 赞同：3
> 
> 时间：2013-04-02T07:34:06.443
> 
> 标签：java, swing

我有一个主面板。它包含 SubPanel1、SubPanel2 等。SubPanel 可以具有 JComponent 的任意组合，如按钮、单选按钮、文本框等。一个 SubPanel 可能与另一个相同，也可能不同。

如何让 MainPanel 监听并响应 SubPanels 内发生的操作？请给我看一些带有注释代码的好例子，它教我如何做到这一点。

照片 -

![在此处输入图像描述](https://i.stack.imgur.com/UCABE.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:34:01.767

您可能正在寻找[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。Java Swing 程序可以使用几种方法中的任何一种来实现该模式；[这里](https://stackoverflow.com/a/3072979/230513)引用了一些例子。因为组件可以接受任意数量的侦听器，所以一个重要的启发式方法是寻找父级可以侦听的现有子面板组件。在子面板的特定情况下，也可以将事件*转发*给父级的侦听器，如此处所建议[的](https://stackoverflow.com/q/2159803/230513)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:51:44.123

代码收集自[Oracle JavaSE 教程](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)：

```
public class Beeper ... implements ActionListener {
...
//where initialization occurs:
    //notice this line
    button.addActionListener(this);
...
public void actionPerformed(ActionEvent e) {
    ...//Make a beep sound...
}
} 
```

这就是您通常注册处理程序的方式吗？？？

***这***是什么意思？？？

```
 button.addActionListener(this); 
```

***这意味着，只要该按钮***对象发生操作，就调用当前对象的（***this***指）*** *actionPerformed***方法。因此，如果您传递***MainPanel***的引用而不是***this***并且您的主面板有一个方法***actionPerformed***并且它实现了***ActionListener*** *****，那么每当按钮触发一个***事件*****时，您的 Mainwindows 的 *** *actionPerformed* ** 就会被调用。

 ***所以改变了这一行：

```
 button.addActionListener(RefOfMainPanel); 
```

就这样。是的，就这么简单：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:35:31.733

在 MainPanel 中创建您的动作侦听器并在子面板中使用相同的侦听器。事件源应让您识别生成事件的子面板。***

# api - 缩放时标记聚类器不聚类

> ID：15758574
> 
> 赞同：2
> 
> 时间：2013-04-02T07:34:09.343
> 
> 标签：api, maps

我正在尝试学习 google api，我想使用标记聚类器。[我从这里](https://developers.google.com/maps/articles/phpsqlajax_v3)创建一个数据库 并按照谷歌所说的去做。我的代码是

`

```
<script src="markerclusterer.js" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
var customIcons = {
  restaurant: {
    icon: 'images/pin1.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'images/pin2.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function initialize() {
    var markers = null;
    var mcmarkers = [];
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 12,
    mapTypeId: 'satellite'
  });

  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    markers = xml.documentElement.getElementsByTagName("marker");

    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var lat = parseFloat(markers[i].getAttribute("lat"));
      var lng = parseFloat(markers[i].getAttribute("lng"))
      var point = new google.maps.LatLng(lat, lng);
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      mcmarkers.push(marker);
      var mc = new MarkerClusterer(map, mcmarkers);
      bindInfoWindow(marker, map, infoWindow, html);

    }
  });

}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('POST', url, true);
  request.send(null);
}

function doNothing() {}

//]]>
google.maps.event.addDomListener(window, 'load', initialize); 
```

`

当我第一次打开它时效果很好，但是当我放大或缩小时，除了最大缩小之外没有集群。我想不通。感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:03:27.120

```
 var mc = new MarkerClusterer(map, mcmarkers); 
```

此行不能放在 for 循环内。但在它之后。我犯了完全相同的错误:)。

# php - ZEND 内部服务器错误 (WAMP)

> ID：15758576
> 
> 赞同：2
> 
> 时间：2013-04-02T07:34:21.467
> 
> 标签：php, zend-framework

我已经安装了 zend 框架，我使用 wamp 服务器让它工作，然后在我插入的 httpconfig 中

```
NameVirtualHost 127.0.0.1 
```

```
DocumentRoot "C:\Workspace\zendy\public"
ServerName zendy

    <Directory "C:\Workspace\zendy\public">
         Options FollowSymLinks
        AllowOverride AuthConfig Limit Indexes

            Order allow,deny
            Allow from all
    </Directory> 
```

重新启动 wamp 服务器后...出现以下消息

> 内部服务器错误

我知道虚拟主机中的错误。但是，我无法解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:18:07.960

您可以通过单击 wamp 托盘图标并进入 Apache 设置来直接启用重写模块。像下面的例子。

![在此处输入图像描述](https://i.stack.imgur.com/l6txa.png)

如果您仍然发现一些问题，您可能需要将 zendy 服务器名称添加到您的系统 C:\Windows\System32\drivers\etc\hosts 文件中：

```
127.0.0.1 zendy 
```

此外，您必须取消注释 Apache httpd.conf 中的虚拟主机：

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:36:31.157

只需查看 Apache 错误日志，您应该会看到究竟是什么导致了内部服务器错误

# java - 如何将 /Date(-6847824600000+0530)/ 转换为日期时间

> ID：15758579
> 
> 赞同：0
> 
> 时间：2013-04-02T07:34:31.243
> 
> 标签：java

我的 Web 服务返回日期

```
"dateRequired": "/Date(1357101103000+0530)/",
"etaExport": "/Date(-6847824600000+0530)/",
"etaImport": "/Date(-6847824600000+0530)/", 
```

作为一个 json 。我想知道将这些 un​​ix 日期转换为 DD-MM-YYYY HH:MM 格式的最佳方法，并想限制“/Date”和“/”。什么是最好和最有效的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T07:38:31.760

这些数字看起来像自大纪元以来的毫秒数，后跟时区指示符，这*很奇怪*，因为通常如果您在大纪元以来的毫秒数（或秒数），则表示日期/时间为 UTC。因此，您要做的第一件事是查看 Web 服务的文档并找出数字的含义。

然后就是使用正则表达式（或仅`String#substring`）来提取数字，`Long.parseLong`将它们变成一个长的，实例化一个`Date`对象（例如，`new Date(longNumber)`），并处理 Web 服务期望您执行的任何时区数学运算。对于最后一点，在 JDK 中你会想要一个`Calendar`.，或者如果你想要更容易使用和更强大的东西，很多人都喜欢[JodaTime](http://joda-time.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T22:55:27.453

嗨虽然上面的答案是正确的，但作为替代方案，您可以使用以下方法

首先使用以下方法从 json 中提取长日期时间。

```
 String JsonDate = jsonGroup.getString("Date");

        int idx1 = JsonDate.indexOf("(");
        int idx2 = JsonDate.indexOf("+");

        if (idx1 > 0 && idx1 < idx2 && idx2 < JsonDate.length()) {
            String s = JsonDate.substring(idx1 + 1, idx2);  
        } 
```

一旦有了日期，您就可以将 Long 转换为 Date

```
 if (!s.equalsIgnoreCase("null")) {
        Long date1 = Long.parseLong(s);
        Date dt1 = new Date(date1);

        holder.TxtPunchoutDate.setText(getDateCurrentTimeZone(dt1));
    } 
```

并将起始日期设置为 UTC，然后将其转换回本地时间，如下所示

```
public static String getDateCurrentTimeZone(Date dt) {
    try {
        //Convert DATE to UTC DATETIME
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(
                "MMM dd yyyy hh:mm:ss aa ");
         simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
        //simpleDateFormat.setTimeZone(TimeZone.getDefault());
         //Convert to LocalDATE from UTC
         Date fromGmt = new Date(dt.getTime() + TimeZone.getDefault().getOffset(dt.getTime()));

                    return new SimpleDateFormat("MMM dd yyyy hh:mm:ss aa").format(fromGmt).toString();

    } catch (Exception e) {
    }
    return "";
} 
```

如前所述，这是一种替代方法，而不是正确的方法。虽然如果有人想重构这个，请大家随时欢迎。

谢谢

# ios - DropBox 文件创建问题

> ID：15758580
> 
> 赞同：0
> 
> 时间：2013-04-02T07:34:37.050
> 
> 标签：ios, dropbox-api, core-api

我正在开发一个 ios 应用程序。在该应用程序中，我使用的是 Dropbox 的核心 api。我可以在 Dropbox 上创建一个文件夹。但我坚持在 Dropbox 的那个文件夹上创建一个文件。使用核心 API。是否可以在 ios 中使用核心 api 在 Dropbox 上创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:55:27.617

是的，使用 Dropbox Core API 创建文件的最简单方法是使用 /files_put 端点：

[https://www.dropbox.com/developers/core/api#files_put](https://www.dropbox.com/developers/core/api#files_put)

对于较大的文件，您应该使用分块上传调用：

[https://www.dropbox.com/developers/core/api#chunked-upload](https://www.dropbox.com/developers/core/api#chunked-upload) [https://www.dropbox.com/developers/core/api#commit-chunked-upload](https://www.dropbox.com/developers/core/api#commit-chunked-upload)

# php - 通过joomla组件安装sql文件

> ID：15758583
> 
> 赞同：1
> 
> 时间：2013-04-02T07:34:42.300
> 
> 标签：php, joomla, joomla1.5

最近我们为我们的客户制作了一个自定义组件。现在我们通过以下 xml 文件为这个组件构建了安装文件：

```
<?xml version="1.0"?>
<install type="component" version="1.5.0">  
<name>customblog</name>  
<author>Jogesh Sharma</author>  
<creationDate>March 2013</creationDate>  
<copyright>Copyright (C) 2013 Open Source Matters. All rights reserved.</copyright>  
<license>http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL</license>  
<authorEmail>hello@webomnizz.com</authorEmail>  
<authorUrl>http://webomnizz.com</authorUrl>  
<version>1.5.0</version>  
<description>This component manage all the Blog sections!</description>  
<installfile>install.customblog.php</installfile>  
<uninstallfile>uninstall.customblog.php</uninstallfile>  

<files>      
    <filename>customblog.php</filename>      
    <filename>customblog.html.php</filename>
</files>
<files folder="images">
    <filename>style.css</filename>
    <filename>plus-icon.png</filename>
    <filename>twitter-icon.png</filename>
    <filename>facebook-icon.png</filename>
</files>      

<install>      
    <sql>          
        <file driver="mysql">install.mysql.sql</file>      
    </sql>  
</install>    

<uninstall>      
    <sql>          
        <file driver="mysql">uninstall.mysql.sql</file>      
    </sql>  
</uninstall>      

<administration>      
    <menu img="js/ThemeOffice/component.png">Blog Component</menu>      
    <submenu>          
        <menu link="option=com_customblog">Blog</menu>
        <menu link="option=com_customblog&amp;c=general">General Options</menu>
    </submenu>            
    <files>          
        <filename>install.mysql.sql</filename>          
        <filename>uninstall.mysql.sql</filename>          
        <filename>admin.customblog.php</filename>          
        <filename>admin.customblog.html.php</filename>          
        <filename>toolbar.customblog.php</filename>          
        <filename>toolbar.customblog.html.php</filename>          
        <filename>index.html</filename>
    </files>
    <files folder="tables">
        <filename>customblog.php</filename> 
        <filename>general.php</filename>
    </files>  
</administration>
</install> 
```

但问题是我们的 sql 文件`install.mysql.sql`没有安装在 joomla 中，我不知道为什么，并且在安装过程中它没有提供任何错误消息等。我使用的是 joomla 1.5.26，

谁能告诉我我错过了什么？？

**更新：**这是我的`install.mysql.sql`文件：

```
CREATE TABLE IF NOT EXISTS `#__blog` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `title` varchar(255) NOT NULL,
 `full_text` mediumtext NOT NULL,
 `state` tinyint(1) NOT NULL,
 `publish_up` date NOT NULL,
 `gp_button` varchar(255) DEFAULT NULL,
 `fb_button` varchar(255) DEFAULT NULL,
 `tw_button` varchar(255) DEFAULT NULL,
 `user_id` tinyint(2) NOT NULL,
 `social_key` tinyint(2) DEFAULT NULL,
 PRIMARY KEY (`id`)
);

CREATE TABLE `#__generalopt` (
  `id` int(2) unsigned NOT NULL auto_increment,
  `title` varchar(200) default NULL,
  `gp_status` tinyint(2) default NULL,
  `fb_status` tinyint(2) default NULL,
  `tw_status` tinyint(2) default NULL,
  `userImg` varchar(200) default NULL,
  PRIMARY KEY  (`id`)
);
INSERT INTO `jos_generalopt` VALUES(1, 'General Options', 1, 1, 1, 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/User_icon_2.svg/120px-User_icon_2.svg.png'); 
```

**结构**： ![在此处输入图像描述](https://i.stack.imgur.com/gTYwz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:57:29.330

您必须放入`install.mysql.sql`文件`admin`夹，即使路径中没有提到它。保持xml不变，只需创建一个新文件夹`admin`并移动`install.mysql.sql`到那里，然后Joomla就能找到它

# java - java同时读写

> ID：15758584
> 
> 赞同：2
> 
> 时间：2013-04-02T07:34:43.163
> 
> 标签：java, file, simultaneous

我正在处理我正在处理读写文件的java应用程序。但我想同时做这个过程。由于我的文件是日志文件，因此我使用了一些时间间隔从中读取内容`java.util.Timer`。在这段时间间隔内，我试图在文件中写入一些内容，但这并没有在我的日志文件中更新。

**我的计时器课是**

```
public class Timer extends java.util.Timer {

 public void startTimer() {
  Timer t = new Timer();
  Task task = new Task();
  t.schedule(task, 0, 10000);
 }
} 
```

**我的班级形式哪个文件读写班级被称为**

```
public class Task extends TimerTask {

 @Override
 public void run() {
  System.out.println("In task ....");
  try {
   SMSQuestions smsQuestions = new SMSQuestions();

   smsQuestions.sendSMSAnswer();
  }
  catch(Exception e)
  {
   e.printStackTrace();
  }
 }
} 
```

**我的文件读写类是**

```
public void sendSMSAnswer()
    {
        long sender;
        String question;

        try {
            BufferedReader br = new BufferedReader(new FileReader("C:/temp/NowSMS/TEST.log"));
            String line = br.readLine();

            while (line != null) {
                sender = 0;
                question = "";
                System.out.println(line);
                line = br.readLine();
            }
            //To delete all contents in file
            BufferedWriter bw = new BufferedWriter(new FileWriter("C:/temp/NowSMS/TEST.log"));
            bw.write("");

            getDetails();

        }catch(Exception exp)
        {
            exp.printStackTrace();
        }
    } 
```

我的问题是当我通过写入新内容来更新我的日志文件时，它无法更新所以我的问题是：在 java 中是否可以同时读写文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:09:15.770

我建议您查看随机访问文件（请参阅[http://docs.oracle.com/javase/tutorial/essential/io/rafs.html](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)）。这个 API 使用起来有点复杂，因为您将读取字节，而不是行，但它应该为您提供所需的内容。

如果您不想处理 NIO，可以改用[http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:54:55.337

试试[这个](https://stackoverflow.com/questions/6842028/java-how-to-read-and-write-a-file-simultaneously)话题。但你会得到的唯一答案是，它只适用于少数操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:53:19.577

关于您的代码，我有两件事要说。第一：我认为你错过了应该关闭 br 和 bw 的 finally 块。尝试：终于{

```
br.close();
bw.close(); 
```

} 在 catch 块之后。

第二：在打开文件时将内容写入文件不是一个好主意。我的意思是，如果你用 br 打开一个文件，最好给 bw 另一个文件路径

# java - 如何减少委托样板文件？

> ID：15758588
> 
> 赞同：0
> 
> 时间：2013-04-02T07:34:54.743
> 
> 标签：java, oop, delegation, boilerplate

我有一个实现接口的类。还有另一个类也实现了这个接口，第二个类的一个实例支持我的类的实现。

对于接口指定的许多方法，我的类只是将它们直接转发给第二个类。

```
public class MyClass implements MyInterface
{
    private OtherClass otherClassInstance; // Also implements MyInterface.
    // ...
    void foo() { otherClassInstance.foo(); }
    void bar() { otherClassInstance.bar(); }
    void baz() { otherClassInstance.baz(); }
    // ...
} 
```

简单地从第二个类派生我的类将消除所有这些，但这没有意义，因为这两个类彼此无关（除了实现一个公共接口之外）。它们代表不同的东西——碰巧我的很多类的实现都复制了另一个类的实现。换句话说，我的类是在第二类之上实现的，但它本身并不是第二类的子集。众所周知，继承是为了表达“is-a”关系，而不是共享实现，所以在这种情况下是不合适的。

[Joshua Bloch 演讲的这一](http://www.youtube.com/watch?feature=player_detailpage&v=aAb7hSCtvGw#t=2524s)部分很好地说明了这种情况。

我知道 Java 对委派没有任何语言支持。但是，是否至少有某种方法可以清理我的类的实现，所以它不是那么多余？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:57:25.273

一个答案并不是对您的实际问题的真正答案：

我会说，与样板一起生活。让 IDE 为您生成它。示例：在 Netbeans 中，添加私有 ArrayList 字段，将光标设置到您希望方法出现的位置，点击 alt-insert，选择“ *Generate Delegate Method...* ”，单击要为其创建委托的方法对话框打开，提交，检查生成的方法并让它们做正确的事情，你就完成了。

这有点难看，但当你只处理一个类时，它仍然比开始弄乱反射更可取，就像听起来一样。您的课程可能是您将完成并全面测试的课程，然后希望永远不会再碰它。反射会产生不会消失的运行时成本。在这种情况下，在源文件中遭受自动生成的样板文件可能是更可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:47:05.193

第一种使用方式[http://java.sun.com/javase/6/docs/api/java/lang/reflect/Proxy.html](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Proxy.html)见教程[http://docs.oracle.com/javase/1.4.2/docs /guide/reflection/proxy.html](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)

使用 AOP 的第二种方式，您可以创建拦截特定类的所有调用的调度程序

对于这两种方式，您都需要使用反射 API 管理方法处理

**编辑显示想法** 以下代码从上面的教程中得到了一些修改（参见调用方法中的 youListImpl.getRealArrayList() ）

```
public class DebugProxy implements java.lang.reflect.InvocationHandler {

    private YouListImpl youListImpl;

    public static Object newInstance(Object obj) {
    return java.lang.reflect.Proxy.newProxyInstance(
        obj.getClass().getClassLoader(),
        obj.getClass().getInterfaces(),
        new DebugProxy(obj));
    }

    private DebugProxy(Object obj) {
    this.obj = obj;
    }

    public Object invoke(Object proxy, Method m, Object[] args)
    throws Throwable
    {
        Object result;
    try {
        System.out.println("before method " + m.getName());
        result = m.invoke(youListImpl.getRealArrayList(), args);
        } catch (InvocationTargetException e) {
        throw e.getTargetException();
        } catch (Exception e) {
        throw new RuntimeException("unexpected invocation exception: " +
                       e.getMessage());
    } finally {
        System.out.println("after method " + m.getName());
    }
    return result;
    }
} 
```

# jquery - 使用 jQuery 检测 youtube 视频格式

> ID：15758589
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:04.013
> 
> 标签：jquery, youtube, youtube-api

如何`iframe`使用 jQuery 获得嵌入式 Youtube 视频的正确格式？

我需要知道视频最初（在 Youtube 上）是 3:4 格式还是 9:16 格式或其他格式。

我需要这个来删除添加到视频及其缩略图的顶部和底部的一些黑条（来自我的问题：[以正确的 9:16 格式显示 Youtube 视频和缩略图）。](https://stackoverflow.com/questions/15684503/show-youtube-video-and-thumbnail-in-correct-916-format)如果我能找到正确的格式，我也许可以通过调整高度来隐藏这些条。

**更新**

我使用 jQuery 的插件[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)通过简单的 URL 来播放 youtube 视频。这是驱动代码：

```
$(document).ready(function(){

  /*Youtube videos*/
  $("a[rel^='prettyPhoto']").prettyPhoto({
    animation_speed: 'fast',
    slideshow: 8000,
    hideflash: true,
    show_title: false,
    changepicturecallback: function(){
      /*At video start do some stuff*/          
    },
    social_tools: false
  });

}); 
```

这意味着，我自己不会为 youtube 电影添加和创建视频 iframe。我对 Youtube 的 API 没有太多经验。有没有直接找到原始视频比例的方法？

# windows - 通过 CMD 复制/粘贴文件，并将日期附加到粘贴的文件中

> ID：15758592
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:11.683
> 
> 标签：windows, batch-file, cmd

```
@ECHO OFF
SET /P parent_folder=Please specify parent directory: 
SET /P destination_folder=Please specify destination: 
set NOW=%date:~10,4%-%date:~4,2%-%date:~7,2%--%time:~0,2%.%time:~3,2%
FOR %%n in (%parent_folder%*.*) DO (
  copy "%%n" "%destination_folder%" 
  set /A count+=1
) 
```

到目前为止它还没有工作。如果有人让它工作，我可以将日期附加到`%destination_folder%`我的结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:20:27.357

您可以将时间戳附加到目标文件名，如下所示：

```
for %%n in ("%parent_folder%\*.*") do (
  copy "%%~n" "%destination_folder%\%%~nn_%NOW%%%~xn"
  set /a count+=1
) 
```

# matlab - 以单词结尾字母的概率？

> ID：15758594
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:18.003
> 
> 标签：matlab

我有一个大约 9000 个小写单词的文本文件。我想找到每个单词中最后一个字母的概率（字母频率/单词数）。

这是我的第一次尝试：

```
function [ prma ] = problast()
counts = zeros(1,26);
%refer to cell index here to get alphabetic number of char
s = regexp('abcdefghijklmnopqrstuvwxyz','.','match');
f = fopen('nouns.txt');
ns = textscan(f,'%s');
fclose(f);
%8960 is the length of the file 
for i =1:8960
 c = substr(ns(i),-1,1);
 num = find(s == c);
 counts(num) = num;
end
prma = counts / 8960;
disp(prma); 
```

这给了我这个错误：

```
Undefined function 'substr' for input arguments of type 'cell'. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:29:20.263

首先，你不需要`regexp`你的问题。解决您的问题的一个非常简单有效的方法是：

```
clear;
close;
clc;

counts = zeros(1,26);

f = fopen('nouns.txt');
ns = textscan(f,'%s');
fclose(f);

for i =1:numel(ns{1})
    c = ns{1}{i}(end);
    counts('c'-96) = counts('c'-96)+1;
end

prma = counts / numel(ns{1});
disp(prma); 
```

例如，如果`"noun.txt"`要包含

```
paris
london 
```

输出将是：

```
 Columns 1 through 8

         0         0         0         0         0         0         0         0

  Columns 9 through 16

         0         0         0         0         0    0.5000         0         0

  Columns 17 through 24

         0         0    0.5000         0         0         0         0         0

  Columns 25 through 26

         0         0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:45:41.473

该[`textscan`](http://www.mathworks.co.uk/help/matlab/ref/textscan.html)文档指出结果是一个[单元格数组](http://www.mathworks.co.uk/help/matlab/cell-arrays.html)。如果您不熟悉元胞数组，我强烈建议您阅读我提供的链接，但总而言之，您的代码应该如下所示：

```
c = substr(ns{i},-1,1); 
```

请注意从`(` `)`to的变化`{` `}`- 这是访问元胞数组元素的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:30:15.220

怎么样：

```
f = fopen('nouns.txt');
ns = textscan(f, '%s');
fclose(f);

num = cellfun(@(x)(x(end) - 'a' + 1), ns{:}); %// Convert to 1-26
counts = hist(num, 1:26);                     %// Count occurrences
prob = counts / numel(ns{:})                  %// Compute probabilities 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T08:27:35.747

不确定是什么导致了问题，但这应该可以解决问题，假设它`ns{i}`包含您的字符串：

```
str = ns{i}; 
c = str(end); 
```

如果这不起作用，则应该不会太难玩一点并`str`基于创建变量`ns`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:41:21.627

感谢大家的建议，我自己解决了这个问题，但我回去尝试了最后一个答案，效果很好。这是我想出的：

```
%Keep track of counts
counts = zeros(1,26);
%Refer to this array to get alphabetic numeric value of character
s = regexp('abcdefghijklmnopqrstuvwxyz','.','match');
f = fopen('nouns.txt');
ns = textscan(f,'%s');
fclose(f);
%8960 = length of nouns.txt
for i =1:8960
    %string from vs
    str = ns{1}{i};
    %last character in that string
    c = str(length(str));
    %index in s
    temp = strfind(s,c);
    index = find(not(cellfun('isempty',temp)));
    counts(index) = counts(index)+1;
 end

%Get probabilities
prma = counts / 8960;
disp(prma); 
```

我投票支持每个人帮助我进行头脑风暴。

# visual-studio-2010 - 如何在 Visual Studio 命令行工具的开头运行脚本？

> ID：15758595
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:20.683
> 
> 标签：visual-studio-2010, command-line, batch-file, msbuild

我正在使用 Visual Studio 2010 我需要一个脚本来启动 Visual Studio 控制台并执行一些命令更具体地说是这样的：

```
%comspec% /k ""C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"" x86
msbuild smothing
cd somewhere
etc... 
```

但是，在执行第一行并进入 Visual Studio 模式后，脚本停止

**我怎样才能让它一次性运行 msbuild 和其他所有东西？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:42:17.450

我需要用这个改变顶行：

```
call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 
```

# web-services - 要学习的 Web 服务的主要组件是什么？以及如何在 Apache 等服务器上部署 Web 服务？

> ID：15758596
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:26.587
> 
> 标签：web-services, tomcat, webserver

我是 webservice 的新手，我想知道应该在何时何地使用和公开 webservices？

在 Tomcat 或任何其他服务器上部署和使用 Web 服务（wsdl 文件）需要什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:47:52.070

从与技术无关的东西来看，重要的知识是堆栈组合：WS-(Servlet)-HTTP-(TLS)-TCP/IP（括号中的可选层）。作为一个平台，您通常会尝试一些轻量级的选项，例如 Jetty 或 Winstone，然后再使用 Apache Tomcal。

如果您现在正在追求*任何*Web 服务，那么明智的做法就是选择一些成熟的 Java 标准技术，例如 JAX-WS。将有一个关于 java.net 的很好的教程，各自的 Maven 打包和部署插件以及 IDE 集成装备。一旦你有一个简单的东西工作，你就会有更多关于 SO 回答的具体问题。

# php - 在侧边栏中显示类别后面的工厂数量。代码点火器

> ID：15758599
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:31.577
> 
> 标签：php, codeigniter, join, count, records

我有一个带有类别的侧边栏。当我单击一个类别时，它会向我显示位于该类别中的工厂。

我使用codeigniter中的连接来做到这一点。

现在我想显示一个类别中有多少工厂。例如：

```
Categories.

Cars (2)
Books (7)
Animals (45) 
```

所以很简单，必须显示有多少工厂拥有该特定类别。

我试图做一个简单的 count_all_results 但后来我得到了工厂的总数。但我希望他们按类别的特定 id 计数。

我的模型功能：

```
function categorieen_getall($segment3)
{
    $this->db->where('categorieen.idcategorieen', $segment3);
    $this->db->select('*');
    $this->db->from('bedrijfcategorieen');
    $this->db->join('categorieen', 'categorieen.idcategorieen = bedrijfcategorieen.idcategorieen');
    $this->db->join('bedrijven', 'bedrijven.idbedrijven = bedrijfcategorieen.idbedrijven');
    $query = $this->db->get();
    $result = $query->result();
    /*
    echo '<pre>';
    print_r($result);
    */
    return $result;
} 
```

我的控制器功能：

```
 function get_All()
    {
        $data['cat'] = $this->categorieen_model->categorieen_getall($segment3);
        $this->load->view('views/sidebar', $data);
    } 
```

我的观点：

```
 <div id="sidebar">
    <?php
    echo '<h3>Categorieën</h3>';
    echo ($this->db->count_all_results('categorieen')); 

    ?>

        <hr>
        <br/>
        <?php
        echo '<ul>';
        if(isset($cat) && is_array($cat)){
            foreach($links as $k => $value){

                echo '<li>';
                echo '<br>';
                echo '<a href="'.base_url().'home/categorie/'.$value->idcategorieen.' ">' .$value->Categorie. '</a>';
                echo '</li>';

            }
        }
        echo '<ul>';
        /*
        if(isset($cat ) && is_array($cat )){
            foreach($cat as $key => $row){
                echo "Categorie:"; echo $row->Categorie;
                echo "<br />";
                echo $row->idcategorieen;
                echo "<br />";
                echo $row->Bedrijfsnaam;
            }
        }
        */
        ?>
</div> 
```

我的数据库方案：

```
Factories
--------
idfactories
factoryname
adress
email
...

Categories
----------
idcategories
Category

Factorycategories
-----------------
idfactorycategories
idcategories
idfactories 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:38:03.153

这不太合适，因为**我知道有更好的方法可以做到这一点**，但这将为您完成工作：

```
// Get categories
$categories = array();

$query = $this->db->query("select * from `Categories` order by `idcategories`");

if($query->num_rows() > 0)
{
  foreach($query->result_array() as $row)
  {
    $query_count = $this->db->query("select `idfactorycategories` from `Factorycategories` where `idcategories` = {$row['idcategories']}");
    $factory_count = $query_count->num_rows();

    $categories[] = array(
      'count' => $factory_count 
    );
  }
} 
```

为方便起见，您可以先在`foreach`循环中获取类别，然后为每个类别提交`factories`表查询，以获取具有相关类别 ID 的工厂的相关计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T10:07:23.793

我又问了一个问题。有同样的问题，我解决了。

用我得到的解决方案看看我自己的答案！

[计算联接表中的结果并在侧边栏中的 () 之间显示](https://stackoverflow.com/questions/15787419/count-results-in-joined-table-and-show-between-in-sidebar/16316088#16316088)

感谢帮助我的人：）

# javascript - 带有图像的 JavaScript 视频

> ID：15758600
> 
> 赞同：2
> 
> 时间：2013-04-02T07:35:33.830
> 
> 标签：javascript, xml, html, image, video

我知道可以拍摄一系列图像并使用 javascript 为快速分离中的每个图像快速设置不透明度从 1 到 0。我之前实际上已经非常成功地完成了它，尽管我大约只使用了 41 张图像。720便士。

不过，我的问题是，仅使用 html、css 和 javascript 制作整个视频（4-10 分钟长）是否可行。显然，缓存中留下的图像太多，因此您必须经常清空特定图像的缓存，这也需要非常好的互联网连接，但是您认为值得吗？试图？

尝试这个有什么明显的优点和缺点吗？

（要清楚，我不是要求代码来实现它，因为我已经开发了大部分代码，只是你认为它的实用性而不是 youtube 或 vimeo 等......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:54:50.513

说白了，我觉得不实用。

这里有几个原因：

*   **图像数量。** 视频往往是每秒 30 帧左右。对于 4 分钟的视频，大约有 7,200 张图像。
*   **下载时间。**以 720 像素高下载 7,200 张图像需要大量带宽，不仅对​​用户而言，对服务器而言也是如此。
*   **DOM 加载。** 7,200 个图像需要在彼此后面正确定位的 DOM 元素数量相同。
*   **渲染。** 每次我们制作动画（淡出）时，浏览器都必须计算哪些元素是可见的以及这对用户意味着什么（像素颜色等）

当然，我们可以对此进行优化：

*   **下载该指定时间所需的图像。** 如果连接可以每秒下载 30 张图像，那么我们加载我们需要的内容，然后启动播放序列。
*   **完成后删除元素。** 随着序列的进行，我们可以假设不再需要这些图像。完成这些图像后，我们可以销毁这些元素，从而释放一些资源。
*   **将图像放在多个子域/位置。** 浏览器倾向于一次下载每个域的 1 个资产。现代浏览器可能会下载 6 个或更多。但是，如果我们将这些资产拆分为多个子域，我们可以增加同时下载的数量，从而增加响应时间。
*   **创建大型精灵。** 将序列放在一个或多个大型精灵上，并使用 Javascript 正确定位元素。这使我们可以进行一次/几次下载，并消除多次下载的开销。

视频经过编码，因此浏览器不必进行所有这些像素计算和动画。每一帧都不是完整的图像，而是当前帧和下一帧之间的增量。（我过于简化了。）

但这种方法经常用于需要交互性或想要通过 iOS 自动播放挂断的片段。同样，对于大序列不实用，但对于较短的序列绝对可行。

# c - 对于 Z3 中的所有量词

> ID：15758601
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:34.087
> 
> 标签：c, z3

我想看看`Z3_mk_forall_const()`Z3 中的 C-API 示例。

我正在尝试编码-

```
(define-fun max_integ ((x Int) (y Int)) Int 
    (ite (< x y) y x)) 
```

我尝试的是跟随，但我得到了`type error`

```
#include <stdio.h>
#include <stdlib.h>
#include <z3.h>

void error_handler(Z3_context c, Z3_error_code e)
{
    printf("Error code: %d\n", e);
    printf("Error msg : %s\n", Z3_get_error_msg(e));
    exit(0);
}

Z3_context mk_context_custom(Z3_config cfg, Z3_error_handler err)
{
    Z3_context ctx;

    Z3_set_param_value(cfg, "MODEL", "true");
    ctx = Z3_mk_context(cfg);
    Z3_set_error_handler(ctx, err);

    return ctx;
}

Z3_context mk_context()
{
    Z3_config  cfg;
    Z3_context ctx;
    cfg = Z3_mk_config();
    ctx = mk_context_custom(cfg, error_handler);
    Z3_del_config(cfg);
    return ctx;
}

Z3_ast mk_var(Z3_context ctx, const char * name, Z3_sort ty)  
{
    Z3_symbol   s  = Z3_mk_string_symbol(ctx, name);
    return Z3_mk_const(ctx, s, ty); 
}

Z3_ast mk_int_var(Z3_context ctx, const char * name)
{
    Z3_sort ty = Z3_mk_int_sort(ctx);
    return mk_var(ctx, name, ty);
}

int main()
{
    Z3_context      ctx;
    Z3_func_decl    f;
    Z3_sort         int_sort;
    Z3_symbol       f_name;
    Z3_ast xVar, yVar;
    Z3_app bound[2];
    Z3_ast implication;
    Z3_sort       f_domain[2];

    // Make context.
    ctx = mk_context();

    int_sort    = Z3_mk_int_sort(ctx);
    f_name      = Z3_mk_string_symbol(ctx, "max_integer");
    f_domain[0] = int_sort;
    f_domain[1] = int_sort;
    f = Z3_mk_func_decl(ctx, f_name, 2, f_domain, int_sort);

    xVar = mk_int_var(ctx, "x");
    yVar = mk_int_var(ctx, "y");

    bound[0] = (Z3_app)xVar;
    bound[1] = (Z3_app)yVar;

    implication = Z3_mk_ite(ctx, Z3_mk_lt(ctx, xVar, yVar), xVar, yVar);

    Z3_mk_forall_const(ctx, 0, 2, bound, 0, 0, implication);

    // Delete the context.
    Z3_del_context(ctx);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:13:20.747

您收到类型错误，因为`implication`它是一个整数表达式。表达式的参数`forall`必须是布尔表达式。我假设您正在尝试创建公式

```
(forall ((x Int) (y Int)) (= (max_int x y) (ite (< y x) x y))) 
```

这是修改后的示例。请注意，我也修改`Z3_mk_lt(ctx, xVar, yVar)`为`Z3_mk_lt(ctx, yVar, xVar)`. 否则，您将定义`min`函数。

```
int main()
{
    Z3_context      ctx;
    Z3_func_decl    f;
    Z3_sort         int_sort;
    Z3_symbol       f_name;
    Z3_ast xVar, yVar;
    Z3_app bound[2];
    Z3_ast ite;
    Z3_sort f_domain[2];
    Z3_ast f_app;
    Z3_ast eq;
    Z3_ast q;

    // Make context.
    ctx = mk_context();

    int_sort    = Z3_mk_int_sort(ctx);
    f_name      = Z3_mk_string_symbol(ctx, "max_integer");
    f_domain[0] = int_sort;
    f_domain[1] = int_sort;
    f = Z3_mk_func_decl(ctx, f_name, 2, f_domain, int_sort);

    xVar = mk_int_var(ctx, "x");
    yVar = mk_int_var(ctx, "y");

    bound[0] = (Z3_app)xVar;
    bound[1] = (Z3_app)yVar;

    // Create the application f(x, y)
    { Z3_ast args[2] = {xVar, yVar}; 
      f_app = Z3_mk_app(ctx, f, 2, args);
    }

    // Create the expression ite(y < x, x, y)
    ite = Z3_mk_ite(ctx, Z3_mk_lt(ctx, yVar, xVar), xVar, yVar);

    // Create the equality
    eq = Z3_mk_eq(ctx, f_app, ite);

    // Create quantifier
    q = Z3_mk_forall_const(ctx, 0, 2, bound, 0, 0, eq);

    printf("%s\n", Z3_ast_to_string(ctx, q));

    // Delete the context.
    Z3_del_context(ctx);

    return 0;
} 
```

# php - Wordpress 每页循环一个类别

> ID：15758602
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:35.450
> 
> 标签：php, wordpress, loops

所以我有一个独立的 Wordpress 网站，里面有很多不同的类别：

2013 年 3 月 2013 年 2 月 2013 年 1 月 等等...

我希望我的 Wordpress 网站的主页显示最新的类别。此时将是 2013 年 3 月。然后，如果您返回一个页面，它将显示 2013 年 2 月，返回另一个页面并且您在 2013 年 1 月，等等。

我将如何修改 wordpress 循环来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:47:05.980

这有点奇怪。您想将月份用作类别。

我建议您整理 REAL 类别中的帖子以获得更好的 SEO，并且在您的循环中，您只需更改 WP_query 以显示当月的所有帖子并更改 WP_Query 以获取以前的条目。但对我来说，这不是一个好的概念。

# android - 一个活动中的两个 Google 地图 API SupportMapFragments。一个我不能动的。安卓

> ID：15758607
> 
> 赞同：0
> 
> 时间：2013-04-02T07:35:41.860
> 
> 标签：android, google-maps, fragment

所以我有这种情况。我有一项内容 FrameLayout 的活动。然后我创建两个 SupportMapFragments 并将其添加到内容框架中。当然，一次只能看到一个，当我想看到另一个时，我会隐藏第一个并显示第二个。但结果是我只能用第一张地图移动，而不能用另一张地图移动。是那个错误还是我需要做的事情与仅显示/隐藏片段不同？

非常感谢 ：）

**编辑1：**

这是我基本上在做什么的示例代码：

```
SupportMapFragment mapFragment1, mapFragment2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapFragment1 = new SupportMapFragment();
    mapFragment2 = new SupportMapFragment();

    FragmentTransa ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.mapFrame, mapFragment1);
    ft.add(R.id.mapFrame, mapFragment2);
    ft.hide(mapFragment2);
    ft.commit();
}

private void switch() {       
   FragmentTransa ft = getSupportFragmentManager().beginTransaction();
   if (mapFragment1.isVisible()) {
      ft.hide(mapFragment1);
      ft.show(mapFragment2);
   } else {
      ft.hide(mapFragment2);
      ft.show(mapFragment1);
   }
   ft.commit();
} 
```

我在按钮单击时调用 switch() 并且我只能使用第一个创建的那个妈妈移动。

# php - PHPAgi 进程中的星号 AGI

> ID：15758611
> 
> 赞同：1
> 
> 时间：2013-04-02T07:35:45.263
> 
> 标签：php, asterisk

我在 php 中为我的星号 11.3.0 创建了一个 agi，当我在服务器中使用 ps ux 时，我几乎没有 agi 调用卡在队列中，它显示
`6:42 /usr/bin/php -q /var/lib/asterisk/agi-bin/php/myagi.php Unknown 190090`

许多像这样的进程卡在队列中。

所有带有数字的过程 `0:00 /usr/bin/php -q /var/lib/asterisk/agi-bin/php/myagi.php 954332 190053`

如果来自未知号码的呼叫，我需要知道如何调试我的 agi。

## 我的 AGI 脚本

```
#!/usr/bin/php -q
<?php
pcntl_signal(SIGHUP, SIG_IGN);
require('phpagi/phpagi.php');

$agi                = new AGI();

$calleridnum    = $agi->request['agi_callerid'];
$callerid       = $agi->request['agi_callerid'];
$callidname     = $agi->request['agi_calleridname'];
$phoneno        = $agi->request['agi_dnid'];
$channel        = $agi->request['agi_channel'];
$uniqueid       = $agi->request['agi_uniqueid'];

if(substr($phoneno,0,3)==011)
{
    $phoneno = substr($phoneno, 3);
}

$URL = '12121@mysip.abc.com';

$dialstr = "SIP/" . $URL;

$res = $agi->exec("DIAL $dialstr");

$dialstatus = $agi->get_variable("DIALSTATUS");
$answeredtime = $agi->get_variable("ANSWEREDTIME");

if($dialstatus['data'] != "ANSWER")
{
    //No answer
}
if($dialstatus['data'] == "ANSWER") 
{
    $agi->verbose("I am in Cutting Balance!!");
}
savecdr($URL,"$callerid", $phoneno, $trunk, $dialstatus['data'], $answeredtime['data'], $PerMinuteCharges,$callstart,$TriggerCharge,$OID,$callidname,$IP,$NodeID,$MinutesUsed,$TalkTime,$TTCut,$pTTRemain,$pHash[Expiry],$pMinTotal,$VOID);

$agi->hangup();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:02:56.687

要调试 agi，您需要从 ssh 执行以下操作

1）停止星号守护进程

```
 asterisk -rx "core stop now" 
```

2）在控制台中启动星号（不分离）并启动agi调试 - 将显示所有错误

```
 asterisk -vvvvgc
  agi set debug on
  core set verbose 5 
```

3) 现在检查。您已经看到了星号和您的 AGI 脚本之间的所有对话以及脚本生成的所有错误。

如果仍然没有帮助，也可以尝试“core set debug 5”，但输出会很难理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:48:35.780

当频道挂断（[呼叫断开](https://stackoverflow.com/questions/14980183/call-disconnect-for-asterisk/14982283#14982283)）时，您会忽略 SIGHUP 信号。

添加`g`到表盘：

`g: Proceed with dialplan execution at the next priority in the current extension if the destination channel hangs up.`

```
$agi->exec('DIAL', $dialstring.",30,g"); 
```

**AGI 调试**

您可以在脚本中打印一些调试消息：

```
// debug infos
$agi->verbose("before dial",3); 
// ...
$agi->verbose("Number: ".$argv[2]); 
```

连接到 Asterisk（使用 Verbosity 3）： `asterisk -rvvv`

使用 CLI 命令 agi show commands 列出可用的 agi 命令。
`*CLI> agi show`

在 Asterisk CLI 上观看 AGI 和您的调试消息。
`*CLI> agi set debug on`

当给出“未知”并记录到文件时，您可以将 AGI 脚本设置为详细：

```
if ($argv[1] == "Unknown") {
  define ('VERBOSE', true);
} else {
  define ('VERBOSE', false);
}

if (VERBOSE) file_put_contents("/tmp/unknown.log", time().": ".$msg, FILE_APPEND | LOCK_EX); 
```

# iphone - 图像数组中叠加图像的快照

> ID：15758613
> 
> 赞同：0
> 
> 时间：2013-04-02T07:36:02.463
> 
> 标签：iphone, objective-c, camera, overlay, augmented-reality

我在滚动视图下有多个图像。当我单击一个图像时，它将显示相机叠加视图的叠加图像。但是当我单击按钮时，它不会拍摄相机叠加图像的快照。我参考[http://www.musicalgeometry.com/?p=1681#comment-37185](http://www.musicalgeometry.com/?p=1681#comment-37185)

代码：

```
- (void)ButtonPressed {

[self captureStillImageWithOverlay:[NSArray arrayWithObjects:[UIImage imageNamed:@"img1.png"],[UIImage imageNamed:@"img2.png"],[UIImage imageNamed:@"img3.png"],[UIImage imageNamed:@"img4.png"],[UIImage imageNamed:@"img5.png"], nil]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:52:01.637

您可能使用`UIImagePickerController`. 它返回没有叠加的原始相机图像，因此您必须自己添加叠加，并正确定位。

# for-loop - 存储来自 for 循环的多路数据

> ID：15758616
> 
> 赞同：1
> 
> 时间：2013-04-02T07:36:33.673
> 
> 标签：for-loop

我的聚合系统有以下三向数据 (IXJXK)：Z (23x4x3)

```
Z(:,:,1) = [0 6.70 NaN NaN
0.14 5.79 27212.52 17735.36
0.26 5.04 26545.98 17279.95
0.35 4.43 26007.91 16902.22
0.43 3.92 25567.61 16586.18
0.49 3.50 25202.48 16319.65
0.54 3.15 24898.99 16094.87
0.59 2.85 24648.07 15906.19
0.63 2.60 24441.06 15748.28
0.66 2.38 24270.42 15616.51
0.68 2.20 24130.05 15506.90
0.71 2.05 24014.78 15415.87
0.73 1.92 23921.74 15341.59
0.74 1.80 23847.57 15281.63
0.76 1.70 23789.06 15233.54
0.77 1.61 23744.29 15195.99
0.78 1.54 23710.83 15167.01
0.79 1.47 23687.05 15145.38
0.80 1.41 23671.47 15129.72
0.81 1.36 23662.99 15119.14
0.81 1.31 23660.58 15112.77
0.82 1.27 23663.32 15109.86
0.82 1.23 23670.44 15109.74];

Z(:,:,2) = [0 6.70 NaN NaN
0.17 5.63 24826.03 16191.26
0.30 4.80 24198.87 15757.83
0.40 4.14 23720.27 15417.52
0.47 3.61 23347.38 15147.16
0.54 3.19 23058.01 14933.52
0.59 2.85 22836.18 14766.65
0.63 2.57 22667.24 14637.38
0.66 2.34 22539.27 14537.68
0.69 2.15 22445.60 14463.08
0.71 2.00 22379.90 14409.04
0.73 1.87 22336.70 14371.44
0.75 1.76 22311.74 14347.04
0.76 1.66 22301.57 14333.13
0.77 1.58 22303.32 14327.31
0.78 1.51 22314.83 14327.75
0.79 1.45 22334.27 14333.00
0.80 1.40 22360.11 14341.81
0.81 1.36 22391.09 14353.22
0.81 1.32 22426.11 14366.39
0.82 1.28 22464.22 14380.67
0.82 1.25 22504.61 14395.53
0.82 1.23 22546.61 14410.57];

Z(:,:,3) = [0 6.70 NaN NaN
0.19 5.45 22687.71 14805.97
0.34 4.53 22119.24 14408.55
0.44 3.84 21720.37 14120.95
0.52 3.31 21437.68 13912.54
0.58 2.90 21244.60 13766.39
0.63 2.59 21117.60 13667.05
0.66 2.34 21040.03 13602.91
0.69 2.14 21000.70 13565.85
0.72 1.98 20990.89 13549.24
0.73 1.85 21003.53 13547.54
0.75 1.74 21033.19 13556.41
0.76 1.65 21075.85 13572.54
0.77 1.58 21128.37 13593.46
0.78 1.52 21188.17 13617.25
0.79 1.47 21253.16 13642.44
0.80 1.42 21321.69 13668.02
0.80 1.39 21392.34 13693.18
0.81 1.36 21463.83 13717.38
0.81 1.33 21535.27 13740.33
0.81 1.31 21605.87 13761.81
0.82 1.29 21674.84 13781.70
0.82 1.27 21741.68 13799.97]; 
```

其中 I 是时间（y 轴），J 是变量（x 轴），K 是批次（z 轴）。但是，由于我想使用这些数据进行 PCA 和 PLS 分析，我必须将这个（时间 x 变量 x 批次）维度更改为（批次 (I) x 变量 (J) x 时间 (K)）维度，这意味着新 Z 是 Z(3 x 4 x 23)。

为此，我可以从每个平板（K 维）中提取第一行值，并使用以下命令将它们重新排列为新的矩阵平板：

```
T1=squeeze(Z(1,:,:))’ 
```

因此，我使用 for 循环来获取所有 23 个平板的结果。但我不能（不知道如何）将结果存储在工作区中，除了最后一个。我使用的命令：

```
[I,J,K] = size(Z);
SLAB = zeros(K,J,I); %preallocating the matrix; where I=23,J=4,K=3
for t = 1 : I %here I = 23
slab = squeeze(Z(t,:,:))’; %removing semicolon here I can see the wanted results in command window
SLAB = slab;
end 
```

希望这里的任何人都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:47:35.403

我找到了解决方案；

因为我知道平板的大小为 (K,J,I)，所以必须在 for 循环中提供相同的格式：

```
[I,J,K] = size(Z);
SLAB = zeros(K,J,I); %preallocating the matrix; where I=23,J=4,K=3
for t = 1 : I %here I = 23
slab(:,:,t) = squeeze(Z(t,:,:))’; 
end 
```

# php - 如何在 PHP 中连接数组值

> ID：15758617
> 
> 赞同：5
> 
> 时间：2013-04-02T07:36:33.907
> 
> 标签：php

我有一个 PHP 数组：

```
array
  0 => 
    array
      'cid' => string '18427' (length=5)
  1 => 
    array
      'cid' => string '17004' (length=5)
  2 => 
    array
      'cid' => string '19331' (length=5) 
```

我想加入这些值，所以我可以得到这样的字符串：

```
18427,17004,19331 
```

我尝试了`implode`PHP函数，但出现错误：

```
A PHP Error was encountered 
```

如何只加入其中的值`cid`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T07:37:45.910

您必须首先映射数组值：

```
echo join(',', array_map(function($item) {
    return $item['cid'];
}, $arr)); 
```

如果没有[闭包](http://www.php.net/manual/en/functions.anonymous.php)，它看起来像这样：

```
function get_cid($item)
{
  return $item['cid'];
}

echo join(',', array_map('get_cid', $arr)); 
```

也可以看看：[`array_map()`](http://php.net/array_map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:38:41.810

您可以遍历每个元素

```
$result = '';
foreach($array as $sub_array){
  $result .= $sub_array['cid'] . ',';
  }
$result = substr($result, -2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:47:41.277

```
// set a new variable for their the value of cid
$cid = array();

// then loop to call them one by one.
foreach($css as $style){
 foreach($style as $row){
    array_push($cid,$row);
 }
}

// then the new $cid array would contain the values of your cid array
 $cid = array('1','2','3'); 
```

*注意：那么你现在可以内爆或淹没你想要获得你想要的数据集..*

# c# - 可以为实体框架模型创建包装类吗？

> ID：15758627
> 
> 赞同：0
> 
> 时间：2013-04-02T07:37:13.883
> 
> 标签：c#, entity-framework, entity-framework-5

模型：

```
public class Student
{
    public int StudentID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Gender Gender { get; set; }
    public string Address { get; set; }
} 
```

数据库上下文：

```
public class MyContext : DbContext
{

   public MyContext():base(connectionstring)
   {
   }

   public DbSet<Student> Student { get; set; }

} 
```

包装类：

```
public class StudentWrapper
{

    public int StudentID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Gender Gender { get; set; }
    public string Address { get; set; }

} 
```

执行：

```
public void AddStudent()
{

   using(MyContext ctx = new MyContext())
   {
      StudentWrapper newStudent = new StudentWrapper(); // If ever I wanted this `working`

      ctx.Student.Add(newStudent);
   }

} 
```

我想为我的模型类制作一个包装器，而不是直接在 CRUD 操作中使用我的模型，这样做是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:49:19.550

恕我直言，

除非您想在包装器中编写一些自定义逻辑，否则这不是一个好主意。我认为您正在使用您的模型（或者我会说 DTO 对象）进行通信。

如果您添加包装器，则还需要将其映射回您的 DTO。（AutoMapper 可能会有所帮助）

因此，除非您有非常具体的理由这样做，否则为我创建包装器是没有意义的。其中一种情况是在 WPF 或 Silverlight 中编写一个应用程序，您需要一个更改感知模型（即实现 INotifyPropertyChanged 接口的模型）

此外，如果您需要扩展模型的行为，请在继承之前考虑扩展方法。

# c++ - 如何获得非常量迭代器

> ID：15758629
> 
> 赞同：5
> 
> 时间：2013-04-02T07:37:24.533
> 
> 标签：c++, c++11, auto

```
std::map<char,int> dict;
...
auto pmax = dict.begin(); // here i get const iterator 
```

我可以“明确指出”获得的值是非常量类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:39:51.283

如果你`dict`不是`const`，[`begin`](http://en.cppreference.com/w/cpp/container/map/begin)将返回一个`std::map<char,int>::iterator`. 现在，键是`const`，但值不是。

`auto`应该给你一个`std::map<char,int>::iterator`；你有相反的证据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:57:20.180

查看您的[代码](http://codepad.org/qcFBNZK8)，您基本上是在实施`std::max_element`。因此，您可以将最后一个输出行重写为：

```
 std::cout << std::max_element(begin(dict), end(dict),
        [](decltype(*begin(dict)) a, decltype(*begin(dict)) b) {
            return a.second < b.second;
        })->first << std::endl; 
```

诚然，这`decltype(*begin(dict))`很丑陋，希望可以通过 C++1y 中的通用 lambda 来弥补。

关键是，无论您是否有 a`map::iterator`或`map::const_iterator`何时取消引用它，结果都将是`std::pair`a`const key_type`作为第一个参数。因此，即使您有两个可变数据（例如，通过 获取`iterator`），您也不能重新分配这些迭代器引用的完整数据。因此，将不起作用，因为您正在尝试覆盖**和**.`it1, it2``map::begin()``pair``*it1 = *it2``mapped_type` **`const key_type`**

# python - 我应该在 Python 中使用哪个微数据解析器

> ID：15758630
> 
> 赞同：6
> 
> 时间：2013-04-02T07:37:28.810
> 
> 标签：python, beautifulsoup, microdata

我正在寻找一个高质量的 Python 中的 HTML 微数据解析器。它不必非常快，但我希望它支持尽可能多[的规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html)，包括`itemref`.

这是我到目前为止发现的：

*   [https://github.com/edsu/microdata](https://github.com/edsu/microdata)
*   [https://github.com/RDFLib/pymicrodata](https://github.com/RDFLib/pymicrodata)
*   [https://pypi.python.org/pypi/pelican-microdata/0.1](https://pypi.python.org/pypi/pelican-microdata/0.1)

您是否使用过这些库中的任何一个？有什么好处和坏处？

我也对解析格式不佳的 HTML 文档感到好奇。[您是否找到了处理混乱输入的微数据解析器，或者您是否首先通过BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)之类的东西运行输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:39:31.203

您希望将微数据解析为什么格式？

[https://github.com/RDFLib/pymicrodata](https://github.com/RDFLib/pymicrodata)将解析为 RDF。

如果你想要 JSON，你应该使用[https://github.com/edsu/microdata](https://github.com/edsu/microdata)，它最近引起了一些关注，应该更符合规范。

[https://pypi.python.org/pypi/pelican-microdata/0.1](https://pypi.python.org/pypi/pelican-microdata/0.1)看起来像是一种为特定静态站点生成器*生成*微数据的方法，所以我认为它不会有助于解析。

我不知道上述任何一个解析器对格式不佳的 HTML 的容忍度如何。如果您知道一些使用 Microdata 的格式不佳的标记，我很想看看 Ruby 解析器如何处理这些情况。

# iphone - 如何为 pdf 阅读器 IOS 应用程序添加可滚动工具栏

> ID：15758631
> 
> 赞同：0
> 
> 时间：2013-04-02T07:37:29.490
> 
> 标签：iphone, objective-c, ipad, pdf-viewer, vfr-reader

我已经从[https://github.com/vfr/Reader](https://github.com/vfr/Reader)下载了 pdf 阅读器。这看起来不错，但底部的页面栏或工具栏是稳定的。它将所有页面添加到一个工具栏中，而不提供任何滚动功能。有人可以帮我将其更改为可滚动视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:56:58.123

我通过将 readerpagebar 更改为从 UIScrollviewController 而不是 UIViewController 派生来实现这一点，并将滚动条的内容大小增加到安装在其中的图像数量。如果有人需要更多信息，我会在这里发布代码。

# java - 多文档查询的 Solr 性能

> ID：15758636
> 
> 赞同：1
> 
> 时间：2013-04-02T07:37:49.370
> 
> 标签：java, performance, solr, lucene

我想让 Solr 始终检索通过搜索找到的所有文档（我知道 Solr 不是为此而构建的，但无论如何），我目前正在使用以下代码执行此操作：

```
 ...
    List<Article> ret = new ArrayList<Article>();
    QueryResponse response = solr.query(query);
    int offset = 0;
    int totalResults = (int) response.getResults().getNumFound();
    List<Article> ret = new ArrayList<Article>((int) totalResults);
    query.setRows(FETCH_SIZE);
    while(offset < totalResults) {
        //requires an int? wtf?
        query.setStart((int) offset);
        int left = totalResults - offset;
        if(left < FETCH_SIZE) {
            query.setRows(left);
        }
        response = solr.query(query);
        List<Article> current = response.getBeans(Article.class);
        offset += current.size();
        ret.addAll(current);
    }
   ... 
```

这可行，但如果查询超过 1000 次点击，则速度会很慢（我在这里读到过。这是由 Solr 引起的，因为我每次都在设置开始 - 出于某种原因 - 需要一些时间）。有什么更好（更快）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:45:52.157

要改进建议的答案，您可以使用流式响应。这是特别[为获取所有结果的情况](https://issues.apache.org/jira/browse/SOLR-2112)而添加的。正如你在 Solr 的 Jira 中看到的那样，那个人想做和你一样的事情。这已在 Solr 4 中实现。

[这也在 Solrj 的 javadoc 中有所描述](http://lucene.apache.org/solr/4_0_0/solr-solrj/org/apache/solr/client/solrj/SolrServer.html#queryAndStreamResponse%28org.apache.solr.common.params.SolrParams,%20org.apache.solr.client.solrj.StreamingResponseCallback%29)。

Solr 将在开始发送响应之前打包响应并创建一个完整的 XML/JSON 文档。然后，您的客户需要解开所有内容并将其作为列表提供给您。通过使用流式处理和并行处理（在使用这种排队方法时可以这样做），性能应该会进一步提高。

是的，您将失去自动 bean 映射，但由于性能是这里的一个因素，我认为这是可以接受的。

这是一个示例单元测试：

```
public class StreamingTest {

  @Test
  public void streaming() throws SolrServerException, IOException, InterruptedException {
    HttpSolrServer server = new HttpSolrServer("http://your-server");
    SolrQuery tmpQuery = new SolrQuery("your query");
    tmpQuery.setRows(Integer.MAX_VALUE);
    final BlockingQueue<SolrDocument> tmpQueue = new LinkedBlockingQueue<SolrDocument>();
    server.queryAndStreamResponse(tmpQuery, new MyCallbackHander(tmpQueue));
    SolrDocument tmpDoc;
    do {
      tmpDoc = tmpQueue.take();
    } while (!(tmpDoc instanceof PoisonDoc));
  }

  private class PoisonDoc extends SolrDocument {
    // marker to finish queuing
  }

  private class MyCallbackHander extends StreamingResponseCallback {
    private BlockingQueue<SolrDocument> queue;
    private long currentPosition;
    private long numFound;

    public MyCallbackHander(BlockingQueue<SolrDocument> aQueue) {
      queue = aQueue;
    }

    @Override
    public void streamDocListInfo(long aNumFound, long aStart, Float aMaxScore) {
      // called before start of streaming
      // probably use for some statistics
      currentPosition = aStart;
      numFound = aNumFound;
      if (numFound == 0) {
        queue.add(new PoisonDoc());
      }
    }

    @Override
    public void streamSolrDocument(SolrDocument aDoc) {
      currentPosition++;
      System.out.println("adding doc " + currentPosition + " of " + numFound);
      queue.add(aDoc);
      if (currentPosition == numFound) {
        queue.add(new PoisonDoc());
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:37:58.307

您可以通过增加`FETCH_SIZE`. 因为你得到了所有的结果，所以除非你关心内存或类似的东西，否则分页是没有意义的。如果 1000 个结果容易导致内存溢出，我会说你目前的表现似乎相当出色。

因此，我会尝试一次获取所有内容，并将其简化为：

```
//WHOLE_BUNCHES is a constant representing a reasonable max number of docs we want to pull here.
//Integer.MAX_VALUE would probably invite an OutOfMemoryError, but that would be true of the
//implementation in the question anyway, since they were still being stored in the list at the end.
query.setRows(WHOLE_BUNCHES);
QueryResponse response = solr.query(query);
int totalResults = (int) response.getResults().getNumFound(); //If you even still need this figure.
List<Article> ret = response.getBeans(Article.class); 
```

如果您需要保留分页：

您正在执行第一个查询：

```
QueryResponse response = solr.query(query); 
```

并从中填充找到的结果的数量，但您没有在响应中提取任何结果。即使你在这里保持分页，你至少可以在这里消除一个额外的查询。

这：

```
int left = totalResults - offset;
if(left < FETCH_SIZE) {
    query.setRows(left);
} 
```

是不必要的。 `setRows`指定要返回的最大行数，因此要求超过可用行数不会导致任何问题。

最后，什么都没有，但我不得不问：`setStart`如果不是，你会期望采取什么论据`int`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T08:51:18.057

**使用以下逻辑批量获取 solr 数据以优化 solr 数据获取查询的性能：**

```
public List<Map<String, Object>> getData(int id,Set<String> fields){
        final int SOLR_QUERY_MAX_ROWS = 3;
        long start = System.currentTimeMillis();
        SolrQuery query = new SolrQuery();
        String queryStr = "id:" + id;
        LOG.info(queryStr);
        query.setQuery(queryStr);
        query.setRows(SOLR_QUERY_MAX_ROWS);
        QueryResponse rsp = server.query(query, SolrRequest.METHOD.POST);
        List<Map<String, Object>> mapList = null;
        if (rsp != null) {
            long total = rsp.getResults().getNumFound();
            System.out.println("Total count found: " + total);
            // Solr query batch
            mapList = new ArrayList<Map<String, Object>>();
            if (total <= SOLR_QUERY_MAX_ROWS) {
                addAllData(mapList, rsp,fields);
            } else {
                int marker = SOLR_QUERY_MAX_ROWS;
                do {
                    if (rsp != null) {
                        addAllData(mapList, rsp,fields);
                    }
                    query.setStart(marker);
                    rsp = server.query(query, SolrRequest.METHOD.POST);
                    marker = marker + SOLR_QUERY_MAX_ROWS;
                } while (marker <= total);
            }
        }

        long end = System.currentTimeMillis();
        LOG.debug("SOLR Performance: getData: " + (end - start));

        return mapList;
    }

private void addAllData(List<Map<String, Object>> mapList, QueryResponse rsp,Set<String> fields) {
            for (SolrDocument sdoc : rsp.getResults()) {
                Map<String, Object> map = new HashMap<String, Object>();
            for (String field : fields) {
                map.put(field, sdoc.getFieldValue(field));
            }
            mapList.add(map);
        }
    } 
```

# ruby-on-rails - RubyInstaller for Windows 问题

> ID：15758640
> 
> 赞同：3
> 
> 时间：2013-04-02T07:38:07.790
> 
> 标签：ruby-on-rails, ruby, windows

我遇到了 ruby​​installer 包的问题。我删除了指示引导我的路径，这可能是导致问题的原因之一。在我输入已下载 execjs gem 文件的“rails s”后出现错误消息。但是，它仍然会在之后重复错误消息。请让我知道我的代码文盲大脑做错了什么。顺便说一句，这是针对 WINDOWS 的。

```
C:\Sites>cd railsinstaller_demo

C:\Sites\railsinstaller_demo>rails s
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/run
times.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://gi
thub.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUn
available)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/l
ib/execjs.rb:5:in `<module:ExecJS>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/l
ib/execjs.rb:4:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:72:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:72:in `block (2 levels) in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:70:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:70:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:59:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler/runtime.rb:59:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.3.4/
lib/bundler.rb:132:in `require'
        from C:/Sites/railsinstaller_demo/config/application.rb:7:in `<top (requ
ired)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:53:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:53:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'

    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:32:43.260

将“C:\Windows\System32”添加到我的 PATH 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:40:22.410

您需要一个 JavaScript 运行时，例如[NodeJS](http://nodejs.org/download/)。Rails 在开发模式下使用它来编译资产。

# hadoop - 为什么要禁用 IpV6 Hadoop 安装

> ID：15758641
> 
> 赞同：4
> 
> 时间：2013-04-02T07:38:17.683
> 
> 标签：hadoop

我已经在 Ubuntu 系统上成功安装并运行了 Hadoop。我正在关注一些文章的教程。

我很困惑为什么每一步都建议禁用 ipv6 ？

如果我不在我的系统上禁用我的 ipv6 会有影响吗？

任何人都可以回答吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:06:03.147

[如此处](http://wiki.apache.org/hadoop/HadoopIPv6)所述：IPv6 网络当前不支持 Apache Hadoop。它仅在 IPv4 堆栈上进行了测试和开发。Hadoop 需要 IPv4 才能工作，并且只有 IPv4 客户端可以与集群通信。如果您的组织只迁移到 IPv6，您会遇到问题。

查看[HADOOP-3437](https://issues.apache.org/jira/browse/HADOOP-3437) 和[HADOOP-6056](https://issues.apache.org/jira/browse/HADOOP-6056)以了解为什么必须禁用 IPv6 才能使 Hadoop 工作。

# maven - 使用 tomcat-maven-plugin 将单个战争部署到多个 tomcat

> ID：15758644
> 
> 赞同：4
> 
> 时间：2013-04-02T07:38:32.650
> 
> 标签：maven, tomcat, deployment, war, maven-tomcat-plugin

我正在尝试使用`mvn tomcat:deploy`. 由于这些是侦听器项目（又名工作人员），因此它们的重叠名称是无关紧要的。当我有

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <configuration>
        <url>`http://192.168.116.54:8080/`manager/text</url>
        <server>standaardTomcat</server>
        <path>/picalcworker</path>
    </configuration>
</plugin> 
```

将在该服务器上部署一场战争。虽然我不能拥有同一个 groupId artifactId 组合的多个“插件”，所以只需复制它并更改 url 将导致警告并且只有一个（最新的）要部署。
这个插件似乎进一步允许：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.1</version>
    <executions>
        <execution>
        <id>1</id>
        <phase>deploy</phase>
            <goals>
                <goal>deploy</goal>
            </goals>
            <configuration>
                <url>http://192.168.116.52:8080/manager/text</url>
                <server>standaardTomcat</server>
                <path>/picalcworker</path>
            </configuration>
        </execution>
        <execution>
        <id>2</id>
        <phase>deploy</phase>
            <goals>
                <goal>deploy</goal>
            </goals>
            <configuration>
                <url>http://192.168.116.53:8080/manager/text</url>
                <server>standaardTomcat</server>
                <path>/picalcworker</path>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

但随后`mvn tomcat:deploy`会尝试部署到`localhost`，因为`<configuration><url>`在这个插件的根目录中是空的（但我不能在那里提供单个 url，因为我需要多个）。也可以是tomcat7 和tomcat6。我真的很喜欢部署和取消部署选项。有谁知道如何使这项工作，或一些合理的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:22:03.933

目前不可能。请注意，插件现在托管在 Apache 上，请参见[http://tomcat.apache.org/maven-plugin.html](http://tomcat.apache.org/maven-plugin.html)。你可以为此加载一个jira吗？这需要一些代码（也许你可以添加一个补丁:-)）

# c# - 如何以编程方式获取 Openoffice writer 上的默认模板

> ID：15758645
> 
> 赞同：1
> 
> 时间：2013-04-02T07:38:32.947
> 
> 标签：c#, default, openoffice.org, openoffice-writer

如何以编程方式获取 openoffice writer 的默认模板？

openoffice的以下代码等效于什么：

```
var word = new Microsoft.Office.Interop.Word.Application();
string template = word.NormalTemplate.FullName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:44:31.120

我能做到这一点的唯一方法是创建一个新的空白文档，然后阅读用于创建它的模板，尽管我期待在应用程序级别有这样的属性，希望这对其他人有帮助：

```
private XComponentContext oStrap = uno.util.Bootstrap.bootstrap();    
XMultiServiceFactory oServMan = (XMultiServiceFactory) oStrap.getServiceManager();
XComponentLoader oDesk = (XComponentLoader) oServMan.createInstance("com.sun.star.frame.Desktop");
string url = @"private:factory/swriter";
PropertyValue[] propVals = new PropertyValue[0];
XComponent oDoc = oDesk.loadComponentFromURL(url, "_null", 0, propVals);
var DefaultTemplate = ((XDocumentPropertiesSupplier)oDoc).getDocumentProperties().TemplateURL; 
```

# qt - 在 OS X 上的 Qt Creator 中编译：“dyld：未加载库”

> ID：15758646
> 
> 赞同：5
> 
> 时间：2013-04-02T07:38:34.980
> 
> 标签：qt, dyld

我四处寻找，找不到答案。我正在尝试在 Mac OS X Lion 上的 Qt Creator (Qt 5.0.1) 中编译一些示例，但它一直给我错误。这是完整的错误：

```
dyld: Library not loaded: /Users/bld.qt/bamboo-agent-home/xml-data/build-dir/DQTC-RELEASE5LGPL-OSX106/______________________________PADDING______________________________/lib/QtWidgets.framework/Versions/5/QtWidgets
Referenced from: /Users/<bleh>/Qt5.0.1/5.0.1/clang_64/examples/widgets/widgets/codeeditor-build-Desktop_Qt_5_0_1_clang_64bit-Debug/codeeditor.app/Contents/MacOS/codeeditor
Reason: image not found 
```

任何人都知道任何修复？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T10:46:28.907

看起来它找不到 QtWidgets 库。将此添加到您的 .pro 文件中

> qt += 小部件

基于[从 Qt 4 到 5 的转换，](http://qt-project.org/wiki/Transition_from_Qt_4.x_to_Qt5)其中 QtWidgets 是一个单独的模块

# hibernate - 休眠默认连接池

> ID：15758647
> 
> 赞同：18
> 
> 时间：2013-04-02T07:38:38.117
> 
> 标签：hibernate, connection-pooling

Hibernate 默认使用连接池吗？如果是这样，*connection.pool_size* 的默认值是多少？它不会与 *hibernate.connection.release_mode* 冲突吗？连接池的全部想法不是关闭连接吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T13:36:28.893

默认休眠连接池（不应在生产中使用）的默认限制为 1，因为它仅用于简单测试。然而，这可以通过 hibernate.properties 文件进行配置，因此值得检查它是否在您的项目中定义。

有问题的财产是：

hibernate.connection.pool_size

这方面的信息主要包含在此链接中：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

虽然这并没有直接指定默认连接池大小，但它确实包含您可能想要的关于 hibernate 中的连接池主题的大部分信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T08:39:57.473

[默认情况下](http://www.javalobby.org/java/forums/t18406.html)，Hibernate 提供了通过适当设置属性从 JNDI 获取数据源实现 (javax.sql.DataSource) 的能力：

默认 JNDI 连接池最大大小为 -**无最大大小**

在这里您可以找到 JNDI 池的默认值。

[http://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html](http://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html)

为了获得高效的性能，您应该使用 a`third party pool`以获得最佳性能和稳定性。

如果您使用的是应用程序服务器，您可能希望使用内置池（通常使用 JNDI 获取连接）。如果您不能或不想使用应用程序服务器的内置连接池，Hibernate 支持其他几个连接池，例如

*   c3p0

*   Apache DBCP

*   Proxool

[http://www.informit.com/articles/article.aspx?p=353736&seqNum=4](http://www.informit.com/articles/article.aspx?p=353736&seqNum=4)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-16T17:42:17.987

我没有找到关于连接池的 Hibernate 默认值的文档，所以我查看了源代码并找到了（hibernate-core-4.3.8.Final 中的类 DriverManagerConnectionProviderImpl）：

```
hibernate.connection.initial_pool_size = 1;
hibernate.connection.min_pool_size = 1;
hibernate.connection.pool_size = 20;
hibernate.connection.pool_validation_interval = 30;
hibernate.connection.autocommit = false; 
```

# android - Android应用程序如何在应用程序内部存储和获取文件

> ID：15758649
> 
> 赞同：4
> 
> 时间：2013-04-02T07:38:55.093
> 
> 标签：android, file

我有一个应用程序让我通过文件资源管理器选择一个文件（文件存储在 sd 上），然后读取它。

我想修改它，所以它将文件直接放入应用程序并从“内部”读取文件。我必须将文件放入项目的哪里？我怎样才能访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-20T10:44:54.127

您可以使用以下代码在项目中保存文件：

```
 File cDir = getApplication().getExternalFilesDir(null);
 File saveFilePath = new File(cDir.getPath() + "/" + "yourfilename"); 
```

您可以在设备中的应用程序包名称的“文件”文件夹中看到保存的文件。

在您的设备中尝试以下路径：

```
File manager >> Android >> data >> "your package name" >> files >> new file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:40:43.503

是的，您可以将文件放入 /assets 文件夹，然后按如下方式检索：

```
AssetManager assetManager = getAssets();
InputStream instream = assetManager.open("file.txt"); 
```

或 res/raw 文件夹：

```
InputStream raw = getResources().openRawResource(R.raw.file); 
```

如果您想修改它，您只能将文件写入外部存储（例如 sdcard）或内部存储（在您的应用程序文件夹下`data/data/package_name/`）。如果您将文件存储到外部存储中，它将一直存在，直到用户手动或以编程方式删除文件。但是如果您将此文件存储到内部存储中，如果用户删除应用程序或清除应用程序缓存，它将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:44:56.537

[演示](http://niravranpara.blogspot.in/2013/03/android-internal-and-external-storage.html)

```
File myExternalFile;

if (!isExternalStorageAvailable() || isExternalStorageReadOnly()) {
            saveToExternalStorage.setEnabled(false);
        } else {
            myExternalFile = new File(getExternalFilesDir(filepath), filename);
        } 
```

保存外部存储（FileOutputStream）

```
try {
                FileOutputStream fos = new FileOutputStream(myExternalFile);
                fos.write(myInputText.getText().toString().getBytes());
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            myInputText.setText("");
            responseText.setText("Saved to External Storage.(StorageFile.txt)"); 
```

获取外部存储（FileInputStream）

```
try {
                FileInputStream fis = new FileInputStream(myExternalFile);
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(fis));
                String strLine;
                while ((strLine = br.readLine()) != null) {
                    myData = myData + strLine;
                }
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            myInputText.setText(myData);
            responseText
                    .setText("Data retrieved from Internal Storage.(StorageFile.txt)"); 
```

# python - Python 模块未正确安装（linux）

> ID：15758650
> 
> 赞同：0
> 
> 时间：2013-04-02T07:38:58.547
> 
> 标签：python, linux, module, installation, sdist

在过去的几天里，我一直在从 Head First Python 学习 Python。

我已经到了必须构建我制作的模块的分发包的地步，称为nester，并将其安装在我的系统上。安装模块后，我必须将其导入脚本并使用导入模块中的函数。

尝试从保存原始nester.py 的文件夹以外的任何文件夹导入模块时，出现以下错误（这表明模块未正确安装）：

```
james@james-Inspiron-1764:~$ python3.3
Python 3.3.0 (default, Sep 29 2012, 17:14:58) 
[GCC 4.7.2] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import nester
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named 'nester'
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python3/dist-packages/apport/__init__.py", line 4, in <module>
    from apport.report import Report
  File "/usr/lib/python3/dist-packages/apport/report.py", line 30, in <module>
    import apport.fileutils
  File "/usr/lib/python3/dist-packages/apport/fileutils.py", line 23, in <module>
    from apport.packaging_impl import impl as packaging
  File "/usr/lib/python3/dist-packages/apport/packaging_impl.py", line 20, in <module>
    import apt
  File "/usr/lib/python3/dist-packages/apt/__init__.py", line 21, in <module>
    import apt_pkg
ImportError: No module named 'apt_pkg'

Original exception was:
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named 'nester'
>>> 
```

这就是我构建和安装模块的方式：

```
james@james-Inspiron-1764:~/python/headfirst/chapter2/nester$ python3.3 setup.py sdist
/usr/lib/python3.3/distutils/dist.py:257: UserWarning: Unknown distribution option: 'pymodules'
  warnings.warn(msg)
running sdist
running check
warning: sdist: manifest template 'MANIFEST.in' does not exist (using default file list)

warning: sdist: standard file not found: should have one of README, README.txt

writing manifest file 'MANIFEST'
creating nester_jc-1.4.0
making hard links in nester_jc-1.4.0...
hard linking setup.py -> nester_jc-1.4.0
Creating tar archive
removing 'nester_jc-1.4.0' (and everything under it)
james@james-Inspiron-1764:~/python/headfirst/chapter2/nester$ sudo python3.3 setup.py install
[sudo] password for james: 
/usr/lib/python3.3/distutils/dist.py:257: UserWarning: Unknown distribution option: 'pymodules'
  warnings.warn(msg)
running install
running build
running install_egg_info
Removing /usr/local/lib/python3.3/dist-packages/nester_jc-1.4.0.egg-info
Writing /usr/local/lib/python3.3/dist-packages/nester_jc-1.4.0.egg-info 
```

如果从 ~/python/headfirst/chapter2/nester 内部启动 python，我可以成功导入 nester，但如果我从任何其他位置开始，则不能。这是我安装模块的方式有问题，还是我的 python 安装有问题？

# java - 计算代码有问题？

> ID：15758652
> 
> 赞同：-4
> 
> 时间：2013-04-02T07:39:05.950
> 
> 标签：java, if-statement

此代码应该接收两个整数和一个操作，然后计算数字。这只是整个程序的一部分，其他一切正常，但计算错误。当我运行整个过程时，我得到的唯一正确的输出是减法。它出什么问题了？

```
public static double calculate(int operand1, int operand2, char operation)
    { 
        if (operation=='^')
        {
            return (Math.pow(operand1,operand2));
         }
        else if(operation=='+')
        {
            return ((operand1)+(operand2));
        }
        else if(operation=='-')
        {
            return (operand1-operand2);
        }
        else if(operation=='*')
        {
            return (operand1*operand2);
        }
        else
        {
            if (operand2==0)
            {
                System.out.println("Cant divide by zero");
            }

            return(operand1/operand2);
        }

    } 
```

* * *

这是程序的完整代码

```
import java.util.Scanner; 
public class Calculator 
{ 
public static void main(String[] args) 
{ 
    printIntro();
    Scanner kb = new Scanner(System.in); 
    String answer = "yes"; 
    while (answer.equals("yes"))  
{ 
 System.out.println("Enter your problem");
 String fullExpression=kb.nextLine(); 
 fullExpression=fullExpression.replaceAll("\\s","");
 int length=fullExpression.length();
 char op1=fullExpression.charAt(0);
 char op2=fullExpression.charAt(1);
 String operation=fullExpression.substring(2,length);
 printEnglish(op1,op2,operation);
 System.out.println("Type yes to continue");
 Scanner kb1 = new Scanner(System.in);
 answer=kb1.nextLine();

}; 
} 

/*this methods gets the operands and the operation and 
prints the English version: if we call this method 
printEnglish(2,3, plus), then this method will output: 
Two plus three = 5 */ 
public static void printEnglish(char op1, char op2, String operation)  
{ 

 String resultOp1CharToString=charToString(op1);

 String resultOp2CharToString=charToString(op2);  
 char resultOperationConversion=operationConversion(operation);
 double resultCalculate=calculate(op1, op2, resultOperationConversion); 
 System.out.print(resultOp1CharToString+ operationConversion(operation) + resultOp2CharToString+ "=" + resultCalculate); 

    /*1\. call the method charToString(op1) to convertlish 
    word for example ‘1’ to one or ‘2’ to two,…. 
    2\. call the method operandConversionToNumber(op1) to 
    get its numeric value. For example if op1 is ‘1’ then 
    this method call should return the integer value 1 
    3\. call the method operationConversion(operation) to 
    convert the operation to a mathematical operation. For 
    example if you call this method with the string plus 
    then it will return ‘+’ 
    4\. finally call the method calculate to get the result 
    of the operation.*/
} 

/*this method prints the numeric version which is 2 *3 
=6*/
//public static boolean printNumeric(char op1, char op2, String operation)  
//{ 
 /*String resultCharToString=charToString(op1);
 String resultCharToString2=charToString(op2);  
 int resultOperandToNumber=operandConversionToNumber(op1);
 int resultOperandToNumber2=operandConversionToNumber(op2);
 char resultOperationConversion=operationConversion(operation);
 double resultCalculate=calculate(op1, op2, operation); */  

//} 

/*this method gets a number as a character and returns 
its numeric value as an integer. You must use case 
statement for this method*/ 
public static int operandConversiontoNumber(char operand) 
{ 
    int numberOperand=0;
    switch(operand)
    {
        case '0':
            numberOperand=0;
            break;
        case '1':
            numberOperand=1;
            break;
        case '2':
            numberOperand=2;
            break;
        case '3':
            numberOperand=3;
            break;
        case '4':
            numberOperand=4;
            break;
        case '5':
            numberOperand=5;
            break;
        case '6':
            numberOperand=6;
            break;
        case '7':
            numberOperand=7;
            break;
        case '8':
            numberOperand=8;
            break;
        case '9':
            numberOperand=9;
            break;
    }
    return numberOperand;

} 

/*this method gets the operation as a string and 
return the equivalent operation in math. For example 
if it receives “plus” the it will return ‘+’ */ 
public static char operationConversion(String s) 
{ 
    char operation=0;
    if(s.equals("plus"))
    {
        operation= '+';
    }

    else if(s.equals("minus"))
    {
        operation= '-';
    }

    else if(s.equals("multiply"))
    {
        operation= '*';
    }

    else if(s.equals("divide"))
    {
        operation= '/';
    }
    else
    {
        operation= '^';
    }

    return operation;

} 

/*this method recives two numbers and the operation
and returns the result*/ 
public static double calculate(int operand1, int operand2, char operation)
{ 
    if (operation=='^')
    {
        return (Math.pow(operand1,operand2));
    }
    else if(operation=='+')
    {
        return ((operand1)+(operand2));
    }
    else if(operation=='-')
    {
        return (operand1-operand2);
    }
    else if(operation=='*')
    {
        return (operand1*operand2);
    }
    else
    {
        if (operand2==0)
        {
            System.out.println("Cant divide by zero");
        }

        return(operand1/operand2);
    }

} 

/*this method converst a number character to its 
English word for example if this method receives ‘1’ 
it will return “one” */ 
public static String charToString(char num) 
{           

    String englishOperand="one";
    switch(num)
    {
        case '0':
            englishOperand= "zero";
            break;
        case '1':
            englishOperand="one";
            break;
        case '2':
            englishOperand="two";
            break;
        case '3':
            englishOperand="three";
            break;
        case '4':
            englishOperand= "four";
            break;
        case '5':
            englishOperand= "five";
            break;
        case '6':
            englishOperand= "six";
            break;
        case '7':
            englishOperand= "seven";
            break;
        case '8':
            englishOperand= "eight";
            break;
        case '9':
            englishOperand= "nine";
            break;
    }
    return englishOperand;
        }

//this method prints the decription of this program. 
public static void printIntro() 
{ 
    System.out.println("This program is a calculator, you need to enter two");
    System.out.println("single digit numbers and an operation(plus, minus,");
    System.out.println("divide, multiply, power) and it outputs its numeric");
    System.out.println("and English version. Your operand and operation can be");
    System.out.println("separated by space(s) or there could be no spaces"); 
    System.out.println("between them. For example you can enter “23plus” or “2 3 plus”"); 

} 
```

}

我输入了 2 3 plus 我期望 5 但我没有收到，但是当我输入 2 3 minus 我收到 -1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:42:21.467

```
if (operand2==0)
{
    System.out.println("Cant divide by zero");
    return -1; // some dummy value
}
else
{
    return(operand1/operand2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:43:22.657

除法将不正确，因为它正在执行整数除法并且您想要双倍结果。由于您不返回，它还会引发除以零错误。

```
if (operand2 == 0)
{
    System.out.println("Cant divide by zero");
    return 0; // I guess
}
return (double)operand1 / (double)operand2; 
```

其余的看起来应该可以正常工作。

# python - 在 Python 中从图像元数据中嵌入和检索长字符串

> ID：15758653
> 
> 赞同：0
> 
> 时间：2013-04-02T07:39:07.340
> 
> 标签：python, image, metadata

我想在图像的标题中嵌入一个长字符串（几千个字符），稍后在读取图像时检索它，两者都使用 Python。我希望能够使用 PNG、TIFF 和 JPEG 格式来做到这一点。最简单的方法是什么？（特别是我正在寻找一种安装最简单和最少依赖项的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:35:06.117

在我看来，依赖最少的最简单方法就是使用[exiftool](http://en.wikipedia.org/wiki/ExifTool)：

```
import subprocess as sub

def write_data(filename, data):
    cmd = ('exiftool', '-Comment=%s' % data, filename)
    sub.check_call(cmd)

def get_data(filename):
    cmd = ('exiftool', '-Comment', filename)
    return sub.check_output(cmd).split(':', 1)[-1].strip()

write_data('IMG_0001.jpg', 'a'*2048)
assert get_data('IMG_0001.jpg') == 'a'*2048 
```

根据您将要写入的数据类型，需要[考虑](http://www.sno.phy.queensu.ca/~phil/exiftool/faq.html#Q10)一些注意事项。如果您不喜欢直接使用 exiftool，请查看[pyexiv2](http://tilloy.net/dev/pyexiv2/)和[gexiv2 。](http://redmine.yorba.org/projects/gexiv2/wiki)

# asp.net - Visual Studio 2010 仅创建团队项目

> ID：15758654
> 
> 赞同：0
> 
> 时间：2013-04-02T07:39:11.043
> 
> 标签：asp.net, visual-studio-2010, tfs

我想分享我的问题。在 Visual Studio 2010 中，在文件菜单中，我只有创建团队项目和连接到团队项目的选项。我使用的是 Team Foundation Server，但现在我想在 C# 上创建项目并为 ASP.Net 项目开发 Web 服务。我应该怎么做才能获得新项目和打开项目的选项。我想摆脱团队项目。

重现问题的步骤：
1\. 单击文件|新建
2\. 注意“项目”已禁用；仅启用了“团队项目”
3\. 单击文件|打开
4\. 请注意，仅启用了“团队项目”。

如何创建或打开非 Team Foundation Server 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:19:44.793

听起来你有一个损坏的 VS 配置，或者它的行为就像 Team Foundation Explorer Shell，它只提供 Team Foundation 选项，而不提供其他任何东西。

做这个：

`Tools`> `Import and Export Settings`> `Reset all settings`> `Next`> `General Development Settings`（或C#或VB或任何你喜欢的）。

# objective-c - 在 NSButtonCell 上使用 NSBackgroundStyleLowered？

> ID：15758656
> 
> 赞同：2
> 
> 时间：2013-04-02T07:39:16.750
> 
> 标签：objective-c, xcode, macos, cocoa

我使用这段代码...

```
[[textField cell] setBackgroundStyle:NSBackgroundStyleLowered]; 
```

...给一段文字一个阴影，它的工作原理。当我尝试用按钮做同样的事情时：

```
[[refreshButton cell] setBackgroundStyle:NSBackgroundStyleLowered]; 
```

代码不起作用。该按钮是一个带有白色透明圆形箭头的瞬时更改按钮。任何想法为什么这不起作用？似乎它会起作用，因为它仍然是一个单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:51:58.937

NSCell 子类有不同的绘图行为。因此，可设置的背景样式并不意味着该样式实际用于具体子类中。

NSButtonCells在绘制标题之前使用 internalBackgroundStyle 属性[。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/interiorBackgroundStyle)此属性不公开设置器，因此您必须继承 NSButtonCell 并相应地在 Interface Builder 中设置单元格类。
要实现降低的背景样式，请在您的子类中覆盖 internalBackgroundStyle：

```
- (NSBackgroundStyle)interiorBackgroundStyle
{
    return NSBackgroundStyleLowered;
} 
```

如果您需要对绘图进行更多控制，您还可以覆盖 NSButtonCell 的[drawInteriorWithFrame:inView:](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/drawInteriorWithFrame%3ainView%3a)。

一种 hacky 方法（不需要子类化）是修改属性标题字符串以达到类似的效果：

```
NSShadow* shadow = [[NSShadow alloc] init];
[shadow setShadowOffset:NSMakeSize(0,-1)];
[shadow setShadowColor:[NSColor whiteColor]];
[shadow setShadowBlurRadius:0];
NSAttributedString* title = [button.cell attributedTitle];
NSMutableDictionary* attributes = [[title attributesAtIndex:0 longestEffectiveRange:NULL inRange:NSMakeRange(0, title.length)] mutableCopy];
[attributes setObject:shadow forKey:NSShadowAttributeName];
NSAttributedString* string = [[NSAttributedString alloc] initWithString:[button.cell title] attributes:attributes];
[button.cell setAttributedTitle:string]; 
```

# actionscript-3 - 如何绘制一个简单的连接器来连接从 flex4.6 中的 Palette 容器拖到组容器上的两个显示对象？

> ID：15758659
> 
> 赞同：1
> 
> 时间：2013-04-02T07:39:30.733
> 
> 标签：actionscript-3, apache-flex, flex4

请考虑这样一个事实，即它仅用作连接器而不是线。意味着如果我们在组上的 mouseDown 事件后将鼠标从一个位置移动到另一个位置，它不会画线。我使用的是 actionscript3.0 和 flex4.6。

# ios - Opencv 自定义编译

> ID：15758660
> 
> 赞同：10
> 
> 时间：2013-04-02T07:39:32.767
> 
> 标签：ios, opencv

我正在尝试减少 ios 的 opencv2.framework 大小。我的项目只使用 core、imgproc 和 highgui 模块。如何仅使用这些模块进行编译？还是有减小尺寸的替代方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-06T20:51:18.600

我现在在 3.1 版本中遇到了这个问题，nebuto 的答案很接近，但目前还不完整。通过更新 build_framework.py 文件，以下内容能够产生所需的结果。

```
def getCMakeArgs(self, arch, target):
    args = [
        "cmake",
        "-GXcode",
        "-DBUILD_SHARED_LIBS=OFF",
        "-DBUILD_opencv_core=ON",
        "-DBUILD_opencv_imgcodecs=OFF",
        "-DBUILD_opencv_imgproc=ON",
        "-DBUILD_opencv_world=OFF",
        "-DBUILD_opencv_gpu=OFF",
        "-DBUILD_opencv_calib3d=OFF",
        "-DBUILD_opencv_contrib=OFF",
        "-DBUILD_opencv_features2D=OFF",
        "-DBUILD_opencv_flann=OFF",
        "-DBUILD_opencv_highgui=ON",
        "-DBUILD_opencv_legacy=OFF",
        "-DBUILD_opencv_ml=OFF",
        "-DBUILD_opencv_nonfree=OFF",
        "-DBUILD_opencv_objdetect=OFF",
        "-DBUILD_opencv_photo=OFF",
        "-DBUILD_opencv_stitching=OFF",
        "-DBUILD_opencv_video=OFF",
        "-DBUILD_opencv_videoio=OFF",
        "-DBUILD_opencv_videostab=OFF",
        "-DAPPLE_FRAMEWORK=ON",
        "-DCMAKE_INSTALL_PREFIX=install",
        "-DCMAKE_BUILD_TYPE=Release",
    ]
    return args 
```

此更新还包括两个在 2.4.6 中似乎不存在的新模块。

对于一些额外的节省，您可能会删除位于文件底部的模拟器构建的 i386 设置。如果您的应用是 iOS 9 及更高版本，并且您希望省略 32 位设备，您也可以去掉 armv7 选项。

```
b = Builder(args.opencv, args.contrib,
    [
        ("armv7", "iPhoneOS"),
        ("armv7s", "iPhoneOS"),
        ("arm64", "iPhoneOS"),
        #("i386", "iPhoneSimulator"),
        ("x86_64", "iPhoneSimulator"),
    ])
b.build(args.out) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T09:23:06.573

从 v2.4.6 开始，OpenCV 有一个自定义 python 脚本来简化工作（plateforms > ios > build_framework.py）

您只需要在 cmake 行上添加标志即可进行自定义编译。

例如：我只需要 lib imgproc 并将所有标题包含到存档中，我的 cmake 现在类似于：

```
cmakeargs = ("-GXcode " +
            "-D BUILD_SHARED_LIBS=OFF "+
            "-D BUILD_opencv_core=ON "+
            "-D BUILD_opencv_imgproc=ON "+
            "-D BUILD_opencv_world=ON "+
            "-D BUILD_opencv_gpu=OFF "+
            "-D BUILD_opencv_calib3d=OFF "+
            "-D BUILD_opencv_contrib=OFF "+
            "-D BUILD_opencv_features2D=OFF "+
            "-D BUILD_opencv_flann=OFF "+
            "-D BUILD_opencv_highgui=OFF "+
            "-D BUILD_opencv_legacy=OFF "+
            "-D BUILD_opencv_ml=OFF "+
            "-D BUILD_opencv_nonfree=OFF "+
            "-D BUILD_opencv_objdetect=OFF "+
            "-D BUILD_opencv_photo=OFF "+
            "-D BUILD_opencv_stitching=OFF "+
            "-D BUILD_opencv_video=OFF "+
            "-D BUILD_opencv_videostab=OFF "+
            "-DCMAKE_BUILD_TYPE=Release " +
            "-DCMAKE_TOOLCHAIN_FILE=%s/platforms/ios/cmake/Toolchains/Toolchain-%s_Xcode.cmake " +
            "-DCMAKE_INSTALL_PREFIX=install") % (srcroot, target) 
```

不要忘记**添加核心和世界库**，因为它们是强制性的。执行python脚本>利润。

之后手动将库添加到您的项目中，并删除头文件 > opencv.hpp 中留下的讨厌的导入头文件，您应该一切顺利！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:21:50.123

只需从模块文件夹中删除模块并从头文件中删除包含行。然后编译。在这样做之前，请阅读 CMakeLists.txt 以了解依赖项。

比如对于highgui模块；

```
ocv_define_module(imgproc opencv_core) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-30T19:22:21.833

从 opencv 3.4.1 开始，您现在可以使用`BUILD_LIST`arg 指定要构建的模块。这是一种白名单方法与使用`-BUILD_opencv_xxx=OFF`上述方法的黑名单方法。

如果您想要的只是`imgproc`模块，那么您可以将构建脚本修改为以下内容：

```
def getCMakeArgs(self, arch, target):
    args = [
        "cmake",
        "-GXcode",
        "-DBUILD_LIST=imgproc"
        "-DAPPLE_FRAMEWORK=ON",
        "-DCMAKE_INSTALL_PREFIX=install",
        "-DCMAKE_BUILD_TYPE=Release",
    ]
    return args 
```

尽管在实践中，这对我来说并不奏效。我还必须手动排除`highgui`、`imgcodecs`和`videoio`：

```
def getCMakeArgs(self, arch, target):
    args = [
        "cmake",
        "-GXcode",
        "-DBUILD_LIST=imgproc"
        "-DBUILD_opencv_highgui=OFF",
        "-DBUILD_opencv_imgcodecs=OFF",
        "-DBUILD_opencv_videoio=OFF",
        "-DAPPLE_FRAMEWORK=ON",
        "-DCMAKE_INSTALL_PREFIX=install",
        "-DCMAKE_BUILD_TYPE=Release",
    ]
    return args 
```

# asp.net - asp:UpdatePanel 仅在其他输入有效时工作

> ID：15758661
> 
> 赞同：0
> 
> 时间：2013-04-02T07:39:32.873
> 
> 标签：asp.net, webforms, updatepanel

我有这个`UpdatePanel`：

```
 <asp:ScriptManager ID="CheckManager" runat="server" />
  <asp:UpdatePanel ID="checkUsername" runat="server" UpdateMode="Conditional" >
  <ContentTemplate>
  <asp:Label ID="canUse" runat="server" Text=""/>
  <asp:Button ID="check" runat="server" Text="Usable?" onclick="check_Click" />
  <asp:TextBox ID="username" runat="server" ></asp:TextBox>
  </ContentTemplate>
  <Triggers>
  <asp:AsyncPostBackTrigger controlid="check" eventname="Click" />
  </Triggers>
  </asp:UpdatePanel> 
```

更新代码：

```
 protected void check_Click(object sender, EventArgs e)
    {

        using (HotelEntities h = new HotelEntities())
        {
            UserHandle u = new UserHandle();
            if (u.FindUserByUsername(h, username.Text.ToString()).Any())
            {
                canUse.ForeColor = Color.Magenta;
                canUse.Text = "You cannot use this username";
                username.Text = "";
            }
            else
            {
                canUse.ForeColor = Color.Green;
                canUse.Text = "you can use this username";
            }
        }
    } 
```

但仅当表单中的其他输入（例如具有验证`RequiredFieldValidator`）有效时才有效。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:49:02.223

为单击 Button 控件时不希望对其执行验证的按钮设置**CausesValidation="false" 。**

```
<asp:Button ID="check" CausesValidation="false"  runat="server" 
 Text="Usable?" onclick="check_Click" /> 
```

[Button.CausesValidation 属性](http://msdn.microsoft.com/en-in/library/system.web.ui.webcontrols.button.causesvalidation.aspx)：获取或设置一个值，该值指示单击 Button 控件时是否执行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:45:56.927

您需要将 ValidationGroup 属性设置为与按钮和文本框验证等相同。例如，您在 textBox1 附近有必需的字段验证器。你有两个按钮。如果您不使用 ValidationGroup，您将无法在不验证输入的情况下单击其中任何一个。您可以 [在这里](http://www.w3schools.com/aspnet/prop_webcontrol_imagebutton_validationgroup.asp)查看示例

# visual-c++ - VC++中的按键

> ID：15758663
> 
> 赞同：0
> 
> 时间：2013-04-02T07:39:35.193
> 
> 标签：visual-c++, keypress

我想用 控制机器人`Visual C++`，`serial port`如果我按'W'机器人将向前移动，按'S'机器人将向后移动。我使用`Visual Studio C++`表单应用程序。我是 C++ 的新手和`WinForm`- 应用程序

对于串行连接很好，但问题是我怎样才能得到按键事件，所以我可以将字符发送给机器人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T06:06:58.753

要获取 keypress / keydown 事件，您应该在表单应用程序中有一些编辑控件

# c# - windows服务中如何调用webservice方法

> ID：15758671
> 
> 赞同：0
> 
> 时间：2013-04-02T07:40:01.953
> 
> 标签：c#, asp.net

基本上我的想法是开发一个将在 Windows 中运行的代理

我创建了成功运行的 Windows 服务应用程序，并且我在 Windows 服务中运行的 Windows 服务应用程序中集成了一个 Web 服务代码。

当客户端点击我的网址时如何调用该 Web 服务方法？

如何形成可以调用Web服务方法的url来获取方法返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:45:24.583

好的，我会试着回答。

*   假设您要调用`REST` `web service`. 你需要什么？A`HttpClient`和（可能）`JSON/XML Serializer`。您可以使用内置`.NET`类或类似的库[`RestSharp`](http://restsharp.org/)

使用调用 REST Web 服务的示例[`RestSharp`](http://restsharp.org/)

```
var client = new RestClient("http://example.com");
// client.Authenticator = new HttpBasicAuthenticator(username, password);

var request = new RestRequest("resource/{id}", Method.POST);
request.AddParameter("name", "value"); // adds to POST or URL querystring based on Method
request.AddUrlSegment("id", 123); // replaces matching token in request.Resource

// easily add HTTP Headers
request.AddHeader("header", "value");

// add files to upload (works with compatible verbs)
request.AddFile(path);

// execute the request
RestResponse response = client.Execute(request);
var content = response.Content; // raw content as string

// or automatically deserialize result
// return content type is sniffed but can be explicitly set via RestClient.AddHandler();
RestResponse<Person> response2 = client.Execute<Person>(request);
var name = response2.Data.Name;

// easy async support
client.ExecuteAsync(request, response => {
    Console.WriteLine(response.Content);
});

// async with deserialization
var asyncHandle = client.ExecuteAsync<Person>(request, response => {
    Console.WriteLine(response.Data.Name);
});

// abort the request on demand
asyncHandle.Abort(); 
```

你**不需要**使用`RestSharp`，不。对于简单的情况[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)（+ [DataContractJsonSerializaer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)或 Xml 模拟）将是完美的

*   有`SOAP`网络服务吗？按照[此处提供的说明进行操作](https://stackoverflow.com/questions/3100458/soap-client-in-net-references-or-examples)

# css - 如何禁止使用 css 或 jquery 翻转文本？

> ID：15758672
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:40:05.813
> 
> 标签：css, text, rotation, flip

当一个对象旋转 +180° 时，它里面的所有东西都会被翻转以便它仍然可读（我猜），我想避免这种情况，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:01:27.473

只需将您的文本包装在一个 div 中，并使用与您分配给父 div 的度数相反的值旋转它：

```
div.flipped {
    background: lightblue;
    padding-left: 150px;
    -webkit-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
}

div.noflipped {
    background: lightblue;
    padding-left: 150px;
    -webkit-transform: rotate(-180deg);
    -moz-transform: rotate(-180deg);
} 
```

演示：http: [//jsfiddle.net/uTGXx/7/](http://jsfiddle.net/uTGXx/7/)

# c# - 检索触发回发的事件名称和控件，理想情况下是将被调用的函数名称

> ID：15758675
> 
> 赞同：0
> 
> 时间：2013-04-02T07:40:21.317
> 
> 标签：c#, asp.net, webforms

我有一个应用程序，它从一个小型 Web 表单项目开始，很快就变得非常大。我想记录每个触发的事件并检查用户对指定操作的权限。

而不是在每个事件中添加功能，我认为一个好方法是创建一个覆盖默认“System.Web.UI.Page”的基类并检查基类中的每个事件调用。

这是该类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Test
{

    /// <summary>
    /// Summary description for BasePage
    /// </summary>
    public abstract class BasePage : System.Web.UI.Page
    {
        public BasePage()
        {
            // Adding functionality to the "on load" event of the base class (Page)
            base.Load += new EventHandler(BasePage_Load);
            base.Unload += new EventHandler(BasePage_Unload);
            base.LoadComplete += new EventHandler(BasePage_LoadComplete);
        }

        private void BasePage_Load(object sender, EventArgs e)
        {
            LogEverything();
            AccessCheck();
        }

        private void BasePage_LoadComplete(object sender, EventArgs e)
        {
            LogEverything();
            AccessCheck();
        }

        protected override void RaisePostBackEvent(System.Web.UI.IPostBackEventHandler sourceControl, string eventArgument)
        {
            LogEverything();
            base.RaisePostBackEvent(sourceControl, eventArgument);
        }

        private void BasePage_Unload(object sender, EventArgs e)
        {
            LogEverything();
        }

        private bool LogEverything()
        {
            string sRawUrl = HttpContext.Current.Request.RawUrl;
            string sQueryString = HttpContext.Current.Request.QueryString.ToString();
            string sPage = HttpContext.Current.Request.AppRelativeCurrentExecutionFilePath;
            string sHttpMethod = HttpContext.Current.Request.HttpMethod;
            string sUserAgent = HttpContext.Current.Request.UserAgent;
            string sUserAddress = HttpContext.Current.Request.UserHostAddress;
            string sEventTarget = HttpContext.Current.Request.Form["__EVENTTARGET"];
            string sEventArgument = HttpContext.Current.Request.Form["__EVENTARGUMENT"];
            string sEventValidation = HttpContext.Current.Request.Form["__EVENTVALIDATION"];

            // TODO: find the event that triggered the postback

            return Logging.append(Logging.logLevelType.Info, "Baseclass is here!");
        }

        private bool AccessCheck()
        {
            // enforce security here ...
            return true;
        }
    }
} 
```

您可能会注意到它并不完整，因为我仍在研究此选项。我还没有找到一种方法来检索触发的事件，以便我可以记录调用的函数名称并检查用户是否有权调用该函数。可能吗？即使是肮脏的黑客也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:44:34.467

[您可以使用PostSharp](http://www.postsharp.net/)拦截事件，而不是覆盖默认的“System.Web.UI.Page”类。您可以查看以下文章以进行演练

[PostSharp 原则：第 11 天 – EventInterceptionAspect](http://www.postsharp.net/blog/post/PostSharp-Principals-Day-11-e28093-Interception-e28093-Part-3.aspx)

您可以构建一个切面，在事件触发时调用您的自定义方法。使用自定义方法记录调用和访问检查。可以全局应用方面以使用多播为您节省一些工作。

[PostSharp 原则：第 2 天 - 通过多播第 1 部分应用方面](http://www.postsharp.net/blog/post/Day-2-Applying-Aspects-with-Multicasting-Part-1.aspx)

[PostSharp 原则：第 2 天 - 通过多播第 2 部分应用方面](http://www.postsharp.net/blog/post/Day-3-Applying-Aspects-with-Multicasting-Part-2.aspx)

# java - 字符串的正则表达式模式（SQL 选择查询）

> ID：15758676
> 
> 赞同：0
> 
> 时间：2013-04-02T07:40:21.063
> 
> 标签：java

我必须`SQL`使用正则表达式模式在 java 程序中验证用户（作为字符串）给出的查询语法。例如用户输入

```
Select name,address,detail from Student where detail='I m a Student' 
```

此查询的正则表达式模式是什么？

# c - 从文本文件中读取一行并将其删除

> ID：15758678
> 
> 赞同：4
> 
> 时间：2013-04-02T07:40:27.690
> 
> 标签：c, windows, file, winapi

我想逐行读取文本文件，执行一些检查，如果不需要该行，请将其删除。我已经完成了读取行的代码，但是如果我不需要，我不知道如何删除该行。请帮我找到删除该行的最简单方法。这是我尝试过的代码片段：

```
 char ip[32];
   int port;
   DWORD dwWritten;
   FILE *fpOriginal, *fpOutput;
   HANDLE hFile,tempFile;
   hFile=CreateFile("Hell.txt",GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ|FILE_SHARE_WRITE,0,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,0);
   tempFile=CreateFile("temp.txt",GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ|FILE_SHARE_WRITE,0,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,0);
   WriteFile(hFile,"10.0.1.25 524192\r\n\r\n10.0.1.25 524193\r\n\r\n",strlen("10.0.1.25 524192\r\n\r\n10.0.1.25 524193\r\n\r\n"),&dwWritten,0);
   fpOriginal = fopen("Hell.txt", "r+");
   fpOutput = fopen("temp.txt", "w+");

   while (fscanf(fpOriginal, " %s %d", ip, &port) > 0) 
      {
         printf("\nLine1:");
         printf("ip: %s, port: %d", ip, port);
         char portbuff[32], space[]=" ";
         sprintf(portbuff, "%i",port);
         strcat(ip," ");
         strcat(ip,portbuff);
         if(port == 524192)
            printf("\n Delete this Line now");
         else
            WriteFile(tempFile,ip,strlen(ip),&dwWritten,0);
      }

     fclose(fpOriginal);
     fclose(fpOutput);
     CloseHandle(hFile);
     CloseHandle(tempFile);
     remove("Hell.txt");
     if(!(rename("temp.txt","Bye.txt")))
     {
         printf("\ncould not rename\n");
     }
     else 
        printf("\nRename Done\n");
     //remove ("Hell.txt"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:02:03.363

这是一个例子：

```
char* inFileName = "test.txt";
char* outFileName = "tmp.txt";
FILE* inFile = fopen(inFileName, "r");
FILE* outFile = fopen(outFileName, "w+");
char line [1024]; // maybe you have to user better value here
int lineCount = 0;

if( inFile == NULL )
{
    printf("Open Error");
}

while( fgets(line, sizeof(line), inFile) != NULL )
{
    if( ( lineCount % 2 ) != 0 )
    {
        fprintf(outFile, "%s", line);
    }

    lineCount++;
}

fclose(inFile);
fclose(outFile);

// possible you have to remove old file here before
if( !rename(inFileName, outFileName) )
{
    printf("Rename Error");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:03:09.170

有很多方法可以解决这个问题，其中一个是，当您到达不想写入的点时，您可以打开另一个文件进行写入，忽略该绘画并继续写入直到文件结束。稍后您可以删除旧文件并用旧文件重命名新文件。

```
if(number == 2)
{
     continue;
}
else
{
    writetofilefunction()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:45:05.993

您可以将所有不包含数字 2 的行复制到一个新文件中，然后使用新文件而不是旧文件

```
fp = fopen("File.txt", "r");
fp2 = fopen("File_copy.txt", "w");
while (fscanf(fp, " %s %d", string, &number) > 0) {
        if(number != 2)
        {
             fprintf(fp2, "%s %d\n", string, number);
        }
}
close(fp);
close(fp2);
remove("File.txt");
rename( "File_copy.txt", "File.txt" ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T09:53:24.223

另一种解决方案可能是写回同一个文件（写回你读出的内容，除了你不想要的行）并`SetEndOfFile`在完成时使用 Windows API 函数截断它。这对代码来说可能会有点混乱，但您不需要创建文件的第二个副本，因此从磁盘使用的角度来看它更有效。

# c++ - 获取所有不属于另一个向量的向量元素

> ID：15758680
> 
> 赞同：3
> 
> 时间：2013-04-02T07:40:37.347
> 
> 标签：c++, vector, c++11

在 C# 中，如果我想获取 a`List List1`中不属于另一个的所有元素，`List List2`我可以这样做

```
var result List1.Except(List2); 
```

`std::vector`C++ 中是否有与 s 等价的东西？（允许使用 C++11）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T08:02:02.623

下面将使用 List1 中不在 List2 中的内容填充 List3。我希望它是您正在寻找的：

```
std::vector<Type> List1, List2;
//
// populate List1 and List2
//

std::vector<Type> List3;
std::copy_if(List1.begin(), List1.end(), std::back_inserter(List3),
     [&List2](const Type& arg)
     { return (std::find(List2.begin(), List2.end(), arg) == List2.end());}); 
```

或者，这可能会更好地执行，因为您不必搜索整个列表来确定不存在。相反，您可以获得早期的“命中”，然后移动到下一个节点。注意谓词中的逻辑翻转：

```
std::vector<Type> List3;
std::remove_copy_if(List1.begin(), List1.end(), std::back_inserter(List3),
     [&List2](const Type& arg)
     { return (std::find(List2.begin(), List2.end(), arg) != List2.end());}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T07:49:27.313

您需要编写自己的函数，如下所示：

```
for (auto element : List1)
{
  auto it = std::find(List2.begin(), List2.end(), element);
  if(it == List2.end())
  {
     result.push_back(element);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:06:43.627

您应该考虑 std::list 是否是正确的数据结构，因为它是 - 至少在 C++ 中 - 默认情况下未排序，因此在最坏的情况下，您将不得不迭代 size(list2) 次通过所有元素list1，使用像 Asha 指出的算法。

更好的方法是使用有序容器，例如 multiset 并使用 std::set_difference 来创建结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T08:35:57.213

对于任意容器，您始终可以使用`std::remove_if`+`container::erase`组合：

```
 template <typename Cont, typename FwdIt>
    void subtract(Cont& cont, FwdIt first, FwdIt last) {
        using std::begin; using std::end;
        using const_reference = typename Cont::value_type const&;
        cont.erase(std::remove_if(begin(cont), end(cont),
            [first, last](const_reference value){
                return last != std::find(first, last, value);
             }), end(cont));
    }

    template <typename Cont1, typename Cont2>
    void subtract(Cont1& cont1, Cont2 const& cont2) {
        using std::begin; using std::end;
        subtract(cont1, begin(cont2), end(cont2));
    } 
```

在`std::list`你可以重载`subtract`函数的情况下，因为`std::list`有一个专用的`remove_if`成员函数：

```
 template <typename T, typename Alloc, typename FwdIt>
    void subtract(std::list<T, Alloc>& l, FwdIt first, FwdIt last) {
        l.remove_if([first, last](T const& value){
            return last != std::find(first, last, value);
        });
    }

    template <typename T, typename Alloc, typename Cont>
    void subtract(std::list<T, Alloc>& l, Cont const& cont) {
        using std::begin; using std::end;
        subtract(l, begin(cont), end(cont)); 
```

}

这些实现是通用的，不对序列的排序做任何假设。如果只保证您的第二个容器被排序，您可以使用`std::binary_seach`代替`find`. 如果两个序列都已排序，则应使用`std::set_difference`.

# jquery - 单击打开下一个内联 Colorbox Div

> ID：15758681
> 
> 赞同：0
> 
> 时间：2013-04-02T07:40:41.940
> 
> 标签：jquery, lightbox, colorbox, inline

我有 2 张图片，当我点击它们时，它会打开相应的#DIV。它工作正常。我正在使用彩盒 jQuery 插件。

但我什至添加了 2 个链接 ajNext 和 ajPrev。

我想用他们打开下一个或上一个内联 DIV。是否可以将它们作为分组 DIV 打开，有点像画廊下一个上一个功能。请帮助我:)

```
$(document).ready(function(){
        $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
        $(".inline").colorbox({inline:true, width:"1020px", height: "560px"});

        $('#ajNext').live('click', function(){
            $.fn.colorbox.next();
        });
    }); 
```

和我的 HTML：

```
<li><a class="inline" href="#profile1"><img src="car1.jpg"></a></li>
<li><a class="inline" href="#profile2"><img src="car2.jpg"></a></li>

<div id="inline_profiles"'>
            <div id="profile1" class="profilex">
                <img src="images/kala-mela/car1_1.jpg">
                <p><strong>Prasanna R. Gogilwar. 111</strong></p>
                <p>111 Prasanna loves birds and his favourite is the Hornbill. He mentioned that the side lights of the Nano bear a striking resemblance to the bird and the thought of owning a Nano with his design on it would be extremely exciting. He would drive is everywhere so that people get a chance to admire his work.</p>
                <a id="ajPrev"></a>
                <a id="ajNext"></a>
            </div>

            <div id="profile2" class="profilex">
                <img src="images/kala-mela/car1_1.jpg">

                <p><strong>Prasanna R. Gogilwar. 2222</strong></p>
                <p>222 Prasanna loves birds and his favourite is the Hornbill. He mentioned that the side lights of the Nano bear a striking resemblance to the bird and the thought of owning a Nano with his design on it would be extremely exciting. He would drive is everywhere so that people get a chance to admire his work.</p>
                <a id="ajPrev"></a>
                <a id="ajNext"></a>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:18:37.473

```
<img src="car2.jpg"> 
```

您需要关闭`img`元素`<img />`

```
<a id="ajPrev"></a>
<a id="ajNext"></a> 
```

`id`必须是唯一的

```
$(".inline").colorbox({inline:true, width: '50%', rel: 'profilex'});

$('.ajPrev').on('click', function(){
    $.fn.colorbox.prev();
});
$('.ajNext').on('click', function(){
    $.fn.colorbox.next();
}); 
```

演示：http: [//jsfiddle.net/wPdBy/](http://jsfiddle.net/wPdBy/)

# java - 使用 java.util.logging.Logger 时如何在文本文件中写入日志

> ID：15758685
> 
> 赞同：168
> 
> 时间：2013-04-02T07:41:17.070
> 
> 标签：java, logging

我有一种情况，我想将我创建的所有日志写入一个文本文件。

我们使用 java.util.logging.Logger API 来生成日志。

我试过：

```
private static Logger logger = Logger.getLogger(className.class.getName());
FileHandler fh;   
fh = new FileHandler("C:/className.log");   
logger.addHandler(fh); 
```

但仍然只能在控制台上获取我的日志....

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-04-02T07:46:25.460

试试这个样本。这个对我有用。

```
public static void main(String[] args) {  

    Logger logger = Logger.getLogger("MyLog");  
    FileHandler fh;  

    try {  

        // This block configure the logger with handler and formatter  
        fh = new FileHandler("C:/temp/test/MyLogFile.log");  
        logger.addHandler(fh);
        SimpleFormatter formatter = new SimpleFormatter();  
        fh.setFormatter(formatter);  

        // the following statement is used to log any messages  
        logger.info("My first log");  

    } catch (SecurityException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  

    logger.info("Hi How r u?");  

} 
```

在 MyLogFile.log 中生成输出

```
Apr 2, 2013 9:57:08 AM testing.MyLogger main  
INFO: My first log  
Apr 2, 2013 9:57:08 AM testing.MyLogger main  
INFO: Hi How r u? 
```

***编辑：***

要删除控制台处理程序，请使用

```
logger.setUseParentHandlers(false); 
```

因为 ConsoleHandler 是向所有记录器派生的父记录器注册的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-06-23T16:58:44.720

首先，您在哪里定义了您的记录器以及从哪个类\方法尝试调用它？有一个工作示例，新鲜出炉：

```
public class LoggingTester {
    private final Logger logger = Logger.getLogger(LoggingTester.class
            .getName());
    private FileHandler fh = null;

    public LoggingTester() {
        //just to make our log file nicer :)
        SimpleDateFormat format = new SimpleDateFormat("M-d_HHmmss");
        try {
            fh = new FileHandler("C:/temp/test/MyLogFile_"
                + format.format(Calendar.getInstance().getTime()) + ".log");
        } catch (Exception e) {
            e.printStackTrace();
        }

        fh.setFormatter(new SimpleFormatter());
        logger.addHandler(fh);
    }

    public void doLogging() {
        logger.info("info msg");
        logger.severe("error message");
        logger.fine("fine message"); //won't show because to high level of logging
    }
} 
```

在您的代码中，您忘记定义格式化程序，如果您需要简单的格式化程序，可以按照我上面提到的方法进行操作，但是还有另一种选择，您可以自己格式化，有一个示例（只需插入它而不是 fh 行.setFormatter(new SimpleFormatter()) 以下代码):

```
fh.setFormatter(new Formatter() {
            @Override
            public String format(LogRecord record) {
                SimpleDateFormat logTime = new SimpleDateFormat("MM-dd-yyyy HH:mm:ss");
                Calendar cal = new GregorianCalendar();
                cal.setTimeInMillis(record.getMillis());
                return record.getLevel()
                        + logTime.format(cal.getTime())
                        + " || "
                        + record.getSourceClassName().substring(
                                record.getSourceClassName().lastIndexOf(".")+1,
                                record.getSourceClassName().length())
                        + "."
                        + record.getSourceMethodName()
                        + "() : "
                        + record.getMessage() + "\n";
            }
        }); 
```

或者你喜欢的任何其他修改。希望能帮助到你。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-31T05:34:52.437

日志文件的位置可以通过 logging.properties 文件控制。它可以作为 JVM 参数 ex 传递：`java -Djava.util.logging.config.file=/scratch/user/config/logging.properties`

详情：[https ://docs.oracle.com/cd/E23549_01/doc.1111/e14568/handler.htm](https://docs.oracle.com/cd/E23549_01/doc.1111/e14568/handler.htm)

## **配置文件处理程序**

要将日志发送到文件，请将 FileHandler 添加到 logging.properties 文件中的 handlers 属性。这将启用全局文件日志记录。

`handlers= java.util.logging.FileHandler`通过设置以下属性来配置处理程序：

```
java.util.logging.FileHandler.pattern=<home directory>/logs/oaam.log
java.util.logging.FileHandler.limit=50000
java.util.logging.FileHandler.count=1
java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter 
```

**java.util.logging.FileHandler.pattern**指定输出文件的位置和模式。默认设置是您的主目录。

**java.util.logging.FileHandler.limit**以字节为单位指定记录器写入任何一个文件的最大数量。

**java.util.logging.FileHandler.count**指定循环通过多少个输出文件。

**java.util.logging.FileHandler.formatter**指定文件处理程序类用于格式化日志消息的 java.util.logging 格式化程序类。SimpleFormatter 编写简短的“人类可读”的日志记录摘要。

* * *

***要指示 java 使用此配置文件而不是 $JDK_HOME/jre/lib/logging.properties：***

```
java -Djava.util.logging.config.file=/scratch/user/config/logging.properties 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-02T07:47:39.437

[一个名为log4j for Java](http://logging.apache.org/log4j/1.2/)的好库。
这将提供许多功能。通过链接，您将找到您的解决方案。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-10T09:35:46.937

也许[这就是](https://sites.google.com/site/ibrabel/sscce/logtofile)你需要的...

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 * LogToFile class
 * This class is intended to be use with the default logging class of java
 * It save the log in an XML file  and display a friendly message to the user
 * @author Ibrabel <ibrabel@gmail.com>
 */
public class LogToFile {

    protected static final Logger logger=Logger.getLogger("MYLOG");
    /**
     * log Method 
     * enable to log all exceptions to a file and display user message on demand
     * @param ex
     * @param level
     * @param msg 
     */
    public static void log(Exception ex, String level, String msg){

        FileHandler fh = null;
        try {
            fh = new FileHandler("log.xml",true);
            logger.addHandler(fh);
            switch (level) {
                case "severe":
                    logger.log(Level.SEVERE, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Error", JOptionPane.ERROR_MESSAGE);
                    break;
                case "warning":
                    logger.log(Level.WARNING, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Warning", JOptionPane.WARNING_MESSAGE);
                    break;
                case "info":
                    logger.log(Level.INFO, msg, ex);
                    if(!msg.equals(""))
                        JOptionPane.showMessageDialog(null,msg,
                            "Info", JOptionPane.INFORMATION_MESSAGE);
                    break;
                case "config":
                    logger.log(Level.CONFIG, msg, ex);
                    break;
                case "fine":
                    logger.log(Level.FINE, msg, ex);
                    break;
                case "finer":
                    logger.log(Level.FINER, msg, ex);
                    break;
                case "finest":
                    logger.log(Level.FINEST, msg, ex);
                    break;
                default:
                    logger.log(Level.CONFIG, msg, ex);
                    break;
            }
        } catch (IOException | SecurityException ex1) {
            logger.log(Level.SEVERE, null, ex1);
        } finally{
            if(fh!=null)fh.close();
        }
    }

    public static void main(String[] args) {

        /*
            Create simple frame for the example
        */
        JFrame myFrame = new JFrame();
        myFrame.setTitle("LogToFileExample");
        myFrame.setSize(300, 100);
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.setLocationRelativeTo(null);
        JPanel pan = new JPanel();
        JButton severe = new JButton("severe");
        pan.add(severe);
        JButton warning = new JButton("warning");
        pan.add(warning);
        JButton info = new JButton("info");
        pan.add(info);

        /*
            Create an exception on click to use the LogToFile class
        */
        severe.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"severe","You can't divide anything by zero");
                }

            }

        });

        warning.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"warning","You can't divide anything by zero");
                }

            }

        });

        info.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent ae) {
                int j = 20, i = 0;
                try {
                    System.out.println(j/i);
                } catch (ArithmeticException ex) {
                    log(ex,"info","You can't divide anything by zero");
                }

            }

        });

        /*
            Add the JPanel to the JFrame and set the JFrame visible
        */
        myFrame.setContentPane(pan);
        myFrame.setVisible(true);
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-10-01T06:42:32.597

```
import java.io.IOException;
import org.apache.log4j.Appender;
import org.apache.log4j.FileAppender;
import org.apache.log4j.Logger;
import org.apache.log4j.SimpleLayout;

/**
 * @author Kiran
 * 
 */
public class MyLogger {

    public MyLogger() {
    }

    public static void main(String[] args) {
        Logger logger = Logger.getLogger("MyLog");
        Appender fh = null;
        try {
            fh = new FileAppender(new SimpleLayout(), "MyLogFile.log");
            logger.addAppender(fh);
            fh.setLayout(new SimpleLayout());
            logger.info("My first log");
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        logger.info("Hi How r u?");
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-02T07:49:07.047

```
int SIZE = "<intialize-here>"
int ROTATIONCOUNT = "<intialize-here>"

Handler handler = new FileHandler("test.log", SIZE, LOG_ROTATIONCOUNT);
logger.addHandler(handler);     // for your code.. 

// you can also set logging levels
Logger.getLogger(this.getClass().getName()).log(Level.[...]).addHandler(handler); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-20T22:51:25.320

希望人们觉得这有帮助

```
public static void writeLog(String info) {
    String filename = "activity.log";
    String FILENAME = "C:\\testing\\" + filename;
    BufferedWriter bw = null;
    FileWriter fw = null;
    try {
        fw = new FileWriter(FILENAME, true);
        bw = new BufferedWriter(fw);
        bw.write(info);
        bw.write("\n");
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (bw != null)
                bw.close();
            if (fw != null)
                fw.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-18T13:33:44.467

这是我[基于接受的答案的](https://stackoverflow.com/a/15758768/3764804)日志记录类：

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.logging.*;

public class ErrorLogger
{
    private Logger logger;

    public ErrorLogger()
    {
        logger = Logger.getAnonymousLogger();

        configure();
    }

    private void configure()
    {
        try
        {
            String logsDirectoryFolder = "logs";
            Files.createDirectories(Paths.get(logsDirectoryFolder));
            FileHandler fileHandler = new FileHandler(logsDirectoryFolder + File.separator + getCurrentTimeString() + ".log");
            logger.addHandler(fileHandler);
            SimpleFormatter formatter = new SimpleFormatter();
            fileHandler.setFormatter(formatter);
        } catch (IOException exception)
        {
            exception.printStackTrace();
        }

        addCloseHandlersShutdownHook();
    }

    private void addCloseHandlersShutdownHook()
    {
        Runtime.getRuntime().addShutdownHook(new Thread(() ->
        {
            // Close all handlers to get rid of empty .LCK files
            for (Handler handler : logger.getHandlers())
            {
                handler.close();
            }
        }));
    }

    private String getCurrentTimeString()
    {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");
        return dateFormat.format(new Date());
    }

    public void log(Exception exception)
    {
        logger.log(Level.SEVERE, "", exception);
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-03T04:48:49.820

这是一个如何从代码中覆盖 Logger 配置的示例。不需要外部配置文件..

FileLoggerTest.java：

```
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.LogManager;
import java.util.logging.Logger;

public class FileLoggerTest {

    public static void main(String[] args) {

        try {
            String h = MyLogHandler.class.getCanonicalName();
            StringBuilder sb = new StringBuilder();
            sb.append(".level=ALL\n");
            sb.append("handlers=").append(h).append('\n');
            LogManager.getLogManager().readConfiguration(new ByteArrayInputStream(sb.toString().getBytes("UTF-8")));
        } catch (IOException | SecurityException ex) {
            // Do something about it
        }

        Logger.getGlobal().severe("Global SEVERE log entry");
        Logger.getLogger(FileLoggerTest.class.getName()).log(Level.SEVERE, "This is a SEVERE log entry");
        Logger.getLogger("SomeName").log(Level.WARNING, "This is a WARNING log entry");
        Logger.getLogger("AnotherName").log(Level.INFO, "This is an INFO log entry");
        Logger.getLogger("SameName").log(Level.CONFIG, "This is an CONFIG log entry");
        Logger.getLogger("SameName").log(Level.FINE, "This is an FINE log entry");
        Logger.getLogger("SameName").log(Level.FINEST, "This is an FINEST log entry");
        Logger.getLogger("SameName").log(Level.FINER, "This is an FINER log entry");
        Logger.getLogger("SameName").log(Level.ALL, "This is an ALL log entry");

    }
} 
```

MyLogHandler.java

```
import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.LogRecord;
import java.util.logging.SimpleFormatter;

public final class MyLogHandler extends FileHandler {

    public MyLogHandler() throws IOException, SecurityException {
        super("/tmp/path-to-log.log");
        setFormatter(new SimpleFormatter());
        setLevel(Level.ALL);
    }

    @Override
    public void publish(LogRecord record) {
        System.out.println("Some additional logic");
        super.publish(record);
    }

} 
```

# php - 如何处理从服务器收到的 xml 响应？

> ID：15758686
> 
> 赞同：2
> 
> 时间：2013-04-02T07:41:19.460
> 
> 标签：php, jquery, xml, zend-framework, webservice-client

我是 xml 请求响应 Web 服务的新手。

我正在使用 zend 框架并向带有请求的服务器发送非 wsdl xml 请求`Content-Type:application/x-www-form-urlencoded`，我得到了正确的响应。

我发送请求的方式不是 ajax，我做普通表单发布，然后我生成请求 xml，然后我从服务器获取 xml 响应。

我在其中分配了响应 xml`$this->view->response = $xmlResponse;`并尝试访问`index.phtml`文件，例如

```
<script type="text/javascript">
var response = $.parseXML"<?php echo "<?xml version='1.0' encoding='utf-8'?>".$this->response;?>";
</script> 
```

但它显示错误

```
SyntaxError: unterminated string literal
[Break On This Error]   

var response = "<?xml version='1.0' encoding='utf-8'?><arzoo__response>
               |-----at here it shows error 
```

我需要根据这个响应 xml 在视图文件中显示一些内容，这就是为什么我将它辅助到 javascript 变量。

现在我的问题是处理这个 xml 响应的最佳方法是什么？请指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:18:19.373

我认为这个答案可能会对您有所帮助：[如何使用 jQuery 解析 XML？](https://stackoverflow.com/questions/7228141/how-to-parse-xml-using-jquery)

无论如何，你的陈述的括号在哪里？你的代码不需要看起来像这样？

```
<script type="text/javascript">
var file = '<?php echo $this->xmlFile ?>';
var response = $.parseXML(file);
console.log(test.text());
</script> 
```

# c++ - 使用 Clang 编译 c++11 代码的不完整类型

> ID：15758690
> 
> 赞同：0
> 
> 时间：2013-04-02T07:41:29.490
> 
> 标签：c++, c++11, clang

[如本网站所示](http://clang.llvm.org/compatibility.html#undep_incomplete)，使用 C++11 的 Clang 将不支持以下代码：

```
class Node {
    vertex<Node> children;
}; 
```

会出现错误：

```
field has incomplete type 'Node' 
```

但是 C++98 和其他编译器（例如 C++11 中的 gcc）支持此类代码。

我知道我可以使用

```
vertex<Node*> 
```

相反，但目前我与 C++98 中的旧代码存在一些不兼容问题。

我的问题是，（1）我可以在 C++11 中使用 Clang 编译这样的代码吗？（2）我认为树结构不可避免地需要像上面这样的定义，如果不支持这样的特性，我怎么能实现这样的树结构呢？

* * *

## 更新：

抱歉忘记给出顶点的定义，下面的代码呢：

```
class Node {
    vector<Node> children;
}; 
```

只需将顶点更改为容器向量。它在 C++ 11 的 Clang 中无效，但在其他编译器和 C++98 中都可以。

* * *

## 再次更新：

似乎矢量工作正常..但列表失败

```
class Node {
    std::list<Node> children;
}; 
```

* * *

## 再次更新：

以下是我的代码：

```
#include <list>

using namespace std;

class Node {
    list<Node> nodes;
};

int main(int argc, char const *argv[])
{
    return 0;
} 
```

或更简单：

```
#include <list>

class Node {
    std::list<Node> nodes;
};

int main() {} 
```

我正在使用 Clang 4.0 并使用以下命令进行编译：

```
clang++ -std=c++11 -stdlib=libc++ test.cpp 
```

错误是

```
/usr/bin/../lib/c++/v1/list:212:9: error: field has incomplete type 'Node' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:55:04.977

如果它不编译，则意味着`vertex`尝试以`Node`需要完全定义它的方式使用。大多数情况下，这意味着（对于通用代码）使用`T`参数的大小：

*   要么明确地 ( `sizeof(T)`)
*   或隐含地`template <typename T> struct vertex { T data[3]; };`使用大小`T`来计算类型的布局

另一个（可能的）问题是依赖于`T`某些模板实例化的方法；但是，这种情况要少得多。

您可以通过更改 的定义来避免此要求`vertex`。虽然不知道它是什么，但我们将无法获得更具体的信息......

# z3 - Z3中宏和量词的区别

> ID：15758699
> 
> 赞同：2
> 
> 时间：2013-04-02T07:41:55.570
> 
> 标签：z3

我想知道以下两条语句有什么区别-

**声明 1**

```
(define-fun max_integ ((x Int) (y Int)) Int 
  (ite (< x y) y x)) 
```

**声明 2**

```
(declare-fun max_integ ((Int)(Int)) Int)
(assert (forall ((x Int) (y Int)) (= (max_integ x y) (if (< x y) y x)))) 
```

我观察到，当我使用 Statement1 时，我的 z3 约束在 0.03 秒内给了我一个结果。而当我使用 Statement2 时，它没有在 2 分钟内完成，我终止了求解器。我也想知道如何使用 C-API 实现它。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:00:23.863

语句 1 是一个宏。Z3 将用表达式替换每次出现`max_integ`的`ite`。它在解析期间执行此操作。在第二个语句中，默认情况下，Z3 不会消除`max_integ`，并且为了能够返回`sat`它必须为未解释的符号构建一个解释，该解释`max_integ`将满足所有`x`和的量词`y`。Z3 有一个名为 的选项`:macro-finder`，它将检测本质上是编码宏的量词，并消除它们。这是一个示例（也可[在此处](http://rise4fun.com/Z3/Ho5N)在线获得）：

```
(set-option :macro-finder true)
(declare-fun max_integ ((Int)(Int)) Int)
(assert (forall ((x Int) (y Int)) (= (max_integ x y) (if (< x y) y x))))
(check-sat)
(get-model) 
```

话虽如此，我们可以通过编写一个给定 Z3 表达式返回新 Z3 表达式的函数，轻松地在编程 API 中模拟宏。这里是一个使用 Python API 的示例（也可以[在此处](http://rise4fun.com/z3py)在线获得）：

```
def max(a, b):
   # The function If builds a Z3 if-then-else expression
   return If(a >= b, a, b)

x, y = Ints('x y')
solve(x == max(x, y), y == max(x, y), x > 0) 
```

另一种选择是使用 C API `Z3_substitute_vars`：. 这个想法是一个包含自由变量的表达式。自由变量是使用 API 创建的`Z3_mk_bound`。每个变量代表一个参数。然后，我们用`Z3_substitute_vars`其他表达式替换变量。

# unix - 使用 UNIX 搜索准确的单词

> ID：15758701
> 
> 赞同：14
> 
> 时间：2013-04-02T07:42:06.057
> 
> 标签：unix, grep

我想在 Unix 中搜索确切的单词模式。示例：`Log.txt`文件包含以下文本：

```
aaa
bbb
cccaaa   ---> this should not be counted in grep output looking for aaa 
```

我正在使用以下代码：

```
count=$?
count=$(grep -c aaa $EAT_Setup_BJ3/Log.txt) 
```

这里的输出应该是 ==> 1 而不是 2，使用上面的代码我得到 2 作为输出。缺少一些东西，所以有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-02T07:45:55.360

使用整个单词选项：

```
grep -c  -w aaa $EAT_Setup_BJ3/Log.txt 
```

从`grep`手册：

> -w, --word-正则表达式
> 
> 仅选择那些包含构成整个单词的匹配项的行。测试是匹配的子字符串必须在行首，或者前面有一个非单词组成字符。

如评论中所述，`-w`是 GNU 扩展。使用非 GNU grep，您可以使用`word boundaries`：

```
grep -c "\<aaa\>" $EAT_Setup_BJ3/Log.txt 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T08:33:05.013

字边界匹配是标准 POSIX grep 实用程序的扩展。它可能可用或不可用。如果你想便携地搜索单词，我建议你改用 perl，你会在哪里使用

```
perl -ne 'print if /\baaa\b/' $EAT_Setup_BJ3/Log.txt 
```

# nosql - 将聚合和域事件与 nosql 存储一起使用

> ID：15758703
> 
> 赞同：1
> 
> 时间：2013-04-02T07:42:09.263
> 
> 标签：nosql, domain-driven-design, aggregateroot, aggregates, domain-events

我实际上在 DDD 和 NoSql 领域徘徊。我现在有一个疑问：我需要从聚合中生成事件，并且我想使用 NoSql 存储。但是我如何确保事件保存在存储中并且聚合根上的更改没有事务？这有意义吗？有没有办法在不被迫使用事件源或事务数据库的情况下做到这一点？实际上我正在考虑实现一个两阶段提交算法，但从性能的角度来看它似乎很重......我是否以错误的方式解决问题？充满了问题......感谢恩里科的每一个建议

PS我是stackoverflow的新手，所以任何建议/批评/......都非常欢迎Enrico

**编辑 1**

那么我需要事件来通知聚合发生了一些事情，我他们应该对变化做出反应。当此类事件对业务逻辑很重要时，就会出现问题。据我了解，经过一夜的思考，我不能使用nosql存储来做这样的事情。让我解释一下（大声思考：P）：

*   使用 ES（第一景）：我保存数据的“差异”。然后我产生一个与之相关的事件。2 操作。
*   使用 ES（第二景）：我保存数据的“差异”。一个进程，观察 ES 并产生事件。但我只拥有一个观察者进程来确保事件的正确顺序。
*   使用 ES（3d 场景）：幂等事件。事件可以由状态推断，并且事件的每次重新应用只能导致消费者发生一次更改，可以有多个“出队”过程，不可能发生重复。1的操作，但它给消费者带来了很大的限制。
*   一般来说：我保存聚合的数据。然后我产生一个与之相关的事件。2 操作。

现在问题变得更广泛了恕我直言，当域事件是业务流程的基本部分时，是否可以使用域事件和 nosql？我认为这可能是一个更好的选择关系......即使我需要添加相当多的机器来获得相同的性能。

**编辑2** 为了完整起见，在google上搜索“域事件nosql幂等”：http: [//svendvanderveken.wordpress.com/2011/08/26/transactional-event-based-nosql-storage/](http://svendvanderveken.wordpress.com/2011/08/26/transactional-event-based-nosql-storage/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:52:07.747

如果您需要[事件溯源](http://cqrs.wordpress.com/documents/cqrs-and-event-sourcing-synergy/)，您应该只存储**事件**。

这应该是顺序：

1.  聚合根接收[命令](http://epic.tesio.it/doc/manual/command_query_separation.html)
2.  它触发适当的事件
3.  事件被存储

每个聚合的再水合只能通过对其执行事件来完成。如果您在初始化时**测量**性能问题，您可以创建聚合的快照，但这不需要两阶段提交，因为您可以通过批处理异步构建快照。

[但是请注意，仅当您的应用程序高度并发](http://www.udidahan.com/2011/04/22/when-to-avoid-cqrs/)并且您需要处理[分区容差](http://lpd.epfl.ch/sgilbert/pubs/BrewersConjecture-SigAct.pdf)和补偿操作时，您才需要 CQRS 和/或事件溯源。

**编辑**
事件溯源是**对象状态**持久性的替代方案。您可以存储事件或对象模型的状态。您可以保存快照，但它们只是性能工具：您的应用程序必须能够在没有它们的情况下工作。您可以将此类快照视为一种缓存技术。作为替代方案，您可以保留对象状态（经典模型），但在这种情况下，您不需要存储事件。

在我自己的 DDD 应用程序中，我使用[可观察实体](http://epic.tesio.it/doc/manual/observable_entities.html)来解耦（通过直接事件从存储库订阅）聚合及其持久性。例如，您的存储库可以订阅每个域事件，并执行应用程序所需的操作（持久存储到存储区，分派到队列等等......）。但是作为一种持久性技术，事件溯源是可观察对象状态的经典持久性的**替代方案。**在大多数情况下，您不需要两者。

**编辑 2** 最后一点：如果您选择 ES，其中一个事件订阅者也可以构建关系[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)。

# c# - MEF 在导入程序集的构造函数中导入程序集不起作用 - 通过调用方法导入是否有效？

> ID：15758704
> 
> 赞同：2
> 
> 时间：2013-04-02T07:42:15.293
> 
> 标签：c#, mef

我很好奇为什么会发生以下情况：

当我在导入的程序集中使用 ImportMany 并在导入的程序集的构造函数中调用 compose 方法时，我可以看到 ImportMany IEnumerable get 已填充，但是一旦我走出构造函数并返回父程序集的代码，移动鼠标光标在刚刚导入的程序集上，它的 ImportMany IENumerable 是空的！

如果我在从“父”程序集调用的方法中进行组合，一切正常。

意味着以下内容不起作用：示例代码（父）：

```
 private CompositionContainer modules;
    private AggregateCatalog catalogOfModules = new AggregateCatalog();
    #region MEF Imports
    [Import(typeof(IMyTypedInterface<someOtherInterface>),AllowDefault=true)]
    public someOtherInterface someObject;
    public void StartProgram()
    {
        try
        {
            catalogOfModules.Catalogs.Add(new DirectoryCatalog(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + System.IO.Path.DirectorySeparatorChar + "directoryWichContainsMyAssembly"));
            modules = new CompositionContainer(catalogOfModules);
            modules.ComposeParts(this); 
            someObject.listOfModules.Count; # is 0              
        }
        catch (CompositionException)
        {
        }
    } 
```

示例代码（子）：

```
[Export(typeof(IMyTypedInterface<someOtherInterface>))]
public class ExampleChild{
    [ImportMany(typeof(someInterface))]
    private IEnumerable<someInterface> listOfModules;
    private CompositionContainer modules;
    private AggregateCatalog catalogOfModules = new AggregateCatalog();
    public ExampleChild()
    {
        catalogOfModules.Catalogs.Add(new DirectoryCatalog(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + System.IO.Path.DirectorySeparatorChar + "someDirectoryWithAssemblies"));
        modules = new CompositionContainer(catalogOfModules);
        modules.ComposeParts(this);
        listOfModules.Count; # is 2
    }
} 
```

============================================

但这确实有效

示例代码（父）：

```
 private CompositionContainer modules;
    private AggregateCatalog catalogOfModules = new AggregateCatalog();
    #region MEF Imports
    [Import(typeof(IMyTypedInterface<someOtherInterface>),AllowDefault=true)]
    public someOtherInterface someObject;
    public void StartProgram()
    {
        try
        {
            catalogOfModules.Catalogs.Add(new DirectoryCatalog(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + System.IO.Path.DirectorySeparatorChar + "directoryWichContainsMyAssembly"));
            modules = new CompositionContainer(catalogOfModules);
            modules.ComposeParts(this);     
            if (someObject != null)
            {
                someObject.ComposeMethod();
                someObject.listOfModules.Count; # is 2
            }
        }
        catch (CompositionException)
        {
        }
    } 
```

示例代码（子）：

```
[Export(typeof(IMyTypedInterface<someOtherInterface>))]
public class ExampleChild : IMyTypedInterface<someOtherInterface>, someOtherInterface{
    [ImportMany(typeof(someInterface))]
    private IEnumerable<someInterface> listOfModules;
    private CompositionContainer modules;
    private AggregateCatalog catalogOfModules = new AggregateCatalog();
    public void ComposeMethod()
    {
        catalogOfModules.Catalogs.Add(new DirectoryCatalog(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + System.IO.Path.DirectorySeparatorChar + "CM"));
        modules = new CompositionContainer(catalogOfModules);
        modules.ComposeParts(this);
        listOfModules.Count; # is 2
    }
} 
```

有人可以向我解释这种行为的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T10:59:56.703

我的错误是在每个具有子模块的模块中调用“modules.ComposeParts”。相反，只需调用“核心”中的 ComposeParts。其他一切都由 MEF 处理。所以孩子的代码变成了这样：

```
[Export(typeof(IMyTypedInterface<someOtherInterface>))]
public class ExampleChild : IMyTypedInterface<someOtherInterface>, someOtherInterface
{
    [ImportMany(typeof(someInterface))]
    private IEnumerable<someInterface> listOfModules;        
} 
```

# java - Java：HashMap中的对象作为值被覆盖？

> ID：15758709
> 
> 赞同：0
> 
> 时间：2013-04-02T07:42:30.247
> 
> 标签：java, hashmap, overwrite

我正在添加/编辑作为哈希图中值的对象——具有不同的键。

但是，在 hashmap 中编辑一个对象似乎会全部编辑它们（？）

我在这里做错了什么？

首先，我的（名字不好的）hashmap 类：

```
import java.util.HashMap;
public class hashmap {

static HashMap<Integer, exObj> hm;

hashmap(){
    hm = new HashMap<Integer, exObj>();
}
public void createVal(){
    for (int i = 0; i<10; i++){
        hm.put(i, new exObj(i));
    }
    hm.get(2).setValue();
}
public void printVal(){
    for (int i = 0; i<10; i++){
        System.out.println(hm.get(i).getValue());
    }
}
public static void main(String args[]){
    hashmap hmap = new hashmap();
    hmap.createVal();
    hmap.printVal();    
}

} 
```

其次，我的简单 exObj 类：

```
public class exObj {

private static int value;

exObj(int i){
    value = i;
}

public void setValue(){
    value = value + 1;
}

public int getValue(){
    return value; 
}

} 
```

返回输出：

```
10
10
10
10
10
10
10
10
10
10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T07:43:37.033

您拥有在类的所有实例之间共享的静态数据。

尝试将您的类更改为具有实例数据（即只需删除静态 on `private int value`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:45:40.100

这是因为`value`在您的班级`exObj`中是`static`：

```
public class exObj {

private static int value; 
```

因为是`static`，所以变量只有一个副本，所有`exObj`对象共享。

请参阅[了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:36:42.323

正如@Jeff Foster 和@Jesper 所说，这完全是关于使用静态变量。只是为了在您的示例中添加更多信息，通过运行代码

```
for (int i = 0; i<10; i++){
    hm.put(i, new exObj(i));
} 
```

最后一个被初始化的 exObj 获得值 '9'，它为所有实例共享。然后通过调用

```
hm.get(2).setValue(); 
```

该值设置为“10”

您可以简单地将“价值”声明为

```
private int value; 
```

所以 exObj 的每个实例都会有它自己的价值。还记得让你的班级名称以大写字母开头，作为一个好习惯

# ruby-on-rails - 在 Sidekiq 中限制每个队列的工作人员数量

> ID：15758710
> 
> 赞同：9
> 
> 时间：2013-04-02T07:42:31.000
> 
> 标签：ruby-on-rails, ruby, sidekiq

我一直在尝试使用[sidekiq-limit_fetch](https://github.com/brainopia/sidekiq-limit_fetch) gem 限制每个队列的工作人员数量，Sidekiq 似乎“看到”了日志中施加的限制，但是当我观察工作人员时，这些限制被忽略了。

这是 Sidekiq 看到限制的日志部分：

```
2013-04-02T05:47:19Z 748 TID-11ilcw DEBUG: {:queues=>
    ["recommendvariations",
     "recommendvariations",
     "recommendvariations",
     "recommendphenotypes",
     "recommendphenotypes",
     "recommendphenotypes",
     "preparse",
     "preparse",
     "preparse",
     "parse",
     "parse",
     "parse",
     "zipgenotyping",
     "zipgenotyping",
     "zipfulldata",
     "deletegenotype",
     "fitbit",
     "frequency",
     "genomegov",
     "mailnewgenotype",
     "mendeley_details",
     "mendeley",
     "pgp",
     "plos_details",
     "plos",
     "snpedia",
     "fixphenotypes"],
   :concurrency=>5,
   :require=>".",
   :environment=>"production",
   :timeout=>8,
   :profile=>false,
   :verbose=>true,
   :pidfile=>"/tmp/sidekiq.pid",
   :logfile=>"./log/sidekiq.log",
   :limits=>
    {"recommendvariations"=>1,
     "recommendphenotypes"=>1,
     "preparse"=>2,
     "parse"=>2,
     "zipgenotyping"=>1,
     "zipfulldata"=>1,
     "fitbit"=>3,
     "frequency"=>10,
     "genomegov"=>1,
     "mailnewgenotype"=>1,
     "mendeley_details"=>1,
     "mendeley"=>1,
     "pgp"=>1,
     "plos_details"=>1,
     "plos"=>1,
     "snpedia"=>1,
     "fixphenotypes"=>1},
   :strict=>false,
   :config_file=>"config/sidekiq.yml",
   :tag=>"snpr"} 
```

[这是](https://github.com/gedankenstuecke/snpr/blob/master/config/sidekiq.yml)sidekiq.yml 。从 sidekiq 的网络界面来看，这些限制被忽略了——现在，我在“recommendvariations”队列中有 2 个工作人员，但应该是 1 个。

我重新开始工人`bundle exec sidekiq -e production -C config/sidekiq.yml`。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T13:57:45.057

您是否尝试在 sidekiq.rb 初始化文件中设置限制？

像这样：

```
Sidekiq::Queue['recommend'].limit = 1 
```

它对我有用。

# algorithm - 如何找到连通子图？

> ID：15758712
> 
> 赞同：2
> 
> 时间：2013-04-02T07:42:40.187
> 
> 标签：algorithm, graph

我有一个网络，但这个网络没有连接。我想知道如何在这个网络中找到最大的连通图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:51:36.210

要计算节点所属的连通分量，只需运行任何类型的图搜索算法，例如[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。

要解决您的问题，请遍历网络中的所有节点并执行以下操作：

1.  如果给定节点已添加到组件中，则转到下一个节点（继续迭代）
2.  如果该节点尚未添加到组件中，则运行任何图形搜索（例如上面建议的 BFS）并将所有访问过的节点标记为属于同一组件。
3.  选择上面步骤 2 中构造的最大尺寸的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:27:08.940

另一种简单的方法是使用[union-find](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)：

```
S = array filled with 1s (|V| elements)

for each edge (u,v) in E:
    if find_set(u) != find_set(v):
        sum = S[find_set(u)] + S[find_set(v)]
        S[find_set(v)] = sum
        S[find_set(u)] = sum
        union_set(u, v) 
```

最后，S[find_set(u)] 将是节点 u 所属的连通分量的大小。要找到最大值，您只需要 find max(S)。

由于 find_set 和 union_set 都易于实现（每行 2 行 C++），我发现这种方法比 DFS 或 BFS 更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:34:27.377

设图为 a[n][n]，如果 i,j 连接，则 a[i][j]=1。

您可以执行以下操作。

```
count=0;/global

void dfs(int i)
{

int k;
for(k=0;k<n;k++)
    if(A[i][k]==1 && !visited[k])
    {
        count++;
        visited[k]=1;
        dfs(k);
    }
}
for(i=0; i < n;i++)
    {
        if(!visited[i])
        {
            count=1;
            visited[i]=1;
            dfs(i);
                            // map i with count .. here

        }
    } 
```

因此，一旦您完成了网络中的节点数与其节点之一的映射。

您现在需要做的就是在您的地图中找到最大计数的节点。

所以你会得到 key ，它是一个带有 count map(i) 的大网络节点。

使所有节点访问到 0 并再次应用 dfs(i) 你可以得到整个网络连接

反正我和你都有数。

# ios - CPU和GPU的低帧时间，低帧率？

> ID：15758717
> 
> 赞同：1
> 
> 时间：2013-04-02T07:43:09.623
> 
> 标签：ios, xcode, frame, rate

我很难理解为什么我的应用程序性能是 24fps 而不是通常的 30fps。

CPU 和 GPU 的帧时间在 6-18 毫秒之间变化，GPU 利用率从未超过 55%。这不是意味着帧率应该更高吗？

当我使用“分析性能”时，Xcode 告诉我：您的性能不受发出的 OpenGL ES 命令的限制。使用 Instruments 工具来调查您的应用程序的瓶颈所在。

我是这方面的初学者，所以有人可以向我解释一下帧时间为什么这么低，但帧速率这么高？（设备不是问题）

**编辑 2013 年 4 月 2 日**

新的发展：只有当我从 Xcode 运行应用程序时才会出现这种帧率下降（我知道这是因为当应用程序性能不佳时，声音不同步并且加速度计灵敏度降低）。当我停止从 Xcode 运行并直接从我的 iPod 运行应用程序时，帧速率是完美的。现在我想知道我的应用程序是否真的存在性能问题。Xcode 是否可以通过运行测试或监控设备来阻碍应用程序的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T03:42:17.497

您应该将帧速率设置为您的 avCaptureConnection。然后它应该没问题。

# c# - 从 YouTube URL 中提取 mp4 视频并在 Windows Phone 8 应用程序中的播放器上播放该视频

> ID：15758720
> 
> 赞同：0
> 
> 时间：2013-04-02T07:43:12.553
> 
> 标签：c#, xaml, youtube, windows-phone-8

我想从 YouTube url 中提取 mp4 格式的视频，并在嵌入在 windows phone 8 应用程序中的某种播放器上播放该 mp4 视频（播放器应该与 windows phone 8 兼容）

# javascript - 如何获取json内部数组的值？

> ID：15758732
> 
> 赞同：0
> 
> 时间：2013-04-02T07:44:08.600
> 
> 标签：javascript, json

我正在处理一个像这样的对象：

```
"{'foo': 'bar','task':[{'task1':'task1'}]}" 
```

如何将字符串转回对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:49:30.040

尝试以下解决方案来解析字符串化的 JSONObject。

```
// Stringified JSON Object
var stringifiedJSONObject = '{'foo': 'bar','task':[{'task1':'task1'}]}';

// Parsing string object to json
var jsonObject = JSON.parse(stringifiedJSONObject);

// Get the inner array. The below object is a JSON Array of Objects
var innerArray = jsonObject.task;

// displays the value of task1
alert(innerArray[0].task1); 
```

# iphone - 如何动态改变 CCsprite 的运动

> ID：15758738
> 
> 赞同：0
> 
> 时间：2013-04-02T07:44:30.130
> 
> 标签：iphone, ios, cocos2d-iphone, ccsprite

我正在开发一个精灵跳跃的游戏。我想动态地改变精灵的运动。就像当一个跳跃的精灵到达一个特定的位置或越过水平线时，精灵应该在水平线上移动..有人知道吗？这个东西怎么弄？？？

# javascript - 当引用位于数组中时，如何从分层对象中获取值？

> ID：15758764
> 
> 赞同：4
> 
> 时间：2013-04-02T07:46:09.257
> 
> 标签：javascript, arrays, javascript-objects

我有以下对象

```
{
"locations": {
    "Base 1": {
        "title": "This is base 1",
        "Suburb 1": {
            "title": "Suburb 1 in Base 1",
            "Area A": {
                "title": "Title for Area A",
                "Street S1": {
                    "title": "Street S1 title"
                },
                "Street C4": {
                    "title": "Street C4 title"
                },
                "Street B7": {
                    "title": "Street B7 title"
                }
            },
            "Another Area": {
                "title": "Title for Area A",
                "Street S1": {
                    "title": "Street S1 title"
                },
                "Street C4": {
                    "title": "Street C4 title"
                },
                "Street B7": {
                    "title": "Street B7 title"
                }
            }
        },
        "Another Suburb": {
            "title": "Suburb 1 in Base 1",
            "Area A": {
                "title": "Title for Area A",
                "Street S1": {
                    "title": "Street S1 title"
                },
                "Street C4": {
                    "title": "Street C4 title"
                },
                "Street B7": {
                    "title": "Street B7 title"
                }
            },
            "Another Area": {
                "title": "Title for Area A",
                "Street S1": {
                    "title": "Street S1 title"
                },
                "Street C4": {
                    "title": "Street C4 title"
                },
                "Street B7": {
                    "title": "Street B7 title"
                }
            }
        }
    },
    "Base2": {}
}
} 
```

我得到了从“位置”对象中获取“标题”的数组，每个数组都可以不同。我知道我可以像这样访问单个值：

```
locations["Base 1"]["title"]
locations["Base 1"]["Another Suburb"]["title"]
locations["Base 1"]["Another Suburb"]["Area A"]["title"]
etc etc. 
```

但是如果给我这样的数组，我不确定如何获得 title 的值：

```
AnArray = ["Base 1", "title"];
AnArray = ["Base 1", "Another Suburb", "title"];
AnArray = ["Base 1", "Another Suburb", "Area A", "title"];
AnArray = ["Base 1", "Another Suburb", "Another Area", "title"]; 
```

有没有办法解析/使用这些数组，以便每个从位置对象返回正确的标题值？

我必须在每种情况下获取标题的值，我什至不知道从哪里开始。我尝试加入数组，然后获取“标题”值，但这似乎不起作用。

菜鸟在这里，所以请不要介意这个问题听起来很愚蠢/或没有意义。

所以问题是，当引用在数组中时，如何从分层对象中获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:27:27.487

```
function getNested(obj, ar_keys) {
    var innerObj = obj;
    for(var i=0,il=ar_keys.length; i<il; i++){
      innerObj = innerObj[ar_keys[i]];
    }
    return innerObj;
} 
```

你会用它来称呼它

```
 getNested(x['locations'], ar_keys); 
```

其中 x 是您的对象， ar_keys 是键数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:22:57.173

我想你需要这样的东西：

*   遍历每个数组
*   遍历数组的值
*   为每个值嵌套一层更深的对象
*   将最终值存储在数组中

试试这个：

```
var arrays = [
    ["Base 1", "title"],
    ["Base 1", "Another Suburb", "title"],
    ["Base 1", "Another Suburb", "Area A", "title"],
    ["Base 1", "Another Suburb", "Another Area", "title"]
],
array, i, j,
obj = {
    "locations": {
        "Base1": {
            "title": "Thisisbase1",
            "Suburb1": {
                "title": "Suburb1inBase1",
                "AreaA": {
                    "title": "TitleforAreaA",
                    "StreetS1": {
                        "title": "StreetS1title"
                    },
                    "StreetC4": {
                        "title": "StreetC4title"
                    },
                    "StreetB7": {
                        "title": "StreetB7title"
                    }
                },
                "AnotherArea": {
                    "title": "TitleforAreaA",
                    "StreetS1": {
                        "title": "StreetS1title"
                    },
                    "StreetC4": {
                        "title": "StreetC4title"
                    },
                    "StreetB7": {
                        "title": "StreetB7title"
                    }
                }
            },
            "AnotherSuburb": {
                "title": "Suburb1inBase1",
                "AreaA": {
                    "title": "TitleforAreaA",
                    "StreetS1": {
                        "title": "StreetS1title"
                    },
                    "StreetC4": {
                        "title": "StreetC4title"
                    },
                    "StreetB7": {
                        "title": "StreetB7title"
                    }
                },
                "AnotherArea": {
                    "title": "TitleforAreaA",
                    "StreetS1": {
                        "title": "StreetS1title"
                    },
                    "StreetC4": {
                        "title": "StreetC4title"
                    },
                    "StreetB7": {
                        "title": "StreetB7title"
                    }
                }
            }
        },
        "Base2": {}
    }
},
current, key,
result = [];

for (i = 0; i < arrays.length; i++) {
    array = arrays[i];

    // reset current to the locations object
    current = obj.locations;

    for (j = 0; j < array.length; j++) {

        // remove spaces from the keys
        key = array[j].replace(' ', '', 'gi');

        if (current[key]) {
            // if there is such key then nest further
            current = current[key];
        } else {
            // there is no such key - log it
            console.log(key);
        }
    }

    if (typeof current === "string") {
        // if you have reached a string with the nesting add it to the result
        result.push(current);
    }
}

// output the final result
console.log(result); 
```

就我而言，它输出：

```
["Thisisbase1", "Suburb1inBase1", "TitleforAreaA", "TitleforAreaA"] 
```

我添加了额外的日志记录，因此很明显如果键出现问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T09:48:33.917

如果数组是所需标题的“路径”，您可以这样做。

请注意，在这种情况下需要“位置”，因为它是路径的开始，并且不需要标题，因为我们一直在寻找它。

```
var path = ["locations", "Base1", "AnotherSuburb"];

(function search(o, a){
    for(var p in o){
        if(typeof o[p] === 'object' && path.indexOf(p) !== -1){
            a.push(p);
            if(a.join('') === path.join('')){
                // match, print the title
                console.log(o[p].title);
            }
            else{
               search(o[p], a);
            }
        }
    }
})(object, []); 
```

将打印`Suburb1inBase1`

演示：http: [//jsfiddle.net/louisbros/Fq63D/](http://jsfiddle.net/louisbros/Fq63D/)

# scala - 具有多个参数的 Scala 运算符重载

> ID：15758766
> 
> 赞同：2
> 
> 时间：2013-04-02T07:46:14.417
> 
> 标签：scala, syntax, operator-overloading, dsl

**简而言之：**我尝试为`A <N B`Scala 中的 DSL 编写类似 T 类型的整数 N 和 A,B 的东西。这样做有很好的可能性吗？

**Longer：**我尝试在 Scala 中为[Tgrep2编写 DSL。](http://tedlab.mit.edu/~dr/Tgrep2/tgrep2.pdf)我目前有兴趣写

```
A <N B          B is the Nth child of A (the rst child is <1). 
```

以一种很好的方式，并尽可能接近 Scala 中的原始定义。有没有办法重载`<`运算符，它可以将 N 和 B 作为参数。

**我尝试了什么：**我尝试了两种不同的可能性，但并没有让我很开心：

```
scala> val N = 10
N: Int = 10

scala> case class T(n:String) {def <(i:Int,j:T) = println("huray!")}
defined class T

scala> T("foo").<(N,T("bar"))
huray! 
```

和

```
scala> case class T(n:String) {def <(i:Int) = new {def apply(j:T) = println("huray!")}}
defined class T

scala> (T("foo")<N)(T("bar"))
warning: there were 1 feature warnings; re-run with -feature for details
huray! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:24:34.610

我建议您使用类似的东西`nth`而不是`<`使语义清晰的符号。`A nth N is B`至少对我来说很有意义。它会转化为类似的东西

```
case class T (label:String){
  def is(j:T) = {
label equals j.label
  }
}

case class J(i:List[T]){
  def nth(index:Int) :T = {
    i(index)
  }
} 
```

您可以轻松做到：

```
val t  = T("Mice")
val t1 = T("Rats")
val j  = J(List(t1,t))

j nth 1 is t //res = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:36:05.927

问题是`apply`它不能作为后缀运算符工作，所以没有括号你不能写它，你可以这样写：

```
 case class T(n: String) {
    def <(in: (Int, T)) = {
      in match {
        case (i, t) =>
          println(s"${t.n} is the ${i} child of ${n}")

      }
    }
  }

  implicit class Param(lower: Int) {
    def apply(t: T) = (lower, t)
  } 
```

但是之后，

```
T("foo") < 10 T("bar") 
```

仍然会失败，但您可以通过以下方式解决：

```
T("foo") < 10 (T("bar")) 
```

如果不在某处添加括号，就没有做你想做的事的好方法。

我认为如果您真的想坚持使用这种语法，您可能想要使用[组合解析器。](http://debasishg.blogspot.com.br/2008/04/external-dsls-made-easy-with-scala.html)或者正如@korefn 建议的那样，您破坏了兼容性并使用新的运算符来实现。

# magento-1.7 - 在 magento 中调用 jquery lightbox 中的静态块

> ID：15758770
> 
> 赞同：0
> 
> 时间：2013-04-02T07:46:28.837
> 
> 标签：magento-1.7, lightbox, block

我想在 jquery 灯箱中调用静态块。几秒钟后，我会在 hamoe 页面上自动显示一个灯箱。我想在该灯箱中调用一个静态块，以便管理员可以通过使用编辑器更改静态块来更改灯箱的内容。

到目前为止，我已经做到了

```
<a id="pop" href="{{block type=”cms/block” block_id=”social”}}"></a> 
```

并在 jquery fancybox 中调用它。但它在灯箱中显示了一个 404 页面和嵌入其中的社交块！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T15:50:46.853

您可以通过添加新页面并从**设计选项卡中将****布局设置为空**来实现此目的。

 **一旦你有了页面，只需像这样在花哨的框中调用它。

```
<a href='<?php echo $this->getBaseUrl(). you_page_identifie?>' class='fancybox'><?php echo $this->__('Fancy box content from admin cms') ?></a> 
```**

# android - 在android中出现内存错误

> ID：15758775
> 
> 赞同：0
> 
> 时间：2013-04-02T07:46:41.450
> 
> 标签：android, json

在我的应用程序中，我可以通过使用 json 向本地服务器发送请求来登录。我正在使用共享首选项保存 json 的所有数据。单击注销按钮后，它将返回登录活动并从共享首选项中删除所有数据。但是当登录后我将使用任何其他 email_id 登录时，密码它显示我以下错误：

```
04-02 13:02:25.161: E/AndroidRuntime(1061): FATAL EXCEPTION: main
04-02 13:02:25.161: E/AndroidRuntime(1061): java.lang.OutOfMemoryError
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:124)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.lang.StringBuilder.append(StringBuilder.java:271)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.io.BufferedReader.readLine(BufferedReader.java:417)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at com.example.androidhive.library.JSONParser.getJSONFromUrl(JSONParser.java:59)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at com.example.androidhive.library.UserFunctions.loginUser(UserFunctions.java:37)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:93)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.view.View.performClick(View.java:4084)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.view.View$PerformClick.run(View.java:16966)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.os.Handler.handleCallback(Handler.java:615)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.os.Looper.loop(Looper.java:137)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-02 13:02:25.161: E/AndroidRuntime(1061):     at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用这些代码登录：

```
 btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            json = userFunction.loginUser(email, password);
            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);
                    if (Integer.parseInt(res) == 1) {
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(
                                getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        SharedPreferences prefs = getSharedPreferences(share_pref_file, Context.MODE_PRIVATE);
                        SharedPreferences.Editor editor = prefs.edit();
                        editor.putString("jsondata", json.toString());
                        editor.commit();

                        // Clear all previous data in database
                        // userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_EMAIL),
                                json.getString(KEY_UID));
                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(
                                getApplicationContext(),
                                DashboardActivity.class);
                        dashboard.putExtra("email", email);
                        dashboard.putExtra("password", password);
                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    } else {
                        // Error in login
                        loginErrorMsg
                                .setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            } 
```

这里是 JSONParser.java:59 的代码：

```
 try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    } 
```

第二个错误代码行是：

```
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    // Log.e("JSON", json.toString());
    return json;
} 
```

那么你能告诉我我第二次无法登录的问题吗？提前致谢。

# ios - 2 个具有相同实体的不同应用程序，用于与 Simperium 同步

> ID：15758778
> 
> 赞同：0
> 
> 时间：2013-04-02T07:46:52.440
> 
> 标签：ios, core-data, simperium

我在[https://simperium.com](https://simperium.com)上创建了 2 个不同的应用程序。这些应用程序具有相同的核心数据实体名称。现在它只同步不在应用程序 1 中的实体。

我必须重命名应用程序 2 中的实体？这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T21:50:49.373

默认情况下，数据不会在 Simperium 中的两个不同应用程序之间同步。每个应用程序都有自己的安全命名空间。很可能您尝试做的任何事情都可以通过另一种方式完成。如果您能够提供更多详细信息，我很乐意看看。

# android - 使用编译的 lua 脚本的 Cocos2d-x 在 Android 上不起作用

> ID：15758783
> 
> 赞同：1
> 
> 时间：2013-04-02T07:47:08.137
> 
> 标签：android, c++, lua, cocos2d-x

我一直在尝试让 HelloLua 示例在 Android 中运行。如果 hello.lua 不是使用 luac 编译的形式，它可以工作。但是如果我编译 hello.lua 并将其上传到我的 Android 手机中，它只会给我一个黑屏。谁能帮我解决这个问题？

这是 AppDelegate::applicationDidFinishLaunching() 中的代码

```
#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID)
    CCString* pstrFileContent = CCString::createWithContentsOfFile("hello.lua");
    if (pstrFileContent)
    {
        pEngine->executeString(pstrFileContent->getCString());
    }
#else
    std::string path = CCFileUtils::sharedFileUtils()->fullPathForFilename("hello.lua");
    pEngine->addSearchPath(path.substr(0, path.find_last_of("/")).c_str());
    pEngine->executeScriptFile(path_c_str());
#endif 
```

当我在 Windows 中运行但在 Android 中运行时，编译的 lua 似乎有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:23:13.483

手册[页](http://www.lua.org/manual/5.2/luac.html)`luac`说“预编译的块不能跨不同的体系结构移植” 。

# python - python：迭代包含列表作为值的字典的每个组合

> ID：15758784
> 
> 赞同：0
> 
> 时间：2013-04-02T07:47:10.777
> 
> 标签：python, python-2.7

假设我有一本字典 dictList = {1:[1,3,4,8], 2:[5,7,2,8], 3:[6,3,5,7]}

我想打印这样的所有组合： key,value 第一次迭代 1,1 2,5 3,6 第二次迭代 1,1 2,5 3,3 .... 等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:59:17.573

假设您要做的是检索每组唯一的三个键值对：

```
from itertools import permutations
# define dictList
# define numkeys to be the number of keys in dictList
# define maxLen to be the number of items in each dict value
perms = permutations(range(maxLen),numKeys)
for p in perms:
    i = 1     # you're indexing your dictionary from 1, not 0
    while i <= numKeys:
        myfunction(i,dictList[i][p[i-1]])   # ...which is why this is awkward
        i += 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:26:05.807

```
 from itertools import product
    from itertools import izip_longest  # This is used to deal with variable length of lists

    dictList = {1:[1,3,4,8], 2:[5,7,2,8], 3:[6,3,5,7,8]}

    dict1 = [dict(izip_longest(dictList, v)) for v in product(*dictList.values())]

    for dict2 in dict1:
        for key, value in dict2.items():
            print key, value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:52:36.800

就像已经说过的那样，您似乎错误地解释了您的问题。但我猜你想要类似的东西：

> [(1, 1), (2, 5), (3, 6), (1, 3), (2, 7), (3, 3), (1, 4), (2, 2), ( 3, 5), (1, 8), (2, 8), (3, 7)]

我会尝试使用`zip`. 例如，您的值上的 zip 将关联所有第一项、所有第二项等。

**警告：只有当您的列表长度相同时，它才会起作用！（否则你可以导入`itertools.izip_longest`替换 zip，额外的索引将返回 None）**

```
>>> zip(*dictList.values())
[(1, 5, 6), (3, 7, 3), (4, 2, 5), (8, 8, 7)] 
```

所以下面的代码：

```
for t in zip(*dictList.values()):
...    for i, k in enumerate(dictList.keys()):
...       print k, t[i] 
```

将打印：

```
1 1
2 5
3 6
1 3
2 7
3 3
1 4
2 2
3 5
1 8
2 8
3 7 
```

有一种方法可以在一行中完成：

```
>>> reduce(lambda cumul, v:cumul + list(zip(dictList.keys(), v)), zip(*dictList.values()), [])
[(1, 1), (2, 5), (3, 6), (1, 3), (2, 7), (3, 3), (1, 4), (2, 2), (3, 5), (1, 8), (2, 8), (3, 7)] 
```

是的，我知道，**它不是真正可读的**，但我发现尝试在一行 xD 中做这种事情很有趣，在使用它之前花点时间了解正在发生的事情。

希望对您有所帮助，祝您有美好的一天。

# ios - 在 UITableViewCell 和 UICollectionViewCell 之间共享代码

> ID：15758787
> 
> 赞同：2
> 
> 时间：2013-04-02T07:47:19.933
> 
> 标签：ios, objective-c, design-patterns, uitableview, uicollectionviewcell

我有一个相当大的 UITableViewCell 子类，它处理各种手势和统计行为。我还在构建一个 UICollectionView，我的 UICollectionViewCell 子类行为非常接近我的 UITableViewCell。我已经粘贴了很多代码。

我的问题是：是否有一种设计模式可以让我在这两个子类之间共享 UI 代码（手势和状态）？

我听说过构图模式，但我很难适应这种情况。使用正确的模式吗？

注意：我必须同时保留 UITableView 和 UICollectionView，因此删除 UITableView 不是解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-27T07:51:34.830

我认为，您可以在它们共同的祖先 UIView 上使用类别。您只能共享常用方法，不能共享实例变量。

让我们看看如何使用它。

例如，您有自定义 UITableViewCell

```
@interface PersonTableCell: UITableViewCell
@property (nonatomic, weak) IBOutlet UILabel *personNameLabel;
- (void)configureWithPersonName:(NSString *)personName;
@end

@implementation PersonTableCell
- (void)configureWithPersonName:(NSString *)personName {
    self.personNameLabel.text = personName;
}
@end 
```

和 UICollectionViewCell

```
@interface PersonCollectionCell: UICollectionViewCell
@property (nonatomic, weak) IBOutlet UILabel *personNameLabel;
- (void)configureWithPersonName:(NSString *)personName;
@end

@implementation PersonCollectionCell
- (void)configureWithPersonName:(NSString *)personName {
    self.personNameLabel.text = personName;
}
@end 
```

两个共享通用方法**configureWithPersonName:**让他们的祖先 UIView 创建类别。

```
@interface UIView (PersonCellCommon)
@property (nonatomic, weak) IBOutlet UILabel *personNameLabel;
- (void)configureWithPersonName:(NSString *)personName;
@end

@implementation UIView (PersonCellCommon)
@dynamic personNameLabel; // tell compiler to trust we have getter/setter somewhere
- (void)configureWithPersonName:(NSString *)personName {
    self.personNameLabel.text = personName;
}
@end 
```

现在在单元实现文件中导入类别标题并删除方法实现。从那里您可以使用类别中的常用方法。您唯一需要复制的是属性声明。

# javascript - 基于JSF中动作控制器方法的返回值调用javascript？

> ID：15758799
> 
> 赞同：0
> 
> 时间：2013-04-02T07:47:52.467
> 
> 标签：javascript, jsf-2

我在 backing bean 中编写了一个 action 方法，由命令按钮的 action 属性调用。成功执行时返回“null”，否则返回“error”。我需要的是，我想根据操作方法的返回值在 javascript 对话框中显示适当的消息。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:44:17.700

由于您使用的是 JSF 2，因此您可以`<f:ajax/>`在这里使用一些魔法。在您的命令按钮内嵌套此标签之一：

```
<h:commandButton id="yourCmdButton" action="#{yourBean.yourMethod}">
    <f:ajax render="hiddenComponent" onevent="displayMessage">
</h:commandButton> 
```

`yourMethod`应该将您提到的值更新为绑定到`<h:inputHidden/>`with的字段，`id="hiddenComponent"`并且通过 ajax，组件将被更新。然后，`displayMessage`将`onevent`调用 javascript 函数（为关联的 jax 请求定义一个回调 javascript 函数），您必须在此处获取该组件的值并在必要时显示一条消息。

另一方面，您可以使用所谓的*Flash Scope*，但它本身并不是一个范围。可以通过将其注入 bean 以不同的方式访问它：

```
@ManagedProperty("#{flash}")
private Flash flash;

//The setter is required
public void setFlash(Flash newFLash) {
    flash = newFlash;
} 
```

或直接获取：

```
Flash jsfFlash = FacesContext.getCurrentInstance().getExternalContext().getFlash();
jsfFlash.put("errorMsg", "error");
//Or jsfFlash.put("errorMsg", null) if there's no error. 
```

Flash`Map`允许参数在请求之前一步存活，允许本地实现 POST - Redirect - GET 模式，而您几乎不需要任何努力。

在页面上，您可以直接访问 flash 并在 flash 不包含错误属性时呈现消息：

```
<h:panelGroup rendered="#{flash.errorMsg != null}">
    <p>
        Well... it seems an error occured...
    </p>
</h:panelGroup> 
```

请记住，如果您的 Flash 密钥字符串出于某种原因包含句点，则必须改用此命名法：

```
<h:panelGroup rendered="#{flash['error.message'] != null}"> 
```

只需记住重新渲染`<h:panelGroup/>`该组件的父级（通过使用不带javascript 回调函数的`<f:ajax/>`标记）。`onevent`关于重新渲染父组件，您不能直接在 JSF 中重新渲染有条件渲染的组件，因此您最终会得到如下内容：

```
<h:panelGroup id="messageParentGroup">
    <h:panelGroup rendered="#{flash.errorMsg}">
        ...

<h:commandButton ...>
    <f:ajax render="messageParentGroup"/>
</h:commandButton> 
```

此外，还要考虑组件的上下文。您可能必须为该组件定义完整路径，而不是相对路径。

作为旁注，您为什么不使用 JSF 的验证？通过使用验证器方法或与`<h:messages/>`组件一起使用完全实现的验证器会更好，并且您可以避免表单值的污染（因为验证器会启动并阻止其他阶段中的 SetValues 发生）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T07:51:23.247

您可以`RequestContext.getCurrentInstance().execute("myfunction()")`在支持 bean 中使用该方法。它可以让你执行客户端的 javascript 代码。不幸的是，这仅在 Primefaces 中可用（afaik）。

# c# - 使用正则表达式解析电子邮件回复

> ID：15758800
> 
> 赞同：0
> 
> 时间：2013-04-02T07:47:57.197
> 
> 标签：c#, regex, email-parsing

我试图使用以下链接中提供的解决方案以编程方式解析电子邮件回复： [Parse email content from quoted reply](https://stackoverflow.com/questions/278788/parse-email-content-from-quoted-reply?answertab=active#tab-top)

它在大多数情况下都可以正常工作，除了 gmail 和 Outlook。它还选择发件人行：
2013 年 3 月 31 日星期日上午 10:57，<abc@domain.com> 写道：

我不太了解正则表达式，但以下应该正确解析它：

```
new Regex("From:\\s*" + Regex.Escape(address), RegexOptions.IgnoreCase)
new Regex("\\n.*On.*(\\r\\n)?wrote:\\r\\n", RegexOptions.IgnoreCase | RegexOptions.Multiline) 
```

示例数据：
请阅读。\r\n\r\n\r\n2013 年 3 月 31 日星期日上午 10:57，<\r\n abc@domain.com > 写道：\r\n\r \n>

预期结果：
请阅读。

当前结果：
请阅读。在 2013 年 3 月 31 日星期日上午 10:57，写道：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:54:48.193

使用捕获组来获得此匹配的一部分：

```
new Regex("\\n(.*)[\\r\\n]*On(?:.|\\r|\\n)*?wrote:\\r\\n", RegexOptions.IgnoreCase | RegexOptions.Multiline) 
```

此外，使用[惰性运算符](http://www.regular-expressions.info/repeat.html)而不是贪婪运算符： .* => .*?
提供的链接将告诉您原因。

**编辑：**正如我的评论所指出的， \r 和 \n 不会被点匹配。它还说建议您使用惰性运算符非常愚蠢，尽管我会接受它，因为它仍然是未来值得拥有的知识。

**Edit2：**事实上它不是正则表达式的第二部分。已编辑。

# c# - C#，VisualStudio，如何获取错误和警告的 ID？

> ID：15758801
> 
> 赞同：4
> 
> 时间：2013-04-02T07:48:07.047
> 
> 标签：c#, visual-studio, visual-studio-2012

在 Visual Studio 中，如何从“错误列表”窗口获取错误代码或警告代码？

另外，我如何配置特定警告是错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:56:17.467

您无法在错误列表中找到它们，但如果您检查输出窗口，它将具有如下详细信息：

> 警告 CS0219：分配了变量“j”，但从未使用过它的值

![在此处输入图像描述](https://i.stack.imgur.com/66uSd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:06:19.077

要配置警告：

*   打开项目的属性对话框。
*   单击构建属性页面。

现在你可以

1）修改`Warning Level`属性。

2) 设置`treat warnings as errors`为`All`或`Specific warnings`

![截屏](https://i.stack.imgur.com/howgl.png)

**此外**，可以通过使用记事本、sublime 文本等文本编辑器直接编辑项目文件来将特定警告设置为错误。C# 项目文件可以在项目文件夹中找到，并具有扩展名“csproj”。定位`PropertyGroup`元素并添加嵌套元素

```
<PropertyGroup>
    <WarningsAsErrors>612</WarningsAsErrors>
</PropertyGroup> 
```

顺便说一句，您可以`Treat all warnings as errors`在 Visual Studio 中设置，然后添加

```
<WarningsNotAsErrors>618,1030,1701,1702</WarningsNotAsErrors> 
```

只**排除**一些**特定**的`PropertyGroup` _

# wpf - 删除 ListViewItem 上的边框

> ID：15758804
> 
> 赞同：6
> 
> 时间：2013-04-02T07:48:16.030
> 
> 标签：wpf, xaml

我想删除 ListView 和 ListViewItem 边界之间的边界，它看起来像是 LVItem 的边界。我真的需要摆脱它，因为我希望所选项目与正确的浅灰色区域连接。（当然没有那个只测试边框的白色边框，看看列表视图中的这些边框是怎么回事）

![在此处输入图像描述](https://i.stack.imgur.com/AKRkR.png)

这是我的样式代码： http: [//pastebin.com/TH83CaL0](http://pastebin.com/TH83CaL0)

我的 listview xaml 代码如下所示：

[http://pastebin.com/zvyJem02](http://pastebin.com/zvyJem02)

编辑：我是 wpf 和 xaml 的新手，因为我从 1 周前开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:05:47.587

`Margin="-1.5 0 0 0" Panel.ZIndex="1"`我认为您不能仅通过样式来摆脱此边框，但您可以将“右浅灰色区域”向左移动一点，并通过设置或（如您所做的那样）隐藏一点 ListBox让它与您的 ListView 重叠通过设置它的灰色区域后面`Margin="-1"`。

# python - Python中的哈希表

> ID：15758806
> 
> 赞同：3
> 
> 时间：2013-04-02T07:48:29.687
> 
> 标签：python, c, dictionary, hashtable, key-value

目前在我的程序中使用 5 个字典，其中 2 个有 1300 万个键值对。每个字典都是对，其中键是长度为 1-6 的字符值，值是键、值对的另一个字典，现在键的长度为 1-12，值是元组。

python 中的这个解决方案运行良好，但效率不高，每次执行查找大约有 80 万次。当在服务器上的另一个用 c 编写的脚本（实时过滤应用程序）上使用 GHashTable 时，他的性能非常出色。

我的问题是是否有任何对象或实现使用 GHashTable 之类的散列函数是 python 来满足我的要求。python中的字典使用哈希，但为什么它在大量记录中那么慢。与 c 的 GHashTable 相比，python 字典使用的哈希效率不高。python中是否有更好的哈希实现可用。

python dict 在几百万条记录中运行良好，但在重负载情况下它无法响应 O(1)。

**您的 Python 进程是否适合 RAM？** 是的，我有 18GB 的​​ Ram，只有 8GB 是为 postgres 和其他东西保留的。而 10GB 可用于处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-19T01:39:37.653

当存在哈希冲突时，`dict`通过使用该`__eq__`方法解决冲突，按值检查是否相等。这似乎是您减速的原因。

因此，如果对于某个键 a 和 b，那么我们通过检查and `hash(a) == hash(b)`来解决冲突。`my_dict[a]``my_dict[b]`

例如，通过蛮力，我们发现`hash(2**1000)`等于`hash(16777216)`。让我们测试一下，

```
>>> my_dict ={}
>>> my_dict[2**1000] = "One"
>>> my_dict[16777216] = "Two"
>>>
>>>
>>> for k,v in my_dict.items():
...     print(hash(k), v)
... 
16777216 One
16777216 Two 
```

# php - PHP 处理长整数

> ID：15758810
> 
> 赞同：2
> 
> 时间：2013-04-02T07:48:38.533
> 
> 标签：php, facebook, integer

我正在尝试从 facebook 获取数据。所以我尝试`user_id`从他们的数组中获取。
问题是有些`user_id`太长了，以至于当我尝试获取它时，它会返回类似

`1.00003247906E+14`

代替

`100003247905698`

我该如何解决？我需要实际的`user_id`.

我尝试使用：

```
$targets = (string)($status->actor_id); 
```

但它仍然返回相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:55:58.650

快速解决此问题：

```
printf("%14.0f", 1.00003247906E+14); 
```

将打印

```
100003247905698 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:56:11.827

`$targets = (string)($status->actor_id);`必须是返回值和无效值，因为无效值必须已经在 $status 内

您实际上是否直接打印检索到的 user_id （例如 via `print_r($status)`）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:57:25.877

你可以试试`$targets = sprintf('%0.0f',$status->actor_id)`

# linux - 将多行变成一个逗号分隔的行

> ID：15758814
> 
> 赞同：95
> 
> 时间：2013-04-02T07:48:56.700
> 
> 标签：linux, perl, unix, sed, awk

我在多行中有以下数据：

```
foo
bar
qux
zuu
sdf
sdfasdf 
```

我想要做的是将它们转换为一个逗号分隔的行：

```
foo,bar,qux,zuu,sdf,sdfasdf 
```

什么是最好的unix单线做到这一点？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-04-02T08:04:09.940

使用粘贴命令：

```
paste -d, -s file 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-07-20T06:47:20.930

### 文件

```
aaa
bbb
ccc
ddd 
```

### xargs

```
cat file | xargs 
```

### 结果

```
aaa bbb ccc ddd 
```

### xargs 改进

```
cat file | xargs | sed -e 's/ /,/g' 
```

### 结果

```
aaa,bbb,ccc,ddd 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-02T08:14:33.123

有很多方法可以实现。您使用的工具主要取决于您自己的偏好或经验。

使用 tr 命令：

```
tr '\n' ',' < somefile 
```

使用 awk：

```
awk -F'\n' '{if(NR == 1) {printf $0} else {printf ","$0}}' somefile 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-24T14:23:21.790

`xargs -a your_file | sed 's/ /,/g'`

这是一种较短的方式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-02T08:20:27.683

根据您的输入示例，此 awk 行有效。（没有尾随逗号）

```
awk -vRS="" -vOFS=',' '$1=$1' file 
```

测试：

```
kent$  echo "foo
bar
qux
zuu
sdf
sdfasdf"|awk -vRS="" -vOFS=',' '$1=$1' 
foo,bar,qux,zuu,sdf,sdfasdf 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-02T08:15:20.383

Perl 单行：

```
perl -pe'chomp, s/$/,/ unless eof' file 
```

或者，如果你想更神秘：

```
perl '-peeof||chomp&&s/$/,/' file 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-29T18:38:18.680

```
sed -n 's/.*/&,/;H;$x;$s/,\n/,/g;$s/\n\(.*\)/\1/;$s/\(.*\),/\1/;$p' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-02T10:19:12.317

```
perl -pi.bak -e 'unless(eof){s/\n/,/g}' your_file 
```

这将创建一个扩展名为 .bak 的原始文件的备份，然后修改原始文件

# yii - 在 yii 中搜索和过滤

> ID：15758817
> 
> 赞同：0
> 
> 时间：2013-04-02T07:49:03.467
> 
> 标签：yii, yii-components, yii-events

如何在 Yii 中将搜索结果过滤为复选框和下拉列表的组合？我有一些类别作为复选框和预算作为从数据库中列出的下拉列表。选中多个复选框并从下拉列表中选择一个值，我如何过滤掉搜索结果..有没有更好的方法？（我的要求就像这个链接一样[。http://www.ebay.in/sch/i.html](http://www.ebay.in/sch/i.html?_from=R40&_sacat=0&_nkw=pendrives&rt=nc&LH_FS=1) ?_from=R40&_sacat=0&_nkw=pendrives&rt=nc&LH_FS=1 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:06:32.277

我建议使用搜索模型。这可能看起来像这样：

```
class SearchProducts extends CFormModel
{
    public $minPrice;
    public $maxPrice;
    public $categories;

    // Add a public property for each search form element here

    public function rules()
    {
        return array(
            // You should validate your search parameters here
            array('minPrice,maxPrice,categories', 'safe'),
        );
    }

    public function search()
    {
        $criteria = new CDbCriteria;

        if(!empty($this->minPrice))
            $criteria->addCondition('price > '.(int)$this->minPrice);

        if(!empty($this->maxPrice))
            $criteria->addCondition('price < '.(int)$this->maxPrice);

        if(!empty($this->categories))
            $criteria->addInCondition('category_id', $this->categories);

        // Add more conditions for each property here

        return new CActiveDataProvider('Product', array(
            'criteria' => $criteria,
            // more options here, e.g. sorting, pagination, ...
        ));
    }
} 
```

在您的控制器中，您创建一个新的搜索表单实例并像往常一样分配搜索变量：

```
public function actionProducts()
{
    $searchModel = new ProductSearch();

    if(isset($_POST['ProductSearch']))
        $searchModel->attributes = $_POST['ProductSearch'];

    $this->render('products', array(
        'searchModel' => $searchModel,
    ));
} 
```

最后在您的视图中，您现在可以渲染

1.  用于`$searchModel`属性的常规 Yii 表单，它将成为您的搜索过滤器表单
2.  您设置的A`CListView`或 a将成为您的搜索结果。`CGridView``provider``$searchModel->search()`

对于您将使用 checkBoxList 的复选框：

```
<?php $this->formCheckBoxList($model, 'categories[]', Category::opts()) ?> 
```

注意`[]`这表明这应该作为数组发布。为方便起见，我通常还在`opts()`某些模型中实现静态方法，该方法返回`id=>name`可用于 dropDownList 或 checkBoxList 选项的列表。

这只是基本模式。您可以轻松扩展它以创建真正强大的搜索表单和结果列表。请始终牢记，您应该将所有与搜索相关的数据保存在另一个模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T13:26:44.680

试试这个扩展：ddautofilter [https://bitbucket.org/jwerner/yii-ddautofilter/overview](https://bitbucket.org/jwerner/yii-ddautofilter/overview)

# windows-phone-8 - 不要为 wp8 加载 pvr.ccz cocos2d-x

> ID：15758819
> 
> 赞同：0
> 
> 时间：2013-04-02T07:49:07.690
> 
> 标签：windows-phone-8, cocos2d-x

我的版本：cocos2dx-0.13.0-wp8-0.8 我的代码是：

```
CCTexture2D::PVRImagesHavePremultipliedAlpha(true); 
    CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("Towers/TArrow-hd.plist", "Towers/TArrow-hd.pvr.ccz");
    CCSpriteFrame* frame = CCSpriteFrameCache::sharedSpriteFrameCache()- >spriteFrameByName("Arrow-13.png");
CCSprite *sp = CCSprite::spriteWithSpriteFrame(frame); 
sp->setPosition(ccp(100,100)); 
this->addChild(sp, 1); 
```

运行到“CCSprite *sp = CCSprite::spriteWithSpriteFrame(frame)”，也有异常，spriteWithSpriteFrameName("")

例外：

```
D3D11 WARNING: Process is terminating. Using simple reporting. Please call ReportLiveObjects() at runtime for standard reporting. [ STATE_CREATION WARNING #0: UNKNOWN] 
```

线程 0xba4 以代码 3 (0x3) 退出。D3D11 警告：Live Producer 位于 0x00B987E0，Refcount：6。 [ STATE_CREATION WARNING #0: UNKNOWN] 线程 0x668 已退出，代码为 3 (0x3)。线程 0x20 以代码 3 (0x3) 退出。D3D11 警告：活动对象位于 0x00B9A530，引用计数：1。 [状态创建警告 #0：未知] D3D11 警告：活动对象位于 0x02CC17F8，引用计数：0。[状态创建警告 #0：未知]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:21:52.803

把pvr.ccz改成png就可以了

# javascript - 递归更改表头的图像

> ID：15758820
> 
> 赞同：0
> 
> 时间：2013-04-02T07:49:10.310
> 
> 标签：javascript, jquery, html, sorting

我正在使用`jquery.sortElement.js`排序表。带有标题的排序表正在工作。现在我想在标题上添加图像点击`ascending`并`descending`订购。我成功地为升序添加了图像。

这些图像的对齐不起作用。我试过了，`display:table-header-group;`但一切都太糟糕了。

问题-

1.  图像未与表头对齐，我希望图像附加在标题文本之后。
2.  降序的第二张图片也没有显示在标题中。

**我试过的代码 -**

```
var user_table = $( '#users' );
    $('#company_header, #user_header, #email_header, #type_header')
        .wrapInner('<span title="sort this column"/>')
        .each(function(){

            var th = $(this),
                thIndex = th.index(),
                inverse = false;

            th.click(function(){
                  $('th').removeClass("image-append-up");
           $(this).addClass("image-append-up");

                user_table.find('td').filter(function(){

                    return $(this).index() === thIndex;

                }).sortElements(function(a, b){

                    return $.text([a]) > $.text([b]) ?
                        inverse ? -1 : 1
                        : inverse ? 1 : -1;

                }, function(){

                    // parentNode is the element we want to move
                    return this.parentNode; 

                });

                inverse = !inverse;

            });

        }); 
```

**CSS 样式——**

```
.image-down
{
   height:14px;
   width:14px;

    background:url("http://datahub.io/images/chevron-down.png") no-repeat;

}
.image-append-up
{
   height:14px;
   width:14px;

    background:url("http://datahub.io/images/chevron-up.png") no-repeat;
 background-position:10px 10px 10px 10px;
} 
```

我希望图像以正确的对齐方式递归替换`descending`和排序。`ascending`

这是工作小提琴-[小提琴](http://jsfiddle.net/stackmanoz/daqGC/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:02:52.150

[http://jsfiddle.net/daqGC/9/](http://jsfiddle.net/daqGC/9/)

您的属性值无效`background-position`，应该是这样的：

```
.image-append-up
{
   height:14px;
   width:14px;
   background:url("http://datahub.io/images/chevron-up.png") no-repeat;
   background-position:right 2px;
} 
```

# c++ - QML ListView 和分段错误

> ID：15758823
> 
> 赞同：3
> 
> 时间：2013-04-02T07:49:23.577
> 
> 标签：c++, qt, listview, qt4, qml

我正在使用`ListView`带有`SectionScroller`&的 QML `QAbstractListModel`。我注意到`memcpy`当我正常滚动（不使用 ）时（从未显式调用）出现`SectionScroller`分段错误

你知道为什么会这样吗？

我试图重现它，现在分段错误是

> 0x402f9c3a 在?? () 来自 /usr/lib/libQtScript.so.4
> 0x402f9c3a: ldrh r1, [r7, r3]

调试符号在那里，但没有有价值的信息被转储。另一次Segfault是

> 0x0000cab8 在 QBasicAtomicInt::ref (this=0x0) at /usr/include/QtCore/qatomic_armv6.h: 119

这很奇怪，因为 AFAIK N900 的处理器是 armv7 /edit：在 N950 上它使用相同的处理器，而 Qt 中的源代码仅适用于 ARM `qatomic_arm.h`，`qatomic_armv6.h`所以应该没问题。

```
ListView{
    id: irrview
    width: parent.width
    model: irregulars
    anchors.top: caption.bottom
    anchors.bottom: parent.bottom
    spacing: 5
    clip: true
    section.criteria: ViewSection.FirstCharacter
    section.property: "form0"

    delegate: Rectangle{
        id: del
        property  int fontSize: 20
        height: 60
        width: parent.width
        color: "#E0E1E2"
        Row{
            height: parent.height
            width: parent.width - 10
            anchors.horizontalCenter: parent.horizontalCenter
            property real columnWidth: (width - 10) / 3
            property int rad: 10
            spacing: 5
            Rectangle{
                height: parent.height
                width: parent.columnWidth
                radius: parent.rad
                color: "lightsteelblue"
                Text{
                    anchors.centerIn: parent
                    text: form0
                    font.pointSize: del.fontSize
                }
            }
            Rectangle{
                height: parent.height
                width: parent.columnWidth
                radius: parent.rad
                color: "lightsteelblue"
                Text{
                    anchors.centerIn: parent
                    text: form1
                    font.pointSize: del.fontSize
                }
            }
            Rectangle{
                height: parent.height
                width: parent.columnWidth
                radius: parent.rad
                color: "lightsteelblue"
                Text{
                    anchors.centerIn: parent
                    text: form2
                    font.pointSize: del.fontSize
                }
            }
        }
    }
} 
```

型号为：

```
#ifndef IRREGULARLISTWRAPPER_H
#define IRREGULARLISTWRAPPER_H

#include <QObject>
#include <QList>
#include <QAbstractListModel>
#include <QMap>
#include "IrregularVerb.h"
#include "AbstractIrregularList.h"

class IrregularListWrapper : public QAbstractListModel
{
    Q_OBJECT
    Q_PROPERTY(QString langName READ getLangName NOTIFY langChanged)
    Q_PROPERTY(int count READ rowCount NOTIFY langChanged)
    Q_ENUMS(Language)
public:

    Q_INVOKABLE int rowCount(const QModelIndex& = QModelIndex()) const { return db->count(); }
    Q_INVOKABLE QObject* get(int index) const {return db->at(index);}
    QVariant data(const QModelIndex &index, int role) const;

    enum Language
    {
        English = 0,
        German = 1
    };

    enum IrregularVerbRoles
    {
        Form0Role = Qt::UserRole + 1,
        Form1Role,
        Form2Role
    };

    IrregularListWrapper();

//    ~IrregularListWrapper() { delete db; }
//    QList<QObject*> getdb() const { return *db; }

    QString getLangName() const { return langName; }
    Q_INVOKABLE void changeLang(Language l) { beginResetModel(); db = 0; /*QList<IrregularVerb*>();*/ setLang(l); endResetModel(); }

    static QMap<Language, QString> plugins;

signals:
    void langChanged();
protected:
    void setLang(Language);
    //QList<IrregularVerb*> db;
    QString langName;
    AbstractIrregularList * db;

};

#endif // IRREGULARLISTWRAPPER_H

QMap<IrregularListWrapper::Language, QString> IrregularListWrapper::plugins;

IrregularListWrapper::IrregularListWrapper()
{
    QHash<int, QByteArray> roles;
    roles[Form0Role] = "form0";
    roles[Form1Role] = "form1";
    roles[Form2Role] = "form2";

    const QString pluginPath = "/opt/MeeIrregulars/share/lib%1.so";

    plugins[English] = pluginPath.arg("english");
    plugins[German] = pluginPath.arg("german");

    setRoleNames(roles);
    setLang(German);
}

QVariant IrregularListWrapper::data(const QModelIndex &index, int role) const
{
    if (!index.isValid()) return QVariant();
    const IrregularVerb* verb = db->at(index.row());
    switch (role)
    {
    case Form0Role:
        return verb->getForm0();
        break;
    case Form1Role:
        return verb->getForm1();
        break;
    case Form2Role:
        return verb->getForm2();
        break;
    }
    return QVariant();
}

void IrregularListWrapper::setLang(Language l)
{
    QPluginLoader loader(plugins[l]);
    db = qobject_cast<AbstractIrregularList*>(loader.instance());

    if (db == 0) db = new AbstractIrregularList;

    switch (l)
    {
    case English:
        langName = "English";
        break;
    case German:
        langName = "German";
        break;
    }
    emit langChanged();

}

class IrregularVerb : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString form0 READ getForm0 NOTIFY formChanged)
    Q_PROPERTY(QString form1 READ getForm1 NOTIFY formChanged)
    Q_PROPERTY(QString form2 READ getForm2 NOTIFY formChanged)
public:
    QString forms[3];
    QString getForm0() const { return forms[0]; }
    QString getForm1() const { return forms[1]; }
    QString getForm2() const { return forms[2]; }
    IrregularVerb(QString a, QString b, QString c) { forms[0] = a; forms[1] = b; forms[2] = c; }
signals:
    void formChanged();
}; 
```

回溯：

> #0 QBasicAtomicInt::ref (this=0x18)
> #1 QString (this=0xbe88d2a0, other=...)
> #2 IrregularVerb::getForm2 (this=0x9e6de8)
> #3 IrregularVerbWrapper::data(this=0x9e31b8, index=. .., role=35)
> // 模型
> // 一些对 libQtDeclarative 的调用

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-31T07:06:48.317

这是所有权的问题。返回的元素`get`归JS所有，自动销毁。有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/16002315/qabstractlistmodel-crashes)。

# apache - 如何在 Synology 系统上使用“htaccess”进行网站访问控制？

> ID：15758827
> 
> 赞同：0
> 
> 时间：2013-04-02T07:49:34.877
> 
> 标签：apache, .htaccess, web, synology

我正在尝试在 Synology NAS 上为我的个人网站设置访问控制。现在我正在使用 DS212J。我发现下面的文章教如何在 apache 上使用“htaccess”来实现这一点。

[http://www.synology.com/support/faq_show.php?lang=enu&q_id=347](http://www.synology.com/support/faq_show.php?lang=enu&q_id=347)

但是我遇到了2个问题：1）我在ssh到我的DS212J之后没有命令“htpasswd”。2）在我手动创建这些文件后，我在网站上得到了用户名和密码提示。但是，当我输入时，“admin.pw”和“normal.pw”中的密码不起作用。我不确定是不是因为我没有使用命令“htpasswd”。

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T10:08:50.660

htpasswd 可执行文件位于 /usr/syno/apache/bin/htpasswd。由于该目录不在 PATH 上，因此您必须明确使用整个路径才能使用它：

Apache 不会以纯文本形式保存密码，它使用密码的哈希值，这样即使有人可以访问密码文件，他们也无法登录。这就是为什么您必须使用 htpasswd 来创建文件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T16:00:41.013

对于遇到此问题的任何人，我也无法使该 Synology 支持教程正常工作。我正在使用 ssl 在我自己的域上运行 DSM 5.1-5022 Update 4。以下是它的工作原理：

1.  按照以下 wiki 中的步骤操作：[Synology Wiki](http://forum.synology.com/wiki/index.php/Using_the_Apache_web_page_access_controls)
2.  在控制面板中，转到“Web 服务”并禁用 SPDY 以进行安全连接。（从[这篇文章](http://www.timokosig.de/blog/2014/03/fix-ldap-authentication-under-apache-on-synologys-dsm-5-0/)中收集。）

祝你好运。

# python - 用于搜索结果并将结果导出到 .csv 文件的 Python 脚本

> ID：15758828
> 
> 赞同：1
> 
> 时间：2013-04-02T07:49:38.910
> 
> 标签：python, search, csv, grep

我正在尝试在 Python 中执行以下操作，同时还使用了一些 bash 脚本。除非 Python 有更简单的方法。

我有一个日志文件，其中包含如下所示的数据：

```
16:14:59.027003 - WARN - Cancel Latency: 100ms - OrderId: 311yrsbj - On Venue: ABCD
16:14:59.027010 - WARN - Ack Latency: 25ms - OrderId: 311yrsbl - On Venue: EFGH
16:14:59.027201 - WARN - Ack Latency: 22ms - OrderId: 311yrsbn - On Venue: IJKL
16:14:59.027235 - WARN - Cancel Latency: 137ms - OrderId: 311yrsbp - On Venue: MNOP
16:14:59.027256 - WARN - Cancel Latency: 220ms - OrderId: 311yrsbr - On Venue: QRST
16:14:59.027293 - WARN - Ack Latency: 142ms - OrderId: 311yrsbt - On Venue: UVWX
16:14:59.027329 - WARN - Cancel Latency: 134ms - OrderId: 311yrsbv - On Venue: YZ  
16:14:59.027359 - WARN - Ack Latency: 75ms - OrderId: 311yrsbx - On Venue: ABCD
16:14:59.027401 - WARN - Cancel Latency: 66ms - OrderId: 311yrsbz - On Venue: ABCD
16:14:59.027426 - WARN - Cancel Latency: 212ms - OrderId: 311yrsc1 - On Venue: EFGH
16:14:59.027470 - WARN - Cancel Latency: 89ms - OrderId: 311yrsf7 - On Venue: IJKL  
16:14:59.027495 - WARN - Cancel Latency: 97ms - OrderId: 311yrsay - On Venue: IJKL 
```

我需要从每一行中提取最后一个条目，然后使用每个唯一条目并搜索每一行，然后将其导出到 .csv 文件中。

我使用以下 bash 脚本来获取每个唯一条目： cat LogFile_ `date +%Y%m%d`.msg.log | awk '{打印 $14}' | 排序 | 独特的

根据日志文件中的上述数据，bash 脚本将返回以下结果：

```
ABCD
EFGH
IJKL
MNOP
QRST
UVWX
YZ 
```

现在我想在同一个日志文件中搜索（或 grep）每个结果并返回前十个结果。我有另一个 bash 脚本来执行此操作，但是，如何使用 FOR 循环来执行此操作？因此，对于 x，其中 x = 上面的每个条目，

grep x LogFile_ `date +%Y%m%d`.msg.log | awk '{打印 $7}' | 排序-nr | 独特 | 头-10

然后将结果返回到 .csv 文件中。结果将如下所示（每个字段位于单独的列中）：

```
Column-A  Column-B  Column-C  Column-D  
ABCD        2sxrb6ab    Cancel    46ms  
ABCD      2sxrb6af  Cancel    45ms  
ABCD      2sxrb6i2  Cancel    63ms  
ABCD      2sxrb6i3  Cancel    103ms  
EFGH      2sxrb6i4  Cancel    60ms  
EFGH      2sxrb6i7  Cancel    60ms  
IJKL      2sxrb6ie  Ack       74ms  
IJKL      2sxrb6if  Ack       74ms  
IJKL      2sxrb76s  Cancel    46ms  
MNOP      vcxrqrs5  Cancel    7651ms 
```

我是 Python 的初学者，自大学以来（13 年前）就没有做过太多的编码。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:35:06.800

假设您已经打开了文件。您要做的是记录每个条目在其中的次数，也就是说，每个条目将导致一个或多个时间：

```
from collections import defaultdict

entries = defaultdict(list)
for line in your_file:
    # Parse the line and return the 'ABCD' part and time
    column_a, timing = parse(line)
    entries[column_a].append(timing) 
```

完成后，您将拥有这样的字典：

```
{ 'ABCD': ['30ms', '25ms', '12ms'],
  'EFGH': ['12ms'],
  'IJKL': ['2ms', '14ms'] } 
```

您现在要做的是将此字典转换为另一个`len`按其值排序的数据结构（即列表）。例子：

```
In [15]: sorted(((k, v) for k, v in entries.items()), 
                key=lambda i: len(i[1]), reverse=True)
Out[15]: 
[('ABCD', ['30ms', '25ms', '12ms']),
 ('IJKL', ['2ms', '14ms']),
 ('EFGH', ['12ms'])] 
```

当然，这只是说明性的，您可能希望在原始`for`循环中收集更多数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:26:20.690

也许不像你想象的那样简洁......但我认为这可以解决你的问题。我添加了一些 try...catch 以更好地处理真实数据。

```
import re
import os
import csv
import collections

# get all logfiles under current directory of course this pattern can be more
# sophisticated, but it's not our attention here, isn't it?
log_pattern = re.compile(r"LogFile_date[0-9]{8}.msg.log")
logfiles = [f for f in os.listdir('./') if log_pattern.match(f)]

# top n
nhead = 10
# used to parse useful fields
extract_pattern = re.compile(
    r'.*Cancel Latency: ([0-9]+ms) - OrderId: ([0-9a-z]+) - On Venue: ([A-Z]+)')
# container for final results
res = collections.defaultdict(list)

# parse out all interesting fields
for logfile in logfiles:
    with open(logfile, 'r') as logf:
        for line in logf:
            try:  # in case of blank line or line with no such fields.
                latency, orderid, venue = extract_pattern.match(line).groups()
            except AttributeError:
                continue
            res[venue].append((orderid, latency))

# write to csv
with open('res.csv', 'w') as resf:
    resc = csv.writer(resf, delimiter=' ')
    for venue in sorted(res.iterkeys()):  # sort by Venue
        entries = res[venue]
        entries.sort()  # sort by OrderId
        for i in range(0, nhead):
            try:
                resc.writerow([venue, entries[i][0], 'Cancel ' + entries[i][1]])
            except IndexError:  # nhead can not be satisfied
                break 
```

# solr - Solr：我如何在两个不同的领域进行分组？

> ID：15758829
> 
> 赞同：12
> 
> 时间：2013-04-02T07:49:39.830
> 
> 标签：solr

我的架构是这样的：

```
product_id  
category_id 
```

一个类别包含产品。
在 solr 3.6 中，我将结果分组到 category_id 上，效果很好。

我刚刚添加了一个新字段：

```
group_id 
```

一个组包含大小或颜色不同的产品。
示例：蓝色、红色和黄色的鞋子是 3 种不同的产品，并且具有相同的 group_id。

除了字段 category_id 上的结果分组之外，我希望在我的结果中只有一个 group_id 产品，假设 group_id 可以为空（对于不属于组的产品）。

以鞋子为例，这意味着对于请求“鞋子”，3 个产品中只有一个应该在结果中。

我想对 group_id 进行第二个结果分组，但我似乎不可能这样做。

任何想法？

编辑：现在，我在 php 中处理结果以删除结果中已经存在 group_id 的文档。我让这个主题保持开放，以防有人发现如何在 2 个字段上分组

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-30T15:59:09.200

如果您的目标是根据多个“分组依据”字段获取分组计数，则可以使用**数据透视分面**来实现此目的。

```
&facet.pivot=category_id,group_id 
```

`facet_pivot`Solr 将在元素下的搜索结果页面之后为您返回分组结果计数的层次结构。

[http://wiki.apache.org/solr/SimpleFacetParameters?highlight=%28pivot%29#Pivot_.28ie_Decision_Tree.29_Faceting](http://wiki.apache.org/solr/SimpleFacetParameters?highlight=%28pivot%29#Pivot_.28ie_Decision_Tree.29_Faceting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-10T06:59:34.247

不能按查询对两个字段进行分组。如果您需要计数，则可以使用`facet.field`（对于单个字段）或`facet.pivot`（对于多个字段）。它实际上不是组，但您可以获得该组的多个字段的计数。

示例输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <bool name="zkConnected">true</bool>
        <int name="status">0</int>
        <int name="QTime">306</int>
    </lst>
    <result name="response" numFound="667" start="0" maxScore="0.70710677">
        <doc>
            <int name="idField">7393</int>
            <int name="field_one">12</int>
        </doc>
    </result>
    <lst name="facet_counts">
        <lst name="facet_queries"/>
        <lst name="facet_fields"/>
        <lst name="facet_ranges"/>
        <lst name="facet_intervals"/>
        <lst name="facet_heatmaps"/>
        <lst name="facet_pivot">
            <arr name="field_one,field_two">
                <lst>
                    <str name="field">field_one</str>
                    <int name="value">3</int>
                    <int name="count">562</int>
                    <arr name="pivot">
                        <lst>
                            <str name="field">field_two</str>
                            <bool name="value">true</bool>
                            <int name="count">347</int>
                        </lst>
                        <lst>
                            <str name="field">field_two</str>
                            <bool name="value">false</bool>
                            <int name="count">215</int>
                        </lst>
                    </arr>
                </lst>
                <lst>
                    <str name="field">field_one</str>
                    <int name="value">12</int>
                    <int name="count">105</int>
                    <arr name="pivot">
                        <lst>
                            <str name="field">field_two</str>
                            <bool name="value">true</bool>
                            <int name="count">97</int>
                        </lst>
                        <lst>
                            <str name="field">field_two</str>
                            <bool name="value">false</bool>
                            <int name="count">8</int>
                        </lst>
                    </arr>
                </lst>
            </arr>
        </lst>
    </lst>
</response> 
```

示例查询：

```
http://192.168.100.145:7983/solr/<collection>/select?facet.pivot=field_one,field_two&facet=on&fl=idField,field_one&indent=on&q=field_one:(3%2012)&rows=1&wt=xml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T18:16:05.840

如果您可以更改要发布到 solr 的数据，那么我建议您创建一个字符串字段，该字段将连接 category_id 和 group_id。例如，如果 category_id = 5 且 group_id=2，那么您的字符串字段可以是：- '5,2'（使用 ',' 或任何其他字符作为分隔符）。然后，您可以在此字符串字段上进行分组。

# sql - SQL 从 GROUP BY 结果中删除重复项

> ID：15758830
> 
> 赞同：4
> 
> 时间：2013-04-02T07:49:41.637
> 
> 标签：sql

我有一个具有以下结构的表

```
sys_id(identity) | id | group_id | fld_id | val
----------------------------------------------- 
```

我有一个查询

```
SELECT id,group_id,fld_id,val,COUNT(*)
FROM [DB_ALERT].[dbo].[DATATABLE]
GROUP BY id,group_id,fld_id,val
HAVING COUNT(*)>1 
```

结果集是这样的

```
 ID  | group_id | fld_id | val| count(*)
__________________________________________
1000001| 1        | 1      | 23 | 2
1000003| 1        | 1      | 24 | 5
1000008| 1        | 1      | 14 | 4 
```

现在在结果集中，我只想为每条记录获取前 1 个 sys_id，并删除具有相同 ID、Group、Fld 和 val 的其他记录（删除其重复项）。我知道如何使用游标执行此操作，但是有没有办法在单个查询中执行此类操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:53:49.520

请试试：

```
;with c as
(
    select *, row_number() over(partition by ID, Group, Fld, val order by ID, Group, Fld, val) as n
    from YouTable
)
delete from c
where n > 1 
```

# excel - 运行时错误 49，错误的 DLL 调用约定

> ID：15758834
> 
> 赞同：12
> 
> 时间：2013-04-02T07:49:54.693
> 
> 标签：excel, vba

问：每当加载我的插件时，Excel 都会抛出以下错误（运行时错误 49，错误的 DLL 调用约定）

![错误](https://i.stack.imgur.com/9gOO0.png)

尽管绝对没有外部 DLL 引用，但每次都开始弹出对话框，但没有指示错误在哪里。

**或者**

问：每次我保存特定的代码行时，Excel 都会崩溃。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T07:49:54.693

此错误可能是由于编译器错误而发生的。最简单的解决方案是进行小的代码更改并重新编译。我通常做的是，

1 -> 将`Private Enum`类型添加到插件中任何模块的顶部

```
Private Enum Something
    member = 1
End Enum 
```

2 ->**编译**插件

3 - >重新启动excel

4 -> 删除所做的代码更改。不再需要了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-20T00:15:29.470

1.  即使此错误涉及外部 (DLL) 函数调用，它也可能由 VBA 定义的函数或子例程的参数或返回值类型不匹配触发。此外，当它被这些原因触发时，调试器有时会将错误点显示为不同的函数调用，通常在调用堆栈中更高，包括在创建问题情况之前一直工作且稳定的调用。通常，问题是由固定类型的参数参数或返回值与 Variant 之间的不匹配触发的，反之亦然。

    示例：Variant-valued 函数在运行时返回一个 Long 值，该值分配给 Integer 变量。

    **分辨率**：

    *   仔细检查所有参数参数和返回值类型以及赋值语句，特别是对于您最近处理的例程。如果有任何是 Variant 值函数，则显式类型转换为分配的正确类型。
    *   如果由于使用 Application.Run 方法调用不同工作簿中的例程（您无法控制其参数定义），由于 Application.Run 方法传递所有参数 ByVal 导致上述情况不可避免，则，如果包含例程是 Sub，请尝试将其转换为没有指定返回类型的 Function。这似乎强制清理堆栈并抑制在调用堆栈中更高级别抛出的错误条件。
2.  一种对象方法（例如 AutoFit）应用于该方法不可用的错误对象变体（例如 AutoFit 应用于既不是整行也不是整列范围的范围）。与上述情况类似，错误可能会在存在问题语句的例程的返回点引发，而不是在语句本身。

    **解决方案**：从修复语法问题开始。不幸的是，应该有效的修复有时会继续抛出错误，直到 VBE 编辑器被重置。我还没有推断出解决该问题的最小步骤集，但这样的事情通常有效：

    *   显式重新编译项目。
    *   保存文件并关闭它。
    *   重新打开文件并重新运行代码。
3.  如果对外部库函数的调用被确定为罪魁祸首，请参阅 Microsoft 的错误文档：

    ***错误的 DLL 调用约定***

    *传递给动态链接库 (DLL) 的参数必须与例程所期望的完全匹配。调用约定处理参数的数量、类型和顺序。您的程序可能正在调用 DLL 中的例程，而该例程被传递了错误类型或数量的参数。

    要更正此错误，请确保所有参数类型都与您正在调用的例程声明中指定的类型一致。

    确保您传递的参数数量与您正在调用的例程的声明中指示的数量相同。

    如果 DLL 例程需要按值的参数，请确保在例程的声明中为这些参数指定 ByVal。

    返回参数：在谈论过程参数时很容易忽略的一件事是返回参数。确保它的类型正确，或者它没有丢失。Excel/VBA 用户习惯于这样一个事实，即如果您省略函数的返回类型，系统会隐式地将返回类型设置为 Variant，并且它适用于任何返回的数据。外部声明的函数不是这样！返回类型必须在 DECLARE 语句中声明。*

4.  损坏的库引用：检查模块代码的库引用是否有效。在 VBA IDE 中，选择 **Tools=>References**以查看引用库的列表，并确保所有选中的项目都没有标记为“ **Missing** ”。如果是这样，请解决这些问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-19T13:42:07.273

或者，有史以来最好的选择：

**- 重写例程的名称。**

**- 然后重新编译！**

你现在可以走了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-16T11:22:08.973

有关信息，我还在运行良好的 Excel VBA 代码中遇到了*“运行时错误 49，错误的 DLL 调用约定”*。

该错误指向一个内部函数调用，对我来说，解决方法是将参数从 ByVal 更改为 ByRef。存在对另一个函数的调用，其中该值已通过 ByRef 传递，因此这可能是一个因素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-22T16:04:29.090

另一种代替“更改/添加某些内容并重新编译”的方法是/反编译您的项目。特别是。在可以解决很多问题的大型访问/excel项目中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-03T23:13:48.387

只是为了添加另一个可能的原因，我使用**Application.OnTime**方法来调用带有参数的公共子。该参数意味着很长（当前行），但我猜它实际上是作为字符串值传递的。

这是 OnTime 调用的示例：

```
Application.OnTime Now + TimeValue("00:00:01"), "'UpdateEditedPref " & curRow & "'" 
```

我尝试对代码执行任意更新并重新编译，但这并没有解决问题。修复它的原因是将被调用子中的参数类型从 long 更改为 string：

```
Public Sub UpdateEditedPref(ByVal inRowStr As String) 
```

然后，您只需要将字符串转换为 sub 中的值。谢天谢地，没有更多的错误。

***更新：*****使用Application.OnTime**传递参数似乎导致了另一个错误，“无法运行宏”。当工作表被锁定时，我收到了这个错误。我仍在使用**Application.OnTime**，但不是传递参数，而是将值保存在全局变量中并在被调用的子中使用该值。这现在似乎工作正常。

OnTime 调用现在看起来像这样：

```
' Set global variable
gCurRow = curRow

Application.OnTime Now + TimeValue("00:00:01"), "UpdateEditedPref" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-25T19:05:38.383

我有一个类似的问题，在我的开发 PC 上它工作得很好。有趣的是，我对同一个例程进行了两次单独的调用，一个有效，另一个无效。在生产 PC 上，不断收到错误消息。尝试重命名例程，更改参数，参数类型无济于事。

对我有用的是将失败的调用例程移动到与被调用子例程相同的模块中。

以前工作的例程已经在同一个模块中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-01T23:53:45.873

在我的情况下，这是由于在单个 if 条件下过度使用 continue 字符 _ 造成的

我已经重新编译，检查了所有返回码，移动了模块，重新启动了 excel，重新启动了我的电脑，将代码复制到了一个全新的 Excel 电子表格中，我读了这篇文章，关于返回码的一点让我想到了多少次返回可以在 if 语句中

我有这个

```
 If CompressIntoOneLineON(rg1, rgstart, rgend) or _
       CompressIntoOneLineOS(rg1, rgstart, rgend) or _
       CompressIntoOneLineOGN(rg1, rgstart, rgend) or _
       CompressIntoOneLineOGS(rg1, rgstart, rgend) or _
       CompressIntoOneLineGO(rg1, rgstart, rgend) Then
       <code>
    End If 
```

退出包含此代码的子例程时出现错误所以我更改为

```
matched = True
If CompressIntoOneLineON(rg1, rgstart, rgend) Then
ElseIf CompressIntoOneLineOS(rg1, rgstart, rgend) Then
ElseIf CompressIntoOneLineOGN(rg1, rgstart, rgend) Then
ElseIf CompressIntoOneLineOGS(rg1, rgstart, rgend) Then
ElseIf CompressIntoOneLineGO(rg1, rgstart, rgend) Then
Else
  matched = False
End If
if matched then
  <code> 
```

错误消失了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-20T07:15:45.827

我的实验表明：当我替换声明时，错误：“运行时错误 49，错误的 DLL 调用约定”消失了：

```
Dim coll as new Collection 
```

在

```
Dim coll as Collection
Set coll = New Collection 
```

对象必须在创建失败时显式变为 Nothing（如果它本身不是），以便可以追踪其存在。

谢谢， RubberDuck VBA

# xml - 如何在谷歌地图中隐藏带有标记的 XML 文件？

> ID：15758836
> 
> 赞同：1
> 
> 时间：2013-04-02T07:49:56.363
> 
> 标签：xml, maps

如何隐藏 php 文件的名称，该文件生成带有标记的 XML 文件以在谷歌地图中显示？

我有以下JS代码：

```
var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("google_map.php", function(data) {

    var seskupene = [];

    var xml = data.responseXML;

    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var street = markers[i].getAttribute("street");
      var psccity = markers[i].getAttribute("psccity");
      var phone = markers[i].getAttribute("phone");
      var mail = markers[i].getAttribute("mail");
      var href = markers[i].getAttribute("href");
      var image = markers[i].getAttribute("image");
      var coord = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));

      var html = '<div class="g_div">'+
                    '<div class="g_title">' + name + '</div>'+
                    '<div class="g_img"><img src="' + image + '"></div>'+
                    '<div class="g_data">'+
                        '<div>' + street + '</div><div>' + psccity + '</div>'+
                        '<div>&nbsp;</div><div><a href="">' + mail + '</a></div><div>' + phone + '</div>'+
                        '<div>&nbsp;</div><div><a href="">Detail autoškoly ...</a></div>'+
                    '</div>'+
                 '</div>'; 
```

文件 google_map.php 返回带有标记的 XML 文件。我不希望有人进入您的浏览器网址 [http://.../google_map.php] 并下载带有数据的 XML 文件。

我如何保护？感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:07:35.387

您无法真正隐藏它，但您可以通过使用额外信息（如会话 cookie）使只有原始浏览器可以轻松下载它，因此仅知道确切的 URL 是不够的。您可以向 URL 添加更多参数，例如必须匹配的一些其他数据的校验和，并且可以在每个请求中更改；或者只是一个必须与您在服务器上的会话中存储的值一致的随机数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T18:50:19.737

在我看来，隐藏这一点是不可能的，但你至少可以让刮刀的生活变得更加艰难。一种可能性是巴特告诉你的。另一种可能性是检查推荐人。但是：这也不是防弹的！尝试这样的事情：

```
$referrer = $_SERVER['HTTP_REFERER'];
if (!preg_match("/yourdomain.com/",$referrer)) {
    header('Location: http://www.yourdomain.com'); 
    //send the user to your startpage
}
else{
//your code to generate the XML
} 
```

# c# - 如何在单声道（GTK）中更改窗口背景颜色？

> ID：15758838
> 
> 赞同：1
> 
> 时间：2013-04-02T07:50:02.067
> 
> 标签：c#, mono, gtk, gtk#

我在 gtk 中有一个窗口，其中包含一个 Build() 函数，如下所示：

```
protected virtual void Build()
{
    global::Stetic.Gui.Initialize(this);
    // Widget Client.Forms.Notification
    this.Name = "Client.Forms.Notification";
    this.Title = "Notification";
    this.TypeHint = Gdk.WindowTypeHint.Normal;
    //this.TypeHint = ((global::Gdk.WindowTypeHint)(4));
    this.WindowPosition = ((global::Gtk.WindowPosition)(4));
    // Container child Client.Forms.Notification.Gtk.Container+ContainerChild
    this.vbox1 = new global::Gtk.VBox();
    this.vbox1.Name = "vbox1";
    this.vbox1.Spacing = 6;
    // Container child vbox1.Gtk.Box+BoxChild
    this.label1 = new global::Gtk.Label();
    this.label1.HeightRequest = 20;
    this.label1.Name = "label1";
    this.label1.LabelProp = "Notification";
    this.vbox1.Add(this.label1);
    global::Gtk.Box.BoxChild w1 = ((global::Gtk.Box.BoxChild)(this.vbox1[this.label1]));
    w1.Position = 0;
    w1.Expand = false;
    w1.Fill = false;
    // Container child vbox1.Gtk.Box+BoxChild
    this.hbox1 = new global::Gtk.HBox();
    this.hbox1.Name = "hbox1";
    this.hbox1.Spacing = 6;
    // Container child hbox1.Gtk.Box+BoxChild
    this.image1 = new global::Gtk.Image();
    this.image1.Name = "image1";
    this.image1.Pixbuf = global::Gdk.Pixbuf.LoadFromResource("Client.Resources.icon.png");
    this.hbox1.Add(this.image1);
    global::Gtk.Box.BoxChild w2 = ((global::Gtk.Box.BoxChild)(this.hbox1[this.image1]));
    w2.Position = 0;
    w2.Expand = false;
    w2.Fill = false;
    // Container child hbox1.Gtk.Box+BoxChild
    this.label2 = new global::Gtk.Label();
    this.label2.Name = "label2";
    this.label2.WidthRequest = 260;
    this.label2.Wrap = true;
    this.label2.LabelProp = "Description";
    this.hbox1.Add(this.label2);
    global::Gtk.Box.BoxChild w3 = ((global::Gtk.Box.BoxChild)(this.hbox1[this.label2]));
    w3.Position = 1;
    w3.Expand = false;
    w3.Fill = false;
    this.vbox1.Add(this.hbox1);
    global::Gtk.Box.BoxChild w4 = ((global::Gtk.Box.BoxChild)(this.vbox1[this.hbox1]));
    w4.Position = 1;
    w4.Expand = false;
    w4.Fill = false;
    this.label1.ModifyBase(Gtk.StateType.Normal, Core.fromColor(System.Drawing.Color.Orange));
    this.ModifyBase(Gtk.StateType.Normal, Core.fromColor(System.Drawing.Color.Orange));
    this.vbox1.ModifyBase(Gtk.StateType.Normal, Core.fromColor(System.Drawing.Color.Orange));
    root = new Gtk.EventBox();
    root.Add(this.vbox1);
    this.Decorated = false;
    this.Add(root);
    if ((this.Child != null))
    {
        this.Child.ShowAll();
    }
    this.DefaultWidth = 460;
    this.DefaultHeight = 220;
} 
```

（整个窗口的源代码：[https](https://github.com/pidgeonproject/pidgeon/blob/master/Forms/Notification.cs) ://github.com/pidgeonproject/pidgeon/blob/master/Forms/Notification.cs ）

如您所见，它正在调用

```
this.ModifyBase(Gtk.StateType.Normal, Core.fromColor(System.Drawing.Color.Orange)); 
```

这应该将背景更改为橙色，但事实并非如此。

我试图在窗口元素上插入更多类似的功能，但它也不起作用，有谁知道如何更改窗口的背景颜色？

我想要做的是创建一个没有特定颜色的装饰（所以只是一个矩形）和一些文本的小窗口。该窗口应该是透明的（现在可以使用），并且应该有一张图片和 2 个带有文本的标签，并且在单击时消失 - 所有这些现在都可以正常工作，只是我无法将背景从灰色更改为更好的颜色。我会很高兴得到可以让我使用其他方式做到这一点的答案（我可以考虑创建一个仅带有绘图区域的小表单并用颜色绘制它，然后也绘制文本，但这对我来说听起来很复杂对于我想做的如此简单的事情）。

**注意：** mono 使用 GTK 2，.Net 的 GTK# 版本使用 2.12.20

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:17:03.293

尝试使用事件框。似乎工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:40:46.030

对于 GTK+2，您需要像这样创建一个 gtk 资源：

```
char *my_custom_style = "style \"my-style-name\" { bg[NORMAL] = \"#339933\" }\nclass \"GtkWindow\" style \"my-style-name\""; 
```

然后在启动程序时加载资源，初始化后：

```
gtk_rc_parse_string (my_custom_style); 
```

现在任何人`GtkWindow`都将使用您的自定义样式作为背景。

[Gtk 资源文件](https://developer.gnome.org/gtk2/stable/gtk2-Resource-Files.html#gtk-rc-parse-string)的 C 文档

编辑：

如果您只想更改一个特定的窗口，那么您可以将自定义样式字符串更改为类似

```
char *my_custom_style="style \"my-style-name\" { bg[NORMAL] = \"#339933\" }\nwidget \"my-custom-window\" style= \"my-style-name\"'; 
```

然后设置要更改背景的窗口的名称

```
gtk_widget_set_name (GTK_WIDGET (my_window), "my-custom-window"); 
```

编辑2：

这是 Gtk# Rc 解析函数的文档：

[http://buttle.shangorilla.com/1.1/handlers/monodoc.ashx?link=M%3aGtk.Rc.Parse(System.String)](http://buttle.shangorilla.com/1.1/handlers/monodoc.ashx?link=M%3aGtk.Rc.Parse%28System.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:23:39.150

文档（针对 C API）说它已`gtk_widget_modify_color()`被弃用，应该改用新编写的代码[`gtk_widget_override_background_color()`](https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-override-background-color)，所以试试吧。

众所周知，在 GTK+ 中覆盖主题非常困难，但 3.0 API 确实听起来好像它支持您想要做的事情。

不幸的是，目前无法自己测试。

# android - 我如何比较可见性 Android Tic-tac-toe

> ID：15758840
> 
> 赞同：0
> 
> 时间：2013-04-02T07:50:04.737
> 
> 标签：android, visibility, tic-tac-toe

嘿，我需要帮助我正在尝试玩井字游戏，但我遇到了“如果”句子的问题。

这是当 3 个圆圈可见时，现在我想让线条可见，但代码不起作用。

```
if (
    cir9.getVisibility() == View.VISIBLE &&
    cir8.getVisibility() == View.VISIBLE &&
    cir7.getVisibility() == View.VISIBLE
) {
    linea_horizontal.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:55:50.000

使用[`isShown()`](http://developer.android.com/reference/android/view/View.html#isShown%28%29)方法呢？

```
if (cir7.isShown() && cir8.isShown() && cir9.isShown()) {
   // make your work
}
else {
  // are not visible
} 
```

# haskell - Haskell：大元组列表的派生显示

> ID：15758841
> 
> 赞同：0
> 
> 时间：2013-04-02T07:50:17.730
> 
> 标签：haskell

假设我有以下列表

```
[((Int, Int), [[Char]], [[Char]], Bool, Bool, Bool)]
[(Int, Int, [Char], [Char], [Char], [Char], [Char], [Char], [Char], [Char])] 
```

我知道为了能够打印它们，我需要将它们定义为新的数据类型，然后创建一个 Show 实例，但有什么办法可以避免它？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:00:18.693

让我们替换所有的`[Char]`by`String`以摆脱一些括号重载：

```
[((Int, Int), [String], [String], Bool, Bool, Bool)]

[(Int, Int, String, String, String, String, String, String, String, String)] 
```

这些已经可以打印：

```
Prelude> let x = replicate 2 ((1,2), ["a", "b"], ["c", "d"], True, False, True) :: [((Int,Int), [String], [String], Bool, Bool, Bool)]

Prelude> :type x   -- displays the type of x
x :: [((Int, Int), [String], [String], Bool, Bool, Bool)]

Prelude> print x
[((1,2),["a","b"],["c","d"],True,False,True),((1,2),["a","b"],["c","d"],True,False,True)] 
```

和

```
Prelude> let x = replicate 2 (1,2,"a","b","c","d","e","f","g","h") :: [(Int,Int,String,String,String,String,String,String,String,String)]

Prelude> :type x
x :: [(Int,
       Int,
       String,
       String,
       String,
       String,
       String,
       String,
       String,
       String)]

Prelude> print x
[(1,2,"a","b","c","d","e","f","g","h"),(1,2,"a","b","c","d","e","f","g","h")] 
```

# excel - 我需要多少金额告诉客户才能拿到我想要的金额

> ID：15758845
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:50:25.460
> 
> 标签：excel, math

我无可救药地坚持这一点。

我需要计算我需要从客户那里得到的金额，这样在扣除运输费用、最终销售价值的佣金和最终销售价值的银行费用后，我就有了我想要得到的金额。

例子：

我想要的数量= 100

佣金@最终售价的 7%

银行手续费@最终售价的 5%

运输费 = 10 所以，最终售价 = ? （我如何得到这个数字）

最终销售价值是我将告诉客户的金额，因此在扣除最终销售价值的 7% 和最终销售价值的 5% 和运输费后，我将收到 100 美元。

佣金和银行费用是根据最终销售价值计算的。例如：如果最终售价为 100，佣金@7% 将为 7，银行手续费为 5。

[我正在尝试在 Excel 中执行此操作并陷入困境。](http://www.2shared.com/file/4DqiX6YR/calculator.html)你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:05:47.753

公式是

```
=(Nett + Freight) / (1 - Comm% - Bank%) 
```

对于你的 100 美元的例子

```
=(100 + 10) / (1 - 0.07 - 0.05)
=125 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:57:38.677

是的，这是数学：

净额 = 毛额 - (12 * 毛额 / 100) - 10

转移 10 并重构！

净值 + 10 = 毛值 * 88 / 100

两边乘以 100 ：

100 *（净值 + 10）= 毛值 * 88

两边除以 88 ：

(100 * (净 + 10)) / 88 = 毛

# php - 会话登录 - 如果用户不再存在于数据库中，则销毁会话

> ID：15758848
> 
> 赞同：0
> 
> 时间：2013-04-02T07:50:46.087
> 
> 标签：php, mysql, session

**问题说明**

我已经创建了我的第一个会话的登录名。基本上我有 3 个输入，2 个字段，一个提交。

第一个字段是用户名，第二个字段是密码。

然后我使用 PDO 从用户表 WHERE = 用户名中选择用户名、密码来验证详细信息。

然后我计算行数，看看是否有指定用户名和密码的行。

太好了，我现在登录了..

但是有**问题**.. 当我从数据库中删除用户时，我可以继续使用同一个用户在我的系统中浏览，直到会话结束或我注销。

**问题**

如何立即检查用户是否仍在数据库中？每次用户进入新页面或刷新时，最好的方法是什么？

谢谢！

创建会话的代码（登录验证）：

```
 # Selecting the entered username + password from our admins database & making sure field
        # with that specify username and password exists.
        $hashed = hash('sha512', md5($password));           
        $check = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = :username AND password = :password LIMIT 1");
        $check->bindValue(':username', $username);
        $check->bindValue(':password', $hashed);
        $check->execute();  

        # We check if that row exists, if it exists - We will create a new session with that entered
        # username, that means administrator has sucessfuly logged in.

        if ($check->rowCount()) {
            $_SESSION['user'] = $username;
            header ('Location: index.php');
        } else {

        # If login failed, because the details are wrong, we will store the error message into
        # our errors array and then use a loop to fetch the error.
            if (!empty($username) && !empty($password)) {
                $errors[] = 'Wrong username or password.';
            }
        } 
```

然后我用它来查看用户是否登录：

```
if (isset($_SESSION['user'])) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:54:41.663

您必须编写将在每个页面上运行的检查算法。该算法将在数据库中执行查询以检查用户是否仍然存在（请记住，您不能信任用户输入，会话就是这样）。如果查询结果是否定的，那么您将调用`session_destroy()`.

根据您的应用程序设计和您所遵循的模式，您可以`validate.php`在所有页面中包含一个文件，也可以在控制器的构造函数中调用一个特定的`AuthHelper`类来为您执行此操作。

我会再强调一点：您不能信任会话，因为它们是用户输入。将自动检查用户是否存在的解决方案是以下算法：

1.  当用户登录时，您将登录密钥（随机字母数字值）存储在数据库中的会话和用户行中。
2.  在您网站的每个*受保护*页面上，您检查数据库中是否存在带有会话登录密钥的行。如果不是，则用户不再存在或会话登录密钥已损坏。在这两种情况下，您都想销毁会话并将用户注销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:54:13.787

您实际上将用户信息传递并存储到**会话**，以便您可以使用`$_SESSION`存储的变量。然后使用一条`SELECT`语句执行到您的数据库以检查会话中存储的用户是否仍在您的数据库中，然后如果不执行条件以销毁会话并将其注销。

例子。

```
$sql='SELECT * FROM USERS WHERE ID='.$_SESSION['user_id'].'';
$result = mysql_query($sql);

if(count($result)>0){
    echo 'User at database';

}
else{
   echo 'User not at database';
   session_destroy();
   // then redirect to homepage or login page.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:55:02.280

如果这是一个问题，请不要使用会话。听起来您每次执行操作以验证用户是否仍然存在时都需要检查数据库，因此您不妨每次都提取他们的数据。这可能会引发关于负载的争论，但您可以缓存需要缓存的内容并重新提取关键部分并验证其他部分。

如果您必须进行扩展，这也将对您有所帮助，因此您不必担心会话持久性。

# c# - 通过 ClickOnce 更新折叠的 Excel 插件部署

> ID：15758854
> 
> 赞同：0
> 
> 时间：2013-04-02T07:51:29.463
> 
> 标签：c#, excel, excel-2007, clickonce, add-in

我开发了 Excel 插件。我想通过 ClickOnce 部署插件。添加发布到共享文件夹。Addin 开发成功并出现在 Excel 中。但是当我在 Adin 中更改某些内容并在您启动 Excel 时发布更新版本时，会出现以下错误：

> 无法安装自定义，因为当前安装了另一个版本并且无法从该位置升级。要安装此版本的自定义，首先使用添加或删除程序卸载此程序：PricelistExcelAddIn。然后从以下位置安装新的自定义：file:///C:/Users/sribin/Documents/Visual Studio 2008/Projects/PricelistExcelAddIn/PricelistExcelAddIn/bin/Debug/PricelistExcelAddIn.vsto

细节：

姓名：

> 来自：file:///C:/Users/sribin/Documents/Visual Studio 2008/Projects/PricelistExcelAddIn/PricelistExcelAddIn/bin/Debug/PricelistExcelAddIn.vsto

****** *** ******异常文本******* *** ***********

 *****> Microsoft.VisualStudio.Tools.Applications.Deployment.AddInAlreadyInstalledException：无法安装自定义项，因为当前安装了另一个版本并且无法从该位置升级。要安装此版本的自定义，首先使用添加或删除程序卸载此程序：PricelistExcelAddIn。然后从以下位置安装新的自定义：file:///C:/Users/sribin/Documents/Visual Studio 2008/Projects/PricelistExcelAddIn/PricelistExcelAddIn/bin/Debug/PricelistExcelAddIn.vsto в Microsoft.VisualStudio.Tools.Applications。 Deployment.ClickOnceAddInDeploymentManager.VerifySolutionCodebaseIsUnchanged(Uri uri, String subscriptionId, Boolean previousInstalled) в Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn()

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:34:27.753

ClickOnce 部署的安装 URL 是身份的主要部分。您不能从两个不同的位置安装 C/O 应用程序，也不能从与部署中的安装 URL 不匹配的位置安装它。话虽如此，您的 VSTO 插件的安装 URL 是什么？当然不是“c:/users/sribin/documents/visual studio 2008/projects...”

在某处创建文件共享，即使它在您自己的机器上进行测试，并将其用作您的安装 URL，并将文件放在那里。*****

# php - Paypal：使用沙盒帐户进行测试要求重定向后登录

> ID：15758855
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:51:33.133
> 
> 标签：php, paypal-sandbox

使用贝宝沙箱时。重定向到测试沙箱并显示登录以使用沙箱功能：[https ://www.sandbox.paypal.com/in/cgi-bin/webscr](https://www.sandbox.paypal.com/in/cgi-bin/webscr)

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:58:05.993

正如错误消息所说，要使用沙盒的功能，您必须已经登录到您的沙盒帐户（不是用户的贝宝沙盒帐户，而是实际的沙盒帐户）

**编辑**：可能重复[请登录以使用 PayPal 沙盒功能](https://stackoverflow.com/questions/15376551/please-login-to-use-the-paypal-sandbox-feature)。

正如那篇文章所提到的，最近贝宝沙箱的变化影响了许多用户使用它的能力。

就我而言，除非我清除了所有缓存和 cookie，否则它不会像以前那样与 chrome 一起使用。它使用firefox（我第一次在paypal中使用）工作

# android - Android - 如何从网络服务器下载文件

> ID：15758856
> 
> 赞同：76
> 
> 时间：2013-04-02T07:51:33.617
> 
> 标签：android, webserver, kml

在我的应用程序中，我正在`kml`从网络服务器下载文件。我已经在我的 android 清单文件中设置了外部存储和互联网的权限。我是 Android 新手，非常感谢您的帮助。

**MainActivity.java**

```
package com.example.demo;

import java.io.DataInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        DownloadFiles();
    }

    public void DownloadFiles(){
        try {
            URL u = new URL("http://www.qwikisoft.com/demo/ashade/20001.kml");
            InputStream is = u.openStream();
            DataInputStream dis = new DataInputStream(is);

            byte[] buffer = new byte[1024];
            int length;

            FileOutputStream fos = new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/" + "data/test.kml"));
            while ((length = dis.read(buffer)) > 0) {
                fos.write(buffer, 0, length);
            }

        } catch (MalformedURLException mue) {
            Log.e("SYNC getUpdate", "malformed url error", mue);
        } catch (IOException ioe) {
            Log.e("SYNC getUpdate", "io error", ioe);
        } catch (SecurityException se) {
            Log.e("SYNC getUpdate", "security error", se);
        }
    }
} 
```

**Android 清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.example.demo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**日志错误：**

> 致命异常：主 java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.demo/com.example.demo.MainActivity}：android.os.NetworkOnMainThreadException 在 android.app.ActivityThread.performLaunchActivity（ActivityThread.java:1956 ) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 在android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4424) 在 java.lang.reflect .Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:511) at com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method) 原因：android.os。 NetworkOnMainThreadException 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099) 在 java.net.InetAddress.lookupHostByName(InetAddress.java:391) 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:242) 在 java .net.InetAddress.getAllByName(InetAddress.java:220) 在 libcore.net.http.HttpConnection.(HttpConnection.java:71) 在 libcore.net.http.HttpConnection.(HttpConnection.java:50) 在 libcore.net。 http.HttpConnection$Address.connect(HttpConnection.java:351) 在 libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86) 在 libcore.net.http.HttpConnection。connect(HttpConnection.java:128) 在 libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308) 在 libcore.net.http.HttpEngine.connect(HttpEngine.java:303) 在 libcore.net.http.HttpEngine .sendSocketRequest(HttpEngine.java:282) 在 libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232) 在 libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273) 在 libcore.net.http。 HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168) at java.net.URL.openStream(URL.java:462) at com.example.demo.MainActivity.DownloadFiles(MainActivity.java:30) at com.example.demo.MainActivity .onCreate(MainActivity.java:24) 在 android.app.Activity.performCreate(Activity.java:4465) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

**编辑**

```
package com.example.demo;

import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

public class MainActivity extends Activity {

    private ProgressDialog pDialog;
    public static final int progress_bar_type = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new DownloadFileFromURL().execute("http://www.qwikisoft.com/demo/ashade/20001.kml");
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
            case progress_bar_type: // we set this to 0
                pDialog = new ProgressDialog(this);
                pDialog.setMessage("Downloading file. Please wait...");
                pDialog.setIndeterminate(false);
                pDialog.setMax(100);
                pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                pDialog.setCancelable(true);
                pDialog.show();
                return pDialog;
            default:
                return null;
        }
    }

    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Bar Dialog
         **/
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(progress_bar_type);
        }

        /**
         * Downloading file in background thread
         **/
        @Override
        protected String doInBackground(String... f_url) {
            int count;
            try {
                URL url = new URL(f_url[0]);
                URLConnection conection = url.openConnection();
                conection.connect();

                // this will be useful so that you can show a tipical 0-100%
                // progress bar
                int lenghtOfFile = conection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);

                // Output stream
                OutputStream output = new FileOutputStream(Environment
                        .getExternalStorageDirectory().toString()
                        + "/data/downloadedfile.kml");

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress("" + (int) ((total * 100) / lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();
            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         **/
        protected void onProgressUpdate(String... progress) {
            // setting progress percentage
            pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         **/
        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            dismissDialog(progress_bar_type);
        }
    }
} 
```

当我在模拟器中运行此代码时，代码仍然不起作用 - 文件没有被下载。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-02T07:57:29.540

使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

当你想下载文件时调用：`new DownloadFileFromURL().execute(file_url);`

```
public class MainActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;
    public static final int progress_bar_type = 0;

    // File url to download
    private static String file_url = "http://www.qwikisoft.com/demo/ashade/20001.kml";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        new DownloadFileFromURL().execute(file_url);

    }

    /**
     * Showing Dialog
     * */

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case progress_bar_type: // we set this to 0
            pDialog = new ProgressDialog(this);
            pDialog.setMessage("Downloading file. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setMax(100);
            pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pDialog.setCancelable(true);
            pDialog.show();
            return pDialog;
        default:
            return null;
        }
    }

    /**
     * Background Async Task to download file
     * */
    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(progress_bar_type);
        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(String... f_url) {
            int count;
            try {
                URL url = new URL(f_url[0]);
                URLConnection connection = url.openConnection();
                connection.connect();

                // this will be useful so that you can show a tipical 0-100%
                // progress bar
                int lenghtOfFile = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);

                // Output stream
                OutputStream output = new FileOutputStream(Environment
                        .getExternalStorageDirectory().toString()
                        + "/2011.kml");

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress("" + (int) ((total * 100) / lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... progress) {
            // setting progress percentage
            pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            dismissDialog(progress_bar_type);

        }

    }
} 
```

如果在 4.0 中不起作用，则添加：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2018-06-17T20:02:42.760

简单的 kotlin 版本

```
fun download(link: String, path: String) {
    URL(link).openStream().use { input ->
        FileOutputStream(File(path)).use { output ->
            input.copyTo(output)
        }
    }
} 
```

> 有没有办法通过这种方法获得下载进度或下载大小？

这与 中定义的实现相同`InputStream.copyTo`，但有进步

```
/*inline*/ fun download(link: String, path: String, progress: ((Long, Long) -> Unit)? = null): Long {
    val url = URL(link)
    val connection = url.openConnection()
    connection.connect()
    val length = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) connection.contentLengthLong else
        connection.contentLength.toLong()
    url.openStream().use { input ->
        FileOutputStream(File(path)).use { output ->
            val buffer = ByteArray(DEFAULT_BUFFER_SIZE)
            var bytesRead = input.read(buffer)
            var bytesCopied = 0L
            while (bytesRead >= 0) {
                output.write(buffer, 0, bytesRead)
                bytesCopied += bytesRead
                progress?.invoke(bytesCopied, length)
                bytesRead = input.read(buffer)
            }
            return bytesCopied
        }
    }
} 
```

使用示例：

```
val handler = object : Handler(Looper.getMainLooper()) {

    override fun handleMessage(msg: Message) {
        // length may be negative because it is based on http header
        val (progress, length) = msg.obj as Pair<Long, Long>
    }
}

// call this outside of main thread
val totalSize = download("http://example.site/path/to/file", "path/to/file") { progress, length ->
    // handling the result on main thread
    handler.sendMessage(handler.obtainMessage(0, progress to length))
} 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2018-07-22T14:03:32.997

我会推荐使用 Android [DownloadManager](https://developer.android.com/reference/android/app/DownloadManager)

```
DownloadManager downloadmanager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
Uri uri = Uri.parse("http://www.example.com/myfile.mp3");

DownloadManager.Request request = new DownloadManager.Request(uri);
request.setTitle("My File");
request.setDescription("Downloading");
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
request.setVisibleInDownloadsUi(false);
request.setDestinationUri(Uri.parse("file://" + folderName + "/myfile.mp3"));

downloadmanager.enqueue(request); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-11-21T21:42:37.097

使用下载管理器下载文件

```
 DownloadManager downloadmanager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    Uri uri = Uri.parse("https://www.globalgreyebooks.com/content/books/ebooks/game-of-life.pdf");

    DownloadManager.Request request = new DownloadManager.Request(uri);
    request.setTitle("My File");
    request.setDescription("Downloading");//request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,"game-of-life");
    downloadmanager.enqueue(request); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-04-02T07:54:54.223

在主线程上执行网络操作是不好的做法，这就是您看到`NetworkOnMainThreadException`. 它被政策所阻止。如果您确实必须这样做以进行测试，请将以下内容放入您的 OnCreate：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

请记住，这样做是非常糟糕的做法，理想情况下应该将您的网络代码移动到一个`AsyncTask`或一个`Thread`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-02T06:55:15.960

Mr.Iam4fun 您的代码答案在这里..您将使用线程...

```
 findViewById(R.id.download).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            new Thread(new Runnable() {
                public void run() {
                    DownloadFiles();
                }
            }).start(); 
```

进而..

```
 public void DownloadFiles(){

        try {
            URL u = new URL("http://www.qwikisoft.com/demo/ashade/20001.kml");
            InputStream is = u.openStream();

            DataInputStream dis = new DataInputStream(is);

            byte[] buffer = new byte[1024];
            int length;

            FileOutputStream fos = new FileOutputStream(new File(Environment.getExternalStorageDirectory() + "/" + "data/test.kml"));
            while ((length = dis.read(buffer))>0) {
              fos.write(buffer, 0, length);
            }

          } catch (MalformedURLException mue) {
            Log.e("SYNC getUpdate", "malformed url error", mue);
          } catch (IOException ioe) {
            Log.e("SYNC getUpdate", "io error", ioe);
          } catch (SecurityException se) {
            Log.e("SYNC getUpdate", "security error", se);
          }
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T07:54:48.257

使用`AsyncTask`和

将您的下载文件代码放入`doinbackground`其中..

android不再允许在主线程上执行繁重的任务以避免ANR（应用程序无响应）错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-02T08:00:59.580

您应该使用 AsyncTask （或其他方式在后台执行网络操作）。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //create and execute the download task
    MyAsyncTask async = new MyAsyncTask();
    async.execute();

}

private class MyAsyncTask extends AsyncTask<Void, Void, Void>{

    //execute on background (out of the UI thread)
    protected Long doInBackground(URL... urls) {
        DownloadFiles();
    }

} 
```

[Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)上有关 AsyncTask 的更多信息

希望能帮助到你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-04T21:03:49.227

在线程或 AsyncTask 中运行这些代码。为了避免重复调用相同的_url（一次getContentLength()，一次openStream()），使用Apache的IOUtils.toByteArray。

```
void downloadFile(String _url, String _name) {
    try {
        URL u = new URL(_url);
        DataInputStream stream = new DataInputStream(u.openStream());
        byte[] buffer = IOUtils.toByteArray(stream);
        FileOutputStream fos = mContext.openFileOutput(_name, Context.MODE_PRIVATE);
        fos.write(buffer);
        fos.flush();
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        return;
    } catch (IOException e) {
        e.printStackTrace();
        return;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-12T18:32:33.283

除了使用 AsyncTask 之外，您还可以将操作置于 runnable-

```
Runnable r=new Runnable()
{

public void run()
{
///-------network operation code
}
};

//--------call r in this way--
Thread t=new Thread(r);`enter code here`
t.start();

Also put the UI work in a handler..such as updating a textview etc.. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-15T11:21:13.867

**这是帮助您从服务器下载文件的代码，同时您可以在状态栏上看到下载进度。**

**请参阅我的代码下图中的功能：**

[![在此处输入图像描述](https://i.stack.imgur.com/ZP6nf.jpg)](https://i.stack.imgur.com/ZP6nf.jpg) [![在此处输入图像描述](https://i.stack.imgur.com/tKVQi.jpg)](https://i.stack.imgur.com/tKVQi.jpg)

**步骤 - 1：在****DownloadFileFromURL.java**类文件上创建以从服务器下载文件内容。在这里，我创建了一个异步任务来下载文件。

```
public class DownloadFileFromURL extends AsyncTask<String, Integer, String> {

private NotificationManager mNotifyManager;
private NotificationCompat.Builder build;
private File fileurl;
int id = 123;
OutputStream output;
private Context context;
private String selectedDate;
private String ts = "";

public DownloadFileFromURL(Context context, String selectedDate) {
    this.context = context;
    this.selectedDate = selectedDate;

}

protected void onPreExecute() {
    super.onPreExecute();

    mNotifyManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    build = new NotificationCompat.Builder(context);
    build.setContentTitle("Download")
            .setContentText("Download in progress")
            .setChannelId(id + "")
            .setAutoCancel(false)
            .setDefaults(0)
            .setSmallIcon(R.drawable.ic_menu_download);

    // Since android Oreo notification channel is needed.
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        NotificationChannel channel = new NotificationChannel(id + "",
                "Social Media Downloader",
                NotificationManager.IMPORTANCE_HIGH);
        channel.setDescription("no sound");
        channel.setSound(null, null);
        channel.enableLights(false);
        channel.setLightColor(Color.BLUE);
        channel.enableVibration(false);
        mNotifyManager.createNotificationChannel(channel);

    }
    build.setProgress(100, 0, false);
    mNotifyManager.notify(id, build.build());
    String msg = "Download started";
    //CustomToast.showToast(context,msg);
}

@Override
protected String doInBackground(String... f_url) {
    int count;
    ts = selectedDate.split("T")[0];
    try {
        URL url = new URL(f_url[0]);
        URLConnection conection = url.openConnection();
        conection.connect();
        int lenghtOfFile = conection.getContentLength();

        InputStream input = new BufferedInputStream(url.openStream(),
                8192);
        // Output stream
        output = new FileOutputStream(Environment
                .getExternalStorageDirectory().toString()
                + Const.DownloadPath + ts + ".pdf");
        fileurl = new File(Environment.getExternalStorageDirectory()
                + Const.DownloadPath + ts + ".pdf");
        byte[] data = new byte[1024];

        long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            int cur = (int) ((total * 100) / lenghtOfFile);

            publishProgress(Math.min(cur, 100));
            if (Math.min(cur, 100) > 98) {
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    Log.d("Failure", "sleeping failure");
                }
            }
            Log.i("currentProgress", "currentProgress: " + Math.min(cur, 100) + "\n " + cur);

            output.write(data, 0, count);
        }

        output.flush();

        output.close();
        input.close();

    } catch (Exception e) {
        Log.e("Error: ", e.getMessage());
    }

    return null;
}

protected void onProgressUpdate(Integer... progress) {
    build.setProgress(100, progress[0], false);
    mNotifyManager.notify(id, build.build());
    super.onProgressUpdate(progress);
}

@Override
protected void onPostExecute(String file_url) {
    build.setContentText("Download complete");
    build.setProgress(0, 0, false);
    mNotifyManager.notify(id, build.build());
} } 
```

**注意：**如果您想要带有导入包的代码，请[单击此处](https://paste.ubuntu.com/p/PcnDmdCm8B/)

**现在第 2 步：**您需要在点击事件上调用上述异步任务。例如，我设置了 pdf 图像图标。要调用 AsyncTask，请使用以下代码：

```
 new DownloadFileFromURL(fContext,filename).execute(serverFileUrl); 
```

**注意：**在这里您可以在文件参数中看到**文件名**变量。这是我用来将下载的文件保存在本地设备中的名称。目前我只下载 pdf 文件，但您可以在**serverFileUrl**参数中使用您的 url。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-06T23:12:32.947

当您点击下载按钮时，首先您必须创建要保存它的本地存储路径，我们应该将下载文件功能放入 ExecutorService（用于代替 AsyncTask，因为不推荐使用 AsyncTask）。

```
// Create bamchik folder if not created yet
val folder = File(context?.getExternalFilesDir(null)?.absoluteFile, "MusicTrack")
val check = folder.mkdirs()
Log.v(mTAG, "check: $check")
var path = context?.getExternalFilesDir(null)?.absolutePath + "/MusicTrack/music." + fileExt
val SDK_INT = Build.VERSION.SDK_INT
if (SDK_INT > 8) {
    val policy: StrictMode.ThreadPolicy = StrictMode.ThreadPolicy.Builder().permitAll().build()
    StrictMode.setThreadPolicy(policy)
    val executor: ExecutorService = Executors.newSingleThreadExecutor()
    val handler = object : Handler(Looper.getMainLooper()) {
        override fun handleMessage(msg: Message) {
            // Length is the total size of file and progress is how much file have been downloaded, now you can show progress according to this
            val (progress, length) = msg.obj as Pair<Long, Long> 
            Log.v(mTAG, "Progress: $progress, Length: $length")
        }

    }

    executor.execute {
        //Background work here
        download(link, path) { progress, length ->
            // handling the result on main thread
            handler.sendMessage(handler.obtainMessage(0, progress to length))
        }
        handler.post {
            //UI Thread work here
        }
    }
} 
```

从url下载文件的功能

```
fun download(link: String, path: String, progress: ((Long, Long) -> Unit)? = null): Long {
    val url = URL(link)
    val connection = url.openConnection()
    connection.connect()
    val length = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) connection.contentLengthLong else connection.contentLength.toLong()
    url.openStream().use { input ->
        FileOutputStream(File(path)).use { output ->
            val buffer = ByteArray(DEFAULT_BUFFER_SIZE)
            var bytesRead = input.read(buffer)
            var bytesCopied = 0L
            while (bytesRead >= 0) {
                output.write(buffer, 0, bytesRead)
                bytesCopied += bytesRead
                progress?.invoke(bytesCopied, length)
                bytesRead = input.read(buffer)
            }

            return bytesCopied
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-03T11:54:31.647

这就是我使用改造下载、保存文件并将文件返回到视图模型的方式:)

接口 FileDownloader { 伴侣对象 { 私有 val 实例：懒惰的 FileDownloader {

```
 val loggingInterceptor = HttpLoggingInterceptor()
        loggingInterceptor.level = HttpLoggingInterceptor.Level.HEADERS

        val client = OkHttpClient.Builder()
            .connectTimeout(120, TimeUnit.SECONDS)
            .readTimeout(300, TimeUnit.SECONDS)
            .callTimeout(300, TimeUnit.SECONDS)
            .addInterceptor(loggingInterceptor)
            .build()

        val downloaderApi = Retrofit.Builder()
            .baseUrl("https://exmaple.com")
            .addConverterFactory(GsonConverterFactory.create())
            .client(client)
            .build()
            .create(FileDownloader::class.java)

        downloaderApi
    }

    suspend fun downloadAndSaveFile(
        url: String
    ): File {
        val file = getPdfFile()
        val responseBody = try {
            instance.downloadFile(url)
        } catch (e: Exception) {
            throw FileDownloadException(url, e)
        }
        @Suppress("BlockingMethodInNonBlockingContext")
        try {
            FileOutputStream(file).use { outputStream ->
                responseBody.byteStream().use { inputStream ->
                    inputStream.copyTo(outputStream)
                }
            }
        } catch (e: Exception) {
            throw FileDownloadException(url, e)
        }
        return file
    }

}

@GET
@Streaming
suspend fun downloadFile(@Url utl: String): ResponseBody
}

fun getPdfFile(): File {
    File(App.appContext.filesDir, "pdfs").apply { mkdirs() }
    return File(App.appContext.filesDir, "tempPDF.pdf")
}

class FileDownloadException(url: String, e: Exception) : Throwable() 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-11-20T10:53:19.387

从 api 级别 11 或 Honeycomb 开始，禁止在主线程上进行网络操作。使用线程或异步任务。欲了解更多信息，请访问[https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# vmware - Windows Server 2008 R2 上 VMWare 服务器的替代方案

> ID：15758858
> 
> 赞同：0
> 
> 时间：2013-04-02T07:51:39.620
> 
> 标签：vmware, virtualization, windows-server-2008-r2

目前，我们正在 Windows Server 2008 R2 上运行 VMWare 服务器。机器的硬件规格非常好。尽管如此，当两个或更多虚拟机同时运行（只是运行，不执行任何 CPU 或磁盘密集型任务）时，虚拟机的性能根本无法接受。

因此，我们正在寻找替代品。VMWare 的网站全是流行语，我不知道他们是否提供了符合我们要求的产品。但也欢迎其他供应商提供替代品。有一些限制：

*   虚拟化产品必须在 Windows 2008 R2 上运行 - 服务器不会被虚拟化（因此不包括 esx）
*   许多虚拟机已经存在。它们必须可用于新系统，或者转换过程必须简单
*   虚拟化引擎必须能够在没有交互式用户会话的情况下运行（因此不包括 VMWare Player 和 VirtualBox）
*   必须可以将机器重置为快照并通过命令行从不同的（即不是主机）机器（类似于 vmrun 命令）启动机器
*   多台机器必须能够并行运行而不会导致性能大幅下降

你对此有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:50:27.377

如果我能代替你，我仍然会考虑 esxi 和 2008。我们使用 vmware 服务器，性能根本无法与 esxi 相提并论，尤其是在您使用 IO 密集型应用程序时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:21:46.733

您是否考虑过 Hyper-V（Windows 中的本机管理程序）？

但是我建议对性能问题进行故障排除（最常见的是 VM 或主机的 RAM 不足 - 这会导致分页和性能不佳）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:37:17.600

虽然在给定的限制条件下我找不到 VMWare Server 的真正替代品，但我至少可以提高性能：

*   将磁盘策略从“优化安全”更改为“优化性能”将大多数构建项目的时间减少了三分之一
*   在 XP 机器上安装 IP 版本 6 协议通常会带来另外 10%

最慢的集成测试项目（安装 Dragon Naturally Seaking 12）现在在 20 分钟内完成，而不是 2 小时 20 分钟。

尽管如此，当将较大的文件从主机复制到虚拟机时，性能仍然无法接受——而从同一主机上的不同虚拟机复制它们的效果要好得多……

# objective-c - 如何将 NSView 转换为 CALayer？

> ID：15758864
> 
> 赞同：0
> 
> 时间：2013-04-02T07:52:09.700
> 
> 标签：objective-c, cocoa, core-animation, calayer, nsview

我制作了一个视频播放器，图像在 NSView 中绘制。有什么方法可以将 NSView 转换为 CALayer？我尝试使用**图层托管视图**，但开发人员文档说**不能向图层托管视图添加任何子视图。任何**人都可以给我一些建议？此代码可以在 OSX 10.6.8 中运行，但在 OSX 10.7 和 10.8 中运行。

```
mDisplayView = [[NSView alloc] initWithFrame:NSMakeRect(0, 0, width, height)];
mDisplayLayer = [[CALayer layer] retain];

[mDisplayView setLayer:mDisplayAudioLayer];
[mDisplayView setWantsLayer:YES];
[mDisplayView addSubview:mContentView];
[mRootLayer addSublayer:mDisplayAudioLayer]; 
```

视频的图像已经画在**mContentView**上，我只需要想办法把**mContentView**变成**CALayer**，可以吗？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:04:42.703

您不会*将*视图转换为图层 - 您可以通过覆盖传统方式绘制到视图中，`drawRect:`或者将其切换为支持图层的视图并使用 CoreAnimation。

最好从这里开始了解所涉及的基本概念：

[**核心动画编程指南**](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)

# css - CSS 3.0 有效颜色属性

> ID：15758867
> 
> 赞同：1
> 
> 时间：2013-04-02T07:52:26.783
> 
> 标签：css, visual-studio, w3c, w3c-validation

Visual Studio 2012 (Ultimate) 声明（带有红色波浪线）

> rgba(255, 255, 255, 0.4) 不是有效的颜色属性值

但是[W3C](http://www.w3.org/TR/css3-color/)说它是。这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T07:57:00.803

这是有效的。Visual Studio 对 HTML5/CSS3 功能没有最好的验证。

[CSS 技巧 - RGBa](http://css-tricks.com/rgba-browser-support/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:54:20.943

根据 CSS3 标准，它是一个有效的颜色属性；

```
rgba(255, 255, 255, 0.4) 
```

第四个参数`0.4`是 CSS3 特性的 opacity，`a`意思`rgba`是`alpha`

您也可以在 Visual Studio 中尝试此操作，以查看它不会标记错误；

```
rgb(255, 255, 255); 
```

# javascript - 如何获取所选数组索引的值

> ID：15758868
> 
> 赞同：0
> 
> 时间：2013-04-02T07:52:29.500
> 
> 标签：javascript, html, arrays

我在 java 脚本中有数组我希望它可以给出该索引的值并显示到 html 中的数据 div 现在它显示的是数组的索引而不是我想要的值我已经给出了 jsfiddle 链接

```
 <div id="data"></div>     

 and here is the script 

       var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
        var con=document.getElementById('data');
        var inds = $.map(ad, function(v, i) {
            return v == 'b' ? i : null;
        });

        alert(inds); // 0,3,
        var avr1=inds;
        con.innerHTML=avr1; 
```

[http://jsfiddle.net/2Acja/](http://jsfiddle.net/2Acja/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:54:28.700

你期待'b'吗？更改此行：

```
var avr1=inds; 
```

到

```
var avr1=ad[inds]; 
```

获取`ad`at index的元素`inds`->`ad[1] = 'b'`

**编辑：**你可以使用下面的方法得到输出'aaa'，它比你的方法简单一点，它计算数组中'a'的数量，然后根据它创建一个字符串。

[jsFiddle](http://jsfiddle.net/Tyriar/Pescf/)

```
var con = document.getElementById('data');

var char = 'a';
var str = '';
var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
var count = ad.filter(function (v) {
    return v == char;
}).length;

for (var i = 0; i < count; i++)
    str += char;

alert(str);

con.innerHTML = str; 
```

# javascript - 如何用 javascript 和 jQuery 总结几列？

> ID：15758871
> 
> 赞同：1
> 
> 时间：2013-04-02T07:52:39.653
> 
> 标签：javascript, jquery, asp.net, html

我有一个包含两个不同列的表，我想将它们加起来为它们各自的总和。现在我只是将其中一列相加，我可以通过再次制作相同的 JS 但使用不同的值名称来添加第二列，但这并不那么漂亮。我将如何更改它以便计算**ue**列以及**egen**并吐出两个结果**sum**和**sum2**。

```
<table>
    <tr>
    <td><asp:TextBox ID="TextBox1" runat="server">Number</asp:TextBox></td>
    <td class="egen"><asp:TextBox ID="TextBox56" runat="server" Columns="1">56</asp:TextBox></td>
    <td class="ue"><asp:TextBox ID="TextBox57" runat="server" Columns="1">57</asp:TextBox></td>
    </tr>
    <tr>
    <td><asp:TextBox ID="TextBox2" runat="server">Worker</asp:TextBox></td>
    <td class="egen"><asp:TextBox ID="TextBox58" runat="server" Columns="1">58</asp:TextBox></td>
    <td class="ue"><asp:TextBox ID="TextBox59" runat="server" Columns="1">59</asp:TextBox></td>
    </tr>
    <tr>
    <td align="right">Sum:</td>
    <td align="center"><span id="sum"></span></td>
    <td align="center"><span id="sum2"></span></td
    </tr>
</table> 
```

这是我用来将列**egen**中的值相加的 javascript 。

```
$(document).ready(function () {

    //iterate through each td based on class / input and add keyup
    //handler to trigger sum event
    $(".egen :input").each(function () {

        $(this).keyup(function () {
            calculateSum();
        });
    });

});
function calculateSum() {

    var sum = 0;
    // iterate through each td based on class and add the values from the input
    $(".egen :input").each(function () {

        var value = $(this).val();
        // add only if the value is number
        if (!isNaN(value) && value.length != 0) {
            sum += parseFloat(value);
        }
    });
    $('#sum').text(sum);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:54:41.417

`.egen` *您可以在以下选择器中或* `.ue`通过以下选择器定位所有元素：

```
 $('.egen :input, .ue :input') 
```

或者，如果您愿意：

```
$('.egen, .ue').find(':input') 
```

顺便说一句，您不需要遍历元素集合以将`keyup`侦听器绑定到它们，您可以立即绑定到整个集合：

```
$('.egen :input, .ue :input').keyup(calculateSum); 
```

**编辑**

我注意到`#sum`，`#sum2`您可能希望单独总结这些列。你可以这样做：

```
$('.egen :input').keyup(function() { calculateSum('.egen'); });
$('.ue :input').keyup(function() { calculateSum('.ue'); });

function calculateSum(container) {
   var sum = 0;
   $(container).find(':input').each(function() {
       ... 
   });
} 
```

然后当然分别设置`#sum`or的值`#sum2`。这可以通过多种方式实现。要么你传递 id，就像我们传递上面的类一样，要么你使用一个名为 的类`sum`，并让各自`td`的 重用`egen`和`ue`类。这样您就可以使用`$(container+'.sum').val()`. 另一种解决方案是只返回总和，并将其设置在您的 keyup 侦听器中：

```
$('.ue :input').keyup(function() {
   $('#sum2').val( calculateSum('.ue') );
}); 
```

另请注意，您的解析可以简化。`parseFloat`将产生`NaN`许多无效值，包括空字符串和`null`，因此您无需在调用它之前仔细检查您的值。`NaN`将评估为假，因此您始终可以通过 求和`(parsedResult || 0)`，结果将是`0`，如果`parsedResult`是，则总和不受影响`NaN`。

因此：

```
var sum = 0;
$(container).find(':input').each(function() {
   sum += (parseFloat( $(this).val() ) || 0);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:04:09.277

将您的总和`<span>`id 更改为相应的 class_sum，例如

```
<span id="egen_sum"></span>
<span id="ui_sum"></span>
... 
```

这样我们就可以使用一个函数来实现它

试试这个

```
$('.egen :input, .ue :input').keyup(function(){
     var keyupClass= $(this).parent().hasClass('egen') ? 'egen' : 'ue';
     calculateSum(keyupClass);
 });

function calculateSum(keyupClass) {

  var sum = 0;
  $("."+ keyupClass+" :input").each(function () {

    var value = $(this).val();
    // add only if the value is number
    if (!isNaN(value) && value.length != 0) {
        sum += parseFloat(value);
    }
  });
  $('#'+keyupClass+"_sum").text(sum);
}; 
```

这将适用于任何数量的输入......只需要确保相应的总和跨度被赋予正确的ID......

# php - 使用 INCLUDE 函数时 CSS 失败

> ID：15758873
> 
> 赞同：0
> 
> 时间：2013-04-02T07:52:51.500
> 
> 标签：php, css

我为我正在构建的网站下载了一个模板 + CSS 文件，该模板运行良好，直到我尝试将其分解并将每个代码放在自己的文件中（以便将来修改和编辑）。所以，当我剪掉包含 (Title + Meta Data .. etc ) 的头部部分，并将它放在自己的文件中，并用`include()`函数替换它（肯定）时，我丢失了 CSS 样式并返回到基本 &标准风格（黑白，没有额外的格式..等）

我哪里做错了？知道这是我使用过的包含函数：

```
<?php
include 'files/head.php';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:39:44.273

使用像`file:///C:/xampp/htdocs/test6/index.php`PHP 这样的 URL 不会执行。您必须在涉及 apache 的情况下运行它。目前，您将 PHP 脚本作为常规 txt 或 html 文件打开 - 它只是传递给浏览器而不进行处理。

为了使`include`功能正常工作，您必须使用 apache 运行它。当您使用 xamp 时，我认为您应该像这样简单地使用 URL 打开它。`http://localhost/test6/index.php`在这种情况下，apache 将获取该请求并将其传递给 PHP。PHP 引擎将解释您的 PHP 脚本并“替换”`include files/head.php`为 head.php 的内容。如果一切正常，按下 Ctrl+U（或使用开发人员工具或 Firebug 查看 HTML）后，您应该会看到 head.php 的内容，而不是`<?php include ....`

请注意，css 文件应与相对 URL 链接，例如`css/screen.css`. 或绝对 URL，如`http://localhost/test6/css/screen.css`. 比如在 google 中搜索相对和绝对 URL 以获取更多信息。

# java - 如何使用 Spring MVC 在 jsp 中显示模型属性？

> ID：15758877
> 
> 赞同：15
> 
> 时间：2013-04-02T07:53:01.597
> 
> 标签：java, spring, spring-mvc, jstl

实际上我的应用程序有 Spring MVC ......

我有 User.jsp，在此我正在创建一些空表单（文本框、文本区域 ..）我在我的 Controller 类中使用以下方法显示表单。下面的代码用于在前端 jsp 上添加空表单。

```
@RequestMapping(value = "user", method = RequestMethod.GET)
public String user(Model model) throws Exception {
    model.addAttribute("userForm", new UserForm());

    return "profile/user";
} 
```

现在我在数据库中获取用户表单（3 行）。

那么..如何添加模型属性，如果我们添加这个是他们对模型属性的任何覆盖？

如何使用 JSTL 将此模型属性显示到 Jsp 中？

请建议我我坚持这一点..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T09:29:50.707

示例代码

```
class UserForm {
    private String name;
    private String address;

    //setter and getter

} 
```

在你的控制器中

```
 @RequestMapper(value="/user")
    public ModelAndView user(){
        ModelAndView mav = new ModelAndView("userForm") ;
        List<UserForm> userForms = yourDatabaseCall();
        mav.addObject("userForms", userForms);  
        return mav;``
    } 
```

在jsp页面中：

```
<c:forEach items="${userForms}" var="userForm">     
   <c:out value="${userForm.name}"/>
   <c:out value="${userForm.address}"/>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-02T08:03:55.650

您可以将 userFomrs 列表添加为模型属性

```
List<UserForm> userForms = yourDatabaseCall();
model.addAttribute("userForms", userForms); 
```

在 JSTL 中，您可以对其进行迭代

```
<c:forEach items="${userForms}" var="userForm">     
   // Do something
</c:forEach> 
```

# php - 如何将 apache localhost 网站移动到互联网（即远程服务器）

> ID：15758881
> 
> 赞同：2
> 
> 时间：2013-04-02T07:53:46.330
> 
> 标签：php, apache, web-config, localhost, remote-server

我几乎没有关于将 locahost 站点移动到服务器以使其在互联网上可用的概念性查询.....**步骤是什么**...服务器如何识别我的 apache 和 php 配置文件中的更改..我已经建立了一个网站在 apache 2.2 上的 php 和 mysql 中

**笔记：**

*   我在我的 apache 配置文件中做了一些更改。其中之一是我在 ***“DirectoryIndex”中包含了一个填充名称******“index.php”*** ......所以现在我的 DirectoryIndex 看起来像：

     *```
    <IfModule dir_module>
        DirectoryIndex index.html index.php
    </IfModule> 
    ```* 
**   所以现在我的 apache 会自动告诉浏览器在调用**header('LOCATION:') 或 refresh**时搜索 index.php 文件。很明显，我的 index.php 文件包含 html 和其他将显示的 php 代码或显示

    *   第三也是最重要的......**我在构建网站时在很多情况下都使用了标题功能......我的标题功能就像`header('Location: http://localhost/home/');`*** 

 *所以再次重复这个问题

*   我应该根据我的网站名称在上传时更改所有标题功能吗？

    `header('Location: http://www.my_site_name.com/home/');`代替

    `header('Location: http://localhost/home/');`

*   谁将我的远程服务器将识别我在配置文件中所做的更改并根据更改工作
*   以及将网站上传到互联网的步骤是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:28:18.417

> 谁将我的远程服务器将识别我在配置文件中所做的更改并根据更改工作

通常托管服务器配置为允许使用 .htaccess 文件覆盖 apache 配置

您可以在根目录中创建一个**.htaccess**文件并将您的 DirectoryIndex 设置放在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:22:47.750

> 根据我的网站名称上传时，我是否应该更改所有标题功能，即`header('Location: http://www.my_site_name.com/home/');` 代替`header('Location: http://localhost/home/')`；

为什么不使用相对路径或干脆：

```
header('Location: /home/'); 
```

> 谁将我的远程服务器将识别我在配置文件中所做的更改并根据更改工作

这样，它就可以在两台服务器上运行。

> 以及将网站上传到互联网的步骤是什么

您应该使用 FTP 客户端将您的网站上传到您的虚拟主机。*

# android - 将图像按钮定位在多种分辨率上，Android

> ID：15758883
> 
> 赞同：2
> 
> 时间：2013-04-02T07:53:55.690
> 
> 标签：android

我在 AbsoluteLayout 上有一些图像按钮，因为它们需要放置在 ImageView 的某些部分上。

我希望当我更改屏幕尺寸分辨率时，图像按钮将保持在 ImageView 上的确切位置。

问题是，如果我更改分辨率，所有图像按钮都会从它们的位置移动。

也许有一种方法可以根据 ImageView 的比率或百分比放置没有 AbsoluteLayout 的图像按钮，因为我知道根本不推荐使用 AbsoluteLayout。

感谢您的帮助

这是我的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".G" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toLeftOf="@+id/ScrollView1"
        android:orientation="horizontal"
        android:weightSum="100" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="15"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_toLeftOf="@+id/ScrollView1"
                android:orientation="vertical"
                android:weightSum="100" >

            <AbsoluteLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_alignParentLeft="true"
                android:layout_weight="20"
                android:layout_alignParentTop="true"
                android:layout_toLeftOf="@+id/ScrollView1" >
            <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_above="@+id/tvOn"
                    android:layout_alignParentTop="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/t" />

                <ImageButton
                    android:id="@+id/bon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_x="319dp"
                    android:layout_y="88dp"
                    android:src="@drawable/b_blue" />

                <ImageButton
                    android:id="@+id/bo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_x="287dp"
                    android:layout_y="125dp"
                    android:src="@drawable/b_blue" />

            </AbsoluteLayout>
                <TextView
                    android:id="@+id/tvOn"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_alignParentBottom="true"
                    android:layout_weight="80" />
            </LinearLayout>

        </LinearLayout>

        <ScrollView
            android:id="@+id/ScrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="85"
            android:scrollbars="vertical" >

            <LinearLayout
                android:id="@+id/rGroup"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:orientation="vertical" >

                <ToggleButton
                    android:id="@+id/bmD"
                    android:layout_width="match_parent"
                    android:layout_height="60dp" />

                <ToggleButton
                    android:id="@+id/bmCt"
                    android:layout_width="match_parent"
                    android:layout_height="60dp"/>

            </LinearLayout>
        </ScrollView>
    </LinearLayout>
</RelativeLayout> 
```

# ssis - SSIS 数据转换任务

> ID：15758884
> 
> 赞同：0
> 
> 时间：2013-04-02T07:54:05.767
> 
> 标签：ssis

您好我正在尝试在 ssis 中使用数据转换转换将 Execl 数据转换为文本文件但转换失败并出现 Fallowing 错误

" [数据转换 [77]] 错误：“输出列“描述副本”(93)”失败，因为发生了截断，并且“输出列“描述副本”(93)”上的截断行处理指定了截断失败. 指定组件的指定对象发生截断错误。”

谁能帮我找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:00:55.223

检查此链接：

[http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/8c9c1d45-82d5-43bf-961b-a8e22dab221b/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/8c9c1d45-82d5-43bf-961b-a8e22dab221b/)

此外请注意 Excel 使用前 8 行来确定数据类型...这可能会导致一些问题。

我的建议是将 Excel 保存为 CSV 文档，然后使用它。

# php - htmlentites HTML标签内的某些字符串

> ID：15758890
> 
> 赞同：0
> 
> 时间：2013-04-02T07:54:21.583
> 
> 标签：php

我有这个字符串：

`$str = "<ul><li>Eüro!</li><li>100 %</li><li>Jäckö<br></li></ul>";`

我打算`htmlentities()`在那些里面的字符串上使用`<li></li>`。所以它会像这样出现：

`$str = "<ul><li>E&uuml;ro!</li><li>100 %</li><li>J&auml;ck&ouml;<br></li></ul>";`

有没有办法或解决方法`htmlentities()`不转换整个字符串？因为如果我只是这样做`htmlentities($str)`，它会将整个字符串转换为：

`&lt;ul&gt;&lt;li&gtE&uuml;ro!&lt;/li&gt;&lt;li&gt;100 %&lt;/li&gt;&lt;li&gt;J&auml;ck&ouml;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:00:55.897

从[文档](http://php.net/manual/es/function.htmlentities.php)中，您可以看到您有一些标志：

```
string htmlentities ( string $string [, int $flags = ENT_COMPAT | ENT_HTML401 [, string $encoding = 'UTF-8' [, bool $double_encode = true ]]] ) 
```

所以你可以在这里看到一些字符串的输出：

```
<?php
  $str = "A 'quote' is <b>bold</b>";

  // Produces: A 'quote' is &lt;b&gt;bold&lt;/b&gt;
  echo htmlentities($str);

  // Produces: A &#039;quote&#039; is &lt;b&gt;bold&lt;/b&gt;
  echo htmlentities($str, ENT_QUOTES);
?> 
```

我认为这将取决于您的默认字符码，因此您可以尝试不同的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:18:40.850

找到一种方法，在您使用 htmlentities() 编辑子函数之前不将其作为单个字符串传递。将其视为列表项数组，然后在您`<ul>`从中构建时调用每个列表项的 htmlentities。其他任何事情都意味着您很有可能出现 XSS 漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:29:35.630

```
$str = '<ul><li>Eüro!</li><li>100 %</li><li>Jäckö<br></li></ul>';

function update_li_content($text){        
    return "<li>".htmlentities($text[1])."</li>";
}

$reg = "#<li>(.*?)</li>#";

$filter_data =  preg_replace_callback ( $reg, "update_li_content", $str);

echo $filter_data; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T07:59:49.373

您可以创建自己的替换函数：

```
function parseAccents($in) {
    $out=$in;
    $toreplace=array(
        array('ü', '&uuml;'),
        array('ä', '&auml;'),
        array('ö', '&ouml;')
        // ...  
    );
    for($i=0; $i<count($toreplace); $i++) $out=str_replace($toreplace[$i][0], $toreplace[$i][1], $out);
    return $out;
} 
```

编辑：如果您不想设置整个重音列表，您可以使用此模型：

```
function parseAccents($in) {
    $out=htmlentities($in);
    $toreplace=array(
        array('&lt;', '<'),
        array('&gt;', '>'),
        // ...  
    );
    for($i=0; $i<count($toreplace); $i++) $out=str_replace($toreplace[$i][0], $toreplace[$i][1], $out);
    return $out;
} 
```

# asp.net - 是否可以从后面/C# 生成 jquery datepicker？

> ID：15758892
> 
> 赞同：1
> 
> 时间：2013-04-02T07:54:27.160
> 
> 标签：asp.net

我正在使用 asp.net，我在这里有一些问题，任何帮助都会很棒。我正在尝试从 Codebehind(C#) 生成控件，因为从服务器返回的数据量是不确定的，现在我的问题是，是可以从 C#生成**jquery datepicker控件吗？**怎么做？给我看一些例子。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:00:15.160

对的，这是可能的 。在创建控件时，您可以拥有一个要用于日期选择器的公共类，在服务器端的文本框中添加该类。

```
 txt.Attributes.Add("class", "myCal"); 
```

在客户端调用这个 javascript

```
 $(doucment).ready(function(){
        $(".myCal").datepicker();
     }); 
```

这将遍历所有以 myCal 为类的文本框，并将其放入 datePicker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:20:23.443

尝试这个..

**代码隐藏**：

```
 TextBox txt = new TextBox();
    txt.ID = "datepicker";
    div1.Controls.Add(txt); 
```

如果你想要更多数量的文本框，你可以使用 cssclass 而不是 id。

```
 TextBox txt = new TextBox();
    txt.cssclass = "date";
    div1.Controls.Add(txt); 
```

**象素**：

```
<script type="text/javascript">
  $(function () {
      $("#datepicker").datepicker();//or $(".date").datepicker(); for more number of textboxes
  });
</script> 
```

在 aspx 中添加所需的脚本和样式。要了解更多信息，请参阅此[链接](http://jqueryui.com/datepicker/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:59:53.367

您可以[在这里查看](http://jqueryui.com/datepicker/)以了解并查看日期选择器的示例代码。我希望这个对你有用。

# jasper-reports - 在 jasper 报告中导出到 word doc 时出现 URISyntax 异常

> ID：15758894
> 
> 赞同：0
> 
> 时间：2013-04-02T07:54:29.100
> 
> 标签：jasper-reports, jboss5.x

当我使用*JasperReports 3.7.6*将报告导出到 word 文档时出现以下错误。

它适用于*JR 3.6.0*和*4.0.0*。但我希望它可以在 3.7.6 上运行。

它在独立应用程序上运行良好，但在 Web 应用程序上运行时会导致问题。

我正在使用*Jboss*。

```
 13:12:37,078 WARN  [RequestProcessor] Unhandled Exception thrown: 
   class net.sf.jasperreports.engine.JRRuntimeException
   13:12:37,078 ERROR [[action]] Servlet.service() for servlet action threw exception
   java.net.URISyntaxException: Illegal character in path at index 157: 
   vfszip:/C:/jboss-5.1.0.GA%20_WebApps/server/default/deploy/Myapp.war/WEB-INF/lib/jasperreports-3.7.6.jar/net/sf/jasperreports/engine/export/ooxml/docx/[Content_Types].xml
at java.net.URI$Parser.fail(Unknown Source)
at java.net.URI$Parser.checkChars(Unknown Source)
at java.net.URI$Parser.parseHierarchical(Unknown Source)
at java.net.URI$Parser.parse(Unknown Source)
at java.net.URI.<init>(Unknown Source)
at org.jboss.virtual.VFSUtils.toURI(VFSUtils.java:505)
at org.jboss.virtual.plugins.registry.DefaultVFSRegistry.getFile(DefaultVFSRegistry.java:140)
at org.jboss.virtual.protocol.AbstractVFSHandler.openConnection(AbstractVFSHandler.java:71)
at java.net.URL.openConnection(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at net.sf.jasperreports.engine.util.JRLoader.loadBytes(JRLoader.java:331)
at net.sf.jasperreports.engine.util.JRLoader.loadBytesFromLocation(JRLoader.java:474)
at net.sf.jasperreports.engine.util.JRLoader.loadBytesFromLocation(JRLoader.java:423)
at net.sf.jasperreports.engine.export.zip.FileBufferedZip.addEntry(FileBufferedZip.java:62)
at net.sf.jasperreports.engine.export.ooxml.DocxZip.<init>(DocxZip.java:61)
at net.sf.jasperreports.engine.export.ooxml.JRDocxExporter.exportReportToStream(JRDocxExporter.java:316)
at net.sf.jasperreports.engine.export.ooxml.JRDocxExporter.exportReport(JRDocxExporter.java:230) 
```

我尝试对路径进行编码。但它甚至没有工作。

如果有人解决了这个问题，请告诉我。

# wpf - WPF：检查两个 ModelVisual3D 是否大部分重叠

> ID：15758896
> 
> 赞同：1
> 
> 时间：2013-04-02T07:54:35.117
> 
> 标签：wpf, collision-detection, intersection, hittest, modelvisual3d

我有一个关于 WPF 编程的问题，它是关于我们是否可以检查某个形状的某个百分比是否与另一个形状相交/重叠。我的意图是创建一个迷你游戏，其中将有一个模型（例如一个*立方体*），并且应用程序将对其应用随机数`Transform`。然后，用户需要使用给定的控件手动旋转和调整模型大小，并将其放入（大致）随机编辑的`Transform`立方体中。

`ModelVisual3D`有什么方法/算法我可以在同一个中申请两个s`Viewport3D`吗？如果该方法可以返回一个百分比（例如 0.8、0.9），那将是理想的，这样我就可以将其调整为仅在百分比高于某个水平时才接受。

非常感谢！

# jquery - 禁用 DOM 的所有事件

> ID：15758901
> 
> 赞同：0
> 
> 时间：2013-04-02T07:54:46.747
> 
> 标签：jquery

我正在尝试找到一种简单的方法来禁用 DOM 元素的所有 jQuery 事件处理程序，例如`hover`,`click`等。我知道我可以使用`unbind`来做到这一点。但它需要一段代码来做到这一点。我只想知道是否有任何 jQuery 开关来控制它？另外，我知道有一个使用全局变量的解决方案。我认为编写这样的硬代码并不好。

```
//in some event handler
if (sometag)
{
   //do something.

} 
```

代码并不优雅。有什么想法或我不知道的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:58:11.773

如果您只是在谈论您*自己的*处理程序，并且您希望为它们设置一个全局“开/关”开关，那么拥有一个您的处理程序测试的中心变量是一种完全合理的方法，既不错也不错。（我实际上不会让它成为一个全局变量，只是一个所有处理程序都可以访问的变量。）

或者，您可以命名您的事件：

```
$("some selector").bind("click.myevents", handler);
$("some selector").bind("hover.myevents", handler);
// ... 
```

...并将名称空间用于`unbind`所有这些：

```
$("*").unbind(".myevents"); 
```

...但是没有简单的方法可以重新打开它们，而且开销似乎有点高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:25:13.927

你的问题非常广泛和笼统。如果你能说出你的精确用例，有人可能会给你一个更好的答案。

在 dom 节点上激活/停用事件处理程序的另一种模式是将事件处理委托给父节点，并使用类来打开和关闭处理程序。

什么是事件委托？你会[在这里](https://stackoverflow.com/q/8110934/86072)找到一个简单的答案。

这是一个例子：

```
//HTML code :

<ul id="myList">
    <li>
        <input class="cbActivate" type="checkbox" /> <a href="#" class="link">first item</a>
    </li>
    <li>
        <input class="cbActivate" type="checkbox" /> <a href="#" class="link">second item</a>
    </li>
    <li>
        <input class="cbActivate" type="checkbox" /> <a href="#" class="link">third item</a>
    </li>
</ul>

//javascript
$('.cbActivate').on('click', function () {
    $(this).closest('li').find('a.link').toggleClass('active');
});
// handling clicks on 'a.active' links is delegated to the parent '#myList' node
$('#myList').on('click', 'a.active', function () {
    alert("I'm an activated item !");
}); 
```

这是对应的[jsfiddle](http://jsfiddle.net/e7mHg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:00:15.123

如果您真的想取消绑定所有事件处理程序，您可以使用`.off()`不带任何参数：

```
$('p').off(); 
```

作为替代方案，您可以使用命名空间事件，这将允许您取消绑定命名空间的所有处理程序：

```
$('p').on('click.ns', handler).on('mouseover.ns', handler2).on('mouseout.otherns', handler3);
$('p').off('.ns'); //only the first two handlers are unbound 
```

# android - 服务中的定时器功能（一种计时器）

> ID：15758912
> 
> 赞同：0
> 
> 时间：2013-04-02T07:55:14.480
> 
> 标签：android, service, timer, stopwatch, chronometer

我的目的是创建一个从 00:00:00 开始并与记录功能一起挂起的计时器。此记录是在**服务**中完成的，因此计时器也在同一服务中。如果应用程序移至后台，则记录和计时器会继续进行，并且应用程序会使用 myService.getTime() 在 onResume 处获取时间。

但我经历了两件奇怪的事情。**首先**是我的计时器有时比一秒快，有时更慢，有时从例如 00:00:04 跳到 00:00:06 等。其中**没有一致性**。我使用下面的代码，但可能有更好的选择来解决这个问题？**第二个**是它导致**我的按钮滞后**，尽管我在服务中启动它？

服务

```
//////////TIMER FUNCTION START//////////

        private void startTimerClick() {

            if (stopped) {
                startTime = System.currentTimeMillis() - elapsedTime;
            } else {
                startTime = System.currentTimeMillis();
            }
            mHandler.removeCallbacks(startTimer);
            mHandler.postDelayed(startTimer, 0);

        }

        private void pauseTimerClick() {
            mHandler.removeCallbacks(startTimer);
            stopped = true;

        }

        private void stopTimerClick() {
            mHandler.removeCallbacks(startTimer);
            stopped = false;

        }

        private void startTimer() {

            startTimer = new Runnable() {
                public void run() {
                    elapsedTime = System.currentTimeMillis() - startTime;
                    updateTimer(elapsedTime);
                    mHandler.postDelayed(this, REFRESH_RATE);
                }
            };

        }

        private void updateTimer(float time) {
            secs = (long) (time / 1000);
            mins = (long) ((time / 1000) / 60);
            hrs = (long) (((time / 1000) / 60) / 60);

            /*
             * Convert the seconds to String and format to ensure it has a leading
             * zero when required
             */
            secs = secs % 60;
            seconds = String.valueOf(secs);
            if (secs == 0) {
                seconds = "00";
            }
            if (secs < 10 && secs > 0) {
                seconds = "0" + seconds;
            }

            /* Convert the minutes to String and format the String */

            mins = mins % 60;
            minutes = String.valueOf(mins);
            if (mins == 0) {
                minutes = "00";
            }
            if (mins < 10 && mins > 0) {
                minutes = "0" + minutes;
            }

            /* Convert the hours to String and format the String */

            hours = String.valueOf(hrs);
            if (hrs == 0) {
                hours = "00";
            }
            if (hrs < 10 && hrs > 0) {
                hours = "0" + hours;
            }

        }
        //////////TIMER FUNCTION END////////////

    public String getHours(){

        return hours;
    }

    public String getMinutes(){

        return minutes;
    }

    public String getSeconds(){

        return seconds;
    }
} 
```

活动（/片段）

```
private void timerStart() {

        handler = new Handler();
        Thread t = new Thread() {

              @Override
              public void run() {
                try {
                  while (!isInterrupted()) {
                    Thread.sleep(1000);
                    handler.post(new Runnable() {
                      @Override
                      public void run() {

                          timer.setText(myService.getHours()+":"+myService.getMinutes()+":"+myService.getSeconds());
                      }
                    });
                  }
                } catch (InterruptedException e) {
                }
              }
            };

            t.start();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:14:15.963

您在服务和活动/片段代码中都使用线程。在 Android 中将线程用于时间敏感的任务是一个问题，因为 Android 能够显着延迟线程。

我一直在使用[ScheduledThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)来完成类似的任务，并且效果很好。

然后你像这样使用它：

```
ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(1); // where 1 is the number of needed concurrent threads. 1 should last for your needs.
executor.scheduleWithFixedDelay(new TimerTask() {  
    // your recurringly executed code here
}, 0, 1, TimeUnit.SECONDS); 
```

# android - android json图片解析

> ID：15758917
> 
> 赞同：0
> 
> 时间：2013-04-02T07:55:21.483
> 
> 标签：android, json, image

你好，我正在尝试学习 json 解析并我解决了一些问题，但我有问题我可以在我的列表视图中获取信息，但我无法拍照，我的日志说

我的代码在这里我更改 url 和一些字符串[如何解析 Sub JSONArray 并显示图像？](https://stackoverflow.com/questions/14701747/how-to-parse-sub-jsonarray-and-display-image)

请帮助我已经谢谢....

```
04-02 07:59:27.767: W/System.err(1737): java.net.MalformedURLException: Protocol not found: WOW1079.jpg
04-02 07:59:27.815: W/System.err(1737):     at java.net.URL.<init>(URL.java:178)
04-02 07:59:27.945: W/System.err(1737):     at java.net.URL.<init>(URL.java:127)
04-02 07:59:28.095: W/System.err(1737):     at com.example.benm.DownloadImageTask.getBitmap(DownloadImageTask.java:41)
04-02 07:59:28.315: W/System.err(1737):     at com.example.benm.DownloadImageTask.doInBackground(DownloadImageTask.java:34)
04-02 07:59:28.465: W/System.err(1737):     at com.example.benm.DownloadImageTask.doInBackground(DownloadImageTask.java:1)
04-02 07:59:28.695: W/System.err(1737):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-02 07:59:28.875: W/System.err(1737):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-02 07:59:28.885: W/System.err(1737):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-02 07:59:28.895: W/System.err(1737):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-02 07:59:28.907: W/System.err(1737):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-02 07:59:28.915: W/System.err(1737):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-02 07:59:28.925: W/System.err(1737):     at java.lang.Thread.run(Thread.java:856)
04-02 07:59:28.995: W/System.err(1737): java.net.MalformedURLException: Protocol not found: WOW749.jpg
04-02 07:59:29.036: W/System.err(1737):     at java.net.URL.<init>(URL.java:178)
04-02 07:59:29.045: W/System.err(1737):     at java.net.URL.<init>(URL.java:127)
04-02 07:59:29.055: W/System.err(1737):     at com.example.benm.DownloadImageTask.getBitmap(DownloadImageTask.java:41)
04-02 07:59:29.066: W/System.err(1737):     at com.example.benm.DownloadImageTask.doInBackground(DownloadImageTask.java:34)
04-02 07:59:29.095: W/System.err(1737):     at com.example.benm.DownloadImageTask.doInBackground(DownloadImageTask.java:1)
04-02 07:59:29.155: W/System.err(1737):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-02 07:59:29.165: W/System.err(1737):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-02 07:59:29.175: W/System.err(1737):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-02 07:59:29.185: W/System.err(1737):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)

here is my code 
```

公共类 DownloadImageTask 扩展 AsyncTask {

```
private String mUrl;
private ImageView mImageView = null;

public DownloadImageTask(String Url, ImageView imageView) {

    mUrl = Url;
    this.mImageView = imageView;
}

protected void onPostExecute(Bitmap result) {
    super.onPostExecute(result);
    if (result != null) {
        mImageView.setImageBitmap(result);
    }
}

protected Bitmap doInBackground(Void... params) {

    Bitmap bitmap = getBitmap(mUrl);
    return bitmap;
}

public Bitmap getBitmap(String imageUrl) {
    Bitmap mBitmap = null;
    try {
        URL url = new URL(imageUrl);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        InputStream is = conn.getInputStream();
        mBitmap = BitmapFactory.decodeStream(is);

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return mBitmap;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:17:20.980

根据给定 logcat 中描述的 MalformedURLException，我可以说**URL is not valid**。只需检查图像 URL 值`WOW749.jpg`作为响应，您不会获得完整的图像名称，而只是图像的名称。

所以我建议你在调用`getBitmap()`函数时嵌入带有图像名称的 webservice URL，它会解决你的问题。

# vb.net - 如果子类成员不可访问，为什么要使用多态性

> ID：15758918
> 
> 赞同：0
> 
> 时间：2013-04-02T07:55:22.687
> 
> 标签：vb.net

这是我的沙坑：

```
Sub Main()

    Dim myCar As Car
    myCar = New sportsCar 

    myCar.numDoors = 4
    myCar.weight = 100  '<<errors here

End Sub

Class Car

    Public numDoors As Integer

End Class
Class sportsCar
    Inherits Car

    Public weight As Integer

End Class 
```

最初我将 myCar 指向超类`Car`，然后使用多态将其实例化为子类`sportsCar`。

为什么我不能访问子类的字段`weight`？有没有我需要使用的技术来访问这个字段，或者我只是错过了重点？

* * *

**编辑** 我意识到以下将编译。但练习的重点是我试图理解*多态性的概念*

```
Sub Main()

    Dim myCar As sportsCar
    myCar = New sportsCar() 

    myCar.numDoors = 4
    myCar.weight = 100

End Sub 
```

如果子类的成员*不可*访问，那么多态的意义何在？

```
 Dim myCar As Car
    myCar = New sportsCar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:00:14.800

您无法访问`weight`属性，因为`Car`类没有属性。您必须`sportsCar`先将对象转换为：

```
CType(myCar.weight, GetType(sportsCar)) = 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:29:53.500

你的实际问题似乎是，

> “多态的意义何在？”

回答，

它允许我们处理一类类型的所有子类。为了说明，假设我有两个人为的功能。

```
Sub SetDoors (ByVal car As SportsCar,  ByVal doors As Integer)
    car.NumDoors = doors
End Sub

Sub SetDoors (ByVal otherCar As Car,  ByVal doors As Integer)
    car.NumDoors = doors
End Sub 
```

因为多态是 CTS 的一部分并且在 VB.Net 中是允许的，所以我不需要为每种可能的类型复制通用功能。

我可以省略该`SportsCar`函数的专用版本，因为`SportsCar`它是`Car`. 该`Car`函数的版本将适用于`Car`包括的所有继承者`SportsCar`。如果没有多态性，这是不允许的。

* * *

如果要在所有子类上实现抽象成员，则将类标记为`MustInherit`并使用[`MustOverride`](http://msdn.microsoft.com/en-gb/library/hyb29zk8.aspx)关键字。

# .net - 多次运行编码的 UI 自动化测试

> ID：15758920
> 
> 赞同：0
> 
> 时间：2013-04-02T07:55:36.540
> 
> 标签：.net, automated-tests, coded-ui-tests

我已经使用编码的 UI 自动化（通过记录操作）创建了一个自动化测试。我需要使用数据驱动测试、到 XML 文档的连接字符串多次运行测试。这需要根据我作为输入提供的数字运行，这个数字每次都需要递增。这在编码的 UI 自动化测试中可能吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:19:22.087

您只需要创建一个[CodedUI 数据驱动测试](http://msdn.microsoft.com/en-us/library/ee624082.aspx)。

在`DataSource`属性设置中`DataAccessMethod`，`DataAccessMethod.Sequential`您的测试将读取所有数据行并按当时的顺序执行它们。

您还需要使用 xml 文件，`DeploymentAttribute`以便将您的 xml 文件部署到输出文件夹。

**例子：**

```
[DeploymentItem("data.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML", "\\data.xml", "Iterations", DataAccessMethod.Sequential)]
[TestMethod]
public void CodedUITestMethod1()
{
    // To generate code for this test, select "Generate Code for 
    // Coded UI Test" from the shortcut menu and select one of 
    // the menu items.
    this.UIMap.AddTwoNumbersParams.TextInput1EditText = 
        TestContext.DataRow["Input1"].ToString();
    this.UIMap.AddTwoNumbersParams.TextInput2EditText = 
        TestContext.DataRow["Input2"].ToString();
    this.UIMap.AddTwoNumbers();

    this.UIMap.AssertforAddExpectedValues.TextAnswerEditText = 
        TestContext.DataRow["ExpectedResult"].ToString();
    this.UIMap.AssertforAdd();
} 
```

# c++ - 将 y=x*x 舍入到最近

> ID：15758926
> 
> 赞同：7
> 
> 时间：2013-04-02T07:56:06.263
> 
> 标签：c++, math

将除法的结果四舍五入到最接近的整数[非常简单](https://stackoverflow.com/questions/6135157/rounded-division-by-power-of-2)。但我正在尝试对除法的结果进行四舍五入，以便后续操作将给出最佳近似值。最好用一个简单的函数来解释：

```
const int halfbits = std::numeric_limits<unsigned int>::digits / 2;
unsigned x = foo(); // Likely big.
unsigned x_div = x >> halfbits; // Rounded down
unsigned y = x_div * x_div; // Will fit due to division. 
```

我可以`x_div`通过添加四舍五入到最近`1<<(halfbits-1)`。但由于 x² 不是线性函数，因此 y 通常没有正确舍入。有`(x*x) >> (halfbits*2)`没有不使用更大类型的简单和更准确的计算方法？

我认为添加`3<<(halfbits-3)`到 x_div 可以提高舍入，但不能证明这是最好的解决方案。此外，这可以推广到 xⁿ 吗？

**编辑**：根据大众的要求，我冒昧地用纯算术术语“翻译”这个问题（这些 C 位移都没有......）。
注意：此后的所有除法都是整数除法，例如 13/3 将是 4。
问题：我们无法计算 x^2，因为 x 很大，所以我们想计算 (x^2)/(2^ N)。
为此，我们计算
x_div = x / sqrt(2^N)
然后平方：
y = x_div * x_div

但是，此结果通常缺少 的确切值，`(x^2)/(2^N)`并且 OP 建议添加 0.5 * sqrt(2^N) 或 0.375 * sqrt(2^N) 以更好地近似结果...

正如`Oli Charlesworth`'s answer 所暗示的，有一种更好的方法来获得实际值，将其`x^2`视为 (x_hi + x_lo)^2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T08:12:19.827

而`x_div`截断最多会导致误差幅度为 1，而`x_div*x_div`误差可能高达`1<<(half_digits+2)`.

要了解原因，请考虑我们可以将这个平方表示如下（使用[长乘法](http://en.wikipedia.org/wiki/Long_multiplication#Long_multiplication)）：

```
x * x = (x_lo + x_hi) * (x_lo + x_hi)
      = x_lo^2 + x_hi^2 + 2*x_lo*x_hi 
```

其中`x_lo`和`x_hi`分别是 的下半部分和上半部分`x`。有了一些漂亮的 ASCII 艺术，我们可以考虑这些都是如何排列的：

```
 MSB     :      :      :     LSB
  +------+------+      :      :
  |    x_hi^2   |      :      :
  +-----++-----++-----+:      :
  :     | 2*x_lo*x_hi |:      :
  :     +------++-----++------+
  :      :      |    x_lo^2   |
  :      :      +------+------+
  :<----------->:      :      :
    Our result 
```

正如我们所见，低阶项会影​​响最终结果中的多个位。

但是，这些术语中的每一个都应该适合原始类型而不会溢出。因此，通过适当的移位和掩蔽，我们可以获得所需的结果。

当然，如果你使用更大的类型，编译器/硬件会为你做这一切，所以如果你有选择的话，你应该这样做。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-02T08:08:48.973

将 TYPE int 用于“y”。我想这会解决这个目的。

# jsp - 找不到符号符号：变量 StringUtils

> ID：15758927
> 
> 赞同：0
> 
> 时间：2013-04-02T07:56:06.890
> 
> 标签：jsp, apache-stringutils

我试图在我的 jsp 中打印以下语句。

```
out.println("myBookIdStatus="+StringUtils.isEmpty(obj.getValue(0,"value"))); 
```

即使我已经导入`<%@page import="org.apache.commons.lang.StringUtils"%>`，我也收到以下错误。为什么会这样？？

```
cannot find symbol symbol : variable StringUtils location: class.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:52:59.097

很可能您的类路径中没有该`commons-lang jar`文件，您必须将其添加到您的应用程序中`WEB-INF/lib.`

# json - 可以访问公共 Google 电子表格的人数上限是多少？

> ID：15758930
> 
> 赞同：1
> 
> 时间：2013-04-02T07:56:12.010
> 
> 标签：json, google-sheets, google-docs, google-spreadsheet-api

我正在开发一个使用查询从 Google 电子表格中获取数据的应用程序。

数据采用 JSON 格式。我想知道对于可以发送到**Google 服务器**以从电子表格中获取**JSON**的请求数量是否有任何限制。我的意思**是是否有任何限制，例如每小时或每天 N 个请求**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:39:04.280

从未见过限制并怀疑没有这样的限制，但可能是错误的。

任何关于粗略卷的想法？我有大约 10 人一次使用该服务，它确实放慢了一点，但还可以。

如果有帮助，gdata 样式电子表格 API 大约需要 1 秒/读取和 2-10 秒/写入（大工作表速度较慢）

# android - android：在包'android'中找不到属性'animateLayoutChanges'的资源标识符

> ID：15758932
> 
> 赞同：0
> 
> 时间：2013-04-02T07:56:18.387
> 
> 标签：android, animation

哪个 android 包具有 animateLayoutChanges 属性。我尝试使用 2.3 ,4.1 等，但仍然遇到同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T04:20:09.880

android 3.0以后才支持这个功能，因为这是属性动画。如果要使用此功能，则必须更改 android:minSdkVersion="11"，如果这不起作用，请右键单击项目名称，选择“属性”项，然后将构建目标设为 API 级别 11 ，即android 3.0，应用并保存此配置，然后可以使用animateLayoutChange。

顺便说一句，如果你想在旧的android版本上采用只有android 3.0或更高版本提供的android动画，你可以试试nineOldAndroid项目，它已经实现了旧android版本的动画。

# laravel - Laravel 核心方法混淆

> ID：15758936
> 
> 赞同：4
> 
> 时间：2013-04-02T07:56:34.317
> 
> 标签：laravel, laravel-4

我一直在挖掘 Laravel 的核心，因为我想了解它是如何工作的。但是我想出了一个方法，即使在 3 天后我也无法理解。在 start.php 中，应用程序绑定到自身。到现在为止还挺好。但是当我检查 $app->share 方法时，我迷路了。

```
 public function share(Closure $closure)
{
    return function($container) use ($closure)
    {

        // We'll simply declare a static variable within the Closures and if
        // it has not been set we'll execute the given Closure to resolve
        // the value and return it back to the consumers of the method.
        static $object;
        if (is_null($object))
        {
            $object = $closure($container);
        }

        return $object;
    };
} 
```

此方法返回一个匿名函数，该函数在执行时会返回应用程序的一个实例。我看对了吗？为什么是这样？为什么要返回闭包而不仅仅是实例。这似乎是一种奇怪的方式，但我很确定这是有原因的 ;) ??

**更新** start.php 中的行：

```
$app['app'] = $app->share(function($app) { return $app; }); 
```

所以我认为 $app['app'] 是一个闭包对象。但是，如果我做 get_class 类是 Illuminate\Foundation\Application 。此外，也没有办法执行它，因为 $app'app' 显然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:19:31.290

`$app`不是普通数组，它实际上是`Illuminate\Foundation\Application`[1的一个实例，是](https://github.com/laravel/framework/blob/master/src/Illuminate/Foundation/Application.php "查看源代码")`Illuminate\Container\Container`[2](https://github.com/laravel/framework/blob/master/src/Illuminate/Container/Container.php "查看源代码")的扩展，它实现了`ArrayAccess`. 但是您已经知道这一点，因为这就是`share()`方法所在。

容器将键绑定到闭包，当访问键时，从内存中获取值，或者在第一次访问时，调用绑定的闭包并返回结果值。当一个键被设置在容器上时，它被包裹在一个闭包中，除非它已经是一个闭包。

这为容器提供了一致的内部接口，因此代码不会不断地检查其内容。它也只会将您实际使用的引用加载到内存中 - 人们认为闭包的占用空间比完全加载的类实例的占用空间要轻。但是一旦加载，您将受益于在请求的其余部分使用相同的实例。

*为什么应用程序没有使用`instance()`我不知道的方式在容器上注册 - 也许它会在跟踪和转储输出中产生递归引用。*

# php - 使用 preg_match_all 函数提取图像

> ID：15758940
> 
> 赞同：1
> 
> 时间：2013-04-02T07:56:45.233
> 
> 标签：php, image

我对 preg_match_all 有疑问，这是我的 PHPfile 中的一个函数：

```
function get_images ($content){

  preg_match_all ('#\\[img\\](.+?)\\[/img\\]#ie', $content, $preg_array);
  if (count ($preg_array[1]) != 0){
    foreach ($preg_array[1] as $item){
        if ($this->reset_url($_SERVER['HTTP_HOST'])!=$this->reset_url($item)){
            if (!(in_array ($item, $this->images))){
                $this->images[] = $item;
                continue;
            }
        }
    }
  }
} 
```

使用该代码，我只能从简单的 [img][/img] 标签中提取图像，例如：

```
[img]http://www.domain.com/image.jpg[/img] 
```

我不能使用带有对齐的 img 标签，例如：

```
[img=left]http://www.domain.com/image.jpg[/img] 
```

我如何修复此功能以使用两个图像标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:08:12.237

```
#\[img(:?.*)?\](.*?)\[/img\]# 
```

这将忽略其中的任何内容`[img=foo]`，仅获取源信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:03:24.010

用这个，

```
preg_match_all ('#\\[img.*\\](.+?)\\[/img\\]#ie', $content, $preg_array); 
```

[Codeviper 演示。](http://codepad.viper-7.com/g0eZIv)

# c# - 如何获取应用程序快捷方式的当前目录路径

> ID：15758941
> 
> 赞同：6
> 
> 时间：2013-04-02T07:56:52.080
> 
> 标签：c#, console-application

我想获取当前目录路径，但不是应用程序位置，而是它的快捷方式位置。

我尝试了这些，但它们返回了应用程序的位置。

```
Directory.GetCurrentDirectory();
Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().CodeBase);
Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T05:39:38.110

如果添加 COM 对象引用不成问题，请添加 COM 对象引用 - Windows 脚本宿主对象模型

我在我的桌面文件夹中运行了这段代码，它确实有效。对于当前文件夹使用 - `Environment.CurrentDirectory`

```
using System;
using System.IO;
using IWshRuntimeLibrary;  //COM object -Windows Script Host Object Model

namespace csCon
{
    class Program
    {
        static void Main(string[] args)
        {
            // Folder is set to Desktop 
            string dir = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            var di = new DirectoryInfo(dir);
            FileInfo[] fis = di.GetFiles();
            if (fis.Length > 0)
            {
                foreach (FileInfo fi in fis)
                {
                    if (fi.FullName.EndsWith("lnk"))
                    {
                        IWshShell shell = new WshShell();
                        var lnk = shell.CreateShortcut(fi.FullName) as IWshShortcut;
                        if (lnk != null)
                        {
                            Console.WriteLine("Link name: {0}", lnk.FullName);
                            Console.WriteLine("link target: {0}", lnk.TargetPath);
                            Console.WriteLine("link working: {0}", lnk.WorkingDirectory);
                            Console.WriteLine("description: {0}", lnk.Description);
                        }

                    }
                }
            }
        }
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/hZt8n.png)

来自论坛的代码参考：http: [//www.neowin.net/forum/topic/658928-c%23-resolve-lnk-files/](http://www.neowin.net/forum/topic/658928-c%23-resolve-lnk-files/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T08:07:45.593

根据 MSDN 中的进程 API 参考，`STARTUPINFO`给定进程的进程结构包含有关标题成员中的快捷方式 .lnk 文件的信息。在这种情况下，结构成员中存在一个标志`dwFlags`- 所以它似乎并不总是设置（我猜你是否直接运行 exe）

来自 MSDN：

> STARTF_TITLEISLINKNAME：0x00000800
> 
> lpTitle 成员包含用户调用以启动此进程的快捷方式文件 (.lnk) 的路径。这通常由 shell 在调用指向已启动应用程序的 .lnk 文件时设置。大多数应用程序不需要设置此值。此标志不能与 STARTF_TITLEISAPPID 一起使用。

[参考这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:59:09.217

试试这个：

```
Environment.CurrentDirectory 
```

来自[MSDN](http://msdn.microsoft.com/en-au/library/system.environment.currentdirectory.aspx)：

> 获取或设置当前工作目录的标准路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T05:41:56.610

我认为您将需要使用 COM 并添加对“Microsoft Shell 控制和自动化”的引用，[如此](http://www.saunalahti.fi/janij/blog/2006-12.html#d6d9c7ee-82f9-4781-8594-152efecddae2)博客文章中所述：

这是使用那里提供的代码的示例：

```
namespace Shortcut
{
    using System;
    using System.Diagnostics;
    using System.IO;
    using Shell32;

    class Program
    {
        public static string GetShortcutTargetFile(string shortcutFilename)
        {
            string pathOnly = System.IO.Path.GetDirectoryName(shortcutFilename);
            string filenameOnly = System.IO.Path.GetFileName(shortcutFilename);

            Shell shell = new Shell();
            Folder folder = shell.NameSpace(pathOnly);
            FolderItem folderItem = folder.ParseName(filenameOnly);
            if (folderItem != null)
            {
                Shell32.ShellLinkObject link = (Shell32.ShellLinkObject)folderItem.GetLink;
                return link.Path;
            }

            return string.Empty;
        }

        static void Main(string[] args)
        {
            const string path = @"C:\link to foobar.lnk";
            Console.WriteLine(GetShortcutTargetFile(path));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T21:09:12.960

使用 System.Reflection；

```
 string currentAssemblyDirectoryName = Path.GetDirectoryName(
                                        Assembly.GetExecutingAssembly()
                                                .Location
                                        ); 
```

对于 Web 应用程序，您也可以使用：

网络应用程序：

```
Request.PhysicalApplicationPath 
```

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.physicalapplicationpath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.physicalapplicationpath.aspx)

抓住应用程序路径:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T02:49:18.590

由于创建快捷方式是工作流程的一部分，只需将快捷方式的工作目录设置为“%cd%”，然后在应用程序中使用：

```
Environment.CurrentDirectory 
```

显然，您希望在应用调用的任何代码更改它之前捕获此值。

使用 Windows 资源管理器创建快捷方式时，您没有设置工作目录的选项。因此，在创建它之后，通过右键单击它并选择属性来打开它的属性页，然后将**Start in**字段设置为`%cd%`。创建此类快捷方式后，您可以将其移动或复制到您希望应用程序运行的文件夹中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-15T08:13:14.870

# 如果您不想按照其他答案中的建议使用 COM 对象

您可以将文件作为常规文本文件打开，在`\x00`0 字符上拆分，然后检查生成的字符串数组。其中之一显然是链接目标：类似于`"C:\path\to\file"`UNC 的情况`"\\computers\path\to\file"`。

```
string lnkFilePath  "...";

var file = System.IO.File.ReadAllText(lnkFilePath);
var contents = Regex.Split(file, "[\x00]+");
var paths = contents.Where(line => Regex.IsMatch(line, @"^([A-Z]:\\|^\\\\)\S+.*?")); 
```

# web - 与所有智能手机兼容的 vCard

> ID：15758942
> 
> 赞同：0
> 
> 时间：2013-04-02T07:56:52.360
> 
> 标签：web, smartphone, vcf-vcard

我有一个网站，用户可以在其中下载每个代表联系人的 vCard。

在台式机上效果很好，但不适用于（所有）智能手机。

有没有办法让 vCard 兼容所有主要的智能手机操作系统？

提前致谢。

最好的，马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:56:42.397

vCard 的版本可能会影响其跨平台兼容性。尝试将 vCard 编码为 2.1 版。这是最旧的版本，因此它可能是最广泛兼容的。

# android - 如何从url android将图像设置为透明

> ID：15758943
> 
> 赞同：0
> 
> 时间：2013-04-02T07:56:57.950
> 
> 标签：android, url, android-imageview, transparent

我正在根据**天气**创建应用程序。我正在使用这个[免费的 API](http://www.worldweatheronline.com/free-weather-feed.aspx)。

这是我的[JSON URL](http://free.worldweatheronline.com/feed/weather.ashx?q=ahmedabad&format=json&num_of_days=5&key=576099ad5f100306131103)。

现在，当从中获取图像`weatherIconUrl`时，请参见此处[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png](http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png)，我想在将其设置为之前使其透明`imageview`。

我试过像...

```
 1\. android:background="@null"
 2\.  android:background="@android:color/transparent" 
```

总之`how to set image as transparent after decode from the url`。请给出一些想法。

谢谢。

# c# - MVC 框架中的触发事件

> ID：15758957
> 
> 赞同：2
> 
> 时间：2013-04-02T07:57:51.383
> 
> 标签：c#, asp.net, asp.net-mvc-3

如您所知，在 WebForm 中触发事件非常容易，但在 MVC 框架中是一个问题。例如，我有 2 个 DropDownList`Country`和`State`. 我想`State`根据 selected加载数据`Country`。在WebForm中，我可以触发`SelectedIndexChange`事件，但是在MVC Framework中，我应该怎么做呢？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T07:59:03.233

> 在 WebForm 中可以触发 SelectedIndexChange 事件，但是在 MVC Framework 中，我应该怎么做呢？

您可以使用 javascript 并订阅[`onchange`](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)下拉菜单的 javascript 事件。

例如，如果您使用 jQuery：

```
<script type="text/javascript">
    $(function() {
        $('#id_of_your_drop_down').on('change', function() {
            // the value of the dropdown changed. Here you could do whatever
            // you intended to do. For example you could send the selected value
            // to a controller action using an AJAX call.
            var selectedValue = $(this).val();
            var url = '@Url.Action("SomeAction")';
            $.post(url, { value: selectedValue }, function(result) {
                // The AJAX request completed successfully. Here you could
                // do something with the results returned by the server
            });
        });
    });
</script> 
```

# javascript - jQuery 数组验证

> ID：15758959
> 
> 赞同：0
> 
> 时间：2013-04-02T07:58:02.067
> 
> 标签：javascript

有什么方法可以接受 10 到 50 的数字以及“AB”和“NF”-

以下代码接受 0 到任何数字以及“AB”和“NF”

```
 <script>
        $.validator.addMethod("custom_number", function(value, element) {
            return this.optional(element) || value == "AB" || value == "NF" || 
                value.match(/^[0-9,\+-]+$/);
        }, "Please enter a valid number, or 'AB'");

        $(document).ready(function(){
            $("#form").validate({
                rules: {
                    'hd[]': {
                        required: false,
                        custom_number: true   
                    }
                }
            });
        });
    </script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:16:04.777

您可以使用`<`和`>`：

```
this.optional(element) || value == "AB" || value == "NF" || 
            || (value < 50 && value > 10); 
```

或在正则表达式中：

```
this.optional(element) || value.match(/^[1-5][0-9]|AB|NF$/); 
```

`[1-5][0-9]|AB|NF`表示：匹配`[1-5][0-9]`(10 - 50) OR `AB`OR `NF`。`^...$`确保正则表达式仅在匹配之前或之后没有其他字符时匹配（例如`fooNFbar`）

# symfony-1.4 - 如何在 symfony 1.4 中更改过滤器标签？

> ID：15758960
> 
> 赞同：1
> 
> 时间：2013-04-02T07:58:11.223
> 
> 标签：symfony-1.4, filtering

如何在 symfony 1.4 中更改过滤器标签？我的 generator.yml 有以下内容

```
filter:  
    display: [node_sub_type, organo_node_id, organo_position_id, employee_id] 
```

因此，它在菜单中显示“节点子类型”。但我想重命名为“部门”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:04:48.067

您可以添加一个名为`fields`inside的条目`filter`，以强制标签仅用于过滤器。

```
filter:
  fields:
    node_sub_type: { label: Node subtype }
    organo_node_id: { label: Organo Node }
  display: [node_sub_type, organo_node_id, organo_position_id, employee_id] 
```

如果您希望它们是全局的（在过滤器、表单、列表中），您可以全局添加它：

```
config:
  fields:
    node_sub_type: { label: Node subtype }
    organo_node_id: { label: Organo Node } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:49:41.977

哈桑，只是为了增加您的知识，您还可以在 _filters.php 中单独呈现过滤器表单字段，并随意放置标签。或者，您也可以在该模型的表单过滤器中分配标签字段。

例如 $this->widgetSchema->setLabel('node_sub_type', 'Department'); $this->widgetSchema->setLabel('organo_node_id', 'ISD');

# android - 使用 if else 条件更改 textView 颜色

> ID：15758963
> 
> 赞同：-1
> 
> 时间：2013-04-02T07:58:24.897
> 
> 标签：android

```
ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.recentlist,
                new String[] { CAT, DATE, TID, AMO, DEB,CUR,BAL,FEES}, new int[] {
                R.id.textView1,R.id.textView2, R.id.textView3, R.id.textView4,R.id.textView5,R.id.textView7,R.id.textView6,R.id.textView8});

        DEB.setTextColor(Color.RED);

        setListAdapter(adapter); 
```

我想为 DEB 或 textView5 设置颜色。但我收到了这个错误。

对于 String 类型，方法 setTextColor(int) 未定义

我也尝试过使用

```
 R.id.textView5.setTextColor(Color.RED) 
```

但是这个错误来了

无法在原始类型 int 上调用 setTextColor(int)

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:00:39.033

至于您的第二次尝试，`R.id.textView5`是对您的`TextView`. 要获取对象本身，请使用`findViewById`方法：

```
((TextView)findViewById(R.id.textView5)).setTextColor(Color.RED); 
```

（假设`R.id.textView5`确实是 的一个实例`TextView`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:02:45.543

你必须创建 textview 对象

尝试这个

```
TextView textView5 = (TextView)findViewById(R.id.textView5);

textView5.setTextColor(getResources().getColor(R.color.red)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:01:47.107

使用以下代码。

```
TextView textView5 = (TextView)findViewById(R.id.textView5);

textView5.setTextColor(R.color.RED); 
```

# c# - 对象共享和动态实例创建

> ID：15758968
> 
> 赞同：0
> 
> 时间：2013-04-02T07:58:50.217
> 
> 标签：c#

我有一个由我的同事继承的业务逻辑操作的基类。此类公开一个需要`objectContext`as 参数的构造函数。您可以将此基类视为原子 CRUD 操作的组件（其所有选择、插入、编辑和删除方法将始终只作用于一个实体）。

然后，我有一个“超类”，其主要目的是`objectContext`在所有上述基类之间共享，以便执行某些业务事务，并且如果需要，它还必须提供任何`baseClass`实例。

所以，我正在寻找一种优雅的方式将超类“注入”`objectContext`到`baseclass`：

```
public BaseClass<T> where T : entity
{
    private ObjectContext _ctx;
    public BaseClass(ObjectContext ctx){ _ctx = ctx;}
    public virtual IList<T> Select(){..}
    public cirtual voind Insert(T entity){..}
    // other stuff 
}

public class SuperClass
{
    private ObjectContext _ctx = new...
    public BaseClass<TEntity> LoadBaseClass(TBase, TEntity) where TBase : BaseClass<TEntity>, where TEntity : class
    {
        BaseClass<TEntity> obj = Activator.CreateInstance(typeof(TBase), _ctx); // share objectContext
    }
    public int SaveAll(){return _ctx.SaveChanges();}
} 
```

如您所见，我的超类能够`baseClass`通过其类型返回一些实例，这正是我想要的。但是，如果某个继承的类使用其他参数定义了自己的构造函数，我的`LoadBaseClass`方法将失败。

我会找到一个干净的解决方案，以避免在从`LoadBaseClass`方法创建实例期间出现任何错误的可能性。我知道的唯一方法是定义一个私有构造函数，但是通过这种方式，没有人能够再继承`baseclass`了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:11:47.143

您正在寻找的是所谓的[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。您现在正在尝试手动构建它，但是已经有很多工具可以满足您的需求。

依赖注入是关于构造对象和配置这些对象的创建方式和时间。它归结为将对象创建从您的业务逻辑中分离出来。

在您的情况下，您正在使用称为[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)和[存储库](http://martinfowler.com/eaaCatalog/repository.html)模式的东西。使用像[Ninject](http://www.ninject.org/)这样的依赖注入容器，您可以轻松地将您的配置`UnitOfWork`为在所有存储库之间共享，如下所示：

```
var kernel = new StandardKernel();
kernel.Bind<IMyRepository>().To<ConcreteRepository();
kernel.Bind<IMyUnitOfWork>().To<ObjectContextImp>().InRequestScope();

IMyRepository repos = kernel.Get<IMyRepository>(); 
```

Ninject（或任何 DI 工具）会尝试构建一个`IMyRepository`. 您已将其配置为查找`ConcreteRepository`. 然后它注意到它的构造函数中`ConcreteRepository`接受了 a 。`IMyUnitOfWork`在这种情况下，您已将其映射到您的`ObjectContextIml`并添加了`InRequestScope`选项。

`InRequestScope`适用于 ASP.NET Web 应用程序，这意味着您的上下文应该为每个请求创建一次。Ninject 有几个不同的[对象作用域](https://github.com/ninject/ninject/wiki/Object-Scopes)，你可以使用它们来配置你的对象应该如何被创建和共享。

这样，您就可以完全控制对象的创建方式。

# php - 令牌无效 - YouTube API 中出现错误 401

> ID：15758970
> 
> 赞同：2
> 
> 时间：2013-04-02T07:59:03.523
> 
> 标签：php, api, youtube, google-api, youtube-api

我正在使用 youtube api 发送消息。但我的文件出现错误。它显示无效的令牌 401 错误。我的文件如下所示。我很确定我一定遗漏了一些重要但小到不会注意到的东西。

```
 <?php
$ch = curl_init();  

curl_setopt($ch, CURLOPT_URL, "https://www.google.com/accounts/ClientLogin");  
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);  

$data = array('accountType' => 'GOOGLE',  
'Email' => 'User Email',  
'Passwd' => 'pass',  
'source'=>'PHI-cUrl-Example',  
'service'=>'lh2');  

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);  
curl_setopt($ch, CURLOPT_POST, true);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);  
  $kk = curl_getinfo($ch);
$response = curl_exec($ch);  

list($auth, $youtubeuser) = explode("\n", $response);
list($authlabel, $authvalue) = array_map("trim", explode("=", $auth));
list($youtubeuserlabel, $youtubeuservalue) = array_map("trim", explode("=", $youtubeuser));

$developer_key = 'AI39si7SavL5-RUoR0kvGjd0h4mx9kH3ii6f39hcAFs3O1Gf15E_3YbGh-vTnL6mLFKmSmNJXOWcNxauP-0Zw41obCDrcGoZVw';
$token = '7zWKm-LZWm4'; //The user's authentication token
$url = "http://gdata.youtube.com/feeds/api/users/worshipuk/inbox" ; //The URL I need to send the POST request to
$title = $_REQUEST['title']; //The title of the caption track
$lang = $_REQUEST['lang']; //The languageof the caption track
$transcript = $_REQUEST['transcript']; //The caption file data
$headers = array(
     'Host: gdata.youtube.com',
    'Content-Type: application/atom+xml',
    'Content-Language: ' . $lang,
    'Slug: ' . rawurlencode($title),
    'Authorization: GoogleLogin auth='.$authvalue,  
    'GData-Version: 2',
    'X-GData-Key: key=' . $developer_key
);

$xml = '<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"
    xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <id>Qm6znjThL2Y</id>
  <summary>sending a message from the api</summary>
</entry>';
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $url );
curl_setopt($ch, CURLOPT_HEADER, TRUE );
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers );
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, urlencode($xml) );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1 );

$tt = curl_getinfo($ch);
print_r($tt);

$result = curl_exec($ch);
print_r($result);
exit;

// close cURL resource, and free up system resources
curl_close($ch);
?> 
```

我的代码有什么问题吗？请指导我。如何从此代码中获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:38:25.217

很可能您的身份验证是错误的，请先调试该部分。您没有使用正确的范围，或者您的控制台未启用该 API。

另外，我强烈建议为此使用[Youtube Data API v3](https://developers.google.com/youtube/v3/)。我们更新了[PHP 客户端库](https://code.google.com/p/google-api-php-client/)和[出色的示例](https://code.google.com/p/youtube-api-samples)来帮助您入门。

# arrays - 粘贴数组值并正常粘贴

> ID：15758971
> 
> 赞同：0
> 
> 时间：2013-04-02T07:59:05.103
> 
> 标签：arrays, vba, excel, paste

我今天遇到了这个 VBA 程序的问题，它已经运行了几天，现在它开始发臭了。我没有更改任何我知道会导致此问题的内容，因为它是一个简单的复制和粘贴，并且只是将单元格值设置为数组的值。我玩过它并寻找答案，但似乎无法解决它。

```
Worksheets(1).Select
For i = 1 To N
    Worksheets(1).Cells(3 + i, 1).Value = Current(i)
Next i

For h = 1 To holidays
    Worksheets(h).Select
    Range(Worksheets(h).Cells(4, 6), Worksheets(h).Cells(4 + N, 100)).Select
    Selection.Copy
    Worksheets("Sort Sheet").Select
    Cells(1, 1).Select
    Selection.PasteSpecial
    For f = 1 To N
        For i = 1 To N
        If Position(i) = f Then

            Range(Worksheets("Sort Sheet").Cells(f, 1), Worksheets("Sort Sheet").Cells(f, 100)).Select
            Selection.Copy
            Worksheets(h).Select
            ActiveSheet.Cells(i + 3, 6).Select
            ActiveSheet.PasteSpecial
            Application.CutCopyMode = False

        End If
        Next i
    Next f
Next h
End Sub 
```

存在错误的第一行是 ActiveSheet.PasteSpecial，我尝试过普通的 paste 和 pastespecial，粘贴整行和定义的范围。但似乎没有什么可以让它发挥作用。

有错误的第二行是 Worksheets(1).Cells(3 + i, 1).Value = Current(i)，这一直工作到今天，所以我不明白为什么它停止了，current(i)是一个一维数组值，它是一个名称，例如“TONY BUGGENS”。

整个程序是一个排序程序，因此它对数组中的名称进行排序，然后将它们粘贴到电子表格中的原始名称上。

感谢你们的帮助，我相信我可能忽略了一些简单的事情。这是一个清晨。

干杯，艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:39:24.613

不要使用 Activesheet，而是使用以下样式命名您的工作表：

```
Thisworkbook.Sheets("Sheetname") 
```

Activesheet 最终可能会导致错误。
此外，不要复制粘贴，而是以这种样式分配值：

```
Thisworkbook.Sheet("Destination").range("A1:B2").Value = Thisworkbook.Sheet("Source").range("A1:B2").Value 
```

确保源和目标范围始终具有相同的大小。
当然，可以按照您的方式使用单元格。

至于第二个错误，你能做的最好的就是利用 VBA“本地窗口”，它会显示你的本地变量。您的代码未显示数组中填充的内容，但您可以在 Locals 窗口中验证它。您还可以使用：

```
debug.print current(i) 
```

验证数组包含的内容。如果数组包含无法分配的值或对象，则需要验证分配给数组的内容

```
current(i) = <???> 
```

让我知道它是否解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:23:52.350

问题是工作表具有内置的宏，只要工作表中的任何内容发生更改，这些宏就会运行。这发生在我的程序中，我相信它正在清除我的剪贴板并使其尝试粘贴任何内容。

第二个问题是由于程序自动保护自身。

整个电子表格是一团糟，因为程序员显然做得不好，我已经把它整理出来了。

感谢您的所有帮助，我可能很快会再次需要它。

# jquery - 使用 JQuery 动画 div 的文本内容

> ID：15758972
> 
> 赞同：1
> 
> 时间：2013-04-02T07:59:08.523
> 
> 标签：jquery, jquery-animate

有谁知道如何使用 JQuery 函数 animate() 为 div 的内容设置动画？对整个 div 进行动画处理很简单，但我需要在默认位置设置 div 并仅对他的文本内容进行动画处理（SlideUp 或 FadeIn 效果不相关）。
我在 nivo 滑块中使用它来显示每个图像 div，其标题 div 仍然在同一位置，但内容更改为新图像的标题，我需要

1.  显示 div
2.  显示具有某种效果的内容（标题）。

这是 JQuery 的一般问题，将其应用于 nivo 滑块与在其他情况下应用相同，因此我不为 Nivo 滑块使用标签。
之前有人写过“使用 div 中包含的新 div 作为标题，您可以在其中添加图像标题并为这个新 div 设置动画。” 那么我的意思是这不是一个好的解决方案，因为我必须更改脚本并创建新的无用 div。

> nivoCaption.html(标题);

“nivoCaption”是 div 容器；“标题”是标题变量，其中我有实际图像的实际标题，我只需要动画标题而不是整个 nivoCaption （我尝试 - nivoCaption.html(title).animate({right: "100px",}, 750); 但这测试动画整个容器）

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:06:51.060

您可以将文本放在一个跨度中，然后在 jQuery 中使用它的选择器。例如：

```
<div>
  <span id="mySpan">some text</span>
</div> 
```

jQuery：

```
$(document).ready(function(){
  $("#mySpan").fadeTo(0,0);
  $("#mySpan").fadeTo("slow",1);
}); 
```

示例：http: [//jsfiddle.net/wy4wd/](http://jsfiddle.net/wy4wd/)

请享用！:)

# haskell - 模型和 GUI IO (Wx) 的分离状态：堆栈还是 FRP？

> ID：15758975
> 
> 赞同：2
> 
> 时间：2013-04-02T07:59:13.660
> 
> 标签：haskell, monads, state-monad, wxhaskell, reactive-banana

对于我的图表工具，我想保持核心模型的代码与 GUI 隔离。

在下面的示例中，“状态”是用 传递的`vDiag`，它是一个`Tvar`。这是 wx 中的设计决策。现在，对于我的图表工具，我希望将核心模型“存储”在一个`fgl`图表中（其中包含复杂类型），并且`wx`只给出一个视图；比如说在这个例子中，绘画时读取访问的点列表，以及单击、拖动等时要写入的一些功能......。我首先想到了一些 Monad 堆栈，但即使将 StateT 和来自 wx 的 IO 组合起来看起来也并不简单，因为 io 动作遍布在回调的代码中（点击、绘画等）。感觉就像在堆栈底部有 IO 不再适合了。

那么你如何传递一个状态，或者它不是要走的路？（我直觉这是经典。RFP 是这样开始的吗？）

（在代码中，当点击时绘制红色圆圈，点列表在 a 中传递`Tvar` `vDiag`。我在等效状态访问器所在的位置标记了“--fgl”。并设置了一个基本的 fgl 测试图访问器说明。我想提出一个状态）（我最初试图在没有 FRP 的情况下试一试 - 反应香蕉，以了解问题，但我想我可能已经成功了 ;-)

```
module Main where

import Graphics.UI.WX hiding (empty)
import Data.Graph.Inductive

main
  = start ballsFrame 

ballsFrame
  = do 

  vDiag  <- varCreate [] 
  --gDiag  <- initg -- fgl
  frame  <- frame    [text := "Demo"]
  p <- panel frame []
  file   <- menuPane [text := "&File"]
  quit   <- menuQuit file [on command := close frame]

  set frame [text:= "testing", menuBar := [file] ]
  set p [on click := drawBins vDiag p , on paint := paintDiag vDiag ] 
                -- fgl pass the var around
  return ()  
    where
    drawBins  d ppanel pt = 
                do varUpdate d  (pt:) 
                    -- addpoint f g -- fgl : insert a point
                   repaint ppanel

    -- paint the balls
    paintDiag vdiag dc view
      = do  balls <- varGet vdiag  -- getPointsFromGraph 
        -- fgl : change to get the list of points
            set dc [brushColor := red, brushKind := BrushSolid] 
            mapM_ (drawDiag dc)  balls

    drawDiag dc pt
      = circle dc pt 10 []

-- basic fgl test graph accessors  I would like to put in a State and replace vDiag

initg:: Gr Point  String
initg = mkGraph [(1,pt 10 10),(2,pt 30 30)] [(1,2,"truc"), (2,1,"revtruc")]

getPointsFromGraph :: Graph gr => gr b b1 -> [b]
getPointsFromGraph g = map snd $ labNodes g
-- getPointsFromGraph initg = [Point {pointX = 10, pointY = 10},Point {pointX = 30, pointY = 30}]

addpoint :: DynGraph gr => a -> gr a b -> gr a b
addpoint p g = -- add a point p into graph p
               insNode (4,p) g 
```

# ios - 将 `UIImageView` 设置为在自定义 UITableViewCell 上不突出显示

> ID：15758978
> 
> 赞同：1
> 
> 时间：2013-04-02T07:59:40.673
> 
> 标签：ios, objective-c, uitableview

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我有`UITableView`一个自定义`UITableViewCell`：

```
@interface FavouriteCell : UITableViewCell

@property (unsafe_unretained, nonatomic) IBOutlet UIImageView *selectIcon;
@property (unsafe_unretained, nonatomic) IBOutlet UILabel *favName;

@property (nonatomic) BOOL checked;

+ (NSString *)reuseIdentifier;

@end 
```

在`selectIcon`我设置两个正常和突出显示的图像。当我这样做`cell.checked = !selected;`时，`tableView:didSelectRowAtIndexPath:`它工作得很好。

但是当我尝试重置每个选定的单元格时`clearSelectedFavourites:`，它不起作用。

```
@interface FavViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, NSFetchedResultsControllerDelegate, UIAlertViewDelegate>
{
@private
    NSMutableArray* _favsSelected;
    BOOL* _isOnEditingMode;
}

// ######### FavViewController implementation ##############

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        self.title = NSLocalizedString(@"Favoritos", @"Favoritos");
        self.tabBarItem.image = [UIImage imageNamed:@"fav"];

        _favsSelected = [[NSMutableArray alloc] init];
        _isOnEditingMode = NO;

    }
    return self;
}

- (UITableViewCell* )tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"cellForRowAtIndexPath");
    static NSString* CellIdentifier = @"FavCell";

    FavouriteCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"FavouriteCell" owner:self options:nil];
        cell = _favCell;
        self.favCell = nil;
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.favName.font = [UIFont systemFontOfSize:15.0f];

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

#pragma mark - UITableViewDelegate methods
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"didSelectRowAtIndexPath: %@", indexPath);

    if (tableView.isEditing)
    {
        BOOL selected = NO;

        if ((_favsSelected != nil) && ([_favsSelected count] > 0))
            selected = ([_favsSelected indexOfObject:indexPath] != NSNotFound);

        FavouriteCell* cell =
            (FavouriteCell*)[tableView cellForRowAtIndexPath:indexPath];

        NSLog(cell.checked ? @"Yes" : @"No");
        cell.checked = !selected;

        if (selected)
            [_favsSelected removeObject:indexPath];
        else
            [_favsSelected addObject:indexPath];
    }
}

- (IBAction)editFavList:(id)sender
{
  NSLog(@"edit button clicked!");
    if ([_favList isEditing])
    {
        [self clearSelectedFavourites];
        [_favList setEditing:NO animated:YES];
        [_editButton setImage:[UIImage imageNamed:@"ButtonEdit.png"] forState:UIControlStateNormal];
    }
    else
    {
        [_favList setEditing:YES animated:YES];
        [_editButton setImage:[UIImage imageNamed:@"done_button.png"] forState:UIControlStateNormal];
    }
}

- (void)clearSelectedFavourites
{
    for(int index = 0; index < [_favsSelected count]; index++)
    {
        NSIndexPath* indexPath = (NSIndexPath*)[_favsSelected objectAtIndex:index];

        FavouriteCell* cell = (FavouriteCell*)[self tableView:_favList cellForRowAtIndexPath:indexPath];
        cell.checked = NO;
    }

    [_favsSelected removeAllObjects];
}

- (void)configureCell:(FavouriteCell *)cell
          atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = nil;

    object = [self.favListFetchedResultsController objectAtIndexPath:indexPath];

    cell.favName.text = [[object valueForKey:@"name"] description];
} 
```

**你知道为什么吗？**

我试图设置`selectIcon`为不手动突出显示，但它不起作用，如果我做了最新的测试，那代码。

我也对此进行了测试：`[cell setHighlighted:NO];`on`clearSelectedFavourites:`并且它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:40:29.170

您没有向我们展示您的自定义`[self configureCell:cell atIndexPath:indexPath];`功能，所以我不知道发生了什么。

但是首先有几件事：

TableView 上的单元格正在被重用。因此，您每次都需要为每个单元格设置单元格选择状态。

同样在您的`clearSelectedFavourites`功能上，您将获得对所有选定单元格的引用，然后清除它们的选择，这是没有意义的，因为这些单元格将被重用。

您只需要遍历可见`UITableView`单元格并更改它们的选择状态，然后清除您的 _favsSelected 数组...

```
- (void)clearSelectedFavourites
{

    NSArray *cells = [self.tableView visibleCells];
    for (FavouriteCell *cell in cells)
    {
        cell.checked = NO;
        //might not be needed, or might be needed
        [cell setNeedsDisplay];
    }

    [_favsSelected removeAllObjects];
} 
```

最后，在您的`configureCell`功能上，您应该根据您的数组条目检查是否应该检查单元格，`_favsSelected`然后选择它。

**编辑**

在您的`configureCell`函数中，您应该检查是否需要检查单元格：

```
- (void)configureCell:(FavouriteCell *)cell
          atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = nil;

    object = [self.favListFetchedResultsController objectAtIndexPath:indexPath];

    cell.favName.text = [[object valueForKey:@"name"] description];
    cell.checked = [_favsSelected containsObject:indexPath];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:46:10.947

你可以这样做：

```
[tbl beginUpdates]; 
```

/* 用动画调用你的方法 */

```
[tbl endUpdates];

[tbl reloadData]; 
```

# java - Android 服务需要始终运行（从不暂停或停止）

> ID：15758980
> 
> 赞同：72
> 
> 时间：2013-04-02T07:59:43.700
> 
> 标签：java, android, service

我创建了一项服务，并希望始终运行此服务，直到我的手机重新启动或强制关闭。该服务应在后台运行。

创建服务和启动服务的示例代码：

**启动服务：**

```
Intent service = new Intent(getApplicationContext(), MyService.class);
getApplicationContext().startService(service); 
```

**服务：**

```
public class MyService extends Service {

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO do something useful
        HFLAG = true;
        //smsHandler.sendEmptyMessageDelayed(DISPLAY_DATA, 1000);
        return Service.START_NOT_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO for communication return IBinder implementation
        return null;
    }
} 
```

**清单声明：**

```
<service
    android:name=".MyService"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
</service> 
```

是否可以在应用程序暂停和其他任何情况下始终运行此服务。一段时间后，我的应用程序暂停，服务也暂停或停止。那么我如何才能始终在后台运行此服务。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-02T23:00:54.373

“是否可以在应用程序暂停和其他任何情况下始终运行此服务？”

是的。

1.  在服务的 onStartCommand 方法中返回 START_STICKY。

    ```
    public int onStartCommand(Intent intent, int flags, int startId) {
            return START_STICKY;
    } 
    ```

2.  使用 startService(MyService) 在后台启动服务，这样无论绑定客户端的数量如何，它都始终保持活动状态。

    ```
    Intent intent = new Intent(this, PowerMeterService.class);
    startService(intent); 
    ```

3.  创建活页夹。

    ```
    public class MyBinder extends Binder {
            public MyService getService() {
                    return MyService.this;
            }
    } 
    ```

4.  定义服务连接。

    ```
    private ServiceConnection m_serviceConnection = new ServiceConnection() {
            public void onServiceConnected(ComponentName className, IBinder service) {
                    m_service = ((MyService.MyBinder)service).getService();
            }

            public void onServiceDisconnected(ComponentName className) {
                    m_service = null;
            }
    }; 
    ```

5.  使用 bindService 绑定到服务。

    ```
     Intent intent = new Intent(this, MyService.class);
            bindService(intent, m_serviceConnection, BIND_AUTO_CREATE); 
    ```

6.  对于您的服务，您可能希望在关闭后启动相应活动的通知。

    ```
    private void addNotification() {
            // create the notification
            Notification.Builder m_notificationBuilder = new Notification.Builder(this)
                    .setContentTitle(getText(R.string.service_name))
                    .setContentText(getResources().getText(R.string.service_status_monitor))
                    .setSmallIcon(R.drawable.notification_small_icon);

            // create the pending intent and add to the notification
            Intent intent = new Intent(this, MyService.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
            m_notificationBuilder.setContentIntent(pendingIntent);

            // send the notification
            m_notificationManager.notify(NOTIFICATION_ID, m_notificationBuilder.build());
    } 
    ```

7.  您需要修改清单以在单顶模式下启动活动。

    ```
     android:launchMode="singleTop" 
    ```

8.  请注意，如果系统需要资源并且您的服务不是很活跃，它可能会被终止。如果这是不可接受的，则使用 startForeground 将服务带到前台。

    ```
     startForeground(NOTIFICATION_ID, m_notificationBuilder.build()); 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T08:22:22.343

为了在自己的进程中启动服务，您必须在 xml 声明中指定以下内容。

```
<service
  android:name="WordService"
  android:process=":my_process" 
  android:icon="@drawable/icon"
  android:label="@string/service_name"
  >
</service> 
```

在这里你可以找到一个对我非常有用的好教程

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-20T04:45:07.700

如果您已经有一项服务并希望它一直工作，您需要添加 2 件事：

1.  在服务本身：

    ```
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    } 
    ```

2.  在清单中：

    ```
    android:launchMode="singleTop" 
    ```

除非您在服务中需要它，否则无需添加绑定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-15T16:05:28.287

一个简单的解决方案是在系统停止服务时重新启动服务。

我发现这个方法的这个非常简单的实现：

[如何使android服务不可阻挡](http://androidtrainningcenter.blogspot.it/2013/05/how-to-make-android-service-unstoppable.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T08:25:01.500

您可以`startForeground`为该服务实施，即使它死了，您也可以使用`START_STICKY`on重新启动它`startCommand()`。不确定这是不是正确的实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T07:35:26.270

我找到了一种简单而清晰的方法来保持`Service`始终运行。

这家伙解释得很清楚，并且使用了一个很好的算法。他的方法是在服务即将被杀死时发送一个广播，然后使用它来重新启动服务。

你应该看看： http: [//fabcirablog.weebly.com/blog/creating-a-never-ending-background-service-in-android](http://fabcirablog.weebly.com/blog/creating-a-never-ending-background-service-in-android)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-27T09:06:47.833

您不需要广播接收器。如果有人愿意从 Stephen Donecker 的上述示例中复制一个 api(serviceconnection) 并将其粘贴到谷歌中，你会得到这个，[https: //www.concretepage.com/android/android-local-bound-service-带有绑定器和服务连接的示例](https://www.concretepage.com/android/android-local-bound-service-example-with-binder-and-serviceconnection)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-12-05T11:13:02.453

将此添加到清单中。

```
 <service
        android:name=".YourServiceName"
        android:enabled="true"
        android:exported="false" /> 
```

添加服务类。

```
public class YourServiceName extends Service {

    @Override
    public void onCreate() {
        super.onCreate();

      // Timer task makes your service will repeat after every 20 Sec.
       TimerTask doAsynchronousTask = new TimerTask() {
            @Override
            public void run() {
                handler.post(new Runnable() {
                    public void run() {
                       // Add your code here.

                     }

               });
            }
        };
  //Starts after 20 sec and will repeat on every 20 sec of time interval.
        timer.schedule(doAsynchronousTask, 20000,20000);  // 20 sec timer 
                              (enter your own time)
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO do something useful

      return START_STICKY;
    }

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-04-03T10:19:47.300

我已经克服了这个问题，我的示例代码如下。

在您的 Main Activity 中添加以下行，这里 BackGroundClass 是服务类。您可以在**New -> JavaClass**中创建此类（在此类中，添加您需要在后台发生的进程（任务））。为方便起见，先用通知铃声表示它们作为后台进程。

```
 startService(new Intent(this, BackGroundClass .class)); 
```

在 BackGroundClass 中，只需包含我的编码，您就可以看到结果。

```
import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.provider.Settings;
import android.support.annotation.Nullable;
import android.widget.Toast;

public class BackgroundService  extends Service {
    private MediaPlayer player;
    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
     player = MediaPlayer.create(this,Settings.System.DEFAULT_RINGTONE_URI);
        player.setLooping(true);
         player.start();
        return START_STICKY;
    }
 @Override
    public void onDestroy() {
        super.onDestroy();
         player.stop();
    }
} 
```

在 AndroidManifest.xml 中，尝试添加这个。

```
<service android:name=".BackgroundService"/> 
```

运行程序，只需打开应用程序，您可能会在后台找到通知警报。甚至，您可能会退出应用程序，但您仍然可能会听到铃声警报，除非您关闭应用程序或卸载应用程序。这表示通知警报处于后台进程。像这样，您可以为背景添加一些进程。

**请注意：**请不要使用 TOAST 进行验证，因为它只会运行一次，即使它处于后台进程。

希望它会有所帮助......！

# sql-server - 统计数据库总数

> ID：15758981
> 
> 赞同：17
> 
> 时间：2013-04-02T07:59:48.580
> 
> 标签：sql-server

我在拥有大量数据库的 SQL 服务器中工作。我想计算数据库的数量。有什么要计算的查询吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T08:03:07.583

```
SELECT * FROM sys.databases 

OR

SELECT COUNT(*) FROM sys.databases 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:02:22.407

你可以试试这个

```
SELECT Count(*) as DatabaseCount FROM master..sysdatabases 
```

或者

```
SELECT count(*) as DatabaseCount FROM master.sys.databases 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:02:49.137

尝试`select COUNT(*) from sysdatabases`或`select COUNT(*) from sys.databases`

从源编辑：[http ://www.sqlservercentral.com/Forums/Topic401516-463-1.aspx#bm816566](http://www.sqlservercentral.com/Forums/Topic401516-463-1.aspx#bm816566)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T08:03:23.140

```
SELECT count(1) FROM sys.databases 
```

这是您可以用来计算数据库数量的方法，请查看[此](http://thwack.solarwinds.com/thread/30652)链接以获取更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T08:08:44.497

如果您只想知道计数，请检查 -

```
select COUNT(*) from sys.databases 
```

检查`select * from sysdatabases`2000 和 2005 服务器

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-28T08:19:23.940

SELECT COUNT(*) FROM sys.databases where database_id not in (1,2,3,4).. 不包括系统数据库

# iphone - 如何从自定义单元格 iphone 中的 textView 获取文本

> ID：15758984
> 
> 赞同：3
> 
> 时间：2013-04-02T07:59:49.877
> 
> 标签：iphone, ios, textview, custom-cell

我有一个带有自定义单元格的表格视图。在我的自定义单元格上，我有一个标签和 textView，我想从 textView 获取数据以保存在反馈按钮中。当我在我的数据数组中添加 txtView 时，我得到了两次自定义单元格。如何消除此问题

```
- (void)textViewDidEndEditing:(UITextView *)textView
{
    FeedbackQuestionDC *feedBack = [dataArray objectAtIndex:textView.tag];
    feedBack.FeedbackQuestionDC_Answers=textView.text;
    [dataArray addObject:feedBack];
    [myTableView reloadData];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *simpleTableIdentifier = @"Feed Back";

    feedBackCC *cell = (feedBackCC *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil) {
        UIViewController *c = [[UIViewController alloc] initWithNibName:@"feedBackCC" bundle:nil];
        cell = (feedBackCC *) c.view;

    }
    cell.textLabel.font = [UIFont boldSystemFontOfSize:15.0];
    FeedbackQuestionDC *feedBack = [dataArray objectAtIndex:[indexPath row]];
         cell.lblQuestion.text = feedBack.FeedbackQuestionDC_QuestionText;

    cell.txtViewAnswer.tag=indexPath.row;
    cell.txtViewAnswer.text=feedBack.FeedbackQuestionDC_Answers;

    cell.txtViewAnswer.delegate=self;

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:21:12.190

首先获取特定索引处的单元格，然后从中获取视图，然后是 textview

使用以下函数获取单元格

```
[table cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:17:12.397

// 我认为这对你有用，试试这个

```
- (void)textViewDidEndEditing:(UITextView *)textView
{
    feedBackCC *cellsuperView = (feedBackCC *)[textView superview];

    nslog(@"%@",cellsuperView.txtViewAnswer.text);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:04:24.813

```
- (void)textViewDidEndEditing:(UITextView *)textView
{
   FeedbackQuestionDC *feedBack = [dataArray objectAtIndex:textView.tag];
   feedBack.FeedbackQuestionDC_Answers=textView.text;
   [dataArray addObject:feedBack]; //REMOVE THIS LINE 
   [myTableView reloadData];
} 
```

请参阅上面的代码删除我建议的行，您不需要再次将对象添加到数组中，它已经使用 dataArray 中对象的引用进行了更新。

希望这可以帮助..

# javascript - 如何通过onclick将弹出框的输入数据传递给jsp？

> ID：15758986
> 
> 赞同：1
> 
> 时间：2013-04-02T08:00:01.500
> 
> 标签：javascript, jsp

我想通过`onclick`Javascript 输入密码，然后将密码值传递给`JSP`文件以存储其域。

```
input id=save type=button onClick="password=prompt('Enter your password');" 
```

如何在弹出框中将此密码值传递给 JSP 或用户域？

或者我可以使用 jquery 来实现这个功能吗？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:13:53.283

你可以做类似的事情

```
<input id="save" type="button" onClick="if (pass = prompt('Enter your password')) { $('#password').val(pass); }">

<input type="hidden" name="password" id="password"> 
```

# symfony - Composer.phar 更新现在会导致 MonologBu ndle 的 ErrorException

> ID：15758997
> 
> 赞同：1
> 
> 时间：2013-04-02T08:00:50.970
> 
> 标签：symfony, symfony-2.2, monolog

symfony/symfony v2.2.0
独白/独白 v1.4.1

昨天运行后`composer.phar update`，更新了独白；今天运行相同的命令会导致以下错误消息：

```
Loading composer repositories with package information
Updating dependencies (including require-dev)
Generating autoload files

  [ErrorException]
  Warning: constant(): Couldn't find constant Monolog\Logger::DEBUG in [path]\vendor\symfony\monolog-bundle\Symfony\Bundle\MonologBundle\DependencyInjection\MonologExtension.php line 109 
```

config_dev.yml 的（我认为）相关部分

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        firephp:
            type:  firephp
            level: info 
```

是否发生了需要额外配置的更改，或者发生了其他事情？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-25T23:35:49.913

Monolog 最近切换到 PSR-4 兼容的自动加载。可能您正在运行的 Composer 版本太旧了。请先运行 composer self-update 并再次尝试更新您的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:39:52.280

听起来更新不太顺利 - 你有 Logger 类`vendor/monolog/monolog/src/Monolog/Logger.php`吗？如果不是，我建议删除该`vendor/monolog`目录并运行 composer install 将其取回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T19:31:23.123

我有同样的事情，但对于*Laravel*。

我通过创建`app/storage`文件夹及其所有子文件夹和文件来解决它。

我通过创建一个新的空项目来获得它们，并且只是一个复制粘贴！

现在起床...

* * *

这是文件结构：

```
app/storage/cache  
app/storage/logs  
app/storage/meta  
app/storage/sessions  
app/storage/views 
```

您可以为您的存储库忽略此文件夹。